# StackOverflow 问答 14108000-14108999

# ruby-on-rails - 我们如何才能使用“Nokogiri”仅从特定父部门的网页中获取文本？

> ID：14108000
> 
> 赞同：0
> 
> 时间：2013-01-01T05:18:37.460
> 
> 标签：ruby-on-rails, ruby, nokogiri

我正在制作一个 Rails 应用程序，我应该使用它`Nokogiri`来解析浏览器数据。我可以使用 css 类和标签来获取数据。

现在我的问题是，如果我们想再次从有 3 或 4 种标签（p、span、sup、b..etc）的父部门获取文本数据，那么**我们如何才能获取所有标签一次在父部门中的数据？**

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T05:33:23.393

如果存在涉及某些类型的标签（如`p`、`u`、`b`等）的父部门，请编写如下代码：

```
 url="http://www.google.co.in"
 doc = Nokogiri::XML(open(url))
 your_required_text = doc.css('#main-head').text 
```

在`#main-head`划分下，所有文本都将返回。

我认为以上内容对您有用。

# database - 如何访问 Django 中未在 models.py 中定义的模型的数据？

> ID：14108003
> 
> 赞同：2
> 
> 时间：2013-01-01T05:19:09.007
> 
> 标签：database, django

我已经正确配置了数据库。如果我想从`hello`名为`genes`. 正确的方法是什么？我不能这样做，`books.models import hello`因为我在 models.py 中没有你好。数据库基因和表 hello 不是默认的 Django 数据库。我有两个数据库。我已经设置好了`Router`。我现在想访问数据。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:08:25.170

你需要做几件事..

设置.py

```
DATABASES = {
    'genes': {
        'ENGINE':   'django.db.backends.mysql',
        'NAME':     'genes',
        'USER':     'root',
        'PASSWORD': 'root',
        'HOST':     'localhost',
        'PORT':     '3360',
    },
    'default': {
        'ENGINE':   'django.db.backends.mysql',
        'NAME':     'django',
        'USER':     'root',
        'PASSWORD': 'root',
        'HOST':     'localhost',
        'PORT':     '3360',
    }
}

DATABASE_ROUTERS = ['genes.routers.GeneRouter',] 
```

路由器.py

```
class GeneRouter(object):
    """A router to control all database operations on models in
    the genes application"""

    def db_for_read(self, model, **hints):
        "Point all operations on genes models to 'genes'"
        if model._meta.app_label == 'genes':
            return 'remrate'
        return None

    def db_for_write(self, model, **hints):
        "Point all operations on genes models to 'genes'"
        if model._meta.app_label == 'genes':
            return 'remrate'
        return None

    def allow_syncdb(self, db, model):
        "Make sure the genes app only appears on the 'genes' db"
        if model._meta.app_label in ['south']:
            return True
        if db == 'remrate':
            return model._meta.app_label == 'genes'
        elif model._meta.app_label == 'genes':
            return False
        return None 
```

一个你有这个设置然后你需要创建models.py文件

模型.py

```
class Hello(models.Model):
    """Hello model"""

    field1 = models.CharField(max_length=64)

    class Meta:
        db_table = u'hello'
        managed = False 
```

以编程方式做到这一点..

```
python manage.py inspectdb 
```

完成后 - 您应该能够使用标准 Django 查询集进行查询

```
Hello.objects.all() 
```

# html - 使用 php 从网页发布 html 元素

> ID：14108007
> 
> 赞同：-1
> 
> 时间：2013-01-01T05:20:22.423
> 
> 标签：html, post

我想在我的数据库中存储一个 html 表作为单个记录。我的意思是当我点击提交时应该发布下表：

```
<table>
    <tr><td>Items</td></tr>
</table> 
```

有可能实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T05:26:56.253

按原样，没有。只有位于 a中的表单元素（`input`、`select`、等）包含在表单提交中。`textarea``form`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T05:32:11.643

将此添加到javascript：---

```
<script type="text/javascript">
function submit()
{
 document.getElementByID("hidTbl").value=document.getElementByID("tblToSave").innerHTML;
 document.getElementByID("form1").submit();
} 
</script> 
```

Eidt 你的 html 如下：-

```
<form action="some.php" method="post" name="form1" id="form1">
<input type="hidden" name="hidTbl" id="hidTbl" >
<input type="button" onclick="submit()" value="Post/save">
</form>

<div id="tblToSave">   
<table>
<tr><td>Items</td></tr>
</table>

</div> 
```

现在在您的 php 中获取隐藏输入的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T05:40:37.680

从这个 JS 开始

```
function postwith () {
  var myForm = document.createElement("form");
  myForm.method="post" ;
  myForm.action = "PATH-TO-SERVER-SIDE-SCRIPT";

    var myInput = document.createElement("input") ;
    myInput.setAttribute("name", "table") ;
    myInput.setAttribute("value", document.getElementByID("postTable").innerHTML);
    myForm.appendChild(myInput) ;

  document.body.appendChild(myForm) ;
  myForm.submit() ;
  document.body.removeChild(myForm) ;
} 
```

然后这个HTML：

```
<div id="postTable">
<table>
    <tr><td>Items</td></tr>
</table>
</div>
<a href="javascript:postwith()">Submit</a> 
```

因此，只需将“PATH-TO-SERVER-SIDE-SCRIPT”更改为您要发布到的脚本。

在您的脚本内部，只需获取`$_POST['table']`.

# javascript - Javascript 比较值 === +value

> ID：14108008
> 
> 赞同：2
> 
> 时间：2013-01-01T05:20:31.347
> 
> 标签：javascript, underscore.js

> **可能重复：**
> [javascript：javascript中变量](https://stackoverflow.com/questions/6682997/javascript-plus-symbol-before-variable)
> [obj.length === +obj.length之前的加号](https://stackoverflow.com/questions/9188998/obj-length-obj-length-in-javascript)

在查看[underscore.js 的来源时，](https://github.com/documentcloud/underscore/blob/master/underscore.js)我遇到了这一行（#79）

```
//some stuff
} else if (obj.length === +obj.length) {
//do stuff 
```

我不是 100% 确定这里发生了什么，任何人都可以解释 obj.length 值之前的“+”的目的吗？如果只是阅读，比较是否相同：

```
} else if (obj.length === obj.length) { 
```

在 underscore.js 中多次进行了相同类型的比较，所以我很确定这不是错字。

如果有人可以向我指出一篇文章，或者向我抛出一些正确的术语，我将不胜感激:)。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T05:39:18.583

它正在检查`length`属性是否为数字。当应用一元`+`时，它将返回对象的数字表示或`NaN`，这将是比较通过或失败的基础。对于第一种情况，如果`obj`没有`length`属性`+undefined`，它将返回`NaN`。如果`obj.length`是数字，则条件将通过。

# jquery - 隐藏表格第一行中的元素

> ID：14108011
> 
> 赞同：4
> 
> 时间：2013-01-01T05:21:33.780
> 
> 标签：jquery, html, css

我有下表

```
<table id="mytable">
  <tr>
     <td>name</td>
     <td>
       <a id="button1" class="button">link</a>
     </td>
  </tr>
  <tr>
     <td>name2</td>
     <td>
       <a id="button2" class="button">link</a>
     </td>
  </tr>
</table> 
```

我想使用 jQuery 隐藏第一行第一列按钮，但我不知道该怎么做，但我设法做到了以下（使第一个 tr 字体斜体）。

```
$(document).ready(function() {
  $("#mytable tr:first").css("font-style", "italic");
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T05:22:51.483

正如您拥有`id`的按钮一样，您可以使用 id 来隐藏它。

```
$('#button1').hide(); 
```

如果您想使用`class`并且由于某种原因不能使用 id，您可以使用[**find()**](http://api.jquery.com/find/)方法在满足给定选择器条件的*后代中查找元素。*

**[现场演示](http://jsfiddle.net/rajaadil/fR7wt/)**

```
$(document).ready(function() {
  $("#mytable tr:first").find('.button').hide();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T05:30:03.190

使用此代码

```
 <script>
        $(document).ready(function() {
      $("#mytable tr:first #button1").css("display", "none");
    });
    </script> 
```

# asp.net-mvc - 如何将 KendoUI DropDownListFor 绑定到 ViewData 或 ViewBag？

> ID：14108019
> 
> 赞同：6
> 
> 时间：2013-01-01T05:24:02.097
> 
> 标签：asp.net-mvc, kendo-ui

我正在尝试将 KendoUI DropDownListFor 用于我的模型外键并将其与 ViewData/ViewBag 完整列表绑定，但似乎无法正常工作，我错过了什么吗？

```
@(Html.DropDownListFor(model => model.Hotel.HotelStatusId, ViewData["HotelStatuses"] as SelectList)) 
```

这似乎可行，但需要我创建一个视图模型。

```
@(Html.Kendo().DropDownListFor(model => model.Hotel.HotelStatusId)
                              .BindTo(Model.HotelStatuses)
                              .OptionLabel("select hotel status...")
                              ) 
```

我避免使用 viewmodel，因为我需要将数据提交回 ASP MVC。使用自定义视图模型，我无法正确绑定它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T10:45:30.933

Viewbag/ViewData 可以在控制器中这样填充：

```
ViewData["HotelStatuses"] = 
new SelectList(db.HotelStatuses, "HotelStatusId", "HotelStatusText"); 
```

在视图中，您可以使用 ViewData/ViewBag：

```
 @(Html.Kendo().DropDownListFor(model => model.Hotel.HotelStatusId)
 .BindTo(ViewData["HotelStatuses"] as SelectList))
 .DataTextField("Text") 
```

# oracle - 带有 sysdate 的 to_date 函数

> ID：14108022
> 
> 赞同：4
> 
> 时间：2013-01-01T05:25:17.533
> 
> 标签：oracle, oracle10g, oracle11g, sysdate

```
select TO_CHAR(to_date(sysdate, 'DD-MON-YYYY'), 'DAY') FROM DUAL; 
```

当我运行这个查询时，输出是：SUNDAY。但我们知道今天是星期二（2013 年 1 月 1 日）。和

然后将查询更改为

```
select TO_CHAR(to_date('01-JAN-2013', 'DD-MON-YYYY'), 'DAY') FROM DUAL; 
```

答案是：星期二。

然后将查询更改为

```
select TO_CHAR(to_date(sysdate+1, 'DD-MON-YYYY'), 'DAY') FROM DUAL; 
```

答案是：星期一。

当我使用 sysdate 为什么它显示 SUNDAY 作为输出？

我是 Oracle 数据库的新手。请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T05:44:30.197

用这个：

```
 select TO_CHAR(sysdate, 'DAY') FROM DUAL; 
```

你正在使用这个：

```
 to_date(sysdate, 'DD-MON-YYYY') 
```

这是给你 date=1/1/0013 星期天

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T05:30:30.567

请参阅[此处](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions172.htm)的 sysdate 文档。Sysdate 已经是一个日期数据类型。

您的示例查询不合适，因为`to_date`函数将第一个参数作为 String not `date`。

试试下面的简单查询：

```
 select TO_CHAR(sysdate, 'DAY') FROM DUAL; 
```

这应该`TUESDAY`作为输出返回。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-24T08:37:34.247

`To_date`用于将字符串转换为日期。由于`sysdate`已经是日期，因此不得添加 add to_date。

# javascript - dojo中的valiadte文本框

> ID：14108027
> 
> 赞同：0
> 
> 时间：2013-01-01T05:26:33.330
> 
> 标签：javascript, validation, dojo

我正在尝试验证一个文本框：

我有 2 个文本框。如果第一个文本框或第二个文本框的值有效，则表单将成功提交，如果两个文本框均为空，则会显示错误。

这是我的代码：

```
<script>
           dojo.require("dojo.parser"); 
           dojo.require("dijit.form.ValidationTextBox"); 
           dojo.require("dijit.form.Form");
            dojo.require("dijit.form.Button");
                </script>
    </head>
    <body class="claro">
        <div data-dojo-type="dijit.form.Form" action="" id="myForm" data-dojo-id="myForm" method="post">
                <script type="dojo/method" data-dojo-event="onReset">
                    return confirm('Press OK to reset values');
                </script>
                <script type="dojo/method" data-dojo-event="onSubmit">
                    if(this.validate()){
                    return true;
                    }else{
                    if((dijit.byId('a').value==null && dijit.byId('b').value!=null) ){

                    alert('Valid data');
                    return true;
                    }
                    alert('Form contains invalid data.  Please correct first');
                    return false;
                    }
                    return true;
                </script>

                <input type="text" name="a" dojoType="dijit.form.ValidationTextBox" required="true" id="a"/>
        <input type="text" name="b" dojoType="dijit.form.ValidationTextBox" required="true" id="b"/>
        <button data-dojo-type="dijit.form.Button" type="submit" name="submitButton" value="Submit">Submit</button>
        </div> 
```

它不起作用，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T03:54:46.223

文本框的值不会为空，如果在声明中没有提供任何值，它将被初始化为空字符串。对于您的情况，请尝试按如下方式更改条件：

```
if((!dijit.byId('a').value && !dijit.byId('b').value)){
    this.validate();
    alert('Not Valid Form!');
    return false;
} else {
    return true;
} 
```

# dependencies - 如何拆分现有的 Debian 软件包，以使其中一个新软件包预先依赖于另一个？

> ID：14108035
> 
> 赞同：2
> 
> 时间：2013-01-01T05:28:30.150
> 
> 标签：dependencies, debian

Debian Policy Manual 的第[7.4](http://www.debian.org/doc/debian-policy/ch-relationships.html#s-conflicts)和[7.6.1](http://www.debian.org/doc/debian-policy/ch-relationships.html#s-replaces)节描述了将 Debian 软件包一分为二的正确方法。但是，我有一个更复杂的情况。

我目前有两个包，例如版本 1.2.3：

```
Package: foo-base

Package: foo-dbserver
Depends: foo-base (>= 1.2.3) 
```

最初，这种关系是有道理的，但随着时间的推移，有些偶然，**foo-base**的元素已经开始依赖于**foo-dbserver 的**元素。更糟糕的是，现实情况是**foo-base** *Pre- 的*元素依赖于**foo-dbserver 的**元素。所以我现在想要的是将**foo-base**拆分为**foo-essential**和**foo-base**，如下所示，对于 1.2.4 版本：

```
Package: foo-essential
Replaces: foo-base (<< 1.2.3)
Breaks: foo-base (<< 1.2.3)

Package: foo-dbserver
Depends: foo-essential (>= 1.2.4)

Package: foo-base
Pre-Depends: foo-dbserver (>= 1.2.4) 
```

这三个软件包在新安装时安装得很好，但它们并没有完全升级：

```
dpkg: regarding foo-base_1.2.4_all.deb containing foo-base, pre-dependency problem:
 foo-base pre-depends on foo-dbserver (>= 1.2.4)
  foo-dbserver latest configured version is 1.2.3
dpkg: error processing foo-base_1.2.4_all.deb (--install):
 pre-dependency problem - not installing foo-base
dpkg: regarding foo-essential_1.2.4_all.deb containing foo-essential:
 foo-essential breaks foo-base (<< 1.2.3)
  foo-base (version 1.2.3) is present and installed.
dpkg: error processing foo-essential_1.2.4_all.deb (--install):
 installing foo-essential would break foo-base, and
 deconfiguration is not permitted (--auto-deconfigure might help)
(Reading database ... 39107 files and directories currently installed.)
Preparing to replace foo-dbserver 1.2.3 (using foo-dbserver_1.2.4_all.deb) ...
Unpacking replacement foo-dbserver ...
dpkg: dependency problems prevent configuration of foo-dbserver:
 foo-dbserver depends on foo-essential (>= 1.2.4); however:
  Package foo-essential is not installed.
dpkg: error processing foo-dbserver (--install):
 dependency problems - leaving unconfigured
Errors were encountered while processing:
 foo-base_1.2.4_all.deb
 foo-essential_1.2.4_all.deb
 foo-dbserver 
```

有没有办法正确表达这种关系，以便升级？将 foo-base 完全重命名为其他名称（并使用名称**foo-essential**、**foo-dbserver**、**foo-base2**）是更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T03:25:35.260

我找到的解决方案是将包拆分为另一个方向。也就是说，将原始包名保留为 Pre-Depended 的包名，并为执行 Pre-Depending 的包名使用新的包名。

```
Package: foo-base

Package: foo-dbserver
Depends: foo-essential (>= 1.2.4)

Package: foo-extra
Pre-Depends: foo-dbserver (>= 1.2.4)
Replaces: foo-base (<< 1.2.3)
Breaks: foo-base (<< 1.2.3) 
```

# jquery - jQuery ajax 多次追加 html

> ID：14108048
> 
> 赞同：0
> 
> 时间：2013-01-01T05:31:24.707
> 
> 标签：jquery

我目前遇到了一些问题，基本上我创建了一些 populateModal() 函数来使用相应的 html 填充模态容器。它适用于 populateModal3 和 populateModal4 （相同的功能但具有不同的 url 值）。

ajax 以 json 格式返回数据，并且在其他两个 populateModal 函数中运行良好。

这是函数的片段

```
$.ajax({
                url: "transaction/get_transaction",
                dataType: 'json'
            }).done(function(data){
                $('#transModalContainerDel, #transModalContainerEdit').empty();
                console.log(data);
                for (var i = 0; i < data.length; i++)
                {                   
                    console.log('id data: ' + data[i].id);
                    theDelTransModal += 'id modal: ' + data[i].id;
                    //theDelTransModal += '<div id="transModalDel' + data[i].id + '" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="deleteTransaction" aria-hidden="true">';
                    //theDelTransModal += '<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button><h3 id="myModalLabel">Delete transaction?</h3></div>';
                    //theDelTransModal += '<div class="modal-body"><p>Are you sure you want to delete this transaction? Note that you can\'t undo this action.</p></div>';
                    //theDelTransModal += '<div class="modal-footer"><a class="btn" data-dismiss="modal" aria-hidden="true">Cancel</a><a href="transaction/delete_transaction/' + data[i].id + '" class="btn btn-primary" id="delete-trans" data-dismiss="modal">Delete</a></div>';
                    //theDelTransModal += '</div>';
                    //$('#transModalContainerDel').append(theDelTransModal);
                    console.log(theDelTransModal);
                }       
            }); 
```

从上面的代码可以看出，返回的数据是正确的 json 格式。但我尝试记录的 id 返回此值。

```
id data: 21 
id modal: 21 
id data: 22 
id modal: 21id modal: 22 
```

我不确定出了什么问题，因为此功能非常适合其他网址。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T05:38:03.557

只是因为字符串连接

```
theDelTransModal += 'id modal: ' + data[i].id; 
```

等于：

```
theDelTransModal = theDelTransModal+ 'id modal: ' + data[i].id; 
```

通过删除加号就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T05:38:43.533

使用ajax成功方法

```
$.ajax({
                url: "transaction/get_transaction",
                dataType: 'json',
                success:function(data){

$('#transModalContainerDel, #transModalContainerEdit').empty();
                console.log(data);
                for (var i = 0; i < data.length; i++)
                {                   
                    console.log('id data: ' + data[i].id);
                    theDelTransModal += 'id modal: ' + data[i].id;
                    //theDelTransModal += '<div id="transModalDel' + data[i].id + '" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="deleteTransaction" aria-hidden="true">';
                    //theDelTransModal += '<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button><h3 id="myModalLabel">Delete transaction?</h3></div>';
                    //theDelTransModal += '<div class="modal-body"><p>Are you sure you want to delete this transaction? Note that you can\'t undo this action.</p></div>';
                    //theDelTransModal += '<div class="modal-footer"><a class="btn" data-dismiss="modal" aria-hidden="true">Cancel</a><a href="transaction/delete_transaction/' + data[i].id + '" class="btn btn-primary" id="delete-trans" data-dismiss="modal">Delete</a></div>';
                    //theDelTransModal += '</div>';
                    //$('#transModalContainerDel').append(theDelTransModal);
                    console.log(theDelTransModal);
                }       
}
            }); 
```

# android - 如何防止 Nexus7 从 layout-sw360dp 加载屏幕？

> ID：14108050
> 
> 赞同：2
> 
> 时间：2013-01-01T05:31:51.327
> 
> 标签：android, nexus-7

我正在开发一个仅适用于手机设备而非平板电脑的 android 应用程序。

我的应用适用于分辨率为 720x1280 且密度为 xhdpi 的 ICS 设备（例如：Galaxy S3、Galaxy Nexus、Xperia V 等）

如果我使用 layout-sw360dp 如何防止/阻止 Nexus7 平板电脑加载我的应用程序屏幕？

或者如何限制应用程序只能在 720x1280 分辨率的手机设备上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T05:57:35.867

> 首先获取设备的宽度和高度，您可以轻松控制它。

```
 Display display = getWindowManager().getDefaultDisplay(); 
            int width = display.getWidth();
            int height = display.getHeight();

            System.out.println(width+" "+height);

            if(height>720 && width>1280)
            {
                mainActivityrun();
            }
          else
          {
               finish();
           } 
```

# scala - 为什么使用 Resolver 方法的 sbt 解析器不起作用？

> ID：14108054
> 
> 赞同：3
> 
> 时间：2013-01-01T05:32:17.183
> 
> 标签：scala, build, sbt

我在本地 maven repo 中安装了一个 jarjar:jarjar:1.0，而我的 build.sbt 是

```
名称：=“测试”

版本：=“1.0”

libraryDependencies += "jarjar" % "jarjar" % "1.0"

解析器 += Resolver.file("maven-l", file("/Volumes/Data/Repo/Maven"))

```

它说 jarjar 无法解析，并且显示解析器给出：

```
> 显示解析器
[信息]列表（FileRepository（maven-l，FileConfiguration（true，None），sbt.Patterns@30ea6dbc））

```

这看起来不对。

使用

```
解析器+=“maven-l”在“/Volumes/Data/Repo/Maven”
```

它工作得很好。

```
> 显示解析器
[信息] 列表（maven-l：/Volumes/Data/Repo/Maven）

```

我想知道这是为什么？这是一个错误，还是指定的？我正在使用 sbt 0.12.1

参考：[http ://www.scala-sbt.org/release/docs/Detailed-Topics/Resolvers.html](http://www.scala-sbt.org/release/docs/Detailed-Topics/Resolvers.html)

# android - 启动器加载器：java.lang.outofmemoryexception

> ID：14108059
> 
> 赞同：1
> 
> 时间：2013-01-01T05:32:57.400
> 
> 标签：android, memory, launcher

每当我尝试通过 Eclipse 在设备上安装我的 android 应用程序时，我都会收到此错误，然后我的应用程序会被安装，但是一旦我从我的应用程序中返回，当我按下后退按钮，如联系人应用程序、本机消息传递应用程序等。我得到的启动器错误详细信息是：

`01-01 10:21:15.820: E/AndroidRuntime(4632): FATAL EXCEPTION: launcher-loader 01-01 10:21:15.820: E/AndroidRuntime(4632): java.lang.OutOfMemoryError 01-01 10:21:15.820: E/AndroidRuntime(4632): at android.graphics.Bitmap.nativeCreate(Native Method) 01-01 10:21:15.820: E/AndroidRuntime(4632): at android.graphics.Bitmap.createBitmap(Bitmap.java:605) 01-01 10:21:15.820: E/AndroidRuntime(4632): at android.graphics.Bitmap.createBitmap(Bitmap.java:551) 01-01 10:21:15.820: E/AndroidRuntime(4632): at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437) 01-01 10:21:15.820: E/AndroidRuntime(4632): at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:543) 01-01 10:21:15.820: E/AndroidRuntime(4632): at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:518) 01-01 10:21:15.820: E/AndroidRuntime(4632): at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:370) 01-01 10:21:15.820: E/AndroidRuntime(4632): at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773) 01-01 10:21:15.820: E/AndroidRuntime(4632): at android.content.res.Resources.loadDrawable(Resources.java:1935) 01-01 10:21:15.820: E/AndroidRuntime(4632): at android.content.res.Resources.getDrawableForDensity(Resources.java:707) 01-01 10:21:15.820: E/AndroidRuntime(4632): at com.android.launcher2.IconCache.getFullResIcon(IconCache.java:82) 01-01 10:21:15.820: E/AndroidRuntime(4632): at com.android.launcher2.IconCache.getFullResIcon(IconCache.java:116) 01-01 10:21:15.820: E/AndroidRuntime(4632): at com.android.launcher2.IconCache.cacheLocked(IconCache.java:246) 01-01 10:21:15.820: E/AndroidRuntime(4632): at com.android.launcher2.IconCache.getTitleAndIcon(IconCache.java:161) 01-01 10:21:15.820: E/AndroidRuntime(4632): at com.android.launcher2.AllAppsList.updatePackage(AllAppsList.java:248) 01-01 10:21:15.820: E/AndroidRuntime(4632): at com.android.launcher2.LauncherModel$PackageUpdatedTask.run(LauncherModel.java:1637) 01-01 10:21:15.820: E/AndroidRuntime(4632): at android.os.Handler.handleCallback(Handler.java:605) 01-01 10:21:15.820: E/AndroidRuntime(4632): at android.os.Handler.dispatchMessage(Handler.java:92) 01-01 10:21:15.820: E/AndroidRuntime(4632): at android.os.Looper.loop(Looper.java:137) 01-01 10:21:15.820: E/AndroidRuntime(4632): at android.os.HandlerThread.run(HandlerThread.java:60)` 是设备内存问题还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T05:47:12.547

尝试在启动您的应用程序之前从您的虚拟设备中擦除用户数据。有时，以前的 apk 会“卡在”我的设备中并给我错误，直到我清除设备内存。由于它是运行时异常，我认为这不是由您的虚拟设备中的内存量引起的。

# magento - magento 如何维护网格值

> ID：14108061
> 
> 赞同：0
> 
> 时间：2013-01-01T05:33:23.733
> 
> 标签：magento, magento-1.7

我想知道磁电机在哪里以及如何存储数据以维护网格过滤器和模式类型。就像我在显示五条记录时转到列表页面并选择列表模式，然后转到同一站点的其他页面并返回。它向我展示了我以前的网格模式和记录。我显示`$_REQUEST`，但在那里看不到任何东西。任何人都知道我怎样才能获得这些价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T09:26:21.543

Magento 存储限制，订单，方向`Mage::getSingleton('catalog/session')`。如果在 REQUEST 中找到 limit,order,direction ，则在 中设置新值`Mage::getSingleton('catalog/session')`。

可以查看类中的**getLimit(),getCurrentMode(),getCurrentOrder(),getCurrentDirection()**函数

> app\code\core\Mage\Catalog\Block\Product\List\Toolbar.php

# android - 删除以特定单词开头的文件

> ID：14108065
> 
> 赞同：1
> 
> 时间：2013-01-01T05:34:39.623
> 
> 标签：android

在我的应用程序中创建了一些临时文件，其名称以“temp”开头。如何在退出时从 sd 卡中删除这些文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T05:39:55.653

您可以从 SDCARD 中删除文件：

```
File folder = new File(Environment.getExternalStorageDirectory() + "/tempdirname");

 try {
    File[] filenamestemp = folder.listFiles();

    for(int i=0;i<filenamestemp.length;i++){
          if(filenamestemp[i].getAbsolutePath().toString().contains("temp"))
             filenamestemp[i].delete();     
        }

    } catch (IOException e) {
    // TODO Auto-generated catch block
     e.printStackTrace();
   } 
```

并确保您已在以下位置添加 SDCARD 访问权限`AndroidManifest.xml`：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# emacs - 为 emacs 安装 ritz-nrepl

> ID：14108066
> 
> 赞同：0
> 
> 时间：2013-01-01T05:34:47.143
> 
> 标签：emacs, clojure

我正在尝试设置 ritz-nrepl 以使用 emacs 作为 clojure 调试器。

我有 lein 2。我有 emacs 24.2.1（全新安装）和 clojure-mode。然后我在 nREPL 调试器安装下执行了自述文件在[https://github.com/pallet/ritz/tree/develop/nrepl](https://github.com/pallet/ritz/tree/develop/nrepl)`init.el`中所说的内容（将东西放入and `.lein/profiles.clj`），然后执行了`M-x nrepl-ritz-jack-in`. 我得到了下面的输出。难道我做错了什么？我只做了我说的，仅此而已。也许我错过了一步？

```
Could not find artifact robert:hooke:jar:1.1.2 in central (http://repo1.maven.org/maven2)

Retrieving robert/hooke/1.1.2/hooke-1.1.2.jar (3k)from https://clojars.org/repo/

Retrieving leiningen/leiningen/2.0.0-preview10/leiningen-2.0.0-preview10.jar (165k)

    from https://clojars.org/repo/

Retrieving leiningen-core/leiningen-core/2.0.0-preview10/leiningen-core-2.0.0-preview10.jar (21k)

    from https://clojars.org/repo/

Exception in thread "main" java.lang.ClassNotFoundException: com.sun.jdi.VirtualMachine

    at java.net.URLClassLoader$1.run(Unknown Source)

    at java.net.URLClassLoader$1.run(Unknown Source)

    at java.security.AccessController.doPrivileged(Native Method)

    at java.net.URLClassLoader.findClass(Unknown Source)

    at clojure.lang.DynamicClassLoader.findClass(DynamicClassLoader.java:61)

    at java.lang.ClassLoader.loadClass(Unknown Source)

    at java.lang.ClassLoader.loadClass(Unknown Source)

    at java.lang.Class.forName0(Native Method)

    at java.lang.Class.forName(Unknown Source)

    at ritz.jpda.jdi$eval1039$loading__4784__auto____1040.invoke(jdi.clj:1)

    at ritz.jpda.jdi$eval1039.invoke(jdi.clj:1)

    at clojure.lang.Compiler.eval(Compiler.java:6511)

    at clojure.lang.Compiler.eval(Compiler.java:6501)

    at clojure.lang.Compiler.load(Compiler.java:6952)

    at clojure.lang.RT.loadResourceScript(RT.java:359)

    at clojure.lang.RT.loadResourceScript(RT.java:350)

    at clojure.lang.RT.load(RT.java:429)

    at clojure.lang.RT.load(RT.java:400)

    at clojure.core$load$fn__4890.invoke(core.clj:5415)

    at clojure.core$load.doInvoke(core.clj:5414)

    at clojure.lang.RestFn.invoke(RestFn.java:408)

    at clojure.core$load_one.invoke(core.clj:5227)

    at clojure.core$load_lib.doInvoke(core.clj:5264)

    at clojure.lang.RestFn.applyTo(RestFn.java:142)

    at clojure.core$apply.invoke(core.clj:603)

    at clojure.core$load_libs.doInvoke(core.clj:5298)

    at clojure.lang.RestFn.applyTo(RestFn.java:137)

    at clojure.core$apply.invoke(core.clj:603)

    at clojure.core$require.doInvoke(core.clj:5381)

    at clojure.lang.RestFn.invoke(RestFn.java:1096)

    at ritz.jpda.debug$eval888$loading__4784__auto____889.invoke(debug.clj:1)

    at ritz.jpda.debug$eval888.invoke(debug.clj:1)

    at clojure.lang.Compiler.eval(Compiler.java:6511)

    at clojure.lang.Compiler.eval(Compiler.java:6501)

    at clojure.lang.Compiler.load(Compiler.java:6952)

    at clojure.lang.RT.loadResourceScript(RT.java:359)

    at clojure.lang.RT.loadResourceScript(RT.java:350)

    at clojure.lang.RT.load(RT.java:429)

    at clojure.lang.RT.load(RT.java:400)

    at clojure.core$load$fn__4890.invoke(core.clj:5415)

    at clojure.core$load.doInvoke(core.clj:5414)

    at clojure.lang.RestFn.invoke(RestFn.java:408)

    at clojure.core$load_one.invoke(core.clj:5227)

    at clojure.core$load_lib.doInvoke(core.clj:5264)

    at clojure.lang.RestFn.applyTo(RestFn.java:142)

    at clojure.core$apply.invoke(core.clj:603)

    at clojure.core$load_libs.doInvoke(core.clj:5298)

    at clojure.lang.RestFn.applyTo(RestFn.java:137)

    at clojure.core$apply.invoke(core.clj:605)

    at clojure.core$use.doInvoke(core.clj:5392)

    at clojure.lang.RestFn.invoke(RestFn.java:3659)

    at ritz.nrepl$eval5$loading__4784__auto____6.invoke(nrepl.clj:1)

    at ritz.nrepl$eval5.invoke(nrepl.clj:1)

    at clojure.lang.Compiler.eval(Compiler.java:6511)

    at clojure.lang.Compiler.eval(Compiler.java:6501)

    at clojure.lang.Compiler.load(Compiler.java:6952)

    at clojure.lang.RT.loadResourceScript(RT.java:359)

    at clojure.lang.RT.loadResourceScript(RT.java:350)

    at clojure.lang.RT.load(RT.java:429)

    at clojure.lang.RT.load(RT.java:400)

    at clojure.core$load$fn__4890.invoke(core.clj:5415)

    at clojure.core$load.doInvoke(core.clj:5414)

    at clojure.lang.RestFn.invoke(RestFn.java:408)

    at clojure.core$load_one.invoke(core.clj:5227)

    at clojure.core$load_lib.doInvoke(core.clj:5264)

    at clojure.lang.RestFn.applyTo(RestFn.java:142)

    at clojure.core$apply.invoke(core.clj:603)

    at clojure.core$load_libs.doInvoke(core.clj:5298)

    at clojure.lang.RestFn.applyTo(RestFn.java:137)

    at clojure.core$apply.invoke(core.clj:603)

    at clojure.core$require.doInvoke(core.clj:5381)

    at clojure.lang.RestFn.invoke(RestFn.java:408)

    at user$eval1.invoke(NO_SOURCE_FILE:1)

    at clojure.lang.Compiler.eval(Compiler.java:6511)

    at clojure.lang.Compiler.eval(Compiler.java:6501)

    at clojure.lang.Compiler.eval(Compiler.java:6500)

    at clojure.lang.Compiler.eval(Compiler.java:6477)

    at clojure.core$eval.invoke(core.clj:2797)

    at clojure.main$eval_opt.invoke(main.clj:297)

    at clojure.main$initialize.invoke(main.clj:316)

    at clojure.main$null_opt.invoke(main.clj:349)

    at clojure.main$main.doInvoke(main.clj:427)

    at clojure.lang.RestFn.invoke(RestFn.java:421)

    at clojure.lang.Var.invoke(Var.java:419)

    at clojure.lang.AFn.applyToHelper(AFn.java:163)

    at clojure.lang.Var.applyTo(Var.java:532)

    at clojure.main.main(main.java:37)

Subprocess failed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T11:10:40.733

我认为您在类路径中缺少 tools.jar，您会在 JDK（不是 JRE）的 lib 目录中找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:52:24.427

如果其他人有这个问题，这就是我解决它的方法（它比安装 JDK 稍微复杂一些）

1.  安装 JDK。我把它放在 C:\jdk1.7.0
2.  用于`lein-localrepo`将其安装为本地 jar，如下所示：
3.  添加`:plugins [[lein-localrepo "0.4.0"]]`到您的用户个人资料中`.lein\profiles.clj`
4.  `lein deps`
5.  `lein localrepo install "C:/jdk1.7.0/lib/tools.jar" "com.sun.jdi.VirtualMachine" 1.7.0`
6.  确保`lein-localrepo`可以找到罐子。`lein localrepo list | grep jdi`应该显示：`com.sun.jdi.VirtualMachine (1.7.0)`
7.  添加`:dependencies [[com.sun.jdi.VirtualMachine "1.7.0"]]`到您的用户资料
8.  `lein deps`
9.  在 emacs 中，`nrepl-ritz-jack-in`现在应该可以正常工作

# c# - 如何在树视图中搜索子节点

> ID：14108067
> 
> 赞同：2
> 
> 时间：2013-01-01T05:34:47.033
> 
> 标签：c#

我是这样试的

```
private void btnFind_Click(object sender, EventArgs 
{
    for (int i = 0; i < treeView1.Nodes.Count - 1; i++)
    {
        MessageBox.Show(i.ToString());
        treeView1.Nodes[i].BackColor = Color.Empty;
    }
    var result = from TreeNode node in treeView1.Nodes
                 where node.Text.Contains( Convert.ToString(txtFind.Text))
                 select node.Index;

    foreach (int search in result)
    {
        treeView1.Nodes[search].BackColor = Color.Yellow;
    }
} 
```

但是这样我只能找到父节点。有没有合适的方法来做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T16:21:17.820

您可以使用一种方法来处理 TreeView，然后使用另一种方法来递归调用子节点。这将加载 _matchingNodes 与您的文本匹配的所有节点。

```
Private List<TreeNode> _matchingNodes; 

// Process the TreeView.
private void ProcessTreeView(TreeView treeView, String FindText)
{
   _matchingNodes = new List<TreeNode>();

  // Process each node recursively.
   foreach (TreeNode n in treeView.Nodes)
   {
      if(n.Text.Contains(FindText))
        _matchingNodes.Add(n);

      ProcessRecursive(n, FindText);
   }

}

private void ProcessRecursive(TreeNode treeNode, String FindText)
{

  // Process each node recursively.
   foreach (TreeNode n in treeNode.Nodes)
   {
      if(n.Text.Contains(FindText))
        _matchingNodes.Add(n);

      ProcessRecursive(n, FindText);
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T16:07:26.780

```
private void btnFind_Click(object sender, EventArgs e)
        {
            CallRecursive(treeView1);
        }
        private void PrintRecursive(TreeNode treeNode)
        {

            if (treeNode.Text.Contains(txtFind.Text.ToString()))
            {
                //MessageBox.Show(treeNode.Text);
                treeNode.BackColor = Color.Blue;
            }
            else
            {
                treeNode.BackColor = Color.Empty;
            }
            // Print each node recursively.

            foreach (TreeNode tn in treeNode.Nodes)
            {

                PrintRecursive(tn);

            }

        }

        // Call the procedure using the TreeView.

        private void CallRecursive(TreeView treeView)
        {

            // Print each node recursively.

            TreeNodeCollection nodes = treeView.Nodes;

            foreach (TreeNode n in nodes)
            {

                PrintRecursive(n);

            }

        } 
```

我像这样解决了它，它按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-11T19:08:41.760

TreeView.nodes.find(nodeName,1)

数字 1 也指定查看所有子节点。0 表示不包括孩子。仅在 Powershell 中测试。

也许对于搜索节点的文本没有太大帮助，但希望您可以获得节点名称。

# jquery - Rails jquery自动完成字段扭曲

> ID：14108068
> 
> 赞同：1
> 
> 时间：2013-01-01T05:35:01.533
> 
> 标签：jquery, css, ruby-on-rails, autocomplete

我的应用程序基于[rails3-autocomplete-jquery](https://github.com/crowdint/rails3-jquery-autocomplete) 一切都很好，只是它扭曲了相关字段。见下图。

![在此处输入图像描述](../Images/a0449e3d79ae22248eb35f7d1dc0ef99.png)

如您所见，表单字段被自动完成 gem 自动生成的解释扭曲了。我想知道我是否可以自定义或删除整个解释。另外，我如何定位解释和出现的选择？

提前谢谢你的帮助。我很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T05:42:17.123

您只需将以下 css 添加到您的代码中：

```
.ui-helper-hidden-accessible{ display:none} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:06:57.550

你在使用 jQuery UI 吗？据我所知，它提供了一些基本样式，因此它出现在您的其他内容之上。您可以通过编写自己的 CSS 来覆盖默认值来自己设置样式。不过，我不确定是否要更改消息的内容。您可以更改源代码，或者 API [http://api.jqueryui.com/autocomplete/中可能存在某些内容](http://api.jqueryui.com/autocomplete/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T21:01:04.827

没有代码，除了通用的 Web 开发建议之外，很难给你任何东西。这个问题目前的形式并不能真正回答，但这里有一些关于这个问题的评论：

*   尝试 grepping 您的代码库和关联的 js 文件以获取“可用，使用向上和向下箭头”。页面上显示的任何消息都必须位于用于生成它的代码中。从那里开始工作以查看该消息的定义位置以及是否可以覆盖它。您可能可以提供一个参数来更改消息，或者您可以自己提供 javascript 并更改消息。

*   至于定位，你只需要更新你的 CSS。使用谷歌浏览器，右键单击并检查建议列表中的元素，您可以看到哪些 CSS 规则适用于它，以及各种事物的类名是什么。找到定义这些规则的样式表并编辑它们，或者添加额外的规则来覆盖它们。一般来说，Chrome 中的 webkit 检查器应该非常有助于诊断 CSS 规则是否搞砸了。

最后，我对可能导致这种情况的原因有一些*猜测：*

1.  您可能有一些过于宽泛的 CSS 规则，这些规则弄乱了 jquery-ui 使用的默认定位。
2.  您使用的 jquery 或 jquery-ui 版本与关联的样式表之间也可能不兼容。尝试重新安装两者的最新版本，建议可能会更好看。
3.  您可能根本不包括 jquery-ui 样式表。这些建议看起来根本没有真正的样式或定位，因此可能只是缺少一组 CSS 指令。

# python - 使用 python tkinter 进行 html 文件 i/o

> ID：14108069
> 
> 赞同：1
> 
> 时间：2013-01-01T05:35:06.287
> 
> 标签：python, firefox, file-io, tkinter, xpcom

我有一个 Web 桌面应用程序，它使用 XPCOM 文件选择器写入和读取本地文件系统，它在 firefox12 中完美运行。然而，后来的 firefox 版本（尤其是当前的 v17）完全禁止使用 xpcom 文件功能。

我想将文件请求传递给本地机器上服务器上的 python tkinter。我可以在 IDLE 和 .py 或 .cgi 文件中打开 tkinter 文件选择器，但是如何让文件对话框重新出现在应用程序的调用 html 页面中？我需要这种交互性而不离开应用程序的页面。任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T03:46:51.253

根据 I/O 的复杂性和频率，您可以将参数发布到 python CGI 脚本并以 JSON 对象的形式返回结果

首先，在 JS 中：

```
function doIO (data) {
  var request = new XMLHttpRequest(); 
  request.onreadystatechange = function () {
    if (request.readyStatus == 4) {
      if (request.status == 200) { 
        alert('Success!');
        var data = JSON.parse(xmlhttp.responseText);
        // do something with response data
      }
      else { alert('Failure'!); }
    }
  };
  request.open("POST", python_cgi, true);
  request.send(data);
} 
```

在 python 中，您需要实现一个 CGI 脚本来解析数据，找出请求的 I/O 并执行它。您的 python 脚本可能类似于以下内容：

```
import cgi, json, sys
form = cgi.FieldStorage()
command = form.getFirst('command')
if command == "filePicker":
    # run tkinter file picker
    # build json response object
elif commoand == "myIoCommand":
    # do some I/O
    # build json response object
print "Status: 200"
print "Content-Type: application/json"
json.dump(response, sys.stdout) 
```

如果您需要一些灵感来形成您的 json 响应对象，请参阅例如[Google Maps 的 JSON 响应。](https://developers.google.com/maps/documentation/geocoding/#JSON)

如果您需要更频繁/更复杂的 I/O，也许您需要做的是通过更小、更频繁的 AJAX 调用为您的应用程序设置一个具有镜像状态的 Python 服务器。您可以使用框架来制作 RESTful 应用程序，也可以通过从[`BaseHTTPServer`](http://docs.python.org/2/library/basehttpserver.html).

# debian - 如何制作 Debian OpenERP 软件包，或对现有软件包进行逆向工程？

> ID：14108070
> 
> 赞同：0
> 
> 时间：2013-01-01T05:35:06.800
> 
> 标签：debian, openerp

我想构建自己的 Debian 软件包，类似于[http://nightly.openerp.com/](http://nightly.openerp.com/)提供的软件包，但来自我自己的分支。我看到 openobject-server 有一个 debian/ 目录，但这似乎并不那么简单：

```
~/openobject-server$ dpkg-buildpackage -us -uc
changing mode of /Network/Servers/xserve.macprofessionals.lan/Volumes/Data/Users/pfrost/openobject-server/7.0/debian/openerp/usr/bin/openerp-server to 755
   dh_install
   dh_installdocs
   dh_installchangelogs
install: omitting directory `./history'
dh_installchangelogs: install -o 0 -g 0 -p -m644 ./history debian/openerp/usr/share/doc/openerp/changelog returned exit code 1
make: *** [binary] Error 2
dpkg-buildpackage: error: fakeroot debian/rules binary gave error exit status 2 
```

如果我删除 ./history，那么我可以构建一个包，并且我认为有更好的方法可以告诉 dh_installchangelogs 真正的变更日志在哪里，这样 ./history/ 就不会混淆它。

即便如此，像这样的打包不包括 openobject-addons 和 openerp-web 项目，它们没有被 debianized，但 openerp.com 每晚构建确实包括在内。有没有更简单的方法来复制该包装，或者我只需从头开始重新包装所有东西？

**编辑：**

由于似乎没有人知道 OpenERP 是如何构建他们的包的（我怀疑它不是公开的），有没有关于如何从提供的二进制包中提取有用的打包位并在我自己的情况下重新使用它们的想法？我发现的几个包反汇编指令只涉及源包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T09:39:04.590

根据`dh_installchangelogs`手册页，您可以使用`-X`or`--exclude`标志排除上游变更日志：

> **-X** item, **--exclude** =item
> 不安装文件名中任何位置包含项目的上游变更日志文件。

如果这确实是您构建的唯一问题，只需将其添加到以下`dh_insallchangelogs`行`debian/rules`：

> ```
>  dh_installchangelogs -X./history 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:45:47.903

OpenERP SA 用于夜间构建的代码位于启动板上，作为[openerp-tools](http://launchpad.net/openerp-tools)包的一部分。具体来说，这里是[7.0 的明显相关文件](http://bazaar.launchpad.net/~openerp-dev/openerp-tools/trunk/view/head:/packaging70/package70.py)。它有效地做到了这一点：

```
bzr 导出 lp:~openerp/openobject-server/7.0 服务器
bzr 导出 lp:~openerp/openobject-addons/7.0 插件
bzr 导出 lp:~openerp/openerp-web/7.0 web
mv 插件/* 服务器/openerp/插件/
mv web/addons/* 服务器/openerp/addons
光盘服务器
dpkg-buildpackage

```

感谢 Antony Lesuisse 在[这个有用的邮件列表帖子](https://lists.launchpad.net/openerp-community/msg01917.html)中提供此信息。

我发现了一些对适当构建所需的包装的修复。我已经[修复了构建依赖项](https://code.launchpad.net/~bitglue/openobject-server/fix-debian-builddeps)，以便包将在一个干净的环境中构建，比如 pbuilder。我还[合并了 Flimzy 建议的修复程序](https://code.launchpad.net/~bitglue/openobject-server/fix-dh_installchangelogs)。此外，我还[解决了一些 lintian 警告](https://code.launchpad.net/~bitglue/openobject-addons/fix-unexecutable-files)。我还为[openobject-server](https://code.launchpad.net/~bitglue/openobject-server/packaging)、[openobject-addons](https://code.launchpad.net/~bitglue/openobject-addons/packaging)和[openerp-web 开发](https://code.launchpad.net/~bitglue/openerp-web/packaging)了单独打包的打包，虽然我认为这个打包非常笨拙，这反映了我非常基础的知识。欢迎改进。

所有这些更改，以及我为本地版本所做的一些功能调整，都已合并到[我在启动板上的食谱中，](https://code.launchpad.net/~bitglue/+recipes)并[内置在此 PPA](https://launchpad.net/~bitglue/+archive/openerp)中。

# c# - 使用 Visual Studio 2012、C# 以编程方式创建 SQL 服务器数据库、表、导入

> ID：14108073
> 
> 赞同：0
> 
> 时间：2013-01-01T05:35:48.703
> 
> 标签：c#, asp.net, sql, sql-server, visual-studio

当我在控制 db 然后在 aspx gridview 中填充它时，我迷失了方向，所以我更喜欢在 Visual Studio 中执行此操作。

我有多个文本文件，我想为它们创建 SQL Server db，并根据列值创建文本文件数据并将其加载到 db 表中。

```
[if text file column a value = 1 then 
 if sql db table 1 exist import else
 create sql db table 1 and import] 
```

所有表都将具有相同的结构。如果您指导我如何执行此操作或指导我学习一个好的教程。我读到我需要添加一个参考 sqlmdo 来在 vs 中创建数据库，但由于它不在那里，我下载了它，但我不知道如何将它添加到程序集中。主要思想是使用 vs.... 来控制和执行此操作，在此先感谢。

# android - 不同型号手机上的布局

> ID：14108074
> 
> 赞同：5
> 
> 时间：2013-01-01T05:36:05.833
> 
> 标签：android, android-layout

最近我为 Galaxy 10.1 ,7 英寸 1024x600 ,480x800 开发了一个应用程序，Note 800 高度 abd S3 720 高度。他们都在这些分辨率上完美运行。但是当我们谈论note 2和galaxy 7 plus等时，我们遇到了几个问题。这些设备上的布局没有正确显示。在那个我在布局中遇到问题时，我使用 layouts 文件夹作为 layouts-normal-xhdpi-1280x800 和 S3 layouts-normal-xhdpi-1280x720 并将所有布局放在一个文件夹中，这使得一个 apk 支持所有这些布局。

但是当客户下载 apk 时，他们会遇到一个问题，即 Galaxy Note 选择了 layout-normal-xhpi-1280x720 布局，这是正确的，但 S3 和 Galaxy Note 2 的密度不同。

由于这个问题，我不知道如何为 S3 和 Note 2 声明布局文件夹。有什么方法可以让我只使用默认的四个文件夹

布局 Xlarge

正常布局 Xhdpi

布局 mdpi

正常布局 hdpi

并支持所有屏幕的所有布局，如 S3、note 1、note 2、7 英寸加等。当我尝试开始我的项目时，我总是想到其中一个著名的大型游戏是“Temple Run”，它可以在所有手机和标签上运行。

制作一堆布局文件夹使我的应用程序很重，就像它超过了 80MB 的限制，而 Google 市场只接受少于 50MB 的应用程序。

从编程上讲，有什么方法可以让我们只使用一个布局文件夹并在所有屏幕上支持这种布局。我阅读了许多文章和 android 开发者门户，但它们并不满足我。他们都说你必须为不同的屏幕制作不同的布局文件夹，甚至在 stackoverflow 上我也看到了相同的情况，以节省我在第一个项目中使用这些技术的时间，但是我的工作现在每天都在增加，我希望我从那些使我的应用程序不会因为这些布局而变得沉重的技术开始，而且不要浪费我的时间来为应用程序数量制作布局数量。

帮助的数量将不胜感激，我想要答案和建议，因为这些问题是由许多新开发人员和其他开发人员所面临的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T06:01:47.463

我在我的应用程序中也面临这样的问题。但我找到了一个很好的解决方案。我只有一种布局`tablet`，目录名称是`layout-sw600dp`. 现在，当部分涉及高度和宽度问题时，我创建了几个不同`values`的目录来放置`dimensions`和`font size`其他存根。所以平板屏幕没有任何`constant`价值`layout`。

```
androd:layout_width:"60dp" // i drop this scenario

androd:layout_width:"@dimen/tab_width" // i used this scenario 
```

你的`values`目录名称会像

```
values-xlarge
values-large 
```

所有值都将从您的值目录中获取。它不会创建不同的布局，但一个布局可以多次使用。

**编辑：**

以下是`Developer.android`网站的话。配置示例

为了帮助您针对不同类型的设备进行一些设计，以下是典型屏幕宽度的一些数字：

```
320dp: a typical phone screen (240x320 ldpi, 320x480 mdpi, 480x800 hdpi, etc).
480dp: a tweener tablet like the Streak (480x800 mdpi).
600dp: a 7” tablet (600x1024 mdpi).
720dp: a 10” tablet (720x1280 mdpi, 800x1280 mdpi, etc). 
```

使用表 2 中的尺寸限定符，您的应用程序可以使用您想要的任何宽度和/或高度数字在手机和平​​板电脑的不同布局资源之间切换。例如，如果 600dp 是您的平板电脑布局支持的最小可用宽度，您可以提供以下两组布局：

res/layout/main_activity.xml # 对于手机
res/layout-sw600dp/main_activity.xml # 对于平板电脑

===

在此，您可以看到 1280*720 的布局在下面，因此您应该使用这个让您决定差异的东西，`layout-sw720dp`而不是创建。`layout-normal-xlarge`而不是使用`layout-large-mdpi`and进行不同的识别`layout-large-ldpi`，您不只是通过它来识别`smallest width`吗？因为，android`drawables`为不同的图像提供目录，唯一的就是它的分辨率。你有上述解决方案。

# java - Android adb 无法连接到 ip 地址

> ID：14108078
> 
> 赞同：1
> 
> 时间：2013-01-01T05:36:50.110
> 
> 标签：java, android

我已成功在 Oracle Virtual box 中安装了 android 操作系统。

但我面临一个问题，

我尝试了很多选择，但我无法解决这个问题。

我的问题是 -**我无法 adb 连接到虚拟盒 android 操作系统。**

![在此处输入图像描述](../Images/3f842817b054fb9b0327a77f6936ae2f.png)

当我选择**仅主机适配器**选项时，很容易与 adb 连接，但在 android virtual box os 中**没有互联网连接。**

![在此处输入图像描述](../Images/ce03bc06d7a74ae682dc0251c6b18df0.png) 当我选择**NAT**时，Internet 连接正常，但无法与 adb 连接。 ![在此处输入图像描述](../Images/64d9cb48f151455e3b09b180021b053c.png)

请帮助我如何解决我的问题..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T06:50:09.180

最后，我解决了我的问题。这是我的解决方案：

在模拟器中按 CTRL + Home 键，然后按设备 > 网络适配器。

![按键结果截图](../Images/0dc331845e72715d8e3a7e45a6edd185.png)

查看菜单，选择网络并选择桥接适配器。

![配置截图](../Images/100c99f1cbb20697cfea6aec43fde55c.png)

在模拟器中按 CTRL + ALT + F1 打开 Android 终端并输入以下命令：

`netcfg`

![netcfg 的示例结果](../Images/e745308bec6896da9f6e060f1ca30e7a.png)

按 CTRL + ALT + F7 查看图形视图。

重启模拟器。在命令中使用找到的 IP：

`adb connect <IP address>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T05:41:33.373

首先在 Android VM Terminal Emulator 中**启用 adb over tcpip 。**

输入命令#

> 亚行 tcpip 5555

然后从命令行通过 adb 连接

输入命令#

> 亚行连接 219.91.220.142

**更多资源：**

*   [如何通过 TCP 使用 ADB 连接到 Android？](https://stackoverflow.com/questions/2604727/how-can-i-connect-to-android-with-adb-over-tcp)
*   [Android - adb tcpip 错误](https://stackoverflow.com/questions/11074868/android-adb-tcpip-error)
*   [VirtualBox 上的 Android x86：Android 已连接但未在线](https://stackoverflow.com/questions/10760490/android-x86-on-virtualbox-android-connected-but-not-online)

# c# - AutoMapper 枚举到字节与实现 IMapperConfigurator

> ID：14108080
> 
> 赞同：18
> 
> 时间：2013-01-01T05:37:18.330
> 
> 标签：c#, c#-4.0, automapper

枚举定义是

```
public enum RowStatusEnum
{
    Modified = 1,
    Removed = 2,
    Added = 3
}

public class RowStatusEnumConvertor : IMapperConfigurator
{
    public void Cofigure()
    {
        Mapper.CreateMap<RowStatusEnum, byte>();
        Mapper.CreateMap<byte, RowStatusEnum >();
    }
} 
```

我在 RowStatusEnumConvertor 类中使用实现 IMapperConfigurator 配置 autoMapper，但无法使用此代码且未映射此类型，我认为我的配置不正确或不够，请帮助我

谢谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-04T01:50:09.283

像这样的东西对你有用吗？

**类.cs**

```
namespace StackOverflow.RowStatus
{
    public enum RowStatusEnum
    {
        Modified = 1,
        Removed = 2,
        Added = 3
    }
} 
```

**AutoMapperConfigurator.cs**

```
namespace StackOverflow.RowStatus
{
    using System;
    using System.Linq;

    using AutoMapper;

    public class MyProfile : Profile
    {
        protected override void Configure()
        {
            Mapper.CreateMap<byte, RowStatusEnum>().ConvertUsing(
                x => Enum.GetValues(typeof(RowStatusEnum))
                         .Cast<RowStatusEnum>().First(y => (byte)y == x));
            Mapper.CreateMap<RowStatusEnum, byte>().ConvertUsing(
                x => (byte)x);
        }
    }
} 
```

**映射测试.cs**

```
namespace StackOverflow.RowStatus
{
    using AutoMapper;

    using NUnit.Framework;

    [TestFixture]
    public class MappingTests
    {
        [Test]
        public void AutoMapper_Configuration_IsValid()
        {
            Mapper.Initialize(m => m.AddProfile<MyProfile>());
            Mapper.AssertConfigurationIsValid();
        }

        [TestCase(1, Result = RowStatusEnum.Modified)]
        [TestCase(2, Result = RowStatusEnum.Removed)]
        [TestCase(3, Result = RowStatusEnum.Added)]
        public RowStatusEnum AutoMapper_ConvertFromByte_IsValid(
                                                   byte rowStatusEnum)
        {
            Mapper.Initialize(m => m.AddProfile<MyProfile>());
            Mapper.AssertConfigurationIsValid();
            return Mapper.Map<byte, RowStatusEnum>(rowStatusEnum);
        }

        [TestCase(RowStatusEnum.Modified, Result = 1)]
        [TestCase(RowStatusEnum.Removed, Result = 2)]
        [TestCase(RowStatusEnum.Added, Result = 3)]
        public byte AutoMapper_ConvertFromEnum_IsValid(
                                                   RowStatusEnum rowStatusEnum)
        {
            Mapper.Initialize(m => m.AddProfile<MyProfile>());
            Mapper.AssertConfigurationIsValid();
            return Mapper.Map<RowStatusEnum, byte>(rowStatusEnum);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2020-08-30T21:53:12.430

从`9`Automapper 版本开始，初始化发生了变化，导致上述示例过时。我更新了上面的示例并保留了原始值以引用旧版本（NUnit `3.12.0`）：

**行状态枚举**

```
namespace StackOverflow.RowStatus
{
    public enum RowStatusEnum
    {
        Modified = 1,
        Removed = 2,
        Added = 3
    }
} 
```

**AutoMapperConfigurator.cs**

```
namespace StackOverflow.RowStatus
{
    using System;
    using System.Linq;

    using AutoMapper;

    public class MyProfile : Profile
    {
        public MyProfile()
        {
            CreateMap<byte, RowStatusEnum>().ConvertUsing(
                x => Enum.GetValues(typeof(RowStatusEnum))
                    .Cast<RowStatusEnum>().First(y => (byte)y == x));
            CreateMap<RowStatusEnum, byte>().ConvertUsing(
                x => (byte)x);
        }
    }
} 
```

**映射测试**

```
namespace StackOverflow.RowStatus
{
    using AutoMapper;

    using NUnit.Framework;

    [TestFixture]
    public class MappingTests
    {
        [Test]
        public void AutoMapper_Configuration_IsValid()
        {
            var config = new MapperConfiguration(cfg => cfg.AddProfile<MyProfile>());
            config.AssertConfigurationIsValid();
        }

        [TestCase(1, ExpectedResult = RowStatusEnum.Modified)]
        [TestCase(2, ExpectedResult = RowStatusEnum.Removed)]
        [TestCase(3, ExpectedResult = RowStatusEnum.Added)]
        public RowStatusEnum AutoMapper_ConvertFromByte_IsValid(
            byte rowStatusEnum)
        {
            var config = new MapperConfiguration(cfg => cfg.AddProfile<MyProfile>());
            var mapper = config.CreateMapper();
            return mapper.Map<byte, RowStatusEnum>(rowStatusEnum);
        }

        [TestCase(RowStatusEnum.Modified, ExpectedResult = 1)]
        [TestCase(RowStatusEnum.Removed, ExpectedResult = 2)]
        [TestCase(RowStatusEnum.Added, ExpectedResult = 3)]
        public byte AutoMapper_ConvertFromEnum_IsValid(
            RowStatusEnum rowStatusEnum)
        {
            var config = new MapperConfiguration(cfg => cfg.AddProfile<MyProfile>());
            var mapper = config.CreateMapper();
            return mapper.Map<RowStatusEnum, byte>(rowStatusEnum);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-01T22:46:58.430

我已经重现了你的问题。解决方案很简单，不要配置 AutoMapper 并将枚举的基本类型设置为字节。像这样：

```
public enum RowStatusEnum : byte
{
   Modified = 1,
   Removed = 2,
   Added = 3,
} 
```

让它工作：

```
byte x = 3;
RowStatusEnum rowStatus = Mapper.Map<RowStatusEnum>(x); 
//The result will be: Added 
```

# javascript - 跨浏览器修复，OnScroll 功能

> ID：14108082
> 
> 赞同：2
> 
> 时间：2013-01-01T05:37:51.377
> 
> 标签：javascript, html, cross-browser

```
window.onscroll = function()
{
if( window.XMLHttpRequest ) {
var bodyId=document.getElementById('bodymain');
    if (bodyId.scrollTop > 187) {
    //make some div's position fixed
    } else {
           //make some div's position absolute

    }
}
} 
```

此代码适用于 Chrome，但不适用于 IE9。你能推荐这个代码的跨浏览器版本吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T05:45:47.883

```
window.onscroll = function() {
    var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
    if (scrollTop > 187) {
        //make some div's position fixed
    } else {
        //make some div's position absolute
    }
} 
```

[**小提琴**](http://jsfiddle.net/kxwUp/1/)

这应该在 IE7 之后的所有浏览器中都能正常工作。它只是不会在 IE6 中运行，因为它不支持`position:fixed`.

# perl - 如何从命令行针对索引列的字典文件过滤制表符分隔的数据文件？

> ID：14108087
> 
> 赞同：0
> 
> 时间：2013-01-01T05:38:46.553
> 
> 标签：perl, sed, awk, grep

我有文件`file1`包含

```
123 foo
45  bar
678 foobar
... 
```

并`file2`包含

```
xyz
foo
foobar
... 
```

我想获得一个文件，其中只有`file1`第二列出现在的行`file2`：

```
123 foo
678 foobar
... 
```

列由制表符分隔。如果可能，我想从 Mac OS X 命令行运行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T15:04:52.160

这绝对是一份工作`join`：

```
$ join -1 2 -2 1 <(sort file) <(sort file2)
foo 123
foobar 678 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T05:52:25.520

使用 Perl：

```
use strict;
use warnings;

my %seen;
open (my $input2, "<", "input2") or die("open input2: $!");
while (<$input2>) { chomp; $seen{$_}++; }
close $input2;

open (my $input1, "<", "input1") or die("open input1: $!");
while (<$input1>) {
  chomp;
  my $key = (split (/\s+/))[1];
  print "$_\n" if $seen{$key};
}
close $input1; 
```

或者您可以使用`join`and执行此操作`sort`：

```
sort input2 > input2sorted
join -1 2 -2 1 input1 input2sorted 
```

此外，下次您可以发布您对该问题的看法并提出更具体的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T14:32:53.003

**试试这个 ：**

```
grep -f file2 file1 > Output.txt 
```

**文件 1**

```
123 foo
45  bar
678 foobar 
```

**文件2**

```
xyz
foo
foobar 
```

**输出.txt**

```
123 foo
678 foobar 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T10:12:29.910

这是一种使用方法`awk`：

```
awk -F "\t" 'FNR==NR { a[$0]++; next } $2 in a' file2 file1 
```

结果：

```
123 foo
678 foobar 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T14:49:16.303

```
awk 'FNR==NR{a[$0];next}($2 in a)' file2 file1 
```

[在此处](http://theunixshell.blogspot.in/2012/12/file-comparisons-using-awk-match-columns.html) 或[此处](http://theunixshell.blogspot.in/2012/12/awk-one-liner-for-multi-column.html)查看更多示例：

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-01T17:23:45.127

这是一个使用[File::Slurp](http://search.cpan.org/~uri/File-Slurp-9999.19/lib/File/Slurp.pm)读取文件的 perl 选项。 `map`用于使用“键”初始化散列，`grep`如果条目在散列中，则正则表达式获取用于仅通过匹配行的最后一列条目：

```
use strict;
use warnings;
use File::Slurp qw/read_file/;

my %keys = map { chomp; $_ => 1 } read_file 'file2.txt';
print for grep { /\t(.+)$/; $keys{$1} } read_file 'file1.txt'; 
```

数据集的输出：

```
123 foo
678 foobar 
```

# python - BAT 还是 python/perl？

> ID：14108095
> 
> 赞同：-3
> 
> 时间：2013-01-01T05:40:07.033
> 
> 标签：python, perl, batch-file

嗨，我想写一些脚本来做一些自动机，选择是我可以使用`Windows BAT`还是`Python/Perl`，哪个更好？为简单起见。

例如，我想以固定的时间间隔执行以下命令来禁用/启用 WLAN 接口卡：

```
 netsh interface set interface name="Wi-Fi 2" admin=disabled
 netsh interface set interface name="Wi-Fi 2" admin=enable 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T07:30:41.040

如果这是您将要编写的唯一自动化脚本，请不要花时间学习其中任何一个。让别人去做。你可以让一个高中生做这么简单的事情，只要他的 Steam 愿望清单上的任何视频游戏的成本。

另一方面，如果你要反复做这种事情，你肯定想学习至少一种脚本语言，至少达到新手的水平。最终，您可能会想知道每组 Python、Perl 或 Ruby 中的至少一个；DOS 批处理、bash（在 MinGW 或 cygwin 下）或 PowerShell；和一些 .NET 脚本语言。

但是 SO 不是问先学习哪一个，甚至不适合这个特定任务的地方。

# c - 简单的 ADD/ADC ARM 组装失败

> ID：14108099
> 
> 赞同：4
> 
> 时间：2013-01-01T05:41:10.317
> 
> 标签：c, gcc, assembly, arm

我有（据说）相同代码的以下 C 和 ASM 版本。它所做的是将由 2 个 64 位整数表示的 2 个 128 位整数加载到寄存器（首先是 4* 低 32 位，然后是 4* 高 32 位）和`ADD`/`ADC`到它们。这是足够简单的代码，ARM/ST 手册实际上给出了与 96 位（3 `ADD`/ `ADC`s）相同的示例。

对于简单的调用，两个版本都可以工作（重复添加`(1 << x++)`或 1..x）。但是对于更长的测试套件，ARM 组装失败（板挂起）。ATM 我没有能力捕获/调试它，也不能使用任何`printf()`或类似的方法来发现测试失败，这无论如何都无关紧要，因为 ASM 版本中必须存在一些基本错误，因为 C 版本按预期工作。

我不明白，它很简单，并且非常接近 C 汇编输出（无分支）。我尝试了“内存”约束（不需要），我尝试将低位和高位 64 位之间的进位保存在寄存器中，然后使用`ADD(C).W`、对齐、使用两个`LDR`/`STR`而不是`LDRD`/`STRD`等添加它。我假设电路板故障，因为某些加法出错并导致除以 0 或类似的东西。GCC ASM 在下面并使用类似的基本技术，所以我没有看到问题。

我真的只是在寻找进行添加的最快方法，而不是专门修复该代码。`rX`很遗憾您必须使用常量寄存器名称，因为指定and没有约束`rX+1`。此外，不可能使用 GCC 一样多的寄存器，因为它会在编译期间用完它们。

```
typedef struct I128 {
    int64_t high;
    uint64_t low;
} I128;

I128 I128add(I128 a, const I128 b) {
#if defined(USEASM) && defined(ARMx)
    __asm(
            "LDRD %%r2, %%r3, %[alo]\n"
            "LDRD %%r4, %%r5, %[blo]\n"
            "ADDS %%r2, %%r2, %%r4\n"
            "ADCS %%r3, %%r3, %%r5\n"
            "STRD %%r2, %%r3, %[alo]\n"

            "LDRD %%r2, %%r3, %[ahi]\n"
            "LDRD %%r4, %%r5, %[bhi]\n"
            "ADCS %%r2, %%r2, %%r4\n"
            "ADC %%r3, %%r3, %%r5\n"
            "STRD %%r2, %%r3, %[ahi]\n"
            : [alo] "+m" (a.low), [ahi] "+m" (a.high)
            : [blo] "m" (b.low), [bhi] "m" (b.high)
            : "r2", "r3", "r4", "r5", "cc"
            );
    return a;
#else
    // faster to use temp than saving low and adding to a directly
    I128 r = {a.high + b.high, a.low + b.low};
    // check for overflow of low 64 bits, add carry to high
    // avoid conditionals
    //r.high += r.low < a.low || r.low < b.low;
    // actually gcc produces faster code with conditionals
    if(r.low < a.low || r.low < b.low) ++r.high;
    return r;
} 
```

GCC C 版本使用“armv7m-none-eabi-gcc-4.7.2 -O3 -ggdb -fomit-frame-pointer -falign-functions=16 -std=gnu99 -march=armv7e-m”：

```
b082        sub sp, #8
e92d 0ff0   stmdb   sp!, {r4, r5, r6, r7, r8, r9, sl, fp}
a908        add r1, sp, #32
e881 000c   stmia.w r1, {r2, r3}
e9dd 890e   ldrd    r8, r9, [sp, #56]   ; 0x38
e9dd 670a   ldrd    r6, r7, [sp, #40]   ; 0x28
e9dd 2308   ldrd    r2, r3, [sp, #32]
e9dd 450c   ldrd    r4, r5, [sp, #48]   ; 0x30
eb16 0a08   adds.w  sl, r6, r8
eb47 0b09   adc.w   fp, r7, r9
1912        adds    r2, r2, r4
eb43 0305   adc.w   r3, r3, r5
45bb        cmp fp, r7
bf08        it  eq
45b2        cmpeq   sl, r6
d303        bcc.n   8012c9a <I128add+0x3a>
45cb        cmp fp, r9
bf08        it  eq
45c2        cmpeq   sl, r8
d204        bcs.n   8012ca4 <I128add+0x44>
2401        movs    r4, #1
2500        movs    r5, #0
1912        adds    r2, r2, r4
eb43 0305   adc.w   r3, r3, r5
e9c0 2300   strd    r2, r3, [r0]
e9c0 ab02   strd    sl, fp, [r0, #8]
e8bd 0ff0   ldmia.w sp!, {r4, r5, r6, r7, r8, r9, sl, fp}
b002        add sp, #8
4770        bx  lr 
```

我的 ASM 版本失败：

```
b082        sub sp, #8                                                                                  
b430        push    {r4, r5}                                                                            
a902        add r1, sp, #8                                                                              
e881 000c   stmia.w r1, {r2, r3}                                                                        
e9dd 2304   ldrd    r2, r3, [sp, #16]                                                                   
e9dd 4508   ldrd    r4, r5, [sp, #32]                                                                   
1912        adds    r2, r2, r4                                                                          
416b        adcs    r3, r5                                                                              
e9cd 2304   strd    r2, r3, [sp, #16]                                                                   
e9dd 2302   ldrd    r2, r3, [sp, #8]                                                                    
e9dd 4506   ldrd    r4, r5, [sp, #24]                                                                   
4162        adcs    r2, r4                                                                              
eb43 0305   adc.w   r3, r3, r5                                                                          
e9cd 2302   strd    r2, r3, [sp, #8]                                                                    
4604        mov r4, r0                                                                                  
c90f        ldmia   r1, {r0, r1, r2, r3}                                                                
e884 000f   stmia.w r4, {r0, r1, r2, r3}                                                                
4620        mov r0, r4                                                                                  
bc30        pop {r4, r5}                                                                                
b002        add sp, #8                                                                                  
4770        bx  lr 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:29:56.557

我没有从你的代码中得到一个挂起，但它也不起作用，不知道为什么。但是很容易修补编译器生成的代码来处理进位：

```
I128 I128add(I128 a, const I128 b) {

    I128 r = {a.high + b.high, a.low + b.low};
    return r;
} 
```

变成

```
000001e4 <I128add>:
 1e4:   b082        sub sp, #8
 1e6:   b4f0        push    {r4, r5, r6, r7}
 1e8:   e9dd 4506   ldrd    r4, r5, [sp, #24]
 1ec:   a904        add r1, sp, #16
 1ee:   e881 000c   stmia.w r1, {r2, r3}
 1f2:   e9dd 230a   ldrd    r2, r3, [sp, #40]   ; 0x28
 1f6:   1912        adds    r2, r2, r4
 1f8:   eb43 0305   adc.w   r3, r3, r5
 1fc:   e9dd 6704   ldrd    r6, r7, [sp, #16]
 200:   e9dd 4508   ldrd    r4, r5, [sp, #32]
 204:   1936        adds    r6, r6, r4
 206:   eb47 0705   adc.w   r7, r7, r5
 20a:   e9c0 6700   strd    r6, r7, [r0]
 20e:   e9c0 2302   strd    r2, r3, [r0, #8]
 212:   bcf0        pop {r4, r5, r6, r7}
 214:   b002        add sp, #8
 216:   4770        bx  lr 
```

修复了添加

```
.thumb_func
.globl test2
test2:
    sub sp, #8
    push    {r4, r5, r6, r7}
    ldrd    r4, r5, [sp, #24]
    add r1, sp, #16
    stmia r1, {r2, r3}
    ldrd    r2, r3, [sp, #40]
    add r2, r4
    adc r3, r5
    ldrd    r6, r7, [sp, #16]
    ldrd    r4, r5, [sp, #32]
    adc r6, r4
    adc r7, r5
    strd    r6, r7, [r0]
    strd    r2, r3, [r0, #8]
    pop {r4, r5, r6, r7}
    add sp, #8
    bx  lr 
```

最后结果

```
00000024 <test2>:
  24:   b082        sub sp, #8
  26:   b4f0        push    {r4, r5, r6, r7}
  28:   e9dd 4506   ldrd    r4, r5, [sp, #24]
  2c:   a904        add r1, sp, #16
  2e:   c10c        stmia   r1!, {r2, r3}
  30:   e9dd 230a   ldrd    r2, r3, [sp, #40]   ; 0x28
  34:   1912        adds    r2, r2, r4
  36:   416b        adcs    r3, r5
  38:   e9dd 6704   ldrd    r6, r7, [sp, #16]
  3c:   e9dd 4508   ldrd    r4, r5, [sp, #32]
  40:   4166        adcs    r6, r4
  42:   416f        adcs    r7, r5
  44:   e9c0 6700   strd    r6, r7, [r0]
  48:   e9c0 2302   strd    r2, r3, [r0, #8]
  4c:   bcf0        pop {r4, r5, r6, r7}
  4e:   b002        add sp, #8
  50:   4770        bx  lr 
```

请注意，thumb2 指令的数量较少，除非您使用的是支持 thumb2 的 cortex-A，否则从 flash (cortex-m) 中获取的那些指令（可能）很慢。我看到您正在尝试保存另外两个寄存器的推送和弹出，但您花费了更多的获取。您可以采用上述方法，仍然重新安排加载和存储并保存这两个寄存器。

到目前为止最小的测试。printfs 显示上面的单词添加，我没有看到你的代码。我仍在尝试解除调用约定（请为我们记录更多代码），看起来 r0 已由调用者准备好放置结果，其余部分在堆栈上。我正在使用 Stellaris 发射台（cortex-m4）。

# php - 使用php在文件中写入特殊字符

> ID：14108104
> 
> 赞同：0
> 
> 时间：2013-01-01T05:42:22.157
> 
> 标签：php, file

我正在使用 php 编写一个 .txt 文件。当我用一些特殊的字符创建它时，它会显示 Ascii 代码。就像我写一个字符串“我不知道”一样，它会显示“我不知道”。如何将其写为人类可编辑的格式？

代码如下

```
function WriteErrorLog($IntegrationId, $errorStr){
    // get integration name--------

    $integrationnameQuery = "select * from integration where IntegrationId = $IntegrationId";
    $queryRes = mysql_query($integrationnameQuery);
    $resRows = mysql_fetch_array($queryRes);
    $integrationName = $resRows['Name'];
    if(!file_exists('errors/'.$IntegrationId.'/'.date("Y.m.d").'_ErrorFile.txt')){
        $errorFile = 'errors/'.$IntegrationId.'/'.date("Y.m.d").'_ErrorFile.txt';
        $fh = fopen($errorFile, 'w') or die("can't open file");
        fwrite($fh, 'Integration Name: '.$integrationName."\r\n\r\n".date('Y-m-d H:i:s').': '.$errorStr."\r\n\r\n");
        fclose($fh);
    }else{
        $errorFile = 'errors/'.$IntegrationId.'/'.date("Y.m.d").'_ErrorFile.txt';
        $fh = fopen($errorFile, 'a+') or die("can't open file");
        fwrite($fh, date('Y-m-d H:i:s').': '.$errorStr."\r\n\r\n");
        fclose($fh);
    }
}

function CreateErrorLog($IntegrationId, $errorStr){
    if (!is_dir('./errors/'.$IntegrationId)) {
        mkdir('./errors/'.$IntegrationId);
        WriteErrorLog($IntegrationId, $errorStr);
    }else{
        WriteErrorLog($IntegrationId,  $errorStr);
    }
} 
```

我正在访问如下

```
CreateErrorLog('120', 'I don`t know'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T05:50:28.980

您可以通过特殊代码编写特殊字符：例如 \n 是 0x0A

或者您可以使用函数 chr() 将 ASCII 码转换为字符。

或者您可以在 (f|s)printf 函数中使用 %c。`printf("There is zero:%c", 0x30);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T05:49:16.383

如果您的代码中有`htmlspecialchars`or `htmlentities`，请将其删除。

# java - Java不能做声明？

> ID：14108105
> 
> 赞同：2
> 
> 时间：2013-01-01T05:43:06.353
> 
> 标签：java, ruby-on-rails, xml

我读了一篇博文[Dynamic Languages Strike Back](http://steve-yegge.blogspot.com/2008/05/dynamic-languages-strike-back.html)声称

> 为什么 Ruby on Rails 比 Struts 快？这引发了互联网上最大的一场激烈的争吵……这是因为他们正在序列化与 XML 之间的所有内容，因为 Java 无法进行声明。

谁能解释“Java 不能做声明”是什么意思，以及这与必须将所有内容序列化到 XML 和从 XML 序列化有什么关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T06:07:04.167

这可能是指 Java 无法在运行时以编程方式创建新对象。据此，在 RoR 中，值直接从 XML 资源文件传递到方法（并返回到），而无需每次都声明类的新实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T06:11:26.647

我相信在这种情况下的意思是 Java 不允许[声明式](http://en.wikipedia.org/wiki/Declarative_programming)编程。

# linux - 是否有任何与 Solaris pmap 等效的 AIX/Win 命令？

> ID：14108107
> 
> 赞同：0
> 
> 时间：2013-01-01T05:43:44.497
> 
> 标签：linux, unix, solaris, aix, solaris-10

我正在研究不同操作系统（如 AIX、Win 和 Unix）中的内存管理。pmap 命令适用于 Solaris，但我无法为 AIX 找到类似的命令。

pmap 是在 AIX 中工作还是有任何类似的命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T12:31:44.840

对于 AIX，这将是[procmap](http://pic.dhe.ibm.com/infocenter/aix/v7r1/index.jsp?topic=/com.ibm.aix.cmds/doc/aixcmds4/procmap.htm)，根据文档“打印进程的地址空间映射”。

您还可以查看[psutil](http://code.google.com/p/psutil/)这是一个 Python

> 模块提供了一个接口，用于通过使用 Python 以可移植的方式检索有关所有正在运行的进程和系统利用率（CPU、内存、磁盘、网络、用户）的信息，实现了命令行工具提供的许多功能，例如：ps、top、.. .，pmap。[...] 它目前支持 Linux、Windows、OSX 和 FreeBSD。

# silverlight - 找不到包含 BusyIndi cator 的程序集

> ID：14108108
> 
> 赞同：3
> 
> 时间：2013-01-01T05:44:02.297
> 
> 标签：silverlight, silverlight-4.0, silverlight-5.0, busyindicator

我的项目是用 Silverlight 4 编写的。最近我重新安装了系统并安装了 Silverlight 5。但是当我重新安装“一切”时，我遇到了 BusyIndi​​cator 的问题。看起来此控件已从 System.Windows.Controls.Toolkit 中删除，并且尝试编译我的项目（仍针对 Silverlight 4）失败并出现错误：

**找不到类型“ToolkitControls:BusyIndi​​cator”。**

命名空间定义如下：

```
xmlns:ToolkitControls="clr-namespace:System.Windows.Controls;
      assembly=System.Windows.Controls.Toolkit" 
```

我在 StackOverflow 上看到了很多其他主题，并看到人们广泛使用此控件。听起来我没有安装一些工具箱或错过任何程序集。

我确实安装了以下组件：

*   微软 VS 2010 SP1
*   适用于 Visual Studio® 2010 SP1 的工具 ( [http://www.microsoft.com/en-us/download/details.aspx?id=28358](http://www.microsoft.com/en-us/download/details.aspx?id=28358) )
*   Silverlight 5 工具包 - 2011 年 12 月 ( [http://silverlight.codeplex.com/releases/view/78435](http://silverlight.codeplex.com/releases/view/78435) )

**我需要别的东西吗？**

**可能我需要添加一些对我的项目的引用才能已经安装了链接到我的项目的工具箱？**

请指教，非常感谢任何帮助！

PS 最近发现 WPF 的类似问题和解决方案（[未找到类型工具包：BusyIndi​​cator](https://stackoverflow.com/questions/6387163/the-type-toolkitbusyindicator-was-not-found)）。但就我而言，我不知道从哪个程序集开始......我查看了 GAC 和“Program Files\Microsoft Silverlight”：在其中找不到任何与 Silverlight 控制工具箱相关的程序集。 .

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T06:23:02.057

我刚刚将相同的工具和 Silverlight 5 ToolKit 添加到我的 Visual Studio 安装中。我可以通过右键单击工具箱然后在选择项中选择来找到 BusyIndi​​cator，我发现它没有启用。

> 命名空间 = System.Windows.Controls
> 程序集名称 = System.Windows.Controls.Toolkit
> 目录 = C:\Program files (x86)\Microsoft SDKs\Silverlight\v5.0\Toolkit\dec11\Bin

![在此处输入图像描述](../Images/50427b820acd713224d3a2588eb144da.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T23:26:48.540

呵呵，虽然不是很明显，但答案很简单：

我应该为第四届 Silverlight (http://silverlight.codeplex.com/releases/view/43528) 安装工具包！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-18T16:46:35.010

我安装了 nuget 包，现在可以正常工作。

```
PM> Install-Package SilverlightToolkit-All 
```

# android - 初始化一个sqlite数据库android

> ID：14108111
> 
> 赞同：5
> 
> 时间：2013-01-01T05:44:38.537
> 
> 标签：android, android-sqlite

大家好，我对在 android 中进行开发非常陌生，我想在我的应用程序中添加一个数据库。

问题是我不知道如何只初始化整个表一次。

我做了很多阅读，我发现你可以`onCreate(SQLiteDatabase db)`在辅助类中的方法的覆盖中做到这一点。

这些是我的数据字段和我的`onCreate(SQLiteDatabase db)`方法。

```
public static final String KEY_ROWID = "_id";
public static final String KEY_NAME = "name";
public static final String KEY_EIGHTU = "8u";
public static final String KEY_NINEU = "9u";
public static final String KEY_TENU = "10u";
public static final String KEY_ELEVENU = "11u";
private static final String TAG = "DBAdapter"; 

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(DATABASE_CREATE);        
} 
```

但不知道如何..有什么想法吗？

主要问题是我有多个要初始化的行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-09T04:41:06.293

其他答案似乎没有回答如何用初始值实际填充数据库，所以我将在这里分享我是如何做到的。

基本上，您将数据库列保存为 xml 文件中的字符串数组。我将只显示一个数组，但您可以为其他列做更多。（不过，您需要小心，不要使用多列来弄乱数组顺序，从而弄乱您的数据库行。）

创建一个 /res/values/arrays.xml 文件并将数组添加到其中。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string-array name="my_array">

            <item>string 1</item>
            <item>string 2</item>
            <item>string 3</item>
            <item>string 4</item>
            <item>string 5</item>

    </string-array>

</resources> 
```

然后，您可以在帮助程序类中创建数据库时获取该数组。这是我所做的：

```
private static class DatabaseHelper extends SQLiteOpenHelper {

    private final Context fContext;

    // constructor
    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        fContext = context;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE " + TABLE_NAME + " ("
                + FIRST_COLUMN + " INTEGER PRIMARY KEY,"
                + SECOND_COLUMN + " TEXT NOT NULL,"
                + THIRD_COLUMN + " INTEGER,"
                + FOURTH_COLUMN + " TEXT NOT NULL"
                + ");");

        // Initialize the db with values from my_array.xml
        final int DEFAULT_THIRD_COLUMN = 1;
        final String DEFAULT_FOURTH_COLUMN = "";
        ContentValues values = new ContentValues();
        Resources res = fContext.getResources();
        String[] myArray = res.getStringArray(R.array.my_array);
        for (String item : myArray){
            values.put(SECOND_COLUMN, item);
            values.put(THIRD_COLUMN, DEFAULT_THIRD_COLUMN);
            values.put(FOURTH_COLUMN, DEFAULT_FOURTH_COLUMN);
            db.insert(TABLE_NAME, null, values);
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);

    }
} 
```

有关更多帮助，请参阅这些链接：

*   [字符串资源 - 字符串数组文档](http://developer.android.com/guide/topics/resources/string-resource.html#StringArray)
*   [Android：使用字符串数组（SQLite）从资源文件中填充表](http://martin.cubeactive.com/android-filling-a-table-from-resource-file-with-string-array-sqlite/)

我做的另一件事是提前创建数据库，然后在安装应用程序时将其复制到数据库文件夹。如果您有大量数据并且不想从 Internet 下载数据库，这可能会更好。如果要复制数据库，请参阅[此答案](https://stackoverflow.com/a/29890897/3681880)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T06:03:24.123

试试这种方式：

```
public class MyDBHelper  
{  
    // Database properties   
    private static final String DATABASE_NAME = "Test.sqlite";   
    private static final String DATABASE_TABLE_NAME = "Table 1";   
    private static final int DATABASE_VERSION = 4;

    //  Table1 properties   
    public static final String KEY_ROWID = "_id";   
    public static final String KEY_NAME = "name";   
    public static final String KEY_EIGHTU = "8u";   
    public static final String KEY_NINEU = "9u";      
    public static final String KEY_TENU = "10u";   
    public static final String KEY_ELEVENU = "11u";  
    private static final String TAG = "DBAdapter";

    // Create Script   
    private static final String DATABASE_CREATE_PLAYER = "CREATE TABLE IF NOT EXISTS " + DATABASE_TABLE_NAME + "( " + KEY_ROWID + " INTEGER, " + KEY_NAME + " TEXT, " + KEY_EIGHTU + " TEXT, " + KEY_NINEU + " TEXT, " + KEY_TENU + " TEXT, " + KEY_ELEVENU + " TEXT);";        
    private final Context m_context;  
    private DatabaseHelper m_dbHelper;   
    public static SQLiteDatabase m_db;   
    public MyDBHelper(Context ctx)  
    {   
        this.m_context = ctx;  
        m_dbHelper = new DatabaseHelper(m_context);  
    }   

    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        DatabaseHelper(Context context)
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
            db.execSQL(DATABASE_TABLE_NAME);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE_NAME );
            onCreate(db);
        }
    }

    //---opens the database---
    public MyDBHelper open() throws SQLException
    {
        m_db = m_dbHelper.getWritableDatabase();
        return this;
    }

    //---closes the database---    
    public void close()
    {
        if (m_db != null)
            m_db.close();
        if (m_dbHelper != null)
            m_dbHelper.close();
    }  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T05:56:27.540

如果您想在代码中填充它，本教程将有所帮助。这是一个包含 14 个视频教程的系列。

[http://thenewboston.org/watch.php?cat=6&number=111](http://thenewboston.org/watch.php?cat=6&number=111)

如果您想访问预加载的数据库，请查看此链接。

[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

但两者都没有解决平板电脑所需的内容提供商的使用问题。但是两者都可以帮助您入门，一旦您了解了它们，您就可以了解提供者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T06:03:21.170

`onCreate()`在方法之前和之后写下`private static final String TAG = "DBAdapter";`一行，它将解决您的问题。

```
private static final String DATABASE_CREATE = "create table mTable1 
                   (_id integer primary key autoincrement, 
                   name text not null, 8u text not null, 9u text not null, 
                   10u text not null, 11u text not null);"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T06:06:21.437

```
import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHandler extends SQLiteOpenHelper {

// All Static variables
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "contactsManager";

// Contacts table name
private static final String TABLE_CONTACTS = "contacts";

// Contacts Table Columns names
private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";
private static final String KEY_PH_NO = "phone_number";

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
            + KEY_PH_NO + " TEXT" + ")";
    db.execSQL(CREATE_CONTACTS_TABLE);
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS);

    // Create tables again
    onCreate(db);
} 
```

您也可以访问这些网站以获得完整的参考和更好的理解::

[androidhive.info/Sqlite 教程](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)-

# sql - 外键有什么用？

> ID：14108113
> 
> 赞同：2
> 
> 时间：2013-01-01T05:45:06.907
> 
> 标签：sql, ruby-on-rails, database

我一直在使用与 SQL (MySQL) 和 Rails 的表关联没有问题，而且我从来不需要指定外键约束。

我只是在 belongs_to 表中添加了一个 table_id 列，一切正常。

那么我错过了什么？在 MySQL 或其他 RDBMS 中使用外键子句有什么意义？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T05:46:57.470

> **外键**是两个表之间的引用约束

**存在外键**约束的原因是为了保证引用的行存在。

外**键**标识一个（引用或子）表中的一列或一组列，该表引用另一个（引用或父）表中的一列或一组列。

*   您可以获得很好的**“删除级联”**行为，自动清理表

这里列出了很多使用外键的原因：[为什么要使用外键](https://stackoverflow.com/a/83393/1042848)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T05:47:23.050

Rails（更具体地说是[ActiveRecord ）](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)*自动*为您猜测外键。

> ...默认情况下，这被猜测为带有“_id”后缀的关联名称。

外键强制**参照完整性**。

> 外键：*表中的一列或一组列，其值需要与另一个表的一行的至少一个 PrimaryKey 值匹配。*

也可以看看：

*   [http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to)
*   [http://c2.com/cgi/wiki?ForeignKey](http://c2.com/cgi/wiki?ForeignKey)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T06:13:04.870

外键或任何引用约束的基本思想是*数据库不应允许您存储明显无效的数据*。它是数据一致性的核心组成部分，是[ACID 规则](http://en.wikipedia.org/wiki/ACID)之一。

如果您的数据模型表明您可以将多个电话号码与一个帐户关联，您可以将电话表定义为需要一个有效的帐号。因此，无法存储孤立的电话记录，因为您无法在没有有效帐号的情况下在电话表中插入一行，并且您无法在不先删除电话号码的情况下删除帐户。如果该字段是生日，您可能会强制要求日期早于明天的日期。如果字段是高度，您可以强制距离在 30 到 4000 厘米之间。这意味着任何应用程序都不可能在数据库中存储无效数据。

“好吧，为什么我不能把所有这些都写到我的应用程序中呢？” 你问。对于单应用程序数据库，您可以。但是，任何拥有存储用于业务运营的数据的重要数据库的企业都希望*直接*访问数据。他们希望能够从财务或 HR 导入数据，或将地址导出到销售，或通过从 Active Directory 导入它们来创建应用程序用户帐户等。对于非平凡的应用程序，*用户的数据*是最重要的，并且*这*就是他们想要访问的内容。在某些时候，他们会希望在您的应用程序代码不妨碍的情况下访问他们的数据。这是 RDMBS 的真正力量和优势，也是使系统集成成为可能的原因。

但是，如果您的所有规则都存储在应用程序中，那么您的用户将需要非常小心他们如何操作数据库，以免导致应用程序崩溃。如果您指定关系约束和参照完整性，则需要其他应用程序以对任何将要使用它的应用程序有意义的方式修改数据。逻辑与数据（它所属的位置）而不是应用程序相关联。

请注意， MySQL在引用完整性方面[是绝对的。](http://youtu.be/1PoFIohBSM4)当您尝试将空日期插入具有约束的日期时间字段时，通常会插入明显无效的值，例如今天的日期时间，它往往会默默地成功而不是抛出错误`not null default null`。DBA 说 MySQL 是个笑话是有充分理由的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T05:46:14.240

外键强制[**参照完整性**](http://en.wikipedia.org/wiki/Referential_integrity)。外键约束将防止您或任何其他用户在表中错误地添加不正确的记录。它确保在外键中输入的数据 (ID) 确实存在于引用表中。如果一些错误的客户端代码试图插入不正确的数据，那么在外键约束的情况下会引发异常，否则如果约束不存在，那么您的数据库将最终得到不一致的数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T06:08:31.083

我能想到的使用外键的一些优点：

*   使表之间的数据保持一致，防止出现坏数据（例如表A有一些记录引用表B中不存在的东西）

*   帮助记录我们的数据库

*   一些框架是基于外键生成领域模型的

# html - 带显示的 Chrome DIV：inline-block 向上和向下箭头

> ID：14108115
> 
> 赞同：2
> 
> 时间：2013-01-01T05:45:54.973
> 
> 标签：html, google-chrome, contenteditable

这似乎应该如此简单。Linux下的Chrome。

以下 HTML：

```
<div contenteditable="true">
test
<div style="display: inline-block;">
    <div style="font-weight: bold">Click here. Why does down arrow now work?</div>
</div>
test
<div>
test
<div style="display: inline-block;">
    <div style="font-weight: bold">TEST2</div>
</div>
Click mouse here and press up arrow in chrome? Why does it not go up?
</div>
</div> 
```

​ 见[http://jsfiddle.net/tSkj9/](http://jsfiddle.net/tSkj9/)

这会导致向上和向下箭头失败。

为什么？

如果我将其设置为阻止，则向上和向下箭头起作用。相反，他们反复将光标左右移动几个字符。

我假设它与 contenteditable 中的 inline-block 有关。

浏览器错误还是我错过了有关内联块的内容？

# java - Java 将 long 转换为 4 个字节

> ID：14108121
> 
> 赞同：3
> 
> 时间：2013-01-01T05:47:05.917
> 
> 标签：java, bytearray, byte, long-integer, unsigned

如何将 long 转换为 4 个字节？我正在接收来自 C 程序的一些输出，它使用无符号长。我需要读取此输出并将其转换为 4 个字节。

但是，java 使用 64 位的有符号长整数。有没有办法进行这种转换？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T11:03:22.160

要将 4 个字节读取为无符号 32 位值，假设它是小端序，最简单的做法是使用 ByteBuffer

```
byte[] bytes = { 1,2,3,4 };
long l = ByteBuffer.wrap(bytes)
                   .order(ByteOrder.LITTLE_ENDIAN).getInt() & 0xFFFFFFFFL; 
```

虽然`l`可以是有符号的 64 位值，但它只会介于 0 和 2^^32-1 之间，这是无符号 32 位值的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T07:43:24.213

您可以使用 java.nio.ByteBuffer。它可以解析长字节，并为您进行字节排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T05:49:48.857

您可以编写一个循环，将“long”除以 256，取其余部分，然后得到“Least Significant Byte”……（取决于您想要 little-endian 还是 big-endian，您可以向前或向后循环)

```
 long l = (3* 256 * 256 * 256 + 1 * 256 *256 + 4 * 256 + 8);
  private byte[] convertLongToByteArray(long l) {
      byte[] b = new byte[4];
      if(java.nio.ByteOrder.nativeOrder() == ByteOrder.LITTLE_ENDIAN){
          for (int i=0; i<4; i++) {
            b[i] = (byte)(l % 256) ;
            l = l / 256;
          }
     }else{
          for (int i=3; i>=0; i--) {
            b[i] = (byte)(l % 256) ;
            l = l / 256;
          }
     }
      return b;
  } 
```

# node.js - 是否可以使用 node.js 从 URL 导入脚本？

> ID：14108125
> 
> 赞同：5
> 
> 时间：2013-01-01T05:47:28.423
> 
> 标签：node.js

我目前正在尝试从 URL导入[我的脚本之一](http://javascript-modules.googlecode.com/svn/functionChecker.js)`require`，但在这种情况下该函数似乎不起作用。

`var functionChecker = require("http://javascript-modules.googlecode.com/svn/functionChecker.js");`

这是此脚本生成的错误消息的摘录：

`Error: Cannot find module 'http://javascript-modules.googlecode.com/svn/functionChecker.js'`

有没有办法从 node.js 中的 URL 导入脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T08:47:21.590

我终于让它工作了。此示例下载文件[http://javascript-modules.googlecode.com/svn/functionChecker.js](http://javascript-modules.googlecode.com/svn/functionChecker.js)，然后将其保存在本地目录中。

```
//var functionChecker = require(__dirname + '/functionChecker.js');
//functionChecker.checkAllFunctions(__filename);

var http = require('http');
var fs = require('fs');
var google = http.createClient(80, 'www.google.com');
var request = google.request('GET', '/svn/functionChecker.js',
  {'host': 'javascript-modules.googlecode.com'});
request.end();
out = fs.createWriteStream('functionChecker.js');
request.on('response', function (response) {
  response.setEncoding('utf8');
  response.on('data', function (chunk) {
    out.write(chunk);
  });
});

//function name: stuff
//requires functions: false
//is defined: false
//description: blah blah woohoo. 
```

# php - 如何将 Javascript 中的元素 ID 转换为 jQuery？

> ID：14108127
> 
> 赞同：3
> 
> 时间：2013-01-01T05:47:29.250
> 
> 标签：php, javascript, jquery

我不知道，如何将此脚本添加到 jQuery，请帮助 JavaScript

```
function show_t(id){
    document.getElementById("hide_t_"+id).style.visibility='visible';
}
function hide_t(id){
    document.getElementById("hide_t_"+id).style.visibility='hidden';
} 
```

这是 php 上的 div 元素，带有上面的脚本

```
 <div class='item' onMouseOver="show_t('$dataBB[0]')" 
onMouseOut="hide_t('$dataBB[0]')"> 
```

当我使用此脚本进行更改时，我遇到了麻烦

```
$("#show_t1"+id).mouseover(function(){
    document.getElementById("hide_t_"+id).style.visibility='visible';
}).mouseout(function(){
    document.getElementById("hide_t_"+id).style.visibility='hidden';
}); 
```

上面脚本的*div*元素是

```
<div id="show_t$dataBB[0]">
<span id='hide_t_$dataBB[0]' class='hide_input'>
</span>
</div> 
```

[你可以在www.tumbasklik.com](http://www.tumbasklik.com)看到我的意思

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T05:48:55.827

改变

```
document.getElementById("hide_t_"+id).style.visibility='visible'; 
```

到

```
$("#hide_t_"+id).css('visibility','visible'); 
```

你的代码是。

```
$("#show_t1"+id).mouseover(function(){       
    $("#hide_t_"+id).css('visibility','visible');
}).mouseout(function(){       
    $("#hide_t_"+id).css('visibility','hidden');
}); 
```

**编辑**：您可以更改选择器以使用通配符而不是提供 id，并使用 span 类而不是生成 id。

**[现场演示](http://jsfiddle.net/rajaadil/jdJ6L/)**

```
$("[id^=show_t]").mouseover(function() {
    $(this).find('.hide_input').css('visibility', 'visible');
}).mouseout(function() {
    $(this).find('.hide_input').css('visibility', 'hidden');
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T07:25:40.913

一步步

1.  div中不需要`onMouseOver`和`onMouseOut`功能。`.item`删除它们。无需`values`从`php`

2.  使您的跨度有意义 - 而不是将类放在`hide_item`所有跨度上，而是将类作为`buy-option hidden`. 做所有的风格`.buy-option { /* Styles */ }`，把`.hidden { display: none; }`

3.  仅将 jQuery 代码更改为：

    ```
    jQuery(function($) {
        $('div.item').mouseover(function() {
            $(this).find('.buy-option').removeClass('hidden');
        })
        $('div.item').mouseout(function() {
            $(this).find('.buy-option').addClass('hidden');
        });
    }); 
    ```

4.  检查[**工作小提琴**](http://jsfiddle.net/OMS_/4CLAZ/)并从相应的 iframe（HTML、CSS、JS）复制粘贴代码

5.  [从DOM遍历](http://api.jquery.com/category/traversing/)开始学习jQuery

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T05:50:22.133

使用 Jquery -

```
$("#hide_t_"+id).hide();
$("#hide_t_"+id).show(); 
```

试试这样-

```
$("#show_t1"+id).mouseover(function(){
    $(this).show();
}).mouseout(function(){
    $(this).hide();
}); 
```

[演示](http://jsbin.com/alokan/5)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T05:52:39.157

```
$("#show_t1"+id).mouseover(function(){
    $("#hide_t_"+id).css('visibility','visible');
}).mouseout(function(){
    $("#hide_t_"+id).css('visibility','hidden');;
}); 
```

# c# - Console.WriteLine 在 C# 事件处理程序中不起作用

> ID：14108134
> 
> 赞同：0
> 
> 时间：2013-01-01T05:49:17.237
> 
> 标签：c#, console-application

```
class Program
{
    FileSystemWatcher _watchFolder;
    string sPath = @"D:\TestMonitor";
    static void Main(string[] args)
    {
        Program p = new Program();
        Thread t = new Thread(new ThreadStart(p.startActivityMonitoring));
        t.Start();
    }

    private void startActivityMonitoring()
    {
        _watchFolder = new FileSystemWatcher();
        _watchFolder.Path = Convert.ToString(sPath);
        _watchFolder.NotifyFilter = System.IO.NotifyFilters.DirectoryName;
        _watchFolder.NotifyFilter =
        _watchFolder.NotifyFilter | System.IO.NotifyFilters.FileName;
        _watchFolder.NotifyFilter =
        _watchFolder.NotifyFilter | System.IO.NotifyFilters.Attributes;
        _watchFolder.Changed += new FileSystemEventHandler(eventRaised);
        _watchFolder.Created += new FileSystemEventHandler(eventRaised);
        _watchFolder.Deleted += new FileSystemEventHandler(eventRaised);
        _watchFolder.Renamed += new System.IO.RenamedEventHandler(eventRaised);
        _watchFolder.EnableRaisingEvents = true;
    }

    private void eventRaised(object sender, System.IO.FileSystemEventArgs e)
    {
        switch (e.ChangeType)
        {
            case WatcherChangeTypes.Changed:
                Console.WriteLine(string.Format("File {0} has been modified\r\n", e.FullPath));

                break;
            case WatcherChangeTypes.Created:
                Console.WriteLine(string.Format("File {0} has been created\r\n", e.FullPath));

                break;
            case WatcherChangeTypes.Deleted:
                Console.WriteLine(string.Format("File {0} has been deleted\r\n", e.FullPath));

                break;
            default: // Another action
                break;
        }
    }

} 
```

当我尝试使用 Console.WriteLine 记录更改时，一个使用 FileSystemWatcher 轮询目录内更改的简单程序，但它不起作用。

不确定是什么导致了这个问题，因为 Console.WriteLine 在任何线程中都能正常工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T05:58:28.580

您的程序在启动线程后立即退出。您需要保持程序运行。一种简单的方法是包含一个 Console.ReadLine 来阻止程序退出。

```
static void Main(string[] args)
    {
        Program p = new Program();
        Thread t = new Thread(new ThreadStart(p.startActivityMonitoring));
        t.Start();
        Console.Writeline("Press enter to exit");
        Console.ReadLine();
    } 
```

![在此处输入图像描述](../Images/384d3123254876ff90e1f5ae873af676.png)

# ruby-on-rails - 在 Rails 中编辑更新操作？

> ID：14108135
> 
> 赞同：0
> 
> 时间：2013-01-01T05:49:47.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我已经阅读了 M. Hartl 关于 ROR 教程的书，并在那里为用户编辑和更新操作，该书用于`"@user = User.find(params[:id])"`查找用户，然后出于授权目的添加了一个`"correct_user"`方法来检查 @user 是否为当前用户。令我困惑的是，为什么我不能`"@user = current_user"`在编辑和更新操作中找到开始使用的用户，这样我就不必担心用户通过 URL 传递其他用户 ID。我正在考虑的这种方法是否会留下任何安全漏洞？我正在使用 Devise，所以我已经有了一个`current_user`方便的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T08:50:10.547

这种方法的一个潜在问题是它可能是具有特殊权限的用户（管理员、版主等）试图编辑允许他们更新*的另一个用户。*最好坚持从数据库中获取。此外，如果 rails 已经在当前请求周期中获取了用户，则该对象应该被缓存，因此它实际上不应该执行第二个数据库请求。

# php - 使用带有mysql_query的“in_array”（php）时数组不包含值

> ID：14108138
> 
> 赞同：1
> 
> 时间：2013-01-01T05:49:59.833
> 
> 标签：php, mysql, arrays, loops

我继续与阵法斗争！这可能很容易回答。

我正在使用 PHP 从 MYSQL 检索数据集。我得到一个具有第一行的数组（ala mysql_fetch_array）。通常我会遍历这个并获取每个值，但在这种情况下，我已经处于循环中间，我需要找出完整数据集中是否存在特定值（这将超过 1 行）。

我想我可以循环并将所有值放入一个数组中，如下所示：

```
$query = "SELECT MapId FROM Map Where GameId = $gl_game_id";
$result_set = mysql_query($query, $connection);
confirm_query($result_set);     
$map_set = array();
while($row = mysql_fetch_assoc($result_set)) {
    $map_set[] = $row;
} 
```

当我 print_r 这个时，我实际上得到了完整的数据集（例如，表 Map 中的 MapId 的所有行）。

所以现在，当我去那里查看一个值（来自另一个循环的）是否存在时，它不会找到它。

所以我的代码看起来像：

```
if (in_array($i, $map_set)) {
    echo "yes, it's there baby!";       
} 
```

但它不起作用。我尝试对数组进行硬编码，这确实有效。因此，我构建数组的方式存在问题，这个函数不喜欢它。

```
if (in_array($i, array(40,12,53,65))) {
    echo "yes, it's there baby!";       
} 
```

arrrg...我讨厌在这方面成为菜鸟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T05:54:33.170

函数 mysql_fetch_assoc 返回数组。

如果您制作 print_r($map_set) 那么您将看到这是二维数组。当然 in_array 不起作用。

只需替换`$map_set[] = $row;`，`$map_set[] = $row["MapId"];`然后重试。

# android - 使用 JSON 解析检测天气

> ID：14108142
> 
> 赞同：0
> 
> 时间：2013-01-01T05:51:03.140
> 
> 标签：android, json, api

如何使用以下 URL 解析代码、消息、计算时间、城市、id、国家、名称：[`http://openweathermap.org/data/2.1/forecast/city/524901`](http://openweathermap.org/data/2.1/forecast/city/524901)

```
{    "cod":"200","message":"kf","calctime":0.0342,"url":"http:\/\/openweathermap.org\/city\/524901",
            "city":
                  {
                    "id":524901,
                       "coord":                
                           {
                            "lon":37.615555,"lat":55.75222
                            },
                         "country":"RU","name":"Moscow","dt_calc":1356948005,"stations_count":6
                    }, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T05:56:09.647

按照下面的代码：

```
JSONObject jObj=new JSONObject(jsonResponse);
String msg=jObj.getString("message");
String calctime=jObj.getString("calctime"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T06:08:44.673

使用下面的代码从上面的 url 解析代码、messge、calctime、city、id、country、name，它将解决您的问题。

```
JSONObject mJsonObj = new JSONObject(mJsonResponse);
String mCode = mJsonObj.getString("cod");
String mMessage = mJsonObj.getString("message");
String mCalcTime = mJsonObj.getString("calctime");

JSONObject mJsonCityObj = mJsonObj.getJSONObject("city");
String mId = mJsonCityObj.getString("id");
String mConuntry = mJsonCityObj.getString("country");
String mName = mJsonCityObj.getString("name"); 
```

# jquery - JQuery Chosen 插件在 Firefox 中工作但在 IE8 中不工作

> ID：14108143
> 
> 赞同：0
> 
> 时间：2013-01-01T05:51:12.237
> 
> 标签：jquery, asp.net, jquery-plugins, jquery-chosen

我在动态创建的 ASP 用户控件中使用 JQuery Chosen 插件。它可以在 Firefox 中运行，但不能在 IE8 中运行。

我在母版页中包含以下样式和脚本，

```
<link rel="stylesheet" href="jquery-ui-1.8.18.custom/css/dark-hive/jquery-ui-1.8.18.custom.css" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="css/QMStyles.css" />
<link rel="stylesheet" href="css/screen.css" type="text/css" />
<link rel="Stylesheet" href="css/jquery.alerts.css" />
<link rel="Stylesheet" href="css/jquery.qtip.min.css" />
<link rel="Stylesheet" href="css/ui.spinner.css" />
<link rel="Stylesheet" href="css/jquery.contextMenu.css" />
<link rel="stylesheet" href="css/chosen.css" /> 
```

```
<script type="text/javascript" src="js/jquery-ui-1.8.18.custom.min.js"></script>

<script type="text/javascript" src="js/jquery.alerts.js"></script>

<script type="text/javascript" src="js/jquery.scrollTo.js"></script>

<script type="text/javascript" src="js/jquery.qtip.min.js"></script>

<script type="text/javascript" src="js/ui.spinner.min.js"></script>

<script type="text/javascript" src="js/chosen.jquery.min.js"></script> 
```

选择选项在查看源时看起来像这样

```
<select name="ctl00$ContentPlaceHolder1$ctl00$ddlMType" id="ctl00_ContentPlaceHolder1_ctl00_ddlMType">
    <option value="1">value1</option>
    <option value="2">value2</option>
    <option value="3">value3</option>
    <option value="4">value4</option>
    <option value="5">value5</option>
    <option value="6">value6</option>
    <option value="7">value7</option>

</select> 
```

这就是我使用选择的方式

```
 $(function() {
     $('#ctl00_ContentPlaceHolder1_ctl00_ddlMType').chosen().change(function(e, a) {
         $('#ctl00_ContentPlaceHolder1_ctl00_selectedMList').val($(e.target).val());
     });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:17:17.907

您是否在 Intranet 环境中工作？

在这种情况下，IE8 将以兼容模式运行，而 Chosen 将不起作用。

我遇到了同样的情况，[这个答案](https://stackoverflow.com/questions/2518256/override-intranet-compatibility-mode-ie8)帮助了我。

我使用的是 MVC 4，但类似的东西可能对你有用。将此添加到您的 Web.config

```
<system.webServer>
 <httpProtocol>
   <customHeaders>
     <clear />
     <add name="X-UA-Compatible" value="IE=edge" />
   </customHeaders>
 </httpProtocol>
<system.webServer> 
```

# java - Hibernate：可连接以加入特定的子表

> ID：14108152
> 
> 赞同：0
> 
> 时间：2013-01-01T05:53:26.240
> 
> 标签：java, hibernate, hibernate-mapping, jointable

我有两组继承表：1.TableA（由TableA1和TableA2继承），2.TableB（由TableB1和TableB2继承）

TableA 的 DiscriminatorColumn 是“type”，TableA1 和 TableA2 的 DiscriminatorValues 分别是“A1”和“A2”。同样，TableB 的 DiscriminatorColumn 是“type”，TableB1 和 TableB2 的 DiscriminatorValues 分别是“B1”和“B2”。我有一个用于连接 TableA 和 TableB 的连接表 TableA_B。我知道连接表 TableA_B 只能将 TableA1 链接到 TableB1，而 TableA2 只能链接到 TableB2，这根据“类型”列发生。即，A1 总是链接到类型 B1，而 A2 总是链接到类型 B2。

现在，我的问题是，当我从 TableA1 进行查询时，@JoinTable 会生成连接 TableA1、TableA、TableB、TableB1 和 TableB2 的 sql。在这里，不需要从 TableB2 进行查询。有没有办法限制这个？正如我所提到的，唯一的区别因素是“类型”列。

表A实体：

```
@Entity
@Table(name = "TableA")
@Inheritance(strategy=InheritanceType.JOINED)
@DiscriminatorColumn(name="type")
public class TableA {

    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(unique = true, nullable = false)
    private Long id;
    private String name;
    private String type;

    @ManyToMany(fetch = FetchType.EAGER)
        @JoinTable(
        name="TableA_B",
        joinColumns={@JoinColumn(name="A_id")},
        inverseJoinColumns={@JoinColumn(name="B_id")}
        )
    private Set<DataMaster> inputData = new HashSet<DataMaster>(0);

//getters & setters ...
}

@Entity
@Table(name = "TableA1")
@PrimaryKeyJoinColumn(name="AId")
@DiscriminatorValue("A1")
public class TableA1 extends TableA{

    @Column(insertable=false, updatable=false)
    private Long AId;
    private String value1;
//getters & setters ...
}

@Entity
@Table(name = "TableA2")
@PrimaryKeyJoinColumn(name="AId")
@DiscriminatorValue("A2")
public class TableA2 extends TableA{

    @Column(insertable=false, updatable=false)
    private Long AId;
    private String value2;
//getters & setters ...
} 
```

表B如下：

```
@Entity
@Table(name = "TableB")
@Inheritance(strategy=InheritanceType.JOINED)
@DiscriminatorColumn(name="type")
public class TableB {

    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(unique = true, nullable = false)
    private Long id;
    private String name;
    private String type;
//getters & setters ...
}

@Entity
@Table(name = "TableB1")
@PrimaryKeyJoinColumn(name="BId")
@DiscriminatorValue("B1")
public class TableB1 extends TableB{
    @Column(insertable=false, updatable=false)
    private Long dataId;
    private String value1;
//getters & setters ...
}

@Entity
@Table(name = "TableB2")
@PrimaryKeyJoinColumn(name="BId")
@DiscriminatorValue("B2")
public class TableB2 extends TableB{
    @Column(insertable=false, updatable=false)
    private Long dataId;
    private String value2;
//getters & setters ...
} 
```

道：

```
public TableA1 find(Long id) {
      Session session = DBSessionManager.getFactory().openSession();
      Transaction tx = null;
      TableA1 tableA1 = null;
      try{
         tx = session.beginTransaction();
         tableA1 = (TableA1)session.get(TableA1.class, id);
         tx.commit();
      }catch (HibernateException e) {
         if (tx!=null) tx.rollback();
      }finally {
         session.close(); 
      }     
      return tableA1;
} 
```

我尝试使用 FilterJoinTable 作为：

```
@FilterJoinTable(name="dataTypeFilter", condition=":dataType = type") 
```

在 DAO 中，

```
session.enableFilter("dataTypeFilter").setParameter("dataType", "B1"); 
```

但是，这也没有给出预期的结果。

这就是我添加过滤器的方式：

```
@Entity
@Table(name = "TableA")
@Inheritance(strategy=InheritanceType.JOINED)
@DiscriminatorColumn(name="type")
@FilterDef(name="dataTypeFilter", parameters = {
        @ParamDef(name = "dataType", type = "string")
        })
public class TableA {

    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(unique = true, nullable = false)
    private Long id;
    private String name;
    private String type;

    @ManyToMany(fetch = FetchType.EAGER)
        @JoinTable(
        name="TableA_B",
        joinColumns={@JoinColumn(name="A_id")},
        inverseJoinColumns={@JoinColumn(name="B_id")}
        )
    @FilterJoinTable(name="dataTypeFilter", condition=":dataType = type")
    private Set<DataMaster> inputData = new HashSet<DataMaster>(0);

//getters & setters ...
} 
```

道：

```
public TableA1 find(Long id) {
          Session session = DBSessionManager.getFactory().openSession();
          Transaction tx = null;
          TableA1 tableA1 = null;
          try{
             tx = session.beginTransaction();
         session.enableFilter("dataTypeFilter").setParameter("dataType", "B1");
             tableA1 = (TableA1)session.get(TableA1.class, id);
             tx.commit();
          }catch (HibernateException e) {
             if (tx!=null) tx.rollback();
          }finally {
             session.close(); 
          }     
          return tableA1;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T09:17:16.133

根据您的描述，您应该在 TableA1 和 TableB1 之间有一个 ManyToMany 关联，在 TableA2 和 TableB2 之间有另一个 ManyToMany 关联。但是您将这两个关联映射为 TableA 和 TableB 之间的单个关联。您应该将这两个关联映射为它们的真正含义：

```
private class TableA1 extends TableA {
    @ManyToMany
    private Set<TableB1> tablesB1s;
}

private class TableA2 extends TableA {
    @ManyToMany
    private Set<TableB2> tablesB2s;
} 
```

我不会使用同一个连接表来映射两个不同的关联。我什至不确定这是否可能。

# css - 边框标签在 HTML5 视频标签周围不起作用

> ID：14108153
> 
> 赞同：1
> 
> 时间：2013-01-01T05:53:28.990
> 
> 标签：css, html, html5-video

我想在我在我的网站上播放的视频周围加上一个红色边框。这是我的代码。

```
 <div class="yotube_video">
        <video width="700" height="525" controls="controls" scrolling="no" >
            <source src="video/promo_video.mp4" type="video/mp4">
        </video>
    </div> 
```

和样式表包括

```
div.youtube_video{
border:5px solid red;} 
```

为什么我没有得到视频周围的边框。请帮忙。另外，是否有任何在线帮助可以使视频更具艺术性？

在此先感谢， aqzr

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T06:16:01.000

在您的 HTML 中，您写道：

```
<div class="yotube_video"> 
```

然后在您的 CSS 中您写道：

```
div.youtube_video 
```

HTML 和 CSS 中的类名应该相同。在您的 HTML 文件中，您忘记了一个“u”。它应该是这样的：

**HTML**

```
<div class="youtube_video">
<video width="700" height="525" controls src="video/promo_video.mp4" type="video/mp4">
</video>
</div> 
```

`controls="controls"`不存在。`controls`如果你想启用它们，你只需要写。`scrolling`不存在。`source`然后，仅当您为不同的浏览器提供以不同格式编码的多个源文件时，才需要该标记。在您的示例中，它不应该是必需的。只要使用`src`就足够了。

**CSS**

```
div.youtube_video{
border:5px solid red;} 
```

* * *

无论如何，由于您使用的是`video`标签，这是 HTML5 中引入的一个新标签以提供更好的语义，您可以避免使用包装`div`并直接为`video`标签提供 id 或类。所以你的**HTML**会变成这样：

```
<video class="youtube_video" width="700" height="525" controls src="video/promo_video.mp4" type="video/mp4">
</video> 
```

你的**CSS**会变成这样：

```
.youtube_video{
    border:5px solid red;} 
```

这是一个[演示](http://jsfiddle.net/8fuqY/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T06:06:48.457

```
div.yotube_video{
border:5px solid red;
} 
```

您上面的班级名称是 yotube_video 并且您输入了 youtube_video

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T06:01:36.357

`video`在您的元素上应用类而不是`div`

```
video{
   border:5px solid red;
} 
```

小提琴在[这里](http://jsfiddle.net/TFKfr/)

**或**其他方法如下

你可以提供`ID`你的`video`元素作为

```
<div>
        <video id="yotube_video" width="700" height="525" controls="controls" scrolling="no" >
            <source src="video/promo_video.mp4" type="video/mp4">
        </video>
 </div> 
```

并申请`CSS`为`ID`

```
#yotube_video{
     border:5px solid red;
} 
```

小提琴在[这里](http://jsfiddle.net/TFKfr/1/)

# ruby-on-rails - 覆盖 Rails Uploader 到种子数据库

> ID：14108154
> 
> 赞同：4
> 
> 时间：2013-01-01T05:53:34.587
> 
> 标签：ruby-on-rails, carrierwave

我有一个 CarrierWave rails 上传器。我想用假用户为数据库播种，所以我试图用相同的种子文件添加图像。这些图像在一个公共存储中，所以如果我可以在数据库中获取头像字符串，它们就可以工作。当它保存用户时，虽然图像没有粘住。

```
# db/seeds.rb
user1 = User.create :email => "test1@test.com", :password => "testing", :name => "Bob Dylan", :avatar => "v1357014344/bdylan.jpg"
user1.save

# IRB
User.first
=> #<User id: 1, email: "test1@test.com", name: "Bob Dylan", avatar: nil> 

> a = User.first
> a.avatar = "v1357014344/bdylan.jpg"
> a.save
 (10.7ms)  commit transaction
=> true 
> a
=> #<User id: 1, email: "test1@test.com", name: "Bob Dylan", avatar: nil> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T05:58:46.417

您必须按以下方式插入数据。

```
File.open(File.join(Rails.root, 'test.jpg')) 
```

所以整个用户创建看起来像

```
User.create :email => "test1@test.com", :password => "testing", :name => "Bob Dylan", :avatar => open("v1357014344/bdylan.jpg") 
```

[相关问题](https://stackoverflow.com/questions/3910162/seeding-file-uploads-with-carrierwave-rails-3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-14T20:56:43.427

除了`open()`用作[Nishant](https://stackoverflow.com/users/156775/nishant)建议外，您还可以指定`remote_avatar_url`手动设置远程 URL。

```
User.create :email => "test1@test.com", :password => "testing", :name => "Bob Dylan", :remote_avatar_url => "http://upload.wikimedia.org/wikipedia/commons/2/28/Joan_Baez_Bob_Dylan_crop.jpg" 
```

感谢[JosephJaber](https://stackoverflow.com/users/173986/josephjaber)在[使用 CarrierWave、Rails 3 播种文件上传时提出的建议](https://stackoverflow.com/questions/3910162/seeding-file-uploads-with-carrierwave-rails-3#comment17874023_12895838)

我使用这种方法在我的seeds.rb 中为 CarrierWave Uploader 填充了一些视频 URL

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-16T21:18:45.023

To update the database directly and skip out on CarrierWave:

```
model[:attribute] = 'url.jpg'
model.save 
```

# java - 实际中会出现虚假唤醒

> ID：14108155
> 
> 赞同：5
> 
> 时间：2013-01-01T05:53:35.787
> 
> 标签：java, windows, multithreading

在运行 Java 1.7.0_09 的双四核 Windows 2008 64 位服务器上进行 3000 个并发会话和每秒大约 300 个事务的负载测试期间，我们在实践中观察到两个已确认的虚假唤醒实例，即线程退出其 wait() 方法而没有得到通知在等待超时到期之前。

在唤醒期间，机器 CPU 低于 20%，并且有足够的内存可用。也没有观察到过多的垃圾收集。幸运的是，我们最近引入的自旋锁能够捕获这种情况并继续等待（）

虚假唤醒现象记录在 java.lang.Object wait() 的 JavaDoc 中，但这是我第一次在实践中真正看到它。这是 Windows 还是 Java 中的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T05:56:01.473

由于它已记录在案，因此它不能是错误。

# android - 当我将 Bitmap 设置为 ImageView 时，我的 ListView 不流畅

> ID：14108156
> 
> 赞同：0
> 
> 时间：2013-01-01T05:54:12.340
> 
> 标签：android

我使用适配器，`ListView`这是实现`getView`

```
@Override
public View getView(int position, View convertView, ViewGroup parent){
    ItemViewHolder viewHolder;
    if(convertView == null){
        convertView = (RelativeLayout)inflater.inflate(resource,parent, false);
        viewHolder = new ItemViewHolder();
        viewHolder.itemTextName = (TextView)convertView.findViewById(R.id.item_name);
        viewHolder.itemTextExpDate = (TextView)convertView.findViewById(R.id.item_exp_date);
        viewHolder.itemImage = (ImageView)convertView.findViewById(R.id.item_image);

    }
    else{

        viewHolder = (ItemViewHolder)convertView.getTag();
    }

    Item item = listItem.get(position);
    if(listItem != null){
        viewHolder.itemTextName.setText(item.getName());
        viewHolder.itemTextExpDate.setText(""+item.getDaysleft());
        viewHolder.itemImage.setImageBitmap(item.getImage());       
    }
    return convertView;
}

static class  ItemViewHolder  {
    View baseView;
    TextView itemTextName;
    TextView itemTextExpDate;
    ImageView itemImage;

} 
```

当我设置`Bitmap`为`ImageView`不`ListView`流畅。

我是否实现了正确的代码`getView`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T19:34:19.097

尝试`convertView.setTag(viewHolder)`在 if 块中添加 :。此外，使用[Universal Image Loader 之](https://github.com/nostra13/Android-Universal-Image-Loader)类的方法在列表视图中加载图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:35:18.680

看看这个简单的代码如何使用[Holder 模式](http://xjaphx.wordpress.com/2011/06/16/viewholder-pattern-caching-view-efficiently/)的简单[实现](http://www.androidsnippets.com/baseadapter-placeholder-pattern)，你必须只将它外部化

在开始使用 Integer.toString 或其他东西

```
viewHolder.itemTextExpDate.setText(""+item.getDaysleft()); 
```

当您使用 setImage... getView 将被多次调用。

为什么要检查它是否为空，并且使用它的速度快 1 行？没有意义。

```
if(listItem != null){
        viewHolder.itemTextName.setText(item.getName());
        viewHolder.itemTextExpDate.setText(""+item.getDaysleft());
        viewHolder.itemImage.setImageBitmap(item.getImage());       
    } 
```

最重要的是，您没有在 View 上设置持有人，此代码不会为您崩溃？

看题目：

[懒加载](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview) [getView多次](https://stackoverflow.com/questions/11463387/android-listview-getview-being-called-multiple-times-on-unobservable-views) [调用getView多次调用2](https://stackoverflow.com/questions/11186004/yet-another-getview-called-multiple-times)

# java - 将字符串数组值直接传递给 setter 方法

> ID：14108159
> 
> 赞同：4
> 
> 时间：2013-01-01T05:54:43.730
> 
> 标签：java, arrays, string

我有一个 String 数组，它有 setter 和 getter 方法。如何直接将值传递`{"one", "two"}`给 setter 方法，而不是先将值设置为变量然后传递参数？

```
String[] arr1 = {};
public String[] getArr1() {
    return arr1;
}

public void setArr1(String[] arr1) {
    this.arr1 = arr1;
} 
```

..期待类似`setArr1(?);`...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T05:57:19.630

你可以使用`setArr1(new String[]{"one", "two"})`

或者，您可以使用可变参数并将您的方法签名更改为 `setArr1(String... values)`并将该方法用作`setArr1("one", "two")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T05:57:32.123

```
someobject.setArr1(new String[]{"One", "Two"}); 
```

[`my answer`](https://stackoverflow.com/questions/13926518/what-does-the-new-keyword-do/13926588#13926588)有关数组初始化的更多信息，请参阅数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T05:57:58.037

```
setArr1(new String[]{"one","two","three"}); 
```

像这样试试

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T05:56:54.620

试试这个 -`setArr1(new String[]{"one", "two"})`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T05:59:04.020

使用此代码这是 setter 方法

```
public void setSubTaught(int pos, String value)
{
    subjectsTaught[pos]=value;
} 
```

这是getter方法

```
public String getSubTaught()
{
    String sub = Arrays.toString(subjectsTaught);
    int len = sub.length();
    String fix = sub.substring(1,len-1);
    return fix;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-01T06:03:26.447

您 `setArr1(String[] arr1)`将字符串数组作为参数，因此您可以按照我们设置 setter 方法的正常方式进行设置。

```
yourObject.setArr1(new String[]{"string1", "string2"}); 
```

# android - Android 访问外部存储

> ID：14108160
> 
> 赞同：7
> 
> 时间：2013-01-01T05:54:50.810
> 
> 标签：android, storage

我面临一些存储问题。我正在开发一个应用程序，我必须在该应用程序中访问手机的板载外部存储和我使用此代码获得的外部 sdCard 存储

```
Environment.getExternalStorageDirectory(); 
```

但是当板载外部内存存在时，此代码返回板载内存的路径而不是外部 sdCard，而 sdCard 已安装

现在的问题是..我想访问板载内存和外部 sdcard 有什么方法可以访问这两个内存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:21:23.747

试试这个：

```
String m_str = Environment.getExternalStorageDirectory()
               .getAbsolutePath().toString();           //return path sdcard/mnt 
```

# python - Python Sqlite3：INSERT INTO table VALUE（字典在这里）

> ID：14108162
> 
> 赞同：41
> 
> 时间：2013-01-01T05:55:25.363
> 
> 标签：python, dictionary, parameters, sqlite, insert

我想使用字典将值插入表中，我该怎么做？

```
import sqlite3

db = sqlite3.connect('local.db')
cur = db.cursor()

cur.execute('DROP TABLE IF EXISTS Media')

cur.execute('''CREATE TABLE IF NOT EXISTS Media(
                id INTEGER PRIMARY KEY, title TEXT, 
                type TEXT,  genre TEXT,
                onchapter INTEGER,  chapters INTEGER,
                status TEXT
                )''')

values = {'title':'jack', 'type':None, 'genre':'Action', 'onchapter':None,'chapters':6,'status':'Ongoing'}

#What would I Replace x with to allow a 
#dictionary to connect to the values? 
cur.execute('INSERT INTO Media VALUES (NULL, x)'), values)
cur.execute('SELECT * FROM Media')

meida = cur.fetchone()

print meida 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-01T06:59:21.260

如果您尝试使用 a`dict`来指定列名和值，则不能这样做，至少不能直接这样做。

这确实是 SQL 固有的。如果您不指定列名列表，则必须按`CREATE TABLE`顺序指定它们 - 您不能使用 a 执行此操作`dict`，因为 a`dict`没有顺序。如果你真的想要，当然，你可以使用 a `collections.OrderedDict`，确保它的顺序正确，然后就通过`values.values()`。但是到那时，为什么不首先有一个`list`（或`tuple`）呢？如果您绝对确定您已经以正确的顺序获得了所有值，并且您想按顺序而不是按名称引用它们，那么您所拥有的是 a `list`，而不是 a `dict`。

并且没有办法在 SQL 中绑定列名（或表名等），只能绑定值。

当然，您可以动态生成 SQL 语句。例如：

```
columns = ', '.join(values.keys())
placeholders = ', '.join('?' * len(values))
sql = 'INSERT INTO Media ({}) VALUES ({})'.format(columns, placeholders)
values = [int(x) if isinstance(x, bool) else x for x in values.values()]
cur.execute(sql, values) 
```

然而，这几乎总是一个坏主意。这实际上并不比生成和`exec`ing 动态 Python 代码好多少。而且您一开始就失去了使用占位符的所有好处——主要是保护免受 SQL 注入攻击，但也失去了数据库引擎中不太重要的东西，例如更快的编译、更好的缓存等。

最好退后一步，从更高的层面看待这个问题。例如，也许您并不真正想要一个静态的属性列表，而是一个名称-值`MediaProperties`表？或者，或者，也许您想要某种基于文档的存储（无论是高性能的 nosql 系统，还是只是存储在 a 中的一堆 JSON 或 YAML 对象`shelve`）？

* * *

使用[命名占位符](http://docs.python.org/2.7/library/sqlite3.html#sqlite3.Cursor.execute)的替代方法：

```
columns = ', '.join(my_dict.keys())
placeholders = ':'+', :'.join(my_dict.keys())
query = 'INSERT INTO my_table (%s) VALUES (%s)' % (columns, placeholders)
print query
cur.execute(query, my_dict)
con.commit() 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-05-22T17:41:22.067

有一个使用字典的解决方案。一、SQL语句

```
INSERT INTO Media VALUES (NULL, 'x'); 
```

将不起作用，因为它假定您按照它们在`CREATE TABLE`语句中定义的顺序引用所有列，如 abarnert 所述。（参见[SQLite 插入](http://www.sqlite.org/lang_insert.html)。）

通过指定列修复它后，您可以使用命名占位符插入数据。这样做的好处是可以安全地转义关键字符，因此您不必担心。来自[Python sqlite 文档](http://docs.python.org/2.7/library/sqlite3.html#sqlite3.Cursor.execute)：

```
values = {
    'title':'jack', 'type':None, 'genre':'Action', 
    'onchapter':None,'chapters':6,'status':'Ongoing'
}
cur.execute(
    'INSERT INTO Media (id, title, type, onchapter, chapters, status)
     VALUES (:id, :title, :type, :onchapter, :chapters, :status);', 
    values
) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-01-15T01:54:35.047

您可以使用[命名参数](https://www.sqlite.org/lang_expr.html)：

```
cur.execute('INSERT INTO Media VALUES (NULL, :title, :type, :genre, :onchapter, :chapters, :status)', values) 
```

这仍然取决于`INSERT`语句中的列顺序（那些`:`仅用作`values`字典中的键），但它至少不必在 python 端对值进行排序，而且您可以在`values`此处忽略其他内容；如果您将 dict 中的内容分开以将其存储在多个表中，那将很有用。

如果您仍想避免重复名称，则可以在执行虚拟查询后从`sqlite3.Row`结果对象或从中提取它们；`cur.description`将它们以 python 形式保存在您进行`CREATE TABLE`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-06T16:52:46.673

这是一种更通用的方式，具有转义的好处：

```
# One way. If keys can be corrupted don't use.
sql = 'INSERT INTO demo ({}) VALUES ({})'.format(
            ','.join(my_dict.keys()),
            ','.join(['?']*len(my_dict)))

# Another, better way. Hardcoded w/ your keys.
sql = 'INSERT INTO demo ({}) VALUES ({})'.format(
            ','.join(my_keys),
            ','.join(['?']*len(my_dict)))

cur.execute(sql, tuple(my_dict.values())) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-01T07:00:37.970

```
key_lst = ('status', 'title', 'chapters', 'onchapter', 'genre', 'type')
cur.execute('INSERT INTO Media (status,title,chapters,onchapter,genre,type) VALUES ' + 
            '(?,?,?,?,?,?);)',tuple(values[k] for k in key_lst)) 
```

做你的逃避[权利](https://xkcd.com/327/)。

你可能还需要`commit`在某个地方打个电话。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-10T14:45:34.050

超级晚了，但我想我会添加我自己的答案。不是专家，但我发现有些东西有效。

使用字典时保留顺序存在问题，其他用户已说明，但您可以执行以下操作：

```
# We're going to use a list of dictionaries, since that's what I'm having to use in my problem
input_list = [{'a' : 1 , 'b' : 2 , 'c' : 3} , {'a' : 14 , 'b' : '' , 'c' : 43}]
for i in input_list:
    # I recommend putting this inside a function, this way if this 
    # Evaluates to None at the end of the loop, you can exit without doing an insert
    if i :
        input_dict = i 
    else:
        input_dict = None
        continue
# I am noting here that in my case, I know all columns will exist.
# If you're not sure, you'll have to get all possible columns first.

keylist = list(input_dict.keys())
vallist = list(input_dict.values())

query = 'INSERT INTO example (' +','.join( ['[' + i + ']' for i in keylist]) + ') VALUES (' + ','.join(['?' for i in vallist]) + ')'

items_to_insert = list(tuple(x.get(i , '') for i in keylist) for x in input_list)
# Making sure to preserve insert order. 

conn = sqlite3.connect(':memory:')
cur = conn.cursor()
cur.executemany(query , items_to_insert)
conn.commit() 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-06T12:01:47.960

```
dictionary = {'id':123, 'name': 'Abc', 'address':'xyz'}    
query = "insert into table_name " + str(tuple(dictionary.keys())) + " values" + str(tuple(dictionary.values())) + ";"
cursor.execute(query) 
```

查询变成

```
insert into table_name ('id', 'name', 'address') values(123, 'Abc', 'xyz'); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-18T08:52:37.087

我遇到了类似的问题，所以我先创建了一个字符串，然后将该字符串传递给执行命令。执行确实需要更长的时间，但映射对我来说是完美的。只是一个解决方法：

```
create_string = "INSERT INTO datapath_rtg( Sr_no"
for key in record_tab:
    create_string = create_string+ " ," + str(key)
create_string = create_string+ ") VALUES("+ str(Sr_no) 
for key in record_tab:
    create_string = create_string+ " ," + str(record_tab[key])
create_string = create_string + ")"
cursor.execute(create_string) 
```

通过执行上述操作，我确保如果我的 dict (record_tab) 不包含特定字段，则脚本不会抛出错误并且可以完成正确的映射，这就是我首先使用字典的原因。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-19T00:41:16.627

我遇到了类似的问题，最终得到的结果与以下内容并不完全不同（注意 - 这是 OP 的代码，其位已更改，因此它按他们要求的方式工作） -

```
import sqlite3
db = sqlite3.connect('local.db')
cur = db.cursor()

cur.execute('DROP TABLE IF EXISTS Media')

cur.execute('''CREATE TABLE IF NOT EXISTS Media(
                id INTEGER PRIMARY KEY, title TEXT, 
                type TEXT,  genre TEXT,
                onchapter INTEGER,  chapters INTEGER,
                status TEXT
                )''')

values = {'title':'jack', 'type':None, 'genre':'Action',     'onchapter':None,'chapters':6,'status':'Ongoing'}

#What would I Replace x with to allow a 
#dictionary to connect to the values? 
#cur.execute('INSERT INTO Media VALUES (NULL, x)'), values)
# Added code.
cur.execute('SELECT * FROM Media')
colnames = cur.description
list = [row[0] for row in cur.description]
new_list = [values[i] for i in list if i in values.keys()]
sql = "INSERT INTO Media VALUES ( NULL, "
qmarks = ', '.join('?' * len(values))
sql += qmarks + ")"
cur.execute(sql, new_list)
#db.commit() #<-Might be important.
cur.execute('SELECT * FROM Media')
media = cur.fetchone()
print (media) 
```

# c++ - makefile 中的 CPP_LINK 是什么？

> ID：14108163
> 
> 赞同：0
> 
> 时间：2013-01-01T05:55:30.020
> 
> 标签：c++, makefile

make 文件中有什么`CPP_LINK`。我对此进行了谷歌搜索，但没有得到任何令人满意的答案。

除此之外，我还遇到了一些标志，例如`-Wl`, `-rpath`。这些标志是什么？

操作系统：CentOS 5.7 g++ 版本：4.1.2

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:00:32.440

通常在变量 CPP_LINK 中存储链接器的路径。从 obj 代码生成可执行文件的程序。您从 C++ 编译器获得的目标代码文件 :)

这是常见的答案。在您的问题中，没有提供有关您的操作系统和 C++ 版本的信息。

# javascript - Superfish HTML 和 CSS 不显示菜单

> ID：14108166
> 
> 赞同：3
> 
> 时间：2013-01-01T05:55:50.373
> 
> 标签：javascript, html, css, dreamweaver, superfish

我之前已经发布了我认为是一个过于具体的问题。让我用我遇到的一个普遍问题来改写它。

我有一个链接到 css 文件的 html 文件。我在同一目录的 js 文件夹中有 superfish.js。菜单不出现。

我做了什么：

1.  下载 superfish.js 并将其放在 js 文件夹中
2.  复制 superfish.css 文件并将其放在我的 .css 文件中
3.  在我的 html 文件顶部加载 js

这就是我能找到的所有我应该做的。我会说这似乎是一个 CSS 问题，因为当我改变

```
.sf-menu ul {
    position:  absolute;
    top:       -999em;
    width:     10em; /* left offset of submenus need to match (see below) */
} 
```

至

```
.sf-menu ul {
    position:  absolute;
    top:       0em;
    width:     10em; /* left offset of submenus need to match (see below) */
} 
```

菜单出现在左上角。我从 superfish 复制了水平导航 CSS，它仍然只水平显示。那么我是否错过了其他一些基本步骤？

HTML： [http ://smart-art.org/cadop/index.html](http://smart-art.org/cadop/index.html)

CSS：[http ://smart-art.org/cadop/oneColFixCtr.css](http://smart-art.org/cadop/oneColFixCtr.css)

显示`index.html`左上角的菜单，这是因为我将 CSS 更改`-999em`为`0em`... 所以我认为 JS 正在工作，但我完全感到困惑。

我希望这对我来说不是太具体，因为我正在使用 Dreamweaver。我在另一个文件中单击了一个带有 CSS 的列布局。从Superfish网站复制CSS，并将JS文件放在文件夹中。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:26:54.173

首先，一些建议：

*   在开发页面时，将 JavaScript 和 CSS 以小块的形式添加，这样在您了解发生了什么之前，您的页面/站点就不会增长到无法管理的大小。
*   添加新内容时，有时在标签中添加 CSS 会很有帮助。然后确保问题不是由链接问题引起的。

* * *

现在回答你的问题。根据您的页面，您的 HTML 看起来很混乱。我所做的只是从[Superfish v1.4.8 示例](http://users.tpg.com.au/j_birch/plugins/superfish/#examples)页面复制 HTML 并替换您的菜单。

看起来您的菜单缺少许多必要的菜单类。例如，查看顶部菜单元素和示例元素之间的区别：

你的代码：`<ul class="sf-menu">`

示例代码：`<ul id="sample-menu-1" class="sf-menu sf-js-enabled sf-shadow">`

我还将原始 CSS 用于`.sf-menu ul`.

```
 .sf-menu ul {
        position: absolute;
        top:      -999em;
        width:    10em; /* left offset of submenus need to match (see below) */
    } 
```

**工作示例：http:** [//jsfiddle.net/HtBUZ/](http://jsfiddle.net/HtBUZ/)

**修复页面的操作项**

1.  [使用Superfish v1.4.8 示例](http://users.tpg.com.au/j_birch/plugins/superfish/#examples)更正您的 HTML 。
2.  确保您的脚本是正确的。

    1.  您的页面缺少 JQuery。

        ```
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
        ```

    2.  您的页面链接不正确`hoverIntent.js`。
3.  将您的 CSS 恢复`-999em`为`.sf-menu ul`.

# php - 如何在没有任何会话概念的情况下在命令行中跟踪另一个 php 文件中的一个 php 变量？

> ID：14108180
> 
> 赞同：0
> 
> 时间：2013-01-01T05:57:58.963
> 
> 标签：php, mysql

我正在尝试为用户提供一个注册到系统的选项，并希望将该页面链接到另一个 php 文件，例如 detail.php 页面，其中所有数据库变量在该文件中保持活动状态。请任何人都可以帮助我..??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:02:07.693

其他替代方法是 cookie、发送到该页面的（加密的）POST 参数，或者如果您使用`include`语句将该文件的内容包含在当前页面中，您也可以在之前定义您的变量`include`，这些变量可以在包含的文件中使用.

PS：建议使用会话；尽管您的问题尚不清楚，但为什么您不打算使用会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T06:11:49.217

您可能拥有的任何选项都依赖于客户端发送某种形式的识别初始用户的方式。

你基本上有3个选择：

1.  继续通过表单将完成注册所需的所有数据重新发送到每个页面（即作为 GET 或 POST 数据）。
2.  将数据存储在 COOKIE 中并随每个请求一起发送。
3.  存储数据服务器端并使用会话（和 PHP 会话 COOKIE）

就个人而言，我建议坚持使用会话，因为它限制了请求之间发送的数据量。我能想到不这样做的唯一原因是如果您有多个应用程序服务器并且您的会话没有共享存储（即内存缓存或数据库）

如果您想详细说明您的 OP 并解释为什么您不想使用会话，我很乐意为您提供更深入的答案。

# android - 为什么控件在我将它们移动到另一个位置后没有被检测到？

> ID：14108181
> 
> 赞同：0
> 
> 时间：2013-01-01T05:58:03.293
> 
> 标签：android, android-layout

每次我将控件移动到 Android 布局创建器中的新位置后，它都无法在代码中键入控件。

布局 XML重新定位**之前**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    tools:context="relax.android.classes.DishesArrayAdapter" >

         <Button
            android:id="@+id/btnDone"
            android:layout_width="75dp"
            android:layout_height="match_parent"
            android:background="@android:drawable/btn_default"
            android:contentDescription="@string/ibtnValueDone" />

        <TextView
            android:id="@+id/tvName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/tvValueName"
            android:textSize="12sp" />

    </LinearLayout> 
```

布局 XML**重新**定位后：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    tools:context="relax.android.classes.DishesArrayAdapter" >

         <TextView
            android:id="@+id/tvName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/tvValueName"
            android:textSize="12sp" />

         <Button
            android:id="@+id/btnDone"
            android:layout_width="75dp"
            android:layout_height="match_parent"
            android:background="@android:drawable/btn_default"
            android:contentDescription="@string/ibtnValueDone" />

    </LinearLayout> 
```

**代码示例：**

```
TextView tvName = (TextView) findViewById(R.id.tvName);
Button btnDone = (Button) findViewById(R.id.btnDone); 
```

在我调试时重新定位控件后，它会抛出`java.lang.ClassCastException: android.widget.Button cannot be cast to android.widget.TextView`.

我想知道这怎么可能是错误的，因为`view`通过 ID 查找/检测控件而不是其在布局中的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:01:16.607

调试前清理项目。所以你不会得到这个类转换异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T06:16:21.183

清理项目并重新构建项目，然后尝试调试。所以你不会得到这个类转换异常。

# java - Swing中的垂直最大化窗口

> ID：14108182
> 
> 赞同：0
> 
> 时间：2013-01-01T05:58:07.060
> 
> 标签：java, swing

当通过将窗口的顶部或底部边缘分别拖动到屏幕的顶部或底部来垂直最大化我的 win7 64 位机器上的窗口时，应用程序变得无响应并显示黑色部分或其他一些视觉失真。通过双击边缘垂直最大化或常规最大化时不会发生。

由于它发生在 Java 教程程序中（我随机选择了一些，他们都这样做了），这是 Swing 中的某种错误 - 还是我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:49:10.563

此 SSCCE 显示了 Windows 7（64 位和 32 位版本）下的问题，使用 JDK 1.7.0_07 编译，运行 JRE 1.7.0_07：

```
public class Expander extends javax.swing.JFrame   
{   
    public Expander()   
    {   
        this.setBounds(0, 0, 300, 300);   
    }   

    public static void main(String args[])   
    {   
        java.awt.EventQueue.invokeLater(new Runnable()   
        {   
            public void run()   
            {   
                new Expander().setVisible(true);   
            }   
        });   
    }   
} 
```

问题似乎是没有调整大小事件传递到 JFrame 的内容窗格。JFrame 的paint 方法确实获得了新的大小，但它里面什么都没有。在 1.6 版下不会出现问题（无法在 Linux 下测试它，因为自动调整大小的行为显然是 Windows 独有的）。

有关更详细的讨论，请参阅[http://www.coderanch.com/t/601457/GUI/java/Vertically-Maximizing-Window-Swing 。](http://www.coderanch.com/t/601457/GUI/java/Vertically-Maximizing-Window-Swing)我已在 bugs.sun.com 上提交了一份错误报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T01:49:48.997

我使用的系统是 i7-2600k、ati radeon 6800 和 win7 64bit，我从来没有遇到过这样的问题。您使用的是最新版本的 Java 吗？我做了以下程序。它在我的系统上运行良好，没有任何问题。

JPositioner 的下载链接：[JPositioner](http://gamer4.hpage.com/get_file.php?id=2091565&vnr=463507)

请检查并让我知道您是否面临同样的问题，即使使用 JPositioner。

# c# - VS2012 Xaml C# 名称空间中不存在

> ID：14108183
> 
> 赞同：0
> 
> 时间：2013-01-01T05:58:21.687
> 
> 标签：c#, xaml

我正在尝试做这个简单的教程，我已经到了第二部分： http: [//msdn.microsoft.com/en-us/library/cc265158 (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc265158(v=vs.95).aspx)

（在我的代码中，我刚刚将 Customer 替换为 Game

但我不断收到错误：名称空间中不存在名称“游戏”

> “clr 命名空间：GameLauncher”。XML 命名空间“clr-namespace:GameLauncher;assembly=GameLauncher, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null”中的未知类型“Games”

我的 XAML 代码是：

```
<Page
x:Class="GameLauncher.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:GameLauncher"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:src="clr-namespace:GameLauncher"
mc:Ignorable="d">

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Grid.Resources>
        <src:Games x:Key="games"/>
    </Grid.Resources>
    <ListBox HorizontalAlignment="Left" Height="{Binding ElementName=LayoutRoot, Path=ActualHeight}" Margin="50,50,0,50" VerticalAlignment="Stretch" Width="300"/>
</Grid> 
```

我的 C# 代码是：

```
namespace GameLauncher
{

public class Game
{
    public String FirstName { get; set; }
    public String LastName { get; set; }
    public String Address { get; set; }

    public Game(String firstName, String lastName, String address)
    {
        this.FirstName = firstName;
        this.LastName = lastName;
        this.Address = address;
    }

}

public class Games : ObservableCollection<Game>
{
    public Games()
    {
        Add(new Game("Michael", "Anderberg",
                "12 North Third Street, Apartment 45"));
        Add(new Game("Chris", "Ashton",
                "34 West Fifth Street, Apartment 67"));
        Add(new Game("Cassie", "Hicks",
                "56 East Seventh Street, Apartment 89"));
        Add(new Game("Guido", "Pica",
                "78 South Ninth Street, Apartment 10"));
    }

}

public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.InitializeComponent();
    }

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
    }
}
} 
```

我很可能在做一些愚蠢的错误，我已经有一段时间没有编码了。

我让它工作了一秒钟，然后当我将它从客户更改为游戏时，它全部停止工作，我无法让它再次工作，即使我将其更改回客户，即使我从再次划伤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:08:34.500

我看不到您在代码中创建 Games 对象的位置。您将需要一个带有 getter/setter 的 Games 属性，以便您可以在 XAML 中使用它。

在 MainPage() 中，您需要执行以下操作：

```
public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.InitializeComponent();
        this.Games = new Games();    // this will execute the Games constructor 
                                     // and add the games to Games
    }

    // allows you to use 'Games' in your xaml
    public ObservableCollection<Game> Games  
    {
        get;
        set;
    }

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
    }
} 
```

为了清楚起见，我会使用“AllGames”、“CurrentGame”等内容，而不仅仅是游戏。

# mysql - 与字段的一个或多个条件匹配的查询行

> ID：14108189
> 
> 赞同：0
> 
> 时间：2013-01-01T05:59:00.223
> 
> 标签：mysql, sql, select

我想选择与一个或多个条件匹配的行。

**示例表和数据**

```
#ID #NAME #KEYWORDS(Varchar)

1 BBC   news,finance

2 CNN   music,finance,sports

3 CNBC  music,sports,finance 
```

用户搜索条件将是`sports,finance` **（可以是多个用逗号分隔的关键字）**，我在查询之前将其准备到关键字字符串列表中。

当我使用下面的**sql (1)**时，它只选择 CNN 和 CNBC。

```
SELECT * from channel where Keywords LIKE '%sports%' OR '%finance%'; 
```

但是当我使用下面的**sql(2** ) 时，显示 BBC、CNN、CNBC。

```
SELECT * from channel where Keywords LIKE '%finance%' OR '%sports%' 
```

我的要求是我想选择与关键字匹配的所有行（在上面的示例中：体育、金融应该得到 BBC、CNN 和 CNBC，因为这三个都有金融）。

由于用户输入将是 String(sports,finance,etc) ，我只是根据不同的输入进行查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:06:22.790

使用联合查询比 OR 更好。多个或查询需要更多时间来执行。

```
SELECT *
FROM channel
WHERE FIND_IN_SET('finance', keywords) 
UNION
SELECT *
FROM channel
      FIND_IN_SET('sports', keywords) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T06:04:08.767

```
SELECT *
FROM table1
WHERE FIND_IN_SET('finance', keywords) or
      FIND_IN_SET('sports', keywords) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/1975d/3)

或使用`LIKE`

```
SELECT * 
from table1 
where Keywords LIKE '%sports%' OR 
      Keywords LIKE '%finance%' 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/1975d/4)

# python - 有没有办法从列表中提取第一个`/`之前的部分？

> ID：14108194
> 
> 赞同：0
> 
> 时间：2013-01-01T06:00:02.033
> 
> 标签：python, list, python-2.7, split

我有一个 URL 列表：

> URL = ['ose.co.jp/frame.html', 'tse.or.jp/english/individuals/index.html', 'traderupdates.nyse.com/?sa_campaign=/internal_ads/callouts/traderupdates']

我曾想过使用 split('/')，​​但意识到它并不能真正解决问题，因为我仍然需要删除 URL 中“/”之后的部分。

我正在寻找的结果是：

```
URL = ['ose.co.jp', 'tse.or.jp', traderupdates.nyse.com'] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T06:08:59.617

如果我没有误解这个问题，我相信这会很好：

```
for i in URL:
    a = i.split('/')[0]
    #do something 
```

编辑：如果这是您想要的输出，那么

```
URL = [i.split('/')[0] for i in URL] 
```

会给你你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T06:18:28.083

如果您只对列表中的第一项感兴趣，您可以期待使用[str.partition](http://docs.python.org/2/library/stdtypes.html#str.partition)。

这将是使用它的实现

```
>>> URL = ['ose.co.jp/frame.html', 'tse.or.jp/english/individuals/index.html', 'traderupdates.nyse.com/?sa_campaign=/internal_ads/callouts/traderupdates']
>>> [e.partition("/")[0] for e in URL]
['ose.co.jp', 'tse.or.jp', 'traderupdates.nyse.com'] 
```

# java - JSF 数据表根据选择填充行

> ID：14108203
> 
> 赞同：1
> 
> 时间：2013-01-01T06:00:52.253
> 
> 标签：java, jsf-2, primefaces

我在一个 jsf 页面中有两个数据表，并且都有两个不同的托管 bean。

```
//master table
<p:dataTable id="dataTable" var="req" lazy="true"
            value="#{emp.lazyModel}" paginator="true" rows="10"
            selection="#{emp.selectedRequest}">         
            <p:ajax event="rowSelectRadio" listener="#{emp.onRowSelect}" />
            <p:column selectionMode=">
                <h:outputText value="#{req.empNo}" />
            </p:column>

// detail table
<p:dataTable id="Det" var="det" lazy="true"
            value="#{dept.lazyModel}" paginator="true" rows="1">

            <p:column>
                <f:facet name="header">
                    <h:outputText value="DeptNo" />
                </f:facet>
                <h:outputText value="#{det.deptNo}" />
            </p:column> 
```

分别管理bean

// 主表托管Bean

```
@Named("emp")
@ViewAccessScoped
public class EmployeeManagedBean implements Serializable {

@PostConstruct
    public void init() {
        initTable();
    } 
```

// 明细表托管Bean

```
@Named("dept")
@ViewAccessScoped
public class DepartmentManagedBean implements Serializable {

@PostConstruct
    public void init() {
        initTable();
    } 
```

`initTable()`是一种为两个托管 bean 填充 LazyModel 的方法

当我在主数据表中选择一行时，我可以在托管 bean 中为第一个数据表获取选定的行值，即`EmployeeManagedBean`

我的问题是通过将第一个数据表的选定行值传递给第二个托管 bean 并因此填充第二个数据表来填充第二个数据表的最佳方法是什么？在第二个数据表中显示值的触发点应基于在第一个数据表中选择一行。

任何帮助都是非常可观的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:50:53.303

我对这一切都很陌生，但我尝试这样做：

1.  将选定的行传递给第二个 bean (DepartmentManagedBean)
2.  根据选定的行取部门
3.  使用 p:ajax 属性*更新更新第二个数据表*

# python - 在发送电子邮件时解密正文的文本

> ID：14108204
> 
> 赞同：0
> 
> 时间：2013-01-01T06:00:55.307
> 
> 标签：python

我正在尝试使用 python 发送邮件，我将正文保存在变量“body”中我尝试使用下面的方法对其进行解密，但电子邮件的正文保持原样，html 代码没有被解码..我查看了 stackoverflow 上的其他帖子但是无法得到任何实质性的东西......哪里出了问题？

```
from email.mime.text import MIMEText
from subprocess import Popen, PIPE

def email (body,subject):
    msg = MIMEText("%s" % body)
    msg["From"] = "test@company.com"
    msg["To"] = "bot@qualcomm.com"
    msg["Subject"] = 'The contents of %s' % subject
    p = Popen(["/usr/sbin/sendmail", "-t"], stdin=PIPE)
    p.communicate(msg.as_string())
def main ():
    subject="Test subject"
    body = """\
        <html>
         <head></head>
         <body>
          <p>Hi!<br>
              How are you?<br>
             Here is the <a href="http://www.python.org">link</a> you wanted.
         </p>
         </body>
        </html>
"""
    email(body,subject)

if __name__ == '__main__':
    main() 
```

正文按原样打印如下..html 代码未解码

```
<html>
 <head></head>
 <body>
  <p>Hi!<br>
      How are you?<br>
     Here is the <a href="http://www.python.org">link</a> you wanted.
 </p>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T06:35:09.003

哦...所以您希望 MUA 将内容解释为 html。在消息中设置内容类型：

```
msg["Content-Type"] = "text/html" 
```

否则，MUA 将假定它是`text/plain`，并按原样渲染它。

# java - 仍然停留在 JSONParsing 问题上

> ID：14108205
> 
> 赞同：0
> 
> 时间：2013-01-01T06:00:58.650
> 
> 标签：java, android

我被困住并且发疯了来解决这个问题，但我没有运气。我尝试了 SO 成员给我的所有指导方针，正如我之前问过这个问题一样我可以解决这个 JSONParsing 吗？我从 PHP 发布数据并希望在 android EditText 框中获取它。我对其进行了编码，但是从第一天开始就存在一些问题，但尚未解决。我在模拟器和电话上遇到了不同的 LogCat 错误. 我已经向你展示了我的 java 代码和 LogCat 错误。任何指南对我来说都是宝贵的。

我的 Java 代码是我出错的地方：

```
// save button
    btnSave = (Button) findViewById(R.id.btnSave);

    // getting product details from intent
    Intent i = getIntent();

    // getting product id (pid) from intent
    cid = i.getStringExtra(TAG_CID);

    // save button click event
    btnSave.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // starting background task to update product
            new SaveTaskDetails().execute();
        }
    });

    }

@Override
protected void onStart() {
  super.onStart();
   // Getting complete product details in background thread
  new GetTaskDetails().execute();
}

/**
 * Background Async Task to Get complete product details
 * */
class GetTaskDetails extends AsyncTask<String, String, JSONObject> {

    /**
     * Before starting background thread Show Progress Dialog
     * */

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        tDialog = new ProgressDialog(My_Task.this);
        tDialog.setTitle("Please Wait");
        tDialog.setMessage("Retrieving Task Details.");
        tDialog.setIndeterminate(false);
        tDialog.setCancelable(true);
        tDialog.show();

    }

    /**
     * Getting task details in background thread
     * @return 
     **/

   protected JSONObject doInBackground(String... params1) {

      JSONObject my_task = null;
           // updating UI from Background Thread
                  // Check for success tag
                int success;
                try {
                    // Building Parameters
                    List<NameValuePair> params = new ArrayList<NameValuePair>();
                    params.add(new BasicNameValuePair("cid", cid));

                    // getting product details by making HTTP request
                    // Note that product details url will use GET request
                    JSONObject json = JSONParser.makeHttpRequest(
                            url_read_mytask, "GET", params);

                    // check your log for json response
     //                Log.d("Single Task Details", json.toString());

                    // json success tag
                    success = json.getInt(TAG_SUCCESS);
                    if (success == 1) {
                        // successfully received product details
                        JSONArray my_taskObj = json
                                .getJSONArray(TAG_MYTASK); // JSON Array

                        // get first product object from JSON Array
                       my_task = my_taskObj.getJSONObject(0);

                         }
                    else
                    {
                        // task with cid not found

                    }
                } 
                catch (JSONException e) {
                    e.printStackTrace();
                }

        return my_task;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/

    protected void onPostExecute(JSONObject my_task) {
        // dismiss the dialog once got all details
        cus_name_txtbx = (EditText) findViewById(R.id.cus_name_txtbx);
        try {
            cus_name_txtbx.setText(my_task.getString(TAG_NAME));
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        contact_no_txtbx = (EditText) findViewById(R.id.contact_no_txtbx);
        try {
            contact_no_txtbx.setText(my_task.getString(TAG_CONTACT));
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        ticket_no_txtbx = (EditText) findViewById(R.id.ticket_no_txtbx);
        try {
            ticket_no_txtbx.setText(my_task.getString(TAG_TICKET));
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        task_detail_txtbx = (EditText) findViewById(R.id.task_detail_txtbx);
        try {
            task_detail_txtbx.setText(my_task.getString(TAG_TASKDETAIL));
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }           

        tDialog.dismiss(); 
    }
}

/**
 * Background Async Task to  Save product Details
 * */
class SaveTaskDetails extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        tDialog = new ProgressDialog(My_Task.this);
        tDialog.setTitle("Please Wait");
        tDialog.setMessage("Saving Task");
        tDialog.setIndeterminate(false);
        tDialog.setCancelable(true);
        tDialog.show();
    }

    /**
     * Saving product
     * */
    protected String doInBackground(String... args) {

        // getting updated data from EditTexts
        String cus_name = cus_name_txtbx.getText().toString();
        String contact_no = contact_no_txtbx.getText().toString();
        String ticket_no = ticket_no_txtbx.getText().toString();
        String task_detail = task_detail_txtbx.getText().toString();

        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair(TAG_CID, cid));
        params.add(new BasicNameValuePair(TAG_NAME, cus_name));
        params.add(new BasicNameValuePair(TAG_CONTACT, contact_no));
        params.add(new BasicNameValuePair(TAG_TICKET, ticket_no));
        params.add(new BasicNameValuePair(TAG_TASKDETAIL, task_detail));

        // sending modified data through http request
        // Notice that update product url accepts POST method
        JSONObject json = JSONParser.makeHttpRequest(url_update_mytask,
                "POST", params);

        // check json success tag
        try {
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // successfully updated
                Intent i = getIntent();
                // send result code 100 to notify about product update
                setResult(100, i);
                finish();
            } else {
                // failed to update product
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once product uupdated
        tDialog.dismiss();
    }
} 
```

我的 Logcat 错误是：

```
 01-01 11:28:52.549: E/WindowManager(31782):     at java.lang.reflect.Method.invokeNative(Native Method)
01-01 11:38:15.149: E/WindowManager(1133): Activity com.example.visit.record.My_Task has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4054ce88 that was originally added here
01-01 11:38:15.149: E/WindowManager(1133): android.view.WindowLeaked: Activity com.example.visit.record.My_Task has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4054ce88 that was originally added here
01-01 11:38:15.149: E/WindowManager(1133):  at android.view.ViewRoot.<init>(ViewRoot.java:277)
01-01 11:38:15.149: E/WindowManager(1133):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
01-01 11:38:15.149: E/WindowManager(1133):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
01-01 11:38:15.149: E/WindowManager(1133):  at android.view.Window$LocalWindowManager.addView(Window.java:433)
01-01 11:38:15.149: E/WindowManager(1133):  at android.app.Dialog.show(Dialog.java:288)
01-01 11:38:15.149: E/WindowManager(1133):  at com.example.visit.record.My_Task$GetTaskDetails.onPreExecute(My_Task.java:139)
01-01 11:38:15.149: E/WindowManager(1133):  at android.os.AsyncTask.execute(AsyncTask.java:391)
01-01 11:38:15.149: E/WindowManager(1133):  at com.example.visit.record.My_Task.onStart(My_Task.java:118)
01-01 11:38:15.149: E/WindowManager(1133):  at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1225)
01-01 11:38:15.149: E/WindowManager(1133):  at android.app.Activity.performStart(Activity.java:3941)
01-01 11:38:15.149: E/WindowManager(1133):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1794)
01-01 11:38:15.149: E/WindowManager(1133):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1842)
01-01 11:38:15.149: E/WindowManager(1133):  at android.app.ActivityThread.access$1500(ActivityThread.java:132)
01-01 11:38:15.149: E/WindowManager(1133):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
01-01 11:38:15.149: E/WindowManager(1133):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-01 11:38:15.149: E/WindowManager(1133):  at android.os.Looper.loop(Looper.java:143)
01-01 11:38:15.149: E/WindowManager(1133):  at android.app.ActivityThread.main(ActivityThread.java:4268)
01-01 11:38:15.149: E/WindowManager(1133):  at java.lang.reflect.Method.invokeNative(Native Method)
01-01 11:38:15.149: E/WindowManager(1133):  at java.lang.reflect.Method.invoke(Method.java:507)
01-01 11:38:15.149: E/WindowManager(1133):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-01 11:38:15.149: E/WindowManager(1133):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-01 11:38:15.149: E/WindowManager(1133):  at dalvik.system.NativeStart.main(Native Method) 
```

请指导。**我在new GetTaskDetails().execute()**上遇到错误 ；并在 `**tDialog.show();**`GetTaskDetails 类的 PreExecute 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T06:04:18.017

解决方案是在退出 Activity 之前调用`dismiss()`您在 viewP.java:183 中创建的对话框，例如在 onPause() 中。

视图具有对其父上下文的引用（取自构造函数参数）。如果您离开 Activity 而不销毁`Dialogs`其他动态创建的视图，它们仍然持有对您的 Activity 的引用（如果您使用 this 作为 Context: 像 new 一样创建`ProgressDialog(this)`，

因此，它无法被 GC 收集，从而导致内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T06:27:40.597

> 您在后台运行您的 UI 并从它们中删除，然后在执行后您可以设置 (e.gcus_name_txtbx.setText(my_task.getString(TAG_NAME));) 您没有在 doIn 中设置它们 romove 每个 UI 到 doIn..

# android - 三个 EditText 中的计时器无法正常工作

> ID：14108210
> 
> 赞同：0
> 
> 时间：2013-01-01T06:01:44.217
> 
> 标签：android, timer, timertask

![在此处输入图像描述](../Images/6fa3d695fdccd17ac41b55778f1b20d3.png)我在android中做了一个定时器应用程序。在应用程序中有三个（不可编辑）`EditText`和一个`Button`。当我第一次按下`Button`时，第一次的定时器`EditText`将启动，当我第二次按下它时，第一次的定时器`EditText`将停止，同时第二个计时器`EditText`将启动，当我再次按下按钮时，第三个会发生同样的事情。`EdtiText`现在这段代码工作正常，但是当我按下返回按钮并再次启动它时，它在第三个停止工作`EditText`。问题有时是计时器第三个 EditText 不工作（不显示）..我的代码如下：

**mainActivity.java**

```
package com.example.timerdemo2;

import java.util.Date;
import java.text.SimpleDateFormat;
import java.util.TimeZone;
import java.util.Timer;
import java.util.TimerTask;

import org.w3c.dom.Text;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.view.KeyEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {
    EditText et1,et2,et3;
    TextView tv;
   public int i=0;
    long starttime = 0;
    long lasttime,lasttime1;
    final Handler handler = new Handler();
    Handler h2 = new Handler();
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            moveTaskToBack(true);
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }
    Runnable run = new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            long millis = System.currentTimeMillis() - starttime;
               int seconds = (int) (millis / 1000);
               int minutes = (seconds%3600)/60;
               int hours = seconds / 3600;
               seconds     = seconds % 60;

               et1.setText(String.format("%02d:%02d:%02d",hours, minutes, seconds));
     //          et2.setText(String.format("%02d:%02d:%02d",hours, minutes, seconds));
      //         et3.setText(String.format("%02d:%02d:%02d",hours, minutes, seconds));

               h2.postDelayed(this, 500);
        }
    };

    class firstTask extends TimerTask {

        public void run() {
            handler.sendEmptyMessage(0);
        }
};  

class secondTask extends TimerTask{

    @Override
    public void run() {
        // TODO Auto-generated method stub
        MainActivity.this.runOnUiThread(new Runnable() {

            @Override
            public void run() {

                // TODO Auto-generated method stub
                long millis = System.currentTimeMillis() - starttime;
                int seconds = (int)(millis/1000);
                int hours =seconds/3600;
                int minutes = (seconds % 3600)/60;
                seconds = seconds % 60;
                et2.setText(String.format("%02d:%02d:%02d", hours,minutes,seconds));

            }
        });
    }

}

class thirdTask extends TimerTask{

    @Override
    public void run() {
        // TODO Auto-generated method stub
        MainActivity.this.runOnUiThread(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub

                 long millis = System.currentTimeMillis() - starttime;
                 int seconds = (int)(millis/1000);
                 int hours =seconds/3600;
                 int minutes = (seconds % 3600)/60;
                 seconds = seconds % 60;

                 et3.setText(String.format("%02d:%02d:%02d", hours,minutes,seconds));
                 h2.postDelayed(this, 500);
            }
        });
    }

}
    Timer timer = new Timer();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Bundle bundle = this.getIntent().getExtras();
        String title = bundle.getString("title");
        tv = (TextView)findViewById(R.id.projectTitle);
        tv.setText(title);

        et1= (EditText)findViewById(R.id.timeEdit1);
        et2= (EditText)findViewById(R.id.timeEdit2);
        et3= (EditText)findViewById(R.id.timeEdit3);
        Button b = (Button)findViewById(R.id.btn);
        b.setText("Start");
        b.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
        Button b =(Button)v;

        if(b.getText().equals("Stop")){
            timer.cancel();
            timer.purge();
            h2.removeCallbacks(run);
            Intent intent =new Intent(MainActivity.this,Timedetails.class);
            Bundle bundle =new Bundle();

            //Procedure for Showing time stamps on another page

            String a = et1.getText().toString();
            String b1 = et2.getText().toString();
            String c = et3.getText().toString();

            String t =  tv.getText().toString();
            intent.putExtra("titl1",t);
            startActivity(intent);

             SimpleDateFormat format = new SimpleDateFormat("hh:mm:ss");
             format.setTimeZone(TimeZone.getTimeZone("UTC"));
           try{
               bundle.putString("t1", a);
                bundle.putString("t2", b1);
                bundle.putString("t3", c);
                 Date date1 = (Date) format.parse(a);
                 Date date2 = (Date) format.parse(b1);
                 Date date3 = (Date) format.parse(c);
                 //time difference in milliseconds
                 long timeDiff = date2.getTime() - date1.getTime(); 
                 long timeDiff2 = date3.getTime() - date2.getTime();
                 //new date object with time difference
                 Date diffDate = new Date(timeDiff); 

                Date diffDate2 = new Date(timeDiff2);
                 long timeDiffSecs = timeDiff/1000;
                 String timeDiffString = timeDiffSecs/3600+":"+
                                         (timeDiffSecs%3600)/60+":"+
                                         (timeDiffSecs%3600)%60;
                 long timeDiffSecs1 = timeDiff2/1000;
                 String timeDiffString1 = timeDiffSecs1/3600+":"+
                                         (timeDiffSecs1%3600)/60+":"+
                                         (timeDiffSecs1%3600)%60;
                 //formatted date string
                // String timeDiffString = format.format(diffDate); 
                 //System.out.println("Time Diff = "+ timeDiffString );
                 bundle.putString("t1", a);
                    bundle.putString("t2", b1);
                    bundle.putString("t3", c);
         bundle.putString("dif1", timeDiffString);
         bundle.putString("dif2", timeDiffString1);
           }
           catch(Exception e){
               e.printStackTrace();
           }

            intent.putExtras(bundle);
            startActivity(intent);
            b.setText("Next");

        }

        else if(b.getText().equals("Lap1")) 
        {

            timer.schedule(new secondTask(),0, 500);
            h2.removeCallbacks(run);
            b.setText("lap2");
        }
        else if(b.getText().equals("lap2")){

            timer.schedule(new thirdTask(), 0,500);
            h2.removeCallbacks(run);
            timer.cancel();
            timer.purge();
            b.setText("Stop");
        }
        else {
            starttime = System.currentTimeMillis();
            timer = new Timer();
            timer.schedule(new firstTask(), 0,500);
           // timer.schedule(new secondTask(),  0,500);
            //timer.schedule(new thirdTask(),  0,500);
            h2.postDelayed(run, 0);
            b.setText("Lap1");           
           //long lastdown = System.currentTimeMillis();
        }

        }
    });  
    }

} 
```

**MainActivity.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/abs5"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/projectTitle"
       android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="top|center"
        android:layout_marginTop="5dp"
        android:text="Project Title"
        android:textColor="#CCCCCC"
        android:textSize= "40dp"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textStyle="bold"  />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="10dp"
        android:text="Timing Point1"
       android:textSize="20dp"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#CCCCCC" />

    <EditText
        android:id="@+id/timeEdit1"
        android:layout_width="172dp"
        android:layout_height="30dp"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="10dp"
        android:background="#FFFFFF"
        android:editable="false"
        android:filterTouchesWhenObscured="false"
        android:focusable="false" />

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 

    android:layout_marginTop="10dp">

    <TextView

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Timing Point2"
        android:textColor="#CCCCCC"
        android:textSize="20dp"
        android:layout_marginTop="10dp"
         android:layout_marginLeft="5dp"
        android:textAppearance="?android:attr/textAppearanceMedium" />

     <EditText
         android:id="@+id/timeEdit2"
         android:layout_width="172dp"
        android:layout_height="30dp"
         android:layout_marginLeft="5dp"
         android:layout_marginTop="10dp"
           android:focusable="false"
        android:filterTouchesWhenObscured="false"
         android:background="#FFFFFF"
         android:editable="false" />

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"

    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="10dp"
        android:text="Timing Point3"
        android:textColor="#CCCCCC"
        android:textSize="20dp"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/timeEdit3"
        android:layout_width="172dp"
       android:layout_height="30dp"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="10dp"
        android:background="#FFFFFF"
        android:editable="false" >

        <requestFocus />
    </EditText>

    </LinearLayout>

 <LinearLayout
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:layout_marginTop="10dp"
     android:layout_marginBottom="20dp"
     android:orientation="horizontal" >

     <Button
         android:id="@+id/btn"
         android:layout_width="129dp"
         android:layout_height="64dp"
         android:layout_marginBottom="10dp"
         android:layout_marginLeft="110dp"
         android:layout_marginTop="10dp"
         android:background="@drawable/aqa"
         android:textColor="#FFFFFF"
         android:textSize="30dp" />

 </LinearLayout>

</LinearLayout> 
```

请尽快帮助我......真的很感谢你......有一个gud tym

![在我的图像中，第三个计时器在将其安装在设备上后有时无法工作。](../Images/a261ee7bb1e26077837f9245153d0802.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:46:38.757

在您的 lap2 处理程序中查看此代码：

```
 timer.schedule(new thirdTask(), 0,500);
        h2.removeCallbacks(run);
        timer.cancel();
        timer.purge();
        b.setText("Stop"); 
```

您安排任务并在之后立即取消计时器。

我建议您摆脱`Timer`并只使用该`Handler.postDelayed()`方法，就像您已经为时间更新所做的那样，并开始更新第一个字段：

```
h2.postDelayed(run, 0); 
```

使用相同的方法开始更新第二个和第三个字段。您根本不需要`Timer`and`TimerTask`实例。

另外，为什么需要两个处理程序（`handler`和`h2`）？

# node.js - 我正在使用 node.js，并且我正在尝试添加两个整数，但是，它们只是将它们放在一起

> ID：14108222
> 
> 赞同：3
> 
> 时间：2013-01-01T06:03:29.933
> 
> 标签：node.js, integer

我正在使用node.js，并且我正在尝试添加两个整数，但是，它们只是将它们放在一起...我查找了Float，试图使整数浮动，但是node.js 无法识别float .

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-01T06:15:31.010

显然，两者中至少有一个实际上是一个包含数字的字符串。V8 然后进行字符串连接而不是添加数字。

您需要做的是将字符串转换为实数。你可以使用`parseInt()`or`parseFloat()`函数来做到这一点，但更快的方法是减法`0`：由于不可能从字符串中减法，V8 尝试将字符串的内容视为数字。

最后你也会得到一个数字，但 AFAIK 这种方法比使用解析函数更快。

例子：

```
var foo = '23';
typeof (foo - 0); // => 'number'

var a = '23',
    b = '42';
console.log((a - 0) + (b - 0)); // 65 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-03T06:44:53.063

最好的方法是在执行任何操作之前进行转换，例如：

```
var result = Number(x1) + Number(x2) - Number(x3) 
```

来源：[http ://www.w3schools.com/jsref/jsref_number.asp](http://www.w3schools.com/jsref/jsref_number.asp)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-12-11T03:34:54.830

在我的 node.js 中，我这样做了。

这是 html 文件：index.html

```
<form action="/submission" method="POST"> 
First Number: <input name = "firstNumber" type="number" /> <br>
Second Number: <input name = "lastNumber" type="number" /> <br>
<input type="submit"/>
</form> 
```

这是 node.js 文件：node.js

现在，当你这样做时，你也想先调用它，这样你就可以在本地主机上启动它，不管它是什么。你可以做出这样的选择。

```
var express = require('express');
var app = express();

var bodyParser = require('body-parser');
app.use(bodyParser.urlencoded({extended:false})); 
```

现在我从我的终端 ^ 那里安装了正文解析器，它将在下面的 app.post 语句中使用。

```
app.get('/', function(req, res){
    res.sendFile(__dirname + '/index.html'); //Gets the html
});

 app.post('/submission', function(req, res) {
   var first = parseInt(req.body.firstNumber);
   var second = parseInt(req.body.lastNumber);
    var sum = Number(first + second);
    res.send('The sum is: ' + Number(sum));
   }); 
```

然后不要忘记在本地主机的终端上运行您的文件。快乐编码！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-04T12:04:58.647

我也有同样的问题，但解决方案很简单......这是因为字符串数据类型

```
var variable_name="1"; // String Type
console.log(parseInt(variable_name)+1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-21T06:51:22.243

```
**Add this to index.html file**

<form action="http://localhost:3000/sum" method="GET">
        <input id = "one" type="number" name="first" value="">
        <input id = "two" type="number" name="sec" value="">
        <input type="submit" value="OK">

</form>

**Add this to javascript file**

const express = require('express');
const app = express();

app.get('/sum',function(req,res){
    var a=Number(req.query.first);
    var b=Number(req.query.sec);
    var c;
    c=a+b;
    response = {
        result: c  
    };
    console.log(response);
    res.end(JSON.stringify(response));
}
); 
```

然后使用 node.js 运行文件

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-02-22T21:42:56.470

有一点延迟，但加起来可以减去负值，所以

```
var result = a+b; //Strings appending 
```

变成

```
var result = a--b; //Integer a-(-b) --> a+b 
```

# c# - 如何更改 StiWebViewer 语言和文化？

> ID：14108223
> 
> 赞同：3
> 
> 时间：2013-01-01T06:03:48.740
> 
> 标签：c#, asp.net, components, report, stimulsoft

我有一个来自 StimulSoft 组件的 StiWebReport。我想将语言更改为波斯语（波斯语）。在下面的照片中，它们周围有一条线，我希望它们是波斯语的。![在此处输入图像描述](../Images/5d72fa5d24306f729d5bb15fb56880a5.png)

我该怎么做？或者是否有任何可能相关的功能？我已经在某个地方看到过类似的东西。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T06:05:52.190

你可以设置你`GlobalizationFile`的属性`StiWebViewer`。在此属性中，您可以指定本地化文件的路径，报告引擎将为您完成剩下的工作。

否则，报表引擎会自动使用为当前文化指定的本地化。

您可以在以下文件夹中找到本地化文件：

```
Program Files\Stimulsoft\Stimulsoft Reports.Net xx\.Net xx\Bin\Localization 
```

# javascript - 范围为循环的 Javascript 函数

> ID：14108230
> 
> 赞同：6
> 
> 时间：2013-01-01T06:04:35.770
> 
> 标签：javascript

[这是](https://stackoverflow.com/q/643542/340947)一个简单的 JS 循环无法按预期运行的示例，因为循环变量不在单独的范围内。

经常提出的解决方案是构造一段看起来不愉快的循环代码，如下所示：

```
for (var i in obj) {
    (function() {
        ... obj[i] ... 
        // this new shadowed i here is now no longer getting changed by for loop
    })(i);
} 
```

我的问题是，这可以改进吗？我可以用这个吗：

```
Object.prototype.each = function (f) {
    for (var i in this) {
        f(i,this[i]);
    }
};

// leading to this somewhat more straightforward invocation
obj.each(
    function(i,v) {
        ... v ...
        // alternatively, v is identical to
        ... obj[i] ...
    }
); 
```

当我确定我需要一个“范围循环”时？它看起来更干净一些，并且应该具有与常规 for 循环相似的性能（因为它以相同的方式使用它）。

更新：似乎做事`Object.prototype`是一个巨大的禁忌，因为它几乎破坏了*一切*。

这是一个侵入性较小的实现：

```
function each (obj,f) {
    for (var i in obj) {
        f(i,obj[i]);
    }
} 
```

调用非常轻微地更改为

```
each(obj,
    function(i,v) {
        ... v ...
    }
); 
```

所以我想我已经回答了我自己的问题，如果 jQuery 这样做，真的不会出错。我忽略的任何问题都需要一个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:41:03.023

您的回答几乎涵盖了它，但我认为您的原始循环的更改值得注意`each()`，因为无论出于何种原因，当函数不方便时使用普通的 for 循环是合理的。

**更新：更改为使用**[与问题引用](https://stackoverflow.com/a/643664/1888292)的示例类似的示例来比较不同的方法。该示例必须进行调整，因为该`each()`函数需要一个填充的数组来迭代。

假设以下设置：

```
var vals = ['a', 'b', 'c', 'd'],
    max = vals.length,
    closures = [],
    i; 
```

使用问题中的示例，原始循环最终创建了 2n 个函数（其中 n 是迭代次数），因为在每次迭代期间创建了两个函数：

```
for (i = 0; i < max; i++) {
    closures[i] = (function(idx, val) {  // 1st - factoryFn - captures the values as arguments 
        return function() {              // 2nd - alertFn   - uses the arguments instead
            alert(idx + ' -> ' + val);   //                   of the variables
        };
    })(i, vals[i]);
} 
```

通过在循环开始之前创建一次工厂函数，然后重用它，可以将其简化为仅创建 n + 1 个函数：

```
var factoryFn = function(idx, val) {
    return function() {
        alert(idx + ' -> ' + val);
    };
};

for (i = 0; i < max; i++) {
    closures[i] = factoryFn(i, vals[i]); 
} 
```

这几乎等同于`each()`在这种情况下如何使用该函数，这也将导致总共创建 n + 1 个函数。工厂函数创建一次并立即作为参数传递给`each()`.

```
each(vals, function(idx, val) {
    closures[idx] = function() {
        alert(idx + ' -> ' + val);
    };
}); 
```

FWIW，我认为使用的好处`each()`是代码有点短，并且在将工厂函数传递给函数时正确创建工厂`each()`函数清楚地说明了这是它的唯一用途。循环版本 IMO的一个好处是执行`for`循环的代码就在那里，因此它的性质和行为是完全透明的，而`each()`函数可能定义在不同的文件中，由其他人编写等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T11:25:33.590

全球范围

当某些东西是全局的时，意味着它可以从代码中的任何地方访问。以此为例：

var monkey = "大猩猩";

```
function greetVisitor () {

return alert("Hello dear blog reader!");
} 
```

如果该代码在 Web 浏览器中运行，则函数范围将是窗口，从而使其

可用于在该 Web 浏览器窗口中运行的所有内容。

本地范围

与全局作用域相反，局部作用域是指某些东西刚刚在一个

代码的某些部分，例如函数。例如;

函数talkDirty（）{

```
var saying = "Oh, you little VB lover, you";
return alert(saying);
}

alert(saying); // Throws an error 
```

如果您看一下上面的代码，变量saying 仅在talkDirty 中可用

功能。在它之外，它根本没有定义。注意事项：如果您要声明说没有

在它前面的 var 关键字，它会自动成为一个全局变量。

这也意味着如果你有嵌套函数，内部函数将可以访问

包含函数变量和函数：

函数保存名称（名字）{

函数大写名称（）{

```
return firstName.toUpperCase(); 
```

} var capitalized = capitalizeName();

```
return capitalized; 
```

}

```
alert(saveName("Robert")); // Returns "ROBERT" 
```

如你所见，内部函数 capitalizeName 不需要传入任何参数，但已经完成

访问外部 saveName 函数中的参数 firstName。为了清楚起见，让我们再看一个

例子：

函数兄弟姐妹（）{

```
var siblings = ["John", "Liza", "Peter"]; 
```

函数兄弟计数（）{

```
var siblingsLength = siblings.length;

return siblingsLength; 
```

}

函数 joinSiblingNames () {

```
return "I have " + siblingCount() + " siblings:\n\n" + siblings.join("\n"); 
```

}

```
return joinSiblingNames(); 
```

}

```
alert(siblings()); // Outputs "I have 3 siblings: John Liza Peter" 
```

如您所见，两个内部函数都可以访问包含函数中的兄弟数组，并且

每个内部函数都可以访问同一级别的其他内部函数（在这种情况下，

joinSiblingNames 可以访问兄弟计数）。但是，siblingCount 中的变量 SiblingsLength 是

仅在该功能内可用，即该范围。

# c++ - Boost中irange和counting_range的区别

> ID：14108232
> 
> 赞同：9
> 
> 时间：2013-01-01T06:05:18.600
> 
> 标签：c++, boost, integer, range, counting

[`irange`](http://www.boost.org/doc/libs/1_46_1/libs/range/doc/html/range/reference/ranges/irange.html)和有什么区别[`counting_range`](http://www.boost.org/doc/libs/1_47_0/libs/range/doc/html/range/reference/ranges/counting_range.html)？

我需要`irange`快速生成一系列整数，如下所示：

```
auto example = boost::irange(0, 5); /// result is {0, 1, 2, 3, 4} 
```

但是注意到某处的一个例子（丢失了链接），它谈论的是`counting_range`要完成相同的任务。对这两者之间的区别有简单的解释吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-02-01T20:16:55.227

主要区别在于它[`irange`](http://www.boost.org/libs/range/doc/html/range/reference/ranges/irange.html)是随机访问范围，而[`counting_range`](http://www.boost.org/libs/range/doc/html/range/reference/ranges/counting_range.html)不是。`counting_range`基于 Boost.Iterator's [`counting_iterator`](http://www.boost.org/libs/iterator/doc/counting_iterator.html)，它直接使用所有底层整数运算。C++ 中的整数几乎符合迭代器的概念：唯一缺少的是`operator*`. `counting_iterator`提供一个`operator*`作为标识操作并将其他所有内容转发给底层类型。

另一个区别是`irange`它还支持不同于 1 的增量。

它们都没有实现它们迭代的整个整数范围，因此它们都使用 O(1) 内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-07T10:34:59.890

两者都[`irange`](http://www.boost.org/libs/range/doc/html/range/reference/ranges/irange.html)为[`counting_range`](http://www.boost.org/libs/range/doc/html/range/reference/ranges/counting_range.html)整数类型建模随机访问范围。正如`counting_range`s 文档所指出的，它的迭代器类别是根据以下算法确定的：

```
if (CategoryOrTraversal is not use_default)
    return CategoryOrTraversal
else if (numeric_limits<Incrementable>::is_specialized)
    return iterator-category(random_access_traversal_tag, Incrementable, const Incrementable&)
else
    return iterator-category(iterator_traversal<Incrementable>::type, Incrementable, const Incrementable&) 
```

因此，对于简单的范围，例如`boost::irange(0, 10)`和`boost::counting_range(0, 10)`，实际上没有区别（当然，除了每个范围的类型！）。

但是，`irange`它还支持具有不同步长的迭代，例如 ，`boost::irange(0, 10, 2)`并且`counting_range`还支持仅可递增且不完全建模整数的类型。

# php - ODBC 执行行错误和其他错误

> ID：14108235
> 
> 赞同：-1
> 
> 时间：2013-01-01T06:05:52.607
> 
> 标签：php, sql, odbc

我不知道为什么会出现这些错误；PHP 代码对我来说一切都很好。

> 警告：odbc_exec() 期望参数 1 是资源，第 50 行 C:\xampp\htdocs\vote\vote.php 中给出的字符串
> 
> 警告：odbc_num_rows() 期望参数 1 是资源，在第 51 行的 C:\xampp\htdocs\vote\vote.php 中给出 null
> 
> 警告：odbc_fetch_row() 期望参数 1 是资源，在第 52 行的 C:\xampp\htdocs\vote\vote.php 中给出 null
> 
> 警告：odbc_exec() 期望参数 1 是资源，字符串在第 67 行的 C:\xampp\htdocs\vote\vote.php 中给出
> 
> 警告：odbc_num_rows() 期望参数 1 是资源，在第 68 行的 C:\xampp\htdocs\vote\vote.php 中给出 null
> 
> 警告：odbc_exec() 期望参数 1 是资源，字符串在第 81 行的 C:\xampp\htdocs\vote\vote.php 中给出
> 
> 警告：odbc_fetch_row() 期望参数 1 是资源，在第 82 行的 C:\xampp\htdocs\vote\vote.php 中给出 null
> 
> 警告：odbc_num_rows() 期望参数 1 是资源，在第 83 行的 C:\xampp\htdocs\vote\vote.php 中给出 null
> 
> 警告：odbc_exec() 期望参数 1 是资源，字符串在第 137 行的 C:\xampp\htdocs\vote\vote.php 中给出
> 
> 警告：odbc_exec() 期望参数 1 是资源，字符串在第 138 行的 C:\xampp\htdocs\vote\vote.php 中给出

### vote.php 来源：

[http://pastebin.com/duMFp3kJ](http://pastebin.com/duMFp3kJ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T07:28:35.790

例如

```
$conn = odbc_connect("DRIVER={MySQL ODBC 3.51 Driver};Server=localhost;Database=dbname", "username", "psw");
$sql = "SELECT user from user";
$rs = odbc_exec($conn,$sql); 
```

你完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T07:23:33.250

这个错误是不言自明的；

但是，如果您仍然不知道，请查看此[PHP 文档](http://php.net/manual/en/function.odbc-exec.php)；它声明`odbc_exec`期望返回的连接资源`odbc_connect`作为其第一个参数，而不是`"SELECT..."`SQL 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T14:13:32.777

我修复了它，它现在似乎正在工作，但它总是给我同样的错误，我的帐户还没有访问商店，这不是真的，我不知道为什么，获取行或 num 行的东西是不工作。

vote.php 修复：

[http://pastebin.com/p4WWiyin](http://pastebin.com/p4WWiyin)

# c - 分段错误 11 - 网络程序

> ID：14108238
> 
> 赞同：0
> 
> 时间：2013-01-01T06:06:20.110
> 
> 标签：c, sockets, networking, segmentation-fault

这是我第一次尝试编写网络程序。它编译没有问题，但是当我运行它时，它给了我一个“分段错误 11”。我希望有人能给我线索代码中的什么可能导致这个问题。

我是 C 的新人。

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <string.h>
#include <netdb.h>
#include <netinet/in.h>

int main()
{   
    ////////////      GETADDRINFO   \\\\\\\\\\\\\\\\

    struct addrinfo hints, *res;
    memset(&hints, 0 , sizeof hints);

    hints.ai_family     = AF_UNSPEC;    //define the 'hints' strucure
    hints.ai_socktype   = SOCK_STREAM;  //define the 'hints' strucure
    hints.ai_protocol   = AI_PASSIVE;   //define the 'hints' strucure

    char *ipaddr = "127.0.0.1";
    getaddrinfo(ipaddr, "ftp", &hints, &res);

    //////////////     SOCKET     \\\\\\\\\\\\\\\\

    int sock = socket(AF_INET, SOCK_STREAM, 0);

    struct sockaddr_in info;
    int bnd  = bind( sock , res->ai_addr, res->ai_addrlen);

    info.sin_family         = AF_INET;
    info.sin_port           = htons(10000);
    info.sin_addr.s_addr    = INADDR_ANY;   
    bzero(&(info.sin_zero),8); 

    ///////////////    CONNECT   \\\\\\\\\\\\\\\\\\\\\\ 

    int conct = connect( sock, res->ai_addr, res->ai_addrlen);

    //////////////     LISTEN     \\\\\\\\\\\\\\\\\\

    int lstn = listen( sock , 4 );

    //////////////    ACCEPT    \\\\\\\\\\\\\\\\\\\\\\\

    int new_fd;
    struct sockaddr_storage client_addr;
    socklen_t addr_size;
    addr_size = sizeof(client_addr);
    new_fd = accept(sock, (struct sockaddr *)&client_addr, &addr_size);

    /////////////////   SEND   \\\\\\\\\\\\\\\\\\\\\\

    char *msg = "HI!";
    int len, bytes_sent;
    len = strlen(msg);
    bytes_sent = send(sock, msg, len, 0);

    //////////////// RECEIVE \\\\\\\\\\\\\\\\\

    char burr[254];
    int cat = sizeof(burr);

    recv( sock, burr , cat , 0 );

    printf("%s", burr);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T07:15:03.063

段错误发生在第一次，`bind`因为`getaddrinfo`返回错误，该`res`结构无效。

返回的错误`getaddrinfo`是

> EAI_SOCKTYPE
> 
> 不支持请求的套接字类型。例如，如果hints.ai_socktype 和hints.ai_protocol 不一致（例如，分别为SOCK_DGRAM 和IPPROTO_TCP），就会发生这种情况。

你设置的`hints.ai_protocol = AI_PASSIVE`不正确。手册说：

> ai_protocol 此字段指定返回的套接字地址的协议。在该字段中指定 0 表示 getaddrinfo() 可以返回任何协议的套接字地址。

因此，如果您想获得任何协议，则应将其设置为 0。

这虽然消除了段错误，但程序混乱且不正确。

还要注意：

您正在使用侦听器套接字进行发送和接收。您应该使用代码中返回的套接字，因为`accept`这是在它们之间建立的通道。`new_fd``send``recv`

您已经定义并初始化了结构`info`并且从未使用过它。

看看这个，这可能会帮助您快速进入套接字：[http ://beej.us/guide/bgnet/](http://beej.us/guide/bgnet/)

# actionscript-3 - 如何使用 DataField 值更改 itemrender 按钮？

> ID：14108241
> 
> 赞同：0
> 
> 时间：2013-01-01T06:06:38.830
> 
> 标签：actionscript-3, apache-flex, flex3, mxml

在我的 Flex 应用程序 DataGrid 中...

```
<mx:DataGrid id="userListDataGrid" x="60" y="40" width="520" height="148" dataProvider="{schedule}" creationComplete="userListDataGrid_creationCompleteHandler(event)">
    <mx:columns>
        <mx:DataGridColumn dataField="courseDate" headerText="Date"/>               
        <mx:DataGridColumn dataField="courseName" headerText="Course Name"/>
        <mx:DataGridColumn id="usertype" dataField="userType" headerText="User Type"/>

        <mx:DataGridColumn headerText="Reminder">
            <mx:itemRenderer>
                <mx:Component>
                    <mx:HBox>
                      <mx:Button id="join" label="Join" borderColor="#5d93b9"
                               color="#04becf">
                      </mx:Button>  
                      <mx:Button id="start" label="Start" borderColor="#5d93b9"
                               color="#04becf">
                      </mx:Button>
                    </mx:HBox>
                </mx:Component>
            </mx:itemRenderer>
        </mx:DataGridColumn>

    </mx:columns>
</mx:DataGrid> 
```

![我的数据网格视图](../Images/4f5174d56052d7955cf06ac255efb925.png)

但是如何更改 Button 相对于 DataField 值，即。

```
Host----Start Button
Attendee----JOin Button 
```

![最终输出](../Images/5853d1f389235446ee7883f81cc48588.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:18:54.910

监听 itemRenderer 的 dataChange 事件并根据 usertype 值切换按钮的可见性。由于您没有提供示例元素，因此我在这里对您的数据类型进行了一些“猜测”。但是，大致是这样的：

```
 <mx:DataGridColumn headerText="Reminder">
        <mx:itemRenderer>
            <mx:Component>
                <mx:HBox dataChange="onDataChange()">
                  <mx:Script>
                      protected function onDataChange():void{
                         if(data.usertype == 'Host'){
                            join.visible = true;
                            start.visible = false;
                         } else {
                            join.visible = false;
                            start.visible = true;
                         }
                      }
                  </mx:Script>
                  <mx:Button id="join" label="Join" borderColor="#5d93b9"
                           color="#04becf">
                  </mx:Button>  
                  <mx:Button id="start" label="Start" borderColor="#5d93b9"
                           color="#04becf">
                  </mx:Button>
                </mx:HBox>
            </mx:Component>
        </mx:itemRenderer>
    </mx:DataGridColumn> 
```

我在浏览器中编写了代码，所以它可能在语法上不正确。

# android - 调用 setTextColor 方法时 TextView 变黑

> ID：14108244
> 
> 赞同：1
> 
> 时间：2013-01-01T06:06:49.573
> 
> 标签：android, textview

调用 setTextColor 时，TextView 变为黑色或接近黑色。不知道为什么。任何帮助，将不胜感激。

目前使用 holo.light。

```
 <application android:label="@string/app_name" android:icon="@drawable/ic_launcher"
             android:theme="@android:style/Theme.Holo.Light"> 
```

如下设置我的 TextView

```
 <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
          android:text="0"
          android:id="@+id/tvOutput"
          android:textColor="@color/button_text"
          android:textSize="70dp" android:layout_marginRight="16dp"
          android:layout_marginLeft="16dp"
          android:layout_gravity="center"
          android:layout_marginTop="58dp"
          android:gravity="center"/> 
```

当我尝试调用 tvOutput.setTextColor(R.color.laserblue); 时出现问题 R.color.laserblue as: #ff00ddff 但是，它变黑了！我不知道它为什么这样做。对于我尝试的任何颜色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T06:10:02.697

你需要打电话

`getResources().getColor(R.color.YOURCOLOR)`正确设置颜色。

使用以下代码设置颜色

```
textView.setTextColor(getResources().getColor(R.color.YOURCOLOR)); 
```

# javascript - 以设定的时间间隔将 jQuery 添加到数组中的元素

> ID：14108245
> 
> 赞同：1
> 
> 时间：2013-01-01T06:06:51.113
> 
> 标签：javascript, jquery, coffeescript, jquery-selectors, jquery-events

我想制作动画以在稍微不同的时间清除项目列表，例如以 20 毫秒的间隔。（当您清除消息时，想想 Android 4.2 的警报屏幕）。

但是，我不知道如何`addClass`在间隔时间处理数组中的不同元素。我已经尝试过了，但这只是将 jQuery 应用于最后一个元素：

```
for item in App.itemsController.content
  jQuery('#box').delay(2000).queue (n) ->
    selector = '.' + item.objectId
    console.log selector
    $(selector).addClass('animated fadeOutRightBig') 
```

我也尝试过`setTimeout()`，`setInterval()`但无济于事。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T06:49:12.337

您需要使用闭包来保留对 item 变量的引用。我不使用 CoffeeScript，但在 javascript 中我会这样做。

```
var box = jQuery('#box');
for (var i in App.itemsController.content) {
    var item = App.itemsController.content[i];
    (function(item) {
        box.delay(2000).queue(function() {
            var selector = '.' + item.objectId;
            $(selector).addClass('animated fadeOutRightBig');
        });
    }(item));
} 
```

也许这就是你在 CoffeeScript 中的做法？只是快速浏览了一下语法。

```
for item in App.itemsController.content
  do (item) ->
     jQuery('#box').delay(2000).queue (n) ->
       selector = '.' + item.objectId
       console.log selector
       $(selector).addClass('animated fadeOutRightBig') 
```

您还应该在循环外引用#box 元素，否则您的程序必须在每次迭代时搜索 DOM。

# mysql - 匹配不同数据库列表中的相同项目

> ID：14108248
> 
> 赞同：-2
> 
> 时间：2013-01-01T06:07:18.740
> 
> 标签：mysql, sql, database, pattern-matching

我正在编写一个应用程序，人们可以在其中上传他们拥有的电影列表。

我的数据库可能具有以下结构：

> 用户
> 
> *   UserID - 唯一标识符
> *   Name - 用户的全名
> *   电子邮件 - 用户的电子邮件
> 
> 电影
> 
> *   UserID - 拥有这部电影的用户
> *   MovieID - 电影唯一标识符（我目前正在使用 IMDB 的代码）

所以“电影”与“用户”是多对一的关系

我想做的是推荐一个随机“电影伙伴”的用户。基本上，我想找到拥有同一部电影的 2 个用户（所以我试图匹配 2 个用户的列表以查找匹配的电影），然后向他显示类似于**“嘿，XYZ 是 The Dark Knight Rises 的粉丝”的消息也一样！”**

匹配应该是随机的，对已经看过的建议有一个简单的过滤器（我不希望用户为同一个好友和电影两次获得相同的建议，但是可以为不同的电影向他推荐同一个好友 - 假设他们都拥有两部不同的电影）。

我不知道如何使用 MySQL 执行这种匹配。如果一个更合适的话，我也愿意接受其他关于数据库的建议（我听说过图形数据库，但我自己从未使用过）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:08:45.317

查找具有相同电影 ID 的用户非常简单，只需三个 JOIN

```
FROM
    User u
    INNER JOIN movie m
    ON u.UserID = m.UserID
    INNER JOIN moive BuddyMovie
    ON m.moiveID = BuddyMovie.MovieID
       and u.UserID <> Buddy.UserID --Don't want to be your own Buddy
    INNER JOIN User BuddyUser
    ON BuddyMovie.UserID = BuddyUser.UserID
WHERE
    u.UserID = 123  -- For a given user
    and m.MovieID = 345 -- Optionally For a given movie 
```

获取一个你只需要添加的随机用户`ORDER BY RAND()`

如果你只想要两个，只需添加`LIMIT 2`

确保您没有得到相同的好友两次将要求您跟踪哪些好友都已准备好显示，这超出了单个问题的范围。

# java - 将对象数据写入宗地

> ID：14108249
> 
> 赞同：3
> 
> 时间：2013-01-01T06:07:21.723
> 
> 标签：java, android, parcelable

我想包裹具有“对象”数据类型的值。
为此，我正在使用`writeValue(Object v)`方法。

```
 @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeValue(lockMemberScore);
        dest.writeValue(lockFollowedMemberScore);
        dest.writeValue(lockGroupAvgScore);
    } 
```

但它给了我以下错误

```
01-01 11:22:00.479: E/SyncService(9647): Parcel: unable to marshal value java.lang.Object@4122e3c0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T06:43:32.997

您不能将通用对象写入 Parcel。

[`writeValue(Object v)`](http://developer.android.com/reference/android/os/Parcel.html#writeValue%28java.lang.Object%29)可以处理一长串数据类型（可在文档中找到），但通用*对象*不是其中之一......基本上你`v`不是：原始数据类型、Bundle、Map 等，它不实现 Parcelable 或 Serializable ; 所以`writeValue()`确实知道如何处理您的特定对象。

# c# - 使元素可以从参考中改变

> ID：14108258
> 
> 赞同：1
> 
> 时间：2013-01-01T06:08:46.933
> 
> 标签：c#, reference

所以！我有一个 C# 数组。

我有一个函数可以从数组中返回一个元素，因此可以访问该引用中的数据。耶！

如果更改该引用然后影响数组中的原始元素，那将非常方便。这是静态变量的作用吗？有没有办法做到这一点？怎么做？例如：

函数 A 找到一个项目：

```
public TutorialPopupBehavior GetBehavior(string behaviorName) {
        foreach(TutorialPopupBehavior beh in _tutorialItems) {
            if(beh._popupName == behaviorName) {
                return beh;
            }
        }
        print ("Could not find behavior of name " + behaviorName);
        return null;
    } 
```

然后将其返回给函数 B，理想情况下，该函数将能够更改返回项的属性：

```
public void SetTutorialItem(bool state, string itemName) {
        TutorialPopupBehavior beh = GetBehavior(itemName);
        if(beh == null) {
            print ("No tutorial item found, so can't set it to " + state);
            return;
        }   
        //idealistic code: beh._isShown = true;

    } 
```

然后，该元素的 _isShown 属性将在原始 _tutorialItems 数组中永久更改...你们如何完成此操作，或进行不同的设计，以避免出现问题？我问的原因是因为我有许多要搜索的数组，并且我不想通过要求同一个类多次搜索同一组数组来使我的代码复杂化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:26:36.097

```
 public  void GetBehavior(string behaviorName, ref TutorialPopupBehavior b) {
            foreach(TutorialPopupBehavior beh in _tutorialItems) {
                if(beh._popupName == behaviorName) {
                    b = beh;
                     Return;
                }
            }
            print ("Could not find behavior of name " + behaviorName);
            b = null;
        } 
```

阅读这篇[msdn 文章](http://msdn.microsoft.com/en-us/library/14akc2c7.aspx)

# ajax - Yii ajax 验证博客演示 - 帖子/联系表

> ID：14108260
> 
> 赞同：1
> 
> 时间：2013-01-01T06:09:33.523
> 
> 标签：ajax, yii

在 Yii 博客演示中，包含在框架下载和此处：

[http://www.yiiframework.com/demos/blog/](http://www.yiiframework.com/demos/blog/)

表单输入的 ajax 验证适用于发表评论和登录表单...

demos\blog\protected\views\comment_form.php

和

demos\blog\protected\views\login.php

两者都包括

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'comment-form',
    'enableAjaxValidation'=>true,
)); ?> 
```

或者

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'login-form',
    'enableAjaxValidation'=>true,
)); ?> 
```

我尝试向views/site/contact.php和views/post/_form.php（'id'=>'contact-form'和'post-form'）添加类似的东西，但它不起作用（跳出表单字段不会产生红色或绿色字段，具体取决于输入是有效还是无效，并且也没有 ajax 生成的无效消息）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:30:06.783

Ajax 验证包括 3 个阶段：

1.  使用表单字段的值向服务器发送 ajax 请求以验证它们。
2.  验证字段并从服务器返回验证消息。
3.  使用验证消息更新表单字段。

当您设置`enableAjaxValidation`为 时`true`，您正在处理第 1 阶段和第 3 阶段，因此还剩下第 2 阶段。

* * *

**阶段2。**

默认情况下，ajax 验证触发 POST ajax 调用，附加^(1 个) `'ajax'`post 参数，其值设置为`id`正在验证的表单的值。在您的情况下，它应该类似于：`ajax --> contact-form`和`ajax --> post-form`.

所以你要做的就是在你的服务器端捕获这个 POST 请求，并在验证请求中发送的字段后发送响应。

POST 请求被发送到表单的`action`url（默认情况下），在您的情况下将类似于: `http://foo/index.php/site/contact`，这意味着您必须更改您的*controllers/SiteController.php*的`actionContact`功能：

```
public function actionContact(){
    $model = new ContactForm;
    // checking if it is ajax validation request below 
    if(isset($_POST['ajax']) && $_POST['ajax']==='contact-form') {
        echo CActiveForm::validate($model); // validate the form fields sent in POST, and return response
        Yii::app()->end(); // end the application
    }
    // ... leave the rest of the code as is ...

} 
```

在博客演示的*views/site/contact.php*中没有错误字段，因此您暂时无法看到消息。要查看它们，请将错误字段添加到表单中：

```
<div class="row">
    <?php echo $form->labelEx($model,'name'); ?>
    <?php echo $form->textField($model,'name'); ?>
    <?php echo $form->error($model,'name'); // this line needs to be added ?>
</div> 
```

为其他输入类似地添加错误字段。

对于*post/_form.php对**控制器/PostController.php*的`actionCreate`和`actionUpdate`方法进行类似的调整（从第一个代码片段开始） 。只是您的`if`支票将更改为：

```
 if(isset($_POST['ajax']) && $_POST['ajax']==='post-form') 
```

* * *

**额外信息。**

`ajax`POST 参数称为，`ajaxVar`默认为`ajax`。您可以更改很多这些默认值，例如验证 url （或`action`of `validationUrl`）`clientOptions`或. 阅读[文档](http://www.yiiframework.com/doc/api/1.1/CActiveForm "http://www.yiiframework.com/doc/api/1.1/CActiveForm")以查看选项。`ajaxVar``$_POST['ajax']`[`clientOptions`](http://www.yiiframework.com/doc/api/1.1/CActiveForm#clientOptions-detail "http://www.yiiframework.com/doc/api/1.1/CActiveForm#clientOptions-detail")

* * *

¹ [除了表单的字段。]

# javascript - EmberJS 的新手，需要一些关于我的登录代码的帮助/建议

> ID：14108264
> 
> 赞同：0
> 
> 时间：2013-01-01T06:11:05.137
> 
> 标签：javascript, ember.js

我正在为我的 Spring 后端 API 开发 EmberJS 前端，我需要解决的第一件事是“登录”屏幕。我一直在阅读网络上的教程以及我在 Ember 上可以找到的任何内容，但是，问题似乎是相同教程的不同版本和做同一件事的不同方法太多了。这让我很困惑，但是，经过大量的辛勤工作，我想我可能终于设法让我的登录屏幕正常工作了（部分）。

它使用 ajax 很好地进行了身份验证，我可以在开发控制台中看到一切运行良好。

在我继续之前，我首先想了解人们对我迄今为止编写的 ember 代码的看法，以及它是否符合 ember 应用程序的“最佳实践”。另外，如果有更好的方法来解决同样的问题。

其次，我不知道如何在成功登录时切换到不同的视图。我承认我仍然不熟悉 ember 的概念，但是网上的教程一直让我感到困惑。

我真的很感激这里的任何帮助。我是一个快速学习者，我认为我可以根据答案从这里学到东西。

这是我的 app.js 文件中的代码：

```
App = Ember.Application.create();

//------------------------------------------------------------
// Hold the details of the logged-in user
//------------------------------------------------------------
App.LoggedInDetails = Ember.Object.create({
    Fullname: null,
    CompanyName: null,
    TokenID: null,

    setDetails: function(fullname, companyname, tokenid)
    {
        this.Fullname = fullname;
        this.CompanyName = companyname;
        this.TokenID = tokenid;
    },

    clearDetails: function()
    {
        this.Fullname = null;
        this.CompanyName = null;
        this.TokenID = null;
    }
});

//------------------------------------------------------------
App.ApplicationView = Ember.View.extend({
    templateName: 'logged-out'
});

App.ApplicationController = Ember.Controller.extend({
    isError: false,
    errorMessage: null,

    authenticate: function()
    {
        var email = this.get('email');
        var password = this.get('password');

        var url = 'https://api.example.com/security/authenticateUser.json';

        $.ajax({
           url: url,
           type: 'POST',
           dataType:'json',
           data: {email: email, passwd: password},
           crossDomain: true,
           context: this,
           success: this.authenticateCompleted
        });

        console.log('Url: ' + url);
    },

    authenticateCompleted: function(data)
    {
        // Login was a success!
        if(data.status === 'OK')
        {
            console.log('status: ' + data.status);
            console.log('fullName: ' + data.fullName);
            console.log('tokenId: ' + data.tokenId);
            console.log('companyName: ' + data.companyName);

            // Populate the LoggedInDetails object
            App.LoggedInDetails.setDetails(data.fullName, data.companyName, data.tokenId);

            this.set('isError', false);
        }
        else
        {
            App.LoggedInDetails.clearDetails();
            this.set('errorMessage', 'Invalid Email/Password Combination');
            this.set('isError', true);

            console.log(data.status);
            console.log(data.description);
        }
    }
});

//------------------------------------------------------------
App.Router = Ember.Router.extend({
    enableLogging: true,
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/',
            connectOutlets: function(router) {
                router.get('applicationController').connectOutlet({
                    viewClass: App.ApplicationView,
                    controller: router.get('applicationController')
                });
            }
        })
    })
});

//------------------------------------------------------------
App.LoggedInView = Ember.View.extend({
    templateName: 'logged-in'
});

App.LoggedInController = Ember.Controller.extend({
    Fullname: App.LoggedInDetails.get("Fullname")
});

//------------------------------------------------------------

App.initialize(); 
```

我的问题源于从“注销”默认视图切换到“登录”视图，这是我的应用程序的实际 UI。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:41:21.413

最简单的方法：在用户进行身份验证时添加一个`isLoggedIn`属性`ApplicationController`并将其设置为 true。制作`ApplicationView`渲染模板，用于`{{#if isLoggedIn}} ... {{else}} ... {{/if}}`在登录视图和未登录视图之间切换。

# path - 具有名称路径的共享库

> ID：14108267
> 
> 赞同：1
> 
> 时间：2013-01-01T06:11:47.750
> 
> 标签：path, shared, ld, rpath

我正在制作一个使用很多自己的共享库的项目；我的意图是在目录中创建一个库名称，因此，例如，代替 -lfoo（查找 /usr/lib/libfoo.so 或 /opt/lib/libfoo.so 等），我将使用 -lfoo /bar（查找 /usr/lib/libfoo/bar.so 或 /opt/lib/libfoo/bar.so 等）。

我做了一个真正的小代码来测试：

```
const char *mylib(void) {
  return "it woooorks! =D";
}; 
```

并将其编译为：`gcc -fPIC -shared -Wl,-rpath,libfoo/ lib.c -o /usr/lib/libfoo/bar.so`.

然后，在测试程序中，我使用`gcc -lfoo/bar test.c`，它编译（它`mylib()`从我的库中找到符号），但是当我尝试运行程序 ( `./a.out`) 时，动态链接器抱怨它找不到库。就我而言，使用 Mac OS X Lion：

```
dyld: Library not loaded: bar.so
  Referenced from: /Users/takanuva/tmp/lib/./a.out
  Reason: image not found
Trace/BPT trap: 5 
```

我究竟做错了什么？也许答案是“一切”，所以......我应该如何达到预期的效果，在库路径上寻找 libfoo/bar.so 而不是 libfoo.so？

提前致谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T08:37:34.720

如果库不在标准路径中（并且 /opt 是通常不搜索的路径），则必须使用 -L/-rpath 指定路径，如`gcc blah.c -L/opt/whatever -Wl,-rpath,/opt/whatever -lbar`. 不要尝试在`-l`参数中使用路径分隔符。

# c# - 如何在 SendKeys.Send C# 之间创建延迟

> ID：14108269
> 
> 赞同：2
> 
> 时间：2013-01-01T06:12:03.843
> 
> 标签：c#

显然这不能正常工作。我想使用 C# 而不是 AutoIt。什么可以使这项工作更好？

```
{
     Process.Start("iexplore.exe");
     System.Threading.Thread.Sleep(1000);
     SendKeys.Send("{F6}" + "http://google.com/" + "{Enter}");
     System.Threading.Thread.Sleep(1000);

     int counter = 1;
     while ( counter <= 10 )
     SendKeys.Send("{RIGHT}" + "{SUBTRACT}");
     counter = counter + 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T06:39:41.243

我可能在这里遗漏了一些东西，但如果它是 C# 并且您有以下声明：-

```
while(count <=10)
SendKeys.Send (....) 
```

由于计数器的增量语句不存在于while循环的块中，这不是一个无限循环吗？

对于延迟，请尝试使用以下内容：-

```
while(counter <= 10)
{
   SendKeys.Send("{RIGHT}" + "{SUBTRACT}");
   counter = counter + 1;
   System.Threading.Thread.Sleep(1000);
} 
```

上面的答案是假设您希望当前线程阻塞并且在 while 循环中没有进行其他处理

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T07:41:14.350

使用`SendWait()`insted 的`Send()`。这将解决问题。

# wordpress - wordpress 分页在 localhost 服务器中不起作用

> ID：14108271
> 
> 赞同：0
> 
> 时间：2013-01-01T06:12:17.137
> 
> 标签：wordpress

我在下面的代码中使用了 wordpress 在本地主机模板中进行分页，但不知道为什么它不起作用。它很好地显示了所有页码，但任何页码我点击它只显示第一页。

```
global $wp_query;  
$total_pages = $wp_query->max_num_pages;  
if ($total_pages > 1){  
$current_page = max(1, get_query_var('paged'));  
echo paginate_links(array(  
  'base' => get_pagenum_link(1) . '%_%',  
  'format' => '/page/%#%',  
  'current' => $current_page,  
  'total' => $total_pages,  
));  
} 
```

我的永久链接设置是：

> 本地主机/我的博客/示例帖子/

和查询帖子：

> $args = array('post_type' => 'post', 'posts_per_page' => 2);

任何人请告诉我下一步该做什么来处理这个分页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:18:29.767

```
 <global $wp_query;
$total = $wp_query->max_num_pages;
// only bother with the rest if we have more than 1 page!
if ( $total > 1 )  {
     // get the current page
     if ( !$current_page = get_query_var('paged') )
          $current_page = 1;
     // structure of "format" depends on whether we're using pretty permalinks
     $format = empty( get_option('permalink_structure') ) ? '&page=%#%' : 'page/%#%/';
     echo paginate_links(array(
          'base' => get_pagenum_link(1) . '%_%',
          'format' => $format,
          'current' => $current_page,
          'total' => $total,
          'mid_size' => 4,
          'type' => 'list'
     ));
} 
```

请根据要求设置一个参数，并参考这个链接[我的帮助你](http://www.wprecipes.com/easy-wordpress-pagination-without-plugins)

如果您遇到问题，请告诉我

谢谢并恭祝安康

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T07:29:18.410

这适用于 WP_Query。你可以试试：

```
global $wp_query;
$big = 999999999; // Need an unlikely integer
echo paginate_links( array( 'base'    => str_replace( $big, '%#%', get_pagenum_link( $big ) ),
                            'format'  => '?paged=%#%',
                            'current' => max( 1, get_query_var( 'paged' ) ),
                            'total'   => $wp_query->max_num_pages,
                            'end_size'=> 1,
                            'mid_size'=> 10 ) ); 
```

`Settings -> Readings` 设置为您希望在`Blog pages show at most`每页中显示的帖子数并`Settings -> Discussion`设置分页行为

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-26T22:13:46.237

我通过使用直接 PHP 读取 URL 参数解决了同样的问题，而不是 get_query_var('paged')，只需使用这个：

```
$_GET['paged'] 
```

# sql - 如何查找组的行数？

> ID：14108272
> 
> 赞同：2
> 
> 时间：2013-01-01T06:12:31.723
> 
> 标签：sql, sql-server, stored-procedures, count, group-by

我正在 SQL 中创建一个存储过程，但我无法使用分组来查找计数。

这是我的数据库架构：

```
CREATE TABLE InputCurr (
  [InputCurrID] int IDENTITY(1, 1) NOT NULL,
  [Date] datetime NULL,
  [OpCurrencyName] decimal(18, 8) NULL,
  [IpCurrencyName] varchar(50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
  [Count] int NULL,
) 
```

**数据值：**

```
insert into InputCurr ( Date,OpCurrencyName,IpCurrencyName ) values ('1/1/2013','US','$');
insert into InputCurr ( Date,OpCurrencyName,IpCurrencyName ) values ('1/2/2013','US','$');
insert into InputCurr ( Date,OpCurrencyName,IpCurrencyName ) values ('1/3/2013','UK','#');
insert into InputCurr ( Date,OpCurrencyName,IpCurrencyName ) values ('1/4/2013','US','$');
insert into InputCurr ( Date,OpCurrencyName,IpCurrencyName ) values ('1/5/2013','US','$'); 
```

我使用以下 SP：

```
CREATE PROCEDURE dbo.getCurrencyReportFiels
AS
BEGIN
SELECT InputCurrID,Date,OpCurrencyName,IpCurrencyName,Count=(COUNT(*))
FROM InputCurr
GROUP BY InputCurrID,date,OpCurrencyName,IpCurrencyName
END 
```

我得到这样的 O/p：

```
InputCurrID    Date       OpCurrencyName      IpCurrencyName     Count
-----------------------------------------------------------------------
      1        1/1/2013       US                   $               1 <--here i want count of grouping by OpCurrencyName & IpCurrencyName
      2        1/2/2013       US                   $               1 <--here i want count of grouping by OpCurrencyName & IpCurrencyName
      3        1/3/2013       UK                   #               1
      4        1/4/2013       US                   $               1<--here i want count of grouping by OpCurrencyName & IpCurrencyName
      5        1/5/2013       US                   $               1<--here i want count of grouping by OpCurrencyName & IpCurrencyName 
```

现在，我想要这样的输出......

```
InputCurrID    Date       OpCurrencyName      IpCurrencyName     Count
-----------------------------------------------------------------------
      1        1/1/2013       US                   $               4  
      2        1/2/2013       US                   $               4 
      3        1/3/2013       UK                   #               1
      4        1/4/2013       US                   $               4
      5        1/5/2013       US                   $               4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T08:04:21.587

你可以这样做：

```
WITH Groups
AS
(
  SELECT 
    OpCurrencyName, 
    IpCurrencyName,
    Count=(COUNT(*))
  FROM InputCurr
  GROUP BY OpCurrencyName,IpCurrencyName
) 
SELECT 
  i.InputCurrID, 
  i.Date, 
  g.OpCurrencyName, 
  g.IpCurrencyName,
  g.Count
FROM InputCurr i
INNER JOIN Groups g  ON i.OpCurrencyName = g.OpCurrencyName
                    AND i.IpCurrencyName = g.IpCurrencyName
ORDER BY i.InputCurrID; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/c46cc/5)

这会给你：

```
| INPUTCURRID |                           DATE | OPCURRENCYNAME | IPCURRENCYNAME | COUNT |
------------------------------------------------------------------------------------------
|           1 | January, 01 2013 00:00:00+0000 |             US |              $ |     4 |
|           2 | January, 02 2013 00:00:00+0000 |             US |              $ |     4 |
|           3 | January, 03 2013 00:00:00+0000 |             UK |              # |     1 |
|           4 | January, 04 2013 00:00:00+0000 |             US |              $ |     4 |
|           5 | January, 05 2013 00:00:00+0000 |             US |              $ |     4 | 
```

您可以在不使用 CTE、使用子查询或相关子查询的情况下编写它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T08:08:27.150

```
SELECT InputCurrID,Date,OpCurrencyName,IpCurrencyName
,(Select Count(*) from InputCurr c2 where c2.OpCurrencyName=InputCurr.OpCurrencyName) as [Count]
FROM InputCurr
Order by InputCurrID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T16:31:20.390

```
select [InputCurrID],
   [Date],
   [OpCurrencyName],
   [IpCurrencyName],
   count(*) over (partition by [OpCurrencyName],[IpCurrencyName])
from [InputCurr]
order by [InputCurrID] 
```

[SQL小提琴](http://www.sqlfiddle.com/#!3/8a32d/2)

# c# - 在运行时扩展 NHibernate 查询

> ID：14108273
> 
> 赞同：0
> 
> 时间：2013-01-01T06:12:43.997
> 
> 标签：c#, nhibernate

我想允许第 3 方代码在运行时扩展 NHibernate 映射。这就是我现在所拥有的：

**数据：**

```
TABLE Orders
    Id INT identity,
    [more fields...] 
```

**我项目中的代码：**

```
public interface IOrder
{
    int Id { get; set; }
    // more properties...
}

internal class Order : IOrder
{
    public int Id { get; set; }
}

public class OrderDAL
{
    public IEnumerable<IOrder> GetOrders()
    {
        ICriteria criteria;
        // build some criteria
        var result = criteria.List<Order>();
        RaiseOrdersLoaded(result);
        return result;
    }
} 
```

**NHibernate hbm 文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="..." assembly="...">
  <class name="Order" table="Orders">
    <id name="Id" column="Id" type="int" >
      <generator class="identity" />
    </id>
    [more properties...]
  </class>
</hibernate-mapping> 
```

第 3 方是我用 Ioc 加载的 dll。它知道接口`IOrder`但不知道`Order`类。它的开发人员还在我的数据库中添加了一个表：

```
TABLE OrderExtension
    OrderId PK, FK from Orders
    CustomField nvarchar 
```

现在第 3 方开发者应该能够做到：

1.  将他添加`CustomField`到查询中`GetOrders`。我想过在运行时扩展 hbm 文件，但我不知道如何。
2.  将条件添加到查询中以按 his 过滤`CustomField`。
3.  监听`OrdersLoaded`事件并以某种方式获取他的数据。

这一切可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:54:09.533

您可以将命名查询放入映射中，但这些将在 SQL 中：http: [//nhibernate.info/doc/nh/en/index.html#querysql-namedqueries](http://nhibernate.info/doc/nh/en/index.html#querysql-namedqueries)

您还可以在映射中定义过滤器，这些过滤器将被注入到其他类型的查询中：http: [//nhibernate.info/doc/nh/en/index.html#filters](http://nhibernate.info/doc/nh/en/index.html#filters)

至于 Criteria、Queryover、HQL 和 LINQ 查询，您可以在 Orders 类中构建您喜欢的任何构造，以便通过插件可以调用的一些初始化方法进行配置。

# javafx-2 - fxml 文件中的按钮不在 fxmlLoader.getNamespace() 返回的 ObservableMap 中

> ID：14108275
> 
> 赞同：0
> 
> 时间：2013-01-01T06:12:59.180
> 
> 标签：javafx-2

我有以下代码来加载 fxml 文件。我想改变按钮的宽度。我可以使用 访问这两个标签`fxmlLoader.getNamespace().get("id")`，但由于某种原因，我没有看到内部`ObservableMap`返回的按钮`getNamespace()`。为什么会这样/

**FXML 文件**

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.net.*?>
<?import java.util.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>

<GridPane fx:controller="org.netbeans.modules.mavenproject1.controller.KeyController" xmlns:fx="http://javafx.com/fxml" >
    <padding>
        <Insets top="5" right="5" bottom="5" left="5"/>
    </padding>
    <children>
        <Button maxHeight="45.0" maxWidth="45.0" minHeight="45.0" minWidth="45.0" mnemonicParsing="false" prefHeight="45.0" prefWidth="45.0" style="" styleClass="alphabet-button" text="~" textAlignment="CENTER" textOverrun="ELLIPSIS">
            <graphic>
                <GridPane alignment="TOP_LEFT">
                    <padding>
                        <Insets top="1" right="1" bottom="1" left="1"/>
                    </padding>
                    <children>
                        <Label text="" fx:id="mainTextLabel" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <Label text="" fx:id="shiftTextLabel" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                    </children>
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="20.0" prefWidth="20.0" />
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="20.0" prefWidth="20.0" />
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints minHeight="20.0" prefHeight="20.0" vgrow="SOMETIMES" />
                        <RowConstraints minHeight="20.0" prefHeight="20.0" vgrow="SOMETIMES" />
                    </rowConstraints>
                </GridPane>
            </graphic>
            <stylesheets>
                <URL value="@../styles/keyboard.css" />
            </stylesheets>
        </Button>
    </children>
</GridPane> 
```

**控制器构造函数**

```
 public Key(){
    FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource("/fxml/key.fxml"));
    fxmlLoader.setControllerFactory(new Callback<Class<?>, Object>(){
        @Override
        public Object call(Class<?> param){
            return keyController = new KeyController();
        }
    });

    try {            
        keyView = (Node) fxmlLoader.load();            
    } catch (IOException exception) {
            throw new RuntimeException(exception);
    }
    mainTextLabel = (Label) fxmlLoader.getNamespace().get("mainTextLabel");
    shiftTextLabel = (Label) fxmlLoader.getNamespace().get("shiftTextLabel");

    getChildren().add(keyView);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T06:12:59.180

我将其创建为 wiki 帖子。我通过反复试验找到了解决方案（似乎是学习编程的最佳方式），但是如果有人可以向我展示 oracle 文档中列出以下详细信息的位置，那么您将获得我的支持。

**回答**

只需将 fx:id 添加到按钮即可。

***前***

`<Button maxHeight="45.0" maxWidth="45.0" minHeight="45.0" minWidth="45.0" mnemonicParsing="false" prefHeight="45.0" prefWidth="45.0" style="" styleClass="alphabet-button" text="~" textAlignment="CENTER" textOverrun="ELLIPSIS">`

***后***

`<Button fx:id="button" maxHeight="45.0" maxWidth="45.0" minHeight="45.0" minWidth="45.0" mnemonicParsing="false" prefHeight="45.0" prefWidth="45.0" style="" styleClass="alphabet-button" text="~" textAlignment="CENTER" textOverrun="ELLIPSIS">`

# jquery - 我坚持使用 asp.net 加载 jquery

> ID：14108277
> 
> 赞同：1
> 
> 时间：2013-01-01T06:13:02.517
> 
> 标签：jquery, asp.net, html

我被 jquery 负载困住了。这是我的代码。

```
tinyMCE.triggerSave()
var text = tinyMCE.get("texthtml").getContent();
var encodedText =  escape(text);
var idlerRaw = $("#cmb_movzu_ders option:selected").val();
var idler = idlerRaw.split(',');
var esasMovzuDers = idler[0];
var altMovzuDers = idler[1];
var fenn = $("#<%=cmb_fenn_list.ClientID  %> 
option:selected").val();
var sinif = $("#<%=cmb_sinif.ClientID  %>
option:selected").text();
$("#dersDialogYeni").load("yeniderselave.aspx?esasmovzukod=" + esasMovzuDers + 
                    "&altmovzukod=" + altMovzuDers + "&fenn=" + fenn + 
                    "&sinif=" + sinif + "&htmltext=" + encodedText); 
```

在yaniderselave.aspx中，我尝试获取这样的变量

```
string htmltext = Request["htmltext"]; 
```

我可以得到其他变量。但无法获取texthtml。

我怎样才能做到这一点 ？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:30:30.863

可能是htmltext包含大量内容，所以这不是一个好方法..!!

Querystring 被限制为几千个字符，具体取决于浏览器**（即 IE 为 2083 个字符）。**

改用 a`HTTP POST`并将二进制格式的文档放在请求的正文中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T07:00:05.130

如果`tinyMCE`是您的控件，那么您必须使用`tinyMCE.html()`来获取该控件的 html。

您可以参考此链接：[获取 HTML](http://api.jquery.com/html/)

它可能对你有帮助。

# jsf-2 - 注册后自动登录和重定向

> ID：14108279
> 
> 赞同：1
> 
> 时间：2013-01-01T06:13:10.647
> 
> 标签：jsf-2

我正在使用 JSF 2.0 和 Primefaces 3.4.1 作为前端创建电影租赁应用程序。用户注册成功后，我需要使用新创建的ID自动登录并重定向到主页。

目前，我正在这样做：

```
@ManagedBean
@ViewScoped
public class RegistrationBean extends BaseBean implements Serializable
{
   ...

   public String register() 
   {
      String nextPage = null;
      User userDetails = new User();

      try 
      {
         BeanUtils.copyProperties(userDetails, this);
         int registrationID = getServiceLocator().getUserService().registerUser(userDetails);
         LOGGER.info("Registered user successfully. Registration ID - {}", registrationID);

         // auto login
         LoginBean loginBean = (LoginBean)FacesUtils.getManagedBean("loginBean");
         loginBean.setUserId(userID);
         loginBean.setPassword(password);
         loginBean.login();
      }
      catch (Exception e) {
         LOGGER.error("Error during registration - " + e.getMessage());
         FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_ERROR, null, 
                  FacesUtils.getValueFromResource(RESOURCE_BUNDLE, REGISTRATION_FAIL));
         FacesContext.getCurrentInstance().addMessage(null, message);
      }
      return nextPage;
   }
} 
```

**登录豆**：

```
@ManagedBean
@SessionScoped
public class LoginBean extends BaseBean implements Serializable
{
   ...

   public String login() 
   {
      FacesContext ctx = FacesContext.getCurrentInstance();

      try 
      {
         currentUser = getServiceLocator().getUserService().findUser(userID);

         if (currentUser == null) 
         {
            ctx.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, null, 
                     FacesUtils.getValueFromResource(RESOURCE_BUNDLE, UNKNOWN_LOGIN)));
            return (userID = password = null);
         }
         else 
         {
            if (EncryptionUtils.compareHash(password, currentUser.getEncrPass())) {
               return INDEX + "?faces-redirect=true";
            }
            else 
            {
               ctx.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, null, 
                        FacesUtils.getValueFromResource(RESOURCE_BUNDLE, AUTH_FAIL)));
               return null;
            }
         }
      }
      catch (Exception e) 
      {
         final String errorMessage = "Error occured during login - " + e.getMessage();
         LOGGER.error(errorMessage);
         ctx.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, null, errorMessage));
      }

      return null;
   }
} 
```

`register()`毫无疑问，上述方法是错误和不安全的。有什么方法可以以更清洁的方式实现相同的目标吗？

* * *

**使用[f:viewParam实现](https://stackoverflow.com/q/6377798/1055089)**

**注册Bean**

```
int registrationID = getServiceLocator().getUserService().registerUser(userDetails);
LOGGER.info("Registered user successfully. Registration ID - {}", registrationID);
nextPage = LOGIN + "?faces-redirect=true&id=" + registrationID; 
```

**登录.xhtml**

```
<f:metadata>
   <f:viewParam name="id" value="#{loginBean.regID}" />
   <f:event listener="#{loginBean.autoLogin}" type="preRenderView"></f:event>
</f:metadata> 
```

**登录豆**

```
private int regID;

...

public void autoLogin()
{
   if (regID > 0 && !FacesContext.getCurrentInstance().isPostback())
   {
      currentUser = getServiceLocator().getUserService().findUser(regID);
      NavigationHandler navHandler = FacesUtils.getApplication().getNavigationHandler();
      navHandler.handleNavigation(FacesContext.getCurrentInstance(), null, INDEX + "?faces-redirect=true");
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T07:42:18.657

所以让我们假设你有三页

1.  注册/用户注册
2.  登录
3.  主页

这里注册成功需要自动登录，需要重定向到主页，但通常注册后必须手动登录。

无论如何，我建议您在外观类中的单独方法中单独检查登录凭据，或者您也可以在 LoginBean 中使用它。

```
public User doLogin(String userName, String password) {
     // query user
     // match with password
     // return null if not found or not matched
} 
```

添加注册bean和登录`navigation-rule`bean`faces-config.xml`

```
 <navigation-case>
        <from-outcome>loginSuccess</from-outcome>
        <to-view-id>/home.xhtml</to-view-id>
        <redirect/>
 </navigation-case> 
```

在注册 bean 和登录 bean 调用`doLogin`方法中，如果用户找到设置导航

```
NavigationHandler nh = facesContext.getApplication().getNavigationHandler();
nh.handleNavigation(facesContext, null, "loginSuccess"); 
```

# php - 更新 id = $GET['id']

> ID：14108281
> 
> 赞同：1
> 
> 时间：2013-01-01T06:13:17.387
> 
> 标签：php, mysql, wordpress, phpdesigner

我正在尝试使用以下 HTML 创建成功的更新：

```
<form id="form2" name="form2" method="post" 
  onsubmit="return validateForm();" action="">

    Id <input type="text" class="txt" name="id" />
    <br />
    Name <input type="text" class="txt" name="name" />
    <br />
    Website <input type="text" class="txt" name="website" />
    <br />
    Description <input type="text" class="txt" name="description" />
    <br />
    <input type="submit" id="submit" value="Submit"/>
</form> 
```

然后我使用以下 PHP 读取值并更新我的数据库：

```
<?php
  global $wpdb;
  if (isset($_GET['id']) && !empty($_GET['id']) &&
    isset($_POST['name']) && !empty($_POST['name']) &&
    isset($_POST['website']) && !empty($_POST['website']) &&
    isset($_POST['description']) && !empty($_POST['description']))
  {
      $wpdb->query("update where id = $_GET['id'] ".PRO_TABLE_PREFIX
            ."tutorial (name, website, description) "
            ."values('{$_POST['name']}', '{$_POST['website']}', '{$_POST['description']}')");
  }
?> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T06:25:46.740

```
<form id="form2" name="form2" **method="post"** onsubmit="return validateForm();" action=""> 
```

请注意，您的表单方法是 post

并且您正在尝试使用 get 方法获取数据

**`isset ( $_GET['id'] ) && ! empty ( $_GET['id'] )`**

将这些替换为 $_POST['key_name]; 以获得正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T06:15:10.813

尝试使用 POST id

```
<?php
     global $wpdb;
if ( isset ( $_POST['id'] ) && ! empty ( $_POST['id'] ) &&
 isset ( $_POST['name'] ) && ! empty ( $_POST['name'] ) &&
 isset ( $_POST['website'] ) && ! empty ( $_POST['website'] ) &&
 isset ( $_POST['description'] ) && ! empty ( $_POST['description'] ))
{
$wpdb->query("INSERT ".PRO_TABLE_PREFIX."tutorial ( name, website, description )
values('{$_POST['name']}','{$_POST['website']}','{$_POST['description']}') ");
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T06:18:42.190

2 事情。

1）由于您的表单方法是 POST，因此您必须使用`$_POST['id']`.

2）在您的查询字符串中，您的mysql`UPDATE`语法错误以及在字符串中使用带有键的数组，您必须将其包装在`{`和`}`标签中。这应该有效：

```
$wpdb->query("UPDATE " . PRO_TABLE_PREFIX . "tutorial SET name='{$_POST['name']}', website='{$_POST['website']}', description='{$_POST['description']}' WHERE id={$_POST['id']}"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T06:19:06.167

使用这个你的更新查询是不正确的语法

```
$wpdb->query("update ".PRO_TABLE_PREFIX."tutorial set  name='{$_POST['name']}', website='{$_POST['website']}', description= '{$_POST['description']}' where id= $_GET['id'] ) "); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T06:28:43.700

如果您希望 ID 在 $_GET['id'] 中，那么表单操作应该是这样的

```
action = "<page-url>?id=<somevalue>" 
```

此外，您必须创建一个文本框来输入 id，并且应该根据那里的输入使用 jQuery 或 Javascript 更改表单。

最后，如果这太复杂，请按照其他人的建议将 $_GET['id'] 更改为 $_POS['id'] 。

此外，SQL 查询不正确。其他人已经指出了这一点。

# c# - 如何获取 Http 模块中引发的事件

> ID：14108289
> 
> 赞同：1
> 
> 时间：2013-01-01T06:14:15.627
> 
> 标签：c#, asp.net, httpmodule

我想在什么类中获取来自服务器的请求中的什么事件`Http Module`。

我的意思是敌人示例：当用户单击`Page1`我想获取的按钮时：`Button1_Click in Page1`类或当用户更改该页面中的下拉列表选择索引时，我想获取`DropdownList1_SelectedIndexChange in Page1`类。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T06:53:08.703

页面事件与页面相关联。模块是生命周期事件。您不会从事件模块中看到任何点击类型事件，从另一篇文章中收听此类事件

```
BeginRequest
AuthenticateRequest
AuthorizeRequest
ResolveRequestCache
AcquireRequestState
PreRequestHandlerExecute
PostRequestHandlerExecute
ReleaseRequestState
UpdateRequestCache
EndRequest 
```

[HTTPModule 事件执行顺序？](https://stackoverflow.com/questions/441421/httpmodule-event-execution-order)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T00:51:26.093

您要查找的事件特定于 asp.net 页面模型。Http 模块处于较低级别（基于传输），不会用于捕获页面事件。

你能提供更多细节吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T19:10:19.393

我将建议，如果您从一个网站开始从页面继承一个类，并使您的所有页面都从该类继承。

```
public abstract class LoggingPage : System.Web.UI.Page
{
    protected override void RaisePostBackEvent(
        IPostBackEventHandler sourceControl, string eventArgument)
    {
        //doing something with the information.
        EventLog.WriteEntry("Page event for " + sourceControl.UniqueID + " at " + this.Request.Url);

        //then call the base implementation
        base.RaisePostBackEvent(sourceControl, eventArgument);
    }
}
```

如果您因为异常需要获取事件的信息而您从未到达 RaisePostBackEvent，那么您将需要在您的模块中处理`PreRequestHandlerExecute`并`HttpApplication`在请求中获取 2 个字段

```
public class LoggingModule : System.Web.IHttpModule
{
    private HttpApplication _app;

    public void Dispose() 
    {
        this._app.PreRequestHandlerExecute -= new EventHandler(this.PreRequestExecution);
    }

    public void Init(HttpApplication application)
    {
        this._app = application;
        this._app.PreRequestHandlerExecute += new EventHandler(this.PreRequestExecution);
    }

    private void PreRequestExecution(object sender, EventArgs e)
    {
        var request = this._app.Context.Request;
        var target = request.Form["__EVENTTARGET"];
        var arg = request.Form["__EVENTARGUMENT"];
        //this gives you enough information about events
        //you need to check if they are null before using them (target and arg)
        //through the same request you can get extra info including URL
    }
} 
```

**更新：**
如果您关心的是安全性，并且由于您在系统中实现了角色，我建议您使用`System.Security.Permissions.PrincipalPermissionAttribute`来装饰您的事件处理程序，如下所示：

```
protected void Page_Load()
{
    myButton.Click += new EventHandler(this.myButton_Click);
}

[PrincipalPermission(SecurityAction.Demand, Role = "Administrator")]
private void myButton_Click(object sender, EventArgs e)
{
    //your code to handle the event
} 
```

您可以多次添加属性以满足您的需求。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T08:57:08.450

关于您的问题，我注意到以下评论：

> 我想开发一个安全系统，为事件添加一些属性（对于可以访问此事件的角色）并使用会话和此属性检查授权。我想获取事件名称，然后是属于它的属性并检查授权

因为事件是在类中注册的，在Module/Handler阶段是不可用的，所以你问的都做不到。

但是，总有一些选择，我可以看到您要实现的目标:-) 我的解决方案是通过调用方法（*myEventHooks.HookAll(this); ）简单地注册**所有*事件并在钩子实现中检查安全性（并且在检查失败时抛出异常或删除所有已注册的事件 - 填写您认为合适的空白）。

 *请注意，当您更改 Children / 树时，您需要更新事件挂钩以绑定到它们的所有方法。进行绑定的最简单方法是在基本页面中覆盖 RaisePostBackEvent，然后挂钩所有内容。

可以通过几种不同的方式改进此解决方案；最明显的是使处理更加通用，并且缺少 0 参数处理程序。为了清关，我尽可能简单。这应该让你开始。

我的解决方案有 2 个部分：(1) 通用钩子类和 (2) 表单中的实现。目前解决方案是懒惰的，例如我把事件处理程序放在最后，而不是放在队列的前面。您应该能够通过使用 GetInvocationList 或类似的东西来解决这个问题。

通用挂钩类基本上挂钩事件并在调用事件时触发：

```
public class EventHooks
{
    private class EventHooksEquality : IEqualityComparer<Tuple<string, object>>
    {
        public bool Equals(Tuple<string, object> x, Tuple<string, object> y)
        {
            return x.Item1.Equals(y.Item1) && object.ReferenceEquals(x.Item2, y.Item2);
        }

        public int GetHashCode(Tuple<string, object> obj)
        {
            return obj.Item1.GetHashCode();
        }
    }

    public void CheckSecurity(string eventName, object container) 
    {
        // Add your security code that checks attributes and the likes here
    }

    private abstract class BaseHookHandler
    {
        protected BaseHookHandler(object container, string eventName, EventHooks hooks)
        {
            this.hooks = hooks;
            this.container = container;
            this.eventName = eventName;
        }

        protected string eventName;
        protected object container;
        protected EventHooks hooks;
    }

    private class HookHandler<T1> : BaseHookHandler
    {
        public HookHandler(object container, string eventName, EventHooks hooks)
            : base(container, eventName, hooks)
        {
        }
        public void Handle(T1 t1)
        {
            hooks.CheckSecurity(eventName, container);
        }
    }

    private class HookHandler<T1, T2> : BaseHookHandler
    {
        public HookHandler(object container, string eventName, EventHooks hooks)
            : base(container, eventName, hooks)
        {
        }
        public void Handle(T1 t1, T2 t2)
        {
            hooks.CheckSecurity(eventName, container);
        }
    }
    // add more handlers here...

    public void HookAll(object obj)
    {
        foreach (var eventHandler in obj.GetType().GetEvents()) 
        {
            Hook(obj, eventHandler.Name);
        }
    }

    public void Hook(object obj, string eventHandler)
    {
        if (obj == null)
        {
            throw new Exception("You have to initialize the object before hooking events.");
        }

        // Create a handler with the right signature
        var field = obj.GetType().GetEvent(eventHandler);
        var delegateInvoke = field.EventHandlerType.GetMethod("Invoke");
        Type[] parameterTypes = delegateInvoke.GetParameters().Select((a) => (a.ParameterType)).ToArray();

        // Select the handler with the correct number of parameters
        var genericHandler = Type.GetType(GetType().FullName + "+HookHandler`" + parameterTypes.Length);
        var handlerType = genericHandler.MakeGenericType(parameterTypes);
        var handlerObject = Activator.CreateInstance(handlerType, obj, eventHandler, this);
        var handler = handlerType.GetMethod("Handle");

        // Create a delegate
        var del = Delegate.CreateDelegate(field.EventHandlerType, handlerObject, handler);

        // Add the handler to the event itself
        field.AddEventHandler(obj, del);
    }
} 
```

基类中的用法可以按如下方式进行（示例）：

```
 protected override void RaisePostBackEvent(
        IPostBackEventHandler sourceControl, string eventArgument)
    {
        // Hook everything in Page.Controls
        Stack<Control> st = new Stack<Control>();
        st.Push(Page);

        while (st.Count > 0)
        {
            var control = st.Pop();
            eventHooks.HookAll(control);
            foreach (Control child in control.Controls)
            {
                st.Push(child);
            }
        }

        // Raise events
        base.RaisePostBackEvent(sourceControl, eventArgument);
    }

    private EventHooks hooks = new EventHooks(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-01T07:20:28.427

您的问题非常广泛，以下 MSDN 库文档参考可能会帮助您理解此过程：

*   [IIS 5.0 和 6.0 的 ASP.NET 应用程序生命周期概述](http://msdn.microsoft.com/en-us/library/ms178473.aspx)
*   [IIS 7.0 的 ASP.NET 应用程序生命周期概述](http://msdn.microsoft.com/en-us/library/bb470252.aspx)

以下是 ASP.NET 4.0 的事件和请求管道：

> 1.  验证请求，它检查浏览器发送的信息并确定它是否包含潜在的恶意标记。
> 2.  如果在 Web.config 文件的 UrlMappingsSection 部分中配置了任何 URL，则执行 URL 映射。
> 3.  引发**BeginRequest**事件。
> 4.  引发**AuthenticateRequest**事件。
> 5.  引发**PostAuthenticateRequest**事件。
> 6.  引发**AuthorizeRequest**事件。
> 7.  引发**PostAuthorizeRequest**事件。
> 8.  引发**ResolveRequestCache**事件。
> 9.  引发**PostResolveRequestCache**事件。
> 10.  **[IIS 5.0/6.0]**根据请求资源的文件扩展名（映射在应用程序的配置文件中），选择一个实现IHttpHandler的类来处理请求。如果请求是针对从 Page 类派生的对象（页面）并且需要编译页面，则 ASP.NET 在创建页面实例之前编译页面。**[IIS 7.0]**引发**MapRequestHandler**事件。根据所请求资源的文件扩展名选择适当的处理程序。处理程序可以是本机代码模块，例如 IIS 7.0 StaticFileModule，也可以是托管代码模块，例如 PageHandlerFactory 类（处理 .aspx 文件）。
> 11.  引发**PostMapRequestHandler**事件。
> 12.  引发**AcquireRequestState**事件。
> 13.  引发**PostAcquireRequestState**事件。
> 14.  引发**PreRequestHandlerExecute**事件。
> 15.  为请求调用相应 IHttpHandler 类的 ProcessRequest 方法（或异步版本 IHttpAsyncHandler.BeginProcessRequest）。例如，如果请求是针对某个页面的，则当前页面实例会处理该请求。
> 16.  引发**PostRequestHandlerExecute**事件。
> 17.  引发**ReleaseRequestState**事件。
> 18.  引发**PostReleaseRequestState**事件。
> 19.  如果定义了 Filter 属性，则执行响应过滤。
> 20.  引发**UpdateRequestCache**事件。
> 21.  引发**PostUpdateRequestCache**事件。
> 22.  **[IIS 7.0]**引发**LogRequest**事件。
> 23.  **[IIS 7.0]**引发**PostLogRequest**事件。
> 24.  引发**EndRequest**事件。
> 25.  引发**PreSendRequestHeaders**事件。
> 26.  引发**PreSendRequestContent**事件。

**注意：**`MapRequestHandler, LogRequest, and PostLogRequest events`仅当应用程序在 IIS 7.0 和 .NET Framework 3.0 或更高版本中以集成模式运行时，才受支持。

**要遵循的**参考：** [HTTP 处理程序和 HTTP 模块概述](http://msdn.microsoft.com/en-us/library/bb398986%28v=vs.100%29.aspx)***

# asp.net - 在 asp.net 中扩展会话

> ID：14108296
> 
> 赞同：-5
> 
> 时间：2013-01-01T06:15:40.217
> 
> 标签：asp.net, session-timeout

如何自动延长会话时间以及会话周期在 asp.net 中如何工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T06:40:22.337

当用户根据*唯一字符串发出请求时，***会话状态**会被扩展（前提是会话尚未停止）。如果会话时间到期，并且基于之前的请求发出请求，则将启动新会话并提交表单状态（表单上存在的数据）。

 *要扩展会话状态，请转到您的 web.config 文件。

```
<?xml version="1.0">
<configuration>
 <system.web>
   <compilation debug="true" targetFramework="4.5" />
   <sessionState timeout="90" cookieless="AutoDetect" />
 </system.web>
</configuration> 
```

属性

```
timeout="90" 
```

为 Session 状态设置 90 分钟的过期时间。如果在时间范围内没有响应，则移除会话状态。

属性

```
cookieless="AutoDetect" 
```

将唯一的字符串存储到cookie中，如果用户没有cookie，它将在url中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T11:19:52.363

另一种提醒用户会话已过期的方法
[http://code.msdn.microsoft.com/AspNetAlertSessionExpire-c230a148](http://code.msdn.microsoft.com/AspNetAlertSessionExpire-c230a148)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T06:18:56.183

请看以下

[Asp.Net 中的会话超时延长](https://stackoverflow.com/questions/2266536/session-timeout-extend-in-asp-net)

如果您是新手，必须阅读 [http://msdn.microsoft.com/en-us/library/ms972429.aspx](http://msdn.microsoft.com/en-us/library/ms972429.aspx)*

# php - 获取特定用户的 Twitter 关注者

> ID：14108300
> 
> 赞同：0
> 
> 时间：2013-01-01T06:16:11.807
> 
> 标签：php, twitter

如果我想获取特定用户的所有关注者的姓名，我的网站需要跟踪某些用户的关注者假设这个用户有 1000 个关注者，我将能够通过[https://api.twitter 获取关注者 ID。 com/1/followers/ids.json](https://api.twitter.com/1/followers/ids.json) 1000 id

然后要获取每个 id 的用户名，我必须为这 1000 个 id 的每个 id 运行 [https://api.twitter.com/1/users/lookup.json](https://api.twitter.com/1/users/lookup.json) 但是 350 的速率限制使这不可能

任何解决方案，我在做什么错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:09:06.423

好的，我实际上在 users/lookup 中发现了 solutino 作为 user_id 的参数我可以发送多个用逗号分隔的 id，因此在单个 API 调用中我可以发送多达 100 个 id，这意味着在一小时内我可以获得 35000 个用户的查找，这是更多对于大多数情况来说已经足够了

# android - 带循环的 Soundpool 无法正常工作

> ID：14108301
> 
> 赞同：0
> 
> 时间：2013-01-01T06:16:19.390
> 
> 标签：android, loops, soundpool

我在显示一些数字时播放声音剪辑，然后希望它停止。然后我想重复这个过程。

初始化的东西：

```
 private SoundPool soundPool;
    private int soundRoll;
    boolean soundloaded = false;
    this.setVolumeControlStream(AudioManager.STREAM_MUSIC);
    soundPool = new SoundPool(1, AudioManager.STREAM_MUSIC, 0);
    soundPool.setOnLoadCompleteListener(new OnLoadCompleteListener() {
      @Override
      public void onLoadComplete(SoundPool soundPool, int sampleId, int status) {
            soundloaded = true;
      }
    });
    soundRoll = soundPool.load(this, R.raw.roll, 1); 
```

线程调用：

```
 public void update() {
    .......
    new Thread(new Runnable() {
       public void run() {
         int streamID = 0;
         streamID = soundPool.play(soundRoll, volume, volume, 1, -1, 1);
         ... loop to animate text....
         soundPool.stop(streamID);
         }
    }).start();
    } 
```

这每隔一段时间都可以正常工作。所以它第一次播放并在正确的时间停止。第二次我什么也没听到，但第三次就可以了

如果我取出循环，那么它可以工作。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T00:38:52.437

似乎如果我从 MP3 切换到 OGG 文件，错误就会消失

# maven-2 - 2套Maven集成测试

> ID：14108304
> 
> 赞同：-1
> 
> 时间：2013-01-01T06:16:41.903
> 
> 标签：maven-2

我的 Maven 项目包含一些集成测试。这些测试在测试阶段执行。每次提交时都会在哈德逊发生这种情况。

我的愿望是添加另一组集成测试，但我不想在每次构建时都执行它们。

这意味着我将有两组集成测试，一组在每次构建时触发，一组将通过使用配置文件执行。

我考虑过添加另一个测试文件夹，但这会导致编译问题。

您对如何实施它有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:11:06.963

首先，如果您的项目具有集成测试，则必须在集成测试阶段而*不是*在测试阶段执行。您必须使用[maven-failsafe-plugin](http://maven.apache.org/surefire/maven-failsafe-plugin/plugin-info.html)而不是 maven-surefire-plugin。单元测试的命名约定是 *Test.java、*TestCase.java 等，但对于集成测试 *IT.java 或 *ITCase.java 等。详细信息可以在 maven-surefire 或 maven-failsafe-plugin 的文档中找到。

您的问题的最佳解决方案是拥有单独的模块（多模块构建）

```
 +-- root
      +-- project-a
      +-- mod-it1
      +-- mod-it2 
```

而 mod-it2 可以通过配置文件激活。

# prestashop - PrestaShop 1.5 中客户共享的缺点

> ID：14108320
> 
> 赞同：0
> 
> 时间：2013-01-01T06:19:42.480
> 
> 标签：prestashop

我正在考虑修改 Prestashop 的授权功能，其中即使商店不在同一个组内，多个商店也可以共享客户。例如，当客户登录默认商店时，在签出他的购物车后，他可以去下一个商店，而无需再次重新登录。我认为对客户来说更方便。

我的问题是，这会对我的商店和我的客户构成任何安全威胁或任何其他不利因素吗？到目前为止，我想不出任何东西，但是在深入研究代码之前，我想先了解 PS 专家的观点。

顺便说一句，如果我要开始编辑我的商店，有什么方法可以使用，这样我就不需要编辑核心代码了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:58:31.450

如果您确实需要更改核心，请使用 prestashop 的覆盖

[http://doc.prestashop.com/display/PS15/Overriding+default+behaviors](http://doc.prestashop.com/display/PS15/Overriding+default+behaviors)

# c# - 在 C# 中使用准备好的语句检索数据

> ID：14108323
> 
> 赞同：0
> 
> 时间：2013-01-01T06:20:14.083
> 
> 标签：c#, prepared-statement

我有一个包含 3 列的表（EmpId、EmpName、EmpSalary）。我正在使用准备好的语句来使用准备好的语句从该表中检索所有数据。这是我写的...

```
try
        {
            SqlCommand cmd = con.CreateCommand();
            cmd.CommandText = "SELECT EmpId,EmpName,EmpSalary FROM EmpDetails";

            SqlParameter paraId = new SqlParameter();
            paraId.ParameterName = "@id";
            paraId.SqlDbType = SqlDbType.Int;
            paraId.Size = 32;

            SqlParameter paraName = new SqlParameter();
            paraName.ParameterName = "@name";
            paraName.SqlDbType = SqlDbType.VarChar;
            paraName.Size = 50;

            SqlParameter paraSal = new SqlParameter();
            paraSal.ParameterName = "@sal";
            paraSal.SqlDbType = SqlDbType.Decimal;
            paraSal.Precision = 7;
            paraSal.Scale = 2;

            cmd.Parameters.Add(paraId);
            cmd.Parameters.Add(paraName);
            cmd.Parameters.Add(paraSal);

            con.Open();
            cmd.Prepare();
            SqlDataReader dr = cmd.ExecuteReader();
            string str = "";
            while(dr.Read())
            {
                string id = dr.GetInt32(0).ToString();
                string name = dr.GetString(1);
                string sal = dr.IsDBNull(2) ? "is null" : dr.GetDecimal(2).ToString();
                str += id + "\t" + name + "\t" + sal + "\n";
            }
            MessageBox.Show(str);

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
            if (con.State == ConnectionState.Open)
                con.Close();
        } 
```

但我收到如下错误：“参数化查询需要参数@id，但未提供。”

我在这里犯了什么错误..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:28:33.120

请使用`cmd.Parameters.AddWithValue()`. 不推荐使用`cmd.Parameters.Add()`。谷歌它的用途:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T07:23:11.643

我检查了您的代码，您需要提供如下参数值。

```
 try
        {

            SqlCommand cmd = con.CreateCommand();
            cmd.CommandText = "SELECT EmpId,EmpName,EmpSalary FROM EmpDetails ";

            SqlParameter paraId = new SqlParameter();
            paraId.ParameterName = "@id";
            paraId.SqlDbType = SqlDbType.Int;
            paraId.Size = 32;

            SqlParameter paraName = new SqlParameter();
            paraName.ParameterName = "@name";
            paraName.SqlDbType = SqlDbType.VarChar;
            paraName.Size = 50;

            SqlParameter paraSal = new SqlParameter();
            paraSal.ParameterName = "@sal";
            paraSal.SqlDbType = SqlDbType.Decimal;
            paraSal.Precision = 7;
            paraSal.Scale = 2;

            //i assume you forgot to setup parameter values.

            paraId.Value = 1;
            paraName.Value = "thisName";
            paraSal.Value = 343;

            cmd.Parameters.Add(paraId);
            cmd.Parameters.Add(paraName);
            cmd.Parameters.Add(paraSal);

            con.Open();
            cmd.Prepare();
            SqlDataReader dr = cmd.ExecuteReader();
            string str = "";
            while (dr.Read())
            {
                string id = dr.GetInt32(0).ToString();
                string name = dr.GetString(1);
                string sal = dr.IsDBNull(2) ? "is null" : dr.GetDecimal(2).ToString();
                str += id + "\t" + name + "\t" + sal + "\n";
            }
            MessageBox.Show(str);

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
            if (con.State == ConnectionState.Open)
                con.Close();
        } 
```

# java - 使用 GAE servlet 为 JavaWS 提供动态 JNLP 和 jar

> ID：14108326
> 
> 赞同：1
> 
> 时间：2013-01-01T06:20:24.100
> 
> 标签：java, google-app-engine, servlets, jar, jnlp

当我尝试动态分发 jar/jnlp 时，我遇到了几个问题。我的所有文件都是使用[http://www.mywebsite.com/ServeFile?name=xxx](http://www.mywebsite.com/ServeFile?name=xxx)为文件 xxx 动态提供的。我可以正确下载文件。

当我将 jnlp 的链接放入浏览器并下载时，javaws 出现错误，显示找不到 jar 文件。GAE 日志文件显示 javaws 尝试加载`/ServeFile.pack.gz?name=test__V1.0.jar`，因此没有由 ServeFile servlet 提供服务，而是由 / 提供服务（这是另一个 servlet）

这是我的 jnlp 文件部分内容：

```
<resources>
    <j2se version="1.6+"/>
    <jar href="ServeFile?name=test.jar" main="true" version="1.0"/>
    <property name="jnlp.packEnabled" value="true"/>
    <property name="jnlp.versionEnabled" value="true"/>
</resources> 
```

我的问题是 javaws 如何将 .pack.gz 放入 url 的中间，而不仅仅是在请求中放入 AcceptEncoding？动态服务 jnlp 和 jar 的正确方法是什么？

## 更新

使用“静态”类型链接（例如*http://website.com/path/file.jar*而不使用*?file=file.jar* ）时问题已解决。我还有一个问题：

## 新问题

JavaWS 有时会放置*?version-id=1.0*并且我的动态 url 也使用类似的模式，例如*?folder=root&user= guest*。所以 version-id 会变成*1.0?folder=root*。

如果我把*&folder=root&user=guest*它会工作，但 javaws 有时会请求*myjar* __ *V1.0.jar& folder=root*所以现在文件名有*myjar* _ *V1.0& folder=root*这是错误的。这是不一致的。

暂时，我可以只解析这个 version-id 来查看它是否包含问号。我希望有更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:55:44.750

在 GAE 上，考虑将文件放在 blobstore 中并使用 blobstore 服务来提供它们。

Blobstore 可以提供任何二进制文件

[https://developers.google.com/appengine/docs/java/blobstore/overview](https://developers.google.com/appengine/docs/java/blobstore/overview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T01:49:20.080

我得到了一个临时解决方案，但还有另一个问题。这个 jar 存储在数据存储中，所以我需要[http://www.myserver.com/?file=start.jar](http://www.myserver.com/?file=start.jar)来访问它。一旦我使用[http://www.myserver.com/start.jar](http://www.myserver.com/start.jar)它就会工作。我只需要我的 servlet 来解析 Path 而不是 getParameter 这仍然很容易。

问题出在 pack.gz 和 version-id 上。如果您的链接是[http://www.myserver.com/start.jar?folder=root&user=guest](http://www.myserver.com/start.jar?folder=root&user=guest)那么 javaws 将生成[http://www.myserver.com/start.jar.pack.gz?version-id=1.0 ?folder=root&user=guest](http://www.myserver.com/start.jar.pack.gz?version-id=1.0?folder=root&user=guest)你`getParameter("version-id")`的，`1.0?folder=root`所以你可能认为你可以使用`&folder=root&user=guest`

但是您的链接也可能变成[http://www.myserver.com/start__V1.0.jar.pack.gz?folder=root&user=guest](http://www.myserver.com/start__V1.0.jar.pack.gz?folder=root&user=guest)（这很好）。我认为您不能保证使用哪一个 javaws，因此您无法准备使用 ?folder=root 或使用 &folder=root。

# javascript - 3列，第三列具有流体宽度，固定位置

> ID：14108331
> 
> 赞同：4
> 
> 时间：2013-01-01T06:21:10.780
> 
> 标签：javascript, jquery, css, stylesheet, html

我想做这个简单的布局：

1.  3 列左右位置：固定，因为向下滚动时，左右应该保持静止
2.  我们知道左栏`width = 200px`
3.  我们知道中间栏`width = 400px`
4.  我们不知道正确的列宽，它应该是**流动**的（即填写屏幕宽度的其余部分或零）

这是我的示例（但**col3 的宽度为 100px**）。所以问题是如何修复 css`col3`以使其流畅但仍然保留`position:fixed`？

[http://jsfiddle.net/Endt7/1/](http://jsfiddle.net/Endt7/1/)

我的最后一个选择是使用 jQuery。但我不想碰它，除非真的需要布局。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T07:59:38.197

对于绝对/固定定位元素，宽度是左右的函数。因此，`left: 600px; right: 0;`在第三列设置 ，浏览器将确定宽度。这就对了。这是修改后的 CSS，为了保持一致而进行了一些更改：

```
.col1 {
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    width: 200px;
    background: red;
}
.col2 {
    margin-left: 200px;
    width: 400px;
    height: 100%;
    background: green;
}
.col3 {
    position: fixed;
    top: 0;
    bottom: 0;
    left: 600px;
    right: 0;
    background: blue;
} 
```

# [演示在这里](http://jsfiddle.net/salman/Endt7/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T07:46:47.787

可以使用`float:left`左列和中间列的绝对位置或绝对位置并设置`margin-left`为等于它们的组合宽度。

```
.col1 {
    background: red;
    float:left;
    width: 200px;    
    height:100%
}

.col2 {
    background: green;    
    float:left;
    width: 400px;
    height:100%

}

.col3 {
    background: blue;
    margin-left:600px;

} 
```

演示：http: [//jsfiddle.net/Endt7/3/](http://jsfiddle.net/Endt7/3/)

# c# - 使用默认值初始化队列或堆栈？

> ID：14108336
> 
> 赞同：15
> 
> 时间：2013-01-01T06:21:59.243
> 
> 标签：c#, stack, queue

您可以使用预先放置的值初始化列表：

`List<int> L1 = new List<int> {1, 2, 3};`

队列有上面的等价物吗？我的想法是：

`Queue<int> Q1 = new Queue<int> {1, 2, 3};`

这是行不通的。有什么解决方法吗？

是

```
Queue<int> Q1 = new Queue<int>();
Q1.Enqueue(1);
Q1.Enqueue(2);
Q1.Enqueue(3); 
```

唯一有效的解决方案？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-01T06:22:57.463

使用构造函数[`Queue<T> Constructor (IEnumerable<T>`）](http://msdn.microsoft.com/en-us/library/69zckb8z.aspx)

```
Queue<int> Q1 = new Queue<int>(new[] { 1, 2, 3 }); 
```

或者

```
List<int> list = new List<int>{1, 2, 3 };
Queue<int> Q1 = new Queue<int>(list); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T06:29:37.863

请参阅：http: [//blogs.msdn.com/b/madst/archive/2006/10/10/what-is-a-collection_3f00_.aspx](http://blogs.msdn.com/b/madst/archive/2006/10/10/what-is-a-collection_3f00_.aspx)，特别是：

> 这种新语法的含义只是使用它的无参数构造函数创建 MyNames 的一个实例（必要时可以提供构造函数参数）并使用每个字符串调用它的 Add 方法。

和

> 由此产生的语言设计是一种“基于模式”的方法。我们依赖用户为其方法使用特定名称，编译器在编写时不会对其进行检查。如果他们在一个程序集中更改 Add to AddPair 的名称，编译器不会抱怨这一点，而是会抱怨位于其他地方的集合初始化程序突然缺少要调用的重载。

队列不支持 Add 方法，因此无法使用短表达式样式语法进行初始化。这确实是设计上的选择。幸运的是，您可以将集合传递给队列的构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T06:25:54.323

试试这个

```
Queue<int> Q1 = new Queue<int>(new int[] { 1, 2, 3} ); 
```

# javascript - 正则表达式捕获除连续换行符之外的所有内容

> ID：14108338
> 
> 赞同：0
> 
> 时间：2013-01-01T06:22:11.847
> 
> 标签：javascript, regex

除了面对两条或更多条新线时，捕获所有内容的最佳方法是什么？

前任：

```
name1
address1
zipcode

name2
address2
zipcode

name3
address3
zipcode 
```

我考虑的一个正则表达式是`/[^\n\n]*\s*/g`. 但是当它面对一个单一的`\n`角色时，这就停止了。

我考虑的另一种方式是`/((?:.*(?=\n\n)))\s*/g`. 但这似乎只捕获了忽略前面几行的最后一行。

处理类似情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:27:39.060

`((.+)\n?)*`（您可能想让组不被捕获，为了可读性而保留它）

内部`(.+)\n?`表示“非空行”（至少一个非换行符如 . 不匹配换行符，除非设置了适当的标志，然后是可选的换行符）

然后，重复任意次数（匹配整个非空行块）。

但是，根据您在做什么，regexp 可能不是您正在寻找的答案。你确定只是分割字符串`\n\n`不会做你想要的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T06:29:40.800

你*必须*使用正则表达式吗？没有它，解决方案很简单。

```
var data = 'name1...';

var matches = data.split('\n\n'); 
```

要访问单个子部分，请`\n`再次将其拆分。

```
//the first section's name
var name = matches[0].split('\n')[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T09:56:14.693

**更新**

您可以考虑将*可变长度分隔符*替换为未出现在已处理文本中的已知*固定长度*字符串，然后拆分。例如：

```
> var s = "Hi\n\n\nBye\nCiao";
> var x = s.replace(/\n{2,}/, "#");
> x.split("#");
["Hi", "Bye
Ciao"] 
```

我认为这是一个优雅的解决方案。您还可以使用以下有点做作的正则表达式

```
> s.match(/((?!\n{2,})[\s\S])+/g);
["Hi", "
Bye
Ciao"] 
```

然后通过将`trim()`string 方法应用于其成员来处理结果数组，以消除`\n`数组中每个字符串的开头/结尾处的任何内容。

# c++ - 无法在 Visual c++ 2010 中运行我的第一个 Win32 应用程序

> ID：14108339
> 
> 赞同：0
> 
> 时间：2013-01-01T06:22:15.497
> 
> 标签：c++, visual-studio-2010, visual-c++

我在 Visual C++ 中有以下第一个代码：

```
#include <iostream>
using namespace std;

int main()
{
    cout<<"Hello World" << endl;
    system("PAUS");
    return (0);
} 
```

我创建了一个 Win32 控制台应用程序项目。我删除了可用的头文件，我的项目区域如下所示：！[在此处输入图像描述][1]

当我右键单击我的`cpp`文件并单击`compile`时，我得到以下信息：

```
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

但是，当我单击 时`Build`，cmd 黑屏出现如此之快然后消失，我收到以下错误：

```
'test2.exe': Loaded 'C:\Users\user\Documents\Visual Studio 2008\Projects\test2\Debug\test2.exe', Symbols loaded.
'test2.exe': Loaded 'C:\Windows\System32\ntdll.dll'
'test2.exe': Loaded 'C:\Windows\System32\kernel32.dll'
'test2.exe': Loaded 'C:\Windows\System32\KernelBase.dll'
'test2.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.vc90.debugcrt_1fc8b3b9a1e18e3b_9.0.21022.8_none_96748342450f6aa2\msvcr90d.dll'
The program '[6056] test2.exe: Native' has exited with code 0 (0x0). 
```

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T06:38:30.907

在 Visual Studio 中按 [Ctrl F5] 无需调试即可运行程序。

然后它在最后停止。

要运行调试，只需按 [F5]。然后您可能会发现在 的最后一个右大括号上设置断点很方便`main`，因为调试程序不会自动停止。也就是说，它是独立运行的，而不是通过批处理文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T06:24:38.653

它`system("PAUSE");`不是`system("PAUS");`除此之外，我看不出为什么你的程序不应该在正确设置的开发环境上编译。

# layout - 如何修改 ADF 高级搜索的布局？

> ID：14108340
> 
> 赞同：0
> 
> 时间：2013-01-01T06:22:30.520
> 
> 标签：layout, button, oracle-adf, advanced-search

我有一个具有高级搜索功能的 ADF 页面。高级搜索顶部有折叠面板，用户可以折叠或展开搜索功能，并在右侧有“重置”或搜索按钮。但目前我的客户希望我改变它。他们希望我：

```
1\. remove/hide  "Search" colapse panel so that user cannot hide/adjust it.Currently,  I use display mode=default.

2\. Move button for "search" and "reset" to the left. 
```

有没有办法让我调整这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T00:10:13.723

您也许可以使用蒙皮更改按钮的位置：http: [//jdevadf.oracle.com/adf-richclient-demo/faces/components/skinningKeys/query.jspx](http://jdevadf.oracle.com/adf-richclient-demo/faces/components/skinningKeys/query.jspx)

# java - Java 在向上转换时如何处理字段？

> ID：14108343
> 
> 赞同：7
> 
> 时间：2013-01-01T06:22:38.650
> 
> 标签：java

> **可能的重复：**
> [阴影的概念](https://stackoverflow.com/questions/3300805/the-concept-of-shadowing)

我对在向上转换期间如何在 Java 中处理类的字段感到困惑。例如：

```
class SuperClass
{
    String myString = "String in SuperClass";

    public void myMethod()
    {
        System.out.println("Method in SuperClass");
    }
}

class SubClass extends SuperClass
{
    String myString = "String in SubClass";

    public void myMethod()
    {
        System.out.println("Method in SubClass");
    }
}

class Question
{
    public static void main(String[] args)
    {
        SuperClass test = new SubClass();
            // object test is an instance of SubClass
            // but I am telling the compiler to treat it as SuperClass

        test.myMethod();
        System.out.println(test.myString);

    }
} 
```

输出：

```
Method in SubClass
String in SuperClass //Why is "String in SubClass" not used? 
```

当我创建一个对象`test`时，它是一个`SubClass`类的实例；但是，我告诉编译器将其视为`SuperClass`. `SubClass`关于方法工作的一切对我来说都很清楚：如果给定的方法是为 定义的，我将只能使用 的方法`SuperClass`。

但是，`SuperClass`当我尝试访问`myString`. `test`既然`test`是`SubClass`我期望使用`myString`的一个实例`SubClass`，为什么没有发生这种情况？我错过了什么？

我知道我可以`SubClass`使用`this`操作符访问 myString 。例如，我可以`printMyString`在 SuperClass 中定义方法，并用

```
public void printMyString()
{
    System.out.println(this.myString);
} 
```

在中`SubClass`，所以我的问题主要是关于如何在`SuperClass`中使用的领域`test`。也许我错过了一些明显的东西？

我试图寻找答案，我发现最接近的主题是[Upcasting in Java and two separate object properties](https://stackoverflow.com/questions/10653845/upcasting-in-java-and-two-separate-object-properties/10653912#10653912)，虽然有帮助，但它没有回答我的问题。

先感谢您

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T06:24:52.817

属性不能像方法一样被重载。

```
test.myMethod(); 
```

这里方法调用取决于*实际对象的类型*。这里对象是类型`SubClass`，所以`SubClass`调用方法。

```
test.myString 
```

访问属性时，取决于*引用变量的类型*。这里引用变量 ie`test`是类型，因此可以访问 `SuperClass`来自的属性。`SuperClass`

您正在寻找的是[类变量隐藏/阴影](http://www.xyzws.com/Javafaq/what-is-variable-hiding-and-shadowing/15)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T06:25:53.910

Java 中的字段**只是隐藏的，实际上并没有被覆盖**（这并不意味着我们在尝试此操作时会遇到编译时错误，而是在真正意义上它们没有被覆盖）。

> 覆盖意味着应该基于*对象的运行时类型*而不是基于声明的类型来调用成员。

但是 Java 中的字段绑定始终是静态的，因此它仅基于*对象引用的声明类型*。

在您给出的示例中，通过在类中声明名为“myString”`SubClass`的类变量，您隐藏了它将从其超类继承的`SuperClass`具有相同名称“myString”的类变量。

Java语言规范：

> 如果该类声明了一个具有特定名称的字段，则该字段的声明被称为隐藏了超类和该类的超接口中具有相同名称的任何和所有可访问的字段声明。
> 
> 如果隐藏字段是静态的，则可以通过使用限定名称或使用包含关键字 super 或转换为超类类型的字段访问表达式来访问隐藏字段。

# android - 在 sqlite 中插入记录会导致重复记录

> ID：14108344
> 
> 赞同：-2
> 
> 时间：2013-01-01T06:22:48.240
> 
> 标签：android, sqlite

当我插入一条记录时，会生成重复条目，这意味着总共显示两个相同的条目。我对 select 语句的查询如下：如何制作不同的记录？？？

```
Cursor cur = db.query("timer", null, null, null, null, null, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T06:25:12.200

要进行不同的选择，请定义一个布尔变量，例如：

```
private boolean Distinct = true; 
```

然后将您的查询更改为：

```
c = db.query(Distinct,DATABASE_TABLE,cols,null,null, null, null,
                    null,null); 
```

# c# - 我可以在数据集表上触发 sql 查询吗？

> ID：14108350
> 
> 赞同：4
> 
> 时间：2013-01-01T06:23:40.500
> 
> 标签：c#, .net, sql, ado.net

我知道这是非常愚蠢的问题。但我不像你们一样天才。如果我有如下数据集：-

```
adapter.fill(ds,"Login"); 
```

现在在数据集中创建的表是“登录”。现在我可以在这个表上触发一个 sql 命令，比如

```
sqlcommand cmd = new sqlcommand("select * from Login"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T06:25:25.087

您可以过滤数据表，例如

```
ds.Tables["Login"].Select("ID=1 AND ID2=3"); // sample expression 
```

更多关于这个链接

*   [数据集中的过滤和排序](http://msdn.microsoft.com/en-us/library/1ay5y4w0(v=vs.71).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T06:39:10.220

是的，你可以这样做

```
dataset ds=new Dataset

    datatable dt=ds.table[0].select(" select * from tablename")

    or

    datatable dt=ds.table["tablename"].select(" select * from tablename") 
```

# javascript - 禁用计时器的单元测试

> ID：14108351
> 
> 赞同：0
> 
> 时间：2013-01-01T06:23:44.580
> 
> 标签：javascript, node.js, unit-testing

我有一个使用计时器定期调用函数的组件。我可以从外部配置该计时器的速率。

对此进行测试基本上是微不足道的：设置计时器，等待一段时间，计算对函数的调用，然后与您的预期进行比较。

现在还有禁用计时器的选项。我怎么能测试呢？

等待时间 x 是不够的，因为计时器可能会在 x+1 处调用。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:16:11.467

不要尝试测试您的语言的功能。如果 js 为您提供方法`setInterval`，则假设它有效。如果您的代码`setInterval`正确调用，您应该测试什么。我对 js 测试不太了解，但如果可以，请模拟它并检查它是否被调用。如果你不能模拟它，那么使用更多的间接级别。为计时器创建自己的包装器 - 没有任何逻辑，只需传递调用。然后，在测试中，您可以检查是否调用了该包装器。我会避免在测试中使用等待/睡眠

# android - 状态栏管理器

> ID：14108352
> 
> 赞同：3
> 
> 时间：2013-01-01T06:24:14.200
> 
> 标签：android

我想在我的应用程序中使用`public static final int DISABLE_NOTIFICATION_ALERTS`声明的内部`StatusBarManager`，下面提到的是我的应用程序的代码摘录

```
Object object = getSystemService("statusbar");

    Class<?> statusBarManager;
    try {
        statusBarManager = Class.forName("android.app.StatusBarManager");
        Method[] method = statusBarManager.getMethods();
        Field fld[] = statusBarManager.getDeclaredFields();
        for (int i = 0; i < fld.length; i++) {
            String s = fld[i].toString();

        }
        Class name = object.getClass();

        Field field = statusBarManager
                .getDeclaredField("DISABLE_NOTIFICATION_ALERTS");

        android.util.Log.i("MainActivity", "value of::: " + field);

        Method disable = statusBarManager.getMethod("disable",
                new Class[] { int.class });

        disable.setAccessible(true);

        field.setAccessible(true);
        disable.invoke(object,new Integer(262144));

    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        Log.i("MAinActivity::", "No Such Class Found Exception");
        e.printStackTrace();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        Log.i("MAinActivity::", " Exception occur");
        e.printStackTrace();
    } 
```

里面`AndroidManifest.xml`

```
<permission
    android:name="android.permission.STATUS_BAR_SERVICE"

    /> 
```

例外如下

```
01-01 11:45:59.504: W/System.err(676): java.lang.reflect.InvocationTargetException
01-01 11:45:59.514: W/System.err(676):  at java.lang.reflect.Method.invokeNative(Native Method)
01-01 11:45:59.514: W/System.err(676):  at java.lang.reflect.Method.invoke(Method.java:511)
01-01 11:45:59.514: W/System.err(676):  at com.example.stopmms.MainActivity.onCreate(MainActivity.java:90)
01-01 11:45:59.514: W/System.err(676):  at android.app.Activity.performCreate(Activity.java:5008)
01-01 11:45:59.514: W/System.err(676):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
01-01 11:45:59.514: W/System.err(676):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
01-01 11:45:59.514: W/System.err(676):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-01 11:45:59.514: W/System.err(676):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-01 11:45:59.514: W/System.err(676):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-01 11:45:59.514: W/System.err(676):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-01 11:45:59.524: W/System.err(676):  at android.os.Looper.loop(Looper.java:137)
01-01 11:45:59.524: W/System.err(676):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-01 11:45:59.524: W/System.err(676):  at java.lang.reflect.Method.invokeNative(Native Method)
01-01 11:45:59.524: W/System.err(676):  at java.lang.reflect.Method.invoke(Method.java:511)
01-01 11:45:59.524: W/System.err(676):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-01 11:45:59.534: W/System.err(676):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-01 11:45:59.534: W/System.err(676):  at dalvik.system.NativeStart.main(Native Method)
01-01 11:45:59.534: W/System.err(676): Caused by: java.lang.SecurityException: StatusBarManagerService: Neither user 10045 nor current process has android.permission.STATUS_BAR.
01-01 11:45:59.544: W/System.err(676):  at android.os.Parcel.readException(Parcel.java:1425)
01-01 11:45:59.544: W/System.err(676):  at android.os.Parcel.readException(Parcel.java:1379)
01-01 11:45:59.544: W/System.err(676):  at com.android.internal.statusbar.IStatusBarService$Stub$Proxy.disable(IStatusBarService.java:324)
01-01 11:45:59.544: W/System.err(676):  at android.app.StatusBarManager.disable(StatusBarManager.java:91)
01-01 11:45:59.544: W/System.err(676):  ... 17 more 
```

它给了我上面提到的异常

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T14:13:27.940

您必须使用以下权限：

`<uses-permission android:name="android.permission.STATUS_BAR" />`

但是，您只能在系统应用程序中使用此权限。因此，如果您想在您的应用程序上获得此权限，您必须将其安装为系统应用程序，这只能在有根设备上完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T20:20:43.287

除了Felipe和Mixaz的答案，还需要用系统签名在设备上签名

```
android:sharedUserId=”android.uid.system” 
```

# python - Python - 如何强制使用工厂方法来实例化对象？

> ID：14108355
> 
> 赞同：3
> 
> 时间：2013-01-01T06:24:41.780
> 
> 标签：python, class-factory

我有一组相关的类，它们都继承自一个基类。我想使用工厂方法来实例化这些类的对象。我想这样做是因为我可以在将对象返回给调用者之前将对象存储在由类名键入的字典中。然后，如果有对特定类的对象的请求，我可以检查一个对象是否已经存在于我的字典中。如果没有，我将实例化它并将其添加到字典中。如果是这样，那么我将从字典中返回现有对象。这实际上会将我模块中的所有类变成单例。

我想这样做是因为它们都继承自的基类对子类中的函数进行了一些自动包装，而且我不希望函数被多次包装，如果两个对象当前会发生这种情况创建相同的类。

我能想到的唯一方法是检查`__init__()`基类方法中的堆栈跟踪，该方法将始终被调用，如果堆栈跟踪未显示创建对象的请求来自工厂功能。

这是一个好主意吗？

**编辑：**这是我的基类的源代码。有人告诉我，我需要找出元类来更优雅地完成这项工作，但这就是我现在所拥有的。所有 Page 对象都使用相同的 Selenium Webdriver 实例，该实例位于顶部导入的驱动程序模块中。这个驱动程序的初始化成本很高——它在第一次创建 LoginPage 时被初始化。初始化后，该`initialize()`方法将返回现有驱动程序而不是创建新驱动程序。这个想法是用户必须从创建一个 LoginPage 开始。最终将定义数十个 Page 类，它们将被单元测试代码用于验证网站的行为是否正确。

```
from driver import get_driver, urlpath, initialize
from settings import urlpaths

class DriverPageMismatchException(Exception):
    pass

class URLVerifyingPage(object):
    # we add logic in __init__() to check the expected urlpath for the page
    # against the urlpath that the driver is showing - we only want the page's
    # methods to be invokable if the driver is actualy at the appropriate page.
    # If the driver shows a different urlpath than the page is supposed to
    # have, the method should throw a DriverPageMismatchException

    def __init__(self):
        self.driver = get_driver()
        self._adjust_methods(self.__class__)

    def _adjust_methods(self, cls):
        for attr, val in cls.__dict__.iteritems():
            if callable(val) and not attr.startswith("_"):
                print "adjusting:"+str(attr)+" - "+str(val)
                setattr(
                    cls,
                    attr,
                    self._add_wrapper_to_confirm_page_matches_driver(val)
                )
        for base in cls.__bases__:
            if base.__name__ == 'URLVerifyingPage': break
            self._adjust_methods(base)

    def _add_wrapper_to_confirm_page_matches_driver(self, page_method):
        def _wrapper(self, *args, **kwargs):
            if urlpath() != urlpaths[self.__class__.__name__]:
                raise DriverPageMismatchException(
                    "path is '"+urlpath()+
                    "' but '"+urlpaths[self.__class.__name__]+"' expected "+
                    "for "+self.__class.__name__
                )
            return page_method(self, *args, **kwargs)
        return _wrapper

class LoginPage(URLVerifyingPage):
    def __init__(self, username=username, password=password, baseurl="http://example.com/"):
        self.username = username
        self.password = password
        self.driver = initialize(baseurl)
        super(LoginPage, self).__init__()

    def login(self):
        driver.find_element_by_id("username").clear()
        driver.find_element_by_id("username").send_keys(self.username)
        driver.find_element_by_id("password").clear()
        driver.find_element_by_id("password").send_keys(self.password)
        driver.find_element_by_id("login_button").click()
        return HomePage()

class HomePage(URLVerifyingPage):
    def some_method(self):
        ...
        return SomePage()

    def many_more_methods(self):
        ...
        return ManyMorePages() 
```

如果一个页面被实例化了几次，这没什么大不了的——这些方法只会被包装几次，并且会发生一些不必要的检查，但一切仍然有效。但是如果一个页面被实例化几十、几百或几万次，那就不好了。我可以在每个页面的类定义中放置一个标志并检查方法是否已经被包装，但我喜欢保持类定义纯净和干净并将所有 hocus-pocus 推入深角落的想法我的系统没有人可以看到它，它只是工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T06:42:14.990

在 Python 中，几乎不值得尝试“强制”任何东西。无论你想出什么，有人可以通过猴子修补你的课程、复制和编辑源代码、玩弄字节码等来绕过它。

因此，只需编写您的工厂，并将其记录为获取类实例的正确方法，并期望任何使用您的类编写代码的人都能理解 TOOWTDI，除非她真的知道自己在做什么并且愿意，否则不要违反它找出并处理后果。

如果您只是想防止事故发生，而不是故意“误用”，那就另当别论了。事实上，这只是标准的合同设计：检查不变量。当然此时，`SillyBaseClass`已经搞砸了，再修也来不及了，你能做的只有`assert`, `raise`, `log`, 或者其他合适的。但这就是您想要的：这是应用程序中的逻辑错误，唯一要做的就是让程序员修复它，这`assert`可能正是您想要的。

所以：

```
class SillyBaseClass:
    singletons = {}

class Foo(SillyBaseClass):
    def __init__(self):
        assert self.__class__ not in SillyBaseClass.singletons

def get_foo():
    if Foo not in SillyBaseClass.singletons:
        SillyBaseClass.singletons[Foo] = Foo()
    return SillyBaseClass.singletons[Foo] 
```

如果你真的想阻止事情走到这一步，你*可以*在方法中更早地检查不变量`__new__`，但除非“`SillyBaseClass`搞砸了”等同于“发射核武器”，否则何必呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T06:32:46.320

听起来您想提供一个`__new__`实现：类似于：

```
class MySingledtonBase(object):
    instance_cache = {}
    def __new__(cls, arg1, arg2):
        if cls in MySingletonBase.instance_cache:
            return MySingletonBase.instance_cache[cls]
        self = super(MySingletonBase, cls).__new__(arg1, arg2)
        MySingletonBase.instance_cache[cls] = self
        return self 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T09:00:28.563

与其添加复杂的代码来在运行时捕获错误，我会首先尝试使用约定来指导模块的用户自己做正确的事情。

给你的类“私有”名称（以下划线为前缀），给它们命名暗示它们不应该被实例化（例如_Internal ...）并使你的工厂函数“公共”。

也就是说，像这样：

```
class _InternalSubClassOne(_BaseClass):
    ...

class _InternalSubClassTwo(_BaseClass):
    ...

# An example factory function.
def new_object(arg):
    return _InternalSubClassOne() if arg == 'one' else _InternalSubClassTwo() 
```

我还会为每个类添加文档字符串或注释，例如“不要手动实例化这个类，使用工厂方法`new_object`。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-29T09:05:17.967

您也可以在工厂方法中嵌套类，如下所述： [https ://python-3-patterns-idioms-test.readthedocs.io/en/latest/Factory.html#preventing-direct-creation](https://python-3-patterns-idioms-test.readthedocs.io/en/latest/Factory.html#preventing-direct-creation)

来自上述来源的工作示例：

```
# Factory/shapefact1/NestedShapeFactory.py
import random

class Shape(object):
    types = []

def factory(type):
    class Circle(Shape):
        def draw(self): print("Circle.draw")
        def erase(self): print("Circle.erase")

    class Square(Shape):
        def draw(self): print("Square.draw")
        def erase(self): print("Square.erase")

    if type == "Circle": return Circle()
    if type == "Square": return Square()
    assert 0, "Bad shape creation: " + type

def shapeNameGen(n):
    for i in range(n):
        yield factory(random.choice(["Circle", "Square"]))

# Circle() # Not defined

for shape in shapeNameGen(7):
    shape.draw()
    shape.erase() 
```

我不喜欢这个解决方案，只是想将其添加为一个选项。

# javascript - HTML5数字时钟动画

> ID：14108359
> 
> 赞同：0
> 
> 时间：2013-01-01T06:25:16.680
> 
> 标签：javascript, html, html5-canvas

我是 HTML5 和网络编程的新手。我已经掌握了一些基础知识，并开始研究基于画布的动画。但是，在尝试创建基于数字时钟的动画时，我没有成功。该代码在 JSLint 上正确验证，并且可以正常工作，但没有显示任何内容。

这是来源[http://jsfiddle.net/kuydB/](http://jsfiddle.net/kuydB/)

这是 JavaScript 源代码：

```
var filterStrength = 20;
var frameTime = 0, lastLoop = new Date(), thisLoop;
var canvas, ctx;

function startWatch() {
    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
    var currentDateTime = new Date();

    var hours = currentDateTime.getHours();
    if (hours < 10) {
        hours = "0" + hours;
    }

    var minutes = currentDateTime.getMinutes();
    if (minutes < 10) {
        minutes = "0" + minutes;
    }

    var seconds = currentDateTime.getSeconds();
    if (seconds < 10) {
        seconds = "0" + seconds;
    }

    var timeString = hours + ':' + minutes + ':' + seconds;

    ctx.font = 'bold ' + canvas.width / 4 + 'px sans-serif';

    var dim = ctx.measureText(timeString);

    var y = (canvas.height - 30) / 2;
    var x = (canvas.width - dim.width) / 2;

    ctx.fillText(timeString, x, y);   

      var thisFrameTime = (thisLoop=new Date()) - lastLoop;
      frameTime+= (thisFrameTime - frameTime) / filterStrength;
      lastLoop = thisLoop;

}

$(document).ready(function() {
    canvas = $('#canvas')[0];
    ctx = canvas.getContext('2d');
    setIntervalTimer(startWatch,1000);
    var fpsOut = document.getElementById('fps');
    setInterval(function(){
      fpsOut.innerHTML = (1000/frameTime).toFixed(1) + " fps";
    },1000);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T06:33:28.010

[工作小提琴](http://jsfiddle.net/kuydB/1/)

```
var filterStrength = 20;
var frameTime = 0, lastLoop = new Date(), thisLoop;
var canvas, ctx;

function startWatch() {
    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
    var currentDateTime = new Date();

    var hours = currentDateTime.getHours();
    if (hours < 10) {
        hours = "0" + hours;
    }

    var minutes = currentDateTime.getMinutes();
    if (minutes < 10) {
        minutes = "0" + minutes;
    }

    var seconds = currentDateTime.getSeconds();
    if (seconds < 10) {
        seconds = "0" + seconds;
    }

    var timeString = hours + ':' + minutes + ':' + seconds;

    ctx.font = 'bold ' + canvas.width / 4 + 'px sans-serif';

    var dim = ctx.measureText(timeString);

    var y = (canvas.height - 30) / 2;
    var x = (canvas.width - dim.width) / 2;

    ctx.fillText(timeString, x, y);   

      var thisFrameTime = (thisLoop=new Date()) - lastLoop;
      frameTime+= (thisFrameTime - frameTime) / filterStrength;
      lastLoop = thisLoop;

}

$(document).ready(function() {
    canvas = $('#canvas')[0];
    ctx = canvas.getContext('2d');
    setInterval(startWatch,1000); //here you had a syntax error you typed setIntervalTimer instead of setInterval
    var fpsOut = document.getElementById('fps');
    setInterval(function(){
      fpsOut.innerHTML = (1000/frameTime).toFixed(1) + " fps";
    }, 1000);
});
​ 
```

# android - 我在哪里可以得到 logcat

> ID：14108360
> 
> 赞同：-5
> 
> 时间：2013-01-01T06:25:15.923
> 
> 标签：android, logcat

几周前我下载了组合的 Eclipse/Android SDK。我真的需要日志记录功能，但令我失望的是 System.out.println() 没有写入控制台。在研究了这个问题之后，我读到我需要使用 LogCat 来阅读我的日志。不幸的是，我在我的 SDK 或硬盘上的其他任何地方都找不到 LogCat。我搜索了互联网并没有找到它。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T06:38:18.260

两种打开 logcat 窗口的方法..

**1）第一个快捷方式**

![这是打开 Logcat 窗口的快捷方式的屏幕截图](../Images/4942c020cf05d77381861069d264f18a.png)

**2)通过菜单**

```
window => Show View => select other... => search logcat 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T06:28:25.787

在 Eclipse 中，您可以在此处找到 Logcat

`Eclipse->Window->showview->Logcat`

如果您在此处找不到 logcat 选项，请从`other`选项中选择它

对于命令行

转到 android-sdk/平台工具/

`adb logcat`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T06:28:39.550

在日食

```
window-->showview-->logcat 
```

如果 logcat 不直接存在，则

```
window-->showview-->others(then select logcaqt there) 
```

HTH :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T06:29:04.100

> 不幸的是，我在我的 SDK 或硬盘上的其他任何地方都找不到 LogCat。

=> 仅供参考，Logcat 不是平台工具，而是 ADB 的一部分。

下载 ADT Bundle Windows 后，您可以在 platform-tools 文件夹中找到 ADB：

> \adt-bundle-windows\sdk\platform-tools

是的，如果您想在控制台上查看 Logcat 输出，请**`adb logcat`**在具有上述路径的控制台中输入。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-01T06:43:54.467

你可以在这里在 Eclipse 中找到 Logcat：

`Window -> Show View -> Other -> Android -> Logcat`

# ios - 如何在脸书上发帖？

> ID：14108361
> 
> 赞同：0
> 
> 时间：2013-01-01T06:25:22.350
> 
> 标签：ios, facebook, post, facebook-login

我正在开发需要登录社交网络的 ios 应用程序。我在应用程序中配置了 facebook 我需要在我的应用程序注释中使用 facebook 登录的发布方法我已经找到了通过 iphone 设置通过登录来发布的方法。但我需要通过我的应用程序的 facebook 发布。

不像这样，它使用的是 iphone 设置，我需要通过我的应用程序访问 facebook 并通过该登录名发布 [http://www.gottabemobile.com/2012/10/03/how-to-connect-facebook-to-the-ios -6-通知中心/](http://www.gottabemobile.com/2012/10/03/how-to-connect-facebook-to-the-ios-6-notification-center/)

# macos - 是否值得在只读文档类中对 autosavesInPlace 说“是”？

> ID：14108363
> 
> 赞同：2
> 
> 时间：2013-01-01T06:25:42.683
> 
> 标签：macos, cocoa, osx-lion, document

我正在编写一个仅作为查看器的应用程序——不创建、不编辑、不保存。

显然，不会有自动保存，但是还有什么其他东西会`YES`从`autosavesInPlace`世界的变化中返回，这将对仅查看器的应用程序产生影响？

或者我可以`autosavesInPlace`完全删除预制的实现而不丢失任何东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T11:19:21.093

当我阅读文档时，您需要 iCloud：

“启用自动保存。要让您的应用加入 iCloud，您必须启用自动保存。”
“在 OS X 中，通过覆盖 NSDocument 类方法 autosavesInPlace 来启用自动保存以返回 YES。”

因为：
“您的应用程序文档的更改可以随时从 iCloud 到达，因此您的应用程序必须准备好处理它们”

来源：http : [//developer.apple.com/library/Mac/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/DesigningForDocumentsIniCloud.html](http://developer.apple.com/library/Mac/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/DesigningForDocumentsIniCloud.html)

* * *

即使您不打算使用 iCloud，但您使用的是 10.8，据我所知，它也是必需的

# c - 解释通过 ssh 发送的命令

> ID：14108367
> 
> 赞同：1
> 
> 时间：2013-01-01T06:26:02.930
> 
> 标签：c, ssh

从 PC 说，SSH 客户端将发送命令（例如我的程序的自定义命令，例如（“显示设备列表”））。在我的 Linux 端，我想要一个程序来接收通过 SSH 发送的这些命令并执行它们。

我正在尝试编写一个`c`在 linux 端运行的程序来解释发送的自定义命令并根据我的要求处理它们。关于我将如何实现这一目标的任何建议？

**更新：** 这里有 2 个程序。第一个在 PC1 上运行的程序，它提供了一个命令行界面，用户可以通过该界面发出命令。第二个程序位于 Linux 端（PC2），它必须接收这些命令并对其进行处理。现在我正在考虑如何获取这些命令的第二个程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T06:34:37.577

您至少可以通过两种不同的方式执行此操作：

1.  通过 ssh 执行 C 程序（比如客户端）并将命令作为参数发送。客户端解析参数并做任何事情。您需要为每个命令运行客户端。

2.  您的 C 程序从标准输入读取命令，因此您通过 ssh 执行 C 程序一次，并将您的命令通过管道传输到 ssh。

如果您的命令不是那么频繁，那么执行第一个。您甚至可以在后台执行 ssh 实例并有效地并行运行客户端命令。如果您按顺序有很多命令，则执行第二种方式。并行运行它们会更难，解析命令也相对更难，因为第一种方式会给你每个参数作为不同的参数。使用第二种方法，处理频繁的命令将更加高效和快捷，因为您不会为每个命令建立连接并分叉一个进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T11:44:59.670

这实际上是关于与另一个程序进行通信，与 ssh 几乎没有关系 - 因为 ssh 只是“管道” - 你需要做的是打开两个管道（一个用于标准输入，一个用于标准输出）到你的应用程序 [哪个恰好是 ssh]，并写入标准输入管道，并从标准输出管道读取。如果您可以使用常规（本地）程序执行此操作，那么您需要做的就是将“ssh”添加到您正在执行的行中，然后您就完成了。

如果您不明白这意味着什么，请查找 exec、popen、管道等。

您显然还需要另一端的程序从其标准输入读取并写入其标准输出。但这是正常的命令行编程，所以我不认为这是一个大问题。

# asp.net - Web 服务和类对象

> ID：14108368
> 
> 赞同：0
> 
> 时间：2013-01-01T06:26:05.820
> 
> 标签：asp.net, web-services, ado.net, business-logic-layer

我只是想知道如何将 Web 服务与类对象一起使用。我的 BOL 中有类对象，例如客户、任务、项目等。我使用 ADO.net 连接到数据层我刚刚开始在我的项目我添加了名为“WebServices”的文件夹，并使用 BOL 上的方法获取数据并将数据提取到 Web 服务中的 Json 对象。我只是想知道我应该将 WebServices 直接连接到数据库还是使用 BAL 来获取数据，然后再将其获取到 Json 。

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using Compudata_ProjectManager.CodeFile.BOL;
using System.Web.Script.Services;

namespace Compudata_ProjectManager.WebServices
{
    /// <summary>
    /// Summary description for CustomerList
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]

    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    [System.Web.Script.Services.ScriptService]
    public class CustomerList : System.Web.Services.WebService
    {

            [WebMethod]
            [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
            public List<Customer> FetchCustomersList(string name)
            {
                var cust = new Customer();
                var fetchNames = cust.GetAllCustomerNames().Where(n => n.FirstName.ToLower().StartsWith(name.ToLower()));
                return fetchNames.ToList();
            }

            [WebMethod]
            [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
            public List<Location> FetchCustomerAddressList(string name)
            {
                var Addresses = new Location();
                var fetchAddress = Location.GetAllAddress();
                return fetchAddress.ToList();
            }

        } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:12:00.010

是的，您可以直接将数据库与您的 Web 服务连接起来。但这不是正确的做法。

如果您将直接连接到您的数据库，可能会增加您的代码量并降低性能。代码的质量也会降低。

您应该使用 BAL 来分离业务逻辑，并且您的代码将整洁干净。

以下是我们通常使用的一些很好的例子。 [使用 JQuery ASP.NET 应用程序使用 Web 服务](http://www.codeproject.com/Articles/66432/Consuming-Webservice-using-JQuery-ASP-NET-Applicat)

[使用 JQuery AJAX 的 Web 服务](http://www.ezzylearning.com/tutorial.aspx?tid=5872924)

**更新**

虽然如果您想将 Web 服务直接连接到数据库，这里是链接： [从 Web 服务调用数据库](https://stackoverflow.com/questions/12088693/how-to-call-a-asp-net-webservice-in-android-using-phonegap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T07:32:29.857

是的，理想情况下使用 BL 来使用您的 Web 服务。它将分离您的所有业务逻辑，并且您的代码也将是可扩展的。

# java - 需要帮助来删除我的 java 图形代码中的异常

> ID：14108373
> 
> 赞同：2
> 
> 时间：2013-01-01T06:27:08.343
> 
> 标签：java, swing, graphics2d

我正在 Swing 中开发一个应用程序，它有 5 个选项卡，对图像进行以下 5 次操作：无操作、颜色转换、仿射变换、卷积和查找。

这是代码：

```
import java.awt.color.ColorSpace;
import java.awt.geom.AffineTransform;
import java.awt.image.AffineTransformOp;
import java.awt.image.BufferedImage;
import java.awt.image.ColorConvertOp;
import java.awt.image.ConvolveOp;
import java.awt.image.Kernel;
import java.awt.image.LookupOp;
import java.awt.image.LookupTable;
import java.awt.image.ShortLookupTable;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTabbedPane;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public class ImageProcessing extends JFrame{
BufferedImage source;
public static void main(String args[])
{
    try {
         UIManager.setLookAndFeel("javax.swing.plaf.nimbus.NimbusLookAndFeel");
    } catch (Exception e1){e1.printStackTrace();}
    SwingUtilities.invokeLater(new Runnable(){public void run(){new ImageProcessing();}});
}

public ImageProcessing() {
    // TODO Auto-generated constructor stub
    super("Image Processing");
    setSize(600,400);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    try
    {
        source=ImageIO.read(new File("src/abc.jpg"));
    }catch(IOException e){System.out.println("Exception Here :"+e);}

    JTabbedPane jtp=new JTabbedPane();
    buildNoOpTab(jtp);
    buildAffineTransformOpTab(jtp);
    buildColorConvertOpTab(jtp);
    buildConvolveOpTab(jtp);
    buildLookUpOpTab(jtp);
    //buildRescaleOpTab(jtp);

    add(jtp);
    setVisible(true);

}
private void buildNoOpTab(JTabbedPane jtp)
{
    jtp.add("No Op",new JLabel(new ImageIcon(source)));
}
private void buildAffineTransformOpTab(JTabbedPane jtp)
{
    BufferedImage dst;
    AffineTransform transform=AffineTransform.getScaleInstance(0.5, 0.5);
    AffineTransformOp op=new AffineTransformOp(transform, AffineTransformOp.TYPE_BILINEAR);
    dst=op.filter(source, null);
    jtp.add("AffineTransform",new JLabel(new ImageIcon(dst)));
}
private void buildColorConvertOpTab(JTabbedPane jtp)
{
    BufferedImage dst = null;
    ColorSpace clr=ColorSpace.getInstance(ColorSpace.CS_GRAY);
    ColorConvertOp op=new ColorConvertOp(clr,null);
    dst=op.filter(source,dst);
    jtp.add("Color Convert",new JLabel(new ImageIcon(dst)));
}
 private void buildConvolveOpTab(JTabbedPane jtp) {
        BufferedImage dst = null;
        float sharpen[] = new float[] {
             0.0f, -1.0f,  0.0f,
            -1.0f,  5.0f, -1.0f,
             0.0f, -1.0f,  0.0f
        };
        Kernel kernel = new Kernel(3, 3, sharpen);
        ConvolveOp op = new ConvolveOp(kernel);
        dst = op.filter(source, null);

        jtp.add("Convolve", new JLabel(new ImageIcon(dst)));
    }
 private void buildLookUpOpTab(JTabbedPane jtp)
 {
     BufferedImage dst=null;
     short[] data=new short[256];
     for(int i=0;i<256;i++)
         data[i]=(short)(255-i);
     LookupTable lkp=new ShortLookupTable(0,data);
     LookupOp op=new LookupOp(lkp,null);
     dst=op.filter(source, null);
     jtp.add("Look Up",new JLabel(new ImageIcon(dst)));
}

} 
```

buildLookUpOpTab 中存在一些问题，因为删除此方法应用程序可以正常工作。

这是我得到的例外：

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException:
  Number of color/alpha components should be 3 but length of bits array is 1
  at java.awt.image.ColorModel.<init>(ColorModel.java:336)
  at java.awt.image.ComponentColorModel.<init>(ComponentColorModel.java:273)
  at java.awt.image.LookupOp.createCompatibleDestImage(LookupOp.java:413)
  at java.awt.image.LookupOp.filter(LookupOp.java:153)
  at ImageProcessing.buildLookUpOpTab(ImageProcessing.java:108)
  at ImageProcessing.<init>(ImageProcessing.java:49)
  at ImageProcessing$1.run(ImageProcessing.java:30)
  at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
  at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:701)
  at java.awt.EventQueue.access$000(EventQueue.java:102)
  at java.awt.EventQueue$3.run(EventQueue.java:662)
  at java.awt.EventQueue$3.run(EventQueue.java:660)
  at java.security.AccessController.doPrivileged(Native Method)
  at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
  at java.awt.EventQueue.dispatchEvent(EventQueue.java:671)
  at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
  at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
  at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
  at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
  at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
  at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

谁能告诉我这种方法有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T06:55:44.930

该`LookupOp.filter`方法说：

*对 BufferedImage 执行查找操作。如果源图像中的颜色模型与目标图像中的颜色模型不同，则将在目标图像中转换像素。如果目标图像为空，将使用适当的 ColorModel 创建一个 BufferedImage。**如果 LookupTable 中的数组数量不符合上述类注释中规定的限制，或者如果源图像具有 IndexColorModel，则可能会引发 IllegalArgumentException。***

由于您正在过滤使用`BufferedImage`创建`ImageIO.read`的图像，因此图像将具有的颜色模型肯定不会是 IndexColorModel，因为`JPEGImageReader`（实际上是从文件创建 BufferdImage）不支持`IndexColorModel`- 在过去，JPEG 使用`DirectColorModel`

查看此线程上有关如何读取 JPEG 文件并使用不同颜色模型的答案： [无法使用 ImageIO.read(File file) 读取 JPEG 图像](https://stackoverflow.com/questions/2408613/problem-reading-jpeg-image-using-imageio-readfile-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T07:14:43.943

在使用任何滤镜之前，您需要从图像中删除 Alpha 通道。要使您的代码正常工作，请更改：

```
try
    {
        source=ImageIO.read(new File("src/abc.jpg"));
    } catch(IOException e){System.out.println("Exception Here :"+e);} 
```

有了这个：

```
 try
    {
        BufferedImage src = ImageIO.read(new File("abc.jpg"));
        int w = src.getWidth();
        int h = src.getHeight();
        source = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);
        Raster raster = src.getRaster().createChild(0, 0, w, h, 0, 0, 
            new int[] {0, 1, 2});
        source.setData(raster);
    }catch(IOException e){System.out.println("Exception Here :"+e);} 
```

上面的代码在`RGB`mode 中创建一个新的缓冲图像，并将`RGB`原始图像的数据设置为新的缓冲图像，忽略这些`alpha`值。但是，如果您的原始图像包含完全透明的点，那么它将成为新缓冲图像中的黑点。

# c++ - 条件似乎不起作用。(while (dAmount != (2*dbAmount))) 另外，第一次计算不正确 oO

> ID：14108374
> 
> 赞同：0
> 
> 时间：2013-01-01T06:27:22.183
> 
> 标签：c++, while-loop, conditional-statements

我和我的朋友正在学习 C++，但我们似乎无法让这个程序按应有的方式运行。所以基本上，我们现在正在尝试的是一个任务，它要求我们编写一个程序，其中向用户询问两个变量。其中一个变量是税收百分比（以 1.X 的形式），另一个是任何正的实数。现在我们需要知道的是，为什么我们的情况没有提示？我们非常感谢您对我们的问题的回答。这是代码：

```
 #include <iostream>
    #include <iomanip>
    #include <ctype.h>
    #include <math.h>
    #include <cstdlib>
    using namespace std;
    int main()
    {
        double dTax;
        double dbAmount;
        double dAmount;
        cout << "Tax? (In the form of 1.05)" << endl;
        cin >> dTax;
        cout << "Amount?" << endl;
        cin >> dbAmount;
        cout << dbAmount << " is the amount without taxes incalculated." << endl;
        dAmount = (dbAmount*dTax);
        while (dAmount != (2*dbAmount))
        {
            dAmount = (dAmount*dTax);
            cout << dAmount << " is the next amount, with taxes incalculated." << endl;
            break;
        }
        cin.get();
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:30:36.370

在我写这篇文章时，代码没有`main`功能。

你需要一个`main`函数，比如

```
int main()
{
    // my main program statements
} 
```

有点过于简单了，这就是程序执行的开始。

# facebook - 如何阻止 facebook sharer.php 忽略目标网址中的数字？

> ID：14108377
> 
> 赞同：1
> 
> 时间：2013-01-01T06:27:57.160
> 
> 标签：facebook, url, facebook-graph-api

这是我希望用户能够分享的网址：http: [//dealsfortherich.com/product/6379316](http://dealsfortherich.com/product/6379316)

所以我的应用程序（PHP）构造了这个 URL：

[https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fdealsfortherich.com%2Fproduct%2F6379316](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fdealsfortherich.com%2Fproduct%2F6379316)

如果您查看该链接，您将看到产品编号已被截断。Sharer.php 忽略斜杠后的数字 (%2F) 如果我将该数字设为字母数字，它可以工作：

[https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fdealsfortherich.com%2Fproduct%2F6379316X](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fdealsfortherich.com%2Fproduct%2F6379316X)

或 [https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fdealsfortherich.com%2Fproduct%2FX6379316](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fdealsfortherich.com%2Fproduct%2FX6379316) 或 [https://www.facebook.com/sharer/sharer.php?u =http%3A%2F%2Fdealsfortherich.com%2Fproduct%2F637X9316](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fdealsfortherich.com%2Fproduct%2F637X9316)

添加尾部斜杠没有帮助： [https ://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fdealsfortherich.com%2Fproduct%2F6379316%2F](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fdealsfortherich.com%2Fproduct%2F6379316%2F)

显然，我可以在我的应用程序中编写一个条件来处理如下网址： [http](http://dealsfortherich.com/product/6379316X) ://dealsfortherich.com/product/6379316X 但是就搜索引擎而言，我已经复制了内容。

我应该放弃而不使用sharer.php吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T09:27:06.647

弄清楚了！问题是facebook没有抓取页面： [http ://dealsfortherich.com/product/6379316](http://dealsfortherich.com/product/6379316)

[facebook 对象调试器](https://developers.facebook.com/tools/debug/og/object?q=http://dealsfortherich.com/product/6379316/)显示刮板正在看到一个规范名称： [http ://dealsfortherich.com/product/](http://dealsfortherich.com/product/)

即使我发布了以下内容，这种情况仍在发生：

```
remove_action('wp_head', 'rel_canonical'); 
```

在调用 wordpress 的 get_header()（它又调用 wp_head()）之前，它应该删除了错误的规范链接。

问题是过滤器 fb_meta_tags（来自插件）在我认为我设置的 OG 标签之前添加了一堆 OG 标签！果然，设置的标签之一是：

```
<meta property="http://ogp.me/ns#url" content="http://dealsfortherich.com/product/" /> 
```

这就是我在调用 get_header() 之前在我的 php 中解决它的方法：

```
add_filter( 'fb_meta_tags', 'remove_og_tags' );
function remove_og_tags( $meta_tags )
{
  $meta_tags['http://ogp.me/ns/fb#app_id'] = null;
  $meta_tags['http://ogp.me/ns#type'] = null;
  $meta_tags['http://ogp.me/ns#title'] = null;
  $meta_tags['http://ogp.me/ns#image'] = null;
  $meta_tags['http://ogp.me/ns#description'] = null;
  $meta_tags['http://ogp.me/ns#url'] = null;
  return $meta_tags;
} 
```

这可以防止在我添加我的之前添加错误的 OG 标签：

```
<link rel="canonical" href="<?php echo $page_path; ?>"/>
<meta property="fb:app_id" content="xxxxxxxxxxxxx" /> 
<meta property="og:type" content="product" /> 
<meta property="og:title" content="<?php echo $the_title; ?>" /> 
<meta property="og:image" content="<?php echo $image_url; ?>" /> 
<meta property="og:description" content="<?php echo $tweet_text.$the_title; ?>" /> 
<meta property="http://ogp.me/ns#url" content="<?php echo $page_path; ?>"  /> 
```

现在一切都很顺利。

# java - 如何在eclipse中的视图中修复布局位置

> ID：14108384
> 
> 赞同：1
> 
> 时间：2013-01-01T06:28:34.787
> 
> 标签：java, eclipse, eclipse-plugin, alignment

我在 Git repo 页面中添加了一个过滤器并修改了类`RepositoryView`。我刚刚提到了这一点，以便您可以在需要时在线找到此代码。我的问题更像是一个通用的对齐问题。

在我添加了这个新过滤器之后，这就是 git repo 视图在此更改后加载时的样子 ![负载](../Images/67a2e67e73c3757f3f668970d362b132.png)

最大化视图后，它看起来像这样。这里对齐出错了。过滤器工具栏位于中心。

![最大化](../Images/7689051234e8c7dda82bec2b045664e4.png)

之后，如果我将其最小化，过滤器工具栏就会从视图中消失。 ![最小化](../Images/136ee80bc4953dae460a4bf9ba9de47b.png)

代码已更改

```
public void createPartControl(Composite aParent) {
        Composite displayArea = new Composite(aParent, SWT.NONE);
        displayArea.setLayout(new GridLayout());

        displayArea.setLayoutData(new GridData(SWT.FILL,6));

        final Composite temp = new Composite(displayArea, SWT.FILL);//XXX

        layout = new StackLayout();
        temp.setLayout(layout);
        createEmptyArea(temp);

        super.createPartControl(temp);

        IWorkbenchWindow w = PlatformUI.getWorkbench()
                .getActiveWorkbenchWindow();
        ICommandService csrv = (ICommandService) w
                .getService(ICommandService.class);
        Command command = csrv
                .getCommand("org.eclipse.egit.ui.RepositoriesLinkWithSelection"); //$NON-NLS-1$
        reactOnSelection = (Boolean) command.getState(
                RegistryToggleState.STATE_ID).getValue();

        GridDataFactory.fillDefaults().grab(true, true).applyTo(temp);//XXX
//      GridDataFactory.fillDefaults().grab(true, true).applyTo(displayArea);//XXX
        filterToolbar = new FilterToolbar(this, displayArea);
        IWorkbenchSiteProgressService service = (IWorkbenchSiteProgressService) getSite()
                .getService(IWorkbenchSiteProgressService.class);
        if (service != null) {
            service.showBusyForFamily(JobFamilies.REPO_VIEW_REFRESH);
            service.showBusyForFamily(JobFamilies.CLONE);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:03:52.960

正如@WaqasIlyas 所提到的，我`GridData`今天大部分时间都在尝试参数，并且碰巧按照你所说的那样工作

```
public void createPartControl(Composite aParent) {
        Composite displayArea = new Composite(aParent, SWT.FILL);
        displayArea.setLayout(new GridLayout());
        displayArea.setLayoutData(new GridData(GridData.FILL,GridData.FILL, true, true));
        Composite historyComposite = new Composite(displayArea, SWT.NONE);

        layout = new StackLayout();
        historyComposite.setLayout(layout);
        historyComposite.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_FILL,GridData.VERTICAL_ALIGN_FILL, true, true));
        createEmptyArea(historyComposite);

        super.createPartControl(historyComposite);

        IWorkbenchWindow w = PlatformUI.getWorkbench()
                .getActiveWorkbenchWindow();
        ICommandService csrv = (ICommandService) w
                .getService(ICommandService.class);
        Command command = csrv
                .getCommand("org.eclipse.egit.ui.RepositoriesLinkWithSelection"); //$NON-NLS-1$
        reactOnSelection = (Boolean) command.getState(
                RegistryToggleState.STATE_ID).getValue();
//XXX added this code and changed the position of some statement to make it work
        GridDataFactory.fillDefaults().grab(true, true).applyTo(historyComposite);
        filterToolbar = new FilterToolbar(this, displayArea);
        ((GridData) filterToolbar.getLayoutData()).verticalAlignment = SWT.END;
        Point computeSize = filterToolbar.computeSize(SWT.DEFAULT, SWT.DEFAULT);
        ((GridData) filterToolbar.getLayoutData()).minimumWidth = computeSize.x;
        ((GridData) filterToolbar.getLayoutData()).minimumHeight = computeSize.y;
        GridDataFactory.fillDefaults().grab(true, true).align(GridData.FILL, GridData.FILL).applyTo(displayArea);
//xxx code change ends
        IWorkbenchSiteProgressService service = (IWorkbenchSiteProgressService) getSite()
                .getService(IWorkbenchSiteProgressService.class);
        if (service != null) {
            service.showBusyForFamily(JobFamilies.REPO_VIEW_REFRESH);
            service.showBusyForFamily(JobFamilies.CLONE);
        }
    } 
```

# routing - ember 中嵌套路由的“匹配”语法

> ID：14108388
> 
> 赞同：0
> 
> 时间：2013-01-01T06:28:56.817
> 
> 标签：routing, ember.js, ember-router

我的问题涉及不久前集成到主 ember.js 分支中的新路由机制。

在以下代码块中：

```
App.Router.map(function(match) {
  match("/comments").to("commentsIndex");
}); 
```

ember 路由器现在可以识别评论 url，并通过“to”方法的第一个参数（在本例中为“commentsIndex”）将路由处理程序映射到 commentsIndexRoute。从这里您可以选择使用视图/模板/控制器的默认映射，或者覆盖它们。

但是在以下嵌套路由中：

```
App.Router.map(function(match) {
  match("/posts").to("posts", function(match) {
    match("/").to("postsIndex");
    match("/:post_id").to("postShow");
  });
}); 
```

我现在不确定在第一场比赛中“to”方法的第一个参数的作用是什么。换句话说，我不确定下面大写参数的作用：

```
 match("/posts").to("POSTS", function(match) { 
```

该参数究竟做了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:10:48.410

现在看来，这是嵌入“视图”的推荐方式。

从新的 Ember 文档中：

> 访问**/posts**略有不同。它将首先将帖子模板呈现到应用程序模板的出口中。然后，它将 postIndex 模板渲染到帖子模板的出口。
> 
> 最后，访问 /posts/new 将首先渲染帖子模板，然后将 newPost 模板渲染到它的出口。

[http://emberjs.com/guides/routing/defining-your-routes/](http://emberjs.com/guides/routing/defining-your-routes/)

因此， .to("POSTS") 设置上下文以加载以下视图。

# php - 如何在php中计算两个向量代码之间的角度

> ID：14108393
> 
> 赞同：3
> 
> 时间：2013-01-01T06:29:08.767
> 
> 标签：php, math, linear-algebra

我想找到向量之间的角度

> v1 = [-1,-2]

和

> v2 = [90,-5]

[这里给出了如何计算角度的解决方案（数学）](https://math.stackexchange.com/questions/227014/find-the-angle-between-two-vectors?rq=1)

在 php 代码中需要计算两个向量之间的角度 `[-1,-2] and [90,-5]`。需要php代码。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T06:45:35.370

```
function norm($vec)
{
    $norm = 0;
    $components = count($vec);

    for ($i = 0; $i < $components; $i++)
        $norm += $vec[$i] * $vec[$i];

    return sqrt($norm);
}

function dot($vec1, $vec2)
{
    $prod = 0;
    $components = count($vec1);

    for ($i = 0; $i < $components; $i++)
        $prod += ($vec1[$i] * $vec2[$i]);

    return $prod;
} 
```

并计算实际角度：

```
$v1 = array(-1, -2);
$v2 = array(90, -5);

$ang = acos(dot($v1, $v2) / (norm($v1) * norm($v2)));

echo $ang; // angle in radians
> 1.97894543055 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-01T07:38:40.790

您可以使用`atan2($y,$x)`php 中的函数来执行此操作。以弧度为单位找到角度。

```
<?php
$angle = rad2deg(atan2($y2-$y1,$x2-$x1));
//$angle is in degrees
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-01T07:36:45.470

两个向量的角度由下式计算

```
 v1X * v2X + v1Y * v2Y
acos(--------------------------) = angle between two vectors.
           |v1| * |v2| 
```

您可以直接在 PHP 中使用此公式。

笔记：

`|v1|`和`|v2|`是向量的长度，是使用毕达哥拉斯定理计算的。

```
|v1| = sqrt(v1X * v1X + v1Y * v1Y)
|v2| = sqrt(v2X * v2X + v2Y * v2Y) 
```

# json - ActionFilter - 在返回 Json 结果后调用 OnActionExecuted

> ID：14108394
> 
> 赞同：0
> 
> 时间：2013-01-01T06:29:09.033
> 
> 标签：json, action-filter

我正在另一个框架中创建一个插件，所以我无法更改控制器。我有一个 Actionfilter 对 OnActionExecuted 中的模型进行更改。当控制器返回视图时，这可以正常工作。但是，如果页面使用 AJAX 并且控制器使用 RenderPartialViewToString 的实现返回 JSON 结果，则结果（模型）会在 OnActionExecuted 之前返回给客户端。

我已经在调试器中逐步完成了代码。这是返回视图时的顺序：

```
 OnActionExecuting

 controller's ActionResult SomeMethod()
   return View(...

 OnActionExecuted

 SomeView.cshtml 
```

这是使用 AJAX 时的顺序：

```
 OnActionExecuting

 controller ActionResult SomeMethod()
   return Json(...  html = this.RenderPartialViewToString("...", myModel)

 SomeView.cshtml

 OnActionExecuted 
```

关于如何在模型以局部视图返回之前修改模型的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T07:12:24.177

这是由于`RenderPartialViewToString("...", myModel)`。在从操作返回结果之前直接渲染它。`OnActionExecuted`在控制器操作返回后调用方法。

当您`return View(...)`不渲染此视图时。它是返回模型并说这个模型到当前视图。视图的渲染将在稍后进行。

# php - 在我删除 index.php 后，FCKEditor 在 codeigniter 中消失了

> ID：14108399
> 
> 赞同：0
> 
> 时间：2013-01-01T06:29:56.790
> 
> 标签：php, codeigniter, fckeditor

我在项目的某些模块中使用了 FCKEditor，当时我`index.php`在我的 url 中使用，但是当我删除时`index.php`，FCKEditor 从页面上消失了，它没有显示任何错误，只是 FCKEditor 的位置显示空白任何想法？

```
$fckeditorConfig = array('instanceName' => 'fckcontent',
                         'BasePath' => base_url().'systemfiles/plugins/FCKeditor/', 
                         'ToolbarSet' => '', 
                         'Width' => '600', 
                         'Height' => '370',
                         'Value' => $this->input->post('fckcontent'));

$this->load->library('fckeditor', $fckeditorConfig); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:10:06.297

第一步：制作.htaccess

```
#RewriteBase /
RewriteEngine on
RewriteCond $1 !^(index\.php|images|css|js|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 [L] 
```

用户指南： [http ://ellislab.com/codeigniter/user-guide/general/urls.html](http://ellislab.com/codeigniter/user-guide/general/urls.html)

第二步：编辑 config\config.php 并设置 base_url()

```
$config['base_url'] = ''; 
```

并删除索引页

```
$config['index_page'] = ''; 
```

第三步：不要使用fckeditor，使用ckeditor

阅读维基： [https ://github.com/EllisLab/CodeIgniter/wiki/CKEditor](https://github.com/EllisLab/CodeIgniter/wiki/CKEditor)

# android - 如何在android中垂直居中对齐文本

> ID：14108400
> 
> 赞同：50
> 
> 时间：2013-01-01T06:30:18.310
> 
> 标签：android, android-layout, text

我有阿拉伯文字，因此我将重力设置为正确以便从右侧开始文字。文字从现在开始。但另一个问题是文本从页面顶部开始呈现。但我需要将文本垂直居中。尽管我尝试了几种变化，但我无法使其垂直居中。

这是我的 xml 文件的示例。

```
<LinearLayout
            android:id="@+id/linearLayout5"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="right"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_marginBottom="23dp"
                android:gravity="right"
                android:padding="@dimen/padding_maintextview"
                android:text="@string/text"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="20sp" />
        </LinearLayout> 
```

问题出在上面的文本视图上。

在这里，我放了整个 xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/page1background"
    android:paddingRight="@dimen/padding_large" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="196dp"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:gravity="center_horizontal"
        android:paddingTop="@dimen/padding_Title_Top"
        android:text="@string/text"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textSize="20sp" />

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/textView1"
        android:gravity="center_horizontal"
        android:orientation="vertical" >

        <View
            android:id="@+id/view1"
            android:layout_width="fill_parent"
            android:layout_height="5dp" />
    </LinearLayout>

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/linearLayout2"
        android:layout_below="@id/linearLayout1"
        android:layout_gravity="center"
        android:padding="@dimen/padding_maintextview" >

        <LinearLayout
            android:id="@+id/linearLayout5"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="right"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_marginBottom="23dp"
                android:gravity="right"
                android:padding="@dimen/padding_maintextview"
                android:text="@string/text"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="20sp" />
        </LinearLayout>
    </ScrollView>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true" >

        <View
            android:id="@+id/view2"
            android:layout_width="fill_parent"
            android:layout_height="100dp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true" >

        <ImageButton
            android:id="@+id/back_arrow"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_marginBottom="30dp"
            android:layout_marginRight="45dp"
            android:layout_weight=".5"
            android:background="@drawable/backbut"
            android:contentDescription="@string/Description"
            android:onClick="onClickBtn"
            android:src="@drawable/backarrowpress" />

        <ImageButton
            android:id="@+id/copyButton"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="45dp"
            android:layout_weight=".5"
            android:background="@drawable/copy"
            android:contentDescription="@string/Description"
            android:onClick="onClickBtn" />
    </LinearLayout>

</RelativeLayout> 
```

谁能告诉我我在哪里做错了？我认为问题很清楚。如果没有在评论中告诉我。

在查看您的答案后，我在此附加了更新的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/page1background"
    android:paddingRight="@dimen/padding_large" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="196dp"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:gravity="center_horizontal"
        android:paddingTop="@dimen/padding_Title_Top"
        android:text="@string/text"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textSize="20sp" />

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/textView1"
        android:gravity="center_horizontal"
        android:orientation="vertical" >

        <View
            android:id="@+id/view1"
            android:layout_width="fill_parent"
            android:layout_height="5dp" />
    </LinearLayout>

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@id/linearLayout2"
        android:layout_below="@id/linearLayout1"
        android:layout_gravity="center"
        android:layout_centerInParent="true"
        android:padding="@dimen/padding_maintextview" >

        <LinearLayout
            android:id="@+id/linearLayout5"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="right"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_gravity="center_vertical"
                android:layout_marginBottom="23dp"
                android:gravity="center_vertical|right"
                android:padding="@dimen/padding_maintextview"
                android:text="@string/text"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="20sp" />
        </LinearLayout>
    </ScrollView>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true" >

        <View
            android:id="@+id/view2"
            android:layout_width="fill_parent"
            android:layout_height="100dp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true" >

        <ImageButton
            android:id="@+id/back_arrow"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_marginBottom="30dp"
            android:layout_marginRight="45dp"
            android:layout_weight=".5"
            android:background="@drawable/backbut"
            android:contentDescription="@string/Description"
            android:onClick="onClickBtn"
            android:src="@drawable/backarrowpress" />

        <ImageButton
            android:id="@+id/copyButton"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_marginLeft="45dp"
            android:layout_weight=".5"
            android:background="@drawable/copy"
            android:contentDescription="@string/Description"
            android:onClick="onClickBtn" />
    </LinearLayout>

</RelativeLayout> 
```

但我处于同样的情况。没有文字垂直居中

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-01-01T06:33:57.983

您的 TextView 属性需要类似于，

```
<TextView ... 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center_vertical|right" ../> 
```

现在，描述为什么需要做这些，

```
 android:layout_width="match_parent"
 android:layout_height="match_parent" 
```

使您的 TextView 成为`match_parent`或者`fill_parent`如果您不想成为这样，`match_parent`您必须提供一些指定的值，`layout_height`以便它获得垂直中心重心的空间。`android:layout_width="match_parent"`必要的，因为它将您的 TextView 对齐在右侧，以便您可以识别对 TextView 的父布局的尊重。

现在，它是关于`android:gravity`哪个使您的 TextView 对齐的内容。`android:layout_gravity`使 TextView 与其父布局对齐。

**更新：**

正如下面的评论所说，使用`fill_parent`而不是`match_parent`. （某些设备存在问题。）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-03-20T11:44:54.173

问题是文本视图上字体的填充。只需添加到您的文本视图：

```
android:includeFontPadding="false" 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-01-01T06:53:03.097

像这样使用来使任何东西居中

```
 android:layout_gravity="center"
 android:gravity="center" 
```

更新 ：

```
android:layout_gravity="center|right"
android:gravity="center|right" 
```

更新：只需从您的 textview 中删除 MarginBottom .. 这样做 .. 为您的 textView

```
<LinearLayout
        android:id="@+id/linearLayout5"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"  >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center" 
            android:gravity="center|right"
            android:text="hello" 
            android:textSize="20dp" />
    </LinearLayout> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-01T06:40:38.813

尝试放在 `android:gravity="center_vertical|right"`父 LinearLayout 中，因为你在 RelativeLayout 中，你可以放在`android:layout_centerInParent="true"`你的`scrollView`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-17T14:17:05.810

在相对布局中，您需要指定 textview 高度：

```
android:layout_height="100dp" 
```

或指定行属性：

```
android:lines="3" 
```

# windows-8 - 是否可以在 Winform 应用程序中使用 Windows 8 搜索功能？

> ID：14108415
> 
> 赞同：-2
> 
> 时间：2013-01-01T06:33:31.050
> 
> 标签：windows-8, microsoft-metro

我正在 C# (.Net 4.5) 中为 windows 8 开发一个 winform 应用程序（不适用于 Metro / RT）。据我了解，Windows 8 中的 Charms（搜索、共享、设置）不适用于经典的 .net 应用程序，但仅适用于 Metro 风格的应用程序。我在这里正确吗？请让我知道是否有办法在正常的 .Net 4.5 应用程序中访问此魅力。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T11:06:48.127

是的，你是对的，它不能被任何非地铁应用程序使用。

# python - pyserial：没有名为工具的模块

> ID：14108428
> 
> 赞同：31
> 
> 时间：2013-01-01T06:35:38.653
> 
> 标签：python, python-2.7, serial-port, pyserial

我已经用 python 2.7.2 在我的 Ubuntu 机器上安装了最新的 pySerial，它适用于大多数事情，但是每当我尝试导入“工具”包时，它都会说找不到“工具”。[pySerial](http://pyserial.sourceforge.net/shortintro.html?highlight=list#listing-ports)的文档明确引用了这个“工具”包。

```
>>> from serial import tools
Traceback (most recent call last):
  File "<pyshell#30>", line 1, in <module>
    import serial.tools
ImportError: No module named tools 
```

当我：

```
>>> serial.VERSION
'2.5' 
```

这是[Source Forge的最新版本](http://sourceforge.net/projects/pyserial/)

那么为什么我不能访问 pySerial 的“工具”包呢？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-01T10:34:36.857

用于`pip`安装`pyserial`。首先安装pip：

```
sudo apt-get install python-pip 
```

之后安装`pyserial`：

```
sudo pip install pyserial 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T17:01:47.523

我来到这里是因为我遇到了同样的问题。奇怪的是

```
import serial 
```

工作，但是

```
from serial.tools import list_ports 
```

没有。

原来愚蠢的我**将脚本命名为“serial.py”。重命名后一切正常**。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-07-28T07:31:44.893

您必须卸载`serial`然后`pyserial`重新安装`pyserial`：

```
pip uninstall serial
pip uninstall pyserial

pip install pyserial 
```

因为这两个库都包含一个名为 的文件`serial.py`，所以您会遇到名称冲突。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T07:05:38.847

看起来 ubuntu 包与上游不太匹配。比较他们 SVN 上的官方 pySerial 包：

[http://pyserial.svn.sourceforge.net/viewvc/pyserial/trunk/pyserial/serial/](http://pyserial.svn.sourceforge.net/viewvc/pyserial/trunk/pyserial/serial/)

到启动板中的 ubuntu 包：

[http://bazaar.launchpad.net/~ubuntu-branches/ubuntu/raring/pyserial/raring/files/head:/serial/](http://bazaar.launchpad.net/~ubuntu-branches/ubuntu/raring/pyserial/raring/files/head:/serial/)

那里也缺少工具。看起来他们确实保留了`miniterm.py`脚本，并将其安装在……某处；不过，我对 deb 打包还不够精通，无法理解在哪里。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-11T21:02:11.387

site-packages 文件夹中的 pyserial-2.4-py2.7.egg 被导入，而不是从 site-packages 文件夹中的 serial 导入。一旦我重命名了这个文件，使它不再从这个文件中导入，它就可以正常工作了。您可以通过以下方式轻松调试它

```
import serial
serial._ _path_ _ 
```

查看从哪里导入序列号。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-28T08:41:28.230

就我而言，我安装了`serial`但`pyserial`在收到以下错误后没有。

```
ImportError: No module named 'serial' 
```

然后`import serial`就好了，但是`from serial import tools`不能用。

只是`sudo pip uninstall serial`和`sudo pip install pyserial`

希望能帮助像我这样的人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-20T03:06:07.527

是的，使用 python-pip install ,,,then ,,,upgrade,,,serial 的版本将是 2.7 ...它工作

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-04T15:12:27.233

以防万一执行“pip install --upgrade”不起作用（就像我发生的那样），在 Linux 中，您可以检查您是否有一个串行包`/usr/lib/python2.7/dist-packages`，新的串行包是 pip install 去的那个`/usr/**local**/lib/python2.7/dist-packages/serial`，对于一些原因是 in`usr/lib/python2.7/`具有优先权，并且该版本的 pyserial 中不存在模块工具。更改名称或删除目录可以解决问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-10T07:38:41.413

pip 和 python -m pip 的区别可以是版本。例如，可能是你从 python2 调用 pip，但是当你输入 python -m pip 然后你得到 python3 等等......

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-01-01T06:57:49.960

您必须以这种方式调用模块的功能：

```
from serials import tools 
```

例如：如果我想`sqrt`从模块调用函数`math`，我会这样做：

```
from math import sqrt

import math.sqrt **is wrong.** 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-10-03T20:50:57.660

从 pyserial 网页：[https ://pyserial.readthedocs.io/en/latest/pyserial.html](https://pyserial.readthedocs.io/en/latest/pyserial.html)

他们建议您使用命令：python -m pip install pyserial

这对我有用。我对 pip 的了解还不够，无法理解与普通 pip install pyserial 的区别，但它对我有用（经过很多挫折）。

# c# - Cookie 不在 Windows Phone 应用程序上发送，但 Cookie 在 Windows 8 应用程序中使用相同的代码发送

> ID：14108430
> 
> 赞同：12
> 
> 时间：2013-01-01T06:35:56.657
> 
> 标签：c#, .net, http, windows-8, windows-phone-8

`HttpWebRequest`我有一个使用/发出 GET 和 POST 请求的基本类`HttpWebResponse`。

我使用我的班级登录 API，然后请求数据。在 Windows 8“Metro”应用程序中，它完全按预期工作。在 Windows Phone 8 应用程序上，登录似乎成功，但在随后的数据请求中，没有发送任何 cookie，并且服务器响应就像客户端未登录一样。

这是类，在 Windows 8 应用程序和 Windows Phone 应用程序中使用了完全相同的代码：

```
class Class1
    {
        CookieContainer cookieJar = new CookieContainer();
        CookieCollection responseCookies = new CookieCollection();

        public async Task<string> httpRequest(HttpWebRequest request)
        {
            string received;

            using (var response = (HttpWebResponse)(await Task<WebResponse>.Factory.FromAsync(request.BeginGetResponse, request.EndGetResponse, null)))
            {
                using (var responseStream = response.GetResponseStream())
                {
                    using (var sr = new StreamReader(responseStream))
                    {
                        cookieJar = request.CookieContainer;
                        responseCookies = response.Cookies;
                        received = await sr.ReadToEndAsync();
                    }
                }
            }

            return received;
        }

        public async Task<string> get(string path)
        {
            var request = WebRequest.Create(new Uri(path)) as HttpWebRequest;
            request.CookieContainer = cookieJar;

            return await httpRequest(request);
        }

        public async Task<string> post(string path, string postdata)
        {
            var request = WebRequest.Create(new Uri(path)) as HttpWebRequest;
            request.Method = "POST";
            request.CookieContainer = cookieJar;

            byte[] data = Encoding.UTF8.GetBytes(postdata);
            using (var requestStream = await Task<Stream>.Factory.FromAsync(request.BeginGetRequestStream, request.EndGetRequestStream, null))
            {
                await requestStream.WriteAsync(data, 0, data.Length);
            }

            return await httpRequest(request);
        }
    } 
```

以及发起请求的代码：

```
 var n = new Class1();
    await n.post("https://mydomain.com/api/login/", "username=myusername&password=mypassword");
    await n.get("https://mydomain.com/reader/feeds/"); 
```

奇怪的是，如果我在域名前加上“www”。它适用于 Windows Phone 8 应用程序和 Windows 8 Metro 应用程序。

我认为这与域的处理方式有关。cookie 的域是“.mydomain.com”，如果没有前缀，它必须认为 cookie 不属于该域。经过一番搜索，我发现[有人注意到类似问题的报告](http://blog.codeblack.nl/post/HttpWebRequest-HttpWebResponse-and-cookies.aspx)。

我不明白为什么在 Windows 8 应用程序中对它的处理方式与在 Windows Phone 应用程序中不同，因此逐行相同的代码在一个平台上工作但在另一个平台上失败。

* * *

我对此做了更多的研究。

我用于此的服务器代码是在 PHP 中：

```
<?php

if ($_REQUEST["what"] == "set")
{
    setcookie("TestCookie",$_REQUEST["username"] . " " . $_REQUEST["password"], time()+3600*24, "/", "subd.mydomain.com");
}

if ($_GET["what"] == "get")
{
    var_dump($_COOKIE); 
```

C#中的客户端代码：

```
 var n = new ClassLibrary1.Class1();
            await n.get("http://subd.mydomain.com/?what=set&username=foo&password=bar");
            await n.get("http://subd.mydomain.com/?what=get"); 
```

这是来自服务器的 cookie 响应示例

```
Set-Cookie: ARRAffinity=295612ca; Path=/;Domain=subd.mydomain.com
Set-Cookie: TestCookie=foo+bar; expires=Fri, 04-Jan-2013 17:19:25 GMT; path=/; domain=subd.mydomain.com 
```

在 Windows 8 Store/Metro 应用程序中，结果如下：

```
array(2) {
  ["ARRAffinity"]=>
  string(8) "295612ca"
  ["TestCookie"]=>
  string(7) "foo bar"
} 
```

在 Windows Phone 应用程序中，结果如下：

```
array(0){
} 
```

以这种方式设置时，Windows Phone 不会看到任何 cookie。

我更改了`TestCookie`设置方式，服务器的结果现在如下所示：

```
Set-Cookie: ARRAffinity=295612ca;Path=/;Domain=subd.mydomain.com
Set-Cookie: TestCookie=foo+bar; expires=Fri, 04-Jan-2013 17:29:59 GMT; path=/ 
```

`TestCookie`现在没有明确设置域，ARRAffinity 不变。

Windows 8 Store/Metro 应用程序现在返回：

```
array(2) {
  ["TestCookie"]=>
  string(7) "foo bar"
  ["ARRAffinity"]=>
  string(8) "295612ca"
} 
```

Windows Phone 8 应用程序返回以下内容：

```
array(1) {
  ["TestCookie"]=>
  string(7) "foo bar"
} 
```

`ARRAffinity`cookie 未发送，因为它明确声明了一个域。

如果我分配一些断点并检查`CookieContainer`请求，我在`m_domainTable`

```
+       [0] {[.subd.mydomain.com, System.Net.PathList]} System.Collections.Generic.KeyValuePair<string,System.Net.PathList>
+       [1] {[subd.mydomain.com, System.Net.PathList]}  System.Collections.Generic.KeyValuePair<string,System.Net.PathList> 
```

未发送的 cookie 在`.subd.mydomain.com`容器中。这在 Windows 8 和 Windows Phone 8 上都是一样的。

但是，如果 cookie 像这样声明自己：

```
Set-Cookie: TestCookie=foo+bar; expires=Fri, 04-Jan-2013 17:19:25 GMT; path=/; domain=.mydomain.com 
```

它在 Windows Phone 8 上正确发送。

在我原来的情况下，无论是通过 mydomain.com 还是 www.mydomain.com 访问，服务器都以相同的方式声明 cookie；作为“.mydomain.com”，但 Windows Phone 8 似乎不认为应该将“.mydomain.com”的 cookie 发送到“mydomain.com”。这是有问题的，因为即使服务器将“subd.mydomain.com”作为域，它也被视为具有前面的点，然后由于自身的故障而无法正常工作。似乎它必须不发送带有 cookie 的域信息才能正确处理它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T13:47:15.593

这是一个已知问题，反馈文章[在这里](https://connect.microsoft.com/VisualStudio/feedback/details/771651/cookiecontainer-subdomain-handling-issue-in-net-4-0)。

目前没有太多进展，但它是最近提交的。我只能建议为这个错误投票并定期检查它的状态。如果您无法等待，请联系 Microsoft 支持以更快地跟进。

# jquery - Jquery 对话框新按钮

> ID：14108431
> 
> 赞同：2
> 
> 时间：2013-01-01T06:36:01.310
> 
> 标签：jquery, jquery-ui, dialog, jquery-ui-dialog

正如屏幕截图所示，我可以在对话框顶部的关闭按钮旁边添加一个新按钮吗？我不知道这是否可以实现或有任何限制![在此处输入图像描述](../Images/d99d7d24f373eb53b0d30d650bc1aaf4.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:07:00.160

请试试这个，添加下面给出的代码来打开 Jquery Ui Dialog 的功能

```
$(".ui-dialog-titlebar").append("<input type=\"button\" id=\"yourID\" value=\"My Custom\">"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T07:07:13.397

您可以通过插入带有 jquery`before`功能的按钮来自定义 jquery ui 对话框，

**jQuery代码：**

```
<script language="javascript" type="text/javascript">

$(document).ready(function() {
    $('#trigger').click(function(){
      $("#dialog").dialog();
      $(".ui-dialog-titlebar-close").before('<input name="newBtn" id="newBtn" type="button" style="float:right;" value="BUTTON"/>');
    }); 
}); 
</script> 
```

**html代码：**

```
<input name="trigger" id="trigger" type="text" />
<div id="dialog" style="display:none">
    <div>
        Content
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T07:10:26.043

您可以使用该`create`事件来添加您的按钮。这是确保按钮不会被多次添加的简单方法

```
var newBtn = '<a href="#" class="myDialogBtn"><span class="ui-icon ui-icon-alert"></span></a>';

$('#dialog').dialog({
    title: 'Test Dialog',
    create: function() {
        $(this).prev('.ui-dialog-titlebar').find('.ui-dialog-title').after(newBtn)
    }
}) 
```

检查浏览器控制台中的现有按钮以复制所需的其他 css

演示：http: [//jsfiddle.net/eh4Aj/](http://jsfiddle.net/eh4Aj/)

API 参考：[http ://api.jqueryui.com/dialog/#event-create](http://api.jqueryui.com/dialog/#event-create)

# css - CSS textarea调整大小不起作用

> ID：14108434
> 
> 赞同：0
> 
> 时间：2013-01-01T06:36:12.323
> 
> 标签：css

您好，我在我的网页中使用 textarea 标签。由于 textarea 的默认大小很小，我尝试使用以下 css 代码调整它的大小：

```
textarea {
    width:400px;
    height:150px;
} 
```

html文本区域：

```
<li>
Body*:<br>
<textarea name="body"></textarea>
</li> 
```

但这行不通。有什么解决办法？？

PS：我使用的是Mozilla firefox。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:48:52.483

它工作正常。

检查这个[http://jsfiddle.net/qhqLV/](http://jsfiddle.net/qhqLV/)

你的html代码

```
 <li>
    Body*:<br>
    <textarea name="body"></textarea>
    </li> 
```

你的 CSS

```
 textarea {
        width:400px;
        height:150px;
    } 
```

注意：调试代码并检查父元素的宽度和高度。我认为这是问题所在。可能是文本区域在执行期间接受任何其他样式。

# css - html，正文被应用到 CSS 文件中的最后一个值

> ID：14108435
> 
> 赞同：-1
> 
> 时间：2013-01-01T06:36:13.803
> 
> 标签：css

我的 CSS 类中有以下 CSS 代码。

```
.ie8 html, body {
padding-left: 140px;
}

html, body {
padding-left: 0px;
} 
```

这`html,body`是最后一个条目。因此，对于ie8，`html, body`正在得到应用。

现在，如果我交换它们，那么`.ie8 html, body`将是最后一个条目。因此，对于 Chrome 和 FF，正在应用 .ie8 属性。

CSS 文件是从 Web 服务器外部引用的。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:46:24.837

正如 Musa 所说，`.ie8 html, body`将适用于两个不同的事情：

*   类元素`html`下的`ie8`元素（可能不存在，因为`html`应该是顶部元素）
*   和每个`body`元素（`ie8`类选择器在这里适用）。

因此，您有两个规则处理`body`，第二个覆盖第一个。如果你切换它们，效果就会改变。您可能想要`html.ie8 body`, or `.ie8 body`（仅用于`body`元素），或`html.ie8, html.ie8 body`, or `.ie8, .ie8 body`（用于`html`和`body`元素）。

# perl - 从 perl 中向 SSH-Agent 添加密钥

> ID：14108447
> 
> 赞同：3
> 
> 时间：2013-01-01T06:40:13.647
> 
> 标签：perl, ssh, ssh-keys

好的，这就是我想要做的。我正在编写一个程序，它将从我的手机（通过 ssh）中检索一个 keepass 数据库，并在其中搜索我感兴趣的任何密码。我想为 keepass 数据库使用与 ssh 密钥相同的密码我*为*检索 keepass 数据库所做的，但我不想输入两次密码。所以。这就是我的想法：我将编写一个 perl 脚本，要求输入一次密码（通过 ssh-askpass）（这是我在底部的 readpass 函数。它工作正常。）我可以通过那个键等读取 keepass，一切都很好。

但是，当我尝试 ssh 到手机时，我似乎无法弄清楚如何添加 ssh-add 而不提示我*再次输入密钥的密码。*

我尝试制作一个简单地回显环境变量的 shell 脚本，然后将 SSH_ASKPASS 设置为该脚本，（并在环境变量中设置密码并进行系统设置......就像这样：

```
my $key = readpass();
$ENV{"SSH_ASKPASS_ENV"} = $key;
$ENV{"SSH_ASKPASS"} = "/home/user/bin/ssh-askpass-env";
system("/usr/bin/ssh-add /home/user/.ssh/keepass-retriever"); 
```

ssh-askpass-env 只是有：

```
#! /bin/sh
echo "${SSH_ASKPASS_ENV}" 
```

但是，这似乎并没有这样做，它仍然要求我输入密码。我可以验证是否正在调用 ssh-askpass-env *，*并且它*正在*获取密码。

我想我的问题是：如何使用预先指定的密码从 perl 中向 ssh-agent 添加密钥？（因为我刚刚从下面的 readpass() 中读取了密码）

谢谢！

```
sub readpass() {
    my $passwd = undef;
    if (defined($ENV{"DISPLAY"})) {
        if (open(PASSWD, "/usr/bin/ssh-askpass 'KeePass' |")) {
            chomp($passwd = <PASSWD>);
            close(PASSWD);
        }
    }
    else {
        ReadMode('noecho');
        printf("Enter keepass password: ");
        $passwd = ReadLine(0);
        chomp($passwd);
        ReadMode('normal');
    }
    return($passwd);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:39:17.757

阅读 ssh-add 手册页后，我发现分离终端有效：

```
system("/usr/bin/ssh-add /home/user/.ssh/keepass-retriever < /dev/null &>/dev/null"); 
```

# c++ - 删除数组指针的元素没有意义吗？

> ID：14108450
> 
> 赞同：1
> 
> 时间：2013-01-01T06:40:22.430
> 
> 标签：c++

*我知道我应该使用`std::vector`或其他替代方法，但有些东西我不明白指针。*

当我们创建一个指针数组时：

```
int* a = new int[100]; 
```

它应该分配一个空间`100 * sizeof(int)`，不是吗？

当我们不再需要它时，我们会：

```
delete [] a; 
```

* * *

**1.**

[这是**错误**](http://www.parashift.com/c++-faq-lite/delete-array-built-ins.html)的：

```
delete a; 
```

但是当我实际这样做时（曾经在娱乐程序中意外），似乎没有触发运行时错误（与下面的第 3 部分不同）并且程序正常运行（尽管可能存在内存泄漏）。为什么？它实际上是否删除（释放）了数组的第一个元素？

* * *

**2.**

根据[StackOverflow 上的一个问题](https://stackoverflow.com/questions/197675/how-does-delete-know-the-size-of-the-operand-array)，`delete[]`知道它需要删除的数组的大小。

但是当我删除错误的东西时会发生什么？（它会导致运行时错误......它在 codepad.org 上显示`memory clobbered before allocated block`以及`Debug Assertion Failed`VS2010 中的某些内容。）为什么不直接删除（免费）元素 1 到 99？

```
delete [] &a[1]; // or
delete [] (a + 1); 
```

* * *

**3.**

下面的代码也显示了`memory clobbered before allocated block`. 但是为什么不直接删除（释放）元素 99？为什么它会导致错误，但`delete a`就像第 1 部分一样？

```
delete &a[99]; //or
delete (a + 99); 
```

* * *

C++ 标准是否真的说明了上述事情会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T06:47:19.993

1.  根据 C++ 标准，删除`new[]`使用 using分配的对象`delete`是未定义的行为。任何事情都可能发生——从“什么都没有”到破坏你的堆得面目全非。说在这种情况下究竟删除了什么是没有意义的，因为它严重依赖于系统。

2.  删除“错误的东西”是未定义的行为。通常，这会破坏您的堆，因为分配器的常见实现期望某些值将存储在您传递用于释放的地址之前。这绝不是一个标准，所以再一次，任何事情都可能发生。

3.  它不会删除元素 99，因为它从未分配元素 99：它分配了一个包含 100 个项目的数组，而不是单个`int`; 它希望您一次释放所有 100 个项目 - 您不能以任何其他方式释放它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T06:42:38.207

> **为什么？它实际上是否删除（释放）了数组的第一个元素？**

不，从技术上讲，它导致了未定义的行为。这意味着任何事情都可能发生。

使用`new`or的规则`new []`非常简单：

*   如果您使用过，`new`则**必须**使用`delete`，如果使用过，`new []`则**必须**用于`delete[]`释放。
*   您应该将 or 返回的地址`new`传递`new []`给`delete`or `delete []`。

你不遵守规则，你最终会出现未定义的行为。

## 为什么这一切？

因为 C++ 标准是这么说的。
该标准为您提供了通过动态内存分配来管理对象的生命周期和内存的功能，作为回报，您可以签订合同以遵循标准要求获得此功能的规则。
你违反了合同，你将受到惩罚。

简而言之，

> ***“权力越大责任越大”***

# android - SD 卡视频未在视频视图中运行

> ID：14108453
> 
> 赞同：0
> 
> 时间：2013-01-01T06:41:04.317
> 
> 标签：android, sd-card, android-videoview

我有一个保存在 SD 卡上的视频文件。它的路径保存在我的数据库中。在运行视频文件时，我从数据库中获取路径。

我的视频路径是：

```
/mnt/sdcard/VideoLog/2013-01-01 11.18.57.mp4 
```

代码如下：

```
video_view_player = (VideoView) findViewById(R.id.videoview_player);
video_view_player.setVideoPath(filename);

//video_view_player.setMediaController(new MediaController(this));
//video_view_player.requestFocus();

video_view_player.start(); 
```

视频路径中的文件名是从数据库中获取的。我什至尝试将`.mp4`视频转换为`.3gp`，但徒劳无功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T07:39:22.950

```
public class MainActivity extends Activity {

VideoView vv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    vv=(VideoView)findViewById(R.id.videoView1);
    MediaController mediaController = new MediaController(this);
    mediaController.setAnchorView(vv);
    Uri video = Uri.parse("/sdcard/sample_mpeg4.mp4");
    vv.setMediaController(mediaController);
    vv.setVideoURI(video);
    vv.start();
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T07:23:05.027

试试这种方式：

> VideoPLayer = (VideoView) findViewById(R.id.VideoPLayer);
> 媒体控制器 = 新媒体控制器（m_context）；
> VideoPLayer.setVideoPath(m_videoUrl);
> VideoPLayer.setVideoURI(Uri.parse(videoUrl));
> VideoPLayer.setMediaController(m_mediaController);
> 视频播放器.start();
> 媒体控制器.show();

# windows - 如何在 Windows 上进行类似“sed-”的操作？

> ID：14108455
> 
> 赞同：4
> 
> 时间：2013-01-01T06:41:22.310
> 
> 标签：windows, unix, sed

我有一个 55 GB 的大文件，其中每一行都有一个句子。我想检查是否有任何带有点“。”的行。最后，如果有，我想在该行的点之前插入一个空格。

例：我喜欢那辆车。替换为：我喜欢那辆车。

如果有点，则每行尾随点前的空格。

我没有任何 cygwin 或 unix，我使用的是 Windows 操作系统。我可以在这 55GB 上做一个常见的 sed 吗？文件？

我尝试了 GetGNUWin32，但无法确定那里的实际命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T06:47:40.303

安装 Perl。Strawberry Perl 可能是最好的 Windows 发行版。 [http://strawberryperl.com/](http://strawberryperl.com/)

要在 Perl 中执行您所说的操作，应该是这样的：

```
perl -p -i -e's/\.$/ ./' filename 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T06:52:54.127

您可以从那里安装 `Cygwin`和使用。`sed`在这里我找到[**了适用于 Windows 的 Sed**](http://gnuwin32.sourceforge.net/packages/sed.htm)

* * *

**编辑**：
很好地回答您的问题： [**cmd.exe 是否有类似 sed 的实用程序**](https://stackoverflow.com/questions/127318/is-there-any-sed-like-utility-for-cmd-exe)

[（当我在谷歌上搜索时，我总是加前缀`stackoverfloew`。我在谷歌上为你做了同样的事情：`sed on window stackoverflow`，但那是另一回事）]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-29T03:00:47.670

**对于您的用例：**

来自 PowerShell.exe（Windows 自带）

```
(Get-Content file.txt) -Replace '\.$', ' .' | Set-Content file.txt 
```

* * *

我搜索了几个小时，在试图找到我的用例的解决方案时遇到了很多麻烦，所以我希望添加这个答案可以帮助处于同样情况的其他人。

对于那些像我一样弄清楚 git filter clean/smudge 的人来说，这是我最终管理它的方法：

在文件中：（`.gitconfig` *全局）*

```
[filter "replacePassword"]
    required = true
    clean = "PowerShell -Command \"(Get-Content " %f ") -Replace 'this is a password', 'this is NOT a password'\""
    smudge = "PowerShell -Command \"(Get-Content " %f ") -Replace 'this is NOT a password', 'this is a password'\"" 
```

请注意，此代码段不会更改原始文件（这适用于我的用例）。

帮助查找的其他搜索词：插值、插值

# java - 我的申请历史

> ID：14108462
> 
> 赞同：0
> 
> 时间：2013-01-01T06:42:54.557
> 
> 标签：java, android, eclipse, listview, save

我正在尝试为我的应用创造历史。每当用户计算每小时卡路里率时，我希望将其存储到另一个活动列表视图中。我怎样才能做到这一点？

```
AlertDialog.Builder alertDialog = new AlertDialog.Builder(Monitor.this);
alertDialog.setTitle(gotNames);
alertDialog.setMessage("You are currently burning " + caloriesForMen() 
    + " calories per hour");
alertDialog.setPositiveButton("Save", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
    }   
}); 
```

写当点击保存按钮时，我想获取caloriesForMen().toString() 的值并将其放入列表视图中。现在，此信息仅特定于选定的用户。有多个用户，我想知道如何将他们的卡路里燃烧率值存储在列表视图中，并为每个创建的用户保存它们。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T06:59:10.793

将数据持久存储在设备上是最有意义的。否则，如果您只是将其保存在内存中，那么如果系统停止您的应用程序，数据就会丢失。

有几种可能性，例如使用文件、共享首选项或 SQLite 数据库。列表视图的另一个活动将从持久存储中读取数据。

[数据存储 API 指南](http://developer.android.com/guide/topics/data/index.html)描述了详细信息。

如果您想在不同设备之间共享数据，则将数据存储在服务器上是有意义的。

# java - 在这种情况下我应该如何处理异常

> ID：14108464
> 
> 赞同：0
> 
> 时间：2013-01-01T06:43:50.787
> 
> 标签：java, oop, exception, exception-handling

您好，我正在通过用 Java 编写一个虚拟库管理项目来学习 OOP。

在 serachBook() 中，如果在 ArrayList 中找到 book，则返回 book 对象，如果找不到则抛出自定义异常 BookNotFound。

问题1：它应该只是返回null并在调用代码时检查返回值是否为null或抛出自定义异常BookNotFound。

目前我认为 BookNotFound 是合适的，目前正在这样做。但是我发现了另一个困难：在 addbook() 中，我首先调用 searchBook() 来查看 book 已经存在，如果不存在，它会添加这本书。但是，如果书不存在，searchBook() 会抛出 BookNotFound。

Qestion 2：我应该如何处理 addBook() 中 searchBook() 抛出的这个异常，因为为了 addBook() 在列表中插入书籍，必须发生 BookNotFound 异常。那么我应该写空 Catch(BookNotFound e){} 吗？

什么是更好的 OO 实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T06:45:19.817

`null`如果找不到书，您应该返回并在方法文档中说明，

[`Exception`投掷是一项昂贵的操作](https://stackoverflow.com/questions/299068/how-slow-are-java-exceptions)`searchBook()`，它也非常适合特殊情况（比如你在方法中传递 null 的书名

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T06:56:50.233

返回`null`。

使用异常来控制程序流是一个非常糟糕的主意。例外是例外，没有找到的书不是例外。

当您的方法无法处理某种情况并希望向调用者发出信号时，就会引发异常。您*可以*通过返回来处理它`null`。

有很多 JDK 类`null`在类似情况下返回的示例，例如在映射中找不到键时`Map.get(key)`返回。`null`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T06:48:11.950

如果找不到这本书，我的建议是选择返回“null”的选项。仅使用例外来处理“不那么常​​规”的场景，并且从您的描述中“搜索书”和“添加书”看起来像一个相当常见的场景。

使用异常涉及开销：
[Java 异常有多慢？](https://stackoverflow.com/questions/299068/how-slow-are-java-exceptions)
[http://apmblog.compuware.com/2011/04/12/the-cost-of-an-exception/](http://apmblog.compuware.com/2011/04/12/the-cost-of-an-exception/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T06:48:48.383

问题1：
*例外应该是针对例外情况。*
书不存在似乎不是一个例外情况，因此返回特殊值`null`会更合适。
[http://codeutopia.net/blog/2010/03/11/should-a-failed-function-return-a-value-or-throw-an-exception/](http://codeutopia.net/blog/2010/03/11/should-a-failed-function-return-a-value-or-throw-an-exception/)

问题2：
*也永远不要吃掉异常。*
相反，您可以编写代码以在 catch 块中添加 book 并执行一些有用的操作，例如日志记录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T06:54:32.133

相反，您应该返回一个`null`if `Book`is not found 并相应地处理它。

抛出异常是昂贵的操作，顾名思义，这些是异常情况。因此，在控制应用程序流的上下文中使用它们确实被认为是一种不好的做法。

此外，使用异常进行流控制违反了[最小惊讶原则](http://c2.com/cgi/wiki?PrincipleOfLeastAstonishment)，这使得程序难以阅读和理解。

此外，编译器供应商并不期望这一点。他们期望很少抛出异常，并且他们通常让抛出代码效率很低。

# android - 开始新活动 onClick

> ID：14108467
> 
> 赞同：1
> 
> 时间：2013-01-01T06:44:13.823
> 
> 标签：android, android-intent

我正在为我的网络服务开发一个 android 应用程序。

我在主要活动中添加了一个注册 TextView 并为 onClickListener 添加了以下代码：

```
mRegister.setOnClickListener(new View.OnClickListener() {
  @Override
  public void onClick(View view) {
     startActivity(new Intent(LoginActivity.this, RegisterActivity.class));
  }
}); 
```

点击注册TextView时，logcat中返回此错误：

```
01-01 01:36:29.443: E/AndroidRuntime(21558): FATAL EXCEPTION: main
01-01 01:36:29.443: E/AndroidRuntime(21558): java.lang.RuntimeException: Unable to start activity ComponentInfo{us.picbox/us.picbox.RegisterActivity}: java.lang.NullPointerException
01-01 01:36:29.443: E/AndroidRuntime(21558):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1830)
01-01 01:36:29.443: E/AndroidRuntime(21558):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1851)
01-01 01:36:29.443: E/AndroidRuntime(21558):    at android.app.ActivityThread.access$1500(ActivityThread.java:132)
01-01 01:36:29.443: E/AndroidRuntime(21558):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
01-01 01:36:29.443: E/AndroidRuntime(21558):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-01 01:36:29.443: E/AndroidRuntime(21558):    at android.os.Looper.loop(Looper.java:150)
01-01 01:36:29.443: E/AndroidRuntime(21558):    at android.app.ActivityThread.main(ActivityThread.java:4293)
01-01 01:36:29.443: E/AndroidRuntime(21558):    at java.lang.reflect.Method.invokeNative(Native Method)
01-01 01:36:29.443: E/AndroidRuntime(21558):    at java.lang.reflect.Method.invoke(Method.java:507)
01-01 01:36:29.443: E/AndroidRuntime(21558):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-01 01:36:29.443: E/AndroidRuntime(21558):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-01 01:36:29.443: E/AndroidRuntime(21558):    at dalvik.system.NativeStart.main(Native Method)
01-01 01:36:29.443: E/AndroidRuntime(21558): Caused by: java.lang.NullPointerException
01-01 01:36:29.443: E/AndroidRuntime(21558):    at us.picbox.RegisterActivity.onCreate(RegisterActivity.java:85)
01-01 01:36:29.443: E/AndroidRuntime(21558):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
01-01 01:36:29.443: E/AndroidRuntime(21558):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1794)
01-01 01:36:29.443: E/AndroidRuntime(21558):    ... 11 more 
```

任何人都可以对这个问题有所了解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T06:54:30.530

> 我知道问题出在哪里，这是第 85 行：
> 
> ```
> findViewById(R.id.sign_in_button).setOnClickListener(new View.OnClickListener() {
>     @Override 
>     public void onClick(View view) { 
>         attemptLogin(); 
>     } 
> }); 
> ```
> 
> 但这在布局上是不存在的。

`findViewById()`找不到当前未显示的视图。您*必须*在视图层次结构中有一个视图，`android:id="@+id/sign_in_button"`否则`findViewById()`将返回`null`并导致此 NullPointerException。

# php - php没有收到ajax数据

> ID：14108469
> 
> 赞同：0
> 
> 时间：2013-01-01T06:44:20.873
> 
> 标签：php, javascript, ajax, jquery, post

这是我的java脚本代码

```
 $(document).ready(function () {
var getOption = $("input:radio[name='profit']");
getOption.click(function(){
if (this.value == 'amount') {
    $('.graph_per').hide();
    $('.graph_amt').show(); 
    }
else if(this.value == 'percentage') {
    $('.graph_amt').hide();
    $('.graph_per').show(); 
    }           
    });
    var get="";
$.ajax({  
    type: 'POST',  
    url: 'localhost/testp/admin.php', 
    data: {get:"amount"},
    success: function( response )    {
       console.log( response );
    }
 });
}); 
```

当我在 php 中发布 get 变量时，它显示错误：未定义索引“get”。如何修复它&我的这个 js 文件存储在不同的文件夹中。php文件

```
<?php
echo $_POST["get"];
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:17:32.043

以下是经过测试的正确代码：-

```
$.ajax({  
    type: 'POST',  
    url: 'admin.php', 
    data: { get: "amount" },
    success: function( response ) {
        console.log( response );
    }
}); 
```

问题是文件“admin.php”的路径。如果“admin.php”和 JS 文件在同一个文件夹中，那么上面的代码就可以了。如果 admin.php 在您的 js 文件所在的文件夹之外，则将“admin.php”更改为“../admin.php”。这里“../”是当前文件夹后面的一个目录级别。如果“admin.php”位于您的 JS 文件所在文件夹的两层或三层后面，请相应地更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T06:49:58.890

尝试：

```
$.ajax({  
    type: 'POST',  
    url: 'admin.php', 
    data: { "get": "amount" },
    success: function( response ) {
       console.log( response );
    }
 }); 
```

PHP

```
echo $_POST["get"]; 
```

从您作为评论添加的代码中，我看到您正在执行以下操作：

```
..
 data: {get="amount"}
.. 
```

所以把它改成

```
 data: {"get" : "amount"} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T07:34:34.800

```
$.ajax({  
    type: 'POST',  
    url: 'localhost/testp/admin.php', 
    data: { get: "amount" },
    success: function( response ) {
        console.log( response );
    }
}); 
```

检查 URL 路径。

# macos - launchd：WatchPaths 不会触发简单的“hello world”脚本（OS X 10.8）

> ID：14108471
> 
> 赞同：6
> 
> 时间：2013-01-01T06:44:41.907
> 
> 标签：macos, bash, plist, osx-mountain-lion, launchd

这里有一个奇怪的问题。我有 ~/Library/LaunchAgents/com.me.helloworld.plist 包含以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
        <key>Label</key>
        <string>com.me.helloworld</string>
        <key>ProgramArguments</key>
        <array>
                <string>/Users/me/temp/test.sh</string>
        </array>
        <key>WatchPaths</key>
        <array>
                <string>/Users/me/temp/Journal.txt</string>
        </array>
</dict>
</plist> 
```

这个想法是，如果 ~/temp/Journal.txt 被修改，它应该执行 ~/temp/test.sh。test.sh 有以下内容：

```
#!/bin/bash
echo "hello world from test.sh" >> itchanged.txt 
```

因此，如果我更改 Journal.txt，我应该得到一个名为 itchanged.txt 的文件。当我执行以下操作时：

```
$ launchctl unload ~/Library/LaunchAgents/com.me.helloworld.plist
$ launchctl load ~/Library/LaunchAgents/com.me.helloworld.plist
$ touch Journal.txt 
```

执行 ls 表明未创建 test.txt。但是，如果我手动执行 ./test.sh，则会创建 itchanged.txt。因此，问题似乎出在某个地方，即在发生这种情况时认识到 Journal.txt 已更改并执行脚本。

我正在使用 OS X Mountain Lion。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T09:52:37.273

您的脚本没有指定 itchanged.txt 的路径；由于已启动进程的默认工作目录是 /，并且您的帐户可能没有在那里创建文件的权限，因此永远不会创建 itchanged.txt。您应该在脚本中指定一个路径，或者将 WorkingDirectory 键添加到您的 .plist 以更改默认值。

# eclipse - 恢复由于之前eclipse异常退出而丢失的Java源代码

> ID：14108475
> 
> 赞同：0
> 
> 时间：2013-01-01T06:45:31.270
> 
> 标签：eclipse

我的 Java 代码几乎跨越了 3000 行，在我处理该代码时在 Eclipse 代码窗口中打开。突然我的电脑死机了，我不得不重新启动它。后来当我打开 Eclipse 时，它​​抛出了一些错误，说一些 org.eclipse... 文件已损坏，懒得写下来，我的错 :( 但后来它显示“无法读取工作区 dir.metadata.plugins\org 的元数据.eclipse.core.resources.root.indexes\properties.index”在我的java代码文件中。我重新启动eclipse以消除错误，但结果是灾难性的；java代码文件是空的。我担心的是，在我上次备份，我在这里和那里做了很多更改。

终于我能弄明白了。只需要与当地历史进行比较：P

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-01T06:55:10.660

不确定这是否可行，但您可以尝试以下两种方法：

1.  右键文件-->团队-->显示本地历史（尝试在“历史视图”中查找文件）

如果失败，请尝试 2​​. 手动转到“Eclipse workspace.metadata.plugins\org.eclipse.core.resources.history” 您可以找到以几个字母命名的文件夹列表，使用“Date Modified”列并打开最新的这些文件夹来获取您正在处理的最新文件。在该文件夹中，您可以找到一些名称不寻常的文件，使用一些文本编辑器打开文件以找到您正在搜索的文件，如果可能的话尝试匹配文件大小。

让我知道这是否有帮助。:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-01T06:55:43.320

欢迎来到 Stack Overflow，约翰尼

我想您可能会在“本地历史”中找到您的代码

参考 ：

[如何从 Eclipse 项目中恢复因断电而损坏的 Java 文件？](https://stackoverflow.com/questions/8787737/how-to-recover-java-file-from-eclipse-project-that-damaged-by-getting-power-off)

[日食从崩溃中恢复](https://stackoverflow.com/questions/3464557/eclipse-recovering-from-crash)

[http://www.coderanch.com/t/473927/vc/recover-java-File-Deleted-Eclipse](http://www.coderanch.com/t/473927/vc/recover-java-File-Deleted-Eclipse)

# android - 在渐变中添加百分比

> ID：14108477
> 
> 赞同：9
> 
> 时间：2013-01-01T06:45:46.427
> 
> 标签：android, drawable, gradient

我正在尝试使用 xml 渐变代码创建一个按钮。（因为我是新用户，无法上传图片：（）这张图片的边缘有两种颜色和角。开始渐变的颜色将从所有渐变长度的 15% 开始，结束颜色在 75% 结束渐变长度。我使用此代码创建具有两种颜色的渐变：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item  >
    <shape  android:shape="rectangle">
        <gradient
    android:angle="-45"
    android:startColor="#64bcfb"
    android:endColor="#2f8fd4"
     android:type="linear"/>

        <corners android:radius="10dp" />
    </shape>
</item>
</layer-list> 
```

问题是我不知道如何添加渐变的开始百分比和结束百分比。我对此进行了一些搜索并找到了一些内容：

[带两种颜色的背景？](https://stackoverflow.com/questions/8727238/banded-background-with-two-colors)

[按钮上的渐变和阴影](https://stackoverflow.com/questions/4891711/gradients-and-shadows-on-buttons)

两者都有一些解决方案，但我不适合我。解决方案是创建一个具有两种颜色的简单条，但我想创建一个边缘也有一些角的按钮。我也不能在我的应用程序中使用原始图像，因为我需要务实地更改它的颜色。对我们如何在渐变中添加百分比有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-03-14T11:03:02.920

这已经很老了，但没有答案，我认为我遇到了问题并找到了解决方法。

如果您只需要具有 2 种颜色、单个过渡和带角的渐变，则可以执行以下操作：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <corners
        android:bottomLeftRadius="10dp"
        android:bottomRightRadius="10dp"
        android:topLeftRadius="10dp"
        android:topRightRadius="10dp" />
    <gradient
        android:angle="270"
        android:startColor="@android:color/transparent"
        android:centerColor="@android:color/transparent"
        android:centerY="0.65"
        android:endColor="@color/colorPrimary"
        android:type="linear" />
</shape> 
```

这里的技巧是添加一个`centerColor`和`centerY`修改它的中心。这将允许您修改转换发生的位置。

# objective-c - 从类别中获取 NSDate 日期的日期

> ID：14108486
> 
> 赞同：0
> 
> 时间：2013-01-01T06:47:32.627
> 
> 标签：objective-c, nsdate, categories

我向 NSDate 添加了一个类别，如下所示：

```
@interface NSDate (ElapsedDays)

-(unsigned long) elapsedDays: (NSDate *) theDate;

@end

@implementation NSDate (ElapsedDays)

-(unsigned long) elapsedDays:(NSDate *)theDate
{
  self.[???]
}

@end 
```

我主要声明 NSDate 如下：

```
NSDate *today=[NSDate date]; 
```

现在在`elapsedDays`实现中，我如何访问`NSDate`初始化的日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T08:38:42.360

`elapsedDays`消息的接收者`self`在方法实现范围内。

例如：

```
#import <Foundation/Foundation.h>

@interface NSDate (ElapsedDays)

- (NSInteger)elapsedDaysSinceDate:(NSDate *)theDate;
@end

@implementation NSDate (ElapsedDays)

static const NSInteger SecondsPerDay = 86400;

- (NSInteger)elapsedDaysSinceDate:(NSDate *)theDate {
    NSTimeInterval interval = [self timeIntervalSinceDate:theDate];
    return interval/SecondsPerDay;
}

@end

int main(int argc, char *argv[]) {
    @autoreleasepool {
        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setDateFormat:@"MMddyyyy"];

        NSDate *date1 = [dateFormatter dateFromString:@"01012012"];
        NSDate *date2 = [dateFormatter dateFromString:@"12312012"];

        printf("Date difference = %ld",[date2 elapsedDaysSinceDate:date1]);
    }
} 
```

打印`Date difference = 365`到控制台。

**编辑（使用公历计算）**

```
#import <Foundation/Foundation.h>

@interface NSDate (ElapsedDays)

- (NSInteger)elapsedDaysSinceDate:(NSDate *)theDate;
@end

@implementation NSDate (ElapsedDays)

- (NSInteger)elapsedDaysSinceDate:(NSDate *)theDate {
    NSTimeInterval interval = [self timeIntervalSinceDate:theDate];
    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *components = [gregorian components:NSDayCalendarUnit
                                        fromDate:theDate
                                          toDate:self 
                                                 options:0];
    return [components day];
}

@end

int main(int argc, char *argv[]) {
    @autoreleasepool {
        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setDateFormat:@"MMddyyyy"];

        NSDate *date1 = [dateFormatter dateFromString:@"01012012"];
        NSDate *date2 = [dateFormatter dateFromString:@"12312012"];

        printf("Date difference = %ld",[date2 elapsedDaysSinceDate:date1]);
    }
} 
```

# razor - 返回多个集合以在 MVC4 asp.net 视图页面中使用

> ID：14108491
> 
> 赞同：0
> 
> 时间：2013-01-01T06:48:18.980
> 
> 标签：razor, asp.net-mvc-4

我了解如何通过返回 View({mylist}); 从控制器返回单个集合 (List<>); 然后在视图页面中使用剃刀语法 @Model 等引用它。就我而言，我想在页面上单独使用几个不同的集合。我知道我可以制作“所有集合集合之母”并简单地将集合包含在另一个集合中（并返回那个集合），但我想知道 MVC4 中是否有某种方法可以让我更优雅地处理这种情况.

谢谢，新年快乐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T07:04:22.353

您可以使用`ViewBag`控制器中的每个集合并使用这些`ViewBag`变量查看

在控制器中

```
public ActionResult HotelDetails(List<HotelDetailsModel> model)
        {           
            ViewBag.HotelDetails = model;
            return View();
        } 
```

并在视图中

```
 @{
        List<HotelDetailsModel> hotels = (List<HotelDetailsModel>)ViewBag.SearchResultsModel;
        if (hotels.Count > 0)
        {
            foreach (HotelDetailsModel item in hotels)
            {   
}
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:28:50.863

您应该创建一个视图模型。这是一个常规类，它将在视图中包含您需要的所有集合或属性。

检查这篇文章：http: [//msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3fundamentals_topic7.aspx](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3fundamentals_topic7.aspx)

# javascript - Keydown 事件在动态清除表行并向其添加新行集后在 IE 和 Chrome 中不起作用！（它在 Firefox 中工作）

> ID：14108504
> 
> 赞同：0
> 
> 时间：2013-01-01T06:50:47.063
> 
> 标签：javascript, google-chrome, callback, keydown, dynamically-generated

我正在尝试通过箭头键在数组中实现导航。我得到的是通过以下代码工作。

```
"onLoad": function () {
        $('#tbl tbody').attr("tabindex", 1);
        $('#tbl tbody').keydown(function (event) {
            // Code for navigation to next or previous in table
        });
    }, 
```

按键事件在页面加载时工作正常，只需单击一次表格，我就可以通过箭头键导航。但是在动态清除表并向其添加新的行集后我遇到了问题。在表的末尾，我需要回调正在清除此表行并向其添加新行集的服务器。现在在那之后 Keydown 事件不起作用。我需要再次单击表格进行导航。注意：这只发生在 IE 和 Crome 上。在 Firefox 上它工作正常，我能够在新的数据或行集上导航。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:16:48.097

正如 jerome.s 所建议的那样，它现在对我有用。

现在我在做什么，我在 Ajax 调用完成时设置焦点，它的回调函数也完成了重新渲染表的工作。当渲染部分完成时，我已将焦点设置为表格主体。

```
$('#tbl body').focus(); 
```

感谢您的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T06:55:39.610

将其与 jQuery 的`live`函数绑定。

```
$('#tbl tbody').live('keydown', function(e) {}); 
```

这也将回调应用于在运行时创建的元素。

**[文档](http://api.jquery.com/live/)**

# xml - 在 xul 列选择器中本地化“恢复列顺序”文本

> ID：14108506
> 
> 赞同：1
> 
> 时间：2013-01-01T06:51:02.723
> 
> 标签：xml, firefox, plugins, localization, xul

当[树](https://developer.mozilla.org/en-US/docs/XUL/tree#a-enableColumnDrag)启用了列拖动功能（`enableColumnDrag`）时，列选择器具有“恢复列顺序”菜单项。如何本地化`Restore column order`文本？

![在此处输入图像描述](../Images/856361bd593608e967ecb50697a9425d.png)

# android - 带有复选框和文本视图的列表视图

> ID：14108508
> 
> 赞同：0
> 
> 时间：2013-01-01T06:51:48.310
> 
> 标签：android, listview

在我的应用程序中，我有一个带有复选框和文本视图的列表视图，以及屏幕底部的一个按钮。当用户单击按钮时，我必须在数组中的列表视图中获取所选项目..我试过了

我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent">

    <Button android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:id="@+id/testbutton"
        android:text="OK" android:layout_alignParentBottom="true" />

    <ListView android:layout_width="fill_parent"
        android:layout_height="fill_parent" android:id="@+id/listforSetting"
        android:layout_alignParentTop="true" android:layout_above="@id/testbutton" />

</RelativeLayout> 
```

我的活动：

```
String[] item = common.context.getInstance().getCategoryitem();
    String[] name;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listforsetting);
        final ListView lView = (ListView) findViewById(R.id.listforSetting);
        Button b=(Button)findViewById(R.id.testbutton);

        lView.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_multiple_choice, item));
        lView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

        b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                SparseBooleanArray checked = lView.getCheckedItemPositions();

                for (int i = 0; i < item.length; i++){
                    if (checked.get(i))
                    {
                        name[i]=lView.getItemAtPosition(i).toString();
                        System.out.println("item="+name[i]);
                    }

                }

            }
        }); 
```

但它显示为空指针异常（单击按钮时）..请帮我解决这个问题。

我的日志猫：

```
01-01 12:17:20.817: E/AndroidRuntime(584): Uncaught handler: thread main exiting due to uncaught exception
01-01 12:17:20.847: E/AndroidRuntime(584): java.lang.NullPointerException
01-01 12:17:20.847: E/AndroidRuntime(584):  at com.newspaper.ListforSetting$1.onClick(ListforSetting.java:39)
01-01 12:17:20.847: E/AndroidRuntime(584):  at android.view.View.performClick(View.java:2364)
01-01 12:17:20.847: E/AndroidRuntime(584):  at android.view.View.onTouchEvent(View.java:4179)
01-01 12:17:20.847: E/AndroidRuntime(584):  at android.widget.TextView.onTouchEvent(TextView.java:6541)
01-01 12:17:20.847: E/AndroidRuntime(584):  at android.view.View.dispatchTouchEvent(View.java:3709)
01-01 12:17:20.847: E/AndroidRuntime(584):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
01-01 12:17:20.847: E/AndroidRuntime(584):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
01-01 12:17:20.847: E/AndroidRuntime(584):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
01-01 12:17:20.847: E/AndroidRuntime(584):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
01-01 12:17:20.847: E/AndroidRuntime(584):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
01-01 12:17:20.847: E/AndroidRuntime(584):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
01-01 12:17:20.847: E/AndroidRuntime(584):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
01-01 12:17:20.847: E/AndroidRuntime(584):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
01-01 12:17:20.847: E/AndroidRuntime(584):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
01-01 12:17:20.847: E/AndroidRuntime(584):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-01 12:17:20.847: E/AndroidRuntime(584):  at android.os.Looper.loop(Looper.java:123)
01-01 12:17:20.847: E/AndroidRuntime(584):  at android.app.ActivityThread.main(ActivityThread.java:4363)
01-01 12:17:20.847: E/AndroidRuntime(584):  at java.lang.reflect.Method.invokeNative(Native Method)
01-01 12:17:20.847: E/AndroidRuntime(584):  at java.lang.reflect.Method.invoke(Method.java:521)
01-01 12:17:20.847: E/AndroidRuntime(584):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
01-01 12:17:20.847: E/AndroidRuntime(584):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
01-01 12:17:20.847: E/AndroidRuntime(584):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:02:03.150

你没有灌输你的`name[]`

```
name[] = new String[item.length] ;
for (int i = 0; i < item.length; i++)
{
     if (checked.get(i))
     {
         name[i]=lView.getItemAtPosition(i).toString();
         System.out.println("item="+name[i]);
     }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T06:57:15.570

确保初始化`name`数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T07:15:01.977

`item[]`数组的元素是什么？确保`item[]`数组包含您要添加到其中的项目的列表。并初始化`String[] name=null;`or`String[] name=new String[];`

# c# - 反序列化具有接口的类

> ID：14108509
> 
> 赞同：1
> 
> 时间：2013-01-01T06:51:47.997
> 
> 标签：c#, serialization

我有一个包含接口成员变量的类。我如何反序列化这个类

```
interface ISensor { }

[Serializable]
class Sensor: ISensor { }

[Serializable]
class Root
{
    [XmlElement("Sensor")]
    public List<ISensor> SensorList{ get; set; }
} 
```

我的 XML 将是这样的

```
 <?xml version="1.0" encoding="us-ascii"?>
<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <Sensor >
        <SensorName>Name1</SensorName>
        <SensorValue>0.0</SensorValue>
    </Sensor>
    <Sensor>
        <SensorName>Name2</SensorName>
        <SensorValue>148.00</SensorValue>
    </Sensor>
</Root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:50:39.533

假设您使用[`XmlSerializer`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)的是 ，序列化和反序列化都需要进行两项更改：

1.  告诉序列化器可以出现的类型列表，也就是继承自的类型`Sensor`。
2.  对 List 使用类而不是接口，换句话说，替换`List<ISensor>`为`List<Sensor>`.

不幸的是，XmlSerializer 不能以您想要的方式处理接口。有关详细信息，请参阅[XmlSerializer 序列化通用接口列表](https://stackoverflow.com/questions/3704807/c-sharp-xmlserializer-serialize-generic-list-of-interface)。

如果使用基类不是一个选项，您可以通过实现来编写自己的 XML 序列化程序[`IXmlSerializable`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx)。手动覆盖[`ReadXml`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.readxml.aspx)并解析 XML。

例如：

```
public interface ISensor { }

[Serializable]
public class Sensor : ISensor { }

[Serializable]
public class Root
{
    // Changed List<ISensor> to List<Sensor>. I also changed
    // XmlElement to XmlArray so it would appear around the list.       
    [XmlArray("Sensor")]
    public List<Sensor> SensorList { get; set; }
}

[Serializable]
public class SensorA : Sensor
{
    [XmlElement("A")]
    public string A { get; set; }
}

[Serializable]
public class SensorB : Sensor
{
    [XmlElement("B")]
    public string B { get; set; }
}

class Program
{
    public static void Main(string[] args)
    {
        XmlSerializer xmlSerializer;

        Root root = new Root();
        root.SensorList = new List<Sensor>();
        root.SensorList.Add(new SensorA() {A = "foo"});
        root.SensorList.Add(new SensorB() {B = "bar"});

        // Tell the serializer about derived types
        xmlSerializer = new XmlSerializer(typeof (Root), 
            new Type[]{typeof (SensorA), typeof(SensorB)});
        StringBuilder stringBuilder = new StringBuilder();
        using (StringWriter stringWriter = new StringWriter(stringBuilder))
        {
            xmlSerializer.Serialize(stringWriter, root);
        }

        // Output the serialized XML
        Console.WriteLine(stringBuilder.ToString());

        Root root2;
        using (StringReader stringReader = new StringReader(stringBuilder.ToString()))
        {
            root2 = (Root) xmlSerializer.Deserialize(stringReader);
        }
    }
} 
```

Console.WriteLine 语句的输出是：

```
<?xml version="1.0" encoding="utf-16"?>
<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Sensor>
    <Sensor xsi:type="SensorA">
      <A>foo</A>
    </Sensor>
    <Sensor xsi:type="SensorB">
      <B>bar</B>
    </Sensor>
  </Sensor>
</Root> 
```

# css - 歌剧忽略浮动：左；

> ID：14108513
> 
> 赞同：0
> 
> 时间：2013-01-01T06:52:54.533
> 
> 标签：css, css-float, opera

我遇到了以下问题：`<div class='navbar_item navbar_item_active font_colaboratelight' id='nav_".$navbarlink_id."_active' style='float:left;color:#ffffff;'>`

浮动里面的元素很好......我一直在尝试一切，但我解决这个问题的唯一方法是在浮动元素上设置宽度，这是非常不切实际的，因为我不知道它们的内容...... .

有想法该怎么解决这个吗？

```
echo "<div style='width:960px;height:37px;margin-left:auto;margin-right:auto;'>
    <div style='height:37px;background:url(/system/images/navbar/background/1.png);position:absolute;left:0px;right:0px;z-index:-1;'></div>
        <div id='navbar_content' style='line-height:0px;width:960px;'>";

            // get navbar shortcuts
            $links = frontend_getnavbarlinks("sid_".$shop_id,$lang);

            foreach($links as &$link){

                $navbarlink_id = $link['id'];

                $link_section_arr = explode(':',$link['section']);
                $sectionlink_type = $link_section_arr[0];
                $sectionlink_id = $link_section_arr[1];

                if($link_section_arr[0] == 'c'){
                    $href = "/catalog/".$sectionlink_id."/";
                }

                echo "
                <a href='".$href."' class='toggle_reconstruct'>

                <div class='navbar_item navbar_item_active font_colaboratelight' id='nav_".$navbarlink_id."_active' style='float:left;color:#ffffff;'>
                    <div style='float:left;'><img src='/system/images/navbar/background_active/1_left.png'></div>
                    <div style='float:left;background:url(/system/images/navbar/background_active/1_middle.png);background-repeat:repeat-x;height:37px;'>
                        <div style='float:left;color:#E46F7B;font-size:15px;margin-right:6px;margin-left:6px;margin-top:12px;'>".$link['info']['label']."</div>
                    </div>
                    <div style='float:left;'><img src='/system/images/navbar/background_active/1_right.png'></div>
                    <div style='clear:both;'></div>
                </div>

                <div class='navbar_item navbar_item_inactive font_colaboratelight nav_btn_".$sectionlink_type.$sectionlink_id."' id='nav_".$navbarlink_id."_inactive' style='float:left;color:#ffffff;'>
                    <input type='text' value='".$link['does_expand']."' class='nav_expand_indicator' style='display:none;'>
                    <input type='text' value='".$navbarlink_id."' class='nav_section_id' style='display:none;'>
                    <input type='text' value='".$sectionlink_id."' class='nav_sectionlink_id' style='display:none;'>

                    <div style='padding-left:10px;padding-right:10px;height:37px;'>
                        <div style='float:left;color:#ffffff;font-size:15px;margin-right:6px;margin-left:6px;margin-top:12px;'>".$link['info']['label']."</div>
                    </div>
                </div>

                </a>
                ";

            }

                echo "
                <div style='clear:both;'></div>
        </div>
    </div>
    <div style='clear:both;'></div>

    <div id='navbar_expand1'></div>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T10:06:03.930

试试下面的代码。

可能对你有帮助。。

'显示：内联块'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T00:22:54.203

我想通了，由于某种原因，歌剧一直将我的字体大小设置为 0px，而没有另行声明，所以我不得不设置 font-size:1px; 不需要或明确设置字体大小的地方......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T07:08:12.463

尝试通过给 float : left 到 div navbar_content

# java - 如何停止 Eclipse 从存储库中重新下载 Maven 项目的插件

> ID：14108516
> 
> 赞同：0
> 
> 时间：2013-01-01T06:53:04.710
> 
> 标签：java, eclipse, maven, maven-2, m2e

我正在将现有项目导入我的 Eclipse 工作区。我正在使用 Maven 2.2.0 和 Eclipse Juno。我可以使用 mvn 命令提示符成功构建项目。

但无法导入项目，因为 Eclipse 无法构建项目。Eclipse 正在尝试再次从存储库下载。如果我们停止 Eclipse 以再次从存储库下载资源怎么办。

我以为我会添加`Windows--->Preferences-->Maven--Archetype--Add local catalog`

我知道我们有`~/.m2/archetype-catalog.xml`目录文件。但令我惊讶的是，我找不到它。

如果我以正确的方式进行，请建议我。

如果方法正确，我该如何设置本地原型。

请分享你的想法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T07:03:58.063

您需要安装 mvn 插件并导入 mvn 项目。或者，您可以使用目标 eclipse:eclipse（使用 mvn 命令行）使 mvn 项目黯然失色。

在 mvn 本身中，如果 Eclipse 仍然存在问题，您可以暂时将 pluginRepo 设置为 updatePolicy NEVER。我认为 Eclipse 使用相同的设置来导入 mvn 项目。

[http://maven.apache.org/settings.html](http://maven.apache.org/settings.html)

我个人从未对 Eclipse 的 mvn 集成感到满意。你试过 IntelliJ 吗？

# c# - WPF将项目从一个列表框移动到另一个列表框并再次返回并在使用ItemsSource时获取操作无效

> ID：14108531
> 
> 赞同：0
> 
> 时间：2013-01-01T06:55:55.423
> 
> 标签：c#, wpf, listbox, observablecollection

我有两个列表框。每个都从 SQLight 查询中获取数据。用户可以通过 dbl-click 项目进行选择，它应该将其从 LB1 中删除并将其放置在 LB2 中。用户可以选择从 LB2 中删除，并且应该移回 LB1，直到他们对选择感到满意为止。我正在使用 LB2 中保存的数据来过滤掉在 LB1 中找到的任何项目（根据代码）。一旦用户对所选项目感到满意，LB2 数据就会保存回 DB。用户可以随时返回 UI 并根据需要添加/删除项目。

我正在使用 2 x ObservableCollections 来填充 LB1 和 LB2。我正在使用模板来控制两个 LB 的布局。IE 一旦项目在列中说 10 个项目，它就会“溢出”到 LB 中的新列中。

我可以让 LB1 正确填充，甚至将项目移动到 LB2，但是当我想再次将其移回时，我得到......

```
 "Operation is not valid while ItemsSource is in use. Access and modify elements with ItemsControl.ItemsSource instead." 
```

我是 WPF C# 的新手，需要有关如何解决此问题的明确说明。（现在已经努力解决这个问题了 4 周）。该解决方案需要适用于两个 ListBox。对此的任何帮助将不胜感激。

请查看附加的代码并发表评论...

CS...

```
 using System;
            using System.Windows;
            using System.Windows.Input;
            using System.Windows.Controls;
            using System.Data;
            using System.Data.SQLite;
            using System.Collections;
            using System.Collections.ObjectModel;
            using System.Collections.Generic;
            using PTWS.Class_Lib;

            using System.ComponentModel;
            using System.Windows.Data;
            using System.Windows.Media;

            namespace PTWS.MainPanelControls.FormControls.Permits
            {
                /// <summary>
                /// Interaction logic for ColdWorkDraftUControl.xaml
                /// </summary>
                public partial class ColdWorkDraftUControl : UserControl
                {
                    PTWDatabase db = new PTWDatabase();

                    ObservableCollection<CertificateLookup> CertificateLookupList = new ObservableCollection<CertificateLookup>();
                    ObservableCollection<CertificateSelected> CertificateSelectedList = new ObservableCollection<CertificateSelected>();

                    public ColdWorkDraftUControl()
                    {
                        InitializeComponent();

                        LoadDataCertificateLookup();
                        // all works great untill I uncomment the next line
                        //LoadDataCertificateSelected();            
                    }

                    private void LoadDataCertificateLookup()
                    {
                        try
                        {
                            DataTable conditions;
                            String query = "select lc.Section \"Section\""
                                + ", lc.Description \"Description\""
                                + ", lc.SortOrder \"SortOrder\" "
                                + "from LookupConditions lc "
                                + "where not exists (select 1 from SelectedConditions sc where sc.Code = lc.Code and sc.PermitID = 'CWP-12-00001') "
                                + "and lc.Section = 'Certificates'";

                            conditions = db.GetDataTable(query);

                            foreach (DataRow r in conditions.Rows)
                            {
                                CertificateLookupList.Add(new CertificateLookup()
                                {
                                    Section = r["Section"].ToString(),
                                    Description = r["Description"].ToString(),
                                    SortOrder = r["SortOrder"].ToString()
                                });
                            }

                            listBoxCertificateLookup.ItemsSource = CertificateLookupList;
                        }
                        catch (Exception fail)
                        {
                            String error = "The following error has occurred:\n\n";
                            error += fail.Message.ToString() + "\n\n";
                            MessageBox.Show(error);
                        }
                    }

                    void LoadDataCertificateSelected()
                    {
                        try
                        {
                            DataTable conditions;
                            String query = "select Section \"Section\""
                                + ", Description \"Description\""
                                + ", SortOrder \"SortOrder\"";
                            query += "from SelectedConditions where PermitID = 'CWP-12-00001' and Section = 'Certificates'";
                            conditions = db.GetDataTable(query);

                            foreach (DataRow r in conditions.Rows)
                            {
                                CertificateSelectedList.Add(new CertificateSelected()
                                {
                                    selectedSection = r["Section"].ToString(),
                                    selectedDescription = r["Description"].ToString(),
                                    selectedSortOrder = r["SortOrder"].ToString()
                                });
                            }
                            listBoxCertificateSelected.DataContext = CertificateSelectedList;
                        }
                        catch (Exception fail)
                        {
                            String error = "The following error has occurred:\n\n";
                            error += fail.Message.ToString() + "\n\n";
                            MessageBox.Show(error);
                        }
                    }

                    private void listBoxCertificateLookup_MouseDoubleClick(object sender, MouseButtonEventArgs e)
                    {
                        try
                        {
                            ListBoxItem myListBoxItem =
                                (ListBoxItem)(listBoxCertificateLookup.ItemContainerGenerator.ContainerFromItem(listBoxCertificateLookup.Items.CurrentItem));
                            // listBoxCertificateSelected.DataContext = null;
                            listBoxCertificateSelected.Items.Add(myListBoxItem);
                        }
                        catch (Exception fail)
                        {
                            String error = "The following error has occurred:\n\n";
                            error += fail.Message.ToString() + "\n\n";
                            MessageBox.Show(error);
                        }
                    }

                    private void listBoxCertificateSelected_MouseDoubleClick(object sender, MouseButtonEventArgs e)
                    {
                        try
                        {
                            ListBoxItem myListBoxItem =
                                (ListBoxItem)(listBoxCertificateSelected.ItemContainerGenerator.ContainerFromItem(listBoxCertificateSelected.Items.CurrentItem));

                            //listBoxCertificateLookup.DataContext = null;
                            listBoxCertificateLookup.Items.Add(myListBoxItem);
                        }
                        catch (Exception fail)
                        {
                            String error = "The following error has occurred:\n\n";
                            error += fail.Message.ToString() + "\n\n";
                            MessageBox.Show(error);
                        }
                    }
                }
            } 
```

XAML...

```
 <UserControl x:Class="PTWS.MainPanelControls.FormControls.Permits.ColdWorkDraftUControl"
                         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                         mc:Ignorable="d" 
                         d:DesignHeight="300" d:DesignWidth="300">

                <Grid>
                    <ListBox Name="listBoxCertificateLookup"
                             ItemsSource="{Binding CertificateSelectedList}"
                             MouseDoubleClick="listBoxCertificateLookup_MouseDoubleClick"
                             IsSynchronizedWithCurrentItem="True"
                             HorizontalAlignment="Left" Width="300" Height="75" VerticalAlignment="Top" >
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Height="23" Orientation="Horizontal">
                                    <TextBlock Text="{Binding Path=Description}" VerticalAlignment="Top" />
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel IsItemsHost="True" Orientation="Vertical" />
                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>
                    </ListBox>

                    <ListBox Name="listBoxCertificateSelected"
                             ItemsSource="{Binding}"
                             MouseDoubleClick="listBoxCertificateSelected_MouseDoubleClick"
                             HorizontalAlignment="Left" Width="300" Height="75" VerticalAlignment="Top" Margin="0,153,0,0">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Height="23" Orientation="Horizontal">
                                    <TextBlock Name="textBlock" Text="{Binding Path=selectedDescription}" VerticalAlignment="Top" />
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                        <ListBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel IsItemsHost="True" Orientation="Vertical" />
                            </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>
                    </ListBox>
                </Grid>
            </UserControl> 
```

班级...

```
 using System;
            using System.Collections.Generic;
            using System.Linq;
            using System.Text;

            namespace PTWS.Class_Lib
            {
                class CertificateLookup
                {
                    public string Section { get; set; }
                    public string Description {get; set;}
                    public string SortOrder { get; set; }

                    public string selectedSection { get; set; }
                    public string selectedDescription { get; set; }
                    public string selectedSortOrder { get; set; }
                }
            } 
```

已修改 CS 文件 mouseDoubleClick 事件（针对两个列表框进行了适当修改）...

```
 CertificateLookup myListBoxItem = (CertificateLookup)((ListBox)sender).SelectedItem;

                            CertificateSelectedList.Add(new CertificateSelected()
                            {
                                selectedDescription = myListBoxItem.Description
                            });

                            CertificateLookupList.Remove(myListBoxItem); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T07:32:33.457

您的问题是您正在向*ListBox*添加项目，而不是向列表框绑定到的集合中添加和删除项目。

而不是做: `listBoxCertificateSelected.Items.Add(myListBoxItem);`，您应该直接从`CertificateSelectedList`and中添加/删除`CertificateLookupList`。

# jquery - 使用 JSONP 的 Ajax 跨域请求

> ID：14108532
> 
> 赞同：0
> 
> 时间：2013-01-01T06:56:05.400
> 
> 标签：jquery

我正在使用 JSONP 进行 AJAX 跨域调用，如下所示：

```
 $(document).ready(function () {
          $("#btnWCFREST").click(function () {
          $.ajax({
                  type: "GET",
                  url: "http://localhost:1415/MyService.svc/rh/data?id=4&callback=mycallback",
                  processData: false,
                  dataType: 'jsonp',
                  jsonpCallback: 'mycallback',
                  jsonp: 'callback'

              });

          });
      });

      function mycallback(data) {
          alert(data);
      }; 
```

我没有得到任何回应。有人可以帮我解决这个问题吗？通话有什么问题？

我已将呼叫更改为以下仍然没有运气：

```
 $(document).ready(function () {
          $("#btnWCFREST").click(function () {
                 var url = "http://localhost:1415/MyService.svc/rh/data?id=4";
                  $.getJSON(url + "?callback=?", null, function(data) {
                    alert(data);
                });
         });
      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:12:26.480

Jquery 的`ajax`文档[说](http://api.jquery.com/jQuery.ajax/)：添加一个额外的“？callback =？” 到 URL 的末尾以指定回调。您的 url 不符合该要求，因此它被视为*JSON*（而不是*JSONP*）请求，这将受到[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的限制。您可以参考 Stackoverflow 上的一个工作示例：[jsonp with jquery](https://stackoverflow.com/questions/2681466/jsonp-with-jquery)。此外，您应该确保跨域服务器支持 JSONP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T07:11:16.097

尝试添加`crossDomain : true`您的 Ajax 设置：

```
 $.ajax({
              type: "GET",
              url: "http://localhost:1415/MyService.svc/rh/data?id=4&callback=mycallback",
              processData: false,
              dataType: 'jsonp',
              jsonpCallback: 'mycallback',
              jsonp: 'callback',
              crossDomain: true
       }); 
```

# javascript - 如何使用媒体源 api 将两个视频文件数据附加到源缓冲区？

> ID：14108536
> 
> 赞同：11
> 
> 时间：2013-01-01T06:56:27.437
> 
> 标签：javascript, html, api, video, streaming

我有两个视频名称 v11.webm 和 v12.webm。

我想要的是这两个视频应该无缝运行，没有任何间隙。

我正在遵循将数据附加到源缓冲区的媒体源 API 方法。

我指的是这个[链接上给出的演示](http://html5-demos.appspot.com/static/media-source.html)

我已经修改了该示例并删除了对视频进行分块的部分，并且还尝试将数据附加到源缓冲区文件中。

我的代码如下：

```
<script>

var video = document.querySelector('video');

window.MediaSource = window.MediaSource || window.WebKitMediaSource;
if (!!!window.MediaSource) {
  alert('MediaSource API is not available');
}

var mediaSource = new MediaSource();

video.src = window.URL.createObjectURL(mediaSource);

mediaSource.addEventListener('webkitsourceopen', function(e) {

    var sourceBuffer = mediaSource.addSourceBuffer('video/webm; codecs="vorbis,vp8"');  

    for(i=1;i<=2;i++)
    {
        (function(i){

          GET('v1'+i+'.webm', function(uInt8Array) {
              var file = new Blob([uInt8Array], {type: 'video/webm'});

              var reader = new FileReader();
              reader.onload = function(e) {
                sourceBuffer.append(new Uint8Array(e.target.result));            
              };
              reader.readAsArrayBuffer(file);

          });
        })(i);
    }

}, false);

mediaSource.addEventListener('webkitsourceended', function(e) {
  logger.log('mediaSource readyState: ' + this.readyState);
}, false);

function GET(url, callback) {
 // alert(url);
  var xhr = new XMLHttpRequest();
  xhr.open('GET', url, true);
  xhr.responseType = 'arraybuffer';
  xhr.send();

  xhr.onload = function(e) {
    if (xhr.status != 200) {
      alert("Unexpected status code " + xhr.status + " for " + url);
      return false;
    }
    callback(new Uint8Array(xhr.response));
  };
}
</script> 
```

现在代码没有按预期工作。

v11.webm 和 v12.webm 文件数据的混合不一致。

它没有无缝运行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-02T21:40:15.620

也许有点晚了，但我能够弄清楚这一点。您的新视频正在覆盖旧视频，因为它们都从时间 0 开始。您必须在附加之前指定新视频从时间 X 开始，因此您的“webkitsourceopen”事件函数应该是：

```
/* forget the sourcebuffer variable, we'll just manipulate mediaSource */
mediaSource.addSourceBuffer('video/webm; codecs="vorbis,vp8"');

/* it seems ok to set initial duration 0 */
var duration = 0;
var totalVideos = 2;

/* use this type of loop to ensure that that a single video
   is downloaded and appended before moving on to the next video,
   mediasource seems picky about these being in order */
var i = 0;
(function readChunk_(i){

    /* the GET function already returns a Uint8Array.
       the demo you linked reads it in filereader in order to manipulate it;
       you just want to immediately append it */
    GET('v1' + (i + 1) + '.webm', function(uint8Array){

        if(i == totalVideos) {
            mediaSource.endOfStream();
        } else {

            /* assuming your videos are put together correctly
               (i.e. duration is correct), set the timestamp offset
               to the length of the total video */
            mediaSource.sourceBuffers[0].timestampOffset = duration;

            mediaSource.sourceBuffers[0].append(uint8Array);

            /* set new total length */
            duration = mediaSource.duration;

            readChunk(++i);
        }
    });
})(i); 
```

现在，如果只有 MediaSource 对它接受的视频的结构不那么挑剔的话。除了您链接的[Eric Bidelman 的演示](http://updates.html5rocks.com/2011/11/Stream-video-using-the-MediaSource-API)中使用的那个之外，我还没有找到一个可以工作的示例 .webm 。

**编辑：**做更多测试后，我设置持续时间的方式可能不正确。如果您似乎在每次追加后获得指数持续时间增长，请尝试将 timestampoffset 设置为 0 并且不更改它。我不知道为什么这似乎可以解决它，这可能是我如何生成 webm 文件的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-08T10:41:52.960

只需将 sourceBuffer 的模式设置为`'sequence'`（默认似乎是`'segments'`）

来自文档：[https ://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer/mode](https://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer/mode)

> 序列：将片段附加到 SourceBuffer 的顺序决定了它们的播放顺序。为遵守此顺序的段自动生成段时间戳。

在我的应用程序中，我只是在将源缓冲区添加到媒体源之后设置它：

```
// Create media source for the stream, and create the source buffer when ready
let self = this;
this._mediaSource = new MediaSource();
this._mediaSource.addEventListener('sourceopen', function () {
  self._sourceBuffer = self.mediaSource.addSourceBuffer(environment.recordingMimeType);
  self._sourceBuffer.mode = 'sequence'; // This is the relevant part
  self._sourceBuffer.addEventListener('error', function (ev) {
    console.error("Source buffer error ??");
    console.error(ev);
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T07:49:26.920

我在您的代码中缺少的是： mediaSource.endOfStream();

你能详细说明不一致的混合问题吗？

# iphone - 不显示空的分组单元格表视图

> ID：14108544
> 
> 赞同：0
> 
> 时间：2013-01-01T06:58:07.737
> 
> 标签：iphone, objective-c, ios

我正在执行与 Contacts.app 中的*查看联系人*类似的视图，这意味着我在不同部分（电话、电子邮件等）下有多个不需要的字段（第二个工作电话、第二个电子邮件等）。

当某些字段为空时，我不想显示它们，当某个部分下的所有字段都为空时，我不想显示该部分。此外，某些单元格对它们有作用，例如在点击电话号码单元格时，它会呼叫显示的号码。目前，这些操作是`didSelectRowAtIndexPath`根据单元格位置使用基本 if 手动处理的。

我找不到一个优雅的解决方案来完成这一切......我为每个部分尝试了一系列字典（每个单元格），但事情很快就变得一团糟。此外，由于行的顺序永远不会相同，我不能轻松地使用 ifs 处理`didSelectRowAtIndexPath`基于单元格位置的方法中的所有操作。

哦，我在后台使用 Core Data。

有人必须做类似的事情并愿意分享他的想法吗？

谢谢！

我现在设置静态 ifs 以区分单元格的示例：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    if (indexPath.section == 0)
    {
        // Custom actions here
    }
    else if (indexPath.section == 1)
    {
        // Other actions here
        [self showMailComposeWithEmail:cell.textLabel.text];
    }
} 
```

还有另一种使用 indexPath 来区分样式和行为的方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    if (indexPath.section == 0)
    {
        if (indexPath.row == 0)
        {
            cell.textLabel.text = self.contact.phone;
        }
    }
    else if (indexPath.section == 1)
    {
        if (indexPath.row == 0)
        {
            cell.textLabel.text = self.contact.email;
        }
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T04:32:44.367

拿一本字典，当您向该字典添加对象时，请确保其中的数据不为空。在字典中为键添加数据，如下所示：

```
Phones - key 0^0 (it means at 0 section 0 row)
WorkPhone - key 0^1(it means at 0 section 1st row)
Emails - key1^0 (1 section 0th row) and so on... 
```

并在`cellForRowAtIndexPath`获取此值时

```
[dict valueForKey:[NSString stringWithFormat:@"%d^%d",indexPath.section,indexPath.row]]; 
```

希望那很清楚。

# asp.net-mvc - 带有 jquery-file-upload Request.Files.Count 的 asp.net mvc 4 始终为 0

> ID：14108545
> 
> 赞同：6
> 
> 时间：2013-01-01T06:58:31.227
> 
> 标签：asp.net-mvc, jquery-file-upload

我目前使用 asp.net mvc 4 ，并使用 jquery-file-upload 上传图片，如果我这样初始化：

```
 $('#fileupload').fileupload();

        $('#fileupload').fileupload('option', {
            //url: '/Admin/News/Create',
            maxFileSize: 500000000,
            acceptFileTypes: /(\.|\/)(gif|jpe?g|png)$/i,
            maxNumberOfFiles: 1,
            resizeMaxWidth: 1920,
            resizeMaxHeight: 1200,
        }); 
```

选择图片文件时，可以在浏览器中预览图片，但在mvc Action Request.Files.Count中为0，表示没有上传文件。如果我这样初始化：

```
 //$('#fileupload').fileupload();

        $('#fileupload').fileupload('option', {
            //url: '/Admin/News/Create',
            maxFileSize: 500000000,
            acceptFileTypes: /(\.|\/)(gif|jpe?g|png)$/i,
            maxNumberOfFiles: 1,
            resizeMaxWidth: 1920,
            resizeMaxHeight: 1200,
        }); 
```

我无法预览图像，但 mvc 操作获取文件，有人知道为什么吗？控制器的邮政编码：

```
 [HttpPost]
    [ValidateInput(false)]
    public ActionResult Create(NewsViewModel model, FormCollection form)
    {
        if (ModelState.IsValid)
        {
            //....

            // upload image
            foreach (string file in Request.Files)
            {
                HttpPostedFileBase hpf = Request.Files[file] as HttpPostedFileBase;
                if (hpf.ContentLength == 0)
                    continue;
                string path = Path.Combine(Server.MapPath("~/Uploads/News/"),GUID.NewGuid()+ Path.GetExtension(hpf.FileName));
                hpf.SaveAs(path);

                data.ImagePath = path;
                _iNewsService.UpdateNews(data);
            }
        }           
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T09:28:35.163

我有同样的问题，解决了以下问题：

```
 [HttpPost]
    [ValidateInput(false)]
    public ActionResult Create(NewsViewModel model, FormCollection form)
    {                  
            var length = Request.ContentLength;
            var bytes = new byte[length];
            Request.InputStream.Read(bytes, 0, length); 

            //or for creating image from stream 

            Bitmap bmp = new Bitmap(Bitmap.FromStream(InputStream));
            bmp.Save("some path");  

   } 
```

希望这会有所帮助。

# forms - DFM 文件变成二进制文件并被感染

> ID：14108548
> 
> 赞同：0
> 
> 时间：2013-01-01T06:58:49.230
> 
> 标签：forms, delphi, dfm

我们有一个以文本文件开头的 DFM 文件。

几年后，在我们的一个较新版本中，Borland Developer Studio 将其更改为二进制格式。

此外，该文件已被感染。

有人可以解释我现在该怎么办吗？我在哪里可以找到如何读取二进制文件结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:04:32.373

好吧，我发现了 DFM 文件发生了什么，但我不知道为什么。

从文本文件更改为二进制文件的发生是已知的，并且可以在另一个问题的*堆栈溢出中找到。*我将仅描述文件的感染情况。

在 DFM 文件的原始语言 Pascal 中，字符串是这样定义的：第一个字节是字符串的长度（0-255），其他字符是字符串。（与 C 不同，它的字符串长度由空字符识别）。

有人（也许是 BDS？）在将文件从文本文件更改为二进制文件时，还将所有长度为 13（0D）的字符串更改为长度为 10（0A）。这样，字符串在 10 个字符后结束，下一个字符是属性的值。

我下载了二进制编辑器，修复了所有长度为 10 的出现，文件显示和编译良好。

（不仅属性长度被感染，而且 Icon.Data 属性上的一个字节也从 0D 替换为 0A）

# string - 如何将自定义 IntelliJ 语言注入添加到 scala 字符串插值？

> ID：14108551
> 
> 赞同：10
> 
> 时间：2013-01-01T06:59:08.357
> 
> 标签：string, scala, intellij-idea, syntax-highlighting

在 IntelliJ 中使用 Scala，你已经可以做到

```
var c = s"some ${compound * expression}" 
```

并为`${compound * expression}`. Scala 允许您定义自定义字符串插值器，以执行其他操作

```
var c = javascript"var x = [1, 2, 3]" 
```

有谁知道如何使用自定义语言注入功能来很好地突出这些自定义字符串插值器？我已经搞砸了 File->Settings->Language Injections 下的东西，但它看起来真的很混乱，而且我找不到任何现有的执行魔术字符串插值语法的注入。大概是硬编码的（因为它也有很好的代码导航功能），但我希望有一些方法可以让它识别出很好的`something"..."`语法并为我很好地突出显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:32:05.330

您可以使用“灯泡”手动为每个字符串执行此操作，但如果您想为每个字符串插值器自动执行此操作，我认为您将必须编写自己的插件（如果这是您的第一个插件，这可能需要一些时间插入）。

您可能会直接在[JetBrains 论坛中获得更好的答案/帮助。](http://devnet.jetbrains.net/community/idea/open_api_and_plugin_development)

# algorithm - 获取网格的边界边缘 - 按缠绕顺序

> ID：14108553
> 
> 赞同：19
> 
> 时间：2013-01-01T06:59:20.043
> 
> 标签：algorithm, geometry, mesh, triangulation, convex-polygon

我有一个三角网格。假设它看起来像一个凹凸不平的表面。我希望能够找到落在网格周围边界上的所有边缘。（忘记内部顶点）

我知道我必须找到只连接到一个三角形的边，并将所有这些边收集在一起，这就是答案。但我想确保这些边的顶点围绕形状顺时针排列。

我想这样做是因为我想在网格外部获得一条多边形线。

我希望这足够清楚，可以理解。从某种意义上说，我正在尝试对网格进行“去三角化”。哈！如果有这样的术语。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-01T09:10:38.700

边界边仅由网格中的单个三角形引用，因此要找到它们，您需要扫描网格中的所有三角形并使用单个引用计数获取边。您可以`O(N)`通过使用哈希表有效地（在 中）执行此操作。

要将边集转换为有序多边形循环，您可以使用遍历方法：

1.  选择任何未访问的边段`[v_start,v_next]`并将这些顶点添加到多边形循环中。
2.  `[v_i,v_j]`找到具有`v_i = v_next`或的未访问边段，`v_j = v_next`并将另一个顶点（*不*等于`v_next`）添加到多边形循环中。重置`v_next`为这个新添加的顶点，将边标记为已访问并从 2 继续。
3.  当我们回到`v_start`.

遍历将给出一个多边形循环，该循环可以具有顺时针或逆时针顺序。可以通过考虑[多边形的有符号面积](http://geomalgorithms.com/a01-_area.html)来建立一致的排序。如果遍历导致错误的方向，您只需反转多边形循环顶点的顺序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-12T00:46:41.270

俗话说 - 让它工作 - 然后让它更好地工作。我注意到在我上面的例子中，它假设边数组中的所有边实际上都链接在一个漂亮的边框中。在现实世界中可能并非如此（正如我从我正在使用的输入文件中发现的那样！）事实上，我的一些输入文件实际上有很多多边形并且都需要检测到边界。我还想确保缠绕顺序正确。所以我也解决了这个问题。见下文。（感觉我终于取得了进展！）

```
 private static List<int> OrganizeEdges(List<int> edges, List<Point> positions)
    {
        var visited = new Dictionary<int, bool>();
        var edgeList = new List<int>();
        var resultList = new List<int>();
        var nextIndex = -1;
        while (resultList.Count < edges.Count)
        {
            if (nextIndex < 0)
            {
                for (int i = 0; i < edges.Count; i += 2)
                {
                    if (!visited.ContainsKey(i))
                    {
                        nextIndex = edges[i];
                        break;
                    }
                }
            }

            for (int i = 0; i < edges.Count; i += 2)
            {
                if (visited.ContainsKey(i))
                    continue;

                int j = i + 1;
                int k = -1;
                if (edges[i] == nextIndex)
                    k = j;
                else if (edges[j] == nextIndex)
                    k = i;

                if (k >= 0)
                {
                    var edge = edges[k];
                    visited[i] = true;
                    edgeList.Add(nextIndex);
                    edgeList.Add(edge);
                    nextIndex = edge;
                    i = 0;
                }
            }

            // calculate winding order - then add to final result.
            var borderPoints = new List<Point>();
            edgeList.ForEach(ei => borderPoints.Add(positions[ei]));
            var winding = CalculateWindingOrder(borderPoints);
            if (winding > 0)
                edgeList.Reverse();

            resultList.AddRange(edgeList);
            edgeList = new List<int>();
            nextIndex = -1;
        }

        return resultList;
    }

    /// <summary>
    /// returns 1 for CW, -1 for CCW, 0 for unknown.
    /// </summary>
    public static int CalculateWindingOrder(IList<Point> points)
    {
        // the sign of the 'area' of the polygon is all we are interested in.
        var area = CalculateSignedArea(points);
        if (area < 0.0)
            return 1;
        else if (area > 0.0)
            return - 1;        
        return 0; // error condition - not even verts to calculate, non-simple poly, etc.
    }

    public static double CalculateSignedArea(IList<Point> points)
    {
        double area = 0.0;
        for (int i = 0; i < points.Count; i++)
        {
            int j = (i + 1) % points.Count;
            area += points[i].X * points[j].Y;
            area -= points[i].Y * points[j].X;
        }
        area /= 2.0f;

        return area;
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-01T11:49:43.747

遍历代码（效率不高 - 需要整理，会在某个时候达到） 请注意：我将链中的每个段存储为**2 个**索引 - 而不是 Darren 建议的 1 个。这纯粹是为了我自己的实现/渲染需求。

```
 // okay now lets sort the segments so that they make a chain.

        var sorted = new List<int>();
        var visited = new Dictionary<int, bool>();

        var startIndex = edges[0];
        var nextIndex = edges[1];

        sorted.Add(startIndex);
        sorted.Add(nextIndex);

        visited[0] = true;
        visited[1] = true;

        while (nextIndex != startIndex)
        {
            for (int i = 0; i < edges.Count - 1; i += 2)
            {
                var j = i + 1;
                if (visited.ContainsKey(i) || visited.ContainsKey(j))
                    continue;

                var iIndex = edges[i];
                var jIndex = edges[j];

                if (iIndex == nextIndex)
                {
                    sorted.Add(nextIndex);
                    sorted.Add(jIndex);
                    nextIndex = jIndex;
                    visited[j] = true;
                    break;
                }
                else if (jIndex == nextIndex)
                {
                    sorted.Add(nextIndex);
                    sorted.Add(iIndex);
                    nextIndex = iIndex;
                    visited[i] = true;
                    break;
                }
            }
        }

        return sorted; 
```

# c# - Sendkeys.Send 异常：关键字“SPACE”无效

> ID：14108560
> 
> 赞同：2
> 
> 时间：2013-01-01T07:00:46.873
> 
> 标签：c#, .net, winforms, sendkeys

我有以下代码：

```
Process.Start("cmd.exe");
System.Threading.Thread.Sleep(1000);
SendKeys.Send("{D}{I}{R}{SPACE}{ENTER}"); 
```

我知道这`Space`在这里没有任何作用，但我正在尝试解决另一个问题，所以我的问题是为什么我会得到这个异常`Keyword "SPACE" is not valid.`？我该如何发送`space`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T07:09:25.060

只需要对特殊字符进行转义（[这里的页面列表](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx)），其余的，包括空格，都可以按原样写；

```
SendKeys.Send("DIR {ENTER}"); 
```

# c# - 实体框架加载/保存数据

> ID：14108561
> 
> 赞同：2
> 
> 时间：2013-01-01T07:01:08.470
> 
> 标签：c#, database, winforms, entity-framework, sqlite

我在 C# Windows 窗体应用程序中使用 SQLite 和实体框架。我选择使用内存数据库。我正在尝试将磁盘上存在的数据库文件加载到内存中。我还需要将内存中的内容保存到磁盘。

这似乎是一项相对简单的任务，但如果没有硬编码表创建和每当我更改某些内容时更新查询，我就找不到一个优雅的解决方案（IE：不可行）

如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:08:12.033

实际上，您可以轻松地将`SQLite` [**内存数据库**](http://www.sqlite.org/inmemorydb.html) 与实体框架一起使用。

将以下线程作为初始指南：

*   [在内存中 Sqlite 实体框架上下文](http://sqlite.phxsoftware.com/forums/t/2604.aspx)
*   [首先使用内存数据库集成测试实体框架代码](https://stackoverflow.com/q/5912128/1437962)

# php - 通过php更新jira中的状态

> ID：14108563
> 
> 赞同：0
> 
> 时间：2013-01-01T07:01:31.617
> 
> 标签：php, rest, jira

我正在使用我构建的电子邮件客户端来更新 jira 任务。我已经设法通过它更改了受让人和摘要。但我似乎找不到更新状态的方法。以下是我使用的代码。

```
$resolution->id="4";
$update->transitions= array($resolution);
$queryIssue = new Jira($config);
$queryIssue->updateTransition($query,$update); 
```

班上：

```
public function updateTransition($issueKey,$json){
$this->request->openConnect('https://'.$this->host.'/rest/api/latest/issue/REC-143/transitions?', 'POST', $json);
$this->request->execute(); 
} 
```

这给了我一个错误，说 `Missing 'transition' identifier` 我在这里做错了什么。请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:15:10.103

我输入json的方式不正确。应该是，

```
$resolution->transition->id ="4";
$queryIssue->updateTransition('11205',$resolution); 
```

像这样。顺便说一句，我使用[这个库](https://github.com/FayP/JIRA-php)来满足我对 jira 的所有需求。这里没有包括的东西，我必须自己实现。如果您知道 api urls，这很容易。请查看其余 api 文档以获取您可能需要的合适 api。

# ios5 - 如何从情节提要中隐藏 UISearchbar

> ID：14108568
> 
> 赞同：0
> 
> 时间：2013-01-01T07:02:24.223
> 
> 标签：ios5, uisearchbar, xcode-storyboard

这更多的是化妆品问题。

我已经通过情节提要添加了一个搜索栏，我想用情节提要隐藏以下内容。

我以前可以使用故事板出现之前的代码来做到这一点。

如果使用情节提要可以实现，谁能指出我正确的方向？

干杯，兰斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T00:22:17.817

在故事板上，选择搜索栏并打开右侧的对象检查器。在它们中，您会发现一个名为“隐藏”的属性。选中该框，在情节提要初始化时该对象将被隐藏。

如果您从搜索栏中按住 ctrl 并在视图控制器中创建一个属性，则可以控制代码中的隐藏标志。因此，您可以在需要时让它重新出现，例如：

```
self.searchbar.hidden = NO; 
```

2013 年 1 月 2 日编辑 - 这是一种不同的方法。清单：

a) 在情节提要的表格视图的标题视图中添加一个搜索栏。将该搜索栏链接到名为 searchBar 的属性。当你链接它时，xcode 会给它一个弱引用，把弱引用改成强引用。前任：

```
@property (strong, nonatomic) IBOutlet UISearchBar *searchBar; 
```

b) 添加一个名为 showSearch 的 BOOL 属性来控制搜索栏的显示和隐藏。

```
@property (nonatomic) BOOL showSearch; 
```

c) 将以下方法添加到您的控制器代码中

```
- (void)setShowSearch:(BOOL)showSearch {

    _showSearch = showSearch;

    if (! _showSearch) {
        self.tableView.tableHeaderView = nil;
    }
    [self.tableView reloadData];

}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection: (NSInteger)section
{
    if (self.showSearch && self.tableView.tableHeaderView == nil) {
        return self.searchBar.frame.size.height;
    }
return 0;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    if (self.showSearch && self.tableView.tableHeaderView == nil) {
       return self.searchBar;
    }
    return nil;
} 
```

默认情况下，这将从显示搜索栏开始。如果您想从隐藏开始，只需将以下内容添加到您的 viewDidLoad 方法中：

```
self.showSearch = NO; 
```

祝你好运，新年快乐！

# objective-c - 通过标题或 ID 在 xcode 中使用 Objective C 访问使用 UI 构建器创建的元素

> ID：14108579
> 
> 赞同：10
> 
> 时间：2013-01-01T07:04:25.240
> 
> 标签：objective-c, xcode, user-interface

我到处寻找，我似乎无法弄清楚如何在 xcode 中访问我的 UI 中的元素。当我以编程方式创建 UI 元素时，我知道如何更改和访问元素，但当我使用 xcode ui 构建器制作它们时却不知道。

简单地说：是否有按标题或类似内容获取元素（我没有看到 ID 属性），如果有，请告诉我它在哪里或如何设置它。

Javascript相当于我正在尝试做的事情：`document.getElementById('ID');`

Java相当于我正在尝试做的事情：`(EditText)findViewById(ID);`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-01T07:13:33.627

您可以通过其标签获取元素。如果您在视图控制器代码中并且需要获取`123`在界面构建器中标记为的按钮，则可以使用以下代码：

```
UIButton *button123 = [self.view viewWithTag:123]; 
```

该元素不需要是按钮 - 它可以是任何`UIView`后代：标签、文本视图、步进器或其他任何东西。

请注意，访问您在界面构建器中创建的元素的更惯用方式是通过`IBOutlet`s.

以下是向视图或视图控制器添加插座的方法：在单独的窗口中打开界面构建器，按住 Control 单击要添加为插座的元素，在上下文菜单中找到“引用插座/新引用插座”下拉，然后从黑色圆圈拖到视图或视图控制器的标题中。当您将项目放入代码中时，系统会提示您输入插座的名称。创建出口后，您可以通过您创建的变量访问其对应的元素。

# oop - 异常是否只属于库

> ID：14108580
> 
> 赞同：1
> 
> 时间：2013-01-01T07:04:26.713
> 
> 标签：oop, exception

我刚刚[在这里](https://stackoverflow.com/questions/14108464/how-should-i-handle-exception-in-this-scenario/14108493#14108493)问了一个问题。

它是关于在虚拟库管理条件下处理异常。帖子上的答案令人信服，我不应该选择例外。

但是后来我只是[在这里](http://blogs.msdn.com/b/jaredpar/archive/2008/10/20/custom-exceptions-when-should-you-create-them.aspx)阅读了一篇文章，该文章很好地说明了这一点，并且符合我之前的问题给出的答案

> 如果您**希望开发人员**对问题采取纠正措施或记录事后调试，您应该只创建一个新的异常。

由于我们应该编写它们来帮助开发人员而不是用户，这是否意味着 Exception仅在开发人员将使用的**库中占有一席之地？**，如果其他开发人员没有使用该代码，那么我们不应该在其中使用任何异常吗？

如果不是这种情况，那么任何人都可以告诉我任何我可能需要/应该在库管理项目中使用异常的实例，以便我可以了解何时应该在不应该被**调用的代码中编写异常通过**另一个代码。

我想专注于我应该在何时何地编写异常，尤其是仅在库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:22:42.953

那很好。

1.  任何库都不应该为调用代码抛出异常（检查异常）。它应该由库本身正确处理。

2.  关于 RunTimeExceptions，它取决于应用程序/库的设计。如果用户可以/应该采取任何纠正措施，那么我们应该抛出 RuntimeExceptions 否则，只需将它们记录下来以供开发人员使用。

# android - 使用 MonoDroid 的 Android 应用程序

> ID：14108581
> 
> 赞同：0
> 
> 时间：2013-01-01T07:04:40.380
> 
> 标签：android, visual-studio-2010, c#-4.0, android-emulator, xamarin.android

我曾经在 Eclipse 中开发我的应用程序，但我发现我可以使用 monodroid 在 Visual Studio 中开发我的应用程序。现在当我运行我的应用程序时，只有模拟器启动并且我的应用程序没有安装在我的设备上。我该怎么办？在运行应用程序之前我必须更改任何设置吗？我真的是 android 和 MonoDroid 的新手！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:16:51.463

使用 MonoDroid 在 Visual Studio 中开发应用程序的分步描述是 [在 MonoDroid 中开发应用程序的教程](http://visualstudiomagazine.com/articles/2011/02/01/introducing-monodroid.aspx)。
仔细按照这些步骤操作。也可以看到.. [MonoDroid Instalation for Visual Studio](http://v4.programminghelp.com/android/how-to-install-monodroid-for-visual-studio-for-android-development-in-c/)

# php - 我想在 php mysql 中删除 where id=$POST['id']

> ID：14108583
> 
> 赞同：0
> 
> 时间：2013-01-01T07:05:18.690
> 
> 标签：php, mysql, wordpress

我的删除条目代码是这样，但它没有做任何事情

HTML

```
<form id="form3" name="form3" method="post" onsubmit="return validateForm();" action="">
    Id <input type="text" class="txt" name="id" /><br />
    <input type="submit" id="delete" value="delete"/>
</form> 
```

PHP

```
global $wpdb;

if ( isset ( $_POST['id'] ) && ! empty ( $_POST['id']  ))
{
    $wpdb->query("DELETE " . PRO_TABLE_PREFIX . "tutorial  WHERE id='{$_POST['id']}'");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:10:52.960

这就是我通常的做法：

```
$wpdb->query("DELETE " . PRO_TABLE_PREFIX . "tutorial  WHERE id='".$_POST['id']."') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T07:32:52.537

为了避免这样的混淆，我总是`sprintf()`在需要连接字符串的地方使用

改变：

```
global $wpdb;
if ( isset ( $_POST['id'] ) && ! empty ( $_POST['id']  )) {
    $wpdb->query("DELETE " . PRO_TABLE_PREFIX . "tutorial  WHERE id='{$_POST['id']}'");
} 
```

至：

```
global $wpdb;

if ( isset ( $_POST['id'] ) )) {    

   $wpdb->query(sprintf("DELETE %stutorial  WHERE id='%s'", PRO_TABLE_PREFIX, $_POST['id']));
} 
```

有几点需要注意：

1）你很容易受到 SQL 注入的攻击
2）一旦你`isset()`确定了 key 是否`$_POST['id']`真的不是`NULL`，你就不需要检查它是否为空 via`empty()`

**更新**

你真的应该测试`$_POST['id']`它是否有效。我建议你实现一个功能，比如，`is_id_valid()`

```
function is_id_valid(&$id){ //<-- IMPORTANT, Argument should be a reference 

  if ( ! isset($id) ){
     return false;
  }

  if ( empty($id) ){
    return false;
  }

  // add this if you expect $id to be a numeric value
  // otherwise just ignore - do not add
  if ( ! is_numeric($id) ){
    return false;  
  }

  //it's also a good to validate the length 
  if ( strlen($id) > ... && strlen($id) < ... ){
     return false;
  } 

  //seems like all tests passed
  return true;
} 
```

然后你会使用它，比如

```
if ( is_id_valid($_POST['id']) !== false ){
   ....
} 
```

警告：它仍然容易受到 SQL 注入的影响

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T07:08:30.053

删除周围的单引号`post['id']`：

```
$wpdb->query("DELETE " . PRO_TABLE_PREFIX . "tutorial  WHERE id={$_POST['id']}") 
```

或者

```
echo $query = "DELETE " . PRO_TABLE_PREFIX . " tutorial  WHERE id =".mysql_real_escape_string($_POST['id']);
$wbpd->query($query); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T07:11:15.153

```
$wpdb->query("DELETE FROM " . PRO_TABLE_PREFIX . "tutorial  WHERE id='{$_POST['id']}'"); 
```

**PS：去那边接受一个对你帮助最大的答案。这里也是！:P**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T07:24:45.283

尝试以下代码： -

```
global $wpdb;

if ( isset ( $_POST['id'] ) && ! empty ( $_POST['id']  ))
{
$wpdb->query("DELETE FROM " . PRO_TABLE_PREFIX . "tutorial  WHERE id=".$_POST['id']);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-01T08:05:55.607

```
give some action path to the form 
```

html

```
<form id="form3" name="form3" method="post" onsubmit="return validateForm();" action="give some actions">
Id <input type="text" class="txt" name="id" /><br />
<input type="submit" id="delete" value="delete"/> 
```

php

```
global $wpdb;

if ( isset ( $_POST['id'] ) && ! empty ( $_POST['id']  ))
{
  $id=stripslashes_deep($_POST['id']);
  $wpdb->query("DELETE FROM " . PRO_TABLE_PREFIX . "tutorial  WHERE id=$id");
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-01T07:13:05.240

由于您在 WHERE 子句中检查 id ，因此无需将其用引号括起来，并且您在 delete 语句中缺少 FROM ，因此标准方法是：并在插入数据库之前对 POST 数据进行一些过滤，例如：

```
$id = (int) $_POST['id'];
if( $id > 0 ) {
    $wpdb->query("DELETE FROM " . PRO_TABLE_PREFIX . "tutorial  WHERE id=".$_POST['id']);
} 
```

# c++ - 编译源代码的麻烦

> ID：14108586
> 
> 赞同：0
> 
> 时间：2013-01-01T07:06:01.843
> 
> 标签：c++, visual-c++, compiler-errors

我正在将一些代码从 Gcc 移植到 Visual c 6，但是在编译此代码时出现了一些错误

```
XMLNode::XMLNode( const string & _name, const string & _value ) :
    XMLAbstractNode::XMLAbstractNode( _name, xml_node ),
    value( _value )
{// No code here.
} 
```

它在 mingw gcc 代码块上编译，但在 Visual c 6 上编译时出现以下错误，它给出以下错误

```
error C2436 member function or nested class in constructor initializer list 
```

作为 c++ 初学者的 abobe 代码的含义是什么 XMLNODE 是驱动类调用父类构造函数 XMLABSTRACTNode 并带有参数。但是这里的值（_value）如何在 vc6 上编译代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T09:43:09.560

我认为 VC 6 抱怨超类的初始化。试试下面的代码（`XMLAbstractNode::XMLAbstractNode`用 just替换加倍的类名`XMLAbstractNode`）：

```
XMLNode::XMLNode( const string & _name, const string & _value ) :
    XMLAbstractNode( _name, xml_node ),
    value( _value )
{
    // No code here.
} 
```

代码只是用传递的字符串`value(_value)`初始化成员变量。`value``_value`

# c++ - 错误 C2512：“Box”：没有合适的默认构造函数可用

> ID：14108587
> 
> 赞同：1
> 
> 时间：2013-01-01T07:06:18.803
> 
> 标签：c++

我还是 C++ 的新手，我似乎无法在其他地方找到确切的答案。我正在尝试在构造函数中初始化一个需要 2 个浮点数的 Box 对象。Box 是从 Game Object 派生的。

我试过 Box *box = new Box(20,20);

```
 class GameObject {
        public: 
            GameObject::GameObject(float Posx, float Posy) {
                posx = Posx;
                posy = Posy;
            };
        protected: //Positions
            float posx;
            float posy;

            virtual void setPosition(float x, float y) { posx = x; posy = y;};

        };

        class Box : GameObject { // Box is Derived from GameObject
        public:

            float sizex;
            float sizey;

            void setSize(float x, float y) {sizex = x; sizey = y;};

        }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T07:10:11.113

A`GameObject`需要初始化一个位置，如果`GameObject`没有该信息，您根本无法创建一个。A`Box`是*根据*a实现的`GameObject`，因此 a`Box`也需要使用位置进行初始化。

您需要创建一个构造函数来`Box`负责初始化其`GameObject`位置。像这样：

```
class Box : GameObject {
public:
    Box(float Posx, float Posy) : GameObject( Posx, Posy ) {}

    /*...*/
}; 
```

大概你需要一种方法来构造`Box`一个位置*和*一个大小：

```
class Box : GameObject {
public:
    Box(float Posx, float Posy, float Sizex, float Sizey)
      : GameObject( Posx, Posy )
      , sizex( Sizex ), sizey( Sizey )
    {}

    /*...*/
}; 
```

最后，您还可以添加一个构造函数`Box`，表示*默认构造* `Box`从位置开始`0,0`并且没有大小：

```
class Box : GameObject {
public:
    Box() : GameObject( 0, 0 ), sizex( 0 ), sizey( 0 ) {}

    /*...*/
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T07:10:17.787

在我写这篇文章时，发布的代码如下：

```
class GameObject {

public: 
    GameObject::GameObject(float Posx, float Posy) {
        posx = Posx;
        posy = Posy;
    };
protected:
    float posx;
    float posy;

    virtual void setPosition(float x, float y) { posx = x; posy = y;};

};

class Box : GameObject {
public:

    float sizex;
    float sizey;

    void setSize(float x, float y) {sizex = x; sizey = y;};

}; 
```

这不会编译，因为类 `GameObject`没有默认构造函数，为类生成的默认构造函数`Box`可以使用。

一种解决方法是为 class 定义一个构造函数`Box`。

* * *

当您使用它时，您可能想要使用`public`继承。

默认情况下为`class`继承（与 for 相反）。`private``struct`

无论您发现自己在哪里使用`private`继承，都应考虑包含。

* * *

此外，由于例如文字`3.14`是 a `double`，而不是 a ，因此使用而不是.`float`通常是一个好主意。`double``float`

它可以更快。

而且它肯定不那么尴尬。

# php - Composer 未安装带有消息“未定义索引：argv”的未捕获异常“ErrorException”

> ID：14108592
> 
> 赞同：5
> 
> 时间：2013-01-01T07:07:49.473
> 
> 标签：php, symfony, composer-php

一旦我将作曲家下载到我的远程网络主机。我尝试运行命令“php composer.phar install”

一旦我按照文档中的说明运行此命令，我就会收到类似 no tomorrow 的错误。

```
nwrepai1@******** [~/public_html]# php composer.phar install
Content-type: text/html

<br />
<b>Fatal error</b>:  Uncaught exception 'ErrorException' with message 'Undefined index: argv' in phar:///home3/nwrepai1/public_html/composer.phar/vendor/symfony/console/Symfony/Component/Console/Input/ArgvInput.php:57
Stack trace:
#0 phar:///home3/nwrepai1/public_html/composer.phar/vendor/symfony/console/Symfony/Component/Console/Input/ArgvInput.php(57): Composer\Util\ErrorHandler::handle(8, 'Undefined index...', 'phar:///home3/n...', 57, Array)
#1 phar:///home3/nwrepai1/public_html/composer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php(98): Symfony\Component\Console\Input\ArgvInput-&gt;__construct()
#2 phar:///home3/nwrepai1/public_html/composer.phar/src/Composer/Console/Application.php(74): Symfony\Component\Console\Application-&gt;run(NULL, Object(Symfony\Component\Console\Output\ConsoleOutput))
#3 phar:///home3/nwrepai1/public_html/composer.phar/bin/composer(37): Composer\Console\Application-&gt;run()
#4 /home3/nwrepai1/public_html/composer.phar(14): require('phar:///home3/n...')
#5 {main}
  thrown in <b>phar:///home3/nwrepai1/public_html/composer.phar/vendor/symfony/console/Symfony/Component/Console/Input/ArgvInput.php</b> on line <b>57</b><br />
nwrepai1@********* [~/public_html]# 
```

我在这方面有什么遗漏吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-18T18:54:05.973

我在共享主机上遇到了同样的问题。在我设置 register_argc_argv=On 后它没有工作。

但是当我在 shell 中尝试“php-cli composer.phar”而不是“php composer.phar”时，它起作用了。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-01T07:23:23.810

您需要确保[`register_argc_argv=on`](http://php.net/manual/en/ini.core.php#ini.register-argc-argv)在 CLI 的 php.ini 中进行了设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-06T00:57:24.987

`php -d register_argc_argv=On composer.phar`

# ajax - Ajax 表单未提交

> ID：14108593
> 
> 赞同：1
> 
> 时间：2013-01-01T07:08:05.340
> 
> 标签：ajax, forms

我按照[tutsplus.com 上的提交 Ajax 表单教程进行操作](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)，但终生无法弄清楚为什么我的数据不会应用 addreply.php。当我查看我的 mysql 表时，没有插入数据。任何帮助将不胜感激。我在网上搜索并排除了几个小时的故障。

```
$(document).ready(function() {

$(".replyLink").one("click", function(){
$(this).parent().after("<div id='contact_form'></div>");
$("#contact_form").append("<form id='replyForm'></form>");
$("#replyForm").append("<input class='enterName' id='enterName' type='text' 
name='name' placeholder='name' rows='1' cols='20' />");
$("#replyForm").append("<textarea class='enterReply' id='enterReply' name='comment'  
placeholder='reply'></textarea>");
$("#replyForm").append("<input type='hidden' name='id' value=''>");

commentID= $(this).parent().attr('id');

$("#replyForm").append("<input class='replyButton' id='replyButton' type='submit' `value='reply'/>");`
$(".enterReply").slideDown();                                   

$(".replyButton").slideDown();

});

$(".replyButton").click(function() {

var name = $("input#enterName").val();
var reply = $("textarea#enterReply").val();

var dataString = 'name='+ name.val() + '&comment=' + reply.val();  

$.ajax({  
type: "POST",  
url: "addreply.php",  
data: dataString,  
success: function() {  
}  
});  
return false;
});

**addreply.php**

<?php
session_start();

$replyID= $_POST['id'];

$name= $_POST['name'];
$comment= $_POST['comment'];
$type= $_POST['type'];
$song= $_POST['song'];

if($song == ''){
$song= 'not';
}

include 'connection.php';

if($_SESSION['signed_in'] == 'yes') {
$query1= "INSERT INTO ApprovedComments(name, comment, Authorized, type, reply_ID, song, date)
VALUES('$name', '$comment', 'YES', '$type', '$replyID', '$song', NOW());";

$insertComment= mysql_query($query1);
// echo "hi";
}

if( !isset($_SESSION['signed_in']) ) {
$query2= "INSERT INTO PreApprovedComments(name, comment, reply_ID, song, date)
VALUES('$name', '$comment', '$replyID', '$song', NOW());";      

$insertComment= mysql_query($query2);
}

mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T07:17:31.427

尝试

```
$.ajax({  
    type: "POST",  
    url: "addreply.php",  
    data: $("#replyForm").serialize()+'name='+ encodeURIComponent(name) + 
          '&comment=' + encodeURIComponent(reply),  
    success: function() {  
    }  
}); 
```

这将发布`#replyForm`表单中的所有字段以及名称和评论字段。

# jquery - 如何使用 jQuery 滑动和淡化 div？

> ID：14108596
> 
> 赞同：0
> 
> 时间：2013-01-01T07:08:18.910
> 
> 标签：jquery, slideup, fadeout

我看了一下[这个](https://stackoverflow.com/questions/734554/jquery-fadeout-then-slideup)和[这个](https://stackoverflow.com/questions/8022764/jquery-slideup-and-slidedown-but-with-fadeout-and-fadein)，但它没有帮助。
我有一个新闻行情。具有固定高度的列表具有向上并附加到列表末尾的项目。

已编辑：**一次只显示一个项目，第一个项目向上滑动并淡出，下一个项目向上滑动并淡入**

```
<ul id="ticker">
    <li>
        Sample note 1
    </li>
    <li>
        Sample note 2
    </li>
    <li>
        Sample note 3
    </li>
</ul> 
```

这是javascript代码：

```
function tick(){
    $('#ticker li:first').slideUP( function () { $(this).appendTo($('#ticker')).slideDown(); });
}
setInterval(function(){ tick () }, 2000); 
```

我想对其进行配置，使其不仅向上滑动，而且还淡出，并在底部以滑动效果淡入。
我知道我应该使用动画效果。我尝试了很多次，但都没有奏效。请帮助我。
谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T07:25:31.427

一个简单的方法是：

```
function ticker(el, duration) {
    if (!el) {
        return false;
    }
    else {
        el = typeof el === 'object' ? el : $(el);
        duration = duration || 500;
        $(el).find('li').first().slideUp(duration, function() {
            $(this)
                .insertAfter($(this).nextAll('li').last())
                .fadeIn(duration, function(){
                    ticker(el, duration);
                });
        });
    }
} 
```

您可以使用 jQuery 对象调用它：

```
ticker($('#ticker'));​​​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/5y3Ux/)。

或者使用具有指定持续时间（以毫秒为单位）的普通 DOM 节点：

```
ticker(document.getElementById('ticker'), 300);​​​​​​​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/5y3Ux/1/)。

回应 OP 留下的评论（在评论中，如下）：

> 此解决方案向上滑动第一项并淡入最后一项。但我想在第一个和下一个项目中淡入淡出+滑动。该列表的样式是一次只显示一个项目。

我提供了这个，`animate()`用于为列表元素的高度/不透明度设置动画：

```
function ticker(el, duration) {
    if (!el) {
        return false;
    }
    else {
        el = typeof el === 'object' ? el : $(el);
        duration = duration || 500;
        var first = el.find('li').first(),
            last = first.nextAll().last(),
            h = last.height();
        first.animate({
            height: 0,
            opacity: 0
        }, duration, function() {
            $(this).insertAfter(last).animate({
                height: h,
                opacity: 1
            }, duration, function() {
                ticker(el, duration);
            });
        });
    }
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/5y3Ux/2/)。

**编辑**以下 OP 的说明，如下：

```
function ticker(el, duration) {
    if (!el) {
        return false;
    }
    else {
        el = typeof el === 'object' ? el : $(el);
        duration = duration || 500;
        var lis = el.find('li').css('display', 'none');

        lis.first().fadeIn(duration, function(){
            $(this).slideUp(duration, function(){
                $(this).insertAfter(lis.last());
                ticker(el, duration);
            });
        });
    }
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/5y3Ux/3/)。

参考：

*   [`animate()`](http://api.jquery.com/animate/).
*   [`css()`](http://api.jquery.com/css/).
*   [`fadeIn()`](http://api.jquery.com/fadeIn/).
*   [`find()`](http://api.jquery.com/find/).
*   [`first()`](http://api.jquery.com/first/).
*   [`insertAfter()`](http://api.jquery.com/insertAfter/).
*   [`last()`](http://api.jquery.com/last/).
*   [`nextAll()`](http://api.jquery.com/nextAll/).
*   [`slideUp()`](http://api.jquery.com/slideUp/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T07:39:42.700

[在http://jsfiddle.net/zLe2B/19/](http://jsfiddle.net/zLe2B/19/)尝试我的解决方案

html:

```
<ul id="ticker">
    <li>
        <span>Sample note 1</span>
    </li>
    <li>
        <span>Sample note 2</span>
    </li>
    <li>
        <span>Sample note 3</span>
    </li>
</ul> 
```

JavaScript：

```
 $(document).ready(function(){
    function tick(timeout){
        var first = $('#ticker li:first');
        var next = first.next();

        first.children('span').fadeOut(timeout);
        first.slideUp(timeout, function () {      
             first.appendTo($('#ticker'));                
        });

        next.slideDown(timeout);
        next.children('span').hide().fadeIn(timeout);
    }
    setInterval(function(){tick(1000)}, 2000);
});​ 
```

​ CSS：

```
ul, li, span {
    display: block
}

#ticker li {
    height: 20px;
}

#ticker {
    height: 20px;
    overflow: hidden;
} 
```

# java - 使用共享接口/基类实例化子类的更好方法

> ID：14108599
> 
> 赞同：1
> 
> 时间：2013-01-01T07:09:04.650
> 
> 标签：java

我是 Java 新手，所以这很容易。我有一系列与接口共享大多数变量/方法的子类，但是每个子类都有一些对其类型独特的附加方法，这就是我以这种方式设计代码的原因。

但是，当我从数据库中检索数据时（对于我拥有的每个子类，数据都以相同的格式存储）我希望能够创建一个基类的实例或者我可以轻松地转换为子类的东西我需要或有某种工厂来给我一个子类实例。

这是我现在拥有的代码，它只是检查数据的类型，然后创建子类的新实例，但对我来说感觉如此重复。

有更好的吗？

```
 if( rs.getString("action_type").equals("block-break") || rs.getString("action_type").equals("block-place") ){
                actions.add( new BlockAction(
                        rs.getString("action_time"),
                        rs.getString("action_type"),
                        rs.getString("world"),
                        rs.getString("player"),
                        rs.getInt("x"),
                        rs.getInt("y"),
                        rs.getInt("z"),
                        rs.getString("data")
                    ) );
            }

            if( rs.getString("action_type").equals("entity-kill") ){
                actions.add( new EntityKillAction(
                        rs.getString("action_time"),
                        rs.getString("action_type"),
                        rs.getString("world"),
                        rs.getString("player"),
                        rs.getInt("x"),
                        rs.getInt("y"),
                        rs.getInt("z"),
                        rs.getString("data")
                    ) );
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T08:25:28.960

我不知道`actions`您的问题是什么，但这是一种避免重复并获得更简单代码的方法。

```
BaseAction baseAction ; // super class
String actionType = rs.getString("action_type"); 
if (actionType.equals("block-break") || actionType.equals("block-place")) {
   BlockAction blockAction = new BlockAction(); // create instance for sub class
   blockAction.set() // set sub class attributes here
   baseAction = blockAction ;

} else if (actionType.equals("entity-kill")) {
   EntityKillAction entityKillAction =new EntityKillAction(); //another subClass
   entityKillAction.set() 
   baseAction = entityKillAction;
}
//set all super class atributes for all
baseAction.setActionTime(rs.getString("action_time"));
baseAction.setActionType(rs.getString("action_type")) ;
// similarly set for all attributes  
actions.add(baseAction); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T08:18:14.973

如果您可以使用工厂模式方法来创建类的实例，那就更好了。

请看这个链接

[Java 模式](http://www.allapplabs.com/java_design_patterns/java_design_patterns.htm)

# iphone - 将 JSON 格式转换为像 SudzC 一样的 Objective C

> ID：14108600
> 
> 赞同：0
> 
> 时间：2013-01-01T07:09:04.613
> 
> 标签：iphone, ios, json, web-services, sudzc

是否有任何转换器用于将 JSON Web 服务转换为使用 SOAP 协议的目标 C 代码（如 Sudzc）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T07:12:39.323

```
NSDictionary *dictionary = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error]; 
```

另外，如果您想了解更多详细信息....检查这些

1.  使用 yajl、JSONKit 或 iOS5 JSON 等工具将 JSON 字符串转换为 NSDictionary

2.  使用[Jastor 之](https://github.com/elado/jastor)类的工具将此 NSDictionary 转换为具有类型属性、嵌套属性、数组等的真正 Objective-C 类。

3.  [苹果文档。](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

# android - 滚动视图扩展到整个布局

> ID：14108611
> 
> 赞同：0
> 
> 时间：2013-01-01T07:11:40.003
> 
> 标签：android, scrollview

我的布局如下

```
<LinearLayout>
    <RelativeLayout>
    </RelativeLayout>

    <ScrollView>
      <LinearLayout>
      <LinearLayout>
    </ScrollView>
</LinearLayout> 
```

这是将屏幕分成两半，在屏幕的一半显示图表，在另一半显示报告，我希望单独滚动。

更新

请找到如下的xml

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout
xmlns:android=""
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#FFFFFF"
android:orientation="vertical">

<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:background="#888888" />
<LinearLayout
    android:id=""
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10sp"
    android:layout_marginBottom="10sp"
    android:orientation="vertical">

    <TextView
        android:id=""
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:textColor=""
        android:textSize="16sp"
        android:textStyle="bold" />

    <TextView
        android:id=""
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:textColor=""
        android:textSize="12sp" />

</LinearLayout>

<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:background="#888888"
        android:orientation="vertical" />  

<LinearLayout
    android:id=""
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:visibility="visible"
    android:orientation="horizontal">

    <RelativeLayout
        android:paddingTop="10dp"
        android:paddingBottom="10dp"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_gravity="left"
        android:layout_marginLeft="5dp"
        android:layout_height="wrap_content"
        android:background="#FFFFFF"            
        android:orientation="vertical">

        <TextView
            android:id="@+id/course_status"
            android:layout_alignParentLeft="true"
            android:textColor="#000000"
            android:textSize="14sp"
            android:paddingLeft="10dp"
            android:textStyle="bold"
            android:layout_width="fill_parent"
            android:layout_height="50dp"/>

        <ImageView
            android:layout_centerInParent="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src=""
            android:id=""
            android:layout_marginTop="50dp" />

        <edu.apollogrp.android.widget.ProgressCircle
            android:id=""
            android:layout_width="170dp"
            android:layout_height="170dp"
            android:indeterminateOnly="false"
            android:layout_centerInParent="true"
            android:progressDrawable=""
            android:layout_marginTop="50dp"
             />

        <ImageView
            android:layout_centerInParent="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src=""
            android:id=""
            android:layout_marginTop="50dp" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignRight=""
            android:layout_alignWithParentIfMissing="true"
            android:layout_centerVertical="true"
            android:addStatesFromChildren="false"
            android:clipChildren="false"
            android:clipToPadding="false"
            android:orientation="vertical" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:gravity="center"
                android:orientation="horizontal" >

               <TextView
                android:id="@
                android:textColor="@color/grades_green"
                android:textSize="20sp"
                android:textStyle="bold"
                android:gravity="center_horizontal"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"></TextView>
               <TextView
                android:id="@
                android:textColor=""
                android:textSize="20sp"
                android:textStyle="bold"
                android:gravity="center_horizontal"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">  </TextView>                  
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:clipChildren="false"
                android:clipToPadding="false"
                android:orientation="vertical"
                android:layout_marginLeft="40dp" >

            <TextView
                android:id="@
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textColor="@color/grades_green"
                android:textSize="12sp"
                android:textStyle="bold" >
            </TextView>

            <TextView
                android:id="@
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textColor="#000000"
                android:textSize="9sp"
                android:textStyle="bold" >    
            </TextView>
            </LinearLayout>
        </LinearLayout>
    </RelativeLayout>

<LinearLayout
    android:layout_width="1dp"
    android:layout_height="fill_parent"
    android:layout_marginLeft="5dp"
    android:background="#888888"
    android:orientation="horizontal" />

    <ScrollView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        android:fillViewport="false"
         >

        <LinearLayout
            android:id="@
            android:scrollbars="vertical"
            android:layout_width="wrap_content"
            android:orientation="horizontal"     
                       android:layout_height="wrap_content"             
            >
        </LinearLayout>
    </ScrollView>

</LinearLayout>
</LinearLayout> 
```

但是整个布局现在是可滚动的:(有什么办法可以让只有一半的屏幕可滚动？PS：android:fillViewport 设置为 false

**更新**

我发现了为什么滚动不起作用。这是因为滚动是在下拉刷新列表视图中。:( 现在正在寻找解决方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T07:14:48.387

试着把 layout_weight 属性来划分屏幕。

```
 <LinearLayout>
<RelativeLayout android:layout_weight="1">
</RelativeLayout>

<ScrollView android:layout_weight="1">
  <LinearLayout>
  <LinearLayout>
</ScrollView>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T07:25:38.773

使用`layout_weight`，这里是示例代码

```
 <LinearLayout>
     <RelativeLayout android:layout_width="0dp"
       android:layout_height="wrap_content"
       android:layout_weight="1">
    </RelativeLayout>

    <ScrollView android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1">
            <LinearLayout>
            <LinearLayout>
    </ScrollView>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:13:31.120

你可以试试这个：

```
<?xml version="1.0" encoding="UTF-8"?>

<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#FFFFFF"
android:orientation="horizontal">

    <LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parentt"
    android:layout_marginLeft="5dp"
    android:background="#ffff"
    android:layout_weight="1">

    ////// Your left side layout content /////////      

    </LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_marginLeft="5dp"
    android:background="#ffff"
    android:orientation="vertical"
    android:layout_weight="1">

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
         >

        <LinearLayout
            android:scrollbars="vertical"
            android:layout_width="wrap_content"
            android:orientation="horizontal"     
            android:layout_height="wrap_content"             
            >

            <TextView
                android:id=""
                android:layout_marginTop="5dp"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:textSize="20sp" />
        </LinearLayout>
    </ScrollView>
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T04:47:45.273

滚动视图不起作用，因为它位于实现拉动刷新的列表视图中。因此布局更改不起作用。

对不起大家，谢谢大家的帮助。

# python - 如何使用 sklearn load_files 方法忽略某些文件？

> ID：14108614
> 
> 赞同：1
> 
> 时间：2013-01-01T07:12:00.607
> 
> 标签：python, scikit-learn

我的 mac os 将在我的火车数据集文件目录下生成一个 .DS_Store，并且 load_files 将加载它并引发异常，例如

UnicodeDecodeError：“utf8”编解码器无法解码位置 1116 中的字节 0xff

我想知道如何过滤 .DS_Store 文件，除了删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T07:19:11.713

查看[文档](http://scikit-learn.org/stable/modules/generated/sklearn.datasets.load_files.html#sklearn.datasets.load_files)，似乎没有任何方法可以直接过滤`load_files`（或者，您可以将类别列入白名单，但不能将类别中的文件列入白名单，或在任一级别列入黑名单）。

您可能需要考虑向 scikit-learn 项目提交功能请求。或者，您可能会认为这是一个错误，即加载了隐藏文件（为平台适当定义，但在 OS X 和其他应包含名称以 开头的文件的 POSIX 系统上`.`），并就此提交错误报告。

同时，`load_content`您可以设置一个标志：

> load_content ：布尔值，可选（默认=真）
> 
> 是否加载不同文件的内容。如果为真，则返回的数据结构中存在包含文本信息的“数据”属性。如果没有，文件名属性会给出文件的路径。

通过`False`，它只会为您找到文件名，然后您可以根据需要过滤（例如，`filenames = (filename for filename in ret.filenames if not filename.startswith('.'))`），然后手动加载。

这似乎是给定工具可用的最佳解决方案。

另一方面，考虑到`load_files`实际上是多么简单——特别是如果你不使用像`categories`or这样的额外功能`shuffle`——不使用它可能会更简单，而是使用`os.walk`or 只是`os.listdir`. 在这种情况下，鉴于文件的深度正好是 2 层，而不是任意深度，后者可能更简单：

```
def getfilenames(category):
    return [filename for filename in os.listdir(category)
            if not filename.endswith('.')]
categoryfiles = [getcategory(os.path.join(rootpath, category)
                 for category in os.listdir(rootpath)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T07:22:26.377

[快速浏览一下来源](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/datasets/base.py#L164)就会发现，您唯一的[`load_files`](http://scikit-learn.org/stable/modules/generated/sklearn.datasets.load_files.html#sklearn.datasets.load_files)选择是删除`.DS_Store`文件：

```
documents = [join(folder_path, d)
    for d in sorted(listdir(folder_path))] 
```

（如果你想认真对待`.DS_Store` *污染*，这里有一个严重的内核扩展：[https](https://github.com/binaryage/asepsis) ://github.com/binaryage/asepsis ）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-28T09:30:49.057

我已修改 sklearn load_files[以](http://scikit-learn.org/stable/modules/generated/sklearn.datasets.load_files.html#sklearn.datasets.load_files)接受附加参数“ignore_files”，该参数将接受要忽略的文件列表。您可以使用 load_files 的此定义而不是 sklearn。它返回与 load_files 相同的结果，因为我只是过滤需要忽略的文件。

用法 ：

```
load_files(dir_path,ignore_files=".DS_Store") 
```

[要点](https://gist.github.com/jeevanel/089e3829408963ccc617)上的来源

# android - 一次更改文本大小和颜色？

> ID：14108627
> 
> 赞同：0
> 
> 时间：2013-01-01T07:14:58.497
> 
> 标签：android, textview, android-alertdialog

我在我的应用程序中创建了许多活动和课程。但是，我有一个功能可以在每个活动中更改字体大小和颜色。此函数更改自己活动中的文本。当我去其他活动时，我必须再次更改 textSize 和颜色。如何创建一个函数来一次性更改多个类和活动中的 TextView？

我的应用结构：

```
Main.java   main.xml/
Suad1.java  suad1.xml/
Suad2.java  suad2.xml/
Suad3.java  suad3.xml/
Suad4.java  suad4.xml/ 
```

我想一次性更改这些活动。这是我在 Suad1.class 中的代码。

```
public void ShowDialog() {
    final AlertDialog.Builder popDialog = new AlertDialog.Builder(this);
    final SeekBar seek = new SeekBar(this);
    seek.getProgress();
    seek.setMax(100);

    popDialog.setIcon(R.drawable.conp);
    popDialog.setTitle(R.string.menu_settings);
    popDialog.setView(seek);
    try {

        seek.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
            }

            public void onStopTrackingTouch(SeekBar seekBar) {
                 // TODO Auto-generated method stub
            }

            public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
                subtitles.setTextSize(progress);
            }
        });
    }
    catch (Exception e) {
        e.printStackTrace();
    }

    popDialog.setSingleChoiceItems(items , -1,
        new DialogInterface.OnClickListener() {
            int i;
            public void onClick(DialogInterface dialog, int item) {
                i = item;
                if(items[i] =="Blue") {
                    subtitles.setTextColor(getResources().getColor(R.color.font3));
                } else if(items[i] == "Yellow") {
                    subtitles.setTextColor(getResources().getColor(R.color.font1));
                } else if(items[i]== "Red") {
                    subtitles.setTextColor(getResources().getColor(R.color.font2));
                }
            }
        }
    );

    // Button
    popDialog.setPositiveButton("OK",
        new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                Toast.makeText(Suad1.this, "Your setting is complete", Toast.LENGTH_LONG).show();
                dialog.dismiss();
            }
        }
    );
    popDialog.create();
    popDialog.show();
} 
```

还有两个问题：

1.  退出对话框并再次返回时，我可以更新 SeekBar 吗？
2.  我可以在一个 AlertDialog 中有两个或更多标题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:28:14.620

创建一个单独的类，您可以在多个活动中使用该方法来更改 TextView 文本、颜色：

```
public class ChangetextAttr {

public Activity context;

public ChangetextAttr(Activity context){

        this.context=context;
}

// Create an Method for Changing TextView Attributes

public void settextViewAttr(Activity activity, TextView txtView){

   txtView.setTextSize(15);
   txtView.setTextColor(activity.getResources().getColor(R.color.font1));
   //....
} 
```

并从任何活动中，您可以 settextViewAttr 方法设置 TextView 属性：

```
 ChangetextAttr obj=new ChangetextAttr(Your_Activity.this);
   obj.settextViewAttr(this,any_textview_instance); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T07:23:52.567

嘿，创建一个扩展 TextView 的（自定义文本视图）类，并为文本视图做任何你想做的事情，比如更改文本颜色和文本样式。现在在你所有的 xml 中使用这个类。如果您的班级名称为 MyTextView。那么你的 xml 应该如下所示......

```
 <urpackage.MyTextView
    android:id="@+id/text_view"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T07:35:58.107

*Android*已经为您提供了通过*Styles*和*Themes*更改小部件外观的机制。

以下是您如何定义设置任何包含文本的视图的文本大小和颜色的样式：

```
<style name="BigColoredText">
    <item name="android:textColor">#FF0000</item>
    <item name="android:textSize">25sp</item>
</style> 
```

以下是您将其应用于 a 的方法`TextView`：

```
<TextView style="@style/BigColoredText" .../> 
```

*样式*只能`View`在构建时提供给 s，之后不能更改。但是，您可以通过以下方式以编程方式更改`textAppearance`with 是引用`text`属性的样式的子集：

```
TextView v = ...;
v.setTextAppearance(R.styles.BigColoredText); 
```

现在，如果您希望*Activity*或*Application中的**所有* `TextView`s使用相同的样式（或至少默认使用它），那么您需要一个*Theme*：

 ***```
<style name="Theme.MyTheme" parent="@android:style/Theme">
    <item name="android:textViewStyle">@style/BigColoredText</item>
</style> 
```

然后将*主题*应用于整个*应用程序*或清单中的一个或多个*活动：*

```
<application or activity android:theme="@style/Theme.MyTheme" .../> 
```

或者您可以通过以下方式在运行时以编程方式更改它：

```
Activity activity = ...;
activity.setTheme(R.style.Theme_MyTheme); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T07:36:56.293

要回答您的问题：

1-您需要的是两种样式（粗体和正常），并在使用`View.setTextAppearance`. 检查 Android[文档](http://developer.android.com/guide/topics/ui/themes.html)和这个[答案](https://stackoverflow.com/questions/4630440/how-to-change-a-textviews-style-at-runtime)。

2-要使用从视图到视图未更改的值更新搜索栏，那么您需要将其进度保持在共享偏好中，例如并在 onResume 中设置进度。

3- 考虑改用自定义对话框（您可以根据需要在 XML 中定义它）。或者您可以`/n`在标题字符串中包含多行***

# javascript - 我应该使用自定义数据元素作为 JQuery 中事件处理的参数持有者吗？

> ID：14108632
> 
> 赞同：0
> 
> 时间：2013-01-01T07:15:22.180
> 
> 标签：javascript, jquery

在一个项目中，我从内联代码中调用事件。 **旧用法；**

```
<button id='button' onclick='do_stuff("<?= $id ?>", "<?= $name ?>")'>Do</button> 
```

但是现在，我想使用事件监听器。**新用法；**

```
$('#button').click({id:'<?= $id ?>', name:'<?= $name ?>'}, item_event_handler);

function item_event_handler(event)
{
  var id = event.data.id;
  var name = event.data.name;

  do_stuff(id, name);
}

function do_stuff(id, name)
{
} 
```

这个有效。但这是问题所在；假设我列出了一些如下所示的项目，并且我想在这些项目上添加事件侦听器。**当前使用情况；**

```
<ul>
  <? foreach($items as $item): ?>
  <li class='item' onclick='do_stuff("<?= $item->id ?>", "<?= $item->name ?>")'>
    <?= $item->title ?>
  </li>
  <? endforeach ?>
</ul> 
```

由于*我不想使用 JavaScript 创建这些项目*，因此我无法使用单独的参数向它们添加事件侦听器。我应该使用数据属性来获取参数吗？**像;**

```
$('.item').click(item_event_handler);

function item_event_handler(event)
{
  var id = $(this).data('id');
  var name = $(this).data('name');

  do_stuff(id, name);
}

<ul>
  <? foreach($items as $item): ?>
  <li class='item' data-id='<?= $item->id ?>' data-name='<?= $item->name ?>'>
    <?= $item->title ?>
  </li>
  <? endforeach ?>
</ul> 
```

这种方法可以使用还是有其他更有意义的方法？以这种方式使用数据属性可能会指向未来的问题？我不想浪费时间或让它变得复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T07:25:06.983

使用`data-*`属性在元素上存储数据，您可以使用 jquery 轻松访问这些数据。

**编辑：**您应该像这样访问它们：

```
$(selector).attr('data-id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T07:27:12.830

`data-`您可以通过在标记中使用属性并使用`data()`方法读取它们来避免混合 php 和 javascript

HTML

```
<li class="item" data-id="<?= $item->id ?>" data-name="<?= $name ?>"> 
```

JS

```
$('#button').click( item_event_handler);

function item_event_handler(event)
{
  var id = $(this).data('id');
  var name = $(this).data('name');

  do_stuff(id, name);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T07:29:31.460

您可以使用它来将点击事件绑定到项目......您可以调用您的函数或在里面做任何您想要的事情

`$("body").on("click","item" function(event){ item_event_handler(); });`

# java - 是否可以从一种方法返回让我们说

> ID：14108634
> 
> 赞同：0
> 
> 时间：2013-01-01T07:15:43.103
> 
> 标签：java, exception, methods, return

有 f1、f2 和 f3 3 种方法。我想从f3返回到f1。

假设：

> 最初 f1 调用 f2
> 
> f2 调用 f3。
> 
> Try catch 块应该用在所有三个函数中。

情况是如果我在 f3 中遇到异常，那么我应该能够返回到 f1。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T07:19:11.740

尝试..

```
void f1(){

try{
f2();
}catch(Exception er){}
system.out.println("Exception...");

}

void f2() throws Exception{

f3();

}

void f3() throws Exception{

//on some condition
throw new Exception("something failed");

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T07:18:11.577

```
catch(Exception e) { 
return;
} 
```

您可以在 f2 中捕获异常并添加 return，以便它将转到 f1。或者只是不捕获 f2 中的异常（只需在 f2 中添加 throws）并让它传播到 f1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T07:34:33.130

尝试

```
public void f1(){
    f2();
    // f3 failed. other code here
}

public void f2(){
    try {
        f3();
    } catch (Exception e){
        // Log your exception here
    }
    return;
}

public void f3(){
    throw new Exception("Error:");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T07:53:08.543

检查这样的事情

```
void f1() throws Exception {

    try {
        f2();
    } catch (Exception e) {
        throw new Exception("Exception Ocuured");
    }

}

void f2() throws Exception {
    try {
        f3();
    } catch (Exception e) {
        throw new Exception("Exception Ocuured");
    }
}

void f3() throws Exception {

    try {

        // Do Some work here
    } catch (Exception e) {
        f1();

    }
} 
```

# iphone - 按下主页按钮后动画不起作用

> ID：14108635
> 
> 赞同：2
> 
> 时间：2013-01-01T07:16:16.840
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个游戏，其标题屏幕具有动画背景。使用的动画只是一个`CGMoveToPoint`来回移动图像的函数。

这在模拟器上完美运行，除了在真实设备上测试时按下主页按钮然后重新打开应用程序，此图像的动画不会移动。

我希望有一个简单的解决方法。我在考虑内存问题并使用该`didReceiveMemoryWarning`功能，但我对此或何时使用它非常缺乏经验。

我的构建目标是 iOS 5.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:30:13.130

只需在`viewWillAppear:`方法中添加动画代码而不是`viewDidLoad:`方法..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-25T07:21:54.493

如果您不希望您的应用程序在后台运行，那么将`UIApplicationExitsOnSuspend`密钥（“应用程序不在后台运行”）添加到 plist 文件将起作用。[文档](https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)

但是，如果您确实希望您的应用程序在后台运行，那么我建议使用`NSNotificationCenter`. [文档](https://developer.apple.com/library/prerelease/ios/documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/index.html)

例如，将以下行添加到您的类的`init`或`viewDidLoad`方法中：

**Objective-C**

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationWillEnterForeground) name:UIApplicationWillEnterForegroundNotification object:nil]; 
```

**迅速**

```
NSNotificationCenter.defaultCenter().addObserver(self, selector: "applicationWillEnterForeground:", name: UIApplicationWillEnterForegroundNotification, object: nil) 
```

然后将以下方法添加到您的类中：

**Objective-C**

```
- (void) applicationWillEnterForeground {
     // add code here to restart animation
} 
```

**迅速**

```
func applicationWillEnterForeground(notification: NSNotification) {
    // add code here to restart animation
} 
```

请注意，`viewWillAppear`当应用程序在后台进入前台时，并不总是（如果有的话）被调用。所以我不会依赖使用它来重新启动动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T13:12:56.067

将此添加到您的动画中

`animation.removedOnCompletion = false;`

# c# - 数据表查找项

> ID：14108636
> 
> 赞同：0
> 
> 时间：2013-01-01T07:16:20.730
> 
> 标签：c#, datatable

我试图做这样的事情

```
 var names_en = dtTmp.AsEnumerable();
 var names = names_en.Where(a => a["ID"] == "1");
 string name = names["Name"].ToString(); 
```

我的目标是找到等于的行`ID`并`1`保留`Name`as 字符串

我知道我有`ID`列我知道我有一行在`ID==1`调试器中看到它。但`names`让该枚举不产生任何结果。

还有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:20:09.907

如果您使用[`DataRowExtension.Field`](http://msdn.microsoft.com/en-us/library/bb360891.aspx)强类型的方法会更好。还要确保你`ID`是字符串类型，否则你会得到一个异常。您可以相应地指定类型。

```
string name = dtTmp.AsEnumerable()
                .FirstOrDefault(r => r.Field<string>("ID") == "1")
                .Field<string>("Name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T15:21:55.677

```
var names = names_en.Where(a => a["ID"] == "1"); 
```

返回您必须获得第一条记录的结果列表

# html - 如何禁用一段 html 代码的基础或引导样式？

> ID：14108638
> 
> 赞同：8
> 
> 时间：2013-01-01T07:16:36.480
> 
> 标签：html, css, ruby-on-rails, html-email, zurb-foundation

我正在使用 mailgun（尽管这个问题与 mailgun 无关）来解析传入的电子邮件，并且 mailgun 会将解析后的电子邮件 http 发布到我的服务器。当我收到帖子时，我得到了多部分电子邮件的 html 代码。我想向我的用户显示 html 电子邮件，我正在使用 rails，所以它类似于

```
<div>
  <%= raw(message.body_html) %>
</div> 
```

但是，它看起来与我在 yahoo 或 hotmail 中查看相同的电子邮件时不同（我知道不同的电子邮件客户端会以不同的方式显示 html 电子邮件，但我的看起来完全不同）。

这是它在我的自建客户端上的外观： ![我自建客户端的html邮件显示](../Images/b3243fc5d782cff70b9c1d90f4b5a0d0.png)

这就是雅虎在同一封电子邮件中的外观： ![雅虎中的html电子邮件显示](../Images/34b48366a775ecc0a09695b069f89886.png)

我使用 Zurb Foundation 作为我的样式框架。但是，我认为电子邮件 html 带有自己的内联样式，我查看了它看起来确实如此的代码，然后它应该与其他客户端看起来足够相似。

那么，假设您获得一段 html 代码并希望按原样显示它而不让其他框架覆盖其样式，那么显示 html 电子邮件的最佳做法是什么？

此外，是否可以禁用代码块的 Foundation（或 twitter bootstrap）样式，例如，类似

```
<div>
  <% disable_foundation_styling begin %>
    <%= raw(message.body_html) %>
  <% end %>
</div> 
```

当然“disable_foundation_styling”只是我的想象。

提前致谢！

！！！！！！！！！2013 年 1 月 1 日更新！！！！！！！！！！！！！！！

正如@Alex L. 所建议的那样，我尝试过，但它并没有像预期的那样安静地工作。iframe 像以前一样渲染视图中的所有内容（见下图），这是可以理解的，因为 iframe 内容只是另一个控制器的视图，在这种情况下，rails 也将包括所有应用程序布局模板。但是，工具栏不是我最关心的问题，它是 iframe 内部的内容，看起来和以前完全一样。 ![在此处输入图像描述](../Images/943581b45b451b161f454146853389f1.png)

我怀疑 iframe 可能不是这样做的方法。我查看了 gmail 和 yahoo 的代码，他们不使用 iframe。相反，他们使用非常深的嵌套来呈现 html 电子邮件。html 电子邮件的部分对于 yahoo 和 gmail 具有相同的代码，除了 yahoo 为每个单独的 DOM 元素插入一个自己的 id。

所以现在我怀疑有一些基础样式会影响它的外观。

一旦我发现更多，我会更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:48:30.350

据我所知，不可能指示浏览器选择性地忽略 DOM 子集中的页面 CSS。您必须明确覆盖页面的现有样式。

但是，如果您有一个`iframe`元素，则该框架的内容将独立于应用于包含页面的任何样式进行呈现。因此，您可以创建一个单独的控制器和视图，仅用于呈现您的消息内容，并将其用作`iframe`.

# c++ - 为什么微软有 IHTMLDocument、IHTMLDocument2、...、IHTMLDocument8？

> ID：14108640
> 
> 赞同：7
> 
> 时间：2013-01-01T07:16:46.037
> 
> 标签：c++, internet-explorer, mshtml

接口名称末尾的数字是什么意思？我看到`IHTMLDocument3-7`没有成员（[参见 #5 的示例](http://msdn.microsoft.com/en-us/library/aa752514%28v=VS.85%29.aspx)），并且`8`有与手势相关的成员。数字是从 Windows 版本派生的吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-01T07:38:52.070

这是公共 COM 接口的一般特性。

如果你想要向后兼容，你永远不想改变一个发布的界面，因为这意味着人们为 IE 6 编写的所有代码都停止与 IE 7 一起工作，他们所有的客户都会对他们生气，他们会生气在你。

因此，如果 IE 5 添加了需要公开的新功能，而不是更改`IHTMLDocument`，您可以创建一个新接口，并使 IE5 支持这两者（通过继承`QueryInterface`、 或更明确的机制）。当 IE 7.0.2 或 IE 8 或 Win XP 或任何添加更多新功能的版本时，您会创建另一个。等等。

虽然 MS 可以提出描述性后缀而不仅仅是序号，但这可能更令人困惑而不是有用。所以, `IHTMLDocument2`, `IHTMLDocument3`, 等等是名字。它们没有任何意义，除了它们被添加的顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T08:37:09.223

> 接口名称末尾的数字是什么意思？

这是版本控制 COM 接口的标准约定。IXXX2 扩展了 IXXX 的新功能。IXXX3 扩展了 IXXX2 的新功能，等等。这允许客户端在新版本发布时使用旧功能而不会中断，并在需要时使用新功能，甚至在尝试调用它们之前检查这些功能是否可用。

> 我看到 IHTMLDocument3-7 没有成员

你是从哪里得到这个想法的？看看他们的实际定义。它们将许多新成员从一个界面暴露到下一个界面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T07:24:39.213

不 - 它只是表示界面的不同版本。它与 Windows 版本无关（就此而言，与 MSHTML 版本几乎/无关）：

*   [http://msdn.microsoft.com/en-us/library/aa752641%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa752641%28v=vs.85%29.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-24T20:14:46.953

截至[http://msdn.microsoft.com/en-us/library/aa752541(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa752541(v=vs.85).aspx)

我们可以看到：

> IHTMLDocument3 接口继承自 IDispatch 接口，但没有其他成员。

it can bee little confusing for newcomers to interface world.

# qt - 制作一个新的小部件并在表单中使用

> ID：14108641
> 
> 赞同：2
> 
> 时间：2013-01-01T07:16:47.867
> 
> 标签：qt, widget

我是 Qt 框架和 Qt Creator 的新手，我需要制作一个带有 UI 的新小部件，其中包含一些按钮、标签、函数和事件，**然后在另一个`form.ui`.**
或作为自定义小部件来到**Qt desiner 工具箱**。
**在 C# 中，我使用 UserControl。**
我怎样才能做到这一点？

我找到了`promote to`选项，但这不是我的答案！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T07:57:22.020

已经有关于[如何创建 Qt Designer 自定义小部件的](http://doc.qt.digia.com/qt/designer-creating-custom-widgets.html)文档。老实说，这是个人意见，除非这个自定义小部件在您的 UI 布局中可视化非常重要，否则不值得付出努力。

您可以在一个 UI 设计中轻松地为其创建占位符小部件或空布局，然后稍后在代码中将其添加到布局中。这个过程很简单：

1.  将自定义小部件创建为一个 UI
2.  在用于自定义小部件的位置创建具有空布局的主 UI
3.  在代码中，`addWidget`布局

同样，如果您确实需要在 Designer 中可视化此自定义小部件，请查看文档。我的观点来自 PyQt 背景，我们非常非常少地使用 Designer 仅用于复杂的布局设计，并且无论如何都在代码中完成大部分工作。

# javascript - 如何使用 javascript 文件系统 api 重命名目录？

> ID：14108653
> 
> 赞同：3
> 
> 时间：2013-01-01T07:19:57.033
> 
> 标签：javascript, html, filesystems

如何使用 JavaScript 文件系统 API 重命名目录？

我尝试如下：

```
dirNameWithPath = '/MyPictures3/New Folder';
newDirName = 'newTitle';
dirPath = '/MyPictures3';

filesystem.root.getDirectory(dirNameWithPath, {}, function(dirEntry) {
    dirEntry.moveTo(dirPath, newDirName, callback, errorHandler);
}); 
```

我收到以下错误：

```
FileError.INVALID_MODIFICATION_ERR 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:48:53.287

的第一个参数[`moveTo`](http://dev.w3.org/2009/dap/file-system/pub/FileSystem/#widl-Entry-moveTo-void-DirectoryEntry-parent-DOMString-newName-EntryCallback-successCallback-ErrorCallback-errorCallback)必须是一个`DirectoryEntry`（不是字符串）：

```
void moveTo(DirectoryEntry parent,
            optional DOMString newName,
            optional EntryCallback successCallback,
            optional ErrorCallback errorCallback); 
```

`parent`参数是*“要将条目移动到的目录*” 。

而*“entry”*是要移动/重命名的目录（`directory.moveTo(newLocation, newName)`）。

# wpf - 尝试在 VS2012 中定义 xmlns 时 Intellisense 不起作用

> ID：14108659
> 
> 赞同：1
> 
> 时间：2013-01-01T07:20:46.643
> 
> 标签：wpf, xaml, intellisense, xml-namespaces

我正在尝试将命名空间添加到 xaml 中的一个用户控件。在 Visual Studio 2010 中，我只需键入`xmlns:blahblah=`，它就会添加引号并为我提供完整的程序集建议列表，以添加为命名空间定义。

在 Visual Studio 2012 中，我开始输入它，我在输入时立即收到 xaml 错误并且没有任何建议。问题是，我不知道我需要添加哪些确切的内容，所以我有点依赖智能感知。

常规的智能感知工作得很好。为什么是这样？

![在此处输入图像描述](../Images/288c9c7d26cdfe5a424d941d71d32e4b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:48:18.807

问题似乎是我`.NET 4.0 Client Profile`用于我的应用程序的事实。我继续将它转移到`.NET 4.5`（完整），但我确信`.NET 4.0`（完整）也可以。它似乎解决了我遇到的几乎所有智能感知问题。

我不知道切换的缺点是什么，尽管对于 4.5 甚至没有`Client Profile`版本

# jquery - 在不重新加载的情况下修改 url 中的查询字符串

> ID：14108664
> 
> 赞同：0
> 
> 时间：2013-01-01T07:22:41.817
> 
> 标签：jquery, asp.net

我通过传递查询字符串来过滤产品。但问题是，每次我选择一个过滤器时，querysting 都会附加到 url 并重新加载页面。我不想重新加载页面，只需传递查询字符串并通过 ajax 调用过滤产品。**就像[Flipkart](http://www.flipkart.com/laptops/dell~brand/pr?sid=6bo,b5g&_pop=flyout&otracker=hp_submenu_computer)正在做的那样**

这是[我的页面](http://www.superfashioner.com.falcibar.arvixevps.com/category.aspx)

请让我帮助解决这些问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T08:14:47.537

您可以使用`jquery ajax`. 太简单了

您需要创建一个 ashx/asmx 页面，该页面将根据传递的 url 参数返回结果。我建议返回 a`JSON`作为结果。

jQuery ajax 可以如下使用。[jQuery API](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
  url: "GetItems.ashx?design=1";
}).done(function() { 
  alert("Got the results");
}); 
```

然后您可以使用 jQuery 模板来呈现 JSON 数据。[jQuery API](http://api.jquery.com/tmpl/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T17:57:58.660

一些兼容 HTML5 的网络浏览器已经实现了一个 History API，它可以用于类似你想要的东西：

```
if (history.pushState) {
    var newurl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?myNewUrlQuery=1';
    window.history.pushState({path:newurl},'',newurl);
} 
```

我测试了，效果很好。它不会重新加载页面，但它只允许您更改 URL 查询。您将无法更改协议或主机值。

了解更多信息：

[http://diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)

[https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history)

# android - 为 Android 上传图片电子邮件附件的问题

> ID：14108667
> 
> 赞同：1
> 
> 时间：2013-01-01T07:23:04.810
> 
> 标签：android, email, email-attachments

对于我的一个项目，我试图简单地将图像附加到电子邮件并发送。

```
 Intent emailIntent = new Intent(Intent.ACTION_SEND);
         emailIntent.setType("image/jpg");
         emailIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
         emailIntent.putExtra(Intent.EXTRA_SUBJECT,
         "Image attached.");
         emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(filePath));
         emailIntent.setType("text/plain");
         startActivity(Intent.createChooser(emailIntent,
         "Send email using..")); 
```

我的变量“filePath”是在我的设备外部存储上找到的图像的绝对文件路径。它的形式是“/mnt/sdcard/.....”我的图像路径绝对正确，因为我成功地将照片加载到其他图像视图中。

此意图也可以正常工作，并且能够将我带到屏幕以选择用于发送我的图像的应用程序。但是，在实际的电子邮件中，我可以看到我的图像已附加（文件路径名 100% 正确），但图像本身没有附加。

有谁知道这个问题的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:29:10.807

尝试这个：

```
File fileToAttach = new File(filePath, filename);
emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(fileToAttach)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T10:46:20.503

试试这个代码

```
 Intent sendIntent = new Intent(Intent.ACTION_SEND);
            sendIntent.setType("message/rfc822");
            sendIntent.putExtra(Intent.EXTRA_SUBJECT, "Video");
           sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://"+path));
            sendIntent.putExtra(Intent.EXTRA_TEXT, "Enjoy the Video");
           startActivity(Intent.createChooser(sendIntent, "Email:")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T07:32:23.857

也遇到同样的问题

**代码**：

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
    emailIntent.setType("image/jpeg");
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[] 
    {"me@gmail.com"}); 
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, 
    "Test Subject"); 
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, 
    "go on read the emails"); 
    Log.v(getClass().getSimpleName(), "sPhotoUri=" + Uri.parse("file:/"+ sPhotoFileName));
    emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:/"+ sPhotoFileName));
    startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

**从 adb logcat**：

```
V/DumbDumpersMain( 3972):   sPhotoUri=file://sdcard/DumbDumpers/DumbDumper.jpg
I/ActivityManager(   56):   Starting activity: Intent { action=android.intent.action.CHOOSER comp={android/com.android.internal.app.ChooserActivity} (has extras) }
I/ActivityManager(   56):   Starting activity: Intent { action=android.intent.action.SEND type=jpeg/image flags=0x3000000 comp={com.google.android.gm/com.google.android.gm.ComposeActivityGmail} (has extras) }
I/ActivityManager(   56):   Starting activity: Intent { action=android.intent.action.SEND type=jpeg/image flags=0x2800000 comp={com.google.android.gm/com.google.android.gm.ComposeActivity} (has extras) }
D/gmail-ls(  120):      MailProvider.query: content://gmail-ls/labels/me@gmail.com(null, null)
D/Gmail   ( 2507):      URI FOUND:file://sdcard/DumbDumpers/DumbDumper.jpg 
```

看起来电子邮件提供商正在附加一个长度为 0 的文件。当我检查文件系统时，文件在那里并且正确。创建图像文件的代码在尝试通过电子邮件发送之前已经完成。

有人在没有魔法重启的情况下解决了这个问题（我已经尝试过了）？

**更新**

我的道路应该是

```
file:///sdcard/DumbDumpers/DumbDumper.jpg 
```

你需要额外的 / 因为它指向根目录，即：

```
file:// + /sdcard/DumbDumpers/DumbDumper.jpg 
```

结合为

```
file:///sdcard/DumbDumpers/DumbDumper.jpg 
```

在上面的代码片段中，您需要：

```
emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://"+ sPhotoFileName)); 
```

我希望这有帮助。我花了很长时间来调试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T07:34:09.917

试试这种方式：

```
File pngDir = new File(Environment.getExternalStorageDirectory(),"DCIM/Camera");  
File pngfile = new File(pngDir, "<ImageName>");  
Uri pngUri = Uri.fromFile(pngfile);  
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setType("image/*");  
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,"<Email>");
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,"<Subject>");
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,"<Message>");
emailIntent.putExtra(android.content.Intent.EXTRA_STREAM,pngUri);
emailIntent.setType("image/png");  
startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

# mysql - 卡在具有多个 JOIN 的 MySQL 查询上

> ID：14108670
> 
> 赞同：1
> 
> 时间：2013-01-01T07:23:31.470
> 
> 标签：mysql, sql, join

我很惭愧在 MySQL 查询中遇到麻烦，它应该是易于中型的......所以我希望你能帮我摆脱这个困境！;)

简化事情，我有3个表：

1）出版物（列：idpub（主要）等），其中每条记录都是参考书目

2) pubs_index (colums: idpub, idindex) 这是发布和 index_entries 之间的链接表

3) index_entries (colums: idindex, name)，其中包含可用于索引 pulications 的关键字列表

每个出版物可以用 0 到 n 个 index_entries 进行索引。

在我的查询中，我想检索已使用所有关键字“狗”、“猫”和“鼠标”编入索引的出版物。

我尝试了各种 JOIN 组合，但到目前为止都没有成功。这是我最新的可行尝试为例：

```
SELECT distinct publications.idpub) 
FROM index_entries as index_entries2, index_entries as index_entries3, publications    LEFT JOIN pubs_index ON publications.idpub = pubs_index.idpub 
INNER JOIN index_entries ON bib_index.idindex=index_entries.idindex 
WHERE AND bib_index.idindex=index_entries2.idindex 
AND bib_index.idindex=index_entries3.idindex 
AND index_entries.name like 'dog'
AND index_entries2.name like 'cat'
AND index_entries3.name like 'mouse'; 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T07:31:17.020

> 我想检索已用所有关键字“狗”、“猫”和“老鼠”编入索引的出版物。

你可以这样做：

```
SELECT DISTINCT
  p.idpub
FROM
( 
   SELECT *
   FROM index_entries
   WHERE name IN(SELECT name
                 FROM index_entries 
                 WHERE name IN ('dog', 'cat', 'mouse')
                 GROUP BY name
                 HAVING COUNT(idindex) = 3)
) as i
INNER JOIN publications  p ON p.idindex = i.idindex; 
```

您可能需要修改此查询以获取您要查找的内容，因为我无法理解`JOIN`您在问题中发布的查询中的其他 s。但是这个查询背后的想法是这个子查询：

```
SELECT name
FROM index_entries 
WHERE name IN ('dog', 'cat', 'mouse')
GROUP BY name
HAVING COUNT(idindex) = 3 
```

这将只选择`index_entries`具有所有三个的名称`'dog', 'cat', 'mouse'`。您可能需要阅读更多关于它的信息，它被称为[*关系除法*](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

# php - 重命名上传的图片

> ID：14108673
> 
> 赞同：0
> 
> 时间：2013-01-01T07:24:04.967
> 
> 标签：php, javascript

我正在将图像上传到服务器，需要将 _ 代替图像中的间隙。就像图像的名称是 Stack Flow.jpg 一样，我需要将它作为 Stack_Flow.jpg 发送到目录以及电子邮件中。如何使用以下代码成为可能。我试过但没有成功..我以一种形式发送4个文件，代码为---

```
$filea = $_FILES['FILE1']['name'];
        $fileb = $_FILES['FILE2']['name'];
        $filec = $_FILES['FILE3']['name'];
        $filed = $_FILES['FILE4']['name'];

$order_image_a='order_'.$orderId.'_'.$filea;
        if(!empty($filea)) move_uploaded_file($_FILES['FILE1']['tmp_name'], "../files/$order_image_a");

        $order_image_b='order_'.$orderId.'_'.$fileb;
        if(!empty($fileb)) move_uploaded_file($_FILES['FILE2']['tmp_name'], "../files/$order_image_b");

        $order_image_c='order_'.$orderId.'_'.$filec;
        if(!empty($filec)) move_uploaded_file($_FILES['FILE3']['tmp_name'], "../files/$order_image_c");

        $order_image_d='order_'.$orderId.'_'.$filed;
        if(!empty($filed)) move_uploaded_file($_FILES['FILE4']['tmp_name'], "../files/$order_image_d"); 
```

我正在使用以下功能，我如何将它应用于所有四个文件 -

```
<script>
function convertSpecialChars($str) {
    $str = str_replace( " ", "_", $str );
    return $str;
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T07:28:52.850

这是 php 中的一个简单示例：

```
<?php

$name = "Stack Flow.jpg";
echo preg_replace('/[\s\-]+/', '_', $name );
?> 
```

返回`Stack_Flow.jpg`

[http://codepad.org/MQoEZ2wv](http://codepad.org/MQoEZ2wv)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T07:31:18.473

这不是脚本，而是 PHP ..

```
<?
function convertSpecialChars($str) {
    $str = str_replace( " ", "_", $str );
    return $str;
?> 
```

//对所有其他图像做同样的事情..

```
$filea = str_replace(' ', '_', $filea;
$order_image_a='order_'.$orderId.'_'.$filea;
if(!empty($filea)) move_uploaded_file($_FILES['FILE1']['tmp_name'], "../files/$order_image_a"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T07:30:20.803

使用：

```
<?php
    function convertSpecialChars($str) {
        $str = str_replace( " ", "_", $str );
        return $str;
    }
?> 
```

然后你的代码：

```
$filea = $_FILES['FILE1']['name'];
$fileb = $_FILES['FILE2']['name'];
$filec = $_FILES['FILE3']['name'];
$filed = $_FILES['FILE4']['name'];

$order_image_a='order_'.$orderId.'_'.convertSpecialChars($filea);
if(!empty($filea))
    move_uploaded_file($_FILES['FILE1']['tmp_name'], "../files/$order_image_a");

$order_image_b='order_'.$orderId.'_'.convertSpecialChars($fileb);
if(!empty($fileb))
    move_uploaded_file($_FILES['FILE2']['tmp_name'], "../files/$order_image_b");

$order_image_c='order_'.$orderId.'_'.convertSpecialChars($filec);
if(!empty($filec))
    move_uploaded_file($_FILES['FILE3']['tmp_name'], "../files/$order_image_c");

$order_image_d='order_'.$orderId.'_'.convertSpecialChars($filed);
if(!empty($filed))
    move_uploaded_file($_FILES['FILE4']['tmp_name'], "../files/$order_image_d"); 
```

或者，如果可能，您可以循环执行（减少重复代码）：

```
for ($i = 1; $i <= 4; $i++)
{
    $file = $_FILES['FILE' . $i]['name'];

    $order_image = 'order_' . $orderId . '_' . convertSpecialChars($file);

    if(!empty($file))
        move_uploaded_file($_FILES['FILE' . $i]['tmp_name'], "../files/$order_image");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T07:31:20.343

在您的代码更改`$order_image_a='order_'.$orderId.'_'.$filea;`和其他类似行中 `$order_image_a='order_'.$orderId.'_'.convertSpecialChars($filea);`

但是如果你知道你的代码是如何工作的会更好。

# powershell - 我们如何识别由不同对象打开的两个 excel.exe 进程？

> ID：14108674
> 
> 赞同：1
> 
> 时间：2013-01-01T07:24:15.357
> 
> 标签：powershell, vbscript, exe, wsh

我有一个正在处理 Excel 工作簿的 .vbs 文件。现在假设系统中有 3 个 EXCEL.EXE 进程正在运行的情况。那么现在有什么方法可以找出 main.vbs 脚本打开了哪个进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:15:59.240

即使您标记了这个 powershell，这里只有一个 VBS 选项可能需要一些修改，具体取决于您的 Excel 版本（我在这台电脑上有 2003）：

```
'Create Excel Application for demo purposes only
Dim ex: Set ex = CreateObject("Excel.Application")
Dim objWMIService, objProcess, colProcess
Dim strComputer, strList

strComputer = "." 'Change if you want to run on another computer

Set objWMIService = GetObject("winmgmts:" _
& "{impersonationLevel=impersonate}!\\" _
& strComputer & "\root\cimv2")

'Look only at Excel process name
Set colProcess = objWMIService.ExecQuery _
("Select * from Win32_Process Where NAME = 'EXCEL.exe'")

'Get the list of Processes, included only for demo purposes
For Each objProcess In colProcess
    strList = strList & vbCr & objProcess.commandline
Next
MsgBox strList ' Displayed "C:\Program Files\Microsoft Office\OFFICE11\EXCEL.EXE"
                          '"C:\Program Files\Microsoft Office\OFFICE11\EXCEL.EXE" / automation - Embedding
               ' Second row was the created Object.

'Find processes that match the Created Object format commandline
Set colProcess = objWMIService.ExecQuery _
("Select * from Win32_Process Where CommandLine Like '%EXCEL.exe"" /automation -Embedding'")
For Each objProcess In colProcess
    'Do something with process
    objProcess.Terminate
Next
'Next line will cause runtime error due to process already being terminated.
ex.Quit 
```

与此类似的方法的美妙之处在于，通过使用 objProcess.Commandline，您可以找到发送到应用程序的命令行开关，您可以使用这些开关来查明特定进程。例如，如果您有一个 .bat 文件，它可以像这样打开一个 Excel 文件：`start Excel.exe C:\example.xls`该进程将包含`C:\example.xls`在进程命令行属性中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T14:32:27.480

用于[`Get-WMIObject win32_process`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394372%28v=vs.85%29.aspx "MSDN")获取所有进程的列表。查看`ParentProcessId`成员以查看哪个进程产生了哪个 Excel 实例。

VBScript 是通过 WScript 或 CScript 执行的，因此您需要先查看正确的父级。

请注意，Windows 会回收进程 ID。也就是说，在时间 t0 pid 1000 不一定是与在时间 t1 相同的进程。

**附录：**

使用`-Computername`switch 为 WMI 查询指定另一台计算机。如果没有`-Computername`开关，则假定为 localhost。本地主机也称为`.`，在上面的 VBScript 答案中使用。像这样，

```
#Get process list from Server01, assuming you have sufficient rights
Get-WMIObject win32_process -Computername server01 
```

# sql - 在更新子句中使用 Case 语句 - Sybase

> ID：14108677
> 
> 赞同：0
> 
> 时间：2013-01-01T07:24:34.030
> 
> 标签：sql, sql-update, case

以下是sybase代码。有人可以看看以下是否正确。我想我错过了某处的语法

```
 declare @test  varchar(32)
    select @test="/data/dump/team/"

    update link
    set link.value=
     case when @test=substring(link.value,1,17)
                   then @test
          when  @test != substring(link.value,1,17)
                      value
    end 
    where link.value != ""
    and link_id=0 and row_id = 462135 
```

因为它给了我以下错误：“第 10 行关键字结尾附近的语法不正确。”

可以请人帮我语法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T07:27:08.413

尝试在第二种情况下添加“then”：

```
declare @test  varchar(32)
    select @test="/data/dump/team/"

    update link
    set link.value=
     case when @test=substring(link.value,1,17)
                   then @test
          when  @test != substring(link.value,1,17)
                   then value
    end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T15:49:32.780

为什么不简单地为第二个“when”做一个“else”？

# c++ - C++ Mongodb 驱动程序 v2.2 scons 在 Linux 上安装失败

> ID：14108683
> 
> 赞同：1
> 
> 时间：2013-01-01T07:25:22.393
> 
> 标签：c++, mongodb, boost, scons

我已经安装这个驱动很长时间了，但是失败了。有一些失败的信息如下

```
# scons
Reading SConscript files ...
Checking for C++ library boost_thread-mt... no
Checking for C++ library boost_thread... no
# echo $LD_LIBRARY_PATH
/usr/lib:/usr/local/lib/:/usr/local/mpc/lib:/usr/local/gmp/lib:/usr/local/mpfr/lib/
# ls /usr/local/lib/libboost_thread* -l
-rw-r--r--  1 root root 288364 Dec 28 18:16 /usr/local/lib/libboost_thread.a
lrwxrwxrwx  1 root root     40 Jan  1 13:05 /usr/local/lib/libboost_thread-mt.so -> /usr/local/lib/libboost_thread.so.1.52.0
lrwxrwxrwx  1 root root     25 Dec 28 18:10 /usr/local/lib/libboost_thread.so -> libboost_thread.so.1.52.0
-rwxr-xr-x  1 root root 186164 Dec 28 18:10 /usr/local/lib/libboost_thread.so.1.52.0 
```

我已经安装了boost v1.52，scons v2.2.0，我想安装mongodb C++驱动v2.2。有任何想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:50:45.143

LD_LIBRARY_PATH 环境变量影响库在运行时的位置，而不是在链接时。客户端驱动程序 SConstruct 文件提供了一个选项`--extrapath`，允许您提供额外的库搜索路径。

尝试运行：

`scons --extrapath=/usr/local`

查看它是否会拾取您已安装在 /usr/local 中的 boost 库。

# symfony - 用户登录 symfony 2.1 应用程序后如何添加一些操作

> ID：14108685
> 
> 赞同：1
> 
> 时间：2013-01-01T07:25:33.647
> 
> 标签：symfony, symfony-2.1

我有一个 symfony 2.1 应用程序。我遵循了从 symfony 2.1 文档创建登录系统的教程。我的用户表结构是这样的：

```
 users
    -id
    -username
    -email
    -password
    -last_login_date 
```

我想要做的是在用户登录时更新该用户的 last_login_date。当用户启用记住我选项时，还要更新 last_login_date。我怎样才能在 symfony 2.1 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:50:42.930

基本上，您需要监听**security.interactive_login事件（您可以**[在此处](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)阅读有关事件的更多信息。

另外，检查**FOSUserBundle**，它实现了一个[在这里](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/config/security.xml#L13)配置的[LastLoginListener](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/EventListener/LastLoginListener.php)

# ruby-on-rails - Rails 国际化 (i18n)：除 layouts/application.html.erb 外的所有内容都在翻译

> ID：14108688
> 
> 赞同：4
> 
> 时间：2013-01-01T07:25:51.583
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, ruby-on-rails-3.2, rails-i18n

我不断收到“缺少翻译：en.layouts.application.title”的标题或我尝试在 app/views/layouts/application.html.erb 文件中翻译的任何项目。

**配置/语言环境/en.yml**

```
en:

  layouts:
    application:
      title:  "My Catalog"
      home:  "Home"
      store:   "Store"
      faq:      "FAQ"
      contact:  "Contact"
      about:    "About" 
```

**应用程序/视图/布局/application.html.erb**

```
<div id="banner">
  <% t('.title') %>
</div>
<div id="nav_menu" class="sidebar_menu">
  <a href="/"><%= t('.home') %></a>
  <a href="/store"><%= t('.store') %></a>
  <a href="/faq"><%= t('.faq') %></a>
  <a href="/contact"><%= t('.contact') %></a>
  <a href="/about"><%= t('.about') %></a>
</div> 
```

视图中的所有翻译都正常工作，但布局中的任何内容都表明它丢失了。我正在使用 en.yml、fr.yml 和 es.yml，它们都是相同的问题（分别为 fr.layouts.application.title 和 es.layouts.application.title）

如果我将行移出布局：应用程序：嵌套并进入 .yml 文件的根层次结构（当然从 t 方法中删除句点），那么一切都会翻译。一旦我将它们移回布局下：应用程序：我再次缺少翻译。

有什么问题？我正在使用 Rails 3.2.7

编辑1：刚刚尝试使用 <% t('layouts.application.title') %> 但仍然说翻译丢失。

编辑 2：如果我将 application.html.erb 复制或重命名为不同的名称（并相应地更改 *.yml 文件），则会找到解决方法。
如果我开始一个**新项目**，翻译在 application.html.erb 中工作得很好。但是在***当前项目***中：只要我使用 application.html.erb（即使测试内容很少），我仍然会丢失翻译。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-07T20:31:41.927

更新：离开这个项目有一段时间了，但发现了这个问题......

已解决：我可能会补充说非常愚蠢。
**确保您没有使用制表符 ('\t') 来分隔文件中的文本。**
显然，它无法使用制表符正确编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:17:58.077

我今天遇到了完全相同的问题，经过调试会话后，我找到了问题的根源。我敢打赌这也是你的问题，因为这对你的解决方法也很有意义，而且这个问题不会发生在一个全新的项目上。你碰巧有等级制度吗

```
en:
  layouts:
    application: 
```

在文件的其他地方定义`yml`？

我在定义

```
en:
  layouts:
    header:
      language: "Language" 
```

和

```
en:
  layouts:
    header:
      my_profile: "My profile" 
```

在两个不同的地方，所以我猜翻译器会寻找第一个（并且假设是唯一的）组合键，而永远找不到另一个......

希望这能解决您的问题！

# android - 如何在 sencha touch 中禁用标签面板导航

> ID：14108692
> 
> 赞同：2
> 
> 时间：2013-01-01T07:27:10.960
> 
> 标签：android, extjs, sencha-touch, sencha-touch-2

我在我的应用程序中显示一个带有四个选项卡的选项卡面板，默认情况下显示第一个选项卡。

每当用户选择其他三个选项卡之一时，我需要通过检查本地存储用户令牌变量来检查用户是否已经登录。

如果我没有从本地存储用户令牌变量中获得有效值，或者用户尚未登录，那么我必须通过在选项卡面板上显示覆盖页面来要求用户登录。

我设计了覆盖面板（覆盖[示例](http://docs.sencha.com/touch/2-0/#!/example/overlays)），以便当用户选择另一个选项卡并且尚未登录时，我将显示覆盖登录面板。

我的问题是，当用户选择另一个选项卡时，所选选项卡屏幕已启用，并且该屏幕出现在覆盖登录屏幕下方。**如何禁用选项卡导航，以便在用户尚未登录时，他们看不到其他选项卡屏幕，只能看到第一个选项卡屏幕？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T07:53:28.870

这是解决您的问题的示例代码片段：

您可以通过以下方式处理此类事情`Controller`：

```
Ext.define('MyTest.controller.Home',{
    extend : 'Ext.app.Controller',  

    config : {
        refs : {
            tabHome     : "#mainView tab[iconCls=home]",
            tabProduct  : "#mainView tab[iconCls=products]",

        },
        control : {
            tabHome : {
                tap : 'showHome'
            },

            tabProduct : {
                tap : 'showProduct'
            },

        }
    },

    showHome : function () {
        if(getLoginState() == true){
            Ext.Viewport.getActiveItem().getAt(1).setActiveItem('homeView');
        }
        else{
            Ext.Viewport.getActiveItem().getAt(0).setActiveItem('dashboardView');
            showLoginOverlay();
        }
    },

    showProduct : function () {
        if(getLoginState() == true){
            Ext.Viewport.getActiveItem().getAt(2).setActiveItem('productView');
        }
        else{
            Ext.Viewport.getActiveItem().getAt(0).setActiveItem('dashboardView');
            showLoginOverlay();
        }
    },

}); 
```

谢谢。

# mysql - 如何在 MySQL 中允许所有字符（中文、西班牙文、韩文等）

> ID：14108699
> 
> 赞同：0
> 
> 时间：2013-01-01T07:28:39.043
> 
> 标签：mysql

> **可能重复：**
> [一直到 UTF-8](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)

所以我的表中有一个名为'names'的列，它是一个VARCHAR（60），但我试图正确接受国际字符。对于中文/韩文字符，它只是输入“？” 代替实际的字符。什么是与国际 2 字节标准正常工作的整理？我还需要能够根据区分大小写从该列中选择数据，因此`TEST`将提取与`Test`. 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T07:34:05.423

您可以将数据库排序规则设置为`utf8-general-ci`，数据库将正确处理字符。

# javascript - 如何使用javascript创建soap消息进行文件上传？

> ID：14108702
> 
> 赞同：3
> 
> 时间：2013-01-01T07:29:01.373
> 
> 标签：javascript, web-services, spring, soap

我正在编写一些 Web 服务并在服务器端使用 Spring。如何使用 javascript 创建soap 消息来上传文件，以及该服务的服务器端实现如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:52:00.077

我建议您熟悉通过 SOAP 发送附件的[MTOM](http://en.wikipedia.org/wiki/MTOM)。可以使用任何编程语言创建 MTOM 消息。一个例子可以在这里找到：[http ://www.crosschecknet.com/intro_to_mtom.php](http://www.crosschecknet.com/intro_to_mtom.php)

# mysql - MySQL 代理检测选择查询的更好方法

> ID：14108704
> 
> 赞同：0
> 
> 时间：2013-01-01T07:29:07.497
> 
> 标签：mysql, lua, mysql-proxy

我正在使用 lua 脚本 [https://github.com/clofresh/mysql-proxy-cache](https://github.com/clofresh/mysql-proxy-cache)来缓存选择查询。但是它检测 select 语句的方式存在问题。它使用以下代码

```
return query:sub(1,6):lower() == 'select' 
```

如果选择查询嵌套在`()`. 例子：

```
(SELECT * from tbl_name); 
```

有没有办法在 mysql 代理中删除多余的 () ？

或者有没有更好的方法来检测选择查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:19:41.080

查询实际上在括号内，而不是在字符串内？即使使用插件，它也不应该正确解析。如果它在字符串中，则只需使用`:sub(2, 7)`，但是，如果不是，则将其放在字符串中。创建一个基本上重现该函数的函数，除了将它放在一个字符串中，例如：

```
function mysqlQuery(mysqlString)
    loadstring(mysqlString)(); 
    return mysqlString;
end
mysqlQuery("SELECT * from tbl"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T08:27:00.260

我会尝试使用检测常见模式并用等效的规范化 sql 替换它们的[字符串库编写规范化脚本。](http://lua-users.org/wiki/StringLibraryTutorial)

一个例子是你的父母，但也可以查询零件被移动到哪里可以从中受益。

# php - Magento 以编程方式设置客户 DOB 和税号

> ID：14108718
> 
> 赞同：0
> 
> 时间：2013-01-01T07:30:39.137
> 
> 标签：php, magento

我正在尝试使用数据流配置文件导入客户，并希望在我的 csv 文件中设置客户的出生日期和税号找到正确的解决方案..

```
$customer = $this->getCustomerModel();
$customer->setData('dob',date('m-d-Y'));
$customer->setData('taxvat','test'); 
```

任何人之前都这样做过，请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:06:10.137

这应该工作

但有一件事是通过“$this->getCustomerModel();”

你可以得到 oly 模型，也许你必须通过加载函数加载客户，然后试试这个。

# asp.net - CheckBox Check 在 Gridview 的服务器端不起作用

> ID：14108719
> 
> 赞同：0
> 
> 时间：2013-01-01T07:30:40.137
> 
> 标签：asp.net, gridview, checkbox

我在 Gridview 选中复选框时遇到问题，服务器端复选框显示选中 = false。

它真的很奇怪，我还没有见过。

我写了以下代码。

```
<script type="text/javascript">
        function SelectAll() {
            if ($('.SelectAll input:checkbox').attr("checked"))
                $('.chkTechs input:checkbox').attr("checked", true);
            else
                $('.chkTechs input:checkbox').attr("checked", false);
        }
        function SetCheckBoxes(item) {
            //$(item).attr("target").checked    // this is to find which element clicked
            if ($('.chkTechs input:checkbox').filter(":not(:checked)").length > 0) {
                $('.SelectAll input:checkbox').attr("checked", false)
            }
            else {
                $('.SelectAll input:checkbox').attr("checked", true)
            }

        }
    </script> 
```

服务器端按钮点击

```
foreach (GridViewRow row in gvList.Rows)
            {
                CheckBox Checked = (CheckBox)row.FindControl("chkSelect");
                bool isChecked = ((CheckBox)row.FindControl("chkSelect")).Checked;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:34:46.247

服务器控件的状态保持不变，并且像您使用客户端脚本 ( )`viewstate`更改复选框的选中状态一样更改控制状态不会在 中更新。因此，当您访问服务器端的控件时，您不会得到更改。您必须将更改存储在一些中，并使用服务器端的隐藏字段来更新您的控件。这是 asp.net 实现.`javascript``viewstate``hidden field``viewstate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:26:45.767

您必须通过检查相应复选框的 Request.Form[xxx] 参数的存在来获取它们的值。在你的情况下[chkSelectXXX]。

1）在创建复选框时将有意义的内容附加到复选框的 ID。例如：主键 val 以便复选框的 ID 应为 [chkSelect_PKValue1]

2) 在服务器端循环通过 Request.Form 变量并检查是否存在具有以 chkSelect 开头的键值的变量。像这样的东西：

```
foreach(var x in Request.Form)
{
     if(x.StartsWith("chkSelect"))
     {
          //3\. Then this checkbox is selected you should parse the 
          //PK value and do what's necessary.
     }
} 
```

# javascript - 如何在单击链接按钮时调用 javascript 和代码隐藏函数？

> ID：14108723
> 
> 赞同：0
> 
> 时间：2013-01-01T07:30:57.643
> 
> 标签：javascript, c#-4.0, asp.net-4.0

我想在单个 asp 按钮单击事件上调用 javascript 函数和单击方法。我正在尝试使用以下代码。

```
 <asp:LinkButton ID="lbtnSave" runat="server" 
                OnClientClick="myFunction();"OnClick="lbtnSave_Click">Save</asp:LinkButton>--%>
//javascript
function myFunction() {}

//code behind method
 protected void lbtnSave_Click(object sender, EventArgs e) {} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:57:45.563

@Aparna，当您使用验证控件时，我相信单击按钮时会触发这些验证控件。

为了克服这个问题，有两个替代方法可以定义`validationgroup`您的验证控件或设置`CausesValidation = false`您的链接按钮。

例子

```
<asp:LinkButton ID="lbtnSave" runat="server" CausesValidaion="false" 
     OnClientClick="myFunction();"OnClick="lbtnSave_Click">Save</asp:LinkButton> 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T08:15:10.677

如果你想在客户端调用 js 函数点击使用这个：

```
<asp:LinkButton ID="lbtnSave" runat="server" OnClientClick="myFunction()" OnClick="lbtnSave_Click">Save</asp:LinkButton> 
```

要在方法（代码隐藏）中调用它，您可以使用它：

```
ScriptManager.RegisterStartupScript(this,GetType(), "myFunction", "myFunction()", true); 
```

# javascript - JavaScript函数在首页不起作用？

> ID：14108724
> 
> 赞同：0
> 
> 时间：2013-01-01T07:31:07.340
> 
> 标签：javascript, modal-dialog

我有一个联系表单的模式窗口，在[我的网站](http://www.bintley.com)侧边栏有一个链接：

```
<a href="/contact-us/"  onClick="openDialog();return false;" style="color:#e40"><strong>Click to contact us</strong></a> 
```

虽然它在所有其他页面上都可以正常工作，但在[主页上](http://www.bintley.com)却无法正常工作。尝试单击它，它不会打开模态窗口。

函数 openDialog() 在 global.js 中定义：

```
function openDialog() {
    jQuery("a#inline").trigger('click')
} 
```

我不知道为什么。而且我不知道如何调试 JavaScript。它没有显示任何错误。你能帮我调试一下，还让我知道我以后如何自己调试吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:48:04.967

假设您正在使用一种名为“模态对话框”的 wordpress 插件。这个插件似乎没有很好地安装在您的主页上，而是安装在其他页面上，因此请检查所有布局的插件设置，包括主页使用的那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T08:11:05.783

```
 <a id="contactLink" href="/contact-us/" style="color:#e40" > <strong> Click to contact us </strong> </a> 
```

**在您的脚本文件中：**

 ````
 var contactlink = document.getElementById('contactLink')
 contactLink.onclick = openDialog; 
````  `如果您没有将 CSS 和 Javascript 与您的标记混合，那么调试起来会容易得多。分离所有东西（至少在生产过程中）是一种很好的做法。

获取 FireFox 的 Firebug 插件。这是调试 javascript 的好工具。此外，您可以在浏览器中按 F12，然后会出现本机开发工具。`

# asp.net - 如何从asp.net中的sql server图像字段将图像绑定到转发器控件？

> ID：14108729
> 
> 赞同：-1
> 
> 时间：2013-01-01T07:31:36.873
> 
> 标签：asp.net

我将图像直接存储到数据库中。现在我想将转发器控件绑定到数据库的图像字段。我想从数据库中加载所有图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:40:09.767

传递包含图像的字节流不是在 asp.net 中执行此操作的正确方法。
显示图像的最佳方法是将图像保存在服务器上，并且仅将链接传递给图像（`asp:Image`例如使用控件）...

在你的情况下，我猜你有两个选择：

1.  重构应用程序以将图像保存在硬盘上，并且仅将图像的 URL 作为文本字段存储在数据库中。

2.  当您收到请求并想要显示图像时，将图像保存到服务器上的临时目录，然后将该临时图像文件的 URL 传递给客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T09:09:20.097

嗨 Nimesh 您可以使用以下方式从字节数组创建图像并绑定到 repetor

```
<asp:Repeater ID="Repeater1" runat="server">
    <ItemTemplate>
<%# DataBinder.Eval(Container.DataItem, "BookName") %>
<hr>
<%# DataBinder.Eval(Container.DataItem, "BookDescription") %>
<td width="100px">
<p align="left">
 <img src= '<%# GetImageFromByte(DataBinder.Eval(Container.DataItem, "Image")) %>'  
 alt="" style="height:200px;width:200px;border:1px solid gray;"/>
</td>
</p> 
```

* * *

```
//////////////////////// ////////////////////////////    
call  GetImageFromByte  this function from aspx as shown above and convert byte array to image and save in folder then return complete image path 

public string GetImageFromByte(object byt)
 {
  byte[] byts = Convert.ToByte(byt);
  return byteArrayToImage(byts);
}

private string byteArrayToImage(byte[] byteArrayIn)
{
  System.Drawing.Image newImage;
  string strFileName = "Filder path where image need to store " + "yourfilename.gif";
  if (byteArrayIn != null)
   {
    using (MemoryStream stream = new MemoryStream(byteArrayIn))
     {
       newImage = System.Drawing.Image.FromStream(stream);
       newImage.Save(strFileName);
       img.Attributes.Add("src", strFileName);
     }
   lblMessage.Text = "The image conversion was successful.";
  }
  else
  {
    Response.Write("No image data found!");
  }
     return "Filder path where image need to store " + "yourfilename.gif";
 } 
```

# iphone - 如何知道设备类型

> ID：14108731
> 
> 赞同：1
> 
> 时间：2013-01-01T07:32:01.930
> 
> 标签：iphone, objective-c, ios

我试图找出一种简单的方法来了解我的`Device`类型。

我已经知道了

```
 [[UIDevice currentDevice] systemVersion] 
```

这给了我一般类型。

但我真正需要的是现在它是 4、4S、5 还是任何其他类型的`iPhone`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T07:45:28.947

您可以使用此方法获取您的平台和设备类型

```
- (NSString *) platformString{
    // Gets a string with the device model
    size_t size;  
    sysctlbyname("hw.machine", NULL, &size, NULL, 0);  
    char *machine = malloc(size);  
    sysctlbyname("hw.machine", machine, &size, NULL, 0);  
    NSString *platform = [NSString stringWithCString:machine encoding:NSUTF8StringEncoding];  
    free(machine); 
    if ([platform isEqualToString:@"iPhone1,1"])    return @"iPhone 2G";
    if ([platform isEqualToString:@"iPhone1,2"])    return @"iPhone 3G";
    if ([platform isEqualToString:@"iPhone2,1"])    return @"iPhone 3GS";
    if ([platform isEqualToString:@"iPhone3,1"])    return @"iPhone 4";
    if ([platform isEqualToString:@"iPhone3,2"])    return @"iPhone 4";
    if ([platform isEqualToString:@"iPhone3,3"])    return @"iPhone 4 (CDMA)";    
    if ([platform isEqualToString:@"iPhone4,1"])    return @"iPhone 4S";
    if ([platform isEqualToString:@"iPhone5,1"])    return @"iPhone 5";
    if ([platform isEqualToString:@"iPhone5,2"])    return @"iPhone 5 (GSM+CDMA)";

    if ([platform isEqualToString:@"iPod1,1"])      return @"iPod Touch (1 Gen)";
    if ([platform isEqualToString:@"iPod2,1"])      return @"iPod Touch (2 Gen)";
    if ([platform isEqualToString:@"iPod3,1"])      return @"iPod Touch (3 Gen)";
    if ([platform isEqualToString:@"iPod4,1"])      return @"iPod Touch (4 Gen)";
    if ([platform isEqualToString:@"iPod5,1"])      return @"iPod Touch (5 Gen)";

    if ([platform isEqualToString:@"iPad1,1"])      return @"iPad";
    if ([platform isEqualToString:@"iPad1,2"])      return @"iPad 3G";
    if ([platform isEqualToString:@"iPad2,1"])      return @"iPad 2 (WiFi)";
    if ([platform isEqualToString:@"iPad2,2"])      return @"iPad 2";
    if ([platform isEqualToString:@"iPad2,3"])      return @"iPad 2 (CDMA)";
    if ([platform isEqualToString:@"iPad2,4"])      return @"iPad 2";
    if ([platform isEqualToString:@"iPad2,5"])      return @"iPad Mini (WiFi)";
    if ([platform isEqualToString:@"iPad2,6"])      return @"iPad Mini";
    if ([platform isEqualToString:@"iPad2,7"])      return @"iPad Mini (GSM+CDMA)";
    if ([platform isEqualToString:@"iPad3,1"])      return @"iPad 3 (WiFi)";
    if ([platform isEqualToString:@"iPad3,2"])      return @"iPad 3 (GSM+CDMA)";
    if ([platform isEqualToString:@"iPad3,3"])      return @"iPad 3";
    if ([platform isEqualToString:@"iPad3,4"])      return @"iPad 4 (WiFi)";
    if ([platform isEqualToString:@"iPad3,5"])      return @"iPad 4";
    if ([platform isEqualToString:@"iPad3,6"])      return @"iPad 4 (GSM+CDMA)";

    if ([platform isEqualToString:@"i386"])         return @"Simulator";
    if ([platform isEqualToString:@"x86_64"])       return @"Simulator";
    return platform;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T07:36:05.610

您好使用此类从以下链接获取设备类型和设备版本..

[UIDevice硬件](https://gist.github.com/1323251)

只需阅读如何使用以及如何获取平台的说明...

在这里，您得到了类似示例的响应... Verizon iPhone 4、iPhone 4S、iPod Touch 1G、iPod Touch 2G 等。

我希望这对你有帮助......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-07T16:23:58.203

我用当前可用的设备更新了列表。我建议在 上做一个类别`UIDevice`，我们称之为`UIDevice+Platform`，并添加以下两个方法：

```
- (NSString *)rawPlatform
{
    static NSString *platform = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        size_t size;
        sysctlbyname("hw.machine", NULL, &size, NULL, 0);
        char *machine = malloc(size);
        sysctlbyname("hw.machine", machine, &size, NULL, 0);
        platform = [NSString stringWithUTF8String:machine];
        free(machine);
    });
    return platform;
}

- (NSString *)exactModel
{
    static NSString *platform = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        platform = [self rawPlatform];
        if ([platform isEqualToString:@"iPhone1,1"])
            platform = @"iPhone 1G";
        else if ([platform isEqualToString:@"iPhone1,2"])
            platform = @"iPhone 3G";
        else if ([platform isEqualToString:@"iPhone2,1"])
            platform = @"iPhone 3GS";
        else if ([platform isEqualToString:@"iPhone3,1"])
            platform = @"iPhone 4";
        else if ([platform isEqualToString:@"iPhone3,3"])
            platform = @"Verizon iPhone 4";
        else if ([platform isEqualToString:@"iPhone4,1"])
            platform = @"iPhone 4S";
        else if ([platform isEqualToString:@"iPhone5,1"])
            platform = @"iPhone 5";
        else if ([platform isEqualToString:@"iPhone5,2"])
            platform = @"iPhone 5 (GSM+CDMA)";
        else if ([platform isEqualToString:@"iPhone5,3"])
            platform = @"iPhone 5C";
        else if ([platform isEqualToString:@"iPhone5,4"])
            platform = @"iPhone 5C (GSM+CDMA)";
        else if ([platform isEqualToString:@"iPhone6,1"])
            platform = @"iPhone 5S";
        else if ([platform isEqualToString:@"iPhone6,2"])
            platform = @"iPhone 5S (GSM+CDMA)";
        else if ([platform isEqualToString:@"iPhone7,1"])
            platform = @"iPhone 6+";
        else if ([platform isEqualToString:@"iPhone7,2"])
            platform = @"iPhone 6";
        else if ([platform isEqualToString:@"iPod1,1"])
            platform = @"iPod Touch 1G";
        else if ([platform isEqualToString:@"iPod2,1"])
            platform = @"iPod Touch 2G";
        else if ([platform isEqualToString:@"iPod3,1"])
            platform = @"iPod Touch 3G";
        else if ([platform isEqualToString:@"iPod4,1"])
            platform = @"iPod Touch 4G";
        else if ([platform isEqualToString:@"iPod5,1"])
            platform = @"iPod Touch 5G";
        else if ([platform isEqualToString:@"iPad1,1"])
            platform =  @"iPad 1";
        else if ([platform isEqualToString:@"iPad2,1"])
            platform = @"iPad 2 (WiFi)";
        else if ([platform isEqualToString:@"iPad2,2"])
            platform =  @"iPad 2 (GSM)";
        else if ([platform isEqualToString:@"iPad2,3"])
            platform = @"iPad 2 (CDMA)";
        else if ([platform isEqualToString:@"iPad2,1"])
            platform = @"iPad 2 (WiFi)";
        else if ([platform isEqualToString:@"iPad2,2"])
            platform =  @"iPad 2 (GSM)";
        else if ([platform isEqualToString:@"iPad2,3"])
            platform = @"iPad 2 (CDMA)";
        else if ([platform isEqualToString:@"iPad2,4"])
            platform = @"iPad 2";
        else if ([platform isEqualToString:@"iPad2,5"])
            platform = @"iPad Mini (Wifi)";
        else if ([platform isEqualToString:@"iPad2,6"])
            platform = @"iPad Mini";
        else if ([platform isEqualToString:@"iPad2,7"])
            platform = @"iPad Mini (GSM+CDMA)";
        else if ([platform isEqualToString:@"iPad3,1"])
            platform = @"iPad 3 (WiFi)";
        else if ([platform isEqualToString:@"iPad3,2"])
            platform = @"iPad 3 (GSM+CDMA)";
        else if ([platform isEqualToString:@"iPad3,3"])
            platform = @"iPad 3 (4G,3)";
        else if ([platform isEqualToString:@"iPad3,4"])
            platform = @"iPad 4 (WiFi)";
        else if ([platform isEqualToString:@"iPad3,5"])
            platform = @"iPad 4 (4G,2)";
        else if ([platform isEqualToString:@"iPad3,6"])
            platform = @"iPad 4 (GSM+CDMA)";
        else if ([platform isEqualToString:@"iPad4,1"])
            platform = @"iPad Air (Wifi)";
        else if ([platform isEqualToString:@"iPad4,2"])
            platform = @"iPad Air (GSM+CDMA)";
        else if ([platform isEqualToString:@"iPad4,3"])
            platform = @"iPad Air";
        else if ([platform isEqualToString:@"iPad4,4"])
            platform = @"iPad Mini 2 (GSM)";
        else if ([platform isEqualToString:@"iPad4,5"])
            platform = @"iPad Mini 2 (CDMA)";
        else if ([platform isEqualToString:@"iPad4,6"])
            platform = @"iPad Mini 2 (Wifi)";
        else if ([platform isEqualToString:@"iPad4,7"])
            platform = @"iPad Mini 3 (Wifi)";
        else if ([platform isEqualToString:@"iPad4,8"])
            platform = @"iPad Mini 3 (GSM+CDMA)";
        else if ([platform isEqualToString:@"iPad4,9"])
            platform = @"iPad Mini 3";
        else if ([platform isEqualToString:@"iPad5,3"])
            platform = @"iPad Air 2 (Wifi)";
        else if ([platform isEqualToString:@"iPad5,4"])
            platform = @"iPad Air 2 (GSM+CDMA)";
        else if ([platform isEqualToString:@"i386"])
            platform = @"Simulator";
        else if ([platform isEqualToString:@"x86_64"])
            platform = @"Simulator";
    });

    return platform;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T07:35:42.673

在`UIDevice`Class a 属性中找出 iPhone 的类型：

```
@property(nonatomic,readonly,retain) NSString    *systemVersion;     // e.g. @"4.0" 
```

# c# - 在 c# 中使用 win32 API 操作简单的 windows 计算器？

> ID：14108742
> 
> 赞同：3
> 
> 时间：2013-01-01T07:33:46.127
> 
> 标签：c#, windows, api, winapi

好吧，我已经尽力查看代码示例并在网上发布了有关如何执行此操作的帖子，但是几个月来我无法使用 Windows API 与另一个已经存在的程序进行交互。跑步。我不是最伟大的程序员，其中一些东西超出了我的范围。

我能做的最多就是找到 Calculator 进程及其句柄，并将其与 SetWindowText 一起使用来更改标题。我真正想学习的方法是让我的程序使用windows user32（我认为这一定是正确的库）通过实际按下软件计算器上的数字键按钮进行简单计算来输入一些数字。

我真的没有用这个程序，这只是我试图达到的目标，以学习如何在 C# 中特别是在我的初级水平之后使用 Windows API。如果没有人有这方面的代码，或者即使你有，我会非常感谢一些关于我应该阅读以了解如何做到这一点的网络书籍或资源的建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T14:20:26.880

既然你说你正在使用 C#，你应该使用`System.Windows.Automation`命名空间，它的全部目的是允许你通过自动化控制其他程序。

您没有详细说明您想要什么，但这是一个在计算器中按下“7”的程序。

```
using System.Windows.Automation;

class Program
{
 public static void Main()
 {
  var calcWindow = AutomationElement.RootElement.FindFirst(
   TreeScope.Children,
   new PropertyCondition(AutomationElement.NameProperty, "Calculator"));
  if (calcWindow == null) return;

  var sevenButton = calcWindow.FindFirst(TreeScope.Descendants,
   new PropertyCondition(AutomationElement.NameProperty, "7"));

  var invokePattern = sevenButton.GetCurrentPattern(InvokePattern.Pattern)
                     as InvokePattern;
  invokePattern.Invoke();
 }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T07:48:42.537

您正在进入平台调用 (P/Invoke) 的有趣世界。您在这个世界上最好的朋友是[www.pinvoke.net](http://www.pinvoke.net) ，它包含大量 winapi 函数的c# *（和 vb.net）签名。*

例如`SendMessage`：

```
[DllImport("user32.dll", CharSet = CharSet.Auto)]
static extern IntPtr SendMessage(IntPtr hWnd, UInt32 Msg, IntPtr wParam, IntPtr lParam); 
```

和这个[消息代码列表](http://www.pinvoke.net/default.aspx/Constants.WM)。

您会注意到所有 p/invoke 方法都使用命名空间`DllImport`中的属性`System.Runtime.InteropServices`。

它们`extern`在方法签名中也有一个修饰符。这意味着代码是在当前程序集之外找到的。

然后您可以使用`SendMessage`发送消息到计算器的句柄。

正如乔纳森在他的评论中提到的那样，您应该使用[**Spy++**](http://msdn.microsoft.com/en-us/library/aa264396%28v=vs.60%29.aspx)来检测正在发送的哪些消息会导致您想要复制的操作。

为了更好地衡量，[这里](http://www.codeproject.com/Articles/12121/Essential-P-Invoke)有一篇文章，其中包含有关 P/Invoke 的更多介绍性信息。

# php - 虚拟子域上的 RewriteRule

> ID：14108743
> 
> 赞同：0
> 
> 时间：2013-01-01T07:33:51.697
> 
> 标签：php, .htaccess

我想创建虚拟子域，但我不知道。你能帮我在 htaccess 文件中创建虚拟子域吗

输入 url => demo.flexxm.mobi

加载 url => [http://flexxm.mobi/index.php?controller=subdomain&task=subdomain&subdomain=demo](http://flexxm.mobi/index.php?controller=subdomain&task=subdomain&subdomain=demo)

我想输入网址“demo.flexxm.mobi”，但在此网址“http://flexxm.mobi/index.php?controller=subdomain&task=subdomain&subdomain=demo”上执行任务。

我真的需要你的帮助

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:46:49.163

首先，您应该添加 demo.flexxm.mobi 作为 flexxm.mobi 的域和服务器的别名。这在 .htaccess 中是不可能的。您应该更改 httpd.conf 中的设置或使用您的主机控制面板或联系您的主机支持。

结果，两个域都应该打开相同的页面。

然后你可以为你的重写配置 .htaccess。

例如

```
 RewriteCond %{HTTP_HOST} ^demo.flexxm.mobi$ [NC]
 RewriteRule .* /index.php?controller=subdomain&task=subdomain&subdomain=demo [L] 
```

在那里，我们添加了规则仅在我们从 demo.flexxm.mobi 获得任何页面时才起作用的条件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T09:49:02.017

你可以试试这个

重写引擎开启

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?controller=subdomain&task=subdomain&subdomain=demo/$1 [L]

索引忽略 *

# clojure - 优化从excel文件读取到clojure中的记录

> ID：14108746
> 
> 赞同：0
> 
> 时间：2013-01-01T07:34:12.897
> 
> 标签：clojure

从excel文件中读取特定数量的行并在记录中更新它们的最佳方法是什么，每行都是记录的新实例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:32:06.263

我可能会使用 Martin Jul 的[docjure](https://github.com/ative/docjure)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T08:04:07.630

简单的方法是将excel文件保存为csv文件，然后应用常用[工具](https://github.com/clojure/data.csv)

```
(defrecord Record [W1 W2 W3])

(defn read-csv [fname count]
  (with-open [file (reader fname)]
    (doall (take count (map (comp first csv/read-csv)
                            (line-seq file))))))

(map #(apply ->Record %) (read-csv "1.csv" 3))
->(#Record{:W1 "1", :W2 "one", :W3 "A"}
   #Record{:W1 "2", :W2 "two", :W3 "B"}
   #Record{:W1 "3", :W2 "three", :W3 "C"}) 
```

# backbone.js - 如何使用 EventAggregator 将参数传递给另一个视图中存在的函数 - 主干

> ID：14108756
> 
> 赞同：0
> 
> 时间：2013-01-01T07:36:10.010
> 
> 标签：backbone.js

我在一个视图中从另一个视图中看到了 post [access 功能](https://stackoverflow.com/questions/7708195/access-function-in-one-view-from-another-in-backbone-js)。如果我想将参数传递给 loadTaskPopup(param) 我该怎么做？

```
Backbone.View.prototype.event_aggregator = _.extend({}, Backbone.Events);

 window.PopupView = Backbone.View.extend({
   initialize: function() {
      _.bindAll(this, "loadTaskPopup");
      this.model = new PopupModel();
      this.event_aggregator.bind("tasks_popup:show", this.loadTaskPopup);
 },

 loadTaskPopup: function(param) {
    //do something with the parameter
 }
});

window.TaskbarView = Backbone.View.extend({
 loadTaskbarPopup: function() {
  this.event_aggregator.trigger("tasks_popup:show")     //How to pass parameter ?
 }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T07:43:23.760

您可以将其作为第二个参数传递给触发器：

```
this.event_aggregator.trigger("tasks_popup:show", {
  param1 : "value1",
  param2 : "value2"
}); 
```

在这种情况下，它是一个对象。你会收到这个`loadTaskPopup`。

```
loadTaskPopup : function(params) {
  // params.param1 and params.param2 will have value1 and value2 respectively here.
} 
```

# javascript - 在所有请求中添加参数javascript

> ID：14108759
> 
> 赞同：0
> 
> 时间：2013-01-01T07:36:54.660
> 
> 标签：javascript, web-applications, struts-1

我们有一个在 Struts 1.x 中开发的应用程序。我们没有使用 Ajax 从服务器 POST/GET 数据。

早些时候，这个 UI 只为一个客户提供数据，现在我们正在更新我们的服务器以根据“客户 ID”为所有客户提供数据。“客户 ID”必须在所有请求中传递给服务器，我们需要通过最小的更改来实现这一点。

有没有什么聪明的方法可以在对服务器的所有请求中添加“客户 ID”？我们不希望在会话或 cookie 中有这个参数。此客户 ID 将作为请求的输出，所有后续请求都应具有此客户 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T07:49:43.480

您可以在数据库中创建一个 4 列的表并记录客户 id、ip、日期和 exp。日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T07:59:46.670

您可以通过自定义 ajax 方法（$.ajax 方法）来完成

```
(function ($) {

var _ajax = $.ajax,

A = $.ajax = function(options) {

if (A.data) {

//TODO: the appending in here, i just don't feel like

writing all of this

}

return _ajax(options);

};

};

});
// and all your ajax calls will get that data

$.get({...})

$.post({...}) 
```

# android - 如何以编程方式在自动 Android 应用内计费测试中单击“购买”按钮

> ID：14108763
> 
> 赞同：2
> 
> 时间：2013-01-01T07:38:11.917
> 
> 标签：android, in-app-purchase, automated-tests, in-app-billing

我正在编写自动化测试代码（使用*ActivityInstrumentationTestCase2*）来测试涉及应用内计费版本 2（订阅）的应用。我需要帮助来弄清楚如何以编程方式让我的测试代码单击“**使用信用卡付款/由 Google 钱包保护**”对话框中出现的“接受并购买”按钮，该对话框据说是由某些 Google SDK 代码创建的。

我可以让测试代码单击由我自己的代码/活动创建的其他按钮，通常是通过从其父活动或视图访问按钮，然后调用`.performClick()`按钮上的方法。但据我所知，任何活动都无法访问此“购买”按钮。

看来此对话框可能是``com.google.android.finsky.activities.IabActivity`` 基于 logcat 输出创建的。我使用 ActivityMonitor 观看此活动，但它从未被触发。如果您可以直接提供帮助，或者将我指向负责创建“使用信用卡付款”对话框或`com.google.android.finsky.activities.IabActivity`课程来源的相关 Google SDK 源代码，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T09:32:20.950

通常你不能在你自己的包之外检测活动。

您必须使用 UI Automator 框架来单击购买按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T00:39:24.680

感谢克里斯托弗。我设法使用 UI 自动化来获得我想要的效果。我必须先编写一个 shell 脚本来调用我的 Instrumentation Test，这会打开 Buy 对话框。然后调用
*adb shell uiautomator runtest*启动 UI 自动化代码点击“购买”按钮。不知道如何在它们之间同步，所以我只是使用一些睡眠代码来计时点击。这是 UI 自动化代码：

```
 UiDevice dev = getUiDevice();
    // wait for buy button to appear 
    while (true) {
        try {
            Thread.sleep(2000l);
            UiObject okButton = new UiObject(new UiSelector().text("Accept & buy").className("android.widget.Button"));
            okButton.click();
            break;
        } catch (Exception e) {
        }
    }   
    dev.waitForIdle(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-25T21:58:04.880

使用**uiautomator**，这是我得到的最好的：

```
device.findObject(new UiSelector().resourceId("com.android.vending:id/continue_button")).click(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T07:54:57.890

以下是在 android 中为 Button click 制作 Testcase 的建议。

您需要为您的 Activity 制作 ActivityInstrumentationTestCase2 然后执行以下操作。

初始化你的按钮

```
protected void setUp() throws Exception {
        super.setUp();
        mainActivity = getActivity();

        btnAcceptBuy= (Button) mainActivity.findViewById(R.id.btnaccept_buy);
    }

public void testFragmentKeypad(){

      AppLog.showLogE("TEST", "Keypad");

      TouchUtils.clickView(this, btnAcceptBuy);

  } 
```

通过这种方式，您可以在 android 中执行您的按钮的点击测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-13T09:28:14.577

```
 UiAutomation uiAutomation = new UiAutomation(Looper.getMainLooper(), new UiAutomationConnection());
    uiAutomation.setOnAccessibilityEventListener(new UiAutomation.OnAccessibilityEventListener() {
        @Override
        public void onAccessibilityEvent(AccessibilityEvent event) {
            if (event.getEventType() == TYPE_WINDOW_STATE_CHANGED) {
                if ("com.google.android.finsky".contentEquals(event.getPackageName())) {
                    if ("com.google.android.finsky.activities.IabActivity".contentEquals(event.getClassName())) {
                        final List<AccessibilityNodeInfo> accessibilityNodeInfosByViewId = event.getSource().findAccessibilityNodeInfosByViewId("<package name>:id/<control id>"); // find by layout inspector
                        if (accessibilityNodeInfosByViewId.size() > 0) {
                            accessibilityNodeInfosByViewId.get(0).performAction(AccessibilityNodeInfo.ACTION_CLICK);
                        }
                    }
                }
            }
        }
    });
    uiAutomation.connect();
    //release when exit
    uiAutomation.disconnect(); 
```

# objective-c - 代码不起作用，但等效代码起作用

> ID：14108766
> 
> 赞同：2
> 
> 时间：2013-01-01T07:38:35.470
> 
> 标签：objective-c

```
#define CLog( s, ... ) NSLog( @"%@", [NSString stringWithFormat:(s), ##__VA_ARGS__] )
#define PO(x) CLog(@#x ": %@", x) 
```

然后我做：

```
 NSString * hello =[NSString stringWithFormat:@"%@, %@",theCatalogData.id,@(theCatalogData.images.count)];
    PO(hello); 
```

作品

当然，这个的简化版本很简单：

```
PO([NSString stringWithFormat:@"%@, %@",theCatalogData.id,@(theCatalogData.images.count)]); 
```

那是行不通的。我想知道为什么。

没有紧急情况。没问题。无论如何，更长的等价物仍然有效。我只是想了解编译器如何解析宏以了解为什么事情不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T07:48:54.290

由于预处理器本身并不真正理解语法，因此包含逗号的宏参数会导致问题。

在第二种情况下，由于参数在引号之外包含两个逗号，编译器认为宏正在获取 3 个参数而不是一个，并且由于宏只接受一个参数，编译器会报错。

类似于您的第二种情况的简化测试用例；

```
#define TEST(a,b,c) a
TEST([d e:@"%@, %@", f, g]) 
```

将扩展到；

```
[d e:@"%@, %@" 
```

这表明该`a`参数仅包含直到第一个未引用的逗号的所有字符。

在您的情况下，您将 TEST 宏定义为采用*一个*参数，并且由于预处理器将其视为 3，因此编译将失败。

# android - 使用 ant build 时得到错误的 R.drawable 参考 ID

> ID：14108768
> 
> 赞同：0
> 
> 时间：2013-01-01T07:38:47.363
> 
> 标签：android, ant

使用 ant build 后，当我尝试分配有问题的（不在 xml 中）时，我得到了一些可绘制的 id。

我有一个包含一些可绘制 id 的数组：

```
int[]ids={R.drawable.pic1,R.drawable.pic2,R.drawable.pic3,R.drawable.pic4}; 
```

当我尝试将它们分配给图像视图时，会显示不同的可绘制对象。

```
@Override
protected void onCreate(Bundle arg0) {
    super.onCreate(arg0);
    setContentView(R.layout.somelayout);
    iv = (ImageView)findViewById(R.id.image);
    iv.setBackgroundResource(ids[0]);
} 
```

当我在 xml 中设置可绘制对象时，它不会发生，这有效：

```
<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/pic1" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T08:06:30.423

尝试关闭 Eclipse 并从命令行运行`ant clean`，然后运行。`ant`如果这样可行，最可能的问题是您的 ant 脚本正在构建到与 Eclipse 相同的目录中，并且如果 Eclipse 在执行 ant 构建时正在运行，它可能会检测到更改的文件并同时运行自己的构建。这可能会导致基于构建时间的一些不一致的结果。

通常，请确保您的 ant 脚本构建到与 Eclipse 使用的目录不同的目录。这包括“gen”目录 - 为 ant 使用单独的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T08:06:33.977

### 尝试通过资源绘制：

```
 int[]ids={ getResources().getDrawable(R.drawable.pic1), getResources().getDrawable(R.drawable.pic2)}; 
```

如果在 getResources() 中出现错误，请尝试使用

```
 int[]ids={ YourActivityName.this.getResources().getDrawable(R.drawable.pic1), YourActivityName.this.getResources().getDrawable(R.drawable.pic2)}; 
```

### 也试试这些方法::

### 删除 int [] id 并尝试直接获取它::

```
 iv = (ImageView)findViewById(R.id.image);
  iv.setImageResource(R.drawable.pic1); 
```

# common-lisp - ftype 声明对 SBCL 中的内置函数有什么影响？

> ID：14108770
> 
> 赞同：4
> 
> 时间：2013-01-01T07:39:16.680
> 
> 标签：common-lisp, sbcl, declare

我正在构建一些其他人编写的旧 Common Lisp 代码，其中包括一些函数开头的如下行：

```
(declare (ftype (function (&rest float) float) + - * min max)) 
```

我的理解是这样做的目的是告诉编译器表格末尾列出的五个函数只会传递浮点数。编译器可以使用此信息来创建更高效​​的代码。

一些 Lisps 不会抱怨这个声明（ABCL、CCL、ECL、LispWorks、CLISP），但是 SBCL 在默认配置中不会接受这个声明。SBCL 可以通过放置来接受它

```
(unlock-package 'common-lisp) 
```

在 .sbclrc 初始化文件中。这就是我过去一年左右一直在做的事情。我认为这是必需的，因为 +、- 等位于该包中，并且代码会更改这些函数的声明。

我的问题是：声明 + 和 min 等内置函数的函数类型可以对 SBCL 中的编译代码产生有益的影响吗？（如果可以，那么为什么 SBCL 默认会抱怨这些声明？）我最好删除此类 ftype 声明，然后删除`unlock-package`.sbclrc 中的行吗？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T10:48:21.687

> 我的理解是这样做的目的是告诉编译器表格末尾列出的五个函数只会传递浮点数。编译器可以使用此信息来创建更高效​​的代码。

此外，它们只会返回浮点数。在某些优化设置下，Common Lisp 编译器不会生成运行时检查，并且可能只生成用于浮点计算的代码。此外，SBCL 可能会在某些情况下显示编译时警告，其中它检测到代码违反了类型声明。

它也是错误的来源，因为从现在开始（在声明的范围内）基本函数，如`+`和`-`被声明为不适用于其他数字类型（整数、复数，...）。

那么，这些声明的目的是什么？由于它是可移植代码（并且大多数实现不实现编译时类型检查），它只能用于优化目的。其中一些在 SBCL 中可能不是必需的，因为它使用类型推断。

为什么 SBCL 默认不允许更改内置功能？这是为了防止你的脚开枪：你正在改变基本语言。现在基本的数值运算可能会导致错误。

处理方法：

*   仅使用本地声明，不要全局更改语言。您指出这些仅在本地声明-很好。

*   而是声明变量的值

*   为浮点情况编写特殊函数并将它们声明为内联。

*   仅在编译这几个函数时解锁包 CL。以后保持锁定。

> 我的问题是：声明 + 和 min 等内置函数的函数类型可以对 SBCL 中的编译代码产生有益的影响吗？

您可以通过查看反汇编代码和分析来检查。确保使用正确的优化设置编译函数。在 Common Lisp 中，该函数`DISASSEMBLE`应该以可读的方式向您显示机器代码。SBCL 编译器还应该告诉您它是否无法优化已编译的代码。

# paypal - paypal ipn payment_status 已处理与已完成

> ID：14108776
> 
> 赞同：10
> 
> 时间：2013-01-01T07:40:18.487
> 
> 标签：paypal, paypal-ipn

我是贝宝集成的新手，现在正在做 ipn 集成。

我对根据他们的网站处理的 payment_status 和完成的值有点困惑。

> 已完成：付款已完成，资金已成功添加到您的账户余额中。
> 
> 已处理：已接受付款。

真的不明白吗？

这是我的问题

1.  如果它发送一个已处理付款状态的 ipn，它是否会发送另一个已完成付款状态的 ipn？
2.  它何时发送已处理的 ipn，何时发送已完成的 ipn？
3.  您应该考虑为哪种状态付费的项目？完成或处理？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T05:43:23.423

我很确定您唯一会看到已处理的情况是，如果您将付款发送到尚不存在的帐户，或者您发送到他们的设置配置为让他们接受他们收到的任何付款的帐户.

在这种情况下，当付款发生时，它的“status_n”将是“unclaimed”，并且 payment_status 将被处理。请注意，如果您有超过 1 个，则 n 将是付款次数。例如，使用 MassPay。事实上，这是我在 IPN 日志中找到的示例……

```
txn_type = masspay
payment_gross_1 = 1500.00
payment_date = 09:52:38 Dec 23, 2012 PST
last_name = Angell
mc_fee_1 = 1.00
masspay_txn_id_1 = 9N3213015V198645H
receiver_email_1 = info@acexlogics.com
residence_country = US
verify_sign = AueDyRcHXo48zG3juE2C-Z801Wi9AhrDKrUI2Dxtkt8T9UVV4DHECvEC
payer_status = verified
test_ipn = 1
payer_email = sandbo_1215254764_biz@angelleye.com
first_name = Drew
payment_fee_1 = 1.00
payer_id = ATSCG2QMC9KAU
payer_business_name = Drew Angell's Test Store
payment_status = Processed
status_1 = Unclaimed
mc_gross_1 = 1500.00
charset = windows-1252
notify_version = 3.7
mc_currency_1 = USD
unique_id_1 = 3
ipn_track_id = a8817fe5573f3 
```

这个特定的 IPN 来自仅包含一个接收者的 MassPay 请求。它以“已处理”和“无人认领”的形式返回，因为 receiver_email 还没有现有的 PayPal 帐户。

这是一个针对 MassPay 请求的单独 IPN，其中包括 3 个接收者并且都具有帐户，因此它们都以完成的形式返回。

```
[payer_id] => ATSCG2QMC9KAU
[payment_date] => 21:37:28 Jan 01, 2013 PST
[payment_gross_1] => 10.00
[payment_gross_2] => 10.00
[payment_gross_3] => 10.00
[payment_status] => Processed
[receiver_email_1] => andrew_1342623385_per@angelleye.com
[receiver_email_2] => usb_1329725429_biz@angelleye.com
[charset] => windows-1252
[receiver_email_3] => andrew_1277258815_per@angelleye.com
[mc_currency_1] => USD
[masspay_txn_id_1] => 53E82259BP7975932
[mc_currency_2] => USD
[masspay_txn_id_2] => 4AS03088H50506411
[mc_currency_3] => USD
[masspay_txn_id_3] => 6A492363UM676994C
[first_name] => Drew
[unique_id_1] => 
[notify_version] => 3.7
[unique_id_2] => 
[unique_id_3] => 
[payer_status] => verified
[verify_sign] => A2Kn5CkYqzBOhX.t-MhTsUEnQbXNAs-mp6LyPmPY1bKAQnyPlKUqiOZN
[payer_email] => sandbo_1215254764_biz@angelleye.com
[payer_business_name] => Drew Angell's Test Store
[last_name] => Angell
[status_1] => Completed
[status_2] => Completed
[status_3] => Completed
[txn_type] => masspay
[mc_gross_1] => 10.00
[mc_gross_2] => 10.00
[mc_gross_3] => 10.00
[payment_fee_1] => 0.20
[residence_country] => US
[test_ipn] => 1
[payment_fee_2] => 0.20
[payment_fee_3] => 0.20
[mc_fee_1] => 0.20
[mc_fee_2] => 0.20
[mc_fee_3] => 0.20
[ipn_track_id] => e1938454f1e98 
```

我没有时间设置帐户不存在然后被创建和接受的场景，但我相当确定您确实会获得另一个 IPN，显示它已完成。

长话短说，在处理付款后处理时，我会确保寻找“已完成”而不是“已处理”。

# javascript - 打字稿变量“未出现在当前范围内”

> ID：14108777
> 
> 赞同：0
> 
> 时间：2013-01-01T07:40:36.437
> 
> 标签：javascript, typescript

我正在尝试使用以下代码：

```
$('body').bind('ajaxSend', function (elm, xhr, s) {
    if (s.hasContent && securityToken) {   // handle all verbs with content
        var tokenParam = "__RequestVerificationToken=" + encodeURIComponent(securityToken);
        s.data = s.data ? [s.data, tokenParam].join("&") : tokenParam;
        // ensure Content-Type header is present!
        if (s.contentType !== false || options.contentType) {
            xhr.setRequestHeader( "Content-Type", s.contentType);
        }
    }
}); 
```

我在帖子[堆栈溢出帖子中找到了这个](https://stackoverflow.com/questions/4074199/jquery-ajax-calls-and-the-html-antiforgerytoken)

使用打字稿，我在“选项”上得到一个语法错误，说“名称选项没有出现在当前范围内。

有人可以帮助并解释为什么我会收到此错误。我看到 options 没有声明，想知道如果没有声明它来自哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:19:57.520

就像 JavaScript 一样，在运行时，任何封闭的函数范围，然后在全局范围中搜索一个`options`变量，如果在任何地方都找不到它，就会抛出异常，因为它没有定义。

因此，大概在您从中提取的示例代码中，您应该假设它`options`是在其他地方定义的，并且您需要做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:49:39.950

我相信这个小错误是这条线：

```
 if (s.contentType !== false || options.contentType) { 
```

实际上应该是：

```
 if (s.contentType !== false || s.contentType) { 
```

因为您的参数`s`是`ajaxOptions`jQuery 传递给您的函数的。

# javascript - 自动调整具有固定宽度的 div 的字体大小

> ID：14108779
> 
> 赞同：2
> 
> 时间：2013-01-01T07:40:54.210
> 
> 标签：javascript, jquery, html, font-size

我有一个具有以下属性的 div

```
 background: none repeat scroll 0 0 #999999;
border: 1px solid #639BBE;
height: 62px;
margin-top: 13px;
width: 135px; 
```

这个 div 的宽度和高度是固定的，我无法更改它们，现在如果我在该 div 中输入一些大文本，它会超出 div ，我想要一些我可以处理的东西，这意味着如果这个 div 的文本增加它自动减小字体大小以调整文本。如果我需要添加一些 javascript 没有问题，没有任何限制。

在我输入大文本的那一刻，它是这样显示的！

![在此处输入图像描述](../Images/725042ddf9859d0a5d063bc72a08e872.png)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T07:54:43.423

```
$.fn.HasScrollBar = function() {
//note: clientHeight= height of holder
//scrollHeight= we have content till this height
var _elm = $(this)[0];
var _hasScrollBar = false; 
if ((_elm.clientHeight < _elm.scrollHeight) || (_elm.clientWidth < _elm.scrollWidth)) {
    _hasScrollBar = true;
}
return _hasScrollBar;
} 
```

使用此功能找出溢出并使用 jquery 更改字体大小

# c# - 如何创建在特定时间触发的事件

> ID：14108780
> 
> 赞同：0
> 
> 时间：2013-01-01T07:41:00.650
> 
> 标签：c#, events, windows-services

> **可能重复：**
> [我如何安排 C# Windows 服务每天执行任务？](https://stackoverflow.com/questions/503564/how-might-i-schedule-a-c-sharp-windows-service-to-perform-a-task-daily)

我有一些代码可以从我的数据中备份。我创建了一个 Windows 服务并将其添加到我的 Windows 服务中。现在我想在例如下午 12 点调用此服务。结果，我想创建一个在下午 12 点触发的“事件”。如何创建此活动？谢谢。

# ruby-on-rails - 执行命令 rake:db:schema:dump

> ID：14108788
> 
> 赞同：2
> 
> 时间：2013-01-01T07:42:32.587
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake, mysqldump

我是 Rails 新手，我正在尝试执行 rake db:schema:dump，但我遇到了这个问题。

```
rake db:schema:dump --trace
** Invoke db:schema:dump (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Execute db:load_config
** Execute db:schema:dump
rake aborted!
Can't connect to local MySQL server through socket '/tmp/mysql.sock' (111)
/var/lib/gems/1.9.1/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `connect'
/var/lib/gems/1.9.1/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `initialize'
/var/lib/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `new'
/var/lib/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `mysql2_connection
'
/var/lib/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:315:in `new_co
nnection'
/var/lib/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:325:in `checko
ut_new_connection'
/var/lib/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:247:in `block 
(2 levels) in checkout'
/var/lib/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `loop'
/var/lib/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `block 
in checkout'
/usr/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/var/lib/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:239:in `checko
ut'
/var/lib/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:102:in `block 
in connection'
/usr/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/var/lib/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:101:in `connec
tion'
/var/lib/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrie
ve_connection'
/var/lib/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_specification.rb:171:i
n `retrieve_connection'
/var/lib/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_specification.rb:145:i
n `connection'
/var/lib/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/railties/databases.rake:379:in `block (4 levels) in <top (requ
ired)>'
/var/lib/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/railties/databases.rake:378:in `open'
/var/lib/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/railties/databases.rake:378:in `block (3 levels) in <top (requ
ired)>'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/usr/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/var/lib/gems/1.9.1/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/usr/local/bin/rake:23:in `load'
/usr/local/bin/rake:23:in `<main>'
Tasks: TOP => db:schema:dump 
```

我已经创建了数据库，当我尝试连接时遇到了这个问题。

我的 database.yml 是：

```
# SQLite version 3.x
#   gem install sqlite3
#
#   Ensure the SQLite 3 gem is defined in your Gemfile
#   gem 'sqlite3'
# development:
  # adapter: sqlite3
  # database: db/development.sqlite3
  # pool: 5
  # timeout: 5000

development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: simple_cms_develoment  
  pool: 5
  username: simple_cms
  password: secretpassword
  socket: /tmp/mysql.sock

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000

production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000 
```

我的gemfile是：

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'

gem 'activerecord-mysql-adapter'

gem 'bootstrap-sass'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T11:26:58.257

假设您使用的是 ubuntu，您将错误的套接字文件路径
更改为 **套接字：/var/run/mysqld/mysqld.sock**

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: simple_cms_develoment  
  pool: 5
  username: simple_cms
  password: secretpassword
  socket: /var/run/mysqld/mysqld.sock 
```

# c++ - 在这个 shared_ptr 示例中有些不清楚

> ID：14108794
> 
> 赞同：1
> 
> 时间：2013-01-01T07:43:38.997
> 
> 标签：c++, boost

```
#include <iostream>
#include <boost/shared_ptr.hpp>

class implementation
{
public:
    ~implementation() { std::cout <<"destroying implementation\n"; }
    void do_something() { std::cout << "did something\n"; }
};

void test()
{
    boost::shared_ptr<implementation> sp1(new implementation());
    std::cout<<"The Sample now has "<<sp1.use_count()<<" references\n";

    boost::shared_ptr<implementation> sp2 = sp1;
    std::cout<<"The Sample now has "<<sp2.use_count()<<" references\n";

    sp1.reset();
    std::cout<<"After Reset sp1\. The Sample now has "<<sp2.use_count()<<" references\n";

    sp2.reset();
    std::cout<<"After Reset sp2.\n";
}

int main()
{
    test();
} 
```

运行结果如下：

```
$ ./a.out 
The Sample now has 1 references
The Sample now has 2 references
After Reset sp1\. The Sample now has 1 references
destroying implementation
After Reset sp2. 
```

请检查上面的代码。我首先不清楚的是，下面的句子是什么意思？那么 sp1 是一个指针吗？一个函数？还是指向函数的指针？是什么`new implementation()`意思？sp1() 的论点？

```
boost::shared_ptr<implementation> sp1(new implementation()); 
```

第二个问题是和`destroying implementation`的结果。但是如果被注释掉，那么结果将是：`sp1.reset()``sp2.reset()``sp1.reset()`

```
$ ./a.out 
The Sample now has 1 references
The Sample now has 2 references
After Reset sp1\. The Sample now has 2 references
After Reset sp2.
destroying implementation 
```

如果我们只注释掉`sp2.reset()`，那么结果将是：

```
$ ./a.out 
The Sample now has 1 references
The Sample now has 2 references
After Reset sp1\. The Sample now has 1 references
After Reset sp2.
destroying implementation 
```

所以没有必要同时调用`sp1.reset()`并`sp2.reset()`释放shared_ptr，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T07:50:54.267

> 我首先不清楚的是，下面的句子是什么意思？那么 sp1 是一个指针吗？一个函数？还是指向函数的指针？

`sp`是一个`shared_ptr<implementation>`。如果您不知道这意味着什么，可以查看参考文档和教程。但简短的版本是：它是一个行为类似于`implementation *`指针的对象，除了它会在`implementation`您完成对象时自动删除它。这就是使它成为“智能指针”的原因。A`shared_ptr`是一种特定类型的智能指针，可让您制作任意数量的副本，并且仅在所有这些副本消失时才删除底层对象。

一种看待这种方式的方式是，它为您提供了一种不需要垃圾收集器的简单形式的垃圾收集。

另一种看待它的方式是作为[资源获取即初始化](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)(RAII) 的一部分，它是 C++ 的核心习惯用法之一。

> 和 new implementation() 意味着什么？sp1() 的论点？

`new implementation()`创建一个新`implementation`对象，调用其默认构造函数，并返回一个`implementation *`指针。该指针是`shared_ptr`构造函数的参数。这意味着它`sp1`变成了一个指向那个新`implementation`对象的智能指针，所以这个对象将在 时被销毁和删除`sp1`，以及后来由它制作的任何副本都消失了。

> 第二个问题是 sp1.reset() 和 sp2.reset() 的结果是破坏实现。

实际上，它是两者的结果，`sp1`被`sp2`指向新值*或被*破坏。`reset`前者是这样做的，但后者只是什么都不做，让它们超出范围。这是 RAII 的主要部分。

> 所以没有必要同时调用 sp1.reset() 和 sp2.reset() 来释放 shared_ptr，对吗？

确切地。您很少想显式调用`reset`. RAII 的全部意义在于您不必手动管理这些事情。您初始化一个对象（如 a `shared_ptr`）以获取对资源的访问权限，然后让该对象离开以释放访问权限。

在少数情况下它很有用。例如，如果您将 a`shared_ptr`作为对象的成员，并且该对象的持续时间将比其拥有的资源长得多，您可以通过调用提前释放它`reset`。（如果您在此期间将副本传递给其他人，您不必担心它会被提前删除——这只是意味着您不再参与保持它的存活。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T07:55:46.903

正如评论中所指出的，有一些基础知识需要从 SO 格式中学习。

但是，最后一个问题值得回答：

> 所以没有必要同时调用 sp1.reset() 和 sp2.reset() 来释放 shared_ptr，对吗？

如果您仅重置一个指针，您看到实现被破坏的原因是由于范围结束，即返回`test()`- 导致您`shared_ptr`的 s 超出范围并被破坏，从而导致托管对象的破坏。

# delphi - 在 RAD Studio XE2 FireMonkey HD 应用程序中未触发 OnCreate 事件？

> ID：14108799
> 
> 赞同：0
> 
> 时间：2013-01-01T07:44:39.847
> 
> 标签：delphi, delphi-xe2, firemonkey

我在 RAD Studio XE2 中创建了一个 Fire Monkey HD 应用程序并创建了 TForm1 的 OnCreate 事件，但是当我运行我的项目时它没有被触发。我在对象检查器中找不到我的表单事件来绑定 OnCreate，就像它在 delphi 7 中一样。请帮忙..

```
procedure TForm1.FormCreate(Sender: TObject);
begin

//some code...
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T09:21:51.163

只要处理程序绑定到事件，它就会运行。

你说你还没有找到绑定事件的地方。这显然是问题所在。它仍然在对象检查器中完成。从“视图”菜单中打开它，或按 F11。单击表格的表面。选择对象检查器的第二页，称为事件。在那里，您可以将事件与处理程序相关联，就像您在 Delphi 7 中习惯的那样。

如果在选择表单设计图面时无法让对象检查器显示表单事件，那么您的 Delphi 安装存在配置问题。

# uiscrollview - 检测 MKMapView 的平移+减速

> ID：14108801
> 
> 赞同：4
> 
> 时间：2013-01-01T07:44:56.670
> 
> 标签：uiscrollview, ios6, mkmapview, mapkit, mkmapviewdelegate

我正在尝试在 MKMapView 上捕获平移和“滚动结束”。使用手势识别器可以轻松实现平移。但是，MKMapView 似乎没有在 iOS 6 中实现 UIScrollViewDelegate。这使得解决方案在[Is there way to limit MKMapView 最大缩放级别？](https://stackoverflow.com/questions/1636868/is-there-way-to-limit-mkmapview-maximum-zoom-level)不行。

想法？理想情况下，我会像这样利用 UIScrollViewDelegate ：

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    if ([super respondsToSelector:@selector(scrollViewDidEndDecelerating:)]) {
        [super scrollViewDidEndDecelerating:scrollView];
    }
    [self.myDelegate mapDidFinishPanning:self];
}

-(void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:    (BOOL)decelerate {
    if ([super respondsToSelector:@selector(scrollViewDidEndDragging:)]) {
        [super scrollViewDidEndDragging:scrollView];
    }

if(!decelerate) {
    [self.myDelegate mapDidFinishPanning:self];
} 
```

}

```
-(void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
    if ([super respondsToSelector:@selector(scrollViewWillBeginDragging:)]) {
        [super scrollViewWillBeginDragging:scrollView];
    }
    [self.myDelegate mapDidBeginPanning:self];
} 
```

在扩展 MKMapView 的类中

```
@interface MyMapView : MKMapView <UIScrollViewDelegate, UIGestureRecognizerDelegate> 
```

但这在 iOS 6 中不起作用。我在 MKMapViewDelegate 中看不到任何足够的东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-01T08:25:37.937

自己回答。我实现了 MKMapViewDelegate 的所有方法，看起来

```
- (void)mapView:(MKMapView *)mapView regionWillChangeAnimated:(BOOL)animated 
```

在 pan 上调用，并且

```
- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated 
```

一旦减速停止（而不是之前），就会被调用。

# javascript - 模式对话框 (showModalDialog()) 在 IE9 中无法正常运行

> ID：14108802
> 
> 赞同：5
> 
> 时间：2013-01-01T07:44:58.450
> 
> 标签：javascript, html, internet-explorer, internet-explorer-9, showmodaldialog

***场景：*** HTML 页面中有一个输入元素，您可以在其中输入任何数字/文本。如果输入了 2 个连续字符，那么我将调用 showModalDialog() 方法来打开一个弹出窗口，该窗口具有另一个输入元素。无论在父页面中输入的字符都将被复制到该搜索框中。

***问题：***如果用户快速输入文本（不中断）以搜索超过 2 个字符（例如**apple**），则输入的第 3 和/或第 4 个字符会被遗漏（keyUp 事件不会跟踪）。我的意思是只有**一个**单词被复制到弹出窗口中的搜索框中。所以用户需要重新输入文本。

***需要的解决方案：***每当用户输入任何文本时，都需要触发弹出窗口，并且需要将所有字符复制到弹出窗口的搜索框中

***环境：*****仅在IE9**中复制

 *****语言：*** HTML、Javascript

***注意：***我分析的是，由于**触发弹出窗口有延迟，**因此错过了 2 个字符后键入的字符。**我不知道为什么这只发生*在 IE9 中，***我也无法升级到 IE10 来解决问题。

我仍然坚持这个问题。有没有其他解决方案？还有其他方法可以使用其他元素获得模态对话框的所有功能吗？

**以下是父 HTML 的示例代码片段：**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Test Page</title>
    <script type="text/javascript">
    var checkSeq = new RegExp("[a-zA-Z]{2}", "i");
     function handleShowModalPopUp(fieldValue){
        if(checkSeq.test(fieldValue)){
            window.showModalDialog("popUpPage.html", document.getElementById('searchElem').value, "");
        }
     }

    </script>

    </head>
    <body>
        Enter Search Term :  
        <input type="text" id="searchElem" value="" onkeyup="handleShowModalPopUp(this.value)">

    </body>
    </html> 
```

**这是弹出窗口 HTML ( *popUpPage.html* )**：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
        <html>
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>Search Dialog</title>
            <script type="text/javascript">
                function handleOnload(){
                    var searchVal = window.dialogArguments;
                    if(null!= searchVal){
                        document.getElementById('searchElem').value = searchVal;
                    }           
                }
            </script>
        </head>
        <body onload="handleOnload()">
            <input type="text" id="searchElem">
            <input type="button" value="Search">    
        </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:07:16.597

您真正想要做的是延迟打开弹出窗口，直到您的用户停止输入。检测用户是否停止打字只是检测在可能发生击键的时间内是否没有发生任何事情的问题。因此，与其打开模式窗口，不如在没有击键的情况下延迟打开它。

这是我编写的一些代码，应该对您有所帮助。我已将延迟设置为 500 毫秒。

```
<html>
<head>
<script>
function DelayedPopup(delayThreshold) {
    this.delay = delayThreshold;
    this.lastSearchValue = undefined;
    this.popEvent = 0;
} 

DelayedPopup.prototype = { 
    needsDelay:  function() {
        return this.searchValue() != this.lastSearchValue;
    },

    searchValue: function() {
        return document.getElementById('searchElem').value;
    },

    openPopup: function() {
        window.showModalDialog("popUpPage.html", "");
    },

    popupOrDelay: function() {
        if (this.needsDelay()) {
            this.popup();
        }
        else {
            this.openPopup();
            this.popEvent = 0;
        } 
    },

    popup: function() {
        this.lastSearchValue = this.searchValue();          

        if (this.popEvent) {
            clearInterval(this.popEvent);
        } 

        var self = this;
        this.popEvent = setTimeout(function() { self.popupOrDelay(); }, this.delay);        
    }
};

var delayedPopup = new DelayedPopup(500);
</script>
</head>

<body>
<input type="text" id="searchElem" onkeyup="if (this.value.length > 2) delayedPopup.popup()">
</body>
</html> 
```**

# ruby-on-rails - 使用rails devise gem从同一设备进行多次登录

> ID：14108804
> 
> 赞同：1
> 
> 时间：2013-01-01T07:45:39.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, gem, activeadmin

我在我的项目中使用*活跃的管理员*和*设计*gem。但是，我使用 token_authentication 以用户身份从*active admin*登录。每当登录发生时，*活动管理员*的会话就会被破坏。如何在不破坏*活动管理*会话的情况下做到这一点？这意味着我想同时成为用户和管理员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:59:58.007

尝试 chrome 中的隐身窗口，或 Firefox 中的隐私浏览。或在 IE 中的私密浏览中。这样，在每个窗口中，您将拥有不同的 cookie 和不同的会话。

# java - 单击android中操作栏中的下拉导航时如何调用新活动

> ID：14108806
> 
> 赞同：1
> 
> 时间：2013-01-01T07:46:34.513
> 
> 标签：java, android, android-actionbar

我正在关注此[链接](http://wptrafficanalyzer.in/blog/adding-drop-down-navigation-to-action-bar-in-android/)以实现操作栏。

我已经像这样修改了这段代码

```
/** Defining Navigation listener */
        ActionBar.OnNavigationListener navigationListener = new OnNavigationListener() {

            @Override
            public boolean onNavigationItemSelected(int itemPosition, long itemId) {
                Toast.makeText(getBaseContext(), "You selected : " + actions[itemPosition]  , Toast.LENGTH_SHORT).show();
if(actions[itemPosition] == "Bookmark")
startActivity(new Intent(this,Bookmark.class))
else if(actions[itemPosition] == "Subscribe")
startActivity(new Intent(this,Subscribe.class))
else
startActivity(new Intent(this,Share.class))
                return false;
            }
        }; 
```

当我运行此代码时，它会打开书签活动。但它会调用主布局，就像它打开书签时一样，我点击返回然后它打开主活动。我希望当我单击列表以获取例如书签时，只有活动应该更改而不是列表导航的标题。或者在调用列表导航时我应该遵循任何示例来调用新活动。我也尝试过 ActionBarSherlock 它还更改了单击列表导航时的文本视图而不是调用新活动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T07:55:17.393

试试这个而不是上面

```
 if(actions[itemPosition].compareTo("Bookmark")==0){
            startActivity(new Intent(this,Bookmark.class));
    }       
    else if(actions[itemPosition].compareTo("Subscribe")==0){
        startActivity(new Intent(this,Subscribe.class));
    }
    else{
            startActivity(new Intent(this,Share.class));
                    return false;
         } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:58:00.263

您不能在当前活动上打开新活动。这不是它的工作原理。如果您想在单击项目时更改活动中的视图，您可以，并且应该查看片段来这样做。

# asp.net - ASP.NET 数据缓存与应用程序内存

> ID：14108807
> 
> 赞同：0
> 
> 时间：2013-01-01T07:46:37.993
> 
> 标签：asp.net, caching, hashmap, asp.net-caching

我的 ASP.NET 应用程序需要使用 40K 行`<key, value>`对。
对于每个客户端请求，应用程序都会搜索正确的键并返回正确的值。

我应该只使用`Dictionary<string, string>`还是使用 ASP.NET 缓存解决方案？每个解决方案有什么好处？

编辑：

*   数据的生命周期就是应用程序的生命周期。
*   它将每两周手动更新一次。
*   它在所有用户之间共享
*   没有写操作，只有读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T09:05:29.387

如果您使用的是 SQL 服务器，我建议使用 ASP.NET 依赖缓存。一旦您更改表中的值，这将自动失效。并将值存储在DataSet 中，并将键列设为DataSet 中的键。这样您也可以编写快速的 LINQ 查询。

# apache - 使用 apache mod_proxy_balancer 循环负载均衡

> ID：14108812
> 
> 赞同：-1
> 
> 时间：2013-01-01T07:47:12.003
> 
> 标签：apache, mod-proxy-balancer

是否可以使用 mod_proxy_balancer 执行以下操作：

*   主应用服务器：IP：192.168.1.1
*   辅助服务器：IP：192.168.1.2

主应用服务器使用 apache 处理来自公共 DNS 的所有请求。

然后用 mod_proxy_balancer 基本上说

```
<Proxy balancer://myapp>
 BalancerMember http://192.168.1.1/ loadfactor=1 # Balancer member 1
 BalancerMember http://192.168.1.2/ loadfactor=3 # Balancer member 2
 ProxySet lbmethod=byrequests
</Proxy> 
```

所以实际上它是说，主应用服务器可以处理这个请求，或者它可以将它传递给集群中的另一台服务器？

另外，如果我使用 https，那么我是否只需在每台服务器上设置每个 apache 以指向我的签名证书并在端口 443 上侦听，那么当 mod_proxy_balancer 传递请求时，它们自然会处理 https 吗？

我知道我可以自己设置一个测试，但是如果有人可以在这里给我快速回答，我不想搞砸设置两个 Ubuntu 虚拟机！:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T09:31:30.950

1.  是的，这是可能的，但它并没有按照你说的那样做。它将 3/4 的请求分发到第一个服务器，其余的分发到第二个服务器。请参阅文档。

2.  您应该在平衡器后面使用 AJP 或 HTTP，向后端应用程序服务器发送纯文本。系统中唯一需要的 SSL 在负载平衡 Apache 中。

# android - 使用 ActionBarSherlock 4.2 构建问题

> ID：14108817
> 
> 赞同：0
> 
> 时间：2013-01-01T07:48:40.117
> 
> 标签：android, linux, eclipse, compiler-errors, actionbarsherlock

我有一个正在使用 ABS 4.2 开发的 Android 项目 - 开发框正在运行 Mint 12 32bit，安装了 jdk 1.7.0_03，使用 Eclipse Indigo。

我最近更新了我的笔记本电脑并安装了 Mint 13 64bit、jdk 1.7.0_07 和 Eclipse Juno。

我将工作区从桌面拉出（通过 SVN），并浪费了大约两天时间尝试构建 ABS（甚至还不是我自己的项目！）但无济于事。我不断收到一堆错误（总是 85），从负载开始......

```
Cannot cast from Activity to SherlockFragmentActivity   SherlockDialogFragment.java /library/src/com/actionbarsherlock/app  line 27 Java Problem 
```

我检查了两个盒子上的 java 和 javac 设置——它们都解析为 Oracle 安装的软件。

我检查了项目属性，两台机器的目标都是 4.0.3 API 15，编译器合规级别都是 1.6 - 我真的很茫然还有什么问题，在桌面上一切正常，只是在桌面上不行笔记本电脑。

谁能建议我还能尝试解决这个问题？我真的已经没有想法了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:22:18.523

好吧，看起来 SVN 并没有将*所有东西*从一台机器传送到另一台机器，尽管我仍然必须确定什么不是（并包含它，以便我在 SVN 中拥有完整有效的代码库！）。

我尝试了 Indigo，它没有任何区别，结果完全相同，我还仔细检查了库，它们看起来都很好。所以我决定复制我能做的一切，直接从一台机器复制到另一台机器，而不是使用 SVN（虽然没有复制 sdks）。瞧……它奏效了！

我已经保留了我现在复制的所有以前的目录，因此将运行一个 diff 并查看我是否可以识别工作区或其他地方的不同之处。如果我设法找出罪魁祸首，我会告诉你的。

非常感谢您的建议，它们之间足以将我的想法重定向到稍微不同的方法，这得到了回报。

给你们两个欢乐的最新任意计时测量周期。

# c++ - 数组成多个数组c ++

> ID：14108836
> 
> 赞同：-4
> 
> 时间：2013-01-01T07:51:39.063
> 
> 标签：c++

我有一个字符串数组，它保存从文件中读取的数据。它由 76 行组成。

我想要做的是将它们存储在不同的数组中。就像从 1 个数组中的第 21 行到第 31 行一样。和第 31 到 41 个阵列。我该怎么做...请帮助

我想将 70 行拆分为 7 个数组，每个数组包含 10 行。并且**不使用向量来做**

但这没有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T07:55:28.897

您正在使用相等运算符`==`。在整个循环执行过程中`i`，将仅等于其中一个值*6 次。*仅当`i`, `11`, `22`, `33`,或`44`; 对于您的循环的任何其他值，将*无济于事*。`55``66``i`

 *你可能的意思是`<`相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T08:03:34.907

像这样的东西：

```
getline(ol, arr[i/11][i%11]); 
```

其中 arr 是`std::vector`s的一个`std::vector<std::string>`。或字符串数​​组的数组。

还有一种方法是：

```
while (1) {
  std::string *ptr;
  if (i < 11) ptr = arr1;
  else if (i < 22) ptr = arr2;
  // long list of arrays

  getline(ol, ptr[i%11]);
  // increment i, break on eof...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T08:23:53.250

```
#include <iostream>
#include <string>
#include <fstream>

using namespace std;

int main()
{
    string arr[8][10];

    int i = 0, j = 0;

    ifstream ol("a.txt");

    while(getline(ol, arr[i][j]))
    {

        ++j;
        if(j == 10)
        {
            ++i;
            j = 0;
        }
    }

} 
```

这是假设您的行数不超过 80 行。*

# sql - sysdate 的 to_date 函数问题

> ID：14108840
> 
> 赞同：2
> 
> 时间：2013-01-01T07:52:14.627
> 
> 标签：sql, oracle, oracle10g, oracle11gr2

我看到了这个[问题](https://stackoverflow.com/questions/14108022/to-date-function-with-sysdate) ，所以我对这个问题有一个疑问：我在以下查询中得到了相同日期的不同结果。

```
SELECT TO_CHAR(to_date(sysdate, 'DD-MON-yy'), 'DAY'),
  TO_CHAR(to_date(sysdate, 'DD-MON-yyyy'), 'DAY'),
  TO_CHAR(to_date(sysdate, 'DD-MON-rr'), 'DAY'),
  TO_CHAR(to_date(sysdate, 'DD-MON-rrrr'), 'DAY')
FROM dual; 
```

按列输出：

```
TUESDAY SUNDAY TUESDAY TUESDAY 
```

请帮助我，在此先感谢。

**编辑**

我写了一个简单的程序，通过日期来查找下面给出的日期：

```
SET serveroutput ON;
CREATE OR REPLACE
    PROCEDURE simple_test
      (
        date_in         IN VARCHAR2)
                        IS
      v_date DATE       := to_date(date_in,'dd-mon-yyyy');
      v_day VARCHAR2(10):=TO_CHAR(v_date,'day');
    BEGIN
       dbms_output.put_line('the day of given date is '||v_day);
    END;
    / 
```

执行 simple_test(sysdate);

```
anonymous block completed
the day of given date is sunday 
```

执行 simple_test('01-JAN-2013');

```
anonymous block completed
the day of given date is tuesday 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T09:26:09.710

我想解释为什么你会得到不同的结果。

看到这个[sqlfiddle](http://sqlfiddle.com/#!4/d41d8/5625)

正如已经说过的那样， sysdate 被视为`DATE`类型，并且您正在执行隐式转换

```
select to_date(sysdate, format) from dual; 
```

因为 to_date 的第一个参数应该是系统的 varchar 类型：

```
select to_date(to_char(sysdate), format) from dual; 
```

因为您的隐式日期格式是`'DD-MON-YY'`，所以您的查询进入：

```
SELECT TO_CHAR(to_date('01-JAN-13', 'DD-MON-yy'), 'DAY'),
  TO_CHAR(to_date('01-JAN-13', 'DD-MON-yyyy'), 'DAY'),
  TO_CHAR(to_date('01-JAN-13', 'DD-MON-rr'), 'DAY'),
  TO_CHAR(to_date('01-JAN-13', 'DD-MON-rrrr'), 'DAY')
FROM dual; 
```

第二个 to_date，因为`yyyy`是完整的千年格式，所以转到 '01-JAN-0013'，它是公元 13 年，可能是星期天 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T09:00:45.010

SYSDATE 已经是一个日期。所以如果你写：

```
TO_DATE(SYSDATE, 'DD-MON-yy') 
```

您已经在进行两次转换，一次是从日期到字符串的隐式转换，一次是从字符串到日期的显式转换。隐含的问题是您无法指定日期格式。（相反，它取自会话的当前设置。）

所以解决方案是摆脱不必要的转换，只需编写：

```
SELECT TO_CHAR(SYSDATE, 'DAY') FROM DUAL; 
```

# php - 在 Netbeans 中将 php 文件视为 css

> ID：14108845
> 
> 赞同：2
> 
> 时间：2013-01-01T07:53:43.910
> 
> 标签：php, css, ide, netbeans-7

所以我在一个 PHP 框架中工作，它将所有的 CSS 都放在 PHP 文件中。简而言之，CSS 文件称为 CSS.php，即使它们不包含任何 PHP（仅 CSS）。

我发现 CSS 自动完成不喜欢这样。无论如何告诉netbeans将这些文件中的所有代码都视为CSS而不更改扩展名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-27T10:57:55.007

您可以使用以下技巧：

```
<?php header("Content-type: text/css; charset: UTF-8");?> 
```

在开始您的 css 代码之前，还要将您需要的任何其他文件放置为：

```
<?php require 'config.php';?> 
```

然后最后添加这行代码，它会诱使 NetBeans 认为您正在 php 文件中编写内联 css，并且除了 css 文件中的注释行之外什么都没有：

```
/*
<style>
/**/ 
```

因为否则，如果您只是添加`<style>`到文件中，如果加载时会导致问题并且您必须放置它，处理文件然后将其删除，然后在需要使用突出显示和代码完成支持进行编辑时递归地放置/删除它从 NetBeans 获取相关文件。

我还强烈推荐 NetBeans 的 emmet 插件；节省时间。我希望这对那里的任何人都有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T08:11:02.213

在 netbeans CSS 代码中突出显示并在 CSS 文件或内部`<style>`标签中完成。

不确定是否可以在 CSS 文件中使用此标签。但你可以试试这个。

其他方式是使用 .css 文件并在框架中使用`<?php include("style.css"); ?>`或 CSS 导入指令。

# validation - 验证 pom.xml 是否正确 maven 2.x

> ID：14108846
> 
> 赞同：3
> 
> 时间：2013-01-01T07:54:03.810
> 
> 标签：validation, maven, pom.xml

`pom.xml`我使用 maven 2.1.0 版本，使用以下命令从`project.xml`为基于 maven 1.x 的项目构建的等价物生成

```
mvn one:convert 
```

该`pom.xml`文件已生成，我对其进行了很多编辑，因为我不需要很多东西。**后来，使用Import** --> **Existing Maven project**将此项目导入到 eclipse Helios 中，我尝试导入该项目，但这给了我以下警告并且不会让我继续，因为**Finish**按钮被禁用。

![行家](../Images/2b65b0c80581a5ea17164bd6a2826fd8.png)

那么，有什么方法可以验证 pom.xml，因为我无法从上面弄清楚，因为没有其他含义消息。可能是 xml 搞砸了，或者由于编辑错误而出现了未知标签。没有把握。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T13:25:28.810

我尝试`mvn clean`从命令行执行 , ，这表明未定义`<id>`中的标记。`<contributors>`

我已经在与标记类似的行上添加了这个标记`<developer>`，但`<id>`不是 的一部分`<contributors>`，这是导致项目未导入 Eclipse 的错误。

删除它，项目很容易导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T09:13:51.390

pom.xml 毕竟是一个 XML 文档。

它的“标题”有一些额外的模式验证标签，所以任何常规的验证编辑器都可以工作（实际上，甚至浏览器——包括 IE——也能够验证你的 pom.xml 是否存在粗略的 XML 错误）

为什么不简单地将 Eclipse 中的 pom.xml 作为常规 XML 文件打开呢？

（提示：复制/粘贴到现有项目中，可能使用不同的名称，然后在项目资源管理器中，右键单击 pom。选择“打开方式”|“XML 编辑器”）

很有可能它会解决 80% 的问题。

*（我敢说另外 20% 可能隐藏在 Eclipse 的“错误日志”视图下。）*

# ruby-on-rails - 如何不对应用程序中的特定页面使用 application.html.erb 文件？

> ID：14108848
> 
> 赞同：3
> 
> 时间：2013-01-01T07:54:09.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3, web-applications, partial-views

我希望应用程序中的特定页面具有不同的布局，而所有其他页面的布局几乎相同。但是，application.html.erb 文件会为应用程序中的所有页面呈现。如何不将 application.html.erb 文件用于特定页面？

导轨版本：3.2.1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T08:12:54.447

您可以制作另一个布局并指定，在您的操作中您可以简单地使用它，如下所示

```
class ReportsController < ApplicationController
  before_filter :authenticate_affiliate_user!

  def daily_breakdown
    render :layout => 'admin_layout'
  end
end 
```

在您可以执行的所有操作中为您提供不同的布局，如下所示

```
class ReportsController < ApplicationController
  layout 'reporting_affiliate'
  before_filter :authenticate_affiliate_user!

  # your code here 
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T07:58:04.900

嗨，您可以使用布局选项或指定特定的布局

```
Class SomeControlle < ...
  layout :admin_layout,:only=>[:some_action]
  def some_action
    #or
   render :layout=>'admin_layout'
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T07:58:13.060

`render :layout => 'special_layout'`在您渲染的控制器中使用。

# c# - 如何从实体框架中的关系表中删除已删除字段的行

> ID：14108853
> 
> 赞同：0
> 
> 时间：2013-01-01T07:55:38.230
> 
> 标签：c#, entity-framework

我有`Student`，`Course`和他们之间的关系为`StudentCourse`。这些类中的字段如下：

```
public class Student
    {
        public int StudentId { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public int CourseId { get; set; }
        [ForeignKey("CourseId")]
        public Course Course { get; set; }
    }

public class Course
    {
        public int CourseId { get; set; }
        public string CourseName { get; set; }
    }

public class StudentCourse
    {   
        public int ID { get; set; }
        public virtual Student Student { get; set; }
        public virtual Course Course {get;set;}
    } 
```

当我删除`student`表中的学生时，我想从关系中删除相应的行`StudentClass`。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:38:57.113

`Student`我相信您实际上想要和之间的多对多关系`Course`：一个学生可以参加*很多*课程，一个课程可以有*很多*学生。

在这种情况下，您可以简化模型：

```
public class Student
{
    public int StudentId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public ICollection<Course> Courses { get; set; }
}

public class Course
{
    public int CourseId { get; set; }
    public string CourseName { get; set; }
    public ICollection<Student> Students { get; set; }
} 
```

`StudentCourse`不需要“加入实体” 。EF 将从此模型创建三个表：一个`Students`表、一个`Courses`表和`StudentCourses`（或`CourseStudents`）将具有复合主键`(StudentId, CourseId)`（或类似名称）的表。这两个部分都是各自表的外键。

对于数据库中的两个外键关系，默认开启*级联删除。*因此，如果一个`Student`被删除，连接表中的链接记录将被自动删除。当 a`Course`被删除时也是如此。

您还可以显式定义连接表和连接表列的详细名称，也可以只使用单个集合，例如只有 in 中的`Courses`集合`Student`但没有`Students`in 中的集合`Course`。为此，您必须使用 Fluent API：

```
modelBuilder.Entity<Student>()
    .HasMany(s => s.Courses)
    .WithMany() // no parameter if there is no collection in Course
    .Map(m =>
    {
        m.MapLeftKey("StudentId");
        m.MapRightKey("CourseId");
        m.ToTable("StudentCourses");
    }); 
```

# java - 如何为 tr:selectOneChoice 的单个项目着色？

> ID：14108856
> 
> 赞同：0
> 
> 时间：2013-01-01T07:56:05.717
> 
> 标签：java, html, jsf, jsf-1.2

> **可能重复：**
> [selectOneMenu 的粗体第二项](https://stackoverflow.com/questions/7717022/bold-second-item-of-a-selectonemenu)

是否可以在选择项目下拉列表中绘制/着色项目？

我的代码：

```
<tr:selectOneChoice value="#{bean.entity}> 
   <f:selectItems value="#{bean.entities}" />
</tr:selectOneChoice> 
```

后备豆：

```
public List<SelectItem> getEntities() {
   List<SelectItem> entities = new ArrayList();
   SelectItem item = new SelectItem();
   item.setValue("value");
   item.setLabel("label");
   entities.add(item);
} 
```

我想将 styleclass 添加到项目中。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T08:08:09.803

不，通常这是不可能的，它的渲染取决于浏览器。
如果绝对必要，您必须创建一个`<div>`并设置它的样式，使其看起来像下拉菜单。

# php - 将图像从一个文件夹复制到另一个文件夹

> ID：14108857
> 
> 赞同：2
> 
> 时间：2013-01-01T07:56:19.743
> 
> 标签：php

我的 Web 应用程序存储在 XAMPP/htdocs/projectname/ 目录中。我在上面的目录中有图像（源）和 img（目标）文件夹。我正在编写以下代码行以将图像从一个文件夹复制到另一个文件夹。但我收到以下**警告：（警告：复制（资源 id #3/image1.jpg）：无法打开流：C:\xampp\htdocs 中没有这样的文件或目录）** 并且图像不会复制到目的地。

```
<?php
        $src = opendir('../images/');
    $dest = opendir('../img/');
    while($readFile = readdir($src)){
            if($readFile != '.' && $readFile != '..'){
                 if(!file_exists($readFile)){
                if(copy($src.$readFile, $dest.$readFile)){
                echo "Copy file";
            }else{
                    echo "Canot Copy file";
                }
                   }
            }
        }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T08:05:14.277

只是一个猜测（对不起），但我不相信你可以使用`$src = opendir(...)`和`$src.$readFile`喜欢那样。尝试这样做：

```
$srcPath = '../images/';
$destPath = '../img/';  

$srcDir = opendir($srcPath);
while($readFile = readdir($srcDir))
{
    if($readFile != '.' && $readFile != '..')
    {
        /* this check doesn't really make sense to me,
           you might want !file_exists($destPath . $readFile) */
        if (!file_exists($readFile)) 
        {
            if(copy($srcPath . $readFile, $destPath . $readFile))
            {
                echo "Copy file";
            }
            else
            {
                echo "Canot Copy file";
            }
        }
    }
}

closedir($srcDir); // good idea to always close your handles 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T08:21:41.533

在您的代码中替换这一行，这肯定会起作用。

```
if(copy("../images/".$readFile, "../img/".$readFile)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T08:19:48.703

你给出的路径错误，如果你的文件路径说 script.php 是“XAMPP/htdocs/projectname/script.php”并且图像和 img 都在“projectname”文件夹中，那么你应该为 $srcPath 和 $destPath 使用以下值,将它们的值更改为

```
$srcPath = 'images/';
$destPath = 'img/'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-10T13:20:37.887

```
public function getImage()
  {

    $Path='image/'; //complete image directory path
    $destPath = '/edit_image/';
    // makes new folder, if not exists.
    if(!file_exists($destPath) || file_exists($destPath)) 
    {
        rmdir($destPath);
        mkdir($destPath, 0777);
    }

    $imageName='abc.jpg';
    $Path=$Path.$imageName;
    $dest=$destPath.$imageName;
    if(copy($Path, $dest));
  } 
```

# android - 将 (Boost) Asio 与 Android NDK 一起使用的限制

> ID：14108859
> 
> 赞同：4
> 
> 时间：2013-01-01T07:56:36.447
> 
> 标签：android, android-ndk, boost-asio

目前在 Android 平台上将 Asio 与 NDK 结合使用有哪些限制？除了Asio，您肯定会选择其他选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T10:02:14.287

因此没有限制。唯一担心的是缺乏官方支持。你必须建立提升库参考我的帖子[https://stackoverflow.com/posts/comments/19511559](https://stackoverflow.com/posts/comments/19511559)谢谢

# web-services - 如何测试远程 Rest WS 是否存在？

> ID：14108871
> 
> 赞同：0
> 
> 时间：2013-01-01T08:00:01.050
> 
> 标签：web-services, c#-4.0, rest, browser

我为我们的客户（IT 人员）编写纠正措施，我想为他们提供的步骤之一是轻松检查某些远程 REST 服务是否已启动并运行。

达到这个 ALIVE() 逻辑的最简单方法是什么？

他们可以打开网络浏览器并执行类似的操作吗

```
Http://<Server>:<Port> 
```

*   或者其他的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T08:17:22.677

好的解决方案将是简单的控制台应用程序，它将通过控制请求请求您的休息服务并检查此请求的响应。

**更新：** 如果您无法创建此控制台应用程序，您可以向您的客户提供说明：

1.  打开浏览器；
2.  请求http://：
3.  它应该响应控制响应。

# javascript - 后 PHP Javascript 中缺少变量

> ID：14108873
> 
> 赞同：1
> 
> 时间：2013-01-01T08:00:18.623
> 
> 标签：javascript, php, combobox, dom-events, dynamic-controls

***编辑

@alditis TY，尝试了您的建议，但之后 Javascript 不起作用。这个不需要那么安全，因为不涉及敏感数据，而且我正在学习它。此外，我将更多地使用这些查询，因此我更希望将整个数组放在其中。

@Barmar 是的，它确实如此，倒数第二个片段显示了谷歌浏览器如何使用它的调试器查看输出。这就是为什么它如此奇怪。

@FreudianSlip 我正在尝试一些东西，但从来没有把它放回去。

@saeed 阿拉伯 sheybani 我不太明白？代码有效，列表填充得很好，问题`$_REQUEST['pos_no']`似乎不存在。它应该根据输出代码提交。也许我不明白你在说什么，你有一个可以链接我的例子吗？

* * *

我试图让一个 PHP/Javascript 动态填充的组合框通过 mysql 查询工作，并且在大多数情况下它工作正常，直到我点击提交按钮。到目前为止，这些脚本完全符合我的要求。

从我可以看到替换代码被排除在`$_POST`数组之外。我认为这种情况正在发生，因为一旦表单加载它会列出预期的字段或`$_post`当场创建数组，因此通过插入一些新代码它可能会忽略它？只是一个猜测，但似乎合乎逻辑，如果是这样，人们将如何解决这个问题？这已经困扰了我一个多月了。

Javascript：

```
<script type="text/javascript">
    $(document).ready(subpos_selectbox_change);
    function subpos_selectbox_change(){
        $('#subpos').change(update_position_number);
    }
    function update_position_number(){
        var subpos=$('#subpos').attr('value');
        $.get('get_list.php?subpos='+subpos, show_posnumbers);
    }
    function show_posnumbers(ss){
        $('#position_number').html(ss);
    }
</script> 
```

get_list.php

```
switch($_REQUEST['subpos']){

    case 'AO2';
        $teamQuery = "SELECT * FROM establishment_positions WHERE position_filled='0' AND active='1' AND position_acrynom='AO2'";
        break;

    case 'AO3';
        $teamQuery = "SELECT * FROM establishment_positions WHERE position_filled='0' AND active='1' AND position_acrynom='AO3'";
        break;

    case 'AO4';
        $teamQuery = "SELECT * FROM establishment_positions WHERE position_filled='0' AND active='1' AND position_acrynom='AO4'";
        break;

    case 'AO5';
        $teamQuery = "SELECT * FROM establishment_positions WHERE position_filled='0' AND active='1' AND position_acrynom='AO5'";
        break;

    case 'AO6';
        $teamQuery = "SELECT * FROM establishment_positions WHERE position_filled='0' AND active='1' AND position_acrynom='AO6'";
        break;

    case 'AO7';
        $teamQuery = "SELECT * FROM establishment_positions WHERE position_filled='0' AND active='1' AND position_acrynom='AO7'";
        break;

    case 'AO8';
        $teamQuery = "SELECT * FROM establishment_positions WHERE position_filled='0' AND active='1' AND position_acrynom='AO8'";
        break;

    case 'SO1';
        $teamQuery = "SELECT * FROM establishment_positions WHERE position_filled='0' AND active='1' AND position_acrynom='SO1'";
        break;

}

echo '<select name="pos_number" id="pos_number">';
$ss = null;
$result = mysql_query($teamQuery);
while($row = mysql_fetch_array($result))
{
    $ss.= '<option value=' . $row['position_id'] . '>' . $row['position_number'] . '</option>';

}
echo $ss;
echo '</select>'; 
```

..这里是 Javascript 开始工作之前的 html 代码：

```
<div class="newusr">
    <table>
        <form id="newusr" action="includes/insertuser.php" method="post">
            <tr><td>First Name: </td><td><input type="text" name="firstname"></td></tr>
            <tr><td>Middle Name: </td><td><input type="text" name="middlename"></td></tr>
            <tr><td>Last Name: </td><td><input type="text" name="lastname"></td></tr>
            <tr><td>Username: </td><td><input type="text" name="usr"></td></tr>
            <tr><td>sex:</td><td><select name="sex"><option value="1">Male</option><option value="0">Female</option></select></td></tr>
            <tr><td>Position: </td><td><select name="subpos" id="subpos"><?php echo $subpos; ?></select><td></tr>
            <tr><td>Position No: </td><td id="position_number"><select name="pos_number"><option value="">choose a Position first</option></select></td></tr>
            <tr><td>Contractor: </td><td><input type="checkbox" name="contractor" value="1"></td></tr>
            <tr><td>Start date: </td><td><input type="date" name="empStrtDte"></td></tr>
            <tr><td>Active: </td><td><input type="checkbox" name="active" value="1"></td></tr>
            <tr><td><?php echo '<input type="submit"><input type="reset" value="Reset"></td></tr>'; ?>
        </form>
    </table>
</div> 
```

我更改 subpos 中的值后的 HTML 代码（来自 Chrome）：

```
<select name="subpos" id="subpos">
    <option value="AO2">AO2</option>
    <option value="AO3">AO3</option>
    <option value="AO4">AO4</option>
    ...
</select></td>
<select name="pos_number" id="pos_number">
     <option value="2">805620121</option>
     <option value="10">805678998</option>
</select> 
```

一切看起来都很好，这正是我现在想要的。然后我打印数组和繁荣，错过了`pos_numbe`r 值，我不知道为什么。

```
Array
(
    [firstname] =&gt; test
    [middlename] =&gt; test
    [lastname] =&gt; test
    [usr] =&gt; 
    [sex] =&gt; 1
    [subpos] =&gt; AO3
    [empStrtDte] =&gt; 2012-02-19
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T09:53:20.273

对于选择菜单，当键盘和鼠标按钮事件选择选项时发生更改事件，并且 NoScript 有效地干扰。对于文本字段或文本区域，当字段失去焦点时会发生更改事件。因此您不能直接使用“更改事件”（无需通过键盘或鼠标选择任何选项）试试这个代码：

```
<select name="subpos" id="subpos">
<option value="1">first</option>
<option value="2">secound</option>
<option value="3">Third</option>
</select>

<script>
    $(function() {
        $('#subpos').change(function() {
            console.log('subpos has changed');
        }); 
        $("#subpos").val('2');//combo box has change but dont appear in console log. why?
   });
</script> 
```

运行后；查看控制台日志，您在控制台日志中看不到“subpos has changed”。但在行动 subpos 已更改为“第二”
发生了什么？选择更改时，它应记录到控制台。现在通过从下拉列表中选择该选项，您可以看到 cosole 日志已更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:18:44.887

问题是 Javascript 没有将结果绑定到 DOM。改为使用一些 JQuery。胡扎。

感谢所有的贡献。

JavaScript：

```
<script type="text/javascript">
            $(document).on('change', "#subpos", function(){
                var subpos=$('#subpos').attr('value');
                $.get('get_list_test.php?subpos='+subpos, function(ss){
                    $('#pos_number').html(ss);
                });
            });
</script> 
```

HTML：

```
<tr><td>Position No: </td><td><select name="pos_number" id="pos_number"><option value="">choose a Position first</option></select></td></tr> 
```

PHP：

```
$teamQuery = "SELECT * FROM establishment_positions WHERE position_filled='0' AND active='1' AND position_acrynom='".mysql_real_escape_string($_REQUEST['subpos'])."'";

$ss = null;
$result = mysql_query($teamQuery);
while($row = mysql_fetch_array($result))
{
    $ss.= '<option value=' . $row['position_id'] . '>' . $row['position_number'] . '</option>';

}
echo $ss; 
```

# php - magic_quotes_gpc 开启

> ID：14108875
> 
> 赞同：0
> 
> 时间：2013-01-01T08:00:40.667
> 
> 标签：php, zend-framework, magic-quotes-gpc

我有一个使用 Zend 开发的网站。

`magic_quotes_gpc`我在 application.ini 文件中这样关闭：

```
phpSettings.magic_quotes_gpc = 0
phpSettings.magic_quotes_runtime = 0
phpSettings.magic_quotes_sybase = 0 
```

但是我可以看到当用户想用这个应用程序更新或添加数据库中的数据时，如果有任何引号，斜杠会在它之前添加！！

我联系了服务器管理员，他告诉我所有这些属性都关闭了！！

但是当我 echo 时`get_magic_quotes_gpc();`，它会打印 1。

我应该怎么办？！！

# c# - MVC3 中模型 DisplayFormat 的 DataFormat 错误

> ID：14108880
> 
> 赞同：3
> 
> 时间：2013-01-01T08:01:10.083
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

这是我根据当前文化格式化日期的模型。

我试图避免像**DataFormatString = "{0:MM/dd/yyyy}"**这样的硬编码这样 做的原因是为了获得当前的文化模式

```
 [Required(ErrorMessage = "Date is required")]
 [DisplayFormat(ApplyFormatInEditMode = true,
               DataFormatString = System.Threading.Thread.CurrentThread.CurrentCulture.DateTimeFormat.ShortDatePattern.ToString())]
[Display(Name = "Date", ResourceType = typeof(Resources.Global))]
public DateTime Date { get; set; } 
```

在 .cshtml 中

```
@Html.TextBox("Date", 
    Model.Date.ToString("d", System.Threading.Thread.CurrentThread.CurrentCulture.DateTimeFormat), new { @class = "datePicker" }) 
```

**问题**：我收到一个错误

> 属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式

有没有办法在 MVC TextBox Helper 中显示基于当前文化的短日期？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-02T00:46:22.160

`{0:d}`是当前的文化`ShortDatePattern`，

代替

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = System.Threading.Thread.CurrentThread.CurrentCulture.DateTimeFormat.ShortDatePattern.ToString())] 
```

你应该使用

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = {0:d})] 
```

设置后，DataFormatString 仅用于 EditorFor 和 DisplayFor。所以你应该改变你的看法

```
@Html.EditorFor(model => model.Date, new { @class = "datepicker" }) 
```

记得`@model YourModel`在视图顶部添加

# microcontroller - 如何使用微控制器 8051 通过中断 4 从 UART 获取字符串

> ID：14108881
> 
> 赞同：0
> 
> 时间：2013-01-01T08:01:16.230
> 
> 标签：microcontroller, 8051, uart

我有点难以从中断 4 函数中获取字符串。但是当我尝试获取单个字符并在 LCD 2*16 中显示时效果很好。但是当我尝试从“dot[i]”变量中获取字符串以显示给 LCD 时，它不起作用。

这是我的代码：

```
void Init_SerialT2()
 {
     //timer 2 Osilator 12 MHz
     SetTRCLK(1,1); /*using for send and receive function*/
     SM0 = 0;
     SM1 = 1;       /* register serial control mode1 = 8 bit UART*/
     TH2 = 0x5;
     TL2 = 0x124;
     //TH2=0x03;
     //TL2=0x03;
     RCAP2H = 0xff; /*RCAP2 0xffd9 baut rate 9600 at F osilator 12Mhz*/
     RCAP2L = 0xd9; 
     C_T2 = 0;      /* using As timer function*/
     REN = 1;       /* Receive enable*/
     TR2 = 1;   /* Timer 2 start*/
 }

volatile unsigned char RX_IN_CHR_UART[16]; // global var
void Interrupt_TerimaChar() interrupt 4
{
    volatile unsigned int i =0;
    volatile unsigned char ch;
    volatile unsigned char *dor;

    TI=0;
    if(RI)
    {
      ch = SBUF;
      RI =0;
       for(i=0;i<RX_IN_CHR_UART[i];i++)
       {
          RX_IN_CHR_UART[i] = ch;  // save character int array
          dor[i]= RX_IN_CHR_UART[i];
       }
       LCD_command(0x86);
       //LCD_senddata(ch); // test to get char it's works
       LCD_sendstring(dor);
       ES =1;   
    }
} 
```

对于我使用 Keil v4 的编译器

# sqlalchemy - Flask-SQLAlchemy 不会更新或删除一行

> ID：14108890
> 
> 赞同：2
> 
> 时间：2013-01-01T08:04:41.617
> 
> 标签：sqlalchemy, flask, flask-sqlalchemy

我想更新数据库中的一行（如果存在），或者如果不存在则创建它。

我有一个首先设置实例变量的类`user`：

```
self.user = models.User.query.filter_by(entity=self.entityUrl).first()
# can be None if not found 
```

然后，稍后在另一个类方法中我这样做：

```
if self.user is not None:
    self.user.foo = bar  # etc. Change the attributes of self.user
else:
    self.user = models.User(bar, ... )  # create a new model
    db.session.add(self.user)
db.session.commit() 
```

问题是，数据库中的相应行没有得到更新。我也尝试过这种方法：

```
if self.user is not None:
    self.user.foo = bar
else:
    self.user = models.User(bar, ... )
db.session.add(self.user)  # add it to the session either way
db.session.commit() 
```

在这里， db.session.add() 调用失败了`sqlalchemy.exc.InvalidRequestError: Object '<User at 0x7f4918172890>' is already attached to session '1' (this is '2')`

我尝试的第一件事是在所有情况下删除现有模型，然后创建一个新模型，即：

```
if self.user is not None:
    db.session.delete(self.user)
self.user = models.User(bar, ... )
db.session.add(self.user)
db.session.commit() 
```

在这种情况下，db.session.delete() 调用失败并显示与上述相同的`already attached to session '1'`消息。

为什么对象附加到不同的会话而不是同一个会话？我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-05T03:22:16.607

确保类中的 foo 属性存在。接下来，也许你使用它的方式有问题。因为我看到你使用“self.user ....”。先试试最简单的。然后一步一步来。

以下代码是错误的：

```
if self.user is not None:
    self.user.foo = bar
else:
    self.user = models.User(bar, ... )
db.session.add(self.user)  # add it to the session either way
db.session.commit() 
```

不需要`db.session.add`，如果你想更新记录。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T20:07:42.740

要使用 Flask-SQLAlchemy 更新现有记录，您无需重新创建整个用户对象并将其添加到会话中。您只需更新特定字段（例如 foo）就可以了。然后，您可以执行 db 提交。

您可以按以下方式执行您的确切要求：

# 第一步：查询已有的用户对象

```
user = models.User.query.filter_by(entity=self.entityUrl).first() 
```

# 第2步：

```
if user is not None:
     user.foo = bar
else:
    user = User(...)
    db.session.add(user) 
```

# 第 3 步：提交数据库会话。

```
db.session.commit() 
```

# c# - 如何通过 JavaScript 回调在 C# 中运行 QUnit 测试并返回测试结果？

> ID：14108897
> 
> 赞同：5
> 
> 时间：2013-01-01T08:06:03.110
> 
> 标签：c#, javascript, selenium, phantomjs, qunit

在我的几个项目中，我使用 MVC 模式将代码（关注点）分成 3 层。模型层和控制层都在 C# 上运行，因此我使用 MSTest 或 NUnit 等测试框架来验证这些层的功能需求。对于视图层，我使用 QUnit 来测试 JavaScript 文件。

但是，我无法将 QUnit 作为自动化测试执行，因为 MSTest 不直接支持测试网页。我需要像下面的逻辑一样在 MSTest 中运行它。

```
[TestMethod]
public void JavaScriptTest()
{
    var result = QUnit.Test('~/QUnit/test1.htm');

    Assert.IsTrue(result.Failed <= 0)
} 
```

解决方案必须**在 QUnit 中使用回调函数**（[不是 while-loop 检查](https://stackoverflow.com/questions/2579648/background-worker-while-loop)），以确保测试方法在测试完成后立即执行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T08:06:03.110

对于跨浏览器测试，[Selenium WebDriver](http://seleniumhq.org/projects/webdriver/)是解决此问题的最佳选择，因为我们只需更改一行代码即可轻松地在浏览器之间切换。

1.  [通过NuGet](http://www.nuget.org/)将[Selenium WebDriver 包](http://www.nuget.org/packages/Selenium.WebDriver)安装到项目中。

![在此处输入图像描述](../Images/76f5b74a0a240e5b92f8f73cf5f06fe3.png)

2.将[首选驱动程序下载](https://code.google.com/p/selenium/downloads/list)到您的项目中，添加到您的项目中并将“复制到输出目录”设置为“如果较新则复制”。对于这个示例，我使用 Chrome 驱动程序在我的机器上通过 Google Chrome 运行 Selenium。

[![在此处输入图像描述](../Images/6e001e603411b042e5283c4bd0e7d318.png)](https://code.google.com/p/selenium/downloads/list)

3.在测试方法中，在运行QUnit之前创建驱动程序并设置最大执行时间。

```
var browser = new ChromeDriver();
var navigator = browser.Navigate();

// Currently, max execution time is one minute.
browser.Manage().Timeouts()
       .SetScriptTimeout(new TimeSpan(0, 1, 0)); 
```

4.请确保您已经将 QUnit 的自动启动设置为 false。

```
QUnit.config.autostart = false; 
```

5.导航到 QUnit 页面。在这种情况下，我在解决方案文件夹中使用本地网页。

```
 browser.Manage().Timeouts().SetScriptTimeout(new TimeSpan(0, 1, 0));
navigator.GoToUrl(Path.Combine(AppDomain.CurrentDomain.BaseDirectory, @"../../../QUnit example/qunit-demo.htm")); 
```

6.使用浏览器对象中的ExecuteAsyncScript方法为[QUnit.done](http://api.qunitjs.com/category/callbacks/)函数注册回调并手动启动QUnit测试。

```
var response = browser.ExecuteAsyncScript
(
    "var callback = arguments[arguments.length - 1];" +
    "QUnit.done(callback); QUnit.start();"
); 
```

7.当 QUnit 测试完成时，它会返回一个响应。我们需要将其转换为合适的类型并得到测试结果。

```
var testResult = response as Dictionary<string, object>;

if(testResult == null) throw new Exception("Unhandle error occur while running QUnit."); 

Console.WriteLine("Test complete in " + (long)testResult["runtime"] + " ms.");
Console.WriteLine("---------------------------");
Console.WriteLine("total: " + (long)testResult["total"]);
Console.WriteLine("passed: " + (long)testResult["passed"]);
Console.WriteLine("failed: " + (long)testResult["failed"]); 
```

8.不要忘记每次使用完成测试时关闭浏览器。

```
browser.Close(); 
```

PS。我还为此答案提供了 Visual Studio 2012 解决方案（源代码）。

[点击这里下载](https://skydrive.live.com/redir?resid=F093F24662880947!2706)

**更新 1**

*   修复 QUnit 在系统注册回调到完成函数之前开始测试的错误。
*   包括本地 QUnit 页面。
*   包括 IEDriver 来下载解决方案。但是，此版本不支持 Windows 8 上的 IE10。但它在 IE8 上运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T12:42:36.743

[PhantomJS](http://phantomjs.org/)是一个带有 JavaScript API的**无头 WebKit 。**它具有对各种 Web 标准的快速和原生支持：DOM 处理、CSS 选择器、JSON、Canvas 和 SVG。它是完整的 Web 堆栈，是无头网站测试、屏幕捕获、页面自动化和网络监控的最佳解决方案。

[![在此处输入图像描述](../Images/77b40f1744b5da34f20c06b5f7b5c09d.png)](http://phantomjs.org/)

当你想测试一些 JavaScript 库并且不想在测试机器上使用安装的浏览器时，我建议你使用这个框架。

1.请确保您已经将 QUnit 的自动启动设置为 false。

```
QUnit.config.autostart = false; 
```

2.[下载](http://phantomjs.org/download.html)适用于 Windows 的 PhantomJS 可执行文件，添加到您的项目中并将“复制到输出目录”设置为“如果较新则复制”。

3.创建进程以运行 PhantomJS.exe 与 2 个参数是 JavaScript 文件和测试页面 url。

```
var scriptPath = Path.GetFullPath(Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "../../PhantomScript/main.js"));
var pageUrl = "file:///" + Path.GetFullPath(Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "../../QUnitExample/qunit-demo.htm")).Replace('\\', '/');

var process = new Process
{
    StartInfo =
    {
        UseShellExecute = false,
        RedirectStandardOutput = true,
        CreateNoWindow = true,
        WindowStyle = ProcessWindowStyle.Hidden,
        FileName = "phantomjs.exe",
        Arguments = "\"" + scriptPath + "\" \"" + pageUrl + "\""
    }
}; 
```

4.启动进程并检查该进程的退出代码。

```
process.Start();
process.WaitForExit();

Assert.AreEqual(process.ExitCode, 0); 
```

在 JavaScript 文件中，我使用*eveluateAsync*访问页面上下文以运行 QUnit 测试，等待它完成并且记录测试量失败。

```
page.evaluateAsync(function ()
{
    QUnit.done(function(response)
    {
        console.log('!Exit' + response.failed);
    });

    QUnit.start();

    // If QUnit finish after 2500 ms, system will exit application with code -1.
    setTimeout(function()
    {
        console.log('!Exit-1');
    }, 2500);
}); 
```

为了处理日志，我使用以下代码通过退出代码退出进程。

```
var exitCodeName = '!Exit';
page.onConsoleMessage = function (msg)
{
    if (msg.indexOf(exitCodeName) == 0)
    {
        var exitCode = parseInt(msg.substring(exitCodeName.length).trim(), 10);

        phantom.exit(exitCode || 0);
    }
}; 
```

PS。我还为我的 SkyDrive 提供了完整的源代码 (VS2012)。您可以在以下链接下载它。

[PhantomJS 测试项目](http://sdrv.ms/TKIttt)

这个项目演示了如何在 MSTest 中运行 PhantomJS。

[PhantomJS 表单项目](http://sdrv.ms/TKIv4u)

这个项目是用 C# Windows 窗体编写的 PhantomJS 包装器。在测试项目中使用它之前，我使用它来测试“main.js”和“core.js”文件。

![在此处输入图像描述](../Images/19d122fb22c4b4478e9df392952649f5.png)

# cuda - Nsight Eclipse：.cuda-gdbinit：没有这样的文件或目录

> ID：14108900
> 
> 赞同：2
> 
> 时间：2013-01-01T08:06:16.357
> 
> 标签：cuda, eclipse-cdt, nsight

我在带有 Nsight Eclipse 的 Ubuntu 11.10 上使用带有两个 gpu 卡的 Cuda 5.0。
当我尝试从 Eclipse 中调试一个程序时，我得到

```
Error in final launch sequence
Failed to execute MI command:
source .cuda-gdbinit
Error message from debugger back end:
.cuda-gdbinit: No such file or directory.
.cuda-gdbinit: No such file or directory. 
```

我查看了 Eclipse 调试配置，我有

```
GDB debugger: cuda-gdb
GDB command file: .cuda-gdbinit 
```

我的系统上没有文件`.cuda-gdbinit`。
我应该创建它吗？如果是这样，在哪里以及包含哪些内容？
我的`cuda-gdb`设置有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T22:40:16.550

此消息是无害的。Nsight 所做的是明确指示 cuda-gdb 在启动调试会话时读取 .cuda-gdbinit 以获取用户可能拥有的任何自定义设置。没有那个文件完全没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-11T12:32:19.303

为了防止 Eclipse CDT / nsight 绑定加载 .cuda-gdbint （您可以按照其他答案的建议安全地执行此操作），您必须将其从与您的运行/调试配置关联的“GDB 命令文件”中删除。

要做到这一点，

1.  使用菜单，转到**运行 | 调试配置**
2.  选择您收到错误消息的运行/调试/等配置
3.  在多选项卡部分中，选择**调试器**选项卡
4.  在子多选项卡部分中，选择**Main**
5.  您现在应该看到一个**GDB 命令文件**文本框。清除它。

# jquery - Ajax 响应 html 在放置在页面上时发生了变化

> ID：14108906
> 
> 赞同：0
> 
> 时间：2013-01-01T08:07:00.263
> 
> 标签：jquery, html, ajax, pyrocms

在 pyrocms 中，我有一个列表视图，我使用 Jquery Ajax 过滤记录。我使用灯箱显示的每条记录都附有图像。当页面首先加载时它工作正常，但是当我使用过滤时，我得到了正确的图像和链接 html，但是当我将该 html 放在视图上时，它得到了改变

```
<a href="http://localhost/pyrocms/upload/2_LBergereChairWU2-1.jpg" class="lightbox cboxElement">
<img src="http://localhost/pyrocms/upload/2_LBergereChairWU2-1.jpg" height="20" width="20">
</a> 
```

对此

```
 <a href="http://localhost/pyrocms/upload/2_LBergereChairWU2-1.jpg" class="lightbox cboxElement"></a>
<img src="http://localhost/pyrocms/upload/2_LBergereChairWU2-1.jpg" height="20" width="20"> 
```

有什么问题请帮忙...

这是我的jQuery代码

```
 $('#nameSearch').click(function(){
var name =$('#name').val();
$.ajax({
        type:"POST",
        url:"admin/inventory_items/filter",
        data:"name="+name,
        success:function(html){
            $('#itemsfilter').html(html);
        }
    })
    return false;
 }); 
```

这是我的过滤方法

```
 public function filter() {
    if(isset($_REQUEST['catagory'])){$cat = $_REQUEST['catagory']; $items = $this->inventory_items_m->getoncat($cat);}
    if(isset($_REQUEST['subcatagory'])){$subcat = $_REQUEST['subcatagory']; $items = $this->inventory_items_m->getonsubcat($subcat);}
    if(isset($_REQUEST['name'])){$name = $_REQUEST['name']; $items = $this->inventory_items_m->getonname($name);}
    $catagories = $this->inventory_catagories_m->get_catagories();
    $subcatagories = $this->inventory_subcatagories_m->get_subcatagories();
    $images = $this->inventory_items_m->getimages();
    foreach ($items->result() as $item) {
        echo "<tr>";
                 echo "<td>"; echo $item->id; echo "</td>";
                 echo "<td>";
                   //for images
                $img = NULL; $i=0;

                foreach ($images->result() as $image) {

                        if($image->id == $item->id){
                            $img[$i] = $image->filename;
                            $i++;
                            }

                    }
                    $num = count($img);

                if($num>0):
                  for($j=0; $j<1; $j++) { 
                    echo "<a href=\"".site_url()."upload/".$img[($j)]."\" class='lightbox cboxElement' />";
                        echo "<img src=\"".site_url().'upload/'.$img[($j)]."\"  height=\"20\" width=\"20\" />";
                    echo "</a>";
                    }

                endif;
               echo "</td>";
               echo "<td>"; echo $item->name; echo "</td>";
               echo "<td>"; echo $item->desc; echo "</td>";
               echo "<td>"; echo $item->no_of_items; echo "</td>";

                //for name of catagory
                foreach ($catagories as $catagory) {
                        if($catagory->id == $item->catagory) {
                            $catagoryname = $catagory->name;
                        }
                    }

                //<!-- for name of subcatagory -->
                foreach ($subcatagories as $subcatagory) {
                        if($subcatagory->id == $item->subcatagory) {
                            $subcatagoryname = $subcatagory->name;
                        }
                    }

                echo "<td>"; echo @$catagoryname; "</td>";
                echo "<td>"; echo @$subcatagoryname; "</td>";
                echo "<td class=\"actions\" style=\"width: 325px;\">";
                echo "<div class=\"buttons\">";                
                echo anchor('admin/inventory_items/uploadImages/'.$item->id, lang('button.img'),'class="button edit"')." ";
                echo anchor('admin/inventory_items/addnotes/'.$item->id, lang('button.notes'),'class="button edit"')." ";
                echo anchor('admin/inventory_items/edit/'.$item->id.'/'.$item->catagory.'/'.$item->subcatagory, lang('buttons.edit'), 'class="button edit"')." ";
                echo anchor('admin/inventory_items/delete/'.$item->id, lang('buttons.delete'), 'class="confirm button delete"'); 
                echo "</div>";
                echo "</td>";
            echo "</tr>";
    }

} 
```

现在请检查

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T09:40:53.697

好的，我得到了答案，我在锚标记中有一个额外的斜线

```
echo "<a href=\"".site_url()."upload/".$img[($j)]."\" class='lightbox cboxElement' />"; 
```

只是删除“>”之前的最后一个斜线解决了我的问题无论如何thanx Mr NullPointer

# c# - 在 WPF 图像中鼠标悬停时显示不同的图像

> ID：14108907
> 
> 赞同：1
> 
> 时间：2013-01-01T08:07:06.837
> 
> 标签：c#, wpf, wpfdatagrid, mouseover, datagridtemplatecolumn

我有一个`datatemplate`用于`datagridtemplatecolumn`
我试图在鼠标悬停时显示不同的图像`Image`。
鼠标悬停时，光标在变化，但图像没有变化。

```
 <DataTemplate x:Key="MyDataTemplate" DataType="DataRowView">
        <StackPanel Orientation="Horizontal" Background="Transparent">
            <Image Margin="0,0,0,0"   Width="50" Height="50" Source="{Binding Converter={StaticResource SetImgToDG}}" ToolTip="{Binding}" >
                <Image.Resources>
                    <Style TargetType="{x:Type Image}">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <!-- Hover image -->
                                <Setter Property="Cursor" Value="Hand"/>
                                <Setter Property="Source" Value="C:\Images\Coil3.png"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Image.Resources>
            </Image>
        </StackPanel>
    </DataTemplate> 
```

那个绑定会造成问题吗？
怎么解决？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T15:20:35.257

您的问题是图像的初始源是直接在`Source`图像实例的属性上定义的。

当有多个事物试图设置依赖属性的值时，框架必须决定使用哪个值。

在您的情况下，该值是直接在图像实例（本地）上设置的，也由`Trigger`.
在这种情况下，本地值将始终获胜，因此`Trigger`激活时不会发生任何事情。

如果您在样式中设置初始值，则`Trigger`在尝试更改图像源时将获胜，当鼠标悬停在图像上时，图像会发生变化。

[您可以在MSDN](http://msdn.microsoft.com/en-us/library/ms743230.aspx)上阅读有关如何`Dependency Property`解析a 值的更多信息。

```
<Image.Resources>
    <Style TargetType="{x:Type Image}">
        <!-- Set the initial source in the style so the trigger can change it -->
        <Setter Property="Source" Value="{Binding Converter={StaticResource SetImgToDG}}" />
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <!-- Hover image -->
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Source" Value="C:\Images\Coil3.png"/>
            </Trigger>
        </Style.Triggers>
    </Style>
</Image.Resources> 
```

# c# - ILMerge 命令错误

> ID：14108908
> 
> 赞同：0
> 
> 时间：2013-01-01T08:07:07.643
> 
> 标签：c#, dll, ilmerge

错误：找不到目标平台目录

以下是我得到的错误，我在 windows xp 上使用 .net 4.5 与 2010 相比。我是第一次使用 ILMerge。

下图有查询

[http://i50.tinypic.com/2lj2788.png](http://i50.tinypic.com/2lj2788.png)

请在给我-1分之前评论是否缺少某些内容。所以我可以纠正它并向用户学习;)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T10:41:10.520

您应该将框架路径括在引号中。我遇到了完全相同的问题，这是我的解决方案。

示例：/targetplatform:v4,"C:\Windows\Microsoft.NET\Framework\v4.0.30319"

玩得开心！

# c++ - 使用 cout 在小数点后打印 X 数

> ID：14108909
> 
> 赞同：0
> 
> 时间：2013-01-01T08:07:31.393
> 
> 标签：c++, precision, cout, setf

我有这个代码：

```
double a = 7.456789;
cout.unsetf(ios::floatfield);
cout.precision(5);
cout << a; 
```

还有这个：

```
double a = 798456.6;
cout.unsetf(ios::floatfield);
cout.precision(5);
cout << a; 
```

第一个代码的结果是：7.4568 这几乎是我想要的（我想要收到的是 7.4567）第二个代码的结果：7.9846e+05 这根本不是我想要的（我想要 798456.6）我想要将数字打印到小数点后 4 个数字

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T08:28:26.247

通过使用`unsetf()`，您是在告诉`cout`将其默认格式用于浮点值。由于您想要小数点后的确切位数，因此您应该使用`setf(fixed)`or`std::fixed`代替，例如：

```
double a = ...;
std::cout.setf(std::fixed, ios::floatfield);
std::cout.precision(5);
std::cout << a; 
```

.

```
double a = ...;
std::cout.precision(5);
std::cout << std::fixed << a; 
```

# image - 如何使浮动图像做出响应？

> ID：14108911
> 
> 赞同：1
> 
> 时间：2013-01-01T08:08:05.573
> 
> 标签：image, css-float, responsive-design

请看[这个小提琴](http://jsfiddle.net/ajnoguerra/wVxZS/1/)

我在这个小提琴中主要关心的是 div#text 和 img.frame。我正在尝试创建一个响应式网站，但这一直是我的问题，我无法弄清楚如何让 img 在文本旁边表现并在我尝试减小大小的同时做出响应的浏览器窗口。它的作用是，它在响应之前进入文本之下。有解决方法吗？

```
<div id="text">This is some text this is some text this is some text</div>
<img src="http://upload.wikimedia.org/wikipedia/en/thumb/5/5f/TomandJerryTitleCardc.jpg/250px-TomandJerryTitleCardc.jpg" width="294" height="225" class="frame" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-09T23:21:33.313

带有流动文本的响应式图像的关键确实依赖于浮动。但是，关键在于浮动 img 元素，而不是文本。

首先，将 img 标签放在文本之前，如下所示：

```
<img src="image.jpg" width="294" height="225" class="frame" />
<div id="text">This is some text this is some text this is some text</div> 
```

这个顺序的重要性在于，img 将向右浮动，移除其清除的阻塞区域高度，并且文本将向上并围绕它流动。

接下来，从文本中删除浮动，让它流动，然后将浮动应用到图像上。我还要注意，要在文本和 img 之间留出边距，将边距应用于 img，从而为您提供以下样式：

```
img { max-width: 100%; height: auto; }

#text{ width:100px;}

.frame {
    float:right;
    background: #fff;
    padding: 6px;
    margin-left:10px;
    box-shadow: 1px 1px 2px rgba(40, 40, 40, 0.8);
    -moz-box-shadow: 1px 1px 2px rgba(40, 40, 40, 0.8);
    -webkit-box-shadow: 1px 1px 2px rgba(40, 40, 40, 0.8);
} 
```

这是一个[jfiddle 演示](http://jsfiddle.net/wVxZS/13/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:00:30.120

为了您的目标，您应该使用 em 或 % 并使用 inline-block。
jsfiddle.net/geNuR/ 看看这个 jsfiddle 不知道为什么我不能正确放置代码，也许论坛封锁了我们的国家））

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:16:46.873

您可以从添加 css`max-width: 60%;`开始`.frame`。它并不完美，但这与您想要实现的目标相似吗？使用 javascript/jQuery 可以实现更好的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T17:37:00.497

我假设您希望在这里并排显示文本和图像，如果我错了，请道歉。

像 M. Berro 一样，我首先将这两个元素放在一个包含的 div 中，如下所示：

```
<div id="container">
    <p class="text">Here's some text. This will be aligned to the left, and next to the image. It's width will change as the viewport expands or contracts.</p>
    <img src="/image.png" title="An image, aligned right" />
</div> 
```

要并排放置图像和文本，我将使用以下 CSS 作为起点：

```
#container {}
#container p.text { float: left; min-width: 320px; }
#container img { float: right; margin-left: 20px; } 
```

在我的示例中，我对两个元素中的每一个都应用了一个浮点数（您当然必须清除浮点数以确保页面结构的其余部分保持不变 - 我建议查看 Clearfix，因为它可以避免任何额外的空分区）。我还给了文本一个最小宽度：这样可以确保文本不会收缩到无法阅读的程度！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T08:25:52.940

据我了解，您需要文本旁边的图像，因此当您减小窗口大小时，图像和文本行为不会受到影响。

您需要以下内容：

1.  使容器 div`id=img_container`赋予样式宽度（比如说 400px）
2.  将您的图像放入容器中并赋予样式`#img_container img{float: left}`
3.  将您的文本放在 ap 标签中并给出样式`#img_container`（p 或 div）并给出样式`(margin-left: same of your img width) + 10`

这是完整的例子：

```
<style>
    #img_container {
        width: 400px;
    }
      #img_container.text {
          margin-left: 306px; 
      }
       #img_container img.frame {
           float: left;
       }
</style>
<div id="img_container">

<img src="http://upload.wikimedia.org/wikipedia/en/thumb/5/5f/TomandJerryTitleCardc.jpg/250px-TomandJerryTitleCardc.jpg" width="294" height="225" class="frame" />
<div id="text">This is some text this is some text this is some text</div>
</div> 
```

# jquery - jquery未发送复选框数据

> ID：14108914
> 
> 赞同：-1
> 
> 时间：2013-01-01T08:08:48.740
> 
> 标签：jquery

```
<script>
$(document).ready(function(){
  $("#result input[type='checkbox']").click(function(e){
        var chkval = 0
          if($('#result').is(':checked')){
            chkval  = 1;
          }
   $.ajax({
       url: "nsmsr.php",
       type: "POST",
       data:{'checkboxvalue':chkval},
       cache:false,
     });

   });  

});
</script>

<input type="checkbox" checked='checked'  id="result"> 
```

我正在使用此脚本将复选框值发送到 php 文件，但没有发布任何内容。我搜索了很多，但没有任何帮助我修复错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T08:11:10.320

我之前并没有很专注，确实其他回答者是对的，你没有将你的`click`事件绑定到正确的元素。您的代码应该是：

```
<script>
$(document).ready(function(){

  $('#result').click(function(e){
      var chkval = 0;
          if($('#result').is(':checked')){
            chkval  = 1;
          }
   $.ajax({
       url: "nsmsr.php",
       type: "POST",
       data:{'checkboxvalue':chkval},
       cache:false,
     });

   });  

});
</script>

<input type="checkbox" checked='checked'  id="result"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T08:12:06.127

您的选择器错误，`$("#result input[type='checkbox']")`尝试选择`#result`不存在其后代的复选框。只需使用`$("#result")`.

```
$("#result").click(function(e){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T08:13:48.227

`"#result input[type='checkbox']"`指的是 的*孩子*，`#result`而不是`#result`它自己。因为它是一个 id 你应该只使用

```
$("#result").click(function(e){ 
```

如果要将事件附加到页面上的所有复选框：

```
$("input[type='checkbox']").click(function(e){
    var chkval = 0
      if($( this ).is(':checked')){
        chkval  = 1;
      }
.... 
```

# json - 将 Header 设置为 'application/json' 到控制器 YII 中的所有操作

> ID：14108915
> 
> 赞同：0
> 
> 时间：2013-01-01T08:09:21.143
> 
> 标签：json, yii

我正在使用 yii 框架创建一个 rest api，所以基本的输出格式是 json....

我希望控制器中的所有操作都将标头内容类型设为“application-json”。

我试图将它放入控制器中的 beforeFilter 函数中，但它不起作用。

谁能帮我吗...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T22:05:32.593

*在 Controller 类 ( protected/components/Controller.php* )中创建一个`init()`函数。这将在调用任何控制器/操作时调用。例如：

 *```
public function init(){
    if ($this->id == 1){
        // perform controller specific function
    }
} 
```

`$this->id`返回控制器 ID 。您显然必须将上面代码中**的 1 替换**为您希望该功能发生的控制器的相关控制器 ID*

# sql - 如何在 sql server 中为以下场景编写查询？

> ID：14108916
> 
> 赞同：-1
> 
> 时间：2013-01-01T08:09:51.303
> 
> 标签：sql, sql-server, join

我有两张表如下..

**药物_大师**

```
PKDrugId - int

DrugName - varchar

DrugType - varchar 
```

**Stock_Master**

```
PKStockId - int

FKDrugId - int

Total_quantity_on_hand - int 
```

我想编写一个显示`DrugName`而不是`FKDrugId`在`Stock_Master`表中显示的查询。

谁能帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T08:11:23.540

`JOIN`像这样的表：

```
SELECT
  s.PKStockId,
  d.DrugName,
  s.Total_quantity_on_hand 
FROM Stock_Master s
INNER JOIN Drug_Master d ON s.FKDrugId  = d.PKDrugId; 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!3/cf1b0/1)。

请阅读有关`JOIN`s 的更多信息：

*   [**^(从维基百科)**](http://en.wikipedia.org/wiki/Join_%28SQL%29)[**加入（SQL）**](http://en.wikipedia.org/wiki/Join_%28SQL%29)。

*   [**SQL 连接的可视化表示**](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)。

*   [**SQL 连接的另一种可视化解释**](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

您可能需要`LEFT JOIN`而不是`INNER JOIN`获取不匹配的行。例如，如果您需要在另一个`Stock_Master`表中包含那些没有股票条目的药物名称，您可以这样做：

```
SELECT
  ISNULL(s.PKStockId, 0),
  d.DrugName,
  ISNULL(s.Total_quantity_on_hand, 0) 
FROM Drug_Master d
LEFT JOIN Stock_Master s ON s.FKDrugId  = d.PKDrugId; 
```

[**LEFT JOIN SQL Fiddle 演示**](http://www.sqlfiddle.com/#!3/cf1b0/4)

您可以使用相关的子查询，而不是`JOIN`像这样：

```
SELECT 
  s.PKStockId,
  (SELECT d.DrugName
   FROM  Drug_Master d 
   WHERE s.FKDrugId  = d.PKDrugId) AS DrugName,
  s.Total_quantity_on_hand 
FROM Stock_Master s; 
```

[**使用子查询的 SQL Fiddle 演示**](http://www.sqlfiddle.com/#!3/cf1b0/5)

但最好使用`JOIN`.

# php - 为什么 cakephp 不在 mysql 表中插入字段？

> ID：14108917
> 
> 赞同：3
> 
> 时间：2013-01-01T08:10:05.277
> 
> 标签：php, cakephp, cakephp-2.0

我在使用**CakePHP 2.2.4**时遇到了一个非常奇怪的问题，让我解释一下发生了什么。

我有这些mysql表：

**线索**

```
+------------+--------------+------+-----+---------+----------------+
| Field      | Type         | Null | Key | Default | Extra          |
+------------+--------------+------+-----+---------+----------------+
| id         | int(11)      | NO   | PRI | NULL    | auto_increment |
| user_id    | int(11)      | YES  | MUL | NULL    |                |
| date       | datetime     | YES  |     | NULL    |                |
| ip         | varchar(45)  | YES  |     | NULL    |                |
| service_id | int(11)      | YES  | MUL | NULL    |                |
| location   | varchar(255) | YES  |     | NULL    |                |
| message    | text         | YES  |     | NULL    |                |
+------------+--------------+------+-----+---------+----------------+ 
```

**用户**

```
+---------+--------------+------+-----+---------+----------------+
| Field   | Type         | Null | Key | Default | Extra          |
+---------+--------------+------+-----+---------+----------------+
| id      | int(11)      | NO   | PRI | NULL    | auto_increment |
| email   | varchar(200) | YES  |     | NULL    |                |
| pwd     | varchar(200) | YES  |     | NULL    |                |
| role_id | int(11)      | YES  | MUL | NULL    |                |
| active  | tinyint(4)   | YES  |     | 0       |                |
+---------+--------------+------+-----+---------+----------------+ 
```

**简介**

```
+---------+--------------+------+-----+---------+----------------+
| Field   | Type         | Null | Key | Default | Extra          |
+---------+--------------+------+-----+---------+----------------+
| id      | int(11)      | NO   | PRI | NULL    | auto_increment |
| user_id | int(11)      | YES  | MUL | NULL    |                |
| name    | varchar(120) | YES  |     | NULL    |                |
| surname | varchar(120) | YES  |     | NULL    |                |
| company | varchar(200) | YES  |     | NULL    |                |
| vat     | varchar(60)  | YES  |     | NULL    |                |
+---------+--------------+------+-----+---------+----------------+ 
```

**地址**

```
+------------+--------------+------+-----+---------+----------------+
| Field      | Type         | Null | Key | Default | Extra          |
+------------+--------------+------+-----+---------+----------------+
| id         | int(11)      | NO   | PRI | NULL    | auto_increment |
| profile_id | int(11)      | YES  | MUL | NULL    |                |
| address    | varchar(255) | YES  |     | NULL    |                |
| city       | varchar(120) | YES  |     | NULL    |                |
| zip_code   | char(5)      | YES  |     | NULL    |                |
| nation     | varchar(120) | YES  |     | NULL    |                |
| telephone  | varchar(200) | YES  |     | NULL    |                |
| mobile     | varchar(200) | YES  |     | NULL    |                |
| fax        | varchar(200) | YES  |     | NULL    |                |
| email      | varchar(200) | YES  |     | NULL    |                |
+------------+--------------+------+-----+---------+----------------+ 
```

**角色**

```
+-------+--------------+------+-----+---------+----------------+
| Field | Type         | Null | Key | Default | Extra          |
+-------+--------------+------+-----+---------+----------------+
| id    | int(11)      | NO   | PRI | NULL    | auto_increment |
| name  | varchar(100) | YES  |     | NULL    |                |
+-------+--------------+------+-----+---------+----------------+ 
```

**服务**

```
+-------+--------------+------+-----+---------+----------------+
| Field | Type         | Null | Key | Default | Extra          |
+-------+--------------+------+-----+---------+----------------+
| id    | int(11)      | NO   | PRI | NULL    | auto_increment |
| name  | varchar(255) | YES  |     | NULL    |                |
+-------+--------------+------+-----+---------+----------------+ 
```

以下是我使用的所有 CakePhp 模型（带有关联）：

**铅.php**

```
class Lead extends AppModel {

    public $name = 'Lead';

    /* Relazioni */      
    public $belongsTo = array('User', 'Service');
} 
```

**用户.php**

```
class User extends AppModel {

    public $name = 'User';

    /* Relazioni */
    public $hasOne = 'Profile';

    public $belongsTo = 'Role';

    public $hasMany = array(
        'Lead' => array(
            'className' => 'Lead'
        )
    );  

} 
```

**配置文件.php**

```
class Profile extends AppModel {

    public $name = 'Profile';

    /* Relazioni */
    public $belongsTo = 'User';

    public $hasMany = array(
        'Address' => array(
            'className' => 'Address'
        )
    );  

} 
```

**地址.php**

```
class Address extends AppModel {

    public $name = 'Address';

    /* Relazioni */        
    public $belongsTo = 'Profile';

} 
```

**服务.php**

```
class Service extends AppModel {

    public $name = 'Service';

} 
```

我有一个必须保存在多个 mysql 表中的表格。

这是我用来起草表格的代码：

```
<?php

echo $this->Form->create(null, array(
                            'inputDefaults' => array(
                                'error' => false
                            )
                        )
                ); //create(false) per il form senza il modello

echo $this->Form->input('User.Profile.name', array(
                            'label' => array(   
                                'class' => 'name-form',                                                                                                                                         
                                'text'  => 'Nome:'                                                                      
                            ),                                                              
                            'style' => 'width:238px;',
                            'div'   => 'field'
                        )
               );                               

echo $this->Form->input('User.Profile.surname', array(
                            'label' => array(   
                                'class' => 'name-form',                                                                                                                                         
                                'text'  => 'Cognome:'                                                                       
                            ),                                                              
                            'style' => 'width:238px;',
                            'div'   => 'field'
                        )
               );                                   

?>

<div class="clear"></div>

<?php

echo $this->Form->input('User.email', array(
                            'label' => array(                                                                       
                                'class' => 'name-form',
                                'text'  => 'Email:'
                            ),                                                              
                            'div'   => 'field', 
                            'class' => 'input-xlarge'
                        )
               );

echo $this->Form->input('User.Profile.Address.telephone', array(
                            'label' => array(   
                                'class' => 'name-form',                                                                                                                                         
                                'text'  => 'Telefono:'                                                                      
                            ),                                                          
                            'div'   => 'field'
                        )
               );                          
?>

<div class="clear"></div>

<?php                      

echo $this->Form->input('Lead.service_id',
                    array(
                        'label' => array(                                                                       
                            'class' => 'name-form',
                            'text'  => 'Servizio richiesto:'
                        ),                                                              
                        'div'   => 'field',
                        'type'  => 'select',                                                                
                        'options' => $services                                      
                    )
);                              

echo $this->Form->input('Lead.location', array(
                            'label' => array(                                                                       
                                'class' => 'name-form',
                                'text'  => 'Vicino a:'
                            ),                                                              
                            'div'   => 'field', 
                            'class' => 'input-xlarge'
                        )
               );                               

?>

<div class="clear"></div>

<?php

echo $this->Form->input('Lead.message', array(
                            'label' => array(                                                                       
                                'class' => 'message-form',
                                'text'  => 'Richiesta:'
                            ),                                                              
                            'div'   => 'field', 
                            'class' => 'form-field',
                            'type'  => 'textarea'
                        )
               );                                                               

echo $this->Form->button('Invia Richiesta', array(
                                        'type'  => 'submit',
                                        'class' => 'submit-btn less-margin'
                                    )
                );

echo $this->Form->end();

?> 
```

这是保存数据的控制器（PagesController）的操作：

```
public function home() 
{       
   if ($this->request->is('post'))
   {
    $this->loadModel('Lead');

    $this->request->data['Lead']['ip']   = $_SERVER['REMOTE_ADDR'];
    $this->request->data['Lead']['date'] = date('Y-m-d H:i:s'); 
    $this->request->data['User']['role_id'] = 3;    

    $this->Lead->set($this->request->data);

    debug($this->request->data);

    if ($this->Lead->validates()) 
    {
        // Dati nel modulo corretti
        debug($this->Lead->saveAll($this->request->data, array('deep' => true)));
    } 
    else 
    {
        // Errore nella validazione
        $this->Session->setFlash('Completare correttamente il form', 'default', array('class' => 'errore'), 'lead');

        $errors = $this->Lead->validationErrors;                
        debug($errors);
    }   
}

$this->loadModel('Service');

$this->set('services', $this->Service->find('list'));               

} 
```

这是从 FORM 生成的输出：

```
array(
    'User' => array(
        'Profile' => array(
            'name' => 'The Name',
            'surname' => 'The Surname',
            'Address' => array(
                'telephone' => 'The Telephone'
            )
        ),
        'email' => 'the@email.com',
        'role_id' => (int) 3
    ),
    'Lead' => array(
        'service_id' => '1',
        'location' => 'The location',
        'message' => 'This is the request',
        'ip' => '127.0.0.1',
        'date' => '2013-01-01 08:07:42'
    )
) 
```

**问题：**

一切正常，除了一件事......`saveAll()`正确保存所有数据（在每个模型中），但在地址表中我只看到 CakePhp 插入**profile_id**，只有这个字段，但正如您在从 FORM 生成的数组中看到的那样，我也有电话！

为什么 cakephp 不也插入**电话**字段？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T09:18:54.913

您正在编写代码，因此它不起作用。

蛋糕文档中没有任何地方说使用以下代码：

# 不正确

```
$this->Form->input('User.Profile.surname');
$this->Form->input('User.Profile.Address.telephone'); 
```

你不能只是把单词串在一起，然后寄希望于最好的结果。您可以使用：

# 正确的

```
$this->Form->input('field');
$this->Form->input('Model.field');
$this->Form->input('Model.n.field'); 
```

没有其他有效的方法可以输入字段。

与其编造东西，不如阅读[文档](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)

```
$this->Form->input('Profile.surname'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:21:49.780

“ [saveAll](http://book.cakephp.org/2.0/en/models/saving-your-data.html?highlight=saveall#model-saveall-array-data-null-array-options-array)函数只是 saveMany 和 saveAssociated 方法的包装。”

尝试使用`saveAssociated`，以便您强制使用该`saveAssociated`方法。还是通过了`array('deep'=>true);`。您的输出格式的方式，它可能会尝试自动使用`saveMany`.

此外，如果您对模型中的字段进行了验证`telephone`，它将失败，因为您有一个不包含任何数字的字符串。`The Telephone`. 或者，您可以传递`'validate' => false`.

# iphone - 如何从 NsmutableArray 获取最后一个数组值

> ID：14108918
> 
> 赞同：-3
> 
> 时间：2013-01-01T08:10:04.840
> 
> 标签：iphone, xcode, ios6

> **可能重复：**
> [如何获取 NSArray 的最后一个对象](https://stackoverflow.com/questions/7175256/how-to-get-the-last-object-of-an-nsarray)

在我的 iPhone 应用程序中，我想从以下位置检索最后一个数组值`NSMutableArray`：

```
NSMutableArray *array = [[NSMutableArray alloc] init];
[array addObject:messages];
NSLog(@"array : %@", array); 
```

在这个“数组”中。我有这个低于值。

```
hi, hello, 
```

我只想`hello`从`NSMutableArray`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T08:13:44.713

试试这个

```
NSLog(@"array : %@",[array lastObject]); 
```

它可能对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T08:14:02.197

您应该按照 indexpath at`[array count] - 1`获取最后一个值。

例如，

```
 NSString *str = [NSString stringWithFormat:"%@",[array objectAtIndex:[array count] - 1]];
   NSLog("last object of an array = %@",str); 
```

享受编程！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T08:14:14.163

您可以使用：

```
NSString *str = (NSString *)[array lastObject]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T08:14:59.857

`[array lastObject]`返回数组的最后一个对象。

```
NSArray *arr=[NSArray arrayWithObjects:@"A",@"B",@"C", nil];
NSString *last=[arr lastObject];
NSLog(@"Last obj in string : %@",last); 
```

输出 ：

```
Last obj in string : C 
```

# google-chrome - 获取 chrome 扩展版本失败

> ID：14108919
> 
> 赞同：0
> 
> 时间：2013-01-01T08:10:39.733
> 
> 标签：google-chrome, version, expansion

我正在尝试使用以下代码获取我的 chrome 扩展版本：

```
function getVersion(callback) {
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open('GET', 'manifest.json');
        xmlhttp.onload = function (e) {
            var manifest = JSON.parse(xmlhttp.responseText);
            callback(manifest.version);
        }
        xmlhttp.send(null);
}

getVersion(function (ver) { console.log(ver); }); 
```

问题是，HTTP 请求被发送到我将脚本注入的站点，显然它失败了。

例如，当我的脚本注入[http://prodgame19.lordofultima.com/189](http://prodgame19.lordofultima.com/189)时，HTTP 请求被发送到[http://prodgame19.lordofultima.com/189/manifest.json](http://prodgame19.lordofultima.com/189/manifest.json)。

我究竟做错了什么？

谢谢。

# classpath - 在控制器中使用 ClassPathXmlApplicationContext

> ID：14108930
> 
> 赞同：0
> 
> 时间：2013-01-01T08:12:11.570
> 
> 标签：classpath, autowired

我正在从下面的链接运行示例：

[http://chathurangat.blogspot.se/2011/12/send-email-in-spring-with-gmail.html](http://chathurangat.blogspot.se/2011/12/send-email-in-spring-with-gmail.html)

它工作正常。我的问题是为什么

```
ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("emailConfiguration.xml");
EmailSender emailSender=(EmailSender)context.getBean("emailSenderBean"); 
```

被放置在控制器中？有没有更好的读取xml文件的方法？并创建 bean？

ClassPathXmlApplicationContext 可以自动装配吗？

如何将此示例与 JPA 一起使用？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T20:07:27.537

解决了

只需使用

那么你就不需要在控制器中使用 bean 的声明了。

谢谢

# java - Android 设置|( 文件 ) 配置

> ID：14108931
> 
> 赞同：0
> 
> 时间：2013-01-01T08:12:25.290
> 
> 标签：java, android, android-ndk

我有以下方法在应用程序设置中保存连接字符串，是否有任何 android 文件（如（asp.net 中的 web 配置）处理用户可以“读写”的信息？

```
public static System.String StrConnectionstring
            {
                get 
                {
                    if (DB._StrConnectionstring == null)
                    {
                        return AppSettings.GetConnectionSettings("DSN");
                    }
                    return DB._StrConnectionstring;
                }
                set { DB._StrConnectionstring = value; }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T08:40:37.790

使用共享首选项：

**宣言 ：**

```
public static final String MYPREFS = "MySharedPreferenceFile";
SharedPreferences settings;
SharedPreferences.Editor editor; 
```

**初始化：**

```
settings = context.getSharedPreferences(MYPREFS, 0);
editor = settings.edit(); 
```

**存储值：**

```
editor.putString("Name","test");
editor.commit(); 
```

**要检索值：**

```
settings.getString("Name",""); // here value field is for to specify default value 
```

谢谢。

# sockets - 在孩子中接收事件

> ID：14108933
> 
> 赞同：3
> 
> 时间：2013-01-01T08:12:56.390
> 
> 标签：sockets, select, fork, epoll, libev

我正在使用 libev 编写 tcp 服务器。我在listen（）之后创建套接字并分叉，然后在监听套接字上启动一个libev读取观察器并在观察器回调中接收客户端连接。可能是这样的情况，当两个孩子和父母（或者两个孩子，如果有多个）收到监听套接字变得可读的事件并且两者都将尝试接受（）客户端连接，在这种情况下，其中一个进程将阻塞？我编写了测试程序，似乎只有一个进程接收到 read-ready 事件，但也许我错了？在这种情况下，我可以在哪里阅读有关系统行为的信息？内核如何在进程之间进行负载平衡并决定谁将接收事件？它是后端（选择、epoll 等）和/或特定于操作系统的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T09:10:34.573

很有可能两个进程都将收到来自套接字的准备就绪指示，并且结果都将调用`accept()`。这就是为什么您应该始终将非阻塞文件描述符与基于事件的 API 一起使用的原因之一，例如`socket()`、`poll()`、`epoll()`或`kqueue()`（或 libev，它为其中的一个或多个提供抽象）。如果您使用非阻塞套接字，那么一个孩子将从中获得成功的结果，`accept()`而所有其他孩子将获得一个`EAGAIN`，忽略它，然后继续睡觉而不会造成任何伤害。

# excel - EXCEL VBA 检查条目是否为空或不是“空格”

> ID：14108948
> 
> 赞同：38
> 
> 时间：2013-01-01T08:15:17.137
> 
> 标签：excel, vba, space

**笔记。**使用 .检查是否`TextBox1`为空很容易`TextBox1.Value = ""`。

但问题是当用户点击 时`spacebar`，`TextBox1`仍会将其识别为一个值。在这种情况下，我的数据将显示为一个空单元格，`space`里面有 1。所以我的**问题**是，有没有什么方法可以检查`TextBox1.value`空，也不包括`space`是否有 1 或更多`space`？百万感谢大家。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-01T08:18:10.557

一个常见的技巧是这样检查：

```
trim(TextBox1.Value & vbnullstring) = vbnullstring 
```

这适用于空格、空字符串和真正的空值

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-01-01T08:38:50.477

我能想到的最简洁的版本

```
Len(Trim(TextBox1.Value)) = 0 
```

如果您需要多次执行此操作，请将其包装在一个函数中

```
Public Function HasContent(text_box as Object) as Boolean
    HasContent = (Len(Trim(text_box.Value)) > 0)
End Function 
```

用法

```
If HasContent(TextBox1) Then
    ' ... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-01T08:21:58.083

这是检查值是否存在的代码。

```
If Trim(textbox1.text) <> "" Then
     'Your code goes here
Else
     'Nothing
End If 
```

我认为这会有所帮助。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-04-24T12:46:16.807

您可以使用以下代码检查文本框对象是否为空/空

```
'Checks if the box is null

If Me.TextBox & "" <> "" Then

        'Enter Code here...

End if 
```

# wpf - 在 wpf 中启用和禁用按钮

> ID：14108949
> 
> 赞同：4
> 
> 时间：2013-01-01T08:15:25.020
> 
> 标签：wpf, button, mouseevent

我有几个`Buttons`在屏幕上。单击一个休息时，应禁用`Button`所有其他休息。`Buttons`有没有办法创建一个方法并设置启用和禁用 all`Buttons`而不是启用和禁用单个`Buttons`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T09:08:43.710

此方法假定按钮位于同一个网格上，它会反转每个按钮的启用状态，但单击的按钮除外。

**主窗口.xaml**

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="10,10,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button_Click"  />
        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="10,43,0,0" Name="button2" VerticalAlignment="Top" Width="75" Click="button_Click" />
        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="10,76,0,0" Name="button3" VerticalAlignment="Top" Width="75" Click="button_Click" />
        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="10,109,0,0" Name="button4" VerticalAlignment="Top" Width="75" Click="button_Click" />
        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="10,142,0,0" Name="button5" VerticalAlignment="Top" Width="75" Click="button_Click" />
    </Grid>
</Window> 
```

**主窗口.xaml.cs**

```
private void button_Click(object sender, RoutedEventArgs e)
{
    Button btn = (Button)sender;
    foreach (FrameworkElement  item in ((Panel)btn.Parent).Children )
    {
        if (item is Button)
        {
            if (btn.Name != item.Name)
                item.IsEnabled = !item.IsEnabled;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T09:12:51.113

编写一种处理所有按钮单击的方法。这是一个例子：

```
Private Sub ButtonsClick(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles button1.Click ,button2.Click ,button3.Click

button1.IsEnabled = (button1 is sender)
button2.IsEnabled = (button2 is sender)
button3.IsEnabled = (button3 is sender)

End Sub 
```

编辑：我忽略了您不想启用/禁用单个按钮的事实。所以我会推荐马克回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T08:42:29.837

我有一个想法，首先创建一个禁用所有按钮的方法。每当单击任何按钮时首先调用该方法，以便禁用所有按钮，然后为该单个按钮单击事件处理程序方法启用您刚刚单击的按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T11:20:59.170

我用 Christian 在评论中提供的链接完成了 Mark Hall 的回答。你可能会喜欢。
按钮无需位于一个 Grid 中或处理其所有单击事件。

在父窗口中处理`PreviewMouseLeftButtonDown`事件，而不是：

```
void window_PreviewMouseLeftButtonDown(object sender, MouseEventArgs e)
{
Window win = sender as Window;
if (e.OriginalSource is Button)
{
     Button btn=(Button)e.Source;
     foreach(Button button0 in FindVisualChildren<Button>(win))
     {
        if (btn != button0)
            button0.IsEnable = false;
     }
}
} 
```

它使用以下方法。请参阅[按类型查找 WPF 窗口中的所有控件](https://stackoverflow.com/questions/974598/find-all-controls-in-wpf-window-by-type/978352#978352)

```
public static IEnumerable<T> FindVisualChildren<T>(DependencyObject depObj) where T : DependencyObject
{
if (depObj != null)
{
    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
    {
        DependencyObject child = VisualTreeHelper.GetChild(depObj, i);
        if (child != null && child is T)
        {
            yield return (T)child;
        }

        foreach (T childOfChild in FindVisualChildren<T>(child))
        {
            yield return childOfChild;
        }
    }
}
} 
```

# asp.net-mvc - 如何使用 ASP.MVC 4 向 HTML.BeginForm 添加属性？

> ID：14108951
> 
> 赞同：3
> 
> 时间：2013-01-01T08:16:05.280
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在使用以下代码：

```
@using (Html.BeginForm(null, null, 
    new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, 
    new { data-href = "/User/Account/Login"})) 
```

谁能告诉我它有什么问题。我收到一条指向 data-href 的错误消息并说：

无效的匿名类型成员声明符。必须使用成员分配、简单名称或成员访问来声明匿名类型成员

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T08:23:36.417

(`-`破折号) 不是有效的 C# 标识符字符。使用`_`（下划线），它会被转换成`-`这样你就会`data-href`在生成的 HTML 中得到正确的结果。

```
@using (Html.BeginForm(null, null, 
    new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, 
    new { data_href = "/User/Account/Login"})) 
```

# json - 操作非常大的 json 文件的有效方法？

> ID：14108953
> 
> 赞同：2
> 
> 时间：2013-01-01T08:16:31.377
> 
> 标签：json, extract

我正在网上搜索从非常大的 json 文件中提取数据的方法，
一些堆栈让我可以导入 json 文件，并在数据上执行 xpath/sql 之类的脚本
以从中提取数据。
你能在这样的开发堆栈上推荐我吗？
我确实想避免在 c++/java 中加载 json 并对此进行编程。
MongoDB？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T08:29:26.173

MongoDB 非常适合此类任务。`mongoimport`您可以使用该实用程序将数据导入 MongoDB 数据库

```
mongoimport --db DB_NAME --collection COLLECTION_NAME --file YOUR_JSON_FILE 
```

然后，您可以使用`mongo`客户端浏览数据。

```
$ mongo
> use DB_NAME
> db.COLLECTION_NAME.find() 
```

您可能需要索引某些字段以便更快地查找

```
> db.COLLECTION_NAME.ensureIndex({FIELD_NAME:1}) 
```

mongodb[手册](http://docs.mongodb.org/manual/contents/)对入门很有帮助。

# javascript - 按搜索查询过滤数组

> ID：14108954
> 
> 赞同：4
> 
> 时间：2013-01-01T08:16:32.867
> 
> 标签：javascript

如何过滤具有特定搜索词的数组？例如——我们有一个数组 [Tom Harry,Tom John,John Glen,Tom Harward] 当我们搜索“Tom H”时，应该只有 Tom Harry 和 Tom Harward 作为输出 [Tom Harward,Tom Harry]；使用 Javascript

```
var k=0;
filter=[];
var fc=input.charAt(0);
var sc=input.charAt(1);
for(var i=0;i<array.length;i++)
{
    if(array[i].charAt(0)===fc)
    {
        if(array[i].charAt(1)===sc || sc.charAt(1)=="" )
        {       
            filter[k]=[];
            filter[k]=array[i];
            filter[k]=array[i];
            k++;    
        }
        else
        {
            continue;
        }
    }
    else
    {
        continue;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T08:45:52.663

如果您正在使用支持 JavaScript 1.6 的浏览器，[Array.filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)是您的选择。您的问题可以通过以下单行来解决（当然您可以通过引入带`search_pattern`参数的函数来概括它）：

```
['Tom Harry','Tom John','John Glen','Tom Harward'].filter(function(name){return name.match(/Tom H/);}); 
```

如果您希望它也适用于 IE8 或更低版本的旧浏览器，您可以轻松实现`filter`（上面的链接包含实现）。顺便说一句，建议使用提供许多集合操作功能的下划线库，包括[`filter`](http://documentcloud.github.com/underscore/#filter).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-18T14:19:05.067

ES6 实现，带有[箭头函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)和[startsWith](https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/String/startsWith)：

```
['Tom Harry','Tom John','John Glen','Tom Harward'].filter(name => name.startsWith('Tom H')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T08:33:34.107

您可以在 for 循环中使用 search() 方法。

## 关于 search() 方法的信息：http: [//www.w3schools.com/jsref/jsref_search.asp](http://www.w3schools.com/jsref/jsref_search.asp)

例子：

```
for(var i=0; i < nameOfArray.length; i++){
    if(nameOfArray[i].search('Tom H') > -1){
       resultArray.push(nameOfArray[i]); 
    }
} 
```

此代码将遍历数组中的每个元素，如果您输入的文本与您输入的部分匹配（通过搜索方法），它将将该项目从数组中推送到结果数组中。这应该创建一个包含所有匹配结果的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T08:36:34.517

```
 <script type="text/javascript">

  var src1= ["Tom Harry","Tom John","John Glen","Tom Harward"];

alert(searchStringInArray (src1,'Tom H') );

function searchStringInArray (src1,searched) 
{
  var res=""
  for (var j=0; j<src1.length; j++) {
    if (src1[j].match (searched)) 
    {
    res=res+src1[j]+","
    }
}
return res;
} 
</script> 
```

使用这个伙伴

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T08:22:05.387

您可以检查 String.match() 或 String.indexOf() 方法。

```
var s="Tom Harry"
 if (s.match(/Tom H.*/)) {
  // do something
} 
```

或者你可以使用 indexof()，就像

```
s.indexOf("Tom H") 
```

然后检查索引。如果它 >= 0，则它包含该字符串。

# php - Magento : 添加客户默认账单地址

> ID：14108956
> 
> 赞同：2
> 
> 时间：2013-01-01T08:17:35.060
> 
> 标签：php, magento

我正在尝试将客户从旧站点导入我的新 magento 安装，并希望将客户地址设置为 magento 客户默认帐单地址，我尝试过

```
$customer = $this->getCustomerModel();
$address = Mage::getModel('customer/address');
$customer->addAddress($results[0]['address']); //this says trying to save invalide object
$address ->addAddress($results[0]['address']); //this says undefined method 
```

$results[0]['address'] 此字段包含街道地址我还有城市、州、邮政编码、邮政编码

关于如何将我的客户地址设置为其默认帐单或送货地址的任何想法..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-01T10:31:48.263

好吧，我在 Anoop 先生的帮助下找到了它。

```
$_custom_address = array (
    'firstname' => 'Branko',
    'lastname' => 'Ajzele',
    'street' => array (
        '0' => 'Sample address part1',
        '1' => 'Sample address part2',
    ),
    'city' => 'Osijek',
    'region_id' => '',
    'region' => '',
    'postcode' => '31000',
    'country_id' => 'HR', /* Croatia */
    'telephone' => '0038531555444',
);
$customAddress = Mage::getModel('customer/address');
//$customAddress = new Mage_Customer_Model_Address();
$customAddress->setData($_custom_address)
            ->setCustomerId($customer->getId())
            ->setIsDefaultBilling('1')
            ->setIsDefaultShipping('1')
            ->setSaveInAddressBook('1');
try {
    $customAddress->save();
}
catch (Exception $ex) {
    //Zend_Debug::dump($ex->getMessage());
} 
```

# iphone - 动态更改 UITableView 单元格中 UIButton 的图像

> ID：14108959
> 
> 赞同：3
> 
> 时间：2013-01-01T08:18:24.063
> 
> 标签：iphone

我`UIButton`在单元格中动态添加并`UIButton`在单击时更改图像`UIBarButtonItem` 如何更改？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"Display"] ; 
    [cell.textLabel setText:[NSString stringWithFormat:@"%@" ,[arrItemList objectAtIndex:indexPath.row]]];

    UIButton *btnCheck = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    btnCheck.frame = CGRectMake(6.0f, 2.0f, 32.0f, 25.0f);
    [btnCheck setTitle:@"" forState:UIControlStateNormal]; 
    [btnCheck addTarget:self action:nil forControlEvents:UIControlEventTouchUpInside];
    [cell addSubview:btnCheck]; 

    return cell;
}
//Here IBAction for Bar Button Item
//when ever user click on BarButton then set the image of all btnCheck
-(IBAction)bbtnCheck:(id)sender
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T09:19:44.183

假设您的问题是当单击条形按钮时如何在表格的每个单元格中更改按钮的图像，我建议如下：

在 tableView:cellForRowAtIndexPath 中，添加：

```
btnCheck.tag = MY_BUTTON_TAG_NUMBER; 
```

然后，当单击条形按钮项时，循环遍历可见单元格并使用按钮的标签来识别它并更新其图像。

```
-(IBAction)bbtnCheck:(id)sender {
 for (UITableViewCell *cell in self.tableView.visibleCells) {
   UIButton *button = [cell viewWithTag:MY_BUTTON_TAG_NUMBER];
   [button setImage:[UIImage imageNamed:SOME_NEW_IMAGE] forState:UIControlStateNormal];
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T08:53:59.880

在那个 bbtnCheck 你必须得到那个 tableView 的实例（即特定的单元格）..然后你可以在那个特定的单元格上添加按钮..请检查这个....

```
-(IBAction)bbtnCheck:(id)sender
{
     NSIndexPath *indexpath = [NSIndexPath indexPathForRow:YourRow inSection:YourSection]; // you have to set Row and Section according to your requirement
     UITableViewCell *cellNew = [self.tblComments cellForRowAtIndexPath:indexpath];
    for (UIButton *btn in [cellNew.contentView subviews]) 
    {
        if ([btn isKindOfClass:[UIButton class]]) 
        {
            [btn setImage:[UIImage imageNamed:@"yourImage.png"] forState:UIControlStateNormal];
        }
    }    
} 
```

# android - 如何禁用 Facebook API 警报？

> ID：14108961
> 
> 赞同：1
> 
> 时间：2013-01-01T08:19:23.883
> 
> 标签：android, facebook

我正在使用带有 facebook-connect-plugin 的 PhoneGap 构建一个 Android 应用程序以使用 Facebook 登录。一切正常，但是当用户取消（例如，在 Facebook 应用程序中按下设备后退按钮）和查看带有消息“cardova login fail！Cancelled”的警报的登录窗口时，我面临一个问题。

我没有任何解决方案来处理这种情况（如果你有，请提出建议）所以我想禁用警报（我不希望用户看到 Facebook API 警报）并使用 FB.getLoginStatus 来检查用户是否已登录。

# android - 无法播放（使用 AudioTrack）使用 Visualizer 捕获的 PCM 音频

> ID：14108967
> 
> 赞同：0
> 
> 时间：2013-01-01T08:20:37.787
> 
> 标签：android, media-player, visualizer, audiotrack

我正在尝试使用 Visualizer 在 MediaPlayer 中捕获播放的文件并使用 AudioTrack 播放它。但捕获的数据只是噪声。

这是我的代码。

```
mPlayer = MediaPlayer.create(this, R.raw.call_ringtone);
                mPlayer.setLooping(false);
                mPlayer.start();
               // mPlayer.setVolume(0, 0);
                int minSize =AudioTrack.getMinBufferSize( 44100, AudioFormat.CHANNEL_CONFIGURATION_STEREO, AudioFormat.ENCODING_PCM_16BIT );        
                 mySong = new AudioTrack( AudioManager.STREAM_MUSIC, 44100,AudioFormat.CHANNEL_CONFIGURATION_STEREO, AudioFormat.ENCODING_PCM_16BIT, minSize, AudioTrack.MODE_STREAM);

                mVisualizer = new Visualizer(mPlayer.getAudioSessionId());
                mVisualizer.setCaptureSize(Visualizer.getCaptureSizeRange()[1]);

            Visualizer.OnDataCaptureListener captureListener = new Visualizer.OnDataCaptureListener()
            {
                Boolean toPlay = false;
                @Override
                public void onWaveFormDataCapture(Visualizer visualizer, byte[] bytes,
                        int samplingRate)
                {
                     myl.add(bytes);

                }

                @Override
                public void onFftDataCapture(Visualizer visualizer, byte[] bytes,
                        int samplingRate)
                {
                    System.out.println("onFftDataCapture");
                }
            };

            mVisualizer.setDataCaptureListener(captureListener,
                    Visualizer.getMaxCaptureRate() / 2, true, false);

            mVisualizer.setEnabled(true);
            mPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener()
            {
                @Override
                public void onCompletion(MediaPlayer mediaPlayer)
                {
                    mVisualizer.setEnabled(false);
                    stopIt = true;
                }
            });

            new Thread(new Runnable() {

                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    try {
                        Thread.sleep(30000);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    mySong.play();
                    int j=0;
                    while(j<myl.size())
                    {
                    mySong.write(myl.get(j), 0, myl.get(j).length);
                    Log.d("writing", Integer.toString(j)+" : "+Integer.toString(temp.length));
                    j++;
                    }
                }
            }).start(); 
```

字节只是产生原始白噪声。OnWaveForm 方法中的数据如何具有 PCM 格式？我怎么能从中得到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T07:32:34.847

尝试使用音池而不是音轨

# javascript - 从html中的json更改天气图标

> ID：14108971
> 
> 赞同：0
> 
> 时间：2013-01-01T08:21:38.693
> 
> 标签：javascript, jquery, html, json

我的电脑上有天气状况的图标

我想通过我的图标更改默认图标我该怎么办

在 json 文件中有变量，例如：“icon”：“partlycloudy”

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<body>
<img id='wicon'><img>
<script>
jQuery(document).ready(function($) {
 var state = 'CA';
 var city = 'San_Francisco';
 var URL = 'http://api.wunderground.com/api/102376e7c0e1c995/geolookup/conditions/q/' + state + '/' + city + '.json';
$.ajax({ url : URL, 
dataType : "jsonp", 
success : function(parsed_json) { 
var location = parsed_json['current_observation']['display_location']['full']; 
var temp = parsed_json['current_observation']['temperature_string'];
var wicon = parsed_json['current_observation']['icon_url'];
</script>
</body>
</head>
</html> 
```

我想通过像这样在链接中添加变量来更改天气状况图标

[http://icons-ak.wxug.com/i/c/k/](http://icons-ak.wxug.com/i/c/k/) '; + 图标变量 + '.gif

```
jQuery(document).ready(function($) {
 var state = 'CA';
 var city = 'San_Francisco';
 var URL = 'http://api.wunderground.com/api/102376e7c0e1c995/geolookup/conditions/q/' + state + '/' + city + '.json';
$.ajax({ url : URL, 
dataType : "jsonp", 
success : function(parsed_json) { 
var location = parsed_json['current_observation']['display_location']['full']; 
var temp = parsed_json['current_observation']['temperature_string'];
var wicon = parsed_json['current_observation']['icon_url'];
var humidity = parsed_json['current_observation']['relative_humidity'];
var wind = parsed_json['current_observation']['wind_string'];
var pressure = parsed_json['current_observation']['pressure_mb'];
var visibility = parsed_json['current_observation']['visibility_km'];
var weicon = parsed_json['current_observation']['icon'];
$("#meteo").text(temp);
$( '<img>' ).attr( 'src', wicon ).appendTo( '#wicon' );
$("#location").text(location);
$("#humidity").text(humidity);
$("#wind").text(wind);
$("#pressure").text(pressure);
$("#visibility").text(visibility);
} }); }); 
```

var wicon 是天气图标的链接，var weicon 是图标的名称

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T08:35:10.530

只需将其添加到成功功能

```
\\ get the element that we will change
var pic = document.getElementById('wicon');
\\ update the img to new src
pic.src = wicon 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T08:35:30.207

我猜你应该把你的代码改成这个，这取决于 wicon 的值可能是什么

```
<script>
    jQuery(document).ready(function($) {
        var state = 'CA';
        var city = 'San_Francisco';
        var URL = 'http://api.wunderground.com/api/102376e7c0e1c995/geolookup/conditions/q/' + state + '/' + city + '.json';
        $.ajax({
            url: URL,
            dataType: "jsonp",
            success: function(parsed_json) {
                var location = parsed_json['current_observation']['display_location']['full'];
                var temp = parsed_json['current_observation']['temperature_string'];
                var wicon = parsed_json['current_observation']['icon_url'];

                if(wicon !=null) {
                    $("#icoImg").attr("src", wicon);
                }
            }
        });
    }

    );
            </script>

<body>

    <img id="icoImg" src="#"/>
</body> 
```

# javascript - 使用jquery的登录页面不重新提交

> ID：14108973
> 
> 赞同：1
> 
> 时间：2013-01-01T08:21:46.680
> 
> 标签：javascript, jquery, jquery-mobile

问题是在登录页面上，在提交了不正确的条目后，ajax 请求在按下提交时不会第二次通过。

我已经通过 StackExchange 寻找我的问题的答案，并查看了诸如[为什么我的 jQuery 表单不会重新提交之类的链接？](https://stackoverflow.com/questions/7142851/why-wont-my-jquery-form-resubmit)以及[jQuery 和 AJAX 登录表单](https://stackoverflow.com/questions/1271880/jquery-ajax-login-form?rq=1)等等。看起来我需要取消绑定提交的变量，但不知道该怎么做。

**HTML**

```
<div data-role="page" id="login">
  <div data-role="header" data-position="inline" data-theme="b">    
    <h1>My login</h1>
  </div><!-- /header -->
  <div data-role="content">
    <form method="post" id="loginform">
        <label for="username">Username:</label> <input type="text" name="username" id="username" value=""  />
        <label for="passwd">Password:</label> <input type="password" name="passwd" id="passwd" value=""  />
        <input type="submit" value="Login" />
    </form>
  </div><!-- /content -->
</div><!-- /login page --> 
```

**JavaScript**：

```
$(document).ready(function() { 
  $("#loginform").on('submit',function(event){
    var $form = $(this),
      serializedData = $form.serialize();

    // fire off the request to /form.py
    $.ajax({
      url: "https://mywebsite/cgi-bin/form.py",
      type: "post",
      data: serializedData,

      // callback handler that will be called on success
      success: function(response, textStatus, jqXHR){
        console.log(response);
        // If login is unsuccessful, log message and return to login screen again
        if (response == "INVALID_USER\n") {
          alert("sorry, try again");
        } else {
          // Login successful - do something
        }
      },

      // callback handler that will be called on error
      error: function(jqXHR, textStatus, errorThrown){
        console.log(
          "The following error occured: "+
            textStatus, errorThrown);
      },

      // callback handler that will be called on completion
      // which means, either on success or error
      complete: function(){
        //----- DO I NEED TO UNBIND SOMETHING HERE?
        var dummy = 1;
      }
    }); // end of ajax call
}); // end of submit handler
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T08:37:51.400

您会尝试`return false`在事件处理程序结束之前添加吗？使用 return false 可以防止事件触发并防止用户在未填写正确的必填字段的情况下继续操作。

```
$("#loginform").on('submit',function(event){

    ...

    return false;
}); 
```

此外，服务器返回什么数据类型？例如，如果服务器返回 JSON，那么您应该添加`dataType: 'json'`AJAX 代码。如果没有指定，jQuery 将尝试根据响应的 MIME 类型推断它。

也许您可以使用[萤火虫](https://addons.mozilla.org/el/firefox/addon/firebug/)来找出是否发生任何错误。

# javascript - AngularJS - 将第 3 方异步加载的库包装为服务

> ID：14108979
> 
> 赞同：8
> 
> 时间：2013-01-01T08:22:58.243
> 
> 标签：javascript, angularjs, asynchronous

我有一个异步加载到我的页面的第三方库，我想将它用作服务。

如何将加载代码包装在角度服务中？一般来说，最佳做法是什么？

目前我的方法是这样的：

```
angular.module('myAPIServices', []).
factory('MyAPI', function () {
    return {
        \\ API is declared at the loaded script
        doStuff:function(){$window.API.doStuff()} 
    };
}); 
```

然后在 Angular 范围之外的页面上

```
(function () {
    var js = document.createElement('script');
    var loc = document.getElementsByTagName('script')[0];
    js.async = true;
    js.src = "myAPI.js";
    loc.parentNode.insertBefore(js, loc);
}()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T08:57:58.927

一种可能性是将您的库调用包装在[$q](http://docs.angularjs.org/api/ng.%24q)中。此 Angular 服务返回一个承诺，您可以在库完全加载时解决该承诺。

您的`doStuff`功能将类似于：

```
doStuff: function() {
   var deferred = $q.defer();

   myAsyncCall().success(function(data) {
      deferred.resolve(data);
   });
   return deferred.promise;
} 
```

在您的控制器中，您使用该`then()`功能来处理结果。

第二种可能性是回调。这是两种类型的[示例](http://jsfiddle.net/7bNAd/)。

If your library is manipulating the DOM, it is better to wrap it in a directive.

# blackberry - 如何在黑莓的弹出屏幕中添加自定义管理器

> ID：14108980
> 
> 赞同：-1
> 
> 时间：2013-01-01T08:22:59.180
> 
> 标签：blackberry

我正在尝试在黑莓中添加一个自定义窗口，但在此之前我试图在该弹出屏幕中添加一个自定义标签，以满足我可以添加或无法添加的满意。所以当我补充说我面临 IllegalArguementException 错误的问题时，你能告诉我如何解决这个问题。我正在这样做。

看到这是我用来添加弹出窗口的 MYScreen 类。因此，当我单击添加在屏幕中的那个按钮时，就会添加弹出窗口。

```
public final class MyScreen extends MainScreen implements FieldChangeListener
{
    private ButtonField btn;

public MyScreen()
    {        
        setTitle("MyTitle");

        btn = new ButtonField ("press");
        btn.setChangeListener(this);

        add(btn) ;
    }

public void fieldChanged(Field field, int context) 
{
    if ( field == btn )
    {       
    Dialog.inform("hello");

    pop_manager manager_object = new pop_manager(0);

    UiApplication.getUiApplication().pushScreen( new up_pop_test( manager_object ) );               
    }
}
} 
```

所以在这个我添加了 new_up_pop_test 类，它是：

```
public class up_pop_test extends PopupScreen
{
public up_pop_test( pop_manager delegate)
{
    super(delegate);

    add(delegate);
}
} 
```

pop_manager 是：

```
public class pop_manager extends Manager
{
protected pop_manager(long style)
{
    super(style);
}

protected void sublayout(int w, int h) 
{
    Field f = getField(0);
    layoutChild( f , w/3+w/3 , 50 ) ;
    setPositionChild ( f , w/33 + w/33 , w/67+w/104 );

    setExtent(w,h);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:53:09.840

你不需要像你试图做的那样做那么多的工作......

您所需要的只是一个**PopupScreen**，您可以随意自定义它，就像普通屏幕一样。

```
public class MyPopup extends PopupScreen  {

    public MyPopup() {
        super(new VerticalFieldManager());
        LabelField infoLabel = new LabelField("Here is a label in a popup");
        add(infoLabel);   
    }
} 
```

为了调用它，您需要做的就是像普通屏幕一样推送。

```
 UiApplication.getUiApplication().pushScreen(new MyPopup()); 
```

您无法控制**Dialog**类，这些是用于通知用户或提出问题等简单操作，并且是标准化的

# php - PHP 'QUERY_STRING' 没有返回任何东西

> ID：14108982
> 
> 赞同：0
> 
> 时间：2013-01-01T08:23:19.630
> 
> 标签：php, string

我在我的 php 代码中使用以下内容：

```
$file="query.txt";
$f=fopen($file,'a');
fwrite($f,"Query String:".$_SERVER['QUERY_STRING']."\n");
fclose($f); 
```

它从不返回任何东西。我只是想在有人访问时记录查询的 url（即[http://example.com/index.php?q=string](http://example.com/index.php?q=string)。其他 $_SERVER 字段似乎工作得很好，它似乎只是查询字符串不起作用。也许我需要在我的 .htaccess 中设置一些东西？

我希望有人能回答如何让这个信息显示出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T08:53:40.690

这解决了问题：

```
$_SERVER['REDIRECT_QUERY_STRING'] 
```

来自[https://stackoverflow.com/a/11618256/1125006的解决方案](https://stackoverflow.com/a/11618256/1125006)

# api - 如何在 PHP 中生成 QuickBlox 身份验证签名？

> ID：14108986
> 
> 赞同：5
> 
> 时间：2013-01-01T08:23:43.807
> 
> 标签：api, quickblox

我想访问 QuickBlox 中的 API，但在此之前我们需要对我们的应用程序进行身份验证并获取会话令牌，并且使用会话令牌我们可以访问其他 API。但问题是，当我使用 QuickBlox 网站上提供的所需规范发送身份验证请求时，我收到错误消息：

> {"errors":{"base":["意外签名"]}}

生成签名的参数是：

```
application_id=22&auth_key=wJHd4cQSxpQGWx5&nonce=33432&timestamp=1326966962 
```

然后我们将其转换为 HMAC-SHA 格式：

```
hash_hmac( 'sha1', $signatureStr , $authSecret); 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T09:25:21.090

以下是如何创建 QuickBlox 会话的完整示例：

```
<?php
// Application credentials
DEFINE('APPLICATION_ID', 92);
DEFINE('AUTH_KEY', "wJHdOcQSxXQGWx5");
DEFINE('AUTH_SECRET', "BTFsj7Rtt27DAmT");

// User credentials
DEFINE('USER_LOGIN', "emma");
DEFINE('USER_PASSWORD', "emma");

// Quickblox endpoints
DEFINE('QB_API_ENDPOINT', "https://api.quickblox.com");
DEFINE('QB_PATH_SESSION', "session.json");

// Generate signature
$nonce = rand();
$timestamp = time(); // time() method must return current timestamp in UTC but seems like hi is return timestamp in current time zone
$signature_string = "application_id=".APPLICATION_ID."&auth_key=".AUTH_KEY."&nonce=".$nonce."&timestamp=".$timestamp."&user[login]=".USER_LOGIN."&user[password]=".USER_PASSWORD;

echo "stringForSignature: " . $signature_string . "<br><br>";
$signature = hash_hmac('sha1', $signature_string , AUTH_SECRET);

// Build post body
$post_body = http_build_query(array(
                'application_id' => APPLICATION_ID,
                'auth_key' => AUTH_KEY,
                'timestamp' => $timestamp,
                'nonce' => $nonce,
                'signature' => $signature,
                'user[login]' => USER_LOGIN,
                'user[password]' => USER_PASSWORD
                ));

// $post_body = "application_id=" . APPLICATION_ID . "&auth_key=" . AUTH_KEY . "&timestamp=" . $timestamp . "&nonce=" . $nonce . "&signature=" . $signature . "&user[login]=" . USER_LOGIN . "&user[password]=" . USER_PASSWORD;

 echo "postBody: " . $post_body . "<br><br>";
// Configure cURL
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, QB_API_ENDPOINT . '/' . QB_PATH_SESSION); // Full path is - https://api.quickblox.com/session.json
curl_setopt($curl, CURLOPT_POST, true); // Use POST
curl_setopt($curl, CURLOPT_POSTFIELDS, $post_body); // Setup post body
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); // Receive server response

// Execute request and read responce
$responce = curl_exec($curl);

// Check errors
if ($responce) {
        echo $responce . "\n";
} else {
        $error = curl_error($curl). '(' .curl_errno($curl). ')';
        echo $error . "\n";
}

// Close connection
curl_close($curl);
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:48:16.333

我在 php 上编写了代码片段，它会生成签名。效果很好

这是我的测试应用程序的凭据：

```
$application_id = 92;
$auth_key = "wJHdOcQSxXQGWx5";
$authSecret = "BTFsj7Rtt27DAmT";

$nonce = rand();
echo "<br>nonce: " . $nonce;

$timestamp = time();
echo "<br>timestamp: " . $timestamp ."<br>";

$stringForSignature = "application_id=".$application_id."&auth_key=".$auth_key."&nonce=".$nonce."&timestamp=".$timestamp;
echo $stringForSignature."<br>";

$signature = hash_hmac( 'sha1', $stringForSignature , $authSecret);
echo $signature; 
```

希望这有帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T05:05:45.683

**问题解决了**

我的请求参数有问题。

```
$params = "application_id=$application_id&auth_key=$auth_key&timestamp=$timestamp&nonce=$nonce&signature=$signature&**auth_secret=$authSecret**"; 
```

在这个参数中，我传递了一个额外的参数，`my auth secret key`它不应该存在。我删除了这个参数，现在它可以工作了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T18:45:00.597

您必须使用自己的应用程序参数：

*   application_id
*   授权键

和随机“nonce”和当前时间戳（不是来自示例，您可以在此站点[http://www.unixtimestamp.com/index.php](http://www.unixtimestamp.com/index.php)上获取当前时间戳）

您的代码是正确的，但您必须设置正确的参数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-19T05:39:06.300

我们使用 php，接下来的代码对我们很有效：

```
<?php

$userLogin = '{YOUR_QB_USER}';
$userPassword = '{YOUR_QB_PASSWORD}';

$body = [
    'application_id' => '{YOUR_QB_APPLICATION_ID}',
    'auth_key' => '{YOUR_QB_AUTH_KEY}',
    'nonce' => time(),
    'timestamp' => time(),
    'user' => ['login' => $userLogin, 'password' => $userPassword]
];
$built_query = urldecode(http_build_query($body));
$signature = hash_hmac('sha1', $built_query , '{YOUR_QB_APP_SECRET}');
$body['signature'] = $signature;
$post_body = http_build_query($body);
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, 'https://{YOUR_QB_HOST}/session.json');
curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_POSTFIELDS, $post_body);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
$response = curl_exec($curl);
$token = json_decode($response, true)['session']['token'];
printf('Your token is: %s %s', $token, PHP_EOL); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-18T19:05:12.987

1）您应该发送请求以正确的网址。

到 [https://api.quickblox.com/auth.json](https://api.quickblox.com/) **_**

而是 [https://api.quickblox.com/session.json](https://api.quickblox.com/session.json)

2）您应该使用它来修复 SSL 问题。

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false)

# android - 鉴于不再支持 HONEYCOMB BOOT COMPLETED，我如何才能发现我的设备已重新启动？

> ID：14108996
> 
> 赞同：0
> 
> 时间：2013-01-01T08:26:26.900
> 
> 标签：android, broadcastreceiver, bootcompleted

我正在 Android 4.0.3 中开发应用程序。[根据Google 的文档](http://developer.android.com/about/versions/android-3.1.html#api)，我读到不再支持 HONEYCOMB BOOT COMPLETED 事件。

鉴于此，我怎样才能发现我的设备已重新启动？

代码 -

Java类：-

```
public class MyStartupIntentReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
        Logger.i("Device", "REBOOT");
        Logger.i("Device", "REBOOT");
        Logger.i("Device", "REBOOT");
        Logger.i("Device", "REBOOT");
        Logger.i("Device", "REBOOT");
    }
} 
```

清单文件：-

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<receiver android:name="MyStartupIntentReceiver" >
    <intent-filter>
       <action android:name="android.intent.action.BOOT_COMPLETED" />
       <category android:name="android.intent.category.HOME" />
    </intent-filter>
</receiver> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T08:40:15.820

抱歉，但也许您对文档有误，请确保您`<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>`在清单中包含许可。我在许多应用程序中使用此广播，它们效果很好。

`BOOT_COMPLETE`确保您也知道在安装外部存储之前将此信息 发送到应用程序。因此，如果应用程序安装到外部存储，它将不会收到`BOOT_COMPLETE`广播消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:30:32.750

> 我正在 Android 4.0.3 中开发应用程序。根据 Google 的文档，我已经读到不再支持 HONEYCOMB BOOT COMPLETED 事件。

您误解了文档。`BOOT_COMPLETED`支持。但是，它确实需要手动运行应用程序的某些组件，然后才能进行任何注册`BroadcastReceiver`。通常，这是通过启动活动来完成的。因此，如果您只是安装应用程序并重新启动设备，您将无法在启动时获得控制权。

您可以[在 Android 3.1 发行说明的“已停止应用程序上的启动控件”](http://developer.android.com/about/versions/android-3.1.html#launchcontrols)以及[此博客文章](http://commonsware.com/blog/2011/07/05/boot-completed-regression.html)中了解更多相关信息。

# api - 如何使用其 API 删除 Imageshack 上的图像

> ID：14108998
> 
> 赞同：0
> 
> 时间：2013-01-01T08:26:36.013
> 
> 标签：api, imageshack

我正在尝试使用 Imageshack api 删除上传到我帐户的图像。

我已经成功地使用 API 将图像上传到它。

```
https://www.imageshack.us/upload_api.php?url=[URL_OF_THE_IMAGE]&key=[MY_KEY] 
```

我可以使用标准接口删除上传的图像。

任何使用 API 的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T20:51:34.853

我通过执行以下操作来管理它：

首先登录获取一个auth_token：

```
HTTP POST
https://api.imageshack.us/v1/user/login?username=YOUR_USERNAME&password=YOUR_PASSWORD 
```

从响应中解析“auth_token”

然后删除：

```
HTTP DELETE
https://api.imageshack.us/v1/images/SERVER/FILENAME?auth_token=AUTHTOKEN 
```

除了 AUTHTOKEN 之外，您还需要包含 SERVER 和 FILENAME，我将这些存储在 files.server 和 files.image.filename 中，它们会在对上传 API 调用的响应中返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T16:53:41.520

Jamie Clark 的解决方案是您所需要的，使用适当的 v1 api。您的示例脚本仍在使用旧 API[中的发布方法，如此处所述](https://code.google.com/p/imageshackapi/wiki/ImageshackAPI)。那个不公开任何删除方法。Jamie 所描述[的是目前的 API，记录在此处](http://api.imageshack.us/)。目前尚不清楚 API 密钥是否相同，但我猜不是 - 我的新密钥似乎不适用于这个旧调用，并且来自该谷歌代码页的用于请求 API 密钥的链接已失效。

# c# - 错误：流不支持并发IO读写操作

> ID：14108999
> 
> 赞同：1
> 
> 时间：2013-01-01T08:26:42.770
> 
> 标签：c#, concurrency, stream, streamreader

我正在尝试从我的 C# Web 应用程序登录到网站以直接从应用程序发送电子邮件，而不是让用户亲自访问该网站。

**注意：该网站，即使在同一会话期间，我也在尝试登录每次加载页面`id`时的更改。`textboxes`因此，我决定阅读页面源代码，提取`id`文本框的内容，然后`id`在发布消息时使用它。**

```
public partial class sender : System.Web.UI.Page
{
    string userID, userPwd, recepsID, msgText, loginResponseString, sessionCode, queryCode;
    private HttpWebRequest initRequest, loginRequest, msgRequest;
    private HttpWebResponse initResponse, loginResponse;
    private Object lockObj = new Object();

    protected void Page_Load(object sender, EventArgs e)
    {
        userID = Request.QueryString["userNumber"];
        userPwd = Request.QueryString["userPwd"];
        recepsID = Request.QueryString["receps"];
        msgText = Request.QueryString["msgBody"];
        if (userID != null && userPwd != null && recepsID != null & msgText != null)
            doLoginAndSendMessage(userID, userPwd, recepsID, msgText);
        else
            Response.Write("Some values are missing");
    }

    public void doLoginAndSendMessage(string uid, string pwd, string recepIds, string msg)
    {
        try
        {
            doLogin(uid, pwd, recepIds, msg);
        }
        catch (Exception ex)
        {
            Response.Write("Sending Failed, Please Try Again");
        }
    }

    public void doLogin(string strUserId, string strPassword, string strIds, string strMessage)
    {
        try
        {
            initRequest = (HttpWebRequest)WebRequest.Create("http://www.somewebsite.com/login.aspx");
            initRequest.CookieContainer = new CookieContainer();
            initRequest.Timeout = 60000;
            StreamReader initSr = new StreamReader(initRequest.GetResponse().GetResponseStream(), System.Text.Encoding.GetEncoding("utf-8"));
            initSr.ReadToEnd();
            initSr.Close();

            loginRequest = (HttpWebRequest)WebRequest.Create("http://www.somewebsite.com/login.aspx");
            loginRequest.CookieContainer = new CookieContainer();
            loginRequest.Timeout = 60000;
            StringBuilder loginString = new StringBuilder();
            loginString.Append("LoginUserId=" + strUserId + "&LoginPassword=" + strPassword + "&RememberMe=1&Login=Login");
            byte[] loginData = Encoding.ASCII.GetBytes(loginString.ToString());
            //to get any cookies from the initial response
            initResponse = (HttpWebResponse)initRequest.GetResponse();
            //setting cookies
            loginRequest.CookieContainer.Add(initResponse.Cookies);
            //Adding Headers
            loginRequest.Method = "POST";
            loginRequest.ContentType = "application/x-www-form-urlencoded";
            loginRequest.ContentLength = loginData.Length;
            Stream loginStream = loginRequest.GetRequestStream();
            loginStream.Write(loginData, 0, loginData.Length);
            loginStream.Close();

            //Reading the response
            StreamReader loginSr = new StreamReader(loginRequest.GetResponse().GetResponseStream(), System.Text.Encoding.GetEncoding("utf-8"));
            loginResponseString = loginSr.ReadToEnd();
            loginSr.Close();

            if (loginResponseString.Contains("inbox.aspx"))
            {
                //get session code
                sessionCode = loginResponseString.Substring(125, 5);
                //call the sendmessage method
                sendMessage(strIds, strMessage);

            }
            else
            {
                Response.Write("Login Failed: Check Username and password");
            }
        }
        catch (Exception ex)
        {
            Response.Write("Sending Failed, Please Try Again");
        }
    }

    public void sendMessage(string strIds, string strMsg)
    {
        try
        {
            string[] ids = strIds.Split(',');
            for (int i = 0; i < ids.Length; i++)
            {
                msgRequest = (HttpWebRequest)WebRequest.Create("http://www.somewebsite.com/writenew.aspx?sessionid=" + sessionCode);
                msgRequest.CookieContainer = new CookieContainer();
                msgRequest.Timeout = 1000000;
                msgRequest.ReadWriteTimeout = 1000000;
                msgRequest.SendChunked = true;
                //to get any cookies from the initial response
                loginResponse = (HttpWebResponse)loginRequest.GetResponse();
                //setting cookies
                msgRequest.CookieContainer.Add(loginResponse.Cookies);
                //Adding Headers
                msgRequest.Method = "POST";
                msgRequest.ContentType = "application/x-www-form-urlencoded";

                Stream msgStream = msgRequest.GetRequestStream();

                Stream respStream = msgRequest.GetResponse().GetResponseStream();

                StreamReader codeRead = new StreamReader(respStream, System.Text.Encoding.GetEncoding("utf-8"));
                string temp = codeRead.ReadToEnd();
                codeRead.Close();
                respStream.Close();
                txtResponse.Text = temp;

                try
                {
                    int starInd = temp.IndexOf("UserId_");
                    //int endInd = starInd + 15;
                    string holder = temp.Substring(starInd, 15);
                    int startInd = holder.IndexOf("_") + 1;
                    queryCode = holder.Substring(startInd, 5);
                    txtSubString.Text = queryCode;
                }
                catch (Exception ex)
                {
                    txtSubString.Text = "SOME ERROR";
                }

                lock (lockObj)
                {
                    StringBuilder msgString = new StringBuilder();
                    msgString.Append("sessionid=" + queryCode + "&GlobalKeyId=1&MessageLength=988&ReceiveId_"
                        + queryCode + "=" + ids[i] + "&Message_" + queryCode + "=" + strMsg
                        + "&SendNow_" + queryCode + "=Send Now");
                    byte[] msgData = Encoding.ASCII.GetBytes(msgString.ToString());
                    msgStream.Write(msgData, 0, msgData.Length);
                    msgStream.Close();
                }

                //Reading the response
                StreamReader msgSr = new StreamReader(respStream, System.Text.Encoding.GetEncoding("utf-8"));
                string msgResponseString = msgSr.ReadToEnd();
                msgSr.Close();
                sessionCode = msgResponseString.Substring(123, 5);
            }
            Response.Write("Message Sent Successfully");
        }
        catch (Exception ex)
        {
            Response.Write("Sending Failed, Please Try Again<br/>" + ex.Message);
        }
    }
} 
```

应用程序在到达此行时停止

```
msgStream.Write(msgData, 0, msgData.Length); 
```

请帮我解决错误。谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T08:41:47.853

当您调用[`GetResponse()`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.getresponse.aspx)它时，将导致发送到目前为止构建的请求，并让客户端获取响应。

您需要在调用之前构建完整的请求`GetResponse()`，否则您的请求将不完整。获取请求流并在`GetResponse()`调用后写入 POST 数据将抛出此异常，以表明在已发送请求后继续构建请求没有意义。