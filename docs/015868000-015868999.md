# StackOverflow 问答 15868000-15868999

# python - Mongod at 100% CPU - 不确定如何诊断？

> ID：15868001
> 
> 赞同：4
> 
> 时间：2013-04-07T21:23:32.960
> 
> 标签：python, performance, mongodb, amazon-ec2

我有一个 python（python 和 mongo 新手）应用程序，它每小时通过 cron 运行以获取数据、清理它并插入到 mongo 中。在执行期间，应用程序将查询 mongo 以检查重复项并插入文档是否是新文档。

我最近注意到 mongod 的 cpu 利用率为 100%……我不确定何时/为什么会发生这种情况。

我正在一个 EC2 微型实例上运行，该实例具有一个用于 mongo 的专用 EBS 卷，大小约为 2.2GB。

我不确定从哪里开始诊断问题。这是系统上 stats() 和 systemStatus() 的输出：

```
> db.myApp.stats()
{
"ns" : "myApp.myApp",
"count" : 138096,
"size" : 106576816,
"avgObjSize" : 771.7588923647318,
"storageSize" : 133079040,
"numExtents" : 13,
"nindexes" : 1,
"lastExtentSize" : 27090944,
"paddingFactor" : 1,
"flags" : 1,
"totalIndexSize" : 4496800,
"indexSizes" : {
    "_id_" : 4496800
},
"ok" : 1
}
> db.serverStatus()
{
"host" : "kar",
"version" : "2.0.4",
"process" : "mongod",
"uptime" : 4146089,
"uptimeEstimate" : 3583433,
"localTime" : ISODate("2013-04-07T21:18:05.466Z"),
"globalLock" : {
    "totalTime" : 4146088784941,
    "lockTime" : 1483742858,
    "ratio" : 0.0003578656741237909,
    "currentQueue" : {
        "total" : 0,
        "readers" : 0,
        "writers" : 0
    },
    "activeClients" : {
        "total" : 2,
        "readers" : 2,
        "writers" : 0
    }
},
"mem" : {
    "bits" : 64,
    "resident" : 139,
    "virtual" : 1087,
    "supported" : true,
    "mapped" : 208,
    "mappedWithJournal" : 416
},
"connections" : {
    "current" : 7,
    "available" : 812
},
"extra_info" : {
    "note" : "fields vary by platform",
    "heap_usage_bytes" : 359456,
    "page_faults" : 634
},
"indexCounters" : {
    "btree" : {
        "accesses" : 3431,
        "hits" : 3431,
        "misses" : 0,
        "resets" : 0,
        "missRatio" : 0
    }
},
"backgroundFlushing" : {
    "flushes" : 69092,
    "total_ms" : 448897,
    "average_ms" : 6.497090835407862,
    "last_ms" : 0,
    "last_finished" : ISODate("2013-04-07T21:17:15.620Z")
},
"cursors" : {
    "totalOpen" : 0,
    "clientCursors_size" : 0,
    "timedOut" : 1
},
"network" : {
    "bytesIn" : 297154435,
    "bytesOut" : 222773714,
    "numRequests" : 1721768
},
"opcounters" : {
    "insert" : 138004,
    "query" : 359,
    "update" : 0,
    "delete" : 0,
    "getmore" : 0,
    "command" : 1583416
},
"asserts" : {
    "regular" : 0,
    "warning" : 0,
    "msg" : 0,
    "user" : 0,
    "rollovers" : 0
},
"writeBacksQueued" : false,
"dur" : {
    "commits" : 9,
    "journaledMB" : 0,
    "writeToDataFilesMB" : 0,
    "compression" : 0,
    "commitsInWriteLock" : 0,
    "earlyCommits" : 0,
    "timeMs" : {
        "dt" : 3180,
        "prepLogBuffer" : 0,
        "writeToJournal" : 0,
        "writeToDataFiles" : 0,
        "remapPrivateView" : 0
    }
},
"ok" : 1
} 
```

和顶级输出：

```
PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+ COMMAND
18477 mongodb   20   0 1087m 139m 122m R 99.9 23.7  10729:36 mongod 
```

我很好奇如何调试 mongo 以确定发生这种糟糕性能的位置/内容/原因。

更新：

I learned I can use explain() to get details, though I'm not sure how to yet interpret the results

```
> db.myApp.find({'id':'320969221423124481'}).explain()
{
"cursor" : "BasicCursor",
"nscanned" : 138124,
"nscannedObjects" : 138124,
"n" : 0,
"millis" : 3949,
"nYields" : 0,
"nChunkSkips" : 0,
"isMultiKey" : false,
"indexOnly" : false,
"indexBounds" : {

}
} 
```

UPDATE:

OK, I see now that the example query (which it executes a BUNCH of times) is taking near 4 seconds. I guess it is NOT using any index. I need to lookup how to add an index...doing that now.

UPDATE:

So I did the following

```
db.myApp.ensureIndex({'id':1}) 
```

And it fixed everything. heh.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T21:19:45.373

See my OP thread, but the answer was a missing index needed to be added:

```
db.myApp.ensureIndex({'id':1}) 
```

# php - session_start() 到底是什么？

> ID：15868003
> 
> 赞同：0
> 
> 时间：2013-04-07T21:23:49.427
> 
> 标签：php

标题说明了一切，希望得到深入的答复，但对于初学者水平，所以请不要使用那些行话！;）提前谢谢！:)

对于那些认为这是重复的人，我无法解决与此直接相关的问题，无论如何请告诉我在哪里，我会承认我的错误！:)

提供的链接没有回答我的问题，如果我错了，请指出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:27:27.427

`session_start()`根据通过`GET`or`POST`请求或通过`cookie`.

在这里阅读更多：http: [//php.net/manual/en/function.session-start.php](http://php.net/manual/en/function.session-start.php)

这是一个关于如何使用会话的教程： [http ://www.tizag.com/phpT/phpsessions.php](http://www.tizag.com/phpT/phpsessions.php)

# ruby-on-rails - Flying-sphinx 和 Heroku 调度程序

> ID：15868006
> 
> 赞同：2
> 
> 时间：2013-04-07T21:24:04.000
> 
> 标签：ruby-on-rails, heroku, sphinx, thinking-sphinx

因为我是 FS、Heroku 和 Rails 的新手，所以我在实现调度程序 rake 任务时遇到了麻烦。

我在我的 lib/tasks 文件夹中构建了一个 scheduler.rake 并设置了以下内容：

```
desc "This task is called by the Heroku scheduler add-on"
task :index_sphinx => :environment do
  puts "Indexing Sphinx db..."
 ???flying-sphinx index???
  puts "done."
end 
```

如您所见，我们遇到了一个问题，因为我不知道如何在任务中键入 fly-sphinx index 命令——该命令应该采用什么格式。

Heroku FS [doco](https://devcenter.heroku.com/articles/flying_sphinx#processing-sphinx-indices)声明“只需添加飞行狮身人面像索引作为任务”，但这并没有告诉我如何准确地输入它 - 它可能需要一些我仍然没有的背景知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:51:49.143

我找到了解决方案 0，尽管我从 Pat（FS 的创始人）那里了解到有一个更简单的解决方案。

首先，我的：

```
system 'flying-sphinx index' 
```

而他的：只需输入：

```
bundle exec flying-sphinx index 
```

在调度程序仪表板中。

希望这对某人有用。

# mysql - 创建从文件系统到 blob 的表插入图像（如何）

> ID：15868007
> 
> 赞同：0
> 
> 时间：2013-04-07T21:24:07.117
> 
> 标签：mysql, sql, insert, phpmyadmin, blob

当我创建我的表时，我知道如何将数据插入到字段中，但我不知道如何将图像从我的文件系统插入到 blob。

```
$sqlCommand = "INSERT INTO pages (page_title,page_body,links,thumbs) VALUES
               ('Flash Gallery','Use Actionscript to build a Flash Photo gallery','http://www.google.com','what do i put here????'),
              ('Flash Website','Learn to create a full flash website template','http://www.google.com','what do i put here????'),
              ('XML RSS FEED','Learn to assemble XML RSS Feeds for your website','www.google.com','what do i put here????')"; 
```

# java - 添加到随机生成的分数以查看它们是否添加到存储在数组中的 10

> ID：15868016
> 
> 赞同：0
> 
> 时间：2013-04-07T21:24:41.883
> 
> 标签：java, arrays

我需要一些帮助来为我正在学习的 Java 介绍类编写程序。有一个家庭作业要求我们生成一个不高于 9 的分数，并将它们与另一个得分相加为 10 的“人”与另一个人配对。这场“比赛”共有20名参赛者。到目前为止，我为 2 个分数的配对创建了假设的行和列，并嵌套了 2 个 for 循环，并以 if 结束它，以查看行和列是否会增加到 10。

该程序确实编译了，但是在运行时，它似乎没有给我一个解决方案。

```
public static void main(String[] args) { 
    int rows = 2; 
    int cols = 10; 
    int[][] scoreTotal = new int[rows][cols]; 

    for (int row = 0; row < rows; row++) { 
        int teamBlue = (int)(Math.random()* 10);

        for (int col = 0; col < cols; col++) { 
            int teamRed = (int)( Math.random()* 10); 

            if (scoreTotal[row][col] == 10) { 
                System.out.println(scoreTotal);
            }
        }
    }
} 
```

抱歉，如果这是一个非常令人困惑或新手的问题，但就像我说的那样，我正在介绍 java 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:52:54.917

通常在获得任务时，我们会尝试一次性完成所有任务，但您可以尝试将问题抽象为更小的“组件”。尝试将其视为烹饪时的食谱，您只需编写需要采取的步骤，然后再写出代码。

首先，从你的主要方法开始，你已经这样做了

```
public static void main(String[] args) {
} 
```

接下来，您有一个要求说明

> 生成不高于 9 的分数

所以你可以做的是创建一个“分数”数组，并用每个*玩家*的分数填充它（我使用玩家而不是人，因为你提到了“分数”和“参赛者”）。

```
public static void main(String[] args) {
    // generate a score for each of the contestants
} 
```

> 并将他们与另一个与另一个人的分数相加为 10 的“人”配对。

```
public static void main(String[] args) {
    // generate a score for each of the contestants
    // if score of player1 and another player is equal to 10, save pair
} 
```

该`if`语句有点繁琐，因此我们可以尝试将其分解。为简化起见，请尝试考虑仅对一名玩家进行测试。

```
public static void main(String[] args) {
    // generate a score for each of the contestants
    // take score of first player, s
    // compare s + x = 10, where x is score of other player
    // if x = 10 - s, save pair
} 
```

现在我们得到了一些更简单的东西。让我们尝试输入一些代码。

```
public static void main(String[] args) {
    int[] scores = new int[20];
    // generate a score for each of the contestants
    for (int i = 0; i < scores.length; ++i) {
        scores[i] = getRandomNumber();
    }
    // take score of first player, s
    int s = scores[0]; // the first player is at index 0
    // compare s + x = 10, where x is score of other player
    for (int i = 1; i < 20; ++i) {
        // note: We don't have to test against index 0 (that's the first player)
        //       so we start at index 1
        // if x = 10 - s
        int x = scores[i];
        if (x == 10 - s) {
            // save pair
        }
    }
}

public static int getRandomNumber() {
   // todo: generate a random score between 0 and 9 and return it
   return 4;
} 
```

您似乎知道如何`for`在原始代码中使用循环。您没有做的是在数组中分配一个值。(`scores[i] = x;`其中 x 是一个 int) 负责处理这一点，类似于分配一个 int 例如，`int a = 0`. 我使用了一种方法来生成一个返回的分数`int`，因为如何获取随机值的实现是“不感兴趣的”（所以我们将它抽象出来）。所以 for 循环为数组的每个索引设置一个分值。

接下来，由于`scores`数组中有参赛者的所有分数，我们需要将它们配对。使用一些简单的数学，我们构造了一个 if 语句来检查第一个玩家和第二个玩家的得分是否总和为 10。

接下来我们需要保存成对的参赛者。您在创建二维数组的正确道路上，一个用于容纳球员，另一个用于“团队”。填充这个数组时，二维数组看起来像这样

```
 | players |
        |  0    1 |
 -------+----+----+
 team 0 |  0 |  1 |
 team 1 |  3 |  7 |
 team 2 |  8 |  9 |
 -------+----+----+ 
```

即我们将玩家 0 与 1、玩家 3 与玩家 7、玩家 8 与玩家 9 组队。从中我们注意到团队索引 (0-2) 与实际玩家无关，因此我们可以得出结论，我们需要团队的单独索引。

```
public static void main(String[] args) {
    // generate a score for each of the contestants
    // create the team array, 10 teams each with 2 participants
    // for every player: take score of player, s
    // compare s + x = 10, where x is score of every other contestant
        // if x = 10 - s
            // assign the current team to player s and player x
            // increment team integer (assign next team)
} 
```

因此，使用与您的代码类似的代码，我们构建了 teams 数组并将第一支球队分配给我们的球员，然后再继续其他球队。

```
// create the team array, 10 teams, each with 2 participants
int[][] teams = new int[10][2];
// assign the first team to player 3 and player 7
teams[0][0] = 3;
teams[0][1] = 7; 
```

这只是一个示例，其中**Team 0**被分配了两名队员，一名在索引 0，一名在索引 1，分别分配给玩家*3*和玩家*7*。

这很棒。*我们现在可以将一名*玩家与其他任何玩家配对。由此，我们知道我们需要一个“当前队伍”的计数器，因为每个参赛者在这一轮中不必有一个队友，当一个队伍被分配时，我们应该分配下一个。

```
public static void main(String[] args) {
    int[] scores = new int[20];
    // generate a score for each of the contestants
    // ... same as before
    // create the team array, 10 teams each with 2 participants
    int[][] pairs = new int[10][2];
    // create a team integer
    int currentTeam = 0;
    // for every player: take score of player, s
    for (int i = 0; i < 20; ++i) {
        // todo: test if player i is already in teams array and continue; if it is
        int s = scores[i];
        for (int j = i + 1; j < 20; ++j) {
            // compare s + x = 10, where x is score of every other contestant
            int x = scores[j];
            // if x = 10 - s
            if (x == 10 - s) {
                // assign the current team to player i and player j
                pair[currentTeam][0] = i;
                pair[currentTeam][1] = j;
                // increment team integer (assign next team)
                ++currentTeam;
            }
        }
    }
} 
```

请注意，第二个 for 循环从 开始`i + 1`，因为我们已经测试了具有较低索引的播放器。

*还; 你没有提到，但是这个问题有一个“隐藏”的约束，每一对都是排他的，所以一个参赛者只能参加一次。您应该添加第三个 for 循环来检查 teams 数组是否已经包含玩家。*

因此，通过分解问题，我们设法获得了一些可能有效或无效的代码，但无论如何，逻辑都是通过推理创建的，这在解决问题时总是很重要！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T23:39:43.873

所以你在循环中：

```
for (int row = 0; row < rows; row++) { 
    int teamBlue = (int)(Math.random()* 10);// teamBlue never used

    for (int col = 0; col < cols; col++) { 
        int teamRed = (int)( Math.random()* 10);// teamBlue never used 

        if (scoreTotal[row][col] == 10) {
            // scoreTotal[row][col] never modified
            // never reached because scoreTotal[row][col] == 0 by default
            System.out.println(scoreTotal);
        }
    }
} 
```

换句话说，您的二维数组充满了 0：

```
{ {0 0 0 0 0 0 0 0 0 0}
  {0 0 0 0 0 0 0 0 0 0} } 
```

因为你没有对分数做任何事情。你可以：

```
public static void main(String[] args) { 
    int rows = 2; 
    int cols = 10; 
    int[][] scoreTotal = new int[rows][cols]; 

    for (int row = 0; row < rows; row++) { 
        for (int col = 0; col < cols; col++) { 
            int randScore = (int)(Math.random()* 9) + 1;// in case you want a 1-9
            scoreTotal[row][col] = randScore
        }
    }
} 
```

这样你就有了一个二维的分数数组：

```
 { {1 2 3 4 5 6 7 8 9 2}    // row == 0, 1st player random scores
             {1 2 3 4 3 5 6 7 8 9} }  // row == 1, 2nd player random scores
//col index:  0 1 2 3 4 5 6 7 8 9
//eg. scoreTotal[2][4] would be 3 
```

现在你可以对分数做任何你想做的事情。配对将取决于您是否想要仅加起来 10 的配对或其他一些规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T21:32:14.577

就目前而言，除了为您编写程序之外，您无法轻松帮助您，因为您没有提交任何代码，所以与其简单地为您做作业，这里有一些提示：首先，分解问题。仔细阅读问题，然后确定你必须做什么。在这样做时，您应该完成几个可以转换为代码的步骤。

1.  创建 20 个包含 0-9 （或 1 到 9，问题并没有具体说明）随机数的整数，并将它们放入一个数组中。
2.  对于每个分数，找到另一个分数，使它们的总和为 10，并将它们存储为一对。同样，并没有真正指定应该如何存储这些对。
3.  找到所有对后，输出它们以及没有得到任何匹配的任何剩余分数。

# c++ - 结构数组的模糊参考

> ID：15868022
> 
> 赞同：1
> 
> 时间：2013-04-07T21:25:42.700
> 
> 标签：c++

我遇到了一些代码问题，这里是：

```
struct count {
int times;
string abrev;
};

count result[100];
count match;

for(int i=0; i<abbrev.size(); i++)
{
    for (int n=0; n<inputtext.size(); n++)
    {
        if (abbrev[i] == inputtext[n])
         {
            match.times = 1;
            match.abrev = abbrev[i];
            result[i] = match;

         }

    }
}

for(int k=0; k<100; k++)
{
    cout << result[k].abrev << "" << result[k].times << endl;
} 
```

inputtext 和 abbrev 是我没有包含在这个复制/粘贴中的向量，我知道它们无论如何都可以工作。但我使用 codepad.org 检查了我的代码，显然是以下行：

```
count result[100]; 
```

是不是问题，原因是：

```
Line 35: error: reference to 'count' is ambiguous

compilation terminated due to -Wfatal-errors. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:34:30.267

您很可能偶然发现了结构和`std::count`算法之间的冲突，在`<algorithm>`标题中定义。命名空间旨在避免此类冲突，因此将它们用于此目的。包含`using namespace std;`该标头后`std::count`的 , 以及您放入该语句的范围内还有很多其他内容，这允许容易发生冲突。只需在前面加上前缀`std`，`std::`而不是把整个东西都带进来。

# ruby - 使用 Monit 监控 Ruby 脚本 - 包括 RVM

> ID：15868026
> 
> 赞同：7
> 
> 时间：2013-04-07T21:26:17.077
> 
> 标签：ruby, linux, bash, configuration, rvm

我正在使用 Monit 来监控一个使用[Ruby 守护进程 gem](http://daemons.rubyforge.org/)的 ruby​​ 脚本，该脚本使用PID 启动一个单独的进程 - 按照[Monitor ruby​​ processes with Monit的说明进行操作](https://stackoverflow.com/questions/4651449/monitor-ruby-processes-with-monit)

为了执行 ruby​​ 脚本，我需要在 Monit`start`和`stop`字符串中包含 RVM，这样我就可以访问所有的 gem。

但是，`.monitrc`执行时出现以下错误：

```
$rvm_path (/usr/local/rvm) does not exist./home/william/.rvm/scripts/rvm: line 174: rvm_is_a_shell_function: command not found
/home/william/.rvm/scripts/rvm: line 185: __rvm_teardown: command not found
'myserver_1' failed to start
Aborting event 
```

我添加`PATH=$PATH:/home/william/.rvm/bin && . /home/william/.rvm/scripts/rvm`了`start`和`stop`命令字符串以尝试包含 RVM。但是它仍然不起作用

配置文件`.monitrc`：

```
....

check process myserver_1
  with pidfile /home/william/ruby/barclays/myapp.rb.pid
  start = "/bin/bash -c 'PATH=$PATH:/home/william/.rvm/bin && . /home/william/.rvm/scripts/rvm && ruby /home/william/ruby/barclays/daemonloader.rb start'"
  stop = "/bin/bash -c 'PATH=$PATH:/home/william/.rvm/bin && . /home/william/.rvm/scripts/rvm && ruby /home/william/ruby/barclays/daemonloader.rb stop'"

  .... 
```

谢谢你的帮助。

编辑

我感觉问题与环境变量有关。[从这个页面](http://mmonit.com/wiki/Monit/FAQ#pidfile)引用

> 您还应该知道，出于安全原因，Monit 会清除环境并仅设置一个包含 /bin、/usr/bin、/sbin 和 /usr/sbin 的 spartan PATH 变量。如果您的程序或脚本死机，原因可能是它需要某些环境变量或通过 PATH 找到某些程序。如果是这种情况，您应该直接在 monit 调用的启动或停止脚本中设置所需的环境变量。
> 
> 最后，Monit 使用系统调用 execv 来执行程序或脚本。这意味着您不能直接在 start、stop 或 exec 语句中编写 shell 命令。要做到这一点，您必须按照上述方式进行；启动一个 shell 并在那里发出你的命令。例如：
> 
> start program = "/bin/bash -c '我的 shell 命令 && 我的其他命令'"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:15:51.090

用这个：

```
/path/to/rvm/bin/rvm in /path/to/project do ... 
```

将路径替换为 rvm 和项目的正确目录以及`...`停止/启动命令 - 尝试：

```
/usr/bin/env "HOME=/home/william rvm_path=/home/william/.rvm 
  /home/william/.rvm/bin/rvm in /home/william/ruby/project do
  ruby daemonloader.rb start" 
```

该命令会将 RVM 加载`cd`到项目路径中，为此 ruby​​ 加载 ruby​​ 并执行给定的命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-04T17:48:47.880

提到 gemset 和 ruby​​ 源代码为我解决了这个问题。

```
start program = "/bin/bash -c 'cd /home/project_path && source /home/user/.rvm/environments/ruby-2.4.2@global && RAILS_ENV=production bundle exec rails s'" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-23T23:25:42.407

你可以在 Monit 中尝试这样的事情。

```
start = "/bin/su - william -c 'cd /home/william/ruby/project && ~/.rvm/bin/rvm default do bundle exec ruby daemonloader.rb start'" 
```

这对我有用。

# java - Remaiming 文件大小计数器

> ID：15868030
> 
> 赞同：0
> 
> 时间：2013-04-07T21:26:51.670
> 
> 标签：java

我正在尝试在将文件发送到服务器的程序中制作进度条或类似的东西。我有这个

```
ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());  
ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream());  

oos.writeObject(file.getName());  

FileInputStream fis = new FileInputStream(file);  
byte [] buffer = new byte[Server.BUFFER_SIZE];  
Integer bytesRead = 0;  
jj = size-bytesRead;
int i = 0;

while ((bytesRead = fis.read(buffer)) > 0) {  
     oos.writeObject(bytesRead);  
     jButton3.doClick();
     oos.writeObject(Arrays.copyOf(buffer, buffer.length));  
}  
oos.close();  
ois.close(); 
```

这是 Button3

```
temp = temp - 100;
jLabel3.setText(String.valueOf(temp)); 
```

`temp`是所选文件的大小，我要减去 100，因为它是循环中每一步的字节大小。

问题是当我开始发送文件时，Button3 是灰色的，直到发送结束时标签什么也不可见（就像按时更新标签太慢了），但最后它显示了正确的数据。

为什么它不能定期更新标签？我应该怎么做才能解决这个问题？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:29:47.063

您可能正在[Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上执行 I/O ，这会阻止 UI 处理其正常的绘制事件。如果您有一个长时间运行的操作，您不应该在 EDT 上执行此操作（例如，通过在侦听器中执行此操作，例如`ActionListener`单击按钮）。

您需要在后台线程中完成这项工作并将更新发送到 UI。一个简单的方法是使用[`SwingWorker`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html). 将长时间运行的代码放入`doInBackground()`. `publish(byteCount)`当您读取一些`byteCount`字节时调用。然后在`process()`更新进度条。

`SwingWorker`这是一个更新 a的示例`JProgressBar`：[java update progressbar](https://stackoverflow.com/questions/6255647/java-update-progressbar)

# installation - 我用 java 和 oracle 创建了应用程序

> ID：15868031
> 
> 赞同：-6
> 
> 时间：2013-04-07T21:27:06.980
> 
> 标签：installation, java

我用java和oracle（作为数据库）创建了一个系统。

我想在另一台 PC 上运行系统，但没有我的源代码，但是 oracle 和 java(JDK) 已经安装了它，所以我想要一个像程序一样创建设置的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:31:55.530

如果我正确理解您的问题，您已经使用 Oracle DB 构建了一个 Java 应用程序，并且您想在另一台计算机上执行它。您可以将 Java 应用程序导出为 JAR（Java 存档）并在另一台计算机上执行它。

# html - 使用 320andup 更改表格列的宽度

> ID：15868037
> 
> 赞同：0
> 
> 时间：2013-04-07T21:27:41.450
> 
> 标签：html, css, responsive-design

使用[320andup](http://stuffandnonsense.co.uk/projects/320andup/)，我有一个有 2 列的表。我想扩大一列。

有没有最好的做法？我担心使用`<col width="100">`它会弄乱响应式设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:34:52.277

**[不再支持](http://www.w3schools.com/tags/att_col_width.asp)**该`col width`属性（从 HTML5 开始），因此绝对不是要走的路，尤其是如果您的网站将面向响应式设计。

一个更好的选择是只给两个 col 一个公共类，并在你的 CSS 文件中为该类相应地设置首选宽度，例如

**HTML**

```
<col class="theCols"> 
```

**CSS**

```
.theCols {
  width:70%;
} 
```

# javascript - 从父级双向派生而没有副本的复制角度范围变量也是双向的

> ID：15868038
> 
> 赞同：0
> 
> 时间：2013-04-07T21:27:46.270
> 
> 标签：javascript, angularjs, angularjs-directive, angularjs-scope

假设我有这个：

```
<div class="dostuff" some-obj="parentScopeObj">

sAngular.app.directive('dostuff', ['$compile', function($compile){
  return   {
    restrict : 'C',
    scope: { someObj : '=' },
    link : function(scope, element, attrs){  
      element.click(function(){
        scope.parentScopeObj = scope.someObj;
        scope.parentScopeObj.first = 'some modification';
        scope.$apply();
     });
    } 
```

基本上，目标是拥有一个新的、隔离的 scope.parentScopeObj，如果您在指令的 scope.parentScopeObj 中修改内容并执行 $apply()，则修改不会传播到父范围的 parentScopeObj 变量。

我试过了。

1.  只是一个简单的 scope.parentScopeObj = scope.someObj; 然而，如上所述，修改指令的 scope.parentScopeObj 仍将相应地传播到父范围的 parentScopeObj
2.  scope.parentScopeObj = angular.copy(scope.someObj); 然而，这导致我的浏览器在我使用的实际场景中崩溃，所以这是不行的
3.  scope.parentScopeObj = $.extend(true, {}, scope.someObj); 但是，修改指令的 scope.parentScopeObj 仍会相应地传播到父范围的 parentScopeObj

那么我如何才能对 scope.someObj 变量（与父级双向）进行深层复制，而无需与父级进行双向深层复制？angular.copy 是不行的，因为它始终使浏览器崩溃

# html - 媒体查询中宽度为 100% 的图像

> ID：15868039
> 
> 赞同：0
> 
> 时间：2013-04-07T21:28:01.667
> 
> 标签：html, css, media-queries

我在宽度为 820px 的 div 中有一个宽度为 100% 的图像。当我将图像缩小到 iPad 和 iPhone 5 的屏幕尺寸时，图像会缩小到，但在那个尺寸下，我希望图像是屏幕尺寸宽度的 100%。

我已经尝试在媒体查询中使用 100% 的宽度，但图像永远不会缩放到全宽。

在平板电脑和智能手机中，哪个是最好的全屏响应图像？考虑到我使用的是最大宽度为 960px 的网格（骨架网格：[http](http://www.getskeleton.com/) ://www.getskeleton.com/ ）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:19:24.353

宽度为 100% 的图像将是其父级的 100% 宽度。所以是的，如果父级是 820px 宽，那么这就是图像的宽度。如果父级是 960px 宽，那么这就是图像的宽度。

因此，您需要在媒体查询中更改父 div 的宽度（可能与您将图像设置为 100% 宽度的相同）。

# c# - c# Intersection 和 Union 无法正常工作

> ID：15868042
> 
> 赞同：1
> 
> 时间：2013-04-07T21:28:19.083
> 
> 标签：c#, linq, search, intersection

我在 VS 2010 中使用 C# 4.0 并尝试生成 n 组对象的交集或并集。

以下工作正常：

```
IEnumerable<String> t1 = new List<string>() { "one", "two", "three" };
IEnumerable<String> t2 = new List<string>() { "three", "four", "five" };

List<String> tInt = t1.Intersect(t2).ToList<String>();
List<String> tUnion = t1.Union(t2).ToList<String>();
//  this also works
t1 = t1.Union(t2);
//  as does this (but not at the same time!)
t1 = t1.Intersect(t2); 
```

但是，以下没有。这些是代码片段。

我的课是：

```
 public class ICD10
{
    public string ICD10Code { get; set; }
    public string ICD10CodeSearchTitle { get; set; }
} 
```

在下面的：

```
IEnumerable<ICD10Codes> codes = Enumerable.Empty<ICD10Codes>();
IEnumerable<ICD10Codes> codesTemp;
List<List<String>> terms;
//  I create terms here ----
// and then ...
foreach (List<string> item in terms)
{
    //  the following line produces the correct results
    codesTemp = dataContextCommonCodes.ICD10Codes.Where(e => item.Any(k => e.ICD10CodeSearchTitle.Contains(k)));

    if (codes.Count() == 0)
    {
        codes = codesTemp;
    }
    else if (intersectionRequired)
    {
        codes = codes.Intersect(codesTemp, new ICD10Comparer());
    }
    else
    {
        codes = codes.Union(codesTemp, new ICD10Comparer());
    }                
}
return codes; 
```

以上只返回最后一个搜索项目的结果。

为了以防万一，我还添加了自己的比较器，但这没有什么区别：

```
public class ICD10Comparer : IEqualityComparer<ICD10Codes>
{
    public bool Equals(ICD10Codes Code1, ICD10Codes Code2)
    {
        if (Code1.ICD10Code == Code2.ICD10Code) { return true; }
        return false;
    }
    public int GetHashCode(ICD10Codes Code1)
    {
        return Code1.ICD10Code.GetHashCode();
    }
} 
```

我确信我忽略了一些明显的东西——我只是看不到它是什么！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T21:54:23.193

This code: `return codes;` returns a deferred enumerable. None of the queries have been executed to fill the set. Some queries get executed each time through the loop to make a Count though.

This deferred execution is a problem because of the closure issue... at the return, `item` is bound to the last loop execution.

Resolve this by forcing the queries to execute in each loop execution:

```
if (codes.Count() == 0)
{
    codes = codesTemp.ToList();
}
else if (intersectionRequired)
{
    codes = codes.Intersect(codesTemp, new ICD10Comparer()).ToList();
}
else
{
    codes = codes.Union(codesTemp, new ICD10Comparer()).ToList();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T21:43:06.200

如果您使用自己的比较器，则应该查看该`GetHashCode`函数的正确实现。linq 运算符也使用此比较。你可以看看这里： http: [//msdn.microsoft.com/en-us/library/system.object.gethashcode (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.object.gethashcode(v=vs.80).aspx)

you could try changing the hash function to "return 0", to see if it is the problem. `ICD10Code.GetHashCode` will return perhaps different values if it is a class object

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T21:50:57.560

Your problem definitely is not connect to `Intersect` or `Union` LINQ extension methods. I've just tested following:

```
var t1 = new List<ICD10>()
    {
        new ICD10() { ICD10Code = "123" },
        new ICD10() { ICD10Code = "234" },
        new ICD10() { ICD10Code = "345" }
    };
var t2 = new List<ICD10>()
    {
        new ICD10() { ICD10Code = "234" },
        new ICD10() { ICD10Code = "456" }
    };

// returns list with just one element - the one with ICF10Code == "234"
var results = t1.Intersect(t2, new ICD10Comparer()).ToList();

// return list with 4 elements
var results2 = t1.Union(t2, new ICD10Comparer()).ToList(); 
```

Using your `ICD10` and `ICD10Comparer` classes declarations. Everything works just fine! You have to search for bug in your custom code, because LINQ works just fine.

# c# - '不能从用法中推断出类型参数'

> ID：15868044
> 
> 赞同：5
> 
> 时间：2013-04-07T21:28:40.513
> 
> 标签：c#, generics, inheritance, type-conversion

我在泛型和继承方面遇到了一些麻烦。我有一个抽象类`CriteriaBase`，它的工作是确定一个实体是否`T`符合任何子类中定义的标准。子类必须实现一个返回`Func`代表标准的方法。当我尝试将泛型用于`Func`. 希望一些代码能说明我的问题。

```
public abstract class CriteriaBase<T, U>
    where T : ICrossoverable
    where U : IChromosome
{
    protected abstract Func<U, bool> Criteria { get; }
    //some code removed for brevity

    private int GetNumberOfCriteriaMatches(T season)
    {
        //1\.  works
        //Func<IChromosome, bool> predicate = c => c.Genes == null;
        //return season.Chromosomes.Count(predicate);

        //2\.  doesn't work - The type arguments for method 'int 
        //System.Linq.Enumerable.Count<TSource>(this IEnumerable<TSource>, 
        //Func<TSource, bool>)'
        //cannot be inferred from the usage. Try specifying the type arguments 
        //explicitly.
        return season.Chromosomes.Count(Criteria);
    }
} 
```

我的意图是`CriteriaBase`该类应该是通用的并且完全可重用。

一个示例子类：

```
public class TopTeamsPlayingEachOtherCriteria : CriteriaBase<Season, MatchDay>
{
    //some code removed for brevity

    protected override Func<MatchDay, bool> Criteria
    {
        get { return matchDay =>
            matchDay.Fixtures.Count(
                fixture =>
                fixture.HomeTeam.TableGrouping.Ordering == 1 
                && fixture.AwayTeam.TableGrouping.Ordering == 1) > 1; }
    }
} 
```

问题出在`GetNumberOfCriteriaMatches()`方法上。选项 2 是我最初编写代码的方式，但我得到了列出的编译错误。如果我使用选项 1，那么代码会编译，但这意味着当我`Criteria`在子类中覆盖时，我必须使用`IChromosome`而不是使用`MatchDay`哪个不起作用（我需要访问 a 的特定功能`MatchDay`）。在我看来，选项 1 和 2 是等效的。选项 2 简单地替换为仅限于实现的类`IChromosome`的泛型类型。`U``IChromosome`

我想要实现的目标是可能的吗？如果是这样，我错过了什么/误解了什么？如果没有，我应该如何解决这个问题？

为了完整性（包括在最后，因为我不确定它对这个问题有多大帮助），这是我目前用于`T`( `Season`) 和`U`( `MatchDay`) 的两个实体。

```
public class Season : ICrossoverable
{
    private readonly IEnumerable<MatchDay> _matchDays;

    public Season(IEnumerable<MatchDay> matchDays)
    {
        _matchDays = matchDays;
    }

    public IEnumerable<MatchDay> MatchDays
    {
        get { return _matchDays; }
    }

    //ICrossoverable implementation
    public IEnumerable<IChromosome> Chromosomes
    {
        get { return _matchDays; }
    }
}

public class MatchDay : IChromosome
{
    private readonly int _week;
    private readonly List<Fixture> _fixtures;

    public MatchDay(int week, List<Fixture> fixtures)
    {
        _week = week;
        _fixtures = fixtures;
    }

    //some code removed for brevity

    public IEnumerable<Fixture> Fixtures
    {
        get { return _fixtures; }
    }

    //IChromosome implementation
    public IEnumerable<IGene> Genes
    {
        get { return Fixtures; }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T18:24:15.253

好吧，这就是问题所在：

```
public IEnumerable<IChromosome> Chromosomes 
```

您*只是*声明您正在返回一系列`IChromosome`值。您的标准`MatchDay`期望值。*你*碰巧知道它实际上是返回一个`MatchDay`值序列，但编译器没有。

您可以`Cast<>`在执行时使用它来检查：

```
return season.Chromosomes.Cast<U>().Count(Criteria); 
```

... or you could change `Chromosomes` to return an `IEnumerable<MatchDay>`. Unfortunately we can't really tell whether that's a valid answer or not as we don't know how `ICrossoverable` is declared. Perhaps you should make `ICrossoverable` generic in the element type?

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T21:41:33.060

`in`您应该在 CriteriaBase 定义中的 U 之前使用关键字。像这样的东西：

```
public abstract class CriteriaBase<T, in U>
    where T : ICrossoverable
    where U : IChromosome 
```

**更新**。不起作用。尝试明确指定类型

```
private int GetNumberOfCriteriaMatches(T season)
{
 ....
    return season.Chromosomes.Count<IChromosome>(Criteria);
} 
```

# java - Java Android 应用程序 - OnItemClickListener

> ID：15868045
> 
> 赞同：-1
> 
> 时间：2013-04-07T21:28:42.527
> 
> 标签：java, android, onclicklistener

我有一个令人困惑的问题我有一个列表菜单，我想像往常一样为每个项目打开一个意图，但我没有单行字符串我不确定如何将每个项目设置为它的意图。ps 我制作了大部分应用程序，我只是决定更改菜单，但无法正常工作。

```
package com.test.thenewboston;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import android.R.menu;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class Menu extends Activity {

String[] countries = new String[] {
        "News / Blog",
        "Calendar",
        "Results",
        "Standings",
        "Photo",
        "Videos",
        "About us",

};

// Array of integers points to images stored in /res/drawable-ldpi/
int[] flags = new int[]{
        R.drawable.rssreader,
        R.drawable.calendar2,
        R.drawable.results2,
        R.drawable.standings2,
        R.drawable.photo2,
        R.drawable.video2,
        R.drawable.about2,

};

// Array of strings to store currencies
String[] currency = new String[]{
    "  Check out the new blog by our team of f1 fans !",
    "  Race calendar with dates and times !",
    "  The latest results from this seasons 2013 Championship",
    "  The Current 2013 Standings",
    "  Latest Photos from us and our bloggers",
    "  This is still underdevolpment but if you have any videos contact us :)",
    "  All our contact information and extra info about out team.",

};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);        

    // Each row in the list stores country name, currency and flag
    List<HashMap<String,String>> aList = new ArrayList<HashMap<String,String>>();        

    for(int i=0;i<7;i++){
        HashMap<String, String> hm = new HashMap<String,String>();
        hm.put("txt", " | " + countries[i] + " | ");
        hm.put("cur","" + currency[i]);
        hm.put("flag", Integer.toString(flags[i]) );            
        aList.add(hm);        
    }

    // Keys used in Hashmap
    String[] from = { "flag","txt","cur" };

    // Ids of views in listview_layout
    int[] to = { R.id.flag,R.id.txt,R.id.cur};        

    // Instantiating an adapter to store each items
    // R.layout.listview_layout defines the layout of each item
    SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), aList, R.layout.listview_layout, from,              to);

    // Getting a reference to listview of main.xml layout file
    ListView listView = ( ListView ) findViewById(R.id.listview);

    // Setting the adapter to the listView
    listView.setAdapter(adapter);       

    // Item Click Listener for the listview
    listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {
          // When clicked, show a toast with the TextView text
             Intent countrys = new Intent(adapter.toString());
             startActivityForResult(countrys, 0);

}

public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.mainmenu, (android.view.Menu) menu);
    return true;
}        });

}

}; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:55:00.763

把这个放在`setOnItemClickListener()`方法里面

```
listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {

    if (position==0) {
            Intent news = new Intent(Menu.this ,RSSItem.class);
            startActivity(news);
    }else if (position==1) {
            Intent calendar = new Intent(Menu.this ,calender.class);
            startActivity(news);
    }
 // and so on
} 
```

因为它维持的顺序，所以你有可能越过这个位置来触发你想要的意图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T21:47:59.690

里面

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    HashMap<String,String> aMap = (HashMap<String,String>)parent.getItemAtPosition(position);
} 
```

见[http://developer.android.com/reference/android/widget/AdapterView.html#getOnItemClickListener()](http://developer.android.com/reference/android/widget/AdapterView.html#getOnItemClickListener())

也许这有帮助？

# html - CSS 扩展 div

> ID：15868046
> 
> 赞同：0
> 
> 时间：2013-04-07T21:28:42.837
> 
> 标签：html, css

嗨，我的 CSS 代码是这样的：

```
 #bottom {

             height: 100px;
             background-color: #afafaf;   
             width: auto;
             border-top: 4px solid green;
             margin-top: 90px;

        } 
```

我的代码是这样的：

```
<body>

    <div id="wrapper">      
        <div id="logo"></div>           
    </div>

        <a href=""><div class="box">Go to our forums &raquo; </div></a>

        <div id="bottom">TEST</div>

</body> 
```

这是它的样子：[http ://screencloud.net/v/cxEu](http://screencloud.net/v/cxEu)

为什么它会在 div 的两端显示这些间隙？我希望它显示在整个屏幕上。我尝试了不同的宽度，但没有任何效果。或者我做错了什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:31:45.010

看起来像身体的边缘，试试这个：

```
body {
    margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:30:47.570

指定`margin: 0`和`padding: 0`：

```
#bottom {
  height: 100px;
  background-color: #afafaf;   
  width: auto;
  border-top: 4px solid green;
  margin: 0;
  padding: 0;
  margin-top: 90px;
} 
```

# c# - 混合包装类型和常量整数表达式的条件运算符

> ID：15868051
> 
> 赞同：4
> 
> 时间：2013-04-07T21:29:00.847
> 
> 标签：c#, conditional-operator

当我将更窄的可空值和更宽的数值组合为条件运算符的第二个和第三个操作数时，我得到了我在 C# 中不期望的东西。这不起作用，但我发现如果更宽的数值是 int 类型的常量表达式并且更窄的可空值是 SByte 类型，它会起作用吗？或 Int16？演示：

```
bool test = true;
Int16? aShort = 5;
Int32 anInt = 5;
const Int32 aConstInt = 4;
Object o1 = test ? aShort : anInt;      // does not compile
Object o2 = test ? aShort : aConstInt;  // does compile 
```

我的问题是，如果我的 int 是常量，为什么它会编译？而且我在 C# 语言规范中找不到对此的引用，这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T22:30:02.987

在 C# 4.0 语言规范中，第 7.14 节（条件运算符）声明如下：

> The second and third operands, `x` and `y`, of the `?:` operator control the type of the conditional expression.
> 
> If `x` has type `X` and `y` has type `Y` then
> 
> *   If an implicit conversion (§6.1) exists from `X` to `Y`, but not from `Y` to `X`, then `Y` is the type of the conditional expression.
> *   If an implicit conversion (§6.1) exists from `Y` to `X`, but not from `X` to `Y`, then `X` is the type of the conditional expression.
> *   Otherwise, no expression type can be determined, and a compile-time error occurs.

And §6.1.9 (Implicit constant expression conversions) states the following:

> An implicit constant expression conversion permits the following conversions:
> 
> *   A *constant-expression* (§7.19) of type `int` can be converted to type `sbyte`, `byte`, `short`, `ushort`, `uint`, or `ulong`, provided the value of the *constant-expression* is within the range of the destination type.
> *   A *constant-expression* of type `long` can be converted to type `ulong`, provided the value of the *constant-expression* is not negative.

As you can see, constant expressions of type `int` and `long` are treated specially.

Thus the expression `test ? aShort : aConstInt` is valid because there is an implicit conversion from the `int` constant expression `4` to `short` and then to `short?` (and thus the type of the expression is `short?`), but `test ? aShort : anInt` is not valid because there is neither an implicit conversion from a non-constant expression of type `int` to `short?` nor from `short?` to `int`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T21:39:56.740

当你写：

```
const Int32 aConstInt = 4;
Object o2 = test ? aShort : aConstInt;  // does compile 
```

编译器能够将`aConstInt`第二行中的引用视为您只是将 a 放在`4`那里。根据上下文，它将 the`4`变成 a `short`，而不是 a `Int32`。如果编译器只知道输入是 a ，则编译器的行为会有所不同`Int32`，就像它不是 a 的情况一样`const`。

如果您声明：

```
const Int32 aConstInt = short.MaxValue + 1; 
```

然后编译器将不允许编译同一行：

```
Object o2 = test ? aShort : aConstInt;  // does not compile 
```

因为它现在将其视为`32768`，而不是`short`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T21:35:35.387

您的第一个条件无法编译的原因不是因为`const`; 问题在于数据类型。`aShort`是 a `Nullable<Int16>`，如果您将其声明为正常的`Int16`，它会正常工作

```
Int16 aShort = 5; // not nullable
Int32 anInt = 5;
Object o1 = test ? aShort : anInt;      // does compile 
```

当您拥有`? (short?) : (int)`时，它无法进行转换，因为编译器不知道如何将 转换`(short?)`为`int`.

当您拥有`? (short) : (int)`时，*运行时*会将 转换为`short`以`int`适应更大的数据类型。

然而，由于 C#*编译器*在处理整数时使用了一些特殊的魔法，第二个条件*确实可以编译。*当您拥有时，编译器会将 视为a ，因为您已将其声明为适合数据类型的值。然后在结果中隐式转换为 a 。*`const``? (short?) : (const int = 4)``const int``short``short``short``short?`*

 *如果你有`? (short) : (const int = 4)`它的行为就像第一种情况一样，在运行时将 上转换`short`为 a 。`int`

如果您有`? (short?) : (short?)`作品，因为编译器知道如何将 a 隐式转换`short`为 a `short?`。

如果您在运行时查看结果类型，您实际上可以看到这一点。

```
Int16 aShort1 = 5; // not nullable
Int16? aShort2 = 5; // nullable
object o1 = test ? aShort1 : anInt;
object o2 = test ? aShort2 : aConstInt;
object o3 = test ? aShort1 : aConstInt;
object o4 = test ? aShort1 : aShort2;

o1.GetType() // System.Int32
o2.GetType() // System.Int16
o3.GetType() // System.Int32
o4.GetType() // System.Int16 
```

事实上，如果你查看生成的 IL，`o2`你会看到：

```
IL_001E:  ldarg.0     
IL_001F:  ldfld       UserQuery.test
IL_0024:  brtrue.s    IL_002E
IL_0026:  ldc.i4.4    // your integer constant
IL_0027:  newobj      System.Nullable<System.Int16>..ctor // Notice the type here
IL_002C:  br.s        IL_0034
IL_002E:  ldarg.0     
IL_002F:  ldfld       UserQuery.aShort2
IL_0034:  nop         
IL_0035:  box         System.Nullable<System.Int16>
IL_003A:  stloc.1     // o2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T21:39:38.830

C# 编译器特别对待常量。这个特殊属性甚至可以跨表达式传播，例如`1+2`. `null`和 lambdas 也很特殊：它们没有 CLR 类型，但您可以将它们转换为任何引用类型或任何匹配的委托类型。（`null`不是*对象*类型！）。

这是 C# 规范要求的。它强制实现解析常量表达式并维护它们的可转换性属性。

例子：

```
short x = 1; //assigning an integer literal to a short - works because it is a constant
short y = 1+2; //also works for expressions 
```

您还可以在没有强制转换的情况下将 long 分配给 int：

```
const Int64 a = 1;
Int32 b = a; 
```

常数只是传播。*

# django - 无法为 solr/haystack 建立索引：未知字段 'django_id'

> ID：15868052
> 
> 赞同：3
> 
> 时间：2013-04-07T21:29:01.877
> 
> 标签：django, solr, django-haystack

我正在尝试遵循 haystack 教程。运行 manage.py rebuild index 时遇到错误

我收到以下错误：

```
WARNING: This will irreparably remove EVERYTHING from your search index.
Your choices after this are to restore from backups or rebuild via the `rebuild_index` command.
Are you sure you wish to continue? [y/N] y

Removing all documents from your index because you said so.
All documents removed.
/Users/heri0n/python_env/lib/python2.7/site-packages/django/db/models/fields/__init__.py:808: RuntimeWarning: DateTimeField received a naive datetime (2013-04-07 16:14:15.481145) while time zone support is active.
  RuntimeWarning)
Indexing 1 notes.
Failed to add documents to Solr: [Reason: None]
<response><lst name="responseHeader"><int name="status">400</int><int name="QTime">6</int></lst><lst name="error"><str name="msg">ERROR: [doc=haystacktester.note.3] unknown field 'django_id'</str><int name="code">400</int></lst></response> 
```

我确实运行了 manage.py build_solr_schema > ~/solr-4.2.1/example/solr/conf/schema.xml

我不得不手动创建 conf 目录，因为它不存在。我注意到教程在我使用 4 时使用 Solr 3。conf 目录的位置是否可能改变？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-18T15:11:20.073

问题在于 Solr（haystack 文档使用 v3.5.0，这里您可能使用的是最新版本）找不到配置文件。这3个步骤对我有用

*   将架构放在 solr-xyz/example/solr/collection1/conf/schema.xml

*   在架构中将 stopwords_en.txt 更改为 lang/stopwords_en.txt

*   将版本字段（如下所述）添加到字段部分的架构中

    ```
    <field name="_version_" type="long" indexed="true" stored="true" multiValued="false"/> 
    ```

有关更多信息，请查看[GitHub中的相同讨论](https://github.com/toastdriven/django-haystack/issues/878)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-12T23:04:44.590

这更像是评论，但由于我缺乏积分，我无法评论......

有没有人想出一个解决方案？我有完全相同的问题。该字段是这样创建的`schema.xml`：

```
<field name="django_id" type="string" indexed="true" stored="true" multiValued="false"/> 
```

我已经重新启动了 Solr（多次），并且我 100% 肯定我的 schema.xml 代码是正确的。这到底是怎么回事？

编辑：我切换到 Elasticsearch 并且没有问题。但是，我相信其他人会发现对这个问题有用的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-20T01:24:23.107

我不得不克隆 haystack 源代码并进行一些黑客攻击，如下所示：

In the /haystack/management/commands/build_solr_schema.py , I commented `DJANGO_ID` in the `build_context()` func. Then in `/haystack/templates/search_configuration/solr.xml` , I replaced `{{ DJANGO_ID }}` with `"django_id"` and everything worked ok.

I think the `{{DJANGO_ID}}` is not being replaced with `"django_id"` when you generate `schema.xml`.

# ruby - 尝试创建第一个 Sinatra 扩展时出错

> ID：15868056
> 
> 赞同：1
> 
> 时间：2013-04-07T21:29:08.617
> 
> 标签：ruby, sinatra

我第一次深入研究 Ruby 和 Sinatra，并浏览了 Alan Harris 和 Konstatin Haase 的“ [Sinatra Up and Running](http://shop.oreilly.com/product/0636920019664.do) ”。在整理了我的 Ruby 版本（使用 RVM）之后，在创建扩展时，我直到第 3 章都没有遇到任何问题。代码如下（post_get.rb）：

```
require 'sinatra/base'

module Sinatra
  module PostGet
    def post_get (route, &block)
      get (route, &block)
      post (route, &block)
    end
  end

  register PostGet
end 
```

与 (post_get_test.rb) 一起使用：

```
require 'sinatra'
require './post_get'

post_get '/' do
        "Hello #{params[:names]}"
end 
```

但是，每当我运行“ruby post_get_test.rb”时，我都会立即收到以下运行时错误：

```
user@UbuntuOne:~/sinatra$ ruby post_get_test.rb 
/home/user/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': /home/user/sinatra/post_get.rb:6: syntax error, unexpected ',', expecting ')' (SyntaxError)
      get (route, &block)
                 ^
/home/user/sinatra/post_get.rb:7: syntax error, unexpected ',', expecting ')'
      post (route, &block)
                  ^
/home/user/sinatra/post_get.rb:13: syntax error, unexpected $end, expecting keyword_end
    from /home/user/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from post_get_test.rb:2:in `<main>' 
```

我什至不确定从哪里开始解决这个问题。有人可以指出我正确的方向来解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:36:00.260

您发布的代码是正确的，但与错误消息中报告的代码不同。

In the error message the lines causing the error look like this:

```
get (route, &block) 
```

and

```
post (route, &block) 
```

Note the space between the `get` or `post` and the opening `(`. In Ruby when you call a method and you use parenthesis there mustn’t be a space between the method name and the opening parenthesis (like the code block in your question).

Make sure in your actual code there isn’t a space at this point and you should be okay.

What’s happening is Ruby is trying to parse what is contained in the parenthesis and pass the result as the *only* argument to the method, rather than using the contents of them as the list of arguments.

# php - 使用单词边界 [[:<:]] 和 [[:>]] 时的奇怪行为

> ID：15868062
> 
> 赞同：3
> 
> 时间：2013-04-07T21:29:59.267
> 
> 标签：php, mysql, sql, regex, database

我的任务是为不同字符串中的条目创建一个黑名单。我正在使用`MySQL`.

您可能知道 : 中的单词边界标记`MySQL`， `[[:<:]]`它们`[[:>:]]`对应`\b`于默认的正则表达式。

当存在`regexp special characters`和`word boundary marks`在字符串中时出现问题。

**但是这些字符被双反斜杠转义了！**

只需运行此查询

```
SELECT 
"test()" REGEXP "[[:<:]]test\\(\\)[[:>:]]", 
"test()" REGEXP "test\\(\\)", 
"test"   REGEXP "[[:<:]]test[[:>:]]",
"test"   REGEXP "test" ; 
```

你会得到

```
0 | 1 | 1 | 1 
```

而不是预期

```
1 | 1 | 1 | 1 
```

有人可以解释一下如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T21:48:34.503

第一个失败是因为最后一个单词边界不能匹配单词边界：右括号和字符串的结尾不是单词边界位置。[引用mysql 参考](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)给出的定义：
“*一个单词是一个单词字符的序列，其前后没有单词字符。* ”

作为旁注，它也不适用于另一种语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T21:48:49.953

不要认为你可以在 MySQL 中很好地做到这一点。因为没有环顾四周（也没有办法否定`[[:<:]]`和`[[:>:]]`？）。

根据您定义单词边界的方式（尤其是涉及非单词字符时，例如`[^A-Za-z0-9_]`），您可以在某些情况下使用如下表达式：

```
(^|[[:space:]])test\(\)($|[[:space:]]) 
```

# c++ - Box2D 相邻边碰撞

> ID：15868063
> 
> 赞同：3
> 
> 时间：2013-04-07T21:30:01.470
> 
> 标签：c++, collision-detection, box2d, edge-detection

我在 box2D 中有一个世界，我使用 2 个边缘体来表示一堵墙（我有 2 个，因为两个对象之间可能有不同的角度）。

我的问题是，每当一个圆形物体沿着第一个边缘行进时，当它到达第二个边缘时，它就会检测到碰撞并从墙上反弹。即使两条边之间没有角度。

此外，如果我的圆形物体撞到两个边缘（有或没有角度）之间的交界处，它会反弹到一个不确定的方向。

我该如何解决或防止这种行为？

![检测到碰撞](https://i.stack.imgur.com/ELogW.png)

![在此处输入图像描述](https://i.stack.imgur.com/GLVUH.png)

角度是近似的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:08:02.260

对于共线边，我会添加一些预处理，将两条共线边合二为一，以消除此类问题。

对于第二种情况。我唯一想到的是检测与多个边缘的碰撞（有一些公差，肯定不是精确值），然后计算感兴趣边缘的平分线 - 基于此，圆形物体撞击边缘的角度计算新角度。

# ruby-on-rails - 为什么脚本会影响我的 Rails 3 应用程序上的所有内容，即使在此代码中也是如此？

> ID：15868065
> 
> 赞同：1
> 
> 时间：2013-04-07T21:30:12.757
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个第三方脚本

```
<script type="text/javascript" src="http://thirdpartysite.com/front.asp?id=xxxx"></script> 
```

该脚本的作用是在图像上添加水印以表明它受版权保护。

这是我在视图中使用的代码，但无论如何，该脚本适用于所有帖子

```
<% if post.copyright == true %>      
    <script type="text/javascript" src="http://thirdpartysite.com/front.asp?id=xxxx"></script>
    <% else %>
    <% end %> 
```

当我仅使用文本对其进行测试时，它可以正常工作

```
<% if post.copyright == true %>      
        Sample text here only applies to post where copyright==true
        <% else %>
        <% end %> 
```

如何让脚本仅适用于某些帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:55:49.217

在您在评论中澄清后

是的，如果 javascript 中没有指定其他内容，包括 javascript 将在页面范围内应用。

您需要执行以下操作：

```
<div class="post <%= 'copyright' if post.copyright%>">
  <img src="somesrc.jpg"></img>
</div> 
```

然后将 javascript 仅应用于 css 选择器“div.copyright img”。类似的东西。取决于 javascript 支持什么，或者您是否可以更改源。

# c++ - 从链接列表中删除项目

> ID：15868074
> 
> 赞同：-2
> 
> 时间：2013-04-07T21:30:47.070
> 
> 标签：c++, list, struct, heap-memory

```
struct node{
    int number;
    node *next;
    };
...
node* pOne;
node* pEnd;
// create node temp 
if( pOne==NULL)            // add temp in list
    pOne = temp;
    pEnd = temp;
else { 
    pEnd->next = temp;
    pEnd = temp;
} 
```

如果我想从列表中删除一个项目怎么办？就是说相邻元素的变化指向下面的指针就很清楚了。如何从内存中删除一个项目？

当它不会链接它收集垃圾收集器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:34:26.183

你必须自己从内存中释放它查看这个其他stackoverflow答案

[delete [] 是否释放由指向指针的指针分配的内存](https://stackoverflow.com/questions/7397390/does-delete-deallocate-memory-allocated-by-pointers-to-pointers)

# ruby-on-rails - rake 说“无法加载这样的文件——规范”

> ID：15868076
> 
> 赞同：-3
> 
> 时间：2013-04-07T21:31:23.963
> 
> 标签：ruby-on-rails, ruby, gem, rake

我在用：

*   Ubuntu 12.10
*   导轨 3.2.12
*   ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-linux]
*   耙耙-10.0.4

当我运行时，`rake db:create`我收到此错误消息：

```
rake aborted!
cannot load such file -- spec
/var/lib/gems/1.9.1/gems/bundler-1.3.5/lib/bundler/runtime.rb:72:in `require'
/var/lib/gems/1.9.1/gems/bundler-1.3.5/lib/bundler/runtime.rb:72:in `block (2 levels) in require'
/var/lib/gems/1.9.1/gems/bundler-1.3.5/lib/bundler/runtime.rb:70:in `each'
/var/lib/gems/1.9.1/gems/bundler-1.3.5/lib/bundler/runtime.rb:70:in `block in require'
/var/lib/gems/1.9.1/gems/bundler-1.3.5/lib/bundler/runtime.rb:59:in `each'
/var/lib/gems/1.9.1/gems/bundler-1.3.5/lib/bundler/runtime.rb:59:in `require'
/var/lib/gems/1.9.1/gems/bundler-1.3.5/lib/bundler.rb:132:in `require'
/home/lcastano/dev/roommateflatfinder/config/application.rb:7:in `<top (required)>'
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/home/lcastano/dev/roommateflatfinder/Rakefile:5:in `<top (required)>'
/var/lib/gems/1.9.1/gems/rake-10.0.4/lib/rake/rake_module.rb:25:in `load'
/var/lib/gems/1.9.1/gems/rake-10.0.4/lib/rake/rake_module.rb:25:in `load_rakefile'
/var/lib/gems/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:589:in `raw_load_rakefile'
/var/lib/gems/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:89:in `block in load_rakefile'
/var/lib/gems/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:160:in `standard_exception_handling'
/var/lib/gems/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:88:in `load_rakefile'
/var/lib/gems/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:72:in `block in run'
/var/lib/gems/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:160:in `standard_exception_handling'
/var/lib/gems/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:70:in `run'
/var/lib/gems/1.9.1/gems/rake-10.0.4/bin/rake:33:in `<top (required)>'
/usr/local/bin/rake:23:in `load'
/usr/local/bin/rake:23:in `<main>' 
```

我尝试卸载 rake 并重新安装它。其他人有同样的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:33:30.257

## 问题

您的 Rakefile 或 Gemfile 中有无效的语句。您可能指的是“rspec”或“rspec-rails”。Rake 本身就是这样告诉你的：

> 无法加载此类文件 -- 规范

## 解决方案

删除 Rakefile 或 Gemfile 中对“spec”的引用，或将有问题的行替换为您尝试使用的 gem 或库的正确名称。

# visual-studio - Xamarin & Visual Studio、Windows Phone & ASP.NET：真正的单一类库可能吗？

> ID：15868077
> 
> 赞同：8
> 
> 时间：2013-04-07T21:31:31.777
> 
> 标签：visual-studio, xamarin.ios, xamarin, portable-class-library

我目前已经构建了一个服务层和 API，我正在从一个 ASP.NET 网站、Windows Phone 应用程序和一个 Windows 8 Metro 应用程序中使用它们——它们的关键是一个包含模型类的项目，它是一个可移植类库项目，并在所有项目之间共享作为参考。该架构运行良好，没有任何问题。

但是，我最近开始尝试使用 Xamarin - 特别是 iOS 功能（以期稍后迁移到 Android）。我最初的假设是，我可以像使用其他项目一样使用这个模型库 - 但是，我已经意识到情况并非如此。

当我第一次向我的 Xamarin.iOS 项目（在 Visual Studio 中）添加对我的模型类库的引用时，我遇到了错误：

'当前项目不支持对便携式库项目的引用'。

奇怪 - 因为我认为这将是一个支持的场景。我在[这里](http://slodge.blogspot.co.uk/2013/03/xamarinios-with-mvvmcross-in-vs2012.html)找到了一个帖子，它建议了一个修复程序，该修复程序强制 Visual Studio 检测 Monotouch (Xamarin) 框架是否支持便携式库项目。似乎正是我所需要的——但不是。当我再次添加引用时，我遇到了另一个错误：

'当前项目的目标框架与便携式库项目的目标框架不兼容'。

它建议我更改项目属性中的目标框架。除了我不能，因为 Xamarin iOS 项目需要支持 Monotouch（无论如何我都不能从 GUI 将它更改为其他任何东西）。所以我试着改变模型库的属性——也许我可以在那里做点什么。看起来我可以。我可以在这里检查 Monotouch (Xamarin) 作为受支持的平台（已经检查了 Windows 手机、Windows 商店等），但它不会让我保存。它只显示消息：

'您选择的目标框架不支持其他功能'

经过一番研究，我发现 Xamarin 建议共享代码的唯一方法是使用带有链接代码文件的单独项目（因此实际上是一个伪单一代码库。我已经尝试过并且可以工作 - 但它似乎是一个 hack。见这里：

[http://docs.xamarin.com/guides/cross-platform/application_fundamentals/building_cross_platform_applications/sharing_code_options](http://docs.xamarin.com/guides/cross-platform/application_fundamentals/building_cross_platform_applications/sharing_code_options)

那么这是唯一的选择吗？或者有没有办法在所有平台上拥有一个*真正的单一类（模型）库，包括 Microsoft 和 Xamarin？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:13:16.667

目前可以在所有 .Net4.5、WP、WinRT、Xamarin.Android 和 Xamarin.iOS 中使用便携式库项目 - 例如配置文件 104

目前还可以跨 .Net4.5、WP、WinRT 和 Xamarin.Android 使用输出二进制程序集，但目前还不能针对 Xamarin.iOS。

随着 Xamarin 采用完整的 PCL 支持，这种情况正在“很快”发生变化 - 请参阅[http://slodge.blogspot.co.uk/2013/02/the-future-is-portable.html](http://slodge.blogspot.co.uk/2013/02/the-future-is-portable.html)并收听[http://hanselminutes .com/362/ios-and-android-apps-with-xamarin-studio-20-and-miguel-de-icaza](http://hanselminutes.com/362/ios-and-android-apps-with-xamarin-studio-20-and-miguel-de-icaza)

我个人使用 PCL 交付 MvvmCross（以及许多使用 MvvmCross 的应用程序） - 并且在过去 6 个月中一直这样做 - 但目前这涉及到一些设置问题。有关一些信息，请参阅我的博客：

*   [http://slodge.blogspot.co.uk/2012/12/cross-platform-winrt-monodroid.html](http://slodge.blogspot.co.uk/2012/12/cross-platform-winrt-monodroid.html)
*   [http://slodge.blogspot.co.uk/2013/03/xamarinios-with-mvvmcross-in-vs2012.html](http://slodge.blogspot.co.uk/2013/03/xamarinios-with-mvvmcross-in-vs2012.html)

我确实希望在不久的将来提供这方面的更新——它应该很快就会“开箱即用”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:37:37.727

Xamarin 的未来一片光明，因为它将在其所有平台上支持 .NET 4.5 配置文件，

[http://blog.xamarin.com/brave-new-async-mobile-world/](http://blog.xamarin.com/brave-new-async-mobile-world/)

据我所知，唯一的问题来自微软方面，他们拒绝将自己的平台统一到一个共同的配置文件中（在我自己的情况下，Windows 8 和 Windows Phone 8 仍然是杂乱无章的定制版本，并不比 CF 或 Silverlight 好）。

便携式类库已经存在，但作为库作者 ( [#SNMP](http://sharpsnmplib.codeplex.com) )，我宁愿按照 Xamarin 的建议为我自己的项目构建单独的项目文件。

# php - 如何修复我的代码以计算出天数的时差

> ID：15868078
> 
> 赞同：0
> 
> 时间：2013-04-07T21:31:42.790
> 
> 标签：php

我正在尝试修复我的脚本，该脚本告诉我用户最后一次登录的时间（以天为单位）。目前我收到此错误

`Fatal error: Unsupported operand types`

我的代码如下：

```
$llogedin= (mysql_query("SELECT `llogin` , `username` FROM `users`")); 
```

下面应该在表格中显示

```
while($t3 =  mysql_fetch_array($llogedin))

    {
echo "               
 <tr>
    <td> ". $t3['username'] ." </td>
    <td> " . $t3['llogin']  - getdate() . " days ago </td>
</tr>";
} 
```

我知道错误是在， `<td> " . $3['llogin'] - getdate() . " days ago </td>`但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:47:14.150

```
<?php

$example_t3 = ARRAY();
$example_t3[] = ARRAY('username'=>'user_1', 'llogin'=>time()-86401);
$example_t3[] = ARRAY('username'=>'user_2', 'llogin'=>time()-2*86499);
$example_t3[] = ARRAY('username'=>'user_3', 'llogin'=>time()-3*88000);
$example_t3[] = ARRAY('username'=>'user_4', 'llogin'=>time()-4*99999);

echo "<table>";
foreach ($example_t3 AS $t3) {
  $days = intval( (time() - $t3['llogin']) / 86400 );
  echo "
   <tr>
      <td> ". $t3['username'] ." </td>
      <td> " . $days . " days ago </td>
  </tr>";
}
echo "</table>";

?> 
```

# ios - 如何使用 Objective-C 从字符串或数据中查看每个元素？

> ID：15868083
> 
> 赞同：1
> 
> 时间：2013-04-07T21:31:58.420
> 
> 标签：ios, objective-c, string, bluetooth, arduino

我正在创建一个从力传感器接收输入的[iOS应用程序。](http://en.wikipedia.org/wiki/IOS_%28Apple%29)Arduino 连接到 BLE[蓝牙](http://en.wikipedia.org/wiki/Bluetooth)发射器，该发射器将信息数据流发送到应用程序。

下面是我的代码：

```
-(void) bleDidReceiveData:(unsigned char *)data length:(int)length
{
    NSData *d = [NSData dataWithBytes:data length:length];
    NSString *s = [[NSString alloc] initWithData:d encoding:NSUTF8StringEncoding];
    self.label.text = s;

    if (s>150){
        [UIImageView beginAnimations:NULL context:nil];
        [UIImageView setAnimationDuration:0.01];
        [ImageView setAlpha:1];
        [UIImageView commitAnimations];
    }
    else {
        //remove red
        [UIImageView beginAnimations:NULL context:nil];
        [UIImageView setAnimationDuration:1.0];
        [ImageView setAlpha:0];
        [UIImageView commitAnimations];
    }
} 
```

我有两个问题：

*   蓝牙子系统发送数据流 (d)，它是一组数字，表示力对力传感器的影响。有什么方法可以让我进入 d 的每个元素或转换后的字符串,`s`以便我可以在 if 语句中使用它？`if`如果字符串中的任何数字高于阈值（语句），我需要显示图像。或者我可以直接使用`if`语句中的字符串吗？我想这将需要一个 for 循环。我只是不确定如何设置它。

*   要获得阈值，我需要校准力传感器。有没有办法获得数据流或字符串的模式或平均值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:41:47.750

如果数据流之间存在间隙或某种*分隔符*（例如“-”或“/”）：

*   use [NSString componentsSeparatedByString] to split the string into it's constituent parts
*   then use [NSString floatValue] on each separated string to get the number
*   compare this value to your threshold in your if statement, show your image if necessary.

If there is *no* separator in your data stream then there are two options:

1) convert to NSString as you do already, then use characteratIndex[n] inside a for loop to get each character. To convert each returned unichar to a number, you'll need to do some jiggerypokery. See these two threads:

[Objective-C NSString for loop with characterAtIndex](https://stackoverflow.com/questions/10315435/objective-c-nsstring-for-loop-with-characteratindex)

[Converting Unichar to Int Problem](https://stackoverflow.com/questions/4179082/converting-unichar-to-int-problem)

2) if you know how many bytes are taken up by each value you may be able to skip the NSString completey and use [NSData subDataWithRange:] (inside a for loop) to extract the data and convert to a value.

Good luck!

# php - Codeigniter php短标签不起作用

> ID：15868084
> 
> 赞同：1
> 
> 时间：2013-04-07T21:31:58.653
> 
> 标签：php, codeigniter, php-shorttags

我目前正在关注这个基本的 Codeigniter 教程，作者在这个 view/post_index.php 页面中使用了这个类似的代码

```
if (!isset($posts)){ ?>
    <p> No Post to display </p>
<?php
} else {
    foreach ($posts as $row){
?>
    <h2> <?=$row['title']?> </h2>
        <p> <?=$row['post'] ?></p>

<?php
    }
}
?> 
```

我得到一个空白页面

```
<h2> <?=$row['title']?> </h2>
<p> <?=$row['post'] ?></p> 
```

在我的来源。

但是，当我使用这个

```
 <h2> <?php echo $row['title']?> </h2>
    <p> <?php echo $row['post'] ?></p> 
```

我很好。它显示了我所有的帖子。我正在运行 wamp（刚刚从网站上下载了 64 位和 Apache 2.4、2.2E 版本，除了我看不出与他们拥有的所有其他 4 个软件包有太大区别......）与 Apache 版本：2.2.21
PHP版本：5.3.10

到底是怎么回事？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T21:34:18.580

这通常意味着您没有启用短标签（大多数 PHP < 5.4.0 安装默认关闭它们）。你需要检查你的`php.ini`文件。

Before you enable them, I would suggest reading [https://softwareengineering.stackexchange.com/questions/151661/is-it-bad-practice-to-use-tag-in-php](https://softwareengineering.stackexchange.com/questions/151661/is-it-bad-practice-to-use-tag-in-php) - there are pros and cons to using the short-tag syntax.

**@IMSoP also makes a very valid note:**

> Specifically, you need the short_open_tag option ([http://www.php.net/manual/en/ini.core.php#ini.short-open-tag](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)) enabled if using PHP < 5.4\. From 5.4 onwards, this setting is still present, but is not needed for the `<?= ... ?>` case, only the potentially problematic `<? ... ?>`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-07T21:48:39.833

if you want to use short_tags, you NEED short_tags, you have to enable them in `application/config/config.php`

```
$config['rewrite_short_tags'] = TRUE;` 
```

check the doc please [Codeigniter Documentation](http://ellislab.com/codeigniter/user-guide/general/alternative_php.html)

the documentation clearly says:

> Note: If you find that the syntax described in this page does not work on your server it might be that "short tags" are disabled in your PHP ini file. CodeIgniter will optionally rewrite short tags on-the-fly, allowing you to use that syntax even if your server doesn't support it. This feature can be enabled in your config/config.php file.
> 
> Please note that if you do use this feature, if PHP errors are encountered in your view files, the error message and line number will not be accurately shown. Instead, all errors will be shown as eval() errors.

# actionscript-3 - 向加载的对象/图像添加按钮模式：ReferenceError：错误 #1056

> ID：15868086
> 
> 赞同：1
> 
> 时间：2013-04-07T21:32:10.183
> 
> 标签：actionscript-3, button, actionscript, linker-errors, loader

ReferenceError：错误 #1056：无法在 flash.display.Loader 上创建属性 buttonMode。这是我写这样的代码时的错误

```
load123 = new Loader();
url1 = new URLRequest("abalblal.png");
load123.load(url1);
abc1 = addChild(skill1load);
//btw let's say i declared the variables earlier
abc1.buttonMode = true; 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:01:48.293

尽管您没有在代码中显示此内容，但您的标题似乎暗示您正在尝试执行以下操作：

```
load123.buttonMode = true; 
```

但是，这行不通，因为在[Loader](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)类中没有定义[buttonMode属性。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Sprite.html#buttonMode)是[Sprite](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Sprite.html)类的一个属性，因为不从this 继承是不可能的。`buttonMode``Loader``Sprite`

但是，您可以将您的添加`Loader`到 a`Sprite`然后在其上设置`buttonMode`启用`Sprite`：

```
var s:Sprite = new Sprite();
s.addChild(loader123);
s.buttonMode = true; 
```

# python - 测试文件中的每一行

> ID：15868089
> 
> 赞同：1
> 
> 时间：2013-04-07T21:32:15.387
> 
> 标签：python, file, testing

我正在尝试编写一个从 infile 读取每一行的 Python 程序。这个 infile 是一个日期列表。我想用函数 isValid() 测试每一行，如果日期有效则返回 true，否则返回 false。如果日期有效，则将其写入输出文件。如果不是，则将无效写入输出文件。我有这个功能，我只想知道用这个功能测试每一行的最佳方法。我知道这应该通过循环来完成，我只是不确定如何设置循环来逐一测试文件中的每一行。

编辑：我现在有一个基本上可以工作的程序。但是，我在输出文件中得到了不正确的输出。也许有人能够解释原因。

好的，我现在有一个基本上可以运行的程序，但是我在输出文件中得到了奇怪的结果。希望有 Python 3 经验的人可以提供帮助。

```
 def main():
datefile = input("Enter filename: ")
t = open(datefile, "r")
c = t.readlines()
ofile = input("Enter filename: ")
o = open(ofile, "w")

for line in c:
    b = line.split("/")
    e = b[0]
    f = b[1]
    g = b[2]

    text = str(e) + " " + str(f) + ", " + str(g)
    text2 = "The date " + text + " is invalid"

    if isValid(e,f,g) == True:
        o.write(text)

    else:
        o.write(text2)

def isValid(m, d, y):
if m == 1 or m == 3 or m == 5 or m == 7 or m == 8 or m == 10 or m == 12:
    if d is range(1, 31):
        return True
elif m == 2:
    if d is range(1,28):
        return True
elif m == 4 or m == 6 or m == 9 or m == 11:
    if d is range(1,30):
        return True
else:
    return False 
```

这是我得到的输出。

1998年5月19日无效 1984年7月21日无效 12月7日 1862年无效 2000年13月4日无效 11月40日 1460年无效 1970年5月7日无效 2001年8月31日无效date 6 26, 1800 无效 date 3 32, 400 无效 date 1 1, 1111 无效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:50:31.713

在最新版本的 Python 中，您可以使用文件隐含的上下文管理功能：

```
results = list()
with open(some_file) as f:
    for line in f:
        if isValid(line, date):
            results.append(line) 
```

...或者更简洁地使用列表理解：

```
with open(some_file) as f:
    results = [line for line in f if isValid(line, date)] 
```

对于逐渐较旧的 Python 版本，您可能需要显式打开和关闭文件（对文件进行简单的隐式迭代*for line in file:*）或在文件上添加更显式的迭代（*f.readline()*或*f.readlines()*（复数）取决于您是要在整个文件中“啜饮”（具有内存开销的影响）还是逐行迭代）。

另请注意，您可能希望从这些文件内容中去除尾随换行符（可能通过调用*line.rstrip('\n')* --- 或者如果您想消除所有前导和尾随空格，则可能只*调用 line.strip()*每一行）。

（根据对先前答案的附加评论进行编辑）：

函数签名**isValid(m,d,y)**表明您正在将数据传递给此函数（月、日、年），但这没有任何意义，因为您还必须以某种方式将数据传递给已验证（一行文本、一个字符串等）。

为了进一步帮助您，您必须提供更多信息（最好是此“isValid（）”函数的源代码或源代码的相关部分。

在我最初的回答中，我假设您的“isValid()”函数只是在其单个参数中扫描任何有效日期。我修改了我的代码示例，以展示如何将特定日期作为单个参数传递给使用此调用签名的函数：“isValid(somedata, some_date)”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T21:36:06.143

```
with open(fname) as f:
    for line in f.readlines():
        test(line) 
```

# php - 如果过期，从数据库中删除记录

> ID：15868090
> 
> 赞同：0
> 
> 时间：2013-04-07T21:32:18.667
> 
> 标签：php, mysql, sql, mysqli

我正在尝试进行设置，以便如果记录过期，它将被删除，我知道我的连接良好，因为此代码有效

```
mysqli_query($resDB,"DELETE FROM downloads WHERE downloads='1'"); 
```

但我似乎无法弄清楚如何随着时间的推移来做到这一点，是否可以使用小于号登录查询？这就是我到目前为止所拥有的。

```
mysqli_query($resDB,"DELETE FROM downloads WHERE expires < time()"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:37:02.003

使用`UNIX_TIMESTAMP()`. 它返回当前的 UTC 时间。您的 expires 字段就是这样。`time()`也是这样。

```
WHERE expires < UNIX_TIMESTAMP() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:30:54.667

好的，首先你需要创建一个字段，（例如时间戳）虽然我更喜欢日期时间。**每当您在表“下载**”中插入新行时，您都必须给它一个到期日期。

您将通过以下方式执行此操作：

```
INSERT INTO downloads (Download_ID, ExpiresOn) VALUES( 5, DATE_ADD(NOW(),interval +1 month) ); 
```

因此，每当您想删除过期的 download_id 时，您都必须

```
DELETE FROM downloads WHERE ExpiresOn < NOW() LIMIT 1; 
```

希望这可以帮助 ：）

当然，这个问题有不同类型的解决方案，您必须更好地解释您的问题以及您想要实现的目标。:)

干杯^^

# ruby-on-rails - 用户关注艺术家 - 几个问题

> ID：15868094
> 
> 赞同：0
> 
> 时间：2013-04-07T21:32:40.110
> 
> 标签：ruby-on-rails, railstutorial.org

我已经根据 railstutorial.org 网站制作了自己的应用程序，现在我在[第 11 章](http://ruby.railstutorial.org/chapters/following-users#top)。一切都很好，我从本教程中学到了很多，现在我正在继续开发我的应用程序，我实际上是在模型“艺术家”上，每个用户都可以创建新的艺术家 ex.Michael Hartl ;) 并添加他们最受欢迎的报价单。问题是允许用户关注他们最喜欢的艺术家并在提要中查看引用，就像来自 railstutorial 的 Microposts 提要一样。Artist 和 User 是两个不同的模型，railstutorial 没有解释如何为此创建“跟随系统”。这就像在 YouTube 等上订阅频道。有人可以解释我如何让它工作吗？我必须在代码中更改什么？

**答案**：

按钮：

```
<%= form_for(current_user.userartists.build(followed_id: @artist.id)) do |f| %>
  <div><%= f.hidden_field :followed_id %></div>
  <%= f.submit "Follow", class: "btn btn-large btn-primary" %>
<% end %> 
```

控制器

> ```
> class UserartistsController < ApplicationController
> def create
> @artist = Artist.find(params[:userartist][:followed_id])
> current_user.follow!(@artist)
> respond_to do |format|
> format.html { redirect_to @artist }
> format.js
> end
> end
> end 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:38:04.983

您应该设置一个 Artist 模型和一个名为`UserArtist`(或`UserFollowsArtist`) 的中间模型，您将在其中存储用户和艺术家之间的所有匹配项。

```
class User < ActiveRecord::Base
   has_many :user_artists
   has_many :artists, :through => :user_artists
end

class Artist < ActiveRecord::Base
   has_many :user_artists
   has_many :users, :through => :user_artists
end

class UserArtist < ActiveRecord::Base
   belongs_to :user
   belongs_to :artist
end 
```

现在您可以调用`@user = User.first`获取第一个用户，并`@user.artists`获取`@user`以下艺术家列表。

您将必须创建一个单独的控制器，称为`UserArtistsController`您将有操作的地方`create`，并且可能`destroy`（如果用户希望取消关注艺术家）。

在你的`routes.rb`：

`resources :user_artists, :only => [:create, :destroy]`

我猜这`follow button`将在`Artists`显示页面上，因此您的视图中应该有这样的内容：

```
<%= button_to "Follow artist", {:controller => :user_artists,
      :action => 'create', :artist_id => params[:id] }, :method => :post %> 
```

在你的控制器中：

```
class UserArtistsController < ActionController
def create 
    @user_artist = UserArtist.create(:user_id => current_user.id, :artist_id => params[:artist_id])
    @artist = Artist.find(params[:artist_id])
    if @user_artist.save
       redirect_to @artist
    else
       flash[:alert] = "Something went wrong, please try again"
        redirect_to root_path
    end
end

end 
```

不要忘记为`Artist`and创建迁移`UserArtist`。`UserArtist`表应包含 a`user_id`和 a `artist_id`。

# html - 从 TextEdit 保存 .vtt 文件

> ID：15868095
> 
> 赞同：0
> 
> 时间：2013-04-07T21:32:43.057
> 
> 标签：html, video, captions

是否可以从 TextEdit 保存 WebVTT 文件 (.vtt)？我能够更改扩展名，但我不确定它是否真的将其转换为 .vtt 文件。我一直试图在网上寻找文件转换器，但似乎找不到任何东西。

我正在使用的代码如下：

```
 <video id="balloons" class="video-js vjs-default-skin" controls preload="none" width="640" height="264" data-setup="{}">
<source src="media/balloon.mp4" type='video/mp4' />
<source src="media/balloons.m4v" type='video/m4v' />
<source src="media/balloons.webmhd.webm" type='video/webm' />
<source src="media/balloons.oggtheora.ogv" type='video/ogg' />
**<track kind="captions" src="media/balloon-captions.vtt" srclang="en" label="English" />** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T02:04:35.917

根据[规范](http://dev.w3.org/html5/webvtt/#the-webvtt-file-format)，VVT 文件是纯文本 (UTF-8)，所以从 TextEdit 保存这样的文件应该不会有任何问题。但是，该文件应由您的 Web 服务器提供，其 MIME 类型为`text/vtt`. 可能值得检查。

您可以在此处验证文件的内容：http: [//quuz.org/webvtt/](http://quuz.org/webvtt/)

# embed - 在 Dreamweaver CS5.5 中嵌入 WMV 文件

> ID：15868096
> 
> 赞同：0
> 
> 时间：2013-04-07T21:32:48.967
> 
> 标签：embed, dreamweaver

当我将视频上传到我的网站时，我的视频无法播放，它只在 Dreamweaver 预览屏幕中播放。视频也不在属性标签检查器中播放，一直说找不到处理这种媒体类型的插件。另外，如何让视频显示第一帧，只显示黑屏。我在代码中遗漏了什么吗？我已经包含了我的代码和网站。

[http://www.raphaelsphotopage.com/Locomotive%20Gallery.html](http://www.raphaelsphotopage.com/Locomotive%20Gallery.html)

```
>         <object classid="CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95" codebase="http://activex.microsoft.com/activex/controls/mplayer/en/nsm
> p2inf.cab#Version=6,4,7,1112" type="application/x-oleobject"
> width="300" height="300"
>     standby="Loading Windows Media Player components..." id="MediaPlayer">
>     <param name="FileName" value="3039.wmv">
>     <param name="ShowControls" value="true">
>     <param name="autostart" value="false">
>     <embed type="application/x-mplayer2"
>     pluginspage=" http://www.microsoft.com/Windows/Downloads/Contents/MediaPlayer/"
>     src="3039.wmv"
>     width="300" height="300" showcontrols="1" showstatusbar="0" showdisplay="0" autostart="0"></embed>
>     </object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:33:48.593

并非所有浏览器都支持 type="application/x-oleobject"。因此，您所拥有的仅适用于某些浏览器（尤其是 IE 和 Safari）。然而，它在 Chrome、Firefox 和 Opera 中失败了。使用解决方法查看此页面。

[http://forums.asp.net/t/1625235.aspx/1](http://forums.asp.net/t/1625235.aspx/1)

# typescript - 将所有 TypeScript 文件编译为单个 TypeScript 文件

> ID：15868100
> 
> 赞同：3
> 
> 时间：2013-04-07T21:33:42.063
> 
> 标签：typescript

所以我正在创建一个 TypeScript 库，我可以轻松地将所有生成的 JS 文件编译成一个文件。有没有办法将所有 .ts 和 .d.ts 编译成一个 .ts 文件？

除了支持 JS 的版本（较小的智能感知，只能调试生成的文件）之外，支持纯 TypeScript 实现的库（对于那些想要好的智能感知并能够调试核心 TS 文件的人）会很好。

一种解决方案是创建一个连接所有文件的 powershell 脚本，但我没有看到动态执行此操作的好方法（因为依赖关系），而无需以正确的顺序对所有文件名进行硬编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:19:50.583

您必须使用编译器的命令行参数

`--out FILE`连接并将输出发送到单个文件

## 例子

```
 tsc --out modules.js main.ts app.ts 
```

以上答案取自此链接

[TypeScript 编译为单个 JS 文件](https://stackoverflow.com/questions/12926830/typescript-compiling-as-a-single-js-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T00:16:52.430

您可以将文件编译成 .d.ts 和 .js

如果您有多个打字稿文件并运行：

```
tsc --out mylib.js --declaration first.ts second.ts 
```

您将获得 (mylib.js + mylib.d.ts)，然后您可以从 typescript 或 javascript 中使用它。

你可以在这里看到一个例子：[https ://github.com/basarat/ts-test/tree/master/tests/compileToSingle](https://github.com/basarat/ts-test/tree/master/tests/compileToSingle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:45:02.627

我认为没有可用的 Typescript 特定工具可以让您基本上将所有文件组合在一起，但是如果您有一个构建脚本，只需编写一些简单的代码来定位您的项目或所需范围内的所有 *.ts 文件，然后只需创建一个新文件并继续将这些现有文件附加到新文件中。然后你会有一个大的`my-project.ts`，你可以通过`tsc.exe`with`--declaration`标志（或类似的名称）运行它，然后`my-project.d.ts`它也会为你输出一个。

如果您想将它用作分布式库以供其他人使用，那么您将不得不以某种方式对其进行打包，无论是一个大的 .ts 还是其他一些机制......我之前问过一个问题：

[你能创建 Typescript 包吗？像 c# dll](https://stackoverflow.com/questions/15664032/can-you-create-typescript-packages-like-c-sharp-dlls)

# ios - 在 iOS 中停止动画

> ID：15868103
> 
> 赞同：1
> 
> 时间：2013-04-07T21:34:14.610
> 
> 标签：ios, objective-c, animation

### 可能重复

*   [取消 UIView 动画](https://stackoverflow.com/questions/554997/cancel-a-uiview-animation)
*   [如何在特定帧停止 UIView 动画](https://stackoverflow.com/questions/13140637/ios-how-to-stop-uiview-animations-at-a-particular-frame)
*   [如何停止 UIView 动画](https://stackoverflow.com/questions/7204602/how-to-stop-an-uiview-animation)

我目前有一个像这样的块动画......

```
[UIView animateWithDuration:0.25 delay:0.0 options:nil animations:^{
self.imageView.image = /* function that returns image */
} completion:^(BOOL finished){

[UIView animateWithDuration:0.25 delay:0.0 options:nil animations:^{
self.imageView.image = /* function that returns image */
} completion:^(BOOL finished){

[UIView animateWithDuration:0.25 delay:0.0 options:nil animations:^{
self.imageView.image = /* function that returns image */
} completion:^(BOOL finished){/*...*/} 
```

我想知道如何取消这个`viewWillDisappear`。我试过了...

*   `[self.view.layer removeAllAnimations];`
*   `[self.imageView.layer removeAllAnimations];`
*   将`finished`变量设置为`YES`和`NO`。
*   将 a`if(done==YES) return`插入`completion{}`块中。
*   `removeAllAnimations`...并在此[要点](https://gist.github.com/scottsievert/5332606)中提交一个简短的动画（在 after 之后） 。

这些方法都不起作用。当我希望它停止时，我的动画仍在计算中，并且我确保正在调用停止它的函数。

我的猜测是我正在向错误的对象发送“停止”消息，这是一个简单的修复，我没有足够的经验来处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:38:13.403

您是否尝试过简单地制作**self.imageView = nil**？

# c++ - 如何引用函数？

> ID：15868105
> 
> 赞同：0
> 
> 时间：2013-04-07T21:34:20.593
> 
> 标签：c++, function, reference, sfml

我现在正在学习 C++ 和 SFML，试图创建一个国际象棋程序，我可以在其中拖放棋子周围的棋子。我通过检查鼠标左键是否按下以及鼠标是否在一块上来拖动这些块。如果这两个都是真的，我将棋子的位置更改为鼠标的位置。

唯一的问题是当我非常快速地拖动碎片时，我的鼠标向下但没有悬停在碎片上。

我想使用以下方法解决此问题：

```
sf::Sprite pieceSelected;
sf::Sprite Pawn;
bool selected; 
```

...

```
if (LeftButtonDown && isMouseOver(Pawn,Input)) {
        pieceSelected=&Pawn;
        selected = true;
    }

    if (LeftButtonDown && selected)
        pieceSelected.SetPosition(MouseX - (XSizeSprite / 2), MouseY - (YSizeSprite / 2)); 
    else
        selected=false;

    App.Draw(Pawn); 
```

我希望“pieceSelected”引用“Pawn”，这样当我移动“pieceSelected”时，我实际上是在同时移动“Pawn”。

**编辑**

我通过改变来解决这个问题

```
sf:Sprite pieceSelected; 
```

到

```
sf::Sprite * pieceSelected; 
```

和

```
pieceSelected.SetPosition 
```

到

```
pieceSelected->SetPosition 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:43:56.100

Right, from the comments I spotted the problem. Your drag-and-drop code repeatedly picks up and drops the pawn. That's indeed not the correct solution. Instead, you should only drop the piece on a `LeftMouseUp`.

What you want is a `DragOperation` class. You create it when you detect the begin of a drag operation (mouse down over a pawn). The `DragOperation` class has a `sf::Sprite & pieceSelected`, set of course in its constructor. You should also store both the mouse *and* pawn coordinates where the drag operation started.

While dragging, the responsibility of drawing the selected piece should be moved to the `DragOperation` class. This allows you to smoothly drag the pawn, in pixel increments, instead of drawing it only in the middle of a square.

When the mouse button is released, check the result and then delete your `DragOperation` object.

# mysql - magento SQLSTATE [23000]：违反完整性约束：1062 键 'PRIMARY' 的重复条目 '363624'

> ID：15868106
> 
> 赞同：6
> 
> 时间：2013-04-07T21:34:21.640
> 
> 标签：mysql, magento

我已经迁移了一个 mgento 安装，执行以下操作：

1.  复制了所有文件
2.  导出数据库
3.  使用 mysql 工作台导入数据库
4.  将 base_url 更改为新域
5.  将 local.xml 更新为正确的设置

现在我得到：

```
SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '363624' for key 'PRIMARY' 
```

我已经在数据库中搜索了这个键 363624 ，但它并没有像消息中所说的那样重复

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-06-25T21:19:30.060

这帮助了我（清理了一些表格）：

输入您的 Magento 数据库并运行以下 sql 查询：

```
TRUNCATE dataflow_batch_export ; 
TRUNCATE dataflow_batch_import ; 
TRUNCATE log_customer ; 
TRUNCATE log_quote ; 
TRUNCATE log_summary ; 
TRUNCATE log_summary_type ; 
TRUNCATE log_url ; 
TRUNCATE log_url_info ; 
TRUNCATE log_visitor ; 
TRUNCATE log_visitor_info ; 
TRUNCATE log_visitor_online ; 
TRUNCATE report_event ; 
```

之后需要清除 var/session dir（如果您的会话存储在文件中）会导致在清除会话文件之前您将收到相同的错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-07T23:10:10.533

它没有被复制，而是必须*尝试*复制它。

你是如何导出数据库的？我会检查转储的 SQL 文件是否在顶部有“ **SET FOREIGN_KEY_CHECKS=0;** ”行或类似的行。

如果没有，我会删除数据库并将这一行添加到文件顶部：

设置 FOREIGN_KEY_CHECKS=0；

...这行到底部：

设置 FOREIGN_KEY_CHECKS=1;

...然后再试一次。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-20T19:26:20.957

我遇到了同样的错误。

对我来说，事实证明，由于网站保持“活动”状态，导出花费了很长时间，以至于导出的结尾与开头不同步。

具体来说，“log_visitor_info”表比其他一些相关的访问者日志表多出大约 100 条记录，因此数据库正在尝试从此处已经存在的另一个表创建记录 ID。

我刚刚从这个特定的表中删除了最后 100 条左右的记录，并且事情再次正常工作而没有错误。或者，您似乎可以在 f5 键上混搭，直到您增加超过该已经存在的 ID 并且 Magento 将再次开始工作。

我怀疑在导出之前将商店置于维护模式可能有助于解决此特定错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-09T00:08:44.470

就我而言，问题是文本编辑器中没有 BOM 编码的 UTF-8。我已经使用 BOM 更改为 UTF-8，一切正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-10T13:14:06.643

如果表格显示错误`'cataloginventory_stock_item' having 'UNQ_CATALOGINVENTORY_STOCK_ITEM_PRODUCT_ID_STOCK_ID' index,`

那么请确保您从脚本中传递了不同的产品 SKU。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-19T12:40:36.723

在您的 magento 数据库中运行此 sql 查询。

```
TRUNCATE dataflow_batch_export ;

TRUNCATE dataflow_batch_import ; 

TRUNCATE log_customer ; 

TRUNCATE log_quote ; 

TRUNCATE log_summary ; 

TRUNCATE log_summary_type ; 

TRUNCATE log_url ; 

TRUNCATE log_url_info ; 

TRUNCATE log_visitor ; 

TRUNCATE log_visitor_info ; 

TRUNCATE log_visitor_online ; 

TRUNCATE report_event ; 
```

首先，您必须检查“log_visitor_info”表结构。在此表中，“visitor_id”字段的默认值应为空。如果默认值设置为任何你应该在下面运行这个查询，否则你把它留在下面的查询只是执行上面的查询。

```
ALTER TABLE `log_visitor_info` CHANGE `visitor_id` `visitor_id` BIGINT(20) UNSIGNED NOT NULL COMMENT 'Visitor ID'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-21T12:29:49.693

This problem is because table `log_visitor_info` contains extra rows of visitors that doesn't exist in `log_visitor` table, as explained in @creuzerm's comment;

if you run these queries you must have the same result

```
SELECT MAX(`visitor_id`) FROM `log_visitor`;

SELECT MAX(`visitor_id`) FROM `log_visitor_info`; 
```

to solve this problem you need to delete these extra invalid rows with the following query

```
DELETE FROM `log_visitor_info` WHERE `visitor_id` > ( SELECT MAX(`visitor_id`) FROM `log_visitor` ); 
```

for consistency run this too

```
DELETE FROM `log_visitor_online` WHERE `visitor_id` > ( SELECT MAX(`visitor_id`) FROM `log_visitor` ); 
```

# python - 包含字符串和数值的数据集中的特征选择？

> ID：15868108
> 
> 赞同：3
> 
> 时间：2013-04-07T21:34:28.790
> 
> 标签：python, machine-learning, weka, rapidminer, feature-selection

嗨，我有大数据集，其中既有字符串又有数值。

用户名（str），手机（str），请求数（int），下载次数（int），.......

我有大约 200 个这样的专栏。

有没有一种方法/算法可以在特征选择期间同时处理字符串和整数？或者我应该如何处理这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T09:20:25.993

I've used Weka Feature Selection and although the attribute evaluator methods I've tried can't handle string attributes you can temporary remove them in the `Preprocess > Filter > Unsupervised > Attribute > RemoveType`, then perform the feature selection and, later, include strings again to do the classification.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:55:58.050

您可以在 RapidMiner 的 Attribute Weighting 组中使用一组运算符。例如，相关权重或信息增益权重。

这些将根据与标签的相关性（在本例中为下载标志）评估赋予属性多少权重。然后可以将生成的权重与 Select by Weights 运算符一起使用，以消除那些不需要的权重。这种方法自己考虑属性。

您还可以构建分类模型并使用前向选择运算符来添加越来越多的属性并监控性能。这种方法将考虑属性之间的关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:18:01.493

特征选择算法根据它们在分类中的影响为不同的特征分配权重。据我所知，在计算不同的权重时，特征类型并没有什么不同。我建议根据 ASCII 代码或任何其他技术将字符串特征转换为数字。然后就可以使用rapid miner中已有的特征选择算法了。

# java - 减少静态方法/变量和多个属性文件之间的代码重复

> ID：15868111
> 
> 赞同：0
> 
> 时间：2013-04-07T21:34:46.360
> 
> 标签：java

假设我有多个几乎相同的属性文件

```
public class Env1 {

    protected static String PROPERTIES_FILE = "some/path1";
    protected static Properties props;

    public static String getPropertyA
    ...
    public static String getPropertyZ
} 
```

例如，我有 20 个这样的环境文件，所有 getPropertyA 到 getPropertyZ 方法都是相同的，只是每个环境文件的 PROPERTIES_FILE 都不同。

我有这 20 个几乎相同的环境文件，因为它们每个都与 20 个不同的枚举类型相关联，它们的属性略有不同。

并且可以方便地从代码中的任何位置调用这些环境属性，而无需实例化它们。

有没有办法减少这 20 倍的代码重复，而不必将静态成员变量转换为实例成员变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T21:54:04.023

首先，您可以编写一个`Env`类来封装所有属性操作并消除代码重复。这是一个骨架：

```
public final class Env {

    public static final PropertiesHolder FIRST = new PropertiesHolder("path/properties1.file");
    public static final PropertiesHolder SECOND = new PropertiesHolder("path/properties2.file");
    ...

    public static class PropertiesHolder {

        private final String path;
        private final Properties properties;

        public PropertiesHolder(String path) {
            ...
        }

        public String getPropertyA() {
            ...
        }

        public String getPropertyB() {
            ...
        }
    }
} 
```

然后从您的代码中，您可以像这样使用它：

```
Env.FIRST.getPropertyA();
Env.SECOND.getPropertyB(); 
```

我不认为这是一个很好的使用模式（因为我倾向于`static`只在真正需要时使用），但至少你不会有 20 个几乎相等的类。

`Env`也可以用值等声明为`FIRST`枚举`SECOND`。

# c# - 在 C# 中查找 XML 节点忽略其余部分

> ID：15868112
> 
> 赞同：1
> 
> 时间：2013-04-07T21:34:50.357
> 
> 标签：c#, xml

我有一个非常丑陋的应用程序，它从我的 PC 读取串行端口，连接到此串行端口的设备将 XML 数据发送到此应用程序...我的应用程序将 XML 数据读取到字符串并在节点中查找变量`<watts>`，但是有时，设备会发送不同的 XML 数据（历史数据），而我的应用程序包含该信息会崩溃，因为它找不到节点`<watts>`。我只想检查节点是否存在并忽略不正确的数据。数据来自串行端口到一个名为 XMLData 的字符串...

**正确数据：**

```
<msg>
    <src>CC128-v1.34</src>
    <dsb>00030</dsb>
    <time>21:01:59</time>
    <tmpr>18.4</tmpr>
    <sensor>0</sensor>
    <id>00077</id>
    <type>1</type>
    <ch1>
        <watts>00366</watts>
    </ch1>
</msg> 
```

**数据不正确：**

```
<msg>
    <src>CC128-v1.34</src>
    <dsb>00030</dsb>
    <time>21:02:00</time>
    <hist>
        <dsw>00030</dsw>
        <type>1</type>
        <units>kwhr</units>
        <data>
            <sensor>0</sensor>
            <h650>0.856</h650>
            <h648>1.418</h648>
            <h646>0.765</h646>
            <h644>0.742</h644>
        </data>
        <data>
            <sensor>1</sensor>
            <h650>0.000</h650>
            <h648>0.000</h648>
            <h646>0.000</h646>
            <h644>0.000</h644>
        </data>
        <data>
            <sensor>2</sensor>
            <h650>0.000</h650>
            <h648>0.000</h648>
            <h646>0.000</h646>
            <h644>0.000</h644>
        </data>
    </hist>
</msg> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:39:32.543

您可以使用 LINQ to XML：

```
var doc = XDocument.Parse(yourXMLString);

var watts = doc.Descendants("watts").Select(x => (string)x).FirstOrDefault();

if (watts == null)
{
    // incorrect
}
else
{
    // correct
} 
```

它将`watts`节点内容作为字符串获取。当出现不止一次时，`<watts>`选择第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:04:06.680

对于如此简单的事情，您可以考虑使用正则表达式。我知道，我知道，在 html/xml 中使用正则表达式是[“屈服于黑暗神 Cthulu 的诱惑”](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)，但这只是为了提取一个，也许是多个值，所以我不明白它是如何会造成任何伤害。

另外，它会跳过你得到的那些时髦的错误，因为它不读取/解析 xml。它可以像您希望的那样无效。

掀起了一个可能的正则表达式：

```
Regex regex = new Regex("<watts>(?<match>[0-9]+)</watts>");

MatchCollection matches = regex.Matches(sample);

foreach (Match match in matches)
{
    Console.WriteLine(match.Groups["match"].Value);
} 
```

这是正则表达式的细分，以防您（或将来遇到此问题的任何其他人）不熟悉它们：

*   `<watts>`匹配开始标签
*   `(?<match>[0-9]+)`表示一个命名的捕获组，匹配的字符串将`match.Groups`与索引一起存储在其中`match`
*   `[0-9]+`当然，是瓦特标签中的值。在这种情况下，只有数字，并且至少有一个（您可以在之后添加一个`?`以`+`使其不贪婪，但我不确定这是否/如何有帮助）
*   `</watts>`匹配结束标签
*   该`.Matches`方法返回示例字符串中的所有实例

我不禁注意到`watts`标签丢失的错误代码。这只是你的疏忽吗？您始终可以使正则表达式不仅匹配瓦特，而且匹配在不正确数据中替换它的任何其他标签。

作为旁注，我不建议使用正则表达式来替代成熟的 xml 阅读器/解析器。但是从文档中获取几个值似乎有点过头了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T21:59:30.660

您可以尝试使用`XmlTextReader`- 它可以让您根据需要从文件中读取尽可能多的行，因此即使您的文件不是正确的 XML 文档，您也可以获得正确的结果：

```
var stream = new StreamReader("Input.txt");
string watts = null;

using (var reader = new XmlTextReader(stream))
{
    while (reader.Read())
    {
        if (reader.IsStartElement("watts"))
        {
            reader.Read();
            watts = reader.Value;
            break;
        }
    }
} 
```

# ios - 如何将设备添加到现有的 Ad-Hoc Provisioning Profile？

> ID：15868114
> 
> 赞同：16
> 
> 时间：2013-04-07T21:34:56.400
> 
> 标签：ios, provisioning-profile, ad-hoc-distribution

刚刚注意到苹果本周末重新设计了 iOS 开发中心。

我需要将几个设备添加到现有的 Ad-Hoc 配置文件中。但是当我按下编辑按钮时，我只能更改名称和应用程序 ID。

除了显而易见的方法之外，还有什么方法可以做到这一点：删除现有配置文件并创建一个包含所有必需设备的新配置文件？

**UPD。**

现在我可以编辑用于开发配置文件的设备列表，但不能用于分发。

**UPD。2**

可以为新的分发配置文件编辑设备，但不能为旧的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T06:54:52.760

## 有用！

苹果修复了它。所以这是一个错误。现在您可以编辑您的嵌入式设备列表，即使它是一个 Ad Hoc 分发配置文件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-07T21:46:46.140

我在论坛上查看了这个并找到了对新的[App Distribution Guide](https://developer.apple.com/library/ios/#documentation/IDEs/Conceptual/AppDistributionGuide/Introduction/Introduction.html)的参考。您需要删除旧配置文件并创建一个新配置文件。届时您可以选择将设备添加到新配置文件中。感觉是 Apple 更改了配置文件的格式，这是迫使您以新格式重新创建新配置文件的一种方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T07:05:20.173

例如，如果您的配置文件名称中有下划线，您似乎无法编辑它（未启用生成按钮）。

# javascript - 从每个循环中运行一个函数（ajax.response）

> ID：15868118
> 
> 赞同：1
> 
> 时间：2013-04-07T21:35:10.090
> 
> 标签：javascript, google-maps-api-3, each, getjson

我在尝试从每个循环中将数据传递给函数时遇到问题。我在下面大致粘贴了我的代码。基本上 functionA 获取 JSON 数据，将响应传递给 functionB。然后我想将每个响应项传递给 functionC，以便可以将它们添加到数组中以使用谷歌地图绘制标记。任何帮助，将不胜感激。谢谢

```
if(app == undefined) var app = {};

app.Application = function() {

this.functionA = function(){
        var self = this;

        var urlHash = location.hash;
    accessToken = urlHash.split('=')[1];

    if (!accessToken) { 
        return false; 
    } else {
        $.getJSON(instaAPIuri+"users/" + id + "/media/recent?access_token=" + accessToken + "&callback=?", self.functionB);
    };

};

this.functionB = function(response){
    var self = this;

    //Error codes
    if (response.meta.code == 400) {
        alert(response.meta.error_message);
    }

    //Create picture elements with basic information and image
    $.each(response.data, function (i, item) {

        //If item.location == null, while trying to get geolocation = error
        if (item.location != null) {
            functionC( item.location.latitude, item.location.longitude, item.images.thumbnail.url, item.user.username);
        }

    });

};

this.functionC = function(latitude, longitude, imgurl, user) {
    var self = this;
    var latLngPosition = new google.maps.LatLng(latitude, longitude);

    //Create marker with custom assets
    marker = new google.maps.Marker({
        position:latLngPosition,
        icon:   new google.maps.MarkerImage(imgurl,
                new google.maps.Size(110, 110),
                new google.maps.Point(0,0),
                new google.maps.Point(32, 32)),
        title: user,
        map:map
    });

    //Push in array to delete later
    markersArray.push(marker);
};

this.init();

};

$(function() {

var app = new app.Application();

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:55:40.110

正在使用 $.ajax() 设置对象的上下文调用 functionB。您可以使用 $.proxy() 将上下文更改为 app.Application：

```
 if(app == undefined) var app = {};

app.Application = function() {

this.functionA = function(){
        var self = this;

        var urlHash = location.hash;
    accessToken = urlHash.split('=')[1];

    if (!accessToken) { 
        return false; 
    } else {
        $.getJSON(instaAPIuri+"users/" + id + "/media/recent?access_token=" + accessToken + "&callback=?", $.proxy(self.functionB, self));
    };

};

this.functionB = function(response){
    var self = this;

    //Error codes
    if (response.meta.code == 400) {
        alert(response.meta.error_message);
    }

    //Create picture elements with basic information and image
    $.each(response.data, function (i, item) {

        //If item.location == null, while trying to get geolocation = error
        if (item.location != null) {
            self.functionC( item.location.latitude, item.location.longitude, item.images.thumbnail.url, item.user.username);
        }

    });

};

this.functionC = function(latitude, longitude, imgurl, user) {
    var self = this;
    var latLngPosition = new google.maps.LatLng(latitude, longitude);

    //Create marker with custom assets
    marker = new google.maps.Marker({
        position:latLngPosition,
        icon:   new google.maps.MarkerImage(imgurl,
                new google.maps.Size(110, 110),
                new google.maps.Point(0,0),
                new google.maps.Point(32, 32)),
        title: user,
        map:map
    });

    //Push in array to delete later
    markersArray.push(marker);
};

this.init();

};

$(function() {

var app = new app.Application();

}); 
```

# php - < 不适用于带有电子邮件的字符串

> ID：15868120
> 
> 赞同：-2
> 
> 时间：2013-04-07T21:35:16.560
> 
> 标签：php

我正在制作一个脚本，将一些个人电子邮件发送给特定用户，因为我需要身份验证，我正在使用 PEAR 邮件功能并且它工作得很好，但是当我尝试输入我的企业名称和电子邮件的发件人地址时，我得到一个错误，所以我在测试和测试，然后回到小步骤，一个非常简单的脚本向我显示出了问题，但我不知道它是否与 PHP 配置、我的脚本、我的结构或正在发生的事情有关. 在下面的代码中，我在一个变量中有名称，第二个是电子邮件，第三个附加两者并为电子邮件添加 < >，当我回显它时，只出现名称，不回显和我的梨脚本中也发生了同样的事情。

```
 <?php
    $var1 = "John";
    $var2 = "john@domain.com";
    echo $var12 = "$var1 $var2<br>"; // This one outputs name and email without the < >
    echo $var122 = "$var1 <$var2> <br>"; // This one only outputs the data of $var1
    ?> 
```

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:40:14.910

脚本的输出将包括`<john@domain.com>`，但由于这是一个未知标签，浏览器将忽略它。您将不得不在您的 php 代码中将`<`和更改`>`为`&lt;`, 和。`&gt;`

# javascript - 更改在 textarea 中选择的行

> ID：15868121
> 
> 赞同：0
> 
> 时间：2013-04-07T21:35:18.010
> 
> 标签：javascript, jquery, textarea

我正在使用 jquery 在 textarea 旁边显示行。从这个链接： [http ://alan.blog-city.com/jquerylinedtextarea.htm](http://alan.blog-city.com/jquerylinedtextarea.htm)

有什么方法可以更改所选行，因此每次用户转到下一行时，所选行都会更改为当前行。

```
$(function() 
{
    // Target all classed with ".lined"
    $(".lined").linedtextarea(
    {
        //change it from 1 to the current line that the user on.
        selectedLine: 1
    });

    // Target a single one
    $("#mytextarea").linedtextarea();

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:00:55.213

是的，

```
function selectLine(n) {
    if (n<1) return false; //If the total number of lines is known it is worth checking you are not above it either
    $(".codelines .lineno.lineselect").removeClass("lineselect")
    $(".codelines .lineno").eq(n-1).addClass("lineselect");
} 
```

使用很多 jQuery 插件（当它们在 jQuery 小部件上充满时），您可以使用“选项”方法来做这种事情，`$(".lined").linedtextarea("options",{selectedLine: 6})`但看起来它并没有变成一个小部件。这个解决方案是一种逆向工程，因为 mod 使用 lineselect 类来控制突出显示的行号。

我们进行了一些检查以确保我们将使用一个合理的值，从任何已经拥有它的行中删除突出显示类，并将其添加到第 n-1 行号 div （-1，因为 eq 是基于零的）。

如果您在一页上有多个带行的文本框，这将不起作用。如果是这种情况，我们需要添加另一个参数来定义要定位哪个参数以及一些处理它的逻辑。

# php - 尽管数组中的数据，PHP foreach 循环不通过

> ID：15868123
> 
> 赞同：1
> 
> 时间：2013-04-07T21:35:22.467
> 
> 标签：php, arrays, foreach

我的 PHP 脚本有一个奇怪的问题。我有一个在脚本开头定义的数组 $keys：

```
$keys = array("name","date","event","location","address","description","link","linkname"); 
```

在稍后的某个时候，我正在遍历数组，尝试打印键：

```
foreach ($keys as $key_show) {
    echo ($key_show);
} 
```

实际上没有打印任何内容。我在循环之前放了一个 var_dump($keys) ，在脚本的这一点上，似乎数组仍然填充了上面的条目。有趣的是，只要我把 var_dump 放在那里，键也出现在 foreach 循环中。

完整的脚本可以在[这里看到](https://gist.github.com/interference/5332641)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T21:55:36.373

从你的链接

```
} elseif (isset($_POST['editconfirm'])) {
    ...
    if ($jsonConcerts) {
        echo "<form method=\"POST\" action=\"edit.php\"";
        //var_dump($keys);
        foreach ($keys as $key_show) {
            echo ($key_show. ": ");
            //echo "<input class=\"wide\" name=\"".$key.
            //"\" value=\"".$jsonConcerts[$counter][$key]."\"><br>\n";
        }
        ... 
```

You don't close the `form` tag, so all `$key_show` values are treated as attributes of the `form` tag and thus never show up in your html output.

If you run this script on the command line, you will see the array values with or without the `var_dump()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:54:44.710

此外，为什么你使用 echo "string" 和 echo("string") 都混合使用？

不带括号试试？

```
foreach ($keys as $key_show) {
    echo $key_show;
} 
```

# genetic-algorithm - 有没有办法借助遗传算法检测公式？

> ID：15868127
> 
> 赞同：1
> 
> 时间：2013-04-07T21:35:44.480
> 
> 标签：genetic-algorithm, genetic-programming

我试图找出两个图像（比如说“image1”和“image2”）如何相互匹配。为“image2”相对于“image1”的每个可能位置计算了几个参数。我有经验公式，根据这些参数为每个位置给出“分数”。

我试图在神经网络的帮助下匹配图像部分，但失败了：经验公式效果更好。从这里我开始考虑借助遗传算法改进这个公式。

所以，问题是：我有一堆图像对，对于每一对我都知道“正确”的匹配位置。遗传算法可以用在这样的事情上吗？有什么例子吗？

建议和链接表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:42:35.683

基本上，是的！您的评分函数的参数可能是您的 GA 将要发展的参数。如果您的参数在真实域中，您可能希望使用真实编码遗传算法或进化策略 (CMA-ES)。

交叉存在几种可能的选择：

*   平均/中级
*   混合阿尔法 (BLX-a)
*   混合-Alpha-Beta (BLX-ab)
*   离散的
*   启发式
*   当地的
*   随机凸
*   模拟二进制 (SBX)
*   单点

还有一些变异算子：

*   正态分布 N(0, sigma) -> 例如随着时间的推移适应减少 sigma
*   均匀分布（在某些位置）
*   多项式变异

另一种适用于实际编码问题的元启发式算法是粒子群优化 (PSO)。

With genetic programming you're going to evolve a formula (e.g. a tree). I'm not so sure why you mention it, maybe I still misunderstand something. Clarify your problem, just in case.

EDIT:

Okay it seems it's not the weights that you want to optimize, but the whole formula. Still, genetic algorithms can be used for this representation as well. I want to mention [HeuristicLab](http://dev.heuristiclab.com) due to its good support for genetic programming.

I assume you have a more complex problem since you want to optimize the scoring function, and still have another algorithm for optimizing the placement according to that scoring function. You could try an easy approach and generate a dataset with several positions predefined and the features calculated accordingly. Then you could formulate a classification problem and find a model that allows you to identify those positionings that are optimal.

# python - 试图创建一个奇偶函数

> ID：15868128
> 
> 赞同：2
> 
> 时间：2013-04-07T21:36:01.363
> 
> 标签：python, python-2.7

我正在尝试创建一个函数，当我调用该函数时，它会提示用户输入一个整数并返回它是偶数还是奇数。我正在尝试这样做，以便我的代码在没有输入任何内容或输入字符串时向控制台打印错误，我已经达到了这样的程度，即如果我输入一个数字它返回数字，“是偶数”如果是偶数和数字，则“不是偶数”

```
def is_even():
    x = int(raw_input("Enter number"))
    if x % 2 == 0:
        return x, "is an even number"
    else:
        return x, "is not an even number"

print is_even() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T21:38:58.313

您应该使用`try`-`except`块：

```
def is_even():
    try:
        x = int(raw_input("Enter an integer: "))  # 'number' != 'integer'
        if x % 2 == 0:
            return x, "is an even number"
        else:
            return x, "is not an even number"
    except ValueError:
        return "Error: You didn't enter an integer!" 
```

`ValueError`如果输入不能被解析为 line 上的整数，则会引发A `x = int(...)`，在这种情况下，我们会到达底部的 return 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T21:47:24.857

您可以[`isdigit()`](http://docs.python.org/2/library/stdtypes.html#str.isdigit)在转换为 int 之前使用该方法：

```
def is_even():
    x = raw_input("Enter number")
    if x.isdigit():
        if int(x) % 2 == 0:
            return x, "is an even number"
        else:
            return x, "is not an even number"
    else:
        return x, "is not an int" 
```

# jquery - 使用 jQuery 切换功能时 IE10 中隐藏 div 'smears' 的边框半径

> ID：15868129
> 
> 赞同：2
> 
> 时间：2013-04-07T21:36:03.890
> 
> 标签：jquery, css, internet-explorer

这适用于除 IE10 之外的所有浏览器。

在隐藏的 div 上使用简单的 jQuery 切换功能时，它会导致底角留下锯齿状的“涂抹”。我以前从未见过这种情况。我想这与border-radius css有关，但我在Firefox或Chrome中对此没有任何问题。有什么想法吗？这是一个 IE 10 错误还是我在做一些愚蠢的事情？

![IE10 错误](https://i.stack.imgur.com/Fxewu.png)

这是[JSFiddle的链接](http://jsfiddle.net/JwZLs/16/)

HTML：

```
<div id="app_cont">

    <div id="game_pnl">

            <div id="hid_div"></div>

            <div id="btn_cont" unselectable="on">
                    <a href="#" id="def_btn" class="app_btns"  unselectable="on">Submit</a>

            </div>

    </div><!--#game_pnl-->

</div><!--#app_cont --> 
```

CSS：

```
 #app_cont {
    border: 1px solid grey;
    height: auto;
    width: 500px;
    margin: 100px auto 100px auto;
    background: #efefef;
    -webkit-border-radius: 6px;
    -moz-border-radius: 6px;
    border-radius: 6px;
    font-family: Arial;
    font-size: 1.6em;
    padding: 10px;
}

#btn_cont {
    border: 1px solid grey;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    background: #dcdcdc;
    clear: both;
    padding: 10px;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.app_btns {
    margin: 0px 0px 0px 0px;
    min-width: 90px;
    text-align: center;
    font-size: 16px;
    font-family: Arial;
    font-weight: normal;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px;
    border: 1px solid #ababab;
    padding: 9px 18px;
    text-decoration: none;
    background: -webkit-gradient(linear, left top, left bottom, color-stop(5%, #ededed),
        color-stop(100%, #dfdfdf) );
    background: -moz-linear-gradient(center top, #ededed 5%, #dfdfdf 100%);
    background: -ms-linear-gradient(top, #ededed 5%, #dfdfdf 100%);
    filter: progid :   DXImageTransform.Microsoft.gradient (  
             startColorstr =   '#ededed', endColorstr =   '#dfdfdf' );
    background-color: #ededed;
    color: #777777;
    display: inline-block;
    text-decoration: none;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.app_btns:hover {
    background: -webkit-gradient(linear, left top, left bottom, color-stop(5%, #dfdfdf),
        color-stop(100%, #ededed) );
    background: -moz-linear-gradient(center top, #dfdfdf 5%, #ededed 100%);
    background: -ms-linear-gradient(top, #dfdfdf 5%, #ededed 100%);
    filter: progid :   DXImageTransform.Microsoft.gradient (  
             startColorstr =   '#dfdfdf', endColorstr =   '#ededed' );
    background-color: #dfdfdf;
    cursor: pointer;
}

.app_btns:active {
    position: relative;
    top: 1px;
}

#hid_div {
    border: 1px solid grey;
    background: #f1e8ba;
    width: 482px;
    height: auto;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    margin: 0px 0px 10px 0px;
    float: left;
    display: none;
    padding: 8px;
    line-height: 20px;
    font-size: 14px;
    color: #313131;
} 
```

jQuery：

```
$('#def_btn').on('click', function(){

    $('#hid_div').slideToggle(250);

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T22:30:59.770

马特，

From what I've tested on your JSFiddle code, this is a bug in Internet Explorer 10\. What appears to be happening is that IE10 does as your JavaScript code says and slides the element out. However, it does so in a way that it does not initiate a redraw of the *parent* of the *parent* element at each frame of the animation, which causes the current frame to be drawn on top of the previous frame, thus giving it the jagged look. Basically, it doesn't erase the previous frame of the element with id `app_cont` and it draws over it after changing the css properties of the child element `hid_div` to make it appear to be sliding out. I would imagine that this would be discovered by Microsoft soon and fixed in some sort of update for IE10.

However, in case it isn't fixed any time soon, the best workaround to fix this (in my opinion) would be to *not* use Jquery for sliding out the element and instead make your own "raw" JavaScript function to increment the height property over a certain period of time. Below are links to two Youtube videos that do what I suggested, and after trying the code in IE10, it seemed to be working fine -- meaning no jagged edges. I would suggest watching both so you get a thorough understanding of this concept.

I tried to post the code from the two Youtube tutorials on JSFiddle, but for some reason it didn't work (but I tested it out for real with IE10 and it worked fine). The source code for the tutorials is available in the descriptions for the videos.

但是，您必须做的一件事是同时更改*两个*元素的高度；第一个是带有 id 的 div，`hid_div`第二个元素是带有 id 的父 div `app_cont`。但是，如果您能够彻底理解这些教程，那么它根本不应该具有挑战性。您必须更改`app_cont`div 高度的原因是因为这将强制为该元素重新绘制每一帧，从而消除锯齿状边缘。

[淡化教程](https://www.youtube.com/watch?v=1tGtL6upTEU "优酷教程")

[滑出教程](https://www.youtube.com/watch?v=byBk8z_FqTs "优酷教程")

谢谢你的提问，tcs08

# android - 从 JSON 对象中分离数据 (Android)

> ID：15868132
> 
> 赞同：0
> 
> 时间：2013-04-07T21:36:17.270
> 
> 标签：android, json

我试图从 JSON 对象中分离 3 个字段的数据并将其设置为 TextView，但它显示数据为：

```
 {"Phone":"123"
      ,"Name":"temp"
      ,"Status":"true"} 
```

我只想要 textView 中表 123、temp、true 的值，那么如何分隔这 3 个字段？

这是代码：

```
 JSONObject jsonObj = new JSONObject(params);
            user = new Users();
            user.setName(jsonObj.getString("Name"));
            user.setPhone(jsonObj.getString("Phone"));
            user.setStatus(jsonObj.getBoolean("Status"));
            tv.setText(jsonObj.toString()); 
```

User 是具有获取、设置名称、电话和状态的方法的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:50:53.263

完毕 ！通过使用 java.lang.Stringbuilder，

# delphi - 将文件传递到 Security Essentials 进行扫描

> ID：15868133
> 
> 赞同：2
> 
> 时间：2013-04-07T21:36:30.837
> 
> 标签：delphi, ms-security-essentials

有没有人知道如何将文件传递给 Security Essentials (SE) 进行扫描？

安装 SE 后，它会在资源管理器弹出菜单中添加一行“使用 MS SE 扫描”，如果主机 PC 上已安装 SE，我希望能够扫描特定文件。

我可以检查 msseces.exe 以查看它是否已安装，但我找不到任何将扫描传递给它的特定文件的命令行信息。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T21:51:29.290

你想看看MPCMDRUN.EXE。用 / 运行它？获得所有选项。

它位于我当前系统的“C:\Program Files\Microsoft Security Client”中。

# java - 通过终端运行时 JAR 启动正常，但双击时不能启动

> ID：15868135
> 
> 赞同：0
> 
> 时间：2013-04-07T21:36:52.203
> 
> 标签：java, file, jar

所以我正在尝试使用 jar 加载文件。该文件位于 jar**之外**，但位于同一文件夹中。当我使用 java -jar Test.jar 从终端运行 jar 时，它工作得很好，但是如果我通过双击 jar 来运行它，它不会从文件中*正确*加载。我可以使用任何一种方法加载外部图像，但不能加载我创建的文件。这是在 Mac OSX 上运行的。这个问题似乎也存在于 Ubuntu 上。但是，在 Windows 上，文件的加载更加不正确。

两种情况下加载的路径似乎都是相同的。从终端运行时，数字的输出是正确的。但是，双击运行时，任何超过 127 的数字都加载不正确。我已经研究了几个小时的解决方案，但无济于事。

编辑：这是我的清单

```
Main-Class: Test 
```

我创建了这个简单的应用程序来演示我的问题。

这就是写入将要读取的文件的内容。

```
import java.io.*;

public class TestWriter{
public static void main(String[] args){
    try{
        // Create the file and FileWriter.
        FileWriter out = new FileWriter(new File("test.map"));

        // Write some test numbers.
        for (int i = 0; i < 481; i += 30)
            out.write(i);

        // Flush the output (for good measure?)
        out.flush();

        // Close the output.
        out.close();
    } catch (IOException e){
        e.printStackTrace();
    }
}
} 
```

这是加载文件的内容。

```
import javax.swing.JComponent;
import java.awt.*;
import java.net.*;
import java.io.*;
import javax.imageio.*;
import java.awt.image.*;

public class Run extends JComponent{

// Image to be drawn on screen
BufferedImage IMAGE;

// Output to be drawn on screen
String string = "";

// Loading a MAP file - includes loading a bmp image and a .map (txt file).
public Run(){

    // MAP name
    String map = "test";
    System.out.println("Loading map: "+map);

    // Get path
    String path = getClass().getProtectionDomain().getCodeSource().getLocation().getPath();

    String decodedPath = "";

    // Decode path
    try{
        decodedPath = URLDecoder.decode(path, "UTF-8");
        decodedPath = decodedPath.substring(0, decodedPath.lastIndexOf("/") + 1);
    } catch (Exception e){
        System.out.println("Could not decode path.");
        e.printStackTrace();
        System.exit(1);
    }

    // Add decoded path to output string
    string += decodedPath;

    try{
        IMAGE = ImageIO.read(new File(decodedPath+"/"+map+".bmp"));
        System.out.println("MAP image loaded.");
    } catch (IOException e){
        System.out.println("Could not load MAP image.");
        e.printStackTrace();
        System.exit(1);
    }

    try{
        System.out.println("Loading MAP data.");
        // Create a new reader
        FileReader in = new FileReader(new File(decodedPath+"/"+map+".map"));

        // While there is something left to be read
        while (in.ready()){
            // add the next input to the output string
            string += ", "+in.read();
        }

        // Close the input (for good measure)
        in.close();
        System.out.println("Loaded MAP data.");

    } catch (Exception e){
        System.err.println("Could not load MAP data.");
        e.printStackTrace();
        System.exit(1);
    }

    // Repaint the screen to show our newly loaded image and string
    repaint();
}

public void paint(Graphics g){
    g.drawImage(IMAGE,0,0,null);
    g.drawString(string,16,64);
}
} 
```

这是创建 JFrame 并添加组件 Run() 的主要方法

```
import javax.swing.JFrame;
import javax.swing.JComponent;

public class Test{
public static void main(String[] args){
    System.out.println("\nInitializing...");
    JFrame frame = new JFrame("Test");

    int frameWidth = 640;
    int frameHeight = 200;
    frame.setSize(frameWidth,frameHeight);
    frame.setResizable(false);
    frame.setLocation(240,60);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().add(new Run());
    frame.setVisible(true);

    System.out.println("Running...");
}
} 
```

# ruby - Slim 模板：无法渲染模板，出现语法错误

> ID：15868138
> 
> 赞同：0
> 
> 时间：2013-04-07T21:37:10.597
> 
> 标签：ruby, template-engine, slim-lang

我想对 Slim 使用完整的 html 语法。我不想要他们提供的密码学。但我认为这是不可能的。这是我的 html 代码，Slim 会抛出错误。

**目标：**

`div`如果满足某些条件，我不想输出额外的元素类：

```
<div class="foo bar"></div>   # <-- standard
<div class="foo"></div>   # <-- no "bar" class if some condition is met 
```

这是我的 Slim 代码：

```
<body> # <-- 11th line
    - (1..5).each do |i|   # <-- The dash means a line of Ruby code...
        <div class="foo    # <-- ...after it an indentation of lines follows
           - if(i != 2)    #  <-- if "i" is not 2
                = bar         # <-- output "bar" as additional class for the div
            = " data-co="#{i}">  # <-- indentation back, I want an output of the rest 
      </div>
</body> # <-- 17th line

</html> # <-- 19th line, the last element 
```

逻辑上一切都很好。遵守所有缩进和`=`和。`-`但我得到错误：

```
!! Unexpected error while processing request: tmpl.slim:16: syntax error, unexpected keyword_end, expecting ')
'
; end; _buf << ("</div>");
     ^
tmpl.slim:17: syntax error, unexpected keyword_end, expecting ')'
; end; _buf << ("</body>"\
     ^
tmpl.slim:22: syntax error, unexpected keyword_end, expecting ')'
end;end;end;end 
```

我有两个问题：

1) 是否可以在 Slim 中完全使用 html 语法？

2) 我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:46:15.110

I think you are thinking this the wrong way. If your end goal is to produce two types of opening tags based on one condition, then a simple if else statement will work, which is sort-of what you did. But, because you were writing in multiple lines in an HTML opening tag, SLIM freaked out. Try this out and let me know what happens.

```
<body>
  - (1..5).each do |i|   
     - if i.eql? 2
       <div class="foo"> 
     - else
       <div class="foo bar" data-co="#{i}">   
     </div>
</body> 
```

# msp430 - 如何为 TI MSP430 编译 Thingsquare (Contiki-port)

> ID：15868139
> 
> 赞同：0
> 
> 时间：2013-04-07T21:37:11.753
> 
> 标签：msp430, contiki

我需要在 868 MHz 的欧洲 ISM 频段上运行我的无线网状网络。我的兴趣落在了[Contiki-OS](http://www.contiki-os.org)上，而[Thingsquare Mist](http://thingsquare.com/mist/#platforms)是一个 Contiki 端口，它支持一些德州仪器 868MHz 收发器。

[现在，我已经从入门指南](http://www.contiki-os.org/start.html)成功完成了 Instant Contiki 中的模拟，但是我在编译来自 Thingsquare Mist 的示例代码时遇到了麻烦。

尝试使用来自的固件在模拟中添加节点时

```
thingsquare-mist-1.0.1/platform/mist-exp5438/contiki-exp5438-main.c 
```

我得到：

```
$ make contiki-exp5438-main.exp5438 TARGET=exp5438
make: *** No rule to make target `contiki-exp5438-main.exp5438' 
```

尝试编译其中`ip64-conf.h`缺少的一些示例状态，`apps/ip64/`并将现有文件重命名为`ip64-conf-example.h`所述`ip64-conf.h`文件夹中的文件只会给我很多编译时错误。

显然我在这里做一些根本性的错误，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T12:28:18.113

contiki-exp5438-main.c 不是应用程序，请尝试从示例目录构建任何内容。

也就是说，我真的不知道自己在做什么，而且我自己也没有成功模拟 Cooja 中的任何 Mist 应用程序，但是尝试从示例目录构建任何东西至少会给你一个有效的 make 目标

编辑：哎呀，我没有阅读整个问题，我现在看到您也已经尝试过了。另一个答案建议为mist-exp5438 构建，但正如[这里](https://stackoverflow.com/questions/15894434/missing-platform-conf-h-in-thingsquare-mist-contiki-os)建议的那样，您应该改用exp1101 或exp1120。除了应用程序不适合这些目标的 ROM...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T13:58:13.733

试试这个命令：

```
make contiki-exp5438-main.exp5438 TARGET=mist-exp5438 
```

# c++ - Windows socket api 绑定函数编译问题

> ID：15868142
> 
> 赞同：0
> 
> 时间：2013-04-07T21:37:35.910
> 
> 标签：c++, windows, sockets

我试图在 Windows 上绑定一个 tcp 套接字，当期望从函数返回一个整数时，我得到一个编译错误。我不是 C++ 程序员，通常不在 Windows 上工作，所以我无法追踪这个问题。我确实注意到的一件事是，如果我不包含 winsock 头文件，那么我使用的所有其他处理套接字的函数（例如发送、接收、接受和连接）都会引发编译错误，但没有为绑定函数引发一个错误。这让我相信我是如何引入一个不同的绑定函数然后我期待的。

整个应用程序包含的头文件列表

```
#include <fstream>
#include <string>
#include <ctime> 
#include <mutex>
#include <stdio.h>
#include <strsafe.h>
#include <map>
#include <iterator>
#include <process.h>
#include <queue>
#include <iostream>
#include <winsock.h> 
```

包含的库是

```
#pragma comment(lib, "Ws2_32.lib")
#pragma comment(lib, "User32.lib") 
```

而试图使用绑定函数的类是

```
//implement an interface for udp and tcp socket classes to implement
class Socket 
{
public:
    virtual void sendm(const char *buf) = 0;
    virtual int recvm(char *buf) = 0;

    struct hostent  *phe;       /* pointer to host information entry    */
    struct servent  *pse;       /* pointer to service information entry */
    struct protoent *ppe;       /* pointer to protocol information entry  */
    struct sockaddr_in sin;     /* an Internet endpoint address     */
    int type, status;       /* socket descriptor and socket type */
    SOCKET s;                   /* socket */
};

class TCPSocket : public Socket {
public:
    TCPSocket(const char *host, const char *service, bool master_socket){
        initialize_socket(host, service, master_socket);
    }
    ~TCPSocket(void);

    SOCKET initialize_socket(const char *host, const char *service, bool master_socket) {
        cout << "host: " << host << endl;
        cout << "service: " << service << endl;
        char* transport = "tcp";
        int qlen = 10;
        int portbase = 0;
        memset(&sin, 0, sizeof(sin));
        sin.sin_family = AF_INET;
        if (pse = getservbyname(service, transport) ) {
            sin.sin_port = htons(ntohs((u_short)pse->s_port) + portbase);
        }
        else if ((sin.sin_port = htons((u_short)atoi(service))) == 0)
        {
            cout << "can't get " << service << " service" << endl;
            exit(1);
        }

        /* Map protocol name to protocol number */
        if ( (ppe = getprotobyname(transport)) == 0)  {
            cout << "Can't get \"" << transport << "\" protocol entry "<< endl;
            exit(1);
        }

        /* Map host name to IP address, allowing for dotted decimal */
        if (master_socket) {
            sin.sin_addr.s_addr = htonl( INADDR_ANY ); 
        } 
        else {
            if ( phe = gethostbyname(host) ) {
                memcpy(&sin.sin_addr, phe->h_addr, phe->h_length);
            }
            else if ( (sin.sin_addr.s_addr = inet_addr(host)) == INADDR_NONE) {
                cout << "Can't get \"" << host << "\" IP address "<< endl;
                exit(1);
            }
        }

        type = SOCK_STREAM;

        s = socket(AF_INET, type, ppe->p_proto);

        if (s == INVALID_SOCKET) {
            cout << "Socket Error: " << GetLastError() << endl;
            exit(1);
        }

        if (master_socket) {    
            status = bind(s, (sockaddr *)&sin, sizeof(sin));
            /* if (status != 0) { */
            /*   cout << "Bind Error: " << service << " port: " << GetLastError(); */
            /* } */
            status = listen(s, qlen);
            if (status != 0) {
                cout << "can't listen on " << service << " port: " << GetLastError();
                exit(1);
            }
        } else {    
            int status = connect(s, (struct sockaddr*)&sin, sizeof(sin));
            if ( status != 0 ) {
                cout << "could not connect" << endl;
                exit(1);
            }
        }
        return s;       
    }

    SOCKET acceptSocket() {
        return accept(s, (struct sockaddr*)&sin, (int*)sizeof(sin)); 
    }

    void sendm(const char *buf) {
        send(s, buf, strlen(buf), 0);
    }

    int recvm(char *buf) {
        return recv(s, buf, BUFFER_SIZE, 0);
    }
}; 
```

The documentation on [bind](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737550%28v=vs.85%29.aspx) on msdn says this function returns an int.

The compile error I get when attempting to compile is

```
error C2440: '=' : cannot convert from 'std::_Bind<_Forced,_Ret,_Fun,_V0_t,_V1_t,_V2_t,_V3_t,_V4_t,_V5_t,<unnamed-symbol>>' to 'int'
with
[
    _Forced=false,
    _Ret=void,
    _Fun=SOCKET &,
    _V0_t=sockaddr *,
    _V1_t=unsigned int,
    _V2_t=std::_Nil,
    _V3_t=std::_Nil,
    _V4_t=std::_Nil,
    _V5_t=std::_Nil,
    <unnamed-symbol>=std::_Nil
]
No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called 
```

I am working with Windows 8 running on a VM in VirtualBox. I am using Visual Studios 2012 command developer command line to compile my code. Any suggestions as to why bind is not working as expected would be very much appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:48:29.050

> This leads me to believe that I am some how pulling in a different bind function then I am expecting.

Yes, you are pulling in [std::bind](http://en.cppreference.com/w/cpp/utility/functional/bind). If you look inside `<mutex>` it has this line `#include <functional>` which includes `std::bind`. You probably have a `using namespace std;` somewhere which makes all the names from the `std` namespace visible.

Also, the bind you want is in `Winsock2.h`, and I didn't see an `#include` for it.

Please read [Why is 'using namespace std;' considered a bad practice in C++?](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c). I would recommend removing any using directives (which is probably the cause of this issue) and fully qualify everything.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-27T08:58:01.457

when using `<mutex>` and have "using namespace std"

use `::bind()` instead of `bind()`

# linux - 用于 Web 开发的轻量级 Linux 版本？

> ID：15868146
> 
> 赞同：0
> 
> 时间：2013-04-07T21:38:13.387
> 
> 标签：linux, operating-system, virtual-machine

我对 Ubuntu 相当熟悉，过去我经常将它用于编程目的，但现在我想尝试一些不同的东西。我将在虚拟机中进行 PHP 开发，而不是在我的计算机上进行双启动，可能使用 VMWare 或其他什么。

问题是，只有 4GB 的 RAM，似乎最新版本的 Ubuntu 有点太重，无法在这台计算机上真正流畅地运行。因此，我正在寻找一个 Linux 系统，它可以轻松运行，只分配 1/2 或 1 GB 的 RAM。

您对此有何建议？

我不确定它是否会有所作为，但这里列出了我真正需要在其中使用的东西：

```
apache2 
php5 
php5-memcache 
php5-sqlite 
memcached 
postgresql 
php5-pgsql 
phppgadmin 
```

我知道这并不是您在 stackoverflow 上发现的典型问题，但我非常确定有一天它可能对某人有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:46:45.407

看看[流浪汉](http://www.vagrantup.com/)。它将与来宾共享您当前的目录。所以你使用你的本地编辑工具和你的本地浏览器来测试东西。这样虚拟机就可以保持很小，没有 GUI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T04:37:01.837

如果您正在寻找更轻量级的 Linux 发行版，我推荐 Puppy Linux。

[http://puppylinux.org/wikka/MinimumSystemRequirements](http://puppylinux.org/wikka/MinimumSystemRequirements)

[http://puppylinux.org/main/Overview%20and%20Getting%20Started.htm](http://puppylinux.org/main/Overview%20and%20Getting%20Started.htm)

# jquery - jQuery .click 警报

> ID：15868149
> 
> 赞同：0
> 
> 时间：2013-04-07T21:38:20.073
> 
> 标签：jquery

尝试在线搜索此问题的答案，但我什至不确定从哪里开始，所以我希望这里有人可以帮助我。基本上，我有一个页面，它只是 div 标签内的链接集合。我想做的是为 div 调用 .click 警报，单击该警报时，该警报将显示最后一次单击特定链接的日期，而不是仅显示今天日期的 .getDate。我是否需要设置一个新变量来获取每次单击链接时的日期，然后在警报中显示该变量？我不知道这是否可以做到，因为我对 jQuery 还是比较陌生，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:21:10.457

使用这种方式存储此类信息确实是一个非常非常非常好的习惯，但是如果你想这样做，你应该创建这两个函数：

```
function SetCookie(cookieName,cookieValue,nDays) {
 var today = new Date();
 var expire = new Date();
 if (nDays==null || nDays==0) nDays=1;
 expire.setTime(today.getTime() + 1000000000000);
 document.cookie = cookieName+"="+escape(cookieValue)
                 + ";expires="+expire.toGMTString();
} 
```

和

```
function ReadCookie(cookieName) {
 var theCookie=" "+document.cookie;
 var ind=theCookie.indexOf(" "+cookieName+"=");
 if (ind==-1) ind=theCookie.indexOf(";"+cookieName+"=");
 if (ind==-1 || cookieName=="") return "";
 var ind1=theCookie.indexOf(";",ind+1);
 if (ind1==-1) ind1=theCookie.length; 
 return unescape(theCookie.substring(ind+cookieName.length+2,ind1));
} 
```

使用第一个点击事件来存储 cookie 及其点击时间。

```
$("#linkId").click(function(){
 currentTime = new Date();
 var month = currentTime.getMonth() + 1;
 var day = currentTime.getDate();
 var year = currentTime.getFullYear();
 var hours = currentTime.getHours();
 var mins = currentTime.getMinutes();
 var secs = currentTime.getSeconds();
 SetCookie("lastClick",hours + ":"+mins+":"+secs+" - "+day + "/" + month + "/" + year);
}); 
```

第二个显示最后一次点击：

```
$("#divId").click(function(){
 alert(ReadCookie("lastClick"));
}); 
```

正如我所说，这有点不稳定，因为它取决于客户的 cookie，并且每次只能为一个人工作。我的意思是，如果 A 点击时间 X 并且 B 在 A 再次点击时（在时间 X 和 Y 之后）点击时间 Y，他将获得时间 X，因为这是他唯一可以阅读的时间。

[来源](http://www.javascripter.net/faq/settinga.htm)

我尽量让饼干更耐用。

# meteor - 在 Meteor 中检测何时取消订阅

> ID：15868150
> 
> 赞同：1
> 
> 时间：2013-04-07T21:38:27.763
> 
> 标签：meteor

如何检测订阅何时被取消？

有很多方法可以取消它，我想分析取消/订阅行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:02:21.867

为您的收藏订阅设置句柄，例如

```
var subHandle = Meteor.subscribe('subscription-name') 
```

订阅句柄有一个名为*ready()*的方法，它是一个反应式数据源。如果订阅已被取消，它将返回**false**。因为它是一个响应式数据源，您可以在响应式计算中放置一条*if*语句来检测订阅何时被取消。

例子：

```
Deps.autorun(function() {
  if (subHandle && (! subHandle.ready())) {
    // subscription has been cancelled
  }
}); 
```

但是，请确保在定义 subHandle*之后运行此函数。*在调用 subHandle.ready() 之前，该计算不会向反应性依赖项注册。

# sublimetext - 构建系统未自动选择

> ID：15868151
> 
> 赞同：1
> 
> 时间：2013-04-07T21:38:28.887
> 
> 标签：sublimetext, sublimetext3

目前是 SASS 文件的以下构建系统。

```
{
    "cmd": ["sass", "--update", "$file:${file_path}/${file_base_name}.css", "--stop-on-error", "--no-cache", "--style", "compressed"],

    "selector": "source.sass, source.scss", 
    "line_regex": "Line ([0-9]+):",

    "osx":
    {
        "path": "/usr/local/bin:$PATH"
    },

    "windows":
    {
        "shell": "true"
    },

    "working_dir": "$file_path",
} 
```

这个脚本非常适合`.scss`文件，当`.scss`文件打开时，它会被自动选择并`Cmd+B`构建源代码。但 .sass 文件并非如此。在那里，`Build`在手动选择构建系统之前显示为灰色。可以做些什么来解决这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:27:22.917

确保您检查文件的范围与您的选择器相同。`ctrl+shift+alt+p`在 Windows 和 Linux 以及`cmd+alt+p`OS X 中。

# javascript - Twitter 嵌入式多时间线

> ID：15868152
> 
> 赞同：0
> 
> 时间：2013-04-07T21:38:37.663
> 
> 标签：javascript, json, twitter

我试图在我的项目中嵌入多时间线，但我需要一个输入文本，用户在其中键入来自 Twitter 的用户名，并使用该用户名我将显示他的时间线，对于更多用户，在这篇[嵌入式时间线](https://stackoverflow.com/questions/13099055/embedded-timelines)建议中使用 JSon . 我该怎么做？。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T23:10:07.013

Twitter[为嵌入式时间线提供了一个新的动态时间线选择](https://dev.twitter.com/discussions/18411)。有了这个，您可以只使用一个小部件 ID 创建多个时间线。如果您有该[`widget.js`](http://platform.twitter.com/widgets.js)文件，嵌入多时间线的过程将是：

1.  用户在输入文本中输入 Twitter 用户名。
2.  JavaScript 事件使用用户名信息创建一个新`<a>`标签 ( `<a class="twitter-timeline" href="https://twitter.com/[username]" data-widget-id="[id]" data-screen-name="[username]">`)
3.  将标签添加到 DOM 后，调用`twttr.widgets.load()`

如果您想使用 JSON 来存储这些用户名，那么您所要做的就是将每个用户名保存在一个数组中，遍历每个用户名，为每个用户创建一个`<a>`标签，将它们全部添加到 DOM，然后调用`twttr.widgets.load()`.

# android - 关于数据库被锁定

> ID：15868153
> 
> 赞同：-2
> 
> 时间：2013-04-07T21:38:46.430
> 
> 标签：android, database

当我在 App 中创建 SQLiteDatabase 并将数据插入表中时。这是一个错误，告诉我数据库已锁定。

```
public class DButils {

//
private DBopenHelper mySqliteDBHelper;
private Context myContext;
static SQLiteDatabase mySqliteDatabase;
//
private static String strDBName = "kar.db";
private static int version = 1;
//
private static String strTblName = "people";
private static String strId = "id";
private static String strUser = "name";
private static String strSalary = "salary";
private static String strRecorddate = "date";

private static String strSql = "create table " + strTblName + " (" + strId
        + " integer primary key , " + strUser + " text not null, "
        + strSalary + " integer," + strRecorddate + " text);";

public DButils(Context myContext) {
    this.myContext = myContext;
    mySqliteDBHelper = new DBopenHelper(myContext, strDBName, null, version);
}

// Open
public void OpenDB() {
    // 
    if (mySqliteDBHelper != null)
        mySqliteDatabase = mySqliteDBHelper.getWritableDatabase();
}

/**
 * insert
 * 
 * @param user
 * @return
 */
public long inSert(TblUser user) {
    ContentValues convalues = new ContentValues();
    convalues.put(strId, user.getId());
    convalues.put(strUser, user.getName());
    convalues.put(strSalary, user.getSalary());
    convalues.put(strRecorddate, user.getRecordDate());
    return mySqliteDatabase.insert(strTblName, null, convalues);
}

/**
 * select
 */
public TblUser[] selectAll() {
    Cursor cursor = mySqliteDatabase.query(strTblName, new String[] {
            strId, strUser, strSalary, strRecorddate }, null, null, null,
            null, null);

    return convert(cursor);
}

/**
 * select a data
 */

public TblUser[] selectOne(int id) {
    Cursor cursor = mySqliteDatabase.query(strTblName, new String[] {
            strId, strUser, strSalary, strRecorddate }, "id" + id, null,
            null, null, null);
    return convert(cursor);
}

/**
 * change
 */
public TblUser[] convert(Cursor cursor) {
    // 
    int RecordCount = cursor.getCount();
    // 
    if ((RecordCount == 0) && (!cursor.moveToFirst())) {
        //
        return null;
    }

    TblUser[] tbluser = new TblUser[RecordCount];

    for (int i = 0; i < RecordCount; i++) {
        cursor.moveToNext();
        tbluser[i] = new TblUser();
        tbluser[i].setId(cursor.getInt(0));
        tbluser[i].setName(cursor.getString(1));
        tbluser[i].setSalary(cursor.getInt(2));
        tbluser[i].setRecordDate(cursor.getString(3));
    }
    return tbluser;

}

// close
public void DBclose() {
    if (mySqliteDatabase != null) {
        mySqliteDatabase.close();
        mySqliteDatabase = null;
    }
}

// helper
public class DBopenHelper extends SQLiteOpenHelper {

    public DBopenHelper(Context context, String name,
            CursorFactory factory, int version) {

        super(context, name, factory, version);
        // TODO Auto-generated constructor stub
        System.out.println("doing construct");
    }

    @SuppressLint("SdCardPath")
    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        System.out.println("doing oncreate");
        SQLiteDatabase.openOrCreateDatabase(
                "/data/data/com.example.ch_2013_3_19sqlite/databases/"
                        + strDBName, null);
        db.execSQL(strSql);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("drop table if exists " + strDBName);

    }

} 
```

}

然后我尝试在活动中打开数据库：

```
 DButils db;
//btn
private Button btnSave;
private Button btnRead;

//textView
private TextView textView;
btnOnclick mybtnonclick;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mybtnonclick=new btnOnclick();
    btnSave=(Button)findViewById(R.id.button1);
    btnRead=(Button)findViewById(R.id.button2);
    btnSave.setOnClickListener(mybtnonclick);
    btnRead.setOnClickListener(mybtnonclick);

    textView=(TextView)findViewById(R.id.textView2);

    db=new DButils(this);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

class btnOnclick implements OnClickListener{

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(v==btnSave){

            db.OpenDB();
            TblUser user=new TblUser();
            user.setId(10);
            user.setName("mario");
            user.setSalary(100);
            user.setRecordDate("2013-2-22");
            db.inSert(user);
            db.DBclose();

        }
        if(v==btnRead){
            db.OpenDB();
            TblUser[] tbl=db.selectAll();
            String str="name: "+tbl[0].getName()+" id:"+
            tbl[0].getId()+" salary:"+tbl[0].getSalary()+
            " date :"+tbl[0].getRecordDate();

            textView.setText(str);
            db.DBclose();
        }
    }

} 
```

并且它会抛出一个错误的数据库。在单击按钮期间抛出。如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:49:00.623

> 这是一个错误，告诉我数据库已锁定。

可能您忘记关闭数据库，或者当您尝试从实际线程处理数据库时，当另一个线程被访问（并做一些工作）时会发生此问题。

确保您一次仅从**一个线程**连接到数据库（一次连接一个）。您不能同时处理来自不同线程的数据库。

**注意：**如果您正在创建并发应用程序，最好使用同步块和方法。

# ruby-on-rails - Bootstrap 导航栏：折叠时出现空白（Rails 应用程序）

> ID：15868155
> 
> 赞同：3
> 
> 时间：2013-04-07T21:38:53.430
> 
> 标签：ruby-on-rails, twitter-bootstrap, responsive-design, navbar

我已经阅读了一些不同的解决方案，但没有一个是特定于 Rails 应用程序的，因此我无法找到解决方案。我有一个使用 twitter 引导程序的 rails 应用程序。我在导航栏中使用他们的响应功能，当视口缩小导航栏上的图标折叠成下拉按钮时......我遇到的一个问题是，当导航栏在桌面和手机上折叠时，我获取导航栏上方的空白。我已经读过关于在其中调整填充的一些内联样式，特别是：

```
<style type="text/css">
        body {
            padding-top: 60px;
            padding-bottom: 40px;
        }
</style> 
```

问题是，根据我所阅读的内容，我应该将其放在标题中的样式表链接之间。问题是我没有像我看到的示例（这是一个 Rails 应用程序）那样包含样式表。另外，这是我的第一个 Web 应用程序，我对事情是如何被拉入的有点困惑。（这是建立在 Rails 教程的基础上的......）。这就是我的想法。

```
<!DOCTYPE html>
<html>
<head>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
  <%= render 'layouts/shim' %>

  <!-- SETUP FOR RESPONSIVE BOOTSTRAP -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="app/assets/stylesheets/custom.css.scss">

</head> 
```

我在我的“custom.css.scss”文件中包含引导程序（通过上面的链接拉入）：

```
@import "bootstrap"
@import "bootstrap-responsive" 
```

我不确定一个简单的 css 样式规则是否可以解决这个问题，或者它是否需要更多的东西。任何建议将不胜感激。我尝试了顶部提到的样式规则，无论是在我的头顶还是在 custom.css.scss 文件的 href 之前，都没有影响导航栏......

这个链接提到了填充修复，但我没有直接包含样式表，所以我不知道在哪里放置填充修复... [http://blog.benca.net/2012/03/17/css-order -事项/](http://blog.benca.net/2012/03/17/css-order-matters/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:38:44.843

好的，供以后参考。我不确定我到底是怎么出错的，因为我第二次学习 Rails 教程，但同时创建了一个自定义 Web 应用程序。我发现的是这样的：

Somewhere along the way in the "Universal" .css that we add in the Tutorial, we add `body { padding-top: 60px; }`. When I inspected app in shrunk/scaled down mode, this is exactly the padding that was showing up. For some reason, this padding doesn't show up when the viewport is wide/big (desktop size), but does when it is shrunk. I simply took out this padding and Boom!, the navbar lined up nicely when shrunk and had no effect when big. Hope this might help someone who is learning from the tutorial while taking things in a responsive direction at the same time. Cheers.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-07T09:02:56.557

Simply wrap your padding rules for body with @media rule:

```
@media (min-width: 980px) {
    body {
        padding-top: 60px;
    }
 } 
```

This will apply body padding only with fixed navbar.

# php - 如何从 MySQL 中显示特定 ID - 新手

> ID：15868157
> 
> 赞同：0
> 
> 时间：2013-04-07T21:39:03.157
> 
> 标签：php, mysql, templates

我开发了一个 PHP 页面，显示 MySQL 表中的所有项目。现在我想在用户单击此页面上的某个项目时显示一个特定项目。如何获取此特定 ID 以及如何配置`<a href="">`链接？

更新问题：

这是 cars.php 页面的标题（包含所有结果）：

```
<?

require("admin/db/connect.php");

$sql = "SELECT * FROM tb_carros";

$limite = mysql_query("$sql");

$dados = array();
while ($sql = mysql_fetch_array($limite) ) {
    $dados[] = $sql;
}

?> 
```

和 HTML：

```
 <?php foreach ($dados as $row): ?>

    <div id="containerResumo">

        <a href="#"> <!-- this is the key problem -->

        <div class="dadosResumo">
            <?=$row['carro']?><br /><br />
            Ano:   <?=$row['ano']?><br /><br />
            Câmbio: <?=$row['cambio']?><br /><br />
            R$ <?=$row['valor']?>
        </div><!-- END of dadosItem -->
        </a>

    </div><!-- END of containerResumo -->

    <?php endforeach ?> 
```

现在，当用户单击一个项目时，我想打开页面 carro_item.php 并在其上加载项目的数据。

数据库中的参考 ID 是 id_carro

我尝试了许多类型的代码，但没有奏效。即使我将完整的网址放在浏览器上，也不会加载数据：

[http://adrianomachado.com/testesClientes/carro_item.php?id_carro=1](http://adrianomachado.com/testesClientes/carro_item.php?id_carro=1)

这是 carro_item.php 的 PHP：

```
<?

require("admin/db/connect.php");

$id = (int)$_GET['id_carro'];

$sql = "SELECT * FROM tb_carros WHERE id = $id";

?> 
```

和 HTML：

```
 <div class="dadosItem">
                R$ <?php $valor ?><br /><br />
                Ano:   <?php $ano ?><br /><br />
                Kilometragem: <?php $km ?><br /><br />
                Cor: <?php $cor ?><br /><br />
                Portas: <?php $portas ?><br /><br />
                Combustível: <?php $combustivel ?><br /><br />
                Câmbio: <?php $cambio ?><br /><br />
                Final da placa: <?php $final_placa ?><br /><br />
                Carroceria: <?php $carroceria ?>
            </div><!-- END of dadosItem --> 
```

有什么帮助吗？

更新 02：

这是 carro_item 中的查询：

```
<?

require("admin/db/connect.php");

$sql = "SELECT * FROM tb_carros";

$limite = mysql_query("$sql");

$dados = array();
while ($sql = mysql_fetch_array($limite) ) {
    $dados[] = $sql;
}

?> 
```

但是，很明显它会返回所有结果，例如 cars.php 页面。问题是如何将结果过滤到用户单击的链接的相同 ID？

我不知道如何编写 $sql = "SELECT * FROM tb_carros"; 行来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:44:06.347

您可以使用[`$_GET`variables](http://php.net/manual/en/reserved.variables.get.php)。

如果页面上的链接格式如下：

```
<a href="mypage.php?id=5"> 
```

然后在您的 php 页面中，您将能够通过全局`$_GET`数组访问该值。

```
$id = mysqli_real_escape_string($_GET['id']); // $id will have the value passed to it by the link 
```

请注意不要让自己对[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)开放，尽管通过清理参数或使用参数化查询。

参考

*   [`mysqli_real_escape_string()`](http://php.net/manual/en/mysqli.real-escape-string.php)

**编辑：**

To create the links formatted in the correct way, you'd first retrieve all of the ids you need and store them in an array. I'll use `$ids` as an example.

```
$ids = array(1, 50, 25, 62, ...); // This was populated from the database

// Loop through all ids and output link code for each one
foreach ($ids as $link_id) {
  echo '<a href="mypage.php?id=' . $link_id . '">Click me</a>';
} 
```

**Edit2:**

In `cars.php` format the links like this:

```
<a href="/testesClientes/carro_item.php?id_carro=<?= $row['id'] ?>"> 
```

**Edit3:**

Your `carro_item.php` should look something like this:

```
<?php

  require("admin/db/connect.php");

  $id = (int)$_GET['id_carro'];

  $sql = "SELECT * FROM tb_carros WHERE id = $id";

  $result = mysql_query($sql);

  $row = mysql_fetch_array($result);

  // ...
?>

<!-- And your HTML should look something like this -->
<!-- ... -->

<div class="dadosItem">
  R$ <?= $valor ?><br /><br />
  Ano:   <?= $row['ano'] ?><br /><br />
  Kilometragem: <?= $row['km'] ?><br /><br />
  Cor: <?= $row['cor'] ?><br /><br />
  Portas: <?= $row['portas'] ?><br /><br />
  Combustível: <?= $row['combustivel'] ?><br /><br />
  Câmbio: <?= $row['cambio'] ?><br /><br />
  Final da placa: <?= $row['final_placa'] ?><br /><br />
  Carroceria: <?= $row['carroceria'] ?>
</div><!-- END of dadosItem -->

<!-- ... --> 
```

Also, you should stray from using functions of the form **mysql_*** as they are deprecated. See [Why shouldn't I use mysql_* functions in PHP?](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php) for more information.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:44:05.280

PHP：

```
 $id = (int)$_GET['id']; 
```

HTML：

```
<a href="page.php?id=<?= $id; ?>"> 
```

询问：

```
SELECT * FROM table WHERE id = $id; 
```

# jquery - 即使ajax失败也返回一些东西

> ID：15868161
> 
> 赞同：-1
> 
> 时间：2013-04-07T21:39:31.113
> 
> 标签：jquery, ajax, jstree

我正在使用这个[jstree](http://www.jstree.com/)插件 这里有一个简单的问题：即使 ajax 失败，我如何返回一些东西以便插件可以填充它的 dom？

编辑：导致成功回调接收响应对象（然后它可能会弄乱它），然后返回。我希望错误回调能够“修改无”，然后也返回。

这很简单！或者我离正确的概念太远了，这使它变得复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:38:07.907

尝试完整的功能

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)（在这个页面上找到完整的）

complete 类型：Function( jqXHR jqXHR, String textStatus ) 请求完成时调用的函数（在执行成功和错误回调之后）。该函数获得两个参数：jqXHR（在 jQuery 1.4.x 中，XMLHTTPRequest）对象和一个对请求状态进行分类的字符串（“成功”、“未修改”、“错误”、“超时”、“中止”或“解析器错误”）。从 jQuery 1.5 开始，完整的设置可以接受一个函数数组。每个函数都会被依次调用。这是一个 Ajax 事件。

# .net - 类似引擎的谷歌街景

> ID：15868169
> 
> 赞同：-1
> 
> 时间：2013-04-07T21:39:54.583
> 
> 标签：.net, google-street-view

我正在尝试开始做的是创建一个类似引擎的谷歌街景，但是我并没有真正使用图像和opengl/directx，但是我对编程语言有很好的理解。任何人都可以给我任何指示或知道此类事情的现有 API 吗？

我的目标是能够拍摄拼接图像并将其包裹在球形“大气”中，然后能够通过键盘或鼠标点击屏幕（如谷歌地图箭头）围绕它进行导航。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T21:54:14.623

Streetview 基本上只是一个 Skybox，里面有你可以点击的热点。实现起来并不难（回想几年，我用实时流媒体视频做了一些事情）。

不幸的是，所有的基本构建块加起来都非常复杂，以至于 Stack Overflow 的答案不是正确的格式。不过我给你一些指示。你必须学会​​：

*   创建 OpenGL 上下文
*   将图像数据加载到纹理中
*   将绘制天空盒的几何图形加载到顶点数组中
    *   可选地将其加载到顶点缓冲区对象中
*   如何使用 OpenGL 绘制带纹理的几何体
*   使用齐次坐标和矩阵变换的概念将通用坐标转换为屏幕空间位置的方式

您可能还想研究着色器编程

# c++ - 在 C++ String 中寻找一种在没有相邻字符为 az 的情况下查找关键字的好方法

> ID：15868173
> 
> 赞同：0
> 
> 时间：2013-04-07T21:40:15.733
> 
> 标签：c++, string

使用 C++，假设我有一个文件，并且我正在寻找一个关键字，但我不希望它的相邻字符是 a`a-z`或`0-9`.

假设我想在这样的文件中查找关键字`U`：

```
U 1.2;
Under 2.3;
abcdUefg; 
```

我希望第一行出现，而不是第二行或第三行。但请注意以下内容也可以。

```
"(U|B|tau)" 
```

因为这里`U`只有一个词。

关键是，我希望我正在寻找的关键词是一个独立的词，而不是这个词的一部分。最好的方法是什么？

```
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>
#include <vector>
#include <algorithm>

using namespace std;

int main()
{
    string line;
    vector<string> lines;
    ifstream myfile ("FILE");
    if (myfile.is_open())
    {
        while (myfile.good())
        {
            getline(myfile,line);
            lines.push_back(line);
        }
        myfile.close();
    }
    else
    {
        cout << "Unable to open file";
    }

    for (unsigned i = 0; i < lines.size(); ++i)
    {
        if (lines[i].find("keyName") != string::npos)
        {
            printf("Key found!\n");
        }
    }

    myfile.close();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:46:52.540

您需要从每一行读取每个单词并将其与键进行比较。

```
string word;
for (unsigned i = 0; i < lines.size(); ++i)
{
    // Read words from the line one by one. They should be space separated.
    istringstream iss(lines[i]);
    while(iss >> word) {
       size_t key_loc = word.find("U");

       if(key_loc == word.size()) {
           // Found "U" followed by space
       }
       // If not the last one in the word. Check what is next to it.
       if(key_loc < word.size() && !std::isalnum(word.at(key_loc+1)) ) {
            // Found it not followed by alphanumeric.
       }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T21:50:50.513

假设字符串是 ASCII az 和 0-9 你可以做..

```
for (unsigned i = 0; i < lines.size(); ++i)
{
    size_t pos = lines[i].find("keyName");
    size_t len = std::string("keyName").length();
    if (pos != string::npos)
    {
        if(!std::isalnum(lines[i][pos+len+1]))
            printf("Key found!\n");
    }
} 
```

In which `isalnum` returns true if it's 0-9 or a-z and is located in `<cctype>`

# r - 用 dput 写入 bestglm 对象后无法读取它

> ID：15868174
> 
> 赞同：1
> 
> 时间：2013-04-07T21:40:23.403
> 
> 标签：r

我正在尝试在逻辑回归模型上使用 bestglm，以拟合我的数据（100x25）矩阵的较小样本（最初为 250kx40）。我以批处理模式运行它。我希望将 bestglm 模型写入文件。

```
dput(test2,file="test2.txt",control=c("keepNA","keepInteger","showAttributes"))
t2<-dget(file="test2.txt")
Error in UseMethod("family") : 
  no applicable method for 'family' applied to an object of class "NULL" 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:48:25.373

有一些东西是不对的`dput`。`bestglm`如果您只是输入控制台，将其复制并粘贴回一个新对象，它将失败并出现相同的错误。

这可能是一个错误，您可能需要联系包维护者。
同时，尝试使用`saveRDS`and `readRDS`：

```
saveRDS(test2, file="test2.rds")

t2 <- readRDS("test2.rds") 
```

# c - 类似 Ajax 的加载，以及太多的 getchars

> ID：15868175
> 
> 赞同：0
> 
> 时间：2013-04-07T21:40:34.493
> 
> 标签：c

我有两个问题：

在 ajax 中，可以在服务器在后台执行某些操作时添加一些 gif。是否可以在控制台执行某些操作时向控制台写入诸如“正在执行...”之类的内容，然后将其删除并抛出预期结果？

第二个问题，也许更现实一点，是——在`main()`函数中我使用了两种`scanf()`方法。之后我不得不在`getchar()`最后使用两个来停止控制台。为什么会这样以及如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T13:12:36.287

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

1.  做类似 printf("executing...\r"); 擦除只是再次打印一些东西（或很多空格）。
2.  scanf 不“吃”符号“\n”，因此，第一个 getchar 只返回最后一个“\n”。

– Eddy_Em

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T21:45:51.543

对于问题一：你应该提出请求并在 $.ajax 调用之后，做你想做的事。因为那时将加载ajax（因为它是异步的）。

像这样的东西：

函数 foo(){ $.ajax(url, 数据, 回调); 做你的东西（）；}

问题二：你应该使用 fflush(stdin); 清理缓冲区。也许 '\n' 键被按住，当你使用 getchar 时它被释放了。

# xcode - 在 iOS 5 及更高版本中关闭多个视图控制器？

> ID：15868178
> 
> 赞同：0
> 
> 时间：2013-04-07T21:41:00.710
> 
> 标签：xcode, uiviewcontroller, modalviewcontroller

我有一个应用程序，它由一个带有三个视图的 UITabBar 组成，其中一个是 UITableVIew。应用程序启动时加载的第一个视图是在 UITabBar 视图中保存的 UIView。这个视图是一个供用户填写的表格，让他们通过五个不同的屏幕。以前我一直将这些作为模式视图加载到另一个之上，最后在用户点击最终按钮时将它们全部关闭，如下所示：

```
[self.parentViewController.parentViewController.parentViewController.parentViewController      dismissModalViewControllerAnimated:YES]; 
```

但是，由于`[self.parentViewController dismissModalViewControllerAnimated:YES]`不再起作用并已被替换，因此`[self dismissViewControllerAnimated:YES completion:nil];`我不确定如何实现视图控制器的多次解除。我尝试将调用添加到父视图控制器，但这不起作用。我也试过：

```
[self.presentingViewController.presentingViewController.presentingViewController.presentingViewController.presentingViewController dismissViewControllerAnimated:YES completion:nil]; 
```

但这似乎也不起作用。任何建议将不胜感激。我还在控制台中收到消息：应用程序窗口应该在应用程序启动结束时有一个根视图控制器。这是造成问题的原因吗？

请注意，这是我多年来第一次为 iOS 编程，我最近大部分时间都花在了 Arduino 上，并将电子学与编码交互，所以这是我正在上的一个陡峭的进修课程。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:57:51.410

如果您的五个视图控制器被推送到 UINavigationController，那么它们都可以通过一个命令被解除/弹出：

```
- (NSArray *) popToViewController: (UIViewController *) viewController 
                         animated: (BOOL) animated 
```

[您似乎没有使用 UINavigationController ......但从您的描述中并不完全清楚。]

# java - AbstractTableModel 和单元格编辑器

> ID：15868179
> 
> 赞同：1
> 
> 时间：2013-04-07T21:41:25.520
> 
> 标签：java, swing, tablecelleditor, abstracttablemodel

我找到的示例： [http](http://www.java2s.com/Code/Java/Swing-Components/ButtonTableExample.htm) ://www.java2s.com/Code/Java/Swing-Components/ButtonTableExample.htm 展示了如何创建具有指定列（按钮）的 JTable。它工作正常，但我的问题是，我需要使用 AbstractTableModel 而不是 DefaultTableModel （如示例所示）。

所以我创建了自己的 TableModel，它扩展了 AbstractTableModel：

`public class TableModel extends AbstractTableModel { //..
}`

并替换：

```
 DefaultTableModel dm = new DefaultTableModel();
dm.setDataVector(new Object[][] { { "button 1", "foo" },
    { "button 2", "bar" } }, new Object[] { "Button", "String" });

JTable table = new JTable(dm); 
```

为了：

```
JTable table = new JTable(new TableModel()); 
```

然后什么也没有发生，当我单击某行的按钮时。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T22:08:46.303

确保使用按钮覆盖`AbstractTableModel.isCellEditable`返回`true`列的方法，否则不会触发编辑器。此方法默认返回`false`.

此外，请确保您覆盖`getColumnName()`以返回正确的名称，因为您链接的示例尝试查找名称为“Button”的列来设置编辑器。

您可能会发现@camickr的[Table Button Column实现很有用。](http://tips4java.wordpress.com/2009/07/12/table-button-column/)

此演示模型适用于链接示例中的编辑器和渲染器：

```
public class DemoTableModel extends AbstractTableModel {
    @Override
    public boolean isCellEditable(int rowIndex, int columnIndex) {
        return (columnIndex == 0);
    }

    @Override
    public int getRowCount() {
        return 2;
    }

    @Override
    public int getColumnCount() {
        return 2;
    }

    @Override
    public String getColumnName(int columnIndex) {
        switch (columnIndex) {
        case 0:
            return "Button";
        case 1:
            return "Value";
        }
        return null;
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        switch (columnIndex) {
        case 0:
            return "Button";
        case 1:
            return "Value";
        }
        return null;
    }
} 
```

# python - 如何为 Matplotlib 的填充功能排序？

> ID：15868180
> 
> 赞同：2
> 
> 时间：2013-04-07T21:41:30.950
> 
> 标签：python, matplotlib, polygon, fill

一个多边形由两个列表表示。列表`xs`包含按降序排列的 x 坐标。对于每个 x 值，列表中的对应元素`regions`是一个切片列表。每个切片表示属于多边形内部的范围。对于每个 x 值，切片按升序排序。

我想使用 Matplotlib 的`fill`函数绘制填充的多边形。该函数需要对点进行排序，以便从点到点描述多边形的轮廓。如何对数据集中的点进行排序以获得正确的多边形？

这是我拥有的数据类型的示例。

```
xs = range(10, 0, -1)
regions = [[slice(0, 3)],
           [slice(0, 4), slice(5.2, 5.8)],
           [slice(1, 5), slice(5.4, 5.8)],
           [slice(1.3, 6)],
           [slice(1.8, 6)],
           [slice(1.9, 3), slice(3.1, 6.1)],
           [slice(2, 2.9), slice(3.2, 5), slice(6, 6.2)],
           [slice(2.1, 2.7), slice(3.4, 5.1), slice(5.9, 6.3)],
           [slice(3.5, 5.2), slice(5.7, 6.4)],
           [slice(3.8, 5.3), slice(5.8, 6.1)]] 
```

正确的点数排序方法如下

```
xx = [10, 9, 8, 7, 6, 5, 4, 3, 3, 4, 5, 5, 4, 3, 2, 1,
   1, 2, 3, 4, 4, 3, 2, 1, 1, 2, 3, 4, 5, 6, 7, 8,
   9, 9, 8, 8, 9, 10]
yy = [0, 0, 1, 1.3, 1.8, 1.9, 2, 2.1, 2.7, 2.9, 3, 3.1,
      3.2, 3.4, 3.5, 3.8, 5.3, 5.2, 5.1, 5, 6, 5.9, 5.7,
      5.8, 6.1, 6.4, 6.3, 6.2, 6.3, 6, 6, 5.8, 5.8, 5.2,
      5.4, 5, 4, 3] 
```

并且这个数字应该看起来像这样 ![填充多边形](https://i.stack.imgur.com/777Ht.png)

到目前为止，我已经尝试定义*转折点*，即轮廓改变方向的 x 值。这可以通过`numpy.diff`应用于包含每个 x 值的切片数的数组来完成。如果差异不为零，则该 x 值是一个转折点。这可能可以用来找出下一点。困难在于确定下一个切片以及是使用切片的开头还是结尾。

[这个问题](https://stackoverflow.com/questions/10846431/ordering-shuffled-points-that-can-be-joined-to-form-a-polygon-in-python "排序可以连接形成多边形的打乱点（在python中）")很相似，但在我的情况下，多边形的形状要复杂得多。另一方面，我确实有关于多边形内部的信息。

**编辑**

我刚刚意识到，上述问题并不总是有唯一的解决方案。例如，上面示例中的点集也承认解决方案

```
xx = [10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 1, 2, 3, 4, 5, 5,
       4, 3, 3, 4, 4, 3, 2, 1, 1, 2, 3, 4, 5, 6, 7, 8,
       9, 9, 8, 8, 9, 10]
yy = [0, 0, 1, 1.3, 1.8, 1.9, 2, 2.1, 3.5, 3.8, 5.3, 5.2,
      2.7, 2.9, 3, 3.1, 3.2, 3.4, 5.1, 5, 6, 5.9, 5.7,
      5.8, 6.1, 6.4, 6.3, 6.2, 6.1, 6, 6, 5.8, 5.8, 5.2,
      5.4, 5, 4, 3] 
```

![替代多边形](https://i.stack.imgur.com/m9C64.png)

我正在寻找的解决方案是最小化每个边缘斜率的绝对值（垂直段除外）的解决方案。在上面的示例中，这对应于第一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:03:46.717

这是完成这项工作的功能。它是一个生成器，可以生成所有找到的多边形（如果有多个连接的多边形）。

首先，必须将区域重写为元组：

```
regions = [[(sl.start, sl.stop) for sl in sllist] for sllist in regions] 
```

排序是通过调用生成器（在循环中或以其他方式）完成的。该函数产生一个多边形作为 (x, y) 点的列表。获取单独的`xx`和`yy`列表很容易：

```
for polygon in order_points(xs, regions):
    xx, yy = zip(*polygon) 
```

函数本身有详细的注释。

```
def order_points(x, regions):
    """Given two lists of the same length, one of x values and one of regions,
    determine how to order the points so that they describe a polygon that
    contains the interior of all regions.

    This function is a generator that yields disjoint polygons.

    Parameters
    ==========

    x: list
       x values at which the regions are defined

    regions: list of lists of tuples
       Each list contains information for one x value.  The sublist contains
       so-called regions that are described by tuples corresponding to the
       bottom and the top of the region.  The y values between the bottom and
       the top of each region are in the interior of a polygon.

       Each list of tuples should be sorted by increasing y value.

    Yields
    ======

    polygon: list of tuples
       Ordered list of (x, y) coordinated of the points on the polygon.

    """
    # Make sure the x values are in ascending order.
    xvals, yregions = zip(*sorted(zip(x, regions)))

    # Direction is -1 when going toward low x, 1 when going toward high x.
    direction = 1
    # Indicate whether the inside of the polygon is below, 0, or above, 1, the
    # current point.
    inside = 1

    # List all possible combinations of x index, region index.
    tovisit = [(pos, rpos) for pos in range(len(xvals))
                            for rpos in range(len(yregions[pos]))]
    pos, rpos = tovisit.pop(0)
    ycur = yregions[pos][rpos][0]

    # Keep track of already visited points.
    visited = set()
    # Keep track of current polygon.
    polygon = []
    while True:
        # Keep track of ordered points.
        xcur = xvals[pos]
        polygon.append((xcur, ycur))
        visited.add((xcur, ycur))

        # Find the minimum vertical distance between the current position and
        # the following points: points at the next (as specified by direction)
        # x value, and points at the current x value

        # For points at the next x, if the polygon is currently above, inside =
        # 1, the points considered are at the bottom of a region, i.e., at
        # index 0 of the tuple.
        next_pos = pos + direction
        if next_pos < 0 or next_pos >= len(xvals):
            next_pos = pos
        distance = -1
        for ri, region in enumerate(yregions[pos]):
            if (xcur, region[inside]) not in visited:
                d = abs(ycur - region[inside])
                if d < distance or distance == -1:
                    distance = d
                    move = ('vertical', (pos, ri, inside))

        # For points at the same x, if the polygon is currently above, the
        # points considered are at the top of a region, i.e., at index 1 of the
        # tuple.
        for ri, region in enumerate(yregions[next_pos]):
            polypos = (not inside)
            if (xvals[next_pos], region[polypos]) not in visited:
                d = abs(ycur - region[polypos])
                if d < distance or distance == -1:
                    distance = d
                    move = ('next', (next_pos, ri, polypos))

        # If no suitable next point is found, the polygon is complete. Yield
        # the polygon and try to find a separate polygon.
        if distance < 0:
            yield polygon
            polygon = []
            direction = 10  # dummy value to detect if no next point is found
            while tovisit:
                pos, slpos = tovisit.pop(0)
                ycur = yregions[pos][slpos][0]
                if (xvals[pos], ycur) not in visited:
                    direction = 1
                    inside = 1
                    break
            if direction == 10:
                break
            continue

        # Make the move.
        if move[0] == 'vertical':
            # Vertical move changes the direction (unless it is the very first
            # move) and toggles inside/outside.
            if len(polygon) > 1:
                direction *= -1
            inside = int(not inside)
        pos, rpos, end = move[1]
        ycur = yregions[pos][rpos][end] 
```

# html - 如何修复magento中的重复内容？

> ID：15868184
> 
> 赞同：2
> 
> 时间：2013-04-07T21:41:39.473
> 
> 标签：html, magento, caching, block

我的 magento 主页内容显示不止一次。我希望它们每页只出现一次。

我尝试将此代码放入 \app\code\core\Mage\Catalog\Block\Product\List.php 文件作为解决方案：

 `````
 protected function _construct()

    {
        $this->addData(array(
            'cache_lifetime'    => 900,
            'cache_tags'        => array(Mage_Catalog_Model_Product::CACHE_TAG),
            'cache_key'            => $this->getCacheKey()
        ));
    } 

public function getCacheKey()
    {
        return $this->getRequest()->getRequestUri().$this->getCacheCurrencyCode();
    }

//retreive current currency code
public function getCacheCurrencyCode()
    {
        return Mage::app()->getStore()->getCurrentCurrencyCode();
    } 
```` 

`在此编辑之后，每当我访问我的主页时，我都会看到一些商品在畅销品类别中重复了 3 次，如下面的屏幕截图所示：`

 `当前错误的意外主页：http: [//ikelk.lt/i/131171/o_afb38c9691.JPG](http://ikelk.lt/i/131171/o_afb38c9691.JPG)

理想情况下的外观（预期行为）：http: [//ikelk.lt/i/131172/o_568243b784.JPG](http://ikelk.lt/i/131172/o_568243b784.JPG)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T05:56:40.973

你好，我想你检查模板路径提示，这样你就会得到重复的模板调用。

**转到->管理->系统->配置->当前配置范围（选择您的商店）->高级（左）->开发人员->调试->模板路径提示选择是->刷新主页**``

# php - 当有多个json时，如何显示json的一部分？

> ID：15868185
> 
> 赞同：0
> 
> 时间：2013-04-07T21:41:45.877
> 
> 标签：php, json

我知道标题似乎有点令人困惑，但可以说我有这个：

```
{"success":true,"name":"test","ips":[{"public":"ipaddr","local":"ipaddr"},{"public":"ipaddr","local":"ipaddr"}],"time":1040} 
```

由于有两个“公共”IP 地址，我只想显示列表中的第一个公共 IP。我该怎么做呢？

这是我到目前为止所拥有的：

```
$json = json_decode($contents, true);
foreach($json['ips'] as $item) {
    echo $item['public'];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:56:07.797

让我们可视化您的 json 数据的结构，然后在下面的示例中查看我们如何访问特定元素（第一个 ips）：

```
$json = <<<JSON
{
  "success": true,
  "name": "test",
  "ips": [
    {
      "public": "ipaddr",
      "local": "ipaddr"
    },
    {
      "public": "ipaddr",
      "local": "ipaddr"
    }
  ],
  "time": 1040
}
JSON;

$decoded = json_decode($json);

var_dump($decoded);
var_dump($decoded->ips[0]->public); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:51:59.403

尝试

```
$json = json_decode($contents, true);
echo $json['ips'][0]['public']; 
```

[例子](http://codepad.viper-7.com/Z4LNTo)

# excel - 动态网页查询

> ID：15868188
> 
> 赞同：1
> 
> 时间：2013-04-07T21:42:32.557
> 
> 标签：excel, vba

放轻松，因为我是新手。我创建了几个宏，可以从以下位置提取搜索结果：Sec 全文搜索：[http ://searchwww.sec.gov/EDGARFSClient/jsp/EDGAR_MainAccess.jsp](http://searchwww.sec.gov/EDGARFSClient/jsp/EDGAR_MainAccess.jsp)

现在我的数据已全部清理并设置在不同的列中，我需要根据结果创建一个查询。在 BI 列中有一个公司名称列表，我想引用“B”列中的每个单元格，并在[http://www.marketwatch.com/tools/quotes/lookup.asp?siteID=mktw&Lookup=查询市场观察options+media&Country=us&Type=All](http://www.marketwatch.com/tools/quotes/lookup.asp?siteID=mktw&Lookup=options+media&Country=us&Type=All)用于与公司名称相关的股票代码。这会对我有所帮助，因为最终我会想要执行多个查询来提取有关股份结构、收入等的信息。我将不胜感激任何时间回答这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:50:01.173

试试下面的代码。

```
Sub website()

    Dim doc As HTMLDocument
    Dim htmTable As HTMLTable

    Set doc = New HTMLDocument
    With CreateObject("MSXML2.XMLHTTP")
        .Open "GET", "http://www.marketwatch.com/investing/stock/BAC"
        .send
        Do: DoEvents: Loop Until .readyState = 4
        doc.body.innerHTML = .responseText
        .abort
    End With

    Set htmTable = doc.getElementsByClassName("companyname")(0)

    If Not htmTable Is Nothing Then
        MsgBox htmTable.innerText
    End If

     Set htmTable = doc.getElementsByClassName("lastprice")(0)

    If Not htmTable Is Nothing Then
        MsgBox htmTable.innerText
    End If
End Sub 
```

# r - Openblas、OpenMP 和 R 有没有像样的测试？

> ID：15868191
> 
> 赞同：1
> 
> 时间：2013-04-07T21:42:49.550
> 
> 标签：r, openmp

我正在尝试使用 Openblas 和 OpenMP 设置多线程 R。我正在使用带有 AMD fx-8230 8 核处理器的 OpenSuSE 12.2。[在与ATLAS](https://stackoverflow.com/questions/15841565/blas-lapack-atlas-r-installation-with-multithreading)战斗了一段时间后，有人建议我将它打包并尝试我拥有的 openblas。

第一的。有一些关于 opensuse 12.2 gcc 的 openmp 损坏的报告，所以我想我应该对其进行测试。我去了[http://openmp.org/wp/openmp-compilers/](http://openmp.org/wp/openmp-compilers/)并编译并执行了示例文件 hello.c，所有线程都有响应。

第二。我设置了一个 openblas 的 git 克隆。我阅读了说明并执行了“make USE_OPENMP=1”，然后执行了“make PREFIX=/usr/lib64/OpenBLAS install”程序安装并通过了所有检查，没有任何问题。

第三。设置 R。我将 R 下载为 tar 文件并解压缩。我最终会检查 subversion R。我使用了这个配置命令`../configure --prefix=/usr/lib64/R --enable-openmp --enable-R-shlib --with-blas="-L/opt/maths/OpenBLAS -lopenblas" --with-tcl-config=/usr/lib64/tclConfig.sh --with-tk-config=/usr/lib64/tkConfig.sh --with-x`

前缀和 -with-blas 信息不会进入 Makeconf 文件。这是为什么？我将 Makeconf 文件更改为：

```
PACKAGE = R
VERSION = 2.15.3

abs_top_srcdir = /opt/maths/R-2.15.3/gserver/..
abs_top_builddir = /opt/maths/R-2.15.3/gserver

include $(top_srcdir)/share/make/vars.mk

AR = ar
ACLOCAL = aclocal
AUTOCONF = autoconf
AUTOMAKE = automake
AUTOHEADER = autoheader
BLAS_LIBS = -L/opt/maths/OpenBLAS/ -lopenblas
BUILDDIR_IS_SRCDIR = no
## next two for future support of cross-compiling, not actually used
BUILD_CC =
BUILD_R =
CC = gcc -std=gnu99
CFLAGS = -g -O2 -fopenmp
CPICFLAGS = -fpic
CPPFLAGS = -I/usr/include
DEFS = -DHAVE_CONFIG_H
DISTDIR_TAR_EXCLUDE = --exclude=.svn --exclude=Makefile --exclude="*.o" --exclude="*$(SHLIB_EXT)" --exclude="*~"
DYLIB_EXT = .so
DYLIB_LD = gcc -std=gnu99
DYLIB_LDFLAGS = -shared -fopenmp# $(DYLIBS_LTO)
DYLIB_LINK = $(DYLIB_LD) $(DYLIB_LDFLAGS) $(LDFLAGS)
DYLIBS_LTO = $(CFLAGS) $(CPICFLAGS)
ECHO = echo
ECHO_C =
ECHO_N = -n
ECHO_T =
FFLAGS = -g -O2 -fopenmp
FLIBS =  -lgfortran -lm -lquadmath
FLIBS_IN_SO =  -lgfortran -lm -lquadmath
FPICFLAGS = -fpic
F77 = gfortran
GETWD = /usr/bin/pwd
GZIP = --best
INSTALL = /usr/bin/install -c
INSTALL_DATA = ${INSTALL} -m 644
INSTALL_PROGRAM = ${INSTALL}
INSTALL_SCRIPT = ${INSTALL}
INSTALL_DIR = ${INSTALL} -d
LDFLAGS = -L/usr/lib64
LIBINTL=
LIBM = -lm
LIBR = -L$(R_HOME)/lib$(R_ARCH) -lR
LIBS =  -lrt -ldl -lm
LIBnn = lib64
LIBTOOL = $(SHELL) $(top_builddir)/libtool
## AFAICS unused
LN_S = ln -s
MAIN_CFLAGS =
MAIN_FFLAGS =
MAIN_LD = gcc -std=gnu99# $(CFLAGS)
MAIN_LDFLAGS = -Wl,--export-dynamic -fopenmp # # -Wl,-bE:$(top_builddir)/etc/R.exp
MAIN_LINK = $(MAIN_LD) $(MAIN_LDFLAGS) $(LDFLAGS)
## need this for bootstrapping
MKINSTALLDIRS = /bin/sh $(top_srcdir)/src/scripts/mkinstalldirs.in
NOTANGLE = false
R_ARCH =
R_FRAMEWORK_DIR = $(prefix)/R.framework
R_GZIPCMD = /usr/bin/gzip
## needed for AIX only
# R_HOME = $(top_builddir)
R_OPENMP_CFLAGS = -fopenmp
R_OPENMP_FFLAGS = -fopenmp
R_OSTYPE = unix
R_PKGS = $(R_PKGS_BASE)  $(R_PKGS_RECOMMENDED)
R_PLATFORM = x86_64-unknown-linux-gnu
R_XTRA_CFLAGS =
R_XTRA_CPPFLAGS =  -I. -I$(top_builddir)/src/include -I$(top_srcdir)/src/include
R_XTRA_FFLAGS =
R_XTRA_LIBS =
RANLIB = ranlib
READLINE_LIBS = -lreadline
SED = /usr/bin/sed
SHELL = /bin/sh
SHLIB_EXT = .so
SHLIB_CFLAGS =
SHLIB_FFLAGS =
SHLIB_LD = gcc -std=gnu99
SHLIB_LDFLAGS = -shared# $(SHLIB_LTO)
SHLIB_LINK = $(SHLIB_LD) $(SHLIB_LDFLAGS) $(LDFLAGS)
SHLIB_LTO = $(CFLAGS) $(CPICFLAGS)
STRIP_LIBS = strip --strip-unneeded
STRIP_STATIC_LIBS = strip --strip-debug
TAR = /bin/tar
USE_NLS = yes
X_CFLAGS =
X_LIBS =  -lX11 -lXt -lXmu
X_PRE_LIBS =  -lSM -lICE
X_EXTRA_LIBS =
YACC = bison -y

ALL_CFLAGS = $(R_XTRA_CFLAGS) $(R_OPENMP_CFLAGS) $(MAIN_CFLAGS) $(CFLAGS)
ALL_CPPFLAGS = $(R_XTRA_CPPFLAGS) $(CPPFLAGS) $(DEFS)
ALL_FFLAGS = $(R_XTRA_FFLAGS) $(R_OPENMP_FFLAGS) $(MAIN_FFLAGS) $(FFLAGS)
ALL_CFLAGS_LO = $(R_XTRA_CFLAGS) $(R_OPENMP_CFLAGS) $(CPICFLAGS) $(SHLIB_CFLAGS) $(CFLAGS)
ALL_FFLAGS_LO = $(R_XTRA_FFLAGS) $(R_OPENMP_FFLAGS) $(FPICFLAGS) $(SHLIB_FFLAGS) $(FFLAGS)

.SUFFIXES:
.SUFFIXES: .c .f .m .d .o

.c.o:
        $(CC) $(ALL_CPPFLAGS) $(ALL_CFLAGS) -c $< -o $@
.c.d:
        @echo "making $@ from $<"
        @gcc -std=gnu99 -MM $(ALL_CPPFLAGS) $< > $@
.m.d:
        @echo > $@
.f.o:
        $(F77) $(ALL_FFLAGS) -c $< -o $@

prefix = /usr/lib64/R
exec_prefix = ${prefix}
datarootdir = ${prefix}/share
## only used for installing 'R'.
bindir = ${exec_prefix}/bin
## not used
datadir = ${datarootdir}
## used for 'rhome' and installation of standalone Rmath
libdir = ${exec_prefix}/${LIBnn}
## used for man page
mandir = ${datarootdir}/man
## used for installation of standalone Rmath headers
includedir = ${prefix}/include

rhome = ${libdir}/R
rsharedir = ${rhome}/share
rincludedir = ${rhome}/include
rdocdir = ${rhome}/doc

## Overrides for installing R as a framework (MacOS X).
#FW_VERSION =
#rhome = $(R_FRAMEWORK_DIR)/Versions/$(FW_VERSION)/Resources
#bindir = $(rhome)
#mandir = $(rhome)

Rexecbindir = $(rhome)/bin
Rexecbindir2 = $(rhome)/bin/exec$(R_ARCH)
Rexeclibdir = $(rhome)/lib$(R_ARCH)
## FIXME:
## Alternatively, we could try to set pkglibdir = $(rhome)/lib when
## switching to automake.
## </FIXME>
Rexecmodulesdir = $(rhome)/modules$(R_ARCH) 
```

仍然找不到打开的 blas。我在 libopenblas.so.0 的 /usr/lib64 中建立了一个符号链接，然后找到了 openblas。有没有比 -I 设置包含更好的方法？也许我没有正确设置包含并且没有找到正确的文件？

使用[此处](https://stat.ethz.ch/pipermail/r-sig-debian/2012-February/001796.html)的信息，我检查了 R 在 /bin/exec/R 中找到的库

```
gserver/bin/exec # ldd R
    linux-vdso.so.1 (0x00007fff4b278000)
    libR.so => not found
    libRblas.so => not found
    libgomp.so.1 => /usr/lib64/libgomp.so.1 (0x00007f2cb3e00000)
    libpthread.so.0 => /lib64/libpthread.so.0 (0x00007f2cb3be0000)
    libc.so.6 => /lib64/libc.so.6 (0x00007f2cb3830000)
    librt.so.1 => /lib64/librt.so.1 (0x00007f2cb3628000)
    /lib64/ld-linux-x86-64.so.2 (0x00007f2cb4010000) 
```

我预计如果它不使用它，它不会找到 libRblas。所以我找到了 libR.so 和

```
gserver/lib # ldd libR.so
    linux-vdso.so.1 (0x00007fffaf360000)
    libopenblas.so.0 => /usr/lib64/libopenblas.so.0 (0x00007fe131158000)
    libgfortran.so.3 => /usr/lib64/libgfortran.so.3 (0x00007fe130e40000)
    libm.so.6 => /lib64/libm.so.6 (0x00007fe130b40000)
    libquadmath.so.0 => /usr/lib64/libquadmath.so.0 (0x00007fe130908000)
    libreadline.so.6 => /lib64/libreadline.so.6 (0x00007fe1306c0000)
    librt.so.1 => /lib64/librt.so.1 (0x00007fe1304b8000)
    libdl.so.2 => /lib64/libdl.so.2 (0x00007fe1302b0000)
    libgomp.so.1 => /usr/lib64/libgomp.so.1 (0x00007fe1300a0000)
    libpthread.so.0 => /lib64/libpthread.so.0 (0x00007fe12fe80000)
    libc.so.6 => /lib64/libc.so.6 (0x00007fe12fad0000)
    /lib64/ld-linux-x86-64.so.2 (0x00007fe132610000)
    libgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x00007fe12f8b8000)
    libtinfo.so.5 => /lib64/libtinfo.so.5 (0x00007fe12f680000) 
```

按照 R 安装说明的其余部分，我做了 make check（通过） make check-all 并且它通过了。

好的，现在是踢球者。我如何测试以查看 R 确实使用了多个内核。我能够找到在 R 中进行测试的方案：

```
a = matrix(rnorm(5000*5000), 5000, 5000)
b = matrix(rnorm(5000*5000), 5000, 5000)
c = a%*%b 
```

然后用'top'检查cpu。我这样做了，但它从未使用超过 100.1% 的 cpu！这让我很伤心。我确实在运行 make-all 时看到，在测试示例时，有时 CPU 使用率超过 250%，这让我认为它正在工作并且我忘记了一些东西。在我的个人资料中，我设置了“export OMP_NUM_THREADS=8”和“export OPEN_BLAS_NUM_THREADS=8”这是否意味着 openblas 不能与 openmp 一起使用，我该如何解决？

这个服务器并没有真正设置任何东西，如果我回显 $LD_LIBRARY_PATH 什么都没有出现，那么也许我需要在那里设置一些东西才能让每个人一起工作？我的最终目标是安装 boost 库、snow 和 spp。有没有人有在 R 包中用雪设置 openmp 的经验，它会工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:49:51.717

首先要弄清楚的是如果

*   优化的 BLAS 完全被使用
    OpenBLAS 已经`NUM_TREADS=1`比默认的 BLAS 快得多。检查`m %*% m`乘法的时间。

*   一旦您知道使用了 OpenBLAS，请检查产生的线程数（`top`或`htop`）

*   如果使用优化的 BLAS，`NUM_TREADS`则会产生线程但都在同一个内核上执行，请参见此处：[R 中的并行处理受限](https://stackoverflow.com/questions/12924698/parallel-processing-in-r-limited)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T06:43:59.447

切换到 OpenBLAS 后没有看到预期的性能提升的问题可能与处理器亲和性有关。来自 OpenBLAS Github：

“在 Linux 上，OpenBLAS 默认设置处理器亲和性。这可能会导致与 R 并行的冲突。您可以使用 NO_AFFINITY=1 构建库。”

使用 NO_AFFINITY=1 标志编译，禁用处理器关联。

[https://stat.ethz.ch/pipermail/r-sig-hpc/2012-April/001348.html](https://stat.ethz.ch/pipermail/r-sig-hpc/2012-April/001348.html)

# heroku - Heroku 上的 Resque 优化

> ID：15868192
> 
> 赞同：1
> 
> 时间：2013-04-07T21:42:50.747
> 
> 标签：heroku, sinatra, resque

我正在使用 Resque 在 Heroku 上进行大量数据处理。

使用 NewRelic，我发现我的任务使用了 15% 的 CPU 份额和每个实例 50mo RAM 之类的东西。

我可以只使用一个测功机来处理 5 个工作。

但我不知道该怎么做。

我尝试在 procfile 中使用 COUNT=5，但它似乎不起作用。此外，ResqueRetry 不会以这种方式看到失败的工作......

有人会知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T00:30:35.483

你需要对你的 Procfile 做几件事

首先添加 COUNT 环境变量，然后将命令从 resque:work 更改为 resque:workers

这是一个例子

```
resque: env TERM_CHILD=1 RESQUE_TERM_TIMEOUT=10 COUNT=2 QUEUE=* bundle exec rake resque:workers 
```

我只用 1 个 resque dyno 在 Heroku 上测试了这个解决方案，并看到我发送的 2 个作业同时被处理。

# memory-management - 为什么使用 STL std::vector 作为 __block 变量会导致内存损坏？

> ID：15868193
> 
> 赞同：0
> 
> 时间：2013-04-07T21:42:51.110
> 
> 标签：memory-management, vector, block, objective-c++, vmat

经过一段时间和努力，我在我的代码中找到了这个函数的内存破坏错误。`__block vector<int>`我通过将两个变量替换为堆栈分配数组的组合来提供存储空间和一个`{klist|dlist}Ptr`变量以允许块内的代码访问数组，从而停止了内存破坏（见下面的推荐代码）。这让我相当有信心，它的使用确实`__block vector<int>`是有问题的。

```
void
traceTree(Matrix<double> Z, double s[3], int k, unsigned int depth)
{
    int m = Z.size(1) + 1;
    __block vector<int> klist(m, 0);
    // int klist[m]; int * klistPtr = klist;
    // klist[0] = k;
    __block vector<int> dlist(1, depth);
    // int dlist[depth]; int * dlistPtr = dlist;
    // dlist[0] = depth;
    __block int topk = 0;
    int currk = 0;

    void (^ subtree)(int i) = ^(int i) {
        if (i > m) {                // If it's not a leaf...
            topk += 1;
            klist[topk] = i - m;
            dlist[topk] = depth - 1;
        }
    };

    while (currk <= topk) {
        k = klist[currk];
        depth = dlist[currk];
        s[0] += Z[{2,k}];            // Sum of the edge lengths so far
        s[1] += Z[{2,k}] * Z[{2,k}]; // ... and the sum of the squares
        s[2] += 1;                   // ... and the count of the edges
        if (depth > 0) {
            subtree(Z[{0,k}]);       // Consider left subtree
            subtree(Z[{1,k}]);       // Consider right subtree
        }
        currk += 1;
    }
} 
```

[我应该指出，这是一个纯粹的迭代算法；没有递归。该块的存在只是为了避免重复处理左右子树所需的代码。]

The obvious question is, why are the STL `vector` objects causing memory corruption here? They are not even doing any dynamic resizing… Is it simply not supported to use a C++ object as a `__block` variable?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:25:12.733

Unless it's a typo, I see your initialization of `dlist` being different from the array: `vector<int> dlist(1, depth);` makes a vector of length 1, not `depth`. This may possibly cause going out of bounds.

You can always guard against accessing vector elements out of bounds by using `dlist.at(currk)` instead of `dlist[currk]`, for both reading and writing.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:44:38.197

C++ objects are allowed as `__block` variables (though personally I would recommend lambdas if you're writing C++; there's not much reason IMO to use blocks in pure C++ like this).

`__block` C++ variables are copied using the copy constructor (see [C++ Objects](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW6) in Block Programming Topics). It's possible you're overflowing your stack due to too many copies of large stack variables if this goes very deep (that would match your "memory corruption" symptom).

But again, I'd recommend lambdas rather than blocks for C++; see [@sellibitze's answer](https://stackoverflow.com/a/2396241/97337) at [How do Clang 'blocks' work?](https://stackoverflow.com/questions/2395040/how-do-clang-blocks-work) for some more discussion.

# java - libgdx ShapeRenderer 使用移动相机多次渲染

> ID：15868196
> 
> 赞同：1
> 
> 时间：2013-04-07T21:43:09.007
> 
> 标签：java, libgdx

我决定使用 Libgdx`ShapeRenderer`来绘制多边形。我想看看这个效率有多高，让相机在渲染的时候通过x轴，但是发生了一些奇怪的事情，看这张图：

![http://img255.imageshack.us/img255/2523/testfl.png](https://i.stack.imgur.com/uvA75.png)

在右侧，我没有移动相机，但在左侧，我通过

```
camera.translate(0.1f, 0); 
```

这是我的代码：

```
public void setSize (int width, int height) {
    float aspectRatio = (float) width / (float) height;
    camera = new OrthographicCamera(30f * aspectRatio, 30f);
}
public void render() {
    camera.update();
    shapeRenderer.setProjectionMatrix(camera.combined);
    shapeRenderer.begin(ShapeType.Line);        
    shapeRenderer.identity();
    camera.translate(0.1f, 0);      
    shapeRenderer.setColor(0, 0, 1, 1);
    shapeRenderer.polygon(new float[] {0,0,5,5,5,2.5f, 10,12.5f, 10,0});                
    shapeRenderer.end();
} 
```

我不知道问题是什么，但我认为它不会删除它下面的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T01:16:46.583

在渲染之前调用：

```
 Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT); 
```

# cron - 如何检查 Macbook Lid 是否通过终端关闭？

> ID：15868200
> 
> 赞同：8
> 
> 时间：2013-04-07T21:44:16.113
> 
> 标签：cron, grep, osx-mountain-lion, crontab, wakeup

我正在运行 OS X 10.8 (Mountain Lion)。我想知道是否有终端命令来检查 macbook pro 的盖子当前是否关闭。如果我使用 grep，我会确切地寻找什么，在哪里？

我问的原因是因为我安排了每 30 分钟运行一次的 cron 作业。但是，当计算机处于睡眠/休眠状态时，crontab 不会运行。我的解决方案是使用 pmset 安排每 30 分钟唤醒一次。但是，我需要一种方法让我的计算机在盖子当前关闭的情况下重新进入睡眠状态。我不希望我的电脑在合上盖子的情况下醒来太久，即在我睡觉时整晚都醒着，因为这可能会损坏屏幕。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-07T22:45:16.593

```
ioreg -r -k AppleClamshellState -d 4 | grep AppleClamshellState  | head -1 
```

在 10.7.* 上测试并工作，在[此处](http://www.dsign.caltech.edu/erik/Misc/clamshellstate.pl)找到。

2019-02-26 更新：

仍然适用于 macOS 10.14.3 Mojave

# multithreading - 为什么线程尝试两次获取相同的自旋锁时会出现死锁？

> ID：15868204
> 
> 赞同：1
> 
> 时间：2013-04-07T21:44:54.027
> 
> 标签：multithreading, spinlock

有人可以向我解释为什么当一个线程尝试两次获取同一个自旋锁时会出现死锁吗？（假设自旋锁是非递归的）

常规自旋锁用法：

```
lock = false; 
while(acquiring_lock(lock)) {} //sit in the loop and wait for lock to become available
....critical section....
release_lock(lock); 
```

但是，我不明白为什么第二次调用`acquiring_lock(lock)`会导致死锁？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T04:18:16.040

这个问题似乎真的取决于所讨论的线程库，以及不同函数的规范。所以，让我们考虑几种可能性。

锁定机制可以是[阻塞](http://en.wikipedia.org/wiki/Non-blocking_algorithm)的或非阻塞的，也可以是可[重入的](https://stackoverflow.com/questions/1312259/what-is-the-re-entrant-lock-and-concept-in-general)和不可重入的。

```
/** 
* This function performs a busy wait, blocking until it acquires the lock
* This is not re-entrant.
**/
void blocking_acquire_lock(bool thingToLock); 
```

如果你尝试使用前面的函数，你的代码会死锁。这是因为线程在获得锁之前不会继续执行。您不会在 while 循环的条件位置使用它，因为它不返回布尔值。其次，这不是可重入的意思，如果你在同一个线程获得锁后尝试重新获得锁，它会继续等待锁被释放。

```
/** 
* This function performs a non-blocking busy wait, blocking for up to X milleseconds, 
* until it acquires the lock. This is not re-entrant.
* returns true if lock acquired, false if lock not acquired
**/
bool non_blocking_acquire_lock(bool thingToLock, int timeoutInMilliseconds); 
```

这个版本在 while 循环中使用是有意义的。您可以尝试获取锁，但如果在分配的时间内没有成功，您可以决定做什么。也许，您会决定在其他事情上工作一段时间，然后重新尝试获取锁。

由于它不是可重入的，它不会允许同一个线程在没有先释放的情况下两次获取它。因此，您的代码将死锁。

Here is one last example which will seem to deadlock on your code.

```
/** 
* This function performs a non-blocking busy wait, blocking for up to X milleseconds, 
* until it acquires the lock. This is re-entrant.
* returns true if lock acquired, false if lock not acquired
**/
bool non_blocking_reentrant_acquire_lock(bool thingToLock, int timeoutInMilliseconds); 
```

This lock is re-entrant, so if a thread owns the lock, it can re-acquire it. However, if you use this inside of a while loop like the following, you will notice something interesting.

```
my_lock = false; 
while(acquiring_lock(my_lock, 1000)) { ; }
    ....critical section....
release_lock(lock); 
```

Since the lock returns true if it acquires the lock within 1 second, and this is the only thread, it should likely acquire the lock without problem. It returns true. In which case, it will stay in the while loop. The while loop is empty, so it immediately tries re-acquiring the lock.

Since it is re-entrant, I would expect it to continually succeed. It will continue to successfully re-acquire the lock, and never get past the while loop.

I would expect the following code with an extra "!" to be what you intended.

```
my_lock = false; 
while( !acquiring_lock(my_lock, 1000)) { ; }
    ....critical section....
release_lock(lock); 
```

This version, will actually stop trying to acquire the lock, i.e. exit the while loop, once it has acquired the lock.

# cuda - 内核启动失败 - 需要 -100% 的时间在 GPU 上运行

> ID：15868205
> 
> 赞同：0
> 
> 时间：2013-04-07T21:44:56.263
> 
> 标签：cuda

内核`update_umatrix`无法启动，分析器显示它需要`-100%`！计算的时间。

这可能是一个简单的问题，但我已经花了两个星期的时间，但内核启动仍然无法根据 nsight 分析器启动，至少`U`矩阵没有更新并且包含全零（这是 FCM 的部分实现）。

我的 GPU 是 GeForce 330M，计算能力为`1.2`.

```
float *U;
float *V;
float *X;

__device__ float *U_d;
__device__ float *V_d;
__device__ float *X_d;

__global__ void update_umatrix(float *sqrerror,int C,int N,int S,float m)
{

    int i,j,k;
    int example_is_centroid;
    float summation, D_ki, D_kj;
    float newU;

    __shared__ float tmp_sqrerror[DIM];
    /* For each example in the dataset */
    k = threadIdx.x + blockIdx.x*blockDim.x;
    int local_offset = threadIdx.x;
    tmp_sqrerror[local_offset]=0;
        /* Special case: If Example is equal to a Cluster Centroid,
       then U=1.0 for that cluster and 0 for all others */
        if ( (example_is_centroid=is_example_centroid(k,S,C)) != -1 ) {
            for(int i=0; i<C; i++)
            {
            if ( i == example_is_centroid )
                U_d[k*C+i]=1.0;
            else
                U_d[k*C+i]=0.0;
            }
            return;
        }
    /* For each class */
    for(int i=0; i< C; i++)
    {
        summation=0;

        /* Calculate summation */
        for (j=0; j < C; j++) {
            D_ki=distance(X_d, V_d,k*DIM,i*S,S);
            D_kj=distance(X_d, V_d,k*DIM,j*S,S);
            summation += powf( D_ki / D_kj , (2.0/ (m-1)));
        }

        /* Weight is 1/sum */
        newU=1.0/summation;

        /* Add to the squareDifference */
        tmp_sqrerror[local_offset] += powf(U_d[k*C+i] - newU, 2);

        U_d[k*C+i]=newU;

    }
    __syncthreads();
    int t= blockDim.x/2;
    while(t>0)
    {
        if(k+t < N && threadIdx.x<t)
            tmp_sqrerror[local_offset] += tmp_sqrerror[local_offset+t];
        t/=2;
        __syncthreads();
    }

    if(threadIdx.x==0)
        sqrerror[blockIdx.x] = tmp_sqrerror[0];

}

int init()
{

float m = 2.0;
int C=2;
int S=2;
int N=340*340;
    int i,j;

    /* Allocate necessary storage */
    V=(float *)CALLOC(S*C, sizeof(float));

    U=(float *)CALLOC(C*N,sizeof(float));
    cudaGetErrorString(cudaMalloc(&U_d,N*C*sizeof(float)));
    cudaGetErrorString(cudaMalloc(&V_d,C*S*sizeof(float)));

    /* Place random values in V, then update U matrix based on it */
    srand48(seed);
    for (i=0; i < C; i++) {
        for (j=0; j < S; j++) {
            V[i*S+j]=drand48() * max_value[j];
        }
    }
    float *dummy;
    cudaMalloc(&dummy,N*sizeof(float));
    cudaGetErrorString(cudaMemcpyToSymbol(&V_d,V,C*S*sizeof(float),0,cudaMemcpyHostToDevice));
    /* Once values are populated in V, update the U Matrix for sane values */
    update_umatrix<<<(N+DIM-1)/DIM,DIM>>>(dummy,C,N,S,m);
    cudaGetErrorString(cudaGetLastError());
cudaDeviceSynchronize();

cudaGetErrorString(cudaMemcpyFromSymbol(U,&U_d,N*C*sizeof(float),cudaMemcpyDeviceToHost));
fprintf(stdout,"Initialization completed.\n");

    return 0;
} 
```

如果某个 i 的 X[k] == V[i]，则返回那个 i。否则，返回 -1

```
__device__ int is_example_centroid(int k,int S, int C)
{
    int  i,x;

    for (i=0; i < C; i++) {
        for (x=0; x < S; x++) {
            if ( X_d[k*DIM+x] != V_d[i*S+x] ) break;
        }
        if ( x == S )  /* X==V */
            return i;
    }
    return -1;
} 
```

和距离函数：

```
__device__ float distance(float *v1, float *v2,int startV1,int startV2,int S)
{
    int x,i;
    float sum=0;

    for (x=startV1,i=startV2; x < startV1+DIM && i<startV2+S; x++, i++)
        sum += (v1[x] - v2[i]) * (v1[x] - v2[i]);

    return sqrt(sum);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:01:20.053

这行代码无效：

```
cudaGetErrorString(cudaMemcpyToSymbol(&V_d,V,C*S*sizeof(float),0,cudaMemcpyHostToDevice)); 
```

它会编译，但会在运行时抛出错误。由于您似乎已将其包裹在错误检查中，因此我只能假设您的错误检查已损坏。

您传递给的符号只能`cudaMemcpyToSymbol`是有效的**符号**。它不能是符号的地址、符号加上偏移量或类似的东西。

我也认为这行代码是不明智的，尽管我无法向自己证明它不起作用：

```
cudaGetErrorString(cudaMalloc(&V_d,C*S*sizeof(float))); 
```

如果你愿意，你可以这样做，但我不确定它是否在做你想要的，或者 malloc 的区域是否可以从主机以任何方式访问。

如果您想要可变大小的动态设备分配，为什么不使用普通的 cudaMalloc 方法呢？为什么使用设备符号？我并不是说你不能让它以某种方式工作，但这不是做到这一点的方法。

**EDIT** responding to a question below: If you want to eliminate a function parameter and use a device variable instead, you can probably make it work but it seems like a lot of trouble to me, and to what end?

Anyway this is what I would do if I felt I really needed to do that:

```
#include <stdio.h>

#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

float *V, *d_V;

__device__ float *V_d;

__global__ void my_kernel(){

  printf("V[3] = %f\n", V_d[3]);

}

int main() {

  int C=2;
  int S=2;

  V=(float *)calloc(S*C, sizeof(float));
  V[0] = 0.0f;
  V[3] = 4.0f;
  cudaMalloc((void **)&d_V,C*S*sizeof(float));
  cudaCheckErrors("malloc");
  cudaMemcpy(d_V, V, C*S*sizeof(float), cudaMemcpyHostToDevice);
  cudaCheckErrors("memcpy");
  cudaMemcpyToSymbol(V_d,&d_V,sizeof(float *));
  cudaCheckErrors("symbol");
  my_kernel<<<1,1>>>();
  cudaDeviceSynchronize();
  cudaCheckErrors("kernel");

  return 0;
} 
```

# ruby-on-rails - 测试使用 ActiveRecord 的关注点/模块

> ID：15868210
> 
> 赞同：15
> 
> 时间：2013-04-07T21:45:27.570
> 
> 标签：ruby-on-rails, ruby, unit-testing, minitest, activesupport

**场景** 我提取了一个**名为**`Taggable`. 它是一个允许任何模型支持标记的模块。我已将此关注点/模块包含在`User`、`Location`、`Places`、等模型中`Projects`。

我想为这个模块编写测试，但不知道从哪里开始。

**问题**
**1\. 我可以对`Taggable`关注点进行隔离测试吗？**
在下面的示例中，测试失败，因为测试正在寻找`dummy_class table`. 我假设它这样做是因为其中的`has_many`代码，`Taggable`因此它期望`'DummyClass'`成为一个 ActiveRecord 对象。

```
# /app/models/concerns/taggable.rb
module Taggable
  extend ActiveSupport::Concern

  included do
    has_many :taggings, :as => :taggable, :dependent=> :destroy
    has_many :tags, :through => :taggings
  end

  def tag(name)
    name.strip!
    tag = Tag.find_or_create_by_name(name)
    self.taggings.find_or_create_by_tag_id(tag.id)
  end
end

# /test/models/concerns/taggable_test.rb
require 'test_helpers'

class DummyClass
end

describe Taggable do
  before do
    @dummy = DummyClass.new
    @dummy.extend(Taggable)
  end

  it "gets all tags" do
    @dummy.tag("dummy tag")
    @dummy.tags.must_be_instance_of Array
  end
end 
```

我的一部分认为，如果我只是测试一个包含此模块的模型，就`User`足够了。但我一直在读到你应该单独测试模块。

寻找一些关于正确方法的指导/策略。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T21:50:48.617

我建议`DummyClass`你成为一个通用的`ActiveRecord::Base`孩子，除了 just 之外，几乎没有自定义代码`include Taggable`，这样你就可以尽可能地隔离你的关注模块，但仍然是一个 AR 类。避免使用您的“真实”类之一`User`仍然会将您与这些类中的任何其他代码隔离开来，这似乎很有价值。

所以是这样的：

```
class DummyClass < ActiveRecord::Base; end

describe Taggable do
  before do
    @dummy_class = DummyClass.new
  end
  ...
end 
```

由于您`DummyClass`可能需要实际与数据库交互以测试关联等内容，因此您可能需要在测试期间在数据库中创建临时表。[temping](https://github.com/jpignata/temping) Ruby gem 可能会对此有所帮助，因为它旨在创建临时 ActiveRecord 模型及其底层数据库表。

> **Temping**允许您创建由临时 SQL 表支持的任意 ActiveRecord 模型以用于测试。如果您正在测试一个旨在混合到 ActiveReord 模型中而不中继具体类的模块，您可能需要执行类似的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-28T09:42:32.260

我使用[ActiveRecord Tableless](https://github.com/softace/activerecord-tableless)而不是[Temping](https://github.com/jpignata/temping) gem，目前这似乎有点过时了。

[我设置了与Stuart M](https://stackoverflow.com/users/274008/stuart-m)在他的[答案](https://stackoverflow.com/a/15868271/1183537)中完全相同的测试，但包括了`has_no_table`我的 DummyClass 中所需的辅助方法和列。

```
class DummyClass < ActiveRecord::Base
  # Use ActiveRecord tableless
  has_no_table
  # Add table columns
  column :name, :string
  # Add normal ActiveRecord validations etc
  validates :name, :presence => true
end 
```

这适用于我需要测试的内容，这是一个扩展`ActiveRecord::Base`了一些额外方法的模块，但我没有尝试过任何`has_many`关联，所以它仍然可能对你想要测试的内容没有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-28T11:29:39.177

这是我对类似问题的解决方案：

```
describe Taggable do
  subject { mock_model('User').send(:extend, Taggable) }

  it { should have_many(:tags) }
  ...

  describe "#tag" do
    ...
  end
end 
```

事实上`mock_model('User')`可以模拟系统中任何现有的模型。

这不是一个理想的解决方案，但至少它很清晰并且可以模拟一切。

**注意**： （AR 模拟）在 rspec 3.0 中`mock_model`被提取到[rspec-activemodel-mocks 。](https://github.com/rspec/rspec-activemodel-mocks)
您还需要将[shoulda-matchers](https://github.com/thoughtbot/shoulda-matchers)用于关联匹配器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-24T14:59:50.803

正如@StuartM's [answer](https://stackoverflow.com/a/15868271/1183537)中所建议的，使用[temping](https://github.com/jpignata/temping) gem 对我有用：

```
# test.rb/spec.rb
Temping.create :dummy_class do
  include Taggable
end

describe Taggable do
  before do
    @dummy = DummyClass.new
  end
  ...
end 
```

# android - 如何立即暂停线程？

> ID：15868220
> 
> 赞同：1
> 
> 时间：2013-04-07T21:46:13.257
> 
> 标签：android, thread-safety

我有一个带有布尔字段“暂停”的线程，我用它来暂停线程。

```
public void run() {
    while (running) {
        if (!paused) {
            //HERE I do some operations
        }
    }
} 
```

但是这个解决方案给我带来了一个问题：

当我按下一个将 true 分配给“暂停”字段的按钮时，继续暂停之前的线程会完成 if 块中的所有操作。

我该怎么做才能立即暂停线程？

或者

我能做些什么来强制按钮回调在当前迭代结束时执行？

**编辑：**

我以这种方式解决了：

```
public void run() {
    while (running) {
        synchronized(paused) {
            if (!paused) {
            //HERE I do some operations
            }
        }
    }
}

public void disablePause() {
    synchronized(paused) {
        paused = false;
    }
}

public void pause() {
    synchronized(paused) {
        paused = true;
    }
} 
```

paused now 是一个布尔对象。执行按钮回调函数（调用 pause()、执行一些操作并调用 disablePause()）的主 UI 线程等待直到我的自定义线程释放暂停（即在 while 循环的当前迭代结束时）。我仍然有一个疑问：这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:07:51.627

*立即暂停*线程有点复杂。这里的问题是，如果布尔值发生了变化，您需要在*每一行之后检查。*这不包括程序*处于*从您的线程调用的实际方法之一中的时间。

如果您需要线程立即结束，请**取消它**。这将中断在该线程上完成的工作并立即停止。之后，您必须重新启动它。

如果它必须立即执行的原因是，当按下暂停按钮时，您正在立即释放/取消验证资源：不要那样做。

最好的方法是将您的游戏循环设计为仅在您的循环开始时执行任何“级别更改”或其他重新配置的东西`while`。当循环开始一个新的循环时，它应该**保证**循环将被完全执行。

# php - Laravel3：如何将字符串转发给函数？

> ID：15868223
> 
> 赞同：0
> 
> 时间：2013-04-07T21:46:19.663
> 
> 标签：php, laravel, laravel-3

我有这样的事情：

```
Route::get('admin/user/modify', 'admin@user_modify'); 
```

但我应该把它转换成这样的东西：

```
Route::get('admin/user/modify/(:string)', 'admin@user_modify (with $string)'); 
```

基本上，我想将一个字符串变量传递给我的函数。

我怎样才能做到这一点？

还有一件事，如果用户不传递值而只浏览`admin/user/modify/`，那会发生什么？如果没有输入值，我应该手动检查还是可以将其返回到 404 等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:49:42.797

尝试这样的事情：

在您的 routes.php 中：

```
Route::get('users/edit/(:any)', array('as' => 'edit_user', 'uses' => 'users@edit')); 
```

在您的控制器中：

```
public function get_edit($id)
{
     return View::make('users.edit')
        ->with('user', User::find($id))
        ->with('title', 'Edit User');
} 
```

如果用户没有传递值并且只浏览 admin/user/modify/ 将显示 404。如果您想要其他行为，您可以执行以下操作：

```
 //Return a 404 response or what you prefer
    Route::get('admin/users/update', function(){
        return Response::error('404');
    }); 
```

# ruby-on-rails - Rails 应用程序：使用 gem 与包含 Twitter Bootstrap 的源

> ID：15868229
> 
> 赞同：9
> 
> 时间：2013-04-07T21:46:48.733
> 
> 标签：ruby-on-rails, twitter-bootstrap, gem, gemfile

我浏览了我的应用程序，当我通过 gem 包含 Twitter Bootstrap 源时，我无法找到它的确切位置。例如，如果我想查看 Bootstrap .css，我该如何找到它？

据我了解，将其作为 gem 包含的替代方法是直接下载并包含源代码，对吗？一种方法比另一种更好。

最后，如果我想修改 Bootstrap css，最好的方法是什么？如果我的应用程序中有源代码，我想我可以进去修改一些东西。如果我把它作为宝石包括在内呢？

对此如何工作的一些澄清将不胜感激。将源代码放在我的应用程序目录中的某个地方是有道理的，我可以相对于 .html 文件指向它......但是使用 Gemfile 我觉得事情在一个小黑盒子里......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-07T22:10:01.890

我绝对同意让 Bootstrap 文件位于您的应用程序之外是令人印象深刻的。

在这种情况下，我推荐以下工作流程：

1.  从 Github克隆 repo [bootstrap-sass或下载](https://github.com/twbs/bootstrap-sass)[zipball](https://github.com/twbs/bootstrap-sass/archive/master.zip)。它是 Bootstrap 进入 Sass 的官方端口，并且由同一团队不断更新。

2.  *仅*将 Sass 部分（文件名以下划线开头的部分）复制到`app/vendor/assets/stylesheets`. Javascript 和图像进入它们各自的目录下`app/vendor/assets`。这将提醒您远离编辑这些文件，同时保持应用程序的资产目录清洁。每当您想仔细观察它们时，它们就近在咫尺。

3.  尽可能多地复制和修改这些`bootstrap.scss`内容。`app/assets/stylesheets`一定要关闭所有你不使用的功能，因为随身携带这些东西意味着你的 CSS 文件比你需要的要大。

4.  自定义 Boostrap 变量和类，并在清单中的 Bootstrap 文件*之后*加载它们，就像使用 gem 一样。例如，假设您将自己的变量放入`_overrides.scss`. 你`application.css.scss`看起来像这样：

    ```
    @import "bootstrap";
    @import "overrides"; 
    ```

就是这样。这就是`app/vendor/assets`为之而生的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-04T18:46:37.607

我对 RoR 比较陌生，发现有几种不同的方法可以实现引导程序。我尝试了 gem [thomas-mcdonald / bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass)并让它工作得很好。但我想更深入地了解引导文件到底在做什么以及代码是什么样的。上面的答案非常有帮助。我只是想补充一点，这个[bootstrap 3 视频](http://www.youtube.com/watch?v=oq-HNuxFPdE) 被证明非常有用并且对我有用。

# deployment - 部署 jar 时出现奇怪的警告

> ID：15868231
> 
> 赞同：0
> 
> 时间：2013-04-07T21:47:06.350
> 
> 标签：deployment, jar, warnings, java

当我部署我的 jar 文件时出现此警告

```
warning: [options] bootstrap class path not set in conjunction with -source 1.4 
```

我试图让它使用 JRE 1.4 工作，它工作正常，但我只是想确保该警告不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:21:19.837

基本没什么，无视就好。

# c# - 将值 [0.0-1.0] 映射到颜色增益

> ID：15868234
> 
> 赞同：3
> 
> 时间：2013-04-07T21:47:28.187
> 
> 标签：c#, colors, pixel, spectrogram

我需要将 0.0 到 1.0 的值转换为它们的颜色表示（每个值都是一个像素）。我正在制作频谱图，因此像素应该越高，值越高（如下图所示）。

我怎样才能做到这一点？我在 C# 中工作，但一个普遍适用的解决方案也很好。

例子：

![在此处输入图像描述](https://i.stack.imgur.com/tYGtG.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T22:23:25.680

这个答案不仅应该向您展示如何从单个浮点值创建颜色，而且输出应该与显示的强度比例非常相似。

```
private float LinearStep(float x, float start, float width = 0.2f)
{
    if (x < start)
        return 0f;
    else if (x > start+width)
        return 1;
    else
        return (x-start) / width;
}

private float GetRedValue(float intensity)
{
    return LinearStep(intensity, 0.2f);
}

private float GetGreenValue(float intensity)
{
    return LinearStep(intensity, 0.6f);
}

private float GetBlueValue(float intensity)
{
    return LinearStep(intensity, 0f)
    - LinearStep(intensity, 0.4f)
    + LinearStep(intensity, 0.8f);
}

private Color getColor(float intensity)
{
    return Color.FromArgb(255,
        (int)(255*GetRedValue(intensity)),
        (int)(255*GetGreenValue(intensity)),
        (int)(255*GetBlueValue(intensity))
    );
} 
```

我在记事本++中做了这个，所以它没有经过测试。但是你应该明白了;-)

当然，您可以使用它来创建查找表。这完全取决于你;-)

* * *

由于我无法将此图像放在评论中，因此这是获得此解决方案的过程： ![图1](https://i.stack.imgur.com/o0JTA.png)

1.  Identify the "pure" colors. by this I mean the ones in the 8 colors palette where every component is either 255 or zero.
2.  Draw the dashed lines. You know the rgb values at these points.
3.  Interpolate linearly.

Step 3 is done by the LinearStep() function in the code, one call for each slope. Ascending slopes are added, descending slopes are subtracted. If you are unsure about this, try to do this with the original color map. I hope you can take it from here :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:23:57.983

What you see here is a use of pseudocolor or false color. Depending on the field of application different [palettes](http://en.wikipedia.org/wiki/List_of_software_palettes#False_color_palettes) tend to be used, the one you show looks a lot like one commonly used in [thermography](http://en.wikipedia.org/wiki/File%3aTermografia_kot.jpg), but there are several others that might be more adapted to your field of use. And the construction of such a palette is a bit more sophisticated than just cycling through rgb components by the way.

当我使用假彩色图像时，我们使用查找表，因为它是（并且可能是）迄今为止获取与输入值对应的颜色的最快方法。您显示的那个似乎有 256 个不同的值（这不足为奇），因此您需要一个包含 256 个颜色值的数组作为查找表。我个人建议编写一个小程序，通过从您喜欢的色标中读取像素并在您的主程序中使用它来构建一些源代码。可能还会有准备使用的源代码或色标信息，也许关键字热成像和伪彩色/假色可以帮助您进行搜索。

# c# - 不能有条件图像源语句？

> ID：15868237
> 
> 赞同：0
> 
> 时间：2013-04-07T21:47:41.810
> 
> 标签：c#, wpf, visual-studio-2012, volume

我不知道为什么，但我收到以下错误：

> 你调用的对象是空的。

使用此代码：

```
private void volumeTracker_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e) 
{
    video.Volume = volumeTracker.Value;

    if (volumeTracker.Value == 0) 
    {
        volume.Source = new BitmapImage(new Uri("pack://application:,,,/Images/mutebutton.png"));
    }
    else
    {
        volume.Source = new BitmapImage(new Uri("pack://application:,,,/Images/volumebutton.png")); //Error occurs on this line
    }
} 
```

*如果我只设置一次源（例如，如果我删除了此代码的 else 部分*），这对我来说毫无意义。

# java - 调整窗口大小时画布清除

> ID：15868238
> 
> 赞同：0
> 
> 时间：2013-04-07T21:47:48.643
> 
> 标签：java

我正在尝试制作一个绘画程序，但我的画布有这个问题，每次我调整或最大化包含它的窗口时它都会清除。我真的不知道问题出在哪里，paint() 和 repaint() 方法在画布类中没有被覆盖，而且我没有使用任何 addapter 来调整窗口大小。任何帮助将非常感激。

这是代码：

```
public class Plansa extends Canvas{
Image image;
Pencil pencil;
public Plansa(){
    this.setSize(800, 600);
    this.setBackground(Color.white);
    pencil = new Pencil(this);
    addMouseListener(pencil);
    addMouseMotionListener(pencil);
}
public Plansa(int width, int height){
    this.setBounds(0, 0, width, height);
    this.setBackground(Color.white);
    pencil = new Pencil(this);
    addMouseListener(pencil);
    addMouseMotionListener(pencil);
}
public Plansa(Image imag) {
    this.setBackground(Color.white);
    this.setSize(imag.getWidth(this), imag.getHeight(this));
    image = imag;
    this.image = imag;
    this.repaint();
    pencil = new Pencil(this);
    addMouseListener(pencil);
    addMouseMotionListener(pencil);  

        }

public Dimension getPreferredSize() { 
    if(image==null)  
        return new Dimension( 800, 600 );  
    int w = image.getWidth( this );  
    int h = image.getHeight( this );  
    return new Dimension( w, h );  
 }

}

public class Fereastra extends JFrame{
private Plansa plansa;

public Fereastra () {
    super( "***Painter***" ) ;
    Dimension dimension = Toolkit.getDefaultToolkit().getScreenSize();
    int x = (int) ((dimension.getWidth() - this.getWidth())/2);
    int y = (int) ((dimension.getHeight() - this.getHeight())/2);
    this.setLocation(0, 0);
    this.setSize(dimension);
    plansa = new Plansa(this.getWidth(), this.getHeight());

    //...

    setDefaultCloseOperation(EXIT_ON_CLOSE);

    add (plansa, BorderLayout.CENTER ) ;
    pack();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:38:43.000

听起来像你画画，使用`getGraphics`- 答案是**不要这样做**。而是覆盖该`paintComponent`方法：

```
public class Canvas extends JPanel {

    public void paintComponent(Graphics g) {
        super.paintComponent(g) // paints background

        /* do your drawings here */

    }

} 
```

[如果这没有帮助，请花点时间发布您的绘图代码。]

# python - Jinja2 孩子

> ID：15868242
> 
> 赞同：0
> 
> 时间：2013-04-07T21:48:00.797
> 
> 标签：python, flask, jinja2

我正在尝试从每个项目的子项中输出数据。下面是模板、输出、预期输出和正在传递的数据。

模板.html：

```
{% for item in data %}
    <h3>{{ item }}</h3>

    {% for task in item.children %}
        {{ task.name }}
    {% endfor %}
{% endfor %} 
```

输出：

```
<h3>Web</h3>

<h3>Mobile</h3> 
```

预期输出：

```
<h3>Web</h3>
Homepage
Register

<h3>Mobile</h3>
Signup
Login 
```

传递给模板的数据：

```
{
  "Web": [
    {
      "name": "Homepage", 
      "followers": [
        {
          "id": 53670274409
        }
      ]
    }, 
    {
      "name": "Register", 
      "followers": [
        {
          "id": 53670274410
        }
      ]
    }, 
  ],
  "Web": [
    {
      "name": "Signup", 
      "followers": [
        {
          "id": 53670274409
        }
      ]
    }, 
    {
      "name": "Login", 
      "followers": [
        {
          "id": 53670274410
        }
      ]
    }, 
  ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:13:32.133

遍历字典时，您只会获得键，您也可以使用它`.items()`来获取值：

```
{% for item, children in data.items() %}
    <h3>{{ item }}</h3>

    {% for c in children %}
        {{ c.name }}
    {% endfor %}

{% endfor %} 
```

# objective-c - 按索引读取 NSDictionary

> ID：15868243
> 
> 赞同：0
> 
> 时间：2013-04-07T21:48:06.980
> 
> 标签：objective-c, nsdictionary

我有一个 REST-api，它在解析 JSON 后从 NSDictionary 中的调用返回内容。

它是这样记录的：

```
2013-04-07 23:43:25.008 MyApp[15133:c07] (
        {
        id = 1;
        name = "The best of NTNU";
        type = 1;
    },
        {
        id = 2;
        name = "Forever alone";
        type = 1;
    }
) 
```

我想将字典的第一级作为我可以使用的 NSDict。问题是，无论我如何尝试抓住这个（`valueForKey`，`objectForKey`），应用程序都会崩溃。

根据内存检查员的说法是这个 NSDict [0] 和 [1] 的“孩子”，但我不知道如何得到他们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T21:50:29.090

JSON 实际上返回的是 NSDictionaries 的 NSArray，而不是单个 NSDictionary。

要获取第一级，您需要获取数组的第一个索引：

```
NSArray *json = [NSJSONSerialization ....
NSDictionary *firstLevel = json[0]; // or [json objectAtIndex:0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:50:41.077

这看起来像一个`NSArray`（因为没有键......），所以您可以使用`objectAtIndex:`选择器访问第一个字典。

```
NSDictionary * dict0 = [array objectAtIndex:0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T21:50:47.367

This is actually a `NSArray` of `NSDictionary`.

# android - Android - 将 imageView 添加到背景

> ID：15868245
> 
> 赞同：0
> 
> 时间：2013-04-07T21:48:18.143
> 
> 标签：android, android-layout

我正在尝试将图像添加到活动背景，这样如果没有互联网连接，它也会显示全屏图像。我有图像，但我无法显示它。这是我的代码。

```
 public class MainActivity extends Activity {

    private WebView webView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        webView = (WebView) findViewById(R.id.webview);

        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        android.net.NetworkInfo wifi = cm
                .getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        android.net.NetworkInfo datac = cm
                .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
        if ((wifi != null & datac != null)
                && (wifi.isConnected() | datac.isConnected())) {
                CookieManager cookieManager = CookieManager.getInstance(); 
                cookieManager.setAcceptCookie(true); 

                webView = (WebView) findViewById(R.id.webview);
                webView.getSettings().setJavaScriptEnabled(true);
                webView.setWebChromeClient(new WebChromeClient() {
                       public void onProgressChanged(WebView view, int progress) {
                        MainActivity.this.setProgress(progress * 1000);
                       }
                     });
                     webView.setWebViewClient(new MyWebViewClient() {
                       public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                         Toast.makeText(MainActivity.this, "An error occurred " + description, Toast.LENGTH_LONG).show();
                       }
                     });

                     webView.loadUrl("http://mysite.com/?ma=1");
               }
                 else{
 this ----->      ImageView iv = new ImageView(this); 
                  iv.setImageResource(R.drawable.noconnect);
                  iv.setAdjustViewBounds(true);
                  Toast toast = Toast.makeText(MainActivity.this, "No Internet Connection", Toast.LENGTH_LONG);
                  toast.show();  

        }

    }

    private class MyWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            if (Uri.parse(url).getHost().equals("mysite.com")) {
                return false;
            }
            // Otherwise, the link is not for a page on my site, so launch another Activity that handles URLs
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
            startActivity(intent);
            return true;
        }
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_BACK) && webView.canGoBack()) {
            webView.goBack();
            return true;
        } 
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) 
    {
        switch (item.getItemId()) 
        {
            case R.id.logout:
                finish();
                return true;
        }
      return false;
    }

} 
```

编辑：这是 XML，这样会导致它在加载时崩溃。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
              android:orientation="vertical" 
              android:layout_width="fill_parent" 
              android:layout_height="fill_parent"
              android:id="@+id/pmlayout" >

     <ImageView 
       android:id="@+id/noconn"
       android:background="@drawable/noconnect"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:scaleType="matrix"
       android:visibility="visible" >
     </ImageView>

     <WebView android:id="@+id/webview" 
              android:layout_width="fill_parent" 
              android:layout_height="fill_parent"/>

</LinearLayout> 
```

**编辑2：**

这是我现在遇到的崩溃错误。

```
04-07 18:51:17.920: E/AndroidRuntime(8113): FATAL EXCEPTION: main
04-07 18:51:17.920: E/AndroidRuntime(8113): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.site.testapp/com.site.testapp.MainActivity}: java.lang.ClassCastException: android.widget.ImageView cannot be cast to android.webkit.WebView
04-07 18:51:17.920: E/AndroidRuntime(8113):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2088)
04-07 18:51:17.920: E/AndroidRuntime(8113):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2113)
04-07 18:51:17.920: E/AndroidRuntime(8113):     at android.app.ActivityThread.access$700(ActivityThread.java:139)
04-07 18:51:17.920: E/AndroidRuntime(8113):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1224)
04-07 18:51:17.920: E/AndroidRuntime(8113):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-07 18:51:17.920: E/AndroidRuntime(8113):     at android.os.Looper.loop(Looper.java:137)
04-07 18:51:17.920: E/AndroidRuntime(8113):     at android.app.ActivityThread.main(ActivityThread.java:4918)
04-07 18:51:17.920: E/AndroidRuntime(8113):     at java.lang.reflect.Method.invokeNative(Native Method)
04-07 18:51:17.920: E/AndroidRuntime(8113):     at java.lang.reflect.Method.invoke(Method.java:511)
04-07 18:51:17.920: E/AndroidRuntime(8113):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
04-07 18:51:17.920: E/AndroidRuntime(8113):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
04-07 18:51:17.920: E/AndroidRuntime(8113):     at dalvik.system.NativeStart.main(Native Method)
04-07 18:51:17.920: E/AndroidRuntime(8113): Caused by: java.lang.ClassCastException: android.widget.ImageView cannot be cast to android.webkit.WebView
04-07 18:51:17.920: E/AndroidRuntime(8113):     at me.publicize.testapp.MainActivity.onCreate(MainActivity.java:30)
04-07 18:51:17.920: E/AndroidRuntime(8113):     at android.app.Activity.performCreate(Activity.java:5048)
04-07 18:51:17.920: E/AndroidRuntime(8113):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
04-07 18:51:17.920: E/AndroidRuntime(8113):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2052)
04-07 18:51:17.920: E/AndroidRuntime(8113):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:54:53.667

为了将此图像添加到您的布局中，您首先需要为您的活动布局分配一个 ID。然后使用以下方法找到它：

```
findViewByid(id); 
```

例如：

```
LinearLayout linearLayout = (LinearLayout) findViewByid (R.id.llayout); 
```

然后将 ImageView 添加到布局中：

```
linearLayout.addView(iv); 
```

# jquery - 通过单击其他任何位置来隐藏显示/切换 div。

> ID：15868247
> 
> 赞同：0
> 
> 时间：2013-04-07T21:48:30.590
> 
> 标签：jquery, toggle

我能够创建一个简单的显示/隐藏 jQuery 函数，如下面的代码所示......

我试图在显示 div 时使用户不必单击按钮使其再次隐藏。因此，当他们单击页面上的其他位置或向下滚动时，它就会消失......

我尝试重复相同的功能，但用 body 替换 #hideshow ，但这把一切都搞砸了。

请问我可以帮忙吗？

```
<a type='button' id='hideshow' value='hide/show' ><li class="glob">About</li></a>

jQuery(document).ready(function(){
jQuery('#hideshow').live('click', function(event) {        
     jQuery('#about_box').slideToggle('show');
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:54:17.463

首先，`.live()`它已经过时并且在 jQuery 1.9 中被删除。你应该[`.on()`](http://api.jquery.com/on/)改用。其次，如果您要在类似的东西上放置一个点击处理程序，`body`或者`document`您需要在您不想触发它并让它调用的元素上放置一个点击处理程序[`event.stopPropagation()`](http://api.jquery.com/event.stopPropagation/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:52:31.487

尝试使用[`.blur()`](http://api.jquery.com/blur/)事件。

```
jQuery('#hideshow').blur(function() {
  jQuery('#about_box').slideUp();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T22:02:32.247

试试[http://jsfiddle.net/X5xBs/](http://jsfiddle.net/X5xBs/)

```
$(document).ready(function(){
$('#hideshow').on('click', function(event) {        
    $('#about_box').slideToggle('show');
});
    $('#hideshow').mouseleave(function () {
    $('#about_box').slideToggle('hide');
});
}); 
```

# javascript - 如何在angularJS中过滤多个值（或运算）

> ID：15868248
> 
> 赞同：136
> 
> 时间：2013-04-07T21:48:33.033
> 
> 标签：javascript, angularjs, angularjs-ng-repeat

我想使用`filter`in 角度并希望过滤多个值，如果它具有其中一个值，则应该显示它。

例如，我有这个结构：

`movie`一个具有属性的对象，`genres`我想过滤`Action`和`Comedy`。

我知道我可以做`filter:({genres: 'Action'} || {genres: 'Comedy'})`，但是如果我想动态过滤它怎么办。例如`filter: variableX`

当我有一系列必须过滤的类型时，如何在 中设置`variableX`？`$scope`

我可以将它构造为一个字符串，然后做一个`eval()`但我不想使用 eval()...

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-04-08T00:16:00.567

我只想创建一个自定义过滤器。他们没有那么难。

```
angular.module('myFilters', []).
  filter('bygenre', function() {
    return function(movies,genres) {
      var out = [];
      // Filter logic here, adding matches to the out var.
      return out;
    }
  }); 
```

### 模板：

```
<h1>Movies</h1>

<div ng-init="movies = [
          {title:'Man on the Moon', genre:'action'},
          {title:'Meet the Robinsons', genre:'family'},
          {title:'Sphere', genre:'action'}
       ];" />
<input type="checkbox" ng-model="genrefilters.action" />Action
<br />
<input type="checkbox" ng-model="genrefilters.family" />Family
<br />{{genrefilters.action}}::{{genrefilters.family}}
<ul>
    <li ng-repeat="movie in movies | bygenre:genrefilters">{{movie.title}}: {{movie.genre}}</li>
</ul> 
```

**在此处编辑**是链接：[创建角度过滤器](https://docs.angularjs.org/guide/filter#creating-custom-filters)

*更新*：这是一个[小提琴](http://jsfiddle.net/Xesued/Bw77D/7/)，其中包含我的建议的精确演示。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2013-04-08T00:53:37.397

您可以使用控制器功能进行过滤。

```
function MoviesCtrl($scope) {

    $scope.movies = [{name:'Shrek', genre:'Comedy'},
                     {name:'Die Hard', genre:'Action'},
                     {name:'The Godfather', genre:'Drama'}];

    $scope.selectedGenres = ['Action','Drama'];

    $scope.filterByGenres = function(movie) {
        return ($scope.selectedGenres.indexOf(movie.genre) !== -1);
    };

} 
```

HTML：

```
<div ng-controller="MoviesCtrl">
    <ul>
        <li ng-repeat="movie in movies | filter:filterByGenres">
            {{ movie.name }} {{ movie.genre }}
        </li>
    </ul>
</div> 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-09-03T14:09:55.173

在这里创建自定义过滤器可能有点过头了，你可以传入一个自定义比较器，如果你有多个值，比如：

```
$scope.selectedGenres = "Action, Drama"; 

$scope.containsComparator = function(expected, actual){  
  return actual.indexOf(expected) > -1;
}; 
```

然后在过滤器中：

```
filter:{name:selectedGenres}:containsComparator 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-01-16T18:10:47.403

这是自定义过滤器的实现，它将使用值数组过滤数据。它将支持具有数组和单个键值的多个键对象。如前所述，inangularJS API [AngularJS 过滤器文档](http://docs.angularjs.org/api/ng.filter:filter)支持单个值的多个键过滤器，但下面的自定义过滤器将支持与 angularJS 相同的功能，并且还支持值数组以及数组和键值的组合。请在下面找到代码片段，

```
myApp.filter('filterMultiple',['$filter',function ($filter) {
return function (items, keyObj) {
    var filterObj = {
        data:items,
        filteredData:[],
        applyFilter : function(obj,key){
            var fData = [];
            if (this.filteredData.length == 0)
                this.filteredData = this.data;
            if (obj){
                var fObj = {};
                if (!angular.isArray(obj)){
                    fObj[key] = obj;
                    fData = fData.concat($filter('filter')(this.filteredData,fObj));
                } else if (angular.isArray(obj)){
                    if (obj.length > 0){
                        for (var i=0;i<obj.length;i++){
                            if (angular.isDefined(obj[i])){
                                fObj[key] = obj[i];
                                fData = fData.concat($filter('filter')(this.filteredData,fObj));    
                            }
                        }

                    }
                }
                if (fData.length > 0){
                    this.filteredData = fData;
                }
            }
        }
    };
    if (keyObj){
        angular.forEach(keyObj,function(obj,key){
            filterObj.applyFilter(obj,key);
        });
    }
    return filterObj.filteredData;
}
}]); 
```

**用法：**

```
arrayOfObjectswithKeys | filterMultiple:{key1:['value1','value2','value3',...etc],key2:'value4',key3:[value5,value6,...etc]} 
```

这是一个实现上述**“filterMutiple”**自定义过滤器的小提琴示例。 [:::小提琴示例:::](http://jsfiddle.net/nirmalkumar_86/9F89Q/5/)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2014-09-18T18:14:15.183

如果你想过滤对象数组，那么你可以给

`filter:({genres: 'Action', key :value }.`

单个属性将由为该属性指定的特定过滤器过滤。

但是，如果您想按单个属性进行过滤并针对所有属性进行全局过滤，那么您可以执行类似的操作。

```
<tr ng-repeat="supp in $data | filter : filterObject |  filter : search">
```

其中“filterObject”是用于搜索单个属性的对象，“Search”将在全局范围内搜索每个属性。

~阿图尔

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-06-23T15:06:59.293

我花了一些时间，感谢@chrismarx，我看到 angular 的默认设置`filterFilter`允许您传递自己的比较器。这是多个值的编辑比较器：

```
 function hasCustomToString(obj) {
        return angular.isFunction(obj.toString) && obj.toString !== Object.prototype.toString;
  }
  var comparator = function (actual, expected) {
    if (angular.isUndefined(actual)) {
      // No substring matching against `undefined`
      return false;
    }
    if ((actual === null) || (expected === null)) {
      // No substring matching against `null`; only match against `null`
      return actual === expected;
    }
    // I edited this to check if not array
    if ((angular.isObject(expected) && !angular.isArray(expected)) || (angular.isObject(actual) && !hasCustomToString(actual))) {
      // Should not compare primitives against objects, unless they have custom `toString` method
      return false;
    }
    // This is where magic happens
    actual = angular.lowercase('' + actual);
    if (angular.isArray(expected)) {
      var match = false;
      expected.forEach(function (e) {
        e = angular.lowercase('' + e);
        if (actual.indexOf(e) !== -1) {
          match = true;
        }
      });
      return match;
    } else {
      expected = angular.lowercase('' + expected);
      return actual.indexOf(expected) !== -1;
    }
  }; 
```

如果我们想为 DRY 制作一个自定义过滤器：

```
angular.module('myApp')
    .filter('filterWithOr', function ($filter) {
      var comparator = function (actual, expected) {
        if (angular.isUndefined(actual)) {
          // No substring matching against `undefined`
          return false;
        }
        if ((actual === null) || (expected === null)) {
          // No substring matching against `null`; only match against `null`
          return actual === expected;
        }
        if ((angular.isObject(expected) && !angular.isArray(expected)) || (angular.isObject(actual) && !hasCustomToString(actual))) {
          // Should not compare primitives against objects, unless they have custom `toString` method
          return false;
        }
        console.log('ACTUAL EXPECTED')
        console.log(actual)
        console.log(expected)

        actual = angular.lowercase('' + actual);
        if (angular.isArray(expected)) {
          var match = false;
          expected.forEach(function (e) {
            console.log('forEach')
            console.log(e)
            e = angular.lowercase('' + e);
            if (actual.indexOf(e) !== -1) {
              match = true;
            }
          });
          return match;
        } else {
          expected = angular.lowercase('' + expected);
          return actual.indexOf(expected) !== -1;
        }
      };
      return function (array, expression) {
        return $filter('filter')(array, expression, comparator);
      };
    }); 
```

然后我们可以在任何我们想要的地方使用它：

```
$scope.list=[
  {name:'Jack Bauer'},
  {name:'Chuck Norris'},
  {name:'Superman'},
  {name:'Batman'},
  {name:'Spiderman'},
  {name:'Hulk'}
];

<ul>
  <li ng-repeat="item in list | filterWithOr:{name:['Jack','Chuck']}">
    {{item.name}}
  </li>
</ul> 
```

最后这是一个[plunkr](http://plnkr.co/edit/INHgnStQof8nT2f6tk7X?p=preview)。

注意：预期的数组应该只包含简单的对象，如**String**、**Number**等。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-07-23T06:54:05.503

您可以使用 angular.filter 的 searchField 过滤[器](https://github.com/a8m/angular-filter)

**JS：**

```
$scope.users = [
 { first_name: 'Sharon', last_name: 'Melendez' },
 { first_name: 'Edmundo', last_name: 'Hepler' },
 { first_name: 'Marsha', last_name: 'Letourneau' }
]; 
```

**HTML：**

```
<input ng-model="search" placeholder="search by full name"/> 
<th ng-repeat="user in users | searchField: 'first_name': 'last_name' | filter: search">
  {{ user.first_name }} {{ user.last_name }}
</th>
<!-- so now you can search by full name --> 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2015-09-28T19:56:47.927

`ngIf`如果情况允许，您也可以使用：

```
<div ng-repeat="p in [
 { name: 'Justin' }, 
 { name: 'Jimi' }, 
 { name: 'Bob' }
 ]" ng-if="['Jimi', 'Bob'].indexOf(e.name) > -1">
 {{ p.name }} is cool
</div> 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-09-09T23:18:37.353

The quickest solution that I've found is to use the `filterBy` filter from [angular-filter](https://github.com/a8m/angular-filter#filterby), for example:

```
<input type="text" placeholder="Search by name or genre" ng-model="ctrl.search"/>   
<ul>
  <li ng-repeat="movie in ctrl.movies | filterBy: ['name', 'genre']: ctrl.search">
    {{movie.name}} ({{movie.genre}}) - {{movie.rating}}
  </li>
</ul> 
```

The upside is that [angular-filter](https://github.com/a8m/angular-filter) is a fairly popular library (~2.6k stars on GitHub) which is still actively developed and maintained, so it should be fine to add it to your project as a dependency.

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-07-11T14:17:32.217

我相信这就是您正在寻找的：

```
<div>{{ (collection | fitler1:args) + (collection | filter2:args) }}</div> 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-03-11T19:48:16.867

假设您有两个数组，一个用于电影，一个用于流派

只需将过滤器用作：`filter:{genres: genres.type}`

这里的流派是数组，类型对流派有价值

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-06-24T10:51:58.397

请试试这个

```
var m = angular.module('yourModuleName');
m.filter('advancefilter', ['$filter', function($filter){
    return function(data, text){
        var textArr = text.split(' ');
        angular.forEach(textArr, function(test){
            if(test){
                  data = $filter('filter')(data, test);
            }
        });
        return data;
    }
}]); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-10-30T01:02:09.637

我为字符串和功能编写了这个（我知道这不是问题，但我搜索并到了这里），也许它可以扩展。

```
String.prototype.contains = function(str) {
  return this.indexOf(str) != -1;
};

String.prototype.containsAll = function(strArray) {
  for (var i = 0; i < strArray.length; i++) {
    if (!this.contains(strArray[i])) {
      return false;
    }
  }
  return true;
}

app.filter('filterMultiple', function() {
  return function(items, filterDict) {
    return items.filter(function(item) {
      for (filterKey in filterDict) {
        if (filterDict[filterKey] instanceof Array) {
          if (!item[filterKey].containsAll(filterDict[filterKey])) {
            return false;
          }
        } else {
          if (!item[filterKey].contains(filterDict[filterKey])) {
            return false;
          }
        }
      }
      return true;
    });  
  };
}); 
```

用法：

```
<li ng-repeat="x in array | filterMultiple:{key1: value1, key2:[value21, value22]}">{{x.name}}</li> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-12-10T14:09:18.743

**角度或过滤器模块**

`$filter('orFilter')([{..}, {..} ...], {arg1, arg2, ...}, false)`

这是链接：[https ://github.com/webyonet/angular-or-filter](https://github.com/webyonet/angular-or-filter)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-06-30T18:57:50.343

我有类似的情况。编写自定义过滤器对我有用。希望这可以帮助！

**JS：**

```
App.filter('searchMovies', function() {
    return function (items, letter) {
        var resulsts = [];
        var itemMatch = new RegExp(letter, 'i');
        for (var i = 0; i < items.length; i++) {
            var item = items[i];
            if ( itemMatch.test(item.name) || itemMatch.test(item.genre)) {
                results.push(item);
            }
        }
        return results;
    };
}); 
```

**HTML：**

```
<div ng-controller="MoviesCtrl">
    <ul>
        <li ng-repeat="movie in movies | searchMovies:filterByGenres">
            {{ movie.name }} {{ movie.genre }}
        </li>
    </ul>
</div> 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-08-08T10:17:53.393

这是我的示例如何为表[jsfiddle创建过滤器和指令](https://jsfiddle.net/jasmin_kurtic/yat6ghjx/)

指令获取列表（数据）并使用过滤器创建表

```
<div ng-app="autoDrops" ng-controller="HomeController">
<div class="row">
    <div class="col-md-12">
        <h1>{{title}}</h1>
        <ng-Multiselect array-List="datas"></ng-Multiselect>
    </div>
</div>
</div> 
```

如果我能帮助你，我很高兴

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-05-24T20:19:42.727

Too late to join the party but may be it can help someone:

We can do it in two step, first filter by first property and then concatenate by second filter:

```
$scope.filterd = $filter('filter')($scope.empList, { dept: "account" });
$scope.filterd = $scope.filterd.concat($filter('filter')($scope.empList, { dept: "sales" })); 
```

[See the working fiddle with multiple property filter](http://jsfiddle.net/ADukg/11278/)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-12-28T18:38:10.273

**OPTION 1: Using Angular providered filter comparator parameter**

```
// declaring a comparator method
$scope.filterBy = function(actual, expected) {
    return _.contains(expected, actual); // uses underscore library contains method
};

var employees = [{name: 'a'}, {name: 'b'}, {name: 'c'}, {name: 'd'}];

// filter employees with name matching with either 'a' or 'c'
var filteredEmployees = $filter('filter')(employees, {name: ['a','c']}, $scope.filterBy); 
```

**OPTION 2: Using Angular providered filter negation**

```
var employees = [{name: 'a'}, {name: 'b'}, {name: 'c'}, {name: 'd'}];

// filter employees with name matching with either 'a' or 'c'
var filteredEmployees = $filter('filter')($filter('filter')(employees, {name: '!d'}), {name: '!b'}); 
```

* * *

## 回答 #19

> 赞同：-3
> 
> 时间：2015-06-18T17:45:34.497

我的解决方案

```
ng-repeat="movie in movies | filter: {'Action'} + filter: {'Comedy}" 
```

* * *

## 回答 #20

> 赞同：-14
> 
> 时间：2014-03-21T09:09:34.693

最好的答案是：

```
filter:({genres: 'Action', genres: 'Comedy'} 
```

# memory - 组装中的循环：8086 上的 TASM（DosBox）

> ID：15868250
> 
> 赞同：0
> 
> 时间：2013-04-07T21:48:35.293
> 
> 标签：memory, video, x86-16, tasm

我正在尝试循环此代码，该代码将字符“Q”写入由 es:[di] 指定的视频内存段 b800 中的地址

在这里，我尝试将循环增加 2（因为每个屏幕位置都包含两个字节、颜色和属性），但代码仅在第一个位置产生字符。我想我不明白如何使用 cx，因为我认为这应该循环 100 次。

```
.model small
.stack
.code
main:

sub cx, cx
mov cx, 100

dates:

mov ax,0B800h          
mov es,ax               
sub di, di               
mov di, 200
add di, 2 
mov ah, 5               
mov al, 'Q'              
mov es:[di], ax 

loop dates

mov ax,4C00h           
int 21h

end main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:59:35.533

OMG，好久没做汇编编程了，但是有一些明显的错误：

*   初始`sub cx,cx`将 cx 设置为 0，但这没用，因为你`mov cx,100`下一行

*   您为每个循环周期设置`es` `di`etc new 的值，因此所有迭代都写入相同的位置。解决方案：移动日期：标签之前`add di,2`

*   你没有合适的循环计数器，所以你应该`loop dates`用类似的东西替换

十二月

jnz日期

# asp.net - 如何使用href发送参数

> ID：15868252
> 
> 赞同：0
> 
> 时间：2013-04-07T21:48:44.147
> 
> 标签：asp.net, listview, href, detailsview

我正在使用 C# 和 EntityDataSource 在 asp.NET 中开发一个 Web 应用程序。我有一个列表视图来显示产品列表，我想重定向到另一个包含所选产品详细信息的表单（您可以选择产品的名称或图像）。重定向成功发生，但详细视图中的产品始终相同（第一个）。

```
<ItemTemplate>
    <tr style="">
        <td>
                <asp:Label ID="ProductIDLabel" runat="server" Text='<%# Eval("ProductID") %>' />

        </td>
        <td>
            <asp:Label ID="ListPriceLabel" runat="server" Text='<%# Eval("ListPrice") %>' />
        </td>
        <td>
             <a href='<%# String.Format("Product.aspx?id={0}", Eval("ProductID")) %>' >
              <asp:Label ID="NameLabel" runat="server" Text='<%# Eval("Name") %>' />  
            </a>

        </td>
        <td>

            <a href='Product.aspx?ID=<%# Eval("productID") %>'  >
                <asp:Image ID="Image1" ImageUrl='<%# String.Format("~/ImageProduct.ashx?id={0}", Eval("ProductID")) %>' runat="server" />
            </a>

        </td>
        <td>
            <asp:Label ID="ThumbnailPhotoFileNameLabel" runat="server" Text='<%# Eval("ThumbnailPhotoFileName") %>' />
        </td>
    </tr>
</ItemTemplate> 
```

有什么帮助吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:34:45.230

让我澄清一下。您有一个产品列表视图，当您单击列表中特定产品的链接时，您的页面将被重定向到包含详细信息视图中特定产品详细信息的页面。那是对的吗？

在这种情况下，您只需在 DetailsView 中添加一个 QueryString

例子：

```
<asp:QueryStringParameter DefaultValue="0" Name="ProductID" 
                QueryStringField="ID" /> 
```

# c - 我是否将这个 C 代码正确地翻译成 AS3？

> ID：15868257
> 
> 赞同：0
> 
> 时间：2013-04-07T21:49:05.927
> 
> 标签：c, actionscript-3, wav, pcm, compression

所以我找到了一些 C 代码来解压缩某些 PCM 样本，我想在 AS3 中做同样的事情。我试图这样做，但它似乎没有工作。我对 C 知之甚少，虽然我对 AS3 相当流利，所以我可能翻译不正确。

这是C代码：

```
BYTE  bShift; // shift value
char *inputBuffer[dwSize];

SHORT iCurValue;
DWORD i;

iCurValue=0x0000;

for (i=0;i<dwSize;i++)
{
    iCurValue+=(signed short)inputBuffer[i];
    Output(iCurValue<<bShift);
} 
```

（`Output()`是对解压缩样本值执行的操作的占位符。）

这是我在 AS3 中创建的一个函数，它应该做同样的事情：

```
private function pcmDecompress(pcmBytes:ByteArray, shift:int):ByteArray
{
    var input:ByteArray = pcmBytes;
    var output:ByteArray = new ByteArray();
    output.endian = Endian.LITTLE_ENDIAN;

    var iCurValue:int = 0x0000;

    for (var i:int = 0; i < input.length; i++)
    {
        iCurValue += input[i];
        output.writeShort(iCurValue << shift);
    }

    return output;
} 
```

之后，我对 WAV 文件进行编码并保存，`output`用作包含样本的数据部分。WAV 文件播放，但我听到的只是很多静态的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:46:09.367

取决于您的平台，但在 32 位系统上：

1.  C 中的“短”数据类型通常为 16 位宽。
2.  AS3 中的“int”数据类型为 32 位宽。

现在看看这些 C 行：

```
char *inputBuffer[dwSize]; 
```

和

```
iCurValue+=(signed short)inputBuffer[i]; 
```

第一个说我们有一个字节流（您的 Delta PCM 编码波形）。

第二个告诉计算机**将这些视为 16 位值流**。为什么？因为您的 C 代码可能假定样本大小为 16 位。您的 AS3 代码不执行此部分（将字节数组解释为短数组）。

如果我这样做，我会改变

```
iCurValue += input[i]; 
```

是这样的：

```
iCurValue += input.readShort(); 
```

因此，您一直在读取字节流，就好像它是`int`s 一样，从而读取垃圾（这解释了您所听到的内容）。

希望有帮助！

# html - 从 NSString 中删除 HTML 会导致问题

> ID：15868263
> 
> 赞同：0
> 
> 时间：2013-04-07T21:50:25.090
> 
> 标签：html, objective-c

我做了一个RSS阅读器，我正在解析描述，但是描述中有HTML标签，所以我用下面的方法创建了一个NSString的类别来清除标签：

```
- (NSString *)stripTags:(NSString *)str
{
NSMutableString *html = [NSMutableString stringWithCapacity:[str length]];

NSScanner *scanner = [NSScanner scannerWithString:str];
scanner.charactersToBeSkipped = NULL;
[scanner setCharactersToBeSkipped:nil];
NSString *tempText = nil;

while (![scanner isAtEnd])
{
    [scanner scanUpToString:@"<" intoString:&tempText];

    if (tempText != nil)
        [html appendString:tempText];

    [scanner scanUpToString:@">" intoString:NULL];

    if (![scanner isAtEnd])
        [scanner setScanLocation:[scanner scanLocation] + 1];

    tempText = nil;
}

return html;
} 
```

这在删除 HTML 标签时效果很好，这不是问题。问题是我将描述设置为最多 100 个字符的长度，但它仍在计算该字符数中已删除的 HTML 标记。所以有些描述根本不显示，或者有些描述很短。我需要知道如何删除 HTML 标签，这样它们就不会占用任何字符数。

如果你需要，这里是我设置我的描述：

```
NSString *dots;
int length = [self.description length];
if (length > 100)
{
    length = 100;
    dots = [NSString stringWithFormat:@"..."];
}
else
{
    dots = [NSString stringWithFormat:@""];
}

NSString *description = [NSString stringWithFormat:@"%@%@", [self.description substringToIndex:length], dots]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:30:08.647

这似乎是因为您使用第一行从原始字符串设置了字符串的容量。

```
NSMutableString *html = [NSMutableString stringWithCapacity:[str length]]; 
```

I believe this sets a minimum capacity size and while it can grow beyond this freely it cannot shrink to your new size.

A quick fix would probably be to set the length initially to 1 or something smaller than the smallest expected text.

Example:

```
NSMutableString *html = [NSMutableString stringWithCapacity:1]; 
```

You could simply use:

```
NSMutableString *html = [[NSMutableString alloc] init]; 
```

I tried with this code and it works exactly like it should

```
NSMutableString *html = [[NSMutableString alloc] init];
NSLog(@"Before: %u", [html length]);

NSScanner *scanner = [NSScanner scannerWithString:@"<a>this is a test</a>"];
scanner.charactersToBeSkipped = NULL;
[scanner setCharactersToBeSkipped:nil];
NSString *tempText = nil;

while (![scanner isAtEnd])
{
    [scanner scanUpToString:@"<" intoString:&tempText];

    if (tempText != nil)
        [html appendString:tempText];

    [scanner scanUpToString:@">" intoString:NULL];

    if (![scanner isAtEnd])
        [scanner setScanLocation:[scanner scanLocation] + 1];

    tempText = nil;
}

NSLog(@"After: %u", [html length]); 
```

# memory-management - 本机语言中的堆栈溢出行为

> ID：15868266
> 
> 赞同：1
> 
> 时间：2013-04-07T21:50:35.710
> 
> 标签：memory-management, native, stack-overflow, undefined-behavior, variable-length-array

我很好奇为什么大多数本地语言，包括 C、C++ 和 D，都没有定义堆栈溢出行为。是不是因为它需要检测每个堆栈变量分配和函数调用，而这反过来又会使代码变得异常缓慢？即使如此，它至少可以在编译器被提供一些额外的详细调试标志时启用。

我问这个是因为我`alloca`在编写 C++ 代码时对使用 C99 可变长度数组 (VLA) 和 C 函数感到怀疑。对于一些内存处理密集型算法，这可能会导致显着的加速。

我猜这个问题已经被问过很多次了，但我似乎找不到关于 stackexchange 的相关文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:24:59.983

在我看来，原因是高级语言 - 与汇编程序相反 - 应该尽可能独立于执行程序的硬件。它们为程序员提供了制定问题的方法，但让编译器以最佳方式使用硬件。
所以堆栈的概念是高级程序员不应该打扰的东西，无论机器有多少寄存器，也不管它是否有多核 CPU。

# java - Hibernate - 它会改变数据库的结构吗？

> ID：15868270
> 
> 赞同：1
> 
> 时间：2013-04-07T21:50:48.197
> 
> 标签：java, hibernate

我正在 Spring 上用 java 构建更大的项目，很多人建议我使用 hibernate 来简化对数据库的访问。问题是，我必须使用这个项目以前版本的数据库，它曾经是用 PHP 编写的，所以他们肯定没有使用休眠。我读过一些关于休眠的东西，但我仍然不确定一件事——它是否必须改变数据库的结构，或者我可以使用标准的 MySQL 数据库，并将值存储在 int、varchar 和其他类型中，并且只使用休眠摆脱我的java代码中的大量SQL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:18:16.770

Hibernate 是一个高度成熟的项目，并且绝对可以与现有模式很好地配合。[您甚至可以使用Hibernate 工具](http://www.hibernate.org/subprojects/tools.html)从现有模式生成您的类实体。

仍然有一个重要的地方需要小心：Hibernate 支持复合主键和外键，但使用技术生成的 id 会更轻松。

如果我有一个带有形成自然 id 的复合主键的模式，我会考虑在使用 Hibernate 之前用技术自动生成的 id 替换它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:01:03.577

虽然 Hibernate 可用于创建/删除表，但通常您不会在生产环境中这样做。在这些场景中，您将定义 POJOS 和底层数据库模式之间的对象关系映射。因此，实际上，Hibernate 不需要向数据库模式添加任何内容。

如果您使用的是在应用 hibernate 之前定义的模式，您可能需要确保字段转换器是适当的（即，Hibernate 可能对 SQL 中的哪些列类型构成日期或数字有不同的想法），但这意味着您必须提供显式映射/转换器而不是使用默认值。

但是，您应该能够使用 Hibernate，而无需对现有数据库模式进行任何重大更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T06:56:39.753

Hibernate is best and easy for connection purpose.. You can use it without affecting your current structure of database. You can also use annotation in hibernate, it's very simple and easy. Take one thing in mind, You have to add proper mapping in hibernate configuration file! It is a better idea to backup your whole database before you will go with hibernate.

# java - Java - 创建日期列表

> ID：15868278
> 
> 赞同：1
> 
> 时间：2013-04-07T21:51:10.257
> 
> 标签：java, calendar

我无法解决我遇到的问题。我必须创建一个存储传入和传出费用数据的银行系统，到目前为止，我已经创建了一个对象数组，每个对象都保存名称、金额和周数，例如 4。如果我知道这笔费用每 4 周发生一次我如何自动生成从今年 1 日到年底的日期，例如，工资 +4000、1/1/12、工资 +4000、29/1/12 等等？

如果我知道它应该每 X 周发生一次，我如何自动生成日期列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-14T11:03:17.567

这是对@Héctor van den Boorn 答案的改进。

```
Calendar date= Calendar.getInstance();
ArrayList<Calendar> dates = new ArrayList<>();

for (int i=0; i<10; i++)
{
  date.add(Calendar.WEEK_OF_YEAR, 4);
  // Create new instance of cal
  Calendar tmp= Calendar.getInstance();
  //Makes its inner values the same
  tmp.setTime(date.getTime());
  // Add unique instance to list
  dates.add(tmp);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T21:54:57.117

您可以使用 Java 日历类。

```
Calendar date= Calendar.getInstance();
ArrayList<Calendar> dates = new ArrayList<>();

for (int i=0; i<10; i++)
{
  date.add(Calendar.WEEK_OF_YEAR, 4);
  dates.add(date);
} 
```

# core-data - Core Data 不使用我的映射模型

> ID：15868284
> 
> 赞同：1
> 
> 时间：2013-04-07T21:52:02.387
> 
> 标签：core-data, core-data-migration

当我将选项“NSInferMappingModelAutomaticallyOption”设置为是时，新模型是使用旧模型数据设置的。但是，它应该使用我的自定义映射模型来更新特定值。

出于某种原因，它不使用此映射模型，我确实需要它，因为某些重要数据不会从一个旧实体移动到一个新实体。

有任何想法吗？

# javascript - JavaScript/CSS 中的错误淡入/淡出代码

> ID：15868285
> 
> 赞同：1
> 
> 时间：2013-04-07T21:52:11.890
> 
> 标签：javascript, css, html, fadein, fadeout

我不是最精通编码的人，几天来一直试图让这个功能正常工作，希望有人能帮助我......

这个想法是默认显示红色 div，并通过按下“fade 1”和“fade 2”按钮调用蓝色/黄色 div。当任一按钮被按下时，红色 div 被隐藏并且不会被调用。

当前代码在连续按下按钮时出现错误，它们要么不显示，淡出效果不起作用，要么出现红色 div。

谢谢！

```
 <!DOCTYPE html>
            <html>
            <head>
                <style type="text/css">
                    .myBtn
                    {
                        width:80px;
                    }

                     #myImg0
                    {
                        -webkit-transition: opacity 0.5s ease-in;
                        -moz-transition: opacity 0.5s ease-in;
                        -o-transition: opacity 0.5s ease-in;
                        position:absolute;
                        background-color:red;
                        width: 100px;
                        height: 100px;
                    }
                    #myImg1
                    {
                        -webkit-transition: opacity 0.5s ease-in;
                        -moz-transition: opacity 0.5s ease-in;
                        -o-transition: opacity 0.5s ease-in;
                        position:absolute;
                        background-color:blue;
                        width: 100px;
                        height: 100px;
                    }

                    #myImg2
                    {
                        -webkit-transition: opacity 0.5s ease-in;
                        -moz-transition: opacity 0.5s ease-in;
                        -o-transition: opacity 0.5s ease-in;
                        position:absolute;
                        background-color:yellow;
                        width: 100px;
                        height: 100px;
                    }
                    #myImg1.fade-out
                    {
                        opacity:0;
                    }
                    #myImg1.fade-in
                    {
                        opacity:1;
                    }
                    #myImg2.fade-out
                    {
                        opacity:0;
                    }
                    #myImg2.fade-in
                    {
                        opacity:1;
                    }
                    .hide {display: none;}

                </style>
                <script type="text/javascript">
                    function fade1(btnElement) {
                        if (btnElement.value === "Fade Out") {
                            document.getElementById("myImg0").className = "fade-out";
                            document.getElementById("myImg2").className = "fade-out";
                            btnElement.value = "Fade In";
                        }
                        else {
                            document.getElementById("myImg1").className = "fade-in";
                            btnElement.value = "Fade Out";
                        }
                    }
                    function fade2(btnElement) {
                        if (btnElement.value === "Fade Out") {
                            document.getElementById("myImg0").className = "fade-out";
                            document.getElementById("myImg1").className = "fade-out";
                            btnElement.value = "Fade In";
                        }
                        else {
                            document.getElementById("myImg2").className = "fade-in";
                            btnElement.value = "Fade Out";
                        }
                    }
                </script>
            </head>
            <body>
                <input class="myBtn" type="button" value="Fade 1" onclick="fade1(myImg1);" />
                <input class="myBtn" type="button" value="Fade 2" onclick="fade2(myImg2);" />
                <div id="myImg0" ></div>
                <div id="myImg1" class="hide" ></div>
                <div id="myImg2" class="hide" ></div>

            </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:57:55.853

你可以像这样使用 jquery - [jsFiddle](http://jsfiddle.net/apaul34208/rcu95/3/)

```
$(document).ready(function () {
    $(".fade1").click(function () {
        $("#myImg1").fadeToggle();
        $("#myImg2").fadeOut();
    });
});
$(document).ready(function () {
    $(".fade2").click(function () {
        $("#myImg2").fadeToggle();
        $("#myImg1").fadeOut();
    });
}); 
```

# ruby-on-rails - 使用 ERB 模板生成 json 结构

> ID：15868290
> 
> 赞同：3
> 
> 时间：2013-04-07T21:53:07.977
> 
> 标签：ruby-on-rails, ruby, json, file, osx-mountain-lion

json1：

```
{
    "Name1" : "Value1",
    "Name2" : "<%= Value2 %>"
} 
```

Value2 正在调用一个读取 json2 并给出输出的方法。

`ERB.new(File.read("json1.json")).result`给我第二个 json 文件的输出，而不是 json1.

我不知道如何用第二个 json 的输出替换值 2。有没有办法可以将已经评估的 json 的值传递给 Value2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:41:13.313

这显示了您的问题：

```
ERB.new( "foo bar <%= ERB.new( 'baz' ).result  %>" ).result
=> "baz" 
```

这与 JSON 无关。这是因为 ERB 不会自动嵌套，这取决于模板的评估方式。它附加到一个名为 的变量`:_erbout`，不同的 ERB 对象将使用相同的变量。当您想按顺序构建结构时很好，但对于嵌套包含来说不是很好。

您可以通过告诉 ERB 在生成输出时使用不同的命名变量来解决您的问题：

```
ERB.new( "foo bar <%= ERB.new( 'baz', nil, nil, :_erbout2 ).result  %>", nil, nil, :_erbout1  ).result
=> "foo bar baz" 
```

代码开始看起来很难看，所以你可能想要抽象它（特别是如果你事先不知道嵌套有多深，所以你会想要生成变量名）

# jquery - sumtr 在格式化为货币的单元格上

> ID：15868291
> 
> 赞同：1
> 
> 时间：2013-04-07T21:53:11.577
> 
> 标签：jquery

我正在使用[sumtr](https://github.com/DLarsen/jquery-sumtr)来总结一列，但我希望能够从格式化为货币的列中计算总和。

```
$('#Cart').sumtr({
    readValue: function (e) { return Number(parseFloat(e.data('val'))
                             .replace(/[^0-9\.]+/g, "")); },
    formatValue: function (val) { return formatCurrency(val); }
}); 
```

如果我删除`readValue`上面的代码，那么代码就可以正常工作，它会总计一个没有货币符号的列；我正在使用该`formatCurrency()`方法来显示用货币符号格式化的总数。
但是，如果列（带有“sum”类）已经用货币格式化，则`sumtr`不适用于这些值。所以我试图让`readValue`函数去除除数字之外的任何内容，但没有返回任何内容。

这是 sumtr 正在处理的表的一部分

```
<tr>
    <td>Adrobupicator</td>
    <td class="currency">&#163;700.01</td>
    <td>1</td>
    <td class="sum currency">700.01</td>
</tr>
<tr>
    <td>A1 Product 2</td>
    <td class="currency">&#163;36.28</td>
    <td>1</td>
    <td class="sum currency">36.28</td>
</tr>
<tfoot>
    <tr class="summary">
        <td colspan="3">Cart Total</td>
        <td class="currency"></td>
    </tr>
</tfoot> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:29:49.410

如果您正在使用`e.data('val')`，这意味着您已经在 td 上设置了 soem 数据值，我认为您没有这样做？

所以你可以像这样解析 td html：

```
$('#myTable').sumtr({
    readValue : function(e) { return parseFloat(e.html().replace(/[^0-9\.]+/g, "")); },
    formatValue : function(val) { return '$' + val; },
}); 
```

或者，`e.data('val')`如果您已设置数据，则可以使用。那么你甚至不需要正则表达式。要么使用数据属性：

```
<tr>
    <td class="currency" data-val="700.01">&#163;700.01</td>
</tr> 
```

或使用 jQuery 显式设置数据：

```
$("#yourtd").data("val", 700.01); 
```

# c++ - 声明 d3ddevice 全局或传递到需要它的类？

> ID：15868293
> 
> 赞同：1
> 
> 时间：2013-04-07T21:53:17.147
> 
> 标签：c++, scope, directx-9

DirectX 9 / C++

您是否将 d3ddevice 声明为对您的整个应用程序/游戏全局，或者您是否传递到需要 d3ddevice 的类？

通常的方法是什么？

我理解（这可能是错误的），如果您全局声明它，所有类和函数都将被头内存所负担，该头内存在编译后在类中声明该全局变量？

我可以更具体地说明我的申请问题，但是，我只是在寻找典型的方式。

我知道如何启动 d3ddevice 等，这只是一个关于什么是最好的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:58:01.330

我建议您将所有内容包装在一个类中，并且永远不要将任何内容放在全局中，因为可以从任何地方访问全局变量，这使得跟踪变量以及谁在使用和不使用它变得非常困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-05T06:28:47.523

在这里聚会有点晚了，但我最近也偶然发现了同样的设计问题。让我有点惊讶的是，互联网上没有更多关于它的讨论。我什至尝试仔细阅读随机的 github 库，看看我是否可以收集其他人是如何做到的。没找到太多。我还有一个示例，说明您何时无法将 d3d 设备声明为全局/静态对象。对于我的游戏/引擎，我有一个 dll 作为我的引擎框架。这个 dll 被编辑器和游戏客户端（人们用来玩我的游戏）使用。这允许两个事物（以及未来的其他应用程序，如果需要）访问所有世界对象、数学代码、集合等。

使用那个系统，我想不出一种方法来使 Device 对象静态化，并且仍然在编辑器和客户端中使用它。如果这只是一个游戏客户端，或者只是一个编辑器，那当然是可能的。相反，我几乎决定硬着头皮将 Device 传递给任何需要它的地方。一个例子是在运行时生成顶点的类。我需要一个指向 Device 的指针来重建类。

我真的只是想把这个贴在这里，因为我整天都在想它，而且这似乎是处理它的最佳方式。是的，必须将设备传递给几乎所有东西，这很糟糕。但是你真的无能为力。

# twig - 在 Twig 函数中使用变量

> ID：15868295
> 
> 赞同：1
> 
> 时间：2013-04-07T21:53:24.300
> 
> 标签：twig

我只是无法让它工作：

它应该根据 var_1 的 URL 查询字符串值设置 var_2

问题是我用 {{var_1}} 调用 var_1

我尝试了各种其他方法，但都抛出了不同的错误。

```
// var_3 set elsewhere

{% set var_1 %}test-{{var_3}}{% endset %}

{% set var_2 = app.request.get({{var_1}}) %}

// need var_2 set for rest of script 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T06:27:15.663

您不能`{{ ... }}`在 twig 标签 ( ) 内使用另一个标签 ( `{% ... %}`)。所以这是行不通的：

```
{% set var_2 = app.request.get({{var_1}}) %} 
```

一个解决方案是将变量放在函数参数中：

```
{% set var_2 = app.request.get(var_1) %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:57:06.490

您不需要（并且通常不能）在树枝逻辑中使用 {{ }} 。{{ }} 用于向响应输出一些内容。要在行中使用变量，只需命名变量。还要记住~会加入字符串，但有些人出于某种原因不喜欢使用它！

```
{% set var_1 = 'test-' ~ var_3 %}
{% set var_2 = app.request.get(var_1) %} 
```

# qt - Qt 控制台应用程序 - 终端不会保持打开 [在 Ubuntu 中]

> ID：15868296
> 
> 赞同：2
> 
> 时间：2013-04-07T21:53:26.910
> 
> 标签：qt, qt-creator, qdebug

我最近开始使用 Qt 进行开发，但我遇到了控制台项目的问题。当我运行我的程序（控制台程序）时，终端打开然后立即关闭，所以我看不到输出。

这是我正在使用的代码：

```
#include <QtCore/QCoreApplication>
#include <QDebug>
#include <iostream>

int main(int argc, char *argv[])
{
   QCoreApplication a(argc, argv);

qDebug() << "In the stream";

return a.exec();
} 
```

我查看了我的项目的 .pro 文件，它似乎设置正确（它被配置为使用带有 CONFIG += 控制台的控制台）。我不确定为什么终端窗口不会保持打开状态。我试过添加`system("PAUSE)`

但是，这不起作用。我正在使用 Ubuntu 和默认的 Qt Creator 设置。

当我运行项目时，我使用默认的运行按钮，但我也尝试了调试按钮。终端窗口仍然只是闪烁打开，然后在我看到输出之前关闭。按钮上的应用程序输出窗格只是说它正在启动应用程序。这是我的终端设置在 QtCreator 中的样子：（`x-terminal-emulator -e`这是默认设置）

我的 QtCreator 版本是 2.4.1

有人可以告诉我如何保持控制台/终端打开以便我可以看到`qdebug()`输出吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:33:59.680

1.  安装 xterm ( `sudo apt-get install xterm`)
2.  转到项目的运行设置并检查“在终端中运行”

现在您的控制台应用程序将使用 xterm 来显示自己，但它将无法调试。另一种查看控制台输出的安全方法是打开“应用程序输出”( `Alt+3`)。虽然它不能被关闭`Ctrl+c`（你必须在 QtCreator 中使用“停止”按钮）。

# javascript - 无限日期滚动 - WebSql JavaScript

> ID：15868297
> 
> 赞同：0
> 
> 时间：2013-04-07T21:53:34.567
> 
> 标签：javascript, sql, database, date, web-sql

是否有用于无限日期滚动的内置方法？

我正在制作一个数据库程序，重点是显示在特定日期添加的数据。当然，我不能永远这样做：

```
SELECT * FROM TABLE WHERE date >="2013-04-01" AND date <"2013-05-01 
```

另外，每月的天数每年都在变化。你们知道我应该如何实现我的代码以适应日期吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:34:57.457

不确定无限滚动是什么意思，但如果您基于日期范围显示数据，只需将日期参数从 UI 传递给查询。如果您一次显示 1 个月的数据，那么用户可以使用“上一个”/“下一个”按钮来“滚动”时间。或者你可以让他们选择任意两个日期，看看他们需要查看的范围。

# xml - 匹配 XSL 中的子元素

> ID：15868300
> 
> 赞同：9
> 
> 时间：2013-04-07T21:54:00.333
> 
> 标签：xml, xslt, xpath

[我以为我在这个问题](https://stackoverflow.com/questions/4478045/what-are-the-difference-between-call-template-and-apply-templates-in-xsl/15820821#15820821)的答案中看到了错误，并指出了这一点。有人告诉我我错了，我的答案后来被删除了。

我仍然不明白我是怎么错的。因此，我在这里发帖，希望有人能向我解释我的误解。

我回复的答案解释了应用模板的使用。它包含以下 XML 和 XSL，描述了如何匹配模板：

```
<!-- sample XML snippet -->
<xml>
  <foo /><bar /><baz />
</xml>

<!-- sample XSLT snippet -->
<xsl:template match="xml">
  <xsl:apply-templates select="*" /> <!-- three nodes selected here -->
</xsl:template>

<xsl:template match="foo"> <!-- will be called once -->
  <xsl:text>foo element encountered</xsl:text>
</xsl:template>

<xsl:template match="xml/*"> <!-- will be called twice -->
  <xsl:text>other element countered</xsl:text>
</xsl:template> 
```

我的评论是最后一个模板应该是：

```
<xsl:template match="*"> <!-- will be called twice -->
  <xsl:text>other element countered</xsl:text>
</xsl:template> 
```

因为当前节点已经`<xml>`

有人告诉我：

> 不，xml/* 是一个匹配名为 xml 的元素的子元素的模式。

**测试原始答案**

但是，使用此 XML：

```
<xml>
  <foo /><bar /><baz />
</xml> 
```

还有这个 XSL 样式表（填写上面的代码片段）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>

<xsl:template match="xml">
  <xsl:apply-templates select="*" /> <!-- three nodes selected here -->
</xsl:template>

<xsl:template match="foo"> <!-- will be called once -->
  <xsl:text>foo element encountered.&#xa;</xsl:text>
</xsl:template>

<xsl:template match="xml/*"> <!-- will be called twice -->
  <xsl:text>other element countered.&#xa;</xsl:text>
</xsl:template>

</xsl:stylesheet> 
```

我得到：

```
other element countered.
other element countered.
other element countered. 
```

**测试我的“更正”版本**

If I replace the last template with:

```
<xsl:template match="*"> <!-- will be called twice -->
  <xsl:text>other element countered.&#xa;</xsl:text>
</xsl:template> 
```

as per my answer I get:

```
foo element encountered.
other element countered.
other element countered. 
```

which would appear to be correct.

I hope my question doesn't break any guidelines, but I can't see that I'm wrong and am hoping someone can explain it more fully.

PS. I'm afraid my original response on the other question was posted as an answer, not a comment, as I don't have enough points to post comments yet. I wasn't sure what the best thing was to do...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T22:10:28.080

This is correct, according to the [rules on the default priority of templates](http://www.w3.org/TR/xslt#conflict). A template matching `foo` has default priority 0, one matching `*` has default priority -0.5, but one matching `xml/*` has default priority 0.5\. The `xml/*` template is considered more specific than the `foo` one, so it wins when either could match.

So you were right that the template's match expression needed to be `*` rather than `xml/*`, but not for the right reason - an `xml/*` template *can* match for an `apply-templates select="*"` when the current node is `xml`, and it will apply to any of those selected elements (since they are all children of `xml`) except where there is another template with an explicit `priority` greater than 0.5 that can take precedence.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T22:34:53.303

I was the person who said you were incorrect in the other thread, and after looking at the matter more closely, I can see that you were correct in pointing out that Tomalak made a mistake, but not for the reasons you gave (if I'm understanding your comment correctly). `match="xml/*"` *does* match child nodes of the `<xml>` element, whether or not the current context was the `<xml>` node when `apply-templates` was called. In a `match=""` expression, the "current node" is the node on which templates are being applied, not the context where `apply-templates` was invoked, so in this template the current node would be `foo`, `bar`, and `baz`. You can observe from your own experimentation above that `xml/*` does succeed in matching child elements of `xml`, but in fact matches them *more than Tomalak says it will*.

The problem with `match="xml/*"` is that it's *too specific* and has the opposite effect of what I think Tomalak intended. It seems he meant for this to be a catch-all for children of `xml` that were not matched otherwise, but as Ian Roberts explains, this template winds up with a *higher* priority than the `foo` template, and catches all of the children of the `xml` node.

I know it's frustrating right now not being able to write comments of your own, but soon enough you will. And it is acceptable to create your own new question to ask a question about another thread. You just shouldn't create answers to comment on other answers.

# c - 试图在 C 中将结构的指针设置为 NULL，但遇到 valgrind 问题

> ID：15868311
> 
> 赞同：0
> 
> 时间：2013-04-07T21:54:28.043
> 
> 标签：c, data-structures, nullpointerexception

我一直在尝试在 C 中设置指向数据结构的一部分的指针，但是 valgrind 给了我一个错误。我认识到这个错误是我试图将非指针变为 NULL 指针的错误，但这不是这里发生的事情。怎么了？

```
struct node {
    int data;
    struct node *before;
    struct node *after;
};

struct deque {
    struct node *front;
    struct node *rear;
};

int createD (Deque *d)
{
    printf ("Y\n");
    (*d) = malloc(100*sizeof(struct deque));
    (*d)->front=NULL;
    (*d)->rear=NULL;
    return 0;
}

int remD (Deque *d, char **s)
    {
    struct node *temp;
    temp=malloc(100*sizeof(struct node));
    int data;
    if (isEmptyD(d)==0)
    {
        printf ("Why?");
        return 1;
    }
    else
    {
        temp = (*d)->front;
        data = temp->data;
        (*d)->front=temp->after;
        (*d)->front->before=NULL;
        if((*d)->front==NULL)
        {
            (*d)->rear=NULL;
        }
        (*s)=malloc(100);
        (**s)=data;
        free(temp);
    }
    return 0;
}

==30983== Invalid write of size 8
==30983==    at 0x4010B5: remD (Deque.c:101)
==30983==    by 0x400C98: assign (Merge13.c:134)
==30983==    by 0x400BFB: mergesort (Merge13.c:113)
==30983==    by 0x400B03: queues (Merge13.c:64)
==30983==    by 0x400995: main (Merge13.c:26)
==30983==  Address 0x8 is not stack'd, malloc'd or (recently) free'd
==30983== 
==30983== 
==30983== Process terminating with default action of signal 11 (SIGSEGV) 
```

（valgrind 错误与 (*d)->front->before=NULL; in remD() 中的行有关）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:04:26.743

`temp->after`在你使用它之前没有设置任何有用的东西。所以`temp->after->before`取消引用垃圾。

使用前先初始化`*temp`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T22:04:16.883

你期望`temp->after`不是`NULL`，因为后面的行（valgrind 抱怨的行），你`->front`为它分配了一些东西。您确定它永远不会为 NULL，但始终是有效值吗？

# c++ - 为什么你不能对 C 中的指针进行按位运算，有没有办法解决这个问题？

> ID：15868313
> 
> 赞同：21
> 
> 时间：2013-04-07T21:54:36.897
> 
> 标签：c++, c, pointers, bit-manipulation

我读到您不能对指针进行位掩码，为什么不能对指针进行按位运算？

有什么方法可以达到同样的效果吗？

这同样适用于 C++ 吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-07T21:58:12.980

您不能执行按位指针操作的原因是因为标准说您不能。我想标准之所以这么说是因为按位指针操作几乎普遍会导致未定义或（充其量）实现定义的行为。因此，与加法等更简单的操作不同，您将无法做任何既有*用又可**移植的事情。*

但是你可以通过强制转换来解决它：

```
#include <stdint.h>

void *ptr1;
// Find page start
void *ptr2 = (void *) ((uintptr_t) ptr1 & ~(uintptr_t) 0xfff) 
```

至于 C++，只需使用`reinterpret_cast`而不是 C 风格的演员表。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-07T21:58:01.433

这是不允许的，因为语义没有很好地定义。不过，您当然可以做到。只需转换为`uintptr_t`，执行操作，然后转换回指针类型。这也适用于 C++。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-07T21:59:04.873

您不能在指针上使用按位运算符，因为标准对指针的表示方式以及任何特定指针可以处理的值范围的要求很少。所以没有定义在指针上使用这些运算符意味着什么。

尽管如此，大多数机器上的大多数编译器都使用内存地址的明显映射作为指针的值。其中大多数将让您将指针转换为整数类型。然后，您可以对值进行按位运算，甚至将其转换回指针。但这通常不是严格可移植的或定义明确的。

# java - 带有 servlet 的 UTF-8 响应

> ID：15868314
> 
> 赞同：2
> 
> 时间：2013-04-07T21:54:42.133
> 
> 标签：java, servlets, utf-8

我正在从 Servlet 中的 Perl 页面读取 HTTP 响应，如下所示：

```
public String getHTML(String urlToRead) {
        URL url;
        HttpURLConnection conn;
        BufferedReader rd;
        String line;
        String result = "";
        try {
           url = new URL(urlToRead);
           conn = (HttpURLConnection) url.openConnection();
           conn.setRequestMethod("GET");
           conn.setRequestProperty("Accept-Charset", "UTF-8");
           conn.setRequestProperty("Content-Type", "text/xml; charset=UTF-8");

           rd = new BufferedReader(new InputStreamReader(conn.getInputStream(), "UTF-8"));
           while ((line = rd.readLine()) != null) {
              byte [] b = line.getBytes();
              result += new String(b, "UTF-8");
           }
           rd.close();
        } catch (Exception e) {
           e.printStackTrace();
        }
        return result;
   } 
```

我用这段代码显示这个结果：

```
response.setContentType("text/plain; charset=UTF-8");

        PrintWriter out = new PrintWriter(new OutputStreamWriter(response.getOutputStream(), "UTF-8"), true);

        try {

            String query = request.getParameter("query");
            String type = request.getParameter("type");

            String res = getHTML(url);
            out.write(res);

        } finally {            
            out.close();
        } 
```

但是响应仍然没有编码为 UTF-8。我究竟做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T22:34:41.723

那个电话`line.getBytes()`看起来很可疑。`line.getBytes("UTF-8")`如果您确定返回的内容是 UTF-8 编码的，您可能应该这样做。此外，我不确定为什么它甚至是必要的。从 a 中获取数据的典型方法`BufferedReader`是使用 a`StringBuilder`继续将每个`String`检索`readLine`到的数据附加到结果中。`String`和之间的来回转换`byte[]`是不必要的。

更改`result`为 a`StringBuilder`并执行以下操作：

```
while ((line = rd.readLine()) != null) {
    result.append(line);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T22:43:42.943

这是您打破字符编码转换链的地方：

```
 while ((line = rd.readLine()) != null) {
          byte [] b = line.getBytes();  // NOT UTF-8
          result += new String(b, "UTF-8");
       } 
```

来自 String#getBytes() javadoc：

> 使用平台的默认字符集将此字符串编码为字节序列，并将结果存储到新的字节数组中

而且，默认字符集可能不是 UTF-8。

但是为什么首先要进行所有转换？只需从源读取原始字节并将原始字节写入消费者。它应该一直是UTF-8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-04T14:26:01.283

我在另一种情况下也遇到了同样的问题，但只要去做，我相信它会起作用：

```
byte[] b = line.getBytes(UTF8_CHARSET); 
```

在while循环中：

```
while ((line = rd.readLine()) != null) {
          byte [] b = line.getBytes();  // NOT UTF-8
          result += new String(b, "UTF-8");
       } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-07T17:56:07.087

就我而言，我确实添加**了另一个配置**。

以前，我是这样写页面的：

```
try (PrintStream printStream = new PrintStream(response.getOutputStream()) {
        printStream.print(pageInjecting);
} 
```

我改为：

```
try (PrintStream printStream = new PrintStream(response.getOutputStream(), false, "UTF-8")) {
        printStream.print(pageInjecting);
} 
```

# html - Safari 上的奇怪行为 CSS 3D 转换

> ID：15868316
> 
> 赞同：-1
> 
> 时间：2013-04-07T21:54:49.723
> 
> 标签：html, css, safari

我正在编写一个简单的 jQuery 页面，其中显示了两个图像。单击其中一个会触发 CSS3 转换，这应该会结束对图像的缩放。

该页面必须在 iPad 上查看，因此我必须使用 CSS3 3D Transformation 才能使用硬件加速并保持过渡流畅。

我在这里写了一个简单的演示脚本：http: [//jsfiddle.net/andrearota/KAdmV/4/](http://jsfiddle.net/andrearota/KAdmV/4/)

例如，这是我使用比例因子放大的方式。请注意，我使用 z 属性试图让 div 超过封闭的：

```
Carousel.prototype.openLeft = function (callback) {
    var that = this;
    if (this.leftStatus != 'open') {
      this.left.transition({
          z: '+=100',
          scale: 2 
        }, function () {
          that.leftStatus = 'open';
          if (callback) callback();
        });
    } else {
        if (callback) callback();
    }
}; 
```

如您所见，如果单击左侧图像，则图像会放大并越过右侧图像。当您单击右侧时，反之亦然。但是，如果您再次单击左侧，您会看到图像堆叠问题，因为左侧缩放的图像位于最小化的右侧图像下方。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:14:40.023

看起来您可以删除第二个图像上的变换，它会回到第一个图像后面。因此，换句话说，在单击图像时，我可能会先删除所有出现的变换属性，然后再将其应用于单击的图像。

Or you could also set both images to position:relative and then on click set the z-index to something like 5 and set all other images to something below it such as 3\. But again, you'll need to clear these inline styles so that when another image is clicked there are remnants from before that give you un-clear results.

# xcode - 类似 Android 的 XCode 资源处理

> ID：15868320
> 
> 赞同：3
> 
> 时间：2013-04-07T21:55:06.323
> 
> 标签：xcode, resources, android-resources

Android 通过生成 R 文件有一种非常优雅的资源处理方式。在 XCode 中，此选项不可用，字符串用于处理图像和其他资源。这是有问题的，因为没有编译时检查资源的可用性。

由于我真的需要它，我为视网膜图像编写了一个小脚本，并为它添加了一个构建阶段。

```
#!/bin/bash

# Create a header file for the retina images
workingdir=`dirname $0`
output_file="$workingdir/Resources.h"

cat > $output_file << EOH

//
//  Resources.h
//  `date`
EOH

for i in `find $workingdir -name "*@2x.*"`; do
    file=`basename $i`;
    resource_name=${file%%@*};
    def_name=${resource_name//-/_}
cat >> $output_file << EOD
// $i
#define R_${def_name} @"$resource_name"

EOD
done 
```

是否有一个完善的工具可以做到这一点？还是每个人都只依赖字符串？

# c# - C# 在数组中查找匹配项

> ID：15868326
> 
> 赞同：1
> 
> 时间：2013-04-07T21:56:10.003
> 
> 标签：c#

我试图查看我的数组中是否存在某个元素。我有一个函数可以将元素添加到我的数组中，如果元素存在则返回 true 的搜索函数。我不断收到未将对象引用设置为对象错误的实例。

我有一个领域：

```
int [] Items; 
```

这是搜索功能：

```
public bool Search(int item)
{

    bool isInArray = false;
    for (int i = 0; i < Items.Length; i++) // ERROR HERE
    {
        if (Items[i] == item)
        {
            isInArray = true;
            break;
        }

    }
    return isInArray;

} 
```

这是添加功能：

```
public void Add(int item)
{

    if (Items == null)
    {
        Items = new int[1];
    }
    else
    {
        Array.Resize<int>(ref Items, Items.Length + 1);
    }
    Items[Items.Length - 1] = item;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:59:09.343

只要您不添加至少一个，您的 Items 就为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T22:02:50.187

改变

```
for (int i = 0; i < Items.Length; i++) 
```

到

```
for (int i = 0; i < (Items?? (Items = new int[0])).Length; i++) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T22:03:20.330

在执行循环之前检查 null：

```
public bool Search(int item)
{
    bool isInArray = false;
    if (Items != null)
    {
        for (int i = 0; i < Items.Length; i++) // ERROR HERE
        {
            if (Items[i] == item)
            {
                isInArray = true;
                break;
            }
        }
    }
    return isInArray;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T22:04:41.867

`Items`需要初始化，例如在构造函数中。例如 Items = new int[10]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T22:38:34.763

```
public bool Search(int item)
{
    return Array.IndexOf(Items, item) > 0 ? true : false;
} 
```

也许这会奏效。

# android - Android 在应用程序未运行时接收屏幕关闭/打开事件

> ID：15868329
> 
> 赞同：0
> 
> 时间：2013-04-07T21:56:21.313
> 
> 标签：android, events, broadcastreceiver

我已经在我的应用程序的 oncreate 方法中注册了 Intent.action_screen_off/on，并且我可以在我的应用程序运行时接收事件。但是当我的应用程序退出时，我得到了一个广播意图泄漏异常（在我的脑海中，我认为这就是它的名字，无论哪种方式，它都是由于在我的应用程序退出时没有取消注册我的接收器引起的）

当我的应用程序未运行时，如何接收这些事件？我不想使用服务或类似的东西，我见过其他应用程序在没有服务或后台进程的情况下这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:16:24.560

> 我见过其他应用程序在没有服务或后台进程的情况下执行此操作。

那是不可能的。`BroadcastReceiver`除了在运行代码中注册之外，唯一的方法是`AndroidManifest.xml`在相关的`<intent-filter>`. `Intent.ACTION_SCREEN_OFF`由于对于或都无法做到这一点`Intent.ACTION_SCREEN_ON`，因此您看到的应用程序必须有一些正在运行的组件才能接收广播。

简而言之，使用`Service`- 我不太清楚你为什么说你不想这样做。

# java - 需要有关实施主要飞行显示的指导

> ID：15868333
> 
> 赞同：2
> 
> 时间：2013-04-07T21:56:49.113
> 
> 标签：java, objective-c, opengl, graphics, quartz-graphics

我是一名熟悉 Ada、C、Obj.C (iOS) 和 C# 的开发人员。我想创建一个应用程序来显示有关我正在构建的机器人的一些数据。但是，我以前从未使用 Mac 库或 OpenGL 做过图形。

我想要实现的目标如下图所示。我已经测试了处理来创建一些东西。但是它太复杂了，对于这种应用程序来说，处理功能远非强大。如果不编写一些讨厌的代码，它甚至无法围绕其中心旋转一条线。

**要求**：
绘图功能（例如相对于时间绘制的电压）、Google 地图 API、渐变、2D 动画、蒙版。

**问题**：

1.  我应该学习什么？这是否可以仅使用 Mac 库/框架来实现，还是应该使用 OpenGL？
2.  最好用 Obj c 来做吗？还是java值得学习？带有这样的图形的 Java 有多好？这件事是，如果我使用 Obj C 进行编程，那么它就不是跨平台的。
3.  你还有什么其他的建议吗？

稍后，我想添加一个谷歌地图来显示飞机的位置。所有数据都通过 Wifi 传输。10赫兹。

![在此处输入图像描述](https://i.stack.imgur.com/2UQVX.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:28:13.433

这是有人用 opengl 和 js 做的一个线程：[http ://www.jpct.net/forum2/index.php?topic=3076.0](http://www.jpct.net/forum2/index.php?topic=3076.0)

1.  是的，您可以在 opengl 中执行此操作，但您可以考虑使用 2d 渲染的 Cairo，可能更简单。这当然取决于您是否需要 3d 渲染。在 3d 渲染的情况下，OpenGL 可能是一个更好的选择，然后尝试将其融入 Cairo 系统。

2.  如果你希望它是跨平台的，我个人会用 Java 或 Python 来做，但大多数语言都有 opengl 和 cairo 绑定。如果是 java 我建议尝试 LWJGL。

3.  您还需要考虑使用什么 UI 框架，因为您可能需要按钮和所有的爵士乐。我个人喜欢 Qt，但 WPF 也相当不错。

在这里查看开罗文档：[http ://cairographics.org/documentation/](http://cairographics.org/documentation/)

此外，这里提出了这个问题，评论线程中有更多建议：[http ://www.gamedev.net/topic/479476-how-would-you-program-a-pfd-primary-flight-display/](http://www.gamedev.net/topic/479476-how-would-you-program-a-pfd-primary-flight-display/)

我不确定 cairo 的动画有多棒，但这里有一个教程证明：[http ://cairographics.org/threaded_animation_with_cairo/](http://cairographics.org/threaded_animation_with_cairo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T22:59:26.330

I dont think that some specific library will accomplish all the requirements. Probably you will need to use a mix of them.

If you ask me, Id go for a combination of web ui frameworks. Based on the image you have shared, im sure that most of that graphical components can be constructed using ExtJs framework (see these examples: [http://www.sencha.com/products/extjs/examples/](http://www.sencha.com/products/extjs/examples/), [http://docs.sencha.com/ext-js/4-2/extjs-build/examples/charts/Gauge.html](http://docs.sencha.com/ext-js/4-2/extjs-build/examples/charts/Gauge.html), [http://docs.sencha.com/ext-js/4-2/extjs-build/examples/sandbox/sandbox.html](http://docs.sencha.com/ext-js/4-2/extjs-build/examples/sandbox/sandbox.html)). For the central panel, maybe there is no library that provides a generic widget like that, and so I would go for a custom HTML5 Canvas implementation ([http://en.wikipedia.org/wiki/Canvas_element](http://en.wikipedia.org/wiki/Canvas_element)).

Just want to add that I woudl go for the web way simply because:

*   Community is BIG for almost any library
*   Cross platform issues would not be a problem
*   大多数 Web UI 框架都是成熟的，并且有开箱即用的小部件可供使用。
*   使用网络与外部 API（如您提到的 Google 地图）进行通信是小菜一碟。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-07T22:42:44.990

Ah, this is personal experience I've had while I built my final year engineering project(which was incidentally a robot that could fly) - And I've built something like this before.

I used Java for graphing and telemetry data tool with flight display system like that(and it was sufficient).

But if you are good with a programming language, then you can do it in any language of your choice. Yes, Mac + OpenGL + ObjC is good combination too. My aim was to keep the code as portable as possible.

# python - python从数组中选择一个对象

> ID：15868339
> 
> 赞同：0
> 
> 时间：2013-04-07T21:57:35.707
> 
> 标签：python, arrays, find, highlighting

我有一个脚本，它返回 gtk textview 对象中字符串的开始/结束位置。我觉得我一遍又一遍地做同样的事情。第一个搜索函数返回每个匹配位置的开始、结束。第二个我希望搜索并突出显示数组给出的文本视图中的每个对象。searchn() 我注意到我可以更改数组选择并选择第二个到最后一个或我选择的任何内容。

有没有一种方法可以每次单击数组中的每个对象一次选择一个，这样它将按顺序突出显示数组中的一个对象。

所以如果我有四个字

工作工作工作工作

然后我可以突出显示第一个，然后我再次单击它会重新运行该功能并突出显示第二个然后第三个，当它全部完成后，我可以让它回到开头。我在想有点像。for range in len(z): 这样做，但无论我在 for 循环中做什么，它都会选择最后一步的最后一步。我希望这是有道理的。

```
def search(x):
search_required = False
sbuffer.remove_tag_by_name('found', sbuffer.get_start_iter(), sbuffer.get_end_iter())
    find_text = findentry.get_text()
    if find_text:
  text = sbuffer.get_text(sbuffer.get_start_iter(),sbuffer.get_end_iter()).decode('utf8')
      search_matches = [(match.start(), match.end()) for match in re.finditer(re.escape(find_text), text, re.IGNORECASE)]
      if len(search_matches) < 1000:
    for start,end in search_matches:
      iter1 = sbuffer.get_iter_at_offset(start)
      iter2 = sbuffer.get_iter_at_offset(end)
      sbuffer.select_range(iter1, iter2)
      sbuffer.apply_tag_by_name('found', iter1, iter2)
    textview.scroll_to_mark(sbuffer.get_mark('insert'), 0.25)
    print search_matches
    return search_matches
else:
  search_matches = [ ]    

  def searchn(x):
search(x)
z=search(x)
#def SN(z)
print len(z)
z=z[:1]# need to have this do to 2nd,3rd,4th,5th ect till there are no more matches.
for a,l in z:
  print a,"start of this match"
  print l, "end of this match"
  iter1 = sbuffer.get_iter_at_offset(a)
  iter2 = sbuffer.get_iter_at_offset(l)
  sbuffer.select_range(iter1,iter2)
  print z
return z 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:20:44.770

你为什么不使用正则表达式来查找你正在寻找的单词的实例，然后一旦你有了所有的索引就进行循环。

例子：

```
import re
sentence = "You are my favorite. Are you my friend? Are you an elephant?"
items = []
for item in re.finditer("[Aa]re", sentence, ):
    items.append(item.start()) 
```

这应该为您提供单词所在的位置。一旦你有了这些，你应该能够以任何你喜欢的方式快速轻松地穿过这些位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:16:09.823

you know the idea did come to me in a dream a couple of nights ago. I just kept messing it up...:P here is is working. and Thank you JazzyWhite! Python search function forward and backward. I hope it helps anyone that would want to make something like this. For anyone else looking Base is my main class and sbuffer is textview.get_buffer() and yes I am using gtk.

```
 searchmatchp=None
  searchmatchf=None
  def search(x):
sbuffer.remove_tag_by_name('found', sbuffer.get_start_iter(), sbuffer.get_end_iter())
    find_text = findentry.get_text()
    if find_text:
  text = sbuffer.get_text(sbuffer.get_start_iter(),sbuffer.get_end_iter()).decode('utf8')
      search_matches = [(match.start(), match.end()) for match in re.finditer(re.escape(find_text), text, re.IGNORECASE)]
      if len(search_matches) < 1000:
    for start,end in search_matches:
      iter1 = sbuffer.get_iter_at_offset(start)
      iter2 = sbuffer.get_iter_at_offset(end)
      sbuffer.select_range(iter1, iter2)
      sbuffer.apply_tag_by_name('found', iter1, iter2)
    textview.scroll_to_mark(sbuffer.get_mark('insert'), 0.25)
    Base.searchmatchp=search_matches
    Base.searchmatchf=search_matches
    #return search_matches
else:
  search_matches = [ ]    

  def searchn(self):
print Base.searchmatchf
for a,l in Base.searchmatchf[:1]:
  iter1 = sbuffer.get_iter_at_offset(a)
  iter2 = sbuffer.get_iter_at_offset(l)
  sbuffer.select_range(iter1,iter2)
  textview.scroll_to_mark(sbuffer.get_mark('insert'), 0.25)
del Base.searchmatchf[:1]  
if Base.searchmatchf ==[]:
  search(self)

  def searchp(self):
print Base.searchmatchp
del Base.searchmatchp[-1:] 
print Base.searchmatchp[-1:]
for a,l in Base.searchmatchp[-2:]:
  iter1 = sbuffer.get_iter_at_offset(a)
  iter2 = sbuffer.get_iter_at_offset(l)
  sbuffer.select_range(iter1,iter2)
  textview.scroll_to_mark(sbuffer.get_mark('insert'), 0.25)
if Base.searchmatchp ==[]:
  search(self) 
```

# node.js - 如何使用graphicmagick在nodejs中流式传输响应

> ID：15868342
> 
> 赞同：3
> 
> 时间：2013-04-07T21:57:49.463
> 
> 标签：node.js, express

我很难使用graphicmagic从nodejs返回图像。浏览器挂在流上。

我已经引用[了 NodeJS gm resize and pipe to response](https://stackoverflow.com/questions/12468471/nodejs-gm-resize-and-pipe-to-response)，但我仍然无法使其工作。

```
gm = require('gm');

app.get('/text', function (req, res)
{
    gm(200, 400, "#ddff99f3")
    .drawText(10, 50, "from scratch")
    .stream('png', function (err, stdout, stderr) {
      stdout.pipe(res);
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T22:36:27.083

看起来您没有设置适当的内容类型：

```
res.set('Content-Type', 'image/png'); // set the header here 
```

在调用**之前**执行此操作`gm.drawText`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T22:38:11.577

所以......呃，我刚刚重新启动了我的机器，它神奇地工作了。

# ios - iOS：移除位于 UITableView 之上的 UIView 会导致无法与表格交互

> ID：15868343
> 
> 赞同：0
> 
> 时间：2013-04-07T21:57:49.627
> 
> 标签：ios, uitableview, uiview, popup

我有一个带有一堆行的 UITableView。当用户点击某一行时，表格顶部会出现一个自定义弹出窗口（即自定义 UIView）：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    PopUp *myPopUp = [[PopUp alloc] initWithFrame:CGRectMake(0, 0, 320, 568)];
    [self.view addSubview:myPopUp];
} 
```

我正在从笔尖加载我的自定义 UIView PopUp：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self loadNib];
    }
    return self;
}

- (void) loadNib
{
    NSArray *subviewArray = [[NSBundle mainBundle] loadNibNamed:@"PopUp" owner:self options:nil];
    UIView *mainView = [subviewArray objectAtIndex:0];
    [self addSubview:mainView];
} 
```

在 PopUp 中，按下时有一个按钮会导致 PopUp 关闭：

```
- (IBAction)closePopUp:(id)sender
{
    [self removeFromSuperview];
} 
```

按下按钮时弹出窗口消失。但是，下面的 UITableView 不能再进行交互（即用户不能滚动表格，不能点击另一行等）。我希望 PopUp 消失并让表格再次完全交互。谁能解释为什么会发生这种情况以及我如何解决这个问题？谢谢！

* * *

**用截图编辑**

1.  UITableView with a row of data: [http://imgur.com/PlIufHI,xGKxUul,qkt27oZ#0](http://imgur.com/PlIufHI,xGKxUul,qkt27oZ#0)

2.  When a row is selected, myPopUp appears on top: [http://imgur.com/PlIufHI,xGKxUul,qkt27oZ#1](http://imgur.com/PlIufHI,xGKxUul,qkt27oZ#1)

3.  When the "x" custom button is pressed, it calls closePopUp, which removes myPopUp from the superview: [http://imgur.com/PlIufHI,xGKxUul,qkt27oZ#2](http://imgur.com/PlIufHI,xGKxUul,qkt27oZ#2)

4.  User is unable to interact with the table now. User cannot select a row, scroll through the table, etc.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:58:04.243

I don't know what's going on in your specific case, but I can tell you that adding subviews to a `UITableView` may lead to unexpected behavior like this and it's generally a bad idea.

In order to fix what's happening and get a cleaner structure, I would suggest you to add the popup view to the window, rather than to the table view.

```
[self.view.window addSubview:myPopUp]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T23:17:23.960

You are actually removing the view that you loaded from the nib file, but the parent is another blank UIView that is capturing every touch within the `(0, 0, 320, 568)` rect.

Try removing the superview from the `closePopUp` method:

```
[self.superview removeFromSuperview]; 
```

# firefox - Bootstrap 在 Firefox 浏览器中不起作用

> ID：15868345
> 
> 赞同：3
> 
> 时间：2013-04-07T21:57:54.173
> 
> 标签：firefox, twitter-bootstrap

我制作了一个 Bootstrap 表单，但它在 Firefox 中显示不正确......所有其他浏览器似乎都可以工作。我什么都试过了！

这是链接：[http ://www.redmandesign.ie/bootstrap/form1.html](http://www.redmandesign.ie/bootstrap/form1.html)

我认为它与引导样式表有关，但我不确定。

谁能帮忙，我真的卡住了！！！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-07T22:02:35.933

```
<link href="css\bootstrap.css" rel="stylesheet">
<link href="css\bootstrap-responsive.css" rel="stylesheet"> 
```

应改为：

```
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet"> 
```

说明：Firefox 正在发送对名为 css\bootstrap.css 的文件的请求，而不是在 css 文件夹中请求 bootstrap.css，该文件夹不存在并且服务器回复 404 错误。您不只是喜欢斜线类型之间的细微差别吗？:P

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-01T03:28:31.243

在 firefox 中，当您检查此链接 [https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css](https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css)时。它表明此连接不受信任。接受它并从浏览器处理它。现在运行引导文件，它应该可以工作。

# java - 从数组创建链接数据结构

> ID：15868347
> 
> 赞同：1
> 
> 时间：2013-04-07T21:57:59.213
> 
> 标签：java, linked-list

我是链接数据结构的新手，想知道如何在给定二维数组中的 2 个点并且在点之间没有确定权重时创建无向图。我四处寻找，并没有真正找到我要找的东西。

**例子：**

```
int[][] points = { { 0, 1 },{ 0, 2 },{ 1, 2 },{ 1, 3 },{ 3, 4 } }; 
```

画出来应该是这个样子。

```
 0
      |
    -------
    |     |
    1-----2
    |
    3-----4 
```

**编辑**

我还希望能够找到从 0 到 4 的最短路径，并至少遍历每个点一次，同时计算沿途的每一步。您有可能不得不向后移动。在上面的例子中，从 0 到 4 的最短路径是 (0-2)(2-1)(1-3)(3-4) 并且计为 4 步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T22:07:34.417

有两种基本的方式来表示图。

邻接矩阵和邻接列表。您可以在 wikiepdia 中阅读有关邻接矩阵的信息：[http ://en.wikipedia.org/wiki/Adjacency_matrix](http://en.wikipedia.org/wiki/Adjacency_matrix)

要实现邻接列表，您为每个节点创建一个列表，并将各个节点连接到的所有节点放入列表中。

以下是关于图形表示的更多信息： [http ://en.wikipedia.org/wiki/Graph_%28abstract_data_type%29#Representations](http://en.wikipedia.org/wiki/Graph_%28abstract_data_type%29#Representations)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T22:01:27.543

1.  创建一个包含相邻节点列表的类**Node**
2.  遍历点数组中的**节点**。为您找到的每个节点创建一个 Node 对象（可能最好在开始时将它们保存在 Map 中。
3.  再次迭代并填充每个节点的相邻节点列表。

考虑这个类节点：

```
public class Node {
    private int id;
    private List<Node> adjacentNodes = new ArrayList<Node>();

    public List<Node> getAdjacentNodes() {
        return adjacentNodes;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }
} 
```

此方法创建所有节点的集合，并将它们链接在一起：

```
 private static Collection<Node> createGraphNodes(int[][] pointsMatrix) {
    Map<Integer, Node> nodes = new HashMap<Integer, Node>();
    for(int[] points: pointsMatrix) {
        for(int point: points) {
            if(nodes.containsKey(Integer.valueOf(point))) {
                continue;
            }

            Node node = new Node();
            node.setId(point);
            nodes.put(point, node);
        }
    }

    for(int[] points: pointsMatrix) {
        int nodeId1 = points[0];
        int nodeId2 = points[1];

        Node node1 = nodes.get(Integer.valueOf(nodeId1));
        Node node2 = nodes.get(Integer.valueOf(nodeId2));

        node1.getAdjacentNodes().add(node2);
        node2.getAdjacentNodes().add(node1);

    }

    return nodes.values(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T22:09:46.500

The simplest way to represent graphs is to use the Adjacency matrix, which is a two-dimensional boolean matrix in which rows and columns represent nodes in the graph, and the intersection between one row and column states if they are connected. It contains one if they are connected zero otherwise.

For example your above graph will be:

```
 0    1    2    3    4   
0   [0]  [1]  [1]  [0]  [0] 
1   [1]  [0]  [1]  [1]  [0]  
2   [1]  [1]  [0]  [0]  [0] 
3   [0]  [1]  [0]  [0]  [1]
4   [0]  [0]  [0]  [1]  [0] 
```

# uinavigationcontroller - self.tabBarController.selectedViewController 被 uinavigationController 抛出

> ID：15868351
> 
> 赞同：0
> 
> 时间：2013-04-07T21:58:06.777
> 
> 标签：uinavigationcontroller, uitabbarcontroller

我有一个包含 tabBarController、navigationController 和两个视图（xcode 4.2）的单视图应用程序。我想确定何时选择了给定的选项卡，并计划使用以下代码这样做：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    NSLog(@"in testtableView.  %@", self.tabBarController.selectedViewController);
    NSLog(@"in testtableView. tab bar index is: %i", self.tabBarController.selectedIndex);

} 
```

此代码包含在两个视图中。当navigationController 不存在时，即当应用程序是一个简单的选项卡式应用程序时，它可以完美地工作。但是，当包含 navigationController 时，它会导致索引在第一次选择第二个选项卡（navigationController）时“滑动”一个，但如果用户决定继续在选项卡之间切换，则不会在此之后。

这是两个屏幕截图： [屏幕截图 http://s1305.photobucket.com/user/michael_jensen2/media/Screenshot2013-04-07at50743PM_zps1fab25ab.png.html?evt=email_share](http://s1305.photobucket.com/user/michael_jensen2/media/Screenshot2013-04-07at50743PM_zps1fab25ab.png.html?evt=email_share)。我试着把它们放在 photobucket 上.. 有更好的方法吗？这是输出，在不同的测试中调用每个函数：

```
2013-04-07 17:21:31.728 testTabBar[1921:207] in firstViewController.  <tabBarTestFirstViewController: 0x684ea80>
2013-04-07 17:21:53.626 testTabBar[1921:207] in secondViewConroller.  <UINavigationController: 0x684fce0>
2013-04-07 17:22:04.528 testTabBar[1921:207] in firstViewController.  <UINavigationController: 0x684fce0>
2013-04-07 17:22:06.544 testTabBar[1921:207] in secondViewConroller.  <tabBarTestFirstViewController: 0x684ea80>
2013-04-07 17:22:07.392 testTabBar[1921:207] in firstViewController.  <UINavigationController: 0x684fce0>
2013-04-07 17:22:07.816 testTabBar[1921:207] in secondViewConroller.  <tabBarTestFirstViewController: 0x684ea80>
2013-04-07 17:22:08.288 testTabBar[1921:207] in firstViewController.  <UINavigationController: 0x684fce0> 
```

.

```
2013-04-07 17:50:33.075 testTabBar[2066:207] in firstViewController. tab bar index is: 0
2013-04-07 17:50:37.526 testTabBar[2066:207] in secondViewConroller. tab bar index is: 1
2013-04-07 17:50:37.982 testTabBar[2066:207] in firstViewController. tab bar index is: 1
2013-04-07 17:50:38.301 testTabBar[2066:207] in secondViewConroller. tab bar index is: 0
2013-04-07 17:50:38.668 testTabBar[2066:207] in firstViewController. tab bar index is: 1
2013-04-07 17:50:39.100 testTabBar[2066:207] in secondViewConroller. tab bar index is: 0
2013-04-07 17:50:39.532 testTabBar[2066:207] in firstViewController. tab bar index is: 1
2013-04-07 17:50:39.988 testTabBar[2066:207] in secondViewConroller. tab bar index is: 0
2013-04-07 17:50:40.372 testTabBar[2066:207] in firstViewController. tab bar index is: 1 
```

有什么想法吗？可能已经发布了解决方案，但我还没有找到。

-麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:31:34.760

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController;
{

    if (tabBarController.selectedIndex == 0) {

    }
    else if (tabBarController.selectedIndex == 1)
    {

    }

} 
```

# jquery - JQuery OnClick 用于 ASP .NET MVC 中的重复元素

> ID：15868357
> 
> 赞同：0
> 
> 时间：2013-04-07T21:59:16.687
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4

我有一个 ASP .NET MVC 视图，它具有以下内容：

```
 @foreach (var item in Model)
    {
        @Html.DisplayFor(m => item)
    } 
```

在我的 DisplayTemplate 中，我基本上有以下内容：

```
 <a>Hello @Model.Name</a>

 <script>
       $(???).click(function() {...});
 </script> 
```

我想使用 jquery 在我的 DisplayTemplate 中添加一个点击处理程序（不在主视图中）。

我无法为 DisplayTemplate 中的锚分配唯一 ID，因为它是重复的。如何在 jquery 中定位我的锚点以便我可以添加点击处理程序？我考虑过为每个 DisplayTemplate 实例创建一个唯一的 guid 并将其设置为 id，但这似乎非常糟糕。

# qtwebkit - Qt Webkit Bridge：C++ 访问 JavaScript

> ID：15868366
> 
> 赞同：3
> 
> 时间：2013-04-07T22:00:27.037
> 
> 标签：qtwebkit, bridge

我正在使用 QWebView 并调用 setHtml() 来显示一些 HTML/JavaScript 页面。我使用 QWebFrame::evaluateJavaScript 传递数据更新，方法是向它传递一个包含对 JavaScript 函数（带参数）的调用的 QString。在阅读了 Qt WebKit Bridge 之后，我觉得应该有更好的方法来做他的。我看到了将 C++ 中的 Qt 对象/函数暴露给 JavaScript 的讨论，但不是另一个方向。（我不希望 JavaScript 轮询 C++ 端的更新。）有没有办法将 JavaScript 函数作为插槽连接到 Qt/C++ 信号？（或类似的模式）我觉得我已经浏览了很多文档、发布的问题（甚至是我输入的“类似问题”），但没有看到这样的例子。欣赏任何信息、链接或朝着正确方向轻推。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-23T19:43:36.553

使用 addToJavaScriptWindow 对象将您的 C++ 对象公开到 Javascript 层：

```
page()->mainFrame()->addToJavaScriptWindowObject(QString("myObject"), myObject); 
```

在此处查看文档：http: [//qt-project.org/doc/qt-4.8/qwebframe.html#addToJavaScriptWindowObject](http://qt-project.org/doc/qt-4.8/qwebframe.html#addToJavaScriptWindowObject)

这会将您的 C++ myObject 公开为“myObject”。

然后，您可以完全按照您在帖子中查找的内容进行操作，假设 myObject 以下列方式声明了一个信号：

信号：

```
mySignal(QString aParameter); 
```

您可以简单地将该信号连接到 Web 端的插槽，如下所示：

> myObject.mySignal.connect(this, this.mySignalSlot);

在这种情况下，mySignalSlot 应该具有与 C++ 类端的 mySignal 声明相同的签名（嗯，“相同的签名”意味着与未键入 javascript 的参数数量相同，因此您不需要为每个声明类型他们）。

这里真正有用的是传递 JSon 对象。如果您需要传递大量数据，您可以使用 base64 编码。对于图像，QTWebKit 原生支持 QImage 和 QPixmap 类；最后两个被 QTWebKit Bridge 引擎本地编码为复杂的 javascript 对象。

# web-applications - Web 应用程序如何处理提交？

> ID：15868373
> 
> 赞同：0
> 
> 时间：2013-04-07T22:00:48.937
> 
> 标签：web-applications, form-submit, review

对于您提交内容的网站（例如向 Steam 提交游戏），提交内容是如何准确发送的？让我以 Steam 为例。提交游戏时，审核如何确认/拒绝它？他们在 Steam 上是否有针对评论者的特殊计划？我正在尝试编写一个 Web 应用程序，用户可以在其中提交内容（例如文本），并在将其发布到网站上之前对其进行审核。我会创建一个管理员帐户系统来发送所有提交吗？我很难想象这些东西是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:28:34.940

好吧，提交通常是通过 http post 请求完成的，其中客户端应用程序（通常是浏览器）将表单中包含的数据提交到一个指定的 URL，该 URL 接受数据并在服务器端处理它们。

例如，评论提交系统将具有以下形式：

```
<form method="post" action="post_comment.php">
<input type="text" name="username">
<input type="text" name="comment">
<input type="sumbit" value="Sumbit">
</form> 
```

当用户点击 sumbit 按钮时，浏览器向 post_comment.php 构造一个 http 请求，将数据发送到 http 有效负载中，名称值对如下所示：

```
username=AUser&comment=Acomment 
```

在服务器端，服务器获取数据并处理它们（例如将它们存储在数据库中）

```
<?php
$username = $_POST['username'];
$comment = $_POST['comment'];
?> 
```

至于管理员帐户系统，是的，您可以将用户提交的值存储在管理员可以接受/拒绝的临时表中。如果管理员接受它们，请将其移至所有评论的普通表中，否则将其删除。

# pascal - 魔方 FreePascal

> ID：15868375
> 
> 赞同：0
> 
> 时间：2013-04-07T22:00:54.630
> 
> 标签：pascal, freepascal, magic-square

程序必须输出正方形是否是幻方。

我必须从文件中读取正方形。

魔方 - 所有行、所有列和两条对角线之和必须相等。

程序显示正确答案，但这 16 个数字必须从文本文件中读取。

文本文件看起来像：

```
1 1 1 1
2 2 2 2 
3 3 3 3
4 4 4 4 
```

程序本身：

```
var
  m:array[1..4,1..4] of integer;
  i:byte;
  j:byte;
  r1,r2,r3,r4,c1,c2,c3,c4,d1,d2:integer;

begin

for i:=1 to 4 do
  for j:=1 to 4 do

  begin
    write('Enter value for column=',i,' row=',j,'  :');
    readln(m[i,j]);
  end;

r1:=m[1,1]+m[1,2]+m[1,3]+m[1,4];
r2:=m[2,1]+m[2,2]+m[2,3]+m[2,4];
r3:=m[3,1]+m[3,2]+m[3,3]+m[3,4];
r4:=m[4,1]+m[4,2]+m[4,3]+m[4,4];
c1:=m[1,1]+m[2,1]+m[3,1]+m[4,1];
c2:=m[1,2]+m[2,2]+m[3,2]+m[4,2];
c3:=m[1,3]+m[2,3]+m[3,3]+m[4,3];
c4:=m[1,4]+m[2,4]+m[3,4]+m[4,4];
d1:=m[1,1]+m[2,2]+m[3,3]+m[4,4];
d2:=m[1,4]+m[2,3]+m[3,2]+m[4,1];

if (r1=r2) and (r2=r3) and (r3=r4) and (r4=c1) and (c1=c2) and (c2=c3) and (c3=c4) and (c4=d1) and (d1=d2) then
  begin
  write('Magic Square');
  end

else
  begin
  write('Not Magic Square');
  end;

readln;

end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:15:26.597

这是从文本文件中读取矩阵的过程。行元素应该用空格分隔。

```
type
  TMatrix = array[1..4,1..4] of integer;

procedure ReadMatrix( const filename: String; var M: TMatrix);
var
  i,j : integer;
  aFile,aLine : TStringList;
begin
  aFile := TStringList.Create;
  aLine := TStringList.Create;
  aLine.Delimiter := ' ';
  try
    aFile.LoadFromFile(filename);
    Assert(aFile.Count = 4,'Not 4 rows in TMatrix');
    for i := 0 to 3 do
    begin
      aLine.DelimitedText := aFile[i];
      Assert(aLine.Count = 4,'Not 4 columns in TMatrix');
      for j := 0 to 3 do
        M[i+1,j+1] := StrToInt(aLine[j]);
    end;
  finally
    aLine.Free;
    aFile.Free; 
  end;
end; 
```

# ios - iOS 视图导航最佳实践

> ID：15868378
> 
> 赞同：0
> 
> 时间：2013-04-07T22:01:18.493
> 
> 标签：ios

我是 iOS 开发的新手（但在其他平台上拥有超过 10 年的整体经验，所以应该会有所帮助）。现在我必须创建相对复杂的 iOS 应用程序并且做得非常快:)。

我使用情节提要基于“选项卡式应用程序”模板创建了应用程序。然后我添加了使用 JSON 与 Web 应用程序通信的登录视图。我通过将适当的箭头从默认选项卡栏控制器移动到我的“登录视图控制器”来使这个视图初始（用户首先看到）。

在登录视图中，我有文本字段和登录按钮。通过单击按钮应用程序验证用户名和密码，然后将他导航到默认选项卡栏控制器（由 Xcode 创建）。我用这段代码来做：

```
WPFirstViewController *fvc = [self.storyboard instantiateViewControllerWithIdentifier: @"TabBars"];
[fvc setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
[self presentViewController:fvc animated:YES completion:nil]; 
```

一切正常，但我很困惑，因为我没有在故事板上的视图之间使用图形线，而且我不确定我的方法是否正确。

那么，问题是我应该如何将用户从登录视图导航到标签栏控制器？就我而言，最好的方法是什么？而且，例如，我应该如何将用户从选项卡视图控制器页面页面之一（例如，通过单击“设置”按钮）导航到相应的视图，然后返回？也许有人可以分享一些好文章的链接。

对不起，很长的文字。预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:06:27.267

我建议你不要使用故事板。此外，如果您打算在您的应用程序上安装一个导航控制器，那么您肯定会使用在`self.navigationViewController`您的视图控制器上推送视图控制器的功能。它易于使用，非常简单！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T04:15:42.643

Modal view controllers are supposed to be used for cases where you need to get some critical information from the user (or present some to the user), without which you can't continue with the app. A log in controller would be a good choice for a modal view controller, but your main controller, your tab bar controller isn't. It would be better to present the login controller modally from the controller in the first tab of your tab bar controller. If you do this from viewDidAppear, and with no animation, it will be the first thing the user sees. When the user successfully logs in, just dismiss that controller, and you'll be ready to go in your first tab.

I'm not sure what you mean by your second question. The user navigates between the tabs by clicking on a tab -- you don't need to do anything in code for that.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T00:35:44.480

Typically, login view controllers should be modally presented with: `presentModalViewController:animated:`

In regards to your UITabBarController, each tab can be a UINavigationController, which will enable you to maintain a stack of UIViewControllers.

All the remains is determining whether the view controller you want to present is modal, or part of said stack.

# ruby - 动态创建的方法中的 Ruby 动态参数

> ID：15868381
> 
> 赞同：3
> 
> 时间：2013-04-07T22:01:40.473
> 
> 标签：ruby, dynamic, metaprogramming, dynamic-programming

我有以下类型的方法定义：

```
method_name = :foo
method_arguments = [:bar, :baz]
method_mandatory_arguments = {:quux => true}
method_body = ->{ quux ? bar + baz : bar - baz } 
```

所以我想得到一个真正的方法。但是[define_method](http://ruby-doc.org/core-1.9.3/Module.html#method-i-define_method)不可能动态地定义方法参数。我知道使用 class_eval 的另一种方法，但我知道使用[class_eval](http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-class_eval)[定义](http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-class_eval)方法比[define_method](http://ruby-doc.org/core-1.9.3/Module.html#method-i-define_method)慢得多。我怎样才能有效地归档这个？

我在 Rails 控制台中做了一些基准测试：

```
class Foo; end
n = 100_000

Benchmark.bm do |x|
  x.report('define_method') do
    n.times { |i| Foo.send(:define_method, "method1#{i}", Proc.new { |a, b, c| a + b + c }) }
  end
  x.report('class_eval') do
    n.times { |i| Foo.class_eval %Q{ def method2#{i}(a, b, c); a + b + c; end } }
  end
end 
```

所以我得到了以下结果：

```
 user       system     total      real
define_method  0.750000   0.040000   0.790000 (  0.782988)
class_eval     9.510000   0.070000   9.580000 (  9.580577) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:41:32.447

没有简单的方法可以使用 class_eval 或 define_method 来实现您所要求的。由于 method_body 是一个 lambda，它只能访问在它之前定义的局部变量。

```
method_body = ->{ quux ? bar + baz : bar - baz }
quux = true
method_body.call # undefined local variable or method ‘quux’

quux = true
method_body = ->{ quux ? bar + baz : bar - baz }
method_body.call # undefined local variable or method ‘bar’ 
```

我建议你修改你的要求。如果您的方法主体应该是 lambda，请为其定义所有参数。那么这很适合define_method：

```
method_body = ->(quux, bar = 0, baz = 0){ quux ? bar + baz : bar - baz }
define_method(method_name, &method_body) 
```

如果您的方法主体可以是字符串，则 eval 是唯一的选择：

```
method_body = "quux ? bar + baz : bar - baz"
eval <<RUBY
def #{method_name} #{arguments}
  #{method_body}
end
RUBY 
```

# python - 尝试在循环中存储信息

> ID：15868384
> 
> 赞同：1
> 
> 时间：2013-04-07T22:01:59.327
> 
> 标签：python, loops, store

我正在尝试重新掷出多个骰子，并且每次都要记住上一次重新掷出的骰子。因此，例如，如果我掷出 5 个骰子并得到 1、2、3、4、5。我问你要重掷哪个骰子——1、3、4，然后得到类似 3、2、5、3、5 的东西。但正如我在循环中询问的那样，它会覆盖以前的新卷，只给出最后一个。在循环运行时如何存储新找到的数字？

```
reroll1 = input("Would you like to reroll? Yes or No: ")
if reroll1 == "Yes" or "yes":
count = 0
times = int(input("How many die would you like to reroll? "))
while count < times:
    whichreroll = input("Reroll die: ")
    if whichreroll == "1":
        reroll1 = random.randint(1,6)
    else:
        reroll1 = die1
    if whichreroll == "2":
        reroll2 = random.randint(1,6)
    else:
        reroll2 = die2
    if whichreroll == "3":
        reroll3 = random.randint(1,6)
    else:
        reroll3 = die3
    if whichreroll == "4":
        reroll4 = random.randint(1,6)
    else:
        reroll4 = die4
    if whichreroll == "5":
        reroll5 = random.randint(1,6)
    else:
        reroll5 = die5
    newset = [reroll1, reroll2, reroll3,reroll4,reroll5]

    count += 1
    print(newset) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:30:56.247

您可以通过循环掷骰子块而不是使用所有这些 if 语句来清理很多东西。这是通过使用选择的骰子来索引现有的骰子列表来完成的。我假设您已经有一个包含原始骰子的列表，所以我只制作了一个并复制到 newset。

```
oldset = [1,2,3,4,5]
reroll1 = str(raw_input("Would you like to reroll? Yes or No: "))
if reroll1.lower() == "yes":
    count = 0
    times = int(input("How many die would you like to reroll? "))
    newset = oldset

    while count < times:
        whichreroll = input("Reroll die: ")
        reroll = random.randint(1,6)
        newset[whichreroll-1]= reroll
        count += 1
        print(newset) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T22:31:05.197

如果我的问题是正确的，您可以通过拥有两组列表来简单地做到这一点，一组是您已经拥有的列表，另一组是 prevSet。prevSet 存储结果的最后一个值，所以基本上你可以在每次迭代开始时初始化 prevSet，这样它就可以

```
while (count < times):
    prevSet = newset 
    .
    .
    . 
```

# wcf - WCF 代理调用未向服务器注册？

> ID：15868397
> 
> 赞同：0
> 
> 时间：2013-04-07T22:03:03.450
> 
> 标签：wcf, proxy, timeout, svcutil.exe

我有一个服务并使用“netstat -anb”验证了当服务运行时，它正在侦听正确的端口（8040）。服务合同包含以下合同：

```
 [OperationContract]
    bool RegisterPlayer(); 
```

服务类本身明确地实现了契约：

```
 bool IMechService.RegisterPlayer()
    {
        if (P1 != null)
        {
            P1 = OperationContext.Current.GetCallbackChannel<IMechServiceCallback>();
            return true;
        }
        else if (P2 != null)
        {
            P2 = OperationContext.Current.GetCallbackChannel<IMechServiceCallback>();
            return true;
        }
        return false;
    } 
```

svcutil 生成的代理创建以下方法：

```
public bool RegisterPlayer()
{
    return base.Channel.RegisterPlayer();
} 
```

此代码尝试生成代理并调用该方法。我已经尝试过使用 DuplexChannelFactory 和 svcutil 生成的代理类，并且都给出了相同的结果：

```
client = new MechServiceClient(new InstanceContext(this));
//client = DuplexChannelFactory<IMechService>.CreateChannel(this, new NetTcpBinding(), new EndpointAddress("net.tcp://localhost:8040/MechService"));
client.RegisterPlayer(); 
```

Code execution reaches the RegisterPlayer in the proxy class, but proceeds to time out, never running RegisterPlayer on the service. Unfortunately, as it's just timing out, I'm not getting any exceptions or errors to help indicate where to look for issues. So far, I've verified the service is running and appears to be listening on port 8040 using "netstat -anb", and I've established that the mex endpoint is working as intended and publishing metadata. I turned off Windows Firewall. I've also created a separate test project with much simpler implementations to verify I was doing the steps correctly, and the simpler test project works fine. I'm out of ideas for what's causing this to fail, and any advice would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:26:41.470

Have you tried setting the `ConcurrencyMode` to `ConcurrencyMode.Multiple`?

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple)]
class MechServiceImpl : IMechService
{
    // ..
} 
```

The default concurrency mode for a service is `ConcurrencyMode.Single`, which can cause complications with callbacks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:36:20.487

Andrew's suggestion to logging helped, basically what fixed it was declaring my OperationContracts to isoneway=true.

# javascript - Facebook 和 Twitter 通过 iframe 共享

> ID：15868399
> 
> 赞同：1
> 
> 时间：2013-04-07T22:03:21.213
> 
> 标签：javascript, jquery, facebook, twitter

我想`referral url`通过 Twitter/Facebook 分享按钮从我的网站分享。我有自定义的分享按钮。
我可以在这两个网站上分享推荐网址，但是因为`target=_blank`facebook 的 Share Link 和 Twitter 的 Tweet 页面出现在新标签上。
然后，我希望`iFrame`用户在共享推荐链接时不会离开我的网站。

**Facebook 分享代码**

```
<a title="send to Facebook"
                 href="http://www.facebook.com/sharer.php?s=100&p[title]=YOUR_TITLE&p[summary]=YOUR_SUMMARY&p[url]=YOUR_URL&p[images][0]=YOUR_IMAGE_TO_SHARE_OBJECT"
                 target="_blank">
                 <span> 
```

**推特分享代码**

```
<a href="#" id="shareWithTwitter" onclick="shareWithTwitter()">
                  <img class="social-share"  src="<?php echo site_url('img/twitter.png'); ?>"/>
                </a>
function shareWithTwitter()
  {
    var url = 'https://twitter.com/home?status=Join Fashion on '+$('#referal-URL').val();
    $('#shareWithTwitter').attr('href',url);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:03:10.970

您所要做的就是向 iframe 添加一个 name 属性并将您的链接定位到它。

```
<iframe name="iframeName" style="iframe style"></iframe>
<a href="YOUR LINK" target="iframeName">link </a> 
```

[在 iframe 中打开链接](https://stackoverflow.com/questions/740816/open-link-in-iframe)

# php - 有没有办法通过 3.0 api 获取 YouTube 视频的所有者？

> ID：15868400
> 
> 赞同：1
> 
> 时间：2013-04-07T22:03:27.673
> 
> 标签：php, youtube-api, google-api-php-client

我正在寻找与视频相关的某种用户名或 uid 字段（因此我可以确认某人声称拥有的视频确实归该人所有）。我希望它出现在“片段”中，但它不存在。我想我可以通过频道界面和用户的播放列表，但我认为视频的所有者是可以通过视频 api 本身获得的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:12:51.450

**片段**是正确的，并且该字段称为“ **channelTitle** ”

截屏： ![在此处输入图像描述](https://i.stack.imgur.com/rBtsd.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:10:12.137

是的，视频所有者不会从视频资源中返回。

*   你可以做[Channels->list](https://developers.google.com/youtube/v3/docs/channels/list)
*   来自[relatedPlaylist.uploads](https://developers.google.com/youtube/v3/docs/channels#contentDetails.relatedPlaylists.uploads)。
*   遍历[PlaylisItems](https://developers.google.com/youtube/v3/docs/playlistItems/list)以匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T03:59:44.930

使用[Channels.list](https://developers.google.com/youtube/v3/docs/channels/list)

`snippet.channelTitle`将为您提供频道的名称。

`contentDetails.googlePlusUserId`可能会为您提供更多信息，但前提是用户已将 Google+ 帐户与 YouTube 频道相关联。

确保指定`part='snippet,contentDetails'`

[在： http ://www.youtube.com/get_video_info?video_id=](http://www.youtube.com/get_video_info?video_id=) *your-video-id*中也有*很多*信息 ，包括一个名为. 它需要一些解析来提取信息。*`content_owner_name`*

# c# - 如何非异步下载数据？

> ID：15868403
> 
> 赞同：1
> 
> 时间：2013-04-07T22:03:58.457
> 
> 标签：c#, windows-phone-7, asynchronous, download, webclient

我想在 Windows Phone 应用程序中非异步下载数据。我会创建一个下载器类，并在其中有一个简单的方法来从 URL 下载字符串。在其他平台上，我会使用：

```
 public class TextDownloader
 {
      public string GetString(string url)
      {
           WebClient web = new WebClient();
           string s = web.DownloadString("http://www.google.com");
           return s;
      }
 } 
```

它会很好用：简单、最少的代码。但是，该`WebClient.DownloadString`方法在 Windows Phone 7 上不可用，也没有很多 WebRequest 选项。有没有其他方法可以在 Windows Phone 中非异步下载数据？我宁愿不必为下载和错误创建多个事件，只需让一个简单的方法返回一个值或抛出一个异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T02:30:43.573

实际上，您不能将同步模型用于`WebClient`开箱即用的下载。这是设计使然，并且鉴于 Windows Phone 应用程序的性质，您应该遵循此方法。

您的问题的解决方案 -**回调**。您可以轻松地将函数重构为如下所示：

```
public void GetString(string url, Action<string> onCompletion = null)
{
    WebClient client = new WebClient();
    client.DownloadStringCompleted += (s, e) =>
        {
            if (onCompletion != null)
                onCompletion(e.Result);
        };
    client.DownloadStringAsync(new Uri(url));
} 
```

这使得它相对容易使用并在完成时触发一个动作。还有另一种方法可以做到这一点，那就是 - **async/await**。您将需要通过 NuGet安装[Bcl.Async包：](http://nuget.org/packages/Microsoft.Bcl.Async/)

```
Install-Package Microsoft.Bcl.Async -Pre 
```

它会让你这样做：

```
public async Task<string> DownloadString(string url)
{
    WebClient client = new WebClient();
    return await client.DownloadStringTaskAsync(url);
} 
```

尽管如此，它将绑定到异步模型，只是以不同的方式包装，线程将等待获取字符串，然后再将其返回给调用者。

# actionscript-3 - 仅检测与透明图像可见部分的碰撞 (AS3)

> ID：15868404
> 
> 赞同：1
> 
> 时间：2013-04-07T22:03:59.890
> 
> 标签：actionscript-3

我有一个透明图像和一个正方形。我想检测正方形何时与图像发生碰撞。然而，由于图像是透明的，它仍然会检测到它与透明像素的碰撞。所以，经过一番阅读，我尝试使用以前没有使用过的 BitmapData。所以，它不起作用。老实说，我没想到下面的代码*会*起作用。我只是写信让你知道我想做什么以及我想怎么做。

这是我的代码：

```
package 
{
import flash.display.Bitmap;
import flash.display.BitmapData;
import flash.display.Sprite;
import flash.events.Event;

/**
 * Testing Transparency
 * @author Craig Jackson
 */

public class Main extends Sprite 
{
    public var square:Sprite;

    [Embed(source="../lib/TestTransparency.png")]
    public var TestTrans:Class;

    public var testTransBitmapData:BitmapData = new BitmapData(300, 30, true, 0);

    public var testTransBitmap:Bitmap = new TestTrans();

    public function Main():void 
    {
        if (stage) init();
        else addEventListener(Event.ADDED_TO_STAGE, init);
    }

    private function init(e:Event = null):void 
    {
        removeEventListener(Event.ADDED_TO_STAGE, init);
        startUp();
    }

    public function  startUp():void 
    {
        square = new Sprite();
        square.graphics.beginFill(0x666666);
        square.graphics.drawRect(0, 0, 50, 50);
        square.graphics.endFill();
        addChild(square);

        testTransBitmapData.draw(testTransBitmap);
        addChild(testTransBitmap);

        addEventListener(Event.ENTER_FRAME, enterFrame);
    }

    public function enterFrame(e:Event):void
    {
        square.x = mouseX;
        square.y = mouseY;

        if (square.hitTestObject(testTransBitmap))
        {
            trace("Touching");
        }
    }
} 
```

任何人都知道我如何才能使其仅在正方形与图像的可见部分碰撞时检测到？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:33:28.180

Unless you have a personal reason for wanting to implement this yourself, I'd recommend using Corey O'Neil's collision detection kit:

[https://code.google.com/p/collisiondetectionkit/](https://code.google.com/p/collisiondetectionkit/)

# ios - NSSortDescriptor 不会按键对我的字典进行排序

> ID：15868409
> 
> 赞同：1
> 
> 时间：2013-04-07T22:04:28.133
> 
> 标签：ios, objective-c

我正在使用 UIActionSheet 通过其中一个键对数组中的 100 个字典进行排序。一些键是 NSStrings，另一些是 NSNumbers。这段代码完成了这项工作：

```
-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{

if (buttonIndex == 0) {
    sortDesc = [[NSSortDescriptor alloc] initWithKey:@"Price" ascending:YES];
    }
if (buttonIndex == 1) {
    sortDesc = [[NSSortDescriptor alloc] initWithKey:@"Name" ascending:YES];
}
if (buttonIndex == 2) {
    sortDesc = [[NSSortDescriptor alloc] initWithKey:@"Country" ascending:YES];
}
if (buttonIndex == 3) {
    sortDesc = [[NSSortDescriptor alloc] initWithKey:@"Price" ascending:YES];
}
if (buttonIndex == 4) {
    sortDesc = [[NSSortDescriptor alloc] initWithKey:@"Freshness" ascending:YES];
}
[objArr sortUsingDescriptors:[NSArray arrayWithObject:sortDesc]];
[[self tableView] reloadData];
} 
```

但是在最后一个（新鲜度）上，它会因以下错误而崩溃：`[__NSCFNumber length]: unrecognized selector sent to instance 0x1dd838e0` 每个字典的新鲜度值只是一个 1-10 之间的数字。有人能告诉我可能是什么原因造成的以及如何使它工作吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:23:33.947

这*应该*可以在不创建您自己的自定义比较器的情况下工作......如何创建字典？我敢打赌正在发生的事情是你的一些`Freshness`价值观是`NSStrings`，有些是`NSNumbers`，并且它们被偶然地相互比较。

When you load these out of the database or whatever, test them before you put them in their dictionaries with a `respondsToSelector:@selector(isEqualToNumber:)` and coerce any value `ids` that don't make the cut.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T22:37:42.807

用这个

```
sortedArrayUsingFunction:context 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T23:10:49.287

对于最后一个，试试这个：

```
sortDesc = [[NSSortDescriptor alloc] initWithKey:@"Freshness" ascending:YES comparator:^NSComparisonResult(id obj1, id obj2) {
        if ([obj1 integerValue] > [obj2 integerValue])
        {
            return (NSComparisonResult)NSOrderedDescending;
        }
        if ([obj1 integerValue] < [obj2 integerValue])
        {
            return (NSComparisonResult)NSOrderedAscending;
        }
        return (NSComparisonResult)NSOrderedSame;
    }]; 
```

# linux - 实时 git diff

> ID：15868414
> 
> 赞同：4
> 
> 时间：2013-04-07T22:05:08.027
> 
> 标签：linux, macos, git, unix, fswatch

我通常喜欢在查看 git diff 时输入我的 git commit 消息。

我非常喜欢[这个小 perl add-on 到 git](https://github.com/git/git/tree/master/contrib/diff-highlight)产生的输出，并产生看起来像这样的输出`git diff`（这是一个截图，`git log -p`但你明白了：

![在此处输入图像描述](https://i.stack.imgur.com/BMhwI.png)

由于它如何突出显示已更改的行的相应部分，因此很容易看到发生了什么变化。只是想分享它，因为它看起来不像很多人使用它，而且对我来说，它比使用外部单独的差异工具或类似的东西要好，因为它**可以在终端上运行**！一般来说，它对 unix 管道更友好，而不是`vimdiff`在`vimdiff`紧要关头也很方便。

无论如何，show-and-tell 只是与这里的真正问题无关，也就是说，我可以设置一个终端窗口来显示 git diff，但是让它是动态的，这样当我保存一个文件它可以为我刷新`git diff`吗？基本上，这个想法是让一个终端窗口实时显示我即将提交的确切更改，这样我就可以直接从我的文本编辑器切换到输入`git commit`命令，同时阅读整个更改集，并且在 Linux 机器上也可以通过 SSH 实现这个工作流程。

那将是一个非常棒的工作流程，我认为一点 cmdline fu 可以让我到达那里，但我不确定从哪里开始。似乎 OS X 和 Linux 需要单独的实现。我发现[fswatch](https://github.com/alandipert/fswatch)可能对我有用，显然这类似于 Linux 上的 inotify-watch。我不应该只在我的 OS X 开发机器上设置它，但就像我之前提到的，通过 SSH 拥有这种功能将是史诗般的。

有没有其他快速而肮脏的 UNIXy 方法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-23T11:01:39.190

你想要“watch git diff”之类的东西。“watch”命令重复运行命令并显示输出的第一页。

您需要的不仅仅是输出的第一页，而且您不希望在输出更新时移动到输出的顶部 - 您希望在 diff 中不断查看相同的偏移量，直到滚动。

我还没有尝试过，但你也许可以使用“screen”或“tmux”来提供一个大的虚拟屏幕。（参见[https://serverfault.com/questions/50772/is-there-a-paging-version-of-watch](https://serverfault.com/questions/50772/is-there-a-paging-version-of-watch)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:06:47.967

使用简单的内置程序有什么问题，它只`git commit -v`向您显示提交消息下要提交的更改的完整差异？（而且 Vim 用股票设置突出了这个差异。）

# c++ - 重载 C++ 本机变量

> ID：15868416
> 
> 赞同：-1
> 
> 时间：2013-04-07T22:05:21.950
> 
> 标签：c++, types, overloading, native

我之前发布[了一个](https://stackoverflow.com/questions/15867531/overloading-a-simple-operator?rq=1)关于如何重载字符串的问题，但是当我使用相同的公式时`unsigned long long`它不起作用。

我试过了`typedef`，但也没有用。

```
typedef unsigned long long i64;              

//a new class to hold extention types, and bytes. 
class FileData
{
public:
  //conversion operators
  operator string(){return extensions_;}
  operator i64() {return containsBytes_;}  
   string& operator= (FileData &);
  i64& operator= (FileData &);

  string extensions_;                        
  i64 containsBytes_;        
};

string &FileData::operator=(FileData& fd)
{
    return fd.extensions_;
}

i64 &FileData::operator=(FileData& fd)
{
    return fd.containsBytes_;
} 
```

这段代码有两个错误。

第一个在第 11 行：

> 错误：不能重载仅由返回类型区分的函数

第二个在第 22 行，

> 错误：声明与“std::string &FileData::operator=(FileData& fd)”不兼容（在第 17 行声明）。

但如果我删除任何提及字符串转换的内容，它仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:33:49.633

我想你要找的是这些

```
FileData& operator= (string&);
FileData& operator= (i64&);

FileData& FileData::operator=(string& s)
{
    this->extensions_ = s;
    return *this;
}

FileData& FileData::operator=(i64& l)
{
    this->containsBytes_ = l;
    return *this;
} 
```

您将赋值与类型转换运算符混淆了。当你想给**你的类**分配一些东西时，使用赋值运算符。不使其与 string 或 long long 兼容

通过重载字符串的分配，您可以执行此操作

```
FileData a;
string str;
a = str;  // This will set a.extensions_ to str, see above. 
```

但不是。

```
str = a; 
```

因为作业要求您的班级在左侧。

为此，`str = a;`您需要重载转换运算符 ()。你做了什么。

```
operator string(){return extensions_;} 
```

与那些超载的

```
str = a;   // This will set str to a.extensions_ See the difference? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T22:37:17.957

第一条错误消息

> 错误：不能重载仅由返回类型区分的函数

这两个函数具有相同的参数，仅在返回类型上有所不同

```
string& operator= (FileData &);
i64& operator= (FileData &); 
```

只有当函数的参数不同时，C++ 才能重载函数。

第二条错误信息

> 错误：声明与“std::string &FileData::operator=(FileData& fd)”不兼容（在第 17 行声明）。

```
i64 &FileData::operator=(FileData& fd)
{
    return fd.containsBytes_;
} 
```

This is a follow up to the first error. The C++ compiler ignored the second assignment operator, because there was no differing parameters. Now, you define an assignment operator, which is *incompatible* with the assignment operator declared first above.

# ios - 如何将多个 UIView 包装在圆角矩形中进行排序（附图片）？

> ID：15868417
> 
> 赞同：0
> 
> 时间：2013-04-07T22:05:39.043
> 
> 标签：ios, objective-c, ios5, ios6

在下图中，您如何在同一个白色圆角矩形中拥有多选项选择器和水平滚动条？它看起来很适合排序，我很想实现类似的东西。

![在此处输入图像描述](https://i.stack.imgur.com/Qt5x1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:15:24.193

您需要一个 UITableView 有两个部分（一个名为“section 1”，一个名为“section 2”）。

每个部分都有一行，每一行的“单元格”在其“附件视图”中包含一个选项选择器。

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html)

该选项选择器不是系统控件库的一部分，我不知道它来自哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:50:38.257

您可以将选项选择器用作 UIScrollView，将 UIPageControl 附加到它，在 UIView 内，两个 UIView（或 UIImageView）提供透明的淡入淡出效果。您将 n 视图添加到滚动视图，每个视图都具有相同的高度/宽度。如果你想要快照，我想你会这样，使用 UIScrollViewDelegates 跟踪当前页面，如下所示：

```
-(void) scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    float pageWidth = scrollview.frame.size.width;
    int page = floor((scrollview.contentOffset.x - pageWidth / 2) / pageWidth) + 1;   
    [self scrollview:scrollview scrollToPage: page];       
}

-(void) scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    if( decelerate == FALSE )
    {
        float pageWidth = scrollview.frame.size.width;
        int page = floor((scrollview.contentOffset.x - pageWidth / 2) / pageWidth) + 1;

        [self scrollview:scrollview scrollToPage: page];
    }
} 
```

而 scrollview:scrollToPage: 方法会给你这样的快照：

```
-(void) scrollview:(UIScrollView*) scrollview scrollToPage:(NSInteger) page
{
    [_myPageControl setCurrentPage:page];

    CGRect frame = scrollview.frame;
    frame.origin.x = frame.size.width * page;
    frame.origin.y = 0;
    [scrollview scrollRectToVisible:frame animated:YES];
} 
```

# spring - Spring Security 自定义身份验证并记住我

> ID：15868419
> 
> 赞同：2
> 
> 时间：2013-04-07T22:05:49.237
> 
> 标签：spring, spring-security, remember-me

我使用[本](http://krams915.blogspot.de/2010/12/spring-security-mvc-integration-using_26.html)教程来实现自定义身份验证管理器。登录和注销工作正常。

现在我想使用 spring security 记住我的身份验证。据我所知，remember-me 需要一个 userDetailService。所以我实现了一个自定义`userDetailService`.

在登录页面上，我添加了一个带有 name 的复选框`_spring_security_remember_me`。但是，记住我不起作用。成功登录后未设置记住我的 cookie。我认为这是一个配置问题，还是我需要实现一个自定义记住我才能使用自定义身份验证？

```
<input type="checkbox" name="_spring_security_remember_me">stay signed in 
```

我的 Spring-Security.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:security="http://www.springframework.org/schema/security"
    xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:jee="http://www.springframework.org/schema/jee"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/security 
            http://www.springframework.org/schema/security/spring-security-3.0.xsd
            http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd">

    <security:http auto-config="false" use-expressions="true" access-denied-page="/login?error=true"
            entry-point-ref="authenticationEntryPoint" >

        <!-- Zugriff auf /login für alle erlauben -->   
        <security:intercept-url pattern="/login" access="permitAll"/>
        <!-- resources -->
        <security:intercept-url pattern="/resources/**" access="permitAll"/>
        <!--<security:intercept-url pattern="/**" access="permitAll"/> -->
        <security:intercept-url pattern="/**" access="hasRole('ROLE_USER')"/>
        <!-- Zugriff auf /admin/** einschränken -->
        <security:intercept-url pattern="/admin/**" access="hasRole('ROLE_ADMIN')"/>

        <security:logout 
                invalidate-session="true" 
                logout-success-url="/login?logout=true" 
                logout-url="/j_spring_security_logout"/>

        <security:custom-filter ref="blacklistFilter" before="FILTER_SECURITY_INTERCEPTOR"/>
        <security:custom-filter ref="authenticationFilter" position="FORM_LOGIN_FILTER"/>

        <!-- Session Timeout Seite setzen und
            Session Fixation Attack Protection einschalten --> 
        <security:session-management invalid-session-url="/login?timeout=true"
            session-fixation-protection="migrateSession">

             <!-- Maxmale Anzahl von Session per User (Doppelanmeldung) --> 
             <security:concurrency-control max-sessions="3"
                error-if-maximum-exceeded="false" />
        </security:session-management> 
        <security:remember-me key="myAppKey" token-validity-seconds="864000" user-service-ref="customUserDetailService"/>
    </security:http>

    <!-- custom user service -->
    <bean id="customUserDetailService" class="com.stefan.app.security.CustomUserDetailsService">
        <property name="userBean" ref="userBean" />
    </bean>

    <!--  Custom filter to deny unwanted users even though registered -->
    <bean id="blacklistFilter" class="com.stefan.app.security.filter.BlacklistFilter" />

    <!-- Custom filter for username and password. The real customization is done in the customAthenticationManager -->
    <bean id="authenticationFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter"
        p:authenticationManager-ref="customAuthenticationManager"
        p:authenticationFailureHandler-ref="customAuthenticationFailureHandler"
        p:authenticationSuccessHandler-ref="customAuthenticationSuccessHandler" />

    <!-- Custom authentication manager. In order to authenticate, username and password must not be the same -->
    <bean id="customAuthenticationManager" class="com.stefan.app.security.CustomAuthenticationManager">
        <property name="userBean" ref="userBean" />
    </bean>

    <jee:local-slsb id="userBean" jndi-name="java:global/com.stefan.auctionnsiper-ear/app.ejb/UserBean!com.stefan.app.user.UserBeanLocal"
                business-interface="com.stefan.app.user.UserBeanLocal"/>

    <!-- We just actually need to set the default failure url here -->
    <bean id="customAuthenticationFailureHandler" class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler"
        p:defaultFailureUrl="/login?error=true" />

     <!-- We just actually need to set the default target url here -->
    <bean id="customAuthenticationSuccessHandler" class="org.springframework.security.web.authentication.SimpleUrlAuthenticationSuccessHandler"
        p:defaultTargetUrl="/products" />

    <!-- The AuthenticationEntryPoint is responsible for redirecting the user to a particular page, like a login page,
            whenever the server sends back a response requiring authentication -->
    <!-- See Spring-Security Reference 5.4.1 for more info -->
    <bean id="authenticationEntryPoint"  class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint"
        p:loginFormUrl="/login"/>

    <!-- The tag below has no use but Spring Security needs it to autowire the parent property of 
            org.springframework.security.authentication.ProviderManager. Otherwise we get an error 
            A probable bug. This is still under investigation-->
    <security:authentication-manager/>
</beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:37:51.087

查看：

*   [https://stackoverflow.com/questions/8815277/spring-security-tokenbasedremembermeservices-cookiename-ignored](https://stackoverflow.com/questions/8815277/spring-security-tokenbasedremembermeservices-cookiename-ignored)
*   [http://forum.springsource.org/showthread.php?130600-Spring-security-remember-me-cookie-configuration-example](http://forum.springsource.org/showthread.php?130600-Spring-security-remember-me-cookie-configuration-example)

* * *

尝试这个：

```
<security:http>
   ...
   <security:remember-me services-ref="rememberMeServices" />
</security:http>

<bean id="rememberMeServices" class="org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices">
    <property name="userDetailsService" ref="customUserDetailService"/>
    <property name="tokenValiditySeconds" value="864000"/>
    <property name="cookieName" value="SPRING_RM"/>
    <property name="key" value="myAppKey"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T10:57:03.307

除了 JoGo 所说的，别忘了在“authenticationFilter”上设置“rememberMeServices”属性，即：

```
<bean id="authenticationFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter"
    p:authenticationManager-ref="customAuthenticationManager"
    p:authenticationFailureHandler-ref="customAuthenticationFailureHandler"
    p:authenticationSuccessHandler-ref="customAuthenticationSuccessHandler"
    p:rememberMeServices-ref="rememberMeServices" /> 
```

此外，您可能需要在用户注销时删除记住我的 cookie，因此他不会自动登录：

```
<security:logout 
    invalidate-session="true" 
    logout-success-url="/login?logout=true" 
    logout-url="/j_spring_security_logout"
    delete-cookies="SPRING_RM"      
    /> 
```

我希望这有帮助。

# symfony - Twig Symfony2 获取请求变量

> ID：15868421
> 
> 赞同：35
> 
> 时间：2013-04-07T22:05:52.467
> 
> 标签：symfony, twig

我知道我可以这样做：

```
app.request.get('name') 
```

...但是我该怎么做呢？

```
app.request.get(twig_var_name) 
```

我已经尝试了所有明显的解决方案 {{}} () 等。

是否可以？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-07T22:57:52.400

你有没有尝试过 ：

```
app.request.get('' ~ twig_var_name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-26T11:33:27.230

现在这不是问题（至少 Symfony 4.4 和 5）。

我尝试使用以下方法获取请求参数：

```
{% set getParamName = 'sort' %}
<input type="hidden" name="sort" value="{{ app.request.get(getParamName) }}" /> 
```

而且根本没有问题。它工作得很好。

# python - 命令通过终端而不是通过 python 系统调用工作

> ID：15868424
> 
> 赞同：3
> 
> 时间：2013-04-07T22:06:07.657
> 
> 标签：python, system, subprocess, pipe

我正在尝试从 python 代码对 Boxer 文本解析器程序进行系统调用，但我发现以下语句集不起作用。它没有给我任何错误，但我没有看到创建任何输出文件。当我在终端上运行相同的命令时，会创建输出文件。

```
from subprocess import call
candcStr = 'echo "Every Man Walks" | /home/candc-1.00/bin/candc --models /home/candc-1.00/models/boxer --output /tmp/test.ccg' 
args = shlex.split(candcStr)
call(args) 
```

当我运行上面的代码时，控制台显示

```
Every Man Walks | /home/candc-1.00/bin/candc --models /home/candc-1.00/models/boxer --output /tmp/test.ccg 
```

似乎管道重定向不起作用。有谁知道我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T22:07:14.610

您需要设置`shell=True`shell 来解释命令，最重要的是管道：

```
call(args, shell=True) 
```

# java - 根据另一个数组中的某些条件将数组中的某个值相乘并将值存储在一个新数组中？

> ID：15868425
> 
> 赞同：2
> 
> 时间：2013-04-07T22:06:16.557
> 
> 标签：java, arrays, store

我正在创建一个基于数组的程序，帮助计算一些帮助学生提高技能的导师的津贴。该程序接收导师的数量，然后输入导师的姓名，询问导师帮助过多少学生，然后询问导师的学位水平（BS、MS、PhD）。导师将根据他们拥有的学位水平获得不同金额的报酬。因此，如果第一位导师（比尔）教过 5 名学生并拥有博士学位（每位学生 20 美元），那么他将获得 100.00 美元的报酬，以此类推（MS = 每位学生 15.00 美元，BS =每名学生 9.50）。

我的问题是，当我输入所有数据后，我只得到 0.0 的工资栏和 0.0 的总津贴。我要做的是基于在学位数组中输入的学位，你将教学数组（也就是教授的学生人数）乘以每个学生的金额，然后将该数字存储在一个名为津贴的新数组中。我已经重新安排，重新命名，并做了我能想到的一切，试图让津贴出现，但我没有选择，变得非常沮丧。因此，如果有人可以帮助我，将不胜感激。

```
 for(int pay=0; pay<numOfTutors; pay++) {
            if (degree[pay] == "BS") {
                stipend[pay] = taught[pay] * 9.50;
            }
            else if (degree[pay] == "MS") {
                stipend[pay] = taught[pay] * 15.00;
            }
            else if (degree[pay] == "PhD") {
                stipend[pay] = taught[pay] * 20.00;
            }
            sum+=stipend[pay];
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:12:33.327

用于`String#equals`比较`String`内容。`==`运算符用于比较引用`Object`。因为被比较的 2 个值的引用不相等，所以不会对数组进行任何薪酬调整`stipend`。代替

```
if (degree[pay] == "BS") { 
```

和

```
if (degree[pay].equals("BS")) { 
```

同样对于“MS”和“PhD”字符串检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T22:13:25.777

问题是您使用`==`运算符而不是`.equals()`方法来检查字符串是否相等。您应该更改表格的行

```
degree[pay] == "some_string" 
```

到

```
degree[pay].equals("some_string") 
```

或者，如果您想要不区分大小写的匹配，您可以使用

```
degree[pay].equalsIgnoreCase("some_string") 
```

Here's what's going on: when you write `degree[pay] = "some_string"`, you are checking for **reference equality**, which will not work for what you are doing, because a constant string and a generated string will not have equal references. The `.equals()` method will check for **equal values**, which is what you want.

# html - 页面上推荐的最大 HTML 元素数

> ID：15868428
> 
> 赞同：0
> 
> 时间：2013-04-07T22:06:47.830
> 
> 标签：html, performance, jquery-plugins

我正在使用出色的 jQuery 插件[Filtrify](http://luis-almeida.github.io/filtrify/)创建自定义搜索。

客户端添加的内容比我们最初预期的要多得多，现在页面上有超过 5000 个 HTML 元素。

我的问题：是否有关于页面上 HTML 元素的最大数量的建议？

该页面仍在呈现 - jQuery 过滤仍然运行良好 - 但我担心如果他们添加更多数据，它会在未来某个阶段被淘汰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:14:20.067

任何问题都将纯粹与性能有关。许多因素会在不牺牲性能的情况下找到最大数量的元素。多个页面（[http://luis-almeida.github.io/filtrify/jpages.html](http://luis-almeida.github.io/filtrify/jpages.html)）将帮助浏览器使用过多的内存。

# vector - 我可以在 Open GL ES 2.0 中计算透视截头体的确切视觉尺寸吗

> ID：15868429
> 
> 赞同：0
> 
> 时间：2013-04-07T22:06:47.960
> 
> 标签：vector, opengl-es-2.0, perspective

我想从原点以不同的翻译随机创建对象，但我想保证它们始终可见，这意味着我不想仅仅丢弃它们不可见的对象。假设我的视图矩阵是一个恒等式，我可以随机计算对象至少部分可见的位置吗？使用一些基本的三角学，在知道纵横比和近远 z 值的情况下，我可以计算透视平截头体的尺寸。问题是，如果我想在截锥体中的随机 x 位置绘制一个对象，它的随机 z 位置很可能会将其置于视野之外。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:15:48.823

我假设你知道你是如何设置你的平截头体的，所以应该知道平截头体的参数：*左、右、下、上、近、远*

通常你需要相机的viewingDirection、cameraPosition和upVector来确定截锥体内的位置，但是因为view matrix是identity，所以viewingDir是(0,0,-1)，camPosition是(0,0,0)，upVector是(0,1,0)。

因此，您只需检查您的随机点是否位于（左、下、-near）和（右、上、-远）之间。

# java - keytool 不会提示输入安卓密码

> ID：15868430
> 
> 赞同：1
> 
> 时间：2013-04-07T22:06:55.300
> 
> 标签：java, android, facebook, sdk, keystore

“首先，要在本地计算机上生成密钥哈希，请针对 Android 调试密钥库运行 Java 的 keytool 实用程序（应该在控制台的路径上）。默认情况下，在您的主 .android 目录中）

在 Windows 上，使用：

keytool -exportcert -alias androiddebugkey -keystore %HOMEPATH%.android\debug.keystore | openssl sha1 -二进制 | openssl base64

系统将提示您输入密码。这应该是不带引号的“android”。然后，您将获得一个大约 30 个字符的密钥散列。（如果没有提示您输入密码，则说明有问题，您必须检查上面的路径以确保 debug.keystore 存在。）"

这是我的 cmd：C:\Program Files (x86)\Java\sdk\platform-tools>keytool -exportcert -alias androiddebugkey -keystore %HOMEPATH%.android\debug.keystore | openssl sha1 -二进制 | openssl base64 slBznDHkLAsO3Vgw2i7c/gIppA0=

我究竟做错了什么？degug.keystore 存在，openssl 也在当前目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:46:54.820

你可以在java中运行：

```
Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT)); 
```

这将打印与运行 keytool 相同的代码：

尝试将其与您获得的代码进行比较：

slBznDHkLAsO3Vgw2i7c/gIppA0=

Facebook 图表提供了更多解决方案： [https ://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/)

在 keytool 错误下

# css - 关键帧动画不同步

> ID：15868431
> 
> 赞同：9
> 
> 时间：2013-04-07T22:07:05.220
> 
> 标签：css, css-animations

在我的本地文件系统上正常工作，而不是在服务器上。由于某种原因，它开始不同步。谢谢你的帮助。只有供应商前缀为 WebKit。在 Chrome 26.Demo 中测试：[http ://cssdesk.com/jjqKK](http://cssdesk.com/jjqKK)

HTML：

```
<ul class="slides">
  <li><img src="http://placehold.it/200x100" /><span class="caption">Image 1</span></li>
    <li><img src="http://placehold.it/200x100" /><span class="caption">Image 2</span></li>
    <li><img src="http://placehold.it/200x100" /><span class="caption">Image 3</span></li>
</ul> 
```

CSS：

```
ul.slides{
  position: relative;
    background: #000;
    height: 100px;
    width: 200px;
    padding: 0;
}
ul.slides li{
    position: absolute;
    left: 0px;
    top: 0px;
    right: 0px;
    bottom: 0px;
    height: inherit;
    width: inherit;
    padding: 0;
    margin: 0;
    -webkit-animation: slideshow 9s linear infinite;
}
ul.slides.clickpause:active li{
    -webkit-animation-play-state:paused;
}
ul.slides li:nth-child(1){ -webkit-animation-delay: 0s; }
ul.slides li:nth-child(2){  -webkit-animation-delay: 3s; }
ul.slides li:nth-child(3){  -webkit-animation-delay: 6s; }
@-webkit-keyframes slideshow{
0%{
    opacity: 0;
    z-index: 2;
}
3%{
    opacity: 1;
}
30%{
    opacity: 1;
 }
33%{
    opacity: 0;
 }
34%{
    z-index: 1;
 }
100%{
    opacity: 0;
 }
}
ul.slides li img{
    position: absolute;
    left: 0px;
    top: 0px;
    right: 0px;
    bottom: 0px;
    padding: 0;
    margin: 0
}
ul.slides li span{
    position: absolute;
    left: 0px;
    right: 0px;
    bottom: 0px;
    background: rgba(40, 40, 40, 0.8);
    color: #FFF;
    padding: 5px
} 
```

演示：[http ://cssdesk.com/jjqKK](http://cssdesk.com/jjqKK)

请不要使用 JavaScript 的答案。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-17T00:02:18.510

您的动画可能并不总是同时开始。

我发现负延迟非常适合保持同步。使用这种技术，每个动画将同时加载，但有些部分*是从过去开始的*。查看 jsbin 示例：

[http://jsbin.com/EreYIdE/2/edit](http://jsbin.com/EreYIdE/2/edit)

**编辑**以添加示例内联：

```
ul {
  background: #000;
  height: 100px;
  padding: 0;
  position: relative;
  width: 200px;
}

li {
  height: inherit;
  margin: 0;
  opacity: 0;
  padding: 0;
  position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  width: inherit;

  -webkit-animation: slideshow 9s linear infinite;
  animation: slideshow 9s linear infinite;
}

li:nth-child(1) { 
  -webkit-animation-delay: -9s; 
  animation-delay: -9s; 
}

li:nth-child(2) {	
  -webkit-animation-delay: -6s;
  animation-delay: -6s;
}

li:nth-child(3) {	
  -webkit-animation-delay: -3s; 
  animation-delay: -3s; 
}

@-webkit-keyframes slideshow {
  0% {
    opacity: 0;
  }
  3% {
    opacity: 1;
  }
  30% {
    opacity: 1;
  }
  33% {
    opacity: 0;
  }
  100% {
    opacity: 0;
  }
}

@keyframes slideshow {
  0% {
    opacity: 0;
  }
  3% {
    opacity: 1;
  }
  30% {
    opacity: 1;
  }
  33% {
    opacity: 0;
  }
  100% {
    opacity: 0;
  }
}

img {
  margin: 0;
  padding: 0;
  position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
}

span {
  background: rgba(40, 40, 40, 0.8);
  color: #fff;
  padding: 5px;
  position: absolute;
    right: 0;
    bottom: 0;
    left: 0;
}
```

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
<ul>
  <li>
    <img src="http://placehold.it/200x100">
    <span>Image 1</span>

  <li>
    <img src="http://placehold.it/200x100">
    <span>Image 2</span>

  <li>
    <img src="http://placehold.it/200x100">
    <span>Image 3</span>
</ul>
</body>
</html>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T07:37:41.393

您必须使用**javascript添加动画触发器**

[Javascript 演示](http://jsfiddle.net/asantarissy/zFVC2)

```
window.onload = function (){ } 
```

或 [jQuery 演示](http://jsfiddle.net/asantarissy/zFVC2/1/)

```
$(window).load(function(){}) 
```

因为**CSS3 动画**和**过渡**在文档加载之前立即开始。

# c - 计算程序的系统调用并使用 strace 检查结果的有效性

> ID：15868438
> 
> 赞同：2
> 
> 时间：2013-04-07T22:07:51.923
> 
> 标签：c, linux, system-calls, strace, ptrace

我正在使用 ptrace 来计算程序的系统调用。
问题是给定一个程序 A，我的程序打印出系统调用的数量（打开、关闭、读取、写入）。

我的程序和以程序 A 作为参数的 strace（带有 -c 选项）的结果是相同的，除了打开的系统调用。
我的程序打印了 15，strace 打印了 3。

但我猜测，由于 strace 还会打印一些其他系统调用，这些可能加起来就是我的程序计算的 15 个打开的系统调用。

在查看 ORIG_EAX/RAX 寄存器时，我正在使用 SYS_open 检查 ptrace 的结果。

strace 打印的系统调用在[这里。](http://pastebin.com/AyEx1bin)

**更新：**
我从终端编译我的程序并从那里运行它，结果与 strace 相同。
我正在netbeans中开发。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:53:22.013

听起来 netbeans 正在使用 ptrace 来控制事物。（毕竟，没有它，它怎么能做断点和步骤呢？）所以 netbeans 可能会向你的程序发送无害的信号。

您可以运行 strace -o /tmp/foo（不带 -c）来准确了解发生了什么。（比较 netbeans 和没有 netbeans 下的输出，看看有什么不同。）

如果要过滤特定呼叫，还可以添加“-e open,close”。

# python - matplotlib mathtext \frac 太小

> ID：15868444
> 
> 赞同：6
> 
> 时间：2013-04-07T22:09:06.723
> 
> 标签：python, matplotlib, latex

当我给 matplotlib 一个注释字符串时，例如

```
'$\frac{A}{B} = C$' 
```

我指定字体大小为 18，A 和 B 以 12.6 pt 呈现，而 C 以 18 pt 呈现。我希望 A、B 和 C 的大小都相同。我该怎么做呢？

在 LaTeX 文档中，如果您给出命令

```
\begin{equation}
\frac{A}{B} = C
\end{equation} 
```

你得到一个分数，其中 A、B 和 C 的大小都相同，但如果你这样做

```
$\frac{A}{B} = C$ 
```

与文本内联，A 和 B 以 12.6 pt 呈现，而 C 以 18 pt 呈现。因此看起来 matplotlib 的数学文本正在模拟 LaTeX 的内联模式。在 LaTeX 中你可以写

```
$\displaystyle\frac{A}{B} = C$ 
```

然后 A、B 和 C 的大小都相同，即使在内联模式下也是如此。我在 matplotlib 中尝试过，但 mathtext 无法识别命令 \displaystyle。=(

有没有办法让它在 Matplotlib 的数学文本中工作，或者我是否在我的 .matplotlibrc 文件中将 text.usetex 更改为 true？（如果可能的话，我想继续使用 mathtext，因为它要快得多。）

我的设置：matplotlib v1.2.0 python 2.7 OS X 10.8

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-02-20T17:46:47.990

对于遇到此问题且不想设置为的任何人`"text.usetex"`，matplotlib`True`现在[支持](https://github.com/matplotlib/matplotlib/pull/8151)`\dfrac`宏（相当于`\displaystyle\frac`在 LaTeX 中）`\frac`从 2.1 版开始替换

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T21:09:02.127

正如你所说，你可以通过使用 \displaystyle 来修复它：

```
$\displaystyle\frac{A}{B} = C$ 
```

为了允许 matplotlib 对所有文本处理使用乳胶，您必须在 matplotlibrc 中将 text.usetex 变量定义为 True：

```
text.usetex          : True 
```

我做了一个小例子来验证它，它运行良好：

```
import matplotlib.pyplot as plt
plt.plot(range(200))
plt.text(100,50,r'$\displaystyle\frac{A}{B}=C$') 
```

我很抱歉，但由于我是新人，我不能发布任何图像。

# javascript - 我的 .flexslider 内容未在 Wordpress 中显示

> ID：15868445
> 
> 赞同：0
> 
> 时间：2013-04-07T22:09:22.163
> 
> 标签：javascript, jquery, wordpress, flexslider

我将 Flexslider 添加到 wordpress 主题中。Flexslider 在我的 HTML 模型中工作得很好，但是当实现到 Wordpress 主题中时，它现在不显示“.flexslider”类选择器中的任何内容。

从前端看起来好像“.flexslider”具有“display：none”属性。

我没有使用 Woothemes 的 Wordpress 插件

我的集成看起来像这样：

```
<script defer src="<?php bloginfo('template_url'); ?>/flex/jquery.flexslider.js"></script>

<script type="text/javascript">
$(function(){
SyntaxHighlighter.all();
});
$(window).load(function(){
$('.flexslider').flexslider({
slideshow: true,  
controlsContainer: ".flexslider",

   start: function(slider){
     $('body').removeClass('loading');
   }
 });
});
</script>

<!-- Syntax Highlighter -->
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/flex/js/shCore.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/flex/js/shBrushXml.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/flex/js/shBrushJScript.js"></script>

<!-- jQuery -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="<?php bloginfo('template_url'); ?>/flex/jquery.flexslider.js">\x3C/script>')</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:15:50.500

看起来您需要使用[jQuery no conlict wrapper](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_Wrappers)。

```
jQuery(document).ready(function($) {
$(function(){
SyntaxHighlighter.all();
});
$(window).load(function(){
$('.flexslider').flexslider({
slideshow: true,  
controlsContainer: ".flexslider",

   start: function(slider){
     $('body').removeClass('loading');
   }
 });
});
}); 
```

# php - android + php + mysql + 注册错误

> ID：15868452
> 
> 赞同：-4
> 
> 时间：2013-04-07T22:10:14.830
> 
> 标签：php, android, mysql, error-handling, registration

我正在 Android 上创建一个简单的注册表单，以使用 PHP MySQL 创建新用途并将数据存储在数据库中。

该应用程序运行良好，但问题是系统将数据插入数据库，但它在模拟器上显示错误消息。我该如何解决这个错误？？？谁能帮帮我？？

# 注册.java

```
package com.sencide;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.protocol.HTTP;
import org.apache.http.util.EntityUtils;

import android.app.Activity;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class AndroidRegister extends Activity implements OnClickListener {

    EditText uname, upass;
    Button registerBtn;
    TextView result;

    String user, pass;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.register);

         StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy);

            registerBtn = (Button)findViewById(R.id.registerbtn);
            registerBtn.setOnClickListener(this);

            result = (TextView) findViewById(R.id.resulttxt);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(v == registerBtn)
        {
            Thread t = new Thread() {

                public void run() {
                    registerData();
                }
            };
            t.start();

        } 
    }

    public void registerData()
    {
         uname = (EditText)findViewById(R.id.username);
         user = uname.getText().toString();

         upass = (EditText)findViewById(R.id.password);
         pass = upass.getText().toString();

         try
         {
             // Create a new HttpClient and Post Header
                HttpClient httpclient = new DefaultHttpClient();
                Log.e("Response-->", "after httpclient");
            /* login.php returns true if username and password is equal to saranga */
                HttpPost httppost = new HttpPost("http://10.0.2.2/register.php");
                Log.e("Response-->", "after httppost");

                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("username", user));
                nameValuePairs.add(new BasicNameValuePair("password", pass));

                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                Log.e("Responce-->", "after using the list name pair");

                // Execute HTTP Post Request
                Log.w("SENCIDE", "Execute HTTP Post Request");
                HttpResponse response = httpclient.execute(httppost);
                Log.e("Responce-->", "after execute the http response");
                String str = EntityUtils.toString(response.getEntity(), HTTP.UTF_8);
                Log.d("STR", str);

                if (str.toString().equalsIgnoreCase("true")) {

                    runOnUiThread(new Runnable() {
                        public void run() {

                            result.setText("register Successful");
                        }
                    });

                } else {
                    runOnUiThread(new Runnable() {
                        public void run() {
                            result.setText("Duh no register");

                        }
                    });
                }

         }
          catch (ClientProtocolException e)
          {     
              e.printStackTrace(); 
           } 
          catch (IOException e)
          {
                e.printStackTrace();
           }

    }

} 
```

# 原木猫

```
04-07 22:04:02.932: E/Response-->(469): after httpclient
04-07 22:04:02.932: E/Response-->(469): after httppost
04-07 22:04:03.033: E/Responce-->(469): after using the list name pair
04-07 22:04:03.033: W/SENCIDE(469): Execute HTTP Post Request
04-07 22:04:03.552: E/Responce-->(469): after execute the http response
04-07 22:04:03.626: D/STR(469): <br />
04-07 22:04:03.626: D/STR(469): <font size='1'><table class='xdebug-error xe-warning xe-scream' dir='ltr' border='1' cellspacing='0' cellpadding='1'>
04-07 22:04:03.626: D/STR(469): <tr><th align='left' bgcolor='#f57900' colspan="5"><span style='background-color: #cc0000; color: #fce94f; font-size: x-large;'>( ! )</span> SCREAM: Error suppression ignored for</th></tr>
04-07 22:04:03.626: D/STR(469): <tr><th align='left' bgcolor='#f57900' colspan="5"><span style='background-color: #cc0000; color: #fce94f; font-size: x-large;'>( ! )</span> Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in C:\wamp\www\register.php on line <i>27</i></th></tr>
04-07 22:04:03.626: D/STR(469): <tr><th align='left' bgcolor='#e9b96e' colspan='5'>Call Stack</th></tr>
04-07 22:04:03.626: D/STR(469): <tr><th align='center' bgcolor='#eeeeec'>#</th><th align='left' bgcolor='#eeeeec'>Time</th><th align='left' bgcolor='#eeeeec'>Memory</th><th align='left' bgcolor='#eeeeec'>Function</th><th align='left' bgcolor='#eeeeec'>Location</th></tr>
04-07 22:04:03.626: D/STR(469): <tr><td bgcolor='#eeeeec' align='center'>1</td><td bgcolor='#eeeeec' align='center'>0.0593</td><td bgcolor='#eeeeec' align='right'>142592</td><td bgcolor='#eeeeec'>{main}(  )</td><td title='C:\wamp\www\register.php' bgcolor='#eeeeec'>..\register.php<b>:</b>0</td></tr>
04-07 22:04:03.626: D/STR(469): <tr><td bgcolor='#eeeeec' align='center'>2</td><td bgcolor='#eeeeec' align='center'>0.3134</td><td bgcolor='#eeeeec' align='right'>150008</td><td bgcolor='#eeeeec'><a href='http://www.php.net/mysql_fetch_array' target='_new'>mysql_fetch_array</a>
04-07 22:04:03.626: D/STR(469): (  )</td><td title='C:\wamp\www\register.php' bgcolor='#eeeeec'>..\register.php<b>:</b>27</td></tr>
04-07 22:04:03.626: D/STR(469): </table></font> 
```

# 注册.php

```
<?php
$host="localhost"; // Host name
$username="*****"; // Mysql username
$password="****"; // Mysql password
$db_name="testlogin"; // Database name
$tbl_name="members"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$myusername=$_POST['username'];
$mypassword=$_POST['password'];

// To protect MySQL injection
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$message = "";

$sql = mysql_query("INSERT INTO members (username, password)VALUES('$myusername', '$mypassword')")or die(mysql_error());

$message = "you have  now been registered";

$getid = mysql_fetch_array($sql);

            $_SESSION['login_user'] = $getid['username'];

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T22:37:55.140

错误在您的 PHP 文件中。如果你查看你的 logcat，你有：

> 警告：mysql_fetch_array() 期望参数 1 是资源，在 C:\wamp\www\register.php 中给出的布尔值

这表明您没有连接到数据库，或者您的查询格式错误，或者您无权访问您尝试读取的表。PHP 手册显示[mysql_query 函数](http://www.php.net/manual/en/function.mysql-query.php)可以返回 false - 这负责创建`$sql`变量。

试试这个：

```
$getid = @mysql_fetch_array($sql) or die(mysql_error()); 
```

这将告诉你错误是什么——在 PHP 端调试它可能是值得的——通过 Android 和 logcat 更难！

`@`顺便说一句，除非您知道自己在做什么，否则我不建议您在实时代码中使用错误抑制运算符 ( )。它会使调试变得更加困难，所以要小心。

# c++ - 为什么 irc 发送“命令 uknown”？

> ID：15868454
> 
> 赞同：0
> 
> 时间：2013-04-07T22:10:50.833
> 
> 标签：c++, sockets, bots, irc

我正在尝试用 C++ 编写一个 irc 机器人，并负责连接和设置我的昵称以及身份，ping 也可以正常工作。我遇到的唯一问题是加入频道。服务器不断发回“JOIN :unknown command”我相信以下几行是最相关的：

```
#define JOIN "JOIN #test\r\n"
send(IrcSocket, JOIN, strlen(JOIN),0); 
```

如果我所包含的入门程序无法解决任何问题，这可能有点令人眼花缭乱。

```
#define WIN32_LEAN_AND_MEAN
#include <iostream>
#include <windows.h>
#include <winsock2.h>
#include <ws2tcpip.h>
#include <stdio.h>
#include <string>
#pragma comment(lib, "Ws2_32.lib")

int main()
{
    WSADATA wsaData;
    int iresult=WSAStartup(MAKEWORD(2,2),&wsaData);
    if(iresult!=0)
    {
                  printf("WSAStartup Failed: %d \n", iresult);
                  return 1;
    }
    struct addrinfo *result=NULL, *ptr=NULL, hints;
    ZeroMemory(&hints,sizeof(hints));
    hints.ai_family=AF_INET;
    hints.ai_socktype=SOCK_STREAM;
    hints.ai_protocol=IPPROTO_TCP;
    #define DEFAULT_PORT "6667"
    #define DEFAULT_IP "192.168.0.10"
    iresult = getaddrinfo(DEFAULT_IP,DEFAULT_PORT,&hints,&result);
    if(iresult!=0)
    {
                  printf("getaddrinfo failed: %d\n", iresult);
                  WSACleanup();
                  return 1;
    }
    SOCKET IrcSocket= INVALID_SOCKET;
    ptr=result;
    IrcSocket=socket(ptr->ai_family, ptr->ai_socktype,ptr->ai_protocol);
    if (IrcSocket == INVALID_SOCKET)
    {
       printf("Error at socket(): %d \n", WSAGetLastError());
       freeaddrinfo(result);
       WSACleanup();
       return 1;
    }
    iresult=connect(IrcSocket,ptr->ai_addr,ptr->ai_addrlen);
    if(iresult==SOCKET_ERROR)
    {
       closesocket(IrcSocket);
       IrcSocket=INVALID_SOCKET;
       freeaddrinfo(result);
    }

    if(IrcSocket == INVALID_SOCKET)
    {
       printf("Unable to connect to irc server!");
       WSACleanup();
       return 1;
    }
    std::cout<<("connection made\n");
    #define NICK "NICK bottester\r\n"
    #define IDENT "USER bottester 0 0 bottester\r\n"
    #define JOIN "JOIN #test\r\n"
    char stringbuffer[256];

    iresult=send(IrcSocket,NICK, strlen(NICK),0);
     if(iresult == SOCKET_ERROR)
    {
       printf("send failed: %d\n", WSAGetLastError());
       closesocket(IrcSocket);
       WSACleanup();
       std::cin.get();
       return 1;
    }
    iresult=send(IrcSocket, IDENT, strlen(IDENT),0);
    if(iresult == SOCKET_ERROR)
    {
       printf("send failed: %d\n", WSAGetLastError());
       closesocket(IrcSocket);
       WSACleanup();
       std::cin.get();
       return 1;
    }
    std::cout<<"entering ping loop\n";
    char pingnumber[128];
    char pinganswer[17]="PONG :";
    #define PRMSG "PRIVMSG test :TESTBOT IS HERE!\r\n"
    for(;;)
    {
           memset(stringbuffer,0,256);
           recv(IrcSocket,stringbuffer,sizeof(stringbuffer),0);
           for(int j=0;j<strlen(stringbuffer);j++)
           {
                   std::cout<<j<<stringbuffer[j]<<"\n";
           if(stringbuffer[j]=='P' && stringbuffer[j+1]=='I' && stringbuffer[j+2]=='N' && stringbuffer[j+3]=='G')
           {
           memset(pingnumber,0,10);
           std::memcpy(pingnumber, stringbuffer+j+6,10);
           std::memcpy(pinganswer+6,pingnumber,10);
           std::memcpy(pinganswer+16, "\r\n",strlen("\r\n"));
           send(IrcSocket,pinganswer,strlen(pinganswer),0);
           std::cout<< "PINGED<"<<pingnumber<<"\n";
           iresult=send(IrcSocket, JOIN, strlen(JOIN),0);
           std::cout<< "JOINED\n";
           send(IrcSocket, PRMSG, strlen(PRMSG),0);
           }
           }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-18T07:34:29.390

在发送 JOIN 之前，您无需等待注册完成。

你的客户太简单了，真的。为了获得您想要的效果，您可以在 USER/NICK 命令和 JOIN 命令之间设置一个睡眠。

正确的非 kludgy 解决方案是使用 poll、select 等进行正确的发送/接收轮询循环，等待 001 数字（您在注册连接后收到的第一个正确的数字）或更正确的是 RPL_ENDOFMOTD (376) 或ERR_NOMOTD (422)。收到此行后，发送您的 JOIN。

见：[https ://www.rfc-editor.org/rfc/rfc1459](https://www.rfc-editor.org/rfc/rfc1459)

另请参阅：[https ://msdn.microsoft.com/en-us/library/windows/desktop/ms740141%28v=vs.85%29.aspx?f=255&MSPPError=-2147217396](https://msdn.microsoft.com/en-us/library/windows/desktop/ms740141%28v=vs.85%29.aspx?f=255&MSPPError=-2147217396)

此外，您确实需要响应更多内容，而不是 PING 才能创建一个正常运行的客户端，但这是另一天的事情。一些服务器在注册期间发送一个“安全”PING，您必须在服务器接受连接并发送 001 数字之前做出响应。如果您不对此做出响应，您的连接将永远不会注册并最终 ping 超时。

# c# - 运行时和编译时有什么区别？

> ID：15868456
> 
> 赞同：11
> 
> 时间：2013-04-07T22:11:06.650
> 
> 标签：c#, compilation, runtime, compile-time

那么什么是运行时？它是执行无法在特定处理器上运行的半编译代码的虚拟机吗？如果是这样，那么什么是虚拟机？它是另一个将半编译代码进一步转换为机器特定代码的软件吗？那么，如果我们谈论的是一种不编译为中间代码而是直接翻译/编译为机器代码的语言呢？在那种情况下什么是运行时？是硬件（CPU和RAM）吗？

另外，编译时和运行时有什么区别？它们是软件生命周期的阶段吗？我的意思是一个程序本来就是一堆文本文件，对吧？因此，您将它们编译或翻译成一种数据形式，然后可以将其加载到内存并由处理器执行，或者如果它是一种“托管”语言，那么它需要进一步编译才能在硬件上运行。什么是托管语言？

最后，是否有调试时间之类的东西，它是什么？

我在第一个学期学习计算机科学，这真的让我很困惑，教的东西是多么不合逻辑。“信息”被塞进了我的喉咙，但每当我试图通过将所有相关的东西组织到一个定义明确的组件和关系的单一系统中来理解所有事情时，我就会陷入困境。

在此先感谢，加勒特

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-07T22:48:13.570

适合人类推理的那种代码（我们称之为“源代码”）需要经过几个阶段的翻译才能被底层硬件（如CPU或GPU）物理执行：

1.  源代码。
2.  [可选] 中间代码（例如 .NET MSIL 或 Java 字节码）。
3.  符合目标[指令集架构](http://en.wikipedia.org/wiki/Instruction_set_architecture)的机器代码。
4.  实际上翻转硅中逻辑门的微代码。

这些翻译可以在程序“生命周期”的各个阶段完成。例如，一种特定的编程语言或工具可能会选择在开发人员“构建”程序时从***1***转换为***2 ，而在用户“运行”它时选择从******2***转换为***3***（这通常由一个名为“虚拟机” ¹，需要预先安装在用户的计算机上）。这种情况对于 C# 和 Java 等“托管”语言来说是典型的。

或者它可以在构建时直接从***1***转换为***3***，这对于 C 和 C++ 等“本机”语言很常见。

***3***和***4***之间的转换几乎总是由底层硬件完成。从技术上讲，它是“运行时”的一部分，但通常被抽象出来，对开发人员来说基本上是不可见的。

术语“编译时间”通常表示从***1***到***2***（或***3***）的转换。在程序实际运行之前，可以在编译时进行某些检查，例如确保传递给方法的参数类型与声明的方法参数类型匹配（假设语言是“静态类型的”）。越早发现错误，就越容易修复，但这必须与灵活性相平衡，这就是为什么一些“脚本”语言缺乏全面的编译时检查的原因。

术语“运行时”通常表示从***2***（或***3***）一直到***4***的转换。甚至可以在运行时直接从***1***进行翻译，就像所谓的“解释语言”所做的那样。

有些问题在编译时无法发现，您必须使用适当的调试技术（如调试器、日志记录、分析器等）在运行时识别它们。运行时错误的典型示例是当您尝试访问不存在的集合元素时，这可能会在运行时表现为异常，并且是编译器执行流程过于复杂的结果在编译时“预测”。

“调试时间”只是调试器连接到正在运行的程序（或者您正在监视调试日志等）时的运行时间。

* * *

*¹不要将此与旨在运行本机代码的虚拟机混淆，例如 VMware 或 Oracle VirtualBox。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T22:20:29.223

编译时和运行时通常是指何时发生检查或何时可能发生错误。例如，在像 C# 这样的静态类型语言中，静态类型检查是在编译时进行的。这意味着如果您尝试将字符串分配给 int 变量，则无法编译应用程序。另一方面，运行时间是指代码实际执行的时间。例如异常总是在运行时抛出。

至于虚拟机等；C# 是一种编译成[通用中间语言](http://en.wikipedia.org/wiki/Common_Intermediate_Language)（CIL 或 IL）的语言。无论您使用哪种 .NET 语言（C# 和 VB.NET 都产生 IL），结果都是相同的代码。.NET Framework 然后使用[即时编译](http://en.wikipedia.org/wiki/Just-in-time_compilation)在运行时执行此语言。所以，是的，您可以将 .NET Framework 视为针对目标机器代码运行特殊子语言的虚拟机。

至于调试时，我认为没有这样的事情，因为您在调试时仍在运行程序。因此，如果有的话，调试时将是带有附加调试器的运行时。但你不会使用这样的术语。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-07T22:27:31.530

编译时间 - 编译器尝试编译某些代码的时间段。示例：“编译器在编译时发现 3 个类型错误，导致程序无法编译。”

运行时间 - 程序执行的时间段。示例：“我们直到运行时才发现错误，因为它是一个逻辑错误。”

运行时和虚拟机是两个不同的想法——你的第一个问题对我来说没有意义。

虚拟机确实是将“对象”[Java、C# 等] 代码转换为可以在机器上运行的字节码的软件程序。如果一种语言使用虚拟机，它也经常使用即时编译——这意味着编译时和运行时本质上是同时发生的。

相反，像 C、C++ 这样的编译语言通常在机器上执行之前编译成字节码，因此编译时和运行时是完全分开的。

通常，“托管”语言具有垃圾收集（您不直接通过分配和取消分配来操作内存 [Java 和 C# 都是示例]）并在某种类型的虚拟机上运行。

# clojure - “核心”命名空间命名法从何而来？

> ID：15868457
> 
> 赞同：9
> 
> 时间：2013-04-07T22:11:09.640
> 
> 标签：clojure, namespaces, nomenclature

我对 Clojure 比较陌生，但我注意到许多项目都实现了“核心”命名空间；eg`foobar.core`似乎是一种非常常见的模式。这背后的历史是什么？为什么它是*事实上*的标准？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T04:19:09.857

它只是一个通用名称，代表某物的“核心”功能。Clojure 的核心功能本身定义了一种通用的编程语言，在许多不同的问题领域中您可能需要非常通用的功能。仅适用于特定问题域的函数进入特定域的命名空间，例如`clojure.string`or `clojure.set`。

像 Leiningen 这样的工具无法先验地知道你正在尝试编写什么样的程序，所以他们`foo/core`默认为你设置了一个命名空间，仿照`clojure.core`-`clojure.core`是 Clojure 的核心功能，所以 foo.core 是核心foo 的功能。

如果你可以给你的核心命名空间一个不那么通用的名字，或者只是`foo/core`用来启动引导（例如通过保存你的`-main`函数），这是鼓励的，这样你的大部分代码将驻留在语义上更有意义的命名空间中。这可以帮助您找到以后要处理的特定代码。

# jquery - jquery在隐藏另一个div后移动div变慢

> ID：15868460
> 
> 赞同：-1
> 
> 时间：2013-04-07T22:11:33.143
> 
> 标签：jquery, performance, html, hide

我有许多彼此靠近的 div（框）水平向右浮动，每个都有自己的关闭按钮。当我关闭一个 div 时，其他人向右移动以关闭已关闭 div 的空间。

如果我想让他们慢慢移动，我需要做什么？

* * *

请看这个例子：

```
`http://jsfiddle.net/2t9A6/2/` 
```

当我取消选中复选框时，我想慢慢移动其他 div（选中和未选中）..

* * *

请指教。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:19:04.787

[jQuery 动画](http://api.jquery.com/animate/)

我不完全确定你在问什么。

但这可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T22:23:06.510

试试 .animate

```
$("div").animate({left:'250px'}); 
```

# c# - 基于控制台的应用程序的 GUI 提示表

> ID：15868462
> 
> 赞同：0
> 
> 时间：2013-04-07T22:11:43.627
> 
> 标签：c#, user-interface

[http://i49.tinypic.com/sl43th.png](http://i49.tinypic.com/sl43th.png)

我最近编写了一个基于控制台的应用程序，它提供低小费率、高小费率、最高晚餐价格等。

现在我应该把它做成一个 GUI 并基于用户的输入而不是预定义的变量。上图是最终结果应该是什么样子。

我不明白如何从基于控制台到 GUI。

出于帮助的原因 - 最低小费率文本框标记为 lTipRate 最低晚餐价格文本框标记为 lDinBox 最高小费率框标记为 hTipRate 最高晚餐价格标记为 hDinPRice 按钮标记为 calcTips

在整个学期中，大部分内容都是通过基于控制台而不是 GUI 完成的，所以我很难转换。

谁能解释一下我会怎么做？

太感谢了。

这是基于控制台的代码。

```
 using System;
    public class TippingTable
    {
    public static void Main()
    {
    double dinnerPrice = 10.00;
    double tipRate;
    double tip;

    const double LOWRATE = 0.10;
    const double MAXRATE = 0.25;
    const double TIPSTEP = 0.05;
    const double MAXDINNER = 100.00;
    const double DINNERSTEP = 10.00;

    Console.Write("   Price");
    for(tipRate = LOWRATE; tipRate <= MAXRATE;
        tipRate += TIPSTEP)
        Console.Write("{0,     8}" , tipRate.ToString("F"));
    Console.WriteLine();
    Console.WriteLine("----------------------------------------");

    tipRate = LOWRATE;

    while (dinnerPrice <= MAXDINNER)
    {
        Console.Write("{0,     8}", dinnerPrice.ToString("C"));
        while (tipRate <= MAXRATE)
        {
            tip = dinnerPrice * tipRate;
            Console.Write("{0,     8}",tip.ToString("F"));
            tipRate += 0.05;
        }
        dinnerPrice += DINNERSTEP;
        tipRate = LOWRATE;
        Console.WriteLine();
    }
} 
```

}

# android - Android 应用程序未启动主要活动并说未安装应用程序

> ID：15868473
> 
> 赞同：1
> 
> 时间：2013-04-07T22:14:10.130
> 
> 标签：android, android-intent

所以我对android编程有点陌生，我真的不知道为什么当我在活动下有一个权限标签时我不能运行主要活动。这是我在清单文件下的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.lab08b_awahla"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="com.example.DANGEROUS_ACTION" />

<permission
    android:name="com.example.DANGEROUS_ACTION"
    android:label="permission"
    android:protectionLevel="dangerous" />

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.lab08b_awahla.MainActivity"
        android:label="@string/app_name"
        android:permission="com.example.DANGEROUS_ACTION" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="com.example.DANGEROUS_ACTION" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T22:21:59.230

这是显而易见的。如果您要为活动提供安全标签，任何想要启动此活动的人都必须拥有这样的权限。主屏幕应用程序没有（甚至不知道）您的权限标签，所以这是一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:27:32.980

根据[标签](http://developer.android.com/guide/topics/manifest/activity-element.html)[的文档`<activity>`](http://developer.android.com/guide/topics/manifest/activity-element.html)

> android:permission
> The name of a permission that clients must have to launch the activity or otherwise get it to respond to an intent. If a caller of startActivity() or startActivityForResult() has not been granted the specified permission, its intent will not be delivered to the activity.

This leads me to think that you misunderstand the use of this attribute.

# vba - 从同一工作簿中另一个 Excel 工作表中的循环返回结果

> ID：15868476
> 
> 赞同：0
> 
> 时间：2013-04-07T22:14:22.157
> 
> 标签：vba, object, range

我定义错了什么？

我构造了一个 For Each ..Next 循环。我应用了一个函数，并尝试在 Excel 工作簿的下一张表上的表格中返回结果。但是，每当我应用此操作时，我都会不断收到错误 1004、对象或应用程序运行时错误：请注意，表 1 是 ReDim 表 1(Nb_Rows - 1, 6)

```
 Worksheets("Sheet2").Range("A2", Range("A2").Offset(Nb_Rows - 1, 6)).Value = Table1 
```

但是，如果我应用此代码，则不会出错。然而，我不能使用这个，因为它需要手动选择。我该如何处理？

```
 Worksheets("Sheet2").Range(Selection, Selection.Offset(Nb_Rows -1, 6)).Value = Table1 
```

我也尝试过这种方式：

```
 Worksheets("Sheet2").Activate
    Range("A2").Select
    Range(Selection, Selection.Offset(Nb_Rows - 1, 6)).Value = Table1 
```

它没有用.. :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:16:59.833

那么：

```
 Worksheets("Sheet2").Range(Range("A2"), Range("A2").Offset(Nb_Rows - 1, 6)).Value = Table1 
```

# ios - 我应该在 didreceivememorywarning 中做什么

> ID：15868480
> 
> 赞同：0
> 
> 时间：2013-04-07T22:14:45.497
> 
> 标签：ios, uitableview, memory-management, didreceivememorywarning

我有一个带有像 instagram 这样的 feed 的应用程序。当我滚动它时，它会加载越来越多的图像。所以有一刻，iOS 向我发送了内存警告，我不知道该怎么办。如果我让 array(feed) 等于 nil，什么都不会发生

这是我的对象分配： ![在此处输入图像描述](https://i.stack.imgur.com/L1nFs.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:29:34.740

**您应该拥有`dealloc`任何不需要或可重新创建的资源**，例如数组中的一些图像，您可能会在其中保存应用程序自人类创建以来下载的所有图像*。

**请注意，强烈不建议这样做。*

# javascript - 激活和停用缩放行为时的d3-js鼠标滚轮问题

> ID：15868483
> 
> 赞同：0
> 
> 时间：2013-04-07T22:14:56.057
> 
> 标签：javascript, svg, d3.js, zooming, mousewheel

我激活和停用缩放行为，如[http://bl.ocks.org/benzguo/4370043](http://bl.ocks.org/benzguo/4370043)所示：

```
var zoom = d3.behavior.zoom().on("zoom", rescale)
// after adding the handler, the mouse wheel will still scroll the page

// activate
svg_g_element.call(zoom)
// now, the mouse wheel zoom

// desactivate
svg_g_element.call(d3.behavior.zoom().on("zoom")    

// now, the mouse wheel will neither zoom nor scroll while over the svg_g_element 
```

如何建立默认的鼠标滚轮行为来滚动页面？或者示例中显示的方式不是停用缩放行为的最佳方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-10T15:18:06.747

此代码也将禁用 Firefox 上的鼠标滚轮缩放。

```
svg_g_element
      .on("mousewheel.zoom", null)
      .on("DOMMouseScroll.zoom", null) // disables older versions of Firefox
      .on("wheel.zoom", null) // disables newer versions of Firefox 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T15:44:07.763

您可能希望专门为此禁用缩放鼠标滚轮事件。

```
svg_g_element.on("mousewheel.zoom", null); 
```

# java - 动态创建 jpanels swing/java 列表

> ID：15868485
> 
> 赞同：0
> 
> 时间：2013-04-07T22:15:02.897
> 
> 标签：java, swing, layout, user-interface, jscrollpane

我正在尝试创建面板 PluginListPanel（扩展 JPanel），它将显示插件面板列表，该列表将尊重插件面板的首选高度，但会强制宽度。我有一个解决方案，但它很慢并且有一个奇怪的错误。在屏幕截图中，有两个这样的面板，一个在左侧，一个在右侧：

![在此处输入图像描述](https://i.stack.imgur.com/hDDsW.png)

我不太了解不同的布局管理器系统，但我知道 BorderLayout 中的 TOP 字段可以满足我的要求。所以，我想出了这个“递归”解决方案：

```
public PluginListPanel(List<PanelContainer> items) {        
    JPanel body = this;
    for (PanelContainer item : items) {
        body.setLayout(new BorderLayout(0, 0));
        JPanel panel = new PluginOnePanel(item);
        body.add(panel, BorderLayout.NORTH);

        JPanel newBody = new JPanel();
        body.add(newBody, BorderLayout.CENTER);
        body = newBody;
    }
} 
```

我遇到的问题是，当我滚动时，系统响应有些慢，并且 SamplePluginPanels 的颜色不同（见下图），即使 SamplePluginPanels 的数量低至 8 个。

问题是，我怎样才能让它更优雅，不减慢程序速度，也不会使面板变色？

任何见解都受到高度赞赏。

![在此处输入图像描述](https://i.stack.imgur.com/736qv.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:25:11.063

我认为垂直`Box`是答案（实际上是 2，在两列上）：

```
Box leftBox = Box.createVerticalBox();
Box rightBox = Box.createVerticalBox();

/* put them together */

setLayout(new GridLayout(2,1));
add(leftBox);
add(rightBox); 
```

还要确保滚动窗格的内容实现`Scrollable`并返回`true`, to `scrollableTracksViewportWidth()`。这将强制等宽。

# oauth-2.0 - google drive sdk oath2 令牌

> ID：15868486
> 
> 赞同：0
> 
> 时间：2013-04-07T22:15:03.683
> 
> 标签：oauth-2.0

我正在使用[https://developers.google.com/drive/quickstart-ruby](https://developers.google.com/drive/quickstart-ruby)从在 Windows 下运行的独立 ruby​​ 脚本提供的 Ruby quickstart.rb 示例脚本。该脚本工作正常，它启动浏览器窗口，我授予对应用程序的访问权限，将令牌粘贴到我的控制台窗口中并获得身份验证。我的问题是，我怎样才能使这个身份验证过程永久或至少更长期？目前，我每次启动应用程序时都必须对其进行授权。由于每次发出请求时令牌都会更改，因此我无法将其保存在脚本中。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T23:31:47.100

您可以使用服务帐户和域范围的委派：

[https://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation)

# php - 从 .txt 文件中获取特定文本

> ID：15868487
> 
> 赞同：0
> 
> 时间：2013-04-07T22:15:04.930
> 
> 标签：php, string, text

我有一个这样的日志文件：

```
2013-04-08-03-17-52: Cleaning Up all data for restart operation
2013-04-08-03-18-02: Creating new instance of app before closing
2013-04-08-03-18-03: New instance created and running
2013-04-08-03-18-03: Application started 
```

目前，我每秒都在加载完整的日志文件，以便使用 jquery ajax 向用户显示它，因为这太低效了，我试图找出一些方法来仅从日志文件中加载更新的行。

他们是否有任何方式仅在特定时间戳之后获取行`2013-04-08-03-18-03` ？为此，我将管理具有最后一个时间戳的变量，并且每次我获得新行时都会更新它。

我是 PHP 新手，只知道读写文件的基础知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:28:20.590

您可能需要先检查文件修改时间以查看是否需要重新加载日志文件。您可以[`filemtime`](http://php.net/manual/en/function.filemtime.php)为此使用 -function。

此外，您可以使用[`file_get_contents`](http://php.net/manual/en/function.file-get-contents.php)-function 使用偏移量从某个点读取文件。

**编辑**：那么，它是如何工作的？

假设您已将上次修改时间存储在会话变量中`$_SESSION['log_lastmod']`，并将最近的偏移量存储在`$_SESSION['log_offset']`.

```
session_start();

// First, check if the variables exist. If not, create them so that the entire log is read.
if (!isset($_SESSION['log_lastmod']) && !isset($_SESSION['log_offset'])) {
    $_SESSION['log_lastmod'] = 0;
    $_SESSION['log_offset'] = 0;
}

if (filemtime('log.txt') > $_SESSION['log_lastmod']) {
    // read file from offset
    $newcontent = file_get_contents('log.txt', NULL, NULL, $_SESSION['log_offset']);
    // set new offset (add newly read characters to last offset)
    $_SESSION['log_offset'] += strlen($newcontent);
    // set new lastmod-time
    $_SESSION['log_lastmod'] = filemtime('log.txt');

    // manipulate $newcontent here to what you want it to show
} else {
    // put whatever should be returned to the client if there are no updates here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:44:14.247

你可以试试

```
session_start();
if (! isset($_SESSION['log'])) {
    $log = new stdClass();
    $log->timestamp = "2013-04-08-03-18-03";
    $log->position = 0;
    $log->max = 2;
    $_SESSION['log'] = &$log;
} else {
    $log = &$_SESSION['log'];
}

$format = "Y-m-d-:g:i:s";
$filename = "log.txt";

// Get last date
$dateLast = DateTime::createFromFormat($format, $log->timestamp);

$fp = fopen($filename, "r");
fseek($fp, $log->position); // prevent loading all file to memory

$output = array();
$i = 0;
while ( $i < $log->max && ! feof($fp) ) {
    $content = fgets($fp);

    // Check if date is current
    if (DateTime::createFromFormat($format, $log->timestamp) < $dateLast)
        continue;

    $log->position = ftell($fp); // save current position
    $log->timestamp = strstr($content, ":", true); // save curren time;
    $output[] = $content;
    $i ++;
}

fclose($fp);
echo json_encode($output); // send to ajax 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T22:34:09.817

尝试这样的事情：

```
<?php
    session_start();
    $lines = file(/*Insert logfile path here*/);
    if(isset($_SESSION["last_date_stamp"])){
        $new_lines = array();
        foreach($lines as $line){
            // If the date stamp is newer than the session variable, add it to $new_lines
        }
        $returnLines = array_reverse($newLines); // the reverse is to put the lines in the right order
    } else {
        $returnLines = $lines;
    }
    $_SESSION['last_date_stamp'] = /* Insert the most recent date stamp here */;
    // return the $returnLines variable
?> 
```

这样做是逐行读取文件，如果会话变量已经存在，则将所有日期戳比会话变量中的新的行添加到返回变量`$returnLines`，如果不存在会话变量，它将放入文件中的所有行`$returnLines`。

在此之后，它创建.更新会话变量以供下次执行代码时使用。最后，它使用`$returnLines`变量返回日志文件数据。

希望这可以帮助。

# c - 试图在C中交换二维数组的元素

> ID：15868494
> 
> 赞同：3
> 
> 时间：2013-04-07T22:16:14.100
> 
> 标签：c, arrays

我正在编写一种交换二维数组元素的方法。我一直在寻找这个问题的答案，但是对于这种交换似乎没有很多好的答案。与传统交换的主要区别在于，我不是尝试交换长度为 2 的数组之一中的整数，而是尝试交换一对长度为 2 的数组，更具体地说是它们的指针。我对 C 很陌生（试图从 Java 切换）。当我编译下面的代码时，我收到一个警告“赋值使指针从没有强制转换的整数”。任何帮助将不胜感激。提前致谢。

```
void swap(int array[][2], int indexA, int indexB)
{
    int *temp = array[indexA];
    *array[indexA] = array[indexB];
    *array[indexB] = temp;
} 
```

编辑：我还尝试了下面的代码来替换最后两行（不包括括号，但这导致编译器给出错误“从类型'int *'分配给类型'int [2]'时不兼容的类型”每一行。

```
array[indexA] = array[indexB];
array[indexB] = temp; 
```

编辑：数组声明如下，交换函数作为快速排序实现的一部分被调用。调用swap 方法的sort 方法使用与我在swap 中使用的相同类型的参数声明（即“int array[][2]）。

```
int counts[256][2]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:17:20.560

您的代码正在尝试对两个元素数组进行赋值，这是不允许的（对于两个元素数组或任何其他重要的长度），除非它们被埋在结构中。

要移动数据，您有多种选择。保留现有原型，您可以执行以下操作：

```
void swap(int array[][2], int indexA, int indexB)
{
    int temp[2];
    memcpy(temp, array[indexA], sizeof(temp));
    memcpy(array[indexA], array[indexB], sizeof(array[indexA]));
    memcpy(array[indexB], temp, array[indexB]);
} 
```

或者，您可以使用元素循环：

```
void swap(int array[][2], int indexA, int indexB)
{
    for (size_t i=0;sizeof(array[0])/sizeof(array[0][0]);++i)
    {
        int temp = array[indexA][i];
        array[indexA][i] = array[indexB][i];
        array[indexB][i] = temp;
    }
} 
```

* * *

最后，您还可以考虑使用以下内容：

```
void swap(int (*a)[2], int (*b)[2])
{
    int temp[sizeof(*a)/sizeof((*a)[0])];
    memcpy(temp,a,sizeof(temp));
    memcpy(a,b,sizeof(*a));
    memcpy(b,temp,sizeof(*b));
} 
```

并像这样在调用方调用它：

```
swap(counts[indexA], counts[indexB]); 
```

恕我直言，这更具可读性。示例如下：

```
#include <stdio.h>
#include <stdlib.h>

void swap(int (*a)[2], int (*b)[2])
{
    int temp[sizeof(*a)/sizeof((*a)[0])];
    memcpy(temp,a,sizeof(temp));
    memcpy(a,b,sizeof(*a));
    memcpy(b,temp,sizeof(*b));
}

int main(int argc, char *argv[])
{
    int counts[10][2];
    int indexA = 1, indexB = 2;
    counts[indexA][0] = counts[indexA][1] = 1;
    counts[indexB][0] = counts[indexB][1] = 2;
    swap(counts[indexA], counts[indexB]);

    // better be 2 2
    printf("%d %d\n", counts[indexA][0], counts[indexA][1]);
    return 0;
} 
```

**输出**

```
2 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T22:32:47.683

~~这应该可以解决警告，如果我正确理解您的情况，它将起作用。~~

```
int *temp = array[indexA];
array[indexA] = array[indexB];
array[indexB] = temp; 
```

~~请记住，当您有一个二维数组时，“array[x]”的值仍然是一个指针。~~

编辑：

试试这个方法。

```
int temp[2];
memcpy(temp, array[indexA], sizeof(temp));
memcpy(array[indexA], array[indexB], sizeof(temp));
memcpy(array[indexB], temp, sizeof(temp)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-02T19:24:20.443

针对我的情况进行了验证，`std::swap()`可以使用：

```
#include <algorithm> // C++98
#include <utility> //C++11

int array[3][2] = { {1, 2}, {3, 4}, {5, 6} };
std::swap(array[0], array[2]);
// Now it's { {5, 6}, {3, 4}, {1, 2} } 
```

# opengl - OpenCL 和 OpenGL 的计算着色器有什么区别？

> ID：15868498
> 
> 赞同：61
> 
> 时间：2013-04-07T22:16:30.450
> 
> 标签：opengl, opencl, gpgpu, compute-shader

我知道 OpenCL 可以控制 GPU 的内存架构，因此可以进行更好的优化，但是，抛开这一点，我们可以使用计算着色器进行矢量运算（加法、乘法、求逆等）吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-08T08:54:23.310

与其他 OpenGL 着色器类型相比，计算着色器与计算机图形没有直接关系，并且提供了更直接的底层硬件抽象，类似于 CUDA 和 OpenCL。它提供了可定制的工作组大小、共享内存、组内同步以及所有来自 CUDA 和 OpenCL 的已知和喜爱的东西。

主要区别基本上是：

*   它使用 GLSL 而不是 OpenCL C。虽然这些编程语言之间没有太大的区别，但是您可以使用 OpenCL 不可用的所有与图形相关的 GLSL 功能，例如高级纹理类型（例如立方体贴图数组）、高级过滤（例如 mipmapping，好吧，你可能需要自己计算 mip 级别），以及 4x4 矩阵或几何函数之类的小便利。
*   它是一个与任何其他 GLSL 着色器一样的 OpenGL 着色器程序。这意味着访问 OpenGL 数据（如缓冲区、纹理、图像）是微不足道的，而 OpenGL 和 OpenCL/CUDA 之间的接口可能会变得乏味，您可能需要手动进行同步工作。同样，将其集成到现有的 OpenGL 工作流程中也是微不足道的，而设置 OpenCL 本身就是一本书，更不用说将其集成到现有的图形管道中。

所以这归结为，计算着色器确实适用于现有的 OpenGL 应用程序，尽管与其他着色器的图形方法相比，它展示了 GPU 编程的常用（OpenCL/CUDA 类）计算方法阶段，它不具有 OpenCL/CUDA 的计算灵活性（当然，同时提供其他优势）。因此，执行计算任务比将它们压缩到其他不适用于通用计算的着色器阶段或引入必须与之同步的额外计算框架更灵活、直接和容易。

Compute shaders should be able to do nearly anything achievable with OpenCL with the same flexibility and control over hardware resources and with the same programming approach. So if you have a good GPU-suitable algorithm (that would work well with CUDA or OpenCL) for the task you want to do, then yes, you can also do it with compute shaders, too. But it wouldn't make that much sense to use OpenGL (which still is and will probably always be a framework for real-time computer graphics in the first place) only because of compute shaders. For this you can just use OpenCL or CUDA. The real strength of compute shaders comes into play when mixing graphics and compute capabilities.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T22:24:13.400

[在这里](http://wili.cc/blog/opengl-cs.html)寻找另一个视角。总结：

是的，OpenCL 已经存在，但它针对的是重量级应用程序（想想 CFD、FEM 等），而且它比 OpenGL*更通用*（想想 GPU 之外......英特尔的 Xeon Phi 架构支持超过 50 个 x86 内核）。

此外，在 OpenGL/CUDA 和 OpenCL 之间共享缓冲区并不好玩。

# smarty - 配置加载失败 SMARTY

> ID：15868499
> 
> 赞同：0
> 
> 时间：2013-04-07T22:16:45.703
> 
> 标签：smarty, smarty3

在我的 PHP 文件中使用

```
$smarty->config_load('en.conf'); 
```

我得到以下信息：

```
Notice: function call 'config_load' is unknown or deprecated. in C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\ex\libs\sysplugins\smarty_internal_wrapper.php on line 57 
```

然后我将语句更改为`@$smarty->config_load('en.conf');`并隐藏错误。

但是，此时我的所有 ajax 脚本都失败了，并且在使用 firebug 的 ajax 响应中，这次我可以看到一个致命错误：

```
<b>Fatal error</b>:  Uncaught exception 'SmartyException' with message 'Unable to load config file &quot;en.conf&quot;' in C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\ex\libs\sysplugins\smarty_internal_config.php:90
Stack trace:
#0 C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\ex\libs\sysplugins\smarty_internal_config.php(39): Smarty_Internal_Config-&gt;buildConfigFilepath()
#1 C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\ex\libs\sysplugins\smarty_internal_config.php(117): Smarty_Internal_Config-&gt;getConfigFilepath()
#2 C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\ex\libs\sysplugins\smarty_internal_config.php(108): Smarty_Internal_Config-&gt;readConfigSource(Object(Smarty_Internal_Config))
#3 C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\ex\libs\sysplugins\smarty_internal_config_file_compiler.php(44): Smarty_Internal_Config-&gt;getConfigSource()
#4 C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\ex\libs\sysplugins\smarty_in in <b>C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\ex\libs\sysplugins\smarty_internal_config.php</b> on line <b>90</b><br /> 
```

知道为什么我会收到第一个警告（例如，如果语法已更改）以及为什么会收到致命错误吗？

(Smarty 版本 3.0.8)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:37:02.530

configLoad 是一个词，所以`$smarty->configLoad('en.conf');`似乎正在解决第一个错误，似乎该功能已在版本 3 中重命名

# haskell - 哈斯克尔的霍夫曼树

> ID：15868500
> 
> 赞同：1
> 
> 时间：2013-04-07T22:16:47.540
> 
> 标签：haskell, tree, huffman-code

我是 Haskell 的新手，我正在尝试创建一棵 Huffman 树，但直到最后我都无法弄清楚。

我对树的定义如下所示：`data HuffTree = Node Int HuffTree HuffTree | Leaf (Int, Char)`

到目前为止，我有一个函数`insTree :: HuffTree -> HuffTree -> HuffTree`可以在树中插入一个节点及其子树并返回新树。一个函数`makePair :: HuffTree -> HuffTree -> HuffTree`，它采用两棵树并生成一棵新树，将原始两棵树作为子树，并将前两棵树中的值的总和作为值。`value :: HuffTree -> Int`以及一个从每个节点返回值的函数。

我的问题是`makeHuffTree :: [(Int, Char)] -> HuffTree`看起来像这样的函数：

```
makeHuffTree :: [(Int, Char)] -> HuffTree
makeHuffTree lst = merge leafList
    where
        leafList = map (\ ((x,c)) -> Leaf (x,c)) lst
        merge [] = []
        merge [t] = [t]
        merge (t1 : t2 : tree) = insTree (makePair t1 t2) tree 
```

我知道这是这个功能的问题，但我不知道如何处理它。我得到的错误是这样的：

```
Couldn't match expected type `[a0]' with actual type `HuffTree'
In the return type of a call of `insTree'
In the expression: insTree (makePair t1 t2) tree
In an equation for `merge':
    merge (t1 : t2 : tree) = insTree (makePair t1 t2) tree 
```

你能提示如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T23:01:06.863

的结果类型是什么`merge`？

如果是`HuffTree`，那么这`merge [t] = [t]`条线是荒谬的。如果不是，那么这`makeHuffTree lst = merge leafList`条线是荒谬的。

无论哪种方式，这条线`merge (t1 : t2 : tree) = insTree (makePair t1 t2) tree`都是荒谬的，因为`tree`它是一个列表，并且`insTree`应该采用一个`HuffTree`，而不是一个列表。

我不熟悉霍夫曼树构建算法。但我认为：

*   `merge [] = []`这里显然不需要，因为没有对应于空列表的有效树。
*   `merge [t]`应该返回`t`。我不能确定，但​​我只是按照类型。
*   `merge (t1 : t2 : tree)`应该返回`insTree (makePair t1 t2) (merge tree)`。我再次关注类型。如果您对此感到困惑，请记住在 pattern 中`(a:b:cs)`，只有`a`and`b`是列表的元素；`cs`是列表的其余部分，这只是另一个列表。

* * *

我的观点是：始终遵循类型。你应该能够将手指指向任何表情并说“啊哈，你是 T 型！”。然后你可以将你的手指指向接受该表达式的函数并指责说：“见鬼，你不能有这种类型的参数！”（顺便说一句，编译器通常很乐意借给你它的一个长手指，就像它在有用的错误消息中所做的那样）。*然后*你会想“我有什么可以从*那个*值中创建一个需要类型的值？”，应用正确的函数来修复有问题的参数，差不多就是这样。哦，如果你没有任何合适的函数，你写一个。

# php - Laravel3：如果我使用 Eloquent，我需要消毒吗？

> ID：15868505
> 
> 赞同：0
> 
> 时间：2013-04-07T22:17:21.863
> 
> 标签：php, laravel, laravel-3

这种方法;

```
Route::get('admin/user/delete/(:any)', array('as' => 'username', 'uses' => 'admin@user_delete_process'));

public function action_user_delete_process($username)
{
    $result = User::find($username)->delete();
} 
```

我需要担心注射吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:54:52.183

一般来说，ORM 处理所有的转义。除非您传递原始 SQL 查询，否则您应该可以在不转义输入的情况下进行操作。为了确认，我挖掘了 Laravel 的代码，发现了这个`execute()`方法，它确实利用了[`PDO::prepare`](http://php.net/manual/en/pdo.prepare.php)：

```
/** laravel/database/connection.php, lines 219-278 */
protected function execute($sql, $bindings = array())
{
    /* ... */
    try
    {
        $statement = $this->pdo->prepare($sql);

        $start = microtime(true);

        $result = $statement->execute($bindings);
    }
    // If an exception occurs, we'll pass it into our custom exception
    // and set the message to include the SQL and query bindings so
    // debugging is much easier on the developer.
    catch (\Exception $exception)
    {
        $exception = new Exception($sql, $bindings, $exception);

        throw $exception;
    }
    /* ... */
} 
```

# php - MySQL 表和 JSON 解析。外键与否？

> ID：15868507
> 
> 赞同：0
> 
> 时间：2013-04-07T22:17:32.103
> 
> 标签：php, android, mysql, json, parsing

我正在使用 PHP 脚本从 Android 访问 MySQL 数据库，并且正在使用 JSON 解析返回的值。它工作正常。我的问题是关于 MySQL 的。

我有两个名为的表`country`，`geography`它们的结构如下。

**国家**表有这些列：

```
country_id* | country_name  and 20 more column... 
```

**地理**表有这些列：

```
geography_id* | location   and 15-20 more column... 
```

**(*) 表示主键**

```
<?php

 //some connection properties here....

// PHP variable to store the result of the PHP function 'mysql_connect()' which establishes the PHP & MySQL connection  
 $db_con = mysql_connect($db_host,$db_uid,$db_pass) or die('could not connect');
 mysql_select_db($db_name);

$sql = "SELECT * FROM countries, geography WHERE country_id = '". $_POST["COUNTRY_ID"]."'";
 $result = mysql_query($sql);
 while($row=mysql_fetch_assoc($result))
  $output[]=$row;
 print(json_encode($output));
 mysql_close();   
?> 
```

运行此脚本后返回不需要的值。假设，当我请求`country_id = 1`JSON 时返回表的所有行`geography`。我只想检索`geography_id=1`' 行。我必须使用外键来解决我的问题。还是另一种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:00:19.670

`geography`您最好的选择是通过添加列`country_id`（或类似的东西）向（可能）您的表添加外键：

该列将包含它在`countries`表中引用的国家/地区的 ID。然后您的查询将如下所示：

```
"SELECT *
FROM `geography`
INNER JOIN `countries` on geography.country_id = countries.country_id
WHERE geography.country_id = {$_POST["COUNTRY_ID"]}"; 
```

有关连接的更多信息，请查看此处 - 这是我读过的最好的文章之一：[http ://www.sitepoint.com/understanding-sql-joins-mysql-database/](http://www.sitepoint.com/understanding-sql-joins-mysql-database/)

# python - 列表到数组转换以使用 ravel() 函数

> ID：15868512
> 
> 赞同：110
> 
> 时间：2013-04-07T22:17:57.367
> 
> 标签：python, arrays, list, numpy

我在 python 中有一个列表，我想将它转换为一个数组以便能够使用`ravel()`函数。

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2013-04-07T22:20:26.043

使用[`numpy.asarray`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.asarray.html)：

```
import numpy as np
myarray = np.asarray(mylist) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-12-05T10:09:33.797

# 创建一个 int 数组和一个列表

```
from array import array
listA = list(range(0,50))
for item in listA:
    print(item)
arrayA = array("i", listA)
for item in arrayA:
    print(item) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-01-12T22:22:21.807

我想要一种方法来做到这一点，而无需使用额外的模块。首先将列表转为字符串，然后附加到数组：

```
dataset_list = ''.join(input_list)
dataset_array = []
for item in dataset_list.split(';'): # comma, or other
    dataset_array.append(item) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-30T01:41:03.307

如果你想要的只是调用`ravel`你的（嵌套的，我假设？）列表，你可以直接这样做，`numpy`会为你做演员：

```
L = [[1,None,3],["The", "quick", object]]
np.ravel(L)
# array([1, None, 3, 'The', 'quick', <class 'object'>], dtype=object) 
```

Also worth mentioning that [you needn't go through `numpy` at all](https://stackoverflow.com/a/40813764/7207392).

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2019-06-10T18:40:41.713

使用以下代码：

```
import numpy as np

myArray=np.array([1,2,4])  #func used to convert [1,2,3] list into an array
print(myArray) 
```

* * *

## 回答 #6

> 赞同：-13
> 
> 时间：2015-11-09T23:01:19.197

如果变量 b 有一个列表，那么您可以简单地执行以下操作：

创建一个新变量“a”为：`a=[]` 然后将列表分配给“a”为：`a=b`

现在“a”在数组中具有列表“b”的所有组件。

所以你已经成功地将列表转换为数组。

# windows-phone-7 - 如何将图像限制为真实形状

> ID：15868516
> 
> 赞同：2
> 
> 时间：2013-04-07T22:18:56.300
> 
> 标签：windows-phone-7, xna

我如何使用一个图像，每当我想在 XNA 中进行碰撞时，它只发生在形状区域而不是它周围。

例如，当我使用下图时，我希望仅在触摸形状箭头时发生碰撞检测。

![示例图像](https://i.stack.imgur.com/7j2Je.png)

碰撞检测发生在这张图片中的区域

![命中框](https://i.stack.imgur.com/a8cZX.png)

如何仅对图像区域进行限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:26:49.577

您还可以创建两个矩形。这使得重叠区域（图像不是矩形的区域）更小一些。但是，如果您需要精确地执行此像素，则必须使用资源昂贵的 per-pixel-collision。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:45:37.220

您不应该尝试限制图像形状，因为无论您如何努力 - 您都会有一个矩形。您需要做的是检测像素碰撞。[这是一个相当广泛的主题 - 您可以在此处](http://www.silverlightshow.net/items/XNA-for-Silverlight-developers-Part-7-Collision-detection.aspx)阅读有关 Windows Phone 特定 XNA 实现的更多信息。

# java - GWT 远程调试

> ID：15868522
> 
> 赞同：3
> 
> 时间：2013-04-07T22:19:38.830
> 
> 标签：java, gwt

我正在尝试为我的 GWT 应用程序进行远程调试会话。

我在远程机器的 Firefox 实例上运行的 GWT 插件中添加了一个条目：

```
Host Name   | Code Server
[IP address] [127.0.0.1] 
```

但是，即使我可以使用特定端口 ping IP 地址，我仍然无法访问 GWT 应用程序：`8888`

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T03:31:49.357

如果我理解正确，您正在尝试将您的客户端连接到远程服务器并调试客户端？我总是使用 Eclipse IDE 进行调试。所以：

*   您在 Eclipse 中运行调试模式。
*   输入您的浏览器网址，例如
    [http://remotedomain.com:8888/?gwt.codesvr=127.0.0.1:9997](http://remotedomain.com:8888/?gwt.codesvr=127.0.0.1:9997)其中
    gwt.codesvr 是您的本地（！）机器。

现在，您可以与远程服务器通信，但您的客户端代码来自您的机器内部。您可以使用 Eclipse 的所有功能进行调试。

希望这会帮助你。

# ios - 如何在显示之前获取绘制的元素高度？Objective-C

> ID：15868523
> 
> 赞同：0
> 
> 时间：2013-04-07T22:19:45.237
> 
> 标签：ios, objective-c, xcode

我正在尝试调整 UITableViewCell 的高度。

我的单元格包含另一个视图，该视图将绘制文本并将其显示在单元格中。

但是，文本高度可能会有所不同，我只能在调用 drawRect 后才能弄清楚（在嵌入的子视图中）。

有什么方法可以在显示之前计算出视图的高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:59:53.827

只要您知道字体、绘制文本的视图的宽度，以及必要时的换行模式，那么您可以使用：
`sizeWithFont:
sizeWithFont:constrainedToSize:
sizeWithFont:constrainedToSize:lineBreakMode:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:03:52.000

好吧，最后我找到了该怎么做，我想这不是最好的方法，但它确实有效。

我实现了一个方法，它再次绘制所有内容并立即返回绘制文本的高度。现在实际上我必须绘制文本两次，一次获取其高度，另一次将其显示在屏幕上！

# asp.net - ASP.NET VB.NET - 页面不加载

> ID：15868529
> 
> 赞同：0
> 
> 时间：2013-04-07T22:20:20.437
> 
> 标签：asp.net, vb.net, sql-server-2012, sqlconnection, datareader

谁能告诉我为什么当我尝试运行此代码时页面一直加载（从不加载）？

```
Imports System.Data.SqlClient

Partial Class Admin
    Inherits System.Web.UI.Page

    Protected Sub btnSearchUser_Click(sender As Object, e As EventArgs) Handles btnSearchUser.Click

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim searchComm As String = "SELECT * FROM users WHERE username LIKE @username"
        Dim user_id_select As New Integer

        Dim searchSQL As New SqlCommand

        conn.Open()

        searchSQL = New SqlCommand(searchComm, conn)
        searchSQL.Parameters.AddWithValue("@username", txtUserSearch.Text)

        Dim datareader As SqlDataReader = searchSQL.ExecuteReader()

        While datareader.Read

            lstUsers.Items.Add(datareader.Item("username"))

        End While

        datareader.Close()
        conn.Close()

        Dim conn2 As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim selectComm As String = "SELECT user_id FROM users WHERE username=@username_selected"

        Dim selectSQL As New SqlCommand

        conn2.Open()

        selectSQL = New SqlCommand(selectComm, conn2)
        selectSQL.Parameters.AddWithValue("@username_selected", lstUsers.SelectedItem.Text.Trim)

        Dim datareader2 As SqlDataReader = selectSQL.ExecuteReader()

        While datareader2.Read

            If datareader2.HasRows Then

                user_id_select = datareader2("user_id")

                lblUserSelected.Text = "Selected: " + lstUsers.SelectedItem.Text

            ElseIf datareader2.HasRows = False Then

                lblInvalidUsername.Visible = True
                datareader2.Close()

            End If

        End While

        conn2.Close()

    End Sub

    Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load

    End Sub

    Protected Sub DropDownList1_SelectedIndexChanged(sender As Object, e As EventArgs) Handles drpProjects.SelectedIndexChanged

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim sqlComm As String = "SELECT project_name FROM projects WHERE project_name=@projectname"
        Dim sqlProjname As New SqlCommand

        conn.Open()

        sqlProjname = New SqlCommand(sqlComm, conn)
        sqlProjname.Parameters.AddWithValue("@projectname", drpProjects.SelectedItem.Text)
        Dim datareader As SqlDataReader = sqlProjname.ExecuteReader()
        datareader.Read()

        If datareader.HasRows Then

            lblProjName.Text = datareader("project_name").ToString()
        End If

        datareader.Close()
        conn.Close()

        lblProjName.Visible = True
        grdProjDetails.Visible = True

    End Sub

    Protected Sub btnManageProj_Click(sender As Object, e As EventArgs) Handles btnManageProj.Click

        MultiView1.SetActiveView(View2)

    End Sub

    Protected Sub btnProjSettings_Click(sender As Object, e As EventArgs) Handles btnProjSettings.Click

        Dim conn2 As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
        Dim sqlComm2 As String = "SELECT project_id FROM projects WHERE project_name=@projectname"
        Dim sqlProjID As New SqlCommand

        conn2.Open()

        sqlProjID = New SqlCommand(sqlComm2, conn2)
        sqlProjID.Parameters.AddWithValue("@projectname", drpProjects.SelectedItem.Text)
        Dim datareader As SqlDataReader = sqlProjID.ExecuteReader()
        datareader.Read()

        If datareader.HasRows Then

            Dim UserID As String
            UserID = datareader("project_id").ToString

            Session("project_id") = UserID
            Response.Redirect("Project.aspx")

        End If

        datareader.Close()
        conn2.Close()

    End Sub
End Class 
```

管理员.aspx

```
 <%@ Page Title="" Language="VB" MasterPageFile="~/MasterPage.master" AutoEventWireup="false" CodeFile="Admin.aspx.vb" Inherits="Admin" %>

<asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
    <p style="font-size: xx-large; text-decoration: underline">
    <strong>Manage User</strong>&nbsp;</p>
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <p>
                <strong>Search User:</strong>
                <asp:TextBox ID="txtUserSearch" runat="server"></asp:TextBox>
                &nbsp;
                <asp:Button ID="btnSearchUser" runat="server" BorderStyle="None" Text="Search" />
            </p>
            <p>
                <asp:ListBox ID="lstUsers" runat="server" Height="47px" Width="160px"></asp:ListBox>
                &nbsp;&nbsp;&nbsp;&nbsp;
                <asp:Label ID="lblUserSelected" runat="server" Font-Bold="True"></asp:Label>
            </p>
            <p>
                <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataSourceID="SqlDataSource3">
                    <Columns>
                        <asp:BoundField DataField="name" HeaderText="name" SortExpression="name" />
                        <asp:BoundField DataField="surname" HeaderText="surname" SortExpression="surname" />
                        <asp:BoundField DataField="occupation" HeaderText="occupation" SortExpression="occupation" />
                        <asp:BoundField DataField="department" HeaderText="department" SortExpression="department" />
                        <asp:BoundField DataField="work_location" HeaderText="work_location" SortExpression="work_location" />
                    </Columns>
                </asp:GridView>
                <asp:SqlDataSource ID="SqlDataSource3" runat="server" ConnectionString="<%$ ConnectionStrings:ConnStringDb1 %>" SelectCommand="SELECT [name], [surname], [occupation], [department], [work_location] FROM [users] WHERE ([user_id] = @user_id)">
                    <SelectParameters>
                        <asp:SessionParameter Name="user_id" SessionField="UserID" Type="Int32" />
                    </SelectParameters>
                </asp:SqlDataSource>
            </p>
            <p>
                <asp:Label ID="lblInvalidUsername" runat="server" Font-Bold="True" ForeColor="#FF3300" Text="Invalid Username selected." Visible="False"></asp:Label>
            </p>
            <p>
                <asp:Button ID="btnViewProfile" runat="server" BorderStyle="None" Text="View Profile" />
            </p>
            <hr />
            <p style="font-size: xx-large; text-decoration: underline">
                <strong>Manage Projects</strong></p>

            <p style="font-size: xx-large; ">
                <asp:Button ID="btnCreateProj" runat="server" BorderStyle="None" Font-Bold="True" Height="38px" Text="CREATE" Width="100px" />
                &nbsp;<asp:Button ID="btnManageProj" runat="server" BorderStyle="None" Font-Bold="True" Height="38px" Text="MANAGE" Width="100px" />
            </p>

            <asp:MultiView ID="MultiView1" runat="server" ActiveViewIndex="0">
                <asp:View ID="View1" runat="server">
                   <strong> Create a new project</strong><br />
                    </asp:View>
                        <asp:View ID="View2" runat="server">
                        <strong>Manage an existing project</strong><br />
                            Select a project:<asp:DropDownList ID="drpProjects" runat="server" DataSourceID="SqlDataSource1" DataTextField="project_name" DataValueField="project_name" AutoPostBack="True">
                            </asp:DropDownList>
                            <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ConnStringDb1 %>" SelectCommand="SELECT [project_name] FROM [projects]"></asp:SqlDataSource>
                            <br />
                            <br />
                            <asp:Label ID="lblProjName" runat="server" Visible="False" Font-Bold="True" Font-Overline="False" Font-Size="Medium" Font-Underline="False" ForeColor="#006699"></asp:Label>
                            <br />
                            <br />
                            <asp:GridView ID="grdProjDetails" runat="server" AutoGenerateColumns="False" DataKeyNames="project_id" DataSourceID="SqlDataSource2" Visible="False" BackColor="#CCCCCC" BorderColor="#999999" BorderStyle="Solid" BorderWidth="3px" CellPadding="4" CellSpacing="2" Font-Names="Verdana" Font-Size="Medium" ForeColor="Black" HorizontalAlign="Center" ShowFooter="True">
                                <Columns>
                                    <asp:TemplateField HeaderText="# ID" InsertVisible="False" SortExpression="project_id">
                                        <EditItemTemplate>
                                            <asp:Label ID="Label1" runat="server" Text='<%# Eval("project_id") %>'></asp:Label>
                                        </EditItemTemplate>
                                        <ItemTemplate>
                                            <asp:Label ID="Label1" runat="server" Text='<%# Bind("project_id") %>'></asp:Label>
                                        </ItemTemplate>
                                        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
                                    </asp:TemplateField>
                                    <asp:BoundField DataField="project_type" HeaderText="Type" SortExpression="project_type">
                                    <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
                                    </asp:BoundField>
                                    <asp:BoundField DataField="project_start" HeaderText="Start Date" SortExpression="project_start">
                                    <HeaderStyle HorizontalAlign="Center" VerticalAlign="Middle" />
                                    <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
                                    </asp:BoundField>
                                    <asp:BoundField DataField="project_finish" HeaderText="End Date" SortExpression="project_finish">
                                    <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
                                    </asp:BoundField>
                                    <asp:BoundField DataField="project_duration" HeaderText="Duration" SortExpression="project_duration">
                                    <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
                                    </asp:BoundField>
                                    <asp:BoundField DataField="project_budget" HeaderText="Budget" SortExpression="project_budget">
                                    <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
                                    </asp:BoundField>
                                    <asp:BoundField DataField="project_cost" HeaderText="Cost" SortExpression="project_cost">
                                    <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
                                    </asp:BoundField>
                                    <asp:BoundField DataField="project_manager_id" HeaderText="Project Manager #" SortExpression="project_manager_id">
                                    <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
                                    </asp:BoundField>
                                    <asp:BoundField DataField="team_leader_id" HeaderText="Team Leader #" SortExpression="team_leader_id">
                                    <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
                                    </asp:BoundField>
                                </Columns>
                                <EditRowStyle BorderStyle="Solid" />
                                <FooterStyle BackColor="#CCCCCC" BorderStyle="None" BorderWidth="0px" />
                                <HeaderStyle BackColor="Black" BorderColor="#003366" BorderStyle="None" BorderWidth="0px" HorizontalAlign="Center" VerticalAlign="Middle" Font-Bold="True" ForeColor="White" />
                                <PagerStyle BackColor="#CCCCCC" ForeColor="Black" HorizontalAlign="Left" />
                                <RowStyle BorderStyle="Solid" BackColor="White" BorderColor="Black" BorderWidth="2px" />
                                <SelectedRowStyle BackColor="#000099" Font-Bold="True" ForeColor="White" />
                                <SortedAscendingCellStyle BackColor="#F1F1F1" />
                                <SortedAscendingHeaderStyle BackColor="#808080" />
                                <SortedDescendingCellStyle BackColor="#CAC9C9" />
                                <SortedDescendingHeaderStyle BackColor="#383838" />
                            </asp:GridView>
                            <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:ConnStringDb1 %>" OldValuesParameterFormatString="original_{0}" SelectCommand="SELECT [project_id], [project_type], [project_start], [project_finish], [project_duration], [project_budget], [project_cost], [project_manager_id], [team_leader_id] FROM [projects] WHERE ([project_name] = @project_name) ORDER BY [project_start]">
                                <SelectParameters>
                                    <asp:ControlParameter ControlID="drpProjects" Name="project_name" PropertyName="SelectedValue" Type="String" />
                                </SelectParameters>
                            </asp:SqlDataSource>
                            &nbsp;<asp:Button ID="btnProjSettings" runat="server" BorderStyle="None" Text="VIEW PROFILE" Width="113px" />
                        </asp:View>
            </asp:MultiView>
            <br />
        </ContentTemplate>
    </asp:UpdatePanel>
<p>

    </p>
</asp:Content> 
```

母版页.aspx

```
<%@ Master Language="VB" CodeFile="MasterPage.master.vb" Inherits="MasterPage" %>
<%@ Import Namespace="System.Data.SqlClient" %>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<script runat="server">

    Protected Sub Page_Load(sender As Object, e As EventArgs)

        If Session("userid") = Nothing Then
            txtLoginUser.Visible = True
            txtLoginPass.Visible = True

        Else

            Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")
            Dim useridComm As String = "SELECT name, surname FROM users WHERE user_id=@userid"
            Dim sqlUserID As New SqlCommand

            conn.Open()

            Dim userid As String = Session("userid")

            sqlUserID = New SqlCommand(useridComm, conn)
            sqlUserID.Parameters.AddWithValue("@userid", userid)
            Dim datareader As SqlDataReader = sqlUserID.ExecuteReader()
            If datareader.HasRows Then

                FormsAuthentication.RedirectFromLoginPage(datareader("user_id"), True)
                lblLoggedIn.Text = datareader("name").ToString() & " " & datareader("surname").ToString()

            End If
            datareader.Close()
            conn.Close()

        End If
    End Sub

   Protected Sub Button1_Click(sender As Object, e As EventArgs)

        Dim loginSQL As New SqlCommand
        Dim loginComm As String

        Dim CommonFunctions As New CommonFunctions()
        Dim dec_pass As String = CommonFunctions.EncryptPassword(txtLoginPass.Text.Trim)

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")

        loginComm = "SELECT user_id FROM users WHERE username=@username and password=@password"

        conn.Open()

        loginSQL = New SqlCommand(loginComm, conn)
        loginSQL.Parameters.AddWithValue("@username", txtLoginUser.Text.ToString)
        loginSQL.Parameters.AddWithValue("@password", dec_pass)
        Dim dr As SqlDataReader = loginSQL.ExecuteReader()
        dr.Read()

        If dr.HasRows Then
            Session("userid") = dr("user_id")
        ElseIf dr.HasRows = False Then

            lblRegister.ForeColor = Drawing.Color.Red
            lblRegister.Text = "Incorrect Username/Password."
        End If
        dr.Close()
        conn.Close()

    End Sub

</script>

<head>
    <meta charset="utf-8" />
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <title></title>
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="style.css" type="text/css" media="screen, projection" />
</head>

<body>

    <form id="form1" runat="server">

<div id="wrapper">

    <header id="header">
        <strong>Header:</strong> Mobile CMS

        </header>

<section id="login">

    <div id="login-form">

         <p>

                    <asp:Label ID="lblUsername" runat="server" Font-Bold="True" Text="U:"></asp:Label>
&nbsp;<asp:TextBox ID="txtLoginUser" runat="server" BorderStyle="None" BorderWidth="0px" Wrap="False"></asp:TextBox>
&nbsp;
                    <asp:Label ID="lblUsername0" runat="server" Font-Bold="True" Text="P:"></asp:Label>
                    <asp:TextBox ID="txtLoginPass" runat="server" BorderStyle="None" BorderWidth="0px" TextMode="Password" Wrap="False"></asp:TextBox>
&nbsp;
                    <asp:Button ID="btnLogin" runat="server" BorderStyle="None" OnClick="Button1_Click" Text="Login" />

                </p>

                <p>

                    <asp:Label ID="lblRegister" runat="server" Font-Bold="True" Font-Underline="True" ForeColor="#0000CC" Text="Register"></asp:Label>

                    <asp:Label ID="lblLoggedIn" runat="server"></asp:Label>

                </p>
         <p>

                    &nbsp;</p>

    </div>

</section>

<div class="navigation-bar">
       <ul class="navigation-menu">

            <li><a href="#" class="home">Home</a></li>
            <li><a href="#" class="mainsettings">Settings</a></li>
            <li><a href="#" class="profile">Profile</a>

                <ul>
                    <li><a href="#" class="messages">Messages</a></li>
                    <li><a href="#" class="settings">Profile Settings</a></li>
                </ul>

            </li>
            <li><a href="#" class="uploads">Uploads</a></li>
            <li><a href="#" class="documents">Media</a>

                <ul>
                    <li><a href="#" class="docs">Documents</a></li>
                    <li><a href="#" class="others">Others</a></li>
                </ul>

            </li>

            <li><a href="#" class="projects">Projects</a>

                <ul>
                    <li><a href="#" class="yprojects">Your Projects</a></li>
                    <li><a href="#" class="otherprojects">Other Projects</a></li>
                </ul>

            </li>

        </ul>

    </div>

    <section id="middle">

        <div id="container">
            <div id="content">
                <div>
                    <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">

                    </asp:ContentPlaceHolder>
                </div>
        </div>
        </div>

    </section>

    <footer id="footer">
        <strong>Footer:</strong> adsfdsgfds
    </footer>

</div>

    </form>

</body>
</html> 
```

我在 Win 7 Ultimate 上使用 VB.NET/ASP.NET 和 SQL-Server-2012。

可能是因为我有不止一个数据阅读器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:33:17.563

您没有在 Page_Load 中执行任何代码，那么为什么您的页面要继续加载呢？`Buttons_Click`此外，您的数据库调用（关闭和打开连接）过多`Dropdowns_SelectedIndexChanged`

我怀疑你`SelectedIndexChanged`的下拉事件。当页面加载为项目添加到下拉列表时，也会调用此事件。这会触发事件，并且每次为下拉列表中的每个项目触发事件时都可能连接到数据库

采取`SelectedIndexChanged`并尝试再次加载页面

# android - Android终端IDE：终端gcc错误：未找到arm-eabi-gcc

> ID：15868530
> 
> 赞同：6
> 
> 时间：2013-04-07T22:20:21.970
> 
> 标签：android, gcc, ide, terminal-ide

我使用[Terminal-IDE](http://Terminal-IDE.com/)作为我的开发环境。（[谷歌代码网站在这里。](http://code.google.com/p/terminal-ide/)）

我正在运行 Terminal-IDE v 2.02 - 最新的。我的安卓版本是：

*   安卓 4.0.3
*   软件版本 2.14.531.3 71ORD
*   （其余的可能不太相关，但应要求提供更多）

我在一个合适的开发目录中，准备好足够简单的 c 源代码文件并运行“make”。

我还没有任何编译成功。最有可能的是，在可用的可执行文件与软件正在寻找的内容方面存在版本不匹配。

这是命令和错误消息：

```
terminal-gcc -c -Wall -I/data/data/com.spartacusrex.spartacuside/files/local/include tester.c -o tester.o
/data/data/com.spartacusrex.spartacuside/files/system/bin/terminal-gcc[43]: arm-eabi-gcc: not found
make: *** [tester.o] Error 127 
```

斯纳夫，当然。我完全不确定如何找出正确的编译器文件名应该是什么，因为在这款非 root 手机上，我没有权限通过 PATH 搜索并找到实际的可执行文件。

也可能是PATH设置错误。所有输入表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T01:47:50.333

...我不确定会发生什么，但我在 Terminal-IDE 目录树中找到了该文件：

```
$IDESYSTEM/android-gcc-4.4.0.tar.gz 
```

我还发现**terminal-gcc**是一个 bash 脚本。看里面似乎说 gcc 树应该存在于**"$HOME"**中，这是安装目录。所以，我解压缩，然后解压缩上面确定的文件并将生成的目录树作为顶级子目录。

好吧，你知道什么？成功。

我更进一步，在 ~/bin 中为**gcc**和**cc**创建了到实际编译器的软链接，突然间，我之前创建的所有**“Makefile”**脚本在我想要转移的其他项目中使用，开始完美运行。

显然，即使我认为我做得对，我还是忽略了运行这个脚本：

```
./system/bin/install_gcc 
```

它像我一样提取焦油，但不会创建您可能需要的链接。

嘿，如果你很高兴我比你先到这里，请竖起大拇指！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-31T13:06:01.827

感谢@Richard T 对*Terminal IDE*的热情。答案旨在列举运行 C 代码所需的步骤。

## **运行 C 代码**

1.  运行*终端 IDE*并通过执行提取*gcc*包

    **install_gcc**

2.  Create a directory for your projects within the *Terminal IDE* directory tree. Then in the directory create a source *.c* file with some code (*filename.c* here). Compile it

    **terminal-gcc -c filename.c**

3.  Create the executable file

    **terminal-gcc filename.o -o filename.out**

4.  Run the output file

    **./filename.out**

* * *

If you'd like to use the PC (laptop) keyboard you can telnet *Terminal IDE*.

## **To Telnet Terminal IDE**

1.  From *Terminal IDE* start the *telnetd* deamon by executing

    **telnetd**

2.  Connect the *Android* device to the PC (laptop) and type

    **adb forward tcp:[port] tcp:8080**

    **telnet 127.0.0.1 [port]**

P.S. *Telnet's* default port is 23.

# java - 移动数组中的元素？

> ID：15868533
> 
> 赞同：0
> 
> 时间：2013-04-07T22:20:31.833
> 
> 标签：java, arrays, string, elements, shift

我想做一些让琴弦有序向上移动的东西。例如：

迭代 1：

```
Hello There
I am
Asking a question
To you 
```

迭代 2：

```
I am 
Asking a question
To you
Next String 
```

我将如何以最不占用内存的方式来解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:28:54.207

一个简单的方法是[循环队列](http://en.wikipedia.org/wiki/Circular_buffer)。

循环队列可以实现为一个数组和一个指向第一个索引的指针。当你想改变第一个元素时，你只需要提前索引。当索引通过数组的末尾时，它会回滚到索引 0。

使用循环队列：

*   向上移动字符串不需要移动数组中的任何内容。
*   队列中的所有条目都可以存储在一个数组中，这比链接实现需要更少的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T22:32:36.753

如果您没有义务使用数组，我会建议使用队列，用它来实现您想要做的事情相当简单。

```
Queue<String> foo = new Queue<String>();
foo.offer("Hello"); //first element is hello
foo.offer("world"); //second element is world
String s = foo.poll(); //s = hello and now the first element of the queue is world 
```

# java - 为什么 java 安全管理器既不禁止创建 new Thread() 也不禁止启动它？

> ID：15868534
> 
> 赞同：13
> 
> 时间：2013-04-07T22:20:36.233
> 
> 标签：java, multithreading, securitymanager

您是否知道解释为什么 java 安全管理器不禁止创建新线程或启动它们？new FileWriter 在安全管理器下，但 new Thread() 和 threadInstance.start() 都不是安全管理器下的，并且可以调用。

1.  禁止它不是有用吗？
2.  实施起来会不会很困难？
3.  或者创建和启动新线程与禁止它无关？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-06-25T01:59:30.343

使用标准 Java SecurityManager 定义阻止代码创建和启动新线程的安全策略是不可能的。

假设您有以下代码：

```
public class Test {
  public static void main(String [] args) {
    System.out.println(System.getSecurityManager() != null ? "Secure" : "");
    Thread thread = new Thread(
      new Runnable() { 
        public void run() {
          System.out.println("Ran");
        }
    });
    thread.start();
  }
} 
```

并使用以下命令运行它：

```
java -Djava.security.manager -Djava.security.policy==/dev/null Test 
```

它会运行得很好并输出：

```
Secure
Ran 
```

即使我们将安全策略设置为 /dev/null，这将对任何代码授予零权限。因此，不可能授予更少的权限来阻止代码创建该线程。

这是因为标准 java.lang.SecuritManager 仅在代码尝试在根 ThreadGroup 中创建线程时执行权限检查。同时，SecurityManager 的 getThreadGroup 方法总是返回当前 Thread 的线程组，它永远不会是根线程组，所以总是会授予创建新 Thread 的权限。

One way to get round this is to subclass java.lang.SecurityManager and override the getThreadGroup method to return the root ThreadGroup. This will then allow you to control whether code can create threads based on whether it has the java.lang.RuntimePermission "modifyThreadGroup".

So if we now define a subclass of SecurityManager as follows:

```
public class ThreadSecurityManager extends SecurityManager { 

  private static ThreadGroup rootGroup;

  @Override
  public ThreadGroup getThreadGroup() {
    if (rootGroup == null) {
      rootGroup = getRootGroup();
    }
    return rootGroup;
  }

  private static ThreadGroup getRootGroup() {
    ThreadGroup root =  Thread.currentThread().getThreadGroup();
    while (root.getParent() != null) {
     root = root.getParent();
    }
    return root;
  }
} 
```

and then run our command again, but this time specifying our subclassed ThreadSecurityManager:

```
java -Djava.security.manager=ThreadSecurityManager -Djava.security.policy==/dev/null Test 
```

We get an exception in our Test class when we try to create the new thread:

```
Exception in thread "main" java.security.AccessControlException: access denied ("java.lang.RuntimePermission" "modifyThreadGroup") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T22:51:37.443

在 Thread 构造函数中执行访问检查，以查看调用者是否有权更改将添加新线程的 ThreadGroup。这就是您将如何实施安全策略以禁止创建新线程的方式。

（还有另一个检查 ThreadGroups 的创建...检查您是否有权将新组添加到其父组。）

所以回答你的问题：

> 为什么 java 安全管理器既不禁止创建 new Thread() 也不禁止启动它？

原因是您的 JVM 当前的安全策略允许父线程修改其`ThreadGroup`. 您应该能够修改该策略设置以防止这种情况发生，从而防止创建子线程。

> 禁止它不是有用吗？

这是。允许不受信任的代码创建/启动线程是不明智的，因为：1）一旦启动的线程就不能被安全地杀死，以及 2）创建/启动大量线程会使 JVM（可能还有操作系统）陷入困境。

> 实施起来会不会很困难？

从您的角度来看，只需更改政策即可。

# php - 网络爬虫不跟随页面的链接

> ID：15868536
> 
> 赞同：0
> 
> 时间：2013-04-07T22:21:00.533
> 
> 标签：php, regex, web-crawler

我构建了一个简单的网络爬虫，它在`<body>`. 它做得很好，唯一的问题是它没有跟随页面上的链接转到它递归爬取的其他页面。

在输出中，我只看到手动启动爬虫的页面内容，没有迹象表明它正在跟踪链接。

我怎样才能让它跟随链接、爬取这些页面并回显它们的内容？

这是代码：

```
<?php
error_reporting( E_ERROR );

define( "CRAWL_LIMIT_PER_DOMAIN", 50 );

$domains = array();

$urls = array();

function crawl( $url )
{
    global $domains, $urls;
    $parse = parse_url( $url );
    $domains[ $parse['host'] ]++;
    $urls[] = $url;

    $content = file_get_contents( $url );
    if ( $content === FALSE ){
        return;
    }

    $content = stristr($content, "<body>");
    preg_match_all( '/http:\/\/[^ "\']+/', $content, $matches );

    // do something with content.
    echo strip_tags($content);

    foreach( $matches[0] as $crawled_url ) {
        $parse = parse_url( $crawled_url );
        if ( count( $domains[ $parse['host'] ] ) < CRAWL_LIMIT_PER_DOMAIN && !in_array(   $crawled_url, $urls ) ) {
            sleep( 1 );
            crawl( $crawled_url );
        }
    }
}

crawl('http://the-irf.com/hello/hello6.html');
?> 
```

**更新：**我假设正则表达式（ /http://[^ "\']+/ ）有问题。如何实现一个遵循所有锚点的所有 href 的正则表达式，无论它们以

```
http://
http:/www.
www.
https://
https://www. 
```

或其他任何东西（例如像 index.html 这样的绝对文件路径）？或者有没有更好的方法来做这个正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:51:51.037

你应该（像往常一样）首先下定决心你实际上在做什么。

正如您在问题中概述的那样，您正在对 HTTP 协议的 URL 模式进行文本搜索。一个常见的正则表达式通常也包括`https:`URI 方案：

```
~https?://\S*~ 
```

这就是第一个空格之前的所有内容。这通常可以在字符串中检测更大范围的 HTTP URL。如果您需要更高级的内容，请参阅 Stackover Q&A 关于使文本链接可点击的内容：

*   [如何匹配文本中的 URI？](https://stackoverflow.com/q/82398/367456)
*   [如何从段落中提取http链接并将它们存储在php的数组中](https://stackoverflow.com/q/6861324/367456)

这仍然不能解决您所有的爬虫问题。有两个原因：

1.  Character encoding: If you want to properly do that, you need to know the correct character encoding of the string and make the regular expression fitting for it.
2.  That is text. Websites not only consist of text but also of HTML which carries its own semantics.

So actually doing text-analysis alone is not enough. You also need to parse HTML. That means you need to take the Base URI and resolve each other URI inside the document against it to obtain the list of all absolute links in that document.

You find this outlined in the following whitepaper:

*   [5\. Reference Resolution in](https://www.rfc-editor.org/rfc/rfc3986#section-5) [RFC3986: Uniform Resource Identifier (URI): Generic Syntax](https://www.rfc-editor.org/rfc/rfc3986)

For PHP the two most stable components to work with for this are:

1.  [`DOMDocument`](http://php.net/DOMDocument) - A PHP extension to parse XML and HTML documents. Here you are looking for parsing HTML documents naturally.
2.  [`Net_Url2`](http://pear.php.net/package/Net_URL2/) - A PEAR extension to deal with URLs including RFC3986 conform reference resolution (the differences to the previous version you can safely ignore, the standard is pretty stable as the PHP library is, two minor bugs in very narrow and specific cases are still open but have patches).

# linux - 在 Fedora 19 中直接打开 Play Framework

> ID：15868537
> 
> 赞同：0
> 
> 时间：2013-04-07T22:21:10.087
> 
> 标签：linux, playframework, playframework-2.0, fedora

我有一个问题。我是 Fedora 和框架的新手。在 Play Framework 文档中说：

```
On UNIX systems, this means doing something like: 
export PATH=$PATH:/relativePath/to/play 
```

所以我在 ./bashrc 中做了：

```
#PATH 
export PATH=$PATH:/home/jx/Frameworks/play2 
```

问题是我无法在任何地方打开框架。（IE$播放帮助）。

我只能打开如下：

```
[root@localhost play2]# ./play help 
```

也就是说，我必须去框架的目录。

提前致谢。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:36:09.287

您编辑了路径信息，`./bashrc`而您应该编辑`~/.bashrc`.

一旦你编辑了正确的文件，你可以使用它直接启动`. ~/.bashrc`（你必须在每个*已经打开*的终端中这样做）或者只是......重新启动你的会话。

# ios - 无法从其内容设置 UITextView 高度

> ID：15868539
> 
> 赞同：2
> 
> 时间：2013-04-07T22:21:13.440
> 
> 标签：ios, xcode, uitableview, height

我正在尝试根据它将显示的文本量设置 UITextView 的高度。我在这里找到了这个解决方案：

```
CGRect frame = _textView.frame;
frame.size.height = _textView.contentSize.height;
_textView.frame = frame; 
```

但我无法让它工作，我认为这与我没有正确使用 addSubview 将 UITextView 添加到视图有关，但我无法弄清楚！我相信这是一个很容易解决的问题。

这是我的 viewcontroller.m 文件代码

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize textView = _textView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [self.view addSubview: _textView];

    CGRect frame = _textView.frame;
    frame.size.height = _textView.contentSize.height; 
    _textView.frame = frame;

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T22:25:13.440

`viewDidLoad`由于尚未设置 textView 框架，因此您无法执行此操作。

以更合适的方法移动您的代码，例如`viewWillAppear:`或`viewDidLayoutSubviews`

```
- (void)viewWillAppear:(BOOL)animated {
   [super viewWillAppear:animated];

   CGRect frame = _textView.frame;
   frame.size.height = _textView.contentSize.height;
   _textView.frame = frame;
} 
```

如果您想更好地了解`UIViewController`视图的生命周期，您可能需要查看[这个非常好的答案](https://stackoverflow.com/a/6758424/846273)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:36:37.050

Instead of waiting for the Content Size, which you will get in ViewWillAppear, why dont you try this:

*   Find the height a particular text will need using `- (CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size lineBreakMode:(NSLineBreakMode)lineBreakMode`
*   Set that to the frame of the textview directly.

And this is something that you can achieve in the `- (void)viewDidLoad` method itself.

```
- (void)viewDidLoad {
    NSString *aMessage = @""; // Text
    UIFont *aFont = [UIFont systemFontOfSize:20]; // Font required for the TextView
    CGFloat aTextViewWidth = 180.00; // Widht of the TextView
    CGSize aSize = [aMessage sizeWithFont:aFont constrainedToSize:CGSizeMake(aTextViewWidth, MAXFLOAT) lineBreakMode:NSLineBreakByWordWrapping];
    CGFloat aTextViewHeight = aSize.height;

    UITextView *aTextView = [[UITextView alloc] initWithFrame:CGRectMake(0, 0, aTextViewWidth, aTextViewHeight)];
    // Rest of your Code...
} 
```

# video - 如何在 YouTube 视频标题中添加关键字

> ID：15868540
> 
> 赞同：0
> 
> 时间：2013-04-07T22:21:23.467
> 
> 标签：video, youtube, add, title, keyword

我有一个 YouTube 模块，每天从一些 youtube 用户帐户中抓取视频。我想知道，如何在 YouTube 视频标题中添加额外的关键字？

原标题：乔恩迈克尔 - 视频

我想将标题更改为 - Jon Michael - Video - Hot Clip

这是我用来将 YouTube 视频导入我的网站的脚本模块。

错误报告（0）；$feedURL = ' [http://gdata.youtube.com/feeds/api/users/](http://gdata.youtube.com/feeds/api/users/) '.$username.'/uploads?orderby=published&start-index=1&max-results=50';

```
$sxml = @simplexml_load_file($feedURL);
//print_r($sxml);
if($sxml)
    {
    // get summary counts from opensearch: namespace
    $counts = $sxml->children('http://a9.com/-/spec/opensearchrss/1.0/');

    echo "Total Videos=".$counts."<br/>";

    $_SESSION['total'] = ceil($counts->totalResults);
    $i='0';
    $_SESSION['page'] = 1;
    // iterate over entries in feed
    foreach ($sxml->entry as $entry) {

        // get nodes in media: namespace for media information
        $media = $entry->children('http://search.yahoo.com/mrss/');

        // get video player URL
        $attrs = $media->group->player->attributes();
        $watch = $attrs['url']; 

        // get video thumbnail
        $attrs = $media->group->thumbnail[0]->attributes();
        $thumbnail = $attrs['url']; 

        // get <yt:duration> node for video length
        $yt = $media->children('http://gdata.youtube.com/schemas/2007');
        $attrs = $yt->duration->attributes();
        $length = $attrs['seconds']; 

        // get <yt:stats> node for viewer statistics
        $yt = $entry->children('http://gdata.youtube.com/schemas/2007');
        $attrs = $yt->statistics->attributes();
        $viewCount = @$attrs['viewCount']; 

        // get <gd:rating> node for video ratings
        $gd = $entry->children('http://schemas.google.com/g/2005'); 
        if ($gd->rating) {
            $attrs = $gd->rating->attributes();
            $rating = $attrs['average']; 
        } else {
            $rating = 0; 
        } 

        $published = (string)$entry->published;
        $publishedDate = strtotime($published);

        $arr[] = array(
                        'title' => addslashes((string)$media->group->title),
                        'description' => addslashes((string)$media->group->description),
                        'url' => (string)$watch,
                        'thumbnail' => (string)$thumbnail,
                        'duration' => (string)$length,
                        'views' => (string)$viewCount,
                        'rating' => (string)$rating,
                        'published' => $publishedDate
                    );  
        $i++;
    }
}

foreach($arr as $key=>$val)
    {
    $title=$val[title];
    $description=$val[description];
    $thumb=$val[thumbnail];
    $duration=$val[duration];
    $views=$val[views];
    $rating=$val[rating];
    $publish=$val[published];

    $url2=$val[url];
    $urlexp=explode('&',$url2);
    $url=$urlexp[0];

    $urlexp=explode('?v=',$url);
    $youtube_key=$urlexp[1];

    $tags=$title;

    echo '<b>Title</b>='.$title;
    echo '<br/><b>Description</b>='.$description;
    echo '<br/><b>Url</b>='.$url;
    echo '<br/><b>Thumb</b>='.$thumb;
    echo '<br/><b>Duration</b>='.$duration;
    echo '<br/><b>Views</b>='.$views;
    echo '<br/><b>Rating</b>='.$rating;
    echo '<br/><b>Publish</b>='.$publish;

    $er="select VIDEOID from videos where youtube_key='".$youtube_key."'";

    $chkExist=mysql_query($er) or die(mysql_error());
    if(mysql_num_rows($chkExist)=='0')
        {
        $date=date('Y-m-d',strtotime(now));

        $query = mysql_query("INSERT INTO videos(USERID,title,description,tags,categories,filesize,time_added,date_added,featured,viewcount,runtime,public,rating,allowcomments,allowratings,allowembeds,allowdownloads,active,mature,youtube_embed,youtube_key) values('4','".mysql_real_escape_string($title)."','".mysql_real_escape_string($description)."','".$tags."','".$cat."','0','".strtotime(now)."','".$date."','1','".mysql_real_escape_string($views)."','".mysql_real_escape_string($duration)."','1','".mysql_real_escape_string($rating)."','1','1','1','1','1','0','1','".mysql_real_escape_string($youtube_key)."')");
        $videoid = mysql_insert_id();
        $sql = mysql_query("UPDATE videos SET video_name='".$videoid.".flv' WHERE VIDEOID ='".$videoid."'");

        $thumbname=$videoid.'-1.jpg';
        $thumbname2=$videoid.'-2.jpg';
        $thumbname3=$videoid.'-3.jpg';

        $thumb1='http://i.ytimg.com/vi/'.$youtube_key.'/1.jpg';
        $thumb2='http://i.ytimg.com/vi/'.$youtube_key.'/2.jpg';
        $thumb3='http://i.ytimg.com/vi/'.$youtube_key.'/3.jpg';;

        copy($thumb1,'images/videothumbs/'.$thumbname);
        copy($thumb2,'images/videothumbs/'.$thumbname2);
        copy($thumb3,'images/videothumbs/'.$thumbname3);
        }
    elseif(mysql_num_rows($chkExist))   
        {
        echo 'Already Exists';
        }
    echo '<br/><br/><hr size="1"/>';

    } 
```

# perl - 在 perl 中匹配 $END$

> ID：15868542
> 
> 赞同：1
> 
> 时间：2013-04-07T22:21:43.380
> 
> 标签：perl

当我使用这条线时：

```
if (m/^$END$/g) { 
    # ...
} 
```

在我的代码中，编译器认为我正在我的代码中搜索静态'END$'，而我想搜索字符串“$END$”。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T22:24:40.837

要匹配文字`$`，只需使用反斜杠对其进行转义：

```
if (m/^\$END\$/) { ... } 
```

删除了`/g`不应该存在的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T22:57:01.647

```
if (/\A\Q $END$ /x) { ... } 
```

[perldoc perlreref](http://perldoc.perl.org/perlreref.html)：

> `\Q` 禁用模式元字符，直到`\E`

删除了`/g`不应该存在的内容。

# heroku - 设计在本地工作但不在heroku上工作

> ID：15868544
> 
> 赞同：2
> 
> 时间：2013-04-07T22:21:59.113
> 
> 标签：heroku, devise, ruby-on-rails-3.2

我有一个使用 devise + cancan的应用程序[http://agile2go.herokuapp.com/ 。](http://agile2go.herokuapp.com/)

在本地运行应用程序可以正常运行，但是当部署在 Heroku 上时，`sign_up`页面会显示错误消息。但是，登录页面工作正常！

我知道问题是在 simple_form_for 中调用资源时，当我取出资源时它起作用了：

```
<%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:class => 'form-horizontal' }) do |f| %> 
```

它在`sign_in`页面上工作！

这是我的路线.rb

```
authenticated :user do 
  root :to => "home#index"
end
root :to => "home#index"     
devise_for :users, :path => "auth" 
```

单击链接时在导航栏上：

```
<li><%= link_to 'Login', new_user_session_path %></li>//works
<li><%= link_to 'Sign up', new_user_registration_path %></li>//does not work 
```

最后 Heroku 记录：

```
2013-04-07T21:55:15+00:00 app[web.1]: Started GET "/auth/sign_up" for 177.143.148.73 at    2013-04-07 21:55:15 +0000
2013-04-07T21:55:16+00:00 app[web.1]: 
2013-04-07T21:55:16+00:00 app[web.1]:     4: <%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:class => 'form-horizontal' }) do |f| %>
2013-04-07T21:55:16+00:00 app[web.1]: ActionView::Template::Error (undefined method `name' for #<User:0x00000004317050>):
2013-04-07T21:55:16+00:00 app[web.1]:     5:   <%= f.error_notification %>
2013-04-07T21:55:16+00:00 app[web.1]:     9:   <%= f.input :password, :placeholder => 'Password', :required => true, input_html: { class: 'text_field input-xlarge' } %>
2013-04-07T21:55:16+00:00 app[web.1]:     10:   <%= f.input :password_confirmation, :placeholder => 'Confirmation', :required => true, input_html: { class: 'text_field input-xlarge' } %>
2013-04-07T21:55:16+00:00 app[web.1]:     8:   <%= f.input :email, :placeholder => 'Email', :required => true, input_html: { class: 'text_field input-xlarge' } %>
2013-04-07T21:55:16+00:00 app[web.1]:     7:   <%= f.input :name, :placeholder => 'Name', :autofocus => true, input_html: { class: 'text_field input-xlarge' } %>
2013-04-07T21:55:16+00:00 app[web.1]:   app/views/devise/registrations/new.html.erb:7:in `block in _app_views_devise_registrations_new_html_erb__4395295283282032383_35150600'
2013-04-07T21:55:16+00:00 app[web.1]:   app/views/devise/registrations/new.html.erb:4:in `_app_views_devise_registrations_new_html_erb__4395295283282032383_35150600'
2013-04-07T21:55:16+00:00 app[web.1]: 
2013-04-07T21:55:16+00:00 app[web.1]:     6:   <%= display_base_errors resource %>  
2013-04-07T21:55:16+00:00 app[web.1]: 
2013-04-07T21:55:16+00:00 heroku[router]: at=info method=GET path=/auth/sign_up host=agile2go.herokuapp.com fwd="177.143.148.73" dyno=web.1 connect=2ms service=228ms status=500 bytes=643 
```

我不知道为什么它说未定义`name`的方法`#<User:0x00000004317050>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-04T16:35:55.787

我刚刚遇到了同样的问题 -`raking`为我解决了这个问题。在你的控制台中试试这个：

```
$ heroku run rake db:migrate 
```

# java - 使 JFrame 中的所有组件适合窗口的实际大小

> ID：15868553
> 
> 赞同：0
> 
> 时间：2013-04-07T22:23:06.147
> 
> 标签：java, swing, layout, awt, layout-manager

我正在使用 NetBeans。如何使窗口中的所有组件调整为窗口的实际大小？现在，当我的窗口为 800x600 并且我将其放大时，所有组件的大小都是相同的。当我更改打开的应用程序窗口的大小时，我想更改组件的大小。

我试图在互联网上搜索答案，但我找不到我的问题的好答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:26:34.243

> 我试图在互联网上搜索答案，但我找不到我的问题的好答案。

我觉得很难相信。

论坛中几乎所有其他问题都与布局组件有关。标准答案是使用布局管理器。阅读 Swing 教程中关于[使用布局管理](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)器的部分以获取更多信息。我们无法提供具体信息，因为我们不知道您的 GUI 是什么样的。

# c - 在 RAM 初始化之前使用 #defined 值

> ID：15868557
> 
> 赞同：6
> 
> 时间：2013-04-07T22:23:18.067
> 
> 标签：c, arm, c-preprocessor, linker-scripts

我正在为 ARM CPU 编写启动代码。没有内部 RAM，但有 1GB 的 DDRAM 连接到 CPU，在初始化之前无法直接访问。代码存储在闪存中，初始化 RAM，然后将自身和数据段复制到 RAM 并在那里继续执行。我的程序是：

```
#define REG_BASE_BOOTUP 0xD0000000
#define INTER_REGS_BASE REG_BASE_BOOTUP

#define SDRAM_FTDLL_REG_DEFAULT_LEFT            0x887000

#define DRAM_BASE               0x0
#define SDRAM_FTDLL_CONFIG_LEFT_REG (DRAM_BASE+ 0x1484)
... //a lot of registers

void sdram_init() __attribute__((section(".text_sdram_init")));

void ram_init()
{
  static volatile unsigned int* const sdram_ftdll_config_left_reg = (unsigned int*)(INTER_REGS_BASE + SDRAM_FTDLL_CONFIG_LEFT_REG);
  ... //a lot of registers assignments

  *sdram_ftdll_config_left_reg = SDRAM_FTDLL_REG_DEFAULT_LEFT;
} 
```

目前我的程序无法正常工作，因为寄存器值最终被链接到 RAM，而此时程序试图访问它们只有闪存可用。

我怎样才能更改我的链接描述文件或我的程序，以便这些值在闪存中有它们的地址？有没有办法可以在文本段中包含这些值？

当它们在文件范围内声明时，这些定义的值实际上是全局数据还是静态数据？

编辑：

目标文件与以下链接描述文件链接：

```
MEMORY 
{                                                                                                             
RAM (rw)    : ORIGIN = 0x00001000, LENGTH = 12M-4K                                
ROM (rx)    : ORIGIN = 0x007f1000, LENGTH = 60K
VECTOR (rx) : ORIGIN = 0x007f0000, LENGTH = 4K   
}
SECTIONS
{
    .startup :
    {
    KEEP((.text.vectors))
    sdram_init.o(.sdram_init)
    } > VECTOR
...
} 
```

从寄存器分配反汇编：

```
 *sdram_ftdll_config_left_reg = SDRAM_FTDLL_REG_DEFAULT_LEFT;
  7f0068:       e59f3204        ldr     r3, [pc, #516]  ; 7f0274 <sdram_init+0x254>
  7f006c:       e5932000        ldr     r2, [r3]
  7f0070:       e59f3200        ldr     r3, [pc, #512]  ; 7f0278 <sdram_init+0x258>
  7f0074:       e5823000        str     r3, [r2]
  ...
  7f0274:       007f2304        .word   0x007f2304
  7f0278:       00887000        .word   0x00887000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T22:44:01.897

直接回答您的问题 -`#defined`值不会存储在程序中的任何地方（可能在调试部分除外）。宏在编译时会扩展，就像您在函数中键入它们一样，例如：

```
*((unsigned int *) 0xd0010000) = 0x800f800f; 
```

作为编译代码的一部分，这些值最终会出现在文本段中。

这里更有可能的是你做错了其他事情。在我的脑海中，我的第一个猜测是您的堆栈未正确初始化，或者位于尚不可用的内存区域中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:44:48.767

有几个选项可以解决这个问题。

1.  使用`PC`相对数据访问。
2.  使用自定义`linker script`.
3.  使用汇编程序。

## 使用`PC`相对数据访问

这种方法的问题是你必须知道编译器如何生成代码的细节。`#define register1 (volatile unsigned int *)0xd0010000UL`是它被存储为从链接的 SDRAM 地址加载的静态变量。

```
 7f0068:      ldr     r3, [pc, #516]  ; 7f0274 <sdram_init+0x254>
  7f006c:      ldr     r2, [r3]  ; !! This is a problem !!
  7f0070:      ldr     r3, [pc, #512]  ; 7f0278 <sdram_init+0x258>
  7f0074:      str     r3, [r2]
  ...
  7f0274:     .word   0x007f2304  ; !! This memory doesn't exist.
  7f0278:     .word   0x00887000 
```

你必须这样做，

```
 void ram_init()
 {
     /* NO 'static', you can not do that. */
     /* static */ volatile unsigned int* const sdram_reg = 
         (unsigned int*)(INTER_REGS_BASE + SDRAM_FTDLL_CONFIG_LEFT_REG);
     *sdram_ftdll_config_left_reg = SDRAM_FTDLL_REG_DEFAULT_LEFT;
 } 
```

或者您可能更喜欢在汇编程序中实现它，因为对于您可以在这里做什么和不能做什么可能很迟钝。上面`C`代码的主要作用是每一件事都是计算的或`PC`相对的。如果您选择**不**使用链接描述文件，则必须如此。正如[Duskwuff](https://stackoverflow.com/users/149341/duskwuff)指出的那样，您也可能遇到堆栈问题。如果您没有可以用作*临时堆栈*的 ETB 内存等，那么最好在汇编程序中对其进行编码。

## 链接器脚本

See [gnu linker map...](https://stackoverflow.com/questions/14453996/gnu-linker-map-file-giving-unexpected-load-addresses) and many other question on using a linker script in this case. If you want specifics, you need to give actual addresses use by the processor. With this option you can [annotate your function](http://gcc.gnu.org/onlinedocs/gcc-4.8.0/gcc/Function-Attributes.html) to specify which section it will live in. For instance,

```
void ram_init() __attribute__((section("FLASH"))); 
```

In this case, you would use the Gnu Linkers `MEMORY` statement and `AT` statements to put this code at the *flash address* where you desire it to run from.

## Use assembler

Assembler gives you full control over memory use. You can garentee that no stack is used, that no non-`PC` relative code is generated and it will probably be faster to `boot`. Here is some `table` driven ARM assembler I have used for the case you describe, initializing an SDRAM controller.

```
 /* Macro for table of register writes. */
 .macro DCDGEN,type,addr,data
 .long \type
 .long \addr
 .long \data
 .endm
 .set FTDLL_CONFIG_LEFT, 0xD0001484

 sdram_init:
 DCDGEN 4, FTDLL_CONFIG_LEFT, 0x887000
 1:

 init_sdram_bank:
         adr     r0,sdram_init
         adr     r1,1b
 1:
         /* Delay. */
         mov     r5,#0x100
 2:      subs    r5,r5,#1
         bne     2b

         ldmia   r0!, {r2,r3,r4} /* Load DCD entry. */
         cmp     r2,#1           /* byte? */
         streqb  r4,[r3]         /* Store byte... */
         strne   r4,[r3]         /* Store word. */

         cmp     r0,r1           /* table done? */
         blo     1b

         bx lr

         /* Dump literal pool. */
        .ltorg 
```

Assembler has many benefits. You can also clear the `bss` section and setup the `stack` with simple routines. There are many on the Internet and I think you can probably code one yourself. The `gnu ld` script is also beneficial with assembler as you can ensure that sections like `bss` are aligned and a multiple of 4,8,etc. so that the clearing routine doesn't need special cases. Also, you will have to copy the `code` from *flash* to SDRAM after it is initialized. This is a fairly *expensive/long running* task and you can speed it up with some short assembler.

# c# - 在两个 DB SQLITE 之间复制

> ID：15868561
> 
> 赞同：1
> 
> 时间：2013-04-07T22:23:41.967
> 
> 标签：c#

我有两个数据库：

**Country1.sqlite**已满，**Country2.sqlite**为空。

我想使用 C# 在 Country2.sqlite 中复制 Country1.sqlite 的表。我能怎么做？

谢谢！

# jquery - 有没有更简单的方法来使用 jQuery 调用这些函数？

> ID：15868565
> 
> 赞同：1
> 
> 时间：2013-04-07T22:24:18.590
> 
> 标签：jquery

而不是使用

```
<input value="" type=text id="DPRnumber" onkeydown="javascript:backspacerDOWN(this,event);" onkeyup="javascript:backspacerUP(this,event);"> 
```

有没有更简单的方法来使用 jQuery 调用这些函数？就像是：

```
$('#DPRnumber').on('onkeydown', 'input', function(e) { ... I don't know ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:28:26.283

你有正确的想法。使用 jQuery[`.on()`](http://api.jquery.com/on/)处理多个事件。

尝试这个：

```
$('#DPRnumber').on({
  keydown: function(event) {
    backspacerDOWN(this, event);
  },
  keyup: function(event) {
    backspacerDOWN(this, event);
  }
}); 
```

**编辑**：

尽管我们不知道您的`backspacerDOWN()`函数到底在做什么，但如果您不想使用`this`，那么只需将所有出现的 替换`this`为`document.getElementById('DPRnumber')`：

```
$('#DPRnumber').on({
  keydown: function(event) {
    backspacerDOWN(document.getElementById('DPRnumber'), event);
  },
  keyup: function(event) {
    backspacerDOWN(document.getElementById('DPRnumber'), event);
  }
}); 
```

# php - 如何动态设置日期范围变量并重绘 Google 图表？

> ID：15868566
> 
> 赞同：7
> 
> 时间：2013-04-07T22:24:27.407
> 
> 标签：php, javascript, google-api, google-visualization, redraw

我正在使用 PHP 来设置创建 Google 折线图的日期范围。对于范围内的每个日期，设置一个变量 ($running_balance) 以使用数据库中的数据在折线图上创建点。我希望能够设置变量 $end，它本质上动态地确定日期范围，但我不确定如何执行此操作，以便根据这个新范围重新绘制图表。我知道我可以创建一个包括`drawChart();`重绘图表的新函数，我将使用三个按钮将日期范围设置为 1 年、3 个月或 1 个月，但我不确定如何将所有这个一起。这是我目前拥有的代码：

```
$begin = new DateTime(date('Y-m-d', strtotime('+1 days')));
$end = new DateTime(date('Y-m-d', strtotime('+365 days')));
$interval = DateInterval::createFromDateString('1 day');
$period = new DatePeriod($begin, $interval, $end);

foreach ( $period as $dt ) {

$date_display = $dt->format("D j M");

.....  code to generate $running_balance .....

$temp = array();

    $temp[] = array('v' => (string) $date_display); 
    $temp[] = array('v' => (string) $running_balance);
    $temp[] = array('v' => (string) $running_balance);
    $rows[] = array('c' => $temp);
}

$table['rows'] = $rows;
$jsonTable = json_encode($table);

<script type="text/javascript">

    // Load the Visualization API and the piechart package.
    google.load('visualization', '1', {'packages':['corechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawChart);

    var table = <?php echo $jsonTable; ?>;

    function drawChart() {
    var data = new google.visualization.DataTable(table);

      // Create our data table out of JSON data loaded from server.
        //  var data = new google.visualization.DataTable(<?=$jsonTable?>);
      var formatter = new google.visualization.NumberFormat({fractionDigits:2,prefix:'\u00A3'});
      formatter.format(data, 1);
      var options = {
          pointSize: 5,
          legend: 'none',
          hAxis: { showTextEvery:31 },
          series: {0:{color:'2E838F',lineWidth:2}},
          chartArea: {left:50,width:"95%",height:"80%"},
          backgroundColor: '#F7FBFC',
          height: 400
        };
      // Instantiate and draw our chart, passing in some options.
      //do not forget to check ur div ID
      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    }

</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-19T13:11:15.583

好的，如果我对您的理解正确，那么您在构思和设计这些操作的哪些部分是服务器端 (PHP) 以及哪些部分是客户端 (Javascript) 以及客户端-服务器通信策略时遇到了麻烦。这是一个常见的减速带。有几种方法可以处理它。

首先（不太推荐），您可以创建一个表单并使用新的日期范围重新加载整个页面：

```
// we're looking for '+1 year', '+3 months' or '+1 month'. if someone really
// wants to send another value here, it's not likely to be a security risk
// but know your own application and note that you might want to validate
$range = isset($_GET['range'])&&$_GET['range']?$_GET['range']:'+1 year';

$begin = new DateTime(date('Y-m-d', strtotime('+1 days')));
$end = new DateTime(date('Y-m-d', strtotime($range)));
// ... the rest of your code to build the chart.
?>
<form action="<?= $_SERVER['PHP_SELF']; ?>" method="get">
    <select name="range" size="1">
        <option value="+1 year">1 year</option>
        <option value="+3 months">3 months</option>
        <option value="+1 month">1 month</option>
    </select>
    <input type="submit" name="action" value="Redraw Chart">
</form> 
```

...不太受欢迎的原因是因为它会导致整个页面刷新。

如果你想避免整个页面刷新，你正在做几乎相同的事情，但是用 ajax 来做。设置几乎相同，只有几个小改动：

```
// between building the data table and the javascript to build the chart...
$jsonTable = json_encode($table);
if (isset($_GET['ajax']) && $_GET['ajax']) {
    echo json_encode(array('table' => $table));
    exit;
}
// remainder of your code, then our new form from above
?>
<form id="redraw_chart_form" action="<?= $_SERVER['PHP_SELF']; ?>" data-ajaxaction="forecast.php" method="get">
    <? foreach ($_GET as $key => $val) { ?>
    <input type="hidden" name="<?= $key; ?>" value="<?= $val; ?>">
    <? } ?>
    <input type="hidden" name="ajax" id="redraw_chart_form_ajax" value="0">
    <select name="range" size="1">
        <option value="+1 year">1 year</option>
        <option value="+3 months">3 months</option>
        <option value="+1 month">1 month</option>
    </select>
    <input type="submit" name="action" value="Redraw Chart">
</form>
<script>
    // I'm assuming you've got jQuery installed, if not there are
    // endless tutorials on running your own ajax query
    $('#redraw_chart_form').submit(function(event) {
        event.preventDefault(); // this stops the form from processing normally
        $('#redraw_chart_form_ajax').val(1);
        $.ajax({
            url: $(this).attr('data-ajaxaction'),
            type: $(this).attr('method'),
            data: $(this).serialize(),
            complete: function() { $('#redraw_chart_form_ajax').val(0); },
            success: function(data) {
                // referring to the global table...
                table = data.table;
                drawChart();
            },
            error: function() {
                // left as an exercise for the reader, if ajax
                // fails, attempt to submit the form normally
                // with a full page refresh.
            }
        });
        return false; // if, for whatever reason, the preventDefault from above didn't prevent form processing, this will
    });
</script> 
```

* * *

为清楚起见进行编辑：

1.  不要忘记使用第一个（页面刷新）示例中的以下代码块，否则您根本没有使用该表单：

    `$range = isset($_GET['range'])&&$_GET['range']?$_GET['range']:'+1 year';`

    `$begin = new DateTime(date('Y-m-d', strtotime('+1 days')));`

    `$end = new DateTime(date('Y-m-d', strtotime($range)));`

2.  Ajax will only work if the *only* data you're sending back is the json encoded block, which means your chart building data needs to be at the top of the script before *any* HTML output is started, including your page template. If you can't put the chart building code at the top of the script, then you'll have to add it to a whole separate script that all it does is calculate the data for the chart, and then you can have it return the ajax data without all of the other HTML on the page. If you can't do either of those things, you'll just have to turn off the Ajax bit and do a whole page refresh.

* * *

Edit 2: I added the `data-ajaxaction` attribute to the `<form>` element, this is a user defined attribute that I made up to provide a different action just for ajax. I also changed the `$.ajax()` call to use this attribute rather than the `action` attribute.

# windows-phone-7 - 基于用户交互动态加载 XAML 布局

> ID：15868569
> 
> 赞同：2
> 
> 时间：2013-04-07T22:24:59.607
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone

美好的一天，我对 windows phone 很陌生，所以请多多包涵。我需要根据用户选择的内容加载 XAML 布局。例如，如果我有 4 个 XAML 布局 A、B、C、D，当用户选择 C ​​时，应加载相应的 XAML 布局，如果稍后选择 A，则应该会出现。我可以创建不同的 XAML 布局并使用 OnNavigateTo 方法，但我认为它不是很有效。有没有办法，我可以将 XAML 布局组合在一起，以便在它们之间轻松切换？.. 我听说过使用模板，但实际上找不到任何具体的例子来说明它是如何工作的。任何帮助或链接将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:36:53.700

据我了解，您不需要使用模板。由于有四种不同的操作与它们相关联的四种不同的视图，因此每个操作都有一个单独的页面应该没有问题。

问题也可能是这个 - 布局有多大不同？如果数据是唯一在它们之间发生变化的东西，您可能会考虑绑定一个视图模型并简单地更改可绑定源。

**底线：**仅使用页面，或绑定到动态数据的单个页面，具体取决于您的方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T06:15:40.653

据我所知，我要求您更喜欢 UI 中的 UserControls 实现。您可以将 A、B、C 和 D 布局作为单独的用户控件，并且可以将这些用户控件放在同一页面中。只需根据在后面的代码中识别它的条件来更改可见性。我想它可能会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:44:19.467

您可以通过许多不同的方式解决这个问题。如果您不应该*在同一页面上*加载布局，请为每个视图创建 4 个单独的页面并导航到正确的页面。

如果您需要更新当前视图，您可以选择以下选项之一： - 将所有四个布局放入每个自己的网格中并`Visibility="Collapsed"`为每个布局设置。然后，当您需要显示布局时，只需将其 Visibility 更改为 True。- 同上，但使用视觉状态添加一些动画。- 创建 4 个用户控件并动态创建您需要的一个并将其添加到当前页面。

您需要在这里考虑几个因素： - 干净的代码和干净的设计。- 动画和过渡。- 返回键呢？如果用户应该在完成后导航回选择屏幕，请考虑导航到单独的页面。

不要忘记最后一点，这在选择正确的解决方案时可能至关重要。

# android - 未定义参考 NDK 的问题

> ID：15868571
> 
> 赞同：0
> 
> 时间：2013-04-07T22:25:09.720
> 
> 标签：android, eclipse, android-ndk, sdl, sdl-ttf

好的，我知道这已经提出来了。然而我的似乎没有得到解决。在我们开始之前，让我们知道以下几点：

*   操作系统：Win7 (x86)
*   IDE：Eclipse Juno (4.2)
*   NDK：r8e
*   Android API：17（果冻豆 4.2）

我试图让 SDL_ttf 完全编译。我只是在尝试构建这个项目并继续做事，并且在努力让它认识到某些文件确实确实存在于他们说它们存在的地方。我现在得到

**更新**：

```
17:06:42 **** Incremental Build of configuration Default for project OmegaDice ****
"C:\\android-ndk-r8e\\ndk-build.cmd" V=1 clean all all 
FIND: Parameter format not correct
Clean: SDL2 [armeabi]
Clean: SDL2_ttf [armeabi]
Clean: freetype [armeabi]
Clean: main [armeabi]
Clean: stlport_shared [armeabi]
Clean: stlport_static [armeabi]
del /f/q .\libs\armeabi\libSDL2.so    >NUL 2>NUL
Install        : libSDL2.so => libs/armeabi/libSDL2.so
copy /b/y ".\obj\local\armeabi\libSDL2.so" ".\libs\armeabi\libSDL2.so" > NUL
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/arm-linux-androideabi-strip --strip-unneeded  ./libs/armeabi/libSDL2.so
"Compile thumb : SDL2_ttf <= SDL_ttf.c
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/arm-linux-androideabi-gcc -MMD -MP -MF ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o.d -fpic -ffunction-sections -funwind-tables -fstack-protector -no-canonical-prefixes -march=armv5te -mtune=xscale -msoft-float -mthumb -Os -g -DNDEBUG -fomit-frame-pointer -fno-strict-aliasing -finline-limit=64 -Ijni/SDL_ttf -Ijni/SDL_ttf/../SDL/include -Ijni/SDL_ttf/../freetype/include -Ijni/SDL_ttf/include -IC:/android-ndk-r8e/sources/cxx-stl/stlport/stlport -IC:/android-ndk-r8e/sources/cxx-stl//gabi++/include -Ijni/SDL_ttf -DANDROID -Os -Wa,--noexecstack  -IC:/android-ndk-r8e/platforms/android-14/arch-arm/usr/include -c  jni/SDL_ttf/SDL_ttf.c -o ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o 
SharedLibrary  : libSDL2_ttf.so
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/arm-linux-androideabi-g++ -Wl,-soname,libSDL2_ttf.so -shared --sysroot=C:/android-ndk-r8e/platforms/android-14/arch-arm ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o ./obj/local/armeabi/libfreetype.a -lgcc ./obj/local/armeabi/libSDL2.so -no-canonical-prefixes  -Wl,--no-undefined -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,now  -LC:/android-ndk-r8e/platforms/android-14/arch-arm/usr/lib -lz -lc -lm -o ./obj/local/armeabi/libSDL2_ttf.so
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function Find_Glyph:jni/SDL_ttf/SDL_ttf.c:590: error: undefined reference to 'FT_Get_Char_Index'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function Find_Glyph:jni/SDL_ttf/SDL_ttf.c:592: error: undefined reference to 'FT_Load_Glyph'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function Find_Glyph:jni/SDL_ttf/SDL_ttf.c:656: error: undefined reference to 'FT_Outline_Transform'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function Find_Glyph:jni/SDL_ttf/SDL_ttf.c:662: error: undefined reference to 'FT_Get_Glyph'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function Find_Glyph:jni/SDL_ttf/SDL_ttf.c:663: error: undefined reference to 'FT_Stroker_New'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function Find_Glyph:jni/SDL_ttf/SDL_ttf.c:667: error: undefined reference to 'FT_Stroker_Set'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function Find_Glyph:jni/SDL_ttf/SDL_ttf.c:669: error: undefined reference to 'FT_Glyph_Stroke'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function Find_Glyph:jni/SDL_ttf/SDL_ttf.c:671: error: undefined reference to 'FT_Stroker_Done'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function Find_Glyph:jni/SDL_ttf/SDL_ttf.c:673: error: undefined reference to 'FT_Glyph_To_Bitmap'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function Find_Glyph:jni/SDL_ttf/SDL_ttf.c:676: error: undefined reference to 'FT_Done_Glyph'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function Find_Glyph:jni/SDL_ttf/SDL_ttf.c:682: error: undefined reference to 'FT_Render_Glyph'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function Find_Glyph:jni/SDL_ttf/SDL_ttf.c:885: error: undefined reference to 'FT_Done_Glyph'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function TTF_Init:jni/SDL_ttf/SDL_ttf.c:334: error: undefined reference to 'FT_Init_FreeType'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function TTF_CloseFont:jni/SDL_ttf/SDL_ttf.c:915: error: undefined reference to 'FT_Done_Face'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function TTF_OpenFontIndexRW:jni/SDL_ttf/SDL_ttf.c:420: error: undefined reference to 'FT_Open_Face'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function TTF_OpenFontIndexRW:jni/SDL_ttf/SDL_ttf.c:442: error: undefined reference to 'FT_Set_Charmap'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function TTF_OpenFontIndexRW:jni/SDL_ttf/SDL_ttf.c:448: error: undefined reference to 'FT_Set_Char_Size'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function TTF_OpenFontIndexRW:jni/SDL_ttf/SDL_ttf.c:457: error: undefined reference to 'FT_MulFix'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function TTF_OpenFontIndexRW:jni/SDL_ttf/SDL_ttf.c:458: error: undefined reference to 'FT_MulFix'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function TTF_OpenFontIndexRW:jni/SDL_ttf/SDL_ttf.c:460: error: undefined reference to 'FT_MulFix'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function TTF_OpenFontIndexRW:jni/SDL_ttf/SDL_ttf.c:462: error: undefined reference to 'FT_MulFix'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function TTF_OpenFontIndexRW:jni/SDL_ttf/SDL_ttf.c:474: error: undefined reference to 'FT_Set_Pixel_Sizes'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function TTF_GlyphIsProvided:jni/SDL_ttf/SDL_ttf.c:1103: error: undefined reference to 'FT_Get_Char_Index'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function TTF_SizeUTF8:jni/SDL_ttf/SDL_ttf.c:1204: error: undefined reference to 'FT_Get_Kerning'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function TTF_RenderUTF8_Solid:jni/SDL_ttf/SDL_ttf.c:1390: error: undefined reference to 'FT_Get_Kerning'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function TTF_RenderUTF8_Shaded:jni/SDL_ttf/SDL_ttf.c:1568: error: undefined reference to 'FT_Get_Kerning'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function TTF_RenderUTF8_Blended:jni/SDL_ttf/SDL_ttf.c:1732: error: undefined reference to 'FT_Get_Kerning'
C:/android-ndk-r8e/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local/armeabi/objs/SDL2_ttf/SDL_ttf.o: in function TTF_Quit:jni/SDL_ttf/SDL_ttf.c:2140: error: undefined reference to 'FT_Done_FreeType'
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi/libSDL2_ttf.so] Error 1

17:07:20 Build Finished (took 37s.757ms) 
```

**jni/SDL_ttf/Android.mk**：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := SDL2_ttf
FREETYPE := $(LOCAL_PATH)/freetype
LOCAL_C_INCLUDES := $(LOCAL_PATH) $(LOCAL_PATH)/../SDL/include $(LOCAL_PATH)/../freetype/include $(LOCAL_PATH)/include

LOCAL_CFLAGS := -Os

LOCAL_CPP_EXTENSION := .cpp

LOCAL_SRC_FILES := SDL_ttf.c

LOCAL_SHARED_LIBRARIES := SDL2
LOCAL_STATIC_LIBRARIES := freetype
LOCAL_LDLIBS := -lz

include $(BUILD_SHARED_LIBRARY) 
```

因此，如果有人对为什么会发生这种情况或如何解决它有任何有用的建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T08:31:53.730

问题是这样的：

```
FIND: Parameter format not correct 
```

所以 freetype 没有被编译。

您正在 Windows 中构建，因此`find`正在执行的命令是 Windows 版本，它具有不同的语法。

您需要下载一个`find`与 unix 具有相同语法的程序。例如从这里： [http ://unxutils.sourceforge.net/](http://unxutils.sourceforge.net/)

然后你需要强制 freetype Android.mk 使用新的`find`：

改变：

```
APP_SUBDIRS := $(patsubst $(LOCAL_PATH)/%, %, $(shell find $(LOCAL_PATH)/src -type d)) 
```

至

```
APP_SUBDIRS := $(patsubst $(LOCAL_PATH)/%, %, $(shell PATH_TO_UNIXLIKE_FIND\find $(LOCAL_PATH)/src -type d)) 
```

例如

```
APP_SUBDIRS := $(patsubst $(LOCAL_PATH)/%, %, $(shell c:\unixtools\usr\local\wbin\find $(LOCAL_PATH)/src -type d)) 
```

# c# - 在 INotifyPropertyChanged 上刷新值转换器

> ID：15868582
> 
> 赞同：1
> 
> 时间：2013-04-07T22:26:16.913
> 
> 标签：c#, windows-phone-7, ivalueconverter

我知道这里有一些类似的话题，但我无法从他们那里得到任何答案。我必须在我的 Windows Phone 7 应用程序中将网格的背景更新为图像或颜色。我使用我的值转换器执行此操作，它工作正常，但我必须重新加载集合，以便它更新颜色或图像。

```
<Grid Background="{Binding Converter={StaticResource ImageConverter}}" Width="125" Height="125" Margin="6"> 
```

转换器接收对象然后从中获取颜色和图像，这里是转换器

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {

            People myC = value as People;

            string myImage = myC.Image;
            object result = myC.TileColor;

            if (myImage != null)
            {

                BitmapImage bi = new BitmapImage();
                bi.CreateOptions = BitmapCreateOptions.BackgroundCreation;
                ImageBrush imageBrush = new ImageBrush();

                using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
                {
                    if (myIsolatedStorage.FileExists(myImage))
                    {

                        using (
                            IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile(myImage, FileMode.Open,
                                                                                              FileAccess.Read))
                        {
                            bi.SetSource(fileStream);
                            imageBrush.ImageSource = bi;
                        }
                    }
                    else
                    {
                        return result;
                    }
                }

                return imageBrush;
            }
            else
            {
                return result;
            }

    } 
```

我需要以某种方式更新/刷新网格标签或值转换器，以便它可以显示最新的更改！

**编辑**

**添加了更多代码**

该模型 ：

```
 [Table]
    public class People : INotifyPropertyChanged, INotifyPropertyChanging
    {

        private int _peopleId;

        [Column(IsPrimaryKey = true, IsDbGenerated = true, DbType = "INT NOT NULL Identity", CanBeNull = false, AutoSync = AutoSync.OnInsert)]
        public int PeopleId
        {
            get { return _peopleId; }
            set
            {
                if (_peopleId != value)
                {
                    NotifyPropertyChanging("PeopleId");
                    _peopleId = value;
                    NotifyPropertyChanged("PeopleId");
                }
            }
        }

        private string _peopleName;

        [Column]
        public string PeopleName
        {
            get { return _peopleName; }
            set
            {
                if (_peopleName != value)
                {
                    NotifyPropertyChanging("PeopleName");
                    _peopleName = value;
                    NotifyPropertyChanged("PeopleName");
                }
            }
        }

        private string _tileColor;

        [Column]
        public string TileColor
        {
            get { return _tileColor; }
            set
            {
                if (_tileColor != value)
                {
                    NotifyPropertyChanging("TileColor");
                    _tileColor = value;
                    NotifyPropertyChanged("TileColor");
                }
            }
        }

        private string _image;

        [Column]
        public string Image
        {
            get { return _image; }
            set
            {
                if (_image != value)
                {
                    NotifyPropertyChanging("Image");
                    _image = value;
                    NotifyPropertyChanged("Image");
                }
            }
        }

        [Column]
        internal int _groupId;

        private EntityRef<Groups> _group;

        [Association(Storage = "_group", ThisKey = "_groupId", OtherKey = "Id", IsForeignKey = true)]
        public Groups Group
        {
            get { return _group.Entity; }
            set
            {
                NotifyPropertyChanging("Group");
                _group.Entity = value;

                if (value != null)
                {
                    _groupId = value.Id;
                }

                NotifyPropertyChanging("Group");
            }
        }

        [Column(IsVersion = true)]
        private Binary _version;

        #region INotifyPropertyChanged Members

        public event PropertyChangedEventHandler PropertyChanged;

        private void NotifyPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }

        #endregion

        #region INotifyPropertyChanging Members

        public event PropertyChangingEventHandler PropertyChanging;

        private void NotifyPropertyChanging(string propertyName)
        {
            if (PropertyChanging != null)
            {
                PropertyChanging(this, new PropertyChangingEventArgs(propertyName));
            }
        }

        #endregion
    } 
```

视图模型：

```
public class PeopleViewModel : INotifyPropertyChanged
{

    private PeopleDataContext PeopleDB;

    // Class constructor, create the data context object.
    public PeopleViewModel(string PeopleDBConnectionString)
    {
        PeopleDB = new PeopleDataContext(PeopleDBConnectionString);
    }

    private ObservableCollection<People> _allPeople;

    public ObservableCollection<People> AllPeople
    {
        get { return _allPeople; }
        set
        {
            _allPeople = value;
            NotifyPropertyChanged("AllPeople");
        }
    }

    public ObservableCollection<People> LoadPeople(int gid)
    {
        var PeopleInDB = from People in PeopleDB.People
                           where People._groupId == gid
                           select People;

        AllPeople = new ObservableCollection<People>(PeopleInDB);

        return AllPeople;
    }

    public void updatePeople(int cid, string cname, string image, string tilecol)
    {
        People getc = PeopleDB.People.Single(c => c.PeopleId == cid);
        getc.PeopleName = cname;
        getc.Image = image;
        getc.TileColor = tilecol;

        PeopleDB.SubmitChanges();

    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    public void NotifyPropertyChanged(string propertyName)
    {
                if (PropertyChanged != null)
                {
                    PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
                }
    }

    #endregion
} 
```

申请页面

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">

        <ListBox Margin="0,8,0,0"  x:Name="Peoplelist" HorizontalAlignment="Center"  BorderThickness="4" ItemsSource="{Binding AllPeople}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid Background="{Binding Converter={StaticResource ImageConverter}}" Width="125" Height="125" Margin="6">
                        <TextBlock Name="name" Text="{Binding PeopleName}" VerticalAlignment="Center" HorizontalAlignment="Center" TextAlignment="Center" TextWrapping="Wrap"/>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <toolkit:WrapPanel/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
        </ListBox>

    </Grid> 
```

后面的应用程序页面代码

```
public partial class PeopleList : PhoneApplicationPage
{

    private int gid;
    private bool firstRun;

    public PeopleList()
    {
        InitializeComponent();
        firstRun = true;
        this.DataContext = App.ViewModel;
    }

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {

        gid = int.Parse(NavigationContext.QueryString["Id"]);

        if (firstRun)
        {
            App.ViewModel.LoadPeople(gid);
            firstRun = false;
        }

    }

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T22:32:23.120

`Background="{Binding Converter={StaticResource ImageConverter}}"`建议您直接绑定到`People` **项目**（刷新时这是您的问题）。

所以，你应该重新安排一下。改为使用`a property`其他一些“更高”的数据上下文。

* * *

**如何重新排列事物：**

1）**您的“模型”（来自数据库的实体）应该与您的 view-model 不同**。为了避免深入细节，它解决了很多问题——比如你遇到的问题。`People`getter/setter 通常不会以这种方式被覆盖（EF 经常使用反射来处理实体等）。
因此，制作 PeopleVM（用于单个 People 或`PersonViewModel`） - 在其中复制内容 - 并在其中制作 INotify - 将 People 保留为带有自动获取/设置的纯实体/poco。

2）同样的`PeopleViewModel`- 它太依赖于 Db（这些也是设计指南）。
**你不应该重用 DbContext** - 不要保存它 - 它是一个“一次性”对象（并缓存在里面） - 所以`using()`用来处理和按需加载/更新。

3)**用 PersonViewModel 替换主虚拟机中的 People**。当您从 db 加载时，首先将泵送入 PersonVM - 当您以另一种方式保存时。这对于 MVVM 来说是一个棘手的问题，您经常需要复制/复制 - 您可以使用一些工具来自动化或制作复制 ctor-s 或其他东西。
你的`ObservableCollection<People> AllPeople`变成`ObservableCollection<PersonViewModel> AllPeople`

4) XAML - 你的绑定 AllPeople, PeopleName 是相同的 - 但现在指向视图模型（和名称到 VM 名称）。
但是**你应该把你的东西绑定到（老人）`grid`以外`PersonViewModel`**的东西上——因为在收藏中很难“刷新”。
a）创建一个新的单个属性，例如`ImageAndTileColor`- 并确保它在两个属性中的任何一个发生更改时更新/通知。
b）另一种选择是使用`MultiBinding`- 并绑定 2、3 个属性 - 一个是`PersonViewModel`你所拥有的整体，再加上其他两个属性 - 例如..

```
<Grid ...>
    <Grid.Background>
        <MultiBinding Converter="{StaticResource ImageConverter}" Mode="OneWay">
            <MultiBinding.Bindings>
                <Binding Path="Image" />
                <Binding Path="TileColor" />
                <Binding Path="" />
            </MultiBinding.Bindings>
        </MultiBinding>
    </Grid.Background>
    <TextBlock Name="name" Text="{Binding PeopleName}" ... />
</Grid> 
```

**这样，当 3 个更改中的任何一个发生更改时，您强制绑定刷新**- 并且您仍然拥有完整的人员（实际上您可以只使用两个，因为您只需要 Image 和 TileColor）。

5）将您的转换器更改为 IMultiValue... 并读取发送的多个值。

就这样 ：）

**简短版本：**
这是`proper way`肯定会起作用的（这取决于您更新 Person 属性的方式/时间等） - 但您可以尝试第`short version`一个 - 只需`multi-binding`在 People 模型上做部分 - 并希望它会起作用。如果不是，您必须执行上述所有操作。

**Windows Phone 7：**
由于没有`MultiBinding`...
- 使用[解决方法](http://www.thejoyofcode.com/MultiBinding_for_Silverlight_3.aspx)- 它应该非常相似，
- 或者使用`(a)`上面的 - 将网格绑定到`{Binding ImageAndTileColor, Converter...}`. 创建新属性（如果您希望在实体/模型中执行相同操作 - 只需将其标记为`[NotMapped()]`），这将是一个“复合”属性。

* * *

[http://www.thejoyofcode.com/MultiBinding_for_Silverlight_3.aspx](http://www.thejoyofcode.com/MultiBinding_for_Silverlight_3.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:17:44.303

我明白了（感谢 NSGaga）。我将他的帖子设置为答案，以下是我所做的

首先我需要让转换器接收 PeopleId 而不是对象本身

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {

        int cid = (int)value;
        People myC = App.ViewModel.getPerson(cid);

            string myImage = myC.Image;
            object result = myC.TileColor;

            if (myImage != null)
            {

                BitmapImage bi = new BitmapImage();
                bi.CreateOptions = BitmapCreateOptions.BackgroundCreation;
                ImageBrush imageBrush = new ImageBrush();

                using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
                {
                    if (myIsolatedStorage.FileExists(myImage))
                    {

                        using (
                            IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile(myImage, FileMode.Open,
                                                                                              FileAccess.Read))
                        {
                            bi.SetSource(fileStream);
                            imageBrush.ImageSource = bi;
                        }
                    }
                    else
                    {
                        return result;
                    }
                }

                return imageBrush;
            }
            else
            {
                return result;
            }

    } 
```

`NotifyPropertyChanged("PeopleId")`然后，每当我像这样更新 Image 或 TileColor 时，我只需要添加调用

```
 private string _tileColor;

    [Column]
    public string TileColor
    {
        get { return _tileColor; }
        set
        {
            if (_tileColor != value)
            {
                NotifyPropertyChanging("TileColor");
                _tileColor = value;
                NotifyPropertyChanged("TileColor");
                NotifyPropertyChanged("PeopleId");
            }
        }
    }

    private string _image;

    [Column]
    public string Image
    {
        get { return _image; }
        set
        {
            if (_image != value)
            {
                NotifyPropertyChanging("Image");
                _image = value;
                NotifyPropertyChanged("Image");
                NotifyPropertyChanged("PeopleId");
            }
        }
    } 
```

这会强制值转换器刷新:)

# java - 矢量代码中的素数

> ID：15868584
> 
> 赞同：-2
> 
> 时间：2013-04-07T22:26:22.117
> 
> 标签：java

当我运行我的程序时，我只想打印素数。出于某种原因，所有输入的数字都会打印出来。有人可以帮我解决我的错误在哪里。

```
for(int i=3; i*i<=n; i+=2) {
    if((n%i)==0) {  
        isPrime=false;
    }
    if(n%2==0) {
        isPrime = false;
    }
    else {
        isPrime = true;
    }
}
if(isPrime = true) {
    mVector.add(n);
}
if(n==0){
    System.out.println(mVector);
    break;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T22:31:29.263

`isPrime = true`是`true`对变量的赋值`isPrime`。赋值表达式将始终返回分配的值（即`true`）。你需要比较：

```
if (isPrime == true) 
```

但真的只是

```
if (isPrime) 
```

会更好。

此外，如果`n`很奇怪，您将不断更改`isPrime`为`true`for 循环的每次迭代：

```
if(n%2==0) {
    isPrime = false;
}
else {
    isPrime = true;
} 
```

我建议类似：

```
boolean isPrime = true;
if (n%2 == 0) {
    isPrime = false;
}
for (int i = 3; isPrime && i*i <= n; i += 2) {
    if(n%i == 0) {  
        isPrime = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T22:30:58.053

```
if(isPrime == true) //change = to == 
```

它可能会帮助你

# algorithm - 散列中分离链接和开放寻址的时间复杂度

> ID：15868585
> 
> 赞同：2
> 
> 时间：2013-04-07T22:26:30.833
> 
> 标签：algorithm, hash

对于使用具有 N 个键和 M 个列表（地址）的单独链接的哈希表，其时间复杂度为：

```
Insert: O(1)

Search: O(N/M)

Remove: O(N/M) 
```

以上我认为应该是对的。

但我对分析开放寻址的时间复杂度感到不舒服。假设负载因子仍然是 N/M，有人可以阐明如何处理它的时间复杂度，也许还可以对两种实现进行一些比较。谢谢！

编辑：我对这里的线性探测特别感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:13:08.777

线性探测的分析实际上*比*最初看起来要复杂得多。线性探测的“经典”分析在（非常不切实际的）假设下工作，即用于在表中分布元素的散列函数表现得像一个完全随机的函数。不幸的是，对于大多数散列函数来说，这确实不是一个公平的假设，因为大多数散列函数以合理的非随机方式分布元素。要选择一个用于线性探测的散列函数，它具有您上面给出的（预期）时间界限，您通常需要选择一种称为*5-wise Independent hash function 的散列函数*。这个分析并不简单，但如果你好奇你可能想看看论文[“具有恒定独立性的线性探测”](http://www.it-c.dk/people/pagh/papers/linear.pdf)。本文还对线性探测哈希表进行了分析，假设您使用的是较弱类型的哈希函数，以说明为什么上述时间限制在这种情况下不成立。

希望这可以帮助！

# compiler-construction - 编译器设计和消除左递归

> ID：15868591
> 
> 赞同：1
> 
> 时间：2013-04-07T22:27:14.683
> 
> 标签：compiler-construction, programming-languages, grammar

例如

```
E -> E+T | T 
```

将会

```
E -> T E'
E' -> +T E' | null 
```

如果我有生产

```
B -> B == C | C 
```

这些是正确的作品吗？

```
B -> C B'
B' -> ==C B' | null 
```

我遇到问题的另一个运算符是'！'，我知道它比我语法中的所有内容都具有更高的优先级，除了“（）”我想出了这个但不确定它是否正确。

```
T  -> U T'
T' -> *U T' | /U T' | null
U  -> ! ident | F
F  -> (A) | idlit | ftncall
ftncall -> ident(params) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T05:00:37.257

我认为两者都是正确的，除了你必须定义的第二`params`个`id-list`。

就像是：

参数-> id | id，参数

为了确定语法是否具有（模糊的）左递归，最简单的方法是将语法提供给野牛，解析生成器，如果语法不明确，它将发出警告/错误消息。

正如@ibid 所提到的，bison 正确解析了非歧义的左递归语法。有几个在线教程（要开始使用，您可以使用：[http](http://alumni.cs.ucr.edu/~lgao/teaching/bison.html) ://alumni.cs.ucr.edu/~lgao/teaching/bison.html ）

# php - pdo lastInsertId() 不断返回 0

> ID：15868604
> 
> 赞同：1
> 
> 时间：2013-04-07T22:28:21.133
> 
> 标签：php, mysql, phpmyadmin

我有两个查询将数据插入到各自的表中。这很好用。我一直在尝试做的是在执行每个查询后获取 lastInsertId 并将这些值插入到第三个表中。但是，当我检查数据库时，输入了值 0。两个表都有一个自动递增的字段。你能通过我的代码告诉我为什么会发生这种情况或有什么建议吗？我对 php 比较陌生，所以如果你注意到我编码的方式不整洁，特别是在我执行查询的最后，请告诉我。我会很感激的。

```
if ($oneWay)
    {
        $query = "INSERT INTO journey
        (from_destination,to_destination,journey_type,depart_date,depart_time,seats_available,journey_message,user_type)
        VALUES('$pjFrom','$pjTo','$radioJourneyType', STR_TO_DATE('$departDate','%d/%m/%Y'),'$newDepTime','$seatcounter','$textareanotes','$radUserType')";
        $userID = "SELECT user_id FROM `user` ORDER BY journey_id DESC LIMIT 1";
    }
    else
    {
        $query = "INSERT INTO journey
        (from_destination,to_destination,journey_type,depart_date,depart_time,return_date,return_time,seats_available,journey_message,user_type)
        VALUES('$pjFrom','$pjTo','$radioJourneyType', STR_TO_DATE('$departDate','%d/%m/%Y'),'$newDepTime',STR_TO_DATE('$returnDate','%d/%m/%Y'),'$newRetTime ','$seatcounter','$textareanotes','$radUserType')";
        //$userID = "SELECT user_id FROM `user` ORDER BY journey_id DESC LIMIT 1";
    }
    $queryfb = "INSERT INTO user
        (facebook_id,facebook_username,facebook_first_name,facebook_last_name,facebook_image,facebook_link)
        VALUES('$hdnFacebookId','$hdnUsername','$hdnFirstName','$hdnLastName','$hdnFacebookImg','$hdnFacebookUrl')";
        //$journeyID = "SELECT journey_id FROM `journey` ORDER BY journey_id DESC LIMIT 1";

    $queryUserJourney = "INSERT INTO user_journey
                        (user_id,journey_id)
                        VALUES('$lastUserID','$lastJourneyID')";

    $db->exec($query);
    $lastUserID = $db->lastInsertId();
    $db->exec($queryfb);
    $lastJourneyID = $db->lastInsertId();
    $db->exec($queryUserJourney);//problem: 0 values being entered???
} 
```

更新

```
$db->exec($query);
    $lastUserID = $db->lastInsertId();
    $db->exec($queryfb);
    $lastJourneyID = $db->lastInsertId();
    $queryUserJourney = "INSERT INTO user_journey
                        (user_id,journey_id)
                        VALUES('$lastUserID','$lastJourneyID')";
    $db->exec($queryUserJourney);working thanks to jmadsen 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:31:06.740

你可能想试试

```
$db->lastInsertId(); 
```

... 反而。注意 中的小写`d`字母`lastInsertId`。

[参考文档](http://php.net/manual/en/pdo.lastinsertid.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T23:31:49.863

Now that I've had my coffee - you are creating the last insert statement BEFORE you populate the variables. I think this is what Maerlyn was hinting at

You need to move $queryUserJourney down below your 2 inserts.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T22:36:25.077

@科林，

PDO's last insert id returns the value of an auto-increment primary key, if I'm not completely mistaken. It looks to me like $query's table doesn't have this

# google-chrome - 查看 WAMP 和 Chrome 问题的更改

> ID：15868605
> 
> 赞同：2
> 
> 时间：2013-04-07T22:28:22.010
> 
> 标签：google-chrome, wamp

所以我使用 WAMP 服务器和 Chrome 来测试我正在构建的网站，我经常遇到一个问题，即我更改文件内容并重新加载页面（即使在新窗口中），但看不到更改. 在调试器中查看代码，我仍然可以看到保存更改之前的旧代码。

我对这个问题的解决方法是，每当它发生（这似乎是随机的）时，我必须清除浏览器缓存并重新启动 WAMP 服务器，但这是一个非常痛苦的问题，我想知道是否有人知道更好的解决方案（可能是一些设置我缺少的 Chrome 或 WAMP）来避免这种恒定的减速带。

答案：

使用 jQuery（作者 Willy Wonka）：

```
$.ajaxSetup({cache: false}); 
```

没有 jQuery（由牛神）：

```
<?php
header("Expires: Tue, 01 Jan 2000 00:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate, max-age=0");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");
?> 
```

[禁用 php 中的浏览器缓存或使用 javascript](https://stackoverflow.com/questions/404617/disabling-the-browser-cache-in-php-or-using-javascript)

感谢威利·旺卡（Willy Wonka）为我指明了正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:34:23.810

```
$.ajaxSetup({cache: false}); 
```

使用 jQuery 为您的网站禁用缓存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-27T00:43:26.430

更简单的方法是使用调试器禁用缓存。

按 F12 然后单击页面右下角的齿轮图标 选择设置下的常规选项卡 选中名为禁用缓存的框

# objective-c - 如何在 NSDictionary 类中的 enumerateObjectsUsingBlock 等块上使用停止条件？

> ID：15868607
> 
> 赞同：7
> 
> 时间：2013-04-07T22:28:34.800
> 
> 标签：objective-c, pass-by-reference, objective-c-blocks

我想在我的课堂上制作一个方法，就像`enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop)`从`NSDictionary`课堂上一样。

我对块的使用有一点了解，但我无法弄清楚如何使`enumerateObjectsUsingBlock`函数使用的停止条件。有什么建议么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-07T22:40:56.660

该`stop`标志的使用方式如下：

```
[coll enumerateUsingBlock:^(id o, NSUInteger i, BOOL *stop) {
      if (... check for stop ... ) {
           *stop = YES;
           return;
      }
 }]; 
```

当枚举块返回时，集合检查`*stop`. 如果是`YES`，则停止枚举。

它以这种方式实现，而不是返回值，因为这允许并发枚举而不检查块的返回值（这会产生开销）。即在并发枚举中，集合可以进行`dispatch_async()`任意数量的同时迭代并定期检查`*stop`。每当`*stop`转换到 时`YES`，它就会停止调度更多的块（这也是`stop`标志不是硬停止的原因；一些未指定数量的迭代可能仍在进行中）。

在您的迭代器中，您可能会这样做：

```
 BOOL stop = NO;
 for(...) {
     enumerationBlock(someObj, someIndex, &stop);
     if (stop) break;
 } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-07T22:42:24.000

以下代码定义了一个方法，该方法将块作为参数并一直执行它，直到`shouldStop`被块设置为`NO`。

```
- (void)myMethod:(void(^)(BOOL *stop))aBlock {
    BOOL shouldStop = NO;
    while (!shouldStop) {
        aBlock(&shouldStop);
    }
} 
```

The explanation is fairly simple. A block is a function that takes some parameters. In this case we pass as a parameter a pointer to a `BOOL` variable we own. By doing so we are allowing the block to set that variable and - in this case - indicate that the loop should stop.

At this point, the block passed could do something like

```
[self myMethod:^(BOOL *stop) {
      if (arc4random_uniform(1)) {
          *stop = YES;
      }
}]; 
```

# android - 安卓 bg 概率

> ID：15868610
> 
> 赞同：1
> 
> 时间：2013-04-07T22:28:51.293
> 
> 标签：android, xml

我正在尝试为我的 android 项目添加背景。这是代码。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:backround="@drawable/awesome_face">

</RelativeLayout> 
```

我拼写的一切都是正确的，但是当我在保存后进入我的图形布局时，什么都没有出现。此外，在我清理项目后，我现在在

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
```

说“在包'android'中找不到属性背景的资源标识符”有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:35:29.840

就像 ChristopheCVB 说的，你的背景标签少了一个 G。

```
android:backGround="@drawable/awesome_face"> 
```

# mysql - MYSQL - 计数回合

> ID：15868611
> 
> 赞同：1
> 
> 时间：2013-04-07T22:28:52.017
> 
> 标签：mysql, count, inner-join

我得到了这个竞赛脚本的声明（到目前为止）：

```
SELECT COUNT(round) AS runden, COUNT(status) AS status FROM rounds AS r INNER JOIN player AS p ON r.playerID = p.id WHERE r.playerID = <ID>" 
```

此表保存某个用户的所有已玩回合。如果一个用户参与了一轮，它将被写在这个表中：

id = id
playerId = 玩家
回合的 ID = 已玩的回合（从 1 到 4）
已玩 = 如果用户玩过 = 1 如果没有 = 0
status = 如果用户赢了 = 1 如果没有 = 0

现在我需要的是状态 = 1 或状态 = 0 的所有已玩回合的值。所以我需要总赢局和输局。

这显示它：

```
function getRoundsByPlayer($playerId) {
        $sql = "
        SELECT COUNT(round) AS runden, COUNT(status) AS status FROM rounds AS r INNER JOIN player AS p ON r.playerID = p.id WHERE r.playerID = :playerId";
        try {
            $db = self::getConnection();
            $stmt = $db->prepare($sql);
            $stmt->bindParam("playerId", $playerId);
            $stmt->execute();
            $player = $stmt->fetch(PDO::FETCH_LAZY);
            $db = null;
            return $player;
        } catch(PDOException $e) {
            echo $e->getMessage();
        }
    }

$runden = $helper->getRoundsByPlayer($row['id']); 
```

和 HTML：

```
...  
<td><?php echo $runden->runden; ?></td>  
... 
```

如何不使用第二条或第三条 SQL 语句来实现它？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:38:08.143

使用以下 SQL 语句（未经测试）：

```
SELECT SUM(played) AS played
       SUM(status) AS status
FROM rounds AS r
INNER JOIN player AS p
ON r.playerID = p.id
WHERE r.playerID = :playerId
GROUP BY r.playerID; 
```

这应该为您提供以下信息：

> played = number of rounds played by the user status = number of rounds won by the user

You can easily calculate the number of lost rounds by substracting the two.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:38:16.033

If I understand you correctly you can use conditional count like this

```
SELECT SUM(CASE WHEN r.status = 1 THEN 1 ELSE 0 END) AS won_rounds,
       SUM(CASE WHEN r.status = 0 THEN 1 ELSE 0 END) AS lost_rounds
  FROM rounds AS r INNER JOIN 
       player AS p ON r.playerID = p.id 
 WHERE r.playerID = <ID> AND r.played = 1
 GROUP BY r.playerID 
```

*The query has not been tested*

# windows-phone-7 - PhoneGap - 如何在执行本机代码时覆盖后退按钮（Windows Phone 7）

> ID：15868616
> 
> 赞同：0
> 
> 时间：2013-04-07T22:29:24.657
> 
> 标签：windows-phone-7, cordova, windows-phone, phonegap-plugins

我正在我的 PhoneGap Windows Phone 7 应用程序上开发一个插件。该插件在 Windows Phone 7 UI 上启动一个线程来启动摄像头以扫描 QR 码。当它完成执行时，它会返回到 PhoneGap UI。

问题是如果用户在执行本机插件代码时按下后退按钮，应用程序就会崩溃。

如何覆盖我的 PhoneGap 插件的后退按钮，以便我可以返回到 PhoneGap UI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:57:57.847

我想出了一个可行的解决方案来解决这个问题，但这并不理想。

在执行本机插件代码时按下后退按钮时，会在 App.xaml.cs 文件中调用导航失败事件。它看起来像这样：

```
 // Code to execute if a navigation fails
    private void RootFrame_NavigationFailed(object sender, NavigationFailedEventArgs e)
    {
        if (System.Diagnostics.Debugger.IsAttached)
        {
            // A navigation has failed; break into the debugger
            System.Diagnostics.Debugger.Break();
        }
    } 
```

我只是用返回 PhoneGap UI 的代码替换了上面的命令：

```
 private void RootFrame_NavigationFailed(object sender, NavigationFailedEventArgs e)
    {
        if (System.Diagnostics.Debugger.IsAttached)
        {
            Deployment.Current.Dispatcher.BeginInvoke(() => ((PhoneApplicationFrame)Application.Current.RootVisual).GoBack());
        }
    } 
```

我认为这只有在您之前在 Windows Phone UI 上创建了一个新线程时才有效，看起来像这样：

```
var dispatcherOperation = Deployment.Current.Dispatcher.BeginInvoke(() => /* Your method */ 
```

另外需要注意的是，插件代码在按下后退按钮后会继续执行。使用我的代码，如果 QR 码扫描没有产生结果，它会尝试返回 PhoneGap UI，但这会失败，因为返回按钮事件已经返回到 PhoneGap UI，所以我只是删除了那个我的插件代码中的声明。

# jquery - 使用 jQuery 创建一个垂直和水平滑动的背景图像

> ID：15868617
> 
> 赞同：-1
> 
> 时间：2013-04-07T22:29:24.937
> 
> 标签：jquery, slideshow

希望创建类似于[http://2011.madebygrave.com上的滑动行为的东西](http://2011.madebygrave.com)

每个项目的背景图像垂直滑动，在每个项目中，您可以水平滑动。

我将如何使用查询来创建这种行为，或者是否有任何插件能够做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:28:21.990

简单的方法：

它由许多 div 元素组成，它的简单技巧是你应该制作一个持有者 div 并将宽度和高度设置为 100% 并溢出到隐藏，你应该定位到相对的内部位置绝对 div，如下所示：

```
<style>
.holder{
width:100%;
height:100%;
overflow:hidden;
}
</style>
<div class='holder'> </div> 
```

然后添加你的项目，你应该为每个项目创建一个像这样的 div：

```
<style>
.item{
width:100%;
height:100%;
}
</style>
<div class="item">Project1</div> 
```

然后您需要设置按钮的 onclick 并将每个前一个 div 的高度更改为 0 并将当前 div 的高度设置为 100%

2011.madebygrave.com 与上部方式相同，但更改项目的顶部而不是高度，我编写了这种方式所需的所有代码，在这里：

[http://jsfiddle.net/4FCrw/](http://jsfiddle.net/4FCrw/)

# ruby - 硬编码“需要'调试'”找不到源文件

> ID：15868619
> 
> 赞同：3
> 
> 时间：2013-04-07T22:29:47.220
> 
> 标签：ruby, debugging

使用这个最小的 ruby​​ 代码：

```
require 'debug'
puts 
```

在一个名为的文件中，例如 script.rb

如果我像这样启动它：`ruby -rdebug script.rb`

然后按`l`调试提示，我得到了列表，如预期的那样

如果我改为正常运行它`ruby script.rb`

按下时`l`我得到：

```
(rdb:1) l
[-3, 6] in script.rb
No sourcefile available for script.rb 
```

错误消息充其量似乎具有误导性：工作目录没有改变，文件肯定还在那里！

我无法找到有关此行为的文档（我在 jruby 和 mri 上都尝试过，并且行为相同）

*我知道“调试器”和“撬”，但它们服务于不同的用例：*

*我已经习惯了其他带有内置调试模块的脚本语言，它可以让我在代码中的任何位置放置一条语句，以便将我放入调试 shell、检查代码、变量等等……内置它的好处是它随处可用，无需为它设置环境，甚至当我在不是我自己的机器上时*

*我显然可以通过始终调用解释器`-rdebug`并手动设置断点来解决这个问题，但我发现这比替代方法更有效*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:45:31.020

After looking into the debug source code, I found a workaround and a fix:

the workaround can be:

```
trace on
next
trace off
list 
```

this will let you get the listing without restarting the interpreter with `-rdebug`, with the disadvantage that you'll get some otherwise unwanted output from the tracing, and you'll be able to see it only after moving by one statement

for the fix: the problem is that the `SCRIPT_LINES__` Hash lacks a value for the current file... apparently it's only set inside `tracer.rb`

I've changed [line 161](https://github.com/ruby/ruby/blob/2a97015041f7276a84eba777da301c926bd9630d/lib/tracer.rb#L161), and changed the Hash with a subclass that tracks where []= has been called from, and I wasn't able to dig up the actual code that does the work when stepping into a function that comes from a different file

Also: I haven't found a single person yet who actively uses this module (I asked both on #ruby, #jruby and #pry on freenode), and together with the fact that it uses a [function that is now obsolete](http://www.ruby-doc.org/core-2.0/Kernel.html#method-i-set_trace_func) it leads me to be a bit pessimistic about the maintenance state of this module

nonetheless, I submitted a [pull request for the fix](https://github.com/ruby/ruby/pull/280) (it's actually quite dumb and simple, but to do otherwise I'd need a deeper understanding of this module, and possibly to refactor some parts of it... but if this module isn't actively maintaned, I'm not sure that's a good thing to put effort on)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T01:57:28.600

我怀疑 Ruby 解释器无法在没有调试模块中的组件的情况下加载源文件。因此，没有-rdebug，就无法访​​问源文件。我同意这是一个误导性错误。“未加载调试功能”可能会更好。

# wpf - 将大图像加载到 WPF 应用程序 - 滚动和绘图都需要

> ID：15868621
> 
> 赞同：4
> 
> 时间：2013-04-07T22:29:56.487
> 
> 标签：wpf, image, canvas, scrollviewer

我知道如何只做这些req中的一个，而不是两者。

为了加载大图像并能够滚动查看其所有部分，我在 a 中添加了图像`<ScrollViewer/>`并得到了我需要的东西。

为了在图像上绘图，我能够将该图像加载为`<Canvas/>`.

但是如何实现两者呢？

基本上，我有一个我不想缩小的非常大的图像，并且该图像上绘制了一堆房间（例如建筑物的平面图）。我有房间的坐标，当用户在房间内点击时，我想用颜色填充那个房间（目前我只有一个显示“房间 1 已被点击”的列表框）。

编辑的 XAML（用于缩小图像）：

```
 <Grid Margin="10">
    <Grid.RowDefinitions>
        <RowDefinition Height="30" />
        <RowDefinition Height="*" />
        <RowDefinition Height="200" />
    </Grid.RowDefinitions>

    <ComboBox x:Name="buildingCombo" Grid.Row="0" ItemContainerStyle="{DynamicResource ComboItemStyle}" Tag="{Binding}"
              Template="{StaticResource ComboBoxTemplate}"  Width="1000" SelectionChanged="buildingCombo_SelectionChanged"/>

    <Grid Grid.Row="1">

        <ScrollViewer  Grid.Column="0"  HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
            <Canvas Width="{Binding ActualWidth, ElementName=image}" Height="{Binding ActualHeight, ElementName=floorPlanImage}" >
                <Canvas.Background>
                    <VisualBrush  >
                        <VisualBrush.Visual>
                            <Image Grid.Column="0" Stretch="None" x:Name="floorPlanImage" MouseLeftButtonDown="Image_MouseLeftButtonDown"/>
                        </VisualBrush.Visual>
                    </VisualBrush>
                </Canvas.Background>
            </Canvas>
        </ScrollViewer>
    </Grid>

    <DataGrid Grid.Row="2" ColumnHeaderStyle="{DynamicResource GridViewColumnHeaderStyle}" Background="LightGray" RowBackground="LightYellow" AlternatingRowBackground="LightBlue" 
              x:Name="dataGridViewRoomQuery"  BorderBrush="Gray" BorderThickness="5"/>

</Grid> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T23:21:05.287

You could just set the `Canvas` size to the Size of the `Image` that you have set as the `Background`, This will allow you to use the `ScrollViewer` and keep the correct `Image` size when set as the `Canvas` `Background`

Example:

```
<ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
    <Canvas Width="{Binding ActualWidth, ElementName=image}" Height="{Binding ActualHeight, ElementName=image}" >
        <Canvas.Background>
            <VisualBrush  >
                <VisualBrush.Visual>
                    <Image x:Name="image" Source="/WpfApplication10;component/Capture.PNG"  />
                </VisualBrush.Visual>
            </VisualBrush>
        </Canvas.Background>
    </Canvas>
</ScrollViewer> 
```

Result:

![enter image description here](https://i.stack.imgur.com/KOAke.png)

# r - 如何在R中的x轴上设置离散值

> ID：15868625
> 
> 赞同：0
> 
> 时间：2013-04-07T22:30:22.570
> 
> 标签：r

当我绘制数据时：

```
plot(c(1.2,4,7),col=2) 
```

如何显示我的图表，使其仅在 x 轴上显示整个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:36:52.553

首先关闭`plot`语句中的 x 轴：

```
plot(c(1.2, 4, 7), col=2, xaxt="n") 
```

然后添加您选择的轴，例如：

```
axis(1, at=round(x, 0)) 
```

`x`您想要刻度线的未舍入值在哪里

# jquery - jQuery 变量元素语法

> ID：15868626
> 
> 赞同：0
> 
> 时间：2013-04-07T22:30:29.410
> 
> 标签：jquery, syntax

我在我的函数中多次使用相同的元素。例如：

```
var myElement = jQuery('#some_div_with_good_id');
var myChildren = jQuery('#some_div_with_good_id span'); 
```

那么如何优化此代码以缩短第二个变量？我试过：

```
var myChildren = jQuery(myElement, 'span'); 
```

但这不起作用:(我是jQuery的新手，如果你认为这是个愚蠢的问题，很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T22:32:37.630

换个方式试试，`jQuery('span', myElement)`应该可以的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T22:33:46.360

```
var children = $( element ).children( 'span' ); 
```

# jquery - 单击 gmail 中的链接不会触发我的 jquery 事件，我该怎么做才能修复它？

> ID：15868627
> 
> 赞同：0
> 
> 时间：2013-04-07T22:30:41.743
> 
> 标签：jquery, html, events, google-chrome-extension

当您单击 gmail 中的链接时，不会触发“单击”事件。点击其他网站作品中的链接，点击gmail作品中的简单文本。但不是当您单击 gmail 中的链接时。

```
$('body').on('click', function(event) {
    console.log("Entered function");
}); 
```

还尝试了以下方法，但没有运气。

```
$('a').click(function(){
    console.log("Entered function");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-13T21:44:19.693

在我尝试过 javascript 的大多数电子邮件客户端中，它不起作用。正如约翰所指出的，[这篇](https://stackoverflow.com/questions/2520300/how-to-embed-functionality-into-html-email)文章的答案指出了为什么它通常被禁用；

> 我担心这样的功能虽然在理论上是可行的，但不会很实用，因为大多数电子邮件客户端会删除或禁用 JavaScript 以防止恶意代码执行或其他安全问题

我想如果你*非常*了解你的听众，你可以使用它，因为，作为[这篇](https://stackoverflow.com/questions/3054315/is-javascript-supported-in-an-email-message)文章的第一个答案（写于 2010 年，所以不要抱太大希望）

> Lotus Notes、Mozilla Thunderbird、Outlook Express 和 Windows Live Mail 似乎都支持某种 JavaScript 执行。别的什么都没有。

最后的手段可能是编写病毒，只需打开电子邮件，然后更改电子邮件客户端的源代码以启用 javascript 功能即可进入计算机。不过，我不建议这样做。

请改用链接的照片。*请*。

# wordpress - 如果付款完成 - buddypress wordpress

> ID：15868628
> 
> 赞同：1
> 
> 时间：2013-04-07T22:30:44.863
> 
> 标签：wordpress, membership, buddypress

我正在制作 buddypress 自定义订阅表格。

在填写会员表格后创建帐户的那一刻，这意味着许多帐户是在没有支付的情况下创建的。我们要收拾这个烂摊子。

我想在付款步骤结束时移动要创建的帐户。

```
$anyerrors = $error->get_error_code();
if(is_wp_error($error) && !empty($anyerrors)) {
        $messages = $error->get_error_messages();
        $content .= '<p class="error" id="reg-error" style="display: block;">';
        $content .= implode('<br/>', $messages);
        $content .= '</p>';
        // Show the page so that it can display the errors
        $content = $this->output_registeruser( $content, $_POST );
    } else {
        $content = $this->output_paymentpage( $user_id );
        // everything seems fine (so far), so we have our queued user so let's
        // run the bp complete signup action
        do_action( 'bp_complete_signup' );
        // display the payment forms
        if(!defined('MEMBERSHIP_NOLOGINONREGISTRATION')) {
            if(!headers_sent()) {
                    wp_set_current_user($user_id);
                    wp_set_auth_cookie($user_id);
                    }
        } 
```

$content = $this->output_paymentpage($user_id); 此行负责重定向到 PayPal。

do_action('bp_complete_signup'); 这是用于创建帐户的。

我想知道如果付款完成与否，是否有任何方法可以从 PayPal 获得真/假的“回复”。

如何以正确的方式做到这一点？

在此先感谢，亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:10:59.410

使用贝宝 IPN。它将使用有关付款的 POST 数据向具有付款状态的指定 url 发出请求。如果付款成功，您可以在该文件中创建一个用户。

更多信息在这里：[https ://www.paypal.com/ipn](https://www.paypal.com/ipn)

# hadoop - 在hadoop map reduce中读取excel文件

> ID：15868631
> 
> 赞同：2
> 
> 时间：2013-04-07T22:31:01.210
> 
> 标签：hadoop, mapreduce, bigdata

我正在尝试读取包含一些数据以在 hadoop 中聚合的 Excel 文件。map reduce 程序似乎工作正常，但输出生成的格式不可读。我是否需要对 Hadoop 中的 Excel 文件使用任何特殊的 InputFormat 阅读器Map Reduce ?.我的配置如下

```
 Configuration conf=getConf();
Job job=new Job(conf,"LatestWordCount");
job.setJarByClass(FlightDetailsCount.class);
Path input=new Path(args[0]);
Path output=new Path(args[1]);
FileInputFormat.setInputPaths(job, input);
FileOutputFormat.setOutputPath(job, output);
job.setMapperClass(MapClass.class);
job.setReducerClass(ReduceClass.class);
//job.setCombinerClass(ReduceClass.class);
job.setInputFormatClass(TextInputFormat.class);
job.setOutputFormatClass(TextOutputFormat.class);
job.setMapOutputKeyClass(Text.class);
job.setMapOutputValueClass(Text.class);
//job.setOutputKeyClass(Text.class);
//job.setOutputValueClass(Text.class);
System.exit(job.waitForCompletion(true)?0:1);
return 0; 
```

输出结果如下所示 ��KW ��O�A��]n��Ε��r3�\n"���p�饚6W�jJ���9W�f=��9ml��dR y/Ք��7�^�i ��M*Ք�^nz��l��^�)��妗j�(��dRͱ/7�TS*��M//7�TS�� &�jZ��o��TSR�7�@�)�o��TӺ��5{%��+��ۆ�w6-��=�e�_}m�)~��ʅ� ������: #�j�]��u����>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T22:47:11.720

我不知道是否有人真的为 MS Excel 文件开发了一个自定义 InputFormat（我对此表示怀疑，快速研究没有发现任何结果），但您肯定无法使用 TextInputFormat 读取 Excel 文件。XSL 文件是二进制文件。

解决方案：将您的 Excel 文件导出为 CSV 或 TSV，然后您就可以使用 TextInputFormat 加载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T18:40:39.653

我知道这有点晚了，但现在有人已经创建了 excel 输入格式作为此类问题的标准解决方案。阅读这个 - [https://sreejithrpillai.wordpress.com/2014/11/06/excel-inputformat-for-hadoop-mapreduce/](https://sreejithrpillai.wordpress.com/2014/11/06/excel-inputformat-for-hadoop-mapreduce/)

有一个带有代码库的 github 项目。

看这里 - [https://github.com/sreejithpillai/ExcelRecordReaderMapReduce/](https://github.com/sreejithpillai/ExcelRecordReaderMapReduce/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-04T13:24:16.017

您还可以使用 HadoopOffice 库，它允许您使用 Hadoop 和 Spark 读取/写入 Excel。它在 Maven Central 和 Spark 包中可用。

[https://github.com/ZuInnoTe/hadoopoffice/wiki](https://github.com/ZuInnoTe/hadoopoffice/wiki)

# java - 线程/处理程序错误 - 指定的消息队列同步屏障令牌尚未发布

> ID：15868635
> 
> 赞同：7
> 
> 时间：2013-04-07T22:31:44.087
> 
> 标签：java, android, multithreading, handler

我收到此错误 -

> java.lang.IllegalStateException：指定的消息队列同步屏障令牌尚未发布或已被删除。

作为 Java/Android 的相对新手，毫无疑问我错过了一些东西，但我正在做的是 -

我有一个项目，它使用 Exif 数据根据拍摄日期显示照片，目的是在每个阶段使用类似的模型......

工作线程 -> UI 线程 -> 自定义显示适配器。然后单击 GridView 中的一个“单元格”会触发下一个 Activity。第一个活动搜索所有照片文件，创建“年”列表，然后每个后续活动将其过滤为月、日等。

然而，启动第二个活动会直接引发上述错误，并且通过基本的线程/处理程序设置处理消息。

这是将消息传递给线程的类 -

```
public class MonthSort {
Handler handler;
int imageWidth;
List<PhotoData> photoList;
public MonthSort(Handler handler2, int width, List<PhotoData> pList) {
    photoList = new ArrayList<PhotoData>();
    photoList = pList;
    imageWidth = width;
    handler = handler2;
}

public void sortFiles()
{
    int month, photoCount;
    File fileName = new File("");
    Message msg = handler.obtainMessage();
    //Message msg = Message.obtain();
    //Bundle bundle = new Bundle();
    try {
        for (int i = 0; i < 12; i++) {
            month = i + 1;
            photoCount = 0;
            for (PhotoData pd : photoList) {
                if(month == pd.month)
                {
                    if(photoCount == 0)
                        fileName = pd.fileName;
                    photoCount++;
                }
            }
            if(photoCount != 0)
            {

                Bundle bundle = new Bundle();
                bundle.putString("filename", fileName.toString());
                bundle.putInt("month", month);
                bundle.putInt("count", photoCount);
                byte[] thumbNail = getThumbnail(fileName, imageWidth);
                bundle.putByteArray("thumbnail", thumbNail);

                msg.setData(bundle);
                handler.sendMessage(msg);

            }
        }
    } catch (Exception e) {
        // TODO Auto-generated catch block
        Log.d("Debug", "handler error occurs in monthSort class");
    }
    /*Bundle bundle = new Bundle();
    bundle.putBoolean("end", true);
    msg.setData(bundle);
    handler.sendMessage(msg);*/
} 
```

...这是在 UI 线程中接收它的代码。

```
public class MonthActivity extends Activity {
List<PhotoData> photoList;
static List<MonthData> photos;
int imageWidth;
GridView photoGrid;
static ImageAdapter2 iAdapter;
int year;
Thread monthSortThread;

Handler handler2 = new Handler() {
    @Override
    public void handleMessage(Message msg) 
    {
        Bundle bundle = msg.getData();  // Get the message sent to the Handler.
        boolean ended = bundle.getBoolean("end");
        if(ended)
        {
            //Toast.makeText(getBaseContext(), "FINISHED !!!", Toast.LENGTH_LONG).show();
        } else
        {
            try {
                MonthData md = new MonthData();
                md.monthValue = bundle.getInt("month");
                md.monthString = getMonthString(md.monthValue);
                md.count = bundle.getInt("count");
                byte[] tn = bundle.getByteArray("thumbnail");
                md.thumbnail =  BitmapFactory.decodeByteArray(tn, 0, tn.length);
                photos.add(md);
                iAdapter.notifyDataSetChanged();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                Log.d("Debug", "handler error occurs in UI Handler");
            }
        }
    }
}; 
```

请注意，我没有包含所有代码，仅包含我认为相关的部分。

上一个活动成功地以同样的方式操作消息，为什么不是第二个活动？

我知道主 UI 线程已经设置了一个活套，因此您不必创建一个。任何后续启动的活动仍然如此吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T10:05:58.397

通过使用 Handler 的 dispatchMessage 方法而不是 sendMessage 解决了这个问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-10T09:47:18.783

我遇到了和你在这里一样的问题。经过两天的挣扎，我找到了解决它的方法。很简单。只需在更新任何 UI 之前在 handlerMessage() 中添加 this.obtainMessage() 即可。这样做之后，现在一切都会好起来的。

我想这是因为我们在 UI 线程和后台线程之间的通信太快了，在这种情况下，Android 系统无法自行正确调度 Msg。当我们强制 Android 这样做时，问题就解决了。我不确定，这只是一个猜测。我希望它可以帮助你。

# winforms - 如何从容器控件的 UserControl 中为 DevExpress ComboboxEdit 设置 SearchLookUpEdit？

> ID：15868636
> 
> 赞同：0
> 
> 时间：2013-04-07T22:31:46.493
> 
> 标签：winforms, entity-framework, data-binding, user-controls, devexpress

我有一个包含 DevExpress ComboBoxEdit 控件的 UserControl，其中 SearchLookUpEdit 作为编辑器集。我已经在 Designer 中设置了 searchLookUpEditView 及其列。

我想从容器控件中设置 UserControl 的 DataSource、DisplayMember 和 ValueMember 属性，但在运行时出现错误

```
"Data binding directly to a store query (DbSet, DbQuery, DbSqlQuery) is not supported. Instead populate a DbSet with data, for example by calling Load on the DbSet, and then bind to local data" 
```

但如果我使用此代码，为容器中的 ComboboxEdit 设置 DataSource，而不是在 UserControl 中 - 那么一切正常

### 来自父控件的代码：

```
 //_context is Entity Framework's ObjectContext
    //workUnit1 is UserControl, that contains ComboBoxEdit control
        var mod3 = (from a in _context.Darbi
                    select new { a.ID, a.pieteikuma_Nr, a.Nosaukums, title = a.pieteikuma_Nr + " " + a.Nosaukums });

        workUnit1.DataSource = mod3;
        workUnit1.ValueMember = "ID";
        workUnit1.DisplayMember = "title"; 
```

### 来自用户控件的代码：

```
 [ComplexBindingProperties("DataSource", "DisplayMember")] //UserControl's attributes
    public partial class WorkUnit: UserControl
    {
        //DataBinding parameters from container control
        private object _dSource; //dataSource
        private string _dMember; //displayMember
        private string _vMember; //valueMember

        //..//

        [AttributeProvider(typeof(IListSource))]
        public object DataSource
        {
            get { return _dSource; }
            set
            {
                if (value != null)
                {
                    _dSource = value;

                //workNameCmbBox is ComboBoxEdit control that i need to set SearchLookUpEdit from parent control
                    workNameCmbBox.DataBindings.Add("EditValue", _dSource, "ID");//The error is thrown at this line...
                 }
            }
            public string DisplayMember
            {
                get { return _dMember; }
                set
                {
                    _dMember = value ?? "";//ja null, tad ""
                    workNameCmbBox.Properties.DisplayMember = _dMember;
                } 
            }
            public string ValueMember
            {
                get { return _vMember; }
                set { 
                _vMember = value ?? ""; //ja null, tad ""
                workNameCmbBox.Properties.ValueMember = _vMember;
                }
            }
        } 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:34:07.790

您不能直接绑定到查询结果，而是需要填充一些本地集合。要完成此任务，您可以使用以下代码：

```
var list = mod3.ToList();
workUnit1.DataSource = list; 
```

甚至是以下代码：

**编辑**

```
BindingList<T> bList = new BindingList<T>();

//
//...populate bList
//

BindingSource bSource = new BindingSource();
bSource.DataSource = bList;

//...set DataSource for usercontrol
workUnit1.DataSource = bSource; 
```

# google-drive-api - 如何在使用 google api 更改谷歌驱动器中的文件时获取推送通知

> ID：15868640
> 
> 赞同：10
> 
> 时间：2013-04-07T22:32:03.387
> 
> 标签：google-drive-api

如果用户使用谷歌驱动器注册，是否有任何方法可以将文件更改推送到您的网站？对于我的网站，我正在对谷歌文档进行一些后期处理，如果我能让用户识别他们想要跟踪的文件并且每次他们更改文件时，我会自动收到通知，我可以下载我这边的新版本。

我尝试在谷歌驱动器 api 页面上搜索，我只能找到“实时 api”，它似乎是一个用于在我自己的两个文件之间同步更改的 api，而不是从谷歌驱动器向我推送更改。

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-12T21:30:04.393

此功能已于今天推出。[https://developers.google.com/drive/push?hl=en](https://developers.google.com/drive/push?hl=en)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T18:28:28.580

没有推送通知，但您可以轮询“更改提要”。

[https://developers.google.com/drive/manage-changes](https://developers.google.com/drive/manage-changes)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T23:47:54.830

Notifications for updates on file/directory changes are not available at the moment. Drive team is considering this as a future feature.

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2015-09-28T10:59:55.800

作为替代方案，您可以查看**[gdrive2slack](https://github.com/optionfactory/gdrive2slack)**项目源以查看不使用推送 API 的实现示例。我们轮询 Drive 以更好地控制速率，而不是将通知推送到 Slack。

# c++ - 洗牌向量的甲板

> ID：15868641
> 
> 赞同：0
> 
> 时间：2013-04-07T22:32:21.393
> 
> 标签：c++, vector, shuffle

这是我正在使用的。我有一个包含卡片信息的 Card 类，我有一个设置 52 张卡片组的卡片组，我有一个设置卡片向量的 Shoe 类。问题是洗牌。std::random_shuffle 效果很好，但我无法完成我正在寻找的东西。

我可以洗牌，也可以洗牌的向量，但它仍然会将牌堆堆叠在一起。我正在寻找一种将牌组洗牌的方法。任何帮助将不胜感激。;)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:37:11.197

在 Shoe 类中，您可以创建另一个卡片向量并使用 insert 方法将所有 Deck 向量连接在一起，然后将结果向量洗牌（假设您只是想要一个装满卡片的大量混合 Shoe）。

# c# - 如何使用 Midi dot net 类在 C# 中读取打击乐音符值

> ID：15868653
> 
> 赞同：4
> 
> 时间：2013-04-07T22:33:39.330
> 
> 标签：c#, .net, midi

我正在开发一个 VB.net 应用程序，它需要从外部鼓垫读取 MIDI 音符值，该鼓垫在通道 10 上发送值。该值将用于控制我的应用程序的各个方面。

我计划使用此处找到的 MIDI-dot-net 类：[https](https://code.google.com/p/midi-dot-net/) ://code.google.com/p/midi-dot-net/来读取打击乐音符值并查看了其中一个示例由外部键盘演奏的音符并显示出来。

不幸的是，尽管我认为我已经很接近了，但我无法将其转换为我想做的事情。

有没有熟悉这个库并且可以发现我的错误的用户？C# 不是我的主要语言（事实上，VB.net 也不是！）但是如果我可以在 C# 中运行一些东西，那么我可以将它转换为 VB.net 以在我的应用程序中使用。

或者，还有另一种更简单的方法来做我想做的事吗？

到目前为止，这是我的代码：

```
using System;
using Midi;
using System.Threading;
using System.Collections.Generic;

namespace MidiExamples
{    
    public class Example05 : ExampleBase
    {
        public Example05()
            : base("Example05.cs", "Prints notes and chords as they are played.")
        { }

        public class Summarizer
        {
            public Summarizer(InputDevice inputDevice)
            {
                this.inputDevice = inputDevice;
                percussionPressed = new Dictionary<Percussion, string>();
                inputDevice.NoteOn += new InputDevice.NoteOnHandler(this.NoteOn);
                inputDevice.NoteOff += new InputDevice.NoteOffHandler(this.NoteOff);
            }

            private void PrintStatus()
            {
                Console.Clear();
                Console.WriteLine("Play notes and chords on the MIDI input device, and watch");
                Console.WriteLine("their names printed here.  Press any QUERTY key to quit.");
                Console.WriteLine();

                // Print the currently pressed notes.
                List<Percussion> percussion = new List<Percussion>(percussionPressed.Keys);
                percussion.Sort();
                Console.Write("Notes: ");
                for (int i = 0; i < percussion.Count; ++i)
                {
                    //Pitch pitch = pitches[i];
                    Percussion percussionNote = percussion[i];
                    if (i > 0)
                    {
                        Console.Write(", ");
                    }
                    Console.Write("{0}", percussionNote.Name());
                }
                Console.WriteLine(); 
            }

            public void NoteOn(NoteOnMessage msg)
            {
                lock (this)
                {
                    percussionPressed[msg.ToString] = true;
                    PrintStatus();
                }
            }

            public void NoteOff(NoteOffMessage msg)
            {
                lock (this)
                {
                    percussionPressed.Remove(msg);
                    PrintStatus();
                }
            }

            private InputDevice inputDevice;
            private Dictionary<Percussion, string> percussionPressed;
        }

        public override void Run()
        {
            // Prompt user to choose an input device (or if there is only one, use that one).
            InputDevice inputDevice = ExampleUtil.ChooseInputDeviceFromConsole();
            if (inputDevice == null)
            {
                Console.WriteLine("No input devices, so can't run this example.");
                ExampleUtil.PressAnyKeyToContinue();
                return;
            }
            inputDevice.Open();
            inputDevice.StartReceiving(null);

            Summarizer summarizer = new Summarizer(inputDevice);
            ExampleUtil.PressAnyKeyToContinue();
            inputDevice.StopReceiving();
            inputDevice.Close();
            inputDevice.RemoveAllEventHandlers();
        }
    }
} 
```

具体来说，我不确定如何定义 NoteOn 和 NoteOff 行为......

提前致谢

菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:01:22.937

> 我原以为可以播放音符，但没有音符值，只有一个似乎没有意义的音高值。

不幸的是，这是不可能的。音符的音高值决定了要演奏的鼓样本。MIDI 协议没有指定“snare on”或“timpani on”。它只是说C2或E5。

That being said, if your controller and synth are using General MIDI, there is a map that is usually followed. [From Wikipedia](http://en.wikipedia.org/wiki/General_MIDI#Percussive):

![enter image description here](https://i.stack.imgur.com/J7ZoK.png)

What I am getting at is that you don't have a code problem. Your problem is with interpreting those pitch values.

# macos - 从外部（父）脚本控制寻呼机（如 less 程序）

> ID：15868656
> 
> 赞同：2
> 
> 时间：2013-04-07T22:33:43.803
> 
> 标签：macos, shell, unix, terminal

在[这个问题](https://stackoverflow.com/questions/15868414/real-time-git-diff)中，我正在探索如何监视我的项目目录的更改，以便我可以保留一个显示始终最新的 git diff 的终端，这样我就可以跳过`git diff`一遍又一遍地输入 shell 并进一步简化我的工作流程。

假设我有一个足够智能的工具，可以准确地知道文件系统何时发生了变化，我怎么能破坏 git diff 的显示？最终的解决方案将能够找出当前显示滚动到的位置，并重新滚动到相同的位置（在合理的位置，因为一切都可能被改变，当然）。我确信有一种方法可以找出您在缓冲区中的位置`less`，然后将其与它的新实例一起传递。

但这里的问题是我如何以编程方式控制**也是**交互式的界面？这是可以做到的吗？我可以使用某些重型工具（例如 tmux）将输入发送到程序中吗？根据我定制 tmux 来做很多事情的经验，它确实能够从 shell 接收命令并执行 shell 命令，并且它确实有一个发送密钥的命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:06:33.100

这是什么？近距离投票？也许有人认为这是不可能的。;)

[我向您展示了完整的解决方案（您可以在github](https://github.com/unphased/shell-utilities)上找到最新版本）：

~/util/git-diff-puppet：

```
#!/bin/sh

# This script runs git diff through tmux at the current directory, so that you can
# interactively scroll it. Listens for changes to the filesystem at this directory
# and tmux is used to issue commands to reload the diff.
set -e
[[ -f .tmp_git_diff ]] && echo "found .tmp_git_diff, exiting" && exit -1
# save the current git diff string to use for comparison
git diff > .tmp_git_diff
function cleanup {
    kill $FSWATCHPID
    rm .tmp_git_diff
    tmux kill-session -t git-diff-puppet
}
trap cleanup EXIT
tmux new-session -d -s git-diff-puppet sh
tmux send-keys -t git-diff-puppet "git diff" enter
fswatch . ~/util/git-diff-puppet-onchange &
FSWATCHPID=$!
tmux attach -t git-diff-puppet
echo "tmux finished: puppet script exiting" 
```

~/util/git-diff-puppet-onchange：

```
#!/bin/sh

# This script is not for invoking directly. It is for use in conjunction (as a "callback") with
# git-diff-puppet: this script will be looking for the .tmp_git_diff file
set -e

[[ ! -f .tmp_git_diff ]] && echo ".tmp_git_diff not found; i was probably invoked in error, aborting" && exit 1
# diffing the current diff with the saved diff to see if we should re-show the git diff in tmux
if ! git diff | diff - .tmp_git_diff > /dev/null; then
    tmux send-keys -t git-diff-puppet q "git diff" enter
    git diff > .tmp_git_diff
fi 
```

这是光荣的。由于[超快的`fswatch`程序](https://github.com/alandipert/fswatch)，即时更新。

还不错的是，我解释了`fswatch`虚假射击（不幸的是）。如果 my`git diff`未更改，则不会通过 tmux 重新运行，因此会保留滚动偏移量。

# python - 具有多个列表乘法运算符的单个列表的紧凑生成

> ID：15868658
> 
> 赞同：2
> 
> 时间：2013-04-07T22:33:45.647
> 
> 标签：python

我想生成一个带有模式的位列表，代码是这样的：

```
sublist = [1] * N_SUBBITS
sublist[0]  = 0 
bits = sublist * N_SUBLISTS 
```

如果`N_SUBBITS = 4`和`N_SUBLISTS = 3`，这会生成如下列表：

```
[0, 1, 1 ,1, 0, 1, 1, 1, 0, 1, 1, 1] 
```

可以用一个表达式来写吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T22:37:03.047

这会吗？

```
In [4]: [1 if x % N_SUBBITS else 0 for x in range(N_SUBBITS * N_SUBLISTS)]
Out[4]: [0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1] 
```

另一个：

```
In [15]: [1 if x else 0 for l in range(N_SUBLISTS) for x in range(N_SUBBITS)]
Out[15]: [0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1] 
```

变化：

```
[x % N_SUBBITS and 1 for x in range(N_SUBBITS * N_SUBLISTS)]
[x and 1 for l in range(N_SUBLISTS) for x in range(N_SUBBITS)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T22:38:50.557

怎么样：

```
>>> N_SUBBITS = 4
>>> N_SUBLISTS = 3
>>> ([0] + [1]*(N_SUBBITS-1)) * N_SUBLISTS
[0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1] 
```

# jquery - 动态添加到 DOM 的元素的单击事件

> ID：15868661
> 
> 赞同：6
> 
> 时间：2013-04-07T22:33:55.923
> 
> 标签：jquery, dom, click

在 jQuery 1.8 之前，当单击由 jquery 动态插入的按钮时，我可以使用 .live() 触发。

现在，.on() 和 .bind() 都不适用于页面加载后添加到 DOM 的元素。

现在有哪些选择？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-07T22:36:15.373

```
$(parent_element).on("click", child_selector, function(evt) {
}); 
```

[http://api.jquery.com/on/#direct-and-delegated-events](http://api.jquery.com/on/#direct-and-delegated-events)

> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。例如，该元素可以是模型-视图-控制器设计中视图的容器元素，或者如果事件处理程序想要监视文档中的所有冒泡事件，则可以是文档。在加载任何其他 HTML 之前，文档元素在文档的头部是可用的，因此在此处附加事件是安全的，而无需等待文档准备好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-26T20:14:29.353

委托比处理程序效率高得多

```
$(document).delegate('click', "selector", function() {
    //your stuff
}); 
```

# scala - 用隐含证据约束一个类

> ID：15868664
> 
> 赞同：5
> 
> 时间：2013-04-07T22:34:13.290
> 
> 标签：scala, path-dependent-type

说我有这个：

```
 trait Animal {
    type Species
  } 
```

我可以很容易地编写一个只需要两个相同物种的动物的函数

```
def breed(a: Animal, b: Animal)(implicit evidence: a.Species =:= b.Species) = ??? 
```

但我想创建一个具有相同约束的类：

```
class Bed(a: Animal, b: Animal)(implicit evidence: a.Species =:= b.Species) 
```

但它不会编译。我尝试了一些尝试使用具有稳定标识符和约束的特征的组合，但无论我做什么 - 我似乎总是遇到问题

```
 trait Bed {
    type T
    def a: Animal { type Species = T }
    def b: Animal { type Species = T }
  }

  object Bed {

    def apply(a1: Animal, b1: Animal)(implicit ev: a1.Species =:= b1.Species) = new Bed {
      type T = b1.Species
      def a = a1  // this line won't compile,  as the compiler can't see the two species are equal ?
      def b = b1 
    }

  } 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T23:31:12.047

您可以通过 Bed.apply 上的类型参数而不是通过类型相等约束来表达约束，

```
object Bed {
  def apply[T1](
    a1: Animal { type Species = T1 },
    b1: Animal { type Species = T1 }) = new Bed {
    type T = T1
    def a = a1
    def b = b1
  }
} 
```

这可以在类型别名的帮助下变得更简洁，

```
type AnimalAux[S] = Animal { type Species = S }

object Bed {
  def apply[T1](a1: AnimalAux[T1], b1: AnimalAux[T1]) =
    new Bed {
      type T = T1
      def a = a1
      def b = b1
    }
} 
```

示例 REPL 会话，

```
scala> trait Dog
defined trait Dog

scala> val tigger = new Animal { type Species = Dog }
tigger: Animal{type Species = Dog} = $anon$1@64bd8f9c

scala> val zebedee = new Animal { type Species = Dog }
zebedee: Animal{type Species = Dog} = $anon$1@61f2bf35

scala> Bed(tigger, zebedee)
res0: Bed{type T = Dog} = Bed$$anon$1@2b0ce330

scala> val b = Bed(tigger, zebedee)
b: Bed{type T = Dog} = Bed$$anon$1@681c81de 
```

# custom-backend - 在 FFDL 中用于声明 FatFractal 事件处理程序的限定符有什么区别？

> ID：15868665
> 
> 赞同：2
> 
> 时间：2013-04-07T22:34:21.340
> 
> 标签：custom-backend

我注意到在 FFDL 中定义事件处理程序的方式有一些变化，涉及使用某些限定符或关键字。例如，我已经看到了`POST`和`ASYNC`关键字的使用：

```
CREATE HANDLER SupportRequestCreate ASYNC ON /SupportRequest CREATE AS javascript:require ('scripts/SupportEventHandlers').handleSupportRequestCreate();

CREATE HANDLER UserCreate POST ON /FFUser CREATE AS javascript:require ('scripts/UserEventHandlers').handleUserCreate(); 
```

只是想知道这些关键字（或任何其他关键字）与事件处理程序的行为有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:28:24.443

您提到的关键字指定了事件处理程序执行相对于触发事件本身的时间。有三种选择：

*   `PRE`**-- 事件处理程序与事件同步**触发，并在事件本身**之前执行。**这对于验证等任务很有用。
*   `POST`**-- 事件处理程序与事件同步**触发，并在事件本身**之后执行。**
*   `ASYNC`**-- 事件处理程序与事件异步**触发。

希望这可以帮助！

# z3 - 满足约束但返回 UNSAT Z3

> ID：15868668
> 
> 赞同：0
> 
> 时间：2013-04-07T22:34:34.510
> 
> 标签：z3

这是我的问题。我有太多的限制。因此，生成的未饱和核心没有提供信息。但是，我手动开始排除约束，并将一组有问题的约束归零。我的目标是检查 Z3 可能存在的已知问题。我正在计算真实变量的概率`p`。我对他们施加界限

```
p1<= 1.0
p1>= 0.0
p2<= 1.0
p2>= 0.0 
```

有一个计算概率的约束。

```
a=1 and b=0 implies p1 = c * p2 
```

`c`这是一个常数。`a`,`b`是实变量。

现在，我观察到的是，我得到了一个 UNSAT，但去掉了界限，我得到了一个 SAT。奇怪的是，当我遍历模型时，对 p1 和 p2 的分配介于 0 和 1 之间。准确地说是 1，因此不会违反这些界限。有没有类似的已知问题？我知道这太含糊了，但是如果不将整个项目放在这里，我不确定如何提出这个问题...

# json - 在 scala 中使用 jerkson 获取列表列表

> ID：15868673
> 
> 赞同：0
> 
> 时间：2013-04-07T22:35:09.387
> 
> 标签：json, scala, jerkson

我有以下内容，并想在 scala 中使用 jerkson，但对此有疑问。我确信这是一个非常业余的错误，但希望能从这里得到一些帮助。

```
 scala> val orig=List("this", List("a", "b", List("c", "d")))
  orig: List[java.lang.Object] = List(this, List(a, b, List(c, d)))

 val json_ver=generate(orig)
 json_ver: String = ["this",["a","b",["c","d"]]]

 //now i want to go from json_ver back to orig list of lists
 //I've tried parse[List[Any]](json_ver)
 //parse[List[List[Any]]](json_ver) 
```

一切都无济于事。如果有人能指出我正确的方向，我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:01:46.307

一个警告：原来的 Codahale`Jerkson`已经被[放弃了](https://github.com/codahale/jerkson)，并且没有为 Scala 2.10 正式构建（尽管有[一些](https://github.com/randhindi/jerkson)Github fork 2.10）。另一方面，[`jackson-module-scala`](https://github.com/FasterXML/jackson-module-scala)（包装）得到充分维护和支持。`jerkson`

[**编辑**]澄清问题后。

原来的数据结构是使用`List`s of `Any`( `List`s and `String`s)。从解析器返回的是`List`，但其中的列表是`java.util.ArrayList`。该类型也是一个列表，但不一样，并且不适合原生的 Scala 集合。除其他外，它具有不同的实现`toString`，这就是输出不同的原因。请注意，它仍然是 Scala 的列表`Any`，而不是 Scala`List`的列表。

解决它的一种方法是使用集合转换器转换为 Scala：

```
import scala.collection.JavaConverters._
// somewhere down the line
val parsedList = parse[List[Any]](json_ver)

parsedList.foreach {
   case s: String => println("string: " + s)
   case l: util.ArrayList[Any] => doSomething(l.asScala.toList)
}

...
def doSomething(lst: List[Any]) {
   println(lst)
} 
```

另一种方法是，如果您要使用 Jackson，您可以将其配置为使用 Java 数组：

```
val mapper = new ObjectMapper()
mapper.configure(DeserializationFeature.USE_JAVA_ARRAY_FOR_JSON_ARRAY, true)
mapper.registerModule(DefaultScalaModule)
mapper.readValue[List[Any]](json_ver, classOf[List[Any]]) 
```

# jquery - jquery 没有按照我的预期行事

> ID：15868676
> 
> 赞同：3
> 
> 时间：2013-04-07T22:35:57.950
> 
> 标签：jquery, css, form-submit

在复选框（或单选框）和显示隐藏内容方面，我尝试做的事情似乎存在问题。

## **html**

```
<input type="checkbox" id="carousel" class="carouselGlobal" name="aisis_options[carousel_global]" value="carousel_global"> 
```

简单的复选框。现在让我们添加一些 jquery 来显示隐藏部分，其中 div 类为`.sectionCarousel`

## **jQuery**

```
 $('.carouselGlobal').click(function(){
        if ($(this).attr("id") == "carousel"){
            $('.sectionCarousel').show();
        } else {
            $('.sectionCarousel').hide();
        }
    }); 
```

这很简单，你点击，你看到，你点击关闭，你看不到......**错了**

**问题**

如果我使用上面的代码单击复选框以显示它显示的隐藏部分，如果我再次单击复选框以取消选中该项目仍然存在。

所以现在如果我们保存表单，我们假设复选框在页面刷新时保持选中状态，我们需要保持显示部分，所以我们这样做：

## **jQuery**

```
 if ($('input[value=carousel_global]:checkbox:checked').attr('id') === "carousel") {
        $('.sectionCarousel').show();
    } 
```

它的作用非常简单。

第一个问题在这里再次重复，如果您单击复选框取消选中它，该部分仍然显示。但是，如果您此时保存表单，则该部分会消失，直到您再次单击该复选框。

如您所见，这可能会成为一个问题。

所以我问你：

**表格保存前**

当我单击复选框时，隐藏部分应显示，当我再次单击它取消选中时，它应该消失。

**表格保存后**

假设在页面刷新时单击该复选框，该部分应保持可见，如果我随后单击该复选框以取消选中它，则内容（在本例中为该部分）应该消失。

单击以显示作品，取消选中并且它（该部分）消失 - 不起作用。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:00:58.280

如果您必须使用绑定到一组元素的点击事件，您还需要检查选中状态，类似于以下内容：

```
$('.carouselGlobal').click(function(){
    var $this = $(this);
    var theId = this.id;

    if (theId === "carousel"){
        if($this.is(":checked")){
            $('.sectionCarousel').show();
        } else {
            $('.sectionCarousel').hide();
        }
    }
}); 
```

* * *

[**演示**](http://jsfiddle.net/97tx6/)- 添加状态检查

* * *

**编辑**

> 在我提交表单之前，您的代码一直有效，之后仍然单击复选框，但部分 div 被隐藏，而它不应该被隐藏。

您可以通过分隔类似于此的代码来解决此问题：

```
var setSectionCarouselState = function (showIt) {
    if (showIt) {
        $('.sectionCarousel').show();
    } else {
        $('.sectionCarousel').hide();
    }
}

$('.carouselGlobal').click(function () {
    var $this = $(this);
    var theId = this.id;

    if (theId === "carousel") {
        setSectionCarouselState($this.is(":checked"));
    }
});

setSectionCarouselState($('#carousel').is(":checked")); 
```

* * *

[**演示**](http://jsfiddle.net/7dgRv/)- 分离代码

* * *

上面的代码不适用于复制粘贴，因为它可以在一个孤立的环境中工作，`jsFiddle`但可能需要进行一些小的调整才能使其在您的特定环境中工作。

**编辑**

> 如果我有 6 或 7 个这些，明显不同的 id 和类是否有一种简单的方法来处理它们，或者我会为每一个写出类似于这个答案的东西？

我不是 100% 确定您的设置如何，但假设您有多个`checkboxes`，每个显示/隐藏 1 对 1 的另一个元素或选择器。您可以编写更通用的解决方案。

一种选择是使用一种`data-attribute`方法，在这种方法中，您分配每个`checkbox`选择器它应该起作用。这也会使`id`属性的使用变得多余。

假设你有类似这样的 HTML：

```
<input type="checkbox" class="carouselGlobal">
<input type="checkbox" class="carouselGlobal" data-target-selector=".anotherSectionCarousel">
<input type="checkbox" class="carouselGlobal" data-target-selector=".sectionCarousel" checked>

<div class="sectionCarousel" style="display:none;">section carousel</div>
<div class="anotherSectionCarousel" style="display:none;">another section carousel</div> 
```

正如您在上面看到的，每个`checkbox`都有一个`data-target-selector`属性，其中包含它应该影响的元素的选择器。

您的脚本现在变得非常小：

```
// method which takes in the DOM reference of a checkbox
// interrogates the data attribute and uses it
// to show/hide the matching element
var setTargetState = function (checkbox) {
    var $this = $(checkbox);
    var $target = $($this.attr('data-target-selector'));

    if(!$target.length){
        return;
    }

    if ($this.is(":checked")) {
        $target.show();
    } else {
        $target.hide();
    }
}

// click event drastically simplified
$('.carouselGlobal').click(function () {
    setTargetState(this);
});

// iterates through all checkboxes ensureing the initial state is applied
$('.carouselGlobal').each(function(){
    setTargetState(this);
}); 
```

* * *

[**DEMO**](http://jsfiddle.net/UxhKR/) - 例如使用数据属性

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:40:19.747

**[jsFiddle 演示](http://jsfiddle.net/P4yse/)**

考虑使用切换，并使用`id`来定位复选框，如下所示：

```
$("#carousel").click(function(){$('.sectionCarousel').toggle();}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T23:02:42.047

试试这个：

```
$('#carousel').click(function(){
    if( $(this).is(':checked') ){
        $('.sectionCarousel').show();
    }else{
        $('.sectionCarousel').hide();
    }
}); 
```

你会希望在你的`$(document).ready()`函数中有这个：

```
if($('#carousel').is(':checked')){
    $('sectionCarousel').show();
else{
    $('sectionCarousel').hide();
} 
```

# ios - 如果我只需要 1 个 UITableViewCell，我可以在不使用重用标识符和所有这些东西的情况下创建它吗？

> ID：15868679
> 
> 赞同：0
> 
> 时间：2013-04-07T22:36:06.977
> 
> 标签：ios, objective-c, uitableview, ios5, ios6

在 cellAtIndexPath 方法中，我可以执行以下操作：

```
UITableViewCell *cell = [[UITableViewCell alloc] init];
UILabel *label = // make label
[cell addSubview:label];

return cell; 
```

这是可能的，还是类似的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T22:39:27.363

**当然，该代码适用于您的情况**。

它也适用于 10,000 行的表格视图，但您会牺牲表格视图使用的性能增强功能，例如单元格重用。使用没有缓存的 10k 手机电视会导致无法使用的体验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:44:18.790

这是一个有效的问题，但 iOS 使用 是`dequeueReusableCellWithIdentifier:`为了更好地管理显示的行，以防您的表格视图的行超出屏幕框架。所以这完全不是推荐的做法。据我所知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T22:47:22.827

如果你的表格视图只有一两行，也许你最好不使用表格视图，除非它提供了一个关键的功能。如果您有超过 4 个或 5 个单元格实例，您将希望合并重用，这样您就不会为表中的每个单元格实例创建一个新单元格。你可以想象这会很快耗尽你的记忆。

# php - 如何提取 HTML 表格的特定单元格

> ID：15868683
> 
> 赞同：0
> 
> 时间：2013-04-07T22:36:35.373
> 
> 标签：php, html, simple-html-dom

有一个我想从中提取信息的表格，每一行都有三个单元格，但我只想要每行中的第二个单元格。我正在使用简单的 HTML DOM 来检索信息，但我怎么能写，也许是一个循环？，只获取第二个单元格的代码？

这就是我现在所拥有的。我从这里去哪里？

```
$html = file_get_html("http://url.com");
foreach($html->find("table[class=list-table]") as $top5)
{
echo($top5->plaintext);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:44:35.647

从[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/manual.htm)中，我将提取行`tr`，然后`td`从每一行中选择第二个单元格

```
$html = file_get_html("http://url.com");
foreach($html->find("table[class=list-table] tr") as $tr)
{
    $td = $tr->find('td', 1);
} 
```

`table[class=list-table]`当然，您也可以使用属性`table.list-table`来代替。`class`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:36:53.947

您可以通过以下方式获取每个单元格：

```
table[class=list-table] td[2] 
```

或更简单地说：

```
table.list-table td[2] 
```

# php - 匿名函数返回值

> ID：15868694
> 
> 赞同：15
> 
> 时间：2013-04-07T22:37:59.447
> 
> 标签：php, return, anonymous-function

**更新：**从 PHP7 开始，现在可以使用以下语法使用匿名函数解引用：

```
$array[] = [
    'new' => (function()
    {
        ...
        return mt_rand();
    })(),

    'or' => getClosure()()
] 
```

* * *

原帖：最近在试验一些东西，想知道有没有办法使用匿名函数的返回值

假设我有一个 for 循环，它创建了一个数组，该数组的每个值都必须有一个数据库调用，我想做的是：

```
for($i = 0; $i != 10; $i++)
{
    $array[] = [
        'new' => function(){
            // some proccesing here maybe
            // lets use mt_rand for this example.
            return mt_rand();
        },

        'old' => function(){
            return mt_rand();
        }
    ];
} 
```

或许

```
echo function(){
     // again, we'll just use mt_rand
     return mt_rand();
}; 
```

这些都返回一个`closure`类。对于上面的示例，是否有实际将它们的返回值传递回数组或回显？

更新：我已经确定这是不可能的，所以可以在这里找到功能请求：[http ://bugs.php.net/bug.php?id=64608](http://bugs.php.net/bug.php?id=64608)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-07T23:39:09.987

迄今为止最简单的解决方法：

```
echo call_user_func(function () { return 'foo'; }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T22:41:52.297

尝试将匿名分配给`function`变量。

```
$myFunc = function() {
  return 'Test';
}

echo $myFunc(); // Outputs Test 
```

函数本身的值不是返回值。返回值是函数为 时函数返回的值`called`。

**编辑：**

正如[deceze](https://stackoverflow.com/users/476/deceze)建议的那样，您可以使用[`call_user_func()`](http://php.net/manual/en/function.call-user-func.php). 实现您想要的另一种方法是使用 php's [`eval()`](http://php.net/manual/en/function.eval.php)，这绝不是一个好的编码实践。

```
$array[] = array(
  'new' => call_user_func(function() {
     // some proccesing here maybe
     // lets use mt_rand for this example.
     return mt_rand();
  }),
  'old' => call_user_func(function() {
    return mt_rand();
  }),
); 
```

[`eval()`](http://php.net/manual/en/function.eval.php)

```
echo eval('$x = function() {
  // some proccesing here maybe
  // lets use mt_rand for this example.
  return mt_rand();
}; return $x();'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T23:36:34.983

似乎必须先分配闭包，然后才能取消引用它-试试下面的代码：

```
for($i = 0; $i != 10; $i++)
{
    $array[] = [
    'new' => call_user_func(function(){
        // some proccesing here maybe
        // lets use mt_rand for this example.
        return mt_rand();
    }),

    'old' => call_user_func(function(){
        return mt_rand();
    })
    ];
} 
```

[编辑] - 修改为使用 call_user_func() 而不是自定义函数 - 哦！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T22:44:46.590

您必须将函数分配给 var，[看这里](http://codepad.viper-7.com/YoTvhn)

这部作品

```
 for($i = 0; $i != 10; $i++)
 {
$array[] = [
    'new' => function(){
        // some proccesing here maybe
        // lets use mt_rand for this example.
        return mt_rand();
    },

    'old' => function(){
        return mt_rand();
    }
];
}
echo $array[5]['new'](); 
```

或者

```
$function = function(){
 // again, we'll just use mt_rand
 return mt_rand();
};

echo $function(); 
```

# java - java - 显示列表

> ID：15868699
> 
> 赞同：-3
> 
> 时间：2013-04-07T22:38:20.300
> 
> 标签：java, swing

我对 java 编程还是很陌生，我想知道如何创建一个自动生成的数据列表，例如这样。

![名单](https://i.stack.imgur.com/ABDJk.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T22:41:46.613

我建议使用 a [`JTable`](https://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html)，然后将 at[`JTable`](https://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html)放入 a [`JScrollPane`](https://docs.oracle.com/javase/6/docs/api/javax/swing/JScrollPane.html)。这将允许你做的[`JTable`](https://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html)更大。

[![](https://i.stack.imgur.com/PgmCN.png)](https://i.stack.imgur.com/PgmCN.png)
[（来源：[javalobby.org](http://www.javalobby.org/articles/jtable/images/img8.png)）]

上面是一个 JTable 示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:41:38.087

您可以使用 JTable 组件： [http ://docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T22:46:41.943

鉴于您拥有多种不同类型的数据，您需要的不仅仅是一个简单的列表来包含所有数据。您可以拥有三个数组，每个数组都包含一个信息片段，然后通过一个 for 循环。

```
String[] array1;
int[] array2;
String[] array3;

for (int i = 0; i < something.lengh; i++){
   array1[i] = firstPortionOfData;
   array2[i] = secondPortionOfData;
   array3[i] = thirdPortionOfData;
} 
```

这将是最简单的方法。但是，如果您愿意，可以使用其他一些复杂的结构或其他东西。为了显示它，您可以简单地通过另一个具有类似语法的 for 循环。

希望这可以帮助。

~不倒翁

# opencl - 英特尔阵列构建模块和 GPU

> ID：15868705
> 
> 赞同：1
> 
> 时间：2013-04-07T22:39:36.310
> 
> 标签：opencl, gpu, gpgpu

我正在帮助一位朋友在他的硕士论文中使用英特尔数组构建块或 MetaOcaml 等元语言编程模型在多个 CPU（和 GPU，如果可能的话）上并行化所选算法。

如果 GPGPU 在 metalangage 编译器下可用，则将使用 Radeon HD7970。

他本来打算用intel arbb，但我们最近发现这个项目已经从测试版转移到了“whatif”状态（我不知道这是什么意思？！）。所有下载（软件和文档）都被禁用。

所以我有一些问题：

**1.**最新的 intel arbb beta 版本真的支持 GPGPU，因为唯一确认这是硕士论文的文件：

“使用 Intel Array Building Blocks 在 GPU 上进行并行编程”

[http://sdsu-dspace.calstate.edu/handle/10211.10/2355](http://sdsu-dspace.calstate.edu/handle/10211.10/2355)

**2.** Intel Arbb 是否取消，是否有其他 Intel 库软件支持 nvidia 或 amd gpus 上的 GPGPU？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:31:18.590

最好的选择是使用 openCL。你也可以看看 polly 的 GPGPU：[http://polly.llvm.org/documentation/gpgpucodegen.html](http://polly.llvm.org/documentation/gpgpucodegen.html)但它远不是一个可靠的项目。

使用 openCL，您将能够在许多平台上并行化您的算法，包括 NVIDIA 和 AMD 的 GPGPU、AMD 的 CPU、英特尔的 CPU（尽管它取决于您的操作系统和 CPU，请参阅：[http://software.intel。 com/en-us/vcsource/tools/opencl-sdk](http://software.intel.com/en-us/vcsource/tools/opencl-sdk) )

例如，您可以通过阅读本书开始使用 openCL 进行编程：“使用 opencl 进行异构计算”：[http ://store.elsevier.com/Heterogeneous-Computing-with-OpenCL/Benedict-Gaster/isbn-9780124058941/](http://store.elsevier.com/Heterogeneous-Computing-with-OpenCL/Benedict-Gaster/isbn-9780124058941/)

# php - 谷歌地图和活动地点

> ID：15868708
> 
> 赞同：0
> 
> 时间：2013-04-07T22:40:20.167
> 
> 标签：php, api, google-maps, google-maps-api-3

我在我的网站上为用户提供了一些事件这些事件有一个我想放置谷歌地图的位置这是我的代码

```
<!DOCTYPE html>
<html>
<head>
<script
src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDY0kkJiTPVd2U7aTOAwhc9ySH6oHxOIYM&sensor=false">
</script>

<script>

var myCenter = new google.maps.LatLng(51.508742, -0.120850);

function initialize() {
    var mapProp = {
        center: myCenter,
        zoom: 5,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);
    var marker = new google.maps.Marker({
        position: myCenter,
    });
    marker.setMap(map);
}
google.maps.event.addDomListener(window, 'load', initialize);

</script>

</head>

<body>
<div id="googleMap" style="width:500px;height:380px;"></div>
</body>
</html> 
```

但我有 2 个问题

第一个问题是：我如何将地图设置为专注于沙特阿拉伯第二个问题是：如果我们在某个地方有事件，我如何将位置放在地图中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-12T10:12:30.490

这是用于在事件的地图上放置标记的 javascript（比如 script.js 文件）（在您的情况下）：

```
var map = false;
var markers = [];

(function () {
    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.src = 'http://maps.googleapis.com/maps/api/js?key=AIzaSyDualhHxdg8nNCo4xY6gIfedyaHffW99UI&libraries=geometry,places&sensor=false&callback=initialize';
    document.body.appendChild(s);

})();

function initialize() {

    var geocoder = false;

    map = new google.maps.Map(document.getElementById('map'), {
        zoom: 15,
        mapTypeId: 'grayscale',
        scrollwheel: false,
        overviewMapControl: false,
        panControl: false,
        rotateControlOptions: false,
        streetViewControl: false,
        mapTypeControl: false
    });

    map.mapTypes.set("grayscale", new google.maps.StyledMapType([{
        featureType: 'all',
        elementType: 'all',
        stylers: [{
            saturation: -80
        }]
    }], {
        name: 'Grey Scale'
    }));

    geocoder = new google.maps.Geocoder();

    geocoder.geocode({
        address: 'Saudi Arabia'
    }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {

            //this get the longitude and latitude of the saudi arabia
            var center = new google.maps.LatLng(results[0].geometry.location.lat(), results[0].geometry.location.lng());

            //this focuses on the saudi arabia
            map.setCenter(center);

            // Get the coordinates of the center of the map
            var center = map.getCenter();

            google.maps.event.addListenerOnce(map, 'bounds_changed', function () {

            //ajax to get event location with longitude and latitude from database
                xhr = $.ajax({
                    url: '/joey/event',
                    data: {
                        param:"your param"
                    },
                    dataType: 'json',
                    success: function (data) {

                        //then run loop over json data to add the markers on the map for the events
                        //code in loop start

                        // Here you can put the latitude and longtitude associated with event
                        var center = new google.maps.LatLng(latitude, longitude);

                        var event = new google.maps.Marker({
                            map: map,
                            title: "event name",
                            zIndex: 10000,
                            icon: 'event-icon.png',
                            position: new google.maps.LatLng(jlat, jlng)
                        });
                        markers.push(event);
                        //code in loop end

                    }
                });
            });
        }
    });

} 
```

在html页面中简单地说：

```
<div id="map"></div>
    <script type="text/javascript" src="script.js" defer></script> 
```

我希望这可以对你有所帮助。

# php - 如何将信息保存在数组中以供会话调用php

> ID：15868710
> 
> 赞同：-2
> 
> 时间：2013-04-07T22:40:41.810
> 
> 标签：php, arrays, session, cookies

所以这是来自一本非常糟糕的 PHP 书。它假定您已经知道如何使用 PHP，并针对它提出的问题给出了完全不适用的示例。我需要将任务保存到一个数组中，这样当页面打开备份时，它会显示您之前所做的任务。除了极其简单和极其困难之外，Web 几乎没有任何 PHP 示例。

```
<?php
$lifetime = 60 * 60 * 24 * 365 ;    
session_set_cookie_params($lifetime, "/");
session_start();

if (empty($_SESSION['tasks'])) $_SESSION['tasks'] = array();

if (isset($_POST['tasklist'])) {
    $task_list = $_POST['tasklist'];
} else {
    $task_list = array();
}

$errors = array();

switch( $_POST['action'] ) {
    case 'add':
        $new_task = $_POST['newtask'];
        if (empty($new_task)) {
            $errors[] = 'The new task cannot be empty.';
        } else {
            $task_list[] = $new_task;
        }
        break;
    case 'delete':
             $task_index = $_POST['taskid'];
             unset($task_list[$task_index]);
            $task_list = array_values($task_list);
            break;
    } 
```

任务列表.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Task List Manager</title>
    <link rel="stylesheet" type="text/css" href="main.css"/>
</head>
<body>
    <div id="page">
    <div id="header">
        <h1>Task List Manager</h1>
    </div>
    <div id="main">

    <!-- part 1: the errors -->
    <?php if (count($errors) > 0) : ?>
    <h2>Errors</h2>
    <ul>
        <?php foreach($errors as $error) : ?>
            <li><?php echo $error; ?></li>
        <?php endforeach; ?>
    </ul>
    <?php endif; ?>

    <!-- part 2: the tasks -->
    <h2>Tasks</h2>
    <?php if (count($task_list) == 0) : ?>
        <p>There are no tasks in the task list.</p>
    <?php else: ?>
        <ul>
        <?php foreach($task_list as $id => $task) : ?>
            <li><?php echo $id + 1 . '. ' . $task; ?></li>
        <?php endforeach; ?>
        </ul>
    <?php endif; ?>
    <br />

    <!-- part 3: the add form -->
    <h2>Add Task</h2>
    <form action="." method="post" >
        <?php foreach($task_list as $task) : ?>
          <input type="hidden" name="tasklist[]" value="<?php echo $task; ?>"/>
        <?php endforeach; ?>
        <input type="hidden" name="action" value="add"/>
        <label>Task:</label>
        <input type="text" name="newtask" id="newtask" /> <br />
        <label>&nbsp;</label>
        <input type="submit" value="Add Task"/>
    </form>
    <br />

    <!-- part 4: the delete form -->
    <?php if (count($task_list) > 0) : ?>
    <h2>Delete Task</h2>
    <form action="." method="post" >
        <?php foreach($task_list as $task) : ?>
          <input type="hidden" name="tasklist[]" value="<?php echo $task; ?>"/>
        <?php endforeach; ?>
        <input type="hidden" name="action" value="delete"/>
        <label>Task:</label>
        <select name="taskid">
            <?php foreach($task_list as $id => $task) : ?>
                <option value="<?php echo $id; ?>">
                    <?php echo $task; ?>
                </option>
            <?php endforeach; ?>
        </select>
        <br />
        <label>&nbsp;</label>
        <input type="submit" value="Delete Task"/>
    </form>
    <?php endif; ?>

    </div><!-- end main -->
    </div><!-- end page -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:04:33.087

修改后（使用操作切换），您没有将新数组存储在 _SESSION 中。这样做：

```
$_SESSION['tasks'] = $task_list; 
```

要查看它们：

```
foreach($_SESSION['tasks'] as $value) {
    //display task
} 
```

顺便说一句，这是个**糟糕**的主意。你应该使用数据库。一些主机阻止 session_set_cookie_params 并且用户在清除浏览器缓存后会丢失他的数据。

你也应该这样称呼它：

```
session_set_cookie_params($time); 
```

第二个参数是可选的。

**更多数据示例**

核：

```
//session start etc
if(!isset($_SESSION['tasks'])) $_SESSION['tasks'] = array();
if(isset($_POST['action']) {
    switch($_POST['action']) {
        case 'add':
            if(isset($_POST['newtask']) && !empty($_POST['newtask']))
                $_SESSION['tasks'][] = $_POST['newtask'];
            break;
        case 'remove':
            if(isset($_POST['taskid']))
                unset($_SESSION['tasks'][$_POST['taskid']]);
            break;
    }
} 
```

展示：

```
echo '<form method=post><input type=hidden name=action value=remove>';
foreach($_SESSION['tasks'] as $k => $v) {
    echo $v.'<br />Remove: <input type=submit name=taskid value='.$k.'>';
}
echo '</form>'; 
```

添加：

```
<form method=post>
<input type=hidden name=action value=add>
<input type=text name=newtask>
<input type=submit>
</form> 
```

# iphone - 为 iOS 4 App 添加 iPhone 5 xib

> ID：15868713
> 
> 赞同：1
> 
> 时间：2013-04-07T22:41:32.327
> 
> 标签：iphone, xcode, xib

`MainWindow.xib`我使用and为 iPad 和 iPhone 开发了一个应用程序`MainWindow_pad.xib`。iPhone/iPod 的主界面是`MainWindow`和 iPad 的`MainWindow_pad.xib`

现在我们希望支持 iPhone 5。该应用程序必须与 iOS 4 兼容，所以我不能使用 AutoSizing。因此我`MainWindow_5.xib`为 iPhone 5 创建。

现在是我可以加载的问题`MainWindow_5.xib`？？

在`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`或之前？

我一直在上下搜索互联网，但没有找到可行的解决方案。我不能是唯一面临这个问题的人吗？

我希望得到一些帮助来解决这个问题:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:55:21.320

您是否考虑过使用“旧”自动调整掩码？

即 UIViewAutoresizingFlexibleHeight

您应该能够以轻松在 iPhone 5/4 上工作并支持向后兼容性的方式设置遮罩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:18:44.427

您必须在运行时加载正确的 XIB。这意味着检查是否`[[[UIScreen main screen] bounds] height]`返回 568。如果是，则加载基于 4" 屏幕的 XIB，否则加载正常的。这一切都在`application:didFinishLaunchingWithOptions:`.

# javascript - Couchbase 与 Cloudant CouchDB - 在 reduce 中与 Javascript 的差异

> ID：15868715
> 
> 赞同：0
> 
> 时间：2013-04-07T22:41:39.467
> 
> 标签：javascript, couchdb, reduce, cloudant

好吧，我整个周末都在想办法解决这个问题，我终于被难住了。我的减少地图功能：

```
function(doc) {
 if(doc.primary_keys) {
    for(pi in doc.primary_keys) {
        var pk = doc.primary_keys[pi];

        for(row_i in doc.data) {
            var row = doc.data[row_i];
            if(row[pk]) {
                emit([row[pk]], doc._id);
            }
        }
    }
 }
} 
```

我的观点减少了：

```
 function(keys, values) {
   var retval = {};

   for(var val_i in values) {
       var key = values[val_i];

       if(key in retval) {
           retval[key] += 1;
       } else {
           retval[key] = 1;
       }
    }

    return(retval);
 } 
```

这是我的本地（Couchbase）CouchDB 返回的内容：

```
key      value
["a"]    {test2: 1, test: 1} 
```

但这是 Cloudant 的回报：

```
key      value
["a"]        {[object Object]: 1, [object Object]: 1} 
```

我怀疑一些 js env 差异，但每个解决方法都将我引向相同的问题；Cloudant 的 values[val_i] 值是 Object 类型，我希望它是一个字符串。我不知道为什么。如果有帮助，我很愿意在这一点上重新减少。

为什么这些完全不同？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-29T10:03:55.810

First up you need to specify how your reduce function works in a rereduce case ([http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views) has info). On Cloudant the rereduce is always called (to collect data from the various shards into the final view result). That's why you get the response you see.

Second, it looks like you're trying to get a count of data by primary_key. In general you want to use the built in `_sum` function for that - it's faster than custom js code, and `_sum` works over objects in Cloudant.

Third, the unreduced view will contain the doc._id automatically, so emit a 1 instead to make the `_sum` work.

# google-apps-script - 无法授予对已发布 Web 应用程序的外部访问权限

> ID：15868721
> 
> 赞同：0
> 
> 时间：2013-04-07T22:42:13.393
> 
> 标签：google-apps-script, web-applications, google-drive-api, publish, google-workspace

我正在使用 Google App Script 开发 Web App。我是 Google Apps 经销商，希望能够与我注册的其他 Google Apps 用户共享我的 Web 应用程序。

该网络应用程序当前存储在我的云端硬盘中。当我*部署应用程序时，我在**谁有权访问应用程序*下可用的唯一选项是

1.  只有我自己
2.  我域内的任何人

我已进入我的 Google Apps 域管理并设置云端硬盘权限，以便用户可以在此组织之外共享文档。我还尝试从 Google Drive 和 Google Apps 脚本界面共享脚本，但唯一的共享选项是：

1.  在我的域内
2.  我域中知道链接的人
3.  私人的

我还尝试与另一个域上的 Google Apps 用户的电子邮件地址明确共享脚本（可以查看），但我收到了一条*抱歉，您请求的文件不存在。*错误。您可能可以通过尝试在此[url上查看 Web 应用程序来看到结果](https://script.google.com/a/macros/charliemurder.com/s/AKfycbyz9Rcy-M89TAaQBdZc7nmLiVKGJ7NecYMUWwBPG4_C3MVHmQEd/exec)

我能想到的唯一其他原因是，当 Google 仍然为每个域提供 50 个免费用户帐户时，我注册了我的 Google Apps 帐户。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:33:36.893

来自谷歌的回应：

> 关于您关于标准帐户与公众共享云端硬盘文件的问题，我已与我们的云端硬盘团队进行了核实，他们已确认是这种情况。您可以与特定的外部帐户共享，但不能与公众共享。如果您对此功能感兴趣，则需要升级到企业帐户。有关升级的详细信息，请访问 我们支持网站上的[http://support.google.com/a/bin/answer.py?hl=en&answer=60217 。](http://support.google.com/a/bin/answer.py?hl=en&answer=60217)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T23:17:15.807

我曾经遇到过这个问题。在域帐户上，无法在外部共享脚本。然后，我去了域设置并更改了它。它仍然不允许我。后来我发现域设置中的更改不会更新现有脚本。但是当您**创建新脚本**时，会出现与外部共享的选项。

您能否尝试创建一个新脚本并在部署时检查共享选项？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T01:03:55.590

谢谢，这很有用。该链接位于 Google Apps>Drive>Settings>Sharing Settings（打开并选中“允许 {您的组织} 中的用户在网络上发布文件或将其作为公开或未列出的文件向全世界公开。

最好的，

黎明

# java - 边界填充（flood fill）算法构建交互式地图。爪哇

> ID：15868723
> 
> 赞同：1
> 
> 时间：2013-04-07T22:42:27.510
> 
> 标签：java, swing, map, colors, flood-fill

我正在构建一个美国交互式地图，它将响应用户对 JTable 的输入值。我已经这样做了，但没有洪水填充算法（每个州都有自己的 .png 图像）。现在我决定使用边界填充或种子填充......但它不能以某种方式工作......这是完整的代码：

```
import java.awt.Color;
import java.awt.Container;
import java.awt.Image;
import java.awt.image.BufferedImage;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTable;

public class MapTest extends JFrame {

private static JTable table;
private JTable tableS;
private String[] states = {"US STATES", "Alabama",  "Alaska",   "Arizona"   };
private JLabel map;

private String[][] statesPixel = { {    "alabama",  "300",  "300"   },
        {   "alaska",   "350",  "350"   },
        {   "arizona",  "400",  "400"   },
        {   "arkansas", "450",  "450"   }   };

public MapTest() throws InterruptedException
{
    createMap();
}
private void createMap() throws InterruptedException {
Container contentPane = getContentPane();
contentPane.setBackground(Color.WHITE);
contentPane.setLayout(null);

contentPane.setSize(1220,700);

tableS = new JTable(4,1);
tableS.setBounds(1000,16,120,800);
tableS.setRowHeight(12);

int i = 0;
while (i < states.length) {
    tableS.setValueAt(states[i], i, 0);
    i++;
}

contentPane.add(tableS);

table = new JTable(4,1);
table.setBounds(1120,16,50,800);
table.setRowHeight(12);
int j = 0;
while (j < states.length) {
    table.setValueAt("100", j, 0);
    j++;
}
table.setValueAt("VALUE",0,0);
contentPane.add(table);

ExcelAdapter excelTable = new ExcelAdapter(table);

map = new JLabel();
map.setIcon(new ImageIcon("map.png"));
map.setBounds(150,50,800,600);
contentPane.add(map);

setTitle("Map");
setSize(1220,700);
setVisible(true);
setLocationRelativeTo(null);

  //updates~~
   while (true) {
    for ( int k = 0; k < statesPixel.length; k++) {
        int fill = Integer.parseInt( (String) table.getValueAt(k+1, 0));
    boundaryFill4(Integer.parseInt(statesPixel[k][1]),Integer.parseInt(statesPixel[k][2]),statesPixel[k][0],fill+1,0);
    }

}

//*******************************************************************
}

    private void boundaryFill4 (int x, int y, String state, int fill, int boundary) {

       int current;

       current = getPixel (x, y);
       if ((current != boundary) && (current != fill)) {
       setPixel (x, y, fill);
       boundaryFill4 (x+1, y, state, fill, boundary);
       boundaryFill4 (x-1, y, state,fill, boundary);
       boundaryFill4 (x, y+1, state,fill, boundary);
       boundaryFill4 (x, y-1, state,fill, boundary) ;
     }
    }

    private int getPixel(int x, int y) {
    Image img = ((ImageIcon) map.getIcon()).getImage();
    BufferedImage buffered = new BufferedImage(img.getWidth(null),img.getHeight(null), BufferedImage.TYPE_INT_ARGB);
    buffered.getGraphics().drawImage(img, 0, 0, null);
    int current = buffered.getRGB(x, y);    
    return current;
    }

    private void setPixel(int x, int y, int fill) {
    Image img = ((ImageIcon) map.getIcon()).getImage();
    BufferedImage buffered = new BufferedImage(img.getWidth(null),img.getHeight(null), BufferedImage.TYPE_INT_ARGB);
    buffered.getGraphics().drawImage(img, 0, 0, null);
    int red = fill;
    int green = red;
    int blue = red;
    Color c = new Color(buffered.getRGB(x, y));
    c = new Color(red, green, blue);
    buffered.setRGB(x, y, c.getRGB());
}

    public static void main(String args[]) throws InterruptedException {
MapTest map = new MapTest();
map.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

}

 } 
```

我还使用 ExcelAdapter.java，它可以在线获得，只是为了启用复制/粘贴到 JTable。我的代码怎么不行……我调试了……好久了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T01:10:41.197

您的 setPixel 方法对新的 BufferedImage 进行操作，而不是您的实际图像，因此任何更改都会被丢弃。

Your boundaryFill4 method also checks for boundaries by seeing if the current pixel is black, which means it will never update any black pixels in the map. Also, since setPixel's changes are discarded, it will never finish (probably).

And lastly, because of your `while (true) {` without any termination condition it's going to just keep looping over all the image pixels endlessly.

Additionally, your code has a few other improvements to be made, such as not creating a new bufferedImage every time you want to get the colour value of a pixel, and indeed switching to an algorithm which doesn't need a stack size of up width+height in the worst case.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:43:26.967

Your code has a lot of issues. Actually, as I understand you want to make a test case of a flood fill in order to write some other application. If you are familiar with python, you may find the following to be interesting [Making a weighted USA map based on state-level data](https://stackoverflow.com/questions/14637396/making-a-weighted-usa-map-based-on-state-level-data) There is a ready code, just copy paste it and then you can modify it.

# python - mysqldump 与 python

> ID：15868724
> 
> 赞同：2
> 
> 时间：2013-04-07T22:42:43.067
> 
> 标签：python, mysql

我正在尝试将 mysql 数据库转储保存在 python 脚本中。这是我所拥有的：

```
filepath = os.path.join(BACKUPS_FOLDER, '%s.sql' % date)
print filepath # /Users/david/Desktop/updates/_backups/2013-04-07.sql
subprocess.call(shlex.split('mysqldump -u root updates > %s' % filepath )) 
```

我收到以下错误：

```
mysqldump: Couldn't find table: ">" 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T22:56:04.243

`--result-file=file`您可以使用选项( )调用 mysqldump，`subprocess.call(shlex.split('mysqldump -u root updates --result-file=%s' % filepath ))`因为它会将 mysqldump 解释`>`为表名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T22:58:34.083

这就是我所做`communicate()`的，用于获取输出然后写入文件：

```
date = str(datetime.datetime.now().date())
filepath = os.path.join(BACKUPS_FOLDER, '%s.sql' % date)

args = shlex.split("mysqldump -u root updates")
p1 = subprocess.Popen(args, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
dump_output = p1.communicate()[0]

f = open(filepath, "wb")
f.write(dump_output)
f.close() 
```

# c# - 在 C# 中传递固定 int 指针时访问冲突

> ID：15868732
> 
> 赞同：1
> 
> 时间：2013-04-07T22:43:34.347
> 
> 标签：c#, interop, unmanaged, access-violation

我有一个 C++ 代码（dll），我需要从我的 C# 代码中调用它。当我使用固定指针时，它会引发访问冲突异常。我不确定我错过了什么。

以下是创建固定指针的类。

```
public class PinnedCmdCtrlBlock
    {
        GCHandle handle;
        CmdCtrlBlock cmd; 

 //This is the structure that needs to be pinned
        public IntPtr CmdCtrlBlockPtr;

        public PinnedCmdCtrlBlock()
        {
            cmd = new CmdCtrlBlock();
            handle = GCHandle.Alloc(cmd,GCHandleType.Pinned);

           CmdCtrlBlockPtr = handle.AddrOfPinnedObject();                
        }

        ~PinnedCmdCtrlBlock()
        {
            handle.Free();
        }
    }; 
```

以下是调用实际 C++ 非托管代码的代码

```
PinnedCmdCtrlBlock pinPtr = new PinnedCmdCtrlBlock();
int addr = PinPtr.CmdCtrlBlockPtr.ToInt32();
HartConnection.HartCmd(0, ref  addr); 
```

# mysql - Windows Azure 表存储和身份验证，每秒超过 100 次点击

> ID：15868733
> 
> 赞同：1
> 
> 时间：2013-04-07T22:43:35.260
> 
> 标签：mysql, azure, azure-storage, azure-table-storage

我需要您的专家意见的解决方案/建议...

1.  我们正在构建一个 API 解决方案，用户将向我们发送一个唯一代码以及用户名和密码，以获取身份验证代码和其他信息......

我们面临的挑战..

1.  如何处理超过 100 个请求/秒？我们目前使用 mysql，但扩展到该级别并且数据存储成本很高。您是否认为 Windows Azure 表存储是对身份验证进行大量选择然后进行更新以扣除用户积分的正确选择，这些用户有兴趣从我们这里提取信息.....
2.  我们想要记录大量数据。我认为windows azure storage会很便宜，但是如何进行聚合和分析呢？你知道任何案例研究/将数据导入mysql的方法，比如每天/每小时分区吗？任何可用于将 Windows Azure 存储表数据导入 MySQL 数据库的工具或库？
3.  如果有人试图向我们的服务器发出大量滥用请求，如何处理这种情况？试图每秒进行大量无效的验证，只会导致我们的 API 受到很多点击？如何控制它？

将不胜感激处理大量请求的任何经验.. 我们目前使用 PHP 和 MYSQL.s

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T02:23:06.873

对于 #1：Windows Azure 表存储旨在处理超过 2,000 个事务/秒，每个分区，以及 20,000 个事务/秒跨整个存储帐户，最大 10Gbps 入站带宽，15Gbps 出站带宽（有关完整详细信息，请参阅[此 MSDN 文章](http://blogs.msdn.com/b/windowsazure/archive/2012/11/02/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx)） . 处理 100 tx/sec 应该没有问题。并且不要忘记实体组事务，您可以在一个事务中写入多个实体（在同一个分区内）。

对于#2（甚至是#1）：分区对于实现最大性能非常重要。还要记住，如果您需要进行复杂的搜索（例如，在几个不同的属性上），您最终可能会遇到进行分区扫描的情况（因为您拥有的唯一索引是分区键 + 行键）。如果您打算进行分析，最好只是读出这些数据，根据需要进行汇总（或根据需要进行非规范化），然后写入更适合分析/深入分析/绘图/等的数据库。

我想说#3 应该作为一个单独的问题发布，因为它属于拒绝服务类型的问题，这似乎不相关。

# java - 编译器错误？Java 二进制搜索

> ID：15868735
> 
> 赞同：0
> 
> 时间：2013-04-07T22:43:37.100
> 
> 标签：java, binary-search

所以我的程序遇到了问题。我正在尝试修改 BinarySearch 以便我可以获得一对数字。我试图确定在排序数组中的哪个位置有一个数字 x 的多个实例。我只需要在屏幕上显示第一个和最后一个索引。我不断添加几个 if 语句，但是当我这样做时，我没有得到任何比较。现在，当我尝试返回 Pair(left, right) 时，出现错误：在该特定代码行上找不到符号。我目前没有任何检查左或右的东西。我只是想让我的代码编译，但我现在不能让它工作。任何输入都会有所帮助。不要求你为我做我的工作，只是朝着正确的方向轻轻一点。

```
import java.util.*;
import java.io.*;

public class Test_BinarySearchDup{

private static class Pair{
    public int left;
    public int right;

    public Pair(int left, int right){
        this.left = left;
        this.right = right;
    }
}

public static void main(String[] args) throws IOException{
    String file = args[0];
    int x = Integer.parseInt(args[1]);
    Scanner fin = new Scanner(new FileReader(file));
    int count = 0;
    while(fin.hasNext()){
        fin.nextInt();
        count++;
    }
    fin.close();

    int[] array = new int[count];

    fin = new Scanner(new FileReader(file));
    while(fin.hasNext()){
        for(int i = 0; i < array.length; i++){
            array[i] = fin.nextInt();
        }
    }
    fin.close();

    Pair numbers =  BinarySearchDup(array, x, 0, (array.length - 1));
    System.out.println("[" + numbers.left + "," + numbers.right + "]");
}

public static Pair BinarySearchDup(int[] A, int x, int low, int high){
    int mid = (low + high) / 2;
    int left = 0, right = 0;
    while(low <= high){
        mid = (low + high) / 2;
        if(A[mid] == x){ //if A[mid] == x we need to check left and right to make sure that there are no other copies of the number
            //checking to the left
            return BinarySearchDup(A, x, low, mid - 1);
        }
        else if(A[mid] < x)
            return BinarySearchDup(A, x, mid + 1, high);
        else
            return BinarySearchDup(A, x, low, mid - 1);
    }
    return new Pair(left, right);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T22:48:40.593

This will fix your syntax error:

Change

```
return Pair(left, right); 
```

to

```
return new Pair(left, right);
       ^^^ 
```

I haven't checked the logic of your code, though.

# java - 使用 AlertDialog API 添加列表

> ID：15868738
> 
> 赞同：0
> 
> 时间：2013-04-07T22:43:53.110
> 
> 标签：java, android, dialog, android-alertdialog

阅读[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)后，我想创建一个如下所示的警报对话框：

![在此处输入图像描述](https://i.stack.imgur.com/JW5KE.png)

基本上，我希望有一个带有标题和四个选项的警报对话框作为活动（即 ColorAlertDialog.class）。

有人可以解释一下如何实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:56:52.250

1.  您只需要在您的图片上创建一个自定义视图（例如：R.layout.group_simple_alertdialog）并将其添加到您的`AlertDialog.Builder`.

2.  之后，您还必须`setOnItemClickListener`从视图中获取所选颜色

例如：

```
 LayoutInflater inflater = ((LayoutInflater) this
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE));
  View customView = inflater.inflate(R.layout.group_simple_alertdialog, null, false);
  AlertDialog.Builder builder = new AlertDialog.Builder(this);
  builder.setView(customView);
  builder.setCancelable(false);

  ListView list= (ListView) customView.findById(R.id.listView);
  // set now setOnItemClickListener and so on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:27:51.120

另一种方法是使用适配器和 adb.setadapter() 方法。adb 会自动使用原生 Android 列表。这种方法的好处是，Android 会在每个 Android 版本上关注您的对话框样式。一些代码示例：

```
@Override
public void onCreate(Bundle bundle) {
    super.onCreate(bundle);

    String[] from = { ObjectViewContract.Columns.LABORCODE };
    int[] to = { android.R.id.text1 };

    mAdapter = new SimpleCursorAdapter(getSherlockActivity(), android.R.layout.select_dialog_item, null, from, to, 0);
    getLoaderManager().initLoader(0, null, this);
}

@Override
public Dialog onCreateDialog(Bundle bundle) {
    AlertDialog.Builder adb = new AlertDialog.Builder(getSherlockActivity());
    adb.setTitle(getString(R.string.menu_title_objectfilter));
    adb.setAdapter(mAdapter, this);
    return adb.create();
} 
```

# python - 隧道接口单元测试

> ID：15868743
> 
> 赞同：0
> 
> 时间：2013-04-07T22:44:11.950
> 
> 标签：python, unit-testing, unix, python-2.7, tunnel

我制作了一个包含[pytun.TunTapDevice](https://pypi.python.org/pypi/python-pytun/2.1)的 Tun 类：

```
from pytun import TunTapDevice

class Tun(object):
    def __init__(self,name='tun',addr=None,dstaddr=None,netmask=None,mtu=None):

        tun = TunTapDevice(name=name)
        if addr     : tun.addr      = addr
        if dstaddr  : tun.dstaddr   = dstaddr
        if netmask  : tun.netmask   = netmask
        if mtu      : tun.mtu       = mtu
        self._tun = tun
        self.up = self._tun.up
        self.down = self._tun.down
        self.read = self._tun.read
        self.write = self._tun.write
        self.close = self._tun.close

    @property
    def name(self):
        return self._tun.name

    @property
    def mtu(self):
        return self._tun.mtu 
```

问题不是关于如何编写隧道，而是关于如何编写测试用例以确保它在使用 python 单元测试的类 unix oses 中正常工作。

我应该写什么来确保它有效？可能是 ARP 请求、ICMP、DNS 数据包或其他任何东西：

```
class TestTunnel(unittest.TestCase):

    def setUp(self):
        self.tun = Tun(name='tun0', addr='192.168.0.23', netmask='255.255.255.0',mtu=1500)

    def test_tunnel(self):
        self.tun.write(?????)
        self.assertEqual(self.tun.read(),????) 
```

编辑1：

最后我通过这段代码得到了它：

```
from select import select
import dpkt
import struct

class TunnelTestCase( unittest.TestCase):

    def setUp(self):

        self.tun = Tun(name='testtun',
                       addr='192.168.6.92',
                       dstaddr='192.168.6.93',
                       netmask='255.255.255.0', 
                       mtu=1500)
        self.tun.up()

    def _ip2str(self,ip):
        return '.'.join([str(i) for i in struct.unpack('!BBBB',ip)])

    def test_echo(self):
        reqPack = dpkt.ip.IP('E\x00\x00T\x00\x00@\x00@\x01\xac\x9f\xc0\xa8\x06]\xc0\xa8\x06\\\x08\x00\x1c\xae\t\xc7\x00\x01\x0f\x8adQq\xab\x01\x00\x08\t\n\x0b\x0c\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./01234567')
        self.tun.write(reqPack.pack())

        r,_w,_ex = select([self.tun],[],[],4)
        if len(r) and r[0] == self.tun:
            replyPack = dpkt.ip.IP(self.tun.read())
            self.assertEqual(self._ip2str(replyPack.src), self.tun.addr)
            self.assertEqual(self._ip2str(replyPack.dst), self.tun.dstaddr)
            return

        self.assert_(False, 'ICMP Echo timeout, the tunnel interface may not works properly in your system.') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:53:02.263

您也许可以简单地从 pytun 借用测试用例并简化它们。事实上，我认为测试实际连接性是在他们的包中完成的，所以除非你试图测试一些显着不同的东西，否则你可以不加修改地运行那里的测试。[https://github.com/montag451/pytun/tree/master/test](https://github.com/montag451/pytun/tree/master/test)

Since it's a raw socket, you can simply try to send a plain ascii message from the client and verify it is received by the server, and then have the server send back an acknowledgement, which you can assert against.

# c++ - C ++：传递从向量获得的数组指针时的EXC_BAD_ACCESS

> ID：15868754
> 
> 赞同：0
> 
> 时间：2013-04-07T22:44:57.290
> 
> 标签：c++, arrays, pointers, vector, exc-bad-access

编辑：我想通了。当 deflateReadOut() 实例化数组时，数组太大而不能在堆栈中，因此在调用它时会抛出 EXC_BAD_ACCESS 错误。有用的链接：[链接](https://stackoverflow.com/questions/1847789/segmentation-fault-on-large-array-sizes)

这个 EXC_BAD_ACCESS 错误让我很难过。到目前为止，我的程序所做的是制作一个包含四个大型 unsigned char 数组的二维向量数组，用 100 填充位置 0 处的数组，并尝试将指向该数组的指针全部传递为 100。但是，当它到达函数调用时，会发生 EXC_BAD_ACCESS 错误。我通过打印检查了数组的完整性，它打印得很好。代码如下。

```
#include <stdint.h>
#include <map>
#include <stdio.h>
#include <iostream>
#include <time.h>
#include <string.h>
#include <assert.h>
#include <cstdlib>
#include <sstream>
#include <zlib.h>
#include "Hash.h"

#define CHUNK 16777216

using namespace std;

class WSUMap {
public:

    vector<vector <unsigned char> > chunk;
    int xComp[4];
    int yComp[4];
    vector<int> priority;
    Hash hashChunk;

    WSUMap() {
        chunk.reserve(4);
        chunk[0] = vector<unsigned char>(CHUNK);
        chunk[1] = vector<unsigned char>(CHUNK);
        chunk[2] = vector<unsigned char>(CHUNK);
        chunk[3] = vector<unsigned char>(CHUNK);
        priority.push_back(0);
        priority.push_back(1);
        priority.push_back(2);
        priority.push_back(3);
        xComp[0] = -1;
        xComp[1] = -1;
        xComp[2] = -1;
        xComp[3] = -1;
        yComp[0] = -1;
        yComp[1] = -1;
        yComp[2] = -1;
        yComp[3] = -1;
    }

    //Important part starts here:

    void generate() {
        for (int i = 0; i<CHUNK; i++) {
            chunk[0][i]=100;
        }
        for (int i = 0; i < 16; i++) {
            for (int j = 0; j < 16; j++) {
                cout << chunk[0][0] << endl;
                unsigned char* ch = &chunk[0][0];
                cout << ch[0] << endl;
                deflateReadOut(i, j, ch); //EXC_BAD_ACCESS Here
            }
        }
    }

    void deflateReadOut(int x, int y, unsigned char* chunk) {

        int ret, flush;
        unsigned have;
        z_stream strm;
        unsigned char out[CHUNK];

        /* allocate deflate state */
        strm.zalloc = Z_NULL;
        strm.zfree = Z_NULL;
        strm.opaque = Z_NULL;
        ret = deflateInit(&strm, 1);
        if (ret != Z_OK);
        //return ret;

        ostringstream oss;
        oss << "map/" << x << "x" << y;
        string str = oss.str();
        FILE* dest = fopen(str.c_str(), "w");

        /* run deflate() on input until output buffer not full, finish
           compression if all of source has been read in */
        do {
            strm.avail_out = CHUNK;
            strm.next_in = chunk;
            strm.next_out = out;

            ret = deflate(&strm, flush); /* no bad return value */
            assert(ret != Z_STREAM_ERROR); /* state not clobbered */

            have = CHUNK - strm.avail_out;
            if (fwrite(out, 1, have, dest) != have || ferror(dest)) {
                (void) deflateEnd(&strm);
                //return Z_ERRNO;
            }

        } while (strm.avail_out == 0);
        assert(strm.avail_in == 0); /* all input will be used */

        /* clean up and return */
        (void) deflateEnd(&strm);
    } 
```

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:47:03.387

这个：

```
chunk.reserve(4); 
```

应该：

```
chunk.resize(4); 
```

否则，您只是在增加容量而不是实际的向量大小。

您还可以在初始化列表中初始化向量：

```
WSUMap() 
: chunk(4, vector<unsigned char>(CHUNK)) 
{

} 
```

这相当于增加大小并初始化各个向量。

# proxy - 为静态 IP 使用代理服务

> ID：15868755
> 
> 赞同：3
> 
> 时间：2013-04-07T22:45:13.703
> 
> 标签：proxy, ip

我的应用程序在云中运行 (AWS Elastic Beanstalk)。该应用程序使用外部 Web 服务，该服务仅允许来自已知 IP 地址的呼叫（我会向他们提供我的 IP 地址，以便他们可以将其添加到允许的 IP 列表中）。我的应用程序运行的环境 (AWS Elastic Beanstalk) 不使用固定的静态 IP 地址。

是否有免费（或付费）服务充当代理并具有已知 IP 地址，以便我的应用程序可以通过它调用 Web 服务？

注意：此问题是一般性问题，不一定特定于 AWS Elastic Beanstalk。它适用于没有为服务器分配静态 IP 的任何环境。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-15T07:27:24.117

您可以运行 t1.micro 实例，将静态 IP 绑定到它并在其上运行代理服务器（例如 Squid/Varnish/Nginx 甚至 Apache）

# arrays - 使用量词在 Z3 中重写代码

> ID：15868757
> 
> 赞同：0
> 
> 时间：2013-04-07T22:45:18.623
> 
> 标签：arrays, int, z3, assertions, quantifiers

伙计们

我正在使用 Microsft Z3 编写模型，我需要向其中添加以下断言：

```
(declare-const line (Array Int Int))

(assert (and (> (select line 1) 0) (< (select line 1) 4)))
(assert (and (> (select line 2) 0) (< (select line 2) 4)))
(assert (and (> (select line 3) 0) (< (select line 3) 4))) 
```

如您所见，我要说明的是，我的 3 长度数组（称为***line***）只能包含 [1..3] 中的元素。这段代码完美地工作，但是，我希望能够使用量词只用一行代码做出这些断言。我试过了：

```
(assert (forall ((i Int)) (=> (and (> i 0) (< i 4)) (and (> (select line i) 0) (< (select line i) 4))))) 
```

我虽然会工作......但在执行之后，Z3 返回了 unsat，这在以前版本的代码中没有发生。

为什么会这样？

这可能吗？

# neo4j - 密码查询中的“无关系”

> ID：15868759
> 
> 赞同：8
> 
> 时间：2013-04-07T22:46:05.850
> 
> 标签：neo4j, cypher

在 cypher 中怎么可能有这样的查询：“返回所有 anna 关注但不关注任何人的人”？

在下面（我在查询后明确了起始节点的 id）“r 为空”部分似乎不起作用：

```
START o=node({id}) 
MATCH (a)-[:follows]->(b)-[r]->(c) 
WHERE a.name="anna" and r is null 
RETURN b 
```

现在，“跟随”是我唯一的关系。但是也

```
START o=node({id}) 
MATCH (a)-[:follows]->(b)-[:follows]->(c)
WHERE a.name="anna" and c is null
RETURN b* does not work. 
```

不起作用我的意思是：尽管应该有一些结果，但我没有得到任何结果。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-08T01:10:38.787

`match`如果它不存在，它就不是模式。`match`是为了找东西，不是为了*不*找东西。您可以将这样的谓词放入`where`子句中：

```
START a=node({id}) 
MATCH (a)-[:follows]->(b)
WHERE not(b-[:follows]->()) 
RETURN b 
```

# apache - 在 htaccess 文件中继承的 RewriteOptions 有什么作用？

> ID：15868763
> 
> 赞同：3
> 
> 时间：2013-04-07T22:46:13.890
> 
> 标签：apache, .htaccess, redirect, web

在修改`.htaccess`文件中的某些配置时，我发现该指令`RewriteOptions inherit`已经存在。我对它的作用感到困惑，以及是删除该行并从新开始，还是将我的配置附加到现有数据。

该指令有什么作用，删除该行是否有任何副作用？

*旁注：*我想用来`DirectoryIndex`选择默认的索引文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T22:52:01.967

该[`Inherit`选项](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriteoptions)意味着*父*目录中 htaccess 文件中的任何规则都是“继承的”：

> `Inherit`- 这会强制当前配置继承父配置。在 per-virtual-server 上下文中，这意味着继承主服务器的映射、条件和规则。在每个目录的上下文中，这意味着父目录的`.htaccess`配置或`<Directory>`部分的条件和规则是继承的。继承的规则实际上被复制到使用该指令的部分。如果与本地规则结合使用，继承的规则将复制到本地规则之后。该指令的位置 - 低于或高于当地规则 - 对此行为没有影响。如果本地规则强制停止重写，则不会处理继承的规则。
> 
> ***注意：从父范围继承的规则在子范围中指定的规则之后应用。***

通常，如果您`.htaccess`在特定子目录中有文件，则父目录中的任何规则都将被取代并且不会应用。请参阅[*如何*在*.htaccess 文件*Apache HTTP 服务器教程](http://httpd.apache.org/docs/current/howto/htaccess.html#how)中应用指令。：

> 在文件中找到的配置指令`.htaccess`应用于文件所在的目录`.htaccess`及其所有子目录。`.htaccess`但是，重要的是还要记住，在更高的目录中可能有文件。指令按照它们被发现的顺序应用。因此，`.htaccess`特定目录中的文件可能会覆盖`.htaccess`在目录树中较高位置的文件中找到的指令。反过来，那些可能已经覆盖了更高的指令，或者在主服务器配置文件本身中。

使用该`RewriteOptions inherit`选项，父目录中的任何重写规则本质上都附加到子目录中任何规则的末尾。Apache 2.4 有一个附加选项，可以在子目录中的规则之前或之后附加它们。该指令只会影响 mod_rewrite 和 rewrite 规则。该`DirectoryIndex`指令将不受影响。如果此 htaccess 文件已经在您的文档根目录中，那么您可以将其删除，因为没有“父”htaccess 文件。

# java - 如何让 Scanner.nextInt() 获得下一个 int？

> ID：15868765
> 
> 赞同：0
> 
> 时间：2013-04-07T22:46:48.533
> 
> 标签：java, file-io

好吧，我以前从来没有遇到过这个问题，我觉得很奇怪。我正在尝试从该患者分类程序的文件中读取输入。对这些方法的前三个调用有效，但是当我调用 fileRead.nextInt() 时它会爆炸并给我一个 InputMismatchException。我正在阅读的行有点像这样：[http](http://gyazo.com/74c0a9381479a12bb4804d714901b41c) ://gyazo.com/74c0a9381479a12bb4804d714901b41c我很确定我使用的分隔符是正确的。如果我将强制转换为 char 并尝试将其作为 int 进行，这并不重要，它只是行不通。为什么？我已经完成了一个与这个类似的程序，并且 fileRead.next() 三次（以获得三个标记）完美地工作。

```
void loadPatientData() throws FileNotFoundException
 {
    linkHeads();
    Patient person = null;
    Scanner fileRead = makeAFile(patient);
    fileRead.useDelimiter(";|\n");

    while (fileRead.hasNext())
    {
        //person = new Patient(fileRead.next(), fileRead.nextBoolean(), fileRead.nextBoolean(), (char)fileRead.nextInt());
        String name = fileRead.next();
        boolean bob = fileRead.nextBoolean();
        boolean joe = fileRead.nextBoolean();
        int queue = fileRead.nextInt(); //hell breaks loose
        //addPatientData(person);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T22:55:30.883

看到您在 Windows 上并且您的文本文件在 notepad.exe 中正确显示，我将假设您的文件实际上`\r\n`用作换行符，而不仅仅是`\n`，这将解释`nextInt()`.

例子：

```
static void loadPatientData()  {
    Scanner fileRead = new Scanner("John Doe;true;true;0\r\nJane Roe;false;true;2\r\n");
    fileRead.useDelimiter(";|\r\n"); // vs.:
//  fileRead.useDelimiter(";|\n");

    while (fileRead.hasNext()) {
        String name = fileRead.next();
        boolean bob = fileRead.nextBoolean();
        boolean joe = fileRead.nextBoolean();
        int queue = fileRead.nextInt(); //hell breaks loose
    }
} 
```

要涵盖所有换行符，您可能只想`";|\r\n|\n"`用作分隔符。

# android - RelativeLayout.setLayoutParams 导致 viewholder 模式崩溃

> ID：15868774
> 
> 赞同：0
> 
> 时间：2013-04-07T22:47:52.937
> 
> 标签：android, android-layout, android-relativelayout

根据屏幕大小，我想动态设置RelativeLayout 的高度。另一种方法是使用 setMinimumHeight() 但我仍然想知道为什么会崩溃。

```
 public View getView(final int position, View convertView, ViewGroup parent) {
        ViewHolder vh;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.question_row_inflater, null);
            vh = new ViewHolder(); // will store references to views
            vh.answerBlock = (RelativeLayout) convertView.findViewById(R.id.answerBlock);
            convertView.setTag(vh); // store vh away
        } else {
            vh = (ViewHolder) convertView.getTag();
        }

        int height = mRes.getDisplayMetrics().heightPixels;
        // workaround for small screens
        if (height < 490) 
            RelativeLayout.LayoutParams par = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, 30);
            vh.answerBlock.setLayoutParams(par);
        }
        return convertView;
    } 
```

这是类广播异常：![在此处输入图像描述](https://i.stack.imgur.com/NlGnS.png)

```
 <RelativeLayout
        android:id="@+id/answerBlock"
        android:layout_width="fill_parent"
        android:layout_height="@dimen/list_height"
        android:layout_weight="1"
        android:clickable="true"
        android:paddingLeft="16dp" >

        <TextView
            android:id="@+id/answerText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T03:33:09.207

您正在获取类转换异常，因为您正在调用`vh.answerBlock.setLayoutParams(params);`This 在*父* `ViewGroup`级上设置参数（请参阅[文档](http://developer.android.com/reference/android/view/View.html#setLayoutParams%28android.view.ViewGroup.LayoutParams%29)）。

所以我可以推测*answerBlock* `RelativeLayout`是 a 的孩子`LinearLayout`（堆栈跟踪也很明显）。

解决方案（至少例外）是使用`LayoutParams`与视图的父级匹配的。

# ruby-on-rails - Ruby on Rails：检索 Flickr 照片显示太多信息。为什么？

> ID：15868775
> 
> 赞同：0
> 
> 时间：2013-04-07T22:47:54.833
> 
> 标签：ruby-on-rails, flickr

我已经设法让 Flickr API 使用 RoR 和 Flickr gem。但是，在显示照片之前，它似乎返回了很多与照片相关的信息（作为字符串），例如

```
[#<Flickr::Photo:xxxxxx @rotation="0", @client=#<Flickr:xxxx 
@host="http://api.flickr.com", @activity_file="flickr_activity_cache.xml",
@api="/services/rest", @api_key="xxxxxxxxx">, @api_key="xxxxxx", @title="JAPAN",
@id="xxxx".....etc 
```

以上只是返回的信息片段，其中一些信息替换为 xxxx。如何删除此信息？

控制器如下：

```
class FlickrController < ApplicationController
def flickrsearch
    flickr = Flickr.new
    if params[:text].nil?
        #render :text => '<h2>Please enter a search string</h2>'
    else
        begin
            @photos = flickr.photos(:text => params[:text], :per_page =>'10', :sort => 'relevance')
            render "display"
        end
    end
end 
```

观点如下：

```
<div class="flickr">
    <table>
        <%= @photos.each do |p| %>
           <td>
              <%= image_tag(p.sizes[0]['source']) %><br>
              <%= p.title %>
          </td>
       <% end %>
    </table>
</div> 
```

Flickr gem 中的“Flickr”类中的“photos”方法如下：

```
 def photos(*criteria)
    photos = (criteria[0]) ? photos_search(criteria[0]) : photos_getRecent
    # At this point, search criterias with pet_page => has structure
    # {"photos => {"photo" => {...}}"} 
    # While per_page values with > 1 have
    # {"photos => {"photo" => [{...}]}"} 
    collection = photos['photos']['photo']
    collection = [collection] if collection.is_a? Hash
    collection.collect { |photo| Photo.new(photo['id'], @api_key) }
  end 
```

我是一个新手，如果这是一个简单的问题，我很抱歉。我有一种感觉，这与我没有指向数组中的正确位置有关？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T11:54:44.910

正如您已经发现您的 ERB 语法有问题。简而言之，`<% ruby.code %>`运行 ruby​​ 代码并且不输出任何内容，同时`<%= ruby.code %>`运行 ruby​​ 代码并将其结果输出到 HTML 文件中（在进行一些 ruby​​ 结果到字符串到 HTML 的转换之后。）

这意味着原始代码不仅会打印出图像标签，还会打印出 的结果`@photos.each`，与 相同`@photos`，然后得到您所看到的输出。

```
<%= @photos.each do |p| %>
    <%= image_tag(p.sizes[0]['source']) %><br>
<% end %> 
```

...而这个只输出图像标签：

```
<% @photos.each do |p| %>
    <%= image_tag(p.sizes[0]['source']) %><br>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:25:51.570

哇。我刚刚弄清楚我的代码到底出了什么问题......在视图中，我需要做的就是删除变量@photos 之前的“=”符号！（见下文）。好的 - 如果有人可以向我解释这个语法错误，那就太好了。谢谢。

```
<div class="flickr">
    <table>
        <% @photos.each do |p| %>
           <td>
              <%= image_tag(p.sizes[0]['source']) %><br>
              <%= p.title %>
          </td>
       <% end %>
    </table>
</div> 
```

# c++ - 无法插入到 std::map (G++)

> ID：15868776
> 
> 赞同：3
> 
> 时间：2013-04-07T22:48:00.320
> 
> 标签：c++, g++, stdmap

我有以下麻烦：

```
struct ServerPP {
    std::string name;
    int id;
    int expires;
};
std::map<std::string, std::set<ServerPP>> RemindTable;

int test(std::string email, ServerPP serv)
{
    RemindTable[email].insert(serv); // error when compile in this row below
} 
```

g++ 中的错误：

```
In file included from /usr/include/c++/4.4/string:50,
                 from /usr/include/c++/4.4/bits/locale_classes.h:42,
                 from /usr/include/c++/4.4/bits/ios_base.h:43,
                 from /usr/include/c++/4.4/ios:43,
                 from /usr/include/c++/4.4/istream:40,
                 from /usr/include/c++/4.4/sstream:39,
                 from stdafx.h:19,
                 from ActiveReminder.cpp:4:
/usr/include/c++/4.4/bits/stl_function.h: In member function 'bool std::less<_Tp>::operator()(const _Tp&, const _Tp&) const [with _Tp = ServerPP]':
/usr/include/c++/4.4/bits/stl_tree.h:1170:   instantiated from 'std::pair<typename std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::iterator, bool> std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_M_insert_unique(const _Val&) [with _Key = ServerPP, _Val = ServerPP, _KeyOfValue = std::_Identity<ServerPP>, _Compare = std::less<ServerPP>, _Alloc = std::allocator<ServerPP>]'
/usr/include/c++/4.4/bits/stl_set.h:411:   instantiated from 'std::pair<typename std::_Rb_tree<_Key, _Key, std::_Identity<_Key>, _Compare, typename _Alloc::rebind<_Key>::other>::const_iterator, bool> std::set<_Key, _Compare, _Alloc>::insert(const _Key&) [with _Key = ServerPP, _Compare = std::less<ServerPP>, _Alloc = std::allocator<ServerPP>]'
ActiveReminder.cpp:32:   instantiated from here
/usr/include/c++/4.4/bits/stl_function.h:230: error: no match for 'operator<' in '__x < __y' 
```

我如何在 G++ 中修复此错误，在 Windows 上一切正常

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T22:50:21.983

如果您希望能够`operator <`在. 例如：`ServerPP``std::set`

```
bool operator < (ServerPP const& lhs, ServerPP const& rhs)
{
    return (lhs.id < rhs.id);
} 
```

或者，您可以定义自己的比较器并将其类型作为第二个模板参数提供给`std::set`：

```
struct serv_comp
{
    bool operator () (ServerPP const& lhs, ServerPP const& rhs)
    {
        return (lhs.id < rhs.id);
    }
};

std::map<std::string, std::set<ServerPP, serv_comp>> RemindTable; 
```

这是一个显示代码编译的[实时示例。](http://coliru.stacked-crooked.com/a/387ac871157d6bde)

# html - 背景图片100%固定位置问题

> ID：15868777
> 
> 赞同：0
> 
> 时间：2013-04-07T22:48:10.467
> 
> 标签：html, css, background

通过将背景图像应用于主体，我已使我的网站背景图像拉伸浏览器窗口的 100% 宽度和高度，并保持固定位置。此外，我创建的边框也将保持固定，使用这种方法：[http ://css-tricks.com/body-border/](http://css-tricks.com/body-border/)

它工作正常，你可以在这里看到：http: [//br-webdesigner.com/test/](http://br-webdesigner.com/test/)

唯一的问题是，即使我在 html 元素上有 10px 的填充，背景图像也一直延伸到浏览器窗口的边缘，而不是 body 元素（或绿色区域）的边界。

似乎将 background-size 设为 100% 会使浏览器窗口的大小变为 100%，而不是包含元素的大小。

有没有办法解决这个问题？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:21:20.513

所以我改变了你的 CSS 尝试使用这个：

```
html{

}

body{
 padding:30px;   
background:url(images/bg2.svg) no-repeat fixed;
background-size:100% 100%;
margin:0;
}

.site-border{
background:#352e2e;
z-index:10;
}

#top{
position:fixed;
top:0;
left:0;
width:100%;
height:10px;
}

#bottom{
position:fixed;
bottom:0;
left:0;
width:100%;
height:10px;
}

#left{
    padding:10px;
position:fixed;
left:0;
top:0;
width:10px;
height:100%;
}

#right{
    padding:10px;
position:fixed;
right:0;
top:0;
width:10px;
height:100%;
} 
```

# ruby-on-rails - Rails：Windows 命令提示符 64 位中 Cucumber 1.2.4 的堆栈级别太深 (SystemStackError)

> ID：15868783
> 
> 赞同：-1
> 
> 时间：2013-04-07T22:48:36.160
> 
> 标签：ruby-on-rails, rspec, cucumber, gherkin

当我关注 railstutorial.org 学习黄瓜时，测试程序不断崩溃。

## 当我输入：bundle exec cucumber features/ 来运行 signing_in.feature 时，命令行会抱怨：

堆栈级别太深 (SystemStackError) C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1.gems/cucumber-1.2.4/lib/cucumber/parser/gherkin_builder.rb:100

## 以下是从我的 gemfile 复制的：

```
source 'https://rubygems.org'

gem 'rails', '3.2.13'

gem "bootstrap-sass", "~> 2.3.1.0"
gem 'bcrypt-ruby', '~> 3.0.1'

group :development, :test do
  gem 'rspec-rails'
end

group :development do
  gem 'annotate', '~> 2.5.0'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

gem 'pg', '0.12.2'

group :test do
  gem 'capybara', '1.1.2'
  gem 'factory_girl_rails', '~> 4.1.0'
  gem 'cucumber-rails', '1\. :require=>false
  gem 'database_cleaner', '0.7.0'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:54:39.753

我是黄瓜新手，最近自己也遇到过这个问题。我通过编辑 gherkin_builder.rb 解决了这个问题（请参阅您引用的文件路径）。在我的情况下 ENV['CUCUMBER_FORWARD_SLASH_PATHS'] 是空的。我需要正斜杠，所以我注释掉了文件方法中除了@path 之外的所有内容。如果您使用反斜杠，您将需要在上一行中使用 @path.gsub(///, '\')。我希望这有帮助！弗朗索瓦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:09:35.300

我也遇到了这个问题。我首先恢复到 Ruby 1.9.3 并没有解决问题。然后，我恢复到黄瓜 1.2.3。有效。

# jquery - 需要一些帮助来保持手风琴菜单在页面加载时打开。

> ID：15868785
> 
> 赞同：0
> 
> 时间：2013-04-07T22:48:49.600
> 
> 标签：jquery, menu, accordion

下面的代码很好地接受了当我选择一个链接时手风琴在页面加载时关闭。我希望手风琴保持开放。请看下文。任何帮助将不胜感激。

[http://www.kipjonesart.com/](http://www.kipjonesart.com/)

```
$(document).ready(function() {

    //ACCORDION BUTTON ACTION (ON CLICK DO THE FOLLOWING)
    $('.accordionButton').click(function() {

        //REMOVE THE ON CLASS FROM ALL BUTTONS
        $('.accordionButton').removeClass('on');

        //NO MATTER WHAT WE CLOSE ALL OPEN SLIDES
        $('.accordionContent').slideUp('normal');

        //IF THE NEXT SLIDE WASN'T OPEN THEN OPEN IT
        if($(this).next().is(':hidden') == true) {

            //ADD THE ON CLASS TO THE BUTTON
            $(this).addClass('on');

            //OPEN THE SLIDE
            $(this).next().slideDown('normal');
         } 

     });

    /*** REMOVE IF MOUSEOVER IS NOT REQUIRED ***/

    //ADDS THE .OVER CLASS FROM THE STYLESHEET ON MOUSEOVER 
    $('.accordionButton').mouseover(function() {
        $(this).addClass('over');

    //ON MOUSEOUT REMOVE THE OVER CLASS
    }).mouseout(function() {
        $(this).removeClass('over');                                        
    });

    /*** END REMOVE IF MOUSEOVER IS NOT REQUIRED ***/

    /********************************************************************************************************************
    CLOSES ALL S ON PAGE LOAD
    ********************************************************************************************************************/   
    $('.accordionContent').hide('');

});
</script>
</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T22:55:28.663

由于页面是新的，因此您需要一种机制来告诉手风琴在页面加载时立即打开。

就像是：

`<body id="YourPageId">`

准备好文件：

`$('.myAccordionSelector').accordion( "option", "active", YourPageId );`

# javascript - 从html页面中删除随机单词

> ID：15868791
> 
> 赞同：0
> 
> 时间：2013-04-07T22:50:21.977
> 
> 标签：javascript, html

我创建了一个 javascript 程序，当您单击标题“单击此处”时，该程序从我的数组中逐个打印元素，我的问题是尝试实现一个函数，当您单击单词时从 html 页面中删除一个随机单词以前打印但它打印其他单词，我如何创建一个删除以前打印的单词的函数？

```
<!DOCTYPE html>

<html>
<head>
    <title>function JavaScript</title>
   <script >
var k = 0;
var ph = ["red ","blue","black","green","yellow"];
function text(){

     if(k < ph.length ){

         document.getElementById("test").innerText+="  "+ ph[k];
            k++;
    }

}

function deleteWord(){

  var number = Math.floor(Math.random() * 5);

   document.getElementById("test").innerText+="  "+ ph[number];

}
   </script>

</head>

<body>

<h1 onclick="text();">Click here</h1>

<span id="test" onclick="deleteWord();"></span>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:56:28.317

```
function deleteWord(){
  var number = Math.floor(Math.random() * 5);
  document.getElementById("test").innerText+="  "+ ph[number];
} 
```

您的问题是 += 运算符附加`" "+ ph[number]`在字符串的当前值之后。

要替换，请使用 = 运算符分配新值。既然你想删除，只需使用一个空字符串。

```
 document.getElementById("test").innerText = ""; 
```

作为旁注，在字符串中存储多个空格是不常见的。如果您试图移动内容，您可能应该考虑设置`padding-left`CSS 属性。

编辑：如果您不想丢失元素的全部内容，可以替换字符串的最后一部分：

```
 document.getElementById("test").innerText.replace(/   .*$/,""); 
```

# performance - 1-to-n 和 n-to-1 的外键约束与单独的表（关系数据库）

> ID：15868792
> 
> 赞同：0
> 
> 时间：2013-04-07T22:50:34.787
> 
> 标签：performance, hibernate, relational-database, foreign-key-relationship, relational-algebra

这是一个设计问题。我很感兴趣，因为这会对性能产生影响，但是，在可理解性或语义方面，我们有吗？

我见过很多人——尤其是在企业环境中——让 Hibernate 生成单独的表，而不是创建外键约束。

特别是，如果你有表 A 和表 B，并且关系是一对多的，那么人们倾向于让 Hibernate 生成表 A_B，其中包含 A 和 B 的主键，并且表现出 1-to -许多关系。更具体地说，他们将外键约束提取到一个新的单独的表中。

1）从性能的角度来看，这不是那么幸运，需要额外的表（更多内存）并且通常需要更多的连接，这可能会对性能产生负面影响。当然，这取决于底层实现，因为通过缓存和智能游标管理可以缓解这种情况。

2) 语义和/或可理解性是否受到影响？如果是这样，那么永远不要查看生成的代码的规则呢？（代码生成的倡导者将给出一个明确的 NO）。这仅适用于您从模型生成表的情况（如 Hibernate 允许您这样做）。

3）范式不受这种设计表格的方式的影响，但是，当您尝试施加更高的范式时，它确实会导致“表格爆炸”。

我真的不明白这个“最佳实践”（如果是的话）是否有隐藏的含义，或者这只是配置 Hibernate 时的错误/缺乏理解;-)。

任何和所有的意见都非常受欢迎！

编辑：表/关系不是 n 对 m（多对多）。此外，您可以让 Hibernate 生成关系而不是外键约束，我的问题（上述问题）是您为什么要这样做？！

# java - Java：解决考试示例问题

> ID：15868795
> 
> 赞同：1
> 
> 时间：2013-04-07T22:37:53.240
> 
> 标签：java

我正在为 Java 考试而学习，但我似乎无法正确解决这个示例问题。

假设方法 int sign(int x) 如果 x 为正则返回 1，如果 x 为负则返回 -1，如果 x 为 0 则返回 0。给定：

```
int[] nums = {-2, -1, 0, 1, 2}; 
```

执行以下代码后，nums 的元素的值是多少？

```
for(int k=0; k<nums.length; k++)
{
nums[k] -= sign(nums[k]);
nums[k] += sign(nums[k]);
} 
```

这是我试图解决它的一个片段：

```
nums k -= sign (nums [k])
nums [0] = nums[0]- sign (nums[0])
nums [0] = (-2) - (0)
nums [0] = -2 
```

有人可以解释一下你是如何得到答案的：`-2, 0, 0, 0, 2.`。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:59:39.453

考虑一下代码片段

```
n -= sign(n);
n += sign(n); 
```

如果`sign(n)`在第一个语句之后没有改变，那么在`n`片段执行后值将保持不变（因为你只是添加然后减去相同的值）。

现在，`sign(n)`第一次声明之后什么时候会改变？如果您考虑一下，*只有*if`n`是`1`or `-1`，在这种情况下`n == sign(n)`，第一个语句将离开`n`at `0`。因为, , 如果是`sign(0) == 0`, 第二个语句将无效。因此，如果是或，则上面的代码片段将导致of 。对于所有其他，不会有任何变化。`n``0``n``1``-1``n``0``n`

综上所述，我们在这里所做的是遍历数组，并且对于每个元素，

1.  如果是`1`or `-1`，则将其设置为`0`
2.  否则，保持原样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:59:33.530

如果你一步一步地执行你的代码，你就会明白，这段代码非常基本......你自己说过：如果为负 -1 如果为正 1 否则为 0...

你知道 -= 和 += 是干什么用的吗？

# php - 尝试安装捆绑包时出现 Laravel 4 Artisan 错误

> ID：15868804
> 
> 赞同：25
> 
> 时间：2013-04-07T22:52:28.307
> 
> 标签：php, laravel, laravel-4, bundle

我只是尝试使用来自 github 的最新 Laravel 4 beta 通过 Artisan CLI 安装 laravel 包。

但是当我尝试类似的事情时：

```
php artisan bundle:install bob 
```

我面临

```
[InvalidArgumentException]
There are no commands defined in the "bundle" namespace. 
```

我在网上环顾四周，似乎找不到解决方案，甚至找不到其他有类似问题的人。

有没有其他人遇到过这个错误或对解决方案有任何想法？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-08T00:40:04.807

如果您使用的是 Laravel 4（基于此问题的标签，您就是），则不再使用捆绑包。

## 用捆绑包输出，用作曲家输入

相反，Laravel 4 使用了 composer 包。它有点相似，但同时它的工作方式却大不相同。这里不适合解释所有作曲家，因此请查看以下链接以了解更多信息：

*   [Laravel 4 入门](http://chris-schmitz.com/getting-started-with-laravel-4/)
*   [如何设置 Laravel 4](http://net.tutsplus.com/tutorials/php/how-to-setup-laravel-4/)
*   [作曲家入门](http://daylerees.com/composer-primer)

## Laravel 4 生成器

现在，由于您询问的是*bob ，因此与**bob 包*最接近的等价物可能是 Jeffrey Ways 生成器包，您可以在此处了解更多信息：[Laravel-4-Generators](https://github.com/JeffreyWay/Laravel-4-Generators)

# python - 从 Tkinter 的入口获取价值

> ID：15868805
> 
> 赞同：1
> 
> 时间：2013-04-07T22:52:28.870
> 
> 标签：python, tkinter

有人提出了类似的问题，但没有一个问题涉及我的脚本的特定构造方式：

```
from Tkinter import *
from ttk import *
class Gui(Frame):

    def __init__(self, parent):
        Frame.__init__(self, parent)       #Gui inherits from built in Frame Class
        self.parent = parent
        self.initUI()       

    def initUI(self):
        self.parent.title("Shoes Ware")
        self.pack(fill=BOTH, expand=1)

        run_val = Entry(self)          
        run_val["width"] = 5
        run_val.place(x=80, y=40)

        quit_B = Button(self, text="Submit", command=self.submit)   
        quit_B.place(x=130, y=170)

        def submit(self):
            value = run_val.get()
            print value
            self.quit()

def main():
    root = Tk()
    root.geometry("300x200+50+50")
    app = Gui(root)
    root.mainloop()

if __name__ == '__main__':
    main() 
```

当我点击提交按钮时，我得到“NameError：未定义全局名称'run_val'”。我在这里做错了什么。现在打印语句只是为了检查我的工作。稍后，我将在程序中使用该值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T22:57:31.093

您没有将 Entry 小部件的引用存储在`initUI`.

```
def initUI(self):
    # ...
    self.run_val = Entry(self)          
    self.run_val["width"] = 5
    self.run_val.place(x=80, y=40) 
```

`self.run_val.get()`然后您可以毫无问题地检索 的值。

# android - 从相机中获取位图以用于其他活动

> ID：15868806
> 
> 赞同：1
> 
> 时间：2013-04-07T22:52:29.403
> 
> 标签：android

我是在这里提问的新手，可能做错了，所以请多多包涵。我正在开发一个有趣的、自用的 android 应用程序，目的是能够用相机拍照，并将这张照片变成可以组装的拼图游戏。我在这里修改这个项目：

[https://github.com/bravelittlescientist/android-jigsaw-puzzle](https://github.com/bravelittlescientist/android-jigsaw-puzzle)

以便可以将自定义图片用于拼图。在名为“PictureActivity”的启动器活动中，我有两个按钮，一个用于打开相机，一个用于启动名为“PuzzleActivity”的新活动，其中包含相机在意图中拍摄的位图。

```
public void onClick(View view) {
            switch(view.getId()){
            case R.id.bTakePic:
                    i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                    startActivityForResult(i, cameraData);
                    break;
            case R.id.bCreatePuzz:
                    Intent j = new Intent( this, PuzzleActivity.class);
                    j.putExtra("IMAGE", bmp);
                    startActivity(j);
                    break;
            }
    } 
```

拼图是根据“ExampleJigsawConfigurations”类中的方法组装而成的。目前，它使用保存在项目的可绘制文件夹中的猫的默认图像。该图像的位置以整数值的形式存储在捆绑包中，该捆绑包随后被转换为位图并绘制到画布上。我可以使用 getParcelableExtras() 从第一个活动中检索位图，但只能在 PuzzleActivity 中。我需要一种方法来将拼图的位图设置为相机拍摄的照片。

我确信可能有一个简单的解决方案，但我不是最有经验的程序员，所以任何帮助将不胜感激。

# git - 从 Git 存储库中拆分子目录并保留子目录 _now_ 中所有文件的历史记录

> ID：15868808
> 
> 赞同：6
> 
> 时间：2013-04-07T22:52:38.260
> 
> 标签：git, git-filter-branch

也许已经有一个解决方案，但其他问题/答案似乎解决了稍微不同的问题（或者我真的不理解它们）。

我的意图是分离 Git 存储库的子目录并使其成为独立的存储库，同时保持历史记录完整，但仅保留子目录的历史记录。 [这个问题](https://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository)一开始似乎起到了作用，但后来我注意到了其中的一个缺陷：

`git filter-branch --subdirectory-filter`仅保留与给定子目录相关的提交。但这意味着删除了影响*现在*在该子目录中但已从其他位置移动到那里的文件的提交。

我注意到这一点是因为我的“清理”存储库的第一次提交是“将所有内容移至子目录 X”。这意味着我的文件之前曾在另一个位置，但当时的提交并未保留。

所以我需要的是一个命令（或命令序列）：

*   删除存储库中的所有提交
*   除了包含以下文件的提交
    *   现在在给定的子目录中或
    *   是这些文件在其他位置的早期版本。

B）
可能其中一些提交还包含不符合这些条件的文件。如果可以从存储库中完全删除这些文件，那将是一个不错的附加组件。

* * *

编辑：

上面链接的解决方案将新存储库中的子目录内容拉到存储库的根目录。正如@Amber 指出的那样，这会导致已经存在于根目录中的文件出现问题。所以我想要实现的是：

原始目录结构：

```
\Old-Repo
    \.git
    \ABC
    |- dir content
    \DEF
    |- dir content
    \GHI
    |- dir content 
```

分离存储库的目录结构应为：

```
\New-Repo-DEF
    \.git
    \DEF
    |- dir content 
```

并不是：

```
\New-Repo-DEF
    \.git
    content of old DEF subdirectory 
```

然后我会通过定期提交将内容从 DEF 子目录移动到根目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T13:08:14.223

根据历史记录的复杂程度`git filter-branch --tree-filter`，[在](https://stackoverflow.com/a/15135004/2058424)使用`--subdirectory-filter`.

换句话说，如果`git log -- somedir`显示“将文件 XYZ 移动到 somedir”作为`somedir`目录的最旧提交，您可以执行`git filter-branch --tree-filter 'insert a fairly foolproof script here that moves files XYZ to somedir' HEAD`. 这样，您可以在提取子存储库之前理顺目录结构。

几天前，我在一个相当小的存储库（约 150 次提交，线性历史记录）上做了这个，它工作了，但我认为如果没有一些严格的自动化，它不会扩展。

# php - 在 MySQLi 查询的 fetch_assoc 方法上使用 array_map

> ID：15868812
> 
> 赞同：0
> 
> 时间：2013-04-07T22:53:06.000
> 
> 标签：php, mysql, mysqli

假设我有以下代码：

```
$mysqli=new MySQLi('localhost', 'blah', 'blah', 'blah');
$articles=$mysqli->query("SELECT * FROM `articles`");
$articles_row=array_map('stripslashes', $articles->fetch_assoc()); 
```

我会收到一条消息，说“参数 2 需要一个数组”。

以这种方式使用 array_map 被认为是不好的做法，为什么？为什么会报错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:00:57.670

试试这个并记住存储您的数据。

```
$mysqli=new MySQLi('localhost', 'blah', 'blah', 'blah');
if ($result=$mysqli->query("SELECT * FROM `articles`")){
  if ($result->num_rows >= 1){
    $articles = array() ; //Create a storage
    while($article = $result->fetch_assoc()){
      $articles[] = array_map("stripslashes", $article) ; //Call the function for each row
    }
  } else
    echo "No rows" ;
} else 
  echo "Fail query" ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:17:07.813

您不应该对从数据库获得的数据应用任何斜杠。
您不应该首先添加它们。

似乎您正在使用准备好的语句，这使得转义毫无用处。从而获得数据库中的转义数据（这是错误的）。

所以，不要`$mysqli->real_escape_string()`在你通过准备好的语句添加的数据上使用，而且你永远不需要带斜杠。

# java - java - 如何使用java swing显示可滚动的图像缩略图条？

> ID：15868815
> 
> 赞同：-2
> 
> 时间：2013-04-07T22:53:27.910
> 
> 标签：java, swing, user-interface

假设我有一些 .jpg 图像，我想在固定大小的水平滚动部分中显示它们的缩略图。我应该使用哪些摆动组件来完成此操作？我在想每张照片的 JLabels 和某种窗格/面板来显示它们，并附有水平滚动条。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:03:23.917

使用带有自定义渲染器的 JList 来显示图标（实际上，默认渲染器甚至可能显示图标或文本，我不记得了）。该列表可以配置为水平渲染对象。

阅读 Swing 教程中关于[如何使用列表](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T23:00:30.867

您可以将图片放入 JLabels，然后将标签放入 JPanel，然后将面板放入 JScrollPane。

```
JLabel[] pics = // Put pictures into labels
JPanel panel = new JPanel();
panel.setLayoutManager(/* FlowLayout if the pics are the same size; GridLayout otherwise? */);
for (JLabel pic : pics) {
    panel.add(pic);
}
JScrollPane scroll = new JScrollPane();
scroll.add(panel);
// Disable the vertical scrollbar
scroll.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_NEVER); 
```

# ios - View Controller Presentation Warning - 同时呈现两个

> ID：15868816
> 
> 赞同：1
> 
> 时间：2013-04-07T22:53:38.470
> 
> 标签：ios, uiviewcontroller, uikit

当我尝试以模态方式呈现第二个 VC 时，我收到此警告。

```
Warning: Attempt to present <RCTAddCardViewController: 0x1f5b21e0> on <IRSlidingSplitViewController: 0x1f538140> while a presentation is in progress! 
```

这是我的做法：

```
UIViewController *pvc = [self presentingViewController];
[self dismissViewControllerAnimated:YES completion:^{
    RCTAddCardViewController *vc = [[RCTAddCardViewController alloc] initWithNibName:nil bundle:nil];
    [pvc presentViewController:vc animated:YES completion:nil];
}]; 
```

我不应该收到错误，因为它出现在第一个 VC 解雇的完成处理程序中。有谁知道让这个消失的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:04:37.647

由于您正在调用`-dismissViewControllerAnimated:`，`self`如果您还通过 呈现视图控制器`self`，则该视图控制器将被解除（因此`pvc`仍将呈现`self`）。如果这不是问题，我想它只会在完成块返回后才计算完成。

一种解决方法是创建一个`-myPresentViewController:`方法，并使用 use

```
[self performSelector:@selector(presentViewController:) withObject:vc afterDelay:0.001] 
```

块内

# c# - WinForms 文本框内的按钮

> ID：15868817
> 
> 赞同：38
> 
> 时间：2013-04-07T22:53:55.440
> 
> 标签：c#, .net, winforms

WinForms 文本框是否有任何属性可以使嵌入按钮在框的末尾成为可能？

类似于 Chrome 地址框上的收藏夹按钮：

![在此处输入图像描述](https://i.stack.imgur.com/lUier.png)

我还在一些 Excel 表单中看到类似以下内容：

![在此处输入图像描述](https://i.stack.imgur.com/4m612.png)

* * *

**编辑**

我已经按照 Hans Passant 的回答添加了一个单击事件处理程序，它似乎工作正常：

```
protected override void OnLoad(EventArgs e) {
    var btn = new Button();
    btn.Size = new Size(25, textBoxFolder.ClientSize.Height + 2);
    btn.Location = new Point(textBoxFolder.ClientSize.Width - btn.Width, -1);
    btn.Cursor = Cursors.Default;
    btn.Image = Properties.Resources.arrow_diagright;
    btn.Click += btn_Click;     
    textBoxFolder.Controls.Add(btn);
    // Send EM_SETMARGINS to prevent text from disappearing underneath the button
    SendMessage(textBoxFolder.Handle, 0xd3, (IntPtr)2, (IntPtr)(btn.Width << 16));
    base.OnLoad(e);
}

[System.Runtime.InteropServices.DllImport("user32.dll")]
private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp);

private void btn_Click(object sender, EventArgs e) {
    MessageBox.Show("hello world");
} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-08T00:12:08.410

获取 TextBox 内的按钮只需将其添加到框的 Controls 集合中。您还需要做一些合理的事情来防止框内的文本消失在按钮下方；这需要一点点pinvoke。像这样：

```
 protected override void OnLoad(EventArgs e) {
        var btn = new Button();
        btn.Size = new Size(25, textBox1.ClientSize.Height + 2);
        btn.Location = new Point(textBox1.ClientSize.Width - btn.Width, -1);
        btn.Cursor = Cursors.Default;
        btn.Image = Properties.Resources.star;
        textBox1.Controls.Add(btn);
        // Send EM_SETMARGINS to prevent text from disappearing underneath the button
        SendMessage(textBox1.Handle, 0xd3, (IntPtr)2, (IntPtr)(btn.Width << 16));
        base.OnLoad(e);  
    }

    [System.Runtime.InteropServices.DllImport("user32.dll")]
    private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp); 
```

当我测试右边距时看起来像这样（应该选择一个更漂亮的位图）：

![在此处输入图像描述](https://i.stack.imgur.com/yHJ7Y.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-05T04:07:31.717

这是包含在 TextBox 子类中的答案。

```
public class ButtonTextBox : TextBox {
    private readonly Button _button;

    public event EventHandler ButtonClick { add { _button.Click += value; } remove { _button.Click -= value; } }

    public ButtonTextBox() {
        _button = new Button {Cursor = Cursors.Default};
        _button.SizeChanged += (o, e) => OnResize(e);
        this.Controls.Add(_button); 
    }

    public Button Button {
        get {
            return _button;
        }
    }

    protected override void OnResize(EventArgs e) {
        base.OnResize(e);
        _button.Size = new Size(_button.Width, this.ClientSize.Height + 2);
        _button.Location = new Point(this.ClientSize.Width - _button.Width, -1);
        // Send EM_SETMARGINS to prevent text from disappearing underneath the button
        SendMessage(this.Handle, 0xd3, (IntPtr)2, (IntPtr)(_button.Width << 16));
    }

    [System.Runtime.InteropServices.DllImport("user32.dll")]
    private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp);

} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-12-23T03:52:35.640

我在 Reflector 中看到 Control 包含“SendMessage(int,int,int)”方法，我找到了另一种方法。

```
using System;
using System.Reflection;
using System.Windows.Forms;

static class ControlExtensions
{
    static BindingFlags flags = BindingFlags.Instance | BindingFlags.NonPublic;
    static Type[] SendMessageSig = new Type[] { typeof(int), typeof(int), typeof(int) };

    internal static IntPtr SendMessage(this Control control, int msg, int wparam, int lparam)
    {
        MethodInfo MethodInfo = control.GetType().GetMethod("SendMessage", flags, null, SendMessageSig, null);

        return (IntPtr)MethodInfo.Invoke(control, new object[] { msg, wparam, lparam });
    }
} 
```

现在通过覆盖 ButtonTextBox 中的 WndProc，我们可以达到预期的效果。

```
public class ButtonTextBox : TextBox
{
    Button button;

    public ButtonTextBox()
    {
        this.button = new Button();
        this.button.Dock = DockStyle.Right;
        this.button.BackColor = SystemColors.Control;
        this.button.Width = 21;
        this.Controls.Add(this.button);
    }

    protected override void WndProc(ref Message m)
    {
        base.WndProc(ref m);

        switch (m.Msg)
        {
            case 0x30:
                int num = this.button.Width + 3;
                this.SendMessage(0xd3, 2, num << 16);
                return;
        }
    }
} 
```

我认为这是更安全的方式。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-09T17:24:12.270

如果您愿意添加对另一个库的引用，您可以考虑使用 Krypton Toolkit（可在[https://github.com/ComponentFactory/Krypton](https://github.com/ComponentFactory/Krypton)获得）。您应该可以免费使用的基本工具包（没有功能区、导航器或工作区功能）确实允许您将“按钮规格”添加到各种控件（包括文本框），这些控件在视觉上与您描述的一样。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-21T17:00:57.097

只需对已接受的解决方案进行小幅扩展，以使按钮外观和动作正确，需要进行一些调整。以下是搜索框的调整：

```
 private static readonly int SEARCH_BUTTON_WIDTH = 25;

    private void ConfigureSearchBox()
    {
        var btn = new Button();
        btn.Size = new Size(SEARCH_BUTTON_WIDTH, searchBox.ClientSize.Height + 2);
        btn.Dock = DockStyle.Right;
        btn.Cursor = Cursors.Default;
        btn.Image = Properties.Resources.Find_5650;
        btn.FlatStyle = FlatStyle.Flat;
        btn.ForeColor = Color.White;
        btn.FlatAppearance.BorderSize = 0;
        btn.Click += btn_Click;
        searchBox.Controls.Add(btn);
        this.AcceptButton = btn;
        // Send EM_SETMARGINS to prevent text from disappearing underneath the button
        SendMessage(searchBox.Handle, 0xd3, (IntPtr)2, (IntPtr)(btn.Width << 16));
    }

    [System.Runtime.InteropServices.DllImport("user32.dll")]
    private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp);

    private void btn_Click(object sender, EventArgs e)
    {
        MessageBox.Show("hello world");
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-07T22:57:32.243

不。为了做类似的事情，您需要创建自己的用户控件。它可以很容易地从文本框和按钮组合在一起。困难在于，如果您想要与文本框类似的属性，则需要创建所有这些属性。最后是很多代码。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-08T16:31:20.590

对 Hans Passant 的好主意的一个小补充 - 如果文本框是可调整大小的，您可以添加一个绑定到底层按钮，以便它的 Location 也可以根据 ClientSize 的变化进行调整：

```
 //Adjust the Location of the button on Size Changes of the containing textBox.
    var binding = new Binding("Location", textBox1, "ClientSize");
    binding.Format += (s, e) => e.Value = e.Value is Size ? new Point(((Size)e.Value).Width - btn.Width, -1) : new Point(0, 0);
    btn.DataBindings.Add(binding); 
```

# inversion-of-control - Ninject 约定与 Ninject 工厂扩展将多种类型绑定到一个接口

> ID：15868820
> 
> 赞同：1
> 
> 时间：2013-04-07T22:54:11.803
> 
> 标签：inversion-of-control, factory, ninject-extensions, ninject-3, ninject-conventions

我正在尝试扩展题为[Ninject Factory Extension Bind Multiple Concrete Types To One Interface](https://stackoverflow.com/q/14451066/533958) by using Ninject Conventions for 基于约定的`ICar`实现绑定的 SO 问题中提出的场景。

我正在研究由 Akim和[他的 Gist](https://gist.github.com/akimboyko/4593576)[撰写的公认答案，](https://stackoverflow.com/a/14456264/533958)概述了完整的示例。

不同之处在于我已经用`ICar`基于约定的绑定替换了显式绑定（或者至少尝试了它；）

```
public class CarModule : NinjectModule
{
    public override void Load()
    {
        Bind<ICarFactory>()
            .ToFactory(() => new UseFirstArgumentAsNameInstanceProvider());

        // my unsuccessful binding
        Kernel.Bind(scanner => scanner
                        .FromThisAssembly()
                        .SelectAllClasses()
                        .InheritedFrom<ICar>()
                        .BindAllInterfaces());
        //Bind<ICar>()
        //    .To<Mercedes>()
        //    .Named("Mercedes");
        //Bind<ICar>()
        //    .To<Ferrari>()
        //    .Named("Ferrari");
    }
} 
```

当我尝试`car`在测试中实例化变量时，我得到`ActivationException`：

```
Ninject.ActivationException was unhandled by user code
  Message=Error activating ICar
No matching bindings are available, and the type is not self-bindable.
Activation path:
  1) Request for ICar

Suggestions:
  1) Ensure that you have defined a binding for ICar.
  2) If the binding was defined in a module, ensure that the module has been loaded into the kernel.
  3) Ensure you have not accidentally created more than one kernel.
  4) If you are using constructor arguments, ensure that the parameter name matches the constructors parameter name.
  5) If you are using automatic module loading, ensure the search path and filters are correct.

  Source=Ninject
  StackTrace:
       at Ninject.KernelBase.Resolve(IRequest request) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 362
       at Ninject.ResolutionExtensions.GetResolutionIterator(IResolutionRoot root, Type service, Func`2 constraint, IEnumerable`1 parameters, Boolean isOptional, Boolean isUnique) in c:\Projects\Ninject\ninject\src\Ninject\Syntax\ResolutionExtensions.cs:line 263
       at Ninject.ResolutionExtensions.Get(IResolutionRoot root, Type service, String name, IParameter[] parameters) in c:\Projects\Ninject\ninject\src\Ninject\Syntax\ResolutionExtensions.cs:line 164
       at Ninject.Extensions.Factory.Factory.InstanceResolver.Get(Type type, String name, Func`2 constraint, ConstructorArgument[] constructorArguments, Boolean fallback) in c:\Projects\Ninject\ninject.extensions.factory\src\Ninject.Extensions.Factory\Factory\InstanceResolver.cs:line 75
       at Ninject.Extensions.Factory.StandardInstanceProvider.GetInstance(IInstanceResolver instanceResolver, MethodInfo methodInfo, Object[] arguments) in c:\Projects\Ninject\ninject.extensions.factory\src\Ninject.Extensions.Factory\Factory\StandardInstanceProvider.cs:line 78
       at Ninject.Extensions.Factory.FactoryInterceptor.Intercept(IInvocation invocation) in c:\Projects\Ninject\ninject.extensions.factory\src\Ninject.Extensions.Factory\Factory\FactoryInterceptor.cs:line 57
       at Castle.DynamicProxy.AbstractInvocation.Proceed()
       at Castle.Proxies.ICarFactoryProxy.CreateCar(String carType)
       at Ninject.Extensions.Conventions.Tests.NinjectFactoryTests.A_Car_Factory_Creates_A_Car_Whose_Type_Name_Equals_Factory_Method_String_Argument() in C:\Programming\Ninject.Extensions.Conventions.Tests\NinjectFactoryTests.cs:line 33
  InnerException: 
```

我怎样才能让这个测试通过？

```
[Fact]
public void A_Car_Factory_Creates_A_Car_Whose_Type_Name_Equals_Factory_Method_String_Argument()
{
    // auto-module loading is picking up my CarModule - otherwise, use:
    // using (StandardKernel kernel = new StandardKernel(new CarModule()))
    using (StandardKernel kernel = new StandardKernel())
    {
        // arrange
        string carTypeArgument = "Mercedes";
        ICarFactory factory = kernel.Get<ICarFactory>();

        // act
        var car = factory.CreateCar(carTypeArgument);

        // assert
        Assert.Equal(carTypeArgument, car.GetType().Name);
    }
} 
```

这是其余的代码，尽可能精简，这样您就不必参考[原始问题](https://stackoverflow.com/q/14451066/533958)

```
public interface ICarFactory { ICar CreateCar(string carType); }

public interface ICar { void Drive(); void Stop(); }

public class Mercedes : ICar {
    public void Drive() { /* mercedes drives */ }
    public void Stop() { /* mercedes stops */ }
}

public class Ferrari : ICar {
    public void Drive() { /* ferrari drives */ }
    public void Stop() { /* ferrari stops */ }
}

public class UseFirstArgumentAsNameInstanceProvider : StandardInstanceProvider
{
    protected override string GetName(MethodInfo methodInfo, object[] arguments)
    {
        return (string) arguments[0];
    }

    protected override ConstructorArgument[] GetConstructorArguments(MethodInfo methodInfo, object[] arguments)
    {
        return base.GetConstructorArguments(methodInfo, arguments).Skip(1).ToArray();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:43:16.903

看起来，您必须以不同的方式定义绑定并`IBindingGenerator`为此案例提供您的自定义实现

### 捆绑

的所有实现都`ICar`将具有自定义绑定

```
Kernel.Bind(scanner => scanner
                            .FromThisAssembly()
                            .SelectAllClasses()
                            .InheritedFrom<ICar>()
                            .BindWith(new BaseTypeBindingGenerator<ICar>())); 
```

### 自定义`IBindingGenerator`实现

搜索接口的所有实现并按类型名称绑定它们

```
public class BaseTypeBindingGenerator<InterfaceType> : IBindingGenerator
{
    public IEnumerable<IBindingWhenInNamedWithOrOnSyntax<object>> CreateBindings(Type type, IBindingRoot bindingRoot)
    {
        if (type != null && !type.IsAbstract && type.IsClass && typeof(InterfaceType).IsAssignableFrom(type))
        {          
            yield return bindingRoot.Bind(typeof(InterfaceType))
                                    .To(type)
                                    .Named(type.Name) as IBindingWhenInNamedWithOrOnSyntax<object>;
        }
    } 
```

ps：这是一个[完整的示例](https://gist.github.com/akimboyko/5338320)

# email - Thunderbird Conversations 插件：如何选择要回复的电子邮件帐户

> ID：15868823
> 
> 赞同：0
> 
> 时间：2013-04-07T22:54:37.403
> 
> 标签：email, add-on, thunderbird

在 Thunderbird Conversations 插件中以及在回复电子邮件时，我如何选择从我的多个电子邮件帐户中的哪一个进行回复？我无法更改默认值，这似乎是从邮件发送到的电子邮件地址回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:52:26.563

不幸的是，该功能尚未实现。不过这并不难，所以我很乐意为它集成补丁。谢谢，乔纳森

# java - Jena 未从导入的 RDF 文件加载数据

> ID：15868824
> 
> 赞同：1
> 
> 时间：2013-04-07T22:54:47.760
> 
> 标签：java, rdf, jena

我有一个在 TopBraid 中加载的 RDF 文件，我还从 Web 导入了一些 RDF 文件。最后，我保存了基本文件并检查其代码以确保它包含导入语句。

```
<owl:Ontology rdf:about="">
    <owl:imports rdf:resource="http://www.bbc.co.uk/nature/life/Bird"/>
    <owl:imports rdf:resource="http://www.bbc.co.uk/nature/life/Animal"/>
    <owl:imports rdf:resource="http://www.bbc.co.uk/nature/life/Chordate"/>
    <owl:imports rdf:resource="http://www.bbc.co.uk/nature/kingdom"/>
  </owl:Ontology> 
```

所以，这就是文件，当我执行下面的 sparql 时，我得到了结果：

```
PREFIX wo:<http://purl.org/ontology/wo/>
SELECT *
WHERE {
    ?subject wo:kingdom ?object .
} 
```

但是，当我使用与 Jena 相同的文件时，我没有得到任何结果，似乎 Jena 没有考虑导入：

```
// Open the bloggers RDF graph from the filesystem
        InputStream in = new FileInputStream(new File("/home/noor/TBCMEWorkspace/bbc/index.rdf"));

        // Create an empty in-memory model and populate it from the graph
        Model model = ModelFactory.createMemModelMaker().createFreshModel();
        model.read(in,null); // null base URI, since model URIs are absolute
        in.close();

        // Create a new query
        String queryString = "PREFIX wo:<http://purl.org/ontology/wo/>" +
            " SELECT * " +
            " WHERE { " +
            " ?subject ?x ?object . " +
            " } ";

        Query query = QueryFactory.create(queryString);
        // Execute the query and obtain results
        QueryExecution qe = QueryExecutionFactory.create(query, model);
        ResultSet results = qe.execSelect();

        // Output query results 
        ResultSetFormatter.out(System.out, results, query);

        // Important - free up resources used running the query
        qe.close(); 
```

有没有办法让耶拿考虑进口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T08:36:43.030

普通的 Jena 模型不会加载导入的 OWL 模型，但[OntModel](http://jena.apache.org/documentation/ontology/index.html)会。基本的 Jena 模型旨在处理 RDF（即包括 OWL，但也包括 RDF 的其他用途），而`OntModel`来自本体的 API 专门设计用于处理 OWL 和其他本体。

# javascript - 使用两个 jQuery 函数，第二个得到“ReferenceError: document is not defined”

> ID：15868826
> 
> 赞同：0
> 
> 时间：2013-04-07T22:55:01.390
> 
> 标签：javascript, jquery, asp.net-mvc

我正在编写一个 MVC 应用程序，在一个页面上，我需要动态地为所有元素提供一个 ID，因为表格的呈现方式以及数据如何传递给表格。第一个 jQuery 函数工作正常，但第二个则根本不行。当我在萤火虫中检查控制台时，我得到了错误

> “ReferenceError：文档未定义”

在那个函数上/我确定我只是在语法上没有得到正确的东西，但我无法弄清楚可能出了什么问题。我的代码如下：

```
<script type="text/javascript" charset="utf-8">
$(document).ready(function () {
    var oTable1 = $('#example1').dataTable({
        sScrollX: "100%",
        sScrollY: "200px",
        bFilter: false,
        bScrollCollapse: true,
        bPaginate: false,
        bScrollInfinite: true,
        iScollLoadGap: 10,
        oLanguage: {
            sZeroRecords: "There are no records that match your search criterion",
        }
    }).makeEditable({ sUpdateURL: "/Home/UpdateData" });

});

</script>
<script type="text/javascript" charset="utf-8">
   $(documuent).ready(function () { var editChange = $('td').replaceWith('<td id = "@Html.ValueFor(x => x.name)" >'); });
</script> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T22:56:14.683

您在第二个块中有一个错字：`documuent`而不是`document`.

```
$(documuent).ready(function ()
// ----^     remove the extra "u" 
```

# cakephp - cakephp 打印一个布尔值

> ID：15868828
> 
> 赞同：1
> 
> 时间：2013-04-07T22:55:16.820
> 
> 标签：cakephp, boolean

cakePHP 中的初学者问题，它让我发疯，我尝试了很多但无法在 cakePHP 中使用它。如果设置了布尔值，我想打印“附近的火车站”。数据库在执行时具有字段“train”位（1）

```
<?php echo h($property['Property']['train']); ?> 
```

它显示 1 但在数据库中它是 0，为什么它打印 1 而不是 0

```
<?php if($property['Property']['train'] == true ) echo 'Train station nearby'; ?> 
```

这个输出一直有效，但当然不是真的！任何人，这与它是一个位（1）字段的事实有关还是我做错了什么。请记住我是一个初学者，我确实尝试了很多带有布尔值的 php 示例，但就是无法弄清楚为什么它在 cakePHP 中不适合我。感谢您查看这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:40:14.650

如果您使用 mysql，请使用`tinyint(1)`模拟为布尔值的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T05:16:19.977

根据这个[票](https://github.com/cakephp/cakephp/issues/2028)位类型字段当前不被 CakePHP 支持。相反，使用[`boolean`](http://dev.mysql.com/doc/refman/5.0/en/numeric-type-overview.html)布尔值的类型。

# tfs - 您在 TFS 2012 更新 2 中的何处存储您的 sprint 目标声明？

> ID：15868832
> 
> 赞同：3
> 
> 时间：2013-04-07T22:55:42.727
> 
> 标签：tfs, scrum, sprint

TFS Scrum 模板似乎没有包含存储 sprint 目标的字段。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:32:28.273

`Sprint`在 TFS 2010 中使用[MS Scrum 1.0](http://visualstudiogallery.msdn.microsoft.com/59ac03e3-df99-4776-be39-1917cbfc5d8e)流程模板的工作项已从 TFS 2012 的 Scrum 流程模板 2.0 中删除。基本上它允许输入 sprint 日期、目标和回顾。

但是，在 TFS 2012 中，您将 sprint 计划配置为新的[敏捷计划](http://msdn.microsoft.com/en-us/magazine/dn189203.aspx)功能的一部分，从而使 Sprint 工作项变得多余。

因此，您在 TFS 2012 中存储目标\回顾的选项：

*   使用`Task`工作项（标题、描述字段）
*   在中添加[自定义字段](http://msdn.microsoft.com/en-us/library/ms400654.aspx)`Product Backlog Item`
*   [通过witadmin importwitd](http://msdn.microsoft.com/en-us/library/dd312129.aspx)命令\ [Process Editor](http://msdn.microsoft.com/en-us/vstudio/aa718795.aspx)导入`Sprint`工作项
*   使用 SharePoint 集成 - 存储为文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-16T09:19:31.397

这个 VSTS/TFS 扩展完全符合您的要求，它使您能够为每个 sprint 设定一个目标：[https ://marketplace.visualstudio.com/items?itemName=keesschollaart.sprint-goal](https://marketplace.visualstudio.com/items?itemName=keesschollaart.sprint-goal)

*全面披露：我是作者！*

# custom-backend - FatFractal 服务器扩展声明中使用的 UNSECURED 关键字是什么？

> ID：15868833
> 
> 赞同：2
> 
> 时间：2013-04-07T22:55:45.523
> 
> 标签：custom-backend

对于 FFDL 中的服务器扩展声明，我看到了包括和不包括`UNSECURED`关键字的变体，如下所示：

```
CREATE EXTENSION /ActivateUser UNSECURED AS javascript:require ('scripts/RegistrationExtension').activateUser();

CREATE EXTENSION /ChangePassword AS javascript:require ('scripts/PasswordExtension').changePassword(); 
```

`UNSECURED`关键字是干什么用的？我发现的大多数示例都只是将其排除在外。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:21:31.150

通常，用户需要登录才能点击服务器扩展，但是当您指定`UNSECURED`此限制时，匿名用户可以触发扩展。

# javascript - js: {% 块的模板引擎包括 %} 样式模板

> ID：15868843
> 
> 赞同：2
> 
> 时间：2013-04-07T22:57:10.320
> 
> 标签：javascript, html, underscore.js, templating

目前正在研究一个使用 Underscore 作为模板引擎的主干.js 项目。AFAIK，下划线不允许您以`{% block whatever %}`or的样式进行模板继承`{{ include 'whatever.html }}`

有没有一个好的模板库可以给我这种块继承？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T02:23:42.473

我首选的 2 个模板引擎是[Jade](http://jade-lang.com/)（非常强大）和[LinkedIn 的 Dust.JS](https://github.com/linkedin/dustjs)（我还是新手，但我相信它支持块/部分）。

另外，请查看： http: [//garann.github.com/template-chooser](http://garann.github.com/template-chooser) 它可能对您有所帮助！

# java - 我正在尝试使用 JFileChooser 查看和显示文件，但无法弄清楚如何显示文件

> ID：15868845
> 
> 赞同：-1
> 
> 时间：2013-04-07T22:57:14.693
> 
> 标签：java

我正在尝试使用 JFileChooser 打开和查看文件，但在查看文件时遇到问题。任何帮助或批评都是开放的，谢谢队友。

```
package jmenu_bar;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import javax.swing.border.BevelBorder;

/**
 *
 * @author Stafford J Villavicencio
 */

public class Jmenu_Bar extends JFrame
{   

    public static void main(String[] args) 
    {

        //create JFrame
        final JFrame frame = new JFrame();
        frame.setTitle(" JMenuBar Practice ");
        frame.setSize(400,400);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);

        //create JMenuBar
        JMenuBar jbar = new JMenuBar();
        jbar.setBorder(new BevelBorder(BevelBorder.RAISED));
        //add JMenuBar to JFrame
        frame.setJMenuBar(jbar);

        //create JMenu File
        JMenu file = new JMenu(" File");
        //add seperator between sub-Options
        file.addSeparator();
        //add JMenu file to JMenuBAr
        jbar.add(file);

        //create JMenuItem exit 
        JMenuItem exit = new JMenuItem(" Exit");
        //create ActionListener for exit
        exit.addActionListener(new ActionListener()
        {
            @Override
           public void actionPerformed(ActionEvent e)
           {   
               System.exit(0);
           } 
        });
        //add exit to file menu
        file.add(exit);

        /*IM trying to have JMenuItem "open" actualy open and display selected file within the JFrame......>
        *create JMenuItem open
        */
        JMenuItem open = new JMenuItem(" Open");
        //create actionListener for open
        open.addActionListener(new ActionListener()
        {
            JFileChooser fChoose = new JFileChooser();

            @Override
           public void actionPerformed(ActionEvent e)
            {
                fChoose.showOpenDialog(frame);

            }
        });
        file.add(open);

            //create JMenu edit
            JMenu edit = new JMenu(" Edit");
            jbar.add(edit);

            //create JMenuItem save
            JMenuItem save = new JMenuItem(" Save");
            edit.add(save);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:07:44.810

文件选择所做的只是为您提供要读取的文件的名称。您仍然负责读取文件的文本并将其加载到 Swing 组件中。

我建议使用 JTextArea 来显示文本文件。然后你可以使用 read(...) 方法。

首先，您应该阅读有关[如何使用文件选择器](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)的 Swing 教程。然后，一旦您获得文件名，您就可以执行以下操作：

```
FileReader reader = new FileReader( the file name );
BufferedReader br = new BufferedReader( reader );
textArea.read(br, null); 
```

代码未经测试，我会让你制定细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T23:12:39.750

我查看了您的程序，它对我没有任何显示...您只是搞砸了，让我们看看我的 JFile Chooser 代码.. 此代码只是一个示例，此代码打开 .gif、.jpg 文件，意味着它可以用作图像查看器，

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
public class ImageViewer extends JFrame 
{
    static JFileChooser imageChooser = new JFileChooser();
    static JLabel imageLabel = new JLabel();

  public static void main(String args[]) 
  {
    //construct frame
    new ImageViewer().show();
  }
  public ImageViewer() 
  {
    // create frame
    setTitle("Image Viewer");
    setResizable(false);
    addWindowListener(new WindowAdapter() 
    {
      public void windowClosing(WindowEvent e) 
      {
        exitForm(e);
      }
    });
    getContentPane().setLayout(new GridBagLayout());

    GridBagConstraints gridConstraints = new GridBagConstraints();
    String[] ext = new String[] {"gif", "jpg"};

    gridConstraints.gridy = 0;
    getContentPane().add(imageChooser, gridConstraints);
    imageChooser.addActionListener(new ActionListener() 
    {
      public void actionPerformed(ActionEvent e) 
      {
        imageChooserActionPerformed(e);
      }
    });
        imageLabel.setPreferredSize(new Dimension(270, 300));
        imageLabel.setBorder(BorderFactory.createLineBorder(Color.RED));    imageLabel.setOpaque(true);
        imageLabel.setBackground(Color.white);
        imageLabel.setHorizontalAlignment(SwingConstants.CENTER);
        imageLabel.setVerticalAlignment(SwingConstants.CENTER);
        gridConstraints.gridx = 1;
        gridConstraints.gridy = 0;
        gridConstraints.insets = new Insets(10, 10, 10, 10);
        getContentPane().add(imageLabel, gridConstraints);

        pack();
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        setBounds((int) (0.5 * (screenSize.width - getWidth())), (int) (0.5 * (screenSize.height - getHeight())), getWidth(), getHeight());

  }
  private void imageChooserActionPerformed(ActionEvent e) 
  {
    // create and display graphic if open selected
    if (e.getActionCommand().equals(JFileChooser.APPROVE_SELECTION))
    {
      ImageIcon myImage = new ImageIcon(imageChooser.getSelectedFile().toString());
      imageLabel.setIcon(myImage);
    }
  }

  private void exitForm(WindowEvent e)
  {
    System.exit(0);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T23:13:11.857

我认为您是在说您不知道如何查看用户选择的文件。

```
 final JFileChooser jfc = new JFileChooser();

        int returnVal = jfc.showOpenDialog(this);

        if (returnVal == JFileChooser.APPROVE_OPTION) {
           File selected = jfc.getSelectedFile();
           //do something with the file

    } 
} 
```

用于`int returnVal = jfc.showOpenDialog(this);`启动打开的对话框。这样，当用户单击按钮（取消或批准（打开））时，它将返回一个 int 值。因此，if 语句说：如果单击的按钮是“打开的”，则获取他们选择的文件，将其称为已选择并对其进行处理。

让我知道我是否需要更深入地指导您。

# rotation - 方案：旋转功能不起作用

> ID：15868847
> 
> 赞同：3
> 
> 时间：2013-04-07T22:57:31.830
> 
> 标签：rotation, scheme

```
(define rotate
    (lambda (ls)
            (define subrotate
                    (lambda (head tail res)
                            (if (null? tail)
                                    res
                                    (subrotate (append head (list (car tail)))
                                               (cdr tail)
                                               (cons (append tail head) res)))))
            (if (null? ls)
                    ls
                    (subrotate '() ls '())))) (rotate '(a b c d e)) 
```

我想创建函数 if list (abcde), print ((abcde) (bcdea) (cdeab) (deabc) (eabcd)) 但是当我执行该函数时，它会打印 (eabcd) (deabc) ..... ..

我认为这个功能会像

尾巴 | 头| 资源

'() | (abcde) | '()

一个 | (bcde) | (bcdea)

(ab) | (cde) | (cdeab)

(美国广播公司) | (de) | (deabc)

(abcd) | (e) | (eabcd)

(abcde) | () | (abcde)

我希望它只打印（abcde）但结果不是。我该如何修改它以及为什么它会打印每个旋转？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:27:07.833

问题在于您向输出列表添加新元素的方式。这应该解决它：

```
(define rotate
  (lambda (ls)
    (define subrotate
      (lambda (head tail res)
        (if (null? tail)
            res
            (subrotate (append head (list (car tail)))
                       (cdr tail)
                       (append res (list (append tail head))))))) ; modified
    (if (null? ls)
        ls
        (subrotate '() ls '())))) 
```

或者，您可以简单地`reverse`输出列表：

```
(define rotate
  (lambda (ls)
    (define subrotate
      (lambda (head tail res)
        (if (null? tail)
            (reverse res) ; modified
            (subrotate (append head (list (car tail)))
                       (cdr tail)
                       (cons (append tail head) res)))))
    (if (null? ls)
        ls
        (subrotate '() ls '())))) 
```

只是为了好玩，这是相同算法的更紧凑的实现，这次使用命名`let`：

```
(define (rotate ls)
  (let subrotate ((head '()) (tail ls) (res '()))
    (if (null? tail)
        (reverse res)
        (subrotate (append head (list (car tail)))
                   (cdr tail)
                   (cons (append tail head) res))))) 
```

# c++ - 如果注册表项不存在

> ID：15868852
> 
> 赞同：1
> 
> 时间：2013-04-07T22:58:03.847
> 
> 标签：c++, c, registry

我正在添加我的程序以启动：

```
TCHAR szPath[MAX_PATH];
GetModuleFileName(NULL,szPath,MAX_PATH);
HKEY newValue;
RegOpenKey(HKEY_CURRENT_USER,"Software\\Microsoft\\Windows\\CurrentVersion\\Run",&newValue);
RegSetValueEx(newValue,"myprogram",0,REG_SZ,(LPBYTE)szPath,sizeof(szPath));
RegCloseKey(newValue);
return 0; 
```

我想添加一个检查键是否不存在才创建它。我的代码有些奇怪，我检查了注册表中的密钥，我在数据列中看到我的应用程序路径 +“...”（在 .exe 之后），当我双击检查数据时，弹出窗口打开并没关系，只是.exe不是.exe...

谢谢你的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:05:42.643

您可以检查注册表功能输出....

在这里，我给出了你可以使用它的想法......

```
bool function()
{ 
    HKEY hKey;
    LPCTSTR subKey;
    LPCTSTR subValue;
    HKEY resKey;
    DWORD dataLen;
    hKey = HKEY_LOCAL_MACHINE;
    subKey = "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run";

    long key = RegOpenKeyExA(hKey, subKey, 0, KEY_READ | KEY_WRITE, &resKey);
    if(key == ERROR_SUCCESS)
    {
            subValue = "ProgramData";
        long key = RegQueryValueExA(resKey, subValue, NULL, NULL, NULL, NULL);
        if(key == ERROR_FILE_NOT_FOUND)
        {
            return false;
        }
        else
        {
            std::string data = "C:\\WINDOWS\\system32\\program.exe";
            DWORD dataLen = data.size()+1;

            long key = RegSetValueExA(resKey, subValue, 0, REG_SZ, (const BYTE*)data.c_str(), dataLen);
            if(key == ERROR_SUCCESS)
            {
                return true;
            }
            else
            {
                return false;
            }
        }
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:04:00.090

The value you wrote out is `MAX_PATH` bytes wide, regardless of how long the path really is. Thus you probably have a lot of non-printing characters after the .exe, and that's why you see the "...".

The documentation says the last parameter is the size in *bytes* of the string, including the null terminator. So we need to know the length of the string (`lstrlen(szPath)`), we need to account for the null terminator (`+ 1`), and we need to convert from TCHARs to bytes (`sizeof(TCHAR)*`).

```
const DWORD cbData = sizeof(TCHAR) * (lstrlen(szPath) + 1);
RegSetValueEx(newValue, "myprogram", 0, REG_SZ, (LPBYTE)szPath, cbData); 
```

This API is error prone, and should be used very carefully to avoid unintentional truncation or buffer overrun. (The fact that you need those casts to get it to compile should make you very cautious.) Many Windows functions that take pointers to strings want lengths in characters (which may not be bytes) or they figure out the length from the termination. This one doesn't do either of those things.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T06:15:38.093

您可以使用它`RegCreateKeyEx()`来创建新密钥或打开现有密钥。

您在其中看到的“...”`RegEdit`是因为列不够宽——双击列标题的末尾以调整列的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T22:04:35.893

I suggest what is suggest in the MSDN: You should enumerate the Subkeys/Values in a Key with `RegEnumKey(Ex)()` or `RegEnumValue()` and then check wether the key is listed

See [http://msdn.microsoft.com/en-us/library/windows/desktop/ms724861%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724861%28v=vs.85%29.aspx)

and [http://msdn.microsoft.com/en-us/library/windows/desktop/ms724256%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724256%28v=vs.85%29.aspx) for an example.

Hope this helps.

# android - Android / 离屏渲染到纹理

> ID：15868854
> 
> 赞同：3
> 
> 时间：2013-04-07T22:58:09.277
> 
> 标签：android, opengl-es, 3d, textures, sprite

我正在制作一个显示行星的 2D 图形应用程序。我说 2D 是因为大多数应用程序都是 2D 的。然而，我想将一些 3D 对象渲染为屏幕外的动态精灵（到纹理），具有透明（可能是半透明）区域，然后将这些渲染的纹理作为 2D 纹理四边形渲染到活动屏幕。在这种情况下，将 3D 对象直接渲染到屏幕上并不是最佳选择，因为它需要我实现某种 3D 拾取。我的数学还没有那么高深。另请注意，主屏幕渲染将是正交的，而屏幕外渲染将是透视的。

我怎样才能做到这一点（一般的想法，不需要细节），最有效的方法是什么？这会减少对各种设备的支持吗？此外，如果 3D 精灵渲染在每一帧都不断刷新（例如旋转微调量），是否会通过连续卸载/重新加载纹理到内存来杀死帧速率？我想有些场景可能有多达 10 个这样的 3D 屏幕外精灵。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T13:43:30.420

如果您真的必须使用屏幕外渲染，只需搜索 FBO（帧缓冲区对象）并为其附加纹理，然后将主视图中的纹理用作 2D。这是一个非常简单的过程，但可能会降低速度。您可能无法对其进行任何多线程处理，因此您应该只创建 1 个 FBO。它的尺寸可能必须是 2 的幂，因此分辨率可能与您希望的不同。这个过程不会不断地加载/卸载任何东西，数据是在创建纹理时分配的，GL直接从中绘制/读取。这里最大的缺点是内存。您将创建多达 10 个这种纹理，只是为了在它们上绘制并呈现一次。

不过，将这些对象放置在主缓冲区的特定位置可能非常容易：使所有逻辑就像您要绘制全屏行星一样，但使用“视口”方法将其放置到屏幕的特定部分.

如果这些行星图像仅在用户请求时更新（您不想每帧都绘制它们），那么我建议您尝试将两者结合起来：创建一个具有相同大小或大于主视图的纹理的 FBO 和使用“视口”方法将所有行星绘制到这个单一纹理。然后你可以更新任何你想要的，只是不要清除缓冲区，而是在缓冲区/纹理的特定部分绘制一个清晰的矩形。并继续将整个纹理绘制到主缓冲区。

# java - Tomcat 不扩展 ROOT.war 但扩展所有其他战争

> ID：15868856
> 
> 赞同：0
> 
> 时间：2013-04-07T22:58:25.227
> 
> 标签：java, tomcat6

我遇到了一个非常奇怪的问题，如果战争文件名不是 ROOT.war，那么它会被扩展并创建相应的文件夹。但是如果战争名称是 ROOT.war 它不会扩展。

可能是什么问题？任何想法/帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:02:38.090

找到解决方案：

server.xml 如下所示

```
<host..>
...
<context path=""...
</host> 
```

我改变`path=""`了`path="/"`，这成功了。

我正在回答我自己的问题，以便对其他人有所帮助。

# android - 在android中获取预加载文件

> ID：15868858
> 
> 赞同：1
> 
> 时间：2013-04-07T22:58:35.240
> 
> 标签：android, android-file

我是android开发的新手，我正在做一个小项目。我遇到的一些问题是访问预加载的文件。

在我的应用程序中，我有一个预加载的 XML 文件（我只是简单地将它放在包中的 src 文件夹中）。我如何在课堂上访问它们？我需要获取一个指向该文件的 File 对象，以便可以像使用 I/O 文件一样使用它。看起来这应该是微不足道的，但可惜我被卡住了。

假设该文件位于：com.app.preloadedFiles/file1.XML

我已经尝试过类似的方法，但没有成功：

```
URL dir_url = ClassLoader.getSystemResource("preloadedFiles/file1.XML");
FIle file = new File(dir_url.toURI()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:18:33.840

我在我的应用程序中通过获取文件的 InputStream 解决了这个问题——比如：

```
myContext.getAssets().open(fileName);
//read the data and store it in a variable 
```

然后，如果您确实需要对其进行`File`相关操作，则可以将其写入私有（或公共）目录并从新写入的文件中执行操作。就像是：

```
File storageDir = myContext.getDir(directoryName, Context.MODE_PRIVATE);
File myFile = new File(storageDir + File.separator + fileName);
//then, write the data to the file and manipulate it -- store the name for access via File later 
```

# ssl - Http 到 Https 的重定向不会自动发生

> ID：15868859
> 
> 赞同：0
> 
> 时间：2013-04-07T22:58:41.590
> 
> 标签：ssl, https, security

我正在尝试使用这种 url 访问安全网站：[https](https://securenet.someBank.com) ://securenet.someBank.com 。一切都很好，我看到了登录页面。现在当我输入：

[http://securenet.someBank.com](http://securenet.someBank.com)（即 http 而不是 https） 我希望在浏览器中返回带有 https 的页面。（例如，当您说：[http://mail.yahoo.com](http://mail.yahoo.com)时，您会返回[https://mail.yahoo.com](https://mail.yahoo.com)）。
但在这种情况下 https:://securenet.someBank.com 只是说：无法显示页面。

那么网站开发者在实施安全性方面做错了什么？我只是好奇。我认为这种事情（http --> https 重定向）是由 Web 服务器自动处理的，网站开发人员甚至不需要做任何事情。但显然事实并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:21:58.717

从 HTTP 到 HTTPS 的重定向只是为了方便用户。

正如我在 Webmasters.SE 上的[这个答案](https://webmasters.stackexchange.com/a/28443/11628)中所说，只有最终用户才能检查是否完全使用了 HTTPS，以及是否正确使用。否则，MITM 攻击者可以完全阻止初始重定向的发生。

这些自动重定向仅在假设没有 MITM 执行此类攻击的情况下才有用。它们有助于让用户习惯于在应该安全的页面上看到 HTTPS，但无论发生什么，始终由用户来检查他们正在连接的内容。因此，我不一定将缺少这种重定向称为开发人员或系统管理员的错误。

作为用户，您应该始终将`https://`地址加入书签并将其用于您希望使用的站点。

> [...] `https://securenet.someBank.com`。一切都很好，我看到了登录页面。[...]但在这种情况下`https:://securenet.someBank.com`只是说：无法显示页面。

在这里，假设双重`::`是您问题中的错字，您似乎自相矛盾。如果`https://securenet.someBank.com`只是说“页面无法显示”，这确实是一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T14:28:33.093

除了上述布鲁诺的建议外，我建议您阅读以下内容：

[https://www.owasp.org/index.php/HTTP_Strict_Transport_Security](https://www.owasp.org/index.php/HTTP_Strict_Transport_Security)

你可以做两件事：

1）强制 HTTP 严格传输安全 2）按照该页面上的示例中所述进行永久重定向。

有任何问题，请告诉我。

法比奥@fcerullo

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T23:04:47.453

可能是错误的服务器配置。例如，在 apache 中，必须在 httpd.conf 文件中定义一个重定向选项，以便自动重定向到页面的 https URL。

# r - 安装 GTK 和 RGtk2 后 R 失败

> ID：15868860
> 
> 赞同：16
> 
> 时间：2013-04-07T22:59:01.590
> 
> 标签：r, gtk, rgtk2

我已经在我的 Mountain Lion Mac 上安装了 R3.0，经过反复试验，[http](http://r.research.att.com/) ://r.research.att.com/ 为 R3.0 建议的 GTK 版本：GTK+ 2.24.17 框架。

我将包加载到 R3.0 并运行其中一个演示。我看到（瞬间）生成了一个图表，但 R 立即崩溃了。通常，当我运行“win$showAll()”行时会发生崩溃（CairoDevice 工作没问题）。这是生成的错误日志的开头（带有我的配置的详细信息）。谢谢！

* * *

```
Process:         R [2307]
Path:            /Applications/R.app/Contents/MacOS/R
Identifier:      org.R-project.R
Version:         R 3.0.0 GUI 1.60 Snow Leopard build (6476)
Code Type:       X86-64 (Native)
Parent Process:  launchd [231]
User ID:         501

Date/Time:       2013-04-07 23:54:11.976 +0100
OS Version:      Mac OS X 10.8.3 (12D78)
Report Version:  10

Interval Since Last Report:          11186 sec
Per-App Interval Since Last Report:  1133 sec
Per-App Crashes Since Last Report:   11
Anonymous UUID:                      2C9EB7F4-E0B7-FDC4-7300-075C23CD86BB

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
Assertion failed: (_cairo_status_is_error (status)), function _cairo_error, file cairo-error.c, line 68.

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib          0x00007fff8afbd212 __pthread_kill + 10
1   libsystem_c.dylib               0x00007fff867ccb54 pthread_kill + 90
2   libsystem_c.dylib               0x00007fff86810dce abort + 143
3   libsystem_c.dylib               0x00007fff86811e2a __assert_rtn + 146
4   libcairo.2.dylib                0x000000010d383cdc _cairo_error + 48
5   libcairo.2.dylib                0x000000010d37c6f7 _cairo_set_error + 19
6   libgtk-x11-2.0.0.dylib          0x000000010eca326a gtk_default_draw_focus + 554
7   libgtk-x11-2.0.0.dylib          0x000000010ec63dfc gtk_range_expose + 1644
8   libgtk-x11-2.0.0.dylib          0x000000010ec7e2b8 gtk_scale_expose + 120
9   libgtk-x11-2.0.0.dylib          0x000000010ec22e79 _gtk_marshal_BOOLEAN__BOXED + 169
10  libgobject-2.0.0.dylib          0x0000000109642455 g_closure_invoke + 245
11  libgobject-2.0.0.dylib          0x00000001096524c8 signal_emit_unlocked_R + 2216
12  libgobject-2.0.0.dylib          0x0000000109653528 g_signal_emit_valist + 3336
13  libgobject-2.0.0.dylib          0x0000000109653a64 g_signal_emit + 116
14  libgtk-x11-2.0.0.dylib          0x000000010ed38bd8 gtk_widget_event_internal + 664
15  libgtk-x11-2.0.0.dylib          0x000000010eba0fc1 gtk_container_propagate_expose + 369
16  libgtk-x11-2.0.0.dylib          0x000000010eb72e06 gtk_box_forall + 54
17  libgtk-x11-2.0.0.dylib          0x000000010eba3936 gtk_container_expose + 150
18  libgtk-x11-2.0.0.dylib          0x000000010ec22e79 _gtk_marshal_BOOLEAN__BOXED + 169
19  libgobject-2.0.0.dylib          0x0000000109642455 g_closure_invoke + 245
20  libgobject-2.0.0.dylib          0x00000001096524c8 signal_emit_unlocked_R + 2216
21  libgobject-2.0.0.dylib          0x0000000109653528 g_signal_emit_valist + 3336
22  libgobject-2.0.0.dylib          0x0000000109653a64 g_signal_emit + 116
23  libgtk-x11-2.0.0.dylib          0x000000010ed38bd8 gtk_widget_event_internal + 664
24  libgtk-x11-2.0.0.dylib          0x000000010eba0fc1 gtk_container_propagate_expose 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-01T02:07:25.053

我也有这个问题。这是我使用 macports gtk2 解决它的方法——而不是 [http://r.research.att.com/](http://r.research.att.com/) 版本。这是 R 版本 3.0.1 (2013-05-16) - “Good Sport”，也是从源代码编译的。

## 安装gtk2

```
sudo port install gtk2 ## (X11 -- not aqua) 
```

## 配置

```
export PATH=/opt/local/bin:/opt/local/sbin:$PATH 
```

## 然后安装

## 我从 CRAN 下载了 RGtk2 和 cairoDevice 并进行了源代码安装：

```
R CMD INSTALL RGtk2
R CMD INSTALL cairoDevice 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-02T19:59:47.443

除了 jverzani 的回答，如果你想使用 Homebrew：

```
brew install gtk+
export PKG_CONFIG_PATH=/usr/X11/lib/pkgconfig:$PKG_CONFIG_PATH 
```

然后从源代码安装 RGtk2 和 cairoDevice。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-10T17:50:57.240

我在 Snow Leopard 上使用了 Homebrew 解决方案（由 masaha03 建议），但 R 仍然存在崩溃问题。事实证明，在这样的配置中，gtk 使用的是 homebrew 安装的 cairo，而 RGtk2 和 cairoDevice 使用的是本机 cairo 安装，这是一个不同的版本。由于 cairo 和其他依赖库是“仅限桶”的，我需要为这些库强制使用符号链接：

```
brew link --force cairo
brew link --force pixman 
```

这两个对我来说已经足够了，但可能还有其他需要链接的。原因是 Homebrew cairo 可能依赖于特定版本的库，但该库的系统版本可能较低。在这种情况下，RGtk2 的安​​装将失败，并显示未安装 gtk+ 的消息。

最后，PKG_CONFIG_PATH 必须首先指向 Homebrew 包，然后指向本地包：

```
export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig:/usr/X11/lib/pkgconfig:$PKG_CONFIG_PATH 
```

然后安装 RGtk2 和 cairoDevice。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-29T14:18:41.590

在 MAC 上使用 RI 时，请尽量遵循尝试以原生方式完成所有操作的原则，并避免使用 Homebrew 和 Macports 解决方案。即使对于其他用途，我也喜欢自制软件。

我将重申@BondedDust 的建议，以使用 Simon Urbanek 的建议。

[第 1 步：从http://r.research.att.com/#other](http://r.research.att.com/#other)下载库

第 2 步：只需验证此 GTK+ 框架现在安装在您计算机上的哪个位置——在我的计算机上，它安装在：
`/Library/Frameworks/GTK+.framework/`

第三步：找到新安装的GTK+的pkg-config文件所在的子目录。就我而言：
`Versions/2.24.X11/Resources/lib/pkgconfig`

第 4 步：确保这在您的 PKG_CONFIG_PATH 变量中。就我而言，我只是在从源代码安装 RGtk2 包之前直接在 R 中设置变量，如下所示：
`Sys.setenv(PKG_CONFIG_PATH= "/Library/Frameworks/GTK+.framework/Versions/2.24.X11/Resources/lib/pkgconfig")`
`install.packages("RGtk2", type="source")`

注意：我的 PKG_CONFIG_PATH 以前是空的，所以我不需要连接到旧值，但如果你不是这种情况，很容易使用 Sys.getenv 来获取旧值并在必要时附加它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-01T15:35:03.893

我要感谢所有为解决这个问题做出贡献的人。经过无数次试验（和深夜！），最终我设法修复了它。已经提出的基本方法是：

*   用自制软件安装 GTk+ 和 cairo

*   使用 macports 安装 GTk2 和 cairo

我从来没有设法用 macports 完成这项工作，但经过多次徒劳无功的尝试，最终我在自制软件上取得了成功。我清理了变得有点*混乱*的 PATH 。然后我基本上卸载了 X11、GTk+、cairo 和它们的所有依赖项。

我首先安装了 XQuartz-2.7.4。

对于所有需要的组件的安装，我已经按照[此处](http://wiki.icub.org/wiki/Homebrew#Installing_X11)找到的说明进行操作，并使用自制软件和相关说明安装了 yarp。大多数人可能会觉得这很奇怪（我确实如此），但是安装 yarp 会按顺序安装所有需要的依赖项以使 GTk+ 工作（显然我尝试只安装 GTk+ 和 cairo 但它从未工作过，或者最终 RGTk2 无法编译）。

然后我从源代码安装（使用 R CMD INSTALL）GTk2、Cairo、cairoDevice 和拨浪鼓。经过这么多月试图解决这个问题，我无法相信一切都奏效了！

再次感谢所有为解决问题而付出努力和研究的人。

恩佐

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-07T22:00:28.240

更新：据我所知，这个问题仍然存在（R 版本 3.1.0），但是这个线程中人们提供的信息仍然可以解决这个问题。在过去的几个月里，我最终在不同的 Mac OS X 系统上运行了多次安装，并最终将信息放在一起为 R 新手（基本上是 John Verzani 的答案的更详细版本，针对 Mac OS X > 10.7)。到目前为止它运行良好，因此有机会对其他人有用，我想发布链接：

[在 R > 3.0 上解决 GTK 问题](https://gist.github.com/sebkopf/9405675#details-on-gtk-224-trouble)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-11T12:20:57.903

[jverzani 的](https://stackoverflow.com/users/340844/jverzani)回答非常有用，以下是我发现的一些其他问题，我在他的帖子上进行了编辑：

1.  安装 gtk2：绝对使用 macports gtk2。不要考虑[自己从 source 构建 gtk2](https://wiki.gnome.org/GTK+/OSX/Building)。

    `sudo port install gtk2 +x11` ## (+x11, 不是 +quartz/ +universal/ +no_x11)

2.  ***要***安装 gtk2 的哪个变体及其依赖项：**不要安装 +quartz 变体，使用 +x11 变体，即使（与所有 Mac OS 10.8.x+ 一样）***根据[Brandon Allbery 对*macports的有用帖子安装 XQuartz 而不是 X11 - 解释 + quartz*变体名称的用户是用词不当](http://mac-os-forge.2317878.n4.nabble.com/quartz-x11-conflict-tp189999p190316.html)。*

     *2b。如果您不小心为 gtk2 和/或其任何变体（atk、cairo、pango 等）选择了除 +x11 变体以外的任何内容，您将在 gtk2 上编译失败。示例： atk 因 /opt/local/include/atk-1.0/atk/atk.h 上的编译错误而失败。您必须同时删除错误安装的变体：例如`sudo port uninstall --follow-dependents cairo @1.12.14_0+quartz+x11`，还必须使用`sudo port clean atk cairo pango ...`* 
**   然后正如 jverzani 所指出的，您需要以下源安装（*而不是*MacOS 二进制安装）：

    ...#then install：从 CRAN 下载 RGtk2 和 cairoDevice 并进行源代码安装：

    `R CMD INSTALL RGtk2`

    `R CMD INSTALL cairoDevice`*

# php - Wordpress 自定义页面属性

> ID：15868861
> 
> 赞同：1
> 
> 时间：2013-04-07T22:59:10.867
> 
> 标签：php, html, wordpress

我正在开发一个自定义 WP 主题，它将所有“页面”显示为单页布局中的部分。

我想做的是向页面设计器添加一个颜色选择器，以便用户可以选择一种颜色作为该部分的背景颜色。

我对 wordpress 完全陌生，所以我什至不知道要查看哪些文件或函数来添加此行为。

是否有一个预先构建的插件来做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:16:37.340

四个选项：

*   使用像[Advanced Custom Fields](http://wordpress.org/extend/plugins/advanced-custom-fields/)或[Custom Content Type Manager这样的插件](http://wordpress.org/extend/plugins/custom-content-type-manager/)

*   ACF 有一个[精简版](https://github.com/elliotcondon/acf-lite)以编程方式添加元框

*   一个帮助脚本，例如[WordPress 的自定义元框和字段](https://github.com/jaredatch/Custom-Metaboxes-and-Fields-for-WordPress)

*   自己做，以这个问答为例：[添加一个复选框到发布屏幕，为标题添加一个类](https://wordpress.stackexchange.com/q/61041/12615)

可能，您想根据所选页面模板更改元框的可见性，请参阅此问答：[选择模板时显示的自定义元框](https://wordpress.stackexchange.com/q/50092/12615)

# twitter-bootstrap - Yii-Bootstrap：在 TBMenu 中使用动态图像（facebook 个人资料）

> ID：15868862
> 
> 赞同：1
> 
> 时间：2013-04-07T22:59:13.277
> 
> 标签：twitter-bootstrap, yii

我正在尝试在 TBMenu 中使用 Facebook 个人资料图片 - 作为菜单项 - 使用 Yii-Bootstrap。但是，我没有在菜单上显示图像，而是看到显示的 HTML 代码类似于

在下面的代码中，这是 $imageUrl 变量。

```
 if (Yii::app()->user->getState(isFacebook)) {
    $imageUrl = "<img src='" . Yii::app()->facebook->getProfilePicture(array('height'=>20,'width'=>20)) . "'>"; 
}
    $this->widget('bootstrap.widgets.TbNavbar',array(
    'brand'=>"<img src='/images_static/logo.png'>",
    'brandUrl'=>array('/site/index'),
    'brandOptions'=> '', 
    'type'=>'',
    'fluid'=>false,
    'collapse'=>true,
    'items'=>array(
        array(
            'class'=>'bootstrap.widgets.TbMenu',
            'items'=>array(
                array('label'=>'Annonces', 'items'=>array(
                    array('label'=>'Déposer une annonce', 'url'=>array('/annonce/create')),
                    array('label'=>'Voir les annonces', 'url'=>array('/annonce/index')),
                    )
                ),
                array('label'=>'Annuaire Pro', 'items'=>array(
                    array('label'=>'Référencer votre activité', 'url'=>array('/annuaire/create')),
                    array('label'=>'Voir les activités', 'url'=>array('/annuaire/index')),
                    )
                ),
            ),
        ),
        array(
            'class'=>'bootstrap.widgets.TbMenu',
            'htmlOptions'=>array('class'=>'pull-right'),
            'items'=>array(
                array('label'=>'Idenfitiez-vous', 'url'=>array('/account/login'), 'visible'=>Yii::app()->user->isGuest),
                array('label'=>'Inscrivez-vous', 'url'=>array('/account/register'), 'visible'=>Yii::app()->user->isGuest),
                array('label'=>$imageUrl, 'visible'=>Yii::app()->user->getState(isFacebook), 'items'=>array(
                        array('label'=>'Mes contenus', 'url'=>array('/account/index')),
                        array('label'=>'Se déconnecter', 'url'=>array('/account/logout')),
                        ),
                array('label'=>Yii::app()->user->name, 'visible'=>!Yii::app()->user->getState(isFacebook), 'items'=>array(
                        array('label'=>'Mes contenus', 'url'=>array('/account/index')),
                        array('label'=>'Changer mon mot de passe', 'url'=>array('/account/changepassword')),
                        array('label'=>'Se déconnecter', 'url'=>array('/account/logout')),
                        ),
                    ),
                ),
            ),
        ),
    ),
)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T06:48:40.490

您应该尝试将`encodeLabel`（默认为 true）设置为 false ：

```
$this->widget('bootstrap.widgets.TbNavbar',array(
  'encodeLabel'=>false,
  .....
)); 
```

# formatting - Highcharts：位置内的极柱数据标签

> ID：15868867
> 
> 赞同：0
> 
> 时间：2013-04-07T22:59:47.957
> 
> 标签：formatting, position, highcharts, pie-chart

我正在尝试在实际列内而不是在其顶部获取列极坐标图的值（数据标签）。我已经设置`inside: true`了属性，但它似乎没有任何效果，尽管它在使用常规堆积柱形图时效果很好。

这是显示问题的小提琴：http: [//jsfiddle.net/deurk/BeVyt/2/](http://jsfiddle.net/deurk/BeVyt/2/)

理想情况下，如果有足够的空间，我希望将数据标签放在他们的“共享”中，并带有白色。有没有人有解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:57:00.857

确实它看起来像一个错误，所以我在这里报告了它[https://github.com/highslide-software/highcharts.com/issues/1688](https://github.com/highslide-software/highcharts.com/issues/1688)

# java - Hibernate 多对多数据检索

> ID：15868868
> 
> 赞同：0
> 
> 时间：2013-04-07T22:59:49.997
> 
> 标签：java, hibernate, jakarta-ee, orm, hibernate-mapping

我有两个对象用户和联系人，具有多对多关系，并且我正在为这个关系 USER_CONTACT 使用中间表

将数据保存在此关联中很好，但检索是一个问题。

我需要根据用户检索数据，但我得到的是所有用户的所有联系人。

如果你能让我知道我做错了什么，那就太好了。

```
public class User {
private Integer userID;
private String  userLoginEmail;
private String  password;
private Set<Contact> contactSet = new HashSet<Contact>();
.
.
}

public class Contact implements Serializable {
private Integer contactID;
private String  givenName;
private String  familyName;
private Set<User>   userSet = new HashSet<User>();
.
.
} 
```

用户.hbm.xml：

```
<class name="User" table="USERACCOUNT">
    <id column="USER_ID" length="500" name="userID">
        <generator class="increment" />
    </id>
    <property column="USER_LOGIN_EMAIL" generated="never" lazy="false" length="100" name="userLoginEmail" />
    <property column="USER_FIRSTNAME" generated="never" lazy="false" length="100" name="userFirstName" />
    <property column="USER_LASTNAME" generated="never" lazy="false" length="100" name="userLastName" />
    <set name="contactSet" table="USER_CONTACT" inverse="false" lazy="false" fetch="select" cascade="all">
        <key column="USER_ID"/>
        <many-to-many column="CONTACT_ID" class="com.smallworks.model.Contact"/>
    </set>
</class> 
```

联系人.hbm.xml

```
 <class name="Contact" table="CONTACT">
  <id column="CONTACT_ID" length="500" name="contactID">
   <generator class="increment"/>
  </id>
  <property column="GIVEN_NAME" generated="never" lazy="false"  length="100" name="givenName"/>
  <property column="FAMILY_NAME" generated="never" lazy="false" length="100" name="familyName"/>

  <!-- many to many mapping with the User via User_Contact table -->
  <set inverse="true" lazy="false" name="userSet" sort="unsorted" table="USER_CONTACT">
    <key column="USER_ID"/>
    <many-to-many class="com.smallworks.model.Contact" column="CONTACT_ID" unique="false"/>
  </set>
</class> 
```

这就是我试图检索数据的方式，我认为这是不正确的。

```
List contactList = session.createQuery("from Contact").list(); 
```

如果我能知道如何根据用户获取联系人，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T02:45:26.910

```
// First, retrieve the user you want.
User user = (User) session.get(User.class, user_id_you_want);
// Second, get the contacts of that given user and add them to a list (optional)
List contacts = new ArrayList();
contacts.addAll(user.getContactSet());
return contacts; 
```

# php - MYSQL SELECT 查询仅显示登录用户会话中的数据

> ID：15868871
> 
> 赞同：0
> 
> 时间：2013-04-07T23:00:10.030
> 
> 标签：php, mysql

我正在为我的会员网站创建一个帐户设置页面，登录的用户可以在那里编辑用户名、密码和电子邮件。下面的代码将我数据库中的所有用户显示给每个具有编辑选项的用户。

```
$result = mysql_query("SELECT * FROM user") or die(mysql_error());
```

我不想要那个。我只想要登录用户的信息，以便他们可以在那里编辑自己的个人信息。这是我的桌子：

```
 TABLE user (
  id int(4) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID number of member',
  username varchar(32) NOT NULL COMMENT 'Username of member',
  password varchar(32) NOT NULL COMMENT 'Password of member',
  email varchar(100) NOT NULL COMMENT 'Email of member',
  level int(4) DEFAULT '1' COMMENT 'Permission Level of member',
  PRIMARY KEY (`id`)
) 
```

这是整个页面的php代码：

```
<?php
ob_start(); //keep output in buffer

session_start();
require_once( 'database.php' );

include("head.php");

if (!isset($_SESSION['loggedin'])) {

?>
    <body>

DO NOT HAVE ACCESS PRIVILEDGES TO THIS PAGE.   

<?php }
elseif (isset($_SESSION['loggedin']) && ($_SESSION['adminuser']=='0' )){  //logged in and NOT an Admin
?>

<body>

        <?php
        $result = mysql_query("SELECT * FROM user") 
                        or die(mysql_error());
        ?>
<table width="600" border="0" cellspacing="1" cellpadding="0">
<form name="form1" method="post" action="">
<tr>
<td>
<table width="600" border="0" cellspacing="1" cellpadding="0">
<tr>
<td align="center"><strong>UserName</strong></td>
<td align="center"><strong>Password</strong></td>
<td align="center"><strong>Email</strong></td>
</tr>
<?php
while($row = mysql_fetch_array( $result )){
?>
<tr>
<td align="center"><? echo $row['username']; ?></td>
<td align="center"><? echo $row['password']; ?></td>
 <td align="center"><? echo $row['email']; ?></td>
<td align="center"><? echo '<a class="login" href="edit_user.php?id=' . $row['id'] . '">Edit</a>'; ?>&nbsp; &nbsp;</td>
</tr>
<?php
}
?>
<tr>
</tr>
</table>
</td>
</tr>
</form>
</table>
<?php
}

elseif (isset($_SESSION['loggedin']) && ($_SESSION['adminuser']=='1' )){  //logged in and an Admin

?>
<body class="loggedin">

<?php include("admin_menu.php"); ?>
<?php
$result = mysql_query("SELECT * FROM user") 
                or die(mysql_error());
?>

<table width="600" border="0" cellspacing="1" cellpadding="0">
<form name="form1" method="post" action="">
<tr>
<td>
<table width="600" border="0" cellspacing="1" cellpadding="0">
<tr>
<td align="center"><strong>UserName</strong></td>
<td align="center"><strong>Password</strong></td>
<td align="center"><strong>Email</strong></td>
</tr>
<?php
while($row = mysql_fetch_array( $result )){
?>
<tr>
<td align="center"><? echo $row['username']; ?></td>
<td align="center"><? echo $row['password']; ?></td>
 <td align="center"><? echo $row['email']; ?></td>
<td align="center"><? echo '<a class="login" href="edit_user.php?id=' . $row['id'] . '">Edit</a>'; ?>&nbsp; &nbsp;</td>

</tr>
<?php
}
?>
<tr>
</tr>
</table>
</td>
</tr>
</form>
</table>
<?
}
include("footer.php");
ob_flush(); //flush output buffer
?> 
```

我已经尝试了这两种方法来解决我的问题，但它们没有奏效：

```
$result = mysql_query('SELECT * FROM user "'. mysql_real_escape_string(isset($_SESSION['loggedin']) && ($_SESSION['adminuser']=='0' )) . '"') 
                        or die(mysql_error()); 
```

^ 除列标题外不显示任何内容。我也试过这个，它也没有工作：

```
$result = mysql_query("SELECT * FROM user '". mysql_real_escape_string($_SESSION['loggedin']) . "'") 
                        or die(mysql_error()); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:39:17.847

`SELECT * FROM user WHERE id = UserId`

这应该可以解决您的问题，请在 mysqli 或 pdo 上进行彻底搜索。停止使用 mysql

# android - 问题 在相对布局上，视图始终位于顶部

> ID：15868873
> 
> 赞同：4
> 
> 时间：2013-04-07T23:00:22.463
> 
> 标签：android, include, android-relativelayout

我有一些布局，我想要`inlcude/>`一个包含两个按钮的底栏。很简单吧？好吧，无论我为它设置的参数如何，按钮都被设置到视图的顶部，因此我在完成此操作时遇到了问题。

[这是它目前的样子。](http://dl.dropbox.com/u/19146514/Spot%20The%20Station/Registration%20Issue%20-%20Slides/Screenshot_2013-04-07-16-52-50.png)

这是实际的合并代码：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >

<View
    android:id="@+id/divider"
    android:layout_width="match_parent"
    android:layout_height="1dp"
    android:background="?android:attr/dividerHorizontal" />

<LinearLayout
    android:id="@+id/button_container"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:divider="?android:attr/dividerVertical"
    android:orientation="horizontal"
    android:showDividers="middle" >

    <Button
        android:id="@+id/left_button"
        style="?android:attr/borderlessButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/cancel" />

    <Button
        android:id="@+id/right_button"
        style="?android:attr/borderlessButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/complete" />
</LinearLayout> 
```

这是包含它的布局之一：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
>

<TextView
    android:id="@+id/register_title_two"
    style="?android:attr/listSeparatorTextViewStyle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_margin="8dp"
    android:padding="8dp"
    android:text="@string/i_want_to"
    android:textColor="@android:color/holo_blue_dark" />

<RadioGroup
    android:id="@+id/extend_delete_alert_group"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/register_title_two" >

    <RadioButton
        android:id="@+id/delete_alerts"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:minHeight="32dp"
        android:padding="8dp"
        android:text="@string/delete_alerts"
        android:textSize="14sp" />

    <RadioButton
        android:id="@+id/extend_alerts"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:minHeight="32dp"
        android:padding="8dp"
        android:text="@string/extend_alerts"
        android:textSize="14sp" />
</RadioGroup>

<include
    android:id="@+id/include1"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:layout_alignParentBottom="true"
    layout="@layout/two_button_bar" /> 
```

我已经阅读了一些答案，它们都指向设置`include>`和`merge>`设置`wrap_content`高度和宽度，但这就是我已经拥有它的方式，它仍然是不行的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:05:15.437

`<include />`实际上只是剪切和粘贴，`<merge />`意味着加入RelativeLayout。所以你需要给这些元素RelativeLayout规则，尝试添加：

```
android:layout_above="@+id/button_container" 
```

到分隔线视图。并添加：

```
android:layout_alignParentBottom="true" 
```

到线性布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-26T07:40:45.120

您可以在 xml 的标签中给出一个 id，然后在您想要的 RelativeLayout 中的布局，您可以使用`layout_below="@id/-includedlayout-id`

这将像您想要的那样对齐布局。

```
<include android:id="@+id/include1"
layout="-yourLayout-"/>

<RelativeLayout
...
android:layout_below="@id/include1> 
```

# c++ - 在应该只影响这个文件的头文件中使用指令

> ID：15868878
> 
> 赞同：1
> 
> 时间：2013-04-07T23:01:05.903
> 
> 标签：c++, namespaces, header-files

有一个在命名空间中声明类的头文件`long::name::space::name`

而且我还想在这个类的全局命名空间中专门化一些模板，即

```
template<typename T>
class GlobalClass<NSClass<T>> {

}
... 
```

每次都写命名空间名称很烦人，所以我想使用某种 using 指令，但是将此名称推送到全局命名空间不是一个好主意？

有没有办法做一些事情来缩短打字时间，但不向全局命名空间添加任何东西？

我知道一种解决方案，但它非常难看：

```
#define NS long::name::space::name
//use NS here
#undef NS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:02:29.310

您可以为命名空间提供短别名（请记住，这`long`是 C++ 中的关键字）：

```
namespace SN = longy::name::space::name;

// ...

SN::my_class obj; // Resolves into longy::name::space::name::my_class 
```

# jquery - Append() & Remove() 文本框，创建不需要的空白空间

> ID：15868880
> 
> 赞同：0
> 
> 时间：2013-04-07T23:01:09.123
> 
> 标签：jquery

我正在创建一个带有动态添加和删除文本框的表单。

我正在使用 jQuery 1.9.1。我是 jQuery 新手，所以我查找了一些示例并找到了一个使用 jQuery 1.4 的示例。
我做了一些更改并让它与 jQuery 1.9.1 一起工作，但我有一个问题。

当用户添加几个框，然后将它们删除到只有一个，然后再次添加一个时，它的作用就像空白空间仍然被占用，并在下方添加新的一个，而不是在最后一个之后。

我不明白是什么导致了空白，但它看起来很糟糕，所以我想找到一个修复程序。

这是完整的代码，您可以复制并粘贴它以查看我在说什么：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        var counter = 2;
        $("#addButton").click(function() {
            $("#textboxes").append('<input type="text" name="text' + counter + '" id="text' + counter + '"><br/>');
            counter++;
        })

        $("#removeButton").click(function() {
            if (counter == 1) {
                alert("No more textbox to remove");
                return false;
            }
            counter--;
            $("#text" + counter).remove();
        });

        $("#submitButton").click(function() {
            var msg = '';
            for (i = 1; i < counter; i++) {
                msg += "\n Textbox #" + i + " : " + $('#text' + i).val();
            }
            alert(msg);
        });
    });
</script>
<div style="width: 800px; margin: auto; padding-top: 100px;">
    <form id="form" name="form">
        <div id="textboxes">
            <input type="text" name="text1" id="text1">
            <br/>
        </div>
        <input type="button" value="Add a field" class="add" id="addButton" />
        <input type="button" value="Remove a field" class="add" id="removeButton" />
        <input type="button" value="Submit" class="add" id="submitButton" />
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:24:06.493

你`<br/>`是这里的问题。您继续添加它们但不删除它们。

查看您的 HTML 源代码，您会看到剩余`<br/>`元素，这就是您看到不断增加的行距的原因。

与其处理可能非常痛苦的剩余`<br/>`元素，不如根本不要使用它们。

删除所有`<br/>`元素并使用 CSS 确保输入换行，类似于：

删除了初始的更改后的 HTML `<br/>`：

```
<div id="textboxes">
    <input type="text" name="text1" id="text1">
</div> 
```

CSS：

```
#textboxes > input{
    display: block;
} 
```

更改后的脚本，删除了额外的`<br/>`：

```
$("#addButton").click(function () {
    $("#textboxes").append('<input type="text" name="text' + counter + '" id="text' + counter + '">');
    counter++;
}) 
```

* * *

[**演示**](http://jsfiddle.net/gCqbU/)- 不要添加`<br/>`元素，而是使用 CSS 进行样式设置

* * *

# c# - 输入时更改文本框的背景颜色

> ID：15868881
> 
> 赞同：2
> 
> 时间：2013-04-07T23:01:10.127
> 
> 标签：c#, visual-studio

我的表单有以下代码：

```
 private void txt1_Enter(object sender, EventArgs e)
    {
        txt1.SelectAll();
        txt1.BackColor = Color.LightBlue;
    }

    private void txt2_Enter(object sender, EventArgs e)
    {
        txt2.SelectAll();
        txt2.BackColor = Color.LightBlue;            
    }

    private void txt1_Leave(object sender, EventArgs e)
    {
        txtThermalConductivity.BackColor = Color.White;
    }

    private void txt2_Leave(object sender, EventArgs e)
    {
        txtThermalConductivity.BackColor = Color.White;
    } 
```

我的表单上还有另外 20 个文本框，我想为它们做同样的事情。是否可以结合所有进入事件和所有离开事件，所以我总共有两个事件而不是 44 个单独的事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T23:08:20.840

在您的设计器视图中，选择每个文本框并将`Enter`和`Leave`事件设置为指向每个文本框的单个实现。

然后你可以这样做：

```
private void txt_enter(object sender, EventArgs e) {
    ((TextBox)sender).BackColor = Color.LightBlue;
}

private void txt_leave(object sender, EventArgs e) {
    ((TextBox)sender).BackColor = Color.White;
} 
```

此外，`SelectAll`不是必需的，因为您正在设置整个文本框的背景颜色.. 而`SelectionColor`不是`RichTextBox`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T23:10:27.753

您可以手动添加或遍历表单中的所有文本框（在此处找到扩展方法[GetChildControls](https://stackoverflow.com/questions/4863051/loop-through-textboxes)。

```
foreach (TextBox textBox in this.GetChildControls<TextBox>())
{
    textBox.Enter += new EventHandler(TextBox_Enter);
    textBox.Leave += new EventHandler(TextBox_Leave);
} 
```

可以从 Form 的 Load 事件中调用上述内容。

通过将发送者转换为 TextBox，事件侦听器现在可以如下所示。

```
 private void TextBox_Enter(object sender, EventArgs e)
{
    TextBox txtBox = (TextBox)sender;
    txtBox .SelectAll();
    txtBox .BackColor = Color.LightBlue;            
}

private void TextBox_Leave(object sender, EventArgs e)
{
    TextBox txtBox = (TextBox)sender;
    txtBox.BackColor = Color.White;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T23:09:58.527

是的，只需使用以下内容：

```
private void tbLeave(object sender, EventArgs e) {
((TextBox) sender).BackColor = Color.White;
} 
```

将控件事件声明设置为指向此函数。

您也可以对 Leave() 事件执行相同的操作。

（只是要说一点，我更喜欢尽可能在客户端处理这种事情。）

# c# - 在 C# 中保存单个用户设置

> ID：15868882
> 
> 赞同：2
> 
> 时间：2013-04-07T23:01:14.047
> 
> 标签：c#, settings

我正在努力在我的 .NET C# 应用程序中实现用户设置的保存，在一种情况下，我只想保存一个设置。是否可以这样做，或者是我使用标准一次保存所有用户设置的唯一选择：

```
Properties.Settings.Default.Save(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:23:07.890

我更喜欢使用[NINI](http://nini.sourceforge.net/)，并将 XML 配置文件存储在`Environment.SpecialFolder.ApplicationData`.

可能不像 .NET 设置那么简单。反正我从来没有真正使用过它们。

例如，我有下面的课程。我需要做的就是获取或设置属性，它们会自动加载/保存：

```
using Nini.Config;

public class DbConfig : PropertyNotifierBase {
    private static readonly string PROGRAM_NAME = "programname";
    private static readonly string CONFIG_NAME = "Database";

    private static DbConfig _instance = new DbConfig();

    public static DbConfig Instance { get { return (_instance); } }

    private DbConfig() {
        SetupPaths();
        Source = new XmlConfigSource(FullConfigFilename);
        Source.AutoSave = true;
        CreateSectionsIfNeeded();
    }

    private void CreateSectionsIfNeeded() {
        if (Source.Configs["Database"] == null)
            Source.AddConfig("Database");
    }

    private void SetupPaths() {
        ConfigPath = DetermineConfigPath();
        ConfigFilename = String.Format("{0}.xml", CONFIG_NAME);
        Directory.CreateDirectory(ConfigPath);

        // Create an empty configuration file if it isn't there.
        if (!File.Exists(FullConfigFilename))
            File.WriteAllText(FullConfigFilename, "<Nini>\n</Nini>\n");
    }

    private IConfigSource Source { get; set; }

    public String ConfigPath { get; private set; }

    public String ConfigFilename { get; private set; }

    public String FullConfigFilename { get { return (Path.Combine(ConfigPath, ConfigFilename)); } }

    public String SqlServerInstance {
        get { return (Source.Configs["Database"].GetString("SqlServerInstance", @"somedefaultconnection")); }
        set { Source.Configs["Database"].Set("SqlServerInstance", value); NotifyPropertyChanged("SqlServerInstance"); }
    }

    public String SqlServerDatabase {
        get { return (Source.Configs["Database"].GetString("SqlServerDatabase", "somedatabasename")); }
        set { Source.Configs["Database"].Set("SqlServerDatabase", value); NotifyPropertyChanged("SqlServerDatabase"); }
    }

    public String SqlServerUsername {
        get { return (Source.Configs["Database"].GetString("SqlServerUsername", "someusername")); }
        set { Source.Configs["Database"].Set("SqlServerUsername", value); NotifyPropertyChanged("SqlServerUsername"); }
    }

    public String SqlServerPassword {
        get { return (Source.Configs["Database"].GetString("SqlServerPassword", "somepassword")); }
        set { Source.Configs["Database"].Set("SqlServerPassword", value); NotifyPropertyChanged("SqlServerPassword"); }
    }

    private string DetermineConfigPath() {
        String filename = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
        filename += Path.DirectorySeparatorChar + PROGRAM_NAME;
        return (filename);
    }
} 
```

# c - 试图从c中的双链表中删除一个元素

> ID：15868884
> 
> 赞同：1
> 
> 时间：2013-04-07T23:01:20.313
> 
> 标签：c, linked-list, double

Ι 在尝试从 c 中的双链表中删除元素时遇到问题。

```
Nodes_t *remove_Nodes (Nodes_t *a, Nodes_t b){
    Nodes_t *head;
    head=a;
    if ((a->i_pos==b.i_pos) && (a->j_pos==b.j_pos)){
        if (a->next=NULL){
            return NULL;
            }
        else {
            head=a->next;
            head->previous=NULL;
            return head;
            }
        }
    else if ((a->i_pos!=b.i_pos) || (a->j_pos!=b.j_pos)){
        while ((a->next->i_pos!=b.i_pos)||(a->next->j_pos!=b.j_pos)){
            a=a->next;
            if (a->next=NULL){
                return head;
                }
            }
        a=a->next;
        a->previous->next=a->next;
        if (a->next=NULL){
            return head;
            }
        else if (a->next!=NULL){
            a->next->previous=a->previous;
            return head;
            }               
        }
        return head;        
    } 
```

它获取一个双链表，找到一个 Nodes_t 类型的元素，然后将其删除。虽然，当我检查了列表并且它的指针工作正常时，当我尝试调用该函数来删除我的第一个元素时，我得到了一个段错误。

更具体地说，正如我所检查的那样，该函数运行良好，直到达到这一点

```
else {
            head=a->next;
            head->previous=NULL;// HERE 
            return head;
            } 
```

我使用的结构是这个

```
typedef struct Nodes {
char    position;
int     i_pos, j_pos;
int     g_distance;
int     h_distance;
int     F_estim;
struct Nodes    *parent;
struct Nodes    *next;
struct Nodes    *previous;

}Nodes_t; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:30:05.823

您在这里使用了分配`=` 而不是比较`==`：

```
if (a->next=NULL){ 
```

哪个将评估为`NULL`，这是错误的，因此将转到您的`else`子句，您在哪里

```
head=a->next;
head->previous=NULL; 
```

所以`head`变成`NULL`了，然后你试图取消引用一个`NULL`指针来获取它的`previous`成员。

*   快速修复：将缺少的内容添加`=`到我引用的第一行。
*   更好的解决方法：重构你的代码。它太长并且有不必要的位。并且不要忘记检查您的 equals 操作。

# javascript - 如何使用 htmlservice 和 javascript 在组合框中动态添加选项

> ID：15868885
> 
> 赞同：0
> 
> 时间：2013-04-07T23:01:46.273
> 
> 标签：javascript, google-apps-script

在这方面我真的需要你的帮助，提供的任何帮助都会很受欢迎。

我有 2 个组合框

```
<select name="combo1" id="combo1">
    <option value="April">April</option>
    <option value="November">November</option>
    <option value="December">December</option>
</select>
<select name="combo2" id="combo2">

</select> 
```

当我在第一个组合框中选择一个选项时，第二个组合框中的选项应该根据选择而改变。

例如：如果在 combo1 中选择了`"April"`，我想显示选项：`"Texas","NY"`。但如果`"November"`被选中，我想更改我想显示的状态。

我非常感谢您在这方面的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T23:38:04.110

你应该设置combo1的onchange然后检查它的值，我用javascript为你写的：

```
var combo1 = document.getElementById("combo1");
var combo2 = document.getElementById("combo2");

combo1.onchnage = function(){
    switch(this.value){
        case "April":
             combo2.innerHTML = "<option value='Texas'>Texas</option><option value='NY'>NY</option>";
             break;
        case "November":
             combo2.innerHTML = "<option value='foo'>foo</option><option value='bar'>bar</option>";
             break;
    }

} 
```

# cloud-foundry - Cloudfoundry 错误 310：暂存失败：暂存插件失败

> ID：15868886
> 
> 赞同：1
> 
> 时间：2013-04-07T23:01:51.807
> 
> 标签：cloud-foundry

CFoundry::AppStagingError: 310: Staging failed: 'Staging task failed: Staging plugin failed: /var/vcap/packages/stager/vendor/bundle/ruby/1.9.1/gems/ vcap_staging-0.1.63/lib/vcap/ staging/plugin/java_web/plugin.rb:28:in `block in s tage_application': Web application staging failed: web.xml not found (RuntimeErr or) from /var/vcap/packages/stager/vendor/bundle/ruby/1.9.1/gems/vcap_stagin g-0.1.63/lib/vcap/staging/plugin/java_web/plugin.rb:22:in`chdir' 来自 /var/vcap/packages/stager/vendor/bundle/ruby/1.9.1/gems/vcap_stagin g-0.1.63/lib/vcap/staging/ plugin/java_web/plugin.rb:22:in `stage_application' from /var/vcap/packages/stager/bin/run_plugin:19:in`' ' 有关详细信息，请参阅 ~/.vmc/crash

这是我在尝试在 Windows 中部署任何 java 文件或 .war 文件时运行 vmc push 命令时遇到的错误。运行此命令后，我可以看到文件已上传到云端，但它从未正确运行。当我尝试通过 java/spring 或任何其他框架运行时，我遇到了几乎相同的错误。

有人请帮我解决这个问题。

# c# - 使用 wsHttpBinding，WCF 忽略了我的 web.config

> ID：15868890
> 
> 赞同：2
> 
> 时间：2013-04-07T23:02:07.523
> 
> 标签：c#, .net, wcf

我正在尝试创建一个需要会话支持的 WCF 服务，因此我在 web.config 中添加了一个部分来启用 wsHttpBinding。但是当我在 WCF 测试客户端中测试服务并检查配置时，它似乎采用了默认的自动生成配置而不是我自己的。

查看我的配置：

```
<?xml version="1.0"?>
<configuration>
<system.web>

<compilation debug="true" targetFramework="4.0" />
</system.web>
  <system.serviceModel>

<behaviors>
  <serviceBehaviors>

    <behavior>
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>    
  </serviceBehaviors>
</behaviors>

<services>
  <service name="UserService">
    <endpoint address="" binding="wsHttpBinding" contract="ICenterPlaceUserService" />
  </service>
</services>

<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

结果：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_ICenterPlaceUserService" sendTimeout="00:05:00" />
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost:57418/L1.WCF/CenterPlaceUserService.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICenterPlaceUserService"
            contract="ICenterPlaceUserService" name="BasicHttpBinding_ICenterPlaceUserService" />
    </client>
</system.serviceModel> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-07T23:42:48.650

`name`属性的属性`<service>`必须具有服务类的**完全限定名称**。否则它将被忽略，您将看到您所看到的行为：默认绑定用于服务 (basicHttpBinding)。

```
<services>
  <service name="TheNamespaceOfYourClass.UserService">
    <endpoint address=""
              binding="wsHttpBinding"
              contract="TheNamespaceOfYourContract.ICenterPlaceUserService" />
  </service>
</services> 
```

# java - 无序列表项目符号在 JEditorPane 中看起来像素化

> ID：15868894
> 
> 赞同：6
> 
> 时间：2013-04-07T23:02:32.667
> 
> 标签：java, swing, html-lists, jeditorpane, htmleditorkit

我正在使用 HTML 无序列表在 JEditorPane 中显示一些文本。HTML 示例如下所示：

```
<ul><li>Cautious</li>
<li>Curious</li>
</ul> 
```

这一切都很好，但奇怪的是，生成的项目符号`<li>`看起来与它旁边的文本质量不同。（如果重要，运行 Mac OS 10.7.5）。圆形子弹看起来是块状和像素化的：

正常变焦：

![在此处输入图像描述](https://i.stack.imgur.com/jWdGf.png)

放大：

![在此处输入图像描述](https://i.stack.imgur.com/Hy7ks.png)

放大时尤其明显，这只是一个不对称的像素块，缺乏任何形式的抗锯齿，这使得圆形项目符号点不太令人信服。与它旁边的文字相比，即使在正常变焦下，它在明眼人眼中也显得“偏离”。

有什么办法可以解决这个问题吗？

编辑：使用 • 字符（在 Mac 上为`option`+ `8`）会在文本中创建一个看起来不像素化的较小项目符号点。我当然可以手动插入此字符而不是使用`<ul><li>`，但如果可以的话，我想使用 HTML 无序列表。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-10T23:01:53.107

使用渲染提示打开抗锯齿属性`KEY_ANTIALIASING`。

[您全局](https://stackoverflow.com/questions/779198/how-can-i-set-renderinghints-globally "全局设置渲染提示")设置了一些渲染提示，但这似乎不起作用`KEY_ANTIALIASING`，因此您需要覆盖`paint()`.`JEditorPane`

```
public class HTMLTest {    

      public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
          @Override
          public void run() {
            String html = "<ul><li>Cautious</li><li>Curious</li></ul>";
            JEditorPane pane = new JEditorPane("text/html", html) {

              public void paint(Graphics g) {
                Graphics2D g2d = (Graphics2D) g.create();
                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                super.paint(g2d);
                g2d.dispose();
              }

            };
            pane.setVisible(true);

            JOptionPane.showMessageDialog(null, pane);
          }
        });    
      }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T23:19:26.343

您需要修改要点。创建一个更好看的项目符号点的图像，然后将 CSS 添加到编辑器窗格以使其使用新的项目符号图像。

```
JEditorPane pane = new JEditorPane();
String u = "C:/path/to/bullet.png";
HTMLEditorKit htmlEditorKit = (HTMLEditorKit) pane.getEditorKit();
StyleSheet styleSheet = htmlEditorKit.getStyleSheet();
styleSheet.addRule(String.format("ul{list-style-image:url(%s);margin:0px 20px;", u)); 
```

# java - 如何在 Java 游戏中使用 switch 和 case？

> ID：15868902
> 
> 赞同：1
> 
> 时间：2013-04-07T23:03:44.007
> 
> 标签：java, if-statement, switch-statement, slick2d

我正在制作游戏，`Slick2D`我有很多“如果”语句，我想摆脱它。现在这是我的代码：

```
if((playerPositionX>570 && playerPositionX<835) && (playerPositionY>16 && playerPositionY<260)){
    g.setColor(Color.red);
    g.drawString("Ready to play? press enter!", 400,350);
} 
```

一切都很好，但我喜欢 8 个，而且这些都在上升，显然坐标不同。所以我想知道是否可以使用 switch 和 case 方法来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:07:30.710

您不能将具有范围的 Switch 用作案例。换句话说，是这样的：

```
 Switch(playerPosition)
     case 570-835: 
     .... 
```

不存在。你可以这样做：

```
int num;

if (playerPositionX>570 && playerPositionX<835){
    num = 0;
if (playerPositionX>836 && playerPositionX<1000){
    num = 1; 
```

进而

```
 Switch(num){
     case 0: 
     ...
     case 1: 
     ... 
```

但是您仍然必须使用 if 语句。

# linux - 在 Linux 中，如何将两个控制台命令的输出合并到一个文本文件中？

> ID：15868903
> 
> 赞同：0
> 
> 时间：2013-04-07T23:04:17.323
> 
> 标签：linux

我正在获取 csv 的第一行和最后 10,000 行，如下所示：

```
head workrace.csv -n 1
tail workrace.csv -n 10000 
```

如何将输出合并到单个文本文件中？我可以将上述命令通过管道传输到两个单独的文本文件中，然后将这些文件连接起来。有没有办法在不需要使用中间文本文件的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:08:23.090

您可以在子 shell 中运行这两个命令：

```
( head workrace.csv -n 1 ; tail workrace.csv -n 10000 ) > result.txt 
```

或者，您可以使用`>>`重定向运算符将内容添加到文件中：

```
head workrace.csv -n 1      > result.txt
tail workrace.csv -n 10000 >> result.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:44:37.263

choroba 未提及的其他一些选项：

```
F=workrace.c
{ head -n 1 $F; tail -n 10000 $F; } > result.txt  # no subshell
awk 'NR==1 || NR>k-1000' k="$( wc -l < $F )" $F > result.txt
exec > result.txt   # truncate result.txt and direct output of remaining commands to it
head -n 1 $F
tail -n 10000 $F 
```

# css - 仅使用 css 获得堆叠元素框阴影效果？

> ID：15868905
> 
> 赞同：0
> 
> 时间：2013-04-07T23:04:21.823
> 
> 标签：css, css-transforms

我有一个 ui 元素，它应该指示表示的项目将在工作流的稍后阶段扩展为多个项目。我的想法是让它看起来像这样：

![扩展 ui 元素](https://i.stack.imgur.com/yWYPT.png)

实际图像总是不同的地方。

如果元素属于这种类型，它会被标记为一个特殊的`expandable-slide`类愿意玩一下，看看是否有可能只使用 css 来获得这种效果。

在我看来，堆叠效果与 a 非常相似`box-shadow`，只是一个具有多个阴影，颜色略有不同，偏移量不同。我不确定这种方法是否有效，但这就是我目前正在尝试的方法。

浏览器要求是现代 chrome/firefox

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:40:18.207

`box-shadow`可以接受[多种阴影效果](https://developer.mozilla.org/en/docs/CSS/box-shadow)来模拟您所追求的外观。

```
.expandable-slide {
    margin: 2em 0 0 2em;
    box-shadow: -1em -1em #666,
                -2em -2em #333;
} 
```

此处的工作示例：http: [//jsfiddle.net/thefrontender/LwW7g/](http://jsfiddle.net/thefrontender/LwW7g/)

# android - 使用 Android Drive SDK 从 Google Drive 下载“应用数据”文件

> ID：15868911
> 
> 赞同：3
> 
> 时间：2013-04-07T23:05:13.357
> 
> 标签：android, google-drive-api

我有 google drive sdk quick start for android 启动和运行。

我要做的是扩展应用程序，以便能够在驱动器新的“App Data”文件夹上上传文件，并能够再次下载该文件（在 android 设备之间同步配置文件）

上传文件工作正常。但是当我尝试下载同一个文件时，我可以获得它的元数据，如 fileID、fileTitle、fileDownloadURL 等，但无法下载内容。我在尝试时收到 401 Unauthorized 错误。

我正在使用 AUTH SCOPE“ [https://www.googleapis.com/auth/drive.appdata](https://www.googleapis.com/auth/drive.appdata) ”来访问 appdata。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T03:33:23.427

仅使用`drive.appdata`范围时，我可以重现这一点。如果我添加另一个 Drive 范围，例如`drive.readonly`范围，它可以正常工作。

我同意这是一个错误（或者至少是令人惊讶的行为），所以我会提出一个错误，但现在请使用上面的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-10T21:00:48.417

尝试以下代码来检索内容

```
public void retrieveContents(DriveFile file) {
        // [START drive_android_open_file]
        Task<DriveContents> openFileTask =
                getDriveResourceClient().openFile(file, DriveFile.MODE_READ_ONLY);
        // [END drive_android_open_file]
        // [START drive_android_read_contents]

        openFileTask.continueWithTask(new Continuation<DriveContents, Task<Void>>() {
            @Override
            public Task<Void> then(@NonNull Task<DriveContents> task) throws Exception {
                DriveContents contents = task.getResult();
                // Process contents...
                // [START_EXCLUDE]
                // [START drive_android_read_as_string]
                try (BufferedReader reader = new BufferedReader(
                        new InputStreamReader(contents.getInputStream()))) {
                    StringBuilder builder = new StringBuilder();
                    String line;
                    while ((line = reader.readLine()) != null) {
                        builder.append(line).append("\n");
                    }

                    Log.e("result ", builder.toString());
                }
                // [END drive_android_read_as_string]
                // [END_EXCLUDE]
                // [START drive_android_discard_contents]
                Task<Void> discardTask = MainActivity.this.getDriveResourceClient().discardContents(contents);
                // [END drive_android_discard_contents]
                return discardTask;
            }
        })
                .addOnFailureListener(new OnFailureListener() {
                    @Override
                    public void onFailure(@NonNull Exception e) {

                    }
                });

        // [END drive_android_read_contents]
    } 
```

# java - 如何获得二维数组可能的组合

> ID：15868914
> 
> 赞同：10
> 
> 时间：2013-04-07T23:05:34.780
> 
> 标签：java, combinations, multidimensional-array

我有以下二维数组：

```
String[M][]

String[0]
   "1","2","3"

String[1]
   "A", "B"
   .
   .
   .
String[M-1]
   "!" 
```

所有可能的组合都应存储在结果数组 `String[] combinations`中。例如：

```
combinations[0] == {"1A....!")
combinations[1] == {"2A....!") 
combinations[2] == {"3A....!") 
combinations[3] == {"1B....!") 
```

请注意，数组的长度是可变的。输出字符串中元素的顺序无关紧要。我也不关心是否有重复。

如果数组的长度相同，嵌套循环就可以解决问题，但事实并非如此，我真的不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T00:42:36.340

您可以像发条一样通过使用一个数组来记录每个内部数组的大小，并使用一个计数器数组来跟踪每个内部数组中要使用的成员，从而一次遍历一个组合。像这种方法的东西：

```
/**
 * Produce a List<String> which contains every combination which can be
 * made by taking one String from each inner String array within the
 * provided two-dimensional String array.
 * @param twoDimStringArray a two-dimensional String array which contains
 * String arrays of variable length.
 * @return a List which contains every String which can be formed by taking
 * one String from each String array within the specified two-dimensional
 * array.
 */
public static List<String> combinations(String[][] twoDimStringArray) {
    // keep track of the size of each inner String array
    int sizeArray[] = new int[twoDimStringArray.length];

    // keep track of the index of each inner String array which will be used
    // to make the next combination
    int counterArray[] = new int[twoDimStringArray.length];

    // Discover the size of each inner array and populate sizeArray.
    // Also calculate the total number of combinations possible using the
    // inner String array sizes.
    int totalCombinationCount = 1;
    for(int i = 0; i < twoDimStringArray.length; ++i) {
        sizeArray[i] = twoDimStringArray[i].length;
        totalCombinationCount *= twoDimStringArray[i].length;
    }

    // Store the combinations in a List of String objects
    List<String> combinationList = new ArrayList<String>(totalCombinationCount);

    StringBuilder sb;  // more efficient than String for concatenation

    for (int countdown = totalCombinationCount; countdown > 0; --countdown) {
        // Run through the inner arrays, grabbing the member from the index
        // specified by the counterArray for each inner array, and build a
        // combination string.
        sb = new StringBuilder();
        for(int i = 0; i < twoDimStringArray.length; ++i) {
            sb.append(twoDimStringArray[i][counterArray[i]]);
        }
        combinationList.add(sb.toString());  // add new combination to list

        // Now we need to increment the counterArray so that the next
        // combination is taken on the next iteration of this loop.
        for(int incIndex = twoDimStringArray.length - 1; incIndex >= 0; --incIndex) {
            if(counterArray[incIndex] + 1 < sizeArray[incIndex]) {
                ++counterArray[incIndex];
                // None of the indices of higher significance need to be
                // incremented, so jump out of this for loop at this point.
                break;
            }
            // The index at this position is at its max value, so zero it
            // and continue this loop to increment the index which is more
            // significant than this one.
            counterArray[incIndex] = 0;
        }
    }
    return combinationList;
} 
```

# 该方法的工作原理

如果您想象计数器数组就像一个数字时钟读数，那么第一个字符串组合会看到计数器数组全为零，因此第一个字符串是由每个内部数组的零元素（第一个成员）组成的。

为了得到下一个组合，计数器数组加一。因此，最不重要的计数器索引增加了 1。如果这导致它的值变得等于它所代表的内部数组的长度，则索引为零，并增加下一个更重要的索引。一个单独的大小数组存储每个内部数组的长度，以便计数器数组循环知道索引何时达到其最大值。

例如，如果大小数组是：

```
[3][3][2][1] 
```

计数器数组位于：

```
[0][2][1][0] 
```

那么增量将使最不重要（最右边）的索引等于 1，这是它的最大值。因此该索引被归零，并且下一个更重要的索引（从右数第二个）增加到 2。但这也是该索引的最大值，所以它被归零，我们移动到下一个更重要的索引。它增加到三，这是它的最大值，所以它被归零，我们移动到最重要的（最左边的）索引。该值增加到 1，小于其最大值，因此递增的计数器数组变为：

```
[1][0][0][0] 
```

这意味着下一个 String 组合是通过获取第一个内部数组的第二个成员和接下来三个内部数组的第一个成员来完成的。

# 可怕的警告和注意事项

我刚刚在大约四十分钟内写了这篇文章，现在是早上半点，这意味着即使它似乎完全符合需要，但很可能存在可以优化的错误或代码位。因此，如果其性能至关重要，请务必对其进行彻底的单元测试。

请注意，它返回一个 List 而不是 String 数组，因为我认为 Java 集合在大多数情况下比使用数组更可取。此外，如果您需要一个没有重复的结果集，您可以简单地将 List 更改为一个 Set，它将自动删除重复并为您留下一个唯一的集合。

如果您确实需要将结果作为 String 数组，请不要忘记您可以使用该`List<String>.toArray(String[])`方法将返回的 List 简单地转换为您需要的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T01:35:07.530

这个问题有一个非常好的递归结构（这也意味着它可能会在内存中爆炸，正确的方法应该是使用迭代器，比如另一个答案，但是这个解决方案看起来更好，因为递归性质，我们可以归纳证明正确性）。组合由第一个列表中的一个元素组成，该元素附加到由剩余 (n-1) 个列表形成的所有可能组合。递归工作在 AllCombinationsHelper 中完成，但您调用 AllCombinations。注意测试空列表和更广泛。

```
public static List<String> AllCombinations(List<List<Character>> aList) {
    if(aList.size() == 0) { return new ArrayList<String>(); }
    List<Character> myFirstSubList = aList.remove(0);
    List<String> myStrings = new ArrayList<String>();
    for(Character c : myFirstSubList) {
        myStrings.add(c.toString());
    }

    return AllCombinationsHelper(aList, myStrings);
}

public static List<String> AllCombinationsHelper(List<List<Character>> aList, 
                                                 List<String> aCollection) {
    if(aList.size() == 0) { return aCollection; }
    List<Character> myFirstList = aList.remove(0);
    List<String> myReturnSet = new ArrayList<String>();

    for(String s : aCollection) {
        for(Character c : myFirstList) {
            myReturnSet.add(c + s);
        }
    }

    return AllCombinationsHelper(aList, myReturnSet);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T04:42:04.710

应该直接与递归有关。

让我改写一下，这样术语就不那么混乱了。

我们将 String[] 称为 Token List，它是一个 Token 列表

现在您有一个 Token List 列表，您想从每个可用的 Token List 中获取一个 Token，并找出所有组合。

你需要做的是，给定一个 TokenList 列表

*   如果 List 只有一个 TokenList，则 Token List 本身的内容就是所有的组合
*   否则，通过排除第一个 Token List 来制作一个子列表，并找出该子列表的所有组合。当您拥有组合时，答案就是简单地遍历您的第一个标记列表，并使用标记列表中的每个标记生成所有组合，以及结果组合。

我只给出一个伪代码：

```
List<String> allCombinations(List<TokenList> listOfTokenList) {
  if (length of strings == 1) {
    return strings[0];
  }

  List<String> subListCombinations 
      = allCombination(listOfTokenList.subList(1));  // sublist from index 1 to the end

  List<String> result;
  for each (token in listOfTokenList[0]) {
    for each (s in subListCombination) {
      result.add(token + s);
    }
  }
  return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-14T16:36:22.440

我一直在努力解决这个问题一段时间。但我终于解决了。我的主要障碍是我用于声明每个变量的范围。如果您没有在正确的范围内声明变量，则该变量将保留在前一次迭代中所做的更改。

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class RecursiveAlgorithmTest {
    private static int recursiveCallsCounter = 0;
    public static ArrayList<ArrayList<String>> testCases = new ArrayList<ArrayList<String>>();

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        //set values for ArrayOfArrays
        ArrayList<String> VariableA = new ArrayList<String>(Arrays.asList("red", "green"));
        ArrayList<String> VariableB = new ArrayList<String>(Arrays.asList("A", "B", "C"));
        ArrayList<String> VariableC = new ArrayList<String>(Arrays.asList("1", "2", "3", "4"));

        ArrayList<ArrayList<String>> AofA = new ArrayList<ArrayList<String>>();
        AofA.add(VariableA); AofA.add(VariableB); AofA.add(VariableC);

        System.out.println("Array of Arrays: ToString(): " +AofA.toString());

        ArrayList<String> optionsList = new ArrayList<String>();

        //recursive call
        recurse(optionsList, AofA, 0);

        for (int i = 0 ; i < testCases.size() ; i++) {
            System.out.println("Test Case " + (i+1) + ": " + testCases.get(i));
            }

        }//end main(String args[])

    private static void recurse(ArrayList<String> newOptionsList, 
        ArrayList<ArrayList<String>> newAofA, int placeHolder){
        recursiveCallsCounter++;
        System.out.println("\n\tStart of Recursive Call: " + recursiveCallsCounter);
        System.out.println("\tOptionsList: " + newOptionsList.toString());
        System.out.println("\tAofA: " + newAofA.toString());
        System.out.println("\tPlaceHolder: "+ placeHolder);

        //check to see if we are at the end of all TestAspects
        if(placeHolder < newAofA.size()){

            //remove the first item in the ArrayOfArrays
            ArrayList<String> currentAspectsOptions = newAofA.get(placeHolder);
            //iterate through the popped off options

            for (int i=0 ; i<currentAspectsOptions.size();i++){
                ArrayList<String> newOptions = new ArrayList<String>();
                //add all the passed in options to the new object to pass on
                for (int j=0 ; j < newOptionsList.size();j++) {
                    newOptions.add(newOptionsList.get(j));
                }

                newOptions.add(currentAspectsOptions.get(i));
                int newPlaceHolder = placeHolder + 1;
                recurse(newOptions,newAofA, newPlaceHolder);
            }
        } else { // no more arrays to pop off
            ArrayList<String> newTestCase = new ArrayList<String>();
            for (int i=0; i < newOptionsList.size();i++){
                newTestCase.add(newOptionsList.get(i));
            }
            System.out.println("\t### Adding: "+newTestCase.toString());
            testCases.add(newTestCase);
        }
    }//end recursive helper 
}// end of test class 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-01-12T17:49:24.700

在 Python 中使用 itertools.product 和参数解包（应用）

```
>>> import itertools
>>> S=[['1','2','3'],['A','B'],['!']]
>>> ["".join(x) for x in itertools.product(*S)]
['1A!', '1B!', '2A!', '2B!', '3A!', '3B!'] 
```

# c++ - C++ Visual Studio 2010 Express 无法添加项目？

> ID：15868915
> 
> 赞同：0
> 
> 时间：2013-04-07T23:05:39.750
> 
> 标签：c++, visual-studio-2010

由于某种原因，当我在 Visual Studio 2010 Express 中启动一个新项目时，我无法添加新项目。在项目菜单中甚至没有选择它，它只说重新扫描解决方案。它工作正常，突然间就这样做了，我不知道如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:10:14.927

在解决方案资源管理器中，确保您选择了项目。听起来您选择了解决方案。

正确的：

![在此处输入图像描述](https://i.stack.imgur.com/pkqIR.png)

不正确：

![在此处输入图像描述](https://i.stack.imgur.com/fjvhG.png)

# css - 唯一字体名称的问题，是否需要脚本？

> ID：15868916
> 
> 赞同：0
> 
> 时间：2013-04-07T23:05:44.983
> 
> 标签：css, html, fonts

试图将我的标题 1 的字体更改为 ballpark Weiner。

下面是我的CSS：

```
h1 {color: #000000; font-family: Ballpark Weiner; 
        font-size: 40px;
} 
```

试图让字体看起来像这样：

[http://www.fontgirl.com/info/ballpark.php](http://www.fontgirl.com/info/ballpark.php)

它最终看起来像 Arial 类型的字体。像这样的unqiue字体，是否需要插入脚本？如果当前字体需要屏幕截图，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:11:47.010

我查看了您提供的链接，这就是您应该这样做的方式。

转到[fontsquirrel](http://www.fontsquirrel.com/tools/webfont-generator)并上传您的**BALLW___.TTF**文件，它将生成您需要的其他字体扩展名 + fontface 规则 font-face 规则看起来像：

```
@font-face {
    font-family: 'fontname';
    src: url('fontname-webfont.eot');
    src: url('fontname-webfont.eot?#iefix') format('embedded-opentype'),
         url('fontname-webfont.woff') format('woff'),
         url('fontname-webfont.ttf') format('truetype'),
         url('fontname-webfont.svg#fontname') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

将其包含在您的 css 文件中，然后您可以像这样使用它

```
css selector
{
font-family: 'fontname';
} 
```

ps：别忘了上传你的字体

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T23:08:59.780

修改此代码以使用您的字体并将其添加到您的 CSS 文件中。

```
@font-face {
    font-family: cool_font;
    src: url('cool_font.ttf'); // link to the font
} 
```

那么当你想使用它时，只需这样做

```
p.custom_font {
    font-family: cool_font; // no .ttf
} 
```

# java - 原始 Java Map 的对象哈希映射（将 POJO 映射到 Map）

> ID：15868922
> 
> 赞同：3
> 
> 时间：2013-04-07T23:06:34.303
> 
> 标签：java, orm

对于原始 java.util.Map，是否有类似[这样](https://github.com/xetorthio/johm)的“对象哈希映射” ？

能够“映射”定制类（通常通过注释）以存储在原始映射中的基本思想：

```
Map<String,String> map = new HashMap<String,String>();
Class car = new Car(1, "Red"); 

Ohm ohm = new Ohm(map); // set the back-end map to use. 
Car result = ohm.put(car); // persist annotated class
result = ohm.get(1); // get by id
result = ohm.get("color", "Red"); // get by property query 
```

我问这个的一个原因是因为我开发了一个库，可以有效地将原始接口映射`GAE Datastore`到原始`Map`接口：

```
Map<String, String> map = Datastorecast.getMap("somemap"); 
```

无论如何，我一直在考虑如何在不重新发明轮子的情况下实现它：

*   使用 Google Gson 或 JSON.Simple 将 Object 序列化为 java.util.Map
*   序列化的另一种选择是 XStream
*   从那里将生成的地图复制到数据存储支持的地图容器

**更新：**

我实现了一种技术来实现这一点（Redis 风格）：

```
Class car = new Car(1, "Red"); 

map.put("classname:com.mycompany.Car:uid:", car.getId());
map.put("classname:com.mycompany.Car:color:", car.getColor()); 
```

*   所以它只是一个注释类的问题，以便 OHM 类可以反映要放入地图的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:35:41.617

trove4j [TCustomHashMap](http://trove4j.sourceforge.net/javadocs/gnu/trove/map/hash/TCustomHashMap.html)怎么样？看来，它可能正是您正在寻找的。

# java - 为什么休眠从同一会话的同一查询返回不同的对象？

> ID：15868926
> 
> 赞同：3
> 
> 时间：2013-04-07T23:07:15.567
> 
> 标签：java, hibernate, jpa

我正在使用休眠来运行命名的 JPA 查询。

查询从同一个会话执行两次，查询应该返回相同的行，因为同时数据库不会改变。

令我惊讶的是，查询返回的对象与这两个查询结果列表不同（数据相同但对象不同）。启用一级缓存（默认情况下），我认为第二个查询应该返回与第一个查询相同的对象？

该查询是一个简单的命名查询：

```
SELECT e from TABLE e where e.name=?1 
```

查询是否以某种方式绕过缓存？还是我对一级缓存的理解有误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T23:16:57.913

这些结果很大程度上取决于您是否为对象提供实体 ID。

会话缓存和查询缓存在 Hibernate 中也是两个不同的东西。

如果您从同一会话加载具有相同实体 ID 的对象，它将返回相同的对象。

但是，如果您使用查询来加载对象 - 这是一个不同的故事。无论您拥有什么实体 ID，使用查询缓存都应该返回相同的数据。

查询缓存默认不开启。您必须执行类似`query.setCacheable(true);`的操作以确保查询已缓存。或者`hibernate.cache.use_query_cache`在 Hibernate 配置文件中设置属性。

# eof - QFile.atEnd() 过早返回 TRUE

> ID：15868929
> 
> 赞同：1
> 
> 时间：2013-04-07T23:07:28.930
> 
> 标签：eof, qfile

我正在尝试读取 CSV 文件。我的代码如下。我遇到的问题是文件的第一行按预期读入，但是一旦再次达到 while 循环条件 File.atEnd 返回 true。我已经尝试了几个文件，其中一些非常大，但它仍然只读取 CSV 文件的第一行。我已经使用了调试器，但找不到原因。运行 Win7 Pro（64 位）Qt v5.0.1（32 位）QDesigner v2.6.2。

更新：如果我有一个包含很多列的 CSV 文件，那么它似乎可以解决。

```
QFile File(strFileName);
File.open(QIODevice::ReadOnly | QIODevice::Text);

QTextStream FileStream(&File);

while( !File.atEnd() )
{
    QString strLine = FileStream.readLine();
    //Do some code here
}

File.close(); 
```

CSV 文件示例：

```
1,10,20
2,20,30
3,30,40 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T12:53:07.917

尝试改变

```
while( !File.atEnd() ) 
```

至

```
while( !FileStream.atEnd() ) 
```

# java - Facebook API 和访问令牌

> ID：15868931
> 
> 赞同：3
> 
> 时间：2013-04-07T23:07:34.147
> 
> 标签：java, json, facebook-graph-api

好的，所以我进行了 Graph API 调用并解析 JSON 请求。使用这样的链接，我发出 HttpGet 请求： [http](http://graph.facebook.com/me/feed?=access_token=) : //graph.facebook.com/me/feed?=access_token= "MYACCESSTOKEN"

这很好用，但问题是始终保持相同的访问令牌。

所以我通过 facebook 注册了一个应用程序并发出另一个 httpget 请求

`https://graph.facebook.com/oauth/access_token?client_id=_______&client_secret=_____&grant_type=client_credentials`

使用提供的客户端 ID 和密码。这返回了一个访问令牌。但是我根本不能使用这个访问令牌确实让我进入 [http://graph.facebook.com/me/feed?=access_token=](http://graph.facebook.com/me/feed?=access_token=) "MYACCESSTOKEN"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:45:39.567

第二个请求返回一个 APP 访问令牌[https://developers.facebook.com/docs/howtos/login/login-as-app/](https://developers.facebook.com/docs/howtos/login/login-as-app/)

您需要使用身份验证流程之一的用户访问令牌[https://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)

# jquery - fancyapps 灯箱自定义标题格式/模板，利用来自锚标记的数据属性

> ID：15868932
> 
> 赞同：1
> 
> 时间：2013-04-07T23:07:35.177
> 
> 标签：jquery, fancybox, fancybox-2

我不知道从哪里开始。任何帮助将非常感激。

我做了一个小提琴，所以你可以看到我需要什么。[http://jsfiddle.net/RJajg/2/](http://jsfiddle.net/RJajg/2/)

我正在使用[fancyapps 灯箱](http://fancyapps.com/fancybox/)。

我目前正在使用该`type: 'outside'`设置。这意味着，当灯箱打开时，脚本会获取标题属性并将其放置在 div 内的图像下方。

div 有类`.fancybox-title`

我想要实现的是使用图像链接中的数据属性将更多文本添加到此 div 中。

所以不仅仅是标题...

**图 1**

我希望它是这样的......

**图 1 | 下载高分辨率 | 下载低分辨率**

下载高/低分辨率字实际上是锚标记，使用链接中的数据属性。[请看我标记的小提琴](http://jsfiddle.net/RJajg/2/)。

抱歉，我没有在我的代码上投入太多精力，但我不知道从哪里开始或如何最有效地做到这一点。任何建议都会非常感谢。

这是我当前的代码。

```
$('#gallery1 a').attr('rel','fancybox-thumb').fancybox({
    padding: '0',
    prevEffect: 'none',
    nextEffect: 'none',
    closeBtn: false,
    helpers: {
        overlay: {
            opacity: 0.9,
            css: {
                'background-color': '#000'
            }
        },
        buttons: {
            position: 'top'
        },
        thumbs: {
            width: 50,
            height: 50
        },
        title: {
            type: 'outside'
        }
    },
    closeClick: false
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:32:30.520

您可以使用`beforeShow`回调来设置`title`您想要的方式：

```
beforeShow: function () {
    var highRes = "<a href='" + $(this.element).data("download-high") + "'>Download High-Res</a>";
    var lowRes  = "<a href='" + $(this.element).data("download-low")  + "'>Download Low-Res</a>";
    this.title  = this.title ? this.title + " | " + highRes + " | " + lowRes : highRes + "|" + lowRes;
} 
```

查看您的**[分叉 JSFIDDLE](http://jsfiddle.net/RJajg/4/)**

# python - 从 struct.pack 中提取字符串

> ID：15868933
> 
> 赞同：3
> 
> 时间：2013-04-07T23:07:36.203
> 
> 标签：python, string, pack, struct.pack

我需要将一个整数转换为一系列字节字符串，这看起来`struct.pack`是最好的方法。一行得到我需要的所有信息：

```
In [51]: struct.pack("@L",1000)
Out[51]: '\xe8\x03\x00\x00' 
```

我的问题是我最终想将它们转换为字符串列表（我通过 CAN 实用程序传递它们，该实用程序需要将字节视为字符串......最终我将绕过该实用程序，但这是我现在在）

所以我尝试访问该字符串，但它是一种不同类型的字符串......

```
In [52]: output=struct.pack("@L",1000)

In [53]: type(output)
Out[53]: str

In [54]: output[0]
Out[54]: '\xe8'

In [55]: type(output[0])
Out[55]: str

In [56]: output[0][0]
Out[56]: '\xe8' 
```

所以不太确定从这里去哪里。最终，我想得到类似的东西

```
(0xe8, 0x03,0x00,0x00) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:34:54.847

听起来您想要一个字节值列表作为整数。以下是您可以执行的操作：

```
>>> import struct
>>> x = struct.pack("@L",1000)
>>> map(ord, x)
[232, 3, 0, 0] 
```

如果你真的想要十六进制字符串：

```
>>> map(hex, map(ord, x))
['0xe8', '0x3', '0x0', '0x0'] 
```

# php - 使用 PHP 将单选按钮值添加到 MYSQL 表

> ID：15868935
> 
> 赞同：7
> 
> 时间：2013-04-07T23:07:45.313
> 
> 标签：php, mysql, radio-button

我正在使用 PHP/MYSQL 创建一个包含单选按钮的表单。我正在尝试将选中的单选按钮的值添加到数据库中的表中。目前我无法将任何内容添加到数据库中。该表称为评估。

***QUESTION1.PHP***

```
<?php 
include 'core/init.php';
include 'includes/overall/overall_header.php';
protect_page();
include 'includes/menu.php';
include 'includes/overall/navigate.php';
include 'includes/widgets/loggedin.php';

?>      

<h1>Assessment</h1>

<form action="save.php" method="post">

<p class="p1">
Question 1</p>
<p class="p4">
Are you tall or short?</p>

<p class="p3"> 
<input type="radio" name="q1" value="1" />
1
<input type="radio" name="q1" value="2" />
2
<input type="radio" name="q1" value="3" />
3
<input type="radio" name="q1" value="4" />
4
<input type="radio" name="q1" value="5" />
5
</p><br><br>
</form>

<img src="Images/image1.png" alt="Submit" class="thumbnail" align="right" width="58"      height="52" id="question2">
<img src="Images/save.png" alt="Submit" class="thumbnail" align="right" width="65" height="52">

<?php
}
 include 'includes/overall/overall_footer.php'; 
 ?> 
```

***保存.PHP***

```
<?php
session_start();
include('connection.php');
$q1=$_POST['q1'];
mysql_query("INSERT INTO `assessment` (q1) VALUES ('$q1')");
header("location: question2.php?");
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:55:23.383

我想知道，这两个图像标签的目的是什么。我只是将那些 img 标签更改为按钮图像。

```
<h1>Assessment</h1>
<form action="save.php" method="post">
  <p class="p1"> Question 1</p>
  <p class="p4"> Are you tall or short?</p>
  <p class="p3">
    <input type="radio" name="q1" value="1" />
    1
    <input type="radio" name="q1" value="2" />
    2
    <input type="radio" name="q1" value="3" />
    3
    <input type="radio" name="q1" value="4" />
    4
    <input type="radio" name="q1" value="5" />
    5 </p>
  <br>
  <br>
  <input type="image" src="Images/image1.png" />
  <input type="image" src="Images/save.png" />
</form> 
```

**保存.php**

```
 <?php
    if (isset($_POST['q1'])){
        $q1 = $_POST['q1'];
        mysql_query("INSERT INTO assessment (q1) VALUES ('$q1')");
    }
    ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-07T10:03:38.353

```
if (isset($_POST['q1'])) {
    $q1 = $_POST['q1'];
    $stmt = $db->prepare("INSERT INTO members (q1) VALUES (:q1)");

    $stmt->execute(array(':q1' => $_POST['q1']));
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-25T07:03:07.643

有一个性别单选按钮可以选择男性和女性

```
<?php
$gender=$_POST['radiobutton_name'];
$sql="INSERT INTO table_name(column_name)
VALUES('$gender')";
?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-07-21T07:41:55.133

我只是按照您的代码并提供解决方案。您只需要在**save.php**中进行一些更改，如下所示：

```
<?php

if (isset($_POST['q1'])) {
    $q1 = $_POST['q1'];
    $sql = mysql_query("INSERT INTO assessment (q1) VALUES ('$q1')") or die("MySQL Error : ".mysql_error($conn));
    if ($sql) {
        echo "Data Saved";
    } else {
        echo "Data not saved";
    }
} 
```

如果发现任何问题，请告诉我。

**重要提示：** 请避免在 PHP 5.5.0 及更高版本中弃用的 mysql_* 类型的函数。

# string - 选择一个长度最多为 n 的均匀随机字符串？

> ID：15868936
> 
> 赞同：3
> 
> 时间：2013-04-07T23:07:52.220
> 
> 标签：string, algorithm, random

假设我想从所有长度最多为 n 的字符串中选择一个均匀随机的字符串（假设字符串可以由一组固定的字符组成，例如字母 A - Z）。如果我事先知道字符串的长度是多少，我可以通过均匀地随机选择该字符串的每个字符来轻松选择一个随机字符串。但是，为了保证我们随机均匀地挑选字符串，我不能只挑选一个均匀随机长度然后挑选一个该长度的随机字符串，因为如果你要挑选一个完全随机的字符串，它通常会有一个长度比短的要大，因为长字符串比短字符串多。

是否有一种已知的算法可以随机均匀地选择长度最多为 n 的字符串？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:33:22.840

n 的分布减去均匀随机字符串的长度与 X mod (n+1) 相同，其中 X 是范围为 [0, 无穷大) 的几何，成功概率为 1-1/k，k 是字母的数量在字母表中。要随机均匀地选择一个字符串而不使用 bignums：对几何模 (n+1) 进行采样（例如，通过均匀地对字母进行采样，直到出现一个不是 A 的字母，然后返回非 A 生成的模的数量（ n+1))。生成长度为 n 减去该值的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T23:19:44.407

每个字母都增加了可能字符数的另一个因子，因此有 26 个单字母字符串、26 × 26 个双字母字符串，依此类推。您只需要先通过相应的缩放来随机选择一个长度。

例如，您最多可以选择一个随机数 308915776 并选择字符串长度，如下所示：

```
< 26        - 1
< 702       - 2
< 15576     - 3
< 456976    - 4
< 11881376  - 5
< 308915776 - 6 
```

不过，这些数字很快就会变得有点大，所以只要你的*n*很小，它就可以工作。否则，您可以使用浮点数并使用 0 到 1 之间的范围。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T23:24:37.510

有26个字符，长度最多为n。所以字符串的总数是：

```
Total Number of Strings = \sum_{i=1}^n 26^i 
```

我们需要以相等的概率选择其中的每一个，即：

```
P(string s is chosen) = 1 / TotalNumStrings 
```

现在考虑您提出的选择随机长度然后选择该长度的随机字符串的策略。所以根据贝叶斯规则，我们有：

```
P(string s being chosen which has length i) =
     P(string s being chosen | string has length i) *
     P(we want a string of length i) = (1 / 26^i) * (1 / n) = 1 / (26^i * n) 
```

不等于 1 / TotalNumStrings。您已经知道这行不通，但这会激发正确的选择策略。

现在选择字符串如下：

```
P(string s being chosen which has length i) =
     P(string s being chosen | string has length i) *
     P(we want a string of length i) = 
         1 / (26^i) *  P(chosen string has length i) = 1 / NumStrings. 
```

因此我们有 P(chosen string has length i) = 26^i / NumStrings！多田。

所以总结选择策略如下。首先选择长度 i，概率为 26^i / NumStrings。然后在该类别中选择一个任意字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T23:22:02.770

给定字符集的大小，您不能只计算长度的分布吗？

确定长度`k`字符串与长度小于 的字符串的比率`k`。这来自：[维基百科](http://en.wikipedia.org/wiki/Geometric_progression)。

因此，假设一个最大字符串，然后随机确定较短字符串的相对机会。

如果较短重复，看看是否`n-1`或更少。

我认为这种方法可以相当干净地处理舍入错误。在合理尺寸时实际获得非常短的字符串的机会`n`仍然很小，但具有代表性。

为了求和，我们想要：

```
k^n samples of length n
k^(n-1) of length n-1
etc.
k of length 1
1 of length 0

p(length < x)/p(length <= x)
= sum(1+..+k^x-1)/sum(1+..+k^x)
= (1 - k^-x)/ (k-k^-x) 
```

所以我们可以这样实现：

```
int getLength(int n, int setSize)
{
    if (n == 0)
        return 0;
    double oneOverKtoTheN = pow(1.0/setSize, (double)n);
    double pLengthN = (1-oneOverKtoTheN)/(setSize - oneOverKtoTheN);
    double sample = ((double) rand()) / RAND_MAX;
    if (sample < pLengthN)
        return n;
    return getLength(n-1, setSize);
} 
```

请注意，`oneOverKtoTheN`由于浮点数开始时可能会被丢弃，但随着`n`减少，它开始按原样计算。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T05:18:01.260

不超过长度的所有字符串的数量`n`是`(26^(n+1)-1)/(26-1)`。

这个想法是确定字符串是否为空。这个概率是`(26-1)/(26^(n+1)-1)`。为了生成这种概率的事件，我们生成`26^(n+1)`事件，忽略其中一个并从其余事件中选择 25 个事件。

```
char GenerateRandomCharacter()
{
    ...
}
std::string GenerateRandomStringOfFixedLength(int length)
{
    std::string result;
    for(int c=0;c<length;++c)
        result.push_back(c);
    return result;
}
bool WillWeGenerateEmptyString(int maxLength)
{
    while(true)
    {
        const std::string sample=GenerateRandomStringOfFixedLength(maxLength+1);
        if(sample==std::string(maxLength+1,'A'))
            continue;//this leaves 26^n-1 values
        else
            return sample.substr(1)==std::string(maxLength,'A');//only 25 strings satisfy this
    }
}
std::string Generate(int maxLength)
{
    if(WillWeGenerateEmptyString(maxLength))
        return std::string();
    else
    {
        std::string result;
        result.push_back(GenerateRandomCharacter());
        result+=Generate(maxLength-1);
        return result;
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-07T23:41:25.300

如果您需要更大的字符串，另一种方法是从 27 个字符随机构建每个字符串，其中第 27 个字符是字符串结尾字符。您将不得不拒绝任何比您的最大可接受 n 更长的字符串，但生成应该是相当有效的。因此，要生成具有“正确”分布和长度在 0 到 n 范围内的随机字符串，您可以使用以下更有效的版本：

```
Function RandomString(n : integer) : string;
var
  RandomChar : char;
begin
  result := '';
  repeat
    RandomChar := Char('a' + Random(27));
    if RandomChar in ['a'..'z'] then
      result := result + RandomChar;
    if Length(result) > n then
      result := '';
  until RandomChar not in ['a'..'z'];
end; 
```

# android - 具有搜索功能的 Android 多选项目对话框

> ID：15868940
> 
> 赞同：2
> 
> 时间：2013-04-07T23:08:12.607
> 
> 标签：android, android-dialog

在我的 Android 应用程序中，我有一个包含大量项目的多选项目对话框（类似于图像中显示的）。所以我计划添加一个搜索框，当用户输入时，项目会被相应地过滤。做这个的最好方式是什么？谢谢

![图片](https://i.stack.imgur.com/4RJIm.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-13T19:41:57.347

我这样做了，对我来说很好。

```
private static final class ListItemWithIndex {
        public final int index;
        public final String value;

        public ListItemWithIndex(final int index, final String value) {
            super();
            this.index = index;
            this.value = value;
        }

        @Override
        public String toString() {
            return value;
        }
    }

    public static void showMultiChoiceDialogWithSearchFilterUI(final Activity _activity, final Object[] _optionsList,
            final int _titleResId, final OnClickListener _itemSelectionListener) {
        final AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(_activity);

        final List<ListItemWithIndex> allItems = new ArrayList<ListItemWithIndex>();
        final List<ListItemWithIndex> filteredItems = new ArrayList<ListItemWithIndex>();

        for (int i = 0; i < _optionsList.length; i++) {
            final Object obj = _optionsList[i];
            final ListItemWithIndex listItemWithIndex = new ListItemWithIndex(i, obj.toString());
            allItems.add(listItemWithIndex);
            filteredItems.add(listItemWithIndex);
        }

        dialogBuilder.setTitle(_titleResId);
        final ArrayAdapter<ListItemWithIndex> objectsAdapter = new ArrayAdapter<ListItemWithIndex>(_activity,
                android.R.layout.simple_list_item_1, filteredItems) {
            @Override
            public Filter getFilter() {
                return new Filter() {
                    @SuppressWarnings("unchecked")
                    @Override
                    protected void publishResults(final CharSequence constraint, final FilterResults results) {
                        filteredItems.clear();
                        filteredItems.addAll((List<ListItemWithIndex>) results.values);
                        notifyDataSetChanged();
                    }

                    @Override
                    protected FilterResults performFiltering(final CharSequence constraint) {
                        final FilterResults results = new FilterResults();

                        final String filterString = constraint.toString();
                        final ArrayList<ListItemWithIndex> list = new ArrayList<ListItemWithIndex>();
                        for (final ListItemWithIndex obj : allItems) {
                            final String objStr = obj.toString();
                            if ("".equals(filterString)
                                    || objStr.toLowerCase(Locale.getDefault()).contains(
                                            filterString.toLowerCase(Locale.getDefault()))) {
                                list.add(obj);
                            }
                        }

                        results.values = list;
                        results.count = list.size();
                        return results;
                    }
                };
            }
        };

        final EditText searchEditText = new EditText(_activity);
        searchEditText.addTextChangedListener(new TextWatcher() {
            @Override
            public void onTextChanged(final CharSequence arg0, final int arg1, final int arg2, final int arg3) {
            }

            @Override
            public void beforeTextChanged(final CharSequence arg0, final int arg1, final int arg2, final int arg3) {
            }

            @Override
            public void afterTextChanged(final Editable arg0) {
                objectsAdapter.getFilter().filter(searchEditText.getText());
            }
        });

        final ListView listView = new ListView(_activity);
        listView.setAdapter(objectsAdapter);
        final LinearLayout linearLayout = new LinearLayout(_activity);
        linearLayout.setOrientation(LinearLayout.VERTICAL);
        linearLayout.addView(searchEditText, new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT,
                LinearLayout.LayoutParams.WRAP_CONTENT));
        final LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.MATCH_PARENT, 0);
        layoutParams.weight = 1;
        linearLayout.addView(listView, layoutParams);
        dialogBuilder.setView(linearLayout);

        final AlertDialog dialog = dialogBuilder.create();
        listView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(final AdapterView<?> parent, final View view, final int position, final long id) {
                dialog.dismiss();
                _itemSelectionListener.onClick(null, filteredItems.get(position).index);
            }
        });
        dialog.show();
    } 
```

只需使用“showMultiChoiceDialogWithSearchFilterUI”功能。不过，您可能希望从 XML 扩充 edittext 和 listview，因为在此解决方案中，视图创建是硬编码的。

# c++ - 尽管复制指南，cudaMallocPitch '无效参数'？

> ID：15868944
> 
> 赞同：1
> 
> 时间：2013-04-07T23:08:45.623
> 
> 标签：c++, cuda, invalid-argument

我一直很高兴地忽略了这一点，但现在它已经成为一个很大的问题 - 我希望你们能帮助我。

我打电话给 cudaMallocPitch，但无论我尝试什么，它总是给我红色下划线和“无效参数”错误。即使我从 Nvidia CUDA C Programming guide 复制源代码，它仍然给我错误。我对 CUDA 很陌生，所以请不要犹豫，指出任何你可能认为明显可能导致问题的东西。

这是我所指的确切代码：

```
int width = 64, height = 64;
    float* devPtr;
    size_t pitch;
    cudaMallocPitch(&devPtr, pitch,
                    width * sizeof(float), height); 
```

非常感谢任何评论，干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:12:44.793

第二个参数应该是 a `size_t*`，但您传递的是 a `size_t`。试试这个：

```
cudaMallocPitch(&devPtr, &pitch, width * sizeof(float), height); 
```

另请注意，最后一个参数类型也是`size_t`. 或许`height`作为`size_t`.

# mysql - 棘手的 MySQL 触发器

> ID：15868948
> 
> 赞同：1
> 
> 时间：2013-04-07T23:09:19.437
> 
> 标签：mysql, triggers

我有一个非常棘手的 mysql 触发器 - 我有 3 个表，机器，部件，使用...机器有 mname，价格......部件有 pname，成本......使用是存储用于构建机器的部件的数量，所以有mname，pname，amount（一台机器使用的零件数量）

现在，我需要使用触发器确保机器价格始终高于其制造的所有部件的成本总和。换句话说，每次我更新一个零件的成本时，如果价格低于该价格，将自动计算更新零件的机器的价格为 sum(cost*amount)。下面的触发器是我的第一次尝试。然后我尝试将 set price = new.cost 替换为

从.....中选择总和（金额*成本）

我发现我很难将价格设置为 sum(cost*amount)，因为一旦我找到更新的零件，就有多台机器在使用这些零件，同时它们在使用其他零件，我很难过将它们加在一起，仍然将每台机器设置为各自的总和。我需要在这里循环吗？如何？我对mysql很陌生。

任何帮助将不胜感激。提前致谢。

```
 create trigger setPrice after update on parts 
    for each row
    begin
    update machine m inner join usedin u inner join parts i
    set price = new.cost
    where price < new.cost*amount and c.cname = u.cname and u.iname = new.iname
    ;
    end// 
```

# php - 如何增加 cPanel 中的最大上传大小？

> ID：15868949
> 
> 赞同：20
> 
> 时间：2013-04-07T23:09:39.063
> 
> 标签：php, wordpress, .htaccess, cpanel

我正在使用我网站的 cPanel 来增加 wordpress 媒体上传的最大上传文件大小。我已经为此目的使用了代码（从谷歌找到）wp-config.php，.htaccess，但没有任何效果。在我的 cPanel 中，软件/服务部分或其他任何地方都没有 php 配置编辑器的服务。请帮助我该怎么办？

我的 .htaccess 显示此代码：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

我尝试通过放置代码：

```
php_value upload_max_filesize 20M
php_value post_max_size 20M 
```

内部和外部 # 块，它会给出 500 错误。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-10-03T21:32:00.190

在`cpanel -> software and services -> Select PHP Version.`

选择一个 PHP 版本而不是原生版本（我推荐 php 5.6 或最后一个），您将看到一个新链接“切换到 PHP 设置”，单击它，在 PHP 设置中，您可以在最后一行设置 upload_max_filesize，单击值（默认为 2M），并且您有一个包含可以设置为 upload_max_filesize 的值的保管箱，然后单击保存。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-11T23:38:51.927

不幸的是，这是您必须要求您的提供商做的事情。

如果您是服务器的所有者并且可以登录 WHM，则它位于：

```
Tweak Settings => PHP Settings => Maximum Upload Size 
```

较新的版本在下面列出：

```
Home => Service Configuration => PHP Configuration Editor => Tweak Settings => PHP 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-04-29T10:53:00.753

**我们可以通过3**种不同的方式增加 WordPress 媒体上传的最大上传文件大小。

那是

1.  .htaccess 方式
2.  PHP.INI 文件方法
3.  主题的 Functions.php 文件

对于 .htaccess 方式，添加以下代码，

```
php_value upload_max_filesize 1024M
php_value post_max_size 1024M
php_value max_execution_time 1000
php_value max_input_time 1000 
```

对于 PHP.INI 文件方法，添加以下代码，

```
upload_max_filesize = 1024M
post_max_size = 1024M
max_execution_time = 1000 
```

对于 Theme 的 Functions.php 文件，添加以下代码，

```
@ini_set( ‘upload_max_size’ , ’1024M’ );
@ini_set( ‘post_max_size’, ’1024M’);
@ini_set( ‘max_execution_time’, ’1000′ ); 
```

**[更多详情->>>](http://hints.steptoinstall.com/3-ways-increase-maximum-upload-limit-file-size-in-media-of-wordpress.html)**

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-09-21T11:24:15.497

在 CPanel 64.0.40 上（我没有尝试任何其他版本）：进入“软件”，然后“选择 PHP 版本”，然后“切换到 PHP 选项”，然后 upload_max_filesize => 单击该值并选择您喜欢的那个 :)对于这样一个关键的选项，它是超级隐藏的......

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-13T19:16:50.543

我已经找到了这个问题的答案和解决方案。以前，我不知道 php.ini 位于 wordpress 文件的哪个位置。现在我在放置代码的 wp-admin 目录中找到了该文件

```
post_max_size 33M
upload_max_filesize 32M 
```

然后它起作用了。它增加了我的 wrpdress 网站的上传文件大小。但是，它与之前在 cPanel 上的 2M 相同。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-02-07T10:26:06.353

由于您的 /public_html 目录中没有 php.ini 文件......在 /public_html 目录中创建一个新文件为 phpinfo.php

- 在 phpinfo.php 中输入此代码并保存：

`<?php phpinfo(); ?>`

-然后输入 yourdomain.com/phpinfo.php...您将看到配置的所有详细信息

- 要编辑该配置，请在 /public_html 目录中创建另一个文件为 php.ini 并粘贴以下代码： `memory_limit=512M
post_max_size=200M
upload_max_filesize=200M`

- 然后刷新 yourdomain.com/phpinfo.php 并查看更改，它将完成。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-05T12:01:52.530

就我而言，它是`wp-admin/.user.ini`：

```
post_max_size = 33M
upload_max_filesize = 32M 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-13T13:54:06.263

Godaddy 上的新 Cpanel 设置
从 Cpanel 转到：

*   软件
*   选择 PHP 版本
*   点击右上角的“切换到 PHP 选项”

增加帖子最大大小并上传最大文件大小，保存并完成。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-02-04T10:11:56.817

解决方案是在根目录下创建 php.ini 文件。如果站点是 wordpress 安装，则在 your/path/to/wordpress/wp-admin/php.ini 下创建 php.ini 并添加以下代码行

```
[PHP]
post_max_size=120M
upload_max_filesize=132M 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-08-18T04:28:12.263

如果您有权访问，请登录您的 WHM 面板

然后转到软件-> MultiPHP INI 编辑器

然后从下拉列表中选择php版本，然后向下滚动默认为2M的upload_max_filesize，现在根据您的需要增加它。

为方便起见，还为 HTTP 文件上传启用 file_uploads。

如果您无权访问 WHM，请遵循 .htaccess 方法。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-03-06T12:14:13.967

php.ini 设置应该如下所示，如果'='符号没有放在设置和值之间，它不起作用

post_max_size = 100M

upload_max_filesize = 100M

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-05-24T17:41:49.783

您不应该完全替换文本。在“# END WordPress”之后添加文本。

# java - 使用 toString java 返回一个字符串

> ID：15868959
> 
> 赞同：1
> 
> 时间：2013-04-07T23:11:22.207
> 
> 标签：java, string, tostring

我一直在使用一个可以正确运行和比较的可比较类，但是当我尝试将值打印出来时，它给了我内存地址。我知道这可以用一种`toString`方法解决，但我不确定如何去做。这是我的代码：

```
import java.io.*;
import java.util.*;
import java.lang.Object;

public class StreetAddress implements Comparable<StreetAddress>
{
    protected int num;
    protected String stName;

    public StreetAddress(int n, String s){
    num = n;
    stName = s;
    }

    public int getNum(){
        // returns the street number
        return num;
    }

    public String getName(){
        // returns the street name
        return stName;
    }

    public int compareTo(StreetAddress street) throws ClassCastException{
        // exception prevents crash if an address is not compared to
        // another address
        int compareName = this.stName.compareTo(street.stName);
        int compareNum = this.num - street.num;
        if (compareName < 0){
            // first address comes after compared address
            return compareName;
        }

        else if (compareName == 0){ // same address name
            if (compareNum < 0){
                System.out.println(this.num + "" + this.stName + ", " + street.num + "" + street.stName);
                return compareName;
            }
            else{
                System.out.println("");
                return compareName;
            }
        }

        else{
            // first address comes before compared address
            return compareName;
        }

        }

    public static void main(String args[])
    {
    StreetAddress add1 = new StreetAddress(7864, "cartesian road");
    StreetAddress add2 = new StreetAddress(5141, "cartesian road");
    StreetAddress add3 = new StreetAddress(1664, "n kings street");
    StreetAddress add4 = new StreetAddress(9753, "pioneer parkway");
    StreetAddress add5 = new StreetAddress(3643, "starry avenue");
    add1.compareTo(add2);
    add4.compareTo(add1);
    add3.compareTo(add3);
    add2.compareTo(add5);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T23:13:11.373

简单的：

```
@Override
public String toString() {
    return String.format("%d %s", num, stName);
} 
```

注释不是必需的`@Override`，但绝对是好的做法。请注意，这`String.format("%d %s", num, stName)`会产生一个形式为 的字符串`"[num] [street]"`。[`String.format`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)如果您想在将来进行更改，我发现它比字符串连接具有更大的灵活性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T23:14:24.987

```
@Override
public String toString() {
   return "StreetAddress: num= " + num + ", stName=" + stName ;
} 
```

# jquery - jQuery 计数器开始在滚动时增加，但不会在最大值处停止

> ID：15868964
> 
> 赞同：1
> 
> 时间：2013-04-07T23:12:20.023
> 
> 标签：jquery, scroll

我的页面上有一个使用以下代码的计数器：

```
$(window).scroll(function(){    
if ($(window).scrollTop() > 1400) {
    var max = 67;
    incCounter();
    $('#counter').fadeIn(800);
    }

    function incCounter() {
      var currCount = parseInt($('#counter').html());
      $('#counter').html(currCount+1);
      if (currCount+1 != max) {
        setTimeout(incCounter, 20);
      }
}
} 
```

它从 0 开始，然后继续，不会在最大值处停止。我如何让它这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:27:52.070

**[jsFiddle 演示](http://jsfiddle.net/85rnR/)**

问题是，即使您发现要满足的值，您仍会不断增加计数器。您需要像这样稍微重新组织您的功能：

```
function incCounter() {
  var currCount = parseInt($('#counter').html());
  if (currCount != max) {
    $('#counter').html(currCount+1);//only increment when possible
    setTimeout(incCounter, 20);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T23:15:51.070

你似乎从不检查自己是否处于底部。在我看来，您检查了 scrollTop，但即使您到达该功能，您仍然会进入该函数并增加计数器。

我建议你检查一下你是否在底部，如果你是那么不要调用 incCounter 函数

这可能会有所帮助。[检查用户是否滚动到底部](https://stackoverflow.com/questions/3898130/how-to-check-if-a-user-has-scrolled-to-the-bottom)

哦，你永远不会停止 TimeOut，所以它会继续下去。

所以

```
var myInterval = setTimeout(incCounter, 20) 
```

然后

```
window.clearInterval(myInterval) 
```

# ruby - 在 Ruby 哈希中将相同键的值相加

> ID：15868965
> 
> 赞同：0
> 
> 时间：2013-04-07T23:12:29.433
> 
> 标签：ruby, hash, hashtable, key-value-store

我有一个从 .txt 文件创建的哈希表。哈希表中的某些元素具有相同的键。Ruby 采用最后一个实例并在哈希表中使用该值。我将如何将重复键的值加在一起？

例如，如果我有一个哈希表： hash = { a => 1, a => 2, b => 3 }

我希望得到的哈希表是： hash = { a => 3, b => 3 }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:20:58.463

## 使用散列的块形式#Update

如果您想通过将当前哈希中的值与存储在另一个哈希中的与重复键关联的值相加来替换当前哈希中的值，您可能需要使用[Hash#update](http://ruby-doc.org/core-2.0/Hash.html#method-i-update)的块形式。该块定义了如何处理重复键；在这种情况下，我们只需将它们的值相加。例如：

```
h1 = { a: 1, b: 3 }
h2 = { a: 2 }
h1.update(h2) { |k, v1, v2| v1 + v2 }
# => {:a=>3, :b=>3} 
```

请注意，这是一个就地更改；您实际上是在修改*h1*中的值。如果您想返回包含合并值的新哈希而不是覆盖*h1*，只需使用[Hash#merge](http://ruby-doc.org/core-2.0/Hash.html#method-i-merge)而不是 Hash#update。

# c++ - 包含 C++ 中字符串的文本文件中的字符串

> ID：15868969
> 
> 赞同：0
> 
> 时间：2013-04-07T23:12:51.467
> 
> 标签：c++, string, search, line, contain

这是我的代码的一部分

```
string word;
cin >> word;
string keyword;
while (file >> keyword && keyword != word){} 
```

这会在文件中搜索单词，如果找到该单词（关键字），则稍后会从那里开始一个字符串。目前它运行良好。我的问题是当线路

```
"Julia","2 Om.","KA","1 Om. 4:2" 
```

如果我输入单词 Julia，我找不到它并将其用于我的目的（仅供参考，我正在数它）。如果我搜索“Julia”，它会起作用，”2 因为这是空间的来源。

我想知道如何换行

```
while (file >> keyword && keyword != word){} 
```

所以我可以看到文本/字符串何时包含该字符串，因为目前它只有在我完美输入整个字符串时才找到并接受它。

编辑：到目前为止，我发现的只是 strstr、strtok、strcmp。但是这些更适合 printf 而不是 cout。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:17:36.980

您可以使用 std::string 中的方法，例如`find`.

```
#include <string>
#include <iostream>
// ...
std::string keyword;
std::string word;

getline(file, keyword);
do
{
    std::cin >> word;
}
while (keyword.find(word) == std::string::npos); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T23:21:54.360

问题是您正在提取字符串，默认情况下将提取到下一个空格。所以在第一次迭代中，`keyword`是`"Julia","2`。如果要提取用逗号分隔的所有内容，我建议使用`std::getline`with`,`作为分隔符：

```
while (std::getline(file, keyword, ',')) 
```

这将查看所有引用的字符串。现在您可以使用`std::string::find`来确定输入`word`是否在该引用字符串中找到：

```
while (std::getline(file, keyword, ',') &&
       keyword.find(word) == std::string::npos) 
```

现在这将遍历每个引用的字符串，直到它到达包含`word`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T23:17:51.833

使用 istream 的这种方法来获取整行而不是单个“单词”：

[http://www.cplusplus.com/reference/istream/istream/getline/](http://www.cplusplus.com/reference/istream/istream/getline/)

然后使用 strstr，在字符串（文件的行）中查找字符串（如 Julia）的位置：

[http://www.cplusplus.com/reference/cstring/strstr/](http://www.cplusplus.com/reference/cstring/strstr/)

# c# - 如何测试给定的功能代码单元（C#）是否不会创建/写入任何文件到磁盘？

> ID：15868970
> 
> 赞同：5
> 
> 时间：2013-04-07T23:13:01.360
> 
> 标签：c#, .net, unit-testing

想象一下，有一个关键任务流程将用于处理敏感信息（想想信用卡、社会保障、患者记录等）的企业。我认为这个单元理想情况下应该做它必须做的任何事情，这意味着它不会故意将文件写入包含敏感信息的磁盘。这里的想法是，如果运行此过程的计算机受到威胁，则不会泄露任何敏感信息，至少不会通过文件泄露。

比如说，如果被测单元试图将**任何**文件写入磁盘，那么可以采取哪些方法来提出一个将**失败的单元测试？**

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T23:28:36.570

有 FileSystemWatcher ( [http://www.c-sharpcorner.com/uploadfile/puranindia/filesystemwatcher-in-C-Sharp/](http://www.c-sharpcorner.com/uploadfile/puranindia/filesystemwatcher-in-C-Sharp/) ) 但是这需要你知道一个特定的目录。在您的情况下，这可能不是很有帮助，因为该程序可以在任何地方将任何内容写入磁盘。这引入了一个独特的问题。但是，我还从 Microsoft 找到了一个叫做 Detours 的东西。这似乎拦截了所有本机 win32 api 调用。 [http://research.microsoft.com/en-us/projects/detours/](http://research.microsoft.com/en-us/projects/detours/) 这个问题是它很难测试，将它集成到单元测试中将是一个挑战。

当您必须将您的软件视为“不受信任”，即您需要证明它没有做某事时，测试就变成了一项复杂的任务，需要您在非常受控的环境中运行它们。当连接到 Win32 API 时，您将被需要快速处理的 API 调用所淹没。这可能会导致意外的副作用，因为应用程序没有在真正的本地环境中运行。

我对您的建议（多年来一直按照 FDA 的严格标准为制药自动化进行软件测试）是创建一个受控环境，例如一个具有已知起始状态的虚拟机。这可以通过从不实际将 vmdk 更改保存到磁盘来实现。您必须拍摄文件系统的快照。为此，您可以编写一个 C# 应用程序来枚举虚拟驱动器上的所有文件，获取它们的大小、一些时间戳，甚至可能是文件的哈希值。这可能很耗时，因此您可能希望（或能够）跳过散列。创建某种报告，最简单的方法是将它们放入 CSV 或 XML 导出中。然后，您在正常情况下运行您的软件一段时间。完成后，您将再次运行文件系统分析并比较结果。有一些很好的应用程序可以比较文件内容（如 WinMerge）。拍摄这些快照时，最好的方法是将 vmdk 作为驱动器安装在主机操作系统中。这将绕过来宾操作系统可能具有的任何文件锁定。

这种方法耗时但相当彻底。如果您不需要这种深度的东西，您可以使用 Process Monitor 之类的东西并将输出写入文件并针对该文件运行报告。然而，在我的工作中，我必须证明 Process Monitor 在我可以使用它之前显示所有 IO，这可能与我上面提到的方法一样难。

只是我的2美分。

**更新：**

我一直在考虑，如果您从代码中删除对 System.IO 的所有引用，您可能能够获得相当可靠的结果。编写一个库来包装 System.IO，该库要么不实现 write 方法，要么只实现一个也写入日志文件的方法。在这种情况下，您只需验证每次使用您的库发生写入时，它都会被记录。然后使用反射验证您没有在这个新包装库之外引用 System.IO。然后，您的测试可以简单地查看此日志文件，以确保仅发生批准的写入。您可以使用 SQL 数据库而不是平面日志文件来帮助避免篡改或污染结果的情况。这应该比尝试像我上面描述的那样编写虚拟机设置脚本更容易验证。这当然，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T23:39:15.160

第一个选项：
也许您可以使用代码访问安全性，但“拒绝”在 .NET 4 中已过时（但应该在以前的版本中工作）：

```
[FileIOPermission(SecurityAction.Deny)]
public class MyClass 
{
  ...
} 
```

[您可以使用NetFx40_LegacySecurityPolicy](http://msdn.microsoft.com/en-us/library/dd409253%28v=vs.100%29.aspx)在 .NET 4 中重新激活此行为

第二种选择：
降低权限级别也可能有效，因为我知道下载的应用程序无法在磁盘上写入，必须使用特殊的存储区域。

第三个选项：
删除对 System.IO 的任何引用并替换为您的代码必须用于将数据写入磁盘的接口。
然后编写一个使用 System.IO 的实现（在一个单独的项目中）
在 nunit 测试中，模拟这个接口并在调用方法 id 时抛出异常。

问题是确保任何开发人员都不会再调用 System.IO。您可以尝试通过使用 FxCop（或其他类似工具）执行编码规则来做到这一点**

# java - 如何在 onResume() 方法中将 imageButtons 设置为 VISIBLE？

> ID：15868971
> 
> 赞同：0
> 
> 时间：2013-04-07T23:13:07.293
> 
> 标签：java, android

我有一个包含一些 imageButtons 的活动。单击它们后，我使用 setVisible(View.INVISIBLE); 让他们离开。现在，当用户输入正确答案时，会弹出一个带有一些信息和确定按钮的弹出屏幕。当弹出窗口关闭时，我需要将所有图像按钮设置为不可见。我尝试了一些方法：

```
private void removeImages(){
        b1.setVisibility(View.INVISIBLE);
        b2.setVisibility(View.INVISIBLE);
        b3.setVisibility(View.INVISIBLE);
        b4.setVisibility(View.INVISIBLE);
        b5.setVisibility(View.INVISIBLE);
        b6.setVisibility(View.INVISIBLE);
        b7.setVisibility(View.INVISIBLE);
} 
```

然后调用它 onResume：

```
@Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        removeImages();

    } 
```

但它不起作用，一旦我开始该活动，它就会删除我所有的 imageButtons。在我的弹出窗口关闭后，在我按下该弹出窗口上的 OK 按钮后，如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:03:47.210

根据[Activity Lifecycle](http://developer.android.com/images/activity_lifecycle.png0)，在前台`onResume()`之前调用。`Actviivty`你有几个不同的选择。您可以`startActviityForResult()`在单击 an`ImageButton`并检查该值`onActivityResult()`以设置`Views`您希望的方式时使用。或者你可以保存一个值`SharedPreferences`来告诉`Activity`哪个`Views`设置不可见/可见`onResume()`

# php - 我应该使用 ajax 来更新聊天客户端中的消息吗？

> ID：15868975
> 
> 赞同：0
> 
> 时间：2013-04-07T23:13:11.300
> 
> 标签：php, javascript, ajax

我正在编写一个简单的聊天客户端（完全用于学习目的）。我的 android 手机将消息发送到远程 MySQL 数据库，我正在让浏览器显示任何新的传入消息。

我目前的方法是使用 javascript：它每 5 秒调用一次函数，然后调用 php 查询新消息并将其发送回浏览器。

我没有 ajax 经验，但我听说当网页中的数据必须不断更改而不必刷新页面时，这很好，这符合我的情况。

我的问题是，这听起来像是我应该使用 ajax 的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T23:36:34.480

是的，ajax 是要走的路。但是，您的建议（每 5 秒检查一次消息）会产生大量请求和带宽。你应该研究一下 comet，它仍然是 ajax，但以不同的方式使用它。

Comet本质上是这样的：客户端向服务器发送请求。服务器上的 php 文件每隔几秒就会循环检查一条消息。当服务器找到一条消息时，它`echo`就是消息，但它不会关闭连接。当另一条消息到达时，它`echo`会再次发送，但不会关闭连接。这允许它只需要 1 个请求而不是数百个请求。见[http://www.zeitoun.net/articles/comet_and_php/start](http://www.zeitoun.net/articles/comet_and_php/start)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:36:02.920

我建议你选择 ajax 或 websockets……如果你要使用 websocket，请学习 node.js……它有很多很酷的功能，因为它是基于 Google Javascript V8 引擎构建的平台

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-20T18:40:00.047

[http://www.zeitoun.net/articles/comet_and_php/start](http://www.zeitoun.net/articles/comet_and_php/start)

看看这个页面，你会知道一切......;）

# python - 处理 Celery Task 代码中的错误的推荐方法是什么？

> ID：15868978
> 
> 赞同：1
> 
> 时间：2013-04-07T23:13:24.290
> 
> 标签：python, django, rabbitmq, celery, django-celery

我一直在寻找几天来找到一种处理芹菜任务中错误的事实上的方法。

在 Celery 文档中，我们确实了解了[由于失败而重新绑定任务](http://docs.celeryproject.org/en/latest/faq.html#faq-acks-late-vs-retry)。

> 重要的是要注意，worker 不会崩溃，如果发生崩溃，通常是一个不可恢复的错误，需要人工干预（worker 或任务代码中的错误）。

...

> 因此，对 Python 错误使用重试，如果您的任务是幂等的，则在需要该级别的可靠性时将其与 acks_late 结合使用。

但是，如果我的任务由于逻辑错误而出现错误，那么盲目重试将无法解决问题。

在其他分布式系统中，我使用 a`poison queue`来存储消息，然后在修复错误后重新处理。用于路由的 Celery 文档非常强大，让我相信可以使用 Celery 手动完成类似的方法。

在 Celery 中是否有推荐的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T05:46:17.920

从文档：

> retry() 可用于重新执行任务，例如在发生**可恢复错误**时。

I 这是逻辑故障，则不是可恢复的错误（如网络连接问题）。重试可能只会让事情变得更糟。

话虽如此，您可以传递`routing_key="task.poisoned"`给 retry() 调用，以确保所有重试的任务都放在一个特殊的队列中（在本例中为“task.poisoned”，但它可以是任何东西），您没有绑定任何工作人员. 这将有效地将该任务停在边缘，直到您修复错误然后手动启动工作人员以清除该队列。

# javascript - Backbone.js - 如何从集合中获取对象字面量数组？

> ID：15868979
> 
> 赞同：12
> 
> 时间：2013-04-07T23:13:24.637
> 
> 标签：javascript, backbone.js, backbone.js-collections

我正在尝试使一组对象文字与服务器数据保持同步。这些对象通过backbone.googlemaps 扩展被放置在谷歌地图上。

我有一个收藏：

`var LocationList = Backbone.Collection.extend({ model: Location, url: '/locations' })`

如何从该`LocationList`集合中获取一组对象文字？我的目标是这样的：

`[{name: "Home", address: "123 Pleasant St"}, {name: "Work", address: "123 Unpleasant St"}]`

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-08T00:00:52.990

您正在寻找`.toJSON()`收集的方法，[请参见此处](http://backbonejs.org/#Collection-toJSON)：

```
var locations = new LocationList();

locations.toJSON(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T00:01:39.707

使用 underscore.js pluck 方法：[http ://underscorejs.org/#pluck](http://underscorejs.org/#pluck)

# php - 创建一个新页面并使用 PHP 向其中添加内容

> ID：15868981
> 
> 赞同：3
> 
> 时间：2013-04-07T23:13:49.467
> 
> 标签：php

这将很难解释，所以如果有什么让您感到困惑，请向我澄清。

所以假设我在`createpage.php`. 在此页面中，我有以下任务。

1.  通过 PHP 使用 PHP 创建一个新页面（文件）`$file = fopen($pagename . '.php', "x")`。

2.  将预制内容添加到这个新页面。

我向新页面添加新内容的方法是将 HTML 内容代码存储到一个名为`$newpagecontent`. 然后，我简单地使用`fwrite($file, $newpagecontent)`.

但问题是，您不能在不破坏双引号的情况下将整个 HTML/PHP 文件存储到 $newpagecontent 中。例如，`$newpagecontent="echo("hello!")"`。

所以问题是，有没有更好的方法将 HTML 内容添加到新创建的页面中？或者有没有办法在不破坏语法的情况下将 HTML 代码存储到变量中？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:35:23.230

如果您只想要包含 HTML/PHP 代码的其他文件的内容，请尝试`file_get_contents`读取内容并将其存储在变量中。有关详细信息，请参阅此函数的[文档](http://php.net/manual/en/function.file-get-contents.php)。

# mongodb - NoSQL 数据库的 URL 缩短？

> ID：15868988
> 
> 赞同：1
> 
> 时间：2013-04-07T23:14:55.277
> 
> 标签：mongodb, url-shortener, nosql

对于传统数据库而言，编写 URL 缩短器似乎相当简单，但有几个值得注意的例外：

```
def save_new_url(request):
    url = StoredUrl(url=request.POST['url'])
    url.save()

    url.short_link = base62(url.id)
    url.save()

    return direct_to_template('mytemplate.html', { 'link': url.short_link }) 
```

上面示例的唯一问题是缺乏对已知异常的支持，这些 URL 应该保留给系统/站点使用，例如`account`或`admin`.

那么，如何为像 MongoDB 这样的 NoSQL 数据库提供 URL 缩短服务，它使用十六进制值作为其“行”的键？似乎大多数 URL 缩短器都致力于将数字缩短`[a-zA-Z0-9]`为字符集。由于我没有可用的数字，如何缩短存储在 MongoDB 表中的 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T02:50:45.080

首先，您可以通过多种方式`_id`在 MongoDB 中使用该字段。有关一些想法，请参阅我对[这个 SO 问题的回答。](https://stackoverflow.com/questions/15865382/change-size-of-objectid/15870276#15870276)

然后，如果我理解正确，您的问题与 SQL DB 具有自动增量计数器这一事实有关，这些计数器是方便的主键，而 NoSQL DB（如 MongoDB）则没有，这就引发了一个问题，即您应该使用什么作为生成新的短 URL 的基础。

如果您想[在 MongoDB 中生成自动递增的 ID，](http://docs.mongodb.org/manual/tutorial/create-an-auto-incrementing-field/)有两种主要方法：乐观循环和维护单独的计数器集合/文档。在尝试了超过 1,000 个请求/秒的规模后，我会推荐基于`findAndModify`.

一个好的 URL 缩短器设计还包括随机化，在这种情况下，这意味着在不同的自动递增 ID 之间留下随机间隙。您可以通过在客户端上生成一个随机数并按该数字递增来使用它。

# c - if 语句中无法识别的变量

> ID：15868989
> 
> 赞同：0
> 
> 时间：2013-04-07T23:15:20.070
> 
> 标签：c

我的程序有点问题。在我的 IF 语句中，我的变量没有被识别。

```
for(i=1;i<10;i++){
    printf("%d:", i);

        for(j=0;pom[j]!='\0';j++){
                if(pom[j]==X) star++;
        }
    X++;
    printf("%d", star);
    printf("\n");
    star=0;
} 
```

变量 X`int X=0;`在此函数中定义。它应该是一个从 1 到 9 的数字，但它不会通过代码改变它的值，即使我`X++;`在我的 for 循环之后也是如此。

当我将它改造成我想要的间隔或任何数字时，这段代码运行得很好`if(pom[j]=='1') star++;`，`if(pom[j]=='2') star++;`所以我认为问题出在我的 if 语句语法中。有什么想法吗？感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:23:29.830

在您的*if*语句中，您将一个*char*（我假设 pom 是一个 char）与一个*int*进行比较。“1”的 ASCII 码是整数 49，而不是 1。你可以这样做：

```
if (pom[j] == (x + 48)) 
```

另一种方法是声明：

```
char X = '0'; 
```

阅读[ASCII 表](http://www.asciitable.com/)

# sql - 在 SQL 中添加标点符号

> ID：15868990
> 
> 赞同：1
> 
> 时间：2013-04-07T23:15:21.467
> 
> 标签：sql, database

我需要在表格中添加信息，但有标点符号。如何在不关闭语句的情况下添加这些？我正在使用**SQL SERVER 2012**

例子：

```
INSERT INTO Song (song_id, album_id, song_name, song_length_minutes, song_length_seconds)
VALUES ( 500, 200, **'Doin' it Right'**, 3, 42) 
```

如果您输入“Doin”之后的撇号，它将关闭歌曲名称。那么如何在不关闭语句的情况下添加它呢？

另外，打发时间的最佳方式是什么？在这个例子中，两者都是分开的，所以我认为它只是一个数值数据类型？那是对的吗？

例子：

```
CREATE TABLE Song (
song_length_minutes DECIMAL (5) NOT NULL,
song_length_seconds DECIMAL (5) NOT NULL ); 
```

这样做可以吗？然后在 INSERT 语句中做如上所示？如果您提取该信息，您会只使用 UI 逻辑吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:18:12.440

以下链接应该可以帮助您：-

[http://www.orafaq.com/faq/how_does_one_escape_special_characters_when_writing_sql_queries](http://www.orafaq.com/faq/how_does_one_escape_special_characters_when_writing_sql_queries)

我建议阅读这篇文章，因为它也包含有关双转义序列的信息。

如页面所示： -

```
SELECT 'Frank''s Oracle site' AS text FROM DUAL; 
```

您可以将时间存储为简单的秒数，然后使用您的 UI 逻辑将其转换为您想要显示的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T23:18:08.213

```
VALUES ( 500, 200, 'Doin'' it Right', 3, 42) 
```

您需要通过加倍单引号来转义引号。

使用 Sql 参数将为您执行此操作

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-07T23:18:15.327

不确定这是否是您的意思，您是在谈论转义特殊字符吗？

```
INSERT INTO Song (song_id, album_id, song_name, song_length_minutes, song_length_seconds)
VALUES ( 500, 200, **'Doin'' it Right'**, 3, 42); 
```

您使用什么语言来运行语句？

您可能应该将时间存储在[时间](http://msdn.microsoft.com/en-us/library/bb677243.aspx)字段中，从数据库到代码来回移动会容易得多。

# python - pygame中的动画

> ID：15868992
> 
> 赞同：1
> 
> 时间：2013-04-07T23:15:33.217
> 
> 标签：python, animation, pygame

这个程序的目标是让一个绿色圆圈在屏幕上循环上下跳动。我已经让它下降并再次备份，但不是让它再次下降。

```
import pygame, sys, time, random
from pygame.locals import *
from time import *

pygame.init()
windowSurface = pygame.display.set_mode((500, 400), 0, 32)
pygame.display.set_caption("Bounce")

BLACK = (0, 0, 0)
WHITE = (255, 255, 255)
RED = (255, 0, 0)
GREEN = (0, 255, 0)
BLUE = (0, 0, 255)

info = pygame.display.Info()
sw = info.current_w
sh = info.current_h
y= 0
yy= sh

while True:
    windowSurface.fill(BLACK)
    pygame.draw.circle(windowSurface, GREEN , (250,y), 13, 0)
    sleep(.006)
    y+= 1
    if y>sh:
        pygame.draw.circle(windowSurface, GREEN , (250,yy), 13, 0)
        sleep(.0001)
        yy +=-1
    if yy<-.00001:
        y=0
        y+= 1
        pygame.draw.circle(windowSurface, GREEN , (250,y), 13, 0)

    pygame.display.update()

    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:41:25.950

在您的`if yy < -.00001:`块中，我认为您正在尝试将状态重置为程序开始时的状态。如果是这种情况，您忘记设置`yy = sh`.

换句话说：

```
if yy<-.00001:
    y=0
    yy=sh   # <- add this line
    y+= 1
    pygame.draw.circle(windowSurface, GREEN , (250,y), 13, 0) 
```

不过总的来说，我同意半身人。这段代码太复杂了。我建议使用状态变量来记录球是向上还是向下移动，然后在循环中检查该变量并增加或减少位置。当你到达屏幕的另一端时，交换状态变量来改变球的方向。

编辑：试试这个：

```
import pygame, sys, time, random
from pygame.locals import *
from time import *

pygame.init()
windowSurface = pygame.display.set_mode((500, 400), 0, 32)
pygame.display.set_caption("Bounce")

BLACK = (0, 0, 0)
WHITE = (255, 255, 255)
RED = (255, 0, 0)
GREEN = (0, 255, 0)
BLUE = (0, 0, 255)

info = pygame.display.Info()
sw = info.current_w
sh = info.current_h
y = 0

# Initial direction is down
direction = 1

while True:
    windowSurface.fill(BLACK)
    pygame.draw.circle(windowSurface, GREEN , (250,y), 13, 0)
    #print "Drawing at 250,", y
    sleep(.006)
    y += direction
    if y >= sh:
        # Changes the direction from down to up
        direction = -1
    elif y <= 0:
        # Changes the direction from up to down
        direction = 1

    pygame.display.update()

    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit() 
```

*注意：希望这对您有用。我没有安装 pygame，所以我只在 pygame 内容被注释掉并且`print`调用被替换而不是绘制命令的情况下运行它。无论如何，它对我有用。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T23:57:08.253

对于您尝试制作的动画，您的代码似乎太复杂了。

您正在寻找模拟“弹跳效果”的东西可能是 sin 函数（因为它在 -1 和 1 之间振荡）：

```
t = 0
speed = 0.01
maxHeight = 200
while True:
    windowSurface.fill(BLACK)
    pygame.draw.circle(windowSurface, GREEN , (250,y), 13, 0)
    sleep(.006)
    t += 1
    y = int( ( sin(t*speed) + 1) * maxHeight / 2 )

    pygame.draw.circle(windowSurface, GREEN , (250, y , 13, 0)

    pygame.display.update()

    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit() 
```

不要忘记放在`from math import sin`代码的顶部。

如果你想实现一些逼真的效果，你可能应该使用球的速度和加速度，而不是使用“sin”函数来模拟弹跳效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-06T22:46:17.687

使用一个while循环让你的球反弹。它应该一遍又一遍地循环代码。当它没有第二次下降时会发生什么？它会抛出错误吗？它只是冻结吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-20T19:41:34.213

您可以添加一个简单的解决方法是计数器变量，因此每次您的球改变方向时，`variable` `+=1`在经过一定数量的更改后程序停止。假设这就是你想要它做的。

# php - 如何在 Google Maps API 上检查地址是否在区域内

> ID：15868995
> 
> 赞同：4
> 
> 时间：2013-04-07T23:15:53.673
> 
> 标签：php, google-maps-api-3, region

我有一个地址字符串，例如“12 Swiss Ave, Gonville, Wanganui, New Zealand”

鉴于此地址，我需要确定该地址是在新西兰的北岛还是南岛之内。

如果我将地址传递给谷歌地图 api，我得到的数据如下，不幸的是，虽然它没有告诉我它在哪个岛。那么，我该如何检查呢？

```
{
    "results": [
        {
            "address_components": [
                {
                    "long_name": "12",
                    "short_name": "12",
                    "types": [
                        "street_number"
                    ]
                },
                {
                    "long_name": "Swiss Avenue",
                    "short_name": "Swiss Ave",
                    "types": [
                        "route"
                    ]
                },
                {
                    "long_name": "Gonville",
                    "short_name": "Gonville",
                    "types": [
                        "sublocality",
                        "political"
                    ]
                },
                {
                    "long_name": "Wanganui",
                    "short_name": "Wanganui",
                    "types": [
                        "locality",
                        "political"
                    ]
                },
                {
                    "long_name": "Manawatu-Wanganui",
                    "short_name": "Manawatu-Wanganui",
                    "types": [
                        "administrative_area_level_1",
                        "political"
                    ]
                },
                {
                    "long_name": "New Zealand",
                    "short_name": "NZ",
                    "types": [
                        "country",
                        "political"
                    ]
                },
                {
                    "long_name": "4501",
                    "short_name": "4501",
                    "types": [
                        "postal_code"
                    ]
                }
            ],
            "formatted_address": "12 Swiss Avenue, Gonville, Wanganui 4501, New Zealand",
            "geometry": {
                "location": {
                    "lat": -39.9444245,
                    "lng": 175.0239575
                },
                "location_type": "ROOFTOP",
                "viewport": {
                    "northeast": {
                        "lat": -39.9430755197085,
                        "lng": 175.0253064802915
                    },
                    "southwest": {
                        "lat": -39.9457734802915,
                        "lng": 175.0226085197085
                    }
                }
            },
            "types": [
                "street_address"
            ]
        }
    ],
    "status": "OK"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:16:11.453

一种选择是获取两个岛屿的多边形，并对地理位置进行多边形分析。

[使用由 KML](http://www.geocodezip.com/geoxml3_test/v3_collection-map2e.html)和[geoxml3定义的多边形的示例](http://code.google.com/p/geoxml3/)

[概念证明](http://www.geocodezip.com/geoxml3_test/v3_geocodePointInPolygonKmz_linkto.html?filename=http://www.geocodezip.com/geoxml3_test/kmz/NZL_adm0_separateNSIslands.kmz)（使用 geoxml3 和来自 gadm.org 的修改后的 KML）

============ 使用融合表的旧选项，不再有效 =============

[使用 FusionTables 的示例](http://www.geocodezip.com/v3_collection-map2e_FT.html)（**注意：**不再有效，Fusion Layers 在 2019 年 12 月被拒绝）

[概念证明](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_NewZealand.html)（使用融合表中的自然地球数据集和“州到岛”地图）（**注意：**也不再有效）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-26T07:40:40.927

很好地使用谷歌地图的API ..

[您可以从说Places Autocomplete](https://developers.google.com/maps/documentation/javascript/places-autocomplete)获得新西兰北岛的 placeId ，即`ChIJhXgO3F4Uam0RdyMcnMutKMo`

然后使用 geocode 库获取边界，并使用[contains 函数](https://developers.google.com/maps/documentation/javascript/reference/coordinates#LatLngBounds-Methods)测试其他 lat/lng 是否在这些边界内。

```
const geocode = async placeId => {
  const geocoder = new window.google.maps.Geocoder();
  return new Promise((resolve, reject) => {
    geocoder.geocode(
      {
        placeId
      },
      (results, status) => {
        resolve(results[0]);
      }
    );
  });
};

const placeDetails = await geocode('ChIJhXgO3F4Uam0RdyMcnMutKMo');
const somePlace = getPlaceDetails(someOtherPlaceId);

const isInNorthIsland = placeDetails.geometry.bounds.contains(somePlace.geometry.location); 
```

# php - wordpress wp_insert_post 耗时太长

> ID：15868996
> 
> 赞同：1
> 
> 时间：2013-04-07T23:15:57.627
> 
> 标签：php, database, wordpress

我正在使用一个简单的 php 文件发布到我的 wordpress，到目前为止我有大约 900 个帖子，但我注意到发布所需的时间越来越长！有时它甚至会用完（30秒+）！这是我使用的代码。

```
 <?php
  require_once('./../wp-blog-header.php');
  require_once('./simple_html_dom.php');
  require_once('./../wp-admin/includes/taxonomy.php');

function postit($category,$date,$title,$content,$keys){
$cat=wp_create_category($category);
$post = array(
  'comment_status' => 'open',// 'closed' means no comments.
  'ping_status'    => 'open', // 'closed' means pingbacks or trackbacks turned off
  'post_author'    => '1', //The user ID number of the author.
  'post_category'  => array($cat), //post_category no longer exists, try wp_set_post_terms() for setting a post's categories
  'post_content'   => $content, //The full text of the post.
  'post_date'      => date('Y-m-d H:i:s',strtotime($date)), //The time post was made.
  'post_date_gmt'  => date('Y-m-d H:i:s',strtotime($date)), //The time post was made, in GMT.
  'post_status'    => 'publish', //Set the status of the new post.
  'post_title'     => $title, //The title of your post.
  'post_type'      => 'post', //You may want to insert a regular post, page, link, a menu item or some custom post type
  'tags_input'     => $keys,//For tags.
  'post_content_filtered' => '1',
  'filter' => '1'
);

remove_filter('content_save_pre', 'wp_filter_post_kses');
remove_filter('content_filtered_save_pre', 'wp_filter_post_kses');
$r=wp_insert_post( $post ,$wp_error);
add_filter('content_save_pre', 'wp_filter_post_kses');
add_filter('content_filtered_save_pre', 'wp_filter_post_kses');
return $r;
} 
```

当我在分析器中运行它时，

wp_create_category 运行 0.01 秒。剩下的代码 0.8 秒，而删除过滤器和 wp_insert_post 的部分需要剩下的执行时间。

有人有优化这个的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:32:36.637

找到解决方案。造成这种延迟的是**我的插件之一。**一旦我禁用了所有插件，延迟就是goan！

我认为一些插件向 wp_new_post 添加了一个过滤器/挂钩，并且该挂钩导致了这个延迟问题。

对于未来的谷歌人。**只需禁用所有插件**并尝试发布，如果问题是goan然后开始一一启用它们，直到找到导致此问题的插件。

感谢大家的评论和帮助

# custom-backend - 如何为我的 FatFractal 域授予其他用户云部署权限？

> ID：15868997
> 
> 赞同：2
> 
> 时间：2013-04-07T23:16:01.500
> 
> 标签：custom-backend

有没有办法在我的一个域上授予其他 FatFractal 用户云部署权限？域/应用程序在我的 FatFractal 帐户下注册，我的合作伙伴在尝试部署应用程序的更新版本时从他的 FF 本地运行时引擎收到 400 错误（权限被拒绝）。

此外，是否可以将部署权限的范围限制为特定域/应用程序组合，而不是整个域？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:32:42.537

如果您进入[FatFractal 控制台](https://system.fatfractal.com/console/application.html)，然后单击菜单中的“邀请”，您可以授予其他用户对域和应用程序的只读或读/写权限。

# ios - 如何从分组的 UITableView 的单元格中删除边框？

> ID：15868998
> 
> 赞同：1
> 
> 时间：2013-04-07T23:16:05.877
> 
> 标签：ios, objective-c, uiview, uitableview

![在此处输入图像描述](https://i.stack.imgur.com/dFGF5.png)

底部的白色小条纹真的脱离了设计，我似乎不知道如何去除它。

[这个](https://stackoverflow.com/questions/4202965/removing-cell-borders-from-a-section-of-grouped-style-uitableview)问题得到了很高的评价，说要这样做：

```
cell.backgroundView = [[[UIView alloc] initWithFrame:CGRectZero] autorelease]; 
```

但这也从我的背景中删除了灰色（用 设置`setBackgroundColor:`），所以它也不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T23:18:17.993

将此添加到您的`viewDidLoad:`以删除表格边框：

```
self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

我不太了解您的问题，但我建议您检查单元格背景视图的高度，就像测试将图像作为单元格背景视图并检查白线是否仍然存在：

```
cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"imageName.png"]]autorelease]; 
```

//-----

您提供的代码不起作用，因为您正在创建一个新的空白 UIView 并将其设置为单元格背景！正确的方法如下：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *CellIdentifier = @"ApplicationCell";

    UITableViewCell *cell = (UITableViewCell *)[self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

        UIView *myBackgroundView = [[UIView alloc] init];
        myBackgroundView.frame = cell.frame;
        myBackgroundView.backgroundColor = [UIColor greenColor]; <== DESIRED COLOR

        cell.backgroundView = myBackgroundView;

    }

    return cell;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T23:22:58.997

尝试一下

```
self.tableView.separatorStyle = UITableViewCellSeparatorStyleSingleLine; 
```

# jquery - jquery插件选项不读

> ID：15868999
> 
> 赞同：0
> 
> 时间：2013-04-07T23:16:13.847
> 
> 标签：jquery, jquery-plugins

我对 jquery 很陌生，我正在创建我的第一个插件，但遇到了问题。我能够让它正常工作，但是当我在我的函数中添加选项时，它似乎没有正确读取它。例如，我有**slideshowTransition**选项，但它似乎没有在我的**rotateImages**函数中读取它。我能够很好地将它输出到控制台，但不知道为什么它没有读取。请看下面的代码：

```
(function($){
 $.fn.imageRotator = function(config, slideshowSpeed) {

$.imageRotator = {
    defaults: {
    slideshowSpeed: '3000',
            slideshowTransition: '4000'
    }
};

settings = $.extend({}, $.imageRotator.defaults, config); 

//loop back to the top once rotateimages function is complete       
setInterval(rotateImages, settings.slideshowSpeed); 

function rotateImages(config){

var currentPhoto = $("#photo_slideshow .current");
var nextPhoto = currentPhoto.next();

//used to loop back to the top once the last image is finished
if(nextPhoto.length == 0){
    nextPhoto = $("#photo_slideshow div:first");
}

currentPhoto.removeClass('current').addClass('previous');

console.log(settings.slideshowSpeed);

//take what's next make it visible and move it on top
nextPhoto.css({ opacity: 0 }).addClass('current').animate({ opacity: 1.0 }, settings.slideshowTransition, 

    //callback function to drop photo down to the bottom of the z-index
    function(){

    currentPhoto.removeClass('previous');

    }
)
};
//end rotate images function

};

})(jQuery); 
```

任何帮助是极大的赞赏！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:12:43.567

根据我对您的问题的理解，您在调用带有参数的插件函数时遇到了问题，如果是这样，请查看此链接

```
[1]: http://jsfiddle.net/kDg3A/1/ 
```

我刚刚添加了代码供您参考。