# StackOverflow 问答 13975000-13975999

# reporting-services - 如果报告名称包含句点，则 Globals.ReportName 将被截断：解决方法？

> ID：13975000
> 
> 赞同：1
> 
> 时间：2012-12-20T15:05:39.157
> 
> 标签：reporting-services, ssrs-2008, built-in

在我的报告中，我在最后包含了一个单独的 tablix，其中包含对故障排除有用的数据。通常我包括报告名称、执行时间、用户 ID 和参数。

我的报告已编号，因此 RDL 文件可能被命名为“3.04 RMC Agenda.rdl”。当我使用 Globals!ReportName 内置字段来显示我的报告名称时，所有输出都是“3”。帮助！有解决办法吗？删除 RDL 文件名中的报告编号不是一种选择。

谢谢

SSRS 2008 R2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:45:40.430

这只是 BIDS 中的一个问题。部署到 SSRS 时，报告名称会完整显示。

# php - str_getcsv 的奇怪行为

> ID：13975007
> 
> 赞同：0
> 
> 时间：2012-12-20T15:05:54.160
> 
> 标签：php, string, csv

我有一个 csv 文件，其内容形式为：

```
INN code;Tekst;User id;Project_id;priority;Date
6658172497;мини тестик, выполни ,и закрой задание;255;1;4;2012-12-22    
6658228284;мини тестик, выполни и закрой задание;255;1;4;2012-12-22    
7806351504;мини тестик, выполни и закрой задание;255;1;4;2012-12-22    
7710077498;мини тестик, выполни ,и закрой задание;255;1;4;2012-12-22 
```

在我的本地 Windows 机器（php ver 5.4.7）上，`str_getcsv($row, ';')`它应该像它应该的那样工作并正确拆分行。但是，当我在运行 CentOS（php 版本 5.3.3）的测试机器上尝试相同的操作时，第二列 ( `мини тестик`) 的一部分被切断，只留下 ( `,выполни ,и закрой задание`)。如果在列数据前面放置一个拉丁字符，它只会截断该字符之前的部分。

找不到任何帮助来解释不同操作系统上的这种奇怪行为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:10:42.737

CSV 函数对设置的语言环境很敏感。
[设置您的语言环境](http://php.net/set_locale)以匹配文件的编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:12:34.813

你试过[`setlocale()`](http://php.net/manual/en/function.setlocale.php)吗？

另外，我认为这可能是由文本中的空格和逗号引起的。尝试用双引号将俄语部分括起来，或者试试[这个](http://php.net/manual/en/function.str-getcsv.php#109948).

希望对你有效。

# javascript - Javascript 使用拖放在 youtube 上上传视频

> ID：13975008
> 
> 赞同：3
> 
> 时间：2012-12-20T15:05:54.657
> 
> 标签：javascript, jquery, file-upload, drag-and-drop

我想把视频上传到 youtube 上。问题陈述是用户将视频拖放到我的应用程序上，当用户单击上传按钮时，视频会上传到 youtube。

我写了这段代码

```
$('#drop-files').bind('drop', function(e) {
    rc = count;
    var files = e.dataTransfer.files;
    //alert("files -"+files[0].path);
    count += files.length;
    $('#uploaded-holder').show();

    $.each(files, function(index, file) {
        console.log("aaaa : "+file);

        //alert("sarthi : "+file.name);
    if (!(files[index].type.match('image.*') || files[index].type.match('pdf.*') || files[index].type.match('video.*'))) {
            alert("ONLY IMAEG AND VIDEO")
            callModel();
        } else {
           // Start a new instance of FileReader*/
            var fileReader = new FileReader();

            var obj = {};
            // When the filereader loads initiate a function
            //alert("file "+file);
            fileReader.onload = (function(file) {

                var isVideo = 1;
                return function(e) {

                    // Push the data URI into an array
                    dataArray.push({
                        name : file.name,
                        value : this.result
                    });

                    // Move each image 40 more pixels across
                    //z = z+40;

                    var image;
                    var video;

                    if(file.type.match('image.*'))
                        image = this.result;
                    else if(file.type.match('pdf.*'))
                        image = "assets/img/pdf.png";
                    else if(file.type.match('video.*')){
                        video = this.result;
                    }

                    // Just some grammatical adjustments
                    /*if(dataArray.length == 1) {
                    $('#upload-button span').html("1 file to be uploaded");
                } else {
                    $('#upload-button span').html(dataArray.length+" files to be uploaded");
                }*/

                    if(file.type.match('image.*')) {
                        //alert("1");

                        var html = tmpl(template, {
                            image:image,
                            loadingbar:"loadingbar"+rc,
                            loadper:"loadper"+rc,
                            type:"type"+rc,
                            dd:"dd"+rc,
                            ed:"ed"+rc,
                            grey:"greey"+rc,
                            upbtn: "upbtn"+rc,
                            dderrorid: "dderr"+rc,
                            ederrorid: "ederr"+rc
                        });
                        obj = {
                            htmlstring:html,
                            type:"type"+rc,
                            dd:"dd"+rc,
                            ed:"ed"+rc,
                            upbtn: "upbtn"+rc,
                            loadbar: "loadingbar"+rc,
                            loadper:"loadper"+rc,
                            grey:"greey"+rc,
                            file:file,
                            flag:0,
                            dderrorid: "dderr"+rc,
                            ederrorid: "ederr"+rc
                        }
                        $('#dropped-files').append(html);

                        var now = new Date();
                        var today =  (now.getMonth() + 1) + '-' + now.getDate() + '-' + now.getFullYear();
                        $('#'+obj.ed).val(today);

                        uploadObject[rc] = obj;
                        $("#"+obj.upbtn).click(function(e){
                            if(!($("#uid").val() == "")){
                                $('.error').hide();
                                if(!($("#"+obj.dd).val() == "")){
                                    $('#'+obj.dderrorid + " span").hide();
                                    if(!($("#"+obj.ed).val() == "")){
                                        $('#'+obj.ederrorid + " span").hide();
                                        upload(e);
                                    } else {
                                        $('#'+obj.ederrorid + " span").show();
                                    }
                                } else {
                                    $('#'+obj.dderrorid + " span").show();
                                }
                            } else {
                                $('.error').show();
                            }
                        });

                        $("#"+obj.grey).click(function(e){
                            removeFiles(e);
                        });

                        rc++;
                    } 
                    else{
                        if($('#dropped-files > .video').length < maxFiles) {
                            //alert("2");

                            var html1 = tmpl(vtemplate, {
                                video:video,
                                loadingbar:"loadingbar"+rc,
                                loadper:"loadper"+rc,
                                type:"type"+rc,
                                dd:"dd"+rc,
                                ed:"ed"+rc,
                                grey:"greey"+rc,
                                upbtn: "upbtn"+rc,
                                dderrorid: "dderr"+rc,
                                ederrorid: "ederr"+rc
                            });
                            obj = {
                                htmlstring:html1,
                                type:"type"+rc,
                                dd:"dd"+rc,
                                ed:"ed"+rc,
                                upbtn: "upbtn"+rc,
                                loadbar: "loadingbar"+rc,
                                loadper:"loadper"+rc,
                                grey:"greey"+rc,
                                file:file,
                                flag:0,
                                dderrorid: "dderr"+rc,
                                ederrorid: "ederr"+rc
                            }
                            //$('#dropped-files').append(html1);

                            now = new Date();
                            today =  (now.getMonth() + 1) + '-' + now.getDate() + '-' + now.getFullYear();
                            $('#'+obj.ed).val(today);

                            uploadObject[rc] = obj;
                            $("#"+obj.upbtn).click(function(e){
                                if(!($("#uid").val() == "")){
                                    $('.error').hide();
                                    if(!($("#"+obj.dd).val() == "")){
                                        $('#'+obj.dderrorid + " span").hide();
                                        if(!($("#"+obj.ed).val() == "")){
                                            $('#'+obj.ederrorid + " span").hide();
                                            $("input[type='file']")
                                            .prop("files", e.originalEvent.dataTransfer.files)  // put files into element
                                            .closest("form")
                                            .submit(); 
                                        } else {
                                            $('#'+obj.ederrorid + " span").show();
                                        }
                                    } else {
                                        $('#'+obj.dderrorid + " span").show();
                                    }
                                } else {
                                    $('.error').show();
                                }
                            });

                            $("#"+obj.grey).click(function(e){
                                removeFiles(e);
                            });

                            rc++;
                        } 
                        $('#dropped-files').append(html1);
                    }
                };
            })(files[index]);
            fileReader.readAsDataURL(file);
        }
    });
}); 
```

我无法获得在我的应用程序上放置的文件的绝对路径。

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:22:07.350

您无法在服务器端访问客户端（本地地址）。这可能会帮助你！

[将上传文件的路径从 HTML5 拖放到输入字段](https://stackoverflow.com/questions/10500362/passing-path-to-uploaded-file-from-html5-drag-drop-to-input-field) 和 [http://www.whatwg.org/specs/web-apps/current-work/multipage/dnd.html](http://www.whatwg.org/specs/web-apps/current-work/multipage/dnd.html)

# jquery - 如果直接单击文本，可单击的 Jquery Div 返回“未定义”

> ID：13975009
> 
> 赞同：1
> 
> 时间：2012-12-20T15:06:00.013
> 
> 标签：jquery, html, undefined, clickable

提前感谢您的帮助。我正在使用以下代码使整个 li “可点击”。**问题是，如果您单击链接本身以外的任何实际文本（红色、蓝色和绿色统计信息），它会返回“未定义”。在此处查看实时链接：`http://174.122.31.60/.`**

```
$(".available-properties li").click(function(){
 window.location=$(this).find("a").attr("href");
 return false; 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:08:41.193

试试这个代码：

```
$(".available-properties li").click(function(){
 window.location=$(this).parent().parent().find("a").attr("href");
 return false;
}); 
```

[例子](http://jsfiddle.net/xGZNS/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:12:52.017

这将起作用。使用 > click 功能将仅适用于父级而不是子级 ul 中的 li。

```
$(".available-properties > li").click(function(){
    window.location=$(this).find("a").attr("href");
    return false;
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:13:05.927

只需更改此：

```
$(".available-properties li").click 
```

对此：

```
$(".available-properties > li").click 
```

这样，您只选择 available-properties UL 元素的子 LI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T15:17:07.637

如果您不过滤掉“a”，您将获得竞争条件：

```
 $('.available-properties li').click(
        function(e) {
            if(!($(e.target).is('a'))) {
                window.location = $(this).children("a:first").attr("href");
            }
        }
    ); 
```

# python - 嗅探器找不到 DJANGO_SETTINGS_MODULE

> ID：13975014
> 
> 赞同：4
> 
> 时间：2012-12-20T15:06:07.527
> 
> 标签：python, django, tdd, automated-tests, sniffer

我正在尝试在开发过程中进行更改后自动重新运行测试。在四处搜寻后，[嗅探器](http://pypi.python.org/pypi/sniffer)似乎没问题。但是，如果我运行它，我的测试会因以下错误而失败：

> `ERROR: Failure: ImportError (Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined.)`

如果我手动运行它们，它们就会通过。你知道为什么嗅探器不起作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-25T09:30:50.350

您`scent.py`应该可以使用以下内容：

```
from subprocess import call
from sniffer.api import runnable

@runnable
def execute_tests(*args):
    fn = [ 'python', 'manage.py', 'test' ]
    fn += args[1:]
    return call(fn) == 0 
```

然后您可以将其称为`sniffer -x appName`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T02:55:57.277

您可以`sniffer`通过`scent.py`在与`manage.py`.

这是我的样子：

```
import os
os.environ["DJANGO_SETTINGS_MODULE"] = 'myapp.settings' 
```

这将使您尽可能`sniffer`阅读您的设置，但随后您会遇到其他问题 - 基本上，`sniffer`只需使用 运行您的测试`nose`，这与安装`manage.py test`时所做的不同`django-nose`。

有人知道Django还需要做什么`scent.py`吗？`snigger`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T16:15:42.780

试图猜测问题可能出在哪里：您似乎需要明确设置 settings.py 文件的位置。

如果您正在从[subprocess](http://docs.python.org/2/library/subprocess.html)调用运行测试，则可以使用以下命令：

```
call(["django-admin.py", "test --settings=your_project.settings"]) 
```

否则，您可以使用以下命令设置环境变量：

```
import os
os.environ['DJANGO_SETTINGS_MODULE'] = 'your_project.settings' 
```

（将 your_project 更改为您的 django 项目的名称）

如果您正在运行“./manage.py tests”之类的命令，您可以在 manage.py 的开头添加前几行（还有其他方法，但我需要查看代码以提供更精确的解决方案）

# c++ - 为什么在调用 pthread_cond_broadcast 后调用 pthread_cond_wait 不立即返回？

> ID：13975016
> 
> 赞同：0
> 
> 时间：2012-12-20T15:06:22.520
> 
> 标签：c++, multithreading

标题基本上不言自明。在休眠 5 秒并解锁互斥锁后，它终于从 pthread_cond_wait 返回。似乎 pthread_cond_wait 知道它无法获取互斥锁，所以它等待，解锁互斥锁后，pthread_cond_wait 获取互斥锁，然后继续..是这样吗？

```
 #include <pthread.h>

pthread_mutex_t alarm_mutex = PTHREAD_MUTEX_INITIALIZER;
pthread_cond_t alarm_cond = PTHREAD_COND_INITIALIZER;
int s_i = 0;

void* alarm_thread ( void* arg )
{
    pthread_mutex_lock ( &alarm_mutex );

    while ( 1 )
    {
        while ( s_i == 1 )
        {
            pthread_cond_wait ( &alarm_cond, &alarm_mutex );
            printf("I am here");
        }
    }
}

int main ( int argc, char* argv[] )
{
    pthread_t thread;
    pthread_create ( &thread, NULL, alarm_thread, NULL );
    pthread_mutex_lock ( &alarm_mutex );
    s_i = 1;
    pthread_cond_broadcast ( &alarm_cond );
    sleep ( 5 );
    pthread_mutex_unlock ( &alarm_mutex );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:21:01.953

该`pthread_cond_wait`函数在等待时释放互斥锁，然后返回再次获取的互斥锁。如果另一个线程持有互斥锁，则该线程无法恢复执行，直到互斥锁被释放。如果这给您带来了问题，那么您使用的条件变量不正确。

线程等待时需要释放互斥锁，否则其他线程无法获取。在返回之前需要重新获取互斥锁——如果没有其他原因，则允许线程检查它是否需要`pthread_cond_wait`再次调用。

# sql - 从 JDBC SQL SELECT 中省略列是过早的优化吗？

> ID：13975017
> 
> 赞同：0
> 
> 时间：2012-12-20T15:06:24.173
> 
> 标签：sql, select, jdbc, prepared-statement, jpql

这是与问题[here](https://stackoverflow.com/questions/3180375/select-vs-select-column)相关的问题，我的问题是从Java应用程序的角度来看的。如果我有一个 Web 服务根据允许获取的客户端从数据库返回数据，如何以最佳方式查询数据库？

*   在 Java 代码中使用最大的列集和过滤值进行选择是否有意义？
*   还是构造许多 SQL PreparedStatements/NativeQueries 更好，每个都只要求真正返回的列？
*   构建仅由连接表而不是选定列确定的基本查询是一个很好的折衷方案（这些就是全部）？

什么对数据库和可维护的应用程序都有好处？我目前所知道的：

*   大多数 JDBC 驱动程序/SQL 数据库优化 SQL 查询并缓存优化版本以供将来请求。必须分析和比较每个新查询，必须找到或创建优化版本......并保存在内存中......在最坏的情况下，每个新变体都会产生新的优化版本。这些简单选择的优化版本是否相同？
    `select name, surname from person`
    `select name from person`
*   编写许多选择的变体是丑陋的——每个变体都必须经过测试、维护、快速......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:32:50.433

不，这不是过早的优化。只获取感兴趣的列；获取不感兴趣的列会增加网络往返次数，从而影响性能。

在可能只需要访问索引的情况下，获取额外的列还可以防止数据库可能消除对表的访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:06:53.940

取决于，从性能的角度来看，通常最好在数据库中进行过滤。如果这涉及太多，从**可读性**的角度来看，在客户端级别这样做可能会更好。

# excel - 未发生错误时执行的错误处理程序

> ID：13975018
> 
> 赞同：1
> 
> 时间：2012-12-20T15:06:26.507
> 
> 标签：excel, vba

发生错误时，下面的错误处理程序可以正常工作。但是，当没有错误时，它会正确跳过它，然后在`ErrHandler:`应该忽略它的部分中执行代码。谁能告诉我我做错了什么，好吗？

```
Sub PopulateDynamicReport()

Dim getcolumnPDR As Range
Dim getFieldDescriptionPDR As String
Dim getFormulaPDR As Variant
Dim columnletter As String
Dim myrange As String

Sheets("Config").Select

Cells.Find(What:="Field Description", after:=ActiveCell, LookIn:= _
        xlFormulas, LookAt:=xlPart, searchorder:=xlByRows, searchdirection:= _
        xlNext, MatchCase:=False, SearchFormat:=False).Offset(1, 0).Activate

Do
    If ActiveCell <> "" Then

        Set getcolumnPDR = getcolumn
        getFieldDescriptionPDR = getFieldDescription

        If ActiveCell.Offset(0, 1) = "Not Applicable" Then

            getFormulaPDR = ""

            On Error GoTo ErrHandler

            Sheets("Dynamic Report").Cells.Find(What:=getFieldDescriptionPDR, after:=ActiveCell, LookIn:= _
            xlFormulas, LookAt:=xlPart, searchorder:=xlByRows, searchdirection:= _
            xlNext, MatchCase:=False, SearchFormat:=False).EntireColumn.Copy getcolumnPDR

            On Error GoTo 0

            ActiveCell.Offset(1, 0).Activate

        Else
            getFormulaPDR = getFormula
            columnletter = ActiveCell.Offset(0, -1)

            ActiveCell.Offset(0, 1).Copy Sheets("Pricing Analysis").Cells(FindLastRow, columnletter)
            Sheets("Pricing Analysis").Activate
            Cells(FindLastRow, columnletter).Activate
            ActiveCell.Copy
            Range(Selection, Selection.End(xlUp)).Select
            Selection.FillUp
            Application.CutCopyMode = False

            Sheets("Config").Activate

            ActiveCell.Copy getcolumnPDR.End(xlUp)

            Sheets("Pricing Analysis").Activate

            getcolumnPDR.EntireColumn.AutoFit
            getcolumnPDR.End(xlUp).Font.Bold = True

            Sheets("Config").Activate

            ActiveCell.Offset(1, 0).Activate
        End If

    End If

    Loop Until ActiveCell = ""

ErrHandler:
            MsgBox "Field Description in Config tab not listed on report - please check parameters"
            Exit Sub

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:07:37.880

将**Exit Sub**放在错误处理代码的开头之前，如下所示：

```
Exit Sub

ErrHandler:
            MsgBox "Field Description in Config tab not listed on report - please check parameters"
            Exit Sub 
```

# python - 基于 Python 中的公共值合并/连接字典列表

> ID：13975021
> 
> 赞同：12
> 
> 时间：2012-12-20T15:06:45.200
> 
> 标签：python, django

我有两个字典列表（作为 Django 查询集返回）。每个字典都有一个 ID 值。我想根据 ID 值将两者合并到一个字典列表中。

例如：

```
list_a = [{'user__name': u'Joe', 'user__id': 1},
          {'user__name': u'Bob', 'user__id': 3}]
list_b = [{'hours_worked': 25, 'user__id': 3},
          {'hours_worked': 40, 'user__id': 1}] 
```

我想要一个函数来产生：

```
list_c = [{'user__name': u'Joe', 'user__id': 1, 'hours_worked': 40},
          {'user__name': u'Bob', 'user__id': 3, 'hours_worked': 25}] 
```

需要注意的其他要点：

*   列表中的 ID 的顺序可能不同（与上面的示例一样）。
*   列表*可能*具有相同数量的元素，但如果不是，我想考虑该选项，但保留 list_a 中的所有值（本质上`list_a OUTER JOIN list_b USING user__id`）。
*   我尝试在 SQL 中执行此操作，但这是不可能的，因为某些值是基于某些排除项的聚合。
*   `user__id`由于使用的数据库查询，可以安全地假设每个列表中最多只有一个具有相同的字典。

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-20T15:10:36.813

我会用来`itertools.groupby`对元素进行分组：

```
lst = sorted(itertools.chain(list_a,list_b), key=lambda x:x['user__id'])
list_c = []
for k,v in itertools.groupby(lst, key=lambda x:x['user__id']):
    d = {}
    for dct in v:
        d.update(dct)
    list_c.append(d)
    #could also do:
    #list_c.append( dict(itertools.chain.from_iterable(dct.items() for dct in v)) )
    #although that might be a little harder to read. 
```

如果您对`lambda`函数有反感，您可以随时使用`operator.itemgetter('user__id')`。（它可能也稍微更有效率）

为了稍微揭开 lambda/itemgetter 的神秘面纱，请注意：

```
def foo(x):
    return x['user__id'] 
```

与以下任何一项相同*：

```
foo = operator.itemgetter('user__id')
foo = lambda x: x['user__id'] 
```

*有一些差异，但它们对于这个问题并不重要

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T15:43:38.210

```
from collections import defaultdict
from itertools import chain

list_a = [{'user__name': u'Joe', 'user__id': 1},
      {'user__name': u'Bob', 'user__id': 3}]
list_b = [{'hours_worked': 25, 'user__id': 3},
      {'hours_worked': 40, 'user__id': 1}]

collector = defaultdict(dict)

for collectible in chain(list_a, list_b):
    collector[collectible['user__id']].update(collectible.iteritems())

list_c = list(collector.itervalues()) 
```

如您所见，这只是使用另一个字典来合并现有的字典。defaultdict 的诀窍在于它消除了为新条目创建字典的苦差事。

无需对这些输入进行分组或排序。dict 负责所有这些。

如果输入没有“user__id”键，则真正的防弹解决方案会捕获潜在的键错误，或者使用默认值来收集没有这样键的所有字典。

# jquery - 如何动态创建嵌套的 JSON 对象？

> ID：13975022
> 
> 赞同：0
> 
> 时间：2012-12-20T15:06:44.040
> 
> 标签：jquery, json

我想创建一个 JSON 对象`words`，该对象进一步包含对象列表`s`并`e`具有不同的值，如下所示：

```
words = {
    "a1": { s: 1.5, e: 2 },
    "a2": { s: 2.1, e: 2.4 },
    "a3": { s: 2.5, e: 3 },
    "a4": { s: 3.5, e: 3.8 },
    "a5": { s: 3.9, e: 4.5 },
    "a6": { s: 4.8, e: 5.2 },
    "a7": { s: 5.3, e: 5.3 },
    "a8": { s: 6.5, e: 7 },
    "a9": { s: 7.2, e: 8 },
    "a10": { s: 8.1, e: 8.4 }
}; 
```

我需要使用`for`循环添加这些值。我为此应用了以下解决方案：

```
var words = {};
var xyz = [1.5,2,2.1,2.4,2.5,3,3.5,3.8,3.9,4.5,4.8,5.2,5.3,5.3,6.5,7,7.2,8];
words = '{';
for (var i = 0; i <= 10; i++) {
    if (i == 10)
        var obj = '\"a' + i + '\"'+': { s:' + xyz[i] + ', e:' + xyz[i + 1] + '}';
    else
        var obj = '\"a' + i + '\": { s:' + xyz[i] + ', e:' + xyz[i + 1] + '},';

    words = words + obj;
}
words = words + '}';

$.parseJSON(words); 
```

但这会产生以下错误：

> Uncaught SyntaxError: Unexpected token s**

因此，我无法创建对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:11:17.160

你不需要创建一个 JSON 字符串，然后用 JS 解析它：用这个更容易完成：

```
var words = {},
    xyz = [1.5,2,2.1,2.4,2.5,3,3.5,3.8,3.9,4.5,4.8,5.2,5.3,5.3,6.5,7,7.2,8];

for (var i = 0, l = xyz.length/2; i < l; i++) {
  words['a' + (i + 1)] = { 
    s: xyz[2*i], 
    e: xyz[2*i + 1] 
  };
}

console.log(words); 
```

说明：您遍历源数组，将每一对放入一个对象文字中，并`words`使用括号表示法将其分配给对象（以便将该值`'a' + (i+1)`评估为新键）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:12:15.637

基本上没有理由在浏览器中手动创建 JSON 字符串，而是创建对象然后`JSON.stringify`在其上使用。（大多数浏览器默认都有它，如果没有，你可以添加一个 shim。）例如：

```
var counter;
var words = {};
var xyz = [1.5,2,2.1,2.4,2.5,3,3.5,3.8,3.9,4.5,4.8,5.2,5.3,5.3,6.5,7,7.2,8];
var i;
counter = 0;
for (i = 0; i < xyz.length; i += 2) {
    ++counter;
    words["a" + counter] = {s: xyz[i], e: xyz[i + 1]};
}
console.log("words (before stringify):", words);
words = JSON.stringify(words);
console.log("words (after stringify):", words); 
```

如果您要手动创建 JSON，则需要[学习并遵循其规则](http://json.org)。例如，键必须用双引号（so, `"s": ...`not `s: ...`）。

# jsf - 可以通过 `f:param` 传递 `p:inputText` 参数吗？

> ID：13975026
> 
> 赞同：-2
> 
> 时间：2012-12-20T15:07:13.157
> 
> 标签：jsf, jsf-2, primefaces

在我看来，`p:inputText`不支持通过`f:param`. 这是真的？

如果是，我该如何传递参数？

**更详细地**
说，我有一个通过以下方式生成的 inputText 字段列表：

```
<p:dataTable value="#{EncryptionBean.epList}" var="item">
  <p:column>
  ...
     <p:inputText value="#{item.APID}" valueChangeListener="#{EncryptionBean.listenerApid}">
         <f:param value="#{item.presetName}" name="whoLaunched"/>
     <p:inputText>
  </p:column>    
<(p:dataTable> 
```

`EncryptionBean.epList`当我捕获值更改侦听器时，我需要知道`inputText`属于哪个。我通常这样做：

```
ExternalContext ec; 
...
String value = (String)ec.getRequestParameterMap().get("whoLaunched"); 
```

...但它不起作用`inputText`（例如它适用`commandLink`于）。

基本上，我如何将`item.presetName`itemText 值 ( `item.APID`) 一起传递给侦听器？我需要将这两个保存在地图中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:56:23.660

这有效：

xhtml:

```
<p:inputText value="#{item.APID}">
    <p:ajax listener="#{EncryptionBean.listenerApid( item.presetName, item.APID )}"/>              
</p:inputText> 
```

爪哇豆：

```
public void listenerApid( String presetName, String typedAPID )
{       
    // Do something with values.
} 
```

令人难以置信的是，传递这些值是多么容易，只需使用`ajax listener`参数而不是`valueChangeListener`.

# javascript - 使用 Javascript FileReader API 一次读取多个文件

> ID：13975031
> 
> 赞同：27
> 
> 时间：2012-12-20T15:07:33.673
> 
> 标签：javascript, html, filereader, fileapi

我正在使用**FileReader** API 来读取多个文件。

```
<html> <body>
    <input type="file" id="filesx" name="filesx[]"
      onchange="readmultifiles(this.files)" multiple=""/>
    <div id="bag"><ul/></div>
<script>
window.onload = function() {
    if (typeof window.FileReader !== 'function') {
        alert("The file API isn't supported on this browser yet.");
    }
}

function readmultifiles(files) {
    var ul = document.querySelector("#bag>ul");
    while (ul.hasChildNodes()) {
        ul.removeChild(ul.firstChild);
    }

    function setup_reader(file) {
        var name = file.name;
        var reader = new FileReader();
        reader.onload = function(e) {
            var bin = e.target.result; //get file content

            // do sth with text

            var li = document.createElement("li");
            li.innerHTML = name;
            ul.appendChild(li);
        }
        reader.readAsBinaryString(file);
    }

    for (var i = 0; i < files.length; i++) { setup_reader(files[i]); }
}
</script> </body> </html> 
```

问题是同时读取所有文件，当文件的总大小（总和）非常大时，浏览器会崩溃。

我想一个接一个地读取文件，这样可以减少内存消耗。

这可能吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-20T15:18:47.337

我自己想出了一个可行的解决方案。

```
function readmultifiles(files) {
  var reader = new FileReader();  
  function readFile(index) {
    if( index >= files.length ) return;
    var file = files[index];
    reader.onload = function(e) {  
      // get file content  
      var bin = e.target.result;
      // do sth with bin
      readFile(index+1)
    }
    reader.readAsBinaryString(file);
  }
  readFile(0);
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-20T15:13:18.003

这应该一个一个地读取文件：

```
function readmultifiles(files) {
    var ul = document.querySelector("#bag>ul");
    while (ul.hasChildNodes()) {
        ul.removeChild(ul.firstChild);
    }
    // Read first file
    setup_reader(files, 0);
}

// Don't define functions in functions in functions, when possible.

function setup_reader(files, i) {
    var file = files[i];
    var name = file.name;
    var reader = new FileReader();
    reader.onload = function(e){
                        readerLoaded(e, files, i, name);
                    };
    reader.readAsBinaryString(file);
    // After reading, read the next file.
}

function readerLoaded(e, files, i, name) {
    // get file content  
    var bin = e.target.result;
    // do sth with text

    var li = document.createElement("li");
    li.innerHTML = name;
    ul.appendChild(li);

    // If there's a file left to load
    if (i < files.length - 1) {
        // Load the next file
        setup_reader(files, i+1);
    }
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-08-17T07:13:56.587

为了新用户的利益，我正在更新这个问题，他们正在寻找通过[FileReader API](https://developer.mozilla.org/en/docs/Web/API/FileReader)上传多个文件的解决方案，尤其是使用 ES。

与其手动迭代每个文件，不如[`Object.keys(files)`在 ES](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)中使用更简单、更简洁：

```
<input type="file" onChange="readmultifiles" multiple/>
<script>
function readmultifiles(e) {
  const files = e.currentTarget.files;
  Object.keys(files).forEach(i => {
    const file = files[i];
    const reader = new FileReader();
    reader.onload = (e) => {
      //server call for uploading or reading the files one-by-one
      //by using 'reader.result' or 'file'
    }
    reader.readAsBinaryString(file);
  })
};
</script> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-08-13T13:10:52.540

我的完整解决方案在这里：

```
 <html> <body>
    <input type="file" id="filesx" name="filesx[]"
      onchange="readmultifiles(this.files)" multiple=""/>
    <div id="bag"></div>
<script>
window.onload = function() {
    if (typeof window.FileReader !== 'function') {
        alert("The file API isn't supported on this browser yet.");
    }
}

function readmultifiles(files) {
  var reader = new FileReader();  
  function readFile(index) {
    if( index >= files.length ) return;
    var file = files[index];
    reader.onload = function(e) {  
      // get file content  
      var bin = e.target.result;
      // do sth with bin
      readFile(index+1)
    }
    reader.readAsBinaryString(file);
  }
  readFile(0);

 function setup_reader(file) {
        var name = file.name;
        var reader = new FileReader();

            var ul = document.createElement("ul");
            document.getElementById('bag').appendChild(ul);
        reader.onload = function(e) {
            var bin = e.target.result; //get file content

            // do sth with text

            var li = document.createElement("li");
            li.innerHTML = name;
            ul.appendChild(li);
        }
        reader.readAsBinaryString(file);
    }

    for (var i = 0; i < files.length; i++) { setup_reader(files[i]); }
}
</script> </body> </html> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-04-28T08:18:53.393

`multiple`使用属性定义输入：

```
<input onchange = 'upload(event)' type = 'file' multiple/> 
```

定义上传函数：

```
const upload = async (event) => {

    // Convert the FileList into an array and iterate
    let files = Array.from(event.target.files).map(file => {

        // Define a new file reader
        let reader = new FileReader();

        // Create a new promise
        return new Promise(resolve => {

            // Resolve the promise after reading file
            reader.onload = () => resolve(reader.result);

            // Read the file as a text
            reader.readAsText(file);

        });

    });

    // At this point you'll have an array of results
    let res = await Promise.all(files);

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-20T14:47:22.637

我使用现代 JS（Map、Iterator）实现了另一个解决方案。我改编了我的 Angular 应用程序中的代码（最初是用一些 TS 功能编写的）。

就像 Steve KACOU 提到的，我们为每个文件创建一个不同的 FileReader 实例。

```
<input type="file" id="filesx" name="filesx[]"
      onchange="processFileChange(this)" multiple=""/> 
```

```
 function processFileChange(event) {
        if (event.target.files && event.target.files.length) {
            const fileMap = new Map();

            for (let i = 0; i < event.target.files.length; i++) {
                const file = event.target.files[i];
                const fileReader = new FileReader();
                fileMap.set(fileReader, file);
            }

            const mapEntries = fileMap.entries();
            readFile(mapEntries);
        }
    }

    function readFile(mapEntries) {
        const nextValue = mapEntries.next();

        if (nextValue.done === true) {
            return;
        }

        const [fileReader, file] = nextValue.value;

        fileReader.readAsDataURL(file);
        fileReader.onload = () => {
            // Do black magic for each file here (using fileReader.result)

            // Read the next file
            readFile(mapEntries);
        };
    } 
```

基本上，这利用了通过引用传递对象的优势，以使每次迭代都使地图永久化。在我看来，这使得代码很容易阅读。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-01-19T00:06:53.547

您必须为要读取**的每个文件实例化一个 FileReader 。**

```
function readFiles(event) {
  //Get the files
  var files = event.input.files || [];
  if (files.length) {
    for (let index = 0; index < files.length; index++) {
      //instantiate a FileReader for the current file to read
      var reader = new FileReader();
      reader.onload = function() {
        var result = reader.result;
        console.log(result); //File data
      };
      reader.readAsDataURL(files[index]);
    }
  }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-28T17:28:14.973

采取这些答案的最佳部分。

```
<input type="file" onchange="readmultifiles(this.files)" multiple />
<script>
function readmultifiles(files) {
  for (file of files) {
    const reader = new FileReader();
    reader.readAsBinaryString(file);
    reader.fileName = file.name;
    reader.onload = (event) => {
      const fileName = event.target.fileName;
      const content = event.currentTarget.result;
      console.log({ fileName, content });
    };
  }
}

</script> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-25T20:11:03.820

试试这个

```
const setFileMultiple = (e) => {
  e.preventDefault();
  //Get the files
  let file = [...e.target.files] || [];

  file.forEach((item, index) => {
    let reader = new FileReader();

    reader.onloadend = () => {
      console.log("result", reader.result);
    };
    reader.readAsDataURL(file[index]);
  });

}; 
```

# mysql - MySQL 在从 InnoDB 转换到 MyISAM 时删除了所有索引，尝试切换回来时出错

> ID：13975032
> 
> 赞同：1
> 
> 时间：2012-12-20T15:07:34.743
> 
> 标签：mysql

我不知道为什么、什么、如何或谁可以对我的所有数据库进行更改。我有一个托管帐户，我的所有数据库表都从​​ InnoDB 更改为 MyISAM，并且我的所有索引都丢失了。我所有的关系数据也都丢失了。

为什么会发生这种情况？（我刚刚联系了托管公司，他们告诉我他们没有对任何数据库进行任何更改，问题可能来自我公司的程序员..现在..问题是我是唯一的程序员谁访问了这些帐户，我真的知道我做了什么......所以他们只是将问题传递给我，没有任何解释）

现在我正在尝试将表改回并重新创建索引和关系数据。问题是，当我尝试将表的类型从 MyISAM 更改为 InnoDB 时，其中一些出现错误。

我试图从 phpmyadmin 和 sql 查询重命名它

`ALTER TABLE categories ENGINE = INNODB`

这将返回此错误。为什么？

`#1025 - Error on rename of './database_name/#sql-6ad0_146c29' to './database_name/categories' (errno: 121)`

# c# - “给定的阅读器与当前的物化器不兼容。为这个阅读器创建一个不同的物化器。”

> ID：13975033
> 
> 赞同：1
> 
> 时间：2012-12-20T15:07:35.247
> 
> 标签：c#, entity-framework, asp.net-mvc-2

我收到了上述错误消息，希望有人可以为我翻译。我通过一些搜索在网上找到的唯一参考是代码块的引用，没有解释。它们看起来像是相关的，但实际上并没有提供任何帮助来弄清楚发生了什么。

背景：我试图在 mvc2/C#/EF/SQL 堆栈中维护一大块遗留代码，它使用这些物化器（可能还有阅读器）作为与数据库通信的一种方式。我基本上不了解物化器是如何工作的，除了“哦，这似乎有点像它在做这样的事情”，你只是从代码本身的通读中得到的。我必须对使用物化器的表/对象集之一的数据库进行一些更改。我适当地调整了物化器（据我所知），大量欺骗现有代码，为添加的列/属性添加等效行，并删除那些已删除的行。我还在 c# 类中注释掉了一个名为 TryParse 的函数，因为据我所知，没有人使用它，而且我们 重新尝试减少一点杂物。它现在似乎在使用该东西的某些时间（但不是全部）失败了。我真的不知道在我改变之前它是否像这样失败了。

我不需要回答到底发生了什么——我怀疑这会占用太多对代码块的评论等等。大多数情况下，我希望有人能给我一个或两个“啊，这个错误消息通常意味着”的一般指针，这样我就不会完全盲目地飞行（尽管如果有人能够想出更多根据我提供的信息，那会很棒）。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:20:24.267

错误消息来自[EFExtensions](http://archive.msdn.microsoft.com/EFExtensions)。来源表明，当读取器中记录的形状（字段计数和字段名称）与物化器期望的形状不匹配时，将引发此错误。

（物化器只是将*对象实例*从其他东西中提取出来的*东西*，在这种情况下，数据由阅读器读取）

从 EFExtensions 源中我并不清楚这在“正常”情况下是如何发生的，因为看起来预期的形状是从读取的*第一个*记录中推断出来的，然后检查所有后续记录。显然，对于 normal `IDataReader`，所有记录都将具有相同的形状。

但是，听起来您可能有自定义物化器在工作（可能从 EFExtensions 继承，因此您会收到它们的错误消息），在这种情况下，答案可能在于您的物化器代码。

# java - Maven 传递依赖中断构建

> ID：13975036
> 
> 赞同：1
> 
> 时间：2012-12-20T15:07:44.533
> 
> 标签：java, maven, build

我有以下问题 - 我试图`apache commons-lang version 2.6`在我的项目中使用（在 pom.xml 中定义），但由于传递依赖，maven 总是添加版本 3.2.1，这会破坏我的构建。这是 pom.xml 的相关部分

```
<properties>
   <commons-lang.version>2.6</commons-lang.version>
</properties>
<dependency>
   <groupId>commons-lang</groupId>
   <artifactId>commons-lang</artifactId>
   <version>${commons-lang.version}</version>
</dependency> 
```

当我尝试运行时，`mvn dependency:tree`我可以看到原因是传递依赖

```
+- org.seleniumhq.selenium:selenium-api:jar:2.26.0:compile (version managed from 2.26.0)
    +- net.sourceforge.htmlunit:htmlunit:jar:2.10:compile
       +- org.apache.commons:commons-lang3:jar:3.1:compile 
```

所以我可以看到问题，但我真的不知道如何解决它。感谢您的任何建议:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:10:36.497

研究在导致问题的依赖项中使用排除标记。排除标记告诉 maven 您不希望 maven 引入间接依赖关系，并且仅在这种情况下使用。

例如，如果我的一个依赖项 A 引入了 B 的 1.0 版，但我想使用 B 的 2.0 版，我可以这样做：

```
<dependency>
    <groupId>org.mycorp</groupId>
    <artifactID>A</artifactID>
    <version>4.0</version>
    <exclusions>
        <exclusion>
            <groupId>org.mycorp</groupId>
            <artifactId>B</artifactId>
        </exclusion>
    </exclusions>
</dependency>
<dependency>
    <groupId>org.mycorp</groupId>
    <artifactID>B</artifactID>
    <version>2.0</version>
</dependency> 
```

在这种情况下，排除标记表示不引入间接依赖项（B 1.0）。请注意，您不必提供版本。一旦你告诉 maven 不要自动引入那个版本的 B，你就会跟随一个明确的依赖关系来定义你想要的 B 版本（在这种情况下是 2.0 版）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T15:29:53.663

这种特殊的依赖不应该*破坏*您的构建，因为 Commons Lang 3 使用与 Lang 2 不同的包命名。您的代码应该使用来自 Lang2 的类，而 HTMLUnit 将使用来自 Lang3 的类，并且两个 JAR 可以共存。

也许您应该描述您认为这会*如何*破坏您的构建，以及构建输出中的相关摘录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:04:00.030

我的同事忘记在父 pom 的dependencyManagement 中声明版本，就这样。谢谢你的建议！

# objective-c - addItemViewController:didFinishEditingItem 不将编辑的项目传递给主视图控制器

> ID：13975039
> 
> 赞同：0
> 
> 时间：2012-12-20T15:07:48.147
> 
> 标签：objective-c, ios, uitableview

添加了一个方法和协议，在完成文本编辑后将 addItemViewController:didFinishEditingItem 方法传递给主视图控制器 (ChecklistsViewController)。（编辑命令和 segue 是通过按下清单主页上的披露详细信息按钮来调用的。）

问题是在完成编辑并按下“完成”按钮后，没有完成的文本编辑被传递回原始清单页面，这意味着原始编辑没有被传递。我没有编译警告消息。

你能告诉我出了什么问题，为什么没有完成的编辑被传回清单吗？提前致谢。

AddItemViewController.h

# 进口

```
@class AddItemViewController;
@class ChecklistItem;

@protocol AddItemViewControllerDelegate <NSObject>

- (void)addItemViewControllerDidCancel:(AddItemViewController *)controller;

- (void)addItemViewController:(AddItemViewController *)controller didFinishAddingItem:(ChecklistItem *)item;

- (void)addItemViewController:(AddItemViewController *)controller didFinishEditingItem:(ChecklistItem *)item;

@end

@interface AddItemViewController : UITableViewController <UITextFieldDelegate>

@property (strong, nonatomic) IBOutlet UITextField *textField;
@property (strong, nonatomic) IBOutlet UIBarButtonItem *doneBarButton;
@property (nonatomic, weak) id <AddItemViewControllerDelegate> delegate;
@property (nonatomic, strong) ChecklistItem *itemToEdit;

- (IBAction)cancel;
- (IBAction)done;

@end 
```

AddItemViewController.m

```
#import "AddItemViewController.h"
#import "ChecklistItem.h"

@interface AddItemViewController ()

@end

@implementation AddItemViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    if(self.itemToEdit != nil) {
        self.title = @"Edit Item";
        self.textField.text = self.itemToEdit.text;
        self.doneBarButton.enabled = YES;
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (IBAction)cancel
{
    [self.delegate addItemViewControllerDidCancel:self];
}

- (IBAction)done
{
    if(self.itemToEdit == nil) {
    ChecklistItem *item = [[ChecklistItem alloc] init];
    item.text = self.textField.text;
    item.checked = NO;

    [self.delegate addItemViewController:self didFinishAddingItem:item];
    } else {
    self.itemToEdit.text = self.textField.text;
    [self.delegate addItemViewController:self didFinishEditingItem:self.itemToEdit];
    }
}

- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    return nil;
}
- (void)viewDidUnload {
    [self setTextField:nil];
    [self setDoneBarButton:nil];
    [super viewDidUnload];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [self.textField becomeFirstResponder];
}

- (BOOL)textField:(UITextField *)theTextField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *newText = [theTextField.text stringByReplacingCharactersInRange:range withString:string];

    self.doneBarButton.enabled = ([newText length] > 0);

    return YES;
}
@end 
```

清单ViewController.h

```
#import <UIKit/UIKit.h>
#import "AddItemViewController.h"

@interface ChecklistsViewController : UITableViewController <AddItemViewControllerDelegate>

@end 
```

清单ViewController.m

```
#import "ChecklistsViewController.h"
#import "ChecklistItem.h"

@interface ChecklistsViewController ()

@end

@implementation ChecklistsViewController {
    NSMutableArray *items;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    items = [[NSMutableArray alloc] initWithCapacity:20];

    ChecklistItem *item;

    item = [[ChecklistItem alloc]init];
    item.text = @"Walk the dog";
    item.checked = NO;
    [items addObject:item];

    item = [[ChecklistItem alloc]init];
    item.text = @"Brush my teeth";
    item.checked = YES;
    [items addObject:item];

    item = [[ChecklistItem alloc]init];
    item.text = @"Learn iOS development";
    item.checked = YES;
    [items addObject:item];

    item = [[ChecklistItem alloc]init];
    item.text = @"Soccer practice";
    item.checked = NO;
    [items addObject:item];

    item = [[ChecklistItem alloc]init];
    item.text = @"Eat ice cream";
    item.checked = YES;
    [items addObject:item];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [items count];
}

- (void)configureCheckmarkForCell:(UITableViewCell *)cell withChecklistItem:(ChecklistItem *)item
{
    UILabel *label = (UILabel *)[cell viewWithTag:1001];
    if(item.checked) {
        label.text =@"√";
    } else {
        label.text = @"";
    }

}

- (void)configureTextForCell:(UITableViewCell *)cell withChecklistItem:(ChecklistItem *)item
{
    UILabel *label = (UILabel *)[cell viewWithTag:1000];
    label.text = item.text;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"ChecklistItem"];

    ChecklistItem *item = [items objectAtIndex:indexPath.row];

    [self configureTextForCell:cell withChecklistItem:item];
    [self configureCheckmarkForCell:cell withChecklistItem:item];

    return cell;
}

- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
    ChecklistItem *item = [items objectAtIndex:indexPath.row];
    [self performSegueWithIdentifier:@"EditItem" sender:item];
}

- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    ChecklistItem *item = [items objectAtIndex:indexPath.row];
    [item toggleChecked];

    [self configureCheckmarkForCell:cell withChecklistItem:item];

    [tableView deselectRowAtIndexPath:indexPath animated:YES];
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    [items removeObjectAtIndex:indexPath.row];

    NSArray *indexPaths = [NSArray arrayWithObject:indexPath];
    [tableView deleteRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationAutomatic];
}

- (void)addItemViewControllerDidCancel:(AddItemViewController *)controller
{
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)addItemViewController:(AddItemViewController *)controller didFinishAddingItem:(ChecklistItem *)item
{
    int newRowIndex = [items count];
    [items addObject:item];

    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:newRowIndex inSection:0];
    NSArray *indexPaths = [NSArray arrayWithObject:indexPath];
    [self.tableView insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationAutomatic];

    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)addItemViewController:(AddItemViewController *)controller didFinishEditingItem:(ChecklistItem *)item
{
    int index = [items indexOfObject:item];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:index inSection:0];
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
    [self configureCheckmarkForCell:cell withChecklistItem:item];

    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"AddItem"]) {
        UINavigationController *navigationController = segue.destinationViewController;
        AddItemViewController *controller = (AddItemViewController *)navigationController.topViewController;
        controller.delegate = self;
    } else if ([segue.identifier isEqualToString:@"EditItem"]) {
        UINavigationController *navigationController = segue.destinationViewController;
        AddItemViewController *controller = (AddItemViewController *)navigationController.topViewController;
        controller.delegate = self;
        controller.itemToEdit = sender;
    }
}

@end 
```

# c# - 如何使用 asp.net mvc 框架从模型生成查询字符串

> ID：13975040
> 
> 赞同：6
> 
> 时间：2012-12-20T15:07:55.227
> 
> 标签：c#, asp.net-mvc-4

我有一个模型，有一些嵌套的属性，列表......我想从那个模型中获取一个查询字符串参数。

asp.net mvc 框架中是否有任何类/助手可以执行此操作？

我知道使用模型绑定器我们可以从查询字符串绑定模型，但我想做相反的事情。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-27T20:34:02.363

我相当肯定框架中没有“序列化查询字符串”功能，主要是因为我认为没有标准方法来表示查询字符串中的嵌套值和嵌套集合。

我认为使用 ModelMetadata 基础架构很容易做到这一点，但事实证明，使用 ModelMetadata 从集合值属性中获取项目存在一些复杂性。我已经组合了一个可以解决这个问题的扩展方法，并构建了一个 ToQueryString 扩展，您可以从您拥有的任何 ModelMetadata 对象中调用它。

```
public static string ToQueryString(this ModelMetadata modelMetadata)
{
    if(modelMetadata.Model == null)
        return string.Empty;

    var parameters = modelMetadata.Properties.SelectMany (mm => mm.SelectPropertiesAsQueryStringParameters(null));
    var qs = string.Join("&",parameters);
    return "?" + qs;
}

private static IEnumerable<string> SelectPropertiesAsQueryStringParameters(this ModelMetadata modelMetadata, string prefix)
{
    if(modelMetadata.Model == null)
        yield break;

    if(modelMetadata.IsComplexType)
    {
        IEnumerable<string> parameters;
        if(typeof(IEnumerable).IsAssignableFrom(modelMetadata.ModelType))
        {
            parameters = modelMetadata.GetItemMetadata()
                                    .Select ((mm,i) => new {
                                        mm, 
                                        prefix = string.Format("{0}{1}[{2}]", prefix, modelMetadata.PropertyName, i)
                                    })
                                    .SelectMany (prefixed =>
                                        prefixed.mm.SelectPropertiesAsQueryStringParameters(prefixed.prefix)
                                    );          
        } 
        else 
        {
            parameters = modelMetadata.Properties
                        .SelectMany (mm => mm.SelectPropertiesAsQueryStringParameters(string.Format("{0}{1}", prefix, modelMetadata.PropertyName)));
        }

        foreach (var parameter in parameters)
        {
            yield return parameter;
        }
    } 
    else 
    {
        yield return string.Format("{0}{1}{2}={3}",
            prefix, 
            prefix != null && modelMetadata.PropertyName != null ? "." : string.Empty,
            modelMetadata.PropertyName, 
            modelMetadata.Model);
    }
}

// Returns the metadata for each item from a ModelMetadata.Model which is IEnumerable
private static IEnumerable<ModelMetadata> GetItemMetadata(this ModelMetadata modelMetadata)
{
    if(modelMetadata.Model == null)
        yield break;

    var genericType = modelMetadata.ModelType
                        .GetInterfaces()
                        .FirstOrDefault (x => x.IsGenericType && x.GetGenericTypeDefinition() == typeof(IEnumerable<>));

    if(genericType == null)
        yield return modelMetadata;

    var itemType = genericType.GetGenericArguments()[0];

    foreach (object item in ((IEnumerable)modelMetadata.Model))
    {
        yield return ModelMetadataProviders.Current.GetMetadataForType(() => item, itemType);
    }
} 
```

示例用法：

```
var vd = new ViewDataDictionary<Model>(model); // in a Controller, ViewData.ModelMetadata
var queryString = vd.ModelMetadata.ToQueryString(); 
```

我没有对它进行过彻底的测试，所以它可能会潜伏一些空引用错误，但它会为我尝试过的复杂对象吐出正确的查询字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-27T11:33:57.740

@Steve 的代码在出现额外嵌套和枚举时有一些小错误。

# 样品模型

```
public class BarClass {
    public String prop { get; set; }
}

public class FooClass {
    public List<BarClass> bar { get; set; } 
}

public class Model {
    public FooClass foo { get; set; }
} 
```

# 测试代码

```
var model = new Model {
    foo = new FooClass {
        bar = new List<BarClass> {
            new BarClass { prop = "value1" },
            new BarClass { prop = "value2" }
        }
    }
};

var queryString = new ViewDataDictionary<Model>(model).ModelMetadata.ToQueryString(); 
```

的值`queryString`应该是：

```
"?foo.bar[0].prop=value1&foo.bar[1].prop=value2" 
```

但是@Steve 的代码会产生以下输出：

```
"?foobar[0].prop=value1&foobar[1].prop=value2" 
```

# 更新代码

这是@Steve 解决方案的略微修改版本：

```
public static class QueryStringExtensions {
    #region inner types

    private struct PrefixedModelMetadata {

        public readonly String Prefix;
        public readonly ModelMetadata ModelMetadata;

        public PrefixedModelMetadata (String prefix, ModelMetadata modelMetadata) {
            Prefix = prefix;
            ModelMetadata = modelMetadata;
        }
    }

    #endregion
    #region fields

    private static readonly Type IEnumerableType = typeof(IEnumerable),
                                 IEnumerableGenericType = typeof(IEnumerable<>);

    #endregion
    #region methods

    public static String ToQueryString<ModelType> (this ModelType model) {
        return new ViewDataDictionary<ModelType>(model).ModelMetadata.ToQueryString();
    }

    public static String ToQueryString (this ModelMetadata modelMetadata) {
        if (modelMetadata.Model == null) {
            return String.Empty;
        }

        var keyValuePairs = modelMetadata.Properties.SelectMany(mm =>
            mm.SelectPropertiesAsQueryStringParameters(new List<String>())
        );

        return String.Join("&", keyValuePairs.Select(kvp => String.Format("{0}={1}", kvp.Key, kvp.Value)));
    }

    private static IEnumerable<KeyValuePair<String, String>> SelectPropertiesAsQueryStringParameters (this ModelMetadata modelMetadata, List<String> prefixChain) {
        if (modelMetadata.Model == null) {
            yield break;
        }

        if (modelMetadata.IsComplexType) {
            IEnumerable<KeyValuePair<String, String>> keyValuePairs;

            if (IEnumerableType.IsAssignableFrom(modelMetadata.ModelType)) {
                keyValuePairs = modelMetadata.GetItemMetadata().Select((mm, i) =>
                    new PrefixedModelMetadata(
                        modelMetadata: mm,
                        prefix: String.Format("{0}[{1}]", modelMetadata.PropertyName, i)
                    )
                ).SelectMany(prefixed => prefixed.ModelMetadata.SelectPropertiesAsQueryStringParameters(
                    prefixChain.ToList().AddChainable(prefixed.Prefix, addOnlyIf: IsNeitherNullNorWhitespace)
                ));
            }
            else {
                keyValuePairs = modelMetadata.Properties.SelectMany(mm =>
                    mm.SelectPropertiesAsQueryStringParameters(
                        prefixChain.ToList().AddChainable(
                            modelMetadata.PropertyName,
                            addOnlyIf: IsNeitherNullNorWhitespace
                        )
                    )
                );
            }

            foreach (var keyValuePair in keyValuePairs) {
                yield return keyValuePair;
            }
        }
        else {
            yield return new KeyValuePair<String, String>(
                key: AntiXssEncoder.HtmlFormUrlEncode(
                    String.Join(".",
                        prefixChain.AddChainable(
                            modelMetadata.PropertyName,
                            addOnlyIf: IsNeitherNullNorWhitespace
                        )
                    )
                ),
                value: AntiXssEncoder.HtmlFormUrlEncode(modelMetadata.Model.ToString()));
        }
    }

    // Returns the metadata for each item from a ModelMetadata.Model which is IEnumerable
    private static IEnumerable<ModelMetadata> GetItemMetadata (this ModelMetadata modelMetadata) {
        if (modelMetadata.Model == null) {
            yield break;
        }

        var genericType = modelMetadata.ModelType.GetInterfaces().FirstOrDefault(x =>
            x.IsGenericType && x.GetGenericTypeDefinition() == IEnumerableGenericType
        );

        if (genericType == null) {
            yield return modelMetadata;
        }

        var itemType = genericType.GetGenericArguments()[0];

        foreach (Object item in ((IEnumerable) modelMetadata.Model)) {
            yield return ModelMetadataProviders.Current.GetMetadataForType(() => item, itemType);
        }
    }

    private static List<T> AddChainable<T> (this List<T> list, T item, Func<T, Boolean> addOnlyIf = null) {
        if (addOnlyIf == null || addOnlyIf(item)) {
            list.Add(item);
        }

        return list;
    }

    private static Boolean IsNeitherNullNorWhitespace (String value) {
        return !String.IsNullOrWhiteSpace(value);
    }

    #endregion
} 
```

# jquery - 在 tr 中对 td 标签进行分组

> ID：13975041
> 
> 赞同：0
> 
> 时间：2012-12-20T15:07:58.990
> 
> 标签：jquery, html

我正在尝试在 tr 内设置一个包含一组 td 标签的“容器”，以便更好地与 jquery 一起使用。基本上我想根据我动态生成的一些数据显示某组 td 并隐藏其他组 td。我尝试过使用 tbody 但这似乎不起作用，并且 div 和 span 似乎抱怨它们不能嵌套在元素 tr 中。有没有合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:11:31.170

最合适的方法是为每个“TD”元素分配一个特定的类名，您可以稍后将其作为选择器引用。

例子：

```
<tr>
  <td>foo</td>
  <td>foo</td>
  <td>foo</td>
  <td class="bar">bar</td>
  <td class="bar">bar</td>
  <td class="bar">bar</td>
  <td>foo</td>
  <td>foo</td>
</tr>

$('td.bar').css({color: 'red'}); 
```

[演示在这里](http://jsfiddle.net/rlemon/DyJcH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:11:35.563

向这些“组”添加一个类，并根据类更改 td 的可见性。例如，如果您将类“yourClass”添加到您不希望看到的所有类中，并设置以下 CSS 语句：`.yourClass{ display:none }`您将看不到那些 td

这是一个[小提琴](http://jsfiddle.net/QL7AC/1/)。

然后，您可以通过类本身使用 jQuery 从您的表中选择那些 td！

```
$("td.yourClass"); 
```

或者，如果您想要所有**没有**类的（反向选择），您可以将选择器更改为`$("td:not(.yourClass.)");`返回所有**没有**类的td `yourClass`。

# javascript - UIWebView Xcode中来自Javascript的CGI图像

> ID：13975042
> 
> 赞同：0
> 
> 时间：2012-12-20T15:08:00.177
> 
> 标签：javascript, objective-c, uiwebview, cgimage

我的问题是 - 我有一个 UIWebView，它加载一个本地 html 文件。这个 html 文件是 javascript，它是指 mimetex.cgi 这个站点 - [http://planetcalc.ru/cgi-bin/mimetex.cgi](http://planetcalc.ru/cgi-bin/mimetex.cgi)

问题 - 我可以将 mimetex.cgi 直接放在设备上吗，也就是说，该程序可以在不使用 Internet 的情况下运行。

PS 我知道那种 mimetex.cgi 只在服务器上打开，但它可以有任何方式打开它，一些框架，如......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:47:28.783

是的，您可以在 Xcode 项目中运行 MimeTeX 代码，因为它是用 C 语言编写的，仅使用基本的 C 标准库。只需将它们添加到项目中并调用它们的函数，然后使用 popen 将其作为子进程启动。

# wordpress - 如何使用 WordPress 对页面和该页面中的所有帖子进行密码保护？

> ID：13975048
> 
> 赞同：0
> 
> 时间：2012-12-20T15:08:28.937
> 
> 标签：wordpress

我正在使用 WordPress 3.5，并且我希望对[http://mysite.com/media](http://mysite.com/media)页面进行密码保护。一旦您进入该页面（使用正确的密码），该页面上的所有帖子都应该可供您使用。但是，如果您在没有密码的情况下登陆帖子，它将提示您输入密码。

这可以在本地完成还是有我需要的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:40:17.760

查看[WordPress › 绝对隐私 «](http://wordpress.org/extend/plugins/absolute-privacy/)需要注册的 WordPress 插件 - 通过登录名和密码控制网站访问的最佳方式 - 并且还禁用 RSS 提要，因此您的网站不提供提要。

# xml - 如何在不转义的情况下在 PowerShell 中获取转义的 xml 属性值

> ID：13975053
> 
> 赞同：6
> 
> 时间：2012-12-20T15:08:50.487
> 
> 标签：xml, powershell, xpath

给定以下xml：

```
<foo bar="&amp;foobar">some text</foo> 
```

我需要在不转义的情况下获取 bar 属性的值。到目前为止，我在 PowerShell 中尝试的每种方法都会产生以下值：

```
&foobar 
```

而不是这样：

```
&amp;foobar 
```

我需要后者，因为我需要正确转义的字面值才能持续存在。

如果我这样做：

```
[xml]$xml = "<foo bar='&amp;foobar'>some text</foo>"
$xml.foo.bar 
```

属性值未转义（即 &foobar）。

如果我这样做：

```
$val = $xml | select-xml "/foo/@bar"
$val.Node.Value 
```

属性值未转义（即 &foobar）。

确保使用 PowerShell 获得属性的原始转义值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T15:53:18.997

```
[Security.SecurityElement]::Escape($xml.foo.bar) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-20T17:09:49.767

使用上面的示例 XML，以下每个都将为 bar 属性生成原始的转义值：

使用 XPath：

```
$val = $xml | select-xml "/foo/@bar"
$val.Node.get_innerXml() 
```

使用 PowerShell 的原生 XML 语法：

```
$xml.foo.attributes.item(0).get_innerXml() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-20T16:04:13.297

你也可以使用

`[System.Web.HttpUtility]::HtmlEncode($xml.foo.bar)`.

在这里找到关于使用 PowerShell 进行 html 编码的一个很好的答案：[What is the best way to escape html specific characters in a string in (PowerShell)](https://stackoverflow.com/questions/10082217/what-is-the-best-way-to-escape-html-specific-characters-in-a-string-powershell)

我不确定它是否比@shay 的答案更好，因为数据仍在通过 XML 解析器，该解析器返回未转义的值，然后通过函数传回以再次对其进行转义。

在任何情况下，“内容”都已被操纵，而不是“原始内容”。这可能会让人毛骨悚然，但在过去，当我需要对最初发送的内容进行不可否认时，我将整个 blob 存储为文本。

通过访问 @bar 属性 OuterXml 属性来获取“文本”可能是可以接受的。该 OuterXml 属性将返回：

```
bar="&amp;foobar" 
```

从那里，我们可以执行以下操作：

```
$xml.foo.attributes['bar'].OuterXml.Split("=")[1] 
```

返回：

```
"&amp;foobar" 
```

我认为这是我们想要结束的地方，但你可能可以用更好的方式做到这一点。:)

# android - 使editText失去对后按的关注

> ID：13975058
> 
> 赞同：25
> 
> 时间：2012-12-20T15:09:00.797
> 
> 标签：android, android-edittext

在我的活动中，我有一个 editText 字段。当用户点击它时，editText 获得焦点并出现键盘。现在，当用户按下手机上的硬件返回按钮时，键盘消失，但光标仍留在 Edittext 中，即它仍然具有焦点。按下后退按钮时是否可以使 EditText 失去焦点？我尝试使用以下代码，但没有奏效：

```
@Override
public void onBackPressed() {
    vibrator.vibrate(Constants.DEFAULT_VIBRATE_TIME);
    myEditText.clearFocus();
            super.onBackPressed();
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-12-15T20:58:18.760

只需扩展 EditText：

```
public class EditTextV2 extends EditText
{
    public EditTextV2( Context context )
    {
        super( context );
    }

    public EditTextV2( Context context, AttributeSet attribute_set )
    {
        super( context, attribute_set );
    }

    public EditTextV2( Context context, AttributeSet attribute_set, int def_style_attribute )
    {
        super( context, attribute_set, def_style_attribute );
    }

    @Override
    public boolean onKeyPreIme( int key_code, KeyEvent event )
    {
        if ( key_code == KeyEvent.KEYCODE_BACK && event.getAction() == KeyEvent.ACTION_UP )
            this.clearFocus();

        return super.onKeyPreIme( key_code, event );
    }
} 
```

而在 xml 中，只需使用`<yourPackage.EditTextV2>`而不是`<EditText>`.

**注意：**您可能需要向此类添加/删除构造函数，具体取决于您支持的最小 API。我建议将它们全部添加并删除那些`super()`调用带有红色下划线的那些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-04-26T06:26:11.707

对于使用**Kotlin**和**Material Design**的任何人，您都可以使用：

```
class ClearFocusEditText: TextInputEditText {
    constructor(context: Context) : super(context)
    constructor(context: Context, attrs: AttributeSet) : super(context, attrs)
    constructor(context: Context, attrs: AttributeSet, defStyleAttr: Int) : super(context, attrs, defStyleAttr)

    override fun onKeyPreIme(keyCode: Int, event: KeyEvent?): Boolean {
        if(keyCode == KeyEvent.KEYCODE_BACK) {
            clearFocus()
        }

        return super.onKeyPreIme(keyCode, event)
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T16:56:08.887

您可以使另一个`Views`焦点成为焦点，例如`ImageView`. 确保在触摸模式下使其可聚焦，使用`setFocusableInTouchMode(true)`和 on `onResume()`make that `View`to `requestFocus()`。

您也可以创建一个`View`0 维的虚拟模型并执行上述相同的步骤。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T06:21:41.023

添加比您的 EditText 更高的视图，如下所示：

```
<LinearLayout
    android:layout_width="0px"
    android:layout_height="0px"
    android:focusable="true"
    android:focusableInTouchMode="true" /> 
```

还要隐藏键盘在 onBackPressed() 中添加：

```
((InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE)).hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-19T11:26:27.903

我正在通过一些编辑为 Kacy 答案提供 kotlin 等效代码

```
class CustomSearch @JvmOverloads constructor(context: Context, attrs: AttributeSet? = 
null, defStyle: Int = 0):AppCompatEditText(context, attrs, defStyle) {
override fun onKeyPreIme(keyCode: Int, event: KeyEvent?): Boolean {
if (keyCode == KeyEvent.KEYCODE_BACK){
    val imm:InputMethodManager = context.getSystemService(Activity.INPUT_METHOD_SERVICE) as InputMethodManager
    imm.hideSoftInputFromWindow(this.windowToken, 0)
    this.clearFocus()
    //this.findFocus()
}
return true
} 
```

注意：我返回 true，这解决了我的问题，即从编辑文本中移除焦点并隐藏软输入

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2018-07-13T20:18:21.257

这可能是一个可能的解决方案：

```
EditText et;
et.setOnKeyListener(new View.OnKeyListener() {

        @Override
        public boolean onKey(View view, int i, KeyEvent keyEvent) {
            if(i == KeyEvent.KEYCODE_BACK) {
                et.clearFocus();
                return true;
            }
            else return false;
        }
    }); 
```

# java - 将常规数据保存到文件

> ID：13975060
> 
> 赞同：1
> 
> 时间：2012-12-20T15:09:03.713
> 
> 标签：java, file

我是java新手！我使用此代码将数据写入 .txt 文件：

```
try { 
String content = "This is the content to write into file";
File file = new File("/users/mkyong/filename.txt");

// if file doesnt exists, then create it

if ( !file.exists() ) {
    file.createNewFile();
}
FileWriter fw = new FileWriter( file.getAbsoluteFile() );
BufferedWriter bw = new BufferedWriter( fw );
bw.write( content );
    bw.NewLine();
bw.close();
System.out.println("Done");
} catch (IOException e) {
e.printStackTrace();
} 
```

名字 姓氏 注册号码

乔

最大限度

1238

我想将每个数据存储在其名称下方：

我想要这样：

FName LName Reg_Num

乔最大 1238

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:14:31.027

该代码应将“这是要写入文件的内容”输出到文本文件中。这些名字是从哪里来的？

有关 Java 中的制表，[请参阅此主题](https://stackoverflow.com/questions/2585337/how-to-use-tab-space-while-writing-in-text-file)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:17:31.197

您可以使用**\t**在字段之间添加选项卡。示例代码可能类似于：

```
 try {
        String firstName = "Joe";
        String lastName = "Doe";
        String regNum = "123";

        File file = new File("/home/parvin/Desktop/filename.txt");

        if (!file.exists()) {
            file.createNewFile();
        }

        FileWriter fw = new FileWriter(file.getAbsoluteFile());
        BufferedWriter bw = new BufferedWriter(fw);
        bw.write("FirstName\t LastName\t RegNum\t \n");
        bw.write(firstName + "\t" + lastName + "\t" + regNum + "\t" + "\n");
        bw.newLine();
        bw.close();

        System.out.println("Done");

    } catch (IOException e) {
        e.printStackTrace();
    } 
```

# ruby-on-rails - 如何配置 Rails 路由以适应 i18n

> ID：13975061
> 
> 赞同：7
> 
> 时间：2012-12-20T15:09:04.157
> 
> 标签：ruby-on-rails, internationalization

我正在为 Rails 应用程序添加国际化，并且或多或少地遵循了相关的[Rails Guide](http://guides.rubyonrails.org/i18n.html)和[Railscast](http://railscasts.com/episodes/138-i18n-revised)。

我遇到了两个问题：

1.  如何添加重定向到当前语言环境的“主页”链接。目前我有 root_path 链接，但由于 routes.rb 中的行旨在获取未作用域的根，这些链接都失败了。这意味着 root_path 始终指向默认语言环境，而不是当前语言环境。
2.  我已在本地设置并运行所有内容（上述问题除外），但部署到 Heroku 时，所有 url 似乎都在通过我的路由文件丢弃并被其中一个捕获所有内容。他们正在重定向到 defulat 语言环境下的“/”。

我的设置如下

application_controller.rb

```
before_filter :set_locale
def default_url_options(options = {})
  {locale: I18n.locale}
end

private
def set_locale
  I18n.locale = params[:locale] if params[:locale].present?
end 
```

路线.rb

```
scope ":locale", locale: /#{I18n.available_locales.join("|")}/  do
  all_my_routes

  # handles /valid-locale
  root to: 'home#index', as: "localized_root"
  # handles /valid-locale/fake-path
  match '*path', to: redirect { |params, request| "/#{params[:locale]}" }
end

# handles /
root to: redirect("/#{I18n.default_locale}")

# handles /bad-locale|anything/valid-path
match '/*locale/*path', to: redirect("/#{I18n.default_locale}/%{path}")

# handles /anything|valid-path-but-no-locale
match '/*path', to: redirect("/#{I18n.default_locale}/%{path}") 
```

我家链接：

```
<%= link_to "Home", root_path %> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T10:47:57.160

经过一番来回之后，我最终得到了这个工作。问题是所有路线的捕获量是 a) 捕获量超出了我的预期，并且 b) 在开发与部署中的行为显然不同（为什么我不确定）。

无论如何，首先我更改了范围以使其可选（注意括号）：

```
scope "(:locale)", ..... 
```

这确保即使没有设置区域设置，范围内的路由也是有效的（这主要是为了处理我在回调等方面遇到的一些问题）。

这让我可以放弃这两`root to`行，只保留

```
root to "home#index" 
```

我删除了“handles /valid-locale/fake-path”行，这导致“/”路径出现问题。

然后在范围之后保留以下全部内容（注意最后一个）。

```
# handles /bad-locale|anything/valid-path
match '/*locale/*path', to: redirect("/#{I18n.default_locale}/%{path}")

# handles /anything|valid-path-but-no-locale
match '/*path', to: redirect("/#{I18n.default_locale}/%{path}"), constraints: lambda { |req| !req.path.starts_with? "/#{I18n.default_locale}/" }

# handles /
match '', to: redirect("/#{I18n.locale}") 
```

作为一个兴趣点，我还必须更新 action_mailer 来处理新的本地化 url。

```
config.action_mailer.default_url_options = { :host => 'path.to.my.app.com', :locale => I18n.locale } 
```

现在一切似乎都在工作！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-20T15:30:59.047

有一颗宝石可以出色地完成这项工作。( [https://github.com/svenfuchs/routing-filter](https://github.com/svenfuchs/routing-filter) ) 您应该将以下代码添加到您的 Gemfile 中：

```
gem 'routing-filter' 
```

并将以下内容添加到您的 routes.rb 文件中

```
Rails.application.routes.draw do
  filter :locale
  ...
end 
```

希望能帮助到你...

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-20T15:17:22.753

这篇博文实际上非常详细地解释了它：

当似乎没有任何工作时，正是我正在寻找的东西

[http://dhampik.com/blog/rails-routes-tricks-with-locales](http://dhampik.com/blog/rails-routes-tricks-with-locales)

```
 scope "/:locale", locale: /#{I18n.available_locales.join("|")}/ do
    resources :posts    
    root to: "main#index"
  end

  root to: redirect("/#{I18n.default_locale}", status: 302), as: :redirected_root

  get "/*path", to: redirect("/#{I18n.default_locale}/%{path}", status: 302), constraints: {path: /(?!(#{I18n.available_locales.join("|")})\/).*/}, format: false 
```

从 root 重定向到默认 lang 并执行许多其他操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T05:03:06.407

看起来你可以使用[我在 Railscasts 上写的评论](http://railscasts.com/episodes/138-i18n-revised?view=comments#comment_158817)来帮助你的 I18n 路由。凉爽的！

至于您的第一个问题，您可以重新路由`root to: redirect("/#{I18n.default_locale}")`以重定向到`I18n.locale`吗？

至于您的第二个问题，您是否也使用了 Railscast 评论中的测试或有自己的测试，如果是，它们通过了吗？Heroku 是否为您提供任何错误日志？( `$ heroku logs`)。我已经将这些路由部署到 Heroku 按预期工作，所以我认为 Heroku 有可能不是问题。

# java - 堆栈扩展向量

> ID：13975062
> 
> 赞同：11
> 
> 时间：2012-12-20T15:09:05.120
> 
> 标签：java, vector, stack

如果堆栈扩展向量是否意味着堆栈已同步？

Vector Java 文档中的注释

> 与新的集合实现不同，Vector 是同步的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T15:12:26.137

是的，它是同步的，但根据[Javadocs](http://docs.oracle.com/javase/7/docs/api/java/util/Stack.html)，您应该更喜欢 a[`Deque`](http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html)而不是`Stack`.

从[`Stack`Javadocs](http://docs.oracle.com/javase/7/docs/api/java/util/Stack.html)：

> Deque 接口及其实现提供了一组更完整和一致的 LIFO 堆栈操作，应优先使用此类。例如：
> 
> `Deque<Integer> stack = new ArrayDeque<Integer>();`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T15:16:48.793

是的，从 Vector 继承的方法在 Stack 中保持同步。自己的 Stack 方法 peek、pop、search 在 Stack 中同步。Stack.push 和 Stack.empty 方法不同步，但是

```
public boolean empty() {
    return size() == 0;
}

public E push(E item) {
    addElement(item);
    return item;
} 
```

这两种方法都在调用 Vector 的同步方法，因此 Stack.empty 和 Stack.push 是线程安全的。

# c# - `_[....]` 是一个有效的标识符吗？

> ID：13975063
> 
> 赞同：13
> 
> 时间：2012-12-20T15:09:07.353
> 
> 标签：c#, asp.net, .net-4.5, httpapplication

我刚刚安装了来自 Microsoft 的 .NET 4.5 参考源，因为我正在尝试调试我看到的问题，并且在`HttpApplication.cs`.

```
// execution step -- call asynchronous event
internal class AsyncEventExecutionStep : IExecutionStep { 
    private HttpApplication     _application;
    private BeginEventHandler   _beginHandler;
    private EndEventHandler     _endHandler;
    private Object              _state; 
    private AsyncCallback       _completionCallback;
    private AsyncStepCompletionInfo _asyncStepCompletionInfo; // per call 
    private bool                _[....];          // per call 
    private string              _targetTypeStr; 
```

注意倒数第二行`private bool _[....]; // per call`。

是否是`_[....]`有效标识符（在任何编译级别，包括 IL）或自编译后源是否已更改？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T15:13:40.027

不; 那是无效的。

在发布源代码之前，微软通过一个编写不佳的内部工具运行它，该工具将所有员工姓名替换为`[....]`.
不幸的是，该工具也取代了实际来源。

这实际上适得其反；通过查看已编译的元数据（例如，在 Reflector 中），您可以找出大部分隐藏的源代码实际上是什么。

您的特定行应该是`private bool _sync`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T15:41:23.093

虽然@SLaks 的答案很可能是正确的，但重要的是要注意这在 IL 级别是一个潜在有效的标识符，ECMA 335 Partition II，第 5.3 节指出：

> [T]ILAsm 语法允许使用可以使用 Unicode 字符集形成的任何标识符（参见第 I 部分）。为此，标识符应放在单引号内。

以下是在控制台上打印出 False 的完全有效的 IL：

```
.assembly 'ValidIDTest'
{
}

   .class public TestClass
   {
    .field static public bool '_[...]'

    .method static void Main() cil managed
    {
        .entrypoint
        ldsfld bool TestClass::'_[...]'
        call void [mscorlib]System.Console::WriteLine(bool)
        ret    
    }
   } 
```

# ios - MobileSafari（iOS Safari）：有没有办法防止水平/垂直滚动“捕捉”？

> ID：13975064
> 
> 赞同：4
> 
> 时间：2012-12-20T15:09:10.783
> 
> 标签：ios, css, html, ipad, mobile-safari

我有一个 Web 应用程序，它显示 2D 图表的可滚动视图，我试图让用户更轻松地让视图始终跟随手指。

默认行为是，大多数滑动动作都会导致垂直或水平受限的移动，这有助于阅读文本，但对我的用例而言并没有太大帮助。

编写自定义触摸事件代码以直接设置滚动是一种可能性，但这使得很难恢复滚动势头。此外，原生功能能够在幕后做一些特殊的事情，比如暂停 JS 操作并避免重新渲染，这有助于整体性能。

是否有可以控制方向控制行为的 CSS 样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:36:30.040

我还没有找到指定行为的方法，但我发现当我放下手指而不移动它然后在一秒钟后开始移动它时，它可以让我向各个方向滚动。

也许看看[iScroll](http://cubiq.org/iscroll-4)或类似的东西是否适合你，因为它包括动量，你可以明确指定是否要锁定方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:52:03.633

您可以使图表溢出页面大小：

```
#diagram{
    width: 2000px;
} 
```

所有其他部分应固定：

```
#menu, etc{
    position: fixed
} 
```

这样您就可以使用没有方向约束的页面本身的滚动。

为防止 iPad 调整内容大小以适应设备宽度，请添加以下内容`<head>`：

```
<meta name="viewport" content="initial-scale=1, user-scalable=no, width=2000px"> 
```

# javascript - 寻找特定的讲座

> ID：13975070
> 
> 赞同：-2
> 
> 时间：2012-12-20T15:09:35.553
> 
> 标签：javascript, animation, real-time

我正在寻找一个特定的编程/软件开发讲座，演讲者谈论从代码到结果的实时反馈。他展示了他如何更改代码和结果（生成的树）实时更改。他还使用鼠标滚轮更改代码中的变量值。

他展示了一个他写的关于编辑动画的软件（一片落叶）他还展示了一个他写的软件，一个可视化的“捕食者猎物公式”

我也知道他曾经为苹果工作

任何事物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:14:47.497

我认为您在谈论 Bret Victor 的“原则性发明”。也许堆栈溢出的主题，但它真的很有趣：

[http://vimeo.com/36579366](http://vimeo.com/36579366)

# java - Eclipse SDK 3.2.0 JAVA 到 Oracle 存储过程

> ID：13975074
> 
> 赞同：1
> 
> 时间：2012-12-20T15:09:47.347
> 
> 标签：java, sql, eclipse, oracle

Eclipse SDK 3.2.0 JAVA 到 Oracle 11g 存储过程。我正在尝试调用存储过程并返回输出。

我的代码如下。

我收到的错误消息是`ORA-00922: missing or invalid option`

### Java代码片段：

```
ResultSet rs2 = st.executeQuery("set serveroutput on size unlimited VARIABLE VAR_CV_1 REFCURSOR; execute SP_FAM_VOLWEEKLY(CV_1=> :VAR_CV_1,p_report_type=>0,p_type => 2,p_num_week =>5,P_GROUPBY_GROUP =>1,p_groupby_cpty  =>0,p_groupby_desk =>0,p_groupby_ccy =>1,p_groupby_t_tz =>1,P_GROUPBY_U_LOCALE=>1);PRINT VAR_CV_1;");

while (rs2.next()) {       
    if (rs != null && rs2.next()) {
        System.out.println(rs2.getString("CCY"));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:21:53.487

`set serveroutput`是一个 SQLplus 语句，它既不是 Oracle 的 SQL 的一部分，也不是 PL/SQL 的一部分。所以它在您使用的环境（Java 客户端、OJDBC、Oracle 服务器）中不可用。

`EXECUTE`, `VARIABLE`,的情况也是如此`PRINT`。

此外，除非使用 BEGIN/END 块从 SQL 切换到 PL/SQL，否则不能一次执行多个语句。

**更新：**

您可能正在寻找这样的代码：

```
String query = "begin SP_FAM_VOLWEEKLY(CV_1 => ?, p_report_type=> 0, p_type => 2, p_num_week => 5, P_GROUPBY_GROUP => 1, p_groupby_cpty  => 0, p_groupby_desk => 0,  p_groupby_ccy => 1, p_groupby_t_tz => 1, P_GROUPBY_U_LOCALE => 1); end;";

CallableStatement stmt = conn.prepareCall(query);

// register the type of the out param
stmt.registerOutParameter(1, OracleTypes.CURSOR);

stmt.execute();
ResultSet rs = (ResultSet) stmt.getObject(1);

while (rs.next()) {
    System.out.println(rs.getString("CCY"))
} 
```

# javascript - 如果 window.location.host 属性等于特定值，如何加载不同的文档

> ID：13975077
> 
> 赞同：0
> 
> 时间：2012-12-20T15:09:55.433
> 
> 标签：javascript, html

我希望我网站中的网页自动加载不同的文档或执行一段代码 if `window.location.host == "subdomain.mywebsite.com"`并且它应该加载一个新文档 if `window.location.host == "mywebsite.com"`。

我曾尝试将 if...else 语句与逻辑运算符一起使用，但它似乎不起作用，这是我的代码。

```
<!DOCTYPE html>
<html>
<script>
  var ATurl=window.location.host;
  document.write(ATurl);
  if(ATurl == downloads.wping.tk) {
    document.write("--an html function to execute here--");
  )
  else {
    document.write("--another html function to execute here!--");
  }
 </script>
</html> 
```

有人可以帮我写代码。也许在某个地方错了！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:21:30.483

您的代码中有两处错误

*   在第 8 行 `)`应替换为 a`}`
    以正确关闭 if 语句

*   在第 6 行

    `if(ATurl == downloads.wping.tk) {`
    您正在尝试访问 in 您想要与String 进行比较的属性，因此请`tk`放置`wping``downloads`
    `ATurl``"``downloads.wping.tk`

那么你应该以这个结束

```
<!DOCTYPE html>
<html>
<script>
  var ATurl= window.location.host;
  document.write(ATurl);
  if(ATurl == "downloads.wping.tk") {
    document.write("--an html function to execute here--");
  }
  else {
    document.write("--another html function to execute here!--");
  }
 </script>
</html>​ 
```

这是给你的[小提琴](http://jsfiddle.net/NFPEh/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:15:23.463

您需要在字符串周围加上引号。`if`此外，您使用错误类型的括号（括号）关闭了

```
if (window.location.host == 'downloads.wping.tk') {
   // do something
} else {
   // do something else
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:14:56.820

```
 ...
  ) //SHOULD BE A } HERE
  else {
  ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T15:16:21.680

`downloads.wping.tk`不符合您的预期。尝试这个：

```
it( ATurl !== "mywebsite.com" ) {
    document.location = window.location.protocol + "://mywebsite.com/";
} 
```

`document.write()`没有必要/没有意义。

还要习惯于查看浏览器的 JavaScript 控制台，它会告诉您代码中的任何语法错误。

# excel - 错误：需要对象：字典对象的“[未定义]”

> ID：13975082
> 
> 赞同：0
> 
> 时间：2012-12-20T15:10:10.170
> 
> 标签：excel, vbscript, vba

***要求：***

请阅读以下模板：

```
PID     Status      LPID

10       Closed      25
11       Open        25
31       Open        31
25       Closed      25
54       Open        31
17       Open        17
20       Closed      31
88       closed      77
77       closed      77
101      Closed      66
102      closed      220 
```

现在当 PID!= LPID 时，该 PID 被定义为 CPID（子进程 ID），否则它是一个 PPID（父进程 ID）

**更新**可能有一些条目说 101 和 102，它们是孩子，但他们的父母没有自己的 etires，因此 66,220 不应该出现在输出结果中`66 Parent`，`220 Parent`也不应该有这样的输出。

现在我正在寻找一个代码，它将告诉哪个是父级，哪个是子级 - 意味着在另一张表中标记它们。同时我想列出所有 CPID，PPID 在同一行，如果任何 PPID 有子进程他们自己。输出如下所示

```
PID   Type Of Process?    Child1   Child1   Child3 .... ChildN
10       Child
11       Child
31       Parent             54      20
25       Parent             10      11
54       Child
17       Parent
20       Child
88       Child
77       Parent             88 
```

我已经使用 VBScript 编写了一个代码，但是使用实际工作表太慢了。对于 2500 个数据，它需要将近 1 小时。所以我想要一个比我的更快的过程。

我写了下面的代码来满足一些要求：但是得到一个无法理解的错误。

你能帮我吗？我尝试了两种语法`Add`或`=`- 没有任何帮助。

选项显式

```
Class cP
 Public m_sRel
 Public m_dicC
    Private Sub Class_Initialize()
     m_sRel     = "Child"
     Set m_dicC = CreateObject("Scripting.Dictionary")
    End Sub
    Public Function show()
     show = m_sRel & " " & Join(m_dicC.Keys)
    End Function
End Class

Dim objSheet1,objSheet2,TotalRows,TotalcolCopy,strPathExcel1
Dim oXls  : Set oXls = CreateObject("Excel.Application")
Dim dicP  : Set dicP = CreateObject("Scripting.Dictionary")
Dim nRow,nP

strPathExcel1 = "D:\Finalscripts\test.xlsx"
oXls.Workbooks.open strPathExcel1
'oXls.Workbooks.Open(oFs.GetAbsolutePathName("Test.xlsx"))
Set objSheet1 = oXls.ActiveWorkbook.Worksheets("A")
Set objSheet2 = oXls.ActiveWorkbook.Worksheets("B")

TotalRows=oXls.Application.WorksheetFunction.CountA(objSheet1.Columns(1)) - 3
TotalcolCopy=oXls.Application.WorksheetFunction.Match("ABC", objSheet1.Rows(3), 0)

objSheet1.Range(objSheet1.Cells(4,1),objSheet1.Cells(TotalRows,TotalcolCopy)).Copy(objSheet2.Range("A1"))
objSheet2.Range(objSheet2.Cells(1,2),objSheet2.Cells(TotalRows,TotalcolCopy-1)).Delete(-4159)
'Dim aData : aData=objSheet2.Cells.SpecialCells(12)'xlCellTypeVisible
TotalRows = oXls.Application.WorksheetFunction.CountA(objSheet2.Columns(1))
Dim aData : aData = objSheet2.Range("A1:B"&TotalRows)

'MsgBox(LBound(aData, 1)&"And"&UBound(aData, 1))

   For nRow = LBound(aData, 1) To UBound(aData, 1)

     Set dicP(aData(nRow, 1)) = New cP

   Next

   For nRow = LBound(aData, 1) To UBound(aData, 1)

        If aData(nRow, 1) = aData(nRow, 2) Then
           dicP(aData(nRow, 1)).m_sRel = "Parent"
        Else
           dicP(aData(nRow, 2)).m_dicC.Add   aData(nRow, 1), 0         '(aData(nRow, 1)) = 0
        End If

   Next

    objSheet2.Cells.ClearContents'To clear all the previous contenets of the sheet#2

    nRow=1
    For Each nP In dicP.Keys()

    objSheet2.Cells(nRow,1).Value=nP
    objSheet2.Cells(nRow,2).Value=dicP(nP).m_sRel

       'WScript.Echo nP, dicP(nP).show()

    nRow=nRow+1  
    Next 
```

*错误：*需要对象：行中的“[未定义]”`dicP(aData(nRow, 2)).m_dicC.Add aData(nRow, 1), 0 '(aData(nRow, 1)) = 0`

**编辑：**为了得到子列表，我用上面的代码写了下面的代码：

```
 For Each nP In dicP.Keys()

    objSheet2.Cells(nRow,1).Value=nP
    objSheet2.Cells(nRow,2).Value=dicP(nP).m_sRel
    objSheet2.Range("C"&nRow).Value=dicP(nP).m_dicC.Keys

       'WScript.Echo nP, dicP(nP).show()

    nRow=nRow+1  
       Next 
```

但是期望的输出没有来，你能在这里建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:09:18.903

我不怪你找不到问题。您的代码难以阅读、调试或弄清楚您打算做什么。

话虽如此，问题在于`dicP(aData(nRow,2))`尚未定义，因此您无法访问该`m_dicC`属性，因为它返回一个空变量而不是对象。当您尝试调用该属性时，您会收到您指示的错误消息。

您还可以使用更简单的脚本复制错误：

```
Dim dicP: Set dicP = CreateObject("Scripting.Dictionary")
dicP("test").JumpUpJumpUpAndGetDown 'Silly I know. 
```

由于没有对应的对象，代码不知道如何处理我传递的方法调用，并指示需要一个对象。

我的猜测是你要么打算这样做：

```
 For nRow = LBound(aData, 1) To UBound(aData, 1)
     Set dicP(aData(nRow, 1)) = New cP
     'Also add a cP for the nRow, 2
     Set dicP(aData(nRow, 2)) = New cP
   Next 
```

或这个：

`dicP(aData(nRow, 1)).m_dicC.Add aData(nRow, 1), 0`注意`(nrow, 1)`而不是`(nrow, 2)`

我建议至少在您的代码中添加注释，因为即使您是将来维护它的人，它似乎也过于复杂并且很难掌握它在做什么。您可能会忘记它是如何工作的，并且需要花一些时间（就像我所做的那样）弄清楚发生了什么。

# asp.net-mvc - 如何为这个连接 3 个实体的 LINQ 使用（左/右）外连接？

> ID：13975086
> 
> 赞同：0
> 
> 时间：2012-12-20T15:10:29.503
> 
> 标签：asp.net-mvc, linq, entity-framework, outer-join

使用 MVC 3，EF4.1：
构建一个测验屏幕，我将加入三个实体：步骤、问题、响应

每个步骤可以有很多问题，每个问题可以有一个或没有答案

我的问题是当我的查询没有答案时，它会返回没有问题的步骤。如何将外部联接（左/右）合并到此 LINQ 中？

```
var steps = from s in db.Steps
                    join r in db.Responses.Where(x => x.ReviewID == id)
                           on s.StepID equals r.Question.StepID into g
                    orderby s.StepOrder
                    select new Quiz
                    {
                        StepID = s.StepID,
                        Title = s.Title,
                        Results = from x in g
                                  orderby x.Question.DisplayOrder
                                  select new Result
                                  {
                                      QuestionID = x.Question.QuestionID,
                                      DisplayOrder = x.Question.DisplayOrder,
                                      Choices = x.Question.Choices,
                                      ControlType = x.Question.ControlType,
                                      QuestionText = x.Question.QuestionText,
                                      AnswerValue = x.AnswerValue
                                  }
                    }; 
```

问题模型：

```
public class Question
    {
        public Question()
        {
            this.Responses = new List<Response>();
        }

        public int QuestionID { get; set; }
        public string QuestionText { get; set; }
        public Nullable<bool> Required { get; set; }
        public int DisplayOrder { get; set; }
        public int StepID { get; set; }
        public Nullable<int> DataType { get; set; }
        public Nullable<int> ControlType { get; set; }
        public string Choices { get; set; }
        public Nullable<int> MaxLength { get; set; }
        public virtual ICollection<Response> Responses { get; set; }
        public virtual Step Step { get; set; }
        public string NumberedQuestion
        {
            get { return String.Format("{0}. {1}", DisplayOrder, QuestionText); }
        }
    } 
```

回复：

```
public class Response
    {
        public int ResponseID { get; set; }
        public int UserID { get; set; }
        public int QuestionID { get; set; }
        public string AnswerValue { get; set; }
        public int ReviewID { get; set; }
        public virtual Question Question { get; set; }
    } 
```

脚步：

```
public Step()
        {
            this.Questions = new List<Question>();
        }

        public int StepID { get; set; }
        public int ReviewID { get; set; }
        public string Title { get; set; }
        public string Description { get; set; }
        public int StepOrder { get; set; }
        public virtual ICollection<Question> Questions { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:46:24.367

不是很漂亮......但它应该做的;）

```
var result =
    from step in db.Steps

    let questions = 
        db.Questions.Where(item => item.StepID == step.StepID)
    let responses = 
        db.Responses.Where(item => 
                item.ReviewID == id 
                && questions.Any(q => q.QuestionID == item.QuestionID))

    select new Quiz
    {
        StepID = step.StepID,
        Title = step.Title,
        Results =
            from question in questions.OrderBy(item => item.DisplayOrder)
            select new Result
            {
                QuestionID = question.QuestionID,
                DisplayOrder = question.DisplayOrder,
                Choices = question.Choices,
                ControlType = question.ControlType,
                QuestionText = question.QuestionText,
                AnswerValue = 
                    responses.Any(item => item.QuestionID == question.QuestionID)
                    ? responses.First(item => 
                        item.QuestionID == question.QuestionID).AnswerValue
                    : null
            }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:16:58.913

问题是你从回答中得到问题，所以你只得到有回答的问题。如果你得到每个步骤的问题，然后每个问题的响应，它应该工作。

```
var steps = from s in db.Steps
            orderby s.StepOrder
            select new Quiz
            {
                StepID = s.StepID,
                Title = s.Title,
                Results = from question in s.Questions
                          orderby question.DisplayOrder                              
                          select new Result
                          {
                              QuestionID = question.QuestionID,
                              DisplayOrder = question.DisplayOrder,
                              Choices = question.Choices,
                              ControlType = question.ControlType,
                              QuestionText = question.QuestionText,
                              AnswerValue = question.Responses
                                                    .Where(r => r.ReviewID == id)
                                                    .Select(r => r.AnswerValue)
                                                    .FirstOrDefault()
                          }
            }; 
```

# css - 电子邮件客户端忽略内部样式表

> ID：13975087
> 
> 赞同：3
> 
> 时间：2012-12-20T15:10:30.440
> 
> 标签：css, html-email

正常 Web 开发中的最佳实践要求将样式放在样式标签之间或加载样式表；但是，我发现一些电子邮件客户端会忽略任何样式标签，只执行内联样式 (www.campaignmonitor.com)。我可以处理，但我不确定 CSS 是否支持内联媒体查询。我希望我的电子邮件在桌面上显示有所不同。是否支持与此类似的内容？：

```
<div id="myDiv" style="@media screen and (max-width:480px;){ color:black; }"></div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T15:11:32.940

HTML 电子邮件是完全不同的野兽。您需要像 1999 年那样对它们进行编码。使用非常有限的一组标签并确保所有或您的样式都是内联的。使用表格进行布局。

要使用媒体查询，您需要同时执行这两项操作。

我建议做的是首先使用所有内联样式创建您的电子邮件。然后，当您对它感到满意时，您可以添加对移动设备的支持。

要添加对移动设备的支持，请将媒体查询添加到 head 标签并用于`!important`覆盖任何内联样式。

这是一个示例： [针对移动电子邮件进行优化](http://www.campaignmonitor.com/blog/post/3163/optimizing-your-emails-for-mobile-devices-with-media/)

这是一个有用的图表，详细说明了电子邮件客户端的 CSS 支持。 [http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:16:09.680

我不认为他们像那样内联工作，您可能必须将样式表嵌入 HTML 电子邮件模板本身（例如`<style>@media {...}</style>`）。

即使这似乎是一件非常狡猾的事情。HTML 电子邮件是一个巨大的痛苦，因为标准和 CSS 支持落后了大约十年，流行的电子邮件客户端在支持哪些属性和样式类型方面存在巨大差异。

一般来说，保持简单并使用带有所有内联 CSS 的旧式基于表格的布局是可行的方法。Campaign Monitor 提供了[对主要电子邮件客户端和设备中各种 CSS 属性的支持的出色图表](http://www.campaignmonitor.com/css/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:25:59.367

解决电子邮件客户端中 HTML 无法正确呈现问题的常见解决方法是尽您所能，并在顶部有一个突出的链接，上面写着： **“电子邮件显示不正确？在浏览器中查看。”**

Ray Kurzweil 的每周时事通讯爆炸就是这样做的，而且它的格式很好，做得很好，我总是阅读它。（这是内容和演示的完美结合）。

![在此处输入图像描述](../Images/4cee6c272acf217ba22a7bb60435dcd9.png)

# xml - XSLT 从 XML 中过滤元素

> ID：13975099
> 
> 赞同：2
> 
> 时间：2012-12-20T15:11:06.430
> 
> 标签：xml, xslt

我有一个如下所示的 XML。

```
<d2p1:Application> 
 <d2p1:Identifier>0001482022534</d2p1:Identifier> 
 <d2p1:Channel>Web</d2p1:Channel> 
 <d2p1:Type>Change</d2p1:Type> 
 <d2p1:Status>Received</d2p1:Status> 
 <d2p1:Value>Received</d2p1:Value> 
 <d2p1:FilterList> 
  <d2p1:Filter>Channel</d2p1:Filter> 
  <d2p1:Filter>Type</d2p1:Filter> 
  <d2p1:Filter>Value</d2p1:Filter> 
 </d2p1:FilterList> 
</d2p1:Application> 
```

期望的输出：

```
<d2p1:Application> 
 <d2p1:Channel>Web</d2p1:Channel> 
 <d2p1:Type>Change</d2p1:Type> 
 <d2p1:Value>Received</d2p1:Value> 
</d2p1:Application> 
```

我想要的输出是从 XML 中删除不在其中的元素，`<FilterList>.`我需要一个 XSLT 来执行此操作。过滤器列表中的值是动态的。任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:39:23.420

一种方法是使用一个键来查找您的“过滤器”值

```
<xsl:key name="Filter" match="d2p1:Filter" use="." /> 
```

然后，您可以扩展 XSLT 标识转换以包含一个模板，该模板与键不返回任何内容的元素匹配。

```
<xsl:template match="d2p1:Application/*[not(key('Filter', local-name()))]" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:d2p1="d2p1">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="Filter" match="d2p1:Filter" use="." />

   <xsl:template match="d2p1:Application/*[not(key('Filter', local-name()))]" />

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例 XML 时（假设它包含前缀 d2p1 的命名空间声明），输出如下

```
<d2p1:Application xmlns:d2p1="d2p1">
   <d2p1:Channel>Web</d2p1:Channel>
   <d2p1:Type>Change</d2p1:Type>
   <d2p1:Value>Received</d2p1:Value>
</d2p1:Application> 
```

请注意，您必须相应地更改命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:36:43.617

如果您有使用标识模板复制所有内容然后覆盖您想要删除的内容的常规方法，那么问题就变成了如何识别您想要删除的那些内容。怎么样

```
<!-- NB - fix the xmlns:d2p1 to match the document -->
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
          xmlns:d2p1="urn:d2p1">

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="d2p1:Application/*[
      not(local-name() = ../d2p1:FilterList/d2p1:Filter)]" />
</xsl:stylesheet> 
```

这将删除其名称与同一元素的 FilterList`d2p1:Application`中包含的过滤器之一不匹配的任何子代（包括元素本身，如果没有）。`d2p1:Application``d2p1:FilterList``<d2p1:Filter>FilterList</d2p1:Filter>`

即使`d2p1:Application`您的文档中有多个元素，并且每个元素都由它自己控制`FilterList`（我假设您提供的 XML 是文档的片段而不是完整的示例，我认为缺少名称空间声明，这也将起作用）。

# android - Android - 在 vi deoView 中更改/重播视频

> ID：13975108
> 
> 赞同：7
> 
> 时间：2012-12-20T15:11:54.487
> 
> 标签：android, video, media-player, android-videoview

我正在开发的应用程序包含许多简短（1-2 秒）的视频。

视频显示在一个活动中。用户可以重播视频（可能在播放视频时）或更改实际视频。

部分代码更改视频：

```
String videoPath = getVideoPath();
videoView.setVideoPath(videoPath);
videoView.start(); 
```

这 3 行已经导致应用程序加载新视频并播放它。

视频完成后问题开始。从这一点开始加载新视频会导致很多问题（比如有时半部电影只播放声音，而屏幕是黑屏）。回放视频也有类似的问题（我最终从上面调用了 3 个通道）。

完成电影后似乎android释放资源或类似的东西（这就是为什么我设置相同的路径，当我想重播视频时）。

理想情况下，我希望视频在完成播放后简单地暂停并寻找电影开始（但我不能在 OnCompletedListener 中执行此操作，因为它已经将状态更改为停止......）。

我能以某种方式实现这一目标吗？（我的意思是->在完成视频暂停并开始搜索之后）

我已经尝试了暂停视频、暂停视频、设置 OnPreparedListener、设置 OnCompletedListener 的所有组合。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T15:50:33.113

尝试类似的东西

```
mVideoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer arg0) {
         mVideoView.start();

    }
});

mVideoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
    public void onCompletion(MediaPlayer mp) {
            mp.reset();
            mVideoView.setVideoPath(file.getAbsolutePath());
            mVideoView.start();
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-08T15:05:51.373

停止播放，更改视频路径，开始视频

```
videoView.stopPlayback();
videoView.setVideoPath(newVideoPath);
videoView.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T09:21:14.107

我通过以下方式重构了我的代码：每次我需要新视频时，我都会重新加载整个活动。它在大多数情况下都有效，但现在我有时会收到“无法打开媒体文件”错误，而不是在开始播放时出现视频黑屏。

它与android资源管理有关吗？我在 onCompletionListener 中释放 mediaPlayer。

有没有人在从外部存储播放许多视频时遇到这样的问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-14T14:04:00.240

你可以这样做：

```
videoView.setOnCompletionListener(MediaPlayer.OnCompletionListener { mp ->
            mp.seekTo(0);//go to second 0
            mp.start()// start again
        }) 
```

我在这个链接中发现： [https ://developer.android.com/reference/android/media/MediaPlayer](https://developer.android.com/reference/android/media/MediaPlayer)

# c++ - 测试链表中的指针

> ID：13975115
> 
> 赞同：0
> 
> 时间：2012-12-20T15:12:30.587
> 
> 标签：c++, search, linked-list

运行此代码时出现奇怪的结果

```
void MovieDatabase:: showMovie(const string mtitle){
    cout << "The informations about the" << mtitle << endl;
    for(Movie* cur = headMovie; cur ->next !=NULL; cur= cur->next){
        if(cur -> title == mtitle){
            cout <<"Movie title is "<<  cur ->title << endl;    
            //cout < "The name of director is " << cur -> firstNameOfDirector << endl;
            cout << "The last name of director is " << cur -> lastNameOfDirector <<endl;
            cout << "The year that the movie is released " << cur -> year << endl;
            cout << "The day that the movie is released " << cur -> day << endl;
            cout << "The month that the movie is released " << cur -> month << endl;
        }
    }
    cout << endl;
} 
```

这是我正在检查电影标题的代码，如果它们在链接列表中，我正在打印有关电影的详细信息。但是，作为输出，它只打印以下行

```
cout << "The informations about the" << mtitle << endl;` 
```

我不明白是什么原因有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:24:02.827

有两种可能：

1.  您的列表中没有标题为 的电影`mtitle`。
2.  您有一部电影具有该标题，但它是您列表中的最后一部电影。`while`一旦您到达最后一部电影（其`next == NULL`）而不检查它，您的循环就会结束。

在不知道您的列表内容的情况下，我们无法知道这里的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:21:01.167

检查以确保您的字符串确实相等，并且其中一个字符串中没有隐藏`\r`或`\n`尾随空格。

同样如评论中所述，您可能希望循环终止条件为`cur != NULL`and not `cur->next != NULL`。

# android - sql数据库在哪里？

> ID：13975117
> 
> 赞同：0
> 
> 时间：2012-12-20T15:12:35.920
> 
> 标签：android, database, android-sdk-2.3

我尝试使用 SQLite，但我不知道我做错了什么。

我做了一个插入记录的例子，它可以工作，但我看不到数据库。我正在使用真实的设备。

我发现（在互联网上）数据库应该在：/data/data/paquete.java.de.la.aplicacion/databases/database

但是这个文件夹似乎是空的。我尝试过使用 oi 文件管理器应用程序和 Eclipse 的文件资源管理器。

另一方面，我确信记录已被插入，因为如果我调试，我可以在 Log Cat 中看到它们。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:16:21.927

为了在手机上或通过 eclipse 查看数据库文件，您的设备需要 root。如果您想测试您的数据库以查看它的外观以及它是否正常工作，您可以在模拟器上运行您的应用程序并查看它。

[什么是生根..？！](http://en.wikipedia.org/wiki/Android_rooting "维基百科")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T15:16:28.620

您需要 root 才能看到数据库。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T16:53:20.053

只要应用程序是在调试模式下构建的，就不需要让设备植根。尝试

```
adb shell
run-as your.package.name
ls databases 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T10:13:37.747

使用模拟器，您具有 root 访问权限，您可以使用`sqlite3`它从模拟器 shell 中打开数据库。用于`.dump`转储数据库的所有内容。

所以你必须做的命令：

在模拟器上打开 shell：

`adb shell`

外壳内：

`cd /data/data/paquete.java.de.la.aplicacion/databases/databases`

`sqlite3 *yourdatabase.db*`

sqlite3内

`.dump`

Mit `.exit`geht 的 wieder raus aus sqlite3。

# c# - 使文本随其上方的矩形移动

> ID：13975119
> 
> 赞同：1
> 
> 时间：2012-12-20T15:12:45.927
> 
> 标签：c#, silverlight

我是silverlight的新手，所以我可能只是因为缺乏知识而遗漏了一些东西。我正在编写一个使用矩形的应用程序，您可以在它们生成后单击并拖动到屏幕周围。我有生成矩形的函数：

```
 public void formatBox(block b)
    {
        Rectangle Rec = new Rectangle();
        Rec.Height = 100;
        Rec.Width = 200;
        SolidColorBrush newBrush = new SolidColorBrush();
        newBrush.Color = b.blockColor;
        SolidColorBrush blackBrush = new SolidColorBrush();
        blackBrush.Color = Colors.Black;
        Rec.StrokeThickness = 4;
        Rec.Stroke = blackBrush;
        Rec.Fill = newBrush;
        Canvas.SetTop(Rec, generateY(b.locationY));
        Canvas.SetLeft(Rec, generateX(b.locationX));
        TextBlock blockname = new TextBlock();
        blockname.Text = b.blockText;
        blockname.FontSize = 25;
        canvas1.Children.Add(Rec);
        canvas1.Children.Add(blockname);
        Binding topbinding = new Binding("Top");
        Binding leftbinding = new Binding("Left");
        topbinding.Mode = BindingMode.OneWay;
        leftbinding.Mode = BindingMode.OneWay;
        topbinding.Source = Rec.GetValue(Canvas.TopProperty);
        leftbinding.Source = Rec.GetValue(Canvas.LeftProperty);
        blockname.SetBinding(Canvas.TopProperty, topbinding);
        blockname.SetBinding(Canvas.LeftProperty, leftbinding);
        Rec.MouseLeftButtonDown += new MouseButtonEventHandler(Handle_MouseDown);
        Rec.MouseMove += new MouseEventHandler(Handle_MouseMove);
        Rec.MouseLeftButtonUp += new MouseButtonEventHandler(Handle_MouseUp);
    } 
```

这些矩形是从一个块类构建的

```
public class block
    {
        public double locationX { get; set; }
        public double locationY { get; set; }
        public Color blockColor { get; set; }
        public string blockText { get; set; }
        public block(double x, double y, Color c, string s)
        {
            this.locationX = x;
            this.locationY = y;
            this.blockColor = c;
            this.blockText = s;
        }
    } 
```

还有我的鼠标事件处理程序：

```
 bool isMouseCaptured;
    double mouseVerticalPosition;
    double mouseHorizontalPosition;

    public void Handle_MouseDown(object sender, MouseEventArgs args)
    {
        Rectangle item = sender as Rectangle;
        mouseVerticalPosition = args.GetPosition(null).Y;
        mouseHorizontalPosition = args.GetPosition(null).X;
        isMouseCaptured = true;
        item.CaptureMouse();
    }

    public void Handle_MouseMove(object sender, MouseEventArgs args)
    {
        Rectangle item = sender as Rectangle;
        if (isMouseCaptured)
        {

            // Calculate the current position of the object.
            double deltaV = args.GetPosition(null).Y - mouseVerticalPosition;
            double deltaH = args.GetPosition(null).X - mouseHorizontalPosition;
            double newTop = deltaV + (double)item.GetValue(Canvas.TopProperty);
            double newLeft = deltaH + (double)item.GetValue(Canvas.LeftProperty);

            // Set new position of object.
            item.SetValue(Canvas.TopProperty, newTop);
            item.SetValue(Canvas.LeftProperty, newLeft);

            // Update position global variables.
            mouseVerticalPosition = args.GetPosition(null).Y;
            mouseHorizontalPosition = args.GetPosition(null).X;
        }
    }

    public void Handle_MouseUp(object sender, MouseEventArgs args)
    {
        Rectangle item = sender as Rectangle;
        isMouseCaptured = false;
        item.ReleaseMouseCapture();
        mouseVerticalPosition = -1;
        mouseHorizontalPosition = -1;
    } 
```

我试图移动的文本在 formatBox() 中称为块名。正如您在此处看到的那样，我已经尝试过 Binding，但我认为我对更简单的方法的了解存在差距。无论哪种方式，当触发鼠标事件处理程序时，我希望文本在块移动时移动。如何让文本随它移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:42:20.457

由于您已经有了鼠标处理程序，您可以跳过绑定并使用代码。（无论如何，绑定都不会按预期工作：文本将具有与反应角相同的坐标，因此它被绘制在矩形的顶部/左侧线上。这看起来很难看并且使文本难以阅读，您需要偏移文本，使其位于反应角内部或外部）。基本上你要做的就是`MouseDown`将一个标志置于高位以指示鼠标被按下，并记录鼠标所在的点。然后在`MouseMove`你检查标志：如果它打开，计算你的矩形的新位置，因为它是当前位置+从记录的点移动的距离`MouseDown`。文本的位置将是新位置 + 一些偏移量。

顺便说一句，我建议将诸如 formatBox 之类的方法拆分为多个较小的方法，并为变量选择更好的名称：这将使代码不仅更具可读性，而且更易于维护。

**编辑** 以确定要移动的矩形，对 MouseDwon 处理程序中的所有元素进行命中测试。像这样的东西：

```
Rectangle rectangleUnderMouse = null;
foreach( var rec in rectangles )
{
  if( VisualTreeHelper.HitTest( rec, pointWhereMouseIs ) )
  {
    rectangleUnderMouse = rec;
    break;
  }
} 
```

**编辑** 抱歉，我没有看到您询问要移动哪个文本块。这更容易：您可以`Dictionary<Rectangle,TextBlock>`在主类中保留一个：

```
public void formatBox(block b)
{
  //...
  myDictionary[ Rec ] = textblock;
}

public void Handle_MouseMove( object sender, MouseEventArgs args ) 
{
  //...
  textBlockForThisRect = myDictionary[ item ];
  //move textBlockForThisRect
} 
```

# jquery-ui - 我可以从 geonames JSON 响应中获取仅美国邮政编码吗？

> ID：13975123
> 
> 赞同：0
> 
> 时间：2012-12-20T15:12:53.443
> 
> 标签：jquery-ui, jquery-ui-autocomplete, geonames

嗨，我正在为邮政编码字段使用 jquery UI 自动完成插件。

jQuery UI 自动完成插件使用 geonames.org 的 JSON 响应。

这是我得到响应的代码：-

```
jQuery( "#"+prefix+"_zip" ).autocomplete({

        source: function( request, response ) {
            jQuery.ajax({
                url: "http://ws.geonames.org/postalCodeSearchJSON",
                dataType: "jsonp",
                data: {
                    style: "full",
                    maxRows: 12,
                    postalcode_startsWith: request.term
                },
                success: function( data ) {

                    response( jQuery.map( data.postalCodes, function( item ) {
                        return {
                            label: item.placeName + (item.adminCode1 ? ", " + item.adminCode1 : "") + ", " + item.postalCode + ", "+item.countryCode,
                            value: item.postalCode
                        }
                    }));
                                        jQuery('.ui-autocomplete').css('width', '188px');
                }
            });
        } 
```

现在，当将光标放在邮政编码字段并输入任何邮政编码时，它会建议我输入一个自动完成列表以输入否，或者我们可以说 jQuery 插件向我显示了我输入的代码的相对值。

现在我有一个自定义要求，我只想获取美国邮政编码的 JSON 响应。

我的意思是当在邮政编码字段中输入任何值时，它应该将美国相关的邮政编码显示为自动完成列表。

谁能告诉我如何只从 geonames.org 获得美国邮政编码 JSON 响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:19:14.927

您的网址可以将国家/地区作为参数传递，

例如墨西哥 [http://ws.geonames.org/searchJSON?&country=MX](http://ws.geonames.org/searchJSON?&country=MX)

美国 [http://ws.geonames.org/searchJSON?&country=US](http://ws.geonames.org/searchJSON?&country=US)

另一个很酷的事情是，如果你想让 api 返回墨西哥和美国的所有城市，你可以这样做，

[http://ws.geonames.org/searchJSON?&country=US,MX&username=tpassolano](http://ws.geonames.org/searchJSON?&country=US,MX&username=tpassolano)

注意：geonames 现在需要用户名，更新的 api 调用

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:13:19.697

您可以稍微修改您的请求并添加国家/地区选项：

```
jQuery("#"+prefix+"_zip").autocomplete({
    source: function( request, response ) {
        jQuery.ajax({
            url: "http://ws.geonames.org/postalCodeSearchJSON",
            dataType: "jsonp",
            data: {
                style: "full",
                maxRows: 12,
                postalcode_startsWith: request.term,
                country: "US"
            },
            success: function( data ) {
                response( jQuery.map( data.postalCodes, function( item ) {
                    return {
                        label: item.placeName + (item.adminCode1 ? ", " + item.adminCode1 : "") + ", " + item.postalCode + ", "+item.countryCode,
                        value: item.postalCode
                    }
                }));
                jQuery('.ui-autocomplete').css('width', '188px');
            }
        });
    }
}); 
```

[GeoNames Web 服务文档](http://www.geonames.org/export/web-services.html)中列出了邮政编码搜索的所有选项

# sql - 使用动态 SQL 检查所有行是否满足条件

> ID：13975131
> 
> 赞同：0
> 
> 时间：2012-12-20T15:13:19.443
> 
> 标签：sql, sql-server-2008, tsql, dynamic-sql

我在 SQL Server 2008 中有一个表，其中包含以文本形式存储的表达式的自定义验证条件，例如

```
StagingTableID    CustomValidation
----------------------------------
1                 LEN([mobile])<=30
3                 [Internal/External] IN ('Internal','External')
3                 ([Internal/External] <> 'Internal') OR (LEN([Contact Name])<=100)
... 
```

我有兴趣确定表中的所有行是否都通过条件语句。为此，我正在编写一个验证存储过程，它检查给定表中给定字段中的所有值是否满足给定条件。SQL 不是我的强项，所以在阅读[了这个问题](https://stackoverflow.com/questions/925195/select-all-records-dont-meet-certain-conditions-in-a-joined-table)之后，这是我第一次尝试解决这个问题：

```
EXEC sp_executesql N'SELECT @passed = 0 WHERE EXISTS (' +
                     N'SELECT * FROM (' +
                       N'SELECT CASE WHEN ' + @CustomValidationExpr + N' THEN 1 ' +
                       N'ELSE 0 END AS ConditionalTest ' +
                       N'FROM ' + @StagingTableName +
                     N')t ' +
                     N'WHERE t.ConditionalTest = 0)'
                  ,N'@passed BIT OUTPUT'
                  ,@passed = @PassedCustomValidation OUTPUT 
```

但是，我不确定嵌套查询是否可以重写为一个，或者在这种情况下是否有更好的方法来测试所有行的有效性？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:26:12.830

在我们回答最初的问题之前，您是否考虑过实施约束？这将首先防止不良数据进入您的数据库。还是这些必须在应用程序中动态设置？

```
ALTER TABLE StagingTable
    WITH CHECK ADD CONSTRAINT [StagingTable$MobileValidLength]
    CHECK (LEN([mobile])<=30)
GO

ALTER TABLE StagingTable
    WITH CHECK ADD CONSTRAINT [StagingTable$InternalExternalValid]
    CHECK ([Internal/External] IN ('Internal','External'))
GO

--etc... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:28:37.517

您应该能够减少至少一个这样的子查询：

```
EXEC sp_executesql N'SELECT @passed = 0 WHERE EXISTS (' +
                       N'SELECT 1 FROM ' +  @StagingTableName +
                       N'WHERE NOT(' + @CustomValidationExpr + N')) ' +
                  ,N'@passed BIT OUTPUT'
                  ,@passed = @PassedcustomValidation OUTPUT 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T16:11:29.217

您需要将表达式连接在一起。我同意@PinnyM 的观点，即一个`where`子句更容易用于全表验证。但是，下一个问题将是如何识别哪些行未通过哪些测试。我会等你在回答之前问这个问题（作为一个单独的问题而不是作为对此问题的编辑提出）。

要创建`where`子句，如下所示：

```
declare @WhereClause nvarchar(max);
select @WhereClause = (select CustomValidation+' and '
                       from Validations v
                       for xml path ('')
                      ) + '1=1'

select @WhereClause = replace(replace(@WhereClause, '&lt;', '<'), '&gt;', '>')) 
```

这种带有 和双选的奇怪结构`for xml path('')`是在 SQL Server 中连接值的最方便的方法。

此外，在执行 sp_executesql 调用*之前*将您的查询放在一起。它为您提供更多灵活性：

```
declare @sql nvarchar(max);
select @sql = '
select @passed = count(*)
from '+@StagingTableName+'
where '+@WhereClause 
```

这是通过所有验证测试的数字。失败的`where`条款是：

```
declare @WhereClause nvarchar(max);
select @WhereClause = (select 'not '+CustomValidation+' or '
                       from Validations v
                       for xml path ('')
                      ) + '1=0' 
```

# mysql - 将数据同时插入 MySQL 的更快方法

> ID：13975132
> 
> 赞同：6
> 
> 时间：2012-12-20T15:13:20.387
> 
> 标签：mysql, performance, insert, parallel-processing

我有一个包含大约 64 个子进程的并行进程，每个子进程都需要将数据插入到登陆表中。我目前正在使用 MySQL MyISAM 引擎，并且在插入之前和之后禁用键。

但是，这似乎是我过程中的一个巨大瓶颈。我相信 MySQL 是每次插入的表锁定，因此进程一直在等待写入。

刀片是独立的，不存在刀片冲突的危险。这也不需要交易或任何类似性质的东西。

是否有不同的引擎或方法来提高 MySQL 的插入/写入性能？

我曾考虑为每个进程实例化一个表，但这会使代码更复杂，这不是我的风格......

任何建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:17:12.313

如[`INSERT DELAYED`语法](http://dev.mysql.com/doc/en/insert-delayed.html)中所述：

> 该语句的`DELAYED`选项`INSERT`是标准 SQL 的 MySQL 扩展，如果您的客户端无法或不需要等待`INSERT`完成，则该选项非常有用。
> 
> `[ deletia ]`
> 
> 使用的另一个主要好处`INSERT DELAYED`是来自许多客户端的插入被捆绑在一起并写在一个块中。这比执行许多单独的插入要快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:18:57.037

MyISAM 在插入、更新或删除时确实会锁定表。InnoDB 允许事务和基于行的锁。

您还可以查看批量插入速度更快的[LOAD DATA INFILE 。](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

# css - 如何仅删除 webkit 点击高亮边框？

> ID：13975133
> 
> 赞同：2
> 
> 时间：2012-12-20T15:13:34.633
> 
> 标签：css, ipad, webkit, highlight

如果您不喜欢 webkit 在点击链接时突出​​显示链接，您可以通过以下方式删除该效果：

```
-webkit-tap-highlight-color: rgb(0, 0, 0, 0); 
```

实际上我想要这种效果，而不是在点击元素周围添加的额外边框。

有没有办法只删除高亮边框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T17:46:00.577

如果您正在谈论焦点输入周围的橙色边框，您可能想尝试添加 outline:none; 到您的 CSS 属性。

像这样：

```
input { outline:none; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T14:14:35.567

缺少一个

应该是 -webkit-tap-highlight-color: rgba(0, 0, 0, 0);

# html - 居中放置的可缩放框

> ID：13975141
> 
> 赞同：0
> 
> 时间：2012-12-20T15:14:07.043
> 
> 标签：html, positioning, image-scaling, css

我正在寻找一种解决方案来放置几个不同大小的盒子（每个盒子中的一个图像）并使它们一起可扩展。所有框都将位于网页中间。

```
 background-image:url('http://www.jaapsch.net/puzzles/images/cube2.jpg');
   background-size: 100%; 
```

[http://i49.tinypic.com/18ir5z.jpg](http://i49.tinypic.com/18ir5z.jpg)
（视觉示例）

圆圈的目的是确保缩放和调整大小。如果是网站，四个方框是按比例缩小的圆圈会跟随。将圆圈视为四个框中的四个小图像。希望我说清楚。

# c - 如果我将 argc/argv 放入主函数而不使用它们，c 程序将失败

> ID：13975142
> 
> 赞同：2
> 
> 时间：2012-12-20T15:14:10.083
> 
> 标签：c, main, realloc

我编写了一个将字符串转换为字符串数组的函数。测试程序运行良好，直到我替换`int main()`为`int main(int argc, char** argv)`

**安慰：**

```
*** glibc detected *** ./a.out: realloc(): invalid pointer: 0xbfdc6370 ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x75ee2)[0xb764eee2]
/lib/i386-linux-gnu/libc.so.6(realloc+0x25d)[0xb765355d]
/lib/i386-linux-gnu/libc.so.6(realloc+0x273)[0xb7653573]
./a.out[0x80485d6]
./a.out[0x80486bf]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0xb75f24d3]
./a.out[0x8048461]
======= Memory map: ========
08048000-08049000 r-xp 00000000 08:05 2889457    /home/tg/a.out
08049000-0804a000 r--p 00000000 08:05 2889457    /home/tg/a.out
0804a000-0804b000 rw-p 00001000 08:05 2889457    /home/tg/a.out
085cc000-085ed000 rw-p 00000000 00:00 0          [heap]
b75a5000-b75c1000 r-xp 00000000 08:05 5637044    /lib/i386-linux-gnu/libgcc_s.so.1
b75c1000-b75c2000 r--p 0001b000 08:05 5637044    /lib/i386-linux-gnu/libgcc_s.so.1
b75c2000-b75c3000 rw-p 0001c000 08:05 5637044    /lib/i386-linux-gnu/libgcc_s.so.1
b75d8000-b75d9000 rw-p 00000000 00:00 0 
b75d9000-b777c000 r-xp 00000000 08:05 5636109    /lib/i386-linux-gnu/libc-2.15.so
b777c000-b777d000 ---p 001a3000 08:05 5636109    /lib/i386-linux-gnu/libc-2.15.so
b777d000-b777f000 r--p 001a3000 08:05 5636109    /lib/i386-linux-gnu/libc-2.15.so
b777f000-b7780000 rw-p 001a5000 08:05 5636109    /lib/i386-linux-gnu/libc-2.15.so
b7780000-b7783000 rw-p 00000000 00:00 0 
b7797000-b779a000 rw-p 00000000 00:00 0 
b779a000-b779b000 r-xp 00000000 00:00 0          [vdso]
b779b000-b77bb000 r-xp 00000000 08:05 5636227    /lib/i386-linux-gnu/ld-2.15.so
b77bb000-b77bc000 r--p 0001f000 08:05 5636227    /lib/i386-linux-gnu/ld-2.15.so
b77bc000-b77bd000 rw-p 00020000 08:05 5636227    /lib/i386-linux-gnu/ld-2.15.so
bfda7000-bfdc8000 rw-p 00000000 00:00 0          [stack]
Aborted (core dumped) 
```

**代码：**

```
/* tokenize function*/
int tokenize(char ***tokenList, char *string, char *separators){
    /* initialization */
    int count = 0;                      // token counter
    int length = strlen(string) + 1;    // length of string array
    int lengthSep = strlen(separators); // number of separators
    char *memory = malloc(length);      // copy of string; string token array in the end
    if (memory == NULL)                 // error treatment for malloc
        return -1;
    memcpy(memory, string, length);
    char *lastPos = memory;             // start position of the current string token in memory
    char **tempList;                    // temporary pointer to token array

    /* find occurences of separators and replace them with '\0', reallocate tempList for each new string token built in that way */
    for (int i = 0; i < length; i++){
        /* check if current character is a separator */
        for (int j = 0; j <= lengthSep; j++){
            if (*(memory + i) == separators[j]){
                count++;                            // increase string counter
                *(memory + i) = '\0';               // replace separator by '\0'
                tempList = realloc(tempList, sizeof(char*) * count);    // reallocate tempList
                if (tempList == NULL){              // error treatment for realloc
                    free(memory);
                    free(tempList);
                    return -1;
                }                                   
                tempList[count-1] = lastPos;        // add pointer to the new string to the end of tempList
                lastPos = memory + i + 1;           // calculate starting position for the next string token
                break;                              // escape from inner loop (found matching separator)
            }
        }
    }
    *tokenList = tempList;
    return count;
}
int main(){
    char string[100] = "aa/bbb/cccc";
    char separators[2] = "/";
    char **tokenList;
    int count;
    count = tokenize(&tokenList,string, separators);
    printf("count: %d\n", count);
    printf("item: %s\n", tokenList[0]);
    return EXIT_SUCCESS;

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T15:16:54.423

您没有初始化`tempList`，所以第一次打电话时，`tempList = realloc(tempList,...`您是在尝试扩展/释放任意地址。

最简单的解决方法是简单地初始化`tempList`为`NULL`

```
char **tempList = NULL; 
```

顺便说一句，代码

```
tempList = realloc(tempList, sizeof(char*) * count);
if (tempList == NULL){
    free(memory);
    free(tempList);
    return -1;
} 
```

包含另一个小错误。如果`realloc`失败并且`tempList`是`NULL`，你已经泄露了之前的值`tempList`并且调用`free(tempList)`什么都不做。如果您想正确处理内存不足错误，则需要执行类似的操作

```
void* tmp = realloc(tempList, sizeof(char*) * count);
if (tmp == NULL){
    free(memory);
    free(tempList);
    return -1;
}
tempList = tmp; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T15:17:08.093

`templist`未初始化，因此它包含声明它的堆栈上的任何垃圾。

然后将其传递`realloc()`给以调整它指向的内存大小。但`realloc()`意识到它并没有指向任何有效的东西。

# javascript - 通过在块上滑动来滚动

> ID：13975155
> 
> 赞同：3
> 
> 时间：2012-12-20T15:15:00.230
> 
> 标签：javascript, android, jquery, css, scroll

我在电话上的网站有点问题。

[http://gyazo.com/3e2f0297e28b2f68f251feaf53faddb6](http://gyazo.com/3e2f0297e28b2f68f251feaf53faddb6)。

在白色背景上滑动时可以滚动，但不能越过缩略图。我没有在此部分绑定任何事件。

有什么问题？

以下是我通过手机使用 Chrome 远程调试获得的样式：

```
http://gyazo.com/309ceb1a491e809d2faac073c263c178
http://gyazo.com/c9a88cf1dc4689ee47bb899f189c4a55
http://gyazo.com/428310e02f3af9e06747993af2d67617 
```

previewThumb 是 project-preview 中的缩略图类（阻止所有缩略图的位置）。

谢谢你的帮助！

# c# - 正则表达式验证字符串仅包含 0 - 9、+、#、*、[ 和 ]

> ID：13975157
> 
> 赞同：5
> 
> 时间：2012-12-20T15:15:14.233
> 
> 标签：c#, regex, string, validation

在我的 c# 应用程序中，我需要验证字符串以确保它们仅包含以下内容：

*   0 - 9
*   +
*   #
*   *
*   [
*   ]

当我的用户在 DataGridView 控件的单元格中编辑字符串字段时，我需要验证该值。我的 CellValidating 事件处理程序当前如下所示：

```
if (!Regex.IsMatch(e.FormattedValue.ToString(), @"\A\b[0-9]+\b\Z"))
{
    // notify the user that the string is invalid and cancel validation
    e.Cancel = true;
} 
```

这似乎适用于 0 - 9 但我还没有得到一个包含我需要的所有元字符的正则表达式。我尝试一次向现有的正则表达式添加一个元字符，但它不起作用。例如...

```
if (!Regex.IsMatch(e.FormattedValue.ToString(), @"\A\b[0-9#]+\b\Z")) 
```

...不允许 # 就像我想的那样。逃避它也没有什么不同。任何人都可以为我阐明这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T15:18:53.433

使用这个正则表达式`^[0-9+#*\[\]]+$`

# python - 如何在python中制作队列的有界图？

> ID：13975159
> 
> 赞同：0
> 
> 时间：2012-12-20T15:15:19.340
> 
> 标签：python, map, queue

我需要制作一个有界队列的字典。以下是我到目前为止所拥有的。

```
from collections import defaultdict
from collections import deque

d = defaultdict(deque)
...
q = d[name] 
```

制作有界队列：`q = deque(maxlen = 10)`可行，但我不确定当队列在字典中时如何执行此操作。谁能帮我制作有界队列的地图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T15:19:03.343

你的意思是

```
from functools import partial

d = defaultdict(partial(deque, maxlen=10)) 
```

?

# c# - 如何最好地手动处理使用 Entity Framework Code First 模型类的现有数据库列映射？

> ID：13975163
> 
> 赞同：4
> 
> 时间：2012-12-20T15:15:35.527
> 
> 标签：c#, .net, entity-framework, ef-code-first, dbcontext

我正在使用现有的 MSSQL 数据库构建 EF Code First 驱动的应用程序。我真的想避免使用任何电动工具或基于向导的自动代码生成实用程序来构建我的模型和 dbcontext，因为我们需要完全控制代码生成。

我的问题是，当我构建模型时（在我的上下文中最终将作为 dbset() 属性），我应该如何处理模型中现有的 SQL 列？我是否需要为数据库中设置为“不可为空”的每个 db 列添加一个属性到我的模型类中？如果我在模型中遗漏了一些与 db 列相对应的属性，EF 会知道该怎么做吗？只是不确定这一切应该如何解决，并且在找到直接回答 CF 模型到现有数据库字段映射的资源时遇到了一些麻烦。有人有信息可以帮助澄清这个过程吗？

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:36:09.430

使用混合方法，从数据优先模型开始，然后使用代码优先方法添加新实体。

如果实体与其映射到的数据库实体不匹配，EF 将引发异常。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-20T15:36:19.137

这是迄今为止我与 EF 合作的唯一方法，并且没有遇到任何问题。如果对象的属性为空，EF 会将空值写入数据库。此外，您的所有列都不需要在您的实体中表示（尽管显然所有必需的列都需要存在，或者如果您想进行插入，则在数据库级别具有默认值）。我认为很难找到关于这类问题的一些信息的原因是这是 ORM 刚刚做的事情，而且做得很好。我建议尝试创建和使用您的第一个实体，看看您遇到什么问题。从你现在的立场来看，这可能会比看起来容易得多。

# php - 如何在库中加载 PHPExcel？

> ID：13975164
> 
> 赞同：2
> 
> 时间：2012-12-20T15:15:38.463
> 
> 标签：php, codeigniter, codeigniter-2, phpexcel

有时我按照[本](http://www.ahowto.net/php/easily-integrateload-phpexcel-into-codeigniter-framework)教程在 CI 中实现 PHPExcel。

现在，该代码段一切正常，但我尝试创建加载 PHPExcel 并遇到问题的库。

我创建了一个 CI 实例：

```
$CI =& get_instance();
$CI->load->library('excel'); 
```

效果很好，我正在构建我的 excel 文件，但是在metnioned教程中，为了保存它，正在使用以下命令：

```
$objWriter = PHPExcel_IOFactory::createWriter($CI->excel, 'Excel2007'); 
```

当我在控制器中使用它时效果很好，但是在库中我得到一个错误： `Fatal error: Class 'XMLWriter' not found in /path/to/application/third_party/PHPExcel/Shared/XMLWriter.php on line 44`

现在我想这与调用它的方式有关，谁能告诉我如何摆脱它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:23:28.950

好吧，我解决了，问题是我没有检查我的服务器是否[满足](http://phpexcel.codeplex.com/wikipage?title=Requirements)PHPExcel 的要求，而且我缺少 php_xml。当我让它工作时，我在 localhost (XAMPP) 上工作，它确实启用了这些扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T10:16:17.080

您还没有安装xml，只需***在终端中运行以下命令***

```
sudo apt-get install php-xml 
```

并重新启动你的 apache2。

# windows - 使用 MSVC2010 使用 /MT 编译静态 QT 库

> ID：13975165
> 
> 赞同：1
> 
> 时间：2012-12-20T15:15:41.930
> 
> 标签：windows, qt, visual-c++, compilation

我正在尝试使用 /MT（运行时静态链接）静态构建 QT 库。

我遵循了以下步骤： 1\. 转到 qmake.conf 文件并在发布和调试配置中将 /MD 修改为 /MT 2\. 我运行如下配置命令：configure -static -opensource 3\. 我运行 nmake

问题是 nmake 在运行几秒钟后失败。这是最后的输出：

```
[..........]
qjson.cpp
qjsondocument.cpp
qjsonobject.cpp
qjsonarray.cpp
qjsonvalue.cpp
qjsonparser.cpp
qjsonwriter.cpp
Generating Code...
        cl -c -nologo -Zm200 -Zc:wchar_t -O2 -MT -W3 -w34100 -w34189 -GR -DUNICO
DE -DWIN32 -DQT_BOOTSTRAPPED -DQT_LITE_UNICODE -DQT_NO_CAST_TO_ASCII -DQT_NO_COD
ECS -DQT_NO_DATASTREAM -DQT_NO_LIBRARY -DQT_NO_QOBJECT -DQT_NO_SYSTEMLOCALE -DQT
_NO_THREAD -DQT_NO_UNICODETABLES -DQT_NO_USING_NAMESPACE -DQT_NO_DEPRECATED -DQT
_NO_TRANSLATION -DQT_QMAKE_LOCATION=\"F:/utils/Qt/5.0.0/Src/qtbase/bin/qmake\" -
DQT_NO_CAST_FROM_ASCII -DQT_BUILD_BOOTSTRAP_LIB -DQT_BUILDING_QT -DQT_ASCII_CAST
_WARNINGS -DQT_MOC_COMPAT -DQT_USE_QSTRINGBUILDER -DQT_DEPRECATED_WARNINGS -DQT_
DISABLE_DEPRECATED_BEFORE=0x040800 -D_USE_MATH_DEFINES -DQT_NO_DEBUG -DQT_NO_EXC
EPTIONS -I"..\..\..\include" -I"..\..\..\include\QtCore" -I"..\..\..\include\QtC
ore\5.0.0" -I"..\..\..\include\QtCore\5.0.0\QtCore" -I"..\..\..\include\QtXml" -
I"F:\utils\Qt\5.0.0\Src\qtbase\include\QtXml\5.0.0" -I"F:\utils\Qt\5.0.0\Src\qtb
ase\include\QtXml\5.0.0\QtXml" -I"tmp" -I"..\..\corelib\global" -I"..\..\3rdpart
y\zlib" -I"..\..\..\mkspecs\win32-msvc2010" -Fo.obj\release_static\ @C:\Users\DI
DAC~1.PER\AppData\Local\Temp\nmE62A.tmp
qdom.cpp
..\..\..\include\QtXml\qdom.h(1) : fatal error C1083: Cannot open include file:
'../../../../../../../../f:/utils/Qt/5.0.0/Src/qtbase/src/xml/dom/qdom.h': Inval
id argument
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 10.0
\VC\BIN\cl.EXE"' : return code '0x2'
Stop.
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 10.0
\VC\BIN\nmake.exe"' : return code '0x2'
Stop.
NMAKE : fatal error U1077: 'cd' : return code '0x2'
Stop.
NMAKE : fatal error U1077: 'cd' : return code '0x2'
Stop. 
```

请问，你遇到同样的结果吗？有人知道如何解决这个问题吗？提前致谢，

干杯，迪达克·佩雷斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:52:35.277

这是使用 MSVC 静态构建 Qt 源的已知 Qt 错误：

[https://bugreports.qt-project.org/browse/QTBUG-28761](https://bugreports.qt-project.org/browse/QTBUG-28761)

[https://bugreports.qt-project.org/browse/QTBUG-28989](https://bugreports.qt-project.org/browse/QTBUG-28989)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:36:48.463

我已经修复了错误。我认为 configure 命令会生成错误的头文件。例如，qtbase/include/qtxml 中的 qdom.h 是这样的：

```
#include "../../../../../../../../f:/utils/Qt/5.0.0/Src/qtbase/src/xml/dom/qdom.h" 
```

我不得不搬到：

```
#include "../../src/xml/dom/qdom.h" 
```

现在它可以工作了。也许这是qt构建系统的问题。

亲切的问候，

# tfs - 收到错误 TF277003：无法为团队项目添加多个升级过程模板

> ID：13975169
> 
> 赞同：3
> 
> 时间：2012-12-20T15:16:03.800
> 
> 标签：tfs, upgrade, tfs-migration

我在将 TFS 2010 环境升级到 TFS 2012 环境时遇到问题。在升级期间，我收到以下错误：

TF277003: 无法为团队项目 Tjip.QA 添加多个升级过程模板。

我使用以下步骤来获取此错误：

1.  首先，我从生产 TFS 2010 环境创建了一个备份，并将其复制到新的数据层服务器。之后，我导入了备份和表“Tfs_Configuration”、“Tfs_DefaultCollection”、“Tfs_Warehouse”和其他数据库，用于辅助项目集合。
2.  我从我们的生产 TFS 报告服务器创建了一个 SQL 备份，并将该备份恢复到新的报告服务器（使用其加密密钥）。
3.  我在新的 TFS 应用层服务器上运行了 TFS 升级向导。经过几个小时的等待，我收到了上述错误。当我查看数据库时，我发现该项目只有一个构建模板；其类型设置为“2”。

我希望有人可以帮助我解决这个问题。

Thnx，杰伦·尼森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:17:09.820

This has been asked and answered on: [http://social.msdn.microsoft.com/Forums/en-US/tfsgeneral/thread/5b3cc988-778e-4bfd-93c1-79eadd5b1747](http://social.msdn.microsoft.com/Forums/en-US/tfsgeneral/thread/5b3cc988-778e-4bfd-93c1-79eadd5b1747)

**Please note that you should never edit the TFS databases directly as it can leave your system in an unstable state and *will* make your system unsupportable by Microsoft except by best effort.**

I would burn a premium support call for this! You get 4 with each of your MSDN subscription and likely some with your enterprise agreement.

# php - CURLOPT_POSTFIELDS 中的意外 T_LNUMBER

> ID：13975170
> 
> 赞同：-2
> 
> 时间：2012-12-20T15:16:08.653
> 
> 标签：php, curl, syntax

你好，我收到错误

> 解析错误：语法错误，意外的 T_LNUMBER，在 ...（行 '__LASTFOCUS'=>''）中需要 ')'。

奇怪的是，即使我删除了报告的行甚至错误周围的一堆行，错误仍然存​​在于同一个地方：它可能是什么？curl postfields 的数量或大小是否有限制？

```
curl_setopt($curl_connection, CURLOPT_POSTFIELDS, array(
        '__SPSCEditMenu'=>'true',
        'MSOWebPartPage_PostbackSource'=>'',
        'MSOTlPn_SelectedWpId'=>'',
        'MSOTlPn_View'=>'0',
        'MSOTlPn_ShowSettings'=>'False',
        'MSOGallery_SelectedLibrary'=>'',
        'MSOGallery_FilterString'=>'',
        'MSOTlPn_Button'=>'none',
        '__EVENTTARGET'=>'',
        '__EVENTARGUMENT'=>'',
        '__REQUESTDIGEST'=>'0x2A02AA889D8390AB95007187B517EA1C6B4766D3B39A761AD5C5211782F7F2D1D35040A5592889C1171961C6C3679849C66993F246AE5292DF1BC3A19B405F9E,20 Dec 2012 11:25:09 -0000',
        'MSOAuthoringConsole_FormContext'=>'',
        'MSOAC_EditDuringWorkflow'=>'',
        'MSOSPWebPartManager_DisplayModeName'=>'Browse',
        'MSOWebPartPage_Shared'=>'',
        'MSOLayout_LayoutChanges'=>'',
        'MSOLayout_InDesignMode'=>'',
        'MSOSPWebPartManager_OldDisplayModeName'=>'Browse',
        'MSOSPWebPartManager_StartWebPartEditingName'=>'false',
        '__LASTFOCUS'=>'',
        '__VIEWSTATE'=>$viewState,
        'ctl00_SPWebPartManager1_g_d50ea2f4_9347_49e0_9f8c_83b4ba8f7466_lines_type_rbl_2'=>'1',           
        'ctl00$SPWebPartManager1$g_d50ea2f4_9347_49e0_9f8c_83b4ba8f7466$lvsbm'=>'',         
        'ctl00$SPWebPartManager1$g_d50ea2f4_9347_49e0_9f8c_83b4ba8f7466$rd_ltype_ch'=>'0',  
        'ctl00$SPWebPartManager1$g_d50ea2f4_9347_49e0_9f8c_83b4ba8f7466$pg_v_pos'=>'0', 
        'ctl00$SPWebPartManager1$g_6a113a00_1817_4823_834b_666b7bf38e10$nldpmt'=> '500',
        'ctl00$SPWebPartManager1$g_d50ea2f4_9347_49e0_9f8c_83b4ba8f7466$pg_v_pos=>'0',
        'ctl00$SPWebPartManager1$g_6a113a00_1817_4823_834b_666b7bf38e10$txt_town'=>'milano',
        'ctl00$SPWebPartManager1$g_6a113a00_1817_4823_834b_666b7bf38e10$hh_hn'=>'';
        'ctl00$SPWebPartManager1$g_6a113a00_1817_4823_834b_666b7bf38e10$canshowroute'=>'1',
        'ctl00$SPWebPartManager1$g_6a113a00_1817_4823_834b_666b7bf38e10$pg_v_pos'=>'0',          
        'ctl00$SPWebPartManager1$g_d50ea2f4_9347_49e0_9f8c_83b4ba8f7466$txt_dp_lines_9347_49e0_9f8c_83b4ba8f7466$txt_dp_lines'=>$line,       
        'ctl00$SPWebPartManager1$g_bd2153c6_2f32_4bfa_8abb_504f3e53a69b$contextname'=>'5a4665da-c66a-4f84-87d27009ff396423-50d2f595'     
)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:19:11.693

看到这行：

```
 'ctl00$SPWebPartManager1$g_d50ea2f4_9347_49e0_9f8c_83b4ba8f7466$pg_v_pos=>'0',
 'ctl00$SPWebPartManager1$g_6a113a00_1817_4823_834b_666b7bf38e10$hh_hn'=>''; 
```

需要：

```
 'ctl00$SPWebPartManager1$g_d50ea2f4_9347_49e0_9f8c_83b4ba8f7466$pg_v_pos'=>'0',
 'ctl00$SPWebPartManager1$g_6a113a00_1817_4823_834b_666b7bf38e10$hh_hn'=>'', 
```

你不在你的IDE中使用语法高亮吗？
你用什么IDE？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:20:53.010

同上，但可能还有一个问题： `'ctl00$SPWebPartManager1$g_6a113a00_1817_4823_834b_666b7bf38e10$hh_hn'=>'';` 去掉分号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:18:45.613

您可以在降价编辑器中看到它。

你错过了一个`'`

# android - 如何获取设置为 match_parent 的 imageView 的大小？

> ID：13975175
> 
> 赞同：0
> 
> 时间：2012-12-20T15:16:22.777
> 
> 标签：android, imageview

所以我在 listview 中有一个 imageView（由 Loader 加载），宽度设置为 match_parent。当我想设置 imageview 位图时，我使用 imageView 的高度和宽度来加载最佳大小的位图。问题是 ImageView 大小有时在 Loader bindView 中是未知的（尚未测量？）。在这种情况下，我怎么能每次都获得位图的宽度？

```
@Override
    public void bindView(View view, final Context context, Cursor cursor) {
        ImageView iv = (ImageView) (ImageView) view.findViewById(R.id.image);
        ....
        bitmap = BitmapHelper.decodeSampledBitmapFromFile( new File(file), iv.getWidth(), iv.getHeight());
        imageView.setImageBitmap(bitmap);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:53:50.930

您必须等到视图初始化，然后才能获取尺寸。尝试像这样使用 ViewObserver：

```
ViewTreeObserver viewTreeObserver = YOURLAYOUT.getViewTreeObserver();
if (viewTreeObserver.isAlive()) {
   viewTreeObserver.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
          public void onGlobalLayout() {
             YOURLAYOUT.getViewTreeObserver().removeGlobalOnLayoutListener(this);
             //do some things
             //YOURLAYOUT.getWidth() should give a correct answer
          }
   });
} 
```

希望有帮助:)

# c# - ASP.NET UpdatePanel：使浏览器“返回”按钮返回到页面的*最后*版本

> ID：13975176
> 
> 赞同：9
> 
> 时间：2012-12-20T15:16:27.417
> 
> 标签：c#, asp.net, .net, asp.net-ajax, updatepanel

我有页面 A 和页面 B。您可以在页面 A 中执行以下操作：

*   在页面 A 上做一些事情（例如，在列表框中选择一个项目），这会导致页面 A 中的 UpdatePanel 用附加信息重新绘制。
*   转到页面 B。这是通过 Button 和 完成的`Response.Redirect`。

现在问题如下：

1.  用户在页面 A 上执行操作。页面 A 现在与其初始状态不同。
2.  用户移动到页面 B。
3.  用户点击浏览器的后退按钮。

会发生什么： 显示 处于*初始状态的页面 A。*
我想要发生的事情：显示*最终状态*的页面 A（即，在列表框中选择了“正确”项目）。

**我知道[ScriptManager.AddHistoryPoint](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.addhistorypoint%28v=vs.90%29.aspx)！**据我所知，它并没有解决我的问题：

*   `AddHistoryPoint` *每次*在页面 A 上完成某些操作时，我都可以调用它。这很糟糕，因为它会在浏览器历史记录中留下大量条目。*（每次*选择不同的列表框项时都会出现一个新条目。）但这正是我想通过使用 UpdatePanel 来避免的！当然，如果有`ReplaceLastHistoryPoint`办法，那就完美了，但是我没有找到……

*   `AddHistoryPoint`我之前尝试调用`Response.Redirect`，只保存页面 A 的*最后一个*状态，但是，唉，这不起作用（没有保存历史记录点）。考虑到工作原理，这并不奇怪`Response.Redirect`。

有没有我错过的解决方案？我正在使用 .NET 3.5SP1，以防万一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-17T15:49:18.007

这是一个老问题，但我会继续提供我用于此的机制。基本思想是，与其让 AddHistoryPoint 管理您的名称-值对，不如让它管理您保存在其他地方的 NameValueCollection 的键，例如在会话缓存中。然后随着后续 Ajax 请求的到来，您再也不会调用 AddHistoryPoint；相反，您只需将 NameValueCollection 替换为当前请求的状态。

唯一的另一点是跟踪您是否在进行第一次 Ajax 调用以及是否需要对 AddHistoryPoint 进行第一次调用。

我的代码看起来像这样：

```
 protected void Page_LoadComplete(object sender, EventArgs e) {
     if (!ScriptManager.GetCurrent(this).IsNavigating && (IsCallback || IsInAsyncPostback())) {
        var state=new NameValueCollection();
        //OnCallbackHistory(state); // this gets state for all interested parties
        if (state.Count != 0) {
           string key=ViewState["HistoryStateKey"] as string;   // empty on first AJAX call
           if (string.IsNullOrEmpty(key) || ScriptManager.GetCurrent(this).EnableHistory) {
              key=CallbackHistoryKeyRoot+Interlocked.Increment(ref callbackHashKey).ToString();
              ViewState["HistoryStateKey"]=key;
              ScriptManager.GetCurrent(this).AddHistoryPoint("", key);
           }
           Session[key]=state;
        }
     }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:35:19.850

您可以使用 Sys.Application 类[http://msdn.microsoft.com/en-us/library/vstudio/cc488025(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/vstudio/cc488025(v=vs.90).aspx)在客户端上调用 addHistoryPoint 而不是在服务器上调用 AddHistoryPoint 。

因此，您将向按钮添加客户端单击侦听器，该按钮将在客户端上添加HistoryPoint，然后按钮执行回发和重定向。

# winforms - 如果 WinForms 控件嵌套在 ElementHost 中，如何找到它的所有者表单？

> ID：13975180
> 
> 赞同：2
> 
> 时间：2012-12-20T15:16:42.910
> 
> 标签：winforms, forms, controls, parent, elementhost

我们的一位客户将我们的 WinForms .NET 网格控件 iGrid.NET ( [http://www.10tec.com/](http://www.10tec.com/) ) 与其他 WPF 控件一起托管在 WPF ElementHost 容器中。它可能看起来很奇怪，因为它是 WinForms 表单内 WPF 主机内的 WinForms 控件，但他们别无选择，因为他们使用了其他 WPF 东西（它是 AvalonDock [http://avalondock.codeplex.com/](http://avalondock.codeplex.com/)对接容器）。

问题是我们的 .NET 数据网格控件的基础结构需要知道父 WinForms 表单，但我们使用的以下构造在这种情况下总是返回 null：

```
Form myTopLevelOwnerForm = fCurrentGrid.TopLevelControl as Form; 
```

即用于此目的的标准 Control.TopLevelControl 属性返回 null - 尽管在 WPF 主机的情况下很可能应该如此。

问题是：还有其他方法可以从当前控件的代码中了解父窗体吗？比如说，使用 WinAPI 句柄还是更好的其他原生 .NET memebrs？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:43:37.310

以下代码有效。至少，在我们的项目中:)

```
// API declaration
[System.Runtime.InteropServices.DllImport("user32.dll", ExactSpelling = true, CharSet = System.Runtime.InteropServices.CharSet.Auto)]
public static extern IntPtr GetParent(IntPtr hWnd);

// Main code snippet
Control myTopLevelControl = fOwner.TopLevelControl;

if (myTopLevelControl == null)
{
    IntPtr handle = fOwner.Handle;
    while (true)
    {
        IntPtr parentHandle = GetParent(handle);
        if (parentHandle == IntPtr.Zero)
        {
            myTopLevelControl = Control.FromHandle(handle) as Form;
            break;
        }
        handle = parentHandle;
    }
} 
```

# maven - Maven 发布插件 2.2.2 不推送到分发管理

> ID：13975187
> 
> 赞同：0
> 
> 时间：2012-12-20T15:17:16.680
> 
> 标签：maven, distribution, maven-release-plugin, maven-scm-plugin

我不得不将 maven 发布插件从版本 2.2.1 更新到 2.2.2 以解决一个错误，但是现在，在进行 maven 发布时，新版本的文件不会上传到我的分发管理中。

我尝试了以下方法：

*   `mvn release:prepare`&`mvn release:perform`使用版本 2.2.2 的 release-plugin：上传新的 SNAPSHOT-version

*   `mvn release:prepare`使用 2.2.1 版，`mvn release:perform`使用 2.2.2 版：上传新版本（这是我想要的）

所以不知何故，`mvn release:perform`使用版本 2.2.2 的发布插件完成的设置出错了，但我真的不明白为什么会发生这种情况。

**更新：**我快速查看了我的 target\checkout 文件夹，并在那里找到了 SNAPSHOT 版本的 pom-s。因此，在发布期间将错误的版本移至结帐：准备。

**更新 #2：**我已将其范围缩小到与 git 相关的内容。target\checkout 文件夹的内容来自 git checkout。由于我也更新了 scm-plugin 的版本，因此它必须与此有关..

来自 pom.xml：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-release-plugin</artifactId>
    <configuration>
      <preparationGoals>clean install</preparationGoals>
      <pushChanges>false</pushChanges>
    </configuration>
      <version>2.2.2</version>
    <dependencies>
      <dependency>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-scm-plugin</artifactId>
        <version>1.8.1</version>
      </dependency>
    </dependencies>
  </plugin>

[...]
<distributionManagement>
  <repository>
    <id>nexus-releases</id>
    <url>http://repository/nexus/content/repositories/releases</url>
  </repository>
  <snapshotRepository>
    <id>nexus-snapshots</id>
    <url>http://repository/nexus/content/repositories/snapshots</url>
  </snapshotRepository>
</distributionManagement> 
```

我正在使用 Maven 2.2.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T23:28:49.147

通过将 maven-release-plugin 更新到 2.4 版解决了这个问题。在发布期间：执行它检查了一个快照版本并将其推送到分发管理而不是构建版本。

# java - 比较两个字符串数组并将结果存储在另一个数组中

> ID：13975188
> 
> 赞同：0
> 
> 时间：2012-12-20T15:17:22.030
> 
> 标签：java

我想比较两个数组并将差异存储在另一个数组中

例如，这两个数组可能是

```
String[] a1 = { "cat" , "dog" };
String[] a2 = { "cat" , "rabbit" }; 
```

结果数组是这样的

```
{ "rabbit" } 
```

我使用此代码，但它不起作用

```
int n = 0;
for (int k = 0; k <= temp.length; k++)
{
    for (int u = 0; u <= origenal.length; u++)
    {
        if (temp[k] != origenal[u] && origenal[u] != temp[k])
        {
            temp2[n] = temp[k];
            System.out.println(temp[u]);
            n++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:38:08.987

我认为这可能是您正在寻找的。请注意，如果该值存在于第二个数组中但不存在于第一个数组中，它只会添加到第三个“数组”中。在您的示例中，只会存储 rabbit，而不是 dog（即使两者中都不存在 dog）。这个例子可能会被缩短，但我想保持这样，这样更容易看到发生了什么。

第一次导入：

```
import java.util.ArrayList;
import java.util.List; 
```

然后执行以下操作来填充和分析数组

```
String a1[] = new String[]{"cat" , "dog"};    // Initialize array1
String a2[] = new String[]{"cat" , "rabbit"}; // Initialize array2

List<String> tempList = new ArrayList<String>();
for(int i = 0; i < a2.length; i++)
{
    boolean foundString = false; // To be able to track if the string was found in both arrays
    for(int j = 0; j < a1.length; j++)
    {
        if(a1[j].equals(a2[i]))
        {
            foundString = true; 
            break; // If it exist in both arrays there is no need to look further
        }
    }
    if(!foundString) // If the same is not found in both..
        tempList.add(a2[i]); // .. add to temporary list
} 
```

根据规范，tempList 现在将包含“兔子”。如果您需要将它作为第三个数组，您可以通过执行以下操作将其转换为该数组：

```
String a3[] = tempList.toArray(new String[0]); // a3 will now contain rabbit 
```

要打印 List 或 Array 的内容，请执行以下操作：

```
// Print the content of List tempList
for(int i = 0; i < tempList.size(); i++)
{
    System.out.println(tempList.get(i));
}

// Print the content of Array a3
for(int i = 0; i < a3.length; i++)
{
    System.out.println(a3[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:30:54.850

这应该可以解决问题。

```
String[] result = new String[100];
Int k = 0;
Boolean test = true;
for(i=0; i < a1.length; i++){
   for(j=0; j < a2.length; j++){
      if(a2[i].equals(a1[i])) continue;
      test = false
   }
   if(test == false) result[k++] = a1[i];
} 
```

# ruby-on-rails-3 - rake db 任务在部署中消失

> ID：13975193
> 
> 赞同：1
> 
> 时间：2012-12-20T15:17:40.663
> 
> 标签：ruby-on-rails-3, deployment

我有一个 Rails 3.2.8 应用程序，它在我的机器上运行良好，Postgres 作为 ActiveRecord 的数据库后端。但是，当我通过 capistrano 或通过将我的项目同步到 EC2 实例将代码部署到 EC2 服务器时，rake 不再列出任何`db:`任务：

```
$ rake -T
rake about              # List versions of all Rails frameworks and the environment
rake assets:clean       # Remove compiled assets
rake assets:precompile  # Compile all the assets named in config.assets.precompile
rake doc:app            # Generate docs for the app -- also available doc:rails, doc:guides, doc:plugins (options: TEMPLATE=/rdoc-t...
rake load_gml           # Load GML source files into the environment database
rake log:clear          # Truncates all *.log files in log/ to zero bytes
rake middleware         # Prints out your Rack middleware stack
rake notes              # Enumerate all annotations (use notes:optimize, :fixme, :todo for focus)
rake notes:custom       # Enumerate a custom annotation, specify with ANNOTATION=CUSTOM
rake rails:template     # Applies the template supplied by LOCATION=(/path/to/template) or URL
rake rails:update       # Update configs and some other initially generated files (or use just update:configs, update:scripts, or u...
rake routes             # Print out all defined routes in match order, with names.
rake secret             # Generate a cryptographically secure secret key (this is typically used to generate a secret for cookie se...
rake stats              # Report code statistics (KLOCs, etc) from the application
rake test               # Runs test:units, test:functionals, test:integration together (also available: test:benchmark, test:profil...
rake test:recent        # Run tests for {:recent=>"test:prepare"} / Test recent changes
rake test:single        # Run tests for {:single=>"test:prepare"}
rake test:uncommitted   # Run tests for {:uncommitted=>"test:prepare"} / Test changes since last checkin (only Subversion and Git)
rake time:zones:all     # Displays all time zones, also available: time:zones:us, time:zones:local -- filter with OFFSET parameter,...
rake tmp:clear          # Clear session, cache, and socket files from tmp/ (narrow w/ tmp:sessions:clear, tmp:cache:clear, tmp:sock...
rake tmp:create         # Creates tmp directories for sessions, cache, sockets, and pids 
```

`rake -P`也报告没有`db:`任务。

我猜这是某种依赖问题，但我看不到那会是什么，因为我在 Bundler 中声明了我所有的 gem 依赖项`Gemfile`。Postgres 9.2.1 已安装并正在运行，但即使不是，我也不明白为什么 rake 任务会消失。

任何关于正在发生的事情的线索都非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:32:31.277

事实证明这很简单：我`deploy.rb`从以前没有使用 ActiveRecord 的项目中复制了文件，所以我没有设置`role db:`. 我仍然不确定为什么这意味着我的项目的 rsync 副本也没有任何 rake`db:`任务，但我不会再花更多的时间来担心这个问题。

# css - 打印时的文本阴影和框阴影（Chrome）

> ID：13975198
> 
> 赞同：15
> 
> 时间：2012-12-20T15:17:57.443
> 
> 标签：css, google-chrome, printing-web-page

我正在使用 HTML、CSS 和 JS 制作一些可打印的日历网站。

不幸的是，我不能使用名为 的 CSS 属性`text-shadow`，因为文本后面的阴影打印为纯黑色文本，没有任何模糊或透明度。

当我尝试`box-shadow`用于任何 div 时会出现同样的问题 - 阴影打印，如没有透明度的纯黑色。

我正在使用带有样式的 Chrome`html {-webkit-print-color-adjust: exact;}`以确保将打印所有背景颜色。

任何解决方法？我宁愿不使用任何背景图片。

编辑：我不想隐藏阴影，这当然很容易。我想正确打印阴影。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-01-15T13:47:02.143

我意识到这是一个老问题，但请注意，可以在 Chrome 中正确打印阴影。您需要同时设置`-webkit-print-color-adjust`和过滤器，如在此错误线程中找到的：[https ://code.google.com/p/chromium/issues/detail?id=174583](https://code.google.com/p/chromium/issues/detail?id=174583)

```
.thing {
    -webkit-print-color-adjust:exact;
    -webkit-filter:opacity(1);
} 
```

（我更喜欢设置不透明度而不是`blur`在错误中使用，只是因为它似乎可能导致更少的问题）。

请注意，这将限制打印的分辨率（过滤器使其发送光栅化版本），因此文本可能变得难以阅读。如果你真的想解决这个问题，我建议复制 div（一个用于阴影，带有过滤器黑客和透明文本，另一个用于没有阴影的文本）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-07T10:48:07.050

这是解决方案：

```
@media print {
  .item {
    -webkit-filter: drop-shadow(4px 4px 1px #ccc);
    text-shadow: 4px 4px 1px #ccc;
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-29T16:53:02.837

如果有人正在寻找一种方法来避免使用 a 栅格化元素的内容`box-shadow`，这就是我使用的（从@Dave 的答案扩展而来）：

```
.thing {
    position: relative;
}

.thing::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    box-shadow: /* define your shadow here, not in .thing */;
    -webkit-print-color-adjust: exact;
    -webkit-filter: opacity(1);
} 
```

这会在您想要有阴影的元素的开头创建一个伪元素。伪元素的大小与父元素相同，然后仅对其应用投影。这样，阴影可以被光栅化，而父级的其余内容则不是。

如果您有边框，如果您的元素不支持子元素等，则会出现一些问题，但这在大多数情况下都有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-22T18:11:57.623

我使用了所有可能的解决方案，但边框阴影（带有阶梯渐变）会显示在我的页面上，但当**我**在页面上执行 Ctrl+P 并打印页面或另存为 PDF 时不会。我什至用过——

```
-webkit-print-color-adjust:exact;
-webkit-filter:opacity(1); 
```

我在此页面上执行相同的 Ctrl+P - [https://css-tricks.com/examples/BodyBorder/kottke.php](https://css-tricks.com/examples/BodyBorder/kottke.php)并且效果很好。

**解决方案**：我必须删除页面顶部包含的 bootstrap.css 才能让边框阴影显示在我的 PDF 上或打印页面时。

```
<link href="/lib/bootstrap-3.2.0/dist/css/bootstrap.min.css" media="all" rel="stylesheet" type="text/css" > 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-17T02:08:52.153

我试过了

```
html {
    -webkit-print-color-adjust: exact;
    -webkit-filter: opacity(1);
} 
```

**但它会导致 PDF 上的链接由于未知原因不可点击。**

我把它改成下面的css后，shadow和link问题都解决了。

```
.thing {
    -webkit-print-color-adjust: exact;
    -webkit-filter: blur(0);
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-20T15:24:43.453

您无需妥协您的网页以使其看起来漂亮打印。只需定义一个`print.css`使打印视图适合您的需求。

```
# index.html
<head>
  <link href="/css/print.css" media="print" rel="stylesheet" type="text/css" /> 
</head>

# print.css
.shadow {
  text-shadow: none;
} 
```

更多信息，Smashing Magazine 有一篇关于[如何设置打印样式表](http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/)的有用文章。

# java - 是否有 Java 实用程序来验证字符串是否是有效的 HTML 转义字符？

> ID：13975199
> 
> 赞同：5
> 
> 时间：2012-12-20T15:18:01.267
> 
> 标签：java, html, escaping, html-escape-characters

我想要以下格式的方法：

```
public boolean isValidHtmlEscapeCode(String string); 
```

用法是：

```
isValidHtmlEscapeCode("A") == false
isValidHtmlEscapeCode("&#1513;") == true // Valid unicode character
isValidHtmlEscapeCode("&#x5E9;") == true // same as 1513 but in HEX
isValidHtmlEscapeCode("&#78975332;") == false // Invalid unicode character 
```

我找不到任何可以做到这一点的东西 - 有没有任何实用程序可以做到这一点？如果没有，有什么聪明的方法可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:24:50.157

不确定这是否是一个完美的解决方案，但您可以使用 Apache Commons Lang：

```
try {
    return StringEscapeUtils.unescapeHtml4(code).length() < code.length();
} catch (IllegalArgumentException e) {
    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:25:59.943

你可能想看看 Apache commons StringUtils： [http](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringEscapeUtils.html#unescapeHtml(java.lang.String) ://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringEscapeUtils.html#unescapeHtml(java.lang.String )

使用 unescapeHtml 你可以做某事。像：

```
String input = "A";
String unescaped = StringEscapeUtils.unescapeHtml(input);
boolean containsValidEscape = !input.equals(a); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T15:38:31.783

```
public static boolean isValidHtmlEscapeCode(String string) {
    if (string == null) {
        return false;
    }
    Pattern p = Pattern
            .compile("&(?:#x([0-9a-fA-F]+)|#([0-9]+)|([0-9A-Za-z]+));");
    Matcher m = p.matcher(string);

    if (m.find()) {
        int codePoint = -1;
        String entity = null;
        try {
            if ((entity = m.group(1)) != null) {
                if (entity.length() > 6) {
                    return false;
                }
                codePoint = Integer.parseInt(entity, 16);
            } else if ((entity = m.group(2)) != null) {
                if (entity.length() > 7) {
                    return false;
                }
                codePoint = Integer.parseInt(entity, 10);
            } else if ((entity = m.group(3)) != null) {
                return namedEntities.contains(entity);
            }
            return 0x00 <= codePoint && codePoint < 0xd800
                    || 0xdfff < codePoint && codePoint <= 0x10FFFF;
        } catch (NumberFormatException e) {
            return false;
        }
    } else {
        return false;
    }
} 
```

这是一组命名实体[http://pastebin.com/XzzMYDjF](http://pastebin.com/XzzMYDjF)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T15:35:53.453

这应该是您想要的方法：

```
public static boolean isValidHtmlEscapeCode(String string) {
String temp = "";
try {
    temp = StringEscapeUtils.unescapeHtml3(string);
} catch (IllegalArgumentException e) {
    return false;
}
return !string.equals(temp);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T15:30:43.630

尝试使用正则表达式进行匹配：

```
public boolean isValidHtmlEscapeCode(String string) {
    return string.matches("&;#([0-9]{1,4}|x[0-9a-fA-F]{1,4});");
} 
```

或者为了节省一些处理周期，您可以重用正则表达式进行多重比较：

```
Pattern pattern = Pattern.compile("&;#([0-9]{1,4}|x[0-9a-fA-F]{1,4});");

public boolean isValidHtmlEscapeCode(String string) {
    return pattern.matches(string);
} 
```

正则表达式的来源可以在[RexLib.com找到](http://regexlib.com/Search.aspx?k=html%20encoded)

# php - 取消设置 XML 元素功能不起作用

> ID：13975200
> 
> 赞同：0
> 
> 时间：2012-12-20T15:18:07.430
> 
> 标签：php, xml

这就是我所拥有的。

```
$filename= asql($_GET['filename']);
$fullfile = "xml/".$filename;
function delete_book_id($ids){
  $data = simplexml_load_file($fullfile);
  $data_count = count($data->item);
  for($i = 0; $i < $data_count; $i++)
  {
    //basically what you want to remove
    if(($data->item[$i]->id == $ids))
    {
      unset($data->item[$i]);
    }
  }
  file_put_contents($fullfile, $data->saveXML());
} 
```

假设`$fullfile`是`xml/name.xml`并且文件存在于我们的文件夹中。在函数中调用变量的位置应该可以正常工作吗？

如果我用它替换函数中的变量，`xml/name.xml`它将起作用，但使用该变量会导致页面中断并且不会重新加载，也不会删除它应该删除的行`unset`。该函数会不接受变量，还是我在这里遗漏了什么？

我也尝试过使用`"xml/".$filename`代替函数中的变量。那里也没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:25:09.210

`$fullfile`在函数之外定义。它在`undefined`里面。在函数内使用`global $fullfile;`或在那里定义它。

# php - Javascript函数不能引用动态图像ID

> ID：13975202
> 
> 赞同：1
> 
> 时间：2012-12-20T15:18:10.003
> 
> 标签：php, javascript, html, javascript-events

在我的网站上，我有一个导航列表，其中包含代表导航链接的图像，我编写了一个 onmouseover javascript 函数，它将 imgsrc 更改为图像的较暗版本。

我现在认识到，如果导航中有多个列表元素（导航中的列表元素数量是动态的），则 javascript 函数不起作用。对于一个元素，它确实有效。

现在我发现了错误：由于图像是在 while 函数中创建的，它总是具有相同的 id，所以如果有多个导航元素，它有多个使用相同 id 调用的图像，所以 JavaScript 函数当然不能引用它们.

奇怪的是，我发现很难解决这个问题。有人可以告诉我为什么以下方法行不通吗？

```
<html>
<head>
<script
language="JavaScript">
function over(source,c) {
  c.src = "Images/List/streams/"+source+"_mo.png";
}
function out(source,c) {
  c.src = "Images/List/streams/"+source+".png";
}
</script>
</head>
<body>
<?php
...
while($row_player = mysql_fetch_object($players)) {
    $image   = 'pic'.$row_player->Id;
    echo "<a href=".$row_player->Page." target=_parent
    onmouseover= over(".$row_player->Id,$image.")
    onmouseout = out(".$row_player->Id,$image.")> 
    <li>
    <img id=".$image." src=Images/List/streams/".$row_player->Id.".png>
    </li>
    </a>";  
}
...
?>
</body> 
</html> 
```

这是我第一次使用的代码，它只适用于一个元素

```
<html>
<head>
<script
language="JavaScript">
function over(source) {
    pic.src = "Images/List/streams/"+source+"_mo.png";
}
function out(source) {
    pic.src = "Images/List/streams/"+source+".png";
}
</script>
</head>
<body>
<?php
...
while($row_player = mysql_fetch_object($players)) {
        echo "<a href=".$row_player->Page." target=_parent
        onmouseover= over(".$row_player->Id.")
        onmouseout = out(".$row_player->Id.")> 
        <li>
        <img id=pic src=Images/List/streams/".$row_player->Id.".png>
        </li>
        </a>";  
}
...
?>
</body> 
</html> 
```

顺便说一句，while循环都在回声中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:40:42.700

您的代码中有一些错误。一个是在您的`over`and`out`函数中，`c`是一个字符串（元素的 ID），但您将其视为一个元素。使用`document.getElementById(c).src = ...`而不是`c.src = ...`.

另一个问题是您错误地回显了`onmouseover`and的参数`onmouseout`。您需要用逗号分隔它们并引用它们。而不是`onmouseover= over(".$row_player->Id,$image.")`，使用

```
onmouseover=\"over(\"".$row_player->Id."\", \"".$image."\")\" 
```

和同样的`onmouseout`。引用 HTML 属性允许您在其值中包含空格（并使您的标记生效）。您需要引用 Javascript 函数的参数，否则 Javascript 会将图像 ID 视为变量的名称，而不是字符串。

# java - 在 Java 中创建消息结构的最佳方法是什么？

> ID：13975205
> 
> 赞同：5
> 
> 时间：2012-12-20T15:18:27.730
> 
> 标签：java, data-structures

例如，如果给我一个类似于下面的消息结构的要求：

*   头 28 字节
    *   消费者 2 字节
    *   类型 4 字节
    *   ...
*   有效载荷 64 字节

Java中是否有任何库可以使其更快完成？

或者我必须手动将它创建为带有字节数组和 setter/getter 的单独类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:26:40.170

您可能会受益于 ByteBuffer 类中的实用方法，而不是直接处理字节数组。您将找到获取和设置多字节整数的方法（例如 getShort、putInt、putLong），您还可以控制字节顺序（大端或小端）。

然后，您可以使用有意义的方法名称将 ByteBuffer 包装在另一个类中，例如：

```
int getType() {
  return bb.getInt(2); // offset 2
}

void setType(int type) {
  bb.putInt(2, type);
} 
```

# ruby-on-rails - 检查数组中的所有元素是否具有相同的值

> ID：13975206
> 
> 赞同：1
> 
> 时间：2012-12-20T15:18:29.020
> 
> 标签：ruby-on-rails

我有一个包含一组值的数组“sub_status_arr”。

如果该数组中的所有元素都是 52，则显示一个按钮，否则显示其他内容。

我尝试了以下方法，但似乎无法正常工作。它只检查数组是否包含 51 而忽略其余的

```
<%if sub_status_arr.include? 51 || 53 || 54 %>
  display button
<% else %>
  do something else
<% end %> 
```

如何检查数组中的所有元素是否都是 52？

感谢您的建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T15:20:30.950

我会尝试这个`all?`功能：

```
if sub_status_arr.all? {|ss| ss == 52} 
```

# c# - ASP .Net MVC site.master HTML.ActionLink 新菜单项集

> ID：13975208
> 
> 赞同：1
> 
> 时间：2012-12-20T15:18:34.100
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2, actionlink, html.actionlink

刚开始 MVC 2.0。有内置的视图。在家里有两种看法。**Index.aspx**和**about.aspx**。我在名为**customer**的视图中创建了一个新文件夹，并创建了一个新页面“ **Customer.aspx** ”，其中包含一些要显示的文本。菜单项已创建但未进入页面。

这是我正在尝试的。

```
<div id="menucontainer">

            <ul id="menu">              
                <li><%: Html.ActionLink("Home", "Index", "Home")%></li>
                <li><%: Html.ActionLink("About", "About", "Home")%></li>
                <li><%: Html.ActionLink("Customer", "CustomerDataAdd", "Customer")%></li>
            </ul>
        </div> 
```

代码好吗？

错误是：

* * *

## **“/”应用程序中的服务器错误。**

**无法找到该资源。** **说明**：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

**请求的 URL：** /Customer/CustomerDataAdd

* * *

**版本信息：** Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.272

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:22:22.400

您将需要创建一个新`Controller`类，该类调用`Customer`一个方法，该方法`CustomerDataAdd`将返回新创建的`CustomerDataAdd`视图。

```
public class Customer : Controller
{
    public ActionResult CustomerDataAdd()
    {
        return View();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:24:21.537

你确定你的控制器有`CustomerDataAdd`动作吗？`Customer`您的 HTML 代码没有任何问题。

```
public class Customer : Controller
{
    public ActionResult CustomerDataAdd()
    {
        return View();
    }
} 
```

# sql-server-2008 - SQL - 尝试遍历分区以查找重复项

> ID：13975214
> 
> 赞同：4
> 
> 时间：2012-12-20T15:18:44.387
> 
> 标签：sql-server-2008, tsql, duplicates

所以这里有一些示例信息：

```
ROW  |     PHONE     |   ID   |  NAME
_________________________________________
1      000-000-0000      3     Company1
2      000-000-0000     38     Company2
1      123-456-7890      0     Company3
2      123-456-7890      0     Company4
3      123-456-7890      0     Company5
1      197-865-4329      0     Company6
2      197-865-4329     18     Company7
1      654-987-1230     74     Company8
2      654-987-1230      2     Company9
1      951-753-8462      2     Company10
2      951-753-8462      3     Company11
3      951-753-8462      3     Company12
4      951-753-8462      3     Company13 
```

此信息是使用以下代码从表中提取的：

```
USE MyTable
GO

SELECT ROW_NUMBER() OVER (PARTITION BY AI.telephone1 ORDER BY AI.telephone1) AS Row
        ,AI.telephone1 AS [Main Phone #]
        ,AI.new_id AS [ID]
        ,AI.name AS [Account Name]
        ,AI.emailaddress1 AS [Email Address]
        ,AI.contactname AS [Primary Contact]
FROM AccountsInfo AI
WHERE AI.telephone1 IN (
        SELECT telephone1
        FROM MyDatabase.dbo.AccountsInfo AI
        WHERE telephone1 != 'NULL'
            AND telephone1 != '--'
        GROUP BY telephone1
        HAVING COUNT(*) > 1
        )
ORDER BY telephone1 
```

我现在需要做的，但不能绕开我的头，是遍历每个分区并只提取具有匹配 ID 号的结果。请参阅下面的表格，了解我希望表格最终的样子......

```
 PHONE    |   ID   |   NAME
_________________________________________
123-456-7890      0      Company3
123-456-7890      0      Company4
123-456-7890      0      Company5
951-753-8462      3      Company11
951-753-8462      3      Company12
951-753-8462      3      Company13 
```

如您所见，公司 3、4 和 5 进入了结果，因为它们三个都具有匹配的 ID 号和匹配的电话号码。公司 11、12 和 13 将其划分为分区，因为它们具有匹配的 ID 号。公司 10 未被拉出，因为它的 ID 号与 11、12 和 13 不同。

我需要做的是让代码遍历每个分区（按电话号码分区）并检查分区中每行的 ID 号与分区中的其他行。最终结果将是只有 ID 号在其分区内其他地方重复的行。

如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:53:03.233

这个怎么样？

```
SELECT   AI.telephone1 AS [Main Phone #]
        ,AI.new_id AS [ID]
        ,AI.name AS [Account Name]
        ,AI.emailaddress1 AS [Email Address]
        ,AI.contactname AS [Primary Contact]
FROM AccountsInfo AI
INNER JOIN 
(
        SELECT telephone1,new_id
        FROM MyDatabase.dbo.AccountsInfo AI
        WHERE telephone1 != 'NULL'
            AND telephone1 != '--'
        GROUP BY telephone1, new_id
        HAVING COUNT(*) > 1
) T
ON AI.telephone1 = T.telephone1
AND AI.new_id = T.new_id
ORDER BY AI.telephone1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:40:50.520

你也可以使用`having`：

```
select
    "phone", "id"
from
    "data"
group by "phone", "id"
having ( min ( "row" ) < max( "row" )); 
```

有关更多信息和可能性，请查看[Joe Celko 的 Thinking in Sets](http://my.safaribooksonline.com/book/databases/sql/9780080557526)

请参阅[SQL-Fiddle](http://sqlfiddle.com/#!3/3ebe9/1/0)

# php - 数据库数组到预期的 javascript 格式

> ID：13975215
> 
> 赞同：7
> 
> 时间：2012-12-20T15:18:44.643
> 
> 标签：php, javascript, arrays, charts, highcharts

我正在我的应用程序中实现 Highcharts。它需要特定格式的数据。

我表中的数据如下

![在此处输入图像描述](../Images/7dc19767940ed1277eb805de28e08c74.png)

javascript需要以下格式的数据

![在此处输入图像描述](../Images/a414f84ab5492e90af753377a6ec3a13.png)

当我`var_dump`的`x_axis`数组和`y_axis`数组时，我得到以下结果

![在此处输入图像描述](../Images/3fa6de2c06b5273e115f7f0f47a9fa88.png)

我应该使用哪些 php 函数来格式化我的数组元素并以该格式传递给该 JavaScript？

```
data:[
     [<? echo PHP_some_function(" ' ", x_axis) ?>, <? echo (y_axis) ?>]   //quotes for x, no quotes for y value
]  //Moreover it should run for all the values in x_axis and y_axis 
```

我需要一些逻辑在这里..

我的最终图表看起来像

![在此处输入图像描述](../Images/c0f8845f76903cad69732caec232b5bf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T19:07:39.477

**问题是您的查询。**

它应该如下所示。

```
SELECT x_axis, y_axis FROM yourTableName; 
```

这样，您将获得所需的格式`Highcharts`。您只需将其插入到数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:28:16.783

 ~~```
[<? echo "'". json_encode($x_axis). "', " . json_encode($y_axis) ?>] 
```~~ 

演示：[http ://codepad.org/G5JAtXWu](http://codepad.org/G5JAtXWu)

 ~~尼克斯说我很困惑。

你想要做的是：

```
foreach($x_axis as $key=>$x) {
    echo "['" . $x . "', " . $y_axis[$key] . "]";
} 
```

演示：[http ://codepad.org/SKNk1VaX](http://codepad.org/SKNk1VaX)

总结一下：

```
$d = array();
foreach($x_axis as $key=>$x) {
    $d[] = "['" . $x . "', " . $y_axis[$key] . "]";
}
echo json_encode($d); 
```

演示：[http ://codepad.org/KhofwXCi](http://codepad.org/KhofwXCi)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T15:28:48.140

假设：

```
$x_axis = array('Safari', 'Opera', 'Firefox', 'IE', 'Chrome', 'Others');
$y_axis = array(10, 6, 40.5, 20, 10.6, 0.5); 
```

这应该有效：

```
$data = array();
$length = count($x_axis);
for ($i = 0; $i < $length; $i++) {
    $data[] = array($x_axis[i], $y_axis[i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T15:53:37.277

可能是数组组合而不是 json 编码和替换？以防万一；）

```
<?php 

$x_axis = array(
'Safari', 'Opera', 'fireFox'
);

$y_axis = array(
10, 30.4, 50
);

$keyFilled = array_combine($x_axis, $y_axis);

arsort($keyFilled);

$jsonData = json_encode($keyFilled);

$jsonDataReplaced = str_replace(array(',', '{', '}', ':'), array('],[', '[', ']', ','), $jsonData);
echo '<pre>';
var_dump('['.$jsonDataReplaced.']');

?> 
```

输出是：

```
string(45) "[["fireFox",50],["Opera",30.4],["Safari",10]]" 
```

[http://phpfiddle.org/main/code/jq4-cgb](http://phpfiddle.org/main/code/jq4-cgb)~~

# eclipse - 下载没有软件包的 Eclipse？

> ID：13975219
> 
> 赞同：2
> 
> 时间：2012-12-20T15:18:56.277
> 
> 标签：eclipse

有没有办法下载没有添加任何包的eclipse（只有纯文本编辑器和基本功能）。这样我只能安装我知道我会使用的包，并保持最小化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T16:25:46.763

是的，这是可能的。转到[http://download.eclipse.org/eclipse/downloads/](http://download.eclipse.org/eclipse/downloads/)并单击所需的版本/构建。您正在为您的平台寻找**平台运行时二进制**下载。

# java - java - spring - xsl 转换 dtd 未找到错误

> ID：13975222
> 
> 赞同：1
> 
> 时间：2012-12-20T15:18:59.137
> 
> 标签：java, spring, xslt, transformation, dtd

我有一个使用 xsl 转换 xml 文件的代码，我的代码如下。我的问题是当我运行执行点时，它给了我以下错误。

```
StackTrace: javax.xml.transform.TransformerException: javax.xml.transform.TransformerException: com.sun.org.apache.xml.internal.utils.WrappedRuntimeException: /home/app/myapp/bin/xhtml11-flat.dtd (No such file or directory)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:720)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:313)
    at com.core.util.XmlUtils.transform(XmlUtils.java:151)
    at com.core.util.XmlUtils.transform(XmlUtils.java:147) 
```

长话短说，它试图在我执行应用程序的 bin 目录中找到 dtd 文件。

**/home/app/myapp/bin/xhtml11-flat.dtd**

我有 xhtml11-flat.dtd 文件，如果我将此文件复制到 bin 目录中它工作正常，而不是 bin 目录我想从类路径加载它知道如何以最少的更改来实现这一点吗？我不知道它从哪里加载 .dtd 代码，以便我可以在其中设置路径。

```
//Execution Point
function transform(){
    Templates templates = getTemplates();
    StringWriter result = new StringWriter();
    XmlUtils.transform(templates.newTransformer(), input, new StreamResult(result));

    ...
}

private Templates getTemplates() throws Exception {
    if (templates == null) {
        templates = XmlUtils.createTemplates(XslRdcSourceDocTransformer.class.getResourceAsStream("/xsl/" + getXslFileName()));
    }
    return templates;
}

public static Templates createTemplates(InputStream stream) throws Exception {
    TransformerFactory tfactory = TransformerFactory.newInstance();
    return tfactory.newTemplates(new StreamSource(stream));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T17:39:29.630

您的 xml 文件可能包含一个 doctype 声明，其中包含 dtd 的相对路径：

```
<!DOCTYPE html SYSTEM "xhtml11-flat.dtd"> 
```

转换器 api 尝试将此路径解析为 java 程序的当前工作目录。要自定义路径的解析方式，您需要实现一个[`EntityResolver`](http://docs.oracle.com/javase/6/docs/api/org/xml/sax/EntityResolver.html). 这`EntityResolver`可以返回对[`InputSource`](http://docs.oracle.com/javase/6/docs/api/index.html?org/xml/sax/InputSource.html)从类路径加载的 dtd 副本的引用。

```
public InputSource resolveEntity(final String publicId, final String systemId) throws SAXException {
    if ("xhtml11-flat.dtd".equals(systemId)) {
        ClassLoader cl = Thread.currentThread().getContextClassLoader();
        InputSource is = new InputSource();
        is.setSystemId(systemId);
        is.setByteStream(cl.getResourceAsStream("/com/example/dtd/xhtml11-flat.dtd"));
        return is;
    } else {
        return null;
    }
} 
```

如何使用此类取决于转换的源类型。对于 a`DOMSource`你必须配置`DocumentBuilder`：

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
factory.setValidating(false);
factory.setNamespaceAware(true);

DocumentBuilder builder = factory.newDocumentBuilder();
DocumentBuilder builder = ...
builder.setEntityResolver(entityResolver);

Source source = new DOMSource(builder.parse(inputStream)); 
```

对于`SAXSource`设置在`XMLReader`实例上：

```
SAXParserFactory factory1 = SAXParserFactory.newInstance();
factory1.setValidating(false);
factory1.setNamespaceAware(true);

SAXParser parser = factory1.newSAXParser();
XMLReader xmlreader = parser.getXMLReader();
xmlreader.setEntityResolver(entityResolver);

Source source = new SAXSource(xmlreader, new InputSource(stream)); 
```

无论源类型如何，转换的代码都是相同的，并且应该类似于您当前在`XmlUtils`类中拥有的代码：

```
Templates templates = ...
Result result = new StreamResult(...);
Transformer transformer = templates.newTransformer();
transformer.transform(source, result); 
```

# html - 如何通过网站隐藏点击并显示其他课程？

> ID：13975226
> 
> 赞同：0
> 
> 时间：2012-12-20T15:19:07.257
> 
> 标签：html, toggle, hidden

我有一个站点，在该站点上，我使用了一个类的多个 div，这些 div 被显示，而另一个类的多个 div 被隐藏。

然后我想要两个按钮，我可以用它们来切换显示两个类中的哪一个，当前显示的类的按钮处于非活动状态。

单击按钮时，我希望它在整个站点中生效，因此正确的类也会显示或隐藏在站点的其他页面上。

为了简化：因此，如果我单击按钮 A，则整个站点都会显示类 A，而隐藏按钮 B。如果我然后单击按钮 B，则整个站点都会显示 B 类，而隐藏按钮 A。

有什么想法可以轻松解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:23:41.043

如果是我，我可能会将当前状态存储在 cookie 中。然后只需显示/隐藏，因为它适合用户当前状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T13:40:56.857

由于新的英国立法要求您告诉网站用户网站存储在他们机器上的所有 cookie，我建议您使用会话变量，您可以使用`$_SESSION['class']="class1";`PHP 或者您可以`Session["class"] = "class1";`在 C# 中使用，然后您可以检查该会话通过执行以下操作使用`if`语句变量：

```
if($_SESSION['class'] == "class1")
{
    // show class 1
}
else
{
    // Show class 2
} 
```

上面的代码将在 C# 中通过替换`$_SESSION['class']`为`Session["class"]`显示或隐藏 div 来工作，您可以通过添加有问题的不同样式来在服务器端执行此操作，或者您可以使用 javascript，但我不确定您如何获得访问权限通过 JavaScript 到会话变量，因为它们是服务器端的。JQuery 将是一个很好的库，可用于显示/隐藏 DIV。

# c++ - main() 不执行，但正在编译

> ID：13975231
> 
> 赞同：6
> 
> 时间：2012-12-20T15:19:18.837
> 
> 标签：c++, compilation, runtime

我有这个简单的程序：

```
// Include libraries

#include <iostream>
#include <string>
#include <vector>

using namespace std;

// Include locals

// Start

#define NUMBER 600851475143

int main(int argc, const char* argv[])
{
    long long int ans = 0;
    long long int num = NUMBER;

    vector<int> factors;

    do
    {
        // Get lowest factor

        for (int i = 1; i <= num; ++i)
        {
            if (!(num % i))
            {
                factors.push_back(i);

                num /= i;
                break;
            }
        }
    } while (num > 1);

    cout << "Calculated to 1.\n";

    int highestFactor = numeric_limits<int>::min();

    for (int i = 0; i < factors.size(); ++i)
    {
        if (factors[i] > highestFactor)
        {
            highestFactor = factors[i];
        }
    }

    ans = highestFactor;

    cout << ans << endl;

    return EXIT_SUCCESS;
} 
```

编译`g++ -O2 -c -o prob3.o prob3.cpp`证明是成功的，但是当我运行它时，我什么也没看到，它一直在运行，最后我不得不 Ctrl-C （强制杀死）它。当我尝试添加

```
int main(int argc, const char* argv[])
{
    cout << "Test\n"; 
```

到程序，`Test`也没有打印出来。就像我的程序根本没有执行一样。

任何帮助或建议表示赞赏！

# 解决方案

我忘记了从 2 开始的素数。更改`for (int i = 1`为`for (int i = 2`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T15:22:12.450

那些嵌套循环将永远循环。内部`for`循环只会执行一次，因为`break`它只会执行一次`num /= 1`。这意味着`num`永远不会减少，因此`num > 1`永远不会是错误的。我想你只需要等待更长的时间！

您没有看到“测试”的原因可能是因为您没有刷新输出。尝试：

```
std::cout << "Test" << std::endl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:23:23.287

您的程序只是在运行。执行需要很长时间。

对于`cout << "Test\n";`，这是`cout`流未刷新的问题：您写入流的内容仍在程序内存中，尚未刷新到要打印的系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T15:29:12.243

您是否尝试过从 2 开始您的 for 条件？如果从 1 开始，模块功能没有意义。

如果 (!(num % i))

Num / 1 给 0，所以你没有进入 if 条件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T15:34:07.723

你的循环是一个无限循环。你找到的第一个因素是 1 （因为`num % 1`是`0`），因此你除以`num`哪个`1`结果`num`重新进入 for 循环，它一次又一次地做同样的事情。

`i`同样有了这个固定（在循环中用初始化`2`），你的内部 for 循环很可能是一个无限循环和/或导致 UB。否则（正如其他人所说）它“只是”运行很长时间。对于不同的情况（假设这里是最常见的平台）。这取决于您尝试考虑的值，如果第一个因素小于`std::numeric_limits<int>::max()`则这不适用。让我们称这些素数`BIGPRIME`（`600851475149`将是一个很好的例子）。

`long long int`大小至少为 64 位。`int`在大多数平台上不太可能大于 32 位，因此当它在您的平台上不是更大时，它只能上升到`std::numeric_limits<int>::max()`哪个是（再次假设这里是常见的 32 位平台）`2147483647`，而后者又在比较中得到提升`long long int`但保持其价值，它总是小于`BIGPRIME`。总是增加`i`永远不会到达任何地方，一旦你`max()`进入 UB 土地，因为有符号整数不会在 C++ 中包装。你的代码可能会在那里无限循环，或者做一些事情，比如记录`-1`为有效因素，或者让你怀孕。

您可以通过添加一些轻松观察到

```
if( 0 == (i%100000000)){ std::cout << i << std::endl; } 
```

进入`for`循环。

# iphone - iPhone App 崩溃日志 - 如何在崩溃日志中获取类名和方法名？

> ID：13975233
> 
> 赞同：2
> 
> 时间：2012-12-20T15:19:33.777
> 
> 标签：iphone, objective-c, ios, crash-reports, plcrashreporter

我正在使用[PLCrashReporter](http://code.google.com/p/plcrashreporter/)来获取我的应用程序的崩溃日志，我正在从崩溃日志中获取以下信息

```
<CrashReportInterface><CrashReport><applicationname>Basic</applicationname><bundleidentifier>com.iMobDev.weed</bundleidentifier><systemversion>6.0</systemversion><platform>x86_64</platform><senderversion>1.0</senderversion><version>1.0</version><userid></userid><contact></contact><description><![CDATA[]]></description><log><![CDATA[Incident Identifier: [TODO]
CrashReporter Key:   [TODO]
Process:         Basic [714]
Path:            /Users/bhavinparmar/Library/Application Support/iPhone Simulator/6.0/Applications/068F158F-CE56-46DD-B5D7-F93FD8FFB199/Basic.app/Basic
Identifier:      com.iMobDev.weed
Version:         1.0
Code Type:       X86
Parent Process:  debugserver [716]

Date/Time:       2012-12-20 14:12:04 +0000
OS Version:      Mac OS X 6.0
Report Version:  104

Exception Type:  SIGABRT
Exception Codes: #0 at 0xffffffff9ca719c6
Crashed Thread:  0

Application Specific Information:
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array'

Thread 0 Crashed:
0   libsystem_kernel.dylib              0x9ca719c6 0x9ca59000 + 100806
1   libsystem_sim_c.dylib               0x018fd57b 0x18b6000 + 292219
2   libc++abi.dylib                     0x01a7df7b 0x1a7b000 + 12155
3   libc++abi.dylib                     0x01a7ba25 0x1a7b000 + 2597
4   libobjc.A.dylib                     0x0170a0c1 0x1704000 + 24769
5   libc++abi.dylib                     0x01a7ba65 0x1a7b000 + 2661
6   libc++abi.dylib                     0x01a7bacd 0x1a7b000 + 2765
7   libc++abi.dylib                     0x01a7cbc2 0x1a7b000 + 7106
8   libobjc.A.dylib                     0x01709f89 0x1704000 + 24457
9   CoreFoundation                      0x01bb60b4 0x1b88000 + 188596
10  Basic                               0x00023fc1 0x1000 + 143297
11  UIKit                               0x00929817 0x83d000 + 968727
12  UIKit                               0x00929882 0x83d000 + 968834
13  UIKit                               0x00929b2a 0x83d000 + 969514
14  UIKit                               0x00940ef5 0x83d000 + 1064693
15  UIKit                               0x00940fdb 0x83d000 + 1064923
16  UIKit                               0x00941286 0x83d000 + 1065606
17  UIKit                               0x00941381 0x83d000 + 1065857
18  UIKit                               0x00941eab 0x83d000 + 1068715
19  UIKit                               0x00941fc9 0x83d000 + 1069001
20  UIKit                               0x00942055 0x83d000 + 1069141
21  UIKit                               0x00a473ab 0x83d000 + 2139051
22  UIKit                               0x0089892d 0x83d000 + 375085
23  libobjc.A.dylib                     0x0171d6b0 0x1704000 + 104112
24  QuartzCore                          0x02d6ffc0 0x2c74000 + 1032128
25  QuartzCore                          0x02d6433c 0x2c74000 + 983868
26  QuartzCore                          0x02d64150 0x2c74000 + 983376
27  QuartzCore                          0x02ce20bc 0x2c74000 + 450748
28  QuartzCore                          0x02ce3227 0x2c74000 + 455207
29  QuartzCore                          0x02d85b50 0x2c74000 + 1121104
30  UIKit                               0x008469ff 0x83d000 + 39423
31  UIKit                               0x008474e1 0x83d000 + 42209
32  UIKit                               0x00858315 0x83d000 + 111381
33  UIKit                               0x0085924b 0x83d000 + 115275
34  UIKit                               0x0084acf8 0x83d000 + 56568
35  GraphicsServices                    0x0229ddf9 0x2294000 + 40441
36  GraphicsServices                    0x0229dad0 0x2294000 + 39632
37  CoreFoundation                      0x01b89bf5 0x1b88000 + 7157
38  CoreFoundation                      0x01b89962 0x1b88000 + 6498
39  CoreFoundation                      0x01bbabb6 0x1b88000 + 207798
40  CoreFoundation                      0x01bb9f44 0x1b88000 + 204612
41  CoreFoundation                      0x01bb9e1b 0x1b88000 + 204315
42  UIKit                               0x008467da 0x83d000 + 38874
43  UIKit                               0x0084865c 0x83d000 + 46684
44  Basic                               0x0000278d 0x1000 + 6029
45  Basic                               0x000026c5 0x1000 + 5829

Thread 1:
0   libsystem_kernel.dylib              0x9ca7202e 0x9ca59000 + 102446
1   libsystem_c.dylib                   0x9c8f56fe 0x9c895000 + 395006

Thread 2:
0   libsystem_kernel.dylib              0x9ca72926 0x9ca59000 + 104742
1   libdispatch.dylib                   0x018818cc 0x187b000 + 26828

Thread 3:
0   libsystem_kernel.dylib              0x9ca7202e 0x9ca59000 + 102446
1   libsystem_c.dylib                   0x9c8f56fe 0x9c895000 + 395006

Thread 4:
0   libsystem_kernel.dylib              0x9ca6fc22 0x9ca59000 + 93218
1   CoreFoundation                      0x01bb5a49 0x1b88000 + 186953
2   CoreFoundation                      0x01bba8d4 0x1b88000 + 207060
3   CoreFoundation                      0x01bb9f44 0x1b88000 + 204612
4   CoreFoundation                      0x01bb9e1b 0x1b88000 + 204315
5   WebCore                             0x03e8d310 0x3184000 + 13669136
6   libsystem_c.dylib                   0x9c8f1ed9 0x9c895000 + 380633
7   libsystem_c.dylib                   0x9c8f56de 0x9c895000 + 394974

Thread 0 crashed with X86 Thread State:
   eax: 0x00000000    edx:  0x9ca719c6    ecx:  0xbfffbfdc    ebx:  0x0a37a000 
   ebp: 0xbfffbff8    esi:  0x00000006    edi:  0xad2822c0    esp:  0xbfffbfdc 
   eip: 0x9ca719c6 eflags:  0x00000246 trapno:  0x00000084     cs:  0x0000000b 
    ds: 0x00000023     es:  0x00000023     fs:  0x00000000     gs:  0x0000000f 

Binary Images:
r/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/ImageIO.framework/ImageIO
0x2c74000 - 0x2dc9000  QuartzCore armv6 <e4a8af9f2f2a3b05bf64dc8282af2eee> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x2e4a000 - 0x2e9c000  AppSupport armv6 <b4790eafc2ea3f00ae35a98f5869ec11> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x2ecb000 - 0x2f7a000  CoreText armv6 <9c4b4e7a1ba7346fa11c8d3050d5dcb9> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/CoreText.framework/CoreText
0x2fc2000 - 0x30de000  WebKit armv6 <b364c41a756835ae9818b7eb735c0b65> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x3184000 - 0x45b8000  WebCore armv6 <d33362b423c93f73849e5b5689cf276d> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x4d98000 - 0x4e41000  ProofReader armv6 <dba9674afeec3d21a4795407e72bbc10> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x4e57000 - 0x4e60000  libAccessibility.dylib armv6 <e8ea896f17ac3df9afa6ff5d00877622> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/lib/libAccessibility.dylib
0x4e6c000 - 0x4e6d000  Accelerate armv6 <ce335a8e605f30639efdac17af266960> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/Accelerate.framework/Accelerate
0x4e70000 - 0x4ea8000  PrintKit armv6 <035cd3b76d303575a51a4b938499e55e> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x4ebe000 - 0x4f22000  libc++.1.dylib armv6 <9e0b682e27de36c6803704a8457c4d97> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/lib/libc++.1.dylib
0x4f70000 - 0x4f7d000  OpenGLES armv6 <f39053050f283db39f52156af69132d5> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x4f86000 - 0x4f8d000  libGFXShared.dylib armv6 <8c38c13795383c9ba6b461375d32312c> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x4f92000 - 0x4fd3000  libGLImage.dylib armv6 <6f1e0b08050f31cdac21c754463499f1> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x4fda000 - 0x4fdd000  libCVMSPluginSupport.dylib armv6 <677b62949b6d315d857b5f621f5ddcba> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x4fe1000 - 0x4fea000  libCoreVMClient.dylib armv6 <ccd3c931f2783d28953cf6ee87ce2af1> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x4ff1000 - 0x5806000  libLLVMContainer.dylib armv6 <94738cccc81c3d2a8792cf4b7d4083d8> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/OpenGLES.framework/libLLVMContainer.dylib
0x5b45000 - 0x5b9a000  CoreMedia armv6 <a7bb17673a8b307fa9bd7167a2c1aa14> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x5bcb000 - 0x5c4a000  CoreAudio armv6 <572522cb240e34b3914e18edf9a6b87a> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x5c81000 - 0x5c8f000  AssetsLibraryServices armv6 <953cf80db1de35e5a245473e28c2560c> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x5c9b000 - 0x5c9e000  TCC armv6 <023d22dfa37b3f5e85f6396bccc7f6d4> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/TCC.framework/TCC
0x5ca2000 - 0x5e3a000  vImage armv6 <b0ef7abdf20e3616b8b2bab707710833> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x5e59000 - 0x5e5a000  vecLib armv6 <9a41b0b7bbe9391897e28bee279587b8> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x5e5d000 - 0x5ecb000  libvDSP.dylib armv6 <9b33c01f7de43623bdec7b4dd52581d0> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x5ed4000 - 0x62a6000  libLAPACK.dylib armv6 <0c339eb79a1f3f6db7cfab21606fcfc7> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x62d1000 - 0x6415000  libBLAS.dylib armv6 <88cfed9fd0723bde802308af901c91e7> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x6433000 - 0x64a2000  libvMisc.dylib armv6 <b95307f9a4383e48afd9b392adb0b8cf> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x64a9000 - 0x655a000  CoreTelephony armv6 <720a6454935635dea277edc8aafd21ae> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x65a5000 - 0x6600000  IMFoundation armv6 <2b25c545f243399eb0ec08dcfd4fbe5a> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation
0x662a000 - 0x662c000  DataMigration armv6 <396934af265b39c78eca4faca29cb287> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x6630000 - 0x6634000  MobileInstallation armv6 <85dc2b1385ec31db977154e80e911562> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x6639000 - 0x663e000  MobileSystemServices armv6 <f5f1e086f3343700a427e5c0b8f9a789> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/MobileSystemServices.framework/MobileSystemServices
0x6643000 - 0x667c000  Bom armv6 <43d5f33d0e1f32c6aa1304da48a641d2> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/Bom.framework/Bom
0x668a000 - 0x6697000  libbz2.1.0.dylib armv6 <e1b2bafe50a43e9289deaec39ac82cb9> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/lib/libbz2.1.0.dylib
0x669b000 - 0x66a3000  CommonUtilities armv6 <33c9d324c7933391a19ad84c1936c475> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities
0x66aa000 - 0x66db000  libtidy.A.dylib armv6 <81a8363c8ad63dad8a1b58a00b2497fd> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/lib/libtidy.A.dylib
0x66e7000 - 0x6a10000  JavaScriptCore armv6 <24ae2dfe548f394294937fc69a0b9227> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x6aaf000 - 0x6ed1000  FaceCoreLight armv6 <b7739ff40bdb3d89bc476c7edebd86cc> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x70e1000 - 0x710e000  libxslt.1.dylib armv6 <20e7d089e224368f8ce64c1bc37d5414> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/lib/libxslt.1.dylib
0x7119000 - 0x720d000  libiconv.2.dylib armv6 <4d8fd7b10fbf325c9308fe20a1825d66> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/lib/libiconv.2.dylib
0x7219000 - 0x721a000  libresolv.dylib armv6 <fdc9e86e2d833459bbb2d9118c0a7527> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/lib/libresolv.dylib
0x721e000 - 0x7223000  AggregateDictionary armv6 <035e788a885236a8a8a0aae57f2a7f27> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x9433c000 - 0x9435a000  libresolv.9.dylib armv6 <2870320a28da3b449d82d56e0036f6bb> /usr/lib/libresolv.9.dylib
0x7228000 - 0x7540000  AudioToolbox armv6 <95ee99005f803990820bffe259e6bc04> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x75fc000 - 0x7602000  FTClientServices armv6 <184c4501dd0d3a12b2560294103d797c> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x7607000 - 0x7706000  AddressBookUI armv6 <14c915b288eb33c7b985ea17484370a7> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x779b000 - 0x788d000  Message armv6 <708a34f84e623c8bb83c7fdeeceafa92> loper/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/DataAccess.framework/DataAccess
0x7a40000 - 0x7b4f000  EventKit armv6 <66fe344b12af3494910afcb531914d56> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/EventKit.framework/EventKit
0x7bd1000 - 0x7bdf000  MailServices armv6 <7455dac19d8331588dbcf3f9010ac97f> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/MailServices.framework/MailServices
0x7bec000 - 0x7c37000  MIME armv6 <fb9a2e54e0473813b2eb539904ec4ba2> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/MIME.framework/MIME
0x7c5e000 - 0x7c8f000  Celestial armv6 <f3ada760f73b3783a40c4541cc0128d3> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x7cbb000 - 0x7cd4000  DataAccessExpress armv6 <efb3fcc1129e3d14814fce123bc91bd4> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x7ce8000 - 0x7d4d000  QuickLook armv6 <7d4dfac8cc8831a3b294cf43c37c2cf0> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/QuickLook.framework/QuickLook
0x7d89000 - 0x7d8c000  MessageSupport armv6 <47f0fc1d441934359aabdcc1f98a9426> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/MessageSupport.framework/MessageSupport
0x7d91000 - 0x7ebb000  AVFoundation armv6 <20543bfb45483dfbb1d1c218853ce929> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x7f7c000 - 0x8011000  IMCore armv6 <ba1dee76d4cd31808aeb380a18cc405c> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x8036000 - 0x803f000  Marco armv6 <373df9ef364433cf9b6aa0659dbfc8ce> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/Marco.framework/Marco
0x8044000 - 0x8081000  FTServices armv6 <2a91a60968b7320a86dbd3ef1ce1ead6> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x8097000 - 0x810b000  ManagedConfiguration armv6 <0eacf3d28a5f373288fc93877f67f73a> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x814e000 - 0x8166000  Accounts armv6 <26159e4e51553f7cb94622803df1fe2f> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/Accounts.framework/Accounts
0x8177000 - 0x817a000  OAuth armv6 <30f6af9ed6463d2897451fbb67c87b2a> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/OAuth.framework/OAuth
0x817e000 - 0x818e000  AccountSettings armv6 <b3942fc6bd8b31d480bd8cfa1a5d302a> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x8197000 - 0x81b8000  PersistentConnection armv6 <2f58ef514fed39ae8e89312ff4693d6d> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x81d1000 - 0x81d7000  CertUI armv6 <7d52e457f94c3fb99be24d6229d9208f> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/CertUI.framework/CertUI
0x81de000 - 0x81e3000  ActorKit armv6 <ed34e294b7ec3b8bb6a980230f7e478e> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/ActorKit.framework/ActorKit
0x81e8000 - 0x8216000  MobileSync armv6 <dcac2bfaed253ee29cc962d8889b3673> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/MobileSync.framework/MobileSync
0x822b000 - 0x824e000  Notes armv6 <1aa11a94b3d43baf9e66d2232778f622> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/Notes.framework/Notes
0x825c000 - 0x82c9000  CoreLocation armv6 <a523c8e1959336879d0a83f0b30558a3> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x82f9000 - 0x834c000  iCalendar armv6 <c5c31e6f74ce316e86573d2dfbe4e707> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/iCalendar.framework/iCalendar
0x8375000 - 0x85c0000  CoreData armv6 <728437d5bf693166a1a0eca4420fcfa6> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks//CoreData.framework/CoreData
0x8681000 - 0x87cf000  GeoServices armv6 <0ca8c2435e1f392db56a1e37fc1a05a0> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x8874000 - 0x8880000  ProtocolBuffer armv6 <d6ca312b653f3cdeac074f6d9d4c2aa0> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x8889000 - 0x88a1000  MobileDeviceLink armv6 <dfa30d31e4e3362c97232b06a4a28d1b> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/MobileDeviceLink.framework/MobileDeviceLink
0x88ac000 - 0x88d9000  AppleAccount armv6 <60ae3b5b8af33947b445e860a5f619eb> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
0x88f6000 - 0x8937000  ContentIndex armv6 <289e1c7f25c73a888de10a33a80ab13f> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex
0x8952000 - 0x8966000  ApplePushService armv6 <6a5a069c5ff432efa1b90d43d1aafabe> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
0x8975000 - 0x8b80000  MediaToolbox armv6 <cb900c13c29d3a0596a3ffb603f79c4e> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/MediaToolbox.framework/MediaToolbox
0x8c2c000 - 0x8de2000  MediaPlayer armv6 <e946f42f7a2f35399a732c3d1a637daf> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks//MediaPlayer.framework/MediaPlayer
0x8ef3000 - 0x8f41000  iTunesStore armv6 <5ec3bcb6be4a3c47bf8efb90264b61ca> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/iTunesStore.framework/iTunesStore
0x8f74000 - 0x8f81000  IAP armv6 <c54a5e46b4d233a785841d00a17b1f64> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/IAP.framework/IAP
0x8f8c000 - 0x9068000  MusicLibrary armv6 <dff42be5bc6e3c1f9babdcfc238db644> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/MusicLibrary.framework/MusicLibrary
0x90cd000 - 0x9173000  StoreServices armv6 <4e8512b86fd83c4db96e4177dfadd594> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x91e2000 - 0x91ee000  MediaRemote armv6 <cec25c07b332345d92c11e2fdfcfe5ee> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/MediaRemote.framework/MediaRemote
0x91f8000 - 0x922d000  HomeSharing armv6 <9ffbf87e9aa53e059f2e1b60a0e7a2be> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/HomeSharing.framework/HomeSharing
0x924f000 - 0x92a0000  MediaControlSender armv6 <39bbf404941e3025acc5786d22e85279> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender
0x92c0000 - 0x9366000  CoreMotion armv6 <1cc36264c5ef3deba0820a69ab601bd8> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/CoreMotion.framework/CoreMotion
0xa700000 - 0xa74b000  libCGFreetype.A.dylib armv6 <4b3ffcd7dfb73542a6d46a4047b94d58> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0xa75e000 - 0xa787000  libRIP.A.dylib armv6 <752b122b8ec130af944b0c9e0a0ca550> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0xa4f6000 - 0xa4f9000  DebuggerIntrospectionSupport.dylib armv6 <809f222b8eaf30f585bd98e0c7689940> /Applications/Xcode.app/Contents/PlugIns/DebuggerFoundation.ideplugin/Contents/Resources/DebuggerIntrospectionSupport.dylib
]]></log></CrashReport></CrashReportInterface> 
```

现在我想要崩溃日志中的类名和函数名，其中应用程序在源代码中崩溃，所以我可以轻松获得解决方案............

请帮我，

提前致谢.....！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:31:24.083

你想做“符号化”。

有关符号化的信息，请参阅此[Apple 文档](http://developer.apple.com/library/ios/#technotes/tn2151/_index.html#//apple_ref/doc/uid/DTS40008184-CH1-ANALYZING_CRASH_REPORTS-SYMBOLICATION)或搜索其他教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:38:00.937

这是我为使符号化更容易而制作的一个简单脚本

```
#!/bin/bash
echo "Drop crash..."
read s2
echo "Drop dSYM..."
read s3
export DEVELOPER_DIR="/Applications/XCode.app/Contents/Developer"
symbolicatecrash "$s2" "$s3" > "$s2.txt" 
```

只需将其保存为 SymbolicateCrashScript.sh 并从终端运行 chmod 755 即可。

在执行此操作之前，还要确保它崩溃的构建中的 .app 和 .dsym 位于同一文件夹中。

# css - div 的 CSS 背景只会显示颜色，而不是图像

> ID：13975235
> 
> 赞同：3
> 
> 时间：2012-12-20T15:19:45.493
> 
> 标签：css, html, background-image, background-color

当我将 CSS`background`应用于我的`div`标签时，颜色会起作用，但`background-image`不会显示。

我希望在`background-image`我的 div 底部重复，但即使我只应用`background-image: url('assets/shadow.png');`没有`position`,`repeat`或`background-color`，它仍然不会显示。仅显示白色。

但是，如果我应用WILL 会在后台正确显示`background-color: #ECECFB;`。`background-color`

为什么不起作用`background-image`？

**CSS**

```
#slider-container,#footer-container,#main aside {
    background-color: #ECECFB;
    background-image: url('assets/shadow.png');
    background-repeat: repeat-x;
    background-position: bottom;
} 
```

图像链接正确。图片为 15 像素 x 12 像素。

我尝试了速记 CSS 背景，只显示颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:23:23.093

看看下面我的小提琴，注意它工作正常。如果图像没有下载（即错误的 url），则只会出现背景颜色。检查 chrome 开发工具上的位置或网络选项卡，以查看是否未加载背景图像 (404)。

```
<div class="foo"></div>
.foo {
 background-color: red;
 background-image: url(http://subtlepatterns.subtlepatterns.netdna-cdn.com/patterns/blackorchid.png);
 background-repeat: repeat-x;
 background-position: bottom;
 height: 500px;
 width: 500px;   
}​ 
```

[http://jsfiddle.net/rlemon/XCbK4/](http://jsfiddle.net/rlemon/XCbK4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:33:35.010

你可以试试这个。我希望它会有所帮助：

```
#slider-container,#footer-container,#main aside {
background: #ECECFB url('assets/shadow.png') repeat-x bottom
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:34:25.090

该`background`属性还可用于显示图像。

### 句法

```
background: color position size repeat origin clip attachment image; 
```

使用`background`和`background-image`同时使用时可能会发生冲突。我认为 using`background-color`由于某种原因表现不同，或者您使用它们的顺序可能很重要。

这当然也会给你颜色而不是图像：

```
#slider-container,#footer-container,#main aside {
    background-image: url('assets/shadow.png');
    background: #ECECFB;  // overwriting the image
}​ 
```

# d3.js - 更新拉丝区域图的 y 轴

> ID：13975237
> 
> 赞同：18
> 
> 时间：2012-12-20T15:19:47.303
> 
> 标签：d3.js, brush

我正在使用 d3.js，并且我正在通过修改[此示例](http://bl.ocks.org/1667367)来处理拉丝区域图。除了根据画笔改变 x 轴之外，我还希望根据画笔内数据的 y 值重新绘制图表的 y 轴（类似于[Google Finance 图表](http://www.google.com/finance?q=INDEXDJX%3a.DJI,INDEXSP%3a.INX,INDEXNASDAQ%3a.IXIC&ei=qCnTULiiJqut0AGYiQE)的行为） .

我已经使该功能正常工作，但只能以能够在 x 和 y 空间中绘制画笔的方式进行。我首先通过向`brush`变量添加 ay 比例来做到这一点：

```
var brush = d3.svg.brush()
    .x(x2)
    .y(y2)
    .on("brush", brush); 
```

这使得`brush.extent()`返回以下多维数组：`[ [x0, y0], [x1, y1] ]`. 然后我在函数中使用这些数据`brush()`来重新定义焦点图表的 x 和 y 域：

```
function brush() {
  var extent = brush.extent();
  x.domain(brush.empty() ? x2.domain() : [ extent[0][0], extent[1][0] ]);
  y.domain(brush.empty() ? y2.domain() : [ extent[0][1], extent[1][1] ]);
  focus.select("path").attr("d", area);
  focus.select(".x.axis").call(xAxis);
  focus.select(".y.axis").call(yAxis);
} 
```

这可行，但是通过在画笔变量中定义 y 比例，用户现在可以在焦点图表中拖动“框”，而不是像原始图表中那样只能从西向东拖动。

本质上，我的问题是：**如何获得落在画笔区域内的值范围，而不是画笔区域本身的范围？**这甚至可能吗？

d3的刷机文档在[这里](https://github.com/mbostock/d3/wiki/SVG-Controls#wiki-brush)。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-21T00:06:26.727

我想出了一个解决方案。

我使用画笔过滤的 x.domain 过滤掉我的原始数据集。这个新的过滤数据集只有属于画笔的值：

```
// Use x.domain to filter the data, then find the max and min duration of this new set, then set y.domain to that
  x.domain(brush.empty() ? x2.domain() : brush.extent());
  var dataFiltered = data.filter(function(d, i) {
    if ( (d.date >= x.domain()[0]) && (d.date <= x.domain()[1]) ) {
      return d.duration;
    }
  })
  y.domain([0, d3.max(dataFiltered.map(function(d) { return d.duration; }))]); 
```

最后，一定要重绘 y 轴和 x 轴：

```
focus.select("path").attr("d", area);
focus.select(".x.axis").call(xAxis);
focus.select(".y.axis").call(yAxis); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-11T12:35:34.037

一个更短的可能性是[`d3.scale.invert()`](https://github.com/d3/d3-scale/blob/master/README.md#continuous_invert)在你`brush.extent()`喜欢的地方使用：

```
var domainExtent = brush.extent().map(function(d){return scale.invert(d);});
var filteredData = data.filter(function(d){return ((d <= domainExtent[1]) && (d >= domainExtent[0]));}); 
```

**However**, by now d3 has gained [`d3.brushX()`](https://github.com/d3/d3-brush#brushX), which only allows brushing in East/West direction by design.

# ruby-on-rails - 唯一性约束不影响字段

> ID：13975239
> 
> 赞同：1
> 
> 时间：2012-12-20T15:19:56.647
> 
> 标签：ruby-on-rails, ruby, activemodel, activesupport

```
class User < ActiveRecord::Base
  attr_accessible :username, :password
  attr_accessor :username, :password

  validates :username, :presence => true, :uniqueness => true
  validates :password, :presence => true
end 
```

测试：

```
 it "prevents username duplication" do
    FactoryGirl.create(:user, username: 'ted').should be_valid
    FactoryGirl.build(:user, username: 'ted').should_not be_valid
  end 
```

我已经确认`User.count()`是 2。唯一性约束我缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:16:30.313

attr_accessor 破坏模型。摆脱那条线。

# vba - 监听表过滤器激活

> ID：13975240
> 
> 赞同：0
> 
> 时间：2012-12-20T15:19:57.557
> 
> 标签：vba, excel

我有一个表，其顶部有一系列过滤器（如往常一样）。该表提供了一个包含多个数据系列的海量图表。为了隐藏不同系列的数据，我对表格中的信息进行了分组。然后我可以单击减号按钮通过折叠组从图表中删除一系列数据，或者单击加号按钮以相同的方式将其添加回来。是的，我知道，这不是最好的解决方案。这是一个早期的努力，我能说什么？我的默认设置是隐藏所有数据（所有组折叠）。

我有一个用户（一个非常重要的用户）希望能够使用顶部的过滤器来查找他们正在寻找的特定系列。过滤器会很好地找到折叠的系列，但该系列不会显示，因为它已折叠。

所以，我想要做的是让所有组在过滤器被激活时自动扩展。在我可以简单地重新设计图表之前，这应该作为一种权宜之计。

问题：当过滤器被点击（或以其他方式使用）时，我不知道如何让 Excel 通知。我尝试过使用 Worksheet_Change 和 Worksheet_SelectionChange，但它们都没有激活我在侦听器中设置的代码。该代码仅供参考，检查以确保过滤器正在使用并相应地调整分组。如果我能让 Excel 注意到它的存在，它应该可以正常工作。

我已经考虑过制作自己的侦听器，但在代码中我无法插入它以使其激活。我只需要一个监听器，它会注意到过滤器何时更改。

有什么想法吗？经过一个小时的搜索，我被难住了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T16:26:40.257

好的，经过一番研究，我想出了一个解决方法。这里最大的问题是更改过滤器不会引发 VBA 可以听到的任何事件。大问题。

简单的解决方案：创建可以激活监听器的东西。

我最终做的是在我的表格之外的某个地方找到一个不会受到崩溃影响的单元格，然后我添加了一个非常简单的公式 (=Count(H:H))。现在，只要表格折叠，计数就会受到影响，从而激活 Worksheet_Calculate 侦听器。瞧！我可以随心所欲地动态更改分组:-)。

所以你有它。如果您需要检测通过 Worksheet 监听器激活的过滤器，您只需要设置一个公式来激活计算监听器。

参考：[MSDN 上相同的文章]。[1](http://blogs.msdn.com/b/vsto/archive/2010/05/03/handling-sort-and-filter-events-in-excel-navneet-gupta.aspx) 显然还有一种更强大的方法可以解决此问题，文章中对此进行了详细说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T16:06:01.663

*   你提到了表，所以假设它是数据透视表，你可以试试，

`Worksheet_PivotTableUpdate(ByVal Target As PivotTable)`

*   如果它只是一个目标范围的变化，那么，

`If Intersect(Target, Range("A2"))`

# sql - MS-Access 2003 根据表达式限制查询结果

> ID：13975242
> 
> 赞同：0
> 
> 时间：2012-12-20T15:20:06.630
> 
> 标签：sql, ms-access-2003

我有一个查询可以提取假期摘要信息。我想将结果限制为大于当前的周年日期。当我只使用周年纪念表达式来查询时，周年纪念表达式可以正常工作。当我输入 Where 子句时，它会提示周年纪念日。如果没有 Where 子句，则执行表达式并显示周年日期。

```
SELECT SchedulingLog.UserID, SchedulingLog.Category, Sum(IIf([CatDetail] Like 'Ann*',[Value],0)) AS Gain, Sum(IIf([CatDetail] Like '*Used*',[Value],0))+Sum(IIf([CatDetail] Like 'Adj*',[Value],0)) AS Used, [Gain]+[Used] AS [Left], Month([WM DOH]) & "/" & Day([WM DOH]) & "/" & Year(Date()) AS Anniversary
FROM SchedulingLog INNER JOIN Roster ON SchedulingLog.UserID = Roster.UserID
WHERE (((SchedulingLog.EventDate)>=[Anniversary]))
GROUP BY SchedulingLog.UserID, SchedulingLog.Category, Month([WM DOH]) & "/" & Day([WM DOH]) & "/" & Year(Date())
HAVING (((SchedulingLog.Category) Like "Vac*")); 
```

我正在寻找的是一种将总和值限制在表达式周年纪念日之后的事件日期。

基于 Remous 对我的 SQL 缺乏经验和指导的耐心。我开始看到光明。所以当我拿

```
DateAdd("yyyy",1,[WM DOH])
it returns the individuals date of Hire and the year advances by 1.
ex. employee DOH 12-25-2003
The expression returns 12-25-2004 
```

我正在将 dateAdd 调整为这样的东西

```
DateAdd("yyyy",Year(Date())-1,[WM DOH])
This returns something completely wrong. but illustrates what I am trying to accomplish
desired result ex. 12-25-2011 
```

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:21:39.303

相同的故事。周年纪念不是您可以在 where 子句中引用的字段，它是一个别名。

```
WHERE SchedulingLog.EventDate>= 
    DateSerial(Year(Date())-1,Month([WM DOH]) ,Day([WM DOH])) 
```

# actionscript-3 - AS3 语法编译错误 - 在 rightparen 之前需要分号

> ID：13975250
> 
> 赞同：1
> 
> 时间：2012-12-20T15:20:43.327
> 
> 标签：actionscript-3, flash, multi-touch, flash-cs6

我知道这是非常基本的，但是以下函数在编译时会产生 2 个语法错误，如下所示。我想不通他们。任何帮助深表感谢。

```
Game, Layer 'Actions', Frame 2, Line 5  1086: Syntax error: expecting semicolon before rightparen.

Game, Layer 'Actions', Frame 2, Line 5  1084: Syntax error: expecting rightbrace before semicolon.

function fl_TouchEndHandler_2(event:TouchEvent):void {
    // Drag & drop stuff...
    contained[i] = Gem1_MC.hitTestObject(Gem4_MC));
    contained[i] = Gem2_MC.hitTestObject(Gem4_MC));
    contained[i] = Gem3_MC.hitTestObject(Gem4_MC));
    if (contained.indexOf(false) == -1) { // This returns -1 if it can't find false
        gotoAndStop(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:23:47.737

你有额外的')'

尝试：

```
function fl_TouchEndHandler_2(event:TouchEvent):void {
   // Drag & drop stuff...
   contained[i] = Gem1_MC.hitTestObject(Gem4_MC);
   contained[i] = Gem2_MC.hitTestObject(Gem4_MC);
   contained[i] = Gem3_MC.hitTestObject(Gem4_MC);
   if (contained.indexOf(false) == -1) { // This returns -1 if it can't find false
      gotoAndStop(1);
   }
 } 
```

# python - Django-haystack：如何在我的设置中启用突出显示？

> ID：13975251
> 
> 赞同：2
> 
> 时间：2012-12-20T15:20:44.620
> 
> 标签：python, django, django-haystack

我目前正在使用[django-haystack v2.0.0-beta](https://github.com/toastdriven/django-haystack)和[Whoosh](https://bitbucket.org/mchaput/whoosh/wiki/Home)作为后端向我的 Django 应用程序添加搜索功能。到目前为止，创建索引并返回搜索结果工作正常。现在我想启用突出显示功能，但我没有让它工作。

我正在使用高度定制的设置，干草堆文档对此没有太大帮助。我的 Django 应用程序是一个纯 AJAX 应用程序，即客户端和服务器之间的所有请求都使用 jQuery 和`$.ajax()`. 这就是我编写自定义 Django 视图的原因，该视图手动创建干草堆搜索查询集并将搜索结果转储到 JSON 对象中。所有这些都可以正常工作，但是添加突出显示不起作用。这是我到目前为止的代码：

**search_indexes.py**

```
class CrawledWebpageIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)

    def get_model(self):
        return CrawledWebpage # This is my Django model 
```

**表格.py**

```
class HaystackSearchForm(forms.Form):

    q = forms.CharField(
        max_length=100,
        label='Enter your search query') 
```

**views.py**（我采用了[这篇文章](https://stackoverflow.com/a/3037283/1125413)中的一些代码，因为它对我来说看起来很合理，但可能是错误的）

```
def return_search_results_ajax(request):
    haystack_search_form = HaystackSearchForm(request.POST)
    response = {}

    if haystack_search_form.is_valid():
        search_query = haystack_search_form.cleaned_data['q']
        sqs = SearchQuerySet().filter(content=search_query)
        highlighted_search_form = HighlightedSearchForm(request.POST, searchqueryset=sqs, load_all=True)
        search_results = highlighted_search_form.search()

        # Here I extract those fields of my model that should be displayed as results
        webpage_urls = [result.object.url for result in search_results[:10]]
        response['webpage_urls'] = webpage_urls

    return HttpResponse(json.dumps(response), mimetype='application/json') 
```

只要搜索结果正确返回，此代码就可以正常工作。但是当我尝试访问搜索结果的突出显示文本片段时，例如第一个：

```
print search_results[0].highlighted 
```

然后我总是得到一个空字符串作为结果：`{'text': ['']}`

谁能帮我让突出显示功能正常工作？非常感谢您提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T16:27:50.747

看起来这可能是一个长期未解决的 Haystack 错误：http: [//github.com/toastdriven/django-haystack/issues/310](http://github.com/toastdriven/django-haystack/issues/310) [http://github.com/toastdriven/django-haystack/issues /273](http://github.com/toastdriven/django-haystack/issues/273) [http://github.com/toastdriven/django-haystack/issues/582](http://github.com/toastdriven/django-haystack/issues/582)

作为替代方案，您可以使用 Haystack 的突出显示功能而不是 Whoosh 自己突出显示结果。例如，一旦你得到你的搜索结果`sqs`，你可以做

```
from haystack.utils import Highlighter
highlighter = Highlighter(search_query)
print highlighter.highlight(sqs[0].text) 
```

获取第一个结果的突出显示文本。有关文档，请参阅[http://django-haystack.readthedocs.org/en/latest/highlighting.html](http://django-haystack.readthedocs.org/en/latest/highlighting.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:40:45.690

我不熟悉 Haystack，但可能是因为您`HaystackSearchForm`在一个地方和`HighlightedSearchForm`另一个地方使用吗？

# azure - Azure Blob 存储下载

> ID：13975252
> 
> 赞同：0
> 
> 时间：2012-12-20T15:20:46.027
> 
> 标签：azure, azure-storage, azure-blob-storage

我正在学习 Azure，我已经成功上传并列出了容器中的文件。当我在我的家用电脑上运行下面的代码时，一切正常，没有异常，但是当我在我的工作电脑上运行时，我发现一个异常状态：

Blob 数据已损坏。接收到的字节数不正确 '12288' / '-1'

该文件似乎可以很好地下载到我的本地驱动器，我只是不明白为什么它在两台不同的 PC 上工作方式不同，代码完全相同。

```
CloudStorageAccount storageAccount = CloudStorageAccount.Parse("My connection string");
CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();
CloudBlobContainer container = blobClient.GetContainerReference("mycontainer");
CloudBlockBlob blockBlob = container.GetBlockBlobReference("ARCS.TXT");
using (var fileStream = System.IO.File.OpenWrite(@"c:\a\ARCS.txt"))
{
    blockBlob.DownloadToStream(fileStream);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:45:22.767

可能是您组织的防火墙阻止了特定端口。我写了一篇博客，讨论了类似的端口相关问题。将要求您验证一次。[http://nabaruns.blogspot.in/2012/11/common-port-related-troubleshoot-in.html](http://nabaruns.blogspot.in/2012/11/common-port-related-troubleshoot-in.html)

问候纳巴伦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:40:19.603

您的代码看起来正确。

这是一个奇怪的问题。这更奇怪，因为即使在错误之后文件也能正确下载。我建议您在两台机器上都使用[Azure 存储资源](http://azurestorageexplorer.codeplex.com/)管理器。

如果 Azure 存储资源管理器在两台机器上都能正常工作，那么下一步就是检查两台机器上的 SDK 版本。旧版本的 SDK 有可能出现此类错误。

您可能还想尝试使用[Commandline Downloader](http://azureblobdownloader.codeplex.com/)来解决您的问题。

注意 - **Azure 存储资源**管理器和**命令行下载**器是开源的。如果通过它们下载工作正常，那么您也可以下载其代码并通过它进行调试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T16:38:23.503

我建议尝试 CloudBlob.DownloadToFile 或 CloudBlob.DownloadToStream 而不是 CloudBlockBlob

# javascript - 在javascript中获取SQL数据

> ID：13975259
> 
> 赞同：-2
> 
> 时间：2012-12-20T15:21:07.597
> 
> 标签：javascript, sql

我有这个脚本

我想从数据库中选择图像有人可以帮助我吗？或者给我一个脚本的例子，这样我就可以看到它是如何完成的

```
<SCRIPT LANGUAGE="JAVASCRIPT">
if (document.images) {
image1 = new Image
image2 = new Image

image1.src = "/images/image01.jpg"
image2.src = "/images/image02.jpg"

}
</SCRIPT>

<p><a href="#"
onMouseover="document.imagename.src=image2.src" 
onMouseout="document.imagename.src=image2.src">text 1</a>  <br />
<a href="#"
onMouseover="document.imagename.src=image1.src"
onMouseout="document.imagename.src=image1.src">text 2</a></p>
<img src="/images/image01.jpg" name="imagename" border="0" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:24:56.160

您可以使用 jQuery.Ajax 来调用 Web 函数。

看到这个 [jQuery.Ajax](http://api.jquery.com/jQuery.ajax/)

如果您使用的是 c# ，这适用于[Web 服务](http://www.codeproject.com/Articles/863/Your-first-C-Web-Service)

除了基于微软的语言，我不熟悉其他语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:25:14.670

您可以使用 jQuery 或 Ajax 来实现您的目标。我认为使用 javascript 是不可能的。

使用 jQuery，您可以拥有一个单独的文件，您可以在其中编写服务器端语言和查询。

和

```
$.post(url, {params, ..}, function (Result) { alert(Result will have the location of your image );} ); 
```

# android - 根据百分比创建布局

> ID：13975261
> 
> 赞同：2
> 
> 时间：2012-12-20T15:21:16.040
> 
> 标签：android, android-layout

我正在尝试做我的第一个应用程序。

我正在做一个包含四行的布局。第一行有一个标题（10% 高度），第二行有两个图像（40% 高度），第三行有两个图像（40% 高度），第四行有一个按钮（10% 高度）。

现在，我正在使用垂直方向的线性布局。使用重量总和和重量，我在每一行都有正确的比例。

但是，如果我在第二行和第三行使用线性布局权重，则会收到有关嵌套权重和性能不佳的警告。我了解性能不佳的问题，但没有它们我不知道如何解决我的问题。

我需要每个图像是其父宽度的 50%。

谢谢你的帮助。

编辑：这是我想要完成的快速模型 [https://dl.dropbox.com/u/252856/androidlayout.jpg](https://dl.dropbox.com/u/252856/androidlayout.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:29:25.513

在您的特定情况下，您可以使两者`ImageViews`占据父级宽度的 50%，而无需使用带有这样的块的权重：

```
<RelativeLayout android:layout_width="match_parent" android:layout_height="0dp" 
     android:layout_weight="your_value">
     <View android:id="@+id/anchor" android:layout_width="0dp" 
           android:layout_height="match_parent" android:layout_centerHorizontal="true"/>
     <ImageView android:layout_width="wrap_content" 
           android:layout_height="match_parent" android:layout_alignParentLeft="true"
           android:layout_alignRight="@id/anchor" /> 
     <ImageView android:layout_width="wrap_content" 
           android:layout_height="match_parent" android:layout_alignParentRight="true"
           android:layout_alignLeft="@id/anchor" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:27:47.620

您可能想看看并考虑是否可以使您的布局作为[GridLayout](http://developer.android.com/reference/android/widget/GridLayout.html)工作。它旨在处理您希望将 UI 元素排列成大致类似于网格的模式的情况，同时避免嵌套权重可能导致的性能问题。如果您的 UI 适合这种布局，您可以利用它来实现[更简单的实现和更快的性能。](http://android-developers.blogspot.com/2011/11/new-layout-widgets-space-and-gridlayout.html)

GridLayout 早在 API 级别 7 就受到支持，我相信，通过支持库。

# asp.net - asp.net 有界字段中的日期格式错误？

> ID：13975262
> 
> 赞同：0
> 
> 时间：2012-12-20T15:21:17.083
> 
> 标签：asp.net, gridview, asp.net-4.0

我在有界字段中有一个日期，如下所示：

```
<asp:BoundField DataField="closeDate" HeaderText="End Date"  SortExpression="closeDate" htmlencode="false" dataformatstring="{0:d}" >
  <ItemStyle CssClass="georgeTest"></ItemStyle>
  <HeaderStyle CssClass="georgeTest"> </HeaderStyle> 
</asp:BoundField> 
```

我正在尝试以这种方式对其进行格式化：“12/18/2012”的`dataformatstring`属性使用上面显示的两种格式，`dataformatstring="{0:dd/MM/yyyy}}"`它们都一直给我相同的值“1/1/0001”，我不能弄清楚为什么会这样。

我在 MS Visual Studio 2010 和 ASP.NET 4.0 中工作。

该字段属于`DateTime`类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:06:11.357

作为参考，我已经发布了我评论中的链接内容作为答案：

如何使用 ASP.NET 2.0 在 GridView 中设置日期格式（使用 HtmlEncode 属性）

[由 Peter Kellner 在 .Net 2.0、ASP.NET 2.0 中发布](http://peterkellner.net/2006/05/24/how-to-set-a-date-format-in-gridview-using-aspnet-20using-htmlencode-property/) （又名，DataFormatString="{0:M-dd-yyyy}" 问题）

一个非常普遍的愿望是设置 GridView 的一列以仅显示 DateTime 类型的月、日和年。问题是默认情况下，BoundField 属性的 HtmlEncode 属性（

```
<columns>
  <asp:BoundField headertext="CreationDate" dataformatstring="{0:M-dd-yyyy}" 
       datafield="CreationDate"  />
</columns> 
```

您有两种选择可以按照您的预期进行这项工作。第一种选择是简单地将 HtmlEncode 设置为 false，如下所示：

```
<asp:GridView id="GridView1" runat="server" >
<columns>
  <asp:BoundField headertext="CreationDate" dataformatstring="{0:M-dd-yyyy}" 
       datafield="CreationDate"  HtmlEncode="false" />
</columns> 
```

第二种选择是使列成为模板，并直接在标签或文本字段中简单地设置格式字符串，如下所示。

```
<asp:GridView id="GridView3" runat="server" >
 <columns>
  <asp:TemplateField headertext="CreationDate" >
   <edititemtemplate>
    <asp:Label id="Label1" runat="server" Label.Text='<%# Eval("CreationDate", "{0:M-dd-yyyy}") %>'>
    </asp:Label>
   </edititemtemplate>
   <itemtemplate>
    <asp:Label id="Label1" runat="server" Label.Text='<%# Bind("CreationDate", "{0:M-dd-yyyy}") %>'>;
    </asp:Label>
   </itemtemplate>
  </asp:TemplateField>
 </columns>
</asp> 
```

# javascript - 使用 TraceKit javascript 库完成堆栈跟踪

> ID：13975264
> 
> 赞同：4
> 
> 时间：2012-12-20T15:21:33.413
> 
> 标签：javascript, tracekit

我正在尝试[TraceKit 来自动向](https://github.com/occ/TraceKit)服务器报告 Javascript 错误。它可以正常工作，但堆栈跟踪除外。它只包含一个元素：

```
TraceKit.report.subscribe(function(stackInfo) { alert(stackInfo.stack.length);});

function foo() {
   bar();
}

function bar() {                                                
   throw "oops";
}

foo(); 
```

警报显示“1”。我还用相同的代码创建[了一个 JSFiddle ；](http://jsfiddle.net/aleksabl/nMmTm/)

为什么我没有得到完整的堆栈跟踪？我已经用 Chrome 和 Firefox 进行了测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T07:07:26.300

现在，您需要更改`throw "oops";`为`throw new Error("oops");`您应该获得完整的堆栈跟踪。

将来，TraceKit 可以通过重新抛出错误并相应地修复堆栈跟踪来解决此问题。这个 jsfiddle 显示重新抛出以获得真正的堆栈跟踪：http: [//jsfiddle.net/DevinRhode2/dAYmJ/1/](http://jsfiddle.net/DevinRhode2/dAYmJ/1/)

那里的代码是：

```
try {
  function foo() {
     bar();
  }

  function bar() {                                                
     throw "oops";
  }

  foo();
} catch (e) {
  console.log(e, e.message, e.stack); //oops undefined undefined 
  try {
    throw new Error(e);
  } catch (e) {
    console.log(
      e,       e.message, e.stack);/*
      Error {} "oops"     "Error: oops
        at file://localhost/Users/devinrhode2/Desktop/test.html:23:13"
    */
  }
}​​​​​​​ 
```

关于 github 上 TraceKit 的其他讨论：[https ://github.com/occ/TraceKit/issues/23](https://github.com/occ/TraceKit/issues/23)

感谢亚历克斯提出这个问题！

# c# - 如何使用 regex 和 c# 忽略字符串中的额外空格？

> ID：13975266
> 
> 赞同：2
> 
> 时间：2012-12-20T15:21:35.317
> 
> 标签：c#

> **可能重复：**
> [如何忽略正则表达式主题字符串中的空格？](https://stackoverflow.com/questions/4590298/how-to-ignore-whitespace-in-a-regular-expression-subject-string)

我正在使用以下内容：

```
"<a href=\"(.+?)\">(.+?)</a>" 
```

匹配：

```
"<a href="x">xx</a>" 
```

但是有时我的用户会输入以下内容：

```
"<a   href="x" >xx</a>"
"<a href="x">xx</a>"
"<a href="x"   >xx</a>" 
```

如何修改正则表达式，使其匹配上述三个字符串中的一个或多个空格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:24:56.543

一种解决方案是`\s*`在合法但不需要空格的地方以及需要`\s+`空格的地方添加空格，如下所示：

```
<a\\s+href\\s*=\\s*\"([^\"]*)\"\\s*>([^<]*)</a> 
```

另一方面，这正是为什么不应该尝试使用正则表达式解析 XML 或 HTML 的一个例子：它只是一个错误的工具来完成这项工作。使用 .NET 中可用的几种 XML 解析技术之一将提供更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:25:04.107

您可以使用 Negative lookahead 断言`(?!\s)`，这样如果有空格它就不会匹配......

```
<a (?!\s)href=\"(?!\s)(.+?)\"(?!\s)>(?!\s)(.+?)</a> 
```

但仅从需要添加的次数来看，您可以看到为此使用正则表达式可能不是正确的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:25:10.180

你想要的符号是`+`。将匹配一个或多个空格。

```
<a +href=\"(.+?)\" *>(.+?)</a> 
```

但是，通过正则表达式解析 html 通常是个坏主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T15:25:54.460

这有点时髦，可能不是最好的，但它是这样的：

```
string.Join(" ", s.Split(new[] {' '}, StringSplitOptions.RemoveEmptyEntries)) 
```

编辑：（我知道这不是正则表达式）

# .net - 刷新时丢失子操作数据

> ID：13975270
> 
> 赞同：0
> 
> 时间：2012-12-20T15:21:57.520
> 
> 标签：.net, asp.net-mvc, razor

提前感谢您的帮助。我对 MVC 很陌生。目前我在 MVC 4 中工作。我有以下在 _viewstart 中引用的布局（注意这是 VB 语法）。在其中，我使用子操作来呈现基于 xml 文件的菜单。当我第一次运行应用程序时它运行良好；但是，一旦我刷新页面或移动到应用程序中的不同 URL，菜单就会丢失。

```
 <header>
        <div class="content-wrapper">
            <div class="float-left">
                <p class="site-title">@Html.ActionLink("Logo Here", "Index", "Home")</p>
            </div>
            <div class="float-right">
                <section id="login">
                    @Html.Partial("_LoginPartial")
                </section>
                <nav>
                    <ul id="menu">
                        @Html.Action("Menu", "_MenuBar")
                    </ul>
                </nav>
            </div>
        </div>
    </header> 
```

这是部分视图：

```
 @ModelType IEnumerable(Of MenuItem)
     @Scripts.Render("~/bundles/jquery")
     @Styles.Render("~/Content/css")
     @Code
       For Each item In Model
         @:<li>@Html.ActionLink(item.Name, item.Action, item.Controller)</li>

       Next
     End Code 
```

这是从 _layout 调用的控制器中调用的子操作：

```
 Public Class _MenuBarController
        Inherits System.Web.Mvc.Controller

    <ChildActionOnly>
    Function Menu() As PartialViewResult
        Dim filePath = Server.MapPath("~/bin/Conf/MenuData.xml")
        Dim menuBar As List(Of MenuItem) = MenuResolution.GetStandardMenu(filePath)
        Return PartialView("~/Views/Shared/_MenuBar.vbhtml", menuBar)
    End Function

End Class 
```

# android - android 无法获取所拍照片的大小.. 一个错误？

> ID：13975271
> 
> 赞同：3
> 
> 时间：2012-12-20T15:22:02.307
> 
> 标签：android, file

在我的应用程序中，我可以选择拍摄/选择照片、音频或视频文件。我将每个文件路径写在它自己的字符串中并用它执行一些操作。另外，我用它来确定文件大小，方法如下：

```
 public double getSize(String path) {

    File file = new File(path);

    if (file.exists()) {
        long size = file.length();

        return size;
    } else {
        Log.e("zero size", "the file size is zero!");
        return 0;

    }

} 
```

它工作正常，但该方法在尝试获取所拍照片的大小时总是返回 0。

```
 double s = 1.0 * getSize(taken_pic_path) / 1024 / 1024; 
```

由于 3 个原因，taken_pic_path 是 100% 正确的：1)。我使用相同的路径来创建预览并且它可以工作。2）。我让通过 Toast 显示的路径，它似乎是正确的 3）。我用 file.exists() 检查路径，它返回 true。我还尝试了以下方法：

```
File file = new File(taken_pic_path);
if (file.exists()){
   double test = file.lenght();
} 
```

我总是得到零作为文件大小。同样的技术适用于拍摄的视频、拍摄的音频、选定的图片/视频/音频，我在尝试获取拍摄照片的大小时只得到 0。只是无法得到原因..有什么想法吗？

**编辑** 我做了所有可能的检查：

```
 if (file.exists()) {

            String b = file.getPath();
            boolean r = file.canRead();
            boolean w = file.canWrite();
            double d = file.length();
            Toast.makeText(getApplicationContext(), b, Toast.LENGTH_LONG)
                    .show();
            Toast.makeText(getApplicationContext(), Boolean.toString(r),
                    Toast.LENGTH_LONG).show();

            Toast.makeText(getApplicationContext(), Boolean.toString(w),
                    Toast.LENGTH_LONG).show();
            Toast.makeText(getApplicationContext(), Double.toString(d),
                    Toast.LENGTH_LONG).show();

        } 
```

输出：正确的文件路径/true/true/0.0
什么鬼……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:30:17.157

尝试

```
double s = 1.0 * (double) getSize(taken_pic_path) / 1024.0 / 1024.0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T22:22:54.907

只是偶然发现了同样的问题。对于某些设备，当 Android 媒体提供程序通知提供程序添加了新内容时，文件仍然报告长度为零。仅在半秒左右后才报告正确的长度。

我会认为这是一个错误。

我的解决方法是如此丑陋：

```
/**
 * Careful: this method may take a few seconds to complete for some photos.
 * <p>
 * Do not attempt to read {@link Images.Media.SIZE}, since it is known to return
 * wrong results (up to 5% off). We used to use it until 2.2.0.
 * 
 * @return the file size, or zero if the file does not exist
 * @see #isFileReallyAvailable
 */
private static long getFileSize(File file) {
    if (!file.exists()) {
        return 0;
    } else {
        if (file.length() > 0) {
            return file.length();
        } else if (isFileReallyAvailable(file)) {
            return file.length();
        } else {
            Log.w(TAG, "The file " + file.getName() + " was not available. Will report size 0");
            return 0;
        }
    }
}

/**
 * Is this file really available to be read? That is, does it have a non-zero length?
 * <p>
 * Seems like
 * some photo-taking apps (even the standard one in some devices) notify the Media provider
 * too soon, so {@code file.getLength()} is still zero. In those cases, we will retry
 * a few times after some sleeps. Related story: #59448752
 * <p>
 * Careful: this method may take a few seconds to complete for some photos, so do not call
 * it from the GUI thread.
 * <p>
 * Also, do not attempt to read {@link Images.Media.SIZE}, since it is known to return
 * wrong results (up to 5% off). We used to use it until 2.2.0.
 * 
 * @return the file size, or zero if the file does not exist
 */
private static boolean isFileReallyAvailable(File file) {
    boolean available = false;
    final long timeout = 2000; // In the Nexus 4 I tried, 700 ms seems like the average
    final long sleepEveryRetry = 100;
    long sleepSoFar = 0;
    do {
        try { Thread.sleep(sleepEveryRetry); } catch (Exception e) {}
        final long fileSize = file.length();
        available = fileSize > 0;
        sleepSoFar += sleepEveryRetry;
        Log.v(TAG, "The file " + file.getName() + " is still not valid after " + sleepSoFar + " ms");
    } while (!available && sleepSoFar < timeout);

    return available;
} 
```

这些是在我唯一可以重现的手机上生成的日志（运行 4.3 的 Nexus 4）：

```
10-30 18:17:03.324: V/Scanner(21167): The file IMG_20131030_181702.jpg is still not valid after 100 ms
10-30 18:17:03.424: V/Scanner(21167): The file IMG_20131030_181702.jpg is still not valid after 200 ms
10-30 18:17:03.524: V/Scanner(21167): The file IMG_20131030_181702.jpg is still not valid after 300 ms
10-30 18:17:03.634: V/Scanner(21167): The file IMG_20131030_181702.jpg is still not valid after 400 ms
10-30 18:17:03.734: V/Scanner(21167): The file IMG_20131030_181702.jpg is still not valid after 500 ms
10-30 18:17:03.774: V/Scanner(21167): Found a new undiscovered image in the local phone: upload wrapper for IMG_20131030_181702.jpg (ID = <none>, 25 KB, JUST_DISCOVERED) (source item ID is 3126)

10-30 18:17:06.537: V/Scanner(21167): The file IMG_20131030_181705.jpg is still not valid after 100 ms
10-30 18:17:06.637: V/Scanner(21167): The file IMG_20131030_181705.jpg is still not valid after 200 ms
10-30 18:17:06.737: V/Scanner(21167): The file IMG_20131030_181705.jpg is still not valid after 300 ms
10-30 18:17:06.837: V/Scanner(21167): The file IMG_20131030_181705.jpg is still not valid after 400 ms
10-30 18:17:06.937: V/Scanner(21167): The file IMG_20131030_181705.jpg is still not valid after 500 ms
10-30 18:17:07.038: V/Scanner(21167): The file IMG_20131030_181705.jpg is still not valid after 600 ms
10-30 18:17:07.058: V/Scanner(21167): Found a new undiscovered image in the local phone: upload wrapper for IMG_20131030_181705.jpg (ID = <none>, 24 KB, JUST_DISCOVERED) (source item ID is 3127)

10-30 18:17:07.969: V/Scanner(21167): The file IMG_20131030_181707.jpg is still not valid after 100 ms
10-30 18:17:08.069: V/Scanner(21167): The file IMG_20131030_181707.jpg is still not valid after 200 ms
10-30 18:17:08.169: V/Scanner(21167): The file IMG_20131030_181707.jpg is still not valid after 300 ms
10-30 18:17:08.289: V/Scanner(21167): The file IMG_20131030_181707.jpg is still not valid after 400 ms
10-30 18:17:08.389: V/Scanner(21167): The file IMG_20131030_181707.jpg is still not valid after 500 ms
10-30 18:17:08.499: V/Scanner(21167): The file IMG_20131030_181707.jpg is still not valid after 600 ms
10-30 18:17:08.509: V/Scanner(21167): Found a new undiscovered image in the local phone: upload wrapper for IMG_20131030_181707.jpg (ID = <none>, 20 KB, JUST_DISCOVERED) (source item ID is 3128) 
```

# java - 将字符串字段转换为集合以传递给子报表？

> ID：13975273
> 
> 赞同：2
> 
> 时间：2012-12-20T15:22:05.863
> 
> 标签：java, groovy, jasper-reports, ireport, jasperserver

我有一些独立的报告，通常需要为相同的药房和设施同时生成。我想将这些报告合并到一个“外部包装”报告中，作为详细波段中的子报告。

独立报告需要收集参数（并且大量使用`$X{`并需要保持能够独立运行），但我只有字符串可以提供它们。在我的外部包装器中，我确实尝试创建`$F{pharm_id}`和`$F{fac_id}`字段集合，但它们不断恢复为 java.util.String，当我手动将它们重置为集合并运行报告时，我收到一个无法转换的错误字符串（外包装）到类`java.util.Collection`（子报表输入参数）。

如何将我的值`$F{pharm_id}`和`$F{fac_id}`字符串值作为集合传递给子报表？

![在此处输入图像描述](../Images/0192711d91ea08898b2b1d6de3bf7809.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:13:36.833

如果您有一个字符串，并且您需要创建 Collection 并将其添加到它，您可以执行以下操作：

```
java.util.Arrays.asList(new String[] {$F{pham_id}}) 
```

和

```
java.util.Arrays.asList(new String[] {$F{fac_id}}) 
```

您应该能够在参数映射中毫无问题地执行此操作。

# java - 如何让 SimpleComboBox 显示我的默认值

> ID：13975278
> 
> 赞同：4
> 
> 时间：2012-12-20T15:22:17.640
> 
> 标签：java, gxt

我有一个循环来构建我们的问卷。我有一个函数，我称之为构建正确的类型。这是构建组合框的部分：

```
Field<?> field = null;
if (item instanceof MultipleChoiceQuestionDTO) {
  MultipleChoiceQuestionDTO multipleChoice = (MultipleChoiceQuestionDTO) item;
  SimpleComboBox<String> cmbQuestion = new SimpleComboBox<String>();
  String prompt = multipleChoice.getPrompt();
  cmbQuestion.setFieldLabel(ImageViewer.formatPrompt(prompt));
  List<String> choices = new ArrayList<String>();
  choices.add(prompt);
  for (String choice : multipleChoice.getPossibleAnswers()) {
    choices.add(choice);
  }
  cmbQuestion.add(choices);
  cmbQuestion.setEditable(false);
  cmbQuestion.setForceSelection(true);
  cmbQuestion.setSimpleValue(prompt);
  field = cmbQuestion;
} 
```

我想为提示设置默认答案，以便稍后进行测试。问题是这没有在我的组合框中设置选定的值。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T22:19:43.650

假设你有一个“答案”。您可以从`List<String> choices`.

```
int answerIndex = choices.indexOf(answer);
simpleComboBox.select(answerIndex); 
```

或者您可以直接使用`simpleComboBox.select(answer);`以防万一`String`

如果您想显示默认文本，则可以使用

```
simpleComboBox.setEmptyText("Select an answer...."); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:52:48.627

您可以使用以下代码执行此操作

```
String answer = simpleComboBox.getValue().toString(); //or default value
simpleComboBox.setSimpleValue(answer); 
```

# datagridview - SQLCE 移动应用程序 SqlCeResultSet 显示/编辑

> ID：13975284
> 
> 赞同：1
> 
> 时间：2012-12-20T15:22:34.107
> 
> 标签：datagridview, sql-server-ce

我见过许多快速而肮脏的、漂亮而整洁的、SERVER EXPLORER-to-form、拖放——生成代码的例子。

对于可能的编辑，将即时生成并在（a）窗口窗体上呈现的数据怎么样？似乎没有一种方法可以快速、轻松地生成一些拖放内容——如果数据不存在的话！

我的问题是：

1.  我正在开发一个移动应用程序——那么 DataGridView 是否可用？（我在工具箱中没有看到它）

2.  当我选择要在我的表单上显示的数据时，我想使用 SqlCeResultSet - 以进行可能的编辑。如何在我的表单上绑定和显示数据——为编辑做准备？

robertd903@msn.com

# sql - 将单个日期值转换为日期间隔

> ID：13975287
> 
> 赞同：2
> 
> 时间：2012-12-20T15:22:39.233
> 
> 标签：sql, oracle, gaps-and-islands

我需要一个查询，它将单个日期行（不一定是连续的）添加到间隔中，同时考虑到对象的 id。

我有一个选择查询，它返回以下数据

```
 id       date
9465    12/12/20
9465    12/12/21
9465    12/12/22
9465    12/12/25
9465    12/12/26
9466    12/12/21
9466    12/12/22
9466    12/12/23
9466    12/12/24
9466    12/12/25
9466    12/12/27 
```

我需要一个查询，使用上述作为子查询将输出如下数据：

```
 id     date_from     date_till
9465    12/12/20      12/12/22
9465    12/12/25      12/12/26
9466    12/12/21      12/12/25
9466    12/12/27      12/12/27 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:36:38.713

我们可以通过几个分析来做到这一点：

```
SQL> alter session set nls_date_format='yy/mm/dd';

Session altered.

SQL> select id, min(val) date_from, max(val) date_till
  2    from (select id, val, max(grp) over(partition by id order by val) grp
  3             from (select id, val, lag(val, 1) over(partition by id order by val),
  4                           case
  5                             when lag(val, 1) over(partition by id order by val) < val - 1 then
  6                              row_number() over(partition by id order by val)
  7                             when row_number() over(partition by id order by val) = 1 then
  8                              1
  9                           end grp
 10                      from mytab))
 11   group by id, grp
 12   order by id, date_from
 13  /

        ID DATE_FRO DATE_TIL
---------- -------- --------
      9465 12/12/20 12/12/22
      9465 12/12/25 12/12/26
      9466 12/12/21 12/12/25
      9466 12/12/27 12/12/27 
```

即首先我们将结果集分成组，其中组被定义为给定I​​D 的连续日期。我们通过检查之前的日期并查看它是否 < 当前行 date - 1 来做到这一点`lag(val, 1) over(partition by id order by val)`

```
SQL> select id, val, lag(val, 1) over(partition by id order by val),
  2         case
  3           when lag(val, 1) over(partition by id order by val) < val - 1 then
  4            row_number() over(partition by id order by val)
  5           when row_number() over(partition by id order by val) = 1 then
  6            1
  7         end grp
  8    from mytab
  9  /

        ID VAL      LAG(VAL,        GRP
---------- -------- -------- ----------
      9465 12/12/20                   1
      9465 12/12/21 12/12/20
      9465 12/12/22 12/12/21
      9465 12/12/25 12/12/22          4
      9465 12/12/26 12/12/25
      9466 12/12/21                   1
      9466 12/12/22 12/12/21
      9466 12/12/23 12/12/22
      9466 12/12/24 12/12/23
      9466 12/12/25 12/12/24
      9466 12/12/27 12/12/25          6

11 rows selected. 
```

我们接下来需要填写空白，以便空白与之前的非空组相关联。即，我们将 max() 应用到这里`max(grp) over(partition by id order by val)`的顺序，这意味着我们只取到该点为止看到的最大行，而不是整个集合中的最大值。

```
SQL> select id, val, max(grp) over(partition by id order by val) grp
  2    from (select id, val, lag(val, 1) over(partition by id order by val),
  3                  case
  4                    when lag(val, 1) over(partition by id order by val) < val - 1 then
  5                     row_number() over(partition by id order by val)
  6                    when row_number() over(partition by id order by val) = 1 then
  7                     1
  8                  end grp
  9             from mytab)
 10  /

        ID VAL             GRP
---------- -------- ----------
      9465 12/12/20          1
      9465 12/12/21          1
      9465 12/12/22          1
      9465 12/12/25          4
      9465 12/12/26          4
      9466 12/12/21          1
      9466 12/12/22          1
      9466 12/12/23          1
      9466 12/12/24          1
      9466 12/12/25          1
      9466 12/12/27          6

11 rows selected. 
```

现在它是一个简单的 group by (id, grp) 被应用，为每个 id+group 取 min() 和 max()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:49:07.467

我喜欢用一个使用解析函数的小技巧来解决这个问题。如果我们枚举每一行，然后从日期中减去该值，则日期对于按顺序排列的事物是恒定的。那是“组”ID。然后就是一个简单的聚合问题：

```
select id, min(date) as date_from, max(date) as date_to
from (select (date - row_number() over (partition by id order by date)) as groupid,
             t.*
      from t
     ) 
group by id, groupid 
```

整体陈述也很简单。

我通常为此使用分析函数。但是，以下内容可能会在 Oracle 中起作用，至少对于日期算术起作用的数据集：

```
select id, min(date) as date_from, max(date) as date_to
from (select (date - rownum) as groupid,
             t.*
      from t
      order by id, date
     ) 
group by id, groupid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:37:10.000

这被称为“孤岛”问题。这是基于 Oracle 的解决方案的一种方法：

[甲骨文 SQL。我应该使用什么语句](https://stackoverflow.com/questions/11785007/oracle-sql-what-statement-should-i-use)

# c# - razor 文件中的 @functions 代码块有什么作用，我应该何时（如果有的话）使用它？

> ID：13975290
> 
> 赞同：42
> 
> 时间：2012-12-20T15:22:46.017
> 
> 标签：c#, asp.net-mvc-3, razor, orchardcms

在查看我从 Orchard CMS 库下载的主题时，我注意到 Layout.cshtml 文件的顶部有以下代码块：

```
@functions {
// To support the layout classifaction below. Implementing as a razor function because we can, could otherwise be a Func<string[], string, string> in the code block following.
string CalcuClassify(string[] zoneNames, string classNamePrefix)
{
    var zoneCounter = 0;
    var zoneNumsFilled = string.Join("", zoneNames.Select(zoneName => { ++zoneCounter; return Model[zoneName] != null ? zoneCounter.ToString() : ""; }).ToArray());
    return HasText(zoneNumsFilled) ? classNamePrefix + zoneNumsFilled : "";
}
} 
```

我知道声明的函数做了什么（计算填充了哪些区域以返回每列的宽度），我的问题是 - @function 块的正确用法是什么，我应该什么时候使用它？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-20T15:44:04.150

该`@functions`块允许您直接在视图中定义实用程序函数，而不是将它们作为扩展添加到`@Html`帮助程序或让控制器知道显示属性。当您满足以下条件时，您会想要使用它：

1.  该功能与视图密切相关，通常在其他地方没有用（例如“我的列有多宽”）。
2.  该功能不仅仅是一个简单的`if`语句，和/或在您的视图中的多个位置使用。
3.  该函数需要确定其逻辑的所有内容都已存在于`Model`视图中。

如果第一个失败，请将其添加为`@Html`助手。

如果第二个失败，只需内联它。

如果第三个失败，您应该在控制器中进行计算并将结果作为模型的一部分传递。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T16:14:47.450

其他人已经解释了什么`@functions`，所以我不会重复。但我想补充一点：

如果您的视图被键入到视图模型，我认为一个可行的选择是将这个逻辑移动到视图模型中，以避免使用太多代码使您的标记混乱。否则，您的视图开始看起来越来越像经典的 ASP，我认为没有人想要那样。

我不认为在你的视图中使用`@functions`or有什么问题`@helper`，但是一旦你在视图中超越了几个方法，或者即使函数有些复杂，如果可能的话，可能值得重构视图模型。如果它是可以重用的代码，最好将其拉出到帮助类或 HtmlHelper 类的扩展中。一件令人沮丧的事情是意识到你只是重写了一段已经存在的代码，因为你不知道它被隐藏在某个任意视图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:31:09.810

来自[msdn blogs](http://blogs.msdn.com/b/timlee/archive/2010/07/30/using-functions-in-an-asp-net-page-with-razor-syntax.aspx)，*@functions 块是为了让您包装可重用的代码，如方法和属性*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T15:36:11.350

在这种特殊情况下，创建您正在使用的主题的人可能试图将其保留为一个简单的主题（仅视图、css 和图像）。

如果您需要为 Orchard 的主题编写一些代码，则必须转向模块（如此处所述：http: [//docs.orchardproject.net/Documentation/Anatomy-of-a-theme](http://docs.orchardproject.net/Documentation/Anatomy-of-a-theme)），除非您编写此代码在视图中。

我不确定是否值得花时间从主题切换到模块来获取列的大小。

# c# - Graphics.DrawString 中的字符变化

> ID：13975291
> 
> 赞同：0
> 
> 时间：2012-12-20T15:22:48.687
> 
> 标签：c#, asp.net, dll

我有一个用 C# 编写的 dll。其中一种方法需要一个参数`string txt`。dll 是从经典的 asp 页面调用的。在呼叫时，文本中包含通过在数字键盘上`é`按住`ALT`并输入 130 或按住`ALT-GR`并点击获得的字符`e`。

DrawString[方法](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.drawstring.aspx)输出错误。我意识到存在字符集/字体问题，但我不知道如何解决这个问题。

我在英式键盘和使用 Arial 字体的本地化中得到的是一个大写字母 A，上面有一个波浪号，后面是一个圆圈中的小写字母 c。

输入文本的个人可能使用任何键盘布局，可能在他们的 PC 上进行任何本地化，但他们都将通过我们的网页输入。

我需要做什么才能使事情兼容或转换？

相关的代码是：

```
Bitmap image = new Bitmap(strFilePath);

Graphics m_graphics;
m_graphics = Graphics.FromImage(image);

Font fnt = new Font("Arial", 12.0f);

StringFormat strFormatter = new StringFormat();

SolidBrush txtBrush = new SolidBrush(Color.FromArgb(127, Color.FromArgb(int.Parse("AB12CD", NumberStyles.HexNumber))));

m_graphics.DrawString("é", fnt, txtBrush, new Point(200, 200), strFormatter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:59:00.683

由于您的文本字符串来自网页，因此它可能是 URL 编码的。先尝试解码，并确保结果为 UTF8：

```
string strDecoded = HttpUtility.UrlDecode(strEncoded, Encoding.UTF8)

m_graphics.DrawString(strEncoded, fnt, txtBrush, new Point(200, 200), strFormatter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:26:56.103

`é`被编码为[`U+00E9`](http://www.fileformat.info/info/unicode/char/e9/index.htm)Unicode，这导致 UTF-8 `0xC3 0xA9`。

`U+00C3`是`Ã`，并且`U+00A9`是`©`（[来源](http://www.utf8-chartable.de/unicode-utf8-table.pl?start=128&number=128&names=-&utf8=0x)）。

因此，您显然有编码问题，相关代码不是您发布的代码，而是从 Web 请求接收字符串并将其通过页面（代码隐藏？）传递到您的 DLL 的代码。

# php - CURL 网页到数据库插入重复项

> ID：13975298
> 
> 赞同：1
> 
> 时间：2012-12-20T15:23:23.127
> 
> 标签：php, mysql, curl

我正在编写一个 PHP 脚本来获取网站内容并将每个网页插入到我的 MySQL 表中的单独帖子中。我选择的方法是 cURL、一些正则表达式、preg_match_all、几个 foreach 循环，最后是 MySQL 查询。代码很好，所以我不会在这里发布。

问题是脚本可以正常工作，只有不到 200 个帖子被插入到数据库中，但是当数量超过 ~200 时，浏览器永远不会停止加载。我想存储 749 个网页（每个页面的内容都是纯文本）。当我按下停止并查看数据库时，我在数据库中有大约 2 000 个帖子，每个帖子大约有 5 个重复项。

所以，我得出的结论是，有些东西（浏览器、服务器、数据库？）无法处理那么多页面，会中止进程并重新启动它。我尝试增加 PHP 中的最大执行时间，cURL 也是如此，但结果相同。

这是以前的帖子，我在此过程的早期遇到了一些问题。[将大量网页内容转换成数组（PHP）](https://stackoverflow.com/questions/13953064/content-from-large-number-of-web-pages-into-array-php)

我的问题很简单：有谁知道这里出了什么问题？

**编辑**；好的，既然已经被请求了，下面是代码：

**编辑2** ; 经过反复试验，我发现幻数是 152。脚本可以存储前 151 页，但是当我将页数更改为 152 时，我的数据库表中的帖子数突然翻倍到 304。任何想法？

**EDIT3（好一个）**：事实证明脚本实际上在我的本地服务器上做了它应该做的事情。当我在我的网络主机服务器上运行它时，问题就来了。

```
<?php
header('content-type: text/html; charset=utf-8');

// Initialize cURL
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://data.riksdagen.se/anforandelista/?anflista=true&rm=&anftyp=Nej&d=&ts=&parti=sd&iid=&sz=1000&utformat=xml');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$contents = curl_exec ($ch);

 // Some regex preg_match fun
 $regex = '/<anforande_url_xml>(.*?)<\/anforande_url_xml>/';
 $regex1 = '/<avsnittsrubrik>(.*?)<\/avsnittsrubrik>/';
 $regex2 = '/<anforande_url_xml>http:\/\/data.riksdagen.se\/anforande\/(.*?)<\/anforande_url_xml>/';
 $regex3 = '/<dok_datum>(.*?)<\/dok_datum>/';
 $regex4 = '/<talare>(.*?)<\/talare>/';
 preg_match_all($regex, $contents, $link);
 preg_match_all($regex1, $contents, $rubrik);
 preg_match_all($regex2, $contents, $id);
 preg_match_all($regex4, $contents, $talare);
 preg_match_all($regex3, $contents, $datum);

 // Display list of all posts
 $j = 0;
 echo "<pre>";
 foreach ($link[1] as $row) {
echo $j . " <a href=\"display.php?id=" . $id[1][$j] . "\">" . $rubrik[0][$j] . "</a>" . "<br />";
$j++;
 }

ini_set('max_execution_time', 300);

// Create array with all URLs
foreach ($link[1] as $row) {
$link[] = $row;
}

// Insert the core content to array
$lines = Array();
foreach ($link[1] as $row) {
$contents = file_get_contents($row);
$regex = '/<anforandetext>(.*?)<\/anforandetext>/s';
preg_match_all($regex, $contents, $output);

if (is_array($output) && isset($output[0]) && !empty($output[0])){
$lines[] = $output[1];  
}
}

// Connect. Yes, I know decprecated. Later issue.
mysql_connect("host", "user", "pass") or die("Gick inte att ansluta.");
mysql_select_db("db");

// Insert into db
$h = 0;
foreach ($lines as $row) {
$utf_title = utf8_decode($rubrik[1][$h]);
$utf_speaker = utf8_decode($talare[1][$h]);
$utf_contents = utf8_decode($row[0]);
$date = utf8_decode($datum[1][$h]);

$query = "INSERT INTO riksdag (title, speaker, contents, date) VALUES('$utf_title', '$utf_speaker', '$utf_contents', '$date')";
mysql_query($query);
$h++;
}

echo "</pre>";

curl_close ($ch);
?> 
```

# c++ - 任何类型的数组总是聚合吗？

> ID：13975303
> 
> 赞同：12
> 
> 时间：2012-12-20T15:23:41.130
> 
> 标签：c++, arrays, c++11, standards, aggregate

```
class A 
{
public:
    A(){}

private:
    int i;
};

A a[8]; 
```

C++11 标准 8.5.1.1 说：

“聚合是一个数组或一个类（第 9 条），没有用户提供的构造函数（12.1），没有用于非静态数据成员的大括号或等式初始化器（9.2），没有私有或受保护的非静态数据成员（第 9 条） 11），没有基类（第 10 条），也没有虚函数（10.3）。”

因为 a 是一个数组，所以 a 是一个聚合？我认为不是，但标准说是。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-20T15:27:11.210

是的，`A[8]`是一个聚合类型，即使`A`不是。

与其他一些相关概念（例如“平凡可复制”）不同，聚合的概念不具有传递性。

松散地说，作为一个聚合只影响类型的初始化，因此它不需要是可传递的。你可以说`A a[2] = { A('x', true), A(1, 2, 3) };`不需要对`A`. 相比之下，诸如琐碎可复制性之类的概念与类的内存布局有关，因此就其本质而言必须是可传递的。

# c# - ChannelFactory 会出现故障吗？

> ID：13975305
> 
> 赞同：8
> 
> 时间：2012-12-20T15:23:44.873
> 
> 标签：c#, wcf, wcf-client, channelfactory

假设我正在缓存 a`ChannelFactory<T>`并使用它来创建频道。这些通道用于对其他服务进行 WCF 调用，然后被（安全地）处置。

我是否需要担心缓存`ChannelFactory`出现故障并因此无法用于创建新通道的情况？如果是这样，我需要用新的替换它`ChannelFactory`吗？

`ChannelFactory`对于 a出现故障的情况，我还将欣赏一个可重现的具体示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T15:51:03.647

在这种情况下，我认为您无需担心故障状态。ChannelFactory 在打开期间出现问题时将其状态更改为 Faulted（当您调用 Open() 方法或创建第一个通道而不调用 Open() 时可能会发生这种情况）。

```
var factory = new ChannelFactory<ITestService>();
try
{
    factory.Open();
}
catch
{
    Console.WriteLine(factory.State);
} 
```

# css - 当 div 使用 margin:auto; 居中时，如何定位下拉导航菜单？

> ID：13975306
> 
> 赞同：0
> 
> 时间：2012-12-20T15:23:45.110
> 
> 标签：css, positioning

我通过在#nav div 中浮动三个div 来设置导航菜单的基础知识，该div 使用margin:auto; 居中。

这些导航菜单选项中只有一个需要下拉菜单。我假设我必须使下拉菜单脱离正常流程，这样它就不会移动其他浮动对象。

这是我的第一个项目，所以我只是想从概念上了解如何定位这个菜单。恐怕如果我做一个与像素值相关的位置，菜单可能不会显示在原始链接下，具体取决于用户的屏幕尺寸/分辨率。

红色 X 标记下拉菜单应出现的位置。

这个无序列表应该嵌套在投资组合列表项下，还是应该是一个单独的无序列表，以某种方式定位在投资组合链接下？恐怕如果它是嵌套的，它可能会将底部边框撞倒？

我可以发布代码，但我不知道从哪里开始。寻找正确方向的推动力！

谢谢

![迄今为止的设计](../Images/ba01f32c95ea9727985d2db81ad92583.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:38:15.777

这通常是这样完成的：

```
<ul class=menu id=leftLinks>
    <li>about</li>
    <li>portfolio
        <ul class=submenu>
            <li>Submenu item</li>
        </ul>
</li>
</ul>

.menu > li {
    position: relative;
}

.submenu {
    position: absolute;
    left: 0;
    top: 100%;
} 
```

# gwt - GWT试图让视图在高度上可调整大小

> ID：13975307
> 
> 赞同：0
> 
> 时间：2012-12-20T15:23:46.770
> 
> 标签：gwt, render, uibinder

我目前正在初始化我创建的 GWT 视图，并且正在明确设置它的高度。

视图的高度不可调整。每当我渲染视图（从根面板清除并重新添加到根面板）时，视图的高度都是可调整的......

```
RootRootPanel.get().clear();
RootPanel.get().add(asWidget()); 
```

我不希望在 init() 函数中呈现视图。

还有另一种方法可以使视图的高度可调整吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:23:54.123

如果您想要可调整大小的屏幕，请使用`RootLayoutPanel.get().add()`方法。将小部件添加到内部，并且不要忘记在整个层次结构中以百分比形式提及其大小。我有类似的问题。只需检查以下链接及其接受的答案。

[GWT Re-sizing components on browser window resize](https://stackoverflow.com/questions/8771922/gwt-re-sizing-components-on-browser-window-resize)

# c# - 从 ASP.NET C# 类页面实例化 C# 类

> ID：13975310
> 
> 赞同：3
> 
> 时间：2012-12-20T15:23:51.737
> 
> 标签：c#, asp.net, class

我正在从 PHP 迁移到 ASP.NET/C#。到目前为止一切顺利，但我不明白如何在 ASP.NET C# 类页面中实例化一个类。

例如我有 login.aspx：

```
<%@ Page Language="C#" Inherits="Portal.LoginService" src="LoginService.cs" %>

<!DOCTYPE html>
<body>
    <form runat="server" id="login" name="login">           
        <p>Username:</p><input type="text" id="username" name="username" runat="server" />  

        <p>Password:</p><input type="password" id="password" name="password" runat="server" />

        <input type="submit" name="submit" OnServerClick="Post_Form" runat="Server" /> 
    </form>
</body> 
```

登录服务.cs：

```
using System;
using System.Web.UI;
using System.Web.UI.HtmlControls;
namespace Portal {
public class LoginService : Page {

    protected HtmlInputControl username, password;

    public void Post_Form(object sender, EventArgs e) {

        if (username.Value != "" && password.Value != "") {
            //LOGIC HERE

            //This doesn't work
            CustomSanitize a = new CustomSanitize();                              
        }
    }
}
} 
```

CustomSanitize.cs：

```
using System;
namespace Portal {
    public class CustomSanitize {

        //instantiate here

        public string sanitizeUserPass() {
                return "logic here"
            }
    }
} 
```

换句话说，我想将来自不同类的方法与我用 ASP.NET C# 设置的类一起使用。到目前为止，命名空间对我不起作用。

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T15:28:09.273

如果我理解正确，请包装`CustomSanitize`在命名空间中，即：

```
namespace MyProject {
    public class CustomSanitize {

        //instantiate here

        public string sanitizeUserPass() {
                return "logic here"
            }
    }
} 
```

然后包装`LoginService.cs`在同一个命名空间中。IE

```
namespace MyProject {
    public class LoginService : Page {

        protected HtmlInputControl username, password;

        public void Post_Form(object sender, EventArgs e) {

            if (username.Value != "" && password.Value != "") {
                //LOGIC HERE

                //This doesn't work
                //CustomSanitize a = new CustomSanitize();                              
            }
        }
    }
} 
```

您现在应该可以访问`CustomSanitize a = new CustomSanitize();`

您还可以创建更多命名空间来拆分您的项目。即`namespace MyProject.Helper`包装所有辅助函数，然后只需添加到您希望在其上使用类`using MyProject.Helper`的文件的顶部。`.cs`

**编辑：**

请注意，在将命名空间添加到您的项目/在命名空间中包装类时，您需要通过该命名空间通过`using`或直接引用它们`MyProject.LoginService`。这必须在页面`aspx`上`ascx`以及使用`@ Page declaration`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:32:08.193

如果上述所有类都在同一个项目中，那么您需要做的就是添加一个命名空间。查看以下示例：[命名空间教程](http://msdn.microsoft.com/en-us/library/z2kcy19k%28v=vs.80%29.aspx)

如果您希望在同一个项目中使用不同的命名空间，请在顶部添加您自己的“使用”行，即

```
using System;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using Utilities.Sanitizers;

namespace Services {

public class LoginService : Page {

protected HtmlInputControl username, password;

public void Post_Form(object sender, EventArgs e) {

    if (username.Value != "" && password.Value != "") {
        //LOGIC HERE

        //This doesn't work
        //CustomSanitize a = new CustomSanitize();                              
    }
}
}
}

using System;
namespace Utilities.Sanitizers
{
public class CustomSanitize {

    //instantiate here

    public string sanitizeUserPass() {
            return "logic here"
        }
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T15:37:24.377

在您的`CustomSanitize`和`loginservice`班级中，您缺少项目的名称空间。

除此之外，您可能还想为您的类创建一个构造函数。这不是必需的，但允许您在另一个文件中实例化您的类时设置默认设置。（当您没有自己设置时，编译器会生成一个空的构造函数。因此，此代码示例中的构造函数是多余的。但只是为了向您展示。）

这也适用于创建重载构造函数，允许您将各种参数传递给构造函数，以便编译器选择正确的参数。

尽管您面临的主要问题可能是您的项目中没有包含名称空间。当文件在同一个项目中时，您应该为该项目中的所有类添加一个命名空间。因此它们可以相互引用。

如：

```
using System;

namespace yourNameSpace
{
    public class CustomSanitize 
    {

        public CustomSanitize()
        {
            //Set what you need to set in the constructor
        }
        //instantiate here

        public string sanitizeUserPass() {
            return "logic here"
        }
    }
} 
```

默认情况下，当您从 Visual Studio 中生成新类时，“应该”添加命名空间。除非你每次都从一个空的代码文件开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T15:53:26.807

没有人提到的一件事是您不需要为用户身份验证做任何这样的事情。您应该考虑使用开箱即用的 .net 身份验证和授权 - 请参阅此处：[https://www.google.co.uk/search?q=.net+authentication&aq=0&oq=.net+authen&aqs=chrome。 1.57j0l3j62l2.2451&sugexp=chrome,mod=19&sourceid=chrome&ie=UTF-8](https://www.google.co.uk/search?q=.net+authentication&aq=0&oq=.net+authen&aqs=chrome.1.57j0l3j62l2.2451&sugexp=chrome,mod=19&sourceid=chrome&ie=UTF-8)

不过其他人说的都是对的。它不起作用，因为您缺少 using 语句（Intelisense 应该告诉您 - 您实际上应该能够单击小下划线位，然后单击添加使用链接）

您所做的另一件事已添加到以下内容中：-

```
protected HtmlInputControl username, password; 
```

这在 asp.net 表单页面中不是必需的。我假设您已经完成了很多手动工作——幸好.net 比这容易得多。

这更像是页面的外观：-

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Login.aspx.cs" Inherits="WebApplication2.Login" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Label runat="server" AssociatedControlID="Username">Username:</asp:Label>     <asp:TextBox runat="server" ID="Username"></asp:TextBox>
        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="Username" Display="Dynamic" Text="Username is required"></asp:RequiredFieldValidator>
        <br/>
        <asp:Label ID="Label1" runat="server" AssociatedControlID="Password">Password:</asp:Label> <asp:TextBox ID="Password" runat="server" TextMode="Password"></asp:TextBox>
    <asp:RequiredFieldValidator runat="server" ControlToValidate="Password" Display="Dynamic" Text="Password is required"></asp:RequiredFieldValidator>
        <br/>
        <asp:Button runat="server" Text="Login" ID="btnLogin" OnClick="btnLogin_Click" />
    </div>
    </form>
</body>
</html> 
```

以及背后的代码： using System;

```
namespace WebApplication2
{
    public partial class Login : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void btnLogin_Click(object sender, EventArgs e)
        {
            Page.Validate();
            if (Page.IsValid)
            {
                string username = Username.Text;
                string password = Password.Text;
                //Logic here
            }
        }

    }
} 
```

这会为您处理所有验证。我真的建议在这里观看一些视频以帮助加快速度：[http](http://www.asp.net/web-forms) ://www.asp.net/web-forms ，但您也应该认真考虑使用 MVC，因为它更适合您尝试的方式发展

# performance - JFreeChart 性能

> ID：13975312
> 
> 赞同：1
> 
> 时间：2012-12-20T15:23:56.490
> 
> 标签：performance, jfreechart, time-series

我正在尝试同时绘制一些图表：每个图表代表一个属性并显示几个对象的结果，每个对象都包含自己的数据项系列。使用 TimeSeries 的 add(...) 或 addOrUpdate(...) 方法时，我遇到了非常糟糕的性能 - 绘制约 16,000 个项目的时间约为 60 秒。我阅读了有关性能问题的信息 - [http://www.jfree.org/phpBB2/viewtopic.php?t=12130&start=0](http://www.jfree.org/phpBB2/viewtopic.php?t=12130&start=0) - 但在我看来，出于某种原因，我的情况要糟糕得多。

1.  我想了解这是否真的是我可能从模块中挤出的性能（运行 Windows 的 2.5GHz 机器 - 我对此表示怀疑）。
2.  我怎样才能在这方面加速我的应用程序？

这是代码的基本版本（请注意，它都是在专用线程中完成的）：

```
/* attribute -> (Object -> graph values) */
protected HashMap<String,HashMap<Object,Vector<TimeSeriesDataItem>>> m_data = 
  new HashMap<String,HashMap<Object,Vector<TimeSeriesDataItem>>>();

public void loadGraph() {
    int items = 0;
    for (String attr : m_data.keySet()) 
        for (Object obj : m_data.get(attr).keySet())
            for (TimeSeriesDataItem dataItem : m_data.get(attr).get(obj))
                items++;
    long before = System.currentTimeMillis();

    // plot each graph
    for (String attr : m_data.keySet()) {  
        GraphXYPlot plot = m_plots.get(attr);
        plot.addToObservation(m_data.get(attr));
    }

    System.err.printf("Time for plotting %d items is:  %d ms", items, System.currentTimeMillis()-before);
    // => Time for plotting 16540 items is:  59910 ms
} 
```

* * *

```
public void addToObservation(HashMap<Object, Vector<TimeSeriesDataItem>> plotData) {
    for (Object obj : plotData.keySet()) {
        SeriesHandler handler = m_series.get(obj);
        if (handler != null) {
            TimeSeries fullSeries = handler.getFullSeries();
            TimeSeries periodSeries = handler.getPeriodseries();
            for (TimeSeriesDataItem dataItem : plotData.get(obj)) {
                fullSeries.add(dataItem);
                periodSeries.add(dataItem);
            }
        }
    }
} 
```

非常感谢 ！

盖伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:05:47.380

如果没有更多细节，则应考虑几种一般优化中的任何一种：

*   [按照这里](http://www.jfree.org/forum/viewtopic.php?f=3&t=116135&p=175587&hilit=setNotify#p175587)`setNotify(false)`的建议调用。

*   缓存已计算的值，如此[处](https://stackoverflow.com/q/13937078/230513)所述。

*   采用分页策略，如此[处所示](https://stackoverflow.com/a/6849654/230513)。

*   绘制价值摘要图表`average/time-unit`；根据 a 中`ChartEntity`看到的`ChartMouseListener`，在相邻面板中显示扩展的子集。

# c# - 在 Windows Phone 8 下获取唯一设备 ID (UDID)

> ID：13975315
> 
> 赞同：47
> 
> 时间：2012-12-20T15:24:04.727
> 
> 标签：c#, windows-phone-7, windows-phone-8

是否有任何唯一的设备 ID (UDID) 或任何类似的 ID 可以在 Windows Phone 8 (WP8) 上读出，不会随着硬件更改、应用程序重新安装等而改变？

在较旧的 Windows Phone 版本中，有这样的 ID：WP7：[Windows Phone 的设备状态](http://msdn.microsoft.com/en-us/library/ff941122(v=VS.92).aspx)

WP7.1：[设备状态类](http://msdn.microsoft.com/en-us/library/microsoft.phone.info.devicestatus(v=vs.92).aspx)

但它们不再适用于 SDK 8.0。

**为什么我问：** 这个想法是用户在第一次启动应用程序时获得一些免费积分，我想避免用户只是重新安装应用程序以获得新的免费积分。使用电子邮件或电话号码注册可以解决这个问题，但如果可以的话，我不想在第一次注册时打扰用户。

- -/// - -解决方案 - - - - -

我可以确认 DeviceExtendedProperties.GetValue("DeviceUniqueId") 在 WP 8.0 中仍然有效。当我阅读以下文字时有点困惑：

> 在 Windows Phone OS 7.0 中，此类用于查询特定于设备的属性。在 Windows Phone OS 7.1 中，DeviceExtendedProperties 中的大多数属性已被弃用，而应使用新的 DeviceStatus 类。但是，在适当的情况下，您仍然可以使用以下任何未弃用的属性。

[MSDN:DeviceExtendedProperties 类](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.info.deviceextendedproperties%28v=vs.105%29.aspx)

我可以运行以下代码，删除应用程序并重新安装它并获得相同的 ID：

```
byte[] myDeviceID = (byte[])Microsoft.Phone.Info.DeviceExtendedProperties.GetValue("DeviceUniqueId");
string DeviceIDAsString = Convert.ToBase64String(myDeviceID);
MessageBox.Show(DeviceIDAsString); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-20T18:20:49.497

我还没有开始为 Windows Phone 8 进行开发，仍然在 7 上，但是您仍然应该能够使用原始的[DeviceExtendedProperties](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.info.deviceextendedproperties%28v=vs.105%29.aspx)类来拉回设备唯一 ID。

```
DeviceExtendedProperties.GetValue("DeviceUniqueId") 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-20T19:44:31.937

我在返回空值时遇到了这个问题。然后记住它需要打开。

在`WMAppManifest.xml`->`Capabilities`选项卡->打开`ID_CAP_IDENTITY_DEVICE`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-12T09:01:07.557

这个 DeviceUniqueId 有一个转折点——它只对一个发布者是唯一的。所以它不是真正的设备范围的唯一标识符，而是一个发布者的唯一设备 ID。我们在处理某个客户项目时注意到，我们试图从不同的帐户中识别同一部手机（客户在两个不同的帐户下发布）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-11T06:54:49.047

您可以通过 DeviceExtendedProperties.GetValue("DeviceUniqueId") 获取自己的 wp8 设备 ID 这是获取 deviceId 作为字符串的简单方法

```
byte[] id = (byte[])Microsoft.Phone.Info.DeviceExtendedProperties.GetValue("DeviceUniqueId");
 string   deviceID = Convert.ToBase64String(id); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-28T08:19:03.207

我用这个：

```
 private static String getDeviceId()
        {
            byte[] id = (byte[])Microsoft.Phone.Info.DeviceExtendedProperties.GetValue("DeviceUniqueId");
            return BitConverter.ToString(id).Replace("-", string.Empty);
        } 
```

但关键是检查 WMAppManifest 中的 ID_CAP_IDENTITY_DEVICE，否则会抛出错误。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-28T17:59:09.840

通过在 Windows Phone 8 和 Windows 8 中不提供 DeviceUniqueId，微软试图避免用户跟踪，但随着来自开发社区的压力越来越大，他们又把它带回来了。

在 Windows 8.1 中，微软引入了一个新的 AdvertisingId API，并且可能会在后续的 Windows Phone 8.1/9 版本中引入类似的 Id 来识别跨应用程序的唯一用户。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-08-03T01:00:29.403

[我在http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.system.analytics.hostinformation.publisherhostid.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.system.analytics.hostinformation.publisherhostid.aspx)找到了一个新的 HostInformation.PublisherHostId 属性更多信息 。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-24T07:18:51.837

```
string myDeviceID = (byte[])DeviceExtendedProperties.GetValue("DeviceUniqueId");
string DeviceIDAsString = Convert.ToBase64String(myDeviceID); 
```

我已将其用于 windows phone 唯一设备 ID。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-02T05:48:44.150

以上答案适用于 Windows Phone 7 和 8 Silverlight。但是，它们不适用于 Windows Phone RT（通用）或应用商店应用程序，因为 SDK 没有此 dll 库（Microsoft.Phone）。

这是您在 Windows Phone 8.1 RT（通用/商店应用程序）上获取设备 ID 和名称（可能还有其他信息）的方式。

```
private string GetHardwareId()
{
    var token = HardwareIdentification.GetPackageSpecificToken(null);
    var hardwareId = token.Id;
    var dataReader = Windows.Storage.Streams.DataReader.FromBuffer(hardwareId);

    byte[] bytes = new byte[hardwareId.Length];
    dataReader.ReadBytes(bytes);

    return BitConverter.ToString(bytes);
} 
```

有关在 Windows RT 上读取设备信息的更多详细信息，请参见[此处](http://www.wadewegner.com/2012/09/getting-the-application-id-and-hardware-id-in-windows-store-applications/)

# android - android在用户之间共享应用程序数据

> ID：13975320
> 
> 赞同：0
> 
> 时间：2012-12-20T15:24:14.360
> 
> 标签：android

我正在开发一个应用程序，其中在特定活动中有一些用户应该讨论的文章，​​即发表他们的评论。因此，如果有人对特定文章发表评论，则该评论应该对其单元格上订阅该文章的所有用户可见。

现在，我无法弄清楚如何执行此操作。我已经提到了开发者的网站[http://developer.android.com/guide/topics/data/index.html](http://developer.android.com/guide/topics/data/index.html)和一些 SO 的问题，但仍然没有答案。

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:04:41.690

您需要将此类信息存储在某处的服务器中，并从每个用户的应用程序中访问它。由于这是一个广泛的问题，因此很难就使用哪些技术以及在何处托管您的服务器解决方案为您提供具体建议。有很多方法可以做到这一点。我将创建一个 Web 服务，使用众多 Web 服务托管提供商之一将您的帖子和评论数据存储在您选择的数据库中：

[亚马逊网络服务](http://aws.amazon.com)

[Heroku](http://www.heroku.com)

[谷歌应用引擎](https://developers.google.com/appengine/)

这是我发现的一篇描述移动应用程序的简单后端的帖子：移动应用程序[的后端](https://stackoverflow.com/questions/10116843/backend-server-provider-for-mobile-apps)

读完之后，我意识到有一些解决方案可以让您支付费用，这些解决方案可以让您省去为您创建后端的大部分工作。我听说 Parse 很棒，但我自己从未使用过它：[Parse](http://www.parse.com)。

# css - '位置：静态;' vs'位置：相对；' 当子元素绝对定位时

> ID：13975323
> 
> 赞同：2
> 
> 时间：2012-12-20T15:24:20.750
> 
> 标签：css, position, css-position

我很难理解为什么`position: relative;`当容器元素的子元素绝对定位（即`position: absolute;`）时我需要添加它。让我举例说明。

**示例 HTML 代码：**

```
<ul>
   <li>...</li>
   <li id="parent">
      <a href="#">Menu</a>
      <div id="child">...</div>
   </li>
   <li>...</li>
   <li>...</li>
</ul> 
```

考虑代码代表一个水平菜单。看起来有点像这样：

![截屏](../Images/f3b51e10701dadf93747a2cff34af7d1.png)

**问题**是当`position`属性的`#parent`值为默认值（即）时，即使子元素是绝对定位的，它的`position: static;`宽度也会随着.`#child``#child``position: absolute;`

一切都到位，当我使用`position: relative;`时，`#parent`即它的宽度保持不变，无论`#child`.

我在这里想念什么？为什么我需要使用`position: relative;`（我认为）应该是默认行为的东西？

**更新：**我创建了一个小提琴来更好地解释我的观点。[请看一看](http://jsfiddle.net/bdtt3/)。

**重现问题的步骤：**

*   在小提琴的预览中，单击“频道”菜单，它应该会滑出其隐藏的菜单项。

*   现在，`F12`在您的浏览器（安装了 Firebug 的 Chrome、Safari 或 Firefox）中按下键，使用检查工具检查“频道”菜单。

    这应该立即将您指向现在打开的开发工具或 Firebug 窗格的“元素”选项卡中的相关 HTML 代码。

    `<li class="float-left top-menu">`查找inside的第一个实例`<ul id="top-navbar">`并将鼠标悬停在该行上。它应该向您显示如下内容：

[![截屏](../Images/fd8b7e0dcd9de7ca7f4c3bd0f3c64b1c.png)](https://i.stack.imgur.com/Sge4R.png)

为什么蓝色指示框（即菜单）应该是红色边框的大小时却那么大？明白我现在在说什么了吗？

现在，申请`position: relative;`（`li`即`li.float-left.top-menu { position: relative; }`自己看看差异。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:27:05.427

`position:relative`创建一个新的包含框，任何绝对定位的子元素都将从中设置它们的顶部/左侧。

`position: static`不会创建包含框，并且任何绝对定位的子元素将开始沿着 DOM 树向上查找包含框，直到它碰到主体并将找到的祖先用于顶部/左侧。

**编辑：**对不起，我误读了你的问题。我似乎无法重现您对问题的描述（请参阅this [fiddle](http://jsfiddle.net/5TfJz/)）。您能否将代码发布为您问题的最小测试用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:46:30.063

好的。我现在觉得很傻。我`min-width`在子元素上使用，并且由于宽度几乎已定义，因此菜单（即父级）的宽度也扩展了。删除`min-width`消除了所有疑虑。

并且**必须阅读：[相对定位内的绝对定位](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)**（还有[这个评论](http://css-tricks.com/absolute-positioning-inside-relative-positioning/#comment-23750)和[这个答案](https://stackoverflow.com/a/10487329)）。

# javascript - 将数据从javascript发送到python

> ID：13975325
> 
> 赞同：0
> 
> 时间：2012-12-20T15:24:25.780
> 
> 标签：javascript, python, ajax

我有一个包含一些 JavaScript 代码的网站。在另一台服务器上，我有一个 python 脚本。我正在尝试将数据发送到 python 脚本，然后让 python 脚本返回一些文本。

JavaScript 通过如下调用调用 python 文件：

//server.example.com/cgi-bin/pythonscript.py?type=ball&color=blue

我的第一个问题是如何在 python 脚本中读取这些参数（type=ball 和 color=blue）？使用这些方法中的任何一种是否有效：

```
 parameters=input() 

    or

    parameters=sys.argv[1:]

    or

    import cgi
    parameters=cgi.FieldStorage() 
```

我的第二个问题是如何将数据发送回 JavaScript 代码。现在，我将使用 JSONP 发回文本（JavaScript 使用回调）。一个简单的 print 或 return 语句会如下所示工作吗？

```
 output_text='callback_func('+json.dump(output_info)+');'

    print(output_text)

    or

    return output_text 
```

谢谢您的帮助！！！真的很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:34:09.427

如果您使用的是`cgi`模块，那么您使用`FieldStorage`并`print`输出

取自[http://docs.python.org/2/library/cgi.html](http://docs.python.org/2/library/cgi.html) - 这可以用作您只需稍微调整的基础......

```
import cgi

print "Content-Type: text/html"     # HTML is following
print                               # blank line, end of headers
print "<TITLE>CGI script output</TITLE>"
print "<H1>This is my first CGI script</H1>"

form = cgi.FieldStorage()
if "name" not in form or "addr" not in form:
    print "<H1>Error</H1>"
    print "Please fill in the name and addr fields."
    return
print "<p>name:", form["name"].value
print "<p>addr:", form["addr"].value 
```

# cmake - 创建 TGZ 存档时更改布局

> ID：13975333
> 
> 赞同：2
> 
> 时间：2012-12-20T15:25:00.270
> 
> 标签：cmake, build-system, cpack

我使用 CMake 管理具有以下布局的项目：

```
ProjectA/
  include
  doc
  test
ProjectB
  include
  doc
  test 
```

我想使用 CPack 来打包具有以下布局的`tar.gz` **源存档：**

```
include/
ProjectA/
  doc
  test
ProjectB/
  doc
  test 
```

其中新的顶级包含包含所有包含文件。

我尝试通过运行 CMake 脚本来实现这一点`CPACK_INSTALL_SCRIPT`，但该脚本在创建文件之前运行。我在哪里可以连接到 CPack 以获得这种效果？

它似乎也`install`对做什么没有影响`make package_source`，但它对`make package`. 不幸的是`make package`，还将构建和打包库，这是我不希望发生的事情。我想要一个纯源代码分发 ala `make dist`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T19:15:00.390

`install(DIRECTORY include DESTINATION include)`您可以从两者中调用标头`ProjectA`并将`ProjectB`它们安装到同一个目录中。这将导致 CPack 将它们一起放在生成的包中。

**更新**

好的，我已经设法用`CPACK_INSTALL_SCRIPT`变量做到了这一点。

我创建了以下脚本：

```
set(CMAKE_SOURCE_DIR @CMAKE_SOURCE_DIR@)

execute_process(COMMAND ${CMAKE_COMMAND} -E copy_directory ${CMAKE_SOURCE_DIR}/A/ ${CMAKE_SOURCE_DIR})
execute_process(COMMAND ${CMAKE_COMMAND} -E copy_directory ${CMAKE_SOURCE_DIR}/B/ ${CMAKE_SOURCE_DIR})
execute_process(COMMAND ${CMAKE_COMMAND} -E remove_directory ${CMAKE_SOURCE_DIR}/A)
execute_process(COMMAND ${CMAKE_COMMAND} -E remove_directory ${CMAKE_SOURCE_DIR}/B) 
```

在`CMakeLists.txt`我用实际值填充它`CMAKE_SOURCE_DIR`：

```
configure_file(CPackScript.cmake CPackScript.cmake @ONLY) 
```

最后，我添加了`set(CPACK_INSTALL_SCRIPT ${CMAKE_BINARY_DIR}/CPackScript.cmake)`，瞧！生成的包现在有`include`dir，其中包含`A/`和的标头`B/`，而`A/`和dir`B/`不存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T14:11:56.827

另一种可能的方法是完全绕过 CPack 来生成 TGZ 存档，并简单地使用生成存档的 CMake 自定义目标：

```
project (MyProject)

set (DIST_TEMP_DIR "${CMAKE_BINARY_DIR}/dist")
make_directory(${DIST_TEMP_DIR})

add_custom_target(dist 
    COMMAND ${CMAKE_COMMAND} -E remove_directory "${DIST_TEMP_DIR}/${PROJECT_NAME}/"
    COMMAND ${CMAKE_COMMAND} -E copy_directory "${CMAKE_CURRENT_SOURCE_DIR}/ProjectA/include" "${DIST_TEMP_DIR}/${PROJECT_NAME}/include"
    COMMAND ${CMAKE_COMMAND} -E copy_directory "${CMAKE_CURRENT_SOURCE_DIR}/ProjectA/test" "${DIST_TEMP_DIR}/${PROJECT_NAME}/ProjectA/test"
    COMMAND ${CMAKE_COMMAND} -E copy_directory "${CMAKE_CURRENT_SOURCE_DIR}/ProjectA/doc" "${DIST_TEMP_DIR}/${PROJECT_NAME}/ProjectB/doc"
    COMMAND ${CMAKE_COMMAND} -E copy_directory "${CMAKE_CURRENT_SOURCE_DIR}/ProjectB/include" "${DIST_TEMP_DIR}/${PROJECT_NAME}/include"
    COMMAND ${CMAKE_COMMAND} -E copy_directory "${CMAKE_CURRENT_SOURCE_DIR}/ProjectB/doc" "${DIST_TEMP_DIR}/${PROJECT_NAME}/ProjectA/doc"
    COMMAND ${CMAKE_COMMAND} -E copy_directory "${CMAKE_CURRENT_SOURCE_DIR}/ProjectB/test" "${DIST_TEMP_DIR}/${PROJECT_NAME}/ProjectB/test"
    COMMAND ${CMAKE_COMMAND} -E tar cvz "${CMAKE_BINARY_DIR}/${PROJECT_NAME}.tar.gz"  "${DIST_TEMP_DIR}/${PROJECT_NAME}/"
    COMMENT "Building ${PROJECT_NAME}.tar.gz"
    WORKING_DIRECTORY "${DIST_TEMP_DIR}"
) 
```

自定义目标`dist`首先通过在命令模式下使用多个命令调用 CMake，在构建文件夹内的临时目录中设置所需的存档结构`copy_directory`。然后它`tar.gz`使用`tar`命令模式子命令生成存档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T10:06:58.777

我不确定什么对你不起作用。

这对我来说适用于 Windows 上的 ZIP 生成器。我将尝试找到一台 linux 机器，看看这是否也适用于 TGZ（编辑：确实如此）：

目录结构：

```
CMakeLists.txt
ProjectA/
    doc
        foo.txt
    include
        foo.h
    test
        foo.test
ProjectB/
    doc
        bar.txt
    include
        bar.h
    test
        bar.test 
```

项目A/CMakeLists.txt

```
project( ProjectA )

INSTALL( DIRECTORY include DESTINATION . )
INSTALL( DIRECTORY doc DESTINATION ${PROJECT_NAME}/ )
INSTALL( DIRECTORY test DESTINATION ${PROJECT_NAME}/ ) 
```

项目B/CMakeLists.txt

```
project( ProjectB )

INSTALL( DIRECTORY include DESTINATION . )
INSTALL( DIRECTORY doc DESTINATION ${PROJECT_NAME}/ )
INSTALL( DIRECTORY test DESTINATION ${PROJECT_NAME}/ ) 
```

CMakeLists.txt：

```
project( MyProject )

ADD_SUBDIRECTORY(ProjectA)
ADD_SUBDIRECTORY(ProjectB)

INCLUDE(CPack) 
```

如果我创建包，我会得到

```
MyProject-0.1.1-win32.zip
    MyProject-0.1.1-win32
        include
            bar.h
            foo.h
        ProjectA
            doc
                foo.txt
            test
                foo.test
        ProjectB
            doc
                bar.txt
            test
                bar.test 
```

那是你的意图吗？

**源包**

对于源包创建，默认情况下 CPack 会忽略安装命令并安装/复制所有在`CPACK_SOURCE_INSTALLED_DIRECTORIES`. 此变量包含成对的源目录和目标目录。`"${CMAKE_SOURCE_DIR};/"`如果不手动设置，则默认为。准确地说，它会覆盖这些目录，忽略`CPACK_SOURCE_IGNORE_FILES`默认为所有主要 VCS 簿记文件的所有文件（参见您`CPackSourceConfig.cmake`的示例）。

您***可以***执行以下操作：

CMakeLists.txt

```
project( MyProject )

SET( PROJECTS ProjectA ProjectB )

SET(CPACK_SOURCE_INSTALLED_DIRECTORIES "${CMAKE_CURRENT_SOURCE_DIR};/") 
FOREACH( p ${PROJECTS} ) 
    ADD_SUBDIRECTORY( ${p} )
    LIST( APPEND CPACK_SOURCE_INSTALLED_DIRECTORIES ${CMAKE_CURRENT_SOURCE_DIR/${p}/include include )
ENDFOREACH()

INCLUDE(CPack) 
```

或将操作添加`CPACK_SOURCE_INSTALLED_DIRECTORIES`到相应的项目文件中。

**但是**：这会将您的包含目录安装到顶级包含目录，但由于通配，仍会在项目目录中创建另一个副本。您可能可以为您的`doc`和`test`目录创建额外的目录对，并跳过命令`CPACK_SOURCE_INSTALLED_DIRECTORIES`中的初始化`SET`。如果这样做，您将需要找到一种方法来安装/复制特定于项目的 CMake 文件。

**大警告**：如果`ProjectA`或`ProjectB`引用项目本地包含目录（例如，`INCLUDE_DIRECTORIES(...)`您将破坏您的 CMake 代码，使源安装（部分）无用。因此您可能需要重新考虑您对顶级包含目录的想法。

# regex - ^[.1-9]*\d$ 允许多个点

> ID：13975334
> 
> 赞同：1
> 
> 时间：2012-12-20T15:25:01.403
> 
> 标签：regex

> **可能重复：**
> [浮点的正则表达式？](https://stackoverflow.com/questions/9186780/regex-for-floating-point)

我正在尝试使用正则表达式。

**有效字符串为：**
1
11
5
12222222233
1.2
.5
1222.33444
12234.456
0

**无效字符串是**
.
-2
san
2s2
S2S
ssss2ssss
25535535TY

但是这个正则表达式没有资格测试多个点 (.)，例如
1......5,
5..2233
1223...5
这接受这些值作为有效字符串。
请帮助我如何使用 reg 解决此问题。

**注意，上面的验证应该是通过的。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:28:40.070

那个正则表达式怎么样：`\d*(\.\d+)?`

**编辑**

此正则表达式`\d*(\.\d+)?`也将允许空值。

更新版本：**`\d*(\.)?\d+`**没有这个问题。

请注意，将不允许负值，因为`\d`仅匹配数字 0..9

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:28:23.930

`^\d*\.?\d*$`应该可以解决问题，但是稍微思考和阅读更多关于正则表达式的信息也会告诉你同样的事情。

没看到那个。单独或。最后是不允许的。所以`^\d*(\.\d+)?$`灵魂就好了

# octave - 为什么 octave 不断地统计文件？

> ID：13975343
> 
> 赞同：1
> 
> 时间：2012-12-20T15:25:15.007
> 
> 标签：octave

这是一个非常古老的 octave 安装，3.05，但它是 centos-5 的标准配置，在许多生产环境中仍然存在。当我 strace octave 时，我看到它不断地在同一个文件上调用 stat 。它必须花费一半的时间来说明相同的文件。这是一个示例：

```
stat("/usr/local/share/octave/3.0.5/m/path", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
stat("/usr/local/share/octave/3.0.5/m/plot", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
stat("/usr/local/share/octave/3.0.5/m/pkg", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
stat("/usr/local/share/octave/3.0.5/m/sparse", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
stat("/usr/local/share/octave/3.0.5/m/control", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
stat("/usr/local/share/octave/3.0.5/m/control/obsolete", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0
stat("/usr/local/share/octave/3.0.5/m/control/hinf", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0

```

这并没有真正给出完整的味道，因为它一遍又一遍地更多和相同的。它发生在突发事件中。为什么要这样做，我怎样才能让它停止？或者至少让它做一次而不是经常做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:34:20.837

我想到了！Octave 正在统计文件以检查修改时间戳，以查看自上次统计它们以来它们是否已更改。这可以被禁用并且应该提高性能，无论八度音阶版本如何。

来自[http://www.gnu.org/software/octave/doc/interpreter/Function-Files.html](http://www.gnu.org/software/octave/doc/interpreter/Function-Files.html)：

如果您知道在运行 Octave 时您自己的函数文件不会更改，您可以通过调用 来提高性能`ignore_function_time_stamp ("all")`，这样 Octave 将忽略所有函数文件的时间戳。将“system”传递给此函数会重置默认行为。

# asp.net - 水晶报表子报表中的页脚

> ID：13975352
> 
> 赞同：0
> 
> 时间：2012-12-20T15:25:42.500
> 
> 标签：asp.net, crystal-reports

我需要帮助，我创建了 5 个子报表和一个页脚。但是页脚只出现在最后一页而不是所有页面中：

![在此处输入图像描述](../Images/cc0df234e02d1d96ffff632425a4ae44.png)

我需要做什么？（对不起，如果是西班牙语，我来自拉丁美洲）。

谢谢指教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:50:05.633

您应该将它放在报告页脚而不是页脚中。

子报表中的报表页脚将出现在子报表的底部。

主报表的报表页脚将出现在主报表的末尾。

# mysql - Visual Studio 2012 和用于 MySQL 的 TableAdapter 的配置向导

> ID：13975353
> 
> 赞同：1
> 
> 时间：2012-12-20T15:25:42.830
> 
> 标签：mysql, visual-studio-2010, wizard, datatableadapters

我真的尽量避免在这里问，因为我更像是一个喜欢自己做的人，但我遇到了一个点，我浪费了几个小时而没有结果。

`DataTable`它是关于结合 MySQL的 Visual Studios配置向导。

我尝试尽可能多地使用 VisualStudio 自动生成的`DataSets`+ `DataTableAdapter`，因为它很容易访问数据库。

好吧，问题是配置向导通常不承认使用 mysql 语法。

例如 - 我想使用 MySQLs 表引擎 MyISAM 的全文功能 - 所以我尝试使用以下语法调整`DataTableAdapter`并添加新查询`SELECT`

```
SELECT * 
FROM  `qa_posts` 
WHERE  `type` =  'Q'
AND  MATCH (title) AGAINST ('@content' IN BOOLEAN MODE)
OR MATCH (content) AGAINST ('@content' IN BOOLEAN MODE) 
```

但似乎就像 Visual Studio 或更好的说法一样，该向导在确认语法方面存在问题。

有任何想法吗？

PS：这是我第一次在这里问，如果我没有遵守任何行为规则，请见谅。

# video - 近重复视频检测

> ID：13975354
> 
> 赞同：12
> 
> 时间：2012-12-20T15:25:44.000
> 
> 标签：video, open-source, duplicate-detection

我正在寻找一个能够解决近乎重复的视频检测问题的开源项目。最好的，我现在发现它是[SOTU](http://www.cs.cityu.edu.hk/~wzhao2/sotu.htm)，但它的来源是封闭的。那么，是否有任何开源解决方案？

另外，我将非常感谢有关此问题的理论部分的一些链接。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-28T11:22:09.713

这是一个关于近乎重复的项目： 哥伦比亚大学 DVMM 实验室的**[INDetector](http://www.ee.columbia.edu/ln/dvmm/downloads/dvmmINDetector.html)**（源代码可用，我认为不完全是开源的）。还有[一些关于将其应用于视频](http://www.ee.columbia.edu/ln/dvmm/researchProjects/FeatureExtraction/NearDuplicateByParts/INDDetection.html)的信息（主要是关键帧）。

还有[pHash](http://phash.org/)，一个用于图像的开源“感知哈希”库。

还有[IMMI](http://www.burgsys.com/mumi-image-mining-community.php)，一个用于 RapidMiner 的开源图像挖掘插件。

通过将所有帧或选定帧（例如关键帧）作为算法的输入，然后聚合来自两个不同剪辑的帧对的相似性结果，这些中的任何一个都可以应用于视频和图像。

您也可以尝试与 UQLIPS 的作者取得联系（Shen 等人，下文引用）。

此外，查看 TRECVID 的条目列表，有些年份将近乎重复的检测作为任务之一，您可能能够与其中一些团体取得联系并获得该软件。

如果您想自己实现这一目标，那么实现任何已发布算法的原型都应该相当容易。我建议 (a) 对您感兴趣的数据尝试一些*简单*的算法，并且 (b) 使用某种类型的投票/轮询过程来组合它们的输出，基于观察到简单算法的简单组合通常从根本上优于解决这类问题的单一复杂算法。

此外，查看[地球移动器距离](http://en.wikipedia.org/wiki/Earth_mover%27s_distance)（在颜色直方图、梯度等上）以进行简单的特征提取（在所有帧上或仅在选定帧上）。这可以通过 python/numpy/scipy/pyopencv 中的几行代码方便地完成。

以下三篇可能是该领域被引用次数最多的论文，均来自不同的研究小组：

1.  杨，J.，YG 江，AG Hauptmann 和 CW Ngo。“评估场景分类中的视觉词袋表示。” 在多媒体信息检索研讨会国际研讨会论文集上，197-206，2007。http://dl.acm.org/citation.cfm ?id= [1290111](http://dl.acm.org/citation.cfm?id=1290111)。

2.  沉、HT、X. Zhou、Z. Huang、J. Shao 和 X. Zhou。“UQLIPS：实时近乎重复的视频剪辑检测系统。” 在第 33 届超大型数据库国际会议论文集上，1374-1377，2007。http://dl.acm.org/citation.cfm?id= [1326018](http://dl.acm.org/citation.cfm?id=1326018)。

3.  Wu, X.、AG Hauptmann 和 CW Ngo。“从网络视频搜索中实际消除近乎重复的内容。” 第 15 届国际多媒体会议论文集，218-227，2007。http://dl.acm.org/citation.cfm?id= [1291280](http://dl.acm.org/citation.cfm?id=1291280)。

Yang 等人的方法与 SOTU 中使用的方法相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T15:30:24.460

我认为[AForge.NET](http://www.aforgenet.com/)库对您很有用。它们有一个组件可以让您执行运动检测，这本质上是对环境“理论”背景的“比较”。

我很确定您可以使用[AForge.NET](http://www.aforgenet.com/)的一些基本工作并加速您对重复视频检测的研究。

希望这可以帮助，

祝你好运

# javascript - 在 Chrome 扩展弹出窗口中显示单击按钮的下拉菜单

> ID：13975370
> 
> 赞同：2
> 
> 时间：2012-12-20T15:26:47.603
> 
> 标签：javascript, html, css, google-chrome, twitter-bootstrap

我在我的 chrome 扩展程序中使用来自 twitter bootstrap 的拆分按钮下拉菜单。

当我将它用作下拉菜单时，一切正常。但是，如果我将其用作下拉菜单，则显示菜单时弹出窗口的大小会增加。

这可以避免吗？我希望下拉菜单显示在按钮下方，但不增加弹出窗口的大小。

我试图模仿 Evernote Chrome 扩展弹出窗口中显示的弹出菜单，用于选择文章、选择或整页剪辑。

# javascript - 在 jquery 事件后无法让 facebook like 按钮重新加载

> ID：13975371
> 
> 赞同：1
> 
> 时间：2012-12-20T15:26:51.060
> 
> 标签：javascript, jquery, html, facebook

我有一个 div 淡出 X 毫秒，然后在单击元素后淡入。淡入后，我重新初始化 facebook 按钮。一切似乎在 Safari 中运行良好，但在 Firefox 中，一旦单击元素，facebook 按钮就会消失。

```
$('.gall_thumb').click(function() {

    $(".gallery_rightframe").fadeOut(200, function() { // like button is in this div

        $(".gallery_rightframe").hide().delay(600).fadeIn(300);
        FB.XFBML.parse();   

    });

    return false;

}); 
```

我在这个 div 中也有 twitter 和 google+ 按钮，它们都可以重新初始化。只有facebook按钮没有显示。

我究竟做错了什么？

# c# - 进行更改后，Visual Studio 2012 不再编译

> ID：13975373
> 
> 赞同：3
> 
> 时间：2012-12-20T15:26:58.120
> 
> 标签：c#, visual-studio-2012

我最近安装了 VS 12 Service Pack 1。从那时起，我注意到如果进行了更改，Visual Studio 不会在启动时编译我的项目。

通常，如果您启动（调试）一个有一些更改的项目，它会重新编译它然后启动。但是现在，我总是遇到调试错误，例如“无法到达此断点，因为源代码不等于运行时代码”或其他什么。

在开始之前总是手动重新编译它很烦人 - 我总是忘记这一点：-/

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:50:42.007

你能检查一下是否设置了运行时构建选项吗？

您将在工具->选项->项目和解决方案->构建和运行下找到它。

对于为什么仅通过安装 update1 就可以翻转这种情况，我没有很好的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-17T05:54:41.487

我认为您应该输入解决方案的属性页（通过右键单击解决方案资源管理器窗格中的解决方案）并设置相关项目的“构建”复选框。

# google-chrome - 在 Chrome 中查看时在 GWT 应用程序中显示白色方块

> ID：13975375
> 
> 赞同：3
> 
> 时间：2012-12-20T15:27:05.127
> 
> 标签：google-chrome, gwt, iframe

完成[GWT StockWatcher 教程](https://developers.google.com/web-toolkit/doc/latest/tutorial/index)后，我发现了一个小的 UI 问题，如图所示

![隐藏 iframe 中的可见白色方块](../Images/7eebb1ef2985980c4c94290bbe50936f.png)

当我手动将主体的背景颜色从白色更改为绿色时，可以看到一个小的白色方块。我已经看过几个这样的例子，所以我很确定这不是我犯的编程错误。相反，它似乎源于 GWT 插入的隐藏 iframe 之一，因为当我删除 iframe 或其所有内容时它会消失。

此外，它似乎是 Chrome 或 Chrome-GWT 插件特定的问题，因为我无法在 Firefox 中复制它。

有谁知道这个问题的原因/解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T21:52:59.183

免责声明：我刚刚尝试过，它似乎有效，但测试得不是很好。

身体四面都有 8px 的边距。我将其设置为 0px

```
body{
    margin: 0px;
} 
```

这似乎已经解决了这个问题。如果您想要边距，则必须将其添加回体内的嵌套元素。

# ruby-on-rails - 每 60 天擦除一次记录

> ID：13975376
> 
> 赞同：7
> 
> 时间：2012-12-20T15:27:09.967
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

如果记录从 created_at 日期起超过 60 天，我需要删除我的报价模型中的记录。

我只找到了有关如何使用 rake 任务填充模型的信息，但找不到有关如何创建 rake 任务以删除记录的信息。所以我只是想知道我是否必须通过一项任务来执行此操作，或者 rails 是否还有其他事情可以执行此操作。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-20T15:34:07.260

为任务创建一个文件：

```
# lib/tasks/delete_old_records.rake
namespace :delete do
  desc 'Delete records older than 60 days'
  task :old_records => :environment do
    Model.where('created_at < ?', 60.days.ago).each do |model|
      model.destroy
    end

    # or Model.delete_all('created_at < ?', 60.days.ago) if you don't need callbacks
  end
end 
```

运行：

```
RAILS_ENV=production rake delete:old_records 
```

安排它使用 cron 运行（在本例中每天早上 8 点）：

```
0 8 * * * /bin/bash -l -c 'cd /my/project/releases/current && RAILS_ENV=production rake delete:old_records 2>&1' 
```

您还可以使用when gem 在部署**时创建和管理您的crontab：**

```
every 1.day, :at => '8:00 am' do
  rake "delete:old_records"
end 
```

[在Github](https://github.com/javan/whenever)上了解有关 gem 的更多信息。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-10-07T16:04:38.637

60.days.ago 生成一个时间戳，如

```
Fri, 08 Aug 2014 15:57:18 UTC +00:00 
```

因此，您需要使用 < 来查找比时间戳更早（更少）的记录。

```
Online.delete_all("created_at < '#{60.days.ago}'") 
```

这只是 Unixmonkey 的一个小小的疏忽。我也会使用 delete_all 而不是在一个块中循环每个迭代。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T15:33:24.577

您可以创建一个[rake 任务来删除过期](https://stackoverflow.com/questions/6310993/destroying-a-rails-3-object-in-rake)的商品，或者为您的商品模型创建类方法并调用它，例如，[无论何时](https://github.com/javan/whenever)gem。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-14T09:20:13.910

您可以在单个查询中删除所有超过 60 天的记录，如下所示：

```
Model.where("created_at < '#{60.days.ago}'").delete_all 
```

# javafx - javafx 在 webenigne 中做一个 http post 请求

> ID：13975378
> 
> 赞同：3
> 
> 时间：2012-12-20T15:27:15.017
> 
> 标签：javafx

我用谷歌搜索，但不幸的是我没有找到我要找的东西。对于我正在开发的一个小型应用程序，我使用的是 Webview。在这个网络视图中，我想加载一个我想登录的页面 - 这是使用类型的 http post 请求完成的

--> "Content-Type", "multipart/form-data;boundary="+boundary; <--

使用 HttpURLConnection 我可以使用 DataOutputStream 将登录数据传递给服务器。但是我将如何在 WebView 的 WebEngine 上进行这样的登录？

最好的祝福

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T20:47:19.420

在[WebEngine](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html)中加载页面，让用户输入他们的登录凭据并像在标准浏览器中一样提交它们。WebEngine 将多部分表单数据发布到服务器以适当地登录用户。

如果您需要代表用户自动执行此过程（即，因为您将身份验证凭据存储在其他地方以用于一种单点登录应用程序），那么，一旦引擎完全加载了登录页面，您就可以进行[webEngine.executeScript](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html#executeScript%28java.lang.String%29)调用填充页面上的表单登录字段并触发向服务器提交登录信息（可能通过触发登录表单提交按钮上的点击事件）。

如果您更喜欢使用该 API，您还可以使用此[例程](https://forums.oracle.com/forums/thread.jspa?messageID=10444280)在文档上执行[jQuery来完成表单填写和触发提交。](http://jquery.com)

# heroku - 与 heroku 应用共享数据

> ID：13975380
> 
> 赞同：0
> 
> 时间：2012-12-20T15:27:29.267
> 
> 标签：heroku, memcached

嗨，在 heroku 应用程序中共享数据的推荐方式是什么。

我问的原因是我有一个调度程序应用程序，它每 5 分钟运行一个进程并将数据放在内存缓存（memcachier）中。

然后，我希望另一个基于 servlet 的应用程序能够读取相同的内存缓存数据并将其返回给用户。

我试图这样做，但数据返回 null。

使用数据库会更好还是有其他方法可以做到这一点。

内存缓存可以跨测功机共享吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:52:30.563

是的，所有这些东西都通过您的配置变量连接为可附加的资源。让许多应用程序使用相同的附加资源是完全可以的。

[http://www.12factor.net/backing-services](http://www.12factor.net/backing-services)

[http://www.12factor.net/config](http://www.12factor.net/config)

# vb.net - 如何使用 json to linq 在 json.net 中创建字典结构

> ID：13975383
> 
> 赞同：4
> 
> 时间：2012-12-20T15:27:31.837
> 
> 标签：vb.net, json, json.net

我正在使用 Json.NET 创建其结构可能会改变的 json 定义。因此，我无法简单地序列化一个类并使用 Json to Linq 动态创建结构。我在使用 JObject、JArray、JProperty 等创建以下结构时遇到问题

```
 {
  'external_id':'UNIQUE_ID_222222222',
  'firstname':'John',
  'lastname':'Smith',
  'customFields':
      {
        'custom1':'custom1 val',
        'custom2':'custom2 val',
        'custom3"':'custom3 val'
      }
  } 
```

我尝试使用以下代码：

```
Dim json As New JArray()
Dim jsonObj As New JObject( _
            New JProperty("external_id", "UNIQUE_ID_222222222"),
            New JProperty("firstname", "John"),
            New JProperty("lastname", "Smith"))

Dim jsonCustomFields As New JArray
Dim jsonCustomObject As New JObject

jsonCustomFields.Add(jsonCustomObject)

For Each field In CustomFieldList
    jsonCustomObject.Add(New JProperty(field.Label, field.Value))
Next    

jsonObj.Add(New JProperty("customFields", jsonCustomFields))
json.Add(jsonContrib) 
```

但是，当我这样做时，我得到了一种不被 web 服务接受的不同模式

```
{[
  {
    "external_id": "50702",
    "firstname": "John",
    "lastname": "Smithson",
    "customFields": [
      {
        "custom1":"custom1 val",
        "custom2":"custom2 val",
        "custom3":"custom3 val"
      }
    ]
  }
]} 
```

我认为我应该直接向 JArray 添加属性，但这样做会导致运行时异常。

我已经看到了在反序列化 Dictionary(String, String) 对象时创建的类似模式，但我真的不想将自定义字段添加到字典中然后反序列化它们。必须可以使用上述符号创建它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T04:51:20.283

您不需要 a `JArray`，而是使用`JObject`

以下代码是 C#，但您将能够弄清楚

```
JObject jObject = new JObject();
jObject.Add(new JProperty("external_id", "UNIQUE_ID_222222222"));
jObject.Add(new JProperty( "firstname", "John" ));
jObject.Add(new JProperty( "lastname", "Smith" ));

JObject customFields = new JObject();
//Your loop
customFields.Add( "custom1", "custom1 val" );
customFields.Add( "custom2", "custom2 val" );
customFields.Add( "custom3", "custom3 val" );

jObject.Add( new JProperty( "customFields", customFields ) ); 
```

让我知道这是否有效

# javascript - 这个老式的 ajax 调用可以用 jquery 轻松完成吗？

> ID：13975385
> 
> 赞同：1
> 
> 时间：2012-12-20T15:27:40.223
> 
> 标签：javascript, jquery, ajax, xmlhttprequest, migration

我正在使用一些非常旧的代码，以下代码用于监视会话状态。如果用户处于非活动状态 X 分钟（由 check_session.php 确定），他们将被注销。

服务器端的东西工作正常。实际上，现有的 javascript 似乎也可以正常工作，但看起来需要清理。

这是现有的javascript：

```
function checkSessionStatus() 
{ 
    session_http.open('GET', '/check_session.php', true); 
    session_http.onreadystatechange = handleSessionHttpResponse; 
    session_http.send(null); 
}

function handleSessionHttpResponse() 
{ 
    if (session_http.readyState == 4) 
    { 
        results = session_http.responseText; 
        if (results == 'inactive') 
        {
            window.location='/logout.php';
            document.getElementById('session_divbox').innerHTML = results; 
        }
    }
}

function get_session_HTTPObject() 
{
    var xml_session_http; 
    if (!xml_session_http && typeof XMLHttpRequest != 'undefined') 
    { 
        try 
        { 
            xml_session_http = new XMLHttpRequest(); 
        } 

        catch (e) 
        { 
            xml_session_http = false; 
        } 
    } 
    return xml_session_http; 
} 
var session_http = get_session_HTTPObject(); 

function init_page_header() 
{
    window.setInterval( 'checkSessionStatus();',  30000);
} 
```

对于它正在做的事情来说，这似乎非常漫长。

我仍在学习 jquery，并且能够执行一些基本的 ajax 调用，比如这个，它将返回值放在一个 div 中：

```
$(document).ready(function() 
{
    $('#users_online').load('/show_users_online.php');
    var refreshId = setInterval(function() 
    {
        $('#users_online').load('/show_users_online.php');
    }, 2000);
    $.ajaxSetup({ cache: false });
}); 
```

第一段代码的问题是它返回一个“inactive”值，然后由客户端执行（窗口重定向）。

是否有可能在 Jquery 中做到这一点而无需结束数十行代码？我可能已经知道如何做到这一点，并且没有只见树木不见森林——这里的一些指导值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:30:13.913

即使它非常*吸血鬼的问题风格*，也应该看起来像

```
$.get('/check_session.php', function( data ) {
    if( data === 'inactive' ) { 
        window.location='/logout.php';
        document.getElementById('session_divbox').innerHTML = data;
    }
}); 
```

# mysql - 我不小心在 MySQL 上锁定了 root

> ID：13975388
> 
> 赞同：5
> 
> 时间：2012-12-20T15:27:46.733
> 
> 标签：mysql

我在 OS X 上使用 MySQL 并删除了所有使用`DROP USER`. 然后我将其中的一些添加回来并执行了`GRANT ALL on *.* to 'root'@'localhost';`，然后在验证确实是的之后注销，我可以登录并执行一些特权操作。

不幸的是，我没有尝试的特权操作之一是`GRANT ALL on *.*`. 事实证明，您没有使用该`GRANT ALL`命令授予权限的权限。所以现在我被困住了。我不能给任何人做其他事情的任何特权。

在这一点上，我实际上在 MySQL 中没有任何数据。我可以擦除安装并重新进行。但我想解决这个问题而不采取那种极端的做法。我怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T15:31:15.580

将以下内容放入文件中：

```
GRANT ALL ON *.* TO 'root'@'localhost' WITH GRANT OPTION;
FLUSH PRIVILEGES; 
```

使用指定该文件`mysqld`的选项重新启动。[`--init-file`](http://dev.mysql.com/doc/en/server-options.html#option_mysqld_init-file)

# django - save 和 save_model() 的区别

> ID：13975392
> 
> 赞同：13
> 
> 时间：2012-12-20T15:27:54.197
> 
> 标签：django

对于覆盖 save 方法所需的所有 Django 需求，我一直`save()`在我的模型中使用。突然间，当我在查找需要一些额外闪光的东西时，有人建议`save_model()`在我的管理课上覆盖。

我在两者上都找到了文档，我马上注意到论点是不同的。`save_model()`仅在从管理员保存模型时调用？并且在`save()`保存模型时调用该方法？

更新

所以我从管理员那里保存时发现了这一点。'save' 和 'save_model()' 都被调用。似乎首先调用了“save_model()”。在我的特定应用程序中，我使用的是 pre_save 信号和“save()”覆盖。现在我想添加 'save_model()'overrides 。所有这些保存覆盖和信号的交互和顺序让我感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:35:07.150

As`save()`是一种方法`Model`while`save_model()`是一种方法`ModelAdmin`...是的。

# wpf - WPF - 如何从后面的代码集中用户控件

> ID：13975394
> 
> 赞同：2
> 
> 时间：2012-12-20T15:27:57.837
> 
> 标签：wpf, user-controls, focus

我有一个用户控件`Focusable=true`和`IsTabStop=true`。

我可以使用 Tab 键聚焦它。但我需要从代码中关注它。

我试过了`uc.Focus()`，`Keyboard.Focus(uc)`但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T00:10:02.183

光辉大概是对的。如果 WPF 正在执行一些渲染/布局更新，您希望稍微推迟 .Focus() 任务并且不妨碍 WPF。试试这个：

```
using System.Windows.Threading;

...

Action focusAction = () => uc.Focus();
this.Dispatcher.BeginInvoke(focusAction, DispatcherPriority.ApplicationIdle); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:33:41.453

尝试使用[FocusManager.SetFocusedElement](http://msdn.microsoft.com/en-us/library/system.windows.input.focusmanager.setfocusedelement.aspx)

```
FocusManager.SetFocusedElement(parentElement, uc); 
```

# asp.net-mvc-4 - 尝试在 displaytemplate 中访问父视图模型的属性

> ID：13975397
> 
> 赞同：4
> 
> 时间：2012-12-20T15:28:13.353
> 
> 标签：asp.net-mvc-4, parent-child, display-templates, partialviews

我正在尝试构建一个 asp.net mvc 4 应用程序，该应用程序利用部分视图和显示/编辑器模板和 Kendo ui。我有一个特定页面的视图模型：

```
public class Plant {
    public Guid PlantId{ get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public ICollection<Leaf> Leafs{ get; set; }
    public ICollection<Flower> Flowers{ get; set; }
    public ICollection<Bug> Bugs{ get; set; }
} 
```

和 Leaf 一样，Flower as Bug 也有自己的属性。举例：

```
public class Leaf {
    public Guid LeafId{ get; set; }
    public string Name { get; set; }
    public string Documentation { get; set; }
    public string Description { get; set; }
} 
```

我在我的视图中使用了部分视图，因此使用 ajax 更新它们变得更加容易。我的正常视图：PlantDetail.cshtml

```
@model Plant

<table>
<tr>
    <td>
        <h2>@Html.Label(Resources.PlantDetailTitle)</h2>
    </td>
    <td>
        @Html.HiddenFor(m => m.PlantId)
        @Html.DisplayFor(m => m.Name)
    </td>
</tr>
<tr>
    <td>@Html.LabelFor(m => m.Description)
    </td>
    <td>
        @Html.DisplayFor(m => m.Description)
    </td>
</tr>
</table>

 @{Html.RenderPartial("_flowers", Model);}

 @{Html.RenderPartial("_leafs", Model);} 
```

在我的部分视图“_leafs”（以及“_flowers”中，我有一系列按钮调用需要 LeafId 和 PlantId 的操作：

局部视图“_leafs”：

```
 @model List<Leaf>

 @for (int i = 0; i < Model.Count(); i++ )
  {
  @(Html.DisplayFor(m => m[i]))
 } 
```

我的显示模板“Leaf.cshtml”：

```
 @model Leaf
  @Html.HiddenFor(m =>m.LeafId)
   <a class='k-button k-button-icontext' href=@Url.Action("InitiateLeaf", "Plant") +"?    
  leafId=@Model.LeafId&plantId=#=PlantId#">@Model.Name</a> 
```

现在我的问题是我似乎无法在我的显示模板中访问我的父视图模型的 PlantId。（而且我在每个显示模板中都有同样的问题..）我已经在我的 url.action 中使用路由值进行了尝试，我知道我最终可以在 javascript 中访问 PlantId，但是有任何（mvc）方法可以继续使用 displaytemplates 并且不要将我的 plantId 复制为我的子 Leaf viewmodel 的属性？

我已经尝试在我的显示模板中使用类似“@HttpContext.Current.Request.RequestContext.RouteData.Values[“controller”].ToString()”的东西来访问我的 parentviewcontext，但似乎找不到我的值PlantId（如果它甚至存储在那里..）。

还有其他人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T15:45:04.097

您提到的一种选择是使用 jquery 访问父 PlantId。如果您需要访问父级的属性，最好设计您的视图模型，类似于 Entity 框架建议我们创建模型类的方式。

```
public class Plant {
    public Guid PlantId{ get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public ICollection<Leaf> Leafs{ get; set; }
    public ICollection<Flower> Flowers{ get; set; }
    public ICollection<Bug> Bugs{ get; set; }
} 
```

所以你的 Leaf 类也应该有一个导航属性来返回 Plant。

```
public class Leaf {
    public Guid LeafId{ get; set; }
    public string Name { get; set; }
    public string Documentation { get; set; }
    public string Description { get; set; }
    public virtual Plant Plant { get; set; }
    public Guid PlantId { get; set; }
} 
```

确保在创建 ViewModel 时填充 Plant 属性和 PlantId。希望这可以帮助

# android - 警告“未找到启动器活动，启动只会同步设备上的应用程序包”

> ID：13975399
> 
> 赞同：1
> 
> 时间：2012-12-20T15:28:18.823
> 
> 标签：android, android-widget, android-manifest

我正在制作一个 android 小部件，但是在模拟器上运行我的应用程序时，我从控制台收到了这个警告

未找到启动器活动！启动只会同步设备上的应用程序包！

这是我的 AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.analogclock.android"
    android:versionCode="1"
    android:versionName="1.0"
     >

    <uses-sdk android:minSdkVersion="3" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <receiver 
            android:name=".AnalogClockWidget"
            android:label="@string/app_name"  />

        <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
                <category android:name="android.intent.category.LAUNCHER"/>

            </intent-filter>

             <meta-data android:name="android.appwidget.provider" android:resource="@xml/appwidget" />
    </application>

</manifest> 
```

什么原因？请给我一个解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:33:49.377

这是正常的，因为您的小部件确实没有任何活动！

我猜您正在使用 Eclipse 上的“运行”或“调试”按钮。在这种情况下，“运行”按钮无法为您将小部件添加到主屏幕，因此它只会安装软件包并向您发出警告。

当您尝试在主屏幕上添加小部件时，请检查您的小部件是否出现在选择器中。如果是这样，那么它按预期工作:)

编辑：试试这个清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.analogclock.android"
    android:versionCode="1"
    android:versionName="1.0"
     >

    <uses-sdk android:minSdkVersion="3" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <receiver 
            android:name=".AnalogClockWidget"
            android:label="@string/app_name"
            android:exported="true">
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />  
            </intent-filter>
            <meta-data android:name="android.appwidget.provider" android:resource="@xml/appwidget" />
        </receiver>
    </application>

</manifest> 
```

# javascript - javascript 和 css 样式表不起作用

> ID：13975400
> 
> 赞同：0
> 
> 时间：2012-12-20T15:28:22.267
> 
> 标签：javascript, html, css

如何使 Javascript 输入文本看起来像 HTML？样式表未应用于 Javascript，但适用于 HTML。

[https://raw.github.com/blackberry/jQueryMobile-BB10-Theme/master/kitchenSink/lib/BlackBerry-JQM-all.css](https://raw.github.com/blackberry/jQueryMobile-BB10-Theme/master/kitchenSink/lib/BlackBerry-JQM-all.css)

[https://raw.github.com/blackberry/jQueryMobile-BB10-Theme/master/kitchenSink/lib/BlackBerry-JQM-all.js](https://raw.github.com/blackberry/jQueryMobile-BB10-Theme/master/kitchenSink/lib/BlackBerry-JQM-all.js)

[http://jsfiddle.net/zaDN2/](http://jsfiddle.net/zaDN2/)

```
<html>
<head>
    <link rel="stylesheet" href="lib/BlackBerry-JQM-all.css" />
    <script src="lib/BlackBerry-JQM-all.js"></script>
</head>
<body onLoad="onPageLoad()">
    <div data-role="content" id=content></div><!-- /content -->
    <input type=text id=tPlay2 placeholder=Play_HTML>
    <script type="text/javascript">
        function setContent(id, msg)
        {
            var ele = document.getElementById(id);
            if (ele) {
                ele.innerHTML = msg;
            }
        }
        function onPageLoad()
        {
            var sPlay;

            sPlay = '<input type=text id=tPlay1 placeholder=Play_JS>';

            setContent("content", sPlay);
        }
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:42:02.017

在样式表上搜索适用于文本类型输入的 CSS 类

例如，您可能有：

```
input[type='text']
{
    background:red;
} 
```

将其更改为：

```
input[type='text'], .jsinput
{
    background:red;
} 
```

然后将脚本的行更改为

```
 sPlay = '<input class="jsinput" type=text id=tPlay1 placeholder=Play_JS>'; 
```

如果您也发布样式表，我的回答会更准确。

# html - 我可以用css3动画反转状态吗

> ID：13975403
> 
> 赞同：2
> 
> 时间：2012-12-20T15:28:35.153
> 
> 标签：html, css, css-transitions

我想为`<a>`标签设置动画，因此当处于`:active`状态时它会向右移动，而当回到常规状态时它会向左移动。

目前它正在点击动画，但是当我离开鼠标按钮时它会在没有动画的情况下跳回来，我该如何反转动画？

[这是一个简单的例子](http://codepen.io/joe/pen/DJrIj)，请注意我必须使用，`position:relative;left:20px`因为在真正的应用程序中，此代码位于绝对定位的元素内，并且出于某种原因，使用边距会导致意外行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:36:42.060

只使用`left: 0;`for`a`和使用`position: relative;`in`a`而不是`a:active`

[**演示**](http://jsfiddle.net/sWb4X/3/)

CSS

```
a {
   display: block;
   background: red;    
   -webkit-transition: left .2s ease-in,margin .2s ease-in;
   -moz-transition: left .2s ease-in,margin .2s ease-in;
   transition: left  .2s ease-in,margin .2s ease-in;
   left: 0;
   position: relative;
} 
```

只是一个建议，点击移动链接会惹恼访问者，为什么不使用它`hover`

[**演示**](http://jsfiddle.net/sWb4X/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:39:08.057

如果您的实时代码与示例类似，则只需输入 position:relative; 左：0px；也适用于 {} 规则。

发生的事情是当您停止悬停/释放单击时，它会丢失位置：相对，因为它不在当前类中。没有位置规则，左规则将被忽略。

# sql-server-2008 - “登录失败”从客户端运行 dtutil，但在服务器本地运行时工作

> ID：13975410
> 
> 赞同：1
> 
> 时间：2012-12-20T15:28:51.727
> 
> 标签：sql-server-2008, ssis

我无法远程执行 DTUTIL（从我的笔记本电脑），但是当我从 SQL 服务器实例上运行时，它是成功的。命令如下，从 C:\Program Files\Microsoft SQL Server\100\DTS\Binn 运行

```
DTUTIL /FILE C:\temp\<PackageFile>.dtsx /copy SQL;<Packagename> 
          /DestServer <servername> /DestU <Username> /DestP <Password> 
```

将返回错误：

```
 Error (0xC0014014) while checking for the existence of package "Pac
       kage" on SQL Server.
       Could not save package "Package" because of error 0x80040E4D.
       Description: Login failed for user Domain\user'.
       Source: Microsoft SQL Server Native Client 10.0 
```

有谁知道我做错了什么，请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T01:18:13.787

这个问题有可能是双跳的结果吗？我发现了一篇文章，作者使用 powershell 来辅助部署。我认为这是一个证书授权问题。

> 单击此处[使用 dtutill 和 powershell 第 1 部分部署软件包](http://maxt2posh.wordpress.com/2010/04/23/deploying-ssis-packages-using-dtutil-exe-with-powershell-part-1%E2%80%A6)

您唯一的选择可能是使用类似 powershell 的东西并使用 CredSSP 来传递您的凭据。

> Powershell CredSSP
> 
> > [http://blogs.technet.com/b/heyscriptingguy/archive/2012/11/14/enable-powershell-quot-second-hop-quot-functionality-with-credssp.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2012/11/14/enable-powershell-quot-second-hop-quot-functionality-with-credssp.aspx)

我倾向于这种方式，因为如果您阅读这些评论，我会在 [此处](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/dcd13796-9b9e-4cfe-92a7-adcaa8b6d196/)找到有关远程部署的信息，MSDN 学生说

*“我希望有一种简单的方法来远程部署软件包...... dtutil 带来了远程进程和 kerberos 委派的复杂性。”*

希望这可以帮助您找到更好的答案。如果不了解您的网络设置的细节，我真的无法再提供帮助了。

# python - Python TKinter 下拉菜单问题

> ID：13975415
> 
> 赞同：3
> 
> 时间：2012-12-20T15:29:10.793
> 
> 标签：python, python-3.x, listbox, tkinter, options-menu

在下面的代码中，我遇到了问题，`self.dmenu1.bind("<Button-1>", self.branches)`如果有人可以让我朝着正确的方向前进，我将不胜感激。

我希望在下拉菜单中选择一个选项，它会更改其下方列表框中的排序。
然而实际发生的情况是，在我做出选择之后，我必须再单击一次下拉框，然后排序才会生效。

这不是用户期望下拉菜单起作用的方式。我已经发布了完整的代码，你可以看到我对这一切都很陌生，但这是一个很好的学习挑战:)

在此先感谢您的帮助。
问候，

```
from tkinter import *

ALL = N+S+W+E

users = ['Fred Asus','Tom Yahoo','Jessy Samsung','Jermain Sony','Nikki Nikon',
        'Ian IBM','Elena Google','Rob Braun','Tammy Tonika','James Intel',
        'Murphy Richards','Daniel Denon']

branchlst = {138:'Driving - St Albans', 170:'Brighton', 271:'Driving - Birmingham',
           330:'Leeds', 680:'Edinburgh'}

class Application(Frame):

    def __init__(self, master=None):
        #initiate the primary window.
        Frame.__init__(self, master)
        self.master.rowconfigure(0, weight=1)
        self.master.columnconfigure(0, weight=1)

        self.rowconfigure(0, weight=0)
        self.rowconfigure(1, weight=0)
        self.rowconfigure(2, weight=3)
        self.columnconfigure(0, weight=0)
        self.columnconfigure(1, weight=1)
        self.columnconfigure(2, weight=1)

        self.grid(sticky=ALL)
        self.frameset()

    def frameset(self):
        #define and setup frames with columns and rows for widgets
        #Colours added to framesets to help designing layout. delete them
        self.Frame1 = Frame(self)   # D
        self.Frame2 = Frame(self, bg='blue')  # E
        self.Frame3 = Frame(self)              # L
        self.Frame4 = Frame(self, bg='blue')  # E
        self.Frame5 = Frame(self) # T
        self.Frame6 = Frame(self) # E colours

        self.Frame1.rowconfigure(0,weight=0)
        self.Frame2.rowconfigure(0,weight=0)
        self.Frame3.rowconfigure(0,weight=1)
        self.Frame4.rowconfigure(0,weight=1)
        self.Frame5.rowconfigure(0,weight=1)
        self.Frame6.rowconfigure(0,weight=1)

        self.Frame1.columnconfigure(0,weight=0)
        self.Frame2.columnconfigure(0,weight=0)
        self.Frame3.columnconfigure(0,weight=1)
        self.Frame4.columnconfigure(0,weight=1)
        self.Frame5.columnconfigure(0,weight=1)
        self.Frame6.columnconfigure(0,weight=1)

        self.Frame1.grid(row=0, column=0, rowspan=1, columnspan=1, sticky=ALL)
        self.Frame2.grid(row=0, column=1, columnspan=2, sticky=ALL)
        self.Frame3.grid(row=1, column=0, rowspan=2, sticky=ALL)
        self.Frame4.grid(row=1, column=1, columnspan=2, sticky=ALL)
        self.Frame5.grid(row=2, column=1, rowspan=1, columnspan=1, sticky=ALL)
        self.Frame6.grid(row=2, column=2, sticky=ALL)

        label4a = Label(self.Frame4, text='table1', bg='orange')
        label4b = Label(self.Frame4, text='table2', bg='yellow')
        label4a.pack(side=LEFT)
        label4b.pack(side=RIGHT)

        self.objects()

    def objects(self):
        var = StringVar()
        var.set('Name')
        self.dmenu1 = OptionMenu(self.Frame1, var,'Costcode','Name')
        self.dmenu1.pack(side=TOP, fill=BOTH)
        self.dmenu1.bind("<Button-1>", self.branches)

        self.f3ListBox = Listbox(self.Frame3, selectmode='single')
        #self.branches()
        self.f3ListBox.grid(sticky=ALL)
        self.f3ListBox.bind("<Button-3>", self.f1handler1)

        f5ListBox = Listbox(self.Frame5, selectmode='single')
        n = 0
        for item in users:
            f5ListBox.insert(n,item)
            n += 1
        f5ListBox.grid(sticky=ALL)

        f6ListBox = Listbox(self.Frame6, selectmode='single')
        f6ListBox.insert(1,'S123456') # DELETE
        f6ListBox.insert(2,'S313414') # DELETE
        f6ListBox.insert(3,'S573343') # DELETE
        f6ListBox.grid(sticky=ALL)    

    def f1handler1(self, event):
        """Creates a popup menu for the alternative mouse button.
        Edit this to add more options to that popup"""
        select = lambda: self.f3ListBox.delete(ACTIVE)
        popup = Menu(self, tearoff=0)
        popup.add_command(label='Quit',command=self.quit)
        popup.add_command(label='delete',command=select) #add more of these for more options

        try:
            popup.post(event.x_root, event.y_root)
        except:
            pass
    def branches(self, event):
        self.f3ListBox.delete(0,END)
        n = 0
        if self.dmenu1.cget('text') == 'Costcode':
            cc = sorted(list(branchlst.keys()))
            for item in cc:
                self.f3ListBox.insert(n,str(item)+' '+branchlst[item])
                n += 1
        elif self.dmenu1.cget('text') == 'Name':
            bb = sorted(list(branchlst.values()))
            for item in bb:
                for name,val in branchlst.items():
                    if item == val:
                        self.f3ListBox.insert(n,item+' '+str(name))

root = Tk()
app = Application(master=root)
app.mainloop() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T16:30:36.487

我更喜欢理解问题并解决问题的途径，所以让我们来看看它。在您的代码中，您有`self.dmenu1.bind("<Button-1>", self.branches)`.

你有没有问过自己这个事件实际上是什么时候触发的？当您单击 时会触发它`OptionMenu`。这意味着当前选项将是使用的选项。因此，假设选项“a”处于活动状态并且您更改为选项“b”。此选择更改不会触发 Button-1 事件，但是当您`OptionMenu`再次单击时，它将触发，然后小部件将“b”作为当前选项。

您在代码中的实际内容是：

```
self.dmenu1 = OptionMenu(self.Frame1, var,'Costcode','Name',
                         command=self.branches) 
```

并且可以安全地消除前面提到的绑定。`command`每当在您的`OptionMenu`. 除了此更改之外，您可能还希望在程序启动时填充它下面的列表框。为此，请`self.branches(None)`在您定义`self.f3ListBox`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T16:07:50.673

StringVar 类有一个`trace`方法，允许您将回调函数附加到它。该函数将在变量值改变时被调用。

`var.set('Name')`在您的代码中，将此行添加到方法中该行的正下方`objects`。

```
var.trace('w', self.branches) 
```

这将导致在更改`self.branches`时被调用`var`。它将使用三个参数调用，因此您需要将分支的定义更改为：

```
def branches(self, name, index, mode): 
```

您还应该删除该`self.dmenu1.bind("<Button-1>", self.branches)`行，因为它现在是多余的。

# android - 一个 int 值通过 trthought 意图在新活动上返回 0

> ID：13975423
> 
> 赞同：3
> 
> 时间：2012-12-20T15:29:27.610
> 
> 标签：android, android-intent, android-activity, type-conversion

在我的来电活动中：

```
 protected void onListItemClick(ListView l, View v, int position, long id) {

          Intent myIntent = new Intent(MainActivity.this, sondaggioActivity.class);
          myIntent.putExtra("categoriaId", String.valueOf(id));
          MainActivity.this.startActivity(myIntent);
        // Toast.makeText(this, String.valueOf(id), Toast.LENGTH_LONG).show();
        } 
```

toast 返回在列表中单击的项目的 id 的正确值。关于我的接收者活动：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.maindomanda);

        int category = getIntent().getExtras().getInt("categoriaId"); 
        TextView text = (TextView) findViewById(R.id.domanda);
        text.setText(String.valueOf(category));
    } 
```

一个非常简单的......文本字段总是返回0......我做错了什么？String.ValueOf() 是否以某种方式被弃用？或者更好地使用其他东西......还有另一个问题......我通过`long id`就像我知道我在做什么一样，这是非常错误的......它是所谓的“ `_ID`”字段吗？我从 dbtable 中获取这些值，是那个表 ID 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:32:50.193

将您的代码更改为：

```
String strcategory = getIntent().getExtras().getString("categoriaId"); 
```

因为您正在`String`从 onListItemClick 传递到 sondaggioActivity Activity 并尝试接收为`Int`

**笔记 ：**

第二点也是重要的一点是`id`，`long`您正在尝试将其解析为`Int`无效的。请参阅这篇文章：[如何在 Java 中将 long 转换为 int？](https://stackoverflow.com/questions/4355303/how-can-i-convert-a-long-to-int-in-java)

`onListItemClick`解决方案是只要发送 id

```
 myIntent.putExtra("categoriaId",id); 
```

`sondaggioActivity`并像在Activity中一样接收它：

```
long category = getIntent().getExtras().getLong("categoriaId"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:33:35.040

你得到一个 int `getInt("categoriaId")`，你传入了一个字符串`putExtra("categoriaId", String.valueOf(id));` String.valueOf(); 返回 int 的字符串表示形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:38:40.367

传递 categoriaId，只要 myIntent.putExtra("categoriaId", id);

# c# - c# dotnetzip memorystream with zip file

> ID：13975424
> 
> 赞同：2
> 
> 时间：2012-12-20T15:29:28.843
> 
> 标签：c#, memorystream, dotnetzip

我在下面的代码中尝试做的是从 memoryStream 打开一个 zip 文件，其中包含从 memoryStream 创建的文件。

请注意，我使用的是 c# MVC，因为我有一个返回文件...

memoryStream1 确实有一个长度，所以不确定我什么时候打开 archive.zip，它说

*Excel 无法打开 payload.xlsx，因为文件格式或文件扩展名无效。验证文件没有损坏并且文件扩展名与文件格式匹配。*

文件扩展名肯定是 xlsx，所以这不是问题。我会以错误的方式解决这个问题吗？

我有以下代码：

```
 var memoryStream1 = new MemoryStream();
    gc.CreatePackage(memoryStream1);

    var memoryStream = new MemoryStream();

    using (var zip = new ZipFile())
    {
      zip.AddEntry("payload.xlsx", memoryStream1);
      zip.Save(memoryStream);
    }

    memoryStream.Seek(0, 0);
    return File(memoryStream, "application/octet-stream", "archive.zip"); 
```

# java - 如果引用被覆盖，PreparedStatement 是否保持“打开”状态？

> ID：13975429
> 
> 赞同：1
> 
> 时间：2012-12-20T15:30:09.403
> 
> 标签：java, database-connection, prepared-statement

假设我`PreparedStatement`从一个`Connection`对象中得到一个，然后我用另一个覆盖引用`PreparedStatement`。然后，后来，我`close()`的参考。第一个`PreparedStatement`（我失去参考的那个）会保持开放吗？或者是否有一些协议或垃圾收集来处理这个问题？

例如：

```
PreparedStatement ps = connection.prepareStatement(MY_QUERY);
// do stuff
ps.execute();

ps = connection.prepareStatement(MY_OTHER_QUERY);
// do stuff
ps.execute();

ps.close(); 
```

第一个`PreparedStatement`对象（用于执行的对象）是否`MY_QUERY`保持打开状态？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T15:32:11.143

是的，`PreparedStatement`它将保持打开状态，直到它被垃圾收集*（如果有的话）。

这就是为什么你总是看到*总是释放（关闭）你获得的外部资源*的规则。

JDBC 资源（例如这个准备好的语句、连接、结果集）和 IO 资源（套接字、流等）是您在 Java 中需要手动管理的两种最常见的资源。

^(* 严格来说，它*可以*在方法中被关闭，该`finalize`方法可能在它被 GC*之前*，但*在*它符合 GC 的条件之后，但对于本次讨论来说，这已经足够接近了。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:33:44.840

当对象最终被垃圾收集时，它将被关闭。由于您对垃圾收集过程几乎没有控制权，因此最好在完成语句后立即关闭它们。

从文档中[`Statement.close()`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#close%28%29)：

> 立即释放此 Statement 对象的数据库和 JDBC 资源，而不是等待它自动关闭时发生。通常最好在使用完资源后立即释放资源，以避免占用数据库资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T15:49:12.407

它将保持打开状态，并且不能保证在垃圾收集时它会关闭。这取决于实施。实现需要像 FileInputStream.finalize 那样覆盖 finalize

“...确保在没有更多引用时调用此文件输入流的关闭方法。”

但是 Connection.close 可以关闭 PreparedStatement，参见 Connection.close 的 API：

“..立即释放此 Connection 对象的数据库和 JDBC 资源，而不是等待它们自动释放..”

但前提是它不是池连接。

# php - 从不同的脚本创建每月记录表

> ID：13975432
> 
> 赞同：0
> 
> 时间：2012-12-20T15:30:13.617
> 
> 标签：php, mysql

我想请教一些想法支持如何在 PHP 中实现从 5 个不同的 MYSQL 脚本创建表。他们每个人的结果是按月计算的数据组的总和。我不想在脚本上花费太多时间，因为单独激活时它们都可以。

我将提出理论查询，以免我的信息太长。

```
<?php
$qry = "SUM(CASH) group by MONTH DESC";
$result=mysql_query($qry) or die(mysql_error());

$qry2 = "SUM(DEBT) group by MONTH DESC";
$result=mysql_query($qry2) or die(mysql_error());

$qry3 = "SUM(DEBTPAID) group by MONTH DESC";
$result=mysql_query($qry3) or die(mysql_error());

$qry4 = "SUM(INVOICE) group by MONTH DESC";
$result=mysql_query($qry4) or die(mysql_error());

$qry5 = "SUM(NVOICEPAYOFF) group by MONTH DESC";
$result=mysql_query($qry5) or die(mysql_error());
?> 
```

我想实现这样的表：

```
<table>
<tr>
  <td>CASH</td>
  <td>DEBT</td>
  <td>DEBTPAID</td>
  <td>INVOICE</td>
  <td>INVOICEPAYOFF</td>
</tr>
<?
echo '<tr>';

echo '<td><label>'. $row['CASH'] .'</label></td>';
echo '<td><label>'. $row2['DEBT'] .'</label></td>';
echo '<td><label>'. $row3['DEBTPAID'] .'</label></td>';
echo '<td><label>'. $row4['INVOICE'] .'</label></td>';
echo '<td><label>'. $row5['INVOICEPAYOFF'] .'</label></td>';
echo '</tr>';

?>
</table> 
```

我会欣赏您的每一个想法、解决方案或建议。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:55:14.780

为什么不这样做？

```
SELECT sum(cash) as 'cash', sum(debt) as 'debt',
  sum(debtpaid) as 'debtpaid', sum(invoice) as 'invoice',
  sum(invoicepaid) as 'invoicepaid'
FROM my_table
GROUP BY MONTH DESC 
```

# moq - 如何使用 MSTest 和 Moq 模拟这个

> ID：13975435
> 
> 赞同：1
> 
> 时间：2012-12-20T15:30:31.103
> 
> 标签：moq, mstest

我只是在学习如何通过 MSTest 使用 Moq。在现有应用程序中，我有以下要测试的方法：

```
/// <summary>
/// Return the marker equipment Id value give a coater equipment Id value.
/// </summary>
/// <param name="coaterEquipmentId">The target coater</param>
/// <returns>The marker equipment Id value</returns>
internal static string GetMarkerEquipmentId(string coaterEquipmentId)
{
    return CicApplication.CoaterInformationCache
        .Where(row => row.CoaterEquipmentId == coaterEquipmentId)
        .Select(row => row.MarkerEquipmentId)
        .First();
} 
```

CicApplication对象是具有名为**CoaterInformationCache**的属性的“全局”对象，该属性是 CoaterInformation 类的列表。

我假设我需要以某种方式模拟 CicApplication.CoaterInformationCache，并且我可能需要将此方法传递给包含 CoaterInformation 类列表的接口，而不是通过仅包含运行时值的全局对象访问列表？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:00:05.690

全局/静态是单元可测试性的祸根。为了使这个可测试，你是正确的，你应该消除`CicApplication`全局。您可以创建一个接口，即`ICicApplication`使用相同的公共 API，并将一个实例传递到您的应用程序代码中。

```
public interface ICicApplication
{
    public List<CoaterInformation> CoaterInformationCache { get; }
}

public DefaultCicApplication : ICicApplication
{
    public List<CoaterInformation> CoaterInformationCache
    {
        // Either use this class as an adapter for the static API, or move
        // the logic here.
        get { return CicApplication.CoaterInformationCache; }
    }
} 
```

由于这是一个静态方法，您可以将其作为方法参数传递，否则，将静态方法转换为实例方法并初始化`ICicApplication`对象上的字段（也许将实例传递给构造函数）。

然后，当您设置单元测试时，您可以传入一个使用 Moq 设置的模拟实例：

```
Mock<ICicApplication> appMock = new Mock<ICicApplication>();
appMock
    .SetupGet(ca => ca.CoaterInformationCache)
    .Returns(new List<CoaterInformation> { ... }); 
```

# c# - 从 C# 中的字符串调用表单

> ID：13975437
> 
> 赞同：5
> 
> 时间：2012-12-20T15:30:38.817
> 
> 标签：c#, winforms

我有一个 C# 中的 Windows 应用程序，我需要调用一个**表单**，其名称在运行时保存到一个字符串变量中。

像;

我已经有了表格；**登录.cs**

```
string formToCall = "Login"
Show(formToCall) 
```

这可能吗 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T15:33:51.037

看看[`Activator.CreateInstance(String, String)`](http://msdn.microsoft.com/en-us/library/d133hta4.aspx)：

```
Activator.CreateInstance("Namespace.Forms", "Login"); 
```

您还可以使用`Assembly`该类（在`System.Reflection`命名空间中）：

```
Assembly.GetExecutingAssembly().CreateInstance("Login"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T15:34:03.403

使用反射：

```
//note: this assumes all your forms are located in the namespace "MyForms" in the current assembly.

string formToCall = "Login"
var type = Type.GetType("MyForms." + formtocall);
var form = Activator.CreateInstance(type) as Form;

if (form != null)
   form.Show(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-15T08:45:21.567

要获得更多动态，您可以将表单放在任何文件夹中：

```
public static void OpenForm(string FormName)
{
    var _formName = (from t in System.Reflection.Assembly.GetExecutingAssembly().GetTypes()
                     where t.Name.Equals(FormName)
                     select t.FullName).Single();
    var _form = (Form)Activator.CreateInstance(Type.GetType(_formName));
    if (_form != null) 
    _form.Show();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T15:33:25.907

试试这个：

```
var form = System.Reflection.Assembly.GetExecutingAssembly().CreateInstance(formToCall);
form.Show(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-03T19:42:33.540

## (Form)Assembly.GetExecutingAssembly().CreateInstance()

```
 Form frm = (Form)Assembly.GetExecutingAssembly().CreateInstance("namespace.form");
    frm.Show(); 
```

# sql-server - 本地主机的 DSN 文件在其他计算机上不起作用

> ID：13975451
> 
> 赞同：1
> 
> 时间：2012-12-20T15:31:34.457
> 
> 标签：sql-server, ms-access, ms-access-2010, dsn

我有一个带有 SQL Server 后端的访问应用程序，我正在尝试复制数据库以获得脱机版本。

所以每台笔记本电脑都有自己的 SQL Server 数据库，我为链接表制作了一个 DSN 文件到 localhost。

```
ODBC;Description=localhost;DRIVER=SQL Server;SERVER=localhost\SQLEXPRESS;Trusted_Connection=Yes;APP=Microsoft Office 2010;DATABASE=SMD;TABLE=dbo.ClientsListColumns 
```

正如我所想，它适用于我的但不适用于其他计算机

我得到了那个错误

![在此处输入图像描述](../Images/10919be443581e40b2b478c80e67409c.png)

有没有办法只制作1个DSN文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:34:30.167

请查看此服务器故障问题中的解决方案：

[https://serverfault.com/questions/82007/how-do-i-get-this-sql-server-odbc-connection-working](https://serverfault.com/questions/82007/how-do-i-get-this-sql-server-odbc-connection-working)

# php - HTML / PHP / CSS / jQuery：是否可以将a：悬停在文本或链接的URL上？

> ID：13975452
> 
> 赞同：-3
> 
> 时间：2012-12-20T15:31:41.840
> 
> 标签：php, jquery, html, css

我想是否可以确定悬停的链接。就像如果我悬停[http://google.com/](http://google.com/)一个 div 应该弹出（显示：块）并显示谷歌徽标，如果我悬停 stackoverflow.com 则 stackoverflow 徽标等等......

这可以通过 a:hover 来实现，还是我必须将每个链接都放入它自己的 div 中？

非常感谢，真的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:35:12.610

您可以通过为所有`a`元素分配一个侦听器来做到这一点。

```
$('a').hover(function() {
  var href = $(this).attr('href');
  if (href == 'http://stackoverflow.com') {
    // do your thing
  }
}); 
```

如果您不想进行精确的 url 匹配，您可以向 a 元素添加特殊数据属性并检查它们。

```
<a data-rel = 'stackover' href="http://stackoverflow.com">SO</a>

$('a').hover(function() {
   var rel = $(this).data('rel');
   if (rel == 'stackover') {
     // do your thing
   }
}); 
```

# ajax - 在 AJAX 调用 MVC 操作后发布意外的 GET 请求

> ID：13975453
> 
> 赞同：2
> 
> 时间：2012-12-20T15:31:49.223
> 
> 标签：ajax, asp.net-mvc-3, http, jquery, asp.net-mvc-4

我有一个通过 AJAX 使用 POST 方法调用的操作方法。方法如下所示：

```
[HttpPost]
public ActionResult Save(MyModel model)
{
    /// do something and save
    return new HttpStatusCodeResult(HttpStatusCode.OK);
} 
```

发生的情况是，在 $.ajax 调用此方法后，由于未知原因，后续 GET 请求被发送到相同的控制器和相同的操作。这个调用不是在任何地方进行的，它可能在浏览器或 ASP.NET MVC 中实现为 Post/Redirect/Get 模式，在这种情况下我不需要。

有没有办法以编程方式禁用此功能，因为未实现 Save 方法的 GET 对应项，服务器返回 404，其中包含 HTML 内容。

编辑，这是客户端 AJAX 脚本：

```
function saveDonkey(donkey) {
    var jsonData = JSON.stringify(donkey);
    $.ajax({
        url: "/Donkey/Save",
        data: jsonData,
        contentType: "application/json",
        dataType: "json",
        type: "POST",
        success: function () {
            fetchPage(); /// This just issues GET request to another predefined method
        }
    });
} 
```

# apache-flex - 访问 event.target.incrementButton 上的 currentCSSState 属性

> ID：13975457
> 
> 赞同：0
> 
> 时间：2012-12-20T15:32:08.063
> 
> 标签：apache-flex

我目前正在创建这样的微调器

```
 var scoreSpinner:Spinner = new Spinner();
                scoreSpinner.width = 25;
                scoreSpinner.value = scoreList.getItemAt(index).Score;
                scoreSpinner.minimum = scoreList.getItemAt(index).Minimum;
                scoreSpinner.maximum = scoreList.getItemAt(index).Maximum;
                scoreSpinner.snapInterval = 1;//scoreList.getItemAt(index).Increment;

                if(scoreNameLabel.text == "Disconnect Impact")
                {
                    scoreSpinner.addEventListener(Event.CHANGE, spinnerChange);
                } 
```

在特定的微调器上，我想做自定义递增 (0, 1, 3, 5, 7) 所以我想知道他们何时按下递增按钮以了解增加值的方式

```
 private function spinnerChange(event:Event):void
        {
             if(event.target.incrementButton.currentCSSState.valueOf() == "down")
            {
                if(event.currentTarget.value == 2)
                    event.currentTarget.value = 3;

                if(event.currentTarget.value == 4)
                    event.currentTarget.value = 5;

                if(event.currentTarget.value == 6)
                    event.currentTarget.value = 7;
            }

            if(event.target.incrementButton.currentCSSState.valueOf() == "up")
            {
                if(event.currentTarget.value == 2)
                    event.currentTarget.value = 1;

                if(event.currentTarget.value == 4)
                    event.currentTarget.value = 3;

                if(event.currentTarget.value == 6)
                    event.currentTarget.value = 5;
            } 

        } 
```

运行时出现此错误

```
ReferenceError: Error #1069: Property currentCSSState not found on spark.components.Button and there is no default value.
at lcmp.web.wsc.ui.shared.controls.PreWSC.ProgramScore::ProgramScore/spinnerChange()[C:\TFS\Release Branches\CR13\Flex\Web\WSC\src\lcmp\web\wsc\ui\shared\controls\PreWSC\ProgramScore\ProgramScore.mxml:298]
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at mx.core::UIComponent/dispatchEvent()
at spark.components::Spinner/decrementButton_buttonDownHandler()[E:\dev\4.x\frameworks\projects\spark\src\spark\components\Spinner.as:455]
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at mx.core::UIComponent/dispatchEvent()
at spark.components.supportClasses::ButtonBase/commitProperties()[E:\dev\4.x\frameworks\projects\spark\src\spark\components\supportClasses\ButtonBase.as:745]
at mx.core::UIComponent/validateProperties() 
```

任何人都知道我可以如何使用这个属性，或者只是用微调器来做这件事的更好方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:45:18.133

没有名为“currentCSSState”的此类属性。但是，该`Spinner`控件有一个`stepSize`属性，您可以使用该属性控制单击按钮时微调器增加/减少多少。如果您将 设置`stepSize`为 2，这似乎接近您正在寻找的内容。

如果您想更好地控制微调器如何增加/减少值，您可以覆盖`Spinner`控件的方法`incrementButton_buttonDownHandler()`和`decrementButton_buttonDownHandler()`，这些方法在您单击按钮时执行。

以下是其中一种方法的默认实现：

```
protected function incrementButton_buttonDownHandler(event:Event):void
{
    var prevValue:Number = this.value;
    changeValueByStep(true);
    if (value != prevValue)
        dispatchEvent(new Event("change"));
} 
```

您可以覆盖它以增加`this.value`您的喜好，而不是调用该`changeValueByStep()`方法。你可能想看看那个`changeValueByStep()`方法，这样你就可以看到它在做什么（它尊重最小/最大值，如果你到达终点，让值回到开头，等等）。

# c# - 使用 SetScrollInfo API 滚动

> ID：13975463
> 
> 赞同：1
> 
> 时间：2012-12-20T15:32:40.293
> 
> 标签：c#, winforms, winapi, richtextbox

我正在使用 SetScrollInfo API 在我的richtextbox（winforms）中滚动文本。我有一个计时器，每个刻度我需要滚动一个像素。一切都在较短的文本上完美运行。在较长的文本上，滚动方法滚动超过 1 个像素。我认为这与滚动条的有限部分有关。我怀疑最多有 65536 个零件，但也许我错了。调用 GetScrollInfo() 后 si.nMax = 65535 时出现问题

是否有任何解决方案可以在较长的文本上滚动一个像素？

```
// Scrolls a given textbox. handle: an handle to our textbox. pixels: number of pixels to scroll.
    void scroll(IntPtr handle, int pixels)
    {
        mScrollsCounter++;
        IntPtr ptrLparam = new IntPtr(0);
        IntPtr ptrWparam;
        // Get current scroller posion

        SCROLLINFO si = new SCROLLINFO();
        si.cbSize = (uint)Marshal.SizeOf(si);
        si.fMask = (uint)ScrollInfoMask.SIF_ALL;
        GetScrollInfo(handle, (int)ScrollBarDirection.SB_VERT, ref si);

        // Increase posion by pixles
        if (si.nPos < (si.nMax - si.nPage))
            si.nPos += pixels;
        else
        {
            ptrWparam = new IntPtr(SB_ENDSCROLL);
            t.Enabled = false;
            SendMessage(handle, WM_VSCROLL, ptrWparam, ptrLparam);
        }

        // Reposition scroller
        SetScrollInfo(handle, (int)ScrollBarDirection.SB_VERT, ref si, true);

        // Send a WM_VSCROLL scroll message using SB_THUMBTRACK as wParam
        // SB_THUMBTRACK: low-order word of wParam, si.nPos high-order word of wParam
        ptrWparam = new IntPtr(SB_THUMBTRACK + 0x10000 * si.nPos);
        SendMessage(handle, WM_VSCROLL, ptrWparam, ptrLparam);
    } 
struct SCROLLINFO
        {
            public uint cbSize;
            public uint fMask;
            public int nMin;
            public int nMax;
            public uint nPage;
            public int nPos;
            public int nTrackPos;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:58:11.753

而不是使用编码的像素数`WM_VSCROLL`（您可能将其`scroll()`作为`pixels`参数传递给您的函数），而是使用结构的`nTrackPos`成员`SCROLLINFO`。

# javascript - 是否可以使用 javascript 删除我页面上隐藏的 Zugo Flash 电影

> ID：13975464
> 
> 赞同：0
> 
> 时间：2012-12-20T15:32:42.870
> 
> 标签：javascript, flash, spyware

以下隐藏的 Flash 影片出现在我正在编码的页面上；在我弄清楚如何从我的系统中删除它之前，是否可以使用 javascript 找到它并删除它？它的容器的 id 可能会改变。

```
<div id="SiUnhdqlqHN9t7wB_tbstore_container" 
        style="left:-2000px; top:-2000px; position:absolute;">
    <param name="movie" value="http://tbupdate.zugo.com/ztb/2.5/jsi/man/fc.swf"/>
    <param name="allowScriptAccess" value="always"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:37:48.153

**不要花时间在变通方法上。停止一切并找出发生这种情况的原因，当你找到它时，将其压扁。**

话虽如此，如果我假设`param`元素在其中`div`并且`div`不包含任何其他内容，那么：

```
var list = document.getElementsByTagName('div');
var index;
var div;
for (index = 0; index < list.length; ++index) {
    div = list[index];
    if (div.id.indexOf("store_container") !== -1) {
        div.parentNode.removeChild(div);
        break;
    }
} 
```

或者，如果您使用的是带有 的浏览器`querySelector`，这会容易得多，因为您可以使用以**selector**[结尾的属性](http://www.w3.org/TR/css3-selectors/#attribute-substrings)：

```
var div = document.querySelector("div[id$=store_container");
if (div) {
    div.parentNode.removeChild(div);
} 
```

但同样：**更**重要的是花时间解决实际问题，而不是解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:36:02.377

如果您对 JQuery 持开放态度：

```
$('div').each(function(){
  if ($(this).attr("id").indexOf("_tbstore_container") != -1) {
    $(this).remove();
  }
}); 
```

# linux - 在U-Boot中，dhcp命令可以自动设置serverip环境变量吗？

> ID：13975468
> 
> 赞同：3
> 
> 时间：2012-12-20T15:32:50.037
> 
> 标签：linux, networking, embedded-linux, dhcp, u-boot

在 U-Boot 中，dhcp 命令会自动设置一些环境变量。例如 gatewayip、网络掩码、引导文件和根路径。这些环境变量都对应着DHCP服务器的配置设置。

DHCP 服务器中的哪个配置设置会通知 U-Boot DHCP 客户端设置 serverip 环境变量？

# excel - 数组公式结果连接到单个单元格中

> ID：13975471
> 
> 赞同：2
> 
> 时间：2012-12-20T15:32:58.250
> 
> 标签：excel, vba, formula, user-defined-functions

是否可以从数组公式中获取返回值并将它们连接到单个单元格中？例如，我有一个简单的电子表格，其中包含项目任务的行，如下所示：

```
Task #    Description    Blocked on    Blocking
-----------------------------------------------
1         Task 1         2             
2         Task 2                       $formula
3         Task 3         2 
```

我希望单元格 D3 中的公式返回“1, 3”（在 Blocked On 单元格中放置多个值也很好）。我目前使用以下公式返回“1”：

```
=(INDEX($A2:$A999,MATCH(A3,$C2:$C999,0))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T16:48:51.530

您正在寻找的公式是（在 d3 中）： =IF($C$2:$C$999=$A4;$A$2:$A$999;"") +ctrl+shift+enter

确保将其作为数组输入

（注意：您可能还需要将**;**更改为**，**具体取决于您的区域设置）

如果 C 中的数据与当前 Ai 匹配，这将返回 A 的内容。您现在只能看到一个结果，因为结果是数组，但是如果您使用 Transpose() 并选择同一行中的多个单元格，然后按 F2 然后 ctrl+shift+enter 您将看到一行中的所有结果！例如：选择D3:K3，按F2，写公式：=Transpose(IF($C$2:$C$999=$A4;$A$2:$A$999;""))，按ctrl+shift+enter.. . （您可能需要再次编写：=Transpose(IF($C$2:$C$999=$A4,$A$2:$A$999,""))...）

但是你必须在右边有很多列，因为空结果仍然占据列！即使处理空字符串以不占用任何列，仍然存在未知结果列的问题。因此，我建议使用 VBA 函数（我很久以前写的一个）将有效结果连接到一个单元格中（使用您喜欢的任何分隔符）。

D3中的最终建议公式**： =MyConCat("-";IF($C$2:$C$999=$A2;$A$2:$A$999;""))** +ctrl+shift+enter

和 MyConCat 的代码（放置在 VBA 代码区域的模块中）：

```
' MyConCat
'
' Very simple By Apostolos Goulandris
Function MyConCat(myDelimiter As String, Avar) As String
    Dim b As Variant, Dum As String
    If IsMissing(myDelimiter) Then myDelimiter = ""
    For Each b In Avar
        Dum = IIf(Len(b) > 0, Dum & myDelimiter & b, Dum)
    Next
    MyConCat = IIf(Len(myDelimiter) > 0, Mid(Dum, Len(myDelimiter) + 1, Len(Dum)), Dum)
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-09T06:01:22.740

在单元格 D3 中尝试此操作。输入为数组公式 Ctrl + Shift + Enter。

```
=IFERROR(LEFT(SUBSTITUTE(CONCAT(IF(A3=C2:C4,A2:A4)&"-"),"FALSE-",""),LEN(SUBSTITUTE(CONCAT(IF(A3=C2:C4,A2:A4)&"-"),"FALSE-",""))-1),"") 
```

# wpf - 将 View 添加到 ItemsControl 区域的顶部

> ID：13975472
> 
> 赞同：1
> 
> 时间：2012-12-20T15:33:02.923
> 
> 标签：wpf, mvvm, prism, itemscontrol

我在复合 Prism MVVM 应用程序中有一个 ItemsControl 区域

```
<ItemsControl Regions:RegionManager.RegionName="NotificationRegion" AllowDrop="True" ClipToBounds="True" HorizontalAlignment="Right" Margin="0,40,20,20" Width="280" /> 
```

现在我想在该区域显示我的 NotificationViews，如下所示： ![在此处输入图像描述](../Images/568984d08eaa14e378da50107967c4f5.png)

我只需导航到视图并将它们添加到我的 ItemsControl 区域。但问题是新视图总是添加到底部。我真的希望新视图显示在顶部。有什么办法可以做到这一点？非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:16:23.673

我想你会发现这有帮助：[Sorting views in Prism/MEF](https://stackoverflow.com/questions/4256883/how-to-sort-views-in-an-itemscontrol-in-prism-mef)

基本上：

```
public MainView( ) 
    {
        InitializeComponent( );

        ObservableObject<IRegion> observableRegion = RegionManager.GetObservableRegion( ContentHost );

        observableRegion.PropertyChanged += ( sender, args ) =>
        {
            IRegion region = ( (ObservableObject<IRegion>)sender ).Value;
            region.SortComparison = CompareViews;
        };
    }

    private static int CompareViews( object x, object y )
    {
        IPositionView positionX = x as IPositionView;
        IPositionView positionY = y as IPositionView;
        if ( positionX != null && positionY != null )
        {
            //Position is a freely choosable integer
            return Comparer<int>.Default.Compare( positionX.Position, positionY.Position );
        }
        else if ( positionX != null )
        {
            //x is a PositionView, so we favour it here
            return -1;
        }
        else if ( positionY != null )
        {
            //y is a PositionView, so we favour it here
            return 1;
        }
        else
        {
            //both are no PositionViews, so we use string comparison here
            return String.Compare( x.ToString( ), y.ToString( ) );
        }
    } 
```

您会注意到该区域有一个 SortComparison 属性。您只需为首先订购最新视图的区域创建一个自定义 SortComparison。

# java - 激活失败 - 适用于 Netbeans 的诺基亚 SDK

> ID：13975473
> 
> 赞同：0
> 
> 时间：2012-12-20T15:33:03.263
> 
> 标签：java, netbeans, nokia-s40

我正在尝试为 Netbeans 安装诺基亚 SDK 套件。按照[此](http://www.developer.nokia.com/Develop/Java/Getting_started/NetBeans/)过程，我转到工具并选择插件并安装名为 JAVA ME SDK 的插件。在激活它时，我收到以下错误，

> 激活失败：并非所有请求的模块都可以启用：[StandardModule:org.netbeans.modules.javame.kit jarFile: C:\Users\Fahad.netbeans\7.1\modules\org-netbeans-modules-javame-kit.jar]

请帮我解决它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:45:37.587

如果您使用的是 Windows 7，请尝试从用户文件夹中安装所有内容。Windows 的权限必须影响您的 sdk 或应用程序

# c# - C# Do-Loop 不向字符串添加字符

> ID：13975474
> 
> 赞同：6
> 
> 时间：2012-12-20T15:33:07.127
> 
> 标签：c#

好的，我有这个`Player.Character`字符串`"Average Man{[Attributes (Mind 10) (Body 10) (Soul 10)]}"`。

而且我设置了这个 do-loop，以便它应该一次通过这个字符串 1 个字符，并`"["`在将它检查的每个字符添加到另一个字符串时查看它是否为 this `ContainerName`。事情是 ContainerName 里面只有这个，`"["`我希望它应该有`"Average Man{"`.

如果有人可以帮助我理解为什么会发生这种情况，并且可能是我成熟的头脑可以处理的解决方案，我将是最亲切的。

哦，这是我的代码。

```
int count = -1;

string ContainerName = "";

//Finds Start of container
do
{
    count = count + 1;
    ContainerName = ContainerName + Player.Character[count].ToString();
} while (Player.Character[count].ToString() != "[" && 
         Player.Character.Length - 1 > count);

textBox1.Text = ContainerName; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:39:44.877

我假设 Character 是 Player 的字符串属性，`[`如果字符串不存在，您希望字符串最多为第一个或整个字符串。

```
StringBuilder sb = new StringBuilder();
foreach (char c in Player.Character)
{
    if (c == '[')
        break;
    sb.Append(c);
}
textBox1.Text = sb.ToString(); 
```

或者

```
var i = Player.Character.IndexOf('[');
textBox1.Text = i >= 0 ? Player.Character.Substring(0, i) : Player.Character; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:46:04.757

您的代码工作正常（我刚刚测试过）。ContainerName 的值为“Average Man{[”。Player.Charecter 可能没有正确的值。我用 Player.Charecter = "Average Man{[Attributes (Mind 10) (Body 10) (Soul 10)]}"

一个更优雅的解决方案是

```
TextBox1.Text = Player.Character.Substring(0, Player.Character.IndexOf('[')) 
```

# css - CSS 全局 :nth-of-type 选择器 (:nth-of-class)

> ID：13975475
> 
> 赞同：1
> 
> 时间：2012-12-20T15:33:08.647
> 
> 标签：css, css-selectors

什么 CSS 选择器可用于选择父元素中的所有奇数元素，但不一定是兄弟元素？

```
<div id="parent">
    <div>
        <div class="element">A</div>            
    </div>
    <div class="element">A</div>   
    <div class="element">A</div>         
    <div>
        <div class="element">A</div>            
    </div>
    <div class="element">A</div>            
<div> 
```

我想要的是选择每个`element`in`parent`并仅为此列表中的奇数索引应用样式。

[jsFiddle 上的演示。](http://jsfiddle.net/hP7vk/)

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:54:00.990

虽然它使用 JavaScript，但您可以在不更改标记的情况下设置奇数元素的样式：

```
$('.parent .element:odd').css('font-weight', 'bold'); 
```

[​http://jsfiddle.net/ansonhoyt/MfxYF/](http://jsfiddle.net/ansonhoyt/MfxYF/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T16:15:04.767

我无法将其归结为单个选择器，但是有两个...

```
.parent > .element:nth-of-type(2n){
  background:#afa !important;
}
.parent > div:nth-of-type(2n) > .element {
  background:#afa !important;
} 
```

[在 JSFiddle 上查看](http://jsfiddle.net/skNfL/)

# android - 如何获取有用的崩溃日志信息 Android Cocos2dx C++

> ID：13975476
> 
> 赞同：1
> 
> 时间：2012-12-20T15:33:13.870
> 
> 标签：android, c++, cocos2d-x, crash-dumps, android-logcat

我正在使用 c++、java 在 cocos2dx android 中工作。我的设备崩溃了，查看了 logcat 并找到了附加的内容。崩溃日志根本没有给我任何有用的信息。我在不同的设备上进行了尝试，发现有些设备会向我抛出有用的崩溃日志，而有些设备则不会。此日志是 Galaxy SII 日志。有人可以帮助我如何翻译此日志或获取一些有用的崩溃日志吗？

注意：在 C++ 中特别发生的崩溃会面临此类问题。我正在使用 MacOS Eclipse。

您也可以在此处找到此日志

[崩溃日志](https://docs.google.com/a/gaminations.com/document/d/1_1IIBF7wiiK0BykfXEX2mNnbRBXo4UIvDBO61DLlHpQ/edit)

![在此处输入图像描述](../Images/3d8a72ba284707060c768a973d707521.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T03:56:43.233

首先，最好在 cocos2d-x/c++ 中使用 CCLog/Printf Everywhere 作为我最喜欢的调试方式。

其次，使用 ADT 21 和提供本机调试的本机开发更新您的 Eclipse。完成这些设置后，只需使用 Android Native 调试来调试您的应用程序，这让您的生活更轻松，就像您在 Xcode 中一样

第三，如果你正在制作跨平台，那么你肯定会有相同的 iOS 或 Windows 项目。所以只需在 Xcode/Visual Studio 中检查你的核心游戏代码。一旦它在那里正常工作，你就可以来到 android 我的意思是 eclipse然后交叉检查您将能够轻松发现问题

最后，首选 eclipse 是最后一个选项，因为它有很多错误，而且 android 需要 JNI 类，这使得崩溃更难找到......我更喜欢 Visual Studio，因为即使变量不是 NULL，它也会崩溃，而 android 需要它全部......这是所有平台中字符串的主要区别....

而且，如果您可以添加您的日志，那么我可能会为您提供更多帮助...

# c# - switch 语句中的变量初始化问题

> ID：13975481
> 
> 赞同：6
> 
> 时间：2012-12-20T15:33:28.050
> 
> 标签：c#, .net, language-agnostic, switch-statement

我所拥有的是简单的 switch 语句

```
Control myControl;
switch(x)
{
     case TabType.Edit:
     {
         myControl= ...;
     }

     case TabType.View:
     {

         myControl= ...;
     }
 }

 myPageView.Controls.Add(myControl); 
```

在这种情况下，编译器告诉我

> 局部变量 myControl 在访问之前可能未初始化

**那么，避免这种情况的最佳方法是什么？**

一种选择是在 switch 语句之前初始化 myControl。但在这种情况下，我又做了一次不必要的初始化。

*情况1：*

```
Control myControl = null;
switch(x)
{
     case TabType.Edit:
     {
         myControl= ...;
     }

     case TabType.View:
     {

         myControl= ...;
     }
 }

 myPageView.Controls.Add(myControl); 
```

下一个选项是用 更改第二种情况`default`。之后编译器将“理解” myControl 无论如何都会被初始化并且不会抛出异常。

*案例二：*

```
Control myControl;
switch(x)
{
     case TabType.Edit:
     {
         myControl= ...;
     }

     default:
     {

         myControl= ...;
     }
 }

 myPageView.Controls.Add(myControl); 
```

但是这种情况看起来不太好，因为在我的枚举中添加了一些新属性后，它将默认为所有其他类型（开发人员很容易忘记在这里更改代码，或者不需要为其他枚举类型初始化 myControl） .

在这种情况下最好的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T15:40:03.487

您的代码示例表明您将始终`myControl`在 switch 块之后使用该变量。如果是这种情况，那么您应该预先初始化变量，或者添加一个`default`子句（如您所述）。

如果您担心可能会引入新的枚举值，那么您可以在`default`子句中抛出一个有意义的异常。`NullReferenceException`当您稍后尝试取消引用该变量时，这将保护您不会变得更加模棱两可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T15:38:20.093

第三个选项：在继续之前验证一个实例是否已创建（而不是依赖于它被分配）：

```
Control mycontrol = null;
switch (x){
  // ...
}
if (myControl != null){
  // add to controls list, manipulate, etc.
} 
```

您还可以将`default:`失败案例添加到`default(TabType)`值中：

```
switch (x){
  case TabType.Two:
    // ...
  case TabType.Three:
    // ...
  case TabType.One:
  default:
    // ..
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T15:39:42.187

我认为这`default`是专门针对这些情况而存在的。

*向我的枚举添加一些新属性，它将默认为所有其他类型*

它将允许您的代码在默认前提下工作（抛出异常或设置为众所周知的值），因此您的代码也适用于以前未计划的情况。

当然，当您实现新属性并期望代码有不同的行为时，忽略更新此开关将是一个容易发现的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T15:48:09.387

> 我再做一次不必要的初始化

我也不喜欢那样。

就像许多人已经说过的那样，在您的陈述中添加一个额外的`default:`部分。`switch`像这样：

```
Control myControl;
switch(x)
{
  case TabType.Edit:
    myControl= ...;
    break;

  case TabType.View:
    myControl= ...;
    break;

  default:
    throw new Exception("Unexpected value of x: " + x);        
 }

 myPageView.Controls.Add(myControl); 
```

这是因为从您的问题中，我们了解到您*知道*这`x`将始终具有这两个值之一。编译器不知道这一点。上面的代码会告诉它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T15:39:55.410

您必须执行以下两个选项之一；要么在 之前指定初始值`switch`，要么添加一个`default`案例，以便编译器确定`switch`将初始化变量。

我建议如果开关没有初始化变量，你可能只想抛出一个异常。在这种情况下，只需将该代码添加到`default`案例中。这样，当开发人员忘记`case`为新的枚举值添加时，测试中就很清楚了，而不是默默地不工作。

# c++ - 这个 boost::tuple 代码可以转换为纯 std:: 标准库代码吗？

> ID：13975489
> 
> 赞同：3
> 
> 时间：2012-12-20T15:33:47.243
> 
> 标签：c++, boost, stl, c++11, std

*下面的 boost 代码是否可以转换为纯 c++11 标准库？*

我明白了`std::tuple`，`std::for_each`但我似乎无法让他们互相玩耍。

我目前正在使用 gcc 4.7.2。

**代码**

```
#include <string>
#include <algorithm>
#include <iostream>

#include <boost/fusion/algorithm/iteration/for_each.hpp>
#include <boost/fusion/include/boost_tuple.hpp>

struct DoOutput
{
    template<typename T>
    void operator()(T const& t) const
    {
            std::cerr << t << std::endl;
    }

    void operator()(std::string const& t) const
    {
            std::cerr << "'" << t << "'" << std::endl;
    }
};

int
main( int argc, char* argv[] )
{
    boost::tuple< std::string, int > t = boost::make_tuple( "foo", 42 );
    boost::fusion::for_each( t, DoOutput() );

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:42:10.367

不，代码不能直接转换。

Boost.Fusion 是一个用于处理元组的库，因此它`for_each`可以处理元组，即具有零个或多个异构类型的结构。 `std::for_each`与迭代器范围一起使用，它是同类类型的值范围。

使用[index_tuple.h](http://gitorious.org/redistd/redistd/blobs/master/include/redi/index_tuple.h)之类的内容，您可以将其更改为：

```
struct sink {
  template<typename... T>
    sink(T&&...) { }
};

template<typename T, typename F>
  int apply(T&& t, F& f)
  {
    f(std::forward<T>(t));
    return 0;
  }

template<typename Tuple, typename F, unsigned... Indices>
  void apply(Tuple&& t, F&& f, index_tuple<Indices...>)
  {
    sink{ apply(std::get<Indices>(std::forward<Tuple>(t)), f)... };
  }

int main()
{
  std::tuple< std::string, int > t = std::make_tuple( "foo", 42 );
  apply(t, DoOutput(), make_index_tuple<std::tuple_size<decltype(t)>::value>::type() );
} 
```

这将创建一个 type`index_tuple<0,1>`和 calls `apply`，它将参数包推导出`Indices`为`{0, 1}`，然后将该包扩展为：

```
sink{ apply(std::get<0>(t), f), apply(std::get<1>(t), f) }; 
```

where`f`是一个类型的函数对象`DoOutput`，并且每个 apply 调用`f(tn)`

仅需要初始化临时变量`sink`，因为您无法在表达式中扩展参数包，例如这是无效的：

```
 f(std::get<Indices>(t))...; 
```

因此，包被扩展为对象构造函数的初始值设定项列表，这也保证了包扩展的每个元素都按顺序求值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:43:34.853

不，C++11 标准库不包括`boost::fusion`. 您可以期望的最好的结果是适应与以下`std::tuple`人员一起工作`boost::fusion`：

```
#include <string>
#include <algorithm>
#include <iostream>

#include <tuple>

#include <boost/fusion/algorithm/iteration/for_each.hpp>
#include <boost/fusion/adapted/std_tuple.hpp> //This feature is undocumented

struct DoOutput
{
    template<typename T>
    void operator()(T const& t) const
    {
            std::cerr << t << std::endl;
    }

    void operator()(std::string const& t) const
    {
            std::cerr << "'" << t << "'" << std::endl;
    }
};

int
main( int argc, char* argv[] )
{
    std::tuple< std::string, int > t = std::make_tuple( "foo", 42 );
    boost::fusion::for_each( t, DoOutput() );

    return 0;
} 
```

# awk - 使用 awk 基于日期和时间范围对多个日志文件进行日志文件搜索

> ID：13975493
> 
> 赞同：2
> 
> 时间：2012-12-20T15:34:03.280
> 
> 标签：awk

我的日志文件分布在各种日志文件上（基本上它们被设置为轮换日志）。我需要根据日期和时间提取日志。示例日志文件具有以下内容。

```
2012.12.06 01:56:01 AUTH_SERVER.VMP_SYS [main - ] <INFO   > Loaded properties
2012.12.06 01:56:01 AUTH_SERVER.VMP_SYS [main - ] <INFO   > Initialized logging
2012.12.06 01:56:01 AUTH_SERVER.VMP_SYS [main - ] <CONFIG > Log levels = 
```

我已经尝试过使用下面的 awk 一个班轮......

```
awk -F - '"2012.12.06 01:56:01" < $1 && $1 <= "2012.12.08 04:30:00"' server.log   server.log.1 
```

这打印出需要什么...

但想使用 for 循环来运行使用此在 txt 文件中提取的日志文件名列表

```
find server.log* -exec ls -lth {} \; | awk '{print $9}' > logfilenames.txt 
```

我需要使用 logfilenames 内容（这具有该目录中日志文件的完整路径）作为 for 循环中的输入，以搜索从开始日期时间到结束日期时间的正确日志文件名并将其输出到不同的文件。

需要 for 循环的帮助来完成此脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:43:44.863

为什么不做

`awk -F - '"2012.12.06 01:56:01" < $1 && $1 <= "2012.12.08 04:30:00"' server.log*`

还，

```
cat `cat logfilenames.txt` 
```

将 cat 包含在 logfilenames.txt 中的所有文件。您可以在输出上运行 awk。

您还可以使用 xargs 并将 grep 的输出重定向到 awk。因此，要使用您提供的两个命令，您可以执行以下操作：

```
find server.log* -exec ls -lth {} \; | awk '{print $9}' | xargs awk -F - '"2012.12.06 01:56:01" < $1 && $1 <= "2012.12.08 04:30:00"' 
```

# vba - VBA：我收到以下错误：运行时错误“1004”应用程序定义或对象定义错误

> ID：13975496
> 
> 赞同：0
> 
> 时间：2012-12-20T15:34:07.957
> 
> 标签：vba, excel, runtime-error

**当前的问题：**

我的代码曾经部分工作，直到我向 sheet2 添加额外数据，现在当它失败并调试时将我发送到：

```
Set partsheet = Worksheets("Sheet1").Range("A1", Range("A65536").End(xlUp)) 
```

**此代码的实用程序：**

我基本上在不同的工作表中有两列：我想比较 & 当类似的导入数据：

Sheet1 - column1 是作业编号

Sheet1 - column2 是零件号

对于相同的作业编号，您可以有多个部分 - 这意味着作业编号在第 1 列中重复出现

Sheet2 - column1 与 sheet1 的作业编号相同，但数据从不重复

Sheet2 - column2 是特定于每个作业编号的 ID 号（因此为什么在这种情况下作业编号不会重复）

因此，我想使用公共作业编号作为参考点从 Sheet2 - column2 导入数据。当我将数据导入 Sheet1 - column3 时，唯一的 ID 号将不得不重复 column1(sheet1) 中重复的作业编号 - 因此是双 for 循环。

**我所说的用于部分工作的意思是：**

从代码仅部分工作开始，我认为这是因为 sheet1 - column1 中的某些作业编号在 sheet2 - column1 中没有相应的值（数据不完美）。也许我需要为 if 语句的 else 部分添加代码，但我不确定是什么。

**vba 代码：**

```
Option Explicit

Sub testFil()
    Dim Jobref_in_partsheet As Range
    Dim Jobref_in_jobsheet As Range
    Dim partsheet As Range
    Dim jobsheet As Range
    Dim MyRow As Long
    Dim MyOtherRow As Long

    Set partsheet = Worksheets("Sheet1").Range("A1", Range("A65536").End(xlUp))
    Set jobsheet  = Worksheets("Sheet2").Range("A1", Range("A65536").End(xlUp))

    For Each Jobref_in_partsheet In partsheet
        For Each Jobref_in_jobsheet In jobsheet
            If Jobref_in_partsheet.Value = Jobref_in_jobsheet.Value Then
                MyRow = Jobref_in_partsheet.Row
                MyOtherRow = Jobref_in_jobsheet.Row
                Worksheets("Sheet1").Cells(MyRow, 3) = Worksheets("Sheet2").Cells(MyOtherRow, 2)
            Else
                 'Do nothing
            End If
        Next
    Next
End Sub 
```

我真的很感激我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:46:39.433

答案更新：

我认为这可能更容易使用 =VLOOKUP 来完成，这只是一个普通的 excel 函数。基本上，您需要将此公式应用于 Sheet1 C 行中的每个单元格。

```
'Psudeo Code
=VLOOKUP([look up value] A1, [range to look in] Sheet2!A:B, [row to return] 2, [use exact match] false) 
```

在使用 VLOOKUP 之前，您需要阅读它，但希望我的一点伪代码可以告诉您，您是否可以将它实际用于您的目的。如果您像我说的那样实现它，那么基本上它将使用第一个值（A1）来查找另一个范围（A：B 的第一列）中的某些内容。如果找到匹配项，它将返回第二列中的内容（因此是 2，因此是 A:B 的 B 列）。False 只是告诉程序你不想要相似的匹配，你只想要完全相同的匹配。

是的，VLOOKUP 令人困惑，因为所有人都出去了，但它非常有用。

这将比使用 VBA 完成相同的任务容易得多。我想这可能会或可能不会真正回答您的问题，但我想我会提出它，以防您没有考虑到它。

老了，错了，回答：

在创建范围时，我倾向于确保将所有内容都转换为字符串。例如：

```
Set partsheet = Worksheets("Sheet1").Range("B1:" & Range("B65536").End(xlUp).Address) 
```

Range("B65536").End(xlUp).Address 将返回表示该列顶部地址的字符串。例如，如果顶部是“B31”，那么“B1:”和 Range(“B65536”).End(xlUp).Address 应该返回“B1:B31”作为范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:07:34.133

```
Worksheets("Sheet1").Range("A1", Range("A65536").End(xlUp)) 
```

这里有一个问题：您正在尝试创建一个`Range`对象，该对象的第一个单元格`A1`属于`Sheet1`，最后一个单元格是`A`活动工作表中列中使用的最后一个单元格。您可以猜到，`Sheet1`活动工作表可以是不同的工作表，并且您不能创建属于多个工作表的范围。

您应该为最后一个单元格明确提供父表：

```
Worksheets("Sheet1").Range("A1", Worksheets("Sheet1").Range("A65536").End(xlUp)) 
```

[使用`.Address`](https://stackoverflow.com/a/13975716/11683)并不是真正的解决方法，因为它可能会导致从一张表中提取的地址用于另一张表。

# php - 更改产品的 Magento page_layout 属性？

> ID：13975503
> 
> 赞同：0
> 
> 时间：2012-12-20T15:34:38.347
> 
> 标签：php, database, magento, e-commerce

我有一个 Magento 商店，里面有几千种产品，其中一部分的“page_layout”属性设置为“无更新”以外的属性。即使在 catalog.xml 中布局设置为 1 列，显示的布局也对应于“page_layout”属性上的值。

我想一次以编程方式更改每个产品的此属性。到目前为止，我很幸运地为这样的产品获得了此属性的值：

```
$attributes = $product->getAttributes();

foreach ($attributes as $attribute) {
    $attributeCode = $attribute->getAttributeCode();
    $code = 'page_layout';

    if ($attributeCode == $code) 
    {
        $label = $attribute->getStoreLabel($product);
        $value = $attribute->getFrontend()->getValue($product);
        echo $attributeCode . '-' . $label . '-' . $value;
    }
} 
```

现在我已经缩小了正确的属性，我想设置它。到目前为止，我运气不佳，对此有什么经验吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:45:07.063

你试过 $product->setPageLayout(null); 编辑：当然，之后是 $product->save()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:08:29.880

股票 magento 实例中 page_layout 的可能值为：

*   空值
*   空的
*   two_columns_left
*   two_columns_right
*   三列

以“two_columns_left”为例，将此值设置为站点中的每个产品：

```
$pageLayout = 'two_columns_left';
$productCollection = Mage::getModel('catalog/product')->getCollection()
    ->addAttributeToSelect('*')
    ->setDataToAll('page_layout', $pageLayout)
    ->save()
; 
```

由于您有这么多产品，这很可能需要一段时间才能运行。为了加快速度，您可以更改索引模式。通过管理员或直接在您的代码中：

```
$processCollection = Mage::getSingleton('index/indexer')->getProcessesCollection();
foreach ($processCollection as $process) {
    $process->setMode(Mage_Index_Model_Process::MODE_MANUAL)
        ->save();
} 
```

改回后记：

```
$process->setMode(Mage_Index_Model_Process::MODE_REAL_TIME)
    ->save(); 
```

# collections - 为什么这会触发 Backbone Collection 上的“更改”事件？

> ID：13975506
> 
> 赞同：4
> 
> 时间：2012-12-20T15:35:03.000
> 
> 标签：collections, backbone.js, backbone-events

为什么这会触发 Backbone Collection 上的“更改”事件？

### data.json 文件：

```
[
    {
        "id": 1,
        "name": "Alex",
        "comments": [
            {
                "id":5
            }
        ]
    },
    {
        "id": 2,
        "name": "Tom",
        "comments": []
    }
] 
```

### 模型数据：

```
data = [
    {
        id: 1,
        name: "Alex",
        comments: [
            {
                id:5
            }
        ]
    },
    {
        id: 2,
        name: "Tom",
        comments: []
    }
]

var Model = Backbone.Model.extend({
    initialize: function () {
        console.log('init model');
    }
});

var View = Backbone.View.extend({
    initialize: function () {
        console.log('init view');
    }
});

var Collection = Backbone.Collection.extend({
    model: Model,
    url: "data.json",

    initialize: function () {
        console.log('init collection');
    }
}); 
```

### 向模型添加数据：

```
var collection = new Collection(data);

collection.on('change', function () {
    console.log('change');
}) 
```

### 拿来：

```
 collection.fetch({
        update: true,
        merge: true
    }) 
```

获取后，我们在控制台中看到“更改”。

请帮我。我必须使用这个事件，但如果数据没有改变，我不想在“评论”上触发事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:04:45.840

收到来自 的响应后`collection.fetch()`，Backbone 会遍历响应中的每个模型并检查它是否已经在本地集合中。如果是，那么它会遍历响应模型的每个属性，并检查本地模型是否具有相同的属性以及是否相等。

这一切都很好，很花哨，但是，正如你所预料的那样，两个数组在 JavaScript 中不会相等：

```
[] === [] // false 
```

因此，当 Backbone 获取`comments`响应的属性时，尽管来自响应的值和本地的值看起来相等，但它们并不相等（根据 JavaScript）。Backbone 认为这是一种差异并触发了一个`change`事件。

# api - 使用简单的 Web 令牌访问 Rest API

> ID：13975512
> 
> 赞同：0
> 
> 时间：2012-12-20T15:35:24.013
> 
> 标签：api, rest, asp.net-mvc-4, thinktecture-ident-model

我已经使用 Asp.Net Web.Api 编写了 REST api。

它使用 ThinkTecture 的 Identity Server 进行保护。

我编写了一个简单的控制台客户端，允许用户输入用户名和密码。然后客户端使用这些凭据向身份服务器进行身份验证，成功获取令牌，将令牌传递给我的 rest api，由 api 进行身份验证，然后从 api 获取它的数据。

现在我已经编写了一个使用 api 的 MVC 站点。我不确定的是，如果我没有用户名和密码来获取令牌，我如何查询 api？我显然不希望用户每次我想调用 api 时都登录。我可以做一些类似于设置 auth cookie 的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:49:41.570

是的，您需要在客户端中缓存令牌并在代表客户端发出请求时重新使用它。

# android - getReadableDatabase()、native_setLocale、SQLiteOpenHelper 中的 Android SQLiteDiskIOException

> ID：13975513
> 
> 赞同：2
> 
> 时间：2012-12-20T15:35:25.527
> 
> 标签：android, sqlite, exception, sqliteopenhelper, setlocale

最近我遇到了一个与使用 SQLiteOpenHelper 相关的问题。很少有用户报告我无法重现的错误：

```
android.database.sqlite.SQLiteDiskIOException: disk I/O error
at android.database.sqlite.SQLiteDatabase.native_setLocale(Native Method)
at android.database.sqlite.SQLiteDatabase.setLocale(SQLiteDatabase.java:1987)
at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1855)
at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:820)
at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:197) 
```

我的实现是：

```
public class SqliteDatabase extends SQLiteOpenHelper
{
    public SqliteDatabase(Context context, String dbName, int dbVersion)
    {
        super(context, dbName, null, dbVersion);
        this.context = context;
        this.dbName = dbName;
        this.dbVersion = dbVersion;
    }
    (...)
} 
```

所以这里没什么特别的。在调用 getReadableDatabase() 后抛出异常，在堆栈中可见。

请注意，这个类被许多线程访问，但访问是完全同步的（锁+只有一个，同一个类实例）。应用程序可以移动到 sdcard（也许这就是问题？）。

不幸的是，我不知道问题发生在哪个设备/Android 版本上（平台：Google Play 控制台中的其他），但在进行了一些谷歌搜索后，我怀疑它是 Android v2.2.1。

有任何想法吗？我知道这个问题不太常见，但我还没有找到任何解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:07:18.883

1.  这种类型的错误主要发生在您同时执行两个操作时。
2.  当您错误地关闭或打开数据库时。例如，当关闭数据库然后触发查询时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:08:47.853

> **SQLiteDiskIOException**与同时对数据库的多次访问有关，一个线程尝试获取数据，而另一个线程同时尝试插入数据。

但有时，如果您收到“磁盘 I/O 错误”，则使用以下 DB_PATH 似乎可以解决问题：

> Environment.getDataDirectory() + "/data/YOUR_APP_PACKAGE/databases/";

阅读： [数据库处理停止在 Android 2.2.1 上运行（Desire HD 1.72.405.3）](https://stackoverflow.com/questions/4651797/database-handling-stoped-working-on-android-2-2-1-desire-hd-1-72-405-3/4828540#4828540)

# php - 带有属性的正则表达式

> ID：13975515
> 
> 赞同：4
> 
> 时间：2012-12-20T15:35:30.990
> 
> 标签：php, regex, parsing, attributes, preg-match-all

我想解析这种代码：

```
{articles mode="extrait" nb="3"} 
```

我正在使用这个正则表达式：

```
@\{(articles)(?:(?:\s|\&nbsp;)*(?:(\w+)="(\w+)"))*\}@ 
```

但这不起作用，当我执行 preg_match_all 时，这是带有 $matches 参数的 print_r 的结果：

```
Array (
    [0] => {articles mode="extraits" nb="3"}
    [1] => articles
    [2] => nb
    [3] => 3
) 
```

我认为最后一个 * 应该可以获取所有属性，而不仅仅是最后一个。

您是否看到缺少或不正确的内容？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:36:43.120

```
$instances = array();

@ preg_match_all( '/\{articles([^\}]+)\}/', $string, $articles );

if ( false === empty( $articles[1][0] ))
{
   foreach ( $articles[1] as $article )
   {
      @ preg_match_all( '/\b(\w+)="([^"]+)"/', $article, $arguments );

      if ( false === empty( $arguments[0][0] ))
      {
         $settings = array();

         foreach ( $arguments[0] as $index => $argument )
         {
            $settings[$arguments[1][$index]] = $arguments[2][$index];
         }

         $instances[] = $settings;
      }

      unset( $arguments );
   }
}

print_r( $instances ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:50:08.210

正如@nickb 已经评论的那样，重复捕获组仅保留其最后一场比赛。AFAIK，只有 .NET 提供了保留所有匹配项的实现。所以，我同意@m.buettner 的观点，即您必须至少使用两个匹配项。而@IngmardeLange 的解决方案似乎是一种替代实现，虽然我没有检查过，但仍然使用至少两个匹配项。

为了好玩，我设计了一种使用单个匹配的方法。最初的想法是对`@{article`部件使用lookbehinds，但不支持可变长度lookbehinds。然后，（不幸的是，正如您将要见证的那样）我记得@TimPietzcker 曾经提到过实现可变长度后视的技巧：在反向字符串上进行可变长度*前瞻。*（请不要真正使用这种方法。）

```
<?php

    function get_attr_val_matches($tag, $subject)
    {
        $regex = '/"(\w+)"=(\w+)\s+(?=(?:"\w+"=\w+\s+)*' . strrev($tag) . '\{@)/';
        preg_match_all($regex, strrev($subject), $matches, PREG_SET_ORDER);

        foreach ($matches as &$match)
        {
            $match = array_map(strrev, $match);
            $match = array($match[0], array_reverse(array_slice($match, 1)));
        }

        return array_reverse($matches);
    }

    $tag = 'articles';
    $subject = '@{articles mode="extrait" nb="3"}';

    print_r(get_attr_val_matches($tag, $subject));

?> 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] =>  mode="extrait"
            [1] => Array
                (
                    [0] => mode
                    [1] => extrait
                )
        )

    [1] => Array
        (
            [0] =>  nb="3"
            [1] => Array
                (
                    [0] => nb
                    [1] => 3
                )
        )
) 
```

[这是一个正在运行的示例。](http://ideone.com/ECUlgG)

很明显，如果我还没有充分否认这一点，那么所有的逆转成本都不仅仅是做两场比赛。但是也许有一个应用程序可以将具有可变长度后视的表达式一般转换为如上所述的反向前瞻，然后返回。虽然可能不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T17:20:59.773

感谢您的回答，即使我几乎不明白一些事情。

我找到了另一种更容易但仅限于 2 个参数的方法（我暂时不需要更多参数）：

```
@\{(articles)((\s)(\w+)="(\w+)")?((\s)(\w+)="(\w+)")?\}@

Array 
( 
[0] => {articles nb="2" mode="extrait"} 
[1] => articles 
[2] => nb="2" 
[3] => 
[4] => nb 
[5] => 2 
[6] => mode="extrait" 
[7] => 
[8] => mode 
[9] => extrait 
) 
```

然后我做类似的事情：

```
if($key = array_search('mode', $option)) $mode = $option[$key + 1];

if($mode == 'extrait')
{
    // my stuff here
} 
```

再次感谢您的所有回答！

# actionscript-3 - 使用 MXMLC 编译 Flex 文件时出现 JSON 错误

> ID：13975517
> 
> 赞同：0
> 
> 时间：2012-12-20T15:35:48.100
> 
> 标签：actionscript-3, apache-flex, flex4.5, mxml, mxmlc

我有一个使用 Flash Builder 和 Flex 4.1 SDK 创建的文件，该文件在 Flash Builder 4.5.1 中编译良好，但无法使用命令行 MXMLC 编译（通过 SublimeText 2 构建系统文件运行）。它不喜欢这一行：

`var dataString:String = JSON.encode(packagedData);`

有错误

`Error: Access of undefined property JSON.`

我意识到错误的含义，但是为什么在 Builder 中工作而不是在命令行中工作？如果我以这种方式构建它，是否需要包含一个库？

# ssl - 如何验证证书确实是 DER 格式？

> ID：13975520
> 
> 赞同：10
> 
> 时间：2012-12-20T15:35:53.283
> 
> 标签：ssl, der

DER 是否有某种数字签名，在十六进制编辑器中会很明显？

我收到了一个二进制内容约为 1.3 KB 的 .cer 文件。我被告知它是 DER 格式，我的阅读表明具有此扩展名的证书几乎都是 DER 或带有人类可读标头的 base-64 编码的 DER，而该文件没有这样的标头。但是，我无法打开它来创建密钥。在我投入过多时间对该文件进行故障排除之前，我想确定它确实是 DER 格式。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-20T15:46:16.393

用 OpenSSL 试试这个：

```
openssl x509 -text -noout -inform DER -in the_file_name.cer 
```

如果您需要转换它，您可以使用它，例如：

```
openssl x509 -inform DER -in the_file_name.cer -outform PEM -out the_file_name.pem 
```

# xml - 使用 JAXP API 运行已编译的 Saxon 样式表

> ID：13975525
> 
> 赞同：3
> 
> 时间：2012-12-20T15:36:08.273
> 
> 标签：xml, xslt, saxon, jaxp, compiled

我有一个用这个撒克逊命令创建的编译样式表：

java net.sf.saxon.Compile [选项] 样式表输出 [参数…]

我现在想将此样式表应用到我的 Java 代码中的 XML 树。是否可以使用 JAXP API 来做到这一点，如果可以，具体如何？非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T22:50:55.217

首先，请注意，该设施并不总是能满足人们的需求。有很多限制——你可以在你的样式表中做一些阻止它被编译的事情。许多人在使用此功能时的性能预期并未得到满足。因此，在 Saxon 9.4 中，我们完全撤回了它。

运行已编译的样式表时，最大的限制是它不能与其他任何东西共享配置 - 它必须独立运行。这是 NamePool 工作方式的结果。因此，如果您尝试从 Java API 执行此操作，那么您有责任将其做好。

加载已编译样式表的关键是静态方法

PreparedStylesheet.loadCompiledStylesheet()

使用 JAXP 接口无法做到这一点。然而，它返回一个 PreparedStylesheet 对象，它是 Saxon 对 JAXP 模板对象的实现，一旦你得到了这个，你就可以使用 JAXP 接口来创建一个 Transformer 并运行一个转换。

# android - 如何在 EditText 中隐藏下划线

> ID：13975528
> 
> 赞同：577
> 
> 时间：2012-12-20T15:36:14.343
> 
> 标签：android, textview, android-edittext

如何隐藏 EditText 下栏（末尾带有小衬线的提示行）？

可能有更好的方法来做我想做的事：我有一个带有 EditText 的布局。通常，在用户可以点击它并开始输入或编辑文本的地方，这显示得很好。

但是，有时我想使用相同的布局（简化其他逻辑）以只读方式显示相同的数据。我希望演示文稿相似 - 它应该具有相同的高度和相同的字体，但没有下划线。

作为权宜之计，我将通过删除 EditText 并替换 TextView 来实现这一点。我认为这会产生预期的结果，但它似乎是一种迂回，一种昂贵的方式来做一些应该很容易通过改变属性来完成的事情。

* * *

## 回答 #1

> 赞同：1219
> 
> 时间：2012-12-20T15:38:19.220

您可以将其设置`EditText`为具有自定义透明可绘制对象或仅使用

```
android:background="@android:color/transparent" 
```

或者

```
android:background="@null" 
```

或以编程方式

```
editText.setBackgroundResource(android.R.color.transparent); 
```

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2015-03-09T11:53:07.550

将背景设置为空。

```
android:background="@null" 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2015-12-03T14:21:10.467

您可以将`EditText`' `backgroundTint`值设置为特定颜色。如果您设置透明颜色，下划线应该消失。

`android:backgroundTint="@color/Transparent"`

`<color name="Transparent">#00000000</color>`

但是您可以在`Api v21(Lollipop)`或更高版本中使用它

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2014-11-16T16:19:12.590

请将您的edittext背景设置为

`android:background="#00000000"`

它会起作用的。

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2016-12-12T11:46:15.427

您可以使用以下方式以编程方式执行此操作`setBackgroundResource`：

```
editText.setBackgroundResource(android.R.color.transparent); 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2016-05-25T03:01:34.117

使用任一属性：

```
android:background="@null" 
```

或者

```
android:background="@android:color/transparent" 
```

为我工作以隐藏 EditText 的下划线。

但是，请注意，它会导致我包围的 TextInputLayout 出现间距问题`EditText`

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2016-02-22T16:03:07.660

我所做的是创建一个 Shape 可绘制对象并将其设置为背景：

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <padding
        android:top="8dp"
        android:bottom="8dp"
        android:left="8dp"
        android:right="8dp" />

    <solid android:color="#fff" />

</shape> 
```

注意：我实际上使用了firelds的`@dimen`和`@color`值，但为了清楚起见，我在这里简化了形状文件。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2018-02-13T13:57:12.983

这是一种隐藏它的方法，不会破坏默认填充：

```
fun View.setViewBackgroundWithoutResettingPadding(background: Drawable?) {
    val paddingBottom = this.paddingBottom
    val paddingStart = ViewCompat.getPaddingStart(this)
    val paddingEnd = ViewCompat.getPaddingEnd(this)
    val paddingTop = this.paddingTop
    ViewCompat.setBackground(this, background)
    ViewCompat.setPaddingRelative(this, paddingStart, paddingTop, paddingEnd, paddingBottom)
} 
```

用法：

```
editText.setViewBackgroundWithoutResettingPadding(null) 
```

* * *

更新：

如果你发现自己总是传递 null，你可以在方法中编写它（然后你也可以重载 EditText 本身）

```
fun EditText.removeUnderline() {
    val paddingBottom = this.paddingBottom
    val paddingStart = ViewCompat.getPaddingStart(this)
    val paddingEnd = ViewCompat.getPaddingEnd(this)
    val paddingTop = this.paddingTop
    ViewCompat.setBackground(this, null)
    ViewCompat.setPaddingRelative(this, paddingStart, paddingTop, paddingEnd, paddingBottom)
}

// usage:
editText.removeUnderline() 
```

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2020-08-06T10:36:23.060

如果您在**TextInputLayout**中使用**EditText** ，请按以下方式使用：**`app:boxBackgroundMode="none"`**

 **```
<com.google.android.material.textfield.TextInputLayout
    app:boxBackgroundMode="none"
    ...
    >

    <EditText
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</com.google.android.material.textfield.TextInputLayout> 
```

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2019-09-26T21:25:46.597

在我的情况下，我使用自定义背景来编辑文本，因此将背景设置为 @null 或将色调设置为透明不是我的解决方案，所以我玩了一个小技巧，它对我非常有效，我刚刚设置

```
android:inputType="textVisiblePassword" 
```

它可以很好地完成工作..它不是最佳解决方案，但它有效

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2018-03-13T20:18:01.300

您还必须设置 minWidth，否则如果文本为空，光标将消失。

```
 <EditText
            android:id="@+id/et_card_view_list_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:minWidth="30dp"
            android:layout_weight="1"
            android:inputType="text"
            android:text="Name"
            android:background="@android:color/transparent"
            /> 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2018-08-28T07:13:53.083

我有这样的东西非常有用：

```
generalEditText.getBackground().mutate().setColorFilter(getResources().getColor(R.color.white), PorterDuff.Mode.SRC_ATOP); 
```

其中generalEditText 是我的EditText，白色是：

```
<color name="white">#ffffff</color> 
```

这不会删除填充，您的 EditText 将保持原样。只有底部的行将被删除。有时这样做更有用。

如果您使用`android:background="@null"`尽可能多的建议，您会丢失填充并且 EditText 会变小。至少，这是我的情况。

需要注意的是，如果您将背景设置为 null 并尝试我上面提供的 java 代码，您的应用程序将在执行后立即崩溃。（因为它有背景但它是空的。）这可能很明显，但我认为指出它很重要。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2018-11-30T08:39:24.740

**只需使用这个**

```
 editText.setBackgroundColor(Color.TRANSPARENT); 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2017-04-04T04:14:55.910

我发现了最奇怪的事情！如果将其设置为`null`使用数据绑定： `android:background="@{null}"`

然后不仅背景被删除，而且视图仍然具有从默认背景计算的填充。所以由于某种原因，延迟的 null 设置不会清除前一个 bg 中的填充..？视图上的填充是左/上/右 4dp，底部 13dp（来自模拟器级别 21）。

在所有 API 级别上可能不会有相同的最终结果，所以要小心！有人告诉我您是否对此进行了测试并发现它可靠。（另请注意，底部填充由于原始中的下划线而突出。所以您可能希望在 XML 中更改它，或者在加载到等于顶部后在代码中重置它......

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2017-07-27T08:05:16.377

如果您的编辑文本已经有背景，那么您可以使用以下。

```
android:textCursorDrawable="@null" 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2018-07-31T13:17:47.000

如果您希望这影响 EditText 的所有实例以及从它继承的任何类，那么您应该在主题中设置属性 editTextBackground 的值。

```
 <item name="android:editTextBackground">@drawable/bg_no_underline</item> 
```

我使用的drawable的一个例子是：

```
<inset xmlns:android="http://schemas.android.com/apk/res/android"
     android:insetLeft="@dimen/abc_edit_text_inset_horizontal_material"
     android:insetRight="@dimen/abc_edit_text_inset_horizontal_material"
     android:insetTop="@dimen/abc_edit_text_inset_top_material"
     android:insetBottom="@dimen/abc_edit_text_inset_bottom_material">
    <selector>
      <item android:drawable="@android:color/transparent"/>
    </selector>
</inset> 
```

这是默认材料设计实现的略微修改版本。

应用后，它将使您的所有 EditText 删除整个应用程序中的下划线，并且您不必手动将样式应用于每一个。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2019-03-20T06:32:15.847

```
android:background="@android:color/transparent" 
```

或者

```
android:background="@null" 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2018-01-23T12:15:42.860

您还可以为您的 editText 定义一个样式，以便您可以重新组合所有共同的属性。如果您必须多次编辑需要具有该行为的文本，它非常强大

将代码放入 res/values/styles.xml

> ```
> <style name="MyEditTextStyle" parent="@android:style/TextAppearance.Widget.EditText">
>     <item name="android:background">@color/transparence</item> //NO UNDERBAR
>     <item name="android:maxLines">1</item>
>     <item name="android:height">28dp</item> //COMMON HEIGHT
> </style> 
> ```

之后你只需要在你的editText中调用它

```
<EditText
    android:id="@+id/edit1"
    style="@style/MyEditTextStyle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

<EditText
    android:id="@+id/edit2"
    style="@style/MyEditTextStyle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-10-19T05:39:18.147

以编程方式使用：`editText.setBackground(null)`

从`xml`使用：`android:background="@null"`

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2019-11-29T20:00:19.773

```
android:inputType="textVisiblePassword|textMultiLine"
android:background="@android:color/transparent" 
```

...它不是最佳解决方案，但它有效。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2021-09-07T08:04:44.023

在您的 XML Edittext 中使用此代码

```
android:background="@android:color/transparent" 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-11-13T11:08:31.043

要保留边距和背景颜色，请使用：

背景.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <padding
        android:bottom="10dp"
        android:left="4dp"
        android:right="8dp"
        android:top="10dp" />

    <solid android:color="@android:color/transparent" />

</shape> 
```

编辑文本：

```
<androidx.appcompat.widget.AppCompatEditText
    android:id="@+id/none_content"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/background"
    android:inputType="text"
    android:text="First Name And Last Name"
    android:textSize="18sp" /> 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-03-16T06:24:38.180

将背景设置为空

```
android:background="@null" in your xml 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-03-16T06:30:14.533

如果您使用背景，那么您必须使用此标签

```
android:testCursorDrawable="@null" 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-08-28T12:31:26.377

另一种选择是，您可以像这样创建自己的自定义 EditText：

```
class CustomEditText : androidx.appcompat.widget.AppCompatEditText {
    constructor(context: Context?) : super(context)
    constructor(context: Context?, attrs: AttributeSet?) : super(context, attrs)
    constructor(context: Context?, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr)

    private val paint = Paint()
    private val path = Path()

    init { // hide your underbar
        this.setBackgroundResource(android.R.color.transparent)

        // other init stuff...
    }

    override fun onDraw(canvas: Canvas?) {
        super.onDraw(canvas)

        // draw your canvas...
    }
} 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-04-29T09:27:14.370

就我而言，`editText.setBackgroundResource(R.color.transparent);`是最好的。

它不会删除默认填充，就在 bar 下。

`R.color.transparent = #00000000`

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-09-10T10:51:06.080

对于固定提示使用这个

```
 <item name="boxStrokeWidth">0dp</item>
        <item name="boxCornerRadiusTopStart">12dp</item>
        <item name="boxCornerRadiusTopEnd">12dp</item>
        <item name="boxCornerRadiusBottomStart">12dp</item>
        <item name="boxCornerRadiusBottomEnd">12dp</item> 
```**

# maven - 解决传递依赖冲突的 Maven 最佳实践

> ID：13975530
> 
> 赞同：1
> 
> 时间：2012-12-20T15:36:19.060
> 
> 标签：maven

假设我有以下内容：

```
A -> B,C,D,E

B -> F[1.1]
C -> F[1.0.1]
D -> F[1.2]
E -> F[1.1] 
```

我知道解决传递依赖冲突的两种方法： 1\. 将排除项添加到 A 的依赖项中除 1 个之外的所有依赖项 2\. 使用 dependencyManagement 指定我真正想要的 F 版本。

这些选项中哪个是更好的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:38:18.097

最佳实践是将要使用的版本添加到 pom 的 DependencyManagement 部分。这将确保您得到您想要的，尤其是当您的依赖项之一升级其版本时。您仍然应该不时运行依赖插件（我喜欢树目标）以查看版本是否更改，以便您可以根据需要调整版本。

# google-app-engine - 在应用引擎上运行 BigQuery 加载作业卡在挂起状态

> ID：13975532
> 
> 赞同：2
> 
> 时间：2012-12-20T15:36:24.467
> 
> 标签：google-app-engine, google-bigquery

我正在尝试将数据加载到 BigQuery 中，并且加载作业无限期地保持在挂起状态（我等了大约 5 分钟）。我还需要做些什么才能将工作转移到运行状态吗？

```
log.log(new LogRecord(Level.INFO, "Writing to big query table"));
JobConfigurationLoad loadConf = new JobConfigurationLoad();
loadConf.setDestinationTable(new TableReference().setProjectId(PROJECT_ID)
    .setDatasetId(datasetId).setTableId(TABLE_ID));
loadConf.setWriteDisposition("WRITE_APPEND");
loadConf.setSourceUris(Arrays.asList("gs://" + bucket + "/" + "something.json"));
JobConfiguration configuration = new JobConfiguration().setLoad(loadConf);
Job loadJob = new Job().setConfiguration(configuration);
Jobs.Insert insertData = bigQuery.jobs().insert(PROJECT_ID, loadJob);
Job insertResp = insertData.execute();

JobStatus status = insertResp.getStatus();
    while (!status.getState().equals("done")) {
        System.out.println(status.getState());
        status = insertResp.getStatus();
        Thread.sleep(10000);
}
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:40:33.413

我已经对此进行了一些研究，问题是您对同一张表执行了 2300 个导入作业，每隔几秒钟添加一个新作业。作业开始排队，因为新作业的到达速度超过了它们的处理速度。这导致了越来越长的等待时间。看起来大量作业可能是无意的，因为它们似乎都将同一个文件导入到同一个表中。顺便说一句，作业都因 invalid_value 错误而失败。

请注意，这种模式只发生在 12/20。除了这个日期之外，我找不到您运行的任何其他持续时间超过 10 分钟的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:05:34.650

关于没有得到最新工作结果的问题，这段代码应该可以工作（如果你添加到上面的内容：

```
// Insert the load job.
Job job = insertData.execute();  
JobId jobId = job.getJobId();

long startTime = System.currentTimeMillis();

while (!job.getStatus().getState().equals("DONE")) {
   // Pause execution for ten seconds before polling job status again
   Thread.sleep(10000);

   long elapsedTime = System.currentTimeMillis() - startTime;
   System.out.format("Job status (%dms) %s: %s\n", elapsedTime,
       jobId.getJobId(), job.getStatus().getState());       

   // Poll the server for job completion state.
   job = bigquery.jobs().get(projectId, jobId).execute();
}
if (job.getStatus().getErrorResult() != null) {
  // The job ended with an error.
  System.out.format("Job %s ended with error %s", job.getJobId(), 
      job.getStatus().getErrorResult().getMessage());
} 
```

# c# - IEnumerable 的可能重复枚举

> ID：13975535
> 
> 赞同：6
> 
> 时间：2012-12-20T15:36:31.077
> 
> 标签：c#, linq, resharper

我写了以下代码：

```
IEnumerable<string> blackListCountriesCodes = 
pair.Criterion.CountriesExceptions.Select(countryItem => countryItem.CountryCode);

IEnumerable<string> whiteListCountriesCodes = 
pair.Criterion.Countries.Select(countryItem => countryItem.CountryCode);

return (!blackListCountriesCodes.Contains(Consts.ALL.ToString()) &&
        !blackListCountriesCodes.Contains(country) &&
        (whiteListCountriesCodes.Contains(Consts.ALL.ToString()) ||
        whiteListCountriesCodes.Contains(country))); 
```

resharper 向我显示警告： `Possible duplicate enumeration of IEnumerable`

这是什么意思？为什么这是一个警告？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T15:38:56.693

LINQ 查询会延迟它们的执行，直到您对结果进行处理。在这种情况下，对同一个集合调用`Contains()`两次可能会导致结果被枚举两次，这取决于查询，可能会导致性能问题。

您可以通过简单地`ToList()`在查询结束时添加一个调用来解决这个问题，这将强制执行查询并一次性存储结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:39:05.907

这意味着您的代码可能会枚举`blackListCountriesCodes`和`whiteListCountriesCodes`多次。由于 LINQ 使用延迟评估，这可能会导致速度变慢，尤其是当它`pair`有大量数据并且`Where`子句很复杂时（不过，它看起来并不适用于您的情况）。

您可以通过将枚举“具体化”到列表中来消除警告（以及所谓的缓慢），如下所示：

```
var blackListCountriesCodes = 
    pair.Criterion.CountriesExceptions.Select(countryItem => countryItem.CountryCode).ToList();

var whiteListCountriesCodes = 
    pair.Criterion.Countries.Select(countryItem => countryItem.CountryCode).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T15:39:59.140

这意味着您可能会计算`IEnumerable`两次（或更多）的内容。如果这很昂贵，例如调用数据库，这对性能不利。如果基础来源是 a`List<T>`并且有一个简单的投影或其他不昂贵的东西，这不是问题。

您当然可以重写表达式以仅使用一次枚举。

```
!blackListCountriesCodes.Contains(Consts.ALL.ToString())
    && !blackListCountriesCodes.Contains(country) 
```

可以改写为

```
!blackListCountriesCodes
    .Where(blcc => blcc == Consts.ALL.ToString() || blcc == country).Any() 
```

# javascript - 如何将 jquery 效果应用于由 Knockout.js 创建的元素

> ID：13975537
> 
> 赞同：7
> 
> 时间：2012-12-20T15:36:39.103
> 
> 标签：javascript, jquery, knockout.js

您好，我认为我有以下代码：

```
 <div data-bind="foreach: Elements">
            <div data-bind="attr:{id: id}">
                <img data-bind="attr:{src: ImageSource}" />
                <p data-bind="text: Name"></p>
            </div>
        </div> 
```

但是对于每个新元素，我想添加 jQuery 效果，例如：

```
 $("#draggable").draggable(); 
```

有没有办法订阅元素添加到此列表后发生的事件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T15:41:08.127

最好的方法是使用自定义绑定。

```
ko.bindingHandlers.draggable= {
    init: function(element, valueAccessor) {
        $(element).draggable();
    }
};

    <div data-bind="foreach: Elements">
        <div data-bind="attr:{id: id}, draggable: {}">
            <img data-bind="attr:{src: ImageSource}" />
            <p data-bind="text: Name"></p>
        </div>
    </div> 
```

在文档中阅读有关它的更多信息：http: [//knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)。

# spring - 在 cobertura-maven-plugin 测试中加载 Spring ApplicationContext

> ID：13975544
> 
> 赞同：2
> 
> 时间：2012-12-20T15:36:58.383
> 
> 标签：spring, unit-testing, dependency-injection, code-coverage, cobertura

我正在使用 cobertura maven 插件来生成关于我的基于 spring 的应用程序的测试代码覆盖率的报告。我的单元测试配置为：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:/testAppContext.xml")
public class TestCase extends TestBase 
```

testAppContext.xml - 位于 /src/test/resources/testAppContext.xml 的 Spring IOC 配置

而我的 cobertura 的相关 pom.xml 部分是：

```
<build>
...
    <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>cobertura-maven-plugin</artifactId>
        <executions>
            <execution>
                <goals>
                    <goal>clean</goal>
                </goals>
            </execution>
        </executions>
    </plugin>
...
<build>

<reporting>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>cobertura-maven-plugin</artifactId>
        </plugin>
    </plugins>
</reporting> 
```

当我制作“mvn clean install”时它工作正常，但是当我制作“mvn site”时-基于弹簧的测试失败，因为“加载ApplicationContext失败”和底层“自动装配依赖注入失败”，所以我收到不正确的报告关于测试覆盖率。

我认为这可能是因为 testAppContext.xml 在“站点”目标或其他东西期间不在类路径上。任何建议如何解决这个问题？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T18:22:09.947

引用我从[Getting Spring Error "Bean named 'x' must be of type [y], but 实际上是 type [$Proxy]" in Jenkins 中的](https://stackoverflow.com/questions/8391944)回答：

> Cobertura 的问题在于它执行相当繁重的字节码检测，包括添加一些自定义接口。当 Spring 启动时，它会为 bean 生成代理。如果 bean 至少有一个接口，它使用标准的 Java 代理。否则它会尝试创建基于类的代理。
> 
> 我猜在你的情况下，使用了 CGLIB 类代理，但在 Cobertura 检测 Spring 后回退到 java 代理。这会导致启动错误，因为依赖注入预期的类（或 CGLIB 子类）。
> 
> 长话短说，强制 CGLIB 类代理，你会没事的：
> 
> ```
> <aop:config proxy-target-class="true"/> 
> ```

症状不一样，但显然上面的技巧在这里也有帮助。

# google-apps-script - 将电子邮件发送到电子表格

> ID：13975545
> 
> 赞同：1
> 
> 时间：2012-12-20T15:36:58.497
> 
> 标签：google-apps-script

我有一个代码可以捕获电子邮件并将其放入电子表格并将此电子邮件放入其他标签中，它可以正常工作，但我将范围设置在 0 到 50 之间，当我查看电子邮件出现超过 50 封电子邮件的标签时，为什么这发生了？

谢谢

代码

```
function get_emails() {  
  var sheet = SpreadsheetApp.getActiveSheet();

  var label_pending = GmailApp.getUserLabelByName('Fale Conosco/Contato');  
  var label_done = GmailApp.getUserLabelByName('Teste Done');

  var threads = label_pending.getThreads(0, 50); 

  var index = getColIndexByName('Conteúdo');

  for (var t in threads) {

    var thread = threads[t];

    var html = thread.getMessages()[0].getBody();
    html=html.replace(/<\/div>/ig, '\n');
    html=html.replace(/<\/li>/ig, '\n');
    html=html.replace(/<li>/ig, '  *');
    html=html.replace(/<\/ul>/ig, '\n');
    html=html.replace(/<\/p>/ig, '\n');
    html=html.replace(/<br\/?>/ig, '\n');
    html=html.replace(/<[^>]+>/ig, '');

    sheet.getRange((sheet.getLastRow() + 1), index).setValue(html);

    thread.removeLabel(label_pending);  
    thread.addLabel(label_done);
  }
  return 0;
}  

function getColIndexByName(colName) {
  var sheet = SpreadsheetApp.getActiveSheet();
  var numColumns = sheet.getLastColumn();
  var row = sheet.getRange(1, 1, 1, numColumns).getValues();
  for (i in row[0]) {
    var name = row[0][i];
    if (name == colName) {
      return parseInt(i) + 1;
    }
  }
  return -1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:50:31.117

我不知道我是否正确地回答了您的问题，但是您正在处理线程，并且线程可能由许多电子邮件组成，因此这可能是您收到不同数量的消息的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:59:49.740

我现在修复了它的工作，我添加了一个循环来逐条查看消息

```
function processPending() {  
  var sheet = SpreadsheetApp.getActiveSheet();

  var label_pending = GmailApp.getUserLabelByName('Fale Conosco/Contato');  
  var label_done = GmailApp.getUserLabelByName('Teste Done');

  var threads = label_pending.getThreads(0, 5);

  var index = getColIndexByName('Conteúdo');

  for (var t in threads) {

    var thread = threads[t];

    var messaqnt = thread.getMessages();

    for (var i in messaqnt) {

      var html = messaqnt[i].getBody();
      html=html.replace(/<\/div>/ig, '\n');
      html=html.replace(/<\/li>/ig, '\n');
      html=html.replace(/<li>/ig, '  *');
      html=html.replace(/<\/ul>/ig, '\n');
      html=html.replace(/<\/p>/ig, '\n');
      html=html.replace(/<br\/?>/ig, '\n');
      html=html.replace(/<[^>]+>/ig, '');

      sheet.getRange((sheet.getLastRow() + 1), index).setValue(html);

      thread.removeLabel(label_pending);  
      thread.addLabel(label_done);
    }
  }
  return 0;
}  

function getColIndexByName(colName) {
  var sheet = SpreadsheetApp.getActiveSheet();
  var numColumns = sheet.getLastColumn();
  var row = sheet.getRange(1, 1, 1, numColumns).getValues();
  for (i in row[0]) {
    var name = row[0][i];
    if (name == colName) {
      return parseInt(i) + 1;
    }
  }
  return -1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T11:52:04.617

作为对这两个答案的补充，这里有一个脚本，它以一种不那么“琐碎”的方式处理 HTML 到文本的转换。

我使用了[Corey G 的帖子中](https://stackoverflow.com/questions/8936092/remove-formatting-tags-from-string-body-of-email)的代码，该代码具有优势（对我而言）可以在法语中获取重音字符......（这是我的用例 ;-)

```
function get_emails() {  
  var sheet = SpreadsheetApp.getActiveSheet();
  var label_pending = GmailApp.getUserLabelByName('NoLabel');  

  var threads = label_pending.getThreads(0, 10); 
  var index = getColIndexByName('test');

  for (var t in threads) {
    var thread = threads[t];
    var msgcount = thread.getMessageCount()

   for(m=0;m<msgcount;++m){

  var html = thread.getMessages()[m].getBody();
  var txt = getTextFromNode(Xml.parse(html, true).getElement());
  sheet.getRange((sheet.getLastRow() + 1), index).setValue(txt);
}
  }
  return 0;
}  

function getTextFromNode(x) {
  switch(x.toString()) {
    case 'XmlText': return x.toXmlString();
    case 'XmlElement': return x.getNodes().map(getTextFromNode).join('');
    default: return '';
  }
}

function getColIndexByName(colName) {
  var sheet = SpreadsheetApp.getActiveSheet();
  var numColumns = sheet.getLastColumn();
  var row = sheet.getRange(1, 1, 1, numColumns).getValues();
  for (i in row[0]) {
    var name = row[0][i];
    if (name == colName) {
      return parseInt(i) + 1;
    }
  }
  return -1;
  } 
```

# assembly - AVX VMOVDQA 比两个 SSE MOVDQA 慢？

> ID：13975546
> 
> 赞同：18
> 
> 时间：2012-12-20T15:37:04.703
> 
> 标签：assembly, sse, bignum, arbitrary-precision, avx

在我处理快速 ADD 循环（[加速 x64 汇编器 ADD 循环](https://stackoverflow.com/q/13971088/1045800)）时，我正在使用 SSE 和 AVX 指令测试内存访问。要添加，我必须读取两个输入并产生一个输出。所以我写了一个虚拟例程，它将两个 x64 值读入寄存器并将一个写回内存而不做任何操作。这当然没用，我只是为了进行基准测试。

我使用一个展开的循环，每个循环处理 64 个字节。它由 8 个块组成，如下所示：

```
mov rax, QWORD PTR [rdx+r11*8-64]
mov r10, QWORD PTR [r8+r11*8-64]
mov QWORD PTR [rcx+r11*8-64], rax 
```

然后我将其升级到 SSE2。现在我使用 4 个这样的块：

```
movdqa xmm0, XMMWORD PTR [rdx+r11*8-64]
movdqa xmm1, XMMWORD PTR [r8+r11*8-64]
movdqa XMMWORD PTR [rcx+r11*8-64], xmm0 
```

后来我使用了 AVX（每个寄存器 256 位）。我有两个这样的块：

```
vmovdqa ymm0, YMMWORD PTR [rdx+r11*8-64]
vmovdqa ymm1, YMMWORD PTR [r8+r11*8-64]
vmovdqa YMMWORD PTR [rcx+r11*8-64], ymm0 
```

到目前为止，还没有那么壮观。有趣的是基准测试结果：当我对 1k+1k=1k 64 位字（即两次 8 kb 输入和一次 8kb 输出）运行三种不同的方法时，我得到了奇怪的结果。以下每个时序用于将两次 64 字节输入处理为 64 字节输出。

*   x64 寄存器方法以大约 15 个周期/64 字节运行
*   SSE2 方法以大约 8.5 个周期/64 字节运行
*   AVX 方法以大约 9 个周期/64 字节运行

我的问题是：为什么 AVX 方法比 SSE2 方法慢（虽然不是很多）？我预计它至少会达到同等水平。使用 YMM 寄存器会花费这么多额外的时间吗？内存是对齐的（否则你会得到 GPF）。

有人对此有解释吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-25T23:53:10.107

在 Sandybridge/Ivybridge 上，256b AVX 加载和存储被破解为加载/存储执行单元中的两个 128b 操作 [正如 Peter Cordes 所指出的，这些不是完全微操作，但清除端口的操作需要两个周期]，所以没有理由期望使用这些指令的版本会更快。

为什么它更慢？想到了两种可能：

*   对于基址 + 索引 + 偏移寻址，128b 加载的延迟为 6 个周期，而 256b 加载的延迟为 7 个周期（英特尔优化手册中的表 2-8）。尽管您的基准测试应该受*thoughput*而不是*latency*的约束，但更长的延迟意味着处理器需要更长的时间才能从任何打嗝（管道气泡或预测未命中或中断服务或......）中恢复，这确实会产生一些影响。

*   在同一文档的 11.6.2 中，英特尔建议 256b 加载的高速缓存行和页面交叉的惩罚可能比 128b 加载更大。如果您的加载不是全部 32 字节对齐，这也可以解释您在使用 256b 加载/存储操作时看到的减速：

> 例 11-12 显示了 SAXPY 的两个实现，地址未对齐。备选方案 1 使用 32 字节加载，备选方案 2 使用 16 字节加载。这些代码示例使用两个源缓冲区 src1、src2（与 32 字节对齐的 4 个字节偏移）和一个目标缓冲区 DST（即 32 字节对齐）执行。使用两个 16 字节内存操作代替 32 字节内存访问执行速度更快。

# codeigniter - CodeIgniter、Facebook 和 Sessions。获取大量 oAuth 访问令牌错误

> ID：13975549
> 
> 赞同：1
> 
> 时间：2012-12-20T15:37:09.837
> 
> 标签：codeigniter, facebook-php-sdk, facebook-oauth

我已经使用 CodeIgniter 好几年了。我不会让事情变得太复杂，基本上，我在控制器的构造函数中这样做：

```
$conf = array ( 'appId' => 'MY APP ID', 'secret' => 'MY SECRET KEY');

$facebook = $this->load->library('facebook/facebook',$conf); 
```

然后，为了让用户登录，我在 facebook 提供的[example.php](https://github.com/facebook/facebook-php-sdk/blob/master/examples/example.php)上使用相同的方法（获取用户 ID，尝试捕获 API 调用）。**我的控制器构造函数上的所有内容**。

在使用这种方法的几年中，直到现在一切都运行良好。上周我编写了一个应用程序，在我过去完成的每个应用程序中编写了基本相同的代码，问题是我收到了很多 oAuth Access Token 错误，准确地说，我收到一条消息说访问令牌已过期，我需要一个新的来查询 facebook API。

所以，我知道我没有提供太多关于我的代码的信息，但我想讨论的是方法而不是代码本身：

**您如何在您的应用程序中处理 Facebook 登录？**你认为我这样做的方式是好的还是我必须在一个方法中而不是在构造函数中这样做？我是否必须将访问令牌保存在数据库中，以便在用户返回应用程序时可以使用相同的访问令牌？

如果您有一个带有 codeigniter 的示例，那就太好了。

**非常感谢您！**

Ps：我正在自动加载 CI 会话库，使用[过期日期为一年的 channel.php 文件](https://developers.facebook.com/docs/reference/javascript/)并使用 p3p 标头，因此浏览器确实接受 cookie。我真的不知道我错过了什么。P.s2：“我在stackoverflow中阅读了很多相关的问题，我尝试了一些我在这里阅读的建议，但我得到了相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T18:42:47.560

SDK 3.2.1 版本包含一个错误，该错误已在（尚未标记的）3.2.2 版本中修复。将您的 base_facebook.php 文件替换为 github 上的最新版本：

[https://raw.github.com/facebook/facebook-php-sdk/master/src/base_facebook.php](https://raw.github.com/facebook/facebook-php-sdk/master/src/base_facebook.php)

这个提交：

[https://github.com/facebook/facebook-php-sdk/commit/ca9472b3312dab3fdcfbffb4e45eb091f582dcb7](https://github.com/facebook/facebook-php-sdk/commit/ca9472b3312dab3fdcfbffb4e45eb091f582dcb7)

引用了“尝试重用已用过的身份验证令牌”的修复。

这让我发疯了。很可能是图形 API 中存在一个需要更新代码的漏洞，并且从来没有错误......无论如何，它已在最新版本中修复。

我的代码点火器代码：

```
$config['appId'] = '408995679168867';
$config['secret'] = 'secret';
$this->load->library('facebook', $config); 
```

进而

```
$fbid = $this->facebook->getUser();
$this->fb_me = $this->facebook->api("/me"); 
```

应该在那里有 try/catch 等等，但为了便于阅读，我把它留了下来。

# grails - Grails 控制器请求变量

> ID：13975550
> 
> 赞同：0
> 
> 时间：2012-12-20T15:37:10.973
> 
> 标签：grails

在我们以前使用的 grails 1.3.x 应用程序中`def user = request.userDefinedInAFilter`，这不是在控制器方法中，而是在类的主体中，并且运行良好。现在升级到 2.1.2 时，在尝试创建 bean 时会出现此错误：

```
Caused by: groovy.lang.MissingMethodException: No signature of method: com.MyController.getRequest() is applicable for argument types: () values: [] 
```

我可以将它放在控制器方法或之前的块中，只是想找出处理它的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:50:47.147

我认为这是因为这些方法以前被添加到元类中，但现在通过 AST 转换添加到字节码中。如果您对所有方法都需要它，您可以将它添加到 a`beforeInterceptor`并在那里设置字段，或者在每个需要它的方法中进行调用。

# c# - 如何在C#中对数据变量访问值和整数值进行算术运算？

> ID：13975554
> 
> 赞同：1
> 
> 时间：2012-12-20T15:37:20.150
> 
> 标签：c#, asp.net, .net

我想在c#中添加两个值，一个是整数值，另一个是可以返回整数值的变量，我想执行加法运算并返回值......到目前为止，我已经使用了以下代码：

```
lbl_Am.Text = Application["Amount"].ToString(); 
```

这将返回整数值，我想将上述返回值与一些整数值 ex..int 2 相加；

如何使用 c# 执行此添加操作并将其存储在另一个变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:40:22.457

```
int Amt;
int.TryParse(lbl_Am.Text,out Amt); 
```

现在您可以添加

```
var AddedAmt = Amt + <Other Integer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:40:45.680

试试这个：

```
int result = Convert.ToInt32(Application["Amount"]) + 2; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T15:41:20.387

您的问题不清楚，但如果您打算对字符串执行数学运算，最好确保该字符串实际上代表一个数字：

```
var value = Application["Amount"].ToString();
int intvalue = 0;

if (int.TryParse(value, out intvalue)
{
   var newvalue = intvalue + 2;
}

//whatever you want to do with the newvalue 
```

# dom - Selenium 隐式等待与 Thread.sleep()

> ID：13975556
> 
> 赞同：12
> 
> 时间：2012-12-20T15:37:25.903
> 
> 标签：dom, selenium-webdriver

根据 selenium，隐式等待会在一定时间内轮询 DOM，以查看元素是否出现。我的理解是它会轮询指定的时间，但是如果之前出现了一个元素，那么它将继续进行而无需进一步等待。

[http://seleniumhq.org/docs/04_webdriver_advanced.html](http://seleniumhq.org/docs/04_webdriver_advanced.html)

我有一个运行大约 13 秒的方法。当我将隐式等待设置为 100 秒时，需要 213 秒。

```
driver.manage().timeouts().implicitlyWait(100, TimeUnit.SECONDS); 
```

看来，在这种方法中，我正在等待 2 次（每次 100 秒）。将隐式等待设置为 0 或 100 不会影响我的方法。在这两种情况下，它们都正确完成。

我的问题是这个。我认为隐式等待等待元素出现的最短时间。这是正确的吗？还是我做错了什么？

此外，当它显然不需要等待时，为什么要等待 2 次？（即使我将等待设置为 0，我的方法也会正确完成）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T06:43:27.343

简短的回答：

隐式等待 - 它是适用于所有元素的全局设置，如果元素出现在指定时间之前，则脚本将开始执行，否则脚本将抛出`NoSuchElementException`。在设置方法中使用的最佳方式。只会影响`By.findelement()`。

`Thread.sleep()`- 它会为脚本休眠，不是在脚本中使用的好方法，因为它是无条件休眠的。

# javascript - 表单提交后的Ajax不起作用

> ID：13975560
> 
> 赞同：0
> 
> 时间：2012-12-20T15:37:42.800
> 
> 标签：javascript, jquery, ajax

我有这个：

```
$('#my_form').submit(function () {
        setTimeout(function () {
            console.log('1');
            $.ajax({
                type: "GET",
                url: "/CorrectUrl/CorrectUrl",
                data: {},
                success: function (data) {
                    console.log('2');
                },
                error: function (a, b, c) {
                    console.log(a);
                }
            });
        }, 100);
    }); 
```

并调用并执行表单的 url。表单返回值。但是没有调用 CorrectUrl。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T15:39:02.150

您需要阻止默认操作发生`preventDefault()`

```
$('#my_form').submit(function (e) {
    e.preventDefault(); 
```

# jakarta-mail - Jboss7 MDB MailListener 到邮件重购适配器

> ID：13975561
> 
> 赞同：0
> 
> 时间：2012-12-20T15:37:45.187
> 
> 标签：jakarta-mail, jboss7.x, ear, message-driven-bean, seam2

我正在将 seam2/hibernate ear 应用程序移植到 jboss7.1.1FINAL

我在 ear\lib 中包含了包含我需要的 sem 接口的 jar mail-ra.jar。

但看起来在部署过程中找不到 mail-ra.jar 库我收到上面的错误

有什么提示吗？

```
JBAS014775:    New missing/unsatisfied dependencies:
  service jboss.ra.mail-ra (missing) dependents: [service jboss.deployment.subunit."4pm_ee_services-ear.ear"."4pm_ee_services-ejb.jar".component.MailListenerMDB.CREATE] 

16:25:57,299 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.deployment.subunit.\"4pm_ee_services-ear.ear\".\"4pm_ee_services-ejb.jar\".component.MailListenerMDB.CREATEjboss.ra.mail-raMissing[jboss.deployment.subunit.\"4pm_ee_services-ear.ear\".\"4pm_ee_services-ejb.jar\".component.MailListenerMDB.CREATEjboss.ra.mail-ra]"]}}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:14:38.680

@simonC 似乎你的standalone.xml 是jndi-name 是错误的，应该是这样的

```
 <datasource jta="true" jndi-name="java:/mobeeaAirtimeDatasource" pool-name="mobeeaAirtimeDatasource_pool" enabled="true" use-java-context="true">
     <connection-url>jdbc:oracle:thin:@localhost:1521:mobee</connection-url>
    <driver>com.oracle</driver>
       <security>
                 <user-name>airtimeuser</user-name>
                   <password>mobeepasswd</password>
               </security>
       </datasource> 
```

# xcode - 找到僵尸对象，但找不到负责任的调用者

> ID：13975563
> 
> 赞同：0
> 
> 时间：2012-12-20T15:37:48.917
> 
> 标签：xcode, nszombie

我对这个问题感到很困惑。我使用 Instruments 在我的代码中找到了一个僵尸。通常我会浏览负责呼叫者的列表并修复它。唯一的问题是我的代码中不存在负责任的调用者方法之一。我找不到！

![在此处输入图像描述](../Images/f073ce2201ef6a06343afd4f742d3e55.png)

我找不到-[SpriteSheet setImage:]。setImage: 方法不在我的代码中。这对我来说听起来很疯狂，但是当我对我的代码进行文本样式搜索时，它出现了空。我查看了 SpriteSheet 类，没有名为 setImage: 的方法。

请告诉我我在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:50:40.117

setImage 方法可能是从 SpriteSheet 类的属性中合成的：
`@property(retain) UIImage *image;`=> `@synthesize image;`=> 有代码，因为它是自动生成的。

但似乎您在 Enemy::dealloc 中释放了图像，但尝试在那里再次访问它。（最后 3 行）

# java - java For循环简单代码——输出说明

> ID：13975566
> 
> 赞同：7
> 
> 时间：2012-12-20T15:37:51.020
> 
> 标签：java, for-loop

有人可以解释一下这段代码是如何打印出来`8 2`的吗？

```
public class Check{

    public static void main(String args[]){

        int x=0;
        int y=0;

        for(int z=0;z<5;z++){
            if(++x>2||++y>2){
               x++;
            }
         }

         System.out.println(x+" "+y);

    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T15:42:21.497

在迭代 0、1 中，条件不成立，因此以`x=2, y=2`.

从第 2 次迭代开始，第一个条件`++x>2`为真，因此不再评估第二个条件。`y`保持固定在 2。对于每个后续循环，`x`增加两次（一次评估`++x>2`，一次评估`x++;`）。因此`x`变成 4、6 和 8。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T15:40:25.393

`++x`是**x 的预增量，**您的评估将如下所示。

```
INITIAL VALUES:
x=0, y=0
    z=0, 
    INVARIANT FOR z: z<5 ()
    WHEN z=0 
       CHECK IF 1>2 || 1>2
               THEN x++
     WHEN z=1
           CHECK IF 2>2 || 2>2
                THEN x++

     WHEN z=2
          CHECK IF 3>2 || 2>2 y cond is not eval as x cond satisfied
                THEN x++(inc 3++)

     WHEN z=3
          CHECK IF 5>2 || 2>2 // y cond is not eval as x cond satisfied
                THEN x++(inc 5 by 1)

     WHEN z=4
          CHECK IF 7>2 || 2>2 //y cond is not eval as x cond satisfied
                THEN x++(inc 7 by 1)

THUS : FINAL OUTPUT x= 8, y=2 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T15:44:02.630

这都是关于你如何在 if 检查中获得 ++x/++y 的。遵循逻辑：

x=0 y=0 z=0

然后你点击 if 行，因为 ++x 是 1 它不是 >2，所以它运行 ++y 部分使 y=1，if 结果为假，你的值现在是：

x=1 y=1 z=0

迭代 2 发生，z=1 然后你点击 if 行，因为 ++x 是 2 它不是 >2，所以它运行 ++y 部分使 y=2，if 结果为假，你的值是现在：

x=2 y=2 z=1

迭代 3 发生，z=2 然后你点击 if 行，因为 ++x 是 3，它是 >2，所以 x++ 执行（使 x=4），++y 不执行，因为 OR 为真在如果。现在的值是：

x=4, y=2, z=2

重复此操作直到 z=5，最终得到 x=8, y=2

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-20T15:48:08.103

如何理解未知的代码片段：

1.  正确缩进代码。这对阅读代码有很大帮助，而且它是一种简单、安全的操作来习惯代码。

2.  尝试找到一种不同的方式来以更简单的方式表达相同的代码。在每次更改后运行代码，以确保您的更改不会破坏任何内容。

    这意味着在正确的位置替换`++x`为`x=x+1`。

3.  解开嵌套/复杂`if()`的条件。

所以重写后的代码可能是这样的：

```
for(int z=0; z<5; z ++) {
    x = x + 1;
    if( x > 2 ) { // first half of the OR
        x = x + 1;
    } else {
        // first half of the OR is false, we end up here
        y = y + 1; // pre increment
        if( y > 2 ) {
            x = x + 1;
        }
    }
} 
```

另一个好的解决方案是使用穷人的调试器：

```
for(int z=0; z<5; z++) {

    System.out.println("x="+x+", y="+y+", z="+z); // add this line in several places to see what happens
    ...
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T15:52:25.687

循环的初始执行

`z=0 --> x=1, y=1`

`z=1 --> x=2, y=2`

对于上述情况，if 中的条件为假。

此外，请注意，对于 if 中条件的每一次有效执行，x 都会增加 2（前置增量和后置增量）。

为什么 y=2 保持不变..？逻辑运算符“||” 执行，如果第一个条件为真，它不会寻找或执行另一个条件

`z=2 --> x=4, y=2`

`z=3 --> x=6, y=2`

`z=4 --> x=8, y=2`

x=8 --- 和 y=2

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-20T15:53:59.663

在这样的“if”语句中：

```
if (conditionA() || conditionB()) {...} 
```

如果 conditionA() 返回 true，则根本不调用 conditionB()，因为没有必要，整个 if 语句必须为 true。

详细说明：循环执行 5 次。

第一次：x 和 y 在 if() 语句中递增到 1。

第二次：在 if() 语句中 x 和 y 递增到 2。

第三次：x 增加到 3，这足以触发“if”块内部的执行。y 不再增加，因为在 || 之后不需要计算表达式。(OR) 如果第一部分为真。

第 4 次：x 递增到 5，if() 仍然为真，所以 x 再次递增到 6。

第 5 次：x 在 if() 中增加到 7，在块中增加到 8。

最终结果：x 为 8，y 为 2。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T15:46:29.203

由于 System.out.println() 语句在循环之外，所以 println 语句只运行一次。每次循环迭代，if 语句检查 x 和 y 的值是否大于 2；但是，首先它会增加它们的两个值。循环的前 3 次，条件不满足，但 x 和 y 仍然递增。之后每次 x 和 y 都加一；但是，由于满足条件，x 会增加一次。简而言之，这就是每次迭代后 x 和 y 的样子：

```
z   x   y
--  --  --
0   1   1
1   2   2
2   4   3
3   6   4
4   8   5 
```

编辑：由于 if 语句 (||) 中的短路逻辑，只有表达式的第一部分被评估并且 y 永远不会增加。结果，y 将保持在 2。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-20T15:48:51.600

For 循环执行 5 次。当它到达 if x 和 y 时，前 2 次相同时将增加 1。在 x&y 为 2 但不满足 if 条件时。在第三次 x 将是 3 并且它不会检查 y 所以 y 不会增加并且它会进入 if 并再次增加。所以 y 将为 2。但 x 将增加 2*2=4 倍，因此 x=8 和 y=2

# asp.net - Asp.net 登录会话错误

> ID：13975567
> 
> 赞同：1
> 
> 时间：2012-12-20T15:37:54.563
> 
> 标签：asp.net, vb.net

在登录页面中：

```
Session("FirstName") = txtUserName.Text
Response.Redirect("CusRecords.aspx") 
```

在第二页：

```
lbl1.Text = Session("FirstName").ToString 
```

我使用了该代码，但出现此错误：

```
Object reference not set to an instance of an object. 
that error refers to lbl1.Text = Session("FirstName").ToString 
```

这是登录页面的完整代码：

```
Public Class _Default
Inherits System.Web.UI.Page
Public s As String
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Session.Clear()
    Session.Abandon()
End Sub

Protected Sub Button1_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Button1.Click
    Dim con As SqlConnection = New SqlConnection(ConfigurationManager.ConnectionStrings("RegconnectionString").ConnectionString)
    con.Open()
    Dim userCount As Int32 = GetUserCount(txtUserName.Text)
    Dim paasCount As Int32 = GetPassCount(TxtPassword.Text)

    If userCount > 0 And paasCount > 0 Then
        Session("FirstName") = txtUserName.Text
    Else
        lblErr.Visible = True
    End If
    Response.Redirect("CusRecords.aspx")
End Sub

' Method to check existence 
Public Shared Function GetUserCount(ByVal userName As String) As Int32
    Const sql = "SELECT COUNT(*) FROM Registration where username = @UserName"
    Using con As New SqlConnection(ConfigurationManager.ConnectionStrings("RegconnectionString").ConnectionString)
        Using cmd = New SqlCommand(sql, con)
            cmd.Parameters.AddWithValue("@UserName", userName)
            con.Open()
            Using reader = cmd.ExecuteReader()
                If reader.HasRows Then
                    reader.Read()
                    Dim count As Int32 = reader.GetInt32(0)
                    Return count
                End If
            End Using
        End Using
    End Using
End Function

Public Shared Function GetPassCount(ByVal password As String) As Int32
    Const sql = "SELECT COUNT(*) FROM Registration where password = @Password"
    Using con As New SqlConnection(ConfigurationManager.ConnectionStrings("RegconnectionString").ConnectionString)
        Using cmd = New SqlCommand(sql, con)
            cmd.Parameters.AddWithValue("@Password", password)
            con.Open()
            Using reader = cmd.ExecuteReader()
                If reader.HasRows Then
                    reader.Read()
                    Dim count As Int32 = reader.GetInt32(0)
                    Return count
                End If
            End Using
        End Using
    End Using
End Function

Protected Sub txtUserName_TextChanged(ByVal sender As Object, ByVal e As EventArgs) Handles txtUserName.TextChanged

End Sub
End Class 
```

其他页面：

```
Public Class CusRecords
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    If Session("FirstName") IsNot Nothing Then
        lbl1.Text = DirectCast(Session("FirstName"), String)
    Else
        lbl1.Text = "It is empty"
    End If

End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:41:39.400

首先确保会话不为空

```
If Session("FirstName") IsNot Nothing Then
    lbl1.Text = DirectCast(Session("FirstName"), String)
End If 
```

如果错误仍然存​​在，请确保 lbl1 不为空

另外，请注意这一行：

```
If userCount > 0 And paasCount > 0 Then
    Session("FirstName") = txtUserName.Text
Else
    lblErr.Visible = True
End If
Response.Redirect("CusRecords.aspx") 
```

因此，即使您没有设置 Session("FirstName") 变量，***您也总是会重定向- 这可能就是它为 null 的原因***

**编辑：**
最后的问题是调用 Page_Load 中的 Session.Clear() 和 Session.Abandon()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:58:18.803

我通过删除这一行来修复它

```
Session.Abandon() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T12:06:40.683

试试这个 lbl1.Text = Session("FirstName") 不要输入 ToString()。

# javascript - Extjs4 mvc 设计思路

> ID：13975570
> 
> 赞同：5
> 
> 时间：2012-12-20T15:38:07.917
> 
> 标签：javascript, model-view-controller, extjs, extjs4.1, extjs-mvc

我还在学习 Extjs 和 mvc，所以我有一个设计问题，我相信有人可以为我解答。我的问题是：

我有 2 个控制器来处理两个不同的视图。调用两个控制器中的任何一个以根据用户类型呈现正确的视图。因此，在我的情况下，如果用户是管理员，那么他们将根据凭据获得管理员视图，如果该人是标准用户，那么他们将获得标准视图。决策逻辑应该放在 app.js 中还是应该有另一个控制器来决定调用哪个控制器？

**我正在考虑的一种方式：**

管理员控制器

```
Ext.define('adminController', {

      // handles admin 
}) 
```

标准用户控制器

```
Ext.define('standardController', {

      // handles standard 
}) 
```

应用程序.js

```
 Ext.application({
   name: 'MTK',
   autoCreateViewport: true,

     if(admin) {
       controllers: ['adminController']
     }
     else(std){
       controllers: ['standardController']
     }
}); 
```

**另一个想法：**

管理员控制器

```
Ext.define('adminController', {

    // handles admin 
}) 
```

标准用户控制器

```
Ext.define('standardController', {

    // handles standard
}) 
```

主控制器

```
Ext.define('mainController', {

   if(admin){
      call adminController
   } 
   else(std){
      call standardController
   }
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:04:37.460

我不会在前端做（或至少做太多）这个。我想您应该能够在用户登录时知道用户角色。

对我来说，我是这样做的，但我必须说我有一个更复杂的 ACL，而且我不会用后端拒绝任何访问的模块或视图来打扰用户。

我正在使用这两种方法：

*   成功登录后重新加载/重定向到应用程序视图（后端！）。服务器知道用户会话要交回什么
*   成功登录后返回配置，女巫包含下一步需要的信息（这可能只是一个控制器或更多类）

两种方法都可以减少代码、更快的加载和更容易的调试

我希望这能为您指明正确的方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T20:16:54.823

有趣的问题，我同意@sra 的观点，尽管这并不是说它不起作用，但它可能不是通过客户端逻辑执行此操作的正确方法。

在我一直在开发的应用程序中，我们使用了定义所有控制器的方法，这些控制器可能会或可能不会在“导航”样式控制器中调用。这是我们直接实例化的唯一一个，然后首先基于默认值，然后，我们选择直接交互来呈现适当的控制器和视图，这有点像@sra 建议的第二种方法。

我认为 sra 的第一种方法总的来说是明智的，但是当您可能有一个视图作为管理员应该是可编辑的并且作为用户应该是只读的时，问题就来了。您不想在这种情况下编写两个视图。

我没有尝试过的一件事（但这个问题让我想要！）是返回 a) 基于服务器端逻辑的稍微不同的模型，如“用户”或“只读用户”并将其弹出到同一个视图中（保存需要两个视图）或b）返回一个更复杂的模型，每个数据属性都带有一个“可编辑”标志。然后，这可用于在应用程序中呈现不同的字段或不同模式的字段.....我知道这并不能回答问题，但对您选择的方法以及您希望报告的任何发现感兴趣！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T20:30:40.893

我认为正如 sra 正确指出的那样，让服务器向您发送有关登录用户类型的正确信息。在客户端，让一个控制器决定要呈现哪个视图。这应该是处理登录页面的同一控制器。CARD VIEW 是您可以用于此目的的布局。呈现页面后，让另一个控制器处理在该视图中触发的事件

并且控制器不应执行作为视图工作的渲染部分的任何方式，仅使用控制器对视图中触发的事件做出反应

# django - django 中的静态文件 - 应该在 app_name 文件夹中？

> ID：13975572
> 
> 赞同：0
> 
> 时间：2012-12-20T15:38:11.630
> 
> 标签：django

在我的应用程序文件夹中，我有文件夹`static`和里面`css`，，`js`和`img`文件夹。

没关系，还是我应该保持这样`static -> app_name -> css,js,img`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:47:52.923

与模板类似，建议使用应用程序名称在 static 内的目录来命名您的静态资源。但是，这仅在应用程序要在多个项目中重用并且有可能覆盖其他部署中的静态资源时才真正有用。由于 Django 鼓励将所有应用程序构建为可重用组件，因此建议使用此内部目录，但也不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:00:16.157

静态文件可以在 app 文件夹或项目文件夹中，也可以在项目文件夹的子文件夹中。但是你必须告诉程序这些文件在哪里。所以你必须在 SETTINGS 文件中提到它。

# .htaccess - 需要htaccess重写条件

> ID：13975579
> 
> 赞同：1
> 
> 时间：2012-12-20T15:38:23.337
> 
> 标签：.htaccess, mod-rewrite

我正在尝试设置我的 URL 重写以检查某个模板，如果它不存在，请使用默认模板

所以如果我有一个网址： [http ://www.mysite.co.uk/feed/](http://www.mysite.co.uk/feed/)

我希望它检查 feed.php 是否存在，如果存在就使用它，但如果它不使用 page.php?page=feed 代替

这是我目前拥有的：

```
Options +FollowSymlinks
RewriteEngine On

RewriteRule ^([^/.]+)/$ $1.php
RewriteRule ^([^/.]+)/$ page.php?page=$1 [L]

ErrorDocument 404 /404.php 
```

如果 feed.php 存在，它可以正常工作，但是当它不存在时，它会直接默认为我的自定义 404.php 并绕过第二个重写规则

我知道我需要某种 RewriteCondition 但我对此知之甚少，也找不到相关的例子

任何帮助将非常感激！=D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:56:45.657

试试这个 ：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} /(.*)/
RewriteCond /%1.php !-f
RewriteRule .* /page.php?page=%1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:51:21.320

您需要添加检查以查看文件是否不存在

```
# serve file if exists
RewriteCond ^([^/.]+).php !-f
RewriteRule ^([^/.]+)/$ page.php?page=$1 [L] 
```

这应该是之后的第一条规则`RewriteEngine On`

# c# - Visual Studio 将 bin 文件添加到项目中

> ID：13975580
> 
> 赞同：6
> 
> 时间：2012-12-20T15:38:26.577
> 
> 标签：c#, visual-studio-2010, mstest, coded-ui-tests

环境：VS 2010\. TFS。

对于我的一个项目，每当我编译时，VS 都会在我的项目中添加一个 bin 文件夹。我可以删除它，但是当我编译时，它会重新添加。这是我以前没有见过的行为，在解决方案的其他项目中也不存在。请参阅下面的图片了解更多详细信息。

![Bin 文件被添加到 ASI 项目中。](../Images/d8047666e61f45b277a787457843327c.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T15:40:29.593

该 bin 文件尚未添加到您的项目中。它是在您构建的文件系统上创建的。这就是为什么您将其视为透明文件的原因。如果您不想查看文件系统上的文件，则应切换此可见性。

您可以使用解决方案资源管理器下的第三个图标（在您发布的图像中）执行此操作。

**Visual Studio 2019 更新**

`Show All Files`现在是显示的第 9 个按钮`Solution Explorer`（它会随着 IDE 的新版本的发布而移动）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T15:40:13.860

因为那是编译输出的地方。

您似乎正在显示项目中未包含的文件夹。如果您不想看到它，您可以关闭该设置。

您还可以移动编写编译输出的位置：![在此处输入图像描述](../Images/f50f2cdc04dad7e70a6d7b2597a9f3df.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T15:42:19.587

它只是向您显示目录结构，它并不是真正的“在项目中”。项目 | 显示所有文件将切换此。

# midi - 将 MIDI 增量时间转换为秒

> ID：13975582
> 
> 赞同：1
> 
> 时间：2012-12-20T15:38:33.783
> 
> 标签：midi, milliseconds

我的目标是从标准 MIDI 文件中检索确切的音符开/关时间。该文件是类型 1（它有几个轨道），计时模式是每季度滴答声。

我的做法：

1.  我在每首曲目中搜索 setTempo-Events 并将它们全部放入列表中。我还将连续 setTempo-Events 之间的滴答数存储在我的列表中。

2.  然后我将每个事件的所有 deltaTimes 相加，并获得每个事件相对于零刻度的绝对刻度数。

3.  最后，我从绝对滴答数和包含 tempi 的列表中计算出以秒为单位的时间

这是从 MIDI 文件获取音符开始的正确方法，还是我也必须考虑时间签名？- setTempo-event 的数据是微秒/季度还是微秒/节拍？

另一个问题：假设我有一个包含两个轨道的文件。轨道二在文件的最后只有 1 个事件，假设 deltatime=1000。轨道一有两个 setTempo-Event，一个 deltatime=0，另一个 deltatime=500。

哪个速度用于等待第二轨中的 1000 个滴答声 - 第一个速度，第二个或两者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T19:03:58.273

我使用的一般策略是：

1.  在列表中记录所有速度变化。
2.  对于每个速度变化，使用前一个速度及其实时计算该速度变化的实时时间。这将产生一个节奏“间隔”列表，其开始时间以节拍为单位，开始时间以秒为单位
3.  对于每个事件，确定它属于哪个节奏间隔，并计算它从节奏间隔开始以来的实时时间

如果您按顺序一次完成所有处理，则一旦建立了音程，确定音符落入哪个音程就相当简单了。

对于您的第二个问题-所有先前的节奏都会影响事件的实时性。上述策略将解释所有这些。

# ios - ios - 我如何判断 AFNetworking 远程调用中返回的字符串

> ID：13975583
> 
> 赞同：3
> 
> 时间：2012-12-20T15:38:36.273
> 
> 标签：ios, afnetworking

如果失败，我有这个代码：

```
failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) 
```

我想记录返回的字符串。我应该从哪个变量中做到这一点以及如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:05:10.430

因此，通常您想要打印错误，这将打印您的服务器报告为错误的任何内容。当它收到错误的类型（纯文本而不是 application/json）或状态码 > 400（如 (404, 401) 之类的东西）时，会触发失败消息。

如果您正在进行错误检查，您应该在响应标头中设置状态码，然后将其与返回数据进行比较，`response.statusCode`或者很可能在您返回数据时，您应该在成功块中进行错误检查。

如果您绝对需要从响应中访问 responseString，您可以使用`operation.responseString`where 操作是 AF 请求操作。

**更新**

[这是来自https://github.com/AFNetworking/AFNetworking/issues/137](https://github.com/AFNetworking/AFNetworking/issues/137)的@mattt 的示例：

```
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"Friend Request Sent");
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"[Error]: (%@ %@) %@", [operation.request HTTPMethod], [[operation.request URL] relativePath], operation.error);
}]; 
```

# java - 为什么在 IE 中更喜欢使用 CSS 而不是 XPath？

> ID：13975595
> 
> 赞同：5
> 
> 时间：2012-12-20T15:39:24.987
> 
> 标签：java, css, xpath, selenium, webdriver

我正在开发一个仅与 IE7 和 IE8 兼容的应用程序。我不知道为什么，但有些人建议在识别 IE 中的元素时使用 CSS over XPath。当我访问 Selenium 官方网站时。我读了消息

> WebDriver 尽可能使用浏览器的本机 XPath 功能。在那些没有原生 XPath 支持的浏览器上，我们提供了自己的实现。除非您意识到各种 xpath 引擎的差异，否则这可能会导致一些意外行为。

我想知道在哪里可以找到各种 xpath 引擎的差异，在哪些情况下我应该使用 CSS，以及如果我使用 IE，我应该在哪些 XPath 中找到。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T21:23:12.660

根据[酱实验室的 Ashley Wilson 的报告](http://sauceio.com/index.php/2011/05/why-css-locators-are-the-way-to-go-vs-xpath/)：

**优点**：

1.  他们更快
2.  它们更具可读性
3.  CSS 是 jQuery 的定位策略
4.  反正没有其他人使用 XPATH！

它有点过时了，但是这里是数字：

![图片来自原因实验室的网站](../Images/8c86e5b1a3328cc62d247d3c190a8473.png)

就个人而言，我会争论 (2)-nd 陈述，我必须同意其余的。

**缺点**：

1.  没有“自下而上”的导航。XPath 有`elem\..\another_elem`
2.  Sizzle 注射了吗？还是使用了浏览器的 CSS 定位器解析器？取决于浏览器，并且存在不一致。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T12:55:17.957

在 IE 中建议使用 CSS 选择器而不是 XPath 的最大原因是性能。IE 不像 Firefox 和 Chrome 那样提供原生 XPath-over-HTML 选项。然而，它确实提供了一个原生 CSS 选择器引擎，它**总是**比 IE 驱动程序中使用的纯 JavaScript XPath 引擎实现更快。性能比较甚至不接近。我已经看到 XPath 定位器比 CSS 选择器慢一个数量级（尽管我现在找不到引用）。在 IE 9 之前的版本中尤其如此，其中 IE JavaScript 引擎比 32 位 IE9 中引入的 Chakra JavaScript 引擎慢得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-24T18:21:02.983

## 除了速度之外，简洁和清晰是其他原因。

除了速度之外，我发现 css 通常更短、更干净、更易于阅读。例如：

路径：

```
 //ol[@class='choice-group'//li//label//input 
```

对比

CSS：

```
 css=ol.choices-group li label input 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T11:29:06.397

使用 CSS 定位器是最好的选择，不仅在 IE 上，在 FF 和 Chrome 上也是如此。此外，xpath 始终是最糟糕的选择，因为它需要解析整个页面以找到一个简单的元素，所以如果您希望在测试中获得性能并且可以避免它，那就去做吧。

此外，如果您使用的是 pageObjects，我强烈建议您使用 cacheLookup，这样该元素只会定位一次：

```
@CacheLookup
@FindBy(id="doLogin")
private WebElement loginButton; 
```

就个人而言，我执行以下操作：

*   如果元素具有 css 类，请使用此定位器
*   如果元素具有名称或 ID，请使用此定位器
*   如果以上都不存在，并且您不能使用 linkText 或其他定位器，请使用 xpath。

# sql - MS ACCESS 数据库中与 DISTINCT 关键字相关的问题

> ID：13975596
> 
> 赞同：0
> 
> 时间：2012-12-20T15:39:30.893
> 
> 标签：sql, database, ms-access

> **可能重复：**
> [MS ACCESS：如何使用访问查询计算不同的值？](https://stackoverflow.com/questions/1412442/ms-access-how-can-i-count-distinct-value-using-access-query)

我在 MSAccess 数据库中有数据库文件..

我在 ACCESS 数据库中使用了以下查询：

```
Select COUNT(Distinct(PRS.prs_personId)) From tb_personDepartment 
```

但它给出了错误说：`UnDefined function Distinct in expression`

我也试过以下：

```
Select Distinct(COUNT(PRS.prs_personId)) From tb_personDepartment 
```

它可以工作，但没有从数据表中获得不同的 PersonId。

如何在 MS ACCESS 数据库中使用 Distinct 关键字和 Count() 函数？

谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T15:41:11.140

不幸的是，MS Access 不允许您同时使用它们（例如`count(distinct yourCol)`，因此您可以使用子查询：

```
SELECT Count(*) as Total
FROM 
(
    SELECT DISTINCT PRS.prs_personId
    FROM tb_personDepartment
) 
```

# c# - 更新 Active Directory 缩略图时出现“指定的目录服务属性或值已存在”错误

> ID：13975600
> 
> 赞同：0
> 
> 时间：2012-12-20T15:39:41.633
> 
> 标签：c#, active-directory, userprincipal

我正在尝试以编程方式从 ac# webservice 更新各种 AD 属性。

我可以更新电话/办公室/标题等没问题，但是当我尝试更新 ThumbnailPhoto 时出现错误：指定的目录服务属性或值已存在

我正在通过扩展类进行更新（根据[Get job title using System.DirectoryServices.AccountManagement](https://stackoverflow.com/questions/9540436/get-job-title-using-system-directoryservices-accountmanagement)）

我用来更新 AD 记录的代码是：

```
public ADRecord UpdateADRecord(string UserName)
    {
        DeltekRecord dr = GetDeltekRecord(UserName);
        UserPrincipalEx upx = GetUser(UserName);

        upx.Office = GetFriendlyFieldName(dr.Office);
        upx.MobilePhone = dr.MobilePhone;
        upx.TelephoneNumber = dr.WorkPhone;
        upx.Department = GetFriendlyFieldName(dr.BusinessUnit);
        upx.Title = dr.Title;

        // Handle Company 
        string Company = "";
        if ((dr.Org ?? "").Contains(":FOO:"))
            Company = "Foo";
        else
            Company = "Bar";
        upx.Company = Company;

        // Handle Home Phone
        string HomeNo = "";
        if ((dr.WorkPhone.Length > 0) && (dr.Office.Length > 0))
        {
            switch (dr.Office.ToLower()) {
                case "washington":
                    HomeNo = "8" + dr.WorkPhone.Substring(dr.WorkPhone.Length - 3, 3);
                    break;
                case "ohio":
                     HomeNo = "9" + dr.WorkPhone.Substring(dr.WorkPhone.Length - 3, 3);
                     break;
                case "nooyoik":
                    HomeNo = "2" + dr.WorkPhone.Substring(dr.WorkPhone.Length - 3, 3);
                    break;
                default: 
                    HomeNo = "";
                    break;
            }

        }

        upx.Thumbnail = null;
        upx.Thumbnail = GetThumbnail(dr.Employee);

        upx.Save();

        ADRecord adr = GetADRecord(UserName);
        return adr;
    } 
```

一些谷歌搜索建议我需要先清除缩略图属性。如上所述，已尝试将其设置为空，但没有任何乐趣。

编辑：添加我之前错过的方法

```
 // Get the relevant details from AD
    [WebMethod]
    public ADRecord GetADRecord(string userName)
    {
        ADRecord adr = new ADRecord();

        PrincipalContext oPrincipalContext = GetPrincipalContext();
        // Search the directory for the new object. 
        UserPrincipalEx myUser = UserPrincipalEx.FindByIdentity(oPrincipalContext, userName);

        if (myUser != null)
        {
            adr.Company = myUser.Company;
            adr.Department = myUser.Department;
            adr.HomePhone = myUser.HomePhone;
            adr.MobilePhone = myUser.MobilePhone;
            adr.Office = myUser.Office;
            adr.TelephoneNumber = myUser.TelephoneNumber;
            adr.ThumbNail = myUser.Thumbnail;
            adr.Title = myUser.Title;

        }
        return adr;

    }

     // Get the user's thumbnail
    [WebMethod]
    public byte[] GetThumbnail(int EmpNo)
    {
        System.Net.WebClient wclient = new System.Net.WebClient();
        wclient.Credentials = new System.Net.NetworkCredential("user","pass", "domain");

        string url = "http://myurl.mycompany.com/PeopleEmployeePhoto.ashx?Employee=" + EmpNo;
        byte[] imageData;
        using (wclient)
        {
            imageData = wclient.DownloadData(new Uri(url));
        }

        return imageData;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:12:30.370

我不熟悉 UserPrincipalEx，但我猜您必须在将缩略图设置为 null 后调用 Save 函数才能在服务器上实际清除它。

# visual-studio-2010 - MSB6006：“CL.exe”以代码 2 退出

> ID：13975605
> 
> 赞同：3
> 
> 时间：2012-12-20T15:39:53.037
> 
> 标签：visual-studio-2010

使用 Windows 7 和 Visual Studio 2010，我使用以下命令行作为大型项目编译的一部分：

C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\CL.exe /c /I"C:\Program Files (x86)\Windows Installer XML v3.5\sdk\inc" /Zi / nologo /W3 /WX- /O 2 /Oi /Oy- /GL /D WIN32 /D NDEBUG /D _WINDOWS /D *USRDLL /D CUSTOMACTIONTEST* EXPORTS /D _WINDLL /D _UNICODE /D UNICODE /Gm- /EHsc /MT /GS /Gy /fp:精确 /Zc:wchar_t /Zc:forScope /Yc"StdAfx.h" /Fp"obj\Release\FalconViewRegistryCA.p ch" /Fo"obj\Release\" /Fd"obj\Release\vc100\. pdb" /Gd /TP /analyze- /errorReport:queue stdafx.cpp

报此错误：

C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp .Win32.Targets(57,5): error MSB6006: "CL.exe" exited with code 2.

当我在 IDE 中编译并且 Microsoft.Cpp .Win32.Targets 中的行是条件编译时，我得到了同样的错误：

```
<CL Condition="'%(ClCompile.PrecompiledHeader)' == 'Create' and '%(ClCompile.ExcludedFromBuild)'!='true'" 
```

我已经搜索了这个问题，并且这个问题的唯一其他问题说这是由于路径问题。 [错误 MSB6006：“CL.exe”以代码 2 退出](https://stackoverflow.com/questions/13948990/error-msb6006-cl-exe-exited-with-code-2)

我已经对 Visual Studio 进行了修复，但仍然出现相同的错误。此版本在 Windows XP 机器上正常工作，当我们升级到 Windows 7 时开始出现错误。任何帮助或澄清将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-04T15:12:48.000

如果它对其他人有帮助，我也会收到此错误并找到修复/补丁。

我的条件：

1.  视觉工作室 2015
2.  包括定义模板类的文件
3.  该文件定义了 3 个具有依赖链的模板类：linkedlistnode、linkedlistiterator 和linkedlist
4.  解决问题后，其中一个类出现构建错误：C2838 '=': 成员声明中的非法限定名
5.  所有 3 个类都是单独定义和声明的（即有一个包含函数声明的类定义，并且在同一文件的底部定义了函数。）

当我合并类声明和定义时，解决了 MSB6006: “CL.exe” exited with code 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-13T00:55:24.020

我还发现，如果在 CPP 文件中编译方法体，则编译器会崩溃，但是当将方法体放入头文件时，编译器不会崩溃，并正确报告导致的实际源代码错误问题。在我的情况下，我的类定义有一个错字，该类是它自己的基类。这是 VS2019 的情况，因此 MS VC++ 中仍然存在编译器错误。

# gwt - 有没有更好的方法来改变背景图片

> ID：13975608
> 
> 赞同：0
> 
> 时间：2012-12-20T15:39:59.213
> 
> 标签：gwt

我有 2 个图像，我想根据按钮单击在它们之间交换

```
private Image widget1 = new Image("images/AU-wp5.jpg");
private Image widget2 = new Image("images/GB-wp1.jpg");
private boolean flag = false;

private void onClick()
{
    flag = !flag;
    if(flag)
    {                       
        RootPanel.get("stockList").add(widget1);
        RootPanel.get("stockList").remove(widget2);
    }
    else
    {           
        RootPanel.get("stockList").add(widget2);
        RootPanel.get("stockList").remove(widget1);
    }
} 
```

这是在图像之间交换的正确方法吗？我已经读过关于拥有一个图像并更改其网址但无法以这种方式工作的信息，只能这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:01:10.057

如果您确定图像已修复，那么您应该考虑使用 GWT 的 Dev Guided Client Bundle 功能以确保最佳优化和性能。相关部分[https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#ImageResource](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#ImageResource)。

其使用的最佳示例是在树节点 + 和 - 符号切换中。

[http://code.google.com/p/google-web-toolkit/source/search?q=CellTree&origq=CellTree&btnG=Search+Trunk](http://code.google.com/p/google-web-toolkit/source/search?q=CellTree&origq=CellTree&btnG=Search+Trunk)

```
 public interface BasicResources extends Resources {

    @ImageOptions(flipRtl = true)
    ImageResource cellTreeClosedItem();

    @ImageOptions(flipRtl = true)
    @Source("cellTreeLoadingBasic.gif")
    ImageResource cellTreeLoading();

    @ImageOptions(flipRtl = true)
    ImageResource cellTreeOpenItem();

    /**
     * The styles used in this widget.
     */
    @Source(BasicStyle.DEFAULT_CSS)
    BasicStyle cellTreeStyle();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:15:40.420

正如 SSR 所提到的，您可以通过单元资源来完成，或者您可以选择使用 CSS 的更简单且推荐的方法。

```
Button button = new Button ( "Click me" );
private boolean flag = true;
button.addClickHandler ( new ClickHandler() 
{
     public void OnClick()
     {
             b.setStyleName( "my-button-clicked-" + flag );
             flag = !flag;
     }
} 
```

你的 CSS 可能看起来像这样

```
.my-button-clicked-true{
 background : url ( // image path )
}

.my-button-clicked-false{
 background : url ( // image path )
} 
```

# c++ - 使用指针交换两个变量

> ID：13975617
> 
> 赞同：1
> 
> 时间：2012-12-20T15:40:21.613
> 
> 标签：c++, void-pointers

我正在尝试使用指针（特别是 void 指针）按引用编写交换函数，但我的代码不起作用。这是我的代码：

```
void swap(void *p1,void *p2) 
{
    int temp;   
    temp=*((int*)p2);
    p2=p1; 
    p1=&temp;
}

int main() 
{
    int i=4;
    int j=5; 
    cout<<i<<j<<endl;
    swap(&i,&j); 
    cout<<i<<j<<endl;
    return 0;
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T15:44:03.573

该代码不起作用，因为您没有取消引用分配上的指针。它应该是

```
*((int*)p2)=*((int*)p1);
*((int*)p1)=temp; 
```

`void*`请注意，您正在做出指向的假设`int`，但显然并非总是如此。本质上，您不妨替换`void*`为`int*`，并摆脱演员表。

API 的更一般情况应如下所示：

```
void swap(void *p1,void *p2, size_t sz) 
```

在内部，API 应该分配一个大小为 的缓冲区`sz`，将 a`memcpy`放入其中，然后进行交换，再次使用`memcpy`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:57:46.113

在函数体中，您交换了`p1`and的值`p2`；你不想那样做。您想交换 what`p1`和`p2` *point*的值：

```
void swap(int *p1, int *p2)
{
  int tmp = *p1;
  *p1 = *p2;
  *p2 = tmp;
} 
```

我知道你想用`void *`你的论点。不。无论如何，您必须将它们转换为适当的目标类型才能执行分配：

```
int tmp = *(int *) p1;
*(int *) p1 = *(int *) p2;
*(int *) p2 = tmp; 
```

呸。通过提出论点，您并没有为自己节省任何东西`void *`。

由于您显然是在编写 C++，因此您可以使用模板使函数泛型：

```
template<typename T>
void swap(T *p1, T *p2)
{
  T tmp = *p1;
  *p1 = *p2;
  *p2 = tmp;
} 
```

更好的是，使用模板和*引用*，所以你根本不用处理指针：

```
template<typename T>
void swap(T &p1, T &p2)
{
  T tmp = p1;
  p1 = p2;
  p2 = tmp;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:50:53.767

您正在修改指针的副本，而不是它们的内容。你应该做这样的事情（只是向你展示这个想法，如果没有演员表，这将无法工作，而且它仍然不是一个好主意）：

```
temp = *p2
*p2 = *p1;
*p1 = temp; 
```

如果要交换指针，您将需要指向指针的指针：

```
void swap(void** ptr1, void** ptr2); 
```

或对指针的引用：

```
void swap(void*& ptr1, void*& ptr2); 
```

或者由于您显然使用的是 C++，您可以使用引用和模板来交换任何类型的数据。但是您确定您了解该语言的所有基础知识吗？

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T15:53:33.120

使用记忆功能

```
void swap (void *vp1, void *vp2, const int size) {
char *buffer = (char *)malloc(sizeof(char)*size);
memcpy(buffer, vp1, size);
memcpy(vp1, vp2, size);
memcpy(vp2, buffer, size);
free(buffer);
}

int main()
{
int a = 10, b = 20;
printf("%d %d"a,b);
swap(&a, &b, sizeof(int));
printf("%d %d"a,b);

}

Output is:

10 , 20
20 , 10 
```

如果我们不知道数据类型，那么我们使用 void。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T16:23:57.217

试试这个：

```
#include <iostream>
using namespace std;

void swap( void *a, void *b ) {
  int tmp = *( ( int* )a );
  *( ( int* )a ) = *( ( int* )b );
  *( ( int* )b ) = tmp;
}

int main() {
  int a, b;
  cin >> a >> b;
  swap( &a, &b );
  cout << a << " " << b;
  return 0;
} 
```

在取消引用指针 a 和 b 之前，必须先将它们转换为`int*`. 之后，您只需执行交换。

*注意：*您不需要`void*`作为参数传递。如果你通过`int*`s，它也是正确的（并且更具可读性）。

*注意[2]：*由于您使用 C++ 编程，因此您可以使用指针引用而不是指针引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-15T08:07:48.870

试试下面的代码：

```
#include <iostream>
using namespace std;

void Swap(int **ptr1, int **ptr2){
    // Swapping the contents of p1 and p2 in the driver function
    int *temp;
    temp = *ptr1;                   
    *ptr1 = *ptr2;
    *ptr2 = temp;
    // Swapping the contents of x and y in the driver function
    int temp;
    temp = **ptr1;                  
    **ptr1 = **ptr2;
    **ptr2 = temp;
}

int main(){
    int x = 10, y = 15;
    int *p1 = nullptr;
    p1 = &x;
    int *p2 = nullptr;
    p2 = &y;
    cout << x << ' ' << y << endl;
    cout << *p1 << ' ' << *p2 << endl;
    Swap(&p1,&p2);
    cout << x << ' ' << y << endl;
    cout << *p1 << ' ' << *p2 << endl;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-09T14:31:50.817

在驱动功能代码中交换 p1 和 p2 的内容是行不通的。这可能是因为您正在尝试交换内存地址的起始位置，而操作系统对此进行了限制。?? 然而，记忆功能可以完成这项工作。

# c - 编写递归字符串反向器我的较小输入是什么？

> ID：13975625
> 
> 赞同：3
> 
> 时间：2012-12-20T15:40:40.783
> 
> 标签：c, arrays, recursion

我的练习说我需要使用这个原型编写一个递归函数来反转给定的字符串： `void reverse(char s[]);`

我被允许使用的唯一预先编写的函数`strlen()`来自`string.h`库。

我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T16:00:13.067

首先让您的函数调用另一个执行实际递归的函数：

这可能是更熟悉的递归签名：

```
void reverse(char s[]) 
{
    reverse_helper(s,strlen(s));
}

void reverse_helper(char s[], int position) 
{
 // actual recursive code goes here
} 
```

* * *

由于您不能使用辅助函数：

这是家庭作业，听起来您不只是想要答案，所以问自己以下问题。

你的基本情况是什么？

> strlent(s) <= 1 //
> 在 strlen(s) == 2 处不需要反转，我们需要一个没有递归的简单反转。

我们知道反转 2 长度的 char 数组是微不足道的，但是如何反转 3 长度的 char 数组呢？

> 从 3 长度数组中取出最后一个字符并将其放在反向 2 长度数组的前面。

我的recusive call的通行证是`reverse`什么？

> 一个小一号的新 char 数组。

# php - 我的 PHP 类中的函数数量会影响性能吗？

> ID：13975630
> 
> 赞同：1
> 
> 时间：2012-12-20T15:40:53.207
> 
> 标签：php, performance, class

我正在编写一个 PHP 类，该类现在超过 4800 多行（目前大约 202KB）——它包含大量函数。它*几乎*是一个框架，但不够通用（或高级），不足以配得上这个词。

有一个`__construct()`连接到数据库并运行一个选择查询的函数，没有公共函数。

我只是将文件包含在我需要使用它的页面中，然后像这样调用它：

`<?php $myFramework = new MyFramework(); ?>`

这是我的问题 - 除了函数运行时的影响之外，我的类中的函数数量是否对性能有任何影响`__construct()`？

包含一个 202KB 的文件是否会以任何方式减慢我的 Web 应用程序的速度，因此建议将我的函数拆分为更小的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:42:58.870

**仅在您的情况下，但通常不是：**

如果谈论速度，将您的函数拆分为更小的文件将增加包含的数量并大大降低您的应用程序的速度。
正如你所说，你的方法**是合乎逻辑**的，所以你可以**保持你的代码不变**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:47:50.637

**没有办法告诉...**

可能听起来有点模糊，但它是如此通用，你可以确定的唯一方法就是测量它。

再说一次，如果您担心性能，您可能会实现像**[APC](http://pecl.php.net/package/apc)**这样的操作码缓存。一旦你这样做了，类就被缓存了，解析所有的代码就无关紧要了。

根据经验，数据库查询几乎总是最先被优化和瓶颈，但如果有疑问，请测量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T15:50:30.727

这在很大程度上取决于每个请求是否都需要所有代码这一事实。如果没有，您将在每个请求中加载更多的数据，然后是必要的。

基本上：如果每个请求都需要所有代码，那么将它们全部放在一个文件中是最快的。如果不是，拆分它会快得多。

# java - 如何使用 JAXB 解组重复的嵌套类？

> ID：13975632
> 
> 赞同：11
> 
> 时间：2012-12-20T15:40:58.050
> 
> 标签：java, jaxb

我如何指示 JAXB 处理这个？

**XML**

```
<root>
 <parent>
    <child id="1" name="foo" />
 </parent>
 <parent>
    <child id="3" name="foo2" />
 </parent>
 <parent>
    <child id="4" name="bar2" />
 </parent>
 <parent>
    <child id="2" name="bar" />
 </parent>
</root> 
```

**根.java**

```
@XmlRootElement
public class Root {
   @XmlElement(name="parent/child")
   List<Child> allChildren;
} 
```

这不起作用...... allChildren 是空的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T15:47:54.840

您可以更改模型并执行以下操作：

**根**

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {
   @XmlElement(name="parent")
   List<Parent> allParents;
} 
```

**家长**

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Parent {
   @XmlElement(name="child")
   List<Child> allChildren;
} 
```

* * *

**更新**

> 是否可以避免父类？

有几种不同的方法可以做到这一点：

**选项 #1 - 使用 XmlAdapter 的任何 JAXB 实现**

您可以使用 XmlAdapter 在`Parent`类中虚拟添加。

**子适配器**

```
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class ChildAdapter extends XmlAdapter<ChildAdapter.Parent, Child> {

    public static class Parent {
        public Child child;
    }

    @Override
    public Parent marshal(Child v) throws Exception {
        Parent parent = new Parent();
        parent.child = v;
        return parent;
    }

    @Override
    public Child unmarshal(Parent v) throws Exception {
        return v.child;
    }

} 
```

**根**

`@XmlJavaTypeAdapter`注释用于`XmlAdapter`引用.

```
import java.util.List;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

   @XmlElement(name="parent")
   @XmlJavaTypeAdapter(ChildAdapter.class)
   List<Child> allChildren;

} 
```

**孩子**

```
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Child {

    @XmlAttribute
    int id;

    @XmlAttribute
    String name;

} 
```

**选项 #2 - 使用 EclipseLink JAXB (MOXy)**

如果您使用[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)作为您的[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现，那么您可以执行以下操作（注意：我是 MOXy 负责人）：

**根**

```
import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

   @XmlElement(name="parent")
   List<Child> allChildren;

} 
```

**孩子**

MOXy 的注释与您尝试在帖子`@XmlPath`中使用注释的方式非常相似。`@XmlElement`

```
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlAccessorType(XmlAccessType.FIELD)
public class Child {

    @XmlPath("child/@id")
    int id;

    @XmlPath("child/@name")
    String name;

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/07/xpath-based-mapping.html](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html)
*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T16:14:57.153

您将必须创建一个代表`<parent>`元素的类，例如

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Parent {
   @XmlElement(name="child")
   Child child;
} 
```

然后您可以创建一个类型适配器

```
public class ParentToChildAdapter extends XmlAdapter<Parent, Child> {
  public Parent marshal(Child c) {
    Parent p = new Parent();
    p.child = child;
    return p;
  }

  public Child unmarshal(Parent p) {
    return p.child;
  }
} 
```

并在根类上使用它

```
@XmlRootElement
public class Root {
   @XmlElement(name="parent")
   @XmlJavaTypeAdapter(ParentToChildAdapter.class)
   List<Child> allChildren;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T15:46:05.567

您可以尝试使用`XmlElementWrapper`注释，但我不确定它应该如何与多个包装器节点一起使用：

```
@XmlRootElement
public class Root {
   @XmlElementWrapper(name="parent")
   @XmlElement(name="child")
   List<Child> allChildren;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T16:00:48.047

试试这个

```
@XmlRootElement
class Root {
    List<Child> allChildren = new ArrayList<Child>();

    private static class Parent  {
        @XmlElement
        Child child;
    }

    @XmlElement
    public void setParent(Parent p) {
        allChildren.add(p.child);
    }
} 
```

# node.js - Node.JS ExpressJS 异步与同步

> ID：13975641
> 
> 赞同：1
> 
> 时间：2012-12-20T15:41:28.290
> 
> 标签：node.js, pug, express

早上好堆栈溢出

我有这条路线：

```
app.get('/myaccount', messages.getMessages, function(req, res, next) {
  messages = '';

  res.render('myaccount', {
    messages: messages
  });

}); 
```

messages.getMessages 通过超级代理调用另一台服务器并获取一些消息以带回给用户（在该消息变量中）来做很多事情

这里的问题是，有时...messages.getMessages 可能需要 2-3 秒才能检索所有消息，所以当我刷新页面时，有时我会看到消息...有时我不是很随机。

我对节点比较陌生，但我认为 messages.getMessages 是异步的，因此页面可能会完全呈现，并且在我取回消息之前将所有变量传递给 jamjs。

在继续渲染路由之前，我基本上如何要求路由等到我得到 messages.getMessages 数据？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:58:20.683

如果取决于您的 getMessages 函数的结构。它应该是这样的：

```
getMessages = function(req, res, next) {
   // asuming superAgent is async, pass the next 
   // function to it to call it AFTER it has completed
   superAgent(x, req, res, next);
}

superAgent = function(x, req, res, next) {
   // do something
   ...
   // call the callback
   next(req, res);
} 
```

需要注意的重要一点是，您的 getMessages 不应如下所示：

```
getMessages = function(req, res, next) {
   superAgent(x);
   next(req, res);
} 
```

因为在最后一个示例中，next() 将在 superAgent 完成之前被调用。

# visual-studio-2010 - F# 3.0 在 Visual Studio 2010 专业版上可用吗？

> ID：13975644
> 
> 赞同：6
> 
> 时间：2012-12-20T15:41:51.060
> 
> 标签：visual-studio-2010, f#, f#-3.0

我很想尝试 f# 3.0，但我只有 Visual Studio 2010 Professional。我知道 F# 3.0 随 Visual Studio 2012 开箱即用，但我还不能升级到 vs2012。

[Don Syme](http://blogs.msdn.com/b/fsharpteam/archive/2012/09/24/announcing-the-f-3-0-open-source-code-drop.aspx)最近的一篇 msdn 帖子暗示它可以与 Visual Studio 2010 一起使用，但似乎没有任何资源或解释说明这是如何实现的。

引用文章：

> ...要在 Visual Studio 2008 或 Visual Studio 2010 中使用 F# 3.0，包括免费工具，请访问 fsharp.net

但当然[fsharp.net](http://fsharp.net)只是转到一个推送 Visual Studio 2012 的[msdn 页面](http://msdn.microsoft.com/en-us/vstudio/hh388569.aspx)。

如果您查看帖子中的评论，我显然也不是唯一一个一直在问这个问题的人。

有没有人对此有任何运气，或者我是否需要使用 Visual Studio 2012 才能使用 f# 3.0？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T16:27:09.733

好吧，我直接找到消息来源并在 Don Syme 上发布了我的问题[。](https://twitter.com/dsyme/status/282059158742790145)您不能将 f# 3.0 与 Visual Studio 2010 一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:44:34.480

F# 3.0 目前是 Visual Studio 2012 的一部分，包括 VS Express。一个独立版本正在开发中（[有没有办法在没有 Visual Studio 的情况下安装 F# 3.0？](https://stackoverflow.com/questions/12421873/is-there-a-way-to-install-f-3-0-without-visual-studio)）

# gps - 需要实时 GPS 跟踪可视化和通信解决方案

> ID：13975658
> 
> 赞同：1
> 
> 时间：2012-12-20T15:42:30.943
> 
> 标签：gps, visualization, tracking

假设有一个人在田野里，他有一部安卓手机。手机配备GPS。我希望将 GPS 数据传输到我的 PC 并在 Google 地球中实时可视化。我希望能够同时通过电话与对象交谈，引导他/她穿越地形。

是否已经有这样的应用程序可用？如果没有，我会创建自己的。

非常感谢您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:50:12.393

[RealtimeTracker](https://play.google.com/store/apps/details?id=com.greenalp.RealtimeTracker&hl=nl)对于谷歌纬度或[MapTrack](https://play.google.com/store/apps/details?id=com.vistechprojects.maptrack)看起来很有希望或[latify](https://play.google.com/store/apps/details?id=com.ecs.latify) ......[在 Play 商店快速搜索](https://play.google.com/store/search?q=real%20time%20location%20sharing&c=apps)可以让你走很长的路......

# php - 使用 mysqli 连接错误

> ID：13975659
> 
> 赞同：2
> 
> 时间：2012-12-20T15:42:47.847
> 
> 标签：php, mysqli, database-connection

我有一个页面导航脚本，它在我的网站上每页返回 65 条记录。在我的托管服务提供商将我转移到另一台服务器之前，它一直运行良好。现在，当我转到该页面时，出现以下错误：

```
Warning: mysqli::connect() [mysqli.connect]: (28000/1045): Access denied for user 'root'@'localhost' (using password: NO) in /home/jumbleweed/public_html/registry/browse_2004.php on line 10

Warning: mysqli::query() [mysqli.query]: invalid object or resource mysqli in /home/jumbleweed/public_html/registry/page.php on line 34

Line 9:  $db = new mysqli('localhost', 'my_username', 'my_password', 'my_database');
Line 10: $db->connect(); 
```

page.php 的第 34 行：

```
public function countRecords() {
            //returns the number of records
            global $db;
            $count_query = "SELECT COUNT(*) FROM (".$this->query.") as temp";
Line 34:    $result = $db->query($count_query);
            $row = $result->fetch_row();
            return $row[0];
        } 
```

显然，我填写了正确的登录凭据以连接到数据库，但它似乎忽略了它们并尝试使用 root 作为用户名登录。

这是我的托管服务提供商以及他们如何设置服务器的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:26:12.487

由于您使用的是 MySQLi 构造函数，因此无需使用该`connect()`方法，因为它会自动连接到数据库。

**删除此行，它应该可以工作...**

```
Line 10: $db->connect(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:09:32.503

是的，根据评论者，我会放弃 ->connect() 电话。这就是破坏您的代码的原因。并切换到 localhost，因此它使用套接字而不是 IP 连接。

# javascript - Javascript 弹出窗口，可在一个页面上工作，但不能在另一个页面上工作

> ID：13975664
> 
> 赞同：0
> 
> 时间：2012-12-20T15:43:03.243
> 
> 标签：javascript

我网站的几个页面上有一个 javascript 弹出窗口。我使用了[在屏幕上居中弹出窗口中找到的居中弹出窗口？](https://stackoverflow.com/questions/4068373/center-a-popup-window-on-screen)

```
function popupwindow(url, title, w, h) {
    var left = (screen.width/2)-(w/2);
    var top = (screen.height/2)-(h/2);
    return window.open(url, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
} 
```

此弹出窗口适用于某些页面，但不适用于其他页面...

我制作了 2 页来显示，在第一页上弹出窗口有效
[http://www.weddingpages.nl/test1.php](http://www.weddingpages.nl/test1.php)
在第二页上弹出窗口不起作用：
[http ://www.weddingpages.nl/test2 .php](http://www.weddingpages.nl/test2.php)

页面的来源完全相同（复制、粘贴），只是在第二页我删除了表单。

因此，如果我理解正确，这个弹出式 JavaScript 仅在页面上还有表单时才有效？

这是弹出窗口工作的页面的代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>test1</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

        <script type="text/javascript">
            function popupwindow(url, title, w, h) {
                var left = (screen.width/2)-(w/2);
                var top = (screen.height/2)-(h/2);
                return window.open(url, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
            }
        </script>
    </head>
    <body>
        <form class="form-horizontal" action="" method="post">
            <div class="control-group">
                <label class="control-label" for="title">Naam website / bedrijf:</label>
                <div class="controls">
                    <input type="text" class="span3" id="title" name="title" placeholder="Naam website / bedrijf">
                </div>
            </div>
            <div class="control-group">
                <div class="controls">
                    <button type="submit" name="submit" class="btn">Gegevens opslaan</button>
                </div>
            </div>
        </form> 
        <a href="javascript:popupwindow('http://www.google.com/', title, 1400, 700)">centered Pop up window</a> 
    </body>
</html> 
```

因此，如果您删除表单，javascript 将停止工作。

有没有人可以告诉我为什么？我试图找到解决方案已经将近 2 天了:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:46:56.570

在将其传递给函数之前，您没有定义“标题”参数。尝试改变这一点：

```
<a href="javascript:popupwindow('http://www.google.com/', title, 1400, 700)">centered Pop up window</a> 
```

有了这个

```
<a href="javascript:popupwindow('http://www.google.com/', 'real title', 1400, 700)">centered Pop up window</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:47:52.893

看起来您需要更改`title`为其他内容，因为标题是您表单中的一个元素。

```
<a href="javascript:popupwindow('http://www.google.com/', title, 1400, 700)">centered Pop up 
window</a> 
```

# .htaccess - 如何仅在 index.php 上删除斜线尾随？

> ID：13975678
> 
> 赞同：0
> 
> 时间：2012-12-20T15:44:23.047
> 
> 标签：.htaccess, url, mod-rewrite

我的脚本在我的根域中的一个目录中，但总是重定向：

```
http://www.mydomain.com/script 
```

至

```
http://www.mydomain.com/script/ 
```

而且我想仅在 index.php （主页）中删除尾部斜杠以删除该重定向，并且如果我输入没有尾部斜杠的 URL 正确重定向到

```
http://www.mydomain.com/script 
```

我的 HTACCESS 代码是：

```
Options +FollowSymLinks
Options -Indexes
ServerSignature Off
RewriteEngine on

# Force NON WWW TO WWW in all pages.
RewriteBase /script
RewriteCond %{THE_REQUEST} ^.*\/index\.php\ HTTP/
RewriteRule ^(.*)index\.php$ /$1 [R=301,L]
RewriteCond %{http_host} ^mydomain.com$ [nc]
RewriteRule ^(.*)$ http://www.mydomain.com/script/$1 [r=301,nc,L]

# Remove the .php extension
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^([^/]+)/$ $1.php

# Force the trailing slash at the end of urls
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule (.*)$ /$1/ [R=301,L]

# SEO URLs
RewriteRule ^post/([^/\.]+)/?$ post.php?id=$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T14:30:31.620

也许你可以尝试使用这个：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-z0-9\-]+)/$ $1 [R,L] 
```

它在我的网站上运行良好。由于谷歌的搜索结果显示我的网站升级之前的旧结果。很多搜索结果显示

```
homepage.com/property/ 
```

`/`但是对于新网站（CMS），如果在最后一个页面上，则无法访问属性页面

因此，有了我`.htaccess`的代码，它就像魔术一样工作。即使来自谷歌的搜索结果`/`在地址的末尾

# .net - 查找 nuget.targets 文件的 MSBuild 错误

> ID：13975682
> 
> 赞同：34
> 
> 时间：2012-12-20T15:44:28.473
> 
> 标签：.net, msbuild, nuget

我正在尝试使用 msbuild 构建一个 csproj 项目，但是遇到了各种奇怪的问题，抱怨找不到 nuget.targets。

我使用 MSbuild 运行最简单的命令行构建：

```
Msbuild Project.csproj 
```

这适用于我的普通 dev 文件夹，但在另一个文件夹位置，它会因以下错误而失败：

`error MSB4019: The imported project "C:\BuildAgent\work\CableSense\.nuget\nuget.targets" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.`

该路径 ( `C:\BuildAgent\work\CableSense\.nuget\nuget.targets`) 实际上是错误的，并且在下班后缺少一个文件夹 (work\somefolder\cablesense)，但我不知道为什么。更奇怪的是，如果我构建另一个项目作为解决方案的一部分，那么它就可以工作，它只是这个项目。

csproj 指定 nuget.targets 文件的位置，如下所示：

```
<Import Project="$(SolutionDir)\.nuget\nuget.targets" /> 
```

SolutionDir 的定义如下：

```
<SolutionDir Condition="$(SolutionDir) == '' Or $(SolutionDir) == '*Undefined*'">..\</SolutionDir> 
```

这与另一个有效的项目相同。有任何想法吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-20T15:51:32.623

啊！发布此内容后，我发现了问题.. 基本上，该项目依赖于其他项目。这些相关项目的 csproj 文件略有错误 - 并将其作为 SolutionDir：

```
<SolutionDir Condition="$(SolutionDir) == '' Or $(SolutionDir) == '*Undefined*'">..\..\CableSense\</SolutionDir> 
```

这导致了这个问题！希望这对其他人有所帮助，我现在回答自己的问题感到难过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-02T09:40:19.170

好的，所以我最近遇到了同样的错误，但解决方案对我来说是不同的。

在 Build Definition 的 Source Settings 下，我将 Source Control Folder 设置为实际项目的目录，而不是解决方案的根文件夹。

我知道这是一个旧的回答线程，但这可能会帮助那些犯了同样错误的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-30T10:05:47.777

对我来说，我只是更改了解决方案的位置，以便获得一个较短的位置。

# sql-server - 执行复制数据库向导包时出现“超时”

> ID：13975683
> 
> 赞同：5
> 
> 时间：2012-12-20T15:44:32.540
> 
> 标签：sql-server, ssis, sql-server-2012

我全新安装了 SQL Server 2012。我通过 SSMS 中的复制数据库向导从不同的服务器复制数据库，并将其保存为包。我尝试将其作为作业运行，但失败并出现以下错误：

**作业失败。作业由用户*user*调用。最后运行的步骤是步骤 1 (CDW_test_Step)。**

我尝试使用 Execute Package Utility 执行包，只是想看看它是否可以这样工作，但出现以下错误：

**传输数据时发生错误。有关详细信息，请参阅内部异常......超时已过期。超时时间已过，直到操作完成或服务器没有响应。创建数据库失败...**

我确保包正在使用所有者的相同帐户执行。

我用 TSQL 创建了一个简单的作业，而不是 SSIS 包，它执行得很好。

任何帮助表示赞赏。

**更新：**

我检查了事件日志，我看到了其中的几个：

**特定于应用程序的权限设置不会将具有 CLSID {FDC3723D-1588-4BA3-92D4-42C430735D7D} 和 APPID {83B33982-693D-4824-B42E-7196AE61BB05} 的 COM 服务器应用程序的本地激活权限授予用户 NT SERVICE\SQLSERVERAGENT来自地址 LocalHost（使用 LRPC）的 SID (S-1-5-80-344959196-2060754871-2302487193-2804545603-1466107430)。可以使用组件服务管理工具修改此安全权限。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T11:54:43.687

这是一个奇怪的错误，与 SQL Server 代理服务帐户没有对 Integration Services DCOM 对象的权限有关。

解决此问题的 2 种方法：

1:/ 以在本地服务器上具有管理员权限的用户身份运行 SQL 代理服务，管理员始终具有 DCOM 权限（可能不是最好的主意，尽管只是为了这个）

2：/

点击开始 -> 运行然后输入 dcomcnfg 打开组件服务工具

浏览组件服务 -> 计算机 -> 我的电脑 -> DCOM 配置

找到 Microsoft SQL Server Integration Services 11.0，右键单击它并选择属性

单击安全选项卡，然后在“启动和激活权限”下单击编辑

添加 NT SERVICE\SQLSERVERAGENT 并授予它本地启动和激活权限

再次尝试导入

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T17:52:05.270

在咨询了了解这些内容的人后，我了解到问题可能是因为服务器是 2 个不同的版本（2008 年、2012 年）。

相反，我手动创建了一次数据库对象（使用生成脚本），然后设置了一个运行导入的作业（通过导入/导出数据向导）。

..虽然使用这种方法我必须手动保持对象同步，这很痛苦（至少没有像 RedGate 这样的第 3 方软件）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-25T11:19:55.410

查看此[错误报告](https://connect.microsoft.com/SQLServer/feedback/details/783291/ssis-package-fails-to-start-application-lock-timeout-in-ssisdb-catalog-create-execution#tabs)- SQL Server 2012 中的 SSISDB 数据库中有一个 sp 导致程序包在开始运行之前超时。当通过 DTExec 从我的调度工具调用多个（超过 10 个）包时，我收到错误消息“由于错误 0x80131904 导致执行 IS 服务器包失败”和“说明：操作失败，因为执行超时”。请在连接站点上为该问题投票，以便 MS 可以发布官方修复程序。

# c# - 如何从 ListView 之外的 ListView 更改模式？

> ID：13975685
> 
> 赞同：2
> 
> 时间：2012-12-20T15:44:35.053
> 
> 标签：c#, asp.net, listview

如何从`ListView`, 之外更改模式`ListView`？我知道如何从内部（用`CommandName="Edit"`等）改变它，但不是从外面。

使用 DetailsView 这没有问题`(DetailsView.ChangeMode(DetailsViewMode.Edit)`）但是如何使用`ListView`呢？

我搜索这样的东西：

```
protected void btnInsert_Click(object sender, EventArgs e)
{
ListView.ChangeMode(ListViewMode.Insert);
} 
```

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T16:22:43.397

您必须在 aspx 代码中定义：

```
InsertItemPosition="FirstItem"  InsertMethod="ListView1_InsertItem" 
```

并且列表视图将处于插入模式。

如果您想通过单击链接按钮来执行此操作：

```
protected void lnkMachines_Click_Click(object sender, EventArgs e)
{
    Lview.InsertItemPosition = InsertItemPosition.FirstItem;           
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T07:48:16.763

我得到了它。

```
btnInsertMode_Click(object sender, EventArgs e)
{
listview.Items.Clear();
listview.SelectedIndex = 0;
gridView.SelectedIndex = -1;
listview.InsertItemPosition = InsertItemPosition.FirstItem;
}
btnUpdateMode_Click(object sender, EventArgs e)
{
listview.EditIndex = 0;
} 
```

# rest - 我可以在我的 Web 服务中避免会话身份验证，而不必验证每个请求中的用户名/密码吗？

> ID：13975687
> 
> 赞同：1
> 
> 时间：2012-12-20T15:44:42.213
> 
> 标签：rest, authentication, asp.net-web-api, session-state

我正在使用 ASP.NET Web API 构建一个 RESTful Web 服务。我读到使用会话身份验证不是很 RESTful，因为在成功发出任何其他请求之前需要“登录”请求。此外，它还需要客户端维护状态。

我最初的设计是让客户端使用基于 SSL 的基本 HTTP 身份验证调用“登录”请求。然后，Web 服务将验证凭据并使用会话密钥进行响应。然后，客户端使用该会话密钥对所有后续请求进行签名。当 Web 服务收到任何这些请求时，它会查找会话密钥，以相同的方式对请求进行签名，并检查两个签名是否相等。

是否可以避免此会话身份验证而不必在每个请求中发送用户名/密码？凭证验证不会发生在 Web 服务中（它被路由到另一个维护用户的服务器）。我担心如果我需要验证每个请求，性能会受到影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:54:56.600

这是不可能的。您可以存储状态或获取每个请求的凭据。第二个选项是您想要的 HTTP API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:59:49.480

取决于您对“验证”的含义

例如，您可以在您的应用程序中缓存哈希（用户名+密码）。并且在子请求请求中检查缓存的条目是否仍然存在。通过这种方式，您可以节省到后端商店的往返行程。

# iphone - 浮点数不返回正确的十进制值

> ID：13975692
> 
> 赞同：2
> 
> 时间：2012-12-20T15:45:07.647
> 
> 标签：iphone, objective-c, ios

这是我的代码：

```
int resultInt = [ja.resultCount intValue];
float pages = resultInt / 10;

NSLog(@"%d",resultInt);
NSLog(@"%.2f",pages); 
```

resultInt 从 php 脚本返回值为 3559 所以页面结果应该是 355.9 但我得到的结果是 355.00 这是不正确的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:46:41.950

采用

```
float pages = resultInt / 10.0f; 
```

`int/int`是`int` 但是`int/float`或者`float/int`是`float`

* * *

**编辑**以获取更多解释

重要的是要记住，数学运算的结果值受接收变量数据类型规则的约束。除法运算的结果可能会产生一个浮点值。但是，如果分配给整数，小数部分将丢失。同样重要但不太明显的是对几个整数执行操作并分配给非整数的效果。在这种情况下，结果在被隐式转换之前被计算为整数。这意味着尽管将结果值分配给浮点变量，但小数部分仍会被截断，除非首先显式转换至少一个值。以下示例说明了这一点：

```
int a = 7;
int b = 3;
int integerResult;
float floatResult;

integerResult = a / b;          // integerResult = 2  (truncated)
floatResult = a / b;            // floatResult = 2.0  (truncated)
floatResult = (float)a / b;     // floatResult = 2.33333325 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:47:47.167

这与您使用整数而不是浮点数有关。告诉你正在使用的变量它们是浮点数，你就完成了。

```
int resultInt = [ja.resultCount intValue];
float pages = (float)resultInt / 10.f; 
```

# css - 如何在 Safari 中转换 Flash？

> ID：13975697
> 
> 赞同：1
> 
> 时间：2012-12-20T15:45:26.250
> 
> 标签：css, css-transforms

转换函数在 Chrome 中运行良好。它们在 safari 中运行良好，除非您尝试转换 java applet 或 flash 等。有没有办法让转换工作？

[小提琴](http://jsfiddle.net/r9W7A/5/)

```
"-webkit-transform": "scaleX(.5) scaleY(.5) rotateY(25deg)" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:12:32.560

我找到了答案[http://viget.com/inspire/webkit-transform-kill-the-flash](http://viget.com/inspire/webkit-transform-kill-the-flash)。你必须给它一个初始旋转。

```
// relevantformattedcode; 
```

调整[小提琴](http://jsfiddle.net/r9W7A/6/)

# powershell - 比较两个文本文件并仅保留唯一值

> ID：13975700
> 
> 赞同：0
> 
> 时间：2012-12-20T15:45:39.077
> 
> 标签：powershell

全部，

我对powershell非常陌生，正在尝试编写脚本并遇到问题。

我目前有两个文本文件。为了论证起见，第一个可以称为 required.txt，第二个可以称为exist.txt。

我有一个脚本，它查询服务器并确定所有现有组的列表并将它们写入文本文件。同时，客户有一个他们希望创建的新组的列表。我想将新列表 (required.txt) 与现有列表 (exist.txt) 进行比较，并将任何不存在的内容通过管道输出到一个新的文本文件，然后使用另一个进程提取并导入该文件。

我已经完成了从服务器收集列表的脚本，我只需要知道如何在现有的和所需的之间进行比较。

欢迎任何建议。

理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:59:27.990

您不必使用尽可能多的变量：

```
$FinalGroups=Compare-Object (get-content .\required.txt) (get-content .\existing.txt) |
    where {$_.SideIndicator -eq "<="} |
    select -ExpandProperty inputObject |
    sort 
```

# objective-c - 迭代实体数组并根据“其他键”匹配的值获取某个键的值

> ID：13975702
> 
> 赞同：2
> 
> 时间：2012-12-20T15:45:49.093
> 
> 标签：objective-c, nsarray

我有一个实体类数组（例如 SubmittedAnswer）。它的 JSON 格式如下所示。

* * *

```
{
"submittedAnswers": [{
    "submittedQuestionId": "C7B3C4BE-CC3C-438F-A118-E798884A5FE0",
    "serialNumber": 4,
    "option": " it has a very large mass.",
    "testQuestionId": "55230160-b905-47d5-a91c-e1dda6dd0634",
}, {
    "submittedQuestionId": "9A6E9EA8-1BC0-4ED9-81E8-28B7E554D5E0",
    "serialNumber": 1,
    "option": " downward",
    "testQuestionId": "fd0b3ae0-e999-48a6-89b8-a89b02e7b793",
}]

} 
```

* * *

我想从“ ***submitQuestionId*** ”为“某事......”的那个数组中找到“ ***option ”字段。***我不想使用 for 循环。目前我正在使用以下代码。

 *```
NSString *submittedQuestionId = "something...."
int index    = [[submittedAnswers valueForKey:@"submittedQuestionId"] indexOfObject:submittedQuestionId];
NSString *option = [[submittedAnswers valueForKey:@"option"] objectAtIndex:index]; 
```

我需要更好的解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T16:06:20.907

假设这`submittedAnswers`是 NSDictionary 对象的 NSArray，我在这里找到了答案： [Stack Overflow > iPhone - Searching NSArray of NSDictionary objects](https://stackoverflow.com/a/5846394/1523962)

```
// Array `submittedAnswers` of sample data
NSArray* submittedAnswers = @[
@{
@"submittedQuestionId" : @"C7B3C4BE-CC3C-438F-A118-E798884A5FE0" ,
@"serialNumber" : @4 ,
@"option" : @" it has a very large mass." ,
@"testQuestionId" : @"55230160-b905-47d5-a91c-e1dda6dd0634" } ,
@{
@"submittedQuestionId" : @"9A6E9EA8-1BC0-4ED9-81E8-28B7E554D5E0" ,
@"serialNumber" : @1 ,
@"option" : @" downward" ,
@"testQuestionId" : @"fd0b3ae0-e999-48a6-89b8-a89b02e7b793" } ] ;

NSString *submittedQuestionId = @"9A6E9EA8-1BC0-4ED9-81E8-28B7E554D5E0" ;
NSPredicate* predicate = [NSPredicate predicateWithFormat:@"submittedQuestionId = %@", submittedQuestionId] ;
NSArray* foundQuestions = [submittedAnswers filteredArrayUsingPredicate:predicate] ;
NSDictionary* foundQuestion = foundQuestions[0] ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T16:10:56.847

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"submittedQuestionId == %@", yourSubmittedQuestionId];
NSArray *filteredArray = [myArray filteredArrayUsingPredicate:predicate];
id firstFoundObject = nil;
if ([filteredArray count] > 0) {
    firstFoundObject = [filteredArray objectAtIndex:0];
} 
```

请确保您的`SubmittedAnswer`班级有财产`submittedQuestionId`*

# django - Django 使用基本身份验证打开 SQLServer 报告

> ID：13975713
> 
> 赞同：1
> 
> 时间：2012-12-20T15:46:27.520
> 
> 标签：django

我需要从我的 Django 站点打开 SQLServer 报告。我可以通过在会话中存储 URL 后重定向到 Django 视图中的报表服务器 URL 来做到这一点，即：

```
def show_report(request):     
    return redirect(request.session.get('_reporturl')) 
```

这工作正常，但我想避免 ReportServer 提示输入用户名和密码。我已经得出结论（可能是错误的）最好的方法是使用 HTTP 基本身份验证。

我在另一篇基本身份验证的帖子中找到了以下代码：

```
import urllib2, base64
username = '<username>'
password = '<password>'
request = urllib2.Request(request.session.get('_reporturl'))
base64string = base64.standard_b64encode('%s:%s' % (username, password))
request.add_header("Authorization", "Basic %s" % base64string)
result = urllib2.urlopen(request) 
```

但是我不能让它在视图中工作（Django 视图需要返回一个 HTTPResponse，所以我不确定如何使用这个代码）。

我尝试了以下方法：

```
return redirect('http://<username>:<password>@' + request.session.get('_reporturl')) 
```

这似乎将基本身份验证数据传递给报表服务器，但我收到了几个进一步的用户名和密码提示。

是否有人设法在 Django 中使用基本身份验证，或者是否有人设法在没有提示进行身份验证的情况下打开 SQLServer 报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:43:58.193

通过将 Apache 配置为代理到报表服务器来解决此问题：

```
LoadModule proxy_html_module modules/mod_proxy_html/mod_proxy_html.so
LoadModule xml2enc_module modules/mod_proxy_html/mod_xml2enc.so
Include modules/mod_proxy_html/proxy_html.conf

# set up proxy for SQL Server reports
<Location /ReportServer/>
  ProxyPass http://<reportserver>/ReportServer/
  ProxyPassReverse http://<reportserver>/ReportServer/
  SetEnv force-proxy-request-1.0  1
  SetEnv proxy-nokeepalive        1
  SetEnv proxy-initial-not-pooled 1
  ProxyHTMLEnable On
  ProxyHTMLURLMap http://<reportserver>/ReportServer/ /ReportServer/
  # Base64 encoding of "username:password"
  RequestHeader set Authorization "Basic <base64 encoded string>"
</Location> 
```

[mod_proxy_html 是从http://www.apachelounge.com/download/win32/modules-2.2/mod_proxy_html-3.1.2-win32.zip](http://www.apachelounge.com/download/win32/modules-2.2/mod_proxy_html-3.1.2-win32.zip)下载的第三方模块- 打开 zip 并转储 Program Files (x86) 下的 mod_proxy_html 文件夹\Apache 软件基金会\Apache2.2\modules。必要的配置包含在上面的部分中。（它似乎包含在更高版本的 Apache 中。）

mod_proxy_html 可能不是绝对必要的——我认为 ProxyPassReverse 指令是重要的——所以如果它导致问题，您可以删除执行 LoadModule/Include 的三行并删除 Location 部分中的 ProxyHTML 行。

# javascript - Javascript：用户登陆时只有一次警报框

> ID：13975718
> 
> 赞同：2
> 
> 时间：2012-12-20T15:46:50.330
> 
> 标签：javascript, jquery

有没有办法只显示一次警告框，即当用户点击网站时，当他们浏览它时不再出现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T15:48:47.423

例如，您可以设置一个`localStorage`属性，例如

```
if(!localStorage["alertdisplayed"]) {
    alert("Your text")
    localStorage["alertdisplayed"] = true
} 
```

*请注意，如[blazemonger](https://stackoverflow.com/users/901048/blazemonger) - [Compatibility List所述，旧版浏览器不支持 localStorage](http://www.quirksmode.org/dom/html5.html#localstorage)*

另一种方法是设置 Cookie 并检查它的存在

如果您不知道如何使用 javascript 设置/获取 cookie，我建议您阅读[MDN上的这篇文章](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T15:57:51.073

您可以检查是否存在 cookie，如果未找到，则显示警报并设置一个在很长一段时间后过期的 cookie。像这样的东西：

```
if (!document.cookie.match(/(?:^|; *)alert_shown=1/)) {
    alert("Hello world");
    document.cookie = "alert_shown=1;max-age=" + 60 * 60 * 24 * 365;
} 
```

PS：我不确定正则表达式是否是防弹的。cookie 可能会……被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:48:43.427

您可以在用户第一次登陆网站时删除一个过期日期非常长的 cookie。然后，您可以检查该 cookie 是否存在，如果它不存在，则仅显示警告框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T15:48:51.523

是的。您可以使用 cookie、本地存储、数据库条目或会话变量（或组合）来确定他们是否已经看到/放弃了通知。

考虑到您正在处理 JavaScript，cookie 或本地存储可能是您唯一的选择。（请记住，虽然本地存储仍然是“新的”，但并非所有浏览器都实现或支持它）。

旁注：您还可以使用 AJAX 并将标志存储在服务器上（但这取决于您的设置和可用的资源）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T15:56:56.530

您应该考虑使用通知区域而不是警报框。然后使用 cookie 来防止通知更频繁地出现。

# python - 如何实现 Django 视图之间的消息传递？

> ID：13975720
> 
> 赞同：1
> 
> 时间：2012-12-20T15:47:06.523
> 
> 标签：python, django, messaging

**背景：**我正在尝试构建一个调查应用程序，用户可以在其中添加调查答案并将这些答案推送给其他用户（例如，如果问题是“你最喜欢的编程语言是什么？”并且我没有包括 Haskell，用户可以添加“Haskell”作为答案，它会显示在每个人的浏览器上）。我打算使用长轮询来实现这一点。

**我的概念方法：**我已经确定的方法是设置类似于观察者模式的东西（或者它可能完全像观察者模式。我是设计模式的新手）。

步骤如下： 浏览器向 /app/longpoll 发出请求，它会启动一个视图，该视图 1\. 使用时间戳检查是否发生了任何更改，如果发生则返回这些更改，或者 2\. 注册自己使用事件委托者并等待消息。然后，当浏览器向 /app/UpdateSurvey 发出请求时，会启动一个视图，其中 1\. 更新调查，以及 2\. 通知事件委托者调查已更改。

**我的问题**：鉴于这是解决此问题的明智方法，我该如何实施？似乎我需要一个常设流程来担任事件委托人，但我真的不确定这是什么样子。我如何找到这个过程来注册它？我如何注册？首先，我如何使这个过程存在？如果在将答案添加到投票中时，此过程正忙于委派事件，会发生什么？

我认识到这是一个很长的答案，并且可能已被其他人解决，因此也鼓励文章/书籍推荐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:54:23.253

这是与您要求的解决方案不同的解决方案，但是`post_save`当添加一个使用 websockets 推送给任何打开页面的用户（订阅客户端）的新问题时，如何使用信号呢？

**编辑：**啊，IE - 使用[Juggernaut](https://github.com/maccman/juggernaut)代替 websockets（如果浏览器支持它们，仍将使用 websockets），适用于 IE6（我认为）和 7（我知道）

# objective-c - 如何与消息、邮件、打印和复制共享

> ID：13975721
> 
> 赞同：3
> 
> 时间：2012-12-20T15:47:25.223
> 
> 标签：objective-c, ios

我见过一些应用程序允许您与 ios 的邮件、消息、打印和复制共享内容。

我看到有一个名为 sharekit 的项目，它做了类似的事情，但集成了社交网络共享。就我个人而言，我不需要社交分享，所以 sharekit 它可能有点矫枉过正。

我只需要弹出一个操作表，它允许我将一些文本传递给邮件应用程序或消息应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:50:03.050

您正在寻找的是[`MessageUI.framework`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MessageUI_Framework_Reference/_index.html).

该框架包含：

*   [`MFMailComposeViewController`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40008200) 此类将允许您的用户撰写电子邮件。
*   [`MFMessageComposeViewController`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40009668)本课程将允许您撰写 SMS 消息。不支持彩信。

您必须自己编写操作表，但在用户做出选择后，您可以创建[`MFMailComposeViewController`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40008200)or的实例[`MFMessageComposeViewController`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40009668)并将其呈现给用户。请注意，您将需要实现[`MFMailComposeViewControllerDelegate`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewControllerDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intf/MFMailComposeViewControllerDelegate)和/或[`MFMessageComposeViewControllerDelegate`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewControllerDelegate_protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40009669)关闭视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T16:01:32.840

在这里看我的回答：

[https://stackoverflow.com/a/13975189/736384](https://stackoverflow.com/a/13975189/736384)

我写了新的 UIActivity 控件，它可以让你做你想做的一切。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T15:50:04.130

如果您只想与 Mail 或 Messages 集成，请分别使用[MFMailComposeViewController](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)和[MFMessageComposeViewController](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)类。

如果您想添加对 Copy、Print 和其他此类“活动”的支持，请查看[UIActivity 和 UIActivityViewController 的文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivity_Class/Reference/Reference.html)。

# android - 如何取消 onPause 或 onStop 方法？

> ID：13975722
> 
> 赞同：3
> 
> 时间：2012-12-20T15:47:26.347
> 
> 标签：android, android-activity, onpause

**编辑和解决（下）**

当用户离开活动时，我需要进行最后一次检查。
如果这次检查的结果不成功，我需要不让他出去。

我需要一种这样的：

```
@Override
protected void onPause() {
    if (comprobations == true){
        super.onPause();
        } else {
            NOT EXIT!!
        }
} 
```

看起来很容易：p，但我试过但没有运行。

任何人都可以帮助我吗？

坦克斯

**解决方案：**

感谢大家的快速解答！
他们每个人都帮助了我，我学到了一些新东西。

我已经尝试过这个`onBackPressed()`方法，这就是我想要的。我知道用户仍然可以通过按 Home 键和其他方式退出 App，但我只是想防止用户在返回主菜单时认为我的 App 的配置还可以；如果他们想从应用程序中出去，没关系。
所以我会做这样的事情：

```
@Override
public void onBackPressed() {
    Log.d(LOGTAG, "onBackPressed");
    if (COMPROBATIONS() == true){
        super.onBackPressed();
    } else {
        SHOW WARNING!
    }
    return;
} 
```

感谢大家的帮助。
玩得开心。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T15:56:51.167

您无法阻止用户离开您的活动。一旦调用了 onPause 方法，应用程序就会进入后台，您无法阻止它。

如果您真的想在用户离开您的活动时做某事，可以通过覆盖 on`onBackPressed()`方法来覆盖后退按钮并让它执行一些其他操作。但是，用户仍然可以通过多种方式离开（例如按下主页按钮）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T15:51:49.367

简单的答案是“你不能这样做”或“这是不可能的”。您的应用程序不能阻止用户关闭它或系统在它（系统）资源不足时杀死它。

而且，如果您要与一些内置应用程序（例如三星的设置）进行比较，请记住那些“特殊”应用程序可以访问操作系统的内部，并且与您的应用程序不在同一级别上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:52:35.663

您不能这样做，因为调用它们的是 Android。

要么在完成（）活动之前进行检查，要么捕获后退键。

```
if (!comprobations){
     this.finish():
} 
```

或者：

```
public boolean onKeyDown(int keyCode, KeyEvent event){

    if(keyCode == KeyEvent.KEYCODE_BACK) {
        if (!comprobations){
            this.finish():
            return true;
        }

        return false;

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T15:54:11.817

这可以通过覆盖后退按钮来实现。像这样做 ：

```
public boolean onKeyDown(int keyCode, KeyEvent event) {

if(keyCode==KeyEvent.KEYCODE_BACK)
{
  if (comprobations == true){
          finish();
       } else {
          NOT EXIT!!
       }
 }
} 
```

# c# - 如何验证 RIA 服务 URL

> ID：13975724
> 
> 赞同：0
> 
> 时间：2012-12-20T15:47:44.427
> 
> 标签：c#, .net, validation, wcf-ria-services

我有这个 RIA 服务 URL：

```
 http://192.168.2.100/MegaSystem/Services/RIAServicesLibraryMain-Web-Version_1_0-DomainService.svc 
```

所以我需要在我的应用程序的配置窗口中以某种方式验证这个 URL。

我使用这种方法来做到这一点：

```
private bool KickServices(string serviceUrl)
        {
            bool result = false;

            var request = WebRequest.Create(serviceUrl) as HttpWebRequest;
            if (request != null)
            {
                request.ContentType = "application/xml";
                request.Method = "GET";
            }

            if (request != null)
            {
                var response = request.GetResponse() as HttpWebResponse;
                if (response != null && response.StatusCode == HttpStatusCode.OK)
                {
                    result = true;
                }
            }

            return result;
        } 
```

如果我使用一些不正确的 URL，例如

```
http://192.168.2.100/MegaSystem/Services/RIAServicesLibraryMain-Web-Version_1_0-DomainService_SHIT_SHIT_SHIT.svc 
```

无论如何它都会返回 TRUE ......

请帮助我找到验证 RIA 服务 URL 的正确方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:06:50.313

我找到了很好的解决方案：

```
private bool KickServices(string serviceUrl)
        {
            bool result = false;

            var request = WebRequest.Create(serviceUrl) as HttpWebRequest;
            if (request != null)
            {
                request.ContentType = "application/xml";
                request.Method = "GET";
            }

            if (request != null)
            {
                var response = request.GetResponse() as HttpWebResponse;
                if (response != null && response.StatusCode == HttpStatusCode.OK)
                {
                    string resultContent = null;
                    Encoding responseEncoding = Encoding.GetEncoding(response.CharacterSet);
                    using (var sr = new StreamReader(response.GetResponseStream(), responseEncoding))
                    {
                        resultContent = sr.ReadToEnd();
                        if (resultContent.Contains(serviceUrl))
                            result = true;
                    }
                }
            }

            return result;
        } 
```

# assembly - 如何用 68k 语言制作 if-else 控制结构？

> ID：13975729
> 
> 赞同：3
> 
> 时间：2012-12-20T15:47:48.437
> 
> 标签：assembly, if-statement, cpu, 16-bit, 68000

我正在为 ASM 中的 68k 处理器编写程序。

我需要做类似的东西

```
if (D0 > D1) {
   do_some_stuff();
   do_some_stuff();
   do_some_stuff();
   do_some_stuff();
} else {
   do_some_stuff();
   do_some_stuff();
   do_some_stuff();
   do_some_stuff();
} 
```

但问题是它只允许我分支到某个指针或继续执行。

像这样：

```
CMP.L   D0,D1       ; compare
BNE AGAIN       ; move to a pointer 
```

进行上述构造的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:26:50.293

你可以尝试这样的事情：

```
if (D0>D1) {
    //do_some_stuff
} else {
    //do_some_other_stuff
} 
```

应该：

```
CMP.L   D0,D1       ; compare
BGT AGAIN  
//do_some_other_stuff
BR DONE
AGAIN:
//do_some_stuff
DONE: 
```

阅读有关[条件分支的更多信息](http://en.wikibooks.org/wiki/68000_Assembly#Conditional_tests)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-11T03:45:44.740

最适合这种情况的控制结构是`BGT`.

`BGT`当第二个操作数大于第一个操作数时（大于上的分支）将分支**。**当您查看幕后发生的事情时，这是有道理的。

```
CMP.W D1,D0 ;Performs D0-D1, sets the CCR, discards the result 
```

它设置 CCR（条件代码寄存器），因为仅当**(N=1 and V=1 and Z=0)**或**(N=0 and V=0 and Z=0)**时才采用分支。

现在进行改造：

```
if (D0 > D1) {
    //do_some_stuff
} else {
    //do_some_other_stuff
} 
```

进68k汇编语言：

```
 CMP.W   D1,D0       ;compare the contents of D0 and D1
     BGT     IF 
     // do_some_other_stuff
     BRA     EXIT
IF
     // do_some_stuff
EXIT ... 
```

# c# - 抛出异常时执行某事的最佳方式（模式）

> ID：13975730
> 
> 赞同：3
> 
> 时间：2012-12-20T15:47:50.137
> 
> 标签：c#, exception-handling, for-loop, try-catch

下面的代码显示了尝试封装逻辑以在捕获异常时重新运行某些东西。

是否存在模式或其他东西来做到这一点？或者您会建议对该代码进行哪些改进？

```
 public static void DoWhileFailing(int triesAmount, int pauseAmongTries, Action codeToTryRun) {
        bool passed = false;
        Exception lastException = null;

        for (int i = 0; !passed && i < triesAmount; i++) {
            try {
                if (i > 0) {
                    Thread.Sleep(pauseAmongTries);
                }
                codeToTryRun();
                passed = true;
            } catch(Exception e) {
                lastException = e;
            }
        }

        if (!passed && lastException != null) {
            throw new Exception(String.Format("Something failed more than {0} times. That is the last exception catched.", triesAmount), lastException);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:53:25.760

我会重新编写它以消除一些变量，但总的来说您的代码是可以的：

```
public static void DoWhileFailing(int triesAmount, int pauseAmongTries, Action codeToTryRun) {
    if (triesAmount<= 0) {
        throw new ArgumentException("triesAmount");
    }
    Exception ex = null;
    for (int i = 0; i < triesAmount; i++) {
        try {
            codeToTryRun();
            return;
        } catch(Exception e) {
            ex = e;
        }
        Thread.Sleep(pauseAmongTries);
    }
    throw new Exception(String.Format("Something failed more than {0} times. That is the last exception catched.", triesAmount, ex);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T16:02:03.723

我编写了以下代码来做基本相同的事情。它还允许您指定要捕获的异常类型以及`Func`确定当前迭代是否应该抛出异常或继续重试。

```
public static void RetryBeforeThrow<T>(
    this Action action, 
    Func<T, int, bool> shouldThrow, 
    int waitTime) where T : Exception
{
    if (action == null)
        throw new ArgumentNullException("action");
    if (shouldThrow == null)
        throw new ArgumentNullException("shouldThrow");
    if (waitTime <= 0)
        throw new ArgumentException("Should be greater than zero.", "waitTime");
    int tries = 0;
    do
    {
        try
        {
            action();
            return;
        }
        catch (T ex)
        {
            if (shouldThrow(ex, ++tries))
                throw;
            Thread.Sleep(waitTime);
        }
    }
    while (true);
} 
```

然后你可以这样称呼它

```
Action a = () => 
    { 
        //do stuff 
    };
a.RetryBeforeThrow<Exception>((e, i) => i >= 5, 1000); 
```

并且您可以指定任何异常类型并且您可以在 中检查异常`Func`以确定它是否是您要抛出或继续重试的异常。这使您能够在自己的异常中抛出自己的异常，`Action`这将阻止重试的发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T16:24:59.447

我看不出代码有什么问题，我只是质疑你的假设。

我看到的几个问题：

*   客户端需要了解被调用动作的失败模式以选择正确的参数。
*   该操作可能会间歇性地失败，这是容量杀手。像这样的代码不能很好地扩展。
*   客户端可以等待不确定的时间量来完成操作。
*   除最后一个以外的所有异常都将被吞下，这可能会隐藏重要的诊断信息。

根据您的需要，您的代码可能就足够了，但要以更健壮的方式封装不可靠的资源，请查看[断路器](http://thatextramile.be/blog/2008/05/the-circuit-breaker)模式。

# windows - 如何创建可执行的命令提示符脚本

> ID：13975733
> 
> 赞同：10
> 
> 时间：2012-12-20T15:47:52.237
> 
> 标签：windows, command-line, executable

我通常在 7zip 命令行程序中执行操作。我正在考虑创建一个小脚本来自动执行所有操作，但我之前从未编写过任何 Windows shell 脚本，因此甚至不知道从哪里开始。

我想制作一个可执行的脚本文件，当用户双击它时，它将调用 7zip 命令行并执行一些操作。

首先，这可能吗？如果是，最好的方法是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-20T15:52:21.977

您可以创建一个批处理脚本来执行此操作。

它基本上是一个接一个运行的命令行命令，因此您不必继续输入它们:)

将您通常用于 7zip 的命令放入记事本文件中，并以扩展名 . 保存`.bat`，然后运行它。

```
7z blah blah params
7z more params and args 
```

前一个命令完成后，您的所有命令将自动执行。

您可以使用其他编程语言（甚至是 VBScript）来执行此操作，但批处理非常适合此操作，您无需安装任何额外的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T15:52:33.577

批处理文件可以运行一系列命令行命令。只需创建一个文本文件并使用`.bat`扩展名对其进行命名。

互联网上有很多资源可以为您提供帮助。

# java - 从客户端 RMI 读取服务器中的消息

> ID：13975738
> 
> 赞同：1
> 
> 时间：2012-12-20T15:47:57.807
> 
> 标签：java, client-server, rmi

我创建了一个必要的 RMI 类，客户端可以发送一条消息并将其打印在服务器窗口中。

在服务器上，我想阅读消息，例如，如果消息等于 100，则打印出一条消息。

问题是当我运行服务器时，我立即得到一个空指针异常。当我将消息 100 从客户端发送到服务器时，它会打印消息但不会执行 if 语句。

界面：

```
import java.rmi.Remote;
import java.rmi.RemoteException;

public interface FileInterface extends Remote {

    void message(String message) throws RemoteException;

} 
```

执行：

```
import java.io.*;
import java.rmi.*;
import java.rmi.server.UnicastRemoteObject;

public class FileImpl extends UnicastRemoteObject implements FileInterface  {

private String name;

    public FileImpl(String s) throws RemoteException {
        super();
        name = s;
    }

    public void message(String message) throws RemoteException{
    System.out.println(message);
  }

      } catch(Exception e) {
         System.err.println("FileServer exception: "+ e.getMessage());
         e.printStackTrace();
         return(null);
      }
   }
} 
```

客户：

```
import java.io.*; 
import java.rmi.*;
import javax.swing.*;
import java.util.*;
import java.awt.*;

public class FileClient{

    public static boolean loggedIn = false;

   public static void main(String argv[]) {
      try {

        int RMIPort;         
        String hostName;
        InputStreamReader is = new InputStreamReader(System.in);
        BufferedReader br = new BufferedReader(is);
        System.out.println("Enter the RMIRegistry host namer:");
        hostName = br.readLine();
        if( hostName.length() == 0 ) // if user did not enter a name
                hostName = "localhost"; // use the default host name
        System.out.println("Enter the RMIregistry port number:");
        String portNum = br.readLine();
        if( portNum.length() == 0 ) 
                portNum = "1097"; // default port number
        RMIPort = Integer.parseInt(portNum);
        String registryURL = "rmi://" + hostName+ ":" + portNum + "/FileServer";  
        // find the remote object and cast it to an interface object
        FileInterface fi = (FileInterface) Naming.lookup(registryURL);
        System.out.println("Lookup completed " );
        //System.out.println("File " + argv[0] + " Transfered" );
        // invoke the remote method
        boolean done = false;
         //file.getName()

        while( !done ) {

            System.out.println("Enter Code: 100 = Login, 200 = Upload, 300 = Download, 400 = Logout: ");
            String message = br.readLine();
            boolean messageOK = false;

            if( message.equals("100") ) {
                messageOK = true;
                System.out.println("Enter T-Number: (Use Uppercase 'T')");
                String login = br.readLine();
                if( login.charAt(0) == 'T' ) {
                    loggedIn = true;
                    fi.message("100");
                    System.out.println("Login Successful");
                    continue;
                } else {
                    System.out.println("Login Error");
                    continue;
                }
            }

        }
    } catch (Exception ex) {
            ex.printStackTrace();
        } 
    }
} 
```

服务器：

```
import java.io.*;
import java.rmi.*;

public class FileServer {

   public static void main(String argv[]) {

      if(System.getSecurityManager() == null) {
         System.setSecurityManager(new RMISecurityManager());
      }
      try {
         FileInterface fi = new FileImpl("FileServer");
         Naming.rebind("//localhost:1097/FileServer", fi);
         System.out.println("Server Started...");

        boolean done = false;
        while( !done ) {

        if ((msg.trim()).equals("100")) {

            System.out.println("message recieved: 100 logged in");

         } else {
            System.out.println("Login Error");
         }  

        }

      } catch(Exception e) {
         System.out.println("FileServer: "+e.getMessage());
         e.printStackTrace();
      }
   }
} 
```

这里的任何帮助将不胜感激。

# search - 网络浏览器上的网络搜索

> ID：13975739
> 
> 赞同：0
> 
> 时间：2012-12-20T15:47:59.460
> 
> 标签：search, browser, resultset

我在 google 上的不同浏览器上进行了搜索，但它们返回的结果集不同？？这是因为网络历史还是其他原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:08:39.307

所有 Google 搜索都取决于几个参数，以便为用户提供可能的最佳答案。

各种参数会影响返回的查询： - 如果您已登录或未登录（请参阅顶部栏） - 如果您的浏览器可以存储您的搜索首选项（chrome 非常清楚您感兴趣的是！）但 IE 如果很差将数据发送到 Google 搜索引擎

这两个参数是影响结果差异的主要参数。我从未听说过直接发送访问页面的历史记录

# php - Zend Framework 2 - Doctrine 2 - Documentor 标签的使用

> ID：13975744
> 
> 赞同：1
> 
> 时间：2012-12-20T15:48:04.873
> 
> 标签：php, tags, doctrine-orm, entity, zend-framework2

我是`Doctrine`和的新手`Zend`。我意识到在几乎所有实体模型中（无论我在哪里阅读教程）我都看到了这些文档标签，例如 `@var`or `@property`。

它们不是必需的，对吗？那么将它们排除在外是一件坏事吗？为我的实体中的每个属性添加和更改它们真的很耗时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T16:04:18.163

这只是编程和记录代码的好习惯。它可以帮助您的 IDE 更好地运行，并使其他人（包括一年后的您自己）更容易维护您的代码。

# algorithm - 获取角度当前象限的最快方法

> ID：13975745
> 
> 赞同：7
> 
> 时间：2012-12-20T15:48:05.980
> 
> 标签：algorithm, trigonometry

首先，这听起来可能很微不足道，但目前我正在创建一个函数 getQuadrant(degree) 用于从给定角度返回一个象限。

例如，如果度数 >= 0 且 < 90，则返回 1。如果度数 >= 90 且 < 180，则返回 2。以此类推。这是非常微不足道的。但是，为了能够处理 0-360 以外的度数，我只是先将这些数字标准化为 0-360 度范围内，如下所示：

```
 while (angle > 360)
                angle = angle - 360;
            end

            while (angle < 0)
                angle = angle + 360;
            end 
```

之后，我计算。但坦率地说，我讨厌使用这样的 while 语句。还有其他数学方法可以一次性指出角度的象限吗？

编辑：我看到有很多好的答案。请允许我补充一下“**哪种算法最快？** ”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T15:54:52.560

您可以使用模运算：

```
angle %= 360.0; // [0..360) if angle is positive, (-360..0] if negative
if (angle < 0) angle += 360.0; // Back to [0..360)
quadrant = (angle/90) % 4 + 1; // Quadrant 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T16:09:12.343

```
(angle/90)%4+1 
```

假设：

1.  `angle`是一个整数
2.  `angle`是积极的
3.  `/`是整数除法

对于负角，您需要一些额外的处理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T15:49:45.267

利用整数算术：

```
angle = angle - (angle/360)*360;
if (angle < 0) angle = angle + 360; 
```

这个想法是，因为`angle/360`四舍五入（`floor()`），`(angle/360)`给你`k`你需要做的`alpha = beta + 360k`。

如果需要，第二行从 [-359,-1] 规范化回 [1,359]。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T15:56:33.790

你已经标记了你的问题*三角*，所以这里有一些三角：

a) 取`sin(theta)`and `cos(theta)`-- 包含多少（正数或负数）倍数并不重要`360°`；`sin(400°)==sin(40°)==sin(-320°)`ETC

b) 如果`sin(theta)>0`和`cos(theta)>0`theta 在象限 1

如果`sin(theta)>0`和`cos(theta)<0`theta 在象限 2

等等全天候。哦，决定在 4 `corners`where`sin`和`cos`return做什么`0`。

# mysql - 我应该如何构建我的 mysql 数据库以允许二维 JSON 输出？

> ID：13975748
> 
> 赞同：0
> 
> 时间：2012-12-20T15:48:07.887
> 
> 标签：mysql, json

有点愚蠢的问题，我敢肯定，我确实需要一个答案。

我正在做这个简短的学习项目，我需要获取一个数据库来输出一些 JSON。

我确实知道如何构造表格，但由于我与它们的历史很短，我还没有弄清楚如何处理表格单元中的一组对象（在这个例子中，pointsOfInterest 和事件）。我应该为他们制作单独的表格并以某种方式为每个表格留下对单独表格的引用吗？以及如何在 php 中处理它们？

**TL：博士；我应该如何构建我的数据库以允许这样的 JSON 输出？：**

```
{id: 'oyafestivalen',
 displayName: 'Øyafestivalen 2011',
 description: 'Music festival in Middelalderparken, Oslo',
 pointsOfInterest: [
   {id: 'sjosiden',
    displayName: 'Sjøsiden',
    lat: 59.904453,
    lng: 10.762905},
   {id:   'vika',
    displayName: 'Vika',
    lat:  59.906086,
    lng: 10.763276},
   {type: 'wc',     // type is optional, defaults to 'venue'
    // displayName optional, not specified here
    lat: 59.903625,
    lng: 10.763276},
   {type: 'firstaid',
    lat: 59.903625,
    lng: 10.763276},
   {type: 'entrance',
    lat: 59.903625,
    lng: 10.763276},
   {type: 'exit',
    lat: 59.903625,
    lng: 10.763276},
   {type: 'camping',
    lat: 59.903625,
    lng: 10.763276},
   {type: 'food',
    displayName: 'Random restaurant name',
    description: 'They serve good food. Vegetarian-friendly',
    lat: 59.903625,
    lng: 10.763276},
   {type: 'drinks',
    displayName: 'Random bar name',
    lat: 59.903625,
    lng: 10.763029}
 ],
 events: [
   {displayName: 'Kyuss Lives!',
    venue: 'sjosiden',
    startDateTime: '2011-08-13T19:30',
    endDateTime: '2011-08-13T21:00',
    tags: ['rock', 'stoner']},
   {displayName: 'Givers',
    description: 'Givers are an indie pop group from Lafayette, Louisiana. The band is made up     of...',
    venue: 'vika',
    // Default one hour duration if no endTime
    startDateTime: '2011-08-13T18:05',
    tags: ['pop', 'indie']}
 ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:29:07.377

我无法告诉您表的结构，也无法告诉您获得该输出所需执行的确切查询，但我可以告诉您：

您不可能从 SQL 查询中产生这样的输出。但是，您可以使用多个查询构造这样的输出，并使用 PHP 操作它们的输出来构造您的多维数组。例如，pointsOfInterest 的内容应该是一个单独的查询。为了帮助您获得所需的输出，请使用`print_r()`PHP 来检查您的数组的运行情况。一旦你得到你想要的，用`json_encode()`PHP 将数组转换为 json 字符串。

# css - 列表底部边框浮动左问题

> ID：13975750
> 
> 赞同：0
> 
> 时间：2012-12-20T15:48:13.820
> 
> 标签：css, list, xhtml, css-float, border

HTML：

```
<div class="list">
<ul>
    <li><a href="#">A</a></li>
    <li><a href="#">B</a></li>
    <li>
        <ul>
            <li><a href="#">Lorem Ipsum is simply dummy text of the printing and typesetting industry.</a></li>
            <li><a href="#">Lorem Ipsum is simply dummy text of the printing and typesetting industry.</a></li>
            <li><a href="#">C3</a></li>
            <li><a href="#">Lorem Ipsum is simply dummy text of the printing and typesetting industry.</a></li>
            <li><a href="#">C5</a></li>
        </ul>
    </li>
    <li><a href="#">D</a></li>
    <li><a href="#">E</a></li>
    <li><a href="#">F</a></li>
</ul>
</div> 
```

CSS：

```
.list{
width:300px;
}

a{
text-decoration:none;
color:#000;
}

.list ul{
padding:0 0 0 12px;
list-style:none;
}

.list ul li{
margin-bottom:8px;
padding-bottom:8px;
border-bottom:1px dashed #CCC;
}

.list ul li a{
display:block;
line-height:15px;
padding:0 0 0 9px;
float:left;
}

.list ul li ul{
padding:0 0 10px 15px; 
}

.list ul li ul li{
margin:4px 0;
min-height:7px;
border:none;
}

.list ul li ul li a{
display:block;
line-height:15px;
padding:0 0 0 9px;
float:left; 
} 
```

由于动态内容，我不知道列表项的值是多少。单行没有问题。但是如果列表项有双行，列表边框底部会像下图一样移动；

![在此处输入图像描述](../Images/71a70b803df924c6c7c97f98f0374ef6.png)

如果我从标签 css 中删除“float:left”，会变得更好，但我不想删除它，因为它会导致站点上的其他问题。我怎样才能用其他方式解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:50:22.130

尝试添加`overflow: hidden`到`.list ul li`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:53:50.537

如果要浮动链接，则需要 clearfix 父级。

```
.list ul li:after{
  content: "";
  display: table;
  clear: both;
} 
```

[在 JSFiddle 上查看](http://jsfiddle.net/W6F9G/)。[在此处](http://css-tricks.com/snippets/css/clear-fix/)阅读有关清除修复的更多信息。

# regex - struts2中的正则表达式验证

> ID：13975753
> 
> 赞同：1
> 
> 时间：2012-12-20T15:48:22.003
> 
> 标签：regex, validation, struts2, operator-keyword, requiredfieldvalidator

我需要使用 xml 文件验证来验证 struts2 中的代码字段。我有正则表达式，它有效。我想添加一个条件：字段为空也可以。

我尝试以这种方式使用 AND 运算符：

```
 <field name="codeFiscale">
    <field-validator type="regex">
        <param name="expression"><![CDATA[^(?=^$)(?=[a-zA-Z]{6}[0-9]{2}[abcdehlmprstABCDEHLMPRST]{1}[0-9]{2}([a-zA-Z]{1}[0-9]{3})[a-zA-Z]{1})$]]></param>
        <message key="error.CF.invalid" />
    </field-validator>
</field> 
```

但它不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:11:09.050

使用 OR 运算符

```
<field name="codeFiscale">
  <field-validator type="regex">
    <param name="expression"><![CDATA[(?:^\\s*$)|(^[a-zA-Z]{6}[0-9]{2}[abcdehlmprstABCDEHLMPRST]{1}[0-9]{2}([a-zA-Z]{1}[0-9]{3})[a-zA-Z]{1}$)]]></param>
    <message key="error.CF.invalid" />
  </field-validator>
</field> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:14:01.427

你不是说 OR 运算符吗？你想要“你的第一次表达或空白”。

尝试类似：

```
(?:firstExpression)?(blank?) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T12:11:40.387

我会好好工作的

`<param name="expression">^[0-9]{10}$</param>` 有一个错误。

```
<field name="contact">
    <field-validator type="regex">
        <param name="regex">^[0-9]{10}$</param>
        <message>Invalid contact Number(10 digit)</message>         
    </field-validator>
</field> 
```

# ckeditor - CKEditor forceAsPasteAsPlainText 在 replace() 中设置时不起作用

> ID：13975754
> 
> 赞同：0
> 
> 时间：2012-12-20T15:48:25.840
> 
> 标签：ckeditor

我有一个 CKEditor 3.6.3 的实例，设置如下：

```
CKEDITOR.replace("notice_text", {
                                    toolbar : "Mini", 
                                    enterMode : CKEDITOR.ENTER_BR, 
                                    fillEmptyBlocks : false,
                                    forcePasteAsPlainText : true,
                                    skin : "office2003", 
                                    width : 375,
                                    height : 100
                                    }); 
```

对于这个文本区域：

```
<textarea id="notice-text" name="notice_text" rows="5"></textarea> 
```

`Mini`是 config.js 中定义的工具栏。

替换中的所有设置都可以正常工作，除了`forcePasteAsPlainText`.

但是，当我`forcePasteAsPlainText`在 config.js 中进行设置时，它可以工作。就像在 config.js 中一样：

```
 config.forcePasteAsPlainText = true; 
```

在 config.js 中设置它会将其应用于站点上的所有 CKEditor，我希望它应用于这个`textarea`。

我查看了[CKEditor 更改日志](http://ckeditor.com/whatsnew)，并没有看到任何可以通过更新解决此问题的内容。

我以为你可以在`replace`函数中设置它。这是不可能的还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T13:01:10.183

添加`removePlugins : "pastefromword"` 到您的配置中。

```
CKEDITOR.replace("notice_text", {
                                    toolbar : "Mini", 
                                    enterMode : CKEDITOR.ENTER_BR, 
                                    fillEmptyBlocks : false,
                                    forcePasteAsPlainText : true,
                                    skin : "office2003", 
                                    removePlugins :  "pastefromword" ,  
                                    width : 375,
                                    height : 100
                                    }); 
```

这种力量存在`pastetext`于您的配置中，`pastefromword`而不存在于您的配置中。再次运行 ==> 它的工作！

# python - 运行脚本后保持图形“暂停”

> ID：13975756
> 
> 赞同：15
> 
> 时间：2012-12-20T15:48:35.143
> 
> 标签：python, numpy, matplotlib

我有这个 Python 代码：

```
from pylab import *
from numpy import *

time=linspace(-pi,pi,10000)
ycos=cos(time)
ysin=sin(time)

plot(time,ycos)
plot(time,ysin)

show() 
```

如果我通过 Ipython 终端执行所有这些步骤，我可以保持图形打开并与之交互。但是，如果我通过图形运行脚本`$python script.py`会立即打开和关闭。

我怎么能有与 Ipython 终端相同的行为，但是当作为脚本运行时呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-21T16:47:46.093

在快速查看问题后，这是一个更明智的答案。

首先，让我们假设

```
from matplotlib import pylab
pylab.plot(range(10), range(10))
pylab.show() 
```

不“坚持”情节，即在节目结束之前几乎没有显示。如果发生这种情况，则该调用`pylab.show()`假定您在交互模式下运行，因此在调用此函数后还有一些其他进程将继续执行。由于情况并非如此，因此 Python 退出，绘图也将显示。现在，解决这个问题的第一种方法是强制`pylab.show`阻塞：

```
pylab.show(block=True) 
```

不过，我们不知道为什么`pylab.show`假设您在交互模式下运行。为了确认它的假设，实验运行以下代码

```
import matplotlib
print matplotlib.is_interactive() 
```

如果这打印为 True，那么这意味着您的默认配置设置为`interactive: True`. 要检查是哪个配置，请`print matplotlib.matplotlib_fname()`找出它的路径。打开它并检查`interactive`参数的值。

现在，如果您不想修改配置，我会建议一个不同的解决方案：

```
import matplotlib
from matplotlib import pylab

if matplotlib.is_interactive():
    pylab.ioff()
pylab.plot(range(10), range(10))
pylab.show() 
```

所以没有任何情况认为它必须在调用方法`matplotlib`之前渲染东西。`show`最后，这些解决方案中最可怕的是使用`pylab.pause`或等价物：

```
from matplotlib import pylab
pylab.ion()  # Force interactive    
pylab.plot(range(10), range(10))
pylab.show() # This does not block
pylab.pause(2**31-1) 
```

# javascript - 用于查询的 Google Maps API，而不是呈现

> ID：13975759
> 
> 赞同：1
> 
> 时间：2012-12-20T15:48:45.703
> 
> 标签：javascript, html, google-maps, maps

有没有办法在没有所有渲染内容的情况下完成创建谷歌地图的过程？我有一个项目，我需要在地图上进行一些空间查询，我正在使用 Maps API，但我实际上不必显示地图。

我知道我显然可以这样做`display: none`，但如果可能的话，我想要一个不会浪费大量客户端处理能力来首先绘制所有地图内容的解决方案，无论它是否真的被渲染。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T19:23:46.083

[显然， Google Maps/Google Earth APIs 服务条款（第 10.1 g 节）](https://developers.google.com/maps/terms#section_10_1)不允许这样做

引用：

> (g) 不得使用没有 Google 地图的内容。您不得在没有相应 Google 地图的情况下使用或显示内容，除非 Maps API 文档明确允许您这样做，或获得 Google 的书面许可。

# c - 在 C 中将文件拆分为固定大小的块

> ID：13975760
> 
> 赞同：2
> 
> 时间：2012-12-20T15:48:46.467
> 
> 标签：c, file, split, partitioning

我被要求将文件拆分为固定大小的块来进行文件加密。更具体地说，我有很多文件，可能是二进制文件或文本文件。

我被要求编写一个用户程序，将这些文件作为输入，将每个文件拆分为多个 32 位块，然后发出 32 位块。

场景是用户通过将文件分割成块，加密块（使用 RSA），然后将密文发送到服务器，将他们的文件备份到远程服务器中。

考虑两个文件，一个是 33 位文本文件 A，另一个是 34 位二进制文​​件 B。A
可以划分为两个 32 位块 A1 和 A2（A2 的最后 31 位均为 0）。
B 可以划分为两个 32 位块 B1 和 B2（B2 的最后 30 位全为 0）。如果我得到A1（或A2，B1，B2），那么我将A1视为一个32位整数，可以进行RSA加密。

我能够为 RSA 加密编写代码，但不幸的是，我不知道如何编写 C 代码来获取 A1、A2、B1、B2。

谁能帮我写一个示例代码或给我一些参考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:12:52.417

以下是您可以轻松转换为 C 代码的高级算法：

```
char* get_Next_Block_From_File(FILE *fp, int seek_offset, int blockSize)
{
    // Open file
    // lseek to seek_offset

    len = blockSize / 8;
    bit_pos = blockSize % 8;

    for (i=0; i<len; i++) {
        copy_from_file_to_local_buffer_byte_by_byte();
    }

    if (bit_pos) {
        byte[i] <<= (8 - bit_pos);
        append_byte_to_local_buffer();
    }

    return local_buffer;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T12:02:52.660

```
C Program for splitting the given file into fixed size blocks

// split.cpp : main project file.

#include "stdafx.h"

using namespace System;

#include <stdio.h>
#include <string.h>
#include <conio.h>

#define SEGMENT 600 //approximate target size of small file

long file_size(char *name);//function definition below
int splitFile(char *fp1, size_t maxSize);

long file_size(char *name)
{
    FILE *fp = fopen(name, "rb"); //must be binary read to get bytes

    long size=-1;
    if(fp)
    {
        fseek (fp, 0, SEEK_END);
        size = ftell(fp)+1;
        fclose(fp);
    }
    return size;
}

/*
**  splitFile
**  Splits an existing input file into multiple output files with a specified
**  maximum file size.
**
**  Return Value:
**  Number of created result files, or 0 in case of bad input data or a negative
**  value in case of an error during file splitting.
*/
int splitFile()
{
    int result = 0;

    char buffer[1024];//change see //2098 * 16
    size_t size;
    size_t read;
    size_t written;

    int segments=0, i, len, accum;

    //FILE *fp1, *fp2;

    char filename[260]={""};
    //char filename[260]={"D:\\smallFileName_"};//base name for small files.
    char largeFileName[]={"D:\\Payload_data\\Datafile_to_split.txt"};//change to your path
    long sizeFile = file_size(largeFileName);
    char smallFileName[260];
    char line[1024];
    long maxSize= sizeFile/SEGMENT + 1;
    int filecounter=1;

    FILE *fIn;
    FILE *fOut;
    fIn = fopen(largeFileName, "rb");

    if ((fIn != NULL) && (maxSize > 0))
    {
       // fIn = fopen(fIn, "rb");
        if (fIn != NULL)
        {
            fOut = NULL;
            result = 1;   /* we have at least one part */

            // Splitting Data from pchar into multiple files
                for(i=1; i<25 ;i++)
                    {               
                        sprintf(smallFileName, "%s%d.txt", filename, i);                      
                         printf("\n File number %d",i);
                         while (!feof(fIn))
                         {
                         /* initialize (next) output file if no output file opened */
                              if (fOut == NULL)
                              {  
                                 filecounter++;

                                sprintf(buffer, "smallFileName_%d", filecounter);
                                fOut = fopen(buffer, "wb");
                             if (fOut == NULL)
                             { 
                                 result *= -1;   
                                 break; 
                             }

                                size = 0;
                             }

                /* calculate size of data to be read from input file in order to not exceed maxSize */
                read = sizeof(buffer);
                if ((size + read) > maxSize)
                {
                    read = maxSize - size;
                }

                /* read data from input file */
                read = fread(buffer, 1, read, fIn);
                if (read == 0)
                {
                    result *= -1;
                    break;
                }

                /* write data to output file */
                written = fwrite(buffer, 1, read, fOut);

                if (written != read)
                {
                    result *= -1;
                    break;
                }

                /* update size counter of current output file */
                size += written;
                if (size >= maxSize)   /* next split? */
                {
                    fclose(fOut);
                    fOut = NULL;
                    result++;
                }
            }

            /* clean up */
            if (fOut != NULL)
            {
                fclose(fOut);
            }
            fclose(fIn);
        }
    } 
}
    return (result);
}

int main(void)
{

    //segments = sizeFile/SEGMENT + 1;//ensure end of file

    //fp1 = fopen(largeFileName, "r");

    ////if(fp1)
    ////{
    //    for(i=0;i<segments;i++)
    //    {
    //        accum = 0;
    //        sprintf(smallFileName, "%s%d.txt", filename, i);
    //        fp2 = fopen(smallFileName, "w");
    //        if(fp2)
    //        {
    //            while(fgets(line, 1080, fp1) && accum <= SEGMENT)
    //            {
    //                accum += strlen(line);//track size of growing file
    //                fputs(line, fp2);
    //            }
    //            fclose(fp2);
    //        }
    //    }
    //    fclose(fp1);
    //}

    //maxSize =sizeFile/SEGMENT + 1;
    //ensure end of file
    splitFile();

    getch();
    printf("\n File splitted Successfully");
    return 0;
} 
```

# python - Python变量分配和`id`关键字

> ID：13975762
> 
> 赞同：1
> 
> 时间：2012-12-20T15:48:49.060
> 
> 标签：python, parsing, variables

> **可能重复：**
> [Python“is”运算符对整数的行为异常](https://stackoverflow.com/questions/306313/python-is-operator-behaves-unexpectedly-with-integers)
> [为什么（0-6）为-6 = False？](https://stackoverflow.com/questions/11476190/why-0-6-is-6-false)

因此，在玩了一下`id`（python 2.6.5）时，我注意到了以下内容（shell session）：

```
>>> a = 1
>>> id(a)
140524904
>>> b = 1
>>> id(b)
140524904 
```

当然，一旦我修改其中一个变量，它就会被分配给一个新的内存地址，即

```
>>> b += 1
>>> id(b)
140524892 
```

最初将具有相同值的两个变量分配到相同的内存位置或只是优化即 CPython 是正常行为吗？

Ps 我花了一点时间浏览 中的代码`parser`，但找不到变量的分配位置和方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T17:00:44.063

正如[glglgl 所提到的](https://stackoverflow.com/a/13975850/824425)，这是 CPython 的一个实现细节。如果您查看`Objects/longobject.c`CPython 的源代码（例如 3.3.0 版），您会找到正在发生的事情的答案：

```
#if NSMALLNEGINTS + NSMALLPOSINTS > 0
/* Small integers are preallocated in this array so that they
   can be shared.
   The integers that are preallocated are those in the range
   -NSMALLNEGINTS (inclusive) to NSMALLPOSINTS (not inclusive).
*/
static PyLongObject small_ints[NSMALLNEGINTS + NSMALLPOSINTS]; 
```

这解释了为什么，之后`a = 1; b = 1`，`a is b`将是`True`，即使你说`a += 2; b +=2; a -= 2; b -= 2`。每当一个数字被计算为具有适合该数组的值时，就会从该数组中简单地选取结果对象，从而节省一点内存。

`small_ints`您可以使用如下函数计算此数组的边界：

```
def binary_search(predicate, lo, hi):
    while lo + 1 < hi:
        mid = (lo + hi) / 2
        if predicate(mid):
            lo = mid
        else:
            hi = mid
    return lo

def is_small_int(n):
    p = n + 1
    q = n + 1
    return (p - 1) is (q - 1)

def min_neg_small_int():
    p, q = -1, -1
    if p is not q:
        return 0
    while p is q:
        p += p
        q += q
    return binary_search(is_small_int, p / 2, p) - 1

def max_pos_small_int():
    p, q = 1, 1
    if p is not q:
        return 0
    while p is q:
        p += p
        q += q
    return binary_search(is_small_int, p / 2, p)

def small_int_bounds():
    return (min_neg_small_int(), max_pos_small_int()) 
```

对于我的构建（Python 2.7、64 位 Windows 构建）`small_int_bounds() == (-5, 256)`，. 这意味着`-5`和`256`（包括）之间的数字通过`small_ints`数组 in共享`Objects/longobject.c`。

-edit- 我看到[elssar 注意到](https://stackoverflow.com/questions/13975762/python-variable-allocation-and-id-keyword/13977024#comment19284877_13975762)[对于一些文字的实习](https://stackoverflow.com/a/9475950/805427)有类似的答案。如[this answer所述](https://stackoverflow.com/a/306353/824425)[，文档中`PyInt_FromLong`](http://docs.python.org/2/c-api/int.html#PyInt_FromLong)也提到了这一事实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:52:09.343

1.  在 python 中，所有变量都是指向某些对象的指针。偶数。
2.  数字是不可变的对象。因此，CPython 不需要创建具有相同值的新对象。
3.  这并不意味着 CPython 将始终使用相同的对象。
4.  在您的第一个示例中，变量`a`和`b`指向同一个对象。
5.  当你让`b += 1`你“创建”新对象时`2`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T15:53:26.027

在这里，术语“变量”必须精确：一方面是对象，另一方面是绑定到对象的名称。

如果这样做`a = b = 1`，两者`a`和`b`都绑定到表示 的同一个对象`1`。

如果你这样做`a = 1; b = 1`，我认为它是相同的 CPython 细节。一般来说，一个实现可以选择让两个对象在`1`这里都表示和使用它们。但由于这会浪费内存，因此通常不会以这种方式完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T15:51:55.890

`a`并且`b`两者都使用 ID 引用内存 ( `1`)中的同一个对象`140524904`。一旦你`b += 1`有了`2`，它位于其他地方。

# python - 在更新图上运行 AStar

> ID：13975765
> 
> 赞同：3
> 
> 时间：2012-12-20T15:48:52.087
> 
> 标签：python, algorithm, graph-algorithm, path-finding, a-star

我们正在开展一个项目，该项目涉及在大地图上运行最短路径算法。

我们现在使用 AStar 和 Air Distance heurstic。

我们的项目涉及接收数据库中链接的更新。目前我们重新开始搜索每个链接更新或在每个预定义的时间间隔。有没有办法更新 AStar 算法来更新搜索，而无需在收到的每个更新时重新开始搜索？是否有适合此任务的更好算法？

披露：这是学生项目的一部分。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:22:13.190

您可能正在寻找一种路由算法（本质上处理不断变化的图形）。

实现它的一种方法是使用[距离矢量路由协议](http://en.wikipedia.org/wiki/Distance-vector_routing_protocol)（它是[贝尔曼福特算法](http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm)的分布式版本），其工作原理如下¹：

*   周期性地，每个顶点将其“距离向量”发送给它的邻居[该向量表示从发送顶点到另一个顶点的“成本”。
*   它的邻居尝试更新他们的路由表[最好通过哪个边缘移动到每个目标]
*   对于您的情况，每个节点都知道到达其邻居的最快方法是什么（如果图未加权，则为 1），并且它（顶点）将此数字添加到距离向量中的每个主干，以便知道如何以及如何到达目的地需要很多时间。每次修改到达时，相关节点将调用协议的新迭代，直到它重新收敛。

但是请注意，该算法是不知情的（但可以很好地处理不断变化的图形，但有一定的限制，仍然存在[计数到无穷大的问题](http://en.wikipedia.org/wiki/Distance-vector_routing_protocol#Count-to-infinity_problem)）

* * *

(1) 算法的解释基于我在[此线程](https://stackoverflow.com/q/7245840/572670)中提供的解释，并进行了一些修改。（毕竟这是相同的建议算法）。

# sql-server-2008 - 动态 SQL 中的变量超出范围

> ID：13975769
> 
> 赞同：0
> 
> 时间：2012-12-20T15:49:09.180
> 
> 标签：sql-server-2008, dynamic-sql

我需要编写一个接受变量的存储过程（实际上，其中有几个，但会为此目的对其进行简化），然后构建一个基于该变量进行过滤的 SQL 语句。但是，用户是否传递该变量是可选的。如果用户没有传递变量，过滤器必须忽略该部分，而不是返回 Null 值。

基本上，我得到的是：

```
@VariableA varchar(50)
@SQL nvarchar(max)

Select @SQL = 'Select ColumnX from TableY where (('+@VariableA+ ' = somevalue) or (@VariableA is null))'

exec sp_executesql @SQL 
```

所以，我的问题是当@SQL 字符串作为查询执行时，@VariableA 变量超出范围。如果用户不通过它，我如何编写动态 SQL 查询来运行，同时检查变量是否为空值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:58:24.333

您需要在此处添加更多参数，并且您不需要连接 @SQL 字符串中的变量，额外的变量告诉动态 SQL 应该引用什么：

```
declare @VariableA varchar(50)
  , @SQL nvarchar(max)

Select @SQL = N'Select ColumnX from TableY where (@VariableA = somevalue) or (@VariableA is null)'

exec sp_executesql @SQL, N'@VariableA varchar(50)', N'@VariableA = @VariableA' 
```

您需要在动态 SQL 之前适当地设置 @VariableA。

更多信息： http: [//msdn.microsoft.com/en-us/library/ms188001 (v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms188001(v=sql.100).aspx)

# r - Lattice、grid.arrange、arrangeGrob、定义边距

> ID：13975772
> 
> 赞同：2
> 
> 时间：2012-12-20T15:49:16.153
> 
> 标签：r, lattice

我正在尝试在同一页面中放置 2 个格子条形图，

```
graph1<-useOuterStrips(barchart(value1~Var1|Var2+Var3,data=table.df, ylab=NULL)
graph2<-useOuterStrips(barchart(value2~Var1|Var2+Var3,data=table.df, ylab=NULL)
grid.arrange(arrangeGrob(graph1,graph2, nrow=2, ncol=2, left=("percentage")) 
```

它工作得很好，但是左边的标题靠近边距，我想改变边距。

关于如何做到这一点的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:08:56.303

你留下的 textGrob 是根据文本调整大小的，你可以添加一个空行，例如：

```
 left=("\n percentage")) 
```

# objective-c - 如何使用 TDD 测试类的属性？

> ID：13975774
> 
> 赞同：0
> 
> 时间：2012-12-20T15:49:26.403
> 
> 标签：objective-c, tdd, respondstoselector

为什么当我使用方法`respondsToSelector:`或`instancesRespondToSelector:`在第 43 行时，我无法绕过 STAssertTrue？

//我的测试用例代码

```
- (void)testApiClass {
    //Check object
    NSString* classKey = @"Api";
    id obj = NSClassFromString(classKey);
    STAssertNotNil(obj, [NSString stringWithFormat:@"Model '%@' not found.", classKey]);
    //Check properties
    NSArray* properties =
    @[
        @"performSyncRequestWithUri::",
        @"performAsyncRequestWithUri:::",
    ];
    for (NSString* property in properties) {
        SEL propertySel = NSSelectorFromString(property);
        BOOL isRespondsToSel = [obj respondsToSelector:propertySel];
        STAssertTrue(isRespondsToSel, [NSString stringWithFormat:@"Property '%@' not found on object of class name '%@'", property, [obj class]]);
    }    
}

@interface Api : NSObject

- (NSDictionary*)performSyncRequestWithUri:(NSString *)requestUri params:(NSDictionary *)params;
- (void)performAsyncRequestWithUri:(NSString *)requestUri params:(NSDictionary *)params completionHandler:(void (^)(NSDictionary *, NSError *))completionBlock;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:32:02.660

数组中的字符串常量与界面`properties`中的选择器不匹配`Api`。

此外，这些选择器都没有引用属性。一个属性有两个选择器：一个 getter，like `stringValue`，它没有冒号，一个 setter，like `setStringValue:`，它有一个冒号并且（通常）以 开头`set`。

不要将选择器嵌入字符串中，而是创建一个选择器数组：

```
SEL selectors[] = {
    @selector(performSyncRequestWithUri:params:),
    @selector(performAsyncRequestWithUri:params:completionHandler:),
    NULL
};

for (size_t i = 0; selectors[i]; ++i) {
    SEL selector = selectors[i];
    BOOL respondsToSelector = [obj respondsToSelector:selector];
    STAssertTrue(respondsToSelector, [NSString stringWithFormat:
        @"Object %@ doesn't respond to selector %s",
        obj, sel_getName(selector)]);
} 
```

这里的优点是 Xcode 会为您自动完成选择器，您可以通过命令单击选择器来跳转到它们的定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:25:22.307

这些方法被调用`performAsyncRequestWithUri:params:completionHandler:`和`performSyncRequestWithUri:params:`

# java - 运行 WebSphere Application Server v6.1 时出现 64 位 RAD 8.0.4 控制台和调试模式问题

> ID：13975776
> 
> 赞同：1
> 
> 时间：2012-12-20T15:49:32.053
> 
> 标签：java, eclipse, websphere, ibm-rad

我正在 Windows 7 上运行 IBM Rational Application Developer (RAD) 8.0.4 的 64 位安装。我在其中运行了 WebSphere Application Server (WAS) v6.1。老实说，我不完全确定 WAS 服务器是 32 位还是 64 位。 **我的问题是：**

1.  除了 WAS 启动时几行无用的日志记录外，**我在 RAD 控制台中根本没有任何日志记录**。即使抛出异常也不行——没有轨迹，什么都没有。我在 WebSphere 属性对话框声称的位置找不到 SystemOut.log 文件。但是，里面有一个`C:\Users\myUser\AppData\Local\VirtualStore\Program Files\IBM\SDP\runtimes\base_v61\profiles\was61profile1\logs\server1\SystemOut.log`，但是不知道怎么配置RAD/Eclipse才能看到。

    我*确实*看到一条`Access is Denied`消息作为我在控制台*中看到的第一行。*但是 RAD 不清楚什么或谁被拒绝访问，并且在所有其他方面，服务器都可以正常工作，除了......

2.  **我似乎无法让 WAS 实例在调试模式下运行**。如果我“在调试中重新启动...”，RAD 符合要求，但 Eclipse 的服务器面板中的服务器不显示“调试，同步”——它只是显示“已启动，同步”——就像正常启动一样. Eclipse 中的“调试”面板显示了那里的服务器，并声称调试器正在侦听端口 8001。但应用程序不会在任何断点处停止。

我的同事正在运行相同的 Windows 7 机器，但使用的是 32 位 RAD 8.0.4，并且似乎没有这个问题。 **我还没有准备好承认并将 RAD 重新安装到 32 位，我也没有时间。一定有别的解决办法。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:01:54.243

使用管理控制台并打开调试标志。

从命令行启动服务器（而不是从 RAD 中），服务器将以调试模式启动。

现在尝试调试一个远程应用程序（就像您在 Eclipse 中的任何远程应用程序一样）以将 RAD 附加到这个应用程序服务器。

试试看它是否以这种方式工作。

我还会尝试查看服务器是否在调试模式下运行（通过在端口 7777 上查找 netstat，这是默认调试端口）

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T18:29:01.013

通过在安装 RAD 的文件系统树上授予**LOCAL_MACHINE/Users**组更多权限，我能够解决日志记录问题( `C:\Program Files\IBM\SDP\`)。我发现当我在 Windows 7 中“以管理员身份”运行 RAD 时，我的日志记录问题就消失了。

也许我应该进行更精细的分析，以准确找出较低级别的哪个目录可能需要不同/更多权限，而不是为所有 RAD 安装树更改它；但这目前对我有用。

* * *

**更新 11.22.2013**

我认为最终的罪魁祸首是[Windows 7 UAC](http://windows.microsoft.com/en-us/windows7/products/features/user-account-control)。显然，当 UAC 完全启用时，安装在默认“程序文件”或“程序文件 (x86)”目录中的应用程序会收到额外的安全限制。在调试和控制台日志记录中运行服务器似乎需要修改 Windows 7 感觉不应该在没有提升权限的情况下修改的内容的权限。 **通过不在默认的*Program Files*或*Program Files (x86)*目录中安装 RAD，或者完全禁用 UAC，问题得到解决。** 禁用 UAC 可能被认为是有风险的，因此我的解决方案是在默认程序文件位置之外重新安装 RAD。

# c# - MVC 中的 P3P 标头信息

> ID：13975777
> 
> 赞同：8
> 
> 时间：2012-12-20T15:49:42.163
> 
> 标签：c#, asp.net-mvc, razor, http-headers

我不确定我应该把它放在我的 Asp.net MVC 网站的哪个位置：

```
HttpContext.Current.Response.AppendHeader("P3P", "CP=\\\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\\\""); 
```

我把它放在：

```
public static void RegisterRoutes(RouteCollection routes)
{
  HttpContext.Current.Response.AppendHeader("P3P", "CP=\\\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\\\"");
  routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
  routes.MapRoute(
      "Default", // Route name
      "{controller}/{action}/{id}", // URL with parameters
      new { controller = "Account", action = "Logon", id = UrlParameter.Optional }
  );

} 
```

但我回来了

> 在这种情况下没有响应。

有谁知道我应该把这个放在哪里？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-20T15:52:01.940

你可以把它放在 web.config 中：

```
 <system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="P3P" value='CP="CAO PSA OUR"'/> 
```

这样你就不需要把它放在代码中了。

有关含义的详细信息，请参阅[此 SO 答案](https://stackoverflow.com/a/5258105/419956)`value`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-20T15:55:24.913

假设您希望在每个响应中都使用此标头，则应该这样做

```
public class P3PHeaderAttribute : ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        filterContext.HttpContext.Response.AppendHeader("P3P", "CP=\\\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\\\"");

    }
} 
```

然后将过滤器添加到全局集合中

```
 public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new P3PHeaderAttribute());
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T15:51:44.493

您应该创建一个继承`ActionFilter`和覆盖的类`OnResultExecuting()`以添加该标头。

然后，将其添加到全局过滤器集合中。

# vbscript - 如何使用 Windows 脚本以安全模式重新启动计算机？

> ID：13975779
> 
> 赞同：4
> 
> 时间：2012-12-20T15:49:47.590
> 
> 标签：vbscript, batch-file, restart, safe-mode

大多数新手计算机用户在遇到问题并不得不将计算机重新启动到安全模式时都会感到困惑，那么您如何编写脚本使其自动运行呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T16:00:06.590

这是一个批处理脚本，它将重新启动 Windows XP、Vista 或 Windows 7 计算机进入安全模式。

```
Echo Off

REM Check Windows Version
ver | findstr /i "5\.0\." > nul
IF %ERRORLEVEL% EQU 0 goto ver_nt5x
ver | findstr /i "5\.1\." > nul
IF %ERRORLEVEL% EQU 0 goto ver_nt5x
ver | findstr /i "5\.2\." > nul
IF %ERRORLEVEL% EQU 0 goto ver_nt5x
ver | findstr /i "6\.0\." > nul
IF %ERRORLEVEL% EQU 0 goto ver_nt6x
ver | findstr /i "6\.1\." > nul
IF %ERRORLEVEL% EQU 0 goto ver_nt6x
goto warn_and_exit

:ver_nt5x
:Run Windows 2000/XP specific commands here
bootcfg /raw /a /safeboot:network /id 1
REG ADD HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\RunOnce /v "*UndoSB" /t REG_SZ /d "bootcfg /raw /fastdetect /id 1"
SHUTDOWN -r -f -t 07
goto end

:ver_nt6x
:Run Windows Vista/7 specific commands here
bcdedit /set {current} safeboot network
REG ADD HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\RunOnce /v "*UndoSB" /t REG_SZ /d "bcdedit /deletevalue {current} safeboot"
SHUTDOWN -r -f -t 07
goto end

Echo On

:warn_and_exit
echo Machine OS cannot be determined.

:end 
```

该脚本最初由 ChunkDog 发布于：[https ://forum.ultravnc.net/viewtopic.php?f=50&t=29663](https://forum.ultravnc.net/viewtopic.php?f=50&t=29663)

我已经对其进行了修改，并添加了一个 vbscript，询问用户是否要重新启动到安全模式，并根据用户的输入调用批处理文件。

```
Dim oShell, returnCode
Set objShell = CreateObject("Shell.Application")
Set oShell = WScript.CreateObject("WScript.Shell")

returnCode = oShell.Popup("Do you want to restart your computer in Safe Mode", 0, "Restart In Safe Mode", 4 + 48 + 256)

Select Case returnCode
case 6, -1
    objShell.ShellExecute "tryout.bat", "", "", "runas", 0
    case 7
    oShell.popup "Operation Canceled", 0, "Restart In Safe Mode", 0 + 64 + 0
End Select 
```

这尚未在 Windows 8 上进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T20:57:17.690

以管理员身份打开 cmd，然后使用这些参数“bcdedit /set {current} safeboot network”运行 bsdedit

# jquery - 通过从 Kendo 网格拖放创建 UL

> ID：13975780
> 
> 赞同：1
> 
> 时间：2012-12-20T15:49:48.520
> 
> 标签：jquery, jquery-ui, kendo-ui

如果尚不存在，我正在尝试在我的 div“#dropZone”中创建一个无序列表 (UL)。

如果确实存在，我想将拖动的项目添加为 UL 的附加 LI。

我有三个来源可供借鉴：

*   #drg1
*   #drg2
*   #grid - 或者这会是我的#mRow？

这是我尝试的 JSFiddle 链接：

[JSFiddle - 未捕获的类型错误：对象 [对象对象] 没有方法“可拖动”](http://jsfiddle.net/Mithrilhall/nmB69/297/)

```
var drpOptions = {
group: "gridGroup",
drop: function(event, ui) {
    if ($('#dropZone').has('ul')) {
        $("#list").append('<li>' + ui.draggable.text() + '</li>');
    } else {
        $("#dropZone").append('<ul id="list"><li>' + ui.draggable.text() + '</li></ul>');
    }
}}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:36:18.023

方法不是`draggable`但是`kendoDraggable`。检查[文档](http://docs.kendoui.com/api/framework/draggable#hint-function--jquery)中的使用示例。

您可能想要定义这样的`hint`函数：

```
$("#drg1").kendoDraggable({
    hint: function (element) {
        return element.clone();
    }
});

$("#drg2").kendoDraggable({
    hint: function (element) {
        return element.clone();
    }
}); 
```

为了看到你在页面上`divs` *浮动*，而你`drag`他们。

# c++ - 如何在 printf 中显示我的源代码的行号

> ID：13975781
> 
> 赞同：2
> 
> 时间：2012-12-20T15:49:51.333
> 
> 标签：c++, c

> **可能重复：**
> [C/C++ 行号](https://stackoverflow.com/questions/2849832/c-c-line-number)

我想显示触发 printf 的行号？

它可能看起来像这样：

```
printf("the line number is: %d",SOME_LIBC_MACRO); 
```

怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T15:50:26.107

使用`__LINE__`宏

```
printf("the line number is: %d", __LINE__); 
```

其他预定义宏的列表可用于[GCC](http://gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html)和[Visual Studio](http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.71%29.aspx)

# c++ - C++ 模板化虚函数

> ID：13975782
> 
> 赞同：5
> 
> 时间：2012-12-20T15:49:55.030
> 
> 标签：c++

C++ 不支持模板化的虚拟成员函数，但我有一个理想的场景。我想知道是否有人对实现这一目标的方法有想法。

```
#include <iostream>

class Foo {
public:
    virtual void bar(int ){}
    // make a clone of my existing data, but with a different policy
    virtual Foo* cloneforDB() = 0;
};

struct DiskStorage {
    static void store(int x) { std::cout << "DiskStorage:" << x << "\n"; }
};

struct DBStorage {
    static void store(int x) { std::cout << "DBStorage:" << x << "\n"; }
};

template<typename Storage>
class FooImpl : public Foo {
public:
    FooImpl():m_value(0) {}
    template<typename DiffStorage>
    FooImpl(const FooImpl<DiffStorage>& copyfrom) {
        m_value = copyfrom.m_value;
    }
    virtual void bar(int x) {
        Storage::store(m_value);
        std::cout << "FooImpl::bar new value:" << x << "\n";
        m_value = x;
    }
    virtual Foo* cloneforDB() {
        FooImpl<DBStorage> * newfoo = new FooImpl<DBStorage>(*this);
        return newfoo;
    }
    int m_value;
};

int main()
{
    Foo* foo1 = new FooImpl<DiskStorage>();
    foo1->bar(5);
    Foo* foo2 = foo1->cloneforDB();
    foo2->bar(21);
} 
```

现在，如果我想克隆 Foo 实现，但使用不同的存储策略，我必须明确说明每个这样的实现：

```
cloneforDB()
cloneforDisk() 
```

模板参数会简化这一点。谁能想到一种更清洁的方法来做到这一点？请专注于这个想法而不是例子，因为它显然是一个人为的例子。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T16:50:31.303

通常，如果您想使用虚拟模板方法，则意味着您的类层次结构设计中有问题。其高层原因如下。

模板参数必须在编译时知道，这就是它们的语义。它们用于保证代码的健全性。

虚函数用于多态性，即。运行时动态调度。

因此，您不能将静态属性与运行时调度混为一谈，纵观全局，这是没有意义的。

在这里，您将某些东西存储在某处的事实不应该成为您的方法**类型**的一部分，因为它只是一种行为特征，它可能会在运行时改变。因此，在方法类型中包含该信息是**错误的。**

这就是 C++ 不允许这样做的原因：您必须依靠多态性来实现这种行为。

一种简单的方法是将指向`Storage`对象的指针作为参数传递（如果您只想为每个类提供一个对象，则为单例），并在虚函数中使用该指针。

这样，您的类型签名不依赖于您的方法的特定行为。您可以在运行时更改存储（在此示例中）策略，这确实是您应该要求的一种良好做法。

有时，行为可以由模板参数（例如 Alexandrescu 的策略模板参数）决定，但它是在类型级别，而不是方法级别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T18:03:10.753

我有时用来解决这个问题的一个技巧是：

```
template<typename T>
using retval = std::vector<T const*>;
struct Bob {};

// template type interface in Base:
struct Base {
  template<typename T>
  retval<T> DoStuff();

  virtual ~Base() {};

// Virtual dispatch so children can implement it:
protected:
  virtual retval<int> DoIntStuff() = 0;
  virtual retval<double> DoDoubleStuff() = 0;
  virtual retval<char> DoCharStuff() = 0;
  virtual retval<Bob> DoBobStuff() = 0;
};

// forward template interface through the virtual dispatch functions:
template<> retval<int> Base::DoStuff<int>() { return DoIntStuff(); }
template<> retval<double> Base::DoStuff<double>() { return DoDoubleStuff(); }
template<> retval<char> Base::DoStuff<char>() { return DoCharStuff(); }
template<> retval<Bob> Base::DoStuff<Bob>() { return DoBobStuff(); }

// CRTP helper so the virtual functions are implemented in a template:
template<typename Child>
struct BaseHelper: public Base {
private:
  // In a real project, ensuring that Child is a child type of Base should be done
  // at compile time:
  Child* self() { return static_cast<Child*>(this); }
  Child const* self() const { return static_cast<Child const*>(this); }
public:
  virtual retval<int> DoIntStuff() override final { self()->DoStuff<int>(); }
  virtual retval<double> DoDoubleStuff() override final { self()->DoStuff<double>(); }
  virtual retval<char> DoCharStuff() override final { self()->DoStuff<char>(); }
  virtual retval<Bob> DoBobStuff() override final { self()->DoStuff<Bob>(); }
};

// Warning: if the T in BaseHelper<T> doesn't have a DoStuff, infinite
// recursion results.  Code and be written to catch this at compile time,
// and I would if this where a real project.
struct FinalBase: BaseHelper<FinalBase> {
  template<typename T>
  retval<T> DoStuff() {
    retval<T> ret;
    return ret;
  }
}; 
```

我从基于模板的分派到虚拟函数分派，再回到基于模板的分派。

该接口是根据我要调度的类型模板化的。一组有限的此类类型通过虚拟调度系统转发，然后在编译时重新调度到实现中的单个方法。

我承认这很烦人，并且能够说“我希望这个模板是虚拟的，但只有以下类型”会很好。

这很有用的原因是它允许您编写与类型无关的模板粘合代码，统一操作这些方法，而无需执行诸如传递指向方法的指针之类的事情，或者编写提取哪个方法的类型特征包打电话。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T17:03:41.590

一直使用模板：

```
class Foo {
public:
    virtual void bar(int ){}

    template <class TargetType>
    Foo* clonefor() const;
};

class FooImpl { ... };

template 
inline <class TargetType>
Foo* Foo::clonefor() const
{
    return new FooImpl<TargetType>(*this);
} 
```

现在调用它：

```
int main()
{
    Foo* foo1 = new FooImpl<DiskStorage>();
    foo1->bar(5);
    Foo* foo2 = foo1->clonefor<DBStorage>();
    foo2->bar(21);
} 
```

# c++ - int f(int *i) 和 int f(int &i) 的区别

> ID：13975788
> 
> 赞同：0
> 
> 时间：2012-12-20T15:50:18.480
> 
> 标签：c++

> **可能重复：**
> [C++ 中的指针变量和引用变量有什么区别？](https://stackoverflow.com/questions/57483/what-are-the-differences-between-pointer-variable-and-reference-variable-in-c)
> [指针与参考](https://stackoverflow.com/questions/114180/pointer-vs-reference)

要在 C++ 中进行引用调用，我想我可以使用这两个中的任何一个：

```
int f(int *x);
int g(int &x); 
```

他们会这样称呼：

```
int *w;
f(w);
g(*w);

int y;
f(&y);
g(y); 
```

功能有区别`f`吗`g`？我应该能够`x`作为`int*`指针和两个函数`*x`的内部使用。`int`那么区别是什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:52:28.380

这大部分是口味问题。但是有一个重要的区别。指针 ( `*`) 可以具有空值，而引用不能为空，并且必须始终引用有效对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:52:20.220

引用不能为 NULL，因此您不必检查它。否则，它可能只是语法糖（至少对于简单的用例）。检查你的程序的反汇编看看。

# rabbitmq - 芹菜花——添加远程任务工作者不会显示在花中

> ID：13975803
> 
> 赞同：2
> 
> 时间：2012-12-20T15:50:50.087
> 
> 标签：rabbitmq, celery, amqp

我在本地机器上运行了 Celery 花 + rabbitmq 设置，localhost:5555 上的 UI 显示了一个空的工人列表。现在，在远程机器上，我有一朵芹菜花连接到同一个代理，如下所示：

服务器（本地设置）：芹菜花 --broker=amqp://guest:guest@localhost:5672// 远程：芹菜花 --broker=amqp://smurf@remotemachine:5672//

当我在 rabbitmq 中查看连接选项卡时，连接成功，但是当花没有通过 web-ui 列出工作人员时。为什么它会成功连接到rabbitmq但不显示在花上？

提前致谢。

# c++ - c++11 函数调用中的向量初始化

> ID：13975804
> 
> 赞同：21
> 
> 时间：2012-12-20T15:50:51.210
> 
> 标签：c++, vector, c++11

我对在 c++11 中定义向量的新快捷方式有疑问。假设我有以下课程

```
struct Tester{

  vector< vector<int> > data;

  Tester(){
    data = vector< vector<int> >();
  }

  void add(vector<int> datum){
    data.push_back(datum);
  }

}; 
```

然后，以下工作按预期工作：

```
int main(){
    Tester test = Tester();
    vector<int> datum = vector<int>{1,2,3};
    test.add(datum);
} 
```

但这不是：

```
int main(){
    Tester test = Tester();
    test.add(vector<int>{1,2,3});
} 
```

有人可以向我解释一下区别吗？如何执行我在第二个 main() 中尝试的快捷方式？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-20T15:53:28.920

您的代码似乎没问题，但您使用的编译器不是（这似乎是旧的）。

顺便说一句，你做的太多了。

这应该足够了：

```
vector<int> datum{1,2,3}; //initialization

test.add({1,2,3}); //create vector<int> on the fly and pass it to add() 
```

不要忘记更新你的编译器。

另外，线路`data = vector< vector<int> >();`也太多了。它不是必需的。向量是自动构造的，这意味着您可以将类的构造函数留空，或者根本不拥有它，因为它无论如何都不做任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-25T12:31:33.787

如果要避免数据复制：

```
#include <vector>
#include <iostream>

using namespace std;

struct Tester
{
    vector< vector<int> > data;

    Tester()
    {
        data = vector< vector<int> >();
    }

    void add(vector<int> && datum)
    {
        data.push_back(std::move(datum));
    }

};

int main()
{
    Tester test = Tester();
    test.add(vector<int>{1,2,3});

    for(const auto &v : test.data[0])
        std::cout << v << std::endl;
} 
```

# java - JTree异步节点创建与JGraph库不一致

> ID：13975810
> 
> 赞同：0
> 
> 时间：2012-12-20T15:51:13.280
> 
> 标签：java, swing, jtree, event-dispatch-thread, jgraph

我正在创建一个带有 rootNode 的 Jtree，然后创建另一个异步更新根节点的线程。

如果我在某个 JPanel 中独立运行这个 Jtree，它的效果非常好，它甚至可以在项目的某个地方工作，但是我被要求在一些新的 swing 组件中拥有这个 Jtree。

在新的 Swing 面板中，它不会完全填充，它只会填充在 Jtree 呈现在屏幕上之前插入的节点（开始时几毫秒）。一旦 Jtree 被渲染，它就不会被更新。现在有趣的部分我还在节点上做了一个鼠标监听器，这样我就可以通过右键单击创建节点函数来创建一个新节点，并创建一个新节点并将其添加到 Jtree 根节点上。

要添加的重要一点是我使用 newThread(){void run}).start() 方法创建一个线程以在 Jtree 上添加节点，因为我以前从未觉得需要 SwingUtilities.invokeLater 方法。但是现在如果我使用 SwingUtilities.invokeLater 方法而不是主窗口也没有打开它只是在启动期间停止，我只是检查了 SwingUtilities.invokeLater 也可以与旧组件一起正常工作，当然也可以独立正常工作。

我确实调用了 model.nodeStructureChanged(changedNode); 添加节点后，这就是它之前工作正常的原因。

请提供帮助，代码难以提取并且 Jtree 代码之前工作正常，可能是某些组件阻止了包含小部件以异步刷新自身？

**编辑** 更新以包含一些代码，我正在使用 Nick 提供的 Temp 类：-

```
 public BasicGraphEditor(String appTitle, mxGraphComponent component)
{
    // Stores and updates the frame title
    this.appTitle = appTitle;

    // Stores a reference to the graph and creates the command history
    graphComponent = component;
    final mxGraph graph = graphComponent.getGraph();
    undoManager = createUndoManager();

    // Do not change the scale and translation after files have been loaded
    graph.setResetViewOnRootChange(false);

    // Updates the modified flag if the graph model changes
    graph.getModel().addListener(mxEvent.CHANGE, changeTracker);

    // Adds the command history to the model and view
    graph.getModel().addListener(mxEvent.UNDO, undoHandler);
    graph.getView().addListener(mxEvent.UNDO, undoHandler);

    // Keeps the selection in sync with the command history
    mxIEventListener undoHandler = new mxIEventListener()
    {
        @Override
        public void invoke(Object source, mxEventObject evt)
        {
            List<mxUndoableChange> changes = ((mxUndoableEdit) evt
                    .getProperty("edit")).getChanges();
            graph.setSelectionCells(graph
                    .getSelectionCellsForChanges(changes));
        }
    };

    undoManager.addListener(mxEvent.UNDO, undoHandler);
    undoManager.addListener(mxEvent.REDO, undoHandler);

    // Creates the graph outline component
    graphOutline = new mxGraphOutline(graphComponent);

    // Creates the library pane that contains the tabs with the palettes
    libraryPane = new JTabbedPane();

            /////////////////////////////////////////////////
            // Only change i have done here: start
            ////////////////////////////////////////////////
    Temp tempExplorer = new Temp();

    libraryPane.add("new Explorere", tempExplorer);

            /////////////////////////////////////////////////
            // Only change i have done here: End
            ////////////////////////////////////////////////

    // Creates the inner split pane that contains the library with the
    // palettes and the graph outline on the left side of the window
    JSplitPane inner = new JSplitPane(JSplitPane.VERTICAL_SPLIT,
            libraryPane, graphOutline);
    inner.setDividerLocation(320);
    inner.setResizeWeight(1);
    inner.setDividerSize(6);
    inner.setBorder(null);

    // Creates the outer split pane that contains the inner split pane and
    // the graph component on the right side of the window
    JSplitPane outer = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, inner,
            graphComponent);
    outer.setOneTouchExpandable(true);
    outer.setDividerLocation(200);
    outer.setDividerSize(6);
    outer.setBorder(null);

    // Creates the status bar
    statusBar = createStatusBar();

    // Display some useful information about repaint events
    installRepaintListener();

    // Puts everything together
    setLayout(new BorderLayout());
    add(outer, BorderLayout.CENTER);
    add(statusBar, BorderLayout.SOUTH);
    installToolBar();

    // Installs rubberband selection and handling for some special
    // keystrokes such as F2, Control-C, -V, X, A etc.
    installHandlers();
    installListeners();
    updateTitle();
} 
```

上面的类来自 Jgraph 库，如[https://github.com/jgraph/jgraphx](https://github.com/jgraph/jgraphx) 我只是像上面一样添加 jtree 组件，没有其他更改。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:04:08.973

除非明确说明，否则 Swing 不是线程安全的。在[JTree 的 JavaDocs 中](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTree.html)，它明确表示这不是线程安全的。如果您在 EDT 之外的线程中更新它，则无法保证任何事情都会起作用。因此，如果您想从不同的线程更新 JTree，则需要使用`SwingUtilities.invokeLater(Runnable run);`以将请求放在 EDT 上。

我建议使用数据结构来存储 JTree 的信息，并且只使用 JTree 进行用户交互（而不是数据存储）。

**编辑**

`SwingUtilities.invokeLater()`这是在组件模型中使用更新 JTree的示例。没有你发布任何代码，这是我必须使用的最好的。请尝试使用它来重新创建您的问题（将您的代码片段添加到此示例中，直到您缩小了问题的范围）。

```
import java.awt.*;
import javax.swing.*;
import javax.swing.tree.*;

public class Temp extends JPanel{
    JTree tree = new JTree();

    public Temp(){
        JScrollPane jsp = new JScrollPane(tree);

        // Creates the library pane that contains the tabs with the palettes
        JTabbedPane libraryPane = new JTabbedPane();

        libraryPane.add("new Explorere", jsp);

        // Creates the inner split pane that contains the library with the
        // palettes and the graph outline on the left side of the window
        JSplitPane inner = new JSplitPane(JSplitPane.VERTICAL_SPLIT,
                libraryPane, new JPanel());
        inner.setDividerLocation(320);
        inner.setResizeWeight(1);
        inner.setDividerSize(6);
        inner.setBorder(null);

        // Creates the outer split pane that contains the inner split pane and
        // the graph component on the right side of the window
        JSplitPane outer = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, inner,
                new JPanel());
        outer.setOneTouchExpandable(true);
        outer.setDividerLocation(200);
        outer.setDividerSize(6);
        outer.setBorder(null);

        // Puts everything together
        setLayout(new BorderLayout());
        add(outer, BorderLayout.CENTER);
    }

    public static void main(String[] args) {
        final Temp temp = new Temp();
        SwingUtilities.invokeLater(new Runnable(){

            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setContentPane(temp);
                frame.pack();
                frame.setVisible(true);
            }});

        Thread updater = new Thread(temp.new CustomThread());
        updater.start();
    }

    public class CustomThread implements Runnable{

        @Override
        public void run() {
            for(int i = 0; i < 1000; i++){
                updateTree("New Item "+ i);
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }

        public void updateTree(final String nodeToAdd){
            SwingUtilities.invokeLater(new Runnable(){

                @Override
                public void run() {
                    DefaultTreeModel model = (DefaultTreeModel) tree.getModel();
                    DefaultMutableTreeNode root = (DefaultMutableTreeNode) tree.getModel().getRoot();
                    DefaultMutableTreeNode child = new DefaultMutableTreeNode(nodeToAdd);
                    model.insertNodeInto(child, root,root.getChildCount());
                    tree.scrollPathToVisible(new TreePath(child.getPath()));
                }});

        }

    }
} 
```

# java - Primefaces数据表排序列表

> ID：13975814
> 
> 赞同：0
> 
> 时间：2012-12-20T15:51:29.763
> 
> 标签：java, primefaces

我开始在我的项目中使用 primefaces，我马上就遇到了问题。我列出了一些我使用实体管理器从数据库中获取的东西，并将其呈现在 primefaces 数据表的视图中。在我的支持 bean 中，我有： List getList() 在其中我使用实体管理器从数据库中检索记录并立即返回..

和我的服务：

```
public List<MyEntity> getDataList(){
  return entityManager.createNamedQuery("MyEntity.getAll").getResultList();
} 
```

我的豆子：

```
public List<MyEntity> getList(){
  return myService.getDataList();
} 
```

风景：

```
<p:dataTable var="myEntityInstance" value="#{myBean.list}"... 
```

这种方式primefaces排序不起作用，我在堆栈上的某个地方读到该列表需要成为我的支持bean的成员，我认为这很奇怪..这迫使我保持​​我的bean sessionScoped，因为我占用了这个不是很好的方法服务器的内存加载我的对象并在整个会话期间保持它们处于活动状态，除此之外，保持列表更新的开销要大得多，因为每当我向视图发出请求时，我都必须手动进行。当在 @PostConstruct 注释方法中对该页面的第一个请求发出时，我的列表被获取。之后我需要保持它是最新的。
我需要知道是否有任何其他方法可以直接从数据库中获取列表并将其提供给 primefaces 而不是将其保存在 bean 中？到目前为止，我对 primefaces 提供的功能并不满意。设计非常好，但功能中有很多错误。我对其中的其他组件也有类似的问题，我发现了一些肮脏的修复，但这让我感到复杂而不是简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:01:57.500

抛开编辑，

这里的问题是您的列表在每次排序时都会从实体中刷新。由于每次在排序后刷新 UI 时设置框架的方式，您将拉出一个新列表。

基本上你看到了->（这不准确，它是它正在做的事情的草图）

```
 UI -> sort(myBean.getList());
  UI -> redraw(myBean.getList()); 
```

看这意味着您有两个不同的引用，您对引用 #1 进行排序，然后丢弃它并获取新的渲染引用。因此，您的排序不起作用。

解决方案是使用排序后可以引用的成员。这不是一个大问题，因为您可以使用 View Scope 而不是 Session 或 Request 范围。内存方面，你的想法是对的，但你可能过度优化，因为你正在失去功能。

简而言之，修复是->

```
@ViewScoped
public class MyBean
{
  private List<T> myList;
  public List<T> getMyList()
  {
    if(myList != null)
      return myList;
    myList = Service.getMyList();
    return myList;
  }
} 
```

因为您现在可以对列表进行排序并维护引用，所以该组件将起作用。如果您确实遇到了内存问题，那么您可以开始沿着优化路径走下去，即在服务端执行排序，创建一个基于调用排序的新列表，然后在请求范围内返回。Primefaces 允许您这样做，但请先尝试简单的方法。

//-----------回应吹毛求疵（因为我今天有时间，很有趣……）--------/

我不是想对你怀有敌意。如果您处于那种规模，为什么不实现一个自定义组件来根据您的内存负载来处理它？显然，实体和数据库本身之间存在抽象，因此请实现自定义排序，以便您的`getData()`方法能够返回正确的排序集，而不是维护的引用。显然 Primefaces（和大多数 JSF 实现）维护引用（有状态），因此您需要一个低内存解决方案。

它可能看起来像 ->

```
@RequestScoped
public class LessMemoryBean
{
  public List<T> getList()
  {
    StatefulBean state = getStatefulBean();
    //Some switch/case or other method of determining state
    return service.getSortedList(state.getState()); //I like hashmaps, but anything could work.
  }
}

@ViewScoped
public class StatefulBean
{
  private HashMap<String, Boolean> state;
  public void sortField(String key, boolean sortBy)
  {
    state.put(key, sortBy); //Construct the proper query via the keys provided
  }
}

//XHTML
<p:dataTable value="#{lessMemoryBean.data}">
  <!-- Whatever you need -->
  <p:column>
    <f:facet name="header">
      <p:commandButton 
        //Do whatever control method you want for sorting and setting booleans
      />
    </f:facet>
  </p:column>
.... 
```

因为您使用的是对 RequestScoped bean 的引用，并且该 bean 引用了 ViewScoped，所以您的列表存储在请求中（尽快处理），但表的状态是分开的。显然，这不是开箱即用的，Primefaces 支持一些听众，但您需要更深入地挖掘 (RTFM) 以查看您的选择。此外，它是开源的，因此您可以简单地扩展表以使用侦听器作为选项，而不是简单的链接到`Collection`.

你说的是优化，在我看来，这意味着你需要做很多额外的工作。有它***（我个人会使用标准数据表或在这种情况下实现我自己的复合组件。最多 1-2 天不会有那么多工作）。***

# javascript - 使用 d3 访问单个区域元素

> ID：13975821
> 
> 赞同：5
> 
> 时间：2012-12-20T15:51:49.667
> 
> 标签：javascript, d3.js

我正在尝试修改 focus+ 上下文示例以与我的学生一起研究黑体光谱。

[http://bl.ocks.org/1667367](http://bl.ocks.org/1667367)

问题是，对我来说，对分段进行着色的唯一方法是绘制条形彩色图表。

我想用区域生成器来做，像这样我可以在放大时享受插值的所有好处。

我无法访问每个区域元素以将其填充为我想要的 rgb 颜色。

**有没有办法访问各个区域元素并用函数填充它？**

这是我的带有橙色填充区域（焦点）的文件，我想像使用条形图（上下文）一样对其进行着色。

[http://bl.ocks.org/4345931](http://bl.ocks.org/4345931)

提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T18:44:21.637

我认为这里正确的方法是使用一个`linearGradient`元素（[specs](http://www.w3.org/TR/SVG/pservers.html)）。你可以在这里看到我的实现：http: [//jsfiddle.net/nrabinowitz/JZACC/](http://jsfiddle.net/nrabinowitz/JZACC/)

这里的要点是，不是将每种颜色绘制为单独的元素，而是定义光谱颜色的渐变并将相同的渐变应用于区域和上下文栏：

```
// set up gradient elements
var gradient = defs.append('linearGradient')
    .attr('id', 'spectrumGradient');

// set up gradient scale
var gx = d3.scale.linear().range([0, 1]); 
```

然后，在加载数据时，`stop`为每种颜色创建元素：

```
// update gradient scale
gx.domain(x.domain());
// create gradient
gradient.selectAll('stop')
    // remove duplicates
    .data(data)
  .enter().append('stop')
    .attr('offset', function(d) { return gx(d.wl); })
    .attr('stop-color', toRGB); 
```

并使用`url(#id)`符号应用它：

```
focus.append("path")
  .datum(data)
  .attr("clip-path", "url(#clip)")
  .attr("d", area)
  .attr('fill', 'url(#spectrumGradient)'); 
```

# java - 发出 Ajax 请求时如何更改地址栏？

> ID：13975827
> 
> 赞同：2
> 
> 时间：2012-12-20T15:51:59.397
> 
> 标签：java, jquery, ajax, url-rewriting, struts2

我创建了一个大量使用 Ajax 加载其内容的网站。我希望我选择的页面在 AJAX 上加载，但同时 URL 也会更改，而无需重新加载整个页面内容。我将如何实现这一目标？我已经用谷歌搜索了，但我的搜索没有产生任何结果。

假设我有这个页面：

```
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Insert title here</title>
    <sj:head />
</head>
<body>
    <h5>Struts Jquery Ajax Integration </h5>

    <div id="resultContent"></div>
    <noscript>Please Turn On Javascript to make the full use of this site</noscript>

    <h4>Choose A task</h4>
    <ul>
        <s:url value="views/ajaxvalidation.jsp" var="ajaxvalidation" />
        <li><sj:a targets="resultContent" href="%{ajaxvalidation}">Ajax Validation </sj:a></li>
    </ul>

    <div>
        <h6>Play A Music while You Navigate</h6>
        <audio src="x.mp3" controls>Your browser does not support the
            audio element.
        </audio>
    </div>
</body>
</html> 
```

我单击了 Ajax 验证链接。它不会重新加载页面，但是 url 会是这样的：

```
localhost:8090/AppName/ajaxvalidation.jsp 
```

或这个：

```
 localhost:8090/AppName/ajaxvalidation.action 
```

我将如何实现这样的目标？

*请注意，我使用的是这个插件：[struts2-jquery](http://code.google.com/p/struts2-jquery/)*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T18:25:43.617

您需要使用[History API](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#Adding_and_modifying_history_entries)

```
window.history.pushState(data, title, url) 
```

* * *

**更新**

请注意，`struts2-jquery`您可以添加`ajaxhistory="true"`以启用构建 ajax 历史记录功能。请参阅[http://code.google.com/p/struts2-jquery/wiki/HeadTag#Attributes](http://code.google.com/p/struts2-jquery/wiki/HeadTag#Attributes)

```
<sj:head ajaxhistory="true" /> 
```

*但请记住，并非所有浏览器版本都支持它。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:26:58.870

`history.pushState`如果浏览器支持（[阅读 < IE10](http://caniuse.com/#search=history)） ，您可以使用

```
var boolPushState  = false;
if (typeof history.pushState !== "undefined") {
        boolPushState = true;
}

if (boolPushState) {
    history.pushState(null, null, "URL");
} 
```

# php - SQL 语法中的 PHP 错误

> ID：13975837
> 
> 赞同：0
> 
> 时间：2012-12-20T15:52:25.100
> 
> 标签：php, sql

它向我展示了：

```
Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE company='ABC' AND branch='26' AND owner IS NULL' at line 1

$sql="SELECT * FROM spr ORDER BY id WHERE company='$_SESSION[company]' AND branch='$_SESSION[branch]' AND owner IS NULL"; 
```

我看不出我的查询出了什么问题。请大侠帮忙...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T15:53:25.770

`order by`子句必须在子句之后`where`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:53:58.057

试试这个，它`ORDER BY`应该是语句末尾的子句

```
$sql="SELECT * FROM spr 
      WHERE company='".$_SESSION[company]."' 
      AND branch='".$_SESSION[branch]."' 
      AND owner IS NULL ORDER BY id"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:54:03.593

```
$sql="SELECT * FROM spr WHERE company='$_SESSION[company]' AND branch='$_SESSION[branch]' AND owner IS NULL ORDER BY id"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T15:55:22.650

`{}`在 PHP 中使用双引号时，需要用大括号括住数组值和对象属性。

```
$sql="SELECT * FROM spr 
      WHERE company='{$_SESSION[company]}' 
        AND branch='{$_SESSION[branch]}' AND owner IS NULL
      ORDER BY id "; 
```

你的`ORDER BY`条款需要放在最后。

# oracle - 用于 Datalob/Data/Index 的 Oracle remap_Tablespace

> ID：13975841
> 
> 赞同：0
> 
> 时间：2012-12-20T15:52:35.710
> 
> 标签：oracle, remap, impdp

我面临一个关于在 Oracle 上导入数据的新问题。

我有一个大约 40GB 的转储文件，我正在尝试将它导入到我的 Oracle 数据库 10g 版本 10.2.0.4.0。

在我们的系统上，我们有 3 个表空间（Datalob/Data 和索引），我们的一位客户只使用一个表空间 (MIG)。

如果我尝试导入数据（来自客户），我会收到错误 ORA-01652 无法将段扩展...因为我没有足够的空间。太糟糕了，我不能让表空间更大/或者是不允许的。

有没有办法将 Datalob（所有 lob 字段）的表空间导入表空间 DATALOB，将所有索引导入 INDEX，将普通数据导入 DATA？

像`Remap_Tablespace=MIG(LOB):DATALOB remap_tablespcae=MIG(IDX):INDEX`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:39:38.810

我会使用顺序方法 - 不是很优雅，但它应该可以工作：

*   仅导入元数据（到您的“表”表空间中）
*   将 LOB 段移动到 LOB 表空间
*   将索引移动到索引表空间
*   导入内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T16:28:49.557

使用您想要的表空间预先创建表并使用 TABLE_EXISTS_ACTION=APPEND。

# python - 如何确认文件对象为空？[Python]

> ID：13975845
> 
> 赞同：2
> 
> 时间：2012-12-20T15:53:07.067
> 
> 标签：python, file, is-empty

在一个 py 模块中，我写：

```
outFile = open(fileName, mode='w')
if A:
    outFile.write(...)
if B:
    outFile.write(...) 
```

在这些行中，我没有使用刷新或关闭方法。然后在这些行之后，我想检查这个“outFile”对象是否为空。我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:56:37.470

您的代码存在一些问题。

1.  您无法`.write`访问使用`'r'`. 你需要`open(fileName, 'w')`。

2.  如果`A or B`那么你肯定已经写入文件，所以它不是空的！

除非这些。你可以得到一个文件的长度

```
os.stat(outFile.fileno()) 
```

* * *

编辑：我会解释什么`flush`。Python 通常用于执行大量文件读取和写入，这可能很慢。因此，它被调整以使它们尽可能快。这样做的一种方法是“缓冲”此类写入，然后将它们全部放在一个大块中：当您编写一个小字符串时，Python 会记住它，但不会真正将其写入文件，直到它认为应该这样做。

这意味着如果你想*通过检查文件来判断你是否已经将数据写入文件*，你必须告诉 Python 首先写入它记住的所有数据，否则你可能看不到它。`flush`是写入所有缓冲数据的命令。

当然，如果你问 Python 是否向文件中写入了任何内容，比如通过检查文件中的位置 ( `.tell()`)，它就会知道缓冲。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:55:53.197

您可以使用[os.stat](http://docs.python.org/2/library/os.html#os.stat)获取文件信息：

```
import os
fileSize = os.stat(fileName).st_size 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T15:57:58.717

如果您已经写入文件，则可以使用`.tell()`检查当前文件位置是否为非零：

```
>>> handle = open('/tmp/file.txt', 'w')
>>> handle.write('foo')
>>> handle.tell()
3 
```

`.seek()`如果您回到文件的开头，这将不起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T15:58:49.777

```
with open("filename.txt", "r+") as f:
    if f.read(): 
        # file isn't empty
        f.write("something")
        # uncomment this line if you want to delete everything else in the file
        # f.truncate()
    else:
        # file is empty
        f.write("somethingelse") 
```

“r+”模式始终让您阅读和写作。"with" 会自动关闭文件

# mongodb - MongoDB 分片键

> ID：13975854
> 
> 赞同：3
> 
> 时间：2012-12-20T15:53:32.893
> 
> 标签：mongodb, sharding

我一直在考虑为我的数据选择最佳分片键（通过复合索引），并考虑将文档创建日期与客户编号相结合。（或发票号）将是一个很好的组合。如果 MongoDB 会将客户编号视为向后的字符串，即：

```
90043 => 34009
90044 => 44009
90045 => 54009
etc. 
```

创建日期上的索引将确保将相对较新的数据保存在内存中，而落后的客户将帮助 MongoDB 在整个集群中分配数据/负载。

这是一个正确的假设吗？如果是这样......我是否需要保存我的客户没有反转它以我期望的方式分发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:58:41.083

关于您的具体问题：“我是否需要保存我的客户，以使其按我期望的方式分发？”，不-您不会。

即使您列出的客户编号值的分布相对较窄，如果您`customerNumber`在复合键中使用，MongoDB 也会将数据分解成块并相应地分配它们。只要与之相关的数据`customerNumber`分布相对均匀（例如，一个用户不控制系统），您就会获得所需的分片平衡。

我会考虑您的原始选择（减去字符串反转）或 Dan 的选择（使用内置 ObjectId 而不是时间戳）作为复合键的良好候选者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:41:59.653

我认为你认为的问题是，不知何故，你觉得节点 1 会比节点 2 快。除非硬件有很大不同，否则节点 1 和节点 2 的访问速度将同样快，因此反转字符串不会帮助你.

我看到的主要问题与您系统中的客户数量有关。这可能导致单调分片，其中最后一个分片总是被击中，这可能导致过度分裂和迁移。如果您有大量客户，则没有问题，否则您可能希望在客户 ID 和日期字段之上添加另一个键，以更均匀地划分您的内容。我听说有人使用随机标识符、散列 _id 或使用 GUID 来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T16:18:26.957

从我在文档中读到的内容来看，MongoId 已经是基于时间的。因此，您可以像这样将 _id 添加到复合键中：(_id, customerid)。如果您不需要应用程序中的日期，您只需删除该字段即可节省一些存储空间。

MongoDB 将最近使用的数据集存储在内存中。集合的索引将始终尝试存储到 RAM 中。

> 当索引太大而无法放入 RAM 时，MongoDB 必须从磁盘读取索引，这比从 RAM 读取要慢得多。请记住，当您的服务器具有可用于索引的 RAM 以及工作集的其余部分时，索引适合 RAM。

希望这可以帮助。

干杯丹

# c# - 我可以创建一个 SqlDataReader 并为其提供值而不必从另一个对象返回 SqlDataReader，例如 SqlCommand.ExecuteReader()

> ID：13975861
> 
> 赞同：5
> 
> 时间：2012-12-20T15:53:51.817
> 
> 标签：c#, .net, unit-testing, mocking, moq

我正在为我的数据访问层编写单元测试。为了实现这一点，我为 SqlCommand (ISqlCommand) 创建了一个包装器，以便我可以模拟它的功能。

```
ISqlCommand command = _connection.GetSqlCommand(sqlCommand); 
```

在我正在测试的一种方法中，正在调用 SqlCommand 的 ExecuteReader 方法，我必须返回一个 SqlDataReader。

```
SqlDataReader reader = command.ExecuteReader(CommandBehavior.SingleRow); 
```

在同样的方法中 reader.Read 将被调用

```
if (reader.Read())
{
    someVariable = reader.GetString(1);
} 
```

我想要的是能够从模拟的 command.ExecuteReader() 中返回一个 SqlDataReader 对象，并提供一个值供我阅读。可以做到吗？似乎 SqlDataReader 只能从正在运行并返回 SqlDataReader 的实际 SqlCommand.ExecuteReader 实例化。要测试的完整相关代码。

```
ISqlCommand command = _connection.GetSqlCommand(sqlCommand);

using (command)
{
    SqlDataReader reader =  command.ExecuteReader(CommandBehavior.SingleRow);

    if (reader.Read())
    {
        dbVersion = reader.GetString(1);
    }
} 
```

编辑：要清楚我在问什么。SqlDatareader 没有公共构造函数。据我所知，我无法使用该类编写任何测试，因为如果不使用 SqlCommand 对数据库进行合法调用，我就无法实例化它。即使尝试创建 SqlDataReaderWrapper 的接口也无济于事，因为问题是一样的。我不是在尝试编写集成测试（对数据库进行实际调用），因此 DataReader 似乎无法按原样进行测试。我的问题是，在这种情况下，我能做些什么来将值放入 SqlDataReader 中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T17:19:30.507

我假设您没有使用模拟框架。这样做会有所帮助，但您可能应该按照上面的建议模拟 IDataReader。这是使用 RhinoMocks 的先前问题。这可能会有所帮助。

[模拟 DataReader 并获得 Rhino.Mocks.Exceptions.ExpectationViolationException: IDisposable.Dispose(); 预期 #0，实际 #1](https://stackoverflow.com/questions/1792984/mocking-a-datareader-and-getting-a-rhino-mocks-exceptions-expectationviolationex)

另外，我注意到您创建了一个 ISqlCommand，我建议您使用 IDbCommand，因为它是开箱即用的界面，并且会使您的测试不那么脆弱，因为它允许在需要时替换其他命令对象。

我刚刚嘲笑了数据阅读器，它运行良好：

```
 Mock<IDataReader> mockDataReader = new Mock<IDataReader>();
 bool success = true;
 mockDataReader.Setup(x => x.Read())
               .Returns(() => success).Callback(() => success = false);
 Assert.IsTrue(mockDataReader.Object.Read()); 
```

这是一个很好的例子： http: [//www.codeproject.com/Articles/478504/Moq-Mock-Database](http://www.codeproject.com/Articles/478504/Moq-Mock-Database)

# iphone - 如何让详细视图控制器显示与 TableView 上选择的“单元格”相关的文本？

> ID：13975867
> 
> 赞同：0
> 
> 时间：2012-12-20T15:54:03.180
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我的故事板包含一个导航控制器、一个表视图控制器和一个详细视图控制器。如何让详细视图控制器显示与 TableView 上选择的“单元格”相关的文本？

我目前已经设置了我的代码，因此如果选择了一个单元格，它将显示一个图像。就像选择了“单元格 1”一样，如果选择了“单元格 2”，它将显示“图像 1”，那么它将显示“图像 2”等。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

//Create a couple UIImage objects
UIImage *firstImage = [UIImage imageNamed:@"first.png"];
UIImage *secondImage = [UIImage imageNamed:@"second.png"];
UIImage *thirdImage = [UIImage imageNamed:@"third.png"];

//Title of the view
self.title = charName;

//UIImageview based on characterNumber
switch (characterNumber) {
    case 0:
        CharacterImage.image = firstImage;
        break;

    case 1:
        CharacterImage.image = secondImage;
        break;

    case 2:
        CharacterImage.image = thirdImage;
        break;

    default:
        break;
} 
```

}

除了文本而不是图像，我该怎么做？因此，当从 Table View Controller 中选择“单元格 1”时，它将导致 DetailViewController 的可滚动文本与选择其他单元格时显示的文本不同。我会使用“UITextView”并上传不同的 .txt 文件吗？谢谢

因此，当从 Table View Controller 中选择“Cell 1”时，它将导致带有可滚动文本的 DetailViewController。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:26:11.580

在您的故事板中添加一个 UIViewcontroller 并使用命令+拖动将其连接到您的表格视图控制器，单击箭头并输入 segue 名称并选择推送。

在你的 tableview controller.m

```
//#pragma mark - Table Did Select 
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"segueNameGoesHere" sender:self];

}
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    if([[segue identifier] isEqualToString:@"segueNameGoesHere"])
    {
       DetailViewController *detailViewController  = [segue destinationViewController];
        //This will display on the Document Viewer
        detailViewController.fileText=@"What Ever your Text is"; // you can also select that text source from an nsmutablearray , a file or cloud solution but in that case you need to write a method that returns a string to you 
    }
} 
```

在你的细节视图控制器.h

```
@interface DetailviewViewController: UIViewController {
    UITextView *exampleTxt;
}
@property (nonatomic, strong)NSString *fileText; 
```

在您的详细视图 controller.m

```
@synthesize fileText=_fileText

// you can create your textview in IB or programatically like below after that all you need to this set your text  
- (void)viewDidLoad 
{
    [super viewDidLoad ];
    exampleTxt = [[UITextView alloc] initWithFrame:CGRectMake(100, 100, 100, 100)];
    [exampleTxt setText:_fileText]; // look at here
    //[exampleTxt setColor:[UIColor redColor]]; //yes, it's deprecated, but works
    [self.view addSubview: exampleTxt];

} 
```

如果您不喜欢以编程方式添加 ui 文本视图，您可以在 IB 中添加它。因此，要在 IB 中添加 TextView，请按照以下步骤操作；

转到情节提要上的详细视图控制器，将 TextView 拖放到您的 detailViewController 中；

详细视图控制器.h

```
@interface DetailviewViewController:  : UIViewController
{
    UITextView *textView;
}

@property(nonatomic,strong)IBOutlet UITextView *textView; 
@property (nonatomic, strong)NSString *fileText; 
```

在你的 detilviewcontroller.m

```
@synthesize textView=_textView;
@synthesize fileText=_fileText;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    //[_textView setText:@"Your text"]; 
    [_textView setText:_fileText];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:16:10.317

您需要在 ViewControllers 之间创建一个 Segue（ctrl+从一个拖到另一个）。然后添加一个标识符：

![](../Images/cf18b932d3325826c92741f9e357a5bc.png)

然后你需要从你的 didSelectRowAtIndexPath 方法中调用它，并将 indexPath 作为数字发送：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"DetailSegue" sender:[NSNumber numberWithInt:indexPath.row]];
} 
```

然后你可以得到这个数字并将它添加到你的新 viewController

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(NSNumber*)indexNumber
{
    if([[segue identifier] isEqualToString:@"DetailSegue"]){

        NSInteger index = [indexNumber integerValue];

        DetailViewController *detailView = [segue destinationViewController];
        detailView.textNumber = index;

    }
} 
```

当然，您需要在 DetailViewController 中添加一个 NSInteger textNumber。然后只需检查选择了什么 NSInteger 并显示不同的文本。

# c - 在试图杀死父进程时，子进程仍在运行

> ID：13975871
> 
> 赞同：1
> 
> 时间：2012-12-20T15:54:12.750
> 
> 标签：c, linux, operating-system, fork, shared-memory

给定以下代码：

分叉：

```
if(strcmp(str,"mkDir")==0)
            {
                str = strtok(NULL," ");
                switch(pid_child = fork())
                {
                        case -1: 
                        {
                            printf("Problem with producing a new process!\n");
                            exit(1);
                            break;
                        }
                        case 0: 
                        {
                            wait(1);
                            strcat(curRoot,str);
                            strcat(curRoot,"\\");
                            if(num_dir>0)
                            {
                                free(arr);
                                num_dir=0;
                            }
                            if(numFile>0)
                            {
                                free(files);
                                numFile=0;
                            }
                            break;
                        }
                        default:
                        {
                            pid = getpid();
                            *cur_pid = pid;
                            arr = add_dir(arr,str,pid_child,&num_dir);
                            break;
                        }
                }
            }//if MKDIR 
```

试图杀死进程：

```
struct Directory* rmDir(struct Directory* dirs,char* name,int *size)
{
    int i,m=0,j;
    struct Directory* temp=NULL;
    j = find_dir(dirs,name,*size);
    if(j==-1)
    {
        printf("The directory does not exist\n");
        return dirs;
    }
    else
    {
        temp = (struct Directory*)malloc(sizeof(struct Directory)*((*size)-1));
        for (i=0; i<*size;i++)
        {
            if(i!=j)
            {
                temp[m]=dirs[i];
                m++;
            }
        }//for
        kill(dirs[j].dir_pid,SIGKILL);
        (*size)--;
        free(dirs);
        printf("Directory - %s was removed successfully!\n",name);
        return temp;
    }
}//rmDir 
```

当我试图杀死“父亲”进程时，子进程继续运行？

这是为什么 ？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:27:52.140

问题是你只杀死了一个进程。SIGKILL 仅发送到您指定的一个进程。您可以使用进程组一次将其发送给多个人，但要么全有，要么全无，这在这里无济于事。

所以，首先，不要使用 SIGKILL，使用 SIGTERM。

然后，在子进程中安装一个 SIGTERM 处理程序。处理程序应该依次向它自己的孩子发出信号，然后退出。

你需要阅读`signal`或`sigaction`。有手册页和许多网络资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:49:10.823

如果子进程的父进程被杀死，子进程会继续运行，直到正常退出或中止。由于子进程的父进程不存在，因此将子进程转换为子进程，`zombie`并保留其返回值和核心数据结构以供父进程收集。

在 Linux 上，该`init`进程*重新*成为僵尸进程的父进程，并且`free`是关联的内存。

# android - Android <11 上的 ObjectAnimator

> ID：13975874
> 
> 赞同：1
> 
> 时间：2012-12-20T15:54:26.887
> 
> 标签：android, android-animation

我正在尝试在 android 2.1+ 上使用 objectAnimator。同步官方 ObjectAnimator 是从 android 3.0 引入的，我必须使用库[NineOldAndroids](http://nineoldandroids.com/)。但翻译动画只适用于 android 3.0 +。在 android <3.0 上，视图的位置在动画后不会改变。请帮我解决这个问题。我想要做的是水平滑动视图。

更新：添加了源代码。我已经在 android >3.0 上测试了这个源，它工作正常。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    LayoutParams layoutParams = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
    layoutMain = new RelativeLayout(getApplicationContext());
    layoutMain.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    layoutLeftMenu = new LinearLayout(getApplicationContext());
    layoutLeftMenu.setLayoutParams(layoutParams);
    layoutLeftMenu.setId(101);
    layoutMain.addView(layoutLeftMenu);

    layoutContent = new RelativeLayout(getApplicationContext());
    layoutContent.setLayoutParams(layoutParams);
    layoutMain.addView(layoutContent);

//Add the button and click event handler here
//...
}

 //called to slide the content view
    private void showMenu(final boolean slideToLeft) {
                    float slidePercent = 0.8f;
            System.out.println("screen width1: " + layoutContent.getWidth() );
            ObjectAnimator animator;
            if (!slideToLeft) {
                animator = ObjectAnimator.ofFloat(layoutContent, "translationX", slidePercent * layoutContent.getWidth());
            }
            else {
                animator = ObjectAnimator.ofFloat(layoutContent, "translationX", 0);
            }
            animator.setDuration(300);
            animator.start();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:58:13.643

您的问题可能是动画没有保留。你可以在动画之后使用这样的东西来让它保持在新的位置：

```
AnimatorProxy.wrap(view).setTranslationX(offset); 
```

# sharepoint-2010 - Sharepoint 2010 ldap 异常 FaultException`1

> ID：13975875
> 
> 赞同：0
> 
> 时间：2012-12-20T15:54:42.190
> 
> 标签：sharepoint-2010, ldap

我已按照以下链接上的说明进行操作： [在 SharePoint 2010 中配置基于表单的身份验证](http://blogs.technet.com/b/speschka/archive/2009/11/05/configuring-forms-based-authentication-in-sharepoint-2010.aspx)

当用户登录时：如果用户名和密码错误，则会出现一条消息通知用户重试

但是当用户名和密码正确时会抛出异常：

```
 [FaultException`1: Unexpected exception occurred, please contact administrator to resolve this issue.]
   Microsoft.IdentityModel.Protocols.WSTrust.WSTrustChannel.ReadResponse(Message response) +1161205
   Microsoft.IdentityModel.Protocols.WSTrust.WSTrustChannel.Issue(RequestSecurityToken rst, RequestSecurityTokenResponse& rstr) +73
   Microsoft.IdentityModel.Protocols.WSTrust.WSTrustChannel.Issue(RequestSecurityToken rst) +36
   Microsoft.SharePoint.SPSecurityContext.SecurityTokenForContext(Uri context, Boolean bearerToken, SecurityToken onBehalfOf, SecurityToken actAs, SecurityToken delegateTo) +26618417
   Microsoft.SharePoint.SPSecurityContext.SecurityTokenForFormsAuthentication(Uri context, String membershipProviderName, String roleProviderName, String username, String password, Boolean isPersistent) +26623308
   Microsoft.SharePoint.IdentityModel.Pages.FormsSignInPage.GetSecurityToken(Login formsSignInControl) +210
   Microsoft.SharePoint.IdentityModel.Pages.FormsSignInPage.AuthenticateEventHandler(Object sender, AuthenticateEventArgs formAuthenticateEvent) +123
   System.Web.UI.WebControls.Login.AttemptLogin() +152
   System.Web.UI.WebControls.Login.OnBubbleEvent(Object source, EventArgs e) +124
   System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args) +70
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +29
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2981 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:31:00.267

终于找到了解决办法，是因为web.config中的role provider出错，CN值不对

# sql-server-2008 - 性能问题 默认选择：动态选择查询 Lambda 表达式 - Entityframework

> ID：13975878
> 
> 赞同：1
> 
> 时间：2012-12-20T15:54:55.407
> 
> 标签：sql-server-2008, c#-4.0, lambda, entity-framework-5

我有如下的 lambda 表达式

```
Projects.Where(Project => (Project.PostalCode == "5000")) 
```

它生成类似的sql查询

```
SELECT [Id] AS [Id], [Title] AS [Title], .........
[AddressLine1] AS [AddressLine1]
from Project  where PostalCode == "5000" 
```

在这里，我想在 Lambda 表达式中生成选择查询。实体可能有超过 100 个字段。我不想要所有这些字段，因为它会影响性能。

我需要 5 到 8 列可以动态选择。我手动生成的以下作品

```
Projects.Where(Project => (Project.PostalCode == "5000")).Select(p=>new{id=p.Id, titile=p.Title, desc=p.OwnDescription, pc=p.PostalCode}) 
```

我浏览了一些帖子并没有得到足够的信息。有人知道如何动态构建选择查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:38:49.610

我在这里得到了解决方案。带有源代码的有趣文章。 [http://carlisknight.blogspot.in/2010/02/now-change-linq-statement-to-dynamic.html](http://carlisknight.blogspot.in/2010/02/now-change-linq-statement-to-dynamic.html)

# asp.net - Telerik Rad 在回发后控制凌乱的样式表？

> ID：13975880
> 
> 赞同：0
> 
> 时间：2012-12-20T15:54:56.340
> 
> 标签：asp.net, telerik, rad-controls

Telerik Rad Controls css 样式在页面上多次回发后或在页面中的多个用户控件使用 Telerik 控件的另一种情况下变得混乱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:54:56.340

虽然解决方案是一行代码，但我已经经历过这个，但我很难找到它，所以我认为最好与你们分享，

在您使用 Telerik Rad Controls 的每个页面或用户控件中，将以下行放入 Page_Load 事件中

```
protected void Page_Load(Object sender,EvenArgs e)
{
RadControlName.EnableAjaxSkinRendering=true;

//for example if u have a Rad Combo box put
//RadCombo1.EnableAjaxSkinRendering=true;

} 
```

我希望这会有所帮助

# css - 是否可以制作不是典型直角三角形的 CSS 三角形/箭头，并应用渐变？

> ID：13975883
> 
> 赞同：8
> 
> 时间：2012-12-20T15:55:06.390
> 
> 标签：css, css-transforms

我知道要在 CSS 中创建一个基本箭头，我可以这样做：

```
<div class="arrow-button">
    <span class="arrow-tip-container">
         <span class="arrow-tip"></span>
    </span>
</div> 
```

然后我要做的就是旋转并定位容器，然后填充箭头和**BAM！**那里；一个甜蜜的箭头：http: [//jsfiddle.net/uF69S/](http://jsfiddle.net/uF69S/)

但是，我想要一个箭头，其尖端实际上是 120° 角，那么是否可以使用 CSS 变换或两个不同的容器来实现这种效果？也许倾斜和旋转？

我想创建这个箭头：

```
------------\
|            \
|            /
------------/ 
```

请注意，箭头**不是**90°。

**注意：** 我知道边界三角形可以用来制作任何角度的三角形，但是它们**不**支持 Firefox、Opera 或 IE 中的渐变，而 Firefox、Opera 和 IE 可以支持变换（以一种或另一种方式）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T13:33:55.210

您可以使用 skew 制作 120 度的三角形，如下所示：

```
.arrow-tip {
    display:block;
    width:50px;
    height:50px;
    margin:0 0 0 -20px;
    -webkit-transform:rotate(45deg) skew(20deg,20deg);
 } 
```

另外：http: [//jsfiddle.net/95Xq8/](http://jsfiddle.net/95Xq8/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T16:03:10.927

这可能是一个开始：

HTML：

```
<div>▲&lt;/div>​ 
```

CSS：

```
div {
  font-size: 46px;
  -webkit-transform: scaleY(.3);
}​ 
```

在[JSFiddle上查看](http://jsfiddle.net/3wyty/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T16:10:39.277

你反对使用 HTML5 Canvas 吗？它支持 IE9+（每个[caniuse](http://caniuse.com/#feat=canvas)）。

这会让你开始： [http ://www.dbp-consulting.com/tutorials/canvas/CanvasArrow.html](http://www.dbp-consulting.com/tutorials/canvas/CanvasArrow.html)

# gnuplot - gnuplot：轴标签错误

> ID：13975885
> 
> 赞同：0
> 
> 时间：2012-12-20T15:55:21.120
> 
> 标签：gnuplot

我正在尝试使用 gnuplot 和 eps 乳胶终端。

我创建了这个图像： ![在此处输入图像描述](../Images/a69b7751813b568837b870c36341c89a.png) 如您所见，x 标签都是叠加的。我如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:57:42.010

尝试旋转 xtics。像

```
set xtics nomirror rotate by -45 font ",8" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T16:59:09.503

有几种方法。您可以像 maverik 提到的那样旋转 xtics，或者您可以通过以下方式调整间距

```
set xtics 4e11 
```

例如，这将每 4e11 个单位产生一次抽动。

Gnuplot 不一定会对会有多少抽动做出明智的选择，这样它们就不会重叠。如果您有长格式的抽动（例如，科学记数法或时间数据），您通常必须手动调整间距。

# java - 检查 Maven 中的生命周期/阶段和文件是否存在并报告错误

> ID：13975887
> 
> 赞同：9
> 
> 时间：2012-12-20T15:55:24.050
> 
> 标签：java, maven, ant, build, build-process

**如果调用集成测试**生命周期，如果开发人员在应用程序测试期间提供来自属性文件的身份验证数据，我想检查 Maven 。

作为国家惯例，将身份验证数据提交到源树是不好的。用户名和密码等设置中描述的标准 maven 方法[不应与 pom.xml 一起分发](http://maven.apache.org/settings.html#Servers)。

但我不喜欢这种方法（我想要每个结帐设置，而不是每个开发主机！！）并希望在 VCS（SVN/GIT/HG）中提供**src/text/resources/auth.properties.example**作为示例和想要在 Maven 中检查是否存在**src/text/resources/auth.properties**的代码，它是每个开发人员拥有的（或每个项目检出！！），但前提是调用了**集成测试**阶段（或**集成后的任何其他阶段-测试**阶段）。如果执行任何先前的阶段（如**compile**或**test**） - 必须禁用此检查。

Maven**验证**阶段旨在检查构建一致性（请参阅[Introduction-to-the-lifecycle](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)）。但是没有任何阶段检查！所以我使用**预集成测试**阶段。

我编写工作代码：

```
<?xml 版本="1.0" 编码="utf-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.mycompany.app</groupId>
  <artifactId>我的应用</artifactId>
  <包装>罐子</包装>
  <版本>1.0</版本>
  <name>我的应用</name>

  <个人资料>

    <个人资料>
      <id>existent.properties</id>
      <激活>
        <文件>
          <missing>auth.properties</missing>
        </文件>
      </激活>
      <构建>
        <插件>
          <插件>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <版本>1.6</版本>
            <执行>
              <执行>
                <phase>预集成测试</phase>
                <目标>
                  <目标>运行</目标>
                </目标>
                <配置>
                  <目标>
                    <echo>为了运行集成文本生命周期：</echo>
                    <echo> 1) 将“auth.properties.example”重命名为“auth.properties”。</echo>
                    <echo> 2) 使用您自己的身份验证数据填写“auth.properties”。</echo>
                    <fail message="找不到'auth.properties'。"/>
                  </目标>
                </配置>
              </执行>
            </执行>
          </插件>
        </插件>
      </build>
    </profile>

  </profiles>

  <构建>

    <插件>

      <插件>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-antrun-plugin</artifactId>
        <版本>1.6</版本>
        <执行>

          <执行>
            <id>测试</id>
            <阶段>测试</阶段>
            <目标>
              <目标>运行</目标>
            </目标>
            <配置>
              <目标>
                <echo>JUnit 测试！</echo>
              </目标>
            </配置>
          </执行>

          <执行>
            <id>集成测试</id>
            <phase>集成测试</phase>
            <目标>
              <目标>运行</目标>
            </目标>
            <配置>
              <目标>
                <echo>硒测试！</echo>
              </目标>
            </配置>
          </执行>

        </执行>
      </插件>

    </插件>

  </build>

</项目>

```

但作为 GNU Make 大师，我不喜欢上面的代码。我对吗？Maven的使用错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T16:04:51.623

你的方法很好（如果有点过度设计恕我直言 - 我只是把那种东西放在自述文件/项目维基中；当试图阅读它时，如果没有文件，构建应该会失败）

您可能还想使用 Enforcer 目标而不是 antrun：[http ://maven.apache.org/enforcer/enforcer-rules/requireFilesExist.html](http://maven.apache.org/enforcer/enforcer-rules/requireFilesExist.html)

# python - Python 3.0 中的 for 循环

> ID：13975889
> 
> 赞同：5
> 
> 时间：2012-12-20T15:55:44.527
> 
> 标签：python, palindrome

我目前正在研究回文检测器（anna、lol、hahah 等），我被要求使用 for 循环。

我希望程序遍历两个字符串（在比较值时定期和同时向后读取它们）。如果值相同，则回文为 True；如果不是，则为 False。

我的问题是：如何让两个 for 循环同时运行并比较字符串的值？

目前正在做这样的事情：（Python 3.0），如果需要，可以发布整个代码：

```
 palindrom = True
text2 = ("")
for i in nytext:
    for i in nytext[::-1]:
        text2 = (nytext[::-1] + i)
        if text2 == nytext:
            palindrom = True
        else:
            palindrom = False
return palindrom 
```

谢谢您的帮助！

**编辑：**描述问题时我可能不够清楚。该程序这样做：它让用户输入一串文本（例如你好，我的名字是 lol），并且该程序旨在查看这是否是回文。它分为三个功能（和一个主要功能）。

功能编号 1 修复了文本，使其仅简化为字符和数字（因此 LOL,,,,,, 变为 lol 以便于阅读）。函数编号 2 旨在测试（使用 for 循环（！））输入是否为回文。功能号 3 只是要发布它是否是回文。

我**必须**为此使用 for 循环，我不能简单地进行比较，例如：backwardtext = text.reverse() if backwardtext == text: print ("It is a palindrome")

我希望这能解决问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T15:57:00.143

你用`zip`

```
s = 'hannah'

for c_forward,c_backward in zip(s,s[::-1]):
    ... 
```

也许一个稍低级别的方法是循环索引（假设你的项目是可索引的）：

```
for i in range(len(s)):
    c_forward = s[i]        #character as you loop going forward
    c_backward = s[-(i+1)]  #character as you loop going backward
    pass #TODO: determine if palindome ... :-p 
```

* * *

对于未来的访问者，这些并不能解决问题中的所有约束，但是在 python 中检查字符串是否为回文的最简单方法是简单地执行以下操作：

```
def ispal(s):
    return s == s[::-1] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T15:57:45.190

您可以使用`zip()`.

```
def is_palindrome(string):
    return all(x == y for x, y in zip(string, reversed(string))) 
```

该`zip()`函数并行迭代两个可迭代对象，在最短的结束处停止：

```
>>> list(zip("abc", range(10)))
[('a', 0), ('b', 1), ('c', 2)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T16:55:25.930

```
def is_palindrome(txt):  
    for i, a in enumerate(txt):  
        if a!=txt[-(i+1)]:  
            return False  
    return True   

txt = 'hannah'
print txt, is_palindrome(txt) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T19:38:51.410

只需将其与自身向后比较即可。（在 Python 3.2 中运行）

```
>>> text = "Palindrome"
>>> text[::-1]
'emordnilaP'
>>> text == text[::-1]
False
>>> text = "PalindromemordnilaP"
>>> text == text[::-1]
True 
```

# android - 将原始 GPS 读数与数字地图上的路线相匹配

> ID：13975890
> 
> 赞同：0
> 
> 时间：2012-12-20T15:55:49.837
> 
> 标签：android, google-maps-api-3, gps

我正在开发一个 android 应用程序，在用户旅行时每 1-2 分钟读取一次 GPS 位置（低采样以节省电力）。最后，我有一份用户旅行的原始 GPS 读数列表。如何将其转换为地图上的路线？

这被称为地图匹配，仍然是一个开放的研究主题，但您知道任何处理此类问题的开源工具吗？也许谷歌地图提供了一个处理它的网络服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T16:18:52.970

是的，这称为 MapMatching，但有一些研究。
没有开源地图匹配解决方案。

但你的工作不仅仅是地图匹配部分，很多工作也是数字路网的导入。总共可能需要几个月的工作。我已经为伦敦城市 GPS 试验交通的地图匹配项目做到了这一点。

简单得多，只需每 1-5 秒读取一次 GPS，您就可以准备好 100% 正确的路线，而不会因路线图中的无效和/或过时数据而导致地图匹配错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-08T17:58:07.023

你可以阅读这篇论文：[Hidden Markov Map MatchingThrough Noise and Sparseness](http://research.microsoft.com/en-us/um/people/jckrumm/Publications%202009/map%20matching%20ACM%20GIS%20camera%20ready.pdf)。本文提到的算法基于隐马尔可夫模型，该模型非常适用于稀疏采样的 GPS 点（例如，每个 GPS 点 1-2 分钟）。

我已经使用 C#（[在此处提供](https://github.com/liyaguang/TrjTools/blob/master/TrjTools/MapMatching/MM.cs)）实现了该算法，您可以参考它。

此处提供了另一个地图匹配的开源 java 项目。[https://github.com/graphhopper/map-matching](https://github.com/graphhopper/map-matching)。

# javascript - 每隔几秒钟更改 HTML 页面中的图像

> ID：13975891
> 
> 赞同：25
> 
> 时间：2012-12-20T15:55:52.983
> 
> 标签：javascript, html, image, timer

我想每隔几秒钟更改一次图像，这是我的代码：

```
<?xml version = "1.0" encoding = "utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns = "http://www.w3.org/1999/xhtml">
   <head>
      <title>change picture</title>
      <script type = "text/javascript">

    function changeImage()
    {
    var img = document.getElementById("img");
    img.src = images[x];
    x++;

    if(x >= images.length){
        x = 0;
    } 
   var timerid = setInterval(changeImage(), 1000);
}   }
var images = [], x = 0;
images[0] = "image1.jpg";
images[1] = "image2.jpg";
images[2] = "image3.jpg";

      </script>
   </head>
   <body onload = "changeImage()">
 <img id="img" src="startpicture.jpg">
   </body>
</html> 
```

我的问题是它卡在第一张照片上！

我还想尝试使用上一个和下一个按钮翻阅图片，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-20T16:05:32.813

正如我在评论中发布的那样，您不需要同时使用`setTimeout()`and `setInterval()`，而且您也有语法错误（一个额外的`}`）。像这样更正您的代码：

（编辑添加两个函数来强制显示下一个/上一个图像）

```
<!DOCTYPE html>

<html>
   <head>
      <title>change picture</title>
      <script type = "text/javascript">
          function displayNextImage() {
              x = (x === images.length - 1) ? 0 : x + 1;
              document.getElementById("img").src = images[x];
          }

          function displayPreviousImage() {
              x = (x <= 0) ? images.length - 1 : x - 1;
              document.getElementById("img").src = images[x];
          }

          function startTimer() {
              setInterval(displayNextImage, 3000);
          }

          var images = [], x = -1;
          images[0] = "image1.jpg";
          images[1] = "image2.jpg";
          images[2] = "image3.jpg";
      </script>
   </head>

   <body onload = "startTimer()">
       <img id="img" src="startpicture.jpg"/>
       <button type="button" onclick="displayPreviousImage()">Previous</button>
       <button type="button" onclick="displayNextImage()">Next</button>
   </body>
</html> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-09T13:15:40.897

下面将每 10 秒更改一次链接和横幅

```
 <script>
        var links = ["http://www.abc.com","http://www.def.com","http://www.ghi.com"];
        var images = ["http://www.abc.com/1.gif","http://www.def.com/2.gif","http://www.ghi.com/3gif"];
        var i = 0;
        var renew = setInterval(function(){
            if(links.length == i){
                i = 0;
            }
            else {
            document.getElementById("bannerImage").src = images[i]; 
            document.getElementById("bannerLink").href = links[i]; 
            i++;

        }
        },10000);
        </script>

<a id="bannerLink" href="http://www.abc.com" onclick="void window.open(this.href); return false;">
<img id="bannerImage" src="http://www.abc.com/1.gif" width="694" height="83" alt="some text">
</a> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T16:01:42.897

更改`setTimeout("changeImage()", 30000);`为`setInterval("changeImage()", 30000);`并删除`var timerid = setInterval(changeImage, 30000);`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T16:21:02.120

在帖子的当前编辑版本中，您`setInterval`在每次更改结束时调用，**为每个新的迭代添加一个新的“更改器”**。这意味着在第一次运行后，其中有一个在内存中滴答作响，运行 100 次后，100 个不同的转换器每秒更改 100 次图像，完全破坏性能并产生令人困惑的结果。

您只需要“启动”`setInterval`一次。将其从函数中删除并将其放置在内部，`onload`而不是直接调用函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-25T20:18:24.960

您可以在开始时加载图像并更改 css 属性以显示每个图像。

```
var images = array();
for( url in your_urls_array ){
   var img = document.createElement( "img" );
   //here the image attributes ( width, height, position, etc )
   images.push( img );
}

function player( position )
{
  images[position-1].style.display = "none" //be careful working with the first position
  images[position].style.display = "block";
  //reset position if needed
  timer = setTimeOut( "player( position )", time );
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-09T19:21:43.933

**使用带有左垂直可点击缩略图的 javascript 交换图像的最佳方法**

脚本文件：函数 swapImages() {

```
 window.onload = function () {
        var img = document.getElementById("img_wrap");
        var imgall = img.getElementsByTagName("img");
        var firstimg = imgall[0]; //first image
        for (var a = 0; a <= imgall.length; a++) {
            setInterval(function () {
                var rand = Math.floor(Math.random() * imgall.length);
                firstimg.src = imgall[rand].src;
            }, 3000);

            imgall[1].onmouseover = function () {
                 //alert("what");
                clearInterval();
                firstimg.src = imgall[1].src;

            }
            imgall[2].onmouseover = function () {
                clearInterval();
                firstimg.src = imgall[2].src;
            }
            imgall[3].onmouseover = function () {
                clearInterval();
                firstimg.src = imgall[3].src;
            }
            imgall[4].onmouseover = function () {
                clearInterval();
                firstimg.src = imgall[4].src;
            }
            imgall[5].onmouseover = function () {
                clearInterval();
                firstimg.src = imgall[5].src;
            }
        }

    }

} 
```

# android - 当边框半径小于整体边框宽度时，Android 浏览器会呈现错误的边框

> ID：13975895
> 
> 赞同：9
> 
> 时间：2012-12-20T15:55:57.227
> 
> 标签：android, html, css

[这是现在的 Android 错误 41913。](https://issuetracker.google.com/code/p/android/issues/detail?id=41913)感谢打开它的人！

* * *

[我认为这与这个较早的问题](https://stackoverflow.com/questions/11549475/android-browser-rendering-border-radius-incorrectly-with-larger-border)几乎相同，尽管那里的屏幕截图看起来与我看到的奇怪不同。

我想要做的是创建一个带有厚顶边框和圆角的盒子，[就像在这个 JSBIN 示例中一样](https://output.jsbin.com/uzuril/2)。这在桌面浏览器（嗯，`border-radius`支持的）和 iOS Safari 和带有 Chrome 的 Android 上运行良好，但旧的 Android 浏览器显示了这一点：

[![安卓](../Images/1d61a3f05a4720cf9e37a1e0f14743dd.png)](https://i.stack.imgur.com/2lQBU.png)
[（来源：[gutfullofbeer.net](http://gutfullofbeer.net/android.png)）]

渲染边界，使曲线之外的较厚部分不会到达边缘。有谁知道是否有办法让浏览器正确执行此操作？这似乎是至少可以追溯到 Android 2.3 的一致错误；屏幕截图来自 4.0.3 手机。

这是来自 JSBIN 的 HTML：

```
<body class=single>
  <div class=dialog-bound>
    Hello World
  </div>
</body> 
```

和 CSS（从实际项目中提取的类名）：

```
body.single {
  background-color: #336699;
  font-size: 16px;
}

body.single .dialog-bound {
  background-color: #FFFCF2/*#mainBackground*/;
  margin: 50px auto;
  max-width: 32em;
  border-width: 28px 0 8px 0;
  border-style: solid;
  border-color: #89BAE2;
  -webkit-border-radius: 10px 10px 5px 5px;
  border-radius: 10px 10px 5px 5px;
  padding: 0 5px 2px 5px;
} 
```

***编辑***——还有一点值得注意：在我的 HTC One X 手机和我的 Nexus 7 上，上面的 CSS 在 Chrome 和 Firefox 中完美运行。它也适用于我在 Firefox 中的 Android 2.3 下的 Atrix。因此，我真的怀疑这是虚拟像素与实际像素的问题，因为这些设备上的所有浏览器都同意视口大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T00:49:48.947

这是android浏览器的问题，它绘制圆角，如果`border-width`大于半径，则半径区域没有填充。

边框宽度都没有小于浏览器的半径不能很好地绘制（您可以在[http://jsbin.com/uxawuf/1](http://jsbin.com/uxawuf/1)中看到）

我在 android 的 bug 跟踪器上没有看到任何相关问题，[有一个关于使用边框半径制作阴影](http://code.google.com/p/android/issues/detail?id=35262&q=border-radius&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)的问题，我认为这是同一个问题，也许打开一个是个好主意（我在上面：P）

我知道这不会算作一个好的答案：P 但是如果你想要这个效果，你可以添加 2 个 div，一个用于边框顶部，另一个用于边框底部，并使用半径和背景进行技巧：（这里的例子：[http://jsbin.com/exexol/9](http://jsbin.com/exexol/9)）

```
<body class=single>
  <div class=dialog-bound>
    <div class="bordertop"></div>
    <div class="content">Hello World</div>
    <div class="borderbottom"></div>
  </div>
</body> 
```

和CSS：

```
body.single {
  background-color: #336699;
  font-size: 16px;
}

body.single .dialog-bound{
  margin: 50px auto;
  max-width: 32em;
  background: transparent;
}
body.single .dialog-bound .content{
  padding: 0 5px 2px 5px;
  background-color: #FFFCF2;

}
body.single .dialog-bound .bordertop{
  border-radius: 10px 10px 0px 0px;
  background:#89BAE2;
  height:28px;
  -webkit-border-radius: 10px 10px 0 0;
}
body.single .dialog-bound .borderbottom{
  border-radius: 0 0 5px 5px;
  background:#89BAE2;
  height:8px;
  -webkit-border-radius: 0 0 5px 5px;
} 
```

我的测试是在完全更新的 Galaxy Nexus 中进行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:31:44.547

这确实是 Android 错误[http://jsbin.com/uzuril/17](http://jsbin.com/uzuril/17)，但它可能被像这样的伪元素欺骗[http://jsbin.com/uzuril/15](http://jsbin.com/uzuril/15)

HTML 代码是相同的，LESS 中的 CSS 像这样在索尼爱立信 Xperia 上的 Android 4.0.3 的默认浏览器和同一部手机的最新 Chrome 手机中进行了测试。

```
body.single {
  background-color: #336699;
  font-size: 16px;
}

body.single .dialog-bound {
  background-color: #FFFCF2/*#mainBackground*/;
  padding: 2px 5px 4px 5px;
  position: relative;
  margin: 50px auto;
  max-width: 32em;

  &::after,
  &::before {
    border-style: solid;
    border-color: #89BAE2;
    content: '';
    left: 0; right: 0;
    position: absolute;
  }

  &::after {
    border-width: 1.8em 1.8em 0 1.8em;
    top: 2px; margin-top: -1.8em;
    border-radius: .6em .6em 0 0;
  }

  &::before {
    border-width: 0 0.6em 0.6em 0.6em;
    bottom: 2px; margin-bottom: -0.6em;
    border-radius: 0 0 .3em .3em;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T16:50:06.697

> 你可以显示你的属性， `max-width: 32em;`所以你应该注意到你的边框..当字体到来时，“Hello World”边框变大并且在字体边框之前或之后变小..
> 
> 实际上 max-width: [http://reference.sitepoint.com/css/max-width](http://reference.sitepoint.com/css/max-width)属性可以调整字体大小。
> 
> 所以你应该修复这个问题属性使用 Width=% used

# model-view-controller - 谁负责删除 PostImage？PostsController 还是 PostImagesController？

> ID：13975898
> 
> 赞同：1
> 
> 时间：2012-12-20T15:56:18.797
> 
> 标签：model-view-controller, cakephp, controller

这个问题是关于MVC中的一个概念：

假设我的系统中有两个基本实体：`Post`那个有很多`PostImage`（1:N 关系）。

在某个时刻，我正在编辑 a`Post`并且我想删除一些`PostImage`.

这是我的疑问：哪个`Controller`负责执行删除`PostImage`?

a) `PostsController`（`PostImage`唯一存在于 内`Post`）？
b) `PostsImageController`?
c) 两者都是正确的选择。

*注意：我使用的是 CakePHP，但我认为这无关紧要，因为 MVC 是一个概念，对吧？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:01:00.747

`PostImagesController`是负责告诉`PostImageModel`删除记录的人。

你可以在里面做的`PostsController`是从模型中调用`delete()`方法`PostImage`，假设你已经正确地关联了它们。

```
$this->Post->PostImage->delete($postImageId); 
```

# ruby-on-rails - 无法从 rspec 测试访问控制器方法中定义的 flash[:error]

> ID：13975899
> 
> 赞同：1
> 
> 时间：2012-12-20T15:56:22.537
> 
> 标签：ruby-on-rails, rspec

我是 Rails 和 rspec 的新手。我的控制器中有一个自定义方法，它不是一个动作。我正在尝试使用规范测试此方法。

这是我的控制器方法：

```
def find_target_by_id(target_id)    
    begin
      @target = Target.find(target_id)
    rescue ActiveRecord::RecordNotFound
      flash[:error] = "Target with Id #{target_id} does not exist."
      redirect_to root_url
    end
end 
```

这是我对此方法的 rspec 测试：

```
context "is given invalid id" do
   before do
     Target.stub(:find).with("1").and_raise(ActiveRecord::RecordNotFound)
   end
   it "returns flash[:error] " do
     TargetsController.new.find_target_by_id("1")
     flash[:error].should eq("Target with Id 1 does not exist.")
   end

   it "redirects to root url " do
      TargetsController.new.find_target_by_id("1")
      response.should redirect_to(root_url)
   end
end 
```

但是，在运行测试时，我收到错误：

```
Failure/Error: TargetsController.new.find_target_by_id("1").should have(flash[:error])
 RuntimeError:
   ActionController::Base#flash delegated to request.flash, but request is nil: #<TargetsController:0x007fced708ae50 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_request=nil, @_response=nil>
 # ./app/controllers/targets_controller.rb:71:in `find_target_by_id'
 # ./spec/controllers/targets_controller_spec.rb:212:in `block (4 levels) in <top (required)>' 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:43:23.133

除非发出了实际的 Web 请求，否则您无法访问 Rspec 中的闪存。这就是错误所暗示的 - 它正在查看`request.flash`，但`request`为零，因为您尚未发出网络请求。

一些想法：

*   在您的测试中向调用此方法的操作发出 GET（或 POST 或其他）请求，以便您实际上可以访问闪存
*   不要在您的辅助方法中设置 flash，而是返回错误消息或引发异常并将 flash 消息设置留给您的控制器操作

如果我遇到这种情况，我会采取第二种方法。将可控制的东西（如设置闪光灯等）留给控制器操作，并让您的辅助方法简单明了。它肯定会帮助您的测试更简单。

# html - 如何制作页面全高的包装？

> ID：13975900
> 
> 赞同：5
> 
> 时间：2012-12-20T15:56:24.013
> 
> 标签：html, css, wordpress, wrapper

请访问[http://appkify.com](http://appkify.com)，它的 wordpress 网站。

当您单击类别选项卡时，包装器的高度会降低到内容高度。他们有什么办法让它全高吗？

我尝试添加以下属性，但它随后使正文背景成为所有帖子的边框。

```
html,body, #wrapper {
  height:100%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:54:06.350

Wrapper 具有自动高度。它被创建了。并且随着您向其中写入内容，它会变得更大。但是，通过将高度设置为 100%，当在编写包装器时发生溢出时，它将在您的网页上而不是在浏览器上获得滚动条。

# android - 在同一进程中运行的两个应用程序可以具有不同的 STATIC 对象值吗？

> ID：13975901
> 
> 赞同：1
> 
> 时间：2012-12-20T15:56:28.443
> 
> 标签：android, multithreading, process

我创建了两个共享相同用户 ID (sharedUserId) 以及相同进程的 Android 应用程序。在第一个应用程序中，在启动时，我将静态 int 变量设置为 1（默认为 0）。在第二个应用程序中，我从另一个应用程序加载（使用反射）相同的类并读取静态 int 变量。我读了0。

由于两个应用程序在同一个进程上运行，我希望它们共享相同的静态值，不是吗？谁能告诉我下面的机制是做什么的？（他们是否使用了不同的 apk/dex 加载器并导致了这种行为？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T08:49:40.170

原来答案是这样......它与类加载器有关的是Java，而不是进程或应用程序。

Java 语言：类由其完全限定名标识 Java 虚拟机：类对象由其完全限定名和定义类加载器标识

由同一个类加载器加载的类的实例肯定会看到相同的静态变量。类加载器通常委托给它的父类加载器。如果父级已经加载了该类，它将不会再次加载它。可以通过编写自己的类加载器来更改此标准行为。结果是类加载器的层次结构只会加载一次类，因此分配静态变量并运行静态块一次。但是，如果您有多个类加载器层次结构，您可以多次加载同一个类并多次分配静态成员。由不同类加载器定义的两个类对象是不同的类型，即使它们是从同一个类文件生成的。由同一个类加载器加载的类的实例看到相同的静态变量。

感谢 Chris Matawa 在这篇文章中给我答案： [https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/8-b5T1zYr-8](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/8-b5T1zYr-8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T10:30:48.823

> **但是它们占用了两个很多资源，尤其是*在位图方面***

就内存泄漏而言，使用静态变量在不同应用程序之间（甚至在同一应用程序的不同活动之间）共享位图将是一个坏主意；有关示例，请参见[http://www.curious-creature.org/2008/12/18/avoid-memory-leaks-on-android/ 。](http://www.curious-creature.org/2008/12/18/avoid-memory-leaks-on-android/)

使用静态变量在活动和应用程序之间共享数据和资源不是节省资源，而是让事情变得更糟，因为不仅所有这些东西都会永远保留在内存中（或者至少很长一段时间，即使你不需要它们不再）但更重要的是，由于隐藏和未知的引用，这些静态的东西可以带来很多其他的东西。

这就是为什么您应该使用 Intents、SharedPreferences 或数据库传递数据，并让每个活动负责加载它在资源方面所需的内容。

一些需要时间加载的大资源有时可以在不同的活动之间共享，但是如果你不想泄露大量内存，你需要格外小心。这在任何手机上都是非常珍贵的。

# javascript - 在while循环中将变量传递给：eq jquery选择器

> ID：13975902
> 
> 赞同：1
> 
> 时间：2012-12-20T15:56:32.413
> 
> 标签：javascript, jquery, jquery-selectors

我正在尝试使用以下代码将 jquery`hover`函数分配给列表中的所有元素`<ul>`：

```
var element = 0;
var length = $(".artist-list-link").length;
while (element<length) {
    $(".artist-list-link:eq("+element+")").hover(function() {
        $(".artist-back:eq("+element+")").css('display','block');
        $(".artist-hover:eq("+element+")").fadeIn(100);
    }, function() {
        $(".artist-back:eq("+element+")").css('display','none');
        $(".artist-hover:eq("+element+")").fadeOut(100);
    });
element++;
}; 
```

标记如下所示：

```
<ul>
    <li><a class="artist-list-link" href="">Artist 1</a></li>
    <li><a class="artist-list-link" href="">Artist 2</a></li>
    <li><a class="artist-list-link" href="">Artist 3</a></li>
    <li><a class="artist-list-link" href="">Artist 4</a></li>
    <li><a class="artist-list-link" href="">Artist 5</a></li>
</ul> 
```

我也为每个艺术家提供了一些 div（我删除了所有链接，只是为了使其更具可读性。

```
<div class="artist-thumbnail artist-size">
    <div class="artist-card artist-size artist-hover"></div>
    <div class="artist-card artist-size"><img src="" /></div>
    <div class="artist-card artist-size artist-back">Artist 1</div> 
</div> 
```

但是上面的循环并没有真正起作用，尽管下面的代码完美地工作：

```
$('.artist-list-link:eq(0)').hover(function() {
    $('.artist-back:eq(0)').css('display','block');
    $('.artist-hover:eq(0)').fadeIn(100);
}, function() {
    $('.artist-back:eq(0)').css('display','none');
    $('.artist-hover:eq(0)').fadeOut(100);
}); 
```

可能是什么问题呢？感谢您的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T15:58:17.443

那是因为`element`在调用回调时发生了变化。

你可以这样做 ：

```
while (element<length) {
    (function(element) {
      $(".artist-list-link:eq("+element+")").hover(function() {
        $(".artist-back:eq("+element+")").css('display','block');
        $(".artist-hover:eq("+element+")").fadeIn(100);
      }, function() {
        $(".artist-back:eq("+element+")").css('display','none');
        $(".artist-hover:eq("+element+")").fadeOut(100);
      });
    })(element);
    element++;
}; 
```

这可以保护您的元素在闭包中的值。

# sql-server - 数据库中事务日志已满的可能原因及解决方案

> ID：13975905
> 
> 赞同：2
> 
> 时间：2012-12-20T15:56:38.303
> 
> 标签：sql-server, database, tsql, sql-server-2005-express, transaction-log

在我的团队 ASP.NET 应用程序的数据访问层中，我通过使用 .NET SQLClient 对我们的数据库运行存储过程。添加新代码以允许对数据库进行插入操作后，我测试了代码，并收到以下异常：

`The transaction log for database 'DBName' is full. To find out why space in the log cannot be reused, see the log_reuse_wait_desc column in sys.databases`

我确认在 MS SQL Server Management Studio 中尝试插入操作时收到了相同的消息。我很担心，因为我最近添加了三个两个触发器两个数据库来执行基于插入和更新某些表的一些数据插入，并且我认为可能我已经招致了一个无限循环或类似性质的东西。

但是，根据在线此问题的其他实例，这似乎不是通常由触发器或旋转查询引起的问题。我查询了`log_reuse_wait`and`log_reuse_wait_desc`列并返回了以下内容：

`2 | LOG_BACKUP`

此外，查询返回：`SELECT [name], recovery_model_desc, log_reuse_wait_desc
FROM sys.databases`

```
name | recovery_model_desc| log_reuse_wait_desc

DBName|   FULL            | LOG_BACKUP 
```

其中第一列是`log_reuse_wait`，第二列是`log_reuse_wait_desc`。根据[msdn](http://msdn.microsoft.com/en-us/library/ms190925.aspx#Truncation)上代码的定义，我需要执行日志备份，然后可以自动截断日志，以便对数据库进行进一步的操作。这是一个正确的假设吗？这可能是由错误编码的触发器引起的，还是更多的日常维护任务，由数据库上的大量事务引起？

编辑：

查询`select type_desc, size, max_size from sys.database_files`返回：

```
 type_desc | size | max_size
1| ROWS      |  512 | -1
2| LOG       |  64  |  -1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T16:24:57.727

如果您的数据库处于完全恢复模式，则在执行日志备份之前，不会截断日志（截断是一个糟糕的词，我希望他们选择其他内容）。基本上，当您将数据库置于 FULL 恢复模式时，您是在告诉 SQL Server 您需要时间点恢复。为了做到这一点，SQL Server 需要来自上次完整（或差异）备份的完整日志链，并且为了做到这一点，它不会重新使用（“截断”）日志空间，直到您备份了日志.

这是处于完全恢复模式的数据库的常规操作问题。如果您不需要时间点恢复，请将您的数据库设置为简单恢复模式 - 这将自动重用日志空间，但您只能恢复到上次的完整/差异备份。

如果您确实需要时间点恢复，那么您需要（嗯，您的 DBA 团队需要）设置一个定期执行日志备份的维护计划。

# javascript - 闭包和回调

> ID：13975906
> 
> 赞同：3
> 
> 时间：2012-12-20T15:56:40.190
> 
> 标签：javascript, callback, closures, opendatabase

我正在开发一个数据库函数，需要从 fetchAll 返回结果，这样我就可以在代码的其他地方使用它，但不知道该怎么做：

```
function fetchAll(sql,params,tableref){
  var fields = new Array();
  var resultout = new Array();

  for (i in tableref){     
    fields.push(i);  
  }       

  getResults(sql,params,fields,function(results){
     // I WANT TO RETURN RESULTS
     resultout.push(results);       
  });          

// TO HERE SO I CAN RETURN from Fetchall
console.log(resultout);
}

function getResults(query,params,fields,callBack){
  var result = new Array(); 
  thisDB.transaction(function (tx) {
    tx.executeSql(query,params, function(tx, rs){
       for(var i=0; i<rs.rows.length; i++) {
          var row = rs.rows.item(i);
          var rowresults = new Object();

          for (x=0;x<fields.length;x++){
            rowresults[fields[x]] = row[fields[x]];      
          }

          result.push(rowresults);
       }
       callBack(result);
    });
  }); 

return result;  
} 
```

我想我错过了一些明显的东西。

谢谢

安东尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:03:02.367

如果我正确理解您的问题，请查看您需要的结果

```
function fetchAll(sql,params,tableref){
    var fields = new Array();
    var resultout = new Array();

    for (i in tableref){     
        fields.push(i);  
    }       

    getResults(sql,params,fields,function(results){
        // I WANT TO RETURN RESULTS
        resultout.push(results);
        console.log(resultout);
    });
} 
```

回调将在“之后”执行，因此基本上在您的示例中，您会看到一个空结果。这是因为回调的异步特性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:24:36.470

我认为您正在尝试从异步请求转移到同步请求

是一个很好的话题，您可以在网上找到许多解决此问题的帖子和解决方案

你有几个选择：

*   在你的函数中使用回调而不是返回：你的函数必须接收另一个参数（回调）并调用该回调传递给它你想要返回的值

    ```
    function fetchAll (sql, params, tableref, callback) {
      var fields = new Array();

      for (i in tableref) {     
        fields.push(i);  
      }       

      getResults(sql, params, fields, function (results) {
         // I WANT TO RETURN RESULTS
         callback(results);       
      });
    } 
    ```

    然后你可以像这样记录结果：

    ```
    fetchAll(sql, params, tableref, function (results) { console.log(results); }); 
    ```

*   找到 的同步版本`getResults`，通常有一个功能，也许`getResultsSync`？

*   使用节点，您可以使用[https://github.com/laverdet/node-fibers](https://github.com/laverdet/node-fibers)或[http://github.com/maxtaco/tamejs](http://github.com/maxtaco/tamejs)将异步样式转换为同步样式（我目前正在为此目的使用 tamejs，它是伟大的！）
*   *还有其他一些我不太了解的话题*

# php - 以 K 计算色温

> ID：13975917
> 
> 赞同：23
> 
> 时间：2012-12-20T15:57:07.967
> 
> 标签：php, c, colors, gimp

我已经编写了一个用于处理颜色的库，并且一直在尝试计算`Tc(k)`。从我读到的在[CIE 1931](http://en.wikipedia.org/wiki/CIE_1931_color_space) `XYZ`颜色空间中工作是可行的方法，它可以使用`xyY`.

到目前为止，我已经得到了正确的一切，直到找出正确的`x`和`y`来自：

```
 X                 Y
x = ____________  y = ____________
    ( X + Y + Z)      ( X + Y + Z) 
```

数字与图表差不多，但找不到任何详细说明您的往返方式的`x`信息`y``Tc(K)`

![在此处输入图像描述](../Images/9df561a6308588efcf9d2de08828648b.png)

例如：对于#FF0000，我得到以下信息。

```
x: 0.64007449945677
y: 0.32997051063169 
```

我已经阅读了许多关于该主题的论文以及几乎所有的维基百科文章。我在 SO 上遇到的所有问题都只是链接到关于颜色的 wiki 文章，没有看到有实际计算公式的文章`Tc(k)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-12T12:55:48.220

根据 Wikipedia 文章，我将`Color Temperature`计算的近似公式输入 Excel 为

`=(-449*((R1-0,332)/(S1-0,1858))^3)+(3525*((R1-0,332)/(S1-0,1858))^2)-(6823,3*((R1-0,332)/(S1-0,1858)))+(5520,33)`

```
R1 is color space x coordinate from 0 to 1
S1 is color space y coordinate from 0 to 1 
```

工作正常！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T16:23:48.407

如果我对您的理解正确，请参阅此[pdf](http://www.google.ru/url?sa=t&rct=j&q=results_cctcomparison.pdf&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=http%3A%2F%2Fcie2.nist.gov%2FCR3%2FDocuments%2FResults_CCTcomparison.pdf&ei=YzvTUIj0Csip4AT49YG4Cw&usg=AFQjCNFKUytkKcEBw9ra1ad86TjV5PysFw&bvm=bv.1355534169,d.Yms)，其中描述了许多方法（简要 :( ）。来自此 PDF：

> [CCT1] 使用 CIE 1960 统一色彩空间坐标 u 和 v 执行计算。坐标 u 和 v 使用以下公式从 x 和 y 导出：u = 4x/(12y-2x+3) 和 v = 6y/(12y- 2x+3) 相关色温定义为最接近测试源 u,v 坐标的黑体温度。两种不同的方法提供结果：一种是基于定义的迭代方法，另一种是常用的罗伯逊方法，涉及基于 30 个预先计算的 u、v 和反斜率参数的表的插值。迭代 如果 uS 和 vS 是测试源的值，并且 uT 和 vT 是温度 T 下的黑体值，则相关色温是 T 的值，其中：

```
sqrt( (uS - uT)^2 + (vS - vT)^2 ) 
```

> 被最小化。使用电子表格（Quattro Pro 8 和 Excel 97）调整温度 T 以获得该函数的最小值。两个电子表格都给出了相同的值。

不知道它是否真的对你有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T23:54:03.347

我在一些开源应用程序中进行了一些挖掘，并在 UFRaw 中找到了一些东西。我还没有完全弄清楚到底发生了什么。

还找到了[一篇](http://www.usna.edu/Users/oceano/raylee/papers/RLee_AO_CCTpaper.pdf)似乎很好地涵盖了该主题的论文。

转换为 php，这就是我目前所拥有的：

```
$temp = array(9500, 7000, 5500, 3750, 3000, 2700, 2250, 1800, 1500);
$hex = array('9DBEFF', 'E4EEFF', 'FFE4BE', 'FFA04C', 'FF7A26', 'FF6A19', 'FF500B', 'FF3403', 'FF2300');

echo '<h3>K -> RGB</h3>';
foreach ($temp as $k) {
    $rgb = ColourConverter::temperature2rgb($k);
    echo sprintf('<div style="background-color:rgb(%s); text-align: center; width: 100px; height: 25px; clear: both;">%s</div>', implode(', ', $rgb), $k);
}

echo '<h3>RGB -> K</h3>';
foreach ($hex as $v) {
    $rgb = array_values(ColourConverter::hex2rgb($v));
    $k = round(ColourConverter::rgb2temperature($rgb[0], $rgb[1], $rgb[2]));
    echo sprintf('<div style="background-color:rgb(%s); text-align: center; width: 100px; height: 25px; clear: both;">%s</div>', implode(', ', $rgb), $k);
} 
```

![参考](../Images/6cafffe9b1fc035a4e1f67ad7a074e7c.png)

我的输出：

![输出](../Images/c118d277d1a9124768c3c89da639e5cc.png)

非常接近，但还不是 100%。（在我的代码中发现了一个[错误](https://i.stack.imgur.com/Khzz3.png)，现在几乎完美了）

*   颜色从 k -> rgb 稍微偏离
*   做 k -> rgb -> k 是行不通的。你不会回到相同的价值。

# 代码

[UFRaw 线 246-294](https://github.com/sergiomb2/ufraw/blob/1aec313/ufraw_routines.c#L246-L294)

```
void Temperature_to_RGB(double T, double RGB[3])
{
    int c;
    double xD, yD, X, Y, Z, max;
    // Fit for CIE Daylight illuminant
    if (T <= 4000) {
        xD = 0.27475e9 / (T * T * T) - 0.98598e6 / (T * T) + 1.17444e3 / T + 0.145986;
    } else if (T <= 7000) {
        xD = -4.6070e9 / (T * T * T) + 2.9678e6 / (T * T) + 0.09911e3 / T + 0.244063;
    } else {
        xD = -2.0064e9 / (T * T * T) + 1.9018e6 / (T * T) + 0.24748e3 / T + 0.237040;
    }
    yD = -3 * xD * xD + 2.87 * xD - 0.275;

    // Fit for Blackbody using CIE standard observer function at 2 degrees
    //xD = -1.8596e9/(T*T*T) + 1.37686e6/(T*T) + 0.360496e3/T + 0.232632;
    //yD = -2.6046*xD*xD + 2.6106*xD - 0.239156;

    // Fit for Blackbody using CIE standard observer function at 10 degrees
    //xD = -1.98883e9/(T*T*T) + 1.45155e6/(T*T) + 0.364774e3/T + 0.231136;
    //yD = -2.35563*xD*xD + 2.39688*xD - 0.196035;

    X = xD / yD;
    Y = 1;
    Z = (1 - xD - yD) / yD;
    max = 0;
    for (c = 0; c < 3; c++) {
        RGB[c] = X * XYZ_to_RGB[0][c] + Y * XYZ_to_RGB[1][c] + Z * XYZ_to_RGB[2][c];
        if (RGB[c] > max) max = RGB[c];
    }
    for (c = 0; c < 3; c++) RGB[c] = RGB[c] / max;
}

void RGB_to_Temperature(double RGB[3], double *T, double *Green)
{
    double Tmax, Tmin, testRGB[3];
    Tmin = 2000;
    Tmax = 23000;
    for (*T = (Tmax + Tmin) / 2; Tmax - Tmin > 0.1; *T = (Tmax + Tmin) / 2) {
        Temperature_to_RGB(*T, testRGB);
        if (testRGB[2] / testRGB[0] > RGB[2] / RGB[0])
            Tmax = *T;
        else
            Tmin = *T;
    }
    *Green = (testRGB[1] / testRGB[0]) / (RGB[1] / RGB[0]);
    if (*Green < 0.2) *Green = 0.2;
    if (*Green > 2.5) *Green = 2.5;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-18T13:58:19.360

找到[用 JavaScript 编写的 Temperature to RGB 解决方案](https://gist.github.com/paulkaplan/5184275)并将其转换为 PHP。

```
<?php
function colorTemperatureToRGB($kelvin)
{
    $temp = $kelvin / 100;

    $red = null;
    $green = null;
    $blue = null;

    if ($temp <= 66)
    {
        $red = 255; 

        $green = $temp;
        $green = 99.4708025861 * log($green) - 161.1195681661;

        if ($temp <= 19)
        {
            $blue = 0;
        }
        else
        {
            $blue = $temp - 10;
            $blue = 138.5177312231 * log($blue) - 305.0447927307;
        }

    }
    else
    {
        $red = $temp - 60;
        $red = 329.698727446 * pow($red, -0.1332047592);

        $green = $temp - 60;
        $green = 288.1221695283 * pow($green, -0.0755148492);

        $blue = 255;
    }

    return [
        'r' => clamp($red,   0, 255),
        'g' => clamp($green, 0, 255),
        'b' => clamp($blue,  0, 255)
    ];
}

function clamp($x, $min, $max)
{
    if ($x < $min)
        return $min;

    if ($x > $max)
        return $max;

    return $x;
}

var_dump(colorTemperatureToRGB(7000)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-29T06:07:05.100

维基百科指出，色温是通过考虑 uv 色度而不是 xy 来计算的，因此您必须执行翻译。也就是说，我建议使用@sixlettervariables 建议的近似值（也在维基百科中解释过）。

真正的问题是，您要查找的色温是多少？我看到了对 RGB 颜色的引用 (#FF0000)，如果不说明颜色空间，这些颜色就毫无意义。假设您在 sRGB 中（所以我可以再次将[您指向 Wikipedia](http://en.wikipedia.org/wiki/SRGB)），您必须首先获得线性 RGB 坐标，然后再进行 XYZ。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-22T22:08:49.927

我意识到这是一个老问题，但我也在努力寻找答案。我终于遇到了这个[漂亮的计算器](https://www.waveformlighting.com/tech/calculate-color-temperature-cct-from-cie-1931-xy-coordinates)，它还发布了如下公式：

n = (x-0.3320)/(0.1858-y)

CCT = 437*n^3 + 3601*n^2 + 6861*n + 5517

希望这可以帮助其他仍在寻找的人。

# javascript - 如何从下面的 Javascript 控制台激活选项卡？

> ID：13975919
> 
> 赞同：12
> 
> 时间：2012-12-20T15:57:15.677
> 
> 标签：javascript, debugging, google-chrome, console, chromium

我在当前打开的标签下方使用 Chrome 的 javascript 控制台（如果您使用的是 Chrome 或 Chromium，您可以现在按`Ctrl`+ `Shift`+键打开它）。`J`

是否可以在控制台中输入一些*内容*，以便上面选项卡中的文档获得焦点而控制台失去焦点？

我试过了

```
chrome.tabs 
```

但它只给

```
undefined 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T16:06:46.493

[https://support.google.com/chrome/bin/answer.py?hl=en&answer=157179](https://support.google.com/chrome/bin/answer.py?hl=en&answer=157179)

说

( `F6`) 或 ( `Shift`+ `F6`)

但是在到达主要的网络内容之前，您必须切换很多东西。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-29T20:31:39.170

在不关闭控制台的情况下获得焦点的唯一方法是调用`alert();`或。 或者，通过关闭控制台 ( ) ，主选项卡可以获得焦点。`confirm();``prompt();`
`window.open("javascript:close()","_self");`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T12:57:19.893

根据[Firebug 的 Command Line API* wikipage](http://getfirebug.com/wiki/index.php/Command_Line_API)，没有办法；它只会输出有关输入的数据。

*这是 Javascript 控制台使用的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T18:41:53.660

我无论如何都不会称这是一个优雅的解决方案，但作为一个黑客，它会完成这项工作。

您的问题是“如何*从*Chrome 控制台关注主文档”；有了这个，我加入了一个中间元素——一个弹出窗口。这个想法是，如果您可以创建一个自动关闭的弹出窗口（从控制台），当它关闭时，焦点会返回到父窗口。在这种情况下，它是您所在的实际文档，而不是 Chrome 中的控制台。

这是完整的代码布局：

```
var openScript = document.createElement('script');
openScript.innerHTML = 'openWindow = window.open(""); openWindow.document.write(\'<script>window.close();</script>\');';
document.body.appendChild(openScript); 
```

这段代码可以折叠成一个可以复制+粘贴到控制台的单行代码，点击`Enter`它后会弹出、关闭并将焦点返回到原始文档。在您将焦点放在控制台之前，页面上的任何元素都已获得焦点，或者您*在*控制台中将焦点更改为任何元素（通过`document.getElementById('something').focus()`或类似方式），都将获得页面上的焦点。

这种方法的警告是，您使用它的网站需要启用弹出窗口。或者，并不是真的推荐，您可以在 Chrome 中“启用所有弹出窗口”。

作为额外的附加功能，如果您要在同一页面上多次使用它（不刷新），您可以将添加到页面的 javascript 包装在函数调用中，并且每次只调用该函数。例如：

```
...
openScript.innerHTML = 'function refocus() { openWindow = window.open(""); openWindow.document.write(\'<script>window.close();</script>\'); }';
... 
```

然后，`refocus();`只要您想将注意力集中在父母身上，就可以打电话。当然，如果您出于任何原因离开当前页面，则需要再次重新运行完整的代码块。

对于它的价值，如果您发现自己经常使用它，您还可以添加扩展[Tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?hl=en)并将此代码块保存到那里的函数中；然后，您无需担心每次都运行整个程序——您只需调用您保存的函数名称。

上面的一行（便于复制+粘贴）：

```
var openScript = document.createElement('script'); openScript.innerHTML = 'openWindow = window.open(""); openWindow.document.write(\'<script>window.close();</script>\');'; document.body.appendChild(openScript); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-05T21:07:25.737

而不是在控制台中粘贴代码：

```
var a = function() {my code...}; a() 
```

您可以从 url 栏中粘贴并运行它：

```
javascript:var a = function() {alert('hi');}; a() 
```

您甚至可以将此 javascript: url 添加为书签，这是运行的代码片段 ('bookmarklets') 的数量。

# windows-phone-8 - WP8：创建一个宽的辅助磁贴

> ID：13975920
> 
> 赞同：1
> 
> 时间：2012-12-20T15:57:22.873
> 
> 标签：windows-phone-8

> **可能重复：**
> [添加辅助 Windows Phone 8 磁贴](https://stackoverflow.com/questions/13925129/add-secondary-windows-phone-8-tile)

我想知道是否有办法在宽模式下固定辅助磁贴，这样用户就不必在固定后调整它的大小？

# javascript - 悬停时的jQuery显示框和鼠标离开时隐藏

> ID：13975921
> 
> 赞同：3
> 
> 时间：2012-12-20T15:57:26.813
> 
> 标签：javascript, jquery

好吧，我正在尝试创建一个当链接悬停时应该弹出的框，

好吧，我已经掌握了基本知识，但是由于某种原因，我无法完全完成我想做的事情。

正如你在这里看到的那样，[http://jsfiddle.net/EpV87/1/](http://jsfiddle.net/EpV87/1/)（对不起，它对我遇到的问题的再现不佳）

我想要做的是让框（`TEST`）在`HOVER HERE`悬停时可见，如果鼠标悬停在里面，框应该可见。

当鼠标输入时`TEST`，它可以正常工作，但是，当它悬停在另一个`OTHER`空白空间时，它不能正常工作，因为该`TEST`框仍然可见。

如果鼠标悬停在其他和空白空间上，我如何使`TEST`框隐藏谢谢，我是 jQuery 的新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T16:00:37.190

受[这个旧答案](https://stackoverflow.com/questions/1273566/how-do-i-check-if-the-mouse-is-over-an-element-in-jquery#answer-1670561)的启发：

```
var $link = $(".link");
var $box = $("#box");

$link.mouseenter(function() {
  clearTimeout($box.data('timeoutId'));
  $box.show(200);
}).mouseleave(function() {
  var timeoutId = setTimeout(function() {
    $box.hide(200);
  }, 650);
  $box.data('timeoutId', timeoutId);
});

$box.mouseenter(function() {
  clearTimeout($box.data('timeoutId'));
}).mouseleave(function() {
  var timeoutId = setTimeout(function() {
    $box.hide(200);
  }, 650);
  $box.data('timeoutId', timeoutId);
});
```

```
.link {
  border: 1px solid red;
  padding: 10px;
}

#box {
  display: none;
  border: 1px solid red;
  margin-top: 10px;
  padding: 10px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<a class="link">Hover me</a>
<div id="box">Surprise!</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:06:54.027

[在我检查](http://jsfiddle.net/EpV87/1/)的版本中，您正在另一个 mouseleave 处理程序中处理 mouseleave，并且您的选择器中有错字 `$('#abc').mouseleave(function(){...` 应该是 `$('.abc').mouseleave(function(){...`

# 您最初发布的版本

[http://jsfiddle.net/EpV87/1/](http://jsfiddle.net/EpV87/1/)

## HTML

```
<a class="abc">ABC</a>
<div id="def">TEST</div> 
```

## Javascript

```
$('.abc').mouseenter(function(e) {
    $('#def').show(200);
}).mouseleave(function(e){
    $('#abc').mouseleave(function(){
        $('#def').hide(200);
    });
}); 
```

# 解决方案

[http://jsfiddle.net/EpV87/6/](http://jsfiddle.net/EpV87/6/)

## HTML

```
<a class="abc">ABC</a>
<div id="def" style="display: none;">TEST</div> 
```

## Javascript

```
$('.abc')
    .on("mouseenter", function () {
        $("#def").show();            
    })
    .on("mouseleave", function () {
        $("#def").hide();
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T16:09:10.720

您需要另一个 div 来包含这两个元素：

```
<div id="container">
    <a class="abc">ABC</a>
    <div id="def">TEST</div>
</div> 
```

这样就可以让TEST div在鼠标离开容器div时消失。​</p>

```
$('.abc').mouseenter(function(e) {
    $('#def').show(200);
});
$('#container').mouseleave(function(e){
    $('#def').hide(200);
}); 
```

你可以[在这里查看](http://jsfiddle.net/EpV87/7/)。

# javascript - SCRIPT438：对象不支持属性或方法 IE

> ID：13975922
> 
> 赞同：63
> 
> 时间：2012-12-20T15:57:27.127
> 
> 标签：javascript, internet-explorer

我的应用程序中有一个选项，用户可以在其中停用他们的个人资料。只有管​​理员可以再次激活它们。

我有一个`ActivateProfile`有两种方法的类

*   `userExist(userName)`检查具有该用户名的用户是否存在以及他/她的个人资料是否已停用
*   并`activateAccountByUser(userName)`再次激活用户的个人资料

我在输入类型按钮的单击事件上调用 JavaScript 函数。此代码在 Chrome 和 Mozilla 上运行良好，但在 Internet Explorer 上出现此错误：

> SCRIPT438：对象不支持属性或方法 userExist

```
function activateProf() {        
   var userName=document.getElementById("userName").value;

   if (userName == "") {
      alert("Полето е задолжително");
   } else {
      alert(userName + "1");
      ActivateProfile.userExist(userName, { callback:function(exist) {
         if (userName) {
            ActivateProfile.activateAccountByUser(userName);
            alert("User is activated");
         } else {
            alert("User does not exist");
         }
      }});
   }
} 
```

这是激活配置文件类的代码

```
 public void activateAccountByUser(String userName) {
    try {
        Connection c = DBComm.getInstance().getConnection();
        Statement s = c.createStatement();
        ResultSet set = s.executeQuery("select * from accounts where userName = '" + userName + "' and isauthorized='2'");

        if (set.next()) {
            Statement st = c.createStatement();
            st.executeUpdate("update accounts set isauthorized='1' where userName='" + userName                    + "' and isauthorized='2'");
        }
        s.close();
        c.close();
    } catch (Exception ex) {
        java.util.logging.Logger.getLogger(ActivateProfile.class.getName()).log(Level.SEVERE, null, ex);
    }
}

public boolean userExist(String userName) throws SQLException {
    //true exist
    //false does not exist
    boolean existEmbg = false;

    try {
        Connection c = DBComm.getInstance().getConnection();
        Statement s = c.createStatement();
        ResultSet set = s.executeQuery("select * from accounts where userName = '" + userName + "' and isauthorized='2'");

        if (set.next()) {
            existEmbg = true;
        } else {
            existEmbg = false;
        }
        s.close();
        c.close();
    } catch (Exception ex) {
       java.util.logging.Logger.getLogger(ActivateProfile.class.getName()).log(Level.SEVERE, null, ex);
    }
    return existEmbg;
} 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-12-22T13:07:18.873

在网上搜索了几天后，我发现当 html 元素 id 与 javascript 函数中的某个变量具有相同的 id 时，通常会发生此错误。更改其中一个的名称后，我的代码运行良好。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-28T14:11:11.047

这是使用 JavaScript 命名空间的 Web 应用程序中的常见问题。在这种情况下，99.9% 的问题是 IE 无法将当前命名空间中的方法绑定到“this”关键字。

例如，如果我有带有方法“isAwesome”的 JS 命名空间“StackOverflow”。通常，如果您在“StackOverflow”命名空间中，您可以使用以下语法调用“isAwesome”方法：

```
this.isAwesome(); 
```

Chrome、Firefox 和 Opera 很乐意接受这种语法。另一方面，IE不会。因此，使用 JS 命名空间时最安全的选择是始终使用实际命名空间作为前缀。啦啦：

```
StackOverflow.isAwesome(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-04T12:33:07.947

我为对应的javascript中的所有变量添加了var。这解决了IE中的问题。

以前的代码

```
billableStatus = 1 ;
var classStr = $(this).attr("id").split("_");  
date = currentWeekDates[classStr[2]]; // Required    

activityNameId = "initialRows_" + classStr[1] + "_projectActivityName";
activityId = $("#"+activityNameId).val();        

var projectNameId = "initialRows_" + classStr[1] + "_projectName" ;
projectName = $("#"+projectNameId).val();        

var timeshitEntryId = "initialRows_"+classStr[1]+"_"+classStr[2];     
timeshitEntry = $("#"+timeshitEntryId).val(); 
```

新代码

```
var billableStatus = 1 ;
var classStr = $(this).attr("id").split("_");  
var date = currentWeekDates[classStr[2]]; // Required    

var activityNameId = "initialRows_" + classStr[1] + "_projectActivityName";
var activityId = $("#"+activityNameId).val();        

var projectNameId = "initialRows_" + classStr[1] + "_projectName" ;
var projectName = $("#"+projectNameId).val();        

var timeshitEntryId = "initialRows_"+classStr[1]+"_"+classStr[2];     
var timeshitEntry = $("#"+timeshitEntryId).val(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-15T21:37:24.463

我的问题是`type="application/javascript"`在 jQuery 的`<script>`标签上。IE8不喜欢这样！如果您的网页是 HTML5，您甚至不需要声明类型，否则请使用`type="text/javascript"`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-27T12:59:06.580

就我而言，我有这样的代码：

```
function.call(context, arg); 
```

我在 IE 下收到错误消息

> TypeError：对象不支持属性或方法“错误”

在“函数”的主体中，我有“console.error”，当你的控制台关闭时，控制台对象是未定义的。我通过检查是否定义了 console 和 console.error 来解决这个问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-15T11:24:19.207

我忘了`var`在我的项目变量上使用

不正确的代码：

```
var itemCreateInfo = new SP.ListItemCreationInformation();
item = list.addItem(itemCreateInfo); 
item.set_item('Title', 'Haytham - Oil Eng'); 
```

正确代码：

```
var itemCreateInfo = new SP.ListItemCreationInformation();
var item = list.addItem(itemCreateInfo);  
item.set_item('Title', 'Haytham - Oil Eng'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-15T18:22:17.990

在所有脚本标签中实施`"use strict"`以发现不一致并修复潜在的未作用域变量！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-26T23:18:15.247

我们能够通过将 Object.Assign polyfill 添加到正在导入的文件并抛出错误来解决这个问题。我们将使它成为最高的导入，这样它就可以被堆栈中的其他代码调用。

`import "mdn-polyfills/Object.assign";`

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-11-18T11:11:06.263

由于 jquery 版本不正确，可能会出现此问题。像 1.4 等不支持 done 方法

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-12-20T19:01:23.707

我有以下

```
document.getElementById("search-button") != null 
```

它在除 ie8 之外的所有浏览器中都运行良好。（我没有检查ie6或ie7）

我把它改成

```
document.getElementById("searchBtn") != null 
```

并更新了我的 html 中字段的 id 属性，现在它可以在 ie8 中使用

# javascript - 突出显示选定文本 javascript 函数的问题

> ID：13975923
> 
> 赞同：1
> 
> 时间：2012-12-20T15:57:29.173
> 
> 标签：javascript, jquery, range, getselection

我正在制作一个简单的网络应用程序，让用户选择文本并以黄色（或任何颜色，无关紧要）突出显示它。这是我到目前为止所拥有的：

```
 function replaceSelectedText() {
            var sel, range;
            var replacementText, spanTag;
            if (window.getSelection) {
                replacementText = window.getSelection().toString();

                spanTag = document.createElement("span");
                spanTag.className = "highlighted";
                spanTag.appendChild(replacementText);

                sel = window.getSelection();
                if (sel.rangeCount) {
                    range = sel.getRangeAt(0);
                    range.deleteContents();
                    //range.insertNode(document.createTextNode(replacementText));
                    range.insertNode(spanTag);
                }
            } else if (document.selection && document.selection.createRange) {
                replacementText = '<span class="highlighted">' + document.selection.createRange().text + '</span>';
                range = document.selection.createRange();
                range.text = replacementText;
            }
        }

        document.onmouseup = replaceSelectedText;
        document.onkeyup = replaceSelectedText; 
```

我让它在突出显示所选短语的地方工作，但我只是在正文的 HTML 上使用 replace() 调用，所以如果用户选择了像“a”这样的常用词，“a”的第一次出现将被突出显示比他们点击的那个。

到目前为止，我的代码是否正确，还是应该继续使用 replace() 调用？替换似乎可以工作，但我似乎无法获得所选单词出现位置的数组索引，并且范围似乎没有返回非常有用的值。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:05:55.057

您可以通过 获取对您所在的特定节点的引用`getSelection().baseNode`。它还为您提供了选择的索引和长度，因此您可以替换确切的文本而不是进行替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T16:12:09.590

除了您还应该获得光标的位置来替换您可能应该使用的选择之外，我认为这种方法没有任何问题，就像这篇文章中的情况一样：

```
$("#myTextInput").bind("keydown keypress mousemove", function() {
  alert("Current position: " + $(this).caret().start);
}); 
```

[jQuery：在没有浏览器特定代码的情况下获取输入中文本的光标位置？](https://stackoverflow.com/questions/4085312/jquery-get-the-cursor-position-of-text-in-input-without-browser-specific-code)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T16:11:59.040

使用[http://code.google.com/p/rangy/](http://code.google.com/p/rangy/)

用以下代码替换鼠标上的选定文本添加事件

```
 var el = $("<span></span>");
el.text(rangy.getSelection().getRangeAt(0).toString());
 rangy.getSelection().getRangeAt(0).deleteContents();
 rangy.getSelection().getRangeAt(0).insertNode(el.get(0));
 rangy.getSelection().getRangeAt(0).getSelection().setSingleRange(range); 
```

# php - 在钩子调用之间传递 PHP Singleton 中的数据

> ID：13975925
> 
> 赞同：4
> 
> 时间：2012-12-20T15:57:34.940
> 
> 标签：php, drupal-7

我创建了一个简单的 Drupal 模块，它使用单例设计模式来保存钩子调用之间的数据。但是，这似乎并没有像我希望的那样保存数据。

此外，这似乎是 PHP 理解问题而不是 Drupal，但如果有人有 Drupal 提示，这就是我正在做的事情。

**单例设置**

```
class TempStore {
  private $_fileName;
  public function getFileName() { return $_fileName; }
  public function setFileName($fileName) { $_fileName = $fileName; }

  function __construct() {

  }
}

function MYMODULE_data() {
  static $data;

  if (!isset($data))
    $data = new TempStore();

  return $data;
} 
```

即使在相同的功能中也可以看到问题。

```
function MYMODULE_file_insert($file) {
  $token = $file->timestamp;
  MYMODULE_data()->setFileName($token);

  // error message: Notice: Undefined variable: _fileName in TempStore->getFileName()  
  $checkVal = MYMODULE_data()->getFileName();
} 
```

错误信息是

> 注意：未定义变量：TempStore->getFileName() 中的_fileName

由于这发生在同一个函数调用中，我认为这是我对 PHP 如何处理此类事情的理解失败，并且与 Drupal 没有真正的关系。

有人能看出什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T16:06:31.000

这不是 C++：

```
public function getFileName() { return $_fileName; }
public function setFileName($fileName) { $_fileName = $fileName; } 
```

应该：

```
public function getFileName() { return $this->_fileName; }
public function setFileName($fileName) { $this->_fileName = $fileName; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T16:07:01.193

`$this`您应该使用关键字引用您的字段：

```
 public function getFileName() { return $this->_fileName; } 
```

当然，在二传手中：

```
public function setFileName($fileName) { $this->_fileName = $fileName; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T16:12:05.033

您需要`$_fileName`使用`$this->_fileName`. 与您的问题无关，但您应该在函数外部使用该方法的类中声明您的静态`$data`对象- 然后在测试、设置和返回该变量时引用该变量。`private static $data``self::$data`

# ruby - Paymill：如何在测试时模拟失败的支付？

> ID：13975931
> 
> 赞同：8
> 
> 时间：2012-12-20T15:57:51.560
> 
> 标签：ruby, payment-gateway, payment, stripe-payments, paymill

**背景**

*   [使用Paymill 的订阅计费](https://www.paymill.com/en-gb/documentation-3/reference/api-reference/index.html#document-subscriptions)功能开发应用程序。
*   利用[Ruby 包装器](https://github.com/dkd/paymill-ruby)，我创建了一个`PaymentProvider`类和规范，如下所示。

**问题**

如何使测试付款失败？（例如卡被拒绝，或卡在未来的订阅付款中过期）

[Stripe 可以让我使用特殊的卡号来执行此操作，](https://stripe.com/docs/testing#how-do-i-test-specific-error-codes)但 Paymill 似乎没有任何此类文档*（英文）*。

* * *

**payment_provider.rb**

```
class PaymentProvider
  Paymill.api_key = ENV['PAYMILL_PRIVATE_KEY']

  def self.start_new_subscription(email, description, token)
    offer = Paymill::Offer.find(ENV['PAYMILL_OFFER_ID'])
    client = Paymill::Client.create(email: email, description: description)
    payment = Paymill::Payment.create(token: token, client: client.id)
    subscription = Paymill::Subscription.create(client: client.id, offer: offer.id, payment: payment.id)
    subscription.id
  end
end 
```

* * *

**payment_provider_spec.rb**

```
require 'spec_helper'

describe PaymentProvider do

  describe "#start_new_subscription" do
    it "returns a subscription id, starting 'sub_' when successful" do
      email = "mike@mike.com"
      description = "me"
      token = get_payment_token
      subscription_id = PaymentProvider.start_new_subscription(email, description, token)
      expect(subscription_id[0,4]).to eq('sub_')
    end
  end

  def get_payment_token
    # Simulate the JavaScript bridge we would use in production
    params = {
      'transaction.mode'        => 'CONNECTOR_TEST',
      'channel.id'              => ENV['PAYMILL_PUBLIC_KEY'],
      'jsonPFunction'           => 'any_string',
      'account.number'          => '5500000000000004',
      'account.expiry.month'    => 3.years.from_now.month,
      'account.expiry.year'     => 3.years.from_now.year,
      'account.verification'    => '111'
      #'presentation.amount3D'   => BigDecimal('10.00'),
      #'presentation.currency3D' => 'GBP'
    }
    http = Net::HTTP.new('test-token.paymill.de', 443)
    http.use_ssl = true
    response = http.get url_query_string(params)
    response.body.scan(/tok_\w*\b/).first # Use a regex to pull the token from the (not-quite-JSON) response
  end

  def url_query_string(hash)
    "/?" << URI.escape(hash.collect{|k,v| "#{k}=#{v}"}.join('&'))
  end

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T16:15:16.903

截至今天，没有特殊的信用卡号码来模拟这些问题。但是，由于社区的需求，目前正在积压中实施。我建议向支持人员发送电子邮件，以表明对此功能的兴趣。请求越多，实现该功能的速度就越快。

编辑：PAYMILL 现在提供一个特殊的万事达卡号码，如果使用到期月份和年份的某种组合，它将失败。例如，如果到期日期为 02/2020，则卡 5105105105105100 将由于 RESPONSE_BACKEND_BLACKLISTED 而失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T07:46:09.950

您可以做的是使用字符串而不是数字作为验证值。

```
'account.verification'    => 'abc' 
```

据我所知，即使使用该`CONNECTOR_TEST`模式，这也会导致付款失败。

# c# - 如果线程不修改该元素，是否可以从另一个线程访问 UI 元素？

> ID：13975938
> 
> 赞同：3
> 
> 时间：2012-12-20T15:58:10.230
> 
> 标签：c#, winforms, multithreading

假设在实例化表单/控件/元素（通常是主线程）的线程中运行的代码不会同时修改/访问该元素，是否有可能：

1.  获取 TextBox 的 Text 属性。

2.  枚举一个 ListView。

3.  订阅 Form 的 Closing 事件。（知道钩子将从实例化该表单的线程中调用）

我已经尝试了所有 3 个程序，并且该程序似乎没有抱怨它。我一直认为您必须调用任何想要远程触摸任何与 UI 相关（读取或写入）的调用。

我非常清楚为什么在修改元素时需要使用 IsInvokeRequired/Invoke 模式，但我不明白为什么访问属性/事件会导致任何问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T16:01:38.310

这绝对是可能的，但是，它可能会导致意外的行为。此外，还需要考虑其他与线程相关的错误，例如竞争条件/死锁，请参阅[托管线程最佳实践](http://msdn.microsoft.com/en-us/library/1c9txz50.aspx)。

为了安全起见，我总是坚持在 UI 线程上访问 UI。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T16:02:15.687

您在做什么来确保 UI 线程在您读取控件时不会修改控件？编组到 UI 线程的全部原因是您无需担心这种情况。特别是枚举列表框将是最容易破坏的，因为它将花费最长的时间（这为竞争条件创建了最大的窗口）。您应该为所有这 3 件事编组到 UI 线程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T20:52:53.787

这是不安全的。当您从另一个线程读取控件时，UI 线程可以（并且可能会）更改控件的状态。您的读取可能会使控件处于半生不熟的状态。它现在可能看起来正在工作，但迟早会失败......可能无法预测和壮观。

不，您可能不需要使用 Invoke 模式。坦率地说……这种模式通常是最糟糕的选择。通常最好让您的工作线程完成繁重的工作，然后通过队列将新数据或进度信息发送到 UI 线程，并让 UI 线程通过计时器来获取这些信息。这有几个优点。

*   消除了昂贵的`Invoke`操作`BeginInvoke`。
*   UI 线程可以决定何时以及多久使用新数据更新自己，而不是让工作线程决定这一点。
*   您可以在工作线程上获得更多吞吐量，因为它不必等待`Invoke`返回。
*   不会像`BeginInvoke`.
*   它将 UI 和工作线程交互解耦。

您将需要枚举`ListView`并构建一个单独的数据结构，然后工作线程可以安全地访问该数据结构。如果`ListView`包含很多项目，请考虑与控件一起维护一个单独的集合。这样一来，您就可以在更长的时间内分散处理数据的损失，在这段时间内，它可能不会被太多人注意到。毕竟，我们不希望复制操作冻结 UI 线程，否则用户会注意到。A`ConcurrentBag`等可能是一个不错的选择，因为它可以在工作线程读取它时由 UI 线程安全地修改。

# xcode - 界面生成器中未显示自动调整掩码功能？

> ID：13975955
> 
> 赞同：4
> 
> 时间：2012-12-20T15:59:23.540
> 
> 标签：xcode, interface-builder, autoresizingmask

我想处理 autoresizingmasks，但由于某种原因，我无法显示对话。我的 IB 的尺寸检查器如下所示：

![在此处输入图像描述](../Images/c21fbaf660b98d0249b8abcca65b5e1d.png)

当我单击另一个检查器（属性、连接等）时，自动调整掩码对话框/检查器会立即出现（时间不足以让我截取屏幕截图），只会被我单击的任何检查器替换. 我假设我有一些设置或其他切换需要取消切换，但是在 Xcode 周围戳一下并没有发现它，而且我在 Xcode 的其他问题中也没有发现这个问题。显然是一个非常基本的问题，但有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T16:43:54.373

File Inspector -> Interface Builder Document -> Use Autolayout[UNCHECK]

Autolayout 是一个使用约束的新 OSX7/iOS6 功能（正如您从该检查器中看到的那样）
- 它取代了 Autoresizing 遮罩，但仅适用于 OSX7+ 和 iOS6+

# git - Git 在合并期间覆盖文件 - 不显示冲突

> ID：13975956
> 
> 赞同：9
> 
> 时间：2012-12-20T15:59:34.100
> 
> 标签：git, github, git-merge

> **可能重复：**
> [Git - 如何在所选文件上强制合并冲突和手动合并](https://stackoverflow.com/questions/5074452/git-how-to-force-merge-conflict-and-manual-merge-on-selected-file)

我们正在尝试在两个分支之间进行合并：稳定代码和新功能。

合并功能对我们不起作用：它有时会显示冲突，但通常只是覆盖文件而不告诉我们任何冲突，可能是它认为正确的版本。

是否可以阻止这种覆盖，以便向我们显示所有冲突的行？我们尝试使用 git diff 来了解它的广泛性，但是有几千行，因为我们在稳定分支上进行了相当广泛的调试......所以如果可能的话，我们真的需要让合并功能正常工作.

所以我们的情况有点混乱，非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:45:49.567

您可以做的是将合并运行为：

```
git merge --no-commit --no-ff your-branch 
```

这不会创建合并提交或快进主文件，而只是将合并的文件放在您的工作目录中。您可以检查更改。一旦你满意，你可以做一个`git commit`或恢复`git reset --hard`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T16:37:23.937

由于我不知道如何重现您的问题，我需要做一些猜测。

根据我的经验，通常可以通过在合并之前执行 a 来减少围绕 git merge 的混淆`git pull --rebase`。这会从远程获取最新更改，并将您的更改合并到它们之上。但是，如果您打算将更改合并到较早的提交上，请不要这样做。无论如何，在执行之前记下最新的提交 ID `pull`，以便在出现问题时可以恢复到它。

现在来到合并本身，您可以尝试使用`git merge --no-ff --no-commit`来防止合并被提交。我不知道这是否会为您提供您希望看到的完整冲突报告，但它允许您检查合并结果（如模拟模式）。如果您不喜欢结果，您可以使用`git reset --hard`.

# php - 如果使用 exit() 完全停止脚本，则从嵌套中退出 foreach 循环

> ID：13975959
> 
> 赞同：0
> 
> 时间：2012-12-20T15:59:42.347
> 
> 标签：php, html, loops, foreach

出于学习原因，我正在构建一个 wordpress 插件，这是有问题的代码：

```
// display latest facebook posts
// Init a cURL resource
$ch = curl_init("https://www.facebook.com/feeds/page.php?format=rss20&id=133869316660964");
curl_setopt( $ch, CURLOPT_POST, false );
curl_setopt( $ch, CURLOPT_FOLLOWLOCATION, true );
// Make facebook think it is being accessed by a browser to avoid compatability issues
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.7.12) Gecko/20050915 Firefox/1.0.7");
curl_setopt( $ch, CURLOPT_HEADER, false );
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
$data = curl_exec( $ch );

// instanciate a new xml element
$fb = new SimpleXMLElement($data);
$i = 0; // set the counter for the foreach loop to 0

echo "<ul>"; // begin the UL

foreach ($fb->channel->item as $item) {
    // foreach item within the tree perform this loop twice
    $link = $item->link; // set the link address
    $post = $item->description; // set the post data
    echo "<li>" . $post, ' :::::: ', '<a href="' . 
    $link . '">' . $link, PHP_EOL . "</a></li>";
    $i++;
    if($i == 2){
        exit();
    }
}
echo "</ul>"; 
```

但是，当我检查 HTML 时，我看到了这个：（来自最底部的快速片段）

```
846656&id=133869316660964
</a></li> 
```

这是 foreach 循环的最后一部分，其中 $i =< 2 所以使用 exit 似乎完全停止了脚本，我这样说是正确的还是有另一个错误导致了这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T16:01:41.320

`exit();`停止 php 执行。尝试使用`break;`退出循环

[PHP 中断](http://php.net/manual/en/control-structures.break.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T16:01:57.297

使用**中断**而不**退出**

Exit 终止整个 php 脚本的执行

# ruby-on-rails - 抑制rails3中的link_to默认操作

> ID：13975961
> 
> 赞同：0
> 
> 时间：2012-12-20T15:59:53.447
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我阅读了 ruby​​ 指南的这一部分：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

把东西塞进 CRUD 并不总是理想的。我有一个案例，我希望在调查通过并重新验证所有数据确实已填写后有一个最终的“提交”按钮（因为您可以分部分进行调查，它将保存并验证到数据库），但对于最终提交，必须填写所有内容。所以我提交link_to 我想在控制器中调用一个方法：

在我看来：

```
<%= link_to "Submit", :action => 'final_verify', :document_id => @document.id  %> 
```

现在我使用 wicked 作为向导控制器，所以我必须创建一个匹配的路由，这样这个调用才会起作用：

路线.rb：

```
 #match route so I can call from page_controller.rb
  match ':controller/:action/:id' 
```

所以这有效，它运行等，但问题是如果 final_verify 中有错误我想重定向到特定页面，我是否为此创建路由？还是我只需要修改redirect_to 才能正确执行此操作？我似乎无法找出最好/正确的方法来做到这一点？

我不相信我的匹配路线甚至是正确的方法，只是让 link_to 调用最终验证并转到有问题的页面（如果有），以便用户可以完成所需的部分并尝试再次提交。（部分让我感到困惑的是如何使用 wicked gem [https://github.com/schneems/wicked](https://github.com/schneems/wicked)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:19:30.330

您创建的路由实际上是一个遗留的“野生控制器”路由（只有 action 和 id 不是可选的），它将匹配任何控制器、action 和 id。如果您正在开发 RESTful 应用程序，则不建议这样做。

如果您为特定目的创建命名路由会更好：

```
match 'submit/:document_id' => 'your_controller#final_verify', :as => :final_verify 
```

第一部分是可用的 url，中间部分是应该调用的控制器和动作，第三部分是路由名称，它将为您提供视图和控制器中的`final_verify_path`和`final_verify_url`方法。因此，您的 link_to 调用将如下所示：

```
<%= link_to "Submit", final_verify_path(:document_id => @document.id)  %> 
```

要在提交不完整的调查后显示错误，您基本上有 2 个选项：

*   根据您的操作呈现模板
*   重定向到不同的操作

似乎您想做第二个，因此您需要`redirect_to`在控制器中执行一个操作来显示错误，例如在正确的向导页面上。如果您保持原有路线不变，您可能无需执行任何其他操作。但是如果你选择使用命名路由，你只需要定义另一个路由并在重定向中使用它。

# ssis - DTUTIL 导入后 SSIS 包不可见

> ID：13975963
> 
> 赞同：1
> 
> 时间：2012-12-20T16:00:05.270
> 
> 标签：ssis, sql-server-2008-r2

我可以通过 DTUTIL 导入将包导入集成服务，但是当我访问集成服务时，我找不到有问题的包。

使用的命令如下：

```
 DTUTIL /FILE C:\temp\<PackageFile>.dtsx /DestServer        <servername>                        /copy SQL;<Packagename>/DestU <Username> /DestP <Password> 
```

当我从 SQL 管理工作室集成服务导入 package.dtsx 时，将成功导入并呈现包。

我不确定我们是否需要包含额外的参数来指定 msdb 的根（root）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:57:51.170

您将包上传到根目录的语法是正确的。尝试运行查询以确保包按预期存在 - [SSIS 包查询](http://billfellows.blogspot.com/2011/08/ssis-package-query.html)

这应该构建一个结果集，显示您在`<servername>`实例中拥有的所有包。如果这些都显示出来，那就是摆弄集成服务服务的问题。这个盒子上有多个实例吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:50:26.553

通过在引号中指定路径解决了该问题，如下所示：

```
 /COPY SQL;\<Package> instead of /COPY SQL; <Package> 
```

这样可行

# google-apps-script - 通过电子邮件接收 Google 文档表单数据

> ID：13975965
> 
> 赞同：2
> 
> 时间：2012-12-20T16:00:04.693
> 
> 标签：google-apps-script, google-forms

我使用了在网上找到的多个脚本，并且遇到了同样的问题。我有几个谷歌文档表单，我需要通过电子邮件接收提交的数据（不仅仅是表单已提交和相应电子表格已更新的通知）。该脚本可以正常工作，但由于某种原因已停止：

```
function sendFormByEmail(e) 
{    
// Remember to replace XYZ with your own email address
var email = "info.wchs@gmail.com"; 

// Optional but change the following variable
// to have a custom subject for Google Docs emails
var subject = "Google Docs Form Submitted";  

// The variable e holds all the form values in an array.
// Loop through the array and append values to the body.

var s = SpreadsheetApp.getActiveSheet();
var headers = s.getRange(1,1,1,s.getLastColumn()).getValues()[0];    
var message = "";    

// Credit to Henrique Abreu for fixing the sort order

for(var i in headers)
  message += headers[i] + ' = '+ e.namedValues[headers[i]].toString() + "\n\n"; 

// This is the MailApp service of Google Apps Script
// that sends the email. You can also use GmailApp here.

MailApp.sendEmail(email, subject, message); 

// By Amit Agarwal - www.labnol.org
} 
```

我收到一个错误：TypeError：无法从未定义中读取属性“namedValues”。（第 20 行）

我什么都没做，现在我找不到任何表单提交到电子邮件脚本来工作。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-04T12:36:34.227

这可能是因为某些列中的空白数据。我建议删除/删除表单的所有现有触发器，然后使用下面的代码（我提到了 Amit Agarwal 的代码 - www.labnol.org）

```
function Initialize() {

  var triggers = ScriptApp.getProjectTriggers();

  for(var i in triggers) {
    ScriptApp.deleteTrigger(triggers[i]);
  }

  ScriptApp.newTrigger("SendGoogleForm")
  .forSpreadsheet(SpreadsheetApp.getActiveSpreadsheet())
  .onFormSubmit()
  .create();

}

function SendGoogleForm(e) 
{  
  // The variable e holds all the form values in an array.
  // Loop through the array and append values to the body.
  try 
  {      
    // You may replace this with another email address
    var email = "xyw@mail.com";

    // Optional but change the following variable
    // to have a custom subject for Google Form email notifications
    var subject = "Training Application Form Submitted";  

    var s = SpreadsheetApp.getActiveSheet();
    var columns = s.getRange(1,1,1,s.getLastColumn()).getValues()[0];    
    var message = "";    

    // Only include form fields that are not blank
    for ( var i in columns ) 
    {
      var header = columns[i];
      if ( e.namedValues[header] && (e.namedValues[header] != "") ) 
      {
        message += header + ' :: '+ e.namedValues[header] + "\n\n"; 
      }
    }
    // This is the MailApp service of Google Apps Script
    // that sends the email. You can also use GmailApp for HTML Mail.

    MailApp.sendEmail(email, subject, message); 

  } 
  catch (e) 
  {
    Logger.log(e.toString());
  }

} 
```

然后只需保存，运行初始化函数，接受权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:45:56.967

您必须在那里进行一些调试，插入测试用例，直到您解决问题，例如，如果您收到`line 20`错误，请在访问它之前进行`namedValues`检查，如下所示：`e`

```
for(var i in headers)
    if (e && e.namedValues)
       message += headers[i] + ' = '+ e.namedValues[headers[i]].toString() + "\n\n"; 
```

# p2p - Chord 协议：如果节点已满怎么办？

> ID：13975967
> 
> 赞同：2
> 
> 时间：2012-12-20T16:00:06.270
> 
> 标签：p2p, chord

如果节点已满，即如果其磁盘没有剩余可用空间，在 Chord 网络中应该发生什么？

我应该/我该如何处理？

# objective-c - 无法使用 XCode 4.5 覆盖属性获取器

> ID：13975968
> 
> 赞同：6
> 
> 时间：2012-12-20T16:00:10.550
> 
> 标签：objective-c, ios, xcode4.5

将一些旧示例代码与 Xcode 4.5 一起使用时，我遇到了一些问题。

在我的代码中，我定义了以下属性

```
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel; 
```

然后我有以下访问器方法：

```
- (NSManagedObjectModel *)managedObjectModel {
    if (_managedObjectModel != nil)
    {
        return _managedObjectModel;
    }

    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"MyPrototype" 
                                                   withExtension:@"momd"];
    _managedObjectModel = [[NSManagedObjectModel alloc] 
                                          initWithContentsOfURL:modelURL];
    return _managedObjectModel;
} 
```

问题是 Xcode 会抛出多个错误，因为它无法“看到” `_managedObjectModel`。如果我将访问器的名称从 更改`managedObjectModel`为`managedObjectModel2`，一切正常。我猜这个问题与`Xcode 4.5`自动属性合成有关，但我不知道我应该怎么做才能避免这个问题。有什么建议么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T16:02:35.127

如果 Clang 没有任何方法可以生成，它不会自动为您合成实例变量。在这种情况下，您请求了一个只读属性，因此没有 setter，而您提供了 getter。您可以`@synthesize managedObjectModel=_managedObjectModel`自己声明实例变量。

# c# - 使用自动字段映射快速读取 XML 文件并保存到磁盘上的表中

> ID：13975973
> 
> 赞同：1
> 
> 时间：2012-12-20T16:00:29.227
> 
> 标签：c#, xml, datatable

如何使用自动字段映射（MS Access 或 SQL server 2012）快速读取 XML 文件并保存到磁盘上的强类型表。

**想法/想要：**

1.  使用 c# 4.0 和 .NET 4.0 以及 SQL server 2012 和 MS Access
2.  根据从 XML 到表的自动字段映射（字段名称和字段类型）导入 xml 数据。我有 XSD。只需添加新行没有键匹配。
3.  可以在需要时覆盖字段和类型映射（尚未决定是硬编码还是使用模板/映射文件，所以我不必重新编译）
4.  如果需要，我可以复制字段映射（1 个 xml 字段到多个表字段）
5.  代码/设置的低可维护性比导入/转换速度更重要——但如果需要，很高兴知道所有选项
6.  第三方解决方案可能是可以接受的

**这种方法会足够快还是有更好的方法？**

第 1 步：将 xml 读入一个类（c# 类是从 XSD.exe 工具自动生成的）

```
ser = new XmlSerializer(typeof(MyTypeData));
MyTypeData data;
using (XmlReader reader = XmlReader.Create(XMLFullPath))
{
  data = (MyTypeData)ser.Deserialize(reader);
} 
```

第 2 步：以某种方式使用泛型将类保存到强类型 DataSet DataTable（内存表）（如下面的方法）

```
public static DataTable CreateEmptyDataTable(MyTypeData data)
// Creates empty DataTable
{
    DataTable dt = new DataTable();

    foreach (PropertyInfo info in data.GetProperties())
    {
        dt.Columns.Add(new DataColumn(info.Name, info.PropertyType));   
    }

    return dt;
} 
```

第 3 步：在磁盘上填充表，其中 DataTable 字段名称与字段类型相同的 XML 名称相同。跳过不在表中的 xml 元素名称。只需添加新行，暂时不用担心键匹配。以后可以添加基于键匹配的更新行。

第 4 步：将自定义源添加到 dest 字段映射：（如何 - 最好的方法是什么？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:19:40.730

如果您有来自 xml 文件的 xsd 文件，您可能想尝试 xsd2code，它是一个 codeplex 项目。[见这里](http://xsd2code.codeplex.com/)。这使得代码中的类基于 Xsd 格式。

对我来说，这让我可以非常轻松地创建 xml 代码，而且问题很少。当 xml 方案更改时，您只需更新代码即可生成新类。

非常漂亮和整洁，不过，这当然是个人喜好。

# javascript - JavaScript：仅在不是谷歌浏览器时才执行代码

> ID：13975976
> 
> 赞同：6
> 
> 时间：2012-12-20T16:00:36.973
> 
> 标签：javascript, jquery, html, css, google-chrome

> **可能重复：**
> [使用 Javascript 检测 Google Chrome 的基于安全功能的方法？](https://stackoverflow.com/questions/81099/safe-feature-based-way-for-detecting-google-chrome-with-javascript)
> [使用Javascript检测谷歌浏览器切换CSS](https://stackoverflow.com/questions/10251149/using-javascript-to-detect-google-chrome-to-switch-css)

是否有我可以与 javascript 一起使用的语句，仅在用户使用谷歌浏览器以外***的浏览器时才执行代码？***

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-20T16:03:33.967

```
var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;

if(!is_chrome)
{
//do stuff
} 
```

编辑：不确定这将如何影响 chrome 移动浏览器。

**第二次编辑：这会在 Microsoft Edge 中引发误报，以下代码是更新版本：**

```
var is_chrome = (typeof window.chrome === "object" && navigator.appVersion.indexOf('Edge') === -1) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-20T16:03:00.337

当然，我有时会使用这个 javascript 来检查浏览器支持。

```
var IE6 = false /*@cc_on || @_jscript_version < 5.7 @*/
var IE7 = (document.all && !window.opera && window.XMLHttpRequest && navigator.userAgent.toString().toLowerCase().indexOf('Trident/4.0') == -1) ? true : false;
var IE8 = (navigator.userAgent.toString().toLowerCase().indexOf('trident/4.0') != -1);
var IE9 = (navigator.userAgent.toString().toLowerCase().indexOf('trident/5.0') != -1);
var SAFARI = (navigator.userAgent.toString().toLowerCase().indexOf("safari") != -1) && (navigator.userAgent.toString().toLowerCase().indexOf("chrome") == -1);
var FIREFOX = (navigator.userAgent.toString().toLowerCase().indexOf("firefox") != -1);
var CHROME = (navigator.userAgent.toString().toLowerCase().indexOf("chrome") != -1);
var ANDROID= (navigator.appVersion.toString().indexOf("Android", 0)!=-1)
var MOBILE_SAFARI = ((navigator.userAgent.toString().toLowerCase().indexOf("iphone")!=-1) || (navigator.userAgent.toString().toLowerCase().indexOf("ipod")!=-1) || (navigator.userAgent.toString().toLowerCase().indexOf("ipad")!=-1)) ? true : false; 
```

在您的 javascript 中使用带有 if 语句的变量。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T16:08:13.013

`window.chrome`在不依赖用户代理字符串的情况下，检查属性是检测 Chrome 的一种相当不错的方法：

```
if(typeof window.chrome != "object") {
    // not Chrome
} else {
    // it's Chrome (or some fork of Chromium)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T16:12:20.467

虽然这个问题的其他答案是有效的，但我会警告您**不要**依赖“浏览器嗅探”，除非绝对必要。查看：[http ://www.sitepoint.com/why-browser-sniffing-stinks/](http://www.sitepoint.com/why-browser-sniffing-stinks/)

相反，您可以使用[Modernizr](http://modernizr.com/)等方便的工具来检测客户端是否可以支持单个功能。

# php - 在循环中使用redbean来存储数据

> ID：13975977
> 
> 赞同：0
> 
> 时间：2012-12-20T16:00:41.040
> 
> 标签：php, mysql, loops, redbean, recipe

我正在使用 redbean 创建我的网站，并且我目前正在为用户实现食谱上传功能。

在“上传食谱”表单中，我使用 javascript 将 4 个输入字段动态添加在一起（数量、测量、成分、注释）。但是，一旦用户单击提交，我不知道如何使用 redbean 来存储这些。有人可以提出一些建议吗？我是否必须使用循环来遍历添加的每个字段并将其存储到数据库中？

这是我正在使用的代码：

```
var count = 0;

$(function(addfield){
    $('p#add_field').click(function(){  
        count += 1;  
        $('#container').append(   
            '<strong>Ingredient ' + count + '</strong><br />'    
                + '`<`input id="field_' + count + 'name="amount" type="text" placeholder="Amount" `/>`'     +  
                 '<input id="field_' + count + 'name="measurement" type="text" placeholder="Measurement" `/>`'+   
                 '<input id="field_' + count + 'name="ingredient" type="text" placeholder="Ingredient" `/>`' +  
                 '<input id="field_' + count + 'name="notes" type="text" placeholder="Notes" `/>`' +   
        );  
    });  
}); 
```

这是调用该函数的链接：

```
<p id="add_field"><a href="#addfield"><span>&raquo; Click to add ingredient</span></a></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:18:39.870

您只需将代码放入循环中：

```
for($a=0;$a<4;$a++){
    $recipe=R::dispense('recipe');
    $recipe->import($_POST['recipe_'.$a]);//You need to configure this portion
    //OR
    $recipe->title=$_POST['recipe'][$a]['title'];
    R::store($recipe);
} 
```

# php - HTML 模板文件中的 PHP - Smarty 引擎

> ID：13975978
> 
> 赞同：2
> 
> 时间：2012-12-20T16:00:42.447
> 
> 标签：php, syntax, smarty

我目前正在使用 Smarty PHP 引擎。现在我想在模板文件中添加一点 PHP 代码，如下所示：

```
{php}echo "asdf";{/php} 
```

但是当我打开浏览器时会出现这个错误：

> 致命错误：未捕获的异常“SmartyCompilerException”和消息“模板中的语法错误”

似乎是什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:05:51.283

```
{php}echo("Hello, world!");{/php} 
```

也许这会起作用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:09:47.630

```
{php}
// including a php script directly from the template.
include('/path/to/display_weather.php');
{/php} 
```

这样您就可以将 php 代码嵌入到 smarty 模板文件中。检查此以供参考[http://www.smarty.net/docsv2/en/language.function.php.tpl](http://www.smarty.net/docsv2/en/language.function.php.tpl)

# android - 在 google play 中回复评论

> ID：13975981
> 
> 赞同：-1
> 
> 时间：2012-12-20T16:00:57.940
> 
> 标签：android, google-play

我在我的 Android 应用程序的评论中收到一个问题，我想回答用户，我找不到如何做到这一点，所以，我查看了谷歌并找到了这个：

[http://android-developers.blogspot.com.es/2012/06/replying-to-user-reviews-on-google-play.html](http://android-developers.blogspot.com.es/2012/06/replying-to-user-reviews-on-google-play.html)

它是 6 月 21 日发布的，所以应该可以，但我不能。

我要回答的评论是我的应用程序中唯一的评论，这可能是我无法回答的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:09:01.560

为此，您需要获得 Google Play 团队的（顶级开发者）身份。

# c# - 使用 DocumentComplete 事件 C#

> ID：13975982
> 
> 赞同：1
> 
> 时间：2012-12-20T16:00:57.893
> 
> 标签：c#, navigation, browser

我第一次开始在 C# 中使用 WebBrowser 控件。我正在尝试做一些非常简单的事情：在文本框中写一个文本，然后单击一个按钮进行登录。

```
WebContest wc_class = new WebContest();
...

 wc_class.wbThread1.Navigate("http://www.mysite.com");
        while (wc_class.wbThread1.ReadyState != WebBrowserReadyState.Complete) Application.DoEvents(); 
```

此处登录页面的 ReadyState 完美运行，接下来继续在文本框中写入文本，然后单击按钮

```
wc_class.wbThread1.Document.GetElementById("field_email").SetAttribute("value", tbLogin.Text);
wc_class.wbThread1.Document.GetElementById("field_password").SetAttribute("value", tbPassword.Text);
wc_class.wbThread1.Document.GetElementById("field_remember").InvokeMember("click");
wc_class.wbThread1.Document.GetElementById("hook_FormButton_button_go").InvokeMember("click"); 
```

这一次，登录后我需要从页面中提取链接。做这样的事情：

```
...
foreach (HtmlElement link in wc_class.wbThread1.Document.Links)
            {
                string href = link.GetAttribute("HREF");
                string fileName = "links.txt";
                using (FileStream fs = new FileStream(fileName, FileMode.Append, FileAccess.Write))
                using (StreamWriter sw = new StreamWriter(fs))
                {
                    sw.WriteLine(href);
                } 
```

麻烦在于期待 DocumentComplete 事件。登录后的页面没有等待加载。为什么？点击登录按钮后如何查看页面的ReadyState？

以及如何为页面导航中的所有事件执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:09:09.110

我遇到了这个问题并使用计时器解决了它。在`InvokeMember("click");`我启动计时器几秒钟并在计时器滴答时检查`ReadyState`. 如果完成 - 停止计时器，否则它将再次触发。

```
System.Windows.Forms.Timer yesTimer;
yesTimer.Interval = 2000;

public Main()
{
  webBrowser1.Navigate("http://www.mysite.com");
  yesTimer.Start();
}

  private void yesTimer_Tick(object sender, EventArgs e)
  {
     if (webBrowser1.ReadyState != WebBrowserReadyState.Complete)
     {
        return;
     }

     yesTimer.Stop();
     //do here whatever you want then webBrowser1 is completed
  } 
```

# php - 在 PHP 中，有没有办法获取一个数组的子集，其键与另一个数组中的值匹配？

> ID：13975984
> 
> 赞同：4
> 
> 时间：2012-12-20T16:00:59.967
> 
> 标签：php, arrays

目前，我正在使用此函数`get indicies`从数组中收集键/值，以获取存储为另一个数组中的值的键数组：

```
function get_indicies($haystack,$needle_names = array()){

    $needles = array();
    foreach($needle_names as $needle_name){ 
        if( isset($haystack[$needle_name]) ) $needles[$needle_name] = $haystack[$needle_name];
    }
    return $needles;
} 
```

php 中有大量的数组函数，有没有一种方法可以在类范围内更有效地执行此操作，并使用更多的内置 php 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T16:04:12.070

```
$subset = array_intersect_key($haystack, array_flip($needleNames)); 
```

这通常以名称`pluck`或类似辅助函数的形式使用。

```
function pluck(array $array, $keys) {
    if (!is_array($keys)) {
        $keys = func_get_args();
        array_shift($keys);
    }
    return array_intersect_key($array, array_flip($keys));
}

var_dump(pluck($array, array('foo', 'bar', 'baz')));
var_dump(pluck($array, 'foo', 'bar', 'baz')); 
```

# python - 在 Structure (ctypes) 运行时更改 _fields_ 中的元素数量

> ID：13975985
> 
> 赞同：0
> 
> 时间：2012-12-20T16:01:00.277
> 
> 标签：python, ctypes, structure

使用 ctypes 我定义了以下类：

```
class ListOfVariables(Structure):
   _fields_ = [
                ("name0", c_int),
                ("name1", c_int),
                ("name2", c_int)              
] 
```

*是否可以在运行时向成员“字段*”添加一个元素？这样我们就可以通过如下方式定义一个新变量，例如：

```
cstructA = ListOfVariables(1,2,3,4) 
```

甚至是另一种类型：

```
cstructB = ListOfVariables(1,2,3,'b') 
```

在动态修改类之后，必须使用新数量的参数调用构造函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:41:55.373

你不能这样做，因为 Structure 应该是一个 C 结构 --- 以字节为单位的固定大小，元素的固定偏移量。您不能动态更改 C 结构的布局。例如，对于已经创建的实例，这意味着什么？

您*可以*动态更改常规 Python 对象的布局，因为确切地说，它们的实现比简单的 C 结构更复杂。

根据您的需要，您可以创建 ListOfVariables 的子类：

```
class ListOfVariables2(ListOfVariables):
    _fields_ = [('extra', c_int)] 
```

这意味着您正在定义另一个 C 结构，它是旧结构的扩展。

# java - 为什么 onNewIntent(Intent intent) 方法会被调用两次？

> ID：13975990
> 
> 赞同：9
> 
> 时间：2012-12-20T16:01:12.147
> 
> 标签：java, android

我用两个参数开始一个新的活动。

```
Intent intent = new Intent(WebTestActivity.this, MainActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_CLEAR_TOP);                  
Uri uri =  Uri.parse(url);
intent.setData(uri);
startActivity(intent); 
```

并抓住方法`uri`。`onNewIntent`

```
@Override
public void onNewIntent(Intent intent) {  //calls twice
    super.onNewIntent(intent);      
    Uri uri = intent.getData();
    new AsynkTask().execute(uri);
} 
```

但是由于`onNewIntent`某种未知的原因，该方法被调用了两次，这似乎不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-25T20:15:33.260

```
Intent intent = new Intent(WebTestActivity.this, MainActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_CLEAR_TOP);                  
intent.putExtra("url",url);
startActivity(intent) 
```

在主活动中；

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Bundle extras = getIntent().getExtras();
    String url = extras.getString(url);

} 
```

然后，您可以解析 url 并用作 Uri。这样，方法就不会被调用两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T21:15:15.203

onNewIntent(Intent intent) 调用 startActivity(Intent) 时在其包中将 launchMode 设置为“singleTop”的活动，或者如果客户端在调用 startActivity(Intent) 时使用了 FLAG_ACTIVITY_SINGLE_TOP 标志。

如果它被调用了两次，它一定是被无意中调用的：两次启动活动？还是手动调用方法？

# php - 使用 PHP CURL 解析负载较重的网站？

> ID：13975999
> 
> 赞同：4
> 
> 时间：2012-12-20T16:01:47.717
> 
> 标签：php, parsing, curl

我使用 PHP CURL 来解析负载很重的站点（这个站点甚至很少在浏览器中打开）。结果我有服务器响应代码 503 或 0（什么都没有）。也许您可以给我建议或告诉我一些 CURL 功能以获得正常的服务器响应？

这是我的 CURL 选项：

```
$options = array(
    CURLOPT_REFERER => $url,
    CURLOPT_TIMEOUT => 1800,
    CURLOPT_HEADER => true,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_FOLLOWLOCATION => true,
    CURLOPT_SSL_VERIFYHOST => false,
    CURLOPT_SSL_VERIFYPEER => false,
    CURLOPT_HEADERFUNCTION => "curlHeaderCallback",
    CURLOPT_COOKIE => Cookies::arrayToString(Cookies::instance()->load()),
    CURLOPT_USERAGENT => "Opera/9.80 (Windows NT 6.1; U; ru) Presto/2.9.168 Version/11.50",
    CURLOPT_HTTPHEADER => $headers
); 
```

问题是我无法得到页面代码的响应。

我有 2 个变体： 1\. 服务器没有回答；2\. 在服务器的回答中，我得到代码为 503“服务器超载”的页面。

CurlHeaderCallback() 代码：

```
`function curlHeaderCallback($ch, $str)
{
if (strncmp($str, "Set-Cookie:", 11) === 0)
    {
    $cookie = trim(substr($str, 11));
    list($cookie, $options) = explode(";", $cookie, 2);
    list($key, $value) = explode("=", $cookie, 2);
    Cookies::instance()->set($key, $value);
    }
if (trim($str) == "")
    {
    curl_setopt($ch, CURLOPT_COOKIE, Cookies::arrayToString(Cookies::instance()->load()));
    }
return (strlen($str));
}` 
```

我的行动是： `$response = curl_exec($ch); $info = curl_getinfo($ch);`

我没有响应和`$info["http_code"]`/或第二个变体：作为响应，我有第 503 页代码和`$info["http_code"] = 503`

哦，另一种选择是：

```
CURLOPT_CONNECTTIMEOUT => 30 
```

图表在这里：[http ://s61.radikal.ru/i172/1212/d6/33471472ee8e.png](http://s61.radikal.ru/i172/1212/d6/33471472ee8e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:13:44.083

如果您只是在 http 代码之后，则需要使用[curl_getinfo](http://php.net/manual/en/function.curl-getinfo.php) using `CURLINFO_HTTP_CODE`，例如；

```
$handle = curl_init($url);
curl_setopt($handle,  CURLOPT_RETURNTRANSFER, TRUE);
$response = curl_exec($handle);
$httpCode = curl_getinfo($handle, CURLINFO_HTTP_CODE); 
```