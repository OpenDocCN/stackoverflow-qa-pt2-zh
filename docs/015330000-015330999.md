# StackOverflow 问答 15330000-15330999

# javascript - 在 IE8 中使用选择器解析 XML-

> ID：15330002
> 
> 赞同：1
> 
> 时间：2013-03-11T01:47:32.540
> 
> 标签：javascript, jquery, xml, internet-explorer, sizzle

我目前正在使用选择器解析 WMS Capabilities XML 文件，这很好用，干净的代码解决方案。

但是我偶然发现了 IE8 的问题-（Chrome、Safari、Firefox 等都运行良好）

```
$.get(capabilitiesUrl, function (data) {
  $("WMT_MS_Capabilities Capability Layer Layer Name",  $(data)).not("Style Name").each(function (i) {
    layerNames[i] = $(this).text();
  });
}); 
```

这将成功地`layerNames`在体面的浏览器中填充我的数组。

在 IE9+`data`中是类型`[Object, Document]`

但是在 IE8 中，类型`data`是`IXMLDOMDocument2`我无法使用选择器查询解析的类型。

`IXMLDOMDocument2`也是只读的，导致嘶嘶声在以下位置引发异常：

`outerCache = elem[ expando ] || (elem[ expando ] = {});`

因为它将尝试运行`elem[ expando ] = {}`失败，因为它`IXMLDOMDocument2`是只读的。有`Object doesn't support this property or method`错误。

* * *

有没有办法让我`layerNames`使用选择器来填充我的数组，或者我在追逐不可能的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:42:16.440

想出了这个。

如果您使用该方法`.find()`而不是该`find in`方法，它将在 IE8 中正确解析-

然后我仍然有`.not()`导致异常的问题`sizzle`。

我通过使用选择器而不是使用`jQuery`API解决了这个问题。`.not()``:not()`

* * *

**解决方法如下：**

```
$(data).find("WMT_MS_Capabilities Capability Layer Layer Name:not(Style Name)").each(function (i) {
  layerNames[i] = $(this).text();
}); 
```

# html - chrome的定位问题

> ID：15330004
> 
> 赞同：0
> 
> 时间：2013-03-11T01:47:44.803
> 
> 标签：html, css, wordpress

[http://www.gcfimoveis.com.br/](http://www.gcfimoveis.com.br/)

添加后，底部的文本小部件（CPFL）在 IE 和 FF 中显示良好：

```
 <ul style="position:relative; right:25px;"> 
```

到列表中。

在 Chrome 中，它的位置太靠左了。我尝试使用 -webkit 属性找到一种方法来纠正它，但无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T01:59:59.533

我看到你有一系列`<div class="widget">`

然而，在那个特定的小部件中，您使用了一个无序列表，而在上面的每个小部件中，您奇怪地省略了`<ul>`标签。例如，

```
<div class="textwidget">           
<li><a rel="nofollow" href="http://www.ribeiraopreto.sp.gov.br/daerp/jw04informacaoCadastral.htm" title="Informação Cadastral" target="_blank">» Informação Cadastral</a></li>
<li><a rel="nofollow" href="http://www.ribeiraopreto.sp.gov.br/daerp/jw04informacaoDebito.htm" title="Informação de Débito" target="_blank">» Informação de Débito</a></li>
<li><a rel="nofollow" href="http://www.ribeiraopreto.sp.gov.br/daerp/jw04segundaViaConta.htm" title="Segunda via da conta" target="_blank">» Segunda via da conta</a></li>
<li><a rel="nofollow" href="http://www.ribeiraopreto.sp.gov.br/daerp/jw04rdd.htm" title="Guia de arrecadação - RDD" target="_blank">» Guia de arrecadação – RDD</a></li>
<li><a rel="nofollow" href="http://www.ribeiraopreto.sp.gov.br/daerp/i04dc-indice.php" title="Dicas ao consumidor" target="_blank">» Dicas ao consumidor</a></li>
</div> 
```

在此 HTML 中，没有`<ul>`包含`<li>`项目。但是在有问题的小部件中，您确实有`<ul>`标签。

**更新：**如果您`<ul>`在有问题的小部件中将其更改为 a `<div>`，并摆脱您添加的相对定位，它们会完美对齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T02:06:49.293

首先，在编写 HTML 代码时，尽量遵循最佳实践和建议。我想到的第一件事是你的`<li>`物品没有用`<ul>`标签包裹。尽管您的网络浏览器可以解释和理解编码器的含义，但最好遵循标准。

现在你的主要问题是，每个浏览器都有不同的默认 CSS 配置，这就是人们使用[CSS 重置](http://meyerweb.com/eric/tools/css/reset/)脚本来解决这个问题的原因。您需要将以下行添加到您的 CSS 代码中，以使列表项始终如一地工作：

```
li {
    list-style-position:inside;
} 
```

[您可以在此处](http://www.htmldog.com/reference/cssproperties/list-style-position/)查看 list-style-position 的可能值

希望我有所帮助

# javascript - 在两个 JavaScript 对象中查找冲突的方法名称

> ID：15330007
> 
> 赞同：1
> 
> 时间：2013-03-11T01:48:16.830
> 
> 标签：javascript, inheritance

我正在尝试在 JavaScript 中模拟多重继承，因此我需要找到一种方法来获取两个 JavaScript 对象的冲突方法名称列表。是否可以为两个对象生成一个函数名列表，然后找到两个类之间所有相同的函数名？

```
 function base1(){
        this.printStuff = function(){
            return "Implemented by base1";
        };
    }

    function base2(){
        this.printStuff = function(){
            return "Implemented by base2";
        };
    }

function getConflictingFunctionNames(object1, object2){
    //get a list of conflicting function names between the two objects. 

    //to be implemented.
}

console.log(getConflictingFunctionNames(base1, base2)); //this should print ["printStuff"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T02:08:52.953

您需要执行以下步骤：

1.  获取每个对象的所有自己的属性名称。
2.  过滤函数。
3.  创建两个集合的并集。

前两个步骤可以组合成一个函数：

```
function getOwnFunctionNames(object) {
    var properties = Object.getOwnPropertyNames(object);
    var length = properties.length;
    var functions = [];

    for (var i = 0; i < length; i++) {
        var property = properties[i];
        if (typeof object[property] === "function")
            functions.push(property);
    }

    return functions;
} 
```

接下来，您需要找到两个对象的函数集的并集：

```
function getConflictingFunctionNames(object1, object2) {
    var functions1 = getOwnFunctionNames(object1);
    var functions2 = getOwnFunctionNames(object2);
    var length = functions1.length;
    var functions = [];

    for (var i = 0; i < length; i++) {
        var functionName = functions1[i];
        if (functions2.indexOf(functionName) >= 0)
            functions.push(functionName);
    }

    return functions;
} 
```

现在你可以用这些函数做任何你想做的事情。

在此处查看演示：http: [//jsfiddle.net/gVCNd/](http://jsfiddle.net/gVCNd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T03:00:38.390

如果您只想找到常见的命名方法，那么：

```
function getCommonNamedMethods(obj1, obj2) {
  var result = [];

  for (var p in obj1) {

    if (typeof obj1[p] == 'function' && typeof obj2[p] == 'function' ) {
      result.push(p);
    }
  }
  return result;
} 
```

如果您只想要对象的自己的属性，请包括自己的属性测试：

```
function getCommonNamedMethods(obj1, obj2) {
  var result = [];

  for (var p in obj1) {

    if (obj1.hasOwnProperty(p) && typeof obj1[p] == 'function' &&
        obj2.hasOwnProperty(p) && typeof obj2[p] == 'function' ) {
       result.push(p);
    }
  }
  return result;
} 
```

# r - 从矩阵格式的模拟样本创建分布

> ID：15330010
> 
> 赞同：0
> 
> 时间：2013-03-11T01:48:47.190
> 
> 标签：r, matrix, simulation

我有一个统计矩阵，称为 T_{i,j}。然后我模拟了 1000 个样本。我想使用 1000 个样本来构建分布，然后为我观察到的 T_{i,j} 计算 p 值。

示例 T_{i,j} 矩阵如下所示：

```
 V12         V13        V22        V23       V117       V146
V12  0.009900990 0.008281829 0.01490863 0.01548161 0.01342882 0.01287918
V13  0.008281829 0.031250000 0.04367911 0.04597988 0.03876530 0.03182001
V22  0.014908629 0.043679113 0.50000000 0.36522152 0.45404452 0.09666729
V23  0.015481606 0.045979882 0.36522152 0.50000000 0.47827009 0.10272845
V117 0.013428819 0.038765301 0.45404452 0.47827009 0.50000000 0.09810254
V146 0.012879176 0.031820011 0.09666729 0.10272845 0.09810254 0.09090909 
```

我想做的是轻松获取每个可能条目的 p 值。在上面的矩阵中，有 21 个单独的统计数据，因为对角线以下的所有内容都是上面所有内容的转置。

我意识到我可以使用 for 循环来查看所有样本的每个 (i,j) 条目，对它们进行排序，然后找出我观察到的谎言，但我想知道是否有更简单的 R 方法可以做到这一点？

我在这里放了一组样本数据（通过 dput 输出的数据）： [http ://temp-share.com/show/3YgF5Ww2x](http://temp-share.com/show/3YgF5Ww2x)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:33:36.557

如果 LT 是一些零假设模拟矩阵（如 T）的列表，并且您想要进行单尾检验（例如，上面），那么您可以计算 T 的每个元素低于或等于模拟中的相关值。我正在使用 reduce 来汇总从 lapply 返回的 1000 个矩阵。

```
ct <- Reduce("+", lapply(LT,function(x) x >= T)) 
```

结果是一个与 T 大小相同的矩阵，它计算 (ct) T 的元素被超过（或等于）LT 中矩阵的相应元素的次数。将此矩阵除以模拟样本大小（模拟次数）。

```
p <- ct / length(LT) 
```

p 是近似 p 值的矩阵，表示零假设模拟至少与观测数据一样极端（在上端）的概率。如果任何 p < alpha，那么在观察的特定元素的情况下，您可能会说零假设是一个糟糕的模型。

调整测试“x >= T”以运行您实际想要运行的测试，这可能是一个双面测试。

# javascript - 骨干网：从服务器获取的数据未显示在视图中

> ID：15330013
> 
> 赞同：0
> 
> 时间：2013-03-11T01:49:06.537
> 
> 标签：javascript, backbone.js

我是骨干新手，我似乎无法显示集合中的数据。请指出不正确的部分。

考虑这些js代码：

```
App.ProvidersView = Backbone.View.extend({
    id: "Providers",

    template: "#-providers-template",

    render: function() {
        var html = $(this.template).tmpl();
        $(this.el).html(html).addClass('container-fluid');
        this.collection.each(this.renderProvider);
    },

    initialize: function() {
        _.bindAll(this, "renderProvider");
    },

    renderProvider: function(Provider){
        var ProviderView = new App.ProviderView({
            model: Provider
        });
        ProviderView.render(Provider);
        $(this.el).append(ProviderView.el);
    }
});

App.ProviderView = Backbone.View.extend({
    id: "Provider",

    template: "#-provider-template",

    initialize: function(){
        this.template = $(this.template);
    },

    render: function(){
        var html = this.template.tmpl(this.model.toJSON());
        $(this.el).html(html);
    }

});

App.Provider = Backbone.Model.extend();

App.ProviderCollection = Backbone.Collection.extend({
    url: "php/Provider.php",

    model: App.Provider
});

App.addInitializer(function() {

    var providers = new App.ProviderCollection();

    providers.fetch({success: function() {
        console.log(Providers.models);
    }});

    var provider = new App.Provider();

    var providersView = new App.ProvidersView({
        model: Provider,
        collection: Providers
    });

    providersView.render();

    $("#main").html(providersView.el);
    $("#providers-list").html(provider.el);

});

App.bind('initialize:after', function() {
    Backbone.history.start();
});

$(function() {
    App.start();
}); 
```

模板：

```
<script type="text/x-jquery-tmpl" id="content-providers-template">
    <div class="row-fluid">
        <div class="span12">
            <h5>Content Providers</h5>
        </div>
    </div>
    <div id="content-providers-list"></div>
</script>

<script type="text/x-jquery-tmpl" id="content-provider-template">
    <div class="row-fluid">
        <div class="span12">
            <div class="panel">
                <h2 class="toggle"><i class="icon-chevron-down icon-white pull-right"></i>${name}</h2>
            </div>
        </div>
    </div>
</script> 
```

依赖项：

```
<script type="text/javascript" src="scripts/jquery.js"></script>
<script type="text/javascript" src="scripts/jquery.tmpl.min.js"></script>
<script type="text/javascript" src="scripts/json2.js"></script>
<script type="text/javascript" src="scripts/underscore.js"></script>
<script type="text/javascript" src="scripts/backbone.js"></script>
<script type="text/javascript" src="scripts/backbone.marionette.js"></script> 
```

另外，如果您可以将非常好的资源分享给学习骨干，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:56:35.930

一段时间后终于让这个工作了。

关键`fetch()`是异步的，这意味着它在加载来自服务器的数据之前返回。

这是修复：

```
App.addInitializer(function() {

    var providers = new App.ProviderCollection();
    var provider = new App.Provider();

    var providersView = new App.ProvidersView({
        model: Provider,
        collection: Providers
    });

    providers.fetch({success: function() {
        console.log(Providers.models);
        providersView.render(); // Render after loading
    }});

    $("#main").html(providersView.el);
    $("#providers-list").html(provider.el);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:51:36.317

尝试这个：

```
render: function() {
    var html = $(this.template).tmpl();
    $(this.el).html(html).addClass('container-fluid');
    var that = this;
    this.collection.each(function() {
        that.renderProvider();
    });
} 
```

我想，在你的 renderProvider 方法中，你得到了错误的上下文。这应该工作！

# vb.net - String 类型的值不能转换为 Byte 的一维数组

> ID：15330018
> 
> 赞同：1
> 
> 时间：2013-03-11T01:49:44.440
> 
> 标签：vb.net, tableadapter

这是声明：

```
Public Class Client
Public Property Address() As String
    Get
        Return mAddress

    End Get
    Set(ByVal value As String)
        mAddress = value
    End Set
End Property
Public Property City() As String
    Get
        Return mCity

    End Get
    Set(ByVal value As String)
        mCity = value
    End Set
End Property
end sub 
```

错误就在这里：

```
Public Function InsertClientRecordToDb(ByVal cli As Client) As Boolean
        Dim retVal As Boolean
        Dim dataSet As DataSet = New DataSet("dataSet")
        dataSet.EnforceConstraints = False
        'create table adapter object
        Dim ClientTblAdapter As New CaseStudyDBDataSetTableAdapters.Client_TableTableAdapter

    'check db connection
    If ClientTblAdapter.Connection.State = ConnectionState.Closed Then
        ClientTblAdapter.Connection.Open()
    End If

    'perform(insert)
    If ClientTblAdapter.InsertClientRecord(cli.Clientcode, cli.Clientname, cli.Address, cli.City, cli.Contactperson, cli.Contactnumber) > 0 Then
        retVal = True
    End If**

    Return retVal
End Function 
```

“cli.Address”和“cli.City”下划线表示：

> String 类型的值不能转换为 Byte 的一维数组

似乎是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:28:58.733

对于错误，您似乎正在尝试将字符串分配给`Byte()`

就像是 ：

```
Dim bArr As Byte() = "hello world!" 
```

这是错误的，要将字符串转换为`Byte()` **您需要使用`Encoding`该类**

```
Dim bArr As Byte() = System.Text.Encoding.Default.GetBytes("hello world!") 
```

# angularjs - AngularJS - 有条件地应用属性？

> ID：15330022
> 
> 赞同：4
> 
> 时间：2013-03-11T01:50:01.460
> 
> 标签：angularjs, angular-ui

有条件地应用一个元素很容易 - 只需使用 ng-show。但是属性呢？

IE

```
<div ui-sortable>
  ...
</div> 
```

只需要对管理员进行排序，所以请执行类似...

```
<div ng-conditional-attribute=" {'ui-sortable': 'user.isAdmin()'} ">
  ...
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T01:59:10.210

创建自定义指令或模板，并在附加可排序的版本和不附加的版本之间切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T02:28:14.423

由于许多指令也适用于`class`您，因此您可以使用`ng-class="{'ui-sortable': user.isAdmin()}"`.

我对`angular-ui`指令知之甚少，不知道它们有什么限制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T17:17:18.873

迟到了，但它可能会帮助某人：

```
ng-readonly ="" 
```

如果表达式为真，将设置属性。

还有许多其他 ng 属性以这种方式工作。

# sql - 检查 SQL Server 中是否不存在值

> ID：15330023
> 
> 赞同：4
> 
> 时间：2013-03-11T01:50:16.173
> 
> 标签：sql, sql-server-2005

我有这个非常简单的目标，但我想不出任何简单的解决方案。我有一个来自用户输入的值列表，我想检查数据库中是否至少有一个值不存在。请注意，输入的值可以有重复项。

我的表：

```
| id | name |
| 0  | Bob  |
| 1  | Ben  |
| 2  | John |
| 3  | Rex  | 
```

用户输入的示例值：

1、2、2、4

不存在的值的计数，在本例中为 4，因此：

1

我可以做这样的事情：

```
select count(userInput.value)
from
   (select 1 as value
    union all
    select 2
    union all
    select 2
    union all
    select 4) as userInput
left join myTable
on myTable.value = myTable.id
where myTable.id is null 
```

上面的代码将计算 myTable 中所有不匹配的值（myTable.id 为空）。这会起作用，但我正在寻找一个不需要使用多个联合的简单解决方案。有人试过这样做吗？

**编辑**

这不起作用！

```
select count(myTable.id)
from myTable
where myTable.id not in(1,2,2,4) 
```

上面的代码将计算输入值中不存在的 ID，这将导致 2，因为输入值中不存在 ID 0 和 3。请注意，预期输出为 1，因为值 4 是表中唯一不存在的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:28:40.097

我不在我的电脑前，而是像：

```
Select id from mytable where (
Select count(id) 
From myTable
where id in (1,2,4) 
Group by id) =0 
```

可能工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T02:10:01.330

我认为您的方法有效：

```
SELECT * 
FROM
  (SELECT 1 value
   UNION ALL
   SELECT 2
   UNION ALL
   SELECT 2
   UNION ALL
   SELECT 4) ui
LEFT JOIN myTable mt
  ON mt.id = ui.value 
```

退货

```
| 价值 | 身份证 | 姓名 |
--------------------------
| 1 | 1 | 本 |
| 2 | 2 | 约翰 |
| 2 | 2 | 约翰 |
| 4 | (空) | (空) |
```

所以，问伯爵在哪里`id` `IS NULL`：

```
SELECT COUNT(*) cnt
FROM
  (SELECT 1 value
   UNION ALL
   SELECT 2
   UNION ALL
   SELECT 2
   UNION ALL
   SELECT 4) ui
LEFT JOIN myTable mt
  ON mt.id = ui.value
WHERE mt.id IS NULL 
```

**结果**

```
| 碳纳米管 |
--------
| 1 |
```

[查看演示](http://sqlfiddle.com/#!3/b868c/1)

# mysql - 选择合并两个表，每个表之间有一个

> ID：15330025
> 
> 赞同：2
> 
> 时间：2013-03-11T01:50:24.383
> 
> 标签：mysql, sql, select, join

我一直在寻找如何实现这一点，但我什至不知道它是如何被调用的（用于搜索它）。所以这就是我所拥有的：

![http://i45.tinypic.com/2zzqjco.png](../Images/cd8d95ab758bfce282fde08f3b1349cc.png)

表数据如下：

```
[产品]
ID - 姓名
 1 - 苹果
 2 - 香蕉

[仓库]
ID - 姓名
 1 - 一般
 2 - 其他

[股票]
产品 - 仓库 - 库存
    1 - 1 - 4
    1 - 2 - 4
    2 - 1 - 5

在这里，我想获取 'Storehouse' = '2' 上的所有产品
但如果不存在，则返回 'null' 或 '0' 而我假装得到的是：

[选择]
产品 - 库存
   1 - 4
   2 - 空或“0”

```

我不知道使用哪种语句，所以至少我需要一个线索。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T01:56:33.923

```
SELECT  a.ID,
        a.Name,
        COALESCE(b.Stock, 0) Stock
FROM    Products a
        LEFT JOIN   stocks b
            ON  a.ID = b.Product AND
                b.StoreHouse = 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/8be10/3)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

最后，将产品的数量存储为`INT`，而不是`VARCHAR`。

结果

```
╔════╦════════╦═══════╗
║ ID ║  NAME  ║ STOCK ║
╠════╬════════╬═══════╣
║  1 ║ Apple  ║     4 ║
║  2 ║ Banana ║     0 ║
╚════╩════════╩═══════╝ 
```

# javascript - 禁用移动默认键盘以显示（Web APP，而不是 APP）

> ID：15330026
> 
> 赞同：0
> 
> 时间：2013-03-11T01:50:40.037
> 
> 标签：javascript, jquery, html, web-applications, jquery-mobile

我开发了一个 JavaScript 虚拟键盘，并计划不使用默认的移动键盘。

但是，每当我关注 html 文本字段、文本区域，甚至使用 div contenteditable="true"> 时，默认键盘都会弹出并覆盖我的虚拟键盘。

关于如何禁用或阻止默认移动键盘并防止其出现有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:53:23.870

我遇到了类似的问题，最后我所做的只是将其替换`textarea`为一个`div`元素。

向 div 元素添加了一个点击事件（它被放置而不是`textarea`），当用户点击 div 元素时，将显示虚拟键盘 div（页面加载时键盘隐藏在 div 中），当用户键入时，内容是将[append 和 appendTo 附加](http://www.mkyong.com/jquery/jquery-append-and-appendto-example/)到div。

希望这会给你一个关于如何解决这个问题的简要想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T13:13:37.967

*   捕捉 onFocus 事件
*   设置 event.preventDefault(); 和 event.stopPropagation();
*   将 textarea.focus() 设置为延迟为 0 毫秒的 setTimeout。

    setTimeout 中的 focus() 方法将阻止显示默认系统键盘。

（验证方法名称，我是从头写的，对不起我的英语）

# regex - 可被 3 整除的二进制数的正则表达式

> ID：15330027
> 
> 赞同：9
> 
> 时间：2013-03-11T01:50:47.923
> 
> 标签：regex, dfa

我正在自学正则表达式，在网上发现了一个有趣的练习题，涉及编写一个正则表达式来识别所有可被 3 整除的二进制数（并且只识别这样的数字）。老实说，这个问题要求为这种场景构建一个 DFA，但我认为使用正则表达式应该是等效的。

我知道有一个小规则可以确定二进制数是否可以被 3 整除：取数字中偶数位的个数，然后减去数字中奇数位的个数 - 如果这等于零，该数字可被 3 整除（例如：110 - 1 在偶数 2 插槽中，1 在奇数 1 插槽中）。但是，我在将其调整为正则表达式时遇到了一些麻烦。

我最接近的是意识到这个数字可以是 0，所以这将是第一个状态。我还看到所有可被 3 整除的二进制数都以 1 开头，所以这将是第二种状态，但我从那里被困住了。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T06:44:21.267

按照 Oli Charlesworth 所说，您可以构建 DFA 以使基数`b`除以某个除数`d`，其中 DFA 中的状态代表除法的其余部分。

对于您的情况（基数 2 - 二进制数，除数`d`= 3 [10]）：

![初始 DFA](../Images/83e9ac300dec9c9e8258b8249f67b25f.png)

请注意，上面的 DFA 接受空字符串作为可被 3 整除的“数字”。这可以通过在前面添加一个中间状态来轻松解决：

![固定 DFA](../Images/dcae737c9625f182e05f9cc0d6c74cfa.png)

转换为理论正则表达式可以用[正常的过程](https://stackoverflow.com/questions/13676431/regular-expressions-with-repeated-characters/13677120#13677120)来完成。

当您获得 DFA 后，可以轻松地转换为支持递归正则表达式的风格中的实用正则表达式。在CodeGolf.SE的[这个问题](https://codegolf.stackexchange.com/questions/3503/hard-code-golf-regex-for-divisibility-by-7)中显示了 (base `b`= 10, `d`= 7 [10] ) 的情况。

让我[在 Lowjacker 的答案中](https://codegolf.stackexchange.com/questions/3503/hard-code-golf-regex-for-divisibility-by-7#3518)引用正则表达式，用 Ruby 正则表达式风格编写：

```
(?!$)(?>(|(?<B>4\g<A>|5\g<B>|6\g<C>|[07]\g<D>|[18]\g<E>|[29]\g<F>|3\g<G>))(|(?<C>[18]\g<A>|[29]\g<B>|3\g<C>|4\g<D>|5\g<E>|6\g<F>|[07]\g<G>))(|(?<D>5\g<A>|6\g<B>|[07]\g<C>|[18]\g<D>|[29]\g<E>|3\g<F>|4\g<G>))(|(?<E>[29]\g<A>|3\g<B>|4\g<C>|5\g<D>|6\g<E>|[07]\g<F>|[18]\g<G>))(|(?<F>6\g<A>|[07]\g<B>|[18]\g<C>|[29]\g<D>|3\g<E>|4\g<F>|5\g<G>))(|(?<G>3\g<A>|4\g<B>|5\g<C>|6\g<D>|[07]\g<E>|[18]\g<F>|[29]\g<G>)))(?<A>$|[07]\g<A>|[18]\g<B>|[29]\g<C>|3\g<D>|4\g<E>|5\g<F>|6\g<G>) 
```

分解它，你可以看到它是如何构造的。*原子*分组（*或非回溯*组，或具有*所有格*行为的组）用于确保仅匹配空字符串替代项。`(?DEFINE)`这是在 Perl中模拟的一个技巧。然后，当数字除以 7 时，组对应于 0 到 6 的余数`A`。`G`

```
(?!$)
(?>
  (|(?<B>4   \g<A>|5   \g<B>|6   \g<C>|[07]\g<D>|[18]\g<E>|[29]\g<F>|3   \g<G>))
  (|(?<C>[18]\g<A>|[29]\g<B>|3   \g<C>|4   \g<D>|5   \g<E>|6   \g<F>|[07]\g<G>))
  (|(?<D>5   \g<A>|6   \g<B>|[07]\g<C>|[18]\g<D>|[29]\g<E>|3   \g<F>|4   \g<G>))
  (|(?<E>[29]\g<A>|3   \g<B>|4   \g<C>|5   \g<D>|6   \g<E>|[07]\g<F>|[18]\g<G>))
  (|(?<F>6   \g<A>|[07]\g<B>|[18]\g<C>|[29]\g<D>|3   \g<E>|4   \g<F>|5   \g<G>))
  (|(?<G>3   \g<A>|4   \g<B>|5   \g<C>|6   \g<D>|[07]\g<E>|[18]\g<F>|[29]\g<G>))
)
(?<A>$|  [07]\g<A>|[18]\g<B>|[29]\g<C>|3   \g<D>|4   \g<E>|5   \g<F>|6   \g<G>) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-06T20:45:53.217

我有另一种方法来解决这个问题，我认为这更容易理解。当我们将一个数除以 3 时，我们可以得到三个余数：0、1、2。我们可以使用表达式`3t`（`t`是自然数）来描述一个可被 3 整除的数。

* * *

当我们在余数为 0 的二进制数后面加 0 时，实际的十进制数将加倍。因为每个数字都在移动到更高的位置。 `3t * 2 = 6t`，这也能被 3 整除。

当我们在余数为 0 的二进制数后面加 1 时，实际的十进制数将加 1。 `3t * 2 + 1 = 6t + 1`，余数为 1。

* * *

当我们在余数为1的二进制数后面加1时，实际的十进制数将加一，余数为0； `(3t + 1)*2 + 1 = 6t + 3 = 3(2t + 1)`, 这可以被 3 整除。

当我们在余数为 1 的二进制数后添加 0 时，实际的十进制数将加倍。余数将是 2. `(3t + 1)*2 = 6t + 2`.

* * *

当我们在余数为 2 的二进制数后添加 0 时，余数将为 1。 `(3t + 2)*2 = 6t + 4 = 3(2t + 1) + 1`

当我们在余数为 2 的二进制数后面加 1 时，余数仍为 2。 `(3t + 2)*2 + 1 = 6t + 5 = 3(2t + 1) + 2.`

*无论你在余数为 2 的二进制数上加多少个 1，余数将永远为 2。* `(3(2t + 1) + 2)*2 + 1 = 3(4t + 2) + 5 = 3(4t + 3) + 2`

* * *

所以我们可以用 DFA 来描述二进制数： ![DFA 描述可被 3 整除的二进制数](../Images/877a3f714837dee772f6ef8bb2bad634.png)

**注意：**边缘`q2 -> q1`应标记为 0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-10T02:55:17.017

能被 3 整除的二进制数分为 3 类：

1.  具有两个连续 1 或两个 1 由偶数个 0 分隔的数字。有效地每一对“取消”自己。

（例如 11、110、1100、1001、10010、1111）

（十进制：3、6、12、9、18、15）

2.  三个 1 的数字，每个数字由奇数个 0 分隔。这些三胞胎也“取消”了自己。

（例如 10101、101010、1010001、1000101）

（十进制：21、42、81、69）

3.  前两个规则的某种组合（包括彼此内部）

（例如 1010111、1110101、1011100110001）

（十进制：87、117、5937）

因此，考虑到这三个规则的正则表达式很简单：

0*(1(00)*10*|10(00)*1(00)*(11)*0(00)*10*)*0*

如何阅读：

() 封装

* 表示前一个号码/组是可选的

| 表示括号内任一侧的选项选择

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T02:12:41.217

您遇到的问题是，虽然您的技巧（可能）有效，但它并没有映射到实际的 DFA（您必须跟踪偶数和奇数之间的潜在任意差异，这需要任意数字州）。

另一种方法是注意（从 MSB 到 LSB）在`i`第 -th 个字符 ,之后`x[i]`，您的子字符串在模 3 算术中必须等于 0、1 或 2；调用这个值`S[i]`。 `x[i+1]`必须为 0 或 1，相当于乘以 2 并可选地加 1。

所以如果你知道`S[i]`和`x[i+1]`，你就可以计算出来`S[i+1]`。这个描述是不是很熟悉？

# c - 有人知道英伟达产品（开普勒）中的翘曲退役机制吗？

> ID：15330031
> 
> 赞同：2
> 
> 时间：2013-03-11T01:51:25.627
> 
> 标签：c, cuda, nvidia

我说的是具有计算能力 3.5 (GK110) 的 nvidia GPU：

在每个 GPU 核心上，最多有 64 个活动 warp，硬件如何处理 warp 退休？来自不同网格块的扭曲甚至流可以在 GPU 的单个核心上同时工作（核心是指多处理器，因为它们本质上是多核 GPU 的核心）？

一个核心能否从一个流中快速退出已完成的经纱并将其他经纱从其他流加载到同一个核心？

我之所以问这个问题是因为要做出艰难的决定：

(1) 我可以编写代码来从不同的流中启动多个线程，大约 2/3 启动的 warp 基本上什么都不做，并且很快就会退休。

或者：

(2) 我可以编写代码来准确启动所需的线程数，但是每个线程都将包含非常繁重的索引计算（通过求解多个索引方程，仅计算正确索引所涉及的计算量将与, 如果不是更多, (1)) 中的实际计算。

因此，如果 GK110 可以快速退出空经纱并用新经纱替换它们，那么（1）将优于（2），因为它可以完全避免不必要的索引计算。

到目前为止，琐碎的案例测试显示这两个作品大致相同，但我不确定（1）在非琐碎案例中是否会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:06:59.290

> 在每个 GPU 核心上，最多有 64 个活动 warp。硬件如何处理 warp 退役？来自不同网格块甚至流的扭曲能否在 GPU 的单个核心上同时工作（核心是指多处理器，因为它们本质上是多核 GPU 的核心）？

是的，来自不同线程块的扭曲可以共同驻留并准备在单个 SM 上执行。这些不同的线程块可能来自相同的内核或不同的内核，来自不同的流。[此处](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#asynchronous-concurrent-execution)描述了来自不同内核的线程块并发执行。

> 一个核心能否从一个流中快速退出已完成的经线，并将其他流中的其他经线加载到同一个核心？

是的。工作分工首先由 threadblock 处理，然后再分配 warp。首先在 SM 上安排一个线程块，然后选择要执行的 warp 的过程。只要 SM 上有可用的线程块插槽（并且没有其他调度限制，例如共享内存或寄存器使用），任何可用内核的新线程块都可以在 cc 3.5 SM 上调度。

# java - 无法将 imageicon 设置为 JLabel，始终为空

> ID：15330036
> 
> 赞同：0
> 
> 时间：2013-03-11T01:51:48.860
> 
> 标签：java, swing, jframe, jlabel, imageicon

我是新来的，试图编写一个在 JFrame 上有一个按钮的代码并单击它可以打开一个 JFileChooser 来选择一个图像，在用户选择后，它会在 thr JFrame 上显示它，但我一直得到一个
`Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException`
，我发现我无法将选定的图像图标设置为 JPanel，这让我发疯，请帮助我！！！
我的代码是：

```
public class ImageLoading extends JFrame{

private static final int FRAME_WIDTH = 500;
private static final int FRAME_HEIFHT = 500;
private BufferedImage mImage;
private JFrame frm;
private JPanel panel;
private JButton button;
String name,name1;

public class ButtonListener implements ActionListener{
    public void actionPerformed(ActionEvent event){
        String source=filechoose();
        File inputFile = new File(source);
        System.out.println("File Directory: " + inputFile.toString());
        try {
            mImage = ImageIO.read(inputFile);
            System.out.println("Buffered Image: " + mImage.toString());
        } catch (IOException ex) {
            System.out.println(ex.getMessage());
        }

            ImageIcon image =  new ImageIcon(mImage);
            System.out.println("Image Icon: " + image.toString() + " :::  " +image.getIconHeight());
            JLabel lb = new JLabel(image);// HERE I GET EXCEPTION
            System.out.println("Image Label: " + lb.toString());
            panel.add(lb);
            panel.revalidate();
            panel.repaint();
            frm.pack();

    }
}

public void imageLoading(){
    frm = new JFrame("image loading test");
    frm.setLayout(null);
    JLabel label2 = new JLabel("Open a picture");
    button = new JButton("Open");
    panel = new JPanel();
    panel.setBounds(10, 10, 400, 400);

    panel.add(button);
    panel.add(label2);

    ImageLoading load = new ImageLoading();
    ButtonListener listener = load.new ButtonListener();

    button.addActionListener(listener);

    frm.add(panel);

    frm.setSize(FRAME_WIDTH,FRAME_HEIFHT);
    frm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frm.setVisible(true);
}

public String filechoose(){
    JFileChooser chooser = new JFileChooser();

    chooser.setFileFilter(new javax.swing.filechooser.FileFilter() {
        public boolean accept(File f) {
            name = f.getName().toLowerCase();
            return name.endsWith(".gif") || name.endsWith(".jpg")
                    || name.endsWith(".jpeg") || f.isDirectory();
        }

        public String getDescription() {
            return "Image files";
        }
    });

    int r = chooser.showOpenDialog(this);

    if (r == JFileChooser.APPROVE_OPTION) {
        name1 = chooser.getSelectedFile().getAbsolutePath();
        StringBuffer sb=new StringBuffer();
        sb.append(name1);

        int l=sb.length();
        for(int i=0;i<l;i++){
            if(sb.charAt(i)=='\\'){
                sb.insert(i, "\\");                 
            }
        }
    }
    return name1;
}

public static void main(String a[]){

    ImageLoading i = new ImageLoading();
    i.imageLoading();
} 
```

` 请帮我解决这个问题或给我一些这样做的样本......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T01:55:25.967

看看这些行：

```
ImageLoading load = new ImageLoading(); // not needed
ButtonListener listener = load.new ButtonListener();
button.addActionListener(listener); 
```

您正在将 a 添加`ButtonListener`到`button`附加到`ImageLoading`. `panel`在方法中被实例化`imageLoading`，但在这个新实例中没有调用它，导致`NullPointerException`稍后在您尝试调用时

```
panel.add(lb); 
```

（这`stacktrace`是一个很好的指示 的根本原因`NPE`）

您可以使用已实例化的*当前*实例：`ImageLoading``panel`

```
ButtonListener listener = new ButtonListener(); 
```

# drupal - 管理员的 Drupal 文章验证和要阅读的已验证文章

> ID：15330040
> 
> 赞同：-1
> 
> 时间：2013-03-11T01:52:23.827
> 
> 标签：drupal

我是 drupal 开发的新手，并尝试使用 drupal 创建一个杂志网站。我有一个功能，比如他们应该是一个单独的 POST 菜单，用户可以在其中发布，并且该文章应该进入管理页面。一旦他验证它，它应该在 READ 菜单中可见。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:08:11.647

使用drupal去预订它包含你想要的触发器和动作的例子，你应该使用触发器和动作模块

# c - 理解 Scanf - 处理格式化输入

> ID：15330047
> 
> 赞同：8
> 
> 时间：2013-03-11T01:52:57.970
> 
> 标签：c

我试图弄清楚究竟是如何`scanf`工作的。如果我编写这样的代码：

```
scanf("%s %d %f", name, &age, &wage); 
```

输入这个作为标准输入：

```
james 20 34000.25 
```

然后分别打印出姓名、年龄和工资，我得到的正是人们所期望的，就像我在标准输入中输入的一样。但是，如果我输入这样的内容：

```
scanf("%s/%d/%f", name, &age, &wage); 
```

我将其作为标准输入输入：

```
james/20/34000.25 
```

我得到`james/20/34000.25`字符串值的字符串和整数和浮点值分别为 0 和 0.00000 的字符串。我认为`scanf`将斜杠与第一个版本中的空格相同。如果用户输入斜杠分隔值，我将如何获得它，我可以将这些值适当地分配给变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T01:56:10.387

`%s`匹配非空白字符（这是一个贪婪匹配：它不会回溯以查看是否有其他匹配）要匹配非正斜杠字符，请使用`%[^/]`

（另外，请注意，scanf 字符串中的空格字符（匹配零个或多个空格字符）与非空格非百分号字符的行为非常不同，例如`'/'`（完全匹配`'/'`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T02:19:19.377

要匹配空格分隔和斜杠分隔的输入，您需要一个适度复杂的格式字符串：

```
if (scanf("%[^ /]%*1[ /]%d%*1[ /]%f", name, &age, &wage) == 3)
    ...data was read properly...
else
    ...something went wrong... 
```

第一个转换规范是一个扫描集，它接受一系列非空格、非斜杠（因此它将在第一个空格或斜杠处停止）。最好指定接受多少字符的上限，以避免[堆栈溢出](https://stackoverflow.com/)；例如，如果`char name[32];`，那么`%31[^ /]`（注意非一）。第二个转换规范接受一个空格或斜杠`%*1[ /]`的单个字符 ( ) ，并且不将其分配给任何变量 ( )。第三个转换规范是标准数字输入，跳过前导空格，允许输入负数等。第四个转换规范与第二个相同，第五个是a的标准格式（这意味着`1``[ /]``*``float``34000.25`7 位有效数字位于可表示值范围的外端）。

请注意，“出现问题”部分很难连贯地向用户报告错误。这就是为什么包括我自己在内的许多人建议不要使用`scanf()`或者`fscanf()`更喜欢使用`fgets()`或者可能是 POSIX[`getline`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html)来读取用户的一行，然后使用`sscanf()`它来分析它。您可以更轻松地报告问题。另请注意，from的返回值`scanf()`是成功分配的次数；它不计算包含`*`.

# javascript - 如何为全局变量构建 JavaScript/HTML 网站？

> ID：15330049
> 
> 赞同：0
> 
> 时间：2013-03-11T01:53:24.577
> 
> 标签：javascript, jquery, html, global-variables

我正在构建一个提供旅行方向的动态网站，但我是 JavaScript 新手，我不确定最好的编码方式。

目前，我通过为每个元素设置单独的 HTML 页面来加载网站的不同部分（页眉、主页面、页脚），然后将这些页面加载到主页中。例如，在主页上我有：

```
<body onload="initialize()">
   <div id="header"></div>
   <div id="main"></div>
   <div id="footer"></div>
</body> 
```

在导入的 JavaScript 脚本中，我有：

```
function initialize() 
{
   $('#header').load('header.html');
   $('#main').load('main.html');
   $('#footer').load('footer.html');
} 
```

问题是我希望所有这三个导入页面都可以访问单个 JavaScript 文件中的全局变量和函数，我将在其中存储路线信息、坐标等。具体来说，我遇到了无法调用从已加载到父页面的 header.html 页面中的主 JS 脚本中的函数。

做这个的最好方式是什么？任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T02:23:03.170

您应该有一个`js`包含所有客户端代码的文件，并将其包含在带有`<script>`标签的页面上。然后使用[`$( document ).ready()`](http://learn.jquery.com/using-jquery-core/document-ready/)运行您的初始化。您还可以在此处定义全局变量并分配它们，以便以后可以访问它们。

在您的 JavaScript 中包含将是这样的；

```
var $header, $main, $footer

function initialize() 
{
   $header.load('header.html');
   $main.load('main.html');
   $footer.load('footer.html');
}

$(document).ready(function() {
  $header = $('#header');
  $main = $('#main');
  $footer = $('#footer');

  initialize();
}); 
```

请注意您创建的全局变量的数量；[你犯的 11 个 JavaScript](http://net.tutsplus.com/tutorials/javascript-ajax/the-10-javascript-mistakes-youre-making/)错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T01:59:31.163

您是否尝试将其放在函数外部以使其成为全局...

```
var <variable name>
function <function_name>{

<variable name>

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T02:01:25.787

在主页中。

```
<script type="text/javascript">
    variable = <value>;   //variable used with var keyword is considered as global variable
</script> 
```

# jquery - 如何编写一个简单的点击不透明度渐变？

> ID：15330052
> 
> 赞同：1
> 
> 时间：2013-03-11T01:53:40.650
> 
> 标签：jquery, web

好的，所以我只是想让不透明度从 0 淡化到 1，然后在点击时从 1 淡化到 0。我假设我需要编写一个 if 语句。这是现在的代码。

```
$(document).ready(function() {
     $('#soilink').click(function() {$('#soi').animate({opacity:1}, 400 );}

    ); 
```

所以现在，如果我点击我网站上的链接，名为#soi 的 div 区域会淡入。但是，第二部分是我需要能够再次点击该链接，以便它淡入 0。Haven' t完全想通了那部分。

**编辑**

我希望它可以切换，但是使用切换功能会导致 div 完全从 html 中消失，从而导致其他 div 移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T01:58:01.530

有一个[fadeTo（）](http://api.jquery.com/fadeto/)函数

```
$('#soilink').click(function() {
   $('#soi').fadeTo(400, 1);
}); 
```

如果您尝试创建切换效果，还有一个[fadeToggle()](http://api.jquery.com/fadeToggle/)函数。

```
$('#soilink').click(function() {
   $('#soi').fadeToggle(400);
}); 
```

更新：

这是如何做到这一点的。

```
$('#soilink').click(function() {
   $('#soi').stop().fadeTo(400, $('#soi').css('opacity') == 0 ? 1 : 0); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T02:01:03.710

```
$('#soilink').click(function() {
   $('#soi').fadeToggle();
}); 
```

这是一个示例，如果您需要，如何创建自定义切换：

```
var values=['v1', 'v2'],
    c=0;  // Set to "1" if you have your element initially hidden (display:none;)
$('#element').click(function() {
   console.log( values[c++%2]) ); // v2 // v1 // v2 // v1 // v2 .....
}); 
```

`**[CUSTOM EXAMPLE - LIVE DEMO](http://jsbin.com/ufoxoh/1/edit)**`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T02:04:39.617

为其创建一个`#soi`具有所需完全不透明度的可见类。然后在单击链接时切换它。

```
$('#soilink').click(function() {
    $('#soi').toggleClass('visible', 400);
}); 
```

**[JSFiddle](http://jsfiddle.net/Hb6yq/)**

请注意，这需要[jQuery UI](http://jqueryui.com/toggleClass/)。

# visual-studio - 错误 LNK1104：无法打开文件 'mfc90.lib'

> ID：15330058
> 
> 赞同：0
> 
> 时间：2013-03-11T01:54:42.777
> 
> 标签：visual-studio

我正在使用 Visual Studio 2012 Professional，我的项目引用了使用 VS2008(v90) 构建的静态库。当我使用 VS2012(v110) 构建时，

```
error LNK1104: cannot open file 'mfc90.lib' 
```

发生错误。
更改平台工具集是解决此问题的唯一方法吗？我认为这不是我的解决方案，因为我应该以 .NET Framework 4.5 为目标。（我知道我不能将 .NET Framework 4.0 与 v90 一起使用。如果错了，请纠正我）
请让我知道如何在 VS2012 项目中使用用 VS2008 构建的库。
提前致谢！

附言。如果改变平台工具集是解决问题的唯一方法，那么如何引用使用各种 Visual Studio 编译器构建的多个库？（例如，使用 vs2008、vs2010 和 vs2012 构建的）

**编辑：** 我正在为 3rd 方库（本机 C++）编写一个包装程序，以便在 .NET Framework 上运行。问题是我应该用VS2012构建，但是用VS2008构建的库需要mfc90.lib（VS2012中不包含）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T23:38:54.743

通过链接到 mfc110.lib 而不是 mfc90.lib，我能够让我的项目在 vs2012（从 vs2008 转换）中构建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T02:41:43.440

我认为 MFC 库与您所针对的 .NET Framework 版本没有任何关系。VS2012 会有类似 mfc110.lib 的东西，这可能是你应该使用的。如果要使用 mfc90.lib，它应该在以下文件夹中：

> C:\Program Files\Microsoft Visual Studio 9.0\VC\atlmfc\lib

当然，您需要安装 VS2008 才能使该文件夹存在。

但是 VS2012 不会在该文件夹中查找库依赖项，因此您需要在**Configuration Properties |中指定完整路径 链接器 | 输入 | 附加依赖项**。

# c++ - 分配特定的 char* 数组元素，将数组的所有元素设置为该元素 - C++

> ID：15330060
> 
> 赞同：0
> 
> 时间：2013-03-11T01:54:49.387
> 
> 标签：c++, arrays, char

我正在编写输入文件并将每个单词作为单独的 char* 读取的代码，如下所示：

```
char label[8];
char type[5];
char value[6];

while (!input.eof()) {
    input >> label;
    input >> type;
    input >> value;
    storeSymbols(label, type, value);
} 
```

然后我将它设置为 char* 数组的一个元素，如下所示：

```
void storeSymbols(char* lab, char* type, char* val) {
    labels[symCount] = lab;
    types[symCount] = type;
    values[symCount] = val;
    symCount++; 
```

}

但是，当我打印出 char* 数组的所有元素时，所有元素都与从文件中检索到的最后一个元素相同。例如，如果文档中有三个标签，分别定义为“一”、“二”和“三”，那么在第一次循环结束时，数组将包含“一”，第二次将包含“二”和“二”，第三次将包含“三”“三”和“三”。它还循环了一个额外的时间，将最后一个元素再次添加到数组中，使其成为数组中的四个“三”元素。有谁知道为什么会这样？

我还测试了这个，我将 value 转换为 int 并将其添加到 int 数组中，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T02:09:40.300

您显然使用的是 C++，而不是 C，所以使用`std::string`而不是`char *`存储标签，而`vector`不是数组来存储标签等。

所以：

```
std::vector<std::string> labels, types, values;

std::string label, type, value;
input >> label >> type >> value;

labels.push_back(label);
types.push_back(type);
values.push_back(value); 
```

您重复看到相同输出的原因是因为您将指针推送到相同的固定全局数组，该数组被重复覆盖`input >> label`。`std::string`通过复制和分配内部缓冲区（全部自动完成）来避免这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:12:51.020

读取输入的循环只是将每个项目存储到之前使用的同一个缓冲区中。例如，每次`input >> label`将读取的项目存储到同一个缓冲区中。`char label[8]`因此，在任何时候，该`label`数组都只包含最近读取的项目。

然后，当您尝试保存该信息时，`storeSymbols()`您传入`label`数组的地址 - 每次都使用相同的地址。所以`labels`数组的每个元素（我假设它是一个数组`char*`）都得到相同的指针——它们每个都指向同一个正在更新的缓冲区。

可以让您存储指向不同项目的指针的简单更改可能是用于`strdup()`复制字符串。如果您不允许`strdup()`在作业中使用，则可以在不到 10 行代码中将等价物编写为函数。

如果您使用`strdup()`，您不存储指针的字符串将被动态分配，因此您需要在使用完它们后释放它们：

```
for (i = 0; i < symCount; ++i) {
    free(labels[i]);
    free(types[i]);
    free(values[i]);
} 
```

对于您关于在从输入中读取最后一个项目后循环额外时间的问题，用于读取输入的循环使用`EOF`直接检查的反模式。`EOF`在输入流为“空”时实际尝试执行读取之前不会设置。请参阅[为什么“while (!feof (file))”总是错误的？](https://stackoverflow.com/questions/5431941/while-feof-file-is-always-wrong)和[http://drpaulcarter.com/cs/common-c-errors.php#4.2](http://drpaulcarter.com/cs/common-c-errors.php#4.2)

尝试：

```
while (input >> label >> type >> value) {
    storeSymbols(label, type, value);
} 
```

此外，请确保您的输入缓冲区足够大以容纳您的数据（请记住空终止符）。理想情况下，您会使用在读取输入时会动态扩展的数据类型（如`std::string`）。

# macos - 如何在不成为 postgres 用户并遇到权限问题的情况下访问 PostgreSQL pg_log 文件夹？

> ID：15330061
> 
> 赞同：7
> 
> 时间：2013-03-11T01:54:51.690
> 
> 标签：macos, postgresql

在我的 mac os x 开发机器上，我安装了 postgres 9.1，`/Library/PostgreSQL/9.1`并且 PostgreSQL 的数据目录在`/Library/PostgreSQL/9.1/data`我已经配置了日志记录，所以我从 postgres 中获得了关于服务器上正在执行的 sql 查询的良好日志......等这样这些是写给`/Library/PostgreSQL/9.1/data/pg_log`我正在使用企业数据库预打包的 postgres 二进制文件的。

问题是 $PGDATA 归运行 postgres 进程的 postgres 用户所有。当我用`chmod o+xr data`postgres 更改数据目录的权限时拒绝启动并告诉我它不能从 postgres 目录开始，该目录对除 postgres 用户之外的任何东西都有权限。

```
FATAL:  data directory "/Library/PostgreSQL/9.1/data" has group or world access
DETAIL:  Permissions should be u=rwx (0700) 
```

不得不 sudo 进出 postgres 目录只是为了获取日志文件很烦人。

什么是在 Mac OS X 上配置 postgres 日志记录的好方法，以便可以轻松地从任何登录的用户访问日志文件，而不必使用 sudo 或成为 postgres 用户？

**更新**请参阅下面的答案，了解我用来使其工作的确切配方。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T02:04:21.617

一个简单的事实是 PostgreSQL 不会让你这样做。但是，有一个更好的解决方案，即确保在 postgresql.conf 中设置以下内容：

这是默认设置。如果它被注释掉并且没有另外设置，那没关系：

```
log_destination = 'stderr' 
```

这需要设置为：

```
logging_collector = on 
```

然后，您可以将其指向其他地方：

```
log_directory = 'pg_log' 
```

你可以把它指向你可以访问它的地方。例如，给 postgres 适当的访问权限并指向：

```
log_directory = '/var/log/postgresql' 
```

然后只要它不在数据目录中，您就可以设置您想要的任何权限。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T03:05:09.933

我用来使它工作的步骤。

*   创建一个目录`/var/pg_log`并使其世界可读和可写`chmod o+wxr`
*   在 postgresql.conf 文件中设置以下值

    log_directory = '/var/pg_log'

    日志文件模式 = 0506

*   重新启动 postgres

*   `/var/pg_log`应该有可以使用 mac os x 控制台实用程序监视的 postgres .log 文件。无需 sudo 即可查看其中发生的情况。

注意 Postgres 拒绝在日志文件上允许任何高于 511 的权限。

# cordova - 检测是否在 PhoneGap/Cordova 内运行

> ID：15330066
> 
> 赞同：5
> 
> 时间：2013-03-11T01:55:45.090
> 
> 标签：cordova, native, detect

如何检测在设备内作为 phonegap 应用程序运行的 HTML 页面存在一些问题。

大多数解决方案（[这里](https://stackoverflow.com/questions/10347539/detect-between-a-mobile-browser-or-a-phonegap-application)和[这里](https://stackoverflow.com/questions/8068052/phonegap-detect-if-running-on-desktop-browser)）已经

1.  检测浏览器代理是否为 iPhone/iPad/Android/Blackberry
2.  使用 'deviceready' 事件来检测是否在设备内运行。
3.  使用 URL 检测协议是 HTTP 还是 FILE

还有其他解决方案吗？因为我在编译应用程序之前在本地运行开发 HTML 文件，所以这 3 个对我都不起作用，因此它会检测到 1)。和 2)。将开火和 3）。确实是FILE协议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:18:41.117

在本地文件和移动网站中，deviceready 不会触发，因为它是 PhoneGap 特定事件。所以你可以在设备就绪事件中设置你的 IsRunningOnPhoneGap 标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T01:49:51.573

这有效：

```
if (window.cordova)
{
    document.addEventListener("deviceready", onReady, false);
}
else 
{
    onReady();
} 
```

# java - System.out.print 慢

> ID：15330067
> 
> 赞同：0
> 
> 时间：2013-03-11T01:55:49.730
> 
> 标签：java, optimization, console

我有一个我制作的应用程序，可以将文件的字节打印到系统控制台。（cmd.exe，在我的例子中）它工作得很好，但我希望它运行得更快（对于大文件），所以我优化了它。根据我自己的测试，它从文件中读取字节并将它们存储在 char 数组中的部分在 250,000 字节文件上需要 15 到 32 毫秒，但将这些字符打印到命令窗口需要超过 9000 毫秒！（9 秒，几乎慢了 300 倍！）我试过[http://www.rgagnon.com/javadetails/java-0603.html](http://www.rgagnon.com/javadetails/java-0603.html)但我没有看到明显的改进。

有没有办法更快地打印到控制台，还是我必须使用 JFrame/JTextArea 策略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T02:05:44.787

您的问题是您正在将 250kb 文件打印到控制台。没有人可以阅读或理解它（以 500 行/秒的速度阅读十六进制？），所以你正在做一个完全不必要的步骤。

如果您要将文件转换为十六进制字符表示，请将输出粘贴到文件中，并让用户使用真实的文本查看器查看它，而不是将其转储到控制台中。

正如您所指出的，使用 Swing/awt 组件可以让您使用自己的 GUI 元素来实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T02:08:03.690

写入屏幕上显示的控制台总是比写入文件慢很多。系统必须做很多工作才能将所有这些字符渲染为像素并不断绘制/重新绘制它们，以便它们滚动通过控制台的显示区域。

唯一的治疗方法是不这样做。

但是，如果您想要一个更快的替代方案，仍然允许您查看输出，请将输出通过管道传输到“less”命令或等效命令。写入文件仍然慢，但比将大量文本转储到用户显示器要慢几个数量级。

# c++ - 圆形模板参考结构

> ID：15330073
> 
> 赞同：0
> 
> 时间：2013-03-11T01:56:47.063
> 
> 标签：c++, templates, structure, cyclic-reference

我有一个关于循环模板引用的问题。我想使用类节点和类边缘制作一棵树，如下所示；

```
template <typename EdgeT>
class node
{
public:
    std::vector<EdgeT> edge_out;
    std::vector<EdgeT> edge_in;
};

template <typename NodeT>
class edge
{
public:
    NodeT* src;
    NodeT* dst;
    int weight;
};

template <typename NodeT, typename EdgeT>
class graph
{
public:
    std::vector<NodeT> nodes;
}; 
```

我发现我无法声明图形类 ex：

```
graph< node, edge > g; // <--- this cannot be solved 

graph< node< edge <node.....>, edge< node< edge>>  >  //it makes infinity declaration.. 
```

如何重新定义类的结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T02:45:33.047

这是一种方法：

```
#include <vector>

template<template<typename NodeT,typename T>class EdgeT, typename T=double>
struct Node {
   typedef Node<EdgeT,T> self_type;
   typedef EdgeT<self_type, T> edge_type;
   std::vector<edge_type> edge_out;
   std::vector<edge_type> edge_in;
   T data;
};

template<typename NodeT,typename T>
struct Edge {
   typedef NodeT node_type;
   node_type* src;
   node_type* dst;
   int weight;
};

template<typename NodeT, typename EdgeT=typename NodeT::edge_type>
struct graph {
   typedef NodeT node_type;
   typedef EdgeT edge_type;
   std::vector<NodeT> nodes;
};

int main() {
   typedef graph< Node<Edge> > graph_type;
   graph_type my_graph;
   my_graph.nodes.push_back( graph_type::node_type() );
   my_graph.nodes.push_back( graph_type::node_type() );
   my_graph.nodes.front().edge_out.push_back( {&my_graph.nodes[0], &my_graph.nodes[1], 1} );
   my_graph.nodes.back().edge_in.push_back( {&my_graph.nodes[0], &my_graph.nodes[1], 1} );
} 
```

对于另一种方法，您可以查看如何`boost::variant`处理递归变体。

解决这个问题的另一种方法是更正式的。C++ 模板元编程是一种函数式语言——函数式编程中有多种技术可以描述递归结构而无需使用前向声明。

我打赌某种定点组合器可能会起作用，但我无法弄清楚如何。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T02:09:38.413

您需要弄清楚为什么需要使用模板。例如，如果您想让数据在边缘动态，您可以使用：

```
//foward declaration
template <typename T>
class node
{
std::vector<Edge<T> > edge_out;
std::vector<Edge<T> > edge_in; 
} 

template <typename T>
class edge
{
Node<T>* src;
Node<T>* dst;
T    weight
}

template <typename T>
class graph
{
std::vector<Node<T> > nodes;
} 
```

同样，如果您想在节点中拥有不同的数据。但总的来说，最好事先弄清楚模板的原因。我看过过度模板化的生产代码，它非常难以维护。

# python - 股票报价的正则表达式

> ID：15330079
> 
> 赞同：1
> 
> 时间：2013-03-11T01:57:38.503
> 
> 标签：python, regex

我正在尝试从 Google Finance 中抓取数据，特别是针对股票报价。我正在使用此处找到的答案：[How to create a stock quote fetching app in python](https://stackoverflow.com/questions/5081710/how-to-create-a-stock-quote-fetching-app-in-python)，并且工作正常，但仅适用于谷歌。我是正则表达式的新手，注意到需要更改的内容，但不知道该怎么做。

下面的代码用于解析谷歌报价的数据以获取当前价格。

```
m = re.search('id="ref_694653_l".*?>(.*?)<', content) 
```

694653 是特定于谷歌的。如果我做 Zynga，ZNGA，它应该寻找：

```
<span id="ref_481720736332929_l">3.57</span> 
```

我想要一个搜索的正则表达式

```
id="ref_SOME_NUMBER_l">SOME_PRICE" 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T02:05:35.620

从另一个站点抓取 HTML 很少是最好的解决方案。构建 API 是有原因的。如果您想要机器可读的财务数据，请查看[https://stackoverflow.com/a/10040996/254973 。](https://stackoverflow.com/a/10040996/254973)

如果您坚持要抓取 HTML，请使用提到的 @minitech 之类的库。您永远不应该尝试使用 Regex 解析 HTML。[在这里阅读更多](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T02:25:33.750

```
match = re.search('<span (id="ref_\d*_l">\d*\.?\d*)</span>', content)
print match.group(1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T02:20:19.300

只需以正确的方式进行：

```
import urllib2, re

from bs4 import BeautifulSoup

def get_quote(symbol):
    url = 'http://finance.google.com/finance?q=' + symbol
    soup = BeautifulSoup(urllib2.urlopen(url))

    return float(soup.find('span', id=re.compile(r'ref_\d+_l')).get_text()) 
```

如果您可以解析 HTML 并同样轻松地做到这一点，那么正则表达式并不是真正的答案。

# heroku - Heroku/Play2 的 New Relic 没有响应时间指标

> ID：15330084
> 
> 赞同：1
> 
> 时间：2013-03-11T01:58:26.577
> 
> 标签：heroku, playframework-2.0, newrelic

我有一个在 Heroku 上运行的用 Scala 编写的 Play 2.1 应用程序。我添加了 New Relic 插件，下载了 java 代理并解压缩到 app 文件夹中，更新了我的 JAVA_OPTS，然后推送。服务器日志（即，实例选项卡）效果很好，我可以看到内存、垃圾、负载等。但应用程序监控根本不起作用。概览选项卡上的响应时间、吞吐量或 Apdex 下没有显示任何内容。我应该在这里检查什么明显的东西吗？

该应用程序是所有 REST 服务，没有 HTML，但我认为这与它没有任何关系，因为在概览选项卡上有单独的应用程序服务器和浏览器选项卡，并且它*确实*将我的应用程序服务器识别为 JVM。只是不记录任何数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:52:46.603

*更新*：New Relic 发布了一个 Play2 Java 代理：http: [//blog.newrelic.com/2013/06/05/play-2/](http://blog.newrelic.com/2013/06/05/play-2/)

不幸的是，我认为目前没有从 Play 2.x 应用程序中获取 New Relic 统计数据的好方法。

# java - 为掷硬币创建一个类和方法

> ID：15330086
> 
> 赞同：0
> 
> 时间：2013-03-11T01:58:48.780
> 
> 标签：java, class, methods

我正在做一个处理掷硬币的练习题。我了解其他所有步骤，但我对如何首先设置方法和类感到困惑。我对他们给我的变量感到困惑。问题是，

定义一个具有 2 个实例数据的类 Coin，一个字符串面，可以是“正面”或“反面”，以及一个表示硬币货币价值的 int 值。类中应包含以下方法： - 默认构造函数 - 采用 2 个参数初始化实例数据的构造函数

所以我对每个人的问题是我将如何创建这个？

这是我到目前为止所拥有的：

```
public class Coin
{
    private int Value;
    private String Face;

    public Coin(int a)
    {
        Value = a;
        Face = "heads";
    }

    public Coin(int b, String faceTails)
    {
        Value = b;
        Face = "tails";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:04:44.410

根据您的要求：

定义一个具有 2 个实例数据的类 Coin，一个字符串面，可以是“正面”或“反面”，以及一个表示硬币货币价值的 int 值。类中应包含以下方法：

*   默认构造函数：

如果有一个带参数的构造函数，则需要在 Java 中定义一个空的 bean 构造函数，如下所示：

```
public Coin(){...} 
```

*   一个使用 2 个参数来初始化实例数据的构造函数

您已经正确定义了这个，但您可能不需要带有 1 个参数的构造函数。

```
public Coin(int b, String face)
{
    this.value = b;
    this.face = face;
} 
```

您可能还想为字段值添加一些 getter，以便您可以从类外部访问这些值。

# c# - serialPort 与线程通信，在 monodevelop IDE 中，使用 C#

> ID：15330088
> 
> 赞同：0
> 
> 时间：2013-03-11T01:59:01.850
> 
> 标签：c#, thread-safety, serial-port, monodevelop

我的步骤： 1.使用 System.IO.Ports；使用 system.Threading；

2.SerialPort mySerialPort=new SerialPort("Com1",9200,Parity.None,8,StopBits.One); **3.mySerialPort.Open();** //*异常捕获：System.IO.IOException 已被抛出：没有这样的文件或目录。*

4.myThread=new Thread(new ParameterizedThreadStart(ReadPortThread)); 5.myThread.Start(mySerialPort);

6.ReadPortThread(SerialPort serialPort() //从串口接收数据。

希望您对问题提出一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:01:38.837

我也在进行串行端口通信，我的工作是：

```
 ///<summary>
            ///creating new serialPort, fill it with a portname and give it BaudRate value 9600.
            ///</summary>
            _serialPort = new SerialPort();
            _serialPort.PortName = portname;
            _serialPort.BaudRate = 9600;
            _serialPort.Parity = Parity.None;
            _serialPort.StopBits = StopBits.One;

            try
            {
                if (!_serialPort.IsOpen)
                {
                    //open the port.
                    _serialPort.Open();
                }
                //when the port is open
                if (_serialPort.IsOpen)
                {          
                    _serialUsbThread = new Thread(SerialWorker);
                    _serialUsbThread.Priority = ThreadPriority.Highest;
                    _serialUsbThread.Start();
                }   
            }
            catch (Exception ex)
            {
                Debug.WriteLine(DateTime.UtcNow + " SERIAL: " + ex.Message);
            } 
```

# c# - UpdatePanel 上的 AsyncPostBackTrigger 和 PostBackTrigger 之间的区别？

> ID：15330089
> 
> 赞同：5
> 
> 时间：2013-03-11T01:59:05.933
> 
> 标签：c#, asp.net

我的`GridView`（upnlListing）中有一个（ `UpdatePanel`ucLAD）。在我的里面我`ucLAD`有一个复选框和一个动作`rowClicked`：

```
<asp:UpdatePanel ID="upnlListing" runat="server" >
     <Triggers>
        <asp:AsyncPostBackTrigger ControlID="ucLAD"/>
        <%-- <asp:PostBackTrigger ControlID="ucLAD"/> --%>
     </Triggers>
     <ContentTemplate>
        <asp:Panel ID="pnlRequest" runat="server" style="margin-top:15px; height: auto;">
             <ucgv:BaseGrid runat="server" ID="ucLAD"/>
        </asp:Panel>

     </ContentTemplate>  
</asp:UpdatePanel> 
```

当我使用执行`PostBackTrigger`的操作`rowClicked`时，当我选中复选框时会发生同样的事情，但是当我使用 时`AsyncPostBackTrigger`，我可以选中复选框，但是当我单击行时，`rowClicked`不会触发操作。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T04:56:16.470

如SO问题中所述

[AsyncPostBackTrigger 和 PostBackTrigger 有什么区别？](https://stackoverflow.com/questions/4912614/what-is-the-difference-between-asyncpostbacktrigger-postbacktrigger)

默认情况下，UpdatePanel 内部的控件会导致部分页面更新，外部的控件会导致回发，使用这些触发器可以根据需要更改此行为。

来自[http://seminaarit.codezone.fi/video/devdays-2007/track1/2/2-ASP-dotNET_AJAX_Extensions.ppt](http://seminaarit.codezone.fi/video/devdays-2007/track1/2/2-ASP-dotNET_AJAX_Extensions.ppt)

## AsyncPostBackTrigger

将回发转换为异步回调 通常用于在 UpdatePanel 外部的控件回发时触发更新 如果 ChildrenAsTriggers="false"，可用于指定 UpdatePanel 内的哪些控件应回调而不是回发

## 回发触发器

让 UpdatePanel 中的控件回发 通常用于在 ChildrenAsTriggers="true 时允许某些控件回发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T06:00:36.050

上面对 AsyncPostBackTrigger 和 PostBackTrigger 的理论解释是绝对正确的。在这里，我给你举了这两个的例子：

```
<td style="padding-left: 8px;">
     <asp:UpdatePanel  runat="server" ChildrenAsTriggers="false" UpdateMode="conditional">
         <ContentTemplate>
         <asp:RadioButton ID="RBtn_InventoryPriceWithPurchase" Text="Inventory Price With Purchase" GroupName="ReportAnalysis" runat="server" AutoPostBack="True" OnCheckedChanged="RBtn_InventoryPriceWithPurchase_CheckedChanged"/>
         </ContentTemplate>
          <Triggers>
           <asp:AsyncPostBackTrigger ControlID="RBtn_InventoryPriceWithPurchase"EventName="CheckedChanged"/>
          </Triggers>
          </asp:UpdatePanel>
</td>

<td style="padding-left: 8px;">
    <asp:UpdatePanel runat="server" ChildrenAsTriggers="True" UpdateMode="Always">
     <ContentTemplate>
  <asp:RadioButton ID="RBtn_MerchandisingReport" Text="Merchandising Report" GroupName="ReportAnalysis" runat="server" AutoPostBack="True" OnCheckedChanged="RBtn_MerchandisingReport_CheckedChanged" />
  </ContentTemplate>
  <Triggers>
 <asp:PostBackTrigger ControlID="RBtn_MerchandisingReport"/>
 /Triggers>
 </asp:UpdatePanel> 
```

# java - Tomcat7/Jackson/WebApp部署崩溃/

> ID：15330094
> 
> 赞同：2
> 
> 时间：2013-03-11T01:59:40.817
> 
> 标签：java, tomcat, jackson

我正在尝试在运行 Tomcat 7.0.26 的 Ubuntu 服务器 (12.04) 上部署我的 Web 应用程序的新版本。我试图将它们放置在该区域中以供我计划部署的其他应用程序使用，`-core`而`-annotations`不是包含我使用的 jackson- 库。`-databind``/usr/share/tomcat7/lib`

我可以启动服务器并部署我的应用程序。但是，一旦我这样做，应用程序就会崩溃并关闭 Tomcat。显然 ObjectMapper 没有被正确加载，但它存在于数据绑定 jar 文件中（我已经 jar tvf 对其进行检查）......

对客户端的响应是：

```
HTTP Status 500 -
type Exception report
message
description The server encountered an internal error () that prevented it from fulfilling this request.
exception
java.lang.NullPointerException
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1146)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    java.lang.Thread.run(Thread.java:679) 
```

并且，catalina.out 日志文件在应用程序执行后显示以下内容：

```
Mar 11, 2013 1:42:55 AM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["http-bio-8080"]
Mar 11, 2013 1:42:55 AM org.apache.catalina.core.StandardService stopInternal
INFO: Stopping service Catalina
Mar 11, 2013 1:42:57 AM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["http-bio-8080"]
Mar 11, 2013 1:42:57 AM org.apache.catalina.loader.WebappClassLoader loadClass
INFO: Illegal access: this web application instance has been stopped already.  Could not load com.fasterxml.jackson.databind.ObjectMapper.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
java.lang.IllegalStateException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1587)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546)
    at org.comtor.authserv.APIServer.doPost(APIServer.java:150)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1146)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:679)
Mar 11, 2013 1:42:57 AM org.apache.coyote.AbstractProtocol destroy
INFO: Destroying ProtocolHandler ["http-bio-8080"] 
```

任何帮助在这里表示赞赏。我正在尝试了解发生了什么问题，如何防止它，并在执行 Web 应用程序并发生这种情况时防止服务器停机（崩溃）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:29:46.493

我对 Jersey REST 库也有类似的问题。事实证明，Tomcat 正在使我的应用程序崩溃，因为我包含在我的 WAR 文件中的一些 jar 与我移动到 Tomcat 的 lib 文件夹的 jar 之间存在版本冲突。

我建议您首先在本地开发机器上解决此问题，因为移动 jar 文件更快更容易。从 Tomcat 附带的库开始，并将所有需要的库打包到您的 war 文件中。您的应用程序应该可以正常运行。然后将 jar 文件从您的应用程序移动到 Tomcat 库。您可以在不重新构建应用程序的情况下执行此操作。只需使用 7-zip 之类的解压缩实用程序打开您的战争文件，然后在将它们移动到 Tomcat/lib 时从您的战争文件中删除这些文件。您可能每次都需要重新启动 Tomcat，但我发现以这种方式获得工作配置并不需要很长时间。现在我的war文件只有735KB而不是8MB，这对我来说很重要，因为我的上传速度很慢。

# ios - 我可以在 ios 中同时使用本地通知和推送通知吗？

> ID：15330095
> 
> 赞同：0
> 
> 时间：2013-03-11T01:59:50.113
> 
> 标签：ios, apple-push-notifications, localnotification

在我的应用程序中，是否可以在 iOS 中同时使用本地通知和推送通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:01:30.090

你的问题的简短回答是肯定的。您可以在 iOS 应用程序中使用两者。这是 WWDC 视频的链接： [https ://developer.apple.com/videos/wwdc/2011/?id=517](https://developer.apple.com/videos/wwdc/2011/?id=517)

这是带有示例代码的文档： [https ://developer.apple.com/library/ios/ipad/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html](https://developer.apple.com/library/ios/ipad/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:54:26.453

是的，您可以在同一个应用程序中使用本地和推送通知。

# r - 数字日期到字符串日期

> ID：15330098
> 
> 赞同：-3
> 
> 时间：2013-03-11T02:00:14.430
> 
> 标签：r

我将时间序列日期作为数据框加载到 R 中。但是，当我查看数据时，时间序列日期不会显示为字符串，尽管日期列的类被识别为日期类。如果不使用动物园，我怎样才能让数据集以字符串格式显示日期。这实际上是出于视觉目的，以便能够查看数据是否正确。

```
Date        Open    High    Low Close   Volume  Adj Close
3/8/2013    834.5   834.92  825.05  831.52  2911900 831.52
3/7/2013    834.06  836.62  829.58  832.6   2052700 832.6
3/6/2013    841.03  844 828.81  831.38  2873000 831.38
3/5/2013    828.93  840.15  828.9   838.6   4044100 838.6
3/4/2013    805.3   822.84  805 821.5   2775600 821.5 
```

在 R 中显示为：

```
Date    Open    High    Low Close   Volume  Adj.Close
15772   834.50  834.92  825.05  831.52  2911900 831.52
15771   834.06  836.62  829.58  832.60  2052700 832.60
15770   841.03  844.00  828.81  831.38  2873000 831.38
15769   828.93  840.15  828.90  838.60  4044100 838.60
15768   805.30  822.84  805.00  821.50  2775600 821.50
15765   797.80  807.14  796.15  806.19  2175400 806.19 
```

我正在使用命令

```
data=read.csv("file location",header=T,colClasses=c("Date","numeric","numeric","numeric","numeric","numeric","numeric")) 
```

这是输入输出：

```
dput(head(data))
structure(list(Date = structure(c(15772, 15771, 15770, 15769, 
15768, 15765), class = "Date"), Open = c(834.5, 834.06, 841.03, 
828.93, 805.3, 797.8), High = c(834.92, 836.62, 844, 840.15, 
822.84, 807.14), Low = c(825.05, 829.58, 828.81, 828.9, 805, 
796.15), Close = c(831.52, 832.6, 831.38, 838.6, 821.5, 806.19
), Volume = c(2911900, 2052700, 2873000, 4044100, 2775600, 2175400
), Adj.Close = c(831.52, 832.6, 831.38, 838.6, 821.5, 806.19)), .Names = c("Date", 
"Open", "High", "Low", "Close", "Volume", "Adj.Close"), row.names = c(NA, 
6L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:14:29.180

您将要使用`as.Date`并且必须知道数据的来源日期。例如，假设您知道您的日期数据从 开始`1970-01-01`，您可以这样做来转换：

```
dates <- c(1314, 1315, 1316)
as.Date(dates, format="%Y-%m-%d", origin="1970-01-01")

[1] "1973-08-07" "1973-08-08" "1973-08-09" 
```

**更新**

根据里卡多的评论，您的原始数据似乎是`1997-05-28`

```
as.Date(dates, format="%Y-%m-%d", origin="1997-05-28")

[1] "2001-01-01" "2001-01-02" "2001-01-03" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:56:47.417

您可以将日期列保留为字符，然后将其转换为日期。

或者如 read.table 的帮助中所示：

> 否则需要有一个 as 方法（来自包方法）用于从“字符”转换为指定的正式类。

请参阅[这个问题](https://stackoverflow.com/questions/13022299/specify-date-format-for-colclasses-argument-in-read-table-read-csv)如何应用它。

```
setClass("myDate")
setAs("character","myDate", function(from) as.Date(from, format="%d/%m/%Y"))

df <- read.table(header = TRUE, colClasses=c("myDate","numeric","numeric","numeric","numeric","numeric","numeric"),
text = 'Date  Open  High  Low Close VolumeAdj Close
3/8/2013    834.5   834.92  825.05  831.52  2911900 831.52
3/7/2013    834.06  836.62  829.58  832.6   2052700 832.6
3/6/2013    841.03  844 828.81  831.38  2873000 831.38
3/5/2013    828.93  840.15  828.9   838.6   4044100 838.6
3/4/2013    805.3   822.84  805 821.5   2775600 821.5')

str(df)
'data.frame':   5 obs. of  7 variables:
 $ Date     : Date, format: "2013-08-03" "2013-07-03" "2013-06-03" ...
 $ Open     : num  834 834 841 829 805
 $ High     : num  835 837 844 840 823
 $ Low      : num  825 830 829 829 805
 $ Close    : num  832 833 831 839 822
 $ VolumeAdj: num  2911900 2052700 2873000 4044100 2775600
 $ Close.1  : num  832 833 831 839 822 
```

# jquery - div中的值未显示

> ID：15330103
> 
> 赞同：0
> 
> 时间：2013-03-11T02:01:08.907
> 
> 标签：jquery, html

我不确定我没有得到显示`.percentage`应该通过 jQuery 动态填充的 div 的值。

**代码：**

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<link rel="stylesheet" type="text/css" href="css/styles.css" />
<!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
var changedData = $('.changedData').val().length;
var originalData = $('.originalData').val().length;

var precentageOfChange = changedData/originalData * 100 - 100
$('.percentage').append(precentageOfChange);
</script>
</head>
<body>
    <div class="org">
        <form action="#" method="POST">
            <fieldset>
                <legend>Orginal Data</legend>
            </fieldset>
            <textarea class="orginalData"></textarea>
        </form>
    </div>
        <div class="changed">
        <form action="#" method="POST">
            <fieldset>
                <legend>Changed Data</legend>
            </fieldset>
            <textarea class="changedData"></textarea>
        </form>
    </div>
    <div class="percentage"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T02:04:01.360

## [***jsFiddle 演示***](http://jsfiddle.net/pzV3u/1/)

您的代码需要处于就绪回调中：按原样，脚本在创建 DOM 元素之前执行，因此当您尝试运行它时它们还不存在。其次，你应该使用[`html`](http://api.jquery.com/html)not [`append`](http://api.jquery.com/append)。您正在尝试设置`innerHTML`，而不是创建子元素。

[`change`](http://api.jquery.com/change)每次值更改时使用来运行它。

```
<script>
    $(document).ready(function () {
        $('.originalData').change(function () {
            $('.changedData').val($(this).val());
            $('.percentage').text('0%');

        });
        $('.changedData').change(function () {
            var changedData = $(this).val().length;
            var originalData = $('.originalData').val().length;

            var percentageOfChange = changedData / originalData * 100 - 100
            $('.percentage').text(percentageOfChange+'%');
        });
    });
</script> 
```

# android - Android：升级sdk后无法启动模拟器

> ID：15330109
> 
> 赞同：1
> 
> 时间：2013-03-11T02:01:42.360
> 
> 标签：android, android-emulator, adb

实际上，我问了一个与此类似的问题，但我无法指出主要问题。[升级 Android SDK 后 Android Emulator 未显示](https://stackoverflow.com/questions/15236727/android-emulator-is-not-showing-up-after-upgrading-android-sdk)

将我的 android sdk 从 4.1.2 (API 16) 升级到 4.2.2 (API 17) 后我遇到了这个问题

我的模拟器没有启动，我怀疑主要原因是升级到更高版本的 android sdk。

我知道我做错了什么，但我真的很难弄清楚。我尝试了很多建议，例如检查坐标`emulator-user.ini`并删除设备并创建一个新设备。到目前为止，没有什么对我有用。

截至目前，我已经安装了 2 个 sdk，4.1.2(API 16) 和 4.2.2(API 17) 以及一些附加功能，例如`Google Play services`.

在工具中，我有`Android SDK Tools Rev. 21.1`并且`Android SDK Platform-tools Rev. 16.0.2`

我使用的是 elipse indigo 和 ubuntu 12.04。

据我所知，在升级 android sdk 之前，这一切正常。

请帮助我指出我是否做错了什么以及如何解决它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:09:15.007

> 作为一种解决方法，您可以定义环境变量 ANDROID_SDK_HOME 以指向包含您的 .android 目录的目录。模拟器和 SDK 管理器会正确选择它。
> 
> 将对此进行调查。当未定义此变量时，SDK 管理器和模拟器获取用户目录的方式可能有所不同。

[从这里](https://code.google.com/p/android/issues/detail?id=19084)

还有[这个方法](https://code.google.com/p/android/issues/detail?id=19084#c19)：

> 在 C: 上的用户目录中打开命令提示符（如果您将所有特殊的 windows 文件夹重新定位到 D: 那么它们应该只是用户 C: 文件夹中的隐藏 Appdata 文件夹）。使用 mklink 程序对 D: 上的 .android 目录进行硬链接。因此，如果用户 John Doe 将他的所有用户文件从 C:\Users 移动到 D:，那么建立目录连接的命令将是：
> 
> mklink /J "C:\Users\John Doe.android" "D:\John Doe.android"
> 
> 现在，当 ADT 插件尝试在 C: 上引用 .android 时，NTFS 将请求发送到 D: 并且模拟器正确启动。

# llvm - ARM / RaspberryPi 的 LLVM 构建选项

> ID：15330110
> 
> 赞同：5
> 
> 时间：2013-03-11T02:01:47.120
> 
> 标签：llvm, raspberry-pi, raspbian

我正在寻求澄清 Raspbian 上 LLVM 3.2 的最佳构建选项是什么

我已经获取了 3.2 的 LLVM 源代码，我的配置是：

```
cd llvm-3.2.src
./configure --build=armv6-unknown-linux-gnueabi \
--host=armv6-unknown-linux-gnueabi \
--target=armv6-unknown-linux-gnueabi --with-cpu=arm1176jzf-s \
--with-float=hard --with-abi=aapcs-vfp --with-fpu=neon \
--enable-targets=arm --enable-optimized --enable-assertions
make REQUIRES_RTTI=1
sudo make install 
```

我听说它需要花费相当多的时间来构建。它现在已经运行了几个小时，但很高兴让它运行。

这是一个长期的构建项目，所以如果需要，我对重做构建没有任何疑虑:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T23:18:24.130

我建议为 Raspbian 交叉编译 LLVM。在 Pi 上构建它需要很长时间。

`debootstrap`首先，使用（或者，只需克隆您现有的 Raspbian 安装或解压缩下载的图像）获得一个可用的 root fs 。您可能需要用相对替换一些绝对符号链接，注意构建错误。

确保你有一个可以工作且足够新的 clang 安装（不要忘记使用 ARM 目标支持来构建它）。

然后，使用以下 CMake 工具链定义交叉编译 LLVM（在这个阶段你不应该 chroot 进入你的根 fs！）：

```
 set(toolchain_dir /path/to/your/chroot-raspbian-armhf/ )
set(toolchain_bin_dir ${toolchain_dir}/usr/bin)
set(toolchain_inc_dir ${toolchain_dir}/usr/include) # was /include
set(toolchain_lib_dir ${toolchain_dir}/usr/lib)

set(CMAKE_SYSTEM_NAME Linux CACHE INTERNAL "system name")
set(CMAKE_SYSTEM_PROCESSOR arm CACHE INTERNAL "processor")
set(CMAKE_C_COMPILER clang)
set(CMAKE_CXX_COMPILER clang++)
set(CMAKE_C_FLAGS "-O2 -integrated-as -target armv6-linux-gnueabihf -mfloat-abi=hard --sysroot=${toolchain_dir}" CACHE INTERNAL "c compiler flags")
set(CMAKE_CXX_FLAGS "-O2 -integrated-as -target armv6-linux-gnueabihf -mfloat-abi=hard --sysroot=${toolchain_dir}" CACHE INTERNAL "cxx compiler flags")

set(link_flags "-L${toolchain_lib_dir} -ldl")

set(CMAKE_EXE_LINKER_FLAGS ${link_flags} CACHE INTERNAL "exe link flags")
set(CMAKE_MODULE_LINKER_FLAGS ${link_flags} CACHE INTERNAL "module link flags")
set(CMAKE_SHARED_LINKER_FLAGS ${link_flags} CACHE INTERNAL "shared link flags")
set(CMAKE_FIND_ROOT_PATH ${toolchain_lib_dir} CACHE INTERNAL "cross root directory")
set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM BOTH CACHE INTERNAL "")
set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY CACHE INTERNAL "")
set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY CACHE INTERNAL "") 
```

（使用`cmake -DCMAKE_TOOLCHAIN_FILE=/path/to/the/file/above.txt`）

请注意，目标应该是`armv6-linux-gnueabihf`，而不是`armv6-linux-gnueabi`。

# asp.net-mvc - 如何根据 ViewData 中的值隐藏标签

> ID：15330112
> 
> 赞同：1
> 
> 时间：2013-03-11T02:02:32.307
> 
> 标签：asp.net-mvc, razor

我有一个名为的部分视图：

```
@Html.Partial("PersonSearch", new ViewDataDictionary { { "searchtypeselectvisible", false } }) 
```

在剃刀文件中，我有 html：

```
<div class="searchtypeselect" >
        <input type="radio" name="searchtype" value="person" checked="checked" />Person
        <input type="radio" name="searchtype" value="organisation" class="orgsearchradiobtn" />Organisation
    </div> 
```

我知道我可以使用以下方法访问剃须刀中的数据：

```
@ViewData["searchtypeselectvisible"] 
```

有人可以解释一下，如果通过的值为 false，我如何使用类 searchtypeselect 隐藏 div，如果值为 true，则显示它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:18:14.330

条件属性渲染[条件属性渲染](http://weblogs.asp.net/jgalloway/archive/2012/02/16/asp-net-4-beta-released.aspx)

如果您有一个可能为空的属性，过去您需要进行空检查以避免写出空属性，如下所示：

```
<div @{if (myClass != null) { <text>class="@myClass"</text> } }>Content</div> 
```

现在 Razor 能够自动处理这个问题，所以你可以写出属性。如果为 null，则不写入该属性：

```
<div class="@myClass">Content</div> 
```

所以如果@myClass 为空，输出就是这样：

```
<div>Content</div> 
```

试试这样

```
@(ViewData["searchtypeselectvisible"]==true ? "yourDisplayClass" : "yourHidingDivClass"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T02:11:18.037

用`@{ if{ } }`来设置属性样式`display: none`，简单。

# c# - 使用 NAudio 播放 mp3 文件

> ID：15330114
> 
> 赞同：0
> 
> 时间：2013-03-11T02:02:46.787
> 
> 标签：c#, naudio

我按照 NAudio 网站上关于如何加载和播放 mp3 文件的教程进行操作，但即使我将音频文件放在正确的目录中，每当我运行时，程序都会因“vshost32.exe 已停止工作”而崩溃。有任何想法吗？我在 Windows 7 上使用 Visual Studio 10.0。

这是教程给我的（确切的）代码：

```
 namespace NAudioTest
   {
       class Program
    {
    static IWavePlayer waveOutDevice;
    static WaveStream mainOutputStream;
    static WaveChannel32 volumeStream;

    static void Main(string[] args)
    {
        waveOutDevice = new WaveOut();
        mainOutputStream = CreateInputStream("Kalimba.mp3");
        waveOutDevice.Init(mainOutputStream);
        waveOutDevice.Play();
    }

    private static WaveStream CreateInputStream(string filename)
    {
        WaveChannel32 inputStream;
        if (filename.EndsWith(".mp3"))
        {
            WaveStream mp3Reader = new Mp3FileReader(filename);
            inputStream = new WaveChannel32(mp3Reader);
        }
        else
        {
            throw new InvalidOperationException("Unsupported extension");
        }
        volumeStream = inputStream;
        return volumeStream;
    }

}
} 
```

（抱歉格式不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:26:01.387

没关系，使用此代码使音频文件正常工作：

[如何使用 NAudio 播放 MP3 文件](https://stackoverflow.com/questions/2488426/how-to-play-a-mp3-file-using-naudio?rq=1)

```
 class Program
 {
     static void Main()
     {
         using (var rdr = new Mp3FileReader(filename))
         using (var waveOut = new WaveOut(WaveCallbackInfo.FunctionCallback()))
         {
              waveOut.Play();
              while (waveOut.PlaybackState == PlaybackState.Playing)
              {
                  Thread.Sleep(100);
              }
         }
     }
  } 
```

这是否更好？虽然我不太确定 WaveOutEvent 的去向。感谢您所有的帮助！！

# php - 使用 Codeigniter PHP 在我的管理面板中显示 Google Analytics 数据的最佳 API？

> ID：15330121
> 
> 赞同：3
> 
> 时间：2013-03-11T02:03:26.357
> 
> 标签：php, codeigniter, google-analytics, google-analytics-api

谷歌上有很多这方面的结果，但大多数都超过一年了。

我只是想在我的管理员中显示一些带有 jQ​​uery 的漂亮图表，包括每天的访问次数、访问次数最多的页面以及访问次数等。我不想将访问的数据存储在我的数据库中，谷歌分析中的那个是完美的 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:13:18.097

看看[gapi-google-analytics-php-interface](https://code.google.com/p/gapi-google-analytics-php-interface/)。该代码有许多示例，应该对您有用。

代码已经有一段时间没有更新了，所以你应该[阅读这个](https://code.google.com/p/gapi-google-analytics-php-interface/issues/detail?id=75&q=https://developers.google.com/)关于在源代码中更新哪些 URL 的错误。

# javascript - 如何使用 .text 或 .html 编写特殊字符？

> ID：15330133
> 
> 赞同：3
> 
> 时间：2013-03-11T02:05:39.610
> 
> 标签：javascript, jquery, special-characters

我正在制作纸牌游戏，所以我制作了这个脚本，但我不知道为什么它不将符号输出为♥，而只是`&hearts;`作为字符串输出，有人知道为什么吗？

```
$(document).ready(function() {

function makeCard(kind) {
    var
        card = $('<div>', { class: 'card' }),
        color = (kind == 'hearts' || kind == 'diams') ? 'red' : 'black',
        upper = $('<div>', { class: 'upper card-symbol ' + color, text: '\&' + kind + '\;' }),
        lower = $('<div>', { class: 'lower card-symbol ' + color, text: '\&' + kind + '\;' });

    card.append(upper).append(lower);
    card.appendTo('body');
}

makeCard('hearts');

}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T02:10:59.473

你想要 html，而不是文本：

[http://jsfiddle.net/cxNqK/2/](http://jsfiddle.net/cxNqK/2/)

```
 upper = $('<div>', {
        'class': 'upper card-symbol ' + color,
        html: '\&' + kind + '\;'
    }),
    lower = $('<div>', {
        'class': 'lower card-symbol ' + color,
        html: '\&' + kind + '\;'
    }); 
```

# qt - 运行 QT hello opengl 时出现“着色器程序未链接”

> ID：15330135
> 
> 赞同：0
> 
> 时间：2013-03-11T02:05:47.230
> 
> 标签：qt, opengl, shader

我已经从[http://releases.qt-project.org/learning/developerguides/qtopengltutorial/OpenGLTutorial.pdf](http://releases.qt-project.org/learning/developerguides/qtopengltutorial/OpenGLTutorial.pdf)下载了 QT OpenGL 教程，并尝试运行其中最简单的示例，它只是在顶部绘制一个三角形黑色背景。

我设法编译了这个例子，但是当我运行它时，我只得到一个黑色窗口，控制台报告以下内容：

> 开始 /home/minas/Desktop/hello-opengl-build-Desktop_Qt_5_0_1_GCC_64bit-Debug/hello-opengl... QGLShaderProgram::uniformLocation( mvpMatrix ): 着色器程序未链接 QGLShaderProgram::uniformLocation( color ): 着色器程序未链接QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::uniformLocation( mvpMatrix ): 着色器程序已链接未链接 QGLShaderProgram::uniformLocation( color ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ):着色器程序未链接 QGLShaderProgram::uniformLocation( mvpMatrix ): 着色器程序未链接 QGLShaderProgram::uniformLocation( color ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::uniformLocation( mvpMatrix ): 着色器程序未链接 QGLShaderProgram::uniformLocation( color ): 着色器程序未链接 QGLShaderProgram::attributeLocation ( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接着色器程序未链接着色器程序未链接uniformLocation( mvpMatrix ): 着色器程序未链接 QGLShaderProgram::uniformLocation( color ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram ::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::uniformLocation( mvpMatrix ): 着色器程序未链接 QGLShaderProgram::uniformLocation( color ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接已链接 QGLShaderProgram::attributeLocation( vertex )：未链接着色器程序 QGLShaderProgram::attributeLocation( vertex )：未链接着色器程序uniformLocation( mvpMatrix ): 着色器程序未链接 QGLShaderProgram::uniformLocation( color ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram ::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::uniformLocation( mvpMatrix ): 着色器程序未链接 QGLShaderProgram::uniformLocation( color ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接已链接 QGLShaderProgram::attributeLocation( vertex )：未链接着色器程序 QGLShaderProgram::attributeLocation( vertex )：未链接着色器程序uniformLocation( color ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram ::uniformLocation( mvpMatrix ): 着色器程序未链接 QGLShaderProgram::uniformLocation( color ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接链接的 QGLShaderProgram::attributeLocation( vertex )：着色器程序未链接uniformLocation( color ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram ::uniformLocation( mvpMatrix ): 着色器程序未链接 QGLShaderProgram::uniformLocation( color ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接链接的 QGLShaderProgram::attributeLocation( vertex )：着色器程序未链接着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::uniformLocation( mvpMatrix ): 着色器程序未链接 QGLShaderProgram::uniformLocation( color ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::uniformLocation( mvpMatrix ): 着色器程序未链接 QGLShaderProgram::uniformLocation( color ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接 QGLShaderProgram::attributeLocation( vertex ): 着色器程序未链接

.pro 文件看起来像这样（“unix:!mac”部分是我添加的，所以它会找到 OpenGL .so 文件）。

```
QT += core gui opengl

TARGET = hello-opengl

TEMPLATE = app

SOURCES += main.cpp\
           glwidget.cpp

HEADERS += glwidget.h

OTHER_FILES += fragmentShader.fsh\
               vertexShader.vsh

RESOURCES += resources.qrc

unix:!mac{
    QMAKE_LFLAGS += -Wl,--rpath=/usr/lib64/nvidia-current
    QMAKE_LFLAGS += -L/usr/lib64/nvidia-current
} 
```

“glxinfo | grep -i opengl”的输出是

```
OpenGL vendor string: NVIDIA Corporation
OpenGL renderer string: GeForce 9800 GT/PCIe/SSE2
OpenGL version string: 2.1.2 NVIDIA 304.64
OpenGL shading language version string: (null)
OpenGL extensions: 
```

并且进行实际渲染的代码部分是

```
void GlWidget::paintGL()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    QMatrix4x4 mMatrix;
    QMatrix4x4 vMatrix;

    // shaderProgram initialized in initializeGL()    
    shaderProgram.bind();

    // "mvpMatrix", "color" and "vertex" do exist in the shaders

    shaderProgram.setUniformValue("mvpMatrix", pMatrix * vMatrix * mMatrix);

    shaderProgram.setUniformValue("color", QColor(Qt::white));

    shaderProgram.setAttributeArray("vertex", vertices.constData());
    shaderProgram.enableAttributeArray("vertex");

    glDrawArrays(GL_TRIANGLES, 0, vertices.size());

    shaderProgram.disableAttributeArray("vertex");

    shaderProgram.release();
} 
```

另外，作为一个附带问题，为什么“glxinfo | grep -i opengl”的输出包含该行

> OpenGL 着色语言版本字符串：(null)

（对我来说似乎有点相关......是吗？）

* * *

## 编辑 1

是在我的`shaderProgram`子类中声明的，`QGLWidget`我这样调用`GLWidget`并初始化`initializeGL`它：

```
void GlWidget::initializeGL()
{
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_CULL_FACE);

    qglClearColor(QColor(Qt::black));

    shaderProgram.addShaderFromSourceFile(QGLShader::Vertex, ":/vertexShader.vsh");
    shaderProgram.addShaderFromSourceFile(QGLShader::Fragment, ":/fragmentShader.fsh");
    shaderProgram.link();

    vertices << QVector3D(1, 0, -2) << QVector3D(0, 1, -2) << QVector3D(-1, 0, -2);
} 
```

* * *

## 编辑 2

这是我的 initializeGL() 方法：

```
void GlWidget::initializeGL()
{
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_CULL_FACE);

    qglClearColor(QColor(Qt::black));

    shaderProgram.addShaderFromSourceFile(QGLShader::Vertex, ":/vertexShader.vsh");
    shaderProgram.addShaderFromSourceFile(QGLShader::Fragment, ":/fragmentShader.fsh");
    shaderProgram.link();

    vertices << QVector3D(1, 0, -2) << QVector3D(0, 1, -2) << QVector3D(-1, 0, -2);
} 
```

并把

```
qDebug() << shaderProgram.log();
exit(0); 
```

在上面调用 link() 之后立即不会产生任何输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T02:55:29.087

刚刚看到这个。很奇怪，因为`link()`返回的是 true，但它声称程序没有链接？

原来我需要在打电话`bindAttributeLocation()`之前将两个语句移到。`link()`显然，如果你使用`bindAttributeLocation()`在链接后的程序上使用，它将导致该程序不再链接。

错误的：

```
 program.link();

    program.bindAttributeLocation("position", 0);
    program.bindAttributeLocation("texcoord", 1); 
```

正确的：

```
 program.bindAttributeLocation("position", 0);
    program.bindAttributeLocation("texcoord", 1);

    program.link(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-22T14:38:39.417

我也发现了这个问题，我只是这样`FromSourceCode`使用`FromSourceFile`：

```
shaderProgram.addShaderFromSourceCode(QGLShader::Fragment,  "uniform vec4 color;\n"
                                      "out vec4 fragColor;\n"
                                      "void main(void)\n"
                                      "{\n"
                                      "   fragColor = color;\n"
                                      "}"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T02:33:06.883

> // shaderProgram 在类构造函数中被初始化

如果您在类构造函数中编译和链接着色器源文件，那么这很可能是罪魁祸首。您应该覆盖 QGLWidget 的 initializeGL 成员并在那里对 OpenGL 对象进行初始化。由于尚未建立 OpenGL 上下文，因此您无法更早地执行此操作，因此您无法创建或管理任何 OpenGL 对象。

# java - 我如何让这个程序接受另一个输入？

> ID：15330141
> 
> 赞同：-1
> 
> 时间：2013-03-11T02:06:28.240
> 
> 标签：java, try-catch

我已经在这条线上发表评论了。为什么该行不接受另一个输入？然后不断重复，直到输入一个整数。

```
import java.util.*;

class ScanNumbers{

   public static void main(String[] args){

      Scanner scan = new Scanner(System.in);

      int[] NumberEntry = new int[6];

         for (int i = 1; i < NumberEntry.length; i++){

            boolean isInteger = false;

            while (!isInteger){

            try {
                System.out.print("Entry " +i + "/5, enter an integer value: ");
                NumberEntry[i] = scan.nextInt();
               isInteger = true;
             }

            catch (Exception e){
               System.out.print("Entry " +i + "/5, Please enter only an integer value: ");
               NumberEntry[i] = scan.nextInt(); //Right here, I would like to ask again, why is this line not doing the job?
            }
         }
      }
         Arrays.sort(NumberEntry);
         System.out.print("The max integer is: " +  + NumberEntry[NumberEntry.length-1]);
   }
} 
```

我不能告诉它再试一次吗？

编辑1：哈哈，哦，天哪，谢谢，我删除了该行，但现在输出不断重复“输入1/5，输入一个整数值：”

编辑2：谢谢！现在工作正常！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T02:17:49.083

发生的事情是无效的输入被保存在扫描仪中。您必须跳过输入，才能返回接受有效数据。如果不这样做，异常将被一遍又一遍地捕获。还有一种更简单的方法来做你想做的事情。试试这个：

```
try {
    System.out.print("Entry " +i + "/5, enter an integer value: ");
    NumberEntry[i] = scan.nextInt();
}
catch (Exception e){
    scan.next();
    i--;
    continue;
} 
```

这会跳过不需要的输入。它还会在同一迭代中重新启动您的循环。

# javascript - Javascript 舍入问题

> ID：15330148
> 
> 赞同：0
> 
> 时间：2013-03-11T02:07:39.770
> 
> 标签：javascript

我尝试使用这个：

```
//var value = "39.99";
//var value = "0.255";
var list = ["39.99", "0.255", "0.306", "0.645", "2.505", "5.726", "9.649", "9.999", "10.01", "0.155", "0.355", "10.05", "14.75", "14.02", "2.405", "14.54","2.485"];

var result;

for( i in list ){
    //result = processRounding(parseFloat(list[i]).toFixed(3));
    //result = parseFloat(list[i]).toFixed(2);
    result = test(parseFloat(list[i]).toFixed(3), 2);
    console.log("RESULT["+i+"]: "+ format("#,##0.00", result));
}

function test(value, precision) {
    var precision = precision || 0,
    neg = value < 0,
    power = Math.pow(10, precision),
    value = Math.round(value * power),
    integral = String((neg ? Math.ceil : Math.floor)(value / power)),
    fraction = String((neg ? -value : value) % power),
    padding = new Array(Math.max(precision - fraction.length, 0) + 1).join('0');

    return precision ? integral + '.' +  padding + fraction : integral;
}

function processRounding (value){
    //console.log( Math.ceil(value*100) + " " +  Math.ceil(value*100) / 2);
    var remainder = parseFloat(value % 1).toFixed(2);
    var floor     = parseInt(Math.floor(value));
    console.log(floor + " " + remainder);
    if(Math.floor(value) != 0 && Math.floor(value) > 10){
        if( parseFloat(remainder) > 0.50 || parseFloat(remainder) > 0.05 ){
            console.log("CEIL");
            value = Math.ceil(value*10)/10;
        }else{
            value = value;
        }          
    }else{
        if( parseFloat(remainder) > 0.50 || parseFloat(remainder) > 0.05 ){
            console.log("ROUND");
            value = Math.round(value*100)/100;
        }else{
            value = value;
        } 
    }

    return value;
} 
```

[[这里的jsFiddle](http://jsfiddle.net/aabanaag/2JaRY/2/) ]

但是我看到的问题是，当值类似于`"2.405"`它所做的事情时，无论我是在我的 jsfiddle 示例中使用函数`test`还是函数，都将其设为“2.40”。`processRounding`

关于如何将结果变成 2.41 的任何想法？从技术上讲，由于最后一位数字是“5”，因此它应该向上取整。

**更新**

使用`result = test(parseFloat(list[i]).toFixed(3), 2);`

```
var list = ["39.99", "0.255", "0.306", "0.645", "2.505", "5.726", "9.649", "9.999", "10.01", "0.155", "0.355", "10.05", "14.75", "14.02", "2.405", "14.54","2.485"]; 
```

会导致这个：

```
RESULT[0]: 39.99
RESULT[1]: 0.26 
RESULT[2]: 0.31 
RESULT[3]: 0.65 
RESULT[4]: 2.51 
RESULT[5]: 5.73 
RESULT[6]: 9.65 
RESULT[7]: 10.00 
RESULT[8]: 10.01 
RESULT[9]: 0.16 
RESULT[10]: 0.36
RESULT[11]: 10.05
RESULT[12]: 14.75
RESULT[13]: 14.02
RESULT[14]: 2.40
RESULT[15]: 14.54
RESULT[16]: 2.49 
```

请注意，在列表中有一个“2.405”值，在结果 [14] 中它是“2.40”，它应该在 2.41 中，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T02:11:37.507

我认为您希望在 JavaScript 中有一个舍入函数。

```
function trueRound(value, digits){
    return (Math.round((value*Math.pow(10,digits)).toFixed(digits-1))/Math.pow(10,digits)).toFixed(digits);
} 
```

可能重复的问题：[使用 javascript 舍入小数点](https://stackoverflow.com/questions/5535394/round-off-decimal-using-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T02:13:57.990

您首先将余数减少到小数点后 2 位：`parseFloat(value % 1).toFixed(2);`

这意味着当您`2.405`将余数解析`.40`为时，它将无法区分 2.400 和 2.409

如果要正确舍入，则需要保留全部余数。

Roger Ng 有一个很好的解决方案。我只是想解释为什么你的从一开始就没有机会工作。

# playframework - 路由文件中的字符编码，请求 URL 中无法识别的扫描字母

> ID：15330151
> 
> 赞同：0
> 
> 时间：2013-03-11T02:08:05.947
> 
> 标签：playframework, playframework-2.0

无法识别url eg 中的 Scandic 字母（如 äöå）`localhost:9000/ääliöurli`，路由无法到达想要的位置。

路由文件：

`GET /ääliöurli controllers.Application.aalio()`

问题是；我可以将影响不仅仅是视图的 UTF-8 字符编码的选择放入一些配置文件或运行参数中吗？

还是有一种简单的方法可以在代码中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:42:50.123

这是一个已知的错误，有一个 wip 拉请求：[https ://github.com/playframework/Play20/pull/796](https://github.com/playframework/Play20/pull/796)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:59:00.397

在这种情况下，您有两种解决方案：

首先肯定很不舒服，它正在放置 UTF 编码的路由......

```
GET /%C3%A4%C3%A4li%C3%B6urli 
```

`catch-all`其次是在路线配置和处理路线的末尾编写路线，即。有数据库支持。在 Play 2.0 包罗万象的路线中，它的路线描述为[`Dynamic parts spanning several /`](http://www.playframework.com/documentation/2.0.4/JavaRouting)

我在少数地方成功使用了第二种方法，无论如何，至少对于第一次实施，您可能需要保留几个小时来规划和编码解决方案。

# sql - 使用表上的sql查询

> ID：15330152
> 
> 赞同：0
> 
> 时间：2013-03-11T02:08:10.880
> 
> 标签：sql, oracle, top-n, dense-rank

我的员工表有 3 列：

*   `emp_id`,
*   `emp_sal`,
*   `dept_id`.

我需要为每个部门找到薪水最高的员工。我需要返回`emp_id`，`emp_sal`并`dept_id`为那些员工。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T02:18:38.113

`ORACLE`支持常用的表表达式和窗口函数，

```
WITH employees_sal
AS
(
    SELECT  emp_id,
            emp_sal,
            dept_id,
            DENSE_RANK() OVER(PARTITION BY dept_id ORDER BY emp_sal DESC) ranks
    FROM    employee
)
SELECT  emp_id, emp_sal, dept_id
FROM    employees_sal
WHERE   ranks = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!4/bceb8/6)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T02:23:10.673

```
SELECT EMP_ID,EMP_SAL,DEPT_ID 
FROM EMP
WHERE (DEPT_ID,EMP_SAL) IN (SELECT DEPT_ID,MAX(EMP_SAL) 
                           FROM EMP GROUP BY DEPT_ID) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T02:20:40.007

无需使用 CTE。

```
SELECT a.emp_id, a.emp_sal, a.dept_id
FROM employ a
WHERE a.emp_sal = 
    (SELECT MAX(b.emp_sal)
    FROM employ b
    WHERE b.dept_id = a.dept_id
    AND A.emp_id = B.emp_id) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T18:46:50.080

```
SELECT * FROM 
( 
 SELECT deptno, ename, sal
     , MAX(sal) OVER (PARTITION BY deptno) dept_max_sal 
     , ROW_NUMBER() OVER (PARTITION BY deptno ORDER BY sal desc) rno
   FROM scott.emp 
 )
 WHERE sal = dept_max_sal
  -- AND rno = 1 -- Optional to eliminate same salary employee --
 ORDER BY deptno, sal DESC, ename
/

DEPTNO    ENAME    SAL    DEPT_MAX_SAL    RNO
-----------------------------------------------
10        KING     5000    5000           1
20        FORD     3000    3000           2    -- same sal --
20        SCOTT    3000    3000           1    -- same sal --
30        BLAKE    2850    2850           1 
```

# ruby-on-rails - 安装 gem 时停止询问密码

> ID：15330153
> 
> 赞同：4
> 
> 时间：2013-03-11T02:08:20.410
> 
> 标签：ruby-on-rails, gem, rvm, bundler

每当我捆绑我的 rails 3.2 gems 时，它都会要求我输入密码：

> 输入您的密码以将捆绑的 RubyGems 安装到您的系统

这真的很烦人，尤其是在一个项目中捆绑多次时。但是，当我将 gem 目录设置为世界可读时，它总是在执行任何 (!) rails 命令时给我一个警告。当然，这更烦人。

我怎样才能关闭它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-14T05:42:10.943

```
# install gem with the specified path
bundle install --path vendor/bundle 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T15:30:55.820

绝对与系统红宝石有关，而不是 RVM，*除非*您使用多用户安装类型安装 RVM。如果您这样做并且仍然要求您输入密码，那么您安装**为 root**，**严格按照列出的文档说明**，并且您的一般用户没有添加到安装程序创建的“rvm”组中。（注意：这是基于您想要多用户安装而不是单用户安装的想法。如果您想要单用户安装，则在运行安装程序时*不要*使用 sudo 前缀。）

删除 RVM，注销然后重新登录（以确保完全重新初始化环境），然后**以您的普通用户身份重新运行安装程序命令，而不是作为 root 用户，并按照**文档说明以 'sudo' 为前缀。

如果您*没有*安装 RVM，请按照[https://rvm.io](https://rvm.io)上的文档安装单用户安装或多用户安装。在这种情况下，在没有安装 RVM 的情况下，上面描述的 Billy Chan 是您的解决方案，尽管我建议通过确定您需要定期运行的*确切*命令集（gem bin 名称）并添加条目来稍微收紧规则对于 sudoers 文件 (visudo) 中的那些。

现在的问题是您尝试使用 *RVM 无法控制的系统 ruby **​​（**它只是允许您通过设置正确的 GEM_PATH、RUBY_* 环境变量等来访问它），或者您的 RVM 多用户安装不正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-11T17:40:50.860

这取决于您是想在系统下还是在您的用户下安装 gems。如果在您当前的用户下，您可以简单地关闭此消息并通过调整捆绑器配置来询问。

在文件中的项目中`.bundle/config`添加行

```
BUNDLE_DISABLE_SHARED_GEMS: '1' 
```

所以整个配置文件看起来像

```
--- 
BUNDLE_WITHOUT: development:test
BUNDLE_DISABLE_SHARED_GEMS: '1'
BUNDLE_PATH: /home/youruser/gems/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-05T23:32:47.580

我的rails安装有这个问题。一个快速的解决方法是在项目创建期间跳过捆绑安装，如下所示：

```
rails new webapp -B 
```

然后你可以这样做：

```
cd webapp/
mkdir -p vendor/bundle
bundle install --path vendor/bundle 
```

希望对以后的查询有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T07:53:02.833

最好的方法：使用 RVM。使用 RVM，您`gem <any command>`无需添加即可运行`sudo`

如果您不想使用 RVM，您仍然可以`sudo`在命令之前添加。您可以设置以防止`sudo`通过以下方式询问所有命令的密码：

```
 $ sudo EDITOR=vim visudo
 # or any editor in your system 
```

然后，通过添加以下行来编辑文档

```
 username ALL=(ALL) NOPASSWD: ALL
 # Where username must be replaced by your real username in system 
```

我知道它可能不那么安全，但在我自己的机器上使用它很方便。

您可以像我一样将以上两种方法一起使用。

# c++ - 模板类型推导：不同模板类型之间的比较

> ID：15330158
> 
> 赞同：2
> 
> 时间：2013-03-11T02:09:28.977
> 
> 标签：c++, templates, c++11

我有一个模板结构：

```
template <typename T, typename T2>
struct MyStruct {}; 
```

我想确定某种类型是否是“MyStruct”（我不在乎模板参数是什么）。

```
template <typename OtherType, typename TestingType, typename = std::enable_if< IsMyStruct<TestingType>::value, TestingType>::type >
struct OtherStruct {}; 
```

我该怎么写`IsMyStruct`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T03:14:38.833

你可以这样做：

```
#include <type_traits>

template <typename T>
struct IsMyStruct : std::false_type { };

template <typename T1,typename T2>
struct IsMyStruct<MyStruct<T1,T2> > : std::true_type { }; 
```

# assembly - 是否可以通过添加一个 insn 将 x86 标志设置为 Carry=Sign=Overflow=1？

> ID：15330169
> 
> 赞同：0
> 
> 时间：2013-03-11T02:10:21.903
> 
> 标签：assembly, x86, flags

我在 i386 架构上使用 AT&T 表示法进行编程。

是否可以使用单个指令添加两个 8 位数字以设置要设置的进位、溢出和符号标志`add`？

我认为不可能得到这个标志组合。为了使 S 标志与 O 标志一起设置，两个数字的最高有效位必须为 0，结果的最高有效位必须为 1。这让我们无法通过添加最高有效位生成进位。

这是我第一次在这个网站上提问，如果我做错了什么，我深表歉意。提前致谢。

编辑：我只能使用以下三个指令：

```
movb $_, %ah
movb $_,%al 
addb %ah,%al 
```

我必须用十进制值修改两个下划线。

编辑：在 CF、OF、SF 和 ZF 中，我只能设置 CF、OF 和 SF。我不能设置进位标志。

（编者注：最后一句话没有意义。这是 Parity 或 Zero Flag 的拼写错误，还是他的意思是 CF 不能在*之前*设置`addb`？它是`add`，不是`adc`，所以它不依赖于以前的标志状态. 将此保留为编辑，而不是在评论中要求澄清，因为这是一个可能无法得到答复的老问题。如果/当您修复关于“不能设置进位标志”的句子时，请编辑此注释，Shan。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T02:39:33.617

用 CF=SF=OF=1是**不可能**`add ah, al`的。正式的证明会有些冗长，但是一个简单的详尽测试证实了在`add`指令之后这种标志状态组合是不可能的。

* * *

您可以使用`POPF(D)`来设置算术标志的任意组合。该指令将从堆栈中弹出一个（d）字并将其写入`(E)FLAGS`.

请注意，标志寄存器中还有其他与算术无关的标志。您通常不应该修改它们。因此，您通常会首先读取寄存器的值（使用`PUSHF(D)`），根据需要对其进行修改，然后如上文所述写回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T02:37:41.903

**编辑：**仅使用`add al,ah`或任何其他`add`是不可能的。

您可以通过将`flags`/弹出`eflags`到某个寄存器中，然后设置您想要的标志`or`，推送寄存器并将其弹出到标志中来做到这一点。

对于 16 位代码（NASM 语法）：

```
pushf
pop ax
or ax,0x881
push ax
popf 
```

对于 32 位代码：

```
pushfd
pop eax
or eax,0x881
push eax
popfd 
```

# python - 如何在 Python 2.6 中获取 argparse？

> ID：15330175
> 
> 赞同：40
> 
> 时间：2013-03-11T02:11:20.753
> 
> 标签：python, argparse

我编写了一些使用 argparse 模块的 Python 2.7 代码。现在我需要在 Python 2.6 机器上运行它，它不会工作，因为 argparse 是在 2.7 中添加的。

无论如何我可以在 2.6 中获得 argparse 吗？我想避免重写代码，因为我会经常在机器之间传输这种代码。升级 python 不是一种选择。

我应该澄清一下，理想的解决方案是不需要安装模块的东西。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-04-09T21:57:27.090

在 Centos、Scientific 或 Redhat 上，您可以通过运行以下命令来解决此问题：for

```
yum install python-argparse 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-03-11T02:12:59.780

您可以通过 pip 或 easy_install 安装它：[https ://pypi.python.org/pypi/argparse](https://pypi.python.org/pypi/argparse)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-08-18T19:28:09.990

您还可以获取`argparse.py`文件（例如来自[https://pypi.python.org/pypi/argparse](https://pypi.python.org/pypi/argparse)）并将其放在与主要 python 文件相同的文件夹中。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-07-15T14:47:18.343

如果您在类似 Debian 的系统上，您可以简单地这样写：

```
apt-get install python-argparse 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-12T18:27:49.320

当我有这个需求时，我只是使用 pip: 安装了 argparse `pip install argparse`。`python-2.6.6-66.el6_8.x86_64`这对于安装在我的 vanilla CentOS 6.8 系统上的系统效果很好。后来我发现这在其他运行的系统上不起作用`python-2.6.6-52.el6.x86_64`。结果，我最终将 argparse 相关文件从一个系统复制到另一个系统。

即 /usr/lib/python2.6/site-packages 中所有以 argparse 开头的文件和目录

只有在完成所有这些之后，我才发现我可以简单地安装`python-argparse`两个发行版附带的 python argparse rpm。

IE`yum install python-argparse`

# c# - LINQ确定集合中对象的属性是否存在于不同的集合中

> ID：15330180
> 
> 赞同：2
> 
> 时间：2013-03-11T02:11:51.313
> 
> 标签：c#, linq

假设我有一组 Person 对象 -

```
public class Person
{
  public string Firstname { get; set; }
  public string Surname { get; set; }
} 
```

现在假设我有一个不同的收藏，包含我邀请参加聚会的家庭的姓氏——

```
var guestlist = new List<string> {"Stark", "Wayne"}; 
```

我怎样才能使用 linq（最好是基于 lamba，但这并不重要）只拉出 Stark 或 Wayne 家族的成员？IE。我想结束另一个（第三个）收藏，而不仅仅是表明我的第一个收藏包含韦恩或斯塔克家族成员。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T02:17:26.930

试试这个 ：

```
var invited = persons.Where(p => guestlist.Contains(p.Surname)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T03:32:59.887

从概念上讲，此操作是联接。它匹配来自两个不同集合的“属于”在一起的对象。

```
var query = from person in people
    join name in guestlist 
    on person.Surname equals name
    select person; 
```

请注意，`Contains`当两个集合的大小都很小时，涉及在人员列表中的每个项目的名称列表上使用的所有其他解决方案都将起作用，但是对于较大的集合，该解决方案根本无法很好地扩展。被迫*对每个项目*进行线性搜索。如果正确实施（LINQ 会这样做），连接会将来宾列表放入可以更有效地搜索的集合中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T02:17:01.757

我会试试这个：

```
var peopleList = GetPeopleList();
var guestList = new List<string> {"Stark", "Wayne"};
var matchList = peopleList.Where(o => guestList.Contains(o)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T02:17:57.357

```
var result = people.Where(x => guestlist.Contains(x.Surname)); 
```

# c# - 将 C 代码转换为 C#，无法理解 C 中的某行

> ID：15330181
> 
> 赞同：1
> 
> 时间：2013-03-11T02:11:56.180
> 
> 标签：c#, c

所以，我有一些用于双音排序的 C 代码，我正在尝试将该代码转换为 C#。C 代码中的一行让我感到困惑。我以前从未使用过 C。

```
 void merge_up(int *arr, int n) {
      int step=n/2,i,j,k,temp;
      while (step > 0) {
        for (i=0; i < n; i+=step*2) {
          for (j=i,k=0;k < step;j++,k++) {
        if (arr[j] > arr[j+step]) {
          // swap
          temp = arr[j];
          arr[j]=arr[j+step];
          arr[j+step]=temp;
        }
          }
        }
        step /= 2;
      }
    }

    void merge_down(int *arr, int n) {
      int step=n/2,i,j,k,temp;
      while (step > 0) {
        for (i=0; i < n; i+=step*2) {
          for (j=i,k=0;k < step;j++,k++) {
        if (arr[j] < arr[j+step]) {
          // swap
          temp = arr[j];
          arr[j]=arr[j+step];
          arr[j+step]=temp;
        }
          }
        }
        step /= 2;
      }
    }

    void printArray(int *arr, int n) {
      int i;

      printf("[%d",arr[0]);
      for (i=1; i < n;i++) {
        printf(",%d",arr[i]);
      }
      printf("]\n");
    }

    int main(int argc, char **argv) {
      int n, *arr, i,s;
      FILE *fp = fopen(argv[1],"r");

      if (fp == NULL) {
        fprintf(stderr,"file not found\n");
        exit(1);
      }
      // first line gives number of numbers to be sorted 
      fscanf(fp,"%d",&n);
      // allocate space and read all the numbers 
      arr = (int *)malloc(n*sizeof(int));
      for (i=0; i < n; i++) {
        fscanf(fp,"%d",(arr+i));
      }
      // print array before 
      printArray(arr,n);

      // do merges
      for (s=2; s <= n; s*=2) {
        for (i=0; i < n;) {
          merge_up((arr+i),s);
          merge_down((arr+i+s),s); //Having trouble with this line here.
          i += s*2;
        }
      }

      printArray(arr,n);
    } 
```

当它调用 merge_down((arr+i+s), s); 时它在做什么？

具体来说，arr+i+s。arr 是数组，但是 +i+s 在做什么呢？我真的很感激一些帮助。

-编辑：我应该为那部分添加我在 C# 中所做的事情。这就是我得到的：

```
 //Do merges
        for (int s = 2; 2 <= n; s = s * 2)
        {
            for(int i = 0; i < n;){
                mergeUp(arr, s);
                mergeDown(arr, s);
                i += s * 2;
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T02:13:33.383

指针算术。`arr`是指向数组开头的指针，所以它基本上与创建指向`arr[i+s]`.

C# 不支持指针运算（`unsafe`代码除外）。要将此代码转换为 C#，您必须创建一个新数组以传递`mergeDown`或更改其签名`mergeDown`以获取`startIndex`参数。或者，您可以`mergeDown`接受`IEnumerable<T>`or`ArraySegment<T>`并使用@JimBalter 的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T02:27:00.983

> 我应该为那部分添加我在 C# 中所做的事情。这就是我得到的：

```
 ...
   mergeUp(arr, s);
   mergeDown(arr, s); 
```

你想要的是

```
 mergeUp(arr.Take(i), s);

   mergeDown(arr.Take(i+s), s); 
```

或者也许更好地使用`ArraySegment<T>`. 请参阅[C# 中的数组切片](https://stackoverflow.com/questions/406485/array-slices-in-c-sharp)

# matlab - 寻找相似的价值

> ID：15330182
> 
> 赞同：-2
> 
> 时间：2013-03-11T02:11:57.473
> 
> 标签：matlab, scatter

我想找到在图中绘制时给出相同值（x 轴和 y 轴）的乘法。有没有最简单的方法可以找到？我用过 find 但 matlab 告诉我这个论点是错误的。

```
 for i = 1:size(B,1)
        p1 =  A * B(1,:)' -A * B(i,:)';
        dtransformation0a(i) = d*p1;
        qtransformation0a(i) = q*p1;
        p2 =  A * B(2,:)' -A * B(i,:)'
        dtransformation0b(i) = d*p2;
        qtransformation0b(i) = q*p2;
         p3 =  A * B(3,:)' -A * B(i,:)';
        dtransformation0c(i) = d*p3;
        qtransformation0c(i) = q*p3;
Nx=length(dp);          
Ny=length(qp);         

for i=1:Nx
If dp(i)=qp(i)
samevalue=dp(i)
Nsamevalue=i
end

    figure
     scatter(dtransformation0a,qtransformation0a,100,'b.')          
     hold on 
     scatter(dtransformation0b,qtransformation0b,100,'b.')
      hold on 
     scatter(dtransformation0c,qtransformation0c,100,'b.')
    hold on 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T02:31:04.930

我不确定你的问题到底需要什么，这个？

```
indexes = find(dtransformation0a == dtransformation0b & ...
               qtransformation0a == qtransformation0b & ...
               dtransformation0a == dtransformation0c & ...
               qtransformation0a == qtransformation0c);

sameValuesX = dtransformation0a(indexes);
sameValuesY = qtransformation0a(indexes);

scatter(sameValuesX, sameValuesY); 
```

# java - 具有相似特征的对象的 UML 思想。

> ID：15330193
> 
> 赞同：1
> 
> 时间：2013-03-11T02:13:40.127
> 
> 标签：java, design-patterns, uml, use-case

![在此处输入图像描述](../Images/3df48fb7cca87a6adc3184995cca6925.png)

事件、工作、自我和联系人只不过是 DTO 对象，每个对象都可以在数据库中添加、编辑和删除。我对用例图不太熟悉，所以我想知道这是否正确或可以改进。

这里有什么要概括的吗？实现中的添加编辑和删除方法由一个类处理。但是每个对象的调用都是单独处理的。这个可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:57:00.003

首先，用例图通常用于**从用户的角度**描述系统的需求。*“管理联系人*”和“*管理事件*”是您的用例，这很好，但用例模型应该独立于代表联系人和事件的类。（较低级别的细节在其他图中更好地描述）

其次，*扩展*关系指定“**如何以及何时将扩展用例中定义的行为插入到扩展用例中定义的行为中**”。扩展用例是***箭头所指的***用例。然后箭头应该反转，因为 *Add Contact * extends *Manage Contacts*：在执行“ *Manage Contact* ”的某个时刻，如果满足某些条件（例如用户选择了“add”）“ *Add Contact* ”的行为被执行。

实际上，这是对扩展关系的一种非常强制的解释，以适合您的模型。我认为它可以通过概括更好地描述：“*管理联系人*”是一个抽象用例，专门用于“*添加联系人*”、“*编辑联系人*”和“*删除联系人*”（事件、工作等也是如此） .

如果您想建模每个“*添加/编辑/删除*”用例与其他用例有**共同点**，您可以将其建模为抽象用例。那么“*添加联系人*”不仅是“*管理联系人*”的特化，也是“*添加*”的特化（定义了添加某个实体的行为）。

![在此处输入图像描述](../Images/08c2d38f3ae0028f9d9dbdfd1f5a1695.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:19:44.330

根据经验，“管理 X”永远不应该是一个用例。用例是应用程序的特定功能，从用户的角度来看具有精确的目的。对于用例来说，“管理”总是太模糊。

其实“管理X”，在这里，显然是一个包，将被命名为“X管理”。这些包将允许您分离应用程序的各个部分。并且不需要对 Add X、Add Y、Add Z 进行分组，它们唯一的共同点是您最终将在数据库中执行插入操作。尽管对这些使用继承是有效的，但我认为这不值得。

因此，在我看来，您应该将独立的用例分组在包中。

还有一个建议：我不会将插入关系与登录一起使用。当然，这些关系是正确的，但它们会挤满你的图表，而且很可能是隐含的。区分需要登录的用例和其他用例的典型方法是使用两个参与者，一个是匿名的“用户”，另一个是您的“学术”。

# php - 需要帮助创建多步骤表单以查找特定区域的销售代表。

> ID：15330195
> 
> 赞同：0
> 
> 时间：2013-03-11T02:13:47.907
> 
> 标签：php, jquery, ajax

我需要创建一个表单来查找特定区域的销售代表。我想要做的是使用 php 和 jquery ajax 创建一个表单，用户在其中选择一个国家或州，然后当他们点击 go 按钮时，它会显示下一个字段类型，缩小到特定区域。[Pearson](http://www.pearsonhighered.com/pearsonhigheredus/educator/replocator/requestSalesRep.page?forced_logout=forced_logged_out#)就是我想要的一个例子

我假设我必须使用 ajax 来访问 MySql 数据库并返回数据，以便可以调出下一个字段。有人可以帮助我如何创建这种类型的表格。我知道他们将涉及数据库访问我只是不确定如何正确编程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:51:22.237

好的，这是您必须做的，但首先我认为您想按国家-> 州-> 城市缩小范围。

我还假设您对 mysql php 和 ajax 有一些基本知识。

先说第一件事。

1-您需要用普通的php阿富汗美国朝鲜填充第一个下拉列表

因此，当用户从下拉列表中选择一个项目时，fetch_state 函数将运行并从下拉列表中获取所选项目。获取所选国家的价值

```
function fetch_state(){
var selected=$('#country :selected').text();
   $.ajax({
   url: "someURL",
   data: {selectedvalue:selected}
   ... 
} 
```

好的，现在您使用它将值发布到服务器，您可以获取属于该国家/地区的相关声明

2- 根据所选国家从服务器获取状态。我假设你可以做到这一点

3-一旦您从服务器获得响应。在状态下拉列表中填充它。还要确保你有一个绑定到状态下拉列表的函数，所以当用户进一步选择一个特定的状态时，这将获取状态并将其发送到服务器，就像我们对省份所做的那样。

4-最后，当您从服务器获得响应时，填充城市下拉列表。

需要进一步帮助请告诉我。

# entity-framework - 通过存储库模式在实体框架中级联属性

> ID：15330196
> 
> 赞同：2
> 
> 时间：2013-03-11T02:13:54.680
> 
> 标签：entity-framework

假设我有一个具有“IsArchived”属性的类 Person。一个人可以有一个集合——每个集合也可以被存档。

现在我的存储库中有一个 UpdatePerson 方法，如下所示：

```
 public Person UpdatePerson(Person person)
    {
        _db.Persons.Attach(person);
        var entry = _db.Entry(person);
        entry.Property(e => e.Name).IsModified = true;
        entry.Property(e => e.Friends).IsModified = true;
        SaveChanges();
        return entry.Entity;
    } 
```

而且我有一个单独的存档存储库方法：

```
 public void ArchivePerson(int personId)
    {
        var person = _db.Persons.FirstOrDefault(c => c.PersonId == personId);
        if (person != null)
        {
            person.IsArchived = true;

            foreach (var friend in person.Friends)
            {
                ArchivePerson(friend.PersonId);
            }

            SaveChanges();
        }
    } 
```

这意味着从我的 WebAPI 中，我必须将一个函数专用于归档/取消归档。如果我可以调用 Update 并为给定实体设置 Archived 并在可能的情况下将其应用于所有子实体，那就太酷了。有什么办法可以做到这一点，还是我最好坚持使用 ArchivePerson 存储库方法？

# c++ - 使用变量 C++ 在 CMD 中更改背景和文本颜色

> ID：15330199
> 
> 赞同：0
> 
> 时间：2013-03-11T02:14:27.470
> 
> 标签：c++, windows, colors, cmd, system

我是 C++ 新手，我已经在 J​​ava 中工作了一段时间，现在我想学习更多的语言。我正在制作一个 CMD RPG 游戏。我希望用户输入一个字符来更改命令提示符中文本和背景的颜色。

```
char bg,txt;

cout << "Enter your option for BACKGROUND color: " << endl;
cin >> bg;
system("cls");

cout << "Enter your option for TEXT color: " << endl;
cin >> txt;
system("cls");

//here is the part I have trouble on
system("color ",bg,txt);
// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T02:45:32.533

使用下面的代码

```
void setcolor(unsigned short color)                
{                                                   
    HANDLE hcon = GetStdHandle(STD_OUTPUT_HANDLE);
    SetConsoleTextAttribute(hcon,color);
} 
```

颜色有 0-15 个数字，黑色为 0，白色为 15。

`setcolor(numberOf Color)`只需在要着色的文本之前调用该函数

# c++ - 将文件读入字符串缓冲区并检测 EOF

> ID：15330202
> 
> 赞同：0
> 
> 时间：2013-03-11T02:14:33.443
> 
> 标签：c++, file, eof, fread, ftell

我正在打开一个文件并将其内容放入字符串缓冲区中，以对每个字符进行一些词法分析。这样做可以比使用后续的*fread()*调用更快地完成解析，并且由于源文件将始终不大于几 MB，因此我可以放心，将始终读取文件的全部内容.

但是，检测何时没有更多数据要解析似乎有些麻烦，因为*ftell()*经常给我一个整数值，该整数值高于文件中的实际字符数。如果尾随字符始终为 -1，则使用 E​​OF (-1) 宏不会有问题……但情况并非总是如此……

* * *

这是我打开文件并将其读入字符串缓冲区的方式：

```
FILE *fp = NULL;
errno_t err = _wfopen_s(&fp, m_sourceFile, L"rb, ccs=UNICODE");
if(fp == NULL || err != 0) return FALSE;
if(fseek(fp, 0, SEEK_END) != 0) {
    fclose(fp);
    fp = NULL;
    return FALSE;
}

LONG fileSize = ftell(fp);
if(fileSize == -1L) {
    fclose(fp);
    fp = NULL;
    return FALSE;
}
rewind(fp);

LPSTR s = new char[fileSize];
RtlZeroMemory(s, sizeof(char) * fileSize);
DWORD dwBytesRead = 0;
if(fread(s, sizeof(char), fileSize, fp) != fileSize) {
    fclose(fp);
    fp = NULL;
    return FALSE;
} 
```

这似乎总是工作得很好。下面是一个简单的循环，它一次检查一个字符的字符串缓冲区的内容，如下所示：

```
char c = 0;
LONG nPos = 0;
while(c != EOF && nPos <= fileSize)
{
    c = s[nPos];
    // do something with 'c' here...
    nPos++;
} 
```

文件的尾随字节通常是一系列***ý** (-3)*和***«** (-85)*字符，因此永远不会检测到 EOF。相反，循环只是继续前进，直到*nPos*最终具有比*fileSize*更高的值——这对于正确的词法分析来说是不可取的，因为您通常最终会跳过流中的最后一个标记，它在末尾省略了换行符。

在基本拉丁字符集中，假设 EOF 字符是具有负值的任何字符是否安全？或者也许有更好的方法来解决这个问题？

* * *

***#EDIT：***我刚刚尝试将*feof()*函数实现到我的循环中，但同样，它似乎也没有检测到 EOF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:59:47.840

将评论组装成答案...

*   当您阅读失败时，您会泄漏内存（可能是大量内存）。

*   您不允许在读取的字符串末尾使用空终止符。

*   当内存即将被文件中的数据覆盖时，将内存归零是没有意义的。

*   您的测试循环正在越界访问内存；`nPos == fileSize`超出您分配的内存的末尾。

    ```
    char c = 0;
    LONG nPos = 0;
    while(c != EOF && nPos <= fileSize)
    {
        c = s[nPos];
        // do something with 'c' here...
        nPos++;
    } 
    ```

*   还有其他问题，之前没有提到过。您确实问过“假设 EOF char 是任何具有负值的字符是否安全”，我对此做出了回答**No**。这里有几个问题会影响 C 和 C++ 代码。首先是 plain`char`可能是有符号类型或无符号类型。如果类型是无符号的，那么您永远不能在其中存储负值（或者，更准确地说，如果您尝试将负整数存储到无符号字符中，它将被截断为最低有效 8 ^*位并将被处理为阳性。

*   在上面的循环中，可能会出现两个问题之一。如果`char`是有符号类型，则存在一个与 EOF 具有相同值的字符（ÿ、y-变音符号、U+00FF、LATIN SMALL LETTER Y WITH DIAERESIS、0xFF）与 EOF（始终为负通常是-1）。因此，您可能会过早地检测到 EOF。如果`char`是无符号类型，则永远不会有任何字符等于 EOF。但是对字符串 EOF 的测试存在根本缺陷；EOF 是来自 I/O 操作的状态指示器，而不是字符。

*   在 I/O 操作期间，只有在尝试读取不存在的数据时才会检测到 EOF。`fread()`不会报告 EOF ；您要求阅读文件中的内容。如果你`getc(fp)`在 之后尝试`fread()`，你会得到 EOF 除非文件已经增长，因为你测量了它的长度。由于`_wfopen_s()`是一个非标准函数，它可能会影响其`ftell()`行为方式和报告的值。（但你后来发现情况并非如此。）

*   请注意，诸如`fgetc()`or之类的函数`getchar()`被定义为将字符作为正整数返回，并将 EOF 作为不同的负值返回。

    > 如果未设置 指向的输入流的文件结束指示符`stream`并且存在下一个字符，则该`fgetc`函数将该字符作为`unsigned char`转换为`int`.
    > 
    > 如果设置了流的文件结束指示符，或者如果流处于文件结束位置，则设置流的文件结束指示符并且`fgetc`函数返回 EOF。否则，该 `fgetc`函数从 指向的输入流中返回下一个字符`stream`。如果发生读取错误，则设置流的错误指示符并且`fgetc`函数返回 EOF。^(289))
    > 
    > 289) 使用`feof`and`ferror`函数可以区分文件结束和读取错误。

    这表明 EOF 如何与 I/O 操作上下文中的任何有效字符分开。

你评论：

> 至于任何潜在的内存泄漏......在我的项目的这个阶段，内存泄漏是我的代码的众多问题之一，到目前为止，我并不关心这些问题。即使它没有泄漏内存，它甚至一开始都不起作用，那有什么意义呢？功能至上。

在初始编码阶段阻止错误路径中的内存泄漏比稍后返回并修复它们更容易——因为您可能不会发现它们，因为您可能不会触发错误条件。但是，重要程度取决于该计划的目标受众。如果它是一次性的编码课程，你可能没问题。如果你是唯一会使用它的人，你可能会没事。但是，如果它将被数以百万计地安装，那么您将在各处改装支票时遇到问题。

> 我已经用 fopen() 交换了 _wfopen_s() 并且 ftell() 的结果是一样的。但是，将相应的行更改为 LPSTR s = new char[fileSize + 1], RtlZeroMemory(s, sizeof(char) * fileSize + 1); （顺便说一句，这也应该终止它），并将 if(nPos == fileSize) 添加到循环的顶部，它现在干净利落地出来了。

好的。您也可以使用`s[fileSize] = '\0';`null 终止数据，但 using`RtlZeroMemory()`可以达到相同的效果（但如果文件大小为数兆字节，则会更慢）。但我很高兴各种意见和建议帮助您重回正轨。

* * *

* 理论上，CHAR_BITS 可能大于 8；在实践中它几乎总是 8 位，为了简单起见，我假设它是 8 位。如果 CHAR_BITS 为 9 或更多，则讨论必须更加细致，但最终效果大致相同。

# opencl - 如何使用 clBuildProgram 为 OpenCL 添加宏

> ID：15330203
> 
> 赞同：1
> 
> 时间：2013-03-11T02:14:34.193
> 
> 标签：opencl

在我的内核中，我已经定义了这个。

```
#define ACTIVATION_FUNCTION(X) (1.7159f*tanh(2.0f/3.0f*X)) 
```

我想在 clBuildProgram 调用中定义它，这样我就可以在运行时更改内核。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:45:07.757

您可以通过在函数`-D`的参数中传递参数来使用 OpenCL 编译器的`options`参数`clBuildProgram`。传递`-D x=y`, 相当于`#define x y`在内核文件的顶部添加。类似地，传递`-D x`等同于添加`#define x`（当然，对于任何`x`and `y`）。

在你的情况下，你可能想要传递这样的东西：

```
-D ACTIVATION_FUNCTION(X)=(1.7159f*tanh(2.0f/3.0f*X)) 
```

然后，您可以在运行时直接从您的程序中根据需要进行更改。

请注意，您也可以打开内核文件并将定义直接写入其中，作为替代解决方案，但这可能是最干净的方式。请注意换行符，我不确定它们的处理情况如何。

* * *

参考。[clBuildProgram 上的此文档页面](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/clBuildProgram.html)，“预处理器选项”部分。

# android - 如何将 Android 项目构建为包含其他项目的 jar

> ID：15330206
> 
> 赞同：0
> 
> 时间：2013-03-11T02:15:14.707
> 
> 标签：android

如何将一个 Android 项目构建到可以包含在其他 android 项目中的 jar 中？当我使用eclipse将一个Android项目导出到jar并使用该jar到其他android项目时，“R”文件和资源文件会出错。</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:17:44.497

Android 资源文件（在您的 R.java 文件中表示）不能放入 Jars。这就是为什么像 ActionBarSherlock 这样的库需要作为库项目打开，而不是简单的 Jars。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T02:59:30.330

您可以将 Android 库项目构建为 jar，但在库项目中，您应该防止使用 R 类，而不是 R 类，您可以使用反射来加载资源。

例如，如果您需要从 strings.xml 文件加载字符串

```
int id = context.getResources().getIdentifier("string_name", "string", context.getPackageName());
String value = context.getString(id); 
```

但这就是他们提到的 getIdentifier 方法：

```
Note: use of this function is discouraged. It is much more efficient to retrieve resources by identifier than by name. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T03:00:25.863

您可以将 Android 项目构建为 jar 文件，但不要使用任何资源文件。B'coz 当您尝试在运行时在应用程序中使用该 jar 文件时，会出现 Resource not Found 异常。

因此，在创建 jar 文件时，请取消选中 res、gen、Manifest 等。您可以在库项目中定义基本 Activity 类、基本接口、数据库管理器、GPS 管理器，并在您的应用程序中使用它，它肯定会工作。

所以请看下面的屏幕截图。

![在此处输入图像描述](../Images/3cea37349a09a3c26c3429e629c7feae.png)

谢谢

# c++ - （最好是提升）无锁数组/向量/地图/等？

> ID：15330207
> 
> 赞同：1
> 
> 时间：2013-03-11T02:15:22.820
> 
> 标签：c++, multithreading, performance, multidimensional-array, lock-free

考虑到我缺乏 C++ 知识，请尝试阅读我的意图，而不是我糟糕的技术问题。

这是我的程序的主干[https://github.com/zaphoyd/websocketpp/blob/experimental/examples/broadcast_server/broadcast_server.cpp](https://github.com/zaphoyd/websocketpp/blob/experimental/examples/broadcast_server/broadcast_server.cpp)

我正在使用 websocket++ 构建一个 websocket 服务器（哦，websocket++ 很甜。我强烈推荐），我可以轻松地安全地操作每个用户数据，因为它真的不需要由不同的线程操作；但是，我确实希望能够在一个函数线程中写入一个数组（我将使用来自 vb、php、js 等较弱语言的包罗万象的术语“数组”）（可以运行多个迭代）同时）并读入 1 个或多个线程。

以堆栈为例：如果我想让所有`id`s （`PRIMARY`所有文章的列）以特定方式排序，在这种情况下通过净投票，并保存在内存中，我想我会有一个名为的函数就其本身`boost::thread`而言，每当网站上的投票进入以重新排序数组时就会被解雇。

如何在不锁定和阻塞的情况下做到这一点？我对用户从旧数组读取而另一个正在构建中的用户 100% 没问题，但我绝对不希望他们的读取或线程写入失败/被阻塞。

是否存在无锁数组？如果没有，是否有某种方法可以在临时数组中构建新数组，然后在构建完成时将其写入实际数组而无需锁定和阻塞？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T02:22:53.683

你看过[Boost.Lockfree](http://www.boost.org/doc/libs/1_53_0/doc/html/lockfree.html)吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T02:24:07.750

呃，呃，呃。复杂。

看这里（例如）：[RCU——](http://lwn.net/Articles/262464/)这只是关于多次读取和一次写入。

我的猜测是多个作家同时工作是行不通的。您应该寻找一种比数组更有效的表示，一种允许更快更新的表示。平衡树怎么样？log(n) 不应该以明显的方式阻塞任何东西。

关于 boost——我很高兴它终于对线程同步有了适当的支持。

当然，您也可以保留一份副本并批量更新。然后后台进程合并更新并为读者复制结果。

# cpu-usage - 这个计算 CPU 利用率的公式是如何工作的？

> ID：15330209
> 
> 赞同：4
> 
> 时间：2013-03-11T02:15:54.667
> 
> 标签：cpu-usage, round-robin

我收到了这个问题

考虑一个运行十个 I/0 绑定任务和一个 CpU 绑定任务的系统。假设 CPU 计算每毫秒 I/O 密集型任务发出和 I/O 操作一次，并且每个 I/O 操作需要 10 毫秒才能完成。还假设上下文切换开销为 0.1 毫秒，并且所有进程都是长时间运行的任务 描述循环调度程序的 CPU 利用率：

一种。时间量为 1 毫秒

湾。时间段为 10 毫秒

我找到了答案

时间量是 1 毫秒：无论调度哪个进程，调度程序都会为每个上下文切换产生 0.1 毫秒的上下文切换成本。这导致 CPU 利用率为 1/1.1 * 100 = 91%。

时间片为 10 毫秒：I/O 绑定任务仅在用完 1 毫秒的时间片后就会引发上下文切换。因此，循环遍历所有进程所需的时间是 10*1.1 + 10.1（因为每个 I/O 绑定任务执行 1 毫秒，然后引发上下文切换任务，而 CPU 绑定任务在引发上下文之前执行 10 毫秒转变）。因此 CPU 利用率为 20/21.1 * 100 = 94%。

我唯一的问题是这个人是如何得出 CPU 利用率的公式的？我似乎无法理解他/她在哪里得到数字 20/21.1 * 100 = 94% 和 1/1.1 * 100 = 91%。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T02:34:28.057

对于第一种情况，每个任务使用 1msec 完成工作和 0.1msec 切换；因此，它花费每 1.1 毫秒中的 1 毫秒做功。

对于第二种情况，情况类似：在完成所有任务所花费的 21.1 毫秒中，只有 20 毫秒在做实际工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-26T09:02:53.533

这是对上述问题的最佳解释：

[http://jade-cheng.com/uh/coursework/ics-412/homework-4.pdf](http://jade-cheng.com/uh/coursework/ics-412/homework-4.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T17:06:37.667

我正在经历同样的问题。这就是我的理解在第一种情况下，当时间量是 1 毫秒时，如果我们考虑甘特图，所有 I/O 绑定进程都会出现（让我们调用 p1-p10），然后是 CPU 绑定的 p11。所以在 11 毫秒内总共有 10 次上下文切换。因此，CPU 在 11 毫秒内完成的有效工作仅为 11-(10*.1ms) 即 10 毫秒。所以 CPU 利用率是 (10/11)*100= 90%

同样，在第二种情况下，如果我考虑 20.1 毫秒的时间，将有 11 个开关（最后一个是 CPU 绑定进程）。所以 cpu 工作的有效时间是 20.1-(11*.1)= 19ms。所以 CPU 利用率 (19/20.1)*100=94%

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-05T04:55:01.903

不知为何，我对这个问题一头雾水……看了这里的所有答案后，我通过仔细查看另一个用户给出的玉城链接终于明白了。我在书中找不到公式（也许我错过了），但这是我的答案版本，采用一种伪公式风格：

警告：这可能是错误的，但也许你可以告诉我我哪里出错了。

一种）

[(10 I/O 进程) *(1ms) + (1 cpu 进程)* (1ms)] / [(10 I/O 进程) *(1ms) + (1 cpu 进程)* (1ms) + (10 上下文切换)*( 0.1ms)] = 10/11 = 91%

b)

[(10 I/O 进程) *(1ms) + (1 cpu 进程)* (10ms)] / [(10 I/O 进程) *(1ms) + (1 cpu 进程)* (10ms) + (10 上下文切换)*( 0.1ms)] = 20/21 = 95%

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-13T16:03:48.030

对于第一部分

我们有 11 个进程（10 个 i/o，1 个 cpu）。每个需要 1ms 的执行时间和 0.1ms 的切换时间。

所以一个进程花费的总时间是：10(I/o)*1(1ms of cpu)+1(CPU bounded process)*1(1ms of cpu)+11*0.1(total switch time)=12.1ms。

在这12.1ms内，cpu忙/执行的时间=10*1(For 10 I/O precoess)+1*1(for 1 CPU process)=10+1=11

CPU利用率=(11/12.1)*100=(1/1.1)*100=91%大约

b部分

虽然时间片是 10ms，但是 I/O bound 进程只会占用 1ms 的 cpu，然后在需要 I/O 时进入阻塞状态，因此有 0.1ms 的上下文切换。

所以 I/O 绑定进程花费的总时间将= 10 * 1

但是 CPU 受限进程使用了​​整个 10ms 的时间片和 0.1ms 的切换。所以总共需要 1*10=10ms

并且总上下文切换时间=11*0.1=1.1ms

因此总耗时=10+10+1.1=21.1ms

和 cpu 忙/执行的时间=10*1+1*10=20

CPU 利用率=(20/21.1)*100=94% 大约

# r - 从多核包中创建一个 R 函数以使用 mclapply

> ID：15330212
> 
> 赞同：1
> 
> 时间：2013-03-11T02:16:23.690
> 
> 标签：r, multicore, montecarlo, lapply, mclapply

我需要分析一些具有以下结构的模拟数据：

```
h   c   x1              y1              x1c10
1   0   37.607056431    104.83097593    5
1   1   27.615251557    140.85532974    10
1   0   34.68915314     114.59312842    2
1   1   30.090387454    131.60485642    9
1   1   39.274429397    106.76042522    10
1   0   33.839385007    122.73681319    2
... 
```

其中 h 的范围从 1 到 2500，并索引 Monte Carlo 样本，每个样本有 1000 个观测值。我正在使用以下代码分析这些数据，该代码为我提供了两个对象（fnN1、fdQB101）：

```
mc<-2500 ##create loop index
fdN1<-matrix(0,mc,1000)
fnQB101 <- matrix(0,mc,1000) ##create 2500x1000 storage matrices, elements zero

for(j in 1:mc){

fdN1[j,] <- dnorm(residuals(lm(x1 ~ c,data=s[s$h==j,])), 
                     mean(residuals(lm(x1 ~ c,data=s[s$h==j,]))), 
                          sd(residuals(lm(x1 ~ c,data=s[s$h==j,]))))

x1c10<-as.matrix(subset(s,s$h==j,select=x1c10))

fdQB100 <- as.matrix(predict(polr(as.factor(x1c10) ~ c , 
                                    method="logistic", data=s[s$h==j,]),
                                         type="probs"))

indx10<- as.matrix(cbind(as.vector(seq(1:nrow(fdQB100))),x1c10))

fdQB101[j,] <- fdQB100[indx10]

} 
```

对象 fdN1 和 fdQB101 是 2500x1000 矩阵，以预测概率作为元素。我需要从这个循环中创建一个可以用 lapply() 或 mclapply() 调用的函数。当我将其包装在以下函数命令中时：

```
ndMC <- function(mc){

for(j in 1:mc){
...
}
return(list(fdN1,fdQB101))

}
lapply(mc,ndMC) 
```

对象 fdN1 和 fdQB101 每个都作为 2500x1000 的零矩阵返回，而不是预测的概率。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:23:03.220

你应该可以用这个`data.table`包来做到这一点。这是一个例子：

```
library(data.table)
dt<-data.table(h=rep(1L,6), c=c(0L,1L,0L,1L,1L,0L),
           X1=c(37.607056431,27.615251557,34.68915314,30.090387454,39.274429397,33.839385007),
           y1=c(104.83097593,140.85532974,114.59312842,131.60485642,106.76042522,122.73681319),
           x1c10=c(5L,10L,2L,9L,10L,2L))

## Create a linear model for every grouping of variable h:
fdN1.partial<-dt[,list(lm=list(lm(X1~c))),by="h"]

## Retrieve the linear model for h==1:
fdN1.partial[h==1,lm]
## [[1]]
## 
## Call:
## lm(formula = X1 ~ c)
## 
## Coefficients:
## (Intercept)            c  
##      35.379       -3.052 
```

您还可以编写一个函数来概括此解决方案：

```
f.dnorm<-function(y,x) {
  f<-lm(y ~ x)
  out<-list(dnorm(residuals(f), mean(residuals(f)), sd(residuals(f))))
  return(out)
}

## Generate two dnorm lists for every grouping of variable h:
dt.lm<-dt[,list(dnormX11=list(f.dnorm(X1,rep(1,length(X1)))), dnormX1c=list(f.dnorm(X1,c))),by="h"]

## Retrieve one of the dnorm lists for h==1:
unlist(dt.lm[h==1,dnormX11])
##          1          2          3          4          5          6 
## 0.06296194 0.03327407 0.08884549 0.06286739 0.04248756 0.09045784 
```

# javascript - 重新定位谷歌地图标记

> ID：15330213
> 
> 赞同：0
> 
> 时间：2013-03-11T02:16:42.547
> 
> 标签：javascript, google-maps

我在谷歌地图 api v3 上有几个标记，我需要定期重新定位标记。我给了我的标记特定的名称，比如markerA、markerB、...markerO。

我试图运行这个函数来访问正确的标记来重新定位：

```
function moveMarker(marker,lat,lng) {
  var newLatLng = new google.maps.LatLng(lat,lng);
  marker.setPosition(newLatLng);
} 
```

标记是在加载过程中与地图一起创建的。

```
 markerA = new google.maps.Marker({position: new google.maps.LatLng(59.870131, 10.819168), map: map, icon: rodIcon, title: 'Car A'});
  markerB = new google.maps.Marker({position: new google.maps.LatLng(59.870131, 10.819168), map: map, icon: rodIcon, title: 'Car B'});
  markerC = new google.maps.Marker({position: new google.maps.LatLng(59.870131, 10.819168), map: map, icon: blaIcon, title: 'Car C'}); 
```

但是，似乎我的函数失败了，并且无法识别函数的“标记”输入中给出的标记“名称”。

函数的输入类似于：

```
moveMarker(markerA,60,10) 
```

但是标记根本不动......

我是否遗漏了一些非常基本的东西，或者我的想法是按名称重新定位每个标记而不是要走的路？

我的意思是，我可以硬编码

markerA.setPosition markerB.setPosition 等...但这似乎是矫枉过正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-29T03:50:56.697

只是使用`.setPosition()`方法。见[http://jsfiddle.net/Ln2BM/1/](http://jsfiddle.net/Ln2BM/1/)：

```
google.maps.event.addListener(marker, 'click', function() {
    var pos = this.getPosition();
    this.setPosition(new google.maps.LatLng(pos.lat(), pos.lng() + 1)); 
}); 
```

如果它不起作用，那么你一定犯了另一个错误。*您的句子“我的函数失败，并且无法识别函数的“标记”输入中给出的标记“名称”*听起来很可疑。您的函数调用可能有问题。

# php - CakePHP 博客不显示任何内容

> ID：15330222
> 
> 赞同：0
> 
> 时间：2013-03-11T02:17:59.537
> 
> 标签：php, cakephp, cakephp-2.3

我正在努力加快 CakePHP 的速度。我以前用过MVC模式，对这个想法很熟悉。我试图按照 CakePHP 的 2.* 版本的博客教程进行操作，但没有运气。

如果我导航到`http://localhost/posts/index`，我会看到：

> 未找到
> 
> 在此服务器上找不到请求的 URL /Posts。

如果我只是加载，一切看起来都很好`http://localhost/`

我不明白的另一件事是控制器如何调用： `$this->Post->find(’all’));`

`find`Post 模型上没有调用任何方法。该模型完全裸露：

```
class Post extends AppModel {
} 
```

我不知道该怎么做。框架是否生成了一个**查找**方法，或者教程的编写省略了其中一个非常重要的部分？

**编辑 - 更多细节** 在文件夹 app/Controller 中有一个控制器，名为 PostsController：

```
class PostsController extends AppController {
public $helpers = array(’Html’, ’Form’);

public function index() {
    $this->set(’posts’, $this->Post->find(’all’));
}

public function view($id = null) {

    if (!$id) {
        throw new NotFoundException(__(’Invalid post’));
    }

    $post = $this->Post->findById($id);

    if (!$post) {
        throw new NotFoundException(__(’Invalid post’));
    }

    $this->set(’post’, $post);
} 
```

}

/app/View/Posts/里面有一个索引视图

```
<!-- File: /app/View/Posts/index.ctp -->
<h1>Blog posts</h1>
<table>
<tr>
    <th>Id</th>
    <th>Title</th>
    <th>Created</th>
</tr>
<!-- Here is where we loop through our $posts array, printing out post info -->
<?php foreach ($posts as $post): ?>
    <tr>
        <td><?php echo $post[’Post’][’id’]; ?></td>
        <td>
            <?php echo $this->Html->link($post[’Post’][’title’],
            array(’controller’ => ’posts’, ’action’ => ’view’, $post[’Post’][’id’])); ?>
        </td>
        <td><?php echo $post[’Post’][’created’]; ?></td>
    </tr>
<?php endforeach; ?>

<?php unset($post); ?>
</table> 
```

该模型如上面的原始帖子中所述。

在数据库中，我在教程中使用了以下数据：

```
/* First, create our posts table: */
CREATE TABLE posts (
id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
title VARCHAR(50),
body TEXT,
created DATETIME DEFAULT NULL,
modified DATETIME DEFAULT NULL
);
/* Then insert some posts for testing: */
INSERT INTO posts (title,body,created)
VALUES (’The title’, ’This is the post body.’, NOW());
INSERT INTO posts (title,body,created)
VALUES (’A title once again’, ’And the post body follows.’, NOW());
INSERT INTO posts (title,body,created)
VALUES (’Title strikes back’, ’This is really exciting! Not.’, NOW()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T02:39:47.443

*我不知道该怎么做。框架是否生成了一个 find 方法，还是教程的编写省略了其中一个非常重要的部分？*

是的，框架负责 ORM 部分..我猜你对这个“超级”新手..即使我是 cakephp 的新手......我只是 CakePHP 中的 5 个旧项目，所以即使我是新手......

行...

回到你的问题：

您需要有一个“发布”控制器和一个“索引”操作。

确保你“使用”模型，你也可以从这样的动作中调用它：

```
$this->loadModel('Post');

$this->set($variable, $this->Post->find('all')); 
```

然后在你看来

做一个：

```
<?php pr($variable) ?> 
```

需要的不是“短期”鱼，而是自己钓鱼的能力……我上面给出的示例将使您了解 CakePHP 的工作原理。

问题？:)

编辑：您对 mod-rewrite 有疑问，仅此而已！

做这个：

打开`app/Config/core.php`

找到该行并取消注释：

```
Configure::write('App.baseUrl', env('SCRIPT_NAME')); 
```

从所有文档根目录、应用程序差异、webroot 目录中删除全部、.htaccess ...

解决了？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:12:55.987

第一个问题听起来像是 mod_rewrite 的问题，请查看说明书中的[URL 重写](http://book.cakephp.org/2.0/en/installation/url-rewriting.html)章节。

*框架是否生成了一个 find 方法，还是教程的编写省略了其中一个非常重要的部分？*

没有也没有。这是简单的[PHP 功能](http://www.php.net/manual/en/language.oop5.inheritance.php)，您只需遵循继承层次结构即可找到`find`方法的来源：`Post`extends `AppModel`extends `Model`。如果您检查[API](http://api.cakephp.org/2.3/class-Model.html#_find)，您将看到`Model`定义了`find`您的`Post`模型继承的方法。

# ios - UICollectionView 崩溃？

> ID：15330223
> 
> 赞同：0
> 
> 时间：2013-03-11T02:17:59.753
> 
> 标签：ios, uicollectionview, uicollectionviewcell

我正在尝试使用 a`UICollectionView`与 a 协作`UICollectionViewCell`来显示图像的缩略图。我的`UICollectionViewCell`应用程序中使用的是自定义（简单）子类：

```
#import "MemeCell.h"

@implementation MemeCell

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

}
return self;
}

-(void)setThumb:(UIImage *)image {
    if (_thumb != image) {
        _thumb = image;
    }

    _imageThumb.image = _thumb;
}

@end 
```

在`File's Owner`my`UICollectionView`中，我使用：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath {

    static BOOL nibLoaded = NO;

if (!nibLoaded) {
    UINib *cellNib = [UINib nibWithNibName:@"MemeCell" bundle:nil];
    [_collectionView registerNib:cellNib forCellWithReuseIdentifier:@"MemeCell"];
    nibLoaded = YES;
}

MemeCell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"MemeCell" forIndexPath:indexPath];

NSString *path = [_imageThumbs objectAtIndex:indexPath.section];
UIImage *thumb = [UIImage imageNamed:path];
[cell setThumb:thumb];

return cell;
} 
```

返回一个单元格。该视图在第一次呈现时工作正常，但在从它的委托调用中解散后`[self dismissViewControllerAnimated:YES completion:nil]`，它不能再次呈现而不会崩溃

```
2013-03-10 22:11:35.448 CapifyPro[21115:907] -[UICollectionViewCell setThumb:]: unrecognized selector sent to instance 0x1e593320
2013-03-10 22:11:35.450 CapifyPro[21115:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UICollectionViewCell setThumb:]: unrecognized selector sent to instance 0x1e593320' 
```

任何人都可以提供见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T02:44:56.057

如果使用由 XIB 或 storyBoardCell 使用的 UICollectionViewCell。简单地将您的 imageThumb imageView 拖放到 MemeCell.h。删除 MemeCell.m 中的二传手。然后按顺序设置：

```
MemeCell *cell = (MemeCell*) [cv dequeueReusableCellWithReuseIdentifier:@"MemeCell" forIndexPath:indexPath];
cell.imageThumb.image = [UIImage imageNamed:path] 
```

在 MemeCell 没有 Xib 的情况下。请初始化并添加 imageThumb 作为 memeCell.contentView 的子视图。

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
     self.imageThumb = [[UIImageView alloc] initWithFrame:self.frame];
     [self.contentView addSubviews:self.imageThumb];

}
return self;
} 
```

*编辑：如果你只存储你的thumbImage，不显示，只在Cell.h中声明，不需要重写setter。

```
property(strong,nonomatic) UIImage *thumbImage; 
```

# command-line - 命令行参数：分段错误

> ID：15330227
> 
> 赞同：-1
> 
> 时间：2013-03-11T00:07:16.370
> 
> 标签：command-line

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>

int main(int argc, char *argv[]) {

printf("Write in this format: <operand1> <operator> <operand2>\n");
double result, op1, op2;

op1 = atof(argv[1]);
op2 = atof(argv[3]);

if(argv[2][0]=='+')
    result = op1 + op2;
if(argv[2][0]=='-')
    result = op1 - op2;
if(argv[2][0]=='/')
    result = op1 / op2;
if(argv[2][0]=='x')
    result = op1 * op2;

printf("Result: %f", result);

return 0;
} 
```

我正在尝试完成这项工作，但它导致了分段错误。我检查了我的代码，但我找不到任何问题。它应该像一个简单的计算器一样工作。然后我尝试了 argv 或 argc 的手册页，上面写着“没有手动输入...”之类的东西。我的意思是，不应该有一个吗？还是我必须更新一些东西？如果有人能回答他/她认为可以提供帮助的任何内容，我将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:36:03.190

您的代码在四个条件中存在语法/概念错误。

您正在请求`argv[2][0]`，但它应该是`argv[2]`：

*   `argv[2][0]`表示：指向char（坏）的指针在数组第三个位置的位置cero
*   `argv[2]`表示：指向数组中第三个位置的 char 的指针的内容

这就是您收到[分段错误](http://en.wikipedia.org/wiki/Segmentation_fault)错误的原因。

# d3.js - D3 中的基本计算和方法调用

> ID：15330230
> 
> 赞同：0
> 
> 时间：2013-03-11T02:18:29.993
> 
> 标签：d3.js

我刚在一个电源点看到这个，抱歉无法复制粘贴电源点的文字，所以截屏了：

![在此处输入图像描述](../Images/7c188c61f103a84b5b52402f2ff307a6.png)

有人可以解释一下我们是如何计算 x(0) 和 y(3) 变量的吗？我正在尝试学习这个 D3，但三个小时后没有成功......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:41:40.747

我建议阅读[线性刻度的 D3 API 文档](https://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-linear)。简而言之，尺度将设定域线性映射到设定范围。因此，在上述函数中：

*   x 将范围 [-1,1] 映射到 [0,640]
*   y 将范围 [0,1] 映射到 [0,320]

0是输入范围[-1,1]的中点，所以会映射到输出范围[0,640] = 320的中点；因此 x(0) = 320。

3 在 y 的输入域之外，但比例会线性外推到其域范围之外的相应值；因此 y(3) = 960

# android - 带有aidl文件的远程服务：从未调用过ServiceConnection

> ID：15330233
> 
> 赞同：3
> 
> 时间：2013-03-11T02:18:43.030
> 
> 标签：android, aidl

我想通过一个带有aidl文件的服务来绑定2个应用程序。

在我的应用程序 A 中（带有将被访问的服务）：

→aidl 文件（BillingInterface.aidl）：

```
package com.A.service;
import android.os.Bundle;

interface BillingInterface {
    Bundle getServiceDetails(String a, String b);
} 
```

Java接口是自动创建的，没有麻烦。

然后，我的服务将被远程：

```
public class BillingService extends Service {

    private static final String TAG = BillingService.class.getName();

    @Override
    public void onCreate() {
        super.onCreate();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    @Override
    public IBinder onBind(Intent arg0) {

        return new BillingInterface.Stub() {    

            @Override
            public Bundle getServiceDetails(String a, String b)
                throws RemoteException {

                Bundle b = new Bundle();
                b.putString("test", "simple test");
                return b;
            };
        }
    }

} 
```

在我的清单文件中：

```
<service
        android:name=".service.BillingService"
        android:enabled="true"
        android:exported="true"
        android:process=":remote" 

        <intent-filter>
           <action android:name=".service.BillingInterface.aidl" />
        </intent-filter>
/> 
```

在我的应用程序 B 中，我尝试连接到它（我有相同的aidl 文件）：

```
protected void onCreate(Bundle savedInstanceState) {
...

    Intent i = new Intent();
    i.setClassName("com.A", "com.A.service.BillingService");

    try {

    Boolean ret = bindService(i, mConnection , Context.BIND_DEBUG_UNBIND );
    Log.d("DEBUG", ret.toString());  // will return "true"

    } catch (Exception e) {
    Log.e("DEBUG", "not able to bind ! ");
    }

...

private ServiceConnection mConnection = new ServiceConnection(){

    public void onServiceConnected(ComponentName name, IBinder boundService) {
        service = BillingInterface.Stub.asInterface((IBinder) boundService);
        Log.d("DEBUG", "onServiceConnected() : OK ");
    }

        public void onServiceDisconnected(ComponentName name) {
            service = null;
        }
    };

    //When clicking button :

    public void onclick(View v) {

        try {

            // serviceのcheckTransfertメッソードを呼ぶ
            Bundle response = service.getServiceDetails("test", "test");

            Log.d("DEBUG", response.getString("test"));

        } catch (RemoteException e) {

            Log.e("DEBUG", "error in RemoteExpcetion" + e.getMessage());
        }

    } 
```

绑定到服务 (bindService) 时，我得到一个布尔值“true”，但我的 serviceConnection 中的 onServiceConnected 方法永远不会被调用。我设置了一个按钮来调用服务的方法（参见上面的方法“onclick”）。如果我点击我会收到以下消息：

```
03-11 02:00:32.895: E/AndroidRuntime(3066): FATAL EXCEPTION: main
03-11 02:00:32.895: E/AndroidRuntime(3066): java.lang.IllegalStateException: Could not execute method of the activity
03-11 02:00:32.895: E/AndroidRuntime(3066):     at android.view.View$1.onClick(View.java:2072)
03-11 02:00:32.895: E/AndroidRuntime(3066):     at android.view.View.performClick(View.java:2408)
03-11 02:00:32.895: E/AndroidRuntime(3066):     at android.view.View$PerformClick.run(View.java:8816)
03-11 02:00:32.895: E/AndroidRuntime(3066):     at android.os.Handler.handleCallback(Handler.java:587)
03-11 02:00:32.895: E/AndroidRuntime(3066):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-11 02:00:32.895: E/AndroidRuntime(3066):     at android.os.Looper.loop(Looper.java:123)
03-11 02:00:32.895: E/AndroidRuntime(3066):     at android.app.ActivityThread.main(ActivityThread.java:4627)
03-11 02:00:32.895: E/AndroidRuntime(3066):     at java.lang.reflect.Method.invokeNative(Native Method)
03-11 02:00:32.895: E/AndroidRuntime(3066):     at java.lang.reflect.Method.invoke(Method.java:521)
03-11 02:00:32.895: E/AndroidRuntime(3066):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-11 02:00:32.895: E/AndroidRuntime(3066):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-11 02:00:32.895: E/AndroidRuntime(3066):     at dalvik.system.NativeStart.main(Native Method)
03-11 02:00:32.895: E/AndroidRuntime(3066): Caused by: java.lang.reflect.InvocationTargetException
03-11 02:00:32.895: E/AndroidRuntime(3066):     at com.example.testconnection/xxxx.MainActivity.onclick(MainActivity.java:59)
03-11 02:00:32.895: E/AndroidRuntime(3066):     at java.lang.reflect.Method.invokeNative(Native Method)
03-11 02:00:32.895: E/AndroidRuntime(3066):     at java.lang.reflect.Method.invoke(Method.java:521)
03-11 02:00:32.895: E/AndroidRuntime(3066):     at android.view.View$1.onClick(View.java:2067)
03-11 02:00:32.895: E/AndroidRuntime(3066):     ... 11 more
03-11 02:00:32.895: E/AndroidRuntime(3066): Caused by: java.lang.NullPointerException
03-11 02:00:32.895: E/AndroidRuntime(3066):     ... 15 more 
```

有任何想法吗 ？感谢您的阅读！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T03:29:48.757

改变

```
 Boolean ret = bindService(i, mConnection , Context.BIND_DEBUG_UNBIND ); 
```

到：

```
Boolean ret = bindService(i, mConnection , Context.BIND_AUTO_CREATE ); 
```

然后将调用 onServiceConnected。

# user-interface - 如何保存 PostScript 以外的 Plotchart 画布而不显示它？

> ID：15330242
> 
> 赞同：0
> 
> 时间：2013-03-11T02:19:53.073
> 
> 标签：user-interface, charts, tcl, tk

我阅读了Plotchart[文档的](http://tcllib.sourceforge.net/doc/plotchart.html)[其他输出格式](http://tcllib.sourceforge.net/doc/plotchart.html#SECTid82631b0)部分，但仍然不知道该怎么做。

我想要：

1.  将画布另存为图像而不显示它。所以我可以在批处理模式下运行它。
2.  以其他格式保存。（例如：jpeg、png...）

一个简短的例子表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:24:13.073

我没有尝试此解决方案，但您链接的手册页描述了`saveplot`将绘图存储到 Postscript（或其他图像格式）文件中的命令。

创建绘图小部件后，您可以执行以下操作

```
.plot saveplot filename.ps -plotregion bbox 
```

其中`-plotregion bbox`说要保存所有绘图，而不仅仅是可见部分（`-plotregion window`，这是默认设置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:04:52.150

我发现[Img](http://wiki.tcl.tk/1404)库能够将 Postscript 转换为各种格式，并且**不显示**画布的一种快速而肮脏的方式是`exit`立即运行。

这是一个例子：

```
package require Plotchart
package require Img

canvas .c -background white -width 400 -height 200
pack   .c -fill both

set s [::Plotchart::createXYPlot .c {0.0 100.0 10.0} {0.0 100.0 20.0}]

foreach {x y} {0.0 32.0 10.0 50.0 25.0 60.0 78.0 11.0 } {
    $s plot series1 $x $y
}

$s title "Data series"

set file "test.ps"
$s saveplot $file
set root [file rootname $file]

set image [image create photo -file $file]
foreach {f suffix} {JPEG jpg GIF gif PNG png} {
    $image write $root.$suffix -format $f
}

exit 
```

# actionscript-3 - 从本地环境中的闪存套接字连接到 TCP 服务器

> ID：15330244
> 
> 赞同：2
> 
> 时间：2013-03-11T02:20:26.027
> 
> 标签：actionscript-3, node.js, cross-domain, cross-domain-policy

我制作了一个用于分发版本的 swf 文件，供客户在他们的计算机上使用。
我有一个从该 swf 文件连接的 TCP 服务器。
在测试之前，我在adobe网站上阅读了一些与策略文件相关的文章

我尝试对此进行测试，并为此使用了 nodejs 和 swf 文件

但我失败了。这是它的样子。

根上的 crossdomain.xml

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.adobe.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
    <allow-access-from domain="*" to-ports="3000" />
</cross-domain-policy> 
```

tcp_server.js

```
var sys = require("sys"),
net = require("net");

var server = net.createServer(function(stream) {
stream.addListener("connect", function() {
    sys.puts("Client connected");
    stream.write("hello\r\n");
});

stream.addListener("data", function(data) {
    sys.puts("Received from client: " + data);
    stream.write(data);
});

stream.addListener("end", function() {
    sys.puts("Client disconnected");
    stream.write("goodbye\r\n");
    stream.end();
});
});

server.listen(3000, "localhost"); 
```

本地的 swf 文件

```
import flash.net.Socket;

var socket:Socket = new Socket();
trace(socket);
trace("a socket is created");

socket.connect("localhost", 3000); 
```

无论如何，这似乎是一个长代码

我测试了它，并得到了这个错误

对于错误代码，xmlsocket://localhost:843 的策略文件将被忽略

我找不到我的代码有什么问题，
如果您知道，请告诉我
感谢阅读此问题的人

祝你今天过得愉快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:51:44.393

Flash Player 检查策略文件服务器（默认为端口 843），或者如果需要，检查您正在打开的套接字（对您来说，端口 3000）。

策略文件服务器是一个使用有效策略文件响应的套接字。您的消息发生的情况很可能是它正在发送请求并返回策略文件以外的其他内容，因此端口 3000 的语法无效。编程套接字以在收到`<policy-file-request/>`消息时通过套接字返回您的 crossdomain.xml 文件。

更多[http://www.adobe.com/devnet/flashplayer/articles/socket_policy_files.html](http://www.adobe.com/devnet/flashplayer/articles/socket_policy_files.html)

# python - 如何在 GAE 应用程序的页面之间传递数据？

> ID：15330246
> 
> 赞同：0
> 
> 时间：2013-03-11T02:21:21.747
> 
> 标签：python, google-app-engine

我有一个相当基本的 GAE 应用程序，它接受一些输入，从网页中获取一些数据，解析，然后将其呈现给用户。现在，相当空闲的输入 HTML 表单将参数发布到输出“文件”，该文件完全由该 URL 的处理程序生成。

我想对数据做几件事（例如，也许在登录页面上绘制图表，然后将其写入输出文件），但我不知道应该如何在不同的处理程序之间传递解析的数据。我也许可以对其进行编码，然后将其连续发布到其他处理程序，但我的直觉说我不应该需要在我的应用程序中来回 HTTP 数据 - 这似乎非常低效（我的直觉也很饿......）。

在相当广泛的范围内（或者可能是一个示例的链接），我的处理程序应该如何处理这个？

### 后来的想法（编辑）

我现在非常粗略的想法是将表单提交到一个页面，该页面 1）将后续查询输入到数据库（`datastore`？）中，键入某个哈希值，然后使用它来 2）抓取并解析所有数据。解析后的数据将存储在内存 ( `memcache`?) 中，以便立即用于绘制图表和/或将其处理为各种表格格式以供下载。执行上述解析的脚本会根据哈希值重定向到一个唯一的 URL，该哈希值可以被引用以获取数据。

想法是您可以保存 URL，然后如果您稍后在数据丢失时访问它，它可以重新查询源以取回/更新它。

合理的？我应该看看其他的东西吗？

# xcode - 我如何使用 AppleScriptObjC 根据字符串更改按钮的状态？

> ID：15330251
> 
> 赞同：0
> 
> 时间：2013-03-11T02:22:18.443
> 
> 标签：xcode, macos, applescript-objc

在我的 AppleScriptObjC 程序中，我有很多复选框。我有一个脚本循环遍历一个列表，其中按钮的每个项目标识符作为字符串。我希望它根据参数激活每个按钮的 setState_ 方法。简而言之，我正在寻找这样的东西：

```
 set strIdentifier to "button identifier"
    [magic code here!]
    strIdentifier's setState_(1) 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T06:09:40.423

我不认为有任何“魔法”可以做到这一点。我的意图是遍历复选框父视图中的控件，如下所示：

```
repeat with aSubview in theParentView's subviews()
    if aSubview's title()'s isEqualToString_("Check") is not 0 then
        aSubview's setState_(false)
    end if
end repeat 
```

这里，`theParentView`是复选框所在视图的出口。基本上有两种选择：

*   对于每个标识符，您遍历子视图
*   您遍历子视图一次并将它们添加到字典中，标识符作为键。稍后，您可以通过对字典的访问来访问复选框。

在第二种情况下，代码可能如下所示：

```
set aDict to NSMutableDictionary's alloc()'s init()

repeat with aSubview in theWindow's subviews()
    aDict's setObject_forKey_(aSubview, aSubview's title())
end repeat

aDict's objectForKey_("Check 1")'s setState_(false) 
```

# ember.js - Ember.js 控制器需要和子控制器

> ID：15330258
> 
> 赞同：0
> 
> 时间：2013-03-11T02:23:17.257
> 
> 标签：ember.js

我无法从父控制器定位子控制器。

有这个：

```
<script type="text/x-handlebars" data-template-name="parent">
    <h1>Parent controller</h1>
    {{control "child"}}
</script>

<script type="text/x-handlebars" data-template-name="child">
    <h2>Child controller</h2>
    {{controller}}
</script>

App.ParentController = Ember.Controller.extend({
    needs: ["child"],
    applyActionOnChild:function(){
        this.get('controllers.child').someAction();
    }
});
App.ParentView = Ember.View.extend({});

App.ChildController = Ember.Controller.extend({
    someAction:function(){
        //Called but not the right instance
    };
});
App.ChildView = Ember.View.extend({}); 
```

当子控制器调用父控制器时，ember 的需求功能似乎起作用，但反过来却不行......

如果我在 someAction 方法中放置一个断点，我可以看到我的对象引用与子视图上显示的对象引用不同......

任何人都知道这如何工作？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:21:52.683

在您指定的示例`{{controller "child"}}`中，您的意思是`{{control "child"}}`？如果不难说出你想要做什么。

需求功能是将控制器单例连接在一起，但控制助手在新控制器/视图对的上下文中呈现模板。您不能使用需求来访问这些控制器，因为需求无法知道您指的是哪个实例。

听起来您想在一个真正的`childController`单例的上下文中呈现“子”模板。在这种情况下，使用渲染助手：`{{render "child"}}`

# diagram - 三元图（C++ 和 C#）的用户友好界面

> ID：15330259
> 
> 赞同：1
> 
> 时间：2013-03-11T02:23:26.017
> 
> 标签：diagram, mesh, triangulation, ternary, delaunay

有谁知道如何公开一个用户友好的界面或代码。我刚刚开发了一个绘制三元图的界面。我知道有些软件可以做同样的事情，但是有了这个，用户可以在三元图中选择一个特定的区域来绘制数据（例如，石油工程需要这种能力）。我还有用于 Delaunay 三角剖分、voroni 图、网格划分和颜色映射的 MATLAB、C++、C# 代码。我想也许它们对其他人有用。我希望我可以上传一些我的作品的照片，但我需要至少有 10 个声望。

谢谢，

# vb.net - 当我只有部分名称时如何选择文件？

> ID：15330264
> 
> 赞同：-1
> 
> 时间：2013-03-11T02:24:19.957
> 
> 标签：vb.net, process, wildcard, presentation

我正在构建一个从不同文件夹打开各种文件的应用程序。我需要通过随后打开名称开头有“1”的 Powerpoint 演示文稿来打开应用程序。我该怎么做？我编写了以下代码，但只有在输入确切名称时才有效：

```
If (System.IO.File.Exists("FilePath\1*")) Then
  'Lists File Names from folder & when selected, opens selected file in default program
    Dim file3dopen As New ProcessStartInfo()
    With file3dopen
        .FileName = "TheFilepath\1*"
        .UseShellExecute = True
    End With
    Process.Start(file3dopen)
Else
    MsgBox("No Such File Exists")
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:22:55.893

您需要使用 查找该目录中的所有文件`Directory.GetFiles(string path, string pattern)`。

```
 Dim files As String() = Directory.GetFiles("\FilePath", "1*")

    If files.Length > 0 Then '  file found
        Dim file3dopen As New ProcessStartInfo()
        With file3dopen
            .FileName = files(0)
            .UseShellExecute = True
        End With
        Process.Start(file3dopen)
    Else
        'file not found
        MsgBox("No Such File Exists")
    End If 
```

# c++ - 返回对象 Mat 时为什么堆损坏？

> ID：15330266
> 
> 赞同：1
> 
> 时间：2013-03-11T02:24:31.260
> 
> 标签：c++, visual-c++, opencv, heap-corruption

我不明白为什么这个程序会出现损坏的堆错误（我使用 OpenCV 作为类`Mat`）：

```
class A {
    private:
    Mat image;      

    static UINT ThreadProc( LPVOID pParam ) {
        A* pThis= (ClientNetwork*)pParam;
        UINT nRet= pThis->DoThreadProc();     // get out of 'static mode'
        return( nRet );
    }
    UINT ClientNetwork::DoThreadProc() {
         vector<uchar> vect;
         while(1) {
             /**** initialize vect and get the image data to decode ****/

             decode(vect);
         }
    }

    public:
    void decode(const vector<uchar>& vectorData){image=imdecode(vectorData, CV_LOAD_IMAGE_COLOR);}
    Mat get_image(){return image;}
    void start() {m_pcThread= AfxBeginThread(ThreadProc, this );}
}

int main() {
    A* a = new A();
    a->start();
    while(1) {
        Mat image = a->get_image();
    }
    delete a;
    return 0;
} 
```

似乎错误来自`Mat image = a->get_image();`因为如果我返回引用而不是对象的副本，则不再有错误：

```
Mat* get_image(){return &image;} 
```

和

```
Mat* image = a->get_image(); 
```

我读到返回一个对象的副本在 C++ 中比引用更优雅。所以我想知道什么是错的。

编辑：Visual Studio 中断，`a->decode(vect)`但它仅在我返回对象而不是引用时发生。

编辑 2：我编辑了代码以反映完整的程序。我认为问题来自`a`同时复制和修改的共享对象。我将使用互斥锁查看问题是否仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:09:41.983

您`a`无需初始化即可使用。

```
int main() {
    A* a;
    vector<uchar> vect;
    while(1) {
        // get the vector of data
        a->decode(vect); 
```

欢迎来到未定义的行为，人群：你。

初始化`a`以获得更好的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T06:00:39.733

那就是你自己建议的线程同步问题。图像在无限循环中不断填充。在它中间的某个地方，你试图复制它。灾难的食谱。在每次迭代中，您需要在 DoThreadProc 中的该循环内获取写锁。然后你需要在你的 get_image 中获取一个读锁。您需要使用不会饿死读者的读/写锁库。

或者，您可以使用互斥锁/关键部分。写入循环和读取（get_image）都只是在他们工作时获得对图像的独占访问权。

不过我很好奇-您的线程过程正在无限循环中解码事物。你想在那里做什么？在阅读您期望的图像时？循环迭代中那个时间点的任何图像？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T05:17:52.483

的复制构造函数`cv::Mat`不会创建图像的深层副本。它只是创建对原始的引用`Mat`并增加其引用计数。在该类的以下函数中，该`return`语句调用复制构造函数，返回对原始 的引用`image`，这可能是堆损坏的原因：

```
Mat get_image(){ return image; } 
```

您应该返回如下的深层副本`image`，以免`image`意外修改原始内容。

```
Mat get_image(){ return image.clone(); } 
```

# java - 无法从 Java 中匹配的 * 组中检索数据

> ID：15330269
> 
> 赞同：1
> 
> 时间：2013-03-11T02:25:35.723
> 
> 标签：java, regex

我无法找出正确的正则表达式。

这是一些示例代码：

```
@Test
public void testFindEasyNaked() {
    System.out.println("Naked_find");
    String arg = "hi mom <us-patent-grant seq=\"002\" image=\"D000001\" >foo<name>Fred</name></us-patent-grant> extra stuff";
    String nakedPat = "<(us-patent-grant)((\\s*[\\S&&[^>]])*)*\\s*>(.+?)</\\1>";
    System.out.println(nakedPat);

    Pattern naked = Pattern.compile(nakedPat, Pattern.MULTILINE + Pattern.DOTALL );
    Matcher m = naked.matcher(arg);
    if (m.find()) {
        System.out.println("found naked");
        for (int i = 0; i <= m.groupCount(); i++) {
            System.out.printf("%d: %s\n", i, m.group(i));
        }
    } else {
        System.out.println("can't find naked either");
    }
    System.out.flush();
} 
```

我的正则表达式匹配字符串，但我无法提取重复的模式。我想要的是拥有

```
 seq=\"002\" image=\"D000001\" 
```

作为一个群体被拉出来。这是程序在我执行时显示的内容。

```
Naked_find
<(us-patent-grant)((\s*[\S&&[^>]])*)*\s*>(.+?)</\1>
found naked
0: <us-patent-grant seq="002" image="D000001" >foo<name>Fred</name></us-patent-grant>
1: us-patent-grant
2: 
3: "
4: foo<name>Fred</name> 
```

#4 组很好，但是 #2 和 #3 的数据在哪里，为什么 #3 中有双引号？

谢谢帕特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:33:21.087

即使使用 XML 解析器是合理的，我想我也可以解释正则表达式中的错误：

```
String nakedPat = "<(us-patent-grant)((\\s*[\\S&&[^>]])*)*\\s*>(.+?)</\\1>"; 
```

您尝试匹配零件中的参数`((\\s*[\\S&&[^>]])*)*`。看看你最里面的组：你有`\s*`("one or more space") 后跟`\\S&&[^>]`("one non-space which is not `>`)。这意味着在你的组中，你要么有零到一些空格，后跟*一个*非-空格字符。

所以这将匹配 "us-patent-grant" 和`>`. 并且每次正则表达式引擎匹配它时，它都会*将*值分配给组3。这意味着之前匹配的组丢失了。这就是为什么你有标签的最后一个字符，即`"`.

您可以通过添加`+`after对其进行一些改进`[\\S&&[^>]]`，因此它将至少匹配一个完整的非空格序列，但您只会获得组中的最后一个标记属性。您应该改用更好更简单的方法：

您的目标是退出`seq="002" image="D000001"`一个组，您应该做的只是匹配不在`>`“us-patent-grant”之后的每个字符的序列：

```
"<(us-patent-grant)\\s*([^>]*)\\s*>(.+?)</\\1>" 
```

这样，您的组中有以下值：

```
Group 1: us-patent-grant
Group 2: seq=\"002\" image=\"D000001\"
Group 3: foo<name>Fred</name> 
```

这是 Regexplanet 上的测试：http: [//fiddle.re/ezfd6](http://fiddle.re/ezfd6)

# ios - Facebook Like Box 插件无法在 iphone/ipad 上运行

> ID：15330270
> 
> 赞同：1
> 
> 时间：2013-03-11T02:25:36.723
> 
> 标签：ios, facebook

我已经使用 Facebook like box 社交插件添加到网站 www.themercantilehotel.com.au 但是它不会显示在 iphone/ipad 上，但它确实适用于所有浏览器。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-12T09:22:34.447

问题是您已将 Facebook 页面设置为某种限制、年龄或位置。如果您在登录 Facebook 时尝试访问您的网站，在同一浏览器中，您将能够查看您的点赞框。解决方案是更改您的 Facebook 页面的限制。然后注销的用户也可以查看喜欢的框。

Facebook 无法控制离线用户的年龄或位置，因此决定不显示该框。

# ruby - 为什么这些随机种子会打印“Hello World”？

> ID：15330271
> 
> 赞同：0
> 
> 时间：2013-03-11T02:26:03.707
> 
> 标签：ruby, tree, random-seed

使用这些随机种子值会生成`'Hello Word'`，但为什么呢？

```
seeds = [685_995_739, 811_060_588]

tree = seeds.map do |seed|
    srand seed
    leafs = leaf = '' # seed grow, become leaf
    leafs += (leaf + 64).chr while (leaf = rand(27)) > 0
    next leafs
end

puts tree.join ' ' # Seed become tree =D 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:50:13.903

阅读文档[`srand`](http://ruby-doc.org/core-2.0/Kernel.html#method-i-srand)，这些种子`rand(27)`将选择代表“Hello”和“World”的数字序列，以“0”结尾表示“结束”。

```
irb(main):042:0> srand 685_995_739
=> 0
irb(main):043:0> rand 27
=> 8
irb(main):044:0> rand 27
=> 5
irb(main):045:0> rand 27
=> 12
irb(main):046:0> rand 27
=> 12
irb(main):047:0> rand 27
=> 15
irb(main):048:0> rand 27
=> 0
irb(main):049:0> [8,5,12,12,15].map{ |n| (n+64).chr }
=> ["H", "E", "L", "L", "O"] 
```

留给读者作为练习：编写一个脚本，为给定的结果字符串找到正确的种子，并在适当的时间内运行；o)

# java - 传递命令行参数以在 Java 中复制文件名

> ID：15330272
> 
> 赞同：0
> 
> 时间：2013-03-11T02:26:32.803
> 
> 标签：java, file-io, command-line-arguments

是否可以从 IDE（例如 NetBeans 或 Eclipse）编写程序，该程序可以从命令行编译并在用户在要运行的 java 类程序名称之后输入两个参数后运行？

如果是这样，可以将绝对路径作为参数之一传入吗？

如果是这样，（如果源文件或目标文件有一个多字描述符，如 Big Sky File.txt），它如何作为参数传入？

我知道这是很多问题，但我已经搜索了高和低，似乎没有什么比这些主题的表面更重要了。

@Code-Guru，@thkala，这是我正在尝试的代码（格式化了一下）：

编辑：@Code-Guru，我添加了违规行（不知道我是如何错过的）。

下一次编辑：@ Code-Guru，这里是 CopyFile.java 中更新的文件内容，以及由此产生的错误消息：

```
import java.io.*;

public class CopyFile
{
 public static void main(String args[]) throws IOException, NullPointerException
{ 
int num; 
FileInputStream fileIn; 
FileOutputStream fileOut; 
try
{ 
  // open input file 
  try
  { 
    fileIn = new FileInputStream(args[0]); 
  }

  catch(FileNotFoundException e)
  { 
  System.out.println("Input File Not Found."); 
  return; 
  }

  // open output file 
  try
  { 
    fileOut = new FileOutputStream(args[1]); 
  }

  catch(FileNotFoundException e)
  { 
    System.out.println("Error Opening Output File.");
    return;
  }

}

catch(ArrayIndexOutOfBoundsException e)
{
  System.out.println("Incorrect argument use:java CopyFile Source Destination"); 
  return;
} 

// Copy File 
try
{ 
  do
  {
    num = fileIn.read();
    if(num != -1)
    {
      fileOut.write(num);
    }
  }

  while(num != -1); 
}

catch(IOException e)
{
  System.out.println("File Error: Could not copy file."); 
}
fileIn.close();
fileOut.close();
}
} 
```

这是我从命令提示符收到的错误消息：

> 错误：无法找到或加载主类 CopyFile

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T02:31:28.707

> 是否可以从 IDE（例如 NetBeans 或 Eclipse）编写程序，该程序可以从命令行编译并在用户在要运行的 java 类程序名称之后输入两个参数后运行？

是的，有可能。

> 如果是这样，可以将绝对路径作为参数之一传入吗？

绝对 -[任何字符串都可以作为参数传递](http://docs.oracle.com/javase/tutorial/essential/environment/cmdLineArgs.html)，只要它的大小不超过某个（通常是系统定义的）限制。

> 如果是这样，（如果源文件或目标文件有一个多字描述符，如 Big Sky File.txt），它如何作为参数传入？

通常，带有空格、特殊字符等的参数由调用 shell 处理，而不是由 Java 程序处理。请查阅您的文档，了解如何在您使用的任何命令行 shell 中正确引用此类参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:27:14.630

答案就在这部分错误信息中：

```
(wrong name: copyfile/CopyFile) 
```

即，您的班级的完全限定名称是`copyfile.CopyFile`. Java 要求包布局与磁盘上的文件夹布局相匹配，因此它知道如何查找内容。

因此，您的类文件必须位于名为 的子文件夹`copyfile`中，然后调用为`java copyfile.CopyFile`，或者您可以通过`package copyfile;`从代码中删除声明来编译未命名的默认包中的类（您没有显示该行，但它必须存在） .

更多信息：[http ://www.jarticles.com/package/package_eng.html](http://www.jarticles.com/package/package_eng.html)

# android - android facebook sdk 错误

> ID：15330273
> 
> 赞同：0
> 
> 时间：2013-03-11T02:26:38.160
> 
> 标签：android, facebook

嗨，我将 facebook sdk 中的示例项目导入到我的 eclipse 环境中。在构建项目时，我不断收到以下错误：

`Android requires compiler compliance level 5.0 or 6.0\. Found '1.7' instead. Please use Android Tools > Fix Project Properties.`

我尝试过 Android Tool > Fix Project Properties 并且我已经转到 Properties > Java Compiler 并将 Compiler Compliance Level 设置为 1.6 但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:53:09.780

这是我的工作区的问题。我的工作区设置为 1.7，因此即使我将特定的编译器合规性级别设置为 1.6，它也不会工作，直到我将工作区编译器合规性级别设置为 1.6

# algorithm - Python 或 C：将一对列表转换为连接列表

> ID：15330280
> 
> 赞同：-3
> 
> 时间：2013-03-11T02:27:31.070
> 
> 标签：algorithm

什么是 C 或 python 中的有效算法，给定一个表示两个数字之间关系的无序对列表，将组合这些对，使它们形成一个连续列表。

例如，给定以下内容：

```
(0, 1)
(1, 2)
(3, 2)
(4, 3) 
```

产生以下内容：`[0, 1, 2, 3, 4]`

显然，这在对中存在间隙或循环的情况下不起作用，例如 ，`(0, 1) (3, 4)`并且在这些情况下，会抛出错误消息或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:53:39.423

这些数字可以建模为图中的一个顶点。然后列表中的每个元素将代表节点之间的一条边。

您正在寻找的是该图的“欧拉路径”。为此有多种算法。查看众所周知的算法：[http ://en.wikipedia.org/wiki/Eulerian_path](http://en.wikipedia.org/wiki/Eulerian_path)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:58:08.063

您尝试做的不是欧拉路径（访问每个边一次），而是[哈密顿路径](http://en.wikipedia.org/wiki/Hamiltonian_path)（访问每个顶点一次），因为您不希望路径中有循环，而循环的定义意味着您没有'不想访问任何顶点两次。

众所周知，这个问题是[NP 完全的](http://en.wikipedia.org/wiki/NP-complete_problem)，这意味着没有已知的有效算法（如果“有效”是指[多项式时间](http://en.wikipedia.org/wiki/Time_complexity#Polynomial_time)）。

如果你能找到一个有效的算法来解决这个问题，你也可以通过证明 P 和 NP 相等来解决[P vs NP 问题。](http://en.wikipedia.org/wiki/P_versus_NP_problem)大多数计算机科学家认为 P 与 NP 问题的答案是“不，NP 问题的有效算法是不可能的”，这意味着您的问题不可能有有效的算法（尽管仍有待证明）。

# image-processing - 文本图像的特征提取

> ID：15330281
> 
> 赞同：1
> 
> 时间：2013-03-11T02:27:35.220
> 
> 标签：image-processing, computer-vision, feature-detection

对于主要由文本（可能旋转和缩放）组成的图像，什么是好的[特征提取](http://en.wikipedia.org/wiki/Feature_extraction#Image_processing)算法？

一个示例用例是我扫描文档，从中提取特征，然后将特征与桌面视频中的帧的特征进行匹配，以找出文档在桌面上的时间。

更准确地说，我知道存在许多特征提取算法，但我想知道是否有任何此类算法可以利用图像中文本的普遍性（高对比度、许多角落等），然后在更大的非纯文本图像中找到该图像的出现（可能以某种方式进行仿射变换）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:31:10.137

您绝对应该参考精确用于基于相机的文档图像检索的[局部可能排列散列方法（又名几何特征）。](http://www.m.cs.osakafu-u.ac.jp/~nakai/pdf/das.pdf)

# database - 如何从以字母 A 开头的所有表中查看所有列（所有表中的相同列名）？

> ID：15330282
> 
> 赞同：0
> 
> 时间：2013-03-11T02:28:00.977
> 
> 标签：database, oracle, oracle10g

这可能吗？我正在使用 ORACLE 10g。

例如：我有 50 个表，名称为 A01、A02、A03、A04.........A50。

所有这些表都有“相同的列名”例如：姓名、年龄、位置

**（注意：列名称相同，但列中的值不同）。**

在 END... 我想查看**列**中的所有数据：名称、年龄、位置来自所有以字母 A 开头的表。

**（注2：所有以A开头的表格都不是静态的，它们是动态的，意味着可能发生不同的变化。例如：可以删除A01到A10，可以添加A99）。**

很抱歉没有澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:46:30.597

```
DECLARE
  TYPE CurTyp IS REF CURSOR;
  v_cursor    CurTyp;
  v_record    A01%ROWTYPE;
  v_stmt_str  VARCHAR2(4000);
BEGIN
  for rec in (
      select table_name 
      from user_tables 
      where table_name like 'A%'
  ) loop
    if v_stmt_str is not null then
      v_stmt_str := v_stmt_str || ' union all ';
    end if;
    v_stmt_str := v_stmt_str || 'SELECT * FROM ' || rec.table_name;
  end loop;

  OPEN v_cursor FOR v_stmt_str;

  LOOP
    FETCH v_cursor INTO v_record;
    EXIT WHEN v_cursor%NOTFOUND;
    -- Read values v_record.name, v_record.age, v_record.location
    -- Do something with them
  END LOOP;

  CLOSE v_cursor;
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T02:42:24.143

根据我的理解，如果您想查看以 A 开头的表的所有列名，请尝试以下操作

```
select column_name,table_name from user_tab_cols where table_name like 'A%'; 
```

如果您的要求是其他内容，请明确说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T02:49:48.333

如果您正确理解并且表的数量是恒定的，那么您可以创建`VIEW`一次

```
CREATE VIEW vw_all
AS
SELECT name, age, location FROM A01
 UNION ALL
SELECT name, age, location FROM A01
 UNION ALL
...
SELECT name, age, location FROM A50
 UNION ALL 
```

然后使用它

```
SELECT * 
  FROM vw_all
 WHERE age < 35
 ORDER BY name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-17T00:29:59.477

这将返回您需要的所有表格：

```
select table_name
from user_tables
where table_name like 'A__'; 
```

由此，您可以将动态 sql 语句构建为：

```
select listagg('select * from '||table_name,' union all ') within group(order by table_name)
from user_tables
where table_name like 'A__' 
```

这实际上返回一个包含所有表和联合的 SQL 语句：

```
select * from A01 union all select * from A02 union all select * from A03 
```

最后通过本机动态 sql 执行。您可以在 PL/SQL 中执行此操作，因此您需要一个函数：

```
create function getA
    query varchar2(32000);
begin
    select listagg('select * from '||table_name,' union all ') within group(order by table_name)
    into query
    from user_tables
    where table_name like 'A__';
    open res for query;
    return res;
end; 
```

请注意，您手动执行的操作基本上称为*partitioning*，Oracle 已经为此提供了超强的支持。即，您可以拥有看起来像超级大表的东西，但从技术上讲，它存储为一组较小的表（和较小的索引），按分区标准进行拆分。例如，如果您有数百万条支付记录，您可以按年份对其进行分区，这样一个物理表只包含一组合理的数据。尽管如此，您仍然可以在其中自由选择，如果您从其他分区访问数据，Oracle 会负责将这些数据拉入。

# java - 如何使 JFileChooser 仅显示具有特定名称 Java 的文件夹

> ID：15330285
> 
> 赞同：1
> 
> 时间：2013-03-11T02:28:22.693
> 
> 标签：java, swing, jfilechooser

有什么方法可以在 JFileChooser 加载时仅显示名称为“Hello”的文件夹。

这是我的代码：它显示所有文件夹以及扩展名为 .py 和 .java 的文件。我想向它添加该文件夹名称限制。

```
FileNameExtensionFilter filter = new FileNameExtensionFilter(
            "Select Source Code To Analyze", "java","py");
            jfc.setFileFilter(filter);
            //jfc.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
    JButton btnNewButton = new JButton("Select Erroneous File"); //SELECT File Button.
    btnNewButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
             if (jfc.showOpenDialog(contentPane) !=
                        JFileChooser.APPROVE_OPTION)
                            return;
                    File f = jfc.getSelectedFile(); 
```

当前程序输出：

![在此处输入图像描述](../Images/950f700f50d0cf59eb846291f8c1b029.png)

我希望输出有点像这样：仅显示名称为“Hello”的文件夹和其余文件。 ![在此处输入图像描述](../Images/bed6260f52808d08aafe720826688edd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T05:13:13.393

像这样使用**文件过滤器**。

```
javax.swing.JFileChooser jfc = new javax.swing.JFileChooser();
jfc.setFileSelectionMode(javax.swing.JFileChooser.FILES_ONLY);
jfc.setFileFilter(new javax.swing.filechooser.FileFilter(){
    @Override
    public boolean accept(java.io.File file){
        //return (file.isDirectory() && file.getName().equals("Hello")) || !file.isDirectory(); 
        // Get only hello folder and .py files
        //return (file.isDirectory() && file.getName().equals("Hello")) || (!file.isDirectory() && file.getName().toLowerCase().endsWith(".py"));
        // Get only hello folder and .java files if Hello folder is opened else .py files
        return (file.isDirectory() && file.getName().equals("Hello")) || 
        (!file.isDirectory() && file.getParentFile().getName().equals("Hello") && 
        file.getName().toLowerCase().endsWith(".java")) || 
        (!file.isDirectory() && file.getName().toLowerCase().endsWith(".py"));
    }
    @Override
    public String getDescription() {
        return "Hello Folder and Other Files";
    }
}); 
```

# backbone.js - 从路由器中删除主干视图

> ID：15330286
> 
> 赞同：0
> 
> 时间：2013-03-11T02:28:30.473
> 
> 标签：backbone.js, backbone-views

如何从路由器中删除主干视图？我正在尝试运行检查，如果存在某个视图，请将其删除。我只是无法弄清楚实现这一点的语法。

我努力了：

```
if(typeof mysite.city != "undefined")
 {
  console.log(mysite.city.View.prototype.__proto__.remove);

  //Calling this remove function throws the error
  mysite.city.View.prototype.__proto__.remove();
 } 
```

但是由于强制重新加载页面，我得到了一些无法完全阅读的未捕获异常错误。我的 console.log 输出： function (){this.$el.remove();return this} 我只是不知道如何让它执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T02:53:08.547

为什么不直接打电话`mysite.city.remove()`？我想您由于某些奇怪的原因不能这样做（例如：您确实覆盖了该`remove`函数并丢失了原始功能；如果是这种情况，如果您现在需要调用它，为什么要覆盖该方法？）。如果你*必须*`remove`从 Backbone's调用原始方法`View`，你可以试试这个：

```
View.prototype.remove.call(mysite.city); 
```

这会将`remove`函数的上下文设置为 object `mysite.city`。`remove`否则，当以您调用它的方式执行函数时，`this`将是未定义的。

# mysql - 持久性：将文本转换为键

> ID：15330294
> 
> 赞同：2
> 
> 时间：2013-03-11T02:29:29.753
> 
> 标签：mysql, haskell, persistent, yesod

我正在使用持久和持久的mysql。我有一个 Monad SqlM

```
type SqlM a = SqlPersist (ResourceT IO) a) 
```

在我的功能里面

```
testFun :: T.Text -> SqlM ()
testFun someId = ... 
```

我可以使用查询数据库

```
entity <- selectFirst [SomeField ==. someId] 
```

但我想按 ID 选择实体。我必须将 someId 转换/打包为 Key - Type。我知道这不是这样做的方法，但我尝试过：

```
entity <- get $ Key { unKey = PersistInt64 (read $ T.unpack someId) } 
```

这失败了：

```
Couldn't match type `PersistEntityBackend
                       (Entity (DBTableGeneric backend0))'
              with `Database.Persist.GenericSql.Raw.SqlBackend'
The type variable `backend0' is ambiguous
Possible fix: add a type signature that fixes these type variable(s)
Expected type: Key (Entity (DBTableGeneric backend0))
  Actual type: KeyBackend
                 Database.Persist.GenericSql.Raw.SqlBackend
                 (Entity (DBTableGeneric backend0))
In the second argument of `($)', namely
  `Key {unKey = PersistInt64 (read $ T.unpack someId)}' 
```

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T03:07:12.360

我通常使用[fromPathPiece](http://haddocks.fpcomplete.com/fp/7.4.2/20130301-40/path-pieces/Web-PathPieces.html#v%3afromPathPiece)进行这种转换。至于您的错误消息，您可能只需添加一个类型签名以向编译器阐明您正在使用的类型。

# mysql - 将 INSERT INTO 查询变成 UPDATE

> ID：15330298
> 
> 赞同：0
> 
> 时间：2013-03-11T02:29:51.127
> 
> 标签：mysql, sql-update, sql-insert

我有一个在我的 MySQL 数据库中运行 INSERT INTO 查询的软件。我希望这个软件更新它正在访问的表中的一行，而不是创建一个新行。我无权更改软件中的查询，所以我想知道是否有某种方法可以通过其他方式实现这一点。是否有我可以在我的桌子上更改的设置，或者我可以创建一个软件可以使用的新视图来完成这项工作？这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:01:54.543

您可以使用 mysql 代理 ( [http://dev.mysql.com/doc/refman/5.6/en/mysql-proxy.html](http://dev.mysql.com/doc/refman/5.6/en/mysql-proxy.html) ) 之类的东西在查询到达数据库之前对其进行修改。这可以在不接触应用程序代码的情况下完成。

# jquery - jquery mobile 使用单页模板在两个 html 之间传递数据

> ID：15330299
> 
> 赞同：0
> 
> 时间：2013-03-11T02:29:59.000
> 
> 标签：jquery, jquery-mobile

我正在使用 jquerymobile /jquery/ js 并开发网页。我想将数据从一页传递到另一页。

使用 jquerymobile 中的多页模板，我能够做到这一点，但可以帮助我使用单页模板。请我不想使用全局变量或cookies或localstorage或使用url。尝试使用 Jquery.data 传递但无法实现这一点。请张贴一个例子。

我有两页。在连接“pagebeforeshow”事件的第二页中，我没有得到 b1 按钮对象，而是得到了 null。

```
$('#page2').live('pagebeforeshow',function(event, data)
{
     console.log (data.prevPage.attr('#b1'));
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:51:10.373

您错误地使用选择器作为属性名称。这就是您的代码失败的原因。要获取相对于`prevPage`您的元素，可以使用`find()`方法。然后你可以通过读取属性值`attr()`。

因此让你的按钮改变

```
console.log (data.prevPage.attr('#b1')); 
```

至

```
console.log (data.prevPage.find('#b1').attr('id'));
                                              ^ or any other attribute that you need 
```

# mule - mule append-string-transfomer 遇到问题

> ID：15330305
> 
> 赞同：1
> 
> 时间：2013-03-11T02:30:46.937
> 
> 标签：mule

我正在使用这个配置表达式。

```
<flow name="quartz">
  <quartz:inbound-endpoint name="quartzstart" jobName="job1" repeatInterval="5000">
  <quartz:envent=generator-job/>
  <byte-array-to-string-transformer/>
  <append-string-transformer message="Check Message"/>
  <tcp:outbound-endpoint host="localhost" port="7778" connector-ref="protocol"/>
</flow> 
```

它每 5 秒触发一次。

我期待收到的消息是

> 检查消息

但我收到的消息是

> (NullPayload)检查消息

我怎样才能只收到“检查消息”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:43:12.973

似乎空负载的 toString 正在返回（NullPayload）。

您可以在附加程序之前使用空字符串设置有效负载，或者如果这是您的完整逻辑，只需使用“检查消息”设置有效负载。

# c++ - 在忽略符号的同时分配变量？(c++)

> ID：15330306
> 
> 赞同：0
> 
> 时间：2013-03-11T02:30:47.870
> 
> 标签：c++, date, cin

我想知道如果单行用户输入包含符号，您将如何分配多个变量。例如，如果用户输入的是 5-25-1995，是否可以将 5、25 和 1995 分配给不同的变量并忽略“-”？我一直在尝试使用 cin.ignore()，但到目前为止还没有任何运气。

谢谢。

简洁版本：

用户输入“3-24-1995”

期望的结果

int month 是 3，int day 是 24，int year 是 25，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T02:34:11.033

```
char dummy;
int month, day, year;
cin >> month >> dummy >> day >> dummy >> year; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T03:45:07.027

由于您的具体要求是输入格式为“3-24-1995”，因此可能符合您的需求并产生您想要的内容。

```
/* Code */
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main ()
{
  char str[] ="3-24-1995"; // Your input that you will have some way of getting
  char * month, *day, *year;

  month=strtok (str,"-");

  day = strtok (NULL,"-");
  year = strtok (NULL,"-");

  // Here, converting to int, just because you were looking to convert it into 
  // int otherwise you could just leave it un converted too.

  printf("month: %d day: %d year: %d\n",atoi(month), atoi(day), atoi(year));
} 
```

# vba - 我将通过什么方式取消同步从特定来源（尤其是 CRM）同步的 Outlook 通讯簿项目？

> ID：15330307
> 
> 赞同：1
> 
> 时间：2013-03-11T02:30:52.873
> 
> 标签：vba, outlook, dynamics-crm-2011, crm

所以我安装了适用于 Outlook 的 Dynamics CRM 客户端，并连接了客户的 CRM 来为他们做一些工作。我不知道的是，微软决定自动选择将联系人同步到 Outlook 通讯簿。IE：CRM 的联系人实体中的所有联系人现在都已同步到我的主要 Outlook 通讯簿中。我现在有超过 35,000 个我**不**想要的联系人。

有没有办法从特定来源同步的 Outlook 通讯簿中“取消同步”特定项目？显然，我只想删除那些 CRM 联系人。是否有 API 或我可以用来遍历通讯簿的东西来允许我：

a) 确定哪些联系人来自 CRM

b) 删除它们

或者，如果有这样做的非编程方法？那将是最好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T02:51:47.820

尝试按创建日期对联系人进行排序，并删除安装 Dynamics CRM 后添加的联系人。

# parsing - 为什么 SQL CE Toolbox 无法解析我的 csv 文件？

> ID：15330310
> 
> 赞同：1
> 
> 时间：2013-03-11T02:31:08.567
> 
> 标签：parsing, csv, sql-server-ce, asp.net-webpages

SQLCEToolbox 看起来很有前途。

我安装它，打开 VS 2012，选择工具 | SQL Server Compact Toolbox，快速轻松地建立与我在 WebMatrix 中创建的 sdf 数据库的连接（也快速轻松地）。

然后我右键单击 SQLCEToolbox 的树视图中的数据库并选择从 CSV 文件导入。

注意：必须在文件的第一行（行/行 0）显式指定列名，并显式添加 ID/主键/标识值（如果您有这样的列）。

一旦我用我的 csv 文件修复了各种格式错误，它似乎导入得很好。但我得到了这个错误消息：

```
Error Code: 80004005
 Message   : The data was truncated while converting from one data type to another. [ Name of function(if known) =  ]
 Minor Err.: 25920
 Source    : SQL Server Compact ADO.NET Data Provider 
```

我的数据格式为：

```
1,SomeCategory,SomeName,SomeURL,Longitude,Latitude 
```

例如，这是一个示例行：

```
3,ArtGallery, Henry Miller Memorial Library,http://www.henrymiller.org/, -121.7537834,36.2207945 
```

除了 int ID 列，它们都是 nvarchar(50) 列。所以我意识到我的一些 URL 超过了 50 个字符；因此，在 WebMatrix 中，我将该列修改为 nvarchar(128)。再次尝试导入时，显然第一个问题已解决，但现在我得到：

```
Error Code: 80004005
 Message   : The column cannot be modified. [ Column name = ID ]
 Minor Err.: 25004
 Source    : SQL Server Compact ADO.NET Data Provider
 Err. Par. : ID 
```

好的，我认为，由于 ID 列将自动更新，我不应该在我的 csv 文件中包含它。所以我把它改成这样：

```
Category,Name,URL,Longitude,Latitude
ArtGallery, Henry Miller Memorial Library,http://www.henrymiller.org/, -121.7537834,36.2207945 
```

...但是当我尝试以这种方式导入记录（从第 0 行删除“ID”并从每行/记录中删除相应的 val）并尝试导入时，我得到：

```
Error Code: 80004005
 Message   : The data was truncated while converting from one data type to another. [ Name of function(if known) =  ]
 Minor Err.: 25920
 Source    : SQL Server Compact ADO.NET Data Provider 
```

我试图在[http://sqlcetoolbox.codeplex.com/](http://sqlcetoolbox.codeplex.com/)上发布一个问题，但尝试这样做只是将我带到了一个通用的 codeplex 区域（而不是 SQL CE Toolbox 特定的区域）。

那么现在可能是什么问题（修改后的第 0 行和另一个示例行如下所示）？最长的 URL 只有 98 个字符。

我的数据或方法有什么问题？

# ios - 您如何从 iOS 主屏幕 web 应用程序在 paypal 中创建新订单？

> ID：15330315
> 
> 赞同：0
> 
> 时间：2013-03-11T02:32:22.253
> 
> 标签：ios, web-applications, paypal

我知道可以通过类似于“paypalhere://takePayment?arguments”的 iOS URL 方案访问 PayPal Here。

我不知道这个 URL 方案是什么，但人们已经能够做我想做的事情，可以在此处阅读示例：[https ://github.com/paypal/PayPalHere-Sample/blob/master/ PPHSample/PPHSample/PPHSampleViewController.m](https://github.com/paypal/PayPalHere-Sample/blob/master/PPHSample/PPHSample/PPHSampleViewController.m)在第 171 行。

我只想在这里打开贝宝，至少通过总数并接收通过/失败回调。现在，如果您知道如何创建整个订单（产品名称、价格、数量），那就更好了！

请帮帮我！我无法通过阅读这个 ViewController 弄清楚它，它看起来是唯一暗示如何完成它的东西。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:43:59.790

检查此评论： [https ://github.com/paypal/PayPal-iOS-SDK/issues/1#issuecomment-14680084](https://github.com/paypal/PayPal-iOS-SDK/issues/1#issuecomment-14680084)

它有 2 个可能对您有用的文件。

# python - 使用 python 和 C 进行数字计数的不同效率

> ID：15330316
> 
> 赞同：1
> 
> 时间：2013-03-11T02:32:27.387
> 
> 标签：python, c, performance, python-2.7

我尝试编写一个函数来计算数字位数，顺便说一下，我尝试比较不同方式的效率。1.lenstr(i)方式：

```
def nDigits(i):
    return len(str(i))
for i in range(100000):
    print nDigits(i) 
```

大约需要 143.75s

2.log10方式：

```
import math
def nDigits(i):
    if i > 0:
        n = int(math.log10(i)) + 1
    elif i == 0:
        n = 1
    else:
        n = int(math.log10(-i)) + 2
    return n

for i in range(100000):
    print nDigits(i) 
```

大约需要 144.35 秒

3.划分方式：

```
def nDigits(i):
    t = 0
    while i > 0:
        t += 1
        i /= 10
    return t
for i in range(100000):
    print nDigits(i) 
```

大约需要 143.43s

4.c中的划分方式：

```
#include<stdio.h>

int digits(int num){
    int i = 0;
    while (num > 0){
        i += 1;
        num /= 10;
    }
    return i;
} 

void main(){
    int i = 0;
    while (i < 100000){
        i += 1;
        printf("%d",digits(i));    
    }
} 
```

大约需要0.07s

C是否比python好2000倍......或者python有更好的方法来计算数字。thx伙计们，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:38:05.647

这么慢？？如果您更改`for i in range(100000):`为`for i in xrange(100000):`，它会快得多，至少在我的计算机上（1 秒或 2 或 3 秒）。

我怀疑缓慢是由于您使用`range(100000)`

`xrange`效率更高，因为它不是生成对象列表，而是一次只生成一个对象。`range`在这种情况下，您应该赞成它。

编辑：在@cge 提到这个问题之后，我测试了你的原始代码（使用`range(100000)`）并且它也很快完成了，在一两秒内，所以这可能不是你的问题的原因（发生了一些可疑的事情，我不能'从您在此处发布的代码中看不到），但我建议您仍然使用`xrange`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T02:54:32.943

简化您的测试用例并删除所有这些`print`：

```
import math

def num_digits1(n):
    return len(str(n))

def num_digits2(n):
    return int(math.log10(n)) + 1

def num_digits3(n):
    t = 0

    while n:
        t += 1
        n /= 10

    return t 
```

这是我的结果：

```
>>> %timeit num_digits1(random.randint(1, 100000000))
100000 loops, best of 3: 1.64 us per loop
>>> %timeit num_digits2(random.randint(1, 100000000))
100000 loops, best of 3: 1.87 us per loop
>>> %timeit num_digits3(random.randint(1, 100000000))
100000 loops, best of 3: 2.49 us per loop
>>> %timeit random.randint(1, 100000000)
1000000 loops, best of 3: 1.29 us per loop 
```

减去生成随机数所需的时间，我得到：

```
num_digits1  0.35 us
num_digits2  0.58 us
num_digits3  1.20 us 
```

还有我的 C 代码比较（我希望这是公平的）：

```
#include <stdlib.h>

int rand_int(int min, int max) {
    return min + (rand() / (double) RAND_MAX) / (max - min);
}

int num_digits(int num) {
    int i = 0;

    while (num > 0){
        i += 1;
        num /= 10;
    }

    return i;
} 

int main() {
    int i;

    for (i = 0; i < 10000000; i++) {
        num_digits(rand_int(1, 100000000));
    }

    return 0;
} 
```

我运行它：

```
$ gcc test.c -o test
$ time ./test./test
0.15s user 0.00s system 97% cpu 0.154 total 
```

我的时间是：

```
 0.154 s / 10,000,000
= 0.0154 us (0.0138 us with -O3) 
```

C 代码比 Python 解决方案快大约 23 倍，这似乎很正常。希望我的 C 随机数生成器能正常工作。

使用 PyPy，我得到`66.7 ns`（不是`us`） for `num_digits1`，它只慢了 4.3 倍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T02:55:09.043

我认为你的瓶颈是打印语句。尝试将结果保存在列表中。

```
def nDigits(i):
    return len(str(i))
results = []
for i in xrange(1000000):
    results.append(nDigits(i))
print len(results) 
```

我使用`xrange`了代替`range`并添加了一个额外的`0`. 它在我的机器上执行 0.45 秒。

使用列表推导可以将时间缩短到 0.37 秒。

```
def nDigits(i):
    return len(str(i))
results = [nDigits(i) for i in xrange(1000000)]
print len(results) 
```

删除函数调用开销可以将时间缩短到 0.31 秒。

```
results = [len(str(i)) for i in xrange(1000000)]
print len(results) 
```

# c# - 读取大型 CSV 文件并在 C# 中进行处理。有什么建议么？

> ID：15330317
> 
> 赞同：5
> 
> 时间：2013-03-11T02:32:52.540
> 
> 标签：c#, csv, data-structures, large-files

我有一个大约 25G 的大型 CSV 文件。我需要解析大约 10 列的每一行并进行一些处理，最后将其保存到包含解析数据的新文件中。

我使用字典作为我的数据结构。为了避免内存溢出，我在 500,000 条记录后写入文件并清除字典。

谁能建议这是否是一种好方法。如果没有，还有其他更好的方法吗？**现在处理 25G 文件需要 30 分钟**。

这是代码

```
 private static void ReadData(string filename, FEnum fileType)
    {

       var resultData = new ResultsData
                        {
                            DataColumns = new List<string>(),
                            DataRows = new List<Dictionary<string, Results>>()
                        };

                    resultData.DataColumns.Add("count");
                    resultData.DataColumns.Add("userid");

                    Console.WriteLine("Start Processing : " + DateTime.Now);
                    const long processLimit = 100000;
                        //ProcessLimit : 500000, TimeElapsed : 30 Mins;
                        //ProcessLimit : 100000, TimeElaspsed - Overflow

                    Stopwatch stopwatch = new Stopwatch();

                    stopwatch.Start();
                    Dictionary<string, Results> parsedData = new Dictionary<string, Results>();

                    FileStream fileStream = new FileStream(filename, FileMode.Open, FileAccess.Read);
                    using (StreamReader streamReader = new StreamReader(fileStream))
                    {
                        string charsRead = streamReader.ReadLine();

                        int count = 0;
                        long linesProcessed = 0;

                        while (!String.IsNullOrEmpty(charsRead))
                        {

                            string[] columns = charsRead.Split(',');
                            string eventsList = columns[0] + ";" + columns[1] + ";" + columns[2] + ";" + columns[3] + ";" +
                                                columns[4] + ";" + columns[5] + ";" + columns[6] + ";" + columns[7];
                            if (parsedData.ContainsKey(columns[0]))
                            {
                                Results results = parsedData[columns[0]];
                                results.Count = results.Count + 1;
                                results.Conversion = results.Count;

                                results.EventList.Add(eventsList);
                                parsedData[columns[0]] = results;
                            }
                            else
                            {
                                Results results = new Results {
                                                    Count = 1, Hash_Person_Id = columns[0], Tag_Id = columns[1], Conversion = 1,
                                                    Campaign_Id = columns[2], Inventory_Placement = columns[3], Action_Id = columns[4], 
                                                    Creative_Group_Id = columns[5], Creative_Id = columns[6], Record_Time = columns[7]
                                                    };
                                results.EventList = new List<string> {eventsList};

                                    parsedData.Add(columns[0], results);
                            }
                            charsRead = streamReader.ReadLine();

                            linesProcessed++;

                            if (linesProcessed == processLimit)
                            {
                                linesProcessed = 0;
                                SaveParsedValues(filename, fileType, parsedData);
//Clear Dictionary
                                parsedData.Clear();
                            }
                        }
                    }

                    stopwatch.Stop();
                    Console.WriteLine(@"File  : {0}  Batch Limit : {1}  Time elapsed : {2} ", filename + Environment.NewLine, processLimit + Environment.NewLine, stopwatch.Elapsed + Environment.NewLine);

                } 
```

**谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:38:06.273

[Microsoft.VisualBasic.FileIO.TextFieldParser](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx#Y0)类看起来可以完成这项工作。试试看，它可能会加快速度。

# drupal-7 - Drupal 7 Form API 在表单提交时运行函数

> ID：15330319
> 
> 赞同：1
> 
> 时间：2013-03-11T02:33:16.820
> 
> 标签：drupal-7, drupal-forms

我创建了一个自定义模块，我需要在填写并提交表单时收集信息并运行一个函数。

它有两个文本区域和一个按钮。

这就是我所拥有的，在页面上显示得很好：

文件：`myFunction.admin.inc`

```
function myFunction_form($form)
{

    $form['pages'] = array(
    '#type' => 'fieldset',
    '#title' => t('Data'),
    '#collapsible' => FALSE,
    '#collapsed' => FALSE,
  );

    $form['pages']['title'] = array(
    '#type'          => 'textarea',
    '#title'         => t('Title'),
    '#rows'          => 5,
    '#resizable'    => FALSE,
  );

  $form['pages']['body'] = array(
    '#type'          => 'text_format',
    '#title'         => t('Body'),
    '#rows'          => 5,
    '#resizable'    => FALSE,
    '#format' => 'full_html',
  );

  $form['submit'] = array('#type' => 'submit', '#value' => t('Run Function'));

    myFunction($form);
    return $form;

}

function myFunction()
{
//This is where I use the data collected from my form and do what I need to do.
} 
```

所以我错过的东西（如果我走错了路，请告诉我）是我需要验证表格是否已填写，如果没有则返回错误消息。

如果表单已填写，则正确地将字段数据传递给我`function myFunction()`之前添加的函数，`return $form;`但这似乎是错误的方法。`myFunction()`如果表单存在错误，我不希望运行。

有人可以帮我完成我的自定义模块的最后一部分。

请注意，此模块不会向数据库添加任何内容。

再次，请告诉我我是否走错了路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T17:34:43.717

您应该遵循表单 API 使用的标准命名结构。如果你的功能是：

myFunction_form(),

然后

myFunction_form_validate() 将在提交以执行任何验证时被调用。如果一切都过去了，那么

myFunction_form_submit() 将被调用。您应该将提交逻辑（或对自定义函数的调用）放在提交中。

这是设置 $form['#submit'][] 和 $form['#validate'][] 的首选行为。

有关其工作原理的简单示例，请参见[示例模块](https://drupal.org/project/examples)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:49:24.177

以这种方式接近它：

```
$form['#validate'][] = 'myCustomValidateFunction';
$form['#submit'][]   = 'myCustomSubmitFunction';

function myCustomValidateFunction($form, &$form_state) { 
  \\if validation was not passed use form_set_error()
}

function myCustomSubmitFunction($form, &$form_state) { 
   //submit logic, $form_state includes the values
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T14:47:15.727

是的，你可能走错路了。您将必须添加自定义验证器并提交功能，例如

```
<?php

$form['#submit'][] = my_submit_callback
$form['#validate'][] = my_validator_callback

function my_submit_callback($form, &$form_state) {
  // form_state array contains the submitted values
}
function my_validator_callback($form, &$form_state) {
  // form_state array contains the submitted values
  if ($form_state['values']['body'] == '') {
   form_set_error(...)
}
} 
```

当然从你的 form_builder 函数中删除 myFunction() 调用

# ios - Facebook iOS 应用程序邀请朋友

> ID：15330320
> 
> 赞同：1
> 
> 时间：2013-03-11T02:33:22.713
> 
> 标签：ios, facebook, request, invite

我正在使用 Facebook SDK 在我的应用程序中连接 Facebook。用户可以向他们的朋友发送邀请。（使用 FB SDK 提供的请求对话框）。

[https://developers.facebook.com/docs/tutorials/ios-sdk-games/requests/](https://developers.facebook.com/docs/tutorials/ios-sdk-games/requests/)

如果朋友已经被邀请（无论朋友是否被接受），我会尽量保持朋友列表清晰，从列表中隐藏朋友。但我找不到这样做的方法。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-04T07:05:03.627

Facebook 文档很糟糕，但我发现可以排除经过身份验证的朋友，如下所示：

```
// See https://developers.facebook.com/docs/games/requests/v2.1 for explanation of the possible parameter keys
NSMutableDictionary* params =   [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                 // Optional parameter for sending request directly to user
                                 // with UID. If not specified, the MFS will be invoked
                                 // @"RECIPIENT_USER_ID", @"to",
                                 // Give the action object request information
                                 // @"send", @"action_type",
                                 // @"YOUR_OBJECT_ID", @"object_id",
                                   @"app_non_users", @"filters",
                                 nil];

[FBWebDialogs
 presentRequestsDialogModallyWithSession:nil
 message:@"Join me!"
 title:@"Invite Friends"
 parameters:params
 handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error) {
     if (error) {
         // Case A: Error launching the dialog or sending request.
         NSLog(@"Error sending request.");
     } else {
         if (result == FBWebDialogResultDialogNotCompleted) {
             // Case B: User clicked the "x" icon
             NSLog(@"User canceled request.");
         } else {
             NSLog(@"Request Sent.");
         }
     }
 }]; 
```

@"app_non_users", @"filters"，是重要的部分！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T05:48:30.063

我认为您不能排除已将请求发送给他们的朋友，但您可以建议朋友填充该列表。也许如果您已经知道向谁发送了请求，您可以将其他朋友填充到列表中。

# css - 为什么 MS 建议在 win 8 应用程序中使用点而不是像素？

> ID：15330323
> 
> 赞同：3
> 
> 时间：2013-03-11T02:33:55.637
> 
> 标签：css, windows-8, font-size

在 win 8 开发的 ms 样式指南中，他们指定了字体大小，单位是 ems 或像素。

有谁知道这是什么原因？

[http://msdn.microsoft.com/en-us/library/windows/apps/Hh700394.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh700394.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T02:49:27.807

答案是，微软在旧版浏览器（例如 Internet Explorer 7）中破坏了**pt**和**px**之间的关系。因此，整个公司的产品都坚持**pt**，而不是**px**或**em**。此外，还有很多相关的原因，例如版权和品牌。

详细说明：[点大小和 Em 平方：不是人们想的那样](http://www.thomasphinney.com/2011/03/point-size/)

# objective-c - 能够通过“触摸”移动多个图像

> ID：15330326
> 
> 赞同：0
> 
> 时间：2013-03-11T02:34:29.800
> 
> 标签：objective-c

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch = [[event touchesForView:self.view] anyObject];
    CGPoint point = [touch locationInView:self.view];

    basketView.center = CGPointMake(point.x, point.y);

} 
```

我目前有这段代码可以让用户用手指移动图像。但是，如果我想在屏幕上添加多个可移动图像（比如我还希望能够移动 UIImages basketView2 和 basketView3），我将如何更改代码以实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:15:12.773

你只需要修改你的代码如下

```
UITouch *touch = [[event touchesForView:self.view] anyObject];
CGPoint point = [touch locationInView:self.view];
UIImageView *currentView=(UIImageView *)touch.view;
currentView.center = CGPointMake(point.x, point.y); 
```

# c++ - C ++参数传递数组与单个项目

> ID：15330327
> 
> 赞同：2
> 
> 时间：2013-03-11T02:34:57.223
> 
> 标签：c++, function, parameters, pass-by-reference, pass-by-value

考虑两个功能：

```
int foo(int, int); 
```

和

```
int bar(int*); 
```

（假设 bar 在一个大小为 n 的数组中传递，其中 n = # of foo 参数，各自的值是等价的，并且函数在功能上是相同的）

前一种方法比后一种方法“更好”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T02:45:49.867

这取决于您所说的“更好”是什么意思：如果传递多个参数更符合程序的逻辑结构，那么传递多个参数的可读性肯定要好得多。一个很好的测试是否可能是这种情况是询问数组的各个元素是否会从单独命名中受益。如果答案是“是”，那么单个参数会更好。在传递参数时在这里和那里保存几个字节并不能弥补可读性的轻微损失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T02:37:25.123

是的，前一种方法`int foo(int, int);`可以在编译时检查参数。`int bar(int*)`需要对传入的数组进行假设。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T03:05:51.510

我能想到的一个缺点`int bar(int*)`是它会使超载变得更加困难。例如：

```
int areaOfRectangle(int width, int height);
int areaOfRectangle(int x1, int y1, int x2, int y2); 
```

很好，但是你将如何使用数组来做到这一点？

```
int areaOfRectangle(int* widthHeight);
int areaOfRectangle(int* coordinates); // error 
```

以上将无法编译，因为`int areaOfRectangle(int*)`不能声明/定义两次。

此外，如果您只是使用数组作为任意分组参数的一种方式，您的代码会更难阅读和使用。比较：

```
int calculateIncome(int normalHours, 
                    int overtimeHours, 
                    int normalRate
                    int overtimeRate); // Self documenting

int calculateIncome(int* parameters); // How do I use this function?

int calculateMean(int* numbers); // Parameters are logically grouped, 
                                 // so array makes sense 
```

第三个问题（桑乔在他的回答中描述）`int bar(int*)`是危险的。当用户调用你的函数一个比你期望的更小的数组时会发生什么？`int Foo(int, int)`另一方面，使用错误数量的参数调用将无法编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T03:14:23.807

这取决于“更好”是什么：

1.  为了获得更好的性能：

    1 如果数组只有几个元素（比如少于6个参数，取决于目标CPU，可用的寄存器可以用来传递参数），foo()方法更好，因为所有变量都可以通过寄存器传递；而 foo 可以直接从寄存器中取出值。而对于 bar，需要取消引用指针。

    2 如果数组有超过 10 个项目。最好使用指针进行传递，因为这样可以减少将参数压入堆栈顶部的堆栈操作。

2.  对于更少的错误：foo() 方法更好，因为对于 bar() 方法，可以通过 bar 中的语句修改项目，从 bar() 返回后可以看到，如果不维护可能会导致错误仔细操作 bar() 中的项目。

# matplotlib - 如何在matplotlib中将颜色条位置向右移动？

> ID：15330332
> 
> 赞同：7
> 
> 时间：2013-03-11T02:35:52.483
> 
> 标签：matplotlib, colorbar

我画了一个散点图如下： ![在此处输入图像描述](../Images/7b3f40cd20325d73280b0b7217ff7543.png)

代码是：

```
sc = plt.scatter(x, y, marker='o', s=size_r, c=clr, vmin=lb, vmax=ub, cmap=mycm, alpha=0.65)
cbar = plt.colorbar(sc, shrink=0.9) 
```

我想将颜色条向右移动一点以扩展绘图区域。怎么做 ？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-11T07:00:35.000

使用`pad`属性。

```
cbar = plt.colorbar(sc, shrink=0.9, pad = 0.05) 
```

[make_axes()](http://matplotlib.org/api/colorbar_api.html#matplotlib.colorbar.make_axes)的文档描述了如何使用`pad`：“pad：0.05 如果垂直，0.15 如果水平；颜色条和新图像轴之间的原始轴的分数”。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-01-06T01:34:24.017

实际上，您可以将颜色条放在您想要的任何位置。

```
fig1=figure()
sc = plt.scatter(x, y, marker='o', s=size_r, c=clr, vmin=lb, vmax=ub, cmap=mycm, alpha=0.65)
position=fig1.add_axes([0.93,0.1,0.02,0.35])  ## the parameters are the specified position you set 

fig1.colorbar(sc,cax=position) ## 
```

# web-services - 澳大利亚以编程方式访问天气信息

> ID：15330335
> 
> 赞同：0
> 
> 时间：2013-03-11T02:37:01.920
> 
> 标签：web-services, weather

我正在寻找澳大利亚的网络天气服务，以获取澳大利亚某个位置的天气数据。现在我们正在使用 MSN Webs 服务 (weather.service.msn.com)，但用户抱怨数据的准确性。我已经比较了 MSN 和 NineMSN 之间的澳大利亚天气数据，它并不完全匹配。

Ninemsn 或 Weatherzone 是否提供任何类似的网络服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-05-08T10:50:12.463

所有澳大利亚天气数据均来自澳大利亚气象局。bom.gov.au

# java - 如何为 BitSet 类型的元素创建 SortedSet（例如 TreeSet）

> ID：15330340
> 
> 赞同：5
> 
> 时间：2013-03-11T02:37:48.430
> 
> 标签：java, classcastexception, comparable, bitset

我有许多`(power(2,k))`BitSet 对象，我想将它们存储在`SortedSet`. 我使用代码：

```
Set <BitSet> S= new TreeSet<>(); 
```

但是，我收到此错误：`java.lang.ClassCastException: java.util.BitSet cannot be cast to java.lang.Comparable`

如何实现可比较的接口？或者有没有其他方法可以对这些类型的元素进行排序`BitSet`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T02:51:38.507

有两种使用`TreeSet`.

1.  让它包含实现的对象`Comparable`
2.  有一个自定义`Comparator`对象来比较您的`TreeSet`.

由于您想拥有您的contains并且`TreeSet`不实现，因此您需要给您一个 custom 。你如何实现它取决于你。`BitSet``BitSet``Comparable``TreeSet``Comparator``Comparator`

```
SortedSet<BitSet> s = new TreeSet<BitSet>(new CustomBitSetComparator());
s.add(bitSet1);
s.add(bitSet2);
//etc ... 
```

比较器可能看起来像这样

```
class CustomBitSetComparator implements Comparator<BitSet>{
    int compare(BitSet a, BitSet b) {
        if(a == b){
            return 0;
        } else if(a == null) {
            return -1;
        } else if(b == null) {
            return 1;
        } else if(a.equals(b)) {
            return 0;
        } else if(a.length() > b.length()) {
            return 1;
        } else if(b.lenght() > a.length()) {
            return -1;
        } else {
            for(int i = 0; i < a.length(); i++) {
               if(a.get(i) != b.get(i)) {
                   if(a.get(i)) {
                      return 1;
                   } else {
                      return -1;
                   }
                }
             }
             return 0;
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T04:56:13.153

我会将它们转换为 BigIntegers (O(N)) 并使用 TreeSet。否则，您将不得不为自己编写一个比较器，从本质上讲，它的运行速度会非常缓慢，正如您从其他答案中所看到的那样。我也会考虑使用 PriorityQueue 而不是 Set。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T02:52:32.947

我不确定为什么要将 BitSet 放在 treeSet 中，而解决方法是创建一个实现**Comparable**接口的**包装类。**

 **```
Public class CustomComparableBitSet implements Comparable{
   private BitSet bs;

   public int compareTo(T o){
      //your comparison logic goes here.
   }
} 
```

然后在客户端代码中，将**CustomComparableBitSet 的实例**添加到**treeset**中。**

# javascript - 如何使用javascript将下拉列表中的选定值显示到标签

> ID：15330341
> 
> 赞同：0
> 
> 时间：2013-03-11T02:37:56.300
> 
> 标签：javascript

我的表单中有 3 个下拉列表。我想将每个下拉列表中的选定值显示到我的标签。问题是只会显示一个保管箱列表，而其他两个不会。

这是我的代码：

```
<script>

window.onload = function()
{

document.getElementsByName('mydropdown')[0].onchange = function(e)
{
    document.getElementById('mylabel').innerHTML = this.value;
};
}
</script>

this is my html

<td><select name="mydropdown" id="mydrop" onchange="">
<option value="none" selected="selected"></option>
<option value="17.50">6M</option>
<option value="25.00">12M</option>
</select>
</td>
<td><label id="mylabel"></label></td>

<td><select name="mydropdown" id="mydrop">
<option value="none" selected="selected">Length </option>
<option value="0.0455">DS516HO</option>
<option value="0.0559">DS520HO</option>
<option value="0.0780">DS516HWR</option>
<option value="0.0200">DS312WH</option>
<option value="0.0624">DS520WH</option>
<option value="0.0361">DS525FH</option>
<option value="0.1170">DS620HW</option>
<option value="0.1340">DS550HW</option>
<option value="0.1340">TD525HW</option>
<option value="0.1820">DS650HW</option>
<option value="0.2340">TD665HWR</option>
</select>
<td><label id="mylabel"></label></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:41:04.597

**更新：**工作示例：http: [//jsfiddle.net/x8Rdd/1/](http://jsfiddle.net/x8Rdd/1/)

那是因为您只为“mydropdown”组中的第一个元素设置 onchange 事件。

```
<script>

window.onload = function()
{
var dd = document.getElementsByName('mydropdown');    
for (var i = 0; i < dd.length; i++) {
    dd[i].onchange = function(e)
    {
        document.getElementById('mylabel').innerHTML = this.value;
    };
}
}
</script> 
```

或类似的东西。如果您使用的是 jQuery，那么您可以在没有循环的情况下为所有这些设置 onchange 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T02:42:26.503

您只是将第零个元素（您选择的那个）与`[0]`. 您需要绑定到所有这些，可能像这样：

```
Array.prototype.forEach.call(document.getElementsByName('mydropdown'),
function (elem) {
    elem.addEventListener('change', function() {
        document.getElementById('mylabel').innerHTML = this.value;
    });
}); 
```

[http://jsfiddle.net/UNLnx/](http://jsfiddle.net/UNLnx/)

顺便说一句，您在多个无效的元素上重用相同的 ID。

# image-processing - 图像处理/处理

> ID：15330348
> 
> 赞同：1
> 
> 时间：2013-03-11T02:38:57.503
> 
> 标签：image-processing, png

谷歌有这 1 个完整的 png 图像。

![在此处输入图像描述](../Images/d94e6d974620e486d79338ea3e50b9ec.png)

他们能够将它一块一块地分开并做成这样：

![在此处输入图像描述](../Images/2b3c3697e8f27a832c7a81ad6bef0d4f.png)

但是当我尝试查看源图像时，我得到的是顶部的整个图像。

他们用什么来操作/剪切图像并将其放置在上面的顺序中？（嗯，它不必完全是他们使用的。）

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T02:42:25.713

谷歌“精灵”应该可以满足您的所有需求

# tcl - TCL 对文件进行数学排序

> ID：15330354
> 
> 赞同：0
> 
> 时间：2013-03-11T02:40:01.480
> 
> 标签：tcl

我有一个包含多行的文件，例如：-

```
A B A 10 20

A B A 10 20

C D A 10 15

A B Q 15 20

A B A 35 45

A B A 15 20

C D A 10 15

A B A 20 25

.

.

.

A A A x1 y1 
```

前三个字段是一些文本模式。

现在我想在 TCL 中编写一个程序，它执行以下两项操作：-

1.  对文件进行唯一的排序“sort -u”并删除重复的行并将 O/P 转储到新文件中。
2.  对于第一个三个字段相同的情况，仅转储数字彼此大于 10 的那些行。

例如，满足这两个条件的上述文件的 O/P 将是：-

```
A B A 10 20

A B A 35 45

C D A 10 15

A B Q 15 20 
```

行的顺序在文件中并不重要。

* * *

```
##Changed the program
set input [open "data.txt" "r"]

set content [read $input]

set lines [lsort -unique [split $content "\n"]]

set keylist ""

set valuelist ""

foreach line $lines {

    if {$line == ""} { continue }
    set data [split $line " "]
    set key [join [lrange $data 0 2] "_"]
    set index [lsearch $keylist $key]

    if {$index != -1} {
        set value [lindex $valuelist $index]

        set diff_a [expr [lindex $data 3] - [lindex $value 0]]
        set diff_b [expr [lindex $data 4] - [lindex $value 1]]

        if {$diff_a > 10 && $diff_b > 10 } {
            puts $line
        }

       set a [ lreplace valuelist $index $index [lrange $data 3 4]]

      set valuelist $a

    } else {
        lappend keylist $key
        lappend valuelist [lrange $data 3 4]
        puts $line
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:48:55.310

这不是一个聪明的解决方案，但有效。

```
set input [open "data.txt" "r"]
set content [read $input]
set lines [lsort -unique [split $content "\n"]]
set keylist ""
set valuelist ""

foreach line $lines {
    if {$line == ""} { continue }
    set data [split $line " "]
    set key [join [lrange $data 0 2] "_"]
    set index [lsearch $keylist $key]

    if {$index != -1} {
        set value [lindex $valuelist $index]

        set diff_a [expr [lindex $data 3] - [lindex $value 0]]
        set diff_b [expr [lindex $data 4] - [lindex $value 1]]

        if {$diff_a > 10 && $diff_b > 10 } {
            puts $line
        }

        set valuelist [lreplace valuelist $index $index [lrange $data 3 4]]
    } else {
        lappend keylist $key
        lappend valuelist [lrange $data 3 4]
        puts $line
    }
} 
```

输出：

```
A B A 10 20
A B A 35 45
A B Q 15 20
C D A 10 15 
```

# xcode - 将 iPhone 项目添加到现有的 Github 项目

> ID：15330355
> 
> 赞同：0
> 
> 时间：2013-03-11T02:40:07.343
> 
> 标签：xcode, git

我正在为 API 项目编写一些文档代码。

其他人已经有一个现有的 github 帐户，其中一些人已经提交了一些项目。我会称之为 { [http://github.com/monkeyhouse/](http://github.com/monkeyhouse/) }

我在 Xcode（iPhone 应用程序）中创建了一个项目，并将其存储在我的普通 Xcode git 下，它已备份一切都很好。

[我需要将 Xcode Project 放入 { http://github.com/monkeyhouse/examples/iPhoneClient](http://github.com/monkeyhouse/examples/iPhoneClient) }中的正确 git foo 是什么

我尝试在我的机器上创建一个指向项目的符号链接，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:58:21.467

以下是在 Github 上做你想做的事情的常用方法：

1.  Fork [http://github.com/monkeyhouse/](http://github.com/monkeyhouse/)到你自己的 Github 账号下。
2.  将你的分叉版本的 repo 克隆到你的开发机器上。
3.  直接对克隆的存储库进行您想要的修改（例如，不要使用符号链接），将示例/iPhoneClient 添加到本地存储库，然后提交更改。
4.  将您的更改推送到[http://github.com/monkeyhouse/](http://github.com/monkeyhouse/)的公共 Github 分支。
5.  [使用http://github.com/monkeyhouse/](http://github.com/monkeyhouse/)提交拉取请求，让他们将您推送到分叉版本的更改引入他们，如果他们对他们满意的话。

# java - 运行简单代码时获取java.lang.NoSuchMethodError

> ID：15330356
> 
> 赞同：-1
> 
> 时间：2013-03-11T02:40:12.227
> 
> 标签：java

我有以下 JAVA 代码。它编译得很好，但是当我运行它时，我得到了以下错误：

线程“main”中的异常 java.lang.NoSuchMethodError: Edge.(LVertex;D)V at Test.main(Test.java:27)

有什么线索吗？提前致谢！

```
import java.util.ArrayList;

class Vertex{
    public int key;
    public ArrayList<Edge> edges;
    public double minDistance = Double.POSITIVE_INFINITY;

    public Vertex(int key) {
        this.key = key;
        edges = new ArrayList<Edge>();
    }
}

class Edge{
    public Vertex target;
    public double weight;

    public Edge(Vertex t, double w) {
        target = t;
        weight = w;
    }
}

public class Test {
    public static void main(String[] args) {
        Edge e = new Edge(new Vertex(1), 1.0);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:01:00.420

如果您已删除所有 .class 文件并*正确*重新编译它们，则不可能获得该异常。

异常告诉您一个类（在本例中为 Dijkstra）正在尝试使用其正在加载`Edge(Vertex[], double)`的版本中不存在的方法（在本例中为带有签名的构造函数） 。`Edge`

但是你的源代码说构造函数确实存在。我能看到它。

矛盾！

我能想到的唯一可能的解释是有多个`Edge.class`浮动副本，并且您的启动器的类路径告诉 JVM 使用错误的副本；即您没有重新编译的旧版本！

* * *

> 有点奇怪。我在 linux 机器上编译并运行完全相同的文件而没有运行错误。

这很容易解释。您的 Linux 机器上没有该文件的旧/陈旧副本。

# mongodb - 将推文存储到 Mongodb

> ID：15330357
> 
> 赞同：-2
> 
> 时间：2013-03-11T02:40:27.563
> 
> 标签：mongodb, scala, playframework, twitter

需要在 Twitter 上跟踪某些 URL。

1）是否可以在 Twitter Track 参数中指定部分 URL 模式？例如，如果我想搜索包含[http://abc.co/](http://abc.co/)的所有 URL，其中将包括[http://abc.co/122](http://abc.co/122)、[http://abc.co/456](http://abc.co/456)等。这可以使用 Twitter Stream API ?

2）将所有推文存储到MongoDB的有效方法是什么？推文将用于分析目的。

我正在使用 Scala 2.10 和 MongoDB

更新：好吧，在深入理解一些Iteratee概念之后，我整理了一个快速测试如下

```
WS.url("https://stream.twitter.com/1.1/statuses/filter.json?track=" + term)
  .sign(OAuthCalculator(Twitter.KEY, tokens))
  .get(_ => printingIteratee)

 def printingIteratee = Iteratee.foreach[Array[Byte]] { chunk =>
   val json = Json.parse(new String(chunk))
   val user = (json \ "user" \ "screen_name").as[String]
   val content = (json \ "text").as[String]

   println("user " + user)
   println("content " + content)

 } 
```

上面的 Iteratee 是针对副作用的测试，不返回任何东西。

我正在尝试提出一个 Iteratee，它采用 Array[Byte] 并创建一个对象以存储在 MongoDB 中。快速浏览了 Iteratee.fold 和一些方法，但仍然不太确定如何创建一个 Iteratee，它采用 Array[Byte] 并生成一个可以存储到 MongoDB 的对象（比如案例类 Tweet）。将不胜感激创建此类 Iteratee 的任何指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:15:53.850

[该文档](https://dev.twitter.com/docs/streaming-apis/parameters#track)指出：

> 出于匹配的目的，URL 被视为单词，这意味着必须将整个域和路径包含在跟踪查询中，以便包含要匹配的 URL 的推文。

它还包含一个表格，他们说：

`example.com`会匹配`Someday I will visit example.com`但不会匹配`There is no example.com/foobarbaz`

据我所知，不可能用它的所有子域来跟踪一个域。

# ios - Dunkin Donuts 应用程序使用哪种视图控制器

> ID：15330361
> 
> 赞同：0
> 
> 时间：2013-03-11T02:41:05.943
> 
> 标签：ios, uiviewcontroller

我有一个关于[Dunkin Donuts 应用程序](https://itunes.apple.com/us/app/dunkin-donuts/id552020897?mt=8)与[Starbucks](https://itunes.apple.com/us/app/starbuc%20...%2077714?mt=8)应用程序的问题：

在 DD->MyCards || 菜单 || 礼物

1.  表单：这是一个可滚动的 UIViewController，里面有 2 个 UIContainer 视图控制器吗？

2.  功能：买卡只是一个网络服务器交易，但从外观上看，它必须使用存折，因为我不知道它会如何呈现购买的卡？因此，这一定意味着购买会向您发送存折通行证。

哦，好吧，我刚看到星巴克，注意到您可以使用存折或应用程序（通过翻转卡）出示条形码以扫描/更新应用程序...

# python - Python(2.7)字典Jinja混淆

> ID：15330374
> 
> 赞同：-1
> 
> 时间：2013-03-11T02:43:09.157
> 
> 标签：python, python-2.7, jinja2

以下是我认为可行的方法：我有一个按游戏索引并包含 gameSlots 的字典 确认：{{gameSlot.game.name}} 有效（其他 gameSlot.game.x 属性也可以） 确认：assignGameSlotsInMyGames 是持有 {game: [gameSlot1, gameSlot1]} 但是： {% for gameSlot2 in assignedGameSlotsInMyGames[gameSlot.game] %} 没有迭代

我在做一些明显错误的事情吗？（如果需要，我可以发布更完整的代码 - 我已经用一个非常丑陋的解决方法替换了代码，但很乐意将其带回以显示测试结果等）。

添加了更多详细信息....
数据为：assignedGameSlotsInMyGames 包含一个游戏（名为“Later”），该游戏具有两个分配的游戏槽。

解决方法打印这些游戏插槽的内容：

```
{% for game, gameSlots in assignedGameSlotsInMyGames.iteritems() %}
  {% if gameSlot.game.name == game.name %}
    {% for gameSlot2 in gameSlots %}
      <tr>
        <td> {{gameSlot2.user.email}} </td>
        <td> {{gameSlot2.gameCharacter.characterType}} </td>
      </tr>
    {% endfor %}
  {% endif %}
{% endfor %} 
```

附加说明：存在的原因：

```
if gameSlot.game.name == game.name 
```

是我正在遍历属于特定用户的所有游戏插槽。当我显示该 gameSlot 时，我想包含有关该 gameSlot 引用的游戏的其他信息。由于我尝试（如下）直接引用该游戏没有奏效，我遍历所有游戏并在“外循环”中使用与当前游戏匹配的游戏（蹩脚，是的 - 这就是我发布问题的原因）。注意：对于我正在测试的示例，只有一款名为“Later”的游戏。

有一个外部循环正在遍历所有 gameSlot.games - 唯一的迭代是当 gameSlot.game.name == "Later" 时。而不是所有这些额外的循环，我想我可以使用：

```
{% for gameSlot2 in assignedGameSlotsInMyGames[gameSlot.game] %}
  <tr><td>Iteration</td></tr>
{% endfor %} 
```

我在想，由于assignedGameSlotsInMyGames 是一个由游戏对象索引的字典，其值为gameSlots，这应该可以工作。但是没有打印迭代。

调试代码：

```
<tr><td colspan="6">TestCode - gameSlot.game = {{gameSlot.game}}, assignedGameSlotsInMyGames[gameSlot.game] = {{assignedGameSlotsInMyGames[gameSlot.game]}} </td></tr>
<tr><td colspan="6">TestCode - gameSlot.game.name = {{gameSlot.game.name}}, assignedGameSlotsInMyGames = {{assignedGameSlotsInMyGames}}</td></tr>
<tr><td colspan="6">Test from Ellochka - assignedGameSlotsInMyGames.game = {{assignedGameSlotsInMyGames.game}}</td></tr> 
```

有输出：

```
TestCode - gameSlot.game = , assignedGameSlotsInMyGames[gameSlot.game] =
TestCode - gameSlot.game.name = Later, assignedGameSlotsInMyGames = {: [, ]}
Test from Ellochka - assignedGameSlotsInMyGames.game = 
```

这是我第一次使用 Jinja2 模板（和 Python），所以我可能会很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:42:36.910

```
from jinja2 import Template

ts = """
{% for game, gameSlots in assignedGameSlotsInMyGames.iteritems() %}
{% for gameSlot2 in gameSlots %}
<tr>
<td> {{gameSlot2.user.email}} </td>
<td> {{gameSlot2.gameCharacter.characterType}} </td>
</tr>
{% endfor %}
{% endfor %}
"""

t = Template(ts)

d = {'assignedGameSlotsInMyGames':
     {'game1': [{'user': {'email': 'a@a.ru'},
                 'gameCharacter':{'characterType':'testCharacterType1'}},
                {'user': {'email': 'b@b.ru'},
                 'gameCharacter':{'characterType':'testCharacterType2'}}],
      'game2': [{'user': {'email': 'a2@a.ru'},
                 'gameCharacter':{'characterType':'testCharacterType12'}},
                {'user': {'email': 'b2@b.ru'},
                 'gameCharacter':{'characterType':'testCharacterType22'}}]
     }
}

print t.render(d) 
```

输出是：

```
<tr>
<td> a2@a.ru </td>
<td> testCharacterType12 </td>
</tr>

<tr>
<td> b2@b.ru </td>
<td> testCharacterType22 </td>
</tr>

<tr>
<td> a@a.ru </td>
<td> testCharacterType1 </td>
</tr>

<tr>
<td> b@b.ru </td>
<td> testCharacterType2 </td>
</tr> 
```

在您的模板中，我不明白是什么`{% if gameSlot.game.name == game.name %}`。您单独传递关键的 gameSlot 还是只是一个错字而您打算编写 gameSlots？

对于一个非常明确的答案，您可以写下您传递给渲染函数（或等）的字典（示例）的结构，如果仍然不清楚，我会告诉错误在哪里。

**更新**

```
ts = """
{% for g in games %}
    {% for v in ags[g.game]%}
        {{ v }}
    {% endfor %}
{% endfor %}
"""

d = {
      'games':[{'game':'A'},
           {'game':'B'},
           {'game':'C'}],
      'ags':{'A':['ONE','TWO','THREE'],'B':['1','2','3']}
}

t = Template(ts)
print t.render(d) 
```

输出：

```
ONE

TWO

THREE

1

2

3 
```

我唯一可以建议您传递数据以使其功能不正确且不恰当地处理它们。请参阅[文档](http://jinja.pocoo.org/docs/templates/#variables)。

# ruby-on-rails - 选项卡式菜单破坏了我的地理编码器搜索功能

> ID：15330377
> 
> 赞同：0
> 
> 时间：2013-03-11T02:43:21.693
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, tabs, rails-geocoder

我对 Ruby on Rails 相当陌生，将目录类型的网站作为个人项目来学习。

在我的应用程序中，我实现了地理编码器搜索，因此用户可以搜索他们附近的地点/位置，搜索效果很好。但是当我添加选项卡式菜单来分类可用的地方类型时，它破坏了搜索。

我想我知道它为什么坏了，但不知道如何修复它。选项卡显示@schools、@restaurants 和@businesses 变量，我怎样才能让选项卡显示搜索结果而不是那些变量？这些变量应该只在没有执行搜索时显示，但它们也会在搜索执行时显示。

这是我的代码：

**地方控制器：**

```
 class PlacesController < ApplicationController
    before_filter :authenticate_user!, except: [:index]

    def index
    if params[:search].present?
     @places = Place.near(params[:search], 50, :order => :distance)
    else
     @places = Place.all
    end

    @schools = Place.where("category = ?", "School")
    @restaurants = Place.where("category = ?", "Restaurant")
    @businesses = Place.where("category = ?", "Business")

    end 
```

**地方索引.html.erb：**

```
 <% if user_signed_in? %>

 <div class="row">
    <h2>Newly Added Places</h2>

        <%= form_tag places_path, :method => :get do %>
                <%= text_field_tag :search, params[:search], placeholder: "Enter your zipcode or city", class: "search-query"  %>
                <%= submit_tag "Search Nearby", :name => nil, class: "btn"%>
        <% end %>

            <ul class="nav nav-tabs">
                    <li><a href="#tab1" data-toggle="tab">Schools</a></li>
                    <li><a href="#tab2" data-toggle="tab">Restaurants</a></li>      
                    <li><a href="#tab3" data-toggle="tab">Businesses</a></li>
                </ul>

            <div class="tab-content">
                <div class="tab-pane active" id="tab1">
                    <%= render :partial => "places", :locals => {:places_container => @schools} %>
                </div>
                <div class="tab-pane" id="tab2">
                    <%= render :partial => "places", :locals => {:places_container => @restaurants} %>
                </div>
                <div class="tab-pane" id="tab3">
                    <%= render :partial => "places", :locals => {:places_container => @businesses} %>
                </div>
            </div>
</div>

<br />

<% else %>

<%= render 'static_pages/home' %>

<% end %> 
```

**地方部分（_places.html.erb）：**

```
 <table class="table table-hover table-condensed">
<thead>
        <tr>            
         <th>Image</th>
       <th>Name</th>
       <th>Address</th>
         <th>State</th>
         <th>City</th>
         <th>Type</th>
       <th>Website</th>
     </tr>
</thead>
<% places_container.each do |place| %>
    <tr>
        <th><%= image_tag place.image(:medium)%></th>
        <th><%= link_to place.name, place %></th>
      <td><%= place.address %></td>
      <td><%= place.state %></td>
      <td><%= place.city %></td>
        <td><%= place.category %></td>
      <td><%= place.website %></td>

        <% if current_user.admin? %>
          <td><%= link_to 'Edit', edit_place_path(place) %></td>
          <td><%= link_to 'Destroy', place, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
        </tr>
<% end %>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:49:43.433

您的选项卡式结果忽略了搜索参数，因为您没有使用`@places`从搜索参数构建的关系。要修复，请更改此代码：

```
def index
  if params[:search].present?
   @places = Place.near(params[:search], 50, :order => :distance)
  else
   @places = Place.all
  end

  @schools = Place.where("category = ?", "School")
  @restaurants = Place.where("category = ?", "Restaurant")
  @businesses = Place.where("category = ?", "Business")
end 
```

到：

```
def index
  if params[:search].present?
   @places = Place.near(params[:search], 50, :order => :distance)
  else
   @places = Place.scoped  # use 'scoped', not 'all', to avoid triggering the query immediately
  end

  @schools = @places.where("category = ?", "School")
  @restaurants = @places.where("category = ?", "Restaurant")
  @businesses = @places.where("category = ?", "Business")
end 
```

# c# - 使用向上箭头时，对象引用未设置为对象的实例

> ID：15330378
> 
> 赞同：0
> 
> 时间：2013-03-11T02:43:22.913
> 
> 标签：c#, visual-studio-2010

在 Microsoft Visual Studio 中，每当我在代码视图中按向上箭头时，我都会收到一条错误消息“对象引用未设置为对象的实例”，有没有办法关闭该错误或找出它显示该消息的原因？

**编辑：**

我终于找到了一个与我的问题相关的页面，但是它并没有解决我的问题。

错误在 IDE 中。这个人遇到的问题相同（[http://thejoyofcode.com/visual_studio_.net_datasources_bug.aspx](http://thejoyofcode.com/visual_studio_.net_datasources_bug.aspx)），但是我不想将任何东西绑定到我的数据网格，我正在通过加载数据网格一个列表<>

无论如何要在VS2010中关闭此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T03:00:29.847

*   禁用所有加载项

*   开发环境/resetSettings

*   修复 Visual Studio

*   卸载并重新安装 Visual Studio（也可以通过 MSICUU2 工具将其删除）

*   未能重建操作系统

# graph - 在图上随机游走中访问节点的概率

> ID：15330380
> 
> 赞同：6
> 
> 时间：2013-03-11T02:43:28.407
> 
> 标签：graph, graph-theory, random-walk

我有一个有限的无向图，其中一个节点被标记为“开始”，另一个被标记为“目标”。

一个代理最初被放置在起始节点，它随机地在图形中导航，即在每一步它随机均匀地选择一个邻居节点并移动到它。当它到达目标节点时，它会停止。

我正在寻找一种算法，该算法为每个节点提供有关代理访问它的概率的指示，同时从起点到目标。谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T13:00:05.437

与图表的情况一样，只需了解描述问题的适当方式即可。

编写图的一种方法是作为[邻接矩阵](http://en.wikipedia.org/wiki/Adjacency_matrix)。如果你的图 G = (V, E) 有 |V| 节点（其中 |V| 是顶点的数量），这个矩阵将是 |V| x |V|。如果一对顶点之间存在边，则将邻接矩阵中的项设置为 1，如果不存在则设置为 0。

对此的自然扩展是[加权图](http://en.wikipedia.org/wiki/Weighted_graph#Weighted_graphs_and_networks)。在这里，邻接矩阵不是 0 或 1，而是有一些权重的概念。

在您描述的情况下，您有一个加权图，其中权重是从一个节点转换到另一个节点的概率。这种类型的矩阵有一个特殊的名称，它是一个[随机矩阵](http://en.wikipedia.org/wiki/Stochastic_matrix)。根据您排列矩阵的方式，该矩阵将分别具有总和为 1 的行或列，右侧和左侧随机矩阵。

随机矩阵和图之间的链接之一是[马尔可夫链](http://en.wikipedia.org/wiki/Markov_chain)。在马尔可夫链文献中，您需要的关键是一个转换矩阵（权重等于一个时间步后转换概率的邻接矩阵）。让我们称转换矩阵**P**。

计算出在 k 个时间步之后从一种状态转换到另一种状态的概率由**P** ^k 给出。**如果你有一个已知的源状态 i，那么P** ^k的第 i 行会给你转换到任何其他状态的概率。这可以让您估计*短期内处于给定状态的概率*

根据您的源[图](http://en.wikipedia.org/wiki/Markov_chain#Time-homogeneous_Markov_chain_with_a_finite_state_space)，**P** ^k 可能达到稳态分布 - 也就是说，对于某个 k 值，**P** ^k = **P** ^(k+1)。*这使您可以估计长期*处于给定状态的概率

 *顺便说一句，在你做任何这些之前，你应该能够查看你的图表，并说出在某个时间处于给定状态的概率是多少。

1.  如果您的图表具有不相交的组件，则位于您未开始的组件中的概率为零。
2.  如果您的图表有一些正在[吸收](http://en.wikipedia.org/wiki/Absorbing_Markov_chain)的状态，也就是说，一旦您输入了某些状态（或状态组），它们就不可避免，那么您需要考虑这一点。*如果您的图形是树状的，则可能会发生这种情况。**

# jquery - jQuery小数位

> ID：15330383
> 
> 赞同：0
> 
> 时间：2013-03-11T02:43:42.817
> 
> 标签：jquery

谁能告诉我为什么我`toFixed(2)`的不工作？

```
$(document).ready(function () {
    $('.originalData').change(function () {
        $('.changedData').val($(this).val());
        $('.percentage').text('0%');

    });
    $('.changedData').change(function () {
        var changedData = $(this).val().length;
        var originalData = $('.originalData').val().length;

        var percentageOfChange = changedData / originalData * 100 - 100
        $('.percentage').text(percentageOfChange+.toFixed(2)'%');
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:45:39.880

和`'%'`不合适`+`。

`$('.percentage').text(percentageOfChange.toFixed(2) + '%');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T02:46:35.023

那是因为你`+`之前有过签`toFixed(2)`。只需将其删除即可。

# php - 用户在登录之前无法访问我们的网页内容

> ID：15330384
> 
> 赞同：0
> 
> 时间：2013-03-11T02:44:15.760
> 
> 标签：php, sql-server

直到现在我在我的网站上工作。本网站的用户必须先登录才能访问内容。但是我在 PHP 中创建用户会话时遇到问题。我使用 sql server 作为我的数据库。让我们检查一下。

登录页面代码

```
<form name="login" action="cek_login.php" method="POST" onSubmit="return validasi()">
<div class=log>My Id</div><div class=log><input type="text" name="username"></div>
<div class=log>Password</div><div class=log><input type="password"  name="sandi"></div>
<div class=log><input id="tombol" type="submit" value="Login" ></div>
</form> 
```

我的 cek_login.php 代码

```
<?php
session_start();
include "config/koneksi.php";

$login=mssql_query("SELECT * FROM tblMstUser
                    WHERE LoginID='$_POST[username]' 
                    AND PasswordPHP='$_POST[sandi]'"); 

$ketemu=mssql_num_rows($login);
$r=mssql_fetch_array($login);

// Apabila username dan password ditemukan
if ($ketemu > 0){   
    session_register("LoginID");
    session_register("PasswordPHP");

  $_SESSION[LoginID]  = $r[LoginID];
  $_SESSION[PasswordPHP] = $r[PasswordPHP];

 header('location:home.php');
}
else{
  echo "<link href=../config/adminstyle.css rel=stylesheet type=text/css>";
  echo "<center><strong>LOGIN GAGAL!</strong> <br> 
        Username atau Password Anda tidak benar.<br>
        Atau account Anda Tidak Punya Hak Akses Untuk Halaman ini.<br>";
  echo "<a href=index.php><b>ULANGI LAGI</b></a></center>";
}
?> 
```

我的主页代码

```
<?php
include('config/koneksi.php');//connect to database
include('cek-login.php');//session user to make autorithy that user cann't acces this before loged-in
?>
<div id="menu" style="height:190px;width:115px;float:left;">
<b>Menu</b><br>
<br>&nbsp;</br>
<li><a href="BudgetAprovalByTop_List/view.php">Budget Aproval<br></li>
<li><a href="PPBAprovalByTop_List/view.php">PPB Aproval</a><br></li>
<li><a href="logout.php">LOG OUT</a></li>
</div> 
```

cek-login.php 的代码

```
session_start();

//if session doesn't make, or session username is empty
if (!isset($_SESSION['username']) || empty($_SESSION['username'])) {
    //redirect to login page
    header('location:index.php');
}
?> 
```

用户登录并成功后，用户无法访问主页。C'z 在我上面的会话代码（cek-login.php）中读取空的用户名或不这样做重定向到再次登录页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:37:20.040

session_register() = 自 PHP 5.3.0 起，该函数已被弃用，自 PHP 5.4.0 起已移除。

尝试以下...

```
$_SESSION['LoginID']  = $r['LoginID'];
$_SESSION['PasswordPHP'] = $r['PasswordPHP']; 
```

# c++ - Android NDK - 共享库的链接器错误。

> ID：15330385
> 
> 赞同：0
> 
> 时间：2013-03-11T02:44:19.750
> 
> 标签：c++, android-ndk, shared-libraries

我试图弄清楚为什么我不断得到未定义的对在 android 附带的共享库中声明的函数的引用。

我的 application.mk 和 root android.mk

```
APP_MODULES    :=   adhoc
APP_STL := gnustl_shared
NDK_TOOLCHAIN_VERSION=clang3.1
APP_OPTIM    := debug

CUR_PATH := $(call my-dir)
LOCAL_CPPFLAGS += -std-c++11 -Wwrite-strings

include   $(CUR_PATH)/native/adhoc/Android.mk 
```

即席 Android.mk

```
LOCAL_PATH := $(call my-dir)
updater_src_files := \
  install.cpp\
    sha1.cpp\
  addhoc_lib.cpp 

include $(CLEAR_VARS)

LOCAL_SRC_FILES := $(updater_src_files)

inc_path = $(NDK_ROOT)/../AndroidSource/system/core/include \
$(NDK_ROOT)/../AndroidSource/hardware/libhardware_legacy/include

LOCAL_C_INCLUDES += $(inc_path)

LOCAL_CFLAGS := -DINTERNAL_SHA1 -DCONFIG_CRYPTO_INTERNAL -DCONFIG_NO_T_PRF -DCONFIG_NO_TLS_PRF -std=c++11 -Wc++11-extensions -Wno-deprecated-writable-strings

LOCAL_STATIC_LIBRARIES := libedify

LOCAL_SHARED_LIBRARIES := libcutils\
              libhardware_legacy\
              libc\
              libnetutils\
              libsysutils

LOCAL_MODULE := adhoc

include $(BUILD_SHARED_LIBRARY)

$(call import-add-path, $(LOCAL_PATH))
$(call import-module, edify) 
```

和 adhoc/edify/android.mk

```
LOCAL_PATH := $(call my-dir)

edify_src_files := \
    lexer.l \
    parser.y \
    expr.c

include $(CLEAR_VARS)

LOCAL_SRC_FILES := $(edify_src_files)

LOCAL_CFLAGS := $(edify_cflags)
LOCAL_MODULE := edify

include $(BUILD_STATIC_LIBRARY) 
```

我从 ndk-build -BV=1 得到输出，例如：

```
SharedLibrary  : libadhoc.so
/home/corey/Android_Dev/android-ndk-r8d/toolchains/llvm-3.1/prebuilt/linux-x86/bin/clang++ -Wl,-soname,libadhoc.so -shared --sysroot=/home/corey/Android_Dev/android-ndk-r8d/platforms/android-14/arch-arm ./obj/local/armeabi/objs-debug/adhoc/install.o ./obj/local/armeabi/objs-debug/adhoc/sha1.o ./obj/local/armeabi/objs-debug/adhoc/addhoc_lib.o ./obj/local/armeabi/libedify.a ./obj/local/armeabi/libgnustl_shared.so -gcc-toolchain /home/corey/Android_Dev/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86 -no-canonical-prefixes -target armv5te-none-linux-androideabi  -Wl,--no-undefined -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,now /home/corey/Android_Dev/android-ndk-r8d/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi/libsupc++.a -lc -lm -o ./obj/local/armeabi/libadhoc.so

/home/corey/Android_Dev/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/objs-debug/adhoc/install.o: in function GetPropFn(char const*, State*, int, Expr**):jni/native/adhoc/install.cpp:463: error: undefined reference to 'property_get' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:51:33.993

如果您使用的是 C++ 代码，请添加 C PLUS PLUS 标志。

```
#ifdef __cplusplus 
extern "C" {
#endif

#ifdef __cplusplus
}
#endif 
```

也看看下面的帖子。 [android ndk未定义对方法的引用](https://stackoverflow.com/questions/13080345/android-ndk-undefined-reference-to-a-method)

# .net - IL Generator 创建时无 DLL 访问

> ID：15330389
> 
> 赞同：0
> 
> 时间：2013-03-11T02:45:02.453
> 
> 标签：.net, dll, reflection.emit, ilgenerator

我创建了一个虚拟 DLL。我期待我可以`S1`在命名空间中访问。我可以看到我的函数，并且当它是 exe 形式时，我可以看到带有 il dasm 的结构。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Reflection.Emit;
using System.Reflection;
using System.Threading;
using System.Diagnostics.SymbolStore;
using System.IO;

namespace emitTest
{
    class Program
    {
        static void Main(string[] args)
        {
            AssemblyName assemblyName = new AssemblyName();
            assemblyName.Name = "HelloWorld";
            AssemblyBuilder assemblyBuilder = Thread.GetDomain().DefineDynamicAssembly(assemblyName, AssemblyBuilderAccess.RunAndSave);
            ModuleBuilder module;
            module = assemblyBuilder.DefineDynamicModule("HelloWorld.exe", true);
            TypeBuilder typeBuilder = module.DefineType("MyNamespace.HelloWorldType", TypeAttributes.Public | TypeAttributes.Class);
            MethodBuilder methodbuilder = typeBuilder.DefineMethod("Main", MethodAttributes.HideBySig | MethodAttributes.Static | MethodAttributes.Public, typeof(void), new Type[] { typeof(string[]) });
            var s1 = module.DefineType("Space.S1", TypeAttributes.Public | TypeAttributes.Sealed |  TypeAttributes.AnsiClass | TypeAttributes.SequentialLayout | TypeAttributes.BeforeFieldInit, typeof(System.ValueType));
            s1.DefineField("a", typeof(int), FieldAttributes.Public);
            s1.CreateType();
            ILGenerator ilGenerator = methodbuilder.GetILGenerator();
            ilGenerator.Emit(OpCodes.Ret);
            Type helloWorldType = typeBuilder.CreateType();
            if (false)
            {
                // set the entry point for the application and save it
                assemblyBuilder.SetEntryPoint(methodbuilder, PEFileKinds.ConsoleApplication);
                assemblyBuilder.Save("HelloWorld.exe");
            }
            else
            {
                assemblyBuilder.SetEntryPoint(methodbuilder, PEFileKinds.Dll);
                assemblyBuilder.Save("HelloWorld.dll");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:08:12.680

我不确定我理解你到底在问什么，但我认为问题在于你总是将模块定义为`HelloWorld.exe`. 您需要做的是确保模块名称与文件名匹配。

因此，如果要将程序集另存为`HelloWorld.dll`，则还需要将模块名称设置为`HelloWorld.dll`。

# javascript - 带有 nvd3.js 的实时线图

> ID：15330390
> 
> 赞同：36
> 
> 时间：2013-03-11T02:45:02.783
> 
> 标签：javascript, d3.js, real-time, transition, nvd3.js

我正在尝试使用 nvd3.js 创建一个实时图表，该图表将定期更新，并且给人的印象是数据是实时处理的。

现在我已经能够创建一个可以定期更新图表的函数，但我无法在“状态”之间进行平滑转换，比如向左转换的线。

[这](http://jsfiddle.net/chrisJamesC/BjRLy/4/)是我使用 nvd3.js 所做的，这里有趣的代码是：

```
d3.select('#chart svg')
    .datum(data)
    .transition().duration(duration)
    .call(chart); 
```

现在，我已经能够使用 d3.js 生成我想要的东西，但我希望能够使用 nvd3.js 提供的所有工具。[这](http://jsfiddle.net/chrisJamesC/buRcx/1/)是我想使用 nvd3 制作的内容

使用 d3.js 进行转换的有趣代码是：

```
function tick() {

    // update the domains
    now = new Date();
    x.domain([now - (n - 2) * duration, now - duration]);
    y.domain([0, d3.max(data)]);

    // push the accumulated count onto the back, and reset the count
    data.push(Math.random()*10);
    count = 0;

    // redraw the line
    svg.select(".line")
        .attr("d", line)
        .attr("transform", null);

    // slide the x-axis left
    axis.transition()
        .duration(duration)
        .ease("linear")
        .call(x.axis);

    // slide the line left
    path.transition()
        .duration(duration)
        .ease("linear")
        .attr("transform", "translate(" + x(now - (n - 1) * duration) + ")")
        .each("end", tick);

    // pop the old data point off the front
    data.shift();

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-16T23:18:44.320

你可能想看看： [D3 Real-Time streamgraph (Graph Data Visualization)](https://stackoverflow.com/questions/9664642/d3-real-time-streamgraph-graph-data-visualization)，

特别是答案的链接：http: [//bost.ocks.org/mike/path/](http://bost.ocks.org/mike/path/)

一般来说，我看到了两种处理垂直过渡问题的方法：

*   过采样在真实点之间有一些线性插值，点之间的间隔越小，垂直过渡看起来就越“水平”（但缺点是你会得到很多“假”点，这可能是不可接受的，具体取决于图表的使用）
*   通过在末尾添加来扩展图表，并翻译左侧的图表，确保在您删除它（剪辑或执行任何其他技巧）之前不显示仍然可用的左侧部分，这是最好的，上面提到的解决方案确实那

# regex - 如何使用 flex 插入变量值？

> ID：15330391
> 
> 赞同：1
> 
> 时间：2013-03-11T02:45:03.590
> 
> 标签：regex, lex, flex-lexer

原始样本数据如下所示：

```
neg      
test  
-1.0 1.0    
-2.1 3.45 
```

我必须使用 flex 将其转换为可识别的 ocaml 输入列表，如下所示：

```
let test  
=[  
[ -1.0 ; 1.0 ; 1.0; -1.0 ];  
[ -2.1 ; 3.45 ; 1.0; -1.0 ]  
];; 
```

我可以将其转换如下：

```
let test  
=[  
[ -1.0 ; 1.0 ; 1.0 ; ]; 
[ -2.1 ; 3.45 ; 1.0 ; ]
];; 
```

我的主要问题是：

> 1.  如果原始数据显示为 neg，如何将每个列表中的最后一个元素设为 -1，如果原始数据显示为 pos，则设为 1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:37:15.707

你用`<<EOF>>`正则表达式做对了。您唯一错过的是您需要以某种方式直接或间接终止`<<EOF>>`代码块内的扫描仪。

在我的情况下，我使用的是 jflex，我的问题非常简单，我在默认的 %standalone 模式下使用它。所以我`<<EOF>>`的如下：

```
<<EOF>>    {
               printJson(System.out);
               System.out.flush();
               System.exit(0);
           } 
```

在`printJson()`序列化全局数据结构的地方，扫描仪已经建立到指定的文件流。在您的情况下，听起来事情很简单，您可能更简单：

```
<<EOF>>    {
               printf(" ]\n];;");
               flush(stdout);
               exit(0);
           } 
```

如果您不是独立的，则需要返回一个 EOF 令牌，该令牌由调用您生成的扫描仪的任何进程进行适当处理。

祝你好运。

# asp.net-mvc - 在 C# MVC 中发送电子邮件..在本地主机上..不起作用？

> ID：15330392
> 
> 赞同：1
> 
> 时间：2013-03-11T02:45:13.547
> 
> 标签：asp.net-mvc, smtp, sendmail, smtpclient, system.net.mail

我正在尝试使用 C# mvc 发送一封基本电子邮件...由于某种原因它不起作用..我尝试了许多不同的解决方案，但在浏览器中不断收到相同的错误，显示“操作已超时”..我认为是连接问题。错误开始于“client.Send(mail); 我在我的本地机器上执行此操作。我尝试使用端口 587,465,995,25，但没有运气。在 Visual Studio 的编译器中，当我构建它时，我没有收到任何错误。我只需在网络浏览器中在线获取错误“client.Send(mail);”

控制器：

```
 public void SendEmail(History hi)
  {
    SmtpClient client = new SmtpClient();   //server type
    client.Port = 587;                      
    client.Host = "smtp.gmail.com";         //google
    client.EnableSsl = true;                //SSl set to true
    client.Timeout = 10000;
    client.DeliveryMethod = SmtpDeliveryMethod.Network;
    client.UseDefaultCredentials = false;
    client.Credentials = new System.Net.NetworkCredential("papasmurf985@gmail.com", "******"); 

    MailMessage mail = new MailMessage("papasmurf985@gmail.com", "papasmurf985@gmail.com", "Test Score", "Your score is" + hi.score);
    mail.BodyEncoding = System.Text.Encoding.UTF8;
    mail.DeliveryNotificationOptions = DeliveryNotificationOptions.OnFailure;

    client.Send(mail);                      
  } 
```

网络配置：

```
<system.net>
  <mailSettings>
    <smtp deliveryMethod="Network">
      <network host="smtp.gmail.com" port="587" />
    </smtp>
  </mailSettings>
</system.net> 
```

我也在 web.config 中试过这个：

```
<system.net>
   <mailSettings>
     <smtp from="no-reply@no-reply.com">
       <network host="smtp.gmail.com" port="587" enableSsl="true"
                userName="papasmurf985@gmail.com" password="PASSWORD" />
     </smtp>
   </mailSettings>
</system.net> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:09:36.130

请尝试以下方法

```
public void SendMessage(string toAddress, string subjectText, string bodyText)
{
    //create a object to hold the message
    MailMessage newMessage = new MailMessage();

    //Create addresses
    MailAddress senderAddress = new MailAddress(your_gmail_address);
    MailAddress recipentAddress = new MailAddress(toAddress);

    //Now create the full message
    newMessage.To.Add(recipentAddress);
    newMessage.From = senderAddress;
    newMessage.Subject = subjectText;
    newMessage.Body = bodyText;

    //Create the SMTP Client object, which do the actual sending
    SmtpClient client = new SmtpClient(your_gmail_server_address, your_gmail_port)
    {
        Credentials = new NetworkCredential(your_gmail_address, your_password),
        EnableSsl = true
    };

    //now send the message
    client.Send(newMessage);
} 
```

这段代码对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:51:07.330

我首先要确保您的 ISP 不会阻止外部 SMTP 服务器

# r - 抓取 Javascript 生成的数据

> ID：15330393
> 
> 赞同：0
> 
> 时间：2013-03-11T02:45:20.017
> 
> 标签：r, scrape

我正在与世界银行合作开展一个项目，分析他们的采购流程。

世界银行为其每个项目维护网站，其中包含已发布的相关合同的链接和数据（[示例](http://www.worldbank.org/projects/P090644/community-social-development-project?lang=en)）。采购选项卡下提供与合同相关的数据。

我希望能够从该站点提取项目的合同信息，但链接和相关数据是使用嵌入式 Javascript 生成的，并且显示合同授予和其他数据的页面的 URL 似乎没有遵循可识别的模式（[示例](http://search.worldbank.org/wcontractawards/procdetails/OP00005718)）。

有什么方法可以通过 R 在第一个示例中抓取浏览器呈现的数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T08:58:37.480

主页面调用一个javascript函数

```
javascript:callTabContent('p','P090644','','en','procurement','procurementId'); 
```

这里主要的是项目 id `P090644`。这与所需的语言一起`en`作为参数传递给[http://www.worldbank.org/p2e/procurement.html](http://www.worldbank.org/p2e/procurement.html)上的表单。

可以使用 URL [http://www.worldbank.org/p2e/procurement.html?lang=en&projId=P090644](http://www.worldbank.org/p2e/procurement.html?lang=en&projId=P090644)复制此表单调用。

提取相关项目描述 url 的代码如下：

```
projID<-"P090644"
projDetails<-paste0("http://www.worldbank.org/p2e/procurement.html?lang=en&projId=",projID)

require(XML)

pdData<-htmlParse(projDetails)
pdDescribtions<-xpathSApply(pdData,'//*/table[@id="contractawards"]//*/@href')

#> pdDescribtions
                                                                href 
#"http://search.worldbank.org/wcontractawards/procdetails/OP00005718" 
                                                                href 
#"http://search.worldbank.org/wcontractawards/procdetails/OP00005702" 
                                                                href 
#"http://search.worldbank.org/wcontractawards/procdetails/OP00005709" 
                                                                href 
#"http://search.worldbank.org/wcontractawards/procdetails/OP00005715" 
```

应该注意的是，提供了可能对您有用的 excel 链接。它们可能包含您打算从描述链接中删除的数据

```
procNotice<-paste0("http://search.worldbank.org/wprocnotices/projectdetails/",projID,".xls")
conAward<-paste0("http://search.worldbank.org/wcontractawards/projectdetails/",projID,".xls")
conData<-paste0("http://search.worldbank.org/wcontractdata/projectdetails/",projID,".xls")

require(gdata)

pnData<-read.xls(procNotice)
caData<-read.xls(conAward)
cdData<-read.xls(conData) 
```

更新：

要查找发布的内容，我们可以检查调用 javascript 函数时发生的情况。使用 Firebug 或类似的东西，我们拦截了开始的请求标头：

```
POST /p2e/procurement.html HTTP/1.1
Host: www.worldbank.org 
```

并有参数：

```
lang=en
projId=P090644 
```

[或者，我们可以在http://siteresources.worldbank.org/cached/extapps/cver116/p2e/js/script.js](http://siteresources.worldbank.org/cached/extapps/cver116/p2e/js/script.js)检查 javascript并查看函数`callTabContent`：

```
function callTabContent(tabparam, projIdParam, contextPath, langCd, htmlId, anchorTagId) {
    if (tabparam == 'n' || tabparam == 'h') {
        $.ajax( {
            type : "POST",
            url : contextPath + "/p2e/"+htmlId+".html",
            data : "projId=" + projIdParam + "&lang=" + langCd,
            success : function(msg) {
                if(tabparam=="n"){
                    $("#newsfeed").replaceWith(msg);
                } else{
                    $("#cycle").replaceWith(msg);
                }
                stickNotes();
            }
        });
    } else {
        $.ajax( {
            type : "POST",
            url : contextPath + "/p2e/"+htmlId+".html",
            data : "projId=" + projIdParam + "&lang=" + langCd,
            success : function(msg) {
                $("#tabContent").replaceWith(msg);
                $('#map_container').hide();
                changeAlternateColors();
                $("#tab_menu a").removeClass("selected");
                $('#'+anchorTagId).addClass("selected");                
                stickNotes();
            }
        });
    }
} 
```

检查函数的内容，我们可以看到它只是将相关参数发布到表单然后更新网页。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T19:48:07.950

我不确定我是否了解您问题的所有细节。但我可以肯定的是，casperJS 非常适合 javascript 生成的内容。

你可以在这里看看：[http ://casperjs.org/](http://casperjs.org/)

它是用 Javascript 编写的，并且在我提供的链接上很好地记录了许多有用的功能。

我最近自己将它用于个人项目，只需几行代码即可轻松设置。

搏一搏！希望，这有帮助..

# database - 如何让 Greenplum 4.2.3 只扫描预期的分区？

> ID：15330395
> 
> 赞同：2
> 
> 时间：2013-03-11T02:45:26.750
> 
> 标签：database, database-performance, query-performance, greenplum

当我在视图中使用 unnest() 并在 select 语句中使用该视图时，Greenplum 似乎无法仅搜索预期的分区并搜索主表的所有分区。当使用子查询而不是视图时，同样的事情也适用。

例如：

```
Select something from (select unnest(an_array_field) from table_y) 
where date = 'somedate' and state = 'somestate' 
```

我们目前有 2 个不同的服务器运行 2 个不同版本的 Greenplum。服务器 A 在旧版本 (4.2.1) 上运行，而服务器 B 在 4.2.3 上运行。运行上面相同的查询会产生不同的结果。服务器 A（旧）将在几秒钟内返回查询，而服务器 B（新）将永远返回。运行查询的解释表明服务器 A 仅对其中一个分区进行扫描（在 where 子句中包含日期和状态），而服务器 B 将对每个分区进行扫描，从而导致运行缓慢。

两个 DB 的表结构相同。运行没有嵌套的查询不会有问题。所以，我怀疑与新版本有关。我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:23:29.653

升级到较新版本的数据库。4.2.5 是当前版本。即将发布的版本还将有一个新的查询计划器，如果升级到 4.2.5 没有，它也应该有所帮助。

# bash - /dev/stdin 带有此处字符串

> ID：15330402
> 
> 赞同：8
> 
> 时间：2013-03-11T02:46:21.423
> 
> 标签：bash, cygwin, stdin, heredoc

我想要一个可以从文件或标准输入中获取输入的 Bash 脚本，`grep`例如

```
$ cat hw.txt
Hello world

$ grep wor hw.txt
Hello world

$ echo 'Hello world' | grep wor
Hello world

$ grep wor <<< 'Hello world'
Hello world 
```

一切都很好。但是使用以下脚本

```
read b < "${1-/dev/stdin}"
echo $b 
```

如果使用herestring，它会失败

```
$ hw.sh hw.txt
Hello world

$ echo 'Hello world' | hw.sh
Hello world

$ hw.sh <<< 'Hello world'
/opt/a/hw.sh: line 1: /dev/stdin: No such file or directory 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T03:35:59.850

以`/dev/stdin`这种方式使用可能会出现问题，因为您试图使用文件系统中的名称`/dev/stdin`（

这是一个供您测试的小脚本：

```
#!/bin/bash

echo "INFO: Listing of /dev"
ls -al /dev/stdin

echo "INFO: Listing of /proc/self/fd"
ls -al /proc/self/fd

echo "INFO: Contents of /tmp/sh-thd*"
cat /tmp/sh-thd*

read b < "${1-/dev/stdin}"
echo "b: $b" 
```

在我的 cygwin 安装中，这会产生以下结果：

```
./s <<< 'Hello world'

$ ./s <<< 'Hello world'
INFO: Listing of /dev
lrwxrwxrwx 1 austin None 15 Jan 23  2012 /dev/stdin -> /proc/self/fd/0
INFO: Listing of /proc/self/fd
total 0
dr-xr-xr-x 2 austin None 0 Mar 11 14:27 .
dr-xr-xr-x 3 austin None 0 Mar 11 14:27 ..
lrwxrwxrwx 1 austin None 0 Mar 11 14:27 0 -> /tmp/sh-thd-1362969584
lrwxrwxrwx 1 austin None 0 Mar 11 14:27 1 -> /dev/tty0
lrwxrwxrwx 1 austin None 0 Mar 11 14:27 2 -> /dev/tty0
lrwxrwxrwx 1 austin None 0 Mar 11 14:27 3 -> /proc/5736/fd
INFO: Contents of /tmp/sh-thd*
cat: /tmp/sh-thd*: No such file or directory
./s: line 12: /dev/stdin: No such file or directory
b: 
```

此输出显示 bash 正在创建一个临时文件来保存您的 HERE 文档 ( `/tmp/sh-thd-1362969584`) 并使其在文件描述符 0 标准输入上可用。但是，临时文件已从文件系统中取消链接，因此无法通过文件系统名称（例如`/dev/stdin`. 您可以通过读取文件描述符 0 来获取内容，但不能通过尝试打开`/dev/stdin`.

在 Linux 上，`./s`上面的脚本给出了以下内容，表明该文件已被取消链接：

```
INFO: Listing of /dev
lrwxrwxrwx 1 root root 15 Mar 11 09:26 /dev/stdin -> /proc/self/fd/0
INFO: Listing of /proc/self/fd
total 0
dr-x------ 2 austin austin  0 Mar 11 14:30 .
dr-xr-xr-x 7 austin austin  0 Mar 11 14:30 ..
lr-x------ 1 austin austin 64 Mar 11 14:30 0 -> /tmp/sh-thd-1362965400 (deleted) <---- /dev/stdin not found
lrwx------ 1 austin austin 64 Mar 11 14:30 1 -> /dev/pts/12
lrwx------ 1 austin austin 64 Mar 11 14:30 2 -> /dev/pts/12
lr-x------ 1 austin austin 64 Mar 11 14:30 3 -> /proc/10659/fd
INFO: Contents of /tmp/sh-thd*
cat: /tmp/sh-thd*: No such file or directory
b: Hello world 
```

更改您的脚本以使用提供的标准输入，而不是尝试通过`/dev/stdin`.

```
if [ -n "$1" ]; then
    read b < "$1"
else
    read b
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:41:51.003

`bash`专门解析一些文件名（如`/dev/stdin`），以便即使它们实际上不存在于文件系统中也能被识别。如果您的脚本没有`#!/bin/bash`在顶部，并且`/dev/stdin`不在您的文件系统中，则您的脚本可能会使用 运行`/bin/sh`，这`/dev/stdin`实际上是一个文件。

（这可能不是答案，而是对[奥斯汀答案](https://stackoverflow.com/a/15330784/1126841)的评论。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T03:25:23.340

```
$ cat ts.sh 
read b < "${1-/dev/stdin}"
echo $b

$ ./ts.sh <<< 'hello world'
hello world 
```

对我来说没问题。我在 Mac OS X 上使用 bash 4.2.42。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-11T03:46:20.410

你这里有错字

```
read b < "${1-/dev/stdin}" 
```

尝试

```
read b < "${1:-/dev/stdin}" 
```

# sql - 在 PostgreSQL 中查找两个大表之间的差异

> ID：15330403
> 
> 赞同：18
> 
> 时间：2013-03-11T02:46:22.480
> 
> 标签：sql, postgresql, left-join, exists, full-outer-join

我在 Postgres 中有两个类似的表，只有一个 32 字节的拉丁字段（简单的 md5 哈希）。两个表都有约 30,000,000 行。表格差别不大（10-1000行不一样）

Postgres 是否可以找到这些表之间的差异，结果应该是我上面描述的 10-1000 行。

这不是一个真正的任务，我只是想知道 PostgreSQL 如何处理类似 JOIN 的逻辑。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-11T07:12:04.407

[**`EXISTS`**](https://www.postgresql.org/docs/current/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)似乎是最好的选择。

`tbl1`是此示例中具有多余行的表：

```
SELECT *
FROM   tbl1
WHERE  NOT EXISTS (SELECT FROM tbl2 WHERE tbl2.col = tbl1.col); 
```

如果您不知道哪个表有多余的行或两者都有，您可以在切换表名后重复上述查询，或者：

```
SELECT *
FROM   tbl1
FULL   OUTER JOIN tbl2 USING (col)
WHERE  tbl2 col IS NULL OR
       tbl1.col IS NULL; 
```

在后面的文章中概述了基本技术：

*   [选择其他表中不存在的行](https://stackoverflow.com/questions/19363481/select-rows-which-are-not-present-in-other-table/19364694#19364694)

另外：数据类型[`uuid`](https://www.postgresql.org/docs/current/datatype-uuid.html)对于 md5 哈希是有效的：

*   [将文本表示中的十六进制转换为十进制数](https://stackoverflow.com/questions/8316164/convert-hex-in-text-representation-to-decimal-number/8335376#8335376)
*   [当所有值都是 36 个字符时，使用 char 与 varchar 进行索引查找会明显更快吗](https://dba.stackexchange.com/a/89433/3684)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-20T10:20:06.737

为了增加现有答案，我使用该`row()`函数作为连接条件。这允许您比较整行。例如，我查看对称差异的典型查询如下所示

```
select *
from tbl1
full outer join tbl2 
    on row(tbl1) = row(tbl2)
where tbl1.col is null
or    tbl2.col is null 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-10T22:26:19.310

如果您想在不知道哪个表的行数多于其他表的情况下找出差异，您可以尝试使用此选项来获取任一表中存在的所有行：

```
SELECT * FROM A
WHERE NOT EXISTS (SELECT * FROM B) 
  UNION
SELECT * FROM B
WHERE NOT EXISTS (SELECT * FROM A) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-11T07:45:08.260

根据我的经验，NOT IN 子查询需要很长时间。我会用一个包容性的加入来做到这一点：

```
DELETE FROM table1 where ID IN (
SELECT id FROM table1
LEFT OUTER JOIN table2 on table1.hashfield = table2.hashfield
WHERE table2.hashfield IS NULL) 
```

然后对另一张桌子做同样的事情。

# c++ - 类没有成员“操作员<<”

> ID：15330404
> 
> 赞同：5
> 
> 时间：2013-03-11T02:46:33.810
> 
> 标签：c++, insertion, ostream

我已通读[应将 operator<< 实现为朋友还是成员函数？](https://stackoverflow.com/questions/236801/should-operator-be-implemented-as-a-friend-or-as-a-member-function)和[C++ 中的重载插入运算符](https://stackoverflow.com/questions/1712394/overloading-insertion-operator-in-c)，看起来类似的问题，但没有解决我自己的问题。

我的头文件：

```
using namespace std;

class Animal {
private: 
    friend ostream & operator<< (ostream & o, Dog & d);
    int number;
public:
    Animal(int i);
    int getnumber();

};

ostream & operator<< (ostream & o, Dog & d); 
```

我的cp：

```
using namespace std;

int Animal::getnumber(){
    return number;
}

ostream & Animal::operator<< (ostream & o, Dog & d){
    //...
}

Animal::Animal(int i) : number(i){} 
```

实现很简单，但我收到错误：在 cpp -**错误：类“动物”类没有成员“操作员 <<”。**我真的不明白，因为我已经在 Animal 中将插入运算符声明为朋友，为什么我仍然收到此错误？（将 ostream 公开无济于事）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T02:48:02.247

它不是`Animal`类的成员，也不应该是。所以不要把它定义为一个。`Animal::`通过删除前缀将其定义为自由函数。

```
ostream & operator<< (ostream & o, Dog & d){
    //...
} 
```

# c - C 编程 K&R 练习 1-13

> ID：15330406
> 
> 赞同：2
> 
> 时间：2013-03-11T02:46:35.917
> 
> 标签：c

我需要你们的帮助，我被困在 K&R 练习 1-13 中。它关于功能！我几乎看完了所有 1 章，但一直停留在 Functions 上。我不明白如何使用函数。好吧，我知道如何做简单的功能，但是当我遇到更复杂的功能时，我就卡住了！不知道怎么传值，幂函数的K&R例子有点难理解。但是无论如何，如果您可以完成它，我需要您在练习 1 - 13 中的帮助，以便我可以阅读代码并了解如何使用函数。
**这里自己练习：**
**编写一个程序将其输入转换为小写，使用函数 lower(c) 如果 c 不是字母则返回 c，如果是字母则返回 c 的小写值**

如果您知道一些链接或任何关于如何使用更困难的函数的有用信息（不像将字符串传递给 main，而是算术函数），请您链接它们。

这也不是 K&R 的第 2 版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:14:47.613

```
/*
 * A function that takes a charachter by value . It checks the ASCII value of the charchter
 * . It manipulates the ASCII values only when the passed charachter is upper case . 
 * For detail of ASCII values see here -> http://www.asciitable.com/
 */
char lower(char ch){

    if(ch >= 65 && ch <=90)
    {    ch=ch+32;
    }
    return ch;

}
int main(int argc, char** argv) {
    char str[50];
    int i,l;
    printf("Enter the string to covert ");
    scanf("%s",str);
    /*
     Get the length of the string that the user inputs 
     */
    l=strlen(str);

    /* 
     * Loop over every characters in the string . Send it to a function called
     * lower . The function takes each character  by value . 
     */
    for(i=0;i<l;i++)
    str[i]=lower(str[i]);

    /*
     * Print the new string 
     */

    printf("The changes string is %s",str);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T03:31:23.240

如果您已阅读 K&R 的第 1 章，其中包含一个简单的 getchar()/putchar() 组合和一个 while 循环。用于获取和显示字符，相信你会发现这个程序很熟悉。

```
#include<stdio.h>

int main()
{

int ch; 
    while( (ch = getchar()) != EOF)
    {
        if((ch>=65)&&(ch<=122))
        {
          if((ch>=97)&&(ch<=122))
              ch=ch-32;
          else if((ch>=65)&&(ch<=90))
          ch=ch+32;
        }
         putchar(ch);
    }
return 0;
} 
```

# php - 重构 PHP 代码 - 减少 foreach 语句的数量

> ID：15330409
> 
> 赞同：1
> 
> 时间：2013-03-11T02:46:49.747
> 
> 标签：php

正如您在下面的代码中看到的那样，对于结构相似的三个变量，我使用相同的代码（`foreach`带有数组赋值和尾随的循环`json_decode`）三次。我想知道如何优化我的代码，使其不会不必要地重复功能。在这种情况下变量变量会有所帮助吗？我可以将重复出现的代码行移到第一个`foreach`语句中吗？

这是我的代码现在的样子：

```
date_default_timezone_set('America/Los_Angeles');

$stocks = array('MSFT' => 'http://ichart.finance.yahoo.com/table.csv?s=MSFT', 'AAPL' => 'http://ichart.finance.yahoo.com/table.csv?s=AAPL', 'FB' => 'http://ichart.finance.yahoo.com/table.csv?s=FB', 'ZNGA' => 'http://ichart.finance.yahoo.com/table.csv?s=ZNGA');

foreach ($stocks as $key=>$stock) {
    $fh = fopen($stock, 'r');
    $header = fgetcsv($fh);

    $varname = $key . '_data';

    $$varname  = array();
    while ($line = fgetcsv($fh)) {
        ${$varname}[count($$varname)] = array_combine($header, $line);
    }

    fclose($fh);
}

foreach($MSFT_data as $val){
    $MSFT[] = array((strtotime($val['Date']) * 1000), ((float)$val['Close']));
}
$MSFT = json_encode(array_reverse($MSFT));

foreach($AAPL_data as $val){
    $AAPL[] = array((strtotime($val['Date']) * 1000), ((float)$val['Close']));
}
$AAPL = json_encode(array_reverse($AAPL));

foreach($FB_data as $val){
    $FB[] = array((strtotime($val['Date']) * 1000), ((float)$val['Close']));
}
$FB = json_encode(array_reverse($FB)); 
```

谢谢。如果您有任何问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:55:06.950

您可以只使用关联数组，为每个股票键存储一个数据数组，并`foreach`在该嵌套数组上使用嵌套的 's。

像这样的东西：

```
$res = array();
$stocks = array('MSFT' => '...', 'AAPL' => '...', 'FB' => '...', 'ZNGA' => '...');

foreach ($stocks as $stock => $url) {
    $fh = fopen($url, 'r');
    $header = fgetcsv($fh);

    $res[$stock] = array();

    while ($line = fgetcsv($fh)) {
        $res[$stock][] = array_combine($header, $line);
    }

    fclose($fh);
}

$json = array();

foreach ($res as $stock => $data) {
    $out = array();
    foreach($data as $val){
        $out[] = array((strtotime($val['Date']) * 1000), ((float)$val['Close']));
    }
    $json[$stock] = json_encode(array_reverse($out));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T03:05:47.650

对于三个循环，请尝试：

```
function dateCloseLoop($data) {
    foreach($data as $val){
        $tmp[] = array((strtotime($val['Date']) * 1000), ((float)$val['Close']));
    }
    return json_encode(array_reverse($tmp));
} 
```

所以你的代码会是这样的：

```
$MSFT = dateCloseLoop($MSFT_data);
$AAPL = dateCloseLoop($AAPL_data);
$FB = dateCloseLoop($FB_data); 
```

# ruby-on-rails - 集成测试在 Stripe 上创建测试用户，如何停止或存根

> ID：15330413
> 
> 赞同：3
> 
> 时间：2013-03-11T02:47:38.550
> 
> 标签：ruby-on-rails, ruby, cucumber, integration-testing, stripe-payments

我在一个项目上使用条纹。我使用 Railscasts #288 ( [http://railscasts.com/episodes/288-billing-with-stripe](http://railscasts.com/episodes/288-billing-with-stripe) ) 作为指南。我有它，一旦用户使用有效的用户名和密码注册，我将创建他们的 Stripe 客户帐户。

在运行了几次集成测试后，我可以看到在我的 Stripe 测试帐户中创建了许多用户。如何构建集成测试，以便它像典型用户一样完成我的注册过程，但不使用 Stripe 创建 Stripe 帐户？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-19T19:29:22.467

我来的有点晚了，但看看[StripeMock](https://github.com/rebelidealist/stripe-ruby-mock)。它是专门为此目的而制作的。

```
StripeMock.start
Stripe::Customer.create({
  id: '123',
  email: 'someone@something.com',
  card: 'void_card_token',
  subscriptions: {
    data: [{
      plan: {
        name: 'Some Subscription Plan',
        currency: 'usd',
        amount: 1000
      },
      start: 1410408211,
      status: 'active',
      current_period_start: 1410408211,
      current_period_end: 1413000211
    }]
  }
})

test... test... test...
StripeMock.stop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-10T05:08:05.287

我通过使通过测试创建的所有客户在他们的电子邮件地址中具有“可删除”，并将这些行添加到我的 spec_helper 来解决这个问题。

```
config.after(:suite) do
  custs = Stripe::Customer.all(limit: 100).data
  custs.keep_if { |c| c.email.match( /deletable/ )  }
  custs.each { |c| c.delete }
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T06:09:25.590

这通常使用[WebMock](https://github.com/bblimke/webmock)之类的工具来完成，该工具拦截 HTTP 请求并返回您提供的响应。[VCR](https://github.com/vcr/vcr) gem 通过在后台使用 WebMock（或可选的 FakeWeb）记录和重放 HTTP 请求使这个过程变得更容易。VCR 上有一个 Railscast，但它有点过时了。注意不要使用[`filter_sensitive_data`](https://www.relishapp.com/vcr/vcr/v/2-4-0/docs/configuration/filter-sensitive-data!)配置选项记录任何敏感数据（即 api 密钥）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T18:32:14.847

如果不使您的测试尽可能真实，就很难真正测试集成。因此，我建议您让 stripe 创建测试客户帐户，但使用 webhook 自动删除它们。

具体来说，您将处理 customer.created 事件。如果 event->livemode == false，则向 api 发送请求以删除客户。

这样，您可以在测试时运行整个过程，同时只保留在实时模式下创建的客户。

# sql - 什么是表明数据已更改但未更新的好方法？

> ID：15330414
> 
> 赞同：3
> 
> 时间：2013-03-11T02:47:45.997
> 
> 标签：sql, livecode

将记录保存到数据库后，我希望任何字段更改颜色以指示用户在该字段中键入时进行了未提交的更改。

最好只在 closeField 上设置前景色，还是最好跟踪每个按键，并将其与包含先前字段内容的变量进行比较？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T03:13:20.953

您是否在询问如何在完成加载字段数据的过程并输入新的未保存数据后检测文本更改？您提到了新的未提交更改，我不确定您的想法。这意味着使用 closeField 处理程序不会指示“如果他们在该字段中键入未提交的更改”

但是，如果是这样，我会在写入数据库时​​设置字段的自定义属性，并在字段脚本中放置一个简单的处理程序

```
on textChanged
   if me <> the lastText of me then set the foreColor of me to "blue"
end textChanged 
```

该属性名为“the lastText”，由保存到数据库的任何处理程序设置。

```
set the lastText of field "yourField" to field "yourField" 
```

如果在该字段中编辑了任何内容，颜色将变为蓝色。当然，保存处理程序也应该将颜色设置回黑色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:46:55.047

在 glx2 中，我们实际上做了一些矫枉过正的工作——保存时保存字段的 md5digest，然后根据保存的值检查字段的 md5digest 以查看是否需要保存。显然，您不想在每次按键时都进行计算，无论它有多快。在 closeField 上执行此操作是处理它的好方法，尽管我似乎记得过去有一个问题，如果您单击 OSX 上的另一个应用程序，closeField 不会被触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T07:20:52.663

这是一个卡片级脚本，用于处理表单上的所有字段。将数据加载到卡片时，将每个字段的 uOriginalText 自定义属性设置为与加载到字段中的文本相同的值。

```
on closeField
   # the target control for this message
   put the target into tTarget

   # detect case changes like 'mr jobs' to 'Mr Jobs'
   set the caseSensitive to true

   # compare with the original text, set when the form was loaded
   if the text of tTarget <> the uOriginalText of tTarget then
      # indicate the change - I've used backColor in case the field is now empty
      set the backColor of tTarget to "red"
   else
      # clear warning background color
      set the backColor of tTarget to empty
   end if
end closeField 
```

# python - Python，Quickly 和 Glade，在 TextView 中显示标准输出

> ID：15330419
> 
> 赞同：1
> 
> 时间：2013-03-11T02:48:14.223
> 
> 标签：python, ubuntu, gtk, textview, subprocess

我花了很长时间寻找一种方法来做到这一点，但到目前为止我一无所获。:(

我正在尝试为我制作的一个小 CLI 程序制作一个 GUI——所以我认为使用 Ubuntu 的“快速”将是最简单的方法。基本上它似乎使用 Glade 来制作 GUI。我知道我需要在子进程中运行我的 CLI 后端，然后将 stdout 和 stderr 发送到 textview。但我无法弄清楚如何做到这一点。

这是 Glade/Quickly 为我希望输出出现的对话框创建的代码：

```
from gi.repository import Gtk # pylint: disable=E0611

from onice_lib.helpers import get_builder

import gettext
from gettext import gettext as _
gettext.textdomain('onice')

class BackupDialog(Gtk.Dialog):
    __gtype_name__ = "BackupDialog"

    def __new__(cls):
        """Special static method that's automatically called by Python when 
        constructing a new instance of this class.

        Returns a fully instantiated BackupDialog object.
        """
        builder = get_builder('BackupDialog')
        new_object = builder.get_object('backup_dialog')
        new_object.finish_initializing(builder)
        return new_object

    def finish_initializing(self, builder):
        """Called when we're finished initializing.

        finish_initalizing should be called after parsing the ui definition
        and creating a BackupDialog object with it in order to
        finish initializing the start of the new BackupDialog
        instance.
        """
        # Get a reference to the builder and set up the signals.
        self.builder = builder
        self.ui = builder.get_ui(self)

        self.test = False

    def on_btn_cancel_now_clicked(self, widget, data=None):
        # TODO: Send SIGTERM to the subprocess
        self.destroy()

if __name__ == "__main__":
    dialog = BackupDialog()
    dialog.show()
    Gtk.main() 
```

如果我把它放在 finish_initializing 函数中

```
backend_process = subprocess.Popen(["python", <path to backend>], stdout=subprocess.PIPE, shell=False) 
```

然后进程启动并作为另一个 PID 运行，这正是我想要的，但现在如何将 backend_process.stdout 发送到 TextView？我可以通过以下方式写入 textview：

```
BackupDialog.ui.backup_output.get_buffer().insert_at_cursor("TEXT") 
```

但我只需要知道每次有新的标准输出行时如何调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:05:00.060

> 但我只需要知道每次有新的标准输出行时如何调用它。

您可以`GObject.io_add_watch`用来监视子进程的输出或创建一个单独的线程来从子进程中读取。

```
# read from subprocess
def read_data(source, condition):
    line = source.readline() # might block
    if not line:
        source.close()
        return False # stop reading
    # update text
    label.set_text('Subprocess output: %r' % (line.strip(),))
    return True # continue reading
io_id = GObject.io_add_watch(proc.stdout, GObject.IO_IN, read_data) 
```

或使用线程：

```
# read from subprocess in a separate thread
def reader_thread(proc, update_text):
    with closing(proc.stdout) as file:
        for line in iter(file.readline, b''):
            # execute update_text() in GUI thread
            GObject.idle_add(update_text, 'Subprocess output: %r' % (
                    line.strip(),))

t = Thread(target=reader_thread, args=[proc, label.set_text])
t.daemon = True # exit with the program
t.start() 
```

[完整的代码示例](https://gist.github.com/zed/8a255e81eb87431c0e63)。

# xcode - LLDB 调试器 - 如何评估 C 宏？

> ID：15330423
> 
> 赞同：7
> 
> 时间：2013-03-11T02:48:49.483
> 
> 标签：xcode, gdb, lldb

我正在尝试调试一个广泛使用 C 宏（宏的嵌套宏）的应用程序。它给出了“使用未声明的标识符”错误。

有什么方法可以让 LLDB 调试器正确识别和评估它？我可以自己分解宏并编写完整的表达式，但这非常繁琐且容易出错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:48:33.690

不幸的是，这不会发生，因为我们没有从编译器获得宏的调试信息，这有点道理，因为宏在预处理器完成它的动作之后并且在编译器将你的源代码转换为机器代码之前消失了。

# java - 从对象内输出数据（JAVA）

> ID：15330427
> 
> 赞同：1
> 
> 时间：2013-03-11T02:49:26.490
> 
> 标签：java, console, output

我正在尝试将对象内的一些数据输出到控制台。似乎正在工作，但在数据下方我收到一条奇怪的消息。

下面是代码：

```
import java.text.DecimalFormat;

/**
 * The Circle class calculates area, diameter, and circumference 
 */

public class Circle {

    DecimalFormat fmt = new DecimalFormat("#0.00");

    // Fields
    private double radius;                  // Holds the circle radius
    private final double PI = 3.14159;      // The formula for PI

    /**
     *      Start Constructors
     */

    public Circle(double rad) {

        radius = rad;
        System.out.println("The circle's radius is " + (fmt.format(radius)));
        System.out.println("The circle's area is " + (fmt.format(PI * radius * radius)));
        System.out.println("The circle's diameter is " + (fmt.format(radius * 2)));
        System.out.println("The circle's circumference is " + (fmt.format(2 * PI * radius)));
    }

} 
```

控制台输出为：

```
The circle's radius is 2.00
The circle's area is 12.57
The circle's diameter is 4.00
The circle's circumference is 12.57
Circle@5115a298 
```

什么是圈子消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:50:15.443

给你的 Circle 类一个不错的`toString()`方法覆盖。您将看到此方法的 Object 的默认版本的返回。

```
@Override
public String toString() {
   /*  return a String that shows the "state" of this object */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T02:53:55.703

您必须在其他地方有一个 System.out，它只有一个 Circle 对象作为输出。然后 Hovercraft Full Of Eels 的答案适用。

顺便说一句：Math.PI 已经给了你 Pi！

# deployment - UML - 安装程序是工件吗？

> ID：15330434
> 
> 赞同：2
> 
> 时间：2013-03-11T02:49:56.677
> 
> 标签：deployment, uml

我正在为 Windows 应用程序软件制作 UML 中的部署图。我想知道安装程序是否是工件，我应该如何准确地绘制图表？

我是否只将安装程序放在代表客户端机器的节点中，还是我不仅将安装程序放入，而且将它安装的与安装程序关联的组件放入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T23:03:07.300

工件在物理上代表您的组件。组件是应用程序中逻辑一致的部分。

因此，只有当它是您项目的一部分时，您才拥有安装程序的工件。我的意思是，如果您设计了自己的安装程序，那么它就是一个工件，因为它是您的软件项目“结果”的一部分。然而，即使在这种情况下，将其显示在部署图中也可能不是很有用，因为您通常不会部署安装程序......

否则就不是神器了。您将拥有已安装组件的工件，而不是安装程序本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-30T22:04:33.580

在 UML 术语中，您的安装程序文件*是*一个工件。现在是否应该在图表中显示它，这取决于。架构文档的一个基本原则是，如果有人将从中受益，您应该只制作架构图。

如果该图表的利益相关者是将安装软件的人，那么将安装程序包含在图表中可能是有意义的。如果图表的利益相关者只是试图在已安装的应用程序上配置或修复问题的人，那么您可能最好显示已安装的工件。

在任何情况下，显示工件已部署到节点的正确方法是使用`<<deploy>>`构造型依赖项。示例（来自 UML 2.5 规范，图 19.3）： [![工件部署节点](../Images/dd05d11f0c94b6698c4c56c4a1d6f7ab.png)](https://i.stack.imgur.com/U9dKq.png)

# windows - FOR 命令将 %~dpI 扩展为带有额外“\”的路径，不适合替换命令的目标路径

> ID：15330435
> 
> 赞同：0
> 
> 时间：2013-03-11T02:50:04.557
> 
> 标签：windows, for-loop, batch-file, cmd

问题： FOR 命令的输出将 %~dpI 扩展为末尾带有额外 \ 的路径，该路径不适合作为 REPLACE 命令的目标路径。

问题：如何摆脱多余的\？

我想要做什么：如果文件较新，则将文件 1.txt 复制到 C:\aaa 下的每个子目录。

目录结构：

```
c:\aaa
c:\aaa\1
c:\aaa\2
... 
```

使用：

```
FOR /R C:\aaa %I IN (1.txt) DO REPLACE c:\aaa\1.txt %~dpI /U /R 
```

样本输出：

```
c:\aaa>REPLACE c:\aaa\1.txt c:\aaa\1\ /U /R
Path not found - C:\aaa\1\
no files replaced

c:\aaa>REPLACE c:\aaa\1.txt c:\aaa\2\ /U /R
Path not found - C:\aaa\2\
no files replaced 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:27:53.260

```
REPLACE c:\aaa\1.txt c:\aaa /U /R /S 
```

为什么要打扰 FOR/R？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T03:21:12.833

**选项1**

使用`%~dpI..\%~nI`：

这将扩展为：

```
c:\aaa\1\..\1 
```

**选项 2**

将环境变量设置为路径，然后抓取除最后一个字符之外的所有字符：

```
SET targetpath=C:\aaa\1\
ECHO %targetpath:~,-1% 
```

输出：

```
C:\aaa\1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T07:49:43.757

只在您的命令中添加一点：

`FOR /R C:\aaa %I IN (1.txt) DO REPLACE c:\aaa\1.txt %~dpI. /U /R`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T03:39:43.057

它不漂亮，但 DOS 批处理从来都不是。您可以使用开关将另一个`FOR`放入其中`/F`以处理名称。这是我跑的：

```
FOR /R . %I IN (foo) DO @FOR /F "delims=" %N IN ("%~dpI.") DO @echo %~fN 
```

从当前目录输出每个目录名称。是将`"delims="`空格作为有效字符包含在内。这`%~dpI.`是一个使用该目录作为完整路径的组合，然后`%~fN`给出完整的目录名称。

`DIR`您可以使用该命令实现类似的目的。尝试：

```
DIR /AD /S /B 
```

所以事实上：

```
FOR /F "delims=" %I IN ('dir /AD /S /B') do @echo %~fI 
```

例外是上面不包括基本目录。

# r - 订单 x 轴（月数）

> ID：15330440
> 
> 赞同：0
> 
> 时间：2013-03-11T02:51:33.910
> 
> 标签：r, axis

我有一个数据框如下

```
year month increment  
113 6 464  
113 7 132  
113 8 165  
113 9 43 
113 10 658  
113 11  54  
113 12 463  
114 1  231  
114 2 21 
```

尽管按指示进行了排序，但当我绘制增量~因子（月）时，图中生成的 x 轴从第 1 个月开始，而不是像数据框那样从第 6 个月开始

```
qplot(month,data=monthly,fill=treatment,weight=increment,position="dodge") 
```

我应该怎么做才能使 x 轴尊重我需要的月份顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T02:56:39.280

像这样的东西，也许：

```
qplot(interaction(year, month, lex.order=TRUE), data=monthly, fill=treatment,weight=increment,position="dodge") 
```

删除`fill=treatment`参数（因为我没有数据）会导致：

```
qplot(interaction(year, month, lex.order=TRUE), data=monthly, weight=increment,position="dodge") 
```

![在此处输入图像描述](../Images/0b0abbd7e9deee6205f8e4ce1b3d95d5.png)

# javascript - 使 jQuery 保持最新的实用方法？

> ID：15330448
> 
> 赞同：28
> 
> 时间：2013-03-11T02:52:10.967
> 
> 标签：javascript, jquery, upgrade, sdlc

我们正在进行的一些项目在 jQuery 1.4.2 或更早版本中有着深厚的渊源，介于缺乏最新版本的性能优势（或语法糖）、使用现已弃用的方法的耻辱以及部署一个 3 年以上的积极维护库的旧版本，升级现在迫在眉睫。

我们可以采用/重新访问社区中哪些流行的做法以确保顺利推出（即关注晦涩的兼容性问题，拾取全局回归，重构一些旧代码......）？它们如何最好地集成到 SDLC 中以供将来升级？对于 jQuery 之类的库来说，合理的升级计划是什么（我预计每次发布都不会有显着的收益或合理的成本，但每 6-12 个月一次可能是合理的）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T18:15:27.407

要真正回答您的三个问题，以下是我做过或至少推荐的一些事情：

**顺利升级推出的最佳实践**

*   进行测试。这些可以是您的 JS 和/或浏览器测试的单元测试。这些应至少涵盖项目中使用的最典型和最复杂的功能。如果您没有测试，请编写它们。如果您不想编写测试，请重新考虑。如果您*真的*不想编写测试，至少有一个可以手动执行的用例列表。
*   确保在升级之前通过所有测试。
*   阅读您现在使用的版本和最新版本之间的**每个（主要）版本的发行说明。**另请参阅API 文档中的已[删除](http://api.jquery.com/category/removed/ "删除了 jQuery 函数")和[已弃用](http://api.jquery.com/category/deprecated/ "不推荐使用的 jQuery 函数")类别。如果您的任何代码使用 jQuery UI，还请查看这些发行说明和插页式版本的[升级指南](http://jqueryui.com/upgrade-guide/ "jQuery UI 升级指南")。当您这样做时，请记下您可能需要在代码库中更改的内容（可能大量使用`grep`.
*   如果您项目的当前 jQuery 版本 >= 1.6.4，还可以考虑使用[jQuery Migrate 插件](https://github.com/jquery/jquery-migrate/#readme "jQuery 迁移插件")来进一步评估所需的工作。
*   根据到达那里所需的工作、您的项目是否使用需要特定版本 jQuery 的任何第三方库、只有您可以考虑的其他因素等，决定您希望哪个版本成为升级目标。
*   与您的团队会面，查看要对您的代码库进行的更改列表，并相应地划分/分配工作。也许编写一些脚本或其他工具来提供帮助。如果您有，您的团队的编码风格指南/最佳实践文档可能也需要更新。如果可能的话，决定一次性（推荐）或滚动更新版本。想出一个合适的发布策略。（我建议不要将升级作为代码库另一个不相关的大更改的一部分发布，因此如果需要，很容易回滚。）
*   在整个升级过程中，不断地运行您的测试。手动测试时，请始终监视浏览器控制台是否有新错误。编写涵盖意外错误的新测试。
*   当所有测试都通过时，决定你想如何推出——如果它是一个网站，一次所有用户或一次百分比等等。对于一个库或其他项目，也许你会发布一个 beta/出血边缘您可以让更雄心勃勃的用户在野外为您测试的版本。
*   记录您刚刚所做的一切，以便下次更容易。
*   [利润。]

**如何将升级集成到正常工作流程中**

*   再次，测试。确保你有它们。确保它们良好、可维护并涵盖大部分代码库和用例。强烈建议使用持续集成设置来自动运行这些测试。
*   考虑让您的团队创建并同意遵循编码风格指南或标准。这将使将来更容易搜索已弃用的函数调用或构造，因为每个人都将遵循类似的编码模式。诸如脚本、提交钩子、静态分析工具等工具来强制执行好的或嗅出不好的编码风格可能是有用的（取决于团队）。
*   调查并可能决定使用[NPM](https://github.com/twitter/bower "新PM")或[bower](https://github.com/twitter/bower "Twitter的凉亭")之类的包管理器来管理 jQuery 版本和您可能使用的其他依赖它的第三方库。（您仍然需要维护自己的 JS 代码并经历与上述几乎相同的过程。）
*   同样，一旦您超过 1.6.4 版，请确保 Migrate 插件是您升级工作流程的一部分。
*   评估最初的大升级过程中哪些有效，哪些无效，并从中提取最适合您当前工作流程的一般流程。无论您是否计划在每次有新版本时都进行升级，都会有持续的维护任务和习惯，您可能希望将这些任务和习惯保留为一般的开发最佳实践。

**合理的升级时间表**

这本质上是一个 CBA/风险管理问题。你必须权衡一些事情：

*   在同一个主要版本中*不应*有破坏性的 API 更改，因此您通常应该能够以最小的努力升级到最新的次要版本，无需重构。这假设您拥有并维护了良好的测试，您可以在您决定一切都足够好之前在您的项目上运行这些测试。
*   主要版本升级需要更多的研究、更多的重构和更多的测试。在研究步骤之后，您应该对升级进行成本效益分析。
*   这可能无关紧要，但是如果您的任何项目是一个有很多用户的网站，那么让您的所有用户下次访问网站时必须下载您网站上所有已更改的 JS 文件的成本是多少（而不是坚持可能仍缓存在浏览器中的旧版本）？
*   升级的决定应该始终是主观的。次要或主要，您仍然必须每次都证明任何升级是否值得。*始终阅读发行说明。*它是否修复了与您或您的用户当前遇到的问题相关的[安全漏洞或错误？](https://www.cvedetails.com/vulnerability-list/vendor_id-6538/Jquery.html "公共 jQuery 安全漏洞")它会显着提高您项目的性能吗（一定要在以后有基准来验证它）？它是否极大地简化了您一直在使用的编码模式，让您的代码编写得更干净、更容易？您是否要使用依赖于此较新版本的第三方库？*您是否已经使用了依赖于旧版本*的第三方库*版本？（如果是这样，这些库是否可能很快升级以使用新版本？）您是否对您的测试和 QA 过程有信心，升级将占用合理数量的开发资源并且不会导致重大回归？你是否考虑过最终用别的东西换掉 jQuery？等等。*

 *当然这只是我的建议。其中有一些反复出现的主题，我希望它们很清楚。无论如何，我希望有人觉得这有帮助！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-11T03:31:18.890

你永远都会过时。更新到最新版本后，几个月后会出现更新的版本。

除非您愿意投入数小时/数天/数周的开发、测试和错误修复，否则可能会破坏面向用户的功能，否则您不应该仅仅为了使用声明事件处理程序的最新方式而进行更新。它不会伤害你。通常这是一个冒险的事情。这转化为开发团队成本。你已经知道了。重构，尤其是在项目没有明显风险的情况下，通常很难向管理者证明是合理的。你应该仔细检查你的想法，以确保在已经运行的代码中使用新的 jQuery 是否会产生任何影响。

现在，如果您正在现有站点中创建新页面，您可能会在这些区域中包含一个新版本。但是，这将产生一个后果：假设您和您的团队除了开发网站的新部分外，还必须维护使用旧部分的部分。每个人都需要了解他们编写代码所针对的特定版本的 jQuery。

所以，要结束，我会说这样的话。除非由于旧的 jQuery 版本而导致项目延迟或在技术上被阻止存在真正合理的风险，否则您将因为破坏已经工作的东西而陷入麻烦，并且需要额外的时间来完成所有事情和以前一样工作。

无论如何，这种方法并不意味着您可以开始将“新部分”与旧部分分开，并在新区域中使用最新的库。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-11T03:16:26.770

这值得研究：[https ://github.com/jquery/jquery-migrate/#readme](https://github.com/jquery/jquery-migrate/#readme)

> 此插件可用于检测和恢复在 jQuery 中已弃用并从 1.9 版开始删除的 API 或功能。有关插件生成的消息的更多信息，请参阅 [警告页面。](https://github.com/jquery/jquery-migrate/blob/master/warnings.md)有关 jQuery 1.9 中所做更改的更多信息，请参阅[升级指南](http://jquery.com/upgrade-guide/1.9/)和[博客文章](http://blog.jquery.com/2013/01/15/jquery-1-9-final-jquery-2-0-beta-migrate-final-released/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T17:04:10.283

Twitter的家伙已经很好地解决了这个问题。

[http://github.com/twitter/bower](https://github.com/twitter/bower)

它做它在锡上所说的 - 它是一个网络包管理器（包括保持 JS 文件，如 JQuery 最新）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T04:07:48.050

为了在您的开发树中保持最新，我建议使用`src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"`（允许更轻松调试的完整未缩小版本）

然后，当您去发布时，只需将其替换为标题注释中的特定缩小版本（当前为[http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js)）具有允许更好的客户端缓存和使用其他人的带宽的好处。

如果缓存比确保它会自动获取该次要版本版本的错误修复更重要，您可以只使用主要和次要版本，例如：[http ://ajax.googleapis.com/ajax/libs/jquery/1.9 /jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.9/jquery.min.js)（注意：谷歌还没有 1.9 系列；但是 1.8 系列到 1.8.3）由于这些会定期更新错误修复版本，它们不会像特定版本那样被缓存发布

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T04:41:02.857

在这个时代，我们无法预测任何软件版本的稳定性。几年后软件和服务的版本发布之前的一年或两年。但是此时服务的版本正在快速且频繁地更新。

因此，如果您将任何服务与您的服务一起使用，则必须使用**敏捷开发**。通过这种开发方法，您可以轻松地对新需求进行更改，并根据您的需要更改所需的方法。

并且请不要使用折旧方法，因为它们不适合长期服务版本。并将使用其他服务的自己的服务功能库中使用的服务制作库，以便您可以根据新版本轻松更改它们。

**例如**：就像您有一个方法名称一样`update_var();`，它正在调用其他服务的另一个方法，例如`$a = newlib::check_update();`。然后通过创建库，您必须更改您的功能的主库和相关服务的核心库*

# django - Django 'WSGIRequest' 对象不可调用

> ID：15330450
> 
> 赞同：1
> 
> 时间：2013-03-11T02:52:33.803
> 
> 标签：django

我正在开发一个应用程序，我正在尝试显示我的所有用户，但我收到了这个错误

```
TypeError at /everyone/
'WSGIRequest' object is not callable

File "/home/snake/mysite/pet/views.py" in Everyone
  14\.   return HttpResponseRedirect(request('world:Profile'))
Exception Type: TypeError at /everyone/
Exception Value: 'WSGIRequest' object is not callable 
```

我在我的 shell 提示符处进行了查找，它成功地工作，但是当我作为一个函数实现到我的 views.py 中时，为什么会出现这个错误。

每个人 = Person.objects.all() 打印每个人 <sam> <amy>

我的观点.py

```
def Everyone(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect(request('world:Profile'))
    everyone =Person.objects.all()
        return render(request,'everyone.html',{'everyone':everyone}) 
```

我的模型.py

```
class Person(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    image = models.FileField(upload_to="images/",blank=True,null=True) 
```

我的每个人.html

```
{% for one in everyone %}
{{one.name}}
{{one.user.username}}
{% endfor %] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T02:58:37.587

这里：

```
...
return HttpResponseRedirect(request('world:Profile'))
... 
```

您将请求对象用作可调用对象，但事实并非如此。您可能想调用该`reverse`函数。

# solr - Lucene 和昵称匹配

> ID：15330451
> 
> 赞同：1
> 
> 时间：2013-03-11T02:52:33.833
> 
> 标签：solr, lucene

我有一系列包含昵称（甚至带有空格）和 ID 的文档。

昵称可以是 ["example","nick n4me", "nosp4ces","A fancy guy"]。

我必须找到一个查询，允许我通过完美匹配、模糊或具有部分字符的事件来查找配置文件。

所以如果一个记下“昵称”或者“昵称”或者“昵称”，文档中的“昵称”总是要出来的。

我尝试过类似的东西：

```
nickname:(%1%^4 %1%~^3 %1%*^1) 
```

其中“%1%”是我正在搜索的内容，但它不起作用，尤其是对于空格或数字昵称。例如，如果我尝试搜索“nick n”，则查询将是：

```
nickname:(nick n^4 nick n~^3 nick n*^1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:59:30.347

一种更简单的策略是将所有昵称加载到一个字段中 - 在您的示例中，您的昵称字段将有 4 个值。如果您想在昵称中嵌入空格，则需要使用比 StandardAnalyzer 更简单的分析器或使用短语搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:17:30.327

提升`^`只会影响评分而不是匹配，即如果您的查询根本不匹配，提升条款与否不会有任何区别。

在您的具体示例中，查询将不匹配，因为：

1)`nick n`不匹配，因为这需要令牌`nick`或`n`已被令牌化；

2) 编辑：如果您使用标准查询解析器，我发现模糊查询仅适用于单个术语。在您的情况下，您可能应该`nick n~`使用[ComplexPhraseQueryParser](http://lucene.apache.org/core/4_0_0/queryparser/org/apache/lucene/queryparser/complexPhrase/ComplexPhraseQueryParser.html)重写，这样您就可以对整体进行模糊查询`PhraseQuery`。此外，您可以为模糊查询指定阈值（从技术上讲，您正在指定最小 Levenshtein 距离）。显然你必须调整阈值，这通常需要一些试验和错误。

# asp.net - ObjectStateManager 中已存在具有相同键的对象（具有指定字段）

> ID：15330455
> 
> 赞同：0
> 
> 时间：2013-03-11T02:53:09.670
> 
> 标签：asp.net, asp.net-mvc, entity-framework, web-applications

我知道这个问题已经被问过很多次了，但我认为我指定修改字段的事实让我更难解决。这是我的更新方法（在存储库中）：

```
 public Folder UpdateFolder(Folder folder)
        {
            _db.Folders.Attach(folder); // error happens here
            var entry = _db.Entry(folder);
            entry.Property(e => e.Title).IsModified = true;
            SaveChanges();
            return entry.Entity;
        } 
```

当我尝试附加时，我得到“具有相同密钥的对象已经存在”。如果我删除该行，我会得到“此上下文中不存在类型为“文件夹”的实体”。

这是我从（测试方法）调用它的地方：

```
 homeFolder = _dtoServices.AddFolder(new FolderDto
            {
                Title = "Home Folder"
            });
        Assert.AreEqual(_dtoServices.GetHomeData().TotalFolders, 1);

        // Check Folder
        Assert.AreEqual(_dtoServices.GetFolder(homeFolder.FolderId).Details, "Home Folder");

        // Update Folder, Check Folder
        homeFolder.Title = "Updated";
        _dtoServices.UpdateFolder(homeFolder); // HERE
        Assert.AreEqual(_dtoServices.GetFolder(homeFolder.FolderId).Details, "Updated"); 
```

在我的 DtoServices 中：

```
 public FolderDto UpdateFolder(FolderDto folderDto)
        {     
            var test = _repository.UpdateFolder(folderDto.ToEntity());
            return null;
        } 
```

在我的 FolderDto 中：

```
public class FolderDto
{
    public FolderDto()
    {
    }

    public FolderDto(Folder folder)
    {
        FolderId = folder.FolderId;
        Title = folder.Title;          
    }

    [Key]
    public int FolderId { get; set; }

    [Required]
    public string Title { get; set; }

    public Folder ToEntity()

     {
        var folder = new Folder
        {
            FolderId = FolderId,
            Title = Title,
        };
        return folder;
    }
 } 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:25:42.483

问题很可能在这里：`folderDto.ToEntity()`. 我猜`_dtoServices.AddFolder`你已经创建了一个`Folder`实体并将其添加到上下文中，然后调用`SaveChanges`，然后将生成`Id`的放在返回的`homeFolder`DTO 中。实体`Folder`仍附加到上下文中，之后`SaveChanges`处于状态`Unchanged`。

通过`UpdateFolder`调用`folderDto.ToEntity()`您创建一个新的实体实例，该实例`var folder = new Folder...`具有与您返回的相同的 Id `AddFolder`。然后将此新实例附加到相同的上下文中，其中`AddFolder`具有相同键的旧实例仍附加到 ==> 另一个“具有相同键的对象”==> 异常。

在附加新实体之前分离旧实体，或者用于`Find`检查是否还没有具有相同密钥的实体。如果是，请更新*此*实体并且不要附加其他对象。

# perl - Gearman 命令和服务的工作方式不同

> ID：15330463
> 
> 赞同：1
> 
> 时间：2013-03-11T02:54:14.940
> 
> 标签：perl, gearman

我在测试 Gearman 设置时遇到了一个奇怪的问题。由于我只有一台 PC 并且想测试 gearman 跨平台功能，我在 Win7 系统的虚拟机上的 Ubuntu 12.04 上安装了 gearman 作业服务器，并在 Win7 上启动了 worker。virtualbox和宿主机相互ping通。这是我的工人的代码：

```
#!/usr/bin/perl
use Gearman::Worker;

my $worker1 = Gearman::Worker->new;
$worker1->job_servers('10.38.50.158');

# register job
$worker1->register_function( print_task1 => \&print_task1 ); 

$worker1->work while 1; 

sub print_task1{
    my ($job) = @_;
    print "Worker1 starts...\n";
    ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst)=localtime(time);
    printf("%d:%d:%d\n",$hour,$min,$sec);
    sleep 10;
    $job->set_status(50,100);
    sleep 10;
    $job->set_status(100,100);
} 
```

而`PARAMS`在`/etc/init.d/gearman-job-server`Ubuntu 上的作业服务器是`--listen=127.0.0.1 --port=7003`.

当我在 Ubuntu 上启动 gearman 服务器时`gearmand -d -p 7003`，worker 可以在作业服务器上注册，我通过检查服务器状态来确认它。但是，当我通过 启动 gearman 服务器时`sudo service gearman-job-service start`，worker 无法注册。

你能对此提供一些提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:20:38.117

`--listen`表示服务器必须监听的地址。如果使用`--listen=127.0.0.1`，服务器将只捕获本地主机的工作注册。默认值是`INADDR_ANY`这意味着如果您将此选项留空，服务器将侦听任何机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:50:47.697

最后我找到了原因：job server的`PARAMS`in`/etc/init.d/gearman-job-server`应该是only `--port=7003`，没有`--listen=127.0.0.1`！我不知道这里有什么问题，我只是尝试了一下。我还在学习 Gearman，但我确信我之前犯了一个非常愚蠢的错误。

# asp.net - ImageButton 不会在 IE10 上触发回帖

> ID：15330468
> 
> 赞同：5
> 
> 时间：2013-03-11T02:54:54.850
> 
> 标签：asp.net, postback, internet-explorer-10

最近，我们在 IE10 上测试了我们的产品，遇到了服务器按钮控件“Asp:ImageButton”在 IE10 上使用 UpdatePanel 无法触发的问题。以下是示例代码：

```
<form id="form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        Here is the content.
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="buttonSubmit" />
    </Triggers>
</asp:UpdatePanel>
<br />
<br />
<asp:Button ID="buttonSubmit" runat="server" ToolTip="Submit" OnClick="buttonSubmit_Click" />
</form> 
```

服务器端：

```
 protected void buttonSubmit_Click(object sender, ImageClickEventArgs e)
    {
        ScriptManager.RegisterStartupScript(this, this.Page.GetType(), "alert", "alert('It works.')", true);
    } 
```

这里有两件事让我感到困惑：一是这个问题只发生在我部署在 IIS 上并且在 VS 上调试时工作正常。二是如果我删除了上面的两个标签“br”，该事件将被触发。此外，如果我将 ImageButton 更改为 Button，该事件也会被触发。

所以，不知道是不是我遗漏了什么或者误解了ImageButton和Button控件的生命周期。任何帮助将不胜感激。

测试环境：VS2010、IIS 7.5、IE10(10.0.9200.16484)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T15:51:14.920

**只需安装 .NET Framework 4.5 即可解决此问题。**

此问题可能是由 ImageButton IE10 错误引起的，该错误涉及 IE10 错误地将坐标转换为十进制而不是整数。这会导致在 IE10 上的许多（如果不是大多数）情况下单击 ImageButton 失败。

即使您不将应用程序池切换到 .NET Framework 4.5，这也可以解决问题。

就我而言，我将应用程序池保留在 .NET Framework 3.5 中。显然安装 .NET Framework 4.5 会覆盖其他框架版本的一些文件。

[请参阅此处](https://connect.microsoft.com/VisualStudio/feedback/details/755419/asp-net-4-0-and-ie10-click-on-imagebutton-in-updatepanel-produces-error-click-on-normal-button-does-not)的解决方法部分

相关：[IE10 发送带小数（浮点值）的图像按钮单击坐标导致 ParseInt32 FormatException](https://stackoverflow.com/questions/13299685/ie10-sending-image-button-click-coordinates-with-decimals-floating-point-values/15129393#15129393)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-23T08:31:23.627

IE10 有一个错误。如果您开发一个新的 aspx 页面并使用更新面板 ajaxify 页面，该页面将无法正常工作。不会触发任何服务器事件。但是其他浏览器会做得很好。我想知道为什么微软没有注意到/修复这个问题。我处理了强制 IE9 模式的问题

```
<meta http-equiv="x-ua-compatible" content="IE=9" /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-18T20:12:04.283

将 ImageButton 更改为 LinkBut​​ton 并将图像放入其中。

这是一个很好的解决方法，这对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T17:07:36.977

我将 ImageButton 更改为 LinkBut​​ton 并将按钮图像放入其中。作品。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-13T21:46:05.610

您可以在 Page_PreRender 中执行相同的操作

```
private bool alert;
protected void buttonSubmit_Click(object sender, EventArgs e)
    {

        alert= true;
        ViewState["alert"] = alert;
    }

protected void Page_PreRender(object sender, EventArgs e)
    {
        if (ViewState["alert"] != null)
            alert= (bool)ViewState["alert"];
        if (alert)
        {
            alert= false;
            ScriptManager.RegisterStartupScript(this, this.Page.GetType(), "alert", "alert('It works.')", true);

        }
    } 
```

更新面板在 IE 10 中无法通过按钮单击、图像等正常工作。

# apache-camel - Karaf 中的 Aries 蓝图 - 蓝图能否引用外部属性文件

> ID：15330471
> 
> 赞同：5
> 
> 时间：2013-03-11T02:55:21.607
> 
> 标签：apache-camel, apache-karaf, blueprint-osgi

我正在使用 ActiveMQ 蓝图来设置 JMS 连接池。我还使用 Camel 来提供一些功能。

我使用`org.apache.camel.spring.spi.BridgePropertyPlaceholderConfigurer`允许在设置文件时使用外部属性`camel-context`文件。

是否有使用蓝图的类似类型功能？

所以基本上，我想用我从以下配置中的属性文件中获得的属性替换 ${server.address}：

```
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
        xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.0.0"
        xmlns:ext="http://aries.apache.org/blueprint/xmlns/blueprint-ext/v1.0.0"
        xmlns:amq="http://activemq.apache.org/schema/core">

        <bean id="activemqConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
             <property name="brokerURL"
                       value="nio://${server.address}" />
        </bean>

        <bean id="pooledConnectionFactory" class="org.apache.activemq.pool.PooledConnectionFactory">
             <property name="maxConnections" value="8" />
             <property name="connectionFactory" ref="activemqConnectionFactory" />
        </bean>

        <bean id="jmsConfig" class="org.apache.camel.component.jms.JmsConfiguration">
             <property name="connectionFactory" ref="pooledConnectionFactory" />
             <property name="concurrentConsumers" value="5" />
        </bean>

        <bean id="resourceManager" class="org.apache.activemq.pool.ActiveMQResourceManager"
             init-method="recoverResource">
             <property name="transactionManager" ref="transactionManager" />
             <property name="connectionFactory" ref="activemqConnectionFactory" />
             <property name="resourceName" value="activemq.localhost" />
        </bean>

        <bean id="xaConnectionFactory" class="org.apache.activemq.ActiveMQXAConnectionFactory">
             <argument value="nio://${server.address}" />
        </bean>

        <bean id="connectionFactory" class="org.fusesource.jms.pool.JcaPooledConnectionFactory"
             init-method="start" destroy-method="stop">
             <property name="connectionFactory" ref="pooledConnectionFactory" />
             <property name="name" value="activemq" />
        </bean>

        <reference id="transactionManager" interface="javax.transaction.TransactionManager" />

        <service ref="pooledConnectionFactory" interface="javax.jms.ConnectionFactory">
                <service-properties>
                        <entry key="name" value="localhost" />
                </service-properties>
        </service> 
</blueprint> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T08:55:10.483

您可以通过配置管理员使用系统属性和/或配置：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0"
    xmlns:ext="http://aries.apache.org/blueprint/xmlns/blueprint-ext/v1.0.0">

    <!-- Allow the use of system properties -->
    <ext:property-placeholder placeholder-prefix="$[" placeholder-suffix="]" />

    <!--
        config admin properties from etc/com.example.config.cfg
    -->
    <cm:property-placeholder persistent-id="com.example.config" update-strategy="reload">
        <cm:default-properties>
            <cm:property name="configDir" value="$[karaf.base]/my-config" />
        </cm:default-properties>
    </cm:property-placeholder>

    <bean id="config" class="com.example.Config">
        <property name="rootDir" value="${configDir}" />
        <property name="someSysProp" value="$[someSysProp]" />
    </bean>

</blueprint> 
```

“ext:property-placeholder”元素允许您通过定义的占位符前缀和后缀使用系统属性（如示例中的 karaf.base），但这是可选的。如果您只需要自己的配置，您可以通过 etc/etc/com.example.config.cfg 中的文件提供它，并通过 persistence-id 引用它。

# google-app-engine - 获取 remoteApi GAE 时超时

> ID：15330483
> 
> 赞同：0
> 
> 时间：2013-03-11T02:56:54.087
> 
> 标签：google-app-engine, remoteapi

我按照本教程使用 Java 在 Google App Engine (GAE) 中实现 remoteAPi： [https ://developers.google.com/appengine/docs/java/tools/remoteapi](https://developers.google.com/appengine/docs/java/tools/remoteapi)

但在 web.xml 配置后，我使用以下代码将新实体插入到本地数据存储区：

```
String username = "myusername";  
    String password = "mypassword";

    RemoteApiOptions options = new RemoteApiOptions()
        .server("localhost", 8888)  
        .credentials(username, password);
    RemoteApiInstaller installer = new RemoteApiInstaller();
    installer.install(options);

    try {
        DatastoreService ds = DatastoreServiceFactory.getDatastoreService();
        System.out.println("Key of new entity is " + 
            ds.put(new Entity("Hello Remote API!")));
    } finally {
        installer.uninstall();
    } 
```

但发生了错误：

> 访问 /remoteApi/index 时出现问题。原因：

```
Timeout while fetching: http://localhost:8888/remote_api 
```

我在调试时查看并知道它是由以下原因引起的：“installer.install(options);” 陈述。

我该如何解决这个问题？增加套接字超时？

预先感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:09:57.337

我在本地和部署的应用程序中都这样做了。以下代码可能会对您有所帮助。记住**代码必须用 RPC 编写，** 我使用 GWT 2.4、JRE 1.7 和 GAE 1.7.2。将**GAE Remote Api 放入 WEB-INF/lib**

***web.xml***

```
<servlet>
<display-name>Remote API Servlet</display-name>
<servlet-name>RemoteApiServlet</servlet-name>
<servlet-class>com.google.apphosting.utils.remoteapi.RemoteApiServlet</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
<servlet-name>RemoteApiServlet</servlet-name>
<url-pattern>/remote_api</url-pattern>
</servlet-mapping> 
```

***XyzServiceImpl.java***

```
 @Override
public String callGaeRemote() {
    RemoteApiInstaller installer = null;
    List<Entity> allEntities = null;
    String response = null;

    try {

        RemoteApiOptions options = new RemoteApiOptions().server(
                "localhost", 8888).credentials(
                "username", "password");

        installer = new RemoteApiInstaller();
        installer.install(options);

         DatastoreService ds = DatastoreServiceFactory.getDatastoreService();
            System.out.println("Key of new entity is " + 
                ds.put(new Entity("Hello Remote API!")));
        response = "Success";           
    } catch (IOException e) {
        e.printStackTrace();
    }
    finally {
        installer.uninstall();
    }
    return response;
} 
```

# entity-framework - Entity Framework 5 和 SQL Server CE：执行生成的数据库架构

> ID：15330486
> 
> 赞同：1
> 
> 时间：2013-03-11T02:57:12.777
> 
> 标签：entity-framework, sql-server-ce

项目正在使用：

*   ASP.NET MVC4
*   实体框架 5
*   SQL 服务器 CE
*   IDE：Visual Studio Express 2012

**问题：**

实体框架（模型优先）让您添加模型，`.edmx`然后右键单击`.edmx`以生成数据库模式。但是在 VS Express 中，我们无法像在 Visual Studio 中那样右键单击`.sqlce`文件内容来加载“执行 Ctrl+Shift+E”选项。

**问题：**

如何运行由实体框架生成的脚本？

*以前的尝试：*

到目前为止，我已尝试在 SQL Server Management Studio 中打开 Compact 数据库，但我返回了一个错误，即 SSMS 无法加载紧凑型数据库，因为它也不是来自数据库资源管理器的正确类型我已将脚本粘贴到 NewQuery 窗口中并运行脚本但也抛出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T04:22:56.357

我下载了*[SQL Server Compact Toolbox](http://sqlcetoolbox.codeplex.com/)*并能够运行该脚本。感谢并感谢 ErikEJ。

# java - Java逆时针旋转90度

> ID：15330487
> 
> 赞同：-3
> 
> 时间：2013-03-11T02:57:33.213
> 
> 标签：java

如果我有一个 2x2 图像（下面有以下像素颜色），并且将像素逆时针旋转 90 度，那么新的排列是什么？

```
{Pixel.BLACK, Pixel.BLUE},
{Pixel.RED, Pixel.GREEN} 
```

我知道这是一个简单的问题，但我的测试用例一直失败，我猜我的逻辑可能不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T02:59:52.717

蓝绿色

黑红

如果您的坐标是行。

# java - 如何在 java String 中替换所有“/”来格式化 URL？

> ID：15330489
> 
> 赞同：1
> 
> 时间：2013-03-11T02:57:40.450
> 
> 标签：java, regex

```
String url = "d://test////hello\\\hello";
String separator = File.separator;
url = url.replaceAll("\\*", separator);
url = url.replaceAll("/+", separator); 
```

我想格式化那些`url`，但是当我尝试使用时发生错误`replaceAll("/+", separator)`。我试图逃脱`"/"`，`"\\/"`它仍然不起作用..

这是来自控制台的异常：

```
Exception in thread "main" **java.lang.StringIndexOutOfBoundsException**: String index out of range: 1
    at java.lang.String.charAt(String.java:686)
    at java.util.regex.Matcher.appendReplacement(Matcher.java:703)
    at java.util.regex.Matcher.replaceAll(Matcher.java:813)
    at java.lang.String.replaceAll(String.java:2189) 
```

* * *

**现在它可以工作了**

```
 String separator = null;
 if(File.separator.equals("/")) {
    separator = "/";
    url = url.replaceAll("/+", separator);
    url = url.replaceAll("\\\\+", separator);
 } else {
    separator = Matcher.quoteReplacement(File.separator);
    url = url.replaceAll("/+", separator);
    url = url.replaceAll("\\+", separator);
 } 
```

* * *

:) 它适用于 javascript

```
var i = "d:\\ad////df";
alert(i.replace(/\/+/g, '\\')); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T03:03:32.287

尝试：

```
url = url.replaceAll("\\\\+", separator); 
```

您需要 4 个反斜杠。Java 字符串转义一次，正则表达式元字符转义一次。那就是对于正则表达式，您需要两个反斜杠`\\`，而在字符串中，您需要用另外两个来转义它们。

此外，量词`*`表示零或更多，您需要使用`+`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T03:11:36.727

你的平台是Windows吧？所以`File.separator`会是反斜杠吗？

解释是第二个参数`String.replaceAll`不是一个简单的字符串。相反，它是一种替代模式......

[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)说：

> *“请注意，替换字符串中的反斜杠 (\) 和美元符号 ($) 可能会导致结果与将其视为文字替换字符串时的结果不同；请参阅 Matcher.replaceAll。使用 Matcher.quoteReplacement(java.lang. String) 来抑制这些字符的特殊含义，如果需要的话。”*

因此，由单个反斜杠组成的替换字符串是无效的文字替换字符串。您需要引用分隔符 String ... 就像 javadoc 说的那样。

[（你得到那个特殊的例外有点令人惊讶。我可以想象它是如何发生的，但我原以为他们会更优雅地处理糟糕的转义。请注意，如果这被报告为“错误” , Oracle 可能不会修复它。修复会破坏向后兼容性。）]

# django - Django - clean_field() 没有被调用来更新管理内联表单

> ID：15330490
> 
> 赞同：3
> 
> 时间：2013-03-11T02:57:52.330
> 
> 标签：django, django-forms, django-admin

我无法弄清楚为什么没有为在管理视图上更新的内联表单调用 clean_field() 方法。我的代码看起来很简单（见下面的概要）。

当我通过管理界面 ( ) 修改主表单时`http://admin/..../primary/1/`，正如预期的那样，我看到：

*   Admin.PrimaryAdminForm.clean_myfield() 调用
*   Admin.PrimaryAdminForm.clean() 调用
*   Model.Primary.clean() 调用

但是，当我在 Membership ( ) 的 Admin 视图中将 Primary 修改为内联时`http://admin/..../membership/1/`，我只看到：

*   Model.Primary.clean() 调用

我曾尝试将“def clean_myfield(self):”方法放置在以下位置，但看不到它是从内联的 Membership 主窗体中执行的：

*   Model.Primary.clean_myfield
*   Admin.PrimaryAdmin.clean_myfield
*   Admin.PrimaryAdminForm.clean_myfield
*   Admin.PrimaryAdminInline.clean_myfield

这个 clean_myfield 代码应该放在其他地方吗？

我已阅读（并重读）[forms and field validation][docs.djangoproject.com/en/dev/ref/forms/validation/#form-and-field-validation] 上的 Django 文档，它提供了很好的覆盖范围，但是内联验证没有任何内容。我还阅读了 docs.djangoproject.com/en/dev/ref/contrib/admin/#adding-custom-validation-to-the-admin，但对内联特定验证没有帮助。是否有其他相关文件？

--->**奥斯汀回答**提供了一个文档参考：“如果未指定”（请参阅​​他的链接），这意味着答案。我添加了一个改进有关此主题的文档的[请求。](https://code.djangoproject.com/ticket/20023)

经过进一步的实验，我发现了一种解决方法，方法是将代码放入 Model.Primary.clean() 方法中：

```
def clean(self):
    data = self.myfield
    data += "_extra" # not actual cleaning code 
    self.myfield = data 
```

**所以问题仍然存在**：为什么 Model.clean() 似乎是唯一放置管理员内联表单验证的地方，而不是 clean_myfield(self) 方法？

--->**奥斯汀回答**。我需要添加`form = PrimaryAdminForm`到 PrimaryInline。通过此添加，PrimaryAdminForm.clean_myfield(self) 在会员表单上更新 PrimaryInline myfield 时被调用。由于添加了表单引用，代码排序已更新。

**代码概要：**

*没有 forms.py 文件* ——所有模型都通过管理界面更新

*模型.py：*

```
class Membership(models.Model):
    name = models.CharField( max_length=NAME_LENGTH,
        null=True, blank=True, verbose_name="Membership Name Tag",
        help_text="Name of membership" )

class Primary(models.Model):
    user = models.OneToOneField(User, verbose_name="User Name")
    membership = models.OneToOneField(Membership, verbose_name="Membership Name")
    myfield = models.CharField("My Field", max_length=20, null=True, blank=True)

    # clean method altered as in Update comment 
    # Why must this be here? Why not in clean_myfield(self)
    def clean(self):
        data = self.myfield
        data += "_extra" # not actual cleaning code 
        self.myfield = data 
```

*管理员.py：*

```
class MembershipAdminForm(ModelForm):
    class Meta:
        model = Membership

class PrimaryAdminForm(ModelForm):
    class Meta:
        model = Primary

    def clean_myfield(self):
        data = self.cleaned_data['myfield']
        data += "_extra" # not actual cleaning code 
        return unicode(data)

    def clean(self):
        cleaned_data = super(PrimaryAdminForm, self).clean()
        # not actual cleaning code 
        return cleaned_data

# EDIT2: Moved PrimaryInline so it's defined after PrimaryAdminForm 
class PrimaryInline(admin.StackedInline):
    model = Primary
    form = PrimaryAdminForm   #EDIT2 as recommended by Austin
    raw_id_fields = ['user']
    verbose_name_plural = 'Primary Member'
    fieldsets = ((None, {'classes': ('mbship', ),
                         'fields': ('user', 'myfield')}), )

class MembershipAdmin(admin.ModelAdmin):
    form = MembershipAdminForm

    # inlines
    inlines = [PrimaryInline, ]

    fieldsets = ((None, {'classes': ('mbship',),
                         'fields': ('name'), }), )

class PrimaryAdmin(admin.ModelAdmin):
    form = PrimaryAdminForm
    list_display = ('__unicode__', 'user', 'status', 'date_used' )
    search_fields = ['user__first_name', 'user__last_name', 'user__email'] 

    fieldsets = ((None, {'classes': ('mbship',), 
                         'fields': ('user', 'membership', 'myfield'), }), )

    def clean_myfield(self):
        data = self.cleaned_data['myfield']
        data += "_extra" # not actual cleaning code 
        return unicode(data) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T22:52:41.110

验证发生在`ModelForm`对象上，而不是`ModelAdmin`对象上。`ModelForm`如果您想覆盖任何干净的方法，那么您必须为每个所需的模型创建自己的后代。

在您的示例中，`PrimaryInline`该类未指定`form`. [如果未指定](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.InlineModelAdmin.form)，则使用的表单将是 a `ModelForm`，它没有任何自定义清理方法。

尝试这个：

```
class PrimaryInline(admin.StackedInline):
    # ... existing code ...
    form = PrimaryAdminForm 
```

现在，这将使用您的自定义方法`PrimaryAdminForm`和相关`clean()`方法。

# wordpress - WordPress 安装转移到本地主机问题

> ID：15330491
> 
> 赞同：1
> 
> 时间：2013-03-11T02:58:00.050
> 
> 标签：wordpress

也许这不是一个纯粹的编程问题。

我从 webhost 移动了 wordpress 安装的副本并放入我的 localhost。

然后我从本地主机打开网页。当我点击登录到 Wordpress 管理面板的按钮时，我希望路径会

```
 http://localhost 
```

但我得到了

```
 http://www.mywebhost.com/ 
```

我不需要更改文件的位置，因此 Wordpress 中的所有内容都不会指向我的本地主机而不是网络主机

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:02:59.017

阅读[官方的移动 Wordpress](http://codex.wordpress.org/Moving_WordPress)文章，它说明了迁移站点时需要执行的一些步骤，例如转到**管理 → 设置 → 常规，并将****站点地址 (URL)**和**WordPress 地址 (URL)**的值更新 到正确的域。

如果它不起作用，您需要将数据库的内容替换为新域。

# java - 从客户端到服务器的流标头 434B0005 无效

> ID：15330492
> 
> 赞同：0
> 
> 时间：2013-03-11T02:58:02.310
> 
> 标签：java, serialization, tcp, objectoutputstream, objectinputstream

我已经序列化了一些对象，因此我可以将它们转换为 TCP 数据包的字节数组。当我将对象从服务器程序发送到客户端程序时，没有问题并且工作正常。然而，即使服务器和客户端之间的代码是相同的，当我尝试将对象从客户端发送到服务器时，我得到一个无效的标头。

这是我正在序列化的对象：

```
 public static byte[] serialize(Hand c) throws IOException
    {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(baos);
        oos.writeObject(c);
        return baos.toByteArray();
    }

    public static Hand deserialize(byte[] bytes) throws IOException, ClassNotFoundException
    {
        ByteArrayInputStream b = new ByteArrayInputStream(bytes);
        ObjectInputStream o = new ObjectInputStream(b);
        return (Hand) o.readObject();
    } 
```

和

```
 public static byte[] serialize(Card c) throws IOException
    {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(baos);
        oos.writeObject(c);
        return baos.toByteArray();
    }

    public static Card deserialize(byte[] bytes) throws IOException, ClassNotFoundException
    {
        ByteArrayInputStream b = new ByteArrayInputStream(bytes);
        ObjectInputStream o = new ObjectInputStream(b);
        return (Card) o.readObject();
    } 
```

这些都取自服务器程序，但服务器和客户端的序列化代码是相同的；我非常重视从服务器到客户端的 Card 类和 Hand 类，以确保不会发生这样的错误。

服务器可以将 Card 或 Hand 转换为 byte[] 并通过 DataOutputStream 将其写入客户端，客户端可以通过 DataInputStream 接收 Card 或 Hand ，将其反序列化并毫无问题地读取。但是，当我尝试从客户端向服务器发送卡片或手牌时，它很少会起作用，通常我会得到一个

```
Exception in thread "main" java.io.StreamCorruptedException: invalid stream header: 434B0005
    at java.io.ObjectInputStream.readStreamHeader(Unknown Source)
    at java.io.ObjectInputStream.<init>(Unknown Source)
    at Hand.deserialize(Hand.java:29)
    at KoiKoi_TCP_Server.takeClientTurn(KoiKoi_TCP_Server.java:321)
    at KoiKoi_TCP_Server.main(KoiKoi_TCP_Server.java:380) 
```

其中 Hand.java.29 指向该行

```
 ObjectInputStream o = new ObjectInputStream(b); 
```

在 Hand 反序列化方法中。

我知道它告诉我标题无效。我不确定如何修复它，因为它只会破坏一个方向并且代码是相同的。建议？

我一次只发送一个单独的对象，所以我没有初始化多个 ObjectInputStreams 或任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:29:09.663

> 我没有初始化多个 ObjectOutputStreams 或任何东西。

是的，你是。你正在为每个对象初始化一个新的 ObjectOutputStream，然后你给自己一个额外的问题，即知道要读取多少字节才能接收每个对象，而你弄错了，所以你不同步.

摆脱这一切。你不需要它。它只是增加了问题。只需在套接字的整个生命周期内直接使用单个 ObjectOutputStream 和 ObjectInputStream，直接在套接字流上构造，当你想发送一个对象时调用 writeObject()，当你想读取一个对象时调用 readObject()。两行代码。完全忘记字节数组和 ByteArray/DataInput/OutputStreams。

# python - Python 对象迭代

> ID：15330493
> 
> 赞同：0
> 
> 时间：2013-03-11T02:58:03.157
> 
> 标签：python

`api = 'interesting'`有人可以提供一个示例，说明如何在 python 中循环这个对象并在哪里和拉出“值”`arguments.name = 'FileName'`吗？

这是我到目前为止所拥有的。
这个对象有更多的进程和调用......输出已被省略。

编辑：我应该提到运行此代码时出现以下错误：“TypeError：列表索引必须是整数，而不是 str”

```
for k, v in object['behavior']['processes']['calls'].items():
            if v['api'] == "interesting":
                           <loop through arguments next> 
```

目的：

```
{"behavior": {
    "processes": [
        {
        "parent_id": "312", 
        "process_name": "test.exe", 
        "process_id": "1184", 
        "first_seen": "2013-03-02 17:22:48,359", 
        "calls": [
            {
            "category": "filesystem", 
            "status": "FAILURE", 
            "return": "0xc000003a", 
            "timestamp": "2013-03-02 17:22:48,519", 
            "thread_id": "364", 
            "repeated": 0, 
            "api": "interesting", 
            "arguments": [
                {
                "name": "FileHandle", 
                "value": "0x00000000"
                }, 
                {
                "name": "DesiredAccess", 
                "value": "0x80100080"
                }, 
                {
                "name": "FileName", 
                "value": "c:\\cgvi5r6i\\vgdgfd.72g"
                }, ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:12:07.953

你在做什么看起来不错，但是

1.  您的索引已关闭（仔细查看有列表
2.  您的支票似乎无效（`v`是一个字符串，因此`v['api']`无效）。

因此，请尝试这样做，（我已将您的对象视为`i`）

```
for k, v in i['behavior']['processes'][0]['calls'][0].items():
    if k == 'api' and v == "interesting":
        print k,v 
```

或者

```
for dct in i['behavior']['processes'][0]['calls']:
    if dct['api'] == "interesting":
        print 'api',dct['api'] 
```

或者

```
for dct in i['behavior']['processes'][0]['calls']:
    for k,v in dct.items():
        if k == 'api' and  v =="interesting":
            print 'api',dct['api'] 
```

或者，如果每个列表有多个部分，

```
for proc in i['behavior']['processes']:
    for call in proc['calls']:
        print 'api =>',call['api'] # a if here
        for args in call['arguments']:
            print '   argument.name =>',args['name'] # and another if here should do the trick. 
```

**为什么会出现错误**
试试下面的代码，你就会明白你做错了什么

```
print type(i['behavior']['processes'])
print type(i['behavior']['processes'][0])
print type(i['behavior']['processes'][0]['calls'])
print type(i['behavior']['processes'][0]['calls'][0]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T03:14:28.523

您在问题中作为初学者给出的内容将不起作用，因为您没有遍历列表中的元素，这些元素分别是键`"processes"`和的值`"calls"`。也就是说，您将需要更多类似的东西

```
for proc in object ['processes']:
    for call in proc ['calls']:
        if call ['api'] == "interesting":
            fname = None
            for arg in call ['arguments']:
                if arg ['name'] == "FileName":
                    fname = arg ['value'] 
```

然后您要查找的文件名将位于`fname`. 这没有错误检查，因为我不知道您的数据来自哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T03:13:28.267

```
object['behavior']['processes']['calls'] 
```

是一个列表，而不是字典。

# php - 如何在php标签之外输入php echo

> ID：15330496
> 
> 赞同：0
> 
> 时间：2013-03-11T02:58:47.363
> 
> 标签：php

我有这个在特定网址输入 selected="" 的 php 代码。我需要 selected="" 插入到我的 html 中。

```
 <?php
    $uri = $_SERVER['REQUEST_URI'];
    if ( strpos($uri,'retailers/amazon/?sort=2') !== false ) {
       echo 'selected=""';
    } else {
       echo 'test';
    }
    ?> 
```

这是 html，我需要插入 selected=""... 这样的东西

```
<option selected="" value="retailers/amazon/?sort=2">Newest to Oldest</option> 
```

...

```
<select onchange="window.location=this.value;">
  <option value="">Select</option>
  <option selected="" value="retailers/amazon/?sort=2">Newest to Oldest</option>
  <option value="retailers/amazon/?r_sortby=highest_rated&r_orderby=desc">Success Rate: High to Low</option>
  <option value="retailers/amazon/?r_sortby=highest_rated&r_orderby=asc">Success Rate: Low to High</option>
  <option value="retailers/amazon/?sort=0">Most Comments</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:11:26.793

这个怎么样...

```
<?php
$uri = $_SERVER['REQUEST_URI'];
$sort2 = strpos($uri, 'retailers/amazon/?sort=2');
?>

<option <?php echo ($sort2 === false? '' : 'selected=""'); ?> value="retailers/amazon/?sort=2">Newest to Oldest</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T03:13:06.573

我假设您正在尝试访问标签`echo`之外的命令和某处`php``html`

这是不可能的，但有一个解决方案。

所以你可以试试这个选项。

```
<select onchange="window.location=this.value;">
  <option value="">Select</option>
  <option selected="?php echo $uri?" </option>

</select> 
```

这意味着您正在使用该区`php`域内的代码`html`，您可以通过它访问每个变量`php`。

# javascript - 与使用简单的 Javascript 进行项目相比，像 Ember 或 Angular 这样的 Javascript 框架可能存在哪些缺点和优点？

> ID：15330505
> 
> 赞同：0
> 
> 时间：2013-03-11T03:00:02.290
> 
> 标签：javascript, backbone.js, angularjs, ember.js

我正在考虑为我的项目使用 Javascript 框架。但我很困惑，我应该使用框架还是使用简单的 Javascript。此外，我还想说一点，我对 Javascript 的经验并不多。对于仍然处于 Javascript 初学者水平的人，您有什么建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T03:21:57.120

## 关于初学者的疑惑：

去年我开始使用 AngularJS 时，我处于 ​​JavaScript 初学者水平。学习它的基础知识真的很容易。更好的是，它可以帮助您用**很少的代码行**完成相当复杂的事情。您编写的大部分代码都是 AngularJS 所称的**指令**，这也是最可重用的部分。

一些高级概念可能难以理解并且需要一些时间，但总的来说，我会说**通过 AngularJS 的进步让我对 JavaScript 有了更好的理解**。

至少这是我的经验，而且**这篇文章的目的不是为了推销 AngularJS**。在我看来，学习一门编程语言，至少在大多数情况下，最好通过自己挖掘它的原始特性来完成。但是对于 JavaScript —— 以及它的所有怪癖—— 我发现**有一些东西来指导我**是非常有帮助的—— 在这种情况下，AngularJS。

## 关于项目框架：

当您想要拥有一个包含大量代码和交互的大型应用程序时，我发现框架对您有很大帮助。现在有一股 JavaScript 框架的热潮，所有这些都非常好。如果您想扩展 HTML 并进行声明式编程，可以使用**AngularJS**。如果您想在不同的抽象级别上工作，可以使用**Ember.js**。如果您想自己编写大部分实现，请使用**Backbone.js**。如果你正在做很多 GUI 的东西，**ExtJS**。这些框架中的大多数将帮助您编写更简洁、模块化和更可测试的代码，从长远来看，这将大大提高可维护性。

缺点可能是：

1.  学习曲线 - 但如果你处于初学者水平，那么你不应该担心这个。
2.  矫枉过正——对于某些项目，你真的不需要包含 500KB 的框架和库
3.  **不匹配**——我认为这可能是最重要的因素。例如，一些框架更适合视觉效果，如图表和动画，而另一些则更适合其他方面。

## 结论：

*   确定你想要达到的目标，
*   找到适合工作的工具，
*   框架/库（或者如果不需要）将有很大帮助

最后，更像是一般规则：

*   **不要因为对你来说太陌生而害怕做正确的事**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T03:09:02.167

图书馆可以非常好。它们可以帮助您对代码进行分段，它们可以帮助您更轻松地做很多事情。我已经开始发现骨干网对 AJAXy 网络应用程序特别有用。使用 JQuery，比使用 JQuery`$('#element').hide();`容易得多`document.getElementById('element').style.display = "none";`，而且 JQuery`.toggle();`甚至比这更好。在大多数情况下，它们也很容易为您处理跨浏览器问题。

从设计/架构的角度来看，最大的缺点是开销。一旦您开始使用上述库的库和插件，谁知道代码质量如何。

从个人发展的角度来看，最大的风险是您将开始使用库作为拐杖，并且永远不会费心去了解这些库*为什么*或*如何*做它们所做的事情。当我看到一个网页`<script>`的标题中有 15,000 个（夸张的）块时，我讨厌它们，它们可能利用了它们正在使用的所有插件和框架的 1/10 的力量。编写 5 到 10 行代码要比有一个额外的 HTTP 请求并加载整个 JS 模块只是为了使用它包含的一个函数要好得多。

我个人的建议是使用库，但始终努力理解它们在做什么，并挑战自己至少自己编写部分 JavaScript，直到你知道 JS 内部发生了什么，以及为什么它正在发生。一旦达到这一点，您将能够更好地评估库或插件是否真的是您需要的，或者您是否应该自己编写一些东西。

# c# - 命令执行期间遇到致命错误。在 C# 中，当我使用 Insert Into

> ID：15330506
> 
> 赞同：1
> 
> 时间：2013-03-11T03:00:03.123
> 
> 标签：c#, mysql, insert

当我完成编辑项目并单击保存时，它会导致错误。错误是：`Fatal error encountered during command execution` 详细信息会很棒。

```
 private void btnSave_Click(object sender, EventArgs e)
    {
        if (textBox1.Text == "")
        {
            MessageBox.Show("VIN is Empty!", "Don't leave it blank!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation, MessageBoxDefaultButton.Button1);
            textBox1.Focus();
        }
        else if (MessageBox.Show("Do Want To Save it?", "Update", MessageBoxButtons.YesNo, MessageBoxIcon.Question, MessageBoxDefaultButton.Button2) == DialogResult.Yes)
        {
            Initialize();
            connection.Open();
            MySqlCommand cmd = new MySqlCommand();
            cmd.CommandText = "Insert Into registration_form (VIN, Lst_name, Frst_name, Mddle_name, Sx, Hght, Wght, Address, Occupation, Brthday, Plceof_Birth, Cvl_Status, Nmeof_Father, Nmeof_Mother, Citizenship)" +
                "Values (@VIN, @Lst_name, @Frst_name, @Mddle_name, @Sx, @Hght, @Wght, @Address, @Occupation, @Brthday, @Plceof_Birth, @Cvl_Status, @Nmeof_Father, @Nmeof_Mother, @Citizenship)";
            cmd.Connection = connection;

            cmd.Parameters.Add("@VIN",MySqlDbType.VarChar).Value=textBox1.Text.ToUpper();
            cmd.Parameters.Add("@Lst_name",MySqlDbType.VarChar).Value=textBox2.Text.ToUpper();
            cmd.Parameters.Add("@Frst_name",MySqlDbType.VarChar).Value=textBox4.Text.ToUpper();
            cmd.Parameters.Add("@Mddle_name",MySqlDbType.VarChar).Value=textBox3.Text.ToUpper();
            cmd.Parameters.Add("@Sx",MySqlDbType.VarChar).Value=comboBox1.Text.ToUpper();
            cmd.Parameters.Add("@Hght",MySqlDbType.VarChar).Value=textBox6.Text.ToUpper();
            cmd.Parameters.Add("@Wght",MySqlDbType.VarChar).Value=textBox7.Text.ToUpper();
            cmd.Parameters.Add("@Address",MySqlDbType.VarChar).Value=textBox8.Text.ToUpper();
            cmd.Parameters.Add("@Occupation",MySqlDbType.VarChar).Value=textBox9.Text.ToUpper();
            cmd.Parameters.Add("@Brthday",MySqlDbType.VarChar).Value=dateTimePicker1.Text.ToUpper();
            cmd.Parameters.Add("@Plceof_Birth",MySqlDbType.VarChar).Value=textBox11.Text.ToUpper();
            cmd.Parameters.Add("@Cvl_Status",MySqlDbType.VarChar).Value=textBox5.Text.ToUpper();
            cmd.Parameters.Add("@Nmeof_Father",MySqlDbType.VarChar).Value=textBox10.Text.ToUpper();
            cmd.Parameters.Add("@Nmeof_Mohter",MySqlDbType.VarChar).Value=textBox12.Text.ToUpper();
            cmd.Parameters.Add("@Citizenship", MySqlDbType.VarChar).Value = textBox13.Text.ToUpper();
            MessageBox.Show("Record has been successfully saved", "Saved");
            cmd.ExecuteNonQuery();
        }
        FillListView();
             }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-16T05:33:58.797

设置它来解决你的问题：

```
cmd.CommandTimeout = 5000000 
```

# javascript - AngularJS $http 范围问题

> ID：15330508
> 
> 赞同：0
> 
> 时间：2013-03-11T03:00:11.357
> 
> 标签：javascript, angularjs

我有一个引导对话框，用户可以在其中输入运输跟踪号。2 个按钮 - 一个取消，一个发货。控制器与此相关联。成功后，我想将该订单的状态（在 ng 重复列表中）更改为“已发货”。但它不起作用。我在这里做错了什么？

带有对话框子控制器的控制器：

```
function ManageOrderCtrl($scope, $http, $dialog) {

  // Setup some dialog options for shipping popup
  var dialogOptions = {
    controller: 'ShipOrderCtrl',
    templateUrl: '/partials/order/_ship.html'
  };

  // Shipping action - launches popup for tracking #
  $scope.shipOrder = function(order){
      var itemToEdit = order;
     $dialog.dialog(angular.extend(dialogOptions, {
        resolve: {
          order: angular.copy(itemToEdit)
        }
      }
    ))
    .open()
     .then(function(result) {
      if(result) {
       angular.copy(result, itemToEdit);
       }
       itemToEdit = undefined;
     })
  };
}

// Shipping controller (injected in ship dialog)
function ShipOrderCtrl($scope, $http, order, dialog){
  $scope.order = order;

  // Called when they click "mark as shipped" on dialog
  $scope.ship = function() {

    dialog.close($scope.order);

     //This works fine from here
     //$scope.order.status = 'shipped';

    $http.put('api/order/ship/' + $scope.order._id, { 
      tracking: $scope.order.tracking 
    })
    .then(function(response) {

      // This doesn't work
      $scope.order.status = 'shipped';
    });
  };
  // Cancel the dialog
  $scope.close = function(){
    dialog.close(undefined);
  }; 
} 
```

看法：

```
<div ng-conroller="ManageOrderCtrl">
   <div ng-repeat="order in orders">
     <span class="status">{{ order.status }}</span>
     <a href="#"  ng-click="shipOrder(order)"></a>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:09:37.367

好的 - 这是 Angular Bootstrap 对话框中的一个错误 - 在 0.2.0 中修复 - 我使用的是 0.1.0

# java - 如何在 JFace 向导中动态创建控件

> ID：15330509
> 
> 赞同：2
> 
> 时间：2013-03-11T03:00:15.007
> 
> 标签：java, eclipse-plugin, swt, eclipse-rcp, jface

我有一个 jFace 向导，我正在使用它来创建一个新的项目类型 eclipse 插件。如下图所示，我在左侧有一个 treeviewer，在右侧有一个 SWT 组。我想要的是当用户从 treeviewer 中选择一个项目时，我应该能够在右侧 SWT Group 上创建动态控件。假设用户选择测试一，在右侧我应该能够在右侧创建一些控件，如标签、文本和几个单选按钮，同样，如果用户选择测试二，我应该能够在右侧创建动态控件。 ![在此处输入图像描述](../Images/803b2c8f197cde528eece16d5c469f82.png)

目前我尝试了以下代码：

```
tree.addSelectionListener(new SelectionAdapter() {
     @Override
 public void widgetSelected(SelectionEvent e) {
     for (int i = 0; i < selection.length; i++) {

     String tempStr = selection[i].toString();
     tempStr = tempStr.replaceAll("TreeItem \\{", "");
     String finalStr = tempStr.replaceAll("\\}", "");

         if (finalStr.equals("Test One")) {
             Button btn = new Button(g2, SWT.NONE); //g2 is right side group

             btn.setText("Blaaaa");

             btn.setVisible(true);
             container.redraw();
         }

} 
```

但是当我跑步时，我看到右组没有任何变化。谁能指导我做错了什么？任何指针都将不胜感激，因为我是 Eclipse 开发和 SWT 的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T06:51:27.270

您可能没有在`g2`组上设置布局。这是控件未显示的常见原因。您还可以尝试使用`g2.layout()`以确保在创建新控件后正确布局它们。

此外，您可以考虑使用 a [`StackLayout`](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fcustom%2FStackLayout.html)，这样一旦您创建了一组控件，您就可以一次将它们全部隐藏，而不是在选择更改时销毁它们。这通常很有用，因此如果用户返回之前的选择，他们会发现他们输入的数据在切换选择时处于相同状态。[这是一个例子](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet249.java)。

# javascript - 如何定义全局模板帮助函数？

> ID：15330515
> 
> 赞同：10
> 
> 时间：2013-03-11T03:00:33.803
> 
> 标签：javascript, meteor, spacebars, meteor-helper

在许多模板中我想使用相同的功能，但它们必须在每个模板中定义。像这样：

```
function getNodesById(id){
    return collection.find({sid:id}).fetch();
}

Template.navigation.getNodesById= function(id){
    return getNodesById(id);
}

Template.body.getNodesById= function(id){
    return getNodesById(id);
} 
```

html:

> ```
> <Template name="navigation">
> ... 
> {{#each getNodesById '1'}}
> ...
> {{/each}}
> ...
> </Template>
> <Template name="body">
> ...
> {{#each getNodesById '1'}}
> ...
> {{/each}}
> ...
> </Template>
> ...
> <Template name="...">
>  .....
> </Template> 
> ```

有什么方法可以定义全局模板函数而不是模板？就像它：在javascript中：

```
    已定义全局 tempele.functionA = function(...){
         返回 ...
    }

```

在 html 中：

> ```
> <Template name ="a">
>    {{#each  functionA ...}}
>    {{/each }}
> </Template>
> 
> <Template name ="b">
>    {{#each  functionA ...}}
>    {{/each }}
> </Template>
> <Template name="...">
>     {{ #..  functionA ...}}
>         ....
>      {{/...}}
> </Template > 
> ```

我可以这样做吗？我希望我清楚地描述了这个问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T12:26:25.143

您可以直接使用把手注册您的助手。这是我用来显示当前用户的电子邮件地址的：

```
Handlebars.registerHelper('currentUserName', function () {
    var user = Meteor.user();
    if (_.isUndefined(user) || _.isNull(user)) {
        return new Handlebars.SafeString("<i class='icon-spin icon-spinner'></i> Login");
    }
    return user.emails[0].address;
}); 
```

在我刚刚调用的任何模板`{{currentUserName}}`中。对你来说

```
Handlebars.registerHelper('getNodeById', function (id) {
    return collection.find({sid:id}).fetch();
}); 
```

附带说明：看看你想如何使用它，你可能对 Meteor 的想法有误。Meteor 是数据驱动的——不要试图强制执行流驱动的范例。如果您的模板中缺少某些数据，您应该更改数据源，而不仅仅是在模板中获取它。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-03-04T07:08:03.760

从 Meteor 1.0 开始，[此处](http://docs.meteor.com/api/templates.html#Template-registerHelper)的文档指导开发人员使用`Template.registerHelper`以定义全局可用的模板助手。

所以在这个问题的情况下，正确的代码格式是这样的：

```
 Template.registerHelper("getNodesById", function(id) {
        return collection.find({sid: id});
    } 
```

然后，您可以通过以下两种方式在任何模板中引用此模板助手：

```
 {{getNodesById '1'}} 
```

或者

```
 {{#each getNodesById '1'}}
      ...
    {{/each}} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-23T17:04:00.090

对于 Meteor 0.8 或更高版本，使用`UI.registerHelper`就可以了。

# hibernate - 在休眠中将属性映射到不同表的列

> ID：15330518
> 
> 赞同：1
> 
> 时间：2013-03-11T03:00:57.127
> 
> 标签：hibernate, mapping

我的域模型中有一组固定的类，Oracle 数据库模型也是固定的。现在的目标是创建适当的映射文件。请指教。

公共类 ElementC 扩展 AuditableEntityC 实现 Element{

```
private String name;
private String type;
private String model;
private String vendor;
private String hostName;
private String ipAddr;

private Properties properties; 
```

数据库中对应的表：

CREATE TABLE "TYPE" ("TYPE_ID" INTEGER NOT NULL , "NAME" VARCHAR2(200 CHAR) NOT NULL , "DESCR" VARCHAR2(500 CHAR), CONSTRAINT "ELEMENT_TYPE_PK" PRIMARY KEY ("TYPE_ID") ) ;

和

CREATE TABLE "ELEMENT" ("ELEMENT_ID" INTEGER NOT NULL , "TYPE" INTEGER NOT NULL , "NAME" VARCHAR2(200 CHAR) NOT NULL , "STATUS" VARCHAR2(20 CHAR), "VENDOR" VARCHAR2(200 CHAR), " HOSTURL" VARCHAR2(200 CHAR), "LAST_UPDATED_TIMESTAMP" TIMESTAMP , CONSTRAINT "ELEMENT_PK" PRIMARY KEY ("ELEMENT_ID")

) ;

在数据库中，元素表中的类型列是类型表的外键。

请注意，我的 ElementC.java 中的 type 属性是一个字符串，那么如何将其映射到 TYPE 表的 name 列。我无法更改表结构或 java 文件。

# python - NumPy 数组大小问题

> ID：15330521
> 
> 赞同：1
> 
> 时间：2013-03-11T03:01:06.973
> 
> 标签：python, numpy, scipy

我有一个`NumPy` `array`大小为 (3, 3) 的。当我打印`array`内部`__main__`模块的形状时，我得到`(3, 3)`. 但是我将这个数组传递给一个函数，当我在函数中打印它的大小时，我得到了`(3, )`.

为什么会这样？

另外，元组的最后一个元素未指定是什么意思？也就是说，`(3, )`首先不应该是一个无效的元组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:13:02.187

像这样的元组：`(3, )`意味着它是一个具有单个元素的元组（在这种情况下是单个维度）。这是正确的语法 - 带有尾随`,`，因为如果它看起来像这样：`(3)`那么 Python 会将其解释为用括号括起来的数字，而不是元组。

查看实际代码会很有用，但我猜您并没有传递整个数组，而只是传递其中的一行（或一列）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T03:14:27.597

很难说为什么一个函数调用会在没有看到代码的情况下重塑一个 numpy 数组。

关于第二个问题，这是单元素元组的标准表示法——逗号，而不是括号，是使它成为元组的原因。考虑一下`(3+3) * 2`- 如果括号构成一个元组，那么整个表达式将是无效的，因为你不能将一个元组乘以一个 int。更一般地说，Python 允许在所有地方使用尾随逗号：

```
>>> (3,3,) == (3,3)
True 
```

这也适用于列表、字典和函数调用——基本上，在 Python 需要逗号分隔元素的任何地方，尾随逗号都是有效的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T03:15:40.190

回答你的第二个问题：

Python 中的元组是 n 维的。那就是你可以有一个`1-2-3-...-n`元组。由于语法，您表示`1-dimensional`元组的方式是`('element',)`尾随逗号是强制性的。如果你有，`('element')`那么这只是括号内的表达式。所以`(3) + 4 == 7`，但是`(3,) + 4 == TypeError`。同样地`('element') == 'element'.`

要回答您的第一个问题：

你很可能在传递数组时做错了什么。NumPy 数组没有理由在不对数组进行某种类型的突变的情况下歪曲自己。

# java - HashSet 包含对象的副本

> ID：15330522
> 
> 赞同：0
> 
> 时间：2013-03-11T03:01:13.167
> 
> 标签：java, data-structures, set, hashset, breadth-first-search

我有一个带有成员 x 和 y 的 Point 类对象。我想检查一个 Point 对象是否在我的“已访问”HashSet 中，但是当我检查时，我创建了一个具有当前值 x 和 y 的新对象。即使具有这些值的点在集合中，它也会返回 false，我猜是因为它不是完全相同的对象。如何检查集合是否包含具有相同 x 和 y 的点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:02:42.597

覆盖**equals()**方法以实际检查**Point**内的**x**和**y的值**

# perl - 为什么“print readdir(DIR_HANDLE);”会弹出很多文件？

> ID：15330524
> 
> 赞同：1
> 
> 时间：2013-03-11T03:01:27.610
> 
> 标签：perl

我`readdir(DIR)`用来读取文件，但是当我使用

```
$file = readdir(DIR);
print $file;
print "\n";
sleep(2); 
```

它将打印一次文件；

但是当我使用

```
print readdir(DIR);
print "\n";
sleep(2); 
```

它弹出许多文件

它出什么问题了？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:23:40.053

`readdir`不读取文件。它扫描目录以查找下一个目录列表。

你可以在`perldoc`这里查看它：[readdir](http://perldoc.perl.org/functions/readdir.html)

它只打印一个带有您声明的文件的原因`$file`是因为它是一个标量值。它只会从目录句柄中读取一次并返回一个列表。

更常见的是，当您想从整个目录中读取数据时，您将其分配给一个列表，该列表将`readdir`返回，从而在您的第二个示例中打印所有目录列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:39:05.233

`readdir`在标量上下文中评估时返回下一个文件（或在读取最后一个文件后返回 undef）。

```
my $file = readdir($fh); 
```

标量赋值运算符在标量上下文中评估其 RHS 操作数。

* * *

`readdir`在列表上下文中评估时返回剩余的文件。

```
my @files = readdir($fh); 
```

`print`在列表上下文中评估其参数列表。

# c++-cx - 这个线程在 C++/CX 中的工作原理是什么？

> ID：15330526
> 
> 赞同：2
> 
> 时间：2013-03-11T03:01:35.537
> 
> 标签：c++-cx

这是代码：

```
//statement 1
auto task1 = ref new WorkItemHandler([&](IAsyncAction^ task2)
{
    //statement 2
    if (task2->Status == AsyncStatus::Canceled)
    {
            //statement 3
    }
    Dispatcher->RunAsync(CoreDispatcherPriority::High,    //statement A
            ref new DispatchedHandler(
            [=]()
    {
            //statement 4                                  
    }));
    }
);
//statement 5
IAsyncAction ^ thread = Windows::System::Threading::ThreadPool::RunAsync(task2);  //statement B
//statement 6 
```

我想知道这个线程的工作。

标记为 1-6 的语句以什么顺序和何时执行？

而在 lambda 表达式中，task2 参数从哪里接收值（上面的语句 2）？

标记为 A 和 B 的语句是做什么的？它们之间有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:13:31.713

在您方法的当前实现中，语句 1 将首先运行。这基本上是创建一个新对象 WorkItemHandler，它封装了包含语句 2、3、4 和 A 的 lambda。

但是，显示的代码中的任何内容都不会导致执行此 lambda，因此语句 2、3、4 或 A 绝不会执行。

下一个将执行的语句是 5，它将安排 task2（我看不到它的定义）在线程池线程上运行。接下来将执行语句 6 或 task2，因为它们发生在不同的线程上，这可能异步发生。

语句 A 导致创建的 DispatchedHandler（其中包含 lambda 封装语句 4）在 STA (UI) 线程上运行。这是将回调编组回 UI 线程的一种方法，如果语句 4 将修改某些 UI 或调用 UI 绑定类上的方法，这是必要的。未能封送回 UI 线程可能会导致 WrongThreadException。

语句 B 使 task2 在 ThreadPool 线程上运行。与 UI 线程不同，这是一个位于多线程单元 (MTA) 中的任意工作线程。这适用于不需要访问或修改 UI 的情况（例如执行计算密集型处理）。

# .htaccess - 如何使用 .htaccess 停止从子域重定向？

> ID：15330527
> 
> 赞同：0
> 
> 时间：2013-03-11T03:02:01.217
> 
> 标签：.htaccess, redirect, subdomain

我有一个域“domain.com”和子域“sample.domain.com”，与两者相关的所有文件都存储在`domain.com/folder`. 如何使用 .htaccess 防止来自“sample.domain.com”的请求转到`domain.com/folder/index.php?title=sample`？

这是我目前在 .htaccess 文件中使用的内容：

```
RewriteEngine on
 RewriteCond %{http_host} .
 RewriteCond %{http_host} !^www.domain.com [NC]
 RewriteCond %{http_host} ^([^.]+)\.domain.com [NC]
 RewriteRule ^(.*) http://www.domain.com /folder/index.php?title=%1 [R=301,L,QSA] 
```

但是有一件事 - 重定向是外部的（浏览器转到新链接），我需要在服务器端重定向它，以便用户认为他实际上是在使用子域。我能做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:13:06.400

更改此行：

```
RewriteRule ^(.*) http://www.domain.com /folder/index.php?title=%1 [R=301,L,QSA] 
```

至

```
RewriteRule ^(.*) /folder/index.php?title=%1 [L,QSA] 
```

该`R`标志告诉重写引擎重定向，并且`http://www.domain.com`在规则的目标中包含 也是一个隐式重定向。

# templates - extjs xtemplate过滤空白行

> ID：15330538
> 
> 赞同：0
> 
> 时间：2013-03-11T03:03:38.420
> 
> 标签：templates, extjs, filter, blank-line

我正在使用以下 Xtemplate 按类别过滤掉项目（请参阅下面“容纳”它的视图/面板）：

```
itemTpl: new Ext.XTemplate(
    '<tpl for=".">',
        '<tpl if="category === \'vegetable\'">',
            '<a href="" target="">{str}</a>',
        '</tpl>',
    '</tpl>'), 
```

它正在按预期过滤（嗯，至少部分过滤）。

我有以下商店：

```
Ext.define("Produce.store.List", {
    extend: 'Ext.data.Store',
    alias: 'store.List',
    config: {
        model: 'Produce.model.Food',
        sorters: 'category',
        grouper: function(record) {
            return record.get('category')[0];
        },
        data: [
        { category: 'fruit', str: 'tomato'},
        { category: 'fruit', str: 'green bean'},
        { category: 'vegetable', str: 'celery'},
        { category: 'vegetable', str: 'sprouts'},
        { category: 'fruit', str: 'squash'},
        { category: 'fruit', str: 'snap peas'},
        { category: 'vegetable', str: 'rhubarb'},
        { category: 'vegetable', str: 'cabbage'}

        ]
    }
}); 
```

Xtemplate 在以下视图/面板中呈现：

```
Ext.define('Produce.view.Vegetable', {
    extend: 'Ext.tab.Panel',
    requires: ['Produce.model.Food'],
    config: {
        tabBar: {
            docked: 'top',
            ui: 'neutral',
            layout: {
                pack: 'center'
            }
        },
        items: [{
            title: 'Produce',
            layout: Ext.os.deviceType == 'Phone' ? 'fit' : {
                type: 'vbox',
                align: 'center',
                pack: 'center'
            },
            cls: 'demo-list',
            items: [{
                width: Ext.os.deviceType == 'Phone' ? null : 300,
                height: Ext.os.deviceType == 'Phone' ? null : 500,
                xtype: 'list',
                store: 'List',
        itemTpl: new Ext.XTemplate(
        '<tpl for=".">',
            '<tpl if="category === \'vegetable\'">',
                '<a href="" target="">{str}</a>',
            '</tpl>',
        '</tpl>'),
               variableHeights: false
            }]
    }
}); 
```

当我运行这个时，只有商店中的蔬菜会显示在面板中——这很好——但是在渲染列表中过滤掉水果项目的地方也会显示空白行——这不是很好。（类似地，在我的“水果”视图中，水果会根据需要显示，但是在有蔬菜的地方，会出现空白行）。

我怎样才能摆脱这些空白行（这是一个问题，因为我列表中的水果和蔬菜只是为了让应用程序正常工作，并且是一个填充物来表示将被分类为的大量记录我的实际应用程序）。我尝试使用 Ext.IsEmpty 并按 null 过滤，但这些都没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:18:44.550

视图运行良好：它为每条记录显示一行。您应该尝试将过滤后的商店添加到列表中。

查看[Sencha Touch 文档](http://docs.sencha.com)中的[Ext.util.Filter](http://docs.sencha.com/touch/2-1/#!/api/Ext.util.Filter)。

这将解决您的问题！

# c# - (-) 转换方法中使用的符号

> ID：15330542
> 
> 赞同：10
> 
> 时间：2013-03-11T03:04:29.137
> 
> 标签：c#

我正在浏览一些 C# 代码并遇到了这一行：

```
Matrix[i, j] = Convert.ToInt32(grab[i, j] - '0'); 
```

( - ) 究竟是做什么的？

如果有的话，另一种写法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T03:06:39.053

`-`（减号）与它一直做的完全一样——减法。这里发生的是从字符中减去零字符`'0'`代码`[i,j]`。这会将数字字符转换为相应数字的整数值。例如，如果您计算

```
char digitChar = '7';
int digitVal = digitChar - '0'; 
```

的值为`digitVal`七。

# php - Typeahead 输入字段和查询通过 AJAX 传递给 PHP

> ID：15330543
> 
> 赞同：2
> 
> 时间：2013-03-11T03:04:37.107
> 
> 标签：php, ajax, bootstrap-typeahead

我正在将 Twitter Bootstrap Typeahead 用于自动完成字段。

**最终状态目标：**用户首先在字段 1 中输入详细信息。当他们在字段 2 中输入详细信息时，ajax 在将查询写入 PHP 文件时传递查询，该文件根据也输入字段 1 的内容查询数据库。

如何将来自字段 2 的查询和字段 1 的内容传递给 PHP 文件并访问它们。

这是我到目前为止所拥有的：

**HTML 文件**：

```
<div class="field1">
    <input type="text" id="field1" data-provide="typeahead" name="field1">
</div>
<div class="field2">
    <input type="text" id="field2" data-provide="typeahead">
</div>

<script src="js/jquery-1.9.1.min.js"></script>
    <script src="js/bootstrap.js"></script>
    <script>
$(function() {
            $("#field2").typeahead({
                source: function(query, process) {
        var textVal=$("#field1").val();
                    $.ajax({
                        url: 'field2.php',
                        type: 'POST',
                        data: 'query=' + query,
                        dataType: 'JSON',
                        async: true,
                        success: function(data) {
                            process(data);
            console.log(textVal);
                        }
                    });
                }
            });
        });
    </script> 
```

**PHP文件：**

```
if (isset($_POST['query'])) {
$db_server = mysql_connect("localhost", "root", "root");
mysql_select_db("db_test");

$query = $_POST['query'];
$other = '**This needs to be field 1**';

$sql = mysql_query("SELECT * FROM table WHERE row1 LIKE '%{$query}%' AND row2 = '$other'");
$array = array();

while ($row = mysql_fetch_assoc($sql)) {
    $array[] = $row['row1'];
}

echo json_encode($array);} 
```

目前，查询部分完美运行并返回结果（控制台也显示来自'Field1'的值。只需将该值同时获取到php文件中！

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T03:12:40.403

如果我理解正确，您希望将字段 1 和 2 的值都解析为同一个 AJAX 调用。这就是你的做法。

```
<script>
$(function() {
  $("#field2").typeahead({
    source: function(query, process) {
      var textVal=$("#field1").val();
      $.ajax({
        url: 'field2.php',
        type: 'POST',
        data: 'query=' + query + '&field1=' + textVal,
        dataType: 'JSON',
        async: true,
        success: function(data) {
          process(data);
          console.log(textVal);
        }
      });
    }
  });
});
</script> 
```

现在你只需在你的 PHP 文件中创建另一个 $_POST['field1'] 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T03:20:14.450

```
var userQuery = $('#ID of query input element').val(); 
var field1 = $('#ID of input 1 element').val();
$.ajax({
type: "POST",
url: '',
data: {query: QueryVariable, input1: input1variable},
success: function(data) {
        // code within this block
}, 
error: function() {
    alert('System Error! Please try again.');
},
complete: function() {
    console.log('completed')
} 
```

}); // ***END $.ajax 调用

# powershell - 有没有办法限制 Powershell 中多文本框中的最大行数？

> ID：15330544
> 
> 赞同：1
> 
> 时间：2013-03-11T03:04:44.800
> 
> 标签：powershell

我想知道是否有办法将 Multiline-TextBoxt 中的文本行/行限制为 .Net 中的 200？我试图设置框中允许的行数。

$userTextBox.Lines.Length = ?

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T07:44:11.327

如果没有内置方法，那么您可以尝试使用事件处理程序自行限制它，如果当前按下的键是 Enter 键 (13)，则忽略按键：

```
$textbox_KeyDown={

    if($_.KeyValue -eq 13 -and $textbox.Lines.Count -ge 200) 
    {
       $_.SuppressKeyPress=$true
    }
} 
```

# javascript - easeljs 棕褐色和灰度

> ID：15330546
> 
> 赞同：2
> 
> 时间：2013-03-11T03:05:10.383
> 
> 标签：javascript, easeljs

我正在考虑使用 EaselJS 通过 JavaScript 进行一些图像处理，有没有人有任何示例说明如何使用该库对图像应用棕褐色和灰度滤镜？ [http://www.createjs.com/#!/EaselJS](http://www.createjs.com/#!/EaselJS)

如果您想知道，我一直在寻找许多替代库，但似乎没有一个在浏览器中也能正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T05:20:30.517

**使用 createjs.ColorMatrixFilter() 将颜色过滤器应用于位图**

以下是灰度和棕褐色的过滤器：

```
var Grayscale = new createjs.ColorMatrixFilter([
        0.30,0.30,0.30,0,0, // red component
        0.30,0.30,0.30,0,0, // green component
        0.30,0.30,0.30,0,0, // blue component
        0,0,0,1,0  // alpha
]);
myEaselBitmap.filters = [Grayscale];

var Sepia = new createjs.ColorMatrixFilter([
    0.39, 0.77, 0.19, 0, 0, // red component
    0.35, 0.68, 0.17, 0, 0, // green component
    0.27, 0.53, 0.13, 0, 0, // blue component
    0, 0, 0, 1, 0  // alpha
]);
myEaselBitmap.filters = [Sepia]; 
```

# visual-studio-2010 - 尽管匹配运行时库 (/MD)，但 LNK2005 错误

> ID：15330548
> 
> 赞同：0
> 
> 时间：2013-03-11T03:05:12.727
> 
> 标签：visual-studio-2010, c++-cli, clr, msvcrt, lnk2005

我正在尝试在 VS2010 下在包含 C# 和 C++ 项目的 CLI/C++ 解决方案中使用[OFELI库。](http://ofeli.net/download.html "欧菲力")简而言之，UI 是用 WPF 编写的，并且计算是在支持 CLR 的 C++ 中完成的。

我下载了[OFELI](http://ofeli.net/download.html "欧菲力")源，将解决方案转换为VS2010格式，并能够成功构建静态库。但是，在链接到 lib (ofeli-debug.lib) 时会导致大量 LNK2005 错误；

```
error LNK2005: "private: static class std::locale::_Locimp * __cdecl std::locale::_Getgloballocale(void)" (?_Getgloballocale@locale@std@@CAPAV_Locimp@12@XZ) already defined in msvcprtd.lib(MSVCP100D.dll) 
```

我注意确保 lib 是使用 /MDd 设置构建的，就像项目一样。如果我将项目设置为忽略 msvcprtd.lib，我最终会遇到大量 LNK2019 错误，正如我所料。

通过实验，我发现我可以从非 CLR C++ 测试项目中成功链接和使用 ofeli 库，但不能从启用 CLR 的项目中链接和使用（即使在启用 CLR 支持的情况下编译 ofeli 也是如此）。

下面是一个在我的 CLR 项目中因许多 LNK2005 错误而失败的简单代码片段。

```
#include "stdafx.h"
#include <OFELI.h>

using namespace OFELI;

int _tmain(int argc, _TCHAR* argv[])
{
    Mesh(10, 1); // Instance an object from the OFELI namespace
    return 0;
} 
```

我错过了什么？

# internet-explorer-8 - Angular JS $http 请求未到达 ie8 中的服务器

> ID：15330549
> 
> 赞同：-1
> 
> 时间：2013-03-11T03:05:17.110
> 
> 标签：internet-explorer-8, angularjs

我在 ie8 上使用 $http 时遇到问题。在我刷新之前，请求不会到达服务器。回到同一个链接仍然有同样的问题，直到我再次点击刷新。

奇怪的是，如果 Web 服务器在 LAN 上并且向 LAN 中的服务器发出请求，它工作正常。但是如果网络服务器是远程托管的，它就不起作用了！

这是代码：

**索引.html**

```
{{test}} 
```

**控制器**

```
app.controller(
    "TestController",
    function( $scope, $http) {
        var url = '/test/get_data';
        $http.get(url).success(function(data) {
            $scope.test = data;
        });
    }
); 
```

我收到此错误：**TypeError：对象不支持此属性或方法未定义**

我之前准备了一个 JSFiddle，但是 JSFiddle 在 ie8 中被破坏了，所以我不在这里提供它。

不幸的是，我没有可以与您共享的远程服务器。

**编辑** 以前我使用了一个外部 url，它在 ie 中给了我“拒绝访问”错误，因为下面的一个答案提到了同源策略。但这不是我原来的问题。当请求来自同一来源时，我仍然遇到上述问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:37:40.637

这是一个跨域请求，由于[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy) ，在 ajax 中是不允许的。

有两种解决方案
1\. [JSONP](http://en.wikipedia.org/wiki/JSONP) : 它是一种使用javascript回调机制处理跨域ajax请求的跨浏览器方式
2\. [CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) : 它是HTML5标准，它被除IE之外的大多数现代浏览器实现

Mongodb 实验室不支持 jsonp，因为它支持 CORS，这就是为什么您的请求在 IE 中失败并在 Chrome 和其他浏览器中工作的原因。

根据[这篇文章](https://support.mongolab.com/entries/20676708-JSONP-support)，他们没有任何支持 jsonp 的计划，所以我不认为有办法在 IE 中实现这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:22:47.410

所以我找到了解决方法......希望这可以帮助任何遇到这个问题的人

1.  Angular 脚本需要在 jQuery 之后加载。我没有这个，因为我使用的 Yii 框架会自动加载 jQuery，并且 jQuery 之后没有包含 angular。
2.  所有控制器功能都需要在主体部分的末尾（就在关闭之前）
3.  更新到 angular 1.0.5 似乎可以解决问题。问题发生在 1.0.4 以上所有技巧。我认为与修复[791804bd有关](https://github.com/angular/angular.js/commit/791804bdbfa6da7a39283623bd05628a01cd8720)

# python-2.7 - 免疫调试器 PyCommands：未能找到主要功能

> ID：15330554
> 
> 赞同：2
> 
> 时间：2013-03-11T03:05:49.930
> 
> 标签：python-2.7

这里比较简单的问题。我最近为 PyCommands 功能安装了免疫调试器，但是每当我尝试编写自己的 pycommand 并在免疫中执行它时，它都会给我错误消息“无法找到主要功能”。奇怪，考虑到我确实写了一个 main(args) 函数。我尝试使用的代码如下：

```
#!usr/bin/env python

from immlib import *

def main(args):
    imm = Debugger()
    return "[*] Command successfully executed." 
```

我看不出这有什么问题，因为我只关注了 Immunity 中包含的示例脚本。我还检查了 !list ，它在可用命令列表中显示了我的命令，但是当我尝试从那里运行它时，它仍然会引发错误。有谁知道这可能是为什么？

操作系统：Windows XP SP3 x86 (VMWare)

Python 2.7.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:21:16.273

所以我只是想出了自己的问题。该命令的名称是“测试”。我猜 test 是保留字之类的，因为我将其重命名为 mycommand 并获得了所需的输出。如果其他人遇到这个免疫问题，我希望这会有所帮助。

# c# - WaitHandle 是最佳选择吗？

> ID：15330559
> 
> 赞同：1
> 
> 时间：2013-03-11T03:07:17.090
> 
> 标签：c#, multithreading, asp.net-mvc-3, waithandle

我正在开发一个 MVC 应用程序，它在幕后使用一些 Windows 工作流来实现自动化。

我已经实现了一些代码来等待工作流完成。下面是一个示例应用程序，将问题归结为关键部分。

这个问题实际上与 WF 活动中正在进行的工作无关，而更多的是我如何等待它完成。

*家庭控制器.cs*

```
 public ActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public JsonResult ProcessRequest()
        {
            int[] arr = new int[0];

            var wh = new ManualResetEvent(false);
            var instance = new Activities.SampleCodeActivity();
            var args = new Dictionary<string, object>();
            args.Add("Limit", 25);
            var app = new WorkflowApplication(instance, args);
            app.Completed = resultArgs =>
            {
                var list = (List<int>)resultArgs.Outputs["Primes"];
                arr = list.ToArray();
                wh.Set();
            };
            app.Run();
            wh.WaitOne();
            return Json(arr);
        } 
```

*索引.cshtml*

```
 @{ ViewBag.Title = "Index"; }

<script src="../../Scripts/jquery-1.7.1.min.js"></script>
<script type="text/javascript">
    var tools = {};
    tools.processRequest = function () {
        $.ajax({
            url: "@Url.Action("ProcessRequest")", type: "POST",
            success: function (data) {
                alert(data);
            }
        });
    };
    $(document).ready(function () {
        tools.processRequest();
    });
</script>
<h2>Index</h2> 
```

*示例代码活动.cs*

```
public class SampleCodeActivity : CodeActivity
{
    public InArgument<int> Limit { get; set; }
    public OutArgument<List<int>> Primes { get; set; }
    private List<int> _list = new List<int>();
    protected override void Execute(CodeActivityContext context)
    {
        var limit = context.GetValue(Limit);
        checkForPrimes(limit);
        context.SetValue(Primes, _list);
    }

    private void checkForPrimes(int limit)
    {
        for (var x = 2; x <= limit; x++)
            if (isPrime(x)) _list.Add(x);   
    }
    private bool isPrime(int value)
    {
        for (var x = value - 1; x > 1; x--)
            if (value % x == 0) return false;
        return true;
    }
} 
```

我的问题是关于控制器操作中的 WaitHandle/ManualResetEvent。有没有更好的方法来使用任务等来实现这一点？我正在使用.NET 4.5。

如果没有 WaitHandle，Action 会在工作流完成之前返回。

我熟悉 WaitHandle，但感觉就像一个笨拙的解决方案。

任何帮助/指导表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T09:37:51.280

`WaitHandle`是一个抽象类，提供了在操作系统级别等待访问共享资源的能力。如果您希望在此级别同步访问，则无法避免使用它。但是，正如您所提到的，使用类似的东西`ManualResetEvent`可能会中断您的代码流，从而在出现问题时难以阅读和诊断。

.NET 框架中最近添加的许多关于线程的功能都试图解决这个问题。在 .NET 4 中`Task`引入了 的概念，这可以在一定程度上简化代码，而 C# 5 在该基础架构之上构建以引入`async/await`关键字。`ManualResetEvent`下面的代码是一个简单的控制台应用程序，显示了使用、`Task`和实现您想要的三种方式`async/await`。

重要的是要意识到这三个都在某种程度上使用该类来同步线程，但是使用's 和`WaitHandle`提高了可读性。`Task``async/await`

```
class Program
{
    static void Main(string[] args)
    {
        List<int> results;

        //Using raw Wait Handle
        ManualResetEvent handle = new ManualResetEvent(false);
        Thread thread = new Thread(o =>
            {
                //Long running process
                results = LongRunningTask();
                handle.Set();
            });
        thread.Start();
        handle.WaitOne();

        Console.WriteLine("Thread completed");

        //Using Tasks
        Task<List<int>> task = Task<List<int>>.Factory.StartNew(LongRunningTask);
        results = task.Result;
        Console.WriteLine("Task completed");

        //Using async/await
        results = LongRunningTaskAsync().Result;
        Console.WriteLine("Async Method completed");

        Console.ReadLine();
    }

    public static List<int> LongRunningTask()
    {
        Thread.Sleep(5000);
        return new List<int>();
    }

    public static async Task<List<int>> LongRunningTaskAsync()
    {
        return await Task<List<int>>.Factory.StartNew(LongRunningTask);
    }
} 
```

# asp.net-mvc-4 - 如何使用 ASP mvc 4 模型类从一组数字开始一个 ID 值

> ID：15330560
> 
> 赞同：0
> 
> 时间：2013-03-11T03:07:41.037
> 
> 标签：asp.net-mvc-4

我想创建一个 ID 值可以从 8000 开始的类，这样它就不会与其他表/模型中的任何其他 ID 冲突。 **这是我的模型**

```
public class Employee
{

    [Required]
    [Range(8000,10000)]        
    public long Id { get; set; }

    [Required]
    [DataType(DataType.Text)]
    [Display(Name = "First Name")]
    public string FirstName { get; set; }

    [Required]
    [DataType(DataType.Text)]
    [Display(Name = "Last Name")]
    public string LastName { get; set; }

    [Required]
    [DataType(DataType.PhoneNumber)]
    [Display(Name = "Phone ")]
    public string PhoneNumber { get; set; }

    public virtual Address Address { get; set; }        

    [DataType(DataType.EmailAddress)]
    [Display(Name = "E-mail")]
    public string Email { get; set; }

    [DataType(DataType.Date)]        
    [Display(Name = "Date of Birth", Prompt="MM/DD/YYYY")]                
    public DateTime dateOfBirth { get; set; }

    public virtual IEnumerable<Availability> availability {get;set;} 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:57:08.223

模型属性不设置值 - 它们验证它们。如果您关心主键标识插入，请将您的键从整数更改为 GUID。设置和任意 8000 限制将严重限制未来的可扩展性和可移植性。

# php - 输入到 php 表单中的信息将保留在那里，直到提交

> ID：15330566
> 
> 赞同：0
> 
> 时间：2013-03-11T03:08:33.947
> 
> 标签：php, forms

我有一个表格，我希望有人输入的任何信息都保留在那里，直到他们发送信息或关闭网站。

我有一个使用 php include 放入不同页面的表单。当我移动到具有此表单的每个页面时，我希望已经从其他页面输入的信息仍然存在。这可能吗？

如果我使用以下代码重新加载页面，我可以获得保留在那里的信息：

```
$_SESSION['varname'] = $_POST['varname']; 
```

但我无法将信息保留在那里，因为我转到不同的页面并返回。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:30:32.717

在输入更改时使用 Ajax 设置 SESSION，这只是一个想法；

```
<script type="text/javascript">
  $('input').change(function(){
     var data = $('this').val();
     var url = 'setsessionhere.php';
     $.ajax({
       type: "POST",
       url: url,
       data: data
     });
  });
</script> 
```

并将您的会话变量放在您的输入值上：

```
<input type="text" value="<?php echo $_SESSION['varname']; ?>"/> 
```

希望你明白。

# mp3 - 不完整的远程文件 (mp3) ID3 信息

> ID：15330567
> 
> 赞同：1
> 
> 时间：2013-03-11T03:08:37.917
> 
> 标签：mp3, id3, mutagen

希望从远程音频文件的 ID3 信息中获取艺术家、标题、专辑。我不想下载整个文件，所以我只下载前 500 个字节左右。查看body时可以看到ID3信息，不幸的是当我调用Mutagen [https://code.google.com/p/mutagen/](https://code.google.com/p/mutagen/)指向小文件时，抛出错误

EOFError: 请求 0x1ce9 的 0x1a501 (file.mp3)

有没有办法修复这个文件？腐败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:24:47.760

你缺少数据。您可能需要超过 500 个字节，因为错误表明它正在尝试加载偏移量 107,777。我本人并不熟悉 Mutagen，但您可能需要对其进行修改以接受“损坏的”文件。

另外，请记住 ID3v1 存储在文件的末尾，而不是开头。如果您专门处理 ID3v2，这不是问题。

# c++ - 在许多数据块中搜索多个单词

> ID：15330568
> 
> 赞同：0
> 
> 时间：2013-03-11T03:08:47.870
> 
> 标签：c++, python

我必须在数据块中搜索大约 100 个单词（大约 20000 个块），每个块包含大约 20 个单词。块应按匹配数的递减顺序返回。蛮力技术非常繁琐，因为你必须一个一个地搜索所有 100 个单词，然后以复杂的方式组合相关搜索的数量。是否有任何其他算法允许同时搜索多个单词并存储匹配单词的数量？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:31:53.310

您可以使用[Aho-Corasick](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)算法一次搜索所有 100 个单词。[在 SO](https://stackoverflow.com/search?q=aho%20corasick)和[github](https://gist.github.com/search?q=aho%20corasick)上有几个实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T03:17:19.233

为什么不考虑使用多线程来存储结果？制作一个大小等于块数的数组，然后每个线程将结果计入一个块中，然后线程将结果写入数组中的相应条目。稍后您按降序对数组进行排序，然后得到结果。

# cakephp - CakePHP：无法让模型工作

> ID：15330572
> 
> 赞同：0
> 
> 时间：2013-03-11T03:09:13.980
> 
> 标签：cakephp, php

我对 cakePHP 真的很陌生，我或多或少地了解控制器和视图，因为我以前使用 MVC 框架。但是，cakePHP 中的模型和命名约定似乎与我之前使用的有所不同。我用过的那个；您使用所需的字段等调用各种函数，例如选择和插入，然后执行查询。本质上，您构建自己的查询。我试图弄清楚如何在 cakePHP 中使用模型，据我所知，如果我在 /controllers/users_controller.php 中有一个控制器，其内容如下：

```
<?php
class UsersController extends AppController{
    var $name = 'Users';

    var $helpers = array ('Html','Form');

    public function login(){
        $this->set('msg', 'Login PAGE!!!! YAY!!!!!!!!!');
        $this->set('MT', $this->Users->find('all'));
    }
} 
```

那么它应该自动在models/users.php中提供模型，用户，对吗？因此，变量 $MT 可以在页面上回显。

Users.php 上的内容是：

```
<?php

class Users extends AppModel{
    var $name = 'Users';
} 
```

我遇到的问题似乎是：

```
Undefined property: UsersController::$Users [APP\controllers\users_controller.php 
```

从而导致：

```
Call to a member function find() on a non-object in app\controllers\users_controller.php 
```

我正在关注[http://book.cakephp.org/1.3/en/The-Manual/Tutorials-Examples/Blog.html](http://book.cakephp.org/1.3/en/The-Manual/Tutorials-Examples/Blog.html)上的教程，了解在 WAMP 服务器上运行的 cakePHP 1.3。您可以提供的任何建议将不胜感激！非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:16:13.773

更改您的型号名称：

```
class Users extends AppModel{
... 
```

到

```
class User extends AppModel{
... 
```

和：

```
$this->set('MT', $this->Users->find('all')); 
```

到

```
$this->set('MT', $this->User->find('all')); 
```

# asp.net-mvc - ko.mapping 始终是一个空数组

> ID：15330578
> 
> 赞同：0
> 
> 时间：2013-03-11T03:09:48.283
> 
> 标签：asp.net-mvc, knockout.js

这是我从控制器返回的内容：

```
 var states = _dc.States.ToList();
    var serializer = new JavaScriptSerializer();
    ViewBag.StateList = serializer.Serialize(states); 
```

我的 JS：

```
var stateList = @Html.Raw(ViewBag.StateList);
var stateListModel = ko.mapping.fromJS(stateList); 
```

是我做一个`console.log`on `stateListModel`，它总是`[]`，但是`stateList`是一个包含所有数据的完整数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:46:57.850

ko.mapping 结果不是一个空数组，它是一个函数。

正如 nemesv 的评论所说，你必须这样做：

```
var stateListModel = ko.mapping.fromJS(stateList);
var realArray = stateListModel(); 
```

# python - 提交后是否有用于对象更改的 ZODB 挂钩？

> ID：15330582
> 
> 赞同：1
> 
> 时间：2013-03-11T03:10:24.700
> 
> 标签：python, zope, zodb

如何设置在提交后对 ZODB 对象更改触发的钩子？我可以为 IObjectWillBeMovedEvent 和 IObjectWillBeAddedEvent 设置处理程序，但这些处理程序会在对象创建时立即触发。是否有其他我可以使用的事件或钩子只有在提交更改时才会触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:47:44.983

Python的[事务](https://pypi.python.org/pypi/transaction)包不使用[zope.event](https://pypi.python.org/pypi/zope.event)事件通知，并且有自己的系统来注册可调用的钩子。但是，您必须为每个正在运行的事务添加挂钩，您可能会考虑使用 zope.event 在 IObjectModifiedEvent（或类似事件）中执行此操作。

参见[ITransaction.addAfterCommitHook](https://github.com/zopefoundation/transaction/blob/a97ce37f47f7e5813d450e931e93c8b8b4544ecd/transaction/interfaces.py#L249) () 的描述。

# zend-framework - Zend_Controller_Router_Route_Hostname 为两个域名

> ID：15330585
> 
> 赞同：1
> 
> 时间：2013-03-11T03:11:19.317
> 
> 标签：zend-framework, bootstrapping, zend-controller-router

```
protected function _initHostnameRouter()
{
    $this->bootstrap('autoload');
    $this->bootstrap('FrontController');

    $front = $this->getResource('FrontController');

    $router = $front->getRouter();

    $hostRoute1 = new Zend_Controller_Router_Route_Hostname('admin.example.net',array('module' => 'admin'));
    $hostRoute2 = new Zend_Controller_Router_Route_Hostname('vouchers.example.net',array('module' => 'vouchers'));
    $pathRoute = new Curo_Route_NoModule();

    $router->removeDefaultRoutes();
    $router->addRoute('default',     $pathRoute);
    $router->addRoute('admin',       $hostRoute1->chain($pathRoute));
    $router->addRoute('vouchers',    $hostRoute2->chain($pathRoute));
} 
```

我在 Bootstrap 文件中使用了上述代码，它运行良好。我需要为管理模块添加另一个域名。现在我正在使用`admin.example.net`管理模块。我还需要添加`admin.examplenew.net`. 我不需要更改旧域。两者应该同时工作。

我试过了，

```
 $hostRoute1 = new Zend_Controller_Router_Route_Hostname('admin.example.net',array('module' => 'admin'));
    $hostRoute2 = new Zend_Controller_Router_Route_Hostname('vouchers.example.net',array('module' => 'vouchers'));
    $hostRoute3 = new Zend_Controller_Router_Route_Hostname('admin.examplenew.net',array('module' => 'adminnew'));
    $pathRoute = new Curo_Route_NoModule();

    $router->removeDefaultRoutes();
    $router->addRoute('default',     $pathRoute);
    $router->addRoute('admin',       $hostRoute1->chain($pathRoute));
    $router->addRoute('vouchers',    $hostRoute2->chain($pathRoute));
    $router->addRoute('adminnew',    $hostRoute3->chain($pathRoute)); 
```

但是两个域名不能同时工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:37:16.157

您正在以相同的名称添加`$hostRoute1`和： . 所以第二个任务覆盖了第一个任务。`$hostRoute3``$router``admin`

使键唯一 - 例如，将最后一个更改为`adminnew`- 你应该很好。

# javascript - 画布描边（）不在剪辑边缘绘制

> ID：15330587
> 
> 赞同：0
> 
> 时间：2013-03-11T03:11:31.953
> 
> 标签：javascript, html, canvas, 2d

我用画布创建了一个幻灯片放映，我正在使用一个剪辑来圆化其中图像的边缘。因为剪辑不会淡出，我在调用 clip() 之前对剪辑路径进行描边以平滑外边缘，然后在绘制图像以平滑内边缘后再次对其进行描边。这在 chrome 中完美运行，但在 safari 或 Internet Explorer 中的测试导致了[此处](http://i.imgur.com/V93Osfs.jpg)显示的问题。左边的图像是 chrome，右边的图像是 safari。注意线条和图像边缘之间的间隙。

我描边的路径与剪辑路径完全相同，lineWidth 为 5，但看起来 safari 没有填充剪辑边界的像素。有没有办法可以解决这个问题而无需创建带有轮廓的叠加图像？

编辑 2：我尝试使用 restore() 删除剪辑，绘制轮廓并重新剪辑。这适用于 Internet Explorer，并且在 safari 上适用，但在 safari 上，使用此方法时，笔划会覆盖图像数据而不是与之混合。

```
var canvas;
var ctx;

function loadSlideshow() {
    canvas = document.getElementById("slideshow"); //Width=960, Height=540
    ctx = canvas.getContext("2d");

    ctx.strokeStyle="#0d0d0d";
    ctx.beginPath();
    ctx.moveTo(0, 54);
    ctx.quadraticCurveTo(480, -27, 960, 54);
    ctx.lineTo(960, 540 - 54);
    ctx.quadraticCurveTo(480, 540 + 27, 0, 540 - 54);
    ctx.closePath();
    ctx.stroke(); //Stroke clip path before clipping to outer clip transition
    ctx.save();
    ctx.clip(); //Set clip to make images curved at the top and bottom
    ctx.lineWidth = 5;
    var imagesToLoad = [
        "images/slideshow/img1.png",
        "images/slideshow/img2.png",
        "images/slideshow/img3.png",
        "images/slideshow/img4.png",
    ]
    for(var i = 0; i < imagesToLoad.length; i++) {
        var img = new Image();
        img.src = imagesToLoad[i];
        images.push(img);
    }
    images[0].onload = function() {
        requestAnimFrame(animate);
    }
}

var images = [];
var curImage = -1;
var lastImageSwitch = 0;

function animate() {
    requestAnimFrame(animate);
    var time = new Date().getTime();

    //Switch to next slide after 5 seconds
    if(time - lastImageSwitch >= 5000) {
        curImage++;
        curImage%=images.length;
        ctx.drawImage(images[curImage], 0, 0, canvas.width, canvas.height);
        ctx.stroke(); //Stroke outline to smooth the clipping.
        lastImageSwitch = time;
    //Animated transition between slides
    } else if(time - lastImageSwitch >= 4500) {
        //Calculate alpha of next image in slideshow based on time until next image
        var alpha = 1 - ((5000 - time + lastImageSwitch) / 500);

        //Draw current image, then overlay next image with semi-transparency
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(images[curImage], 0, 0, canvas.width, canvas.height);
        ctx.globalAlpha = alpha;
        ctx.drawImage(images[(curImage + 1) % images.length], 0, 0, canvas.width, canvas.height);
        ctx.globalAlpha = 1;
        ctx.stroke(); //Stroke outline to smooth the clipping.
    }
}

window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       ||
          window.webkitRequestAnimationFrame ||
          window.mozRequestAnimationFrame    ||
          function( callback ){
            window.setTimeout(callback, 1000 / 60);
          };
})(); 
```

编辑：我忘记的附加代码
编辑2：进一步调查后修改后的帖子

# mongodb - 获取插入的数据库值

> ID：15330588
> 
> 赞同：0
> 
> 时间：2013-03-11T03:11:34.417
> 
> 标签：mongodb, meteor, database

所以我使用 Meteor 向数据库中插入一个值，如下所示：

```
Database.insert({name: 'bob'}) 
```

但是我想检索我输入的“bob”值。我不知道如何只检索 bob 值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:41:19.687

根据插入文档中显示的示例[，](http://docs.meteor.com/#insert)将`insert`返回`_id`插入文档的 。然后，您可以使用它来使用[findOne](http://docs.meteor.com/#findone)查询“名称”字段。如[字段说明符文档](http://docs.meteor.com/#fieldspecifiers)中所述，在提及要返回的字段列表时，不能混合包含和排除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T03:40:44.430

你必须检查你正在创建一个集合

```
 Database = new Meteor.Collection('database'); 
```

您使用的插入命令很好，您可以按名称检索该文档（记录）：

```
 persons = Database.find({name:"bob"}) 
```

要仅检索一个文档，请使用：

```
 person = Database.findOne({name:"bob"}) 
```

然后，您可以使用以下方法获取“bob”值：

```
 name = person.name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:40:58.920

你可以做

```
Database.findOne({name:'bob'}) 
```

或者，如果您使用 find 获取多个结果，请使用[fetch](http://docs.meteor.com/#fetch)以便在数组中给出数据，上述内容与

```
Database.find({name:"bob"}).fetch()[0] 
```

使用上面的代码：

```
inserted_record_id = Database.insert({name: 'bob'})

//getting your document inserted above:
Database.findOne({_id:inserted_record_id}) 
```

# performance - 以美元形式表示的应用程序的性能价值是多少？

> ID：15330589
> 
> 赞同：-4
> 
> 时间：2013-03-11T03:11:34.433
> 
> 标签：performance, memory, big-o

这不仅仅是对我的问题，对于任何想知道让事情变得更愚蠢的朋克（更快、更好、更强大；）有多重要的人来说也是如此。我对这个话题了解得不够多，尽管我尽我所能把事情做得最好。但我很好奇像谷歌这样的公司可能会为更好的排序算法或更好的搜索算法支付什么费用。

我问这个问题的主要原因是因为我已经开发并正在研究一种方法，用于搜索算法，每次都在 O(8) 中工作。没错，不是 O(8n)，而是 O(8)。我不确定内存，但它非常快。足够快，可以瞬间完成。它将不再需要跨服务器拆分数据。

无论如何回到问题。公司会在速度、内存使用和文件大小等方面花费多少钱（这样人们才能真正理解其价值）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:29:19.050

Jim Gray 在 2003 年撰写的《[分布式计算经济学》是一个良好的开端。](http://research.microsoft.com/apps/pubs/default.aspx?id=70001)看到这个报价：

> 由此我们得出结论，一美元等于
> 
> *   = 1 美元
> *   ≈ 1 GB 通过 WAN 发送
> *   ≈ 10 Tops（tera cpu 操作）
> *   ≈ 8 小时的 cpu 时间
> *   ≈ 1 GB 磁盘空间
> *   ≈ 10 M 数据库访问
> *   ≈ 10 TB 的磁盘带宽
> *   ≈ 10 TB 的 LAN 带宽

显然，从那时起这些值发生了变化，但这是非常具体的数据，表明性能很重要。

在高可扩展性博客上与此主题相关的最新帖子：[在规模上，即使小胜也能大赚 - Google 和 Facebook 示例](http://highscalability.com/blog/2013/2/11/at-scale-even-little-wins-pay-off-big-google-and-facebook-ex.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T03:39:32.943

它隐藏在这篇难以阅读的博客文章中，但在[http://blogs.adobe.com/jd/2008/08/factors_affecting_realworld_ad.html中有一些关于真实用户如何响应缓慢操作的非常有说服力的花絮](http://blogs.adobe.com/jd/2008/08/factors_affecting_realworld_ad.html)

我找到了他几年前提到的宏媒体研究，但遗憾的是现在找不到。它描述了随着下载时间的增加，采用率的大幅下降。

要点：用户非常不耐烦。快点，否则就输了。

# objective-c - 滚动视图上的 Xcode 键盘问题

> ID：15330599
> 
> 赞同：0
> 
> 时间：2013-03-11T03:12:53.353
> 
> 标签：objective-c, xcode4.6

我在顶部单视图上有一个滚动视图。我有一些文本字段和`UIPickers`它。现在我知道如何在按下返回时让键盘关闭。但是，当点击或选择背景时，我试图从文本字段中关闭键盘`UIpicker`。我试过这样做...

**界面 ：**

```
 - (IBAction)textFieldReturn:(id)sender;
  - (IBAction)backgroundTouched:(id)sender; 
```

**执行 ：**

> ```
> -(IBAction)textFieldReturn:(id)sender
> {
>         [sender resignFirstResponder];
> }
> 
> -(IBAction)backgroundTouched:(id)sender
> {
>         [textField resignFirstResponder];
> } 
> ```

但问题是我不能将滚动视图作为控件类型来使其工作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:00:46.980

试试这样可能对你有帮助但不确定，

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [[event allTouches] anyObject];
       if (![[touch view] isKindOfClass:[UITextField class]]) {
           [yourtextfield resignFirstResponder];
       }
} 
```

为了在滚动视图上获得触摸事件，您必须进行手势识别，

```
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTap)];
    [scroll addGestureRecognizer:singleTap];

 -(void)singleTap{
        [text resignFirstResponder];
        //write whatever you want it.
    } 
```

# security - 看不懂“剥削的艺术”中的缓冲区溢出示例

> ID：15330607
> 
> 赞同：1
> 
> 时间：2013-03-11T03:13:39.847
> 
> 标签：security, buffer-overflow, exploit, shellcode

我的问题与[this](https://stackoverflow.com/questions/8696517/buffer-overflow-example-from-art-of-exploitation-book)非常相似但不一样。

我在书中运行了相同的exploit_notesearch.c 示例：Hacking, the Art of Exploitation on my 64-bit OS, Archlinux，但它不起作用。

从上面的链接我了解到它不能在大多数 64 位系统上工作。但我仍然不明白为什么程序必须这样做：`ret = (unsigned int)&i - offset`. 为什么我不能这样做：`ret = (unsigned)shellcode`以便我可以将易受攻击的程序的返回地址替换为 shellcode 的起始地址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:43:07.810

这`ret = (unsigned)shellcode`将使`ret`等于您程序中的 shellcode 数组的地址。但是那个地址不是你的恶意代码在目标程序中的地址（`notesearch.c`）。目标进程会将其放入`searchstring`堆栈，因此您的恶意代码也将放入目标进程的堆栈。

在过去，进程的内存布局通常是高度确定性的——攻击者通常可以很好地预测堆栈缓冲区的位置（特别是如果他们确切知道目标软件的哪个版本正在被攻击）。所以很容易知道`searchstring`你的shellcode的确切地址是什么。

然而，今天，许多操作系统都会执行 ASLR。所以攻击者试图执行注入堆栈的shellcode必须首先找到堆栈。系统掩盖了攻击者的相关内存地址。这些值必须被猜测，并且由于应用程序崩溃（Segmentation Fault），错误的猜测通常无法恢复。

当涉及一些猜测时，为了提高成功的机会，活动的 shellcode 通常会在大量可执行的机器代码之前，这些机器代码没有执行任何有用的操作 - 称为“NOP sled”或“NOP slide”。

所以即使`ret = (unsigned int)&i - offset`不能确保你的 shellcode 会成功执行。

# c# - 如何在 100% 自定义网格控件中管理数据绑定

> ID：15330611
> 
> 赞同：0
> 
> 时间：2013-03-11T03:14:14.133
> 
> 标签：c#, winforms, data-binding

我正在从头开始编写一个自定义控件（使用`Graphics`），它将代表一组列，每个列都有一个单元格列表，很像网格视图，除了它会有一些自定义功能。

我很难弄清楚如何管理所有数据绑定问题。我希望这个网格有一个`DataSource`属性，它基本上需要是一些对象的锯齿状数组（2D），每个对象都需要绑定到控件中的一个单元格。我仍然不确定这些对象中的每一个都有哪些属性，到目前为止我只使用文本。我一直在尝试做的是让我的模型实现这个接口：

```
public interface IDiagramDataSource
{
    IBindingList Columns { get; }
} 
```

然后让每一列实现这个：

```
public interface IDiagramColumnDataSource : INotifyPropertyChanged
{
    IBindingList Cells { get; }
} 
```

但是我仍然很难找出使所有这些对象与网格中的相应对象保持同步的最佳方法。我希望能够将所有绑定的混乱放在一个独立的班级中，但不知道如何做到这一点。现在，只要数据源发生任何变化，我就会重新绘制整个东西，但我希望最终能够识别哪个单元格中的哪个属性或哪个列中的哪个单元格发生了变化，以便我只能更新我的网格中的必要项目。

当您希望控件可绑定到嵌套列表时，是否有任何模式可以遵循？我猜有因为`DataGridView`控制这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:18:49.457

我建议2个选项：

HighCore 提出的第一个建议是使用 WPF 而不是自定义 winform 对象来完成这项工作。WPF 还有更多的控件（如果我没记错的话，ListView，甚至是通用的 ItemContainer）。只需在 ViewModel 上实现 INotifyPropertyChanged，然后每次需要刷新控件时为根（聚合）元素调用 OnPropertyChanged。不要忘记为 ItemsSource Binding 添加 UpdateSourceTrigger。WPF 控件对拖放功能也有很好的实现。

我不会详细介绍 WPF 中的实现，因为有很多文章解释它。

但是，如果您认为必须使用自定义图形绘制来完成，那么它是相当复杂的。每次在项目列表中发生任何更改时，您都必须触发该方法来重新绘制控制图形以使其生效。如果您可以对图形进行部分更新（也许使用面板来欺骗它）会更好，但它更难。

如果处理不当（此外，如果您的控件包含大量数据和/或控件大小），则可能会导致一些高内存负载。

# javascript - 禁用 DFP/DoubleClick iFrame

> ID：15330619
> 
> 赞同：7
> 
> 时间：2013-03-11T03:14:51.887
> 
> 标签：javascript, google-dfp

在 Google DFP (DoubleClick) 中，您将获得一个广告代码以放入您的标题和另一个用于您的正文。当我将此给定的广告代码/代码应用到我的网站时，无论它是异步的还是同步的，广告始终显示在 iframe 中。我想知道如何禁用 iFrame。

**这是通过 DFP 生成的标头代码：**

```
<script type='text/javascript'>
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') +
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>

<script type='text/javascript'>
googletag.cmd.push(function() {
googletag.defineSlot('/16569348/ad-test-1', [400, 267], 'div-gpt-ad-1362958263281-    0').addService(googletag.pubads());
googletag.pubads().enableSingleRequest();
googletag.enableServices();
});
</script> 
```

**这是通过 DFP 生成的正文代码：**

```
<!-- ad-test-1 -->
<div id='div-gpt-ad-1362958263281-0' style='width:400px; height:267px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1362958263281-0'); });
</script>
</div> 
```

**这是展示此问题的 jsFiddle（检查 google chrome 中的元素以查看 iframe）：**

[http://jsfiddle.net/EptwH/](http://jsfiddle.net/EptwH/)

同样，我想删除 iframe （当然保留图片/广告）......任何帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T04:58:57.620

来自 DFP 的网站：[链接](http://support.google.com/dfp_sb/bin/answer.py?hl=en&answer=90777)

> 当您使用 Google 发布商代码 (GPT) 时，您的广告会自动加载到 iframe 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-29T04:25:23.410

我们遇到了同样的问题，因为我们的目标是将原生广告直接添加到主机页面 DOM 而不是 IFRAME 以获得完整的响应能力。我们想出了一个解决方案，我们使用消息将广告内容字符串发布到主机页面。这样就没有更多的 IFRAME。

有关详细信息，请参阅[http://insights.burda-studios.de/howto-run-fully-responsive-doubleclick-native-ads-without-iframes/](http://insights.burda-studios.de/howto-run-fully-responsive-doubleclick-native-ads-without-iframes/)

请注意，我们仅使用这种方法投放自家广告，而不是任何可能导致意外行为的第三方广告。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-16T11:27:35.263

我正在为数字广告商工作，您永远不应该禁用来自广告的 iFrame。

ADS 可以包含有害脚本，因此最好使用 Safeframe（使用 src 指向外国来源的框架）来防止这种情况。

Also many ad script use `document.write`, and inside their iframe they can do that without problem, would they do that on main window after `document.ready` that would paint your page blank.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T15:54:04.027

Google 故意将其广告加载到 iframe 中，这是设计使然。

这样做是因为它既可以让您的页面加载速度更快，也可以使用沙盒样式和脚本等。页面的渲染速度更快，因为 iframe 支持异步加载和渲染广告内容。

如果您愿意，可以使用您的广告代码从 iframe 中“剔除”，因此 iframe 中的广告并没有真正的劣势，请向我们展示一个示例，说明您遇到问题

这是与此有关的[更多阅读内容。](http://support.google.com/dfp_premium/bin/answer.py?hl=en&answer=183282)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-03-25T00:21:46.413

根据我的经验，您的部分问题（无论是异步还是同步）是错误的。不确定这是否已更改，或者您是否未能让 GPT 代码同步运行，但由于我更改为同步模式，因此不再使用 iframe。在[belmodo.tv上亲自查看](http://belmodo.tv)

# php - 存储上传的文件、MySQL 或文件路径？

> ID：15330620
> 
> 赞同：1
> 
> 时间：2013-03-11T03:15:01.070
> 
> 标签：php, mysql

将用户上传的一般文件（图像、pdf 等）存储在 MySQL 数据库中更好还是应该将它们存储在文件目录中？我对性能以及每个选项的安全性感到好奇。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:19:06.210

我建议将它们存储在文件系统中并将对文件的引用存储在数据库中。我并不是说一个比另一个性能好得多，但是将它们放在文件系统中的好处是您可以在其他上下文中访问这些文件。这使它们更易于组织、移动、操作等。如果它们只是数据库中的 blob，则每次都必须通过 MySQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T03:20:19.000

就个人而言，我发现将上传的文件存储在文件夹中并将文件的路径存储在数据库中要快得多。

这也将使您的数据库文件更小，这也非常适合备份。

# c# - WPF 数据网格不会自动刷新实体框架

> ID：15330622
> 
> 赞同：3
> 
> 时间：2013-03-11T03:15:25.263
> 
> 标签：c#, wpf, entity-framework

我是 WPF 的新手。现在，我正在使用实体框架编写 WPF 项目。我可以在我的 wpf 上正确添加和删除项目；但是，在我添加或删除项目后，我的数据网格仍然没有刷新。即使我使用`ssEntities.SaveChanges(); ssEntities.Refresh(RefreshMode.StoreWins, ssEntities.User);`

如何使用刷新功能或其他功能自动刷新我的数据网格？

**XAML**

```
<Window.Resources>
    <CollectionViewSource x:Key="UserViewSource" 
                          d:DesignSource="{d:DesignInstance my:User, CreateList=True}" />
</Window.Resources>
<DataGrid AutoGenerateColumns="False" EnableRowVirtualization="True" Height="537"  
          HorizontalAlignment="Left" ItemsSource="{Binding}" Margin="12,12,0,0" 
          Name="UserDataGrid" RowDetailsVisibilityMode="VisibleWhenSelected" 
          VerticalAlignment="Top" Width="300" 
          SelectedCellsChanged="UserDataGrid_SelectedCellsChanged">
    <DataGrid.Columns>
        <DataGridTextColumn x:Name="IDColumn" Binding="{Binding Path=ID}" Header="ID"
                            Width="80" IsReadOnly="True" />
        <DataGridTextColumn x:Name="NameColumn" Binding="{Binding Path=Name}" 
                            Header="Name" Width="80" IsReadOnly="True" />
    </DataGrid.Columns>
</DataGrid> 
```

**CS**

```
 private void btnSave_Click(object sender, RoutedEventArgs e)
 {
     try
     {
         if (ActionHandler == "Add")
         {
             User user = new User();   
             user.ID = ID;
             user.Name = Name;

             ssEntities.User.AddObject(user);
         }

         ssEntities.SaveChanges();
         ssEntities.Refresh(RefreshMode.StoreWins, ssEntities.User);
     }
     catch (Exception ex)
     { MessageBox.Show(ex.Message); }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T14:00:23.210

我同意在其他答案中发表评论的其他人的观点，您确实应该采用 MVVM 来解决此类问题。

也就是说，您在上面说过您的 DataContext 是`StudyEntities ssEntities;`. 那是你的 ObjectContext 吗？看起来它正在被用作一个。我通常不使用 CollectionViewSource ，除非我需要对大量数据进行一些自定义过滤和/或排序。否则我只使用 ObservableCollection。

像这样的东西就足够了：

```
private ObservableCollection<User> MyUsers { get; set; }
private StudyEntities ssEntities;

public MyMainWindow()
{
    ssEntities = new StudyEntities();
    MyUsers = new ObservableCollection<User>(ssEntities.Users.ToList());
}

private void btnSave_Click(object sender, RoutedEventArgs e)
{
    //Code for creating the User isntance MyUser
    MyUsers.Add(MyUser);
    ssEntities.Users.Add(MyUser);
    ssEntities.SaveChanges();
} 
```

您的实体被放置在 ObservableCollection 中，以便可以为 UI 操作它们。当您单击该按钮时，它会创建一个用户，将其添加到 ObservableCollection 和 ObjectContext，然后保存更改。为记录生成的 ID 将在保存更改时填充。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T04:20:29.303

假设您使用的是通用列表，您需要更改绑定中的 UpdateSourceTrigger，并绑定特定元素（示例 listUser）

在您的 DataGrid 中，更改：

```
ItemsSource="{Binding}" 
```

至：

```
ItemsSource="{Binding listUser, UpdateSourceTrigger=PropertyChanged}" 
```

然后在你后面的代码中，实现 INotifyPropertyChanged，然后执行

```
OnPropertyChanged("listUser"); 
```

属性来源已更改：http: [//msdn.microsoft.com/en-us/library/ms743695.aspx](http://msdn.microsoft.com/en-us/library/ms743695.aspx)

# asp.net-mvc-3 - 控制器动作单元测试的模拟默认角色提供者

> ID：15330623
> 
> 赞同：5
> 
> 时间：2013-03-11T03:15:32.917
> 
> 标签：asp.net-mvc-3, unit-testing, mocking, ninject, roleprovider

希望这不是一个愚蠢的问题。我一直在寻找两天来模拟对我的操作调用 system.web.security.roles 的方法。

我希望我的单元测试是独立的，并且不涉及对外部资源的调用，例如存储角色的数据库。

我找到的所有答案都建议创建自定义角色提供程序，但我更喜欢嘲笑创建假货。

我得到的最接近的是这个[解决方案](http://forums.asp.net/t/1822545.aspx/1) ，但是当在测试之外运行项目时，我没有找到让 ninject 将默认角色 Provider 传递给构造函数的方法。

我知道 Mock 类型为此提供了更简单的解决方案，但我正在使用 rhino Mocks，现在更改为时已晚。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T02:51:39.747

我遇到了和你一样的问题，经过两个小时的搜索，我放弃了。

最后，我最终创建了自己的模拟角色提供者——代码如下。

```
public class MockRoleProvider : RoleProvider
{
    public MockRoleProvider()
        : base()
    {
        Users = new List<User>();
        Roles = new List<Role>();
    }

    #region RoleProvider members
    public override void AddUsersToRoles(string[] usernames, string[] roleNames)
    {
        if (usernames == null) throw new ArgumentNullException("usernames");
        if (roleNames == null) throw new ArgumentNullException("roleNames");

        foreach (string role in roleNames)
        {
            if (!RoleExists(role)) throw new ProviderException("Role name does not exist.");
        }

        foreach (string user in usernames)
        {
            if (Users.FirstOrDefault(u => u.Username == user) == null) throw new ProviderException("Username does not exist.");
        }

        foreach (string username in usernames)
        {
            User user = Users.FirstOrDefault(u => u.Username == username);
            if (user == null) continue;
            foreach (var rolename in roleNames)
            {
                Role role = Roles.FirstOrDefault(r => r.RoleName == rolename);
                user.Roles.Add(role);
                role.Users.Add(user);
            }
        }
    }

    public override string ApplicationName { get; set; }

    public override void CreateRole(string roleName)
    {
        if (roleName == null || roleName == "") throw new ProviderException("Role name cannot be empty or null.");
        if (roleName.Contains(",")) throw new ArgumentException("Role names cannot contain commas.");
        if (RoleExists(roleName)) throw new ProviderException("Role name already exists.");

        Roles.Add(new Role { RoleName = roleName });
    }

    public override bool DeleteRole(string roleName, bool throwOnPopulatedRole)
    {
        if (roleName == null || roleName == "") throw new ProviderException("Role name cannot be empty or null.");

        Role role = Roles.FirstOrDefault(r => r.RoleName == roleName);

        if (role == null) throw new ProviderException("Role name does not exist.");
        if (throwOnPopulatedRole && GetUsersInRole(roleName).Length > 0) throw new ProviderException("Cannot delete a populated role.");

        Roles.Remove(Roles.FirstOrDefault(r => r.RoleName == roleName));
        return true;
    }

    public override string[] FindUsersInRole(string roleName, string usernameToMatch)
    {
        return GetUsersInRole(roleName).Where(n => n.Contains(usernameToMatch)).ToArray();
    }

    public override string[] GetAllRoles()
    {
        return Roles.Select(r => r.RoleName).ToArray();
    }

    public override string[] GetRolesForUser(string username)
    {
        if (username == null || username == "") throw new ProviderException("User name cannot be empty or null.");

        User user = Users.FirstOrDefault(u => u.Username == username);

        if (user == null) return new string[0];

        return user.Roles.Select(r => r.RoleName).ToArray();
    }

    public override string[] GetUsersInRole(string roleName)
    {
        if (roleName == null || roleName == "") throw new ProviderException("Role name cannot be empty or null.");

        Role role = Roles.FirstOrDefault(r => r.RoleName == roleName);

        if (role == null) throw new ProviderException("Role '" + roleName + "' does not exist.");

        return role.Users.Select(u => u.Username).OrderBy(n => n).ToArray();
    }

    public override bool IsUserInRole(string username, string roleName)
    {
        if (username == null || username == "") throw new ProviderException("User name cannot be empty or null.");
        if (roleName == null || roleName == "") throw new ProviderException("Role name cannot be empty or null.");

        Role role = Roles.FirstOrDefault(r => r.RoleName == roleName);

        return role != null && role.Users.FirstOrDefault(u => u.Username == username) != null;
    }

    public override void RemoveUsersFromRoles(string[] usernames, string[] roleNames)
    {
        foreach (string roleName in roleNames)
        {
            if (roleName == null || roleName == "") throw new ProviderException("Role name cannot be empty or null.");
            if (!RoleExists(roleName)) throw new ProviderException("Role name not found.");
        }

        foreach (string username in usernames)
        {
            if (username == null || username == "") throw new ProviderException("User name cannot be empty or null.");

            foreach (string roleName in roleNames)
            {
                if (!IsUserInRole(username, roleName)) throw new ProviderException("User is not in role.");
            }
        }

        foreach (string username in usernames)
        {
            User user = Users.FirstOrDefault(u => u.Username == username);
            if (user == null) continue;
            foreach (string roleName in roleNames)
            {
                Role role = user.Roles.FirstOrDefault(r => r.RoleName == roleName);
                role.Users.Remove(user);
                user.Roles.Remove(role);
            }
        }
    }

    public override bool RoleExists(string roleName)
    {
        if (roleName == null || roleName == "") throw new ProviderException("Role name cannot be empty or null.");

        return Roles.FirstOrDefault(r => r.RoleName == roleName) != null;
    }
    #endregion

    public void ClearAll()
    {
        Users = new List<User>();
        Roles = new List<Role>();
    }

    public void ClearRoles()
    {
        Roles = new List<Role>();
        Users.ForEach(u => u.Roles = new List<Role>());
    }

    public void ClearUsers()
    {
        Users = new List<User>();
        Roles.ForEach(r => r.Users = new List<User>());
    }

    public void CreateUser(string username)
    {
        if (username == null || username == "") throw new ProviderException("User name cannot be empty or null.");
        if (UserExists(username)) throw new ProviderException("User name already exists.");

        Users.Add(new User { Username = username });
    }

    public bool DeleteUser(string username)
    {
        if (username == null || username == "") throw new ProviderException("User name cannot be empty or null.");

        User user = Users.FirstOrDefault(u => u.Username == username);

        if (user == null) throw new ProviderException("User name does not exist.");

        foreach (Role role in user.Roles)
        {
            role.Users.Remove(user);
        }
        Users.Remove(user);
        return true;
    }

    public bool UserExists(string username)
    {
        if (username == null || username == "") throw new ProviderException("User name cannot be empty or null.");

        return Users.FirstOrDefault(u => u.Username == username) != null;
    }

    private List<Role> Roles { get; set; }

    private List<User> Users { get; set; }

    private class Role
    {
        public Role()
        {
            Users = new List<User>();
        }

        public string RoleName { get; set; }
        public List<User> Users { get; set; }
    }

    private class User
    {
        public User()
        {
            Roles = new List<Role>();
        }

        public string Username { get; set; }
        public List<Role> Roles { get; set; }
    }
} 
```

它确实是 RoleProvider 的基本但完整的实现。

为了使用 MockRoleProvider 将这行 XML 添加到 App.config 到`<configuration>`元素中：

```
<system.web>
  <roleManager enabled="true" defaultProvider="MockRoleProvider">
    <providers>
      <add name="MockRoleProvider" type="YourProject.Tests.MockRoleProvider, YourProject.Tests"/>
    </providers>
  </roleManager>
</system.web> 
```

然后在单元测试安排部分使用此代码：

```
MockRoleProvider mock = Roles.Provider as MockRoleProvider;
if (mock == null) throw new NullReferenceException("MockRoleProvider null exception.");
mock.ClearAll();
mock.CreateUser("SomeUser");
mock.CreateRole("SomeRole");
mock.AddUsersToRoles(new string[] { "SomeUser" }, new string[] { "SomeRole" }); 
```

# windows-phone-8 - 隐藏捕获所有语音命令

> ID：15330624
> 
> 赞同：1
> 
> 时间：2013-03-11T03:15:39.097
> 
> 标签：windows-phone-8, voice-recognition

我正在我的 Windows Phone 8 应用程序上实现语音命令，我有许多使用短语列表的命令。

为了获得更好的用户体验，我对它们中的每一个都使用了全部命令，例如以下命令。

```
<Command Name="OpenCategory">
  <Example>open category chores</Example>
  <ListenFor>[and] open category {CategoryName}</ListenFor>
  <ListenFor>[and] show [me] category {CategoryName}</ListenFor>
  <ListenFor>[and] display category {CategoryName}</ListenFor>
  <Feedback>Opening {CategoryName}...</Feedback>
  <Navigate Target="/Views/CategoryTasksView.xaml" />
</Command>

<Command Name="OpenCategoryUnknown">
  <Example>open category chores</Example>
  <ListenFor>[and] open category {*}</ListenFor>
  <ListenFor>[and] show [me] category {*}</ListenFor>
  <ListenFor>[and] display category {*}</ListenFor>
  <Feedback>Couldn't find that category...</Feedback>
  <Navigate Target="/Views/CategoryListView.xaml" />
</Command> 
```

然而，“我能说什么？” UI 最终会出现重复的示例，并且遵循此模式的五个命令确实会破坏示例 UI。

有没有办法让某些命令现在显示示例？

# python - items.py 和带有scrapy的嵌套xml标签

> ID：15330626
> 
> 赞同：0
> 
> 时间：2013-03-11T03:15:52.637
> 
> 标签：python, scrapy

我正在尝试使用 scrapy 定义 items.py 中的项目，并且某些标签具有可变数量的嵌套元素。我不确定如何在 items.py 示例中表示这一点：

item2.xml

```
<sponsors>
    <sponsor>
        foo
    </sponsor>
</sponsors> 
```

item2.xml

```
<sponsors>
    <sponsor>
        foo
    </sponsor>
    <sponsor>
        bar
    </sponsor>
</sponsors> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:18:56.070

Scrapy 的项目字段不会强迫你使用任何特定的格式。你可以定义它：

```
class YourItem(Item):
    sponsors = Field() 
```

只需使用一个列表：

```
item['sponsors'] = xpath.select('//sponsors/sponsor/text()').extract() 
```

# android - 如何从 URI 加载 Picasa 图片？

> ID：15330628
> 
> 赞同：12
> 
> 时间：2013-03-11T03:16:01.500
> 
> 标签：android, android-intent, android-contentprovider, picasa, android-contentresolver

我正在使用`ACTION_PICK`意图从图库中选择图像。一些相册，如*“帖子”*、*“个人资料照片”*等都标有 Picasa 图标。对于此类相册中的图像，我会得到一个类似于以下的 URI：

```
content://com.google.android.gallery3d.provider/picasa/item/5769844615871490082 
```

我可以毫无问题地`ContentResolver`从此URI 加载图像：`BitmapFactory`

```
final InputStream ist = context.getContentResolver().openInputStream(intent.getData());
final Bitmap bitmap = BitmapFactory.decodeStream(ist); 
```

但是重新启动应用程序后，我无法使用存储的 URI 加载图像。我在`decodeStream()`被调用时得到这个：

```
03-11 12:34:56.502: A/libc(1172): Fatal signal 11 (SIGSEGV) at 0x00000408 (code=1), thread 1462 03-11 12:34:56.502:
    W/ActivityManager(478): Permission Denial: opening provider
    com.android.gallery3d.provider.GalleryProvider from
    ProcessRecord{41cdd220 1172:com.mycompany.myapp/u0a10085}
    (pid=1172, uid=10085) requires
    com.google.android.gallery3d.permission.GALLERY_PROVIDER or
    com.google.android.gallery3d.permission.GALLERY_PROVIDER 
```

我试图添加

```
<uses-permission android:name="com.google.android.gallery3d.permission.GALLERY_PROVIDER"/> 
```

到清单文件，但它没有帮助。

我认为我的问题与[此](https://stackoverflow.com/questions/13558177/security-exception-when-trying-to-access-a-picasa-image-on-device-running-4-2)类似，但没有给出解决方案，只有一种解决方法。是否可以请求访问存储的 URI 的权限？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-03T11:28:30.430

尝试像这样打开输入流

```
ContentResolver res = context.getContentResolver();
Uri uri = Uri.parse(intent.getData().toString());
res.openInputStream(uri); 
```

# mongodb - 使用 $ne 的 Mongo 聚合

> ID：15330629
> 
> 赞同：4
> 
> 时间：2013-03-11T03:16:07.943
> 
> 标签：mongodb, pymongo

我似乎无法通过布尔操作在 Mongo 聚合中找到任何资源。我的查询看起来像这样（我使用的是 pymongo 驱动程序）：

```
db.collection.aggregate([{'$match': {'foo': 3, 'bar': 'baz'}},
                          {'$project': {'quxx': 1, '_id': 0, 'count': 1}},
                          {'$group': {'total': {'$sum': '$count'}, '_id': '$quxx'}},
                          {'$sort': {'total': -1}},
                          {'$limit': 2000}]) 
```

这一切都很好（`$match`在索引上等）。现在，我想从管道中过滤掉一个流氓 quxx，所以我想我会使用`$ne`运算符。但是，我似乎无法弄清楚正确的方法！我不确定我是否没有将它放在正确的位置（我希望它在`$match`运算符之后但在`$group`运算符之前）或者我的语法错误，但我们将不胜感激。

到目前为止我尝试过的事情（都在他们自己的步骤之后`$match`）是：

```
{'$quxx': {'$ne': 'rogue'}}
{'quxx': {'$ne': 'rogue'}}
{'$ne': {'quxx': 'rogue'}}
{'$ne': {'$quxx': 'rogue'}} 
```

他们每个人都给了我`unrecognized pipeline op`。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-11T03:22:06.720

您可以将其放在它自己的`$match`管道元素中，或者将其包含在初始的`$match`.

所以要么添加：

```
{'$match': {'quxx': {'$ne': 'rogue'}}} 
```

或将首字母修改`$match`为：

```
{'$match': {'foo': 3, 'bar': 'baz', 'quxx': {'$ne': 'rogue'}}} 
```

# java - 为什么这些泛型不在 OpenJDK7 中编译，但在 OpenJDK6 中编译

> ID：15330632
> 
> 赞同：8
> 
> 时间：2013-03-11T03:16:20.933
> 
> 标签：java, generics, openjdk, nested-generics

```
class HasId<I> {}
class HasStringId extends HasId<String> {}
class Alert<T extends /*Some*/Object> extends HasStringId {}
class BaseController<M extends HasId<String>> {
    // abstract Class<M> getModelClass();
}
class AlertController extends BaseController<Alert> { // error here
    // @Override Class<Alert> getModelClass() {
    //     return Alert.class;
    // }
} 
```

在 OpenJDK6 上编译良好，但在 OpenJDK7 中给出：

```
AlertController.java:50: error: type argument Alert is not within bounds of
    type-variable T
class AlertController extends BaseController<Alert> {
                                        ^
  where T is a type-variable:
    T extends HasId<String> declared in class BaseController 
```

请注意，第 50 行有 rawtype 警告，因为必须对 Alert 进行参数化。如果我这样做，例如`extends BaseController<Alert<Object>>`，代码编译。但我不能这样做，因为我需要实现 getModelClass()。

更新：这是 Java 6 实现中的一个错误，已在 Java 7 中修复：[http](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6559182) ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6559182 。（这是我对编译器开发人员的问题：http: [//openjdk.5641.n7.nabble.com/Nested-generics-don-t-compile-in-1-7-0-15-but-do-in-1 -6-0-27-td121820.html](http://openjdk.5641.n7.nabble.com/Nested-generics-don-t-compile-in-1-7-0-15-but-do-in-1-6-0-27-td121820.html) )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:19:30.160

问题是是否`HasId<String>`是原始类型的超类型`Alert`。规范在这个问题上不是很清楚。

*本着*[4.8]的精神，原始类型的超类型也都应该是擦除类型。所以`Alert`应该有一个超类型`HasId`，但没有`HasId<String>`。但是，该部分仅讨论“超类/接口”，而不是“超类型”。

本着 [4.10] 的精神，超类型是通过直接超类型发现的。目前尚不清楚该部分如何应用于原始类型。它可能打算规定 raw`Alert`有一个直接的超类型`HasStringId`。这似乎很公平。然后因为`HasId<String>`是 的直接超类型`HasStringId`，通过传递性，`HasId<String>`是 的超类型`Alert`！

混淆的根源在于实际上有两种`HasStringId`类型，一种是普通的，一种是原始的。尽管`HasStringId`它本身不是通用的，但它有一个通用的超类型，所以谈论原始版本的`HasStringId`.

规范没有区分 normal 和 raw `HasStringId`。这是一个疏忽。

假设我们将原始表示`HasStringId`为`HasStringId'`，那么 [4.10] 现在更有意义。raw 的直接超级接口`Alert`是 raw `HasStringId'`。raw 的直接超级接口`HasStringId'`是 raw `HasId`。因此`HasId`是 的超类型`Alert`，不是`HasId<String>`。

请参阅[JLS 的第 4 节](http://docs.oracle.com/javase/specs/jls/se5.0/html/typesValues.html)。我在这里链接到上一个 JLS，因为 JLS 7 在第 4.10.2 节中有严重的编辑错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:49:04.347

我相信这与在没有实际类型参数的情况下如何处理擦除有关。当一个参数化类型在没有任何类型参数的情况下被引用时，对这些参数的所有引用都将被删除。

在这种情况下，您使用了一个`Alert`没有任何类型参数的参数化类型。这将删除所有类型参数`Alert`及其超类。`HasId`这会导致extends-clause of中的type参数`HasStringId`被删除。`Alert`then 不会子类化`HasId<String>`，因为`HasStringId`不再扩展它而是扩展`HasId`。

Paul B. 的解决方法或以下解决方法通过始终使用`Alert`其类型参数来避免此问题。

```
class AlertController<T> extends BaseController<Alert<T>> {
    @Override Class<Alert<T>> getModelClass() {
        return cast(Alert.class);
    }

    @SuppressWarnings("unchecked")
    private <T> T cast(final Object o) {
        return (T) o;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T15:03:56.707

对于各种泛型细微差别，有许多文档证明 Java 7 编译器比 Java 6 编译器更严格[。](https://stackoverflow.com/search?q=%5Bjava%5D%5Bgenerics%5D%20java%207%20compiler%20error%20is:question)这些情况通常与变得更加具体的实际语言规范有关。该错误可能与使用任何原始类型有关，本质上是“选择退出”继承类型上的泛型 - 但它是否正确仍有待商榷。

**编辑：我在**[JDK 7 incompatibilities 列表中](http://www.oracle.com/technetwork/java/javase/compatibility-417013.html#jdk7)找不到这个问题。[使用 sun-jdk-1.7.0_10](http://ideone.com/9tsfgq)可以重现该错误，但不能使用 Eclipse 编译器（在泛型细微差别方面，它历来比 javac 有更好的跟踪记录）。您应该[提交一个 Oracle 错误](http://bugreport.sun.com/bugreport/)。

这是一个可能的解决方法：

```
class AlertController extends BaseController<Alert<?>> {
    @Override
    @SuppressWarnings("unchecked")
    Class<Alert<?>> getModelClass() {
        return (Class<Alert<?>>)(Class<?>)Alert.class;
    }
} 
```

# ios - NSArray 在方法结束时失去价值

> ID：15330641
> 
> 赞同：0
> 
> 时间：2013-03-11T03:17:27.647
> 
> 标签：ios, objective-c, restkit

我有一个正在做的项目，想了解更多关于 JSON 和 restkit 的信息。一切都很好，但是我在数组丢失它的值时遇到了麻烦。

这是我的网络请求中执行的最后一个方法。

```
SHRetrieveStoresWS.m

- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{
  self.stores = [[NSArray alloc] initWithArray:objects];
  StoresViewController *viewController = [[StoresViewController alloc] init];
  [viewController didLoadObjects:objects];

  for (Store *aStore in stores) {
      NSLog(@"%@", [aStore longName]);

  }

} 
```

在我的视图控制器中调用此方法。

```
StoresViewController.m

@property (strong, nonatomic) NSArray *data;

- (void)didLoadObjects:(NSArray *)aArray
{

    NSLog(@"%d", aArray.count);
    self.data = [[NSArray alloc] initWithArray:aArray];
    NSLog(@"%d", data.count);
    [self.tableView reloadData];
} 
```

当我要求此方法中的值时，这些值是正确的，但数组随后立即显示 0 个对象。我在这里错过了什么吗？

我稍后会用这种方法检查值。

```
- (IBAction)pushMe:(id)sender
{
    NSLog(@"Data: %d", self.data.count);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:43:19.327

你应该在segue中传递数据......

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if ([segue.identifier isEqualToString: @"MY_IDENTIFIER"]){
        StoresViewController *viewController = segue.destinationViewController;
        [viewController didLoadObjects: objects];
    }
} 
```

那应该对你有用！只需将 MY_IDENTIFIER 更改为您的 segue 的标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T03:26:37.163

问题很可能是您正在创建多个 StoresViewController 实例，而不是为您的网络控制器提供对*原始*实例的引用。

`self`您可以通过在 中`-viewDidLoad`反复打印来向自己展示它`didLoadObjects:`。您会看到指针地址不同。

这条线是罪魁祸首：

```
StoresViewController *viewController = [[StoresViewController alloc] init]; 
```

无需再次实例化 StoresViewController，而是向您的 SHRetrieveStoresWS 类添加一个属性并使用它来保存对您的视图控制器的引用。

```
@property (strong) StoresViewController *viewController; 
```

您需要在`-didLoadObjects:`调用之前设置该属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T04:07:39.253

StoresViewController 被初始化为一个局部变量，它只能在它被声明的方法（又名 objectLoader）中访问。objectLoader 完成后，局部变量不再有效。

# php - 检查字符串是否全是数字和 10 个字符长

> ID：15330643
> 
> 赞同：2
> 
> 时间：2013-03-11T03:17:58.880
> 
> 标签：php

只是寻找一种使用 PHP 来检查字符串是否全是数字和 10 个数字长的快速方法。

例如：

4343434345 - 这将被接受（所有数字 10 个字符）

343434344 - 这不会（9 个字符）

sdfefsefsdf - 这不会。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T03:19:05.577

```
if (preg_match('~^\d{10}$~', $str)) { ... } 
```

或者

```
if (ctype_digit($str) && strlen($str) == 10) { ... } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T03:22:34.680

前任：-

```
if(preg_match('/^\d{10}$/', $str))
    echo "A match was found.";
} else {
    echo "A match was not found.";
} 
```

# c# - 获取下一个最小的双数

> ID：15330644
> 
> 赞同：26
> 
> 时间：2013-03-11T03:18:04.460
> 
> 标签：c#, double, ieee-754, floating-point-precision, epsilon

作为单元测试的一部分，我需要测试一些边界条件。一种方法接受一个`System.Double`参数。

有没有办法获得*下一个最小的*双精度值？（即将尾数减 1 个单位值）？

我考虑过使用`Double.Epsilon`，但这是不可靠的，因为它只是从零开始的最小增量，因此不适用于较大的值（即`9999999999 - Double.Epsilon == 9999999999`）。

那么所需的算法或代码是什么：

```
NextSmallest(Double d) < d 
```

……永远是真的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-11T05:51:28.050

如果你的数字是有限的，你可以在课堂上使用几个方便的方法`BitConverter`：

```
long bits = BitConverter.DoubleToInt64Bits(value);
if (value > 0)
    return BitConverter.Int64BitsToDouble(bits - 1);
else if (value < 0)
    return BitConverter.Int64BitsToDouble(bits + 1);
else
    return -double.Epsilon; 
```

IEEE-754 格式的设计使得构成指数和尾数的位一起形成一个与浮点数具有相同顺序的整数。因此，要获得最大的较小数字，如果值为正，则可以从该数字中减一，如果值为负，则可以加一。

这样做的关键原因是尾数的前导位没有被存储。如果你的尾数全为零，那么你的数字是 2 的幂。如果你从指数/尾数组合中减去 1，你会得到所有的，你将不得不从指数位中借用。换句话说：你必须减少指数，这正是我们想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T05:23:53.473

双精度浮点的维基百科页面在这里：[http ://en.wikipedia.org/wiki/Double_precision_floating-point_format](http://en.wikipedia.org/wiki/Double_precision_floating-point_format)

为了好玩，我编写了一些代码来分解`double`格式的二进制表示，减少尾数并重新组合结果双精度数。由于尾数中的隐含位，我们必须检查它并相应地修改指数，它可能会在极限附近失败。

这是代码：

```
public static double PrevDouble(double src)
{
    // check for special values:
    if (double.IsInfinity(src) || double.IsNaN(src))
        return src;
    if (src == 0)
        return -double.MinValue;

    // get bytes from double
    byte[] srcbytes = System.BitConverter.GetBytes(src);

    // extract components
    byte sign = (byte)(srcbytes[7] & 0x80);
    ulong exp = ((((ulong)srcbytes[7]) & 0x7F) << 4) + (((ulong)srcbytes[6] >> 4) & 0x0F);
    ulong mant = ((ulong)1 << 52) | (((ulong)srcbytes[6] & 0x0F) << 48) | (((ulong)srcbytes[5]) << 40) | (((ulong)srcbytes[4]) << 32) | (((ulong)srcbytes[3]) << 24) | (((ulong)srcbytes[2]) << 16) | (((ulong)srcbytes[1]) << 8) | ((ulong)srcbytes[0]);

    // decrement mantissa
    --mant;

    // check if implied bit has been removed and shift if so
    if ((mant & ((ulong)1 << 52)) == 0)
    {
        mant <<= 1;
        exp--;
    }

    // build byte representation of modified value
    byte[] bytes = new byte[8];
    bytes[7] = (byte)((ulong)sign | ((exp >> 4) & 0x7F));
    bytes[6] = (byte)((((ulong)exp & 0x0F) << 4) | ((mant >> 48) & 0x0F));
    bytes[5] = (byte)((mant >> 40) & 0xFF);
    bytes[4] = (byte)((mant >> 32) & 0xFF);
    bytes[3] = (byte)((mant >> 24) & 0xFF);
    bytes[2] = (byte)((mant >> 16) & 0xFF);
    bytes[1] = (byte)((mant >> 8) & 0xFF);
    bytes[0] = (byte)(mant & 0xFF);

    // convert back to double and return
    double res = System.BitConverter.ToDouble(bytes, 0);
    return res;
} 
```

所有这些都会通过尾数最低位的变化为您提供与初始值不同的值......理论上:)

这是一个测试：

```
public static Main(string[] args)
{
    double test = 1.0/3;
    double prev = PrevDouble(test);
    Console.WriteLine("{0:r}, {1:r}, {2:r}", test, prev, test - prev);
} 
```

在我的电脑上给出以下结果：

```
0.33333333333333331, 0.33333333333333326, 5.5511151231257827E-17 
```

差异是存在的，但可能低于舍入阈值。但是，表达式的`test == prev`计算结果为 false，并且存在如上所示的实际差异 :)

# java - 包/导航器资源管理器中的 Eclipse 类导航

> ID：15330647
> 
> 赞同：0
> 
> 时间：2013-03-11T03:18:41.667
> 
> 标签：java, eclipse

eclipse中是否有一个插件，当我在eclipse上打开一个开放类时，它会在包资源管理器或导航器中突出显示该类名。所以我不想手动检查包声明并在包探索或导航器中探索它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:26:43.087

首先你应该检查你的eclipse是哪个版本，如果你的版本是Java EE dev，那么它就有这个功能。只需单击 package explore 或 navigator 顶部的 2 个箭头按钮，然后您会看到当您在编辑器中更改文件时，package explore 或 navigator explore 将专注于您在编辑器中选择的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T03:28:31.043

不是自动的，但您可以使用**Alt-Shift-W**打开“显示在...”中，为您提供在导航器、包资源管理器等中显示它的选项。

# css - 在 css 中使用溢出

> ID：15330652
> 
> 赞同：2
> 
> 时间：2013-03-11T03:19:18.653
> 
> 标签：css, html, scrollbar, overflow

如何将前 2 个 div 的宽度设置为动态（适合内容宽度），而第 3 个 div 应该使用剩余的水平空间并且可以水平滚动。

我需要的结果是所有 3 个 div 并排放置，并且第 3 个 div 可以水平滚动。

我的脚本如下

HTML

```
<div id="a">
  <table>
    <tr><td>text</td></tr>
  </table>
</div>
<div id="b">
  <table>
    <tr><td>text</td></tr>
  </table>
</div>
<div id="c">
  <table>
    <tr><td>text</td></tr>
  </table>
</div> 
```

CSS

```
div#a
{
float: left;
}
div#b
{
float: left;
}
div#c
{
float: left;
width: 100%;
overflow-x: scroll;
} 
```

上面的脚本将 div3 推送到下一行，这是我不想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T03:52:11.827

如果您向左浮动，`#a`将填充父级宽度的其余部分。`#b``#c`

要获得`#c`水平滚动，您可以将其内容容器设置为：

```
#c .scroll-content {

    /* You shouldn't do this on a table, but rather on a wrapping container. */
    display: inline-block;
    white-space: nowrap;
    overflow: auto;
    overflow-y: hidden;
} 
```

我[在 JSFiddle](http://jsfiddle.net/kDTLM/5/)做了一个例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T03:27:17.483

您应该设置一个父 div 将它们全部放在同一行中。像这样的东西应该可以工作。

```
<div id="parent">

<div id="a">
  <table>
    <tr><td>text</td></tr>
  </table>
</div>
<div id="b">
  <table>
    <tr><td>text</td></tr>
  </table>
</div>
<div id="c">
  <table>
    <tr><td>text</td></tr>
  </table>
</div>

</div>

div#a
{
float: left;
}
div#b
{
float: left;
}
div#c
{
float: left;
}

#parent{
width: 100%;
overflow-x: scroll;
} 
```

此外，您可能想要重构您的代码。由于所有的 div 都向左浮动，因此您可能只想使用一个向左浮动的类。我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T03:54:32.567

CSS...

```
 #a {
float:left;
border:solid 1px #000;
width:33%;
}   

#b {
float:left;
border:solid 1px #000;
width:33%;
}

#c {
float:left;
border:solid 1px #000;
width:33%;
}

.scroll{
float:left;
overflow:auto;
width:100%;
}

.content {
width:1000px;
overflow:auto;
} 
```

和HTML...

```
<div id="a">
This is text within my first content box
</div>

<div id="b">
This is text within my second content box 
</div>

<div id="c">
<div class="scroll-content">
This is text within my third content box and this is horizontal and scrollable
</div>
</div> 
```

**再次更新下面的 JSFIDDLE 链接！！！**

还有一个关于[jsfiddle](http://jsfiddle.net/GeLqV/1/)的演示- [http://jsfiddle.net/GeLqV/1/](http://jsfiddle.net/GeLqV/1/)

马克，这对你有用。我现在看到您希望所有三个 div 位于同一行，并且最后一个能够水平滚动。看看我的 jsfiddle 演示。无论您的屏幕尺寸是多少，所有三个 div 的尺寸都是流动的，并且会保持在一起（大部分情况下）。

# ruby - 如何在实例化时切换实现？

> ID：15330653
> 
> 赞同：0
> 
> 时间：2013-03-11T03:19:22.843
> 
> 标签：ruby

我在 Ruby 中有一个包含一些东西的类，我会调用`FooBox`：

```
class FooBox
  ...
end 
```

我有两个可能的后备数据存储，用于`FooBox`调用`BoxA`并且`BoxB`具有不同的特征但具有相同的接口：

```
class BoxA
  include Enumerable
  def put_stuff(thing)
    ...
  end
end

class BoxB
  include Enumerable
  def put_stuff(thing)
    ...
  end
end 
```

如何实例化 a `FooBox`，并根据参数决定是否使用 a`BoxA`或`BoxB`实现来支持它？我不想将实现传递给构造函数；我只想通过一些东西来确定使用哪种。

```
class FooBox
  def initialize(implementation_choice)
    # ???
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:30:57.450

我通常会这样做：

```
class BoxA
  def self.match? options
    # figure out if BoxA can be used given options
  end
end

# Implement BoxB (and other strategies) similarly to BoxA

class FooBox
  STRATEGIES = [BoxA, BoxB]

  def initialize options
    @options = options
  end

  def strategy
    @strategy ||= STRATEGIES.detect { |strategy| strategy.match? @options }
  end
end 
```

这保留了“了解”策略是否能够在策略本身中使用的责任（而不是使上下文类成为整体），然后只选择列表中表明它可以工作的第一个。

我已经多次使用这种模式（以及针对稍微不同的问题的类似变体）并且发现它非常干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:34:38.433

简单的解决方案是为策略类型和策略类创建一个映射，就像@Andrew Marshall 的解决方案一样

但为了更好，我会考虑两件事：

*   `FooxBox`策略的持有者（这里是 这不是一种灵活的方法，考虑到有一天你想添加另一种策略，去代码并添加它？使用 ruby​​，我们可以轻松地通过“自我注册”来做到这一点。
*   你不希望策略持有者会疯狂地返回实现，我的意思是 'BoxA' 和 'BoxB' 或者有一天的 'BoxXYZ' 应该属于同一个策略概念，在 Java 中，这可能意味着它们都应该实现一个`interface`, 与 ruby我们通常这样做`include SomeMoudle`

在我的应用程序中，我使用以下解决方案（只是演示）

```
module Strategies
  def self.strategies
    @@strategies ||= {}
  end

  def self.strategy_for(strategy_name)
    @@strategies[strategy_name]
  end
end

module Strategy
  def self.included(base)
    base.class_eval do
      def self.strategy_as(strategy_name)
        Strategies.strategies[strategy_name] = self
      end
    end
  end 
end

class BoxA
  include Strategy

  strategy_as :box_a

  def do_stuff
    puts "do stuff in BoxA"
  end
end 

class BoxB
  include Strategy

  strategy_as :box_b

  def do_stuff
    p "do stuff in BoxB"
  end
end

## test 
Strategies.strategy_for(:box_a).new.do_stuff
Strategies.strategy_for(:box_b).new.do_stuff 
```

如果要检测带有匹配块的策略，可以更改`strategy_as`为接受块。然后使用`Strategies.strategy_for{...}.new.do_stuff`

# javascript - Backbone.View 事件只触发一次

> ID：15330659
> 
> 赞同：1
> 
> 时间：2013-03-11T03:20:13.373
> 
> 标签：javascript, backbone.js, backbone-views, backbone-events

jumpToWave 事件只触发一次，我不明白为什么。

这是我的看法：

```
var WaveModalView = Backbone.View.extend({

template:_.template($('#tpl-wave-modal').html()),

events: {
    'hidden': 'remove',
    'click .jumpToWaveBtn':'jumpToWave'
},
    jumpToWave:function(e){
        e.preventDefault();
        console.log("JMP")
        var marker = this.model.collection.markers[this.model.id];
        map.panTo(marker.getPosition());
        bounceMarker(marker,1750);
    },
render:function () {
    var model = this.model;
    var that  = this;
    $(this.el).html(this.template(model.toJSON()));

    if(model.get('waveReviews').length > 0){
        var reviewList = new WaveReviewList({model: model});
        $('#waveReviews' + model.id).html(reviewList.render().el);
    }

    this.$("#waveSync" + model.id).click(function(e){
        e.preventDefault();
        if(window.me){
            requestSyncWave(model.id,function(data){
               window.me.fetch();
            });
        }
    });

    this.$("#waveEdit" + model.id).click(function(e){
        e.preventDefault();
        window.waveUnderEdit = model;
        $(that.el).children(":first").modal('hide');
        openWaveEditModal(model);

    });

    return this;
}

}); 
```

这是模板中的相关按钮：

```
<button class="btn btn-info jumpToWaveBtn" data-dismiss="modal" aria-hidden="true">Auf Karte
            anzeigen</button> 
```

单击按钮时，我有多个模式。每个模式只触发一次事件，之后不再记录“JMP”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T03:57:49.720

我没有看到您的代码`render`在 上调用`WaveModalView`，但我怀疑问题是您确实`render()`从其他地方调用，而后者又调用`$(this.el).html(...)`，它替换了视图元素的内容，并且新插入的内容没有绑定事件到它的元素。

如果这确实是问题，您可以通过在函数`this.delegateEvents()`末尾添加来解决它。`render()`

例如，检查这个问题和答案：[为什么在 Backbone.js 中第二次渲染后事件没有触发？](https://stackoverflow.com/questions/8307911/why-are-events-not-firing-after-the-second-render-in-backbone-js)

# filter - WooCommerce 自定义循环从一个特定类别中获取所有产品

> ID：15330666
> 
> 赞同：3
> 
> 时间：2013-03-11T03:20:41.417
> 
> 标签：filter, categories, woocommerce

我尝试在 woo comm 插件中找到代码（短代码），该插件列出了一个类别的所有产品，以便能够修改它...... 1 小时后没有运气，仍然没有找到。

所以我开始自己编码（重新发明轮子），这就是我试图得到的

从类别 ID="151" 中获取所有产品，并能够输出名称、永久链接等...

这是现在的代码，它返回一切......太多了！我不知道如何过滤它

```
{
$args = array(
    'post_type' => 'product',
    'posts_per_page' => 99
);

$loop = new WP_Query( $args );
if ( $loop->have_posts() ) {
while ( $loop->have_posts() ) : $loop->the_post();
    //echo get_title()."<br/>";
    var_dump($loop);
endwhile;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T05:25:43.960

这是我找到的代码，并根据我的需要进行修改

```
function get_me_list_of($atts, $content = null)
{   
    $args = array( 'post_type' => 'product', 'posts_per_page' => 10, 'product_cat' => $atts[0], 'orderby' => 'rand' );

    $loop = new WP_Query( $args );

    echo '<h1 class="upp">Style '.$atts[0].'</h1>';
    echo "<ul class='mylisting'>";
    while ( $loop->have_posts() ) : $loop->the_post(); 
    global $product; 

    echo '<li><a href="'.get_permalink().'">'.get_the_post_thumbnail($loop->post->ID, 'thumbnail').'</a></li>';

    endwhile; 

    echo "</ul>";

    wp_reset_query(); 

}

?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-02T07:45:31.673

`[product_category]`中定义的简码`/woocommerce/includes/class-wc-shortcodes.php`是一个很好的起点，尤其是在 Woocommerce 不断发展的情况下！

它的核心只是一个标准的 WP_Query，添加了一些额外的代码来进行分页，从 Woocommerce 设置中设置排序顺序，并检查产品是否标记为可见。

因此，如果您去掉与短代码相关的代码，并想要一个从具有特定 slug 的类别中获取可见产品的函数，它看起来像这样：

```
function getCategoryProducts($category_slug) {
    // Default Woocommerce ordering args
    $ordering_args = WC()->query->get_catalog_ordering_args();

    $args = array(
            'post_type'             => 'product',
            'post_status'           => 'publish',
            'ignore_sticky_posts'   => 1,
            'orderby'               => $ordering_args['orderby'],
            'order'                 => $ordering_args['order'],
            'posts_per_page'        => '12',
            'meta_query'            => array(
                array(
                    'key'           => '_visibility',
                    'value'         => array('catalog', 'visible'),
                    'compare'       => 'IN'
                )
            ),
            'tax_query'             => array(
                array(
                    'taxonomy'      => 'product_cat',
                    'terms'         => array( esc_attr( $category_slug ) ),
                    'field'         => 'slug',
                    'operator'      => 'IN' // Possible values are 'IN', 'NOT IN', 'AND'.
                )
            )
        );

    if ( isset( $ordering_args['meta_key'] ) ) {
            $args['meta_key'] = $ordering_args['meta_key'];
    }
    $products = new WP_Query($args);

    woocommerce_reset_loop();
    wp_reset_postdata();

    return $products;
} 
```

传入 slug，您将使用您在 Woocommerce 设置中配置的相同顺序返回标准的 wordpress 帖子集合。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-05T21:24:30.257

我有类似的问题，因为我想为“自定义页面”获取“Fabrics”产品，这是我使用的代码。

```
<ul class="products">
<?php
    $args = array(
        'post_type' => 'product',
        'posts_per_page' => 12,
        'product_cat' => 'fabrics'
        );
    $loop = new WP_Query( $args );
    if ( $loop->have_posts() ) {
        while ( $loop->have_posts() ) : $loop->the_post();
            woocommerce_get_template_part( 'content', 'product' );
        endwhile;
    } else {
        echo __( 'No products found' );
    }
    wp_reset_postdata();
?>
</ul><!--/.products--> 
```

使用上面的代码意味着你可以获得默认的内联样式、类和其他必要的标签。

# mongodb - 如何删除 mapReduce 中的“值”？

> ID：15330668
> 
> 赞同：2
> 
> 时间：2013-03-11T03:21:07.357
> 
> 标签：mongodb, mapreduce

我想知道是否可以删除 map-reduce 中的“值”键，以便最终结果直接包含值而不是在“值”键中。我希望只使用命令来完成它（所以没有 Javascript 变量等）

例如，map-reduce 输出通常是

```
 [
           {
                   "_id" : 0,
                   "value" : {
                           "name" : "Apple",
                           "sold" : 1234
                   }
           },
           {
                   "_id" : 1,
                   "value" : {
                           "name" : "Amazon",
                           "sold" : 5678
                   }
           }
   ] 
```

我希望它最终成为

```
 [
           {
                   "_id" : 0,
                   "name" : "Apple",
                   "sold" : 1234
           },
           {
                   "_id" : 1,
                   "name" : "Amazon",
                   "sold" : 5678
           }
   ] 
```

我认为可以使用 findAndModify 命令完成，但我不确定如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:59:27.913

目前看来是不可能的。Mongo 报告了[JIRA 票证](https://jira.mongodb.org/browse/SERVER-2517)。

# c# - 在 Windows 8 应用程序中使用 Google 驱动器 .Net APIs？

> ID：15330670
> 
> 赞同：1
> 
> 时间：2013-03-11T03:21:16.440
> 
> 标签：c#, .net, windows-8, windows-runtime, google-drive-api

我创建了一个 Windows 8 应用商店应用空白页面添加了 Google 驱动器 .dll 文件以引用项目，然后清理并构建解决方案。我收到 [Cannot find type System.ComponentModel.TypeConverter in module System.dll" 错误。我该如何解决这个问题？

# php - 用爆炸或其他功能内容选择成 2 个标签

> ID：15330671
> 
> 赞同：0
> 
> 时间：2013-03-11T03:21:50.900
> 
> 标签：php, explode

我如何使用 php 将我拥有的这个元素分离到文件中

例如 ：

```
##cat 1##
**
element 1
element 2
element 3
**

##cat 2##
**
element 1
element 2
element 3
**

##cat 3##
**
element 1
element 2
element 3
** 
```

我在很多时间的 php 手册中看到，我尝试过爆炸等，但没有得到好的结果，有可能使用 php 发送简单循环运行所有这些内容，并在每种情况下将内容分隔为 ## 或 ** 并显示每个元素分离？

我尝试这样做但效果不佳，因为我不能这样做并尝试多次使用 foreach ，explode ，bucle for 等，并且总是得到相同的结果并且没有显示所有元素

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:37:25.267

我不确定我是否理解你的问题。如果您想接受上面的输入并生成以下内容：

```
Array
(
    [##cat 1##] => Array
        (
            [0] => element 1
            [1] => element 2
            [2] => element 3
        )

    [##cat 2##] => Array
        (
            [0] => element 1
            [1] => element 2
            [2] => element 3
        )

    [##cat 3##] => Array
        (
            [0] => element 1
            [1] => element 2
            [2] => element 3
        )
) 
```

尝试这个：

```
$input_text =<<<INPUT_TEXT
##cat 1##
**
element 1
element 2
element 3
**

##cat 2##
**
element 1
element 2
element 3
**

##cat 3##
**
element 1
element 2
element 3
**
INPUT_TEXT;

$output = array();
$current = NULL;
foreach( explode( "\n", $input_text ) as $line )
{
    $line = trim( $line );
    if( empty( $line ) )
    {
        continue;
    }
    if( substr( $line, 0, 2 ) == '##' )
    {
        $current = trim( $line );
        continue;
    }
    if( substr( $line, 0, 2 ) == '**' )
    {
        continue;
    }
    if( !empty( $current ) )
    {
        $output[$current][] = $line;
    }
}
print_r( $output ); 
```

# iphone - 手电筒模式和闪光模式的区别？

> ID：15330676
> 
> 赞同：0
> 
> 时间：2013-03-11T03:22:09.153
> 
> 标签：iphone, ios, avfoundation

下面的两个代码块似乎没有区别：

```
[self.myDevice lockForConfiguration:nil];
[self.myDevice setTorchMode:AVCaptureTorchModeOn];
[self.myDevice setFlashMode:AVCaptureFlashModeOn];
[self.myDevice unlockForConfiguration]; 
```

和：

```
[self.myDevice lockForConfiguration:nil];
[self.myDevice setTorchMode:AVCaptureTorchModeOn];
[self.myDevice unlockForConfiguration]; 
```

我的问题是，为什么 setFlashMode 首先在那里，因为它似乎没有任何效果。我问这个是因为我试图让光线与使用默认相机应用程序拍照时一样亮。在您自己的应用程序中使用灯光并不像他们的那样明亮。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-03T09:01:17.673

下面的代码**永久打开闪光灯**

```
 [device lockForConfiguration:nil];
    [device setTorchMode:AVCaptureTorchModeOn];  // use AVCaptureTorchModeOff to turn on
    [device unlockForConfiguration]; 
```

直到您**将其设置为关闭**

```
 [device lockForConfiguration:nil];
    [device setTorchMode:AVCaptureTorchModeOff];  // use AVCaptureTorchModeOff to turn off
    [device unlockForConfiguration]; 
```

下面的行是您在**相机中进行的****闪光灯设置**- 从 iphone 单击图片时

 **```
[self.myDevice setFlashMode:AVCaptureFlashModeOn]; 
```**

# chef-infra - 烹饪书存储在 Chef Server 的什么位置？

> ID：15330678
> 
> 赞同：11
> 
> 时间：2013-03-11T03:22:21.800
> 
> 标签：chef-infra

环境：CentOS 6 Chef 10 1个服务器，1个节点，1个工作站

上传到 Chef 服务器的说明书的位置或路径是什么？例如，从工作站，

# 刀菜谱上传入门

食谱在服务器中的什么位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-28T19:33:36.343

它们存储在书架中，这是一个可配置的路径。您可以通过查看chef-server 食谱的[属性文件来查看所有平台上的值。](https://github.com/cookbooks/chef-server/blob/qa/attributes/default.rb#L23)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-13T04:57:36.217

它存储在 bookshelf 目录中，可以对其进行修改，有关食谱的文件位于 /var/opt/chef-server/bookshelf/data/bookshelf 。在该目录中，您可以找到所有上传的食谱，还可以查看食谱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-29T12:02:37.837

在 AWS linux 中，食谱文件位于**/var/opt/chef-server/bookshelf/data/bookshelf**

[检查此链接以获取更多信息](https://github.com/opscode/omnibus-chef-server/blob/master/files/chef-server-cookbooks/chef-server/attributes/default.rb)

# objective-c - 使用 Objective-C 为 OS X 应用程序发送 CURL 命令

> ID：15330686
> 
> 赞同：0
> 
> 时间：2013-03-11T03:23:32.303
> 
> 标签：objective-c, macos, parsing, curl

我正在尝试将 Parse API 集成到我为学校做的 OS X 应用程序中。应用程序应该发送一个推送通知，所以我想我会使用 Parse 的 REST API 来完成这个。

下面的代码是 Parse 提供的用于发送通知的示例 CURL 代码。

```
curl -X POST \
  -H "X-Parse-Application-Id: XXXXXXXXXXXXXXXXXXXXXX" \
  -H "X-Parse-REST-API-Key: XXXXXXXXXXXXXXXXXXXXXX" \
  -H "Content-Type: application/json" \
  -d '{
        "channels": [
          "Giants",
          "Mets"
        ],
        "data": {
          "alert": "The Giants won against the Mets 2-3."
        }
      }' \
  https://api.parse.com/1/push 
```

完成过去 CURL 代码的 Objective-C 等效项是什么？或者你有什么建议？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:46:09.887

您可以使用 Foundation 框架中的[URL 处理 API](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)。这是一个例子：

```
NSURL *url = [NSURL URLWithString:@"https://api.parse.com/1/push"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];
[request addValue:@"XXXXXXXXXXXXXXXXXXXXXX" forHTTPHeaderField:@"X-Parse-Application-Id"];
[request addValue:@"XXXXXXXXXXXXXXXXXXXXXX" forHTTPHeaderField:@"X-Parse-REST-API-Key"];
[request addValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:@"{\"channels\": [\"Giants\",\"Mets\"], \"data\": {\"alert\": \"The Giants won against the Mets 2-3.\"}}"];
NSURLConnection *connection=[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

然后实现协议要求的方法[`NSURLConnectionDelegate`](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate)。

# json - AFNetworking 无法识别 JSON 参数 POST

> ID：15330688
> 
> 赞同：0
> 
> 时间：2013-03-11T03:24:10.270
> 
> 标签：json, ios6, afnetworking

[已解决] 我正在尝试编辑 AFHTTPClient.m 以使其与 POST 方法一起使用

```
-(NSMutableURLRequest *)requestWithMethod:(NSString *)method
                                  path:(NSString *)path
                            parameters:(NSDictionary *)parameters 
```

像这样 ：

```
if ([method isEqualToString:@"GET"] ||[method isEqualToString:@"POST"] || [method isEqualToString:@"HEAD"] || [method isEqualToString:@"DELETE"]) 
```

我对带有参数 userDevice 的 POST 方法有问题，我有来自 AFHTTPClient 的函数子类，如下所示

编辑：

我使用了不同的方法，但结果相同

```
-(void)loginWithEmail:(NSString *)email password:(NSString *)passwords
{

NSString *baseurl = @"http://localhost.com:9000/";

AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:baseurl]];

[httpClient registerHTTPOperationClass:[AFJSONRequestOperation class]];

[httpClient setDefaultHeader:@"Accept" value:@"application/json"];

[httpClient setAuthorizationHeaderWithUsername:email password:passwords]; 
```

然后这是我的参数：

```
NSDictionary *data = [NSDictionary dictionaryWithObjectsAndKeys:
                      model, @"deviceModel",
                      systemVersion, @"deviceVersion",
                      [NSNumber numberWithBool:0], @"productionMode",
                      appVersion, @"appVersion",
                      deviceType,@"deviceType", nil];

NSError *error = nil;
NSDictionary* jsonObject = [NSDictionary dictionaryWithObjectsAndKeys:data, @"userDevice", nil];

NSData *jsonLogin =[NSJSONSerialization dataWithJSONObject:jsonObject options:NSJSONWritingPrettyPrinted error:&error];
NSString *jsonLoginString = [[NSString alloc] initWithData:jsonLogin encoding:NSUTF8StringEncoding];
NSLog(@"JSON LOGIN OUTPUT :%@", jsonLoginString);

[httpClient setParameterEncoding:AFJSONParameterEncoding]; 
```

我要求使用此代码：

```
NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST"
                                                        path:@"/ios/login"
                                                  parameters:[NSDictionary dictionaryWithObjectsAndKeys:jsonLoginString,@"userDevice", nil]
                                ];    
AFJSONRequestOperation *operation = nil;

operation = [AFJSONRequestOperation
             JSONRequestOperationWithRequest:request
             success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
                 NSLog(@"Response : %@", request);
                 NSLog(@"JSON: %@",JSON);

             }
             failure:^(NSURLRequest *request , NSHTTPURLResponse *response, NSError *error , id JSON ){

                 NSLog(@"error: %@", error);
             }];

[operation start]; 
```

这是我想要的示例 json：

```
"userDevice" : {
    "appVersion" : "1.0",
    "deviceModel" : "iPhone Simulator",
    "productionMode" : false,
    "deviceType" : "iPhone Simulator",
    "deviceVersion" : "6.1"
} 
```

我错过了什么吗？

# css - 为什么 CSS 中没有浮动中心？

> ID：15330689
> 
> 赞同：21
> 
> 时间：2013-03-11T03:24:44.793
> 
> 标签：css, css-float

我发现 CSS 中没有浮动中心，我有点失望。然而，我忍不住问自己为什么。虽然很多人想用它来使内容居中，但我希望用它来将一堆块浮动到动态页面大小的行中。不幸的是，没有浮动中心，它看起来很草率，因为一侧有额外的空间（整个块的任何部分都不适合）。令我难过的是，浮动的预期用途因缺少此属性而受到损害。

我看不出为什么没有浮动中心的原因，并且想知道是否有人有原因，无论是技术原因还是其他原因，为什么浮动中心未包含在标准中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T03:58:24.680

而不是 using `float: left`，而是`display: inline-block`在单个元素上使用并将其容器居中。

[http://jsfiddle.net/ExplosionPIlls/rAkNY/5/](http://jsfiddle.net/ExplosionPIlls/rAkNY/5/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T03:40:25.377

是的，没有浮动中心/中间，W3C 可能有答案。

有`<center>`标签但不再有。

> 自 HTML 4 起，该`<center>`标签已被弃用，使用它会产生一些不同的问题。以 HTML 为中心的元素在不同浏览器中的显示方式可能不同，使用标签可以增加页面加载时间。此外，大量使用会使您的网站重新设计复杂化——删除数百个标签比更改样式表中的一个样式规则需要更长的时间。
> 
> 该标签在很多很多年前就被正式弃用了，但大多数浏览器仍然通过它们的向后兼容特性来识别它。所以，是的，如果你有什么东西，它会居中。但是，为了适应未来，您应该改用现代 CSS 居中方法。

采用`margin:0 auto;`

如果您将其他内容居中，则 margin: 0 auto; 大多数时候会让你的元素居中。（快速说明：你的元素必须有一个声明的宽度才能工作。）

> 边距：0 自动；rule 是 0 上下边距和自动左右边距的简写。自动左右边距协同工作，将元素推入其容器的中心。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T03:58:28.293

没有浮动中心，因为浮动将元素从内容流中取出并将它们放置在尽可能左/右的位置。自己漂浮只会让东西侧向移动。最后一部分不是 100%，但我认为它与印刷有关。我知道花车的想法来自印刷行业。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-04T10:27:34.830

如果要使内容居中：
1\. 设置 css 属性**display: inline-block**或**inline**到每个内容项。
2\. 将 css 属性**text-align:center**设置为其父节点。

# android - 获取我在 android 中单击的列表项的文本

> ID：15330692
> 
> 赞同：0
> 
> 时间：2013-03-11T03:24:56.960
> 
> 标签：android

我有一个列表视图。我必须得到我点击的列表项的文本。我尝试使用 onitemclick。但我无法得到。可以一些1请解释我如何得到它。

这是我的 onitemclick 方法

```
lstcities.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick (AdapterView<?> parent, View view, int position, long id) {
                // TODO Auto-generated method stub

//              String str =(String) lstcities.getItemAtPosition(position);
                String S =view.getContext().toString();
            Toast.makeText(getApplicationContext(),
                  "Click ListItem Number " +  S, Toast.LENGTH_LONG)
                  .show(); 
```

谢谢 ramu

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:31:47.110

尝试这个，

```
setListAdapter(new ArrayAdapter<String>(this, R.layout.yourlayout,your list));

    ListView listView = getListView();
    listView.setTextFilterEnabled(true);

    listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // When clicked, show a toast with the TextView text
           String selectedValue = (String) getListAdapter().getItem(position);
    Toast.makeText(this, selectedValue, Toast.LENGTH_SHORT).show();

        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T04:34:54.353

假设您正在使用 a `TextView`，您应该能够做到

```
String text = parent.getItemAtPosition(position).getText().toString() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T03:31:52.380

您可以从适配器中使用的 ArrayList 获取字符串。

喜欢 ：`String str = arrayList[position]; //Assume arrayList here is String[];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-25T14:12:51.473

另一种方法是：-

```
lstcities.setOnItemClickListener(new OnItemClickListener()
{

        @Override
        public void onItemClick (AdapterView<?> parent, View view, int position, long id) 
         {
            String text = (String) (((ListAdapter)parent.getAdapter).getItem(position));
            // Do what you want to with this text
         }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T04:47:45.857

如果您对列表项使用自定义视图（自己的 xml）。您将获得整个 xml 的视图作为第二个参数（视图视图），您可以使用它找到您的 textView，如 view.findViewById（您的文本视图 id）；如果您使用 android 定义项目 android.R.layout.list_item_1 然后使用 textview 对视图对象进行类型转换；

使用此 textView，您可以获得 textView 的文本或以相同方式从列表项访问任何视图。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-06T03:39:14.217

您只需添加以下语句：

```
String selectedFromList = (String) (lv.getItemAtPosition(position)); 
```

# web-scraping - 简单的 html dom 解析器获取没有标签的文本

> ID：15330693
> 
> 赞同：0
> 
> 时间：2013-03-11T03:25:12.680
> 
> 标签：web-scraping, web-crawler, simple-html-dom

我想使用 PHP 使用简单的 HTML DOM 解析器来解析 HTML 对象。我要提取的特定部分未正确包装在任何标签中。

```
<li class="tags">
   Required text: <span itemprop="testCat"><a href="/topics/new-topic/index.html" title="New Topic" onclick="s_objectID=&quot;http://www.example.com/topics/new-topic/index.html_1&quot;;return this.s_oc?this.s_oc(e):true">New Topic</a></span>, <span itemprop="testCat"><a href="/topics/new-topic-2/index.html" title="New Topic" onclick="s_objectID=&quot;http://www.example.com/topics/new-topic-2/index.html_1&quot;;return this.s_oc?this.s_oc(e):true">New Topic</a></span>, <span itemprop="testCat"><a href="/topics/new-topic-3/index.html" title="New Topic 3" onclick="s_objectID=&quot;http://www.example.com/topics/new-topic-3/index.html_1&quot;;return this.s_oc?this.s_oc(e):true">New Topic 3</a></span>, 
   <div class="more">
      <a href="javascript: void(0);" class="more-trigger" onclick="s_objectID=&quot;javascript: void(0);_1&quot;;return this.s_oc?this.s_oc(e):true">more</a>
      <div class="more-tags" style="top: 15px; left: 0px; display: none;">
         <div class="hd"></div>
         <div class="bd">
            <ul id="topic-filedin">
               <li>Another Required Text :
                  <a href="/topics/new-topic-4/index.html" onclick="s_objectID=&quot;http://www.example.com/topics/new-topic-4/index.html_1&quot;;return this.s_oc?this.s_oc(e):true">New Topic 4</a>
               </li>
               <li>Topic Intended For :
                  <a href="/topics/for-kids/index.html" onclick="s_objectID=&quot;http://www.example.com/topics/for-kids/index.html_1&quot;;return this.s_oc?this.s_oc(e):true">For Kids</a>
               </li>
            </ul>
         </div>
         <div class="ft"></div>
      </div>
      <script type="text/javascript">
         SNI.Node.ArticleInfo.moreTags();
      </script> 
   </div>
</li> 
```

我可以使用将文本包裹在标签内

```
$categories = $single_content->find('li[class=tags] span');
foreach ($categories as $key) {
  echo $key->plaintext . '<br>';
} 
```

我无法找出`Required text`and`Another Required Text`和`Topic Intended For`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:26:59.803

要获得“另一个必需的文本”和“用于的主题”，您可以使用它 -

$text = $single_content->find("ui[class=topic-filedin]/li");

$textArray = 数组（）；

foreach($text as $ta)

{

```
$textArray[] = $ta->plaintext; 
```

}

您将在数组中获得所需的文本。

# c# - 如何在 C# 中复制列表

> ID：15330696
> 
> 赞同：6
> 
> 时间：2013-03-11T03:25:42.230
> 
> 标签：c#, asp.net, code-behind

我想复制一个对象列表，但我不断获得对象之间的引用。

```
List<MyClass> copy = original; 
```

当我更改副本列表中的值时，原始列表也最终被修改。有没有办法解决它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T03:26:52.673

你可以这样做：

```
List<MyClass> copy = original.ToList(); 
```

这将制作列表的逐个元素副本，而不是复制对列表本身的引用。

# paypal - Paypal - 如何知道用户是否不会在下个月支付订阅费？

> ID：15330698
> 
> 赞同：2
> 
> 时间：2013-03-11T03:25:52.777
> 
> 标签：paypal

我制作了一个会员系统，它使用每月 9.9 美元的贝宝订阅。在 ipn.php 中，我可以处理用户第一次付费或失败的情况。

```
<?php

ini_set('log_errors', true);
ini_set('error_log', dirname(__FILE__).'/ipn_errors.log');

include('ipnlistener.php');
$listener = new IpnListener();

$listener->use_sandbox = true;

try {
    $listener->requirePostMethod();
    $verified = $listener->processIpn();
} catch (Exception $e) {
    error_log($e->getMessage());
    exit(0);
}

if ($verified) {

// he paid

} else {

// he didn't pay

}

?> 
```

但是，如果用户下个月不支付订阅费，我不会怎么办。我应该考虑使用哪种方法来检测这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:40:12.943

这并不像“验证 => 他付钱”那么简单。不是用长粉笔。有几种不同的交易*类型。*您必须*查看*和解释。其中一个是取消，另一个是 EOT（学期结束）等。

例如，在这种情况下，如果您下个月没有获得 subscr_payment IPN，请不要续订。

# javascript - 使用 JavaScript 上传下载的图像

> ID：15330699
> 
> 赞同：1
> 
> 时间：2013-03-11T03:26:09.630
> 
> 标签：javascript, jquery, file-upload

我不确定这在概念上是否可行，但我正在寻找上传从另一个站点下载的图像的选项。例如，使用 Facebook API 选择一张图片，然后将其上传到我的网站（接受提交的图片）。

我知道一种选择是将图像转换为 Base64 字符串然后提交，但据我所知，图像的大小是一个限制。此外，客户还难以处理更大的图像。

警告当然是只使用 JavaScript，不使用 Flash 或 ActiveX。当我说 JavaScript 时，我当然包括 JavaScript 库。

# visual-studio-2010 - MSBuild 的 Targets 属性和 Target 标签的区别

> ID：15330700
> 
> 赞同：1
> 
> 时间：2013-03-11T03:26:12.377
> 
> 标签：visual-studio-2010, visual-studio, msbuild, target

我对 MSBuild 的 Targets 属性和一般 Target 标记感到困惑。

下面的代码是否编译成 `msbuild myapp.sln /t:Rebuild`.NET 中的“重建”预定义目标。

```
 <Target Name="Build" DependsOnTargets="Clean">
     <MSBuild Projects="@(ProjectToBuild)" Targets="Rebuild"/>
 </Target> 
```

**编辑：**

```
<?xml version="1.0" encoding="utf-8" ?>
<Project DefaultTargets="Full" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>...</PropertyGroup>
  <ItemGroup>...</ItemGroup>
  <Target Name="Clean">
    <Message Text="Cleaning..."/>
    <RemoveDir Directories="$(BuildWebOutputDir);$(BuildRoot)" />
  </Target>

  <Target Name="Build">
    <Message Text="Building solution..."/>
    <MSBuild Projects="@(ProjectToBuild)" Targets="Rebuild">
    </MSBuild>
  </Target>

  <Target Name="Copy">
    <Message Text="Copying..."/>
    <Exec Command="xcopy.exe  $(BuildWebOutputDir) $(DistDir) /e /f /y /i" />
  </Target>

  <Target Name="Full" DependsOnTargets="Clean;Build;Copy">
  </Target>  

 <Target>

</Project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:06:24.287

重建目标是为每个项目定义的预定义 msbuild 目标，在 csharp 的情况下，每个 csproj 中都有一个指向 msbuild 库的链接 - 使用该行`<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />.`

嵌入文件中，这是 Target Rebuild 开始的行为`<Target Name="Rebuild">`

# javascript - 调用函数时遇到问题

> ID：15330702
> 
> 赞同：1
> 
> 时间：2013-03-11T03:26:15.260
> 
> 标签：javascript, function

这是我浏览了一段时间后第一次发帖，而且我是 javascript 的新手，但我无法弄清楚这一点。

我正在尝试调用我创建的函数，每次我尝试调用它时......我被告知我没有调用该函数。

我错过了什么？

```
//Simple greeting function
var greeting = function (name) {
console.log("Great to see you," + " " + name);
};

//Calling function
var greeting = function(name) {
console.log("Hello" + "" + name);
} // this was missing in the original question 
```

或者如果我尝试

```
functionName = function(name) 
```

我会收到语法错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:28:22.637

什么？！尝试这个：

```
var greeting = function(name) {
   console.log('Hello ' + name);
}

greeting('ktm'); 
```

* * *

所以定义函数有两种方式。

(1) 函数表达式

`var greeting = function(name) { ... }`

(2) 函数声明

`function greeting(name) { ... }`

有一种简单的方法来调用函数。

`greeting('hello');`

您实际上可以向它传递任意数量的参数，但如果函数需要一个参数，而您没有传递它，它会将其视为`undefined`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T03:28:41.743

你根本没有调用你的函数。

对您的函数的调用如下所示：

```
greeting( "Mike" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T03:28:47.820

尝试：

```
//Simple greeting function
var greeting = function (name) {
    console.log("Great to see you," + " " + name);
};

greeting('foo bar'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T03:31:28.933

以下是定义函数的方法：

```
function greeting(name) {

    console.log("Great to see you," + " " + name);

} 
```

并称之为：

```
greeting("Tomas"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T03:32:41.213

或者你可以做...

```
/*here i am declaring my function*/
function greeting(name) {
console.log(name);
}

/*here i am calling it*/
greeting('ktm'); 
```

function greeting(){} 是一个函数声明。在深入研究将函数存储到变量之前，函数声明可能更容易学习和学习。特别是如果你是第一次学习这些东西。

# javascript - phantomjs 语法中的解析错误

> ID：15330704
> 
> 赞同：1
> 
> 时间：2013-03-11T03:26:37.290
> 
> 标签：javascript, phantomjs

我有以下代码，当我像这样运行它时

```
phantomjs test-script.js http://phantomjs.org 
```

我收到“语法错误：解析错误”的错误。我对 javascript 很陌生，并且没有错误的行号，我迷路了。这是代码

```
var args = require('system').args;
var url = "";

args.forEach(function(arg, i) {
        url = arg;
});

var page = require('webpage').create();

var pageLoaded = function({

page.open(url, function (status) {
    if (status !== 'success') {
        console.log('Unable to access network');
    } else {
        page.includeJs("http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js", function() {
            var data = page.evaluate(function() {
                return $("body").html();
            });

            var title = page.evaluate(function () {
                return document.title;
            });

            console.log('<title>' + title + '</title>');
            console.log(data);
            page.close();
            phantom.exit();
        });
    }
   });
});    

var try_to = function() {
  setTimeout(pageLoaded, 1000);
};

try_to(); 
```

我查看了[PhantomJS 有时会给出“解析错误”消息](https://stackoverflow.com/questions/13942338/phantomjs-sometimes-gives-parse-error-messages)，并[从 phantomjs“SyntaxError: Parse error”消息中获取更多信息，](https://stackoverflow.com/questions/14905664/getting-more-information-from-phantomjs-syntaxerror-parse-error-message)也没有给我更多调试信息。我检查了多个站点，但没有收到第一个链接中提到的 gzip 问题。我认为这是带有代码的东西。好像我删除了 try_to() 函数，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:41:26.657

将该js复制并粘贴到[jslint](http://www.jslint.com)中，我刚试了一下，发现很多错误，有些微不足道，但有些主要。对于初学者，您在页面加载功能上缺少一个 ) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:00:04.110

使用在线 JavaScript 验证器，例如[http://esprima.org/demo/validate.html](http://esprima.org/demo/validate.html)。

# iphone - 使用自动布局时音量滑块消失

> ID：15330707
> 
> 赞同：0
> 
> 时间：2013-03-11T03:26:45.290
> 
> 标签：iphone, ios, xcode, interface-builder, autolayout

我有一个播放流媒体电台的应用程序。

我最近为 iPhone 5 和 iPad 更新了它

在大多数情况下，除了我根据检测到的屏幕高度调整大小的自定义表格之外，自动布局会处理繁重的工作。

然而奇怪的是，我的音量滑块只是标准的股票对象，在 iPhone 5 上运行时完全消失了。它没有移动或隐藏在一个完全看不见的位置，它只是消失了。

我什至尝试使用滑块构建视图并将其移动到视图的中心，但问题仍然存在。这是一个错误还是我错过了明显的？这让我发疯，我收到很多客户投诉。

# google-maps - 为什么多边形在 GIS 和地图中用作范围？

> ID：15330711
> 
> 赞同：0
> 
> 时间：2013-03-11T03:27:47.167
> 
> 标签：google-maps, maps, gis, bing-maps

我正在创建一个查找最近场所的应用程序。在这方面，我已经有另一个[SO 问题](https://stackoverflow.com/questions/15323166/how-to-prepare-existing-database-for-location-aware-searching)。

我对这些功能没有任何经验，而且其中一些概念对我来说不是很明显。所以，我一直在想我没有把事情朝着正确的方向发展。

我在很多地方都看到了 GIS 和移动塔的情况，范围是用多边形计算的。我也一直在阅读有关[Haversine Formula](http://en.wikipedia.org/wiki/Haversine_formula)的内容，它似乎不使用多边形，它基本上是两点距离（据我了解）。

1.  为什么使用 Polygon 作为参考？
2.  为什么不使用圆形？
3.  Haversine 公式如何与这个多边形概念相结合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:12:45.350

我相信使用多边形是因为不同的坐标参考系统。在某些参考系上画一个圆实际上不会是一个圆，而是某种椭圆形，具体取决于 CRS。（因为地图是二维表示，而地球是椭圆体）

它们存储为多边形，因为您必须进行计算才能在指定的 CRS 中再次绘制该圆。如果将其存储为点的多边形，则只需绘制它们，数据库将它们存储在您定义的 CRS 中。

您可能想在 gis.stackexchange.com 上尝试一下，他们会为您提供更好的答案

# asp.net-mvc - 运行时错误没有为扩展“.cshtml”注册构建提供程序

> ID：15330712
> 
> 赞同：31
> 
> 时间：2013-03-11T03:27:49.617
> 
> 标签：asp.net-mvc

当我尝试在 mvc 4 中运行我的脚手架视图之一时，出现以下错误：

> “/”应用程序中的服务器错误。没有为扩展“.cshtml”注册构建提供程序。您可以在 machine.config 或 web.config 的部分中注册一个。确保它具有包含值“Web”或“All”的 BuildProviderAppliesToAttribute 属性。

我发现的唯一答案与智能感知有关，但我的代码很好地遵守并在运行时中断。这是一个奇怪的错误，因为我没有使用类库。只有一个控制器在其所有视图上提供此消息，所有其他控制器/视图都可以正常工作。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2015-08-26T14:35:32.607

这为我解决了这个问题。

改变这个`Web.config`

```
<compilation debug="true" targetFramework="4.5.1" optimizeCompilations="true" /> 
```

至

```
<compilation debug="true" targetFramework="4.5.1" optimizeCompilations="false" /> 
```

补充：几分钟后我将 web.config 恢复为旧时，问题不再重复。奇怪的东西 ）

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-03-13T10:13:27.243

如果[Razor 编译器警告/错误 - ASP.NET MVC 4](https://stackoverflow.com/questions/12769926/razor-compiler-warning-errors-asp-net-mvc-4)中的解决方案无法通过将以下代码添加到 ROOT web.config

```
<compilation debug="true" targetFramework="4.0">
  <!-- New -->
  <assemblies>
    <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </assemblies>
</compilation> 
```

然后尝试重新启动 Visual Studio。这对我有用，因此建议可能是 Visual Studio 错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-04T15:46:35.967

更新到 VS2013 RC2 后，我在部署（以前工作的站点）时遇到此错误。幸运的是，我有其他网站可以比较 bin 文件夹 - 原来有几个库之前部署并*神奇地*停止了，包括 razor 库。我将它们的引用`Copy Local`属性更改为`True`，这一切都更好了。有问题的 3 个剃须刀库是：

*   System.Web.Razor
*   System.Web.WebPages.Deployment
*   System.Web.WebPages.Razor

我还丢失了在 web.config 文件中引用其名称空间的库，因此请务必将它们也设置为复制本地。

我怀疑有可能使用 GAC 在服务器上解决这个问题，但我对服务器端的事情知之甚少，所以下次再说。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-24T08:45:08.597

单击“重建解决方案”对我来说就足够了

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-09T09:22:47.380

我修复了一个类似的问题 - 记录在这里：[https ://naa4e.codeplex.com/workitem/1](https://naa4e.codeplex.com/workitem/1)

解决方案是我删除了引用并重新添加了 NuGet 包。

问题似乎是该项目最初引用了 MVC4，我猜它位于本地机器上的某个地方（即不是 NuGet 包）。我只是“恢复”了没有正确覆盖项目引用从 4 到 5 的包。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-04-06T09:08:17.407

我通过将 .Net Framework 从当前版本“4.52”更改为“4.6”来解决此问题。如果您右键单击您的项目 -> 属性然后“目标框架”，您可以更改此设置更改当前框架后，我重新构建并且一切正常。

在此之后，我切换回我当前的框架版本，它现在可以工作了。我真的不明白为什么会发生这种情况，但这对我有帮助。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-03-27T15:21:40.267

该问题可能与 ASP.Net 中的 JIT 编译器有关。我们在运行时更改了单个 .cshtml 文件并且没有让应用程序再次工作后，我们在生产服务器上遇到了这个错误。重新启动 Web 应用程序并回收 IIS 应用程序池没有帮助。

只是为了测试，我将其更改`targetFramework="4.0"`为另一个版本，它立即再次起作用。在我将其更改回初始版本号后，它也再次起作用。我猜这个更改会导致所有 Asp.Net 临时文件的完全重建。

[dnn](/questions/tagged/dnn "显示标记为“dnn”的问题") [2sxc](/questions/tagged/2sxc "显示标记为“2sxc”的问题")

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-12-30T04:05:25.280

我尝试重新启动 IIS，删除临时 Internet 文件并更改 Web 配置文件中的编译标记。它们都不适合我。

我通过删除 System.Web.MVC 并将其添加到项目中解决了这个问题。

# gpu - OpenACC 使用 math.h 库

> ID：15330713
> 
> 赞同：1
> 
> 时间：2013-03-11T03:27:51.277
> 
> 标签：gpu, openacc

嗨，我使用的是 CAPS OpenACC 编译器，但编译器似乎无法将函数链接到标准 math.h。

实际上，在我的例子中，我在加速循环中的代码中使用了 sqrt 函数。当我编译代码时，抛出以下错误：

```
/tmp/cc8L0aKZ.o:compute_fluxes_XrxAnW.translated.i:function _flux_function_central: error: undefined reference to 'sqrt' 
```

有人得到一些解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-16T17:21:36.810

所有加速器代码都必须使用常规指令进行标记。否则编译器不会为它生成设备代码。PGI 有一篇[文章](https://www.pgroup.com/lit/articles/insider/v6n1a1.htm)解释了如何处理这个问题。

您可以阅读这篇文章，或者尝试在代码中添加以下内容和其他顶级声明：

```
#pragma acc routine(sqrt) seq 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:10:06.013

请重试

```
caps capsmc --openacc-target CUDA --io-report -Xnvcc -arch=sm_13 -c --force gcc -std=c99 -L/usr/include/math.h **-lm** compute_fluxes.c -o cf.13 
```

（`-lm`实际上与标准数学库链接）

# jquery - 响应式网页设计中的 iFrame 问题

> ID：15330714
> 
> 赞同：2
> 
> 时间：2013-03-11T03:28:20.593
> 
> 标签：jquery, css, web

目前我正在做响应式网络开发。该网站完全响应，但我们使用 iframe 将广告包含在网站中。有些广告就像启动器广告或伙伴横幅广告。由于 iFrame，这些动态广告无法按预期工作。

例如，

```
$(window).resize(function() {
  $('.rad').each(function(index) {
    var role = $(this).find("div").attr('role');
    if($(this).hasClass('fullwidth-ad')){   
      if(($(this).width() >= 234)&&($(this).width() < 486)) {   
        if(role != 'mobile_leaderboard_ad'){
          $(this).find("div").attr('role','mobile_leaderboard_ad');
          $(this).find("div").attr('class','fix-bottom');                               
          $(this).find("iframe").attr('src','/sites/all/libraries/rad/rad.php?r=mobile_lb');
        }
      } 
      else if(($(this).width() >= 486)&&($(this).width() < 610)) {                              
        if(role != 'banner_ad'){    
          $(this).find("div").attr('role','banner_ad');
          $(this).find("div").attr('class','banner_ad');
          $(this).find("iframe").attr('src','/sites/all/libraries/rad/rad.php?r=tablet_lb');
        }
      } 
      else if($(this).width() >= 610) {                             
        if(role != 'leaderboard_ad'){   
          $(this).find("div").attr('role','leaderboard_ad');
          $(this).find("div").attr('class','leaderboard_ad');
          $(this).find("iframe").attr('src','/sites/all/libraries/rad/rad.php?r=desktop_lb');
        }
      }
    }               
  });
}); 
```

那么在响应式网页设计中包含广告有更好的主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T03:43:37.963

响应式设计的广告肯定会很麻烦。事实上，对于某些广告网络（例如 Google AdSense），由于您无法在页面上重新加载广告，因此您根本无法妥善处理响应式设计！据说[IAB 正在研究它](http://www.iab.net/media/file/ResponsivePerspectiveFinal.pdf)。（在我看来，为时已晚 10 年。如果技术的业务方面能够跟上，那肯定会很好。）

我建议您编写媒体查询 CSS 以根据需要显示/隐藏包含广告的 div。然后有一些 JavaScript 代码在页面调整大小时运行。这段代码可以做这样的事情：

1.  获取与广告位关联的元素
2.  确定这些元素是否设置为`display: none`。
3.  如果这些广告位尚未包含广告，请在这些广告位中设置新广告

您还需要对页面重新大小进行速率限制。使用 500 毫秒左右的超时，以便在每次调整页面大小时重置。这样一来，拖动浏览器边框的人就不会重新加载您的广告 x1000。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:13:16.793

你想要无缝的 iframe。disqus 使用了这种技术，而且非常漂亮。这是关于它的演示[http://benvinegar.github.com/seamless-talk/#/](http://benvinegar.github.com/seamless-talk/#/)但您将要密切关注幻灯片 33 [http://benvinegar.github.com/seamless-talk/#/ 33](http://benvinegar.github.com/seamless-talk/#/33)

# php - 使用 GET 变量将子域重写为 PHP

> ID：15330716
> 
> 赞同：2
> 
> 时间：2013-03-11T03:28:24.427
> 
> 标签：php, .htaccess, mod-rewrite

我正试图围绕 mod rewrite 进行思考，但似乎无法弄清楚这一点。

有没有办法我可以做到以下几点？

用户输入：`http://wildcard.mydomain.com`

默默地写信给：

```
http://mydomain.com/index.php?username=wildcard 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T08:58:08.907

您必须在 a 中捕获域的第一部分，[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)然后在 a 中使用它[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)。额外`RewriteCond`的 s 是为了防止`www.mydomain.com`和`index.php`被重写

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\.
RewriteCond %{REQUEST_URI} !index\.php
RewriteCond %{HTTP_HOST} ^(.+?)\.mydomain\.com$
RewriteRule .* /index.php?username=%1 [L] 
```

但这只是所需功能的一小部分。此外，您必须为所有`username.mydomain.com`域名设置 DNS 条目或设置指向您的主机的[通配符 DNS 条目。](http://en.wikipedia.org/wiki/Wildcard_DNS_record) `*.mydomain.com`

否则，例如，客户端会尝试联系`jcraine.mydomain.com`，但找不到 DNS 条目并抱怨。

如果这是一个[虚拟主机](http://httpd.apache.org/docs/current/mod/core.html#virtualhost)[`ServerAlias`](http://httpd.apache.org/docs/current/mod/core.html#serveralias)，您还必须为每个用户名添加一个

```
ServerAlias jcraine.mydomain.com 
```

或捕获所有子域的通配符

```
ServerAlias *.mydomain.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T03:32:32.400

应该做的伎俩。

```
RewriteCond %{HTTP_HOST} ^(users)\.example\.com$
RewriteRule ^(.*)$    http://www.example.com/?username=%1 [L] 
```

# intellij-idea - 使用 IntelliJ IDEA，无法弄清楚如何编译和运行一个简单的程序

> ID：15330719
> 
> 赞同：0
> 
> 时间：2013-03-11T03:28:47.173
> 
> 标签：intellij-idea, compilation

编码：

```
public class var3
{
    public static void main( String[] args )
    {
        int num = 113;
        double num2 = 2.71828;
        string cs = "Computer Science";
        System.out.println(num);
        System.out.println(num2);
        System.out.println(cs);
        System.out.println("hello");
    }
} 
```

我只是不知道如何运行它。当我点击运行时，我看到了这个：

> "C:\Program Files\Java\jdk1.7.0_17\bin\java" -Didea.launcher.port=7537 "-Didea.launcher.bin.path=C:\Program Files (x86)\JetBrains\IntelliJ IDEA Community版本 12.0.4\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.7.0_17\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.7.0 _17\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.7.0_17\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.7.0_17\jre\lib\jce。 jar;C:\Program Files\Java\jdk1.7.0_17\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.7.0_17\jre\lib\jfxrt.jar;C:\Program Files\ Java\jdk1.7.0_17\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.7.0_17\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.7.0_17 \jre\lib\plugin.jar;C:\Program Files\Java\jdk1.7.0_17\jre\lib\resources.jar;C:\Program Files\Java\jdk1.7.0_17\jre\lib\rt.jar ;C:\Program Files\Java\jdk1.7.0_17\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.7.0_17\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.7.0 _17\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.7.0_17\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.7.0_17\jre\ lib\ext\sunec.jar;C:\Program Files\Java\jdk1.7.0_17\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.7.0_17\jre\lib\ext\ sunmscapi.jar;C:\Program Files\Java\jdk1.7.0_17\jre\lib\ext\zipfs.jar;C:\Programming\unit1\out\production\unit1;C:\Program Files (x86)\JetBrains \IntelliJ IDEA 社区版 12.0.4\lib\idea_rt.jar" com.intellij.rt.execution.application.AppMain Main\Program Files\Java\jdk1.7.0_17\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.7.0_17\jre\lib\ext\sunjce_provider.jar;C:\Program Files\ Java\jdk1.7.0_17\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.7.0_17\jre\lib\ext\zipfs.jar;C:\Programming\unit1\out\production \unit1;C:\Program Files (x86)\JetBrains\IntelliJ IDEA 社区版 12.0.4\lib\idea_rt.jar" com.intellij.rt.execution.application.AppMain Main\Program Files\Java\jdk1.7.0_17\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.7.0_17\jre\lib\ext\sunjce_provider.jar;C:\Program Files\ Java\jdk1.7.0_17\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.7.0_17\jre\lib\ext\zipfs.jar;C:\Programming\unit1\out\production \unit1;C:\Program Files (x86)\JetBrains\IntelliJ IDEA 社区版 12.0.4\lib\idea_rt.jar" com.intellij.rt.execution.application.AppMain Main
> 
> 进程以退出代码 0 结束

但是我的 System.out.println(); 都没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:24:34.130

它正在启动另一个名为 的类`Main`，我猜它什么也没打印：

```
com.intellij.rt.execution.application.AppMain **Main** 
```

您还可以在绿色箭头旁边的组合框中看到它。如果您想运行另一个类（此处`var3`），请右键单击您的文件并选择`Run 'var3.main()'`.

绿色箭头始终启动在组合框中选择的运行配置，而不是您当前正在编辑的文件。

# python - 如何在 python nltk 和 wordnet 中获取单词/同义词的所有下位词？

> ID：15330725
> 
> 赞同：9
> 
> 时间：2013-03-11T03:29:42.413
> 
> 标签：python, nltk, wordnet

我有一个 wordnet 中所有名词的列表，现在我只想留下作为车辆的单词并删除其余的单词。我该怎么做？下面是我想制作的伪代码，但我不知道如何使它工作

```
for word in wordlist:
  if not "vehicle" in wn.synsets(word):
    wordlist.remove(word) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T03:44:31.130

```
from nltk.corpus import wordnet as wn
vehicle = wn.synset('vehicle.n.01')
typesOfVehicles = list(set([w for s in vehicle.closure(lambda s:s.hyponyms()) for w in s.lemma_names()])) 
```

这将为您提供来自每个同义词集中的所有独特词，这些词是[名词](http://en.wikipedia.org/wiki/Hyponymy)“车辆”（第一种感觉）的下义词。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-12T01:20:52.507

```
def get_hyponyms(synset):
    hyponyms = set()
    for hyponym in synset.hyponyms():
        hyponyms |= set(get_hyponyms(hyponym))
    return hyponyms | set(synset.hyponyms()) 
```

# entity-framework - 实体框架代码首先使用 Fluent Mapping 为不同的表和实体提供不同的列键名

> ID：15330727
> 
> 赞同：2
> 
> 时间：2013-03-11T03:29:59.220
> 
> 标签：entity-framework

首先对现有数据库使用代码。我有 2 个具有不同主键和外键名称的表。例如

```
public class Person
{
    public int PersonID {get; set;}
    public virtual Sale {get; set;}
    public ICollection<Order> Orders {get; set;}
   //props
}

public class Sale
{
    public int saleId {get; set;}
    public int PersID {get; set;}
    //props
}
public class Oder
{
   public int OrderId {get; set;}
   public int pID {get set;}
} 
```

假设Person表中的PK是PersonID，Order是pID，Sale PersID中的FK（所以ID的命名约定因表而异）

如何在考虑不同列 ID 名称的同时使用 fluent 映射实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:50:20.400

所以 EF 已经成为`PersonID`你的 Persons (People?) 表的主键。当然，你总是可以写：

```
modelBuilder.Entity<Person>().HasKey(p => p.PersonID); 
```

然后你要描述 Person 和 Sale 之间的关系。我假设你的`Sale`类有一个`Person`名为“Person”的导航属性：

```
modelBuilder.Entity<Sale>().HasRequired(s => s.Person)
                           .WithMany()
                           .HasForeignKey(s => s.PersID); 
```

“HasForeignKey”方法允许您在定义外键值的类上指定属性。

不要忘记完全省略外键属性也是可以的。您可能想放弃该`PersID`属性并告诉 EF 数据库列名为“PersID”，如下所示：

```
modelBuilder.Entity<Sale>().HasRequired(s => s.Person)
                           .WithMany()
                           .Map(m => m.MapKey("PersID")); 
```

# android - Android LVL 自定义许可期限

> ID：15330730
> 
> 赞同：4
> 
> 时间：2013-03-11T03:30:31.163
> 
> 标签：android, android-lvl

我正在开发将离线使用 30-40 天（无 Internet 连接）的应用程序，因此我需要 LVL 在此期间使用 ManagedPolicy 离线工作。检查在开始时完成 - 如果它无法连接到服务器以在接下来的 30-40 天内使用保存的策略。我正在寻找一些示例或建议来实施这种自定义策略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:39:57.333

用谷歌搜索几个小时后，我发现只有一个例子

[https://gist.github.com/Ricket/1163927](https://gist.github.com/Ricket/1163927) “修改后的 ServerManagedPolicy，只需要每 7 天或 10 次尝试验证一次许可。（来自 Android 许可库）”

它是进一步实施的起点，也是存在的最佳示例。

如果有人有更多信息，请分享 - 这将非常有帮助。

# android - 保存首选项会导致 stackoverflow 错误

> ID：15330733
> 
> 赞同：3
> 
> 时间：2013-03-11T03:30:38.640
> 
> 标签：android, sharedpreferences, android-preferences, checkboxpreference

我有以下代码：

```
sP = PreferenceManager.getDefaultSharedPreferences(this);

OnSharedPreferenceChangeListener listener = new SharedPreferences.OnSharedPreferenceChangeListener() {
    @Override
    public void onSharedPreferenceChanged(SharedPreferences prefs, String key) {
        if (key.equalsIgnoreCase("checkbox_radio")){

            if (sP.getBoolean(key, true)){
                Editor editor = sP.edit();
                editor.putBoolean(key, false);
                editor.commit();
            }
            else {
                Editor editor = sP.edit();
                editor.putBoolean(key, true);
                editor.commit();
            }
        }
    }
};

sP.registerOnSharedPreferenceChangeListener(listener); 
```

当我选中/取消选中相应的框时，我收到了错误：

```
03-10 22:24:50.883: D/dalvikvm(3616): GC_CONCURRENT freed 5171K, 36% free 9629K/14936K, paused 5ms+3ms, total 35ms
03-10 22:24:51.313: D/dalvikvm(3616): GC_CONCURRENT freed 725K, 36% free 9593K/14936K, paused 5ms+4ms, total 34ms
03-10 22:24:51.773: D/dalvikvm(3616): GC_CONCURRENT freed 684K, 36% free 9584K/14936K, paused 1ms+2ms, total 22ms
03-10 22:24:52.203: D/dalvikvm(3616): GC_CONCURRENT freed 653K, 36% free 9619K/14936K, paused 5ms+3ms, total 31ms
03-10 22:24:52.623: D/dalvikvm(3616): GC_CONCURRENT freed 683K, 36% free 9609K/14936K, paused 3ms+2ms, total 25ms
03-10 22:24:53.023: D/dalvikvm(3616): GC_CONCURRENT freed 671K, 36% free 9652K/14936K, paused 3ms+4ms, total 33ms
03-10 22:24:53.083: I/dalvikvm(3616): threadid=1: stack overflow on call to Ljava/lang/Thread;.currentThread:L
03-10 22:24:53.083: I/dalvikvm(3616):   method requires 4+20+0=24 bytes, fp is 0x61f7630c (12 left)
03-10 22:24:53.083: I/dalvikvm(3616):   expanding stack end (0x61f76300 to 0x61f76000)
03-10 22:24:53.083: I/dalvikvm(3616): Shrank stack (to 0x61f76300, curFrame is 0x61f764a0)
03-10 22:24:53.083: D/AndroidRuntime(3616): Shutting down VM
03-10 22:24:53.083: W/dalvikvm(3616): threadid=1: thread exiting with uncaught exception (group=0x40e48930)
03-10 22:24:53.153: D/dalvikvm(3616): GC_CONCURRENT freed 642K, 35% free 9803K/14936K, paused 3ms+2ms, total 23ms
03-10 22:24:53.153: D/dalvikvm(3616): WAIT_FOR_CONCURRENT_GC blocked 8ms
03-10 22:24:53.153: E/AndroidRuntime(3616): FATAL EXCEPTION: main
03-10 22:24:53.153: E/AndroidRuntime(3616): java.lang.StackOverflowError
03-10 22:24:53.153: E/AndroidRuntime(3616):     at java.lang.ThreadLocal.get(ThreadLocal.java:53)
03-10 22:24:53.153: E/AndroidRuntime(3616):     at dalvik.system.BlockGuard.getThreadPolicy(BlockGuard.java:140)
03-10 22:24:53.153: E/AndroidRuntime(3616):     at libcore.io.BlockGuardOs.open(BlockGuardOs.java:106)
03-10 22:24:53.153: E/AndroidRuntime(3616):     at libcore.io.IoBridge.open(IoBridge.java:400)
03-10 22:24:53.153: E/AndroidRuntime(3616):     at java.io.FileOutputStream.<init>(FileOutputStream.java:88)
03-10 22:24:53.153: E/AndroidRuntime(3616):     at java.io.FileOutputStream.<init>(FileOutputStream.java:73)
03-10 22:24:53.153: E/AndroidRuntime(3616):     at android.app.SharedPreferencesImpl.createFileOutputStream(SharedPreferencesImpl.java:543)
03-10 22:24:53.153: E/AndroidRuntime(3616):     at android.app.SharedPreferencesImpl.writeToFile(SharedPreferencesImpl.java:591)
03-10 22:24:53.153: E/AndroidRuntime(3616):     at android.app.SharedPreferencesImpl.access$800(SharedPreferencesImpl.java:52) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:34:11.120

您正在更改内部的共享偏好`onSharedPreferenceChanged`，不要这样做，它的无限递归。

# jsp - 加载 JSON KendoUI 网格时出错

> ID：15330738
> 
> 赞同：0
> 
> 时间：2013-03-11T03:31:09.217
> 
> 标签：jsp, grid, kendo-ui

下午好，

我正在我的应用程序中集成 Kendo UI（JSP 版本），但在网格上集成传输读取时遇到问题。

网格可以正常发出请求。

返回：

```
 {} && {"registros":
        [
          {
            "id":251,
            "matricula":"32849923",
            "status":true,
            "dataAdmissao":1361674800000,
            "dataDesligamento":null,
            "version":0
           }
         ],
        "total":1} 
```

但是 Grid 无法呈现数据返回。下面是我的网格：

```
<kendo:grid name="grid" pageable="true" sortable="true" filterable="true" height="300">
                <kendo:grid-columns>
                    <kendo:grid-column title="Matricula" field="matricula" />
                </kendo:grid-columns>
                <kendo:dataSource pageSize="10" serverPaging="true" serverSorting="true" serverFiltering="true" serverGrouping="true">
                    <kendo:dataSource-transport>                
                        <kendo:dataSource-transport-read url="${path}funcionarios" type="GET" contentType="application/json" dataType="json" />                
                    </kendo:dataSource-transport>
                    <kendo:dataSource-schema total="total" data="registros">
                        <kendo:dataSource-schema-model>
                            <kendo:dataSource-schema-model-fields>
                                <kendo:dataSource-schema-model-field name="matricula" type="string" />
                            </kendo:dataSource-schema-model-fields>
                        </kendo:dataSource-schema-model>
                    </kendo:dataSource-schema>
                </kendo:dataSource>
            </kendo:grid> 
```

*   索取资料：

    *   要求
    *   网址：/qualitysoft/funcionarios?take=10&skip=0&page=1&pageSize=10
    *   请求方式：GET 状态码：200 OK 请求头查看源
    *   接受：应用程序/json，文本/javascript，*/*；q=0.01
    *   Accept-Charset:UTF-8,*;q=0.5 Accept-Encoding:gzip,deflate,sdch
    *   Accept-Language:en-US,en;q=0.8 Connection:keep-alive
    *   内容类型：应用程序/json
*   查询字符串参数view sourceview URL 编码 take:10 skip:0

    *   页:1
    *   页面大小：10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:42:46.423

当你说回报是：

```
{} && {
    "registros": [
        {
            "id":               251,
            "matricula":        "32849923",
            "status":           true,
            "dataAdmissao":     1361674800000,
            "dataDesligamento": null,
            "version":          0
        }
    ],
    "total":     1
} 
```

你的意思是，如果你在浏览器中打开你得到的那个 URL？如果是这样，问题是这不是一个有效的 JSON 检索文件。如果您将其更改为：

```
{
    "registros": [
        {
            "id":               251,
            "matricula":        "32849923",
            "status":           true,
            "dataAdmissao":     1361674800000,
            "dataDesligamento": null,
            "version":          0
        }
    ],
    "total":     1
} 
```

然后它工作。

# android - 适用于 android 的 adobe 本机扩展，当尝试从浏览器返回时，应用程序在返回按钮上崩溃

> ID：15330742
> 
> 赞同：0
> 
> 时间：2013-03-11T03:31:30.870
> 
> 标签：android, crash, adobe, air-native-extension

我为第 3 方广告商 (TrialPay) 创建了一个原生扩展 (Android)，它需要加载 webview 并进一步在原生浏览器中打开 url。之后，它要求点击后退按钮，以便用户可以从本机浏览器返回应用程序，但此时应用程序崩溃......

这是我在本机扩展代码中的活动：

```
public class TrialPayOfferWallActivity extends Activity{

Button doneButton = null;
WebView offerWallWebView = null;
public static FREContext freContext;
@SuppressLint({ "NewApi", "SetJavaScriptEnabled" })
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    //Remove title bar
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);

    //Remove notification bar
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    Log.i(this.getClass().getSimpleName(), "Inside TrialPayOfferWallActivity OnCreate function");

    this.setContentView(freContext.getResourceId("layout.trialpayofferwallactivity"));

    Log.i(this.getClass().getSimpleName(), "1");
    Bundle extraBundleObj = this.getIntent().getExtras();
    Log.i(this.getClass().getSimpleName(), "2");
    String urlString = extraBundleObj.getString("urlString");
    Log.i(this.getClass().getSimpleName(), "3-"+urlString);

    doneButton = (Button) this.findViewById(freContext.getResourceId("id.btnDone"));
    Log.i(this.getClass().getSimpleName(), "4");
    offerWallWebView = (WebView) this.findViewById(freContext.getResourceId("id.offerwallwebview"));
    Log.i(this.getClass().getSimpleName(), "5");
    doneButton.setOnClickListener(new View.OnClickListener() {
          @Override
          public void onClick(View v) {
              setResult(RESULT_OK);
              finish();
          }
        });
    Log.i(this.getClass().getSimpleName(), "6");
    offerWallWebView.getSettings().setJavaScriptEnabled(true);
    offerWallWebView.getSettings().setUseWideViewPort(true);
    offerWallWebView.getSettings().setLoadWithOverviewMode(true);
    offerWallWebView.setScrollBarStyle(WebView.SCROLLBARS_INSIDE_OVERLAY);

    Log.i(this.getClass().getSimpleName(), "7");
    this.loadWebViewWithURL(urlString);
}

public void loadWebViewWithURL(String url2)
{
    offerWallWebView.loadUrl(url2);
    offerWallWebView.setWebViewClient(new WebViewClient() {
      @Override
      public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (url.startsWith("http:") || url.startsWith("https:")) {
            view.loadUrl(url);
        } else {
            if (url.startsWith("tpbow")) {
                url = url.substring(5);
            }
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
            startActivity( intent );
        }
        return true;
    }

    });
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
 if (keyCode == KeyEvent.KEYCODE_BACK && (offerWallWebView.getVisibility() == WebView.VISIBLE)) {
    this.goBack(keyCode, event);
    return true;
 } else {
    return super.onKeyDown(keyCode, event);
 }
}

private void goBack(int keyCode, KeyEvent event) {
 if (offerWallWebView.canGoBack()) {
    offerWallWebView.goBack();
 } else {
    super.onKeyDown(keyCode, event);
 }
}
protected void onPause()
{
    super.onPause();
    //sendErrorBack("Cancelled");
    Log.i(this.getClass().getSimpleName(), "onPause");
}

protected void onStop()
{
    super.onStop();
    //sendErrorBack("Cancelled");
    Log.i(this.getClass().getSimpleName(), "onStop");
}

protected void onResume()
{
    super.onResume();
    Log.i(this.getClass().getSimpleName(), "onResume");
}

protected void onStart()
{
    super.onStart();
    Log.i(this.getClass().getSimpleName(), "onStart");
}
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Log.i(this.getClass().getSimpleName(), "Inside OnActivityResult function");
    if (resultCode == RESULT_OK) {
        Log.i(this.getClass().getSimpleName(), "Inside OnActivityResult function->result ok");
    }

} 
```

}

**我错过了什么吗？**

# mysql - 选择当前用户的同一公司的所有用户

> ID：15330744
> 
> 赞同：2
> 
> 时间：2013-03-11T03:31:42.723
> 
> 标签：mysql, select, reserved-words

我有点混！

当前用户的 id 存储在会话中。

我想选择与`company_id`当前用户相同的所有用户。

**`company_id`是`user`表中的一个字段。**

不起作用的查询：

```
SELECT `all_users`.`id`, `all_users`.`username`, `all_users`.`fullname`
FROM (`user` current_user)
JOIN `company` c ON `c`.`id` = `current_user`.`company_id`
JOIN `user` all_users ON `all_users`.`company_id` = `c`.`id`
WHERE `current_user`.`id` = <<<$current_user_id>>> 
```

**错误：**

```
You have an error in your SQL syntax; check the manual that corresponds
to your MySQL server version for the right syntax to use near
'current_user) JOIN `company` c ON `c`.`id` = `current_user`.`company_id` JOIN `u' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T03:37:34.870

[`current _user`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_current-user)是 MySQL 中的保留关键字。

您需要在查询中对其进行转义以将其标记为表别名。

在查询中使用反引号。像这样：

```
SELECT `all_users`.`id`, `all_users`.`username`, `all_users`.`fullname`
FROM `user` `current_user`
JOIN `company` c ON `c`.`id` = `current_user`.`company_id`
JOIN `user` all_users ON `all_users`.`company_id` = `c`.`id`
WHERE `current_user`.`id` = <<<$current_user_id>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:00:56.057

我认为它有一个非常简单的解决方案！

```
SELECT `all_users`.`id`, `all_users`.`username`, `all_users`.`fullname`
FROM (`user` u)
JOIN `user` all_users ON `u`.`company_id` = `all_users`.`company_id`
WHERE `u`.`id` = <<<$current_user_id>>> 
```

更少`join`，更优化，同样的结果！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T03:36:45.893

您应该获取会话用户的公司 ID，以使您自己和数据库更轻松。

```
select * from all_users u left join company c on u.company_id = c.id WHERE u.company_id = current_user_id.company_id 
```

像这样的东西应该可以正常工作。

# php - 使用由附加字符串组成的变量构建多维数组

> ID：15330747
> 
> 赞同：1
> 
> 时间：2013-03-11T03:32:17.373
> 
> 标签：php, multidimensional-array

这是我的原始代码的一个示例，它似乎有效：

```
$MainArray =  array('Part1'=>array(Foo, 4, 2, Cat), 'Part2'=>array(Bar, 3, 1, Dog));
print_r ($MainArray); 
```

回报：

```
Array ( [Part1] => Array ( [0] => Foo [1] => 4 [2] => 2 [3] => Cat ) [Part2] => Array ( [0] => Bar [1] => 3 [2] => 1 [3] => Dog ) ) 
```

我想做的是这样的（这些片段是基于 if 语句包含的）：

```
$ArrayPieces.="'Part1'=>array(Foo, 4, 2, Cat), ";
$ArrayPieces.="'Part2'=>array(Bar, 3, 1, Dog)";
$MainArray =  array($ArrayPieces);
print_r ($MainArray); 
```

但这会返回：

```
Array ( [0] => 'Part1'=>array(Foo, 4, 2, Cat), 'Part2'=>array(Bar, 3, 1, Dog)) 
```

关于如何使这项工作的任何建议？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:54:50.343

这样做（如您所愿）的唯一方法是使用`eval()`：

```
<?php

$MainArray =  array('Part1'=>array('Foo', 4, 2, 'Cat'), 'Part2'=>array('Ba$
print_r ($MainArray);

$ArrayPieces = "return array(";
$ArrayPieces .= "'Part1'=>array('Foo', 4, 2, 'Cat'), ";
$ArrayPieces .= "'Part2'=>array('Bar', 3, 1, 'Dog')";
$ArrayPieces .= ");";

$MainArray =  eval($ArrayPieces);

print_r ($MainArray);

?> 
```

至于为什么数组字符串中有return，这是因为**`eval`只接受语句，不接受表达式。**

上面的代码会给你你想要的：

```
Array
(
    [Part1] => Array
        (
            [0] => Foo
            [1] => 4
            [2] => 2
            [3] => Cat
        )

    [Part2] => Array
        (
            [0] => Bar
            [1] => 3
            [2] => 1
            [3] => Dog
        )

) 
```

**但是，*通常*不建议这样做。一点都不！这是非常不安全的，（尤其是在评估用户输入时——在大多数情况下，如果不是所有情况下，你都应该避免这样做），并且在某些情况下，它的麻烦多于它的价值。**

有关此问题的更多信息，请参阅：

[什么时候 eval 在 php 中是邪恶的？](https://stackoverflow.com/questions/951373/when-is-eval-evil-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:02:43.107

这听起来像你试图反序列化一个数组。根据您的示例，您希望在字符串中构造 PHP 语法，然后再执行它。

如果这是您绝对*必须做*[的](http://php.net/eval "the *eval* function")，请查看[*eval*](http://php.net/eval "the *eval* function") [PHP 函数](http://php.net/eval "the *eval* function")[](http://php.net/eval "*eval* 函数")

 *就个人而言，我不喜欢“评估”。

有机会使用 JavaScript 对象表示法吗？如果是这样，请将您的上述示例表达为：

```
$json_pieces = '{';
$json_pieces .= '"Part1": ["Foo", 4, 2, "Cat"],';
$json_pieces .= '"Part2": ["Bar", 3, 1, "Dog"]';
$json_pieces .= '}'
$MainArray = json_decode( $json_pieces, TRUE );
print_r( $main_array ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T03:36:54.007

鉴于您的问题是基于假装的情况，很难确切知道您在寻找什么，但我认为这样的事情应该可以实现您所追求的：

```
$MainArry = array();
if (foo)
    $MainArray['Part1'] = array(Foo, 4, 2, Cat);
if (bar)
    $MainArray['Part2'] = array(Bar, 3, 1, Dog); 
```*

# ios - 需要多台 iPad 相互通信

> ID：15330750
> 
> 赞同：2
> 
> 时间：2013-03-11T03:32:35.087
> 
> 标签：ios, ipad, p2p

我们正在为企业场景构建一个 iPad 应用程序。用户将使用 iPad 在特殊的公司活动中登记客人。用于签到的 iPad 可能多达十几个，它们都需要准确的数据，包括谁签到、何时签到以及输入的任何注释。问题是通常不会有互联网访问。所以 iPad 必须能够相互通信。所有 iPad 都将位于一个位置，但它们之间的距离可能高达 100-300 英尺。我想我们可以包括一个要求，如果距离太远，用户需要定期彼此靠近。

我们对点对点解决方案持开放态度，其中 iPad 实际相互通信，或者我们可以有一台中央笔记本电脑作为服务器，iPad 都与服务器通信。关于如何做到这一点的任何想法，有哪些选择，如果我们需要建立一个 wifi 网络等等，等等。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T04:03:02.013

由于您对中央笔记本电脑持开放态度，因此我会使用它和所有 iPad 都连接到的 WiFi 基站。

然后你可以有一个简单的服务器，当用户在 iPad 上签到时，它会被告知，并将其存储在数据库中 - 如果有人尝试再次签到，很容易发出该人已经签到的响应。

作为备份，或者代替服务器，您可以将 Gamekit 与托管比赛（无限设备）一起使用 - 只要所有 iPad 都在同一网络上，它们就应该能够互相看到。然后，您可以在有人签到时向所有参与者广播，以便其他设备在本地保存该信息。它可能比服务器更成问题，但也可能更健壮。

在任何一种情况下，请确保所有可能的错误情况（如网络或服务器完全故障或无法连接到其他 iPad）使 iPad 处于他们仍然可以登记客人、存储已登记入住的人并简单地广播的状态服务恢复时的数据。您不希望客人因为网络故障而等待！

# inheritance - 从超类实例构造类

> ID：15330755
> 
> 赞同：1
> 
> 时间：2013-03-11T03:32:53.393
> 
> 标签：inheritance, constructor, python-3.x, pygobject

所以你有一些函数，比如`Gtk.Builder.get_object()`，它返回一些小部件。在我们的例子中 a `Gtk.Window()`。

我有一个子类，`Gtk.Window()`它添加了一些信号处理程序。

```
class Window(Gtk.Window): 
```

是否可以使用返回的小部件`Gtk.Builder.get_object()`来构造`Window()`？我认为它应该正在使用`__new__()`或其他东西，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:54:36.363

我认为使用`__new__`正是你想要做的。如果您可以将`__class__`要获取的超类实例的属性设置为子类，那么您应该一切就绪。

这是我认为你需要的：

```
class Window(Gtk.Window):
    def __new__(cls, *args, **kwargs):
        self = Gtk.Builder.get_object()
        self.__class__ = cls
        return self 
```

Python 应该检测到所创建的值`__new__`是类的一个实例（感谢该`__class__`值），然后它将调用`__init__`和其他适当的方法。

# java - 插入排序 - 交换节点

> ID：15330760
> 
> 赞同：0
> 
> 时间：2013-03-11T03:33:16.593
> 
> 标签：java, algorithm, sorting, data-structures

我在java中为一个双向链表编写了以下插入排序例程，它将节点中的数据交换为排序&它工作正常。但是，我试图弄清楚如何实际交换节点链接以实现插入排序。我尝试了许多选项，但都失败了，因为它是节点所引用的对象引用，因此更改它们会弄乱并破坏列表。任何指针将不胜感激。

节点类（内部类）：

```
 private class Node {
    T data;
    Node next;
    Node prev;
} 
```

排序例程

```
 public void sort() {
    if(isEmpty()) {
        throw new RuntimeException("List is empty");
    }
    Node current = head;
    while(current != null) {
        for(Node prev=current; prev.prev != null; prev = prev.prev) {
            if(prev.data.compareTo(prev.prev.data) <= 0) {
                T tmp = prev.data;
                prev.data = prev.prev.data;
                prev.prev.data = tmp;
            }
        }
        current = current.next;
    }
} 
```

编辑1：

感谢 lhuang 提供交换节点的方法。有用。实际答案在于 Java 按值复制和传递引用，而不是对象（请参阅[http://www.javaworld.com/javaqa/2000-05/03-qa-0526-pass.html](http://www.javaworld.com/javaqa/2000-05/03-qa-0526-pass.html)）。因此，您应该将节点交换传递给其他方法，而不是在同一个地方尝试，因此它不会影响除要交换的两个节点之外的其余节点。

我将例程修改为以下

```
public void sort() {
    if(isEmpty()) {
        throw new RuntimeException("List is empty");
    }
    Node current = top;
    while(current != null) {
        for(Node prev=current; prev != null && prev.prev != null; prev = prev.prev) {
            if(prev.data.compareTo(prev.prev.data) <= 0) {
                swap(prev,prev.prev);
            }
        }
        current = current.next;
    }
} 
```

具有此逻辑的最后一个问题是，在交换时电流总是落后，并且在此逻辑中处理了两次相同的两个节点。有没有办法减轻这种情况，即交换后将电流恢复到原来的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:49:29.607

您需要相应地更新 node1 和 node2 的前一个和下一个节点。

1，如果一个节点是头，更新头。

2，如果node1在node2之前，你不能只更新node1.prev = node2.prev。它将在列表中引入一个通告。

```
public void swap(Node node1, Node node2) {
    if (node1 == null || node2 == null) {
        throw new IllegalArgumentException(
                "The nodes couldn't be null");
    }

    if (node1 == node2) {
        return;
    }

    // make sure node1 is before node2
    if (node1.getPrev() == node2) {
        Node temp = node2;
        node2 = node1;
        node1 = temp;
    }

    Node node1Prev = node1.getPrev();
    Node node1Next = node1.getNext();
    Node node2Prev = node2.getPrev();
    Node node2Next = node2.getNext();

    node1.setNext(node2Next);
    if (node2Next != null) {
        node2Next.setPrev(node1);
    }

    node2.setPrev(node1Prev);
    if (node1Prev != null) {
        node1Prev.setNext(node2);
    }

    if (node1 == node2Prev) {
        node1.setPrev(node2);
        node2.setNext(node1);
    } else {
        node1.setPrev(node2Prev);
        if (node2Prev != null) {
            node2Prev.setNext(node1);
        }

        node2.setNext(node1Next);
        if (node1Next != null) {
            node1Next.setPrev(node2);
        }
    }

    if (node1 == head) {
        head = node2;
    } else if (node2 == head) {
        head = node1;
    }
} 
```

对于问题 2，您可以在交换之前检查 prev。如果是当前的，则将 current 设置为 prev.prev。

```
while(current != null) {
    for(Node prev=current; prev != null && prev.prev != null; prev = prev.prev) {
        if(prev.data.compareTo(prev.prev.data) <= 0) {
            if (prev==current) {
                current=prev.prev;
            }
            swap(prev,prev.prev);
        }
    }
    current = current.next;
} 
```

顺便说一句，您也可以尝试减少交换操作。由于您正在对链表进行排序，因此删除和插入元素非常容易。因此，只需找出适合电流的位置即可；从原来的地方删除它并插入那里。当然，你需要注意一些细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T03:47:45.910

分配节点引用而不仅仅是数据。确保更新两个交换节点左右两侧的节点的“下一个”和“上一个”，以及交换的节点本身。最后，确保您的迭代在交换后继续使用正确的节点。

# javascript - 此函数的 setTimeout 事件，但它不起作用

> ID：15330761
> 
> 赞同：-3
> 
> 时间：2013-03-11T03:33:17.357
> 
> 标签：javascript, jquery

我无法让 setTimeout 事件为此代码工作。我已经尝试过各种配置，但没有运气。有人可以告诉我我做错了什么吗？

我正在尝试一次打印一个字符的“lorem ipsum”，但我想在它开始之前等待几秒钟。

```
setTimeout(
    (function ($) {
        $.fn.writeText = function (content) {
            var contentArray = content.split(""),
                current = 0,
                elem = this;
            setInterval(function () {
                if (current < contentArray.length) {
                    elem.text(elem.text() + contentArray[current++]);
                }
            }, 40);
        };
    })(jQuery);

    $("#description").writeText("Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate.");
, 3000); 
```

解析度：

这是工作代码。问题是整个插件都包含在超时中。解决方案是仅包装实现插件的行。谢谢@adeno 的回答！

```
(function ($) {
    $.fn.writeText = function (content) {
        var contentArray = content.split(""),
            current = 0,
            elem = this;
        setInterval(function () {
            if (current < contentArray.length) {
                elem.text(elem.text() + contentArray[current++]);
            }
        }, 40);
    };
})(jQuery);

setTimeout(function () {
    $("#description").writeText("Lorem ipsum dolor sit amet, consectetur adipisicing elit,     sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate.");
}, 3000); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T03:40:12.647

setTimeout 具有以下签名：

```
setTimeout(function, timeout_in_ms); 
```

在您的代码中，您有：

```
setTimeout(
    statement;
    statement;
    statement;
    , timeout_in_ms
); 
```

所以它甚至在语法上都不正确

# jquery - 如何使用 jQuery 点击时检查父母兄弟姐妹的所有复选框

> ID：15330765
> 
> 赞同：1
> 
> 时间：2013-03-11T03:33:22.970
> 
> 标签：jquery, html, forms, checkbox

我试图弄清楚我的 jQuery 中什么不起作用。

**HTML**

```
<ul>
    <div class="filter-all">
        <div class="filter-select-all">Select All</div> | 
        <div class="filter-select-none">Select None</div>
    </div>
    <li><label><input type="checkbox">Food</label></li>
    <li><label><input type="checkbox">Meeting</label></li>
    <li><label><input type="checkbox">Music</label></li>
    <li><label><input type="checkbox">Outdoors</label></li>
</ul> 
```

**jQuery**

```
$('.filter-select-all').click(function() {
     $(this).closest('ul').find(':checkbox').attr('checked', this.checked);
}); 
```

演示：http: [//jsfiddle.net/MDNmx/](http://jsfiddle.net/MDNmx/)

我尝试了各种不同的方法，而不是最接近的方法，也找到了..

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T03:39:11.680

## [***jsFiddle 演示***](http://jsfiddle.net/nEB9h/1/)

```
$(function() {
    $('.filter-select-all').click(function() {
         $(this).closest('ul').find('input[type="checkbox"]').prop('checked', true);
    });
}); 
```

## 更新：

仅供参考——HTML 规范说 only`<li>`应该是 的直接后代`<ul>`，因此您应该将 HTML 更改为：

```
<div class="filter-all">
    ...
</div>
<ul id='checkboxes'> ... </ul> 
```

然后您的代码将如下所示：

```
$(function () {
    $('.filter-select-all').click(function () {
        $('#checkboxes').find('input[type="checkbox"]')
            .prop('checked', true);
    });
    $('.filter-select-none').click(function () {
        $('#checkboxes').find('input[type="checkbox"]')
            .prop('checked', false);
    });
}); 
```

## 进一步更新：（[演示](http://jsfiddle.net/nEB9h/2/)）

要将两个点击处理程序合并为一个，请考虑进一步更新您的 HTML（拆分`filter-select-all`为`filter-select`和`all`）：

```
<div class="filter-all">
    <div class="filter-select all">Select All</div>|
    <div class="filter-select none">Select None</div>
</div> 
```

然后你可以使用第二个类进行布尔翻转：

```
$(function () {
    $('.filter-select').click(function () {
        $('#checkboxes').find('input[type="checkbox"]')
        .prop('checked', $(this).is('.all'));
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T03:39:43.207

1.  `div`元素没有`checked`属性，即`this.checked === 'undefined'`
2.  您的标记无效，`div`元素不应是元素的直接子`ul`元素。
3.  对于更改元素的属性，`prop`应使用`attr`.

    ```
    $('.filter-select-all').click(function() {
        $(this).closest('ul').find('input[type=checkbox]').prop('checked', true);
    }); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T03:41:38.047

1.  在每个复选框上添加一个“类”属性：

    <li><label><input **class='check'** type="checkbox">食物</label></li>

2.  编写javascript如下：

> $('.filter-select-all').click(function() { $('.check').each(function(k,v) { v.checked = true; }); });
> 
> $('.filter-select-none').click(function() { $('.check').each(function(k,v) { v.checked = false; }); });

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T03:43:18.697

```
$('.filter-select-all').click(function() {
  $(this).parent().siblings('li').children().find('input[type="checkbox"]').prop("checked",true);
});
$('.filter-select-none').click(function() {
  $(this).parent().siblings('li').children().find('input[type="checkbox"]').prop("checked",false);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T03:43:38.530

```
$('.filter-select-all').click(function() {
    $(this).closest('ul').find('input:checkbox').prop('checked', true);
}); 
```

# c# - 拆分文件以解析文本。正则表达式或其他方法

> ID：15330767
> 
> 赞同：1
> 
> 时间：2013-03-11T03:33:48.777
> 
> 标签：c#, .net, regex

我有一个包含多行的文本文件，每行都有时间戳。我想在某个日期拆分它，而不是运行一个常规的 Regex.Matches 单词。

所以我有一个称为 DateTime 的变量

```
var date;

While(!reader.EndOfStream)
{

//need to split the document at certain date maybe Regex.Split and save it as newData

var matches=Regex.Matches(File.ReadAllText(newData), someWord);

} 
```

我不知道如何使用正则表达式或其他方式在某个点拆分文档。我该如何拆分它？

```
Portion of datafile is 

2013-03-03 19:08:27    Truck 2012 Toyota
2013-03-03 19:08:44    car 2008   Honda
2013-03-03 19:08:55    car 2011   Ford
2013-03-03 19:09:21    car 2005   Nissan
2013-03-03 19:08:29    car 2003   Cadillac
2013-03-03 19:08:32    car 2009   Ford
2013-03-03 19:08:52    car 2007   Suburban"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:07:27.413

您可以根据文本文件中的数据创建一个匿名对象列表，然后您可以根据您的需求查询该列表。

例子：

```
 // create anonymous objects
   var myData = File.ReadAllLines("c:\\test.txt")
       .Select(line => line.Split(new char[]{' '}, StringSplitOptions.RemoveEmptyEntries))
       .Select(splits => new 
       {
           Date = DateTime.Parse(splits[0] + " " + splits[1]),
           Make = splits[2].Trim(),
           Year = int.Parse(splits[3].Trim()),
           Model = splits[4].Trim()
       });

   // find all "Ford" at my date
   var results = myData.Select(x => x.Date == myDate && x.Model == "Ford"); 
```

**注意：**您可能希望为匿名对象创建（int.TryParse、DateTime.TryParse）添加一些错误处理，因为您的文本文件可能不一致。

# android - 从 GIT 导入 android 项目时出现传输错误

> ID：15330768
> 
> 赞同：3
> 
> 时间：2013-03-11T03:33:58.893
> 
> 标签：android, github

![错误截图](../Images/9de6ed6a3985967c7d7650b05fee3dba.png)

我正在尝试使用 GIT 从 eclipse 导入 android 项目，它工作正常现在我收到所有项目的传输错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:05:14.543

似乎这与 android 无关，如果您有正确的互联网连接，只需检查天气您将公钥上传到您的 GIT 帐户，如果您已经创建了 ssh 密钥，它们应该在 C:\Users\Your_User.ssh 中可用（在 Windows 环境中）如果它们不可用，您需要创建密钥并需要将公钥上传到您的 GIT 帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:48:29.043

听起来 git 正在寻找一个 ssl 证书并拒绝在没有它的情况下运行。使问题消失并远离的好方法：Window --> Preferences --> Team --> Git --> Configuration --> New Entry --> http.sslverify=false。

那应该照顾它。

# node.js - 对nodejs服务器的XHR攻击

> ID：15330771
> 
> 赞同：0
> 
> 时间：2013-03-11T03:34:28.827
> 
> 标签：node.js, xmlhttprequest, xss, csrf

我有一个使用 express 模块编写的 nodejs 服务器。服务器的输入是一个 url，输出是一个 json 响应。我遇到了一些称为 XHR、XSS 和 CSRF 的攻击。Express 有一个处理 csrf 的函数。Node-validator 是一个我浏览这些时遇到的模块。下面是代码

说我的网址是

> 本地主机:1340/promotionDetails?promotion_id=PROM008765

我已经完成了下面的操作

```
//Validate user input
req.check('promotionDetails', 'Please enter a valid promotionDetails').len(4,5).isInt();
req.checkHeader('referer').contains('localhost'); 
```

这种方法是处理此类攻击的正确方法吗？任何想法都会很有帮助

# visual-studio-2010 - wxwidget 2.9.4 win7 vs2010 Ultimate下搭建链接报错

> ID：15330774
> 
> 赞同：0
> 
> 时间：2013-03-11T03:34:48.787
> 
> 标签：visual-studio-2010, wxwidgets

我在vs2010 Ultimate下批量构建wxwidget，报错：

```
Build started 2013/3/11 10:41:47.
InitializeBuildStatus:
Touching "vc_mswuddll\stc\stc.unsuccessfulbuild".
CustomBuild:
All outputs are up-to-date.
ClCompile:
All outputs are up-to-date.
All outputs are up-to-date.
ResourceCompile:
All outputs are up-to-date.
ManifestResourceCompile:
All outputs are up-to-date.
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets(990,5): warning MSB8012: TargetPath(C:\Users\jack\dev\wx\wxWidgets-2.9.4\build\msw\..\..\lib\vc_dll\stc.dll) does not match the Linker's OutputFile property value (C:\Users\jack\dev\wx\wxWidgets-2.9.4\lib\vc_dll\wxmsw294ud_stc_vc_custom.dll). This may cause your project to build incorrectly. To correct this, please make sure that $(OutDir), $(TargetName) and $(TargetExt) property values match the value specified in %(Link.OutputFile).
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets(992,5): warning MSB8012: TargetName(stc) does not match the Linker's OutputFile property value (wxmsw294ud_stc_vc_custom). This may cause your project to build incorrectly. To correct this, please make sure that $(OutDir), $(TargetName) and $(TargetExt) property values match the value specified in %(Link.OutputFile).
LINK : fatal error LNK1104: cannot open file 'C:\Users\jack\dev\wx\wxWidgets-2.9.4\lib\vc_lib\wxscintillad.lib' 
```

我使用同一台PC在两个不同的win7系统（使用win7 32bit和win7 64位构建）中尝试了两次，但这台PC有点旧（2007年制造），但我在笔记本电脑下尝试（2011年制造） ，没有错误。所以我很困惑，我检查了 stc 项目的配置。笔记本电脑和PC之间的所有值都是相同的。任何人都可以面临同样的问题或对我的问题有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:44:50.740

您是从 Visual Studio 上提供的解决方案构建的吗？

我在 wxWidget 2.8.12 和 Visual Studio 2008 上遇到了很多问题。这可能是因为不同项目之间的依赖关系没有在 Visual Studio 中设置。在构建 wxscintillad 之前，您最终构建了一个依赖于 wxscintillad 的 wxWidget 库。wxWidget 有您必须在他们的网站上手动设置的项目依赖项列表。

另一种解决方案是使用 Visual Studio 命令提示符手动构建，在`build\msw\`wxWidget 的目录中执行以下操作：

`nmake -f makefile.vc MONOLITHIC=0 SHARED=0 USE_EXCEPTIONS=1 USE_RTTI=1 RUNTIME_LIBS=dynamic CPPFLAGS="/Zc:wchar_t- /EHa" BUILD=release DEBUG_INFO=1`

调试命令行是：

`nmake -f makefile.vc MONOLITHIC=0 SHARED=0 USE_EXCEPTIONS=1 USE_RTTI=1 RUNTIME_LIBS=dynamic CPPFLAGS="/Zc:wchar_t- /EHa" DEBUG_INFO=1`

最终，如果您需要清理并从头开始：

*   删除 $WXWIN\wx\build\msw\ 下的所有文件夹（不是文件）
*   删除$WXWIN\wx\lib\下的所有文件

# linux - 这个 shell 脚本中的 gdate 是什么意思？

> ID：15330775
> 
> 赞同：2
> 
> 时间：2013-03-11T03:34:49.837
> 
> 标签：linux, bash, redhat

我需要维护这个 shell 脚本：

```
export DAYDAY=`gdate --date "30 days ago" +"%Y%m%d"` 
if [ -d $TMP/AA/$DAYDAY]; then
    rm -r $TMP/AA/$DAYDAY  
fi 
```

但我无法运行它，因为它找不到`gdate`；此代码用于清除恰好 30 天前的日志目录。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-03-23T13:20:27.590

这是**G** NU 的`date`；呼吁`gdate`与 BSD 相关的系统将其与自己的`date`.

* * *

我在 90% 的 Mac 办公室中使用 Linux 工作，我的很多同事的脚本都引用了`gsed`和`gdate`. 在我无法通过打开开关正确解决此问题的地方，`$OSTYPE`我最终投降并做到了：

```
sudo ln -s $(which date) /bin/gdate 
```

这个符号链接`gdate`到`date`.

这是相当安全的，因为不应该有一个`gdate`（或一个`gsed`，`gtar`或`gmake`），因为安装在 GNU/Linux上的版本显然*是*GNU 版本。

当然，您也可以给命令起别名，但这会继承用户和 shell。它实际上是对整个程序进行别名处理。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T03:41:32.147

在 Linux 以外的 *nix 系统上，安装 GNU 风格的实用程序并以 a 为前缀是相当普遍的`g`（例如`gmake`,`gtar`等）。在这种情况下，这很可能是指该`date`命令的 GNU 风格。因此，既然您在 Linux 上，只需将其更改为`date`：

```
export DAYDAY=`date --date "30 days ago" +"%Y%m%d"` 
if [ -d $TMP/AA/$DAYDAY]; then
    rm -r $TMP/AA/$DAYDAY  
fi 
```

# iphone - AVAudioSession / Audio Session Services 切换输出

> ID：15330777
> 
> 赞同：10
> 
> 时间：2013-03-11T03:35:08.817
> 
> 标签：iphone, cocoa-touch, core-audio, audio-recording, avaudiosession

好的，我的 AVAudioSession 使用以下内容定义（是的，混合了 c 和 obj-c 调用）还请注意，该应用程序具有后台模式音频，因为如果录制它必须在应用程序处于后台时继续这样做：

```
[(AVAudioSession *)[AVAudioSession sharedInstance] setDelegate: self];
// Allow the app sound to continue to play when the screen is locked.
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord error:nil];
//Turn off automatic gain on the microphone
[[AVAudioSession sharedInstance] setMode:AVAudioSessionModeMeasurement error:nil];
//Turn on the ability to mix with others
UInt32 doSetProperty = 1;
AudioSessionSetProperty (kAudioSessionProperty_OverrideCategoryMixWithOthers, sizeof(doSetProperty), &doSetProperty);

//Activate the audio session
[[AVAudioSession sharedInstance] setActive:YES error:nil]; 
```

该应用程序有几个不同的音频选项（只有前两个已编程）：

*   正常：应用程序没有音频，所以不要乱用外部音频
*   仅录制耳机麦克风：必须没有增益调整，并且不要干扰外部音频（将通过耳机播放）
*   从应用程序中播放音乐，无需录音：停止外部音频，并通过当前输出（扬声器或耳机）播放
*   从应用内播放音乐并录制耳机麦克风：停止外部音频，仅通过耳机录制和播放

录音在前景和背景中都运行良好，稍后我会添加播放。但是，我今晚刚刚注意到，如果音频已经在扬声器上播放（Pandora）并且我进入我的应用程序并激活录音模式，那么它会将 Pandora 切换为通过手机扬声器播放，即使在音频会话被停用并且应用程序是后台（但不是强制关闭）音频继续通过手机扬声器播放，直到我强制关闭应用程序。

```
//Deactivate the audio session
[[AVAudioSession sharedInstance] setActive:NO error:nil]; 
```

另一方面，如果当应用程序启动进入录音模式时耳机已打开并且音乐正在通过耳机播放，那么只有短暂的暂停并且音乐继续以相同的音量播放（正确，没有闪避） .

我看不出为什么当我在没有耳机的情况下激活音频会话时路由应该改变，以及为什么在会话被停用时它不会变回来。尤其是换手机喇叭！有什么我做错了，还是我只需要根据用户想要做什么（而不是一揽子播放+记录和模式测量）来不同地定义 AVAudioSession ？即使我需要为不同的用例单独定义它。例如，如果应用程序正在录制，音频将始终通过耳机，如果应用程序没有录制，则音频输出耳机或扬声器（取决于用户是否插入了耳机- 即，正常行为）。

**额外细节**

好的，我尝试切换所有代码 c 并注意到文档中隐藏了关于 kAudioSessionProperty_OverrideAudioRoute 的注释

> kAudioSessionOverrideAudioRoute_None
> 为 kAudioSessionCategory_PlayAndRecord 类别指定输出音频应发送到接收器。这是该类别的默认输出音频路由。

因此，我尝试以 3 种不同的方式设置此属性（这些属性）：

*   kAudioSessionProperty_OverrideAudioRoute 和 kAudioSessionOverrideAudioRoute_Speaker 继续播放音频，但通过接收器将其切换出去，并将路由显示为 ReceiverAndMicrophone
*   kAudioSessionProperty_OverrideCategoryDe​​faultToSpeaker 和 kAudioSessionOverrideAudioRoute_Speaker 停止当前播放的音频，并将路由显示为 SpeakerAndMicrophone
*   值为 1 的 kAudioSessionProperty_OverrideCategoryDe​​faultToSpeaker 与 kAudioSessionOverrideAudioRoute_Speaker 执行相同的操作

所以基本上文档说默认是切换到接收器。但是，无论我做什么，我似乎都无法保持扬声器输出并保持外部音频播放。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T18:56:14.073

显然，设置属性的顺序很重要，尽管文档中没有提到这一点。对于那些最终发现这一点的人，以下是有效的：

```
//Init and set the interrupt listener.  last parameter is passed to interruptlistener
AudioSessionInitialize(NULL, NULL, interruptlistener, NULL);

//Allow the app sound to continue to play when the screen is locked.
UInt32 audioCategory = kAudioSessionCategory_PlayAndRecord;
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(audioCategory), &audioCategory);

//Force current audio out through speaker
UInt32 routeSpeaker = kAudioSessionOverrideAudioRoute_Speaker;
AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryDefaultToSpeaker, sizeof(routeSpeaker), &routeSpeaker);

//Turn on the ability to mix with others
UInt32 doSetProperty = 1;
AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryMixWithOthers, sizeof(doSetProperty), &doSetProperty); 
```

# php - 防止相同的值在 php/mysql 中被回显两次

> ID：15330778
> 
> 赞同：1
> 
> 时间：2013-03-11T03:35:11.860
> 
> 标签：php, mysql

我有这个 php 脚本，它每十秒向用户回显一种新类型的狗。每次在这十秒钟内重新加载页面时，狗都保持不变。如果超过十秒钟，狗就会改变。

```
<head>
<title>New Dog Every Ten Seconds!</title>
<?php
$mysqli = new mysqli("localhost", "root","root","dogshow");
if ($mysqli->connect_errno) {
    printf("Connect failed: ", $mysqli->connect_error);
    exit();
}
?>
</head>
<body>
<?php
echo $currenttime = time();
echo '<br>';
echo $minute_ago = $currenttime - 60;
echo '<br>';
$result = $mysqli->query("SELECT * FROM dogs WHERE dateused<$minute_ago ORDER BY rand(ROUND(UNIX_TIMESTAMP()/10)) LIMIT 1");
$row = mysqli_fetch_array($result);
echo 'uid = ' . $row['uid'] . '<br>';
$uid = $row['uid'];
echo 'dogname = ' . $row['dogname'] . '<br>';
//$result = $mysqli->query("UPDATE dogs SET dateused=$currenttime WHERE uid=$uid");
?>
</body>
</html> 
```

它运作良好，但它有一个游戏停止错误。有时，同一只狗会出现两次！我需要做的就是阻止同一只狗出现两次。

我已经尝试了很多东西（整晚都在做）但没有任何效果！真的，真的很感激你的帮助。

数据库示意图如下：

```
Table Name = dogs
id  |  name  |  dateused
------------------------
1   |  Rover |  1362960167
2   |  Chip  |  1362960123
3   |  Rex   |  1362960178 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:54:00.633

我认为问题在于您信任您的自定义但有创意的种子价值[`RAND()`](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)来防止该问题：

```
ROUND(UNIX_TIMESTAMP()/10) 
```

如果使用相同的种子值，则会产生相同的序列。我只是在这里做一个猜测，但我认为你已经偏离了在单个 10 秒间隔内生成相同种子值的想法，因此序列中的第一个值将始终相同（期间），因此每次都会显示同一只狗。

这个想法的问题在于，不同的序列仍然可以以相同的值开始。因此，虽然是“随机的”，但仍然有机会让两个连续 10 秒的间隔以相同的序列值开始，从而导致显示同一只狗。

**更新**（潜在的解决方案/猜测）
使用当前在您的问题中的代码，您可以使用您的`UPDATE`子句并“稍微”更改正在保存的时间戳。与其保存`$currenttime`值，不如保存`ROUND(UNIX_TIMESTAMP() / 10)`- 您用于种子值的值。因此，更新行将如下所示：

```
$mysqli->query("UPDATE dogs SET dateused=ROUND(UNIX_TIMESTAMP() / 10) WHERE uid=$uid"); 
```

如果您这样做，您可以`$minute_ago = round((time() - 60) / 10);`在查询中按原样使用和使用它`SELECT`以使事情正常进行。

这背后的原因是`ROUND(UNIX_TIMESTAMP() / 10)`每 10 秒间隔会产生相同的值，就像`round((time() - 60) / 10)`. 因此，对于任何 10 秒的时间间隔，每个方程都会产生一个不变的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T03:40:58.153

`DISTINCT`在您的查询中使用

```
SELECT DISTINCT name, * FROM dogs WHERE dateused<$minute_ago ORDER BY rand(ROUND(UNIX_TIMESTAMP()/10)) LIMIT 1 
```

# twitter-bootstrap - 在 yii 上设置引导程序

> ID：15330779
> 
> 赞同：0
> 
> 时间：2013-03-11T03:35:12.600
> 
> 标签：twitter-bootstrap, yii

我安装了 Yii-Bootstrap 并将其保存在 protected/extensions 文件夹中。之后，我提取 zip 文件并将其命名为 bootstrap。作为[http://www.cniska.net/yii-bootstrap/setup.html](http://www.cniska.net/yii-bootstrap/setup.html)的文档。

我像这样更改文件 config/main.php。但我无法得到结果。如果我做错了，请在这里建议我如何在 yii 上使用引导程序。

```
<?php

// uncomment the following to define a path alias
// Yii::setPathOfAlias('local','path/to/local-folder');

// This is the main Web application configuration. Any writable
// CWebApplication properties can be configured here.
Yii::setPathOfAlias('bootstrap', dirname(__FILE__).'/extensions/bootstrap');
return array(
  'basePath'=>dirname(__FILE__).DIRECTORY_SEPARATOR.'..',
  'name'=>'Tantra Songs',
    'theme'=>'bootstrap', // requires you to copy the theme under your themes directory

  // preloading 'log' component
  'preload'=>array('log','application.ext.bootstrap.*'),

  // autoloading model and component classes
'import'=>array(
        'application.models.*',
        'application.components.*',
        'application.ext.bootstrap.*',
        'application.modules.user.models.*',
        'application.modules.user.components.*',
    ),

  'modules'=>array(
    // uncomment the following to enable the Gii tool
    'gii'=>array(
      'generatorPaths'=>array(
                'bootstrap.gii',
            ),
    ),
    'user'=>array(
            # encrypting method (php hash function)
            'hash' => 'md5',

            # send activation email
            'sendActivationMail' => true,

            # allow access for non-activated users
            'loginNotActiv' => false,

            # activate user on registration (only sendActivationMail = false)
            'activeAfterRegister' => false,

            # automatically login from registration
            'autoLogin' => true,

            # registration path
            'registrationUrl' => array('/user/registration'),

            # recovery password path
            'recoveryUrl' => array('/user/recovery'),

            # login form path
            'loginUrl' => array('/user/login'),

            # page after login
            'returnUrl' => array('/user/profile'),

            # page after logout
            'returnLogoutUrl' => array('/user/login'),
        ),
  ),

  // application components
  'components'=>array(
    'user'=>array(
      // enable cookie-based authentication
      'allowAutoLogin'=>true,
    ),
    'bootstrap'=>array(
            'class'=>'bootstrap.components.Bootstrap',
        ),
    // uncomment the following to enable URLs in path-format
    'urlManager'=>array(
      'urlFormat'=>'path',
      'rules'=>array(
        '<controller:\w+>/<id:\d+>'=>'<controller>/view',
        '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
        '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
      ),
    ),
    /*
    'db'=>array(
      'connectionString' => 'sqlite:'.dirname(__FILE__).'/../data/testdrive.db',
    ),*/
    // uncomment the following to use a MySQL database
    'db'=>array(
      'connectionString' => 'mysql:host=localhost;dbname=nt_songs',
      'emulatePrepare' => true,
      'username' => 'root',
      'password' => 'root',
      'charset' => 'utf8',
      'tablePrefix' => 'nt_',
    ),
    'errorHandler'=>array(
      // use 'site/error' action to display errors
      'errorAction'=>'site/error',
    ),
    'log'=>array(
      'class'=>'CLogRouter',
      'routes'=>array(
        array(
          'class'=>'CFileLogRoute',
          'levels'=>'error, warning',
        ),
        // uncomment the following to show log messages on web pages
        /*
        array(
          'class'=>'CWebLogRoute',
        ),
        */
      ),
    ),
  ),

); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:48:30.323

我认为您设置的路径有点不正确。试试这个;

```
Yii::setPathOfAlias('bootstrap', dirname(__FILE__).'/../extensions/bootstrap'); 
```

# css - css 3d 形状在旋转时变得倾斜

> ID：15330780
> 
> 赞同：1
> 
> 时间：2013-03-11T03:35:14.077
> 
> 标签：css, 3d, css-transforms

我在 css 中有一个 3d 框，当我旋转它时它看起来很奇怪。这是一个 jsfiddle： http: [//jsfiddle.net/markasoftware/GKPZ9/](http://jsfiddle.net/markasoftware/GKPZ9/) 你可以看到它在旋转时看起来多么奇怪和不像盒子。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:46:52.723

如果我的问题是正确的，并且当盒子旋转时，侧面看起来是梯形而不是矩形，那么......

这是因为您`perspective`在旋转的盒子上使用了。`perspective`在其父级（本例中为主体）上使用应该可以解决问题。`perspective-origin`在这种情况下，您可能还想设置 a 。

## [*修改过的小提琴*](http://jsfiddle.net/GKPZ9/3/)

另外，*请注意，您应该**始终将无前缀版本放在最后***。

另一个注意事项：默认值为`backface-visibility`is `visible`，因此您可以忽略它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:25:04.480

您使用哪个浏览器来测试输出？

我觉得您的代码在 webkit 浏览器上运行，但在 firefox 上运行，即等。

您使用了仅 webkit 浏览器支持的 CSS 属性，如透视、变换样式，您也使用了一些 CSS 属性，如变换、背面可见性，这些属性由 webkit 类型以外的浏览器支持，但您尚未指定属性其他浏览器可以理解的方式。例如你刚刚指定

```
transform: rotateX(-20deg);
-webkit-transform: rotateX(-20deg); 
```

你应该在哪里指定

> ```
>  -moz-transform: rotateX(-20deg); 
>   -ms-transform: rotateX(-20deg); 
>    -o-transform: rotateX(-20deg); 
>       transform: rotateX(-20deg);
>          -webkit-transform: rotateX(-20deg); 
> ```

# c++ - 复制/移动分配混乱

> ID：15330781
> 
> 赞同：1
> 
> 时间：2013-03-11T03:35:20.177
> 
> 标签：c++, c++11

在移动赋值运算符中，我应该使用 std::move 还是 std::swap？

我做了：

```
void Swap(Image& Img) {/*Swap everything here*/}

Image& Image::operator = (const Image &Img)
{
    if (this != &Img) Img.Swap(*this); //Compiler error for copy assignment.. no match for swap taking const..
    return *this;
}

Image& Image::operator = (Image&& Img)
{
    Img.Swap(*this);
    return *this;
} 
```

假设我有两个图像 I 和 J 并且我做：

```
I = std::move(J); 
```

发生的情况是来自 I 和 J 的数据被交换，所以现在 J 具有 I 的像素，反之亦然。这是正常的吗？我以为移动任务应该是偷窃和破坏？这样当 J 移动到 I 时，我得到 J 的内容而 J 被销毁？但是我在网上看到了这些例子

我可以在移动构造函数中看到相同的代码，但它如何在赋值中工作？这似乎没有意义：S

std::move 也应该在移动构造函数中使用吗？如果我在构造函数中使用 std::move 它会使我的程序崩溃：

```
Image::Image(Image&& Img) : Pixels(), Info(), /*Default everything*/
{
    this->Swap(Img);
    Img.Pixels.clear();
} 
```

上面的构造函数有效。但是，如果我在构造函数中使用 std::move ：

```
Image::Image(Image&& Img) : Pixels(std::move(Img.Pixels)), Info(std::move(Img.Info)), /*move everything*/
{
    //Do I need to set Img's values to default? Or does std::move do that?
} 
```

尝试使用已移动的对象时，这将使我的程序崩溃：

```
Image I = Image("C:/Image.bmp");
Image J = std::move(I);
I.Draw(...); //Crashes program if using std::move. If using the swap version of the constructor, it works. I assume it's because swap version defaults everything. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T03:42:46.857

如果您支持有效的交换和移动*构造*，那么您应该只有一个赋值运算符，按值：

```
Foo & operator=(Foo rhs) { rhs.swap(*this); } 
```

如果用户传递了一个常量引用，那么无论如何您都需要制作副本。如果用户传递一个右值，那么局部变量的构造`rhs`很便宜。

换句话说，在复制/移动构造函数、复制/移动赋值和交换这三个中，您只需要深入实现两个（并且这两个应该是构造函数之一）。

# c# - 将富文本框的内容保存到文件，保留多行

> ID：15330782
> 
> 赞同：1
> 
> 时间：2013-03-11T03:35:41.940
> 
> 标签：c#, .net, savefiledialog

好的，所以我正在尝试制作一个简单的文本编辑程序，并且我得到了要保存的文件，但问题是在保存的文件中删除了所有换行符

IE

文本编辑器中显示的文本

> 123
> 456
> 789

保存文件中显示的文本

> 123456789

我正在使用的代码
`string filename = saveFileDialog1.FileName; File.WriteAllText(filename,richTextBox1.Text);`
和
`string filename = saveFileDialog1.FileName;
File.AppendAllText(filename, richTextBox1.Text);`

这些都产生相同的结果，即没有换行符

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T03:40:44.673

您应该只能使用`File.WriteAllLines`该`RichTextBox.Lines`属性，因为`File.WriteAllText`并且`File.AppendAllText`会忽略您的行格式。

例子

```
string filename = saveFileDialog1.FileName;
File.WriteAllLines(filename, richTextBox1.Lines); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T03:59:34.113

> 尝试这个。

```
 File.WriteAllLines(saveFileDialog.FileName, richTextBox.Lines); 
```

# jquery - Jquery UI 与 CSS 中的 Bootstrap 冲突

> ID：15330790
> 
> 赞同：6
> 
> 时间：2013-03-11T03:36:51.353
> 
> 标签：jquery, jquery-ui, twitter-bootstrap

当我集成 Bootstrap 和 Jquery UI 时，我在 css 定义中发现了许多冲突。例如，`h3`两者都有 css 定义。所以对于这种情况，我总是要评论其中一个。

我最初的想法是使用 Bootstrap 进行页面布局并使用 Jquery UI 来构建 UI 交互。

有没有简单的方法来整合它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T03:44:53.863

jQuery UI 有一个特定的主题，它提供对 Bootstrap 的支持：[https ://github.com/addyosmani/jquery-ui-bootstrap](https://github.com/addyosmani/jquery-ui-bootstrap)

# ruby-on-rails - 如果已知 URL 与 Ruby on Rails，则使用 jquery 添加类

> ID：15330801
> 
> 赞同：0
> 
> 时间：2013-03-11T03:37:48.843
> 
> 标签：ruby-on-rails, jquery

我正在使用 Ruby on Rails 开发应用程序。我为我的页面添加了一组链接（使用部分链接），我想`active`在有人访问页面时添加一个类。

所以如果我有这样的链接：（这包含在所有页面中，以使页面更干净）

```
<ul>
<li><a href="profile">Profile</a></li>
<li><a href="profile/users">Users</a></li>
</ul> 
```

我有 jQuery：

```
var loc = window.location.pathname;
var href = ??
if(loc == href){
 var thisli = $('href').parents('li');
 $(this).addClass('active');
} 
```

我还在想我该怎么做这样的事情？除非有别的办法？我习惯于使用 PHP，因此我不熟悉 rails 是否有其他更简单的方法可以将活动类添加到某人当前正在访问的链接中。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:47:33.053

你可以试试

```
$(function(){
    $('a[href="' + window.location.pathname + '"]').closest('li').addClass('active');
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T03:53:33.323

使用 javascript/jQuery，您可以检查当前 URL 路径，`window.location.pathname`并与链接进行比较。使用`a`元素，您可以比较绝对 URL。

为了比较两个 URL，我们需要做一些额外的工作。基本思想是创建另一个 [hidden]`a`元素，将该元素的 href 设置为测试 URL，然后查看它们的两个生成的绝对 URL 是否匹配。

所以首先：

```
function compareURLs(url1, url2) {
    var testElement = $('<a href=""></a>'),
        result1, result2;
    testElement.attr('href', url1);
    result1 = testElement.get(0).href;
    testElement.attr('href', url2);
    result2 = testElement.get(0).href;
    return result1 == result2;
} 
```

然后检查每个`a`元素：

```
var path = window.locaion.pathname;
$('ul a').each(function() {
    if (compareURLs(path, $(this).attr('href')) {
        $(this).addClass('active');
    }
} 
```

# c++ - 在 C++ 中复制构造函数并将值复制到对象中

> ID：15330803
> 
> 赞同：1
> 
> 时间：2013-03-11T03:37:55.063
> 
> 标签：c++

```
#include <iostream>
#include <cstring>
using namespace std;

class foo {
     int number;
     char string[20];
public:
     foo( ) { 
          set(3, 5); 
     }
     void set (int a, int b) { 
          number = a + b;
        strcpy( string, "summer" ); 
     }

     foo (const foo & c ) { 
     }

     void output() { 
          cout << number << ',' << string << endl;  
     }
};

void showyanothing (foo);

int main() {
     foo a, b;
     showyanothing( a );
     a.output();
     b.output();
}

void showyanothing (foo z) { 
     cout << "... how are you?\n";
     z.output(); 
} 
```

输出

```
... hello ...
... how are you?
-1218897013,l·ôl·Y·ôl·À
8,summer
8,summer 
```

带有`-1218897013,l·ôl·Y·ôl·À`, 的行是复制构造函数创建的对象 Z 中的值。如果我将复制构造函数更改为以下内容，则输出对象 z 将 yield `10, summer.1.2.3`。为什么？这些值是从哪里神奇地插入到 Z 中的？

新的复制构造函数

```
 foo (const foo & c ) { 
     number = c.number + 2;
     strcpy( string, c.string );
     strcat( string, ".1.2.3" );
 } 
```

新输出：

```
... how are you?
10,summer.1.2.3
8,summer
8,summer 
```

在复制构造函数中，我很困惑的是为什么c.number等于8，而c.string等于夏天？它是从哪里得到这些值的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T03:48:58.740

简单检查一下函数调用

```
void showyanothing (foo z) 
```

复制构造函数在这里被调用。由于您在早期代码中有一个复制构造函数并且没有初始化数据成员，因此它会打印随机 val。另一方面，当您编辑复制构造函数时，您会得到结果（即调用以下内容！）

```
foo (const foo & c ) { 
     number = c.number + 2;
     strcpy( string, c.string );
     strcat( string, ".1.2.3" );
 } 
```

希望它能解决你的疑问:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T03:50:06.827

复制构造函数的第一个版本不会初始化 foo 的成员变量。因此`number`，and`string`将包含随机数据——无论在 RAM 中新对象被实例化的位置发生了什么。

第二个版本根据通过引用传入的对象（我们应该“复制”的对象）正确地将值分配给成员变量。在这种情况下，您正在传入`a`（因为您调用`showyanothing(a)`），它是使用默认构造函数实例化的，它给了它数字 8 和字符串“summer”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T03:52:45.367

无论您是否初始化，对象都会占用内存。内存包含一些任意值。如果你不初始化它，它可以是任何东西。这解释了你得到的初始垃圾输出。

接下来，您提供合理的复制构造函数，它根据传递给它的源对象初始化对象。在开始时，您`main()`创建`a`使用默认构造函数构造的对象，因此由于调用而将其`number`成员设置为 8 。函数通过值传递其参数，这意味着使用接收 object 的复制构造函数创建类的新实例，它将's （即 8）添加 2并复制.`set(3,5)``showyanothing (foo z)``foo``a``a``number``string`

# javascript - 在图像集之间切换？

> ID：15330809
> 
> 赞同：1
> 
> 时间：2013-03-11T03:38:23.533
> 
> 标签：javascript, jquery, web, toggle

好的，所以我正在使用 Skeleton 网格系统设计一个简单的网站。这是HTML代码：

```
<div id="gallery" class="nine columns">
    <div id="thumb1" class="three columns">
        <a id="cglink" href="#">
            <img src="images/cg1.jpg">
        </a>
    </div>
    <div id="thumb2" class="three columns">
        <a id="balink" href="#">
            <img src="images/ba1.jpg">
        </a>
    </div>
    <div id="thumb3" class="three columns">
        <a id="l7link" href="#">
            <img src="images/l71.jpg">
        </a>
    </div>
</div> 
```

和CSS：

```
#gallery {
    border-top: 1px solid;
    border-bottom: 1px solid;
    margin: 0;
}

#gallery .three.columns {
    padding: 19.3px 0 13.5px 0;
}

#thumb1 {
    margin-left: 0;
}

#thumb2 {
    margin: 0 10px 0 10px;
}

#thumb3 {
    margin-right: 0;
}

.three.columns img {
    width: 100%;
    opacity: 1;
    -webkit-transition: opacity .5s ease-in;
}

.three.columns img:hover {
    opacity: .7;
} 
```

所以我想要做的是当我点击其中一张图片时，它会切换一个隐藏的 div。html 在这里：

```
<div id="cg" class="nine columns">
    <img src="images/cg1.jpg">
</div>
<div id="ba" class="nine columns">
    <img src="images/ba1.jpg">
</div>
<div id="l7" class="nine columns">
    <img src="images/l71.jpg">
</div> 
```

所以我目前应用了基本的切换脚本。

```
$('#cg, #ba, #l7').hide();
$('#cglink').click(function () {
    $('#cg').toggle('fade', 400);
});
$('#balink').click(function () {
    $('#ba').toggle('fade', 400);
});
$('#l7link').click(function () {
    $('#l7').toggle('fade', 400);
}); 
```

所以我目前的作品。但是我发现了这个错误，如果我切换，比如说，`#cg`然后尝试切换`#ba`，`#ba`将出现在下面。它不是那么漂亮。所以我想做的是：当我单击`#cglink`然后决定单击时`#balink`，`#cg`div 应该隐藏而`#ba`div 会显示。我不确定我是否有道理，所以如果我没有，请发表评论，我会进一步阐明。

我认为人们设置标志来检查另一个`div`是否已经打开，以便它可以隐藏。但是我仍然是初学者，所以我需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:53:32.360

像这样为你的锚添加一个通用的标识符；

```
<div id="gallery" class="nine columns">
    <div id="thumb1" class="three columns">
        <a href="#" id="cglink" class="toggle_btn"><img src="images/cg1.jpg"></a>
    </div>
    <div id="thumb2" class="three columns">
        <a href="#" id="balink" class="toggle_btn"><img src="images/ba1.jpg"></a>
    </div>
    <div id="thumb3" class="three columns">
        <a href="#" id="l7link" class="toggle_btn"><img src="images/l71.jpg"></a>
    </div>
</div> 
```

然后到您要切换的元素：

```
<div id="cg" class="nine columns toggle_img">
    <img src="images/cg1.jpg">
</div>
<div id="ba" class="nine columns toggle_img">
    <img src="images/ba1.jpg">
</div>
<div id="l7" class="nine columns toggle_img">
    <img src="images/l71.jpg">
</div> 
```

然后切换：

```
$('#cg, #ba, #l7').hide();

$('a.toggle_btn').on('click', function () {
    var elem = $('#' + this.id.replace('link',''));

    $('.toggle_img').not(elem).fadeOut(400);
    elem.toggle('fade', 400);
}); 
```

请记住，下次使用类可以让您同时定位多个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T03:53:40.873

一种解决方案是创建一个函数来处理元素的显示。你所有的点击事件都会像这样引用这个函数

```
$('#cglink').click(function() {showElement('#cg'));
$('#balink').click(function() {showElement('#ba')});
$('#l7link').click(function() {showElement('#l7')}); 
```

您的 showElement 函数可以确保所有元素都被隐藏并且只淡入必要的元素。

```
function showElement(whichElement) {
    $("#gallery div").stop().hide() //hide all elements. we call stop() to stop any fading
    $(whichElement).fadeIn();
} 
```

这是基本的例子。您还可以在开始时隐藏所有元素，调用没有参数的函数。例如：showElement()。我还建议您通过添加和删除一个类而不是通过 JS 对其进行动画处理来使用 css3 进行淡入淡出。

编辑：我用更快的方法快速创建了一个 JS fiddle。您不必使用 href 属性为每个按钮手动添加事件。

[http://jsfiddle.net/EbGCx/](http://jsfiddle.net/EbGCx/)

# emacs - 如何使 nrepl-ritz-jack-in 通过 TRAMP / Emacs 远程工作

> ID：15330810
> 
> 赞同：298
> 
> 时间：2013-03-11T03:38:39.090
> 
> 标签：emacs, clojure, nrepl

## 我想要的是：

我在远程站点上有一个 clojure 程序，我们称之为`mccarthy`. 我想要做的是`nrepl-ritz`从我的笔记本电脑连接到一个，最好使用`nrepl-ritz-jack-in`. 插孔适用于本地程序，但似乎无法连接到远程程序。

## 尝试 1

`C-x C-f`上`/mccarthy:code/program/project.clj`

`(require 'nrepl-ritz)`

`M-x` `nrepl-ritz-jack-in`

## 结果

Emacs 似乎挂起。如果我去`*nrepl-server*`缓冲区，我会看到：

```
Exception in thread "main" java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.flatland.drip.Main.invoke(Main.java:117)
    at org.flatland.drip.Main.start(Main.java:88)
    at org.flatland.drip.Main.main(Main.java:64)
Caused by: java.lang.AssertionError: Assert failed: project
    at leiningen.ritz_nrepl$start_jpda_server.invoke(ritz_nrepl.clj:23)
    at leiningen.ritz_nrepl$ritz_nrepl.doInvoke(ritz_nrepl.clj:95) 
```

（还有很多其他的线路......）

我`drip`在我的笔记本电脑上使用，但不是在`mccarthy`，所以很明显`nrepl-ritz-jack-in`没有检测到它是一个远程文件。但是，在这种情况下，常规的 old`nrepl-jack-in`将按预期工作。

## 尝试 2

我还尝试开始`nrepl-ritz`使用`lein`on `mccarthy`：

```
mattox@mccarthy$ lein ritz-nrepl
nREPL server started on port 42874 
```

从我的笔记本电脑我转发一个端口，以便本地`42874`连接`42874`到`mccarthy`：

```
ssh -L 42874:localhost:42874 -N mccarthy 
```

然后，从我本地的 Emacs 中：

```
(require 'nrepl-ritz) 
```

`M-x` `nrepl`

主持人：`127.0.0.1`

港口：`42874`

这给了我一个联系：

```
; nREPL 0.1.7-preview
user> 
```

所以为了测试它，我运行

`M-x` `nrepl-ritz-threads`

它给了我一个很好的线程表。

`M-x` `nrepl-ritz-break-on-exception`

```
user> (/ 1 0) 
```

## 结果

这会挂起，但有时会显示一个隐藏的调试缓冲区，其中有一些可用的重新启动。如果我告诉它将异常传递回程序，它永远不会将控制权交还给 REPL。

我已经进行了大量搜索，但找不到比“确保 lein 在您的路径上”更具体的内容（我确实在两台机器上都这样做了......）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-24T12:13:50.767

> 如果 repl 仍在从前一个 cider-jack-in 运行，您应该使用 cider 命令连接到正在运行的实例，或者在启动新实例之前停止前一个

从这里` [Clojure - 连接问题重新运行 cider-jack-in](https://stackoverflow.com/questions/22908315/clojure-connection-issue-re-running-cider-jack-in)

也看到这个`https://devcenter.heroku.com/articles/debugging-clojure`

# nginx - Nginx 分离的子请求

> ID：15330817
> 
> 赞同：5
> 
> 时间：2013-03-11T03:39:31.197
> 
> 标签：nginx, lua

我需要对 NGinx 提供的图像进行一些耗时的处理，并且我希望能够快速响应缓存中部分处理的图像。

以下是我想要的步骤：

*   用户首次请求图像 A
*   用户无需任何处理即可获得图像 A
*   连接被释放
*   图像 A 被放入缓存 (A0)
*   启动“分离”子请求 (S1) [第一次图像转换]
*   直到子请求 S1 完成，所有对图像 A 的请求都得到 A0
*   当子请求 S1 完成时，缓存值被其结果替换 (A1)
*   从现在开始，所有对图像 A 的请求都得到 A1
*   启动“分离”子请求 (S2) [第二次图像转换]
*   直到子请求 S2 完成，所有对图像 A 的请求都得到 A1
*   当子请求 S2 完成时，缓存值将替换为其结果 (A2) 。. . 等等

我正在使用 NGinx Lua 模块来处理图像，并且我希望能够使用 proxy_cache 功能（LRU 清理、TTL 等）

我尝试过使用 proxy_pass、post_action 和 ngx.location.capture，但它们都在等待子请求完成以关闭连接。我见过一些像[Drupal Cache Warmer](https://github.com/perusio/drush-cache-warmer)这样的解决方案，它们会发出 OS 调用 curl，但如果可能的话，我不想这样做。

这是我到目前为止的测试用例

```
server {
    listen       8080;

    location / {

        rewrite_by_lua '
            ngx.say(".")
            --res = ngx.location.capture("/internal")
            ngx.exit(ngx.OK)
        ';

        proxy_pass http://127.0.0.1:8080/internal;

    }

    location /internal {
        content_by_lua '
            ngx.log(ngx.ERR, "before")
            ngx.sleep(10)
            ngx.say("Done")
            ngx.log(ngx.ERR, "after")
            ngx.exit(ngx.OK)
        ';
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:23:49.183

> 我曾尝试使用 post_action 和 ngx.location.capture，但它们都在等待子请求完成以关闭连接。

看看`ngx.eof()`文档。

更新：[http ://wiki.nginx.org/HttpLuaModule#ngx.eof](http://wiki.nginx.org/HttpLuaModule#ngx.eof)

# wordpress - WordPress - 自定义评论 - 父/嵌套回复

> ID：15330830
> 
> 赞同：4
> 
> 时间：2013-03-11T03:40:46.173
> 
> 标签：wordpress, wordpress-theming

我正在制作一个自定义 WordPress 主题并编辑了 comments.php，但我无法将评论保存为对另一条评论的回复。我已经成功地将注释父 ID 显示为源代码中的隐藏值，但它没有将其相应地保存在数据库中（相反，它总是将 comment_parent 保存为 0）。此外，由于某种原因，评论者 IP 地址也未保存（comment_author_IP 显示为“::1”）。这是我到目前为止的代码：

```
 <?php
    if ( post_password_required() )
        return;
?>

    <div id="comments" class="comments-area">

    <?php // You can start editing here -- including this comment!

    $fields = array(
    'author'               => '<p class="comment-form-author"><label for="author">' . __( 'Name', 'domainreference' ) . '</label> ' . ( $req ? '<span class="required">*</span>' : '' ) . '<input id="author" name="author" type="text" value="' . esc_attr( $commenter['comment_author'] ) . '" size="30"' . $aria_req . ' /></p>',
    'email'                => '<p class="comment-form-email"><label for="email">' . __( 'Email', 'domainreference' ) . '</label> ' . ( $req ? '<span class="required">*</span>' : '' ) . '<input id="email" name="email" type="text" value="' . esc_attr(  $commenter['comment_author_email'] ) . '" size="30"' . $aria_req . ' /></p>'
    );

    $defaults = array(
    'fields'               => apply_filters( 'comment_form_default_fields', $fields ),
    'comment_field'        => '<p class="comment-form-comment"><label for="comment">' . _x( 'Comment', 'noun' ) . '</label><textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea></p><p class="comment-form-math"><label for="math">' . __( 'five plus two', 'domainreference' ) . '</label> ' . ( $req ? '<span class="required">*</span>' : '' ) . '<input id="math" name="math" type="text" value="' . esc_attr( $commenter['math'] ) . '" size="30"' . $aria_req . ' /></p></p><input type=\'hidden\' name=\'comment_post_ID\' value=\'\' id=\'comment_post_ID\' /><input type=\'hidden\' name=\'comment_parent\' id=\'comment_parent\' value=\''.$comment_parent.'\' />',
    'must_log_in'          => '<p class="must-log-in">' .  sprintf( __( 'You must be <a href="%s">logged in</a> to post a comment.' ), wp_login_url( apply_filters( 'the_permalink', get_permalink( ) ) ) ) . '</p>',
    'logged_in_as'         => '<p class="logged-in-as">' . sprintf( __( 'Logged in as <a href="%1$s">%2$s</a>. <a href="%3$s" title="Log out of this account">Log out?</a>' ), admin_url( 'profile.php' ), $user_identity, wp_logout_url( apply_filters( 'the_permalink', get_permalink( ) ) ) ) . '</p>',
    'comment_notes_before' => '<p class="comment-notes">' . __( 'Your email address will not be published. Required fields are marked *' ) . ( $req ? $required_text : '' ) . '</p>',
    'comment_notes_after'  => '',
    'id_submit'            => 'submit',
    'title_reply'          => __( 'Leave a Reply' ),
    'title_reply_to'       => __( 'Leave a Reply to %s' ),
    'comment_form_title'       => __( 'Leave a Reply', 'Leave a Reply to %s' ),
    'cancel_reply_link'    => __( 'Cancel reply' ),
    'label_submit'         => __( 'Post Comment' )
    );

    comment_form($defaults);
    ?>

</div><!-- #comments .comments-area --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:31:22.303

看起来[这个支持线程](http://wordpress.org/support/topic/comment-replyjs-breaks-makes-comment_parent-value-always-0)可能与这个问题有关。不显式设置该`comment_parent`字段（也可能省略该`comment_post_ID`字段）可能会解决 post parent ID 问题，因为 WordPress 会自动添加这些隐藏字段。

至于 IP 异常，`::1`IPv6 是否等同于 127.0.0.1 ( [localhost](http://en.wikipedia.org/wiki/Localhost) )，如果您在本地安装了 WordPress，这就是您的 IP 地址。

# php - 在 PHP 中计算多维数组中的重复值

> ID：15330832
> 
> 赞同：0
> 
> 时间：2013-03-11T03:40:55.410
> 
> 标签：php, arrays, multidimensional-array

下面是我的数组示例。每次 user_id 在数组中时，我都会尝试计算。每次 user_id 在数组中时，我都会尝试计算。

```
Array
(
[0] => Array
    (
        [user_id] => 57002892
        [page_id] => 109446562415595
    )

[1] => Array
    (
        [user_id] => 515576073
        [page_id] => 109446562415595
    )

[2] => Array
    (
        [user_id] => 560299932
        [page_id] => 109446562415595
    )

[3] => Array
    (
        [user_id] => 607960053
        [page_id] => 109446562415595
    )

[4] => Array
    (
        [user_id] => 607960053
        [page_id] => 109446562415595
    )
) 
```

这应该输出以下内容：

```
Array
(
[0] => Array
    (
        [user_id] => 57002892
        [count] => 1
    )

[1] => Array
    (
        [user_id] => 515576073
        [count] => 1
    )

[2] => Array
    (
        [user_id] => 560299932
        [count] => 1
    )

[3] => Array
    (
        [user_id] => 607960053
        [count] => 2
    )
) 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:50:29.640

在下面的代码中，让您的示例输入为 $input_array：

```
$user_id_hash = array();
foreach( $input_array as $occur )
{
    if( !array_key_exists( $occur['user_id'], $user_id_hash ) )
    {
        $user_id_hash[$occur['user_id']] = 0;
    }
    $user_id_hash[$occur['user_id']]++;
}
$user_id_arr = array();
foreach( $user_id_hash as $user_id => $count )
{
    $user_id_arr[] = array( 'user_id' => $user_id, 'count' => $count );
} 
```

如果你对关联数组没问题，你可以放弃第二个循环。

# mysql - COMMIT 在 phpmyadmin (MySQL) 中不起作用

> ID：15330834
> 
> 赞同：2
> 
> 时间：2013-03-11T03:41:00.383
> 
> 标签：mysql, select, transactions, phpmyadmin, command-prompt

我有一个`tbl_setting`带有 InnoDB 类型表的 mysql 数据库。它的自动提交设置为 1。我在 phpmyadmin 中执行了以下查询。

```
begin;
INSERT INTO tbl_setting (setting_name) VALUES ('test');
commit; 
```

从 phpmyadmin 浏览时，它显示了所需的结果；但是在 Windows 8 的命令模式下，通过查询`SELECT * FROM tbl_setting`它不会显示我刚刚插入的行。我需要在命令模式下进行提交以获得所需的输出。数据库不应该自动更新吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:10:03.027

经过长时间的研究，我发现了问题。命令模式下的自动提交设置为 0；所以，执行`SET @@AUTOCOMMIT = 1;`查询后，问题就解决了。

# ruby-on-rails - 使用“beginning_of_week”时的 Rails 时区问题

> ID：15330835
> 
> 赞同：1
> 
> 时间：2013-03-11T03:41:19.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, timezone

我一直在调查在 UTC 和不同时区之间转换时时间显示不正确的问题。我已经追踪到我在 Rails 上使用“beginning_of_week”方法。

剥离所有应用程序逻辑，我的问题的核心是：

```
irb(main):018:0> Time.now.in_time_zone('Eastern Time (US & Canada)')
=> Sun, 10 Mar 2013 23:29:09 EDT -04:00
irb(main):019:0> Time.now.in_time_zone('Eastern Time (US & Canada)').beginning_of_week
=> Mon, 04 Mar 2013 00:00:00 EST -05:00 
```

如您所见，设置了一周的开始，但在此过程中将偏移量从“-04:00”更改为“-05:00”。

有谁知道这个补丁或解决方法？还是我需要实现自己的 begin_of_week 逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:51:57.123

请注意现在的完整时区规范：

```
Sun, 10 Mar 2013 23:29:09 EDT -04:00
# ------------------------^^^ 
```

和一周的开始：

```
Mon, 04 Mar 2013 00:00:00 EST -05:00
# ------------------------^^^ 
```

2013-03-10 的时钟发生了什么可怕的事情？为什么会发生可恶的夏令时调整。有你一小时的差异。

# ios - UICollectionView 选择和取消选择问题

> ID：15330844
> 
> 赞同：51
> 
> 时间：2013-03-11T03:41:58.337
> 
> 标签：ios, cocoa-touch, uicollectionview

所以我有一个主要对象，它有许多与之相关的图像。图像也是一个对象。

假设您有一个集合视图控制器，并且在该控制器中您有

`cellForItemAtIndexPath`

很好地基于主要对象，如果它具有与之关联的当前图像，我想将其设置为 true。但我希望用户能够随时“取消选择”当前单元格以删除其与主对象的关联。

我发现如果您将“selected 设置为 true” - 如果主对象和图像之间存在关系`cellForItemAtIndexPath`，则取消选择不再是一个选项。

在

```
didDeselectItemAtIndexPath 
```

和

```
didSelectItemAtIndexPath 
```

我用日志测试它们是否被调用。如果一个单元格设置为选中 - 下界会被调用，但如果我从未将一个单元格设置为选中，`cellForItemAtIndexPath`我可以选择和取消选择所有我想要的。

这是集合视图应该工作的预期方式吗？我阅读了文档，但似乎并没有谈到这一点。我将文档解释为它以表格视图单元格的方式工作。有一些明显的变化

这也表明控制器设置正确并且正在使用适当的委托方法.... hmmmm

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-07-23T13:48:19.767

我有同样的问题，即。设置然后无法通过点击它来取消选择单元格`cell.selected = YES`。`[UICollectionView collectionView:cellForItemAtIndexPath:]`

现在的解决方案：我*同时* `[UICollectionViewCell setSelected:]`调用和`[UICollectionView selectItemAtIndexPath:animated:scrollPosition:]`in `[UICollectionView collectionView:cellForItemAtIndexPath:]`。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-12-15T11:25:47.440

我有一个取消选择问题，`UICollectionView`我发现我不允许在 collectionView 上进行多项选择。因此，当我测试时，我总是在同一个单元格上尝试，如果单选为 ON，则无法取消选择已选择的单元格。

我不得不补充：

```
myCollectionView.allowsMultipleSelection = YES; 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2013-11-03T04:32:41.317

`setSelected`您的 Cell 类中有自定义方法吗？你`[super setSelected:selected]`用那个方法打电话吗？

我有一个神秘的问题，我正在使用多项选择，一旦选择了单元格，我就无法取消选择它们。调用 super 方法解决了这个问题。

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2015-07-13T15:19:45.713

这有点老了，但是因为我使用 swift 遇到了同样的问题，所以我会添加我的答案。使用时：

```
 collectionView.selectItemAtIndexPath(indexPath, animated: true, scrollPosition: []) 
```

该单元格根本没有被选中。但是使用时：

```
cell.selected = true 
```

它确实被选中了，但我无法再选择/取消选择单元格。

我的解决方案（使用两种方法）：

```
cell.selected = true
collectionView.selectItemAtIndexPath(indexPath, animated: true, scrollPosition: .None) 
```

当这两个方法被调用时：

```
func collectionView(collectionView: UICollectionView, cellForItemAtIndexPath indexPath: NSIndexPath) -> UICollectionViewCell 
```

它工作得很好！

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-04-29T05:40:23.947

我不知道为什么`UICollectionView`会如此凌乱，相比之下`UITableViewController`……我发现了一些事情。

`setSelected:`被多次调用的原因是因为顺序方法被调用。该顺序与方法的顺序非常相似`UITextFieldDelegate`。

`collectionView:shouldSelectItemAtIndexPath:`在实际选择单元格之前调用该方法`collectionView`，因为它实际上是在询问“应该选择它”吗？

`collectionView:didSelectItemAtIndexPath:`实际上是在`collectionView`选择单元格之后调用的。因此，名称“确实选择了”。

所以这就是你的情况（和我的情况，我不得不为此挣扎几个小时）。

用户再次触摸选定的单元格以取消选择。`shouldSelectItemAtIndexPath:`被调用来检查是否应该选择单元格。`collectionView`选择单元格然后被`didSelectItemAtIndexPath`调用。此时您所做的任何事情都是在单元格的`selected`属性设置为之后`YES`。这就是为什么类似的东西`cell.selected = !cell.selected`不起作用的原因。

TL;DR -通过调用和 return`collectionView`取消选择委托方法中的单元格。`collectionView:shouldSelectItemAtIndexPath:``deselectItemAtIndexPath:animated:``NO`

我所做的简短示例：

```
- (BOOL)collectionView:(OPTXListView *)collectionView shouldSelectItemAtIndexPath:(NSIndexPath *)indexPath {
    NSArray *selectedItemIndexPaths = [collectionView indexPathsForSelectedItems];

    if ([selectedItemIndexPaths count]) {
        NSIndexPath *selectedIndexPath = selectedItemIndexPaths[0];

        if ([selectedIndexPath isEqual:indexPath]) {
            [collectionView deselectItemAtIndexPath:indexPath animated:YES];

            return NO;
        } else {
            [collectionView selectItemAtIndexPath:indexPath animated:YES scrollPosition:UICollectionViewScrollPositionCenteredHorizontally];

            return YES;
        }
    } else {
        [collectionView selectItemAtIndexPath:indexPath animated:YES scrollPosition:UICollectionViewScrollPositionCenteredHorizontally];

        return YES;
    }
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-12-08T18:45:49.477

这是我对 Swift 2.0 的回答。

我能够在 viewDidLoad() 中设置以下内容

```
collectionView.allowsMultipleSelection = true; 
```

然后我实现了这些方法

```
func collectionView(collectionView: UICollectionView, didSelectItemAtIndexPath indexPath: NSIndexPath) {
    let cell = collectionView.cellForItemAtIndexPath(indexPath) as! MyCell
    cell.toggleSelected()
}

func collectionView(collectionView: UICollectionView, didDeselectItemAtIndexPath indexPath: NSIndexPath) {
    let cell = collectionView.cellForItemAtIndexPath(indexPath) as! MyCell
    cell.toggleSelected()
} 
```

最后

```
class MyCell : UICollectionViewCell {

    ....

    func toggleSelected ()
    {
        if (selected){
            backgroundColor = UIColor.orangeColor()
        }else {
            backgroundColor = UIColor.whiteColor()
        }
    }

} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-06-07T22:41:24.617

这个问题已经六岁了，但我不在乎；在登陆这里并发现没有一个答案能解决我的具体问题后，我最终找到了我认为是这个问题的最佳答案。因此，我将其张贴在这里以供后代使用。

由于 UICollectionView 调用该方法的方式，在 cellForItemAtIndexPath 中选择单元格是有问题的。它不只是在最初设置集合视图时调用。它在集合视图滚动时连续调用，因为集合视图只向其数据源询问可见单元格，从而节省了大量开销。

因为集合视图不会将所有单元格保存在内存中，所以它们需要管理自己单元格的选定状态。他们不希望您向他们提供已设置 isSelected 属性的单元格。他们希望您为他们提供单元格，并且如果合适，他们将在其上设置选定的属性。

这就是为什么 Apple 提醒您不要直接设置 UICollectionViewCell 的 isSelected 属性。UICollectionView 期望为您解决这个问题。

**所以，答案是**不要**尝试在 cellForItemAtIndexPath 方法中选择单元格**。**选择您希望最初选择的单元格的最佳位置是在 UICollectionViewController 的 viewWillAppear 方法中。在该方法中，通过调用 UICollectionView.selectItem(at:animated:scrollPosition:) 选择所有需要的单元格，并且**不要**直接在您的单元格上设置 isSelected。**

 *** * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-02-09T17:12:37.800

```
 func collectionView(collectionView: UICollectionView, didSelectItemAtIndexPath indexPath: NSIndexPath) {

    let cell = collectionView.cellForItemAtIndexPath(indexPath)
    if cell?.selected == true{
        cell?.layer.borderWidth = 4.0
         cell?.layer.borderColor = UIColor.greenColor().CGColor
    }   
}func collectionView(collectionView: UICollectionView, didDeselectItemAtIndexPath indexPath: NSIndexPath) {
    let cell = collectionView.cellForItemAtIndexPath(indexPath)
    if cell?.selected == false{
            cell?.layer.borderColor = UIColor.clearColor().CGColor
    }

} 
```

我找到的简单解决方案

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-02-14T21:23:52.600

我正在使用自定义单元子类，对我来说，我只需要在子类中进行`self.selected = false`设置`prepareForReuse()`。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-03-25T11:25:28.930

生活在 iOS 9 时代，这里有很多事情需要检查。

1.  检查您是否已`collectionView.allowsSelection`设置为`YES`
2.  检查您是否已`collectionView.allowsMultipleSelection`设置为`YES`（如果您需要该功能）

现在是风扇部分。如果您听 Apple 并设置`backgroundColor`它`cell.contentView`而不是`cell`它本身，那么您只是将其隐藏起来`selectedBackgroundView`，永远不可见。因为：

```
(lldb) po cell.selectedBackgroundView
<UIView: 0x7fd2dae26bb0; frame = (0 0; 64 49.5); autoresize = W+H; layer = <CALayer: 0x7fd2dae26d20>>

(lldb) po cell.contentView
<UIView: 0x7fd2dae22690; frame = (0 0; 64 49.5); gestureRecognizers = <NSArray: 0x7fd2dae26500>; layer = <CALayer: 0x7fd2dae1aca0>>

(lldb) pviews cell
<MyCell: 0x7fd2dae1aa70; baseClass = UICollectionViewCell; frame = (0 0; 64 49.5); clipsToBounds = YES; hidden = YES; opaque = NO; layer = <CALayer: 0x7fd2dae1ac80>>
   | <UIView: 0x7fd2dae26bb0; frame = (0 0; 64 49.5); autoresize = W+H; layer = <CALayer: 0x7fd2dae26d20>>
   | <UIView: 0x7fd2dae22690; frame = (0 0; 64 49.5); gestureRecognizers = <NSArray: 0x7fd2dae26500>; layer = <CALayer: 0x7fd2dae1aca0>>
   |    | <UIView: 0x7fd2dae24a60; frame = (0 0; 64 49.5); clipsToBounds = YES; alpha = 0; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x7fd2dae1acc0>>
   |    | <UILabel: 0x7fd2dae24bd0; frame = (0 0; 64 17.5); text = '1'; opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <_UILabelLayer: 0x7fd2dae240c0>>
   |    | <UILabel: 0x7fd2dae25030; frame = (0 21.5; 64 24); text = '1,04'; opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <_UILabelLayer: 0x7fd2dae25240>>

(lldb) po cell.contentView.backgroundColor
UIDeviceRGBColorSpace 0.4 0.4 0.4 1 
```

`cell.selected`因此，如果您想使用 selectedBackgroundView （使用and打开/关闭`selectItemAtIndexPath...`），请执行以下操作：

```
cell.backgroundColor = SOME_COLOR;
cell.contentView.backgroundColor = [UIColor clearColor]; 
```

它应该工作得很好。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-04-05T22:10:23.643

你看过：

```
- (BOOL)collectionView:(PSTCollectionView *)collectionView shouldDeselectItemAtIndexPath:(NSIndexPath *)indexPath; 
```

请更清楚地说明您的问题，也许我们可以深入了解它。我刚刚花了一些时间在 UICollectionView 上。

我认为您的问题可能源于混淆，如果您`cell.selected = YES`以编程方式设置，`didSelectItemAtIndexPath:`则没有被调用的原因是因为仅在 collectionView 本身负责单元格的选择时使用（例如，通过点击）。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-03-11T06:44:18.907

我不知道我是否理解这个问题，但选定的状态是按单元格设置的，并将包括单元格内的所有子视图。您没有解释“一个主要对象有许多与之相关联的图像”是什么意思。在子视图中关联？或者你到底是什么意思？

对我来说，这听起来像是一个设计问题。也许您需要一个 UIView 子类，其中包含您需要拥有的任何关联对象；然后可以将该子类设置为内容视图。例如，我会在有图像、描述和与图像相关的录音的情况下这样做。所有都在子类中定义，然后这些子类中的每一个都成为单个单元格的内容视图。

我还使用了将相关图像排列到包含它们的文件夹的方法。在这种设置下，文件夹和图像每个都有一个子类，并且任何一个都可以作为内容视图附加到单元格（这些作为单个实体存储在核心数据中）。

也许您可以进一步解释您的问题？

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-11-29T15:25:32.337

当同时调用和调用*都* 不起作用时，请尝试在块内调用它们 。`[UICollectionViewCell setSelected:]``[UICollectionView selectItemAtIndexPath:animated:scrollPosition:]``[UICollectionView collectionView:cellForItemAtIndexPath:]``dispatch_async(dispatch_get_main_queue(), ^{});`

这就是最终为我解决的问题。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-10-14T10:05:59.873

当我这样做时， Collectionview**选择、取消选择问题已解决。**在`viewDidLoad`中，添加`collViewRiskPreferences.allowsMultipleSelection = false`并添加以下内容

```
func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell {

        guard let cell = collectionView.dequeueReusableCell(withReuseIdentifier:"MyCell", for: indexPath) as? MyCell else { return UICollectionViewCell() }

        cell.setupCellStyle(isSelected: false)

        return cell
    }

func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath) {
        guard let cell = collectionView.cellForItem(at: indexPath) else { return }
        cell.setupCellStyle(isSelected: true)
    }

    func collectionView(_ collectionView: UICollectionView, didDeselectItemAt indexPath: IndexPath) {
        guard let cell = collectionView.cellForItem(at: indexPath) else { return }
        cell.setupCellStyle(isSelected: false)
    } 
```

和

```
class MyCell: UICollectionViewCell {
        func setupCellStyle(isSelected: Bool) {
            if(isSelected) {
                self.contentView.backgroundColor = UIColor.blue
            } else {
                self.contentView.backgroundColor = UIColor.green
            }
        }
    } 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2015-11-04T02:45:16.960

最好通过设置 backgroundView 和选定的背景视图来处理单元格选择和取消选择。我建议确保在 layoutSubviews 方法中正确设置这两个视图的框架（如果您通过 IB 设置选定视图和背景视图）。

不要忘记设置要清除的 contentView（如果有的话）背景颜色，以便显示正确的背景视图。

永远不要直接设置单元格的选择（即通过 cell.selected = YES），请在集合视图中使用为此目的设计的方法。尽管我同意这些信息在指南中有些分散，但文档中对此进行了清楚的解释。

您不需要直接在 collectionView 数据源中插入单元格的背景颜色。

另外，作为最后一点，如果您在单元格的类中实现它们，请不要忘记调用 [super prepareForReuse] 和 [super setSelected:selected]，因为您可能会阻止单元格的超类进行单元格选择。

如果您需要进一步澄清这个问题，请联系我。**

# sql - SQL 自然连接和嵌套 SELECT 查询

> ID：15330846
> 
> 赞同：0
> 
> 时间：2013-03-11T03:42:08.337
> 
> 标签：sql, oracle, natural-join

什么可能使这两个查询不同？

该帖子确实主要是代码。

```
SELECT DISTINCT S.name 
FROM 
    student S NATURAL JOIN taking NATURAL JOIN 
    (select * from class where classnum ='121') 
WHERE 
    department='CMPSC' 
    AND semester='Spring 2013';

SELECT DISTINCT S.name 
FROM 
    student S NATURAL JOIN taking NATURAL JOIN class 
WHERE 
    department='CMPSC' 
    AND semester='Spring 2013' 
    AND classnum='121'; 
```

谢谢！

编辑：

作为对解释命令请求的响应：我必须在 ORACLE 上执行此操作，所以我不确定这是否是预期的结果：

这是第一个查询：

```
Plan hash value: 3259400360

------------------------------------------------------
| Id  | Operation                     | Name         |
------------------------------------------------------
|   0 | SELECT STATEMENT              |              |
|   1 |  HASH UNIQUE                  |              |
|   2 |   NESTED LOOPS                |              |
|   3 |    NESTED LOOPS               |              |
|   4 |     TABLE ACCESS FULL         | CLASS        |
|   5 |     INDEX FULL SCAN           | SYS_C0099014 |
|   6 |    TABLE ACCESS BY INDEX ROWID| STUDENT      |
|   7 |     INDEX UNIQUE SCAN         | SYS_C0098998 |
------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   4 - filter("CLASSNUM"=121 AND "CLASS"."SEMESTER"='Spring 2013' AND
              "CLASS"."DEPARTMENT"='CMPSC')

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------
   5 - access("TAKING"."SCHEDULENUM"="CLASS"."SCHEDULENUM" AND
              "TAKING"."SEMESTER"='Spring 2013')
       filter("TAKING"."SEMESTER"='Spring 2013' AND
              "TAKING"."SCHEDULENUM"="CLASS"."SCHEDULENUM")
   7 - access("S"."STUDENTNUM"="TAKING"."STUDENTNUM") 
```

第二个查询：

```
PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------
Plan hash value: 226170808

-------------------------------------------------------
| Id  | Operation                      | Name         |
-------------------------------------------------------
|   0 | SELECT STATEMENT               |              |
|   1 |  HASH UNIQUE                   |              |
|   2 |   HASH JOIN                    |              |
|   3 |    MERGE JOIN                  |              |
|   4 |     TABLE ACCESS BY INDEX ROWID| STUDENT      |
|   5 |      INDEX FULL SCAN           | SYS_C0098998 |
|   6 |     SORT JOIN                  |              |
|   7 |      INDEX FULL SCAN           | SYS_C0099014 |
|   8 |    TABLE ACCESS FULL           | CLASS        |
-------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------

   2 - access("TAKING"."SEMESTER"="CLASS"."SEMESTER")
   6 - access("S"."STUDENTNUM"="TAKING"."STUDENTNUM")
       filter("S"."STUDENTNUM"="TAKING"."STUDENTNUM")
   7 - access("TAKING"."SEMESTER"='Spring 2013')
       filter("TAKING"."SEMESTER"='Spring 2013')
   8 - filter("CLASS"."CLASSNUM"=121 AND "CLASS"."SEMESTER"='Spring 2013' AND
              "CLASS"."DEPARTMENT"='CMPSC') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:15:23.127

如果性能是问题，那是因为您正在击败索引。当子查询执行时，服务器可以使用索引来检索结果；但是，它不能索引子查询的*结果*，导致性能变差。一般而言，试图“智取”优化器的尝试效果不佳 - 您最终会得到更难阅读的查询并执行完全相同的操作（优化器会将查询优化为与原来相同的内容）或者您最终会出现性能更差的情况。JOIN 子句应该用于定义连接，而不是约束数据。

优化器将同样执行以下查询：

```
SELECT *
FROM foo f
  JOIN bar b
    ON f.id = b.id
      AND b.col = 'baz' 
```

和

```
SELECT *
FROM foo f
  JOIN bar b
    ON f.id = b.id
WHERE b.col = 'baz' 
```

然而

```
SELECT *
FROM foo f
  JOIN (
    SELECT *
    FROM bar b
    WHERE col = 'baz'
  ) AS b
  ON f.id = b.id 
```

本质上是在 mysql 中生成一个非索引的内存临时表。它与 sql server 中的前两个执行相同。

# vb.net - 消除 ”

> ID：15330847
> 
> 赞同：3
> 
> 时间：2013-03-11T03:42:08.523
> 
> 标签：vb.net

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T04:04:01.533

尽管您的问题似乎是“不完整的”，但通过阅读评论，您似乎想要删除结束 DIV 标记及其后出现的任何文本。

如果是这种情况，那么这段代码应该可以完成工作：

```
Dim txt As String = "Wanted text</div> arbitrary text"
Dim p As Integer = txt.ToLower().IndexOf("</div>")
If p <> -1 Then txt = txt.Substring(0, p) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:09:45.047

您可以这样做，`.Split()`而无需检查是否存在`<div>`或获取该位置。

```
Dim txt As String = "Wanted text</div> arbitrary text"
txt = txt.Split( New String() {"</div>"}, StringSplitOptions.None )(0) 
```

# mysql - 仅从所有发件人中提取 1 条消息

> ID：15330858
> 
> 赞同：0
> 
> 时间：2013-03-11T03:44:14.207
> 
> 标签：mysql, sql, greatest-n-per-group

我正在构建一个消息传递系统，只需要从每个发件人那里提取最后一条消息给指定的收件人。因此，如果 3 个人每人向收件人发送 5 条消息（共 15 条消息），我需要获得 3 个条目；每个发件人的最后一条消息。

这是我当前的 SQL：

```
SELECT  
                        messages.*, 
                        user_accounts.uacc_id,
                        user_accounts.uacc_username,
                        user_profiles.upro_image_name
                    FROM messages
                        LEFT JOIN user_accounts 
                            ON messages.msg_from_uacc_fk = user_accounts.uacc_id
                        LEFT JOIN user_profiles 
                            ON user_profiles.upro_uacc_fk = user_accounts.uacc_id
                    WHERE 
                        messages.msg_to_uacc_fk = ?
                    ORDER BY 
                        msg_id
                    DESC 
```

我尝试将 'MAX(1)' 添加到 SELECT 以及在 DESC 之后添加 'LIMIT = 1'，但是，当然，这只返回了总共 1 条消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T05:11:13.323

有时很难猜测这些表是如何设计的，但下面的这个查询使用子查询来获取每个用户的最新消息。

```
SELECT  a.*, 
        c.uacc_id,
        c.uacc_username,
        d.upro_image_name
FROM    messages a
        INNER JOIN
        (
            SELECT  msg_from_uacc_fk, MAX(msg_id) max_id
            FROM    messages 
            GROUP   BY msg_from_uacc_fk
        ) b ON  a.msg_from_uacc_fk = b.msg_from_uacc_fk AND
                a.msg_id = b.max_id
        INNER JOIN user_accounts c
            ON  a.msg_from_uacc_fk = c.uacc_id
        INNER JOIN user_profiles d
            ON d.upro_uacc_fk = c.uacc_id
WHERE   a.msg_to_uacc_fk = ? 
```

*如果这不能解决问题，请在您的问题中添加示例记录`:)`*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T03:57:39.573

你不能简单地使用 group by 吗？

```
SELECT u.uacc_username, max(m.msg_id) as LatestMsg
FROM messages m JOIN user_accounts u on m.msg_from_uacc_fk = u.uacc_id
WHERE m.msg_to_uacc_fk = ?
GROUP BY u.uacc_username 
```

# php - 通过 MongoDB 中的特定键获取排序数组

> ID：15330861
> 
> 赞同：0
> 
> 时间：2013-03-11T03:44:19.633
> 
> 标签：php, mongodb, database

大家好，我的文档结构如下：

```
{
    name : abc
    message:
    [{
         id: 4,
         status : 0,
         content : "abc"
     },
     {
         id: 2,
         status : 1,
         content : "abc"
     },
     {
         id: 1,
         status : 1,
         content : "abc"
     }
    ]
} 
```

如何通过 id 键和状态 = 1 获取排序的消息数组

```
{
     id: 1,
     status : 1,
     content : "abc"
 },
 {
     id: 2,
     status : 1,
     content : "abc"
 }, 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:14:40.450

mongo shell 中的这个解决方案应该适合你。但是从 Mongo 2.1 开始支持聚合框架。[http://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)

```
 db.yourcollection.aggregate([{$unwind:"$message"},{$match:{"message.status":1}},{$project:{_id:0,message:1}},{$sort:{"message.id":1}}]) 
```

由于您的消息键是一个数组，您必须首先使用 $unwind 运算符，然后使用 $match 运算符。

默认情况下，mongo 将显示文档的 _id。因此，如果您不想显示_id，在匹配相关的之后，您可以使用 $project 运算符

如果您不希望显示名称键，只需不要在查询的项目部分中指定名称键。默认情况下，mongo 只会显示值为 1 的键。如果没有提到该键，则不会显示它。

然后使用 $sort 运算符，1 表示升序，-1 表示降序。

# ember.js - 调用commit()后如何路由

> ID：15330862
> 
> 赞同：0
> 
> 时间：2013-03-11T03:44:24.877
> 
> 标签：ember.js, ember-data

在我调用 commit() 之后，我正在为做什么而苦苦挣扎。我想根据`commit()`成功或服务器是否返回错误来确定如何路由用户。

我在某处读到，如果服务器上出现错误，那么它可以返回 >400 的状态代码和如下错误：

```
{ 'errors' : [ { 'errorCode' : [ 'duplicate-user' ] } ] } 
```

在客户端，我有以下内容：

```
App.UsersController = Ember.ObjectController.extend({

    createUser : function () {
        'use strict';

        var user = App.User.createRecord({
                firstName : $("#firstName").val(),
                lastName : $("#lastName").val(),
                primaryEmailAddress : $("#primaryEmailAddress").val(),
                password : $("#password").val()
            }),

            commitObserver = Ember.Object.extend({
                removeObservers : function (sender) {
                    sender.removeObserver('isError', this, 'error');
                    sender.removeObserver('isValid', this, 'success');
                },
                error : function (sender, key, value) {
                    this.removeObservers(sender);
                    App.Router.router.transitionTo('duplicateuser');
                },
                success : function (sender, key, value) {
                    this.removeObservers(sender);
                    App.Router.router.transitionTo('usercreated');
                }
            });

        user.get('transaction').commit();

        user.addObserver('isError', commitObserver.create(), 'error');
        user.addObserver('isValid', commitObserver.create(), 'success');
    }
}); 
```

（注意：我没有在我的 HTML 中使用“Ember.TextField”，因此使用了 jQuery）

我有几个问题：

1.  这是处理提交（）的正确/最佳方法吗？

2.  我发现我必须删除两个观察者`isValid`之后调用`isError`- 这是可以预期的吗？

3.  我如何/可以访问服务器响应，因为我希望能够根据错误代码做出路由决定？

4.  我可以引用路由器的唯一方法是通过`App.Router.router`- 有没有更清洁的方法？

5.  如果出现错误，我是否需要做任何事情来从商店中删除记录，以便将来不会重新提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:00:44.413

在控制器中，您可以执行以下操作：

```
this.get('target').transitionTo('another.route') 
```

或者，您可以将事件发送到当前路由并从那里转换：

```
this.get('target').send('eventName'); 
```

或者如果您需要传递模型：

```
this.get('target').send('eventName', this.get('content')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:12:26.153

只需使用 controller.transitionToRoute("your.route"); 请参阅[此链接](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/ext/controller.js#L8)以获取源代码...

# eclipse - 部署eclipse插件后MessageBox不出现？

> ID：15330867
> 
> 赞同：0
> 
> 时间：2013-03-11T03:45:18.430
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我编写了一个 Eclipse 插件，并在 Eclipse“帮助”菜单中添加了帮助选项。单击该帮助时，将出现 MessageBox。

当我通过 Eclipse 应用程序运行或调试时会出现此 MessageBox，但是当我在其他 PC 上部署此插件并单击帮助时，MessageBox 不会出现。

这是我的代码：

```
public class MyHelp implements IWorkbenchWindowActionDelegate {

    public void run(IAction arg0) {

        try {

        String message = "This is demo data";

        // TODO Auto-generated method stub
        MessageBox box = new MessageBox(new Shell(), SWT.OK);
        box.setMessage(message);
        box.setText("Help title");
        box.open();

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

谁能帮我解决这个问题..？

为了获得帮助，我在我的插件中添加了一个 ActionSet：

```
<extension
         point="org.eclipse.ui.actionSets">
      <actionSet
            id="com.my.plugin.actionSet"
            label="My ActionSet"
            visible="true">
         <menu
               id="mymenu"
               label="My Menu" 
               path="help/helpStart">
            <groupMarker
                  name="start">
            </groupMarker>
            <separator
                  name="additions">
            </separator>
         </menu>
         <action
               class="com.myexample.MyHelp"
               id="MyHelp"
               label="Use Help"
               icon="icons/plugin_help.png"
               menubarPath="help/mymenu/start"
               style="push">
         </action>
        </actionSet>
   </extension> 
```

我还需要做什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:00:16.920

如果您正在运行 eclipse >= 3.3，那么您可以将其放到 plugins 文件夹中。另外，尝试使用`-clean option`.

我建议您使用 dropins 文件夹进行手动安装。请参阅文档：[http ://wiki.eclipse.org/Equinox_p2_Getting_Started#Dropins](http://wiki.eclipse.org/Equinox_p2_Getting_Started#Dropins)

**Upd1：** 为了运行您的代码，我必须添加一些未实现的方法（我使用的是 eclipse 3.6 版）：

```
import org.eclipse.jface.action.IAction;
import org.eclipse.jface.viewers.ISelection;
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.MessageBox;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.ui.IWorkbenchWindow;
import org.eclipse.ui.IWorkbenchWindowActionDelegate;

public class MyHelp implements IWorkbenchWindowActionDelegate {

    public void run(final IAction arg0) {

        final String message = "This is demo data";

      // TODO Auto-generated method stub
        final MessageBox box = new MessageBox(new Shell(), SWT.OK);
        box.setMessage(message);
        box.setText("Help title");
        box.open();

   }

    public void selectionChanged(final IAction action, final ISelection selection) {
        // TODO Auto-generated method stub

    }

    public void dispose() {
        // TODO Auto-generated method stub

    }

    public void init(final IWorkbenchWindow window) {
        // TODO Auto-generated method stub

    }
} 
```

另外，检查您的插件清单是否有以下行： `Bundle-SymbolicName: your_plugin_id;singleton:=true` 我刚刚将插件从工作区复制到我的 Eclipse 实例的 dropins 文件夹中，它开箱即用。

您确定该插件清单在 jar 文件中吗？检查 Bin 选项卡或 build.properties 以确保所有内容都正确导出。

希望这可以帮助

# c++ - 引用 unique_ptr 是不好的用法吗？

> ID：15330868
> 
> 赞同：0
> 
> 时间：2013-03-11T03:45:32.723
> 
> 标签：c++

将 unique_ptr 的引用传递给函数是不好的用法吗？

```
void Foo(std::unique_ptr<T>& rT)
{
   ...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T04:04:10.827

`void Foo(std::unique_ptr<T>& rT)`意味着两件事：

你不能这样调用函数：`Foo(std::unique_ptr<T>(new T));`因为它是一个非常量左值引用。这将您的功能限制为仅接受左值。

如果你传递一个左值，你不知道它会发生什么：`Foo(myunique_ptr);`. 在这样的电话中，您不知道是否`Foo`声称拥有`std::unique_ptr`. 如果调用者不知道内部发生了什么`Foo`并且从函数签名中肯定不清楚，这可能会很危险。

现在在考虑到上述情况后，您可以确定它是否使用不当。

# html - 表格标题的顶部和底部边框消失

> ID：15330878
> 
> 赞同：1
> 
> 时间：2013-03-11T03:47:03.017
> 
> 标签：html, css, html-table, internet-explorer-7

我需要你的帮助。

每当用户向下滚动表格时，表格标题的顶部和底部边框都会消失。一旦用户到达表格
的底部，表格标题的顶部和底部边框就会重新出现。你如何解决这个问题？我正在使用 IE7 并且需要代码以符合该特定浏览器。

```
<!DOCTYPE html>
<html>
<head>

<style type="text/css">

/*------------------------------------------------------------------
Table Style
------------------------------------------------------------------ */
table a:link {
    color: #666;
    font-weight: bold;
    text-decoration:none;
}
table a:visited {
    color: #999999;
    font-weight:bold;
    text-decoration:none;
}
table a:active,
table a:hover {
    color: #bd5a35;
    text-decoration:underline;
}
table {
    font-family:Arial, Helvetica, sans-serif;
    color:#666;
    font-size:12px;
    background:#eaebec;
    border-radius:3px;
    border-collapse:collapse; border-spacing: 0; 
    box-shadow: 0 1px 2px #d1d1d1;
}
table th {
    padding:10px 10px 10px 10px;
    border-top:1px solid #ccc;
    _border-bottom:1px solid #ccc;
    border-right: 1px solid #ccc;
    background: #ededed;
}   
table tr {
    text-align: center;
}   
table td {
    padding:10px;
    border-bottom:1px solid #ccc;
    border-left: 1px solid #ccc;
    border-right: 1px solid #ccc;
    background: #fafafa;
}   
table tr:hover td {
    background: #f2f2f2;
}
table th, table td {
    width: 160px; 
}
#container {
    width: 740px;
    height: 300px;
    overflow-x: scroll;
    overflow-y: scroll;
    border-left: 1px solid #ccc;
}
table tr td:first-child, table tr th:first-child {
    border-left: 0;
}
table thead {
    _position:fixed;
    position: relative;
}
table thead tr {
    position: relative;
    top: expression(this.offsetParent.scrollTop);
}
table tr:first-child td {
    border-top: 1px solid #ccc;
}
</style>

</head>

<body>

<div id="container">

<table id="data">

    <!-- Table Header -->
    <thead>
        <tr>
            <th>Task Details</th>
            <th>Firstname</th>
            <th>Progress</th>
            <th>Vital Task</th>
        </tr>
    </thead>
    <!-- Table Header -->

    <!-- Table Body -->
    <tbody>

        <tr>
            <td>Create pretty table design</td>
            <td>&nbsp;</td>
            <td>100%</td>
            <td>Yes</td>
        </tr><!-- Table Row -->

        <tr>
            <td>Take the dog for a walk</td>
            <td>&nbsp;</td>
            <td>100%</td>
            <td>Yes</td>
        </tr><!-- Darker Table Row -->

        <tr>
            <td>Waste half the day on Twitter</td>
            <td>&nbsp;</td>
            <td>20%</td>
            <td>No</td>
        </tr>

        <tr>
            <td>Feel inferior after viewing Dribble</td>
            <td>&nbsp;</td>
            <td>80%</td>
            <td>No</td>
        </tr>

        <tr>
            <td>Wince at &quot;to do&quot; list</td>
            <td>&nbsp;</td>
            <td>100%</td>
            <td>Yes</td>
        </tr>

        <tr>
            <td>Vow to complete personal project</td>
            <td>&nbsp;</td>
            <td>23%</td>
            <td>yes</td>
        </tr>

        <tr>
            <td>Procrastinate</td>
            <td>&nbsp;</td>
            <td>80%</td>
            <td>No</td>
        </tr>

        <tr>
            <td><a href="#yep-iit-doesnt-exist">Hyperlink Example</a></td>
            <td>&nbsp;</td>
            <td>80%</td>
            <td><a href="#inexistent-id">Another</a></td>
        </tr>

    </tbody>
    <!-- Table Body -->

</table>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:45:38.507

第二天用新的眼光玩了一些 css 之后，以下适用于 IE7：

```
<style type="text/css">

/*------------------------------------------------------------------
Table Style
------------------------------------------------------------------ */
table a:link {
    color: #666;
    font-weight: bold;
    text-decoration:none;
}
table a:visited {
    color: #999999;
    font-weight:bold;
    text-decoration:none;
}
table a:active,
table a:hover {
    color: #bd5a35;
    text-decoration:underline;
}
table {
    font-family:Arial, Helvetica, sans-serif;
    color:#666;
    font-size:12px;
    background:#eaebec;
    border-radius:3px;
    border-collapse:collapse; border-spacing: 0; 
    box-shadow: 0 1px 2px #d1d1d1;
    border-left: 1px solid #ccc;
    border-right: 1px solid #ccc;
}
table th {
    padding:10px 10px 10px 10px;
    border-bottom:1px solid #ccc;
    border-left: 1px solid #ccc;
    background: #ededed;
}   
table tr {
    text-align: center;
}   
table td {
    padding:10px;
    border-bottom:1px solid #ccc;
    border-left: 1px solid #ccc;

    background: #fafafa;
}   
table tr:hover td {
    background: #f2f2f2;
}
table th, table td {
    width: 160px; 
}
#container {
    width: 800px;
    height: 300px;
    overflow-x: scroll;
    overflow-y: scroll;
}
table tr td:first-child, table tr th:first-child {
    border-left: 0;
}

table thead {
    position:fixed;

}

TABLE THEAD TR TH {
    top:expression(this.offsetParent.scrollTop);
    border-top:1px solid #ccc;
    position:relative;
}

table tr:first-child td {
    border-top: 0;
}
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:32:00.280

海我刚刚在下面修改了你的 CSS 代码，请试试这个。

```
table thead {
    position:fixed;

}
table thead tr {
    position: relative;

} 
```

# javascript - Jquery 电子邮件验证似乎被忽略了

> ID：15330882
> 
> 赞同：0
> 
> 时间：2013-03-11T03:47:35.107
> 
> 标签：javascript, jquery, html

我想做的是：

让用户输入电子邮件。如果无效；显示错误。如果它是有效的电子邮件，让`.wizard`div 向上滑动并显示一条消息“酷”！

截至目前，我的代码（[这里的小提琴](http://jsfiddle.net/HvjtB/30/)）没有削减它。它似乎没有将`.error`类添加到输入中，也没有`.wizard`显示 div 。我究竟做错了什么？另一双眼睛将不胜感激。

```
 $(".wizard").hide();
 $("#signup").show();

$(".continue").click(function () {
    var valid = true;
    $("#" + $(this).attr("validationDiv")).find("input").each(function () {
        if (!/^S+@S+.S+$/.test($this).val()) valid = false; // if its not a valid email
            ($this).addClass('error'); // show error
            ($this).val('Please Insert a valid Email');          
    });
    if (valid) { // if it is valid
         $(".wizard").slideUp(); // have this div show
         $("#" + $(this).attr("data-next-id")).slideDown();
     }
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:59:19.977

首先，你真的应该在学习 jQuery 和 javascript 之前......

`$this`应该是`$(this)`。而你 mixup `classed/id`，加上你没有使用正确的元素名称。难怪它不起作用。这是一个更正的示例：http: [//jsfiddle.net/HvjtB/28/](http://jsfiddle.net/HvjtB/28/)

现在您只需要创建一个正确的电子邮件检测正则表达式：[http ://www.regexper.com/](http://www.regexper.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T04:01:21.040

看起来有很多粗心的错误

```
$(".wizard").hide();
$("#signup").show();

$(".continue").click(function() {
    var valid = true;
    var that = this;
    $("#" + $(this).attr("validationDiv")).find("input").each(function() {
        var $this = $(this);
                if (!/^S+@S+.S+$/.test($(this).val()))
                    valid = false;
                ($this).addClass('error');
                ($this).val('Please Insert a valid Email');
            });
    if (valid) {
        $(".wizard").slideUp();
        $("#" + $(that).attr("data-next-id")).slideDown();
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/HvjtB/31/)

我发现的问题1.属性
中没有id`signup`的元素，所以添加到顶部 div( ) 2\. 内部回调中你使用了很多次，但从未定义过，解决方法`validationDiv``id="signup"``class="sighUp"`
`$this``var $this = $(this);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T03:56:53.240

当您确实应该向下滑动向导时，您正在向上滑动它。

# apache-flex - Flex：如何重用项目渲染器？

> ID：15330883
> 
> 赞同：0
> 
> 时间：2013-03-11T03:47:35.310
> 
> 标签：apache-flex, datagrid, flex4, itemrenderer

我有一个数据网格表，dataGrid 表中的gridColumn 调用了“DropDownListItemRenderer”。使用相同的项目渲染器，我想根据 dataField 名称更改下拉列表中的内容。因此，例如，如果数据字段名称是颜色，那么下拉菜单将包含红色、蓝色、绿色等。如果 dataField 名称为 furits，则下拉列表将包含不同的水果选项。

如果您查看我的项目渲染器中的代码。我试图通过创建一个名为 dropDownListData 的可绑定数组集合来完成上述操作。在**覆盖集数据函数**中，我得到了数据字段名称，使用数据字段名称我相应地在数组集合中添加项目。

尽管在您运行程序时下拉列表中填充了正确的数据。每次选择下拉列表时，下拉列表中的数据都会重复并增加。

我想我没有使用正确的方法来做到这一点。那么有人可以告诉我如何做到这一点吗？请问有人可以帮我吗？如果我的问题不清楚，请告诉我，我会尝试改写它。

谢谢 ：）

这是我的 MXML 文件：

```
 <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">    
<fx:Script>
    <![CDATA[                
        import FrontEndObjects.ColourItems;         
        import mx.collections.ArrayCollection;          
        import spark.events.IndexChangeEvent;

        [Bindable]
        private var order:ArrayCollection = new ArrayCollection();  

        private function addOrder():void{               
            var orderItems:ColourItems = new ColourItems();
            order.addItem(orderItems);              
        }   

    ]]>
</fx:Script>    
<s:BorderContainer x="175" y="101" width="606" height="289">
    <s:DataGrid id="myDG" x="53" y="27" width="516" height="201" dataProvider="{order}"
                editable="true" variableRowHeight="true">
        <s:columns>
            <s:ArrayList>
                <s:GridColumn dataField="label1" headerText="Order #" editable="true"/>             
                <s:GridColumn dataField="quant" headerText="Qty" editable="true"/>              
                <s:GridColumn dataField="color" headerText="Color" editable="true" rendererIsEditable="true" itemRenderer="myRenderers.DropDownListItemRenderer"/>  
                <s:GridColumn dataField="furits" headerText="Furits" editable="true" rendererIsEditable="true" itemRenderer="myRenderers.DropDownListItemRenderer"/>                                    
            </s:ArrayList> 
        </s:columns >
    </s:DataGrid>   
    <s:Button x="499" y="236" label="add" click="addOrder()" /> 
</s:BorderContainer> 
```

这是我的 DropDownList 项目渲染器：

```
 <s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx" clipAndEnableScrolling="true">    
<fx:Script>
    <![CDATA[           
        import mx.collections.ArrayCollection;
        import mx.controls.Alert;           
        import spark.components.gridClasses.GridColumn;
        import spark.events.IndexChangeEvent;
        public  var cName:String;

        [Bindable]
        private var dropDownListData:ArrayCollection = new ArrayCollection();           

        protected function onCbChange(event:IndexChangeEvent):void
        {
            var value:String = (event.currentTarget as DropDownList).selectedItem;
            data[column.dataField] = value; 
        }

        override public function set data(value:Object):void
        {

            super.data = value;
            cName = column.dataField;
            if(cName == "color"){
                dropDownListData.addItem("red");
                dropDownListData.addItem("blue");
                dropDownListData.addItem("green");
            }
            else if(cName == "furits"){
                dropDownListData.addItem("banana");
                dropDownListData.addItem("apple");
                dropDownListData.addItem("grapes");
            }
        }     
    ]]>
</fx:Script>    
<s:DropDownList id="cb" width="100%" change="onCbChange(event)" requireSelection="true"  dataProvider="{dropDownListData}"/> 
```

这是我的对象类：

```
public class ColourItems
{
    public var label1:String;
public var quant:String;
public var color:String;    
public var furits:String;       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:52:26.987

您将目标列设置为可编辑：editable="true" rendererIsEditable="true"。当您单击单元格时，网格会在 itemrenderer 中调用 set data(value:Object) 方法，您会在下拉列表中越来越多地添加项目。您可以轻松地将其修复为已禁用的单元格可编辑：

```
<s:GridColumn dataField="color" headerText="Color" editable="false" itemRenderer="myRenderers.DropDownListItemRenderer"/>  
<s:GridColumn dataField="furits" headerText="Furits" editable="false" itemRenderer="myRenderers.DropDownListItemRenderer"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:28:27.543

在 itemRenderer 的 setData 方法中，您应该在执行 addItem 之前检查列表中已经存在哪些数据

# html-lists - UL LI 当前指数

> ID：15330886
> 
> 赞同：0
> 
> 时间：2013-03-11T03:47:51.360
> 
> 标签：html-lists

如果我像下面这样编码......

我如何获得当前的 LI 指数？

JSP

```
 <c:forEach var="list" items="${list}">
      <ul id="bbs">
         <li><a>item1</a></li>
         <li class="tmpClick"><a>item2</a></li>
         <li><a>item3</a></li>
      </ul>
    </foreach>

<script type="text/javascript">
<!--
 jq('.tmpClick').click(function() {
    console.log( "log " +jq(this).index() ) ;
 });
//-->
</script> 
```

例如）- HTML 标签

```
<ul id="bbs">
  <li><a>item1</a></li>
  <li class="tmpClick"><a>item2</a></li>
  <li><a>item3</a></li>
</ul>
<ul id="bbs">
  <li><a>item1</a></li>
  <li class="tmpClick"><a>item2</a></li>
  <li><a>item3</a></li>
</ul>
<ul id="bbs">
  <li><a>item1</a></li>
  <li class="tmpClick"><a>item2</a></li>
  <li><a>item3</a></li>
</ul>
<ul id="bbs">
  <li><a>item1</a></li>
  <li class="tmpClick"><a>item2</a></li>
  <li><a>item3</a></li>
</ul>
.
.
.
. 
```

*   结果

IDX | 标题 | 推荐

1 件1 1

2 项目2 2

3 项 3 3

4 项目4 4

.

.

.

火狐日志

日志 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:53:50.560

您想使用状态变量。

```
<c:forEach var="foo" items="${list}" varStatus="status">  
  <option value="${status.count}"></option>  
</c:forEach> 
```

澄清：

*   `${status.index}`从 0 开始计数
*   `${status.count}`从 1 开始计数

# c++ - 确定进程是否已暂停

> ID：15330889
> 
> 赞同：3
> 
> 时间：2013-03-11T03:48:21.330
> 
> 标签：c++, c, process, operating-system, signals

我尝试向特定进程发送 SIGTSTP 信号，但如何确定该进程是否已在 Linux 中使用 C 库函数或系统调用实际挂起？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T03:55:00.967

从 读取`/proc/[pid]/stat`。

从[手册页](http://linux.die.net/man/5/proc)，您可以从此文件中获取进程的状态：

> 状态 %c
> 
> 字符串“RSDZTW”中的一个字符，其中 R 正在运行，S 在可中断等待中休眠，D 在不可中断磁盘休眠中等待，Z 是僵尸，T 被跟踪或停止（在信号上），W 是分页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-05T23:50:47.553

我知道这是一篇旧帖子，但对于像我一样好奇的人！

简单的答案是，只有一种静态的、一致的方式来检查状态，即 from `/proc/[pid]/stat`，但是如果你想尽可能少地依赖架构并且不想这样做，你可以检查信号。

信号只能看到一次，因此您必须自己跟踪它，但`waitpid`可以点击一个进程以查看自上次检查以来是否收到任何信号：

```
 BOOL is_suspended;
    int status;
    pid_t result = waitpid(pid, &status, WNOHANG | WUNTRACED | WCONTINUED);

    if(result > 0) { // Signal has been received
        if (WIFSTOPPED(status)) {
            is_suspended = true;
        } else if (WIFCONTINUED(status)) {
            is_suspended = false;
        }
    } 
```

# android-layout - 安卓组件

> ID：15330890
> 
> 赞同：1
> 
> 时间：2013-03-11T03:48:22.483
> 
> 标签：android-layout

有谁知道它是什么组件或正在使用什么组件？：

这是链接，它是 App Screenshots 部分中的第二张图片：

[图片](http://tinyurl.com/bfmdy9w)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:52:10.707

`ListView`在该屏幕中使用，with`custom Array Adaptor`和`Button`控件也用于在日期之间导航。
[http://developer.android.com/guide/topics/ui/controls.html](http://developer.android.com/guide/topics/ui/controls.html)

如果您想了解 android 中使用的不同布局，请尝试此[链接。](http://mobile.tutsplus.com/tutorials/android/android-layout/)

# javascript - 使用 javascript 更改元素的类

> ID：15330894
> 
> 赞同：1
> 
> 时间：2013-03-11T03:48:47.937
> 
> 标签：javascript, onchange, html-select

我很难根据`select`标签中的选定项目更改元素类别。这是我的代码：

```
<table> 
    <tr>
        <select onchange="wow(this.value)">
            <option value="a">a</option>
            <option value="b">b</option>            
        </select>
    </tr>               
    <tr id="x" class="show">
        x
    </tr>
</table>

<script>
function wow(value){
    switch(value){
        case "a": document.getElementById("x").className = "show"; break;       
        case "b": document.getElementById("x").className = "hide"; break;
    }
}
</script>

<style>
.show{
    display:inline-block;
}

.hide{
    display:none;
}
</style> 
```

我在这里没有看到任何问题。我也试过`setAttribute("class", "show")`，但没有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T03:53:14.007

你必须包装`X`一个[`<td>`](https://developer.mozilla.org/en-US/docs/HTML/Element/td)：

[http://jsfiddle.net/DerekL/CVxP7/](http://jsfiddle.net/DerekL/CVxP7/)

```
<tr>...<td id="x" class="show">x</td></tr> 
```

另外你必须`case`在前面添加`"a":`

```
case "a":
    document.getElementById("x").setAttribute("class", "show");
    break; 
```

* * *

PS：有一种更有效的方法可以实现您在这里尝试做的事情：

[http://jsfiddle.net/DerekL/CVxP7/2/](http://jsfiddle.net/DerekL/CVxP7/2/)

```
function wow(value) {
    var index = {
        a: "show",
        b: "hide"
    };
    document.getElementById("x").setAttribute("class", index[value]);
} 
```

现在您无需键入`document.getElementById("x").setAttribute("class"...`两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:00:36.880

试试这个

```
switch(value){
    case "a": document.getElementById("x").setAttribute("class", show); break;        
    case "b": document.getElementById("x").setAttribute("class", hide); break;
} 
```

# string - 如何为文本文件中的每一行执行 str.strip()？Unix

> ID：15330896
> 
> 赞同：0
> 
> 时间：2013-03-11T03:49:05.853
> 
> 标签：string, unix, sed, grep, strip

我可以在 python 中执行以下操作来清理和去除不需要的空格，但是**可以通过终端通过其他方式完成`sed`吗`grep`？**

```
outfile = open('textstripped.txt','w+','utf8')
for i in open('textfile.txt','r','utf8'):
  print>>outfile, i.strip() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:08:12.360

`perl`在命令行上使用：

`perl -lpe 's/^\s+//; s/\s+$//' file.txt > stripped.txt`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T04:20:19.467

此解决方案基于 sed 手册页：

```
sed 'y/\t/ /;s/^ *//;s/ *$//' input > output 
```

[http://www.gnu.org/software/sed/manual/sed.html#Centering-lines](http://www.gnu.org/software/sed/manual/sed.html#Centering-lines)

描述：

> `y\t/ /`用空格替换制表符
> 
> `s/^ *//`删除前导空格
> 
> `s/ *$//`删除尾随空格

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T03:58:13.533

```
$ cat input.txt | sed 's/^[ \t]*//;s/[ \t]*$//' > output.txt 
```

这摆脱了前导和尾随空格..

编辑：`sed -e "s/^[ \t]+//; s/[ \t]+$//" -i .bk input.txt`

这会进行文件编辑，并将备份保存到 input.txt.bk （并按照一些建议保存一个过程）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T04:02:39.783

`sed -E "s/(^[ \t]+|[ \t]+$)//" < input > output`

或者，如果您有符合 GNU 标准的 SED 版本：

`sed -E "s/^\s+|\s+$//g" < in > out`

如果您有 Mac，我建议您获取`homebrew`并安装`gnu-sed`. 那么，`alias sed=gsed`。

# c# - EF 减少嵌套类型的外部连接

> ID：15330897
> 
> 赞同：3
> 
> 时间：2013-03-11T03:49:07.467
> 
> 标签：c#, entity-framework

我的一个项目的配置遇到问题，并且生成的 SQL EF 似乎显示出一些意想不到的（至少对我而言）嵌套。这个问题会有点啰嗦，但请多多包涵。

所以，假设我有以下设置：

```
public class Order
{
    public int Id { get; set; }
    public decimal Amount { get; set; }
    public Address ShippingAddress { get; set; }
}

public class Person
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public Address Address { get; set; }
}

public class Address
{
    public int Id { get; set; }
    public string StreetAddress { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public string ZipCode { get; set; }
} 
```

实体配置如下：

```
public class OrderConfiguration : EntityTypeConfiguration<Order>
{
    public OrderConfiguration()
    {
        ToTable("Orders");

        HasRequired(order => order.ShippingAddress)
            .WithRequiredDependent()
            .Map(mapping => mapping.MapKey("ShippingAddressId"));
    }
}

public class PersonConfiguration : EntityTypeConfiguration<Person>
{
    public PersonConfiguration()
    {
        ToTable("Persons");

        HasRequired(person => person.Address)
            .WithRequiredDependent()
            .Map(mapping => mapping.MapKey("AddressId"));
    }
} 
```

我的目标是获取包含地址的订单，因此我运行了一个简单的查询，例如：

```
var orders = context.Orders
    .Include(order => order.ShippingAddress)
    .Where(order => order.ShippingAddress.State == "FL")
    .ToList(); 
```

当我监视 SQL Profiler 时，我希望看到生成的 SQL 从 Orders 表中选择并在 Address 表上进行内部连接

```
 SELECT * FROM [dbo].[Orders] AS [Extent1] 
     INNER JOIN [dbo].[Addresses] AS [Extent2] ON [Extent1].[AddressId] = [Extentd2].[Id]
     WHERE [Extent2].[State] == 'FL' 
```

相反，我发现这是生成的：

```
SELECT 
[Extent1].[Id] AS [Id], 
[Extent1].[Amount] AS [Amount], 
[Join5].[Id1] AS [Id1], 
[Join5].[StreetAddress] AS [StreetAddress], 
[Join5].[City] AS [City], 
[Join5].[State] AS [State], 
[Join5].[ZipCode] AS [ZipCode], 
[Join8].[Id2] AS [Id2], 
[Join11].[Id3] AS [Id3]
FROM     [dbo].[Orders] AS [Extent1]
INNER JOIN  (SELECT [Extent2].[State] AS [State], [Extent3].[Id] AS [Id4]
    FROM   [dbo].[Addresses] AS [Extent2]
    LEFT OUTER JOIN [dbo].[Orders] AS [Extent3] ON [Extent2].[Id] = [Extent3].[ShippingAddressId]
    LEFT OUTER JOIN [dbo].[Persons] AS [Extent4] ON [Extent2].[Id] = [Extent4].[AddressId] ) AS [Join2] ON [Extent1].[Id] = [Join2].[Id4]
LEFT OUTER JOIN  (SELECT [Extent5].[Id] AS [Id1], [Extent5].[StreetAddress] AS [StreetAddress], [Extent5].[City] AS [City], [Extent5].[State] AS [State], [Extent5].[ZipCode] AS [ZipCode], [Extent6].[Id] AS [Id5]
    FROM   [dbo].[Addresses] AS [Extent5]
    LEFT OUTER JOIN [dbo].[Orders] AS [Extent6] ON [Extent5].[Id] = [Extent6].[ShippingAddressId]
    LEFT OUTER JOIN [dbo].[Persons] AS [Extent7] ON [Extent5].[Id] = [Extent7].[AddressId] ) AS [Join5] ON [Extent1].[Id] = [Join5].[Id5]
LEFT OUTER JOIN  (SELECT [Extent9].[Id] AS [Id2]
    FROM   [dbo].[Addresses] AS [Extent8]
    LEFT OUTER JOIN [dbo].[Orders] AS [Extent9] ON [Extent8].[Id] = [Extent9].[ShippingAddressId]
    LEFT OUTER JOIN [dbo].[Persons] AS [Extent10] ON [Extent8].[Id] = [Extent10].[AddressId] ) AS [Join8] ON [Extent1].[Id] = [Join8].[Id2]
LEFT OUTER JOIN  (SELECT [Extent12].[Id] AS [Id6], [Extent13].[Id] AS [Id3]
    FROM   [dbo].[Addresses] AS [Extent11]
    LEFT OUTER JOIN [dbo].[Orders] AS [Extent12] ON [Extent11].[Id] = [Extent12].[ShippingAddressId]
    LEFT OUTER JOIN [dbo].[Persons] AS [Extent13] ON [Extent11].[Id] = [Extent13].[AddressId] ) AS [Join11] ON [Extent1].[Id] = [Join11].[Id6]
WHERE N'FL' = [Join2].[State] 
```

显然，这比需要做的工作多得多。有没有更简单的方法可以做到这一点，还是我的实体配置不正确？我不明白为什么它要撤回所有这些额外的连接，或者我如何才能将它们限制在我当时需要的表中。任何见解将不胜感激！

谢谢，德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:30:11.477

正如您所注意到的`.Include()`，有时会生成可怕的 SQL！

我发现在这种情况下最简单的解决方案是在初始加载后直接显式加载所需的相关实体。这样做的缺点是额外的数据库调用 - 每个订单都会调用一次。

```
var orders = (
    from order in context.Orders
    where order.ShippingAddress.State == "FL"
    select order)
    .ToList();

var t1 = (
    from order in orders
    from address in order.ShippingAddress
    select address)
    .ToList(); 
```

# list - 列出树中叶子的路径

> ID：15330899
> 
> 赞同：5
> 
> 时间：2013-03-11T03:49:27.827
> 
> 标签：list, haskell, tree

我正在尝试编写一个函数来查找树中叶子的所有路径。例如，给定一棵如下所示的树：

```
 1
         /  \
        2    5
       / \    \
      3   4    6 
```

输出列表将是：`[[1,2,3],[1,2,4],[1,5,6]]`。

此函数的类型签名是：`branches :: Tree a -> [[a]]`. 请注意，这使用了[Data.Tree](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Tree.html)包中定义的 Tree 类型，尽管示例树是二叉树，但实际的树类型是玫瑰树。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T14:30:29.370

只是一个简单的功能：

```
listtree :: [a] -> Tree a -> [[a]]
listtree l (Node a []) = [l++[a]]
listtree l (Node a forest) = concatMap (listtree (l++[a])) forest 
```

使用列表记录从根到当前节点的路径，并将当前节点的标签附加到路径，然后递归映射`listtree`到每个子节点。

```
listtree [] (Node 1 [(Node 2 [(Node 3 []), (Node 4 [])]), (Node 5 [(Node 6 [])])])) 
```

产生预期的结果`[[1,2,3],[1,2,4],[1,5,6]]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:27:55.163

我将通过在部分路径列表的前面添加新标签来构建路径，然后将它们反转以进行输出：

```
listtree tree = map reverse $ traverse [] tree
  where traverse path (Node label []) = [label:path]
        traverse path (Node label xs) = concat $ map (traverse (label:path)) xs 
```

将标签添加到列表前面而不是末尾的原因是追加需要 O(N) 时间并分配内存，而添加头需要 O(1)。当然，反转列表也是 O(N)，但是每个列表只进行一次反转......

因此，在使用函数式算法和数据结构时，上述“添加到头部，然后在必要时反转”模式是一种普遍的习惯用法。

* * *

编辑：根据@luqui 的评论，获取路径的一种补充方法是从下往上构建它们：

```
listtree (Node label []) = [[label]]
listtree (Node label xs) = map (label:) $ concat $ map listtree xs 
```

这比我的解决方案更短（并且可能更清晰），它还有一个额外的优势，就是按照你想要的顺序为你提供路径：路径是从叶子开始构建的，而不是从根开始。

注意（与前面的解决方案一样）路径列表是通过在列表的开头添加一个头来扩展的，而不是附加到末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T04:31:52.603

很简单...这些是您需要牢记的事情：-

1.  递归调用函数
2.  在函数内，遍历应采用 PreOrder 的形式（根、左、右）
3.  在递归函数中使用数组并存储访问的每个节点的值。
4.  如果访问的节点是叶子...节点--> 左== NULL 和节点--> 右== NULL。然后输出数组的内容。

# azure - 我可以让一个 azure 网站成为与我的 azure 云服务在同一个域中的虚拟网站吗

> ID：15330902
> 
> 赞同：0
> 
> 时间：2013-03-11T03:49:46.657
> 
> 标签：azure

希望我解释得足够清楚。我正在将 Web 应用程序迁移到 azure。到目前为止，我已经将它设置为一个 aspx Web 应用程序和一个 sql server 数据库。该站点托管在云服务（我使用 Visual Studio 部署）中（不知道这是否是正确的术语）。到目前为止一切都很好。我现在要做的是添加一个 WP 博客。我已经创建了一个测试，它作为一个天蓝色的网站真的很容易。

我想要做的是：如果我的自定义域是 www.site.com 并且指向云服务 Web 角色，我可以在 myblog.azurewebsites.net 创建一个 WP 博客作为单独的 azure 网站并以某种方式指向一个虚拟那样 www.site.com/blog 将指向博客网站？我知道如何将域添加到网站，只是不知道如何做虚拟部分......

感谢您的任何建议！-杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:34:08.313

据我所知，不，除非您可以修改 BLOG 的代码以继续重写 URL 以使其看起来像 www.site.com/blog

更简单的替代方案：实现 blog.site.com 而不是 www.site.com/blog 并将其映射到 Azure 站点上的博客。您还可以设置重定向以从 www.site/com/blog 转到 blog.site.com

# asp.net-mvc - 在一个事务中调用 SaveChanges 两次

> ID：15330903
> 
> 赞同：0
> 
> 时间：2013-03-11T03:49:55.260
> 
> 标签：asp.net-mvc, entity-framework

所有，我是新来的。我的问题是如何在一个事务中调用 savechanges 两次。下面是我的代码：

```
var order = new Order();

// modify order's properties

db.orders.add(order);
db.SaveChanges();

db.Entry(order).reload();

// do some other work about the order entity
db.Entry(order).state = EntityState.Modified;
db.SaveChanges(); 
```

但是第二次 SaveChanges 失败了。错误消息是“影响了意外的行数 (0)。加载后可能会修改或删除实体。刷新 ObjectStateManager”。

我的问题是如何使第二个 SaveChanges() 起作用。因为订单实体中的属性代码是基于数据库中自定义函数的自增自定义字符串字段。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:23:16.230

不需要调用 .Reload() ，正如@maxlego 提到的，如果您没有将 AutoDetectChangesEnabled 的默认值更改为 true，则不需要将 .State 设置为 modified。

您应该能够遵循此模式并获得所需的结果。您可以在有或没有 TransactionScope 的情况下执行以下操作。使用 TransactionScope 的好处是，如果您对 SaveChanges() 的第二次调用因异常而失败，则第一次调用所做的更改将被回滚。另一方面，如果您希望第一次调用 SaveChanges() 成功，即使第二次调用失败，您应该删除 TransactionScope 代码。

```
using (var db = new MyContext())
using (var scope = new TransactionScope())
{
    var order = new Order();

    // modify order's properties

    db.orders.add(order);
    db.SaveChanges();

    // make additional changes...
    // E.g. assuming order.ID is an auto-incrementing primary key
    // that is determined by the database I can now use the
    // value the database set to log this change...

    // save changes
    db.SaveChanges();

    // commit the transaction
    scope.Complete();
} 
```

# html - 隐形元素导致空白

> ID：15330910
> 
> 赞同：0
> 
> 时间：2013-03-11T03:50:20.980
> 
> 标签：html, css

我有一个隐藏的元素，使用

`visibility:hidden;`

但它仍然占用页面上的空间，如果它是可见的。这会导致一些其他元素被向下推到页面下方，看起来很奇怪。它被隐藏的原因是它只会在移动设备上显示。有什么办法可以去掉这个空白？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T03:52:02.480

`visibility: hidden`一个仍然占据页面空间的元素。`display: none`如果要从布局流中删除元素，请使用。**尽管您仍然可以在 DOM 中与它进行交互，但**将`display:none`允许其他元素占用为其分配的空间。

另请注意，**既不响应`visibility: hidden`也不`display: none`响应事件**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T03:52:03.067

没有看到你的代码......很难做到......但默认是`display:none`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T03:53:38.160

```
visibility:hidden; 
```

只是使元素隐藏但不会从布局中删除它

采用

```
display:none; 
```

从布局中删除它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T10:05:37.653

这是因为**`visibility: hidden;`**只隐藏了元素，相当于让它100%透明。

**`display: none;`**但是，会像 一样隐藏您的元素`visibility: hidden;`，但会更进一步并有效地将其从您的页面中删除（它*实际上*并没有删除它，它只是产生这种效果）。

# web-config - 如何配置与 Log4Net 集成的 Quartz.Net 2.1.2.0 版

> ID：15330913
> 
> 赞同：2
> 
> 时间：2013-03-11T03:51:04.587
> 
> 标签：web-config, log4net, quartz.net, log4net-configuration, common.logging

我已经下载了最新版本的 Quartz.Net 并尝试使用以下配置（基于[此示例](https://stackoverflow.com/questions/9481942/log4net-log-file-not-been-written-using-quartz-net-common-logging)）使用 common.logging 和 log4net dll 对其进行配置

```
<configSections>
    <section name="quartz" type="System.Configuration.NameValueSectionHandler, System, Version=2.1.2.400,Culture=neutral, PublicKeyToken=f6b8c98a402cc8a4" />
    <section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging, Version=2.1.2.0, Culture=neutral, PublicKeyToken=af08829b84f0328e" />
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
</configSections>

<logging>
    <factoryAdapter type="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter, Common.Logging.Log4Net">
        <arg key="configType" value="INLINE" />
    </factoryAdapter>
</logging>
<log4net>
    <appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender">
        <param name="File" value="MyQuartzLog.txt" />
        <param name="AppendToFile" value="true" />
        <rollingStyle value="Size" />
        <maxSizeRollBackups value="10" />
        <maximumFileSize value="10MB" />
        <staticLogFileName value="true" />
        <layout type="log4net.Layout.PatternLayout">
            <param name="ConversionPattern" value="%-5p%d{yyyy-MM-dd hh:mm:ss} – %m%n" />
        </layout>
    </appender>
    <root>
        <level value="DEBUG" />
        <appender-ref ref="LogFileAppender" />
    </root>
</log4net>
<quartz>
    <add key="quartz.scheduler.instanceName" value="QuartzTestLog4Net" />

    <add key="quartz.threadPool.type" value="Quartz.Simpl.SimpleThreadPool, Quartz" />
    <add key="quartz.threadPool.threadCount" value="10" />
    <add key="quartz.threadPool.threadPriority" value="2" />

    <add key="quartz.jobStore.misfireThreshold" value="60000" />
    <add key="quartz.jobStore.type" value="Quartz.Simpl.RAMJobStore, Quartz" />
</quartz> 
```

这没用。

`<section name="quartz" type="System.Configuration.NameValueSectionHandler, System, Version=2.1.2.400,Culture=neutral, PublicKeyToken=f6b8c98a402cc8a4" />`

导致组件加载错误。我使用 sn.exe 来检查 publickeytoken。密钥是正确的。

移除石英部分可以使应用程序运行。但是日志对象有 NoOpLogger 信息 - {Common.Logging.Simple.NoOpLogger}。

我的项目是指Common.Logging 2.1.2.0版本；Common.Logging.Log4Net 2.0.0.0 版；和 log4net 版本 1.2.10.0。它们是正确的版本吗？如果没有，什么是正确的。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:07:13.710

您应该检查 Quartz.NET 发行版附带的示例服务器。

[https://github.com/quartznet/quartznet/tree/master/server/Quartz.Server](https://github.com/quartznet/quartznet/tree/master/server/Quartz.Server)

**应用程序配置：**

它是 type="System.Configuration.NameValueSectionHandler, System, Version=1.0.5000.0,Culture=neutral, PublicKeyToken=b77a5c561934e089"

*   NameValueSectionHandler 是 BCL 类型，而不是 Quartz.NET 的
*   您可能可以省略版本和公钥

**包.config**

你可能有错误的包裹。示例中的 packages.config 包含使用 Log4Net 1.2.11 时的工作组合

# java - JApplet 动画未运行

> ID：15330914
> 
> 赞同：0
> 
> 时间：2013-03-11T03:51:06.710
> 
> 标签：java, japplet

所以我试图进入简单的动画和虚拟物理等等。我正在尝试为一个球设置动画，以便它随着时间的推移慢慢增长。我这里的代码与我的 Java For Dummies 书中的代码几乎完全相同，除了以下几点：摆脱小程序大小的常量 (this.setSize(500, 500) vs this.setSize(WIDTH, HEIGHT) 并在前面声明 WIDTH 和 HEIGHT)。更改很简单，不会影响程序。（我会知道，因为我在学校上过 Java 课程）。无论如何，我从 Applets 开始，我无法让程序运行两次迭代。在绘制函数中，我有一个 System.out.println(d) 来检查椭圆的直径增长了多少倍。但是我看到的唯一输出是“21”然后是“22”。小程序继续通过小程序查看器运行，但是即使它应该继续增长，也不会打印任何其他内容。有谁知道怎么了？作为旁注，我应该提到我正在使用 NetBeans 7.2 并选择“运行文件”来运行它。

```
package GraphicsTesting;

import javax.swing.*;
import java.awt.*;
import java.awt.geom.*;
import java.awt.event.*;
import java.applet.*;
import java.util.concurrent.*;

public class Main extends JApplet
{
    private PaintSurface canvas;

    @Override
    public void init()
    {
        this.setSize(500,500);
        canvas = new PaintSurface();
        this.add(canvas, BorderLayout.CENTER);
        ScheduledThreadPoolExecutor executor = new ScheduledThreadPoolExecutor(3);
        executor.scheduleAtFixedRate(new AnimationThread(this), 0L, 20L, TimeUnit.MILLISECONDS);
    }
}

class AnimationThread implements Runnable
{
    JApplet c;

    public AnimationThread(JApplet C)
    {
        this.c = c;
    }

    public void run()
    {
        c.repaint();
    }
}

class PaintSurface extends JComponent
{
    int d = 20;
    @Override
    public void paint(Graphics g)
    {
        Graphics2D g2 = (Graphics2D)g;
        g2.setRenderingHint
                (RenderingHints.KEY_ANTIALIASING, 
                RenderingHints.VALUE_ANTIALIAS_ON);
        d+=1;
        System.out.println(d);//This is to test
        Shape ball = new Ellipse2D.Float(200, 200, d, d);
        g2.setColor(Color.RED);
        g2.fill(ball);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:15:07.933

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package javaapplication3;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.Shape;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.geom.Ellipse2D;
import javax.swing.Timer;
import javax.swing.JApplet;
import javax.swing.JComponent;

public class Main extends JApplet {

  private PaintSurface canvas;
  private Timer timer;

  @Override
  public void init() {
    this.setSize(500, 500);
    canvas = new PaintSurface();
    this.add(canvas, BorderLayout.CENTER);
//    ScheduledThreadPoolExecutor executor = new ScheduledThreadPoolExecutor(3);
//    executor.scheduleAtFixedRate(new AnimationThread(this), 0L, 20L, TimeUnit.MILLISECONDS);
    timer = new Timer(20, new ActionListener() {
      @Override
      public void actionPerformed(ActionEvent e) {
        canvas.repaint();
      }
    });
    timer.start();
  }
}

class PaintSurface extends JComponent {

  int d = 20;

  @Override
  public void paint(Graphics g) {
    Graphics2D g2 = (Graphics2D) g;
    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);
    d += 1;
    System.out.println(d);//This is to test
    Shape ball = new Ellipse2D.Float(0, 0, d, d);
    g2.setColor(Color.RED);
    g2.fill(ball);
  }
} 
```

您在不是[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)的线程上调用 repaint()， 因此 UI 不会更新。还有其他方法可以做到这一点，但在内部 javax.swing.Timer 会调用 Event Dispatch Thread 中的 actionPerformed 方法，以便更新 UI。

**更新：**您可以使用 java webstart 查看小程序的运行情况：[https ://tetris-battle-bot.googlecode.com/files/launch.jnlp](https://tetris-battle-bot.googlecode.com/files/launch.jnlp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:23:05.757

上面的答案确实有效。但是，查看您的原始代码时，您会发现一个小小的误解，似乎你们都没有发现。在动画线程的构造函数中，您将`JApplet C`其作为参数而不是`JApplet c`. 为了澄清，您不小心将`c`. 的大写字母`C`导致你设置`this.c = c`它基本上分配给它自己。根本不需要重写整个代码。

# css - 3 列 + 100% 高度

> ID：15330916
> 
> 赞同：0
> 
> 时间：2013-03-11T03:51:23.400
> 
> 标签：css, html

[我需要与http://blog.html.it/layoutgala/LayoutGala19.html](http://blog.html.it/layoutgala/LayoutGala19.html)中的相同，但每列的高度应该是 100%，整个页面的高度应该是最小 100%。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:02:53.937

您可能应该看看这个问题：[如何使用 twitter bootstrap 让多个列消耗 100% 的高度？](https://stackoverflow.com/questions/10239534/how-to-have-multiple-columns-that-consume-100-height-using-twitter-bootstrap)

他们提到了我认为您正在寻找的这个[链接（您可以在](http://fiddle.jshell.net/teresko/EkTVv/show/)[此处](http://jsfiddle.net/teresko/UG8Rk/)查看源代码）。您必须设置`height: 100%`and `<html>`，`<body>`然后容器应该有一个`min-height: 100%`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-19T22:04:05.423

我试图通过使用 CSS 网格来获得这种布局，但不幸的是我认为这是不可能的。使用浮点数是一种简单的方法。

```
* {
  margin: 0;
  padding: 0;
}

body, html {
  height: 100%;
}

.box {
  height: 100%;
}

.box1 {
  float: left;
  width: 20%;
  background-color: red;

}

.box2 {
  float: left;
  width: 60%;
  background-color: green;

}

.box3 {
  float: left;
  width: 20%;
  background-color: blue;
}
```

```
<html>
  <body>
    <div class="box box1"></div>
    <div class="box box2"></div>
    <div class="box box3"></div>
  </body>
</html>
```

然后可以使用绝对/相对定位将文本准确地放置在您想要的每一列中。

编辑：您也可以使用[Flexbox](https://stackoverflow.com/a/43988319/9599554)很容易地做到这一点。

# python - 在函数中使用 £ 并将其写入 Python 中的 csv

> ID：15330919
> 
> 赞同：0
> 
> 时间：2013-03-11T03:51:29.423
> 
> 标签：python, python-2.7, beautifulsoup

我想从使用 Beautifulsoup 从 url 解析的字符串中删除井号。我收到以下英镑符号错误。SyntaxError: 文件中的非 ASCII 字符 '\xa3'

我试图把它放在`# -*- coding: utf-8 -*-` 课程的开头，但仍然出现错误。

这是代码。得到浮点数后，我想将其写入 csv 文件。

```
 mainTag = SoupStrainer('table', {'class':'item'})
    soup = BeautifulSoup(resp,parseOnlyThese=mainTag)
    tag= soup.findAll('td')[3]
    price = tag.text.strip()

    pr = float(price.lstrip(u'£').replace(',', '')) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:40:34.350

问题可能是编码以及字节与字符之一。CSV 文件是用什么编码创建的？出现 £ 符号的文件中的字节序列是什么？变量中包含的字节是什么`price`？您需要替换字符串中实际出现的字节。一个难题是源代码中数据的内容。这就是`# -*- coding: utf-8 -*-`源代码顶部的标记很重要的地方：它告诉 python 如何解释字符串文字中的字节。在替换字符之前，您可能需要（或想要）解码 CSV 文件中的字节以创建 Unicode 字符串。

我会指出[Python 2.7 中 csv 模块的文档](http://docs.python.org/2.7/library/csv.html#module-csv)说：

> 注意：此版本的 csv 模块不支持 Unicode 输入。此外，目前还有一些关于 ASCII NUL 字符的问题。因此，为了安全起见，所有输入都应该是 UTF-8 或可打印的 ASCII；请参阅示例部分中的示例。

示例部分包含以下代码，演示将 csv 模块提供的字节解码为 Unicode 字符串。

```
import csv

def unicode_csv_reader(unicode_csv_data, dialect=csv.excel, **kwargs):
    # csv.py doesn't do Unicode; encode temporarily as UTF-8:
    csv_reader = csv.reader(utf_8_encoder(unicode_csv_data),
                        dialect=dialect, **kwargs)
    for row in csv_reader:
        # decode UTF-8 back to Unicode, cell by cell:
        yield [unicode(cell, 'utf-8') for cell in row] 
```

# autocomplete - Netbeans 中的自动完成功能

> ID：15330926
> 
> 赞同：13
> 
> 时间：2013-03-11T03:52:31.497
> 
> 标签：autocomplete, netbeans-7

我使用 Netbeans 7.2.1，当我输入`private String a`（Java 代码）时，IDE 会显示一个提示窗口`aString`，要求我将变量命名为后缀类型。此外，当我继续键入时`;`，它会以`private String aString;`. 其实，我不喜欢这种命名方式，那么，如何更改设置呢？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2017-08-23T18:40:21.047

# 对于窗户：

1.  转到工具`>`选项`>`编辑器`>`代码完成
2.  从下拉列表中选择语言 Java
3.  键入任何 Java 标识符部分时自动弹出

* * *

您可以从以下图片中获得帮助：

[![在此处输入图像描述](../Images/5ab349cb26fa9e364137d515fc100bdd.png)](https://i.stack.imgur.com/arfyC.png)

[![在此处输入图像描述](../Images/edb8baf2c8aa0f2d9802fa41d38e30c7.png)](https://i.stack.imgur.com/I9ONb.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-11T21:21:13.273

在下方`Preferences -> Editor -> Code Completion`是您可以找到自动完成属性的地方。您可以禁用“自动弹出完成窗口”以防止其自动弹出。

您可以使用热键调出自动完成弹出窗口：`control+space`

此外，在显示完成窗口时，按`esc`将关闭它而不插入自动完成值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-11T03:54:43.987

转到：首选项 -> 编辑器 -> 格式。

在“语言”下拉框中，选择“Java”。

您可以选择许多其他类别，并且可以在那里自定义代码格式样式。

# python - 如果我是前端开发人员，如何熟悉 Python/Django 框架？

> ID：15330927
> 
> 赞同：0
> 
> 时间：2013-03-11T03:52:36.707
> 
> 标签：python, django, web, collaboration, frontend

我是一名前端开发人员，但我需要在夏天与 Python/Django 开发人员合作开发一个 Web 项目。我不一定想学习 Django，但我想有能力学习如何自己导航并了解编辑 Django 项目前端的最佳实践。我知道 HTML/CSS/JS。我有一些在 RoR 框架上编辑前端的经验。

我应该期望学习曲线需要多长时间？你有什么推荐的资源吗？

一般建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:14:31.957

我认为使用 Django 框架对 Python 的最佳介绍就是遵循他们网站上的 Django 教程：

[Django 教程](https://docs.djangoproject.com/en/1.5/intro/tutorial01/)

这里的关键是不要简单地复制粘贴并通过教程轻松获得最终产品。真正尝试了解过程的每一步。本教程几乎涵盖了您想知道的所有基础知识。

在那之后，有几个标题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T04:27:47.363

首先阅读手册的[模板部分](https://docs.djangoproject.com/en/1.5/topics/templates/)以熟悉设计语言。手册的其余部分也很容易阅读，但对于您的需要不是必需的。

既然你对 Rails 有一定的了解，你应该知道，与 Rail 的默认模板引擎不同，django 的模板中不允许使用 Python。这是设计使然。有许多[内置过滤器](https://docs.djangoproject.com/en/1.5/ref/templates/builtins/#ref-templates-builtins-filters)和[标签](https://docs.djangoproject.com/en/1.5/ref/templates/builtins/#ref-templates-builtins-tags)可提供您需要的大部分逻辑。开发人员总是可以编写自定义过滤器和标签，并且一些 django 应用程序带有自己的标签和过滤器。对于您的需求，您只需要知道内置的是什么以及如何应用它们。

与 ruby​​ 不同，没有“资产管道”和内置 javascript 库的严格概念。Django 的管理站点（CRUD 前端）随 jquery 一起提供，但它是命名空间的，因此您不会遇到冲突。基本上，在 django 中 - 使用任何你喜欢的 javascript/前端库。

我发现 django 的模板语言非常容易理解，你应该不会有任何问题——尤其是在你熟悉 rails 的情况下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T03:57:59.527

我发现学习 Django 的最佳方式是通过**The Django Book** [http://www.djangobook.com/en/2.0/index.html](http://www.djangobook.com/en/2.0/index.html)

您可以开始阅读它，特别是第三章[（](http://www.djangobook.com/en/2.0/chapter03.html)视图）和[第四](http://www.djangobook.com/en/2.0/chapter04.html)章（模板）将帮助您了解 Django 中如何处理前端。

# ruby-on-rails - 我是否在我的 Rails 应用程序上正确设置了私人消息传递功能？

> ID：15330944
> 
> 赞同：0
> 
> 时间：2013-03-11T03:54:22.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我安装了简单的私人消息插件（[https://github.com/jongilbraith/simple-private-messages](https://github.com/jongilbraith/simple-private-messages)），但我在尝试使用 user.name （而不是 user.login）使其工作时遇到了一些问题。我没有收到任何错误消息，但似乎没有收到任何已发送的消息，并且“已发送”下也没有显示任何内容。

首先是用户的模式

```
create_table "users", :force => true do |t|
    t.string   "name"
    t.string   "email"
    t.datetime "created_at",                         :null => false
    t.datetime "updated_at",                         :null => false
    t.string   "password_digest"
    t.string   "remember_token" 
```

消息模式

```
create_table "messages", :force => true do |t|
    t.integer  "sender_id"
    t.integer  "recipient_id"
    t.boolean  "sender_deleted",    :default => false
    t.boolean  "recipient_deleted", :default => false
    t.string   "subject"
    t.text     "body"
    t.datetime "read_at"
    t.datetime "created_at",                           :null => false
    t.datetime "updated_at",                           :null => false
  end 
```

消息控制器类 MessagesController < ApplicationController

```
 before_filter :set_user

def index
if params[:mailbox] == "sent"
  @messages = @user.sent_messages
else
  @messages = @user.received_messages
end
end

def show
@message = Message.read_message(params[:id], current_user)
end

def new
@message = Message.new

if params[:reply_to]
  @reply_to = @user.received_messages.find(params[:reply_to])
  unless @reply_to.nil?
    @message.to = @reply_to.sender.name
    @message.subject = "Re: #{@reply_to.subject}"
    @message.body = "\n\n*Original message*\n\n #{@reply_to.body}"
  end
end
end

def create
@message = Message.new(params[:message])
@message.sender = @user
@message.recipient = User.find_by_name(params[:message][:to])

if @message.save
  flash[:notice] = "Message sent"
  redirect_to user_messages_path(@user)
else
  render :action => :new
end
end

def delete_selected
if request.post?
  if params[:delete]
    params[:delete].each { |id|
      @message = Message.find(:first, :conditions => ["messages.id = ? AND (sender_id = ? OR recipient_id = ?)", id, @user, @user])
      @message.mark_deleted(@user) unless @message.nil?
    }
    flash[:notice] = "Messages deleted"
  end
  redirect_to :back
end
end

private
def set_user
 @user = User.first
end
end 
```

消息模型

```
class Message < ActiveRecord::Base
  attr_accessible :to, :subject, :body
  is_private_message

  attr_accessor :to

end 
```

消息 index.html.erb

```
<%= form_tag delete_selected_user_messages_path(@user, :method => :post) do %>
    <% if params[:mailbox] == "sent" %>
            <%= render :partial => "sent" %>
    <% else %>
            <%= render :partial => "inbox" %>
        <% end %>
<% end %> 
```

发送的消息.html.erb

```
<h2>Sent</h2>
<table>
    <tr>
        <th>Del?</th>
        <th>Subject</th>
        <th>To</th>
        <th>Sent</th>
    </tr>
    <% if @messages.size == 0 %>
        <tr>
            <td colspan="4">
                No messages
            </td>
        </tr>
    <% else %>
        <% for message in @messages %>
            <tr>
                <td><%= check_box_tag "delete[]", message.id %></td>
                <td><%= link_to h(message.subject), user_message_path(@user, message) %></td>
            <td><%= link_to h(message.recipient.login), user_path(message.recipient) %></td>
              <td><%=h message.created_at.to_s(:long) %></td>
            </tr>
        <% end %>
        <tr>
            <td colspan="4">
                <%= submit_tag "Delete" %>
            </td>
        </tr>
    <% end %>
</table>
<%= link_to "Inbox", user_messages_path(@user)%> 
```

我做错了什么吗？对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:40:26.750

如果您查看控制器/显示

```
def show
  @message = Message.read_message(params[:id], current_user)
end 
```

您会看到第二个参数始终是当前用户。所以它正在返回当前用户的交互。

# jquery - 在将表单发布到操作方法之前显示 jQuery 对话框

> ID：15330945
> 
> 赞同：1
> 
> 时间：2013-03-11T03:54:30.773
> 
> 标签：jquery, asp.net, asp.net-mvc

我有一个基本形式。当用户提交表单时，我希望显示一个 jQuery 对话框，询问用户是否确定要继续。

这是我所拥有的：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#dialog-confirm").dialog({
            autoOpen: false,
            modal: true,
            buttons: {
                "Continue": function () {
                    // continue and post data to action method
                },
                "Cancel": function () {
                    // close dialog and do nothing
                }
            }
        });
    }); 
</script>

@using (Html.BeginForm("Index", "Members", FormMethod.Get))
{
    Name: @Html.TextBox("searchName")
    <input value="Submit" type="submit" />
} 
```

但我不知道如何将对话框挂接到表单提交中。有谁知道这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T04:04:25.133

你可以这样做：

```
$('form#yourFormId').submit(function(e){
   e.preventDefault();
   $('#dialog-confirm').dialog('open');
});
$("#dialog-confirm").dialog({
    autoOpen: false,
    modal: true,
    buttons: {
           "Continue": function () {
                $(this).dialog('close');
                $("form#yourFormId").submit();
           },
           "Cancel": function () {
           // close dialog and do nothing
          }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:06:03.477

可以通过向提交按钮添加一个单击处理程序来阻止表单提交但打开对话框来做到这一点。然后在`Continue`按钮回调中提交表单

```
<-- adding ID to button-->
<input id="mySubmitButton" value="Submit" type="submit" /> 
```

JS

```
$("#dialog-confirm").dialog({
        autoOpen: false,
        modal: true,
        buttons: {
            "Continue": function () {
                // am not familiar with parsing dotNet form helper, assume "Members" is form ID
               $('form#Members').submit()/* or use AJAX*/

            },
            "Cancel": function () {
               $(this).dialog('close')
            }
        }
    });

$('#mySubmitButton').click(function(e){
   e.preventDefault()
   $("#dialog-confirm").dialog('open')
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T04:31:49.843

如果我有一个提交按钮，但我想在表单发布之前执行一些客户端脚本，我会在 html 中执行此操作：

```
<input id="mySubmitButton" value="Submit" type="submit" onclick="return MyFunction();"/> 
```

在 JS 我这样做：

```
function MyFunction()
{//any code you wanted to run here
   return true;
} 
```

您需要更改 MyFunction 以提示用户并在他们取消操作时返回 false。

这种使用布尔返回值调用 javascript 函数的方法很方便，特别是当您需要在发布之前执行输入验证时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T14:19:06.090

如果要关闭对话框并避免页面提交数据，则需要放置：

```
return false; 
```

在对话框的继续功能中使用重定向。你不需要有一个函数，它总是可以工作的。我在像您这样的对话框中将这种方法用于我的 asp.net 网站。

```
<script type="text/javascript">
$(document).ready(function () {
    $("#dialog-confirm").dialog({
        autoOpen: false,
        modal: true,
        buttons: {
            "Continue": function () {
                // continue and post data to action method
                // Redirect to a page 
            },
            "Cancel": function () {
                // close dialog and do nothing
                return false;
            }
        }
    });
}); 
</script>

@using (Html.BeginForm("Index", "Members", FormMethod.Get))
{
    Name: @Html.TextBox("searchName")
    <input value="Submit" type="submit" />
} 
```

# search - Elasticsearch 根据字符串在数组中出现的次数进行排序

> ID：15330948
> 
> 赞同：0
> 
> 时间：2013-03-11T03:54:49.123
> 
> 标签：search, lucene, elasticsearch, tire

我有一个包含字符串列表的数组字段：即：[“NY”，“CA”]

在搜索时，我有一个匹配数组中任何字符串的过滤器。

我想根据搜索字符串出现次数最多的文档对结果进行排序：“NY”

结果应包括： 文件 1：["CA"、"NY"、"NY"] 文件 2：["NY"、FL"] 文件 3：["NY"、CA"、"NY"、"NY"]

结果应该这样排序

用户 3、用户 1、用户 2

这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:04:14.543

对于那些好奇的人，我无法根据数组中单词出现的次数来提升。但是，我确实通过以下方式完成了我所需要的：

```
curl -X POST "http://localhost:9200/index/document/1" -d '{"id":1,"states_ties":["CA"],"state_abbreviation":"CA","worked_in_states":["CA"],"training_in_states":["CA"]}'
curl -X POST "http://localhost:9200/index/document/2" -d '{"id":2,"states_ties":["CA","NY"],"state_abbreviation":"FL","worked_in_states":["NY","CA"],"training_in_states":["NY","CA"]}'
curl -X POST "http://localhost:9200/index/document/3" -d '{"id":3,"states_ties":["CA","NY","FL"],"state_abbreviation":"NY","worked_in_states":["NY","CA"],"training_in_states":["NY","FL"]}'

curl -X GET 'http://localhost:9200/index/_search?per_page=10&pretty' -d '{
  "query": {
    "custom_filters_score": {
      "query": {
        "terms": {
          "states_ties": [
            "CA"
          ]
        }
      },
      "filters": [
        {
          "filter": {
            "term": {
              "state_abbreviation": "CA"
            }
          },
          "boost": 1.03
        },
        {
          "filter": {
            "terms": {
              "worked_in_states": [
                "CA"
              ]
            }
          },
          "boost": 1.02
        },
        {
          "filter": {
            "terms": {
              "training_in_states": [
                "CA"
              ]
            }
          },
          "boost": 1.01
        }
      ],
      "score_mode": "multiply"
    }
  },
  "sort": [
    {
      "_score": "desc"
    }
  ]
}'

results: id: score

1: 0.75584483
2: 0.73383
3: 0.7265643 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:19:43.443

这将通过标准的 Lucene 评分实现来完成。如果您只是在不指定顺序的情况下搜索“NY”，它将按相关性排序，并将最高相关性分配给该术语出现次数较多的文档，其他条件相同。

# rpc - 在远程过程调用中返回记录列表

> ID：15330951
> 
> 赞同：0
> 
> 时间：2013-03-11T03:55:31.087
> 
> 标签：rpc, record, smartgwt, gwt-rpc

我在用着

> smartGWT手机

作为前端，

> 从客户端 UI 我正在进行 rpc 调用作为回报，我需要记录列表。

如果我使用记录列表，它会抛出一个编译错误，说没有导入或找到记录列表包。我需要它以记录列表的形式。例如，我必须根据文件名搜索文件，因此结果应包含文件名、日期和大小。请帮助提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:48:19.097

在我看来`Records`是客户端对象，你的 rpc 应该返回`Serializable`对象并进入异步`callback`你设置你的记录的不同属性与来自服务器的对象中的对应值。例如在您的 RPC 中：

```
MySerializableType[] thesNodes = new MySerializableType[size];
........
return theNodes; 
```

和其他地方：

```
public class MySerializableType implements IsSerializable { 
```

# php - 将 db 中的用户计数为相等的用户级别

> ID：15330952
> 
> 赞同：0
> 
> 时间：2013-03-11T03:55:32.307
> 
> 标签：php, mysql

我想计算我的用户数，然后发送命令来更新不同的表，以更改他们在个人资料上显示的“级别”。这就是我得到的......

```
<?php
$query = mysql_query("SELECT COUNT(*) FROM 'ow_base_user'.'id' WHERE 'id'") or die (mysql_error());  
$row = mysql_fetch_row($query);
$count = $row[0];
$username = [userid];
$count = "";
$lvl = UPDATE  `founda_Inspire`.`ow_base_authorization_role` SET  `name` =  'empower' WHERE  `ow_base_authorization_role`.`id` =13; }
if ($count >= 2720) { $lvl = UPDATE  `founda_Inspire`.`ow_base_authorization_role` SET  `name` =  'integrity' WHERE  `ow_base_authorization_role`.`id` =18; }
else if ($count >= 625) { $lvl = UPDATE  `founda_Inspire`.`ow_base_authorization_role` SET  `name` =  'honor' WHERE  `ow_base_authorization_role`.`id` =17; }
else if ($count >= 125) { $lvl = UPDATE  `founda_Inspire`.`ow_base_authorization_role` SET  `name` =  'passion' WHERE  `ow_base_authorization_role`.`id` =16; }
else if ($count >= 25) { $lvl = UPDATE  `founda_Inspire`.`ow_base_authorization_role` SET  `name` =  'creative' WHERE  `ow_base_authorization_role`.`id` =15; }
else if ($count >= 5) { $lvl = UPDATE  `founda_Inspire`.`ow_base_authorization_role` SET  `name` =  'inspire' WHERE  `ow_base_authorization_role`.`id` =14; }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:04:07.060

您上面的代码片段有几个问题，让我们从这里开始..

```
$query = mysql_query("SELECT COUNT(*) FROM 'ow_base_user'.'id' WHERE 'id'") or die (mysql_error()); 
```

上面语句中的 where 子句是空白的，这在 SQL 中是不允许的

在你的片段中，你有

```
$lvl = UPDATE  `founda_Inspire`.`ow_base_authorization_role` SET  `name` =  'empower' WHERE  `ow_base_authorization_role`.`id` =13; }
if ($count >= 2720) { $lvl = UPDATE  `founda_Inspire`.`ow_base_authorization_role` SET  `name` =  'integrity' WHERE  `ow_base_authorization_role`.`id` =18; }
else if ($count >= 625) { $lvl = UPDATE  `founda_Inspire`.`ow_base_authorization_role` SET  `name` =  'honor' WHERE  `ow_base_authorization_role`.`id` =17; }
else if ($count >= 125) { $lvl = UPDATE  `founda_Inspire`.`ow_base_authorization_role` SET  `name` =  'passion' WHERE  `ow_base_authorization_role`.`id` =16; }
else if ($count >= 25) { $lvl = UPDATE  `founda_Inspire`.`ow_base_authorization_role` SET  `name` =  'creative' WHERE  `ow_base_authorization_role`.`id` =15; }
else if ($count >= 5) { $lvl = UPDATE  `founda_Inspire`.`ow_base_authorization_role` SET  `name` =  'inspire' WHERE  `ow_base_authorization_role`.`id` =14; } 
```

而且你的引号都在错误的地方，所以你的 SQL 字符串没有正确构建

附带说明一下，当您在发布之前努力解决问题时，通常会在 stackoverflow 上获得更好的响应。根据您发布的内容，您似乎只是说“嗯，它不起作用让我问一下”

# haskell - RealFrac 来自哪里？

> ID：15330953
> 
> 赞同：8
> 
> 时间：2013-03-11T03:55:32.433
> 
> 标签：haskell

我在哪里可以找到该`fromRealFrac`功能？根据[温和的介绍](http://www.haskell.org/tutorial/numbers.html)，该功能应该存在，并且通过一些谷歌搜索，我认为它应该在 Prelude 中 - 但 ghci 抱怨它不在范围内。

我暂时使用`fromRational . toRational`的是，根据温和的介绍，这`fromRealFrac`就是要定义的方式。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-11T09:58:00.383

以前称为“fromRealFrac”的函数在 Haskell 98 报告中更名为“realToFrac”。

在[Haskell 1.4 Prelude](http://www.cs.auckland.ac.nz/references/haskell/haskell-report-1.4-html/standard-prelude.html)中，我们发现

```
fromRealFrac    :: (RealFrac a, Fractional b) => a -> b
fromRealFrac    =  fromRational . toRational 
```

然而，在[Haskell 98](http://www.haskell.org/onlinereport/standard-prelude.html)中，它被称为

```
realToFrac     :: (Real a, Fractional b) => a -> b
realToFrac      =  fromRational . toRational 
```

此更改列在[Haskell 98 报告勘误表](http://www.haskell.org/definition/haskell98-bugs.html)中：

```
[Apr 2001] Page 84, Section 6.4, Fig 7; and bottom of page 86, Section 6.4.6.
    fromRealFrac :: (RealFrac a, Fractional b) => a -> b
should be replaced by
    realToFrac :: (Real a, Fractional b) => a -> b 
```

[我能找到的](http://darcs.haskell.org/haskell98-report/_darcs/patches/20010405162240-c7106-02f284591dfa05c798c836b5985ce974d06a1cdd.gz)最接近的提交是在报告存储库中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T07:35:27.633

[看来](http://www.haskell.org/pipermail/haskell/2001-February/006575.html)这个函数是[`realToFrac`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v%3arealToFrac)在 GHC Prelude 中调用的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T04:01:06.320

根据[Hoogle](http://www.haskell.org/hoogle/)的说法，标准库中[没有命名函数。`fromRealFrac`](http://www.haskell.org/hoogle/?hoogle=fromRealFrac)~~也许这是温和介绍的作者自己编造的一个功能？~~查看链接后，他们当然建议它在某个图书馆中……我也很困惑。

# rxtx - XBee - XBee-API 和多个端点

> ID：15330954
> 
> 赞同：1
> 
> 时间：2013-03-11T03:55:39.123
> 
> 标签：rxtx, xbee

使用 Andrew Rapp 的[XBee-API](https://code.google.com/p/xbee-api/)，我如何通过协调器从两个以上的端点采样[I/O数据？](http://en.wikipedia.org/wiki/Input/output)

我有 17 系列 1 XBees。我已经将一个编程为协调器（API 模式 = 2），其余的编程为端点。使用 XBee-API 我正在发送一个强制 I/O 样本（“IS”）远程 AT 命令，单播到每个端点。这在最多有两个端点时效果很好，但是一旦添加了第三个端点，三个端点中的一个总是变得无响应（XBeeTimeoutException 超时）。停止响应的并不总是同一个物理单元，但*总是*第三个（例如，如果我将 Force I/O Sample 发送到 Device1、Device2 和 Device3，Device3 将超时，如果我将顺序更改为Device3、Device1、Device2、Device2 将超时。

如果我设置了三个以上的 XBees，大约三分之一的 XBees 会超时——但不是每三分之一。

我已经证实 XBees 本身没有问题。我已经搜索了 Internet 和 Stack Overflow，尤其是无济于事。我尝试过使用简单的 ZNetRemoteAtRequest。我尝试为所有三个设备打开和关闭 XBee 协调器串行连接一次，每个设备一次，每个程序运行一次。我尝试改变协调器和端点之间的距离（相距不超过五英尺）。我尝试了不同的协调器配置参数（来自 Digi 文档）。我已经尝试为协调员更换 XBee。

这是我用来向每个端点发送 Force I/O Sample 请求并读取响应的代码：

```
xbee = new XBee(); // Coordinator
xbee.open("/dev/ttyUSB0, 115200)); // Happens before any of the endpoints are contacted

... // Loop through known endpoint addresses

XBeeRequest request = new ZBForceSampleRequest(new XBeeAddress64(endpointAddress));
ZNetRemoteAtResponse response = null;
response = (ZNetRemoteAtResponse) xbee.sendSynchronous(request, remoteXBeeTimeout);
if (response.isOk()) {
     // Process response payload
}

... // End loop and finally close coordinator connection 
```

什么可能有助于从两个以上的端点轮询 I/O 样本？

**编辑**：我发现 Andrew Rapp 的 XBee-API 库伪造了多线程行为，这导致了这个问题中描述的同步问题。我编写了一个替换库，**它**实际上是多线程的，并且可以正确映射来自多个 XBee 端点的响应：[https](https://github.com/steveperkins/xbee-api-for-java-1-4) ://github.com/steveperkins/xbee-api-for-java-1-4 。当我编写它时，Java 1.4 是在 BeagleBone、Plug 和 Zotac 单板 PC 上使用所必需的，但它很容易转换到 1.7+。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:45:39.777

您是否在串行端口上使用硬件流控制？当本地 XBee 取消断言 CTS（例如，要求您停止发送）时，您是否有可能发送请求？我假设您以 115200 bps 的速度运行，因此 XBee 串行端口可以跟上网络数据速率。

你能打开调试信息，或者连接一些端口监控硬件/软件来显示通过串口到本地XBee的数据吗？

# visual-studio - 通用类型的 Visual Studio UML 类图和建模

> ID：15330957
> 
> 赞同：13
> 
> 时间：2013-03-11T03:55:59.723
> 
> 标签：visual-studio, uml, modeling, class-diagram

我需要建模一个继承自基本泛型类的具体泛型类。首先，见下图：

![在此处输入图像描述](../Images/a92142ae40c3d02ad5457a56dc7cc5c4.png)

ActivityFacade 应该这样实现：

```
public class ActivityFacade : BaseFacade<Activity, int>
{
} 
```

如何在 VS2012 UML 类图中对此进行建模？看图，很明显ActivityFacade继承自BaseFacade，但不明显的是它传入的泛型类型参数，即：`Activity`和`int`。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-11T23:48:11.180

您需要添加一个**新**的`BaseFacade <Activity, int>`绑定**类**（`BaseFacade<T, TKey>`**`ActivityFacade`**

 **![在此处输入图像描述](../Images/45b35c06c5b5bef4dd47584426c58c41.png)

来自 OMG UML 规范

“模板是一个参数化元素......用于使用 TemplateBinding 关系生成其他模型元素。模板签名的模板参数指定将由绑定中的实际参数（或默认值）替换的形式参数。”

**更新：**

我包含的图表是使用 EA 绘制的。相同的概念可以在 Visual Studio UML 工具中建模。请参阅msdn 中的“[模板类型：使用模板类型”部分。](http://msdn.microsoft.com/en-us/library/vstudio/dd409416.aspx#Templates)**

# email - .ost 文件无效，并且控制面板中没有邮件图标来修复它

> ID：15330960
> 
> 赞同：0
> 
> 时间：2013-03-11T03:56:27.740
> 
> 标签：email, windows-8, office365, office-2013, control-panel

我这里有一个非常有趣的情况。我正在运行带有 Office 2013（更具体地说是 Office 365）的 Windows 8 Pro x64。在我设置 Outlook 的某个地方，我犯了一个错误，导致它在无效的 .ost 文件中创建。我在资源管理器中找到了该文件，它恰好是一个空文件。

对此的所有解决方案都涉及使用控制面板中的邮件图标。那会很棒，但它**不存在！**我已经搜索并搜索了此问题的解决方案，但我找不到适用于 Windows 8 的解决方案。要么该解决方案太过时以至于它甚至无法在 Windows 8 中使用，要么该解决方案不知何故不起作用用我的设置。

我已经完全结束了这个想法，我决定来看看这里是否有人可以解决我的问题。谢谢你的帮助！

编辑：我已经想到了一些可能的解决方案，唯一似乎远程可行的解决方案似乎是完全重新启动 Outlook 设置过程。但是，我不知道如何执行此操作，也无法仅重新安装 Outlook，因为它是 Office 365 的一部分。任何有关此方面的帮助都会非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:50:15.847

您是否尝试删除（或重命名/移动，更谨慎）空 .ost 文件？一旦它不存在，这可能会导致 Outlook 正确地重新生成它。

Outlook 2013 或 Office 365 的“添加/删除程序”中是否列出了任何内容？我已经运行 Outlook 2013（处于测试版的荣耀）一段时间了，我偶尔会遇到一些问题，这些问题可以通过快速修复来解决。

要进行快速修复：

*   按 Windows 键 + Q。搜索“删除程序”并将搜索范围过滤器更改为“设置”。
*   选择“更改或删除程序”。
*   我有“Microsoft Office Professional Plus 2013 - en-us”作为我的程序之一。单击它（或 Office 2013 的类似内容），然后单击“更改”。
*   选择“快速修复”，然后单击“修复”。

最后，如果这些都不起作用，以下是如何在控制面板中找到邮件图标：

*   将鼠标移到屏幕的右下角（以前是“开始”按钮的位置）并单击鼠标右键。选择“控制面板”。
*   在右上角的控制面板中，有一个“查看方式”下拉菜单。它可以设置为“类别”。将其更改为“大图标”。
*   我现在看到一个邮件图标。如果它没有为您显示，那可能意味着 Outlook 配置不正确，您确实需要重新安装。

希望这可以帮助。

# c# - 如何处理：参数超出范围？

> ID：15330961
> 
> 赞同：-2
> 
> 时间：2013-03-11T03:56:46.583
> 
> 标签：c#, outofrangeexception

当我在图片框中加载图片并且不先单击图片框时，它会中断。当我将 return 放回代码中时，它会进入无限循环，当我删除它时，代码会中断。

这是代码。它总是在第 1 点中断，我不知道如何处理它。

```
private void buttonNoiseAvr_Click(object sender, EventArgs e)
{
    Point Zeko = new Point(25, 25);

    if (pictureBoxSourcePicture.Image == null)
    {
        MessageBox.Show("No picture loaded");
        return;
    }

    if (pictureBoxSourcePicture.Height != clickedY || pictureBoxSourcePicture.Width != clickedX)
    {
        MessageBox.Show("Adeekll");
        //return;
    }

    Color oPoint = ((Bitmap)pictureBoxSourcePicture.Image).GetPixel(clickedX, clickedY);

    Color point1 = ((Bitmap)pictureBoxSourcePicture.Image).GetPixel(clickedX - 1, clickedY - 1);
    Color point2 = ((Bitmap)pictureBoxSourcePicture.Image).GetPixel(clickedX, clickedY - 1);
    Color point3 = ((Bitmap)pictureBoxSourcePicture.Image).GetPixel(clickedX + 1, clickedY - 1);
    Color point4 = ((Bitmap)pictureBoxSourcePicture.Image).GetPixel(clickedX - 1, clickedY + 1);
    Color point5 = ((Bitmap)pictureBoxSourcePicture.Image).GetPixel(clickedX, clickedY + 1);
    Color point6 = ((Bitmap)pictureBoxSourcePicture.Image).GetPixel(clickedX + 1, clickedY + 1);
    Color point7 = ((Bitmap)pictureBoxSourcePicture.Image).GetPixel(clickedX - 1, clickedY);
    Color point8 = ((Bitmap)pictureBoxSourcePicture.Image).GetPixel(clickedX + 1, clickedY);

    //int[] XOR = new int[] { oPoint.R };
    //int[] XOG = new int[] { oPoint.G };
    //int[] XOB = new int[] { oPoint.B };

    int[] XR = new int[] { point1.R, point2.R, point3.R, point4.R, point5.R, point6.R, point7.R, point8.R };
    int[] XG = new int[] { point1.G, point2.G, point3.G, point4.G, point5.G, point6.G, point7.G, point8.G };
    int[] XB = new int[] { point1.B, point2.B, point3.B, point4.B, point5.B, point6.B, point7.B, point8.B };

    double SumRed = 0;
    double SumGreen = 0;
    double SumBlue = 0;

    for (int i = 0; i < XR.Length; i++)
    {
        SumRed += (Math.Abs(oPoint.R - XR[i])) * (Math.Abs(oPoint.R - XR[i]));
        SumGreen += (Math.Abs(oPoint.G - XG[i])) * (Math.Abs(oPoint.G - XG[i]));
        SumBlue += (Math.Abs(oPoint.B - XB[i])) * (Math.Abs(oPoint.B - XB[i]));
    }

    MessageBox.Show("The Average Difference of Red is = "
            + Math.Sqrt(SumRed) + "\n"
            + "The Average Difference of Green is = "
            + Math.Sqrt(SumGreen) + "\n"
            + "The Average Difference of Blue is = "
            + Math.Sqrt(SumBlue) + "\n");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T04:14:20.407

您可以按以下方式计算您的积分：

```
 Color[] points = new Color[8];
        int[] xPos = { -1, 0, 1, -1, 0, 1, -1, 1 };
        int[] yPos = { -1, -1, -1, 1, 1, 1, 0, 0 };
        for (int i = 0; i < 8; i++)
           points[i] = ((Bitmap)pictureBoxSourcePicture.Image).GetPixel(clickedX + xPos[i], clickedY + yPos[i]); 
```

然后计算 sumRed、sumGreen 和 SumBlue：

```
 for (int i = 0; i < points.Length; i++)
        {

            SumRed += Math.Pow( (Math.Abs(oPoint.R - points[i].R)),2);
            SumGreen += Math.Pow((Math.Abs(oPoint.R - points[i].G)), 2);
            SumBlue += Math.Pow((Math.Abs(oPoint.R - points[i].B)), 2);

        } 
```

它更简短，更容易理解。希望这会有用

# sqlite - SQLite - 使用比较器函数从表中选择行

> ID：15330965
> 
> 赞同：0
> 
> 时间：2013-03-11T03:57:27.263
> 
> 标签：sqlite

我的 SQLite 数据库中有一个表，其中一列只是自由文本。另外，我定义了一个自定义函数，用于计算两个给定字符串的*Levenshtein 距离*。基本上只是一个返回整数值（两个字符串之间的距离）的比较器函数。

我的目标是检索该表中的**所有行**，它们之间的距离小于给定值 D。

这可以使用查询吗？我认为 GROUP BY 会是答案，但我没有得到任何可以分享的半体面的结果。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:05:34.437

您必须将表与自身连接：

```
SELECT *
FROM MyTable T1 JOIN
     MyTable T2 ON T1.ID < T2.ID AND
                   LDist(T1.TextColumn, T2.TextColumn) < 42 
```

（`ID`比较防止返回同一对的两个结果记录。）

# python - Python 的 `in` 关键字是否执行线性搜索？

> ID：15330969
> 
> 赞同：6
> 
> 时间：2013-03-11T03:57:57.047
> 
> 标签：python, algorithm, keyword

Python 如何检查给定值是否存在于可迭代的 using`in`关键字中。它是否执行线性搜索？喜欢 ：

```
def naive(iterable, val):
    for i in range(len(l)):
        if iterable[i]==val:
            return True
    return False 
```

? 或者它有不同的方式来做到这一点。除了线性搜索？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T04:03:26.710

Python 的`in`运算符调用`__contains__`容器上的魔法函数。这对于不同的容器以不同的方式实现。

对于`str`ings、`list`s 和s，它`tuple`是一种线性搜索（`O(N)`

对于`set`s 和`dict`s，这是一个哈希表查找，速度要快得多（`O(1)`平均情况）。

其他容器将具有不同的性能特征。我认为标准库中没有，但平衡的树数据结构可能是`O(log N)`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-11T03:59:59.957

`in`关键字取决于`__contains__`您正在调用的对象类中方法的实现。这意味着对于任何不可散列的（列表、字符串），它执行线性搜索，但对于可散列的数据结构（字典、集合），它将被摊销恒定时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T03:59:53.877

如果它是一个*线性*数据结构，是的，它是一个线性搜索。示例：列表、字符串。如果它是一个集合，它就是一个`O(1)`操作，或者如果我们正在检查一个键是否在一个 dict 中也是`O(1)`.

# ruby-on-rails - Rails 嵌套/多级 AREL 查询

> ID：15330974
> 
> 赞同：0
> 
> 时间：2013-03-11T03:58:30.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3, arel

我有 3 个模型：

```
Tiersets
  has_many Tiers

Tiers
  belongs_to Tierset
  has_and_belongs_to_many Features

Feature
  has_and_belongs_to_many Tiers 
```

在`Feature`中，我有一个`String`名为的列`Feature_Code`，其中包含以下字符串之一：“ `F_VIZ`”、“ `F_DATA`”、“ `F_SCORE`”。

我正在尝试构建一个查询，以在已知`Tierset`的所有`Feature`对象中查找所有具有该代码`F_VIZ`的`Tier`对象`Tierset`。

我在 AREL 查询中尝试了一堆 :includes 的组合，但我显然对表的连接方式感到困惑。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:42:25.560

The SQL you want is

```
select * from features, features_tiers, tiers where features_tiers.id = features.id and features_tiers.tier_id = tiers.id and features.code = 'F_VIZ' AND tierset_id = ?; 
```

so we'll translate this directly to ActiveRecord:

```
Feature.joins(:tiers).where(:code => 'F_VIZ', 'tiers.tierset_id' => 1) 
```

Which is a bit cleaner, since AR 'knows' about the implicit join table between features and tiers based on how your associations are set up.

# c# - C#中的双精度与十进制舍入

> ID：15330988
> 
> 赞同：6
> 
> 时间：2013-03-11T04:00:12.907
> 
> 标签：c#, double, decimal, rounding

为什么：

```
double dividend = 1.0;
double divisor = 3.0;
Console.WriteLine(dividend / divisor * divisor); 
```

输出 1.0，

但：

```
decimal dividend = 1;
decimal divisor = 3;
Console.WriteLine(dividend / divisor * divisor); 
```

输出 0.9999999999999999999999999999

?

我知道 1/3 不能精确计算，所以必须进行一些舍入。但是为什么 Double 将答案四舍五入为 1.0，而 Decimal 却没有呢？

另外，为什么双倍计算 1.0/3.0 为 0.33333333333333331？如果使用四舍五入，那么最后 3 个不会四舍五入为 0，为什么是 1？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T04:21:39.367

**为什么双倍的 1/3 是 0.33333333333333331**

用二进制表示 1/3 的最接近的方法是：0.0101010101... 这与系列 1/4 + (1/4)^2 + (1/4)^3 + (1/4)^ 相同4...

当然，这受到您可以存储在 double 中的位数的限制。double 是 64 位，但其中一个是符号位，另一个 11 代表指数（把它想象成科学记数法，但是是二进制的）。所以其余的，称为尾数或有效位是 52 位。假设以 1 开始，然后为每个后续的 1/4 幂使用两位。这意味着您可以存储： 1/4 + 1/4^2 + ... + 1/4 ^ 27 即 0.33333333333333331

**为什么乘以 3 舍入到 1**

所以 1/3 以二进制表示并受双精度大小的限制： 0.010101010101010101010101010101010101010101010101010101 我并不是说它是这样存储的。就像我说的那样，您存储从 1 开始的位，并为指数和符号使用单独的位。但我认为考虑如何在 base 2 中实际编写它是有用的。

让我们坚持使用这种“数学家的二进制”表示并忽略双精度数的大小限制。你不必这样做，但我觉得很方便。如果我们想将此近似值取为 1/3 并乘以 3，这与移位乘以 2 然后添加您开始的内容相同。这给了我们 1/3 * 3 = 0.1111111111111111111111111111111111111111111111111111

但是双倍存储可以吗？不，请记住，在第一个 1 之后只能有 52 位尾数，而那个数字有 54 个。所以我们知道它会被四舍五入，在这种情况下四舍五入到 1。

**为什么十进制你会得到 0.9999999999999999999999999999**

使用十进制，您可以获得 96 位来表示一个整数，另外的位表示最多 10 的 28 次幂的指数。所以即使最终它全部存储为二进制，这里我们使用的是 10 的幂，所以考虑一下是有意义的以 10 为基数的数字。 96 位最多可以表示 79,228,162,514,264,337,593,543,950,335，但要表示 1/3，我们将使用所有 3，最多 28 个，我们可以将其移到小数点右侧： 0.3333333333333333333333333333。

将这个 1/3 的近似值乘以 3 可以得到一个可以精确表示的数字。它只有 28 个 9，全部移到小数点右侧：0.9999999999999999999999999999。因此，与双精度数不同，此时没有第二轮舍入。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-11T05:01:10.097

这是针对精度优化的十进制类型的设计，与针对低精度但更高性能进行优化的双精度类型不同。

[Decimal](http://msdn.microsoft.com/en-us/library/system.decimal.aspx)值类型表示从正数 79,228,162,514,264,337,593,543,950,335 到负数 79,228,162,514,264,337,593,543,950,335 的十进制数。

**Decimal 值类型适用于需要大量有效整数和小数位数且无舍入错误的财务计算**。Decimal 类型不会消除舍入的需要。相反，它最大限度地减少了由于四舍五入引起的错误。因此，您的代码产生的结果为 0.9999999999999999999999999999 而不是 1。

无限小数是有限小数的必要扩展的一个原因是表示分数。使用长除法，像 1⁄9 这样的整数的简单除法变成循环小数 0.111…，其中数字重复无止境。这个小数可以快速证明 0.999… = 1。 9 乘以 1 在每个数字中产生 9，所以 9 × 0.111… 等于 0.999… 并且 9 × 1⁄9 等于 1，所以 0.999… = 1：

# php - PHP为图像生成随机数/字符串

> ID：15330989
> 
> 赞同：0
> 
> 时间：2013-03-11T04:00:34.867
> 
> 标签：php, image, random

```
896ba38b-1808-49de-ace0-c079aed65c5a_f.jpg 
```

我需要生成一个像上面一样的随机字符串来命名图像。基本上，我不想使用可预测的格式，让人们可以轻松编写脚本来从我正在构建的站点中提取所有图像。

我知道 PHP rand() 函数。

要制作像上面这样的字符串，我最好多次使用 rand() 函数吗？

更好的方法来做到这一点？想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:03:57.010

尝试使用该`uniqid()`功能：

[http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)

这会生成普遍唯一的 ID，就像您所追求的一样。如果您想要更长的字符串，也许您想将其中的两个或更多缝合在一起。

编辑：您可能还想将`$more_entropy`参数设置为 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T04:18:15.047

```
$rand_val = date('YMDHIS') . rand(11111, 99999);
echo $image_file_name = md5($rand_val) . '.jpg';

// 9da5ea8c52b14305fd11a9c012a23f08.jpg 
```

# version-control - 通过 Crouton 在 Chromebook 上本地访问 Google Drive

> ID：15330993
> 
> 赞同：4
> 
> 时间：2013-03-11T04:00:45.553
> 
> 标签：version-control, dropbox, google-drive-api, chroot, google-chrome-os

我正在使用带有 Crouton chroot 环境 ( [https://github.com/dnschneid/crouton](https://github.com/dnschneid/crouton) ) 的三星 Chromebook。这彻底改变了我对 Chromebook 对于开发人员类型工作的实用性的看法。我喜欢它。

但现在我想在我的各种 PC 和笔记本电脑之间同步文件。使用 git 当然是一种选择，但它需要手动签入我的工作。如果我忘记了怎么办？我最近被宠坏了，使用 Dropbox 或 Google Drive 来自动保持我的文件完全同步。现在我的 Chromebook 上的 Crouton 的问题是，我确实看到了使用 Google Drive 同步项目文件夹的任何明显方法。我认为 Drive 将是更简单的路线，因为它是 Google 产品。但如果 Dropbox 可以正常工作，那也太棒了。

有没有人研究过这个并找到了可行的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T04:47:01.507

虽然我还没有尝试让它工作，但这个项目允许您将 Google Drive 挂载到您的 Linux 文件系统： [https ://github.com/dsoprea/GDriveFS](https://github.com/dsoprea/GDriveFS)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-12T10:10:42.320

您可以从以下目录中访问本地同步的 Drive 文件夹（ChromeOS 的其余部分使用）`chroot`：

> /var/host/media/fuse/drivefs-[唯一 ID]/root/

请注意，每台机器上的唯一 ID 不同（或者可能是每个 google 帐户？） - 您需要自己找到它。

这也可以从此处的 ChromeOS shell 访问：

> /media/fuse/drivefs-[唯一 ID]/root/

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T04:36:27.237

Dropbox 在 crouton chroot 中对我来说很好用。

% sudo apt-get 安装 nautilus-dropbox

有关完整说明，请参见[http://www.liberiangeek.net/2012/04/install-dropbox-in-ubuntu-12-04-precise-pangolin/](http://www.liberiangeek.net/2012/04/install-dropbox-in-ubuntu-12-04-precise-pangolin/)。

# mysql - mysql 查询的语法错误是什么？

> ID：15330999
> 
> 赞同：-3
> 
> 时间：2013-03-11T04:01:26.820
> 
> 标签：mysql, sql

在以下位置发现语法错误：

```
Create table *** (
'id'...
'sid'...
'api_name'...
...
     PRIMARY KEY (`id`) COMMENT '',
      KEY `idx_sid` (`sid`) COMMENT '',
      KEY `idx_api_name` (`api_name`)
) 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:08:36.827

问题是列名用单引号括起来，如果它是保留关键字，则它应该是反引号。

**用单引号**包裹列名会将*标识符*转换为字符串*文字*。

```
Create table *** 
(
   id...
   sid...
   api_name...
   ...
      PRIMARY KEY (`id`) COMMENT '',
      KEY `idx_sid` (`sid`) COMMENT '',
      KEY `idx_api_name` (`api_name`)
) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/a3164)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:16:28.503

字段名称不能用引号 ( **'** ) 括起来，而是用**反**引号( **`** ) 括起来。

仅在以下情况下才需要使用反引号将字段名称括起来：

*   字段名有多个单词（用空格隔开）
*   字段名称是保留关键字