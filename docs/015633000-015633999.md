# StackOverflow 问答 15633000-15633999

# ruby-on-rails-3 - Rails：邮件中的附件.inline []

> ID：15633000
> 
> 赞同：1
> 
> 时间：2013-03-26T09:03:17.857
> 
> 标签：ruby-on-rails-3, actionmailer

我正在寻找在发送电子邮件时在电子邮件中显示公司徽标。我想到了动作邮件程序库，并且有附件内联功能支持邮件中的图像。

我以这种方式实现它：

在 user_mailer.rb 中

```
def welcome_email(user)
@user = user
 @url  = "http://mealnut.com"
  attachments.inline['mealnut.png']

mail(:to => user.email, :subject => "Mealnut: New Order #{order.id}")
end 
```

在 config/application.rb 中：

```
config.action_mailer.default_url_options = { :host => "mealnut.com" } 
```

在welcome_email.html.web

```
 <div class="logo">
          <%= image_tag attachments['mealnut.png'].url, :alt => 'Mealnut', :class => 'photo' %>
  </div> 
```

但它给出了错误：

```
undefined method `url' for nil:NilClass 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:42:58.207

附件和内联附件的不同之处仅在于内联将通过base64插入它，但无论如何您都需要附加一个文件！

```
 attachments.inline['mealnut.png'] = File.read( Rails.root.join("app/some/path/","mealnut.png") ) 
```

比您能够在视图中引用它

希望有帮助！

# java - 多个枚举的国际化（枚举值的翻译）

> ID：15633007
> 
> 赞同：2
> 
> 时间：2013-03-26T09:03:53.717
> 
> 标签：java, jsf, internationalization, enums

再说一遍之前已经讨论[过](https://stackoverflow.com/questions/4375578/jsf-best-way-to-enum-internationalization-i18n)的东西，我想在哪里分享“我的”解决方案并要求改进、其他方法或最佳实践。

我有几个需要国际化的枚举（我需要将枚举值翻译成某些语言以便在 jsf 页面中显示它们）。示例枚举：

```
public enum TransferStatus {
  NOT_TRANSFERRED,
  TRANSFERRED
} 
```

翻译例如`Not yet transferred`/`Transferred, all good`

翻译应存储在 MessageBundle（属性文件）中。我正在寻找一个简单、通用的解决方案（最好不需要在所有枚举中编写额外的代码），它在 jsf 方面不需要太多。顺便提一下，当然有可能两个不同的枚举具有相同的枚举值（例如，类似的值`COMPLETED`在不同的枚举中具有不同的含义）。

我想出的解决方案：

(1) 将翻译存储在属性文件中，如下所示：

```
TransferStatus.NOT_TRANSFERRED = Not yet transferred
TransferStatus.TRANSFERRED = Transferred, all good 
```

(2) 创建一个辅助类，它接受一个枚举并生成查找键：

```
public class EnumTranslator {
  public static String getMessageKey(Enum<?> e) {
    return e.getClass().getSimpleName() + '.' + e.name();
  }
} 
```

(3) 将此代码添加到每个枚举中：

```
public String getKey() {
  return EnumTranslator.getMessageKey(this);
} 
```

(4) 现在，我可以像这样访问我的枚举的翻译值：

```
<h:outputText value="#{enum[order.transferStatus.key]}" /> 
```

没关系，但我只是不喜欢`getKey()`向每个枚举添加相同的方法。应该有更好的东西！现在轮到你了，所以:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:07:09.377

好的，现在这是完整且可立即使用的解决方案：（感谢@Joop Eggen）

做一堂课

```
public final class EnumTranslator {
  public static String getMessageKey(Enum<?> e) {
    return e.getClass().getSimpleName() + '.' + e.name();
  }
} 
```

使其成为自定义 EL 函数

```
<?xml version="1.0" encoding="UTF-8"?>
<facelet-taglib 
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd"
version="2.0">
<namespace>http://example.com/enumi18n</namespace>
<function>
    <function-name>xlate</function-name>
    <function-class>your.package.EnumTranslator</function-class>
    <function-signature>String getMessageKey(java.lang.Enum)</function-signature>
</function>
</facelet-taglib> 
```

将 taglib 添加到您的 web.xml

```
<context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>/WEB-INF/enumi18n.taglib.xml</param-value>
</context-param> 
```

有这样的属性文件 enum_en.properties 和 enum_yourlanguage.properties

```
TransferStatus.NOT_TRANSFERRED = Not transferred
TransferStatus.TRANSFERRED = Transferred 
```

将属性文件作为资源包添加到 faces-config.xml

```
 <resource-bundle>
        <base-name>kk.os.obj.jsf.i18n.enum</base-name>
        <var>enum</var>
    </resource-bundle> 
```

将自定义 taglib 添加到您的 xhtml 文件中

```
<html ... xmlns:l="http://example.com/enumi18n"> 
```

**而且 - 瞧 - 您现在可以在 jsf 中访问翻译后的枚举值：**

```
<h:outputText value="#{enum[l:xlate(order.transferStatus)]}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:29:51.120

我这样做的方式需要更多的代码（但比我在这里看到的其他答案要少得多），但我觉得更可靠：

```
@ManagedBean
@ApplicationScoped
public class EnumTranslator {

    private <E extends Enum<E>> Map<E, String> getPresentableNames(Class<E> enumClass) {
        ResourceBundle resources = ResourceBundle.getBundle(
            "com.example.app.MyMessageBundle",
            FacesContext.getCurrentInstance().getViewRoot().getLocale());

        String prefix = enumClass.getSimpleName() + ".";

        Map<E, String> map = new EnumMap<E, String>(enumClass);
        for (E value : enumClass.getEnumConstants()) {
            map.put(value, resources.getString(prefix + value));
        }

        return map;
    }

    // Bean method, accessible via EL
    public Map<?, ?> getTransferStatuses() {
        return getPresentableNames(TransferStatus.class);
    }
} 
```

然后您的页面可以执行以下操作：

```
<h:outputText value="#{enumTranslator.transferStatuses[order.transferStatus]}" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T09:20:13.120

我会创建一个 EL 函数，让枚举类保持原样：

```
#{l:xlate(order.transferStatus)} 
```

好的，xlate 有一个 Object 参数然后（或`Enum<?>`）。但是枚举类保持不变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-15T14:57:34.557

关于什么：

```
public interface InternationalizationOfEnum {
default String getKey() {
      return EnumTranslator.getMessageKey(this);
    }
String name();} 
```

和

```
public enum anyEnum implements InternationalizationOfEnum{ 
```

# http-status-code-302 - 302 暂时移动了，但是当我直接在浏览器上打开它时就可以了

> ID：15633009
> 
> 赞同：3
> 
> 时间：2013-03-26T09:03:58.977
> 
> 标签：http-status-code-302

我在我的html页面上放了一个脚本标签，然后在firefox上运行它，firebug告诉我脚本是'302已临时移动'，但是当我在浏览器的新标签中打开该脚本时，它是200 ok（响应正确）~ ~

我看到当 302 服务器响应重定向页面时，这是标题：

```
缓存控制 max-age=2592000
连接保持活动
内容长度 154
内容类型 text/html
日期 2013 年 3 月 26 日星期二 08:10:33 GMT
2013 年 4 月 25 日星期四 08:10:33 GMT
位置 http://www.xxxx.com/error/index.html
服务器 nginx

```

如果我把脚本放在其他服务器上（没有错误重定向页面设置），就不会遇到这个问题

有人和我遇到同样的问题吗？我不想将文件放在其他服务器上并且无权配置此服务器。有针对这个的解决方法吗？

非常感谢并原谅我糟糕的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-12T13:02:25.567

我很难理解你在问什么，所以我只是在猜测。如果 302 上有一个缓存控制标头，告诉浏览器允许缓存重定向的页面，浏览器可能会这样做。例如，以下是 IE 9 中关于缓存重定向页面的一些记录改进：http: [//blogs.msdn.com/b/ie/archive/2010/07/14/caching-improvements-in-internet-explorer-9 .aspx](http://blogs.msdn.com/b/ie/archive/2010/07/14/caching-improvements-in-internet-explorer-9.aspx)

# c++ - 如何在 C++ 中更改静态数组变量的地址？

> ID：15633018
> 
> 赞同：0
> 
> 时间：2013-03-26T09:04:19.297
> 
> 标签：c++

假设我们已经定义了一个像这样的变量：

```
static struct array myVar;
// &myVar is 0x100 
```

是否可以在不触及其声明的情况下更改其地址？
太清楚了，我不想将它声明为指针。

```
// &myVar should be != 0x100 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:10:07.673

在你说的评论中：

> 好吧，我问这个是因为在调试 C++ 程序时，我看到 Visual Studio 在运行时使用 &myVar 显示不同的地址

如果您已在包含在多个*.cpp*`myVar`文件中的*.h*文件中声明，那么在每个*.cpp*文件中您将看到不同的 .h 文件地址。这是因为它被声明为具有**内部链接**。内部链接意味着每个翻译单元（*.cpp*文件）将有不同的变量定义。因此，如果有 N 个*.cpp*文件，则基本上每个文件都有 N 个不同地址的版本。这是一种可能的解释！**`myVar``myVar`**`static`**`myVar`******

 *****修复是这样的：

*   将变量声明为`extern`而不是`static`在`.h`文件中：

    ```
     //file.h
     extern struct array myVar; //it is just a declaration 
    ```

*   然后在一个`.cpp`文件中，定义它，不带`static`关键字：

    ```
     //anyfile.cpp
     struct array myVar; //it is a definition! 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:05:09.670

`myVar`不，不能在运行时更改地址。

> 我问这个是因为在调试 C++ 程序时，我看到 Visual Studio 在运行时显示不同的地址`&myVar`

`myVar`在程序的不同运行期间很可能会被分配不同的地址。

如果地址*在同一次运行*中发生变化，最可能的两种解释是：

*   你有不止一个`myVar`；
*   调试器未正确显示地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:13:38.063

它确实取决于您使用的编译器/链接器环境。这将完全超出 C 或 C++ 标准，但一些（如果不是大多数）编译器允许您分配数据或代码最终所在的“部分”（或类似的东西），然后您可以告诉链接器什么地址.

但这可能不是在 Visual Studio 编译中发生的事情，而无需付出很多努力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T09:09:10.090

编译程序时，编译器会将符号替换为`myVar`内存中的地址。所有地址都是在编译时分配的，比如你的，`struct`或者在运行时，当使用`new`-operator 使用动态内存时。所以不可能改变变量的地址，如果你能做到，那将是灾难性的。*****

# objective-c - Xcode：在特定日期做某事

> ID：15633022
> 
> 赞同：-1
> 
> 时间：2013-03-26T09:04:25.880
> 
> 标签：objective-c, xcode, date, nsdate

嗨，我正在尝试在特定日期做某事，目前我只是记录一些随机的东西，但日志在应用程序启动时直接出现，而不是在我设置的日期。这是我的代码。

```
-(void)theMagicDate{

    NSCalendar *nextCal = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *nextComp = [nextCal components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

    [nextComp setYear:2013];
    [nextComp setMonth:3];
    [nextComp setDay:26];
    [nextComp setHour:10];
    [nextComp setMinute:05];

    UIDatePicker *nextDay = [[UIDatePicker alloc]init];
    [nextDay setDate:[nextCal dateFromComponents:nextComp]];

    if(nextDay.date){
        NSLog(@"Doing the stuff on the date");
    }
} 
```

我从 viewDidLoad 调用这个函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:08:22.530

好吧，您正在做出一些错误的假设：

首先`if(nextDay.date){`永远是真的。因为它只会检查是否有任何东西分配给财产日期。由于您为该属性分配了日期，因此它将是正确的。

其次，这[`UIDatePicker`](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDatePicker_Class/Reference/UIDatePicker.html)是一个允许用户选择日期的用户界面 (UI) 组件。如果您想检查您使用组件创建的日期是否已粘贴、现在或将来，您将不得不使用[`NSDate`](https://developer.apple.com/library/iOS/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html).

像这样：

```
-(void)theMagicDate{

NSCalendar *nextCal = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *nextComp = [nextCal components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

[nextComp setYear:2013];
[nextComp setMonth:3];
[nextComp setDay:26];
[nextComp setHour:10];
[nextComp setMinute:05];

NSDate *dateToCheck = [nextCal dateFromComponents:nextComp];
NSDate *now = [NSDate date];

switch ([now compare:dateToCheck]) {
    case NSOrderedAscending:
        NSLog(@"Date in the future");
        break;

    case NSOrderedDescending:
        NSLog(@"Date in the past");
        break;

    case NSOrderedSame:
        NSLog(@"Date is now");
        break;
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:08:09.663

```
if(nextDay.date){
    NSLog(@"Doing the stuff on the date");
} 
```

永远是真的。

您需要将当前日期与您从选择器或任何地方选择的日期进行比较。您需要将未来日期保存在 userdefaults 或 plist 等中。在 MagicDate 方法中读取它并比较两个日期，然后进入`NSLog(@"Doing the stuff on the date");`

```
-(void)theMagicDate{

    NSCalendar *nextCal = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *nextComp = [nextCal components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];

    [nextComp setYear:2013];
    [nextComp setMonth:3];
    [nextComp setDay:26];
    [nextComp setHour:10];
    [nextComp setMinute:05];

    UIDatePicker *nextDay = [[UIDatePicker alloc]init];
    [nextDay setDate:[nextCal dateFromComponents:nextComp]];

     //read from plist etc
     NSDate *readDate=...

    if( [readDate compare:nextDay.date]==NSOrderedSame){
        NSLog(@"Doing the stuff on the date");
    }
} 
```

# android - 是否可以在启动像相机这样的外部意图时设置pendingtransition

> ID：15633025
> 
> 赞同：2
> 
> 时间：2013-03-26T09:04:40.230
> 
> 标签：android, android-intent

是否有可能像主题一样，我的意思是启动相机意图并在打开该视图设置屏幕之前看不到旋转屏幕效果？我试图在`overridePendingTransition`之后使用`startingActivityForResult`，我也尝试`overriDePendingTransition`在调用`onPause`and时将其放入`OnResume`。不知何故，相机使用自己的动画。我想禁用该动画。有可能吗？此效果在 android 2.3.x 中不受影响。它可能与touchWiz有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T19:50:21.463

**TL:博士**

从 KitKat 4.4.2 开始，这似乎仍然不可能。使用 AOSP 手机应用、Nexus 5 体验手机应用、地图、AOSP 浏览器和 Chrome 进行测试。

（我会把它放在评论中，还没有足够的代表。这仍然是一个答案，虽然不是解决问题的方法）

关于为什么它不可能，我只能说：

*   如果您可以通过您自己的应用程序代码强制执行“外部”意图的事务，那么您基本上会将*您的动画注入到另一个发布者的应用程序*中，这将是 Android 框架中的一个**主要设计缺陷** 。

我的猜测是，除非操作系统以防弹的方式管理此类事务，否则这将永远不可能。一些 AOSP 品牌构建和自定义启动器可以更改所有活动开始/恢复的**默认**动画（甚至根本不使用动画）。

# backbone.js - 为什么 Marionette ItemView 更改事件函数中的主干模型更改函数会多次触发？

> ID：15633026
> 
> 赞同：1
> 
> 时间：2013-03-26T09:04:46.783
> 
> 标签：backbone.js, requirejs, marionette, modelbinder

我正在做一个小项目，我遇到了模型绑定问题。我正在使用 Backbone.ModelBinder 插件来绑定模型。

我正在检查输入的更改，并从输入数据名称字段中获取模型属性的名称。之后，我检查更改的数据并在模型上做一些事情。我有一个 ChangeGuest 函数，在里面我正在检查我的模型（Nyiltnap.Reg）的变化。

问题是，这个 Nyiltnap.Reg.on("change:"+field ...){ ... } 函数运行的次数与对名为 input 的字段所做的更改次数一样多。

也许我做错了什么，或者我错过了什么。

**项目视图：**

```
define(['text!templates/FormCompositeView.html', 'text!templates/EventIsFull.html', 'text!templates/ThankYou.html', 'models/RegModel'], function(Template, FullTemplate, ThankYou, Model) {
   var FormCompositeView = Backbone.Marionette.ItemView.extend({
        _modelBinder:undefined,
        initialize: function() {
            this.members = parseInt(Nyiltnap.Reg.get("members"));
            this._modelBinder = new Backbone.ModelBinder();

            var that = this;
            Nyiltnap.Reg.on("change:name", function(r) { //HERE CHANGE TRIGGERS ONLY ONCE
                if( ! _.has(r._previousAttributes, "name") ){
                    that.IncreaseMembers();
                    if(that.members < 10) that.$('.guest').attr("disabled", false);
                    if(that.$('#email').val() != '') that.$("#send-button").attr("disabled", false);
                }
                if( _.has(r._previousAttributes, "name") && r.changed.name == "" ){
                    that.DecreaseMembers();
                    Nyiltnap.Reg.unset("name");
                    that.$('.guest').attr("disabled", true);
                    that.$("#send-button").attr("disabled", true);
                }
            });

            Nyiltnap.Reg.on("change:email", function(r) {
                if( ! _.has(r._previousAttributes, "email") ){
                    if(that.$('#name').val() != '') that.$("#send-button").attr("disabled", false);
                }
                if( _.has(r._previousAttributes, "email") && r.changed.email == "" ){
                    that.$("#send-button").attr("disabled", true);
                }
            });
        },
        getTemplate: function() {
            if( this.members < 10 ){
                return _.template(Template);
            }else{
                return _.template(FullTemplate);
            }
        },
        tagName: "ul",
        id: "nyiltnap-form",
        onRender: function() {
            var MainBindings = {name : "[name=rname]", email : "#email", source : "#source", coupon : "#coupon", guest_1 : "#guest-1", guest_2 : "#guest-2", guest_3 : "#guest-3", guest_4 : "#guest-4", guest_5 : "#guest-5", guest_6 : "#guest-6", guest_7 : "#guest-7", guest_8 : "#guest-8", guest_9 : "#guest-9"};

            if(this.members < 10) this._modelBinder.bind(Nyiltnap.Reg, this.el, MainBindings);

            return this;
        },
        events: {
            "change .guest" : "ChangeGuest",
            "click #send-button" : "SendReg"
        },
        ChangeGuest: function(o) { //I WOULD LIKE TO MAKE THIS WORK
            var that = this;
            var field = $(o.target).data('name');
            Nyiltnap.Reg.on("change:"+field, function(r) { //THIS RUNS AS MANY TIMES AS THE CONTENT OF THE 'field' HAS BEEN CHANGED
                if( ! _.has(r._previousAttributes, field) ) {
                    that.IncreaseMembers();
                    that.AddInput(o);
                }else{
                    if(_.has(r._previousAttributes, field) && _.result(r.changed, field) == ""){
                        that.DecreaseMembers();
                    }
                }
            });
        },
        IncreaseMembers: function() {
            this.members++;
            Nyiltnap.Reg.set("members", this.members);
            Nyiltnap.vent.trigger("members:changed", this.members);
        },
        DecreaseMembers: function() {
            this.members--;
            Nyiltnap.Reg.set("members", this.members);
            Nyiltnap.vent.trigger("members:changed", this.members);
        }, 
        AddInput : function(o) {
            var target = $(o.target);            
            if(this.members < 9) target.next().next().slideDown();
        }
   });

   return FormCompositeView;
}); 
```

**模板：**

```
<li>
    <label for="guest1">My guests: </label>
    <div id="guests">
        <input name="guest-1" data-name="guest_1" id="guest-1" class="guest" type="text" disabled="disabled"/>
        <input name="guest-2" data-name="guest_2" id="guest-2" class="guest" type="text" disabled="disabled"/>
        <input name="guest-3" data-name="guest_3" id="guest-3" class="guest" style="display: none" type="text" />
        <input name="guest-4" data-name="guest_4" id="guest-4" class="guest" style="display: none" type="text" />
        <input name="guest-5" data-name="guest_5" id="guest-5" class="guest" style="display: none" type="text" />
        <input name="guest-6" data-name="guest_6" id="guest-6" class="guest" style="display: none" type="text" />
        <input name="guest-7" data-name="guest_7" id="guest-7" class="guest" style="display: none" type="text" />
        <input name="guest-8" data-name="guest_8" id="guest-8" class="guest" style="display: none" type="text" />
        <input name="guest-9" data-name="guest_9" id="guest-9" class="guest" style="display: none" type="text" />
        <div class="clear"></div>
    </div>
    <div class="clear"></div>
</li> 
```

# php - php函数退出和返回false的区别

> ID：15633028
> 
> 赞同：0
> 
> 时间：2013-03-26T09:04:47.240
> 
> 标签：php

我在函数的末尾看到有时写“return false”也写“exit”。这两者之间的主要区别是什么？在哪种情况下需要这两种？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:06:13.933

exit 将结束 PHP 执行，而 return 将结束函数，大多数情况下使用 return，这取决于你的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:06:51.703

`return false`用于函数，`exit`用于停止 php 脚本

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T09:08:23.927

“return”是函数的退出，“exit”是整个脚本的终止。

[退出说明](http://www.php.net/manual/en/function.exit.php)

[退货说明](http://www.php.net/manual/en/function.return.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T09:08:26.103

exit() 停止整个 PHP 程序并返回到操作系统。

另一方面，return 结束函数调用并返回给调用者。

# javascript - NPM 不再工作

> ID：15633029
> 
> 赞同：35
> 
> 时间：2013-03-26T09:04:47.620
> 
> 标签：javascript, node.js, command-line, npm, jasmine

所以我没有注意并运行了这个命令-

```
npm install npm install jasmine-node -g 
```

这导致了这个 -

```
 npm http GET https://registry.npmjs.org/install
npm http GET https://registry.npmjs.org/jasmine-node
npm http GET https://registry.npmjs.org/npm
npm http 200 https://registry.npmjs.org/install
npm http GET https://registry.npmjs.org/install/-/install-0.1.7.tgz
npm http 200 https://registry.npmjs.org/install/-/install-0.1.7.tgz
npm http 200 https://registry.npmjs.org/jasmine-node
npm http GET https://registry.npmjs.org/jasmine-node/-/jasmine-node-1.4.0.tgz
npm http 200 https://registry.npmjs.org/jasmine-node/-/jasmine-node-1.4.0.tgz
npm http 200 https://registry.npmjs.org/npm
npm http GET https://registry.npmjs.org/npm/-/npm-1.2.15.tgz
npm http 200 https://registry.npmjs.org/npm/-/npm-1.2.15.tgz
npm ERR! Error: EACCES, mkdir '/usr/local/lib/node_modules/install'
npm ERR!  { [Error: EACCES, mkdir '/usr/local/lib/node_modules/install']
npm ERR!   errno: 3,
npm ERR!   code: 'EACCES',
npm ERR!   path: '/usr/local/lib/node_modules/install',
npm ERR!   fstream_type: 'Directory',
npm ERR!   fstream_path: '/usr/local/lib/node_modules/install',
npm ERR!   fstream_class: 'DirWriter',
npm ERR!   fstream_stack: 
npm ERR!    [ 'DirWriter._create (/usr/local/lib/node_modules/npm/node_modules/fstream/lib/dir-writer.js:36:23)',
npm ERR!      '/usr/local/lib/node_modules/npm/node_modules/mkdirp/index.js:37:53',
npm ERR!      'Object.oncomplete (fs.js:297:15)' ] }
npm ERR! 
npm ERR! Please try running this command again as root/Administrator.

npm ERR! System Darwin 12.0.0
npm ERR! command "node" "/usr/local/bin/npm" "install" "npm" "install" "jasmine-node" "-g"
npm ERR! cwd /Users/psanker/Google Drive/Coding/Javascript/WhatsGoingOn
npm ERR! node -v v0.8.17
npm ERR! npm -v 1.2.0
npm ERR! path /usr/local/lib/node_modules/install
npm ERR! fstream_path /usr/local/lib/node_modules/install
npm ERR! fstream_type Directory
npm ERR! fstream_class DirWriter
npm ERR! code EACCES
npm ERR! errno 3
npm ERR! stack Error: EACCES, mkdir '/usr/local/lib/node_modules/install'
npm ERR! fstream_stack DirWriter._create (/usr/local/lib/node_modules/npm/node_modules/fstream/lib/dir-writer.js:36:23)
npm ERR! fstream_stack /usr/local/lib/node_modules/npm/node_modules/mkdirp/index.js:37:53
npm ERR! fstream_stack Object.oncomplete (fs.js:297:15)
npm ERR! Error: EACCES, mkdir '/usr/local/lib/node_modules/jasmine-node'
npm ERR!  { [Error: EACCES, mkdir '/usr/local/lib/node_modules/jasmine-node']
npm ERR!   errno: 3,
npm ERR!   code: 'EACCES',
npm ERR!   path: '/usr/local/lib/node_modules/jasmine-node',
npm ERR!   fstream_type: 'Directory',
npm ERR!   fstream_path: '/usr/local/lib/node_modules/jasmine-node',
npm ERR!   fstream_class: 'DirWriter',
npm ERR!   fstream_stack: 
npm ERR!    [ 'DirWriter._create (/usr/local/lib/node_modules/npm/node_modules/fstream/lib/dir-writer.js:36:23)',
npm ERR!      '/usr/local/lib/node_modules/npm/node_modules/mkdirp/index.js:37:53',
npm ERR!      'Object.oncomplete (fs.js:297:15)' ] }
npm ERR! 
npm ERR! Please try running this command again as root/Administrator.

npm ERR! System Darwin 12.0.0
npm ERR! command "node" "/usr/local/bin/npm" "install" "npm" "install" "jasmine-node" "-g"
npm ERR! cwd /Users/psanker/Google Drive/Coding/Javascript/WhatsGoingOn
npm ERR! node -v v0.8.17
npm ERR! npm -v 1.2.0
npm ERR! path /usr/local/lib/node_modules/jasmine-node
npm ERR! fstream_path /usr/local/lib/node_modules/jasmine-node
npm ERR! fstream_type Directory
npm ERR! fstream_class DirWriter
npm ERR! code EACCES
npm ERR! errno 3
npm ERR! stack Error: EACCES, mkdir '/usr/local/lib/node_modules/jasmine-node'
npm ERR! fstream_stack DirWriter._create (/usr/local/lib/node_modules/npm/node_modules/fstream/lib/dir-writer.js:36:23)
npm ERR! fstream_stack /usr/local/lib/node_modules/npm/node_modules/mkdirp/index.js:37:53
npm ERR! fstream_stack Object.oncomplete (fs.js:297:15)
npm ERR! error rolling back Error: EACCES, unlink '/usr/local/lib/node_modules/npm'
npm ERR! error rolling back  npm@1.2.15 { [Error: EACCES, unlink '/usr/local/lib/node_modules/npm']
npm ERR! error rolling back   errno: 3,
npm ERR! error rolling back   code: 'EACCES',
npm ERR! error rolling back   path: '/usr/local/lib/node_modules/npm' }
npm ERR! Error: EACCES, unlink '/usr/local/lib/node_modules/npm'
npm ERR!  { [Error: EACCES, unlink '/usr/local/lib/node_modules/npm']
npm ERR!   errno: 3,
npm ERR!   code: 'EACCES',
npm ERR!   path: '/usr/local/lib/node_modules/npm' }
npm ERR! 
npm ERR! Please try running this command again as root/Administrator.

npm ERR! System Darwin 12.0.0
npm ERR! command "node" "/usr/local/bin/npm" "install" "npm" "install" "jasmine-node" "-g"
npm ERR! cwd /Users/psanker/Google Drive/Coding/Javascript/WhatsGoingOn
npm ERR! node -v v0.8.17
npm ERR! npm -v 1.2.0
npm ERR! path /usr/local/lib/node_modules/npm
npm ERR! code EACCES
npm ERR! errno 3
npm ERR! stack Error: EACCES, unlink '/usr/local/lib/node_modules/npm'
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/psanker/Google Drive/Coding/Javascript/WhatsGoingOn/npm-debug.log
npm ERR! not ok code 0 
```

现在当我尝试跑步时

```
npm install jasmine-node -g 
```

我明白了

```
-bash: /usr/local/bin/npm: No such file or directory 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-10-20T07:14:43.700

当您运行 npm install -g somepackage 时，您可能会收到 EACCES 错误，要求您以 root/管理员身份再次运行该命令。这是权限问题。

很**容易修复**，打开你的终端（应用程序>实用程序>终端）

```
sudo chown -R $USER /usr/local 
```

** 我强烈建议你不要使用 sudo 进行包管理（sudo npm -g install something），因为以后可能会遇到一些问题**

参考： http: [//foohack.com/2010/08/intro-to-npm/](http://foohack.com/2010/08/intro-to-npm/)

**** 更新 ****

原因是这可能会导致许多其他应用程序出现权限问题，所以我建议不要这样做。

**全局安装时更好的解决方案：**

```
sudo chown -R `whoami` ~/.npm 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-26T09:19:07.037

Tried it myself.

You will need to install `npm` again. If you use `git`, this is the easiest way:

```
git clone http://github.com/isaacs/npm.git
cd npm
sudo make install 
```

Otherwise, there is an install script too:

```
curl http://npmjs.org/install.sh | sh 
```

(possibly you will need to use `sudo sh` instead of `sh`).

Then install your module again:

```
sudo npm install jasmine-node -g 
```

**EDIT 23/01/2014:**

Now npm comes with NodeJs itself, so just reinstall [NodeJs](http://nodejs.org/).

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-26T09:07:29.493

看看错误

```
Please try running this command again as root/Administrator. 
```

你需要运行它`sudo`

```
$ sudo npm install jasmine-node -g 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-06-06T19:16:39.293

这对我有用（OSX）。我必须在我的用户目录中运行它。

`cd ~`

`curl -L http://npmjs.org/install.sh | sudo sh`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-29T16:43:53.323

通过将我的包设置为使用单行“$HOME/.npmrc”文件在本地安装，我能够解决权限问题：

前缀=${HOME}/.npm_packages

# gradle - Gradle 插件，如何将 Jacoco 代理挂接到 jvm

> ID：15633033
> 
> 赞同：0
> 
> 时间：2013-03-26T09:04:58.133
> 
> 标签：gradle, jacoco, dynamic-properties

您好 Gradle 大师！我正在寻找你强大的经验和知识:)

我有一个将 Jacoco 代理连接到 jvm 的 Gradle 插件。目前我的代码如下所示：

```
Task t = project.allTasks.getByPath(project.getName+":"+"test");
t.jvmArgs = ["-javaagent:"+jacocoAgentJar+"=destfile=" + coverageResultFile.getCanonicalPath()]; 
```

这工作正常，但由于不推荐使用动态属性，我想以某种方式摆脱它们。但是...将代码更改为`t.ext.jvmArgs = ["-javaagent:"+jacocoAgentJar+"=destfile=" + coverageResultFile.getCanonicalPath()];`不起作用。

有人可以向我解释一下我应该如何使用这个动态属性将 Jacoco 代理连接到 jvm？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:38:24.677

您可以直接在构建文件中配置测试任务，添加如下配置闭包：

```
test{

  jvmArgs "javaagent:"+jacocoAgentJar+"=destfile=" + overageResultFile.getCanonicalPath()"

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:31:00.010

如果您在此处收到“动态属性”警告，则您的代码可能有问题，而不仅仅是样式问题。一方面，在这里使用`getAllTasks`（顺便说一下，它采用布尔参数）是不合适的。相反，您应该使用`project.tasks.getByName("test")`，它可以缩写为`project.tasks["test"]`甚至`project.test`。或者，如果您想捕获所有测试任务，`project.tasks.withType(Test)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:18:45.847

不是您问题的直接答案，但您可能想查看[gradle-jacoco](HTTP://github.com/ajoberstar/gradle-jacoco)插件。

# jquery - jQuery 模拟点击间隔

> ID：15633036
> 
> 赞同：1
> 
> 时间：2013-03-26T09:05:00.793
> 
> 标签：jquery, click, jquery-click-event

是否可以在设定的时间间隔内模拟点击链接或任何标签？

原因：我有一个没有自动旋转功能的插件，但只能在单击 Next 和 Prev 链接时工作。所以我正在尝试编写一个自动点击的函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T09:06:16.780

您可以使用[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)重复调用函数并使用触发器在该函数中[触发](http://api.jquery.com/trigger/)click 事件或直接调用 click()。

```
setInterval(function(){
  $('#ElementId').trigger('click');
 // $('#ElementId').click();
}, 5000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T09:07:49.267

```
var checkForConfirmation = function(){
      $("#anchorLink").trigger('click');
}
var checkInterval = setInterval(function(){checkForConfirmation()}, 5000); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T09:06:40.123

```
setInterval(function(){
  $('#ElementId').click();
}, 5000); 
```

# c - 开放系统调用 - Linux

> ID：15633039
> 
> 赞同：1
> 
> 时间：2013-03-26T09:05:06.217
> 
> 标签：c, linux, linux-kernel

尝试使用 open 系统调用打开 tty 端口。如果打开系统调用返回-1，我如何知道该端口是否被另一个应用程序使用？

不要找到相同的错误代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:21:06.933

如果文件已经打开，调用`open()`不会给你一个错误。

但是，您可以尝试分析linux`lsof`命令的输出：

`lsof /dev/ttyS0`

它将返回有关打开给定文件的进程的信息（在本例中为：/dev/ttyS0）。

*（我已经对此进行了几次测试，所以我不确定，但如果文件由进程打开，则`lsof`似乎返回**0** ，如果没有进程打开它，则返回 1。这可能是一个指示，但是我**会**建议你真正分析一下命令本身的输出）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:32:02.077

```
#include <errno.h>
#include <stdio.h>
#include <strcing.h>

int main() 
{
    if(open("/dev/ttyS0", O_RDWR))
        printf("errno = %s\n", strerror(errno));

    return errno;
} 
```

请参阅此[链接](http://www.ibm.com/developerworks/aix/library/au-errnovariable/)以找出错误代码是什么。

# android - 签入依赖于 SVN 的 Android 项目

> ID：15633044
> 
> 赞同：1
> 
> 时间：2013-03-26T09:05:31.030
> 
> 标签：android, svn

如图所示，我已将**google play services lib**作为依赖库添加到我的 Android 项目中。

![在此处输入图像描述](../Images/0017943a596406d4c75b03cf8dff3107.png)

我需要将代码签入到 SVN 。
我还需要签入 google play services 项目吗？
或者有什么办法可以将 google play services 项目与我的 Android 项目一起打包？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:10:46.880

应该`Google Play Services`用作. `Android Library Project`所以你不应该以任何方式包装它。通常我不喜欢在 中提交外部库`versioning control system`，我更喜欢让每个人在本地克隆和导入库项目。您可以将库项目添加到不同的文件夹中，如果您觉得更方便，可以将其提交到源代码管理中。

另一种选择是`Maven`用于依赖管理。

# c# - C#/Winforms：始终保持表单可聚焦

> ID：15633045
> 
> 赞同：2
> 
> 时间：2013-03-26T09:05:34.530
> 
> 标签：c#, winforms, focus, .net-2.0

我想在我的应用程序中实现一个帮助表单，*即使*显示了一个对话框，它也可以获得焦点。目前，如果无法集中注意力，我会处理我的帮助的实际实例，但我认为那不是正确的方法。所以我想问一下，是否可以选择显示表单，与我的主应用程序的逻辑分开。

我尝试过的事情：

*   作为 AppDomain 调用 ( [MSDN](http://msdn.microsoft.com/en-US/library/ms173139%28v=vs.80%29.aspx) )
*   将帮助放入单独的应用程序并将其作为一个过程调用

在这两种方式中，当调用对话框时，帮助（-form）都无法获得焦点。

我不想使用 C# 提供的帮助，因为我需要在应用程序中显示帮助（-pages）。

谢谢

PS：我正在使用.Net 2.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:36:22.790

您可以通过创建一个 STA 线程并使用`Application.Run()`来显示来自该单独线程的表单来做到这一点。`Application.Run()`将为其他表单创建一个单独的*消息泵*；这就是让它分开的原因。

如果这样做，则在表单之间进行通信时必须非常小心。您将需要使用`Control.Invoke()`或其他一些线程间机制来从第一个表单调用第二个表单上的 UI 更改方法（反之亦然）。

但是如果你这样做，那么第一个表单可以显示一个模态对话框，而第二个表单仍然是可聚焦的。

请注意，第二个窗口可能在第一个窗口之后，因为无法指定它们之间的相对 Z 顺序。

显示第二种形式可以这样完成：

```
private static void ShowIndependentForm()
{
    Thread thread = new Thread(ShowIndependentFormImpl);
    thread.SetApartmentState(ApartmentState.STA);
    thread.IsBackground = true;
    thread.Start();
}

private static void ShowIndependentFormImpl()
{
    Application.Run(new Form2());
} 
```

您可以在适当的地方调用 ShowIndependentForm() ；可能在您创建它之后来自主窗体，但我的测试代码`Main()`如下所示：

```
[STAThread]
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    ShowIndependentForm();
    Application.Run(new Form1());
} 
```

**重要的**

因为第二个表单有自己的消息泵，所以关闭第一个表单不会关闭程序，除非您设置`Thread.IsBackground`为 true。如果不这样做，`Control.Invoke()`如果您希望程序自动关闭，则必须在第一个表单关闭时显式关闭第二个表单（通过使用或其他方式调用第二个表单中的方法）。

# websocket - 在 HAproxy 中，我的 websocket 连接在 50 秒后关闭。如何改变它？

> ID：15633046
> 
> 赞同：5
> 
> 时间：2013-03-26T09:05:35.623
> 
> 标签：websocket, tornado, haproxy

我正在将 Haproxy 与龙卷风一起用于 websocket。如果我直接连接到龙卷风，我的连接工作正常，但如果我使用具有以下配置的 HAproxy，则连接在 50 秒后关闭。我的 Haproxy 配置文件如下。

```
global
        daemon
        maxconn 4032
        pidfile /var/run/haproxy.pid

    defaults
        mode http
        timeout connect 5000ms
        timeout client 50000ms
        timeout server 50000ms
        option  http-server-close
        maxconn 4032

    frontend http-in
        bind *:80
        acl is_websocket hdr_end(host) -i WebSocket
        use_backend servers if is_websocket
        default_backend servers
        option  redispatch
        option  http-server-close
        maxconn  2000
        contimeout  500000
        clitimeout  500000
        srvtimeout  500000
        contimeout  500000        
        timeout contimeout  500000 
        timeout connect  500000

    backend servers
        server server1 127.0.0.1:8886 maxconn 4032 
```

现在通过使用上面的配置，我的 websocket 连接在 50 秒后自动丢失。我想做持久连接，那么有什么方法可以使 HAproxy 中的连接持久化？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-09-19T07:26:58.690

> 我在默认部分更改了超时连接 0 毫秒、客户端超时 0 毫秒、服务器超时 0 毫秒，然后我的连接是持久连接，因为如果我给出值 0，那么它将是无限连接超时值。

您不应该这样做，因为这些选项也适用于通常的 HTTP 流量。将超时连接/客户端/服务器设置为适当的值并`timeout tunnel`用于 websockets。

> 当客户端和服务器之间建立了双向连接并且连接在两个方向上都保持非活动状态时，将应用隧道超时。一旦连接成为隧道，此超时将取代客户端和服务器超时。

（见：[http](http://cbonte.github.io/haproxy-dconv/configuration-1.5.html#timeout%20tunnel) ://cbonte.github.io/haproxy-dconv/configuration-1.5.html#timeout%20tunnel ）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:45:00.400

我找到了答案，

`timeout connect 0ms, timeout client 0ms, timeout server 0ms`我在部分进行了更改，`defaults`然后我的连接是持久连接，因为如果我给值 0 那么它将是无限连接超时值。

我的最终工作配置如下，

```
global
        daemon
        maxconn 4032
        pidfile /var/run/haproxy.pid

    defaults
        mode http
        timeout connect 0ms
        timeout client 0ms
        timeout server 0ms
        option  http-server-close
        maxconn 4032

    frontend http-in
        bind *:80
        acl is_websocket hdr_end(host) -i WebSocket
        use_backend servers if is_websocket
        default_backend servers
        option  redispatch
        option  http-server-close
        maxconn  2000
        contimeout  500000
        clitimeout  500000
        srvtimeout  500000
        contimeout  500000        
        timeout contimeout  500000 
        timeout connect  500000
        timeout client  500000

    backend servers
        server server1 127.0.0.1:8886 maxconn 4032 
```

# jquery - 将文本字符串和变量传递给 href 选择器

> ID：15633047
> 
> 赞同：0
> 
> 时间：2013-03-26T09:05:38.360
> 
> 标签：jquery

我需要将一个字符串和一个变量作为选择器传递给 href 属性，但我似乎无法获得正确的语法。有人可以帮忙吗？

我目前有一个变量“画廊”，我需要传递如下内容：

```
$('#work_gallery li a[href="http://www.ddbremedy.co.uk/siteupdate/" + gallery + ]'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:06:52.707

将选择器切换为使用双引号，以便您可以在属性选择器中使用单引号。

```
$("#work_gallery li a[href='http://www.ddbremedy.co.uk/siteupdate/" + gallery + "']"); 
```

除非您有多个链接指向同一页面，否则选择器的第一部分`#work_gallery li`可能是不必要的。如果此链接仅在页面上出现一次，请使用：

```
 $("a[href='http://www.ddbremedy.co.uk/siteupdate/" + gallery + "']"); 
```

**工作示例：http:** [//jsfiddle.net/jFYGM/](http://jsfiddle.net/jFYGM/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:07:00.867

像这样——

```
$('#work_gallery li a[href="http://www.ddbremedy.co.uk/siteupdate/' + gallery + '"]'); 
```

# php - 使用 php 计划任务从 mssql 中提取

> ID：15633050
> 
> 赞同：0
> 
> 时间：2013-03-26T09:05:43.500
> 
> 标签：php, sql-server, batch-file, scheduled-tasks

我需要每分钟执行一个从 MS Server 执行数据提取的计划任务。然而尝试使用 bat 脚本 php，会导致无法识别 sqlsrv 函数的错误

这是bat文件的内容：

```
cd C:\wamp\bin\php\php5.3.13
PHP C:\wamp\www\bin\Scripts\MinutelyScript.php 
```

`MinutelyScript.php`如果从服务器执行，该文件可以正常工作。请帮我 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:13:41.563

将此添加到您的批处理文件中

```
//path to your website
cd \wamp\www\yourwebsite

c:\wamp\bin\php\php5.3.5\php-cgi.exe -c  c:\wamp\bin\php\php5.3.5\php.ini -f cronfile.php 
```

“cronfile.php”如果文件在根文件夹如果它是内部文件夹给出从根文件夹的路径

# c# - 在 C# 中的 Dynamic Linq 中使用“包含”关键字查询数据

> ID：15633066
> 
> 赞同：14
> 
> 时间：2013-03-26T09:07:02.347
> 
> 标签：c#, linq, dynamic

在 C# 的动态 linq 中执行具有“包含”关键字的查询时，我遇到了一些问题。我收到以下错误

“Int32”类型中不存在任何属性或字段

我的代码如下：

如果我对数据类型字符串字段使用“包含”关键字，那么它可以正常工作，如下所示

```
string[] CandidateNamesArray = new string[]{"Ram", "Venkat", "Micheal"}
var dynamicLinqQuery = Candidates.Where("CandidateName.Contains(@0)", CandidateNamesArray ); 
```

*   工作正常

但是，如果我对数据类型 int 字段使用“包含”关键字，则会引发如下异常

```
int[] CandidateIdsArray = new int[]{4, 78, 101}
var dynamicLinqQuery = Candidates.Where("CandidateId.Contains(@0)", CandidateIdsArray); 
```

> 运行时异常 - “'Int32' 类型中不存在适用的方法 'Contains'”

还尝试了以下另一种方式

```
int[] CandidateIdsArray = new int[]{4, 78, 101}
var dynamicLinqQuery = Candidates.Where("@0.Contains(CandidateId)", CandidateIdsArray); 
```

> 运行时异常 - “'Int32' 类型中不存在属性或字段 'CandidateId'”

我花了将近 2 天的时间来解决上述问题，但未能成功。任何人都可以帮我解决上述问题...在此先感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-09-28T18:20:15.823

我知道你的帖子已经很久了，但我今天遇到了同样的问题。

我`outerIt`在`Contains`.

在您的示例中：

```
int[] CandidateIdsArray = new int[]{4, 78, 101}
var dynamicLinqQuery = Candidates.Where("@0.Contains(outerIt.CandidateId)", CandidateIdsArray); 
```

它对我有用，因为 DynamicLinq 认为 CandidateId 是数组对象的属性。并且使用 outerIt 让它明白了它指的是外部迭代器，也就是候选者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:10:16.787

您可以使用将数组转换为字符串，然后使用 Contains() 将其转换回 int

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T09:15:07.977

我不知道 Dynamic Linq 但对我来说很明显该类型`Int32`不包含任何名为`Contains`. `string`在调用之前将其转换为 a 怎么样`Contains`？

```
var dynamicLinqQuery = Candidates.Where("CandidateId.ToString().Contains(@0)", CandidateIdsArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T09:12:28.947

看起来你正在检查错误的东西。在第一个查询中，您实际上检查字段“CandidateName”是否包含另一个字符串，并且有效。但在第二个示例中，您检查字段“CandidateId”是否包含另一个 int。并且 int 不能包含另一个 int，因此会出现错误。

编辑：

看起来在第三个示例代码中，异常不匹配。`"No property or field 'CandidateId' exists in type 'Int32'"`如果代码是：你会得到异常：

```
int[] CandidateIdsArray = new int[]{4, 78, 101}
var dynamicLinqQuery = 
      CandidateIdsArray.Where("@0.Contains(CandidateId)", CandidateIdsArray); 
```

但是您提供的代码看起来正确并且应该可以工作：

```
int[] CandidateIdsArray = new int[]{4, 78, 101}
var dynamicLinqQuery = 
      Candidates.Where("@0.Contains(CandidateId)", CandidateIdsArray); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-28T18:44:32.163

尝试以下操作：

```
var validCandidateIds = new List<int>(){4, 78, 101};
var filteredCandidates = Candidates.Where(
    "@0.Contains(CandidateId)", validCandidateIds); 
```

应该等于（但可能慢于）：

```
var validCandidateIds = new List<int>(){4, 78, 101};
var filteredCandidates = Candidates.Where(
    c => validCandidateIds.Contains(c.CandidateId)); 
```

# python - 使用 numpy/vtk 进行 3d 图像可视化

> ID：15633067
> 
> 赞同：-1
> 
> 时间：2013-03-26T09:07:10.083
> 
> 标签：python, 3d, visualization

我正在尝试使用 numpy/vtk 显示更多图像（ct-scan），如本示例代码（[http://www.vtk.org/Wiki/VTK/Examples/Python/vtkWithNumpy](http://www.vtk.org/Wiki/VTK/Examples/Python/vtkWithNumpy)）中所述，但我不明白它，不知道为什么。如果有人可以帮助我，那就太好了。

这是我的代码：

```
import vtk
import numpy as np
import os
import cv, cv2
import matplotlib.pyplot as plt
import PIL
import Image

DEBUG =True
directory="splitted_mri/"
w = 226
h = 186
d = 27
stack = np.zeros((w,d,h))

k=-1 #add the next picture in a differente level of depth/z-positions
for file in os.listdir(directory):
    k+=1
    img = directory + file
    im = Image.open(img)
    temp = np.asarray(im, dtype=int)
    stack[:,k,:]= temp
print stack.shape

#~ plt.imshow(test)
#~ plt.show()

print type(stack[10,10,15])

res = np.amax(stack)
res1 = np.amin(stack)
print res, type(res)
print res1, type(res1)

#~ for (x,y,z), value in np.ndenumerate(stack):
    #~ stack[x,y,z]=np.require(stack[x,y,z],dtype=np.int16)
    #~ print type(stack[x,y,z])

stack = np.require(stack,dtype=np.uint16)
print stack.dtype

if DEBUG : print stack.shape
dataImporter = vtk.vtkImageImport()
data_string = stack.tostring()

dataImporter.CopyImportVoidPointer(data_string, len(data_string))
dataImporter.SetDataScalarTypeToUnsignedChar()
dataImporter.SetNumberOfScalarComponents(1)
dataImporter.SetDataExtent(0, w-1, 0, 1, 0, h-1)
dataImporter.SetWholeExtent(0, w-1, 0, 1, 0, h-1)
essai = raw_input()
alphaChannelFunc = vtk.vtkPiecewiseFunction()
colorFunc = vtk.vtkColorTransferFunction()
for i in range (0,255):
    alphaChannelFunc.AddPoint(i, 0.9)
    colorFunc.AddRGBPoint(i,i,i,i)

volumeProperty = vtk.vtkVolumeProperty()
volumeProperty.SetColor(colorFunc)
#volumeProperty.ShadeOn()
volumeProperty.SetScalarOpacity(alphaChannelFunc)

# This class describes how the volume is rendered (through ray tracing).
compositeFunction = vtk.vtkVolumeRayCastCompositeFunction()
# We can finally create our volume. We also have to specify the data for it, as well as how the data will be rendered.
volumeMapper = vtk.vtkVolumeRayCastMapper()
volumeMapper.SetVolumeRayCastFunction(compositeFunction)
volumeMapper.SetInputConnection(dataImporter.GetOutputPort())

# The class vtkVolume is used to pair the preaviusly declared volume as well as the properties to be used when rendering that volume.
volume = vtk.vtkVolume()
volume.SetMapper(volumeMapper)
volume.SetProperty(volumeProperty)

# With almost everything else ready, its time to initialize the renderer and window, as well as creating a method for exiting the application
renderer = vtk.vtkRenderer()
renderWin = vtk.vtkRenderWindow()
renderWin.AddRenderer(renderer)
renderInteractor = vtk.vtkRenderWindowInteractor()
renderInteractor.SetRenderWindow(renderWin)

# We add the volume to the renderer ...
renderer.AddVolume(volume)
# ... set background color to white ...
renderer.SetBackground(1, 1, 1)
# ... and set window size.
renderWin.SetSize(400, 400)

# A simple function to be called when the user decides to quit the application.
def exitCheck(obj, event):
    if obj.GetEventPending() != 0:
        obj.SetAbortRender(1)

# Tell the application to use the function as an exit check.
renderWin.AddObserver("AbortCheckEvent", exitCheck)

#to quit, press q
renderInteractor.Initialize()
# Because nothing will be rendered without any input, we order the first render manually before control is handed over to the main-loop.
renderWin.Render()
renderInteractor.Start() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:08:31.130

我终于发现出了什么问题，这是我的新代码

```
import vtk
import numpy as np
import os
import matplotlib.pyplot as plt
import PIL
import Image

DEBUG =False
directory="splitted_mri/"

l = []

k=0 #add the next picture in a differente level of depth/z-positions
for file in os.listdir(directory):
    img = directory + file
    if DEBUG : print img
    l.append(img)
# the os.listdir function do not give the files in the right order 
#so we need to sort them
l=sorted(l)

temp = Image.open(l[0])
h, w = temp.size
d = len(l)*5 #with our sample each images will be displayed 5times to get a better view
if DEBUG : print 'width, height, depth : ',w,h,d

stack = np.zeros((w,d,h),dtype=np.uint8)

for i in l:
    im = Image.open(i)
    temp = np.asarray(im, dtype=int)
    for i in range(5):
        stack[:,k+i,:]= temp
    k+=5
    #~ stack[:,k,:]= temp
    #~ k+=1

if DEBUG :
    res = np.amax(stack)
    print 'max value',res
    res1 = np.amin(stack)
print 'min value',res1

#convert the stack in the right dtype
stack = np.require(stack,dtype=np.uint8)

if DEBUG :#check if the image have not been modified
test = stack [:,0,:]
plt.imshow(test,cmap='gray')
plt.show()

if DEBUG : print 'stack shape & dtype' ,stack.shape,',',stack.dtype

dataImporter = vtk.vtkImageImport()
data_string = stack.tostring()

dataImporter.CopyImportVoidPointer(data_string, len(data_string))
dataImporter.SetDataScalarTypeToUnsignedChar()
dataImporter.SetNumberOfScalarComponents(1)

#vtk uses an array in the order : height, depth, width which is 
#different of numpy (w,h,d) 
w, d, h = stack.shape
dataImporter.SetDataExtent(0, h-1, 0, d-1, 0, w-1)
dataImporter.SetWholeExtent(0, h-1, 0, d-1, 0, w-1)

alphaChannelFunc = vtk.vtkPiecewiseFunction()
colorFunc = vtk.vtkColorTransferFunction()
for i in range(256):
    alphaChannelFunc.AddPoint(i, 0.2)
    colorFunc.AddRGBPoint(i,i/255.0,i/255.0,i/255.0)
# for our test sample, we set the black opacity to 0 (transparent) so as
#to see the sample  
alphaChannelFunc.AddPoint(0, 0.0)
colorFunc.AddRGBPoint(0,0,0,0)

volumeProperty = vtk.vtkVolumeProperty()
volumeProperty.SetColor(colorFunc)
#volumeProperty.ShadeOn()
volumeProperty.SetScalarOpacity(alphaChannelFunc)

# This class describes how the volume is rendered (through ray tracing).
compositeFunction = vtk.vtkVolumeRayCastCompositeFunction()
# We can finally create our volume. We also have to specify the data for
# it, as well as how the data will be rendered.
volumeMapper = vtk.vtkVolumeRayCastMapper()
# function to reduce the spacing between each image
volumeMapper.SetMaximumImageSampleDistance(0.01)

volumeMapper.SetVolumeRayCastFunction(compositeFunction)
volumeMapper.SetInputConnection(dataImporter.GetOutputPort())

# The class vtkVolume is used to pair the preaviusly declared volume as 
#well as the properties to be used when rendering that volume.
volume = vtk.vtkVolume()
volume.SetMapper(volumeMapper)
volume.SetProperty(volumeProperty)

# With almost everything else ready, its time to initialize the renderer and window,
# as well as creating a method for exiting the application
renderer = vtk.vtkRenderer()
renderWin = vtk.vtkRenderWindow()
renderWin.AddRenderer(renderer)
renderInteractor = vtk.vtkRenderWindowInteractor()
renderInteractor.SetRenderWindow(renderWin)

# We add the volume to the renderer ...
renderer.AddVolume(volume)
# ... set background color to white ...
renderer.SetBackground(1, 1, 1)
# ... and set window size.
renderWin.SetSize(550, 550)
renderWin.SetMultiSamples(4)
# A simple function to be called when the user decides to quit the application.
def exitCheck(obj, event):
    if obj.GetEventPending() != 0:
        obj.SetAbortRender(1)

# Tell the application to use the function as an exit check.
renderWin.AddObserver("AbortCheckEvent", exitCheck)

#to auit, press q
renderInteractor.Initialize()
# Because nothing will be rendered without any input, we order the first
# render manually before control is handed over to the main-loop.
renderWin.Render()
renderInteractor.Start() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-15T21:17:42.753

如果您对不使用 VTK 的解决方案感到满意，您可以使用 Matplotlib imshow 和带键的交互式导航。

本教程展示了如何： [https://www.datacamp.com/community/tutorials/matplotlib-3d-volumetric-data](https://www.datacamp.com/community/tutorials/matplotlib-3d-volumetric-data) [https://github.com/jni/mpl-volume-viewer](https://github.com/jni/mpl-volume-viewer)

这里是查看 RTdose 文件的实现： [https ://github.com/pydicom/contrib-pydicom/pull/19](https://github.com/pydicom/contrib-pydicom/pull/19)

另见： [https ://github.com/napari/napari](https://github.com/napari/napari)

# python - task_revoked 处理程序中的芹菜任务 ID

> ID：15633073
> 
> 赞同：3
> 
> 时间：2013-03-26T09:07:32.437
> 
> 标签：python, django, celery, djcelery

所以我有一个创建工作目录并在那里完成所有工作的任务。**该任务从服务器 A**调用并在**工作服务器**上执行。

**一旦任务完成/取消**，我需要确保删除工作目录。

我添加了一个任务撤销处理程序，它看起来像这样：

```
@task
def my_task(value):

    task_id  = current_task.request.id
    work_dir = os.path.join(BASE_WORK_DIR, task_id)
    os.makedirs(work_dir)

    try:
        # Do work...
    finally:
        shutil.rmtree(work_dir)

@task_revoked.connect(sender=my_task)
def my_task_revoked_handler(*args, **kwargs):
    # FIXME: delete work_dir

    print args
    # ()

    print kwargs
    # {'terminated': True, 'signal': <Signal: Signal>, 'expired': False, 'sender': <@task: myapp.core.tasks.my_task>, 'signum': '15'} 
```

我的问题是当**服务器 A**取消任务时，我无法在撤销的处理程序中清理工作目录，因为它没有 task_id。

**有没有办法从这个特定的信号处理程序中获取任务 ID？** 其他一些[信号](http://docs.celeryproject.org/en/latest/userguide/signals.html#task-signals)也有它们，我查看了这些信号的发布源，由于某种原因，这个信号没有提供 task_id。

提供的`sender`任务包含一个 trace_task 函数：`{'__trace__': <function trace_task at 0x3ee8230>}`但我看不到如何使用它，因为该函数本身需要一个 task_id。

欢迎任何其他想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T12:51:10.600

我认为这里发生的事情是您使用的是旧版本的 celery，它不支持第一个“请求”参数。

添加此内容的上游问题是 [1]；在此之前，我认为你运气不好，不幸的是没有办法获得 task_id。

[1] [https://github.com/celery/celery/issues/1555](https://github.com/celery/celery/issues/1555)

# php - 附加使用 TCPDF 生成的 pdf，使用邮件 PHP 功能发送邮件

> ID：15633079
> 
> 赞同：0
> 
> 时间：2013-03-26T09:07:46.180
> 
> 标签：php, attachment, tcpdf, email-attachments

我想使用邮件 Php 功能发送由 TCPDF 生成的 pdf。

如果我发送这样的简单邮件： mail('xxx@ne.es', 'My Subject', $message);

pdf生成得很好，但是当我想在标题中附加pdf时不起作用。

这是我的代码：

```
$pdfdoc=$pdf->Output('file.pdf', 'S');

 $separator = md5(time());

        $eol = PHP_EOL;
// Send
        $filename = "_Desiredfilename.pdf";

        // encode data (puts attachment in proper format)

        $attachment = chunk_split(base64_encode($pdfdoc));

        ///////////HEADERS INFORMATION////////////
        // main header (multipart mandatory) message
        $headers  = "From: Sender_Name<sender@domain.com>".$eol;
        $headers .= "Bcc: email@domain.com".$eol;
        $headers .= "MIME-Version: 1.0".$eol;
        $headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"".$eol.$eol;
        $headers .= "Content-Transfer-Encoding: 7bit".$eol;
        $headers .= "This is a MIME encoded message.".$eol.$eol;

        // message
        $headers .= "--".$separator.$eol;
        $headers .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
        $headers .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
        $headers .= $message.$eol.$eol;

        // attachment
        $headers .= "--".$separator.$eol;
        $headers .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol;
        $headers .= "Content-Transfer-Encoding: base64".$eol;
        $headers .= "Content-Disposition: attachment".$eol.$eol;
        $headers .= $attachment.$eol.$eol;
        $headers .= "--".$separator."--";

        //Email message
        mail('xxx@gmail.com', 'prova', 'hola', $headers); 
```

什么时候出问题？

谢谢

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:30:20.720

我希望这也对你有用。我已经检查过了，它运作良好。请尝试一下。在此之前，请检查邮件的“php.ini”并检查 pdf 文件是否已创建。

```
$pdfdoc=$pdf->Output('file.pdf', 'F');

        // Send
        $files = "file.pdf";

        ///////////HEADERS INFORMATION////////////
        // boundary
        $semi_rand = md5(time());
        $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

        // headers for attachment
        $headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\"";

         // multipart boundary
        $message = "--{$mime_boundary}\n" . "Content-Type: text/plain; charset=\"iso-8859-1\"\n" .
        "Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n";

        // preparing attachments
        $message .= "--{$mime_boundary}\n";
            $fp     = @fopen($files,"rb");
            $data   = @fread($fp,filesize($files));
                    @fclose($fp);
            $data = chunk_split(base64_encode($data));
            $message .= "Content-Type: application/octet-stream; name=\"".basename($files)."\"\n" .
            "Content-Description: ".basename($files)."\n" .
            "Content-Disposition: attachment;\n" . " filename=\"".basename($files)."\"; size=".filesize($files).";\n" .
            "Content-Transfer-Encoding: base64\n\n" . $data . "\n\n";
        $message .= "--{$mime_boundary}--";

        //Email message
        mail('xxx@gmail.com', 'prova', 'hola', $headers); 
```

或者在你的代码中包含这个函数，使用这个函数来发送多附件文件。这个效果很好。请试试这个。

```
/* 
     * Function Name: sentMail
     * Scope        : Sent Mail Function with CC , BCC and Attachment files..
     * Input        : Recipient Name            => $recipientName   // (Required)
     *                Recipient MailId(Many)    => $recipientMailId // (Required & Array Format)
     *                Subject Content           => $subjectContent  // (Required)
     *                Message Content           => $messageContent  // (Required)
     *                Sender MailId             => $senderMailId    // (Required)
     *                Sender Name(Many)         => $senderName      // (Required)
     *                Recipient CC MailId       => $recipientCCMailId   //(Optional & Array Format)
     *                Recipient BCC MailId      => $recipientBCCMailId  //(Optional & Array Format)
     *                Attachment Files          => $attachmentFiles     //(Optional & Array Format)
     * Output       : Sent mail to the Recipient.
     */
    public function sentMail($recipientName,$recipientMailId,$subjectContent,$messageContent,$senderName,$senderMailId,$recipientCCMailId,$recipientBCCMailId,$attachmentFiles)
    {
        try 
        {
            /*Get the Mulitple Recipient CC MailId*/
            if(isset($recipientCCMailId)){
                if(count($recipientCCMailId)>1){
                    $recipientCCMailId = implode(',',$recipientCCMailId);
                }
                else{
                    $recipientCCMailId = $recipientCCMailId[0];
                }
            }

            /*Get the Mulitple Recipient BCC MailId*/
            if(isset($recipientBCCMailId)){
                if(count($recipientBCCMailId)>1){
                    $recipientBCCMailId = implode(',',$recipientBCCMailId);
                }
                else{
                    $recipientBCCMailId = $recipientBCCMailId[0];
                }
            }

            /*** Mail Contents Starts ***/
                $subj = $subjectContent;
                $msg ="";

                /*Get the Mulitple Recipient BCC MailId*/
                if(count($recipientMailId)>1){
                    $recipientMailId = implode(',',$recipientMailId);
                    $msg .="Dear, <b>All</b>\r <br>";
                }
                else{
                    $recipientMailId = $recipientMailId[0];
                    $msg .="Dear, <b>".ucwords($user_name)."</b> \r <br>";
                }
                $msg .=$messageContent."\r <br><br>";
                $msg .="Thank you"."\r\n\n <br>";
                $msg .=$senderName."\r\n\n <br><br>";

                $headers ="";

                /** Get the Mulitple Attachment files and Attachment Process Starts **/
                if(isset($attachmentFiles)){
                    $headers .= "From: ".$senderMailId."\r\n";
                    $headers .= "Cc: ".$recipientCCMailId."\r\n";
                    $headers .= "Bcc: ".$recipientBCCMailId."\r\n";
                    // boundary
                    $semi_rand = md5(time());
                    $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

                    // headers for attachment
                    $headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\"";
                     // multipart boundary
                    $msg .= "--{$mime_boundary}\n" . "Content-Type: text/plain; charset=\"iso-8859-1\"\n" .
                    "Content-Transfer-Encoding: 7bit\n\n" . $msg . "\n\n";

                    // preparing attachments
                    for($i=0;$i<count($attachmentFiles);$i++)
                    {
                        if(is_file($attachmentFiles[$i]))
                        { 
                            $msg .= "--{$mime_boundary}\n";
                            $fp     = @fopen($attachmentFiles[$i],"rb");
                            $data   = @fread($fp,filesize($attachmentFiles[$i]));
                                      @fclose($fp);
                            $data   = chunk_split(base64_encode($data));
                            $msg .= "Content-Type: application/octet-stream; name=\"".basename($attachmentFiles[$i])."\"\n" .
                            "Content-Description: ".basename($attachmentFiles[$i])."\n" .
                            "Content-Disposition: attachment;\n" . " filename=\"".basename($attachmentFiles[$i])."\"; size=".filesize($attachmentFiles[$i]).";\n" .
                            "Content-Transfer-Encoding: base64\n\n" . $data . "\n\n";
                        }
                     }
                    $msg .= "--{$mime_boundary}--";
                }
                /** Attachment Process Ends **/
                else{
                    $headers .= "MIME-Version: 1.0" . "\r\n";
                    $headers .= "Content-type:text/html;charset=utf-8" . "\r\n";
                    //$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
                    $headers .= "From: ".$senderMailId."\r\n";
                    $headers .= "Cc: ".$recipientCCMailId."\r\n";
                    $headers .= "Bcc: ".$recipientBCCMailId."\r\n";
                }
            /*** Mail Contents Ends ***/    
            $sent_mail=mail($recipientMailId,$subj,$msg,$headers); 
            if($sent_mail)
            {
                return true;
            }
            else
            {
                return false;
            }
        }
        catch (Exception $e)
        {
            getConnection('close');
            echo "Caught Exception:",$e->getMessage();
        } 
    } 
```

并且您通过此参数将其编辑为函数 DTD 中指定的格式。

```
sentMail($recipientName,$recipientMailId,$subjectContent,$messageContent,$senderName,$senderMailId,$recipientCCMailId,$recipientBCCMailId,$attachmentFiles); 
```

这里，

```
$recipientName = "sam";
$recipientMailId = array("xxx@gmail.com");
$subjectContent = "this is sample pdf attachment over email";
$messageContent = "this is sample pdf attachment over email";
$senderMailId   = "sender@gmail.com"
$senderName     = "sender";
$recipientCCMailId = array("xxx@gmail.com");
$recipientBCCMailId = array("xxx@gmail.com");
$attachmentFiles = array("filename.pdf");

sentMail($recipientName,$recipientMailId,$subjectContent,$messageContent,$senderName,$senderMailId,$recipientCCMailId,$recipientBCCMailId,$attachmentFiles); 
```

# file-upload - 从 MVC 将带有附加表单数据的文件上传到 Web Api

> ID：15633081
> 
> 赞同：7
> 
> 时间：2013-03-26T09:07:55.267
> 
> 标签：file-upload, asp.net-mvc-4, asp.net-web-api, multipartform-data

我正在尝试上传带有其他表单数据的文件并通过 MVC 发布到 Web API，但我无法完成。

**MVC 端**

首先，我在 MVC 获得了提交的表单。这是针对此的操作。

```
 [HttpPost]
            public async Task<ActionResult> Edit(BrandInfo entity) {

                try {
                    byte[] logoData = null;
                    if(Request.Files.Count > 0) {
                        HttpPostedFileBase logo = Request.Files[0];
                        logoData = new byte[logo.ContentLength];
                        logo.InputStream.Read(logoData, 0, logo.ContentLength);
                        entity.Logo = logo.FileName;
                        entity = await _repo.Update(entity.BrandID, entity, logoData);
                    }
                    else
                        entity = await _repo.Update(entity,entity.BrandID);
                    return RedirectToAction("Index", "Brand");
                }
                catch(HttpApiRequestException e) {
// logging, etc                   
                    return RedirectToAction("Index", "Brand");
                }
            } 
```

下面的代码将 Multipartform 发布到 Web API

```
string requestUri = UriUtil.BuildRequestUri(_baseUri, uriTemplate, uriParameters: uriParameters);
            MultipartFormDataContent formData = new MultipartFormDataContent();
            StreamContent streamContent = null;
            streamContent = new StreamContent(new MemoryStream(byteData));            
            streamContent.Headers.ContentDisposition = new ContentDispositionHeaderValue("form-data") {
                FileName = "\"" + fileName + "\"",
                Name = "\"filename\""
            };
            streamContent.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
            formData.Add(streamContent);
            formData.Add(new ObjectContent<TRequestModel>(requestModel, _writerMediaTypeFormatter), "entity");
            return _httpClient.PutAsync(requestUri, formData).GetHttpApiResponseAsync<TResult>(_formatters); 
```

如您所见，我正在尝试使用相同的文件数据和对象发送`MultipartFormDataContent`。我找不到更好的方式将我的实体发送为`ObjectContent`. 我也在使用 JSON.Net Serializer

关于提琴手，帖子似乎很成功。

```
PUT http://localhost:12836/api/brand/updatewithlogo/13 HTTP/1.1
Content-Type: multipart/form-data; boundary="10255239-d2a3-449d-8fad-2f31b1d00d2a"
Host: localhost:12836
Content-Length: 4341
Expect: 100-continue

--10255239-d2a3-449d-8fad-2f31b1d00d2a
Content-Disposition: form-data; filename="web-host-logo.gif"; name="filename"
Content-Type: application/octet-stream

GIF89a��L������X�������wW����������xH�U�)�-�k6�������v6�������̥�v�J���������7����V:�=#�ի�I(�xf�$�������
// byte data
// byte data
'pf�Y��y�ؙ�ڹ�(�;
--10255239-d2a3-449d-8fad-2f31b1d00d2a
Content-Type: application/json; charset=utf-8
Content-Disposition: form-data; name=entity

{"BrandID":13,"AssetType":null,"AssetTypeID":2,"Logo":"web-host-logo.gif","Name":"Geçici Brand","Models":null,"SupplierBrands":null}
--10255239-d2a3-449d-8fad-2f31b1d00d2a-- 
```

**Web API 端**

最后，我在 Web API 端捕捉帖子并尝试解析，但我做不到。因为`MultipartFormDataStreamProvider`'s`FileData`和`FormData`集合总是空的。

```
[HttpPut]
        public void UpdateWithLogo(int id) {
            if(Request.Content.IsMimeMultipartContent()) {
                var x = 1; // this code has no sense, only here to check IsMimeMultipartContent
            }  

            string root = HttpContext.Current.Server.MapPath("~/App_Data");
            var provider = new MultipartFormDataStreamProvider(root);

            try {
                // Read the form data.
                 Request.Content.ReadAsMultipartAsync(provider);

                 foreach(var key in provider.FormData.AllKeys) {
                     foreach(var val in provider.FormData.GetValues(key)) {
                         _logger.Info(string.Format("{0}: {1}", key, val));
                     }
                 }

                // This illustrates how to get the file names.
                foreach(MultipartFileData file in provider.FileData) {
                    _logger.Info(file.Headers.ContentDisposition.FileName);
                    _logger.Info("Server file path: " + file.LocalFileName);
                }               
            }
            catch(Exception e) {
                throw new HttpApiRequestException("Error", HttpStatusCode.InternalServerError, null);
            }              
        } 
```

我希望你能帮助找出我的错误。

**更新**

我还意识到，如果我注释掉`StreamContent`或`ObjectContent`仅添加 StringContent，我仍然无法从`MultipartFormDataStreamProvider`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T15:45:23.280

最后我解决了我的问题，一切都与**异步**有关：）

正如您在 API 操作方法中看到的那样，我同步调用了`ReadAsMultipartAsync`方法，但这是一个错误。`ContinueWith`在我改变了我的代码之后，我不得不调用它，所以我的问题解决了。

```
var files = Request.Content.ReadAsMultipartAsync(provider).ContinueWith<HttpResponseMessage>(task => {
                    if(task.IsFaulted)
                        throw task.Exception;
// do additional stuff
}); 
```

# qt - 临时阻塞两个 QObject 之间的信号

> ID：15633086
> 
> 赞同：5
> 
> 时间：2013-03-26T09:08:10.277
> 
> 标签：qt, signals, qobject, slot

我想在`QObjects`不修改其他信号/插槽行为并且不知道它们的上下文的情况下，一般性地和暂时地阻止两个信号之间的信号。

像[QObject::blockSignals(bool) 之](http://qt-project.org/doc/qt-4.8/qobject.html#blockSignals)类的东西，但只在两个之间起作用`QObjects`。

即实现如下`SignalBlocker::blockSignals(bool)`功能：

```
class SignalBlocker {

public:
  SignalBlocker(QObject *sender, QObject *receiver) :
    mSender(sender), mReceiver(receiver) {}
  void blockSignals(bool block);

private:
  QObject *mSender, *mReceiver;
} 
```

可以通过断开和重新连接对象来实现，但首先必须存储信号/插槽列表。内省方法似乎不足以实现这一目标（我看过`QMetaObject`但`QSignalSpy`没有成功）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-22T12:28:55.763

QT 无法仅禁用信号槽对。试试这个解决方法：

```
struct SignalDisabler
{
    SignalDisabler(const QObject *sender, const char *signal, const QObject *receiver, const char *member)
        : sender(sender)
        , signal(signal)
        , receiver(receiver)
        , member(member)
    {
        QObject::disconnect(sender, signal, receiver, member);
    }

    ~SignalDisabler()
    {
        QObject::connect(sender, signal, receiver, member);
    }

    const QObject *sender;
    const char *signal;
    const QObject *receiver;
    const char *member;
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T16:32:49.580

since you want that the sender and the reciever will not send signals within that scope, i would just try to use `blockSignals(bool)`

```
class SignalBlocker{
public:
SignalBlocker(QObject* obj)
{
   _o = obj;
   _o->blockSignals(true);
}
~SignalBlocker()
{
   _o->blockSignals(false);
}
private:
   QObject* _o;
}; 
```

and now just use

```
SignalBlocker sb1(sender);
SignalBlocker sb2(reciever);
//... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:16:18.460

您可以使用`disconnect(sender, 0, receiver, 0);`断开所有`sender`的信号与所有`receiver`插槽的连接。

# java - 适用于 Java 的 FIPS 兼容 SSH 库

> ID：15633088
> 
> 赞同：5
> 
> 时间：2013-03-26T09:08:13.893
> 
> 标签：java, ssh, scp, fips, nss

我想在我的 Java 应用程序中实现 SCP（安全复制）功能，以将文件从 SSH 服务器复制到另一台机器。我的 java 应用程序必须符合 FIPS，因此它使用 SunPKCS11 提供程序与底层 NSS 密钥数据库进行交互。

要实现 SCP 功能，我们可以使用以下任何用于 Java 的 SSH 库：

*   JSch
*   vngx-jsch
*   Apache MINA SSHD
*   Ganymed SSH-2
*   sshj
*   SSH工具

我对这些 SSH 库有以下疑问：

1.  上述任何库是否经过 FIPS 认证？
2.  如果未通过 FIPS 认证，使用的算法（密码、密钥交换、MAC 等）是否符合 FIPS？
3.  是否还有其他适用于 Java 的 FIPS 认证/兼容 SSH 库？

以下链接似乎表明 JSch 不符合 FIPS：

*   [http://www.mail-archive.com/jsch-users@lists.sourceforge.net/msg00554.html](http://www.mail-archive.com/jsch-users@lists.sourceforge.net/msg00554.html)
*   [http://planetjava.org/java-jsch/2012-05/msg00019.html](http://planetjava.org/java-jsch/2012-05/msg00019.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T01:20:46.337

Please consider using JSCAPE's [Secure iNet Factory](http://www.jscape.com/products/components/java/secure-inet-factory/). Documentation can be located [here](http://files.jscape.com/secureinetfactory/docs/html/index.html?overview7_2.html).

# symfony - symfony2.0.0 在 security.yml 中获取语言环境

> ID：15633094
> 
> 赞同：3
> 
> 时间：2013-03-26T09:08:28.027
> 
> 标签：symfony, symfony-2.0

我正在使用 symfony2.0.0。我没有机会更新 symfony。这是我的 security.yml

```
防火墙：
        主要的：
          注销：真
          图案： 。*
          http_basic: 真
          匿名：真实
          表单登录：
            提供者：fos_userbundle
            登录路径：/登录
            使用转发：真
            check_path: /login_check
            失败路径：/login_fail
          记得我：
            键：“lkjxd%34(lksdf;SDfsf”
            寿命：31536000
            小路： /
            域名：~

```

如何为我的**failure_path**使用语言环境。尝试使用 /%locale%/failure_path 但它总是返回 en（我的默认语言环境）。它不理解路由名称。如果我使用路由的名称，例如**login_fail**它不起作用（像相对路径一样重定向）。

这是我的路线。

```
登录失败：
  模式：/{_locale}/login_fail
  默认值：{ _controller: ContactbeeProfileBundle:Profile:dashboard, _locale: en }

```

有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:32:10.770

在实际处理请求之前编译 DIC 之前加载配置，因为它可以从 访问`Request`，所以**您无法访问配置中的语言环境**。

如果您不介意额外的重定向，您可以在身份验证失败后将用户重定向到正确的路由：

```
namespace Acme\DemoBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;

class SecurityController extends Controller {
    public function failedAction() {
        return $this->redirect($this->generateUrl('login_fail_localized'), [
            'locale' => $this->getRequest()->getLocale()
        ]);
    }
} 
```

设置失败路径以匹配它的路由：

```
# routing.yml
login_fail:
    pattern: /login_fail
        defaults: { _controller: AcmeDemoBundle:Security:failed }

login_fail_localized:
    pattern: /{locale}/login_fail
        defaults: { _controller: ContactbeeProfileBundle:Profile:dashboard } 
```

# iphone - 警告：属性不可用

> ID：15633095
> 
> 赞同：1
> 
> 时间：2013-03-26T09:08:29.603
> 
> 标签：iphone, ios, xcode4.3

有谁知道，如何 **在 6.0 之前的 iOS 版本上从 Xcode 4.3 及更高版本的 Attributed Title中删除此警告**

![在此处输入图像描述](../Images/f616da4b26d5e0413565de3f38794b74.png)

已编辑：如果我将部署目标设置为 6.0，那么我看不到此警告。

**在投反对票之前给出适当的理由。这不是一个有效的问题吗**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:29:57.900

单击您的 xib 文件。在属性上，您将看到以下部分：

![在此处输入图像描述](../Images/f007baea3486f25c1d653f08bf780c57.png)

如果它说“开发”将其更改为 Interface Builder 6.0，您应该不再收到这些警告。

点击此链接了解更多信息[忽略“属性不可用”-Xcode4 中的警告](https://stackoverflow.com/questions/5992079/ignore-attribute-unavailable-warning-in-xcode4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:21:41.557

好吧，如果您的部署目标设置为低于 6.0 的 iOS 版本，您将无法摆脱此警告。要么不使用此属性，要么将部署跟踪切换到 iOS 6.0。

# c# - MySql 在插入期间将参数名称读取为列

> ID：15633098
> 
> 赞同：0
> 
> 时间：2013-03-26T09:08:42.403
> 
> 标签：c#, mysql

这应该很简单。基本上我只是将数据插入表中：

```
string sql = "insert into Files(filename, filedate, filedata, filesize) values(xname, xdate, xdata, xsize);select last_insert_id() as lastid from Files"; 
```

此处指定的值（`xname`、`xdate`等）只是参数，我在执行查询之前设置它们的值。

不幸的是，出了点问题，我收到以下错误：

> “字段列表”中的未知列“xname”

我可以理解，出于某种或其他原因，它正在寻找一个名为“xname”的列，该列显然不存在。我无法理解的是它为什么这样做。

通常我用@ 符号（@name、@date 等）“标记”参数，这通常可以工作，但我正在开发由公司的另一位开发人员编写的系统，我必须遵守约定。

谁能解释我为什么会收到这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:12:31.233

如果 xname、xdate、xdata 和 xsize 是变量，那么您可以执行以下操作：

```
string sql = "insert into Files(filename, filedate, filedata, filesize) values(" +
     xname + ", " + xdate + ", " +
     xdata + ", " + xsize +
     ");select last_insert_id() as lastid from Files"; 
```

# php - 如何在 html 中设置电子邮件模板？

> ID：15633099
> 
> 赞同：0
> 
> 时间：2013-03-26T09:08:44.627
> 
> 标签：php, symfony-1.4, html-email

我需要帮助来创建电子邮件模板。我的电子邮件模板是 HTML。此模板用于发送纯文本。我的电子邮件模板是一个 HTML 表格标签。

```
$mail = new email();
$mail->setMailTemplate('emailVerification',array('email' => $email, 'password' => $password,  ));                                              
$mail->sendMail($request->getParameter('email'),sfConfig::get('app_email_verification_subject')); 
```

如何发送 HTML 电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:29:23.703

这是我的解决方案：

```
$instance = sfContext::getInstance();
sfProjectConfiguration::getActive()->loadHelpers( array("Partial") );
$message = $istanza->getMailer()->compose();
$message->setTo( $emailDest );
$message->setFrom($sender);
ob_start();
include_partial('templateName', array('data' => $dati, 'title' => $title, 'testo' => $testo));
$html = ob_get_contents();
ob_clean();
$message->setBody($html, 'text/html');
$instance->getMailer()->send($message); 
```

当然，在您的全局模板文件夹中，您必须使用您的电子邮件 html 内容创建一个名为“_templateName.php”的文件。

# php - 如何使用 Composer 将 FirePHP 添加到 Zend Framework 2

> ID：15633104
> 
> 赞同：3
> 
> 时间：2013-03-26T09:09:07.210
> 
> 标签：php, zend-framework2, composer-php, firephp

我正在尝试使用 composer 将 FirePHP 添加到我的 Zend Framework 2 项目中，但出现错误。
我的操作系统是 Windows 7。
我尝试了以下方法使其工作：

我在 composer.json 文件中添加了以下代码：

```
"repositories": [{
    "type": "vcs",
    "url": "https://github.com/RobLoach/firephp-core"
}],
"require": {
    "firephp/firephp-core": "dev-master" // Tried also: "firephp/firephp-core": "*"
} 
```

这是我得到的一个错误：

```
[RuntimeException]
Failed to clone http://github.com/RobLoach/firephp-core.git, git was not found, check that it is installed and in your PATH env. 
```

我尝试将以下代码添加到 composer.json，我在[firephp pull request](https://github.com/firephp/firephp-core/pull/6)中找到了这些代码。：

```
"require": {
    "firephp/firephp-core": "*"
} 
```

但它给了我上面发布的同样的错误。作曲家对我来说是全新的。我找不到任何有用的教程，所以我不确定它是如何工作的，但我正在尽我所能熟悉它。
我希望有人能告诉我我做错了什么。
谢谢。

编辑：感谢@Seldaek 的帮助，我让它工作了，但它删除了我的 Zend 库文件夹。
这是来自cmd的日志：

```
E:\xampp\htdocs\ZendSkeleton>php composer.phar update
Loading composer repositories with package information
Updating dependencies (including require-dev)
  - Installing firephp/firephp-core (dev-master f60753a)
    Cloning f60753a8dd7817e4da6bc73e0e717387a9a0866a

  - Removing zendframework/zendframework (2.0.5)
Writing lock file
Generating autoload files 
```

有没有办法停止删除 Zend 文件夹？

这是我完整的 composer.json 文件：

```
{
    "name": "zendframework/skeleton-application",
    "description": "Skeleton Application for ZF2",
    "license": "BSD-3-Clause",
    "keywords": [
        "framework",
        "zf2"
    ],
    "homepage": "http://framework.zend.com/",
    "require": {
        "php": ">=5.3.3",
        "zendframework/zendframework": "2.*"
    },
    "require": {
        "firephp/firephp-core": "dev-master"
    },
    "config": {
        "bin-dir": "E:/xampp/htdocs/ZendSkeleton/"
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T10:03:33.133

问题是该软件包只有一个可用的 dev-master 版本，并且默认情况下与 git 一起安装。如果你的 PATH 中没有可用的 git，你可以运行 composer`--prefer-dist`来强制它从 zip 档案而不是通过 git 安装。类似的事情`composer update --prefer-dist`应该会解决。

更好的解决方法是确保 git 可执行文件可在您的 PATH 环境变量中访问。如果您不知道我在问什么，也许另一种选择是从“Git Bash”外壳而不是 cmd.exe 运行 composer。

# ruby-on-rails - 如何在 actionmailer 中将引用标题添加到电子邮件中？

> ID：15633106
> 
> 赞同：1
> 
> 时间：2013-03-26T09:09:18.850
> 
> 标签：ruby-on-rails, ruby, actionmailer

我尝试使用标题添加它

```
headers "References" => "<message_id>" 
```

但在生成的电子邮件中找不到。此外，我尝试添加 In-Reply-To 标头，但它也没有出现。我正在使用导轨 2.3.8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:27:54.257

尝试这个。

```
class UserMailer < ActionMailer::Base

  def notification(user)
    recipients    user.email
    from          "notifications@example.com"
    headers       {"References" => "<message_id>"}
    # code ...
  end
end 
```

[查看Rails 指南中](http://guides.rubyonrails.org/v2.3.8/action_mailer_basics.html#complete-list-of-action-mailer-user-settable-attributes)的文档，了解如何指定标头的语法。

# google-app-engine - 如何构建云应用程序并保持可移植性不变？

> ID：15633110
> 
> 赞同：0
> 
> 时间：2013-03-26T09:09:31.007
> 
> 标签：google-app-engine, design-patterns, architectural-patterns

[请查看我之前问题](http://bit.ly/16V3O94)的答案和评论，以便更好地了解我的情况。如果我在 AppEngine 上使用 Google DataStore，我的应用程序将紧密耦合，因此可移植性松散。

我正在使用 Android，并将使用将驻留在云中的后端。我需要客户端-云通信。如何构建维护可移植性的应用程序。我应该使用什么设计模式、架构模式？

我应该使用代理模式吗？我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:31:42.323

为了保持我的应用程序的可移植性，我选择了 Restlet，它提供了 Restful web apis，而不是端点。Restlet 将帮助我在服务器和客户端之间进行通信。

此外，它不会让我的应用程序锁定到特定的供应商。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T05:31:47.567

你真的想避免可移植性问题，而是使用谷歌云 sql。如果你使用数据存储，除非它是一个微不足道的结构，如果你使用纯 jpa/jdo，你仍然无法轻松地移植它，因为这些真的不适合 nosql。谷歌已经详细说明了索引等。当然 sql 更昂贵并且有大小限制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:50:24.740

Google AppEngine 为其数据存储区提供基于 JPA 的接口。只要您使用 JPA API 编写代码，就很容易将其移植到其他数据存储区（例如 Hibernate 也实现了 JPA）。

我会确保供应商特定的代码不会渗透到供应商 API 上方的薄层之外。这将确保当我必须转移到不同的供应商时，我确切地知道哪部分代码会受到影响。

# jquery - Jquery - 滑动到带有溢出的div中的某个位置：隐藏

> ID：15633112
> 
> 赞同：6
> 
> 时间：2013-03-26T09:09:38.200
> 
> 标签：jquery, overflow

我在一个 div 中有很多跨度，`overflow:hidden;`因为 div 宽度是固定的，所以起初只有 5 个跨度是可见的。单击按钮时，如何滑动到某个跨度使其可见？

[**现场JSFIDDLE**](http://jsfiddle.net/LdzTH/)

查询

```
$("#gobtn").click(function (e)  {
    $("span.selected").removeClass('selected');
    var s = $('#nr').val();
    $("#c" + s).addClass('selected');
  //$("#c" + s).??? 
}); 
```

HTML

```
<div class='container'>
    <div class='circles'>
        <span id='c1'>1</span>  
        <span id='c2'>2</span>
        <span id='c3'>3</span>
        <span id='c4'>4</span> 
        <span id='c5'>5</span>  
        <span id='c6'>6</span>  
        <span id='c7'>7</span>
        <span id='c8'>8</span> 
        <span id='c9'>9</span>  
        <span id='c10'>10</span> 
    </div>
</div>
<br /><br/>
Go to circle nr. <input id='nr' type="text" /> 
<input type='button' id='gobtn'  value='go!'> 
```

CSS

```
span {
    border: solid 1px Silver;
    height: 14px;
    width: 14px;
    -moz-border-radius: 50%;
    -webkit-border-radius: 50%;
    border-radius: 50%;
    float: left;
    background-color: #fff;
    cursor: pointer;
    font-size:10px;
    text-align:center;
    margin-right:50px;
}
.circles {
    width:9000px;
}
.container {
    width:300px;
    display:block;    
    overflow:hidden;
    border:solid 2px #eee;
    padding:10px;
}
.selected
{
    background-color:Yellow;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T09:34:17.093

`position: relative`在课堂上添加一个`circles`。并使用方法设置`left`属性`animate`。

我做了一个。试试[这个](http://jsfiddle.net/LdzTH/2/)。您可以根据需要进行改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:39:05.640

在函数中为`circles`类的左边距设置动画：`click`

```
$("#gobtn").click(function (e)  {
    $("span.selected").removeClass('selected');
    var s = $('#nr').val();
    $("#c" + s).addClass('selected');

    $(".circles").animate({
        marginLeft: '-' + (parseInt(s-1) * 40) + 'px'
    }, 500);
}); 
```

[http://jsfiddle.net/LdzTH/15/](http://jsfiddle.net/LdzTH/15/)

仍然需要微调以使数字精确到您想要的位置，即应该始终选择在中间。

# xcode - 无法更新 xcode

> ID：15633116
> 
> 赞同：0
> 
> 时间：2013-03-26T09:09:54.873
> 
> 标签：xcode, installation

我试图通过从 mac 开发者主页下载磁盘映像来更新 Xcode。安装后，我尝试将其拖放到应用程序文件夹中。所以用新版本替换旧版本。

我收到以下错误：“操作无法完成，因为必须跳过某些项目。转到文件> 获取每个文件的信息，确保未选中“锁定”复选框，然后查看共享和权限下。当您确定对象未锁定且未标记为“只读”或“不可访问”重试。”

这就是 xcode 的“ls -l”向我展示的内容：

drwxrwxrwx 3 根轮 102 2012 年 8 月 19 日 Xcode.app

我试图 chown 应用程序。但失败了，这似乎不是合适的做法。有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:30:37.647

当您尝试安装 XCode 时，安装失败。现在你被卡住了，因为你的机器上既没有运行旧版本也没有运行新版本。

**手动删除所有与 XCode 相关的目录。**然后重新启动您的机器并重新安装它。

# ios - Core Data 一对多关系不会取值，我该如何使用访问器方法？

> ID：15633117
> 
> 赞同：0
> 
> 时间：2013-03-26T09:10:01.393
> 
> 标签：ios, xcode, core-data, one-to-many, relation

我想保存一个与其他实体有一些关系的方法。方法和背景是一对一的关系，但是方法应该可以有几个tips和example。我已经查看了许多其他问题和教程，但我不知道为什么它不起作用。dataToBeSaved 是一个字典，其中包含我要分配给方法的字符串形式的数据。

**这是 Method.h**

```
@interface Method : NSManagedObject

@property (nonatomic, retain) NSNumber * id;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) Approach *methodtoapproach;
@property (nonatomic, retain) Background *methodtobackground;
@property (nonatomic, retain) NSSet *methodtoexample;
@property (nonatomic, retain) NSSet *methodtotipps;
@end

@interface Method (CoreDataGeneratedAccessors)

- (void)addMethodtoexampleObject:(Example *)value;
- (void)removeMethodtoexampleObject:(Example *)value;
- (void)addMethodtoexample:(NSSet *)values;
- (void)removeMethodtoexample:(NSSet *)values;

- (void)addMethodtotippsObject:(Tipps *)value;
- (void)removeMethodtotippsObject:(Tipps *)value;
- (void)addMethodtotipps:(NSSet *)values;
- (void)removeMethodtotipps:(NSSet *)values;

@end 
```

**这是我的代码，我把注释部分放在里面，所以你可以看到我试图做什么......**

```
Method *newMethod = [NSEntityDescription insertNewObjectForEntityForName:@"Method" inManagedObjectContext:managedObjectContext];

//    [newMethod setValue:[dataToBeSaved objectForKey:@"name"] forKey:@"name"];
//    [newMethod setValue:[NSNumber numberWithInt:11] forKey:@"id"];
    newMethod.name = [dataToBeSaved objectForKey:@"name"];
    newMethod.id = [NSNumber numberWithInt:11];
    newMethod.methodtoapproach.summary = [dataToBeSaved objectForKey:@"summary"];
    newMethod.methodtobackground.background = [dataToBeSaved objectForKey:@"background"];

    NSMutableSet *tippsSet = [[NSMutableSet alloc] initWithObjects:[dataToBeSaved objectForKey:@"tipps"], nil];
    NSMutableSet *exampleSet = [[NSMutableSet alloc] initWithObjects:[dataToBeSaved objectForKey:@"example"], nil];

    [newMethod addMethodtotipps:tippsSet];
    [newMethod addMethodtoexample:exampleSet];
//    [[newMethod mutableSetValueForKey:@"methodtotipps"] addObject:[dataToBeSaved objectForKey:@"tipps"]];
//    [[newMethod mutableSetValueForKey:@"methodtoexample"] addObject:[dataToBeSaved objectForKey:@"example"]];
//    [newMethod addMethodtotippsObject:[dataToBeSaved objectForKey:@"tipps"]];
//    [newMethod addMethodtoexampleObject:[dataToBeSaved objectForKey:@"example"]];
//    newMethod.methodtotipps.tipps = [dataToBeSaved objectForKey:@"tipps"];
//    newMethod.methodtoexample.example = [dataToBeSaved objectForKey:@"example"]; 
```

如果我完全像那样运行应用程序，我会收到错误消息：

> ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFString 实体]：无法识别的选择器发送到实例 xxx

如果您需要更多信息，请在评论中发布...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:40:10.907

是的，我也被这个抓住了。

如果你想使用这些方法...

```
- (void)add<blah>Object... 
```

然后你需要自己写。

我实际上做的是反过来建立这种关系。

而不是创建孩子，然后将孩子添加到父母。我创建了孩子，然后告诉孩子它的父母是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:47:36.123

实际上，它现在对我有用：#

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

managedObjectContext = [appDelegate managedObjectContext];
fetchedResultsController = [appDelegate fetchedResultsController];
Method *newMethod = [NSEntityDescription insertNewObjectForEntityForName:@"Method" inManagedObjectContext:managedObjectContext];
Approach *newApproach = [NSEntityDescription insertNewObjectForEntityForName:@"Approach" inManagedObjectContext:managedObjectContext];
Background *newBackground = [NSEntityDescription insertNewObjectForEntityForName:@"Background" inManagedObjectContext:managedObjectContext];
Tipps *newtipp = [NSEntityDescription insertNewObjectForEntityForName:@"Tipps" inManagedObjectContext:managedObjectContext];
Example *newExample = [NSEntityDescription insertNewObjectForEntityForName:@"Example" inManagedObjectContext:managedObjectContext];

[newMethod setName:[dataToBeSaved objectForKey:@"name"]];
[newMethod setId:[NSNumber numberWithInt:11]];
newApproach.summary = [dataToBeSaved objectForKey:@"summary"];
newBackground.background = [dataToBeSaved objectForKey:@"background"];
newtipp.tipps = [dataToBeSaved objectForKey:@"tipps"];
newExample.example = [dataToBeSaved objectForKey:@"example"];

NSMutableSet *tippsSet = [NSMutableSet set];
NSMutableSet *examplesSet = [NSMutableSet set];

[newMethod setMethodtoapproach:newApproach];
[newMethod setMethodtobackground:newBackground];
[newMethod setMethodtoexample:examplesSet];
[newMethod setMethodtotipps:tippsSet];

[newMethod addMethodtoexampleObject:newExample];
[newMethod addMethodtotippsObject:newtipp];

NSError *error;
if (managedObjectContext != nil)
{
    if([managedObjectContext hasChanges])
    {
        [managedObjectContext save:&error];
        if(error)
        {
            NSLog(@"Error Saving data: %@", [error userInfo]);
        }
    }
} 
```

可能正是@Fogmeister 的意思，但我（到目前为止）对它的工作方式很好。也许以后有一些必要的优化......如果是这样，我会在这里发布......

# qt - 包含 QT 标头，但未找到 QSslError 的标识符

> ID：15633118
> 
> 赞同：0
> 
> 时间：2013-03-26T09:10:03.113
> 
> 标签：qt, header, compiler-errors, 64-bit, identifier

我已经下载了 QT 4.8.1 Source(everywhere-commercial-version)。并在Windwos 7 64bit下用Visual Studio 2008 Pro编译了64bit版本的QT。

之后，我在 vs2008 中创建了一个简单的 QT 应用程序项目。

但是如果我在我的代码中添加 QSslError 类进行测试，如下所示。

```
#include <QSslError>
..

Qt64Test::Qt64Test(QWidget* parent, Qt::WFlags flags): QMainWindow(parent, flags)
{
    ui.setupUi(this);
    QSslError a;
} 
```

然后我通过编译得到 C2065 错误。

1>.\qt64test.cpp(10) : 错误 C2065: 'QSslError': 未定义标识符

但标题包括在内！

QTDIR 设置正确。并且所有 QT 包含路径设置也正确设置。

我不知道为什么 vs2008 编译器看不到这个标识符。

头文件（qsslerror.h）如下所示：

```
#ifndef QSSLERROR_H
#define QSSLERROR_H

#include <QtCore/qvariant.h>
#include <QtNetwork/qsslcertificate.h>

QT_BEGIN_HEADER

QT_BEGIN_NAMESPACE

QT_MODULE(Network)

#ifndef QT_NO_OPENSSL

class QSslErrorPrivate;
class Q_NETWORK_EXPORT QSslError
{
public:
    enum SslError {
        NoError,
//.. 
```

（并且我的代码中没有定义 QT_NO_OPENSSL。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:41:39.743

可能您的 Qt 构建没有配置 OpenSSL 支持。定义将在 qconfig.h

# asp.net-mvc-4 - ASP.NET MVC 4 应用程序在 IIS 7.5/8 上给出 404、IController 错误

> ID：15633119
> 
> 赞同：1
> 
> 时间：2013-03-26T09:10:06.250
> 
> 标签：asp.net-mvc-4, iis-7.5, http-status-code-404, iis-8

最近几天我一直在尝试将 MVC 4 应用程序部署到 Server 2008 R2 和 2012 上的 IIS 7.5 和 8 安装，但我基本上每次都遇到相同的错误：404 和“路径的控制器'/'未找到或未实现 IController。” 在两台服务器上，我都确保安装了 .NET 4、4.5 和完整的 MVC 4 堆栈。应用程序在 VS 2012 中的 IIS Express 上运行良好。

我尝试过的事情和结果：

*   试图部署一个干净的 MVC 3 应用程序：工作；
*   试图部署一个干净的 MVC 4 应用程序：不起作用；
*   尝试部署一个干净的 ASP.NET 4 WebForms 应用程序：工作（我认为，这排除了 ASP.NET 托管功能是一个问题）；
*   尝试使用 .NET 4 而不是 4.5 部署 MVC 4 应用程序：不起作用（我认为，这排除了 .NET 安装的问题）；
*   尝试安装修补程序 980368：安装程序显示“此更新不适用于您的计算机”，因此可能已安装；
*   确保应用程序池位于 .NET 4.0 上；
*   确保正确设置所有文件权限；
*   将 ExtensionlessUrlHandler-Integrated-4.0 上的动词更改为 *；
*   添加了`<modules runAllManagedModulesForAllRequests="true" />`标签。

但仍然没有骰子......我已经阅读了许多类似于我遇到的错误的 SO 问题和其他网站，我想我已经尝试了我读过的所有提示，但也许我错过了一个关键的提示。

有没有其他人遇到过这些问题，可以给我我需要的修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:15:13.317

没错，看起来，将调试符号 (.pdb) 添加到 bin 文件夹会使应用程序重新开始工作，即使它是在发布模式下部署的。我会研究一下为什么会发生这种情况。

编辑：可以在这里找到答案：[Removing .pdb from ASP.NET app on IIS break application](https://stackoverflow.com/questions/15664008/removing-pdb-from-asp-net-app-on-iis-breaks-application/15718353#15718353)

# javascript - 如何识别上传的文件是否已完全上传？

> ID：15633124
> 
> 赞同：0
> 
> 时间：2013-03-26T09:10:11.963
> 
> 标签：javascript, file-upload, progress-bar

我的目标是创建一个 html5 仪表标签进度条。我知道 javascript 是最好的方法。计量标记值属性随着上传的进行而更新。但我不知道如何编写 javascript，我需要这个快速。我知道有可用的插件，但它们中的大多数都打包为一组（带有上传按钮和其他东西）。我只需要一个进度条，它可以读取我的用户上传的文件，并按上传文件的百分比调整仪表标签值。

注意：包含多个属性。

```
<input name="uploadedfile[]" type="file" multiple> 
```

那么也许你们中的任何人都可以提供帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:17:46.640

You can do it in tons of ways. One of those is described here: [http://www.script-tutorials.com/pure-html5-file-upload/](http://www.script-tutorials.com/pure-html5-file-upload/) another is here [http://www.amitpatil.me/ajax-file-upload-html5-drag-and-drop-file-upload/](http://www.amitpatil.me/ajax-file-upload-html5-drag-and-drop-file-upload/)

Also read through documentation for progress events [http://www.w3.org/TR/progress-events/](http://www.w3.org/TR/progress-events/) - it has both `progress` event, and `load` event, which is fired once the progress is complete.

# colors - E421：在完全有效的语句中无法识别颜色名称

> ID：15633125
> 
> 赞同：13
> 
> 时间：2013-03-26T09:10:16.047
> 
> 标签：colors, hex, vim

我想更改用[Better Rainbow Parentheses](https://github.com/kien/rainbow_parentheses.vim)着色的括号的颜色。

颜色指定如下：

```
let g:rbpt_colorpairs = [
    \ ['brown',       'RoyalBlue3'],
    \ ['Darkblue',    'SeaGreen3'],
    \ ['darkgray',    'DarkOrchid3'],
    \ ['darkgreen',   'firebrick3'],
    \ ['darkcyan',    'RoyalBlue3'],
    \ ['darkred',     'SeaGreen3'],
    \ ['darkmagenta', 'DarkOrchid3'],
    …
    \ ] 
```

在插件中更改颜色的功能是这样的：

```
func! rainbow_parentheses#toggle()
    if !exists('s:active')
        cal rainbow_parentheses#load(0)
    endif
    let afunc = exists('s:active') && s:active ? 'clear' : 'activate'
    cal call('rainbow_parentheses#'.afunc, [])
endfunc 
```

由于我使用的是 Solarized 我想要特定的十六进制颜色，所以我得到了这个：

```
let g:rbpt_colorpairs = [
    \ ['yellow',    '#b58900'],
    \ ['orange',       '#cb4b16'],
    \ ['red',    '#dc322f'],
    \ ['magenta',   '#d33682'],
    \ ['violet',    '#6c71c4'],
    \ ['blue',     '#268bd2'],
    \ ['cyan', '#2aa198'],
    …
    \ ] 
```

然而，在重新启动并打开插件时，我多次收到此错误：

```
E421: Color name or number not recognized: cterm=orange guifg=#cb4b16 
```

更好的是，在函数中手动执行 :exe 就像一个魅力，比如：

```
:exe 'hi default level4c ctermfg=orange guifg=#cb4b16' 
```

即使连接它也有效：

```
:let foo = '#cb4b16
:exe 'hi default level4c ctermfg=orange guifg='.foo 
```

可能有什么问题？！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T09:24:34.450

问题不在于 GUI RGB 颜色，而在于`cterm=orange`定义。

查看`:help cterm-colors`公认的价值观；`orange`不是其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-25T11:41:01.190

```
function! Gfagivesorange()
         colors morning
         hi Spellbad   term=standout cterm=bold ctermfg=Red ctermbg=White
         hi Spellbad   term=standout cterm=NONE ctermfg=Orange ctermbg=White
         call Myhi()
endfunc 
```

这个函数会给你橙色（红色不是粗体）。这是 NCURSES 的事情，但人们没有掌握或了解 NCURSES（信息学家不多）。

# twitter-bootstrap - 如何在 Bootstrap Popover 上显示特定元素

> ID：15633127
> 
> 赞同：0
> 
> 时间：2013-03-26T09:10:22.540
> 
> 标签：twitter-bootstrap, popover

我想在 Popover 中显示引导选项卡。我参考了 Bootstrap 文档，但无法正确实现。以下是我尝试过的代码

[http://jsfiddle.net/p57pD/1/](http://jsfiddle.net/p57pD/1/)

```
var tab = $('#mytab');
$('#mypop').popover({
    selector: tab
}); 
```

我不确定我正在做的错误是什么让这个工作。感谢有人可以帮助我理解错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:47:01.707

我认为您不需要选择器；你可以使用这个：

```
$('#mypop').popover({
    html: true,
    content: function() {
      return $('#mytab').html();
    }
}) 
```

请注意， div 应该有`id="mytab"`，而不是`class="mytab"`你的小提琴。

一个工作样本（从你的小提琴中提取）在[这里](http://jsfiddle.net/serra/uKMC3)。

要点：

1.  设置`html = true`为允许弹出框内的 html。
2.  使用该`content`函数返回 html - 在您的情况下，它来自隐藏的 div
3.  不要为此使用选择器选项；这有点令人困惑（至少对我来说），但它不打算与已经在 dom 中的元素一起使用，如您的示例[ref 1](https://github.com/twitter/bootstrap/issues/2091) [ref2](http://jsfiddle.net/KPeKS/4/)

# c# - AES 加密密钥和 IV

> ID：15633128
> 
> 赞同：3
> 
> 时间：2013-03-26T09:10:26.610
> 
> 标签：c#, aes

我有一个函数可以使用 AES 加密来自用户的密钥文本输入。并根据要求对其进行解密。什么是维护 AES 加密的密钥和 IV 的理想方法（截至目前已在应用程序中硬编码）。我每次都将加密数据保存在数据库中。页面加载时从数据库中检索加密值。该值在按钮单击时被解密。有什么最好的我可以以更好的方式使用密钥和 IV。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T09:20:26.700

IV可以被保存（甚至*可以*被“暴露”/公开传播）；这[不是“秘密”](https://stackoverflow.com/a/5797231/215042)。密钥应保密。因此，您可以保存/传输您的数据，例如`<iv_here>;<encrypted_data_here>`.

参见[维基百科](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Initialization_vector_.28IV.29)：

> 初始化向量 (IV) 是一种比特块，多种模式使用它来随机化加密，因此即使相同的明文被多次加密，也可以生成不同的密文，而无需较慢的重新加密过程。
> 
> 初始化向量与密钥具有不同的安全要求，因此 IV 通常不需要保密。然而，在大多数情况下，重要的是初始化向量永远不会在同一个键下重用。

# java - 如何将 FocusListener 实现到 JTextArea？

> ID：15633130
> 
> 赞同：0
> 
> 时间：2013-03-26T09:10:30.987
> 
> 标签：java, swing, jtextarea, focuslistener

我创建了扩展 JTextArea 的新类，并使用 FocusListener 实现了该类，但是 focusLost 方法中的代码没有被执行。原因是什么？

```
protected class JDynamicTextArea extends JTextArea implements FocusListener { 
    public JDynamicTextArea() { 
        super(); 
        addFocusListener(this); 
    } 
    public void focusGained(FocusEvent e) { } 
    public void focusLost(FocusEvent e) { 
        System.out.println("Focus lost"); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:39:21.983

似乎对我来说工作得很好......

单击第二个文本字段，您应该会看到焦点丢失事件触发。

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestFocus {

    public static void main(String[] args) {
        new TestFocus();
    }

    public TestFocus() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            add(new JScrollPane(new JDynamicTextArea()));
            add(new JTextField(10));
        }

    }

    protected class JDynamicTextArea extends JTextArea implements FocusListener {

        public JDynamicTextArea() {
            super(10, 10);
            addFocusListener(this);
        }

        public void focusGained(FocusEvent e) {
            System.out.println("Focus gained");
        }

        public void focusLost(FocusEvent e) {
            System.out.println("Focus lost");
        }

    }

} 
```

**更新了重点转移**

要重新启用键盘转移焦点，您需要在构造函数中添加以下内容

```
Set<KeyStroke> strokes = new HashSet<KeyStroke>(Arrays.asList(KeyStroke.getKeyStroke("pressed TAB")));
setFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS, strokes);
strokes = new HashSet<KeyStroke>(Arrays.asList(KeyStroke.getKeyStroke("shift pressed TAB")));
setFocusTraversalKeys(KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS, strokes); 
```

# java - 对 webhdfs 的 Http 请求但给出 FileNotFoundException

> ID：15633133
> 
> 赞同：0
> 
> 时间：2013-03-26T09:10:45.270
> 
> 标签：java, http, hadoop, hdfs

我安装了hadoop 1.0.4。我启用了 webhdfs 并使用 curl 命令获取主目录。

```
curl -i "http://172.16.30.40:50075/webhdfs/v1?user.name=ubantu&op=GETFILESTATUS" 
```

它适用于 GETHOMEDIRECTORY，但不适用于 GETFILESTATUS、LISTSTATUS 等其他操作

我得到了例外

```
**{"RemoteException":{"exception":"FileNotFoundException","javaClassName":"java.io.FileNotFoundException","message":"File /webhdfs/v1 not found."}}** 
```

这是conf文件：

hdfs-site.xml

```
<configuration>
     <property>
         <name>dfs.replication</name>
         <value>3</value>
     </property>
     <property>
        <name>dfs.webhdfs.enabled</name>
        <value>true</value>
     </property>
     <property>
       <name>dfs.support.append</name>
       <value>true</value>
    </property>
</configuration> 
```

任何人都可以提供一些建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:28:25.953

根据文档（[http://hadoop.apache.org/docs/r1.0.4/webhdfs.html#GETHOMEDIRECTORY](http://hadoop.apache.org/docs/r1.0.4/webhdfs.html#GETHOMEDIRECTORY)），要访问您应该使用的主目录`curl -i "http://<HOST>:<PORT>/webhdfs/v1/?op=GETHOMEDIRECTORY"`

另外，尝试使用：50070。那是我用于 webdfs 的端口，它工作正常。

```
curl -i "http://localhost:50070/webhdfs/v1/?op=GETHOMEDIRECTORY" 
```

**更新：**

在您的示例中，您没有指定要检查其状态的文件的路径。在下面的示例中，如果您将 /path/to/your/ 与文件的路径进行交换，然后将“file”更改为您的文件名，那么这会给您带来什么？

```
curl -i  "http://localhost:50070/webhdfs/v1/path/to/your/file?op=GETFILESTATUS" 
```

# c# - 如何从浏览器获取会话数据

> ID：15633135
> 
> 赞同：1
> 
> 时间：2013-03-26T09:10:48.247
> 
> 标签：c#, asp.net

我在一个 Web 应用程序上工作，它创建了很多会话。所以我想获得所有创建的会话，它重视有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:23:03.493

试试这个方法第一种方法

```
for (int i = 0; i < Session.Count; i++)
{
    var crntSession = Session.Keys[i];
    Response.Write(string.Concat(crntSession, "=", Session[crntSession]) + "<br />");
} 
```

第二种方法

```
foreach (var crntSession in Session)
{
    Response.Write(string.Concat(crntSession , "=", Session[crntSession .ToString()]) + "<br />");
} 
```

[更多细节](http://www.beansoftware.com/ASP.NET-FAQ/Session-Variables-Values.aspx)

# c# - 更改 DataGridView 数字列中的数字组分隔符

> ID：15633138
> 
> 赞同：2
> 
> 时间：2013-03-26T09:11:03.787
> 
> 标签：c#, .net, winforms, datagridview, cell-formatting

我想以这种方式格式化数字单元格`1 231 241.45`。我试过`N2`格式选项：

```
datagridview1.Columns["col1"].DefaultCellStyle.Format = "N2"; 
```

但是`N2`格式用逗号代替空格。我想要空格作为数字组分隔符。是否可以更改数字组分隔符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T11:16:26.367

我设法使它与以下代码一起工作：

```
string NRFormat="### ### ##0.00"
datagridview1.Columns["col1"].DefaultCellStyle.Format = NRFormat;
datagridview1.Columns["col2"].DefaultCellStyle.Format = NRFormat; 
```

它不是很优雅，但它正在工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-28T15:28:18.163

要更改数字组分隔符，`DataGridView`您可以创建一个特定的文化，然后将其设置`NumberFormat.NumberGroupSeparator`为新值，然后将其设置`DefaultCellStyle.FormatProvider`为`DataGridView`修改后的文化：

```
var culture = CultureInfo.CreateSpecificCulture("en-GB");
culture.NumberFormat.NumberGroupSeparator = " ";
dataGridView1.DefaultCellStyle.FormatProvider = culture;
dataGridView1.Columns[1].DefaultCellStyle.Format = "N2"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T09:17:16.987

请参阅此链接以获取单元格样式格式>>

[http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

```
this.dgv_PreviewGrid.DefaultCellStyle.Format = "D4"; 
```

D 代表整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-24T18:58:40.473

在数据网格`CellFormatting`事件中执行以下操作：

```
private void dg_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (cell.Value is decimal)
    {
        e.CellStyle.Format = "0.##";
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-28T07:45:04.227

你可以试试这个。

```
//1000001 convert to 1 000 001.00
datagridview1.Columns["col1"].DefaultCellStyle.Format = "### ### ##0.00";

//1000 convert to 1 000.00
datagridview1.Columns["col2"].DefaultCellStyle.Format = "### ### ##0.00"; 
```

# python - Plone 3.1.2 - ATDocument.getText() 方法中的 TypeError

> ID：15633140
> 
> 赞同：2
> 
> 时间：2013-03-26T09:11:07.183
> 
> 标签：python, plone, typeerror, zope

我的任务是从 Plone 3.1.2 网站卸载内容并将有关内容的信息加载到 SQL 数据库 + 文件系统

我重新创建了网站，访问了 ZODB 并重新创建了对象和文件夹结构。我还能够读取文件夹、文件和文档的属性。我无法让 ATDocument 的 .getText() 方法工作。Traceback 看起来像这样：

回溯（最近一次通话最后）：

```
 File "C:\Users\jan\Eclipse_workspace\Plone\start.py", line 133, in ? 
    main() 
  File "C:\Users\jan\Eclipse_workspace\Plone\start.py", line 118, in main 
    print dokument.getText() 
  File "e:\Program Files\Plone 3\Data\Products\Archetypes\ClassGen.py", line 54, in generatedAccessor
  File "e:\Program Files\Plone 3\Data\Products\Archetypes\BaseObject.py", line 828, in Schema 
TypeError: ('Could not adapt', <ATDocument at /*object_path*>, <InterfaceClass Products.Archetypes.interfaces._schema.ISchema>) 
```

我怀疑将对象连接到接口 ISchema 存在问题，但我以前从未使用过 Plone，也不知道它是对象模型。

有什么建议可能是错误的或遗漏的，我该如何解决它和/或下一步该怎么做？我怀疑我必须以某种方式将 ISchema 接口类与这个对象连接起来，但不知道从哪里开始。有什么建议么？

我会很感激任何帮助，因为我现在被困了 2 天并且没有前进。

我对 ZCML 格式或如何编辑它一无所知。因为`>>> print dokument.getText()`在调试模式之后，脚本跳转到`makeMethod()`生成器类中的方法，我假设脚本没有执行`.getText()`，而是尝试创建这个方法。

由于`inspect.getmembers(dokument)`返回一个`getText()`方法，我真的很困惑。你知道哪个 ZCML 文件可能与 ATDocument 类有关吗？或者我在哪里可以找到关于这个主题的任何信息？

我的 start.py 文件除了以下导入之外没有其他作用：

```
from ZODB.FileStorage import FileStorage
from ZODB.DB import DB
from OFS.Application import Application
from BTrees import OOBTree
from Products.CMFPlone.Portal import PloneSite 
```

然后它可以访问文档对象并尝试执行`.getText()`

编辑 213-03-26 15:27（格林威治标准时间）：

关于 .zcml 文件 我收到的站点是 3 个文件夹：产品（提取到`\Plone 3\Data`）、lib 和 package-includes。

在 lib 中有一个包含 3 个子文件夹的 python 文件夹：'common'、'abc' 和 'def'（名称更改为不发布客户信息）。这些子文件夹中的每一个都包含一个 configure.zcml 文件，其中一个还包括 override.zcml 文件。

在 package-includes 文件夹中有 4 个文件，每个文件长 1 行。它们包含以下几行：

```
<include package="abc" file="configure.zcml" />
<include package="def" file="overrides.zcml" />
<include package="common" file="configure.zcml" />
<include package="def" file="configure.zcml" /> 
```

这些 zcml 文件目前没有被复制。我在哪里可以复制这些以导入这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:49:54.937

您缺少组件注册，通常在加载站点中的 ZCML 文件时注册。

您希望最终有可能改为运行`bin/instance run yourscript.py`，这将所有繁琐的站点和 ZCML 加载留给 Zope。

一旦你让它可靠地运行，你就可以在一个设置本地组件管理器和安全管理器的脚本中访问该站点：

```
from zope.app.component.hooks import setSite
from Testing.makerequest import makerequest
from AccessControl.SecurityManagement import newSecurityManager

site_id = 'Plone'     # adjust to match your Plone site object id.
admin_user = 'admin'  # usually 'admin', probably won't need adjusting
app = makerequest(app)
site = app[site_id]
setSite(site)
user = app.acl_users.getUser(admin_user).__of__(site.acl_users)
newSecurityManager(None, user)

# `site` is your Plone site, now correctly set up 
```

将此脚本保存在某处，并使用以下命令运行它：

```
bin/instance run path/to/yourscript.py 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:55:38.563

你开始任务的方式并不好。您正在尝试在没有框架设置的情况下使用 API。这是可能的，但您必须非常了解框架（加载持久性站点管理器，...）

您应该添加一个“浏览器视图”并调用它来导出您的内容。

您可以通过以下方式做到这一点：

*   创建您自己的插件并安装它
*   修改已安装的插件（嘿，毕竟这是临时工作）

[您可以在http://developer.plone.org](http://developer.plone.org)找到有关 browserview 和 plone 的文档

抱歉，如果你需要为 Plone 开发，你需要阅读一些关于这一切的内容。

# iphone - self 对象是如何以及在哪里分配的？

> ID：15633149
> 
> 赞同：0
> 
> 时间：2013-03-26T09:12:06.417
> 
> 标签：iphone, ios, objective-c

有许多方法可以覆盖这样的函数：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
} 
```

所以`super`是调用父类函数，但是**自**分配在哪里呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:16:53.077

`self`是指向“当前对象”的指针，它在通常的初始化公式中分配：

```
NSObject *foo = [[NSObject alloc] init]; 
```

当您调用`[NSObject alloc]`时，该类会创建一个您稍后称为的对象`self`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:16:11.690

每当我们用 nib 像这样初始化我们的类时：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
} 
```

或者简单地**初始化**self 将被分配

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:16:14.577

基本上它在 init 函数中初始化，如下所示：

```
- (id) init
{
  self = [super init];
  return self;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T09:16:21.657

这里

```
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]; 
```

这是在自我赋值

当你给你打电话时，`alloc`它会访问它的超类`init`方法并传递给自我。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self)
    {

    }
    return self;
} 
```

# c# - 在 viewModel 中编辑嵌套列表

> ID：15633152
> 
> 赞同：0
> 
> 时间：2013-03-26T09:12:19.853
> 
> 标签：c#, asp.net-mvc-3, viewmodel

我正在开发一个 MVC3 项目，目前我正在为我的视图模型中的一个列表而苦苦挣扎。我希望能够在不发布主视图的情况下将项目添加到列表中。当我按下提交按钮时，我希望视图模型包含我列表中的项目。

完成此功能的最佳方法是什么？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:15:12.720

该解决方案最初是为 MVC2 编写的，但适用于 MVC 3 和 4。

[http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

**更新**

如果您不想使用@Html.BeginCollectionItem，则不必这样做。使用以下内容同样有效：

```
@for (int i = 0; i < Model.Items.Count; i++)
{
    @* 
        You can replace this line with whatever you require but
        for simplicity I prefer to create an editor template for the sub type
    *@
    @Html.EditorFor(m => m.Items[i])      
} 
```

# javascript - d3js 世界地图与 geoJSon

> ID：15633153
> 
> 赞同：0
> 
> 时间：2013-03-26T09:12:27.243
> 
> 标签：javascript, graph, map, d3.js, geojson

是否有任何链接指向使用带有世界 geoJSON 数据的 D3JS 的图表/图形/地图示例，并根据某些带有 lat/lng 的数据突出显示一些位置？

例如，应该使用**world-geo.json**渲染世界地图，然后根据另一个数据集**web-user-statistics.json添加/突出显示少数国家**

谢谢Thangaraju R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:23:16.400

[这](http://www.larsko.org/v/igdp/)是一个示例，除了显示世界地图外，还允许选择将突出显示和放大的特定国家。[此示例](http://www.larsko.org/v/cac/)未显示整个地球的地图，但可能更接近您要查找的内容，因为它显示了每个国家/地区的数据（按颜色和鼠标悬停）。它还为不同的数据使用两个不同的 JSON 文件。

# javascript - 避免这种解析错误的技术？JSON +双引号

> ID：15633159
> 
> 赞同：3
> 
> 时间：2013-03-26T09:12:42.123
> 
> 标签：javascript, jquery, json

我们知道在 JSON 字符串对象中我们有属性，它的值为“Property”：“Value”</p>

假设 my Value 包含双引号，例如“Property”：“my country is “uk””</p>

我们知道这会在 JSON.parse() 上产生解析错误。

避免这种解析错误的技术是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T09:14:01.033

您可以使用转义双引号，在[此处](http://www.quackit.com/javascript/tutorial/javascript_escape_characters.cfm)`backslash`阅读有关转义字符的更多信息。

*改变*

```
“my country is “uk” ” 
```

*至*

```
“my country is \“uk\” ” 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T09:49:32.473

如果要将对象编码为 JSON，则可以使用`JSON.stringify()`：

```
JSON.stringify({
    Property: 'my country is "uk"'
})
// {"Property":"my country is \"uk\""} 
```

从上面的示例中可以看出，该符号`\"`用于正确转义双引号。

# java - 如果网络很慢，Java HTTP Client 可以阻塞 CPU

> ID：15633160
> 
> 赞同：1
> 
> 时间：2013-03-26T09:12:42.043
> 
> 标签：java, performance, apache, networking, apache-commons-httpclient

我有一个线程，它运行一个循环，在这个循环中它`apache common http client`用来创建到远程服务器的连接并从中获取一些数据，然后休眠一段时间。我的问题是如果网络很慢，CPU 是否可以启动`choaking`，因为**GET**方法将花费更长的时间来获取数据并因此返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:15:14.327

我不认为这会导致高 CPU 负载，但是您的线程可能会在 GET 期间阻塞很长时间，这可能会导致您的程序看起来很慢。如果网络很慢，GET 应该等待 IO，这通常不会占用大量 CPU。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:15:40.777

网络是一个 I/O 操作，它通常由外围设备执行，因此 CPU 只是等待操作完成。操作系统阻塞线程执行，直到 I/O 操作完成。查看[线程的生命周期](http://www.roseindia.net/java/thread/life-cycle-of-threads.shtml)，它有一个特殊的状态“阻塞 I/O”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:16:14.210

不，它不会卡住 CPU，但只会卡住应用程序（如果您有单独的网络线程，即使这也不会发生）

并且由于网络操作是 I/O 操作，所以它不使用 CPU。因此，在线程的阻塞持续时间内，CPU 时间不会分配给该阻塞线程。

# go - Go 中的“3 状态”命令行参数

> ID：15633161
> 
> 赞同：3
> 
> 时间：2013-03-26T09:12:44.233
> 
> 标签：go

我正在编写一个需要访问 Internet 的应用程序。从某些主机连接需要通过代理。我知道可以在环境变量上设置代理，但我想从应用程序本身进行。我需要一个可以以三种不同方式使用的命令行参数：

1.  根本没有给出 -> 没有代理
2.  --use-proxy -> 使用默认代理
3.  --use-proxy " [http://my-proxy.com:880](http://my-proxy.com:880) " -> 使用给定的代理

以下使用默认或给定地址，但不能用于忽略代理：

> use_proxy := flag.String("use-proxy", " [http://my-proxy.com:880](http://my-proxy.com:880) ", "使用代理...")

这一项仅完成第 1 点和第 2 点：

```
use_proxy := flag.Bool("use-proxy", false , "Use proxy...")
if *use_proxy {
  ...
  proxyUrl, err := url.Parse("http://my-proxy.com:880")
  ...
} 
```

这个问题可以用两个标志来解决，但我宁愿只使用一个：

> myapp --use-proxy --proxy " [http://my-proxy.com:880](http://my-proxy.com:880) "

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:37:14.053

如果您的应用程序肯定不会使用任何其他命令行参数，那么您可以只制作`--use-proxy`一个布尔标志，然后从第一个命令行参数获取代理 URL，即从`os.Args`.

不过，从长远来看，这可能不是一个好主意，因为它限制了向您的程序添加额外的参数/选项。

大多数参数解析器不会处理这样的情况，因为它使解析命令行选项模棱两可。

其他选项可能是允许默认值使用关键字，例如：

```
myapp --use-proxy "http://my-proxy.com:880"
myapp --use-proxy default 
```

或使用两个选项，这两个选项都启用代理，但只有一个带参数，例如：

```
myapp --use-proxy <proxy URL>
myapp --use-default-proxy 
```

# c++ - 使用类中的函数

> ID：15633162
> 
> 赞同：0
> 
> 时间：2013-03-26T09:12:44.903
> 
> 标签：c++, class

我正在学习 C++ 并且在使用类方面非常新，我在尝试使用它们时感到非常困惑。我正在尝试转换我现有的代码（使用结构），以便它使用类 - 所以虽然我知道我正在尝试做什么，但我不知道我是否做得正确。

有人告诉我，当使用类中的函数时，我首先需要实例化该类的一个对象。所以我在我的主要功能中尝试过的（一个片段）是：

```
int main()// line 1
{
    string message_fr_client = "test"; //line2

    msgInfo message_processed; //line 3
    message_processed.incMsgClass(message_fr_client); //line 4

    if (!message_processed.priority_check(qos_levels, message_processed)) //line 5
        cout << "failure: priority level out of bounds\n"; //line 6

    return 0; //line 7
} 
```

你能帮我澄清一下我的以下假设是否正确吗？编译器没有显示任何错误，所以我不知道它是否没有错误，或者是否有错误潜伏在下面。

1.  在第 4 行，函数`incMsgClass`是否在字符串上执行`message_fr_client`并返回结果（和修改）`message_processed`？
2.  在第 5 行，函数`priority_check`正在执行`message_processed`并返回一个布尔值？
3.  在我的类定义中，我有一个`getPath`旨在修改值的函数`nodePath`- 只是使用的问题`message_processed.getPath(/*arguments*/)`吗？

我没有包含函数的主体，因为我知道它们可以工作——我只想*了解*类函数是如何交互的。请让我知道我是否可以更清楚 - 只是想在这里消除一些混乱。

这是我的课：

```
#ifndef clientMsgHandling_H
#define clientMsgHandling_H

#include <list>
#include <map>
#include <queue>

class msgInfo
{
public:
    msgInfo();
    msgInfo(int, int, int, std::string, std::list<int>);

    /*classifying message*/
    msgInfo incMsgClass(std::string original_msg);

    /*message error checks*/
    bool priority_check(int syst_priority, msgInfo msg); //check that message is within qos levels
    bool route_check(std::map<std::pair<int, int>, int> route_table, msgInfo msg); //check that route exists

    void getPath(msgInfo msg, std::map<std::pair<int, int>, int> route_info, int max_hop);

private:
    int source_id;
    int dest_id;
    int priority;
    std::string payload;
    std::list<int> nodePath;
};

#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:17:53.720

> At line 4, is the function incMsgClass being performed on the string message_fr_client

Yes

> and returning the resultant (and modified) message_processed?

Whatever it's returning, you're ignoring the return value. It can modify the object itself, yes, because the function is not const.

> At line 5, the function priority_check is being performed on the message_processed and returning a boolean?

Yes

> In my class definition, I have a function getPath that is meant to modify the value of nodePath - is it just a matter of using message_processed.getPath(/*arguments*/)?

If a member function is intended to modify one of the class members, it's just a matter of not marking that function const

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:21:50.780

你的基本假设是正确的。

```
message_processed.incMsgClass(message_fr_client); //line 4 
```

这条线是不正确的。您调用的函数返回`msgInfo`它只是被删除。你应该把它分配给一些东西。但这并不像通常那样。你应该让它成为 msgInfo 的构造函数，比如

```
class msgInfo
{
public:
   msgInfo(std::string original_msg);
...
} 
```

然后你可以这样称呼它

```
msgInfo message_processed(message_fr_client); 
```

该行将创建一个已正确初始化的 msgInfo。

还有另一种创建类实例的模式——静态创建函数。在您的情况下，您可以标记`incMsgClass`为静态，然后将其称为

```
msgInfo message_processed = msgInfo.incMsgClass(message_fr_client); 
```

我严重怀疑你在这里需要这种模式，所以我建议转向构造函数。

至于其他功能，我认为那里没有问题。请注意，所有未标记为的成员函数`const`都可以修改调用它们的对象。因此，您不需要显式传递此对象。对于函数，可以通过 name 获得指向它们所调用对象的指针`this`。此外，函数可以访问所有类变量，就好像这些变量对于普通（非成员）函数是全局的一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:19:48.990

没有实现细节很难说，但我们开始吧：

I. 您正在传递一个`std::string`as 值（默认情况下，C++ 是按值调用），因此您`std::string`在方法中获得了一个副本。如果要处理传递的对象并对其进行操作，请在对象上使用引用，例如

```
msgInfo incMsgClass(std::string& original_msg); // notice the ampersand 
```

然后您可以将您的签名更改为

```
void incMsgClass(std::string& original_msg); 
```

因为你不需要返回`std::string`你通过的。

二、是的，至少根据您的签名

三、`node_path`只能作为会员才能看到。

对于您的所有问题，请参阅[C++-FAQ](http://www.parashift.com/c++-faq/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T09:20:39.967

虽然它可以编译（甚至运行），但代码有一些奇怪之处，如下所示：-

首先，类方法知道它们正在对哪个对象进行操作-因此您的`priority_check`和`route_check`方法可能不需要`msgInfo`作为参数。，

例如，您的旧非类函数可能是这样的

```
bool priority_check(int p, msgInfo msg)
{
  return msg.priority < p;
} 
```

但是新的应该是这样的：

```
bool msgInfo::priority_check(int p)
{
  return priority < p;
} 
```

另外，`incMsgClass`有点奇怪，因为它是一个返回 msgInfo 对象的非静态类方法。如果不理解它应该做什么就很难说，但这个函数似乎可能实际上应该是一个构造函数，而不是一个常规方法。

另一件事是您当前正在将 msgInfo*按值*传递给这些方法。所以如果该方法需要修改传递的msgInfo，它不会有任何效果。通常最好通过引用或 const 引用将对象传递给其他方法。那么，回到之前的非方法示例，确实应该是这样的。

```
bool priority_check(int p, const msgInfo &msg)
... 
```

但是，正如我所说，您可能无论如何都不需要这些`msgInfo`参数。

# postgresql - 将 file.dump 恢复或转换为 pgAdmin

> ID：15633165
> 
> 赞同：0
> 
> 时间：2013-03-26T09:13:00.647
> 
> 标签：postgresql, dump, pgadmin, navicat

我有一个转储文件的问题，客户给了我一个文件来连接 php 中的 postgres 数据库，我首先这样做

1.  将此文件**ssdf_master.dump**重命名为**ssdf_master.sql**以在 pgAdmin 或 Navicat 中执行但不起作用。
2.  运行这个 pg_restore **ssdf_master.dump**并要求输入密码并输入我保存在 pgAdmin 中但没有的密码。

我的 ssdf_master.dump 有 \N 和 . 当在navicat 中运行该文件时显示此错误：

```
[Err] ERROR:  error de sintaxis en o cerca de «01»
LINE 784: 01 Aguascalientes AGS 00000 99999 \N 
```

**文件提取**

```
--
-- PostgreSQL database dump
--

SET statement_timeout = 0;
SET client_encoding = 'LATIN1';
SET standard_conforming_strings = off;
SET check_function_bodies = false;
SET client_min_messages = warning;
SET escape_string_warning = off;

--
-- Name: plpgsql; Type: PROCEDURAL LANGUAGE; Schema: -; Owner: postgres
--

CREATE PROCEDURAL LANGUAGE plpgsql;

ALTER PROCEDURAL LANGUAGE plpgsql OWNER TO postgres;

SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- Name: scg; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE scg (
    base_datos character varying(8),
    ip character varying(15),
    tipo character(1),
    owner character varying(8),
    own_passwd character varying(8)
);

ALTER TABLE public.scg OWNER TO postgres;

--
-- Data for Name: scg; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY scg (base_datos, ip, tipo, owner, own_passwd) FROM stdin;
SCGDGCA 10.18.20.150    E   postgres    postgres
SCGSJ   10.18.20.150    E   postgres    postgres
SCGDPRE 10.18.20.150    E   postgres    postgres
SCGDSSA 10.18.20.150    E   postgres    postgres
SCGDAFI 10.18.20.150    E   postgres    postgres
SCGSDA  10.18.20.150    E   postgres    postgres
SCGDPRED    10.18.20.150    E   postgres    postgres
\. 
```

注意：以前，我创建了一个名为**postgres**的数据库，用户为**postgres**而没有密码。

我希望我已经解释了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:24:33.243

根据文件的提取，这是纯文本格式的转储。

它不应该被传递给 pg_restore 因为：

> pg_restore 是一个实用程序，用于从由 pg_dump(1) 以非纯文本格式之一创建的存档中恢复 PostgreSQL 数据库

`psql`相反，它应该在连接到已经创建的数据库时直接馈送，大概是空的。这些对象似乎归 拥有`postgres`，所以应该这样做：

```
psql -U postgres -d yourdbname < dumpfile 
```

# c# - 图像插入图像

> ID：15633167
> 
> 赞同：0
> 
> 时间：2013-03-26T09:13:05.753
> 
> 标签：c#, richtextbox

我有这段代码可以将图像插入到 Richtextbox 中的表格中。

```
 table.ForEachCell(delegate(TableCell cell, int rowIndex, int cellIndex)
        {
            if (rowIndex > 0)
            {
                if (dataTable.Rows[rowIndex - 1][columnsToDisplay[cellIndex]].GetType().ToString() != "System.Drawing.Bitmap")
                {
                    document.InsertText(cell.Range.Start, dataTable.Rows[rowIndex - 1][columnsToDisplay[cellIndex]].ToString());
                }
                else if (dataTable.Rows[rowIndex - 1][columnsToDisplay[cellIndex]].GetType().ToString() == "System.Drawing.Bitmap")
                {
                    var src = dataTable.Rows[rowIndex - 1][columnsToDisplay[cellIndex]];
                    Image img = new Image(src); // this line cause a problem
                    document.InsertImage(cell.Range.Start, img);
                }

            }
        }); 
```

插入文本工作正常，但我想插入一个给出错误的图像：

> *无法创建抽象类或接口“System.Drawing.Image”的实例*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:15:28.247

Image 是一个抽象基类，所以它没有构造函数。

改用这个：

```
byte[] srcStream = (byte[])src;

Stream stream = new MemoryStream(srcStream);

Image img = Image.FromStream(stream); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:15:30.263

[从MSDN](http://msdn.microsoft.com/en-IN/library/system.drawing.image.aspx)试试这个

```
// Create image.
    Image newImage = Image.FromFile(src); 
```

# c# - 虚拟属性比具体属性慢吗？

> ID：15633168
> 
> 赞同：1
> 
> 时间：2013-03-26T09:13:09.513
> 
> 标签：c#, performance, oop, visual-c++, interface

假设我有一个 C# 接口，`IMyInterface`定义如下：

```
// C# code
public interface IMyInterface
{
  string MyProperty { get; }
} 
```

假设我还有一个 C++/CLI 类，`MyConcreteClass`它实现了这个接口，并且它的头声明如下：

```
public ref class MyConcreteClass : public IMyInterface
{
 public:
  virtual property String^ MyProperty 
  {
    String^ get() sealed { return String::Empty; };
    void set( String^ s ) sealed { };
  }
}; 
```

显然，当您通过接口访问虚拟成员时，运行时必须在类中查找实现，并且会比成员不是虚拟的要慢。

```
IMyInterface obj;
obj->MyProperty = "HELLO"; 
```

我专门询问直接在具体对象类型上使用虚拟成员的性能。`MyProperty`如果是虚拟成员，这会更慢吗？

```
MyConcreteClass obj;
obj->MyProperty = "HELLO"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T09:18:29.077

Virtual methods are slower because the runtime has to check for an actual implementation of the method. So it is 1 additional check. You can still hundreds of thousands of these per second. So don't stress about it. In Java every method is virtual by default.

UPDATE: I am not sure about how introducing c++ changes things. My guess is that is would be similar because you are still accessing a virtual method. I am not sure how it would change it. But once again this is just my guess. Hopefully someone else can help out more.

# converters - 手动 Spring-data-rest 转换器

> ID：15633171
> 
> 赞同：0
> 
> 时间：2013-03-26T09:13:21.490
> 
> 标签：converters, spring-data-rest

你能推荐一个关于 spring-data-rest 转换器的教程吗？我在这个问题上停留了一个星期，我阅读了很多关于它的帖子和小手册，但我仍然不知道它是如何工作的或如何配置一个

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:34:48.290

我知道，这不是一个教程，但它确实提供了对 Spring Data 的可访问且详细的介绍，包括 Spring Data REST 内容。我通常不会为书籍做广告，但这本书对我帮助很大。

弹簧数据。企业 Java 的现代数据访问。作者：马克·波拉克、奥利弗·吉尔克、托马斯·里斯伯格、乔恩·布里斯宾、迈克尔·亨格。出版商：O'Reilly Media

[http://shop.oreilly.com/product/0636920024767.do](http://shop.oreilly.com/product/0636920024767.do)

# c - 从不兼容的指针类型和结构数组初始化

> ID：15633172
> 
> 赞同：0
> 
> 时间：2013-03-26T09:13:32.583
> 
> 标签：c

我现在正在学习 C 语言，在理解指针和结构数组时遇到了一些麻烦。这是我编写的一个简单程序：

```
#include <stdio.h>

typedef struct {                                        /* Define the structure Pokemon that contains a nickname, type and level*/
    char nickname[11];
    char type[11];
    int level;
} Pokemon;

int main(void) {

    char nickname[11];
    char type[11];
    int level;

    for (int i = 0; i < 3; i++) {                      /* Iterate through the loop three times, each time create a new pokemon */
        printf("Pokemon %i \n", i);
        printf("Nickname: ");
        scanf("%s", &nickname);
        printf("Type: ");
        scanf("%s", &type);
        printf("Level: ");
        scanf("%i", &level);

        Pokemon * poke = {nickname, type, level};                /* Insert the pokemon into the array of Pokemon */

        printf("%s, %s, %i", poke->nickname, poke->type, poke->level);
    }
} 
```

基本上我想为具有三个特征的口袋妖怪创建一个结构。在主函数中，我希望用户输入 3 个 pokemon 的特征，然后创建一个具有这三个特征的 struct pokemon 实例，并将这些特征打印到 stdout。使用此代码，它可以编译，但我收到警告：

```
pokemon.c:33:9: warning: initialization from incompatible pointer type [enabled by default]
pokemon.c:33:9: warning: (near initialization for ‘poke’) [enabled by default]
pokemon.c:33:9: warning: excess elements in scalar initializer [enabled by default]
pokemon.c:33:9: warning: (near initialization for ‘poke’) [enabled by default]
pokemon.c:33:9: warning: excess elements in scalar initializer [enabled by default]
pokemon.c:33:9: warning: (near initialization for ‘poke’) [enabled by default] 
```

不知道为什么会这样——我想这与我设置的指针有关，但正如我所说，我仍在努力解决这个问题。

我还想将每个口袋妖怪实例放入三个口袋妖怪的数组中。到目前为止，我有这个：

```
Pokemon p [3];

// This bit inside the for loop and after the 'poke' struct instantiation
p[i] = poke;
printf("%s,%s,%i inserted\n", poke.nickname, poke.type, poke.level ); 
```

但这不想编译 - 我想这是另一个指针错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:30:02.720

鉴于对所需功能的描述，我想说根本不需要指针。只需读取数据并将其直接存储到您的数组中：

```
int main(void) 
{
    Pokemon p[3];
    for (int i = 0; i < 3; i++) 
    {
        printf("Pokemon %i \n", i);
        printf("Nickname: ");
        scanf("%s", &(p[i].nickname));
        printf("Type: ");
        scanf("%s", &(p[i].type));
        printf("Level: ");
        scanf("%i", &(p[i].level));

        printf("%s, %s, %i", p[i].nickname, p[i].type, p[i].level);
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:16:44.850

```
Pokemon p[3];
...
Pokemon poke;
strncpy(poke.nickname, nickname, sizeof(poke.nickname));
strncpy(poke.type, type, sizeof(poke.type));
poke.level = level;
p[i] = poke; 
```

编辑：固定临时结构初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T09:19:55.100

在这一行：

```
 Pokemon * poke = {nickname, type, level}; 
```

你只是在声明一个指针，所以你不能将它初始化为一个结构。而且由于您的结构具有字符数组，因此您不能分配字符串指针。

如果您使用的是 C99，则可以使用复合文字：

```
 Pokemon * poke = &(Pokemon){.level = level}; 
```

否则，您需要声明一个结构，然后分配其地址。

对于下一部分，您需要

```
 p[i] = *poke; 
```

将指向的结构复制到新的结构中。

但是，以这种方式初始化不会将字符串复制到结构中。你可以做什么：

```
 strcpy(p[i].nickname, nickname);
   strcpy(p[i].type, type); 
```

您还应该删除`&`这些行中的：

```
 scanf("%s", &nickname);
   scanf("%s", &type); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T09:33:09.677

问题出在线路上

```
Pokemon * poke = {nickname, type, level};                /* Insert the pokemon into the array of Pokemon */ 
```

因此，您也可以简单地使用它，而不是像那样初始化：

```
 Pokemon *poke = malloc(sizeof(Pokemon));
    strcpy(poke->nickname,nickname);
    strcpy(poke->type,type);
    poke->level=level; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T09:42:20.407

为什么不直接读入你的数组？

```
#include <stdio.h>
typedef struct {         /* Define the structure Pokemon that contains a nickname, type and level*/
    char nickname[11];
    char type[11];
    int level;
} Pokemon;

int main(void) 
{
    Pokemon p[3];

    for (int i = 0; i < 3; i++)   /* Iterate three times, each time create pokemon */
    {                      
        printf("Pokemon %i \n", i);
        printf("Nickname: ");
        scanf("%10s", p[i].nickname);
        printf("\nType: ");
        scanf("%10s", p[i].type);
        printf("\nLevel: ");
        scanf("%i", &p[i].level);

        printf("\n%s, %s, %i\n", p[i].nickname, p[i].type, p[i].level);
    }
} 
```

# jquery - Javascript：检测已设置为 SRC 的图像是否已完成加载？

> ID：15633176
> 
> 赞同：0
> 
> 时间：2013-03-26T09:13:41.127
> 
> 标签：jquery

我有一张图片：

```
<img src="http://localhost/image1.jpg" id="myImage" /> 
```

然后我有javascript：

```
function event() {
   $("#myImage").attr("src", "http://localhost/image2.jpg");
} 
```

我想在图像未完成加载时显示“加载”字样。如何检测 image2.jpg 何时完成加载，以便将图像更改为所需的图像。我在想类似的事情：

```
function event() {
   $("#myImage").hide();
   $("#loadingBlock").show();
   if ( hasLoaded("http://localhost/image2.jpg") ) {
     $("#myImage").attr("src", "http://localhost/image2.jpg");
     $("#loadingBlock").hide();
     $("#myImage").show();
   }
} 
```

“hasLoaded”函数如何工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:16:04.853

```
$("#myImage")
        .load(function() { console.log("image loaded correctly");
         //your code to show image..
        })
        .error(function() { console.log("error loading image"); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:14:55.550

`load`您可以在事件上绑定处理程序：

```
$("#loadingBlock").show();
$("#myImage")
   .hide()
   .load(function() { 
      $("#loadingBlock").hide();
      $(this).show();
   })
   .prop("src", "http://localhost/image2.jpg"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:15:15.490

您可以使用完整的加载事件，请在[此处](http://api.jquery.com/load/)阅读更多内容。

```
$("#myImage").load("http://localhost/image2.jpg", function(){
   alert("loaded");
}); 
```

# teradata - Teradata BTEQ 导出脚本导致 O/P 文件中的字符无效

> ID：15633186
> 
> 赞同：0
> 
> 时间：2013-03-26T09:14:31.077
> 
> 标签：teradata

# 这是我的简单 BTEQ 脚本

```
.LOGON 127.0.0.1/tduser,tduser
.EXPORT DATA FILE=C:\Documents and Settings\Owner\Desktop\Study\Google Drive\TD\BTEQ\Exported_File.txt
    SELECT      account_number
    FROM    samples.accounts
    WHERE   balance_current  < 500 ;
.EXPORT RESET
.QUIT 
```

==================================================== ====================================

# 脚本的输出：

```
BTEQ 12.00.00.01 Tue Mar 26 19:58:59 2013

+---------+---------+---------+---------+---------+---------+---------+----
.LOGON 127.0.0.1/tduser,

 *** Logon successfully completed.
 *** Teradata Database Release is 12.00.00.10
 *** Teradata Database Version is 12.00.00.10
 *** Transaction Semantics are BTET.
 *** Character Set Name is 'ASCII'.

 *** Total elapsed time was 1 second.

+---------+---------+---------+---------+---------+---------+---------+----
.EXPORT DATA FILE=C:\Documents and Settings\Owner\Desktop\Study\Google Driv
e\TD\BTEQ\Exported_File.txt
 *** To reset export, type .EXPORT RESET
+---------+---------+---------+---------+---------+---------+---------+----
 SELECT   account_number
 FROM  samples.accounts
 WHERE  balance_current  < 500 ;

 *** Success, Stmt# 1 ActivityCount = 4
 *** Query completed. 4 rows found. One column returned.
 *** Total elapsed time was 1 second.

+---------+---------+---------+---------+---------+---------+---------+----
.EXPORT RESET
 *** Output returned to console.
+---------+---------+---------+---------+---------+---------+---------+----
.QUIT
 *** You are now logged off from the DBC.
 *** Exiting BTEQ...
 *** RC (return code) = 0 
```

==================================================== ====================================

有一次，我检查了它在文本文件中显示无效字符的文件。任何可能的解决方法？统一码问题？我不确定。我什至尝试在下面粘贴文件内容，但它是空的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-27T08:59:06.120

请使用以下命令在 bteq 中导出：

.EXPORT 报告文件=文件名...

我在数据文件中遇到了同样的问题。更改为 this 后，它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:05:50.683

由于实际文件的路径中有空格，请尝试用双引号将您的文件名括起来。

**原来的**

```
.EXPORT DATA FILE=C:\Documents and Settings\Owner\Desktop\Study\Google Drive\TD\BTEQ\Exported_File.txt 
```

**修改**

```
.EXPORT DATA FILE="C:\Documents and Settings\Owner\Desktop\Study\Google Drive\TD\BTEQ\Exported_File.txt" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T17:18:07.940

改变如下..

.EXPORT 报告文件=文件名...

# jquery - jquery asp.net wcf 服务器回答格式

> ID：15633187
> 
> 赞同：0
> 
> 时间：2013-03-26T09:14:35.757
> 
> 标签：jquery, asp.net, ajax, wcf

我正在尝试了解 jquery 如何与 asp.net 一起工作。如果我想在 wcf 服务功能中使用我自己的类作为响应，我无法从中得到答案......所以，我在做什么

Wcf 服务：

```
[ServiceContract(SessionMode = SessionMode.NotAllowed)]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    [ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Single, InstanceContextMode = InstanceContextMode.PerCall)]
    public class Service2
    {
        [DataContract]
        public class Message
        {
            [DataMember]
            public string MessageBody
            {
                get;
                set;
            }
             [DataMember]
            public string Sender
            {

                get;
                set;

            }

        }

        static List<Message> list = new List<Message>();

        [OperationContract]
        [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json)]
        public List<Message> newone(string a, string b)
        {
            list.Add(new Message {MessageBody = a, Sender= b});
            return list;
        }

    } 
```

并尝试从jquery的这个函数中得到答案

```
 function hi() {

                $.ajax({
                    async: true,
                    url: '/Service2.svc/newone',
                    data: 'a= ' + $('#my1').val() + '&b= ' + $('#my2').val(),
                    type: 'GET',
                    dataType: 'json',
                    success: function (data) {

                        var str = '';
                        str += data.MessageBody[0];//To take first message from list

                        $("#msgs").html(str);

                    },
                    error: function() {alert('error');}

                });

            } 
```

它不起作用......我必须做什么才能从服务器获取 MessageBody 和 Sender？我如何获得第二个列表中的第一个元素等等？感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:08:47.980

所以，我没有得到我的问题的答案并自己找到它......所以它不是很复杂，我们必须这样做 - data.d[i].MessageBody 如果想从列表中获取消息。

# ios - UITableView 1070 中的断言失败

> ID：15633189
> 
> 赞同：0
> 
> 时间：2013-03-26T09:14:37.727
> 
> 标签：ios, core-data, nsfetchedresultscontroller

更新：有时我会收到错误消息

```
2013-03-27 19:23:23.094  *** Assertion failure in -[TableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2372/UITableView.m:1070

2013-03-27 19:23:31.280 [53301:c07] CoreData: error: Serious application error.  Exception was caught during Core Data change processing.  This is usually a bug within an observer of NSManagedObjectContextObjectsDidChangeNotification.  Invalid update: invalid number of rows in section 0\.  The number of rows contained in an existing section after the update (4) must be equal to the number of rows contained in that section before the update (1), plus or minus the number of rows inserted or deleted from that section (1 inserted, 0 deleted) and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out). with userInfo (null)
2013-03-27 19:23:31.281 [53301:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of rows in section 0\.  The number of rows contained in an existing section after the update (4) must be equal to the number of rows contained in that section before the update (1), plus or minus the number of rows inserted or deleted from that section (1 inserted, 0 deleted) and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out).' 
```

我有一个应用程序，它从远程服务中获取大部分数据，并使用核心数据进行持久化。我正在写一个视图，它显示了`UITableView`无限滚动的对象集合 [Offtopic：人们会认为这是相当典型的，但事实证明至少有 20 种方法可以做到这一点......]

在我`viewDidLoad`的构造中，我构造了获取请求，具有固定的小限制、0 偏移量和固定的批量大小。我使用该请求启动缓存`NSFetchedResultsController`名称`nil`和调用 performFetch。然后我附上以典型方式获取数据的数据源（我只有一个部分）`nil``sectionNameKeyPath``NSFetchedResultsController`

```
- (NSInteger) tableView:(UITableView *)tableView
  numberOfRowsInSection:(NSInteger)section
{
    return [[fetchController.resultsController sections][section]
            numberOfObjects];
}

- (NSInteger) numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
} 
```

到目前为止一切顺利，我可以看到我的对象从数据库中拉出。这个想法是用户立即看到持久化的东西，直到新数据来自网络。

然后，在`performBlock`后台内部`ManagedObjectContext`（以主 UI ManagedObjectContext 作为父级）执行网络获取，将对象转换为核心数据并将它们推送到主 UI 上下文。这也可以。

`NSFetchResultsController`当开始收到有关新对象到达的通知时，麻烦就开始了。我有一个典型的样板文件，在几本书和苹果自己的文档中都有提到：

```
- (void)controller:(NSFetchedResultsController*)controller
didChangeObject:(id)anObject
atIndexPath:(NSIndexPath*)indexPath
forChangeType:(NSFetchedResultsChangeType)type
newIndexPath:(NSIndexPath*)newIndexPath
{
    switch(type) {
        case NSFetchedResultsChangeInsert:
            [self.table insertRowsAtIndexPaths:@[newIndexPath]
                      withRowAnimation:UITableViewRowAnimationFade];
            break;
        case NSFetchedResultsChangeDelete:
            [self.table deleteRowsAtIndexPaths:@[indexPath]
                      withRowAnimation:UITableViewRowAnimationFade];
            break;
        case NSFetchedResultsChangeUpdate:
            [self.delegate
             populateCell:[self.table cellForRowAtIndexPath:indexPath]
             indexPath:indexPath
             ];
            break;
        case NSFetchedResultsChangeMove:
            [self.table deleteRowsAtIndexPaths:@[indexPath]
                      withRowAnimation:UITableViewRowAnimationFade];
            [self.table insertRowsAtIndexPaths:@[newIndexPath]
                      withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
} 
```

现在事情开始变得奇怪了。首先，`newIndexPath`我得到的很奇怪：有时是 0，有时是 18，有时是 28。它似乎是不确定的（我的`fetchLimit`和`batchSize`设置为 20）

此外，当`insertRowsAtIndexPath`被调用时，断言是从可可层抛出的：

```
*** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2380.17/UITableView.m:1070 
```

不，没有进一步的解释。是不是很了不起？

我认为 UITableView 期望和实际获得的行数或部分数之间存在一些不一致。有什么建议我应该怎么看？如果没有 UITableView 源代码，我不知道从哪里开始寻找。目前我很想重新实现`NSFetchedResultsController`自己的模拟，以便我可以看到实际发生的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:18:04.660

did you implement the other delegate methods for the NSFetchedResultController?

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
  [self.tableView beginUpdates];
}
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
  [self.tableView endUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type {
  switch(type) {
    case NSFetchedResultsChangeInsert:
      [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
      break;
    case NSFetchedResultsChangeDelete:
      [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex]
                    withRowAnimation:UITableViewRowAnimationFade]; break;
  }
} 
```

# jquery - 模板刷新停止 jQuery 事件

> ID：15633196
> 
> 赞同：0
> 
> 时间：2013-03-26T09:14:57.260
> 
> 标签：jquery, meteor

在我的 Meteor App 中，我在集合元素上构建了一个编辑功能。因此，我对每个元素都有 2 个状态；普通视图和编辑表单。我使用 jQuery 有一个不错的滑块效果，可以在这两种状态之间切换。

```
Template.bookings.events
  'click .edit-booking': (event) ->
    event.preventDefault()
    bookingId = event.currentTarget.dataset.booking
    $('#booking-' + bookingId + '-data').slideToggle('slow')
    $('#booking-' + bookingId + '-form').slideToggle('slow') 
```

这工作正常。但是在更新的回调函数中，我尝试再次关闭表单，但我遇到了问题。

```
 Meteor.call('updateBooking', {id: id, title: title, hours: hours},
             (error, booking) ->
               unless error
                 $.bootstrapGrowl "saved successfully", {align: 'center', type: 'success'}
                 $('#booking-' + id + '-data').slideToggle('fast')
                 $('#booking-' + id + '-form').slideToggle('fast')
                 booking
               else
                 $.bootstrapGrowl error.message, {align: 'center', type: 'error'}
                 error
             ) 
```

不知何故，我的模板的反应性刷新停止了 jquery 事件，我不知道如何实现这一点。我看到表单关闭了一瞬间，然后再次重新打开:) bootsrtapGrowl 工作正常。

任何人都可以给我一个提示。非常感谢。马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:57:50.233

由于没有给出导致问题的代码片段，因此很难放弃您给出的内容。我认为这可能与重新渲染的模板有关，因为它包含一些正在更新的反应性数据。因此，为此，在您的 HTML 中`bookings`使用隔离正在更新的数据

```
<template name="bookings">
    ...
    <div id="booking-xxx-yyyy">
        ....
        {{#isolate}}
            {{data}}
        {{/isolate}}
        ...
     </div>
    ...
</template> 
```

这样做的目的是`{{#isolate}}`，当数据发生变化时，中间的所有内容都会自行呈现，就好像它是一个子模板一样。

这样你的整个模板，包括你的 html 元素，`id="booking-..."`不会重新渲染，所以它的动画是可能的。

目前看起来动画开始了，然后模板重新渲染，因此 DOM 被刷新，JQuery 失去了对旧动画的跟踪。

# ruby - 使用 ruby 遏制 gem 访问 paypal api

> ID：15633207
> 
> 赞同：2
> 
> 时间：2013-03-26T09:15:27.263
> 
> 标签：ruby, curl, paypal, curb

按照 Paypal 开发人员“拨打您的第一个电话”中的说明进行操作：

```
curl https://api.sandbox.paypal.com/v1/oauth2/token \
 -H "Accept: application/json" \
 -H "Accept-Language: en_US" \
 -u "EOJ2S-Z6OoN_le_KS1d75wsZ6y0SFdVsY9183IvxFyZp:EClusMEUk8e9ihI7ZdVLF5cZ6y0SFdVsY9183IvxFyZp" \
 -d "grant_type=client_credentials" 
```

它正在工作并获得指令状态的预期结果，但我更喜欢使用 ruby​​ 遏制 gem：

```
require 'curl'

paypal_result = Curl::Easy.http_post("https://api.sandbox.paypal.com/v1/oauth2/token", "grant_type=client_credentials") do |http|
  http.headers['Accept'] = "application/json"
  http.headers['Accept-Language'] = "en_US"
  http.username = "EOJ2S-Z6OoN_le_KS1d75wsZ6y0SFdVsY9183IvxFyZp:EClusMEUk8e9ihI7ZdVLF5cZ6y0SFdVsY9183IvxFyZp"
end

puts paypal_result.body_str 
```

但是我得到了以下信息：

```
{"error":"invalid_client","error_description":"The basic auth authorization header cannot be decoded"} 
```

这肯定是一个错误，但我的遏制语法有什么问题？任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:39:45.710

我不能确切地告诉你出了什么问题，但我可以告诉你如何查看正在发生的事情。尝试将其置于详细模式，以便您可以查看实际发送的数据和标头：

```
curl = Curl::Easy.new

# Make it verbose, prints to stderr
curl.verbose = true

paypal_result = curl.http_post("https://api.sandbox.paypal.com/v1/oauth2/token", "grant_type=client_credentials") do |http|
  # etc.
end 
```

您可以使用该`-v`标志与 CLI 版本进行比较。

希望能帮助你发现不同之处。

# html - Firefox 不加载外部字体

> ID：15633213
> 
> 赞同：1
> 
> 时间：2013-03-26T09:15:51.333
> 
> 标签：html, css, apache, firefox

我读了这篇关于 firefox 和外部字体的文章： [http ://www.cssbakery.com/2010/07/fixing-firefox-font-face-cross-domain_25.html](http://www.cssbakery.com/2010/07/fixing-firefox-font-face-cross-domain_25.html)

它说我应该将一些代码放入我的补丁配置中：

```
AddType application/vnd.ms-fontobject .eot
AddType font/ttf .ttf
AddType font/otf .otf
<FilesMatch "\.(ttf|otf|eot)$">
<IfModule mod_headers.c>
Header set Access-Control-Allow-Origin "*"
</IfModule>
</FilesMatch> 
```

我已经找到了路径：`apache\apache2.2.22\conf\httpd.conf`并将这些行放在萤火虫中，响应标头根本没有改变。

我想提一下，如果没有加载标题模块，这篇文章说了一些关于加载标题模块的内容

有什么想法可以在`httpd.conf`文件中加载 headers 模块，或者让 firefox 接受外部字体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:05:49.277

我已经遇到了同样的问题。[有人建议我使用FontSquirrel 之](http://www.fontsquirrel.com/tools/webfont-generator)类的工具生成我的网络字体。上传你的字体文件并下载一个兼容的包。除了您的之外，还包括在您的 HTML 页面中的 css。它似乎有效，因为我确实喜欢这样。我希望你也一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:51:24.390

您可能在 Apache 配置中的某处需要它：

```
LoadModule headers_module modules/mod_headers.so 
```

如果您使用的是 Windows，则可能是`mod_headers.dll`，或稍有不同。您可能应该查看您的其他`LoadModule`语句`httpd.conf`以找出适当的版本。

# maven - Gradle 处理 maven 非 lib 工件依赖项的方式

> ID：15633222
> 
> 赞同：1
> 
> 时间：2013-03-26T09:16:19.313
> 
> 标签：maven, gradle, nexus

我之前在我们的内部 Maven 存储库中存档了一个 zip 工件。

在我的 Gradle 构建脚本中，我可以将工件作为依赖项引用，并且可以使用以下方法获取工件的路径：

```
configurations{
   resourceProperties
}

dependencies{
   resourceProperties "$group:$name:$version"
}

... def path = configurations.resourceProperties.asPath 
```

不幸的是，我也将所有 zip 工件的项目依赖项都附加到了路径上。

是否有另一种 Gradle 方法来处理我的构建中所需的非 lib Maven 工件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:30:14.667

您可以包含一个文件或目录作为依赖项。

试着从标准杆 45.4 开始看[这个](http://www.gradle.org/docs/current/userguide/dependency_management.html)

# java - RequestDispatcher：Servlet 映射无法正常工作

> ID：15633227
> 
> 赞同：0
> 
> 时间：2013-03-26T09:16:38.730
> 
> 标签：java, jakarta-ee, dispatcher

它是如此令人困惑。不知道这里发生了什么：

我想部署一个简单的 WAR 项目。两个 HttpServlet，一个只是将请求转发给另一个：

```
...
String[] selectedOptionsLabels = ...
req.setAttribute("checkedLabels", selectedOptionsLabels);
try {
   req.getRequestDispatcher("/confirmationservlet.do").forward(req, resp);
}
... 
```

当我尝试在表单上设置一些值时，它在没有调度程序的情况下工作得很好，但是当我尝试这个示例时，我的浏览器无法处理 servlet。它尝试下载文件confirmationservlet.do。令人困惑。

似乎存在映射问题，但我无法弄清楚，因为部署也可以正常工作。

你有想法吗？

这是我的 web.xml（没有外部 web-app-tag）<--- 仅用于测试目的，知道有注释。

```
<servlet>
    <servlet-name>FormHandlerServlet</servlet-name>
    <servlet-class>
      de.lancom.formhandling.FormHandlerServlet
    </servlet-class>    
</servlet>

<servlet-mapping>
    <servlet-name>FormHandlerServlet</servlet-name>
    <url-pattern>/formhandlerservlet.do</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>ConfirmationServlet</servlet-name>
    <servlet-class>
      de.lancom.formhandling.ConfirmationServlet
    </servlet-class>    
</servlet>

<servlet-mapping>
    <servlet-name>ConfirmationServlet</servlet-name>
    <url-pattern>/confirmationservlet.do</url-pattern>
</servlet-mapping> 

<welcome-file-list>
  <welcome-file>dataentry.html</welcome-file>
</welcome-file-list> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:16:30.200

尝试以下方法：

```
 HttpServletResponse#sendRedirect() 
```

发送重定向。

```
 response.sendRedirect("/confirmationservlet.do"); 
```

# java - java去除所有空格的方法

> ID：15633228
> 
> 赞同：130
> 
> 时间：2013-03-26T09:16:40.323
> 
> 标签：java, string, whitespace

我有一个编程任务，其中一部分要求我编写代码，从用户那里读取一行并删除该行中的所有空白。该行可以包含一个或多个单词。

我试图用这个程序做的是让它分析每个字符，直到找到一个空格，然后将该子字符串保存为第一个标记。然后再次循环，直到它不再到达标记或行尾。

当我尝试编译它时，我不断得到它：

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index   out of range: 1
    at java.lang.String.charAt(String.java:694)
    at trim.main(trim.java:23) 
```

这是代码

```
import java.util.Scanner ;
import java.lang.Character;
import java.lang.String ;
public class trim
{
        public static void main (String[]args)
        {

        String a  ;
        String b  ;
        String c ;
        char aChar ;
        int i = 0 ;

        Scanner scan = new Scanner(System.in);

        a = scan.nextLine();
        a =a.trim() ;

         for ( ; i >= 0 ; i++ )
         {
           aChar = a.charAt(i) ;
           if (aChar != 32)
           {
            a = a.substring(0,i+1);
           }
           else
           {
            b = a.substring(i,160) ;
            b= b.trim();
            c = c + a ;
            c = c.trim() ;
            a = b ;
            i = 0 ;
           }
           if (b.equals(null))
           {
            i = -1 ;
           }
         }
        }
} 
```

更简单的方法值得赞赏，但我仍然想让这个程序正常工作。

而且我不能在输入中使用哨兵。

* * *

谢谢大家的帮助，

我将使用更简单的方法，并阅读 javadoc。

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2013-03-26T09:19:37.807

`java.lang.String`类有方法`substring`not `substr`，那是你程序中的错误。

此外，如果您可以使用正则表达式，您可以在一行中执行此操作。

```
a.replaceAll("\\s+",""); 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2013-03-26T09:19:52.040

为什么不为此使用正则表达式？

```
a = a.replaceAll("\\s",""); 
```

在正则表达式的上下文中，`\s`将删除任何空格字符（包括空格、制表符等）。您需要在 Java 中转义反斜杠，以便正则表达式变为`\\s`. 此外，**由于字符串是不可变的，因此将正则表达式的返回值分配给** `a`.

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2016-04-06T07:31:48.427

`literals`不使用or的最直观的方法`regular expressions`：

```
yourString.replaceAll(" ",""); 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2013-03-26T09:19:50.103

用空字符替换字符串中的所有空格。

```
String lineWithoutSpaces = line.replaceAll("\\s+",""); 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2013-03-26T09:19:06.383

Try this:

```
String str = "Your string with     spaces";
str = str.replace(" " , ""); 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2013-03-26T09:19:09.593

Try:

```
 string output = YourString.replaceAll("\\s","") 
```

*s - indicates space character (tab characters etc)*

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2015-11-12T10:24:47.677

```
public static String removeSpace(String s) {
    String withoutspaces = "";
    for (int i = 0; i < s.length(); i++) {
        if (s.charAt(i) != ' ')
            withoutspaces += s.charAt(i);

    }
    return withoutspaces;

} 
```

这是从字符串中删除空格的最简单、最直接的方法。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2013-03-26T09:38:26.630

```
package com.infy.test;

import java.util.Scanner ;
import java.lang.String ;

public class Test1 {

    public static void main (String[]args)
    {

        String a  =null;

        Scanner scan = new Scanner(System.in);
        System.out.println("*********White Space Remover Program************\n");
        System.out.println("Enter your string\n");
    a = scan.nextLine();
        System.out.println("Input String is  :\n"+a);

        String b= a.replaceAll("\\s+","");

        System.out.println("\nOutput String is  :\n"+b);

    }
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-03-26T09:20:56.840

你不能只使用 String.replace(" ", "");

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-03-26T09:21:29.110

您可以使用正则表达式删除空格，尝试该片段：

```
Scanner scan = new Scanner(System.in);
    System.out.println(scan.nextLine().replaceAll(" ", "")); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-02-17T00:55:39.227

```
String a="string with                multi spaces ";
//or this 
String b= a.replaceAll("\\s+"," ");

String c= a.replace("    "," ").replace("   "," ").replace("  "," ").replace("   "," ").replace("  "," "); 
```

//它适用于任何空格

*不要忘记sting b中的空间

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-03-26T09:21:55.857

```
trim.java:30: cannot find symbol
symbol  : method substr(int,int)
location: class java.lang.String
b = a.substr(i,160) ; 
```

没有像`substr`String 类那样的方法。

使用 String.substring() 方法。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-04-06T06:49:21.257

```
boolean flag = true;
while(flag) {
    s = s.replaceAll(" ", "");
    if (!s.contains(" "))
        flag = false;
}
return s; 
```

* * *

## 回答 #14

> 赞同：-10
> 
> 时间：2016-02-16T23:07:47.443

```
String a="string with                multi spaces ";

String b= a.replace("    "," ").replace("   "," ").replace("  "," ").replace("   "," ").replace("  "," "); 
```

//它适用于任何空格

# arrayfire - gfor结构如何分配cuda线程？

> ID：15633230
> 
> 赞同：0
> 
> 时间：2013-03-26T09:16:49.387
> 
> 标签：arrayfire

谁能告诉我gfor结构是如何分配CUDA线程的？众所周知，在 Arrayfire 中，我们可以使用 gfor 进行并行计算。但是，CUDA的线程是有限的，所以我想知道，如何改进我的Arrayfire代码，我是否应该根据GPU硬件架构重新设计gfor结构。

# php - 将 $_SESSION 设置为两个 URL/域

> ID：15633233
> 
> 赞同：0
> 
> 时间：2013-03-26T09:16:54.763
> 
> 标签：php, session

是否可以在两个 URL/域上提供一组 $_SESSION？最终它们是相同的，我使用 .htaccess 重写域的一部分：

```
RewriteCond %{HTTP_HOST}                  ^pagefor\.local$ [NC]
RewriteRule ^([A-Za-z0-9-.]+)$       http://pagefor/$1.local [L,R]

RewriteRule ^([A-Za-z0-9-.]+).local$       index.php?site=$1 [NC,L] 
```

`http://pagefor.local/{USERNAME}`如果发生以下情况，则上述重写 URL `http://pagefor/{USERNAME}.local`。这一切都很好，尽管在`http://pagefor.local`相同的 $_SESSION 上设置了 $_SESSION 时在`http://pagefor/{USERNAME}.local`.

我认为 $_SESSION 对两者都可用，将其视为同一个域？为两者设置 $_SESSION 的最有效方法是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:15:59.607

PHP 会话依赖于 cookie（尤其是 PHPSESSID cookie）。Cookie 被分配给一个域名，这意味着您的浏览器不会将一个域设置的 cookie 泄露给另一个域。

# sql - Sql Server 选择查询的特殊用法

> ID：15633237
> 
> 赞同：1
> 
> 时间：2013-03-26T09:17:02.640
> 
> 标签：sql, sql-server, select

我有以下 SQL Server 表：

MyItemsTable（ID 和 LanguageId 是 guid，但我在这里使用 int 以便于解释）

```
Id | Title | LanguageId
1 | My German Document 1 | 1
2 | My German Document 2 | 1
3 | My English Document 1 | 2
4 | My French Document 1 | 3 
```

我的语言表

```
LanugageId | Code
1 | de-DE
2 | en-US
3 | fr-FR 
```

MyItemsTable 显示有一份文档（文档 1）提供所有语言版本，一份文档（文档 2）仅提供德语版本。

我现在需要的是一个提供所有法语文档的查询，如果没有可用的法语文档，那么给我例如德语。

法语的结果应如下所示：

```
My French Document 1
My German Document 2 
```

德语的结果应如下所示：

```
My German Document 1
My German Document 2 
```

我认为要解决三个问题：

1.  定义语言文档的整体性（属于其他语言但使用其他语言）
2.  如果一份文档不适用于所需语言，请定义顺序。接下来应该采取哪个。可能在创建第一个文档时在 MyItemsTable 上创建一个标志 -> IsFirst = true 并且在创建第一个文档的语言文档时 IsFirst = false。如果没有找到所需语言的文档，则采用 IsFirst = true -> 类似标记标准文档并在另一个不可用时采用此文档。
3.  创建一个简单的查询，例如以德语提供所有文档，如果一个文档不可用，则提供另一种语言的文档。

有什么想法如何以简单的方式构建这样的东西吗？您将如何为简单快速的解决方案构建数据库表（MyItemsTable 和 MyLanguagesTable 已给出但可以修改）？

非常感谢您的任何想法。

最好的问候马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:49:56.147

那么首先你应该有一个独立于语言的所有文档的表，然后有一个语言表（我建议对每种语言使用 iso 值：这是非常全面的，因为克林贡语也有一个值）然后你需要一个多对多表（实际上是两个一对多关系的组合）每个表都应该有聚集索引、主键和外键，以及潜在查询的覆盖索引。[如果您对这些术语中的任何一个不熟悉，那么 google 就像http://www.w3schools.com/sql/](http://www.w3schools.com/sql/)一样是您的朋友。使用这些约束构建的解决方案将充分发挥 Realtional (SQL) 数据库的功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:11:29.113

![在此处输入图像描述](../Images/dbd85a252a50762c12d84dd2abb2ec03.png)

您需要添加一个 Column 来指定类似文档的文档类型。所以在我的情况下它的 DOC_TYPE_ID

现在使用以下查询来发送 LANGUAGE_ID 即 (1, 2, 3)

* * *

> 声明 @LANGUAGE_ID INT
> 
> 设置@LANGUAGE_ID = 1；（更改值 1 为德语，3 为法语，2 为英语）
> 
> WITH T (ID, DOC_TYPE_ID, TITLE, LANGUAGE_ID, DOCUMENT_RECORD_COUNT) AS (
> 
> SELECT d.ID, d.DOC_TYPE_ID, d.TITLE, d.LANGUAGE_ID, DENSE_RANK() OVER (PARTITION BY d.DOC_TYPE_ID ORDER BY d.LANGUAGE_ID DESC) AS DOCUMENT_RECORD_COUNT FROM [Document] d
> WHERE 1 = (CASE WHEN @LANGUAGE_ID = 3 THEN CASE WHEN d.LANGUAGE_ID IN (1, 3) THEN 1 ELSE 0 END WHEN @LANGUAGE_ID = 2 THEN CASE WHEN d.LANGUAGE_ID IN (1, 2) THEN 1 ELSE 0 END WHEN d.LANGUAGE_ID = @LANGUAGE_ID THEN 1 ELSE 0 结束）

) 选择 ID、DOC_TYPE_ID、TITLE、LANGUAGE_ID、DOCUMENT_RECORD_COUNT

> FROM T WHERE DOCUMENT_RECORD_COUNT = 1 ORDER BY DOC_TYPE_ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:36:45.413

我认为您应该重组您的文档表以仅包含与语言无关的数据（DocumentID、创建日期、创建的用户文档类型等），

然后有另一个包含每种语言数据的表​​ (DocumentVersion)，其中 documentid 和 languageID 构成主键：

```
DocumentID  |  LanguageID  |  Title 
```

但是，由于您的语言代码是每种语言的唯一值，我会将其设为自然主键（或者您可以使用 sys.syslanguages）。这是我将用于此问题的数据结构：

```
CREATE TABLE Document
(       DocumentID      INT IDENTITY(1, 1) NOT NULL CONSTRAINT PK_Document_DocumentID PRIMARY KEY,
        DefaultTitle    VARCHAR(100) NOT NULL,
        CreatedDate     DATETIME NOT NULL
);
CREATE TABLE dbo.[Language]
(       LanguageCode    CHAR(5) NOT NULL CONSTRAINT PK_Lanaguage_LanguageCode PRIMARY KEY,
        Name            VARCHAR(50) NOT NULL,
        Alias           VARCHAR(50) NOT NULL
);
CREATE TABLE dbo.DocumentVersion
(       DocumentFK      INT NOT NULL,
        LanguageCode    CHAR(5) NOT NULL,
        Title           VARCHAR(50) NOT NULL
    CONSTRAINT PK_DocumentVersion PRIMARY KEY (DocumentFK, LanguageCode)
    CONSTRAINT FK_DocumentVersion_LanguageCode FOREIGN KEY (LanguageCode) REFERENCES dbo.[Language] (LanguageCode),
    CONSTRAINT FK_DocumentVersion_DocumentID FOREIGN KEY (DocumentFK) REFERENCES dbo.Document (DocumentID)
);
INSERT Document (DefaultTitle, CreatedDate) 
VALUES 
    ('Document 1', CURRENT_TIMESTAMP), 
    ('Document 2', CURRENT_TIMESTAMP);

INSERT dbo.[Language] (LanguageCode, Name, Alias)
VALUES 
    ('de-DE', 'Deutsch', 'German'), 
    ('en-US', 'US English', 'English'),  
    ('fr-FR', 'Français', 'French');

INSERT dbo.DocumentVersion (DocumentFK, LanguageCode, Title) 
VALUES
    (1, 'de-DE', 'My German Document 1'),
    (2, 'de-DE', 'My German Document 2'),
    (1, 'en-US', 'My English Document 1'),
    (1, 'fr-FR', 'My French Document 1') 
```

为了以您所说的方式获取文件，您需要一个自定义案例声明才能获得正确的订单。因此，对于上面的示例，您可以使用

```
DECLARE @PrimaryLanguage CHAR(5) = 'fr-FR',
        @DefaultLanguage CHAR(5) = 'de-DE';

WITH RankedDocument AS
(   SELECT  DocumentFK, 
            LanguageCode, 
            Title,
            SortOrder = CASE WHEN LanguageCode = @PrimaryLanguage THEN 1 
                            WHEN LanguageCode = @DefaultLanguage THEN 2
                            -- MORE SORTING CRITERIA IF REQURED
                            ELSE 10
                        END
    FROM    DocumentVersion
), Docs AS
(   SELECT  d.DocumentID,
            rd.Title,
            d.CreatedDate,
            rn = ROW_NUMBER() OVER(PARTITION BY d.DocumentID ORDER BY rd.SortOrder)
    FROM    Document d
            INNER JOIN RankedDocument rd
                ON d.DocumentID = rd.DocumentFK
)
SELECT  DocumentID, Title, CreatedDate
FROM    Docs
WHERE   rn = 1; 
```

**[法语文档示例](http://www.sqlfiddle.com/#!3/c732d/4)**

**[德国文件示例](http://www.sqlfiddle.com/#!3/c732d/5)**

**编辑**

要使用当前结构执行此操作，您需要向 中添加一个字段`MyItemsTable`，这应该是新表的外键，为了演示，我刚刚使用了`LinkField`：

```
DECLARE @PrimaryLanguage INT = 1,
        @DefaultLanguage INT = 1;

WITH RankedItem AS
(   SELECT  ID, 
            Title, 
            LanguageId, 
            rn = ROW_NUMBER() OVER(PARTITION BY LinkField ORDER BY CASE LanguageId 
                                                                                WHEN @PrimaryLanguage THEN 1
                                                                                WHEN @DefaultLanguage THEN 2 
                                                                                ELSE 10 
                                                                            END)
    FROM    MyItemsTable
)
SELECT  ID, Title, LanguageID
FROM    RankedItem
WHERE   rn = 1; 
```

**[SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/e37833/7)**

# c - 当其中一个字段是数组时，如何初始化结构的所有字段？

> ID：15633241
> 
> 赞同：4
> 
> 时间：2013-03-26T09:17:07.167
> 
> 标签：c, data-structures, gcc-warning

```
#include <stdio.h>

typedef struct
{
    int as;
    int bs;
    int cs;
}asd_t;

typedef struct
{
    asd_t asd[10];
}asd_field_t;    

typedef struct
{
    int a;
    int b;
    asd_field_t  asd_field[10];
}abc_t;    

int main()
{
    abc_t abc ={0,1,{0}};
    return 0;
} 
```

在上面的代码中，我试图初始化结构`abc_t`。将上面的代码编译为：

```
gcc -Wall sample.c 
```

给我：

```
sample.c: In function 'main':
sample.c:26: warning: missing braces around initializer
sample.c:26: warning: (near initialization for 'abc.asd_field[0].asd') 
```

如何避免此警告？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T09:21:30.400

结构 abc_t 在 asd_field_t 类型内有另一个结构，您可以使用 {0} 将其初始化为 0。您从 GCC 收到的警告是因为您将该结构 (asd_field) 的所有成员归零，而不是一一填充它们。有一种说法认为 GCC 的这种行为是不正确的，因为标准认为使用 {0} 将整个结构归零是完全有效的。[你可以在这里](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53119)阅读 GCC 的错误报告

您还可以通过传递选项 -Wno-missing-braces 来禁用烦人的警告，以便获得所有其他墙壁警告，即： `gcc -Wall -Wno-missing-braces test.c -o test`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:36:40.250

尝试这个：

```
abc_t abc ={0,1,{{{{0,0,0}}}}}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:20:35.290

好吧，您必须在 struct 中嵌套数组`abc_t`，因此，您必须执行以下操作：

```
abc_t abc = {0,1,{{0,0,0}}}; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-26T11:11:23.287

abc_t abc ={0,1,{ {{{0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0} , {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}}},{{{0,0, 0}，{0,0,0}，{0,0,0}，{0,0,0}，{0,0,0}，{0,0,0}，{0,0,0} , {0,0,0}, {0,0,0}, {0,0,0}}},{{{0,0,0}, {0,0,0}, {0,0, 0}，{0,0,0}，{0,0,0}，{0,0,0}，{0,0,0}，{0,0,0}，{0,0,0} , {0,0,0}}},{{{0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0, 0}，{0,0,0}，{0,0,0}，{0,0,0}，{0,0,0}，{0,0,0}}}，{{{0, 0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0, 0}, {0,0,0}, {0,0,0}, {0,0,0}}},{{{0,0,0}, {0,0,0}, {0, 0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0, 0}, {0,0,0}}},{{{0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0, 0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}}},{{{ 0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0, 0,0}, {0,0,0}, {0,0,0}, {0,0,0}}},{{{0,0,0}, {0,0,0}, { 0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0, 0,0}, {0,0,0}}},{{{0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0, 0}，{0,0,0}，{0,0,0}，{0,0,0}}} }}；

# php - 如何在php中增加文件名以防止重复

> ID：15633242
> 
> 赞同：6
> 
> 时间：2013-03-26T09:17:07.857
> 
> 标签：php

在很多情况下，我们需要在创建它们时在服务器上使文件名不同，以防止重复。最常见的答案似乎是，在末尾附加时间戳或将文件名存储在数据库中，并使用这些存储的值来计算新名称。这些都很好，但是，附加一个长的时间戳并不总是非常用户友好，并且存储在数据库中并不总是一种选择。那么，我们如何在通过 php 创建标准文件名时自动增加它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-06-18T14:56:43.223

所有这些答案似乎都过分了：

```
$k = 0;
while(!$result){
    if(!file_exists("file[$k].ext"))
        $result = "file[$k].ext";
    $k++;
}
makefile($result); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T09:17:07.857

这是我为此目的编写的一个简单函数：

```
function incrementFileName($file_path,$filename){
 if(count(glob($file_path.$filename))>0)
 {
     $file_ext = end(explode(".", $filename));
     $file_name = str_replace(('.'.$file_ext),"",$filename);
     $newfilename = $file_name.'_'.count(glob($file_path."$file_name*.$file_ext")).'.'.$file_ext;
     return $newfilename;
  }
  else
  {
     return $filename;
  }
} 
```

用法：

```
$newName = incrementFileName( "uploads/", $_FILES["my_file"]["name"] );
move_uploaded_file($_FILES["my_file"]["tmp_name"],"uploads/".$newName); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-11-07T14:52:15.590

这是一个简短的代码片段，演示了如何开始解决这个问题。

```
// handle filename collision:
if(file_exists($newFile)) {
    // store extension and file name
    $extension = pathinfo($newFile,PATHINFO_EXTENSION);
    $filename = pathinfo($newFile, PATHINFO_FILENAME);

    // Start at dup 1, and keep iterating until we find open dup number
    $duplicateCounter = 1;
    // build a possible file name and see if it is available
    while(file_exists($iterativeFileName =
                        $newPath ."/". $filename ."_". $duplicateCounter .".". $extension)) {
        $duplicateCounter++;
    }

    $newFile = $iterativeFileName;
}

// If we get here, either we've avoided the if statement altogether, and no new name is necessary..
// Or we have landed on a new file name that is available for our use.
// In either case, it is now safe to create a file with the name $newFile 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T10:59:06.633

```
function incrementFileName($file_path,$filename){
  $array = explode(".", $filename);
  $file_ext = end($array);
  $root_name = str_replace(('.'.$file_ext),"",$filename);
  $file = $file_path.$filename;
  $i = 1;
  while(file_exists($file)){
    $file = $file_path.$root_name.$i.'.'.$file_ext;
    $i++;
  }
  return $file;
} 
```

# windows-phone-7 - WP7 SupportedOrientations="Portrait" 时检测屏幕方向变化

> ID：15633244
> 
> 赞同：4
> 
> 时间：2013-03-26T09:17:10.150
> 
> 标签：windows-phone-7, windows-phone-8

我想保持页面的方向始终相同，例如 SupportedOrientations="Portrait"。但我想检测屏幕方向的变化。可能吗？我厌倦了 OrientationChanged="PhoneApplicationPage_OrientationChanged"，但它不起作用。我必须使用加速度计还是有更简单的方法来检测它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:47:21.600

@heavyauto

[Windows Phone 7 中的页面方向](http://dotneteers.net/blogs/vbandi/archive/2011/03/08/handling-wp7-orientation-changes-via-visual-states.aspx)..Maybe this is Use full to You

# sql - 从 Select 语句将 varchar2 参数传递给 plsql 过程

> ID：15633246
> 
> 赞同：4
> 
> 时间：2013-03-26T09:17:15.793
> 
> 标签：sql, oracle, plsql, toad

在 Oracle Toad 中执行以下语句

```
exec plsql_procedure(select 'somestring' from dual); 
```

引发以下异常：

ORA-06550：第 1 行，第 33 列：PLS-00103：在预期以下情况之一时遇到符号“SELECT”：

( ) - + case mod new 不为空

过程采用一个 VARCHAR2 参数。如何修复？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:24:39.383

除非您使用 select from dual 只是其他示例，否则请忽略选择。

```
exec plsql_procedure('somestring'); 
```

否则，选择一个变量并将其传递给过程。

```
declare
  my_var table_name.column_name%Type;
begin

  select column_name
  into   my_var
  from   table_name
  where  ...;

  plsql_procedure(parameter_name => my_var);

end;
/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:22:18.350

我尝试了几种方法。其中包括：

```
exec plsql_procedure((select 'somestring' from dual));

EXECUTE IMMEDIATE ('testProc('''||(SELECT 'Testing' FROM dual)||''')');

EXECUTE IMMEDIATE ('EXEC testProc('''||(SELECT 'Testing' FROM dual)||''')'); 
```

以上都没有奏效。看起来 Oracle 在任何情况下都不允许`SELECT`在参数列表中使用语句。

我做的一件事是将`SELECT`查询结果存储到一个变量中，然后像下面这样使用它：

```
CREATE OR REPLACE PROCEDURE testProc (
   testVar IN VARCHAR2 -- Proc accepts VARCHAR2
) IS
BEGIN
    dbms_output.put_line(testVar);
END;
/

SET SERVEROUTPUT ON
DECLARE
  testVarIn VARCHAR(2000); -- Declare the variable
BEGIN
  SELECT 'Testing' INTO testVarIn FROM dual;
  -- Accept its value using SELECT ... INTO 

  testProc(testVarIn); -- Use the variable value to pass to the proc
END;
/ 
```

**输出：**

```
PROCEDURE testProc compiled
anonymous block completed
Testing 
```

当事情没有发生时，我们必须接受替代方案。我们的最终目标只是完成工作。我们做什么来完成它并不重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T10:06:58.820

函数可以，但过程不行。请注意，`select`需要用括号括起来，因此下面选择中的双括号。

```
create or replace function foo (x varchar2) return integer is
begin 
  --Do various stuff;
  return 1;
end;
/

select foo((select 'somestring' from dual)) from dual; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T11:20:09.063

要记住的一件事是关系查询不返回值 - 它返回一个表。尽管由于上下文（例如从 DUAL 中选择文字值）我们可能知道特定的 SELECT 只会返回单行，但数据库不知道这一点，并且会假设 SELECT 将返回包含多行的表。甚至 SELECT 1 FROM DUAL 返回一个表——这个表只有一列和一行，但它仍然是一个表。:-)

分享和享受。

# android - 方向改变时重新创建Android Activity

> ID：15633252
> 
> 赞同：1
> 
> 时间：2013-03-26T09:17:33.750
> 
> 标签：android, screen-orientation

我将以下代码放在 mymainfest 文件中

```
android:configChanges="orientation|keyboardHidden|screenSize" 
```

但在 android 4.0(ICS) 中，当我更改屏幕方向时会重新创建活动。

只需给我适用于所有 android 版本的通用代码。因为上面的行适用于 android 4.2 版本

# javascript - jQuery plugin template pattern

> ID：15633254
> 
> 赞同：0
> 
> 时间：2013-03-26T09:17:43.177
> 
> 标签：javascript, jquery, jquery-plugins

Is this plugin pattern a good one ?

[http://jsbin.com/isobar/12/edit](http://jsbin.com/isobar/12/edit)

My goal was to have a global variable for each instance of the plugin, `base`, and the ability to call the same extern and intern method.

```
$('.my-plugin').myPlugin('myMethod', 'argument1', 'argument2');
or
base.myMethod('argument1', 'argument2'); 
```

Is there any specific compatibility problem or javascript errors?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:21:37.433

使用[jQuery Boilerplate](http://jqueryboilerplate.com/)并阅读这个[jQuery 插件模板 - 最佳实践、约定、性能和内存影响。](https://stackoverflow.com/questions/5980194/jquery-plugin-template-best-practice-convention-performance-and-memory-impac)

然后从这个精彩的视频开始：[jQuery 插件开发。](https://tutsplus.com/lesson/head-first-into-plugin-development/)

# linux - nginx error bind Cannot assign requested address

> ID：15633258
> 
> 赞同：1
> 
> 时间：2013-03-26T09:17:59.627
> 
> 标签：linux, nginx, amazon-ec2

I am running Amazon Linux AMI and nginx and when I try starting my nginx server:

```
$ sudo /etc/init.d/nginx restart 
```

I get the following error:

```
nginx: [emerg]: bind() to IP failed (99: Cannot assign requested address) 
```

where "IP" is a placeholder for my IP address. Does anybody know why that error might be happening? This is running on EC2.

My nginx.conf file looks like this:

```
user              app;
worker_processes  4;

#error_log  /var/log/nginx/error.log;
#error_log  /var/log/nginx/error.log  notice;
error_log  /var/log/nginx/error.log  info;

pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    access_log  /var/log/nginx/access.log;

    sendfile        on;
    tcp_nopush     on;
    tcp_nodelay    on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    gzip  on;
    gzip_http_version 1.0;
  gzip_comp_level 2;
  gzip_proxied any;
  gzip_types text/plain text/html text/css application/x-javascript application/xml application/xml+rss text/javascript;

  server_names_hash_bucket_size 64;

  include /etc/nginx/conf.d/*.conf;
  include /etc/nginx/sites-enabled/*;
  server {
        listen          IP:443; 
        server_name     name;
        include /etc/nginx/ssl.conf;
  }
} 
```

[kirpit](https://stackoverflow.com/questions/3191509/nginx-error-99-cannot-assign-requested-address) say:With Amazon EC2 and elastic IPs, the server doesn't actually know its IP as with most any other server. So you need to tell your linux to allow processes to bind to the non-local address. Just add the following line into /etc/sysctl.conf and then reload your sysctl.conf.

But on Amazon Linux AMI `bash: sysctl: command not found`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T11:43:17.953

你能把IP部分去掉吗？

```
listen 443; 
```

如果您为服务器分配了多个 IP，并且您希望 nginx 仅侦听该 IP，则只需指定一个 IP。

# javascript - onblur event execute after blur

> ID：15633259
> 
> 赞同：2
> 
> 时间：2013-03-26T09:17:59.857
> 
> 标签：javascript, jquery

I stuck on stranger issue on blur and onblur event on jquery. When you blur on input then onblur event execute first and .blur method. But when you call trigger .blur by clicling on anchor tag then .blur method execute first then onblur event. why this difference and any solution for this.[Demo](http://jsfiddle.net/W3BDW/2/)

```
<head>
    <script type="text/javascript" src="jquery-1.8.3.js"></script>
    <script type="text/javascript">
        $(function () {
            $('a').click(function () {
                $('input').blur();
            })
        })

        function test() {
            alert(0);
        }
        $(function () {
            $('input').blur(function () {
                alert(1);
            })
        })
    </script>
</head>
<body>
    <input type="text" onblur="test()" />
    <a href="#">blur input</a>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:24:58.137

*注意：做`$('input').blur()`没有多大意义，因为一次只有一个项目有焦点（如果有的话）。使用该语法后发生任何事情的事实是因为 jQuery（它触发向它注册的处理程序，并尝试执行（在本例中）`blur`和`onblur`属性作为函数。另一方面，调用`blur()`常规 DOM 节点（如`$('input')[0].blur()`）， is not current focus 没有任何效果（模糊处理程序不会触发）。*

我不完全明白，你为什么要这样做，但是如果你坚持这样做并且你想，基本上，确保你的模糊处理程序在 onblur 属性中定义的处理程序之前触发，你可以使用双重方法（使用`jQuery.on`和常规处理程序寄存器）。这样，第一个处理程序或第二个处理程序将在属性中分配的处理程序之前触发。

这里的基本示例[http://jsfiddle.net/W3BDW/5/](http://jsfiddle.net/W3BDW/5/)

它需要一些调整，特别是如果您关心它可能会触发多次（在这种情况下动态处理处理程序，或在某处存储信息，该事件已被处理）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:26:47.697

我不认为它会像你在问题中提到的那样发生*`onblur event execute after blur`*

您当前的代码`onblur`首先内联触发，然后是 jQuery 的`blur`.

您的代码按预期工作，但这是一个更好的代码，其中包含一个`doc ready`和一个功能测试。

```
function test() {
   alert(0);
}
$(function () {
   $('a').click(function () {
      $('input').blur();
   });

   $('input').blur(function () {
      alert(1);
   });
}); 
```

# java - How can I synchronize the events for a group of channels in Netty...?

> ID：15633264
> 
> 赞同：3
> 
> 时间：2013-03-26T09:18:12.830
> 
> 标签：java, netty

Is it possible to synchronize all the events happening for a group of channels in netty.I have tried to achieve this using `OrderedMemoryAwareThreadPoolExecutor`, but not all events are `synchronized`. Could you please suggest any methods to `synchronize` all events for a group of channels.

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:58:24.490

我相信你想要的在java中被称为[条件。](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html)

初始化

```
final Lock lock = new ReentrantLock();
final Condition cond  = lock.newCondition(); 
```

在您使用的所有功能中，您需要先锁定锁，并确保您可以释放它：

```
lock.lock();
try {
  // do you stuff...
} finally {
    lock.unlock();//interrupt or not, release lock
} 
```

在所有你想等你的地方打电话

```
cond.await(); 
```

当所有需要继续的条件都得到满足时，你打电话

```
cond.signal(); 
```

# linux - iText fonts when generating PDF from HTML

> ID：15633265
> 
> 赞同：0
> 
> 时间：2013-03-26T09:18:15.880
> 
> 标签：linux, fonts, itext

I am trying to generate a PDF using HTML with iText. The html contains some cyrillic letters. And everything works fine on my windows 7 OS.

Here is how I generate the PDF:

```
// Registers the fonts folder.
    FontFactory.registerDirectory(fontFolder);

    Set<String> registeredFonts = FontFactory.getRegisteredFonts();
    LOGGER.info("Registered fonts : " + registeredFonts);

    // Adds wrapper HTML and BODY tags.
    content = "<HTML><BODY style=\"font-family: " + fontFamily + "\">" + content + "</BODY></HTML>";
    content = content.replace(NEW_LINE_SEPARATOR, "<br />");

    // Create input stream from the html content
    InputStream stream = new ByteArrayInputStream(content.getBytes("UTF-8"));
    // convert to PDF
    XMLWorkerHelper worker = XMLWorkerHelper.getInstance();
    worker.parseXHtml(writer, document, stream, Charset.forName("UTF-8")); 
```

The font folder variable contains path to arial fonts and fontFamily variable contains the String "arial".

The problem is, that when I deploy the web application on remote linux jboss server this bit of code won't display the cyrillic symbols (the latin ones and the numbers are just fine).

I guess the problem is with missing fonts but can't figure out what exactly is causing it as my configuration on the server seems fine.

# android - Local spoken command recognition on mobile devices

> ID：15633270
> 
> 赞同：2
> 
> 时间：2013-03-26T09:18:54.250
> 
> 标签：android, ios, speech-recognition

I need to implement spoken command recognition in Android and iPhone apps without the use of internet communication - it all has to be processed locally on the devices and it must be able to distinguish 20-50 commands.

In other words: Local limited vocabulary speaker independent speech recognition running on both Android and iOS.

Using Google does not enlighten me enough so I was hoping for some advice from people having worked with this subject.

Any advice?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:35:58.423

您可以使用 CMUSphinx。

通过 OpenEars 在 iPhone 上安装 CMUSphinx：

[http://www.politepix.com/](http://www.politepix.com/)

Android上的CMUSphinx：

[http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)

# constructor - Closured constructor locals in CoffeeScript

> ID：15633272
> 
> 赞同：0
> 
> 时间：2013-03-26T09:19:05.830
> 
> 标签：constructor, coffeescript, closures

Sometimes I write my JS classes like this:

```
mylib.Container = function() {
  var things = [];

  // Returns the index of the image added
  this.addItem = function(item)
  {
    things.push(item)
  }
}
...
var c = new mylib.Container();
c.addItem(whatever); 
```

I use "constructor-scoped" closured variables (like `things`) to avoid `this` scoping issues, and I am also using them in tight loops (like the ones used in `requestAnimationFrame`). These variables never bleed to the outside of the created fubject.

Is there a way to create and use such variables in CoffeeScript? I know that I have the `@ivar` notation which is shorter than `this` but something is telling me acessing a closured `var`might still be faster...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:14:25.147

在您的代码中，您在构造函数中分配函数。你也可以在咖啡中做到这一点

```
myLib.container = ->
  things = []

  @addItem = (item) -> things.push item

  this 
```

或者如果你*真的*想使用类语法

```
class myLib.container
  constructor: ->
    things = []
    @addItem = (item) -> things.push item 
```

# wpf - WPF ListBox DataTrigger does not fire

> ID：15633277
> 
> 赞同：1
> 
> 时间：2013-03-26T09:19:13.233
> 
> 标签：wpf, listbox, datatrigger

I have a "playlist" and I want to emphasize "now playing" item.

I tried this

```
<!-- Row 5: Playlist -->
    <ListBox x:Name="Tracks" MinHeight="400" Grid.Row="5" Margin="20">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <DockPanel Height="44" Width="436" Dock="Left">
                    <StackPanel Orientation="Vertical" Width="374" Name="Wrapper">
                        <Label Content="{Binding Path=title}"  Name="Test" Foreground="CornflowerBlue" FontSize="14" Padding="0" />
                        <Label Content="{Binding Path=artist}" Foreground="DarkGray"       FontSize="14" Padding="0" />
                    </StackPanel>
                    <Label Content="{Binding Path=DurationFormatted}" Foreground="DarkGray" Width="62" Padding="0" DockPanel.Dock="Right" HorizontalContentAlignment="Right" />
                </DockPanel>
                <DataTemplate.Triggers>
                    <DataTrigger Binding="{Binding Path=NowPlaying}" Value="True">
                        <Setter TargetName="Wrapper" Property="Background" Value="LightBlue"/>
                        <Setter TargetName="Test" Property="FontSize" Value="24"/>
                        <Setter Property="ListBoxItem.Foreground" Value="Red" />
                    </DataTrigger>
                </DataTemplate.Triggers>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

And this

```
<ListBox.ItemTemplate>
same stuff without Triggers section
<ListBox.ItemContainerStyle>
    <Style TargetType="{x:Type ListBoxItem}">
       <Style.Triggers>
           <DataTrigger Binding="{Binding Path=NowPlaying}" Value="True">
              <Setter Property="ListBoxItem.Background"  Value="Red" />
           </DataTrigger>
       </Style.Triggers>
    </Style>
</ListBox.ItemContainerStyle> 
```

NowPlaying is just a bool property of audio model and I checked in debugger that current object indeed get NowPlaying == true. But both of this triggers does not change item look. What I'm doing wrong? Also, as for me, I prefer imperative style. Is it easy enough to do this from codebehind?

P.S. I set extreme values for emphasized item just for testing :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T09:27:42.740

[还记得您需要通过实现INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口来提高 NowPlaying 属性吗？否则，绑定引擎无法看到属性已更改，因此无法对视图进行更新。

并且只是一个小补充：我肯定会赞成第一种方法，尽量避免使用 datatrigger，实际上所有与业务数据相关的数据绑定都尽可能采用样式。Style 应该只包含视图设计，DataTemplates 用于显示真实数据。如果您将其分开，则重用样式会容易得多。

# syntax - 我的续行语法有什么问题？

> ID：15633279
> 
> 赞同：0
> 
> 时间：2013-03-26T09:19:17.177
> 
> 标签：syntax, fortran

在我被分配到的一个项目中，我被要求用 f77 编译我的代码，我试图掌握如何处理每行 72 个字符的限制。我想编写以下代码行：

```
!use the numbers to check my indentation...
!2345678901234567890
                  MPI_SEND(slave, 1, MPI_INTEGER, slave, MPI_ANY_TAG, MPI_COMM_WORLD, ierr) 
```

之前的长缩进是因为该行位于几个块内，我想解决这个问题而不必牺牲代码缩进（即可读性）。

`MP`照原样，代码在in之后被截断`MPI_COMM_WORLD`，所以我想我只是换行，并在第 6 列中添加一个行继续符。我在网上看到了将`+`整数数字作为行继续符的示例，所以我尝试了以下两个版本：

```
!2345678901234567890
                  MPI_SEND(slave, 1, MPI_INTEGER, slave, MPI_ANY_TAG,
     1              MPI_COMM_WORLD, ierr)
                  MPI_SEND(slave, 1, MPI_INTEGER, slave, MPI_ANY_TAG,
     +              MPI_COMM_WORLD, ierr) 
```

他们俩都在第一行给我一个编译错误，说

```
 MPI_SEND(slave, 1, MPI_INTEGER, slave, MPI_ANY_TAG,   
                  1
Error: Unclassifiable statement at (1) 
```

该代码位于一个名为 的代码文件中`pi.f`，我正在使用它进行编译，`make pi`并且我的 makefile 中有（仅）以下内容：

```
FC = mpif77 
FFLAGS=-Wall 
```

Make告诉我编译文件的实际命令是

```
mpif77 -Wall pi.f -o pi 
```

我在这里做错了什么？我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:05:41.513

在担心您可能（或可能不会）遇到的任何行继续语法问题之前，我建议您注意编译器的错误消息。 `MPI_SEND`是一个子程序，不是函数也不是命令，它的使用应该在关键字之前`call`。

# android - 可搜索的活动被调用两次

> ID：15633282
> 
> 赞同：13
> 
> 时间：2013-03-26T09:19:27.627
> 
> 标签：android, search

我正在尝试创建我的第一个 Android 应用程序，并正在添加搜索功能。我已经按照 Android 开发者文档添加了搜索对话框和小部件。不幸的是，每当我执行搜索时，都会调用搜索活动的“onCreate”和“onNewIntent”。也就是说，通过在操作栏搜索框中键入内容并按 ENTER，搜索称为 TWICE。我被困住了。是否应该从 Searchable 活动返回一些全局标志，通知应用程序搜索已完成？搜索对话框和小部件都被调用了吗？

我在这个网站和网络上搜索过以前的帖子，但无济于事。感谢您的任何帮助。

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.shop"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <service android:name="com.shop.RestIntentService" />

        <activity
            android:name="com.shop.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name="com.shop.CatalogActivity"
            android:label="@string/app_name" >
        </activity>

        <activity
            android:name="com.shop.SearchableActivity"
            android:launchMode="singleTop" >
            <intent-filter>
                <action android:name="android.intent.action.SEARCH" />
            </intent-filter>

            <!--
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
            </intent-filter>
            -->

            <meta-data
                android:name="android.app.searchable"
                android:resource="@xml/searchable" />
        </activity>

        <meta-data
            android:name="android.app.default_searchable"
            android:value="com.shop.SearchableActivity" />

    </application>

</manifest> 
```

**SearchableActivity.java**

```
 public class SearchableActivity extends ListActivity implements Receiver {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        System.out.println("onCreate");
        handleIntent(getIntent());
    }

    @Override
    public void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        System.out.println("onNewIntent");
        setIntent(intent);
        handleIntent(intent);
    }

    private void handleIntent(Intent intent) {
        if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
            String query = intent.getStringExtra(SearchManager.QUERY);
            doSearch(query);
        }
    }

    private void doSearch(String queryStr) {
        System.out.println("searching..." + queryStr);
    } 
```

**目录活动.java**

```
@Override   
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.sample, menu);

        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);

        SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();

        searchView.setSearchableInfo(searchManager
                .getSearchableInfo(getComponentName()));

        //return super.onCreateOptionsMenu(menu);
        return true;
    } 
```

**示例.xml**

```
<item
    android:id="@+id/menu_search"
    android:actionViewClass="android.widget.SearchView"
    android:icon="@android:drawable/ic_menu_search"
    android:showAsAction="ifRoom|collapseActionView"
    android:title="@string/menu_search"/> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-29T11:18:59.493

我认为方法 onNewIntent 和 onCreate 是互斥的。您将launchMode 设置为“singleTop”，因此将调用onNewIntent 方法而不是onCreate。

当一个搜索请求被处理两次时，我遇到了类似的问题。在 WXGA 10.1 平板电脑模拟器中使用 SearchableDictionary 示例时，我发现第一个搜索调用工作正常，但随后的调用创建了两个 SEARCH 事件，因此它们被处理了两次。有人提到 Ti 中的一个错误。（[http://developer.appcelerator.com/question/127166/android-search-keyboardtype-fires-return-event-twice](http://developer.appcelerator.com/question/127166/android-search-keyboardtype-fires-return-event-twice)）

我在真正的三星平板电脑上测试了应用程序，但没有看到两个 SEARCH 事件，所以我猜这是模拟器问题，而不是代码问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-20T12:47:42.350

尝试在 SearchableActivity 中删除 super.OnNewIntent(intent)。

根据您的清单，您正在尝试使用搜索对话框

```
<meta-data
android:name="android.app.default_searchable"
android:value="com.shop.SearchableActivity" /> 
```

同时您在菜单中使用 SearchView。如果你使用 SearchView 你应该使用

```
 <meta-data android:name="android.app.searchable"
               android:resource="@xml/searchable"/> 
```

就像在[http://developer.android.com/guide/topics/search/searchable-config.html](http://developer.android.com/guide/topics/search/searchable-config.html)中一样。

这是我的 xml/searchable.xml 示例：

```
<searchable xmlns:android="http://schemas.android.com/apk/res/android" 
    android:label="@string/app_name"
    android:hint="@string/search"
    android:searchSuggestAuthority="@string/authority"
    android:searchSuggestSelection=" ?"
    android:voiceSearchMode="launchRecognizer">
</searchable> 
```

# ios - 拍摄第三张照片后应用程序崩溃 - iOS

> ID：15633286
> 
> 赞同：1
> 
> 时间：2013-03-26T09:19:44.097
> 
> 标签：ios, objective-c, memory, camera

我有一个视图，其中有 6 个图像视图。我使用相机 UIImagePickerController 设置图像。每次我选择第三张图片时，我的应用程序总是崩溃，当我检查仪器时，没有泄漏。怎么了？这是我的代码：

```
- (void)openCamera
{
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        [imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
        [imagePicker setDelegate:self];
        [self presentViewController:imagePicker animated:YES completion:nil];
    }
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSData* imageData = UIImageJPEGRepresentation([info objectForKey:UIImagePickerControllerOriginalImage], 0.0001f);
    [self dismissViewControllerAnimated:true completion:nil];
    if ([_selectedButton isEqualToString:@"headOffice"])
    {
        [[NSUserDefaults standardUserDefaults] setObject:imageData forKey:@"imgHeadOffice"];
        //_imgHeadOffice = [UIImage imageWithData:imageData];
        _imgViewHeadOffice.image = [UIImage imageWithData:imageData];
    }
    else if ([_selectedButton isEqualToString:@"siteOffice"])
    {
        [[NSUserDefaults standardUserDefaults] setObject:imageData forKey:@"imgSiteOffice"];
        //_imgSiteOffice = [UIImage imageWithData:imageData];
        _imgViewSiteOffice.image = [UIImage imageWithData:imageData];
    }
    else if ([_selectedButton isEqualToString:@"roadCondition"])
    {
        [[NSUserDefaults standardUserDefaults] setObject:imageData forKey:@"imgRoadCondition"];
        //_imgRoadCondition = [UIImage imageWithData:imageData];
        _imgViewRoadCondition.image = [UIImage imageWithData:imageData];
    }
    else if ([_selectedButton isEqualToString:@"vehicle"])
    {
        [[NSUserDefaults standardUserDefaults] setObject:imageData forKey:@"imgVehicle"];
        //_imgVehicle = [UIImage imageWithData:imageData];
        _imgViewVehicle.image = [UIImage imageWithData:imageData];
    }
    else if ([_selectedButton isEqualToString:@"installedTire"])
    {
        [[NSUserDefaults standardUserDefaults] setObject:imageData forKey:@"imgInstalledTire"];
        //_imgInstalledTire = [UIImage imageWithData:imageData];
        _imgViewInstalledTire.image = [UIImage imageWithData:imageData];
    }
    else if ([_selectedButton isEqualToString:@"tireScrap"])
    {
        [[NSUserDefaults standardUserDefaults] setObject:imageData forKey:@"imgTireScrap"];
        //_imgTireScrap = [UIImage imageWithData:imageData];
        _imgViewTireScrap.image = [UIImage imageWithData:imageData];
    }
} 
```

这是我的仪器快照： ![仪器快照](../Images/9d6555c25a6f4e42a605d96f281e02ce.png)

编辑：应用程序在处理线崩溃

```
NSData* imageData = UIImageJPEGRepresentation([info objectForKey:UIImagePickerControllerOriginalImage], 0.0001f); 
```

我第三次拍照。
这是应用程序关闭时的日志 ![日志快照](../Images/67d87b9691e11cd199b96f6c8b2ddf5b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:27:04.607

显然，对图像进行下采样仍然使其大小约为 200 kb。下采样后，我将其重新缩放到 37.5%，它工作得很好。谢谢大家

# regex - vim 查找和替换多行，不包括多个字符

> ID：15633288
> 
> 赞同：2
> 
> 时间：2013-03-26T09:19:48.910
> 
> 标签：regex, vim, latex

我想找到类型的结构

```
\be
 something
\ee 
```

在我的 LaTeX 文件中并将它们替换为

```
\begin{comment}
\be
 something
\ee
\end{comment} 
```

. 我能想到的最相似的事情是

```
:%s/\\be\(\_[^\]*\)\\ee/\\begin{comment}\r\\be\1\\ee\r\\end{comment}/g 
```

但是，如果某些内容包括例如 \frac{1}{2}，这将不再起作用。那么如何正确执行此替换？即，我如何从 \be 和 \ee 之间的正文中排除 \ee（而不仅仅是 \）？

万分感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T09:27:28.687

这条线可能对你有用：

```
%s/^\\be\_.\{-}\\ee/\\begin{comment}\r&\r\\end{comment}/ 
```

# html - CSS缩小浏览器窗口，浮动空白

> ID：15633291
> 
> 赞同：2
> 
> 时间：2013-03-26T09:19:53.847
> 
> 标签：html, css

我处于以下情况：我有一个显示设置为 inline-block 的容器。所以容器的宽度取决于里面的内容。

在容器内，我有两个向左浮动的 div；它们都有固定的宽度；这些 div 彼此相邻浮动，其中浏览器窗口的宽度大于两个 div 的宽度之和。

但是，我的问题来了，当我缩小浏览器窗口以使两个 div 不再彼此相邻时，第二个浮动 div 位于第一个浮动 div 下方（应该如此，我对此很满意） ，但容器的宽度不会修改，即使第二个 div 不再存在，容器仍然为它保留空间。我会将容器链接到缩小以及更大的浮动 div 的宽度。

任何帮助将不胜感激。非常感谢！

```
.Container {
    position:absolute;
    top:180px;
    width:100%;
    text-align:center;
    background: #DDD;
}
.Container span {
    position:relative;
    margin-top:0px;
    text-align:left;
    display: -moz-inline-stack;
    display:inline-block;
    zoom: 1;
    *display: inline;
    cursor:default;
    background: red;
}
.div1 {
    display:block;
    float:left;
    padding:0;
    width:100px;
    background: coral;
}
.div2 {
    display:block;
    float:left;
    padding:0;
    width:200px;
    background: #45dc2a;
} 
```

HTML

```
<div class="Container">
    <span>
        <div class="div1"></div>
        <div class="div2"></div>
    </span>
</div> 
```

演示：http: [//jsfiddle.net/C4Hcm/](http://jsfiddle.net/C4Hcm/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:44:03.463

两种可能的解决方案：

1）使用媒体查询，以便当浏览器达到一定大小时，css会发生变化。因此，当第二个 div 下降时，您添加一个媒体查询，其中 div 都填充容器。[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

2）在你的大小上使用百分比而不是像素 - 使用像素使 div 保持固定大小 浏览器使用百分比使 div x% 成为你所拥有的任何宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:01:00.827

发生这种情况是因为您将容器的宽度提到为 100%，因此它试图容纳可用空间。还要对您的代码进行 w3 验证，div 标签不能在 span 标签内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:50:47.170

使用一个小的 jquery 脚本尝试以下操作

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<style type="text/css">
.container{
background: yellow;
width: 100%;
}
.container .secondContainer {
    text-align:left;
background: blue;
display: inline-block;
max-width: 300px;
}

.div1 {
width:100px;
background: coral;
float: left;
}
.div2 {
width:200px;
background: #45dc2a;
float: left;
}
</style>
<script>

 $(window).resize(function(){
if($(".container").width() >= "300"){
$(".div1,.div2").css("float", "left");
}else{
  $(".div1,.div2").css("float", "none");

}
});
</script> 
```

身体包含

```
<div class="container">
<div class="secondContainer">
    <div class="div1">This is a text container  </div>
    <div class="div2"> This is a text container This is a text container</div>
</div> 
```

# dataflow - dfd中应该有哪个箭头？

> ID：15633293
> 
> 赞同：0
> 
> 时间：2013-03-26T09:19:56.177
> 
> 标签：dataflow

不确定这是否是提出这样一个问题的正确地方。但我相信这里有答案。

我应该做一个`Data Flow Diagram`并且很困惑使用直箭头而不是弯曲箭头是否正确？

![这是示例图像](../Images/06206c7d6836570bbbe8cc180583b1f5.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:24:27.353

风格在 Yourdan 表示法中很重要，分析师可以使用它来为 DFD 提供额外的含义。气泡的大小和形状取决于图表创建者及其客户。可以使用曲线箭头或直线箭头。一个图表看起来更整洁，但不是在同一个过程中。除了白板阶段，今天没有任何理由使用手绘图表。

分析师可以选择为执行它们的角色命名流程，并使用颜色来区分图中实体或流的类型。借助所有这些样式选项，DFD 可以提供尽可能多或尽可能少的细节，以适当地代表给定受众的流程。

# box-api - Boxnet 返回 ID 文件为负

> ID：15633310
> 
> 赞同：0
> 
> 时间：2013-03-26T09:20:56.913
> 
> 标签：box-api

当我尝试使用 API v1.0 下载文件时，文件 ID 为负数并返回下一条消息：

“没有这样的文件”

但我得到了名字、信息和其他信息。这只发生在某些文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:22:44.820

Box 文件 ID 可以进入“大整数”区域，即 > 2^32。不建议您将文件 ID 存储在整数数据结构中，而应将它们存储为字符串以避免任何问题溢出问题。

# java - 如何在运行时在android中将屏幕大小设置为全屏

> ID：15633313
> 
> 赞同：1
> 
> 时间：2013-03-26T09:21:11.813
> 
> 标签：java, android, android-layout, android-theme

当用户单击按钮但它不起作用时，我想将应用程序中的屏幕布局更改为全屏，**我的代码**是：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btnFullScreen = (Button) findViewById(R.id.btnFullScreen);
    btnNormalScreen = (Button) findViewById(R.id.btnNormalScreen);

    btnFullScreen.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            setTheme(R.style.AppBaseThemeFullScreen);

        }
    });

    btnNormalScreen.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            setTheme(R.style.AppBaseTheme);

        }
    });

} 
```

我的**全屏主题**是：

```
<style name="AppBaseThemeFullScreen" parent="android:Theme.Light">
    <item name="android:windowFullscreen">true</item>
    <item name="android:windowNoTitle">true</item>
</style> 
```

我的**正常主题**是

```
<style name="AppBaseTheme" parent="android:Theme.Light">
    <item name="android:windowNoTitle">true</item>
</style> 
```

因此，如果有任何方法可以做到这一点，请帮助我。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-26T09:27:46.420

```
void toggleFullScreen(boolean goFullScreen){   
    if(goFullScreen){
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
        getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
    }else{
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
        getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
    }

    yourView.requestLayout();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:28:04.337

如果您想从代码中更改主题，似乎您必须在调用`setContentView()`.

你也可以试试：

```
 requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                            WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

# angular-ui - 在 AngularUI 中使用 ui-select2 指令操作 select2 中的列表值

> ID：15633320
> 
> 赞同：0
> 
> 时间：2013-03-26T09:21:34.723
> 
> 标签：angular-ui, jquery-select2

我正在尝试从控制器一侧设置 select2 的值。问题是当我使用 ng-options 时，模型值的变化不会反映在 select2 列表中。

html:

```
<div ng-controller="MyCtrl">
    <a ng-click="selected2=['B','C']">Test</a>
    <br/>
    <select ui-select2 multiple ng-model="selected2" ng-options="item for item in newArr">          
    </select>
</div> 
```

js：

```
var myApp = angular.module('myApp', ['ui']);

function MyCtrl($scope) {
    $scope.newArr = ['A','B','C'];
    $scope.$watch('selected2', function(newVal,oldVal){
        console.log(newVal,oldVal);
    });
} 
```

这是小提琴

[http://jsfiddle.net/je_et/6yyqg/](http://jsfiddle.net/je_et/6yyqg/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T20:12:50.763

这对我有用。尝试在控制器中添加一行来初始化 selected2。

```
var myApp = angular.module('myApp', ['ui']);

function MyCtrl($scope) {
    $scope.newArr = ['A','B','C'];
    $scope.selected2 = ['A'];
    $scope.$watch('selected2', function(newVal,oldVal){
        console.log(newVal,oldVal);
    });
} 
```

# ios - GCD：如何检查两个 dispatch_queue_t 是否是同一个队列？

> ID：15633321
> 
> 赞同：0
> 
> 时间：2013-03-26T09:21:35.500
> 
> 标签：ios, grand-central-dispatch

```
dispatch_queue_t queue1 = /*some queue*/;
dispatch_queue_t queue2 = /*some queue*/; 
```

我如何知道 queue1 是否与 queue2 相同？

# sql-server-2008 - 如何删除主键而不删除引用它的外键？

> ID：15633327
> 
> 赞同：0
> 
> 时间：2013-03-26T09:21:52.977
> 
> 标签：sql-server-2008

我在 sql server 中尝试过“nocheck constraint all”，但无法删除该列。

```
alter table temp
nocheck constraint all
drop constraint [PK__temp3__DC501A3] 
```

# c# - C# - 向上转换为泛型方法的传递类型

> ID：15633334
> 
> 赞同：0
> 
> 时间：2013-03-26T09:22:12.753
> 
> 标签：c#, generics, casting

我正在使用`ADO.NET EF`和`Repository pattern`。我想分离一些我的一些实体常见的逻辑，我决定最好的方法是使用泛型方法。这是我的方法的声明：

```
internal static void ChangeCode<T>(IService<T> service, Entity entity, MaskedTextBox txtBox, string newCode, long? entityId)
            where T : Common.DbContextEntities.Entity 
```

`IService<T>`是派生所有服务的基类，`Entity`是派生所有实体的基类形式。但是在运行时，我传递了更具体的服务和实体，例如`SoleService`and `Sole`。我想要完成的是以某种方式声明运行时类型`service`和`entity`从整个方法中可见的那些属性。在这里说清楚是我现在要做的：

```
if (entity.GetType() == typeof(Sole))
            {
                Sole tempEntity = new Sole();
                ISoleService tempService = UnityDependencyResolver.Instance.GetService<ISoleService>(); 
```

问题是我只能在范围内使用`tempEntity`，并且如果我必须检查几种类型（实际上就是这种情况），我必须为每种不同类型重复所有业务逻辑。我正在寻找一种方法来设置并在运行时以特定的方式在方法中的任何地方使用它们。`tempService``if (entity.GetType() == typeof(Sole))``tempEntity``tempService`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:41:48.937

```
Sole tempEntity = new Sole();
ISoleService tempService = UnityDependencyResolver.Instance.GetService<ISoleService>(); 
```

可以改写为

```
BaseService tempEnitity = (BaseService)Activator.CreateInstance(entity.GetType());
IBaseService tempService = tempEnitity.GetServiceInterface(); 
```

其中 BaseService 是所有服务（SoleService 等）的父级，包含返回 IBaseService 的虚拟方法，所有服务接口（ISoleService 等）的父级。

因此，您的所有逻辑都将使用 BaseService 和 IBaseService 的方法。

# iphone - 逐个像素检查 UIImage

> ID：15633335
> 
> 赞同：8
> 
> 时间：2013-03-26T09:22:13.143
> 
> 标签：iphone, ios, objective-c

我正在创建一个应用程序，我试图在其中获取当前触摸点的颜色，如果该点不是黑色，那么它将运行迭代/递归并将所有非黑色点存储在数组中。我正在使用这个函数进行迭代：

```
-(void)function:(CGFloat)positiveX:(CGFloat)positiveY:(CGFloat)negativeX:(CGFloat)negativeY
{
    if (canDoPositiveX == YES)
    {
        //Checking in positive
        if (![[NSString stringWithFormat:@"%@",[self colorOfPoint:CGPointMake(positiveX, positiveY)]] isEqualToString:@"UIDeviceRGBColorSpace 0 0 0 1"])
        {
            CGPoint point = CGPointMake(positiveX, positiveY);
            [array addObject:[NSValue valueWithCGPoint:point]];
            [self function:positiveX+1 :positiveY :negativeX :negativeY];
        }
        else
        {
            canDoPositiveX = NO;
        }
    }

    if (canDoPositiveY == YES)
    {
        //Checking in positive
        if (![[NSString stringWithFormat:@"%@",[self colorOfPoint:CGPointMake(positiveX, positiveY)]] isEqualToString:@"UIDeviceRGBColorSpace 0 0 0 0"])
        {
            CGPoint point = CGPointMake(positiveX, positiveY);
            [array addObject:[NSValue valueWithCGPoint:point]];
            [self function:positiveX :positiveY+1 :negativeX :negativeY];
        }
        else
        {
            canDoPositiveY = NO;
        }
    }

    if (canDoNegativeX == YES)
    {
        //Checking in negative
        if (![[NSString stringWithFormat:@"%@",[self colorOfPoint:CGPointMake(negativeX, negativeY)]] isEqualToString:@"UIDeviceRGBColorSpace 0 0 0 1"])
        {
            CGPoint point = CGPointMake(negativeX, negativeY);
            [array addObject:[NSValue valueWithCGPoint:point]];
            [self function:positiveX :positiveY :negativeX-1 :negativeY];
        }
        else
        {
            canDoNegativeX = NO;
        }
    }

    if (canDoNegativeY == YES)
    {
        //Checking in negative        
        if (![[NSString stringWithFormat:@"%@",[self colorOfPoint:CGPointMake(negativeX, negativeY)]] isEqualToString:@"UIDeviceRGBColorSpace 0 0 0 1"])
        {
            negativeY -= 1;
            CGPoint point = CGPointMake(negativeX, negativeY);
            [array addObject:[NSValue valueWithCGPoint:point]];
            [self function:positiveX :positiveY :negativeX :negativeY-1];
        }
        else
        {
            canDoNegativeY = NO;
        }
    }

    NSLog(@"%u",[array count]);

} 
```

现在，我正在更改数组中那些点的颜色，但它只为点的直线着色，而不是每个像素。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T23:33:45.253

检查这个问题：

[如何从 UIImage (Cocoa Touch) 或 CGImage (Core Graphics) 获取像素数据？](https://stackoverflow.com/questions/448125/how-to-get-pixel-data-from-a-uiimage-cocoa-touch-or-cgimage-core-graphics)

您应该能够轻松地使用/修改已接受答案上的代码，以仅返回给定的黑色（或接近黑色）像素坐标`UIImage`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:42:53.033

尝试这个。我实际上无法测试它，但它应该可以工作。

```
-(void)function:(CGFloat)positiveX:(CGFloat)positiveY:(CGFloat)negativeX:(CGFloat)negativeY
{
    // Check your current point 
    if ([[NSString stringWithFormat:@"%@",[self colorOfPoint:CGPointMake(positiveX, positiveY)]] isEqualToString:@"UIDeviceRGBColorSpace 0 0 0 1"])
    {
        // reached the dead end (break recursion)
        return;
    }

    CGPoint point = CGPointMake(positiveX, positiveY);
    [array addObject:[NSValue valueWithCGPoint:point]];

    BOOL canDoPositiveX = ![[NSString stringWithFormat:@"%@",[self colorOfPoint:CGPointMake(positiveX+1, positiveY)]] isEqualToString:@"UIDeviceRGBColorSpace 0 0 0 1"];
    BOOL canDoPositiveY = ![[NSString stringWithFormat:@"%@",[self colorOfPoint:CGPointMake(positiveX, positiveY+1)]] isEqualToString:@"UIDeviceRGBColorSpace 0 0 0 1"];
    BOOL canDoNegativeX = ![[NSString stringWithFormat:@"%@",[self colorOfPoint:CGPointMake(positiveX-1, positiveY)]] isEqualToString:@"UIDeviceRGBColorSpace 0 0 0 1"];
    BOOL canDoNegativeY = ![[NSString stringWithFormat:@"%@",[self colorOfPoint:CGPointMake(positiveX, positiveY-1)]] isEqualToString:@"UIDeviceRGBColorSpace 0 0 0 1"];

    if (canDoPositiveX == YES)
    {
        [self function:positiveX+1 :positiveY :negativeX :negativeY];
    }

    if (canDoPositiveY == YES)
    {
        [self function:positiveX :positiveY+1 :negativeX :negativeY];
    }

    if (canDoNegativeX == YES)
    {
        [self function:positiveX :positiveY :negativeX-1 :negativeY];
    }

    if (canDoNegativeY == YES)
    {
        [self function:positiveX :positiveY :negativeX :negativeY-1];
    }

    NSLog(@"%u",[array count]);
} 
```

还要从你的类 canDoPositiveX、canDoPositiveY、canDoNegativeX、canDoNegativeY 中删除这些变量

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T17:28:14.843

尝试使用此修改后的代码：

```
-(void)function:(CGFloat)positiveX:(CGFloat)positiveY:(CGFloat)negativeX:(CGFloat)negativeY
{
    if (canDoPositiveX == YES)
    {
        //Checking in positive
        if (![[NSString stringWithFormat:@"%@",[self colorOfPoint:CGPointMake(positiveX, positiveY)]] isEqualToString:@"UIDeviceRGBColorSpace 0 0 0 1"])
        {
            CGPoint point = CGPointMake(positiveX, positiveY);
            [array addObject:[NSValue valueWithCGPoint:point]];
            [self function:positiveX+1 :positiveY :negativeX :negativeY];
        }
        else
        {
            canDoPositiveX = NO;
            canDoPositiveY = YES;
            canDoNegativeX = YES;
            canDoNegativeY = YES;
        }
    }

    if (canDoPositiveY == YES)
    {
        //Checking in positive
        if (![[NSString stringWithFormat:@"%@",[self colorOfPoint:CGPointMake(positiveX, positiveY)]] isEqualToString:@"UIDeviceRGBColorSpace 0 0 0 0"])
        {
            CGPoint point = CGPointMake(positiveX, positiveY);
            [array addObject:[NSValue valueWithCGPoint:point]];
            [self function:positiveX :positiveY+1 :negativeX :negativeY];
        }
        else
        {
            canDoPositiveX = YES;
            canDoPositiveY = NO;
            canDoNegativeX = YES;
            canDoNegativeY = YES;
        }
    }

    if (canDoNegativeX == YES)
    {
        //Checking in negative
        if (![[NSString stringWithFormat:@"%@",[self colorOfPoint:CGPointMake(negativeX, negativeY)]] isEqualToString:@"UIDeviceRGBColorSpace 0 0 0 1"])
        {
            CGPoint point = CGPointMake(negativeX, negativeY);
            [array addObject:[NSValue valueWithCGPoint:point]];
            [self function:positiveX :positiveY :negativeX-1 :negativeY];
        }
        else
        {
            canDoPositiveX = YES;
            canDoPositiveY = YES;
            canDoNegativeX = NO;
            canDoNegativeY = YES;
        }
    }

    if (canDoNegativeY == YES)
    {
        //Checking in negative        
        if (![[NSString stringWithFormat:@"%@",[self colorOfPoint:CGPointMake(negativeX, negativeY)]] isEqualToString:@"UIDeviceRGBColorSpace 0 0 0 1"])
        {
            CGPoint point = CGPointMake(negativeX, negativeY);
            [array addObject:[NSValue valueWithCGPoint:point]];
            [self function:positiveX :positiveY :negativeX :negativeY-1];
        }
        else
        {
            canDoPositiveX = YES;
            canDoPositiveY = YES;
            canDoNegativeX = YES;
            canDoNegativeY = NO;
        }
    }

    NSLog(@"%u",[array count]);
} 
```

# objective-c - 如何创建新的播放列表

> ID：15633336
> 
> 赞同：0
> 
> 时间：2013-03-26T09:22:16.483
> 
> 标签：objective-c, macos, cocoa

如何使用 Objective-C for mac os x 创建智能播放列表。我想在该按钮下创建一个向上/向下按钮，我想创建新的播放列表。我不知道如何在运行时在应用程序中创建新文件夹或播放列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:02:30.627

您需要某种形式的数据表示，即。数组。然后操作该数据并根据需要显示它。

你的问题是如此广泛，它可以回答 200 差异。没有人愿意为您编写所有代码。

访问[http://www.youtube.com/playlist?list=PLE83F832121568D36](http://www.youtube.com/playlist?list=PLE83F832121568D36)并观看视频

**更新：**

iTunes 播放列表只是制表符分隔的 txt 文件或 M3U 文件。尝试在 iTunes 中创建播放列表，然后右键单击并按“导出”。选择您需要的文件格式。打开新创建的文件以查看其结构。然后，您创建一个可以以这种语法和格式保存文件的程序。这里的代码太多了。您可以在 iTunes 文件夹中找到包含库中所有音乐的 XML 文件，以帮助您获取有关可供选择的内容的信息。

# php - jQuery UI Sortable，然后将订单写入数据库

> ID：15633341
> 
> 赞同：129
> 
> 时间：2013-03-26T09:22:27.670
> 
> 标签：php, jquery, mysql, jquery-ui, jquery-ui-sortable

我想使用 jQuery UI`sortable`功能来允许用户设置订单，然后在更改时将其写入数据库并更新它。有人可以写一个关于如何做到这一点的例子吗？

* * *

## 回答 #1

> 赞同：236
> 
> 时间：2013-03-26T10:51:49.097

jQuery UI[`sortable`](http://api.jqueryui.com/sortable/)特性包括一个[`serialize`方法](http://api.jqueryui.com/sortable/#method-serialize)来做到这一点。这很简单，真的。这是一个简单的示例，它会在元素位置发生变化时立即将数据发送到指定的 URL。

```
$('#element').sortable({
    axis: 'y',
    update: function (event, ui) {
        var data = $(this).sortable('serialize');

        // POST to server using $.post or $.ajax
        $.ajax({
            data: data,
            type: 'POST',
            url: '/your/url/here'
        });
    }
}); 
```

它的作用是使用 elements 创建一个元素数组`id`。所以，我通常会做这样的事情：

```
<ul id="sortable">
   <li id="item-1"></li>
   <li id="item-2"></li>
   ...
</ul> 
```

当您使用该`serialize`选项时，它将创建一个像这样的 POST 查询字符串：`item[]=1&item[]=2`等等。因此，如果您在属性中使用 - 例如 - 您的数据库 ID，则`id`可以简单地遍历 POSTed 数组并相应地更新元素的位置.

例如，在 PHP 中：

```
$i = 0;

foreach ($_POST['item'] as $value) {
    // Execute statement:
    // UPDATE [Table] SET [Position] = $i WHERE [EntityId] = $value
    $i++;
} 
```

[jsFiddle 上的示例。](http://jsfiddle.net/ryTsN/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-03-20T09:01:01.337

认为这也可能有所帮助。A) 它旨在在每次排序后将有效负载保持在最低限度，同时将其发送回服务器。（而不是每次都发送所有元素或遍历服务器可能丢弃的许多元素） B）我需要在不影响元素的 id / 名称的情况下发回自定义 id。此代码将从 asp.net 服务器获取列表，然后在排序后仅发回 2 个值：排序元素的 db id 和它被删除的元素的 db id。基于这两个值，服务器可以轻松识别新位置。

```
<div id="planlist" style="width:1000px">
    <ul style="width:1000px">
       <li plid="listId1"><a href="#pl-1">List 1</a></li>
       <li plid="listId2"><a href="#pl-2">List 1</a></li>
       <li plid="listId3"><a href="#pl-3">List 1</a></li>
       <li plid="listId4"><a href="#pl-4">List 1</a></li>
    </ul>
    <div id="pl-1"></div>
    <div id="pl-2"></div>
    <div id="pl-3"></div>
    <div id="pl-4"></div>
</div>
<script type="text/javascript" language="javascript">
    $(function () {
        var tabs = $("#planlist").tabs();
        tabs.find(".ui-tabs-nav").sortable({
            axis: "x",
            stop: function () {
                tabs.tabs("refresh");
            },
            update: function (event, ui) {
                //db id of the item sorted
                alert(ui.item.attr('plid'));
                //db id of the item next to which the dragged item was dropped
                alert(ui.item.prev().attr('plid'));

                //make ajax call
            }
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-26T09:28:09.377

你很幸运，我在我的 CMS 中使用了确切的东西

当您要存储订单时，只需调用 JavaScript 方法即可`saveOrder()`。它将`POST`向 saveorder.php 发出 AJAX 请求，但当然您可以将其作为常规形式发布。

```
<script type="text/javascript">
function saveOrder() {
    var articleorder="";
    $("#sortable li").each(function(i) {
        if (articleorder=='')
            articleorder = $(this).attr('data-article-id');
        else
            articleorder += "," + $(this).attr('data-article-id');
    });
            //articleorder now contains a comma separated list of the ID's of the articles in the correct order.
    $.post('/saveorder.php', { order: articleorder })
        .success(function(data) {
            alert('saved');
        })
        .error(function(data) { 
            alert('Error: ' + data); 
        }); 
}
</script>
<ul id="sortable">
<?php
//my way to get all the articles, but you should of course use your own method.
$articles = Page::Articles();
foreach($articles as $article) {
    ?>
    <li data-article-id='<?=$article->Id()?>'><?=$article->Title()?></li>
    <?
}               
?>   
</ul>
   <input type='button' value='Save order' onclick='saveOrder();'/> 
```

在 saveorder.php 中；请记住，我删除了所有验证和检查。

```
<?php
$orderlist = explode(',', $_POST['order']);
foreach ($orderlist as $k=>$order) {
  echo 'Id for position ' . $k . ' = ' . $order . '<br>';
}     
?> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-03-26T05:39:09.170

这是我的例子。

[https://github.com/luisnicg/jQuery-Sortable-and-PHP](https://github.com/luisnicg/jQuery-Sortable-and-PHP)

您需要在更新事件中捕获订单

```
 $( "#sortable" ).sortable({
    placeholder: "ui-state-highlight",
    update: function( event, ui ) {
        var sorted = $( "#sortable" ).sortable( "serialize", { key: "sort" } );
        $.post( "form/order.php",{ 'choices[]': sorted});
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-02T14:50:01.307

我可以按照 jsFiddle 上接受的答案和相关示例来更改行。但是由于一些未知的原因，在“停止或更改”操作后我无法获得 ID。但是 JQuery UI 页面中发布的示例对我来说效果很好。您可以[在此处查看该链接。](https://jqueryui.com/sortable/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-06T17:40:07.227

试试这个解决方案：[http](http://phppot.com/php/sorting-mysql-row-order-using-jquery/) ://phppot.com/php/sorting-mysql-row-order-using-jquery/ 新订单保存在一些 HMTL 元素中。然后，您将包含此数据的表单提交给某个 PHP 脚本，并使用 for 循环遍历它。

注意：我必须添加另一个 INT(11) 类型的 db 字段，该字段在每次迭代时都会更新（时间戳） - 它用于让脚本知道最近更新了哪一行，否则你最终会得到混乱的结果。

# c# - 有一个箭头指向我瞄准的方向

> ID：15633343
> 
> 赞同：0
> 
> 时间：2013-03-26T09:22:31.007
> 
> 标签：c#, rotation, unity3d

我希望我的箭头指向我在游戏中的目标方向。

目前，我的预制件在屏幕中心向左实例化。当我移动箭头时，该点仍然保持在左侧。我怎样才能让箭头至少指向我的屏幕中心，或者理想情况下，有一种移动方式，具体取决于玩家瞄准的方向。

例如，如果我的玩家瞄准屏幕的左上角，则箭头指向该方向并朝该方向射击。

这是我到目前为止的代码：

```
public Object _projectilePrefab;
private bool _pressed = false;
public GameObject _flystickPosition;

private GameObject _currentProjectile;

private Vector3 _firePoint;

private float _startTime;

public float sensitivityX = 15F;
public float sensitivityY = 15F;

int x = 0;
int y = 0;

// Use this for initialization
void Start()
{
    _currentProjectile = (GameObject)Instantiate(_projectilePrefab, _flystickPosition.transform.position, _flystickPosition.transform.rotation);

    _firePoint = Camera.mainCamera.transform.position - new Vector3(1, 1, 0);
    _startTime = (Time.time * 10.0f);
    //_serialData = GetComponent<ReadSerial>();
    //_udpData = GetComponent<HV_ReadUDPData>();
}

// Update is called once per frame
void Update()
{
    _firePoint = Camera.mainCamera.transform.position - new Vector3(1, 1, 0);

    float _moveBananaY = transform.localEulerAngles.y + Input.GetAxisRaw("LeftRight") * sensitivityX;

    float _moveBananaX = transform.localEulerAngles.x + Input.GetAxisRaw("UpDown") * sensitivityY;
    transform.localEulerAngles = new Vector3(_moveBananaX, _moveBananaY, 0);

    if (Input.GetKeyDown(KeyCode.LeftArrow))
    {
        y--;
    }
    if (Input.GetKeyDown(KeyCode.RightArrow))
    {
        y++;
    }
    if (Input.GetKeyDown(KeyCode.UpArrow))
    {
        x--;
    }
    if (Input.GetKeyDown(KeyCode.DownArrow))
    {
        x++;
    }

    float xPercent = 0;
    float yPercent = 0;

    xPercent = x / 25.0f;
    yPercent = y / 25.0f;

    _flystickPosition.transform.parent.localEulerAngles = new Vector3(xPercent * 90, yPercent * 90, 0.0f);

    float smooth = Time.time - _startTime;

    _currentProjectile.transform.position = Vector3.Lerp(lerpFrom, _flystickPosition.transform.position, smooth);

    if (Input.GetKeyDown(KeyCode.Space))
    {
        _currentProjectile.GetComponent<Rigidbody>().velocity = _flystickPosition.transform.parent.forward.normalized * 20;

        _currentProjectile = null;
        _currentProjectile = (GameObject)Instantiate(_projectilePrefab, _firePoint, transform.rotation);
        lerpFrom = _currentProjectile.transform.position;
        _startTime = Time.time;

    }
} 
```

所有这些代码都可以在我的 FireProjectile 类中找到。它附在我的相机上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:45:44.480

好吧，如果我理解正确，您的游戏是 2D 的。不过它并不重要。我会为您的问题提供两种解决方案：

1.  您可以使用简单的矢量数学来获得指向方向。Vector3（到 - 从）。所以你的箭头指向的方向是：Target.transform.position - Player.transform.position。现在，当它指向正确的方向时，您可以像这样移动它： Arrow.transform.Translate(Vector3.forward * Time.deltaTime);

此外，如果您的箭头必须指向目标，但与玩家保持不同的位置，只需从玩家投射到目标，获取光线投射点，然后将箭头“指向”Vector3。

2.  如果箭头总是模仿用户旋转，您可以简单地将旋转应用于箭头 Arrow.transform.rotation = Player.transform.rotation。如果旋转不匹配（即您的对象被旋转），只需添加空游戏对象来模拟旋转并将箭头作为它的子对象。现在你可以随意旋转它了。

# c# - 防止 Windows 服务在调试期间停止

> ID：15633345
> 
> 赞同：0
> 
> 时间：2013-03-26T09:22:42.477
> 
> 标签：c#, windows, debugging, service, windows-services

我正在为该产品开发一个扩展，它实际上是 Windows 服务。我从 Visual Studio 附加到服务，但在调试几分钟后，服务停止工作，所以我需要从头开始调试或快速完成所有工作。

我很确定灵魂应该存在。有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:42:19.737

我不认为将调试器附加到实时服务是一个好主意。服务管理器希望服务能够迅速响应状态请求和控制信号，如果服务是单步执行的或受到其他干扰，则服务无法做到这一点。

调试服务的通常过程是让可执行文件有一个命令行选项，使其作为常规应用程序运行，并在必要时使用一些机制来模拟服务控制信号。然后，您可以像调试任何其他应用程序一样对其进行调试。

如果确实必须在实时服务上进行调试，另一种方法可能是在虚拟机（或单独的物理机）中运行服务并使用内核调试器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:34:41.067

Windows 服务停止的主要原因有两个

1）它完成他们的工作并执行你的代码，这意味着你的代码不会进入计时器、无限循环或做后台工作

2）发生异常使服务停止工作，这意味着您需要在整个代码中放置一个很大的 try\catch 以跟踪错误在哪里并防止服务停止

# php - 如何通过 jQuery AJAX 请求输出响应 HTML 数据？

> ID：15633349
> 
> 赞同：8
> 
> 时间：2013-03-26T09:22:54.220
> 
> 标签：php, html, jquery, response, output

我有一个带有购物车的在线商店。购物车是 a `<table>`，在将文章添加到购物车后会刷新其内容。

我使用 jQuery 的 AJAX 方法，它接收 HTML`<td><tr>`作为来自被调用 PHP 脚本的响应。Firebug 的控制台显示来自调用的**正确响应。**

正如您在我的代码中看到的，我想**将 HTML 添加到 table**。我无法让它工作。我不懂AJAX方法吗？我想将这些添加`<td><tr>`到购物车表中。

### JavaScript（使用 jQuery 1.9.1）

```
$.ajax({
    url: 'php/addToShoppingCart.php',
    type: 'POST',
    dataType: 'html',
    data: content,

    complete: function(data) {  
        $('#shop section table tbody').append(data);
    },
}); 
```

* * *

### 萤火虫控制台

![在此处输入图像描述](../Images/d17b1fd9431928a0a469707d5ca54ae8.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T09:25:55.267

使用 .done() 尝试过吗？

```
$.ajax({
  url: 'php/addToShoppingCart.php',
  type: 'POST',
  dataType: 'html',
  data: content,
}).done(function ( data ) {
  $('#shop section table tbody').append(data);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T09:32:06.023

你也可以使用成功

```
 $.ajax({
       url: 'php/addToShoppingCart.php',
       type: 'POST',
       dataType: 'html',
       data: content, 
       success : function(data) 
      {$('#shop section table tbody').append(data);}
      }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:36:52.230

在您的购物车中创建表格和一个 tr 以便您可以在顶部显示标题

```
<table cellpadding="5" cellpadding="2" border="0" id="cartprod">
    <tr>
      <td width="60%"><b>Product Name</b></td>
      <td width="20%"><b>Quantity</b></td>
      <td width="20"><b>Price</b></td>
    </tr>
</table> 
```

然后你可以像这样附加你的内容

```
function AddToCart(pid)
{
    $.post('php/addToShoppingCart.php',{pid:pid},function(data){    
       $('#cartprod tr:first').after(data); 
    },'html')
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T09:27:31.583

的语法`complete`是

```
$.ajax({
url: 'php/addToShoppingCart.php',
type: 'POST',
dataType: 'html',
data: content,

}).complete(function (data) {
    $('#shop section table tbody').append(data);

}); 
```

# c# - 并登录 LinkLabel 文本

> ID：15633352
> 
> 赞同：1
> 
> 时间：2013-03-26T09:22:58.743
> 
> 标签：c#, .net, winforms, access-keys

我想`a&b`在我的`LinkLabel.Text`.

```
linkLabel1.Text = "a&b"; 
```

这显示：

> 抗体

如果我将代码更改为：

```
 linkLabel1.Text = "a&&b"; 
```

将显示一个`&`标志。

> a&b

这是打印一个＆符号的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T09:24:27.890

`&`在 winform 中用于 Alt 的快捷键。通过使用 double`&&`您正在转义快捷键修饰符。

因此，对于`"a&b"`，快捷键/热键将是：`alt+b`

您可能会看到：[如何：为 Windows 窗体控件创建访问键](http://msdn.microsoft.com/en-us/library/az5a73z1.aspx)

> 将 Text 属性设置为一个字符串，该字符串在将成为快捷方式的字母前包含一个与号 (&)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T09:28:44.533

`&`是winforms控件的快捷键。

`"a&b"`方法; `alt`+的快捷键`b`

查看：[`Create Access Keys for Windows Forms Controls`](http://msdn.microsoft.com/en-us/library/az5a73z1.aspx)

> 要在标题中包含 & 符号而不创建访问密钥，请包含两个 & 符号 (&&)。标题中显示一个 & 符号，并且没有下划线的字符。

```
// Set the letter "P" as an access key.
button1.Text = "&Print"; 
```

我还找到了[`Label.UseMnemonic`](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.usemnemonic.aspx)财产。

> 获取或设置一个值，该值指示控件是否将控件的 Text 属性中的 & 字符 (&) 解释为访问键前缀字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T09:25:44.373

`&`是控制文本属性中的一个特殊字符。例如，它用于强调上下文菜单热键。例如`&File`，你会得到带有下划线 F 的单词 File

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T09:28:44.863

使用`UseMnemonic`财产。

你可以在这里得到它：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.label.usemnemonic.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.usemnemonic.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T09:38:41.707

要扩展自由职业者的答案 - 是的，将`UseMnemonic`标签的属性设置为`true`，这会将 a&b 显示为`a&b`，而不是 ab̲

但是，这将阻止您分配 Alt+ 快捷键，如其他答案中所述。

# javascript - 无法从客户端上的 ajax 获取 Web 服务中的会话状态

> ID：15633356
> 
> 赞同：0
> 
> 时间：2013-03-26T09:23:12.043
> 
> 标签：javascript, asp.net, ajax, web-services, session

我希望每个用户只有 1 个会话。但是当我运行 ajax 查询时，系统会生成一个新的会话。当我在我的计算机上以调试模式测试它时没有问题。问题仅出现在分布式应用程序的客户端站点中。

ASP页面：

```
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<input id="Text1" type="text" /><br />
<asp:Button ID="btn_ASP" runat="server" onclick="btn_ASP_Click" Text="Asp" />
<input id="btn_JS" type="button" value="JS" onclick="GetUsersList();" /><br /> 
```

生成“ConnectCount”会话元素的 Asp 按钮：

```
protected void btn_ASP_Click(object sender, EventArgs e)
{
    int count;
    if (HttpContext.Current.Session["ConnectCount"] == null)
        count = 1;
    else
        count = (int)HttpContext.Current.Session["ConnectCount"] + 1;
    HttpContext.Current.Session["ConnectCount"] = count;
    TextBox1.Text = count.ToString();          
} 
```

网络服务代码：

```
[WebMethod(EnableSession = true)]
[ScriptMethod]
public string Get_UsersList2()
{
    int count;
    if (HttpContext.Current.Session["ConnectCount"] == null)
        count = 1;
    else
        count = (int)HttpContext.Current.Session["ConnectCount"] + 1;
    HttpContext.Current.Session["ConnectCount"] = count;
    return count.ToString();
} 
```

对 Web 服务的 Ajax 查询

```
function GetUsersList() {            
    $.ajax({
        url: '/WbSrv_ACTR.asmx/Get_UsersList2',
        type: "POST",
        contentType: "application/json; charset=utf-8",
        data: '{}',
        success: function (data, st) {
            if (st == "success") {
                if (data.d != "") {
                    text1.value = data.d;
                }
                else {
                }
            }
        },
        error: function () {
            alert("Cannot get list of users");
        }
    });
} 
```

按钮中的代码只是将 1 添加到 Session["ConnectCount"]。

因此，当我在 Asp 按钮上单击 5 次并在 JQ 按钮上单击 1 次（在本地 IIS 上 - 测试）：

```
result: asp = 5, jq = 6 (correct) 
```

在服务器 IIS 7.5 上执行相同的操作：

```
result: asp = 5, jq = 1 (incorrect) 
```

服务器使用其他会话。用于测试 - 我通过 ASP 按钮在 Session 中添加了一些元素，但在 Web 服务中找不到它们（那里的 Session 是空的，但**SessionID 是相同的**）

**任何人都可以有解决方案或解决方法吗？**

网页配置：

```
<system.web>
  <compilation debug="true" targetFramework="4.0">
    <assemblies>
      <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    </assemblies>
  </compilation>
  <customErrors mode="Off" />
  <authorization>
      <deny users="?" />
  </authorization>
</system.web>
<system.webServer>
    <security>
        <authentication>
            <windowsAuthentication enabled="true" />
            <anonymousAuthentication enabled="false" />
        </authentication>
    </security>
</system.webServer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:29:18.803

这是在 Web 服务中使用会话的错误方式

```
Session["ConnectCount"]; 
```

正确的方法是

```
HttpContext.Current.Session["ConnectCount"]; 
```

所以你的功能应该是

```
 [WebMethod(EnableSession = true)]
    [ScriptMethod]
    public string Get_UsersList2()
    {
        int count;
        if ( HttpContext.Current.Session["ConnectCount"] == null)
            count = 1;
        else
            count = (int) HttpContext.Current.Session["ConnectCount"] + 1;
         HttpContext.Current.Session["ConnectCount"] = count;
        return count.ToString();
    } 
```

参考
[如何在 web 方法中访问会话？](https://stackoverflow.com/questions/4758575/how-can-i-access-session-in-a-webmethod)

# objective-c - 如何正确显示@2x 视网膜图像

> ID：15633357
> 
> 赞同：0
> 
> 时间：2013-03-26T09:23:13.493
> 
> 标签：objective-c, uiimage, retina-display

  我正在使用 Xcode 4.5.2，该应用程序的目标是 iOS 6.0。在我的应用程序中，我无法显示 iPad Retina 图像。我知道我必须使用 @2x~ipad.png 扩展名才能让它们正确显示，我这样做了。我的图像是根据命名的，因此除了每个设备的扩展名之外，它们的名称都相同。这是我命名它的方式。

![在此处输入图像描述](../Images/cbe491052fbca191a7d5175bc3d04d12.png)

然而，

```
 NSString *name=@"appearanceConnection.png";
 //NSString *name=@"appearanceConnection"; //I did check this
 //I did check the target
 UIImage *image = [UIImage imageNamed:name];
 NSLog(@"%f",image.size.width); 
```

显示@1x 图像的宽度。

如果我尝试手动设置正确的图像名称：

```
 if ([[UIScreen mainScreen] respondsToSelector:@selector(displayLinkWithTarget:selector:)] &&
            ([UIScreen mainScreen].scale == 2.0)) {
            // Retina display
            name=@"appearanceConnection@2x~ipad.png";

            NSLog(@"retina");
        }
        else
        {
            name=@"appearanceConnection.png";
            NSLog(@"non-retina");
        }
     UIImage *image = [UIImage imageNamed:name];
     NSLog(@"%f",image.size.width); 
```

选择正确的@2x，然后在我将其添加到视图时将其缩放 2.0。

我多次清理/重建我的项目，我重置了 IOS 模拟器设置，没有结果。
我究竟做错了什么？

**更新：**
非视网膜

![在此处输入图像描述](../Images/f3f1c0a587379af8798bfeeb6647e8e1.png)

视网膜：

```
NSLog(@"%f", image.scale) 
```

after`imageNamed`方法给了我 1.0

![在此处输入图像描述](../Images/8135a91e29a733f2d38a7434ca7ad2a3.png)

**更新 2：** 我正在尝试优化我的动画外观，所以我想加载一张大图像并按帧剪切。首先，我加载大图像（@2x 或 1@x），然后使用循环

```
for (int i = 0; i<numberOfFrames; i++)
    {
        CGImageRef imageRef = CGImageCreateWithImageInRect(image.CGImage,
                                                           CGRectMake(i*width, 0.0f, width, height));
        UIImage *animationImage = [UIImage imageWithCGImage:imageRef];

        if (isFlip)
        {
            [animationImages insertObject:animationImage atIndex:0];
        }
        else
        {
            [animationImages addObject:animationImage];
        }

        CGImageRelease(imageRef);
    } 
```

我剪切了这个大图像并创建了动画。如果是视网膜显示，则宽度和高度乘以 2。

也许这是一个警告？

`UIImage *animationImage = [UIImage imageWithCGImage:imageRef];`

返回我缩放两次的图像？

但是，如果我缩放 (0.5,0.5) UIImageView 这是由这个图像初始化它适合。知道为什么要缩放两次吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:27:41.067

当用作 UIImage 或类似的东西时，视网膜和非视网膜图像将具有相同的宽度和高度，将其视为在视网膜显示图像的 DPI 加倍，而不是宽度或高度。

这是为了在为视网膜和非视网膜编码时保持透明。

# php - Magento 仅显示特定商店

> ID：15633360
> 
> 赞同：0
> 
> 时间：2013-03-26T09:23:19.850
> 
> 标签：php, magento, module, web

我有一个 Magento 多商店网站。我有三个商店，都处于活动状态/启用状态。如果我转到页脚“选择商店”，所有三个商店都会出现，但我只想在那里显示两个商店。第三个商店应该只在用户登录/验证时出现。

我可以硬编码这个文件：

```
app/design/frontend/base/default/template/page/switch/stores.phtml 
```

但我不想要这个。有什么办法可以从管理员进行此更改？像在我不想出现的商店中添加标志之类的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:14:06.793

我解决了这种情况。我创建了一个 foreach 循环并检查用户是否已登录。如果用户已登录，则会出现所有商店。如果没有，则仅出现一些商店。

我创建了一个模块以避免修改核心文件。

# xml - 如何使用 xsl 从多个具有相同名称的节点创建一个节点？

> ID：15633363
> 
> 赞同：0
> 
> 时间：2013-03-26T09:23:30.087
> 
> 标签：xml, xslt

我的 XML 结构就像

```
<Client>
  <Document>
    <service class="ABC">
      <author name="x"/>
      <Details>
        ...
      </Details>
    </service>
   </Document>
   <Document>
     <service class="ABC">
       <author name="x"/>
       <Details>
         ...
       </Details>
     </service>
   </Document>
   <Document>
     <service class="ABC">
       <author name="x"/>
       <Details>
         ...
       </Details>
     </service>
   </Document>'
</Client> 
```

我想要它喜欢

```
<Client>
  <Document>
    <service class="ABC">
      <author name="x"/>
       <Details>
         ...
       </Details>
    </service>
   </Document>
   <Document>
     <service class="ABC">
       <author name="x"/>
       <Details>
         ...
       </Details>
     </service>
   </Document>
   <Document>
     <service class="ABC">
       <author name="x"/>
       <Details>
         ...
       </Details>
     </service>
   </Document>'
   <component>
     <service class="ABC">
       <author name="x"/>
     </service>
   </component>'
</Client> 
```

我的 xsl 文件包含

```
<xsl:template match="//v3:Client">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
      <component>
        <service class="">
          <xsl:apply-templates select="//v3:Client/v3:Document/v3:service/v3:author"/>
        </service>
      </component>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="//v3:Client/v3:component/v3:service">
    <xsl:element name="service" namespace="urn:hl7-org:v3">
      <xsl:attribute name="class">
        <xsl:value-of select="//v3:Client/v3:Document/v3:service/@class"/>
      </xsl:attribute>
    </xsl:element>
  </xsl:template> 
```

但它没有提供所需的输出。它的输出像

```
客户
  文档
    服务类="ABC"
      作者姓名="x"
      细节
        ...
      细节
     服务
    文档
   文档
    服务类="ABC"
      作者姓名="x"
      细节
        ...
      细节
    服务
  文档
  文档
    服务类="ABC"
      作者姓名="x"
      细节
        ...
      细节
    服务
  文档
  零件
    服务等级=""
      作者姓名="x"
    服务
    服务等级=""
      作者姓名="x"
    服务
    服务等级=""
      作者姓名="x"
    服务
  零件
客户

```

我是 xsl 的新手。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:43:41.410

使用`group-by`特点：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml" indent="yes" />

  <xsl:template match="/Client">

    <xsl:copy-of select="Document" />

    <!-- Group nodes by attribute value, produce one <component>
         per each group -->
    <xsl:for-each-group select="Document" group-by="service/@class">
      <component>
        <xsl:copy-of select="./service" />
      </component>
    </xsl:for-each-group>

  </xsl:template>

</xsl:stylesheet> 
```

上面的样式表`<component>`为每个`Document class=""`属性值生成一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:18:19.763

如果您无权访问，`group-by`可以考虑使用`following-sibling::`轴。

换句话说，您正在寻找这样的东西：

```
<component>
   <xsl:apply-templates select="Document/service[@class != following-sibling::service/@class]" mode="component" />
</component>

<xsl:template match="service" mode="component">
     <service class="{@class}">
         <!-- etc. -->
     </service>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:54:44.577

如果您想在**组件元素中输出不同的****服务**元素，那么在 XSTL1.0 中您需要使用一种称为**Muenchian Grouping**的技术。我假设**class**属性唯一地标识了一个服务，所以你首先定义一个键来查找服务，像这样

 ******```
<xsl:key name="service" match="service" use="@class" /> 
```

然后，在创建**组件**元素时，要获得不同的**服务**元素，您可以查看所有此类元素，但只选择在其给定**类**属性的键中首先出现的元素。

```
<xsl:apply-templates 
     select="Document/service[generate-id() = generate-id(key('service', @class)[1])]" 
     mode="component" /> 
```

在与**服务**元素匹配的模板中，您可以根据需要输出详细信息。在您的示例中，您似乎只需要此处的**作者**元素，而不是**详细信息**。

```
<xsl:template match="service" mode="component">
   <xsl:copy>
     <xsl:apply-templates select="author|@*"/>
   </xsl:copy>
</xsl:template> 
```

使用**mode**是因为您只希望在输出 compenent 元素时匹配此模板。

这是完整的 XSLT

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:key name="service" match="service" use="@class" />

<xsl:template match="Client">
   <xsl:copy>
     <xsl:apply-templates select="node()|@*"/>
     <component>
        <xsl:apply-templates select="Document/service[generate-id() = generate-id(key('service', @class)[1])]" mode="component" />
     </component>
   </xsl:copy>
</xsl:template>

<xsl:template match="service" mode="component">
    <xsl:copy>
      <xsl:apply-templates select="author|@*"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
</xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<Client>
   <Document>
      <service class="ABC">
         <author name="x"/>
         <Details> ... </Details>
      </service>
   </Document>
   <Document>
      <service class="ABC">
         <author name="x"/>
         <Details> ... </Details>
      </service>
   </Document>
   <Document>
      <service class="ABC">
         <author name="x"/>
         <Details> ... </Details>
      </service>
   </Document>
   <component>
      <service class="ABC">
         <author name="x"/>
      </service>
   </component>
</Client> 
```******

# angularjs - 带有标签的 Angular UI select2 在自定义指令中不起作用

> ID：15633365
> 
> 赞同：3
> 
> 时间：2013-03-26T09:23:35.113
> 
> 标签：angularjs, angularjs-directive, angular-ui, jquery-select2

使用 Angular UI Select2 指令，在输入字段上定义标签。如果输入本身在自定义指令中，则它没有正确初始化并且控制台给出错误：

`query function not defined for Select2 tagging`

我怀疑这可能与指令的编译/链接顺序与调用 select 2 函数的顺序有关。

也许有一个简单的解决方法，也许使用编译函数或指令控制器而不是链接函数？或者可能是 Angular UI select2 指令的问题。

我做了一个显示问题的 plunker：

[http://plnkr.co/edit/myE5wZ](http://plnkr.co/edit/myE5wZ)

所以我的问题是 - 你如何让 select2 标签在自定义 Angular 指令中工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T13:10:32.290

最后，我设法找到了一个我很满意的解决方案，涉及嵌套两个指令，这样逻辑就可以封装在父指令中（不会溢出到控制器中）。

我的解决方案的 Plunker 在这里供任何可能偶然发现相同问题的人使用：

[http://plnkr.co/edit/ZxAPF5BzkgPtn9xddCRM](http://plnkr.co/edit/ZxAPF5BzkgPtn9xddCRM)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-15T09:31:40.583

我今天刚刚遇到这个并总结了解决方法：

PostLinking 函数以相反的顺序执行（从最深的孙子到最大的祖父）。

将您的自定义模态代码（或任何设置 $scope 数据以供其子项使用的任何内容）放在*PreLinking*函数中。*PreLinking*函数从父级到子级，所有 PreLinking 函数都在 PostLinking 函数之前执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-18T09:06:02.413

通过使用控制器函数而不是指令中的链接函数，它正在工作。例子：

```
function myFunction() { 
  var dir = {};
  dir.scope = { myModel: '=' };
  dir.restrict = 'E';
  dir.templateUrl = 'myTemplate.html';
  dir.replace = true;
  dir.controller = function ($scope) {
    $scope.myVar = ...;
  };

  return dir;
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-18T17:16:34.730

我有一个类似的问题。您的解决方案有效，但恕我直言，我认为更好的解决方案是使用控制器功能而不是指令内的链接功能。这样做你确实需要嵌套指令。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-11T19:38:40.167

我也有这个错误。我的简短解决方案：

```
<input type="hidden" 
       name="citizenship" 
       class="form-control input-sm col-sm-10" 
       style="width:500px" 
       multiple 
       ui-select2="params.options.citizenshipOptions"   
       ng-model="cvLang.content.citizenship"
       ng-repeat="a in [1]"
 /> 
```

**ng-repeat="a in [1]" 是一个神奇的东西！！！**我不清楚上下文的逻辑，但这是有效的。这可能有帮助吗？

# java - 如何使用 jboss7.x.1 从类路径获取文件

> ID：15633371
> 
> 赞同：1
> 
> 时间：2013-03-26T09:24:04.233
> 
> 标签：java, jboss7.x, smooks

我想转换 smooks **xml-java**，所以我需要从 `mobeeadmin.war/WEB-INF/sample.xml`.

```
Smooks smooks = new Smooks("/WEB-INF/sample.xml"); 
```

它抛出以下异常：

```
 java.io.IOException: Failed to access data stream for resource [/WEB-INF/sample.xml]. Tried (in order):
    10:10:14,113 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)   File System: E:\WEB-INF\sample.xml
    10:10:14,114 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)   File System: E:\jboss-as-7.1.1.Final\bin\WEB-INF\sample.xml
    10:10:14,117 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)   Classpath: /WEB-INF/sample.xml
    10:10:14,125 ERROR [stderr] (http-localhost-127.0.0.1-8080-2)

By default it looks in File System: E:\jboss-as-7.1.1.Final\bin\WEB-INF\sample.xml .I want load from E:\jboss-as-7.1.1.Final\standalone\deployments\myproject.war\WEB-INF\sample.xml. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:02:21.183

1.  Smooks 将字符串作为文件名。如果你取一个相对的，它会被解释为相对于你的 java 应用程序的起始位置。当然，你也可以选择绝对的。所以`E:/data/sample.xml`应该可以正常工作。
2.  /WEB-INF/sample.xml 不能在类路径上，因为 WEB-INF 将是一个包名。但那些不能包含破折号。实际上，它是您的 Web 应用程序的资源文件，您可以通过`ServletContext.getResourceAsStream(java.lang.String path)`. 由于 JBoss7 是 Servlet 3.0 编译器，您可以从 HttpServletRequest 获取 ServletContext。然而，一些现代框架都没有给你。
3.  如果您想从类路径中获取文件，可以将其移动到 WEB-INF/classes 并通过类加载器加载它。但是，java 对正确的选择非常挑剔。最可靠的是 ContextClassloader（它现在在根包中）：

    ```
     Thread.currentThread().getContextClassLoader().getResourceAsStream("sample.xml"); 
    ```

# asp.net - 希望 idm、dap 等下载管理器可以检测到 asp.net 中的文件下载？

> ID：15633372
> 
> 赞同：1
> 
> 时间：2013-03-26T09:24:14.837
> 
> 标签：asp.net, gridview

这是我的代码

```
Response.ClearHeaders();

Response.Clear();
Response.AddHeader("content-disposition", "attachment;filename=GridView2WordMethod2.doc");
Response.AddHeader("Content-Type", "application/octet-stream");
//Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.ContentType = "application/octet-stream";

System.IO.StringWriter stringWrite = new System.IO.StringWriter();
System.Web.UI.HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWrite);

HtmlForm frm = new HtmlForm();
exportGrdVw.Parent.Controls.Add(frm);
frm.Attributes["runat"] = "server";
frm.Controls.Add(exportGrdVw);
frm.RenderControl(htmlWrite);

Response.Write(stringWrite.ToString());
Response.End(); 
```

它正在工作并将 gridview 的内容下载到 Doc 文件，但它正在使用 chrome 默认下载管理器进行下载。我希望它可以被 IDM、DAp 等下载管理器检测到。

请帮忙

# sql - 相当于 Sum 的字符串以连接

> ID：15633373
> 
> 赞同：8
> 
> 时间：2013-03-26T09:24:20.607
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我想要一个查询以在 1 行上输出左表中的 Id 和连接表中的描述。

架构：

```
person
---------    
id (int)

role
-------------
id (int)
description (varchar(100))

personrole
-------------
personid (int)
roleid (int) 
```

示例数据：

```
person
------------
id
1
2

role
------------
id   description
1    user
2    admininstrator
3    tester

personrole
-------------
personid   roleid
1          1
2          1
2          2
2          3 
```

所以，我希望输出是：

```
PersonId   Roles
1          user
2          user;administrator;tester 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-26T09:29:39.600

```
SELECT
     p.ID PersonID,
     STUFF(
         (SELECT ';' + b.description
          FROM  personrole a 
                INNER JOIN role b
                  ON a.roleid = b.id
          WHERE a.personid = p.id
          FOR XML PATH (''))
          , 1, 1, '')  AS DescriptionList
FROM person AS p
GROUP BY p.ID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!18/003c8/1)

输出

```
╔══════════╦════════════════════════════╗
║ PERSONID ║      DESCRIPTIONLIST       ║
╠══════════╬════════════════════════════╣
║        1 ║ user                       ║
║        2 ║ user;admininstrator;tester ║
╚══════════╩════════════════════════════╝ 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-03-19T09:11:49.167

SQL Server（从 2017 开始）支持 OOTB STRING_AGG 函数

```
select p.id, STRING_AGG(pr.description, ',') as roles 
from person p 
inner join personrole pr ON p.id = pr.personid
inner join roles r ON r.id = pr.roleid
group by p.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-15T21:11:08.993

另一个 SQL 示例：在单个表上使用 GROUP_CONCAT 对城镇的每个名字客户进行分组。

脚本 Sqlite ：

桌子：

```
CREATE TABLE IF NOT EXISTS 'user'(
        prenom STRING,
        age INTEGER,
        ville STRING); 
```

数据：

```
INSERT INTO 'user' ('prenom', 'age', 'ville')  VALUES
        ('Anthony', 20, 'Toulouse'),
        ('Clarisse', 18, 'Paris'),
        ('Madeleine', 58, 'Paris'),
        ('Jacques', 45, 'Toulouse'),
        ('Henry', 26, 'Toulouse'),
        ('Lili', 14, 'Nice'),
        ('Victoire', 38, 'Paris'); 
```

正常选择：

```
SELECT * FROM 'user'; 
```

输出 ：

```
prenom   age  ville

--------  -- ---------
Anthony   20 Toulouse
Clarisse  18 Paris
Madeleine 58 Paris
Jacques   45 Toulouse
Henry     26 Toulouse
Lili      14 Nice
Victoire  38 Paris 
```

ville 的所有 prenom 组：

`SELECT ville, GROUP_CONCAT(prenom, ',') FROM user GROUP BY ville;`

输出 ：

```
ville      liste
--------   ---------
Nice       Lili
Paris      Clarisse,Madeleine,Victoire
Toulouse   Anthony,Jacques,Henry 
```

# javascript - 有没有办法使用 Javascript 进行 Ctrl-F5 刷新？

> ID：15633374
> 
> 赞同：1
> 
> 时间：2013-03-26T09:24:26.507
> 
> 标签：javascript, ajax

我有一个在框架内运行的小型 asp 文件。有什么方法可以让我进行`CTRL`+`F5`类型的刷新并重新加载整个浏览器窗口。我试过`parent.location.reload(true)`,`location.reload()`和很多其他的。该页面似乎不想重定向。如果我在我的键盘上做一个`CTRL`+ `F5`，它会重新加载。任何帮助深表感谢

我还需要通过`CTRL`+在浏览器中刷新/更新我的 .js 文件`F5`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T09:35:03.070

尝试以下，首先在您的`<head>`标签中放入以下两行

```
<meta http-equiv="Cache-control" content="no-cache">
<meta http-equiv="Expires" content="-1"> 
```

然后你可以使用`location.reload(true)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:51:25.190

这里有一个很好的例子：http: [//grizzlyweb.com/webmaster/javascripts/refresh.asp](http://grizzlyweb.com/webmaster/javascripts/refresh.asp)

玩得开心！

# uiviewcontroller - 带有自定义转换的模态 ViewController = 错误的动画

> ID：15633383
> 
> 赞同：1
> 
> 时间：2013-03-26T09:24:57.473
> 
> 标签：uiviewcontroller, modalviewcontroller, presentmodalviewcontroller, catransition

在我的应用程序中，几乎可以从任何地方打开视频。视频播放器是一个 UIViewController 子类，它包含一个 MPMoviePlayerController 并呈现在我的应用程序的 rootViewController 上。

我使用以下代码在我的应用程序中显示一个 ViewController，自定义转换为

```
// When the glitch occurs, the rootViewController still has a presentedViewController
if (self.rootViewController.presentedViewController)
     [self.rootViewController dismissViewControllerAnimated:NO completion:^{}];

CATransition* transition = [CATransition animation];
transition.duration = 0.3;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition.type = kCATransitionPush;
transition.subtype = kCATransitionFromRight;

UIWindow* window = self.appDelegate.window;
[window.layer addAnimation:transition forKey:nil];
[self.rootViewController presentViewController:viewController animated:NO completion:^{}]; 
```

在 99% 的情况下，这都能正常工作，并获得预期的结果，但有时，我真的很随机​​地遇到了一个非常奇怪的故障。视频播放器 ViewController 是可见的，并且我的应用程序的 rootViewController 从我的视频播放器顶部的右侧滑入。

所以基本上，过渡是应用于 rootViewController 而不是视频 ViewController。此时无法在我的应用程序中打开视频，因为 rootViewController 在视频播放器 ViewController 之上执行从右到左的转换。

我怎样才能防止这种故障发生？在呈现一个新的之前，我试图从 rootViewController 中关闭任何活动的presentedViewController，但这并不能解决问题。

提前致谢。

# android - 如何找到所需的缩放级别以在 Android 地图视图中显示地理位置

> ID：15633391
> 
> 赞同：2
> 
> 时间：2013-03-26T09:25:15.337
> 
> 标签：android, android-mapview

我想在 Android 地图视图中显示一个城市、省或国家。显示城市的缩放级别将不同于显示整个国家的缩放级别。

让我知道如何找到某个位置的所需缩放级别以显示整个位置及其边界。

# c# - 是否可以从字符串创建 VisualBrush？

> ID：15633392
> 
> 赞同：0
> 
> 时间：2013-03-26T09:25:18.640
> 
> 标签：c#, wpf, visualbrush

我认为我的问题是不言自明的，但在这里稍微详细说明一下就是这种情况。

`Brush`我想在运行时为属性赋值。我正在分配`VisualBrush`我从 db 获得的密钥

```
Application.Current.FindResource("Key_Passed_from_DB"); 
```

但是，如果该密钥在应用程序中不可用，我被要求从字符串中填充它

例如，来自 db 我将通过

```
<Grid><Path Data="M404....">........</Grid> 
```

这可以转换`VisualBrush`并分配给我的 Brush 属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:45:24.310

`Parse`只要您具有所需的命名空间（或在解析之前添加它们），您就可以将Xaml 字符串转换为元素。

然后您可以将解析的 WPF 元素应用于`VisualBrush`

**工作示例：**

```
string elementString = "<Grid xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\" >  <Button /> </Grid>";

Visual result = XamlReader.Parse(elementString) as Visual;

VisualBrush myBrush = new VisualBrush(result); 
```

# java - 强制自动启动计算机？

> ID：15633393
> 
> 赞同：10
> 
> 时间：2013-03-26T09:25:19.380
> 
> 标签：java

我们知道如何使用 Java 强制关闭计算机。例如，以下代码适用于强制关闭：

```
public static void main(String arg[]) throws IOException{
    Runtime runtime = Runtime.getRuntime();
    Process proc = runtime.exec("shutdown -s -t 0");
    System.exit(0);
} 
```

现在，假设我想在特定时间强制启动一台计算机（处于关机状态），是否可以用 Java 或任何其他语言来做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T09:26:57.797

你需要一些东西来触发启动。触发此操作的最佳方法是网络唤醒。

如果您想在 Java 中执行此操作，[这](http://www.jibble.org/wake-on-lan/)可能是一个很好的资源。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-04T06:19:33.147

除了网络唤醒之外，还有一些在连接到主板的服务器级硬件上运行的 IPMI 设备，可以控制电源以及通过网络连接提供串行控制台输出。这台计算机一直在运行，但我不熟悉任何可以加载自己的代码的计算机。

您可以远程控制此设备以对已关闭任何语言（包括 java）的服务器进行电源控制。

[http://en.wikipedia.org/wiki/Intelligent_Platform_Management_Interface](http://en.wikipedia.org/wiki/Intelligent_Platform_Management_Interface)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-05T04:08:08.290

如果您的 BIOS 支持高级电源管理 (APM) 版本 1.2 或更高版本，则应该可以根据计时器将其从睡眠/待机或休眠中唤醒。在 Windows 上，最终用户可以通过任务计划程序执行此操作，如果您希望以编程方式执行此操作，您可以使用[任务计划程序界面](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383581%28v=vs.85%29.aspx)。

我不知道您将如何通过 Java 执行此操作，但这里有一些示例 C 代码，它将创建一个任务以在未来 2 分钟内唤醒计算机：

```
#include <mstask.h>
#include <time.h>

int main() {
  HRESULT hr = CoInitialize(NULL);
  if (SUCCEEDED(hr)) {
    ITaskScheduler *scheduler;
    hr = CoCreateInstance(CLSID_CTaskScheduler, NULL, CLSCTX_INPROC_SERVER, IID_ITaskScheduler, (void**)&scheduler);
    if (SUCCEEDED(hr)) {
      ITask *task;
      hr = scheduler->NewWorkItem(L"Wake Timer", CLSID_CTask, IID_ITask, (LPUNKNOWN*)&task);
      if (SUCCEEDED(hr)) {
        WORD index;
        ITaskTrigger *trigger;
        hr = task->CreateTrigger(&index, &trigger);
        if (SUCCEEDED(hr)) {
          time_t t = time(NULL) + 120;
          struct tm *ltime = localtime(&t);

          TASK_TRIGGER triggertime;
          memset(&triggertime, 0, sizeof(triggertime));
          triggertime.cbTriggerSize = sizeof(TASK_TRIGGER);
          triggertime.wBeginYear = ltime->tm_year+1900;
          triggertime.wBeginMonth = ltime->tm_mon+1;
          triggertime.wBeginDay = ltime->tm_mday;
          triggertime.wStartHour = ltime->tm_hour;
          triggertime.wStartMinute = ltime->tm_min;
          triggertime.TriggerType = TASK_TIME_TRIGGER_ONCE;
          trigger->SetTrigger(&triggertime);
          trigger->Release();
        }

        task->SetFlags(TASK_FLAG_DELETE_WHEN_DONE|TASK_FLAG_SYSTEM_REQUIRED|TASK_FLAG_RUN_ONLY_IF_LOGGED_ON);
        task->SetAccountInformation(L"", NULL);

        IPersistFile *file;
        hr = task->QueryInterface(IID_IPersistFile, (void**)&file);
        if (SUCCEEDED(hr)) {
          file->Save(NULL, TRUE);
          file->Release();
        }
        task->Release();
      }
      scheduler->Release();
    }
    CoUninitialize();
  }
  return 0;
} 
```

假设如果您可以在 Windows 上执行此操作，则必须有其他操作系统的等效 API。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-05T04:32:05.093

我确实设法在互联网上找到了一个类似的问题，所以我会在这里发布链接，看看你是否觉得它有帮助。（这是我找到的线程：http: [//www.coderanch.com/t/440680/gc/interact-Windows-Task-Scheduler-Java](http://www.coderanch.com/t/440680/gc/interact-Windows-Task-Scheduler-Java)）

首先，我可能会补充一点，Java 是一种必须在虚拟机中运行的语言——没有两种方法可以绕过它。我并不精通“低级”编程，例如更接近 BIOS 级别的编程，这正是我们正在努力的方向。

由于这个问题是关于 Java 的，我能从研究中得出的最好的结果是（如果你真的想用 Java 做某事），使用 JAVA-COM (JACOB) [http://sourceforge.net/projects /jacob-project/](http://sourceforge.net/projects/jacob-project/)[允许](http://msdn.microsoft.com/en-us/library/aa383581%28VS.85%29.aspx)您通过 COM 语言（AF

据我所知，因为 Java 需要在虚拟机中才能运行，所以没有办法让它执行诸如打开 PC 之类的操作——我们甚至不要讨论这样的操作是否会需要管理员或以上权限。

希望有帮助。

# c++ - 打印存储在 C 字符串中的字符的 ASCII 码 - 需要解释

> ID：15633394
> 
> 赞同：2
> 
> 时间：2013-03-26T09:25:19.860
> 
> 标签：c++, string, pointers, io, c-strings

该程序将 char 转换为它们的 ASCII 代码程序运行良好，但我不明白该行是如何`cout << (int) *p1++ << ' ';`工作的。特别`*p1++`是在这个内部`while`循环中：

```
#include <iostream>
#include <cstring>
#include <cstdio>
using namespace std;
void main ()
{
    char s[80];
    char *p1;
    do
    {
        p1 = s;

        cout << "Enter the string";
        gets(p1);
        while (*p1) 
        cout << (int) *p1++ << ' ';
        cout << '\n';
    }
    while (strcmp (s, "End"));
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T09:30:04.610

```
while (*p1) 
    cout << (int) *p1++ << ' '; 
```

方法：

*   while`p1`指向不为 0 的字符值（即`'\0'`）
    *   获取它指向的字符（`*p1`=指针的解引用`p1`）
    *   将此字符转换为`int`以便输出 ASCII 代码（数字而不是字符）
    *   在刚刚打印的数字之后输出空格
    *   递增指针`p1`以使其指向下一个字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:28:55.747

```
cout << (int) *p1++ << ' '; 
```

这里：

1.  by 指向的字符`p1`被转换为 an`int`并写入 to`cout`后跟一个空格。
2.  `p1`前进以指向下一个字符（这就是这样`p1++`做的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:31:41.913

这很容易:)

while (*p1) => 只要 p1 指向的字节不为零.... cout << (int) *p1++ << ' '; => 打印 p1 指向的字符，然后增加指针。将结果 (char) 转换为 int 并打印。

而 (*p) {do_somthing(); p++;} 是遍历 ac 字符串的常用方法。

# asp.net - 使用 ASP.net 向外部网站传递参数

> ID：15633395
> 
> 赞同：0
> 
> 时间：2013-03-26T09:25:22.807
> 
> 标签：asp.net, vb.net, web-services

我正在尝试访问需要登录网站并传递参数列表的页面。我似乎能够登录该站点（如果我更改登录详细信息，我会收到 401 未经授权的错误），但随后会收到 400 错误请求错误。代码有点散列在一起，所以我知道出了点问题，但不知道在哪里。

编辑代码

```
 Public Sub TestConn()

    Dim customeremailaddress As String = HttpUtility.UrlEncode("r.test@test.com")
    Dim customername As String = HttpUtility.UrlEncode("Ryan")
    Dim referenceid As String = HttpUtility.UrlEncode("ordertest123")
    Dim languagecode As String = HttpUtility.UrlEncode("1043")
    Dim expirydays As String = HttpUtility.UrlEncode("30")

    Dim UserName As String = "testusername"
    Dim password As String = "testpassword"
    Dim siteCredentials As New NetworkCredential(UserName, password)

    Dim URLAuth As String = "http://service.someurl.com/process.xml"
    Dim postString As String = String.Format("customeremailaddress={0}&customername={1}&referenceid={2}&languagecode={3}&expirydays={4}", customeremailaddress, customername, referenceid, languagecode, expirydays)

    Dim postBytes As Byte() = Encoding.UTF8.GetBytes(postString)

    Const contentType As String = "application/x-www-form-urlencoded"
    System.Net.ServicePointManager.Expect100Continue = False

    Dim cookies As New CookieContainer()
    Dim webRequest__1 As HttpWebRequest = TryCast(WebRequest.Create(URLAuth), HttpWebRequest)
    webRequest__1.Method = "POST"
    webRequest__1.ContentType = contentType
    webRequest__1.CookieContainer = cookies
    webRequest__1.ContentLength = postBytes.Length
    webRequest__1.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.1) Gecko/2008070208 Firefox/3.0.1"
    webRequest__1.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
    webRequest__1.Referer = "http://service.someurl.com/process.xml"
    webRequest__1.Credentials = siteCredentials

    Try
        Dim requestStream As Stream = webRequest__1.GetRequestStream()
        requestStream.Write(postBytes, 0, postBytes.Length)
        Dim responseReader As New StreamReader(webRequest__1.GetResponse().GetResponseStream())
        Dim responseData As String = responseReader.ReadToEnd()
        responseReader.Close()
        webRequest__1.GetResponse().Close()

    Catch ex As Exception
        Lbl_ConnTest_error.Text = ex.Message
    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:34:45.783

您需要发送`postString`不是字符串本身的字节：

```
Dim postBytes As Byte() = Encoding.UTF8.GetBytes(postString)
...
webRequest__1.ContentLength = postBytes.Length
...
Dim requestStream As Stream = webRequest__1.GetRequestStream()
requestStream.Write(postBytes, 0, postBytes.Length) 
```

更多信息[在这里](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-27)。

# python - 从列表中生成分段随机词的列表

> ID：15633397
> 
> 赞同：0
> 
> 时间：2013-03-26T09:25:27.137
> 
> 标签：python, random

我从这里得到这个：[生成随机词](https://stackoverflow.com/questions/11166547/generating-random-words)

```
import random

words = ['hello', 'apple', 'something', 'yeah', 'nope', 'lalala'] 

''.join(random.sample(words, 10)) 
```

> applesomethinghellohellolalala

如何分割随机单词以便获得以下结果？

> words = ['apple', 'something', 'hello', 'hello', 'lala']

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:31:52.073

尝试这个：

```
import random

words = ['hello', 'apple', 'something', 'yeah', 'nope', 'lalala']
print [random.sample(words, 1)[0] for i in range(10)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:46:20.420

而不是使用

```
random.sample(words, 1)[0] 
```

正如 Eugeny 提议的那样，我宁愿使用`random.choice`：

```
print [random.choice(words) for i in range(10)] 
```

# wcf - 如何使用 innosetup 自动启动服务？我可以得到任何命令行吗？

> ID：15633399
> 
> 赞同：0
> 
> 时间：2013-03-26T09:25:28.840
> 
> 标签：wcf, inno-setup

我创建了 WCF 服务，使用 Windows 服务应用程序，我将 wcf 服务 dll 提供给 Windows 服务应用程序，我使用 innosetup 创建了 exe，为了创建设置，我遵循了[如何使用 INNO 设置部署 WCF 服务？](https://stackoverflow.com/questions/15573057/how-to-deploy-wcf-services-using-inno-setup)，现在我怎样才能自动启动服务，安装完成后，服务应该自动启动。怎么可能？我可以得到任何命令行来完成这个任务吗？

问候， Lokesh.J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T02:32:29.167

您可以使用以下代码创建服务，服务将自动启动。

```
// create a system service with windows command “sc”
DosCmd := '/C '+'sc create "WCF" binPath= "'+ExpandConstant('{app}\WCF.exe' \
  type= share start= auto DisplayName= "WCF"'+' obj= '+UserName+' password= '+Passwd;
Exec(ExpandConstant('{cmd}'),DosCmd, '',  SW_HIDE,ewWaitUntilTerminated, ResultCode); 
```

然后，WCF 服务将自动启动。

# mysql - 如何加入表格？

> ID：15633401
> 
> 赞同：1
> 
> 时间：2013-03-26T09:25:32.990
> 
> 标签：mysql, sql

我有三张桌子：

部分：

> ```
> +-------+------------------+------+-----+---------+----------------+
> | Field | Type             | Null | Key | Default | Extra          |
> +-------+------------------+------+-----+---------+----------------+
> | id    | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
> +-------+------------------+------+-----+---------+----------------+
> +----+
> | id |
> +----+
> |  1 |
> |  2 |
> |  3 |
> +----+ 
> ```

部分_partid：

> ```
> +-----------+------------------+------+-----+---------+-------+
> | Field     | Type             | Null | Key | Default | Extra |
> +-----------+------------------+------+-----+---------+-------+
> | part_id   | int(10) unsigned | NO   | PRI | NULL    |       |
> | partid_id | int(10) unsigned | NO   | PRI | NULL    |       |
> +-----------+------------------+------+-----+---------+-------+
> +---------+-----------+
> | part_id | partid_id |
> +---------+-----------+
> |       1 |         1 |
> |       1 |         2 |
> |       1 |         3 |
> |       2 |         1 |
> |       2 |         4 |
> |       2 |         5 |
> |       3 |         6 |
> |       3 |         7 |
> |       3 |         8 |
> +---------+-----------+ 
> ```

部分：

> ```
> +-------+------------------+------+-----+---------+----------------+
> | Field | Type             | Null | Key | Default | Extra          |
> +-------+------------------+------+-----+---------+----------------+
> | id    | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
> | key   | varchar(50)      | NO   | MUL | NULL    |                |
> | value | varchar(50)      | NO   |     | NULL    |                |
> +-------+------------------+------+-----+---------+----------------+
> +----+-----+-------+
> | id | key | value |
> +----+-----+-------+
> |  1 | l   | foo   |
> |  2 | p   | bar   |
> |  3 | s   | baz   |
> |  4 | l   | 3     |
> |  5 | p   | 5     |
> |  6 | s   | r     |
> |  7 | l   | rr    |
> |  8 | l   | rrr   |
> +----+-----+-------+ 
> ```

基本上每个部分都由任意部分 ID 组成。例如，第 1 部分有 l = 'foo'、p = 'bar' 和 s = 'baz'。

如果我想搜索所有具有 l = 'foo' 的部分，我使用这个连接

```
SELECT p.id FROM parts AS p
INNER JOIN parts_partid ppi ON ppi.part_id = p.id
INNER JOIN partid pi ON ppi.partid_id = pi.id
WHERE pi.key = 'l' AND pi.value = 'foo'; 
```

这给了我第 1 部分和第 2 部分。

现在我想搜索所有具有 l = 'foo'**和**p = '5' 的部分（这应该只导致第 2 部分）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:30:54.243

尝试这个....

```
SELECT p.id FROM parts AS p
INNER JOIN parts_partid ppi ON ppi.part_id = p.id
INNER JOIN partid pi ON ppi.partid_id = pi.id
WHERE (pi.key = 'l' AND pi.value = 'foo')
or    (pi.key ='p' and pi.value = '5') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:39:15.747

尝试这个：

```
SELECT id
FROM
(
  SELECT 
    p.id,
    MAX(CASE WHEN pi.Key = 'l' THEN value END) AS l,
    MAX(CASE WHEN pi.Key = 'p' THEN value END) AS p,
    MAX(CASE WHEN pi.Key = 's' THEN value END) AS s
  FROM parts AS p
  INNER JOIN parts_partid ppi ON ppi.part_id = p.id
  INNER JOIN partid pi ON ppi.partid_id = pi.id
  GROUP BY p.id
) AS t
WHERE l = 'foo' 
  AND p = 5; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/b799c/11)

这只会给你第 2 部分：

**[结果](http://sqlfiddle.com/#!2/b799c/11/0)**：

```
| ID |
------
|  2 | 
```

* * *

这个查询背后的想法是子查询，它将*键*的值转换为列；它将为您提供每个 id 的这些键作为列标题：

```
| ID |   L |      P |      S |
------------------------------
|  1 | foo |    bar |    baz |
|  2 | foo |      5 | (null) |
|  3 | rrr | (null) |      r | 
```

然后在外部查询中，您可以过滤这些列的值。

# csv - 用于 ASP.NET Web API 的 CSV 媒体类型格式化程序

> ID：15633402
> 
> 赞同：0
> 
> 时间：2013-03-26T09:25:38.687
> 
> 标签：csv, asp.net-mvc-4, asp.net-web-api

我尝试为我的 Web API 实现 CSV MediaTypeFormatter，如下所述： [http ://www.tugberkugurlu.com/archive/creating-custom-csvmediatypeformatter-in-asp-net-web-api-for-comma-separated-values -csv 格式](http://www.tugberkugurlu.com/archive/creating-custom-csvmediatypeformatter-in-asp-net-web-api-for-comma-separated-values-csv-format)

（我不想从那里粘贴所有代码）

但我无法使用下面的 Web API 控制器让它工作。我使用 Fiddler 调用 Web API：[http ://myhostname.com/api/csvexport?format=csv](http://myhostname.com/api/csvexport?format=csv)

```
public dynamic Get()
    {

        var ret = new[] { "CarId", "Make", "Model", "Name" }; 
        return ret;
    } 
```

对于 CsvFormatter 中的“类型”，我得到：

DeclaringMethod = 'type.DeclaringMethod' 引发了“System.InvalidOperationException”类型的异常

和

只能在 Type.IsGenericParameter 为 true 的类型上调用方法。

所以我可能没有正确理解 Formatter 的概念并且类型有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T11:52:06.137

您收到此错误是因为 Tugberk 的格式化程序仅适用于实现通用`IEnumerable<T>`接口的模型。这是有道理的，因为人们在获得一组结果时通常需要 CSV 格式的数据。如果您只想要一个数据实体，为什么要采用 CVS 格式呢？

您的方法返回类型是`dynamic`，不是`IEnumerable<T>`。您可能可以通过执行以下操作来使其工作：

```
public IEnumerable<string> Get()
{
    var ret = new[] { "CarId", "Make", "Model", "Name" }; 
    return ret;
} 
```

# firefox - 在 Firefox 中，console.log 没有显示任何内容

> ID：15633404
> 
> 赞同：68
> 
> 时间：2013-03-26T09:25:44.547
> 
> 标签：firefox, logging

我正在 Firefox 中尝试一个简单的 console.log 函数：

```
console.log("Hello, World!"); 
```

你可以试试：http: [//jsfiddle.net/EkZjK/](http://jsfiddle.net/EkZjK/)

您也可以在独立的 HTML 文件中尝试完整的代码：

```
<html>
    <head>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <script type="text/javascript">
            console.log("Hello World !");
        </script>
    </head>
</html> 
```

我在 Chrome 中获得控制台日志。但是在 Firefox 中我看不到日志。

我尝试了[Firebug](https://en.wikipedia.org/wiki/Firebug_%28software%29)控制台和`Ctrl`++ 。两者都不会在 Firefox 中显示日志消息。`Shift``J`

PS：我重新启动了Firefox，重新启动了Windows，在另一台机器上尝试，删除了Firefox配置文件并创建了另一个，然后重新安装了Firefox。但问题仍然存在。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2015-04-04T04:57:08.090

### 对于某些以前版本的 Firefox

我遇到了同样的问题，但根本原因不同。

点击`Ctrl`++`Shift`打开`K`完整的控制台。从上数第二行有选项卡*——Net*、*CSS*、*JS*、*Security*、*Logging*和*Server*。*点击“记录”*右侧的三角形以打开下拉菜单并确保至少“记录”处于打开状态。

[![在此处输入图像描述](../Images/411ae577705a8af2ac6fc180c9a9786b.png)](https://i.stack.imgur.com/1ozhe.png)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-26T10:16:44.523

重新安装 Firebug 插件解决了这个问题。现在它出现在 Firebug 控制台中（不在`Ctrl`++中`Shift`）`J`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-06-15T05:02:46.720

对于 Firefox 77.0.1 和[Ubuntu 18.04](https://en.wikipedia.org/wiki/Ubuntu_version_history#Ubuntu_18.04_LTS_.28Bionic_Beaver.29)（仿生海狸）LTS（仿生海狸）：

我有同样的问题。

打开 Firefox 控制台 - `Ctrl`+ `Shift`+ `J`。

在浏览器控制台中，单击右上角的设置图标。在下拉列表中，单击*Show Content Messages*。

然后*console.log*消息将开始显示在控制台中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-24T12:30:27.663

1.  卸载 Firebug（或禁用它）
2.  按下`F12`并享受控制台。

问题是萤火虫。它不再维护并且可能不稳定（参见官方页面）。这里的其他用户建议更新它，但它可能无法正常工作，或者直到下一次 Firefox 更新才能正常工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-04-17T07:52:05.713

I had the problem again today with Chrome and Firefox. Ultimately, however, the cause was not the console, but some code in jQuery UI v1.12.1.

After I had written `console.clear()` after the jQuery UI code, the console outputs after this script were shown again.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-14T06:26:36.693

我最近在 Firefox 上遇到了同样的问题。对我有用的是重新启动 Firefox，然后将 Console.clear() 方法添加到我的脚本中。页面加载后，控制台会再次记录您的消息。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-04-10T19:17:37.973

[我在Ubuntu 18.0](https://en.wikipedia.org/wiki/Ubuntu_version_history#Ubuntu_18.04_LTS_.28Bionic_Beaver.29)（Bionic Beaver）上使用 Firefox 75.0 时遇到了同样的问题。以下为我解决了它：

1.  打开控制台
2.  单击 Logs 按钮，直到右侧 Filter output 行中的灰色
3.  单击右侧的设置齿轮，然后在下拉列表中选择“持久日志”。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-12-30T15:11:31.573

我在 Firefox 71 中遇到了这个问题，我发现当您打开控制台时，并非所有内容都会自动记录。

当您转到控制台的右侧时，您会看到许多按钮（*错误*、*警告*、*日志*、*信息*、*调试*、*CSS*、*XHR*和*请求*）。通过单击这些按钮启用所有日志。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-26T14:52:13.557

我的浏览器也遇到了同样的问题，但是您所要做的就是通过按`ctrl`+ `shift`+打开控制台`k`或按右键并按检查，然后导航到显示单击它的左侧部分，`logs`您应该好走

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-14T19:05:40.740

在 FireFox 90.0、Mac OS 11.4 中，我必须单击齿轮图标并在“显示内容消息”旁边打勾，然后 console.log 输出才会出现在控制台上。

编辑：我现在看到上面的回复之一的细则中提到了这一点。

# android - 在 Android 上使用 GCM 推送通知

> ID：15633408
> 
> 赞同：6
> 
> 时间：2013-03-26T09:25:56.443
> 
> 标签：android, push-notification, google-cloud-messaging

我正在尝试在我的 android 应用程序上实现推送通知。因此，没有比 Google 开发者页面更好的起点了。

我正在尝试在这里学习本教程：[GCM Demo App](http://developer.android.com/google/gcm/demo.html)。教程建议使用通过 SDK 管理器提供的示例代码。这样做并尝试发送推送通知后，当应用程序运行时，我在屏幕上看到正在写入的新推送已经到来。

但是，当应用程序处于后台或未运行时，我不会收到推送*通知*。如果我打开应用程序，消息会再次显示在屏幕上。但是我从来没有收到任何带有弹出窗口和声音的通知形式的东西。

我是否必须在android中手动执行此操作？我认为它类似于 iOS 平台负责向您显示通知。

有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T09:47:18.753

> 但是我从来没有收到任何带有弹出窗口和声音的通知形式的东西。

触发通知时，可以将声音编程到代码中。用这样的话说。

```
Notification notification = new Notification(icon, tickerText, when);
notification.sound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION); 
```

> 但是，当应用程序处于后台或未运行时，我不会收到推送通知
> 
> 我是否必须在android中手动执行此操作？我认为它类似于 iOS 平台负责向您显示通知。

您的应用**始终**会收到 GCM 数据（推送通知）。如何处理这些数据取决于您。GCM 意图服务负责向您提供数据，仅此而已。您将需要使用通知服务向用户显示适当的通知。

这种方法有优点/缺点。当您收到推送通知时，应用程序代码将在 android 上运行，而在 iPhone 上则不然。您还可以灵活地根据推送通知的类型进行静默更新或通知用户。

当您的应用启动时，使用发件人 ID 注册您的设备，您应该会收到预期的通知。所有推送通知都将传递到`protected void onMessage(Context context, Intent intent)`您选择的 GCMIntentService 上的此方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T09:41:11.527

尝试取消注册并再次注册您的设备。在 DemoActivity.java 中放

```
final String regId = GCMRegistrar.getRegistrationId(this);
        GCMRegistrar.unregister(this); 
```

`GCMRegistrar.unregister(this);`然后，在第二次启动时移除 。

**更新**

应用程序中的通知：

创建类

```
public class DemoApplication extends Application {

    private class NotifyReceiver extends BroadcastReceiver{

        @Override
        public void onReceive(Context context, Intent intent) {
              Toast.makeText(context, "RECEIVE MESSAGE", Toast.LENGTH_SHORT).show();
        }
    }

    private NotifyReceiver notifyReceiver = new NotifyReceiver();

    @Override
    public void onCreate() {
        registerReceiver(notifyReceiver, new IntentFilter("GCM_MESSAGE"));
        super.onCreate();
    }

    @Override
    public void onTerminate() {
        unregisterReceiver(notifyReceiver);
        super.onTerminate();
    }
} 
```

然后放

```
<application
           android:name=".DemoApplication"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" > 
```

在 AndroidManifest.xml 中发送广播

```
 @Override
    protected void onMessage(Context context, Intent intent) {
        Log.i(TAG, "Received message");
        String message = getString(R.string.gcm_message);
        displayMessage(context, message);
      context.sendBroadcast(new Intent("GCM_MESSAGE"));
        // notifies user
        generateNotification(context, message);
    } 
```

作为替代情况，您可以在清单、活动或前台服务中注册广播接收器

# git - 我应该什么时候创建一个新分支？

> ID：15633409
> 
> 赞同：36
> 
> 时间：2013-03-26T09:26:08.377
> 
> 标签：git, branch, versioning

我第一次使用 git 作为版本控制系统。我正在开始一个新项目，因此要对项目中使用的技术进行一些试验（hello world 示例......），我想创建一个类似“playground”分支的东西。创建一个新的分支“playground”是否很常见，或者我应该只在 master 分支中创建一个名为 playground 的文件夹？

问候

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-26T09:29:04.467

当您进行具有一定实验性质的开发工作时，您应该创建一个新分支。因此，在您的场景中，一定要创建一个新分支，而不是 master 中的文件夹。如果您将沙箱工作创建为主目录中的目录，则它将驻留在那里，直到您使用 git 将其删除。将死代码放在主分支中无论如何都不理想，因为它可能会使其他开发人员感到困惑，并且可能会在应用程序的整个生命周期中一直呆在那里腐烂。

如果您的团队遇到错误，您不希望他们浪费时间探索实验工作以确定该目录中是否存在错误。创建新分支允许您将更改与主分支隔离。如果您的实验进展顺利，您始终可以选择将您的更改合并到主分支中。如果事情进展不顺利，您可以随时丢弃分支或将其保留在本地存储库中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-26T09:32:54.720

分支有很多用途，这在一定程度上取决于您的工作流程。两种常用的工作流程是：

*   [github流](http://scottchacon.com/2011/08/31/github-flow.html)
*   [gitflow](http://nvie.com/posts/a-successful-git-branching-model/)

两者都使用所谓的主题分支来构建新功能，一旦准备好/被接受就会合并回来。

Github flow 相当简单，显然是 github 使用的。Gitflow 稍微复杂一些，并且更适合您需要支持应用程序的多个版本（可以应用修补程序）时。

最后，您使用哪种工作流程是一个偏好问题，但是因为在 git 中创建分支非常便宜，所以创建多少分支并不重要（最终，再次删除）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-26T09:53:01.793

在这些情况下，您应该考虑创建新分支并对其进行处理：-

*   当您想在沙盒环境中工作/测试某些东西时。

*   在本质上保持提交简短是一种很好的做法因此您的频繁提交可能会干扰其他人的开发区域因此最好在分支上完成您的工作，然后稍后将您的分支合并到主分支中。**[提示]**请记住通过经常将主分支合并到您的分支来保持您的分支与主分支同步。所以在稍后的时间点，你没有很多东西可以手动合并。

*   你想解决一个错误。最好在其他分支上解决它并稍后合并它。

*   如果您的提交出错/破坏了您的构建，则生产构建不受影响。所以我更喜欢使用至少两个分支 dev 分支和 prod 分支。当一切都经过全面测试后，将您的开发分支合并到生产分支。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-26T09:38:29.717

你应该通过实验来大胆地学习，但在操场上的回购中。
回购中的游乐场目录将受益较少。
玩一玩，犯一些错误，学习一些东西 - 删除它几次，然后疯狂。

例如

```
$ mkdir playground  
$ git init
$ touch hello-world
$ git add hello-world
$ git commit -m "my first commit"
$ git branch goodbye
$ git checkout goodbye
$ echo "goodbye" | cat >>hello-world
$ git status
$ git add hello-world 
$ git commit -m "goodbye commit"
$ git merge master 
```

我还建议从 GitHub 中以您选择的语言获取一个活动项目的分支，并尝试在其中使用真实代码进行合并、变基等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-26T09:34:27.677

常见的方法是使用 master 分支作为 live 分支。然后你从 master 创建新的分支并处理它们（特性分支）。完成工作后，您将更改合并回您的主文件。

您可以像开发分支一样构建新的远程分支，并在您只需要预览时将您的更改合并到此分支。有一些方法，但谷歌上有很多信息。

[分支和合并](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)
[Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)

# select - Cassandra CQL 中的别名

> ID：15633410
> 
> 赞同：5
> 
> 时间：2013-03-26T09:26:10.257
> 
> 标签：select, cassandra, alias, cql, aliases

我的问题是关于在 CQL 查询中使用别名。
例如在 SQL 中我们可以这样写：

```
SELECT p.name FROM Persons as p 
```

CQL中有类似的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-06T13:00:39.257

从 cassandra 2.0 开始，CQL 3 支持 SELECT 中的别名

[http://www.datastax.com/dev/blog/cql-in-cassandra-2-0](http://www.datastax.com/dev/blog/cql-in-cassandra-2-0)

SELECT event_id, dateOf(created_at) AS creation_date, blobAsText(content) AS content FROM timeline;

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T12:52:03.633

当我浏览 CQL3 的[文档](http://www.datastax.com/docs/1.1/references/cql/index#cql-command-reference)时，我没有找到任何关于使用`as`别名的参考。

我建议您阅读 datastax 的文档，了解[SELECT](http://www.datastax.com/docs/1.1/references/cql/SELECT)语句在 CQL 3 中可以做什么和不能做什么。

# c - 将WORD转换为字符串

> ID：15633411
> 
> 赞同：0
> 
> 时间：2013-03-26T09:26:21.713
> 
> 标签：c, string

我正在尝试使用 WiFi 发送 CAN 消息。

该消息由一个 2 字节的 ID (WORD) 和一个 8 字节的数据字段 (QWORD) 组成。

我必须使用 UART 将数据包写入 WiFi 芯片，所以我想将 WORD 和 QWORD 转换为字符串，然后使用 putsUART 发送它。

如何将这些变量转换为字符串？

WiFi数据包的结构：

```
typedef struct {
    WORD id;
    QWORD data;
} WiFiTXPacket; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:31:29.747

也许是这样的：

```
char package[10];
memcpy (&package, &wifiPackage, sizeof (WiFiTXPacket));

putsUART(package, strlen(package)); // i dont know how this function looks like, but for example ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:30:08.517

```
printf("id: %hu  data: %llu \n", id, data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T10:33:48.750

```
char *package = (char *)&wifiPackage;
putsUART(package, sizeof (WiFiTXPacket)); 
```

取决于游丝的答案。我想可能是这样的。如果使用 memcpy 函数。并用 strlen(package) 计算。如果有任何零值。可能导致问题发生！

# c# - 底层连接已关闭：连接意外关闭 - wcf

> ID：15633416
> 
> 赞同：0
> 
> 时间：2013-03-26T09:26:55.790
> 
> 标签：c#, wpf, wcf, silverlight

我在我的 WPF 项目中使用 WCF 服务。我有大量的数据，表中大约有 847000 条记录。此异常在客户端引发

```
proxy.ServicesClient client = new proxy.ServicesClient();
var result = client.GetCustomers(); // here throws ('**ComunicationException was unhandled by user code**: *The underlying connection was closed: The connection was closed unexpectedly*.') 
```

在我的 app.config

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
      <bindings>
        <basicHttpBinding>
          <binding name="BasicHttpBinding_IServices" closeTimeout="00:10:00"
              openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"
              maxBufferSize="2147483647" maxReceivedMessageSize="2147483647">
            <security mode="None" />
          </binding>
        </basicHttpBinding>
      </bindings>
        <client>
            <endpoint address="http://localhost:5302/WpfStoreService.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IServices"
                contract="proxy.IServices" name="BasicHttpBinding_IServices" />
        </client>
    </system.serviceModel>
</configuration> 
```

在 Web.Config 中

```
<?xml version="1.0"?>
<configuration>

  <connectionStrings>
    <add name="AdventureWorksLTConnectionString" connectionString="Data Source=.;Initial Catalog=AdventureWorksLT;Integrated Security=True" />
  </connectionStrings>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>

    <bindings>
      <basicHttpBinding>

        <binding name="BasicHttpBinding_IServices" receiveTimeout="00:10:00" sendTimeout="00:10:00" openTimeout="00:10:00" closeTimeout="00:10:00"
                 maxReceivedMessageSize="2147483647"
                 maxBufferSize="2147483647"
                 maxBufferPoolSize="52428899">
          <readerQuotas maxDepth="128"
                        maxStringContentLength="2147483647"
                        maxArrayLength="2147483647"
                        maxBytesPerRead="4096"
                        maxNameTableCharCount="2147483647" />
          <security mode="None"/>
        </binding>

      </basicHttpBinding>
    </bindings>

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="True" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

你在 WCF 服务上遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:50:31.830

除非您在其他地方覆盖了它，否则默认的数据库连接超时将是一个问题。

我认为如果将 Connection Timeout 值设置为 0，则可以禁用它，但这取决于 DbConnection 实现；

尝试将此添加到您的连接字符串。 `Connect Timeout=0`

`"Data Source=.;Initial Catalog=AdventureWorksLT;Integrated Security=True;Connect Timeout=0"`

# unit-testing - SOLID 和单元测试。使用语言提供的方法/类

> ID：15633417
> 
> 赞同：4
> 
> 时间：2013-03-26T09:26:57.187
> 
> 标签：unit-testing, solid-principles

所以我读过这个叫做[SOLID](https://softwareengineering.stackexchange.com/a/153447) (mixed with) [Writing Testable Code](http://googletesting.blogspot.in/2008/08/by-miko-hevery-so-you-decided-to.html)的东西。然后特别是关于 D 部分。在使用语言库提供的原始类型或方法/类时，如何遵循这些准则。

是否还需要对数组使用依赖注入（java ( `new int[64]`) 或 FileWriter 的类成员？这些*需要*使用 DI 注入还是类仍然可以实例化它们？

您应该遵循上述指导方针走多远？

我不是在寻找特定语言的答案（如果可能的话）。恕我直言，答案应该适用于，例如 PHP、Python Java、哎呀，甚至 C

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T10:00:19.187

您通常不会注入原语或[DTO](http://en.wikipedia.org/wiki/Data_Transfer_Object) / [POJO](http://en.wikipedia.org/wiki/Plain_Old_Java_Object)类对象。原因是那些是：

1.  没有太多业务/领域逻辑关联的简单价值持有者
2.  无需任何额外工具即可轻松存根（创建用于测试的假数据数组没有问题）

`FileWriter`是不同的，因为它与上述观点完全相反。我不能简单地在测试中对它进行存根，并在没有一些*强有力的*假设的情况下使其工作——比如，我假设未来每个运行此代码的开发人员都会在他的机器上拥有特定的文件。这对于单元测试通常是*不可行的*，也是在这些情况下应用 DI 的原因之一。

这些问题来自`FileWriter`作为两个不相关组件之间的*通信点的事实 - 您的应用程序和文件系统。*在大多数情况下，任何进行这种集成（在您的应用程序和 DB/网络/文件/REST 等之间）的类都应该被抽象和注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:56:07.340

注入数组是多余的。注入文件编写器是绝对必须的。事实上注入作家是不够的。文件编写者与外部世界进行大量交互，而您不希望这样。文件编写器应该被包装在它自己的类中，并且永远不要被直接调用。

相反，注入 FileWriterWrapper 的接口。因此，依赖性得到控制。此外，单元测试中的文件交互是一个主要的痛点。不惜一切代价避免它。数据库交互也是如此。事实上，与外部世界的所有交互都应该在单元测试中被存根/模拟。

美妙之处在于，SOLID 设计和可测试性齐头并进。好的设计意味着可测试的代码。如果您发现很难测试某些代码，通常表明您的设计存在缺陷。

# c# - C# websocket 服务器未触发 html5 中的 onmessage 事件

> ID：15633428
> 
> 赞同：0
> 
> 时间：2013-03-26T09:27:27.510
> 
> 标签：c#, html, websocket

也许我现在非常需要帮助。

我目前在使用 c# 和 HTML5 的 websocket 服务器方面遇到问题。它没有在 html5 中触发我的 onmessage() 事件。它打开套接字连接并触发 onopen() 事件。但是，一旦建立连接，它就会继续关闭连接。这是我的简单代码：

服务器（c#）：

```
using System;
using System.Collections.Generic;
using System.Net.Sockets;
using System.Net;
using System.IO;
using System.Security.Cryptography;
using System.Threading;

namespace ConsoleApplication1
{
    class Program
    {
        public Socket ListenerSocker { get; private set; }
        static IPEndPoint ipLocal;
        static Socket serverSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
        static private string guid = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";

        static void Main(string[] args)
        {
            serverSocket.Bind(new IPEndPoint(IPAddress.Any, 8080));
            //serverSocket.Listen(128);
            serverSocket.Listen(200);
            serverSocket.BeginAccept(null, 0, OnAccept, null);

            Console.Read();
        }

        private static void OnClientConnect()
        {

            serverSocket.BeginAccept(null, 0, OnAccept, null);
        }

        private static void OnAccept(IAsyncResult result)
        {
            byte[] buffer = new byte[1024];

            Socket client = null;
            string headerResponse = "";
            if (serverSocket != null && serverSocket.IsBound)
            {
                client = serverSocket.EndAccept(result);
                var i = client.Receive(buffer);
                headerResponse = (System.Text.Encoding.UTF8.GetString(buffer)).Substring(0, i);
                // write received data to the console
                Console.WriteLine(headerResponse);

            }
            if (client != null)
            {
                /* Handshaking and managing ClientSocket */

                var key = headerResponse.Replace("ey:", "`")
                          .Split('`')[1]                     // dGhlIHNhbXBsZSBub25jZQ== \r\n .......
                          .Replace("\r", "").Split('\n')[0]  // dGhlIHNhbXBsZSBub25jZQ==
                          .Trim();

                // key should now equal dGhlIHNhbXBsZSBub25jZQ==
                var test1 = AcceptKey(ref key);

                var newLine = "\r\n";

                var response = "HTTP/1.1 101 Switching Protocols" + newLine
                     + "Upgrade: websocket" + newLine
                     + "Connection: Upgrade" + newLine
                     + "Sec-WebSocket-Accept: " + test1 + newLine + newLine
                     + "Sec-WebSocket-Key: " + test1 + newLine + newLine
                     + "Sec-WebSocket-Key: " + test1 + newLine + newLine
                    //+ "Sec-WebSocket-Protocol: chat, superchat" + newLine
                    //+ "Sec-WebSocket-Version: 13" + newLine
                     ;

                // which one should I use? none of them fires the onopen method
                client.Send(System.Text.Encoding.UTF8.GetBytes(response));

                var i = client.Receive(buffer); // wait for client to send a message

                // once the message is received decode it in different formats
                Console.WriteLine(Convert.ToBase64String(buffer).Substring(0, i));
                /*
                Console.WriteLine("\n\nPress enter to send data to client");
                Console.Read();
                */
                var subA = SubArray<byte>(buffer, 0, i);
                Console.WriteLine("***SUBA****:"+subA);
                Console.WriteLine("TEST");
                client.Send(subA);

                // Thread.Sleep(10000);//wait for message to be send

                // OnClientConnect();
            }
        }

        public static T[] SubArray<T>(T[] data, int index, int length)
        {
            T[] result = new T[length];
            Array.Copy(data, index, result, 0, length);
            Console.WriteLine(result);
            return result;
        }

        private static string AcceptKey(ref string key)
        {
            string longKey = key + guid;
            byte[] hashBytes = ComputeHash(longKey);
            return Convert.ToBase64String(hashBytes);
        }

        static SHA1 sha1 = SHA1CryptoServiceProvider.Create();
        private static byte[] ComputeHash(string str)
        {
            return sha1.ComputeHash(System.Text.Encoding.ASCII.GetBytes(str));
        }
    }
} 
```

客户（HTML5）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script type="text/javascript">
        function connect() {
            var ws = new WebSocket("ws://localhost:8080");
            console.log(ws);
            ws.onopen = function () {
                alert("About to send data");
                ws.send("test"); // I WANT TO SEND THIS MESSAGE TO THE SERVER!!!!!!!!
                alert("Message sent!");
            };

            ws.onmessage = function (evt) {
                alert("About to receive data");
                var received_msg = evt.data;
                alert("Message received = "+received_msg);
            };
            ws.onclose = function () {
                // websocket is closed.
                alert("Connection is closed...");
            };
        };

        function send(){
        }

    </script>
</head>
<body style="font-size:xx-large" >
    <div>
    <a href="#" onclick="connect()">Click here to start</a></div>

</body>
</html> 
```

我可以得到这个：

```
 alert("About to send data"); 
```

和这个：

```
alert("Message sent!"); 
```

但在那之后，连接关闭。我还可以检查服务器是否从客户端接收数据。问题是，一旦我将数据从服务器发送到客户端，为了能够返回客户端给我的内容，连接就会突然关闭。可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:17:49.393

Websocket 消息不是纯文本；他们需要应用一个简单的成帧协议

客户端->服务器和服务器->客户端消息的框架规则略有不同。我想当您尝试在不应用不同框架的情况下回显其消息时，客户端正在关闭其连接。

有关如何解码/编码消息，请参阅 RFC6455 的[数据帧部分。](https://www.rfc-editor.org/rfc/rfc6455#section-5.2)或者，如果您使用的是 .NET4.5，则可以考虑使用[System.Net.WebSockets](http://msdn.microsoft.com/en-gb/library/system.net.websockets.websocket.aspx)而不是编写自己的服务器。

# android - android中的N级可扩展列表

> ID：15633431
> 
> 赞同：2
> 
> 时间：2013-03-26T09:27:33.723
> 
> 标签：android

我在我的项目中实现了 n 级消耗品列表，但我无法找到内部消耗品列表的实际大小。例如，第一级消耗品列表有 4 个孩子，当我点击第一级项目时，它显示正确，他们又有 4 个孩子，但我只能看到 2 或 3 个孩子。我与您分享我的代码，请帮助我。

这是我的 ExpandableListAdapter 类：

```
public class ExpandableListAdapter extends BaseExpandableListAdapter {
Context context;
LinkedHashMap objhashTable;

public ExpandableListAdapter(Context con, LinkedHashMap objhashTable) {
    // TODO Auto-generated constructor stub
    this.context = con;
    this.objhashTable = objhashTable;
    Log.i("ParentView", "objhashTable  == " + objhashTable.size());
    // nu

}

@Override
public Object getChild(int arg0, int arg1) {
    return arg1;
}

@Override
public long getChildId(int groupPosition, int childPosition) {
    return childPosition;
}

@Override
public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {
    //Log.i("ParentView", "getChildView  == " + childPosition
        //  + "  groupPosition  == " + groupPosition+"   parent  == "+conve);
    //parent.
    LinkedHashMap temp = getSelectedObject(groupPosition);
    if (temp != null && getSelectedObject(groupPosition) != null ) {
        ExpandableListAdapter parebnt = new ExpandableListAdapter(context, temp);
        LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.expendablelist, parent, false);
        ExpandableListView NextLevelAdapter =(ExpandableListView)convertView.findViewById(R.id.ParentLevel123);
        TextView txt = (TextView)convertView.findViewById(R.id.txtLevel);
        txt.setText(getSelectedKey(groupPosition) );
        txt.setTextColor(Color.BLACK);
        txt.setTag(getSelectedKey(groupPosition));
        txt.setTextSize(20);
        txt.setBackgroundColor(Color.BLUE);
        txt.setPadding(10, 7, 7, 7);
        //CustExpListview SecondLevelexplv = new CustExpListview(context);
        NextLevelAdapter
                .setAdapter(/* new SecondLevelAdapter(context) */parebnt);
        NextLevelAdapter.setGroupIndicator(null);
        convertView.measure( MeasureSpec.AT_MOST, MeasureSpec.AT_MOST );
         convertView.getLayoutParams().height = convertView.getMeasuredHeight();
        return convertView;
    }else{
        return null;

    }
}

@Override
public Object getGroup(int groupPosition) {
    return groupPosition;
}

@Override
public int getGroupCount() {
    //if (objhashTable != null ) 
    //Log.i("ParentLevel", "objhashTable == "+objhashTable);
           return objhashTable.size();

}

@Override
public long getGroupId(int groupPosition) {
    return groupPosition;
}

@Override
public boolean hasStableIds() {
    return true;
}

@Override
public boolean isChildSelectable(int groupPosition, int childPosition) {
    return true;
}

private LinkedHashMap getSelectedObject(int groupPos) {
    LinkedHashMap lnmap = null;
    if (objhashTable != null) {
        Iterator it = objhashTable.keySet().iterator();
        int i = 0;
        while (it.hasNext()) {
            String type = (String) it.next();
            if (i == groupPos) {
                lnmap = (LinkedHashMap) objhashTable.get(type);
                // childCount =lnmap.size();
                break;
            }
            i++;
        }

    }
    return lnmap;
}

private String getSelectedKey(int groupPos) {
    String type = null;
    if (objhashTable != null) {
        Iterator it = objhashTable.keySet().iterator();
        int i = 0;
        while (it.hasNext()) {
            type = (String) it.next();
            if (i == groupPos) {
                // lnmap = (LinkedHashMap)objhashTable.get(type);
                // childCount =lnmap.size();
                break;
            }
            i++;
        }

    }
    return type;
}

@Override
public int getChildrenCount(int groupPosition) {
    // TODO Auto-generated method stub
    return 1;
}

@Override
public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    return null;
}
} 
```

# jquery-autocomplete - jQuery自动完成特定的粗体问题

> ID：15633435
> 
> 赞同：1
> 
> 时间：2013-03-26T09:27:43.333
> 
> 标签：jquery-autocomplete

我有自动完成源，其值包括“JOHN SMITH”、“LIN SMITH”、“JOHN STAINIGER”；

**如果用户在输出中写入SMITH** ，我想启用用户还可以看到建议“JOHN SMITH”、“LIN SMITH”，当他写**SMITH J**时，他应该只看到 JOHN SMITH。

所以我做了自动完成来搜索两种方式 - JOHN S 和 SMITH J 都会给我 JOHN SMITH

问题出在粗体上——我已经制作了这个函数来生成 req. 无论在哪里找到req，术语项都是粗体的。字符串中的 erm。

但是，如果我写 SMITH J，那就是我的要求。term 那么它不会加粗，因为它找不到这个req。约翰·史密斯的任期。我该如何改变呢？

我如何更改该功能 monkeyPatchAutocomplete() {

```
 $.ui.autocomplete.prototype._renderItem = function (ul, item) {
            var highlighted = item.label.split(this.term).join('<strong>' + this.term +  '</strong>');
            return $("<li></li>")
                .data("item.autocomplete", item)
                .append("<a>" + highlighted + "</a>")
                .appendTo(ul);
}
} 
```

# c# - 在其他地方声明文本框按键事件代码并调用它？

> ID：15633436
> 
> 赞同：0
> 
> 时间：2013-03-26T09:27:45.237
> 
> 标签：c#, .net, winforms, c#-4.0

我需要处理我的文本框的按键事件，以便用户在文本框中仅输入数字数据，我的代码工作正常，我将其发布在下面，但我担心的是，我有 30 多个相同的文本框要求，我不想为 30 个文本框的按键事件编写相同的代码，但我不能在方法中编写此代码并调用该方法..有什么办法可以解决这个问题，以便我可以编写代码在一个地方，并在文本框的按键事件或任何其他使我的代码看起来标准并减少行数的方式中调用它，我在下面发布我的代码

```
 if (!char.IsControl(e.KeyChar)
        && !char.IsDigit(e.KeyChar)
        && e.KeyChar != '.')
        {
            e.Handled = true;
        }

        // only allow one decimal point
        if (e.KeyChar == '.'
            && (sender as TextBox).Text.IndexOf('.') > -1)
        {
            e.Handled = true;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:33:28.720

当然，您可以为所有文本框使用一个事件处理程序

```
TextBox tb = new TextBox();
tb.KeyPress += tb_KeyPress;

TextBox tb2 = new TextBox();
tb2.KeyPress += tb_KeyPress;

  void tb_KeyPress(object sender, KeyPressEventArgs e)
  {
        if (!char.IsControl(e.KeyChar)
    && !char.IsDigit(e.KeyChar)
    && e.KeyChar != '.')
    {
        e.Handled = true;
    }

    // only allow one decimal point
    if (e.KeyChar == '.'
        && (sender as TextBox).Text.IndexOf('.') > -1)
    {
        e.Handled = true;
    }
  } 
```

# c# - 将列表 类转换为列表 银光班

> ID：15633438
> 
> 赞同：1
> 
> 时间：2013-03-26T09:27:47.983
> 
> 标签：c#, silverlight-4.0

我有一个具有以下参数的基类（目录）：

```
string Name;
string Path;
List<Directory> SubDirectory; 
```

现在我想创建一个新类，该类将使用新属性扩展该类：

```
Bool Valid ; 
```

所以我为派生类（DirectoryExt）编写了以下代码：

```
Public class DirectoryExt : Directory

{
    Public bool Valid {get; set;}

    public DirectoryExt( Directory directory)

    {
       this.Name = directory.Name;
       this.Path = directory.Path;
       this.SubDirectory = directory.Subdirectory;
       this.Valid = false;
    } 

} 
```

这里的问题是如何将其转换`List<Directory> SubDirectory`为`List<DirectoryExt> SubDirectory`当我`DirectoryExt(derived)`从现有的`Directory(bas`e) 对象创建对象时？

任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:30:42.803

使用 LINQ 到对象：

```
this.SubDirectory = directory.SubDirectory.Select(s => new DirectoryExt(s)).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:40:26.023

this.SubDirectory = new ObservableCollection<目录>();

```
 if (directory.SubDirectory != null || directory.SubDirectory.Count != 0)
        {
            foreach (var item in directory.SubDirectory.Select(s => new DirectoryExt(s)).ToList())
            {
                this.SubDirectory.Add(item);
            }
        } 
```

这是它的正确解决方案......我已经测试过它并且它有效。

# php - SQL 按日期分组并从一天开始显示每个类别

> ID：15633439
> 
> 赞同：1
> 
> 时间：2013-03-26T09:27:50.327
> 
> 标签：php, mysql

我有一个名为`categories`的表和一个名为`posts`. 每个帖子都有日期、标题、id 和 catID。如何进行查询以返回按日期排序的每个类别的第一篇文章。

例子：

```
Post_ID 1 "Title 1"  "Cat1" "26-03.2013 13:00"
Post_ID 2 "Title 2"  "Cat1" "26-03.2013 13:05"
Post_ID 3 "Title 3"  "Cat1" "25-03.2013 13:00"
Post_ID 4 "Title 4"  "Cat1" "25-03.2013 13:05"

Post_ID 5 "Title 5"  "Cat2" "26-03.2013 14:00"
Post_ID 6 "Title 6"  "Cat2" "26-03.2013 14:05"
Post_ID 7 "Title 7"  "Cat2" "25-03.2013 14:00"
Post_ID 8 "Title 8"  "Cat2" "25-03.2013 14:05"

Post_ID 9 "Title 9"  "Cat3" "26-03.2013 15:00"
Post_ID 10 "Title 10"  "Cat3" "26-03.2013 15:05"
Post_ID 11 "Title 11"  "Cat3" "25-03.2013 15:00"
Post_ID 12 "Title 12"  "Cat3" "25-03.2013 15:05" 
```

结果将是：

```
26-03-2013
Post ID10 (15:05) CAT 3
POST ID8  (14:05) CAT 2
POST ID4  (13:05) CAT 1

25-03-2013
Post ID12 (15:05) CAT 3
POST ID6  (14:05) CAT 2
POST ID2  (13:05) CAT 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:36:39.700

试试这个查询，

```
$query ='SELECT categories.*, posts.* FROM categories, posts WHERE categories.id = posts.catID GROUP BY posts.catID ORDER BY posts.date DESC'; 
```

阅读关于加入：[http ://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

阅读 GROUP BY：[http ://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

阅读 ORDER BY：[http ://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

这可以帮助你。

# sql - 从日期中提取月份作为数字

> ID：15633441
> 
> 赞同：0
> 
> 时间：2013-03-26T09:27:51.480
> 
> 标签：sql, oracle

我有一个接受以下格式的日期的查询：

'2012 年 8 月 31 日'

我需要查询以将月份作为数字返回。对于上述日期，返回值为 08

我尝试了以下方法：

```
EXTRACT(MONTH FROM DATE '31 AUG 2012')
TO_DATE('31 AUG 2012', 'MM')
TO_CHAR('31 AUG 2012', 'MM') 
```

所有这些分别给我以下错误：

ORA-01861：文字与格式字符串不匹配 ORA-01843：不是有效的月份 ORA-01722：无效的数字

如何实现？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:21:43.830

```
SELECT EXTRACT(MONTH FROM date '2012-08-31') FROM dual; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:31:10.420

```
EXTRACT(MONTH FROM to_date('31 AUG 2012','DD MON YYYY')) 
```

date '' 运算符只接受 ISO 格式...

```
date '2012-08-31' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:59:56.420

您必须转换`08`为，`8`因为`08`是字符字段，所以我已经使用`to_number()`过`to_char`，以便它返回确切的数字。

```
select to_number(to_char(to_date('31-AUG-2012','DD-MON-YYYY'),'MM')) from your_tbl; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T09:48:38.773

实际上你犯的错误是你只给了'MM'作为格式掩码而不是你给'DD/MM/YYYY'，希望它也能工作

```
SELECT TO_CHAR(SYSDATE,'DD/MM/YYYY HH24:MI:SS') FROM AB; 
```

输出：**26/03/2013 15:15:34**

如果您只需要显示月份，请尝试使用：

```
SELECT EXTRACT(MONTH FROM SYSDATE) FROM AB; 
```

以上将 MAR 显示为 3（考虑今天的日期）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-26T10:06:01.020

```
select substr(to_date(sysdate,'dd-mon-yyyy'),4,3) from dual; 
```

# jquery - 一页中有几个轨道滑块，而不会破坏项目符号活动类

> ID：15633442
> 
> 赞同：0
> 
> 时间：2013-03-26T09:27:54.110
> 
> 标签：jquery, zurb-foundation, orbit

我有一个我似乎无法解决的问题，那就是如何在不破坏项目符号活动类导航的情况下在一页中使用多个滑块。我已经搜索了这个问题并在谷歌上搜索它没有任何运气。我还尝试在基础网站上复制代码（您在其中使用'featured1'和'featured2'作为id's。但这仍然破坏了子弹活动类它卡在第一个子弹上。现在我不知道下一步是什么并且因此请求您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T01:04:55.497

> 当我尝试纯 HTML 时，同样的问题

您可以尝试我为您制作的工作示例，如下所示。请注意，如果您想更改 Orbit 的样式，我添加了一个配置代码。另请注意，Foundation 的初始化是在它之后进行的。

```
<!DOCTYPE html>
<!--[if IE 8]>               <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <title>Foundation Orbit Sample</title>

  <link rel="stylesheet" href="css/normalize.css" />  
  <link rel="stylesheet" href="css/foundation.css" />

  <script src="js/vendor/custom.modernizr.js"></script>    
</head>
<body>   
    <!-- Orbit test -->
    <h1>Orbit Test</h1>
    <div class="row">
        <div class="large-8 columns">
            <ul data-orbit id="slider1">
                <li><img src="http://placehold.it/800x350&text=slide 1" /><div class="orbit-caption">Slide 1</div></li>
                <li><img src="http://placehold.it/800x350&text=slide 2" /><div class="orbit-caption">Slide 2</div></li>
                <li><img src="http://placehold.it/800x350&text=slide 3" /><div class="orbit-caption">Slide 3</div></li>
            </ul>
        </div>
    </div>
    <div class="row">
        <div class="large-4 columns">
            <ul data-orbit id="slider2">
                <li><img src="http://placehold.it/400x150&text=slide 1" /></li>
                <li><img src="http://placehold.it/400x150&text=slide 2" /></li>
                <li><img src="http://placehold.it/400x150&text=slide 3" /></li>
            </ul>
        </div>
    </div>

  <script src="js/vendor/jquery.js"></script>
  <script src="js/foundation.min.js"></script>
  <script src="js/foundation/foundation.orbit.js"></script>

    <script type="text/javascript">
        $(document).foundation('orbit', {
            bullets_container_class: 'your_custom_style_1',
            bullets_active_class: 'your_custom_style_2',
        });

        $(document).foundation();        
    </script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:38:02.200

在这里，我发布了我写的钩子，以便在基础和 wordpress 中进行这项工作。

[https://gist.github.com/wirlen/5363881](https://gist.github.com/wirlen/5363881)

如果有任何需要它，希望它也对你有用:)

感谢你的回答。

# windows - WDDM 驱动程序是否需要用户模式显示驱动程序？

> ID：15633451
> 
> 赞同：2
> 
> 时间：2013-03-26T09:28:12.097
> 
> 标签：windows, driver, miniport

根据“ [Windows Vista 和更高版本的显示驱动程序模型架构](http://msdn.microsoft.com/en-us/library/ff570589%28v=vs.85%29.aspx)”，应用程序和显示微型端口驱动程序之间有一个通道，如下所示：

> 应用程序 <---> 用户模式 ​​Win32 GDI <---> 内核模式 Win32K.sys <---> Dxgikrnl.sys <---> 显示微型端口驱动程序

它不需要用户模式显示驱动程序。

我想知道是否可以提供仅支持简单的基于帧缓冲区的图形卡的微型端口驱动程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-12T01:38:55.117

你的问题的答案是肯定的。从 WDDM1.2 开始，它为您提供了仅支持仅显示驱动程序的选项，该驱动程序基本上是一个帧缓冲驱动程序，没有任何 3D 支持。但是，如果您想看到 D3D 应用程序运行，您肯定需要一个用户模式驱动程序来与 d3d 运行时交互并实现全套微型端口 DDI 功能。

# android - AudioRecord - 无效的音频缓冲区大小

> ID：15633452
> 
> 赞同：2
> 
> 时间：2013-03-26T09:28:15.953
> 
> 标签：android, audiorecord, audioformat

`AudioFormat.ENCODING_PCM_8BIT`用作 AudioFormat时，下面的行有问题。使用`AudioFormat.ENCODING_PCM_16BIT`这些工作正常。

```
bufferSize = AudioRecord.getMinBufferSize(sampleRate, AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_8BIT); 
audio = new AudioRecord(MediaRecorder.AudioSource.CAMCORDER, sampleRate, AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_8BIT, bufferSize); 
```

日志猫：

```
03-26 10:03:49.643: E/AndroidRuntime(19949): FATAL EXCEPTION: main
03-26 10:03:49.643: E/AndroidRuntime(19949): java.lang.IllegalArgumentException: Invalid audio buffer size.
03-26 10:03:49.643: E/AndroidRuntime(19949):    at android.media.AudioRecord.audioBuffSizeCheck(AudioRecord.java:340)
03-26 10:03:49.643: E/AndroidRuntime(19949):    at android.media.AudioRecord.<init>(AudioRecord.java:237)
03-26 10:03:49.643: E/AndroidRuntime(19949):    at com.kris.test.SoundMeter.runForCamMic(SoundMeter.java:57)
03-26 10:03:49.643: E/AndroidRuntime(19949):    at com.kris.test.VolumeCalc.run(VolumeCalc.java:89)
03-26 10:03:49.643: E/AndroidRuntime(19949):    at com.kris.test.StateChecker.micCalibration(StateChecker.java:159)
03-26 10:03:49.643: E/AndroidRuntime(19949):    at com.kris.test.Settings$3.onClick(Settings.java:354)
03-26 10:03:49.643: E/AndroidRuntime(19949):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:167)
03-26 10:03:49.643: E/AndroidRuntime(19949):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-26 10:03:49.643: E/AndroidRuntime(19949):    at   android.os.Looper.loop(Looper.java:137)
03-26 10:03:49.643: E/AndroidRuntime(19949):    at android.app.ActivityThread.main(ActivityThread.java:4921)
03-26 10:03:49.643: E/AndroidRuntime(19949):    at java.lang.reflect.Method.invokeNative(Native Method)
03-26 10:03:49.643: E/AndroidRuntime(19949):    at java.lang.reflect.Method.invoke(Method.java:511)
03-26 10:03:49.643: E/AndroidRuntime(19949):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)
03-26 10:03:49.643: E/AndroidRuntime(19949):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)
03-26 10:03:49.643: E/AndroidRuntime(19949):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:17:53.690

`AudioRecord.getMinBufferSize`不支持`PCM_8BIT`（请参阅[AudioRecord 源代码）](https://www.codeaurora.org/gitweb/quic/la/?p=platform/frameworks/base.git;a=blob;f=media/java/android/media/AudioRecord.java;h=1be73276e63ac1b0d7af974f507e5f1624daf418;hb=refs/heads/jb_mr1#l477)`ERROR_BAD_VALUE` ，如果您将`PCM_8BIT`格式传递给它，将返回(-2)。

一种解决方案是切换到使用`PCM_16BIT`编码。另一种可能性（我尚未验证它是否有效）是在构造实例`PCM_16BIT`时根据返回的大小除以 2来请求最小缓冲区大小。`AudioRecord`

# macos - 在 macosx 中安装 scons

> ID：15633457
> 
> 赞同：0
> 
> 时间：2013-03-26T09:28:30.337
> 
> 标签：macos, scons

我已经下载了最新的 scons-local 并尝试使用 cmd 安装它

```
sudo python scons.py install 
```

但我得到错误

```
scons: *** No SConstruct file found.
File "/Users/Krupa/wrtc/scons-local-2.3.0/scons-local-2.3.0/SCons/Script/Main.py", line 905, in _main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T06:17:45.023

scons-local 包不是要安装的。它的意思是在原地运行。

非本地包是要安装的，它有一个 setup.py ，你可以运行它来安装。

# python - 导入错误：没有名为“utils”的模块

> ID：15633458
> 
> 赞同：3
> 
> 时间：2013-03-26T09:28:31.150
> 
> 标签：python, python-3.x, importerror, python-import, fuzzywuzzy

请原谅我是新手。我正在尝试使用seatgeek 的fuzzywuzzy 模块。我正在使用 Python 3

最初，我收到此错误：

```
 from fuzzywuzzy import fuzz
ImportError: cannot import name fuzz 
```

我将导入语句更改为导入fuzzywuzzy.fuzz，现在，我收到了这个错误：

```
 File "test.py", line 4, in <module>
     import fuzzywuzzy.fuzz
  File "C:\Python33\lib\site-packages\fuzzywuzzy\fuzz.py", line 31, in <module>
     from utils import *
ImportError: No module named 'utils' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:10:19.123

该`fuzzywuzzy`包不兼容 Python 3，它只能在 Python 2 上运行。

具体来说，该错误是因为该`fuzz`模块使用了相对导入，这是从 Python 3 中删除的一种技术。

存储库问题跟踪器确实有一个[Python 3 兼容性补丁](https://github.com/seatgeek/fuzzywuzzy/pull/8)，您可以试用。

# android - android.widget.Gallery 的替代品（不是 Gallery 应用程序）

> ID：15633462
> 
> 赞同：6
> 
> 时间：2013-03-26T09:28:40.760
> 
> 标签：android, gallery

抱歉，如果以前有人问过这个问题，但我尝试用谷歌搜索这个话题没有任何好的结果。基本上，我正在尝试寻找 Google 决定弃用的 Gallery 小部件的替代品。到目前为止，我有以下候选人：

1.  查看页面。不幸的是（据我所知），您一次只能显示一个视图。我知道有人在这里发布了解决方法：[https](https://gist.github.com/devunwired/8cbe094bb7a783e37ad1) ://gist.github.com/devunwired/8cbe094bb7a783e37ad1 。但我对这种方法有疑问。在我的手机上，显示了三个图像（水平）。最左边和最右边是静态的，而中间的是可滚动的（就像 ViewPager 应该做的那样）。即当我滚动 ViewPager 时，最左边和最右边的图像不会滚动。所以我不得不拒绝这个解决方案。

2.  网格视图。看起来不错，但似乎 GridView 被设计为可水平和垂直滚动。我只想要一行，然后水平滚动。据我所知，Gallery 的设计并没有考虑到这一点。

3.  水平滚动视图。Google 在 Javadocs 中建议的另一个（除了 ViewPager）。似乎是一个很好的使用方法，但是......如果我理解正确，使用这种方法所有内容都将被预先实例化。没有延迟加载..

所以我在这里很困惑。似乎最好的解决方案是一次仅使用一个 View 的 ViewPager （不符合我想要的），或者坚持使用 Gallery。

人家怎么想？？

提前致谢！

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-03-26T09:33:19.163

`android.support.v4.view.ViewPager`是确定的答案。

您可以显示任意数量的页面（`View`s），这完全取决于`PagerAdapter`. 它有一个方法`.getPageWidth(position)`，每个页面都会调用它。例如，如果它返回 0.5，则页面将只有`ViewPager`.

*不要坚持使用`Gallery`，因为它存在内存泄漏问题。*

# jquery - 使用 JQuery 选择表行并选中复选框

> ID：15633471
> 
> 赞同：4
> 
> 时间：2013-03-26T09:28:49.490
> 
> 标签：jquery

我有一个表，我想选择满足我的条件的行并选中它们各自的复选框。假设我想获取带有 date 的行`2013-03-21`。如何使用 JQuery 做到这一点？

```
<table>
<tr>
    <td>
        Record1
    </td>
    <td>
        2013-03-21
    </td>
    <td>
        <input type="checkbox"/>
    </td>
</tr>
<tr>
    <td>
        Record2
    </td>
    <td>
        2013-03-22 
    </td>
    <td>
        <input type="checkbox"/>
    </td>
</tr>
<tr>
    <td>
        Record3
    </td>
    <td>
        2013-03-21
    </td>
    <td>
        <input type="checkbox"/>
    </td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T09:37:17.407

```
$("table tr").each(function () {
    if ($(this).find("td:eq(1)").text().trim() == '2013-03-21') {
     $(this).find("input[type=checkbox]").attr("checked", true);
  }
}); 
```

[演示](http://jsfiddle.net/Fdhyp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:30:50.133

您可以使用[filter()](http://api.jquery.com/filter/)，您最好为 table 分配一些 id 并在选择器中使用它并且是 sepecific

**[现场演示](http://jsfiddle.net/Xf9rm/1/)**

```
trs = $('td').filter(function(){
 if($.trim($(this).text()) == '2013-03-21')
    return $(this).parent();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:32:35.087

你可以使用`filter`：

```
var tableRow = $("td").filter(function() {
    return $(this).text() == '2013-03-21';
}).closest("tr"); 
```

或使用`contain`：

```
var tableRow = $("tr:has(td:contains('2013-03-21'))"); 
```

# windows-phone-7 - 获取 Windows Phone 应用的统计信息

> ID：15633473
> 
> 赞同：0
> 
> 时间：2013-03-26T09:28:52.700
> 
> 标签：windows-phone-7, statistics, windows-phone-8, marketplace

我负责开发一个 windows phone 应用程序，它应该能够显示 windowsphone 仪表板的统计数据

是否有任何 API 可以让某人获得 Windows Phone 应用程序的统计信息，例如总下载量、每天下载量等

或者请建议我如何实现这一目标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:24:26.983

检索数据的一种替代方法是使用`mimvi api`-[这是一个链接](http://www.mimvi.com/)

`mimvi`提供搜索：`http://api.mimvi.com/1.1/search?q={0}&platform=windows` 响应是`json`，您有关于评级、版本、价格等的基本信息。

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:02:20.153

您可以通过仪表板访问下载计数和有关您的应用程序的许多其他详细信息。如果您在应用程序中选择了这些，您还可以查看评论、评级和遥测数据。目前没有用于跟踪下载的 API。

这适用于 Windows Phone 和 Windows 8 商店 [Source](http://social.msdn.microsoft.com/Forums/en-US/windowsstore/thread/0420c55e-a246-4e4e-b4ae-825e990cfbb3)

# python - MacOS 上的 Python 完全忽略了 rlimit

> ID：15633474
> 
> 赞同：4
> 
> 时间：2013-03-26T09:28:53.667
> 
> 标签：python, macos, resources, setrlimit

我在 MacOS 上的 Python 进程完全忽略了我设置的 rlimits。（我通过打印确认它们已设置）

物理内存使用率超过 2.4Gb，此时 CPU 使用率下降 << 5% 并挂起。（潜在的罪魁祸首似乎是 numpy 数组分配，但我不能强制`OutOfMemory`异常来查明在哪里，所以我被卡住了）。这是怎么回事？我认为硬 rlimits 不能被忽略？

编辑：在我看来，有问题的分配不是在本机 Python 中完成的，而是在 numpy 或[scikit-learn](http://scikit-learn.org/stable/)中完成的。链接到[cpython 的源代码：Modules/resource.c](http://hg.python.org/cpython/file/02a89bd646ca/Modules/resource.c)如果是这样，那将是一个明确的 docbug。

```
import resource
resource.setrlimit(resource.RLIMIT_AS,    (1*1048576L, 1.2*1048576L))
resource.setrlimit(resource.RLIMIT_DATA,  (1*1048576L, 1.1*1048576L))
resource.setrlimit(resource.RLIMIT_STACK, (100000, 120000)) 
```

版本：MacOS 10.8.2 上的 python2.7.3（macports，[64b](https://stackoverflow.com/questions/1405913/how-do-i-determine-if-my-python-shell-is-executing-in-32bit-or-64bit-mode)），py27-numpy。

机器具有 4Gb 物理 RAM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:41:55.603

我突然想到，有问题的分配不是在本机 Python 中完成的，而是在 numpy 或[scikit-learn](http://scikit-learn.org/stable/)中完成的。我的分配代码可能会将内存泄漏给临时对象。会调查。可能需要查看[gc](http://docs.python.org/2/library/gc.html)。

如果是这种情况，那听起来像是 resource 上的[docbug](http://docs.python.org/2/library/resource.html)。

链接到[cpython 的源代码：Modules/resource.c](http://hg.python.org/cpython/file/02a89bd646ca/Modules/resource.c)

# python - 堆叠式发电机

> ID：15633476
> 
> 赞同：1
> 
> 时间：2013-03-26T09:28:55.777
> 
> 标签：python, generator

为了标记一个文件，我有一个生成器，它会吐出文件的空格分隔部分，忽略换行符。

```
def parts(filename):
  file = open(filename, 'r')
  for line in file:
    for part in line.split():
      yield part 
```

现在，我想把它写成生成器理解——没有用的是：

```
p = (part for part in line.split() for line in file) 
```

或者

```
p = (part for part in (line.split() for line in file)) 
```

后者吐出分割线而不是分割线的部分

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T09:31:58.947

使用此语法：

```
p = (part for line in file for part in line.split()) 
```

生成器表达式中最外层的 for 循环是左边的循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:32:39.327

```
(word for line in input_file for word in line.split()) 
```

# powershell - Powershell：休眠的中间管道

> ID：15633485
> 
> 赞同：5
> 
> 时间：2013-03-26T09:29:34.060
> 
> 标签：powershell, powershell-2.0

我需要在两组代码之间添加一个（相对）小的暂停，因为后半部分需要在运行之前成功执行前半部分——但 PowerShell 有时会提前一点，并在前一个命令完全完成之前继续执行。

只是为了上下文，这是我正在使用的代码：

```
Initialize-Disk -PassThru -PartitionStyle GPT -Confirm:$false `
      | New-Partition -DriveLetter D -UseMaximumSize 
```

这通常会失败，因为在 PowerShell 执行`New-Partition`.

通常我会使用类似的东西：

```
Initialize-Disk -PassThru -PartitionStyle GPT -Confirm:$false
Start-Sleep -Seconds 2
New-Partition -DriveLetter D -UseMaximumSize 
```

然而问题是输出对象`Initialize-Disk`丢失并且`New-Partition`没有得到输入对象。

我尝试将其`Start-Sleep`放入管道中：

```
Initialize-Disk -PassThru -PartitionStyle GPT -Confirm:$false `
      | Start-Sleep -Seconds 2 `
      | New-Partition -DriveLetter D -UseMaximumSize 
```

...但它会引发异常，因为`Start-Sleep`它不知道如何理解输入对象（这很公平）。

```
Start-Sleep : The input object cannot be bound to any parameters for the command either because the command does not take pipeline 
input or the input and its properties do not match any of the parameters that take pipeline input.
At C:\Users\Administrator\Desktop\test.ps1:104 char:87
+ ... nfirm:$false | Start-Sleep -Seconds 2 `
+                    ~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidArgument: (MSFT_Disk (Obje...11E2-93F2-0...):PSObject) [Start-Sleep], ParameterBindingException
    + FullyQualifiedErrorId : InputObjectNotBound,Microsoft.PowerShell.Commands.StartSleepCommand 
```

* * *

**tl;dr：**如何在我的代码中添加暂停，同时保留前面 cmdlet 的输出对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T09:35:08.743

您可以尝试使用后台作业：

```
Initialize-Disk -PassThru -PartitionStyle GPT -Confirm:$false -asjob |
wait-job | receive-job | New-Partition -DriveLetter D -UseMaximumSize 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:48:36.983

您也可以尝试（未经测试）：

```
Initialize-Disk -PassThru -PartitionStyle GPT -Confirm:$false |
    % { Start-Sleep -Seconds 2 | Out-Null; $_ } |
    New-Partition -DriveLetter D -UseMaximumSize 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T10:16:18.127

如果您想为管道中的每个项目休眠给定的秒数，您可以`ForEach-Object`按照[Graimer 的](https://stackoverflow.com/a/15633887/1630171)建议使用。如果您只想在给定的秒数内休眠而不考虑管道中的项目数量，则必须分解管道：

```
$disks = Initialize-Disk -PassThru -PartitionStyle GPT -Confirm:$false
sleep 2
$disks | New-Partition -DriveLetter D -UseMaximumSize 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-05T01:31:47.270

这对我有用（类似于另一个答案）：

```
New-Partition … | ForEach-Object { Start-Sleep -s 3; $_ | Format-Volume … } 
```

# java - 如何编写用于从 Java 类中删除字段的 TDD 测试？

> ID：15633488
> 
> 赞同：2
> 
> 时间：2013-03-26T09:29:43.613
> 
> 标签：java, tdd

我有一个包含三个字段的 Java 类。我意识到由于需求的变化，我只需要其中两个。

理想情况下，我会在修改代码之前编写一个失败的测试用例。

有没有标准的方法，或者我应该忽略这个任务的 TDD？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:43:26.880

这就是重构，所以你不需要从失败的测试开始。

1.  使用该字段查找所有方法。
2.  确保它们被单元测试覆盖。
3.  重构方法，使它们不再使用该字段。
4.  删除字段。
5.  确保测试正在运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T09:40:32.090

该字段的删除是否会改变类的行为？如果没有，只需删除该字段并检查该类是否仍然正常工作（也就是通过您应该已经编写的测试）。
TDD 原则是编写“由测试设计”的代码。这可能听起来很傻，但意味着您应该编写的第一个类是测试类，测试被测类的行为。您应该迭代几个步骤：

1.  写测试。它不应该编译（你没有被测试的类/类）
2.  使测试编译。它应该失败（你只有一个不满足测试断言的空类）
3.  使测试以最简单的方式通过（通常，只是使您正在测试的方法返回预期值）
4.  细化/重构/泛化被测类，重新运行测试（它应该仍然通过）。这一步应该很快，通常不到 2 分钟。
5.  从第 2 步开始重复，直到所需的行为几乎自然地出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T09:39:08.077

如果您有所需的所有字段的详尽列表，则可以通过反射比较该字段列表：

```
yourClassName.getClass().getDeclaredFields() vs your list of fields 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T10:11:02.710

为没有要删除的字段的构造函数编写测试。

显然，只有在构造函数将字段的值作为参数时才有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T15:41:52.357

*   删除涵盖已删除功能的所有测试（根据 TDD 的 3 条规则，这不算作“编写生产代码”）。

*   删除剩余测试中对过时字段的所有引用。如果其中任何一个失败，则允许您编写所需的生产代码以使其通过。

*   一旦您的测试再次变为绿色，所有后续修改都属于“重构”类别。您可以在此处删除您的（现在未使用的）字段。

# javascript - 用函数表达式命名对象属性似乎是不可能的。但它编译

> ID：15633491
> 
> 赞同：0
> 
> 时间：2013-03-26T09:29:52.687
> 
> 标签：javascript, google-chrome

这个 JavaScript 是如何编译的？即使对我来说，它看起来也是错误的，而且我曾经用 perl 编程过。当我在 Google Chrome 控制台中输入此内容时：

```
window[function () {}] = 42;
>>> 42 
```

什么都没有爆炸。如何？

我耸了耸肩。认为财产显然不能被分配，或者如果是的话，它至少应该被立即销毁。但是看：

```
window[function () {}]
>>> 42 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:33:57.707

这实际上是一个类型强制的示例，其中 javscript 希望将字符串用作属性名称，因此它调用`.toString()`函数定义。

当您这样做时`window[function () {}]`，javascript 调用`function () {}.toString()`并获取`"function () {}"`成为属性名称的字符串。

你可以通过这样做看到`alert(function () {});`

因此，您最终得到了一个 property `window["function () {}"]`。

试试这个序列来说明：

```
window[function () {x=1;}] = 42;
alert(window["function () {x=1;}"]);    // alerts 42 
```

# asp.net - 联系表格示例卡住

> ID：15633493
> 
> 赞同：0
> 
> 时间：2013-03-26T09:29:54.530
> 
> 标签：asp.net, web

我设计了一个 Contact.aspx 网页，但在“提交”按钮上出现错误。当我运行 Contact.aspx 时，出现如下错误：

“/”应用程序中的服务器错误。

编译错误

说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

编译器错误消息：CS1061：“ASP.contact_aspx”不包含“Button1_Click”的定义，并且找不到接受“ASP.contact_aspx”类型的第一个参数的扩展方法“Button1_Click”（您是否缺少 using 指令或装配参考？）

源错误：

```
 </table> </div> <asp:Button ID="Button1" runat="server" Text="Submit" onclick="Button1_Click" /> </form> 
```

我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:32:59.590

检查`Contact.aspx.cs`代码文件&它是否包含`Button1_Click`方法实现。如果没有，请实施它。

# javascript - Sencha Touch 2 - 添加文本字段并更新其值

> ID：15633497
> 
> 赞同：0
> 
> 时间：2013-03-26T09:29:58.483
> 
> 标签：javascript, sencha-touch

我有一个相当简单的问题，我需要一个解决方案。我尝试了不同的选择，但没有得到任何好的结果。我想要做的是，在一个类中，添加一个文本字段并通过 javascript 在其中输入一个值。

例如，我得到了这个代码：

```
Ext.define('project.view.viewexample', {
extend: 'Ext.Panel',
xtype: 'gps',

config: {
    styleHtmlContent: true, 
    scrollabe: 'vertical',
    title: 'GPS',
    tpl: ''
},
constructor: function() {
    this.getPosition();
},
getPosition: function() {
    var geo = Ext.create('Ext.util.Geolocation', {
        autoUpdate: false,
        listeners: {
            locationupdate: function(geo) {
                alert('New latitude: ' + geo.getLatitude());
            },
            locationerror: function(geo, bTimeout, bPermissionDenied, bLocationUnavailable, message) {
                if(bTimeout){
                    alert('Timeout occurred.');
                } else {
                    alert('Error occurred.');
                }
            }
        }
    });
    geo.updateLocation();
}
}); 
```

如果我想创建一个文本字段而不是提醒纬度值用它更新文本字段怎么办。我该怎么做？

1.  如何使用我上面使用的结构创建文本字段？
2.  如何从javascript调用和修改它？

提前致谢！对坐在这方面知识的人大有信心！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:59:13.480

恕我直言，而不是在文本字段中显示消息，消息框会更合适。如果你使用 sencha 的消息框，那么你也会得到一个漂亮的外观。所以没必要用 simple `alert`。

你可以这样做..

```
Ext.Msg.alert('Error', 'Timeout has been occurred.', function(){
     // stuff to do when use clicks on Ok button. Can listen to location again.
}); 
```

只需将其替换为`alert`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-02T22:08:58.557

您已经有了适当的结构，包括创建您想要编写的内容的多种方法之一 - 但它是一个空字符串。

像这样的东西应该工作：

```
config: {
    styleHtmlContent: true, 
    scrollabe: 'vertical',
    title: 'GPS',
    lat: '',
    tpl: '<div class="lat">New latitude: {lat}</div>'
},
constructor: function() {
    this.getPosition();
},
getPosition: function() {
    var geo = Ext.create('Ext.util.Geolocation', {
        autoUpdate: false,
        listeners: {
            locationupdate: function(geo) {
                this.lat = geo.getLatitude();
            }, 
```

模板中的类 (lat) 提供了一种通过 css 进行样式设置的方法。

其他方式实际上取决于您希望它如何显示 - 文本框、标题栏、浮动框、文本等。您想要它一直在那里，还是只在新输入上？

而不是“tpl”，有：

```
items: [{
    xtype: 'label',
    html: '',
    itemId: 'latLabel'
}]

// listener updater:
panel.down('#latLabel').setHtml('New latitude: ' + geo.getLatitude()); 
```

还有很多其他方法可以精确地创建您所追求的东西。Sencha Touch 库包含丰富的工具，可用于创建和/或更新专门满足您需求的元素。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:40:03.240

在构造函数中使用 jQuery 创建文本字段

```
$("#form").append('Lat: <input id="latitude" type="text" name="latitude">'); 
```

更新文本字段

```
$("#form").find("#latitude").val(geo.getLatitude()); 
```

这就对了 ：）

# java - smtp 和 pop3 如何使用 localhost

> ID：15633499
> 
> 赞同：1
> 
> 时间：2013-03-26T09:30:02.760
> 
> 标签：java, smtp, localhost, ubuntu-12.04, pop3

我是 smtp 和 pop3 的新手。我想创建一个使用 pop3 和 smtp 发送和接收电子邮件的客户端应用程序。我需要一个 localhost 域，但我不知道如何设置它。

我正在使用 Ubuntu 12.04

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:40:00.443

[这](http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/)是如何在 java 中使用 SMTP 发送邮件的示例，[这](http://metoojava.wordpress.com/2010/03/21/java-code-to-receive-mail-using-javamailapi/)是如何使用 java 读取邮件的示例。

# ajax - 如何保存 AJAX 数据以供以后使用？

> ID：15633509
> 
> 赞同：0
> 
> 时间：2013-03-26T09:30:29.077
> 
> 标签：ajax, json, selectionchanged

```
 $.ajax({
             url:"<?php echo site_url('proposal/getContact');?>/"+client,
             type: 'GET',
             dataType: 'json',
             success:function(data) {
             //On succes the data is returned from the url and used accordingly.
                htm='<option value="">Select</option>';
                for(i=0;i<data.length;i++){
                    htm +='<option value="'+data[i].Id+'">'+data[i].Name+'</option>';
                }
                 $('select[id="ProjectContact"]').html(htm);
              }
          }); 
```

我想稍后使用变量数据，这样当我选择项目联系人时，我必须处理相同的数据。我试过使用

```
$('select[id="ProjectContact"]').change(function() {
    var contact=$('select[id="ProjectContact"]').val();
                 htm='<div class="span2 text-right"> <img class="img-rounded"> </div>';
                 htm+='<div class="span4">';
                 htm+='<strong>';
                 for(i=0;i<data.length;i++){
                    if(data[i].Id != contact)
                        continue;
                    htm+=data[i].Name+
                    "</strong>,<br/>"+data[i].Designation+",  <br/>"+
                    data[i].PhoneNumber+",<br />";
                    htm+=data[i].Email+",<br/>"+
                    data[i].FacebookUrl+",<br />"+data[i].TwitterUrl+",<br/>"+
                    data[i].LinkedinUrl;  
                    htm+='</div>';
                 }
                 $("#ContactDetails").html(htm); 

 }); 
```

表示无法识别数据。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:33:33.830

您需要将数据存储在成功函数范围之外的变量中：

```
 var myData= {};
 $.ajax({
         url:"<?php echo site_url('proposal/getContact');?>/"+client,
         type: 'GET',
         dataType: 'json',
         success:function(data) {
             myData.data = data;
         }
  }); 
```

然后，您应该可以稍后参考 myData。但是，您以后的代码如何知道 ajax 调用已完成？

# unix - 如果指定列中包含单词，则提取一行

> ID：15633512
> 
> 赞同：2
> 
> 时间：2013-03-26T09:30:43.520
> 
> 标签：unix, grep, text-files, extract, multiple-columns

如果它在文本文件的指定列中包含一个单词，我想提取一行。**我如何在单行 unix 命令上做到这一点？**也许有`cat`, `echo`, `cut`,`grep`有几个 piples 什么的。

我有一个使用这种格式的文本文件

```
#SentenceID<tab>Sentence1<tab>Sentence2<tab>Other_unknown_number_of_columns<tab> ... 
```

文本文件的示例如下所示：

```
021348  this is the english sentence with coach .   c'est la phrase française avec l'entraîneur .   And then there are several nonsense columns like these  .
923458  this is a another english sentence without the word .   c'est une phrase d'une autre anglais sans le bus mot .  whatever foo bar    nonsense columns    2134234 $%^& 
```

如果我要查找的单词`coach`在第二列，则该命令应输出：

```
021348  this is the english sentence with coach .   c'est la phrase française avec l'entraîneur .   And then there are several nonsense columns like these  . 
```

我可以用 python 来做到这一点，但我正在寻找一个 unix 命令或单行的东西：

```
outfile = open('out.txt')
for line in open('in.txt'):
  if "coach" in line.split():
    print>>outfile, line 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T10:23:48.067

那这个呢？

```
awk -F'\t' '{if($2 ~ "coach") print} your_file 
```

*   `-F'\t'`--> 使分隔符成为制表符。
*   `$2 ~ "coach"`--> 在第二个字段中寻找“教练”。
*   `print $0`或`print`--> 打印整行。

**编辑**

[sudo_O](https://stackoverflow.com/users/1066031/sudo-o)提出了以下建议，甚至更短：

```
awk -F'\t' '$2~/coach/' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:34:43.227

对于这种需求，我总是使用 awk ：

> awk -F'\t' '$2 ~ /coach/ {print $0;}' < textFile

您可以使用 $x 访问所有列，$0 包含整行。测试是用正则表达式进行的，在这种情况下非常简单，所以如果你的需求变得更复杂，它真的很强大。

# iphone - iOS 中的 Nsxml 解析器

> ID：15633513
> 
> 赞同：0
> 
> 时间：2013-03-26T09:30:46.940
> 
> 标签：iphone, nsxmlparser

我是电话编程的新手。从 Web 服务调用中，我得到了响应，我必须从中获取数据。我已经尽我所能但无法做到这一点..我需要（这两个问题，即你童年最好的名字是什么？以及你的出生地是什么？）标签帮助中的值... .. 下面是我必须解析的 xml 响应....

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns1:isForgotPasswordResponse xmlns:ns1="http://ws.esb.pmp2.ilantus.com/">
         <ns1:return>
            <ns2:attributes xsi:nil="true" xmlns:ns2="http://vo.common.pmp2.ilantus.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
            <ns2:editAllAttributesBean xsi:nil="true" xmlns:ns2="http://vo.common.pmp2.ilantus.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
            <ns2:loginBean xmlns:ns2="http://vo.common.pmp2.ilantus.com">
               <ns2:changePwdOnNextLogon>false</ns2:changePwdOnNextLogon>
               <ns2:host>localhost</ns2:host>
               <ns2:lock>false</ns2:lock>
               <ns2:loginId>pxpuser1002</ns2:loginId>
               <ns2:loginPassword>Passw0rd</ns2:loginPassword>
               <ns2:newPassword xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               <ns2:oldPassword xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               <ns2:role>Help Desk User Role</ns2:role>
               <ns2:seedvalue>5VIQPHRXOBTMGRID</ns2:seedvalue>
               <ns2:user xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
            </ns2:loginBean>
            <ns2:policyBeans xsi:nil="true" xmlns:ns2="http://vo.common.pmp2.ilantus.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
            <ns2:profileBean xmlns:ns2="http://vo.common.pmp2.ilantus.com">
               <ns2:attributes xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               <ns2:email>Not specified</ns2:email>
               <ns2:firstName xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               <ns2:isRegistered xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               <ns2:lastName xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               <ns2:loginBean xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
               <ns2:username xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
            </ns2:profileBean>
            <ns2:qnABeans xsi:nil="true" xmlns:ns2="http://vo.common.pmp2.ilantus.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
            <ns2:questions xmlns:ns2="http://vo.common.pmp2.ilantus.com">
               <ns2:Attribute>
                  <ns2:attributeName>question1</ns2:attributeName>
                  <ns2:category xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:editable xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:entity_name xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:label xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:operation xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:options xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:required xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:sequence>0</ns2:sequence>
                  <ns2:type xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:value>What was the name of your childhood best fr?</ns2:value>
               </ns2:Attribute>
               <ns2:Attribute>
                  <ns2:attributeName>question2</ns2:attributeName>
                  <ns2:category xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:editable xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:entity_name xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:label xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:operation xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:options xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:required xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:sequence>0</ns2:sequence>
                  <ns2:type xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:value>Which is your place of birth?</ns2:value>
               </ns2:Attribute>
            </ns2:questions>
            <ns2:reportBean xsi:nil="true" xmlns:ns2="http://vo.common.pmp2.ilantus.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
            <ns2:secondFactorBean xmlns:ns2="http://vo.common.pmp2.ilantus.com">
               <ns2:attributes>
                  <ns2:Attribute>
                     <ns2:attributeName>End User Role</ns2:attributeName>
                     <ns2:category xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:editable xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:entity_name xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:label xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:operation xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:options xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:required xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:sequence>0</ns2:sequence>
                     <ns2:type xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:value>Enabled</ns2:value>
                  </ns2:Attribute>
                  <ns2:Attribute>
                     <ns2:attributeName>Help Desk User Role</ns2:attributeName>
                     <ns2:category xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:editable xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:entity_name xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:label xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:operation xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:options xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:required xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:sequence>0</ns2:sequence>
                     <ns2:type xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:value>Enabled</ns2:value>
                  </ns2:Attribute>
                  <ns2:Attribute>
                     <ns2:attributeName>Administrator Role</ns2:attributeName>
                     <ns2:category xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:editable xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:entity_name xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:label xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:operation xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:options xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:required xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:sequence>0</ns2:sequence>
                     <ns2:type xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                     <ns2:value>Disabled</ns2:value>
                  </ns2:Attribute>
               </ns2:attributes>
               <ns2:emailTemplate>Dear {0}, 

Please find the back up code for your multi factor authentication. 
Back up code:{1} 
Please configure your code manually, if you delete your entry from Google authenticator accidentally. 

Thank you, 
TEAM PXP. 

N.B. Please do not reply to this mail, as it is not monitored.</ns2:emailTemplate>
               <ns2:secondFactor>true</ns2:secondFactor>
               <ns2:statusBean>
                  <ns2:errorCode xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:errorMessage xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
                  <ns2:result>true</ns2:result>
               </ns2:statusBean>
            </ns2:secondFactorBean>
            <ns2:statusBean xmlns:ns2="http://vo.common.pmp2.ilantus.com">
               <ns2:errorCode>PXPERROR11033</ns2:errorCode>
               <ns2:errorMessage>Either challenge or response or both not found for the user.pxpuser1002</ns2:errorMessage>
               <ns2:result>true</ns2:result>
            </ns2:statusBean>
         </ns1:return>
      </ns1:isForgotPasswordResponse>
   </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:36:31.740

```
NSMutableString *xmlString;

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)nameSpaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    xmlString = [[NSMutableString alloc] init];    
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    [xmlString appendString:string];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{    
    if ([elementName isEqualToString:@"ns2:value"])
    {
        if (![xmlString isEqual:@""])
        {
            NSLog(@"%@",xmlString);
            [SomeArray addObject:xmlString];
        }
    }

    //Release string
    [xmlString release];
    xmlString = nil;
} 
```

这`NSMutableString`是一个变量，它跟踪`foundCharacters`方法中的当前元素，并使用 elementName 附加字符串和`didEndElement`方法，我们可以识别该标记的值。

**更新**

```
- (void)parserDidEndDocument:(NSXMLParser *)parser
{
    //update your UI here after parsing is finished
} 
```

# objective-c - Objective C Initialiser 元素不是编译时常量

> ID：15633519
> 
> 赞同：2
> 
> 时间：2013-03-26T09:30:59.697
> 
> 标签：objective-c, nsarray, constants, compile-time

当我尝试运行我的构建时，我收到错误“Initialiser element is not a compile-time constant”。可以看出，数组是问题的根源。我的代码如下：

```
@implementation XYZViewController 
//Array setup 
NSArray *example = @[@"X", @"Y", @"Z"];

@end 
```

这不是我的全部代码，但我目前认为没有必要在此处显示我的完整代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:25:32.130

关键是它 `@[@"X", @"Y", @"Z"];`不是静态初始化器，因为编译器将它转换为对`arrayWithObjects:count:`of的方法调用`NSArray`。

静态初始化不能是方法调用，当然编译器会抱怨它。

如果要初始化数组，可以在运行时在方法中进行。你有几个选项可以做到这一点。

如果您想为每个实例初始化数组，只需在默认初始化程序中执行此操作（取决于特定类）。

如果你想在类级别这样做，你可以在`initialize`类方法中进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:38:51.243

你试图在这个块中声明数组，这就是它显示错误的原因，试试这样，

```
@implementation XYZViewController {
    //Array setup 
    NSArray *example ;
}

@end 
```

在 viewDidLoad 方法或其他类似的地方分配数组值 `example = @[@"X", @"Y", @"Z"];`。

# android - 我想在我的 android 应用程序中添加我自己的样式弹出对话框，如图所示

> ID：15633531
> 
> 赞同：4
> 
> 时间：2013-03-26T09:31:55.160
> 
> 标签：android, android-layout, android-dialog

如图所示，上面的部分是我的布局，我想在图片中添加类似下面部分的弹出窗口。那么我该如何创建它以及如何处理对话框按钮事件。？

![在此处输入图像描述](../Images/5666ef4c7fa8a1e9d0c26e90e653ccbc.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T09:39:19.927

```
public class Add extends Activity{

PopupWindow popUp;
Dialog myDialog;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.add);

    myDialog = new Dialog(Add.this);
    myDialog.setContentView(R.layout.popup50);
    myDialog.setTitle("Please Pay Attention!");
    myDialog.setCancelable(true);

    //for save
  Button popone = (Button)myDialog.findViewById(R.id.button1);
  popone.setOnClickListener(new OnClickListener()
  {
  public void onClick(View v) 
  {

      myDialog.dismiss();

     }
  });

  //for cancel
  Button poptwo = (Button)myDialog.findViewById(R.id.button2);
  poptwo.setOnClickListener(new OnClickListener()
  {
  public void onClick(View v) 
  {

    Intent CheckProfile = new Intent(Add.this, UserActivity.class);
    startActivity(CheckProfile);
    myDialog.dismiss();

     }
  });

  myDialog.show();

} 
```

这是 XML

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:background="#00FFFF"
android:layout_width="300dp"
android:layout_height="wrap_content" >

<TextView
    android:id="@+id/popUp_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="30dp"
    android:gravity="center"
    android:textColor="#000000"
    android:text="@string/pop50"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/popUp_text"
    android:layout_marginRight="36dp"
    android:layout_marginTop="44dp"
    android:text="Cancel" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button2"
    android:layout_alignBottom="@+id/button2"
    android:layout_marginRight="69dp"
    android:layout_toLeftOf="@+id/button2"
    android:text="  Ok  " />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:39:10.137

我有类似的东西来显示一个可能对你有帮助的关于屏幕：

```
b.setOnClickListener(new View.OnClickListener() {  
    public void onClick(View v) {
        show_about();              
    }
});

...

private void showAbout() {
    Dialog dialog = new Dialog (context);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setContentView(R.layout.about);
    dialog.setCanceledOnTouchOutside(true);
    dialog.show();      
} 
```

xml 位：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="23dp"
        android:text="An app for the Newcastle Cloud Team"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/textView2"
        android:layout_centerHorizontal="true"
        android:src="@drawable/coche3" />

    ...

  </RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T09:37:04.957

```
<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginRight="5dp" />

<TextView
    android:id="@+id/text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="#FFF" 
    android:layout_toRightOf="@+id/image"/>/>

 <Button
     android:id="@+id/dialogButtonOK"
     android:layout_width="100px"
     android:layout_height="wrap_content"
     android:layout_below="@+id/image"
     android:layout_centerHorizontal="true"
     android:layout_marginTop="18dp"
     android:text=" Ok " /> 
```

将此代码放入按钮事件或您想要的任何内容中

```
final Dialog dialog = new Dialog(context);
            dialog.setContentView(R.layout.coustom);
            dialog.setTitle("Title...");

            // set the custom dialog components - text, image and button
            TextView text = (TextView) dialog.findViewById(R.id.text);
            text.setText("Android custom dialog ");
            ImageView image = (ImageView) dialog.findViewById(R.id.image);
            image.setImageResource(R.drawable.ic_launcher);

            Button dialogButton = (Button) dialog.findViewById(R.id.dialogButtonOK);
            // if button is clicked, close the custom dialog
            dialogButton.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    dialog.dismiss();
                }
            });

            dialog.show(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T11:53:10.537

```
public class PopupforeditActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.alphabetslist);

    callalertDialogueCustom();

} 

   public void callalertDialogueCustom(){

    final Dialog dialog = new Dialog(PopupforeditActivity.this);

    dialog.setContentView(R.layout.popup); // This is my Custom Layout
    dialog.setTitle("This is my custom dialog box");
    dialog.setCancelable(true);
    //there are a lot of settings, for dialog, check them all out!

    //set up text
    TextView text = (TextView) dialog.findViewById(R.id.txt1);
    text.setText("Lots of Hiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii");

    EditText edt=(EditText) dialog.findViewById(R.id.edtxtName);
    edt.setText("i am binded this time");

    //set up image view
   /* ImageView img = (ImageView) dialog.findViewById(R.id.ImageView01);
    img.setImageResource(R.drawable.nista_logo);*/

    //set up button
    Button button = (Button) dialog.findViewById(R.id.btnSave);
    button.setOnClickListener(new OnClickListener() {
    @Override
        public void onClick(View v) {

        Toast.makeText(getApplicationContext(), "You clicked on Save",
                Toast.LENGTH_SHORT).show();
        dialog.dismiss();

        }
    });

    Button button1 = (Button) dialog.findViewById(R.id.btnCancel);
    button1.setOnClickListener(new OnClickListener() {
    @Override
        public void onClick(View v) {
         //finish();
        dialog.dismiss();
        }
    });
    //now that the dialog is set up, it's time to show it    
    dialog.show();

}

} 
```

我的自定义布局 GUI

![在此处输入图像描述](../Images/05aab06eb4330d15131b1a4e15a904dc.png)

XML

```
<?xml version="1.0" encoding="utf-8"?>

    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/rltvview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/bg_black_transparent">

    <ScrollView 
        android:id="@+id/scrlview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="20dip"
        android:layout_centerInParent="true"
        android:background="@android:color/darker_gray" >

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <TextView 
            android:id="@+id/txt1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center_vertical"
            android:paddingLeft="5dip"
            android:layout_marginTop="15dip"
            android:text="Name"
            android:textColor="@android:color/black"
            android:background="@drawable/btn_orange_matte"/>

        <EditText
            android:id="@+id/edtxtName"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip"
            android:layout_marginTop="10dip"
            android:scrollbars="vertical"
            android:hint="hii"
            android:lines="5"
            android:singleLine="false"
            android:textColor="@android:color/black" />

        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:weightSum="1">

            <Button
                android:id="@+id/btnSave" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight=".5"
                android:text="Save"
                android:layout_margin="10dip"/>
            <Button 
                android:id="@+id/btnCancel"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight=".5"
                android:text="Cancel"
                android:layout_margin="10dip"/>

        </LinearLayout>

    </LinearLayout>
</ScrollView>
</RelativeLayout> 
```

只需调用此**callalertDialogueCustom();** 根据您的需要从任何地方获取方法.. 它还将创建自定义对话并为其处理点击事件

# ms-access - 在 Access 之外的 Jet/ACE 查询中使用 InStrRev() 和类似函数

> ID：15633533
> 
> 赞同：0
> 
> 时间：2013-03-26T09:32:02.217
> 
> 标签：ms-access, jet

嗨，我在形成一些 SQL 查询时有点挣扎。目前我正在使用：

```
InStrRev(TABLE.[_URL],"/")+1) AS OUTPUT 
```

给定一个 URL 的输入 - 我想提取最后一部分，例如：

```
www.url.com/some/text/here 
```

应该返回

```
here 
```

总是有 3 个斜线，而我发布的代码片段效果很好；只能在访问范围内。

当我尝试在访问之外使用它时 - 我发现错误 - 关于我可用的替代方案的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:47:34.483

正如您所发现的，从 Access 中执行的 SQL 查询可以使用许多 VBA 函数（如`InStr()`和`InStrRev()`），这些函数本身并不被 SQL 的 Jet/ACE 方言支持。Access 对 Jet/ACE SQL 的“扩展”最强大的方面之一是您甚至可以编写自己的 VBA 函数并在 Access 查询中使用*它们。*

不幸的是，当涉及到“普通”Jet/ACE SQL 中支持哪些函数时，事情会变得有点混乱，因为许多名称都是相同的。如果我们可以在针对在 Access 之外执行的 Jet/ACE 数据库的查询中使用`Left()`, `Right()`,`Mid()`等，那么为什么不使用`InStr()`and`InstrRev()`呢？不幸的是，答案是“只是因为。”。

在您的特定情况下，我同意 Remou 的评论，即您可能只需要检索查询中的整个列值，然后进行 [equivalent of the]`InStrRev()`相关的解析。

# linker - 使用 cmake 正确配置子目录

> ID：15633534
> 
> 赞同：0
> 
> 时间：2013-03-26T09:32:04.390
> 
> 标签：linker, cmake

我目前正在尝试用于我`cmake`的项目。它的结构非常简单，由主文件夹和一个“库”子文件夹组成，其中还包含头文件和源文件：

```
./            sourceA.cpp ...
./lib/        sourceB.cpp headerB.cpp ... 
```

我希望让用户定义一些常量，然后预处理器应该使用这些常量来替换一些占位符，例如：`char data[DIMENSION]`

在主目录中，我使用以下 CMakeLists.txt 请求值并设置它：

```
...
set(DATASET_DIMENSION "4" CACHE STRING "The dimensions of the dataset used.")
set_property(
    GLOBAL
    PROPERTY COMPILE_DEFINITIONS DIMENSION=${DATASET_DIMENSION}
    APPEND
)
add_subdirectory(lib)
... 
```

在子目录中，CMakeLists.txt 主要是添加源文件和调用`add_library(lib ${lib_SOURCES})`.

**问题**：如果我执行`make`，编译器会抱怨`DIMENSION`没有被替换：

```
.../lib/someheader.h:7:19:error: ‘DIMENSION’ undeclared here (not in a function) 
```

我的配置有什么问题？我尝试按照他们指定的 cmake 示例进行操作（我的重点）：

> CMake 在顶级目录中执行时将处理 CMakeLists.txt 文件，然后下降到列出的子目录中。**变量**、包含路径、库路径等**都是继承的**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:50:00.653

您应该能够在您的主 CMakeLists.txt 中执行以下操作：

```
add_definitions(-DDIMENSION=${DATASET_DIMENSION}) 
```

你的问题是它`COMPILE_DEFINITIONS`不是[全局范围的属性](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#section_PropertiesofGlobalScope)，所以设置它没有效果。您可能将其与[目录范围属性混为一谈](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#prop_dir%3aCOMPILE_DEFINITIONS)？

# java - 为什么在这种简单的情况下静态初始化程序块不运行？

> ID：15633536
> 
> 赞同：7
> 
> 时间：2013-03-26T09:32:17.963
> 
> 标签：java, static, load, initialization

```
 class Z
{
    static final int x=10;
    static
    {
        System.out.println("SIB");
    }

}
public class Y
{
    public static void main(String[] args)
    {
        System.out.println(Z.x);
    }
} 
```

输出：10 为什么在这种情况下不加载静态初始化块？当 static x 调用时，类 z 的所有静态成员必须至少加载一次，但静态初始化块不加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:56:30.980

原因是jvm在加载一个类的时候，把这个类的所有常量成员都放到了常量区，当你需要它们的时候，直接用类名调用就行了，也就是说，它不需要实例化这个类Z. 所以不执行静态初始化块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:42:36.483

编译时 Zx 值变为 10，因为

```
static final int x=10; is constant 
```

所以编译器在内联之后创建如下所示的代码

```
System.out.println(10); //which is not calling Z class at runtime 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T09:52:20.307

> 声明中带有 static 修饰符的字段称为 **静态字段**或**类变量**。**它们与类相关联，而不是与任何对象相关联。类的每个实例共享一个类变量，该变量位于内存中的一个固定位置。**任何对象都可以更改类变量的值，但也可以在不创建类实例的情况下操作类变量

因此，当您`Z.x`如下调用时：

```
System.out.println(Z.x); 
```

它不会初始化类，除非你调用`Z.x`它会`x`从那个固定的内存位置获取它。

静态块在 JVM 加载时运行`class Z`。这里永远不会加载它，因为它可以`x`直接访问它而无需加载类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T09:47:29.613

如果 X 不是最终的，那么在这种情况下，JVM 必须加载类“Z”，然后只会执行静态块。现在 JVM 不需要加载“Z”类，因此不会执行静态块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T09:33:46.473

它不会运行，因为该类从未加载。

```
public class Y
{
    public static void main(String[] args)
    {
        Z z new Z(); //will load class
        System.out.println(Z.x);
    }
} 
```

由于`x`字段 on`Z`已被声明，`static final`它们是在固定的内存位置创建的。访问此字段不需要加载类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-24T16:14:31.390

如果一个常量被声明为 static final，则它被称为完美常量。当编译器编译 y 类时，在编译 sop(Zx) 时，它将 sop(Zx) 替换为 sop(10) bcz x 是一个完美的常量，这意味着在字节码类 Y 中不使用类 Z，所以在运行类 Y 时，类 Z 不是这就是为什么不执行 Z 类的 SIB 的原因。

# vb.net - 如何检查重复的 CASE 语句？

> ID：15633539
> 
> 赞同：0
> 
> 时间：2013-03-26T09:32:23.307
> 
> 标签：vb.net

我需要如何在我的代码中检查重复`CASE`语句的解决方案。

例子：

```
 Case "TEST1"
                    Dim ZR As New srv_test.frm1
                    ZR.ContinueInit()
                    ZR.MdiParent = Me
                    ZR.Show()
                Case "TEST2"
                    Dim BU As New srv_test.frm2
                    BU.ContinueInit()
                    BU.MdiParent = Me
                    BU.Show()
                Case "TEST1"
                    Dim ZR As New srv_test.frm1
                    ZR.ContinueInit()
                    ZR.MdiParent = Me
                    ZR.Show() 
```

如您所见`Case`，我的代码中有两个重复的语句，我需要以某种方式检查是否有任何重复的`Case`语句，因为我的代码中有 500 多个案例并且无法手动检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:44:27.210

> 因为我的代码中有超过 500 个案例，无法手动检查。

真正的答案：找到比如此庞大的声明更好的方法。

快速、短期的修复：使用文本处理工具选择适用的行、提取标签并过滤掉唯一值。这将识别您可以在常用编辑器中找到的标签。使用 PowerShell 会是这样的：

```
get-content *.vb | %{ if ($_ -cmatch 'Case\s+"(\w+)"') { New-Object PSObject -prop @{label=$matches[1]} } } | group label | ?{$_.Count -gt 1} | %{$_.Name} 
```

哪个：

*   读取所有文件的内容`*.vb`
*   对于与正则表达式匹配的每一行（如果您的格式不一致，则需要进行调整），并传递带有属性标签的自定义对象。
*   按该标签对结果进行分组。
*   删除标签只出现一次的所有情况
*   返回组名（即标签）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:10:45.093

您可以使用不同的方法：Define a Dictionary of string and Actions

```
Dim dic = new Dictionary(Of string, Action)()
dic.Add("TEST1", AddressOf RunTest1)
dic.Add("TEST2", AddressOf RunTest2)
dic.Add("TEST3", AddressOf RunTest3)
....
dic.Add("TEST1", AddressOf RunTestXXXX) 'the runtime will not allow this case'

Private Sub RunTest1
    Dim ZR As New srv_test.frm1
    ZR.ContinueInit()
    ZR.MdiParent = Me
    ZR.Show()
End Sub
Private Sub RunTest2
    Dim BU As New srv_test.frm2
    BU.ContinueInit()
    BU.MdiParent = Me
    BU.Show()
End Sub
Private Sub RunTest3
    Dim ZR As New srv_test.frm1
    ZR.ContinueInit()
    ZR.MdiParent = Me
    ZR.Show()
End Sub
Private Sub RunTestXXXX
.....
End Sub 
```

然后，您可以只添加一行，而不是调用无限的 Select Case

```
 currentTest = "TEST1"       
 dic(currentTest).Invoke() 
```

当然，您需要调用所有要调用的函数并将它们的地址插入字典中，但是如果您尝试在运行时添加重复的测试用例，您将停止并显示异常消息。

# asp.net - HTML 表单提交 ASP.NET 4.0

> ID：15633546
> 
> 赞同：0
> 
> 时间：2013-03-26T09:32:40.110
> 
> 标签：asp.net, html

实际上，我正在向 ASP.NET 1.1 框架提交带有 action="http://localhost:8080" 的 HTML 表单，它工作正常。但现在相同的代码在 ASP.NET 4.0 上不起作用。有谁知道，是什么原因。

当我更改 action="http://localhost:8080/action.aspx" 时，它在 ASP.NET 4.0 上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:51:19.280

您可能没有 asp.net 4.0 的索引或默认页面

# android - 键盘视图中的 Android 布局

> ID：15633548
> 
> 赞同：2
> 
> 时间：2013-03-26T09:32:42.733
> 
> 标签：android, android-layout, keyboard

是否可以创建如下所示的自定义布局[![图片](../Images/68eb442d7fb24376fad2d69be010d46c.png)](https://i.stack.imgur.com/Fk6vm.jpg) 。有人可以帮我弄清楚是否可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-07T10:16:52.130

是的。碰巧有类似想法的人可以遵循[本指南](http://www.fampennings.nl/maarten/android/09keyboard/)。

这基本上逐步解释了如何使用 KeyboardView 将自定义键盘放入布局 xml 中。并且可以将那里的键定义为具有任何图标

```
<Keyboard xmlns:android="http://schemas.android.com/apk/res/android"
    <Row>
        <Key android:codes="48"    android:keyLabel="0" />
        <Key android:codes="-3"    android:keyIcon="@drawable/human_saying_hello_icon" />
    </Row>
</Keyboard> 
```

# mysql - MySQL COUNT 不能与 WHERE 子句一起正常工作

> ID：15633550
> 
> 赞同：2
> 
> 时间：2013-03-26T09:32:45.003
> 
> 标签：mysql

我有 ID 为 1-100 的邮政编码。

以下查询返回计数 1，即使 where 子句中的 id 不存在：

```
SELECT COUNT(`id`) AS `Zipcode.count` 
FROM `Zipcode` 
WHERE `Zipcode`.`id` = "22a" LIMIT 1; 
```

我相信这是因为“22a”在 MySQL 的幕后变成了简单的“22”。也许是因为 MySQL 会自动转换数据类型或其他什么？

以下提供了一个零计数（因此，如果 char “a” 在前面或在 int “22” 后面，它会有所不同）：

```
SELECT COUNT(`id`) AS `Zipcode.count` 
FROM `Zipcode` 
WHERE `Zipcode`.`id` = "a22" LIMIT 1; 
```

我希望此查询与字符串匹配。如果数据类型不正确，则不应删除字符，这会错误地为我提供不想要的答案。在这两种情况下，结果都应该为零。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:37:49.740

尝试这个：

```
SELECT COUNT(`id`) AS `Zipcode.count`
FROM `Zipcode`
WHERE CAST(`Zipcode`.`id` AS CHAR) = "22a" 
```

它将[id](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)的数据类型转换为 CHAR，因此不会将 '22a' 转换为 22。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:06:54.687

试试这个。请注意，由于 LIMIT 子句设置为 1，您将只能得到一个最大结果。

```
SELECT COUNT(`id`) AS zipCodeCount 
FROM `Zipcode` 
WHERE `id` = "22a" 
LIMIT 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:40:45.637

尝试这个

```
SELECT COUNT(`id`) AS `Zipcode.count` FROM `Zipcode` WHERE `Zipcode`.`id` = 22a LIMIT 1; 
```

# google-checkout - 带有响应处理程序的 Google 结帐，因此更新我的本地数据库

> ID：15633551
> 
> 赞同：0
> 
> 时间：2013-03-26T09:32:49.920
> 
> 标签：google-checkout

我有一个用户订阅网站，用户在注册时购买订阅计划并使用谷歌结账支付，但我不知道如何使用谷歌结账支付，所以当用户使用它支付时，我可以获得任何支付状态响应和更新数据库并使用户当时处于活动状态请任何人都可以向我提供完整的代码，然后感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:56:21.150

Google Checkout 有多个客户端库和示例代码来帮助您进行集成。您还可以选择开源购物车。

有关可用选项的更多信息，请参见下面的链接：

[https://developers.google.com/checkout/samplecode](https://developers.google.com/checkout/samplecode)

# android - 为什么使用 2g 数据连接时 HttpUrlConnection (facebookSDK) 失败？

> ID：15633552
> 
> 赞同：0
> 
> 时间：2013-03-26T09:32:50.557
> 
> 标签：android, facebook

我正在尝试社交化我的 android 应用程序，从 facebook 开始，我成功地使用我的 WiFi 连接在我/feeds 上发布了一个帖子......但是当我只对相同的代码使用 2g 数据连接时，我得到的结果要么是“例外”连接超时”或有时“网络无法访问”。

问题发生在 facebookSDk 的 Request 类中，它使用 HttpUrlConnection 连接到 fb。

```
connection.setDoOutput(true);

BufferedOutputStream outputStream = new BufferedOutputStream(connection.getOutputStream()); 
```

connection.getOutputStream() 稍等片刻，有时会抛出 SocketTimeoutException 或有时网络无法访问

和

1.  是的，我使用 RequestAsyncTask
2.  是的，我使用手机浏览器检查了 graph.facebbok.com 网址，使用 2g 连接，它返回一个错误 json。
3.  是的，我尝试了 facebookSDk 中给出的示例，它似乎也不起作用。
4.  是的，它绝对可以使用 WiFi 连接

由于我大多得到超时异常，我不认为这是我的连接问题，在浏览器中我也可以让 url 返回一些东西。

我已经在堆栈中搜索了答案，但没有这样的答案。所以我希望有人能向我伸出援助之手。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:37:56.450

该错误`SocketTimeoutException`表示您的连接由于一段时间后服务器没有响应而断开连接。由于 2G 提供较慢的数据传输速度，因此我建议您将超时值增加到更高的值。出于测试目的，可能是价值的两倍或三倍。

# jquery - 如何在 Twitter 引导模式淡入淡出上方显示一些东西？

> ID：15633555
> 
> 赞同：3
> 
> 时间：2013-03-26T09:32:57.640
> 
> 标签：jquery, twitter-bootstrap

可能这是一个愚蠢的问题，但我需要在 Twitter 引导模式淡入淡出上方显示一些 DIV。

问题是 DIV 在模态淡入淡出出现之前已经在页面上，并且当它出现时，它会在页面上的所有元素之后设置自己，尽管有任何 z-index 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:38:58.787

最终我明白了。添加**位置：绝对**对我有用：

```
<div style="z-index: 1050; position: absolute;">ABOVE THE MODAL FADE</div> 
```

# c# - 使用 SQL Server 中的 contains 关键字从字符串数组构建 where 子句

> ID：15633562
> 
> 赞同：2
> 
> 时间：2013-03-26T09:33:15.383
> 
> 标签：c#, sql-server, linq

我有一个像这样的字符串：

```
"bottle 750 green" 
```

该字符串每次都有可变数量的单词。我需要，基于这个字符串来创建：

```
CONTAINS(descr_en,'"*bottle*" and "*750*" and "*green*"') 
```

然后，我会将其附加到 sql 语句的 where 子句中，以获得所需的结果。

如何创建生成的包含子句？

我试过这个：

```
var str = "mara 750 bottle";
    string[] strarr = str.Split(' ');
    var result = "";
    foreach (var s in strarr)
    {
        result += "\"*" + s + "*\"" + " AND ";
    } 
```

这给了我：`"*mara*" AND "*750*" AND "*bottle*" AND`这几乎是我所需要的。

从上面我唯一需要的是摆脱培训“和”......

如果可能的话，我更喜欢基于 LINQ 的干净解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:54:19.617

```
string.Join(" AND ", "mara 750 bottle".Split(' ').Select (s => string.Format("\"*{0}*\"", s))) 
```

给`"*mara*" AND "*750*" AND "*bottle*"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:48:20.150

/*为什么不根据以下内容构建您的 CONTAINS 子句：

```
//This is not literally suitable.
foreach( string s in samplestring.Split(' '))
{
    yourstringbuilder.append(" and *");
    yourstringbuilder.append(s);
    yourstringbuilder.append("*");
} 
```

?*/

编辑：对于您编辑的问题 - 就`result = result.remove(result.Length - " AND ".Length);`在您的循环之后

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:54:10.303

这是一个相当干净的方法。

```
public string BuildContainsClause(string filter)
{
    var keywords = filter
        .Split(' ')
        .Select(e => string.Format("\"*{0}*\"", e));

    return string.Format("CONTAINS(descr_en,'{0}')", string.Join(" AND ", keywords));
} 
```

用法：

```
var contains = BuildContainsClause("bottle 750 green");
// contains = "CONTAINS(descr_en,'\"*bottle*\" AND \"*750*\" AND \"*green*\"')" 
```

# java - KeyListener 不产生任何响应

> ID：15633567
> 
> 赞同：1
> 
> 时间：2013-03-26T09:33:38.687
> 
> 标签：java, awt, listener, keylistener

给定以下（部分）代码：

```
import java.awt.*;
import java.awt.event.*;
import java.applet.*;

public class Test extends Applet implements MouseListener , KeyListener
{
    private static final long serialVersionUID = 1L;
    private static final int TOTAL_POINTS = 500;
    private static final int THRESHOLD = 5;

    // the arrays that contain the indexes of the points that the user created 
    private int[] m_Xindex, m_yIndex;  

    // The number of points that the user created 
    private int m_pointsCreated;       

    @Override
    public void keyTyped(KeyEvent keyEvent) 
    {
          char key = keyEvent.getKeyChar();
          if (key == 'F')
              System.out.println("123");
    } 

    @Override
    public void mouseReleased(MouseEvent arg0) {/* Empty */ }

    @Override
    public void mouseClicked(MouseEvent e) {/* Empty */ }

    @Override
    public void mouseEntered(MouseEvent e) {/* Empty */ }

    @Override
    public void mouseExited(MouseEvent e) {/* Empty */ }

    @Override
    public void mousePressed(MouseEvent myEvent) {/* Empty */ }

    @Override
    public void keyPressed(KeyEvent keyEvent)  {}

    @Override
    public void keyReleased(KeyEvent keyEvent) {}
} 
```

我删除了我的工作代码，只留下了有问题的代码。

当我按 时`F`，我想打印到屏幕上`123`，但屏幕上没有打印任何内容。

的代码有什么问题`keyTyped`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:35:26.720

1.  更改`(key == 'F')`为`if (key.equals('F'))`. 测试对象等价而不是等价。
2.  确保组件是`focusable`& to `requestFocusInWindow()`。后者最好通过`@Override`on`start()`方法来完成。
3.  考虑使用 Swing( `JApplet`) 和键绑定而不是 AWT`Applet`和`KeyListener`.

# iphone - rdio 和 spotify 就像 iOS 中正在播放的栏？

> ID：15633568
> 
> 赞同：0
> 
> 时间：2013-03-26T09:33:39.567
> 
> 标签：iphone, ios

如何创建一个可以从底部向上滑动并从顶部滑开的正在播放的条形图，它总是会重叠一些视图但不是所有视图 - 就像 z-index 堆叠在视图上带有可滑动手势？

它应该与[JASidePanels 之类的东西一起使用](https://github.com/gotosleep/JASidePanels)

在 iOs 上:-)

此处功能截图：

![截屏](../Images/cee72a3edc3235cf52c98ecfac46966c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:31:39.800

您应该能够通过将子视图添加到您的 UIViewcontroller（或可能是 JASidePanels）并将其置于前面来做到这一点。就像是：

```
BottomBarView *bottomBar = [[BottomBarView alloc] init];
[self addSubview:bottomBar];
[self bringSubviewToFront:bottomBar]; 
```

请注意，这将来自您的 UIViewController，而不是来自 AppDelegate。

另一种选择是使用 XIB 或 Storyboard 添加子视图，并使用 Interface Builder 确保视图位于正确的 z-index 上。

为了让它可滑动，你只需要听正确的手势，然后隐藏它，`bringSubviewToFront`在其他视图上使用。

# java - 在 List 中检索 Map 的值

> ID：15633571
> 
> 赞同：3
> 
> 时间：2013-03-26T09:33:46.103
> 
> 标签：java

```
ArrayList<HashMap<String, Object>> list = ArrayList<HashMap<String, Object>>() 
```

我有一个包含哈希图的数组列表，我能够获取我的 List 的位置，现在我将如何获取`and`我的 List 中对象的键值。

```
@Override
public View getDropDownView() {        
    System.out.println(data.get(position)); // i am getting my List Objects 
} 
```

// 下面是输出`data.get(position)`

```
 {"title":"hello"}, => 0 
 {"title":"hello1"}, => 1
 {"title":"hello2"}, => 2
 {"title":"hello3"}, => 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:49:02.460

试试这个：

```
List<HashMap<String, Object>> list = new ArrayList<HashMap<String, Object>>();

    for (Map element : list) {
        Set<Map.Entry<String, Object>> entrySet = element.entrySet();
        for (Map.Entry<String, Object> mapEntry : entrySet) {
            System.out.println("Key is : " + mapEntry.getKey());
            System.out.println("Value is : " + mapEntry.getValue());
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:43:56.253

用完整的例子试试这个：

```
ArrayList<HashMap<String, Object>> list = new ArrayList<HashMap<String,Object>>();
HashMap<String, Object> map1 = new HashMap<String, Object>();
HashMap<String, Object> map2 = new HashMap<String, Object>();
map1.put("title", "hello");
map2.put("title2", "hello2");
list.add(map2);
list.add(map1);

HashMap<String, Object> innerMap;

         for(int i=0;i<list.size();i++)
         {
              innerMap = list.get(i);           

             for (Map.Entry<String, Object> entry : innerMap.entrySet())
             {
                 System.out.println(entry.getKey() + "/" + entry.getValue());
             }
         } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T09:56:56.683

对上述代码稍作修改。请找到下面的代码片段。

```
public class Test01 {
public static void main(String[] args) {
    ArrayList<HashMap<String, Object>> data = new ArrayList<HashMap<String, Object>>();
    HashMap<String, Object> map=new HashMap<String, Object>();
    map.put("test_key", "test_value");
    data.add(map);
    HashMap hashMap = data.get(0);
    Iterator<Object> iterator=hashMap.entrySet().iterator();
    while(iterator.hasNext()){
        Map.Entry<String, Object> entry=(Entry<String, Object>) iterator.next();
        System.out.println("Key :"+entry.getKey()+" Value : "+entry.getValue());
    }

} 
```

}

我希望这可能会有所帮助...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T09:40:58.223

你的问题还有很多不足之处，但我相信这就是你要找的

```
public class HashMapClass {

    public static void main(String[] args){

        ArrayList<HashMap<String, Object>> data = new ArrayList<HashMap<String, Object>>();

        //Get the Hasmap at position
        HashMap map = data.get(position);

        //Get the data in a the hashmap
        Object obj = map.get(key);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T09:46:37.143

你可以使用 Map.Entry

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;

public class Y {

    public static void main(String[] args) {
        // Your data structure...
        List<Map<String, Object>> list = new ArrayList<Map<String, Object>>();

        //Add some dummy data
        Map<String, Object> map = new HashMap<String, Object>();
        map.put("1", "A");
        map.put("2", "B");
        map.put("3", "C");

        //Add the Map to the List
        list.add(map);

        int positionInList = 0; //Manipulate this how you want

        //Use Map.Entry to access both key and value
        for (Entry<String, Object> entry : list.get(positionInList).entrySet()) {
            String key = entry.getKey();
            Object value = entry.getValue();
        }
    }
} 
```

# c# - 使用 C# 添加“xs:Enumeration”XSD

> ID：15633574
> 
> 赞同：1
> 
> 时间：2013-03-26T09:33:52.380
> 
> 标签：c#, xml, enums, xsd

如何使用 C# 添加“xsi:Enumeration”XSD

这是基本文件 XSD：

```
<xs:schema xmlns="urn:bookstore-schema"
     targetNamespace="urn:bookstore-schema"
     xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:simpleType name="TagType">
    <xs:restriction base="xs:string">
             <!--here to add new Enum elements -->
    </xs:restriction>
</xs:simpleType> 
```

我想用 c# 得到这个结果：

```
<xs:schema xmlns="urn:bookstore-schema"
     targetNamespace="urn:bookstore-schema"
     xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:simpleType name="TagType">
    <xs:restriction base="xs:string">
        <xs:enumeration value="Actor" />
        <xs:enumeration value="Productor" />
        <xs:enumeration value="Director" />
        <xs:enumeration value="Category" />
    </xs:restriction>
</xs:simpleType> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:38:09.187

您可以使用 System.xml.schema 类编辑 xsd 文件。可以在此支持链接上找到详细示例。

[http://support.microsoft.com/kb/318502/en-us](http://support.microsoft.com/kb/318502/en-us)

这是修改后的代码，用于将两个枚举添加到文件中并重新保存文件。

```
FileStream fs;
XmlSchema schema;
ValidationEventHandler eventHandler = 
    new ValidationEventHandler(Class1.ShowCompileErrors);

try
{
    fs = new FileStream("book.xsd", FileMode.Open);
    schema = XmlSchema.Read(fs, eventHandler);
    schema.Compile(eventHandler);

    XmlSchemaSet schemaSet = new XmlSchemaSet();
    schemaSet.Add(schema);
    schemaSet.Compile();
    schema = schemaSet.Schemas().Cast<XmlSchema>().First();

    var simpleTypes =
        schema.SchemaTypes.Values
            .OfType<XmlSchemaSimpleType>()
                .Where(t => t.Content is XmlSchemaSimpleTypeRestriction);

    foreach (var simpleType in simpleTypes)
    {
        XmlSchemaSimpleTypeRestriction restriction = 
        (XmlSchemaSimpleTypeRestriction)simpleType.Content;

        XmlSchemaEnumerationFacet actorEnum = 
            new XmlSchemaEnumerationFacet();

        actorEnum.Value= "Actor";
        restriction.Facets.Add(actorEnum);
        XmlSchemaEnumerationFacet producerEnum = 
            new XmlSchemaEnumerationFacet();

        producerEnum.Value = "Producer";
        restriction.Facets.Add(producerEnum);                       
    }

    fs.Close();
    fs = new FileStream("book.xsd", FileMode.Create);
    schema.Write(fs);
    fs.Flush();
    fs.Close();
}
catch (XmlSchemaException schemaEx)
{
    Console.WriteLine(schemaEx.Message);
}
catch (XmlException xmlEx)
{
    Console.WriteLine(xmlEx.Message);
}
    catch (Exception ex)
{
    Console.WriteLine(ex.Message);
}
finally
{
    Console.Read();
} 
```

# apache - 使用 domain.com 到 www.domain.com 重定向设置来处理 POST 请求的推荐方法是什么

> ID：15633575
> 
> 赞同：0
> 
> 时间：2013-03-26T09:33:53.003
> 
> 标签：apache, redirect, post, reverse-proxy, server-administration

我设置了 domain.com 到 www.domain.com 的重定向，并且所有对 domain.com/ 的请求都重定向到 www.domain.com/。我们面临的问题是从第三方服务到 domain.com 的 POST 请求，在重定向到 www.domain.com 期间，它被转换为 GET 请求并且参数丢失。

我可以通过使用反向代理设置为 domain.com 提供所有 POST 请求来解决此问题。但这是推荐的方法吗？

这一定是一个常见的问题，任何设置了 domain.com 到 www.domain.com 重定向的人都会面临。我想了解可能的解决方案，以及推荐和最广泛使用的方法。

# javascript - 如何检查元素是否未定义？

> ID：15633576
> 
> 赞同：16
> 
> 时间：2013-03-26T09:33:57.270
> 
> 标签：javascript

我想检查 DOM 元素的特定属性是否未定义 - 我该怎么做？

我试过这样的事情：

```
if (marcamillion == undefined) {
    console.log("Marcamillion is an undefined variable.");
}
ReferenceError: marcamillion is not defined 
```

如您所见，引用错误告诉我变量未定义，但我的`if`检查显然不起作用，因为它生成的是标准 js `ReferenceError`，而不是我在`console.log`.

**编辑 1**

或者更好的是，如果我试图确定元素的属性是否像这样未定义：

`$(this).attr('value')`

确定是否未定义的最佳方法是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-26T09:35:27.747

使用`typeof`：

```
if (typeof marcamillion == 'undefined') {
    console.log("Marcamillion is an undefined variable.");
} 
```

编辑第二个问题：

```
if ($(this).attr('value')) {
    // code
}
else {
    console.log('nope.')
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T09:37:18.360

```
if (typeof marcamillion === 'undefined') {
    console.log("Marcamillion is an undefined variable.");
} 
```

请注意，使用`===`而不是`==`被认为是更好的样式。

# android - 对 Actionbar + Tab 片段使用 Sherlock 示例代码？

> ID：15633578
> 
> 赞同：0
> 
> 时间：2013-03-26T09:33:59.550
> 
> 标签：android, actionbarsherlock

我正在开发一个应用程序，在该应用程序中我也必须使用低于 3.0 的操作。所以我为此使用 Sherlock Library。

但是使用这个库变得非常困难，因为我无法捕捉到一些重要的事件，比如我想在屏幕上使用 ActionBar 和 TabFragments，我已经编辑了代码并像这样使用它：

```
public class TabNavigation extends SherlockActivity implements ActionBar.TabListener {
    private TextView mSelected;
    ActionMode mModes;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        setTheme(SampleList.THEME); //Used for theme switching in samples
        super.onCreate(savedInstanceState);

        setContentView(R.layout.tab_navigation);
        mSelected = (TextView)findViewById(R.id.text);

        mModes = startActionMode(new AnActionModeOfEpicProportions());

        getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        for (int i = 1; i <= 6; i++) {
            ActionBar.Tab tab = getSupportActionBar().newTab();
            tab.setText("Tab " + i);
            tab.setTabListener(this);
            getSupportActionBar().addTab(tab);
        }
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction transaction) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction transaction) {
        mSelected.setText("Selected: " + tab.getText());
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction transaction) {
    }

    private final class AnActionModeOfEpicProportions implements ActionMode.Callback {
        @Override
        public boolean onCreateActionMode(ActionMode mode, Menu menu) {
            //Used to put dark icons on light action bar
            boolean isLight = SampleList.THEME == R.style.Theme_Sherlock_Light;

            menu.add("Save")
            .setIcon(isLight ? R.drawable.ic_compose_inverse : R.drawable.ic_compose)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

            menu.add("Search")
            .setIcon(isLight ? R.drawable.ic_search_inverse : R.drawable.ic_search)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

            menu.add("Refresh")
            .setIcon(isLight ? R.drawable.ic_refresh_inverse : R.drawable.ic_refresh)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

            menu.add("Save")
            .setIcon(isLight ? R.drawable.ic_compose_inverse : R.drawable.ic_compose)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

            menu.add("Search")
            .setIcon(isLight ? R.drawable.ic_search_inverse : R.drawable.ic_search)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

            menu.add("Refresh")
            .setIcon(isLight ? R.drawable.ic_refresh_inverse : R.drawable.ic_refresh)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

            return true;
        }

        @Override
        public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
            return false;
        }

        @Override
        public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
            Toast.makeText(TabNavigation.this, "Got click: " + item, Toast.LENGTH_SHORT).show();
            //mode.finish();
            return true;
        }

        @Override
        public void onDestroyActionMode(ActionMode mode) {
        }
    }

    @Override
    protected void onResume() {
        super.onResume();
        if(mModes!=null){
            mModes = startActionMode(new AnActionModeOfEpicProportions());
        }
    }

} 
```

其中`mModes = startActionMode(new AnActionModeOfEpicProportions());`是提供 ActionBar 的代码。但是我怎样才能控制这个 Actionbar 类的 backKey 按下。请给我建议。

我还想更改 ActionBar 上提供的图像。我很抱歉，但我已经搜索了很多，但没有在代码中得到图像点击监听器事件。请帮我。

![在此处输入图像描述](../Images/2dd342821e6cbd02d6336d5023d1c662.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:51:45.267

> 其中 mModes = startActionMode(new AnActionModeOfEpicProportions()); 是将提供 ActionBar 的代码。但是我怎样才能控制这个 Actionbar 类的 backKey 按下。请给我建议。

`startActionMode`不*“提供 ActionBar”*它启动与标准不同的上下文操作栏`ActionBar`。您很可能不需要观察上下文操作栏的 BACK 按钮，但您确实有一个回调，因为 BACK 按钮将触发上下文操作栏关闭，因此`onDestroyActionMode`将被调用。如果您仍想查看 BACK 按钮，则在`onBackPressed`回调中实现一个 watch 以查看它是否在上下文操作栏当前显示时被调用。

> 我还想更改 ActionBar 上提供的图像。

对于该标准`ActionBar`，有很多关于如何更改其外观的教程/示例/文档。对于上下文操作栏，您还可以选择使用自定义主题更改其外观（例如，[检查此问题](https://stackoverflow.com/questions/10338289/contextual-actionbar-styles)）。

> 我很抱歉，但我已经搜索了很多，但没有在代码中得到图像点击监听器事件

没有意义，更好地解释你在找什么。

# java - Android从引发IOException的http请求获取json：尝试在关闭的流上读取

> ID：15633579
> 
> 赞同：1
> 
> 时间：2013-03-26T09:34:00.237
> 
> 标签：java, android, json

尝试使用此类从 http 请求中获取 json：

```
 import java.io.BufferedReader;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.InputStreamReader;
    import java.io.UnsupportedEncodingException;
    import org.apache.http.HttpEntity;
    import org.apache.http.HttpResponse;
    import org.apache.http.client.ClientProtocolException;
    import org.apache.http.client.methods.HttpPost;
    import org.apache.http.impl.client.DefaultHttpClient;
    import org.json.JSONException;
    import org.json.JSONObject;
    import android.util.Log;

    public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

      }
          } 
```

但有时会出现异常，例如

  **E/Buffer 错误（300）：转换结果时出错 java.io.IOException：尝试在关闭的流上读取。**

任何人都可以提前帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:54:29.957

谢谢我把代码改成了这样：现在它比以前快了一倍。

但是我需要测试更多次，因为我遇到了我很少发布为问题的异常。

```
 public class JSONParser {

InputStream is = null;
JSONObject jObj = null;
String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url) {

    HttpClient client = new DefaultHttpClient();
    // Perform a GET request for a JSON list
    HttpUriRequest request = new HttpGet(url);
    // Get the response that sends back
    HttpResponse response = null;
    try {
        response = client.execute(request);
    } catch (ClientProtocolException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    HttpEntity entity = response.getEntity();

    try {
        json = EntityUtils.toString(entity);
    } catch (ParseException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
    } 
```

它比以前更快，但问题是应用程序在网络连接缓慢时崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:44:01.573

试试这样。。

```
HttpClient client = new DefaultHttpClient();
        // Perform a GET request for a JSON list
        HttpUriRequest request = new HttpGet("https://somejson.json");
        // Get the response that sends back
        HttpResponse response = null;
        try {
            response = client.execute(request);
        } catch (ClientProtocolException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-29T14:29:20.677

我建议去除静电。对我来说，它在移除后起作用。

**静态**InputStream is = null;

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-26T09:47:39.350

起初我真的不喜欢你的静态`InputStream`变量，为什么是静态的？只需使其成为正常变量而不是静态的。尤其是在 Android 中，静态变量根本不是赢家。

其次，如果您想`JSON`从服务器获取，则需要使用`GET`request 而不是`POST`

**并提出质疑。**

我认为问题是你应该关闭`BufferedReader`而不是`InputStream`

```
while ((line = reader.readLine()) != null) {
    sb.append(line + "\n");
}
reader.close();
// next work 
```

最后提出一个建议。将使用什么来[`EntityUtils`](http://developer.android.com/reference/org/apache/http/util/EntityUtils.html)代替**getContent()**。您将通过它节省时间，而不是从 InputStream 中读取。

```
HttpEntity entity = response.getEntity();
String json = EntityUtils.toString(entity); 
```

现在你很快就拥有`JSON`了字符串。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-11-25T05:11:08.460

就`InputStream` `non-static`这样吧。我使用了post方法，很好......

# windows - WINAPI explorer shell 文档“详细信息”

> ID：15633580
> 
> 赞同：4
> 
> 时间：2013-03-26T09:34:15.423
> 
> 标签：windows, delphi, winapi

[与这个问题](https://stackoverflow.com/q/1439719/830899)类似，我正在寻找一种实用的方法来阅读当您在资源管理器中选择“属性”时显示的“详细信息”窗格中的信息。

例如在下面的屏幕截图中，

![截屏](../Images/bf26e4b02ffefc559df7fac42e82007f.png)

一些随机的细节被圈了出来。

我不是在寻找一种方法来确定以其他方式圈出的特定项目（例如，请不要建议如何找出图像的像素宽度），这不是我所追求的。我需要一种方法来解析所有可用信息，以便在我自己的程序中显示，而不必自己“了解”这些文件。这只是为了创建一个特定的用户界面，而不必实际打开显示的对话框。

对于它的价值，语言 du jour 是 Delphi，但我完全有能力翻译 c++ 或任何其他方言的 winapi 代码，但如果你碰巧有 delphi 代码，那对我个人来说将是一个奖励。

编辑：我希望能够获得文档的特定详细信息，例如 PowerPoint 文档中的幻灯片计数，这不符合您访问大多数文档具有的属性所需的标准化常量。

例如，我可以使用此代码（但不是幻灯片计数）从 powerpoint 文档中获取一些基本信息。

```
uses shellapi,ComObj;
{$R *.dfm}

const
  FmtID_SummaryInformation: TGUID =
    '{F29F85E0-4FF9-1068-AB91-08002B27B3D9}';

function FileTimeToDateTimeStr(F: TFileTime): string;
var
  LocalFileTime: TFileTime;
  SystemTime: TSystemTime;
  DateTime: TDateTime;
begin
  if Comp(F) = 0 then Result := '-'
  else
  begin
    FileTimeToLocalFileTime(F, LocalFileTime);
    FileTimeToSystemTime(LocalFileTime, SystemTime);
    with SystemTime do
      DateTime := EncodeDate(wYear, wMonth, wDay) +
        EncodeTime(wHour, wMinute, wSecond, wMilliseconds);
    Result := DateTimeToStr(DateTime);
  end;
end;

function GetDocInfo(const FileName: WideString): string;
var
  I: Integer;
  PropSetStg: IPropertySetStorage;
  PropSpec: array[2..19] of TPropSpec;
  PropStg: IPropertyStorage;
  PropVariant: array[2..19] of TPropVariant;
  Rslt: HResult;
  S: string;
  Stg: IStorage;
begin
  Result := '';
  try
    OleCheck(StgOpenStorage(PWideChar(FileName), nil, STGM_READ or
      STGM_SHARE_DENY_WRITE,
      nil, 0, Stg));
    PropSetStg := Stg as IPropertySetStorage;
    OleCheck(PropSetStg.Open(FmtID_SummaryInformation,
      STGM_READ or STGM_SHARE_EXCLUSIVE, PropStg));
    for I := 2 to 19 do
    begin
      PropSpec[I].ulKind := PRSPEC_PROPID;
      PropSpec[I].PropID := I;
    end;
    Rslt := PropStg.ReadMultiple(18, @PropSpec, @PropVariant);
    OleCheck(Rslt);
    if Rslt <> S_FALSE then for I := 2 to 19 do
      begin
        S := '';
        if PropVariant[I].vt = VT_LPSTR then
          if Assigned(PropVariant[I].pszVal) then
            S := PropVariant[I].pszVal;
            case I of
              2:  S  := Format('Title: %s', [S]);
              3:  S  := Format('Subject: %s', [S]);
              4:  S  := Format('Author: %s', [S]);
              5:  S  := Format('Keywords: %s', [S]);
              6:  S  := Format('Comments: %s', [S]);
              7:  S  := Format('Template: %s', [S]);
              8:  S  := Format('Last saved by: %s', [S]);
              9:  S  := Format('Revision number: %s', [S]);
              10: S := Format('Total editing time: %g sec',
                  [Comp(PropVariant[I].filetime) / 1.0E9]);
              11: S := Format('Last printed: %s',
                  [FileTimeToDateTimeStr(PropVariant[I].filetime)]);
              12: S := Format('Create time/date: %s',
                  [FileTimeToDateTimeStr(PropVariant[I].filetime)]);
              13: S := Format('Last saved time/date: %s',
                  [FileTimeToDateTimeStr(PropVariant[I].filetime)]);
              14: S := Format('Number of pages: %d', [PropVariant[I].lVal]);
              15: S := Format('Number of words: %d', [PropVariant[I].lVal]);
              16: S := Format('Number of characters: %d',
                  [PropVariant[I].lVal]);
              17:; // thumbnail
              18: S := Format('Name of creating application: %s', [S]);
              19: S := Format('Security: %.8x', [PropVariant[I].lVal]);
            else
               S := Format('unknown property#%d: %s', [i,S]);

        end;
        if S <> '' then Result := Result + S + #13#10;
      end;
  finally
  end;
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  memo1.text :=GetDocInfo('C:\mypowerpoint.ppt');
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-07T20:55:15.340

Windows 7 SDK 中的 C++ 示例演示了属性枚举（在 Samples\winui\shell\appplatform\PropertyEdit 下），以及[CodePlex](http://prop.codeplex.com/)上的更长演示。

没有“规范”的属性列表，因为属性系统是可扩展的；但是，Microsoft 属性列表是 SDK 的一部分，可以在 propkey.h 中找到。

# malware-detection - 我的应用程序被检测为恶意软件

> ID：15633585
> 
> 赞同：0
> 
> 时间：2013-03-26T09:34:29.507
> 
> 标签：malware-detection

**情况**

有一个桌面应用程序的安装程序。当它运行时，它会解压缩一些可执行文件，执行它们，写入注册表等。每个可执行文件和安装程序本身都是由 out 团队编写的，不旨在对用户造成任何伤害，并使用有效的安全证书进行签名。无论如何，Malwarebytes AntiMalware 工具将其中一个可执行文件识别为 MSIL.downloader。

**问题**

我们怎样才能摆脱这种行为？

**细节**

*   我们的几个客户报告了这个问题。但是，当我在我的机器上使用相同的工具扫描文件时，它没有检测到其中的任何间谍软件。
*   我们有问题可执行文件的源代码，如果有帮助可以稍微重写它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:42:02.637

对于那些遇到同样问题的人：

解决方案是将支持请求发布到[http://helpdesk.malwarebytes.org](http://helpdesk.malwarebytes.org)并说明情况并按照他们的说明进行操作。

# security - 有人如何生成假 IP 地址？

> ID：15633588
> 
> 赞同：0
> 
> 时间：2013-03-26T09:34:35.180
> 
> 标签：security, networking, web, ip

我的网站有问题，有人发表了大量虚假评论，当我浏览评论详细信息时，我意识到这些评论是从世界各地不同的 IP 地址生成的。我认为这不能由全球各地的人们或不同的计算机完成，我确信它是通过编程工作完成的。我的问题不是关于如何防止这种情况，我问的是他/她如何生成假 IP 地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:51:20.497

[从评论](https://stackoverflow.com/questions/15633588/how-somebody-can-generate-fake-ip-addresses#comments-15633588)中提取答案（按最可能的情况排序）：

*   [Tor](http://en.wikipedia.org/wiki/Tor_%28anonymity_network%29) [等](http://en.wikipedia.org/wiki/Anonymous_P2P)“匿名网络” 。
*   [匿名代理](http://en.wikipedia.org/wiki/Open_proxy)
*   [僵尸网络](http://en.wikipedia.org/wiki/Botnet)
*   [伪造/欺骗的 IP 地址](http://en.wikipedia.org/wiki/IP_address_spoofing)

此答案中省略了更多，通常更“牵强”的选项，因为这些选项不太可能用于垃圾评论。

# .net - .net Web App - 轻量级报告引擎和报告管理器选项

> ID：15633595
> 
> 赞同：0
> 
> 时间：2013-03-26T09:34:50.987
> 
> 标签：.net, reporting-services

我们正在寻找可以嵌入到我们的 Web 应用程序中的 SSRS 报告管理器的替代选项。[http://www.plutora.com](http://www.plutora.com)

我们研究了 SSRS、Active Reports、Crystal 和 Telerik，但它们都不是真正的用户友好型和轻量级的，最终用户无需培训即可在其中构建自己的报告。

我们使用 sencha 前端控件、SQL Sever 2008 和 .net 4 (RAZR)

有没有什么好的、稳定的 Reporting Manager 选项可供选择？用户应该能够执行现有报告、更改现有报告的参数、构建自己的自定义报告、应用公共和私人权限以及对每个报告进行基本格式化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:52:44.917

您可以试试我们的[SharpShooter 报告](http://www.perpetuumsoft.com/SharpShooter-Reports-Enterprise.aspx)。它支持多种技术：Win Forms、WPF、Silverlight、WinRT。此外，我们还有纯[JavaScript 和 HTML Web 查看器](http://www.perpetuumsoft.com/Demo/SSReports.Web/Web/StartPage.htm)，可用于任何基于 .NET 的 Web 系统。

报表支持您需要的高度灵活的参数。

该系统还具有基于 Windows 的设计器，允许用户创建他/她自己的报告。

# php - 如何在 mysqli_query 中使用 $_GET？

> ID：15633600
> 
> 赞同：2
> 
> 时间：2013-03-26T09:35:20.030
> 
> 标签：php, mysql, forms, mysqli, insert

我正在尝试制作几个文本框，并在提交时连接另一个 php，假设它是 database.php，然后 database.php 会将文本框中的内容插入 mysql 数据库表，但我不确定我应该如何进入 mysqli_query 代码....我现在拥有的是

```
mysqli_query($db,"INSERT INTO jliu VALUE(null,$_GET['title'],$_GET['fname'],$_GET['lname'],$_GET['description'])"); 
```

当然 $_GET 将无法正常工作。我真的不知道如何正确获得它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:40:46.710

请不要使用 mysql_query() 和 consorts，它们[太不安全了](http://en.wikipedia.org/wiki/SQL_injection)。请查看[PDO](http://php.net/manual/en/book.pdo.php)并改用它。具体来说 PDO::prepare() 和 PDOStatement::execute() 将是您的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:37:53.760

您需要断开字符串以便将其与`$_GET`变量连接起来。

```
mysqli_query($db,"INSERT INTO jliu VALUES(null,".$_GET['title'].",".$_GET['fname'].",".$_GET['lname'].",".$_GET['description'].")"); 
```

但实际上，您应该查看[准备好的语句](http://php.net/manual/en/mysqli.prepare.php)以避免上面的 SQL 注入安全漏洞。

使用准备好的语句，您可以将`$_GET`变量绑定到查询中的参数。

```
$stmt = mysqli_prepare($db,"INSERT INTO jliu VALUES(null, ?, ?, ?, ?");

mysqli_stmt_bind_param($stmt, "s", $_GET['title']); 
...
// and the same for the others 
```

链接的手册页中有更多关于如何执行准备好的语句并返回结果的详细信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T09:44:00.287

您的*实际*问题，将数组的索引值插入字符串可以通过两种方式解决（如果您计算 heredoc、sprintf 和诸如此类的更多）：

使用花括号：

```
"INSERT INTO jliu VALUE(null, {$_GET['title']}, {$_GET['fname']}, {$_GET['lname']}, {$_GET['description']})" 
```

使用串联：

```
"INSERT INTO jliu VALUE(null, " . $_GET['title'] . ", " . $_GET['fname'] . ", " . $_GET['lname'] . ", " . $_GET['description'] . ")" 
```

* * *

但是，最重要的问题是您**不应该这样做**。使用您的代码，您很容易受到 SQL 注入漏洞的影响。

使用[准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)，并在其中插入您的值。这会创建一个更安全（并且性能略高）的查询，因为您只是绑定*values*，而不是更改实际查询本身。代码示例：

```
if ($stmt = $mysqli->prepare("INSERT INTO jliu VALUES (NULL, ?, ?, ?, ?)")) {
    $stmt->bind_param("ssss", $_GET['title'], $_GET['fname'], $_GET['lname'], $_GET['description']);

    $stmt->execute();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T09:38:29.817

您必须使用准备好的语句并用占位符替换变量。

[http://php.net/manual/de/mysqli.prepare.php](http://php.net/manual/de/mysqli.prepare.php)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-26T09:40:14.113

尝试这个..

```
 $title = mysqli_real_escape_string($_GET['title']);
    $fname = mysqli_real_escape_string($_GET['fname']);
    $lname = mysqli_real_escape_string($_GET['lname']);
    $description = mysqli_real_escape_string($_GET['description']);
    $stmt = mysqli_prepare($db,"INSERT INTO jliu VALUES(null,'".$title."','".$fname."','".$lname."','".$description."'");
    mysqli_stmt_execute($stmt); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-26T10:20:42.853

应该是这样的。

```
$query = sprintf("INSERT INTO jliu VALUE(null,%s,%s,%s,%s)",$_GET['title'],$_GET['fname'],$_GET['lname'],$_GET['description']);
mysqli_query($db,$query); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-03-26T09:42:13.703

回答你的问题：

您可以执行以下操作。其实就是把数组item的一个变量放到一个字符串中，而不仅仅是for `$_GET`。任何数组都可以这样访问：

```
$str = "some text {$_GET['title']}" 
```

或使用对象时的类似方法：

```
$str = "some text {$obj->test}" 
```

但是，当您使用 sql 查询时，这是个坏主意。您应该使用一些函数来清除您的输入，以防止 sql 注入。

最先进的方法是使用[mysqli_real_escape_string](http://php.net/manual/en/mysqli.real-escape-string.php)：

```
$str = "some text " . mysqli_real_escape_string($_GET['title'])." ..."; 
```

或者您可以使用更灵活的[准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)

# php - php + mysql + 谷歌地图

> ID：15633604
> 
> 赞同：-1
> 
> 时间：2013-03-26T09:35:30.160
> 
> 标签：php, javascript, mysql, google-maps-api-3

我正在使用谷歌地图创建一个动态谷歌地图，该地图使用 php mysql 获取存储在数据库中的位置（纬度，经度），并通过地图上的标记显示选定的位置，但问题是我的地图显示为蓝色如果有人可以帮助我，我将不胜感激

# 地图.php

```
<?php
$conn = mysql_connect("localhost", "****", "*****") or die(mysql_error());
mysql_select_db("map") or die(mysql_error());
?>

    <html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
        <title>Google Maps</title>
        <style type="text/css">
            body { font: normal 10pt Helvetica, Arial; }
            #map { width: 350px; height: 300px; border: 0px; padding: 0px; }
        </style>
        <script src="http://maps.google.com/maps/api/js?key=mykey&sensor=false" type="text/javascript"></script>
        <script type="text/javascript">
            //Sample code written by August Li
            var icon = new google.maps.MarkerImage("http://maps.google.com/mapfiles/ms/micons/blue.png",
                       new google.maps.Size(32, 32), new google.maps.Point(0, 0),
                       new google.maps.Point(16, 32));
            var center = null;
            var map = null;
            var currentPopup;
            var bounds = new google.maps.LatLngBounds();
            function addMarker(lat, lng, info) {
                var pt = new google.maps.LatLng(lat, lng);
                bounds.extend(pt);
                var marker = new google.maps.Marker({
                    position: pt,
                    icon: icon,
                    map: map
                });
                var popup = new google.maps.InfoWindow({
                    content: info,
                    maxWidth: 300
                });
                google.maps.event.addListener(marker, "click", function() {
                    if (currentPopup != null) {
                        currentPopup.close();
                        currentPopup = null;
                    }
                    popup.open(map, marker);
                    currentPopup = popup;
                });
                google.maps.event.addListener(popup, "closeclick", function() {
                    map.panTo(center);
                    currentPopup = null;
                });
            }           
            function initMap() {
                map = new google.maps.Map(document.getElementById("map"), {
                    center: new google.maps.LatLng(0, 0),
                    zoom: 14,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    mapTypeControl: true,
                    mapTypeControlOptions: {
                        style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR
                    },
                    navigationControl: true,
                    navigationControlOptions: {
                        style: google.maps.NavigationControlStyle.ZOOM_PAN
                    }
                });
<?php
$query = mysql_query("SELECT * FROM poi_example")or die(mysql_error());
while($row = mysql_fetch_array($query))
{
  $name = $row['name'];
  $lat = $row['lat'];
  $lon = $row['lon'];
  $desc = $row['desc'];

  echo("addmarker($lat, $lon, '<b>$name</b><br />$desc');\n");

}

?>
 center = bounds.getCenter();
     map.fitBounds(bounds);

     }
     </script>
     </head>
     <body onload="initMap()" style="margin:0px; border:0px; padding:0px;">
     <div id="map"></div>
     </body>
     </html> 
```

# 数据库是

```
CREATE TABLE IF NOT EXISTS `poi_example` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` text NOT NULL,
  `desc` text NOT NULL,
  `lat` text NOT NULL,
  `lon` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=7 ;

--
-- Dumping data for table `poi_example`
--

INSERT INTO `poi_example` (`id`, `name`, `desc`, `lat`, `lon`) VALUES
(1, '100 Club', 'Oxford Street, London  W1&lt;br/&gt;3 Nov 2010 : Buster Shuffle&lt;br/&gt;', '51.514980', '-0.144328'),
(2, '93 Feet East', '150 Brick Lane, London  E1 6RU&lt;br/&gt;7 Dec 2010 : Jenny &amp; Johnny&lt;br/&gt;', '51.521710', '-0.071737'),
(3, 'Adelphi Theatre', 'The Strand, London  WC2E 7NA&lt;br/&gt;11 Oct 2010 : Love Never Dies', '51.511010', '-0.120140'),
(4, 'Albany, The', '240 Gt. Portland Street, London  W1W 5QU', '51.521620', '-0.143394'),
(5, 'Aldwych Theatre', 'Aldwych, London  WC2B 4DF&lt;br/&gt;11 Oct 2010 : Dirty Dancing', '51.513170', '-0.117503'),
(6, 'Alexandra Palace', 'Wood Green, London  N22&lt;br/&gt;30 Oct 2010 : Lynx All-Nighter', '51.596490', '-0.109514'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T09:36:45.927

应该是这样的（抱歉缩进）：

```
<?php
$conn = mysql_connect("localhost:4040", "xxxx", "xxxx") or die(mysql_error());
mysql_select_db("test") or die(mysql_error());
?>

    <html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
        <title>Google Maps</title>
        <style type="text/css">
            body { font: normal 10pt Helvetica, Arial; }
            #map { width: 350px; height: 300px; border: 0px; padding: 0px; }
        </style>
        <script src="http://maps.google.com/maps/api/js?key=xxxxxxxxxxxxxxx&sensor=false" type="text/javascript"></script>
        <script type="text/javascript">
            //Sample code written by August Li
            var icon = new google.maps.MarkerImage("http://maps.google.com/mapfiles/ms/micons/blue.png",
                       new google.maps.Size(32, 32), new google.maps.Point(0, 0),
                       new google.maps.Point(16, 32));
            var center = null;
            var map = null;
            var currentPopup;
            var bounds = new google.maps.LatLngBounds();
            function addMarker(lat, lng, info) {
                var pt = new google.maps.LatLng(lat, lng);
                bounds.extend(pt);
                var marker = new google.maps.Marker({
                    position: pt,
                    icon: icon,
                    map: map
                });
                var popup = new google.maps.InfoWindow({
                    content: info,
                    maxWidth: 300
                });
                google.maps.event.addListener(marker, "click", function() {
                    if (currentPopup != null) {
                        currentPopup.close();
                        currentPopup = null;
                    }
                    popup.open(map, marker);
                    currentPopup = popup;
                });
                google.maps.event.addListener(popup, "closeclick", function() {
                    map.panTo(center);
                    currentPopup = null;
                });
            }           
            function initMap() {
                map = new google.maps.Map(document.getElementById("map"), {
                    center: new google.maps.LatLng(0, 0),
                    zoom: 14,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    mapTypeControl: true,
                    mapTypeControlOptions: {
                        style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR
                    },
                    navigationControl: true,
                    navigationControlOptions: {
                        style: google.maps.NavigationControlStyle.ZOOM_PAN
                    }
                });
<?php
$query = mysql_query("SELECT * FROM poi_example")or die(mysql_error());
while($row = mysql_fetch_array($query))
{
  $name = $row['name'];
  $lat = $row['lat'];
  $lon = $row['lon'];
  $desc = $row['desc'];

  echo("addMarker($lat, $lon, '<b>$name</b><br />$desc');\n");

}

?>
 center = bounds.getCenter();
     map.fitBounds(bounds);

     }
     </script>
     </head>
     <body onload="initMap()" style="margin:0px; border:0px; padding:0px;">
     <div id="map"></div>
     </body>
     </html> 
```

问题是：函数定义中调用 va addMarker 中的 addmarker（JS 区分大小写）

# java - 如何在带有客户端 Java 的 https Apache 服务器中使用证书

> ID：15633605
> 
> 赞同：0
> 
> 时间：2013-03-26T09:35:38.247
> 
> 标签：java, apache, https, ssl-certificate

我正在使用 Apache 服务器提供对该服务器中某些文件的 https 访问。客户端使用 Java 程序通过代理访问这些文件。

在我的 apache 配置中：

```
SSLCertificateFile /etc/apache2/ssl/apache.pem 
```

文件结构`apache.pem`：

```
-----BEGIN RSA PRIVATE KEY-----
-----END RSA PRIVATE KEY-----
-----BEGIN CERTIFICATE-----

-----END CERTIFICATE----- 
```

客户端代码为：

```
public static void main(String[] args) throws IOException {

    URL website = new URL("https://mywebsite.com/file.zip");
    ReadableByteChannel rbc = Channels.newChannel(website.openStream());
    FileOutputStream fos = new FileOutputStream("test.zip");
    fos.getChannel().transferFrom(rbc, 0, 1 << 24);
} 
```

错误是

```
Exception in thread "main" javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No name matching website.com found
at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)
at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1697)
at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:257)
at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:251)
at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1165)
at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:154)
at sun.security.ssl.Handshaker.processLoop(Handshaker.java:609)
at sun.security.ssl.Handshaker.process_record(Handshaker.java:545)
at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:945)
at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1190)
at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1217)
at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1201)
at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:440)
at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1139)
at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254)
at java.net.URL.openStream(URL.java:1031)
at HelloWorld.main(HelloWorld.java:38) 
```

我需要做什么才能让 Java 理解我的证书？我是否需要使用 apache 工具或 java keytool 重新生成证书？谢谢

# apache - Apache .htaccess RewriteCond 排除维护文件和 zend 后台

> ID：15633609
> 
> 赞同：0
> 
> 时间：2013-03-26T09:35:54.217
> 
> 标签：apache, .htaccess, zend-framework, mod-rewrite

在大数据导入期间，我必须对网站进行维护。导入是在后台完成的，所以我需要把前台放在维护中，而不是后台

在我的 .htaccess 中有它适用于所有人，但我需要排除所有以 /admin(.*) 开头的网址：

```
# Maintenance things
RewriteCond %{REQUEST_FILENAME} !/maintenance.php$
RewriteRule $ /maintenance.php [R=302,L]

# Standard zend framework rewrite rules :
RewriteRule .* - [env=not_alias:true]
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d [OR]
RewriteCond %{ENV:not_alias} !=true
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

我为第一个 RewriteCond 尝试了不同的东西，这些东西不像论文那样工作：

```
RewriteCond %{REQUEST_URI} !^/(admin(.*)|maintenance.php) 
```

或者那个 ：

```
RewriteCond %{REQUEST_FILENAME} !/maintenance.php$
RewriteCond %{REQUEST_URI} !/admin(.*)$ 
```

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:08:45.607

我确信可以使用 .htaccess 来完成，但是您可以尝试使用控制器插件的另一个选项。您可以将您的逻辑放在 dispatchLoopStartup() 钩子中，如果它是对前台的请求，则将用户重定向到 maintenance.php 否则什么也不做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:32:07.353

不需要 RewriteCond 只是一个好的 RewriteRule ：

```
# Maintenance things
RewriteRule !^(admin(.*)|index.php|maintenance.php)$ /maintenance.php [R=302,L]

# Standard zend framework rewrite rules :
RewriteRule .* - [env=not_alias:true]
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d [OR]
RewriteCond %{ENV:not_alias} !=true
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

# d3.js - 带有 json 数据源的简单 cubism.js

> ID：15633612
> 
> 赞同：1
> 
> 时间：2013-03-26T09:36:00.370
> 
> 标签：d3.js, cubism.js

我正在寻找一种在 cubism.js 中使用 json 数据源的方法，这是我的代码：

```
<script>
var context = cubism.context()
    .serverDelay(0)
    .clientDelay(0)
    .step(1e3)
    .size(960);

var dataset = [ [-1, -3], [2, 4], [3, -4], [-3, 1]];
//var foo = random("foo");
var foo = context.metric(function(start, stop, step, callback) {
  d3.json(dataset, function(data) {
    if (!data) return callback(new Error("unable to load data"));
    callback(null, data);
  });
});
var bar = random("bar");

d3.select("#kpi2").call(function(div) {

  div.append("div")
      .attr("class", "axis")
      .call(context.axis().orient("top"));

  div.selectAll(".horizon")
      .data([foo])
    .enter().append("div")
      .attr("class", "horizon")
      .call(context.horizon().extent([-20, 20]));

  div.append("div")
      .attr("class", "rule")
      .call(context.rule());

});

context.on("focus", function(i) {
  d3.selectAll(".value").style("right", i == null ? null : context.size() - i + "px");
});

</script> 
```

我听说过使用 context.metric，但我不知道如何使用，因为我是这个领域的新手。谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2016-01-31T09:26:18.637

```
 function stock(name) { 
    return context.metric(function(start, stop, step, callback) {
        d3.json("/data" + name + ".json", function(rows) {
            var compare = rows[0][1], value = rows[0][1], values = [value];

            // Creates an array of the price differences throughout the day
            rows.forEach(function(d) {
                values.push(value = (d[1] - compare) / compare);
            }); 
        callback(null, values); }); 
    }, name); 
} 
```

您可以查看此示例以获取更多详细信息：[http ://www.kshitijaranke.com/author/](http://www.kshitijaranke.com/author/)

或者

[我们可以在立体主义上使用自定义 JSON 数据吗？](https://stackoverflow.com/questions/10747433/can-we-use-custom-json-data-on-cubism)

它应该让你在如何做到这一点上有一个良好的开端。

# python - Clojure 中的部分参数和命名参数

> ID：15633614
> 
> 赞同：0
> 
> 时间：2013-03-26T09:36:03.030
> 
> 标签：python, clojure, functional-programming, partial, higher-order-functions

我是一名刚刚学习 Clojure 的 Python 程序员。在 Python 中，我喜欢如何在调用 functools.partial 时使用命名参数：

```
def pow(base, exponent):
    return base ** exponent

exp = partial(pow, 2.71828)           # exp(2) --> 7.3886
square = partial(pow, exponent=2)     # square(2) --> 4 
```

is的实现`exp`在 Clojure 中显然是等价的——但我也可以用来简洁地`partial`定义吗？`square`有没有办法将关键字/命名参数传递给部分，以便预先确定特定的参数？或者这是否必须通过`partial`函数文字而不是函数文字来处理，例如`#(pow % 2)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:12:50.877

对于现有函数，您将需要使用函数文字，因为它们不使用基于关键字的参数并使用位置参数。

对于您自己的功能，您可以执行类似的操作：

```
(defn my-pow [& {:keys [base exponent]}]
  (Math/pow base exponent))

(def exp (partial my-pow :base 2.71828))
(exp :exponent 2)
(def square (partial my-pow :exponent 2))
(square :base 2) 
```

# wpf - WPF 数据绑定样式

> ID：15633615
> 
> 赞同：0
> 
> 时间：2013-03-26T09:36:09.350
> 
> 标签：wpf, xaml, data-binding, styles

这是我的风格 .xaml：

```
<Style TargetType="TabItem" x:Key="gMetroTabItem">
    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
    <Setter Property="IsTabStop" Value="False" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="Padding" Value="6,2,6,2" />
    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
    <Setter Property="VerticalContentAlignment" Value="Stretch" />
    <Setter Property="MinWidth" Value="5" />
    <Setter Property="MinHeight" Value="5" />

    <Setter Property="HeaderTemplate">
        <Setter.Value>
            <DataTemplate DataType="{x:Type local:TabItemHeaderData}">
                <StackPanel>
                    <TextBlock x:Name="rootText" Text="{Binding tabText}" FontSize="26.67"/>
                </StackPanel>
            </DataTemplate>
        </Setter.Value>
    </Setter>

</Style> 
```

这是我的 TabItemHeaderData：

```
public class TabItemHeaderData
{
    public String tabText { get; set; }
    public object Content { get; set; }
    public object tabIconOff { get; set; }
    public object tabIconOn { get; set; }
} 
```

我的问题是：样式的代码似乎正确，我将属性 tabText 绑定到文本，但是如何从我的窗口代码发送 TabItemHeaderData？实际上是这样的：

```
<TabItem Style="{StaticResource gMetroTabItem}">
  <Grid>
  ...
  </Grid>
</TabItem> 
```

# jquery-mobile - jQuery mobile 何时读取哈希？

> ID：15633621
> 
> 赞同：0
> 
> 时间：2013-03-26T09:36:18.737
> 
> 标签：jquery-mobile, jquery

如果您有一个带有哈希的 URL，例如：

> www.my_jqm_site.com/#some_page_request

...在 jqm 页面事件序列期间的什么时候 jqm 读取哈希？

```
Event sequence when navigating from jqm_page_A to jqm_page_B ... thanks Muhammed Basil.

  - document --- script time (js is readable, but DOM is not ready yet)
  - document --- ready
  - page B   --- pagebeforecreate
  - page B   --- pagecreate
  - page B   --- pageinit
  - page A   --- pagebeforehide
  - page B   --- pagebeforeshow
  - page A   --- pageremove
  - page A   --- pagehide
  - page B   --- pageshow
  - body     --- onLoad 
```

* * *

**编辑**：如果我在脚本时更改哈希：

```
<script>
  window.location.hash = "#some_other_page_request" 
</script> 
```

它将覆盖传入的哈希“#some_page_request”，因此 jqm 将导航到*反而。*

 *这表明 jqm 在脚本时或之后读取哈希（即在 $(document).ready(...) 时或之后）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:44:26.933

在**pagebeforehide**事件期间。

这是在将舞会页面 A 转换到页面 B 期间要分派的第一个元素。

> 描述：在实际的过渡动画开始之前，在我们正在过渡的“fromPage”上触发。

这是接收数据对象作为其第二个参数的第一页。这个数据对象的对象包含我们要转换到的页面 DOM 元素。

官方文档：[http ://api.jquerymobile.com/pagebeforehide/](http://api.jquerymobile.com/pagebeforehide/)

在它之前的所有事件都是页面创建常见的事件，它们也会在初始应用加载期间触发，当第一页即将显示时：

```
- page B   ---pagebeforecreate
- page B   ---pagecreate
- page B   ---pageinit 
```

在这 3 个事件期间，系统不知道这是应用程序加载还是页面转换。他们来这里只是为了创建一个新页面。*

# redis - 如何在 Redis 2.6.11 中使用 UNSUBSCRIBE 命令

> ID：15633634
> 
> 赞同：2
> 
> 时间：2013-03-26T09:36:46.003
> 
> 标签：redis

向特定频道发布消息。

```
redis 127.0.0.1:6379> PUBLISH channel message
(integer) 0 
```

我使用另一个 Redis 客户端订阅了频道。

```
redis 127.0.0.1:6379> SUBSCRIBE channel
Reading messages... (press Ctrl-C to quit)
1) "subscribe"
2) "channel"
3) (integer) 1 
```

在 Redis 客户端中，我收到了所有已发布的消息。现在我想退订订阅的频道。但我无法在 Redis 客户端中输入取消订阅。当我使用 Ctrl+c 完整的 Redis 客户端退出。Redis Client 中如何编写取消订阅命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T08:21:17.443

我认为您不能在客户端中取消订阅，因为客户端被阻止了。我写了一个 ruby​​ 脚本来展示如何使用取消订阅。

```
require 'redis'
r = Redis.new
r.subscribe 'first' do |on|
  on.message do |e, d|
    puts e
    puts d
    r.unsubscribe
  end
end
puts "script was blocked?" 
```

如果您删除 r.unsubscribe，该脚本将被阻止。您可以添加 if 子句来检查何时取消订阅 client.ex：

```
r.unsubscribe if d == 'leave' 
```

# facebook-graph-api - Facebook Graph API 获取墙帖的方形图片

> ID：15633641
> 
> 赞同：1
> 
> 时间：2013-03-26T09:37:01.753
> 
> 标签：facebook-graph-api

从this [question](https://stackoverflow.com/questions/11900780/graph-api-get-photo-square-100x100)，我知道我们可以通过在Graph API URL中附加来获取方形的用户头像`?type=square`，例如：

> [https://graph.facebook.com/](https://graph.facebook.com/) {FACEBOOK_USER_ID}/picture?type=square

但是墙上的图片怎么样？我知道我可以通过这个 Graph API 调用获取图片 URL（不同维度的）：

> [https://graph.facebook.com/](https://graph.facebook.com/) {OBJECT_ID}/

但是，类型参数不支持`square`. 它支持`thumbail`，`normal`而且`album`只有。但是它们都没有返回时间线中显示的方形图像。（我还需要重新定位信息，因为我在时间轴中使用了“重新定位照片”）。Graph API 是否提供此类信息？

*注意：我使用 PHP ，但我认为编程语言是独立的*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:39:44.083

不，Graph API 不提供有关照片如何在时间轴或新闻源上重新定位的数据。

在 API 的上下文中，“Square”并不是指任何尺寸相同的照片。而是指在帖子旁边用作用户头像的图像。因此，鉴于此逻辑，常规照片对象不会包含“方形”实现，因为该照片永远不会用作头像。如果您想要每边尺寸相同的图像，则必须自己实现。

# asp.net - 登录后获取用户名

> ID：15633645
> 
> 赞同：0
> 
> 时间：2013-03-26T09:37:13.883
> 
> 标签：asp.net, asp.net-membership

我想在登录后获取用户名，但它不起作用。

```
public partial class Login : System.Web.UI.Page
    {
        string strUser;

        protected void Login1_LoggedIn(object sender, EventArgs e)
        {
            strUser = Membership.GetUser().UserName;

            Response.Redirect("Home");
        }
        protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
        {
            strUser = Membership.GetUser().UserName;
            Response.Redirect("Home");
        }
    } 
```

这是我的错误： ![在此处输入图像描述](../Images/6092c7bdcaf300b42581ae8e682d4e70.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:07:49.963

`Membership.GetUser().UserName`为 null，因为新的主体对象尚未附加到当前的 HttpContext 对象。

因此，您需要使用控件中的用户名显式检索该最近登录的用户`Login`。

**更新：归功于 jadarnel27**

```
protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
{
  // Get the username from login control and retrieves the user info explicitly
  Membership user = Membership.GetUser(Login1.Username); 
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:06:27.517

您需要检查并确保用户登录成功。看起来您只是在使用标准的 ASP.NET 成员资格，所以这应该可以工作：

```
protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
{
    if(e.Authenticated)
    {
        strUser = Membership.GetUser().UserName;
        Response.Redirect("Home");
    }
    else
    {
        strUser = "Login Failed!";
    }
} 
```

自从我使用这些控件已经有一段时间了，但您可能需要先确定`e.Authenticated`自己的价值并进行设置。如果是这样，你需要把它放在我上面写的 if-block 之前：

```
bool authenticated = Membership.ValidateUser(Login1.UserName, Login1.Password);
e.Authenticated = authenticated; 
```

我认为普通的 ASP.NET 成员可以为您处理这部分；如果您使用的是自定义身份验证方案，则肯定需要执行该步骤。

# javascript - 检测任何和所有版本的 Internet Explorer

> ID：15633647
> 
> 赞同：3
> 
> 时间：2013-03-26T09:37:16.040
> 
> 标签：javascript, html, internet-explorer, internet-explorer-10, conditional-comments

通过在 HTML 中使用这种技术，曾经有一种很好的方法来判断 Web 浏览器是否为 IE：

```
<!--[if IE]>
Non-IE browsers ignore this
<![endif]--> 
```

或者

```
<!--[if !IE]-->
IE ignores this
<!--[endif]--> 
```

但这在 IE 10[中不再起作用。](http://blogs.msdn.com/b/ie/archive/2011/07/06/html5-parsing-in-ie10.aspx?Redirected=true)

知道用什么来告诉 IE 与其他 Web 浏览器（使用 HTML 或 JavaScript）吗？

PS。我需要能够从非 IE 网络浏览器中分辨出**任何版本的 IE。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T06:52:08.430

我感谢您的所有见解，但没有一个回答我的实际问题。同样，我不是在问*特征检测*。我只需要知道网络浏览器是否是 IE。以下使用 JavaScript 并且似乎适用于所有当前版本的 IE（包括 IE10）：

```
<![if IE]>
<script type='text/javascript'>
if(/*@cc_on!@*/false)
var bIsIE = 1;
</script>
<![endif]> 
```

然后检查它是否是 IE，从 JavaScript 执行此操作：

```
if (typeof (bIsIE) != 'undefined')
{
    //The web browser is IE
}
else
{
    //The web browser is not IE
} 
```

显然，上面的代码假定 Web 浏览器启用了 JavaScript。但在我的情况下，浏览器检测仅在启用脚本时才相关。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T18:19:40.363

Internet Explorer 的每个版本都与其他版本不同，就像 Chrome、Firefox 和 Opera 的每个版本都与它们的前辈不同一样。当您开发网站时，您不会针对诸如“Microsoft”、“Google”或“Mozilla”之类的供应商——您针对的是功能。

而不是问“*我想使用 ::after，这个浏览器是微软浏览器吗？* ”你应该问“*这个浏览器是否支持 :: 前缀上的伪元素？* ”这是特征检测，它几乎总是完美地瞄准目标。与其猜测浏览器的供应商能做什么，不如通过它实际能做什么来确定它能做什么。

这可能不是您要寻找的答案，但它仍然是正确的答案。如果您询问如何识别所有 Microsoft 浏览器，则说明您正在错误地处理*问题*（或您认为是问题的内容）。

对于适当的解决方案，我鼓励您使用[jQuery](http://jquery.com/)和[Modernizr](http://modernizr.com)等工具。这些将处理 API 规范化、旧浏览器中新元素的填充以及特征检测。这是做事的*正确方法，如果开发人员从一开始就采用这种方法，那么您今天可能不会对 Internet Explorer 如此反感。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T10:11:45.387

您在问题中提供的链接- [不再起作用](http://blogs.msdn.com/b/ie/archive/2011/07/06/html5-parsing-in-ie10.aspx?Redirected=true)-指向 Windows Internet Explorer 工程团队博客的链接导致以下声明

> 有条件的评论
> 
> ```
> <!--[if IE]>
> 
> This content is ignored in IE10 and other browsers.
> 
> In older versions of IE it renders as part of the page.
> 
> <![endif]--> 
> ```
> 
> 这意味着条件注释仍然可以使用，但只会针对旧版本的 IE。如果您需要区分较新的浏览器，请改用[特征检测](http://blogs.msdn.com/b/ie/archive/2010/04/14/same-markup-writing-cross-browser-code.aspx)。

在我看来，IE 团队正在大力推动使用特征检测而不是浏览器检测，正如上面特征检测链接中的引述所示。

> **相同的标记：核心准则**
> 
> ```
> **DO**
>     Feature Detection
>     Test whether a browser supports a feature before using it.
>     Behavior Detection
>     Test for known issues before applying a workaround. 
> **DON'T**
>     Detect Specific Browsers
>     Also known as browser detection. Don't use the identity of a browser (e.g. navigator.userAgent) to alter page behavior.
>     Assume Unrelated Features
>     Don't perform feature detection for one feature, and then proceed to use a different feature. 
> ```

因此，Windows Internet Explorer 工程团队似乎正在设置 IE，因此您将无法对 IE10 及更高版本使用浏览器检测。

编辑我不使用 IE10 但确实

```
navigator.appName=='Microsoft Internet Explorer'; 
```

在 IE10 中工作？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T16:47:27.183

仅仅说 IE10 足够好而忽略这个问题是不够的。这真的取决于你想要做什么。对于大多数目的，特征检测可能会处理您需要的内容。更复杂的方法是通过从 HTTP 请求标头中拉入用户代理字符串来启动用户代理检测。如果你对此不小心，你很快就会出错。

要在浏览器 JS 控制台中查看当前的用户代理字符串：

```
console.log(navigator.userAgent); 
```

以下是各种浏览器中报告的用户代理字符串列表：

[http://www.zytrax.com/tech/web/browser_ids.htm](http://www.zytrax.com/tech/web/browser_ids.htm)

请注意，所有 MS Explorer 代理字符串都将包含“MSIE”，但首先您必须清除像 Opera 这样在某些情况下也会包含“MSIE”字符串的浏览器。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-07-20T10:42:44.407

`true`如果客户端浏览器是**Internet Explorer （在****9-10-11**版本上测试），则此函数返回。

```
function isIE(v) {
    var ie;
    ie = RegExp('msie' + (!isNaN(v)?('\\s'+v):''), 'i').test(navigator.userAgent);
    if (!ie) { ie = !!navigator.userAgent.match(/Trident.*rv[ :]*11\./) }
    return ie;
}

// Example
var ie = isIE();
var ie9 = isIE(9);
var ie10 = isIE(10); 
```

注意：该功能不完整，不允许`isIE(11)`

# c# - 永远不会被调用的 if 语句

> ID：15633650
> 
> 赞同：1
> 
> 时间：2013-03-26T09:37:20.973
> 
> 标签：c#, html-agility-pack

我有这段代码

```
Category featured = new Category()
            {
                active = true,
                Categories = new Category[0],
                description = "",
                identifier = "featured",
                name = "Featured",
                Products = new Product[0],
                url = siteUrl,
            };
StatisticCounters.CategoriesCounter(); 
```

然后在下面我有这个代码。

```
private IList<Category> FeatureSubCategories(HtmlNode std, Category category,Category featured)
{
    List<Category> categories = new List<Category>();
    {
        if (category.name == "Featured")
        {
            var nodes = std.SelectNodes("//span[contains(@class,'widget')] [position() <= 4]"); //TODO

            foreach (var node in nodes)
            {
                string name = SiteParserUtilities.ParserUtilities.CleanText(System.Net.WebUtility.HtmlDecode(node.InnerText));
                string url = node.Attributes["href"].Value;
                string identifier = url.Split('/').Last().Replace(".html", "");
                WriteQueue.write(string.Format(" Category [{0}].. {1} ", name, url));

                IList<Category> sub = GetSubCategories(std);
                Category c = new Category()
                {
                    active = true,
                    Categories = sub.ToArray(),
                    description = "",
                    identifier = identifier,
                    name = name,
                    Products = new Product[0],
                    url = url,
                };
                StatisticCounters.CategoriesCounter();
                categories.Add(c);
            }
        }
    }
    return categories;
} 
```

由于某种原因，当我运行代码时，`if (category.name == "Featured")`从未调用过 if 语句，我不确定这是为什么。开始解析 xpath 并将它们的链接存储到一个数组中。感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-26T09:47:39.150

最好检查调试器。有时空白会导致问题。这是许多程序员犯的简单错误。当我们从数据库中获取数据时，可能会有一些前导空格。当我们与某个值进行比较时（认为没有前导空格），如果不修剪那些空格，它将不会进行比较。例如

```
string s1 = "TEST"; 
string s2 = " TEST"; 
if (s1 == s2) { 
    Console.WriteLine("Equal"); 
} 
```

请使用修剪功能删除任何空格并进行比较。

# mysql - Mysql DATE_SUB(NOW(), INTERVAL 1 DAY) 24 小时还是工作日？

> ID：15633653
> 
> 赞同：19
> 
> 时间：2013-03-26T09:37:31.670
> 
> 标签：mysql, date, sql-date-functions

我正在尝试获取每天的注册用户总数。目前我正在使用这个：

```
$sql = "SELECT name, email FROM users WHERE DATE_SUB(NOW(), INTERVAL 1 DAY) < lastModified" 
```

但我不确定这是否每天或每 24 小时有效？

例如，不应退回 22 小时前注册的用户。我只想要今天的用户（=星期二）。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-26T10:06:01.127

lastModified 大概是一个日期时间。要将其转换为日期，您只需将其包装在 DATE() 中即可`DATE(lastModified)`。`DATE()`返回日期时间值的日期部分，该值在当天实际上是 00:00。

```
SELECT
    name,
    email
FROM users
WHERE DATE(lastModified) = DATE( DATE_SUB( NOW() , INTERVAL 1 DAY ) ) 
```

使用它来匹配`WHERE`虽然效率低下，因为所有行都需要将 DATE 应用于它们，因此它可能会扫描整个表。`lastModified`与您正在寻找的上限和下限进行比较会更有效，在这种情况下 >= 00:00 on`SUBDATE(NOW(),INTERVAL 1 DAY)`和 < 00:00 on`NOW()`

因此，您可以使用 BETWEEN 进行选择，给出以下内容。

```
SELECT
    name,
    email
FROM users
WHERE lastModified 
    BETWEEN DATE( DATE_SUB( NOW() , INTERVAL 1 DAY ) )
    AND DATE ( NOW() ) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-01T20:25:31.933

我想你需要

```
SELECT
    name,
    email
FROM users
WHERE DATE(lastModified) = DATE( NOW() ) 
```

这有效地“仅四舍五入到日期”，因此只会匹配“自午夜以来”的记录。

# c# - System.Windows.Controls.WebBrowser 导航到磁盘上的 html 文件

> ID：15633654
> 
> 赞同：0
> 
> 时间：2013-03-26T09:37:35.830
> 
> 标签：c#, .net, visual-studio, visual-studio-lightswitch

我觉得真的很愚蠢，但我无法弄清楚这一点。

这完美无瑕；

```
((System.Windows.Controls.WebBrowser)e.Control).Navigate(new Uri("http://www.google.com")); 
```

但是当我尝试导航到磁盘上的文件时它失败了

```
string path =@"D:\dev\MySite.html";

((System.Windows.Controls.WebBrowser)e.Control).Navigate(new Uri(path)); 
```

我想我不能使用 Uri 但我还应该使用什么来导航到磁盘上的文件？

完整代码；

```
 private void webControlAvailable(object sender, ControlAvailableEventArgs e)
    {

         string path =@"D:\dev\MySite.html";

        ((System.Windows.Controls.WebBrowser)e.Control).Navigate(new Uri(path));

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:41:08.053

使用`System.Windows.Controls.WebBrowser`导航到本地文件是一项相当困难的任务。不过，你可以试试这个：

```
string path =@"file://127.0.0.1/D$/dev/MySite.html";
((System.Windows.Controls.WebBrowser)e.Control).Navigate(new Uri(path)); 
```

如果你有`JavaScript`一个你的网站，它可能会有点难看并且失败。

您还可以使用 a`System.IO.Stream`进行导航，使用`WebBrwoser.NavigateToStream()`，请参阅SO 上的[此](https://stackoverflow.com/questions/11560639/how-to-load-local-html-pages-in-webbrowser-control-in-c-sharp)线程和[官方](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.navigatetostream.aspx)文档。

# operating-system - 使用 TDD/BDD 开发操作系统

> ID：15633662
> 
> 赞同：1
> 
> 时间：2013-03-26T09:38:02.663
> 
> 标签：operating-system, tdd, bdd

我只是好奇。世界上有没有人使用 TDD 或 BDD 编写操作系统？这甚至可能吗？我试图用谷歌搜索它，但没有找到任何类型的信息。所以，伙计们。是否可以使用 TDD 构建整个操作系统？和 BDD？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:52:44.357

大多数操作系统开发和大部分代码都可以使用 TDD。由于低级代码的可测试性有限，尤其是 CPU/硬件特定的代码，在某些时间/地点可能会变得棘手。这些部分可能会收到较少的直接测试覆盖率（如果可以的话），或者可以在虚拟机或 CPU/PC 模拟器中进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:56:18.547

这绝对是可能的。我不知道有谁在做这件事。

作为一个证明点，我会指出人们正在使用带有 Chef 的测试驱动基础设施以及那里的单元和行为测试。有关详细信息，请参阅[TestKitchen](https://github.com/opscode/test-kitchen) for Chef。

# android - 如何在android中解析wadl web服务？

> ID：15633664
> 
> 赞同：1
> 
> 时间：2013-03-26T09:38:10.330
> 
> 标签：android, web-services, wadl

我是 android 新手，对解析知之甚少，所以我来这里寻求帮助。我有一个 .wadl 网络服务，它是 Restful api，但我不知道如何在 android 中解析网络服务。

我附上了我的网络服务代码，请帮助我如何在 android 中解析这样的网络服务。

先感谢您

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://api.123paymix.com/gateway" attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="http://api.123paymix.com/gateway">
<xs:simpleType name="SortType">
<xs:restriction base="xs:string">
<xs:enumeration value="ASC"/>
<xs:enumeration value="DESC"/>
  </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="PaymentStatus">
    <xs:restriction base="xs:string">
    <xs:enumeration value="All"/>
    <xs:enumeration value="Pending"/>
    <xs:enumeration value="Posted"/>
    <xs:enumeration value="Settled"/>

</xs:restriction>
</xs:simpleType>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:16:44.567

请参阅以下链接。

[https://stackoverflow.com/a/14563386/1835764](https://stackoverflow.com/a/14563386/1835764)

我认为它会给你一些想法来解析网络服务的价值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:02:08.703

我不太了解它是如何工作的，因为从未使用过它，但可能[https://code.google.com/p/ksoap2-android/](https://code.google.com/p/ksoap2-android/)会有所帮助。它是一个名为 ksoap 的 android 肥皂库

# c# - 在数据表中获取不同的日期

> ID：15633665
> 
> 赞同：2
> 
> 时间：2013-03-26T09:38:11.033
> 
> 标签：c#, asp.net, linq

在数据表中，列包含值：

```
Column1
-------
2013-03-26 11:40:24.623
2013-03-26 11:20:24.623
2013-03-26 11:00:24.623
2013-03-26 10:40:24.623
2013-03-26 10:20:24.623
2013-03-26 10:10:24.623
... 
```

我需要获取包含不同日期部分的列表。

我试过了：

```
List<DateTime> dateList = (
    from row in dt.AsEnumerable() 
    select row.Field<DateTime>("TimeStamp").Date
).Distinct().ToList<DateTime>(); 
```

它将每个值视为不同的。如何避免时间部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:39:46.517

您可以使用[Enumerable.Distinct](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx)

```
dt.AsEnumerable().Distinct(r => row.Field<DateTime>("TimeStamp").Date); 
```

# php - 基于评级和时间戳的 PHP MYSQL 搜索

> ID：15633667
> 
> 赞同：0
> 
> 时间：2013-03-26T09:38:13.907
> 
> 标签：php, mysql, sql-order-by, rating-system

我的搜索查询运行如下：

```
 select * from posts p where p.post like '%test%' ORDER BY p.upvotes DESC, 
 p.unix_timestamp DESC LIMIT 20 
```

如果搜索关键字的结果超过 20 个，我会找出最小时间戳值，将其存储在隐藏元素中并运行另一个查询以加载更多结果，例如：

```
select * from posts p where p.post like '%test%' and p.unix_timestamp < 1360662045
ORDER BY p.upvotes DESC, p.unix_timestamp DESC LIMIT 20 
```

真正发生的是，我的第一个查询忽略了（显然，我的错误）由于我的原因而没有任何投票（意思是 0 票）的帖子，`ORDER BY p.upvotes DESC`因此，我注意到它获取了表中的第一个帖子在前 20 个结果中，因此最小时间戳成为第一个帖子的时间戳。现在在此之后，如果我尝试获取小于最小时间戳的下 20 个结果，它不会给出任何结果。

现在，我只是使用 upvotes 排序来获取最高记录。我应该使用像贝叶斯平均值这样的算法还是其他算法？

如果我不得不继续使用当前的订购系统，或者我应该使用任何可行且更有效的方法，请告知我如何改进查询？

PS如果可能，请参考一些关于贝叶斯平均值的资源（它似乎是最常用的）或其他替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:46:55.243

在您第一次进行搜索时存储时间戳，然后将其用于下一个查询，您可以使用以下内容：-

```
$sql = "SELECT * 
FROM posts p 
LEFT OUTER JOIN (SELECT post_id, COUNT(*) FROM post_ratings WHERE timestamp_rated <= $SomeTimeStoredBetweenPages GROUP BY post_id) pr ON p.id = pr.post_id 
WHERE p.post like '%test%' 
ORDER BY pr.post_ratings DESC, p.unix_timestamp 
DESC LIMIT ".(($PageNo - 1) * 20)." 20"; 
```

这是一个非常典型的例子，因为我对你的表结构一无所知。也不确定您是否只是为每个赞成票排了一排，或者是否还有反对票要考虑在内。

# ios - 如果在 iOS 中启动时提供了 URL，如何加载不同的视图控制器

> ID：15633668
> 
> 赞同：0
> 
> 时间：2013-03-26T09:38:19.447
> 
> 标签：ios, objective-c, ios6

我有一个应用程序，它使用 safari 通过 Instagram 进行身份验证，当它返回时，我希望它立即加载表格视图，而不需要登录视图。这是我现在要做的：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    DVGViewController *myVC = [[DVGViewController alloc] initWithNibName:@"DVGViewController" bundle:nil];
    self.viewController = [[UINavigationController alloc] initWithRootViewController:myVC];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}

- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    // some code skipped
    UITableViewController *myTVC = [[DVGTableViewController alloc] init];
    self.viewController = [[UINavigationController alloc] initWithRootViewController:myTVC];
    return YES;
} 
```

目前，我仍然每次都能使用第一种方法，尽管第二种方法也被触发，因为我用它从 url 得到计算，我知道这一点。为什么它不加载 tableView 我不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:42:54.843

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url 
```

如果您的应用来自特定的 URl，例如来自 facebook auth 或来自 safari，则该方法将调用，然后此方法将调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:16:06.840

我发现了一个错误。在第二种方法中，我从未设置过 window 和 rootViewController。将此代码添加到第二种方法有帮助。

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible]; 
```

# jquery - 在@Html.Pager click 中调用 Jquery 函数

> ID：15633669
> 
> 赞同：0
> 
> 时间：2013-03-26T09:38:19.323
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4

我在 MVC4 中使用 MvcPaging 进行分页。
`@Html.Pager(Model.PageSize, Model.PageNumber, Model.TotalItemCount)`

单击页面编号（1,2,3...pagecount）时，我需要调用 jquery 函数。

没有任何动作或控件，我需要调用 jquery 函数。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:43:04.237

您在服务器上使用什么并不重要`jQuery`，您需要将点击处理程序附加到分页链接

```
$('.linksclass').on('click', functiontocall); 
```

记得`return false`在被调用函数上避免默认链接行为（移动到链接页面）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:56:22.747

我最近在我当前的项目中做了这个。

只需将 @Html.Pager 包装在 div （或其他一些 html 容器）中，并使用类似的类，例如：

```
<div class="pager">
    @Html.Pager(Model.PageSize, Model.PageNumber, Model.TotalItemCount)
</div> 
```

然后，您可以像这样轻松地挂钩您的寻呼机链接点击：

```
$(".pager a").click(function (e) {
    e.preventDefault();
    // your js code
}); 
```

# mysql - 更新 codeigniter 导入 xls 文件中的其余数据

> ID：15633670
> 
> 赞同：2
> 
> 时间：2013-03-26T09:38:22.107
> 
> 标签：mysql, codeigniter

请帮助我如何检查最后一个插入 ID 并导入其余数据而忽略以前的数据。?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:09:05.277

您可以使用此代码查找最后插入 id

```
$this->db->insert($this->tablename, $details);
return $this->db->insert_id(); 
```

# javascript - 如果表单处于使用 Javascript 的只读模式，则在加载时禁用选择框

> ID：15633678
> 
> 赞同：0
> 
> 时间：2013-03-26T09:38:35.763
> 
> 标签：javascript, html, lotus-notes, lotus-domino

我有一个带有多个文档的 Lotus Notes 视图，当我选择一个文档时，该文档会打开其中包含一个嵌入视图的表单，并带有选择框。我希望在打开的文档处于编辑模式而不是只读模式（最好使用 JavaScript）时看到选择框，选择按钮列已写入 HTML。

`<input type=checkbox id=\"viewselecteddoc\" onclick=\"setcheckval()\" style=\"border:0px\" value=\""+@Text (@DocumentUniqueID)+"\">`

我想在表单上编写 JavaScript，`onload`它将获取父视图的句柄并检查编辑文档是否存在然后显示它，否则隐藏它，这会工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:20:11.497

我认为您可以通过以下方法做到这一点：

尝试制作一个与之前相同的新嵌入视图，但在此视图和主窗体中删除选择框列，同时选择嵌入视图，按公式使用，然后编写公式，@if(@isdocbeingedited; “要在编辑时显示的视图名称”；“必须以只读方式显示的视图”）。

希望这有效。

# css - 带有背景图像的 ie8 输入 [type=submit] - 文本不可点击

> ID：15633679
> 
> 赞同：1
> 
> 时间：2013-03-26T09:38:37.837
> 
> 标签：css, internet-explorer-8

我有一个标准按钮 (input[type=submit) 在 IE8 中有问题。

因为，IE 8 不能很好地过滤，所以我使用了重复的背景图像。这在默认和悬停状态下都可以正常工作，但是如果我单击按钮文本并调用 :active 状态，则背景图像不会改变。

注意：如果我单击按钮上的其他位置而不是文本，它会起作用。我尝试删除处于 :active 状态的图像，但按钮仍然没有从悬停图像改变。

有没有人遇到过这个和/或找到解决方案？

更糟糕的是，jsfiddle 似乎不再支持 IE8，所以甚至不能举一个例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:02:53.443

您可以尝试解决方法`:focus`

也许有些像这样，我没有你的代码，但你可以试试这个：

```
input:active,input:focus
{
   background-image: ...
} 
```

你在这里有类似的问题：[当我点击按钮的文本时，提交输入在 IE8 中没有获得 :active 状态](https://stackoverflow.com/questions/7886888/submit-input-doesnt-get-the-active-state-in-ie8-when-i-click-on-the-buttons-t)

# php - PHP 从两个表中选择并加入它们？

> ID：15633680
> 
> 赞同：0
> 
> 时间：2013-03-26T09:38:39.877
> 
> 标签：php, mysql, sql, join

我正在用 PHP 编写汽车租赁脚本，我将所有汽车放在一个 SQL 表中，将所有汽车租赁放在另一个表中。如何在汽车下方显示所有租赁？

```
**Like this:**
bilar.reknr / Marke / Modell
starttid / stop tid
starttid / stop tid
starttid / stop tid

bilar.reknr / Marke / Modell
starttid / stop tid
starttid / stop tid

**EX**
ZOG-933 / BMW / 320
26.3.2013 / 27.3.2013
28.3.2013 / 29.3.2013
30.3.2013 / 31.3.2013

GOD-123 / MAZDA / 6
1.4.2013 / 2.4.2013
5.4.2013 / 6.4.2013 
```

**这是我现在的代码：**

```
<?php
include 'connection.php';
$sqlquery = "SELECT * FROM bilar";
$sqlarray = mysql_query($sqlquery);
print "<table border='1'><tr>";
print "<td>Register nummer</td>";
print "<td>Marke</td>";
print "<td>Modell</td>";
print "<td>arsmodell</td>";
print "<td>personer</td>";
print "<td>fel</td>";
print "</tr>";
while ($row = mysql_fetch_array($sqlarray)) {
print "<tr style='font-weight:bold;'>";
//print "<td>" . $row['reknr'] . "</td>";
print "<td>" . $row['marke'] . "</td>";
print "<td>" . $row['modell'] . "</td>";
print "<td>" . $row['arsmodell'] . "</td>";
print "<td>" . $row['personer'] . "</td>";
print "<td>" . $row['fel'] . "</td>";
print "</tr>";
$iddd=$row['reknr'];
$sqlquery = "SELECT * FROM hyr";
$sqlarray = mysql_query($sqlquery);
while ($row = mysql_fetch_array($sqlarray)) {
if ($row['reknr']=$row['reknr1']){
print "<tr>";
print "<td>" . $row['startdat'] . "-" . $row['stopdat'] . "</td>";
print "<td>" . $row['starttid'] . "-" . $row['stoptid'] . "</td>";
print "</tr>";
}
}
}
print "</table>";   
mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:53:32.413

你可以试试这个

假设您具有以下表结构：-

1.  **Car_table** : car_id, car_name, car_color
2.  **Rental_table**：rental_id、car_id、rental_date

所以你的查询将是

```
$query = "Select Car_table.*,Rental_table.* from Car_table,Rental_table WHERE Car_table.car_id=Rental_table.car_id GROUP BY car_id" 
```

然后休息我希望你知道该怎么做。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:49:40.553

```
include 'connection.php';
$sqlarray = mysql_query("SELECT t1.*, t2.* FROM bilar t1 LEFT JOIN hyr t2 ON t1.reknr = t2.reknr1");
$arr = array(); 
```

```
print "<table border='1'><tr>";
print "<td>Register nummer</td>";
print "<td>Marke</td>";
print "<td>Modell</td>";
print "<td>arsmodell</td>";
print "<td>personer</td>";
print "<td>fel</td>";
print "</tr>"; 
```

```
$arr =array();
while ($row = mysql_fetch_array($sqlarray)) { 
```

```
$arr[$row[0]]['marke']=$row[1];
    $arr[$row[0]]['modell']=$row[2];
    $arr[$row[0]]['arsmodell']=$row[3];
    $arr[$row[0]]['personer']=$row[4];
    $arr[$row[0]]['fel']=$row[5];
    $arr[$row[0]]['startdat'][]=$row[6];
    $arr[$row[0]]['stopdat'][]=$row[7];
} 
```

```
foreach($arr as $reknr=>$row) {
print "<tr style='font-weight:bold;'>";
//print "<td>" . $reknr . "</td>";
print "<td>" . $row['marke'] . "</td>";
print "<td>" . $row['modell'] . "</td>";
print "<td>" . $row['arsmodell'] . "</td>";
print "<td>" . $row['personer'] . "</td>";
print "<td>" . $row['fel'] . "</td>";
print "</tr>";
for($i=0; $i <= count($row['startdat']) -1 ; $i++) {
print "<tr>";
print "<td>" . $row['startdat'][$i] . "-" . $row['stopdat'][$i] . "</td>";
print "</tr>";
}
}

print "</table>";
mysql_close(); 
```

# ruby-on-rails - Rails Installer：是否可以在不安装新版本的 Rails 安装程序的情况下升级 ruby 版本

> ID：15633682
> 
> 赞同：3
> 
> 时间：2013-03-26T09:38:46.370
> 
> 标签：ruby-on-rails, ruby

我正在尝试升级我的 Windows 机器上的 rails 安装程序附带的 ruby​​ 版本，但我没弄明白。我是否需要重新下载整个 railsinstaller 包并将我的项目移动到这个新包中，或者任何人都可以通过命令提示符进行更简单的升级。

# ruby-on-rails - 获取与模型关联的嵌套属性

> ID：15633683
> 
> 赞同：1
> 
> 时间：2013-03-26T09:38:49.110
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我正在尝试编写一个测试用例，我正在寻找一种更简洁的方法来获取与模型关联的嵌套属性

例如

```
class Category < ActiveRecord::Base

accepts_nested_attributes_for :devices, :books

#other association and code is not written here

end 
```

**我预计**

```
$ Category.get_nested_attributes #this is a dummy method
$ ["devices","books"] #this is the return i expect 
```

是否有任何已经存在的辅助方法？如果是，请告诉我。:)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T09:50:28.480

根据 rails 源代码（[https://github.com/rails/rails/blob/master/activerecord/lib/active_record/nested_attributes.rb#L269](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/nested_attributes.rb#L269)），此代码应该可以工作：

```
1.9.3p327 :002 > User.nested_attributes_options.keys
 => [:subscriptions] 
```

# c# - 具有 WinRT 意外行为的监视器类

> ID：15633685
> 
> 赞同：2
> 
> 时间：2013-03-26T09:38:54.303
> 
> 标签：c#, multithreading, winrt-async

在 WinRT 商店应用程序中，Monitor 似乎无法按预期工作。我有以下代码：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        var tasks = Enumerable.Range(0, 10).Select((i)=>new Task(DoWork)).ToArray();
        foreach (var task in tasks)
        {
            task.Start();
        }

        Task.WaitAll(tasks);
    }

    static object lockObject = new Object();//typeof(MainPage)

    protected async void DoWork()
    {
        bool taken =false;
        Monitor.Enter(lockObject, ref taken);
        Debug.WriteLine("In");
        await Task.Delay(1000);
        Debug.WriteLine("Out");
        if (taken) Monitor.Exit(lockObject);
    } 
```

在输出窗口中，我看到：

```
In
In
In
In
In
In
In
Out
Out
Out
Out
Out
Out
Out
In
Out
A first chance exception of type 'System.Threading.SynchronizationLockException' occurred in App4.exe 
```

这意味着 Monitor 没有锁定关键区域。有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T09:41:10.247

您正在*有效地*尝试使用：

```
lock (lockObject)
{
    await Task.Delay(1000);
} 
```

...除了 C# 编译器不允许你这样做，因为它会被破坏。当您的`await`表达式完成时，您可以在不同的线程上 - 所以当您调用 时`Monitor.Exit`，您很可能不在同一个线程上，因为您获得了锁定......因此出现了异常。

我建议您更改日志记录以显示：

*   当您调用时`In`，您在哪个线程上以及`taken`之后的值（您可能会看到某些任务*没有*成功占用监视器，因为另一个线程拥有它 - 但见下文）
*   在你打电话之前`Monitor.Exit`，你在哪个线程上

目前尚不清楚您要达到什么目的，但`Monitor`在这里使用几乎*可以肯定*是错误的方法。

还要注意，因为多个任务都可以在同一个线程上执行（不是同时，但是你用 await “放弃”线程）并且因为监视器是可重入的（一个线程可以多次获取监视器）你可以以及查看获取监视器的多个任务。

重要的是您要了解*为什么*这不起作用 - 并且您要了解线程与任务不同。然后你可以尝试开始研究如何*真正*实现你想要的，这几乎肯定不是通过`Monitor`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:56:39.100

`Monitor`不适用于`async`方法。

如果您想要`async`兼容的互斥，请尝试我`SemaphoreSlim.WaitAsync`的[AsyncEx 库中的协调原语之一](http://nitoasyncex.codeplex.com/documentation)。

# angularjs - 使用 ng-controller 时延迟模板加载

> ID：15633686
> 
> 赞同：3
> 
> 时间：2013-03-26T09:38:55.860
> 
> 标签：angularjs

我试图推迟加载我的主控制器/模板（AppController），直到我从服务加载用户配置文件。

对于所有导航路线，我使用 $routeProvider 和 resolve

```
.when('/edit/:editId', {
    templateUrl: 'editTemplate.html',
    controller: 'EditController' // this is a child controller of AppController
    resolve: {
         currentUser: ['svc.user', function(userSvc) { return userService.getUser(); }]
    }
// and so on.. 
```

但是对于我正在使用的 AppController

如何解决 AppController？本质上，我想要一个 userService.getUser() 它返回一个承诺在 AppController 实际运行之前完成执行，但我不确定如何使用 ng-init 来执行此操作（或者如果可能，我认为只有表达式不是承诺可以执行）。

感谢您提供任何帮助/帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:34:46.220

如本视频所示：[http ://egghead.io/video/angularjs-resolve/](http://egghead.io/video/angularjs-resolve/)

你应该试试：

```
.when('/edit/:editId', {
  templateUrl: 'editTemplate.html',
  controller: 'EditController' // this is a child controller of AppController
  resolve: {
     currentUser: ['svc.user', function(userSvc) { return userService.getUser(); }]
     app: function ($q) {
                var defer = $q.defer();
                defer.resolve();
                return defer.promise;
     }
} 
```

# wpf - wpf 渲染 gui 异步

> ID：15633687
> 
> 赞同：2
> 
> 时间：2013-03-26T09:38:57.213
> 
> 标签：wpf, user-interface, asynchronous, render

我得到了一个`ItemsControl`包含`Expander`在其中`Expander`的视图`ProgressBars`。我的问题是当我加载数据时（这不是我的性能问题），然后我更新`ItemSource`我的 gui 的 PropertyChanged 冻结了很长时间，因为它需要很长时间才能渲染。

有没有办法让我的 gui 元素异步变红，这样我的 gui 就不会冻结？？？我已经搜索了一下，但我不确定我的搜索结果是否能解决我的问题。所以我在这里问，希望有一个很好的解决方案。

他们的 gui 确实看起来像这样.. 虽然通常有更多的元素 ![在此处输入图像描述](../Images/7961f8c716badd3d162805b76e2e3e7c.png)你都可以想象背后的 xaml 代码......

```
private void RefreshOverview(){
        ...
        foreach (Characteristic c in characteristics)
        {
            Area a = c.Area;

            Characteristic c1 = c;
            foreach (Line l in lines.Where(l => l.Product.Id == c1.Product.Id))
            {
                List<IMeasurementSchedule> measurementSchedules;
                // take DefaultMeasurementSchedules if exists
                if (c.DefaultMeasurementSchedules == null || c.DefaultMeasurementSchedules.Count == 0)
                    measurementSchedules = new List<IMeasurementSchedule>(l.LineMeasurementSchedules.ToArray());
                else
                    measurementSchedules = new List<IMeasurementSchedule>(c.DefaultMeasurementSchedules.ToArray());

                foreach (IMeasurementSchedule ms in measurementSchedules)
                {
                    MeasureCharacteristic mc;
                    if (a.PeripheryEnabled)
                    {
                        Line l1 = l;
                        foreach (AreaItem ai in areaitems.Where(x => x.AreaId == a.Id && x.LineId == l1.Id))
                        {
                            mc = (from cm in _context.CharacteristicMeasures.Local
                                  where cm.Charge == null &&
                                        cm.Characteristic.Id == c.Id &&
                                        cm.Line.Id == l.Id &&
                                        cm.ShiftIndex.Id == actualShiftIndex.Id &&
                                        cm.AreaItem != null &&
                                        cm.AreaItem.Id == ai.Id &&
                                        cm.MeasureScheduleId == ms.Id
                                  select cm).FirstOrDefault() ??
                                 new MeasureCharacteristic
                                     {
                                         Characteristic = c,
                                         Line = l,
                                         ShiftIndex = actualShiftIndex,
                                         AreaItem = ai
                                     };
                            mc.MeasureSchedule = ms;
                            characteristicsMeasures.Add(AddMeasures(mc));
                        }
                    }
                    else
                    {
                        mc = (from cm in _context.CharacteristicMeasures.Local
                              where cm.Charge == null &&
                                    cm.Characteristic.Id == c.Id &&
                                    cm.Line.Id == l.Id &&
                                    cm.ShiftIndex.Id == actualShiftIndex.Id &&
                                    cm.MeasureScheduleId == ms.Id
                              select cm).FirstOrDefault() ??
                             new MeasureCharacteristic {Characteristic = c, Line = l, ShiftIndex = actualShiftIndex};
                        mc.MeasureSchedule = ms;
                        characteristicsMeasures.Add(AddMeasures(mc));
                    }
                }
            }
        }
        MeasureCharacteristics = characteristicsMeasures;
        MeasureCharacteristicsByType =
            CharacteristicMeasureGroupedByType.GetExpanderViewProductItems(characteristicsMeasures);
    } 
```

这就是我的代码；) MeasureCharacteristicsByType 是`IEnumerable<CharacteristicMeasureGroupedByType>`我将我的 itemsource 绑定到的。如果您需要更多信息，请询问！！！

**更新**

这是我的 xaml 代码的链接.. [http://pastebin.com/UA777LjW](http://pastebin.com/UA777LjW)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:37:26.827

您正在混合逻辑来构建数据和渲染操作。将一个与另一个隔离，以确定哪个需要时间。

例如，不要影响`MeasureCharacteristicsByType`与 linq 查询相同的 for 循环。然后用`StopWatch`实例测量时间。

如果渲染花费的时间最多，则将项目`MeasureCharacteristicsByType`一个一个插入（不是同时），用这种指令一个接一个地渲染它们：

```
foreach(var charMeasureByType in CharacteristicMeasureGroupedByType.GetExpanderViewProductItems(characteristicsMeasures))
{
    Dispatcher.BeginInvoke(new Action<OneTypeHere>((OneTypeHere item) =>
    {
       MeasureCharacteristicsByType.Add(item)
    }), DispatcherPriority.Background, charMeasureByType);
} 
```

编辑：`OneTypeHere`是`charMeasureByType`.

# visual-studio-2012 - WIX 工具集集成到 VS 2012 初学者问题

> ID：15633689
> 
> 赞同：7
> 
> 时间：2013-03-26T09:39:00.950
> 
> 标签：visual-studio-2012, wix, votive

我的公司最近强迫我们使用 Wix Toolset (v.4.0.12)，因为我们升级到了 Visual Studio 2012，不幸的是它不再包含安装程序项目。

我的问题如下。我有一个包含许多项目的大解决方案，这些项目总而言之会产生一个 exe 文件和几个 dll。

然后我在解决方案中创建一个 Wix 安装项目，并添加对生成 exe 文件的项目的引用。在该项目引用的属性中，我设置了`Harvest: true`和`Project Output Groups: Binaries`.

我希望我的 WiX 项目的构建能够从引用的项目中获取依赖项，这样我就不需要手动添加引用，因为这会给我更多的维护。

此外，如果我`heat.exe`在引用的项目文件上运行，我只会得到文件的 exe 输出，而不是项目所依赖的 dll。

我认为以上是相当标准的，wix 工具应该能够为我收集这些信息。我真的很想知道为什么在网上广泛搜索后，找不到任何有类似问题的人。

如果有人知道上述原因，请尝试向我发送有关如何使用 WiX 进行操作的基本教程。我似乎不可能找到一个合适的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T15:03:32.157

WiX v3.6 and later support VS2012\. WiX v4.0 is barely even started and not recommended for use at this time. Lots of breaking changes coming in v4.0 so stick with the v3.x line for now.

The auto-harvesting feature in Votive is not fully functional. That is why it is disabled by default. Found many project types were breaking it. As you found, the harvesting does not walk through multiple project references. All things that need more work before they work properly.

In the meantime, you can list the `File` elements in `Component` elements.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T12:04:13.347

当 v4.0.12 还没有发布时，不确定你是如何使用它的！:) Wix v3.8 是最新版本：[http](http://wixtoolset.org/releases) ://wixtoolset.org/releases 。

[官方文档](http://wix.sourceforge.net/manual-wix3/main.htm)中有很多指南，您也可以在[教程](http://wix.tramontana.co.hu/)中找到很多信息。

但是，对于您的特定情况，您需要手动将每个项目的输出及其依赖项包含到安装程序中，因为尚不支持自动收获：

```
<Component>
    <File Id="ProjectA.Output"
          Name="$(var.ProjectA.TargetFileName)"
          Source="$(var.ProjectA.TargetPath)"
          KeyPath="yes" />
</Component>

<Component>
    <File Id="ProjectA.NlogDependancy"
          Name="NLog.dll"
          Source="$(var.ProjectA.TargetDir)\Nlog.dll"
          KeyPath="yes" />
</Component>

<Component>
    <File Id="ProjectB.Output"
          Name="$(var.ProjectB.TargetFileName)"
          Source="$(var.ProjectB.TargetPath)"
          KeyPath="yes" />
</Component>

<Component>
    <File Id="ProjectB.AutofacDependancy"
          Name="Autofac.dll"
          Source="$(var.ProjectB.TargetDir)\Autofac.dll"
          KeyPath="yes" />
</Component> 
```

这并不难做到，除非你有几百个二进制文件，否则不会花太长时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-08T08:41:48.867

当我尝试为我的解决方案创建 .msi 安装时，我遇到了类似的问题。

为了克服这个问题并让它随着时间的推移而持久，即使我在我的项目中插入新的 .dll 和其他依赖项并使其自动化，我做了以下操作。

在我的 Product.wxs 我有这个“目录”

```
<!--Here We Install Our Main App-->
<Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="ProgramFilesFolder">
    <Directory Id="INSTALLFOLDER" Name="MyAppDir"/>
  </Directory>
...
</Directory> 
```

在我的 Wix 项目-> 属性-> 构建事件-> 预构建事件命令行中，我添加了以下命令：

```
 "%wix%\bin\heat" dir "$(SolutionDir)MainProject\bin\Debug" -dr INSTALLFOLDER -scom -frag -srd -sreg -gg -cg Components  -var var.MainProject.TargetDir -o $(SolutionDir)MainProject\Includedheat.wxs 
```

一旦我构建了我的 wix 项目，它将在我的 MainProject 目录中创建一个 Includedheat.wxs 文件，其中列出了我的 MainProject\bin\Debug 目录中的所有文件。

下一步 - 将 Includedheat.wxs 添加到 wix 项目中，而不是在我添加的功能部分中：

```
<!--Add Component-->
<Feature Id="MainApplication" Title="Main Application" Level="1">
...
<ComponentGroupRef Id="Components" />
</Feature> 
```

现在，一旦我重建并安装了 .msi，驻留在我的 MainProject\bin\Debug 目录中的所有内容也将包含在目标位置的 MyAppDir 目录中。

有关更多信息：我遵循了本指南：

[创建一个工作的 Wix 项目。](http://www.c-sharpcorner.com/UploadFile/cb88b2/getting-started-with-wix-windows-installer-xml-in-vs2012/)

[简单的方法heat.exe。](http://chriseelmaa.com/harvesting-files-with-wix-heat/)

还建议阅读以了解在您的命令中使用哪些[标志。](http://wixtoolset.org/documentation/manual/v3/overview/heat.html)

# java - java.io.FileNotFoundException 在 Java 中使用文件写入器打开文件时

> ID：15633692
> 
> 赞同：4
> 
> 时间：2013-03-26T09:39:04.887
> 
> 标签：java, filenotfoundexception

我正在尝试将某些内容写入文件，如下所示：

```
FileWriter fw = new FileWriter("somefile.txt", true); 
```

当由单个进程启动时，它可以正常工作。像这样：

```
java -jar XXXXXXX.jar 
```

但是当被另一个进程调用时，会抛出一个IOException。例子：

```
java.io.FileNotFoundException: 'somefile.txt' (No such file or directory)
    at java.io.FileOutputStream.openAppend(Native Method)                      
    at java.io.FileOutputStream.<init>(FileOutputStream.java:192)              
    at java.io.FileOutputStream.<init>(FileOutputStream.java:116)             
    at java.io.FileWriter.<init>(FileWriter.java:61) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T10:06:32.967

许多答案错误地表明您的异常正在发生，因为该文件不存在。这不是原因；构造函数的[文档](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html#FileWriter%28java.lang.String,%20boolean%29)明确指出：

> **抛出：**
> 
> IOException - 如果命名文件存在但为目录而非常规文件、*不存在但无法创建*或因任何其他原因无法打开

如果您传递的是相对文件名（其中没有“/”或“\”的字符串），它指的是当前目录中的文件。我猜当你使用 运行它时`java -jar`，你的当前目录是一个你有写权限的目录，但是当其他进程运行它时，当前目录是不可写的。

过去，较旧的 Java 版本有在尝试写入不可写目录时抛出 FileNotFoundException 的习惯。不过，最新的 Java 似乎没有这样做，所以我不确定这是否是问题所在。您可以改用 java.nio.file 包来获得更清晰的异常：

```
Path path = Paths.get("somefile.txt");
Writer writer = Files.newBufferedWriter(path, Charset.defaultCharset(),
    StandardOpenOption.APPEND, StandardOpenOption.CREATE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:43:15.300

正如异常所述，该文件`somefile.txt`不存在。这很好，只是[`FileWriter`](http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File%29)构造函数的第二个参数表明您要附加到现有文件，这意味着该文件必须存在。我建议您使用 来检查文件[`File.exists()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)是否存在，如果存在则使用`new FileWriter("somefile.txt", true);`，否则使用`new FileWriter("somefile.txt", false);`首次创建文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T09:56:38.267

启动进程2时：

1.  它将尝试在您的当前目录中找到**somefile.txt 。**

2.  如果在当前目录中没有找到具有给定名称的文件，它将尝试创建一个新文件，但由于用户权限无法创建具有给定名称的新文件。

手动检查，文件是否存在于当前目录中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T09:42:04.090

有几种可能的解释：

1.  该进程没有`somefile.txt`在当前目录中创建的权限。
2.  在某些操作系统上，如果文件已经存在并且正在被另一个进程使用，则可能无法创建/覆盖该文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T09:47:01.960

JavaDoc

> 当具有指定路径名的文件不存在时，FileInputStream、FileOutputStream 和 RandomAccessFile 构造函数将引发此异常。如果文件确实存在但由于某种原因不可访问，例如当试图打开只读文件进行写入时，这些构造函数也会抛出它。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/io/FileNotFoundException.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/FileNotFoundException.html)

也许您已经使用进程打开了文件并且没有关闭文件，所以如果您再次尝试打开文件，则会抛出这些异常，因为文件无法打开两次

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T09:44:12.383

考虑到 FileNotFoundException 它非常清楚地表明该文件不存在。

我猜你的第二个过程从文件不存在的某个根文件夹开始，使用文件的绝对路径来确保这是问题所在。或者只是使用一个简单的检查

```
 if (yourFile.exists()) 
```

在您访问它之前，如果没有显示程序使用的路径。

# aem - CQ5 中页面名称中字符的最大大小

> ID：15633702
> 
> 赞同：0
> 
> 时间：2013-03-26T09:39:26.403
> 
> 标签：aem

当我们使用脚手架创建页面时，页面名称最多只能包含 20 个字符，还有其他方法可以覆盖该验证吗？提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:05:12.240

在第 242 行的默认脚手架 (/libs/wcm/scaffolding/components/scaffolding/body.jsp) 中，您会看到以下代码：

```
var title = frm.findField("./jcr:content/jcr:title");
if (title) {
    var hint = title.getValue();
    if (hint) {
        params[":nameHint"] = hint;
    }
} 
```

这段代码的主要内容是 params[":nameHint"]。创建页面时提交此参数。nameHint 参数是导致节点名称限制为 x 个字符的原因。当 nameHint 被提交时，它会通过一个过滤器来格式化 JCR 的名称。这样做是为了确保 JCR 名称有效。这是为了保护你。您可以在此页面上**的“节点名称创建算法”**部分阅读更多相关信息：http: [//sling.apache.org/site/manipulating-content-the-slingpostservlet-servletspost.html](http://sling.apache.org/site/manipulating-content-the-slingpostservlet-servletspost.html)

要覆盖此问题，您需要将 params[":nameHint"] 更改为 params[":name"]。请记住，这并不能确保 JCR 名称有效。如果这是一个问题，您始终可以修改一些代码以将标题更改为有效的 JCR 名称，然后将其设置为 :name 参数。

另一件事，我确实读过这个 - “当 :nameHint 被过滤时，它会将名称削减到可**配置**的最大长度（默认为 20 个字符）”。我找不到这是如何配置的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-13T11:42:00.147

配置 CQ POST servlet.. 你应该很好

# c++ - QMainWindowLayout::addItem: 请改用公共 QMainWindow API

> ID：15633709
> 
> 赞同：3
> 
> 时间：2013-03-26T09:39:55.570
> 
> 标签：c++, qt

我在将 QPushButton 添加到 ui 时遇到问题。我这样做：

```
 QPushButton *mine[PlayForm->horizontal][PlayForm->vertical];
    for(int i=0; i<PlayForm->horizontal; i++)
    {
        for(int j=0; j<PlayForm->vertical; j++)
        {
            QWidget wdg;
            mine[i][j] = new QPushButton(" ", &wdg);
            mine[i][j]->setGeometry(size*i, size*j, size, size);
            mine[i][j]->show();
            PlayForm->layout()->addWidget(mine[i][j]);
        }
    } 
```

所以我该怎么做？！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T10:19:23.880

您正在堆栈上创建一个*临时*父小部件，并使用对它的引用`QPushButton`- 这是获得段错误的好方法。

父小部件参数默认为`nullptr`，这是您可以接受的，因为布局获得了它的所有权。

```
//QWidget wdg;
mine[i][j] = new QPushButton( " " ); 
```

[此问题](https://stackoverflow.com/questions/4178829/adding-widget-dynamically-in-qt)回答了您收到的错误消息。简而言之，这意味着您不应该修改`QMainWindow`布局；您需要创建一个小部件，将其添加为中央小部件，然后修改中央小部件的布局。

# db2 - 为任何用户找出 DB2 LBAC 策略

> ID：15633713
> 
> 赞同：1
> 
> 时间：2013-03-26T09:40:05.057
> 
> 标签：db2

IBM DB2 有很好的 LBAC（基于标签的访问控制）策略。从查询浏览器中创建或使用这些策略时，我没有遇到问题。但是，我的要求有点不同。假设我使用 LBAC 创建了所需的安全标签并将它们分配给数据库表中的列和行。现在，给定用户的访问控制，我想知道该用户是否可以访问特定标签。

DB2 将在内部解决它并产生所需的结果，但是我需要一些解决方案来告诉我用户是否可以访问特定的列/行，如果我被赋予了用户的访问级别以及每列的安全标签/排。我需要一些执行以下操作的方法：

1.  找出列的安全标签[我可以这样做]
2.  找出允许用户使用的访问控制 [我可以这样做]
3.  告诉用户是否可以访问这些安全标签[我不知道如何实现]

考虑这个例子：

我的示例组件：

```
/*Create the component*/ 
CREATE SECURITY LABEL COMPONENT ORG_DIVISIONS
TREE ('ORGANIZATION_ADMIN' ROOT, --The admin will have the complete access
      'SALES' UNDER 'ORGANIZATION_ADMIN', --The sales department will have acess to the financial information for each unit
      'RESEARCH' UNDER 'ORGANIZATION_ADMIN', --The research division will have access to technical specs and design along with certain financial information
      'RSM1' UNDER 'RESEARCH', --The research manager 1 will have access to certain design and technical specs and certain financial information (depending on the project he is undertaking)
      'RS_ENGG1' UNDER 'RSM1', --The research engineer 1 will have access to certain technical specs (depending on the project he is undertaking)
      'MANUFACTURING' UNDER 'ORGANIZATION_ADMIN', --The manufacturing unit will have access to design along with certain financial information
      'MFM1' UNDER 'MANUFACTURING', --The manufacturing division manager 1 will have access to certain designs along with certain financial information (depending on the project he is undertaking)
      'MF_ENGG1' UNDER 'MFM1' --The manufacturing division engineer 1 will have access to certain designs (depending on the project he is undertaking)
) 
```

我的组件示例策略：

```
/*Create the policy*/ 
CREATE SECURITY POLICY ORGANIZATION_POLICY
COMPONENTS ORG_DIVISIONS
WITH DB2LBACRULES
RESTRICT NOT AUTHORIZED WRITE SECURITY LABEL 
```

我的标签样本集：

```
/*Create the labels from the policy components*/ 
CREATE SECURITY LABEL ORGANIZATION_POLICY.ORGANIZATION_ADMIN
COMPONENT ORG_DIVISIONS 'ORGANIZATION_ADMIN'

CREATE SECURITY LABEL ORGANIZATION_POLICY.SALES
COMPONENT ORG_DIVISIONS 'SALES';

CREATE SECURITY LABEL ORGANIZATION_POLICY.RESEARCH
COMPONENT ORG_DIVISIONS 'RESEARCH';

CREATE SECURITY LABEL ORGANIZATION_POLICY.RSM1
COMPONENT ORG_DIVISIONS 'RSM1';

CREATE SECURITY LABEL ORGANIZATION_POLICY.RS_ENGG1
COMPONENT ORG_DIVISIONS 'RS_ENGG1';

CREATE SECURITY LABEL ORGANIZATION_POLICY.MFM1
COMPONENT ORG_DIVISIONS 'MFM1';

CREATE SECURITY LABEL ORGANIZATION_POLICY.MF_ENGG1
COMPONENT ORG_DIVISIONS 'MF_ENGG1'; 
```

我的示例用户：

```
/*Use the defined policies and grant accesses to the users*/ 
GRANT SECURITY LABEL ORGANIZATION_POLICY.RSM1
TO USER someone FOR ALL ACCESS; 
```

现在，由于我定义了一个*树*组件，用户*某人*将有权访问标记为 RSM1 或其子标签（本例中为 RS_ENGG1）的实体。DB2 知道这一点，如果以用户*某人*身份登录并触发查询，它将向我显示相关结果。*但问题是，我（作为管理员）如何知道用户某人*可以访问哪些列/行？是否可以从某个安全表中检索此信息或以某种方式找出这些信息？

问候，

萨利尔乔希

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:58:36.690

我找不到这个问题的任何解决方案。我最终所做的是找出“树”和“数组”类型的安全组件，列出它们的组件，并在 Java 中重新构建等效的树。

1）找出授予用户的标签

```
SELECT 
   A.grantee
  ,B.secpolicyname
  ,c.seclabelname 
FROM 
   syscat.securitylabelaccess A
  ,syscat.securitypolicies B
  ,syscat.securitylabels C 
WHERE 
   A.seclabelid = C.seclabelid 
   AND A.secpolicyid = B.secpolicyid 
   AND B.secpolicyid = C.secpolicyid 
```

2）找出数组和树组件元素：

对于树木：

```
SELECT 
   D.secpolicyname
  ,B.elementvalue
  ,B.parentelementvalue 
FROM 
   syscat.securitylabelcomponents A
  ,syscat.securitylabelcomponentelements B
  ,syscat.securitypolicycomponentrules C
  ,syscat.securitypolicies D 
WHERE 
   A.compid = B.compid 
   AND A.comptype = 'T' 
   AND A.compid = C.secpolicyid 
   AND C.secpolicyid = D.secpolicyid 
```

对于数组（注意：我找不到元素在数组中插入的顺序，但发现选择（`select *`）而不是投影（`select A.a, B.b, ...`）在这里有帮助。欢迎任何更好的解决方案）：

```
SELECT * 
FROM 
   syscat.securitylabelcomponents A
  ,syscat.securitylabelcomponentelements B
  ,syscat.securitypolicycomponentrules C
  ,syscat.securitypolicies D 
WHERE 
   A.compid = B.compid 
   AND A.comptype = 'A' 
   AND A.compid = C.compid 
   AND C.secpolicyid = D.secpolicyid 
```

3) 使用上述结构生成允许用户使用的标签列表。

这里的一个小问题是组件元素和从它们创建的标签可能没有相同的名称，我找不到它们的任何映射。我已经在[这里](https://stackoverflow.com/questions/15714329/securitylablelcomponentelements-and-securitylabels-mapping-in-db2)发布了这个问题。

# r - 在 ggplot 上添加回归线

> ID：15633714
> 
> 赞同：157
> 
> 时间：2013-03-26T09:40:05.587
> 
> 标签：r, ggplot2, regression, linear-regression

我正在努力在 ggplot 上添加回归线。我第一次尝试使用 abline，但没有成功。然后我尝试了这个...

```
data = data.frame(x.plot=rep(seq(1,5),10),y.plot=rnorm(50))
ggplot(data,aes(x.plot,y.plot))+stat_summary(fun.data=mean_cl_normal) +
   geom_smooth(method='lm',formula=data$y.plot~data$x.plot) 
```

但它也不起作用。

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2013-03-27T08:43:42.027

通常，要提供您自己的公式，您应该使用参数`x`，`y`这将对应于您提供的值`ggplot()`- 在这种情况下，`x`将被解释为`x.plot`和。您可以通过函数的帮助页面找到有关平滑方法和公式的更多信息，因为它是.`y``y.plot``stat_smooth()``geom_smooth()`

```
ggplot(data,aes(x.plot, y.plot)) +
  stat_summary(fun.data=mean_cl_normal) + 
  geom_smooth(method='lm', formula= y~x) 
```

如果您使用在`ggplot()`调用中提供的相同 x 和 y 值并且需要绘制线性回归线，那么您不需要使用里面的公式`geom_smooth()`，只需提供`method="lm"`.

```
ggplot(data,aes(x.plot, y.plot)) +
  stat_summary(fun.data= mean_cl_normal) + 
  geom_smooth(method='lm') 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2017-09-14T10:47:39.057

正如我刚刚想到的，如果您有一个**适合多元线性回归的模型**，上述解决方案将不起作用。

您必须手动将您的行创建为包含原始数据框的预测值的数据框（在您的情况下`data`）。

它看起来像这样：

```
# read dataset
df = mtcars

# create multiple linear model
lm_fit <- lm(mpg ~ cyl + hp, data=df)
summary(lm_fit)

# save predictions of the model in the new data frame 
# together with variable you want to plot against
predicted_df <- data.frame(mpg_pred = predict(lm_fit, df), hp=df$hp)

# this is the predicted line of multiple linear regression
ggplot(data = df, aes(x = mpg, y = hp)) + 
  geom_point(color='blue') +
  geom_line(color='red',data = predicted_df, aes(x=mpg_pred, y=hp)) 
```

[![多个LR](../Images/ee6823f203db68d5da703a6f6249a571.png)](https://i.stack.imgur.com/J7HHY.png)

```
# this is predicted line comparing only chosen variables
ggplot(data = df, aes(x = mpg, y = hp)) + 
  geom_point(color='blue') +
  geom_smooth(method = "lm", se = FALSE) 
```

[![单LR](../Images/a719faf33a8c4df4eadabcaaf94a68a4.png)](https://i.stack.imgur.com/1v2VH.png)

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2018-10-12T05:12:01.723

简单而通用的解决方案是使用`slope`和`intercept`from画一条线[`geom_abline`](https://ggplot2.tidyverse.org/reference/geom_abline.html)。散点图和`lm`对象的示例用法：

```
library(tidyverse)
petal.lm <- lm(Petal.Length ~ Petal.Width, iris)

ggplot(iris, aes(x = Petal.Width, y = Petal.Length)) + 
  geom_point() + 
  geom_abline(slope = coef(petal.lm)[["Petal.Width"]], 
              intercept = coef(petal.lm)[["(Intercept)"]]) 
```

[![示例图](../Images/e206cfe91c261e3e2d7663b036ddb6e7.png)](https://i.stack.imgur.com/Z32os.png)

`coef`用于提取提供给 的公式的系数`lm`。如果您有一些其他线性模型对象或线要绘制，只需插入斜率并类似地截取值。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-07-03T18:08:15.787

[我在博客](https://sejohnston.com/2012/08/09/a-quick-and-easy-function-to-plot-lm-results-in-r/ "Plot lm() results with ggplot2 in R")上找到了这个功能

```
 ggplotRegression <- function (fit) {

    `require(ggplot2)

    ggplot(fit$model, aes_string(x = names(fit$model)[2], y = names(fit$model)[1])) + 
      geom_point() +
      stat_smooth(method = "lm", col = "red") +
      labs(title = paste("Adj R2 = ",signif(summary(fit)$adj.r.squared, 5),
                         "Intercept =",signif(fit$coef[[1]],5 ),
                         " Slope =",signif(fit$coef[[2]], 5),
                         " P =",signif(summary(fit)$coef[2,4], 5)))
    }` 
```

一旦你加载了这个功能，你就可以简单地

```
ggplotRegression(fit) 
```

你也可以去`ggplotregression( y ~ x + z + Q, data)`

希望这可以帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-02T21:59:04.747

如果您想拟合其他类型的模型，例如使用逻辑模型的剂量反应曲线，您还需要使用函数 predict 创建更多数据点，如果您想要更平滑的回归线：

拟合：逻辑回归曲线的拟合

```
#Create a range of doses:
mm <- data.frame(DOSE = seq(0, max(data$DOSE), length.out = 100))
#Create a new data frame for ggplot using predict and your range of new 
#doses:
fit.ggplot=data.frame(y=predict(fit, newdata=mm),x=mm$DOSE)

ggplot(data=data,aes(x=log10(DOSE),y=log(viability)))+geom_point()+
geom_line(data=fit.ggplot,aes(x=log10(x),y=log(y))) 
```

# jquery - JQuery自动保存POST表单到PHP数据库中的JSON字段

> ID：15633734
> 
> 赞同：-1
> 
> 时间：2013-03-26T09:40:48.980
> 
> 标签：jquery, json, post, get

我最初使用以下 PHP 代码将表单上的所有项目保存在表格的“文本”字段中：

```
$the_field = json_encode($_POST); 
```

现在我必须让它自动保存 POST 表单（进行更改时）。

```
$.post("ajax.php?"+$("#form_id").serialize(),
                          { id: '<?php echo $id;?>' },
                     function(data){}); 
```

ajax.php 包含以下代码：

```
$the_field = json_encode($_GET); 
```

这与最初使用 json_encode 和 $_POST 的结果相同。

在我的服务器上，似乎有 100 个 $_GET 项目的限制，包括数组中的项目，无论这些项目是一个字符长还是 50+ 个字符长。

此限制适用于原始页面，也适用于 ajax.php

我想知道是否有一种替代方法在涉及紧凑代码时没有这种限制性限制。它应该允许数组...例如 name="var['.$x.']['.$y.']"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:43:39.703

您可以使用 javascript[序列化（）](http://api.jquery.com/serialize/)表单并将任何对象编码为 json。

查看[JSON.stringify()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)和[parse_str()](http://www.php.net/manual/en/function.parse-str.php)

根据 OP 请求进行编辑：

解决方案：

```
$.post("ajax.php", { data: $("#the_form").serialize()} 
```

对于 ajax.php：

```
parse_str($_POST['data'], $data_obj); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:48:30.960

但你可以尝试`json`：

```
$.post("ajax.php", { id: '<?php echo $id;?>', data: $("#form_id").serialize()}, function(data){
   console.log(data);
}, "json"); 
```

# c# - 如何在 C# 中获取月份明智的记录？

> ID：15633743
> 
> 赞同：0
> 
> 时间：2013-03-26T09:41:13.383
> 
> 标签：c#, linq-to-sql

我的桌子是这样的。

```
name       date          phonenumber
venky      25-06-2013     123123123
vasud      27-06-2013     2423727384
sdfds      14-06-2013     12312332132 
```

如果用户想查看 6 月份的记录，那么他将 06 作为输入参数传递如何将 linq 写入 sql 查询以获取 6 月份的记录作为输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T09:44:31.897

好吧，听起来你只想要这样的东西：

```
public IQueryable<Record> GetRecordsForMonth(int month)
{
    return new RecordContext().Where(record => record.Date.Month == month);
} 
```

这是假设您`date`在数据库中的字段实际上是适当的`datetime`字段或类似的字段。如果不是，请修复您的架构。

或者，对于某个范围内的日期，您可以`DateTime`在方法中获取两个值并以这种方式过滤：

```
public IQueryable<Record> GetRecordsForMonth(DateTime minDateInclusive.
                                             DateTime maxDateExclusive)
{
    return new RecordContext().Where(record => record.Date >= minDateInclusive
                                            && record.Date < maxDateExclusive);
} 
```

# css - CSS变换倾斜，如何使图像顶部水平？

> ID：15633745
> 
> 赞同：0
> 
> 时间：2013-03-26T09:41:28.993
> 
> 标签：css, image, transform, skew

问题是：如何使 .box2 图像顶部水平，就像第一个 .box div 一样？

见小提琴：http: [//jsfiddle.net/PArPj/2/](http://jsfiddle.net/PArPj/2/)

```
.box2{
    height:600px;
    width: 300px;
    overflow:hidden;
    -ms-transform:skewY(-20deg); /* IE 9 */
    -moz-transform:skewY(-20deg); /* Firefox */
    -webkit-transform:skewY(-20deg); /* Safari and Chrome */
    -o-transform:skewY(-20deg); /* Opera */
    transform:skewY(-20deg);
    float: left;
}

.box2 img {
    height: 600px;
    width: 300px;
    -ms-transform:skewY(-20deg); /* IE 9 */
    -moz-transform:skewY(-20deg); /* Firefox */
    -webkit-transform:skewY(-20deg); /* Safari and Chrome */
    -o-transform:skewY(-20deg); /* Opera */
    transform:skewY(-20deg);

    -ms-transform-origin: 100% 100%; /* IE 9 */
    -webkit-transform-origin: 100% 100%; /* Safari and Chrome */
    -moz-transform-origin: 100% 100%; /* Firefox */
    -o-transform-origin: 100% 100%; /* Opera */
    transform-origin: 100% 100%;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:55:31.937

利用`transform:rotate(35deg) skewY(-20deg);`

# html - 如何在 UIWebView 中以正确的格式显示维基百科页面

> ID：15633751
> 
> 赞同：0
> 
> 时间：2013-03-26T09:41:51.640
> 
> 标签：html, objective-c, uiwebview, wikipedia, wikitext

我使用这个链接来获取页面的内容，但它的格式不正确，比如没有表格边框，文本的一些背景颜色。

[https://en.wikipedia.org/w/index.php?action=render&title=巴基斯坦](https://en.wikipedia.org/w/index.php?action=render&title=Pakistan)

如何在 uiwebview iOS 中以正确格式显示上述 URL，就像 wikipanion 应用程序一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-27T22:28:55.903

看看 MediaWiki 离线/导出内容的专家 Kiwix 是如何做到的：[mwoffliner.js](https://sourceforge.net/p/kiwix/other/ci/master/tree/mwoffliner/mwoffliner.js)只是单独下载 CSS：

```
var downloadCSSQueue = async.queue( function ( link, finished ) {

/* link might be a 'link' DOM node or an URL */
var cssUrl = typeof link == 'object' ? getFullUrl( link.getAttribute( 'href' ) ) : link;
var linkMedia = typeof link == 'object' ? link.getAttribute( 'media' ) : null; 
```

等等等等。这不是一个简单的任务，确保它真的是你想要为你的目标采取的路径。

# svn - 可以结合“SVNListParentPath”和“SVNMasterURI”吗？

> ID：15633752
> 
> 赞同：3
> 
> 时间：2013-03-26T09:41:59.777
> 
> 标签：svn, mod-dav-svn

我一直在尝试设置 Apache 来访问颠覆存储库，例如：

*   利用存储库集合，即`SVNParentPath`指向包含存储库的文件夹。
*   用于`SVNMasterURI`透明地将提交代理到主服务器。

我最初的尝试是这样的：

```
<Location "/collection">
    DAV svn
    SVNParentPath /path/to/collection
    SVNMasterURI http://master/collection
    SVNListParentPath on
    AuthzForceUsernameCase Lower
    AuthzSVNAccessFile /path/to/access-file
</Location> 
```

使用此配置，透明代理提交按预期工作。但是，当我尝试浏览到`http://svn-server/collection/`我得到`403 Forbidden`并且错误日志包含`The URI does not contain the name of a repository.`.

[尾部斜线](https://stackoverflow.com/questions/10642583/svn-trailing-slash-in-location-directive-works-on-browser-but-gives-403-error-i)在这里似乎非常重要，所以在尝试了所有尾部斜线组合之后，`Location`我发现：`SVNParentPath``SVNMasterURI`

*   为了`SVNListParentPath`工作，`Location`必须有一个斜杠。
*   为了`SVNMasterURI`工作，`Location`不能*有*斜线。

所有这些都在 Ubuntu 12.04、Apache 2.2.22、mod_dav_svn 1.6.17dfsg-3ubuntu3 上。

*我的问题是：*

有没有办法同时使用`SVNListParentPath`和`SVNMasterURI`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-19T22:00:29.880

如果您愿意，请将 Subversion 和 mod_dav_svn 升级到 1.8.10 或更高版本。与此同时，“斜杠错误”已得到修复，并且 SVNListParentPath 与`<location /collection>`.

我可以确认，SVNMasterURI 对`<location>`. 确保主存储库和从存储库中的路径相同。

# symfony - symfony 2 中的实体管理器是什么以及它在内部是如何工作的？

> ID：15633758
> 
> 赞同：2
> 
> 时间：2013-03-26T09:42:18.580
> 
> 标签：symfony, doctrine, entity

谁能帮我理解实体管理器的概念，它是什么，它是如何工作的以及我们为什么需要它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:18:19.393

> 用于与持久化上下文交互的接口。
> 
> EntityManager 实例与持久性上下文相关联。持久性上下文是一组实体实例，其中对于任何持久性实体身份都有一个唯一的实体实例。在持久性上下文中，管理实体实例及其生命周期。EntityManager API 用于创建和删除持久实体实例、通过主键查找实体以及查询实体。
> 
> 可由给定 EntityManager 实例管理的实体集由持久性单元定义。持久性单元定义了与应用程序相关或分组的所有类的集合，并且必须在它们到单个数据库的映射中并置。

取自[Java EE API 文档](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html)。Doctrine`EntityManager`是基于 JPA 的，所以描述是一样的。

# c++ - 如何返回线交叉点？线并不总是相交

> ID：15633761
> 
> 赞同：6
> 
> 时间：2013-03-26T09:42:27.140
> 
> 标签：c++, function, exception, return, return-value

假设我们要创建一个计算两条线的交点的函数。交点并不总是被定义或唯一的。如何在函数的签名中反映这一点？

我想出了这些选项：

1.  `bool getIntersectionPoint ( Line& a, Line& b , Point& result );`

    如果线平行，则返回 false。否则返回 true 并将结果写入变量。

2.  `Point getIntersectionPoint ( Line& a, Line& b );`

    如果线平行，则抛出异常。

*[更新]*
如果我们创建 2 个函数`bool doLinesIntersect(const Line&, const Line&);`，并且`Point twoLinesIntersection(const Line&, const Line&);`在第一个返回 false 后仍然可以调用第二个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T10:03:54.240

恕我直言，线交叉产生对象，这就是为什么它会诚实

`boost::variant<Empty, Point, Line> intersect(Line const & l1, Line const & l2)`

和辅助功能，例如

`boost::optional<Point> getIntersectionPoint(Line const & l1, Line const & l2)`

`bool isParallel(Line const & l1, Line const & l2)`

**编辑：** 如果您不想使用 boost 库，您可以轻松创建简单的类似物：

```
struct intersection_result_t
{
  enum isec_t
  {
    isec_empty, isec_point, isec_line
  }

  intersection_result_t()
    : type_(isec_empty)
  {
    new (storage_) Empty();
  }

  intersection_result_t(Empty const & e)
    : type_(isec_empty)
  {
    new (storage_) Empty(e);
  }
  intersection_result_t(Point const & p)
    : type_(isec_point)
  {
    new (storage_) Point(p);
  }
...
  intersection_result_t(intersection_result_t & ir)
    : type_(ir.type_)
  {
    switch(ir.type_)
    {
      case isec_empty:
        new (storage_) Empty(*static_cast<Empty*>(ir.storage_));
      case ....
    }
  }
private:
  void destroy()
  {
    switch(type_)
    {
      case isec_empty:
        operator delete (static_cast<Empty*>(storage_), storage_);
      case ....
    }
  }
private:
  char storage_[MAX(sizeof(Empty), sizeof(Point), sizeof(Line))];
  isec_t type_;
}; 
```

等等，等等，需要更多的开关。或者，您可以使用模板。对于可选的，只需使用`initialized_`而不是`type_`跟踪构造状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T10:25:12.143

正如**ulidtko**所建议的，最好返回一个“可能是一个点”的对象。在 C++ 中，您可以使用[`boost::optional`](http://www.boost.org/doc/libs/1_53_0/libs/optional/doc/html/index.html)

```
boost::optional<Point> getIntersectionPoint(const Line& a, const Line& b) {
    // ...
    if (there_is_zero_or_inifinty_points_of_intersection)
        return boost::optional<Point>();
    else
        return boost::optional<Point>(the_point_of_intersection);
} 
```

你可以把`boost::optional<Point>`它想象成一个`Point*`. 特别是，客户端可以通过以下方式查询返回的交集是否是正确的点：

```
boost::optional<Point> point = getIntersectionPoint(a, b);
if (point)
    // point "points to" a proper Point which can be retrieved as *point
else
    // point is "NULL", that is, there's no unique point of intersection 
```

有趣的是，激励的例子[`boost::optional`](http://www.boost.org/doc/libs/1_53_0/libs/optional/doc/html/index.html)也是一个几何问题。这不是巧合`boost::optional`，因为我相信作者编写了几何软件。;-)

值得一提的是，在 C++ 标准的下一个修订版中，有一个[提议](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3527.html)包含在 STL 中。`optional`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:47:30.750

从抽象 (API) 的角度来看，您有两个不相关的函数：

```
bool doLinesIntersect(const Line&, const Line&); 
```

和

```
Point twoLinesIntersection(const Line&, const Line&); 
```

第二个函数必须假设这些线确实相交（并且不共线）。*如果你不信任你的调用者*，你可能想抛出一个异常，表明不满足先决条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T09:50:46.887

您的第二个函数可能不应该返回一个 Point& 而是一个 Point 值（谁拥有它？）

或者，还有第三种选择：

```
Point getIntersectionPoint ( Line& a, Line& b, bool* ok ); 
```

如果为 'ok' 提供 NULL 指针，如果没有交集则抛出，否则在 'ok' 的值中返回 false。

我建议对于这样的函数，最好完全避免异常。非交集并不是真正的异常，应该为意外的东西保留异常。您可以期待不相交的线。

使用返回 bool 的版本，或带有 bool 参数但不抛出的版本。

编辑经常使用的第四个选项：

```
std::pair<bool, Point> getIntersectionPoint ( Line& a, Line& b ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T09:44:03.540

平行线不是错误，也不是意外。因此抛出异常是不合适的。

顺便说一句，这作为函数签名更可取。

```
bool getIntersectionPoint(const Line& a, const Line& b, Point& result); 
```

指定 const 可以清楚地表明该函数不会修改它的前两个参数，并且还允许您使用临时函数调用该函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T09:58:00.517

这个问题是C++中更简单的**[求和类型](http://en.wikipedia.org/wiki/Sum_type)**的一个很好的动机。

在像 Haskell 这样的语言中，您的函数将具有以下签名：

```
getIntersectionPoint :: Line -> Line -> Maybe Point 
```

where [`Maybe Point`](http://www.haskell.org/haskellwiki/Maybe)（函数的返回类型）本质上意味着一个可以有两个值的类型：`Nothing`或者`Just p`，其中`p`是 a `Point`。

这种*简单*求和类型的可用性实际上会使这个问题变得毫无意义，因为所有方法都会合并为一个单一的方法。

* * *

编辑：[这个答案](/a/15634199/531179)巧妙地证明了 Boost 提供了简单的求和类型工具。有[`boost::optional`](http://www.boost.org/libs/optional/)和[`boost::variant`](http://www.boost.org/libs/variant/)。甜的。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-26T10:21:46.683

没有给定上下文，人们将无休止地讨论。

假设你想使用一些里面的函数

```
fillWithColor(color c, set_of lines& figure); 
```

不知何故，你曾经`getLinesIntersection`这样做过。如果您需要检查每个调用，不仅您的代码会一团糟，而且您不知道如何处理错误。简单使用该函数，让调用者捕获异常。

在其他情况下，您可以实现：

```
bool doLinesIntersect(const Line&, const Line2&, Point &p);
Point getLinesIntersection(const Line&, const Line2&)
{
   Point p;
   If (! doLinesIntersect(Line, Line2,p) throw …;
   return p;
} 
```

两种方法都非常有效！

# vba - VBA，Excel：如何将类对象传递给表单

> ID：15633767
> 
> 赞同：0
> 
> 时间：2013-03-26T09:42:49.373
> 
> 标签：vba, object, parameters, userform

如何将 ThisWorkbook 中的类对象传递给 UserForm？

我收到以下错误：

在**本工作簿**中：

```
Dim MainObject As MyClass
Set MainObject = New MyClass

Public Sub ShowMyForm()
  Dim frmMyForm as MyForm
  Set frmMyForm = New MyForm
  frmMyForm.FormObject = MainObject  ' *<-- Run-time Error '13': Type mismatch*
End Sub 
```

在**MyForm**中：

```
Private p_Object As MyClass

Property Get FormObject() As MyClass
  Set FormObject = p_Object
End Property

Property Set FormObject(ByRef Value As MyClass)
  Set p_Object = Value
End Property 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:39:20.353

当您分配对象时，您需要使用 Set 关键字，如下所示：

```
Set frmMyForm.FormObject = MainObject 
```

# iphone - 如何在文本字段中临时保存文本？

> ID：15633773
> 
> 赞同：0
> 
> 时间：2013-03-26T09:43:04.533
> 
> 标签：iphone, ios, uitextfield, save

我有一个小问题，当我将文本放入视图控制器 A 中的 UITextfield 并转到另一个视图控制器然后我返回视图控制器 A 时，文本字段中的文本消失了。

有没有办法将文本临时保存在文本字段中？因此，当您转到其他视图控制器时，文本不会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:48:00.043

当您当时浏览页面时，将数据保存在 NSUserDefaults 中。

```
NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];
    [defaults setObject:textfield.text forKey:@"textfield value"];
    [defaults synchronize]; 
```

并在方法中重新分配文本字段值`viewWillAppear`。

```
NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];
   textfield.text= [defaults  valueForKey:@"textfield value"]; 
```

或者

否则取一个全局字符串并将字符串值分配给 textFiled 和 Vice Versa。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:20:29.663

使用 UINavigationController。然后，您可以使用 pushViewController 将屏幕添加到导航堆栈，并使用 popViewController 从堆栈中删除屏幕。当您回来时，您在文本字段中的内容将被保留。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:48:15.603

是的，有很多方法。如果您希望文本仅在应用程序运行时可见，则将文本保存在全局中`NSString`并将其添加到`UITextfield`您的`viewWillAppear`方法中。

您也可以将属性设置为全局，您可以在 AppDelgate 或全局单例类中添加声明字符串。

如果要保存变量/字符串，请使用`NSSUserDefaults`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T09:46:11.310

您可以使用全局变量并将文本存储在该全局变量中。

为此，您可以使用 .pch 文件`AppDelegate`来管理全局变量。

或者您可以使用`NSUserDefaults`.

# php - 使用 tank auth social 重定向 codeigniter 中的问题

> ID：15633777
> 
> 赞同：3
> 
> 时间：2013-03-26T09:43:14.393
> 
> 标签：php, facebook, codeigniter, social, tankauth

我想用facebook登录我的网站并将用户数据保存到数据库中，为此我使用的是tank auth social libray，一切都很好，但是当我点击用facebook登录时，它向我显示了这样的错误

```
 An error occurred. Please try again later.

     API Error Code: 191
     API Error Description: The specified URL is not owned by the application
     Error Message: Invalid redirect_uri: Given URL is not allowed by the Application configuration. 
```

有什么问题，我不明白我在一步一步使用错在哪里，但我不知道这是什么问题，有没有人帮助我非常感谢他，而不是提前一吨，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:31:23.817

您必须在 facebook 应用程序设置中设置您的应用程序 URL

```
Given URL is not allowed by the Application configuration. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:47:40.180

默认情况下，您的 Facebook 应用程序“拥有”画布 url `http://apps.facebook.com/your_app`，但也拥有您必须输入的给定域。出于安全原因，`redirect_uri`只能将您重定向到其中一个。

如果您无法完成这项工作，您可以将`redirect_uri`to 指向一个站点，例如`http://apps.facebook.com/my_redirect`，只需使用**controllers/my_redirect.php**的`index`功能即可`echo <script>top.location = 'http://google.com'</script>`。

无论如何，请检查您的应用程序中的设置，并更多地阅读这些错误，因为很多人已经发布了它们并获得了它们的答案。

# c# - 在 C# 中使用 C++ DLL（指针方法）

> ID：15633779
> 
> 赞同：0
> 
> 时间：2013-03-26T09:43:20.923
> 
> 标签：c#, c++

我有一个 C++ DLL 文件，我需要使用 C# 中的函数。C++ 文件在 ServiceState 中有一个名为“Status”的方法。该块的 C++ 代码如下所示。

```
STDMETHODIMP ServiceState::Status(/*[out]*/VARIANT *Primary,VARIANT *Secondary ) 
{
if(primary()) 
     Primary->boolVal = TRUE;
else
     Secondary->boolVal = FALSE;

return true;

} 
```

我编译了 C++ 项目并得到了**Status.dll**输出。我在 C# 代码中初始化如下。

```
 [DllImport(@"c:\Status.dll")]
 public static extern void ServiceState.Status(IntPtr Primary,IntPtr Secondary); 
```

1）初始化是否正确？

2) 由于该方法在 C++ 中有指针，因此必须将什么 C# 数据类型传递给该方法以及如何传递？请指导我。

谢谢

# jquery - 使用 Spring Security 和 ajax 登录处理无效的用户/密码

> ID：15633780
> 
> 赞同：1
> 
> 时间：2013-03-26T09:43:25.723
> 
> 标签：jquery, spring-security

我正在使用弹簧安全登录+ ajax 登录。如果用户提供了错误的凭据，我需要显示一条消息“无效的用户/密码”

这是ajax登录jquery代码。

```
$(document).ready(function(){
$('#login_btn').click(function(){
    //alert("aaa"+validateLoginForm());
    if(validateLoginForm()){

        sprpst = 'j_username='+$('#j_username').val()+'&j_password='+$('#j_password').val();
        $.post('j_spring_security_check',sprpst,function(data1) {

            window.location.reload();

        }); 
        $.blockUI({ message : '<h1><img src="images/busy.gif" /> Loading...</h1>' });
    }
});
}); 
```

这是spring安全登录

```
<form-login login-page="/login" default-target-url="/deals" authentication-failure-url="/deals?login_error=1"/> 
```

任何帮助将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:02:47.847

你需要：

1.  提供自定义 AuthenticationEntryPoint（可以使用默认 LoginUrlAuthenticationEntryPoint 作为基类）。在`AuthenticationEntryPoint.commence(...)`方法中检查这是 AJAX 调用并返回 403 代码，而不是重定向到登录页面。
2.  在 Spring Security conf 中设置您的自定义 AuthenticationEntryPoint。
3.  检查 AJAX 响应的代码。如果它包含 403，则显示有关错误凭据的相应错误消息。

自定义身份验证入口点的代码可能如下所示：

```
public class CustomAuthenticationEntryPoint extends LoginUrlAuthenticationEntryPoint {

    @Override
    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException, ServletException {
        String header = request.getHeader("X-Requested-With");
        if (StringUtils.hasText(header) && header.equals("XMLHttpRequest") && authException != null) {
            response.sendError(HttpServletResponse.SC_UNAUTHORIZED);
        } else {
            super.commence(request, response, authException);
        }
    }
} 
```

# c# - 针对多个模式验证未知 xml，直到找到匹配项

> ID：15633786
> 
> 赞同：4
> 
> 时间：2013-03-26T09:43:42.660
> 
> 标签：c#, xml, xsd, linq-to-xml

我已将 xml 发送到网页，并且我想针对几个 xsd 进行验证，直到文件验证。当它验证时，我将能够根据管理验证它的架构来确定 xml 文件的类型。

```
 List<string> xsdList = new List<string>();

  xsdList.Add(_path + @"Handlers\DeviceSpecificHandlers\Schemas\Enquiry.xsd");
  xsdList.Add(_path + @"Handlers\DeviceSpecificHandlers\Schemas\FingerDeleted.xsd");
  xsdList.Add(_path + @"Handlers\DeviceSpecificHandlers\Schemas\Heartbeat.xsd");
  xsdList.Add(_path + @"Handlers\DeviceSpecificHandlers\Schemas\Validation.xsd");

  XmlSchemaSet schemas = new XmlSchemaSet();

  foreach (string schema in xsdList)
  {
    var reader = new StringReader(File.ReadAllText(schema));
    schemas.Add("", XmlReader.Create(reader));
  }

  request.Validate(schemas, (o, e) =>
  {
    match = false;
  }); 
```

任何人都可以帮忙，以上是我到目前为止拼凑的内容，它目前抛出错误'System.Xml.Schema.XmlSchemaValidationException：全局元素'interface'已经被声明'

有没有办法返回哪个模式验证成功？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:20:45.510

首先，您必须弄清楚哪些 XSD 文件可以放在一个文件集中。您收到的错误告诉您，同一元素“接口”的定义来自两个或多个**不同的**基本 URI。

如果您想动态确定集合，那么您需要做一些工作。这是可能的，但这不是微不足道的。这取决于 XSD 文件是否使用组合（包括/导入/重新定义）。如果他们不这样做（简单的场景），那么为了将 XSD 文件放在一起，您必须单独加载每个 XSD 文件，建立所有全局定义的内容（类型、元素、组、属性、属性组）的索引，然后放入将这些集合在一起，使得给定集合的任何一对单独的 XSD 成员，交集是空的。构建一个集合的策略取决于许多因素，性能和覆盖范围只是两个。基于这个简单的案例，您可以看到组合变得多么重要，因为现在即使交叉点不为空，

[QTAssistant](http://www.paschidev.com)（我与它相关联）有一个完整的引擎来处理上述问题，以便在“收集”任意 XSD 内容进行分析、验证等时为其 XML Schema Refactoring 引擎设置 XML Schema 源集（或集合） .

一旦你弄清楚了这些集合，你就必须对这些模式的构成做出假设。换句话说，什么构成了一组有效的 XML 文档元素（有时并非所有全局元素定义都是有效的文档元素），以及每个文档元素应该使用什么模式集。很明显，您必须以某种方式处理此问题，因为您有重复的元素。

如果您想根据您的问题处理它，那么只需循环遍历如上构造的一组模式集。

想出关于如何手动找出最佳集合的策略的最佳方法可能是可视化 XSD 文件之间的关系。下面是我如何使用可用工具查看它的说明，来自 SO 上的另一篇文章。

![在此处输入图像描述](../Images/ce5bda417675dd42fbf42ad19863167d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-08T02:58:25.173

从[http://msdn.microsoft.com/en-us/library/fe6y1sfe(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/fe6y1sfe(v=vs.110).aspx)：

“XmlSchemaSet 中的架构通过 XmlSchemaSet 的 Compile 方法编译为一个逻辑架构。”

因此，要针对几个单独的架构进行验证，您应该`XmlSchemaSet`为每个 XSD 创建一个。

然后您可以执行以下操作：

```
bool xmlIsValid = true;
XmlSchemaSet validatingSchema;
foreach (XmlSchemaSet schema in schemas) {
    xml.Validate(schema, (o, e) => { xmlIsValid = false; });
    if (xmlIsValid) {
        validatingSchema = schema;
        break;
    }
} 
```

# python - Python中的截断与地板除法

> ID：15633787
> 
> 赞同：7
> 
> 时间：2013-03-26T09:43:42.893
> 
> 标签：python, division

为了建立上下文，我只讨论整数算术，在大整数上，所以通过浮点不是一种选择，并且使用负数，所以地板和截断除法之间的区别很重要。

在对负整数执行除法时，典型的硬件和 C 系列编程语言会给出截断的结果，例如 1 / -2 = 0。Python 2 给出下限的结果，例如 1 / -2 = -1。

尽管关于哪个本质上更好的争论，有没有办法让 Python 给出截断的结果？如果您使用 Python 3 而不是 2，会有什么不同吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T09:48:47.713

好的，如果您只是想要一个解决方案，请记住`int`截断数字，因此不要进行整数除法，而是截断浮点数`int`

```
int(1./-2) 
```

如果你使用的是 Python 3.X，你可以简单地做

```
int(1/2) 
```

如果您希望将来的 Py 2.X 导入部门具有相同的行为

```
from __future__ import division
int(1/2) 
```

如果您想知道这种行为的确切原因，请阅读这篇精彩的文章[Why Python's Integer Division Floors](http://python-history.blogspot.com/2010/08/why-pythons-integer-division-floors.html)

* * *

看看您在使用 float 进行除法时的困境，这是一种替代方法，据我测试过，它似乎有效。随时让我知道您面临的任何问题

```
>>> def trunc_div(a,b):
    q, r = divmod(a,b)
    if  q < 0 and r:
        q += 1
    return q

>>> trunc_div(1,-2)
0
>>> trunc_div(999999999999999999999999999999999999999999, -2)
-499999999999999999999999999999999999999999L
>>> trunc_div(999999999999999999999999999999999999999999, 2)
499999999999999999999999999999999999999999L
>>> trunc_div(1,2)
0
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:47:43.323

Python 3 有新式除法（也可以在 Python 2 中用 触发`from __future__ import division`）：

```
>>> from __future__ import division
>>> -1 / 2
-0.5
>>> -1 // 2
-1 
```

我不认为你可以得到截断除法，你可能不得不使用 math.floor()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T10:18:09.107

我认为这解决了你的问题，但它是一个函数调用，而不是一个简单的操作：

```
def truncdiv(a, b):
    if a < 0:
        a = -a
        b = -b
    if b < 0:
        return (a + b + 1) / b
    return a / b 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T13:07:37.913

gmpy2库支持截断除法[：](https://code.google.com/p/gmpy/)

```
>>> import gmpy2
>>> gmpy2.mpz(-100)//7
mpz(-15)
>>> gmpy2.t_div(gmpy2.mpz(-100),7)
mpz(-14)
>>> 
```

免责声明：我维护 gmpy2。

# perl - MIME::Lite 包无效的路由地址

> ID：15633791
> 
> 赞同：4
> 
> 时间：2013-03-26T09:43:51.520
> 
> 标签：perl, email

我想使用`MIME::Lite`包向多个用户发送电子邮件。我试图用空格、分号或逗号分隔地址，但没有任何效果。我仍然收到错误“无效的路由地址”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:24:38.787

您是否使用抄送或收件人字段列出多个地址？

这说，抄送字段和简单的逗号：[https ://metacpan.org/pod/MIME::Lite](https://metacpan.org/pod/MIME::Lite)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:44:21.897

**如何调试 MIME::Lite 电子邮件发送**

我的意思可能是您的 MTA/邮件服务器存在一些配置问题 => 提供更多调试信息。

如果您通过“sendmail”发送 => 附加`-v`到默认命令行选项

```
MIME::Lite->send("sendmail", "/usr/lib/sendmail -v -t -oi -oem"); 
```

或者

```
$msg->send("sendmail", "/usr/lib/sendmail -v -t -oi -oem"); 
```

如果您通过 smtp 附加`Debug=>2`选项发送

```
MIME::Lite->send('smtp','some.host',Debug=>2); 
```

或者

```
$msg->sendsend('smtp','some.host',Debug=>2); 
```

# javascript - Buster JS - BDD 风格 - 设置规范超时

> ID：15633792
> 
> 赞同：1
> 
> 时间：2013-03-26T09:43:53.033
> 
> 标签：javascript, bdd, buster.js

在 javascript 中使用 buster.js 进行 BDD，我有一些相当大的 API 需要测试。在某些情况下，默认超时不适合我。如何覆盖（异步）规范的默认超时？

```
describe("Given a request for all combinations", function() {

    var scenario = null, spec;

    beforeAll(function() {
        scenario = scenarios.buildFakeAPI();
    });

    before(function(done) {

       spec = this;

       // *** this request can take up to 60 seconds which causes a timeout:
       scenario.request({ path: "/my/request/path" }, function(err, res) {

           spec.result = res;
           done();
       }); 
    });

    it("it should have returned the expected thing", function() {
        expect(spec.result).toMatch(/expected thing/);
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:31:50.647

我有同样的问题，以下似乎解决了它。

不使用 BDD 时，可以在 setUp 函数中设置超时时间

```
buster.testCase("MyTest", {
    setUp: function() {
        this.timeout = 1000; // 1000 ms ~ 1 s
    }
}); 
```

当使用 BDD 表示法时，我们可以在 beforeAll 函数中做同样的事情

```
describe("MyTest", function() {
    before(function() {
        this.timeout = 1000 * 60; // 60000 ms ~ 60 s
    });
}); 
```

# ruby - 如何使用 ruby mechanize 在网页上模仿向下滚动？

> ID：15633793
> 
> 赞同：2
> 
> 时间：2013-03-26T09:43:53.520
> 
> 标签：ruby, scroll, mechanize

我有一个具有 ajax 效果的网页 - 当用户向下滚动页面时，新元素会出现。我想用 ruby​​ mechanize 解析所有这些元素。有什么建议吗？

# objective-c - 根据子对象中可能的属性快速过滤父 NSManagedObjects

> ID：15633795
> 
> 赞同：2
> 
> 时间：2013-03-26T09:43:58.960
> 
> 标签：objective-c, core-data, grand-central-dispatch, nsmanagedobject, nsset

我正在做一个需要一些相当复杂的过滤的项目。我有一个`Race`NSManagedObject`Car`附加了许多对象。`Car`可以有多个`Position`对象。对于给定的比赛，我需要获取所有汽车的列表，但需要根据比赛是否进行而对它们进行不同的排序。如果比赛还没有开始，他们需要由`Car.number`（简单）订购。如果比赛正在进行，则需要按当前位置排序。困难在于检索到的位置不能是集合中最新的，而是特定范围内的最新的，并且可能根本没有位置（即如果赛车出局）。

排序全部完成，我有一些代码工作，允许我根据检索汽车的完整位置集，然后使用和检索最大时间来设置我的`currentPosition`属性。这样做的问题是它非常慢，而且需要非常快（因为它每秒都会发生）。我将它包裹在其中，但由于 NSManagedObjects 不是线程安全的，因此导致偶尔冻结。`Car``filteredSetUsingPredicate:``valueForKeyPath:``dispatch_async`

理想情况下，我需要一种方法来获取对象的 NSArray，如果适用，这些`Car`对象可以`Car.currentPosition`选择设置为最新的（如果存在，则通过在最后 10 秒内获取最后一个来确定）。然后，我可以自己根据属性对返回的数组进行排序，并执行我需要做的其他部分（即将那些没有 currentPosition 的部分移动到单独的非完成者列表中）。`Position``Position.time``Car.currentPosition.position`

下面是我到目前为止的（慢）代码。我要么需要一种方法来加快速度（以某种方式使用 dispatch_async 而不会导致线程问题），要么需要一种更好的方法来从 CoreData 进行初始获取，以便可以在我认为会更快的那一侧完成。

当前代码：

```
 - (void)performFetchWithCallback:(void (^)(void))completionBlock
    {
        NSError *error;
        [self.fetchedResultsController performFetch:&error];
        if (error) {
            NSLog(@"ERROR: %@", error);
        }

        NSMutableArray *cars = [NSMutableArray array];

        BOOL isRacing = NO;
        for (Car *car in _fetchedResultsController.fetchedObjects) {
            Position *position = nil;
            NSSet *carPositions = [[car valueForKey:@"positions"] copy];
            if (carPositions && currentTime > 0) {
                NSSet *positions = [carPositions filteredSetUsingPredicate:[NSPredicate predicateWithFormat:@"time < %@ && time > %@", @(currentTime), @(currentTime-10)]];
                if (positions.count > 0) {
                    NSNumber *time = [positions valueForKeyPath:@"@max.time"];
                    for (Position *p in positions) {
                        if ([p.time isEqual:time]) {
                            position = p;
                            isRacing = YES;
                        }
                    }
                }
            }
            car.currentPosition = position;
            [cars addObject:car];
        }

        self.allCars = cars;

        if (completionBlock) {
            completionBlock();
        }
    }

    - (NSFetchedResultsController *)fetchedResultsController
    {
        if (_fetchedResultsController != nil) {
            return _fetchedResultsController;
        }

        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        NSEntityDescription *entity = [NSEntityDescription entityForName:@"Car" inManagedObjectContext:self.managedObjectContext];
        [fetchRequest setEntity:entity];
        NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"number" ascending:YES];
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"raceIdentifier = %@", _race.identifier];
        [fetchRequest setPredicate:predicate];
        [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];
        [fetchRequest setFetchBatchSize:40];

        NSFetchedResultsController *theFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:_managedObjectContext sectionNameKeyPath:nil cacheName:@"Racing"];
        self.fetchedResultsController = theFetchedResultsController;

        return _fetchedResultsController;
    } 
```

有一个名为 ivar `currentTime`，其中包含自比赛开始以来的秒数 - 这用于确定应该显示哪些位置（因为位置可以提前很长时间保存）。

楷模：

**车**

*   raceIdentifier (NSNumber - 用于将 Car 限制为 Race)
*   number （NSNumber - 赛车的起始编号 - 用于在比赛尚未开始时对赛车进行排序）
*   位置（位置对象的 NSSet）

**位置**

*   time (NSNumber - 此位置更新的时间，以秒为单位)
*   位置（NSNumber - 赛车在比赛中的位置，即第一名）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:34:34.890

为可能过于简单化而道歉，但简而言之，这应该（可能？）起作用。

```
- (void)performFetchWithCallback:(void (^)(void))completionBlock
{
    // Use a dictionary instead; you'll want to set instance variables on your cars in the main
    // thread
    __block NSMutableDictionary *carDict = [NSMutableDictionary dictionary];
    dispatch_queue_t main = dispatch_get_main_queue();
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH,NULL), ^{
        // Perform a non-resultsController fetch with a background context, using the 
        // car, number, race identifier NSFetchRequest below

        // Then your for (car in fetchedResults) computation loop, but use a
        // mutable dictionary (carDict) instead of an array, and store car IDs as
        // your keys, and their current position as their values

        dispatch_async(main, ^{
            // Here, fetch your cars into your fetched results controller based on a
            // predicate of the carDict keys you stored (id IN %@), then do a quick
            // for (car in fetchedResults) loop and assign those currentPosition values here
            if (completionBlock) completionBlock();
        });
    });
} 
```

在处理其他线程中的上下文时，我通常使用[MagicalRecord ，因为](https://github.com/magicalpanda/MagicalRecord)[它大大简化](https://github.com/magicalpanda/MagicalRecord#finding-from-a-different-context)*了*它；叫我宠坏了。

# android - 在我的代码中获取空指针异常

> ID：15633802
> 
> 赞同：0
> 
> 时间：2013-03-26T09:44:10.307
> 
> 标签：android

我正在制作联系人列表应用程序。我有一个名为搜索按钮的按钮，当它被点击时，正在读取文本框中写的名称并在此处搜索数据库是我的代码：

```
public class SearchResultsActivity extends Activity {

public DatabaseAdapter db;
public ArrayList<String> myList;
public ListView listview;
private TextView view;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list);
    view = (TextView) findViewById(R.id.textView1);
    db = new DatabaseAdapter(this);
    myList = new ArrayList<String>();
    getSearchResults();
    //getAllContacts();
    printList();
}

public void getSearchResults(){
    db.open();
    db.getContactbyName(view.getText().toString());
    Cursor c = db.getContactbyName(view.getText().toString());
            if (c.moveToFirst()) {
        do {
            DisplayContact(c);

        } while (c.moveToNext());
    }

    db.close();

}

public void printList(){

    listview = (ListView)findViewById(R.id.contactcListView);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1, myList);

    listview.setAdapter(adapter);
}

public void getAllContacts() {
    db.open();
    Cursor c = db.getAllContacts();
    if (c.moveToFirst()) {
        do {
            DisplayContact(c);

        } while (c.moveToNext());
    }
    db.close();
}

public void DisplayContact(Cursor c) {

    String entry = "";
    // if you add another attribute to your table, you need to change 3 into x
    for (int i=1; i<5;i++){
        entry += c.getString(i) + "\n";
    }
    myList.add(entry);
}
} 
```

在我的代码中，getAllContacts() 方法可以正常工作并打印所有联系人。但是当我尝试搜索联系人时，我得到一个空指针异常并且应用程序关闭。任何人都可以看到问题吗？

这是日志猫：

![在此处输入图像描述](../Images/94f397218d8b8f6aa469e81b140477e2.png)

谢谢

如果您无法阅读，这是另一个版本的 logcat :)

```
03-26 11:52:37.983: D/dalvikvm(12524): GC_CONCURRENT freed 78K, 7% free 12818K/13703K,     
paused 10ms+3ms, total 45ms
03-26 11:52:37.988: D/AbsListView(12524): [unregisterDoubleTapMotionListener]
03-26 11:52:37.993: I/MotionRecognitionManager(12524):   .unregisterListener : /     
listener count = 0->0, listener=android.widget.AbsListView$4@42464368
03-26 11:55:53.778: I/Process(12524): Sending signal. PID: 12524 SIG: 9
03-26 11:56:42.238: E/SensorManager(13254): thread start
03-26 11:56:42.238: D/SensorManager(13254): registerListener :: handle = 0  name=     
LSM330DLC 3-axis Accelerometer delay= 200000 Listener=    
android.view.OrientationEventListener$SensorEventListenerImpl@4243e698
03-26 11:56:42.308: D/SensorManager(13254): unregisterListener::  Listener=     
android.view.OrientationEventListener$SensorEventListenerImpl@4243e698
03-26 11:56:42.308: D/Sensors(13254): Remain listener = Sending .. normal delay 200ms
03-26 11:56:42.308: I/Sensors(13254): sendDelay --- 200000000
03-26 11:56:42.308: D/SensorManager(13254): JNI - sendDelay
03-26 11:56:42.308: I/SensorManager(13254): Set normal delay = true
03-26 11:56:42.333: D/SensorManager(13254): registerListener :: handle = 0  name=    
LSM330DLC 3-axis Accelerometer delay= 200000 Listener=   
android.view.OrientationEventListener$SensorEventListenerImpl@4243e698
03-26 11:56:43.808: D/SensorManager(13254): registerListener :: handle = 0  name=   
LSM330DLC 3-axis Accelerometer delay= 200000 Listener= 
android.view.OrientationEventListener$SensorEventListenerImpl@42474b30
03-26 11:56:43.823: D/dalvikvm(13254): GC_CONCURRENT freed 119K, 7% free 12450K/13319K, 
paused 2ms+2ms, total 21ms
03-26 11:56:43.823: D/dalvikvm(13254): WAIT_FOR_CONCURRENT_GC blocked 6ms
03-26 11:56:43.843: D/SensorManager(13254): unregisterListener::  Listener=   
android.view.OrientationEventListener$SensorEventListenerImpl@42474b30
03-26 11:56:43.843: I/SensorManager(13254): Set min delay = 200000
03-26 11:56:43.843: I/SensorManager(13254): Before sending... delay = 200000
03-26 11:56:43.843: D/Sensors(13254): Remain listener = 
android.view.OrientationEventListener$SensorEventListenerImpl@4243e698
03-26 11:56:43.843: I/Sensors(13254): sendDelay --- 200000000
03-26 11:56:43.843: D/SensorManager(13254): JNI - sendDelay
03-26 11:56:43.848: D/SensorManager(13254): unregisterListener::  Listener= 
android.view.OrientationEventListener$SensorEventListenerImpl@4243e698
03-26 11:56:43.848: D/Sensors(13254): Remain listener = Sending .. normal delay 200ms
03-26 11:56:43.848: I/Sensors(13254): sendDelay --- 200000000
03-26 11:56:43.848: D/SensorManager(13254): JNI - sendDelay
03-26 11:56:43.848: I/SensorManager(13254): Set normal delay = true
03-26 11:56:43.873: D/SensorManager(13254): registerListener :: handle = 0  name= 
LSM330DLC 3-axis Accelerometer delay= 200000 Listener= 
android.view.OrientationEventListener$SensorEventListenerImpl@42474b30
03-26 11:56:44.003: W/IInputConnectionWrapper(13254): getSelectedText on inactive 
InputConnection
03-26 11:56:44.003: W/IInputConnectionWrapper(13254): setComposingText on inactive 
InputConnection
03-26 11:56:44.003: W/IInputConnectionWrapper(13254): getExtractedText on inactive 
InputConnection
03-26 11:56:45.658: D/AbsListView(13254): Get MotionRecognitionManager
03-26 11:56:45.673: D/AndroidRuntime(13254): Shutting down VM
03-26 11:56:45.673: W/dalvikvm(13254): threadid=1: thread exiting with uncaught   
exception (group=0x417922a0)
03-26 11:56:45.678: E/AndroidRuntime(13254): FATAL EXCEPTION: main
03-26 11:56:45.678: E/AndroidRuntime(13254): java.lang.RuntimeException: Unable to 
start activity 
ComponentInfo{cs306.hw2.database/cs306.hw2.database.SearchResultsActivity}:    
java.lang.NullPointerException 03-26 11:56:45.678: E/AndroidRuntime(13254):     at 
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
03-26 11:56:45.678: E/AndroidRuntime(13254):    at 
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-26 11:56:45.678: E/AndroidRuntime(13254):    at 
android.app.ActivityThread.access$600(ActivityThread.java:140)
03-26 11:56:45.678: E/AndroidRuntime(13254):    at 
android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-26 11:56:45.678: E/AndroidRuntime(13254):    at 
android.os.Handler.dispatchMessage(Handler.java:99)
03-26 11:56:45.678: E/AndroidRuntime(13254):    at 
android.os.Looper.loop(Looper.java:137)
03-26 11:56:45.678: E/AndroidRuntime(13254):    at 
android.app.ActivityThread.main(ActivityThread.java:4898)
03-26 11:56:45.678: E/AndroidRuntime(13254):    at 
java.lang.reflect.Method.invokeNative(Native Method)
03-26 11:56:45.678: E/AndroidRuntime(13254):    at 
java.lang.reflect.Method.invoke(Method.java:511)
03-26 11:56:45.678: E/AndroidRuntime(13254):    at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-26 11:56:45.678: E/AndroidRuntime(13254):    at 
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-26 11:56:45.678: E/AndroidRuntime(13254):    at 
dalvik.system.NativeStart.main(Native   Method)
03-26 11:56:45.678: E/AndroidRuntime(13254): Caused by: java.lang.NullPointerException
03-26 11:56:45.678: E/AndroidRuntime(13254):    at     
s306.hw2.database.SearchResultsActivity.getSearchResults(SearchResultsActivity.java:34)
03-26 11:56:45.678: E/AndroidRuntime(13254):    at 
cs306.hw2.database.SearchResultsActivity.onCreate(SearchResultsActivity.java:27)
03-26 11:56:45.678: E/AndroidRuntime(13254):    at  
android.app.Activity.performCreate(Activity.java:5206)
03-26 11:56:45.678: E/AndroidRuntime(13254):    at 
android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
03-26 11:56:45.678: E/AndroidRuntime(13254):    at 
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
03-26 11:56:45.678: E/AndroidRuntime(13254):    ... 11 more 
```

这是布局文件

```
 <ListView
        android:id="@+id/contactcListView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:49:03.607

这条线对我来说似乎是个问题：

```
 listview = (ListView)findViewById(R.id.contactcListView); 
```

什么是“contactcListView”？我没有看到任何地方宣布这样的事情。

NPE 是最容易解决的问题之一。堆栈跟踪告诉您它发生的文件和行号。您所要做的就是找出哪个引用为空以及为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:49:10.380

没有

```
view = (TextView) findViewById(R.id.textView1); 
```

在您定义的布局 xml 中。 `view`必须为空。

我认为你在这里得到了 NPE：

```
Cursor c = db.getContactbyName(view.getText().toString()); 
```

请尝试一下：

```
<ListView
    android:id="@+id/contactcListView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
<TextView android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
 android:id="@+id/textView1"/>
</ListView>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:52:32.053

打开 ddms 预期并运行应用程序

复制日志

# vb.net - 是否有一种方法可以克隆 DateTime 值，该值与原始值具有相同的日期但小时和分钟不同？

> ID：15633816
> 
> 赞同：0
> 
> 时间：2013-03-26T09:44:50.620
> 
> 标签：vb.net, datetime, clone

我在数据库中存储了小时和分钟的时间值。我想用它们来创建一个时期；“开始时间”和“结束时间”。两个时间都有相同的日期，但不同的小时和分钟。这是我现在用来将开始时间属性复制到结束时间的代码。

```
Dim endTime As New DateTime(startTime.Year, startTime.Month, startTime.Day, endHour, endMinute, 0) 
```

（endHour 和 endMinute 是结束时间的**精确**小时和分钟属性）

我只是想知道是否有比这更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:48:35.053

这仅获取年、月和日，`startTime`其余部分为默认值：

```
Dim endTime As Date = startTime.Date 
```

然后你可以按照你想要的方式添加你需要的其余值，例如：

```
endTime = endTime.AddHours(endHour)
endTime = endTime.AddMinutes(endMinute) 
```

[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)

在一行中，您可以执行以下操作：

```
Dim endTime As Date = startTime.Date.AddHours(endHour).AddMinutes(endMinute) 
```

甚至：

```
Dim endTime As Date = startTime.Date.AddMinutes(endHour * 60 + endMinute) 
```

但是你的方法也很好，强硬。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:48:49.923

为什么你不使用：

[DateTime.AddHours 方法](http://msdn.microsoft.com/en-IN/library/system.datetime.addhours.aspx)

[DateTime.AddMinutes 方法](http://msdn.microsoft.com/en-IN/library/system.datetime.addminutes.aspx)

获得“结束日期时间”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:49:22.920

```
Dim endTime As Date = startTime.Date.AddHours(endHour).AddMinutes(endMinute) 
```

我不确定它是否更具可读性或以任何其他方式更好，但也许你会发现它更好。

# hibernate - 使用 Hibernate 登录并记录存储用户名

> ID：15633818
> 
> 赞同：0
> 
> 时间：2013-03-26T09:44:57.523
> 
> 标签：hibernate, jsf, jakarta-ee, tomcat

我正在开发一个简单的项目云，登录后的注册用户可以在其中下载和上传文件。我正在使用 Eclipse Java EE、JSF 和 Hibernate 进行开发。在我的项目中，我可以登录用户，如果数据正确，我会打开用户菜单，但不知道在哪里存储有关登录用户的信息。目前还不清楚会话的概念。我已经阅读了一些关于 Hibernate 和会话的内容，但我还不明白。我至少需要保留当前登录用户的用户名，使用什么对象？在哪里？你可以帮帮我吗？谢谢

```
@ManagedBean
@SessionScoped
public class Login {

private String userId;
private String password;

public Login() {}

public String getUserId() {
    return userId;
}
public void setUserId(String userId) {
    this.userId = userId;
}
public String getPassword() {
    return password;
}
public void setPassword(String password) {
    this.password = password;
}

public String loginUser (){
    SessionHandler s = new SessionHandler();
    Session sessione = s.getDb();
    sessione.beginTransaction();
    Query query = sessione.createQuery( "Select password from Utenti where username= :id" );
    System.out.println("Qui lo prende: " + this.getUserId());
    query.setParameter("id", userId);
    System.out.println("tag debug");
    List<Utenti> res= query.list();
    if(password.equals(res.get(0))){
        this.setUserId(userId);
        return "first";

    }
    else
        return "noaccess";
} 
```

我需要在 TreeBean 中使用用户 ID。这是我的树豆：

```
@ManagedBean
@SessionScoped
public class TreeBean {

@ManagedProperty(value="#{login.userId}")
private String user;

private TreeNode root;
private TreeNode selectedNode;
private Session db;

public Session getDb() {
    return db;
}

public void setDb(Session db) {
    this.db = db;
}

public void setUser(String user) {
    this.user = user;
}

public String getUser(){
    return user;
}

public TreeBean() {  
    root=new DefaultTreeNode("Root", null);
    System.out.println("Prova"+ user);
    recursive(0, root);

} 
```

在 .xhtml 文件中可以毫无问题地读取用户 ID。为什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:12:50.657

您需要创建一个会话范围的 ManagedBean。登录时，您在该 ManagedBean 中设置用户对象（您从 DB 获得）。然后，您将能够通过所有应用程序访问它。

另一种方法是直接在会话中设置用户对象：

```
ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
Map<String, Object> sessionMap = externalContext.getSessionMap(); 
```

接着：

```
sessionMap.put("attributeName", whateverYouWantToSaveInSession); 
```

但我会选择第一种方法。

# android - 将 base 64 字符串传递给 SOAP 时发生 MemoryOutOfBounds 异常

> ID：15633819
> 
> 赞同：0
> 
> 时间：2013-03-26T09:44:59.900
> 
> 标签：android, out-of-memory

我的应用程序在 Sony Experia (2.3) 上成功运行，但在三星 Galaxy Tab (4.1) 上运行时出现异常。我的问题是，在录制视频并将其转换为 base64 字符串后，在将其解析为肥皂时出现错误。

这是我捕获视频的代码（传递意图）：

```
Intent videoIntent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);

videoIntent.putExtra(MediaStore.EXTRA_DURATION_LIMIT, 10);

videoIntent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 0);

startActivityForResult(videoIntent, ACTION_TAKE_VIDEO); 
```

关于活动结果方法：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
super.onActivityResult(requestCode, resultCode, data);

if ((requestCode == ACTION_TAKE_VIDEO && resultCode == RESULT_OK)) {
System.out.println("capturing video");
Uri selectedImage = data.getData();
String videoPath = getRealPathFromURI(selectedImage);

Bitmap bm = ThumbnailUtils.createVideoThumbnail(videoPath, MediaStore.Images.Thumbnails.MINI_KIND);
videoview.setImageBitmap(bm);
System.out.println("videobitmap=="+bm);

bytes[]datas = null;
String dataPath = videoPath;
InputStream is = null;

try {
is = new FileInputStream(dataPath);
datas = readBytes(is);
} catch (FileNotFoundException e) {
e.printStackTrace();
} catch (IOException e) {
e.printStackTrace();
}

String encodedImage = Base64.encodeToString(datas, Base64.DEFAULT);
isInternetPresent = cd.isConnectingToInternet();

if (isInternetPresent) {
new BufferingVideo().execute(encodedImage);
} else {
Toast.makeText(getApplicationContext(), "Sorry, we couldn't connect to server, please check your 
internet connection", Toast.LENGTH_LONG).show();
}
}
}

public byte[] readBytes(InputStream inputStream) throws IOException {
ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();
int bufferSize = 1024;
byte[] buffer = new byte[bufferSize];
int len = 0;

while ((len = inputStream.read(buffer)) != -1) {
byteBuffer.write(buffer, 0, len);
}

return byteBuffer.toByteArray();
}

public String getRealPathFromURI(Uri contentUri) {
String[] proj = { MediaStore.Images.Media.DATA };
Cursor cursor = managedQuery(contentUri, proj, null, null, null);
int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
cursor.moveToFirst();
return cursor.getString(column_index);
} 
```

现在将 base64 字符串传递给 Webservice：

```
protected String doInBackground(String... params) {
String st = params[0];
System.out.println("st==== " + st);

SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME4);

System.err.println("Request  = " + request);
request.addProperty("VideoBuffer", st);
request.addProperty("VideoName", "VideoCar");
request.addProperty("ModuleName", modulename);
} 
```

我的 Logcat 错误是：

```
致命异常：AsyncTask #5
java.lang.RuntimeException：执行 doInBackground() 时发生错误
  在 android.os.AsyncTask$3.done(AsyncTask.java:299)
  在 java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
  在 java.util.concurrent.FutureTask.setException(FutureTask.java:124)
  在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
  在 java.util.concurrent.FutureTask.run(FutureTask.java:137)
  在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
  在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
  在 java.lang.Thread.run(Thread.java:856)
  引起：java.lang.OutOfMemoryError
  在 java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:94)
  在 java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:145)
  在 java.lang.StringBuffer.append(StringBuffer.java:219)
  在 org.ksoap2.serialization.SoapObject.toString(SoapObject.java:456)
  在 java.lang.StringBuilder.append(StringBuilder.java:202)
  在 web.org.HouseRentInsertAds$BufferingVideo.doInBackground（HouseRentInsertAds.java:897）
  在 web.org.HouseRentInsertAds$BufferingVideo.doInBackground(HouseRentInsertAds.java:1)
  在 android.os.AsyncTask$2.call(AsyncTask.java:287)
  在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)

```

请给我一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:58:30.553

在将整个图像发送到服务器之前，您必须压缩图像。

公开

```
String String_Image; 
Bitmap bitmap; 
```

这里解码图像并将压缩图像发送到服务器的过程

```
File image_file = new File(path);
decodeFile(image_file);         
ByteArrayOutputStream bao = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.JPEG, 90, bao);
byte[] ba = bao.toByteArray();
String_Image = Base64.encodeBytes(ba); 
```

`decodeFile()`函数将解码您的文件。

```
private Bitmap decodeFile(File f)
    {
        try
        {
            // Decodes image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);

            // The new size to scale to
            final int REQUIRED_SIZE = 70;

            // Finds the correct scale value which should be the power of 2.
            int scale = 1;
            while (o.outWidth / scale / 2 >= REQUIRED_SIZE
                    && o.outHeight / scale / 2 >= REQUIRED_SIZE)
                scale *= 2;

            // Decodes with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            bitmap = BitmapFactory.decodeStream(new FileInputStream(f), null,
                    o2);
            return bitmap;
        } catch (FileNotFoundException e)
        {
        }
        return null;
    } 
```

发送`String_Image`到服务器。

此代码适用于图像，但同样适用于其他代码。尝试进行一些更改。

希望它会奏效。

# objective-c - 如何强制重新加载表格视图？表格视图附件按钮和表格视图单元格名称不改变颜色

> ID：15633820
> 
> 赞同：0
> 
> 时间：2013-03-26T09:45:00.103
> 
> 标签：objective-c, uitableview

我改变了`UITableViewCell`标签的颜色并做了`reload`tableview

```
[m_cEntityView reloadData];

[m_cEntityView selectRowAtIndexPath:self.m_cSelectdPath animated:NO scrollPosition:UITableViewScrollPositionNone]; 
```

但是重新加载需要很长时间`UITableView`，有时它不显示`accessory button`，它在 iPad 中`Rootview controller`。请帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:56:04.867

使用以下方法，您可以更新表中的整个部分，给定的代码将更新第 0 部分

```
[tblViewPortfolio beginUpdates];
[tblViewPortfolio reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationNone];
[tblViewPortfolio endUpdates]; 
```

# oracle - 为现有表分配序列号

> ID：15633822
> 
> 赞同：0
> 
> 时间：2013-03-26T09:45:11.027
> 
> 标签：oracle, oracle11g

我想将序列号作为新列插入到现有表中。能不能给个更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:56:31.733

您可以添加新列，使用...更新它

```
 update my_table set my_new_column = rownum 
```

...然后创建一个以（您刚刚插入的最大数量加一）开头的序列以继续新行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:31:49.863

样品表：

```
create table foo (some_data varchar(20));
insert into foo (some_data) values ('foo');
insert into foo (some_data) values ('bar');
insert into foo (some_data) values ('foobar');
insert into foo (some_data) values ('barfoo');
commit; 
```

添加一个新列：

```
alter table foo add (id integer); 
```

现在创建一个新序列来填充`id`列：

```
create sequence foo_seq; 
```

使用序列更新新列：

```
update foo set id = foo_seq.nextval; 
```

# jquery - 数据解析有问题

> ID：15633823
> 
> 赞同：0
> 
> 时间：2013-03-26T09:45:14.037
> 
> 标签：jquery, asp.net-mvc, knockout.js, coffeescript

我在服务器上解析数据时遇到了一些问题。这是我的 json 数据

```
ajax = (in_url,in_data,in_succes)->
    _url = in_url
    _data = in_data
    _success = in_succes
    #_error = in_error
    $.ajax
            type: "GET"
            url: _url
            data: _data
            dataType:"json"
            contentType:"json"
            success:_success
saveNewComplex:->
        data = ko.toJS model.complex
        ajax "/Complex/SaveNewComplex",data, () -> alert "Success"
        @getAllComplex() 
```

还有我的服务器端代码

```
public ActionResult SaveNewComplex(string complexName, string complexDescript,  List<string> complexItems)
        {
            var temp = complexItems;
            return null;
        } 
```

![JSON数据](../Images/17ce611ee9949a220fcedc44987050e1.png)

这是一张在所有数组成员奇怪的方括号之后带有查询参数的图片 - 也许这是主要问题？ ![在此处输入图像描述](../Images/91453ddbb01ceec64c062f4c77d56561.png)

服务器上的奇怪结果 - 全部为空。

![在此处输入图像描述](../Images/78e865ae26f875391fda7abc6815ca1e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:59:14.550

如果我没有错，那么您正试图发送`array`到您的`MVC controller`. 如果是这种情况，您应该首先在客户端对数组进行字符串化，然后将字符串发送到服务器，然后在服务器上反序列化字符串以获取数组，您应该执行以下操作：

**JS**

```
$.ajax({
url: 'your url',
type: 'POST',
data: ko.toJSON(yourArray)
}); 
```

**在服务器上**

```
public ActionResult SaveNewComplex(string yourArrayString)
{
       var temp = Newtonsoft.Json.JsonConvert.DeserializeObject(yourArrayString);      
       //temp contains your array
} 
```

# image - 如何选择结构元素？

> ID：15633825
> 
> 赞同：2
> 
> 时间：2013-03-26T09:45:19.603
> 
> 标签：image, matlab, image-processing, matrix, morphological-analysis

我是图像处理和相关领域的新手。我想弄清楚如何为形态学操作选择结构元素（strel）？例如：我想放大一个二值图像，`Matlab`但我不确定`strel`选择哪个。事实证明这真的很困难，因为我不清楚时使用哪个。**我基本上是在处理大量视频帧，并且算法要求在二值化后对每个帧进行膨胀**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:20:39.213

我建议你使用 SE = strel('disk', R, N); R 取决于你的图像大小和你的目的，N 是邻域，通常是 4 或 8。但是尝试不同的 strel 元素并不难，你可以尝试所有并决定最适合自己的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:55:10.577

膨胀时，结构元素的形状是单个孤立像素将转换成的形状。

您选择哪种形状很大程度上取决于您正在扩张的特征类型。例如，如果您扩展与图像轴对齐的矩形，您将需要使用正方形，以便保留尖角。相反，如果形状是任意且平滑的，则需要使用圆形 ( `disk`)，依此类推。[这是我使用矩形结构元素](https://dsp.stackexchange.com/questions/374/river-detection-in-text/375#375)的示例。

# php - 在 PHP 中带有标头位置重定向的 Cron 作业

> ID：15633829
> 
> 赞同：1
> 
> 时间：2013-03-26T09:45:25.930
> 
> 标签：php, header, include, cron, absolute-path

`header`我有一个使用 php函数多次加载同一个文件的 cron 作业

该脚本在从浏览器运行时运行良好，但是当使其成为 cron 时，我遇到了一些问题。

代码如下。我的文件鬃毛是`sample.php`

```
<?php
$id = $_request['id'];
if($id==""){
$id=0;
}
header("Location:sample.php?id=$id");    
?> 
```

但是标题对我不起作用。

我已经改变了我的编码格式

```
$base = dirname(dirname(__FILE__)); // now $base contains "app"

header("Location:".$base."?id=$id"); 
```

但它也不起作用。

我只收到我的 Cron 确认邮件。但邮件包含错误。

我的邮件如下

```
Status: 302 Moved Temporarily
X-Powered-By: PHP/5.3.21
Set-Cookie: PHPSESSID=ce4d2ee31140477510bfc780c6d0ce48; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Location:/home/xxxxxx/public_html/admin/xxxx.php 
```

任何人指导我。我如何设置这种类型的 cron 作业

我如何在我的 cron 文件中重定向。因为我正在加载大尺寸的数据馈送文件。所以只有我在问

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:49:59.370

玉米作为控制台运行不作为浏览器运行你不能发送玉米的标题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:51:05.250

如果您想在 cronjob 中使用 PHP 运行外部脚本，请查看 curl。[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T09:52:03.770

正如其他人所说，您的 cron 没有标头的概念，它只是运行脚本。

如果您希望能够做这样的事情，那么请考虑使用[Lynx](http://linux.die.net/man/1/lynx) - 它允许您调用您的`cron`> `lynx`> `website`。如果您想要 PHP 解决方案，也可以查看 curl。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T09:48:50.777

如果您使用 cron 选项卡运行脚本，则无法发送标头。crontab 在控制台而不是在浏览器中运行，因此使用 crontab 发送标头没有任何意义。

# iphone - 如何实现 1.0 缩放比例的卡顿效果？

> ID：15633830
> 
> 赞同：0
> 
> 时间：2013-03-26T09:45:26.057
> 
> 标签：iphone, uiscrollview

如何实现 1.0 缩放比例的卡顿效果？

我想帮助我的应用程序的用户确定他们何时查看 1.0 zoomScale 中的内容。

为了实现这一点，我想在当前 zoomScale 大约为 1.0 时（例如：在 0.75 和 1.25 之间）自动将 UIScrollView 的 zoomScale 设置为 1.0。

（当然，在提到自动缩放缩放设置之后，我仍然希望我的 UIScrollView 的缩放缩放能够设置为介于最小缩放缩放和最大值缩放缩放之间的任何缩放缩放。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:11:46.313

我已经使用 pinchGestureRecognizer 的速度完成了这项工作。这样，除非用户“更努力”地缩放，否则它将“坚持”在 1.0。也许这样的事情会为你工作：

```
-(void)scrollViewDidZoom:(UIScrollView *)scrollView{
    if (scrollView.zoomScale >= 0.75 && scrollView.zoomScale <= 1.25) {
        if (fabs(scrollView.pinchGestureRecognizer.velocity) < velocityTolerance) {
            scrollView.zoomScale = 1.0;
        }
    }
} 
```

我发现我需要稍微调整一下，以便对放大和缩小有不同的容忍度。也许从 5.0 作为公差开始，看看感觉如何。

# java - jFreeChart。组合图表错误中子图的高度？

> ID：15633831
> 
> 赞同：1
> 
> 时间：2013-03-26T09:45:27.840
> 
> 标签：java, jfreechart

我正在使用 jFreeChart 来显示这种图： ![图表示例](../Images/cada53a06dd9fc831088c9c2501d2f70.png)

好吧，问题是当程序在高度大于 800 像素的监视器上运行时，没有正确绘制暗阴影和 45 虚线。

我发现问题是由返回的错误值引起的：

```
chartPanel.getChartRenderingInfo().getPlotInfo().getSubplotInfo(0).getDataArea() 
```

dataArea 不正确，高度错误，因此阴影未绘制在预期的位置。但这只发生在将窗口大小调整到~800px 高度以上时。

我已经设法用一个小的 SSCCE 重现了这个错误（需要 jcommon 和 jfreechart）：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Font;
import java.awt.event.ComponentEvent;
import java.awt.event.ComponentListener;
import java.awt.geom.Rectangle2D;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;

import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.plot.CombinedDomainXYPlot;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYItemRenderer;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.data.time.TimeSeriesCollection;
import org.jfree.ui.RectangleEdge;
import org.jfree.ui.RectangleInsets;

public class Window extends JFrame implements ComponentListener {
    private static final long serialVersionUID = 1L;
    private JPanel contentPane;
    private XYPlot subplotTop;
    private XYPlot subplotBottom;
    private CombinedDomainXYPlot plot;
    private JFreeChart chart;
    private ChartPanel chartPanel;
    private JLabel label;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    Window frame = new Window();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public Window() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 700, 500);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        JPanel example = new JPanel();
        label = new JLabel("Resize this window (do not use the \"maximize\" button");
        example.add( label );
        contentPane.add( example, BorderLayout.NORTH );

        createTopChart();
        createBottomChart();
        createCombinedChart();
        chartPanel = new ChartPanel(chart);
        this.add(chartPanel, BorderLayout.CENTER);

        //window resize listener
        this.addComponentListener(this);
    }

    private void createTopChart() {
        subplotTop = new XYPlot();
        subplotTop.setDomainPannable(true);
        subplotTop.setBackgroundPaint(Color.lightGray);
        subplotTop.setDomainGridlinePaint(Color.white);
        subplotTop.setRangeGridlinePaint(Color.white);

        XYItemRenderer renderer = new XYLineAndShapeRenderer(true, false);
        subplotTop.setRenderer(renderer);

        NumberAxis range = new NumberAxis("dBA");
        range.setRange(30, 120);
        range.setAutoRange(false);
        subplotTop.setRangeAxis(range);

        TimeSeriesCollection dataset_L = randomDataset(30,120);
        subplotTop.setDataset(dataset_L);
    }

    private void createBottomChart(){
        subplotBottom = new XYPlot();
        subplotBottom.setDomainPannable(true);
        subplotBottom.setBackgroundPaint(Color.lightGray);
        subplotBottom.setDomainGridlinePaint(Color.white);
        subplotBottom.setRangeGridlinePaint(Color.white);

        XYItemRenderer renderer = new XYLineAndShapeRenderer(true, false);
        subplotBottom.setRenderer(renderer);

        NumberAxis range = new NumberAxis("%");
        range.setRange(-10, 100);
        range.setAutoRange(false);
        subplotBottom.setRangeAxis(range);

        TimeSeriesCollection dataset_P = randomDataset(0,100);
        subplotBottom.setDataset(dataset_P);
    }

    private void createCombinedChart() {    
        plot = new CombinedDomainXYPlot();
        plot.setGap(30);
        plot.add(subplotTop, 4);
        plot.add(subplotBottom, 1);
        plot.setOrientation(PlotOrientation.VERTICAL);

        chart = new JFreeChart("Title", new Font("Arial", Font.BOLD, 18), plot, true);
        chart.getLegend().setVisible(false);
        chart.getLegend().setPosition(RectangleEdge.RIGHT);
        chart.getTitle().setMargin(new RectangleInsets(15,5,15,5));
        chart.getTitle().setPaint(Color.BLACK);
    }

    private TimeSeriesCollection randomDataset(float min, float max) {
        return null;
    }

    private void showAreas() {
        Rectangle2D screenDataAreaChartPanel = this.chartPanel.getScreenDataArea();
        System.out.println("screenDataAreaChartPanel: "+screenDataAreaChartPanel);

        Rectangle2D plotArea = this.chartPanel.getChartRenderingInfo().getPlotInfo().getPlotArea();
        System.out.println("getPlotArea: "+plotArea.toString());

        Rectangle2D dataAreaPlot = this.chartPanel.getChartRenderingInfo().getPlotInfo().getDataArea();
        System.out.println("getDataArea: "+dataAreaPlot.toString());

        Rectangle2D dataAreaSubplotTop = this.chartPanel.getChartRenderingInfo().getPlotInfo().getSubplotInfo(0).getDataArea();
        Rectangle2D dataAreaSubplotBottom = this.chartPanel.getChartRenderingInfo().getPlotInfo().getSubplotInfo(1).getDataArea();
        System.out.println("dataAreaSubplotTop: "+dataAreaSubplotTop.toString());
        System.out.println("dataAreaSubplotBottom: "+dataAreaSubplotBottom.toString());

        System.out.println();

        label.setText("ScreenDataArea.height="+Math.round(screenDataAreaChartPanel.getHeight())+
                ". SubPlotTop.heigth="+Math.round(dataAreaSubplotTop.getHeight())+
                ". SubPlotBottom.heigth="+Math.round(dataAreaSubplotBottom.getHeight()));
        repaint();
    }

    @Override
    public void componentHidden(ComponentEvent e) {}

    @Override
    public void componentMoved(ComponentEvent e) { }

    @Override
    public void componentResized(ComponentEvent e) {
        chartPanel.repaint();
        chartPanel.revalidate();
        this.repaint();
        showAreas();
    }

    @Override
    public void componentShown(ComponentEvent e) { }
} 
```

我使用过 jfreechart v1.0.14 和 jcommon v1.0.18。在示例中，图表上方有三个值。你会看到三个值随着窗口变大而增长，但在大约 800 像素高度时，第一个值会继续增长，而其他值不会。为什么？
如果您没有大屏幕分辨率，您可能不会看到错误，因为它发生在我身上。

难道我做错了什么？那是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:33:46.677

几点注意事项：

*   您可能正在寻找`org.jfree.chart.annotations`“在数据空间中指定坐标”的其中一个；[这里](https://stackoverflow.com/a/6802375/230513)有几个例子。

*   A`JFreeChart`不是一个组件；a`ChartPanel`是一个组件，它重新绘制面板以响应各种图表事件；a`ComponentListener`很少保证。

*   不要使用`setBounds()`; 相反，`pack()`封闭的`Window`; 如果默认值不令人满意`getPreferredSize()`，则覆盖。`ChartPanel`

*   *仅*在[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构造和操作 Swing GUI 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-09T17:55:05.200

我自己也有类似的问题。

该问题似乎源于图表面板限制了其默认最大大小，导致子图数据区域停止正确更新。

增加最大高度/宽度应该可以解决您的问题。

```
panel.setMaximumHeight(2000);
panel.setMaximumSize(1500); 
```

有关更多信息，请参阅此错误帖子。 [http://sourceforge.net/p/jfreechart/bugs/911/](http://sourceforge.net/p/jfreechart/bugs/911/)

# java - 无法完成正则表达式模式

> ID：15633832
> 
> 赞同：0
> 
> 时间：2013-03-26T09:45:28.607
> 
> 标签：java, regex

需要修复正则表达式以匹配任何尺寸组合（**宽度 x 高度 x 深度'半径**）：例如
`'100`
`100`或`100'100`
`100x100`或`100x100'100`
`100x100x100`或`100x100x100'100`

```
 checkField = "x1";
    String r = "\\d{0,4}(x\\d{1,4}){0,2}('\\d{1,4})?";
    Pattern p = Pattern.compile(r);
    Matcher m = p.matcher(checkField);
    String a = String.valueOf(m.matches());
    if (m.matches()) {
        infoBox(checkField, a);
    } else {
        errorBox(checkField, a);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:49:26.010

我认为这应该有效：

```
"^(\\d{1,4}(x\\d{1,4}){0,2})?('\\d{1,4})?$" 
```

该表达式接受 AxBxC 形式的（可选）字符串（具有 1、2 或 3 个坐标），后跟 'D 形式的可选字符串。

由于这两个字符串都是可选的，因此您还应该检查该字符串是否为空。

# java - 通过 Apache POI 将日期值保存到 mySql 数据库中

> ID：15633834
> 
> 赞同：1
> 
> 时间：2013-03-26T09:45:31.517
> 
> 标签：java, mysql, date, jpa, apache-poi

我正在使用 Apache POI 读取 excel 数据集和 JPA 以持久保存到数据库中。这工作正常，除了我需要使用相同的方法将一组日期/时间值正确地输入数据库（使用 apache poi 读取，然后持久保存到数据库中）。目前我正在使用 SimpleDateFormat 这真的没有任何用处。我们需要查询此列，因此我需要在数据库中理想地使用 mySQL 日期。

**时间/日期列的数据集示例**

21/10/2012 13:20:00

**爪哇**

```
 Sheet sheet1 = wb.getSheetAt(0);

        String dateTimeFormat = "dd/MM/yyyy HH:mm:ss";
        SimpleDateFormat dateFormat = new SimpleDateFormat(dateTimeFormat);

        for (int i = 1; i <= sheet1 .getLastRowNum(); i++) {

            row = sheet1 .getRow(i);
            String sheet1Id = i+"";

            double excelDateTime = row.getCell(0).getNumericCellValue();
            Date javaDateTime=HSSFDateUtil.getJavaDate(excelDateTime,false);
            String dateTime = dateFormat.format(javaDateTime);

            Table1 sheet1=new Table1 (sheet1Id ,dateTime)
            addToDatabase(table1); 

        } 
```

对此有何解决方案以及有关在 mySQL 数据库中创建此列的最佳方法的任何建议（该列目前是 varchar）？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:12:13.600

使用 JPA/JDBC 时，java.util.Date 对应于 DATETIME 列（或 TIMESTAMP 或 DATE，请参阅[MySQL 手册](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)以了解它们的细微差别）。由于您已经直接从 获取 Date 对象`HSSFDateUtil`，因此您不需要任何进一步的转换。

PS：为什么不[`HSSFCell.getDateCellValue()`](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFCell.html#getDateCellValue%28%29)直接使用呢？

# sql - SQL将两个表连接在一起，其中值在两行之间，你得到第一行

> ID：15633835
> 
> 赞同：0
> 
> 时间：2013-03-26T09:45:32.210
> 
> 标签：sql, oracle

表 LSF

```
ID  LID     FV      TYPE            
28  22      1       INCREMENTAL     
29  22      5       FULL 
```

表LFG

```
ID  WHAT    WHERE   TYPE
22  V1      4444    WHITE 
```

ID 是主键并且是两个表上的序列。

现在我想连接这两个表

```
SELECT LFG.* FROM LSF sf, LFG fg WHERE sf.LID = fg.ID AND ... 
```

我想从 LSF 表中获取第一行。但是是空的。

如果 SELECT 语句中的 sf.FV 为 1、2、3 或 4，则返回第一行，如果为 5 或更多，则返回表 LSF 的第 2 行。如何写这样的选择？

编辑：

我想要的是？

在表 LSF FV 中，表示从什么时候开始是增量或满的。如果我有版本 1 是 INCREMENTAl，则版本 2、3 或 4 相同。但如果我有版本 5 或更高版本，则为 FULL。

现在我的问题是我没有将每个版本存储在表中，我只是说从这里是增量的，从这里是完整的。我的问题是当我有版本 3 时如何为此编写一个选择语句，如何知道这是从 1 到 5，这意味着增量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:15:36.737

```
SELECT FG.* FROM LSF sf, LFG fg WHERE sf.LID = fg.ID AND sf.fv = (SELECT MAX(fv) FROM LSF WHERE fv<=3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:21:14.310

`...and somehow include sf.FV=3`

```
 SELECT LFG.* FROM LSF sf, LFG fg WHERE sf.LID = fg.ID AND ...
   and I want to get first row from LSF table. But is empty. 
```

从连接中涉及的表中*单独*选择所需的列。

```
 select t1.someDate, t1.description, t2.blahblah, t2.someOtherColumn
         from 
         foo as T1
         inner join widget as T2
         on T1.orange = T2.banana 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:14:25.117

试试这个查询

```
SELECT 
  b.*, a.* 
FROM 
  LSF ls,
  LFG b, 
  (SELECT 
     lid, 
     min(ID) as id 
  FROM 
     LSF 
  GROUP BY 
     lid) a
WHERE 
  a.lid = b.id AND a.id = ls.id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T10:11:41.247

试一试，看看你是否得到了你想要的东西。它应该返回与为 FV 设置了 1、2、3 或 4 的 LID 匹配的最新版本。

```
SELECT LFG.* 
FROM LSF sf, LFG fg 
WHERE sf.LID = fg.ID 
AND sf.FV >= 1 
AND sf.FV < 5
ORDER BY sf.FV DESC; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T10:15:38.437

尝试这个 ：）

```
SELECT LFG.* 
FROM LSF sf, LFG fg 
WHERE sf.LID = fg.ID 
AND sf.Type='INCREMENTAL'
ORDER BY sf.Type DESC; 
```

# android - ExpandabeListview 自定义 ID

> ID：15633838
> 
> 赞同：0
> 
> 时间：2013-03-26T09:45:39.053
> 
> 标签：android, expandablelistview, expandablelistadapter

您可以为组和孩子设置自定义ID吗？我有我自己的身份证需要使用。所以每个组都有自己的 id 并且我有自己的 id ？

我知道使用 ListView 适配器可以做到这一点：

```
@Override
public HashMap getItem(int position) {
    return (HashMap) mItems.get(position);
} 
```

一旦用户选择或展开组，我需要跟踪展开的组，以便我可以将此数据发送回 Web 服务器 api。

# python - Python 模式反面看

> ID：15633839
> 
> 赞同：2
> 
> 时间：2013-03-26T09:45:39.357
> 
> 标签：python, regex, pattern-matching, negative-lookbehind

我试图找出与文件路径字符串匹配的正则表达式模式，其中名为“cmd.exe”的文件不位于“System32”文件夹或其任何子文件夹中。

模式应与此匹配：

```
C:\Tools\calc.exe 
```

但不是这个：

```
C:\Windows\System32\calc.exe
C:\Windows\System32\De-de\calc.exe 
```

我尝试了负面的看法：

```
(?<![Ss]ystem32)\\calc\.exe
(?<![Ss]ystem32).*\\calc\.exe
(?<![Ss]ystem32[.*])\\calc\.exe 
```

但到目前为止没有任何效果。有人看到我的错误吗？

您可以在这里查看我的示例并自己尝试一下： [http ://rubular.com/r/syAoEn7xxx](http://rubular.com/r/syAoEn7xxx)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T10:02:46.213

要回答问题的正则表达式方面，问题是`re`不支持可变长度的lookbehinds：

```
rx = r'(?<!System32.*)calc.exe'
re.search(rx, r'C:\Tools\calc.exe')

> sre_constants.error: look-behind requires fixed-width pattern 
```

有两种解决方法：

安装并使用支持该功能的较新的[正则表达式](https://pypi.python.org/pypi/regex)模块（以及更多）：

```
rx = r'(?<!System32.*)calc.exe'
print regex.search(rx, r'C:\Tools\calc.exe')  # <_regex.Match object at 0x1028dd238>
print regex.search(rx, r'C:\Windows\System32\calc.exe') # None 
```

或改写表达式，使其不需要变量lookbehind：

```
rx = r'^(?!.*System32).*calc.exe'
print re.search(rx, r'C:\Tools\calc.exe')  # <_sre.SRE_Match object at 0x10aede238>
print re.search(rx, r'C:\Windows\System32\calc.exe') # None 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:55:59.480

`os.path`处理文件名时，您应该使用 -module 中的函数。

我建议：

```
from os.path import basename, dirname

paths = [r"C:\Tools\calc.exe",
         r"C:\Windows\System32\calc.exe",
         r"C:\Windows\System32\De-de\calc.exe"]

good_paths = [p for p in paths if basename(p).lower() == "calc.exe"
                               and not "system32" in dirname(p).lower()] 
```

核心是对 的列表理解`paths`，检查`basename`（路径的最后一部分）和`dirname`，包含目录的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:49:34.290

你可以在没有正则表达式的情况下做到这一点。

```
def iter_good_paths(list_of_paths):
    for path in list_of_paths:
        parts = path.lower().split(r'\')
        if parts[-1] == 'calc.exe' and 'System32' in parts:
            yield path 
```

并像这样使用它：

```
print list(iter_good_paths(list_of_paths)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T09:55:31.740

您不需要在这里进行回顾，更不用说可变宽度了。改用前瞻：

```
(?i)^(?:(?!\\System32\\).)*\\calc\.exe$ 
```

`\system32\`这将匹配您想要 的字符串之前不包含不区分大小写的字符串的任何内容`\calc.exe`。表达式的`(?i)`部分使其右边的所有内容不区分大小写（如果这是用于 Windows 文件系统，这可能是一个不错的选择）。

我很想推荐[regular-expressions.info](http://www.regular-expressions.info/tutorial.html)。它是学习正则表达式的许多怪癖和风格的绝佳资源。

# sql-server - 使用插入表的 MSSQL 触发器更新

> ID：15633848
> 
> 赞同：0
> 
> 时间：2013-03-26T09:46:11.607
> 
> 标签：sql-server, triggers

我正在尝试编写一个仅在更新的列等于特定值时才会运行的触发器。

基本上，只有当我将列名“状态”更新为值“已支付”时，我才希望触发器运行。

IE

```
if (Update(Status) AND  inserted.Status = 'Paid')
begin
end 
```

目前我收到此错误“无法绑定多部分标识符“inserted.Status”。”

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:52:38.353

你需要把它分成两个步骤。1\. 仅在状态更新时做出反应， 2\. 对插入的所有具有已支付状态的元素执行您想要的操作

```
if update(status)
begin
    -- Do the stuff to the Paid elements in inserted
    select * from inserted as i where i.status = 'Paid'

end 
```

请记住，您的状态也可以从已付费更新为已付费，您可能不想对此做出反应。因此，您可以执行以下操作：

```
select * from
inserted as i
inner join deleted as d on i.id = d.id
where i.status <> d.status and i.status = 'Paid' 
```

现在结果只包含已更新为付费且尚未等于付费的行

# java - 从公共 String (...) 类返回一个字符串

> ID：15633853
> 
> 赞同：-1
> 
> 时间：2013-03-26T09:46:24.047
> 
> 标签：java

这是代码

```
import java.io.*;
import java.lang.*;
import java.util.*;

public class createfile
{
    private Formatter x;

    Scanner keyboard = new Scanner(System.in);

    String s1,s2,s3,s4,s5,s6;
    String aa,bb,cc,dd,ee,ff;

    public void openFile()
    {
        try
        {
            x = new Formatter("password.txt");
        }catch(Exception e)
        {
            System.out.println("\nError");
        }
    }

    public void add(String s1,String s2,String s3,String s4,String s5,String s6)
    {
            Bugatti v = new Bugatti();
            fw m = new fw();
            fw2 s = new fw2();
            fw3 EB = new fw3();
            fw4 e = new fw4();
            fw5 r = new fw5();

        x.format("%s%s%s%s%s%s",aa,bb,cc,dd,ee,ff);

    }

    public void close()
    {
            x.close();

    }

} 
```

好的，所以在另一个文件中，我返回了 aa bb cc dd ee ff，现在 x.format 没有看到！！！但我实际上已经在定义为布加迪和 fw、2、3、4、5 的类中返回了它。现在 x.format 怎么看回报。我知道我做错了什么，因为我是这方面的菜鸟，所以请教我如何解决这个问题！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:59:08.887

你尝试做什么......如果在这种情况下 aa 是 aa 你应该使用

```
x.format("%s%s%s%s%s%s", v.aa(s1),m.bb(s2),s.cc(s3),EB.dd(s4),e.ee(s5),r.ff(s6); 
```

（不知道 v.aa(s1) 是否返回...）而不是

```
x.format("%s%s%s%s%s%s",aa,bb,cc,dd,ee,ff); 
```

无论如何，你为什么使用这样的名字？: 哦，令人毛骨悚然...

# php - 在 php 中构建 JavaScript

> ID：15633855
> 
> 赞同：0
> 
> 时间：2013-03-26T09:46:33.083
> 
> 标签：php, javascript

我现在已经挂了一个小时，找不到问题。这让我疯狂

```
$script .=nl().'$(this).html("<img src="'.CDN('/icons/loading/loading5.gif').'" />");'; 
```

我得到错误：

```
SyntaxError: missing ) after argument list

$(this).html("<img src="https://cdn.connexservice.com/icons/loading/loading5.gif... 
```

并且箭头显示在 https 的 h 上。我一定是在某处遗漏了一个 ' 或一个 "... 希望有人对此有更好的了解..

呸..快速编辑，发现问题，但是，它不会显示 gif。

```
$script .=nl(). '$(this).html("<img src=\''.CDN('/icons/loading/loading5.gif').'\' />");'; 
```

这显示在源代码中：

```
$(this).html("<img src=\"https://cdn.connexservice.com/icons/loading/loading5.gif\" />"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:48:21.783

您需要使用以下命令转义 HTML 中的引号`\`：

```
$script .=nl().'$(this).html("<img src=\"'.CDN('/icons/loading/loading5.gif').'\" />");'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:50:22.820

您必须转义引号：

```
$script .= nl() . '$(this).html("<img src=\"' . CDN('/icons/loading/loading5.gif') . '\" />");'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:02:21.313

为了在任何地方应用适当的转义，我更喜欢这样写：

```
$script .= nl() . sprintf('$(this).html(%s);',
        json_encode(sprintf('<img src="%s" />', CDN('/icons/loading/loading5.gif')))
); 
```

我正在使用两个`sprintf()`电话；第一个是构建 HTML 字符串，第二个是构建 JavaScript 代码。

此外，它用于`json_encode()`确保字符串被正确转义。

# wpf - 为边框模拟 Textbox BorderBrush

> ID：15633859
> 
> 赞同：0
> 
> 时间：2013-03-26T09:46:44.733
> 
> 标签：wpf, textbox, border

我需要一个`Border`就像`BorderBrush`默认的一样`TextBox`。它应该在鼠标悬停以及边框内的某些元素获得焦点时更改。

就在 附近`Border`，有一个`TextBox`默认样式。我试过这段代码，它只在正常状态下工作。

```
<Border BorderBrush="{Binding Path=BorderBrush, ElementName=txtName}"
        BorderThickness="{Binding Path=BorderThickness, ElementName=txtName}">
    ...
</Border>
<TextBox x:Name="txtName"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:58:59.283

首先，您需要找出悬停时使用的 TextBox 样式（检查其默认样式）。

然后，您可以使用当 MouseOver 为 true 时将 BorderBrush 和 BorderThickness 设置为适当值的触发器定义自己的边框样式。

# android - 如何用空格分割屏幕宽度

> ID：15633861
> 
> 赞同：0
> 
> 时间：2013-03-26T09:46:53.687
> 
> 标签：android, android-layout, android-xml

我需要创建 3 个块，它们之间有空格。

[http://i47.tinypic.com/huos40.png](http://i47.tinypic.com/huos40.png)

我几乎完成了，但我尝试了很多属性，我不知道我还能检查什么。

这是我当前的代码：

```
<LinearLayout
    android:id="@+id/ll_numbers"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignLeft="@+id/tv_numbers"
    android:layout_below="@+id/tv_numbers"
    android:layout_marginTop="5dip"
    android:layout_marginRight="10dip"
    android:orientation="horizontal"
    android:weightSum="3" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@drawable/cuadrogris"
        android:textSize="8sp" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@drawable/cuadrogris"
        android:textSize="8sp" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@drawable/cuadrogris"
        android:textSize="8sp" />

</LinearLayout> 
```

如您所见，我已将宽度屏幕正确地拆分为 3，但是如何添加额外的空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:16:24.297

将以下行添加到每个文本视图

```
android:layout_margin="10dp" 
```

或者

根据您的要求

```
android:layout_marginLeft="10dp"
android:layout_marginRight="10dp"
android:layout_marginTop="5dp" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:37:53.013

你做得很棒

只需将此添加到您的每个**TextView**

```
android:layout_margin="20dp" 
```

看看结果。休息你可以根据你的需要修复

![在此处输入图像描述](../Images/1410581e843d51fd0f813f69a1afb0ee.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:56:04.617

试试这个：

```
<LinearLayout 
android:id="@+id/ll_numbers"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_alignLeft="@+id/tv_numbers"
android:layout_below="@+id/tv_numbers"
android:layout_marginTop="5dip"
android:layout_marginRight="10dip"
android:orientation="horizontal">

<TextView
    android:id="@+id/textView1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
   android:layout_marginLeft="5dp"
    android:background="@drawable/cuadrogris"
    android:textSize="8sp" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
   android:layout_marginLeft="5dp"
    android:background="@drawable/cuadrogris"
    android:textSize="8sp" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:layout_marginLeft="5dp"
     android:background="@drawable/cuadrogris"
    android:textSize="8sp" /> 
```

# cmake - 在 CMAKE 中检查包含文件的正确方法

> ID：15633867
> 
> 赞同：3
> 
> 时间：2013-03-26T09:47:10.640
> 
> 标签：cmake

我使用这种检测包含文件的方式，但是如果未检测到错误，则永远不会执行：

```
include(CheckIncludeFile)
check_include_file("getopt.h" HAVE_GETOPT_H)
if(!HAVE_GETOPT_H)
  message( FATAL_ERROR "getopt Not Found" )
endif() 
```

但是如果我检查空字符串是否正常工作，并且在找不到包含文件时会打印该消息：

```
include(CheckIncludeFile)
check_include_file("getopt.h" HAVE_GETOPT_H)
if("${HAVE_GETOPT_H}" STREQUAL "")
  message( FATAL_ERROR "getopt Not Found" )
endif() 
```

难道我做错了什么？我正在使用 cmake 2.8.3 版。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:40:07.157

CMake 的[`if`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aif)命令通过使用`NOT`而不是`!`.

你需要做：

```
if(NOT HAVE_GETOPT_H) 
```

# django - Django Rosetta url 奇怪的行为

> ID：15633889
> 
> 赞同：0
> 
> 时间：2013-03-26T09:48:46.830
> 
> 标签：django, django-rosetta

Django 127.0.0.1:8000/rosetta 在 DEBUG = True 中无法正常工作。它永远不会让您编辑翻译。

当我更改为 False 时，它​​会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-26T17:45:53.833

可能是当您访问[http://localhost:8000/rosetta/](http://localhost:8000/rosetta/)时，您没有登录您的应用程序。转到您的登录名或[http://localhost:8000/admin/](http://localhost:8000/admin/)并为您的应用记录一个有效用户，如果没有，您将得到一个找不到页面 (404)

# javascript - Firefox插件中面板内容脚本和页面内容脚本之间的全局变量

> ID：15633900
> 
> 赞同：0
> 
> 时间：2013-03-26T09:49:03.130
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

面板脚本和页面脚本可以使全局变量相同吗？

可能是一些技巧，例如使用指针，或者可能是一些可以通过面板脚本和页面脚本轻松访问的存储位置。我不想通过使用端口通信发送消息来发送变量，因为我将在计时器函数中使用此变量，该函数以毫秒为间隔刷新，并且如果 Web 浏览器将使用系统端口发布如此多的消息，它将超载。我认为如果我可以从某个位置读取变量会更好，该位置可以通过面板脚本和页面脚本轻松访问。我是 firefox 插件生成器的新手，我怎样才能为我的插件实现这一点？

这里我附上了面板脚本，它将读取页面脚本保存的值。

```
var panel = require("panel").Panel({
          width: 100,
          height: 100,
          contentScriptFile: data.url("panel_script.js")
    }); 
```

在这里，我附加了页面脚本，它将保存页面内容中的值，面板脚本将读取它。

```
var pageMod = require("page-mod");
pageMod.PageMod({
    include: "*",
    contentScriptFile: self.data.url("page_script.js"),
    contentScriptWhen: 'ready'
  }); 
```

**更新：**

我想读取页面上正在播放的玩家位置，我需要它非常准确，以毫秒为单位，我想在我的插件面板脚本中使用计时器来获取玩家位置值。如果我使用端口请求，那么 Web 浏览器会过载这么多请求，这比我能够将值保存在可以轻松从面板脚本中读取的位置中需要更多的资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:14:13.690

你不能，这主要是出于安全和性能原因。内容脚本必须与 main.js 中的主要附加代码分开，以防止 Web 内容能够在 main.js 中注入和运行代码，从而可能访问所有 Firefox api，例如将文件写入文件系统，监听 tcp 套接字和修改其他网页。

如果您提供了有关您的附加组件实际功能的更多信息，人们可能会提出更好的解决问题的方法。

# c# - MVC 4 文化冲突

> ID：15633915
> 
> 赞同：0
> 
> 时间：2013-03-26T09:49:33.750
> 
> 标签：c#, jquery, asp.net-mvc, unobtrusive-javascript

我正在使用 MVC 4 和实体框架开发 Intranet Web 应用程序。从开发开始，我就有一个我无法解决的问题。为了说明我在说什么，这里有一个例子：

我可以通过“创建视图”添加一个人。在这个观点中，我必须精确一个十进制数，它代表这个人的房子和工作地点之间的距离。在这个阶段，一切都很好。但是，当我想编辑一个人并想保存更改时，该数字不被接受为十进制数。

我阅读了我的问题，并尝试了在 web.config 中添加标签和精确我想要使用的文化（准确地说是法国文化）。

这是我的“编辑视图”：

```
@model BuSIMaterial.Models.Person
@{
    ViewBag.Title = "Edit";
}
<h2>
    Edit</h2>
<script src="@Url.Content("~/Scripts/jQueryFixes.js")" type = "text/javascript"></script>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Person</legend>
        @Html.HiddenFor(model => model.Id_Person)
        <div class="editor-label">
            First name :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.FirstName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>
        <div class="editor-label">
            Last name :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.LastName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.LastName)
        </div>
        <div class="editor-label">
            National number :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.NumNat, new { maxlength = 11 })
            @Html.ValidationMessageFor(model => model.NumNat)
        </div>
        <div class="editor-label">
            Start date :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.StartDate, new { @class = "datepicker" })
            @Html.ValidationMessageFor(model => model.StartDate)
        </div>
        <div class="editor-label">
            End date :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.EndDate, new { @class = "datepicker" })
            @Html.ValidationMessageFor(model => model.EndDate)
        </div>
        <div class="editor-label">
            Distance House - Work (km) :
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.HouseToWorkKilometers)
            @Html.ValidationMessageFor(model => model.HouseToWorkKilometers)
        </div>
        <div class="editor-label">
            Category :
        </div>
        <div class="editor-field">
            @Html.DropDownList("Id_ProductPackageCategory", "Choose one ...")
            @Html.ValidationMessageFor(model => model.Id_ProductPackageCategory) <a href="../ProductPackageCategory/Create">
                Add a new category?</a>
        </div>
        <div class="editor-label">
            Upgrade? :
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Upgrade)
            @Html.ValidationMessageFor(model => model.Upgrade)
        </div>
        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

你有解决这个问题的想法吗？这很烦人，不幸的是，我没有找到解决它的方法。

编辑：编辑方法（人控制器）：

```
 public ActionResult Edit(long id = 0)
    {
        Person person = db.Persons.Single(p => p.Id_Person == id);
        if (person == null)
        {
            return HttpNotFound();
        }
        ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name", person.Id_ProductPackageCategory);
        return View(person);
    }

    //
    // POST: /Person/Edit/5

    [HttpPost]
    public ActionResult Edit(Person person)
    {

        ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name", person.Id_ProductPackageCategory);

        if (ModelState.IsValid)
        {
            ModelStateDictionary errorDictionary = Validator.isValid(person);

            if (errorDictionary.Count > 0)
            {
                ModelState.Merge(errorDictionary);
                return View(person);
            }

            db.Persons.Attach(person);
            db.ObjectStateManager.ChangeObjectState(person, EntityState.Modified);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(person);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:29:29.227

如果不显眼的 javascript 验证结果与服务器端的不同，您的问题可能与[MVC 3 jQuery Validation/globalizing of number/decimal field](https://stackoverflow.com/questions/5199835/mvc-3-jquery-validation-globalizing-of-number-decimal-field)相关。

我们有一个类似的问题，这个线程帮助解决了它。

# javascript - 在 SharePoint 中使用 Visio 进行编程，在 Javascript 中创建新的 Outlook 会议？

> ID：15633916
> 
> 赞同：1
> 
> 时间：2013-03-26T09:49:33.973
> 
> 标签：javascript, sharepoint, outlook, visio

我正在做一些 Visio 实验，我想做的是在 SharePoint 中显示一个 Visio 文件，该 Visio 文件显示了建筑物的布局、会议室及其状态+使用 Outlook 预订它们的能力

会议室在 Outlook 中被标识为电子邮件地址，您可以向会议室发送电子邮件进行预订。

由于有很多房间，并且在将房间添加到会议邀请之前您看不到它们的可用性，因此我想在 Visio 中创建一个概览。

到目前为止我所拥有的：用 C# 编写的程序，它作为定时器服务运行，获取有关房间和会议的信息，并将其写入 SQL2008R2 数据库。

2张桌子：

**房间：** RoomEmail、RoomName、FloorNumber、容量、RoomStatus（现在）

**会议：** MeetingID、RoomEmail(FK)、MeetingTitle、MeetingStatus、MeetingStartTime、MeetingEndTime。

Visio 文件已添加到 SharePoint 并在那里工作，更新得很好。房间忙时显示为红色，空闲时显示为绿色，暂定时显示为黄色。

这对现在的状态有很大帮助，但我想要另外 2 个功能。

*   能够单击 Visio 图表或另一个 WebPart 中某处的链接，并在“too”字段中打开带有新会议和房间的本地 Outlook 客户端
*   能够查看所选房间的预定会议，查看何时可以在打开 Outlook 之前进行预订。

在我看到之后，当您在 Visio 中对形状进行数据连接时，不可能将形状链接到其他特定行（这就是我在 Room 表中添加 roomStatus 的原因）。到目前为止，我已经在 J​​avascript 中看到能够使用 Visio 形状执行逻辑。

我将此添加到内容 Webpart：

```
<script language="javascript">
var app = Sys.Application;

app.add_load(onApplicationLoad);

// hold an instance of the Visio VWA control
var vwaControl; 

var shapeSelectionChangedHandler = null;

function onApplicationLoad()
{
    vwaControl= new Vwa.VwaControl("WebPartWPQ4");
    vwaControl.addHandler("diagramcomplete", onDiagramComplete);
    vwaControl.addHandler("shapeselectionchanged", shapeSelectionChangedHandler);
}

function onDiagramComplete()
{
    var vwaPage = vwaControl.getActivePage(); 
    vwaPage.setZoom(35); // force the initial zoom level
}

shapeSelectionChangedHandler = function(source, args)
{
    // get the selected shape from the shapes on the page
    var vwaPage = vwaControl.getActivePage(); 
    var vwaShapes = vwaPage.getShapes(); 
    var shape = vwaShapes.getItemById(args);

    // get the data to display for the selected shape
    var data = shape.getShapeData();

    var strRoomName = ""; 
    var strFloorNumber = "";
    var strCapacity = ""; 
    var strStatus = ""; 

    for (var j = 0; j < data.length; j++)
    {
        if (data[j].label == "RoomName")
        {
            strRoomName = data[j].value;
            continue;
        } 

        if (data[j].label == "FloorNumber")
        {
            strFloorNumber = data[j].value;
            continue;
        }

        if (data[j].label == "Capacity")
        {
            strCapacity = data[j].value;
            continue;
        }        

        if (data[j].label == "RoomStatus")
        {
            strStatus = data[j].value;
            continue;
        }                
    }

    // get the selected state input and set its value
    var  inputRoomName = document.getElementById('strRoomName');
    inputRoomName.value = strRoomName;

    var inputFloorNumber = document.getElementById('strFloorNumber');
    inputFloorNumber.value = strFloorNumber;

    var inputCapacity = document.getElementById('strCapacity');
    inputCapacity.value = strCapacity;    

    var inputStatus = document.getElementById('strStatus');
    inputStatus.value = strStatus;        
}

</SCRIPT>

Room Name:<br>
<input id="strRoomName" name="Room Name" style="width: 284px" type="text" />
Floor Number:<br>
<input id="strFloorNumber" name="Floor Number" style="width: 284px" type="text" />
Capacity:<br>
<input id="strCapacity" name="Capacity" style="width: 284px" type="text" />
Status:<br>
<input id="strStatus" name="Status" style="width: 284px" type="text" /> 
```

此代码运行良好，当我单击一个房间时，它会显示在 Content Webpart 中。链接：http: [//msdn.microsoft.com/en-us/library/gg243427.aspx](http://msdn.microsoft.com/en-us/library/gg243427.aspx)

所以我查看了一些能够从 Javascript 打开 Outlook 的网站：

操作，不能发布更多链接，这是代码：

```
function objappt(Subject, Start, Location, End, RequiredAttendees, Body) {
}

var objOL //As Outlook.Application;
var objAppt //As Outlook.AppointmentItem;
var olAppointmentItem = 1;
var olMeeting = 1;

objOL = new ActiveXObject("Outlook.Application");
objappt = objOL.CreateItem(olAppointmentItem);
// With objappt;
objappt.Subject = "My Test Appointment";
objappt.Start = "11/23/2008 9:00 AM";
objappt.End = "11/23/2008 9:45 AM";
// make it a meeting request;
objappt.MeetingStatus = olMeeting;
objappt.Location = "NSW";
objappt.Body = "Testing";
objappt.RequiredAttendees = "someone@somewhere.dom";
objappt.Display();
// End With;

objAppt = null;
objOL = null 
```

NR2：

```
//Open Meeting Request
function ResMtg(cal,start,end){
//alert(cal+' - '+start+' - '+end);
//Inbox = 6
//Calendar = 9
var mailFolder = ns.getDefaultFolder(9);
var mailItem = mailFolder.Items.Add("IPM.Appointment.ConfRmReq"); 
mailItem.MeetingStatus = 1;
mailItem.Subject = "**Meeting Subject**"; 
mailItem.Start = start;
mailItem.End = end;
var recipient = mailItem.Recipients.Add(cal);//attendees list
recipient.Resolve;
if(recipient.Resolved){mailItem.Display();}
else{alert('Unable to resolve this calendar: '+cal);}
} 
```

NR3：

```
 var outlookApp = new ActiveXObject("Outlook.Application");
  var nameSpace = outlookApp.getNameSpace("MAPI");
  mailFolder = nameSpace.getDefaultFolder(6);
  mailItem = mailFolder.Items.add('IPM.Note.FormA');
  mailItem.Subject="CUSTOMER SERVICE";
  mailItem.To = document.frmM.txtEmail.value;
  mailItem.HTMLBody = 
```

所有这些都来自非常古老的例子。

我还想显示链接到所选房间的会议表中的信息。我有关于哪个房间的信息，但我缺少与会议桌的连接。而且我知道你不能直接用 Javascript 安全地连接到数据库。

我以前没有在 Javascript 中做过任何编码，这就是为什么我在这里有点不足。

有谁知道我怎么能做到这两个功能？我非常感谢任何帮助！

# php - 将测试结果保存到数据库：保持数据库整洁

> ID：15633918
> 
> 赞同：-2
> 
> 时间：2013-03-26T09:49:35.893
> 
> 标签：php, mysql

我使用 Wordpress、jQuery 和 PHP 创建了一个运行良好的测试系统。我没有太多经验的领域是mysql数据库。

我不确定如何以整洁的方式保存结果。

我要保存的内容如下：

1.  用户名。
2.  测试名称。
3.  问题。
4.  答案。
5.  分数。
6.  过关失败。

第 1、2、5 和 6 点相当直接地保存数据。困惑伴随着问题和答案而来。

**如何以一种简洁的方式将这些保存到 mysql 数据库中？**

假设有 10 个问题，每个问题都有多项选择答案，我如何将每个问题保存在数据库中，但又如何将其链接到填写它们的用户？我不确定如何保持数据库整洁，这可能会很快失控。

将来我可能想对这些问题和答案进行一些搜索。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T09:53:13.390

“整洁”应该让你想到“规范化”。

开始考虑关系，暂时不要担心表格。您已经阐明了其中的一些：

*   问题有一个或多个答案
*   给定问题的一个或多个答案可以被认为是“正确的”
*   测试有一个或多个问题
*   一个考试只有一个分数和一个名字
*   用户可以进行零次或多次测试
*   零个或多个用户可以参加测试
*   一个问题可以出现在零个或多个测试中（？）

一旦你把这些整理出来，表格就相对容易描述了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T10:01:09.170

您需要规范化您的数据库结构。

```
**Table: users**
id - int
username - varchar
password - varchar
active - enum (y,n)

**Table: questions**
id - int
question - varchar/text

**Table: answers**
id - int
question_id - int (foreign key questions.id)
answer - varchar/text
is_correct_anser - enum (y, n)

**Table: test_master**
id - int
test_name - varchar/text
pass_score - int (minimum score required to pass the test)

**Table: test**
user_id - int (foreign key to users.id)
test_id - int (foreign key to test_master.id)
question_id - int (foreign key to questions.id)
answer_id - int (foreign key to answers.id) 
```

根据以上表格，您可以以规范的方式存储所有需要的信息。请注意，规范化并不总是有帮助，它取决于您的应用程序的要求。一旦测试完成，将总分与 user_id 和 test_id 一起存储在单独的表中也是一个更好的理想选择，因为这将避免连接多个表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:54:00.737

在此创建一个表问题，您有 question_id、问题和选​​择。在 ohter 表中，您只需要保存 question_id、choice、username、score、testname 等。question_id 将是主键问题表。

# css - 修改主题 css 后，WordPress 网站闪烁并显示旧主题（仅限 Firefox）

> ID：15633919
> 
> 赞同：0
> 
> 时间：2013-03-26T09:49:37.357
> 
> 标签：css, wordpress, firefox, wordpress-theming

我有一个我托管的 Wordpress 网站（最新版本），它使用的是 Silesia 主题。我已经安装了 Slim Jetpack 插件并使用它的 css 编辑器来修改网站的外观。现在，每当使用 Firefox（最新版本：19.02）查看该站点并单击任何链接时，该站点都会闪烁，并简要显示旧主题。这只发生在 Firefox 上，而不是 IE、Chrome 或 Safari。已安装的其他插件包括：Subscribe2、Google Analytics、Subscribe2 小部件、Jetpack 手动控制和 WP Super Cache。

似乎在 Firefox 上，该站点首先使用原始主题 css 呈现，然后在到达新 css 时重新绘制，但是根据[浏览器如何应用 CSS，并且重新绘制受它的影响？](https://stackoverflow.com/questions/6951108/how-is-css-applied-by-the-browser-and-are-repaints-affected-by-it)这不是它应该如何工作的。

有谁知道这可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:16:38.110

我调查了这个问题，看起来这是一个特定于主题的问题。首先加载原始主题 css，然后是一些 javascript，然后是新的自定义 css。这可能会导致旧主题在 javascript 正在执行并且浏览器还没有机会访问新 css 时短暂可见。

我通过直接修改原始主题 css 解决了这个问题。不是一个理想的解决方案，但它现在可以工作。

# android - 如何在android中扩展TextView的最大宽度

> ID：15633935
> 
> 赞同：0
> 
> 时间：2013-03-26T09:50:41.720
> 
> 标签：android, textview, width

我想要一个长的单行 TextView 来滚动，就像在电视上滚动股票价格一样。

我尝试使用几个命令来扩展 TextView 宽度，例如

```
tview.setMaxWidth(120);
tview.setMaxWidth(512);
tview.setMaxWidth(812);
tview.setMaxWidth(10000); 
```

第一行、第二行、第三行工作正常，但第四行（长文本）扩展不够。

Android 是否对非常长的文本宽度有限制？有没有办法让一个长的 TextView 需要长的可滚动文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:53:50.933

您可以尝试在以下位置使用布局参数`TextView`：

```
LayoutParams lparams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT);
tview.setLayoutParams(lparams); 
```

# java - 手动排序的最佳数据类型

> ID：15633938
> 
> 赞同：0
> 
> 时间：2013-03-26T09:50:47.873
> 
> 标签：java, sorting

在我正在开发的应用程序的前端，允许用户**手动**对对象列表进行排序，我的对象是这样组成的；

```
class Picture {
   private String location

   public void getLocation()
   {
      return location;
   }
} 
```

现在我尝试使用 an 进行排序，`integer`但问题是在添加我希望将其添加到列表底部的项目时，这意味着我必须检查最后一个`Picture`并 +1 它的排序字段；

```
 class Picture {
       private int sort;
       private String location

       public void getSort()
       {
          return sort;
       }

       public void getSort(int sort)
       {
          this.sort = sort;
       }

       public void getLocation()
       {
          return location;
       }
    } 
```

有没有更好的方法来解决这个问题？（我必须将变量存储在 SQL 数据库中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:55:53.917

您可以简单地使用自动生成的序列 ID，并按 ID 排序。或者添加一个时间戳，并使用这个时间戳进行排序。这两种技术将保持插入顺序，而无需在插入新图片之前获取最大整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:54:22.377

实现 Comparable 接口，以便您可以使用集合框架 API 对列表进行排序。

# sql-server - 在 T-SQL 中编写基本触发器

> ID：15633939
> 
> 赞同：0
> 
> 时间：2013-03-26T09:50:48.200
> 
> 标签：sql-server, tsql, triggers

我想在对表进行插入时使用触发器，但由于错误而无法创建它。

```
 -- ================================================
-- Template generated from Template Explorer using:
-- Create Trigger (New Menu).SQL
--
-- Use the Specify Values for Template Parameters 
-- command (Ctrl-Shift-M) to fill in the parameter 
-- values below.
--
-- See additional Create Trigger templates for more
-- examples of different Trigger statements.
--
-- This block of comments will not be included in
-- the definition of the function.
-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Nick Gowdy
-- Create date: 26/03/2013
-- Description: Insert Module ID into table based on User ID on update
-- =============================================
CREATE TRIGGER TblAuditLogLoggingIn.ModuleID ON dbo.GenesisOnline.TblAuditLogLoggingIn.UserID
AFTER INSERT
AS 
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for trigger here

END
GO 
```

错误是：

> 消息 8197，级别 16，状态 4，过程 ModuleID，第 6 行对象“TblAuditLogLoggingIn.UserID”不存在或对于此操作无效。

架构是 dbo.GenesisOnline.TblAuditLogLoggingIn，列是：

*   审计ID PK
*   用户身份
*   模块ID
*   登录日期

我要创建的触发器是针对我创建的表 TblAuditLogLoggingIn 的。但管理工作室说它不存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:46:43.583

好的，感谢您澄清您的问题@nick gowdy。首先，SQL Server 不接受带有**点 (.)**的名称。然后，如前面的答案所述，您不能以这种方式基于列创建触发器。如果您想对触发器上的列进行操作，您应该这样做：

```
CREATE TRIGGER TblAuditLogLoggingIn_ModuleID ON dbo.GenesisOnline
AFTER INSERT
AS 
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for trigger here
    IF ( UPDATE(UserID) )
    BEGIN
        -- do your stuff here
    END
END
GO 
```

但这几乎肯定会导致`do your stuff here`一直被执行。`do your stuff`如果您要做的是`UserID`满足某些条件，例如 null ，那么您可以执行以下操作：

```
DECLARE @UserID int --assuming that is the type of your UserID
SELECT @UserID = UserID from inserted
IF ( @UserID is null ) -- change this to a criteria appropriate to your code
BEGIN
    -- do your stuff here
END 
```

# iphone - 何时以及为何在开发中使用 initWithNibName:bundle:

> ID：15633940
> 
> 赞同：0
> 
> 时间：2013-03-26T09:50:57.537
> 
> 标签：iphone, xcode, interface-builder, xib

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]; 
```

为什么我们使用这种方法？使用xib文件时有必要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:56:29.617

为什么我们将 init 与 nib 一起使用？

所以我们可以使用界面生成器创建一个视图并从中初始化一个视图，而不是自己编写所有代码。

如果您只需要基本的东西，它是编码一切的好选择。

# java - WebSphere 中的错误页面异常

> ID：15633942
> 
> 赞同：0
> 
> 时间：2013-03-26T09:51:04.847
> 
> 标签：java, websphere

在 websphere 中获取异常

我已经设置了java最新版本。

我的服务器版本详细信息

```
C:\IBM\WebSphere\AppServer> .\profiles\AppSrv02\bin\versionInfo.bat
WVER0010I: Copyright (c) IBM Corporation 2002, 2012; All rights reserved.
WVER0012I: VersionInfo reporter version 1.15.1.48, dated 2/8/12

--------------------------------------------------------------------------------

IBM WebSphere Product Installation Status Report
--------------------------------------------------------------------------------

Report at date and time March 26, 2013 3:13:31 IST PM

Installation
--------------------------------------------------------------------------------

Product Directory        C:\Program Files (x86)\IBM\WebSphere\AppServer
Version Directory        C:\Program Files (x86)\IBM\WebSphere\AppServer\properti
es\version
DTD Directory            C:\Program Files (x86)\IBM\WebSphere\AppServer\properti
es\version\dtd
Log Directory            C:\ProgramData\IBM\Installation Manager\logs

Product List
--------------------------------------------------------------------------------

IBMJAVA7                 installed
BASE                     installed

Installed Product
--------------------------------------------------------------------------------

Name                  IBM WebSphere SDK Java Technology Edition (Optional)
Version               7.0.2.0
ID                    IBMJAVA7
Build Level           cf011240.02
Build Date            10/5/12
Package               com.ibm.websphere.IBMJAVA.v70_7.0.2000.20121005_1500
Architecture          x86-64 (64 bit)
Installed Features    IBM WebSphere SDK for Java Technology Edition 7

Installed Product
--------------------------------------------------------------------------------

Name                  IBM WebSphere Application Server
Version               8.5.0.1
ID                    BASE
Build Level           cf011242.02
Build Date            10/17/12
Package               com.ibm.websphere.DEVELOPERSILAN.v85_8.5.1.20121017_1724
Architecture          x86-64 (64 bit)
Installed Features    IBM 64-bit WebSphere SDK for Java
                      WebSphere Application Server Full Profile
                      EJBDeploy tool for pre-EJB 3.0 modules
                      Embeddable EJB container
                      Stand-alone thin clients and resource adapters

--------------------------------------------------------------------------------

End Installation Status Report
-------------------------------------------------------------------------------- 
```

请帮我

```
 SRVE0260E: The server cannot use the error page specified for your application to handle the Original Exception printed below.

Original Exception:
Error Message: java.lang.UnsupportedClassVersionError: JVMCFRE003 bad major version; class=com/csdcsystems/amanda/web/viewmodel/LoginViewModel, offset=6
Error Code: 500
Target Servlet:
Error Stack:
java.lang.UnsupportedClassVersionError: JVMCFRE003 bad major version; class=com/csdcsystems/amanda/web/viewmodel/LoginViewModel, offset=6
     at java.lang.Class.forNameImpl(Native Method)
     at java.lang.Class.forName(Class.java:170)
     at org.zkoss.lang.Classes.forNameByThread(Classes.java:268)
     at org.zkoss.lang.ImportedClassResolver.resolveClass(ImportedClassResolver.java:122)
     at org.zkoss.zk.ui.impl.PageImpl.resolveClass(PageImpl.java:478)
     at org.zkoss.bind.BindComposer.initViewModel(BindComposer.java:229)
     at org.zkoss.bind.BindComposer.doBeforeComposeChildren(BindComposer.java:142)
     at org.zkoss.zk.ui.impl.UiEngineImpl.doBeforeComposeChildren(UiEngineImpl.java:875)
     at org.zkoss.zk.ui.impl.UiEngineImpl.execCreateChild0(UiEngineImpl.java:814)
     at org.zkoss.zk.ui.impl.UiEngineImpl.execCreateChild(UiEngineImpl.java:771)
     at org.zkoss.zk.ui.impl.UiEngineImpl.execCreate0(UiEngineImpl.java:680)
     at org.zkoss.zk.ui.impl.UiEngineImpl.execCreateChild(UiEngineImpl.java:742)
     at org.zkoss.zk.ui.impl.UiEngineImpl.execCreate0(UiEngineImpl.java:702)
     at org.zkoss.zk.ui.impl.UiEngineImpl.execCreate(UiEngineImpl.java:644)
     at org.zkoss.zk.ui.impl.UiEngineImpl.execNewPage0(UiEngineImpl.java:394)
     at org.zkoss.zk.ui.impl.UiEngineImpl.execNewPage(UiEngineImpl.java:316)
     at org.zkoss.zk.ui.http.DHtmlLayoutServlet.process(DHtmlLayoutServlet.java:214)
     at org.zkoss.zk.ui.http.DHtmlLayoutServlet.doGet(DHtmlLayoutServlet.java:135)
     at javax.servlet.http.HttpServlet.service(HttpServlet.java:575)
     at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1224)
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:774)
     at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:456)
     at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
     at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1032)
     at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.dispatch(WebAppRequestDispatcher.java:1384)
     at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:193)
     at com.ibm.ws.webcontainer.extension.DefaultExtensionProcessor.handleRequest(DefaultExtensionProcessor.java:604)
     at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1032)
     at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3748)
     at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:304)
     at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:962)
     at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662)
     at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:459)
     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:526)
     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:312)
     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:283)
     at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
     at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
     at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
     at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
     at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
     at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
     at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
     at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
     at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
     at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1814) 
```

# ios - 关于 NSObject 发布

> ID：15633945
> 
> 赞同：0
> 
> 时间：2013-03-26T09:51:17.110
> 
> 标签：ios, nsstring

对不起我的英语...

**在“.h”文件中**

```
NSString *_name; 
```

**在“.m”文件中**

```
-(id)init{

.....

_name = [[NSString alloc] initWithString:@"Hadrian"];

.....

} 
```

和一个函数用于更改 _name 的值，如下所示：

```
-(void) changeName:(NSString *)name{

    //No 1:

    _name = [name copy];

    //No 2:

    if(_name) [_name release];

    _name = [name copy];

} 
```

没有1导致泄漏？这个功能标准怎么写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:12:20.380

**建议...**

*   **@property 和 @synthesize ：**如果您使用 @property / @synthesize，getter/setter 由它们处理。你不需要处理它。（使用功能而不是长代码）

    [也看看Inject IOS](https://stackoverflow.com/questions/9722366/difference-between-using-properties-and-not-for-accessing-ivars)的回答

    > *   属性强制访问限制（例如只读）
    > *   属性强制执行内存管理策略（保留、分配）
    > *   属性（很少）用作线程安全策略（原子）的一部分
    > *   属性提供了透明地实现自定义 setter 和 getter 的机会。
    > *   使用单一方式访问实例变量可以提高代码的可读性。

*   **命名约定：**避免在变量名前加上 _ 前缀，以避免与自动生成的访问器发生冲突。或者在这个[链接上由 Kelan显示和解释的合成](https://stackoverflow.com/questions/822487/how-does-an-underscore-in-front-of-a-variable-in-a-cocoa-objective-c-class-work)

*   **泄漏：**当您分配对象或创建副本时，您拥有该对象。这意味着您将获得保留计数为 1（未自动释放）的对象。你有责任，你应该在使用该对象时释放它。

# eclipse - 如何运行命令 mvn eclipse:eclipse

> ID：15633951
> 
> 赞同：45
> 
> 时间：2013-03-26T09:51:34.257
> 
> 标签：eclipse, maven

我正在按照[这些说明](http://maven.apache.org/guides/mini/guide-ide-eclipse.html)进行操作，但在运行诸如`mvn eclipse:eclipse`.

我应该如何以及在哪里运行命令？

我的设置：

*   视窗 7 32 位
*   面向 Web 开发人员的 Eclipse Java EE IDE。
*   版本：Juno Service Release 2
*   版本号：20130225-0426
*   m2e - Eclipse v 1.3.0 的 Maven 集成

我通过 Eclipse 中的插件安装安装了 m2e。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-03-26T09:59:01.753

右键单击项目

-> `Run As`--> `Run configurations`。

然后选择`Maven Build`

然后单击*新建*按钮以创建所选类型的配置。单击`Browse workspace`（现在是`Workspace...`）然后选择您的项目并在目标中指定`eclipse:eclipse`

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-03-26T09:56:13.663

m2e 插件使用它自己的 Maven 发行版，与插件一起打包。

为了从命令行使用 Maven，您需要将其作为独立应用程序安装。[**这**](http://www.mkyong.com/maven/how-to-install-maven-in-windows/)是一个说明如何在 Windows 中执行此操作的说明

正确安装 Maven 后（即确保`MAVEN_HOME`,`JAVA_HOME`和`PATH`变量设置正确）：您必须`mvn eclipse:eclipse`从包含`pom.xml`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-17T12:19:43.783

我认为不再需要它了。最新版本的 Eclipse 启用了 Maven 插件。因此，您只需将**Maven 项目**导入 Eclipse，而不需要将其作为现有项目。Eclipse 将根据您的 pom.xml 和环境设置（安装的 Java 版本等）创建所需的 .project、.settings、.classpath 文件。早期版本的 Eclipse 需要运行`mvn eclipse:eclipse`产生相同结果的命令。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-12T18:24:25.830

除了配置良好的项目中“运行配置..”上的强大选项外，您还将在运行时看到 maven 任务。

![在此处输入图像描述](../Images/f0ac92828a72e005636e57740b45e8ba.png)

# android - Android：从 SQLite 数据库行中删除值

> ID：15633959
> 
> 赞同：1
> 
> 时间：2013-03-26T09:52:12.610
> 
> 标签：android, sqlite

再会，

我有一个应用程序使用数据库以编程方式将整数存储在列中。应用程序中所需的部分撤消过程将要求删除该条目，因为另一个查询会检查该列是否返回空值。

这是我将 int 写入列的方法：

```
 public int updateItem(String database, String table, int row, String column, int value) {
        ....

        SQLiteDatabase db = SQLiteDatabase.openDatabase
                (DB_PATH + database, null, SQLiteDatabase.OPEN_READWRITE);           
        ContentValues entries = new ContentValues();
        entries.put(column, value);       
        return db.update(table, entries, KEY_ID + " = ?",
                new String[] { String.valueOf(row) });
    } 
```

有人可以建议如何从该行/列中删除条目，允许它再次返回空响应吗？

谢谢你，乔什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T09:56:33.307

利用

```
entries.putNull(column); 
```

代替

```
entries.put(column, value). 
```

# javascript - Javascript闪烁背景颜色：何时停止闪烁以及何时开始

> ID：15633961
> 
> 赞同：1
> 
> 时间：2013-03-26T09:52:19.583
> 
> 标签：javascript

我已经通过使用下面的代码发现，我们可以闪烁我的 html 页面的背景：

```
<script type="text/javascript"> 
setInterval("Timer()", 500);
var x=1;
var set;
function Timer() 
{
    set=1;
    if(x==0 && set==1) {
        document.bgColor='#00008B';
        x=1;
        set=0;
    }
    if(x==1 && set==1) {
        document.bgColor='#FFFFFF';
        x=0;
        set=0;
    }
}
</script> 
```

仅使用此代码，html 页面将永远闪烁。但是我们如何停止闪烁并重新开始闪烁呢？

我想在页面收到一些协议命令时开始闪烁，并在用户按下页面上的按钮时停止闪烁。我们该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:59:37.957

setInterval 返回一个可用于禁用计时器的 ID。阅读 MDN 上的文档[https://developer.mozilla.org/en/docs/DOM/window.setInterval](https://developer.mozilla.org/en/docs/DOM/window.setInterval)

```
<script type="text/javascript"> 

var x=1;
var set;

function Timer() 
{
    set=1;
    if(x==0 && set==1) {
        document.bgColor='#00008B';
        x=1;
        set=0;
    }
    if(x==1 && set==1) {
        document.bgColor='#FFFFFF';
        x=0;
        set=0;
    }
}

var timerInterval = null;

startBlinking = function() {
   if(timerInterval === null)
       timerInterval = setInterval(Timer, 500);
}

stopBlinking = function() {
    if(timerInterval !== null) {
        clearInterval(timerInterval)
        timerInterval = null
    }
}
</script> 
```

调用 startBlinking 开始闪烁和 stopBlinking 停止它。在行动中看到它[http://jsfiddle.net/8D3KW/](http://jsfiddle.net/8D3KW/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:59:43.180

使用这个[http://jsfiddle.net/9FUWu/](http://jsfiddle.net/9FUWu/) 你需要做`clearInterval`和使用`onclick`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:55:39.870

将您分配`setInterval`给 a`var`然后执行`clearInterval`它。

```
var timer = setInterval("Timer()", 500);
...
clearInterval(timer); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T09:55:43.603

将区间保存在变量中：

```
var interval = setInterval("Timer()", 500); 
```

您可以稍后使用此变量将其清除：

```
clearInterval(interval); 
```

# grails - 如何获取未删除前导破折号的命令行参数？

> ID：15633963
> 
> 赞同：0
> 
> 时间：2013-03-26T09:52:24.690
> 
> 标签：grails

似乎删除了传递给 Grails 脚本的命令行参数中的前导破折号。例如，我有以下脚本（scripts/Argstest.groovy）：

```
includeTargets << grailsScript("_GrailsInit")

target(main: "The description of the script goes here!") {
    println args
}

setDefaultTarget(main) 
```

当我像这样执行它时：

```
grails> argstest - -- --- 
```

我得到以下输出：

```
-
-- 
```

显然，前导破折号已被删除。当我像这样执行它时更奇怪：

```
grails> argstest - -a --b ---c 
```

输出：

```
--c
-b
-a #leading dash not removed 
```

如何强制 Grails 以相同的顺序给我**传递**给脚本的**完全相同**的参数？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:59:14.023

用引号括住你的论点**

# networking - 使用 Motes 在 WSN 广播

> ID：15633964
> 
> 赞同：2
> 
> 时间：2013-03-26T09:52:24.713
> 
> 标签：networking, wireless, sensors, tinyos, nesc

用于`Xmesh`无线传感器节点，

1-可以使[节点](https://www.google.jo/search?hl=ar&safe=active&q=micaz&bav=on.2,or.r_cp.&bvm=bv.44158598,d.ZWU&biw=1366&bih=587&um=1&ie=UTF-8&tbm=isch&source=og&sa=N&tab=wi&ei=-mpRUbyEEOjD7AbxuoBo#imgrc=Fiib7mtBW8O8RM%3a;VGLYXXG8tLpIOM;http%253A%252F%252Fwww.openautomation.net%252Fuploadsproductos%252Fmicaz_lg.jpg;http%253A%252F%252Fwww.openautomation.net%252Fpage%252Fproductos%252Fid%252F22%252Ftitle%252FMICAz-2.4-GHz;400;356)（`Motes`）相互发送和接收？不仅仅是向基站发送信息？？

2-我可以修改它的数据包以添加一些字段吗？

3-可以在 Motes 存储中存储一些值吗？

我使用 TinyOs 对 motes 进行编程，从 type `MICAZ`??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T03:32:26.243

1-是的，如果您研究消息头，则有目标地址和源地址。当您使用 AMSend 接口发送数据包时，您可以为该方法的第一个参数提供您尝试访问的节点的 ID。

节点的 ID 在编译期间设置。例如，如果您运行以下命令，您将为开发板提供一个可以发送到的唯一 ID。当然，您可以为多个节点提供任意数量的 id：

```
$make telosb install.1 bsl,/dev/ttyUSB0 
```

上面的命令会将您的程序上传到一个节点并为其提供一个唯一的 ID `1`。现在在另一个节点中，当您收到数据包时，您可以检查 ID。这可以从数据包标头中提取，或者只是在您自己的自定义数据包中，您可以`unit16_t`从常量中存储节点 ID，`TOS_NODE_ID`该常量始终等于您在上传期间指定的唯一 ID。

2 - 是的，您可以拥有一个 255 字节大的数据包。您可以定义数据包，例如：

```
typedef nx_struct MyPacket
{
    nx_uint16_t NodeID;
    nx_uint8_t yourCustomField;
    nx_uint32_t anotherField; //and so on

} MyPacket_t; 
```

3-微尘存储？如果您的微尘带有闪存芯片，是的，您可以。如果可用，有一些接口和组件允许您从传感器板上的闪存芯片写入/读取。

您可以从我的教程中了解更多[信息](http://www.youtube.com/watch?v=AJYjy4bSaHw&list=PLnGjYOy4we8aCBSvZJorXajIDYbSsUmtX)。

# javascript - 我的 $el 不工作？

> ID：15633970
> 
> 赞同：0
> 
> 时间：2013-03-26T09:52:35.743
> 
> 标签：javascript, templates, backbone.js, underscore.js

我正在尝试学习 Backbone，并且我有一些运行良好的视图。这是我有问题的观点的代码：

```
var FavoritesView = Backbone.View.extend({
        el: 'favs',
        render: function() {
            var timesheets = new TimeSheet();
            var $that = $(this);
            timesheets.fetch({
                data: { favorite: true},
                success: function(model, response, options) {
                    var template = _.template($('#favs-view').html(), { timesheets: model.models})
                    $('.favs').html(template).addClass('well');
                }
            });
        }
      }); 
```

您可以看到我获取了一个集合，将响应放入模板中，然后显示它。我无法从我的“成功”回调中获取 $el。$that.el 和 $that.$el （我不知道有什么区别）都是未定义的。如您所见，我最终不得不使用 Jquery 来获取元素并附加模板。这是有效的，但这是一个黑客，我不喜欢它。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:01:21.370

我认为你在这条线上做错了

```
var $that = $(this); 
```

el 是**这个**对象的属性，而不是**$(this)**的属性。所以你应该这样做

```
var that = this; 
```

那么 this.el 不会是未定义的。检查这个[工作示例](http://jsbin.com/akovun/2/edit)

**this.el 和 this.$el 的区别**

基本上 $el 是 $(this.el) 的缓存 jquery 对象。[在主干视图文档](http://backbonejs.org/#View-%24el)中阅读更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:59:08.163

我认为它`favs`是一个类或一个ID。尝试添加一个`.`如果它是一个类或一个`#`如果它是一个 id，就在 之前`favs`，比如`el: '.favs',`. 这是 jquery 选择器语法。

# c# - 从 Java 调用 (soap.tcp) 上公开的 C# Web 服务

> ID：15633972
> 
> 赞同：-1
> 
> 时间：2013-03-26T09:52:40.430
> 
> 标签：c#, java, url, soap, tcp

我发现创建一个.Net 客户端来调用带有soap.tcp 协议的服务非常容易。

```
Uri destinationUri = new Uri("soap.tcp://SomeHostName/SomePath");
Uri destinationUri = new Uri("http://SomeHostName/SomePath");
EndpointReference destination = new EndpointReference(destinationUri);
SoapSender sender = new SoapSender(destination); 
```

但是我需要为同一个 URI（soap.tcp://SomeHostName/SomePath）创建一个 Java 客户端而不是 .Net 客户端。使用此协议 (soap.tcp) 的 Java 是否可以调用 Web 服务。

我还发现问了同样的问题 [http://bytes.com/topic/java/answers/879818-calling-c-web-service-soap-tcp-java](http://bytes.com/topic/java/answers/879818-calling-c-web-service-soap-tcp-java)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:30:32.157

基本上，您可以通过实施 MS 描述的“soap.tcp”协议来做到这一点：

*   [http://msdn.microsoft.com/en-us/library/cc219293.aspx](http://msdn.microsoft.com/en-us/library/cc219293.aspx)
*   [http://msdn.microsoft.com/en-us/library/cc219210.aspx](http://msdn.microsoft.com/en-us/library/cc219210.aspx)
*   [http://msdn.microsoft.com/en-us/library/cc219175.aspx](http://msdn.microsoft.com/en-us/library/cc219175.aspx)
*   [http://msdn.microsoft.com/en-us/library/cc219190.aspx](http://msdn.microsoft.com/en-us/library/cc219190.aspx)

我不知道有人这样做过……所以这将是一项重大任务……“soap.tcp”不是为互操作性而设计的……基于 HTTP 的 SOAP 是可互操作的，应该在像您这样的情况下使用。 ..

# latex - 基于函数的LaTeX代码绘制函数Graphc

> ID：15633973
> 
> 赞同：2
> 
> 时间：2013-03-26T09:52:54.077
> 
> 标签：latex

我正在用 LaTeX 写一篇论文，有一个结论：

```
H' = h - \sum_{i=1}^{h-1}[1-(1-p)^i]^m 
```

但是我想根据不同的 p 和 m 显示 H' 的图形（假设 h=4）。我尝试在 Mac OS X 上使用 Grapher 绘制图形，但我认为我不能只将 LaTeX 代码复制到 Grapher 中。任何人都可以推荐一个可以根据 LaTeX 代码绘制 H 图形的软件吗？

# c++ - 如何在 Windbg 的析构函数中设置断点？

> ID：15633974
> 
> 赞同：2
> 
> 时间：2013-03-26T09:52:54.587
> 
> 标签：c++, windbg

我有一个`A`大致如下所示的类型：

```
class A {
public:
  A() { /*stuff*/ }
  virtual ~A() { /*stuff* }
}; 
```

我想要做的是在`A`'s 的析构函数中设置一个断点。

到目前为止我没有成功的尝试：

```
bu myModule!A::~A()
bu myModule!A::~A
bu @@(myModule!A::~A())
bu @@(myModule!A::~A) 
```

这些尝试给了我`Couldn't resolve error at ...`或者`Type conflict error at ...`。

在析构函数中设置断点的正确语法是什么？在这种情况下，有没有办法增加 Windbg 给出的错误消息的详细程度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:14:53.777

您需要检查析构函数的正确符号，因此使用`x`我们可以确定：

```
x myModule!A::~* 
```

这应该输出类似：

```
12345678       myModule!A::~A (void) 
```

或类似的东西

然后你可以设置你的断点：

```
bp 12345678 
```

或者

```
bu myModule!A::~A (void) 
```

要回答您的第二个问题，如果您使用标志`-v`或按`ctrl`+ `alt`+启动 WinDbg，`v`则此输出详细输出请参阅此[链接](http://msdn.microsoft.com/en-gb/library/windows/hardware/ff561306%28v=vs.85%29.aspx)和此[链接](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540340%28v=vs.85%29.aspx)

# dynamics-crm-2011 - CRM 插件部署

> ID：15633975
> 
> 赞同：2
> 
> 时间：2013-03-26T09:52:58.023
> 
> 标签：dynamics-crm-2011, dynamics-crm-online

我创建了一个 crm 插件库 (dll)，然后将此 dll 添加到 CRM 包中以进行部署。

我想为插件添加 6-7 个步骤。

1）有没有办法使用Visual Studio为插件添加步骤。我们可以使用插件注册工具。

2）如何调试插件。（内部部署和在线CRM）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:35:33.903

如果您安装[CRM SDK](http://www.microsoft.com/en-gb/download/details.aspx?id=24004)中提供的开发工具包，您将获得添加到 Visual Studio 的一系列工具，其中包括开发和部署所有主要 CRM 2011 资产（包括插件、工作流、Web 资源等）的能力。截至最新SDK 发布该工具现在通过单独的安装程序支持 Visual Studio 2010 和 2012。

该工具的一个关键部分是集成到 Visual Studio 中的 CRM Explorer。从这里，您可以浏览组织内的所有实体，并直接在 Visual Studio 中为插件生成存根代码。部署插件后，您可以使用 CRM Explorer 添加其他步骤。

SDK 在工具包的安装文件夹中包含一个很好的 README。读一读。

要在本地调试插件，如果在本地运行 CRM，如果在没有隔离的情况下运行，则需要附加到 w3wp.exe，否则附加到沙箱进程（进程的全名我不知道）。该工具包使调试更容易，因为它确保您的 PDB 文件可用。

您无法调试部署到 CRM Online 的插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:25:16.727

如果您构建[自己的](http://msdn.microsoft.com/en-us/library/gg309620.aspx)注册工具，则可以直接使用 Visual Studio 进行注册，您不能。

*   请参阅[此处](http://msdn.microsoft.com/en-us/library/gg328574.aspx)的简历，了解如何在所有配置情况下（在线、离线、沙箱或异步注册插件）调试插件。
*   请参阅[此处](http://crm.ipiyush.me/debug-plugin-in-dynamics-crm-2011/)如何使用注册工具进行调试。
*   看[这里](http://weblogs.asp.net/pabloperalta/archive/2010/12/01/how-to-remote-debug-dynamics-crm-plugins-and-workflow-assemblies.aspx)如何远程调试。
*   看[这里](http://mscrmtech.com/2010112682/mscrm-2011-useful-itracingservice-addiion-when-creating-plugin-assemblies)在线调试crm，使用ITracingService，不是一步一步的，但是对调试很有用。

# javascript - 在 Sencha Touch 2 中使用不同的代理存储动态定义和加载视图

> ID：15633976
> 
> 赞同：2
> 
> 时间：2013-03-26T09:52:58.913
> 
> 标签：javascript, model-view-controller, proxy, sencha-touch-2

我正在使用 Sencha Touch 2 创建一个移动应用程序，它将根据来自服务器的 Json 响应动态加载其视图。

这意味着在加载视图之前，我必须用一些通用元素组成视图。例如，如果我从服务器接收到与**List**视图对应的 Json 字符串，我将不得不用**store**和**proxy**动态地填充列表项（*名称*、*url*、*描述*） 。

 ****这可行，但是我想在该列表中选择一些项目并加载另一个列表，但这次我想更改代理。我的新代理是所选项目的*url*字段。我从所选项目中获取*url*字段并更改代理，但这会带来一个问题：

我正在使用**Ext.navigation.View**，并且我想维护导航历史记录。在上述情况下，如果我返回导航历史记录，则第一个列表中的项目将更改为最后一个列表中的项目。

我正在寻找某种工作流来实现视图的动态加载，具体取决于每个视图的独立数据，并始终维护 MVC-Store 模式和导航历史记录。

这是我的列表项模型：

```
Ext.define('ExampleApp.model.ListItem', {
    extend: 'Ext.data.Model',
    config: {
        fields: ['name', 'url', 'descriprion']
    }
} 
```

这是列表的商店：

```
Ext.define('ExampleApp.store.ListItems', {
    extend: 'Ext.data.Store',
    config: {
        autoLoad: false,
        model: 'ExampleApp.model.ListItem',
        proxy: {
            type: 'jsonp'
            url: 'http://mydomain.com/myjsonresponse',
            reader: {
                type: 'json',
                useSimpleAccessors: true
            }
        }
    }
}) 
```

这是我的看法：

```
Ext.define('ExampleApp.view.MyList', {
    extend: 'Ext.List',
    xtype: 'mylist',
    requires: ['ExampleApp.store.ListItems'],

    config: {
        title: 'My List',        
        itemTpl: '{name} - {description}',
        store: 'ListItems'
    }
}) 
```

这是在我的列表的**itemtap**事件上调用的函数：

```
listItemTapped: function (view, index, target, record, event) {
    var listItems = Ext.getStore('ListItems');

    listItems.getProxy().setUrl(record.get('url'));
    listItems.load();

    this.getMain().push({
        xtype: mylist
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:44:34.963

您可以尝试为每个列表创建单独的商店，而不是重用现有的商店。

```
listItemTapped: function (view, index, target, record, event) {
    var listItems = Ext.create('ExampleApp.store.ListItems', {newUrl : record.get('url')});
    listItems.load();

    this.getMain().push({
        xtype: mylist,
        store: listItems
    });
} 
```

并添加初始化函数以使用 newUrl：

```
Ext.define('ExampleApp.store.ListItems', {
    extend: 'Ext.data.Store',
    config: {
        autoLoad: false,
        newUrl : null,
        model: 'ExampleApp.model.ListItem'
    },
    initialize : function() {
        this.setProxy({
            type: 'jsonp'
            url: this.config.newUrl,
            reader: {
                type: 'json',
                useSimpleAccessors: true
            }
        });
    }
}) 
```

一旦它们的视图被弹出，您可能想要销毁这些商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T10:19:19.143

@ThinkFloyd，同意我们在离开视图时需要销毁存储，因为稍后当应用程序具有许多视图并且具有包含大量数据的较大存储时，它会产生问题。我最近面临同样的问题，这对我很有帮助......谢谢****

# php - mysqli execute() 成功执行但未获取记录

> ID：15633978
> 
> 赞同：1
> 
> 时间：2013-03-26T09:53:01.447
> 
> 标签：php, mysqli

我正在使用 mysqli 执行选择查询...

```
/** ------------  queries ----------      **/
        $stmt = $mysqli->prepare("SELECT * FROM dept");

        if(! $stmt)
        {
            echo "statement not prepared well";
        }
        else
        {
            echo $mysqli->error;
        }

        if (!$stmt->execute()) {
         echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
    }
 // add else
 else{
  echo "Query is successfully executed but no result fetch";
   }

        if (!($res = $stmt->get_result())) {
            echo "Getting result set failed: (" . $stmt->errno . ") " . $stmt->error;
        }
        /** ------------------------------- **/

        #------result ----
        var_dump($res->fetch_all());
        #---------(/result)---- 
```

我的问题是 execute() 工作正常，但无法获取记录...该表中有大量数据...它显示“查询已成功执行但未获取结果”以及之后`Fatal error: Call to undefined method mysqli_stmt::get_result()`

我究竟做错了什么 .. ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:58:53.163

打破以下

```
if (!($res = $stmt->get_result())) { 
```

至

```
$res = $stmt->get_result();
if( !$res ) { 
```

或者更确切地说

```
$res = $stmt->get_result();
if( $res->num_rows == 0 ) { 
```

* * *

错误（我之前没有注意到）是因为

> mysqli_stmt::get_result() 仅适用于**[`mysqlnd`](http://www.php.net/manual/en/book.mysqlnd.php)**.

您需要按照[此处的指南](http://www.php.net/manual/en/mysqlnd.install.php)安装/配置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:13:11.237

> 我究竟做错了什么 .. ？

您正在使用 mysqli 而不是[PDO](https://stackoverflow.com/tags/pdo/info)

整个代码可以使用 PDO 在这几行中重写：

```
$stmt = $pdo->prepare("SELECT * FROM dept");
$stmt->execute();
var_dump($stmt->fetchall()); 
```

没有所有这些无数`if`和`echo`。
当您从准备好的语句开始时，差异会更大

# asp.net-mvc - mvc - jQuery ajax 数据表操作链接

> ID：15633989
> 
> 赞同：0
> 
> 时间：2013-03-26T09:53:46.220
> 
> 标签：asp.net-mvc, datatables

我有一个数据表，其中的数据（来自数据库）正在填充 ajax，我还想要一个带有“详细信息”的新表行来显示所选项目的更多详细信息，但该表只允许来自数据库的数据。这是视图

```
 <script language="javascript" type="text/javascript">

     $(document).ready(function () {

         $('#myDataTable').dataTable({
             "bProcessing": false,
             "bServerSide": true,
             "sAjaxSource": 'AjaxDataProvider',
             "aoColumns": [
                                     {
                                         "sName": "ID",

                                     },
                                     { "sName": "Student_naam" },
                                     { "sName": "klas" },
                                     { "sName": "adres" },
                                     { "sName": "woonplaats" },
                                     { "sName": "details" }
             ]

         })
     });

    </script> 
```

我在下面有一个表格，上面有一些代码，包括：

```
<td>
            @Html.ActionLink("Details", "Index", "StudentGegevens", new {id = item.studentnr})
        </td> 
```

这是我的控制器

```
public ActionResult AjaxDataProvider(JQueryDataTableParamModel param)
    {
        var allStudents = hoi.STUDENT.ToList();
        IEnumerable<STUDENT> filteredStudents;
        if (!string.IsNullOrEmpty(param.sSearch))
        {
            //Used if particulare columns are filtered 
            var roepnaamFilter = Convert.ToString(Request["sSearch_1"]);
            var adresFilter = Convert.ToString(Request["sSearch_2"]);
            var woonplaatsFilter = Convert.ToString(Request["sSearch_3"]);
            var klasFilter = Convert.ToString(Request["sSearch_4"]);

            //Optionally check whether the columns are searchable at all 
            var isNameSearchable = Convert.ToBoolean(Request["bSearchable_1"]);
            var isAddressSearchable = Convert.ToBoolean(Request["bSearchable_2"]);
            var isTownSearchable = Convert.ToBoolean(Request["bSearchable_3"]);
            var isClassSearchable = Convert.ToBoolean(Request["bSearchable_4"]);

            filteredStudents = hoi.STUDENT.ToList()
               .Where(c => isNameSearchable && c.roepnaam.ToLower().Contains(param.sSearch.ToLower())
                           ||
                           isAddressSearchable && c.adres.ToLower().Contains(param.sSearch.ToLower())
                           ||
                           isTownSearchable && c.woonplaats.ToLower().Contains(param.sSearch.ToLower())
                           ||
                           isClassSearchable && c.klas.ToLower().Contains(param.sSearch.ToLower()));
        }
        else
        {
            filteredStudents = allStudents;
        }

        var isNameSortable = Convert.ToBoolean(Request["bSortable_1"]);
        var isAddressSortable = Convert.ToBoolean(Request["bSortable_2"]);
        var isTownSortable = Convert.ToBoolean(Request["bSortable_3"]);
        var isClassSortable = Convert.ToBoolean(Request["bSortable_4"]);
        var sortColumnIndex = Convert.ToInt32(Request["iSortCol_0"]);
        Func<STUDENT, string> orderingFunction = (c => sortColumnIndex == 1 && isNameSortable ? c.roepnaam :
                                                      sortColumnIndex == 2 && isClassSortable ? c.klas :
                                                      sortColumnIndex == 3 && isAddressSortable ? c.adres :
                                                      sortColumnIndex == 4 && isTownSortable ? c.woonplaats :
                                                      "");

        var sortDirection = Request["sSortDir_0"]; // asc or desc
        if (sortDirection == "asc")
        {
            filteredStudents = filteredStudents.OrderBy(orderingFunction);
        }
        else
        {
            filteredStudents = filteredStudents.OrderByDescending(orderingFunction);
        }

        var displayedStudents = filteredStudents.Skip(param.iDisplayStart).Take(param.iDisplayLength);
        var result = from c in displayedStudents select new[] { Convert.ToString(c.studentnr), c.roepnaam, c.klas, c.adres, c.woonplaats, "Here is the thing I dont know what to fill in" };
        return Json(new
        {
            sEcho = param.sEcho,
            iTotalRecords = allStudents.Count(),
            iTotalDisplayRecords = filteredStudents.Count(),
            aaData = result
        },
                    JsonRequestBehavior.AllowGet);
    } 
```

还有一些公共整数

```
public class JQueryDataTableParamModel
    {   
        public string sEcho { get; set; }

        public string sSearch { get; set; }

        public int iDisplayLength { get; set; }

        public int iDisplayStart { get; set; }

        public int iColumns { get; set; }

        public int iSortingCols { get; set; }

        public string sColumns { get; set; }

    } 
```

我想知道我应该在 var Result 中放什么。

除链接外，所有内容均正确显示，我尝试了 Url.Action 之类的方法，但没有运气，它没有返回链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:39:08.140

不太确定要显示什么样的详细数据，但您可以检查方法：**[fnrender 或 mRender](http://www.datatables.net/ref)**，下面是一个示例。

```
"aoColumns": [
                                     {
                                         "sName": "ID",

                                     },
                                     { "sName": "Student_naam" },
                                     { "sName": "klas" },
                                     { "sName": "adres" },
                                     { "sName": "woonplaats" },
                                     { "sName": "details",
  "mRender": function ( data, type, full ) {
        return '<a href="'+data+'">Download</a>';
      } }
             ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:27:40.967

抱歉，我是个笨蛋，我记得我可以用 HTML 将字符串放入控制器中，然后将其转换为 HTML ->。

`var result = from c in displayedStudents select new[] { Convert.ToString(c.studentnr), c.roepnaam, c.klas, c.adres, c.woonplaats, "<a style='font-family:arial' href='" + "../StudentGegevens/index/" + c.studentnr + "' />Details</a>"};`

大声笑，我不是最聪明的人，很抱歉问这个问题。

# java - 改进交叉算法

> ID：15633994
> 
> 赞同：0
> 
> 时间：2013-03-26T09:53:59.043
> 
> 标签：java, intersection, sortedlist

我有一个算法来构建两个排序列表的交集。如果我在性能测试中将它与 java.util.BitSet 进行比较，我的算法很慢。

```
 public static List<Integer> intersection(List<Integer> list1, List<Integer> list2) {
            int size1 = list1.size(), size2 = list2.size();
            int capacity = size1 < size2 ? size1 : size2;
            List<Integer> intersection = new ArrayList<Integer>(capacity);
            int i1 = 0, i2 = 0;
            while (i1 < size1 && i2 < size2) {
                if (list1.get(i1) < list2.get(i2))
                    i1++;
                else if (list2.get(i2) < list1.get(i1))
                    i2++;
                else {
                    intersection.add(list2.get(i2++));
                    i1++;
                }
            }
            return intersection;
        } 
```

有人看到有什么改善吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:57:08.410

您的函数的输入是否总是类型`ArrayList`？

*   如果是这样，从算法上讲，您的方法没有任何问题。我会做两个改变：
    1.  我会将参数类型更改为`ArrayList<Integer> list1, ArrayList<Integer> list2`;
    2.  我只会打`list1.get(i1)`一次电话`list2.get(i2)`。这可能会或可能不会对性能产生任何影响，但从风格上讲，我更喜欢将其考虑在内。
*   如果您需要支持任何列表，那么我会根据两个迭代器重写该函数，因为调用`get(index)`可能非常昂贵。

最后，在测试性能时，请务必遵循[如何在 Java 中编写正确的微基准测试中给出的建议？](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:20:33.150

你应该知道这一点：

```
List<Integer> intersection = new ArrayList<Integer>(capacity); 
```

分配一个内部数组 size `capacity`。

假设`list1.size() == 5000`、`list2.size() == 5000`、 和`intersection(list1, list2).size() == 3`，该方法将分配 4997 个无用整数。

尝试使用合理的容量（取决于方法的使用）或将其保留为默认值（即 10）。

（请记住，分配大小数组`n`（或*容量*`ArrayList`数组）的复杂性是。） *`n`**`O(n)`***

# php - 如何使用 zend service amazon 将文件从网站复制到亚马逊存储桶？

> ID：15633996
> 
> 赞同：0
> 
> 时间：2013-03-26T09:53:59.763
> 
> 标签：php, zend-framework, amazon-s3

我需要将资源从网站复制到我的 s3 存储桶。例如，像这样的图像“ [http://upload.wikimedia.org/wikipedia/commons/6/63/Wikipedia-logo.png](http://upload.wikimedia.org/wikipedia/commons/6/63/Wikipedia-logo.png) ”我需要将其复制到我的 s3 存储桶中的文件夹中。这可能使用 Zend_Service_Amazon 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:43:50.180

您必须使用流包装器。我还没有处理图像文件，但希望它能工作。

```
 $s3 = new Zend_Service_Amazon_S3($my_aws_key, $my_aws_secret_key);
      $s5="s".rand();
      $s3->registerStreamWrapper($s5);
       //$bucketname- your bucket name
      mkdir($s5."://".$bucketname);
        //$path - where you want to store your file including bucketname
      $s1=$s5."://".$path;
      $filedata = file_get_contents('yourimage url');
      file_put_contents($s1, $fildata); 
```

# javascript - Javascript字符串作为闭包函数

> ID：15633998
> 
> 赞同：1
> 
> 时间：2013-03-26T09:54:01.337
> 
> 标签：javascript, jquery, json, twitter-bootstrap, highcharts

我正在使用 PHP 等服务器端技术生成 Highcharts JSON。

我正在从浏览器发送一个 AJAX 请求以获取完整的 Highcharts JSON，然后呈现它。

例如我的 AJAX 响应是

```
 [
   {
      "plotOptions":{
         "enabled":false,
         "series":{
            "stacking":"",
            "point":{
               "events":{
                  "click":"function(e){console.log(e.point.config); console.log(e.point.category)}"
               }
            }
         }
      },
      "chart":{
         "type":"column",
         "renderTo":"leftTopContainer",
         "polar":false
      },
      "series":[
         {
            "name":"netpos",
            "data":[6700,8200,11500]
         }
      ],
      "title":{
         "text":"Future Financial Commitments-5Y Yr View"
      },
      "xAxis":{
         "categories":["2010","2011","2012"]
      }
   }
]; 
```

**获得服务器端响应后，我正在使用以下代码渲染它**

```
new Highcharts.Chart(responseData); 
```

**一切正常，除了事件**

```
 "events":{
    "click":"function(e){console.log(e.point.config); console.log(e.point.category)}"
               } 
```

正如您在 JSON 响应中看到的那样，我在双引号（“”）中得到了函数，

**我的问题是**

1.  由于这是一个字符串，我不能将其称为函数。

2.  如果我在 PHP 中删除 (" ")，则 jQuery Ajax 会抛出错误为“无效 JSON 或解析错误”

3.  我不允许使用 eval() 因为这不是一个好的编程习惯。

有没有办法让我可以遍历 JSON 对象并将字符串转换为函数，以便自动调用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:57:37.300

你想要做的就是`eval()`使用它。您想执行从服务器发送的未知代码。无论你尝试什么方法，最后你`eval()`都会做同样的事情。

如果您确定，您发送的代码没问题，那么使用它就没有坏处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:56:47.057

`eval()`是你想要的，这真的是唯一的方法。

为什么不允许使用它？它并不像描绘的那样邪恶，在这种情况下很好。如果您使用解决方法，您基本上将重写`eval()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:22:33.067

在 JSON 中，您无法添加函数定义，但请查看：[https](https://groups.google.com/forum/?fromgroups=#!topic/json-schema/7f5Wd5yRluo) ://groups.google.com/forum/?fromgroups=#!topic/json-schema/7f5Wd5yRluo也许它会有所帮助。