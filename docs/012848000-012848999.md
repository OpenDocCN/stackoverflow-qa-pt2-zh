# StackOverflow 问答 12848000-12848999

# android - 想要从 Android 中的后台线程对 UI 进行循环更新时的线程问题

> ID：12848004
> 
> 赞同：2
> 
> 时间：2012-10-11T20:29:04.180
> 
> 标签：android, multithreading

我正在尝试在 Android 中循环更新 UI，但我收到一条错误消息，提示我在错误的线程上。我不明白为什么，因为我使用的是处理程序。有没有人有什么建议？

```
TextView textView;
protected Handler handler=new Handler(){
    @Override
    public void handleMessage(Message msg) {
        super.handleMessage(msg);
        textView.setText((String)msg.obj);  
    }
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_thread_sleep);
    textView=(TextView) findViewById(R.id.TextView1);
    init();
}

public void init()
{
    CounterThread counterThread=new CounterThread();
    counterThread.start();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_thread_sleep, menu);
    return true;
}

class CounterThread extends Thread {

    @Override
    public void run() {
        super.run();
        int counter=0;

        handleString("in Thread handler");
        try{Thread.sleep(2000); }catch(Exception e){Log.d("Exception", e.toString());}

        while(counter<10)
        {
            counter++;
            String counterString=String.valueOf(counter);
            handleString(counterString);

            try{Thread.sleep(2000); }catch(Exception e){Log.d("Exception", e.toString());}
        }//while
    }//run 

    public void handleString(String string)
    {
        Message msg=handler.obtainMessage();
        msg.obj="counter"+" "+string;
        handler.handleMessage(msg);
    }

}//thread 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T20:44:03.807

你调用`Handler`不正确。从您的后台线程中，调用`handler.sendMessage()`以将消息发布到队列中。这将随后在处理它时调用该`handleMessage()`方法。`Handler`

附带说明一下，如果您只使用后台线程在再次更新 UI 之前等待一段时间，您可能会考虑改用 using `sendMessageDelayed()`。 `Handler`能够自己安排时间，而无需创建第二个`Thread`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T20:58:51.297

发生这种情况是因为您没有在 UI 线程上执行代码。所以，你应该使用 runOnUiThread 方法：http: [//developer.android.com/reference/android/app/Activity.html#runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread(java.lang.Runnable) (java.lang.Runnable )

所以，它是这样的：

```
protected Handler handler=new Handler(){
    @Override
    public void handleMessage(Message msg) {
        super.handleMessage(msg);
        final String msgString = (String)msg.obj;
        runOnUiThread(new Runnable() {
            @Override
            void run() {
                textView.setText(msgString);
            }
        });
    }
}; 
```

# ios - 推送配置文件是否应该包含公司证书？

> ID：12848006
> 
> 赞同：1
> 
> 时间：2012-10-11T20:29:09.707
> 
> 标签：ios, xcode

在使用临时构建/分发时，我在让推送通知工作时遇到问题，尽管在使用开发配置文件构建时推送正在工作。

查看推送配置文件，我可以看到它列出了一些开发人员和 adp 代理的证书。它还应该包含公司证书吗？即以公司命名并且出现在临时分发配置文件中的证书？如果是这样，它是如何添加的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T20:48:28.007

小心证书。您拥有开发和分发证书。推送通知证书也是如此。

在配置文件中，您必须确保 appID 具有与之关联的分发证书。然后，您需要创建分发配置证书。请注意，这对于开发、临时和应用商店分发会有所不同。

您还需要更改您的 APNS 服务器正在使用的证书。最后，确保在 xcode 中，您的应用在构建项目和目标时使用正确的证书。

# c++ - lambda 捕获模板化参数的编译错误

> ID：12848010
> 
> 赞同：1
> 
> 时间：2012-10-11T20:29:20.077
> 
> 标签：c++, templates, gcc, lambda, c++11

> **可能重复：**
> [当对象类型是模板参数时，有没有办法将模板参数传递给对象上的函数？](https://stackoverflow.com/questions/7512224/is-there-a-way-to-pass-template-arguments-to-a-function-on-an-object-when-the-ob)

当我遇到以下问题时，我最近一直在学习如何在 C++ 中使用 lambda。

当我编写一个捕获模板化变量的 lambda 时（通过引用或复制，没关系），我得到一个奇怪的编译错误，与 lambda 本身无关。测试代码如下：

```
// templated.cpp  
#include <iostream>
#include <vector>

template<class T, class Function>
Function for_each_index(const T& v, Function f)
{
    for (unsigned int i = 0; i < v.size(); ++i) { f(i); }
    return f;
}

class Test
{
public:
    template<class T>
    T f() { return 1; }
};

template<class T>
void fun(T& v)
{
    for_each_index(v, [&v] (unsigned int i) {
        v[i].f<float>();
    });
}

int main()
{
    std::vector<Test> v;
    v.push_back(Test());
    v.push_back(Test());
    v.push_back(Test());
    fun(v);
    return 0;
} 
```

上述代码的编译失败并显示以下消息：

```
$ g++ -Wall templated.cpp -std=c++0x
templated.cpp: In lambda function:
templated.cpp:23:16: error: expected primary-expression before ‘float’
templated.cpp:23:16: error: expected ‘;’ before ‘float’ 
```

但是，如果我将 lambda 移动到`main`（那里没有模板），它编译得很好：

```
// simple.cpp
#include <iostream>
#include <vector>

template<class T, class Function>
Function for_each_index(const T& v, Function f)
{
    for (unsigned int i = 0; i < v.size(); ++i) { f(i); }
    return f;
}

class Test
{
public:
    template<class T>
    T f() { return 1; }
};

int main()
{
    std::vector<Test> v;
    v.push_back(Test());
    v.push_back(Test());
    v.push_back(Test());
    for_each_index(v, [&v] (unsigned int i) {
        v[i].f<float>();
    });
    return 0;
} 
```

我`for_each_index`在这里使用，因为我在自己的代码中使用了类似的“迭代工具”，上面的错误来自于此（原始代码进行了一些繁重的图像处理，此代码是概念证明）。然而，它在这里服务于第二个目的 - 避免将模板化变量放入 lambda 参数中。

那么，这是一个编译器错误吗？还是我做错了什么？如果是这样，您可以建议什么可能的解决方法？

仅供参考，我使用的是标准的 Ubuntu-issue`g++`版本`4.6.3`。

# html - 已弃用的 PeerConnection API 的替代品是什么？

> ID：12848013
> 
> 赞同：1
> 
> 时间：2012-10-11T20:29:22.357
> 
> 标签：html, websocket, p2p, webrtc

PeerConnection API 已弃用。你知道它的替代品吗？

我正在使用 webRTC 连接来自不同位置的两个视频流。我想使用 PeerConncetion API（或其他可靠的技术）。

Google Chrome 博客上的最新消息链接到由于弃用而不再有效的示例。[http://www.webrtc.org/blog/peerconnectionisnowdeprecatedpeerconnection](http://www.webrtc.org/blog/peerconnectionisnowdeprecatedpeerconnection)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:41:53.327

名称将更改为 RTCPeerConnection：请参阅[WebRTC 博客](http://www.webrtc.org/blog/apiupdatedtoreflectlatesteditorsdraft)。

Chrome Canary 目前支持 webkitRTCPeerConnection：看看 [apprtc.appspot.com](http://apprtc.appspot.com)示例。

# tfs - Total Task hour not in sync with user story remaining hour

> ID：12848019
> 
> 赞同：0
> 
> 时间：2012-10-11T20:29:47.693
> 
> 标签：tfs, tfs-2010

the roll-up of tasks does not sum up the remaining amount of work for the userstory. If you go to a specific story and look at the lower level tasks under links they are not in sync with the userstory. we are using visual studio, scrum v2 on tfs 2010.

for ex: if there are 5 task in a user story, out which 1 task hour=8, rest zero. the total task hour sum up (i.e remaining hour) as 144 in user story.

Need help/suggestion/advice

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T02:01:37.967

使用名为[TFS Aggregator的第 3 方工具](http://tfsaggregator.codeplex.com/)

> 此 TFS 2010 服务器端插件支持动态计算 TFS 中的字段值。（例如：开发工作 + 测试工作 = 总工作）。它支持相同的工作项和父子链接。它还支持聚合字符串值（即，子项已完成，因此父项已完成）。

# php - 如何使用逗号分隔的 PHP 和 MySQL 标记系统获取相关帖子？

> ID：12848020
> 
> 赞同：1
> 
> 时间：2012-10-11T20:29:52.170
> 
> 标签：php, database, web, tags, tagging

我正在使用 PHP 和 MySQL 创建一个网站来发布相关网站。我正在为这个站点使用一个带有逗号分隔标签的标签系统，例如我的标签看起来像：**php、mysql、code、programming**。

我使用这个逗号分隔标记系统的原因是因为**我希望用户能够为他的帖子插入他想要的任何类型的标记**。

我已经从这个网站和互联网上进行了搜索，但答案与我的问题并不真正相关。许多标记系统使用三个表，如 item、tag_map 和 tag，我认为它不适用于逗号分隔的标记系统。

到目前为止，我已经创建了一个包含名称和标签字段的表。我发现的最佳解决方案是使用**Tf–idf，词频–逆文档频率**来相对于其内容对帖子进行加权。

有没有其他好的解决方案？如果没有，如果有人可以使用 php 代码解释这个 tf-idf 示例，我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:03:56.497

这不是不应该做的方式，就像评论中提到的那样。你应该把它分成三个表：

存储帖子本身的表；

```
Table posts
-----------
id
text 
```

所有标签的表格；

```
Table tags
-----------
id
name 
```

最后是一张连接两者的表；

```
Table postTags
-----------
id
postId
tagId 
```

从这些中选择数据时，您可以使用如下查询：

```
SELECT * FROM posts p
INNER JOIN postTags pt ON pt.postId = p.id
INNER JOIN tags t ON pt.tagId = t.id 
```

# javascript - Using Solr or ElasticSearch as API best practices

> ID：12848033
> 
> 赞同：1
> 
> 时间：2012-10-11T20:30:36.457
> 
> 标签：javascript, api, solr, elasticsearch

I'm looking at using Solr or ElasticSearch for a few clientside javascript apps. In one instance I could call the API directly.

I'm pretty new to this concept and one of the first things that came to mind is how do you avoid security related issues like people issuing delete commands against the API? Is it appropriate to hide the search API behind a layer, like a small PHP or Sinatra API to that client interacts with?

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T20:48:39.637

> 将搜索 API 隐藏在层后面是否合适，例如与客户端交互的小型 PHP 或 Sinatra API？

如果您关心安全性，那么答案无疑是 -**是**的。
NodeJS 非常适合这类事情：授权客户端请求，将查询发送到 elasticsearch/solr，然后将其发送回客户端（*在返回的路上有或没有数据处理*）。如果您有很多连接，PHP 不太适合（nodejs 非常适合）。

* * *

在 elasticsearch 的博客中查看[本文](http://www.elasticsearch.org/tutorials/2012/08/22/javascript-web-applications-and-elasticsearch.html)的第二部分。有一个很好的代理说明，以及代理的简单[Ruby 代码](https://gist.github.com/3369662#file_proxy.rb)。

那里的相关报价：

> 这一切都可以通过利用 elasticsearch 公开 HTTP API 的事实来实现。通过在其前面放置一个代理，我们可以将身份验证和授权例程隔离到单独的组件中，从而有效地分解堆栈中的职责并允许对各个部分进行更好的可测试性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T20:47:29.997

您可以添加一个充当代理的层，但最好的方法是使用复制（两个或更多实例 - [http://wiki.apache.org/solr/SolrReplication](http://wiki.apache.org/solr/SolrReplication)）

这样，您始终拥有一个有效、强大且通常是私有的主索引，您可以在其上添加、删除和做任何您想做的事情，以及一个从属索引，它只是主索引的副本，并且只提供查询 API。

# mysql - 如何让 SQL 搜索忽略特定于语言的特殊字符？

> ID：12848051
> 
> 赞同：4
> 
> 时间：2012-10-11T20:31:57.323
> 
> 标签：mysql, sql

我有一个 sql 表，其中包含我的语言（斯洛伐克语）的特殊字符的数据，例如：

```
 id | name
 1    František
 2    Ján
 3    Júlia 
```

现在，我需要在这个表上运行搜索（SELECT ... %string%），搜索`julia`时应该匹配`Júlia`，甚至一般情况下`ju`应该找到`Júlia`。

我的数据库已经不区分大小写了，我只需要让它忽略那些特殊字符。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T20:37:34.433

尝试

```
select * from t
where name like 'Julia' collate utf8_unicode_ci 
```

您可以在选择中使用不同的排序规则。
您可以通过以下方式查看您的安装支持的排序规则

```
SELECT COLLATION_NAME FROM INFORMATION_SCHEMA.COLLATIONS 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/3635a/8)
[MySQL 排序规则](https://dev.mysql.com/doc/refman/5.5/en/charset-charsets.html)

# python - 无法在函数中正确获取颜色

> ID：12848062
> 
> 赞同：0
> 
> 时间：2012-10-11T20:32:54.663
> 
> 标签：python, turtle-graphics

```
from turtle import *

reset()
setworldcoordinates(0, 500, 600, 0)

def rectangle(a, b, c, d, pen_color, fill_color, pensize):
    up()
    setpos (a,b)
    down()
    fd (c-a)
    left(90)
    fd(d-b)
    left (90)
    fd (c-a)
    left (90)
    fd (d-b)
    left(90)

    p = pen_color.strip("pen_color=")
    pen_color(p)
    s = fill_color.strip("fill_color=")
    fill_color(värv2)
    a = pensize.strip("pensize=")
    a = int(a) 
    pensize(a)

rectangle(10,10,200,100, pen_color="red", fill_color="blue", pensize=3) 
```

问题是我无法在最后一行获得这些颜色。如果我启动程序，它不会使 pen_color red 和 fill_color blue 和 pensize 3。它保持正常。知道如何使这些颜色正确吗？如何使该功能从最后一行读取这些颜色？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:48:54.477

在前两个调用中`strip`删除字符串参数并使用最后一个删除整行`strip`：

```
p = pen_color.strip()
pen_color(p)
s = fill_color.strip()
fill_color(s)
a = int(a) 
pensize(a) 
```

此代码块必须在实际绘图完成之前，直接在`def rectangle...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-14T23:29:16.847

这个问题似乎归结为两个问题：对 OP 的误解，即当您传递命名参数时，您必须以某种方式剥离名称；通配符导入海龟然后使用匹配海龟函数名称和/或不正确海龟方法名称的变量的 OP 部分的设计错误。修改后的代码：

```
from turtle import *

setworldcoordinates(0, 500, 600, 0)

def rectangle(a, b, c, d, pen_color, fill_color, pen_size):
    pencolor(pen_color)
    fillcolor(fill_color)
    pensize(pen_size)

    up()
    setpos(a, b)
    down()

    begin_fill()
    fd(c - a)
    left(90)
    fd(d - b)
    left(90)
    fd(c - a)
    left(90)
    fd(d - b)
    end_fill()

    left(90)

rectangle(10, 10, 200, 100, pen_color="red", fill_color="blue", pen_size=3)

mainloop() 
```

# android - 如何在edittext中设置默认数字键盘

> ID：12848068
> 
> 赞同：2
> 
> 时间：2012-10-11T20:33:23.157
> 
> 标签：android, keyboard, textview

使用 EditText 我想默认使用电话键盘（带字母）（！），但使用

```
android:inputType="phone" 
```

当我轻轻更换键盘时，android 会禁用字母输入。而且我还需要在需要时使用字母我应该如何声明 inputType 或其他默认情况下使用电话键盘并且不会失去字母输入能力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:49:17.727

正如您可以在文档中阅读的那样：http: [//developer.android.com/reference/android/widget/TextView.html#attr_android :inputType](http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType)

您可以使用两种类型的 inputType： 必须是以下常量值中的一个或多个（由“|”分隔）。

所以，你应该使用类似的东西： android:inputType="phone|text"

[]s 内托

# jquery - 查找具有给定类的下一个元素，无论它出现在 DOM 中的什么位置

> ID：12848072
> 
> 赞同：1
> 
> 时间：2012-10-11T20:33:32.747
> 
> 标签：jquery, jquery-selectors

我很难弄清楚我认为应该相对简单的东西。

**我需要获取下一次出现的类 (div.content)，它可能出现在 DOM 中的某个位置**

下面是一些简化的标记，代表我所拥有的：

```
<div class="container">
  <div class="content">
    Example content #1    <a href="#" class="next">Next</a>
  </div>

  <div class="content">
    Example content #2    <a href="#" class="next">Next</a>
  </div>
</div>

<div class="container">
  <div class="content">
    Example content #1    <a href="#" class="next">Next</a>
  </div>

  <div class="content">
    Example content #2    <a href="#" class="next">Next</a>
  </div>
</div> 
```

在给定中显示下一个`content`div`container`效果很好，当我尝试从 a 中的**最后** `content`一个div到 next 中`container`的**第一个** div 时，问题就来了。`content``container`

几个重点：-

*   默认情况下，**只有第一个** `content`div 是可见的，其余的是隐藏的，尽管我需要一个解决方案，如果例如`content`第四个 div 中的第二个 div`container`是可见的。

*   只有一个`content`div 是可见的。

到目前为止，我设法提出的唯一解决方案似乎非常麻烦，尽管它*确实*有效。

```
$('.next').click(function() {
    $theContent = $(this).parent('.content');
    $theContent.hide();

    if ($theContent.next('.content').length) {
        $theContent.next('.content').show();
    } else if ($theContent.parent('.container').next('.container')
        .children('.content').length
    ) {
        $theContent.parent('.container').next('.container')
            .children('.content:first').show();
    } else {
        // reached the end or something went wrong
    }
}); 
```

这样做的主要缺点是它依赖于具有上述 DOM 结构，我确信存在一种方法来选择具有给定类的下一个元素，而不管它出现在 DOM 中的什么位置。

**理想情况下，我想要一个不依赖于任何给定 DOM 结构的解决方案，如果这不可能，任何替代解决方案都会有所帮助！**

[这是上面示例的小提琴](http://jsfiddle.net/MgP6N/2/)

对不起，冗长的问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:24:55.467

```
jQuery(function() {
    var i = 1;
    jQuery('.content').each(function() {
        jQuery(this).addClass('content-' + i);
        i++;

        jQuery(this).find('a.next').bind('click', function() {
            toggleContentDivs(jQuery(this).parent());
        }); 
    });
});

function toggleContentDivs(oContentDiv)
{
    var nextVisible   = false,
        setVisibility = false;

    jQuery('.content').each(function() {
        if (oContentDiv.attr('class') == jQuery(this).attr('class')) {
            nextVisible = true;
            jQuery(this).hide();
        } else if (nextVisible == true) {
            jQuery(this).show();
            nextVisible   = false;
            setVisibility = true;
        } else {
            jQuery(this).hide();
        }
    });
    // it must have been the last .content element
    if (setVisibility == false) { 
        jQuery('.content:first').show();
    }
} 
```

只有与现有代码的 DOM 依赖关系，a.next 必须是 .content 的直接子级。

Working jsFiddle example [here](http://jsfiddle.net/SZhAr/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:35:53.597

It turns out that this is indeed a very simple task. By passing a selector to jQuery's `index()` method, you're able to get the index of the current element, relative to its collection:

```
var idx = $theContent.index('div.content') + 1; 
```

Then the `content` div can be targeted directly:

```
$('div.content').eq(idx).show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T20:57:35.603

结果证明，一种更简单（*不那么冗长*）的编写方式正是您减去函数参数的方式：

```
$theContent.parent().next().length 
```

编辑2：

我广泛尝试了所有解决方案，但它们存在缺陷。简而言之，我认为你有最简单的方法。除非可能有 jQuery 专家能参与进来，向我们展示一个更好的方法。

这是我的最后一个建议：

```
$('.next').click(function() {
    $theContent = $(this).parent('.content');
    $theContent.hide(10, function() {
        if (!$theContent.next('.content').length) {
            $theContent.parent('.container').next()
                .find('.content:first').show();
        } else {
            $theContent.next('.content').show();
        }
    });
}); 
```

理想的解决方案是使用`closest()`，但问题是它的行为不像我预期的那样，因为它们被容器分开。在 jQuery 的示例中，他们使用无序列表。是的，这要容易得多，因为您可以区分节点类型（例如`li`vs `ul`）并简单地做`.next('li')`. 在这里，您使用的是所有`div`s。并且由于某种原因`.closest('.content')`，一旦到达第一个容器的末端，它就不起作用了！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-11T20:40:59.517

这个怎么样：

```
if ($theContent.next('.content').length) {
   $theContent.next('.content').show();
} else if ($theContent.parent('.container').next('.container').children('.content').length) {
   $theContent.parent('.container').next('.container').children('.content:first').show();
} else {
   $('.content:first').show();
   //alert('Reached the end or something went wrong!');
} 
```

[JSFIDDLE](http://jsfiddle.net/MgP6N/3/)

# c - 循环链表

> ID：12848073
> 
> 赞同：0
> 
> 时间：2012-10-11T20:33:34.450
> 
> 标签：c, linked-list

我对循环链表没什么问题：我想在最后插入一个元素（整数）。我的函数在末尾添加元素，但我的链表并不是真正的循环（我有这种印象）。这是 .h 与我使用的结构：

```
struct liste_circulaire {
  int val;
  struct liste_circulaire *suivant; /* suivant = next element */
}; 
```

typedef struct liste_circulaire liste;

```
 int main(void) {
  liste *l, *deb;
  deb = (liste *)malloc(sizeof(liste));
  l = deb;
  l -> suivant = deb;  /* suivant = next element */
  ajouter_element(l,0);
  ajouter_element(l,1);
  ajouter_element(l,2);
  ajouter_element(l,3);
  affiche(l,l->suivant);
  printf("%d\n",l->suivant->suivant->suivant->suivant->suivant->val);
  return 0;
}
void ajouter_element(liste *l,int x) {  
  liste *deb = l;  /* with this line, I have a pointeur on the first element of my list */
    while(l->suivant != deb) {    
      l = l -> suivant;
    }
  l -> suivant = (liste *)malloc(sizeof(liste));
  l = l -> suivant;
  l -> val = x;  
  l -> suivant = deb;
}

void affiche(liste *l,liste *deb) {
  if(l == deb) {
    printf(" Fin\n");
    return;
  }
  printf(" %d -->",deb->val);
  affiche(l,deb->suivant);
} 
```

在我的主要内容中，当我要求打印列表的第一个元素时，我有随机数，但在我的示例中，列表的第一个值是 0。所以如果有人可以帮助我（我希望清楚，我法国学生）谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T20:46:16.953

由于以下原因，您的程序正在打印一个随机数：

```
liste *l, *deb;
deb = (liste *)malloc(sizeof(liste));
l = deb;
l -> suivant = deb; 
```

列表中的第一个元素是您正确分配但没有给出任何数字的节点。您应该尝试添加：

```
l -> val = 0; 
```

并摆脱：

```
ajouter_element(l,0); 
```

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T20:56:45.303

您可以将预定义的头文件`list.h`用于循环链表：

以下链接包含如何执行此操作的[示例。](http://isis.poly.edu/kulesh/stuff/src/klist/)

包含与管理循环链表相关的`list.h`所有函数，如定义、添加头部、添加尾部、删除、foreach 函数以浏览循环链表......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T20:48:11.843

请注意，您永远不会设置第一个元素的值。（Hernan 刚刚在这里打败了我……）

当您调用 ajouter_element() 时，它不仅将新元素添加到列表的末尾，还将列表的开头设置为新元素：

`l = l -> suivant;`

`affiche()`首先打印第二个元素，最后打印第一个元素。首先要打印的是`deb->val`main 应该是`l->suivant->val`.

* * *

如果你想`affiche()`打印第一个项目......打印它！:]

```
void affiche(liste *l,liste *deb) {
  if (deb == 0)
  {
    deb = l;
  }

  printf(" %d -->",l->val);

  if(l->suivant == deb) {
    printf(" Fin\n");
    return;
  }

  affiche(l->suivant,deb);
} 
```

调用它：

```
affiche(l,0); 
```

或者

```
affiche(l,l); 
```

他们都会做同样的事情。您也可以重载它以仅采用单个值。

我没有运行它（甚至没有编译），但希望它相当接近。

# javascript - 在 Javascript 中分配一个唯一的 id

> ID：12848074
> 
> 赞同：0
> 
> 时间：2012-10-11T20:33:35.153
> 
> 标签：javascript

```
$ var Node = function(){ this.someval = 0; }
undefined
$ var node = new Node();
undefined
$ node.someval
0
$ Node.next_id = 0
0
$ Node.prototype.constructor = function() { this.someval = Node.next_id++; }
function () { this.someval = Node.next_id++; }
$ var node2 = new Node();
undefined
$ node2.someval
0
$ var node3 = new Node();
undefined
$ node3.someval
0 
```

为什么 next_id++ 不能按预期工作？我希望 next_id 每次调用都会增加，`new Node()`从而为每个节点分配一个新的 id。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T20:47:24.680

没有与`Node.prototype.constructor`. 将其设置为某个值没有副作用，除了赋值。

你可以给它任何你想要的值：

```
Node.prototype.constructor = "foobar"; 
```

...并且不会对`Node`构造函数进行任何修改。换句话说，它只是一个普通的循环引用。

* * *

要执行您想要的操作，请在构造函数中执行增量。

```
var Node = function(){ this.someval = Node.next_id++; };

Node.next_id = 0; 
```

* * *

`Node`您还应该注意，将属性分配给构造函数并没有什么特别之处。

```
Node.foo = "bar"; // doesn't impact the behavior of the constructor 
```

它所做的只是为函数对象添加一个属性，但它对通过`Node`构造函数构造的对象绝对没有影响。

所以你正在做的是使用`Node`函数对象作为命名空间。这很好，但我个人会改用闭包。

```
var Node = (function() {

    var next_id = 0;

    return function Node() { this.someval = next_id++; };

})(); 
```

这使得`next_id`立即调用的函数之外的任何代码都无法访问，从而使其免受外部修改的影响。这是一种非常常见的模式。

```
var node2 = new Node();
node2.someval; // 0

var node3 = new Node();
node3.someval; // 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T20:38:49.893

控制台显示 this.someval 的正确值。因为如果`this.someval = Node.next_id++`值 of`Node.next_id`将被分配给，`this.someval`那么它将增加 的值`Node.next_id`。

尝试 ：

```
 > var i = 0; //undefined
  > var j = i++; //undefined
  > i; //1
  > j;//0 
```

`function() { this.someval = Node.next_id++; }`在创建 Node 的新实例时会被调用

使用以下代码：

```
var Node = function(){ this.someval = Node.next_id++; }
Node.next_id = 0;
var node2 = new Node();
node2.somval // 0;
Node.next_id // 1 
```

# mongodb - MongoDB：如何在集合中的所有值上运行某个字段的函数？

> ID：12848080
> 
> 赞同：2
> 
> 时间：2012-10-11T20:33:55.933
> 
> 标签：mongodb

我想从 mongo shell 执行此操作。基本上我想改变时间存储在我当前数据库中的方式。

现在我的“时间”字段正在存储一个看起来像“Thu Oct 11 2012 15:27:58 GMT-0500 (CDT)”的字符串，但我想运行 Date.parse('Thu Oct 11 2012 15: 27:58 GMT-0500 (CDT)') 以便存储 unix 时间戳。

我想对所有当前条目全面执行此操作，因为我将来只会使用 unix 时间戳。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T21:51:43.690

怎么样：

```
var c = db.collection.find();
while (c.hasNext()) {
  object = c.next(); 
  time = Date.parse(object.time);
  db.collection.update({_id: object._id}, {$set: {'time': time}});
} 
```

*在执行它之前，我有以下内容：*

```
db.times.find()
{ "_id" : ObjectId("50773daa77f428a7e4cd226b"), "time" : "Thu Oct 11 2012 15:27:58 GMT-0500 (CDT)" } 
```

*执行后，它看起来像这样：*

```
db.times.find()
{ "_id" : ObjectId("50773daa77f428a7e4cd226b"), "time" : 1349987278000 } 
```

希望这可以帮助！

# c# - 加载到 PowerShell 后，ShouldProcess 什么也不做

> ID：12848086
> 
> 赞同：1
> 
> 时间：2012-10-11T20:34:21.597
> 
> 标签：c#, powershell, cmdlets

简单的案例，尝试编写一个 cmdlet 来提示用户确认他们的操作。这意味着我必须将[ShouldProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/bb204629%28v=vs.85%29.aspx)放在 ProcessRecord 方法调用中，但无论如何它总是返回 true（没有提示）。这是一个简单的案例：

```
using System;
using System.Management.Automation;

[Cmdlet(VerbsDiagnostic.Test, "ShouldProcess",
    SupportsShouldProcess = true)]
public class TestShouldProcessCommand : Cmdlet
{
    [Parameter(Position = 0,
        ParameterSetName = "Force")]
    public SwitchParameter Force;

    protected override void ProcessRecord()
    {
        if (ShouldProcess("ShouldProcess Target"))
        {
            if (Force || ShouldContinue("ShouldContinue Query", 
                "ShouldContinue Caption"))
            {
                WriteObject("Hello");
            }
            else
            {
                ThrowTerminatingError(new ErrorRecord(new Exception(
                    "Error Message"), "Error ID", 
                    ErrorCategory.InvalidData, "Target Object"));
            }
        }
    }
} 
```

当你加载 PowerShell 并尝试运行它（在使用 Import-Module 导入 dll 之后）你得到的是：

```
PS C:\Users\user> Test-ShouldProcess

ShouldContinue Caption
ShouldContinue Query
[Y] Yes  [N] No  [S] Suspend  [?] Help (default is "Y"): Y
Hello 
```

这是 ShouldContinue 的预期输出，但对于首先出现的 ShouldProcess 调用没有任何反应。如果您只是让它打印出 ShouldProcess 调用的返回值，那么无论我如何使用它，它总是正确的。在 PowerShell 2 和 3 以及原版机器上进行了测试。使用 Visual Studio 2010 专业版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:06:35.257

尝试使用 common 参数执行 cmdlet `-WhatIf`。这应该导致`ShouldProcess()`返回错误。这个想法是显示 cmdlet 在使用时不会实际执行`-WhatIf`的操作。因此，您需要在`ShouldProcess()`调用中使用更具描述性的消息来指示您正在处理的管道对象（假设您支持管道绑定）。

# objective-c - 使用单元格时如何获取单元格的 indexPath

> ID：12848087
> 
> 赞同：1
> 
> 时间：2012-10-11T20:34:22.163
> 
> 标签：objective-c, uitextfield, tableview, cell

我想获取具有 UITextField 的单元格的 indexPath。是否可以获得我们正在使用的当前 UITextField 的 indexPath ？

如果是的话，告诉我真是太棒了，我玩了 2 个小时就快疯了……

多谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T20:36:06.103

这应该可以解决问题：

```
CGPoint location = [sender.superview convertPoint:sender.center toView:self.tableView];
NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:location]; 
```

另一种选择是提升视图层次结构。调整您自己的视图层次结构：

```
UIView *contentView = [textField superview];
UITableViewCell *cell = [contentView superview];
NSIndexPath *indexPath = [self.tableView indexPathForCell:cell]; 
```

# php - 如何将 POST 请求从 PHP 发送到通常使用 AJAX 调用访问的服务？

> ID：12848089
> 
> 赞同：0
> 
> 时间：2012-10-11T20:34:38.727
> 
> 标签：php, javascript, jquery, ajax, post

通过异步 HTTP 请求，我可以使用现有服务从/向数据库加载/保存一些信息。但是至少据我所知，这些请求（AJAX）只能从客户端（例如 JavaScript 脚本）完成。

例如使用 jQuery *ajax*方法：

```
$.ajax({ 
    type: "POST", 
    url: someurl,
    dataType: 'xml',
    data: xmlString, 
    success: function(data) { 
        // some code here 
    }
}); 
```

如何从 PHP 脚本中使用相同的服务？也就是说，如何使用 POST 或 GET 方法“从 PHP 进行 AJAX 调用”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T20:39:07.803

您可以使用 cURL 库来访问相同的 URL。

如果接收服务检查，您可能需要将“X-Requested-With”标头设置为“XMLHttpRequest”。

否则，请按照[此答案](https://stackoverflow.com/questions/3928228/php-and-curl-get-ajax-data)进行操作，但您将使用 POST 注释字段。

[这个答案](https://stackoverflow.com/questions/3105358/curl-php-ajax-request)建议如何调试和反向工程现有的 AJAX 服务。然后，您将能够使用例如 SimpleXML 来解码答案，从您发布的 jQuery 代码中，答案将以 XML 格式得到。

**一个测试。**

```
$url = 'http://your-url';
$fields = array(
    'key' => 'value',
    // other fields
);
$headers = array(
    'X-Requested-With: XMLHttpRequest',
);

$ch = curl_init();
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

// Note that you might have to set CURLOPT_POSTFIELDS to a urlification of
// $fields instead of an array, in case the service distinguishes form-data
// from url encoding.
curl_setopt($ch, CURLOPT_POST, True);
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields);

// IMPORTANT: some AJAX services will expect inbound data to be coming JSON encoded, so if that is the case, you shall have to write instead
// curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields));

$xml = curl_exec($ch);
curl_close($ch);

$xml = simplexml_load_string($xml);

print_r($xml); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T20:36:27.320

PHP 中的 AJAX 是不可能的，但如果您正在谈论对外部站点执行 GET 和 POST，您将需要 libcurl

[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

里面有很多例子；）

# php - 将 127 以上的 unicode 字符转换为十进制

> ID：12848091
> 
> 赞同：0
> 
> 时间：2012-10-11T20:34:49.567
> 
> 标签：php, unicode, multibyte

> **可能重复：**
> [如何使用 php 将文本转换为 unicode 代码点，如 \u0054\u0068\u0069\u0073？](https://stackoverflow.com/questions/10100617/how-to-convert-text-to-unicode-code-point-like-u0054-u0068-u0069-u0073-using-p)

我正在尝试将所有不适合 7 位 ANSI 字符的字符转换为转义形式，`\uN`，其中`N`是它的十进制值。这是我想出的：

```
private static function escape($str) {
    return preg_replace_callback('~[\\x{007F}-\\x{FFFF}]~u',function($m){return '\\u'.ord($m[0]);},$str);
} 
```

我已经尝试过使用 Gamma 等字符，

```
echo self::escape('Γ'); 
```

但我`\u206`退出而不是`\u915`。我无法弄清楚我要去哪里错了......想法？

实际上，似乎该`ord()`函数没有给我或我想要的值，或者我的 .php 文件上的编码是错误的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T21:35:44.023

我不得不重新回忆一下 UTF-8 是如何工作的，但这里有一个`utf8_ord()`函数，一个补充`utf8_chr()`. [从我在这里](https://stackoverflow.com/a/10645053/889949)的`chr()`回答中几乎一字不差地取消了。

```
function utf8_ord ($chr)
{
    $bytes = array_values(unpack('C*', $chr));

    switch (count($bytes)) {
        case 1:
            return $bytes[0] < 0x80
                ? $bytes[0]
                : false;
        case 2:
            return ($bytes[0] & 0xE0) === 0xC0 && ($bytes[1] & 0xC0) === 0x80
                ? (($bytes[0] & 0x1F) << 6) | ($bytes[1] & 0x3F)
                : false;
        case 3:
            return ($bytes[0] & 0xF0) === 0xE0 && ($bytes[1] & 0xC0) === 0x80 && ($bytes[2] & 0xC0) === 0x80 
                ? (($bytes[0] & 0x0F) << 12) | (($bytes[1] & 0x3F) << 6) | ($bytes[2] & 0x3F)
                : false;
        case 4:
            return ($bytes[0] & 0xF8) === 0xF0 && ($bytes[1] & 0xC0) === 0x80 && ($bytes[2] & 0xC0) === 0x80 && ($bytes[3] & 0xC0) === 0x80
                ? (($bytes[0] & 0x07) << 18) | (($bytes[1] & 0x3F) << 12) | (($bytes[2] & 0x3F) << 6) | ($bytes[3] & 0x3F)
                : false;
    }

    return false;
}

function utf8_chr ($ord)
{
    switch (true) {
        case $ord < 0x80:
            return pack('C*', $ord & 0x7F);
        case $ord < 0x0800:
            return pack('C*', (($ord & 0x07C0) >> 6) | 0xC0, ($ord & 0x3F) | 0x80);
        case $ord < 0x010000:
            return pack('C*', (($ord & 0xF000) >> 12) | 0xE0, (($ord & 0x0FC0) >> 6) | 0x80, ($ord & 0x3F) | 0x80);
        case $ord < 0x110000:
            return pack('C*', (($ord & 0x1C0000) >> 18) | 0xF0, (($ord & 0x03F000) >> 12) | 0x80, (($ord & 0x0FC0) >> 6) | 0x80, ($ord & 0x3F) | 0x80);
    }

    return false;
} 
```

# php - 使用 PHP CURL 通过代理获取网站，我如何才能确切知道通过提琴手发送的内容？

> ID：12848095
> 
> 赞同：1
> 
> 时间：2012-10-11T20:35:23.387
> 
> 标签：php, curl, fiddler, fsockopen

我正在使用 CURL 和代理提供程序从某些网站获取数据，但是当我尝试发出请求时，提琴手仅使用 CURL 显示来自文件的信息，而不是来自实际发出主要请求并带来数据的代理 IP。

如何在提琴手监视器中显示从代理请求（代理 IP）发送/接收的内容？我可以改用 fsockopen 吗？

注意：您可能知道代理是客户端和服务器之间的中介，在这种情况下，我使用 CURL 使用代理提供程序检索信息，如前所述，我想在 Fiddler 监视器中显示的是代理和请求的网站，而不是通过使用已显示的 CURL 的文件。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T20:41:38.517

您需要访问代理服务器。例如给定

```
you -> proxy -> site_you_want 
```

您只能访问`you -> proxy`连接，而看不到`proxy -> site_you_want`链接上发生的事情。那是一个完全不同的机器和 tcp 连接，你不能从你坐的地方访问。

# python - Python中重写规则引擎的例子？

> ID：12848097
> 
> 赞同：3
> 
> 时间：2012-10-11T20:35:37.100
> 
> 标签：python, wolfram-mathematica, logic-programming

Python 生态系统中是否有任何现有项目以类似于 Mathematica 或 Maude 的方式使用[重写/生产/转换规则？](http://en.wikipedia.org/wiki/Production_%28computer_science%29)

请注意，我指的是逻辑编程概念，而不是 Web 服务器概念。

# database - 如何将 SQLite 数据库转换/导出到 Microsoft Access？

> ID：12848098
> 
> 赞同：0
> 
> 时间：2012-10-11T20:35:38.823
> 
> 标签：database, sqlite, ms-access

我有 SQLite 数据库，它有很多表。我想换个平台。

如何将所有表和列移动到 Microsoft Access 数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T06:36:19.723

您可以使用SQLite`.dump`命令[行 shell](http://www.sqlite.org/cli.html)中的命令为数据库创建 SQL 命令列表（用于`.output`将其重定向到文件）。

然后编辑出任何[特定于 SQLite 的命令](http://www.sqlite.org/lang.html)，以便 Access 理解它们，并一一执行。

# javascript - Jquery .Click 功能无法正常工作

> ID：12848105
> 
> 赞同：4
> 
> 时间：2012-10-11T20:35:52.327
> 
> 标签：javascript, jquery, html, click

我正在为电气工程开发 K-Mapping 应用程序。但是，我坚持单击功能。

```
if(jQuery)
$(document).ready(function(){
$('a').click(function(){
        alert("Evaluate Click Works");
        var match = $(mintermIndexes).compare(ArrayOfEight);
        if(match){
            alert("All squares have been checked");
        }   
        return false;
});
}); 
```

这是 HTML，

```
 <div id="body">

        <input id="Clear" value="Clear Form" type="submit" />
        <a id="Evaluate" href="#" >Evaluate</a>

    </div> 
```

我真的可以使用一些帮助，我确实分享了我认为有问题的唯一代码。请分享您对如何解决此问题的想法。谢谢。

ps：我尝试了几乎所有可能的选择器，但仍然没有。当我点击链接时没有响应。

编辑：更改 head 标签中的引用顺序有效，即我更改了我的 jquery 应用程序和 jquery 引用顺序的顺序。无论如何感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T20:38:43.903

工作正常：

[http://jsfiddle.net/wCRLE/](http://jsfiddle.net/wCRLE/)

尝试删除`if (jQuery)`

另外，您是否正确引用了`jQuery`脚本？

```
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T20:39:46.807

试试这个：

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"     type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
$('a').click(function(){
       alert("Evaluate Click Works");
       var match = $(mintermIndexes).compare(ArrayOfEight);
       if(match){
           alert("All squares have been checked");
       }   
       return false;
});
});
</script>
</head>
<body>
<div id="body">
       <input id="Clear" value="Clear Form" type="submit" />
       <a id="Evaluate" href="#" >Evaluate</a>

   </div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T20:59:21.897

我总是遇到这个问题。我的解决方案是将脚本放在我要管理的标签下方。像这样：

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
</head>
<body>
       <input id="Clear" value="Clear Form" type="submit" />
       <a id="Evaluate" href="#" >Evaluate</a>

<script type="text/javascript">
    $('a').click(function(){
           alert("Evaluate Click Works");
           var match = $(mintermIndexes).compare(ArrayOfEight);
           if(match){
               alert("All squares have been checked");
       }   
    });
</script>
</body>
</html> 
```

解释：

您需要确保首先加载“标签”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T20:40:25.570

这里没问题：

[http://jsfiddle.net/5Yttd/](http://jsfiddle.net/5Yttd/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T20:42:53.620

尝试摆脱 if(JQuery)

此外，请确保在加载内容脚本之前加载 JQuery。如果你不这样做，什么都不会发生。

# javascript - 如何将javascript数组切成两半但最接近的关闭 或者

> ID：12848106
> 
> 赞同：0
> 
> 时间：2012-10-11T20:35:52.360
> 
> 标签：javascript, jquery, arrays

我可以把它切成两半，我只是不知道如何去确保一半直到下一个关闭块级标签。

假HTML：

```
<div class="content-item">    
<h1>Title</h1>
<p>Pellentesque nec erat diam. Donec condimentum tortor nec tellus gravida uscipit</p> 
<h1>Title</h1>
<p>Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus</p>
</div> 
```

到目前为止的Javascript：

```
var splitChar = " ";
var wordsSplit = $(".content-item").html().split(splitChar);
var wordsCount = wordsSplit.length;
var half = Math.floor(wordsCount / 2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:42:59.220

只需向前遍历数组，直到到达结尾或结束块

```
 i = half;
while (!wordsSplit[i++].match(/<\//) && i < wordsSplit.length); 
```

# xml - 使用带有 VBA 的 DOM 读取特定的 XML 嵌套节点

> ID：12848108
> 
> 赞同：1
> 
> 时间：2012-10-11T20:36:02.153
> 
> 标签：xml, vba, dom, msxml

我想使用 VBA 读取 XML 文件的一个或两个嵌套节点的值。（我尝试使用 DOM ( `MSXML.DOMDocument`)。）

例如，我想从以下 XML 中确定`/szamla/fejlec/elado/nev/`节点的值为“Budapesti Elektromos Művek Nyrt”。

```
<?xml version="1.0" encoding="ISO-8859-2" ?>
<szamla szamkor="000000200267" szafaz="800101068670" feldolgazon="35245830" 
   ugyfelaz="2200502333">
<fejlec>
<elado>
<nev>Budapesti Elektromos Művek Nyrt.</nev> 
<adoszam>10768033-2-44</adoszam> 
<cim>
 <orszag>Magyarország</orszag> 
 <telepules>Budapest</telepules> 
 <irszam>1132</irszam> 
 <kozternev>Váci út 72-74.</kozternev> 
</cim>
</elado>
...

<szamla szamkor="000000200267" szafaz="800101068670" feldolgazon="35245830" 
   ugyfelaz="2200502333"> 
```

这似乎是非常基本的，但我几个小时都无法弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T01:08:14.397

试试这个，看看它是否给你任何想法

```
Sub thing()

    Dim xmldoc As MSXML2.DOMDocument
    Set xmldoc = New MSXML2.DOMDocument

    xmldoc.loadXML "<one><two><three><four></four></three></two></one>"
    MsgBox xmldoc.selectSingleNode("/one/two/three/four").nodeName

End Sub 
```

参考是`Microsoft XML, v4.0`. 对我来说，它位于 C:\WINNT\system32\msxml4.dll。

# c++ - boost::type_traits::conditional 中类型特征的编译错误

> ID：12848109
> 
> 赞同：0
> 
> 时间：2012-10-11T20:36:05.120
> 
> 标签：c++, templates, boost, conditional, typetraits

我在使用 boost 中的 type_traits 的某些代码中遇到问题。这是代码中相当复杂的部分，但我可以隔离导致编译错误的部分：

```
template<const size_t maxLen>
class MyString {
public:
    typedef boost::conditional<(maxLen > 0), char[maxLen+1], std::string> ObjExternal;
};

template <class T>
class APIBase {
public:
    typedef T obj_type;
    typedef typename T::ObjExternal return_type;
};

template <class T>
int edit(const T& field, const typename T::return_type& value)
{
    return 0;
}

int myFunction()
{
    APIBase<MyString<10> > b;
    char c[11];
    return edit(b, c);
} 
```

这给出了以下错误：

test.cpp：在函数'int myFunction（）'中：tes.cpp：109：错误：没有匹配函数调用'edit（APIBase>＆，char [11]）'tes.cpp：100：注意：候选人是: int edit(const T&, const typename T::return_type&) [with T = APIBase >]

但是，如果我用代码更改行

```
char c[11]; 
```

经过

```
MyString<10>::ObjExternal c; 
```

有用。同样，如果我改行

```
typedef boost::conditional<(maxLen > 0), char[maxLen+1], std::string> ObjExternal; 
```

经过

```
typedef char ObjExternal[maxLen+1]; 
```

它也有效。我认为这是 boost::conditional 的问题，因为它似乎没有被正确评估。我的代码中是否有问题，或者可以使用替代方法代替 boost::conditional 来获得此功能？

我正在考虑使用第二个选项，但后来我无法将 maxLen 用作 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:50:39.107

您需要使用`type`由[`conditional`](http://www.boost.org/doc/libs/1_51_0/libs/type_traits/doc/html/boost_typetraits/reference/conditional.html)而不是条件类型本身提供的成员 typedef。

改变：

```
typedef boost::conditional<(maxLen > 0),
                           char[maxLen+1],
                           std::string> ObjExternal; 
```

到：

```
typedef typename boost::conditional<(maxLen > 0),
                                    char[maxLen+1],
                                    std::string>::type ObjExternal; 
```

# objective-c - 混淆将 Obj-C 对象传递给方法并保留对该对象的更改

> ID：12848115
> 
> 赞同：0
> 
> 时间：2012-10-11T20:36:25.153
> 
> 标签：objective-c, multithreading, pointers, reference

我正在编写一个程序并尝试了解有关线程、多处理等的更多信息。

我的架构是模型/视图/控制器类型。

我有自己的`NSImageView`(ThumbnailView) 子类，我想变得聪明一点，让它听一个消息来清除自己（所以所有的缩略图都会自行清除，而无需我循环浏览它们）。

问题是我`ThumbnailView`是由一个`ThumbnailViewController`真正在听消息的人控制的。当它收到消息时，它会启动一个带有类对象的新线程，该类对象是命令 ( `ClearThumbnailViewCommand`)。`ThumbnailView`它将包含关联对象和键的字典项作为参数传递。在`ClearThumbnailViewCommand`我将`ThumbnailView`对象的图像设置为一些中性图像（如 gray.jpg）。

所有这一切都很好，但是，更改的 Thumbnail 对象与进入的 Thumbnail 对象不同。所以我认为我需要传递一个指针而不是对象。我记得一些关于使用`MyObject**`而不是`MyObject*`通过，`&MyObject`但我似乎无法解开各种组合。由于无法推理出来，我回到了我通常的万无一失的尝试随机组合事物的系统，但这一次它没有帮助。

似乎即使我能够构造一个传递指针的类（不确定我是否正确使用了这些术语），我也无法将其正确分配给`NSDictionary`不需要`id**`.

如果有帮助的话，我会尝试包括以下基础知识。

* * *

```
ThumbnailVew : NSImageView {
    ThumbnailVewController  * _controller;
}

init  {
    _controller = [[ControllerClass alloc] initWithControlObject: &self];
} 
```

* * *

```
ThumbnailVewController : ControllerClass {
    id  ** _controlObject;
}

initWithControlObject: (id**)object {
    _controlObject = object;
} 
```

* * *

然后，当发布消息时，`ThumbnailVewController`会调用一个最终执行此操作的方法……当然不会让我通过`&_controlObject`

当全部重写以便我可以通过`_controlObject`时，我没有收到错误，但是`ThumbnailView`我更改的只是该方法的本地。

```
if([command isEqualToString:@"CLEAR_THUMBNAILS"]) {
    NSDictionary * dict;
    dict = [[NSDictionary alloc] initWithObjectsAndKeys: &_controlObject, @"thumbnail", nil];

    [self newThreadWithCommand:[[[ClearThumbnailViewCommand alloc] initWithArgument:dict] autorelease]];
} 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T06:12:20.693

感谢您的反馈。我确实只是在尝试探索一些不同的情况。我知道我可能会想方设法解决一些问题，但这确实有助于我更清楚地理解界限。

如果它可能对其他人有所帮助，我找到了解决我的特定问题的方法。事实证明，我在 ThumbnailView 的初始化阶段引用了 _controlObject。在该阶段创建的对象与调用 awakeFromNib 时创建的 ThumbnailView 对象不同。

当我将 _controlObject 分配移动到 awakeFromNib 方法时，一切都按我的预期工作。（当然，我将代码重置为不包含任何花哨的 ** 和 & 声明。

再次感谢您帮助我更多地了解这种语言。我开始有点喜欢它了。

# asp.net-mvc-4 - 如何在带有默认 simplemembership 提供程序的 MVC 4 中指定帐户锁定的失败登录尝试次数

> ID：12848119
> 
> 赞同：6
> 
> 时间：2012-10-11T20:36:41.547
> 
> 标签：asp.net-mvc-4, simplemembership

如何使用 ASP.NET MVC 4 中的默认 simplemembership 提供程序指定失败的登录尝试次数？我看到有一种解锁帐户方法，但我没有看到任何地方可以指定导致帐户锁定的失败尝试次数。如果您在 MVC 3 中指定它，则可以在提供程序下的 web.config 中指定 maxInvalidPasswordAttempts。但是，使用 MVC4 simplemembership，您无需在 web.config 中设置提供程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T14:16:16.990

事实证明，simplemembership 提供程序会跟踪失败的登录，但您可以使用类似...

```
if(WebSecurity.IsAccountLockedOut(model.UserName,4,10000)){
                    return RedirectToAction("LockedAccount");
                } 
```

这当然会导致他们重置密码后如何登录。我选择在密码重置操作中直接登录。我本可以在用户配置文件中放置另一个字段来跟踪密码被重置并绕过检查，但认为这不值得。

# random - 纸笔随机数发生器

> ID：12848121
> 
> 赞同：0
> 
> 时间：2012-10-11T20:36:45.307
> 
> 标签：random

我正在为我办公室的每周“pick'em pool”挑选足球队，并决定随机挑选。

因为我手边只有一支铅笔和一个便签本，而且我只需要输出 0 或 1（0 代表主队获胜，1 代表客队获胜），我发明了自己的“随机数生成器”。

对于每场 2 队比赛，我通过以下方式生成输出：

1.  使用记事本上的指定格线作为 x 轴绘制锯齿形曲线（类似正弦的随机波形，偏差接近零）。
2.  然后我计算了波形与格线相交的次数。
3.  然后把那个数字 mod 2 作为我的输出。

假设每个波形足够长（即至少有 10 个局部最小值和最大值）**，我的预期输出是否接近 0.5？**

只是好奇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:50:42.140

我会掷硬币或掷骰子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T20:45:25.697

您的预期输出基于不是非常随机的任意输入，因此如果没有对人的随机样本进行大量测试......可能不会。
偶数 = 回家，奇数 = 离开，输入会出现操作错误（偏差）。
就个人而言，我只会抛硬币。

# vb.net - 从 LDAP 获取 AD ID 信息

> ID：12848122
> 
> 赞同：0
> 
> 时间：2012-10-11T20:36:52.907
> 
> 标签：vb.net, active-directory, ldap, windows-server-2003

我将以下代码用于 Web ASP.net 应用程序，在本地它可以正常工作，但在服务器上却不行。它返回一个错误说“表不存在”。在我的网络配置中，我提出了`<identity impersonate="true"/>` 任何想法？

```
#Region " Get AD ID information from LDAP"
Protected Sub Button1_Click(sender As Object, e As System.EventArgs) Handles Button1.Click
    Dim objRootDSE, objRecordSet, objCommand, objConnection, strDNSDomain As Object
    Dim strQuery, strBase, strFilter, strAttributes As Object
    Dim intCountNumber As Integer

    Try
        ' Determine DNS domain name from RootDSE object.
        objRootDSE = GetObject("LDAP://RootDSE")
        strDNSDomain = objRootDSE.Get("defaultNamingContext")

        ' Use ADO to search Active Directory.
        objRecordSet = Server.CreateObject("ADODB.recordset")
        objCommand = Server.CreateObject("ADODB.Command")
        objConnection = Server.CreateObject("ADODB.Connection")
        objConnection.Provider = "ADsDSOObject"
        objConnection.Open("Active Directory Provider")
        objCommand.ActiveConnection = objConnection

        strBase = "<LDAP://" & strDNSDomain & ">"
        strFilter = "(&(objectCategory=person)(objectClass=user)(samaccountname=" & TB_UserID.Text & "))"
        strAttributes = "sn,givenname,mail,telephoneNumber,"
        strQuery = strBase & ";" & strFilter & ";" & strAttributes & ";subtree"
        objCommand.CommandText = strQuery
        objRecordSet = objCommand.Execute
        intCountNumber = objRecordSet.Fields.Count
        TB_Name.Text = objRecordSet.Fields("givenname").value
        TB_LastName.Text = objRecordSet.Fields.Item("sn").value
        TB_Email.Text = objRecordSet.Fields.Item("mail").value
        TB_Telephone.Text = objRecordSet.Fields.Item("telephoneNumber").value

        objRecordSet = Nothing
        objConnection.Close()
    Catch ex As Exception
        DisplayWebMsgBox.WebMsgBox.MessageBox(ex.Message)
    End Try

End Sub 
```

# 结束区域

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:57:49.633

我发现通过提供程序“ADsDSOObject”，它使用用户信用来运行 LDAP 搜索。因此，除非我提供用户名和密码凭据，否则从服务器端它无法工作。

```
 objConnection.Properties("User ID") = Username
objConnection.Properties("Password") = Password
 objConnection.Properties("Encrypt Password") = True 
```

# url - WebSphere Portal 解码 URL

> ID：12848126
> 
> 赞同：4
> 
> 时间：2012-10-11T20:37:19.563
> 
> 标签：url, websphere, decode, portal

如何解码 WebSphere Portal url？

For example this url: /wps/portal/!ut/p/c5/dY7LdoIwAAW_hS9ICEnEZSBaKBSKkUfZcAKtKRYMKo-2X197XHtnObO4oAQ3TnJulRxbfZIdKEBJK2wn24ylATUpWUNfhLt9anHTJgg8g1J1ur6VOX_T31wzxRk_4NHZobEvzs5Vu6o3942nbJRTEpNl-UHmoK5JGlfvpOHThtV04ksmNlac5oHuz-HWb4QMcTQHr11SE3xZTUPdz9GvKwkTRfsydMdJHrQTd-vPizIMkP8_p5X7xDy8CiGMUQYhiohIYCos6Ft3Dx-MQRB5uv8Aw1cNj5gZfxocKIs!/dl3/d3/L2dJQSEvUUt3QS9ZQnZ3LzZfNDhRRlZBVUs2UEZMRDBJU1RDTEZIRTEwTDM!/

可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T09:49:01.720

尝试以下操作：

> /wps/poc?uri=state:URL&mode=下载

其中 URL 是您的原始 URL，例如：

```
/wps/poc?uri=state:/wps/portal/!ut/p/c5/dY7LdoIwAAW_hS9ICEnEZSBaKBSKkUfZcAKtKRYMKo-2X197XHtnObO4oAQ3TnJulRxbfZIdKEBJK2wn24ylATUpWUNfhLt9anHTJgg8g1J1ur6VOX_T31wzxRk_4NHZobEvzs5Vu6o3942nbJRTEpNl-UHmoK5JGlfvpOHThtV04ksmNlac5oHuz-HWb4QMcTQHr11SE3xZTUPdz9GvKwkTRfsydMdJHrQTd-vPizIMkP8_p5X7xDy8CiGMUQYhiohIYCos6Ft3Dx-MQRB5uv8Aw1cNj5gZfxocKIs!/dl3/d3/L2dJQSEvUUt3QS9ZQnZ3LzZfNDhRRlZBVUs2UEZMRDBJU1RDTEZIRTEwTDM!/&mode=download 
```

我没有一个正在运行的门户来检查它，但根据我的笔记它应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T18:54:03.170

Michal 的回答是正确的，以这种方式调用 POC servlet 将解码 URL 中的状态信息并生成 XML 表示。

这个 XML 的格式没有公布，但很容易破译，下面是它的外观示例：

```
<root session="1977644512">
  <state type="navigational">
    <portlet id="Z7_C2ORULUV0G8BD0IR4S6TP030G6">
      <window-state>minimized</window-state>
    </portlet>
    <selection selection-node="Z6_C2ORULUV00A520IBF1FAOO10G6">
      <mapping src="Z6_C2ORULUV0GP520IBIUSMBS0040" dst="Z6_C2ORULUV00A520IBF1FAOO10G6"/>
      <mapping src="Z6_000000000000000000000000A0" dst="Z6_C2ORULUV001S30IR8FCN1Q3001"/>
      <mapping src="Z6_C2ORULUV001S30IR8FCN1Q3001" dst="Z6_C2ORULUV0GP520IBIUSMBS0040"/>
    </selection>
    <expansions>
      <node id="Z6_C2ORULUV0GP520IBIUSMBS00O5"/>
      <node id="Z6_CGAH47L008LG50IAHUR9Q330A3"/>
      <node id="Z6_000000000000000000000000A0"/>
    </expansions>
    <theme-template>Home</theme-template>
    <portlet id="Z7_CGAH47L008LG50IAHUR9Q33803" portlet-type="legacy"/>
  </state>
  <target portlet-type="legacy" portlet-id="Z7_CGAH47L008LG50IAHUR9Q33803" id="LSzyY48160027">
    <target-type>action</target-type>
    <action-ref>sa.spf_ActionListener</action-ref>
  </target>
</root> 
```

检查 XML 允许您对不同信息的实际含义进行有资格的猜测。例如，`<portlet>`section(s) 清楚地包含有关窗口状态的信息，并且可能还包含有关 portlet 模式的信息。该`<selection>`部分包含用户经过的选择路径，等等。

由于我不知道您打算将解码后的信息用于什么用途，因此我无法为您提供任何具体的指导，但请考虑内部状态信息的 XML 表示，并且不要将任何应用程序逻辑基于它，因为它可以随时改变。

不过，将其解码以进行故障排除以及大致了解门户的 URL 处理可能很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-12T23:34:16.280

这对我有用...http:server:port/context root/contenthandler?uri=state:

# rest - 在 REST 服务调用中指定版本的最佳方式

> ID：12848131
> 
> 赞同：1
> 
> 时间：2012-10-11T20:37:36.413
> 
> 标签：rest, versioning, auto-versioning

> **可能重复：**
> [如何对 REST URI 进行版本控制](https://stackoverflow.com/questions/972226/how-to-version-rest-uris)

我目前正在编写一个 REST 服务，我想了解我的客户在发出请求时如何指定服务版本。

例如，当我将 REST 服务器升级到版本 2 时，我不希望所有已实现我的服务版本 1 的客户端都中断调用。

我见过其他人在 url 中添加版本或在某处的标题中指定版本。

可能没有“最好”的方式来实现这一点，但我会很感激关于这个主题的一些想法（每个人的优点和缺点等......）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T20:38:49.637

我们通过不同的路线来做到这一点：

```
 http://my.service.com/v1/user/1

 http://my.service.com/v2/user/1 
```

在版本之间没有变化的情况下，我们只是将路由映射到为 v1 版本的资源提供服务的控制器。

是的，这确实为同一个资源创建了多个 URL，并且不稳定的铁杆 REST evanginlists 会开始哭泣，但是这种方式可以让您和您的用户轻松管理。我发现用户甚至不能使用请求标头来设置内容类型之类的东西，从不介意 X-Path 或类似的东西来处理版本控制......

如果你真的想避免重复资源问题，你可以传入一个 get 参数，如版本：

```
 http://my.service.com/user/1?version=1 
```

如果没有版本，则默认为任何版本。这实际上完全是 REST 教条，但我认为它对您的 API 用户有很大影响。

如果您有办法将用户或 api 密钥映射到版本，您可以使用某种用户查找表在版本之间进行路由，但这是非常疯狂的开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:26:16.320

我建议通过 Accept/Content-Type 标头进行版本控制。URI 不应跨版本更改，除非资源本身发生较大的结构更改。这是一个很好的解释：[API 版本控制的最佳实践？](https://stackoverflow.com/questions/389169/best-practices-for-api-versioning/6750376#6750376)

# c# - MVC 从另一个部分调用控制器并将模型传入

> ID：12848138
> 
> 赞同：0
> 
> 时间：2012-10-11T20:38:41.987
> 
> 标签：c#, asp.net, asp.net-mvc

我有一个在控制器中具有搜索功能的页面，效果很好

```
[HttpPost]
public virtual ActionResult Search(SearchModel model)
{
    ...adds to IEnumerable and such
    return View(model);
} 
```

我的问题是我有另一个带有搜索框的页面，我需要将其重定向到与上面相同的视图。（URL 中的参数不是一个选项）

```
 @using (Html.BeginForm("Search", "Home", FormMethod.Post, null))
    {
       @Html.TextBoxFor(t => t.SearchModel) 
       <input.....
    } 
```

但它没有加载正确的 URL，它只是将它添加到当前的 URL。因此，它不是将 example.com/Home/Search 添加到该表单当前所在位置的末尾。因此，如果页面位于 example.com/About/SearchPage 中，则将 t.SearchModel 添加到 About/Searchpage

编辑：我有两个不同的控制器和视图，ControllerA 和 ViewA 工作正常，它带回了搜索结果。我希望有输入框的 ViewB 调用 ViewA 并使用 ControllerA 搜索技术

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:51:31.207

您有一个嵌套表单。这不是有效的 HTML。HTML 不允许您将一个表单放入另一个表单中。一个页面上可以有多个表单，但不能嵌套它们。

我也不确定您所说的“另一个部分”是什么意思，您是指 Razor 中的 @section 关键字吗？还是您的意思是 MVC 区域？或者是其他东西？

# objective-c - '==' 的左操作数是垃圾值

> ID：12848145
> 
> 赞同：3
> 
> 时间：2012-10-11T20:38:54.340
> 
> 标签：objective-c, ios, operands

分析我的 ios 项目时出现此错误

```
The left operand of '==' is a garbage value 
```

这就是代码发生位置的样子。此方法用于对从数据库返回给我的数组进行排序。

```
- (NSMutableArray *)startSortingTheArray:(NSMutableArray *)unsortedArray
{
    [unsortedArray sortUsingComparator:^ NSComparisonResult(SearchResultItem *d1, SearchResultItem *d2) {
        //initalize comparison
        NSComparisonResult result;

        NSInteger manufacturerID1 = d1.manufacturerID;
        NSInteger manufacturerID2 = d2.manufacturerID;
            if (manufacturerID1 > manufacturerID2)
                return NSOrderedAscending;
            if (manufacturerID1 < manufacturerID2)
                return NSOrderedDescending;
            if (manufacturerID1 == manufacturerID2) {

            NSString *model1 = d1.model;
            NSString *model2 = d2.model;
            result = [model1 localizedCompare:model2];
        }
        if (result == NSOrderedSame) {
//.. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T20:42:13.593

编译器之所以抱怨，是因为它认为可以在有值`==`之前进行比较。`result`

给定您的代码的最佳选择是使用`else if`and `else`：

```
if (manufacturerID1 > manufacturerID2)
    return NSOrderedAscending; // we won't reach the comparison so result doesn't matter
else if (manufacturerID1 < manufacturerID2)
    return NSOrderedDescending; // we won't reach the comparison so result doesn't matter
else {
    NSString *model1 = d1.model;
    NSString *model2 = d2.model;
    result = [model1 localizedCompare:model2]; // in any other case, result will be set.
}
... 
```

或者你可以这样做：

```
NSComparisonResult result;
...
if (manufacturerID1 > manufacturerID2)
    return NSOrderedAscending;
else if (manufacturerID1 < manufacturerID2)
    return NSOrderedDescending;

NSString *model1 = d1.model;
NSString *model2 = d2.model;
result = [model1 localizedCompare:model2];
... 
```

甚至这样：

```
if (manufacturerID1 > manufacturerID2)
    return NSOrderedAscending;
else if (manufacturerID1 < manufacturerID2)
    return NSOrderedDescending;

NSComparisonResult result = [d1.model localizedCompare:d2.model];
... 
```

这样编译器就知道，如果达到比较，则 的值`result`已经被设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T20:43:20.127

我认为这只是 llvm “求解器”不理解 <、> 或 == 中的一个对于制造商 ID [12] 比较必须是正确的。尝试删除该`if (manufacturerID1 == manufacturerID2)`块，以便它可以判断出`result`未初始化的值没有被使用。尽管您发表了评论，但您实际上并没有在那里初始化它的值。

# java - Java Gson 将 json 序列化为对象

> ID：12848146
> 
> 赞同：2
> 
> 时间：2012-10-11T20:39:00.780
> 
> 标签：java, json, gson

我有以下项目类：

```
public class Item {
    public Object item;
} 
```

我正在使用 GSON 将 JSON 插入此对象。

时间=

```
{
    "_id": {
        "$oid": "5076371389d22e8906000000"
    },
    "item": {
        "values": [
            {
                "value1": [
                    4958,
                    3787,
                    344
                ],
                "value2": [
                    4,
                    13,
                    23
                ]
            }
        ], 
        "name": "item1"
    }
} 
```

爪哇位：

```
Item item = new Item();
Gson g = new Gson();
it = g.fromJson(tmp.toString(), Item.class); 
```

`it.item`成为一种`StringMap`类型（[http://code.google.com/p/google-gson/source/browse/trunk/gson/src/main/java/com/google/gson/internal/StringMap.java?r=1131](http://code.google.com/p/google-gson/source/browse/trunk/gson/src/main/java/com/google/gson/internal/StringMap.java?r=1131)）

我现在需要访问这个对象中的子对象。我可以使用这种类型的重写`toString`函数，它打印这个对象中的所有对象。但是我如何才能浏览它呢？PS我将所有内容都放入对象数据类型而不是结构化类的原因是JSON结构每次都在变化，所以我不能真正拥有类模式。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:19:46.283

您应该创建一个反映 JSON 的对象结构（因为无论如何这都是您想要做的）。对于您的示例，您可以使用以下命令：

```
public class MyObject {
    private Item item;
    private String _id;

    // getters, setters, etc.
}

public class Item {
    private List<Value> values;
    private String name;

    // getters, setters, etc.
}

public class Value {
    private List<Integer> values1;
    private List<Integer> values2;

    // getters, setters, etc.
} 
```

然后传递`MyObject.class`给 Gson：

```
MyObject myObj = g.fromJson(tmp.toString(), MyObject.class); 
```

您可以`values`像这样获取列表：

```
List<Integer> values1 = myObj.getItem().getValues().get(0).getValues1();
List<Integer> values2 = myObj.getItem().getValues().get(0).getValues2(); 
```

试试看它是否有效。

[另外，您应该在这里](https://stackoverflow.com/a/12630103/646634)查看我对类似问题的回答，特别是最后关于如何基于一些 JSON 对象为 Gson 编写对象结构的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:45:23.707

您始终可以为使用反射并采用 StringMap 的自定义对象创建构造函数

```
public MyObject(StringMap sm){
    Iterator it = sm.entrySet().iterator();
    while(it.hasNext()){
        Entry pairs = (Entry)it.next();
        Class<?> c = this.getClass();
        try {
            Field value = c.getDeclaredField((String) pairs.getKey());
            value.set(this, pairs.getValue());
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

# html - 使用 Google Analytics 根据链接点击量进行投票

> ID：12848150
> 
> 赞同：1
> 
> 时间：2012-10-11T20:39:09.600
> 
> 标签：html, image, google-analytics

所以我知道谷歌分析可以跟踪我的页面链接，但我如何才能将点击次数作为原始数据并将其重新整合到 HTML 中？

我在锚标签中有两个图像，用户可以为图像 a 或图像 b“投票”。每个图像都指向其自己单独的 html 页面。我如何使用这两个链接中的每一个的综合浏览量数据并将它们显示在主页上的图像下方，本质上是创建一个民意调查。

# c# - Asp.net 从登录重定向到主页

> ID：12848152
> 
> 赞同：2
> 
> 时间：2012-10-11T20:39:23.017
> 
> 标签：c#, asp.net, web-config, iis-7.5

我的 webapp 上有 2 个页面。Login.aspx 和 Main.aspx。

成功登录用户名和密码后，我从 login.aspx 重定向到 Main.aspx，如下面的 c# 所示。这在 Visual Studio 2010 中运行良好。问题是当我部署我的网站时，值 localhost 没有意义。

我可以确定网站正在运行的服务器名称，还是应该以某种方式将服务器重定向主页链接放在我的 web.config 文件中？

谢谢达摩

```
string Redirectport = HttpContext.Current.Request.ServerVariables["SERVER_PORT"];
RedirectURL = "http://localhost:" + Redirectport + System.Web.HttpContext.Current.Response.ApplyAppPathModifier("~/Main.aspx"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T20:54:02.903

怎么样

`RedirectURL = Page.ResolveUrl("~/Main.aspx")`?

这是执行此操作的“默认”方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T20:41:56.830

您可以使用服务器变量 SERVER_NAME

```
string serverName = HttpContext.Current.Request.ServerVariables["SERVER_NAME"]
RedirectURL = "http://" + serverName + ":" + Redirectport + 
    System.Web.HttpContext.Current.Response.ApplyAppPathModifier("~/Main.aspx"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T20:42:01.720

我的建议是将服务器名称放在`web.config`文件中并将其加载到`Global.asax`Application_Start 事件下的文件中

在`web.config`文件中：

```
<appSettings>
    <add key="Domain" value="yourdomain" />
</appSettings> 
```

在`Global.asax`文件中：

```
protected void Application_Start(object sender, EventArgs e)
{
    try
    {
        SomeStaticGlobalClass.Domain = System.Configuration.ConfigurationManager.AppSettings["Domain"];
    }
    catch { }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-16T07:47:02.833

如果你想导航到一些内部网页，你可以使用类似下面的东西

```
Response.Redirect("~/Default.aspx"); 
```

您也可以使用它导航到其他服务器

```
Response.Redirect("https://www.google.com/"); 
```

# c++ - 如何解析模板化的静态成员函数？

> ID：12848155
> 
> 赞同：5
> 
> 时间：2012-10-11T20:39:35.227
> 
> 标签：c++, templates, static, c++11

我从来没有很好地解释模板参数推导如何真正起作用，所以我不确定如何解释我在下面看到的行为：

```
template<typename T>
struct Base
{
protected:
    template<bool aBool = true>
    static void Bar(int)
    {
    }
};

template<typename T>
class Derived : public Base<T>
{
public: 
    void Foo() { Base<T>::Bar<false>(5); } 
};

int main()
{
    Derived<int> v;
    v.Foo();
    return 0;
} 
```

此代码不会构建，并给出错误：

```
main.cpp: In instantiation of 'void Derived<T>::Foo() [with T = int]':
main.cpp:25:8:   required from here main.cpp:19:15: error: invalid
operands of types '<unresolved overloaded function type>' and 'bool'
to binary 'operator<' 
```

如果将`Base<T>`Derived 中的 2 更改为`Base<int>`，它会编译。如果将调用更改`Bar()`为`Base<T>::template Bar<false>(5);`，它也会编译。

我看到的一个解释是编译器不知道 Bar 是一个模板，大概是因为它不知道 Base 是什么，直到声明了 Derived 的特化。但是一旦编译器开始为 , 生成代码`Foo()`，`Base<T>`就已经定义了，并且`Bar`可以确定 的类型。是什么导致编译器假定符号`Bar`不是模板，*并*尝试应用`operator<()`？

我认为它与在编译过程中评估模板时的规则有关 - 我想我正在寻找的是对这个过程的一个很好的全面解释，这样下次我遇到如下代码时，我可以在没有堆栈溢出的好人帮助的情况下推断出答案。

注意我使用 g++ 4.7 编译，支持 c++x11。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:00:15.673

```
void Foo() { Base<T>::Bar<false>(5); } 
```

在此上下文中`Base<T>`是一个从属名称。要访问依赖名称的成员模板，您需要添加`template`关键字：

```
void Foo() { Base<T>::template Bar<false>(5); } 
```

否则`Base<T>::Bar`将被解析为非模板成员`<`和*小于*。

至于为什么`template`需要，原因是两阶段查找。错误是在第一次传递时触发的，*在类型被替换之前*，所以编译器不*知道*的定义是什么`Base<T>`。例如，考虑您添加了具有非模板成员（例如成员）的`Bar`for的特化。在代入之前，编译器不知道该类型是否有专门化。`int``Bar``int``T``Foo`

# yetanotherforum - 如何更改用户在 Yetanotherforum 中收到的批准电子邮件？

> ID：12848156
> 
> 赞同：0
> 
> 时间：2012-10-11T20:39:35.980
> 
> 标签：yetanotherforum, yaf

一旦我批准用户在 Yetanotherforum 中使用论坛，如何更改用户收到的电子邮件？我不确定要更改哪个文件。

而不是“你已经被批准......”等，我想有我自己的自定义味精。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:08:35.113

这可以通过打开您的论坛，然后打开语言文件夹来完成。在语言文件夹中，选择您要更改的特定 .xml 语言文件。

选择后，搜索

```
<Resource tag="VERIFYEMAIL_TEXT"> 
```

下面是您发送给等待论坛批准的用户的消息。在那里，您可以根据自己的喜好编辑文本。对您希望更改的任何其他语言文件重复这些步骤。

我希望这可以帮助别人！

# sql - Oracle/SQL - 多表连接逻辑 - 不知道如何表达它

> ID：12848159
> 
> 赞同：0
> 
> 时间：2012-10-11T20:39:56.490
> 
> 标签：sql, oracle

我要做的是找到前一天购买了一个`Series X`或`Series A`小部件的所有客户，只要这是他们第一次从中购买小部件。如果他们购买了多个符合条件的小部件`Series X`，那么我应该只获得它的记录。希望这是有道理的，所以这是数据

```
[customers]
c_id     cp_id
--------------
1        cp1
2        cp2
3        cp3
4        cp4
5        cp5
6        cp6
7        cp7
8        cp8
9        cp9
10       cp10

[widget_orders - c_id maps to c_id in customers]
c_id    w_sku   o_date
----------------------
1       w1      2012-10-10
2       w1      2012-10-10
2       w2      2012-10-10
3       w1      2012-10-10
3       w2      2012-10-10
4       w1      2012-10-10
4       w2      2012-10-10
5       w1      2012-10-10
5       w2      2012-10-10
6       w1      2012-10-10
6       w2      2012-10-10
7       w2      2012-10-10
8       w1      2012-10-10
9       w3      2012-10-10

[widgets - w_sku maps to w_sku in widget_orders]
w_sku   w_series
------------------
w1      Series A
w2      Series X
w3      Series C

[customer_data - c_id maps to c_id in customers]
cp_id   seriesA_fPurch  seriesX_fPurch
--------------------------------------
cp3     
cp4     2012-09-15
cp5                     2012-09-15
cp6     2012-09-15      2012-09-15
cp7                     2012-09-15  
cp8     2012-09-15 
```

这是我想要返回的数据，忽略 () 中的描述

```
cp_id   series
--------------
cp1     Series A (bought series A and had NO prior purchase history)
cp2     Series X (bought both series, but X has rank - no purchase history)
cp3     Series X (bought both series, but X has rank - has purchase history recors albeit not for these)
cp4     Series X (bought both series, but X has rank - already had A history anyways)
cp5     Series A (bought both series, although X has rank they had previously bought series X) 
```

以下人员未显示在结果中

```
cp6 - they had previously bought both series
cp7 - bought a series x, but had in the past
cp8 - bought a series a, but had in the past
cp9 - bought a widget in neither series
cp10 - didnt buy anything 
```

希望所有这些都是有道理的，有人可以在这里帮助我！

所以总结一下逻辑，也许在这里更清楚地定义它是我将如何描述需要以类似步骤的方式发生的事情

```
1) Find all customers who have no matching records in the customer_data table
2) Find all customers who have a null value in either *purch column in the customer_data table
3) Combine these results together
4) Take the results and find the customers who made a purchase yesterday
5) Take the results and find the customers who purchased Series A or Series X
6) Take the results and do the following
    6a) If the purchase was Series A and they have a value for series A purch already drop them from results
    6b) If the purchase was Series X and they have a value for series X purch already drop them from results
7) Take the results and remove duplicate records based on the cp_id - Series X takes presedence over Series A 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:27:09.480

我不确定我是否完全理解您的要求，但请尝试：

```
SELECT cp_id, w_series
FROM (
SELECT rank() over (partition BY wo."c_id" ORDER BY decode(w."w_series",'Series X',1,'Series A',2)) rank,
       wo."c_id" c_id,
       c."cp_id" cp_id,
       w."w_series" w_series
FROM widget_orders wo JOIN widgets w ON wo."w_sku"=w."w_sku"
  JOIN customers c on c."c_id"=wo."c_id"
LEFT OUTER JOIN customer_data cd ON c."cp_id" = cd."cp_id"
WHERE  w."w_series" IN ('Series A', 'Series X')
  AND  trunc(wo."o_date") = trunc(sysdate)-1
  AND ( (cd."seriesA_fPurch" IS NULL AND w."w_series"='Series A')
     OR (cd."seriesX_fPurch" IS NULL AND w."w_series"='Series X'))
  )
WHERE rank = 1 
```

[这](http://www.sqlfiddle.com/#!4/1ae00/5)是一个小提琴

说明：
根据阶梯式数字-
1) + 2) 在`LEFT OUTER JOIN`+`cd."seriesA_fPurch" IS NULL`条件+`cd."seriesX_fPurch" IS NULL`条件中完成，因为它也会找到那些没有记录的人并在其中放入空值。
3) 明显...
4)`trunc(wo."o_date") = trunc(sysdate)-1`条件
5) `w."w_series" IN ('Series A', 'Series X')`
6)`(cd."seriesA_fPurch" IS NULL AND w."w_series"='Series A') OR (cd."seriesX_fPurch" IS NULL AND w."w_series"='Series X')`条件
7) 通过对记录和`WHERE rank = 1`条件进行排名

# ruby-on-rails - rails mailer 生成无效的 URL

> ID：12848162
> 
> 赞同：0
> 
> 时间：2012-10-11T20:40:00.297
> 
> 标签：ruby-on-rails, actionmailer, rails-routing, railscasts

我正在尝试使用操作邮件向我的 Rails 应用程序添加密码重置功能。除了生成的重置密码链接不正确外，一切似乎都运行良好。

以下是文件：

`File user_mailer.rb`：

```
class UserMailer < ActionMailer::Base
  default from: "from@example.com"
  def password_reset(user)
    @user = user #make the user available in mailer template
    mail :to => user.email, :subject => "Password Reset"
  end
end 
```

`File password_reset.text.erb`包含以下链接：

`<%= edit_password_resets_url(@user.password_reset_token) %>`

当我获得电子邮件和令牌值时，我可以看到用户变量已正确传递。但是，邮件程序中生成的 URL 如下所示：

```
http://localhost:3000/password_reset/edit.jo_jYhkjsdjskjdskYHJSDA 
```

但是，期望值就像

```
http://localhost:3000/password_resets/jo_jYhkjsdjskjdskYHJSDA/edit 
```

有以下内容`routes.rb`

```
resource :password_resets 
```

此外，rake 路线显示以下内容：

```
edit_password_resets GET /password_resets(.:format) password_resets#edit 
```

可能出了什么问题？

注意：我正在关注 Ryan bates 的 rails casts #274

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:00:24.910

这似乎是`config/routes.rb`contains`resource :password_resets`而不是`resources :password_resets`. 作为[单一资源](http://guides.rubyonrails.org/routing.html#singular-resources)，这将添加`edit_password_resets`一条到`/password_resets/edit(.:format)`. 将值传递给`edit_password_resets_url`将映射到`edit.<value>`，与您描述的症状一致。

将其更改为`resources :password_resets`应该可以解决问题。它还将路由重命名为`edit_password_reset`-- 单数，因为它适用于成员，而不是适用于集合的复数。

# c# - 图片从 url 到 listview

> ID：12848163
> 
> 赞同：0
> 
> 时间：2012-10-11T20:40:00.250
> 
> 标签：c#, winforms, image, listview, webclient

我有一个列表视图，可以显示来自 YouTube 的视频结果。一切正常，但我注意到的一件事是它的工作方式似乎有点慢，这可能是由于我的代码。有什么建议可以让我做得更好吗？也许直接从网址加载图像而不是使用网络客户端？

我正在从使用 YouTube API 的查询返回的视频提要中循环添加 listview 项目。我认为减慢它的代码是这样的：

```
Feed<Video> videoFeed = request.Get<Video>(query);
int i = 0;
foreach (Video entry in videoFeed.Entries)
{
string[] info = printVideoEntry(entry).Split(',');
WebClient wc = new WebClient();
wc.DownloadFile(@"http://img.youtube.com/vi/" + info[0].ToString() + "/hqdefault.jpg", info[0].ToString() + ".jpg");

string[] row1 = { "", info[0].ToString(), info[1].ToString() };
ListViewItem item = new ListViewItem(row1, i);
YoutubeList.Items.Add(item);

imageListSmall.Images.Add(Bitmap.FromFile(info[0].ToString() + @".jpg"));
imageListLarge.Images.Add(Bitmap.FromFile(info[0].ToString() + @".jpg"));
}
public static string printVideoEntry(Video video)
{
  return video.VideoId + "," + video.Title;
} 
```

如您所见，我使用了一个 Webclient 来下载图像，因此我可以将它们用作列表视图中的图像。它有效，但我担心的是速度..有什么建议吗？也许一个不同的控制在一起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:30:34.743

好的，我希望这是您正在寻找的代码，我无法测试它，因为我没有您正在使用的 dll，但我认为没关系。

```
 Feed<Video> videoFeed = request.Get<Video>(query);

            Thread th = new Thread(new ParameterizedThreadStart( GetImages));
            th.Start(videoFeed);
            int i = 0;
            foreach (Video entry in videoFeed.Entries)
            {
                string[] info = printVideoEntry(entry).Split(',');
                string[] row1 = { "", info[0].ToString(), info[1].ToString() };
                ListViewItem item = new ListViewItem(row1, i++);
                YoutubeList.Items.Add(item);
            }

        }
        void GetImages(object arg)
        {
            Feed<Video> videoFeed = Feed<Video> arg;
            foreach (Video entry in videoFeed.Entries)
            {
                string[] info = printVideoEntry(entry).Split(',');
                WebClient wc = new WebClient();
                wc.DownloadFile(@"http://img.youtube.com/vi/" + info[0].ToString() + "/hqdefault.jpg", info[0].ToString() + ".jpg");
                ImageAdd(info[0]+".jpg");
            }
        }
        delegate void imageAdder(string imgName);
        void AddImage(string imgName)
        {
            imageListSmall.Images.Add(Bitmap.FromFile(imgName + @".jpg"));
            imageListLarge.Images.Add(Bitmap.FromFile(imgName + @".jpg"));
            listView1.Refresh();
        }
        void ImageAdd(string imgName)
        {
            this.Invoke(new imageAdder(AddImage), new object[] { imgName });
        } 
```

试试看，如果你有问题我会评论它。

# c++ - Visual Studio 在调试模式下附加到进程

> ID：12848164
> 
> 赞同：1
> 
> 时间：2012-10-11T20:40:14.020
> 
> 标签：c++, visual-studio-2010, excel, debugging, dll

我有一个奇怪的问题。

我在 c++ Visual Studio 2010 中构建的 dll（我们称之为 my.dll）使用第三方库（比如 tp.lib），而后者又调用第三方 dll（比如 tp.dll）。

用于调试目的，我在 configurationProperties->debugging->command: Excel.exe 和 configurationProperties->debugging->commandArguments: "$(TargetPath)"

在我的电脑中，我还将 PATH 变量设置为 tp.dll 所在的目录

现在，当我在 Visual Studio 中按 F5 时，excel 打开 my.dll 并崩溃，给我一个“无法在 dos 模式下打开”错误。发生这种情况的原因是部署调试版本的 my.dll 时未部署 tp.dll。

当我单独打开一个 excel 实例并手动删除 my.dll 的调试版本时，一切正常，我可以看到我在 my.dll 中编写的所有函数

唯一的问题是现在我不知道如何调试，因为我不知道如何将 Visual Studio 附加到我单独打开的 excel 实例。

我的问题是：

1> 如何将 Visual Studio 附加到已打开的 Excel 实例

或者

2> 如何在开始部署 my.dll 之前按 F5 并让 Excel 从 PATH 变量中指定的目录中获取所需的 tp.dll。

这两个中的任何一个都将允许我单步调试代码以进行调试。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:35:54.450

好的，我通过反复试验找到了一种方法 1>构建调试 dll。2> 打开 excel 实例并将 my.dll 从调试文件夹中拖放到其中。3>在Visual Studio 2010中：属性->配置属性->调试->命令= excel.exe 4>属性->配置属性->调试->附加=是

现在你在visual studio中按下F5。这会将 Visual Studio 编辑器附加到 my.dll 的运行副本，这将允许单步执行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T20:56:19.767

1.  除非您使用的是 Express 版本，否则您可以[将 Visual Studio 附加到正在运行的进程中](http://msdn.microsoft.com/en-us/library/3s68z0b3%28v=vs.100%29.aspx)。
2.  我会复制`tp.dll`到包含`my.dll`.

# python - 带有递归的循环变量

> ID：12848165
> 
> 赞同：2
> 
> 时间：2012-10-11T20:40:13.873
> 
> 标签：python, recursion

想通过递归执行以下操作，以便我可以改变“for”循环的数量：

```
n = 5
out = []
for i in range(n):
    for j in range(i,n):
        for k in range(j,n):
            out.append([i,j,k]) 
```

返回

```
out =   [[0 0 0]
         [0 0 1]
         [0 0 2]
         [0 0 3]
         [0 0 4]
         [0 1 1]
         [0 1 2]
         [0 1 3]
         [0 1 4]
         [0 2 2]
         [0 2 3]
         [0 2 4]
         [0 3 3]
         [0 3 4]
         [0 4 4]
         [1 1 1]
         [1 1 2]
         [1 1 3]
         [1 1 4]
         [1 2 2]...] 
```

例如

```
def Recurse(n, p):
  # where p is the number of for loops
  some magic recursion 
  return out 
```

我看过其他一些递归问题，但很难找到解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T20:43:25.650

不使用递归，而是使用[`itertools.product()`](http://docs.python.org/library/itertools.html#itertools.product)，这相当于生成器表达式中的嵌套 for 循环：

```
>>> import itertools
>>> list(itertools.product(range(3), repeat=2))
[(0, 0), (0, 1), (0, 2), (1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2)]
>>> list(itertools.product(range(3), repeat=3))
[(0, 0, 0), (0, 0, 1), (0, 0, 2), (0, 1, 0), (0, 1, 1), (0, 1, 2), (0, 2, 0), (0, 2, 1), (0, 2, 2), (1, 0, 0), (1, 0, 1), (1, 0, 2), (1, 1, 0), (1, 1, 1), (1, 1, 2), (1, 2, 0), (1, 2, 1), (1, 2, 2), (2, 0, 0), (2, 0, 1), (2, 0, 2), (2, 1, 0), (2, 1, 1), (2, 1, 2), (2, 2, 0), (2, 2, 1), (2, 2, 2)] 
```

**编辑：**没有意识到这实际上不是笛卡尔积，因为内部循环使用外部变量来开始范围，这是一种可能性，但它的效率并不高，因为它会生成额外的值并且需要检查每个值是否有效：

```
def nested_loops(n, num_loops):
    prod = itertools.product(range(n), repeat=num_loops)
    for item in prod:
        if all(item[i] <= item[i+1] for i in range(num_loops-1)):
            yield item

>>> list(nested_loops(3, 2))
[(0, 0), (0, 1), (0, 2), (1, 1), (1, 2), (2, 2)]
>>> list(nested_loops(3, 3))
[(0, 0, 0), (0, 0, 1), (0, 0, 2), (0, 1, 1), (0, 1, 2), (0, 2, 2), (1, 1, 1), (1, 1, 2), (1, 2, 2), (2, 2, 2)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T21:31:52.460

@DSM 有更好的答案（但在评论中）

但是，这是一个简单的递归解决方案，以防万一有人努力解决

```
def f(n, p, start=0):
    if p==0:
        yield []
    else:
        for i in range(start, n):
            for j in f(n, p-1, i):
                yield [i]+j 
```

# r - RStan 会在超级计算机上运行吗？

> ID：12848168
> 
> 赞同：10
> 
> 时间：2012-10-11T20:40:26.180
> 
> 标签：r, stan

Stan 是[Gelman 等人](http://andrewgelman.com/category/stan/)的新贝叶斯分析软件。

我猜，RStan 是一种从 R 中调用 Stan 的方法。

Stan / RStan 是否会在具有 Linux 操作系统的超级计算机上运行，​​如果可以，它能否利用超级计算机的多处理器？我被告知 WinBUGS 不会在 Linux 机器上运行和/或不能利用超级计算机的多处理器。

我正在寻找一种方法来加快贝叶斯分析 - 从几周到几天/几小时。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-21T11:10:32.477

Stan 和 rstan 应该在支持依赖项的 Linux、Mac 或 Windows 上运行。我们尚未在 BSD 或 Oracle 上进行测试，但我们希望它们可以与 g++ 或 clang 编译器一起使用（尽管不是 Oracle 编译器）。

Stan 或 rstan 中没有明确的并行代码，但也没有任何代码可以阻止二进制文件同时被多个进程执行。例如，如果您在 bash shell 的命令行中使用 Stan，您可以执行类似的操作

```
./my_model --data=my_data.dump --seed=12345 --chain_id=1 --samples=samples_1.csv &
./my_model --data=my_data.dump --seed=12345 --chain_id=2 --samples=samples_2.csv & 
```

等等，你喜欢多少链子都行。并行执行时使用相同的种子但不同的chain_id很重要。

如果您使用的是 rstan 包，则可以`stan()`使用 R 和您的操作系统支持的任何并行引擎调用 main 函数。同样，最好传递相同的种子和不同的chain_id。截至`rstan v1.0.3`（尚未发布），有一个函数调用，它获取可能已并行生成`sflist2stanfit()`的对象列表，并将它们组合成单个对象以进行分析。`stanfit``stanfit`

有关更多信息，请参阅专门用于并行执行的线程

[https://groups.google.com/d/topic/stan-users/3goteHAsJGs/discussion](https://groups.google.com/d/topic/stan-users/3goteHAsJGs/discussion)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T18:33:07.277

我写道，我会发布我学到的东西。

大学超级计算中心相信 RStan 将在他们的机器上运行。但是，我必须申请一个帐户，这可能需要一些时间。因此，我不确定 RStan 是否会在这些机器上运行一段时间。他们设施的正式名称是“北极地区超级计算中心”。

我在桌面上安装 RStan 时遇到了麻烦，不得不寻求 OIT 的帮助。所以，这里是我使用的步骤和 OIT 绅士使用的代码。我有一个 Windows 7 Professional 操作系统。

1.  我不得不使用 R 2.15.1

2.  我将 R 安装在目录 'C:\R\R-2.15.1' 中，因此目录名称中不会有空格

3.  我必须安装 Rtools。

4.  我在目录“C:\Rtools”中安装了 Rtools

5.  确保 Rtools 出现在路径中，以便 R 可以在 Rtools 中找到 C++ 编译器

6.  去检查：

    计算机，属性，高级系统设置，环境变量，路径。

    我想我应该同时包括：'c:\Rtools\bin' 和：'c:\Rtools\gcc-4.6.3\bin'

7.  打开 R

8.  这是要键入的 R 代码（此代码出现在此处： [http](http://code.google.com/p/stan/wiki/RStanGettingStarted) ://code.google.com/p/stan/wiki/RStanGettingStarted ）：

    install.packages('内联')

    install.packages('Rcpp')

    install.packages('RcppEigen')

    选项(repos = c(getOption("repos"), rstan = "http://wiki.stan.googlecode.com/git/R"))

    install.packages('rstan', type = 'source')

    图书馆（斯坦）

9.  然后我从这里运行了学校的例子：

[http://code.google.com/p/stan/wiki/RStanGettingStarted](http://code.google.com/p/stan/wiki/RStanGettingStarted)

上周，我一直在尝试使用 pdf 文件“stan-reference-1.0.2”中包含的说明来安装 STAN，而不是上面链接中的说明。

我希望这对其他人有帮助。如果当我知道 RStan 是否肯定会在 Supercomputing Center 机器上运行时，我会在这里发布我学到的东西。

我没有卸载 STAN 来测试上述过程。希望我在上述步骤中没有犯任何错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-31T13:16:09.043

这是一个将源代码作为文本的具体并行化函数：

```
library(rstan)
library(parallel)

parallel_stan <- function(code, data, cores=detectCores(), chains=8, iter=2000, seed=1234) {
    cat("parallel_stan: cores=", cores, ", chains=", chains, ", iter=", iter, ", seed=", seed, "\n", sep="")
    cat("--- Step 1: compile the model (and run it once, very briefly, ignoring its output)\n")
    f1 = stan(model_code = code, data = data, iter = 1, seed = seed, chains = 1, chain_id = 1)
    cat("--- Step 2: run more chains in parallel\n")
    sflist <- mclapply(
        1:chains
        , mc.cores = cores
        , function(i) stan(fit = f1, data = data, iter = iter, seed = seed, chains = 1, chain_id = i)
    )
    # ... passing the same seed to all chains follows example(sflist2stanfit)
    # ... important to use the same seed but different chain_id when executing in parallel
    cat("--- Finished.\n")
    return(sflist2stanfit(sflist))
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T22:39:13.753

RSeek 搜索（对于：Rstan gelman）的第一次点击在点击一个链接后产生了这个：

[https://github.com/stan-dev/rstan/wiki/RStan-Getting-Started](https://github.com/stan-dev/rstan/wiki/RStan-Getting-Started)

它还没有在 CRAN 上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-23T16:37:52.500

这是关于贝叶斯 MCMC 计算的一般性评论。

通常超级计算机运行服务器级处理器而不是桌面级。Stan 和其他 MCMC 程序几乎总是在每个链的基础上非常严格地串行，也就是说，你很少有可能通过拥有多个处理器来获得单个链的加速。我们有一个小型集群，其中有一台双至强级服务器和几台普通台式机作为工作站。只要您保持在 16GB RAM 的限制 范围内，工作站中的 Core-i7s 处理器在进行实际计算时通常比服务器*快40% 左右。*

进行此类计算的最快机器可能是具有水冷 CPU 的超频定制游戏机。

也就是说，您当然可以像上面指出的那样并行运行不同的链。

# asp.net-mvc - 一起使用 EF 和 MVC

> ID：12848169
> 
> 赞同：1
> 
> 时间：2012-10-11T20:40:29.673
> 
> 标签：asp.net-mvc, entity-framework-5

我想使用 Entity Framework 5，从中我可以使用一个可以跨越两个或多个数据库的 MVC 模型。

这可能吗？

换句话说，拥有一个可以使用两个或多个数据库的 EF 模型。因为使用 MVC，您只能在视图中使用 1 个模型。带有某些视图的某些数据可能来自不同的数据库。为了在 MVC 中使用模型绑定器并将其映射到 EF 5 列，我需要完成此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T20:42:28.740

**ASP.NET MVC 不依赖于实体框架。**

ASP.NET MVC 是一个用于构建遵循模型视图控制器模式的 Web 应用程序的框架。**它不受实体框架的限制**。它可以使用任何数据访问技术，如 LINQ2SQL / Entity Framework / Pure ADO.NET 等。这意味着您可以使用或不使用 Entity Framework 开发 MVC 应用程序。

我假设您想从 2 个不同的数据库中获取数据并加载模型对象。您可以通过编写从 2 个数据库获取数据并将其放入存储过程并将该过程放入 DbContext 正在与之通信的数据库中的选择查询来做到这一点。然后执行存储过程并加载模型对象。

从 2 个数据库中获取数据的示例程序

```
CREATE PROCEDURE GetCustomer(@id int)
AS
  BEGIN
    SELECT C.ID,A.DateReceived
    FROM  FirstServerName.DbName.dbo.Customer C
    INNER JOIN  SecondServerName.DbName.dbo.Applications A
    ON A.CustomerID=C.CustomerID
    AND A.CustomerID=@id
  END 
```

要使用实体框架执行存储过程，您可以使用`Database.SqlQuery`方法

```
 var idParam = new SqlParameter { ParameterName = "@Id", Value = 414};
  var result = context.Database.SqlQuery<Customer>
                                      ("exec GetCustomer @Id", idParam).ToList(); 
```

这将执行您的 proc 并将数据加载到`Customer`类的实例中，假设结果集结构和您的模型类结构看起来相似。

您可能需要调整存储过程的权限以从相关数据库/表中读取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:04:06.667

如上 MVC 中的 M 就是你想要的。微软没有具体说明 Model 实际上是什么。它当然不必是 EF 模型（尽管 MS 的一些代码示例使用它作为示例）

我建议 M 应该是 ViewModel 并且应该与您的数据层无关。然后使用 Automapper 之类的工具从域模型映射到 ViewModel。ViewModel 封装了您想要显示的数据以及您想要显示的任何特定 Web 视图的特定信息。然后，当您回发 ViewModel 时，您可以使用它来更新域模型的适当字段等，并将其保存到两个数据库中。这是一篇关于 ViewModel 主题的好文章[http://lostechies.com/jimmybogard/2009/06/30/how-we-do-mvc-view-models/](http://lostechies.com/jimmybogard/2009/06/30/how-we-do-mvc-view-models/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T20:47:33.780

Shyju 的意思是 MVC 不关心或不了解您的实体框架数据模型或数据库。因此，一个 MVC 模型可以跨越两个数据库的想法就像说一架飞机可以跨越两个锤子。

# c++ - 重载运算符时出错（必须是非静态成员函数）

> ID：12848171
> 
> 赞同：25
> 
> 时间：2012-10-11T20:40:35.663
> 
> 标签：c++, operator-overloading

我正在自己编写字符串类。我有这样的代码。我只想超载`operator=`。这是我的实际代码，我在代码的最后部分出错。

```
#include <iostream>
#include <string.h>
#include <stdlib.h>

using namespace std;

class S {
    public:
        S();
        ~S() { delete []string;}
        S &operator =(const S &s);

    private:
        char *string;
        int l;
};

S::S()
{
    l = 0;
    string = new char[1];
    string[0]='\0';
}

S &operator=(const S &s)
{
    if (this != &s)
    {
        delete []string;
        string = new char[s.l+1];
        memcpy(string,s.string,s.l+1);
        return *this;
    }
    return *this;
} 
```

但不幸的是，我收到错误'S& operator=(const S&)' must be a nonstatic member function。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-11T21:00:55.900

您缺少班级名称：

这是全局运算符，`=`不能是全局的：

```
S &operator=(const S &s) 
```

您必须将其定义为类函数：

```
S & S::operator=(const S &s)
//  ^^^ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-07T23:14:39.367

我相信 PiotrNycz 提供了合理的答案。在这里，请原谅我再补充一个字。

在 C++ 中，赋值运算符重载函数不能是`friend function`. 对 operator= 使用友元函数，将导致相同的编译器错误“重载 = 运算符必须是非静态成员函数”。

# objective-c - 模态表单中带有 ScopeBar 的 UISearchBar

> ID：12848172
> 
> 赞同：1
> 
> 时间：2012-10-11T20:40:41.557
> 
> 标签：objective-c, ios, ipad, storyboard, uisearchbar

我的 ViewController 是一个自定义的`UIViewController <UITableViewDataSource, UITableViewDelegate, UISearchBarDelegate, UISearchDisplayDelegate>`. 我已经设置 UISearchBar 来显示一个范围栏。

我实例化一次视图控制器，然后通过`[self presentModalViewController:mySearchController fromView:self.view];`

现在，当我将视图控制器配置为显示为表单时，范围栏仅在第一次显示视图时出现。下次不显示范围栏。

将视图显示为页面工作正常。然而，在这种情况下，我观​​察到范围栏第一次已经到位，而此后一旦它成为第一响应者，它就会被动画到搜索栏中。

我在检查器中摆弄了视图和控制器设置，但没有任何成功。

是什么导致了这种行为？

下次显示视图时，如何使范围栏出现在表单中？

有没有办法防止 UISearchBar 在其视图被隐藏/重新显示时进入不同的状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:03:14.513

设置范围栏标题以搜索`delegate`开始编辑并`nil`在搜索结束时进行。并`showScopeBar`在此方法之后添加该方法。尝试检查是否有帮助。

例如：-

```
- (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar { 
  [searchBar setScopeButtonTitles:[NSArray arrayWithObjects:@"Title1", @"Title2", nil]];
  [searchBar setShowsScopeBar:YES];
  //...
} 
```

而在`didEndEditing`,

```
- (void)searchBarTextDidEndEditing:(UISearchBar *)searchBar {
  [searchBar setScopeButtonTitles:nil];
  [searchBar setShowsScopeBar:NO];
  //..
} 
```

除此之外，每当您想要显示范围栏时，您都可以使用上面的行来显示和隐藏它。

# html - 表格填充在 chrome 中不起作用

> ID：12848178
> 
> 赞同：1
> 
> 时间：2012-10-11T20:41:15.143
> 
> 标签：html, css, google-chrome

在过去的几天里，我一直在为这张表苦苦挣扎，最终得到了我想要的结果，只是发现文本对齐在 chrome 中无法正常工作。它在 ie 和 firefox 中准确地显示了我想要的方式（垂直对齐到中间并填充左侧）但是它并没有在 chrome 中出现。任何帮助都会很棒，我已经筋疲力尽了。

[在 jfiddle ( http://jsfiddle.net/kaRev/](http://jsfiddle.net/kaRev/) )中打开这两个。下一张图片说明了我在两个浏览器（chrome 和 ff）之间遇到的问题。右侧的 Firefox 正确填充它，而左侧的 chrome 则没有

![在此处输入图像描述](../Images/4221243ad5afe1e7bcd246b0b61c8752.png)

这是 chrome 的屏幕截图，其中表格中的文本太左了。

![在此处输入图像描述](../Images/df47c7e28e8d35a2836f442fa76c841e.png)

这是 Firefox，这就是我想要的：

![在此处输入图像描述](../Images/8ecc7d099e8ff619c2b918d40059cb17.png)

HTML：

```
<table class="tableBenefits">
<thead>
<tr>
          <th style="height:34px;width: 207px;font-weight:bold;color:#D2161C;" class="headneed">
      &nbsp Your Need        </th>
          <th style="height:34px;width: 166px;font-weight:bold;color:#D2161C;" class="headfeature">
      Feature        </th>
          <th style="height:34px;width: 260px;font-weight:bold;color:#D2161C;" class="headbenefits">
      Benefits   </th>

      </tr>
</thead>

<tbody >
      <tr class="row-mid">
              <td class="need">
        Notify technicians &amp; managers of work order status updates          </td>
              <td class="feature">
        Automated work order email notifications          </td>
              <td class="benefits">
        Keeps team updated on work order status; reduces admin time on work orders          </td>

          </tr>

  <tr class="row-mid">
              <td class="need">
        Notify service/repair requesters of progress          </td>
              <td class="feature">
        Automated service request email notifications          </td>
              <td class="benefits">
        Keeps requesters updated on progress; reduces personnel time for providing updates          </td>
          </tr>

  <tr class="row-mid">
              <td class="need">
        Manage &amp; track work orders          </td>
              <td class="feature">
        Work Order Forms, Linking, &amp; Routing          </td>
              <td class="benefits">
        Simplifies work order administration &amp; reduces data entry time          </td>
          </tr>

  <tr class="row-mid">
              <td class="need">
        Manage service &amp; repair requests          </td>
              <td class="feature">
        Web-based Service Request Form          </td>
              <td class="benefits">
        Simplifies request submission and routing          </td>
          </tr>
  </tbody> 
```

CSS：

```
.tableBenefits thead {
background: url(http://www.mpulsesoftware.com/sites/all/themes/zen/image/top_eq.jpg) no-repeat;
}

.tableBenefits {
border-collapse: collapse;
border-spacing: 0;
}

.tableBeneits thead th {
font-weight:bold;color:#D2161C;
}

.tableBenefits {height:300px;width:640px;}

.headneed{font-weight:bold;font-size:11px;}
.headfeature{font-size:11px;}
.headbenefits{font-size:11px;}
.need{font-weight:bold;font-size:11px;text-align: left;padding-left: 10px;}
.feature{font-size:11px;text-align: left;padding-left: 10px;}
.benefits{font-size:11px;text-align: left;padding-left: 10px;}
.row-mid{background: url("http://www.mpulsesoftware.com/sites/all/themes/zen/image/middle_eq.jpg")repeat-y;width:640px;border-bottom:1px solid #ccc;}

.row-last{background: url("http://www.mpulsesoftware.com/sites/all/themes/zen/image/bottom_eq.jpg")repeat-y;width:640px;}

/* Webtk hack*/

@media screen and (-webkit-min-device-pixel-ratio:0) {

.tableBenefits td, .tableBenefits th {
  display: inline-table;

}

.headneed, .need{
  width: 207px;

}
.headfeature, .feature{
  width: 166px;

 }

.headbenefits, .benefits{
  width: 260px;

 }

}

/* End benefits table */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:46:36.537

摆脱这个`display: inline-table;`

# windows - 等待任务抛出

> ID：12848180
> 
> 赞同：1
> 
> 时间：2012-10-11T20:41:54.653
> 
> 标签：windows, windows-8, windows-runtime

我刚刚开始使用 WinRT 的并发模型。我有一项需要等待的任务，但调用 wait() 会引发我无法捕获的异常。

最简单的代码：

```
concurrency::task<StorageFile^> getFileTask = concurrency::create_task(Windows::Storage::ApplicationData::Current->LocalFolder->GetFileAsync(fileString));
getFileTask.wait(); 
```

它抛出的异常是：

```
Microsoft C++ exception: Concurrency::invalid_operation at memory location 0x0402C45C 
```

我该如何设置它才能正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T23:35:27.010

构建 Windows 应用商店应用程序时必须遵循的最重要规则之一是永远不能阻塞 UI 线程。永远不能。

如果你启动一个异步操作，你会得到一个`future`或`task`那个“拥有”那个操作。如果在异步操作完成之前调用该操作，则该调用将`get()`阻塞*，*直到操作完成，然后它将返回结果。`wait()`

 *由于阻塞 UI 线程是不好的，如果你尝试在 UI 线程上与尚未完成的异步操作同步，调用`get()`or`wait()`将抛出，以防止 UI 线程被阻塞。此异常可帮助您记住不要阻塞 UI 线程。:-)

您应该使用`task`'s[`then()`](http://msdn.microsoft.com/en-us/library/hh750044.aspx)来提供将在异步操作完成时运行的延续。如果延续也需要在 UI 线程上运行，请务必传递`task_continuation_context::use_current()`to`then()`以确保将延续编组回 UI 线程执行。

* * *

*注意：* 仅当您使用 C++/CX 时才会引发此异常。如果您在没有 C++/CX 语言扩展的情况下使用 C++，则对`get()`or的调用`wait()`将成功阻塞，从而可能导致糟糕的用户体验。一般来说，C++/CX 有更多像这样的“护栏”特性，旨在让你更容易编写好的代码。使用 C++/CX 时，您将获得 C++ 的全部功能，并了解出错的机会更多。*

# jquery-ui - 带有jquery ui范围滑块的d3简单线性图表

> ID：12848181
> 
> 赞同：8
> 
> 时间：2012-10-11T20:41:55.430
> 
> 标签：jquery-ui, charts, d3.js

如何将简单的 d3.js 图表（例如[http://bl.ocks.org/2579599](http://bl.ocks.org/2579599)）与 jQuery.ui 范围滑块结合起来？使用此滑块，我将控制 x 轴比例（数据系列的乞求和结束）。我希望我的图表将包含大型数据集，理想情况下应该在不重绘整个图表的情况下完成。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T08:43:54.807

如果不介意重绘点，那么可以通过在jQuery范围滑块的回调方法中改变x的域来实现用比例控制x轴的起点和终点。

为了使它漂亮，您可以使用过渡并添加一个剪切矩形来做到这一点。范围滑块回调看起来像这样：

```
<div id="slider">
  <script>
    $(function() {
      $( "#slider" ).slider({
        range: true,
        min: 0,
        max: data.length-1,
        values: [0,6],
        slide: function( event, ui ) {
          var maxv = d3.min([ui.values[1], data.length]);
          var minv = d3.max([ui.values[0], 0]);;

          //this is the main bit where the domain of x is readjusted
          x.domain([minv, maxv-1]);

          //apply the change in x to the x-axis using a transition
          graph.transition().duration(750)
            .select(".x.axis").call(xAxis);

          //apply the change in x to the path (this would be your svg:path)
          graph.transition().duration(750)
            .select(".path").attr("d", line(data));
      }});
    });
  </script>
</div> 
```

我将它与剪辑一起添加以获得[bl.ocks.org/3878029](http://bl.ocks.org/3878029)。这是你想象的x轴缩放吗？它确实重绘了路径和 x 轴，但我不确定如何避免重绘，看看你希望它如何改变。

# python - 将二进制数据传递给 os.system 调用

> ID：12848182
> 
> 赞同：1
> 
> 时间：2012-10-11T20:41:55.340
> 
> 标签：python, os.system

我需要在 python 脚本中调用一个可执行文件，并将二进制数据（在同一脚本中生成）传递给这个可执行文件。

我让它像这样工作：

```
bin = make_config(data)
open('binaryInfo.bin', 'wb+').write(bin)

os.system("something.exe " + "binaryInfo.bin") 
```

我想我可以通过将“bin”直接传递给 os.system 调用来完全避免创建 binaryInfo.bin 文件：

```
bin = make_config(data)

os.system("something.exe " + bin) 
```

但在这种情况下，我收到一个错误：“无法将 'bytes' 对象隐式转换为 str”

有谁知道这里的正确语法？这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T20:46:54.630

> 有谁知道这里的正确语法？这甚至可能吗？

不像你在做。您不能在 UNIX 命令行上传递任意二进制数据，因为每个参数本质上都被视为以空值结尾，并且最大总长度限制通常为 64KB 或更小。

对于*某些*识别此约定的应用程序，您可以使用以下方式在标准输入上传输数据：

```
pipe = os.popen("something.exe -", "w")
pipe.write(bin)
pipe.close() 
```

但是，如果应用程序无法识别标准输入的“-”，您可能不得不像已经在使用的那样使用临时文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T20:46:49.980

```
os.system(b"something.exe " + bin) 
```

应该这样做.. 但是，我不确定您是否应该通过命令行发送二进制数据。字符数可能有某种限制。另外，这个 something.exe 是否真的通过命令行接受二进制数据？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T20:46:54.183

如何在另一端发送和解码之前对其进行 base64encoding... afaik 命令行参数必须是 ascii 范围值（尽管这可能不是真的...但我认为它是..）...

另一种选择是按照您当前的方式进行操作并传递文件...

或者也许看到这个[Passing binary data as arguments in bash](https://stackoverflow.com/questions/9487037/passing-binary-data-as-arguments-in-bash)

# mysql - 使用 COUNT() 查找另一个表中存在多少行

> ID：12848192
> 
> 赞同：1
> 
> 时间：2012-10-11T20:42:46.360
> 
> 标签：mysql, sql, database

到目前为止，这是一个让我想知道关于数据库中照片的所有信息的查询：

```
SELECT
      users.facebook_id,
      users.first_name,
      users.last_name,
      photos.*,
      bookmarks.photo_id AS bookmark
FROM
      photos
JOIN users
      ON photos.author = users.facebook_id
LEFT JOIN bookmarks
    ON photos.id = bookmarks.photo_id
    AND bookmarks.facebook_id = 123456789
WHERE photos.description <> ''
ORDER BY photos.id DESC 
```

但是现在，我想再获得一条信息。我想知道一张特定照片获得了多少票。

这是我的投票表：

```
CREATE TABLE IF NOT EXISTS `votes` (
  `photo_id` int(11) NOT NULL,
  `facebook_id` bigint(20) NOT NULL COMMENT 'The user''s Facebook ID.',
  `date` varchar(10) NOT NULL COMMENT 'Date formatted as YYYY-MM-DD.',
  UNIQUE KEY `one_vote_per_day` (`photo_id`,`facebook_id`,`date`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

这是我已经尝试过的：

```
SELECT
      count(votes.photo_id) as vote_count,
      users.facebook_id,
      users.first_name,
      users.last_name,
      photos.*,
      bookmarks.photo_id AS bookmark
FROM
      photos
JOIN users
      ON photos.author = users.facebook_id
LEFT JOIN votes
    ON votes.id = photos.photo_id
LEFT JOIN bookmarks
    ON photos.id = bookmarks.photo_id
    AND bookmarks.facebook_id = 123456789
WHERE photos.description <> ''
ORDER BY photos.id DESC 
```

显然我做错了什么，因为当我尝试这个时，我在结果中永远不会得到超过一张照片。

当我只需要一张照片的信息时，这种方法对我来说很好，但是这个查询需要同时适用于所有照片......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T20:47:31.277

你需要`group by`

```
SELECT
      count(votes.photo_id) as vote_count,
      users.facebook_id,
      users.first_name,
      users.last_name,
      --photos.*, you have to add all fileds you need, and add them to group by
      bookmarks.photo_id AS bookmark
FROM
      photos
JOIN users
      ON photos.author = users.facebook_id
LEFT JOIN votes
    ON votes.id = photos.photo_id
LEFT JOIN bookmarks
    ON photos.id = bookmarks.photo_id
    AND bookmarks.facebook_id = 123456789
WHERE photos.description <> ''
group by users.facebook_id,
         users.first_name,
         users.last_name,
         bookmarks.photo_id
ORDER BY photos.id DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T20:46:37.860

不确定 MySQL 是否支持嵌套查询`SELECT`，但请尝试以下操作：

```
SELECT
      users.facebook_id,
      users.first_name,
      users.last_name,
      photos.*,
      bookmarks.photo_id AS bookmark,
      (select count(*) from votes where votes.photo_id = photo.id) AS number_of_votes
FROM
      photos
JOIN users
      ON photos.author = users.facebook_id
LEFT JOIN bookmarks
    ON photos.id = bookmarks.photo_id
    AND bookmarks.facebook_id = 123456789
WHERE photos.description <> ''
ORDER BY photos.id DESC 
```

# regex - 写一个好的高亮函数

> ID：12848195
> 
> 赞同：0
> 
> 时间：2012-10-11T20:42:55.283
> 
> 标签：regex, qt

我正在尝试实现“突出显示”功能以增强我正在处理的项目中的搜索能力。它应该突出显示（应用 css 背景色跨度标签）在较大的 QString 中所有出现的搜索词。现在，要突出显示的匹配项由以下 Regexp 确定：

```
QRegExp reg("(\\b)(" + term + ")(\\b)|(.,:;'\"\')"); 
```

正则表达式不区分大小写，将匹配“term”的所有实例，后跟单词边界或标点符号。

现在，高亮代码是一个简单的 QString::replace API 调用：

```
entry=entry.replace(reg,"<span style=\"background-color: " + color + "\">" + term  + "</span>"); 
```

这可行，但仍然有问题；最重要的问题是它忽略了大小写；如果匹配是“Apple”，则突出显示的术语将显示“apple”。如果匹配是句子中的第一个单词，这将是一个问题。

为了修复这个错误，我正在考虑将长 QString 分解为 QStringList 数组并搜索正则表达式一次匹配一个插槽。有没有更好/更快的方法来处理这项工作，还是我应该这样做？

# javascript - 使用 Javascript 或 JQuery 清除 Html.TextBoxFor 的文本

> ID：12848200
> 
> 赞同：0
> 
> 时间：2012-10-11T20:43:16.177
> 
> 标签：javascript, jquery, asp.net-mvc-3, razor

我似乎无法弄清楚如何从剃刀文本框中清除文本。

我试过这个：

```
@Html.TextBoxFor(m => m.Field)

    $(document).ready(function () {
        $(".link").click(function () {                
            $("#Field").value = "";
            return false;
        });    
    }); 
```

没用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T20:44:52.477

使用 jQuery 设置值的正确方法是使用`val`并传递一个值。所以要清除它，使用这个：

```
$("#Field").val("") 
```

查看 jQuery API `val`：

[http://api.jquery.com/val/](http://api.jquery.com/val/)

如果你想使用基本的 Javascript，你可以使用`.value = ""`，但是由于你是用 jQuery 选择一个元素，你必须使用 jQuery 方法，比如`val`.

不过，您有几个选择。这对于基本的 Javascript 来说同样非常简单：

```
document.getElementById("Field").value = ""; 
```

如果您仍然想使用 jQuery 但使用`value`，则需要获取 DOM 元素，例如：

```
$("#Field")[0].value = "";
// or
$("#Field").get(0).value = ""; 
```

如果您使用的是 jQuery，那么您不妨坚持使用`val()`. 这样做的好处是，如果找不到元素，调用`.val("")`不会轰炸程序。如果您使用我提到的任何其他方法，如果该元素不存在，它们将爆炸。所以这取决于你真正想要什么。在使用or之前，您始终可以检查是否`$("#Field").length`大于 0 ，但这有点矫枉过正。`get(0)``[0]`

另一个可能的问题是`id`元素的 可能不是“字段”。我忘记了 MVC 为生成实际的 HTML 所做的工作，但您可以使用 Firebug 或 Developer Tools 之类的工具来调查并查看`id`实际情况。然后，您可能必须将其替换为“字段”。

# c# - XML 编写器和内存流 c#

> ID：12848201
> 
> 赞同：10
> 
> 时间：2012-10-11T20:43:19.653
> 
> 标签：c#, memorystream, xmlwriter

我正在使用 XmlWriter 创建一个文件，`XmlWriter writer = XmlWriter.Create(fileName);`它正在创建一个文件，然后我还有一个正在调用的函数， `private void EncryptFile(string inputFile, string outputFile)`它需要 2 个字符串输入和输出文件，最后我有两个文件，一个是加密的，一个不是。我只想要一个加密文件，但是对于我的加密功能，它需要由 XmlWriter 创建的输入文件。有什么方法可以创建内存流并将其传递到我的函数中，而不是创建输入文件。我的加密功能

```
private void EncryptFile (string inputFile, string outputFile)
            string password = @"fdds"; // Your Key Here
            UnicodeEncoding UE = new UnicodeEncoding();

            byte[] key = UE.GetBytes(password);
            string cryptFile = outputFile;
            FileStream fsCrypt = new FileStream(cryptFile, FileMode.Create);

            RijndaelManaged RMCrypto = new RijndaelManaged();

            CryptoStream cs = new CryptoStream(fsCrypt,RMCrypto.CreateEncryptor(key,key),CryptoStreamMode.Write);

            FileStream fsIn = new FileStream(inputFile, FileMode.Open);

            int data;
            while ((data = fsIn.ReadByte()) != -1)
                cs.WriteByte((byte)data);
            cs.FlushFinalBlock();
            fsIn.Close();
            cs.Close();
            fsCrypt.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-11T20:50:33.797

您可以创建一个`XmlWriter`写入内存流的：

```
var stream = new MemoryStream();
var writer = XmlWriter.Create(stream); 
```

现在您可以将此流传递给您的`EncryptFile`函数，而不是一个`inputFile`. 在阅读流之前，您必须确保不要忘记这两件事：

1.  `writer.Flush()`写完后打个电话。
2.  在开始阅读流之前设置`stream.Position`回。`0`

# charts - 向谷歌散点图添加标签

> ID：12848203
> 
> 赞同：7
> 
> 时间：2012-10-11T20:43:21.437
> 
> 标签：charts, google-visualization, scatter-plot

我正在使用谷歌图表 API 来绘制散点图，有没有办法在散点图中标记每个节点。我猜它只使用数值.....我可以使用的任何其他工具。例子：

```
Name  Age  Response 
Allen 12    40
Tom   16    45
Sim   17    60 
```

X 和 y 轴将分别是年龄和响应，但图上的每个节点都可以标记为 Allen、Tom、Sim

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T21:36:22.933

您可以通过添加工具提示来标记 Google ScatterChart 中的点。将鼠标悬停在数据点上时会显示工具提示。

数据表的代码应如下所示：

```
var dt = new google.visualization.DataTable(
{
    cols: [{id: 'A', label: 'Age', type: 'number'},
           {id: 'B', label: 'Response', type: 'number'},
           {id: 'C', label: 'Name', type:'tooltip', p:{role:'tooltip'}}
          ],
    rows: [{c:[{v: 12}, {v: 40}, {v:'Allen'}]},
           {c:[{v: 16}, {v: 45}, {v:'Tom'}]},
           {c:[{v: 17}, {v: 60}, {v:'Sim'}]}
          ]
 },
 0.6
) 
```

当您将鼠标悬停在这些点上时，名称将显示出来。

工具提示链接： [https ://developers.google.com/chart/interactive/docs/roles#tooltiprole](https://developers.google.com/chart/interactive/docs/roles#tooltiprole)

链接到 DataTable 类（用于格式化数据）： [https ://developers.google.com/chart/interactive/docs/reference#DataTable](https://developers.google.com/chart/interactive/docs/reference#DataTable)

注意：如果您尝试绘制多个数据系列，则必须为每个系列指定一个工具提示。例如，如果您为平均响应添加单独的数据系列，代码将更改为：

```
var dt = new google.visualization.DataTable(
{
    cols: [{id: 'A', label: 'Age', type: 'number'},
           {id: 'B', label: 'Response', type: 'number'},
           {id: 'C', label: 'Name', type:'tooltip', p:{role:'tooltip'}},
           {id: 'D', label: 'AvgResp', type: 'number'},
           {id: 'E', label: 'Category', type:'tooltip', p:{role:'tooltip'}}
          ],
    rows: [{c:[{v: 12}, {v: 40}, {v:'Allen'}, {v:null}, {v:null}]},
           {c:[{v: 16}, {v: 45}, {v:'Tom'}, {v:null}, {v:null}]},
           {c:[{v: 17}, {v: 60}, {v:'Sim'}, {v:null}, {v:null}]},
           {c:[{v: 12}, {v: null}, {v:null}, {v: 35}, {v:'Avg. 12yo'}]},
           {c:[{v: 16}, {v: null}, {v:null}, {v: 48}, {v:'Avg. 16yo'}]},
           {c:[{v: 17}, {v: null}, {v:null}, {v: 52}, {v:'Avg. 17yo'}]}
          ]
 },
 0.6
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-09T09:59:18.540

我在为图表本身的点绘制标签时遇到了同样的问题。谷歌图表现在已经解决了这个问题。您可以再添加一个属性为`annotation`. 您可以通过它添加标签。

看看它的样子。通常我会在数字上做注释，然后解释这些数字是关于什么的。

[![在此处输入图像描述](../Images/4a1d06767038b6104035753031336b54.png)](https://i.stack.imgur.com/wRFuD.png)

```
var data = google.visualization.arrayToDataTable([
      ['Age', 'Weight', {role: 'annotation'}],
      [ 8,      12, 'Point 1'],
      [ 1,      5.5, 'Point 2'],
      [ 11,     14, 'Point 3'],
      [ 4,      5, 'Point 4'],
      [ 3,      3.5, 'Point 5'],
      [ 6.5,    7, 'Point 6']
    ]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T14:11:07.877

要使用可视化 API 执行此操作，只需使用 cell_object (https://google-developers.appspot.com/chart/interactive/docs/reference#cell_object)。google API 游乐场对我很有用，可能对你有用：[https ://code.google.com/apis/ajax/playground](https://code.google.com/apis/ajax/playground)

这是一些代码的示例：

```
var data = google.visualization.arrayToDataTable([
      ['Age','Response'],
      [ {v:12, f: 'Allen'}, 40],
      [ {v:16, f: 'Tom'}, 45],
      [ {v:17, f: 'Sim'}, 60]
    ]); 
```

希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T20:48:24.097

[https://developers.google.com/chart/image/docs/gallery/scatter_charts#chart_types](https://developers.google.com/chart/image/docs/gallery/scatter_charts#chart_types)

此页面记录了为图着色和添加图例。

使用谷歌图表你不能，除非使用图例和交叉引用。我不知道有任何散点图创建者会标记各个图。

# sqlalchemy - SQLAlchemy：通过多个值过滤单个关系属性

> ID：12848204
> 
> 赞同：1
> 
> 时间：2012-10-11T20:43:23.770
> 
> 标签：sqlalchemy

假设我有这两个对象，具有一对多的关系：

```
class A(Base):
    ...
    collection = relationship("B")

class B(Base):
    ...
    a_id = Column(Integer, ForeignKey('table_for_a.id'), nullable=False)
    key = Column(String(50), nullable=False) 
```

如何在 A.collection 中同时查询具有 B("apple")、B("orange") 和 B("banana") 的 A？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T23:51:59.283

经过一段时间的挖掘，我发现我可以得到想要的结果，如下所示：

```
from sqlalchemy import and_

...
session.query(A).filter(
    and_(
        A.collection.any(key="apple"),
        A.collection.any(key="orange"),
        A.collection.any(key="banana")
    )
).all() 
```

# c# - 在 Windows Phone 应用程序中使用单选按钮

> ID：12848211
> 
> 赞同：0
> 
> 时间：2012-10-11T20:44:02.047
> 
> 标签：c#, windows-phone-7, radio-button

我正在使用枢轴控制页面使用大约 14 个单选按钮，每组单选按钮中有两个选项我必须选择一个作为正确的选项，然后在后面有一些特定的整数分配给每个单选按钮最后要使用，请在这方面提供帮助。以下方法对我不起作用：

```
if (radioButton3.IsChecked == true)
{
    b = 2;
}
else
{
   b = 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T02:19:05.493

你的 var ba 是局部变量吗？

如果你想保留这些值，你最好确保它的变量范围。

# php - 如何在保留键的同时合并两个关联数组？

> ID：12848215
> 
> 赞同：2
> 
> 时间：2012-10-11T20:44:18.763
> 
> 标签：php, arrays

假设我有两个数组：

```
$arr =  array('k1' => 'v1', 
              'k2' => 'v2');
$arr2 = array('k3' => 'v3', 
              'k4' => 'v4'); 
```

我想合并`$arr2`到`$arr`，所以我最终得到：

```
$arr =  array('k1' => 'v1', 
              'k2' => 'v2',
              'k3' => 'v3', 
              'k4' => 'v4'); 
```

有一个基本要求：解决方案**必须**改变`$arr`自己，就像引用数组 ( `array_push()`, `array_splice()`) 的函数一样。

*   我不想使用`$arr = array_merge($arr, $arr2)`，因为它会创建一个副本。
*   我不想遍历 $arr2 ：

    ```
    // this is not an option
    foreach ($arr2 as $k => $v)
    {
        $arr[$k] = $v;
    } 
    ```

如何在保留键的同时合并两个关联数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T20:50:58.970

你可以试试这个：

```
$arr += $arr2; 
```

我测试了内存使用情况：

```
for ($i=0; $i<1000000; $i++) $a[]=1;
echo memory_get_peak_usage(), "\n";
for ($i=0; $i<1000000; $i++) $b[]=1;
echo memory_get_peak_usage(), "\n";
$a += $b;
echo memory_get_peak_usage(), "\n"; 
```

这输出：

```
209135144
417540744
417540872 
```

因此，虽然一个具有 1 M 元素的数组使用了大约 200 MB，并且总峰值约为 400 MB，但 PHP 显然没有创建副本，否则峰值内存将在 600 MB 左右（`$a`和`$b`）`$a + $b`。

# android - 从针对非 nexus 设备的源构建 android 4.1 (galaxy s3)

> ID：12848218
> 
> 赞同：1
> 
> 时间：2012-10-11T20:44:39.717
> 
> 标签：android, android-source, galaxy

我对为 Galaxy S3 构建 Android for Source 很感兴趣（但通常只知道如何去做会很有帮助）

一般来说，我知道如何为所有 nexus 设备执行此操作，但我想知道如何为其他一些手机执行此操作。我知道这是可能的，因为 CyanogenMod 和其他模组制作者会这样做。通常，当他们宣布它们时，它们会包含内核的源代码。你如何把这些碎片放在一起？将 android 源代码和自定义内核放在一起可以刷写的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T02:25:40.990

一般来说，这不是微不足道的。您需要一些二进制文件来支持硬件（相机、WiFi、NFC 等），并且您需要弄清楚它们是哪些以及如何从设备中提取它们。内核是 GPL 许可的，因此制造商会在某个时候发布他们的版本/补丁，但您可能需要等待。然后，您必须创建设备构建文件以将所有这些文件放在特定设备的映像中。最好的办法是获取 CyanogenMod 源代码，看看它是如何在实践中完成的。

# ajax - 如何在具有索引布局的视图（MVC）的索引页面上直接调用部分视图（基于ajax）

> ID：12848219
> 
> 赞同：1
> 
> 时间：2012-10-11T20:44:39.750
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-partialview

让我更具体一点..我想做的是，当我单击子菜单时，例如说 XYZ 是主菜单 ABC 的子菜单 ..当我单击 XYZ 时，它通过主页上的 ajax 加载，即 ABC .. ajax 部分已完成，我不知道如何通过菜单调用它......我将把我的代码粘贴到更清晰的 b 中......

```
<li>@Html.ActionLink("About Us", "Index", "AboutUs")
    <ul>
        <li>@Html.ActionLink("Vision & Misson", "Index", "AboutUs")</li>
        <li>@Html.ActionLink("Our Ethics", "Index", "AboutUs")</li>
    </ul>
</li> 
```

这是一个关于我们的页面，通常当点击关于我们时它会被定向到它的索引页面..当您将鼠标悬停在关于我们上时，一个下拉菜单会打开显示更多选项：愿景和使命我们的道德...... .目前他们都被引导到索引我想要的是当我点击愿景和使命时，它应该直接在关于我们的索引页面上打开愿景和使命的部分视图......同样当“我们的道德”页面是点击它应该直接调用部分视图“我们的道德”并将其显示在关于我们的索引页面上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:01:13.460

将您的 @Html.ActionLink 更改为 @Ajax.ActionLink

```
<li>@Html.ActionLink("About Us", "Index", "AboutUs")
    <ul>
        <li>@Ajax.ActionLink("Vision & Misson", "VisionAndEthics", new AjaxOptions {
                InsertionMode = InsertionMode.Replace, UpdateTargetId = "divTarget"
            })</li>
        <li>@Ajax.ActionLink("Our Ethics", "OurEthics", new AjaxOptions {
                InsertionMode = InsertionMode.Replace, UpdateTargetId = "divTarget"
            })</li>
    </ul>
</li> 
```

插入模式属性设置为替换，UpdateTargetId 属性是要放入结果的 HTML 容器的 id。

然后在你的控制器中

```
public PartialViewResult VisionAndEthics() {
    return PartialView("VisionAndMission");
}

public PartialViewResult OurEthics() {
    return PartialView("OurEthics");
} 
```

这样，您还可以通过扩展此解决方案来处理关闭 javascript 的客户端。

# c# - 从自动生成的表单中删除插件

> ID：12848220
> 
> 赞同：0
> 
> 时间：2012-10-11T20:44:42.733
> 
> 标签：c#, winforms, visual-studio-2010, user-interface, devexpress

我有一个使用 DevExpress 按钮和标签创建的 WinForm 项目。事实证明，并非所有开发人员都拥有 DevExpress 的许可证，因此我需要将所有对它的引用更改为标准的 WinForm 按钮和标签。问题是这是一个复杂的表单，在众多 (DevExpress) 选项卡上有超过 50 个元素。

很容易进入并将 DevExpress 更改为正确的 Windows 按钮、标签和选项卡，除了编辑自动生成的代码只会给 VS 一些东西来改变它想要的东西。但是，听起来好像可以从[此处](https://stackoverflow.com/questions/3786512/changing-autogenerated-code-in-a-c-sharp-windows-forms-application-project)的答案之一更改 Form.Designer.cs 。

我的问题是，我可以对 Form.Designer.cs 进行永久性更改，还是会在某个时候被 VS 覆盖。如果它们将被覆盖，是否有一种简单的方法来交换按钮和标签，如果我希望一切都保持不变，除了使用 WinForm 按钮而不是 DevExpress 按钮。替换它们可能会起作用，但我需要担心选项卡控件。

我最好的选择是创建一个新的 WinForm、复制我编写的代码并重新创建设计吗？

感谢您的任何建议。

# mysql - 优化（索引）具有 GROUP BY 语法的查询

> ID：12848224
> 
> 赞同：2
> 
> 时间：2012-10-11T20:44:55.160
> 
> 标签：mysql

```
SELECT MIN(id) 
FROM mytable 
WHERE lastname IN('Smit','Lee') 
GROUP BY name 
```

在这里，为了优化这个查询，索引需要（将很有用）列**lastname**对吗？和列**名**也需要索引？还是只有索引姓氏就足够了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T20:48:41.777

lastname 上的索引通常对该查询很有用。索引名称不应该有效果。

您可以（并且应该）使用 EXPLAIN 来查看 MySQL 将如何执行您的查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T20:48:56.773

在编程中生活的一个好规则是永远不要假设你知道什么是慢或快。总是测试它。

签出这个链接[MySQL profiling](http://dev.mysql.com/doc/refman/5.0/en/show-profiles.html)。在您认为可以工作的地方添加索引，然后运行一些测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T20:49:21.813

两个建议的索引都应该对您的情况有所帮助，但这在很大程度上取决于您拥有的数据以及数据库引擎考虑某些操作的成本有多高，这取决于您是否有重复的 id，我怀疑您没有，那就是为什么它被称为 id，但如果你在`lastname, id`or上做一个 2 列索引`name, id`也会有帮助。最终，查询优化器将决定用于获取数据的策略，这肯定会影响很多事情......我建议您尝试以下方法，看看哪个更快

*   指数上`lastname`- 可能
*   索引上`name`- 不太可能
*   索引`lastname, name`- 最有可能
*   索引`name, lastname`- 最不可能

同样，它确实取决于数据，但我按照我认为它们应该对具有唯一 id 的大量数据最有帮助的顺序进行了标记，如果您的 id 不是唯一的，请尝试与 id 上的索引组合。

# c# - OpenXML、SAX 和简单地读取 Xlsx 文件

> ID：12848230
> 
> 赞同：2
> 
> 时间：2012-10-11T20:45:45.237
> 
> 标签：c#, datatable, openxml, xlsx

我一直在努力寻找如何使用 OpenXml 读取大型 xlsx 文件的解决方案。我没有运气就尝试过微软样本。我只需要将 excel 文件读入 c# 中的 DataTable。我不关心数据表中的值类型，一切都可以存储为字符串值。

到目前为止我发现的样本不保留电子表格的结构，只返回单元格的值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:16:19.443

开放的 xml SDK 可能有点难以理解。但是，我发现使用[http://simpleooxml.codeplex.com/](http://simpleooxml.codeplex.com/)这个代码 plex 项目很有用。它在 sdk 上添加了一个薄层，以便更轻松地解析 excel 文件并使用样式。

然后你可以在他们的工作表阅读器中使用类似下面的东西来递归并获取你想要的值

```
System.IO.MemoryStream ms = Utility.StreamToMemory(xslxTemplate);
using (SpreadsheetDocument document = SpreadsheetDocument.Open(ms, true))
{
    IEnumerable<Sheet> sheets = document.WorkbookPart.Workbook.GetFirstChild<Sheets>().Elements<Sheet>();
    if (sheets.Count() == 0)
    {
        // The specified worksheet does not exist.
        return null;
    }
    string relationshipId = sheets.First().Id.Value;
    WorksheetPart worksheetPart = (WorksheetPart)document.WorkbookPart.GetPartById(relationshipId);
    string myval =WorksheetReader.GetCell("A", 0, worksheetPart).CellValue.InnerText;
    // Put in a loop to go through contents of document
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T17:26:22.220

您可以通过这种方式获取 DataTable：

```
using (SpreadsheetDocument spreadsheet = SpreadsheetDocument.Open(fileName, false))
{
    DataTable data = ToDataTable(spreadsheet, "Employees");
} 
```

此方法将 Excel 工作表数据读取为 DataTable

```
public DataTable ToDataTable(SpreadsheetDocument spreadsheet, string worksheetName)
{
    var workbookPart = spreadsheet.WorkbookPart;

    var sheet = workbookPart
        .Workbook
        .Descendants<Sheet>()
        .FirstOrDefault(s => s.Name == worksheetName);

    var worksheetPart = sheet == null
        ? null
        : workbookPart.GetPartById(sheet.Id) as WorksheetPart;

    var dataTable = new DataTable();

    if (worksheetPart != null)
    {
        var sheetData = worksheetPart.Worksheet.GetFirstChild<SheetData>();

        foreach (Row row in sheetData.Descendants<Row>())
        {
            var values = row
                .Descendants<Cell>()
                .Select(cell =>
                {
                    var value = cell.CellValue.InnerXml;
                    if (cell.DataType != null && cell.DataType.Value == CellValues.SharedString)
                    {
                        value = workbookPart
                            .SharedStringTablePart
                            .SharedStringTable
                            .ChildElements[int.Parse(value)]
                            .InnerText;
                    }
                    return (object)value;
                })
                .ToArray();

            dataTable.Rows.Add(values);
        }
    }

    return dataTable;
} 
```

# jquery - 自定义拖动和调整大小脚本不流畅的问题

> ID：12848237
> 
> 赞同：1
> 
> 时间：2012-10-11T20:46:23.217
> 
> 标签：jquery, resize, mouseevent, mousemove, mouseup

我正在尝试构建一个简单的图像“click-n-drag”调整大小脚本。我不想使用 jquery UI，因为它添加了很多额外的 div，这些 div 会使文本混乱，并且需要额外的步骤来删除这些额外的 div。

该脚本有效，但是正如您在小提琴中注意到的那样，它非常跳动。

我一直在试图弄清楚如何获得它，以便它仅在鼠标“向下”（单击）时才在鼠标移动时调整大小，并且在鼠标向上时，停止调整大小并将变量重置回其原始起始位置。

提前致谢。对不起，这里的格式草率，小提琴更干净。

从这里获得原始代码：[originalsource](http://oneblackbear.com/resizer/index.html) 我粘贴了原始代码，以便您可以清楚地看到它

这是 jsfiddle：[jsfiddle](http://jsfiddle.net/a3vYu/)

```
jQuery.fn.extend({
    resize: function(params){
    var jQ = jQuery;
    return this.each(function(){
        var clicked = false; //set to off
        var start_x; //starting point of mouse
        var start_y; 
        if(params && params['target']){ var resize = params['target'];} //if target passed then use that
        else{ var resize = this; }
        if(params && typeof(params['y']) != "undefined"){ var y = params['y'];} //if y passed then fix the max height
        else{ var y = 1;}
        if(params && typeof(params['x']) != "undefined"){ var x = params['x'];} //if x then fix width
        else{ var x = 1;}
        if(params && typeof(params['min_width']) != "undefined"){ var min_w = params['min_width'];}
        else{ var min_w = 1;}
        if(params && typeof(params['min_height']) != "undefined"){ var min_h = params['min_height'];}
        else{ var min_h = 1;}

        $(this).hover(
                function(){$(this).css('cursor', 'move');},
                function(){$(this).css('cursor','default');clicked=false;}
                );          
        $(this).mousedown(function(e){
            clicked = true;
            start_x = Math.round(e.pageX - $(this).eq(0).offset().left);
            start_y = Math.round(e.pageY - $(this).eq(0).offset().top);
        });
        $(this).mouseup(function(e){clicked = false;});
        $(this).mousemove(function(e){
            if(clicked){
                var mouse_x = Math.round(e.pageX - $(this).eq(0).offset().left) - start_x;
                var mouse_y = Math.round(e.pageY - $(this).eq(0).offset().top) - start_y;
                var div_w = $(resize).width();
                var div_h = $(resize).height();
                var new_w = parseInt(div_w)+mouse_x;
                var new_h = parseInt(div_h)+mouse_y;    
                if(x==1 || (typeof(x) == "number" && new_w < x && new_w > min_w) ){ $(resize).css('width', new_w+"px"); }
                if(y==1 || (typeof(y) == "number" && new_h < y && new_h > min_h) ){ $(resize).css('height',new_h+"px"); }
                start_x = Math.round(e.pageX - $(this).eq(0).offset().left);
                start_y = Math.round(e.pageY - $(this).eq(0).offset().top);
            }
        });                 
});
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T07:03:10.040

我发现同时更改`clicked`var 的悬停和 mousedown/mouseup 事件会让你注意到它有点跳跃。

我将其更改为`dblclick()`用于选择图像，然后`click()`用于取消选择，使功能更直观。因此，我将您的行替换`$(this).hover (...`为：

```
...

$(this).dblclick(function(e){
    $(this).css('cursor', 'move');
    clicked = true;
    start_x = Math.round(e.pageX - $(this).eq(0).offset().left);
    start_y = Math.round(e.pageY - $(this).eq(0).offset().top);
});
$(this).click(function(){
    $(this).css('cursor','default');
    clicked=false;
}); 
```

问题是，当鼠标离开图像时， $(this).mousemove(function(e){... 函数会停止，而是以窗口为目标，然后鼠标位置将更可预测：

```
$(window).mousemove(function(e){ ... 
```

为了让它在需要的地方引用图像，我为此添加了一个新变量，`image`.

我还用点符号为参数清理了代码。

在这里查看我的工作编辑：http: [//jsfiddle.net/a3vYu/15/](http://jsfiddle.net/a3vYu/15/)

# java - 如果单独的 JVM 意味着单独的 OS 进程

> ID：12848249
> 
> 赞同：0
> 
> 时间：2012-10-11T20:46:55.267
> 
> 标签：java, hadoop

单独的 JVM 中的每个 map 和 reduce 任务是否意味着 hadoop 上下文中的每个 mapper 和每个 reducer 都有单独的 OS 进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T20:49:26.803

是的。您可以配置任务以重用 JVM，但每个同时运行的任务都将位于单独的操作系统进程中。

# linux - 捕获过去的终端消息/会话文本

> ID：12848250
> 
> 赞同：0
> 
> 时间：2012-10-11T20:47:00.250
> 
> 标签：linux, terminal

是否可以从当前终端会话中捕获所有消息并将它们写入文件？

*   我不是指使用>>、脚本或tee 捕获命令输出或监视任何进一步的消息。
*   我的意思是从字面上将屏幕上已经存在的内容转储到文件中
*   我完全不是说通过鼠标选择任何东西并复制到剪贴板

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:52:31.000

`setterm`您可以使用's`-append`或`-dump`标志和 TTY #转储虚拟控制台的内容：

```
setterm -append 3 
```

会将 VCS TTY 3 中的内容附加到文件`screen.dump`中。

否则，您可能需要使用类似的东西`screen`，它允许您将回滚缓冲区中的内容转储到文件中。

# amazon-web-services - 亚马逊是否发布 RDS IP 范围？

> ID：12848252
> 
> 赞同：1
> 
> 时间：2012-10-11T20:47:02.827
> 
> 标签：amazon-web-services, amazon-rds

我找不到 Amazon 的任何 RDS IP 范围，只有 EC2 范围。在我的公司，我在防火墙和代理后面，我们不允许使用 DNS 规则。因此，虽然 RDS 有一个静态 DNS 端点，但它对我来说毫无用处。我只能通过 IP 范围连接。我只找到了 Amazon EC2 的公共范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-07T05:24:05.837

RDS 服务基本上将 EC2 资源用于 RDS 实例，因此如果/当 RDS 实例的 IP 地址发生更改时，使用正确区域的 EC2 网络 IP 范围应该允许您的通信通过防火墙。

您需要密切关注这篇文章，以查看它们是否是定期添加的任何新范围。您可以使用这样的东西输出到文件，然后比较结果以提醒您它们是否不同。Amazon EC2 公共 IP 范围 [https://forums.aws.amazon.com/ann.jspa?annID=1701](https://forums.aws.amazon.com/ann.jspa?annID=1701)

# math - 年*10000 + 月*100 + 日是单调的吗？

> ID：12848258
> 
> 赞同：0
> 
> 时间：2012-10-11T20:47:24.713
> 
> 标签：math, date, time

简单的问题：`year * 10000 + month * 100 + day`总是在增加？例如，今天是 20121011，明天是 20121012，后者高 1。总是这样吗？我以前听说过日期和时间发生了一些疯狂的事情，但我不是专家。

只是为了抢占一些响应 - 我知道这远非处理日期/时间的最佳方式。我不能使用适当的库来解决我正在处理的问题而不跳过一些严重的障碍，我更喜欢一个简单的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T20:51:42.673

是的，它必须。`0<day<100`并且`0<month<100`总是。前提是您使用全年，例如 2012 年而不是 12 年。

而且你不应该比较不同区域的时间，那你就可以了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T07:32:17.210

在现实世界中，时不时有人会向后调整系统时间。某人可以是另一个程序，特别是 NTP 守护程序。如果调整发生在午夜，您的日期值可能会达到 20121014，然后是 20121013。如果您正在制作永远不会崩溃或故障的软件，则需要为系统时间倒退的可能性做好准备。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T22:22:36.373

从某种意义上说，这是单调的，两个不同的日期将按时间顺序进行数字排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T20:53:56.070

不确定您的范围，但不要忘记时区。

我们如何认为改变时间的定义比我们对时间的解释更容易，这真是令人惊讶。:[

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T20:54:02.757

从逻辑上讲，这似乎可行，因为它总是会增加。所有 3 件（日、月、年）都是单调递增的，只要您使用完整的 4 位数年份，我看不出明显的问题。（我假设这些要么都在同一个时区，要么转换为某个标准时区）。

我不知道为什么你需要走这条路，但它应该可以工作。

# php - 有人可以帮我改变这个正则表达式吗？

> ID：12848267
> 
> 赞同：0
> 
> 时间：2012-10-11T20:47:42.957
> 
> 标签：php, regex, preg-replace, preg-match

我有这个正则表达式

```
/[^\w^\']+/i 
```

这是它的代码。

```
preg_replace('/[^\w^\']+/i', ' ', $text) 
```

我不擅长正则表达式。我唯一知道的是，如果我在 $text 变量中使用此字符串进行尝试。

**我试图在这里做一个方程，即 e=mc2**

它从字符串中删除“=”。我希望它做它正在做的所有事情，但不要从字符串中删除“=”。你能帮我改变这个正则表达式吗？

**更新** 我讨厌回答我自己的问题。但它可能会帮助别人。但我让这个正则表达式工作。这适用于所有其他测试用例。感谢 [http://rick.measham.id.au/paste/explain.pl](http://rick.measham.id.au/paste/explain.pl)

```
/[^\w,=^\']+/i 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:06:40.050

[http://refiddle.com/9w1](http://refiddle.com/9w1)

`/[^\w^\'^=]+/ig`

如果你想让它做同样的事情，除了不匹配`=`，那么添加`^=`到字符类？请注意，它`g`现在也有，因为您似乎希望它是全球性的。

# objective-c - 动态身体超越框架

> ID：12848269
> 
> 赞同：0
> 
> 时间：2012-10-11T20:47:51.123
> 
> 标签：objective-c, cocos2d-iphone, game-physics, box2d-iphone

我是 Cocos2d 和 Box2d 的新手，我有一些问题要问你。在开发或尝试玩游戏时，我将动态身体拖到边界（到我的 ipone 的框架），并且发生了一些事情，我的动态身体的一半超出了框架！我不知道为什么？请尽快帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:39:11.480

我解决了。我将以下代码写入 ccTouchesMoved 函数。

```
CGSize s = [[CCDirector sharedDirector] winSize];
            // Update if it is moved
            CGPoint location = [tj.touch locationInView:tj.touch.view];
            location = [[CCDirector sharedDirector] convertToGL:location];
            int deger=50;  // mydynamicbody width
            float xcordinate=location.x;
            float ycordinate=location.y;
            if (xcordinate>(s.width-deger)) 
            {
                xcordinate=s.width-deger;
            }
            if (ycordinate>(s.height-deger)) 
            {
                ycordinate=s.height-deger;
            }
            if (xcordinate<deger) 
            {
                xcordinate=deger;
            }
            if(ycordinate<deger)
            {
                ycordinate=deger;
            }
            //  NSLog(@"cordinates %f , %f %g %g",xcordinate,ycordinate,s.width,s.height);
            b2Vec2 worldLocation = b2Vec2(ptm(xcordinate),ptm(ycordinate) );
            //b2Vec2 worldLocation = b2Vec2(200, 200);
            tj.mouseJoint->SetTarget(worldLocation); 
```

# tsql - T-SQL - 返回与数据库中存储的几列不同的值

> ID：12848270
> 
> 赞同：1
> 
> 时间：2012-10-11T20:48:07.837
> 
> 标签：tsql

我有一个返回 16 列的查询。其中 12 个具有相似的数据（它们返回值 0、1 或 2）。我想用字母替换这些数字 - 用 L 替换 0，用 M 替换 1，用 H 替换 2。

我可以写 12 个案例陈述，但那将是矫枉过正，我绝对不想这样做。我宁愿在前端转换这些值。有没有办法使用返回适当值的函数（仅在查询本身内）？

请注意，我对数据库具有只读访问权限，并且已经有数千个这样的数据库，因此无法创建 udf。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:01:21.747

在你的前端，使用枚举怎么样？您可以让枚举元素 L=0、M=1、H=2。当您从数据库中提取（列）数据时，将其转换为枚举类型。当你显示它时，你可以通过执行 ToString 来获取枚举名称。
看看[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/a0h36syw.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:07:18.267

如果您只有读取权限，则无法创建函数，但可以创建公用表表达式并加入十二次...

```
WITH LookupTable (numval, returnletter) as (
    SELECT 0,'L' UNION SELECT 1,'M' UNION SELECT 2,'H')

select LKP1.returnletter as col1,
       LKP2.returnletter as col2
       ...
    from origtable OT
        inner join LookupTable LKP1 on ot.col1 = LKP1.numval
        inner join LookupTable LKP2 on ot.col2 = LKP2.numval
        .... 
```

# optimization - 有没有更有效的方法来渲染大量的单个网格？

> ID：12848271
> 
> 赞同：6
> 
> 时间：2012-10-11T20:48:10.353
> 
> 标签：optimization, render, webgl, three.js

## 概括

我目前正在 Three.js 中创建一个 3D 平铺的六角板。出于艺术和功能方面的原因，每个图块都是它们自己的网格，由基本（不变的）几何体组成，其材质中生成了一组贴图：置换、漫反射、法线。

当我添加更多纹理贴图时，我开始注意到 FPS 有所降低，这促使我查看源代码。我有一个 15x15 的游戏板，这意味着每帧渲染 225 个单独的网格。由于设计不佳，当时每个网格由 215 个面组成，导致场景中有 48,375 个面。

认为它可以解决性能问题，我重新设计了网格，只包含 30 个面，整个场景总共有 6,750 个面；惊人的进步。我很失望地发现减少 86% 的面孔对性能几乎没有影响。

因此，我决定找出导致性能下降的确切原因。我建立了一个抽象的测试环境，并使用了一个 3x10 的平面网格（给它们 30 个面，就像我自己的模型一样）。我尝试了不同的网格尺寸（网格数）和不同复杂度的应用材料。这是我发现的：

## 材料测试

```
// /---------------------------------------------------\
// |      Material       |  15x15  |  20x20  |  25x25  |
// |---------------------|---------|---------|---------|------\
// | Flat Lambert Color  |  60FPS  |  48FPS  |  30FPS  | -00% |
// | Lambert Diffuse     |  57FPS  |  41FPS  |  27FPS  | -10% |
// | Blank Shader        |  51FPS  |  37FPS  |  24FPS  | -20% |
// | Full Shader (-H)    |  49FPS  |  32FPS  |  21FPS  | -30% |
// | Full Shader (+H)    |  42FPS  |  28FPS  |  19FPS  | -37% |
// \----------------------------------------------------------/
//                       |   -00%  |   -33%  |   -55%  |
//                       \-----------------------------/ 
```

### 行：

*   `MeshLambertMaterial({color})`是我的基线
*   `MeshLambertMaterial({map})`遭受了大约 10% 的性能打击
*   `ShaderMaterial()`使用默认设置会遭受大约 20% 的性能损失
*   `ShaderMaterial()`使用漫反射贴图的性能损失大约为 30%
*   `ShaderMaterial()`使用 Diffuse+Normal+Displacement 贴图的性能下降了 37%

### 列：

*   15x15 (225 Meshes) 是我的基线
*   20x20 (400 Meshes) 性能下降 33%
*   25x25（625 个网格）的性能下降了 55%

### 概要

所以我了解到，我正在使用的着色器和我正在应用的贴图产生了重大影响。然而，来自“事物”数量的影响要大得多。我不确定这是面、网格还是其他，所以我又进行了一次测试。使用我的基线材料 ( `MeshLambertMaterial({ color: red })`)，我决定测试两个变量：边数和网格数。这是我发现的：

## 面/网格数测试

```
// 15x15 (225)  Meshes @ 30 Faces =   6,750 Faces   = 60 FPS
// 20x20 (400)  Meshes @ 30 Faces =  12,000 Faces   = 48 FPS
// 25x25 (625)  Meshes @ 30 Faces =  18,750 Faces   = 30 FPS
// 30x30 (900)  Meshes @ 30 Faces =  27,000 Faces   = 25 FPS
// 40x40 (1600) Meshes @ 30 Faces =  48,000 Faces   = 15 FPS
// 50x50 (2500) Meshes @ 30 Faces =  75,000 Faces   = 10 FPS

// 15x15 (225) Meshes @ 100 Faces =  22,500 Faces   = 60 FPS
// 15x15 (225) Meshes @ 400 Faces =  90,000 Faces   = 60 FPS
// 15x15 (225) Meshes @ 900 Faces = 202,500 Faces   = 60 FPS 
```

### 提要

这似乎非常明确地表明，所涉及的面部数量不会对帧速率产生太大影响，如果有的话。相反，被绘制到场景中的单个网格的数量几乎会产生所有的性能拖累。我不确定究竟是什么导致了这种滞后。我想每个网格都有大量的开销。也许有办法消除一些这种开销？

## 注意事项

我已经考虑过合并我的几何图形。这几乎完全消除了帧速率的下降。但是，正如我在本文开头所述，我需要每个图块都可以单独翻译、可旋转、可缩放和以其他方式进行修改。据我所知，这对于合并的几何图形是不可能的。

我还考虑过在调用更改图块的函数时默认使用合并的几何图形并重新创建几何图形/场景。但是，这种方法存在两个问题：

1.  板上有 200-400 个单独的网格并被合并，这可能需要 1000 毫秒以上的时间来处理并导致明显的视觉卡顿。
2.  大型效果，例如可能同时“摇晃”或“摆动”所有瓷砖的效果，将与现在的棋盘一样滞后，并且没有理由实施它们。

我希望找到一种解决方案来消除这种性能损失，而不是试图避免它。

## 问题

这让我想到了我的问题：是否有更有效的方法来渲染大量单个网格？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T00:55:15.133

> 我已经考虑过合并我的几何图形。这几乎完全消除了帧速率的下降。但是，正如我在本文开头所述，我需要每个图块都可以单独翻译、可旋转、可缩放和以其他方式进行修改。据我所知，这对于合并的几何图形是不可能的。

是的。添加一个顶点属性，该属性是一个整数，用于标识顶点所属的图块。然后，您可以根据可以在顶点着色器中计算的任何内容单独移动图块。

如果您需要每个图块的单独数据，例如变换，您可以将其加载到纹理中并使用图块索引从纹理中查找值 - 您甚至可以安排纹理看起来像您的（倾斜）副本六角网格，方便调试！

对于像“摇晃”效果这样的东西，你甚至不需要纹理；只需添加一个给出当前时间的统一变量，并以由平铺索引修改的方式计算抖动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T23:57:03.363

> 当我添加更多纹理贴图时，我开始注意到 FPS 降低了……

通常，您希望最小化渲染的状态更改。更改纹理或着色器等内容需要向 GPU 发送新信息。这不是一个便宜的操作。

您可以尝试的“简单”事情是按材质排序渲染网格。我使用“简单”是因为如果您在树遍历中渲染网格，则必须重新构建渲染代码以改为按材质渲染。

请参阅[Christer Ericson 的这篇文章，](http://realtimecollisiondetection.net/blog/?p=86)了解可以优化渲染以最小化状态变化的其他各种方法。

# mysql - 查询中的sql server变量增量

> ID：12848273
> 
> 赞同：1
> 
> 时间：2012-10-11T20:48:11.850
> 
> 标签：mysql, sql-server-2008-r2

在 MySQL 中，我可以这样做：

```
SELECT @row := @row + 1 as num FROM
(select 0 union all select 1) t1,
(select 0 union all select 1) t2,
(select 0 union all select 1) t3,
(select @row := 0) as t4; 
```

其输出为：

```
num
1
2
3
4
5
6
7
8 
```

我尝试在 sql server 中执行此操作，但遇到了许多障碍：

首先我尝试了这个：

```
SELECT * FROM
(select 0 union all select 1) t1,
(select 0 union all select 1) t2,
(select 0 union all select 1) t3; 
```

并收到：

```
Msg 8155, Level 16, State 2, Line 7
No column name was specified for column 1 of 't1'.
Msg 8155, Level 16, State 2, Line 8
No column name was specified for column 1 of 't2'.
Msg 8155, Level 16, State 2, Line 9
No column name was specified for column 1 of 't3'. 
```

所以我这样做了：

```
SELECT * FROM
(select 0 as f union all select 1) t1,
(select 0 as f union all select 1) t2,
(select 0 as f union all select 1) t3; 
```

1.  为什么我必须为派生表的第 1 列指定名称？

接下来，我尝试设置一个标量，我猜我必须这样做：

```
DECLARE @row as int
SET @row = 0 
```

我可以做这个：

```
SELECT @row = @row + 1 
```

在我这样做之前没有任何结果`SELECT @row`，现在显示了`1`

我不能这样做（因为我一开始在 MySQL 中）：

```
DECLARE @row as int
SET @row = 0

SELECT @row = @row + 1 as num FROM
(select 0 as f union all select 1) t1,
(select 0 as f union all select 1) t2,
(select 0 as f union all select 1) t3; 
```

我得到：

```
Msg 156, Level 15, State 1, Line 4
Incorrect syntax near the keyword 'as'.
Msg 102, Level 15, State 1, Line 5
Incorrect syntax near 't1'.
Msg 102, Level 15, State 1, Line 6
Incorrect syntax near 't2'.
Msg 102, Level 15, State 1, Line 7
Incorrect syntax near 't3'. 
```

1.  如何模仿 sql server 中第一个查询（来自 MySQL）的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:04:53.477

好吧，如果你只想要行号，你可以[`ROW_NUMBER()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)在 TSQL 中使用；

```
SELECT ROW_NUMBER() OVER (ORDER BY t1.f) num FROM
  (SELECT 0 AS f UNION ALL SELECT 1) t1,
  (SELECT 0 AS f UNION ALL SELECT 1) t2,
  (SELECT 0 AS f UNION ALL SELECT 1) t3; 
```

这将返回每个组合的行号。`ROW_NUMBER()`需要一个`ORDER BY`，所以只需按第一个方便的列排序。

[SQLFiddle 在这里](http://sqlfiddle.com/#!6/7215e/4)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:05:22.370

如果我理解其意图，并且您拥有 SQL Server 2005 或更高版本，请尝试以下操作：

```
select row_number() over(order by t1.f) as num from
(select 0 as f union all select 1) t1,
(select 0 as f union all select 1) t2,
(select 0 as f union all select 1) t3,
(select 0 as f) as t4; 
```

产量：

```
num
--------------------
1
2
3
4
5
6
7
8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T09:24:01.300

好吧，对于这个小查询：

```
DECLARE @row as int
SET @row = 0

SELECT @row = @row + 1 as num FROM
(select 0 as f union all select 1) t1,
(select 0 as f union all select 1) t2,
(select 0 as f union all select 1) t3; 
```

您尝试为变量命名，因此设置和输出是您想要的，这是不可能的。你必须做第一个或最后一个，而不是两者..

```
DECLARE @row as int
SET @row = 0

SELECT @row = @row + 1 FROM
(select 0 as f union all select 1) t1,
(select 0 as f union all select 1) t2,
(select 0 as f union all select 1) t3;

SELECT @row as num 
```

# bash - 确保 bash 中的时间格式正确

> ID：12848280
> 
> 赞同：1
> 
> 时间：2012-10-11T20:48:28.807
> 
> 标签：bash, datetime

我有一个脚本询问用户以下问题：

```
read -p "Input time duration of simulation in HH:MM:SS format" -e Time 
```

现在如何确保用户在实际使用变量 $Time 之前为 $Time 输入了正确的表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T08:16:01.953

我假设您需要检查小时 < 24、分钟 < 60、秒 < 60？

```
read -p "Input time duration of simulation in HH:MM:SS format " -e Time

while :; do
  if [[ $Time =~ ^([0-9]{2}):([0-9]{2}):([0-9]{2})$ ]]; then
    if (( BASH_REMATCH[3] < 60 ))\
       && (( BASH_REMATCH[2] < 60 ))\
       && (( BASH_REMATCH[1] < 24 )); then
       break
    fi
  fi
  read -p "Wrong format. Please use the HH:MM:SS format " -e Time
done

# Do something with $Time 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T20:50:30.897

你可以这样测试它：

```
if [[ $Time =~ ^[0-9][0-9]:[0-9][0-9]:[0-9][0-9]$ ]]; then
    echo "format is ok"
else
    echo >&2 "format is wrong"
fi 
```

# maven - com.sun.tools.xjc.reader.Ring.get(Ring.java:113)

> ID：12848282
> 
> 赞同：1
> 
> 时间：2012-10-11T20:48:32.867
> 
> 标签：maven, jaxb, maven-jaxb2-plugin

我是 Maven 新手，我创建了一个 Maven 项目，其中只有模式。我的目的是将我所有的 XSD 保留在这个项目中，编译并创建 JAXB 生成类的 jar。下面是我的POM

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.ads</groupId>
  <artifactId>adsSchema</artifactId>
   <packaging>jar</packaging>
  <version>0.0.1-SNAPSHOT</version>
  <name>adsSchema</name>
    <pluginRepositories>  
    <pluginRepository>  
        <id>maven2-repository.dev.java.net</id>  
        <name>Java.net Repository for Maven</name>  
        <url>http://download.java.net/maven/2/</url>  
        <layout>default</layout>  
    </pluginRepository>  
    </pluginRepositories>
     <build>  
         <plugins>  
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>  
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.0.2</version>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                </configuration>
            </plugin>
            <plugin>  
                <!-- jaxb plugin -->  
                <groupId>org.jvnet.jaxb2.maven2</groupId>  
                <artifactId>maven-jaxb2-plugin</artifactId>  
                <executions>  
                        <execution>  
                            <id>adsSchema</id>  
                            <goals>  
                                    <goal>generate</goal>  
                            </goals>  
                                <configuration>  
                                    <args>  
                                        <param>-npa</param>  
                                    </args>  
                                    <!-- the package for the generated java classes -->  
                                    <generatePackage>com.ads.beans</generatePackage>  
                                    <npa>true</npa>  
                                    <!-- include the following schemas only; by default all *.xsd files are processed -->
                                    <schemaIncludes>
                                        <schemaDirectory>src/main/resources</schemaDirectory>  
                                        <include>AuthenticateUser.xsd</include>  
                                    </schemaIncludes>  
                                    <!-- whether old output should be removed, this field should generally be set to "true" -->  
                                    <removeOldOutput>true</removeOldOutput>  
                                    <!-- generate lots of output -->  
                                    <verbose>true</verbose>  
                                </configuration>  
                        </execution>  
                </executions>  
            </plugin>  
        </plugins>  
    </build>  
     <dependencies>
     <dependency>
    <groupId>com.sun.xml.bind</groupId>
    <artifactId>jaxb-xjc</artifactId>
    <version>2.2-promoted-b65</version>
</dependency>

     <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-impl</artifactId>
            <version>2.2-promoted-b65</version>
    </dependency>
        <dependency>
            <groupId>org.apache.geronimo.specs</groupId>
            <artifactId>geronimo-activation_1.1_spec</artifactId>
            <version>1.1</version>
        </dependency>
        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>2.2.7</version>
        </dependency>

         <dependency>
            <groupId>org.jvnet.jaxb2_commons</groupId>
            <artifactId>jaxb2-basics-runtime</artifactId>
            <version>0.6.4</version>
        </dependency>
        <dependency>
            <groupId>sun.jdk</groupId>
            <artifactId>tools</artifactId>
            <version>1.5.0</version>
            <scope>system</scope>
            <systemPath>C:\Program Files\Java\jdk1.5.0_22\lib\tools.jar</systemPath>
        </dependency>
    </dependencies>
  </project>

My Project Structure is 
      src
         main
             java
                  My Package(Where all Java files get created).
      target
          classes 
```

当我使用 Maven Complie 时，我遇到了以下错误。

```
Exception in thread "main" java.lang.Error: java.lang.reflect.InvocationTargetException
    at com.sun.tools.xjc.reader.Ring.get(Ring.java:113)
    at com.sun.tools.xjc.reader.xmlschema.BGMBuilder.<init>(BGMBuilder.java:146)
    at com.sun.tools.xjc.reader.xmlschema.BGMBuilder.build(BGMBuilder.java:116)
    at com.sun.tools.xjc.ModelLoader.annotateXMLSchema(ModelLoader.java:426)
    at com.sun.tools.xjc.ModelLoader.load(ModelLoader.java:175)
    at com.sun.tools.xjc.ModelLoader.load(ModelLoader.java:120)
    at org.jvnet.mjiip.v_2_2.XJC22Mojo.loadModel(XJC22Mojo.java:50)
    at org.jvnet.mjiip.v_2_2.XJC22Mojo.doExecute(XJC22Mojo.java:40)
    at org.jvnet.mjiip.v_2_2.XJC22Mojo.doExecute(XJC22Mojo.java:27)
    at org.jvnet.jaxb2.maven2.RawXJC2Mojo.doExecute(RawXJC2Mojo.java:314)
    at org.jvnet.jaxb2.maven2.RawXJC2Mojo.execute(RawXJC2Mojo.java:156)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:107)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:534)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:501)
    at com.sun.tools.xjc.reader.Ring.get(Ring.java:102)
    ... 31 more
Caused by: java.lang.Error: java.lang.reflect.InvocationTargetException
    at com.sun.tools.xjc.reader.Ring.get(Ring.java:113)
    at com.sun.tools.xjc.reader.xmlschema.BindingComponent.getClassSelector(BindingComponent.java:65)
    at com.sun.tools.xjc.reader.xmlschema.ColorBinder.<init>(ColorBinder.java:62)
    at com.sun.tools.xjc.reader.xmlschema.BindGreen.<init>(BindGreen.java:63)
    ... 36 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:501)
    at com.sun.tools.xjc.reader.Ring.get(Ring.java:102)
    ... 39 more
Caused by: java.lang.NoClassDefFoundError: javax/activation/MimeTypeParseException
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2357)
    at java.lang.Class.getConstructor0(Class.java:2671)
    at java.lang.Class.getDeclaredConstructor(Class.java:1953)
    at com.sun.tools.xjc.reader.Ring.get(Ring.java:100)
    at com.sun.tools.xjc.reader.xmlschema.DefaultClassBinder.<init>(DefaultClassBinder.java:98)
    at com.sun.tools.xjc.reader.xmlschema.ClassSelector.<init>(ClassSelector.java:214)
    ... 44 more 
```

请帮我解决问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-04-06T18:53:27.960

在 pom.xml 的“jaxb2-maven-plugin”插件标签中添加“javax.activation”依赖项。

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>jaxb2-maven-plugin</artifactId>
    <version>1.6</version>
    <executions>
        <execution>
            <id>xjc</id>
            <goals>
                <goal>xjc</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <schemaDirectory>${project.basedir}/src/main/resources</schemaDirectory>
        <outputDirectory>${project.basedir}/src/main/java</outputDirectory>
        <clearOutputDir>false</clearOutputDir>
    </configuration>
    <dependencies>
        <dependency>
        <groupId>javax.activation</groupId>
        <artifactId>activation</artifactId>
        <version>1.1.1</version>
        </dependency>
    </dependencies>
</plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T06:34:07.480

缺少activation.jar ( `Caused by: java.lang.NoClassDefFoundError: javax/activation/MimeTypeParseException`)。

添加到你的pom：

```
<dependency>
  <groupId>javax.activation</groupId>
  <artifactId>activation</artifactId>
  <version>1.1.1</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-09T16:56:48.327

在 jaxb2-maven-plugin 中添加 javax.activation 依赖项

例子

```
<plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jaxb2-maven-plugin</artifactId>
            <version>1.6</version>
            <executions>
                <execution>
                    <id>xjc</id>
                    <goals>
                        <goal>xjc</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <schemaDirectory>${project.basedir}/src/main/resources/</schemaDirectory>
                <outputDirectory>${project.basedir}/src/main/java</outputDirectory>
                <clearOutputDir>false</clearOutputDir>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>javax.activation</groupId>
                    <artifactId>activation</artifactId>
                    <version>1.1.1</version>
                </dependency>
            </dependencies>
        </plugin> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-21T11:59:48.873

通过更改 Try 2.2.4.RELEASE (org.springframework.boot spring-boot-starter-parent) 而不是 2.0.0.RELEASE 为我解决了问题

# python - 在 Python/Django 中打印变量的值？

> ID：12848286
> 
> 赞同：22
> 
> 时间：2012-10-11T20:48:44.250
> 
> 标签：python, django, windows

在 PHP 中，我习惯于能够做`print $var`或`print_r($var)`.

我可以在 python 的视图中打印变量，但它们最终出现在我的 cmd 窗口中，而不是页面本身。这对某些事情来说很好，但是当它开始包装输出并将其变成乱码时，windows 的 cmd 窗口并不是最易读的。

我尝试`{% print somevar %}`在 django 模板中做，但我得到 TemplateSyntaxError: Invalid block tag: 'print'

那么，对于刚接触 Python 的人来说，如何轻松查看变量的值呢？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-11T20:49:59.423

```
<html>
{{ this_is_my_variable_that_is_passed_to_my_view }}
</html> 
```

`{{`允许变量访问项目，如果项目存在则调用项目函数`__unicode__` ，否则将调用其`__str__`函数

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-11T20:49:55.923

`{{ your_variable }}`将打印该值。

[https://docs.djangoproject.com/en/dev/ref/templates/api/#basics](https://docs.djangoproject.com/en/dev/ref/templates/api/#basics)

# javascript - 如何查找单击的项目是否具有某个数据属性值

> ID：12848287
> 
> 赞同：2
> 
> 时间：2012-10-11T20:48:43.840
> 
> 标签：javascript, jquery, html

我有这两个单选按钮

```
<input id="119715_0" type="radio" name="119715" value="76952" data-logic="yes" required /><label for="119715_0">Yes</label>

<input id="119715_1" type="radio" name="119715" value="76953" data-logic="no" required /><label for="119715_1">No</label> 
```

我需要先找出它们是否具有 data-logic 属性，然后是值，以便将 if 语句放在一起，判断值为 yes 或 value 是否为 no。我不能使用 id，因为页面上可能有多个具有数据逻辑的按钮，所以我尝试使用 $(this) 以便它在被点击的任何一个上运行。

我找到了这个链接[How to select elements with jQuery that have a certain value in a data attribute array](https://stackoverflow.com/questions/7344361/how-to-select-elements-with-jquery-that-have-a-certain-value-in-a-data-attribute)但它特定于标签的类型。我不知道如何将它与 $(this) 一起使用

我目前一直在玩弄

```
function checkLogic() { 

if ($(this).attr("data-logic")) {

alert("haslogic");

}
}

$("input").click(checkLogic); 
```

但一直没有成功

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T20:53:38.207

检查[`.data`](http://api.jquery.com/data/)功能：http: [//jsfiddle.net/byzLG/1/](http://jsfiddle.net/byzLG/1/)

```
$('input[name="119715"]').click(function() {
    if ($(this).data('logic') !== undefined) {
        alert('Has data-logic');
    } else {
        alert('Does not have data-logic');
    }
});​ 
```

在我的原始代码中没有按您想要的那样工作的用例`if ($(this).data('logic'))`是如果值为 0。我相信 false 的值也会破坏它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T20:53:12.263

使用[`.data()`](http://api.jquery.com/data/)方法：

```
$("input").on("click", function(){
  if($(this).data("logic"))
    alert("haslogic");
}); 
```

**[例子](http://jsfiddle.net/tDVxU/)**

> 从 jQuery 1.4.3 开始，HTML 5 的数据属性将被自动拉入 jQuery 的数据对象中。jQuery 1.6 中对嵌入破折号的属性的处理进行了更改，以符合 W3C HTML5 规范。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T20:51:57.587

您可以使用纯 JavaScript：

```
if(element.getAttribute("data-logic") === null) {
   // Doesn't have attribute
} 
```

[JSF](http://jsfiddle.net/hrmpj7nf/)中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T20:52:07.297

```
$("input").click(function() {
    var dataAttr = $(this).attr("data-logic");

    if (dataAttr == "yes") { 
      var value = $(this).attr("value");
      alert('Has logic ' + value);
    }

}); 
```

[http://jsfiddle.net/wCRLE/1/](http://jsfiddle.net/wCRLE/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T20:53:52.023

您应该使用类型检查值。Javascript 的类型确实有问题，所以你需要格外小心：

```
if (typeof($(this).attr('data-type')) === "undefined") 
```

# c++ - MSVC11 错误中的 x64 位 asm

> ID：12848289
> 
> 赞同：1
> 
> 时间：2012-10-11T20:48:46.963
> 
> 标签：c++, visual-c++, assembly, 64-bit

所以我的解决方案中有两个文件。

测试.asm

```
.code
test proc
mov eax, 1
ret
test endp
end 
```

和

源.cpp

```
#include <iostream>
#include <conio.h>

extern "C" int test();

int main()
{
std::cout << "eax = " << test() << std::endl;
_getch();
return 0;
} 
```

我在配置管理器中将解决方案平台设置为 x64，并在 Build Customization 中检查了 masm。我找到了两个相关的帖子，但建议的内容没有帮助。我在 youtube 上关注了一个视频，并且完全按照作者所做的那样做，但我得到了这些错误：

```
1>Source.obj : error LNK2019: unresolved external symbol _test referenced in function main
1>C:\Users\omar\Desktop\ASM\x64\Debug\ASM.exe : fatal error LNK1120: 1 unresolved externals 
```

有人可以帮我找出问题所在吗？我真的很想进入 x64 程序集。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T20:54:13.057

您的汇编程序的函数名称必须是`_test`，而不仅仅是`test`. 您可以在链接器的错误消息中看到：

```
error LNK2019: unresolved external symbol _test
                                          /\
                                          ||
right here --------------------------------- 
```

有关详细信息，请参阅[Microsoft Windows 中的 C 名称修饰](http://en.wikipedia.org/wiki/Name_mangling#C_name_decoration_in_Microsoft_Windows)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:13:29.800

假设您在 Visual Studio 上，您需要将程序集文件的名称添加到其他依赖项

1.  右键单击项目
2.  转到属性
3.  点击链接器
4.  点击输入
5.  在附加的依赖项中，添加测试

假设汇编代码工作正常，并且它与 c++ 源文件位于同一目录中，它应该可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T04:22:22.687

固定的。关注[了这个](http://www.codeproject.com/Articles/271627/Assembly-Programming-with-Visual-Studio-2010-2012)

另外，我不得不使用下划线

# objective-c - iOS重用方法 - 这只能在条件下完成吗？

> ID：12848292
> 
> 赞同：0
> 
> 时间：2012-10-11T20:49:04.560
> 
> 标签：objective-c, ios, methods

我正在尝试在我的代码中重用一个方法，如果没有这样的条件，该方法可以工作：

```
-(void) declareWebView 
```

我可以稍后在任何其他方法中调用它：

```
[self declareWebView]; 
```

但是如果我想给它添加一个条件（我认为这就是它的名字），就像这样：

```
-(void) declareWebView:(UIInterfaceOrientation)orientation duration:(NSTimeInterval)duration 
```

然后我如何在`[self declareWebView];`??中使用它？

如果我执行以下操作，它会给我一个错误：

`[self declareWebView];`或`[self declareWebView:];`//Second 添加了 Column。

任何都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T20:51:20.300

您必须为每个参数传递一个值：

```
[self declareWebView:UIInterfaceOrientationPortrait duration:1.0]; 
```

我建议阅读一些内容[——Objective-C 编程语言](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html)是一本很好的入门指南。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T20:55:44.230

如果你想创建一个新方法来实现与前一个相同的代码，这就是我的解决方案。

```
- (void) originalMethod{
    [self originalMethodWithNumber:nil];
}

- (void) originalMethodWithNumber:(NSNumber*) newNumberParam{
    NSNumber *numberValue = newNumberParam;
    if (numberValue == nil) numberValue = [NSNumber numberWithInt:1];//default value.
    // Perform anything here that you were doing. replacing out the new parameter
} 
```

那么您仍然可以调用您的旧版“originalMethod”，现在有了一个带有参数的新方法。

# php - onChange() 不会触发

> ID：12848293
> 
> 赞同：1
> 
> 时间：2012-10-11T20:49:06.173
> 
> 标签：php, javascript, mysql

我正在尝试在表单中进行级联选择，但我无法让它工作。我的选择元素中的 onChange() 似乎不会触发。

php

```
$flight_sql = "SELECT * FROM wp_flr_flights";
$flight_result = mysql_query($flight_sql);
echo '<select name="location" id="select-location onChange="changeSecond(this.value)">';
echo '<option value="">Select</option>';
while ($flt_loc_rows = mysql_fetch_assoc($flight_result)) {
    $loc_id = $flt_loc_rows["location_id"];
    $loc_name = $flt_loc_rows["location_name"];
    echo '<option value="'.$loc_id.'">'.$loc_name.'</option>';
}
echo '</select>'; 
```

javascript

```
 function changeSecond(first){
alert('dasda');
var xmlhttp;
if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
} else {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function(){
    if (xmlhttp.readyState==4 && xmlhttp.status==200){
        var res=xmlhttp.responseText;
        document.getElementById("second").innerHTML=res;
    }
}
xmlhttp.open("GET","reservations-plane.php?first="+first,true);
xmlhttp.send();
} 
```

预订-plane.php

```
 global $wpdb, $page_url;
    $location=mysql_real_escape_string($_REQUEST["first"]);
    echo $userid.'ddd';
    $flight_sql = "SELECT ".$location." FROM wp_flr_flights GROUP BY ".$location;
    $flight_result = mysql_query($flight_sql);
    echo '<select name="plane_type_choose">';
    while ($flt_plane_rows = mysql_fetch_row($flight_result)) {
        $plain_id = $flt_plane_rows["plane_id"];
        $plane_type = $flt_plane_rows["plane_type"];
        echo '<option value="'.$flt_plane_rows[0].'">'.$flt_plane_rows[0].'</option>';
    }
    echo '</select>'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T20:50:52.517

您的代码中有拼写错误：

`$function`... 应该`function`

```
function changeSecond(first){
   ...
} 
```

注意：检查您的错误代码

您生成的 html 中也存在错误。

```
echo '<select name="location" id="select-location onChange=....>'; 
```

id 属性缺少结束双引号。

# iphone - UITapGestureRecognizer 关闭键盘覆盖按钮

> ID：12848300
> 
> 赞同：0
> 
> 时间：2012-10-11T20:49:30.653
> 
> 标签：iphone, objective-c, ios, ipad

我在 UIScrollView 中有几个 UITextField 和 UIButton，这个滚动视图在我的 UIViewController 的视图中。如果显示，我添加了一个触摸手势识别器来关闭键盘：

```
UITapGestureRecognizer *tapToDismissKeyboard = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(viewTapped:)];
    [tapToDismissKeyboard setCancelsTouchesInView:NO];
    tapToDismissKeyboard.delegate = self;
    [self.view addGestureRecognizer:tapToDismissKeyboard];

#pragma mark UITapGestureRecognizerDelegate
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    if ([touch.view isDescendantOfView:self.signupButton_] || [touch.view isDescendantOfView:self.profilePictureImageView_] || [touch.view isDescendantOfView:self.signupUsingFacebook_]) {
        return NO; // ignore the touch
    }

    return YES; // handle the touch
} 
```

问题是当我点击登录/注册按钮时，它仍然会检测到点击手势，我实际上想要按钮触摸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:52:12.950

触摸的视图应该是按钮本身，所以这样做

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    if (touch.view==self.signupButton_ ) {
        return NO; // ignore the touch
    }

    return YES; // handle the touch
} 
```

应该为您工作，`isDescendantOfView`返回 false 因为该视图是您尝试单击的按钮...类似地，如果您只想让任何按钮通过，您可以这样做

```
if([v isKindOfClass:[UIButton class]])
{
    return  NO;  
} 
```

希望有帮助

丹尼尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:16:36.337

如果您在该视图中添加按钮，则将在整个视图中添加您的添加手势识别器，而不是触摸按钮以创建在该视图中插入您的所有内容，然后仅为该视图添加手势识别器并为您的按钮创建另一个视图将工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T21:24:21.577

解决此问题的方法是也为按钮设置手势并将代码作为

```
[tapToDismissKeyboard requireGestureRecognizerToFail:buttonTapGestureRecognizer]; 
```

# ios - 提供的 passTypeIdentifier 或 teamIdentifier 可能与您的证书不匹配，或者无法验证证书信任链

> ID：12848304
> 
> 赞同：7
> 
> 时间：2012-10-11T20:50:19.380
> 
> 标签：ios, passbook

每当我尝试通过按“添加”按钮安装手动打包的存折应用程序时，标题中都会出现错误。我可以成功安装使用“signpass”工具打包的存折应用程序，但我现在需要在 unix 服务器上创建动态包。

我一直在尝试使用来自网络的各种包手动打包我的存折应用程序，每个包都给我同样的错误。这是我尝试过的几个包： [https://github.com/maater/TCSH-PKPass](https://github.com/maater/TCSH-PKPass) https://github.com/devartis/passbook [https://github.com/pcperini/PyPKPass](https://github.com/pcperini/PyPKPass)

这是创建和压缩的 pass.json（请注意，teamIdentifier 和 passTypeIdentifier 都已填充）：

```
{
  "formatVersion" : 1,
  "passTypeIdentifier" : "pass.votizen.membership",
  "serialNumber" : "ASDF",
  "webServiceURL" : "https://www.votizen.com/passbook/",
  "authenticationToken" : "AUTH_TOKEN",
  "teamIdentifier" : "MY_TEAM_IDENTIFIER",
  "organizationName" : "Matthew Snider",
  "description" : "Your voter registration card",
  "logoText" : "VOTIZEN",
  "labelColor": "#B7B0A8",
  "foregroundColor" : "#5F6062",
  "backgroundColor" : "#FCFAF5",
  "generic" : {
    "headerFields": [
      {
        "key" : "reg_date",
        "label": "VOTER SINCE",
        "value" : "2002"
      }
    ],
    "primaryFields" : [
      {
        "key" : "party",
        "label": "REGISTERED PARTY",
        "value" : "Democrat"
      }
    ],
    "secondaryFields" : [
      {
        "key" : "election",
        "label" : "NEXT ELECTION",
        "value" : "November 6, 2012"
      },
    ],
    "auxiliaryFields" : [
      {
        "key" : "polling_place",
        "label" : "POLLING PLACE",
        "value" : "268 E Julian Street, San Jose, CA 95112",
        "textAlignment" : "PKTextAlignmentLeft"
      }
    ],
    "backFields" : [
      {
        "key" : "elections",
        "label" : "ELECTIONS YOU VOTED IN",
        "value" : "2010 General\n2008 General\n2008 Primary\n2004 General"
      },
      {
        "key" : "polling",
        "label" : "DIRECTIONS TO YOUR POLLING PLACES",
        "value" : "https://maps.apple.com/maps?q=268+E+Julian+Street,+San+Jose,+CA+95112"
      },
      {
        "key" : "website",
        "label" : "Powered by Votizen",
        "value" : "https://www.votizen.com/"
      }
    ]
  }
} 
```

我按照苹果上的步骤生成我的 Pass Type ID 证书，下载并安装在我的 Keychain Access 中。然后我将其导出为“Certificates.p12”并运行以下命令以生成 certificate.pem 和 key.pem：

```
set P12 = Certificates.p12
sef PASSWORD = MY_PASSWORD
openssl pkcs12 -passin pass:$PASSWORD -in "$P12" -clcerts -nokeys -out certificate.pem 
openssl pkcs12 -passin pass:$PASSWORD -in "$P12" -nocerts -out key.pem -passout pass:$PASSWORD 
```

创建清单文件后，我运行：

```
openssl smime -passin pass:$PASSWORD -binary -sign -certfile wwdr.pem -signer certificate.pem -inkey key.pem -in manifest.json -out signature xs-outform DER 
```

我通过将 Apple 全球开发者关系证书颁发机构导出为隐私增强邮件文件来创建 wwdr.pem。

我在某处读到您需要安装 Apple Root Certificate Authority（我有），所以这里是我已安装的证书列表：

*   Apple 应用程序集成证书颁发机构 Apple 根 CA
*   Apple 根证书颁发机构申请全球开发者关系
*   认证机构
*   com.apple.idms.appleid.prd.4f3756614a59746e554a36344e6b55426b64576441413d3d
*   com.apple.ubiquity.peer-uuid.207240B0-758A-4C1E-B173-D1B70FF03533
*   com.apple.ubiquity.peer-uuid.C5D1968F-8923-48E4-A09D-8C9AE485A88B
*   com.apple.ubiquity.ssl-cert.C5D1968F-8923-48E4-A09D-8C9AE485A88B
*   iPhone 开发者：Matthew Snider 通行证类型 ID：
*   pass.votizen.membership

显然，我正在使用的证书或我打包它的方式有问题。我不知道我做错了什么。我希望有人有一个想法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-11T22:00:13.540

我想到了。在创建 p12 文件时，我没有意识到您需要同时选择证书和私钥。我假设导出证书也将包含私钥，但事实并非如此。当您在 Keychain Access 中导出 Pass Type ID 时，请确保它显示“Export 2 Items”，而不是“Export Pass Type ID: ...”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2021-03-22T12:28:59.680

我意识到这是一个古老的问题，但它最近再次出现在我身上。问题是“新”Apple WWDR 证书与同样由 Apple 创建的 pass 证书不兼容。

解决方案是在签署通行证时使用“旧”WWDR 证书，该证书将于 2023 年到期。

# javascript - MarkerClusterer 示例在所有内容都是教程的精确副本后不显示标记

> ID：12848307
> 
> 赞同：-1
> 
> 时间：2012-10-11T20:50:24.087
> 
> 标签：javascript, json, google-maps, google-maps-api-3, markerclusterer

我在这里复制了[谷歌标记聚类器示例](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/examples/simple_example.html?)中的所有内容，只是更改了我想要使用的点的数据，标记不会显示在我的地图上。知道为什么（下面的代码）？

Chrome 给了我一个警告

“资源解释为脚本，但使用 MIME 传输......等等，等等......“......data.json”

但是，我使用 document.write(data[i].lat) 打印了数据，等等，一切都打印得很好......

```
<!DOCTYPE>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>MarkerClusterer v3 Example</title>

    <style type="text/css">
      body {
        margin: 0;
        padding: 10px 20px 20px;
        font-family: Arial;
        font-size: 16px;
      }

      #map-container {
        padding: 6px;
        border-width: 1px;
        border-style: solid;
        border-color: #ccc #ccc #999 #ccc;
        -webkit-box-shadow: rgba(64, 64, 64, 0.5) 0 2px 5px;
        -moz-box-shadow: rgba(64, 64, 64, 0.5) 0 2px 5px;
        box-shadow: rgba(64, 64, 64, 0.1) 0 2px 5px;
        width: 600px;
      }

      #map {
        width: 600px;
        height: 400px;
      }

    </style>

    <script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript" src="data.js"></script>
    <script type="text/javascript" src="data.json"></script>
    <script type="text/javascript">
      var script = '<script type="text/javascript" src="../src/markerclusterer';
      if (document.location.search.indexOf('compiled') !== -1) {
        script += '_compiled';
      }
      script += '.js"><' + '/script>';
      //document.write(script);
      //document.write(data1);
      //var obj = jQuery.getJSON("data.json");
       document.write(data[0].lat);
      //alert( obj.name === "lat" );
    </script>

        <script type="text/javascript">
      function initialize() {
        var center = new google.maps.LatLng(37.4419, -122.1419);

        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 3,
          center: center,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        var markers = [];
        for (var i = 0; i < 2; i++) {
          //var dataPhoto = data.photos[i];
          var latLng = new google.maps.LatLng(data.lat,
              data.lon);
          var marker = new google.maps.Marker({
            position: latLng
          });
          markers.push(marker);
        }
        var markerCluster = new MarkerClusterer(map, markers);
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <h3>A simple example of MarkerClusterer (5 markers)</h3>
    <p>
      <a href="?compiled">Compiled</a> |
      <a href="?">Standard</a> version of the script.
    </p>
    <div id="map-container"><div id="map"></div></div>
  </body>
</html> 
```

这是 data.json 文件的内容...

```
var data = [{"lat":37.4419,"lon":37.4419}, {"lat":37.4419,"lon":50.36}, {"lat":37.4419,"lon":137.4419}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:15:48.307

您询问：

> 我在这里复制了谷歌标记聚类器示例中的所有内容，只是更改了点的数据
> 
> （标题说“一切都是教程的精确副本）

（不是）

> 知道为什么吗？

你改变的东西：

data.lat 和 data.lon 未定义。

您想使用 data[i].lat 和 data[i].lon

[工作示例](http://www.geocodezip.com/v3_markerClusterer_json.html)

# multithreading - 如何在多线程perl中共享散列的散列

> ID：12848312
> 
> 赞同：0
> 
> 时间：2012-10-11T20:50:37.530
> 
> 标签：multithreading, perl, hash, share

共享散列散列的一种方法是声明每一级散列，例如：

```
my %hash : shared;
$hash{test} = &share({}); 
```

但是如果第一级密钥的数量无法预测或太多以至于您无法声明每个密钥怎么办。

像下面的代码：

```
#!/usr/bin/perl -w
use strict;
use threads;
use threads::shared;

my %counts :shared;
my $infile = $ARGV[0];
open my $inf, "$infile";

while(my $inline = <$inf>){
    chomp($inline);
    my @entry = split(/\t/,$inline);
    my $t = threads->create('WORK',@entry)->join;
}

foreach my $i(sort {$a cmp $b} keys %counts){
    foreach my $j(sort {$a cmp $b} keys %{$counts{$i}}){
        print "$i\t$j\t$counts{$i}{$j}\n";
    }
}

sub WORK{
    my @work = @_;
    $counts{$work[0]}{$work[1]}++;
} 
```

和测试集：

```
apple   pie
banana  icecream
orange  juice
mango   juice
mango   pie
mango   pie
...... 
```

该脚本将通过警告您“某些行的共享标量的无效值”来停止。那么有没有一种方法可以共享 %counts 和 %{$counts{KEY1}}？假设我不知道我将在测试集第一列观察到多少种水果，输出应该是这样的：

```
apple    pie      1
banana   icecream 1
mango    juice    1
mango    pie      2
orange   juice    1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:46:05.677

在您的脚本中，您依赖于*autovivification*：哈希和数组，一旦被引用，就会立即出现。这通常有效。它不会在你`use threads`（默认情况下不共享自动激活的数据结构）。如果需要，我们可以简单地自己创建子哈希。这将使您的`WORK`子

```
sub WORK{
  unless (exists $counts{$_[0]}) {
    my %anon :shared;
    $counts{$_[0]} = \%anon;
  }
  $counts{$_[0]}{$_[1]}++;
} 
```

或者

```
sub WORK { ($counts{$_[0]} //= do{my %a :shared; \%a})->{$_[1]}++ } 
```

或类似的。我还删除了`@_`数组的相当无用的复制。

请注意，您的示例甚至不需要线程。因为你做

```
my $t = threads->create('WORK',@entry)->join; 
```

这几乎完全等同于

```
my $t = WORK(@entry); 
```

此外，`join`返回线程的返回值（在这种情况下是增量*之前*的计数，因为它是最后一条语句的值），而*不是*线程对象。

# git - Git 工作区是否应该自动适应特定分支的内容？

> ID：12848317
> 
> 赞同：1
> 
> 时间：2012-10-11T20:51:07.253
> 
> 标签：git, merge, branch, workspace, git-checkout

[Git checkout/pull 不会删除目录？](https://stackoverflow.com/questions/1499157/git-checkout-pull-doesnt-remove-directories)

我对 git 有点陌生，慢慢地学习它的各个部分。

所以例如我有一个分支

**掌握**文件夹A

我后来从**Master**创建了一个分支

**开发**并添加了 FolderB

所以**Dev**结果有 FolderA 和 FolderB

现在当我这样做时`git branch master`，我假设应该删除文件夹 B。

但是我将 FolderB 视为 master 中的未暂存文件夹**，**据我所知应该将其删除。

此外，如果我继续，当在分支**Dev**中删除 FolderA 时，在更改分支时

to **master** and back to **Dev** FolderA 在分支**Dev**中出现未暂存。

那么为什么 git 不删除这些文件夹呢？我应该总是做一些干净的命令`git clean -f -d`吗？

或者我错过了什么？

我的真实情况要复杂得多，但是这个简单的示例应该涵盖我在更大范围内遇到的问题。

需要明确的是：这个问题是关于分支的内容，它不仅仅与文件夹有关。然而，答案与此处指出的另一个问题相似，但问题有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T20:54:58.887

尽管 Git 管理*文件*夹中的文件，但在切换到不需要文件夹的分支时，它不会删除文件夹本身。别担心，你不会错过任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T08:00:17.973

注意：Git 仅删除*空*目录的能力可以追溯到 git 的最开始：
请参阅提交“[删除空目录之后`read-tree -u`](https://github.com/git/git/commit/340e4f88c)”，来自... 2005 年 10 月 10 日！（七年前）

> 这解决了每个人最喜欢的抱怨，即使用 ' `git checkout`' 切换分支会留下空目录。
> 
> 签字人：Junio C Hamano`<junkio@cox.net>`

# android - 三星 Galaxy 变体上的 Android opengl 白色纹理

> ID：12848318
> 
> 赞同：5
> 
> 时间：2012-10-11T20:51:16.793
> 
> 标签：android, opengl-es, galaxy, opengl-es-1.1

我在三星银河变体上得到白色纹理，但在我测试过的其他手机上，纹理工作得很好。所以我的问题是导致这种行为的通常怀疑是什么？银河变体是否有任何特殊硬件并且缺少某些东西？

我的纹理加载代码是这个

```
 GLuint texture;
  glGenTextures(1, &texture);
  glBindTexture(GL_TEXTURE_2D, texture);

  glPixelStorei(GL_UNPACK_ALIGNMENT, 2);

  glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
  glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

  glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
  glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);

  glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE,GL_MODULATE);

  if(alpha)glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, (GLvoid*) image_data);
  else glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, (GLvoid*) image_data); 
```

并且绘图像往常一样使用 GL_TRIANGLES

*我面前没有实际的设备，所以我不能做 glGetError

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:31:30.040

由于是OpenGL ES 1.0，所以还需要调用

```
glEnable(GL_TEXTURE_2D); 
```

否则在 OpenGL ES 2.0 上是无操作的，其中着色器说明正在读取哪种纹理类型（嗯，这实际上是一个错误）。

调用 glTexParameterf() 和 glTexEnvf() 对我来说似乎有点奇怪，我会使用 glTexParameteri() 和 glTexEnvi() 代替（传递的值是枚举，它们是整数，而不是浮点数）。但这不应该导致错误。

另一件事是最大纹理大小（您已经说过它是 POT）。质地大吗？某些设备的最大纹理大小限制可能低至 512 x 512 像素。

解包对齐通常不会有很大的影响。如果将 RGB 数据存储为 3 个字节，则它应该为 1，如果将 RGB 和 RGBA 都存储为一个双字（= 4 个字节），则它应该为 4。如果您指定了错误的对齐方式，我可以想象纹理是乱码（RGB 或扫描线倾斜），但它通常不应该是白色的。另一方面，如果驱动程序拒绝此解包对齐，它可能会使纹理留空并产生 GL 错误。看看有没有。

另一个因素是纹理坐标。一些设备在 texcoord 插值器中的位数很少，并且指定大的纹理坐标（例如地形四边形上的 -10000、+10000）可能会导致图形故障。这实际上大多是无证的，许多设备都存在问题。

制作 8x8 亮绿色纹理对我总是有帮助的（不是 0x00ff00，例如 0x8AC43C 在转换为灰度或仅使用单个组件的情况下更容易发现）。然后应该将此纹理应用于“小”四边形（完全在屏幕上且大到足以可见的），texcoords 在 [0-1] 范围内。

# python - 如何在需要在 python 中进行身份验证的代理服务器后面运行 selenium Web 驱动程序

> ID：12848327
> 
> 赞同：12
> 
> 时间：2012-10-11T20:51:49.940
> 
> 标签：python, authentication, selenium, proxy

目前这是我的代码，但是 webDriver 显示一个弹出窗口以输入代理凭据，我不希望出现这种烦人的情况，这不是第一次在 stackoverflow 中出现相同的问题，但没有人回答正确的答案.

我试图谷歌找到这个问题的解决方案。我开始知道java中的解决方案，但我不知道我们如何在python中做到这一点。

```
 PROXY_HOST = "65.49.1.59"
    PROXY_PORT = 60099
    fp = webdriver.FirefoxProfile()
    # Direct = 0, Manual = 1, PAC = 2, AUTODETECT = 4, SYSTEM = 5

    print " im in parse_details"

    fp.set_preference("network.proxy.type", 1)
    fp.set_preference('network.http.phishy-userpass-length', 255)

    fp.set_preference("network.proxy.http", PROXY_HOST)
    fp.set_preference("network.proxy.http_port", PROXY_PORT)
    fp.set_preference("network.proxy.ftp", PROXY_HOST)
    fp.set_preference("network.proxy.ftp_port", PROXY_PORT)
    fp.set_preference("network.proxy.ssl", PROXY_HOST)
    fp.set_preference("network.proxy.ssl_port", PROXY_PORT)
    #fp.set_preference("network.proxy.user_name", 'someusername')
    #fp.set_preference("network.proxy.password", 'somepassword')
    fp.set_preference("network.proxy.no_proxies_on", "") # set this value as desired

    self.driver = webdriver.Firefox(firefox_profile=fp)
    self.driver.get("http://www.whatismyip.com/") 
```

以下这些陈述是我猜到的，我不确定它们的语法是否正确，即使我试图在 selenium 文档中找出，但没有帮助。你们能否对此有所了解。

```
 #fp.set_preference("network.proxy.user_name", 'someusername')
    #fp.set_preference("network.proxy.password", 'somepassword') 
```

ps 这里问的同样的问题[Selenium using Python: enter/provide http proxy password for firefox](https://stackoverflow.com/questions/8885137/selenium-enter-provide-http-proxy-password-for-firefox)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-02-09T13:25:56.793

Selenium 无法处理基本身份验证，也不能很好地处理弹出窗口。但是这个问题是可以解决的。作为对我有用的解决方案（我在[这里](https://github.com/RobinDev/Selenium-Chrome-HTTP-Private-Proxy)找到了）是添加一个浏览器扩展来对 Selenium 进行身份验证。这很简单。以下是它在 Chrome 和 Python 上的工作方式：

1.  创建一个包含两个文件的 zip 文件**proxy.zip ：**

**背景.js**

```
var config = {
    mode: "fixed_servers",
    rules: {
      singleProxy: {
        scheme: "http",
        host: "YOU_PROXY_ADDRESS",
        port: parseInt(YOUR_PROXY_PORT)
      },
      bypassList: ["foobar.com"]
    }
  };

chrome.proxy.settings.set({value: config, scope: "regular"}, function() {});

function callbackFn(details) {
    return {
        authCredentials: {
            username: "YOUR_PROXY_USERNAME",
            password: "YOUR_PROXY_PASSWORD"
        }
    };
}

chrome.webRequest.onAuthRequired.addListener(
        callbackFn,
        {urls: ["<all_urls>"]},
        ['blocking']
); 
```

不要忘记将**YOUR_PROXY_***替换为您的设置。

**清单.json**

```
{
    "version": "1.0.0",
    "manifest_version": 2,
    "name": "Chrome Proxy",
    "permissions": [
        "proxy",
        "tabs",
        "unlimitedStorage",
        "storage",
        "<all_urls>",
        "webRequest",
        "webRequestBlocking"
    ],
    "background": {
        "scripts": ["background.js"]
    },
    "minimum_chrome_version":"22.0.0"
} 
```

2.  将创建的 proxy.zip 添加为扩展

**蟒蛇代码：**

```
from selenium import webdriver
from selenium.webdriver.chrome.options import Options

chrome_options = Options()
chrome_options.add_extension("proxy.zip")

driver = webdriver.Chrome(executable_path='chromedriver.exe', chrome_options=chrome_options)
driver.get("http://google.com")
driver.close() 
```

而已。对我来说，这就像一个魅力。如果您需要动态创建 proxy.zip 或需要 PHP 示例，请转到[原始帖子](https://github.com/RobinDev/Selenium-Chrome-HTTP-Private-Proxy)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-08T09:26:10.480

我知道它很晚才回答你的问题，但最近我开始使用 Python，并试图做同样的事情并做了类似的事情来处理这种情况。

在代理服务器后面运行 selenium web 驱动程序

1.  需要创建一个 firefox 配置文件，其中应该安装“autoauth”插件。
2.  尝试通过手动点击 URL 来保存代理服务器用户名和密码。
3.  Firefox 配置文件将在 autoauth 的帮助下保存代理服务器的凭据
4.  在脚本中调用该特定的 Firefox 配置文件。
5.  设置所有首选项以定义代理服务器详细信息。
6.  将 Firefox 配置文件分配给浏览器的实例
7.  点击任意网址，下面是运行示例

**PS：**从互联网选项中删除所有代理设置，脚本将自动使用它

因此，从技术上讲，您不会发送代理用户名和密码，而是将这些凭据保存在 firefox 中并调用该特定的 firefox 配置文件。

希望您早就解决了您的问题，但如果它仍然存在，这可能会对您有所帮助。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-11T03:28:41.480

有关如何访问 firefox 配置文件的信息，请参阅此路径：http: [//software-testing-tutorials-automation.blogspot.jp/2014/05/how-to-create-and-use-custom-firefox.html](http://software-testing-tutorials-automation.blogspot.jp/2014/05/how-to-create-and-use-custom-firefox.html)

基本上，您需要创建一个配置文件并在 Firefox 中使用该配置文件。现在，当您通过 selenium 运行时，您的配置文件的行为也将是相同的。因此，如果您的配置文件会提示代理身份验证，那么它也会在您通过 selenium 打开它时显示。因此，您必须找到一种方法，使用附加组件来隐藏使用该配置文件的身份验证。成功完成之后，Selenium 也一样。

# javascript - 在sugar.js 中，如何通过过滤（不完全匹配）找到数组的“最后一个索引”？

> ID：12848331
> 
> 赞同：1
> 
> 时间：2012-10-11T20:51:56.487
> 
> 标签：javascript, sugar.js

看起来 Array.lastIndexOf 的原始功能是我正在寻找的，但它已更改。知道如何复制旧功能吗？

[http://blog.sugarjs.com/post/8452749291/v0-9-2-indexof-lastindexof-fixed](http://blog.sugarjs.com/post/8452749291/v0-9-2-indexof-lastindexof-fixed)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:39:31.643

在查看了 sugar.js 文档之后，它似乎`Array#findIndex`与我正在尝试做的相反，所以这是我使用它的解决方案：

```
Array.prototype.findLastIndex = function(f, startIndex, loop) {
    var reverseIndex = this.clone().reverse().findIndex(f, startIndex, loop);
    if (reverseIndex < 0) {
        return reverseIndex;
    }
    return this.length - reverseIndex - 1;
}; 
```

# javascript - HighCharts - 导出图表时忽略 setTitle()

> ID：12848335
> 
> 赞同：1
> 
> 时间：2012-10-11T20:52:11.393
> 
> 标签：javascript, charts, export, highcharts

我的代码在文档加载时创建一个 HighCharts 图表，然后当用户更改某些设置时，其他代码将更新图表。我用命令更改标题，`chart.setTitle()`屏幕上的图表更新得很好。

但是当图表导出为任何图像类型时，图表默认返回为空图表的标题，即“图表标题”。动态标题不会被导出。

在这里查看我的**[JSFiddle](http://jsfiddle.net/LHSey/)**。单击图表右上角的小“导出”图标，然后选择“下载 PNG 图像”或任何其他选项。下载的图像将显示“图表标题”而不是代码指定的标题和副标题。

有人知道我在这里做错了什么吗？非常感谢你的帮助！

```
$(function() {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'ChartContainer',
                type: "spline"
            },

            series: [{
                data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]}],
        });

        chart.setTitle({
            text: "Testing"
        }, {
            text: "This is a test"
        });

    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:04:22.357

基于错误 #48 中的解决方案的示例：

[http://jsfiddle.net/cjc343/LHSey/1/](http://jsfiddle.net/cjc343/LHSey/1/)

错误 #48：

[https://github.com/highslide-software/highcharts.com/issues/48](https://github.com/highslide-software/highcharts.com/issues/48)

论坛讨论问题：

[http://highslide.com/forum/viewtopic.php?f=9&t=8951](http://highslide.com/forum/viewtopic.php?f=9&t=8951)

简而言之，除非您明确更改最初用于呈现图表的默认值，否则在导出时不会应用对图表选项的更改。

# java - jpanels之间不需要的空间

> ID：12848339
> 
> 赞同：1
> 
> 时间：2012-10-11T20:52:27.833
> 
> 标签：java, swing, jpanel

我正在尝试创建一个 JPanel，它有 3 个组件排列成一行。它应该有一个彩色框、一个标签和一个删除按钮。

我将 JPanel 设置为 GridLayout，其中存储了用于彩色框的 JPanel、用于标签的 JLabel 和带有自定义 ImageIcon 的 JButton。

问题是彩色框和标签之间有一个空白区域。我已经突出显示了每个组件的边界，并且似乎没有任何组件被过度拉伸。

这是我的意思的屏幕截图：

![在此处输入图像描述](../Images/9808a70623db3beda5e350258be16e82.png)

这是我正在使用的代码：标签类：

```
public class Label extends JPanel {

    JButton btnDeleteObject;
    // Delete icon
    ImageIcon delIcon = new ImageIcon("Delete.png"); 
    Image img = delIcon.getImage();
    Image newimg = img.getScaledInstance(28, 28,  java.awt.Image.SCALE_SMOOTH);  
    ImageIcon scaledDelIcon = new ImageIcon(newimg);

    Color labelColour;

    public Label(String labelName, Color labelColour) {
        this.labelColour = labelColour;

        setLayout(new BoxLayout(this, BoxLayout.X_AXIS));

        addComponents(labelName);

    }   

    private void addComponents(String labelName) {

        JPanel innerContainer = new JPanel(new GridLayout(1, 3));
        JLabel name = new JLabel(labelName);

        LabelColourBox cBox = new LabelColourBox();

        name.setMaximumSize(new Dimension(80, 40));
        name.setPreferredSize(new Dimension(80, 40));
        name.setSize(new Dimension(80, 40));

        name.setBorder(BorderFactory.createLineBorder(Color.blue));

        setBorder(BorderFactory.createLineBorder(Color.black));

//      name.setBorder(new EmptyBorder(5, 5, 5, 5));

        // Add action to delete button for Icon
        Action action = new AbstractAction("Button Label", scaledDelIcon) {
            // This method is called when the button is pressed
            public void actionPerformed(ActionEvent evt) {
                System.out.println("delete");
            }
        };

        btnDeleteObject = new JButton(action);

        // Remove label, background
        btnDeleteObject.setText("");
        btnDeleteObject.setContentAreaFilled(false);

        setAlignmentX(LEFT_ALIGNMENT);

        innerContainer.add(cBox);
        innerContainer.add(name);
        innerContainer.add(btnDeleteObject);

        add(innerContainer);

    }
} 
```

这是标签颜色框：

```
public class LabelColourBox extends JPanel{

    public LabelColourBox() {
        setLayout(new BoxLayout(this, BoxLayout.X_AXIS));
    }

    @Override
    protected void paintComponent(Graphics g) {

        super.paintComponent(g);
        setBorder(BorderFactory.createLineBorder(Color.green));

        setMaximumSize(new Dimension(40, 40));
        setPreferredSize(new Dimension(40, 40));
        setSize(new Dimension(40, 40));

        g.setColor(Color.RED);
        g.fillRect(0, 0, 40, 40);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T21:03:14.763

1.  不要调用 setSize/setPreferredSize/setMaximumSize/setMinimumSize/setBounds/setLocation，使用适当的[LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)，这就是工作。
2.  不要在paintComponent 中调用这些方法。paintComponent() = 绘制组件，因此您应该只执行绘制操作（drawLine、drawRect、...）。
3.  GridLayout 通常不是一个非常灵活的布局，因为它基于最大的首选尺寸以相同的尺寸布置所有子组件。因此，在这种简单的情况下，看看 BorderLayout、GridBagLayout，甚至是 BoxLayout 和 FlowLayout。如果您可以使用第三方库，那么 MigLayout 就是您的朋友。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T22:04:14.427

正如 Guillaume 所指出的，您的代码存在一些严重问题。

切勿从任何`paintXxx`方法中对任何 UI 组件进行任何更改

```
protected void paintComponent(Graphics g) {
    super.paintComponent(g);

    // This is INCREDIBLY bad
    setBorder(BorderFactory.createLineBorder(Color.green));
    setMaximumSize(new Dimension(40, 40));
    setPreferredSize(new Dimension(40, 40));
    setSize(new Dimension(40, 40));
    //------------

    g.setColor(Color.RED);
    g.fillRect(0, 0, 40, 40);
} 
```

这样做会导致重绘请求被发送到重绘管理器，它最终会调用你的`paintComponent`，这将触发重绘请求......并与你的 CPU 说再见，因为它循环到 100% 并且你的程序变得无响应。

你应该尽量避免打电话`setPreferred/Minimum/MaximumSize`。让各个组件解决它。如果您正在自定义组件，请覆盖这些方法，它将阻止一些任性的开发人员更改您下面的组件的大小。

您应该避免使用绝对值，尤其是在绘画时。

```
g.fillRect(0, 0, 40, 40); 
```

这是非常危险的。如果这个组件被添加到一个`BorderLayout`? 它只会在组件的左上角绘制一个正方形......并不是很有用，而是使用`getWidth`and`getHeight`作为您需要影响的区域的基础。您还需要考虑组件`Insets`以确保您的内容被绘制在可用的视觉范围内。

这也意味着您可以更改组件的大小而无需重写整个代码部分：P

至于你的程序。使用更灵活的布局管理器。 `GridLayout`创建一个统一的网格来布局其组件...

![在此处输入图像描述](../Images/80dcf075e7d91cf22fb1dfa67a26f527.png)

```
public class Main {

    public static void main(String[] args) {
        new Main();
    }

    public Main() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridLayout(3, 1));
                frame.add(new Label("One", Color.BLACK));
                frame.add(new Label("Two", Color.BLACK));
                frame.add(new Label("Three", Color.BLACK));
                frame.pack();
                frame.setVisible(true);
            }
        });
    }

    public class Label extends JPanel {

        JButton btnDeleteObject;
        // Delete icon
        ImageIcon delIcon = new ImageIcon("Delete.png");
        Image img = delIcon.getImage();
        Image newimg = img.getScaledInstance(28, 28, java.awt.Image.SCALE_SMOOTH);
        ImageIcon scaledDelIcon = new ImageIcon(newimg);
        Color labelColour;

        public Label(String labelName, Color labelColour) {
            this.labelColour = labelColour;

//            setLayout(new BoxLayout(this, BoxLayout.X_AXIS));
            // Not sure why you want to do this, but this would
            // be a more useful layout manager in the this context
            // Personally, I would just layout the components directly onto
            // this container...
            setLayout(new BorderLayout());

            addComponents(labelName);

        }

        private void addComponents(String labelName) {

//            JPanel innerContainer = new JPanel(new GridLayout(1, 3));
            JPanel innerContainer = new JPanel(new GridBagLayout());
            JLabel name = new JLabel(labelName);

            LabelColourBox cBox = new LabelColourBox();

//            name.setMaximumSize(new Dimension(80, 40));
//            name.setPreferredSize(new Dimension(80, 40));
//            name.setSize(new Dimension(80, 40));

            name.setBorder(BorderFactory.createLineBorder(Color.blue));

            setBorder(BorderFactory.createLineBorder(Color.black));

//      name.setBorder(new EmptyBorder(5, 5, 5, 5));

            // Add action to delete button for Icon
            Action action = new AbstractAction("Button Label", scaledDelIcon) {
                // This method is called when the button is pressed
                public void actionPerformed(ActionEvent evt) {
                    System.out.println("delete");
                }
            };

            btnDeleteObject = new JButton(action);

            // Remove label, background
            btnDeleteObject.setText("");
            btnDeleteObject.setContentAreaFilled(false);

            setAlignmentX(LEFT_ALIGNMENT);

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.fill = GridBagConstraints.BOTH;

            innerContainer.add(cBox, gbc);
            gbc.gridx++;
            gbc.weightx = 1;
            gbc.anchor = GridBagConstraints.WEST;
            innerContainer.add(name, gbc);
            gbc.gridx++;
            gbc.weightx = 0;
            innerContainer.add(btnDeleteObject, gbc);

            add(innerContainer);

        }

        public class LabelColourBox extends JPanel {

            public LabelColourBox() {
                setLayout(new BoxLayout(this, BoxLayout.X_AXIS));
            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(40, 40);
            }

            @Override
            public Dimension getMinimumSize() {
                return getPreferredSize();
            }

            @Override
            public Dimension getMaximumSize() {
                return getPreferredSize();
            }

            @Override
            protected void paintComponent(Graphics g) {

                super.paintComponent(g);

                // DON'T DO THIS, THIS IS A VERY BAD IDEA, THIS WILL RESULT
                // IN A NEW REPAINT REQUEST BEING SENT TO THE REPAINT MANAGER
                // CAUSE THIS METHOD TO BE CALLED AND NEW REPAINT REQUEST BEING...
                // you get the idea..
                //setBorder(BorderFactory.createLineBorder(Color.green));
                //setMaximumSize(new Dimension(40, 40));
                //setPreferredSize(new Dimension(40, 40));
                //setSize(new Dimension(40, 40));

                g.setColor(Color.RED);
                g.fillRect(0, 0, getWidth() - 1, getHeight() - 1);
                g.setColor(Color.GREEN);
                g.drawRect(0, 0, getWidth() - 1, getHeight() - 1);
            }
        }
    }
} 
```

# c# - 如何将图像添加到标签？

> ID：12848341
> 
> 赞同：-5
> 
> 时间：2012-10-11T20:52:36.330
> 
> 标签：c#, image, label, fromfile

我必须将图像添加到我的标签，但我找不到解决方案如何做到这一点。我正在尝试使用这个：

```
 InitializeComponent();
        url = Directory.GetCurrentDirectory() + @"/Cards/cardSkin.png";
        mylabel.Background = new ImageBrush(new BitmapImage(new Uri(url))); 
```

我不知道即使我使用了这个权利，我只是从其他项目中复制了这个，我们在课堂上做了什么。无论如何，我试图创造`Image img = Image.FromFile("YourFile.bmp");`，但我不知道为什么，`.FromFile`没有为我工作。你们中的任何人都有其他方法将标签制作为图片（背景）并帮助新手做到这一点？:D

抛出异常：

```
Error 1 'System.Windows.Controls.Image' does not contain a definition for 'FromFile. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-02T23:37:53.730

这对我有用：

```
Label ilabel = new Label(); // create a label
Image i = Image.FromFile("image.png"); // read in image
ilabel.Size = new Size(i.Width, i.Height); //set label to correct size
ilabel.Image = i; // put image on label
this.Controls.Add(ilabel); // add label to container (a form, for instance) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-08T09:25:15.230

如果您使用在表单设计器中创建的标签，请确保设置`AutoSize`为 false。否则`.Width`将是 0，因为文本为空并且修改`.Size`被忽略。

像这样的代码将起作用：

```
label1.Image?.Dispose(); // prevent memory leak
var image = Image.FromFile(@"image.png");
label1.Size = image.Size;
label1.Image = image; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T21:29:25.070

尝试这个

```
Image img = System.Drawing.Bitmap.FromFile(filename); 
```

# java - 将二进制数据转换为图像

> ID：12848342
> 
> 赞同：1
> 
> 时间：2012-10-11T20:52:42.903
> 
> 标签：java, image, http, binary

我有一个问题，希望你能帮助我。问题如下。我有一台具有 http 服务的相机，我正在使用 http 与相机通信。所以我发送 http 请求并收到一个 http 响应，其中我有一个二进制 jpeg 数据。但我不知道如何将该数据转换为图片。所以我的问题，我的主要问题是如何将二进制数据转换为图片。

到目前为止，这是我的代码，我一直在获取图像。

```
URL url = new URL("http://10.10.1.154" + GETIMAGESCR());
BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
String inputLine;
// while ((inputLine = in.readLine()) != null){
// inputLine = in.readLine();
File file = new File("D:\\alphas\\proba.bin");
boolean postoi = file.createNewFile();
FileWriter fstream = new FileWriter("D:\\alphas\\proba.bin");
BufferedWriter out = new BufferedWriter(fstream);
while ((inputLine = in.readLine()) != null){
out.write(in.readLine());
// out.close();
// System.out.println("File created successfully.");
System.out.println(inputLine);
}
System.out.println("File created successfully.");
out.close();
in.close() 
```

;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:35:38.983

试试这个代码：

```
URL url = new URL("http://10.10.1.154" + GETIMAGESCR());
InputStream is = new InputStream(url.openStream());
FileOutputStream out = new FileOutputStream("D:\\alphas\\proba.jpg");
byte[] data = new byte[1024];
int readBytes = 0;
while ((readBytes = is.read(data)) > 0) {
  out.write(data,0,readBytes);
}
out.flush();
out.close();
is.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:37:19.210

您可以使用 javax.imageio.ImageIO

```
URL url = new URL("http://10.10.1.154" + GETIMAGESCR());
BufferedImage bi = ImageIO.read(url.openStream()) 
```

# objective-c - CoreData 的模型设计建议，MOB 的一组 MOB

> ID：12848343
> 
> 赞同：0
> 
> 时间：2012-10-11T20:52:46.117
> 
> 标签：objective-c, ios, core-data

你好这里的第一篇文章，

我对如何实现这一点有疑问，我有 3 个托管对象 MailFolder、MailFoldersInfo 和 Mail。顾名思义，MailFolder 是文件夹相关信息、文件夹名称、最后日期文件夹电子邮件同步的最后日期更新字段，当然还有与 Mail 的关系（可选和 To-any）。

邮件，有主题、正文、更多的字段以及与 MailFolder 的关系（非可选）。

但是现在我有一个名为 lastsync 日期类型的字段的 MailFoldersInfo，它需要是所有 MailFolders 列表更新时的最后同步日期，我如何设置这样的关系，我不知道如何在SQL 也没有。

有人可以用这个启发我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:22:01.277

MailFoldersInfo 似乎是您要保留的记录，以维护有关所有邮件文件夹的信息。这似乎是数据库的单例对象。您不需要数据库实体来管理一个对象。您可以使用 NSUserDefaults 来获取诸如 lastsync 日期之类的信息。如果您需要更多信息，您可以根据邮件文件夹计算值，或者在 NSUserDefaults 上保存更多信息，甚至在您的文档目录中创建一个 plist 文件。

# iphone - 从框架加载 nib 文件

> ID：12848344
> 
> 赞同：0
> 
> 时间：2012-10-11T20:52:46.087
> 
> 标签：iphone, objective-c, ios, ipad, cocoa

我有一个从 Interface builder 创建的 nib 文件，我已将其作为捆绑资源插入框架并添加到我的项目中。我正在尝试从框架加载 nib 文件，但不确定如何为 ViewController 加载它。任何人都可以分享关于如何从框架资源文件夹的主包中加载 nib 文件的任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:00:02.237

好的，在想了一会儿之后，我终于让它工作了。以下是我如何从外部框架加载 nib 文件的内容，将来可能会对某人有所帮助。

```
NSString *resourceBundlePath = [[NSBundle mainBundle] pathForResource:@"TheFrameworkName" ofType:@"framework"];

NSLog(@"the bundle: %@",resourceBundlePath);

NSBundle* languageBundle = [NSBundle bundleWithPath:resourceBundlePath];
[languageBundle load];

NSLog(@"The bundle desc: %@",[languageBundle description]);

self.scanManual = [[Scanner alloc] initWithNibName:@"Resources/Scanner" bundle:languageBundle]; 
```

由于我在前几次尝试中获得了（空）内容，因此通过保持 NSLog 来加载检查包的一种好方法。再次感谢 stackoverflow 社区

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:09:16.430

我不确定这是否适用于 xib，但这就是我从捆绑包中加载图像的方式，检查它是否适合您。

但请确保当您添加文件夹时，您应该单击第二个单选按钮，如图像。

![在此处输入图像描述](../Images/a62b964fec1aa93c2b108d77a267b1b6.png)

```
imageArray = (NSMutableArray *)[[NSBundle mainBundle] pathsForResourcesOfType:@"jpg" inDirectory:@"Beauty Shots_iPad"]; 
```

# python - python，字典值是对象，该对象可以从自身内部的函数中访问自己的键值吗？

> ID：12848345
> 
> 赞同：0
> 
> 时间：2012-10-11T20:52:53.873
> 
> 标签：python, object, dictionary, key

我在python中使用字典通过使用元组作为键来制作基本上是无限的二维数组

```
grid = {}
grid[(0,0)] = cell() 
```

值“单元格”是一个新对象。例如，我可以在该对象中拥有一个能够获取其键值的函数吗？IE。(0,0)

我可以将这些数据放在对象本身中，但是我会让它存在两次，这似乎是糟糕的编程。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:55:16.083

```
class cell(object):
     def my_idx(self,grid):
         return grid.keys()[grid.values().index(self)] 
```

然后调用它

```
some_cell.my_idx(grid) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:10:43.137

这里有两个单独的问题...首先，要从单元格内访问网格，我会让`cell`'s 的构造函数将对网格的引用作为强制参数。

```
grid = {}
grid[(0,0)] = cell(grid) 
```

和

```
class cell:
  def __init__(self, gridRef):
    self.grid = gridRef 
```

但是，访问密钥更具挑战性。一个原因是字典不是一对一的映射，所以同一个单元格对象在你的字典中可能有多个键。您需要手动或通过翻转字典来遍历您的键并查找它。让你的`cell`构造函数也拿钥匙怎么样？

```
grid = {}
grid[(0,0)] = cell(grid, (0,0)) 
```

如果这太多余了，那么也许是这样的？

```
def addToGrid(myDict, myCell):
  myDict[myCell.key()] = myCell 
```

接着...

```
grid = {}
addToGrid(grid, cell(grid, (0, 0))) 
```

您的`cell`类将字典键作为第二个参数并通过该`key()`方法返回它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T21:08:10.237

这应该有效：

```
class Cell(object):

    def get_idx(self, grid):
        """
        >>> cell = Cell()
        >>> cell.get_idx({(0, 0): cell})
        (0, 0)

        >>> cell = Cell()
        >>> cell.get_idx({(0, 0): Cell(), (1, 1): cell, (2, 2): Cell()})
        (1, 1)
        """
        return [x[0] for x in grid.items() if x[1] == self][0] 
```

请注意，如果对象在字典中不止一次，它不会给你可靠的结果，如果对象不在字典中，它会引发异常。

在非常大的网格上它也可能很慢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T21:09:41.590

您的问题暗示 dict 键与其值之间存在 1:1 映射，这是不正确的。拿这个代码：

```
grid = {}
c = cell()
grid[(0,0)] = c
grid[(0,1)] = c 
```

这在 python 中是完全有效的，即使您的用例不允许这样做。您正在寻找的函数应该返回什么索引`c`？

两次存储数据不一定是糟糕的编程风格，但您的内存可能会受到限制。如果您`cell`需要知道它的索引，它必须具有该数据。如果您将单元格视为项目列表，则 dict 将成为更快访问的索引。拥有更快访问的索引当然不是不好的编程风格。;-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T21:10:00.170

给你的`cell`类一个`address`属性，它是一个二元组，例如`(0,0)`. 给`cell`类一个`__hash__`方法，该方法返回`hash(self.address)`.

```
class cell:
    def __init__(self,address):
        self.address = address

    def __hash__(self):
        return hash(self.address)

    def __eq__(self):
        return hash(self) == hash(other) 
```

您仍然可以通过它们的地址访问单元格，但单元格知道它们所属的位置。

```
>>> c = cell((0,0))
>>> c
<so.cell instance at 0xb74c6a2c>
>>> grid = dict()
>>> grid[c] = c
>>> grid[c]
<so.cell instance at 0xb74c6a2c>
>>> grid[(0,0)]
<so.cell instance at 0xb74c6a2c> 
```

我不确定你`cell`的 s 还需要知道和/或做什么，但如果你只是在这里做数字的东西，我强烈推荐[scipy.sparse](http://docs.scipy.org/doc/scipy/reference/sparse.html)模块。

# c# - Winforms 中的 MainMenu - 未调用 onclick 函数

> ID：12848346
> 
> 赞同：0
> 
> 时间：2012-10-11T20:52:55.410
> 
> 标签：c#, winforms, events, menuitem

在我的 Designer.cs 代码中，我有一个 MainMenu，例如

```
this.mainMenu1 = new System.Windows.Forms.MainMenu(this.components);    
this.menuItemWeigh = new System.Windows.Forms.MenuItem();

//then
this.menuItemWeigh.Index = 0;
this.menuItemWeigh.MenuItems.AddRange(new System.Windows.Forms.MenuItem[] {
this.menuItemWeighReceived,
this.menuItemWeighFWD,
this.menuItemWeighANV,
this.menuItemWeighFree,
this.menuItemWeighByAdd,
this.menuItemTM,
this.menuItemFM,
this.menuItemWeighPrepQC});
this.menuItemWeigh.OwnerDraw = true;
this.menuItemWeigh.Text = "Main Menu";
this.menuItemWeigh.DrawItem += new System.Windows.Forms.DrawItemEventHandler(this.DrawCustomMenuItem);
this.menuItemWeigh.Click += new System.EventHandler(this.menuItemWeigh_Click); 
```

当我单击 menuItemWeigh 时，不会调用 onclick 例程。

发生的情况是，如果我单击 menuItemWeigh 的左侧，我会得到子菜单；单击 menuItemWeigh 的任何其他区域不会产生任何结果。

当用户单击 menuItemWeigh 上的任意位置时，如何确保显示子菜单？我正在考虑实现 onclick 例程，但它根本没有被调用。

我应该注意此菜单控件的特定内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:17:17.630

事实证明，它`MainMenu`在 3.5 中已经退役，并且`MenuStrip`是用于菜单的那个。`MainMenu`仍然有点兼容，但有怪癖。

[http://www.c-sharpcorner.com/uploadfile/mahesh/menustrip-in-C-Sharp/](http://www.c-sharpcorner.com/uploadfile/mahesh/menustrip-in-C-Sharp/)

# xpages - 获取文档对象而不是打开页面？

> ID：12848347
> 
> 赞同：0
> 
> 时间：2012-10-11T20:52:57.053
> 
> 标签：xpages

我有一个视图面板。在我的专栏的点击事件中，我有以下代码：

```
var unid = rowData.getUniversalID();
var doc:NotesDocument = database.getDocumentByUNID(unid);
getComponent("inputTextContractorName").setValue(doc.getItemValueString("Form"));
getComponent("inputTextContractorSiteSuperName").setValue(unid); 
```

我的viewPanel 的data 属性的var 属性设置为rowData。

我在视图中显示了 UNID。视图中列出的 UNID 似乎与代码中返回的内容不匹配。事实上，我列出了我所有的文档及其 UNID，但似乎没有一个与返回的内容相匹配。

Form 值是空白的，所以我猜我根本没有返回文档。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T04:04:37.847

我试图重现该问题，但无法重现。这是我使用的代码。viewColumn5 显示每个文档的 FORM 项值，由 rowData.getUniversalID() 计算得出

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">

    <xp:inputText id="inputTextContractorName"></xp:inputText>
    <xp:br></xp:br>
    <xp:inputText id="inputTextContractorSiteSuperName"></xp:inputText>
    <xp:br></xp:br>
    <xp:viewPanel rows="30" id="viewPanel1" var="rowData">

        <xp:this.data>
            <xp:dominoView var="view1" viewName="AllContacts" />
        </xp:this.data>

        <xp:viewColumn columnName="LastName" id="viewColumn3">
            <xp:viewColumnHeader value="Last Name" id="viewColumnHeader3" />

            <xp:eventHandler event="onclick" submit="true"
                refreshMode="complete">
                <xp:this.action><![CDATA[#{javascript:var unid = rowData.getUniversalID();
var doc:NotesDocument = database.getDocumentByUNID(unid);
getComponent("inputTextContractorName").setValue(doc.getItemValueString("Form"));
getComponent("inputTextContractorSiteSuperName").setValue(unid);}]]></xp:this.action>
            </xp:eventHandler></xp:viewColumn>
        <xp:viewColumn id="viewColumn4"
            value="#{javascript:rowData.getUniversalID()}">
            <xp:this.facets>
                <xp:viewColumnHeader xp:key="header" id="viewColumnHeader4" />

            </xp:this.facets>
        </xp:viewColumn>
        <xp:viewColumn id="viewColumn5">
            <xp:this.facets>
                <xp:viewColumnHeader xp:key="header" id="viewColumnHeader5" />

            </xp:this.facets>
            <xp:this.value><![CDATA[#{javascript:var unid = rowData.getUniversalID();
var doc:NotesDocument = database.getDocumentByUNID(unid);
doc.getItemValueString("Form");}]]></xp:this.value>
        </xp:viewColumn>
    </xp:viewPanel>
</xp:view>Column>
        </xp:viewPanel>
    </xp:view> 
```

# .net - 使用 Javascript 在 Windows XP 下使用 IE 检测 .NET 4.0

> ID：12848354
> 
> 赞同：1
> 
> 时间：2012-10-11T20:53:20.877
> 
> 标签：.net, internet-explorer, windows-xp

我有一个网页需要检测用户计算机上是否安装了 .NET。我并不特别关心安装的 .NET 版本。检测是通过 Javascript 完成的。各种谷歌搜索指向在用户代理字符串中寻找“.NET CLR”。这适用于几乎所有 OS/IE/.NET 组合。今天我发现一个它不起作用。

在 Windows XP SP3、IE 8 和 .NET 4.0 下，我得到以下用户代理：

```
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET4.0C; .NET4.0E) 
```

在我简单地添加对“.NET4.0”之类的检查之前，我想确认这是我应该为上面的浏览器/OS/.NET 组合获取的正确用户代理字符串。该用户代理字符串看起来正确吗？在考虑其他 Windows OS/IE/.NET 组合时，我应该寻找任何其他 .NET 标识符吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:57:55.630

NET CLR 确实是您应该寻找的。您也可以在代码内部的任何时候通过 javascript 检查它：

```
 if ((navigator.userAgent.indexOf(".NET CLR")>-1)) 
  alert ("CLR available " +navigator.userAgent);
 else
  alert(".NET SDK/Runtime is not available for us from within " + <BR>           "your web browser or your web browser is not supported." + <BR>           " Please check with http://msdn.microsoft.com/net/ for " + <BR>           "appropriate .NET runtime for your machine."); 
```

如此处所示：[检测 .net 可用性](http://www.codeproject.com/Articles/3971/Detecting-NET-Availability) 小心强硬，用户代理可以修改。即使强硬，您的普通用户也很可能不会

# jquery - 带有 jquery 的可滚动内容

> ID：12848362
> 
> 赞同：0
> 
> 时间：2012-10-11T20:53:54.263
> 
> 标签：jquery, html, web

我对 jQuery 很陌生，但我想我会试一试。所以我有一个页脚，我想在页面上保持静态。我有一个`<section>`我放了很多文字的地方。我希望这部分是可滚动的，所以在滚动时只上下移动而不是页脚。

所以到目前为止我已经想出了这个代码？

```
 $("#main").mouseover(function(){
           $('#main').scroll();
       }); 
```

这是本节的开头

```
<section id="main">
         <div id="bio">
          <div class="section_separator">.... 
```

希望我有一些意义？你们帮帮我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:56:23.920

将页脚的 CSS 设置为`position: fixed`（并且可能`bottom: 0`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:40:09.820

这是一个 CSS 问题，而不是 JQuery....

```
footer{
  position:fixed;
  bottom:0;
} 
```

但是，如果您只希望页面在不悬停在页脚顶部时滚动，这就是您想要的：

```
$('footer').hover(function(){
    $('html').addClass('scroll_disabled');
}, function(){
    $('html').removeClass('scroll_disabled');
});

$('html.scroll_disabled').on('mousewheel', function(e){
    e.preventDefault();
}); 
```

# windows-services - ServiceController 服务名称对于构造函数来说太长

> ID：12848372
> 
> 赞同：1
> 
> 时间：2012-10-11T20:54:28.113
> 
> 标签：windows-services

Oracle 似乎做了一些不应该做的事情（恕我直言）:)

我有来自 Oracle 的服务（我想，不要开枪，我只是开发人员！）

名称 = "Oracle Enterprise Pack for Eclipse NodeManager (C_Oracle_Middleware_Home_wlserver_12.1)"

全部 87 个字符。当我尝试使用 System.ServiceProcess.ServiceController.get_ServicesDependedOn() 调用确定所依赖的服务时，我收到一个异常说明

> “服务名称 Oracle Enterprise Pack for Eclipse NodeManager (C_Oracle_Middleware_Home_wlserver_12.1) 包含无效字符、为空或太长（最大长度 = 80）”

此名称也是服务的注册表项的名称。我的理解是这个属性（Win32_Service 类上的名称）应该限制为 80 个字符。

当构造函数拒绝无效但已成功安装的服务时，使用 ServiceController 类变得非常困难。-__-

我的快速解决方法是，因为我明天必须发送代码，所以我将任何服务名称截断为 80 个字符，并将其称为“Hail Mary Fix”。

你们有没有找到更好的解决方法？我无法控制 Windows 在该领域的松散程度，以及服务开发人员 (Oracle) 不遵守服务短名称的 80 字符限制。

帮帮我，欧比旺！;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-25T16:37:33.313

你可能不得不寻找另一种方法。我反编译了 ServiceController，发现了一个包含 80 个字符检查的方法。你可以使用 sc.exe 或其他东西。

```
// System.ServiceProcess.ServiceController
internal static bool ValidServiceName(string serviceName)
{
    if (serviceName == null)
    {
        return false;
    }
    if (serviceName.Length > 80 || serviceName.Length == 0)
    {
        return false;
    }
    char[] array = serviceName.ToCharArray();
    for (int i = 0; i < array.Length; i++)
    {
        char c = array[i];
        if (c == '\\' || c == '/')
        {
            return false;
        }
    }
    return true;
} 
```

# ios - iOS UIButton 文字显示不正确

> ID：12848384
> 
> 赞同：2
> 
> 时间：2012-10-11T20:55:19.393
> 
> 标签：ios, xcode, uibutton

我正在开发一个学习 iOS 编程的应用程序，它是一个简单的计算器应用程序。

nib 文件显示所有正确显示的按钮：

![笔尖文件](../Images/8147fd3ae4d9df3dacff4c50770a1ff4.png)

而当应用程序在模拟器中运行时，最后一行的按钮显示不正确。

![模拟器](../Images/d8ad003d05f6a7b21a0cf616e4cf93a9.png)

所有按钮的默认状态配置，以及设置为 15 磅系统粗体的普通字体。

我已经尝试了很多 UI 按钮属性的设置都没有效果，而且它似乎只影响底行。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T05:20:36.693

我发现如果我禁用自动布局，它可以解决问题。但是，按钮会失去它们在屏幕上的位置。但是当我重新启用自动布局时，它会按预期重新排列按钮，并且 UIButton 上的文本也会恢复。同样，我也不确定这是如何工作的，但它是 iOS 6.0 的一种解决方法。我没有尝试添加新按钮并观察此修复是否持久。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T07:05:23.983

我有一个类似的问题，我通过禁用自动布局解决了这个问题。单击故事板。在 IdentityTab 上，禁用“使用布局”。

（老实说，我不知道为什么，这行得通）

# r - 用 R 绘制人口异常

> ID：12848385
> 
> 赞同：1
> 
> 时间：2012-10-11T20:55:19.517
> 
> 标签：r

我正在处理一个大的时间序列数据，它看起来像：

```
ProcesID ProcessName  StartDate  EndDate   Duration
   10       httpd      1/1/2012   1/2/1012  12 Hours
   11       ftp        1/1/2012   1/2/1012  10 Hours
   12       snmp       1/1/2012   1/2/1012  5 Hours
   13       email      1/1/2012   1/2/1012  2 Hours
   14       java       1/1/2012   1/2/1012  5 Hours
   15       perl       1/1/2012   1/2/1012  7 Hours
   20       php        1/1/2012   1/2/1012  6 Hours 
```

unique( `x$ProcessName`) 的数量大于 500。我无法绘制每个`ProcessName`. 我想选择anamolies并绘制它们。

我确实尝试了样本：

```
 y<-x[sample(nrow(x), 50, prob = NULL),]

 ggplot(subset(x, ProcessName %in% y$ProcessName), 
       aes(StartDate, Duration, group=ProcessName)) + geom_point() 
```

我不确定`sample`执行此分析是否是正确的选择？有没有人做过类似的事情来从一个仅针对异常的人口创建图表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:15:30.033

与其说是答案，不如说是评论，我会首先查看进程运行时间超过该进程的第 75 个百分位的那些日子。这些只是虚拟数据，因此不太可能像您的数据那样“解决”问题，但您可以将其用作您自己数据的框架。我希望您会看到一些进程在特定日期运行繁重。您可能希望将数据分成 50 个进程的组，然后绘制它们。一次对所有 500 多个进行实际审查都太过分了。

如果您想将某一天与前一天进行比较，我会考虑使用该功能`diff()`。

基本上，该图表显示了每个进程在哪一天运行的时间超过了它的第 75 个百分位。

```
library(plyr)
library(ggplot2)
dat <- data.frame(ProcessID=factor(sample(1:50,10000,replace=TRUE)),
                  StartDate=as.Date(sample(1:5,10000,replace=TRUE), origin="2012-01-01"),
                  Duration=round(rexp(10000,rate=2)*6))

fourq.dat <- ddply(dat, .(ProcessID), summarize, fourq_hours = quantile(Duration)[4])
dat <- merge(dat,fourq.dat)
dat$plot <- ifelse(dat$Duration > dat$fourq_hours,1,0)

dat <- subset(dat, plot == 1)

ggplot(dat, aes(StartDate, Duration)) + geom_point() + facet_wrap(~ProcessID) 
```

# java - Spring MVC，从控制器内部调用另一个控制器

> ID：12848386
> 
> 赞同：15
> 
> 时间：2012-10-11T20:55:20.050
> 
> 标签：java, spring, spring-mvc

我正在处理使用一个控制器调用第二个控制器上的方法的现有代码。到目前为止，我已经看到了 2 个实现。

第一次实施

```
return new Controller().method(request, response); 
```

第二次实施

```
@Autowired
private Controller controller.

return this.controller.method(request, response); 
```

哪个是正确的实现，如果它们中的任何一个有什么问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-11T21:46:46.520

您需要从另一个控制器调用方法这一事实揭示了一个可能的设计缺陷。

使用选项 1，您将丢失 Spring DI 容器带给您的所有内容：即，其他控制器可能由 Spring 实例化，并带有一些其他依赖项。如果您自己实例化它，即使此时它确实有效，因为您可能没有 @Autowired / @Value 依赖项，一旦您添加对其他资源的依赖项，它就会中断。此外，您已经有一个为您构建的容器实例，为什么还要创建其他实例？

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-05-29T16:51:57.810

如果你在 Controller 之间进行调用，要么存在缺陷，要么你想进行重定向，这是完全有效的。如果重定向是这种情况，只需在您的控制器方法中返回如下：

```
return "redirect:/yourDestinationControllerPath"; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-11T21:38:16.517

听起来您需要重构代码。将两个控制器之间的共同点提取到一个单独的类中，然后从任一控制器调用它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-12T06:32:37.013

你做错了。看看`Costi Ciudatu's`有什么问题的答案。

**解决方案：**我建议您`service layer and dao layer classes`与您的`controllers`. 假设你有`AccountController`，你将有`AccountService`类（接口+实现）和`AccountDao`（接口+实现）。

现在，如果用户登录 ( `LoginController`) 并且您需要帐户以便您将自动连接`AccountService`，`LoginController`您将从`AccountService`方法中获取用户的帐户详细信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-11T21:00:32.973

第一个需要更多的工作，首先你真的想每次都创建一个新的 Controller 类实例吗？

第二种使用称为依赖注入或控制反转的模式更好。让 spring 为您管理 bean 的范围，默认情况下它只会创建 Controller 类的 1 个实例，但是如果在某些时候（出于某种原因）您不希望这种行为直接创建许多实例......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T20:58:29.473

第二个是正确的，因为您不会每次都创建它的实例。@Autowired 注释在需要时将对象注入到您的代码中。

检查这个 [http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/annotation/Autowired.html](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/annotation/Autowired.html)

但是有一个 @Controller 注释，你应该将它用于控制器，@Service 用于你想要自动装配的 bean。

# spring - Spring Webflow：如何强制流程重新开始？

> ID：12848387
> 
> 赞同：2
> 
> 时间：2012-10-11T20:55:19.717
> 
> 标签：spring, portlet, spring-webflow, spring-webflow-2

我是 SWF 新手，我意外地继承了 SWF 应用程序的维护。

用户在屏幕顶部有一个水平菜单，其中出现 5 个选项。单击其中一个时，屏幕中会加载一个 portlet。

两天前，我收到了一个任务：每当用户单击其中一个选项时，portlet 必须忽略其先前的状态并重新开始。

示例：其中一个 portlet 称为“SEARCH”，另一个称为“REPORTS”。今天，如果用户点击“搜索”，应用程序会显示一个小表单和一个“开始”按钮。单击“开始”后，应用程序会显示一个结果列表，每个结果都带有一个编辑按钮。单击编辑其中之一后，应用程序会显示所选结果的详细信息。到现在为止还挺好。

继续该示例，假设用户现在单击菜单中的“报告”选项。该应用程序将显示报告 portlet 及其自己的内容。再说一次，到目前为止，很好。

但是，如果用户现在再次单击“搜索”，portlet 将显示其最后状态，即先前搜索项目的版本。

我被要求更改此行为，因此每次用户单击“搜索”时，它将打开为空，也就是说，portlet 的 webflow 将重新从头开始。

我怎样才能做到这一点？有人可以帮我吗？

我搜索了 SMF 的文档，也研究了 spring-webflow-config-2.0.xsd 文件，为这个案例寻找了一些具体的配置，但无济于事。

谢谢，

FQL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T21:40:13.237

试试这个方法：

创建一个新的流定义 xml 文件，您应该在其中放置一组将重定向到流的结束状态，以及一组将转换为结束状态的全局转换。因此，您应该为每个菜单项添加一个结束状态和一个全局转换。

```
<end-state id="searchMenuItem" view="flowRedirect:searchFlowName" />

<end-state id="reportsMenuItem" view="flowRedirect:reportsFlowName" />    

<global-transitions>    
    <transition on="searchMenuItem" to="searchMenuItem" />      
    <transition on="reportsMenuItem" to="reportsMenuItem" />        
</global-transitions> 
```

将此流定义添加到流注册表并作为父流添加到所有流。因此，所有流都应该具有可见的最终状态和全局转换。

编辑菜单链接以使用全局转换：

```
<a href="${flowExecutionUrl}&_eventId=searchMenuItem">Search</a>   
<a href="${flowExecutionUrl}&_eventId=reportsMenuItem">Reports</a> 
```

这导致当用户单击菜单项时，其全局转换将触发，从而导致转换到最终状态并将流重定向到所需的流。

希望这可以帮助。

# html - 做一个 占据所有可见高度屏幕，其下方有内容

> ID：12848389
> 
> 赞同：3
> 
> 时间：2012-10-11T20:55:33.177
> 
> 标签：html, css

我的客户希望在她的网站主页上显示一张大图片，但她希望只有在页面加载时才能看到图片。页面的所有其余部分都应位于此图像下方，并且只有在页面滚动时才能查看。当页面首次加载时，访问者应该只看到大图像，无论他/她使用什么显示器尺寸或分辨率。

像这样的东西：

```
Screen boundary ->----------------- |
                  IMG               |
                  IMG               |
                  IMG               |
                  IMG               |
                  IMG               |
Screen boundary ->----------------- |
                  Content           |
                  Content           | <- scroll bar 
```

甚至可能吗？这是一个 Wordpress 网站，如果这些信息很重要的话。

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T21:01:46.693

你可以只用 CSS 做到这一点：

```
body, html {
  margin:0;
  height: 100%;
}
#foo {
  background-color:#ccc;
  height: 100%;
}

<div id="foo">hello. content goes here</div>
rest of my content<br /> 
```

[演示](http://jsbin.com/isakuy/1)

您可以在 div 上设置背景图像并使用各种[`background-size`](https://developer.mozilla.org/en-US/docs/CSS/background-size)属性使其看起来像您想要的那样。

# javascript - Flot：条形图阴影

> ID：12848392
> 
> 赞同：0
> 
> 时间：2012-10-11T20:55:39.610
> 
> 标签：javascript, flot

是否可以在条形图上使用阴影？我已经看到有一个选项“shadowSize”：

```
series:{
color: color or number
data: rawdata
label: string
lines: specific lines options
bars: specific bars options
points: specific points options
xaxis: number
yaxis: number
clickable: boolean
hoverable: boolean
shadowSize: number
highlightColor: color or number
} 
```

我试图改变这个值，但什么也没发生。我还尝试更改 lineWidth（“lineWidth”是以像素为单位的线条或轮廓的粗细。您可以将其设置为 0 以防止绘制线条或轮廓；这也会隐藏阴影。）在“bar”内：

```
 bars: {
            lineWidth: 0,
            barWidth: 0.2,
            align: "left",
            horizontal: true,
            show:true,
            fillColor: { colors: [ "rgb(64, 31, 33)", "rgb(55, 26, 28)", "rgb(52, 25, 27)", "rgb(102,49,52)", "rgb(102, 49, 52)", "rgb(195, 139, 143)", "rgb(87,42,45)" ] }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T15:37:05.680

我不相信酒吧有办法，在[源代码](https://github.com/flot/flot/blob/master/jquery.flot.js#L2528)中甚至对此有评论：

> // FIXME：找出一种添加阴影的方法（例如沿着右边缘）

# html - 为什么缩小浏览器窗口时无法缩小宽度图像？

> ID：12848394
> 
> 赞同：0
> 
> 时间：2012-10-11T20:55:42.327
> 
> 标签：html, image, css, responsive-design

1 为什么我缩小浏览器窗口时无法缩小宽度图像？

2 为什么图像不在中心红色 div 中？

在[jsFiddle](http://jsfiddle.net/centerwow/2uR3h/10/)我可以缩小图像（浏览器 chrome）。

![在此处输入图像描述](../Images/10f7919c8564929be5512398369f1f1c.png)

在我的[网站](http://www.centerwow.com/stackoverflow/responsive_image.html)中，我无法缩小图像（浏览器 chrome）。

![在此处输入图像描述](../Images/d16ae8dc34baf91347a4de5920f07519.png)

编码：

```
<!DOCTYPE html>
<html>
<head>

  <style type='text/css'>
    #Blue
{
position:relative;
top:0px;
left:0px;
margin:0px auto;
height: auto;
width: 97%;
z-index: 10;
background:azure;
    border:5px solid blue;

}
#Red{
    position:relative;
    margin:auto;
    width:300px;
    height:100%;
    border:5px solid red;
    padding:0;
    margin-bottom:5px;
    bottom:0;

}

#Menu{
    width:100px;
    height:20px;
    background:yellow;
    margin:auto;
    display:none;
}

img {
    top:0px;      
    position: relative;
    margin:auto;
    width: 200px; 
    height: 200px;

}
#green{}

@media (max-width: 200px) {

#Menu{
        display:inline;
        margin:1px;
        text-align:center;    
        position:static;
        width:100%;;
    }
#Menu, #Red{
    width:auto!important;
    height:auto!important;
}

 #Red, img{
    position:static;
    max-width:100%;
}
}    

  </style>
</head>
<body>
  <div id="Blue">
<div id="Menu">Menu</div>   
    <div id="Red">

        <div id="Green">
            <picture alt="description of image">

  <img src="http://www.candcsavannahs.com/images/queenpawnee2.jpg" alt="description of image">

</picture>
        </div>
    </div>
</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:02:51.597

图片标签是什么？它不是标准的 html 标签，删除它似乎可以让它工作。

```
 <div id="Green">
            <!-- <picture alt="description of image"> -->

  <img src="http://www.candcsavannahs.com/images/queenpawnee2.jpg" alt="description of image">

<!--    </picture> -->
        </div> 
```

# python - 无法使用 pip 在 rhel 5.8 上安装 ipython

> ID：12848399
> 
> 赞同：-1
> 
> 时间：2012-10-11T20:55:56.770
> 
> 标签：python, pip, ipython, python-2.4, rhel5

我正在尝试在我的 rhel 5.8 服务器上安装 ipython，但它给出了以下错误。

```
└──> sudo pip install ipython
[sudo] password for ronak: 
Downloading/unpacking ipython
  Downloading ipython-0.13.tar.gz (6.1Mb): 6.1Mb downloaded
  Running setup.py egg_info for package ipython
    Traceback (most recent call last):
      File "<string>", line 14, in ?
      File "/usr/local/home/ronak/build/ipython/setup.py", line 23
        from __future__ import print_function
    SyntaxError: future feature print_function is not defined
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "<string>", line 14, in ?

  File "/usr/local/home/ronak/build/ipython/setup.py", line 23

    from __future__ import print_function

SyntaxError: future feature print_function is not defined

----------------------------------------
Command python setup.py egg_info failed with error code 1
Storing complete log in /home/ronak/.pip/pip.log 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:12:31.277

IPython ≥ 0.11 需要 Python ≥ 2.6。该错误表明您拥有 Python 2.5。

如果你必须使用 Python 2.5，你可以这样做：

```
pip install ipython==0.10.2 
```

这是支持 Python 2.5 的最后一个版本。

# php - 创建从 linux 终端获取的内网 IP 列表数据库的最佳方法（nbtscan 或其他命令）

> ID：12848401
> 
> 赞同：0
> 
> 时间：2012-10-11T20:56:15.337
> 
> 标签：php, mysql, linux, csv, ip

我应该如何构建一个需要存储 IP（作为 INT 无符号）地址、使用它们的扇区和机器名称的数据库。它将用于快速搜索可用的 IP。众所周知，每个网络的地址不会超过 254 个，我应该用列表创建一个单独的表吗？

[编辑]

想到了另一件事。如果我现在已经知道网络将从 192.168.x.1 变为 192.168.x.254 并且有时我想查看哪个 IP 是空闲的或者哪个 IP 设置为特定的机器，我应该用地址填写表格吗然后将它们与已使用和免费的列表关联起来？

[编辑]

使用 nbtscan 后，我想我可以得到我想要的数据。命令

```
nbtscan 192.168.0.1-254 -t 20000 
```

给我：

```
Doing NBT name scan for addresses from 192.168.0.1-254

IP address       NetBIOS Name     Server    User             MAC address      
------------------------------------------------------------------------------
192.168.0.135    EREBOS           <server>  EREBOS           00-00-00-00-00-00
192.168.0.130    CHAOS                      <unknown>        00-00-00-00-00-00 
```

一个很好的结果，但是：

```
nbtscan -s , 192.168.0.1-254 -t 20000 
```

给我：

```
192.168.0.130,CHAOS          ,,<unknown>,00-00-00-00-00-00
192.168.0.135,EREBOS         ,<server>,EREBOS         ,00-00-00-00-00-00 
```

现在我正在使用：

```
<?php
header('Content-type: text/csv');
header('Content-disposition: attachment;filename=ips.csv');

include_once "conn.php";

$iprange = "192.168.0.1-254";
$timeout = 20000;
$separator = ",";

$strre = shell_exec("nbtscan -s $separator $iprange -t $timeout");
echo preg_replace('/ +/',',', $strre); 
```

生成可以导入 MySQL 的 .csv 文件。这是一个很好的解决方案吗？

我不知道为什么，但 nbtscan 给出了不同数量的列。第一行有 6 个，第二行有 7 个。太讨厌了！有谁知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:58:56.683

您是否考虑过使用 SolarWinds 的免费 IP 地址跟踪器？

[http://www.solarwinds.com/downloads/](http://www.solarwinds.com/downloads/)

我以前用过它，它很好地满足了我的需求。为什么要重新发明轮子？

# objective-c - 在 iOS 6 中学习 ARC 的资源

> ID：12848414
> 
> 赞同：3
> 
> 时间：2012-10-11T20:57:11.267
> 
> 标签：objective-c, memory-management, automatic-ref-counting

我在早期版本的 iOS 中学习了内存管理的基本概念，但现在正在考虑使用 iOS 6，并且正在努力寻找最新的文档。

如果您可以指导我查看与内存管理相关的任何 iOS 6 文档（更多针对经验不足的人，我有 Java 背景），那将非常有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:00:44.390

如果您是注册的 iOS 开发人员，请观看 WWDC 2011 视频[介绍自动引用计数](https://developer.apple.com/videos/wwdc/2011/?id=323)和[采用](https://developer.apple.com/videos/wwdc/2012/?id=406)2012 年的自动引用计数。

当然还有官方[文档](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。

# jquery - jQuery Slider 不会在这些内部设置动画 标签？

> ID：12848415
> 
> 赞同：1
> 
> 时间：2012-10-11T20:57:11.367
> 
> 标签：jquery, html, css, animation, slider

我按照在线教程构建了一个滑块，并让它自己很好地工作。但是，当我从文件中获取代码并将它们传输到我想使用它们的网站时，滑块不起作用。它不显示标题或类似的东西。

**这是Javascript：**

```
<script src="jquery-1.4.min.js" type="text/javascript" ></script>

<script type="text/javascript">
$(document).ready(function() {      

//Execute the slideShow, set 4 seconds for each images
slideShow(2000);

});

function slideShow(speed) {

    //append a LI item to the UL list for displaying caption
    $('ul.slideshow').append('<li id="slideshow-caption" class="caption"><div     class="slideshow-caption-container"><h3></h3><p></p></div></li>');

//Set the opacity of all images to 0
$('ul.slideshow li').css({opacity: 0.0});

//Get the first image and display it (set it to full opacity)
$('ul.slideshow li:first').css({opacity: 1.0}).addClass('show');

//Get the caption of the first image from REL attribute and display it
$('#slideshow-caption h3').html($('ul.slideshow li.show').find('img').attr('title'));
$('#slideshow-caption p').html($('ul.slideshow li.show').find('img').attr('alt'));

//Display the caption
$('#slideshow-caption').css({opacity: 0.7, bottom:0});

//Call the gallery function to run the slideshow    
var timer = setInterval('gallery()',speed);

//pause the slideshow on mouse over
$('ul.slideshow').hover(
    function () {
        clearInterval(timer);   
    },  
    function () {
        timer = setInterval('gallery()',speed);         
    }
    );

}

function gallery() {

//if no IMGs have the show class, grab the first image
var current = ($('ul.slideshow li.show')?  $('ul.slideshow li.show') : $('#ul.slideshow li:first'));

//trying to avoid speed issue
if(current.queue('fx').length == 0) {

    //Get next image, if it reached the end of the slideshow, rotate it back to the first image
    var next = ((current.next().length) ? ((current.next().attr('id') == 'slideshow-caption')? $('ul.slideshow li:first') :current.next()) : $('ul.slideshow li:first'));

    //Get next image caption
    var title = next.find('img').attr('title'); 
    var desc = next.find('img').attr('alt');    

    //Set the fade in effect for the next image, show class has higher z-index
    next.css({opacity: 0.0}).addClass('show').animate({opacity: 1.0}, 1000);

    //Hide the caption first, and then set and display the caption
    $('#slideshow-caption').slideToggle(300, function () { 
        $('#slideshow-caption h3').html(title); 
        $('#slideshow-caption p').html(desc); 
        $('#slideshow-caption').slideToggle(500); 
    }); 

    //Hide the current image
    current.animate({opacity: 0.0}, 1000).removeClass('show');

    }

}
</script> 
```

**这是 HTML 代码**

```
<div id="masthead-wrapper">
    <div id="masthead"></div>
</div>
<div id="navbar-wrapper">
<div id="navbar-left"></div>
<div id="navbar">
    <ul class="nav">
        <li class="navitem"><a href="#">HOME</a></li>
        <li class="navitem"><a href="#">OUR STORY</a></li>
        <li class="navitem"><a href="#">CATERING</a></li>
        <li class="navitem"><a href="#">WHOLESALE</a></li>
        <li class="navitem"><a href="#">CONTACT US</a></li>
    </ul>
</div>
<div id="navbar-right"></div><!-- END NAVIGATION -->
</div>
<div style="clear:both;"></div>
<div id="main-wrapper">
    <div id="main">

        <div id="content">
            <!-- SLIDER -->
            <div id="slider-container">

            <ul class="slideshow">
                <li class="show"><a href="#"><img src="slide-1.jpg" width="618" height="246" title="Delicious Desserts" alt="something funny." /></a></li>
                <li><a href="#"><img src="slide-2.jpg" width="618" height="246" title="Slide 2" alt="Something funny." /></a></li>
                <li><a href="#"><img src="slide-3.jpg" width="618" height="246" title="Slide 3" alt="Something funny." /></a></li>
            </ul>
            </div>

            <!-- END SLIDER -->
        </div><!-- END CONTENT -->
    </div><!-- END MAIN -->
</div><!-- END MAIN WRAPPER -->

<div id="footerwrapper">
<div id="footer"></div>
</div> 
```

**最后，CSS**

```
ul.slideshow {
list-style:none; 
width:618px;
height:246px;
overflow:hidden;
position:relative;
margin:0 auto;
padding:0;

}   

ul.slideshow li {
position:absolute;
left:0;
right:0;
}

ul.slideshow li.show {
z-index:500;    
}

ul img {
border:none;    
}

#slideshow-caption {
width:300px;
height:40px;
position:absolute;
bottom:0;
left:0; 
color:#fff;
background:#000;
z-index:500;
margin-bottom: 20px;
margin-left: 20px;
}

#slideshow-caption .slideshow-caption-container {
padding:5px 10px;   
z-index:1000;   
}

#slideshow-caption h3 {
margin-top:5px;
margin-bottom: 5px;
margin-left: 10px;
padding:0;  
font-size:18px;
}

#slideshow-caption p {
margin:5px 0 0 0;
padding:0;
} 
```

我觉得对于我没有得到的问题有一个非常简单的解决方案。有谁可以帮我离开这里吗？这将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:16:44.727

您的问题是这条违规行：

```
timer = setInterval('gallery()',speed); 
```

它应该是：

```
timer = setInterval(gallery,speed); 
```

这是它的实际操作（没有图片）：

[http://jsfiddle.net/cFbAd/2/](http://jsfiddle.net/cFbAd/2/)

这是因为[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)需要对函数的引用，而不是字符串。

# php - 如何通过 DOMDocument 方法仅输出开始标记

> ID：12848424
> 
> 赞同：0
> 
> 时间：2012-10-11T20:58:24.070
> 
> 标签：php, domdocument

我正在使用[DOMDocument](http://php.net/manual/en/class.domdocument.php)打印一些 HTML，并且试图弄清楚如何在不打印结束标签的情况下打印开始标签。是否可以只提取开始标签？

```
$d = new DOMDocument;
$e = $d->createElement('div');
$e->setAttribute('class', 'example');
$d->appendChild($e);
echo $d->saveHtml(); // <div class="example"></div> 
```

我怎样才能让它**只**输出开始标签（不使用`preg_replace`）？

```
<div class="example"> 
```

# iphone - iPhone TableView 表头行为自定义

> ID：12848426
> 
> 赞同：1
> 
> 时间：2012-10-11T20:58:42.633
> 
> 标签：iphone, uitableview, header, position, docking

任何人都知道自定义 TableView 标头对接行为的方法，或者这样做的框架？

具体来说，如果您打开 iPod 应用程序，您会注意到在您的艺术家列表中，信头停靠在顶部。然后，当您进一步向下滚动时，下一个标题会将第一个标题“向上推”。

这个小机制可以很有创意地使用：例如，假设您有一个充满内容的 tableview。内容有两种“模式”，因此您需要在表格视图顶部使用分段控件，这将切换单元格中内容的行为。然后，您还希望在屏幕顶部有一些装饰性的东西——比如徽标。

一种有趣的方法是使徽标成为标题，而分段控件则位于不同的标题中。logoHeader 将是第 0 节的标题，segmentedHeader 将是第 1 节的标题。第 0 节将没有单元格（或者如果 UITableView 对此尖叫，您可以添加 0px 或 1px 行），而第 1 节将包含您的所有内容。所以，有点像这样：

* * *

标志标题

* * *

段控制标头

* * *

内容

* * *

内容

* * *

内容

* * *

内容

* * *

内容

* * *

（SO 的格式化功能阻止了我的 ASCII 艺术作品看起来完全符合我的预期，但这很好。）

那么，这有什么作用呢？好吧，整个屏幕都响应滚动，因为它都是一个表格视图。但是，虽然 logoHeader 会离开屏幕，但 segControlHeader 会停靠在顶部，其余内容将在它后面传递。这只是一个有趣的对接效果，通过良好的设计和艺术品，您可以创造出整洁的效果。

现在，当您的设计师想要将其提升到一个新的水平时，问题就来了。“这应该停靠在这里，这应该停靠在这里，当您打开视图（如搜索栏）时，这个东西将开始部分隐藏在表格视图的边界之外”等。内容中的其他标题需要在那里并停靠， 等等。

无论如何，您可以使用这些对接效果进入一系列复杂性，并且几乎立即 tableview 变得不够用。有谁知道这样做的好方法，或者某种可以完成相同行为的框架？

也许最简单的方法是使用滚动视图，读取 contentOffset，然后在内容视图中相应地重新定位内容，MIN-ed 或 MAX-ed 到滚动视图中的特定范围？

# xcode - Xcode 为某些 9B206 设备构建，但不适用于其他设备

> ID：12848435
> 
> 赞同：1
> 
> 时间：2012-10-11T20:59:26.753
> 
> 标签：xcode, ios5, compilation, unity3d

我在 Snow Leopard OSX 上使用 Xcode 4.2 版，但遇到以下问题：

我可以编译代码并在三个安装了 iOS5.1.1(9B206) 的不同 iPad 上正常运行。但是，当我在安装了相同 iOS 的另一台 iPad 或另一台 iPhone 上尝试时，它会给我以下错误：

““iPad”上的 iOS 版本与本次安装 iOS SDK 时支持开发的任何 iOS 版本都不匹配。请将设备恢复到下面列出的操作系统版本，或更新到最新版本的iOS SDK；可在此处获得。

安装在 iPad 5.1.1 (9B206) 上的操作系统

Xcode 支持的 iOS 版本 最新 5.0 (9A334) 4.3 4.2"

尽管它已经为其他 9B206 设备成功构建。有谁知道如何解决这一问题？

# c++ - 在构造函数中初始化数组或向量

> ID：12848436
> 
> 赞同：3
> 
> 时间：2012-10-11T20:59:35.297
> 
> 标签：c++, arrays, class, vector, constructor

假设包含正确的标题。

我有一个关于计算器各种功能的课程。我有几个用于不同运算符类型（nullary、Unirary、Binary、Ternary）的结构。我想初始化结构的一个向量（或者最好是一个数组），其中填充了我的计算器支持的元素。例如，`nul[]={{pi, "pi"}, {ans, "ans"}};`我的程序将从输入中获取一个标记并搜索适当的运算符，返回该运算符的索引，然后我将调用适当的函数指针。我的问题是在构造函数中初始化数组或向量。如果有人可以向我展示两种方式，我将不胜感激。谢谢你。下面是我的班级和未完成的构造函数。另外，如果你能想出一个更好的方法让我写我的计算器，我很想听听。

```
//operator class
class Functions{
    public:
        Functions();
        double pi(double x=0);
        double answer(double& x);
        double abs(double& x);
        double pow(double& x);
        double add(double& x, double &y) const;
        double subtract(double& x, double& y) const;
        double multiply(double& x, double& y)const;
        double divide(double& x, double& y) const;
        double max(double& x, double& y, double& z) const;
        double volume(double& x, double& y, double& z) const;
        void doc();
        bool weird(double &x) const;
        unsigned findop0(const string & name);
        unsigned findop1(const string & name);
        unsigned findop2(const string & name);
        unsigned findop3(const string & name);
    private:
        struct Nul{
            double (*nulf)(double & x);
            string name;
        };
        struct Uni{
            bool (*unif)( double & result, double x );
            string name;
        };
        struct Bin{
            bool (*binf)( double & result, double x, double y );
            string name;
        };
        struct Tern{
            bool (*terf)( double & result, double x, double y, double z );
            string name;
        };
        static const unsigned NUL_ELEMENTS = 2;
        static const unsigned UNI_ELEMENTS = 2;
        static const unsigned BIN_ELEMENTS = 4;
        static const unsigned TRI_ELEMENTS = 2;
        vector<Nul> nul;
        vector<Uni> uni;
        vector<Bin> bin;
        vector<Tern> tri;
};

Functions::Functions(){
    nul
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:10:25.697

在 C++11 中，您可以在初始化列表中的一行中执行此操作。

```
struct C {
  int a[20];
  int* b;
  std::vector<int> c;
  std::array<int,20> d;
  C() : 
     a({1,2,3}), 
     b(new int[20]{1,2,3}), 
     c({1,2,3}), 
     d(std::array<int, 20u>{1,2,3}) 
  {}
}; 
```

在 C++03 中使用多行赋值或使用静态函数来初始化向量或原始数组。

```
struct C {
  int a[20];
  int* b;
  std::vector<int> c;
  C() : 
     b(new int[20]), 
  {
     a[0] = 1; ...
     b[0] = 1;
     c.push_back(1);
  }
}; 
```

# google-app-engine - 将裸域映射到 Google App 的最新信息

> ID：12848438
> 
> 赞同：6
> 
> 时间：2012-10-11T20:59:48.283
> 
> 标签：google-app-engine

我创建了一个新应用程序，并且能够将 www.sitename.com 映射到我的谷歌应用程序。曾几何时，您还可以在谷歌应用程序域管理员（即 sitename.com）中**“重定向裸域”**名称，但这在管理控制台中似乎不再可行。现在缺少执行此操作的按钮。有什么想法吗？

当我调用 www.sitename.com 地址时，我可以毫无问题地启动该站点，但是如果我请求 sitename.com，我会从 GAE 收到一个 404 错误页面。

我尝试使用指向 google 的裸域设置 A 记录，但这似乎不起作用。

甚至可以为谷歌应用程序创建一个裸域。我可以尝试其他任何想法吗？最近有没有其他人遇到过这个问题？

我正在使用 Netfirms，他们也为我的域提供 DNS。我似乎没有在 Netfirms 上进行 url 转发。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T19:05:57.843

可以通过三个步骤设置对 App Engine 的裸域（例如*yourdomain.com ）支持：*

1.  设置裸域重定向到您选择的子域（例如重定向*mydomain.com* -> *www.mydomain.com*）。请参阅[App Engine 常见问题解答](https://developers.google.com/appengine/kb/general?hl=en#naked_domain)，其中指导您[通过 Google Apps 控制面板](http://support.google.com/a/bin/answer.py?hl=en&answer=2518373)为您的域配置重定向。

2.  配置 App Engine 以通过 Google Apps 控制面板为您的自定义子域（例如*www.yourdomain.com ）*[提供流量。](https://developers.google.com/appengine/articles/domains)

3.  （可选）[为您的自定义域设置 SSL](https://developers.google.com/appengine/docs/ssl)。*如果您要为https*流量提供服务，则此步骤是必需的，但如果您只是计划，则不需要

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T05:16:58.610

刚刚发现我正在尝试为 Appengine 设置的新域的链接丢失。

希望谷歌让链接重新出现，否则你需要一个可以为你做转发的地方的网络服务器。

*   设置 DNS A 记录以将 example.com 指向您的 Web 服务器的 IP 地址。
*   配置您的网络服务器以将 example.com 永久重定向到 www.example.com。这将取决于您的 Web 服务器 - 对于 Apache，将虚拟主机文件添加到可用站点，如下所示：

    ```
    <VirtualHost *>
        Redirect permanent / http://www.example.com/
        servername example.com
        ServerAdmin webmaster@example.com
        ErrorLog /var/log/apache2/error.log
        CustomLog /var/log/apache2/access.log combined
    </Virtualhost> 
    ```

    谷歌了解您的网络服务器的更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-03T15:52:40.470

这就是我正在做的事情。我从 mediatemple 购买了一个域名（仅此而已）。我想要一个裸 URL 重定向（example.com -> www.example.com），但只有当您的网站是从 www.example.com 提供时，GAE 的裸 URL 重定向才有效。就我而言，我的网站/应用程序实际上是由 GAE 本身提供的，因此裸 URL 重定向将不起作用（请参阅本页顶部的小警告段落：http: [//support.google.com/a/bin /answer.py?hl=en&answer=2518373](http://support.google.com/a/bin/answer.py?hl=en&answer=2518373) )

但是，此链接 ( [http://bit.ly/10zA67m](http://bit.ly/10zA67m) ) 上的 stackoverflow 答案将我指向 wwwizer.com，这是一项允许简单的裸 url 重定向的免费服务。我只是设置它，它似乎很简单。我还不确定它是否正常工作（我刚刚在几分钟前更新了 dns 区域文件），但如果它最终正常工作，这项服务将对我有很大帮助。

几个小时后更新，wwwizer.com 提供的裸 url 重定向正在工作。甜的！可靠性待定，但我充满希望。

# c# - 如何在 WinForms 中设置 DataGrid 的行高？

> ID：12848440
> 
> 赞同：0
> 
> 时间：2012-10-11T21:00:10.617
> 
> 标签：c#, winforms, datagrid, .net-3.5

如何在 DataGrid 中设置行高？我看不到任何地方可以实现这一目标。我正在使用 .NET 3.5，它是一个用 C# 编写的 WinForms 应用程序。

已编辑

这是分配数据源的一段代码，您可以看到我在此之前设置了首选高度

```
 dgMyGrid.PreferredRowHeight = 64;

        dgMyGrid.DataSource = samples; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:23:03.307

如果我没记错的话，有一个名为 PreferredRowHeight 的属性。应该在数据绑定之前设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T04:06:22.587

史蒂夫的回答有效：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        dataGrid1.PreferredRowHeight = 64;
        myTableAdapter.Fill(myDataSet.myTable);
    }
} 
```

将生成一个高度为 64 行的网格。但是，这不起作用：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        myTableAdapter.Fill(myDataSet.myTable);
        dataGrid1.PreferredRowHeight = 64; // has no effect because the grid is already drawn
    } 
```

# python - 为什么这个程序会重演？

> ID：12848441
> 
> 赞同：1
> 
> 时间：2012-10-11T21:00:13.347
> 
> 标签：python

我正在尝试从[LPTHW](http://www.learnpythonthehardway.org)的练习 36 中获得一个游戏来工作。

我可以让游戏的整个部分正常工作，除非它进入战斗。这就是我认为问题所在。

```
def combat_engine():    
    global wins, hit_points, current_hp
    if monster_current_hp or current_hp > 0:
        print "You can type 'a' for attack, or 'q' for quit, choose one."
        answer = raw_input(":> ")
        if 'a' in answer:
            attack(monster)
            attack('player')
            combat_engine()
        elif 'q' in answer:
            print t.white_on_red("You give up and are devoured by the %s.") % monster
            exit(0)
        else:
            print "I dont understand %s." % answer
            next()
            combat_engine() 
    elif monster_hp == 0:
        print "You defeated the %s, congradulations %s!" % monster, name
        wins = wins + 1
        if wins == 5:
            you_win()
        elif victim == 'player':
            hit_points = hit_points + d6()
            current_hp = hit_points
            print "You feel hardier."
            next()
            barracks()
    elif current_hp == 0:
        print "You have been deafeted by the %s, better luck next time." % monster
        next()
        exit(0)

    else: 
        print "Bug Somewhere" 
```

我相信这个错误是在这个函数的某个地方。当我打印出每个角色的HP值时，怪物已经减少到-2 hp后战斗仍在继续。也许这是布尔值的问题？

我希望它做的是要么为获胜而进行所有的统计调整，如果你输了就退出游戏。我只是想克服这个问题，这样我就可以开始学习类和字典，这应该会让我的生活更轻松。如果我应该发布更多信息，请告诉我，我是新手，还不是在这里发布问题的最佳人选。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:40:11.867

`if monster_current_hp or current_hp > 0:`在两个方面存在缺陷：首先，它只是测试 Monster_current_hp 是否评估为 true，而不是针对 0 进行测试；其次，即使该问题已修复，如果任一战斗机具有正 HP，该语句仍将继续程序，而当任一战斗机具有负 HP 时，您可能想停止。试试这个：`if monster_current_hp > 0 and current_hp > 0:`

一旦你这样做了，在大多数情况下，你将开始进入“某处的错误”行。这是因为当 HP 直接从正面变为负面`elif monster_hp == 0:`时`elif current_hp == 0:`不会触发。`<=`在这两种情况下都使用以捕获 HP 为负数的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:10:46.540

在代码的最后一部分中，您不调用函数**d100()**，而是调用值 d100。这肯定不是你想要做的。

```
 if d20() >= monster_to_hit and d100() <= monster_crit:
        print "The %s scored a critical hit against you!" % monster
        hit_points = hit_points - (monster_dmg * 3)
        next()
    elif d20 >= monster_to_hit and d100() > crit:
        print "The %s strikes you!"
        hit_points = hit_points - monster_dmg
        next() 
```

在python中调试时，主要是“打印”。您应该尽可能多地打印，以便了解发生了什么。

例子：

```
# attack function
def attack(victim):
    dice20 = d20()
    dice100 = d100()

    print "victim == monster", victim == monster    

    print dice20
    print dice100
    print to_hit
    print crit
    print monster_current_hp
    print mod_dmg 
    print mod_dmg * 3
    print monster_to_hit
    print monster_crit
    print hit_points
    print monster_dmg
    print monster_dmg * 3

    global monster_current_hp, current_hp, to_hit, crit, hit_points
    if victim == monster:
        if dice20 >= to_hit and dice100 <= crit:
            print "You scored a critical hit against the %s!" % monster
            monster_current_hp = monster_current_hp - (mod_dmg * 3)
            next()
        elif dice20 >= to_hit and dice100 > crit:
            print "You strike the %s!" % monster
            monster_current_hp = monster_current_hp - mod_dmg
            next()
        else:
            print "The %s evades your attack!" % monster
            next()
    else:
        if dice20 >= monster_to_hit and dice100 <= monster_crit:
            print "The %s scored a critical hit against you!" % monster
            hit_points = hit_points - (monster_dmg * 3)
            next()
        elif dice20 >= monster_to_hit and dice100 > crit:
            print "The %s strikes you!"
            hit_points = hit_points - monster_dmg
            next() 
```

在战斗引擎中做同样的事情，以看到无限循环出现。然后删除那些用无用信息使你的跟踪膨胀的无用打印，直到你清楚地看到它循环的原因，因为某些值，因为布尔 if 测试的行为不符合你的预期......类似的事情。

# c++ - 没有指针的动态数组c ++

> ID：12848445
> 
> 赞同：0
> 
> 时间：2012-10-11T21:00:21.323
> 
> 标签：c++, dynamic-memory-allocation

是否可以在不显式使用指针的情况下在 C++ 中创建动态数组（int array[] 而不是 int* array）？

IE。像这样的东西：

```
int size = 5;
int array[];

array = new int{size};

for (int i = 0; i < size; i++)
{
    array[i];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:08:51.983

是的，当然，这是可能的：

```
#include <iostream>
int main()
{
    [](int array[] = new int[10]) {
        std::cout << "array = " << array << "\n";
        delete[] array;
    }();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:02:23.237

简而言之，没有。编译器需要知道数组的大小，因此要在 c++ 中使用堆栈分配的数组，必须在声明中指定。我建议您改为查看[STL Vector类。](http://www.cplusplus.com/reference/stl/vector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T21:03:53.610

`int array[];`必须具有自动存储持续时间（在函数或类范围内）并且不能具有动态存储持续时间。

您可以将指针隐藏在类中，例如`std::vector<int>`.

你可以做类似的事情

```
int (&array)[5] = reinterpret_cast<int(&)[5]>(*new int[5]); 
```

删除：`delete [] array;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T21:07:46.847

您可以使用[参考](http://ideone.com/4bxvT)来做到这一点：

```
#include <iostream>
using namespace std;

int main()
{
   int& val = *(new int[2]);
   val = 1;
   *(&val + 1) = 2;

   cout << val << ' ' << *(&val+1)  << '\n';

   delete [] (&val);

   return 0;
} 
```

但是正如你所看到的，这不是很可读，而且*很*容易出错。最好的办法是只使用`std::vector`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T21:10:46.113

不，但您可以使用`std`库中的动态类型，例如`std::vector`.

`std::vector`与数组非常相似的类型。

看看这个[std::vector](http://www.cplusplus.com/reference/stl/vector/)。

# ios - iOS：如何在静态图像上添加动态按钮？

> ID：12848453
> 
> 赞同：0
> 
> 时间：2012-10-11T21:01:09.897
> 
> 标签：ios, uiimageview, uibutton

我最近继承了一个 iPad 项目，它基本上是一个图像/演示文稿查看器。选择用户希望查看的演示文稿后，该应用程序基本上会一张一张地显示图像，当用户向上或向下滑动，或者当他们点击屏幕角落的箭头之一时，图像会发生变化。但是，演示文稿中的一些图像有分页点，它们的两边都有箭头。图像是按顺序排列的，当您从一个滑动到下一个时，点会移动。我们的客户希望能够使用作为静态图像一部分的点和箭头进行导航。这意味着当他们击中一个点时，它会将他们带到适当的页面。

这个应用程序的早期、早期、原始版本有一个巨大的 plist 文件，其中包含应用程序中所有图像的信息，包括是否有这些轮播视图，以及它们会去哪里。现在这种情况早已不复存在，应用程序中的图像/演示文稿比当时多得多。

有没有更好的方法来确定在哪里听触摸？或者我应该辞职写一个文本文件，并且知道当内容发生变化时我必须编辑它？我被告知内容不应该经常更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:45:52.713

您需要创建图像到点位置的映射，并在图像符合查看条件时动态执行此操作，并在图像超出范围时将其删除。如果您使用的是 UIImageViews，则可以为此使用标签字段，如果不是 - 如果使用原始 CGImageRefs 或 UIImages 也可以。

您创建一个 mutableDictionary，并使用键映射到图像。如果是 UIImageView，这可以是代表标签的 NSNumber，如果是图像，则可以使用设置为图像地址的 NSValue 对象。当图像进入范围时，您向字典中添加一个条目，该条目具有图像键，以及单个 NSNumber 来标识点位置，或者是命中矩形的字符串表示（回想一下，您可以将 CGRects 转换为字符串，反之亦然与 NSStringFromCGRect() 等）。

当您点击图像时，您会获得相关图像的键，从可变字典中请求定位器，并允许或禁止它。您将需要知道图像在任何容器中的帧，因为正在执行点击识别的任何内容可能不是图像本身，因此您可以获得本地图像偏移量。

# java - 在子串中对子串进行排序

> ID：12848454
> 
> 赞同：2
> 
> 时间：2012-10-11T21:01:11.407
> 
> 标签：java, string, comparator, sortedmap

我正在查看文件名日志以及它们在指定日期的最后修改时间。它的内容如下所示：

```
(comment:file_02389.txt,lastmodified:Wed Oct 10 19:10:49)
(comment:file_02342.txt,lastmodified:Wed Oct 10 17:16:08)
(comment:file_02315.txt,lastmodified:Wed Oct 10 18:45:12)
(comment:file_02344.txt,lastmodified:Wed Oct 10 08:31:01) 
```

日志以单个字符串的形式给出，没有换行符。我想解析字符串以找到最近修改的文件，即在这种情况下具有最新日期，因此 file_02389.txt。每个“注释”的字符长度是恒定的，尽管假设将来可能会发生变化，并且如果同一文件被多次修改，文件名将不会是唯一的。

**是否有一种最可扩展/可维护的方式来查找最新文件？执行时间和内存不是重要的因素。主要关注的是初学者程序员可以理解和使用代码。**

我的第一个想法是将字符串拆分为可以使用自定义比较器排序的列表。我认为这很简单但不可扩展：

```
{//given String log
...
//setup
List<String> temp = Arrays.asList(log.trim().split("\\(comment\\:")); //too complex for one line?
//the first entry is blank so it must be removed else a substring() call will fail
if(temp.get(0).equals(""))
    temp.remove(0);
int period = full.get(0).indexOf('.');
int colon = full.get(0).indexOf(':');

//process
Collections.sort(temp, DATE);
return test.get(test.size()-1).substring(0, period)) //last entry is the most recent
}

public final Comparator<String> DATE = new Comparator<String>()
{
public int compare(String s1, String s2)
    {
        return s1.substring(28).compareTo(s2.substring(28));
    } 
}; 
```

它可以工作，但使用取决于行长的子字符串和仅在这种情况下有用的比较器。我不喜欢使用 .split 然后不得不删除第一个条目，但如果可以的话，我想避免使用真实且难以理解的正则表达式。将日期视为字符串而不是作为整数或日期对象进行比较似乎不可取，但可以节省代码行。

我目前使用一个排序的地图，它避免创建一个具有随机数字的一次性比较器，但一个专门的地图对于我正在尝试做的事情来说似乎相当复杂。我仍然认为这比为文件名创建一个数组，为时间创建另一个数组，然后为复制时间创建第三个数组要好，这样可以对时间数组进行排序，并将其最后一个值与副本中的相应索引进行比较。

```
{
...
//same setup as before
//process
//key is time, value is file name
SortedMap<String, String> map = new TreeMap<String, String>();
for(String s : temp)
    map.put(s.substring(colon+1), s.substring(0, period));
//the value to which the last key is mapped is guaranteed to be the most recent file
return map.get(map.lastKey()); //too complex for one line?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:08:05.523

我对其他人的建议很感兴趣，但我的第一直觉是将您的原始字符串转换为 json 数组（带有一些替换查询）。然后，您可以反序列化该 json 并立即获取对象实例列表，每个实例都有两个属性，注释和日期。

您可以为这些对象设置一个比较器，以便按照您想要的方式对列表进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T21:55:09.293

像这样的东西会起作用吗？基本上从每一行中解析日期，构建一个“对”对象的集合，这样我就可以根据日期对集合进行排序。

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Date;
import java.util.List;

public class Parse {

    /**
     * @param args
     * @throws ParseException 
     */
    public static void main(String[] args) throws ParseException {
        StringBuilder sb = new StringBuilder();
        sb.append("(comment:file_02389.txt,lastmodified:Wed Oct 10 19:10:49)").append("\n");
        sb.append("(comment:file_02342.txt,lastmodified:Wed Oct 10 17:16:08)").append("\n");
        sb.append("(comment:file_02315.txt,lastmodified:Wed Oct 10 18:45:12)").append("\n");
        sb.append("(comment:file_02344.txt,lastmodified:Wed Oct 10 08:31:01)").append("\n");

            //create a date format that can parse dates formatted in the file
        SimpleDateFormat sdf = new SimpleDateFormat("EEE MMM dd HH:mm:ss");

            //read the file into an array of lines (or read one line at a time)
        String[] lines = sb.toString().split("\n");

            //create an array of pair objects to hold the line as well as the date
        List<Pair> list = new ArrayList<Pair>();

        for(int i=0;i<lines.length;i++){
                    //get the date component of the line
            String dateString = lines[i].substring(lines[i].length()-20, lines[i].length()-1);

            Pair pair = new Pair();
            pair.date = sdf.parse(dateString); 
            pair.line = lines[i];
            list.add(pair);
        }
        Collections.sort(list);
        System.out.println(list.get(list.size()-1).line);
    }
}
class Pair implements Comparable<Pair>{

    public Date date;
    public String line;

    @Override
    public int compareTo(Pair o) {
        return date.compareTo(o.date);
    }

} 
```

# capistrano - 如何设置 Capistrano 的 copy_exclude 以排除所有 .svn 文件夹

> ID：12848456
> 
> 赞同：3
> 
> 时间：2012-10-11T21:01:21.240
> 
> 标签：capistrano

在 Capistrano 中，我怎样才能设置`copy_exclude`所有`.svn`文件夹（递归）不会被复制和部署？

注意：我没有使用`svn:export/checkout`. 我正在使用 Capistrano 复制本地 SVN 结帐以将其部署到服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:55:16.057

你可以像这样使用[Ant 风格的递归语法](https://ant.apache.org/manual/Types/fileset.html)：`**/.svn`

# sql-server - 使用 SQL Server 2008R2 Web 将 CSV 批量插入带有标识列的表

> ID：12848462
> 
> 赞同：0
> 
> 时间：2012-10-11T21:02:00.197
> 
> 标签：sql-server, sql-server-2008-r2, bulkinsert

我有一个 CSV 文件，我想将它批量插入到与目标表具有完全相同列的表中，*除了*目标表也有一个标识列作为主键。CSV 文件缺少该标识列。

阅读 MSDN，如果我必须使用 FORMATFILE 参数

> 数据文件包含的列多于或少于表或视图

和状态

> 格式文件描述包含使用 bcp 实用程序创建的存储响应的数据文件

[http://msdn.microsoft.com/en-us/library/ms188365.aspx](http://msdn.microsoft.com/en-us/library/ms188365.aspx)

“bcp”是否与 SQL Server 导入/导出向导相同？如果没有，我在哪里可以找到它？

我注意到 SQL Server 导入/导出向导不允许将导入规则保存在 Express、Web 或 Workgroup 版本中。如果这确实是我应该用来构建 FORMATFILE 的工具，我有什么选择吗？

有没有比使用 FORMATFILE 完成任务不同/更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:18:29.780

Well, to answer one question, BCP is a command line tool which you will find in the bin directory of the installation. BCP is able to insert a lot data the fast way, it is a bulkcopy program. To be able to keep the identity column intact you can you use the -E parameter.

However, you will have to use a formatfile, which you can create the BCP utility!

# asp.net-mvc - MVC远程验证，参数为空

> ID：12848464
> 
> 赞同：6
> 
> 时间：2012-10-11T21:02:13.160
> 
> 标签：asp.net-mvc, asp.net-mvc-3, remote-validation

```
public class UserModel
    {
        public LogOnModel LogOnModel { get; private set; }
        public RegisterModel RegisterModel { get; private set; }
    } 
```

在我的 RegisterModel 我有这样的电子邮件地址：

```
[RegularExpression(@"^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$")]
        [Required]
        [Display(Name = "E-mail")]
        [Remote("IsEmailAddressAvailable", "Validation", HttpMethod = "POST")]
        public string EmailAddress { get; set; } 
```

我的验证控制器：

```
public class ValidationController : Controller
    {
        public JsonResult IsEmailAddressAvailable([string emailAddress)
        {
            return Json(false, JsonRequestBehavior.AllowGet);

        }
} 
```

视图@Model 是UserProfile，ValidationController 中的emailAddress 为空。

我试图将 ValidationController 更改为如下所示，但没有运气：

```
public class ValidationController : Controller
    {
        public JsonResult IsEmailAddressAvailable([Bind(Include = "EmailAddress")]RegisterModel register)
        {
            return Json(false, JsonRequestBehavior.AllowGet);

        }

    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T21:43:53.393

Your thinking about using *Bind* attribute is correct. Instead using *Include* parameter, you should use *Prefix* parameter. So your controller should look:

```
public class ValidationController : Controller
    {
        public JsonResult IsEmailAddressAvailable([Bind(Prefix = "RegisterModel.EmailAddress")]string EmailAddress)
        {
            return Json(false, JsonRequestBehavior.AllowGet);

        }
    } 
```

So Prefix parameter binds parameter sent by browser with action parameter.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T16:59:18.737

我怀疑这是一个模型绑定问题。尝试将动作签名更改为以下内容：

```
public class ValidationController : Controller
{
    public JsonResult IsEmailAddressAvailable([Bind(Prefix="RegisterModel")]string emailAddress)
    {
        return Json(false, JsonRequestBehavior.AllowGet);
    }
} 
```

请注意`[Bind(Prefix="RegisterModel")]`，这与您在后一次尝试中尝试做的事情有点相似，所以我认为您走在正确的轨道上。我基本上是从[这里](https://stackoverflow.com/a/4985495/437456)发布的一个非常相似的答案中提取出来的，所以如果这对你不太有用，也许这条线索可以进一步帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T05:13:13.093

我想到的原因是，当您使用另一个模型（RegisterModel）作为另一个模型的属性（UserModel）时，当您使用`Html`帮助器渲染模型属性时

```
@Html.TextBoxFor(x=>x.RegisterModel.EmailAddress) 
```

它会使它像

```
<input type="text" name="RegisterModel.EmailAddress"/> 
```

MVC**模型绑定**适用于名称属性，您`string emailAddress`在第一个示例中接收，`RegisterModel model`在第二次尝试中，尝试使用`UserModel model`远程验证 ActionResult 的接收参数，例如

```
public JsonResult IsEmailAddressAvailable(UserModel model)
        {
            return Json(false, JsonRequestBehavior.AllowGet);

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T21:57:18.727

您必须在验证器中返回 true（验证通过）或错误消息字符串。见这里： http: [//msdn.microsoft.com/en-us/library/gg508808 (v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/gg508808(v=vs.98).aspx)

```
public class ValidationController : Controller {
    public JsonResult IsEmailAddressAvailable(string EmailAddress) {
        return Json("Email Address unavailable", JsonRequestBehavior.AllowGet);
    }
} 
```

# c# - 从模型绑定器访问模型上的所有验证规则和验证元数据

> ID：12848468
> 
> 赞同：2
> 
> 时间：2012-10-11T21:02:40.927
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, data-annotations, fluentvalidation

我正在尝试构建一个自定义模型绑定器，继承自`DefaultModelBinder`. 在这个实现中，我想访问验证规则元数据（来自 FluentValidation），因为它们包含我需要[覆盖`ModelState`错误消息](https://stackoverflow.com/questions/646270/asp-net-mvc-custom-validation-message-for-value-types/2698899#2698899)的信息。

请注意，该链接中的答案对我没有帮助，因为我没有使用资源来验证消息。消息存储在 FluentValidation 规则中。正常验证不起作用的原因，类似于该链接中的问题，是因为 .NET 的模型绑定器接管并设置消息以及清空值，从而使值有效，就 FluentValidation 规则而言担心的。

我可以让它工作，只要我可以访问我的模型的验证规则，每个属性和规则。

这是一个示例模型：

```
[Validator(typeof(SampleValidator))]
public SampleModel
{
    public DateTime SomeDate { get; set; }
    public int SomeInt { get; set; }
    public decimal SomeDecimal { get; set; }
} 
```

开箱即用的 FluentValidation 不提供对数据类型的验证，因此我构建了自己的客户端验证器来覆盖验证消息（通过 Fluent 适配器）。我的问题只是服务器端验证，它由.NET 的默认模型绑定器接管，如链接讨论中所述。

我正在尝试从 DefaultModelBinder.SetProperty 覆盖执行此操作：

```
protected override void SetProperty(
    ControllerContext controllerContext, 
    ModelBindingContext bindingContext, 
    System.ComponentModel.PropertyDescriptor propertyDescriptor, 
    object value)
{
} 
```

这是一个示例验证器。服务器端验证`IsValid`总是返回 true bacuase，正如我上面所说，`DefaultModelBinder`当输入非日期时，总是将值覆盖为 null：

```
public class DateValidator : PropertyValidator, IDateValidator
{
    public DateValidator()
        : base(() => "{PropertyName} must be a date.")
    {
    }

    protected override bool IsValid(PropertyValidatorContext context)
    {
        return true;
    }
} 
```

验证适配器只是将验证器连接到客户端适配器和参数：

```
public class DateFluentValidationPropertyValidator : FluentValidationPropertyValidator
{
    private IDateValidator DateValidator
    {
        get { return (IDateValidator)Validator; }
    }

    public DateFluentValidationPropertyValidator(ModelMetadata metadata, ControllerContext controllerContext, PropertyRule rule, IPropertyValidator validator)
        : base(metadata, controllerContext, rule, validator)
    {
        ShouldValidate = false;
    }

    public override IEnumerable<ModelClientValidationRule> GetClientValidationRules()
    {
        if (!ShouldGenerateClientSideRules()) yield break;

        var formatter = new MessageFormatter().AppendPropertyName(Rule.GetDisplayName());
        string message = formatter.BuildMessage(DateValidator.ErrorMessageSource.GetString());

        yield return new ModelClientValidationRule
        {
            ValidationType = "date",
            ErrorMessage = message
        };
    }
} 
```

这是我如何将属性连接到规则：

```
public class SampleValidator : AbstractValidator<SampleModel>
{
    public SampleValidator()
    {
        this.RuleFor(m => m.SomeDate).Date();
    }
} 
```

如何使用这些值访问我的模型的验证规则和元数据？

# javascript - tinymce 在保存/发布时清除内容

> ID：12848469
> 
> 赞同：2
> 
> 时间：2012-10-11T21:02:42.167
> 
> 标签：javascript, jquery

我写这个是为了作为`textarea[placeholder]`和 tinymce 的基本占位符。

```
//set up a new editor functionality
setup: function(ed) {

    // Set placeholder
    var $editorMce = $('#'+ed.id);
    var editorMce_placeholder = $editorMce.attr("placeholder");
    if(editorMce_placeholder.length){
        var is_placeholder = false;

        ed.onInit.add(function(ed) {                            
            // get the current content
            var cont = ed.getContent();

            // If its empty and we have a placeholder set the value
            if(cont.length == 0){
                ed.setContent(editorMce_placeholder);

                // Get updated content
                cont = editorMce_placeholder;
            }

            // convert to plain text and compare strings
            is_placeholder = (cont == editorMce_placeholder);                   

            // nothing to do
            if (!is_placeholder){
                return;
            }
        });

        ed.onMouseDown.add(function(ed,e) {
            // replace the default content on focus if the same as original placeholder
            if (is_placeholder){
                ed.setContent('');
            }
        });

        ed.onSaveContent.add(function(ed, o) {
            // replace the content back to empty if the same as placeholder
            if(editorMce_placeholder == o.content){
                ed.setContent('');
            }
       });
    } 
```

`// clear content`这一直有效，直到

我试过了`onSubmit`：

```
ed.onSubmit.add(function(ed, e) {
    // replace the content back to empty if the same as placeholder
    if(editorMce_placeholder == $(ed.getContent()).text()){
        ed.setContent("");
        // just to be sure:
        $editorMce.val("");
    }
}); 
```

还有`onPostProcess`：

```
ed.onPostProcess.add(function(ed, e) {
    // replace the content back to empty if the same as placeholder
    if(editorMce_placeholder == $(ed.getContent()).text()){
        o.content = '';
    }
}); 
```

所有这些都不会在提交时清除 textarea 值/iframe 内容，您不会更改它与占位符值一起保存的值。

# ios - iOS mapView 有时不会加载到默认位置

> ID：12848476
> 
> 赞同：1
> 
> 时间：2012-10-11T21:03:23.063
> 
> 标签：ios, location, mkmapview, grand-central-dispatch, mkcoordinateregion

每次访问视图时，我都会将 mapView 设置为默认位置。有时当您访问视图时，它会位于正确的位置，尽管有时当您访问视图时，它会位于 mapView 的默认位置，即非洲南部海洋上空。访问视图时如何确保它位于正确的位置。

这是我的代码：

```
-(void)viewDidLoad {

    [super viewDidLoad];

    self.mapView.delegate = self;

    MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } };
    region.center.latitude = 45.442424;
    region.center.longitude = -122.78;
    region.span.latitudeDelta =  0.60;
    region.span.longitudeDelta =  0.60;
    [mapView setRegion:region animated:YES];
} 
```

这是加载注释的内容：

```
-(void)initXML {

    NSURL *theURL = [NSURL URLWithString:@"http://www.wccca.com/PITS/"];
    NSData *data = [[NSData alloc] initWithContentsOfURL:theURL];
    xpathParser = [[TFHpple alloc] initWithHTMLData:data];
    NSArray *elements = [xpathParser searchWithXPathQuery:@"//input[@id='hidXMLID']//@value"];
    if (elements.count >= 1) {

        TFHppleElement *element = [elements objectAtIndex:0];
        TFHppleElement *child = [element.children objectAtIndex:0];
        NSString *idValue = [child content];

        NSString *idwithxml = [idValue stringByAppendingFormat:@".xml"];
        NSString *url = @"http://www.wccca.com/PITS/xml/fire_data_";
        NSString *finalurl = [url stringByAppendingString:idwithxml];

        xmlParser = [[XMLParser alloc] loadXMLByURL:finalurl];

        if (xmlParser.calls.count == 0) {

            [self noCallsMessage];
        }
        else {

            [self wcccaAnn];

            NSArray *callsArray = [xmlParser calls];

            for (JointCAD *call in callsArray) {
                NSString *callnumber = [call.callnumber stringByAppendingFormat:@". "];
                NSString *callandnumber = [callnumber stringByAppendingString:call.currentCallType];
                Annotation *ann = [[Annotation alloc] init];
                ann.title = callandnumber;
                ann.subtitle = [call location];
                ann.coordinate = CLLocationCoordinate2DMake([call.latitude doubleValue], [call.longitude doubleValue]);
                [mapView addAnnotation:ann]; }
            }
        }
    } 
```

MKAnnotationView：

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {

    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    MKPinAnnotationView *MyPin=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"current"];
    MyPin.pinColor = MKPinAnnotationColorRed;

    MyPin.draggable = NO;
    MyPin.highlighted = YES;
    MyPin.animatesDrop= YES;
    MyPin.canShowCallout = YES;

    return MyPin;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:33:00.467

我遇到了同样的问题，以下解决方案（适用于您的代码）对我有用：

```
-(void)viewDidLoad {

    [super viewDidLoad];

    self.mapView.delegate = self;

    double delayInSeconds = 0.5;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, int64_t)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } };
        region.center.latitude = 45.442424;
        region.center.longitude = -122.78;
        region.span.latitudeDelta =  0.60;
        region.span.longitudeDelta =  0.60;
        [mapView setRegion:region animated:YES];
    });
} 
```

基本上，您将设置区域的代码包装在一个块中，然后在`delayInSeconds`. 我发现模拟器中有 0.5 的延迟，但您应该在最慢的设备上进行测试。

如果您不想使用块，也可以将区域设置代码包装在单独的方法中并调用类似`[self performSelector:@selector(nameOfMethod) withObject:nil afterDelay:0.5f];`.

地图将开始加载，然后快速动画到设置的区域。如果您不喜欢此动画，请务必将`animated`参数设置为`NO`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:15:43.477

您正在更新与主队列不同的队列上的地图。你很幸运，你的应用程序没有到处崩溃。将视图操作移至主线程，看看是否仍然遇到同样的问题。

编辑：如果您真的必须使用队列来获得该跨度，只需使用视图执行此操作：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [mapView setRegion:region animated:YES]; 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T23:16:30.570

上面的代码中只有一个点将地图设置为地图位置 ( `setRegion`)。如果您的地图被设置到不同的位置，则它不在您提供的代码中。

# eclipse - 在 Eclipse 的透视图中恢复视图的原始布局

> ID：12848477
> 
> 赞同：19
> 
> 时间：2012-10-11T21:03:23.577
> 
> 标签：eclipse

如果您是 Eclipse 用户，那么您肯定会遇到这种情况：

您不小心单击了透视图中的视图并移动了鼠标，然后在您习惯的透视图中弄乱了整个布局。

我想知道一旦发生这样的意外更改，是否可以在透视图中恢复原始视图布局。

谢谢

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-11T21:06:08.503

窗口 > 透视 > 重置透视...

# java - Java 反射从字段中获取实例

> ID：12848479
> 
> 赞同：8
> 
> 时间：2012-10-11T21:03:29.787
> 
> 标签：java, reflection, field, instance

有没有办法从字段中获取实例？
这是一个示例代码：

```
public class Apple {
    // ... a bunch of stuffs..
}

public class Person {
    @MyAnnotation(value=123)
    private Apple apple;
}

public class AppleList {
    public add(Apple apple) {
        //...
    }
}

public class Main {
    public static void main(String args[]) {
        Person person = new Person();
        Field field = person.getClass().getDeclaredField("apple");

        // Do some random stuffs with the annotation ...

        AppleList appleList = new AppleList();

        // Now I want to add the "apple" instance into appleList, which I think
        // that is inside of field.

        appleList.add( .. . // how do I add it here? is it possible?

        // I can't do .. .add( field );
        // nor .add( (Apple) field );
    }
} 
```

我需要使用反射，因为我将它与注释一起使用。这只是一个“示例”，方法`AppleList.add(Apple apple)`实际上是通过从类中获取方法，然后调用它来调用的。

并这样做，例如：`method.invoke( appleList, field );`

原因：`java.lang.IllegalArgumentException: argument type mismatch`

****编辑**** 这可能对正在寻找相同事物的人有所帮助。

如果类 Person 有 2 个或更多 Apple 变量：

```
public class Person {
    private Apple appleOne;
    private Apple appleTwo;
    private Apple appleThree;
} 
```

当我得到字段时，例如：

```
Person person = new Person();
// populate person
Field field = person.getClass().getDeclaredField("appleTwo");
// and now I'm getting the instance...
Apple apple = (Apple) field.get( person );
// this will actually get me the instance "appleTwo"
// because of the field itself... 
```

一开始，只看这行：`(Apple) field.get( person );`
让我觉得它会去获得一个与 Apple 类匹配的实例。
这就是为什么我想知道：“它将返回哪个苹果？”

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-11T21:05:49.363

田地本身不是苹果——它只是田地。由于它是一个*实例*字段，因此您需要一个声明类的实例才能获取值。你要：

```
Apple apple = (Apple) field.get(person); 
```

...在为被引用的实例*填充*`apple`字段之后，当然。*`person`*

# php - DOM GetElementByTagName

> ID：12848483
> 
> 赞同：0
> 
> 时间：2012-10-11T21:03:52.530
> 
> 标签：php, dom

我正在尝试从代码块中收集所有 H1 标签。我试图在一个类中使用它并且我不断收到错误并且我不确定这是因为插入到类中还是因为我是 DOM 编码的新手而我编码它是错误的。

错误：致命错误：调用未定义的方法 DOMDocument::getElementByTagName() 此错误指的是：

```
$head1 = $this->doc->getElementByTagName('H1'); 
```

文件调用类

```
<?php
include('../includes/configuration.php');
include('../functions/class.php');

$reports=new Functions();

$sql = mysql_query("SELECT * FROM user_urls LIMIT 1") or die(mysql_error());  
if (mysql_num_rows($sql) > 0){
    $recc = mysql_fetch_array($sql);
    $id=$recc['id'];
    $content=$recc['content'];  

    $reports->content=$content;

    $test=$reports->collectHeadings();
    print_r($test);
}
?> 
```

类文件

```
class Functions{
var $content;
var $doc;

public function collectHeadings(){
    $this->loadContent();
    $head1 = $this->doc->getElementByTagName('H1');
    return $head1;
}

public function loadContent(){
    $this->doc = new DOMDocument();
    $this->doc->loadHTML($this->content);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:07:29.033

好吧，原来你拼写为 getElementByTagName，而该方法实际上是 getElementsByTagName。

# c - 这是什么格式？

> ID：12848487
> 
> 赞同：4
> 
> 时间：2012-10-11T21:04:13.950
> 
> 标签：c, syntax, format

当我在 aqbanking 中运行以下命令时

```
aqbanking-cli request -a 0987654321 -c transactions.ctx --transactions --fromdate=20121011 
```

正在创建内容如下所示的文件。它是什么样的格式，我试图找到一个解析它的C库。

从文件**transactions.ctx**：

```
accountInfoList {
  accountInfo {
    char bankCode="1234567890"
    char bankName="Deutsche Bank"
    char accountNumber="0987654321"
    char accountName="Girokonto"
    char owner="MUELLER, MIKE"
    char currency="EUR"
    int  accountType="0"
    int  accountId="42"

    statusList {
      status {
        int  time="1349956800"

        notedBalance {
          value {
            char value="8799384%2F100"
            char currency="EUR"
          } #value

          int  time="1349956800"
        } #notedBalance
      } #status
    } #statusList
  } #accountInfo
} #accountInfoList 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:29:44.353

它不是标准文件格式。它是 Gwenhywfar 库中的一种文件格式。[http://freecode.com/projects/gwenhywfar](http://freecode.com/projects/gwenhywfar)

从他们在自述文件中的功能列表中，

```
High-level functions for parsing files with a simplified "XML-like"
format and accessing them like a hierarchical database (src/parser/)
It is able to process valid XML files, too. 
```

您可能会使用 src/parser 文件夹中的 C++ 函数，但文档看起来有点缺乏。

# python - 变更单 ModelChoiceField

> ID：12848489
> 
> 赞同：1
> 
> 时间：2012-10-11T21:04:16.473
> 
> 标签：python, django, django-queryset, choicefield

如何从模型中手动更改选择字段中的顺序？

例如：

这段代码：

```
ModelChoiceField(queryset=SomeModel.objects.order_by('SomeField')) 
```

给我吗：

```
'a_somevalue'
'b_somevalue'
'c_somevalue'
'd_somevalue' 
```

这段代码：

```
ModelChoiceField(queryset=SomeModel.objects.order_by('-SomeField')) 
```

给我吗：

```
'd_somevalue'
'c_somevalue'
'b_somevalue'
'a_somevalue' 
```

但如何做到这一点：

```
'c_somevalue'
'a_somevalue'
'd_somevalue'
'b_somevalue' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:12:01.047

您可以使用[额外的](https://docs.djangoproject.com/en/1.2/ref/models/querysets/#django.db.models.QuerySet.extra)：

```
q = Entry.objects.extra(select={'my_sort_field': 
                                "some think like ___
                                    FIND_IN_SET( left(somefield,1),'c,a,d,b')  "})
q = q.extra(order_by = ['my_sort_field']) 
```

但是，如果这是我的模型，我将创建一个用于排序操作的新字段，并保持它覆盖 save() 方法或通过信号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:07:05.603

添加另一个描述您想要的排序的字段，并按它排序。

# sql - 子查询最大序列号

> ID：12848491
> 
> 赞同：0
> 
> 时间：2012-10-11T21:04:18.400
> 
> 标签：sql, ms-access

我犹豫要不要问，因为我确定它就在那里，但我似乎无法想出关键字来找到答案。我从子查询（通常是 Access 用户）开始超越了我的界限。

我有一个具有`TECH_ID`,`SEQ_NBR`和的查询`PELL_FT_AWD_AMT`

```
SELECT ISRS_V_NEED_ANAL_RESULT_PARENT.TECH_ID, ISRS_V_NEED_ANAL_RESULT_PARENT.AWD_YR, ISRS_V_NEED_ANAL_RESULT_PARENT.PELL_FT_AWD_AMT, ISRS_V_NEED_ANAL_RESULT_PARENT.SEQ_NBR
FROM ISRS_V_NEED_ANAL_RESULT_PARENT
GROUP BY ISRS_V_NEED_ANAL_RESULT_PARENT.TECH_ID, ISRS_V_NEED_ANAL_RESULT_PARENT.AWD_YR, ISRS_V_NEED_ANAL_RESULT_PARENT.PELL_FT_AWD_AMT, ISRS_V_NEED_ANAL_RESULT_PARENT.SEQ_NBR
HAVING (((ISRS_V_NEED_ANAL_RESULT_PARENT.AWD_YR)="2013"))
ORDER BY ISRS_V_NEED_ANAL_RESULT_PARENT.TECH_ID; 
```

我想要返回的是添加一个子查询，它只`SEQ_NUM`为每条记录选择最大值，但我似乎无法正确使用语法。在过去，我会作弊并有一个单独的查询，首先给我`TECH_ID`and max `SEQ_NUM`，然后有第二个查询使用原始表和连接中的第一个查询来获取其余部分。

我怎样才能在一个查询中做到这一点？

例子：

```
TECH_ID    SEQ_NUM    PELL
1          1          4000
1          2          4000
1          3          5000 
```

仅使用序列号的最大值仍然返回：`1; 2; 4000`当`1; 3; 5000`我只想要后者时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T21:08:30.703

如果我误解了您的要求，请原谅我，但似乎这就是您所需要的：

```
SELECT ISRS_V_NEED_ANAL_RESULT_PARENT.TECH_ID, ISRS_V_NEED_ANAL_RESULT_PARENT.AWD_YR, ISRS_V_NEED_ANAL_RESULT_PARENT.PELL_FT_AWD_AMT, MAX(ISRS_V_NEED_ANAL_RESULT_PARENT.SEQ_NBR)
FROM ISRS_V_NEED_ANAL_RESULT_PARENT
GROUP BY ISRS_V_NEED_ANAL_RESULT_PARENT.TECH_ID, ISRS_V_NEED_ANAL_RESULT_PARENT.AWD_YR, ISRS_V_NEED_ANAL_RESULT_PARENT.PELL_FT_AWD_AMT
HAVING (((ISRS_V_NEED_ANAL_RESULT_PARENT.AWD_YR)="2013"))
ORDER BY ISRS_V_NEED_ANAL_RESULT_PARENT.TECH_ID; 
```

我对您的原始查询所做的两个更改是在`MAX()`子句中添加，并从子句中删除。`SEQ_NBR``SELECT``SEQ_NBR``GROUP BY`

在不相关的注释中，您可以使用[表别名](http://www.w3schools.com/sql/sql_alias.asp)使查询更短且更易于阅读。例如：

```
SELECT p.TECH_ID, p.AWD_YR, p.PELL_FT_AWD_AMT, MAX(p.SEQ_NBR)
FROM ISRS_V_NEED_ANAL_RESULT_PARENT p
GROUP BY p.TECH_ID, p.AWD_YR, p.PELL_FT_AWD_AMT
HAVING (((p.AWD_YR)="2013"))
ORDER BY p.TECH_ID; 
```

**编辑：** @Slippery Pete 很好地发现您的`HAVING`条款无效。通常，当您想要在您使用的详细级别上过滤结果时`WHERE`；如果要根据汇总信息过滤结果，则使用`HAVING`. 在这种情况下，您需要一个`WHERE`.

```
SELECT p.TECH_ID, p.AWD_YR, p.PELL_FT_AWD_AMT, MAX(p.SEQ_NBR)
FROM ISRS_V_NEED_ANAL_RESULT_PARENT p
WHERE  p.AWD_YR = "2013"
GROUP BY p.TECH_ID, p.AWD_YR, p.PELL_FT_AWD_AMT
ORDER BY p.TECH_ID; 
```

**Edit2：**我在下面阅读了您关于`PELL`与众不同的评论，并且只希望每个`TECH_ID`. 您实际上是在问一个更复杂的问题，因此需要一个更复杂的答案。这是一种可能的 SQL 查询来获得您想要的，尽管我不知道 MS Access 是否支持这些类型的嵌套查询。

```
SELECT p.TECH_ID, p.AWD_YR, p.PELL_FT_AWD_AMT, p.SEQ_NBR
FROM ISRS_V_NEED_ANAL_RESULT_PARENT p
JOIN (
    SELECT TECH_ID, MAX(SEQ_NBR) AS 'SEQ_NBR'
    FROM ISRS_V_NEED_ANAL_RESULT_PARENT
    GROUP BY TECH_ID
) AS m ON p.TECH_ID = m.TECH_ID AND p.SEQ_NBR = m.SEQ_NBR
WHERE p.AWD_YR = "2013"
ORDER BY p.TECH_ID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:11:59.797

该`having`条款对我也不起作用。我想出了这个：

```
SELECT ISRS_V_NEED_ANAL_RESULT_PARENT.TECH_ID, ISRS_V_NEED_ANAL_RESULT_PARENT.AWD_YR, ISRS_V_NEED_ANAL_RESULT_PARENT.PELL_FT_AWD_AMT, max(ISRS_V_NEED_ANAL_RESULT_PARENT.SEQ_NBR) as MAX_SEQ_NBR
FROM ISRS_V_NEED_ANAL_RESULT_PARENT
WHERE ISRS_V_NEED_ANAL_RESULT_PARENT.AWD_YR = '2013'
GROUP BY ISRS_V_NEED_ANAL_RESULT_PARENT.TECH_ID, ISRS_V_NEED_ANAL_RESULT_PARENT.AWD_YR, ISRS_V_NEED_ANAL_RESULT_PARENT.PELL_FT_AWD_AMT
ORDER BY ISRS_V_NEED_ANAL_RESULT_PARENT.TECH_ID; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T23:30:03.380

我认为您正在寻找类似以下的相关子查询：

```
SELECT p.TECH_ID, p.AWD_YR, p.PELL_FT_AWD_AMT, MAX(p.SEQ_NBR), (SELECT MAX(SEQ_NBR) FROM ISRS_V_NEED_ANAL_RESULT_PARENT p2 
 WHERE p2.TECH_ID=p.TECH_ID AND p2.AWD_YR = 2013) AS MAX_SEQNBR
FROM ISRS_V_NEED_ANAL_RESULT_PARENT p
WHERE  p.AWD_YR = 2013
GROUP BY p.TECH_ID, p.AWD_YR, p.PELL_FT_AWD_AMT
ORDER BY p.TECH_ID

Here's an SQL Fiddle example: http://sqlfiddle.com/#!3/ae484/7 
```

# c++ - Qt中的模棱两可的错误

> ID：12848493
> 
> 赞同：2
> 
> 时间：2012-10-11T21:04:26.587
> 
> 标签：c++, qt, class

我正在尝试制作游戏，并且为 Player 创建了一个类。该类继承“Entity”，后者继承QGraphicsItem。

```
#ifndef PLAYER_H
#define PLAYER_H

#include "entity.h"

class Player : public Entity
{
public:
    Player( QString, int, int, int position );

    QRectF boundingRect() const;
    void paint( QPainter *painter,
                const QStyleOptionGraphicsItem *option,
                QWidget *widget );

    void move_north();
    void move_south();
    void move_west();
    void move_east();

    void start_moving();
    void stop_moving();

    void switch_step();

    bool its_moving();

    void change_pos(int);

private:
    QPoint position;
    bool is_moving;

private signals:
    void Move();
};

#endif // PLAYER_H 
```

但我在第 33 行不断收到错误“预期 ':' before 'protected'”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T21:08:57.033

```
// private signals:
signals: 
```

上不应该有访问修饰符`signals`，你只对插槽这样做。

在 MOC 内部，Qt 用自己的访问修饰符替换信号，这就是受保护的来源。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-11T21:09:17.023

[这个答案有一些相关的见解。](https://stackoverflow.com/a/2385594/1287251)信号是根据定义的`protected`，所以你的代码被转换为`private protected:`编译器抱怨的。

换句话说，你不能说`private signals:`。就说吧`signals:`。

# xcode4.5 - 新的配置文件未出现在 CodeSign DropBox 中

> ID：12848496
> 
> 赞同：0
> 
> 时间：2012-10-11T21:04:55.057
> 
> 标签：xcode4.5, testflight

我一直在努力让我的应用程序试飞三个小时。有人可以帮忙吗？这是我所做的：

1.  前往 iOS Provisioning Portal，在设备部分添加了一个新设备
2.  在门户中转到配置部分 - 在分发选项卡下，使用新名称创建了一个新配置文件，将其设为临时并选中了我添加的新设备旁边的框
3.  提交，下载证书，在xcode中打开证书
4.  打开 Xcode，查看管理器窗口，我在配置文件中看到配置文件，
    说它有效
5.  构建程序
6.  在 xcode 中，转到构建设置下的代码签名标识部分，点击 Dropbox
    进行调试和发布，新的配置文件未列出！

谁能告诉我我错过了什么？我读过的所有教程都只是掩盖了这部分，似乎配置文件应该在那里，但事实并非如此。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:18:39.930

添加新配置文件时，您必须从组织者中获得新鲜感。它将为您解决未来的问题。我使用不同的配置文件，有时我必须使用管理器中的刷新才能让 excode 检测到新的配置文件。

希望这可以帮助

阿德里安

# c++ - WinAPI - 菜单加速器不起作用

> ID：12848500
> 
> 赞同：3
> 
> 时间：2012-10-11T21:05:14.030
> 
> 标签：c++, winapi, menu, resources, keyboard-shortcuts

我正在尝试向我的菜单添加加速器，当我按下“Ctrl+R”时，它应该发送命令`ID_VIEW_RESULTS`，但它没有。单击菜单项可以正常工作，但不能翻译加速器，这就是我所拥有的：

我的应用程序.h

```
#define WIN32_LEAN_AND_MEAN
#include <Windows.h>

#define ID_MAINMENU 101
#define ID_MENUACC  102

#define ID_VIEW_RESULTS 2001 
```

我的应用程序.rc

```
#include "MyApp.h"

/////////////////////////////////////////////////////////////////////////////
//
// Menu
//

ID_MAINMENU MENU 
BEGIN
    POPUP "&View"
    BEGIN
        MENUITEM "Calculated &Results...\aCtrl+R",  ID_VIEW_RESULTS
    END
END

/////////////////////////////////////////////////////////////////////////////
//
// Accelerator
//

ID_MENUACC ACCELERATORS 
BEGIN
    "^R",       ID_VIEW_RESULTS,        ASCII,  NOINVERT
END 
```

我的应用程序.cpp

```
#include "MyApp.h"

int WINAPI WinMain(HINSTANCE hInst, HINSTANCE hPrevInst, LPTSTR lpCmdLine, int nCmdShow)
{
    UNREFERENCED_PARAMETER(hPrevInst);
    UNREFERENCED_PARAMETER(lpCmdLine);

    // Create and show main window, CMainWnd definition is dialog
    // resource template, works fine, irrelevant to problem.
    MainWnd = new CMainWnd();
    MainWnd->Show();

    MSG    Msg;
    HACCEL hAcc;
    hAcc = LoadAccelerators(hInst, MAKEINTRESOURCE(ID_MENUACC));

    while (GetMessage(&Msg, 0, 0, 0)) {
        if (!TranslateAccelerator(Msg.hwnd, hAcc, &Msg)) {
            TranslateMessage(&Msg);
            DispatchMessage(&Msg);
        }
    }

    return (int)Msg.wParam;
} 
```

我自己看不出这不起作用的充分理由，谁能指出我做错了什么或给我任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:49:51.713

尝试将 Msg.hwnd 替换为 MainWnd 的 HWND 成员。如果这有效，则 Msg.hwnd 不是获取消息的正确窗口（在 Tanslate Accelerator 参数中）。

# c# - WCF 向客户端发送事件

> ID：12848502
> 
> 赞同：3
> 
> 时间：2012-10-11T21:05:15.540
> 
> 标签：c#, .net, wcf, events

我有一个应用程序（服务器）和一个由 WCF 通过命名管道（所有 .NET 4.0）连接的客户端。一切正常。从客户端到服务器和服务器到客户端（回调）的两种调用方法都可以正常工作。现在，我如何简单地将事件从服务器发送到客户端？

我试图完成的是：

*   客户端在服务器上调用一个立即返回的长期方法
*   当服务器准备好处理时，它会向客户端发送一个事件
*   然后客户端可以调用服务器上的方法来获取结果

我如何以干净的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:12:05.190

您可以看看异步操作：[如何：异步调用 WCF 服务操作](http://msdn.microsoft.com/en-us/library/ms730059%28v=vs.100%29.aspx)。（*这里粘贴的代码有点多，所以我将留下链接。*）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:52:49.993

如果您想变得更简单，异步 WCF 调用是可行的方法。在 .NET 4.0`async`中有关键字。或者你可以等待一段时间，然后调用服务器函数来查看文件是否准备好。为了确保我会使用异步，更简单快速地使用轮询。

# css - -ms-grid 子子规则

> ID：12848506
> 
> 赞同：1
> 
> 时间：2012-10-11T21:05:27.040
> 
> 标签：css, html, grid

我有以下html结构：

```
<div class="parent">
  <div class="child">
    <div class="sub-child-1"></div>
    <div class="sub-child-2"></div>
  </div>
</div> 
```

并遵循 CSS 规则

```
.parent {
  display: -ms-grid;
  -ms-grid-columns: 150px 1fr 1fr;
}
.child {
  -ms-grid-column-span: 2;
} 
```

如何分配`sub-child-1`给第一列和`sub-child-2`第二列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:10:35.633

考虑到这在 IE 中有效（无法测试，我在 linux 上）它应该是：

```
.sub-child-1 {
    -ms-grid-row: 1;
    -ms-grid-column: 1;
}

.sub-child-2 {
    -ms-grid-row: 1;
    -ms-grid-column: 2;
} 
```

我很确定您必须将 sub-child-1 和 sub-child-2 移动到父级，或者在子级而不是父级上定义一个网格。

# python - getattr 与 inspect.getmembers

> ID：12848507
> 
> 赞同：6
> 
> 时间：2012-10-11T21:05:30.813
> 
> 标签：python

可以使用 getattr(obj, attr) 或 inspect.getmembers(obj) 获取对象属性，然后按名称过滤：

```
import inspect

class Foo(object):

    def __init__(self):

        self.a = 100

    def method(self): pass

foo = Foo()
method_by_getattr = getattr(foo, 'method')

foo_members = inspect.getmembers(foo) 
method_by_inspect = [member[1] for member in foo_members 
                        if member[0] == "method"][0]

print (id(method_by_getattr), method_by_getattr, type(method_by_getattr))
print (id(method_by_inspect), method_by_inspect, type(method_by_inspect))

a_by_getattr = getattr(foo, "a")
a_by_inspect = [member[1] for member in foo_members
                        if member[0] == "a"][0]

print (id(a_by_getattr), a_by_getattr, type(a_by_getattr))
print (id(a_by_inspect), a_by_inspect, type(a_by_inspect))

# (38842160L, <bound method Foo.method of <__main__.Foo object at 0x00000000025EF390>>, <type 'instancemethod'>)
# (39673576L, <bound method Foo.method of <__main__.Foo object at 0x00000000025EF390>>, <type 'instancemethod'>)
# (34072832L, 100, <type 'int'>)
# (34072832L, 100, <type 'int'>) 
```

对于“a”属性，getattr 和 inspect.getmembers 返回相同的对象。但是对于“方法”方法，它们返回不同的对象（从不同的 id 可以看出）。

为什么会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T12:04:58.000

毫驼得到绿色检查，但我想我会添加一点。

**tl;博士**

绑定的方法对象是瞬态的。也就是说，每次您抓取它们时都会重新创建它们。

```
class Foo(object):
    def bar(object): pass

foo = Foo()
m1 = foo.bar
m2 = foo.bar
print (id(m1))
print (id(m2))

# 38121264
# 38952752 
```

**更多细节：描述符协议**

每次获取绑定的方法对象时都会重新创建它们，因为存储在类中的函数对象实现了[描述符协议](http://docs.python.org/howto/descriptor.html)。

bar 函数存储在类 dict 中：

```
class Foo(object):
    def bar(object): pass

print (Foo.__dict__['bar'])

# <function bar at 0x00000000025F2208> 
```

当 Foo 实例尝试访问 bar 时，它没有它。所以它在它的类上查找它并在类字典中找到它。函数对象根据描述符协议实现**__get__方法。**所以实际调用来获取绑定方法是这样的：

```
print(Foo.__dict__['bar'].__get__(foo, Foo))

# <bound method Foo.bar of <__main__.Foo object at 0x00000000025719B0>> 
```

这相当于：

```
print (foo.bar)

# <bound method Foo.bar of <__main__.Foo object at 0x00000000025719B0>> 
```

您可以像这样获得原始功能：

```
print (foo.bar.im_func) # Python 2.x

# <function bar at 0x00000000025F2208>    

print (foo.bar.__func__) # Python 3.x

# <function bar at 0x00000000025F2208> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-11T22:03:42.223

我对您的示例进行了一些重组，以更好地说明我将用来解释行为的变体

### [带有临时变量](http://ideone.com/TWdgk)

```
import inspect

def print_id(obj):
    print "{} => {}".format(id(obj), obj)

def getmember(obj, name):
    #members = dict(inspect.getmembers(obj))
    #return members[name]
    return [member 
            for _name, member in inspect.getmembers(obj) 
            if name == _name][0]

class Foo(object):
    def bar(self): pass

foo = Foo()

m1 = foo.bar
m2 = getattr(foo, 'bar')
m3 = getmember(foo, 'bar')

print_id(m1)
print_id(m2)
print_id(m3) 
```

但是，如果您检查 REPL 中的对象，您的代码的基本结构可能如下所示：

### [没有临时变量](http://ideone.com/eGr5T)

```
#...
foo = Foo()

print_id(foo.bar)
print_id(getattr(foo, 'bar'))
print_id(getmember(foo, 'bar')) 
```

该`id()`函数基本上返回对象的内存地址。也就是说，它不是在整个程序运行时创建的所有对象之间唯一的标识。它仅在任何给定时间点存在于流程中的所有对象之间是唯一的。

适合这两个示例之间差异的解释是，`foo.bar`以三种方式中的任何一种解析**每次都会为您提供一个新对象**。在第一个示例中，这些对象存储在临时变量中，因此所有三个必须位于不同的内存地址。

在第二个例子中，绑定的方法对象在打印出来后就不再需要了；Python 引用计数 GC 将释放其内存。这意味着下一次创建绑定的方法对象时，它是一个新对象，恰好在与前一个相同的内存地址创建。这就是为什么您似乎多次获得同一个对象的原因。

你总是得到一个新的绑定方法对象可以简单地显示：

```
>>> foo.bar == foo.bar
True
>>> foo.bar is foo.bar
False 
```

# ruby-on-rails-3 - RoR 3.2：尝试使用他的名字查找用户

> ID：12848508
> 
> 赞同：1
> 
> 时间：2012-10-11T21:05:42.497
> 
> 标签：ruby-on-rails-3, activerecord, ruby-on-rails-3.2

我有一个具有以下内容的用户

id：1 姓名：Vicenzo Naves 电子邮件：（暂时为空）

系统正在尝试使用“Vicenzo Guilherme Naves”查找此用户

有人对我如何使用全名找到用户 1 有任何建议吗？

问题是，我只能接收全名作为输入，而不仅仅是名字和姓氏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T00:06:16.880

您可以使用正则表达式来捕获名称的各个部分，而只需忽略中间名。

这将捕获名称的每个部分。

```
([^ ]+)+ 
```

正在使用：

```
params[:user] =~ /([^ ]+)+/
User.find_by_name("#{$1} #{$3}") 
```

**注意：**如果说名称有两个中间名等，这将不起作用。如果这是一个问题，那么您可以修改它以满足您的需要。也许像这样：

```
parts = params[:user].scan(/([^ ]+)+/)
  # parts will equal [["Vicenzo"], ["Guilherme"], ["Naves"]]
User.find_by_name("#{parts.first.first} #{parts.last.last}") 
```

# iphone - 长按 - iPhone cocos2d

> ID：12848511
> 
> 赞同：1
> 
> 时间：2012-10-11T21:05:54.090
> 
> 标签：iphone, objective-c, cocos2d-iphone, touch

我正在编写一个游戏，当用户触摸屏幕左侧时，玩家向左移动，当他们触摸屏幕的右手部分时，玩家向右移动。

目前播放器仅在您第一次触摸屏幕时移动，我希望只要用户将手指放在屏幕上就可以施加力……我似乎找不到为此的 API 调用。我需要做什么？

```
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self handleFrankMove:touches withEvent:event];
}

-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    [self handleFrankMove:touches withEvent:event];
}

-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    [self handleFrankMove:touches withEvent:event];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:54:52.307

不知道你是如何实现移动的，但是在 touchesBegan 上，你可以在精灵上启动 CCMoveTo 动作（屏幕边缘），在 ccTouchesEnded 上，你可以在精灵上 stopAllActions （或者如果你小心的话，停止特定动作掌握它）。同样，有很多方法可以给猫换皮，使用哪种方法在很大程度上取决于您正在实施的整体游戏逻辑和 UI 策略。

编辑：这是一种不依赖 CCActions 的方式

时间：onTouchesBegan：

```
[self schedule:@selector(keepPushingFrank:) interval:.2]; // interval up to you, experiment 
```

何时：onTouchesEnded 或 onTouchesCancelled

```
[self unchedule:@selector(keepPushingFrank:)] 
```

何时：onTouchesMoved：

```
[self computeFingerLogicforTouch:_frankTouch]; // you may need this to control
                                               // behaviour in keepPushingFrank 
```

并添加一个像这样的方法：

```
-(void) keepPushingFrank:(ccTime) dt{
    // do your thing with box2D to change forces
    // on Frank. you may want to setup some iVars
    // to compute 'finger intention' when it moves
    // and apply physics accordingly (dont know your 
    // app).

} 
```

# amazon-ec2 - 亚马逊 AWS 架构流程

> ID：12848514
> 
> 赞同：1
> 
> 时间：2012-10-11T21:06:02.277
> 
> 标签：amazon-ec2, amazon-web-services, amazon-cloudfront

我有一个流量问题，希望能得到一些帮助：

用户请求 -> Route 53 -> Cloudfront -> Elastic Load Balancer -> EC2 Instance -> Nginx -> App Server - {计算 URL 以下载 S3 资产} -> {返回带有 URL 的 X-Accel-Redirect 标头从 S3} -> Nginx -> {将 X-Accel-Redirect 标头拆分并重新组装回 S3 URL} -> S3 资产 -> Cloudfront -> 用户代理！

因此，如果我直接向 Elastic Load Balancer 或 EC2 实例发出请求，这可以正常工作，但是一旦我尝试通过 Cloudfront 发出请求（通过将 Cloudfront 指向 ELB 或直接指向 EC2 实例），我取回 SignatureDoesNotMatch XML 响应并且没有资产。

有谁知道为什么通过 Cloudfront 访问 S3 资产会导致此问题？

# c - 晦涩的三元运算符用法

> ID：12848515
> 
> 赞同：1
> 
> 时间：2012-10-11T21:06:07.580
> 
> 标签：c, conditional-operator

> **可能重复：**
> [为什么要使用三元运算符而不为“真”条件赋值（x = x ?: 1）](https://stackoverflow.com/questions/2806255/why-would-you-use-the-ternary-operator-without-assigning-a-value-for-the-true)

在一个人的书中，我看到了三元运算符用法的模糊（对我来说）语法：

```
int nr = nr ? : 1; /* allowed shortcut, same as "nr ? nr : 1" */ 
```

这究竟是什么意思？在代码中的某处声明了“nr”变量，它的初始值基于比较结果是否“nr”（其中有一个垃圾，我猜是 O_o）不等于零......如果是这样，那么它会得到什么价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:08:40.250

这是对三元数组的扩展，允许省略第二个操作数，如注释中所述。

这：

```
int nr = nr ? : 1; 
```

相当于：

```
int nr = nr ? nr : 1; 
```

我相信这是一个 GCC 特定的扩展，[这里是](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Conditionals.html)它的 GCC 扩展页面。

正如其他人在评论中指出的那样，由于`nr`正在声明并且声明中使用了它的值，因此这一行的结果是不可预测的。

# networking - XNA PC 网络

> ID：12848521
> 
> 赞同：0
> 
> 时间：2012-10-11T21:06:43.463
> 
> 标签：networking, xna

几天前，我开始在 Youtube 上观看 Nathan Biefeld XNA Networking 的视频，希望能制作一款我可以通过互联网与朋友一起玩的游戏。在开发游戏时，我使用同一网络上的两台计算机进行测试，并且能够使用我的内部 ip（类似于 127.0.0.1）建立连接。现在，我正在给我的朋友我的公共 IP 地址进行连接，但它不起作用。顺便说一句，我没有使用 Windows Live 来处理我的游戏的在线功能。

这是他收到的错误消息：

```
A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. 
```

有谁知道这个问题的原因？所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:58:01.467

您的路由器和/或防火墙阻止了传入连接。您需要在服务器端配置端口转发，和/或允许您的应用程序通过防火墙。您如何进行端口转发取决于您的路由器，但我有时会使用[PortForward.com](http://portforward.com/)来指导我完成某些游戏，但总的来说，您可以：

*   连接到路由器的管理面板。经常在您的浏览器中`http://192.168.0.1/`或`http://192.168.1.1/`在您的浏览器中访问。如果这些不起作用，您将不得不使用 RTFM。
*   找到端口转发或端口触发部分，并添加一条记录以指示特定端口上的传入连接正常。

现代版本的 Windows 带有[Windows 防火墙](http://en.wikipedia.org/wiki/Windows_Firewall)。[Microsoft Technet](http://technet.microsoft.com/en-us/library/cc787104%28v=ws.10%29.aspx)上的信息比您想要的更多。简而言之，从开始菜单打开它并允许入站连接到您的应用程序。

我可能会先尝试添加 Windows 防火墙例外，因为它更容易。

# php - PHP 简单 HTML DOM 解析器：插入 HTML

> ID：12848535
> 
> 赞同：1
> 
> 时间：2012-10-11T21:07:34.557
> 
> 标签：php, dom

我正在尝试使用[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)从页面 B 中提取一些 html 并将 html 代码插入当前页面。（请温柔，我是PHP新手）

我定位的页面 B html 如下所示： `<div id="testdiv">B</div>`

我需要在当前页面中插入相同的代码。

我在当前页面上的 PHP：

```
<?php
include_once '%resource(simple_html_dom.php)%';
$ret = Array();
$html = file_get_html('b.html');
$ret[] = $html->find('div[id=testdiv]', 0);
$ret->outertext = $ret->makeup() . $ret->innertext . '</div>';
echo $ret;
?> 
```

我试图把它拼凑在一起，但仍然没有运气。我希望在查看当前页面时看到“B”，但我绝对需要所有的 html 编码都在那里；）
目前收到错误“调用非对象上的成员函数化妆（）”

PS 一旦运行，我可能需要一种方法来引入 pg B 上的 css 和 js。

谢谢你的帮助，比尔

更新代码：

```
<?php
include_once '%resource(simple_html_dom.php)%';
$html = file_get_html('b.html');
foreach($html->find('div[id=testdiv]') as $ret)
  echo $ret;
?> 
```

所以现在我需要能够从页面 B 获取特定的 css 和 js 文件，这样 div 中的任何内容都会正确呈现。[这是当前页面](http://www.partiproductions.com/copyr/index.php)的示例如果您查看页面 B 的标题，将会有一个典型的 css 和 js 文件，称为 b_files/stacks_page_page1.css & b_files/stacks_page_page1.js

这些是我需要在当前页面中引用的文件，相对路径根据需要进行了更改。我还添加了一个位于文件夹中的页面 C（B 位于当前页面的根目录中），因此路径将不同。我想将 css 文件和 js 文件结合在一起会很好，所以不会有一堆 dom 调用。

总体而言，将这些文件带入的代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:29:30.360

因为 $ret 是一个数组并且没有名为“makeup()”的方法，所以您正在获得“对非对象上的成员函数 makeup() 的调用”。

我不确定你到底想要做什么，但这样的事情可能会让你更接近一点。我假设你有一个名为 make() 的函数，它产生一个字符串“< div>”：

*未测试*

```
<?
php include_once '%resource(simple_html_dom.php)%';  
$html = file_get_html('b.html'); 
$ret = $html->find('div[id=testdiv]', 0)->innertext; 
$ret = makeup() . $ret . '</div>'; 

echo $ret; 
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:29:41.067

代码存在许多问题。 `$ret[]`意味着推送到数组上，但是接下来你调用对象方法的下一行，这就是你得到错误的原因。

一旦该问题得到解决，`$ret->makeup`根据 API 就不是有效的方法（除非您已修改/扩展它）。我不确定你认为你在做什么`$ret->outertext = $ret->makeup() . $ret->innertext . '</div>'`，但如果你期望`B`你的输出：

```
<?php
include_once 'simple_html_dom.php';
$html = file_get_html('b.html');
$ret = $html->find('div[id=testdiv]', 0);
if ($ret) {
    echo $ret->innertext;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T21:32:43.213

```
foreach($html->find('div[id=testdiv]') as $content)
    echo $content; 
```

结果会是`<div id="testdiv">B</div>` ，它将在浏览器上显示为

```
B 
```

如果要显示代码：

```
foreach($html->find('div[id=testdiv]') as $content)
    echo "<xmp>".$content."</xmp>"; 
```

实际结果：`<xmp><div id="testdiv">B</div></xmp>`

然后在浏览器的显示屏上：

```
<div id="testdiv">B</div> 
```

# c# - 树结构上的计数属性（非二进制）

> ID：12848536
> 
> 赞同：1
> 
> 时间：2012-10-11T21:07:41.250
> 
> 标签：c#, .net, data-structures, tree

我正在基于 c# 实现树数据结构（主要基于[Dan Vanderboom 的通用实现](http://dvanderboom.wordpress.com/2008/03/15/treet-implementing-a-non-binary-tree-in-c/)）。我现在正在考虑处理 Dan 没有实现的 Count 属性的方法。

显而易见且简单的方法是使用递归调用，它遍历树愉快地添加节点（或者如果您愿意，可以使用队列和计数节点迭代遍历树）。只是看起来很贵。（我也可能想延迟加载我的一些节点）。

我可以在根节点上维护一个计数。所有子节点都将遍历和/或持有对根的引用，并在更改时更新内部可设置的计数属性。这会将迭代问题推到我想要中断分支或清除给定节点下的所有子节点的时候。通常更便宜，并且把我认为不太常用的功能放在了繁重的地方。

似乎有点蛮力，这通常意味着我还没有想到的异常情况，或者如果你愿意，还有错误。

有没有人有一个实现的例子，它保持一个*不平衡和/或非二叉树*结构的计数，而不是即时计数？不要担心延迟加载，我相信我可以调整示例以满足我的特定需求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:14:04.620

你可以在树上有一个计数属性。在添加节点的方法中，增加计数，在删除节点的方法中，减少计数。

运行时间 = 读取属性所需的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:15:02.667

您似乎一直在考虑节点，却忘记了控制对节点的访问的 Tree 类。您的 Tree 类可以具有 Count 属性，并且由于 Add 和 Remove 都由 Tree 类公开（它们不应该由节点公开），因此您始终可以在项目更改时对其进行递增和递减。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T21:27:38.647

您的 Node 类可以记录它拥有的子节点数量，每次添加或删除节点时都会更新这些子节点。然后要获得根节点（或任何节点，就此而言）的计数，您只需将其所有子节点的计数相加即可。

但是为了简单起见，为什么不按照 D Stanley 的建议，递归地实现 Count 呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T15:07:27.643

感谢大家的意见。我并不是真的想邀请辩论，只是想看看是否有人有样本，似乎不是这样。

我认为答案是没有好的样品可用，我需要自己做这项工作。

我给了你们每个人一个+1，因为你们都为我的结论做出了贡献。

# javascript - 带有javascript的Inorden路由html

> ID：12848547
> 
> 赞同：0
> 
> 时间：2012-10-11T21:08:29.847
> 
> 标签：javascript, html, tree, preorder

如何使用 javascript 对 html 树中的元素进行预排序遍历

![在此处输入图像描述](../Images/ad4b0b7f24aa4260776243f2b58ffe0e.png)

img src = [http://www.sitepoint.com/hierarchical-data-database-2/](http://www.sitepoint.com/hierarchical-data-database-2/) (Great Article) , 假设 box 是一个 html 元素

例子：

```
function preorderHtml(element patern)
{
 //preorder tree traversal

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:11:28.310

```
function traversePreorder(el, indent) {
  indent = (indent || '')
  console.log(indent + el.nodeName); // Do something with the element here...
  for (var i=0; i<el.children.length; i++) {
    traversePreorder(el.children[i], indent + '  ');
  }
}
traversePreorder(document.body); 
```

我可能会引入第二个参数，它是一个在每个元素处调用的函数，以便可以重用此方法。

```
function traversePreorder(el, func, indent) {
  indent = (indent || '')
  func(el);
  //...
}
traversePreorder(document.body, function(element) {
  console.log(el.nodeName); // Do something here...
}); 
```

# ruby-on-rails - 错误 310。使用 nginx + rails 3 的重定向过多

> ID：12848549
> 
> 赞同：0
> 
> 时间：2012-10-11T21:08:33.497
> 
> 标签：ruby-on-rails, ssl

您好，请在下面查看我的 nginx 配置。当我尝试访问我的主页[http://mydomain.com](http://mydomain.com)时，出现以下错误。当我使用 Chrome 开发人员工具查看重定向时，我看到[http://mydomain.com](http://mydomain.com)正在重定向到[https://mydomain.com](https://mydomain.com)来回。我查看了我的源代码，但在那里找不到任何重定向。我正在使用 ssl_requirement 插件。

任何帮助是极大的赞赏。

```
Error 310 (net::ERR_TOO_MANY_REDIRECTS): There were too many redirects. 
```

下面是我的nginx配置文件

```
server {
    listen 80;
    server_name www.mydomain.com;
    rewrite ^/(.*) http://mydomain.com/$1 permanent;
}

server {
    listen 80;

    server_name mydomain.com;

    access_log /var/www/mydomain/current/log/access.log;
    root /var/www/mydomain/current/public;

    passenger_enabled on;
    passenger_use_global_queue on;

    location ~ /\.ht {
       deny all;
    }
}

server {
    listen 443;

    ssl on;
    ssl_certificate /home/ubuntu/ssl-cert/nopassphrase.pem;
    ssl_certificate_key /home/ubuntu/ssl-cert/nopassphrase.key;

    server_name www.mydomain.com;
    rewrite ^/(.*) http://mydomain.com/$1 permanent;
}

server {
    listen 443;

    ssl on;
    ssl_certificate /home/ubuntu/ssl-cert/nopassphrase.pem;
    ssl_certificate_key /home/ubuntu/ssl-cert/nopassphrase.key;

    server_name mydomain.com;

    access_log /var/www/mydomain/current/log/access.log;
    root /var/www/mydomain/current/public;

    location ~* \.(ico|jpg|gif|png|css|js|swf|html)$ {
      if (-f $request_filename) {
        expires max;
        break;
      }
    }
    passenger_enabled on;
    passenger_use_global_queue on;

    location ~ /\.ht {
       deny all;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:57:48.787

您的配置正在重定向到自身。

您可以将 http 和 https 放在同一个服务器块中。如果证书不是自签名证书，则证书应该是链式证书。

```
server {
    listen 80;
    server_name www.mydomain.com;
    rewrite ^/(.*) http://mydomain.com/$1 permanent;
}

server {
    listen 80;
    listen 443 ssl;
    server_name mydomain.com;
    ssl_certificate /home/ubuntu/ssl-cert/nopassphrase.pem;
    ssl_certificate_key /home/ubuntu/ssl-cert/nopassphrase.key;

    location ~* \.(ico|jpg|gif|png|css|js|swf|html)$ {
        if (-f $request_filename) {
            expires max;
            break;
        }
    }

    access_log /var/www/mydomain/current/log/access.log;
    root /var/www/mydomain/current/public;

    passenger_enabled on;
    passenger_use_global_queue on;

    location ~ /\.ht {
        deny all;
    }
} 
```

# ruby-on-rails-3.2 - 将文本与保存的记录连接起来

> ID：12848554
> 
> 赞同：0
> 
> 时间：2012-10-11T21:09:04.543
> 
> 标签：ruby-on-rails-3.2, concatenation, string-concatenation

您好，对于我的应用程序，我需要保存用户键入的记录，例如，如果用户键入：

```
<p><%= f.label :fruit %><br />
<%= f.file_field :fruit%></p>

"apple" 
```

在显示页面中，我需要该记录显示为

```
"bag of "+ :fuit 
```

，但我不想保存“bag of”，当用户在显示页面时如何放置该文本？我已经阅读了有关过滤器的一些内容，但我不太了解我在 Rails 中很新

如果您需要更多信息（如代码），请告诉我，谢谢

**现在在我的模型中编辑** 我有这个

```
before_save: add_bag

def add_bag
  self.fruit = ("bag of" + self.fruit)
end 
```

但这节省了所有这些“苹果袋”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:12:11.687

我建议你做这样的事情（假设你的模型是 Foo）

```
class Foo < ActiveRecord::Base
  def bag
    "bag of #{fruit}"
  end
end

foo = Foo.new
foo.fruit = "apple"
puts foo.fruit # => "apple"
puts foo.bag   # => "bag of apple" 
```

这是你想要的吗？

# php - PHP Parse 错误：语法错误，第 158 行 /root/AddUsers.php 中的意外 ','

> ID：12848555
> 
> 赞同：-2
> 
> 时间：2012-10-11T21:09:04.743
> 
> 标签：php

我已将以下代码添加到将用户添加到 LDAP 目录的 php 脚本中，现在我们需要记录更改。但是当我运行代码时，标题中出现错误。

```
$myFile = "newuser.log";
$fh = fopen($myFile, 'a') or die("can't open file");
$userInfo = $newUser['lastname'], $newUser['firstname'], $newUs$
fwrite($fh, $userInfo);
fclose($fh); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:11:46.803

这条线没有任何意义：

```
$userInfo = $newUser['lastname'], $newUser['firstname'], $newUs$ 
```

你想创建一个数组吗？`$newUs$`即使您使用过，最后一个也行不通`array(...)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T21:13:23.743

据我所知（因为我没有看到行号），罪魁祸首是：

```
$userInfo = $newUser['lastname'], $newUser['firstname'], $newUs$ 
```

如果要将数组键连接到一个变量中，则必须使用“。” 操作员。所以它会是：

```
$userInfo = $newUser['lastname']  . ', ' . $newUser['firstname'] . ', ' . $newUs; 
```

此外，您可能需要检查该行的结尾 ( `$newUs$`)，因为这将导致另一个语法错误（`$`'s 和 missing `;`）

# forms - 嵌入onetomany实体而不是集合，只是一个实体

> ID：12848558
> 
> 赞同：1
> 
> 时间：2012-10-11T21:09:18.397
> 
> 标签：forms, collections, symfony

我对 symfony 2 和它的形式有点新玩和工作。

我的场景：
我有一个 account 实体和一个 account_address 实体。这是这些实体之间的老式 oneToMany 关系。主要形式是将 AccountAddressType 嵌入为 ArrayCollection 的 AccountType - 这可以正常工作。表单在页面上呈现了很多 AccountAddressTypes，这没关系，因为这是一个集合，但是可以只用一个 AccountAddressType 构建相同的表单吗？（这个 id 来自请求）

我只想要相同的表单，但只有一个带有给定实体的地址字段的嵌入表单。我尝试了很多在网上找到的解决方案，但对我没有任何帮助。

例子：

*   账户实体
    *   电子邮件
*   AccountAddressEntity
    *   名
    *   姓

如何创建一个表单，上面显示的这些字段只有一个表单？（在表单类中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:12:59.510

这个例子在 Symfony2.0 中工作，不确定 2.1。您将在前端获得一个隐藏字段，其中包含微数据中的一些代码。将它与 JavaScript 一起使用，以便您可以显示表单字段。

```
->add('adress', 'collection', array('type'  => new AdressType,
                                              'prototype' => true,
                                              'allow_add' => true)); 
```

这是您应该在前端获得的内容：

```
<div id="randomId" data-prototype="everything about your field, get this value and use it with JavaScript">
</div> 
```

# python - Python：Sqlite3 的 T-SQL 等效项？

> ID：12848560
> 
> 赞同：0
> 
> 时间：2012-10-11T21:09:23.307
> 
> 标签：python, tsql, sqlite

我有以下基于 MS-SQL 的查询，我需要将其转换为基于 Sqlite3 的数据库

```
DECLARE @status int, @nextPriority int
SELECT @status = status FROM status WHERE nameStatus = '234' 
```

然后我必须在 INSERT 查询中使用该变量。

我认为一种方法是执行查询和绑定变量，但我愿意在 Go 中执行所有查询。可能吗？

我正在使用 Python 2.6

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:28:49.123

sqlite 不支持存储过程。

您可以`SELECT`直接进入`INSERT`语句（[示例](https://stackoverflow.com/a/2361961/839436)），也可以将其分解为两个单独的准备好的语句。

sqlite 对查询及其响应的开销并不完全相同，因此通常没什么大不了的。

# javascript - 使一个框出现在页面的前面

> ID：12848561
> 
> 赞同：0
> 
> 时间：2012-10-11T21:09:37.423
> 
> 标签：javascript, jquery, html

我想在我的 html 页面前面放置一个小框。在那个盒子里，我想要两个按钮，它们将执行命令或按下时启动某些东西。如果您按下按钮或框外，框将消失，如图 2 所示。

![图片1：](../Images/e5556c698563eda2a751b07bf584f2ae.png)

![图二：](../Images/d21e6013b3b6f958fe2b2b3780f8dc81.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:11:14.913

您可以使用`confirm()`JavaScript 使用框：

**例子：**

```
var r=confirm("Press a button");
if (r==true)
  {
  x="You pressed OK!";
  }
else
  {
  x="You pressed Cancel!";
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:23:22.760

您将需要一个对话框，插件将是最好的，至于如果您单击框外使其消失，插件有时会处理此问题。jQuery 的 modal-dialog 会将屏幕锁定在框外。如果您想自己执行此操作，您将创建一个具有 100% 宽度和 100% 高度的 div，并且您可以将不透明度设置为 0.1，以便您可以看穿它。然后单击 div，您将隐藏覆盖 div 并隐藏对话框 div。为了设置前面的对话框，插件会处理这个，但是你可以通过将 z-index 设置得高于`z-index`页面上的任何其他来做到这一点。

然后是您的示例图片 - 带有是或否按钮。这不是您通常希望用户能够在外部单击并消失的东西。消失通常是为了图片。是 - 否通常会锁定屏幕并等待响应。但是你可以使用任何类型的对话，我猜你喜欢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T21:20:10.627

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T21:21:12.477

[Fancybox](http://fancybox.net/)可以为所欲为。您需要`<div>`使用按钮制作元素并将fancybox 指向该div。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T21:12:27.537

尝试使用 colorbox [http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)，特别是内联 html。

设置背景颜色并添加按钮

# terminal - Console2 和 ConEmu - 奇怪的命令提示符

> ID：12848564
> 
> 赞同：5
> 
> 时间：2012-10-11T21:09:47.923
> 
> 标签：terminal, ansi-escape, console2, mintty, ansi-colors

非常感谢您的帮助。

我是 Windows 7 中 Cygwin 和 Mintty 的快乐用户。但我总是想看看还有哪些其他选择。所以我下载了 Console2 和 ConEmu。

第一步始终是运行 bash。那很简单。只需输入'bash'... 第二步，自定义外观。这是不可能的！

正如您在下面的屏幕截图中看到的那样，似乎不支持 ANSI 颜色，我可以期待从 Console2 中获得，但在 ConEmu 中不支持。控制台的顺序是（从上到下）：Mintty (Cygwin)、Console2 和 ConEmu。

![在此处输入图像描述](../Images/5f34f83a600a4fe05878a450bccdf968.png)

那么有什么想法吗？

我在 2 个月前下载了 Console，我认为颜色还可以。我不知道为什么现在它具有 powershell 外观。

几周前我实际上尝试了 Powershell 并稍微调整了颜色。这会导致其他终端的混乱吗？

幸运的是，Mintty 很好。

谢谢！

更新：

看起来问题实际上出在我的自定义命令提示符中！

它在 Mintty 中运行良好，但 Console2 和 ConEmu 不喜欢它。

```
# Custom Shell

# Green 113
# Red 173
# Blue 81
# Yellow 186
# Light Green 194
# Light Blue 195

function EXT_COLOR () { echo -ne "\e[38;5;$1m"; }
function CLOSE_COLOR () { echo -ne '\e[m'; }
PS1=' `EXT_COLOR 81`\]\u@\h`CLOSE_COLOR`\] `EXT_COLOR 195`\]$PWD >`CLOSE_COLOR`\]`EXT_COLOR 173`\]$(__git_ps1 " (%s)")`CLOSE_COLOR`\]\n '
export LS_COLORS='di=38;5;108:fi=00:*svn-commit.tmp=31:ln=38;5;116:ex=38;5;186'
echo -e "\e[38;5;194m$(date +%A\ %d\ %B\ %Y\ -\ %H:%M)\e[m" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T23:20:15.263

至于ConEmu

*   将 bash 作为**root**进程（也称为 shell）运行，为什么您尝试在没有参数的情况下从 cmd 使用它？正确的语法是`sh.exe --login -i`.
*   如果你想要特殊的调色板（例如棕色背景） - 设置调色板（颜色页面）

您的屏幕截图质量低下，文字不可读。但似乎 bash 不使用 ANSI 颜色（为什么？afaik 它直接将颜色写入控制台）。因此，您需要挖掘您的 bash 设置，以启用提示颜色。请参阅 bash 手册或您的设置，可能是`TERM`必须定义的变量 - 不知道。

最后，ConEmu 支持 ANSI 转义序列，但是

1.  ConEmuHk.dll 必须在进程中注入（使用 Ansi），因此 bash 必须是根进程或选项“Inject ConEmuHk”必须为 On。
2.  选项“Ansi X3.64”也必须打开。

> 我在 2 个月前下载了 Console，我认为颜色还可以。我不知道为什么现在它具有 powershell 外观。

Afaik，Console2 将其调色板存储在 xml 文件中。它只是在 Console2 中运行的所有控制台应用程序的一个调色板。

ConEmu 可以根据您的口味进行配置。有主调色板（颜色页面），可以为任何控制台应用程序选择自己的调色板，在 ConEmu（应用程序不同页面）中运行。

> 几周前我实际上尝试了 Powershell 并稍微调整了颜色。这会导致其他终端的混乱吗？

好像您已经在 Console2 中设置了 Powershell 调色板（手动）。

# php - 如何将用户访问令牌与 Facebook 图形 api 一起使用？(PHP)

> ID：12848565
> 
> 赞同：1
> 
> 时间：2012-10-11T21:09:51.790
> 
> 标签：php, facebook, facebook-graph-api, oauth

获取访问令牌没有任何问题：

```
$accessToken = file_get_contents("https://graph.facebook.com/oauth/access_token?client_id=$appID&client_secret=$appSecret&grant_type=client_credentials"); 
```

但我似乎错过了如何使用它的核心概念的一部分。例如，当我请求时：

```
$jsonString = file_get_contents("https://graph.facebook.com/cocacola/statuses?access_token=$accessToken"); 
```

（是的，我去掉了两行之间的“access_token=”部分，URL 很好）

我得到了这个：

```
{
   "error": {
  "message": "A user access token is required to request this resource.",
  "type": "OAuthException",
  "code": 102
  }
} 
```

我对我在这里缺少的东西有点困惑。我知道你需要他们授权的人，但这只是一个具有公共状态的页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:17:24.163

这是您正在使用的应用访问令牌 - 要代表用户拨打电话，您需要他们使用文档中的[身份验证](https://developers.facebook.com/docs/authentication/)流程授权您的应用

应用访问令牌（您从上面的 client_credentials 调用中获得）应该为您提供完全公开的帖子，但许多页面受到人口统计限制，或者帖子本身仅针对某些国家/地区，在这种情况下，您需要用户访问令牌来检索他们

# java - 用于替换动态创建和嵌套的拆分窗格的 Swing 布局管理器/解决方案？

> ID：12848566
> 
> 赞同：1
> 
> 时间：2012-10-11T21:09:57.163
> 
> 标签：java, swing, layout-manager, jxmultisplitpane, multisplitpane

我正在开发一个文本编辑器，用户可以在其中自由地将编辑器窗口垂直或水平划分任意次数（即，分成任意数量的窗格）。单个窗口可以垂直和水平划分（例如，2 行，一个包含 3 列等）。每个窗格都包含一个 JScrollPane 内的 JTextArea 和一个状态栏。

到目前为止，我的方法是使用嵌套的 JSplitPanes。我一直在努力安排拆分窗格分隔线，以便窗口中的空间在所有垂直或水平拆分窗格之间平均分配。我已经非常接近正确了，但是我不得不在很多地方使用 setPreferredSize() （[我应该避免在 Java Swing 中使用 set[Preferred|Maximum|Minimum]Size 方法吗？](https://stackoverflow.com/questions/7229226/should-i-avoid-the-use-of-setpreferredmaximumminimumsize-methods-in-java-swi)） .

我想知道完全采用不同的方法是否会更容易/更好。[MultiSplitPane](http://today.java.net/pub/a/today/2006/03/23/multi-split-pane.html)看起来很诱人……

对于我的情况，最好的布局/方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:55:25.853

现在我正在对你想要什么做一些假设。我想你问是否有一种简单的方法可以动态添加所有相同宽度/高度的文本窗格（垂直或水平分割，但不混合两者）。

水平分割示例

![屏幕截图水平拆分](../Images/fd78d53600ddb973d991a5ea7c1020d1.png)

垂直分割示例

![屏幕截图垂直拆分](../Images/ab0be289ceb8af94e2a0642bbb7f4b4c.png)

如果是这种情况，我建议使用 BoxLayout - 它几乎不需要任何配置就可以做到这一点。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class SplitablePanel extends Box{

    Box container;
    Dimension minSize = new Dimension(400, 300);

    public SplitablePanel(int axis){
        super(BoxLayout.Y_AXIS);

        //Container that holds all the text areas
        container = new Box(axis);
        container.setAlignmentX(Box.LEFT_ALIGNMENT);
        add(container);

        JTextArea text = new JTextArea();
        container.add(new JScrollPane(text));

        //Button to add another pane
        JButton split = new JButton("Split");
        split.setAlignmentX(Box.LEFT_ALIGNMENT);
        split.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                JTextArea text = new JTextArea();
                container.add(new JScrollPane(text));
                revalidate();
            }});
        add(split);

        //Button To switch Axis - more for demo purposes
        JButton axisChanger = new JButton("Change Axis");
        axisChanger.setAlignmentX(Box.LEFT_ALIGNMENT);
        axisChanger.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                Box newContainer;
                if(((BoxLayout)container.getLayout()).getAxis() == BoxLayout.X_AXIS){
                    newContainer = Box.createVerticalBox();
                } else{
                    newContainer = Box.createHorizontalBox();
                }

                for(Component c : container.getComponents()){
                    container.remove(c);
                    newContainer.add(c);
                }
                remove(container);
                add(newContainer, 0);
                container = newContainer;
                container.setAlignmentX(Box.LEFT_ALIGNMENT);
                revalidate();
            }
        });
        add(axisChanger);

    }

    @Override
    public Dimension getPreferredSize() {
        Dimension result = super.getPreferredSize();
        result.width = result.width > minSize.width ? result.width : minSize.width;
        result.height = result.height > minSize.height ? result.height : minSize.height;
        return result;
    }

    public static void main(String[] args) {
        final JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new SplitablePanel(BoxLayout.X_AXIS));
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T03:21:37.363

我决定花一些时间来学习 MultiSplitPane 布局。这看起来是一个很好的解决方案。

这是我作为测试编写的代码。它本质上是一个布局的模拟，当用户以各种方式拆分窗口时会动态变化。这有点冗长，但可能对尝试学习 MultiSplitPane 的人有所帮助。

最终结果如下所示：

![在此处输入图像描述](../Images/7bc86cc6fac6604968fc4d1d074112d8.png)

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.util.LinkedList;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;

import org.jdesktop.swingx.MultiSplitPane;
import org.jdesktop.swingx.MultiSplitLayout.*;

@SuppressWarnings("serial")
class MultiSplitPaneTest extends JFrame {
    private final static String sampleText;

    static {
        String text = "I'm working on a text editor in which the user is free to divide the editor window vertically or horizontally any number of times (ie, into any number of panes).\n";
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < 10; i++) {
            sb.append(text);
        }
        sampleText = sb.toString();
    }

    private class MyScrollPane extends JScrollPane {
        public MyScrollPane(final Component view) {
            super(view);
        }
        @Override
        public Dimension getPreferredSize() {
            return new Dimension(1440, 900);
        }
    }

    public MultiSplitPaneTest() {
        // The application opens with a window containing a single pane (a single text area).

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Container cp = getContentPane();
        cp.setLayout(new BorderLayout());

        JTextArea ta1 = new JTextArea();
        ta1.setText("TEXT AREA 1\n" + sampleText);

        MyScrollPane sp1 = new MyScrollPane(ta1);
        sp1.setViewportView(ta1);

        cp.add(sp1, BorderLayout.CENTER);

        pack();
        setLocationRelativeTo(null);
        setVisible(true);

        // -------------------------------------------------

        // Let's say the user splits the window horizontally, creating a second pane.
        // We'll simulate that with the following code.

        JTextArea ta2 = new JTextArea();
        ta2.setText("TEXT AREA 2\n" + sampleText);

        MyScrollPane sp2 = new MyScrollPane(ta2);
        sp2.setViewportView(ta2);

        Leaf leaf1 = new Leaf("1");
        Leaf leaf2 = new Leaf("2");

        LinkedList<Node> rootChildren = new LinkedList<>();
        rootChildren.add(leaf1);
        rootChildren.add(new Divider());
        rootChildren.add(leaf2);

        Split root = new Split();
        root.setRowLayout(true);
        root.setChildren(rootChildren);

        MultiSplitPane multiSplitPane = new MultiSplitPane();
        multiSplitPane.getMultiSplitLayout().setModel(root);

        multiSplitPane.add(sp1, "1");
        multiSplitPane.add(sp2, "2");

        cp.remove(sp1);
        cp.add(multiSplitPane, BorderLayout.CENTER);

        // --------------------------------------------------

        // Let's say the user splits the window horizontally again, creating a new pane on the very left.

        JTextArea ta3 = new JTextArea();
        ta3.setText("TEXT AREA 3\n" + sampleText);

        MyScrollPane sp3 = new MyScrollPane(ta3);
        sp3.setViewportView(ta3);

        Leaf leaf3 = new Leaf("3");

        rootChildren.add(0, leaf3);
        rootChildren.add(1, new Divider());

        root.setChildren(rootChildren);

        multiSplitPane.add(sp3, "3");

        multiSplitPane.revalidate();

        // --------------------------------------------------

        // Let's say the user decides to remove the center pane (that is, the first pane that we started with).

        rootChildren.remove(2); // Remove leaf1.
        rootChildren.remove(2); // Remove the divider following leaf1.

        root.setChildren(rootChildren);

        multiSplitPane.remove(sp1);

        multiSplitPane.revalidate();

        // --------------------------------------------------

        // Let's say the user creates another pane, this time splitting the pane on the right vertically.

        rootChildren.remove(leaf2);

        JTextArea ta4 = new JTextArea();
        ta4.setText("TEXT AREA 4\n" + sampleText);

        MyScrollPane sp4 = new MyScrollPane(ta4);
        sp4.setViewportView(ta4);

        Leaf leaf4 = new Leaf("4");

        LinkedList<Node> branchChildren = new LinkedList<>();
        branchChildren.add(leaf2);
        branchChildren.add(new Divider());
        branchChildren.add(leaf4);

        Split branch = new Split();
        branch.setRowLayout(false);
        branch.setChildren(branchChildren);

        rootChildren.add(branch);

        root.setChildren(rootChildren);

        multiSplitPane.add(sp4, "4");

        multiSplitPane.revalidate();
    }
} 
```

# excel - Excel 如何根据与上述单元格的比较进行条件格式设置？

> ID：12848569
> 
> 赞同：1
> 
> 时间：2012-10-11T21:10:10.593
> 
> 标签：excel

我有一个表，它应该在开头有一个连续的 id 编号，如 1,2,3,4,5,6....

但是，在数据导出过程中，似乎出现了一个错误，它将两行粘贴在一行上，从而破坏了顺序。我正在尝试通过条件格式识别这些行，并且目前正在使用这个不起作用的公式：

```
 ="IF($A2+1==$A3,TRUE,FALSE)"
 # Note the +1 is to account for the header row 
```

我试过移动“$”，但仍然没有雪茄。

我的另一个选择是将序列与行号进行比较，如下所示：

```
 ="IF($A2+1=ROWS($A1), TRUE, FALSE) 
```

但这也没有奏效。

我猜这与

我正在尝试有条件地格式化该列，以便我可以确定我需要在哪里插入一行并进行复制粘贴。

现在，我正在尝试使用条件格式，但在这方面失败了。我不知道如何使用 VBA，所以到目前为止，我更喜欢在进入 VBA 之前使用菜单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:15:31.437

不要在条件格式中使用`IF`公式，试试这个：

```
=A2+1<>A3 
```

有点粗糙，但应该做你想做的（即突出显示破坏序列的单元格）。

![在此处输入图像描述](../Images/a3403549cc1550cbaa36a8a0c63ccb4d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:17:49.390

如果您删除 your`==`和 your `"`，您的公式应该可以工作，但正如 Rocket Donkey 所说，您的条件将返回`TRUE`或`FALSE`无论如何，因此您可以完全删除 IF 结构。

# r - 引用函数的有效表达式

> ID：12848570
> 
> 赞同：10
> 
> 时间：2012-10-11T21:10:12.140
> 
> 标签：r

根据手册`quote(expr)`：

> expr：任何语法上有效的 R 表达式

虽然成功`quote(x==y)`返回调用`x==y`，但`quote(x=y)`失败：

```
Error in quote(x = y) : supplied argument name 'x' does not match 'expr' 
```

`x=y`和都是`x==y`语法上有效的 R 表达式，不是吗？为什么`quote()`会失败`x=y`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-11T21:15:06.873

正如它所说`?"="`：

> 运算符“<-”可以在任何地方使用，而运算符“=”只允许在顶层使用（例如，在命令提示符下键入的完整表达式中）或作为表达式括号列表中的子表达式之一.

`=`在参数中使用 to不是`quote`在顶层使用它，因此您必须将其放在大括号或括号中，但您仍然必须小心如何评估此表达式，因为上述规则仍然适用。

```
quote({x=y})
quote((x=y)) 
```

要发表评论：

正如 Gavin Simpson 所说：基本上，“顶级”是您在提示符下键入或运行代码，而不是在函数调用中。举个`z = quote(expr=x)`例子。 `z = quote(...)`在顶层进行评估，但`expr=x`不是因为它在函数调用中。

在`quote(expr=x)`,`=`中，用于将 的值赋给`x`函数参数`expr`；所以你不再在顶层工作，你正在构建一个函数参数列表（pairlist）。失败的原因`quote(x=y)`是因为`quote`没有`x`论据。

顶级上下文在[R Internals](http://cran.wustl.edu/doc/manuals/R-ints.html)的[第 1.4 节，上下文](http://cran.wustl.edu/doc/manuals/R-ints.html#Contexts)中进行了简要描述。

# python - Python == 许多语句而不是 if/elif

> ID：12848574
> 
> 赞同：0
> 
> 时间：2012-10-11T21:10:35.507
> 
> 标签：python

我在下面尝试这个。

```
my_list = []

for row in reader: 
    a = row[0]
    b = row[1]
    c = row[2]
    s=("{0:<5s} {1:<5s} {2:<8s} ".format(a,b,c))
    lst = my_list.append(s)
    if b == ("Home"):
        n_lst = new_lst.appen(s) 
```

如果我的输出中的 b 行等于“home”“gone”等，我希望将该行放入一个新列表中。我试过

```
if b == ("home", "gone"): 
```

但这不起作用，有没有办法继续向我的 if == 语句添加东西而不是做一堆 elif 语句？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T21:11:25.017

请改用`in`关键字：

```
if b in ['home', 'gone']: 
```

这将检查是否`b`是该列表的一个元素。

此外，您似乎在这里有拼写错误：

```
n_lst = new_lst.appen(s)
                     ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:14:55.733

> 有没有办法继续向我的 if == 语句添加内容

一个或？

```
if b == "home" or b == "gone": 
```

# python - 有没有办法将 matplotlib 图旋转 45 度？

> ID：12848581
> 
> 赞同：4
> 
> 时间：2012-10-11T21:11:06.597
> 
> 标签：python, matplotlib

我正在寻找一种方法，将 matplotlib-pyplot（Python 库）中生成的绘图旋转 45 度（例如，您将拥有菱形而不是方形），有人知道这是否可以做到吗？

我能想到的一种方法是对所有数据使用旋转过滤器，使其看起来旋转，但绘图本身仍将处于原始方向。

我希望能够使用 matplotlib 交互功能，所以保存为图像然后旋转将不起作用。

另外，我想使用 pyplot 函数来绘制绘图，因此使用不同的库进行绘图并不是一个理想的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T16:38:18.530

好的，所以目前我发现的唯一部分解决方案是对绘图应用旋转。这允许使用 matplotlib/pyplot 提供的交互式界面。

对于像 plot() 和 scatter() 这样的点图，这是微不足道的，但我对旋转 imshow() 特别感兴趣。[此](http://www.mailinglistarchive.com/html/matplotlib-users@lists.sourceforge.net/2009-03/msg00167.html)链接讨论了可能用于此任务的*transform关键字，但它显然不起作用。*

幸运的是，我找到了使用 pcolormesh() 的解决方法。pcolormesh() 绘制四边形网格并允许您指定角坐标。因此，答案是仅将相关变换应用于角坐标。但是请注意， pcolormesh() 的工作方式与 imshow 有点不同 - 它绘制您的矩阵翻转。

我在网上的任何地方都没有看到这个解决方案，所以这里有一些 pcolormesh()/imshow() 旋转 45 度的代码：

```
import matplotlib.pyplot as plt
import numpy as np

def pcolormesh_45deg(C):

    n = C.shape[0]
    # create rotation/scaling matrix
    t = np.array([[1,0.5],[-1,0.5]])
    # create coordinate matrix and transform it
    A = np.dot(np.array([(i[1],i[0]) for i in itertools.product(range(n,-1,-1),range(0,n+1,1))]),t)
    # plot
    plt.pcolormesh(A[:,1].reshape(n+1,n+1),A[:,0].reshape(n+1,n+1),np.flipud(C)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-13T01:46:49.460

基于Bitwise anwer，可以使用如下函数：

```
def pcolormesh_45deg(C, ax=None, xticks=None, xticklabels=None, yticks=None,
                     yticklabels=None, aspect='equal', rotation=45,
                     *args, **kwargs):
    import itertools

    if ax is None:
        ax = plt.gca()
    n = C.shape[0]
    # create rotation/scaling matrix
    t = np.array([[1, .5], [-1, .5]])
    # create coordinate matrix and transform it
    product = itertools.product(range(n, -1, -1), range(0, n + 1, 1))
    A = np.dot(np.array([(ii[1], ii[0]) for ii in product]), t)
    # plot
    ax.pcolormesh((2 * A[:, 1].reshape(n + 1, n + 1) - n),
                  A[:, 0].reshape(n + 1, n + 1),
                  np.flipud(C), *args, **kwargs)

    xticks = np.linspace(0, n - 1, n, dtype=int) if xticks is None else xticks
    yticks = np.linspace(0, n - 1, n, dtype=int) if yticks is None else yticks

    if xticks is not None:
        xticklabels = xticks if xticklabels is None else xticklabels
        for tick, label, in zip(xticks, xticklabels):
            ax.scatter(-n + tick + .5, tick + .5, marker='x', color='k')
            ax.text(-n + tick + .5, tick + .5, label,
                    horizontalalignment='right', rotation=-rotation)
    if yticks is not None:
        yticklabels = yticks if yticklabels is None else yticklabels
        for tick, label, in zip(yticks, yticklabels):
            ax.scatter(tick + .5, n - tick - .5, marker='x', color='k')
            ax.text(tick + .5, n - tick - .5, label,
                    horizontalalignment='left', rotation=rotation)

    if aspect:
        ax.set_aspect(aspect)
    ax.set_xlim(-n, n)
    ax.set_ylim(-n, n)
    ax.plot([-n, 0, n, 0., -n], [0, n, 0, -n, 0], color='k')
    ax.axis('off')
    return ax 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T21:25:26.927

也许如果您在 3D 绘图上执行此操作？

[http://matplotlib.1069221.n5.nabble.com/How-to-rotate-a-3D-plot-td19185.html](http://matplotlib.1069221.n5.nabble.com/How-to-rotate-a-3D-plot-td19185.html)

`axes3d.view_init(elev, azim)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T21:16:59.097

[这篇](http://comments.gmane.org/gmane.comp.python.matplotlib.general/3141)文章建议您只能“手动”完成。

> 可以绘制它，但您必须手动完成所有转换/旋转，包括将轴绘制为 Line2D 实例和标签绘制为 Text 实例（例如参见档案中的“Scatter3D”示例）。目前没有简单的内置方法可以做到这一点。在轴处理的计划重构中，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T21:26:39.143

你看过[PIL](http://www.pythonware.com/products/pil/)吗？

此代码将旋转图像。因此，如果您首先将绘图作为图像输出到文件中，那么您可以这样做

```
import Image
img = Image.open("plot.jpg")
img2 = img.rotate(45)
img2.show()
img2.save("rotate.jpg") 
```

# android - 如何使用资产文件夹中的 CSS 文件加载 URL？

> ID：12848588
> 
> 赞同：3
> 
> 时间：2012-10-11T21:11:28.560
> 
> 标签：android, html, css, url, assets

我需要使用资产文件夹中的 CSS 文件加载 URL。搜索时，我不断遇到如下代码：

```
webView.loadDataWithBaseURL("file:///android_asset/", 
      string, "text/html", "UTF-8", null); 
```

但我不知道如何使它工作。我可以像这样定义第二个字符串：

```
string = "<link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\" />" 
         + string; 
```

这似乎在引用 CSS 时起作用，但我该如何拉入 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:15:52.060

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="styleSheetName.css" />
</head>
<body>
</body>
</html> 
```

# iis - appcmd.exe 更新什么配置文件？

> ID：12848590
> 
> 赞同：3
> 
> 时间：2012-10-11T21:11:40.697
> 
> 标签：iis, configuration, iis-7.5, appcmd

从命令提示符运行`appcmd.exe`命令时，是否有配置文件在某处更新？如果是这样，该文件在哪里？

例如，我运行以下命令：

`appcmd.exe set config "MyWebsite" -section:system.webServer/modules -runManagedModulesForWebDavRequests:true`

运行命令解决了我的问题真是太好了，我只是不知道实际发生了什么变化？这是我可以从 IIS 中看到的设置，还是某处的配置文件发生了变化？我以为我会看到`ApplicationHost.config`文件得到更新，但事实并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:19:28.673

如果您想跟踪更改的内容和时间，您可能需要按照[IIS 7.5 – 如何启用 IIS 配置审计？](http://blogs.iis.net/webtopics/archive/2010/03/19/iis-7-5-how-to-enable-iis-configuration-auditing.aspx)而不是寻找对文件的更改。

此外，请记住一些设置更改，特别是在它们引用特定站点的情况下，将发生在 web.config 文件中。有关与您作为示例提供的命令行相关的文档，请参阅[Modules <modules> 。](http://www.iis.net/configreference/system.webserver/modules)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:18:28.257

我相信它配置了[IIS Metabase](http://support.microsoft.com/kb/240941)。过去曾经有一个metabase.xml，但我不知道IIS7。

# java - Java 正则表达式模式匹配任何字符序列后第一次出现的“边界”

> ID：12848600
> 
> 赞同：15
> 
> 时间：2012-10-11T21:12:09.680
> 
> 标签：java, regex

我想设置一个模式，该模式将找到一个受“边界”第一次出现限制的捕获组。但是现在使用了最后一个边界。

例如：

```
String text = "this should match from A to the first B and not 2nd B, got that?";
Pattern ptrn = Pattern.compile("\\b(A.*B)\\b");
Matcher mtchr = ptrn.matcher(text);
while(mtchr.find()) {
    String match = mtchr.group();
    System.out.println("Match = <" + match + ">");
} 
```

印刷：

```
"Match = <A to the first B and not 2nd B>" 
```

我希望它打印：

```
"Match = <A to the first B>" 
```

我需要在模式中更改什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-11T21:14:38.777

使您的`*` *非贪婪*/*不情愿*使用`*?`：

```
Pattern ptrn = Pattern.compile("\\b(A.*?B)\\b"); 
```

默认情况下，该模式会表现得很贪婪，并匹配尽可能多的字符以满足该模式，即直到最后一个*B*。

请参阅[文档](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)中的*Reluctant Quantifiers*和[本教程](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-11T21:14:03.537

不要使用贪婪的表达式进行匹配，即：

```
Pattern ptrn = Pattern.compile("\\b(A.*?B)\\b"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-11T22:01:47.247

`*`是匹配尽可能多的字符以满足模式的贪婪量词。直到`B`您的示例中的最后一次出现。这就是为什么你需要使用不情愿的一个：`*?`，这将尽可能少的字符。所以，你的模式应该稍微改变一下：

```
Pattern ptrn = Pattern.compile("\\b(A.*?B)\\b"); 
```

[请参阅文档](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)和[本教程](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html)中的“不情愿量词” 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T21:16:14.773

也许比不情愿/懒惰更明确的`*`是说你正在寻找 A，然后是一堆*不是 B*的东西，然后是 B：

```
Pattern ptrn = Pattern.compile("\\b(A[^B]*B)\\b"); 
```

# java - 数组列表 JSON I am trying to return JSON data with my restlet. I can return a single item's JSON with.. import org.json.JSONObject; Site aSite = new Site().getSite(); JSONObject aSiteJson = new JSONObject(aSite); 问问题 问问题 2012-10-11T21:12:21.157 31208 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am trying to return JSON data with my restlet. I can return a single item's JSON with.. import org.json.JSONObject; Site aSite = new Site().getSite(); JSONObject aSiteJson = new JSONObject(aSite); return aSiteJson.toString(); Returns: {"name":"qwerty","url":"www.qwerty.com"} How do i return JSON for ArrayList Object ArrayList <site>allSites = new SitesCollection().getAllSites(); JSONObject allSitesJson = new JSONObject(allSites); return allSitesJson.toString(); Returns: {"empty":false} ArrayList <site>allSites = new SitesCollection().getAllSites(); JSONArray allSitesJson = new JSONArray(allSites); return allSitesJson.toString(); Returns: ["com.sample.Site@4a7140","com.sample.Site@1512c2e","com.sample.Site@2bba21","com.sample.Site@c8d0b7"] Here is my Site class public class Site { private String name; private String url; public String getName() { return name; } public void setName(String name) { this.name = name; } public String getUrl() { return url; } public void setUrl(String url) { this.url = url; } public Site(String name, String url) { super(); this.name = name; this.url = url; } } Thanks you have to add each item of the array as JSONObject as an index of the arraylist loop through your arraylist, creating jsonobjects where each element of your Site object is a key,value pair in your jsonobject and then add that jsonobject in your jsonarray's index for(int i = 0; i < allsites.length(); i++){ ... } javajsonrestlet 4 4 回答 4 This answer is useful 8 You coud use Gson library, that handles lists properly, instead. Usage example: class BagOfPrimitives { private int value1; private String value2; private transient int value3; public BagOfPrimitives(int value1, String value2, int value3) { this.value1 = value1; this.value2 = value2; this.value3 = value3; } } BagOfPrimitives obj1 = new BagOfPrimitives(1, "abc", 3); BagOfPrimitives obj2 = new BagOfPrimitives(32, "gawk", 500); List <bagofprimitives>list = Arrays.asList(obj1, obj2); Gson gson = new Gson(); String json = gson.toJson(list); // Now json is [{"value1":1,"value2":"abc"},{"value1":32,"value2":"gawk"}] 于 2012-10-11T21:16:21.923 回答 This answer is useful 1 You could override the toString method in your Site class to return new JSONObject(this).toString 于 2012-10-11T22:11:20.573 回答 This answer is useful 0 here is my solution using simple-json. JSONArray jr = new JSONArray(); for (int x = 1; x <= number_of_items; x++) { JSONObject obj = new JSONObject(); obj.put("key 1", 10); obj.put("key 2", 20); jr.add(obj); } System.out.print(jr); Output: [{"key 1":10,"key 2":20},{"key 1":10,"key 2":20}] 于 2017-04-10T11:24:10.443 回答 This answer is useful 0 您必须将数组的每个项目添加为 JSONObject 作为数组列表的索引 循环遍历您的数组列表，创建 jsonobjects，其中 Site 对象的每个元素都是 jsonobject 中的键值对 然后将该 jsonobject 添加到您的 jsonarray 的索引中 for(int i = 0; i < allsites.length(); i++){ ... } 于 2012-10-11T21:14:15.117 回答 Related 1 listview - jQuery Mobile 列表视图子菜单 2 javascript - 在画布上旋转 2 个图像 3 php - 从 2 个字段计数 2 c# - 在页面上创建和查找动态控件 2 c - 为什么使用 ANTLR works 1.5 不生成 c 头文件？ 4 java - 包含自身作为值的映射； 2 java - 通过 javascript 中的 selenium 登录 facebook 2 php - 我一次上传 5 个文件，如何更新特定文件？ 2 c# - 使用 LIST 插入存储过程 2 r - 如何以编程方式检查当前安装的 R 是否是最新的？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</bagofprimitives></site></site>

> ID：12848601
> 
> 赞同：2
> 
> 时间：
> 
> 标签：java, json, restlet

I am trying to return JSON data with my restlet. I can return a single item's JSON with..

```
import org.json.JSONObject;

Site aSite = new Site().getSite();   
JSONObject aSiteJson = new JSONObject(aSite);
return aSiteJson.toString(); 
```

Returns: {"name":"qwerty","url":"www.qwerty.com"}

How do i return JSON for ArrayList Object

```
ArrayList<Site> allSites = new SitesCollection().getAllSites();   
JSONObject allSitesJson = new JSONObject(allSites);
return allSitesJson.toString(); 
```

Returns: {"empty":false}

```
ArrayList<Site> allSites = new SitesCollection().getAllSites();   
JSONArray allSitesJson = new JSONArray(allSites);
return allSitesJson.toString(); 
```

Returns: ["com.sample.Site@4a7140","com.sample.Site@1512c2e","com.sample.Site@2bba21","com.sample.Site@c8d0b7"]

Here is my Site class

```
public class Site {
private String name;
private String url;

public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getUrl() {
    return url;
}
public void setUrl(String url) {
    this.url = url;
}

public Site(String name, String url) {
    super();
    this.name = name;
    this.url = url;
}       

} 
```

Thanks

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T21:16:21.923

You coud use [Gson](http://code.google.com/p/google-gson/) library, that handles lists properly, instead.

* * *

Usage example:

```
class BagOfPrimitives {
    private int value1;
    private String value2;
    private transient int value3;
    public BagOfPrimitives(int value1, String value2, int value3) {
        this.value1 = value1;
        this.value2 = value2;
        this.value3 = value3;
    }
}

BagOfPrimitives obj1 = new BagOfPrimitives(1, "abc", 3);
BagOfPrimitives obj2 = new BagOfPrimitives(32, "gawk", 500);
List<BagOfPrimitives> list = Arrays.asList(obj1, obj2);
Gson gson = new Gson();
String json = gson.toJson(list);  
// Now json is [{"value1":1,"value2":"abc"},{"value1":32,"value2":"gawk"}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:11:20.573

You could override the toString method in your Site class to return new JSONObject(this).toString

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-10T11:24:10.443

here is my solution using `simple-json`.

```
JSONArray jr = new JSONArray();
for (int x = 1; x <= number_of_items; x++)
    {
        JSONObject obj = new JSONObject();
        obj.put("key 1", 10);
        obj.put("key 2", 20);
        jr.add(obj);

    }
System.out.print(jr); 
```

Output:

```
[{"key 1":10,"key 2":20},{"key 1":10,"key 2":20}] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T21:14:15.117

您必须将数组的每个项目添加为 JSONObject 作为数组列表的索引

循环遍历您的数组列表，创建 jsonobjects，其中 Site 对象的每个元素都是 jsonobject 中的键值对

然后将该 jsonobject 添加到您的 jsonarray 的索引中

```
for(int i = 0; i < allsites.length(); i++){
    ...
} 
```

# django - Django ModelForm：save(commit=False) 有什么用？

> ID：12848605
> 
> 赞同：109
> 
> 时间：2012-10-11T21:12:36.460
> 
> 标签：django, django-models, django-forms

为什么我会使用`save(commit=False)`而不是仅仅从子类创建一个表单对象`ModelForm`并运行`is_valid()`来验证表单和模型？

换句话说，是`save(commit=False)`为了什么？

如果您不介意，你们能否提供可能有用的假设情况？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-10-11T21:19:18.393

当您从表单中获取大部分模型数据时，这很有用，但您需要`null=False`使用非表单数据填充某些字段。

保存为`commit=False`您获取模型对象，然后您可以添加额外数据并保存。

[这是这种情况的一个很好的例子。](https://stackoverflow.com/a/575133/931277)

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-10-11T21:19:21.373

这是答案（[来自文档](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#the-save-method)）：

```
# Create a form instance with POST data.
>>> f = AuthorForm(request.POST)

# Create, but don't save the new author instance.
>>> new_author = f.save(commit=False) 
```

最常见的情况是从表单中获取实例，但仅“在内存中”，而不是在数据库中。在保存之前，您需要进行一些更改：

```
# Modify the author in some way.
>>> new_author.some_field = 'some_value'

# Save the new instance.
>>> new_author.save() 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-10-11T21:18:50.267

来自 Django 文档：

> 这个 save() 方法接受一个可选的 commit 关键字参数，它接受 True 或 False。如果你用 调用 save() `commit=False`，那么它将返回一个尚未保存到数据库的对象。
> 
> 在这种情况下，您可以在生成的模型实例上调用 save() 。如果您想在保存对象之前对其进行自定义处理，或者如果您想使用专门的模型保存选项之一，这将非常有用。提交默认为真。

看起来 save( `commit=False`) 确实创建了一个模型实例，它返回给你。在实际保存之前，这对于一些后期处理来说是很好的！

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-06-14T19:27:58.523

作为“真实示例”，考虑一个用户模型，其中电子邮件地址和用户名始终相同，然后您可以覆盖 ModelForm 的保存方法，例如：

```
class UserForm(forms.ModelForm):
    ...
    def save(self):
        # Sets username to email before saving
        user = super(UserForm, self).save(commit=False)
        user.username = user.email
        user.save()
        return user 
```

如果您不使用`commit=False`将用户名设置为电子邮件地址，则必须修改用户模型的保存方法，或者将用户对象保存两次（这会重复昂贵的数据库操作。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-29T18:36:45.343

```
 form = AddAttachmentForm(request.POST, request.FILES)
            if form.is_valid():
                attachment = form.save(commit=False)
                attachment.user = student
                attachment.attacher = self.request.user
                attachment.date_attached = timezone.now()
                attachment.competency = competency
                attachment.filename = request.FILES['attachment'].name
                if attachment.filename.lower().endswith(('.png','jpg','jpeg','.ai','.bmp','.gif','.ico','.psd','.svg','.tiff','.tif')):
                    attachment.file_type = "image"
                if attachment.filename.lower().endswith(('.mp4','.mov','.3g2','.avi','.flv','.h264','.m4v','.mpg','.mpeg','.wmv')):
                    attachment.file_type = "video"
                if attachment.filename.lower().endswith(('.aif','.cda','.mid','.midi','.mp3','.mpa','.ogg','.wav','.wma','.wpl')):
                    attachment.file_type = "audio"
                if attachment.filename.lower().endswith(('.csv','.dif','.ods','.xls','.tsv','.dat','.db','.xml','.xlsx','.xlr')):
                    attachment.file_type = "spreasheet"
                if attachment.filename.lower().endswith(('.doc','.pdf','.rtf','.txt')):
                    attachment.file_type = "text"
                attachment.save() 
```

这是我使用 save(commit=False) 的示例。我想在将其保存到数据库之前检查用户上传的文件类型。我还想获取它的附加日期，因为该字段不在表单中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-29T16:15:54.247

我理解的基本内容是它从“表单”实例变为视图中的特定“模型”实例。

假设我想在 StackOverflow 中发布这样的答案。代码将是这样的：

```
# Create a form instance with POST data.
>>> form_data = AnswerForm(request.POST)

# Create, but don't save the new answer instance.
>>> Answer = form_data.save(commit=False) 
```

因此，现在我们必须添加此答案的所有者并将其保存在我们的数据库中的视图页面中，如下所示：

```
>>> Answer.owner = request.user

>>> Answer.save() 
```

所以像这样，我们可以添加这个答案的所有者，我们不能`form_data.owner = request.user`在视图页面中添加，也不能在表单类中添加。

所以基本上，它从“表单”实例变为“模型”实例，然后让您修改数据并保存它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-30T09:31:32.663

简单来说，这里我们更新表单对象并让他们知道现在不要将值保存在数据库中，我们可能会使用实例更改一些输入，然后使用 .save() 将所有值保存在数据库中。

这使我们可以灵活地从 HTML 表单中获取所有值并根据我们的要求对其进行自定义，然后保存实例。

# javascript - 如何使用变量更新 Jquery Datepicker？

> ID：12848606
> 
> 赞同：2
> 
> 时间：2012-10-11T21:12:51.447
> 
> 标签：javascript, jquery, jquery-ui, datepicker, jquery-ui-datepicker

我有一个带有 Jquery Datepicker 的表单，我可以将日期保存在数据库中。

但是当我重新加载表单以更新数据时，我想让 Jquery Datepicker 显示数据库中记录的日期。

我可以用php加载它。我只需要更新日期选择器。

在文档中，我看到：

> beforeShowType: Function(Element input, Object inst) 默认值：null 一个函数，它接受一个输入字段和当前的日期选择器实例并返回一个选项对象>以更新日期选择器。在显示日期选择器之前调用它。

我认为这可能是解决方案。有人可以给我一个例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T21:16:43.950

您将日期选择器附加到了什么？如果您将其附加到输入，那么您只需要在调用 datepicker() 之前设置输入的值。

如果您还没有初始化日期选择器，您可以这样做：

```
$( '#yourElement' ).datepicker({ defaultDate: yourDate }); 
```

否则，您可以调用 setDate 方法在已初始化的日期选择器上设置日期：

```
$( '#yourElement' ).datepicker( 'setDate', yourDate ); 
```

# java - 从二进制文件读取时出现java浮点错误

> ID：12848608
> 
> 赞同：2
> 
> 时间：2012-10-11T21:13:15.640
> 
> 标签：java

我有一个浮点数存储在二进制文件 0.9999833107 中。当我读取其中的数字时，它会被截断或扩展，具体取决于我是使用浮点数还是双精度数来存储它。我用以下代码读入二进制文件：

```
public double readFloat(RandomAccessFile fp){

    byte[] data = new byte[4];

    try {

        data[0] = fp.readByte();
        data[1] = fp.readByte();
        data[2] = fp.readByte();
        data[3] = fp.readByte();

    } catch (IOException e) {
            e.printStackTrace();
            return 0;
    }

    ByteBuffer buffer = ByteBuffer.wrap(data);

    return buffer.getDouble();
} 
```

此方法返回 0.9999833106994629。当我将方法更改为输出浮点数时，返回的值为 0.9999833。有谁知道如何获取写入文件的数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:44:12.027

如果您只存储 4 个字节，则可能只有 9 个保证有效数字的准确性，因为 32 位内只有 4294967296 个值可表示 - 并且假设您可以将*所有*位用作尾数，而没有任何指数或符号.

我认为这更有可能最初是一个“接近” 0.9999833107 的值，表示为 a `double`，然后截断为 a`float`进行存储。请注意，0.9999833107 本身不能完全存储为`double`- 最接近的 double 值是 0.9999833107000000165243136507342569530010223388671875。

换句话说，当您将其作为 a 读取时，`float`您*将*获得“写入文件的数字”。它可能不是转换存储之前的数字，但它是实际写入文件的数字。

# java - JAXB 不使用 XmlRootElement 进行注释

> ID：12848612
> 
> 赞同：2
> 
> 时间：2012-10-11T21:13:29.207
> 
> 标签：java, jaxb

当我从以下架构生成代码时，会创建两个类，`A`并且`B`. 但是，这两个类没有注释`@XmlRootElement`，所以当我尝试编组 B 的实例时出现错误。

我在网上查看过，我尝试了使用自定义绑定 ( `<xjc: simple/>`) 的解决方案，但它不起作用。似乎必须在模式中定义类型 B 的元素才能使该解决方案起作用。

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns:ns="com:mycomp:service" xmlns="http://www.w3.org/2001/XMLSchema"
    targetNamespace="com:mycomp:service"
    elementFormDefault="qualified" xml:lang="EN">
    <complexType name="A" abstract="true">
        <sequence>
            <element name="a1" type="string" />
        <element name="a2" type="string" />
        </sequence>
    </complexType>
    <complexType name="B">
        <complexContent>
            <extension base="ns:A">
            <sequence>
                <element name="b1" type="string" />
            </sequence>
        </extension>
        </complexContent>
    </complexType>
</schema> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:12:54.397

这是正确的，因为您的架构没有声明任何根元素，只有类型。如果你想编组一个你的`@XmlType`-annotated 类的实例，你需要将该实例包装在 a`JAXBElement`中，以便告诉编组器使用什么元素名称：

```
// create context from the package name that contains your generated classes
JAXBContext ctx = JAXBContext.newInstance("com.mycomp.service");
Marshaller marshaller = ctx.createMarshaller();
marshaller.marshal(new JAXBElement<B>(new QName("com:mycomp:service", "someB"),
      B.class, instanceOfB), outputStream); 
```

这会产生类似的东西

```
<someB xmlns="com.mycomp.service">
  <a1>foo</a1>
  <a2>bar</a2>
  <b1>baz</b1>
</someB> 
```

编辑：您评论说您不是自己进行编组，而是返回一个对象以供 REST 框架代表您进行编组。您可以通过将操作声明为 return`JAXBElement<B>`而不是 just来使用相同的技巧`B`，但您最好按照其他答案中的建议修改架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:51:11.377

XJC 只会在所讨论的顶部元素（通常是单个根元素）的类型是匿名的情况下生成 @XmlRootElement。

例如。类似（未经测试）：

```
<element name='B'>
   <complexType>
        <complexContent>
            <extension base="ns:A">
            <sequence>
                <element name="b1" type="string" />
            </sequence>
            </extension>
        </complexContent>
  </complexType>
</element> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T21:17:52.933

您需要将`<element>`标签添加到您的架构

```
<schema xmlns:ns="com:mycomp:service" xmlns="http://www.w3.org/2001/XMLSchema"
    targetNamespace="com:mycomp:service"
    elementFormDefault="qualified" xml:lang="EN">
    <complexType name="A" abstract="true">
        <sequence>
            <element name="a1" type="string" />
        <element name="a2" type="string" />
        </sequence>
    </complexType>
    <complexType name="B">
        <complexContent>
            <extension base="ns:A">
                <sequence>
                    <element name="b1" type="string" />
                </sequence>
            </extension>
        </complexContent>
    </complexType>
    <element name="A" type="ns:A"/>
    <element name="B" type="ns:B"/>
</schema> 
```

# apache - 在 JBoss 上存储数据

> ID：12848614
> 
> 赞同：1
> 
> 时间：2012-10-11T21:13:40.093
> 
> 标签：apache, jboss, application-server, data-synchronization

我想在 Apache-Server (A) 上提供文件。我想通过带有 JBoss-Server 的 PrimeFaces 前端上传它们。现在我被指示将这些传递给另一个 Apache-Server (B)。我将在（A）和（B）之间实现同步。

这些文件的大小约为 1gb，一旦存储在 (A) 上就会自动删除。

我不能将文件临时存储在 JBoss-Server 上并与 (A) 同步吗？无论如何，数据都会通过它，而 JBOSS 和 (B) 无论如何都将在同一台物理机器上。这样我根本不需要（B）。似乎是多余的。

有人推测应用服务器（JBoss）可能不适合处理数据，而 Apache 更适合它。

有人可以帮我解决这个问题吗？或者指出我应该用谷歌搜索的正确方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:16:01.407

原来没有 Apache-Server (B)。数据在 JBoss 和 Apache-Server (A) 之间同步。

所以我所有的怀疑都是适当的:)

# php - 使用 dataurl 将 PDF 流式传输到 iframe - 仅适用于 Chrome

> ID：12848616
> 
> 赞同：2
> 
> 时间：2012-10-11T21:13:54.103
> 
> 标签：php, html, iframe, data-url

以下适用于 Chrome，但 iframe 内容在 Firefox 15 和 IE 9 中为空白。

```
<html>
  <head></head>
  <body>
    <p>this n that</p>
    <iframe type="application/pdf"
            width="95%"
            height="95%"
            src="data:application/pdf;base64,<?php echo base64_encode(file_get_contents('memlist.pdf'));?>">
      Oops, you have no support for iframes.
    </iframe>
    <p>this n that</p>
  </body>
</html> 
```

问题似乎是dataurl。如果我将它更改为简单的 src="memlist.pdf" 那么它可以在任何地方工作。PDF 大小为 75kb。

dataurl 是否存在一些（当前）浏览器限制？

（由于某些身份验证复杂性，我试图避免使用 http url 回调服务器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:28:49.747

我刚刚逐字复制了您的源代码，将 php 输出编码 pdf 的部分替换为我从在线编码器返回的字符串。

原始 pdf 文件为 141kb，编码后的字符串为 194,065 字节——和 url 一样大。

它在 Chrome 中工作得很好，就像它对你一样。同样，Opera 也没有它。

因此，我从 iframe 标记中删除了 type='application/pdf' 属性。现在 Chrome 和 Opera 都会显示该文件，而 IE9 仍然拒绝。

我尝试通过 javascript 更改 src（以防万一），通过 Opera/Chrome 没有问题，但仍然无法使用 IE。

过去，我使用 php 即时创建 pdf，只需将 iframe 的 src 设置为 php 文件的 url，并使用 GET 参数完成。这在 IE6 上运行得很好（以及 Opera、chrome 和 ff - 从未在移动设备上尝试过，那是 5 年前的事了）

一些旧的示例代码，我希望会有所帮助：

**(1) 插入 iframe 的 Javascript**

```
function  showPdfTt(studentId)
{
    var url, tgt;
    title = byId("popupTitle");
    title.innerHTML = "Timetable for " + studentId;
    tgt = byId("popupContent");
    url = "pdftimetable.php?";
    url += "id="+studentId;
    url += "&type=Student";
    tgt.innerHTML = "<iframe onload=\"centerElem(byId('box'))\" src='"+url+"' width=\"700px\" height=\"500px\"></iframe>";
} 
```

**pdfTimetable.php 的输出部分**

```
$pdfStr = $pdf->output();
$myFile = fopen("lastRequested.pdf", "wb");  // just here for debugging purposes
fwrite($myFile, $pdfStr);
fclose($myFile);

$pdf->ezStream();   // send output to stdout (the browser) - uses fpdf for generation
exit; 
```

**fpdf的输出部分**

```
 if(php_sapi_name()!='cli')
        {
            //We send to a browser
            header('Content-Type: application/pdf');
            if(headers_sent())
                $this->Error('Some data has already been output, can\'t send PDF file');
            header('Content-Length: '.strlen($this->buffer));
            header('Content-Disposition: inline; filename="'.$name.'"');
            header('Cache-Control: private, max-age=0, must-revalidate');
            header('Pragma: public');
            ini_set('zlib.output_compression','0');
        }
        echo $this->buffer;
        break; 
```

# javascript - 对象定义 SyntaxError

> ID：12848624
> 
> 赞同：2
> 
> 时间：2012-10-11T21:14:39.610
> 
> 标签：javascript

为什么第二行代码会产生错误而不是第三行？

```
{ foo: 'bar' } // => 'bar'

{ "foo": 'bar' } // => SyntaxError: Invalid label

({ "foo": 'bar' }) // => { foo: 'bar' }. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T21:22:58.547

语言规范的相关部分是[http://es5.github.com/#x12.4](http://es5.github.com/#x12.4)

> ExpressionStatement : [lookahead ∉ { `{`, `function`}] 表达式`;`

前瞻部分意味着只有当它出现在预期语句的位置（如果它不以`{`or开头）时，它才会被视为表达式`function`。

* * *

```
{ foo: 'bar' } 
```

`'bar'`是包含带有标签的表达式语句的语句块`foo`。标签允许您进出`break`命名`continue`循环，但可以附加到任何语句，而不仅仅是循环。

```
{ "foo": 'bar' } 
```

解析器开始解析这个，找到一个表达式`"foo"`，然后寻找一个二元运算符，但`:`它不是一个有效的二元运算符，所以它会因为语法异常而失败。

```
({ "foo": 'bar' }) 
```

这里的括号进入一个表达式上下文，因此`{`被视为开始一个对象构造函数而不是一个块的开始。

# python - 尽管出现此 urllib2 错误，但如何在 Python 2.7 中不在代理之后部署我的 Google App Engine 项目？

> ID：12848631
> 
> 赞同：2
> 
> 时间：2012-10-11T21:15:16.137
> 
> 标签：python, google-app-engine, deployment, web-deployment

从这个问题（[Can't deploy my app to Google App Engine](https://stackoverflow.com/questions/5520603/cant-deploy-my-app-to-google-app-engine)）中，我看到生产 GAE 中可能不允许某些导入。我减少了以下内容：

```
import webapp2 # Comes with latest GAE w/ Python 2.7
import os # for loading appropriate files on the server

from google.appengine.ext import db
from google.appengine.api import channel
from google.appengine.ext.webapp import template 
```

我没有直接链接到我的 Python 脚本中的网站。这是我引用文件的唯一行。

```
path = os.path.join(os.path.dirname(__file__), 'myfile.html') 
```

我在家里工作，而不是在代理后面。尽管我在 SO 的其他问题和各种搜索结果中看到了所有这些因素，但我仍然收到以下错误。

```
2012-10-11 13:22:01,890 ERROR appcfg.py:2182 An error occurred processing file '':
<urlopen error [Errno 11004] getaddrinfo failed>. Aborting. 
Traceback (most recent call last):

File "C:\Program Files (x86)\Google\google_appengine\appcfg.py", line 171, in <module>
run_file(__file__, globals())

File "C:\Program Files (x86)\Google\google_appengine\appcfg.py", line 167, in run_file
execfile(script_path, globals_)

File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 4191, in <module>
main(sys.argv)

File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 4182, in main
result = AppCfgApp(argv).Run()

File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 2579, in Run
self.action(self)

File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 3927, in __call__
return method()

File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 3041, in Update
self.UpdateVersion(rpcserver, self.basepath, appyaml)

File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 3023, in UpdateVersion
lambda path: self.opener(os.path.join(basepath, path), 'rb'))

File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 2152, in DoUpload
self.resource_limits = GetResourceLimits(self.rpcserver, self.config)

File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 357, in GetResourceLimits
resource_limits.update(GetRemoteResourceLimits(rpcserver, config))

File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 328, in GetRemoteResourceLimits
version=config.version)

File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appengine_rpc.py", line 383, in Send
f = self.opener.open(req)

File "C:\Python27\lib\urllib2.py", line 400, in open
url = rest

File "C:\Python27\lib\urllib2.py", line 418, in _open
user_passwd = unquote(user_passwd)

File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
"""Default error handler: close the connection and raise IOError."""

File "C:\Python27\lib\urllib2.py", line 1215, in https_open
s += unichr(int(item[:2], 16)) + item[2:]

File "C:\Program Files (x86)\Google\google_appengine\lib\fancy_urllib\fancy_urllib\__init__.py", 
    line 383, in do_open
raise url_error

urllib2.URLError: <urlopen error [Errno 11004] getaddrinfo failed>
2012-10-11 13:22:01 (Process exited with code 1) 
```

所以出现了错误，我真的不认为这是在我的尽头，因为我编写的代码是如此之少。回顾一下：

*   与其他问题及其未标记的解决方案不同，我不支持代理；
*   我的 python 脚本中没有任何互联网 URL；
*   我正在使用 Python 2.7 和 Google App Engine 启动器上的 Deploy 按钮。

我没有尝试过的一种解决方案是为我的代理设置一个环境变量（http_proxy、https_proxy），因为我不知道将它设置为哪个代理；我没有。在我的项目设置中，我将[https://myappname.appspot.com](https://myappname.appspot.com)作为部署服务器。

我该如何进行？您可以从我所描述的内容中立即识别出任何危险信号吗？

笔记：

*   自从开始写这篇文章并不断点击 StackOverflow 的更多建议以来，我尝试将一个新的环境变量 http_proxy 设置为我的 IP、我的 IP：8080 和“host_or_ip:port”（来自问题[How can I disable the automatic checks for Google App Engine Launcher 启动时更新？](https://stackoverflow.com/questions/6468191/google-app-engine-launcher-slow-to-launch-behind-proxy-possibly-because-of-ch)）。
*   当你们好人阅读并提出您的想法时，我将尝试与 https_proxy 相同的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:49:17.127

确保您使用的是正确的开发服务器。

它应该是：[http ://appengine.google.com](http://appengine.google.com)

# c - C 链表错误

> ID：12848633
> 
> 赞同：0
> 
> 时间：2012-10-11T21:15:18.953
> 
> 标签：c, linked-list

我需要一些认真的帮助来理解 C++ 中的链接列表我想使用我几周前使用数组结构编写的程序并将它们转换为链接列表并添加几个新函数。我最担心的是我对链接列表没有信心，并且一直在这里和其他网站上花费时间来获取有关它们的知识。但是我找不到可以帮助我解决我现在面临的问题的来源。

这是我的原始代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

#define MAX 100

struct YouTubeVideo { 
char video_name[1024];        // YouTube video name
int video_ranking;            // Number of viewer hits
char video_url[1024];         // YouTube URL
};

struct YouTubeVideo Collection[MAX];

int tail = 0;

//-- Forward Declaration --// 
void printall();
void insertion();
void sort();
void branching(char option);        
void menu(); 
void load_file();
void save_file();

int main()
{
char ch; 

load_file();

printf("\n\nWelcome to CSE240: YouTube Classic Hits\n");

do {
     menu();
     fflush(stdin);                 // Flush the standard input buffer 
     ch = tolower(getchar());       // read a char, convert to lower case
     branching(ch);
} while (ch != 'q');

return 0; 
}

void menu()
{
 printf("\nMenu Options\n");
 printf("------------------------------------------------------\n");
 printf("i: Insert a new favorite\n");
 printf("p: Review your list\n"); 
 printf("q: Save and quit\n");
 printf("\n\nPlease enter a choice (i, p, or q) ---> "); 
}

void branching(char option)
{
switch(option)
{
    case 'i':
        insertion();
        sort();
    break;

    case 'p':
        printall();
    break;

    case 'q':
        save_file();
    break;

    default:
        printf("\nError: Invalid Input.  Please try again..."); 
    break;
}
}

void insertion()
{
if(tail < MAX)
{
    printf("\nWhat is the name of the video? (No spaces characters allowed)\n");
    scanf("%s", Collection[tail].video_name);

    printf("\nHow many viewer hits does this video have?\n");
    scanf("%d", &Collection[tail].video_ranking);

    printf("\nPlease enter the URL: ");
    scanf("%s", Collection[tail].video_url);

    tail++;
}
else
{
    printf("\nERROR: Your collection is full. Cannot add new entries.\n");
}
}

void sort()
{
int i = 0, j = 0; 
struct YouTubeVideo temp;

for(i = 0; i < tail; i++)
{
    for(j = i+1; j < tail; j++)
    {
        if(Collection[i].video_ranking < Collection[j].video_ranking)
        {
            temp = Collection[i];
            Collection[i] = Collection[j];
            Collection[j] = temp;
        }
    }
}

//RA: I think it's easier (and faster) to assume your current list is already
//    sorted and then insert your new element into the correct position. (You
//    can show this maintains a sorted list by induction.)

printf("\nSorting Complete...\n");
}

void printall()
{
int i; 

printf("\nCollections: \n"); 

for(i = 0; i < tail; i++)
{
    printf("\nVideo Name: %s", Collection[i].video_name);
    printf("\nRanking (Hits): %d", Collection[i].video_ranking);
    printf("\nURL: %s", Collection[i].video_url);
    printf("\n");
}
}

void save_file() { 
FILE *fileName;                                     // declare a pointer to File type 
char ch; 
int index = 0; 

fileName = fopen("ranking.dbm", "wb");              // "b" for binary mode 
                                                        // ìwî for write

if(fileName != NULL) 
{   
    fwrite(&tail, sizeof(int), 1, fileName);        // Write tail to the     file for later retrieval.

    for(index = 0; index < tail; index++)
    { 
        fwrite(&Collection[index].video_name, 1024, 1, fileName); 
        fwrite(&Collection[index].video_ranking, sizeof(int), 1, fileName);     
        fwrite(&Collection[index].video_url, 1024, 1, fileName);
    } 

    fclose(fileName);
} 
else 
    printf ("ERROR: Could not open file for saving data !\n"); 
}

void load_file() { 
FILE *fileName;                         // declare a pointer     to File type 
int index = 0; 

fileName = fopen("ranking.dbm", "rb");  // "b" for binary mode 
                                    // ìrî           for read

if(fileName != NULL) {   
    fread(&tail, sizeof(int), 1, fileName);

    for(index = 0; index < tail; index++) 
    {
        fread(Collection[index].video_name, 1024, 1, fileName);
        fread(&Collection[index].video_ranking, sizeof(int), 1, fileName);
        fread(Collection[index].video_url, 1024, 1, fileName);
    }

    fclose(fileName);
}
else 
    printf ("ERROR: Could not open file for loading data !\n"); 
} 
```

这些是我应该做的确切说明：

`Convert the “YouTubeVideo” array structure (Collection) into a linked-list. The program must sort (by “video_name”) the entries as they are inserted into the linked-list. [30 points] (*Note: You will lose 10 points if the linked list is not sorted.)`

现在，根据我目前的理解，我已经尽我所能尝试了，但我现在遇到了问题。

这是我尝试解决方案的代码：

```
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

using namespace std;

#define MAX 100

 struct YouTubeVideo
{
char name[1024];        // YouTube video name
int ranking;                // Number of viewer hits
char url[1024];             // YouTube URL
};

struct YouTubeVideo Collection[MAX];

int tail = 0;

//-- Forward Declaration --//
void printall();
void insertion();
void branching(char option);
void menu();

int main()
{
char ch;

// TODO: Add code to load save data from file

cout << "\n\nWelcome to CSE240: YouTube Classic Hits\n";

do {
    menu();
    cin >> ch; // read a char, convert to lower case
    cin.ignore();

    ch = tolower(ch);
    branching(ch);
} while (ch != 'q');

return 0;
}

void menu()
{
cout << "\nMenu Options\n";
cout << "------------------------------------------------------\n";
cout << "i: Insert a new favorite\n";
cout << "p: Review your list\n";
cout << "s: Search\n";
cout << "d: Delete an entry\n";
cout << "q: Save and quit\n";
cout << "\n\nPlease enter a choice (i, p, s, d, or q) ---> ";
}

void branching(char option)
{
switch(option)
{
    case 'i':
        insertion();
        break;

    case 'p':
        printall();
        break;

    case 's':
        // TODO: Add code to search for a particular node by name
        break;

    case 'd':
        // TODO: Add code to remove a node
        break;

    case 'q':
        // TODO: Add code to save data into a file
        break;

    default:
        cout << "\nError: Invalid Input.  Please try again...";
        break;
}
}

void insertion() { // insert a new entry
struct YouTubeVideo *p, *temp;
p = (struct YouTubeVideo *) malloc(sizeof(struct YouTubeVideo)); if (p == 0) {
    printf("out of memory\n"); return; }
printf("Enter Video name, Views, URL: \n"); scanf("%s", p->name); // p->name is array         scanf("%d", &p->phone);
scanf("%s", p->ranking);
temp = head;
if ((head == NULL)||(strcmp(p->name, temp->name) <=0)) {
    p->next = head;
    head = p;
}

else {
    while (temp->next != NULL) {
        if (stricmp(p->name, temp->next->name) <=0) { p->next = temp->next;
            temp->next = p;
            return;
        } else
            temp = temp->next; }
    p->next = NULL;
    temp->next = p;
} }

void printall()
{
int i;

cout << "\nCollections: \n";

for(i = 0; i < tail; i++)
{
    cout << "\nVideo Name: " << Collection[i].name << "\n";
    cout << "\nRanking (Hits): " << Collection[i].ranking << "\n";
    cout << "\nURL: " << Collection[i].url << "\n";
    cout << "\n";
}
} 
```

我遇到的问题是我`insertion`收到错误`undeclared identifier head`并且`no member named next in YouTubeVideo`. 我尝试在很多地方放置和声明它们，但似乎无法修复这些错误。

我真的很感激你能给我的一些帮助和任何可能的知识。我真的给了这个很大的努力，但我只是被困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:46:18.580

好的，我会尽力让您快速了解 C++ 中的链表是什么，同时让您通过自己的作业来学习。您的代码几乎是 C，这将更像 C++ 风格，尽管我会避免使用模板，并且有时会拼出 C++ 兽医可能会使事情变得更简洁的内容。

这是一个包含整数的单链表的典型简单节点结构：

```
struct LinkedListNode
{
  int value;
  LinkedListNode* next;
}; 
```

这个节点保存一个整数，加上它保存一个指向列表中下一个节点的指针。

对于这样的链表，这将是一个简化的界面：

```
struct LinkedList
{
public:
  LinkedList();
  bool isEmpty() const;
  int valueAtBeginning() const;
  void insertAtBeginning(int newValue);

private:
  LinkedListNode* head;
}; 
```

这个类提供了一个构造函数（一种制作链表的方法），一种向列表中插入新项目的方法，一种获取列表中第一个值的方法，以及一种检查列表是否为空的方法。它还保留（供自己参考）指向列表中第一个节点的指针。

让我们通过一种方式来实现这些。

这是构造函数：

```
LinkedList::LinkedList():
  head(NULL)
{
} 
```

此函数将“第一项”指针初始化为 NULL。这将是“没有第一项，因为列表为空”的代码。说到这里：

```
bool LinkedList::isEmpty() const
{
  return (head == NULL);
} 
```

这个函数说“如果头指针为空，则列表为空。否则它不是”。请注意该方法是如何标记的`const`，这使得该代码不会修改列表的任何部分。

下一个也很简单：

```
int LinkedList::valueAtBeginning() const
{
  assert(!isEmpty());
  return head->value;
} 
```

这个函数简单地跟随指向列表中第一项的指针，并取出它的`value`成员并返回它。它还断言列表不为空。这将很容易找出您是否犯了从空列表中要求某些东西的错误。同样，请注意该方法是如何标记的`const`，因为它不会更改列表。

最后，在开头添加新内容：

```
void LinkedList::insertAtBeginning(int newValue)
{
  LinkedListNode* oldHead = head;
  LinkedListNode* newHead = new LinkedListNode();
  newHead->value = newValue;
  newHead->next = oldHead;
  head = newHead;
} 
```

这在概念上很简单。我们创建一个新节点，并将其粘贴在列表的前面。旧的第一项成为第二项。另外，请注意我在这里如何使用 C++`new`而不是 C。`malloc`测验：如果列表为空，这会起作用吗？

好的，现在我将由您来存储不仅仅是整数。另外，尝试弄清楚如何编写一个从列表中删除第一项的方法（使用 C++ `delete`，而不是 C `free`）。然后尝试编写一个“遍历”列表的方法，打印出每个整数。一旦你把它写下来，试着在最后或中间编写添加/删除的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:46:26.783

您需要实际实现一个链表。这看起来像是一个家庭作业，所以我想知道你对 C++ 的了解程度。如果您还没有真正进行类和面向对象的编程，那么解决此问题的最简单方法是将下一个和上一个对象添加到您的 youtube 视频结构中。像这样：

```
struct YouTubeVideo {   
    char video_name[1024];        // YouTube video name  
    int video_ranking;            // Number of viewer hits 
    char video_url[1024];         // YouTube URL  
    YouTubeVideo* next;
    YouTubeVideo* previous;
}; 
```

接下来，您将需要添加一个 head 声明。这将是 YouTubeVideo* 类型。添加第一个视频时，将头部设置为指向该视频。然后，无论何时添加新视频，将头视频的下一个指针设置为指向新视频，新视频上的前一个指针应指向头视频。那是您的链表的开始，但是您的解决方案仍然很混乱。

如果我是你，我会看看一些 Linked List 类是如何实现的。这是我编写的第一个链表类的头文件：

```
#ifndef LINKEDLIST_H 
#define LINKEDLIST_H

#include "List.h" 

class LinkedList : public List { 
 public: 
  LinkedList();
  virtual double get(int index) const; 
  virtual void add(double item); 
  virtual void insert(int index, double item); 
  virtual double delete_item(int index); 
  virtual int size() const;  
 private:
  class Node;
  Node* first;
  Node* last;
  int listsize;
}; 
class LinkedList::Node{
 public:
  double value;
  Node* next;
};

#endif 
```

可以看到这个列表中有一个类 Node ，这个类包含一个 value `double value`。如果您想使用此代码，则必须使您的节点类具有一个字段，即 YouTubeVideo* 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:38:06.177

简单来说，您需要将数组（结构类型）转换为具有相同字段的链表。

```
#include <stdio.h>
#include <stdlib.h>

struct LL
{
    char name[1024];        // YouTube video name
    int ranking;                // Number of viewer hits
    char url[1024];             // YouTube URL

    struct LL *next; // pointer to the next element
};

// this is from your code
#define MAX 100
struct YouTubeVideo
{
    char name[1024];        // YouTube video name
    int ranking;                // Number of viewer hits
    char url[1024];             // YouTube URL
};

// now you have an array of those structs
struct YouTubeVideo Collection[MAX];

// and you can fill it up as you wish

int main(int argc, char**argv)
{
    struct LL *ll = NULL;

    for (int i = 0; i < MaxElements; i++)
    {
        // we have a blob of memo to store your stuff
        x=(struct LL*)calloc(1, sizeof(struct LL));
        if (x != NULL)
    {
        // just run out of memory
        // so handle the error
    }
        else
    {
        // nothing to do just copy fields of Collection[i]
        // to the newly allocated space
        x->name    = strdup(Collection[i].name);
        x->ranking = Collectionp[i].ranking;
        x->url     = strdup(Collection[i].name);
        x->next    = NULL;

        // since you want your result sorted we need to find its
        // location in the linked list

        if (ll == NULL) // if the list is empty
        {
            ll=x;
            // and nothing else to do since a list with a single element
            // is always sorted
        }
        else
        {
            struct LL *p = ll, *q = ll;
            // need to find where in the list should x be inserted
            // p is not null (see the assignment above) so we
            // always can call strcmp on it. also for x

            while (p!=NULL && strcmp(p->name, x->name) < 0)
        // p can become null if your struct is to become the last
        // in the linked list: the order of comparisons are
        // important
        {
            q=p; // we need q, the parent node because it is
                 // the parent node's next pointer needs to be modified
            p=p->next;
        }
            // once we get here p points to an LL structure or NULL if
            // the element to be inserted will be the last in the list
            // q points to the element before p

                // one more trick: if element being inserted is comes earlier than
                // the first element we need to modify ll
                if (q == ll)
                {
                 x->next = ll;
                 ll = x;
                }
                else
                {
                    x->next=q->next;
                    q->next=x;

                // these lines don't fiddle with p
            }
     }
  } 
```

}

您可能希望将代码放入函数中。请注意，插入单链表比插入双链表要复杂一些，但它节省了一个指针。还有一句警告：我没有测试过这个，只是输入了它的逻辑。

# r - 来自已计算数据的 R 距离矩阵格式

> ID：12848635
> 
> 赞同：3
> 
> 时间：2012-10-11T21:15:25.740
> 
> 标签：r, phylogeny

这是我第一次与 R 合作。

我有一张 3 列 12090 行（156 个细菌）的桌子。前两列是细菌的名称，最后一列是表示生物之间相关性的数字（基于一种基因组相似性）。例如（组成数字）：

```
bacteria1    bacteria2    0.25846
bacteria1    bacteria3    0.35986
bacteria2    bacteria1    0.57896
bacteria2    bacteria3    0.54596
bacteria3    bacteria1    0.23659
bacteria3    bacteria2    0.36528 
```

我希望能够将这些邻居加入到某种系统发育树中。我看到'nj'需要一个距离矩阵来做到这一点。我如何将其转换为距离矩阵或可用格式？（数字已经是距离，所以不应该做任何数学运算）我已经尝试过 as.dist() 和 as.matrix() 和 reshape() 但作为新手，我可能做错了一切。（重塑可能是我需要的..）

或者，如果有人知道如何通过其他方式将它们变成一棵树，那就太好了。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T00:20:12.953

听起来您有距离矩阵的上三角部分或下三角部分，但没有尺寸。（虽然你确定你有 156 行吗？如果有 18 种细菌，应该有`choose(18,2)`= 153 个条目，而不是 156 个。）

假设您的表中确实有 153 行，您可以这样填写矩阵：

```
m <- matrix(nrow=18, ncol=18)
m[row(m) < col(m)] <- x         # if it's the upper triangular portion 
```

或者

```
m[row(m) > col(m)] <- x         # if it's the lower triangular portion 
```

然后`diag(m) <- 0`是对角线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T21:30:54.880

使用库`reshape2`（这与基础 R 中的 reshape 函数不同，而且我认为很多

```
# Load the library (after installing it, of course)
library(reshape2)

# Load up your data - for future reference, it's always helpful to post your data
# with a question.  I used dput(x) to generate this structure below:
x <- structure(list(V1 = structure(c(1L, 1L, 2L, 2L, 3L, 3L), 
     .Label = c("bacteria1", "bacteria2", "bacteria3"),
     class = "factor"), V2 = structure(c(2L, 3L, 1L, 3L, 1L, 2L),
     .Label = c("bacteria1", "bacteria2", "bacteria3"), class = "factor"),
     V3 = c(0.25846, 0.35986, 0.57896, 0.54596, 0.23659, 0.36528)),
     .Names = c("V1", "V2", "V3"), class = "data.frame",
     row.names = c(NA, -6L))

# Recast it - acast returns a matrix with V1 as the records, V2 as the columns,
# and V3 as the values
distmat <- acast(x, V1 ~ V2, value.var = "V3") 
```

# java - 以编程方式用 Java 替换 JavaScript 方法

> ID：12848638
> 
> 赞同：0
> 
> 时间：2012-10-11T21:15:34.917
> 
> 标签：java, regex, string

我需要使用 Java 替换文件中的一些 JavaScript。我正在采取的步骤基本上是这样的：

1.  读入一个文件（它是一个 .asp 文件，其中包含从另一个系统生成的 JavaScript）
2.  用我想要的替换不需要的 JavaScript 函数
3.  将其写回最初生成的文件

我在执行第 2 步时遇到了问题，因为我的代码似乎对 replaceAll 方法感到异常。假设我要替换此方法：

```
function sayHi() {
    alert('hi');
} 
```

...有这样的事情：

```
function sayHi() {
    alert("Hello, World!");
} 
```

我的代码如下所示：

```
private static final String REPLACEMENT_METHOD =
        "function sayHi() {\n" +
        "   alert('Hello, World!');\n" +
        "}";

private static final String METHOD_TO_REPLACE =
        "function sayHi() {\n" +
        "   alert('hi');\n" +
        "}";

String content = // Get the contents from the file...

content = content.replaceAll(METHOD_TO_REPLACE, REPLACEMENT_METHOD); 
```

我遇到的问题是我要替换的字符串被解释为正则表达式（它只是文字文本，但它当然被解释为正则表达式）并且它对我很不利。不幸的是，我无法找到正确的语法来正确转义特殊字符，并且仍然可以让它以我想要的方式匹配。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:25:18.767

您可以在匹配模式周围使用引号运算符：

```
private static final String METHOD_TO_REPLACE =
    "\\Q" +
    "function sayHi() {\n" +
    "   alert('hi');\n" +
    "}" +
    "\\E"; 
```

顺便一提，

```
function sayHi() {
    alert("Hello, World!");
} 
```

不会在Java中工作。你可能想要：

```
void sayHi() {
    alert("Hello, World!");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:28:23.460

方法 replaceAll 确实使用第一个参数作为模式。

因此，您有以下解决方案。

1.  手动转义你的模式。据我所知，你的情况并不太难。
2.  尝试以编程方式使用`Pattern.quote()`
3.  `String.replace()`在循环中使用而不是`replaceAll()`. 方法`replace()`适用于纯字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T21:21:22.870

你试过反斜杠`\`吗？

# c# - 如何将 Key + Value 添加到 ListBox？

> ID：12848644
> 
> 赞同：1
> 
> 时间：2012-10-11T21:15:55.403
> 
> 标签：c#

我有这个按钮点击代码现在正在工作：

```
private void button6_Click(object sender, EventArgs e)
        {

            using (var w = new StreamWriter(keywords))
            {
                crawlLocaly1 = new CrawlLocaly();
                crawlLocaly1.StartPosition = FormStartPosition.CenterParent;
                DialogResult dr = crawlLocaly1.ShowDialog(this);
                if (dr == DialogResult.OK)
                {
                    if (LocalyKeyWords.ContainsKey(mainUrl))
                    {
                        LocalyKeyWords[mainUrl].Clear();
                        LocalyKeyWords[mainUrl].Add(crawlLocaly1.getText());
                    }
                    else
                    {
                        LocalyKeyWords[mainUrl] = new List<string>();
                        LocalyKeyWords[mainUrl].Add(crawlLocaly1.getText());
                    }
                    Write(w);
                    listBox1.Items.Add("Url: " + LocalyKeyWords[mainUrl] + " --- " + "Localy KeyWord: " + crawlLocaly1.getText());
                }
                if (dr == DialogResult.Cancel)
                {
                    Write(w);
                }
            } 
        } 
```

当我对 mainUrl(key) 或 crawlLocaly1.getText()(key 的值) 进行更改时，我需要它，所以它也会在 ListBox 中实时更改。我试着这样做：

```
listBox1.Items.Add("Url: " + LocalyKeyWords[mainUrl] + " --- " + "Localy KeyWord: " + crawlLocaly1.getText()); 
```

但是它不显示键及其值，并且它添加一个新行而不是仅更新键的值，如果键已经存在或者如果键在列表中不存在，则将新键及其值添加到 ListBox .

我如何制作它以便它会在 ListBox 中实时更新它？

* * *

好的，将 ListBox 行更改为：

```
listBox1.Items.Add("Url: " + mainUrl + " --- " + "Localy KeyWord: " + crawlLocaly1.getText()); 
```

现在它添加它很好，但它添加它作为一个新行。我希望它将添加它并替换 ListBox 中已经存在 mainUrl 的行。

如果 ListBox 中不存在 mainUrl，则将其值添加到新行中。但是，如果 ListBox 中存在 Key(mainUrl) ，则始终替换它或仅更改 value(crawlLocaly1.getText() ) 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:28:53.080

 **要在你写的时候**更正这条线**`LocalyKeyWords[mainUrl]`，你会得到一个`List<string>`对象。因此，当您将此 List 连接到字符串时，您实际上调用了方法`List<string>.ToString()`。**

 **尝试使用此行 insted：

```
listBox1.Items.Add("Url: " + mainUrl + " --- " + "Localy KeyWord: " + LocalyKeyWords[mainUrl][0]); 
```

**对于实时问题**
要实时编辑该行，您需要删除之前的上一行，就像这样

```
private void button6_Click(object sender, EventArgs e) 
        { 

            using (var w = new StreamWriter(keywords)) 
            { 
                crawlLocaly1 = new CrawlLocaly(); 
                crawlLocaly1.StartPosition = FormStartPosition.CenterParent; 
                DialogResult dr = crawlLocaly1.ShowDialog(this); 
                if (dr == DialogResult.OK) 
                { 
                    int line = listBox1.Items.Count;
                    if (LocalyKeyWords.ContainsKey(mainUrl)) 
                    { 
                        line = listBox1.Items.IndexOf("Url: " + mainUrl+ " --- " + "Localy KeyWord: " + LocalyKeyWords[mainUrl][0]);

                        listBox1.Items.Remove("Url: " + mainUrl+ " --- " + "Localy KeyWord: " + LocalyKeyWords[mainUrl][0]);
                        LocalyKeyWords[mainUrl].Clear(); 
                        LocalyKeyWords[mainUrl].Add(crawlLocaly1.getText()); 
                    } 
                    else 
                    { 
                        LocalyKeyWords[mainUrl] = new List<string>(); 
                        LocalyKeyWords[mainUrl].Add(crawlLocaly1.getText()); 
                    } 
                    Write(w); 
                    listBox1.Items.Insert(line, "Url: " + mainUrl+ " --- " + "Localy KeyWord: " + LocalyKeyWords[mainUrl][0]);
                } 
                if (dr == DialogResult.Cancel) 
                { 
                    Write(w); 
                } 
            }  
        } 
```

只是为了您知道，使用包含两个或多个变量的数据。最好使用`ListView`控件。该控件知道如何像列表一样工作，并且可以将数据拆分为列。请参阅msdn 中的[ListView](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:42:41.643

如果我理解正确，请尝试以下操作：

```
// Find the existing item. (s.Contains could be changed to something else, like s.StartsWith.)
var existingItem = listBox1.Items.OfType<string>()
    .FirstOrDefault(s => s.Contains(mainUrl));

if (existingItem != null)
{
    // Item exists, find index of it and change it.
    var index = listBox1.Items.IndexOf(existingItem);
    listBox1.Items[index] = "Url: " + mainUrl + " --- " + "Localy KeyWord: " + crawlLocaly1.getText();
}
else
{
    // Item is new, add it.
    listBox1.Items.Add("Url: " + mainUrl + " --- " + "Localy KeyWord: " + crawlLocaly1.getText());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T22:06:24.070

如果我理解正确，您应该添加以下类：

```
public class KeyWordWrapper
{
    public string Url { get; private set; }
    public string Value { get; set; }

    public KeyWordWrapper(string url)
    {
        this.Url = url;
    }

    public override string ToString()
    {
        return string.Format("Url: {0} --- Localy KeyWord: {1}", Url, Value);
    }
} 
```

然后定义你`LocalyKeyWords`的如下：

```
Dictionary<string, KeyWordWrapper> LocalyKeyWords =
  new Dictionary<string, KeyWordWrapper>(); 
```

将这两行放入表单的构造函数中

```
listBox1.DisplayMember = "Value";
listBox1.DataSource = LocalyKeyWords; 
```

最后更新 button6_Click 如下：

```
if (dr == DialogResult.OK)
{
    KeyWordWrapper keyWordWrapper;
    if (!LocalyKeyWords.TryGetValue(mainUrl, out keyWordWrapper))
    {
        keyWordWrapper = new KeyWordWrapper(mainUrl);
        LocalyKeyWords.Add(mainUrl, keyWordWrapper);
    }

    keyWordWrapper.Value = crawlLocaly1.getText();
    Write(w);
} 
```**

# c++ - 链接 CXX 可执行文件 - /usr/bin/ld: 找不到

> ID：12848645
> 
> 赞同：1
> 
> 时间：2012-10-11T21:15:56.507
> 
> 标签：c++, gcc, g++, ros

你好 C++ 和/或 ROS 专家

我刚刚重新安装了 Ubuntu 12.04 和 ROS。

我的旧安装也在 ubunru 12.04 上，效果很好。

但是现在当我尝试对我的项目进行 make 或 rosmake 时，出现以下错误：

```
 Linking CXX executable ../bin/robot_task_execution
  /usr/bin/ld: cannot find -lrw_sandbox
  /usr/bin/ld: cannot find -lrw_control
  /usr/bin/ld: cannot find -lrw_algorithms
  /usr/bin/ld: cannot find -lrw_pathplanners
  /usr/bin/ld: cannot find -lrw_pathoptimization
  /usr/bin/ld: cannot find -lrw_task
  /usr/bin/ld: cannot find -lrw_simulation
  /usr/bin/ld: cannot find -lrw_opengl
  /usr/bin/ld: cannot find -lrw_lua
  /usr/bin/ld: cannot find -llua51
  /usr/bin/ld: cannot find -lrw_proximitystrategies
  /usr/bin/ld: cannot find -lyaobi
  /usr/bin/ld: cannot find -lpqp
  /usr/bin/ld: cannot find -lrw
  /usr/bin/ld: cannot find -lrw_qhull
  collect2: ld returned 1 exit status 
```

你有什么想法这意味着什么，或者如何解决这个问题？

我像这样安装了ROS，也许我需要别的东西？：

```
sudo sh -c 'echo "deb http://packages.ros.org/ros/ubuntu precise main" > /etc/apt/sources.list.d/ros-latest.list'
wget http://packages.ros.org/ros.key -O - | sudo apt-key add -
sudo apt-get update
sudo apt-get install ros-fuerte-desktop-full
echo "source /opt/ros/fuerte/setup.bash" >> ~/.bashrc
. ~/.bashrc
sudo apt-get install python-rosinstall python-rosdep 
```

最好的问候 Bjarke

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:48:06.593

该错误表明链接器无法找到库 rw_sandbox、rw_sandbox 等。确保在 makefile 中指定了库位置的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T21:40:12.043

该消息说它没有找到链接您的程序所需的库。快速查看[安装指南](http://www.ros.org/wiki/fuerte/Installation/Ubuntu)说：

如果每次启动新的 shell 时自动将 ROS 环境变量添加到您的 bash 会话中，这会很方便：

```
echo "source /opt/ros/fuerte/setup.bash" >> ~/.bashrc
. ~/.bashrc 
```

所以我猜你应该启动 setup.bash 以便它更新链接器变量（通常是 LD_LIBRARY_PATH）以添加丢失库的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-07T02:44:19.950

您可以通过将 -llibs 添加到 g++ 命令行来直接链接库。

请检查这个答案： [Compile roscpp without ros (using g++)](https://stackoverflow.com/questions/28669349/compile-roscpp-without-ros-using-g/44961567#44961567)

通过在命令行上添加各个库来完成链接。

# jquery - JQuery Dialog Modal Popup昨天工作但今天不行

> ID：12848649
> 
> 赞同：0
> 
> 时间：2012-10-11T21:16:18.530
> 
> 标签：jquery, jquery-dialog

我正在使用 JQuery Dialog 的 Modal Popup 功能，并且已经使用它大概 5-6 个月了。直到今天，我从未遇到过任何问题。在我的电脑上一切正常，但另一名员工收到 JQuery 错误并且不会显示弹出窗口。它昨天为他工作，并且没有对代码库进行任何更改。

我正在使用 Chromes 检查元素选项，他得到的错误是“（'div'）没有'parent（）'功能”。我理解这个错误的含义，但我不知道为什么它首先出现。我检查过的所有其他计算机都工作正常。此外，它与浏览器无关。在 IE、FF 和 Chrome 中破解。

我知道今天早上对我来说有一个 Windows 更新，但我无法想象 Windows 更新会破坏 JQuery 的功能。关于这里可能发生的其他事情有什么想法吗？

```
function ModalPopup(divId, parentId, isExtender) {
if (isExtender == "True") {
    ModalPopupExtender(parentId, divId);
    return;
}

var div = document.getElementById(divId);

//Disable any datepickers on the popup otherwise they will display on load
var datePickers = $(div).find("input[class='datePicker hasDatepicker']");
datePickers.each(function (index) {
    $(this).datepicker('disable');
});

//Find the buttons on the div
var buttons = $(div).find("input[type='submit']");
buttons.each(function (index) {

    $(this).click(function () {
        Cancel(divId);
        //$(div).dialog("close");
    });

    $(this).attr("style", "padding:5px; margin:5px; color:#696969; background-color:#EEE; border-radius:6px;");
});

//Create a footer div, add the buttons to the div
$footerDiv = $('<div style="height:40px;" />');
for (var i = 0; i < buttons.length; ++i) {
    $footerDiv.append(buttons[i]);
}

//Add a canel button that closes the popu
$cancelBtn = $('<input type="button" style="padding:5px; margin:5px; color:#696969; background-color:#EEE; border-radius:6px;" value="Cancel" onclick="Cancel(\'' + divId + '\')" />');
$footerDiv.append($cancelBtn);

//Display the div with the info
$(div).attr("style", "display:block; font-size: 11px;");

//Display the dialog box
$(div).dialog({ minWidth: 300,
    minHeight: 150,
    maxHeight: 400,
    draggable: false,
    resizeable: false,
    modal: true,
    buttons:
    {
        'Cancel': function () {
            $(div).dialog("close");
        }
    },
    open: function (e, ui) {
        $(e.target).parent().find('span').filter(function () {
            return $(this).text() === 'Cancel';
        }).parent().replaceWith($footerDiv);

        //Adjust the width for IE
        var version = getInternetExplorerVersion();
        if (version != -1 && version < 8.0) {
            $(e.target).dialog('option', 'width', ($(e.target)[0].scrollWidth + 50) + 'px');
        }
        else
            $(e.target).dialog('option', 'width', 'auto');

        //Adjust the height if the dialog is too big
        if ($(div).height() > 800)
            $(e.target).dialog('option', 'height', 800);
        $(e.target).dialog('option', 'position', 'center');
    }
});

//Hide the title bar
$(div).dialog().parents(".ui-dialog").find(".ui-dialog-titlebar").hide();
$(div).parent().appendTo(jQuery("form:first"));

//Enable the datepickers again after the dialog has opened
datePickers.each(function (index) {
    $(this).datepicker('enable');
});

//Style any select boxes to be the width of their container
$(div).find("select:[multiple]").each(function () {
    $(this).width("100%");
}); 
```

}

**编辑**另外值得注意的是，如果我单击按钮显示弹出窗口，它会给我一个快速的错误消息，然后刷新页面。

# c# - 在 C# 中访问我在 RSS 中定义的标签

> ID：12848655
> 
> 赞同：1
> 
> 时间：2012-10-11T21:16:34.990
> 
> 标签：c#, .net, rss

我能够将自己的标签添加到 RSS 提要（通过阅读[此问题](https://stackoverflow.com/questions/644315/can-i-add-my-own-tags-in-a-rss-item)中的答案），但现在我似乎无法访问代码中的标签。

我尝试修改一个已经存在的示例提要（[这个](http://cyber.law.harvard.edu/rss/examples/rss2sample.xml)），只添加一个标签，如下所示。

```
<?xml version="1.0"?>
<rss version="2.0" xmlns:my="http://tempuri.org">
   <channel>
      <title>Liftoff News</title>
      <link>http://liftoff.msfc.nasa.gov/</link>
      <description>Liftoff to Space Exploration.</description>      
      <item>
         <title>Star City</title>
         <link>http://liftoff.msfc.nasa.gov/news/2003/news-starcity.asp</link>
         <description>How do Americans get ready to work with Russians aboard the International Space Station? They take a crash course in culture, language and protocol at Russia's &lt;a href="http://howe.iki.rssi.ru/GCTC/gctc_e.htm"&gt;Star City&lt;/a&gt;.</description>
         <pubDate>Tue, 03 Jun 2003 09:39:21 GMT</pubDate>
         <guid>http://liftoff.msfc.nasa.gov/2003/06/03.html#item573</guid>
         <my:br_id>1507</my:br_id>
      </item>          
   </channel>
</rss> 
```

在代码中我有这个类：

```
public class SimpleSyndicationItem
{
    public DateTimeOffset Date { get; set; }
    public string Title { get; set; }
    public Uri Link { get; set; }
    public string Id{ get; set; }

    public SimpleSyndicationItem(DateTimeOffset date, string title, Uri link, string id)
    {
        Date = date;
        Title = title;
        Link = link;
        Id = id;
    }
} 
```

Id 属性应该接收 my:br_id 中的值，现在，在阅读过程中，我有这个：

```
var RssItems = new ObservableCollection<SimpleSyndicationItem>();
var reader = XmlReader.Create("rssexample.xml");    
var feed = SyndicationFeed.Load(reader);

foreach(var item in feed.Items)
{
  //This is the part where I want to access the tag's value, notice the ??
  RssItems.Add(new SimpleSyndicationItem(item.PublishDate, item.Title.text,
                                         item.Links[0].Uri, item.??));
} 
```

至少智能感知没有显示 br_id 所以我想知道在代码中访问这个标签的正确方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:33:59.463

怎么样`item.ElementExtensions[0]`？

# glassfish-3 - 创建自定义 Glassfish V3 领域

> ID：12848660
> 
> 赞同：0
> 
> 时间：2012-10-11T21:16:46.007
> 
> 标签：glassfish-3, realm

我正在尝试为 Glassfish V3.1.1 创建自定义领域，但是当我使用 BASIC 方法登录时出现了一些 LoginException：

> [#|2012-10-11T22:57:21.625+0200|FINE|glassfish3.1.2|org.apache.catalina.authenticator.AuthenticatorBase|_ThreadID=35;_ThreadName=Thread-2;ClassName=org.apache.catalina.authenticator .AuthenticatorBase;MethodName=invoke;|安全检查请求 GET /testForMySimRealm/S1|#]
> 
> [#|2012-10-11T22:57:21.625+0200|FINE|glassfish3.1.2|org.apache.catalina.authenticator.AuthenticatorBase|_ThreadID=35;_ThreadName=Thread-2;ClassName=org.apache.catalina.authenticator .AuthenticatorBase;方法名=调用;| 调用 hasUserDataPermission()|#]
> 
> [#|2012-10-11T22:57:21.625+0200|FINE|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.web.security|_ThreadID=35;_ThreadName=Thread-2;ClassName =com.sun.web.security.RealmAdapter;MethodName=hasUserDataPermission;|[Web-Security][ hasUserDataPermission ] 主体：空 ContextPath：/testForMySimRealm|#]
> 
> [#|2012-10-11T22:57:21.625+0200|FINE|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.web.security|_ThreadID=35;_ThreadName=Thread-2;ClassName =com.sun.web.security.RealmAdapter;MethodName=invokeWebSecurityManager;|[Web-Security] [ hasResourcePermission ] 主体：空 ContextPath：/testForMySimRealm|#]
> 
> [#|2012-10-11T22:57:21.625+0200|FINE|glassfish3.1.2|org.apache.catalina.authenticator.AuthenticatorBase|_ThreadID=35;_ThreadName=Thread-2;ClassName=org.apache.catalina.authenticator .AuthenticatorBase;方法名=调用;| 调用 authenticate()|#]
> 
> [#|2012-10-11T22:57:21.640+0200|FINE|glassfish3.1.2|org.apache.catalina.authenticator.AuthenticatorBase|_ThreadID=35;_ThreadName=Thread-2;ClassName=org.apache.catalina.authenticator .AuthenticatorBase;方法名=调用;| 验证失败（）测试|#]
> 
> [#|2012-10-11T22:57:21.640+0200|FINE|glassfish3.1.2|org.apache.catalina.connector.OutputBuffer|_ThreadID=35;_ThreadName=Thread-2;ClassName=org.apache.catalina.connector .OutputBuffer;MethodName=setConverter;|得到编码：ISO-8859-1|#]
> 
> [#|2012-10-11T22:57:21.640+0200|FINE|glassfish3.1.2|org.apache.catalina.connector.OutputBuffer|_ThreadID=35;_ThreadName=Thread-2;ClassName=org.apache.catalina.connector .OutputBuffer;MethodName=realWriteBytes;|realWrite(b, 0, 1073) com.sun.grizzly.tcp.Response@192d307|#]
> 
> [#|2012-10-11T22:57:21.640+0200|FINEST|glassfish3.1.2|org.apache.catalina.connector.InputBuffer|_ThreadID=35;_ThreadName=Thread-2;ClassName=org.apache.catalina.connector .InputBuffer;MethodName=recycle;|recycle()|#]
> 
> [#|2012-10-11T22:57:21.640+0200|FINE|glassfish3.1.2|org.apache.catalina.connector.OutputBuffer|_ThreadID=35;_ThreadName=Thread-2;ClassName=org.apache.catalina.connector .OutputBuffer;MethodName=recycle;|recycle()|#]
> 
> [#|2012-10-11T22:57:24.625+0200|FINE|glassfish3.1.2|org.apache.catalina.authenticator.AuthenticatorBase|_ThreadID=36;_ThreadName=Thread-2;ClassName=org.apache.catalina.authenticator .AuthenticatorBase;MethodName=invoke;|安全检查请求 GET /testForMySimRealm/S1|#]
> 
> [#|2012-10-11T22:57:24.625+0200|FINE|glassfish3.1.2|org.apache.catalina.authenticator.AuthenticatorBase|_ThreadID=36;_ThreadName=Thread-2;ClassName=org.apache.catalina.authenticator .AuthenticatorBase;方法名=调用;| 调用 hasUserDataPermission()|#]
> 
> [#|2012-10-11T22:57:24.625+0200|FINE|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.web.security|_ThreadID=36;_ThreadName=Thread-2;ClassName =com.sun.web.security.RealmAdapter;MethodName=hasUserDataPermission;|[Web-Security][ hasUserDataPermission ] 主体：空 ContextPath：/testForMySimRealm|#]
> 
> [#|2012-10-11T22:57:24.625+0200|FINE|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.web.security|_ThreadID=36;_ThreadName=Thread-2;ClassName =com.sun.web.security.RealmAdapter;MethodName=invokeWebSecurityManager;|[Web-Security] [ hasResourcePermission ] 主体：空 ContextPath：/testForMySimRealm|#]
> 
> [#|2012-10-11T22:57:24.625+0200|FINE|glassfish3.1.2|org.apache.catalina.authenticator.AuthenticatorBase|_ThreadID=36;_ThreadName=Thread-2;ClassName=org.apache.catalina.authenticator .AuthenticatorBase;方法名=调用;| 调用 authenticate()|#]
> 
> [#|2012-10-11T22:57:24.625+0200|FINE|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.web.security|_ThreadID=36;_ThreadName=Thread-2;ClassName =com.sun.web.security.RealmAdapter;MethodName=authenticate;|用于验证用户/密码的Tomcat回调|#]
> 
> [#|2012-10-11T22:57:24.625+0200|FINE|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.web.security|_ThreadID=36;_ThreadName=Thread-2;ClassName =com.sun.web.security.RealmAdapter;MethodName=authenticate;|usename = j|#]
> 
> [#|2012-10-11T22:57:24.625+0200|警告|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.web.security|_ThreadID=36;_ThreadName=Thread-2;| WEB9102：Web 登录失败：com.sun.enterprise.security.auth.login.common.LoginException：登录失败：Entrée NULL 无效：nom|#]
> 
> [#|2012-10-11T22:57:24.625+0200|FINE|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.web.security|_ThreadID=36;_ThreadName=Thread-2;ClassName =com.sun.web.security.RealmAdapter;MethodName=authenticate;|Exception com.sun.enterprise.security.auth.login.common.LoginException: Login failed: Entrée NULL non valide: nom at com.sun.enterprise.security .auth.login.LoginContextDriver.doPasswordLogin(LoginContextDriver.java:394) 在 com.sun.enterprise.security.auth.login.LoginContextDriver.login(LoginContextDriver.java:240) 在 com.sun.enterprise.security.auth.login .LoginContextDriver.login(LoginContextDriver.java:153) 在 com.sun.web.security.RealmAdapter.authenticate(RealmAdapter.java:514) 在 com.sun.web.security.RealmAdapter.authenticate(RealmAdapter.java:455) 在org.apache.catalina.authenticator。BasicAuthenticator.authenticate(BasicAuthenticator.java:169) at com.sun.web.security.RealmAdapter.invokeAuthenticateDelegate(RealmAdapter.java:1333) at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:551) at org .apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:623) 在 org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve .java:161) 在 org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231) 在 com.sun.enterprise。 v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317) 位于 com.sun.enterprise.v3.services.impl.ContainerMapper。com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860) com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757) com.sun 的服务(ContainerMapper.java:195) .grizzly.http.ProcessorTask.process(ProcessorTask.java:1056) 在 com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229) 在 com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137 ) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) 在 com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain. java:79) 在 com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) 在 com.sun.grizzly.SelectionKeyContextTask。在 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) 在 com.sun 的 com.sun.grizzly.ContextTask.run(ContextTask.java:71) 调用(SelectionKeyContextTask.java:59) .grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:722) 原因：javax.security.auth.login.LoginException：Entrée NULL 无效：在 javax.security.auth.login.LoginContext.init(LoginContext.java:246) 在 javax.security.auth.login.LoginContext.(LoginContext.java:382) 在 javax.security.auth.login.LoginContext.( LoginContext.java:459) 在 com.sun.enterprise.security.auth.login.LoginContextDriver.doPasswordLogin(LoginContextDriver.java:381) ... 28 更多 |#]71) 在 com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) 在 java.lang.Thread 的 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) .run(Thread.java:722) 引起：javax.security.auth.login.LoginException: Entrée NULL non valide : nom at javax.security.auth.login.LoginContext.init(LoginContext.java:246) at javax。 security.auth.login.LoginContext.(LoginContext.java:382) at javax.security.auth.login.LoginContext.(LoginContext.java:459) at com.sun.enterprise.security.auth.login.LoginContextDriver.doPasswordLogin( LoginContextDriver.java:381) ... 28 更多 |#]71) 在 com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) 在 java.lang.Thread 的 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) .run(Thread.java:722) 引起：javax.security.auth.login.LoginException: Entrée NULL non valide : nom at javax.security.auth.login.LoginContext.init(LoginContext.java:246) at javax。 security.auth.login.LoginContext.(LoginContext.java:382) at javax.security.auth.login.LoginContext.(LoginContext.java:459) at com.sun.enterprise.security.auth.login.LoginContextDriver.doPasswordLogin( LoginContextDriver.java:381) ... 28 更多 |#]运行（Thread.java:722）引起：javax.security.auth.login.LoginException：Entrée NULL non valide：在 javax.security.auth.login.LoginContext.init(LoginContext.java:246) 在 javax.security .auth.login.LoginContext.(LoginContext.java:382) 在 javax.security.auth.login.LoginContext.(LoginContext.java:459) 在 com.sun.enterprise.security.auth.login.LoginContextDriver.doPasswordLogin(LoginContextDriver .java:381) ... 还有 28 个 |#]运行（Thread.java:722）引起：javax.security.auth.login.LoginException：Entrée NULL non valide：在 javax.security.auth.login.LoginContext.init(LoginContext.java:246) 在 javax.security .auth.login.LoginContext.(LoginContext.java:382) 在 javax.security.auth.login.LoginContext.(LoginContext.java:459) 在 com.sun.enterprise.security.auth.login.LoginContextDriver.doPasswordLogin(LoginContextDriver .java:381) ... 还有 28 个 |#]doPasswordLogin(LoginContextDriver.java:381) ... 28 更多 |#]doPasswordLogin(LoginContextDriver.java:381) ... 28 更多 |#]
> 
> [#|2012-10-11T22:57:24.625+0200|FINE|glassfish3.1.2|org.apache.catalina.authenticator.AuthenticatorBase|_ThreadID=36;_ThreadName=Thread-2;ClassName=org.apache.catalina.authenticator .AuthenticatorBase;方法名=调用;| 验证失败（）测试|#]
> 
> [#|2012-10-11T22:57:24.625+0200|FINE|glassfish3.1.2|org.apache.catalina.connector.OutputBuffer|_ThreadID=36;_ThreadName=Thread-2;ClassName=org.apache.catalina.connector .OutputBuffer;MethodName=setConverter;|得到编码：ISO-8859-1|#]
> 
> [#|2012-10-11T22:57:24.625+0200|FINE|glassfish3.1.2|org.apache.catalina.connector.OutputBuffer|_ThreadID=36;_ThreadName=Thread-2;ClassName=org.apache.catalina.connector .OutputBuffer;MethodName=realWriteBytes;|realWrite(b, 0, 1073) com.sun.grizzly.tcp.Response@7e592c|#]
> 
> [#|2012-10-11T22:57:24.625+0200|FINEST|glassfish3.1.2|org.apache.catalina.connector.InputBuffer|_ThreadID=36;_ThreadName=Thread-2;ClassName=org.apache.catalina.connector .InputBuffer;MethodName=recycle;|recycle()|#]
> 
> [#|2012-10-11T22:57:24.625+0200|FINE|glassfish3.1.2|org.apache.catalina.connector.OutputBuffer|_ThreadID=36;_ThreadName=Thread-2;ClassName=org.apache.catalina.connector .OutputBuffer;MethodName=recycle;|recycle()|#]

这是我的领域课程：

**CustomSimLoginModule 扩展 AppservPasswordLoginModule ：**

```
package com.sim;

import javax.security.auth.login.LoginException;

import com.sun.appserv.security.AppservPasswordLoginModule;

public class CustomSimLoginModule extends AppservPasswordLoginModule {
@Override
protected void authenticateUser() throws LoginException {
    // TODO Auto-generated method stub

    System.out.println("AUTHENTIFICATION !!");

    String[] grpList = {"ADMIN"};

    commitUserAuthentication(grpList);
} 
```

}

**CustomSimRealm 扩展 AppservRealm ：**

```
package com.sim;

import java.util.Enumeration;
import java.util.Properties;
import java.util.Vector;

import com.sun.appserv.security.AppservRealm;
import com.sun.enterprise.security.auth.realm.BadRealmException;
import com.sun.enterprise.security.auth.realm.InvalidOperationException;
import com.sun.enterprise.security.auth.realm.NoSuchRealmException;
import com.sun.enterprise.security.auth.realm.NoSuchUserException;

public class CustomSimRealm extends AppservRealm {

    @Override
    public void init(Properties properties) throws BadRealmException, NoSuchRealmException {

        System.out.println("CustomSimRealm->init");

        Enumeration<?> names = properties.propertyNames();
        String name = null;

        while(names.hasMoreElements()){
            name = (String)names.nextElement();
            System.out.println("name->" + name + " value->" + properties.getProperty(name));
        }
    }

    @Override
    public String getAuthType() {
        return "BASIC";
    }

    @Override
    public Enumeration<String> getGroupNames(String username)
            throws InvalidOperationException, NoSuchUserException {

        Vector<String> v = new Vector<String>();
        v.add("ADMIN");

        return v.elements();
    }   

} 
```

这 2 个类使用 maven 打包到 JAR 文件中，并具有以下依赖项：

```
<dependency>
        <groupId>org.glassfish.main.security</groupId>
        <artifactId>security</artifactId>
        <version>3.1.2</version>
    </dependency> 
```

JAR 文件被复制到 ${GLASSFISH}/glassfish/domains/domain1/lib 目录中，我将 login.conf 更改为：

```
 simRealm {
    com.sim.CustomSimLoginModule required;
}; 
```

和 domain.xml ：

```
 <auth-realm name="sim-realm" classname="com.sim.CustomSimRealm">
      <property name="prop1" value="test propriete 1"></property>
      <property name="prop2" value="test propriete 2"></property>
      <property description="null" name="jaas-context" value="simRealm"></property>
    </auth-realm> 
```

Glassfish 启动时未引发异常，但在用户输入凭据时会引发上述异常。

请问我做错了什么？

PS：没有使用 Glassfish create-auth-realm 命令，我手动更改了 login.conf 和 domain.xml，这可能是问题吗？

感谢您的想法

奥利维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:17:21.723

没有调用`super.init(properties)`CustomSimRealm。现在问题解决了

# c#-4.0 - C# 集合在 lambda.where 上被修改异常

> ID：12848664
> 
> 赞同：0
> 
> 时间：2012-10-11T21:17:28.577
> 
> 标签：c#-4.0, exception, collections, lambda, enumeration

我有以下代码：

```
var actionsToExecute = _messagesToExecute.Where(m => m.CanExecute).ToList(); 
```

它在 99% 的时间内运行良好，但每隔一段时间它就会崩溃，但有以下异常：

```
Collection was modified; enumeration operation may not execute 
```

我有点迷茫，因为它似乎有点随机。这是该方法的第一行。什么可能导致 lambda 表达式抛出此异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:19:24.917

它与线程有关。这似乎是网站代码。如果在执行 .ToList() 时，另一个访问该站点的人修改了该私有变量，则会发生该异常。

解决方案是使用线程安全集合，但这不是最佳选择，因为如果很多人正在读/写它，他们一次只能或多或少地做一个。

我遇到了类似的问题，但枚举并不重要，可以跳过或重复，所以我实现了自己的枚举器，它不检查它是否被修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:42:06.517

您需要在所有对_messagesToExecute 的引用周围使用lock()，或者您可以使用System.Collections.Concurrent 中的一些东西来处理内部锁定集合。

例如

```
_messagesToExecute = new ConcurrentBag<TMessage>(); 
```

或者如果您更愿意使用锁定：

```
static readonly object m_lock = new object(); 
```

然后每当您更新列表时：

```
lock(m_lock){
  _messagesToExecute.Add(item);
} 
```

然后当你拉出列表时：

```
lock(m_lock){
    var actionsToExecute = _messagesToExecute.Where(m => m.CanExecute).ToList();
} 
```

# c# - 在 C# 中在桌面上绘图

> ID：12848667
> 
> 赞同：4
> 
> 时间：2012-10-11T21:18:04.243
> 
> 标签：c#, gdi

我见过一些类似的问题，但没有做我需要的。

我正在寻找类似于旧的 Sheep.exe 程序的东西，它在所有可以四处走动的窗户上都有一只小羊。

我找到了两种可能的解决方案：

首先是绘制到桌面的HDC。问题是它不是我的 DC，我无法控制什么时候刷新。

另一种解决方案是使用透明窗口。我想要一堆独立的图像（交互）。我不确定是否应该使用填充整个屏幕空间的透明窗口并在其中绘制多个图像，或者是否应该为每个图像创建一个单独的窗口（当有很多图像时，效率会非常低。

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T21:29:05.637

WPF：应用程序的主窗口总是在顶部，总是最大化，背景透明，然后开始覆盖/动画到你的心内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:53:01.350

您可以使用 WPF 作为解决方案。为此，您需要确保将 Background 设置为 {x:null} 以及 AllowsTransparency="True"

例子：

```
<Window x:Class="WPFMe.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="1024" Width="768" AllowsTransparency="True" WindowStyle="None" Background="{x:Null}">
    <Grid>

    </Grid>
</Window> 
```

# python - 设置不同的根路径后找不到 mod_wsgi 的 404

> ID：12848669
> 
> 赞同：0
> 
> 时间：2012-10-11T21:18:16.147
> 
> 标签：python, django, apache, mod-wsgi

我想在不同的路径（确切地说，`/beta`）下加载我的 Django 应用程序，而不是`/`. 在`httpd`配置中设置不同的根路径后，我在所有页面中都收到 404 not found 错误。

首先`httpd`：

```
WSGIScriptAlias / /home/mydomain.biz/public_html/_beta/magnet/django.wsgi 
```

然后我只是将其更改`/`为`/beta`：

```
WSGIScriptAlias /beta /home/mydomain.biz/public_html/_beta/magnet/django.wsgi 
```

我的应用程序设置似乎出了点问题，但我现在不知道为什么。

# c# - 类型转换，Cast 的运行时替代方案 ?

> ID：12848673
> 
> 赞同：2
> 
> 时间：2012-10-11T21:18:40.127
> 
> 标签：c#, linq, reflection

我有一个`IList<object>`每个对象都是一个类型的实例`T`（我在编译时不知道）。

我需要`IList<T>`摆脱这个。我不能使用 Cast 因为我在编译时不知道类型，并且没有可以使用的 Cast(Type) 重载。

这是我目前所拥有的：

```
private object Map(IList<ApiCallContext> bulk)
{
    // god-awful way to build a IEnumerable<modelType> list out of Enumerable<object> where object is modelType.
    // quoting lead: "think whatever you do it will be ugly"
    Type modelType = model.Method.ModelType;

    if (bulk.Count > 0)
    {
        modelType = bulk.First().Parameters.GetType();
    }
    Type listType = typeof(List<>).MakeGenericType(modelType);
    object list = Activator.CreateInstance(listType);
    foreach (object value in bulk.Select(r => r.Parameters))
    {
        ((IList)list).Add(value);
    }
    return list;
} 
```

我在想的是，也许我可以创建一个新的`LooseList`类来实现`IList`并围绕铸件工作，看起来比我目前拥有的更好，但听起来还是太笨重了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T21:32:26.597

如果您确实需要完全按照您所说的去做，我首先将其分为“特定于上下文的代码”和“可重用代码”。实际上你想要这样的东西：

```
public static IList ToStrongList(this IEnumerable source, Type targetType) 
```

我将通过编写一个强类型方法来*实现*它，然后通过反射调用它：

```
private static readonly MethodInfo ToStrongListMethod = typeof(...)
    .GetMethod("ToStrongListImpl", BindingFlags.Static | BindingFlags.NonPublic);

public static IList ToStrongList(this IEnumerable source, Type targetType)
{
    var method = ToStrongListMethod.MakeGenericMethod(targetType);
    return (IList) method.Invoke(null, new object[] { source });
}

private static List<T> ToStrongListImpl<T>(this IEnumerable source)
{
    return source.Cast<T>().ToList();
} 
```

# c++ - 为什么 boost::interprocess::managed_shared_ptr to non-const 不能转换为 managed_shared_ptr to const

> ID：12848674
> 
> 赞同：4
> 
> 时间：2012-10-11T21:18:41.453
> 
> 标签：c++, boost, interprocess

据我了解，以下内容对 boost::shared_ptr 有效：

```
boost::shared_ptr<SomeData> ptr;
...
boost::shared_ptr<const SomeData> c_ptr = ptr; // Valid 
```

同样的行为不适用于`boost::interprocess::managed_shared_ptr`。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T00:55:17.480

`boost::interprocess::managed_shared_ptr`实际上不是共享指针；它只是一个帮助类，您可以使用它来定义一个类型。从[进程间文档](http://ci.boost.org/websvn/filedetails.php?repname=repos+1&path=%2Fbranches%2Frelease%2Flibs%2Finterprocess%2Fdoc%2Finterprocess.qbk&rev=82250&peg=82250)：

> `typedef managed_shared_ptr<MyType, managed_shared_memory>::type my_shared_ptr;`
> 
> 共享指针的创建可以简化为：
> 
> [c++]
> 
> `my_shared_ptr sh_ptr = make_managed_shared_ptr (segment.construct<MyType>("object to share")(), segment);`

使用`sh_ptr`上面示例中的“”，以下应该可以工作：

```
typedef managed_shared_ptr<const MyType, managed_shared_memory>::type my_shared_const_ptr;
my_shared_const_ptr sh_c_ptr = sh_ptr; 
```

因为这两个对象实际上是共享指针。

另一方面，做：

```
managed_shared_ptr<MyType, managed_shared_memory> ptr;
managed_shared_ptr<const MyType, managed_shared_memory> c_ptr = ptr; 
```

不起作用，因为在这种情况下 ptr 和 c_ptr 是[非常简单](http://www.boost.org/doc/libs/1_53_0/doc/html/boost/interprocess/managed_shared_ptr.html)的结构，除了生成 3 个 typedef 之外什么都不做，所以它们不会转换。

# ruby - 这个运算符在 ruby 中做了什么？<<=

> ID：12848681
> 
> 赞同：2
> 
> 时间：2012-10-11T21:19:24.973
> 
> 标签：ruby

我正在调试一些使用此运算符的代码，但我不确定为什么要使用它。

它似乎将对象附加到数组中。如果仅此而已，我不知道为什么工程师不简单地使用“<<”运算符。有什么不同？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:24:41.933

[http://www.tutorialspoint.com/ruby/ruby_operators.htm](http://www.tutorialspoint.com/ruby/ruby_operators.htm)

它看起来像是一个按位左移操作和赋值。

```
x <<= 2 
```

是相同的

```
x = x << 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T21:28:24.127

修改目标的情况并不总是这样`<<`：它可能是重要的结果。请查阅 API 以了解与行为有关的实际类型。

整数的位移没有副作用（计算被丢弃，除非它被分配/使用）：

```
a = 1
a << 2
a # => 1
a <<= 2
a # => 4 
```

但是`<<`在数组*上确实*有副作用（并且`<<=`只会执行一个无用的赋值¹隐藏操作的副作用性质）：

```
b = [1]
b << 2
b # => [1,2] 
```

* * *

¹在极少数情况下，使用访问器进行副作用操作*可能*是“聪明的”，因为它会*同时*`obj.prop <<= val`调用getter 和 setter - 并且 setter 可能包含逻辑。然而，我在这里使用“聪明”这个词而不是“好”是有原因的：）

# python - Python 结构问题：给所有东西一个“引擎”类

> ID：12848684
> 
> 赞同：3
> 
> 时间：2012-10-11T21:19:31.877
> 
> 标签：python, oop, structure

我在 Python 中制作“比简单脚本和东西更大”的应用程序时遇到了一些问题。我有一个名为 WinMain 的类，一个名为 Engine 的类，一个名为 State，另一个名为 Element。它是这样布置的：

WinMain 是程序的主类，它有一个 mainLoop 函数和其他各种东西。

引擎是一个包含图像和渲染代码等数据的对象。

State 是 Engine 持有的一个对象，每次调用 Engine 的 step 函数时都会调用它的 update 方法。

元素是 State 持有的对象，例如要渲染的 gui 按钮和图片。

由于我的渲染功能在引擎中，我将如何让我的元素（由状态持有）来渲染东西？我想我可以给每个元素引擎的实例，但这似乎有点 hacky，因为我必须做这样的事情：（ `picture = Element(engine, (0, 0), 'gui_image')`不好）

我宁愿做`picture = Element((0, 0), 'gui_image')`一些如何让 Element 使用 Engine 渲染事物的方法。

这似乎是我开始的大多数项目的主要结构问题，我似乎找不到解决方法（除了通过类和函数的参数传递大量变量）。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T22:38:39.360

> 引擎是一个包含图像和渲染代码等数据的对象

这听起来像一个上帝类：它们在 GUI 代码中很常见，而您遇到的问题是它的常见效果。

Engine中不同东西之间的概念关系是什么？它是否需要紧密耦合，或者引擎是否可以在状态、渲染器和其他一些东西之间进行协调？

然而，这一点会发生故障，通过状态机传递引擎（或渲染器或其他）是避免当前架构出现全局（或单例）的唯一方法。

* * *

打破这种依赖关系的常用方法是使用类似 MVC（模型/视图/控制器）模式的东西。具体来说，听起来 Engine 已经大致是一个 Controller，State 和 Elements 已经覆盖了 Model 部分。然而，引擎、状态和元素*也在*处理渲染/呈现部分：这引入了耦合。

如果您能找到一种方法将状态更改发布给*某个观察者*（故意保持模糊，因为我们不希望状态逻辑过多依赖于观察者的细节），您可以让渲染器监听状态（模型）更新并绘制它们。现在，观察者可以是任何你想要的东西，所以它很容易模拟，并且它也与引擎解耦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:39:34.347

显而易见的事情是将您的“引擎”作为每个“元素”对象中的属性（或在其中调用渲染方法时作为值传递） - 为此，您的“状态”对象必须知道Engine 实例，并在实例化时将其传递给每个 Element，或者在每个渲染方法调用时传递它——这似乎让您感到困扰。

同样，“状态”要知道“引擎”，它必须知道它 - 无论是在创建时，还是在调用将触发渲染（“状态”）的操作时。

Python 的动态特性确实有办法让你不必每次都显式地编写所有这些 - 是的 - 但你必须小心不要把它埋得太多，这样你的代码就无法维护了。让我们看看我是否可以在这里归结为一些例子：

```
class WinMain(object):
    def __init__(self):
        self.engine = Engine()

    def loop_once(self):
        self.engine.step()

class Engine(object):
    def __init__(self):
        self.state = State()

    def step(self):
        self.state.update(self)

    def render(self, obj):
        print (obj)

class State(object):
    def __init__(self):
        self.element = Element()

    def update(self, engine):
        self.element.render(engine)

class Element(object):
    def render(self, engine):
        engine.render(self)

if __name__ == "__main__":
    win = WinMain()
    win.loop_once() 
```

此代码仅在更新时传递 Engine 对象——这比将引擎固定为状态属性或元素属性更有趣，因为它允许 Element 实例完全属于不同的引擎。它还将“引擎”参数与元素创建时间分离 - 您抱怨您根本不想使用引擎的部分 - 所以它可以不那么混乱。

无论哪种方式，您都必须让“元素”以某种方式了解它们的“对象”——如果您不明确传递参数，则必须隐式地进行（即让“引擎”实例在“状态”中已知）和“元素”以某种方式）。一种方法是编写基类或元类以在实例化时执行帧自省，并将调用上下文中的“self”变量绑定到新对象中的属性。这种隐含的做法闻起来很糟糕。:-) 另一种方法是将对象的关系保存在单独的数据结构中，并使用您的方法可以导航的 DOM 接口。但是，无论如何，您都必须进行额外的调用来注释关系（也许额外的调用可以进行自省的基类或元类，如上所示）。

再想一想——Python 应用服务器“zope”使用“acquisition”解决了这个问题：zope 应用程序中的所有对象都位于树中——当人们试图从没有它的对象中检索属性时（例如，在尝试调用元素的“render”方法时），获取机制在树上“向上”搜索该属性，直到找到支持该方法的父级。然后调用它，并获取原始对象作为参数。这对您来说是一个可能的解决方案，但不仅需要实现获取机制的基类，

这里有一个简单的“收购”实现来简化你的案例：

```
class WinMain(object):
    def __init__(self):
        self.struct = []
        self.engine = Engine()

    def loop_once(self):
        self.engine.step()

class TraverseError(AttributeError):
    pass

class AquisitionBase(object):
    tree = {}      

    def __getattr__(self, attr):
        # __getattr__ is only invoked when the original object does not have
        # attr by itself
        try:
            return getattr(self.__class__.tree[id(self)], attr)
        except (IndexError, AttributeError), error:
            raise TraverseError(error)

    def __setattr__(self, attr, obj):
        cls = self.__class__
        # Anotate parent:
        cls.tree[id(obj)] = self
        return super(AquisitionBase,self).__setattr__(attr, obj)

class Engine(AquisitionBase):
    def __init__(self):
        self.state = State()

    def step(self):
        self.state.update()

    def render(self, obj):
        print (obj)

class State(AquisitionBase):
    def __init__(self):
        self.element = Element()

    def update(self):
        self.element.render(self.element)

class Element(AquisitionBase):
    pass

if __name__ == "__main__":
    win = WinMain()
    win.loop_once() 
```

请注意，如果您有包含“元素”的列表或字典，则可以通过创建知道此方案的列表和字典的子类来克服有关容器的问题，并基本上实现一个`__setitem__`注释父级的方法对象也被归于那里。

本质上——不管怎样，考虑一下，传递“引擎”参数听起来更好——即使 Python 可以满足你的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T21:32:31.603

我不知道 Python 如果（何时）我的语法错误，请原谅，但一般的 OO 答案是将`engine`对象传递给执行渲染的元素的函数。

所以在`Engine`'s step 函数中你会有类似的东西：

```
state.Update(this)      - so State gets a reference to the engine. 
```

如果您愿意，还可以`State`参考`Engine`它的创建时间。

然后在`state.Update()`你会做的方法中：

```
element.Render(engine) 
```

这可能在一个循环中，您可以在其中迭代`state`对象持有的元素集合。

# java - AntBuilder 找不到包 org.junit

> ID：12848688
> 
> 赞同：0
> 
> 时间：2012-10-11T21:19:57.893
> 
> 标签：java, eclipse, junit

我在 Eclipse 的项目中使用“JUnit 测试用例”新文件对话框向测试目录（与我的 src 目录平行）添加了一些单元测试。我有两个构建器，默认的 Java 构建器和我添加的 AntBuilder。Java Builder 继续工作，但 AntBuilder 在 Eclipse 中失败。当我选择 Project -> Build All 时，它会显示：

```
Buildfile: C:\source\machine-paint\eclipse\machine-paint\src\build.xml

clean:
      [delete] Deleting directory C:\source\machine-paint\eclipse\machine-paint\build

compile:
       [mkdir] Created dir: C:\source\machine-paint\eclipse\machine-paint\build\classes
       [javac] Compiling 33 source files to C:\source\machine-paint\eclipse\machine-paint\build\classes
       [javac] C:\source\machine-paint\eclipse\machine-paint\test\stencil\BorderWalkerTest.java:3: error: package org.junit does not exist
       [javac] import static org.junit.Assert.*;
       [javac]                        ^ 
```

然后在一些类似的错误之后，这个：

```
 [javac] C:\source\machine-paint\eclipse\machine-paint\test\stencil\BorderWalkerTest.java:8: error: incompatible types
       [javac]  @Test
       [javac]   ^
       [javac]   required: Annotation
       [javac]   found:    Test 
```

这是我的构建文件。在这一点上，我真的在黑暗中开枪，例如将那个类路径标记添加到 javac 命令。

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Builder" default="jar" basedir=".">
  <target name="clean">
    <delete dir="build"/>
  </target>

  <target name="compile" depends="clean">
    <mkdir dir="build/classes" />
    <javac srcdir="." destdir="build/classes" debug="true" includeantruntime="true">
      <classpath>
        <path id="org.junit" location="c:/eclipse/plugins/org.apache.ant_1.8.3.v20120321-1730/lib/junit.jar" />
      </classpath>
    </javac>
  </target>

  <target name="jar" depends="compile">
    <jar destfile="../../stencil.jar" basedir="build/classes">
      <manifest>
        <attribute name="Main-Class" value="stencil.Main" />
      </manifest>
    </jar>
    <copy file="../../stencil.jar" tofile="../../../robotsdoart/stencils/stencil.jar" />
  </target>

  <target name="run">
    <java jar="build/jar/stencil.jar" fork="true" />
  </target>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:46:55.243

尝试将 srcdir 更改为您的实际源目录，使其不包含测试。

就像是：

```
<javac srcdir="src/" destdir="build/classes" debug="true" includeantruntime="true">
  <classpath>
    <path id="org.junit" location="c:/eclipse/plugins/org.apache.ant_1.8.3.v20120321-1730/lib/junit.jar" /> <!-- not sure if you need this -->
  </classpath>
</javac> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:41:44.467

尝试`junit`直接包含您的 jar 文件。还要确保 JAR 文件在该位置可用。

```
<javac 
   srcdir="." 
   destdir="build/classes" 
   debug="true" 
   includeantruntime="true"
   classpath="c:/eclipse/plugins/org.apache.ant_1.8.3.v20120321-1730/lib/junit.jar"
 /> 
```

或将`path`元素定义为：

```
 <path id="lib.path.id">
    <fileset dir="c:/eclipse/plugins/org.apache.ant_1.8.3.v20120321-1730/lib" 
             includes="junit.jar"/>
 </path> 
```

`javac`并在as中使用相同的

```
<javac 
   srcdir="." 
   destdir="build/classes" 
   debug="true" 
   includeantruntime="true"
   classpathref="lib.path.id""
 /> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-23T11:59:15.967

创建一个路径元素并在 javac 中引用该 id 有所帮助。

```
<path id="lib.path.id.junit.jar">
    <fileset dir="${project-path}\lib" includes="*.jar" />
</path> 
```

然后我使用 classpathref 在 javac 中引用它

```
<target name="compile" depends="copy" description="compile all the source files in both src and test directories and should store all the class files in the bin directory.">
    <javac destdir="bin" includes="*.java" classpathref="lib.path.id.junit.jar" includeantruntime="true" debug="true" >
        <src path="src" /> 
        <src path="test" />
    </javac>

</target> 
```

# css - 缩放背景图像以适合标签上方的区域

> ID：12848695
> 
> 赞同：0
> 
> 时间：2012-10-11T21:21:07.333
> 
> 标签：css

给定一个 div（或其他标签），是否可以在标签上方添加一个大的“响应式”图像（想想网站横幅），该图像具有最大宽度和高度，然后在高度调整时缩放以保持浏览器宽度的 100%自动只使用css？

我尝试了 3 种不同的方法，每种方法都有一个主要缺点。这里的所有方法都是使用的 html。#nav 是我尝试添加上面图片的地方。

```
<ul id="nav">
    <li>link</li>
</ul> 
```

## **方法一**

使用 :before 和 content:url(img);

CSS：

```
#nav:before {
    content:url('http://lorempixel.com/output/nature-q-c-780-480-5.jpg');
    width:100%;
    display:block;
    overflow:hidden;
} 
```

此方法将保持高度正确，但如果我减小屏幕尺寸，则会隐藏图像的右侧。我找不到正确缩放内容图像的方法。

[方法一的JSFiddle](http://jsfiddle.net/CoryMathews/fb4eC/)

## **方法二**

使用 :before 和 background:url() 我能够使图像正确缩放，但我无法更改高度的值，这会在图像下方产生巨大的区域。

```
#nav:before {
    background:url('http://lorempixel.com/output/nature-q-c-780-480-5.jpg') no-repeat top;
    background-size:contain;
    width:100%;
    display:block;
    content:"";
    height:400px;
    max-height:480px;
} 
```

[方法2的JSFiddle](http://jsfiddle.net/CoryMathews/fb4eC/1/)

## **方法三**

我在某种程度上能够达到预期的效果，但 padding-top 取决于知道图像的高宽比。（我无法用 css 术语理解它是如何工作的以及为什么需要这种计算）。所以对于正方形图像，它的 X/X = 1 或 100% 高度。对于 480x780 图像，它是 61.53%

```
#nav {
    background:url('http://lorempixel.com/output/nature-q-c-780-480-5.jpg') no-repeat top center;
    background-size:contain;
    padding-top:61.53%;
    width:100%;
    display:block;
    height:100px;
    overflow:hidden;
} 
```

这种方法确实产生了预期的结果，但我不能总是知道图像的高度和宽度。所以我正在寻找更好的解决方案。

我也意识到我可以为每个不同的大小和一个额外的图像创建一个媒体查询，但这是很多工作的方式。

[方法3的JSFiddle](http://jsfiddle.net/CoryMathews/fb4eC/2/)

**关于如何改进其中一种方法的任何想法？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:56:10.233

嗯，我希望我没听错。这是您导航上方的图像，它始终为 100% 宽（与浏览器大小相同）。它会在调整大小时上下缩放，并自动计算高度，这样纵横比就不会受到影响：

### HTML

```
<img class="banner" src="http://lorempixel.com/output/people-q-c-1200-200-9.jpg">
<ul>
    <li><a href="">link</a></li>
</ul>​ 
```

### CSS

```
img.banner {
    width: 100%;
}​ 
```

### 小提琴

[http://jsfiddle.net/7HgU8/](http://jsfiddle.net/7HgU8/)

# c# - 如何在 C# Windows 窗体应用程序中使用代码清除按钮的背景图像？

> ID：12848696
> 
> 赞同：0
> 
> 时间：2012-10-11T21:21:09.483
> 
> 标签：c#, winforms

如何清除用 C# 编写的[Windows 窗体应用程序的按钮的背景图像？](http://en.wikipedia.org/wiki/Windows_Forms)我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:23:12.980

也许试试这个：

```
myButton.BackgroundImage = null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:24:02.543

我不肯定这会起作用，但我会尝试将`Button.BackgroundImage = null`最后一行放在点击监听器中。

# compilation - 手动编译程序集

> ID：12848698
> 
> 赞同：0
> 
> 时间：2012-10-11T20:32:56.440
> 
> 标签：compilation, assembly

我无法将汇编中的特定行翻译为[Nios II](http://www.altera.com/literature/hb/nios2/n2cpu_nii5v1.pdf)的机器代码。我已经成功编译了这些行：

```
START_TIMER = 0xF68C
r0 = 0x0
r8 = 0x8
label = 50000

#orhi r8, r0, %hiadj(label) --> 00000 01000 ???????????????? 110010
addi r8, r8, %lo(label) --> 01000 01000 1100001101010000 000100
subi r8, r8, 1 --> 01000 01000 1111111111111111 000100
bne r8, r0, START_TIMER --> 01000 00000 1111011010001100 011110 
```

我遇到问题的行是 IMM16 在这一行：

```
orhi r8, r0, %hiadj(label) 
```

如上面链接的手册中所述，“%lo”表示“提取 immed32 的位 [15..0]”，“%hiadj”表示“提取位 [31..16] 并添加 immed32 的第 15 位”。但是，二进制的 50000 是 1100001101010000，因此是 16 位数字。据我所知，它不包含 16 到 31 之间的任何位。我尝试使用 0000000000000001，但它不正确。

我究竟做错了什么？

**编辑：** 只是为了消除任何误解；我只是想知道如何**手动编译 "orhi r8, r0, %hiadj(label)"**。变量“r8”、“r0”和“label”如上所述，不变。

**编辑 2：** 我尝试将 50000 转换为 32 位二进制文​​件：

```
00000000000000001100001101010000 
```

...提取位 [31...16]：

```
0000000000000000 
```

...添加第 15 位（这很令人困惑，因为他们没有告诉我它是值 2^15 还是 2^0，我已经尝试了两者，根本不添加）

```
0000000000000001
1000000000000000
0000000000000000 
```

都是不正确的。

**编辑 3：** 根据[此链接](http://www.vxdev.com/docs/vx55man/diab5.0ppc/c-asse_e.htm#3000148)，当 16 位值为 0x8000 或更大时，它将其余部分符号扩展为 0xffff8000 并将位 [31...16] 加 1，这会将数字重载为 0x100008000 ~ 0x00008000，即你说的，杰拉德，但显然仍然不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:59:19.750

您提供的代码采用“标签”处的值，这是一个 16 位半字，并将其扩展为 32 位字以成为地址。由于您的标签是 16 位值，因此您必须将零移到寄存器的上半部分。

所以你想要做的是将零加载到高位，然后添加低位......

```
orhi  r8, r0, %hiadj(label) --> 00000 01000 0000000000000000 110010
addi  r8, r8, %lo(label) --> 01000 01000 1100001101010000 000100 
```

# javascript - 如何使用 firebug/chrome 检测事件？

> ID：12848700
> 
> 赞同：0
> 
> 时间：2012-10-11T21:21:28.673
> 
> 标签：javascript, jquery, events, browser

我想知道是否可以从几个 js 文件中找到哪个文件，负责使用 firebug / chrome 关联输入字段的事件

如果有可能，我该怎么做？

假设我有一个包含 10 个 js 文件和大量代码的页面——其中一个文件负责输入字段中的特定测试。

如何使用 firebug / chrome 找出正在发生的事件及其所属的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:23:57.097

**如果您使用的是 Firebug：**

1.  打开萤火虫
2.  右键单击 HTML 选项卡中的元素
3.  点击日志事件
4.  启用控制台选项卡
5.  单击控制台选项卡中的 Persist（否则重新加载页面后控制台选项卡将清除）
6.  选择关闭（手动）

**如果您使用的是 Chrome 开发者工具：**

1.  Ctrl + Shift + I（开发者工具）
2.  脚本
3.  事件侦听器断点（右侧）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:24:33.947

在萤火虫中：

当您在“脚本”选项卡上时，单击“暂停”按钮（它将开始跳动）。

下次事件发生时，它将断点，允许您进入有问题的函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T21:24:41.827

在 firefox 中，使用 firebug 进行调试。在代码中添加断点

在 chrome 中按 Ctrl-shift-i。在脚本标签中添加断点

# html - li:hover 在 div 上显示背景图像（小三角形）

> ID：12848701
> 
> 赞同：0
> 
> 时间：2012-10-11T21:21:33.680
> 
> 标签：html, css, hover, png

项目：http: [//development.legendarylion.com/](http://development.legendarylion.com/)

网站正在开发中。试图让 .png 显示在显示的子 div 上。已经尝试调整z-index，没有效果。

目标：让悬停时出现并定位的 .png 作为指针出现在悬停时的黑色子 div 上方。

建议？

CSS

`#menu li.drop:hover {
background-image:url('../img/style/notch.png');background-position:50% 110%;background-repeat:no-repeat;z-index:600;background-position:absolute; }`

HTML

```
<ul id="menu" >
           <li class="drop"><a id="menu-anchor-point"  class="uppercase" href="#">Armor</a>
            <div class="dropdown_5columns">
            <!--img class="armor-thumb left" src="img/armor-icons/blueprint.jpg" alt="">            
                <div class="col_2">
                </div>
                <div class="col_1">
                <h2>Soft</h2>
                </div>                  
                <div class="col_1">
                <h2>Hard</h2>
                </div>                  
                <div class="col_1">
                <h2>Structured</h2>-->
                <p class="description"><small></small>Armor comes in different configurations... Here is what to expect when selecting your armor and a list of our armor...</small></p>
                <h2>Soft</h2>
                <h2>Hard</h2>
                <h2>Structured</h2>
                </div>
           </li>
           <li class="drop"><a class="uppercase" href="#">Concealable</a>
           <div class="dropdown_5columns">
                <img class="armor-thumb left" src="img/armor-icons/concealable.jpg" alt="">
                <img class="vertical-hr" src="img/vertical-hr.png">
                <div class="col_2">
                <h3>Male</h3>
                <hr class="menu-hr">
                <p>Revolution</p>
                <p>Evolution</p>
                <p>Equinox</p>
                <p>Lo-Pro</p>
            </div>          
            <div class="col_2">
                <h3>Female</h3>
                <hr class="menu-hr">
                <p>Revolution</p>
                <p>Evolution</p>
                <p>Equinox</p>
                <p>Lo-Pro</p>
            </div>
                <div class="right">
                <img class="armor-icon right" src="img/armor-icons/concealable.png" alt="">
                </div>
           </li>
           <li class="drop"><a class="uppercase" href="#">Overt</a>
            <div class="dropdown_5columns">
            <img class="armor-thumb left" src="img/armor-icons/overt.jpg" alt="">
            <img class="vertical-hr" src="img/vertical-hr.png">
                <div class="col_2">
                <h3>Carriers</h3>
                <hr class="menu-hr">
                <p>Quilted Carrier System (QCS)</p>
                <p>Blauer Armorskin&trade;</p>
                <p>AE Dress Vest</p>
                <p>Overt Carrier System (OCS)</p>
                <p>Med Vest</p>
                <p>Instructor Vest</p>
                </div>
                <div class="col_2">
                <h3>Accessories</h3>
                <hr class="menu-hr">
                <p>Med Vest</p>
                </div>
                <div class="right">
                <img class="armor-icon right" src="img/armor-icons/overt.png" alt="">
                </div>
           </li>           
           <li class="drop"><a class="uppercase" href="#">Tactical</a>
            <div class="dropdown_5columns">
                <img class="armor-thumb left" src="img/armor-icons/tactical.jpg" alt="">
                <img class="vertical-hr" src="img/vertical-hr.png">
                <div class="col_2">
                <h3>Carriers</h3>
                <hr class="menu-hr">
                <p>Lighthawk Series</p>
                <p>Wolverine</p>
                <p>Hard Core DM</p>
                <p>K-9</p>
                </div>
                <div class="col_2">
                <h3>Accessories</h3>
                <hr class="menu-hr">
                <p>Lighthawk Accessories</p>
                <p>Pouches</p>
                <p>Hard Armor</p>
                <p>Shields</p>
                <p>Blankets</p>
                <p>Helments & Face Shields</p>
                </div>
                <div class="right">
                <img class="armor-icon right" src="img/armor-icons/tactical.png" alt="">
                </div>
           </li>
           <li><a class="uppercase" href="#">Contact</a>
           </li>
        </ul>
    </div><!--header-->
        <div id="slideshow">
            <ul id="nav">
                <li id="next"><a href="#">next</a></li>
                <li id="prev"><a href="#">prev</a></li>
            </ul>
            <ul id="slides">
                <li><img src="img/slider-1.jpg" title="" alt="1"></li>
                <li><img src="img/slider-2.jpg" title="" alt="2"></li>
                <li><img src="img/slider-3.jpg" title="" alt="3"></li>
            </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:05:38.483

您需要在锚元素上执行此操作：

```
#menu li.drop:hover a{
       background:url('../img/style/notch.png') no-repeat bottom center;
       position: relative;
       z-index: 5000;
} 
```

# python - 如何将多个页面放在一个域下？

> ID：12848705
> 
> 赞同：0
> 
> 时间：2012-10-11T21:22:15.037
> 
> 标签：python

所以，我有一些应用程序页面，我想放在这样的 url 下

常量.heroku.com/physics/planck

常量.heroku.com/physics/e

constants.heroku.com/physics/standardgravitation

我的普朗克常数应用程序的 app.py 看起来像这样。

```
import os
from flask import Flask

app = Flask('plancksconstant')
app = Flask(__name__.split('.')[0])

@app.route('/physics/planck')
def hello():
    return '6.626068E-34'

if __name__ == '__main__':
    # Bind to PORT if defined, otherwise default to 5000.
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port) 
```

这个应用程序的网址是[http://nameless-sands-2295.herokuapp.com/physics/planck](http://nameless-sands-2295.herokuapp.com/physics/planck)。我让结尾部分正常工作（/physics/planck），但 url 的开头仍然是应用程序的名称（nameless-sands-2295）。如何将其更改为“常量”而不是应用程序的名称？

解决了！！！！刚做了这个

```
import os
from flask import Flask

app = Flask('plancksconstant')
app = Flask(__name__.split('.')[0])

@app.route('/physics/planck')
def hello():
    return '6.626068E-34'

@app.route('/physics/standardgravity')
def hello():
    return '9.8'

if __name__ == '__main__':
    # Bind to PORT if defined, otherwise default to 5000.
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:35:24.697

您将无法将它们设置为使用“constants.heroku.com” - 这是 heroku.com 域的子域，显然不适合您使用。但是，您可以使用任何域注册商设置自己的域（我个人喜欢 gandi.net，但有上百万个选项）。

一旦你找到并购买了一个合适的域，你需要在你的区域文件中设置一个 A 记录（关于这方面的信息太多，这里是维基百科：[http](http://en.wikipedia.org/wiki/Zone_file) ://en.wikipedia.org/wiki/Zone_file ）。这会将所有请求重定向到例如“planckconstants.com”到您的heroku 应用程序，而不向最终用户显示heroku 应用程序url。

# javascript - DataTables.net 程序化刷新

> ID：12848706
> 
> 赞同：3
> 
> 时间：2012-10-11T21:22:20.747
> 
> 标签：javascript, jquery, refresh, datatables

我正在使用[DataTables（jQuery 插件）](http://datatables.net)来显示我的表格数据。如果使用 AJAX 从 JSON Web 服务获取数据。

如何使用 JavaScript/jQuery 强制刷新？我正在查看 API，但找不到正确的功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T21:36:56.253

在等待答案的过程中，我终于找到了：`fnDraw`功能正是我所需要的。

它[在 API 部分的开头进行了](http://datatables.net/api)描述，但我只是懒得通读：

> 您必须对服务器进行必要的调用以根据需要处理您的数据，然后只需[重新绘制表格 ( **`fnDraw`**)](http://datatables.net/api#fnDraw)即可查看新数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:24:50.617

尝试调用：

```
$("#Table1").fnDestroy().dataTable(); 
```

那应该重建它...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T21:29:09.863

在某处添加：

```
$.fn.dataTableExt.oApi.fnReloadAjax = function ( oSettings, sNewSource, fnCallback, bStandingRedraw ) {
    if ( typeof sNewSource != 'undefined' && sNewSource != null )
    {
        oSettings.sAjaxSource = sNewSource;
    }
    this.oApi._fnProcessingDisplay( oSettings, true );
    var that = this;
    var iStart = oSettings._iDisplayStart;
    var aData = [];

    this.oApi._fnServerParams( oSettings, aData );

    oSettings.fnServerData( oSettings.sAjaxSource, aData, function(json) {
        /* Clear the old information from the table */
        that.oApi._fnClearTable( oSettings );

        /* Got the data - add it to the table */
        var aData =  (oSettings.sAjaxDataProp !== "") ?
            that.oApi._fnGetObjectDataFn( oSettings.sAjaxDataProp )( json ) : json;

        for ( var i=0 ; i<aData.length ; i++ )
        {
            that.oApi._fnAddData( oSettings, aData[i] );
        }

        oSettings.aiDisplay = oSettings.aiDisplayMaster.slice();
        that.fnDraw();

        if ( typeof bStandingRedraw != 'undefined' && bStandingRedraw === true )
        {
            oSettings._iDisplayStart = iStart;
            that.fnDraw( false );
        }

        that.oApi._fnProcessingDisplay( oSettings, false );

        /* Callback user function - for event handlers etc */
        if ( typeof fnCallback == 'function' && fnCallback != null )
        {
            fnCallback( oSettings );
        }
    }, oSettings );
} 
```

然后像这样调用它：

```
oTable = $(".dt").dataTable();
oTable.fnReloadAjax(); 
```

信用：[http ://datatables.net/plug-ins/api](http://datatables.net/plug-ins/api)

# java - 如何使用 Runtime.getRuntime().exec() 打开名称中包含空格的应用程序？

> ID：12848707
> 
> 赞同：2
> 
> 时间：2012-10-11T21:22:33.463
> 
> 标签：java, macos, exec

所以我正在尝试制作一个通用的应用程序，并且我正在尝试使其具有打开应用程序的能力。所以，我想办法让它打开一个应用程序，如果它是一个单词，但有空格，它永远不会起作用。我就是这样做的：

```
 if(textField.getText().startsWith("application open")){
    try {
        String string1 = textField.getText().substring(17, textField.getText().length());
        Runtime.getRuntime().exec("open /Applications/\"" + string1 + "\".app");
        textArea.append("Opening application " + string1 + "..." + newline);
    } catch (IOException ioe) {
        ioe.printStackTrace();
    }
    } 
```

如果有人可以帮助我，那就太好了！在此先感谢霍华德·斯塔克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T21:29:30.460

使用[`exec`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5b%5d%29)需要的版本`String[]`：

这对我有用：

```
String cmds[] = { "open", "/Applications/Font Book.app" };
Runtime.getRuntime().exec(cmds); 
```

而这不是：

```
Runtime.getRuntime().exec("open /Applications/Font Book.app"); 
```

后者只能使用空格来分解命令参数，因此被解析为命令*open*，后跟由空格分隔的 2 个参数。前者 - 那个版本的`exec`-`String[]`单独传递每个参数，因此没有这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T21:29:06.007

使用 exec 的变体，它分别接受命令和参数。最直接的替换是

```
Runtime.getRuntime().exec(new String[] {"executable with spaces"}) 
```

执行（字符串[]）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T21:31:47.703

@ScArcher2 是对的 (+1)。

但是这个解决方案不是跨平台的。例如，`\`在 Unix 中您可能必须在空格之前插入。更好的解决方案是使用`ProcessBuilder`而不是`Runtime.exec()`. `ProcessBuilder`创建便携式命令行并自动支持空格。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-11T21:34:38.847

您可以尝试改用 ProcessBuilder： http: [//docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)

使用 directory(File directory) 方法设置工作目录（包含空格的目录），然后使用 start() 启动进程。

来自 javadoc 的简化示例：

```
 ProcessBuilder pb =
   new ProcessBuilder("myCommand", "myArg1", "myArg2");
 pb.directory(new File("myDir"));
 Process p = pb.start(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-11T21:40:46.130

使用 ProcessBuilder ，这是它的设计目的，让您的生活更轻松

```
ProcessBuilder pb = new ProcessBuilder("open", "/Applications/\"" + string1 + "\".app");
Process p = pb.start(); 
```

正如这篇文章[从java代码运行shell脚本并传递参数中所解释的那样](https://stackoverflow.com/questions/12812345/running-shell-script-from-java-code-and-pass-arguments/12812473#12812473)

# sql - CTE 扫描速度远低于应有的速度

> ID：12848711
> 
> 赞同：4
> 
> 时间：2012-10-11T21:23:07.283
> 
> 标签：sql, performance, postgresql

以下查询正在大约 400 万行上运行。前两个 CTE 语句在大约一个小时内执行。然而，最后一个有望持续超过 15 年。

```
WITH parsed AS (
   SELECT name, array(...) description FROM import
), counts AS (
   SELECT unnest(description) token, count(*) FROM parsed GROUP BY 1
) 
INSERT INTO table (name, description) 
SELECT name, ARRAY(
    SELECT ROW(token, count)::a 
    FROM (
        SELECT token, (
            SELECT count 
            FROM counts 
            WHERE a.token=counts.token
            ) 
        FROM UNNEST(description) a(token)
        ) _
    )::a[] description 
FROM parsed;

                                                                  QUERY PLAN                                                                   
-----------------------------------------------------------------------------------------------------------------------------------------------
 Insert on table  (cost=55100824.40..162597717038.41 rows=3611956 width=96)
   CTE parsed
     ->  Seq Scan on import  (cost=0.00..51425557.67 rows=3611956 width=787)
           Filter: ((name IS NOT NULL) AND (description IS NOT NULL))
           SubPlan 1
             ->  HashAggregate  (cost=11.59..12.60 rows=101 width=55)
                   ->  Append  (cost=0.00..11.34 rows=101 width=55)
                         ->  Result  (cost=0.00..0.01 rows=1 width=0)
                         ->  Index Scan using import_aliases_mid_idx on import_aliases  (cost=0.00..10.32 rows=100 width=56)
                               Index Cond: (mid = "substring"(import.mid, 5))
           SubPlan 2
             ->  HashAggregate  (cost=0.78..1.30 rows=100 width=0)
                   ->  Result  (cost=0.00..0.53 rows=100 width=0)
   CTE counts
     ->  HashAggregate  (cost=3675165.23..3675266.73 rows=20000 width=32)
           ->  CTE Scan on parsed  (cost=0.00..1869187.23 rows=361195600 width=32)
   ->  CTE Scan on parsed  (cost=0.00..162542616214.01 rows=3611956 width=96)
         SubPlan 6
           ->  Function Scan on unnest a  (cost=0.00..45001.25 rows=100 width=32)
                 SubPlan 5
                   ->  CTE Scan on counts  (cost=0.00..450.00 rows=100 width=8)
                         Filter: (a.token = token) 
```

`parsed`和中大约有 400 万行`counts`。查询当前正在运行，最后一条语句大约每 2 分钟插入一行。它几乎没有接触磁盘，但像疯了一样吃CPU，我很困惑。

查询有什么问题？

最后的语句应该查找`description`in的每个元素`counts`，将这样的东西转换成这样`[a,b,c]`的东西`[(a,9),(b,4),(c,0)]`并插入它。

**编辑**

将 parsed 和 counts 作为表，并`token`在索引计数中，这是计划：

```
explain INSERT INTO table (name, mid, description) SELECT name, mid, ARRAY(SELECT ROW(token, count)::a FROM (SELECT token, (SELECT count FROM counts WHERE a.token=counts.token) FROM UNNEST(description) a(token)) _)::a[] description FROM parsed;
                                              QUERY PLAN                                              
------------------------------------------------------------------------------------------------------
 Insert on table  (cost=0.00..5761751808.75 rows=4002061 width=721)
   ->  Seq Scan on parsed  (cost=0.00..5761751808.75 rows=4002061 width=721)
         SubPlan 2
           ->  Function Scan on unnest a  (cost=0.00..1439.59 rows=100 width=32)
                 SubPlan 1
                   ->  Index Scan using counts_token_idx on counts  (cost=0.00..14.39 rows=1 width=4)
                         Index Cond: (a.token = token) 
```

这更合理。这些数组平均有 57 个元素，所以我想这只是针对假定的相当低效的 CTE 表进行的大量查找导致性能下降。它现在以每秒 300 行的速度运行，我对此很满意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:47:28.673

正如我在对问题的编辑中所述，解析并计为表格，并且计数中的令牌索引它要快得多。我假设 CTE 连接比他们更聪明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T02:13:45.290

所以你正在取消嵌套和重新组合 4M 数组，对吗？

我的猜测是你正在处理 RAM 耗尽，所以我认为你有几个选择。首先是在表之间分阶段移动数据，以尽量减少这个问题。

你能判断它是受 CPU 限制还是 I/O 限制吗？

# ios - 在 Xcode 中更改项目名称导致命名错误

> ID：12848712
> 
> 赞同：32
> 
> 时间：2012-10-11T21:23:09.467
> 
> 标签：ios, xcode, xcode4, xcode4.5, xcode4.6

我的旧名称由类似于此的骆驼箱类型名称组成

**我的应用**

然后我将其更改为

**Myapp** '注意 A 现在不是大写字母'

我通过单击`MyApp`导航器菜单中的名称并更改它来更改它，出现一个帮助框，要求我进行系统范围的更改，我单击“是”！

但是现在当我构建这个应用程序时，它说我的应用程序的名称是：

**Myapp-temp-caseinsensitive-rename**

我现在想知道如何摆脱 -temp-caseinsensitive-rename 部分？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-10-11T21:32:23.120

检查构建设置中的产品名称，并确保它到处都是 Myapp。如果这样做了，

*   关闭您的项目-> 转到查找器。
*   右键单击您的 .xcodeproject 文件，然后单击显示包内容。
*   然后右键单击您的 project.pbxproj 并在一些文本编辑器中打开它。
*   然后搜索 Myapp-temp-caseinsensitive-rename 并手动重命名。
*   更改后保存，然后重新打开项目。

在执行此操作之前，请确保您已备份您的项目。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-15T05:19:58.970

我有一个类似的问题，但它只影响贴有“不区分大小写重命名”的目标。如果您有类似的情况，只需执行以下操作（使用 XCode 5）：

1）单击左侧的项目。2）通过单击小按钮展开以查看所有目标

![第 2 步 - 微小的展开按钮](../Images/d336858f1f878cc1b2676bcdd09583da.png)

3) 重命名受影响的目标。

![第 3 步 - 重命名](../Images/fe5f269aecf98cae25391b33ed6f2dc3.png)

4) 保存项目。然后对于强迫症布朗尼点，在文本编辑器中打开您的项目并为任何“不敏感”或类似内容执行 ctrl-f 以确保一切都得到解决。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-24T18:40:30.960

这些都不适合我，我找到了这篇文章并且它有效，而且它是最简单的。所以我想解决方案首先取决于你是如何让自己陷入困境的:)

[Bundle Identifier 中的 -temp-caseinsensitive-rename](https://stackoverflow.com/questions/12820022/temp-caseinsensitive-rename-in-bundle-identifier)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-09-27T00:20:30.140

转到`project -> Build Settings -> Search "Packaging"`并更改**产品名称**密钥。

如果这不起作用，请重复但在您的目标范围内，所以`Targets -> YourApp -> Build Settings -> Search "Packaging"`

瞧。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-22T12:33:26.680

尝试通过在播放和停止按钮后选择 xcode 顶部的项目名称来构建您的应用程序的新方案。为我工作！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-24T12:06:02.343

在我的情况下**，按住**键盘上的选项键并转到

> 项目 -> 清理构建文件夹（option+shift+command+k）

之后**关闭并重新打开 Xcode**。

# spring - Spring Bean 继承和空指针异常问题

> ID：12848719
> 
> 赞同：1
> 
> 时间：2012-10-11T21:23:35.197
> 
> 标签：spring, javabeans, ojb

我正在向业务对象添加一个新 bean。

为此，我首先将成员添加到 PurchaseOrderDocument 类，方法是为其分配以下内容：

```
protected String purchaseOrderCurrentCMActionStatus; 
```

然后我当然给它分配了通常的getter和setter，如下所示：

```
 public String getPurchaseOrderCurrentCMActionStatus() {
    return purchaseOrderCurrentCMActionStatus;
}

public void setPurchaseOrderCurrentCMActionStatus(String purchaseOrderCurrentCMActionStatus) {
    this.purchaseOrderCurrentCMActionStatus = purchaseOrderCurrentCMActionStatus;
} 
```

好的，这一切都发生在我的 Java 类中。

所以现在，在 DataDictionary 目录中名为 PurchaseOrderDocument.xml 的相应 XML 文件中，我添加了以下 bean 定义 -

```
 <bean id="PurchaseOrderDocument-purchaseOrderCurrentCMActionStatus"
  parent="PurchaseOrderDocument-purchaseOrderCurrentCMActionStatus-parentBean"/>

    <bean id="PurchaseOrderDocument-purchaseOrderCurrentCMActionStatus-parentBean" abstract="true" parent="AttributeDefinition">
    <property name="name" value="purchaseOrderCurrentCMActionStatus"/>
    <property name="label" value="Current CM Action Status"/>
    <property name="required" value="false"/>
    <property name="shortLabel" value="CM Status"/>
    <property name="control">
       <ref bean="HiddenControl"/>
    </property>
 </bean> 
```

接下来，我需要创建 OJB 映射，因此在 ojb.xml 文件中我添加了以下 XML 代码行 -

```
<field-descriptor name="purchaseOrderCurrentCMActionStatus" column="CURR_CM_ACTION_STATUS" jdbc-type="VARCHAR"/> 
```

我还在相应的 TABLE 中创建了 CURR_CM_ACTION_STATUS 列 - 所以我双重和三次检查名称是否匹配。

对 -

所以问题来了：在我的 PurchaseOrderDocument 中，我有一个触发器，它等待一个事件，该事件将触发我在上面为此 bean 指定的“Setter”代码。奇怪的是，我编写的这段代码正在生成一个 NULL 指针异常。

我已将问题指向以下行 -

```
<bean id="PurchaseOrderDocument-purchaseOrderCurrentCMActionStatus-parentBean" abstract="true" parent="AttributeDefinition"> 
```

如果我更改以下行：

```
parent = "AttributeDefinition" 
```

到

```
parent = "Note-noteText" 
```

（Note 是一个类，noteText 是我最初在这个 bean 中继承的成员变量 - 但我不想再从 Note 类继承，我希望它在我的 PurchaseOrderDocument 类本地。无论如何，当我在那里有 Note-noteText，我没有得到空指针异常，而是在我的触发器调用“set”方法之后，没有将任何内容写入数据库，顺便说一下是 ORACLE。）

因此，这就是我放弃继承的原因，相反我希望这个 bean 对这个类是本地的。

我的一位同事提到，也许 Spring 正在 FORM 中寻找这个 bean，因为我没有它 - 它正在呕吐......但我有疑问。

另请注意，我正在使用隐藏控件。当我添加 parent="AttributeDefinition" 文本时，我收到一条错误消息，指出我没有指定控件属性。因为，这个 bean 不是从 USER 输入获取它的内容，所以我指定了这个 HIDDEN CONTROL 属性。

也许这是问题的一部分？？

这是堆栈跟踪以防万一-

```
堆栈跟踪：
    org.apache.jasper.servlet.JspServletWrapper.handleJspException（JspServletWrapper.java:521）
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:412)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1085)
    org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:398)
    org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:241)
    org.kuali.rice.kns.web.struts.action.KualiRequestProcessor.process(KualiRequestProcessor.java:101)
    org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
    org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.kuali.rice.kew.web.UserLoginFilter.doFilter(UserLoginFilter.java:92)
    org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:50)
    org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:167)
    org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:121)
    org.kuali.rice.kns.web.filter.SetResponseBufferSizeFilter.doFilter(SetResponseBufferSizeFilter.java:78)
    org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)
    org.kuali.rice.kns.web.filter.SessionFilter.doFilter(SessionFilter.java:41)

根本原因

javax.servlet.ServletException：javax.servlet.jsp.JspException：java.lang.NullPointerException
    org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:861)
    org.apache.jasper.runtime.PageContextImpl.handlePageException（PageContextImpl.java:794）
    org.apache.jsp.jsp.module.purap.PurchaseOrder_jsp._jspService(PurchaseOrder_jsp.java:269)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1085)
    org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:398)
    org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:241)
    org.kuali.rice.kns.web.struts.action.KualiRequestProcessor.process(KualiRequestProcessor.java:101)
    org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
    org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.kuali.rice.kew.web.UserLoginFilter.doFilter(UserLoginFilter.java:92)
    org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:50)
    org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:167)
    org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:121)
    org.kuali.rice.kns.web.filter.SetResponseBufferSizeFilter.doFilter(SetResponseBufferSizeFilter.java:78)
    org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)
    org.kuali.rice.kns.web.filter.SessionFilter.doFilter(SessionFilter.java:41)

根本原因

java.lang.NullPointerException
    org.kuali.rice.kns.datadictionary.exporter.AttributesMapBuilder.buildAttributeMap(AttributesMapBuilder.java:66)
    org.kuali.rice.kns.datadictionary.exporter.AttributesMapBuilder.buildAttributesMap(AttributesMapBuilder.java:51)
    org.kuali.rice.kns.datadictionary.exporter.DocumentEntryMapper.mapEntry(DocumentEntryMapper.java:88)
    org.kuali.rice.kns.datadictionary.exporter.TransactionalDocumentEntryMapper.mapEntry(TransactionalDocumentEntryMapper.java:30)
    org.kuali.rice.kns.datadictionary.exporter.DataDictionaryMap.get(DataDictionaryMap.java:60)
    javax.el.MapELResolver.getValue(MapELResolver.java:51)
    javax.el.CompositeELResolver.getValue(CompositeELResolver.java:54)
    org.apache.el.parser.AstValue.getValue(AstValue.java:123)
    org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)
    org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:938)
    org.apache.jsp.tag.web.kr.documentPage_tag._jspx_meth_c_005fset_005f0(documentPage_tag.java:382)
    org.apache.jsp.tag.web.kr.documentPage_tag.doTag(documentPage_tag.java:313)
    org.apache.jsp.jsp.module.purap.PurchaseOrder_jsp._jspService(PurchaseOrder_jsp.java:260)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1085)
    org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:398)
    org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:241)
    org.kuali.rice.kns.web.struts.action.KualiRequestProcessor.process(KualiRequestProcessor.java:101)
    org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
    org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.kuali.rice.kew.web.UserLoginFilter.doFilter(UserLoginFilter.java:92)
    org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:50)
    org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:167)
    org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:121)
    org.kuali.rice.kns.web.filter.SetResponseBufferSizeFilter.doFilter(SetResponseBufferSizeFilter.java:78)
    org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)
    org.kuali.rice.kns.web.filter.SessionFilter.doFilter(SessionFilter.java:41)

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:15:11.487

事实证明，上面的代码是正确的。

这个问题是我在一个没有被 Spring 框架持久化的瞬态对象上调用我的 setter 方法。（例如，我在一个对象上调用它，该对象的范围在我调用它的块中结束！）

为了解决这个问题，我只是在范围内的同一类的另一个实例上调用了 setter。

呃……

活到老，学到老。

# vb.net - 对话框在接受按钮单击时保持打开状态

> ID：12848721
> 
> 赞同：0
> 
> 时间：2012-10-11T21:23:41.840
> 
> 标签：vb.net, forms

我正在构建一个表单来从用户那里获取用户名和密码，但我无法让它工作。基本上当我输入用户名和密码时，如果我点击“取消”或关闭窗口，它会提取数据，但是当我按下“确定”时它会崩溃。我确信这是一个简单的修复，但我似乎无法在 Google 上找到类似的东西（这表明有更好的方法来做到这一点......但我是 vb.net 的新手，哈哈）。

这是表单（包装在一个公共函数中，返回字典中的用户名/密码）：

```
Public Function displayLoginForm() As Dictionary(Of String, String)

    Dim loginForm As New Form()
    Dim usernameLabel As New Label()
    Dim username As New TextBox()
    Dim passwordLabel As New Label()
    Dim password As New TextBox()
    Dim okButton As New Button()
    Dim cancelButton As New Button()

    usernameLabel.Text = "Username:"
    usernameLabel.Location = New Point(10, 10)
    usernameLabel.Width = 70
    username.Height = 20
    username.Width = 300
    username.Location = New Point(80, 10)

    passwordLabel.Text = "Password:"
    passwordLabel.Location = New Point(10, 40)
    passwordLabel.Width = 70
    password.Height = 20
    password.Width = 300
    password.Location = New Point(80, 40)

    okButton.Text = "Ok"
    okButton.Location = New Point(220, 70)

    cancelButton.Text = "Cancel"
    cancelButton.Location = New Point(okButton.Left + okButton.Width + 10, okButton.Top)

    loginForm.Text = "Login Form"
    loginForm.Height = 130
    loginForm.Width = 400
    loginForm.FormBorderStyle = FormBorderStyle.FixedDialog
    loginForm.MaximizeBox = False
    loginForm.MinimizeBox = False
    loginForm.AcceptButton = okButton
    loginForm.CancelButton = cancelButton
    loginForm.StartPosition = FormStartPosition.CenterScreen

    loginForm.Controls.Add(usernameLabel)
    loginForm.Controls.Add(username)
    loginForm.Controls.Add(passwordLabel)
    loginForm.Controls.Add(password)
    loginForm.Controls.Add(okButton)
    loginForm.Controls.Add(cancelButton)

    loginForm.ShowDialog()

    Dim Result As New Dictionary(Of String, String)
    Result.Add("username", username.Text)
    Result.Add("password", password.Text)

    Return Result

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:30:56.993

我错过了这条线

```
okButton.DialogResult = Windows.Forms.DialogResult.OK 
```

如果将其添加到代码中，表单将毫无问题地关闭。
老实说，我不明白为什么取消按钮有效。
它应该有类似的行

```
cancelButton.DialogResult = Windows.Forms.DialogResult.Cancel 
```

编辑：取消按钮的默认DialogResult属性设置为Cancel，我认为在okButton上省略DialogResult.OK（因此它默认为Cancel）会使看到AcceptButton = okButton设置为DialogResult = Cancel的winform管理器感到困惑。

# php - .htaccess 与 ^(.*)$ index.php/$1 给出“未指定输入文件”

> ID：12848722
> 
> 赞同：2
> 
> 时间：2012-10-11T21:23:41.900
> 
> 标签：php, apache, .htaccess, codeigniter

我正在运行 Code Igniter，我的 .htaccess 是：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?$1 [L]
    RedirectMatch 404 /\\.svn(/.*|$)
</IfModule> 
```

然后我意识到没有 $_GET 变量通过。

我按照一些说明创建 .htaccess 以与 Code Igniter 一起使用，并将 .htaccess 替换`index.php?$1`为`index.php/$1`. 这适用于 linux 机器，但在 Windows 上则不行。我确定这是一个服务器配置，但我不知道是哪一个。

假设我访问

```
http://localhost/directory/this_is_query/string_parameters?with_some=additional_ones 
```

on .htaccess的`$_SERVER['QUERY_STRING']`值是：`index.php?$1`

```
string(31) "this_is_query/string_parameters" 
```

并与`index.php/$1`：

```
No input file specified. 
```

在 Linux 机器上，我有：

```
string(31) "with_some=additional_ones" 
```

作为回应`index.php/$1`。

有什么想法吗？

* * *

我正在调试`$_SERVER['QUERY_STRING']`FIRST 行上的变量`index.php`，与 Code Igniter 没有任何交互。

是的，我有`mod_rewrite`。

## 这与[Codeigniter 没有指定输入文件错误相同](https://stackoverflow.com/questions/10361742/codeigniter-no-input-file-specified-error)

在问这个问题之前，我看到了这个问题。我仍然有这个问题。

我添加了新信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:49:09.510

利用 `RewriteRule ^(.*)$ index.php/?$1 [L]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:29:40.413

我认为您缺少将查询字符串附加到末尾[的 QSA 选项：](http://docforge.com/wiki/Mod_rewrite#Examples)

```
RewriteRule \.svn/ - [F,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 [L,QSA] 
```

为了让查询参数井井有条，如果 CodeIgniter 允许，我建议设置一个参数名称：

```
RewriteRule ^(.*)$ index.php?page=$1 [L,QSA] 
```

# php - CakePHP 2.2.3 脚手架操作错误

> ID：12848727
> 
> 赞同：0
> 
> 时间：2012-10-11T21:23:54.597
> 
> 标签：php, cakephp, scaffolding

我正在为我的应用程序设置脚手架以显示用户表的 CRUD 类型界面。

我添加了基本模型 user.php 和控制器 UsersController.php 并添加了脚手架。现在当我去 localhost/cake/users

我收到关于我的操作列中所有链接的通知 8。

截图在这里：http: [//i.stack.imgur.com/qhhok.png](http://i.stack.imgur.com/qhhok.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T10:08:55.900

您有没有按照 Cake 约定将用户表的主键命名为“userid”而不是“id”？

如果是这样，您可以（a）将列重命名为“id”，或者（b）告诉您的模型（User.php）使用“userid”作为主键，例如

```
class User extends AppModel {
...
  public $primaryKey = 'userid';
...
} 
```

选项 (a) 将是首选的 Cake 做事方式。

# java - Java，根据文件制作银行账户

> ID：12848729
> 
> 赞同：-1
> 
> 时间：2012-10-11T21:23:57.097
> 
> 标签：java, arrays, string, split

对于家庭作业，我需要阅读以下格式的文件：

```
Miller
William
00001
891692 06 <--this is supposed to be the dollar amount in the account 
```

我需要找到一种方法来分割每一美元的金额，也就是每 4 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:28:13.947

使用扫描仪

```
import java.util.Scanner;

public class ScannerEx {

public static void main(String[] args) {
    Scanner scanner = new Scanner(new File("input.txt"));
    int count = 1;
    while(scanner.hasNextLine()) {
        String nextLine = scanner.nextLine();
        if(count % 4 == 0) {
             //Dollar amount in nextLine
        }
        count++;
    }

 }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T21:28:29.913

您可以使用 a`BufferedReader`来读取文件内容，同时`lineCount`为每一行维护 a 。然后`String.split`在每 4 行使用：

```
if (lineCount % 4 == 0) {
   String[] dollarAmount = String.split(" ");
}
... 
```

# sql - SQL 查询同时使用 LIKE 和 IN 和通配符

> ID：12848733
> 
> 赞同：0
> 
> 时间：2012-10-11T21:24:04.100
> 
> 标签：sql, select

我有一个数据库表，用户可以在其中使用大量变量过滤单个列，目前我的 sql 查询字符串看起来像：

```
SELECT * 
FROM TABLE1
WHERE COLUMN1 LIKE '%APPLE%'
AND COLUMN1 LIKE '%ORANGE%'
AND COLUMN1 LIKE '%GRAPE%'
AND COLUMN1 LIKE '%LEMON%'
AND COLUMN1 LIKE '%LIME%'
AND COLUMN1 LIKE '%TOMATO%'
AND COLUMN1 LIKE '%POTATO%'
... 
```

特别是如果我在表适配器中使用参数化查询字符串来创建填充和获取最终具有 20 个参数的方法，这将变得很痛苦。

有没有更好的方法（比如使用 IN 命令，所以我只需要一个参数）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:25:23.973

也许`regular expressions`会帮助你：

```
SELECT * 
FROM TABLE1
WHERE COLUMN1 LIKE '%[a-z]%' 
```

如果您使用`sql-server`尝试`CONTAINS`

```
SELECT * 
FROM TABLE1
WHERE CONTAINS(COLUMN1, 'APPLE AND ORANGE') 
```

[在这里](http://www.c-sharpcorner.com/UploadFile/krishnasarala/creating-full-text-index-in-sql-server/)您可以找到更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:42:07.830

如果这是 Microsoft SQL Server，如果您使用的是 SQL 2012，您应该查看[全文搜索 (SQL Server)](http://msdn.microsoft.com/en-us/library/ms142571%28v=sql.105%29.aspx)或[全文搜索 (SQL Server)](http://msdn.microsoft.com/en-us/library/ms142571%28v=sql.110%29.aspx)。有多种方法可以比 LIKE 更有效地搜索单词匹配。

# mysql - 视图与具有大型数据集的索引表的性能

> ID：12848734
> 
> 赞同：0
> 
> 时间：2012-10-11T21:24:13.737
> 
> 标签：mysql, sql, optimization

我有一张包含 15,000,000 条记录的表。这些记录可以根据某些匹配字段相互关联（通常单个组中最多 3 或 4 个）。每条记录还有一个与之关联的日期，但是该日期不一定与它被加载到表中的日期/顺序相关。

这些记录定期用于更新数据库中的其他记录。不过，我只关心单个组中的 LATEST 记录，并且有 1500 万条记录（正在更新另外 1000 万条记录），我想确保忽略其他所有内容。如果最新记录已经有“更新”标志，我也想跳过更新。

我一直在使用这样的视图来收集每个组中的最新记录：

```
SELECT a, b, c, max(scan.timestamp) AS latest_scan
FROM scan
GROUP BY a, b, c; 
```

然后我在 my 中使用一个`WHERE`子句`UPDATE`来忽略任何带有更新标志的记录。

有这么多记录，我可以使用视图吗？我已经看到人们开始动态创建真正的可索引表以提高性能，但我仍然觉得这需要很长时间。这是我可以从中受益的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:56:30.097

大多数情况下，您需要尝试一下，看看性能如何。

关键是视图最终将成为子查询的快速表示法，它将为优化器提供信息。因此，它仍然主要取决于优化器是否可以找到用于调用数据库的 SQL 语句的索引。

请注意，您的视图中可能不需要 ORDER BY，因为您将在其他一些 SQL 语句中使用它，然后可以对记录进行排序。如果优化器没有发现它可以跳过 order by，那么你只会在不需要的时候花时间排序。

我希望您可以使用 GROUP BY a, b, c 来获取组的最大时间戳。

# r - 声明一个用户定义的分布

> ID：12848736
> 
> 赞同：11
> 
> 时间：2012-10-11T21:24:25.893
> 
> 标签：r, distribution, declaration

你如何在 R 中定义自己的分布？如果我有一个看起来像这样的分布：

```
P(D=0)=2/4, P(D=1)=1/4, P(D=2)=1/4 
```

我如何将它变成我可以使用的发行版？

最后，我希望能够使用这些并做涉及 cdfs、icdfs 和 pmfs 的事情。就像通过 cdf 类型的东西找到 1 的概率一样。而且我还需要找出如何绘制图表。但我打算以更小的步骤询问，并尝试在两者之间找出问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-11T22:00:15.360

如果您只需要从分布中生成随机变量，这就足够了：

```
rMydist <- function(n) {
    sample(x = c(0,1,2), size = n, 
           prob = c(.5, .25, .25), replace=T)
}

rMydist(20)
# [1] 1 0 2 0 2 1 1 0 2 2 0 0 2 1 0 0 0 0 0 1

prop.table(table(rMydist(1e6)))
#        0        1        2 
# 0.500555 0.250044 0.249401 
```

对于更花哨的东西，试试**distr**包。除了随机数生成之外，它还会为您提供与您的分布相关的密度、分布和分位数函数：

```
library(distr)
## For more info, type: vignette("newDistributions")  

# Define full suite of functions (d*, p*, q*, r*) for your distribution
D <- DiscreteDistribution (supp = c(0, 1, 2) , prob = c(0.5, .25, .25))
dD <- d(D)  ## Density function
pD <- p(D)  ## Distribution function
qD <- q(D)  ## Quantile function
rD <- r(D)  ## Random number generation

# Take them for a spin
dD(-1:3)
# [1] 0.00 0.50 0.25 0.25 0.00
pD(-1:3)
# [1] 0.00 0.50 0.75 1.00 1.00
qD(seq(0,1,by=0.1))
# [1] 0 0 0 0 0 0 1 1 2 2 2
rD(20)
# [1] 0 0 2 2 1 0 0 1 0 1 0 2 0 0 0 0 1 2 1 0 
```

# xsd - Tridion 模式设计中的属性

> ID：12848742
> 
> 赞同：1
> 
> 时间：2012-10-11T21:24:54.447
> 
> 标签：xsd, schema, tridion

在 SDL Tridion Schema 设计视图中，您无法将属性添加到元素。

这似乎是一个设计决定。有人知道这背后的原因吗？您是否发现这限制了您设计模式的自由？

如果您在旧模式中有属性的地方进行迁移，这一点更为重要。您始终可以重写您的架构以不使用属性，但这意味着您必须在新旧架构之间进行映射。

当然，您可以使用 Source 视图添加属性，但是，您将不再使用 Design 视图再次编辑模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T21:56:57.920

原因很简单，几乎不可能设计一个 UI 来编辑基于任何 W3C 模式的 XML。因此，创建了一个 Scema 子集以在 UI 中使用。

然而，在与 Tridion 合作的 12 年中，我还没有为内容创建一个复杂的模式。你应该没问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T21:45:40.637

是的，如果您包含自定义 XSD，则无法在正常 SDL Tridion 界面中编辑此内容和基于它的内容。

可以创建嵌入式模式，您可以将其作为嵌入式模式字段包含到“主”模式中。也有可能在嵌入字段中嵌入字段。最后，还有启用任何字段多次重复的功能，所以我怀疑您在定义模式/数据模型时不会遇到任何问题。

# objective-c - 如何获取 NSString，例如“0+1+2”，获取它们的总和并创建新字符串。对象-C

> ID：12848744
> 
> 赞同：0
> 
> 时间：2012-10-11T21:24:58.153
> 
> 标签：objective-c, cocoa, nsstring, int

好的。我的应用程序有一个文本字段，旁边是两个按钮（加号按钮和等号按钮）。当您按下“加号”按钮时，它会获取 textField 中的文本并为其添加一个“+”。下面的代码：

```
- (IBAction)plusButtonPressed:(id)sender {
    NSString *plusString = @"+";
    NSString *inputString = carbsField.text;
    NSString *outputString = [NSString stringWithFormat:@"%@%@",inputString,plusString];
    NSLog(@"%@",outputString);
    [carbsField setText:outputString];
} 
```

我最终会让它变得更聪明，这样我就不能放两个加号或其他任何东西。无论如何，然后我希望等号按钮获取文本字段中的任何内容，它应该类似于：“23+54+2.2”并获得这些值的总和。我相信我知道如何获取一个整数并将其变成一个字符串，但我想验证它：

```
int value = 56;
NSString *string = @"%d",value; 
```

好吧，如果有人能告诉我如何做到这一点，我将不胜感激。谢谢。

**编辑** 目前，我还没有尝试过任何东西。这是因为我不知道从哪里开始。我有一个想法，但我不知道如何执行它。我相信我需要在“+”将它们转换为之前获取所有字符`int`，然后获取这些值的一些数组的总和。

**编辑 #2** 我现在使用：

```
- (IBAction)equalButtonPressed:(id)sender {
    NSString *inputString = carbsField.text;
    NSArray *numbers = [inputString componentsSeparatedByString:@"+"];
    int sum = 0;
    for (NSString *number in numbers) {
        sum += [number intValue];
    }
    NSString *theSum = [NSString stringWithFormat:@"%d",sum];
    NSLog(@"%@",theSum);
} 
```

但是，它根本不会记录任何内容。我做错什么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T21:31:39.877

这取决于这将变得多么复杂。如果您正在寻找实现更复杂的计算器，我建议您寻找可以为您执行此操作的评估器库。

但是，如果您只想在列表中添加一堆数字，您可以这样做：

```
NSString *input = @"1+2+3.5";
NSArray *numbers = [input componentsSeparatedByString:@"+"];
float sum = 0;
for (NSString *number in numbers) {
   sum += [number floatValue];
}
NSLog(@"Result: %f", sum); 
```

请注意，这是非常不灵活的代码，仅执行您描述的操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T21:42:14.957

一个提示

```
NSExpression *expression = [NSExpression expressionWithFormat:@"23+54+2.2"];
id result = [expression expressionValueWithObject:nil context:nil]; //returns NSNumber object

NSLog(@"%@", result);

if ([result floatValue] ==  [nsnumberWithExpectedResult floatValue]) {
    //WARNING: comparing floats like this is highly dangerous, due to rounding errors 
    // while with ints it is ok
} 
```

# python - 使用 imaplib 访问企业 gmail

> ID：12848745
> 
> 赞同：1
> 
> 时间：2012-10-11T21:25:04.463
> 
> 标签：python, gmail, imaplib

我有以下代码，它适用于我自己的个人电子邮件。

```
import getpass, imaplib
import email
import libgmail
import re

#M=imaplib.IMAP4()
M=imaplib.IMAP4_SSL('imap.gmail.com',993)
M.login('loginname@company.com','password')
M.select('bur-dev')

typ, data = M.search(None, 'ALL')
for num in data[0].split():
    typ, data = M.fetch(num, '(RFC822)')
    print 'Message %s\n%s\n' % (num, data[0][1])
M.close()
M.logout() 
```

虽然使用我的公司邮件（我确实打开了 imap），但我遇到了连接超时-

```
 C:\Python24\libgmail-0.1.11>python gmail_app.py
Traceback (most recent call last):
  File "gmail_app.py", line 7, in <module>
    M=imaplib.IMAP4_SSL('imap.gmail.com',993)
  File "/usr/lib/python2.6/imaplib.py", line 1138, in __init__
    IMAP4.__init__(self, host, port)
  File "/usr/lib/python2.6/imaplib.py", line 163, in __init__
    self.open(host, port)
  File "/usr/lib/python2.6/imaplib.py", line 1149, in open
    self.sock = socket.create_connection((host, port))
  File "/usr/lib/python2.6/socket.py", line 514, in create_connection
    raise error, msg
socket.error: [Errno 116] Connection timed out 
```

关于如何调试的任何想法？该端口没有防火墙，因为它适用于我的个人电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:41:38.487

您似乎遇到了防火墙问题。
您的公司不允许在端口 993 上连接到 imap.gmail.com。
正如评论之一中建议的那样，从命令行尝试：
telnet imap.gmail.com 993

如果超时或出错，则不允许从您的机器访问该端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-11T14:48:50.880

连接被阻塞。以下可能是可能的原因：

1.  代理用于互联网访问。Python 尝试直接连接。

2.  防火墙或网络安全设备阻止连接

3.  系统本地fireall或AV阻塞连接

# android - 服务器正确发送 json 数据。客户端解析错误

> ID：12848748
> 
> 赞同：0
> 
> 时间：2012-10-11T21:25:25.363
> 
> 标签：android, json

我有一个 PHP 代码，它生成一个 JSON 字符串以发送到我的 Android 应用程序。这部分有效。问题是当我的应用程序捕获该字符串并尝试将其转换为 JSONArray 对象时。主要思想是将这些数据存储在 SQLite 数据库中。

这是捕获 JSON 字符串的代码：

```
public void getPostResponse(){
    try{
        br = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        sb = new StringBuilder();
        line = null;
        while((line = br.readLine()) != null){
            sb.append(line+"\n");
        }
        is.close();
        result = sb.toString();
        Log.e("getPostResponse","result= "+sb.toString());
    }catch(Exception e){
        Log.e("log_tag","Error converting result "+e.toString());
    }
} 
```

这是 LogCat 中的结果：

```
10-11 16:27:01.171: E/getPostResponse(9155): result= [{ "establecimientos":[]},{ "rutas":[]},{ "formularios":[]},{ "clientes":[]},{ "mediciones":[]}] 
```

这就是为什么我认为有一个错误，结果变量应该包含整个 JSON 字符串而它没有。有任何想法吗？

变量 br、sb、line 和 result 是全局声明的。从服务器发送的 JSON 已经是 JSONArray（以 '[' 开头并以 ']' 结尾），这是导致问题的原因吗？

这是 json 字符串：

```
[
    {
        "establecimientos": [
            {
                "idestablecimiento": "108",
                "nombre": "Establecimiento 123",
                "direccion": "632-8165 Non Road",
                "idruta": "104",
                "idempresa": "1004"
            },
            {
                "idestablecimiento": "102",
                "nombre": "Establecimiento XYZ",
                "direccion": "Ap #124-9882 Risus, Street",
                "idruta": "106",
                "idempresa": "1006"
            },
            {
                "idestablecimiento": "106",
                "nombre": "Unicasa La Candelaria",
                "direccion": "P.O. Box 898, 6831 Morbi Rd.",
                "idruta": "106",
                "idempresa": "1001"
            }
        ]
    },
    {
        "rutas": [
            {
                "idruta": "106",
                "nombre": "Petare"
            },
            {
                "idruta": "104",
                "nombre": "La Castellana"
            }
        ]
    },
    {
        "formularios": [
            {
                "idformulario": "100",
                "nombre": "Encuesta Libre",
                "idestablecimiento": "108"
            },
            {
                "idformulario": "100",
                "nombre": "Encuesta Libre",
                "idestablecimiento": "102"
            },
            {
                "idformulario": "100",
                "nombre": "Encuesta Libre",
                "idestablecimiento": "106"
            }
        ]
    },
    {
        "clientes": [
            {
                "idcliente": "1002",
                "nombre": "Sibelius",
                "idempresa": "1006"
            },
            {
                "idcliente": "1009",
                "nombre": "Lavasoft",
                "idempresa": "1004"
            },
            {
                "idcliente": "1000",
                "nombre": "Cakewalk",
                "idempresa": "1001"
            }
        ]
    },
    {
        "mediciones": [
            {
                "idformulario": "100",
                "idmedicion": "100",
                "texto": "1) FALTA DE PRODUCTO",
                "tipopregunta": "Seleccion Simple",
                "tipodato": "String"
            },
            {
                "idformulario": "100",
                "idmedicion": "101",
                "texto": "2) PRE VENDEDOR NO VISITA",
                "tipopregunta": "Si o No",
                "tipodato": "String"
            },
            {
                "idformulario": "100",
                "idmedicion": "102",
                "texto": "3) ENTREGADOR NO DESPACHA",
                "tipopregunta": "Si o No",
                "tipodato": "String"
            },
            {
                "idformulario": "100",
                "idmedicion": "103",
                "texto": "4) NEVERA FUERA DE SERVICIO",
                "tipopregunta": "Seleccion Simple",
                "tipodato": "String"
            },
            {
                "idformulario": "100",
                "idmedicion": "104",
                "texto": "5) NEVERA CONTAMINADA",
                "tipopregunta": "Seleccion Simple",
                "tipodato": "String"
            },
            {
                "idformulario": "100",
                "idmedicion": "105",
                "texto": "6) CLIENTE EXCLUSIVO DE LA COMPETENCIA",
                "tipopregunta": "Si o No",
                "tipodato": "String"
            },
            {
                "idformulario": "100",
                "idmedicion": "106",
                "texto": "7) FALTA DE MATERIAL POP EN PDV",
                "tipopregunta": "Si o No",
                "tipodato": "String"
            },
            {
                "idformulario": "100",
                "idmedicion": "107",
                "texto": "8) CLIENTE CERRADO",
                "tipopregunta": "Si o No",
                "tipodato": "String"
            },
            {
                "idformulario": "100",
                "idmedicion": "108",
                "texto": "9) NEGACIÓN POR PARTE DEL CLIENTE",
                "tipopregunta": "Si o No",
                "tipodato": "String"
            },
            {
                "idformulario": "100",
                "idmedicion": "109",
                "texto": "10) PRODUCTO VENCIDO",
                "tipopregunta": "Seleccion Simple",
                "tipodato": "String"
            },
            {
                "idformulario": "100",
                "idmedicion": "110",
                "texto": "11) PROMOCIONES ESPECIALES",
                "tipopregunta": "Si o No",
                "tipodato": "String"
            }
        ]
    }
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:34:32.260

更容易获取您的帖子调用的 HttpResponse，获取实体字符串等，创建一个新的 JSONObject：

```
//create an Uri
URI uri = new URI(string);
//or using URIUtils

HttpClient client = new DefaultHttpClient();
HttpPost post = new HttpPost(uri);
HttpResponse response = client.execute(post);
String jsonString = EntityUtils.toString(response.getEntity());
JSONObject json = new JSONObject(jsonString); 
```

因此，您可以操作和检查 json 对象。例如，如何获取 JSONArray：

```
JSONArray array = json.getJSONArray("estabelecimentos"); 
```

[]s 内托

# javascript - 谁能告诉我这个功能的问题..这个功能不起作用

> ID：12848750
> 
> 赞同：2
> 
> 时间：2012-10-11T21:25:26.490
> 
> 标签：javascript, jquery

```
$(window).unload(function() {
    var c = confirm("Are You want to open Foortal.pk");
    if (c) {

        window.location.replace("http://www.google.com")

        return true;
    } else {
        return false;
    }
});​ 
```

我不知道问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:35:52.163

**工作演示** [http://jsfiddle.net/FUXRF/](http://jsfiddle.net/FUXRF/)

阅读此 ==> [https://forum.jquery.com/topic/jquery-onbefore-unload-and-page-redirect](https://forum.jquery.com/topic/jquery-onbefore-unload-and-page-redirect)

`:)`我希望每个人都能像火箭一样工作

**代码**

```
$(window).unload(function() {
    var c = confirm("Are You want to open Foortal.pk");
    if (c) {
        alert(window.location);
       // window.location.replace("http://www.google.com");
        window.parent.location = "http://www.google.com";
        return true;
    } else {
        return false;
    }
});

$(window).trigger('unload');
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:30:47.970

```
window.parent.location ="http://www.google.com"; 
```

用那个代替

```
window.location.replace("http://www.google.com"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T21:35:38.747

你忘了';' 上

```
window.location.replace("http://www.google.com"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T21:27:50.927

我们这样做

```
 $(window).bind("beforeunload", function(){
        return "Are you OK?";
    }); 
```

尝试

```
 $(window).bind("beforeunload", function(){
        var c = confirm("Are You want to open Foortal.pk");
        if (c) {

            window.location("http://www.google.com");

            return true;
        } else {
            return false;
        }
    }); 
```

# jsf - 使用侦听器 JSF 2.0 重定向时出错

> ID：12848754
> 
> 赞同：0
> 
> 时间：2012-10-11T21:26:09.603
> 
> 标签：jsf, redirect, jsf-2

我有一个 index.xhtml 页面

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">

<f:view>
    <ui:insert name="metadata" />
    <f:event type="preRenderView" listener="#{item.show}" />
    <h:body></h:body>
</f:view>
</html> 
```

在具有范围会话的 bean 类中，此方法

```
public void show() throws IOException, DAOException {

        ExternalContext externalContext = FacesContext.getCurrentInstance()
                .getExternalContext();

        //!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
            itemsList = itemsBo.showItems(); 

        String rootPath = externalContext.getRealPath("/");
        String realPath = rootPath + "pages\\template\\body\\list.xhtml";
        externalContext.redirect(realPath);     
    } 
```

我认为我应该重定向到下一页，但我有“浏览器无法显示页面”

和 list.xhtml （如果我将此页面作为欢迎页面我没有错误，这意味着该错误与重定向有关）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<h:body>
    <ui:composition template="/pages/layouts/mainLayout.xhtml">
        <ui:define name="content">
            <h:form><h:dataTable value="#{item.itemsList}" var="itemVar"
                styleClass="order-table" headerClass="order-table-header"
                rowClasses="order-table-odd-row,order-table-even-row">

                <h:column>              
                #{itemVar.content}
        </h:column>
            </h:dataTable></h:form></ui:define></ui:composition>
</h:body>
</html> 
```

在 consol 中我没有任何错误。

在 web.xml 中

```
<welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping> 
```

这个问题和我在重定向后丢失值 itemsList 的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:17:49.963

该方法[`redirect()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#redirect%28java.lang.String%29)必须接收有效的 URL，而您传递给它的内容无效，主要是因为您使用的是反斜杠`\\`而不是普通的斜杠`/`。

尝试制作：

```
String realPath = rootPath + "pages/template/body/list.xhtml"; 
```

# mysql - MySQL 数据库结构决策

> ID：12848758
> 
> 赞同：0
> 
> 时间：2012-10-11T21:26:31.497
> 
> 标签：mysql, overhead-minimization

我正在尝试在为有关用户的所有可能数据提供 1 个巨大的表之间做出决定，其中很多不会适用于每个用户，然后为用户可以拥有多个实例的数据创建一个单独的表（例如，以前的工作）与将每个用户的数据分布在多个表之间。

第一种方式更加精简，但我觉得它会使用大量不必要的开销，而第二种方式的结果更容易使用，但会导致大量额外的数据库查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:31:00.530

一些关联事物的多个实例*总是*进入另一个表。这个过程称为[标准化](http://en.wikipedia.org/wiki/Database_normalization)。

虽然乍一看似乎更复杂，但从长远来看，它会让你的生活更轻松。如果需要（如果您的关键字段被正确索引），像 MySQL 这样的数据库系统可以将表重新组合在一起（非规范化）。

由于多种原因，使用像您描述的那样的非规范化表要困难得多。假设 a`Person`有多个地址。你怎么把它放到主表中？ `Address1`, `Address2`, `Address3`? 如果这个人有四个不同的地址怎么办？

使用这样的表将变得更加困难，因为您现在必须在编写的每个查询中处理表中的*三*列而不是一列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:40:28.823

如果相关的品质取决于用户的类型，并且特定类型的所有用户都具有所有这些品质，那么您可以为每种类型创建一个表格。

CREATE TABLE Type1_Qualities ( id int not null auto_increment 主键, user_id int 引用 (User), qual1 ..., qual2 ..., ... )

Type2 和 Type3 也是如此。这避免了为每个用户提供所有这些无关字段，但比使用通用属性表（如 xception 的答案）进行大量连接更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T21:38:17.487

根据您的数据存储方式，您可能会选择多关系数据结构，这只是一个示例：

```
CREATE TABLE user (
   id int not null auto_increment primary key,
   name varchar[60] not null
);
CREATE TABLE attributes (
   id smallint not null auto_increment primary key,
   name varchar[20] not null,
   order smallint --optional
);
CREATE TABLE userattributes (
   user int not null references user (id),
   attribute smallint not null references attributes(id),
   value varchar[100] not null,
   order tinyint --optional
);
INSERT INTO textattributes(name) VALUES ('alias'), ('address'), ('hobby') 
```

我将订单字段标记为可选，因为您可能不关心这些

```
SELECT a.name, ua.value
FROM userattributes AS ua
JOIN attributes AS a
    ON ua.attribute = a.id
WHERE user = :user
ORDER BY a.order, ua.order 
```

如果您愿意，您也可以加入用户，但该数据将为每一行重复，或者您可以使用单独的查询从用户获取数据。我个人会为此使用第二个查询。

# file-upload - IIS 7 上的经典 ASP - 需要上传器组件

> ID：12848761
> 
> 赞同：0
> 
> 时间：2012-10-11T21:27:04.533
> 
> 标签：file-upload, asp-classic

从 IIS6 移动到 IIS7（Windows 2008 Server 64 位）。我正在寻找与我的 Classic ASP 一起使用的上传组件。是否有一些 .Net 代码可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:32:20.700

您可以在 Classic ASP 中仅在代码中执行此操作，而无需使用组件。此代码有多个版本，但[免费 ASP 上传](http://www.freeaspupload.net/)似乎是一个流行的选择。

# android - 如何退出android phonegap应用程序

> ID：12848763
> 
> 赞同：0
> 
> 时间：2012-10-11T21:27:14.803
> 
> 标签：android, cordova

我需要通过单击按钮退出 Android Phonegap 应用程序我尝试在 onclick 事件中使用此代码

```
navigator.app.exitApp() 
```

但它没有用，什么也没发生，那么该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T10:35:40.430

您需要为按钮添加一个监听事件并关联一个函数。[在这里](https://stackoverflow.com/questions/10123005/close-android-app-jquery-phonegap/10134499#10134499)检查。

将您的 phonegap/cordova 版本更新到最新版本并使用上面提供的代码是个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T07:09:15.890

尝试升级PhoneGap.js，可能会解决你的问题

# html - 对于移动网站，我的图片应该是什么尺寸

> ID：12848764
> 
> 赞同：12
> 
> 时间：2012-10-11T21:27:21.903
> 
> 标签：html, css, mobile, jquery-mobile

我们正在为移动网站设计一个模板，我们遇到了一个问题，即我们不知道徽标应该是什么尺寸或背景等。

我们将使用 Jquery 移动 API 和 HTML5 / CSS3，这基本上允许我们创建网站的整个架构而不用担心尺寸，但就背景和图像等外部资源而言，我们不知道什么是最佳尺寸为了与大多数设备更兼容。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-11T21:50:18.433

iPhone 4S/5 有一个 640 像素宽的高分辨率屏幕。许多 Android 智能手机的最高宽度为 720 像素，尽管有些高达 800 像素。任何超过它的东西都可能被认为是平板电脑。

那么，就广泛的兼容性而言，你能做的最好的事情就是单一的 CSS 样式：

```
img { max-width: 100%; height: auto; } 
```

这将确保无论屏幕的分辨率是多少，您的图像都不会大于包含它的元素。（在考虑移动用户构建响应式网站时，您的元素宽度、边距和内边距都应尽可能以百分比计算。）显然，这也意味着您下载的图像数据比许多手机需要的多，但如果您'正在处理双色徽标，这没有太大区别。与往常一样，让您的图像尽可能少和尽可能小。

此外，如果您不处理照片，则应该查看 SVG 图像。由于它们是基于矢量的，因此它们可以在任何分辨率下完美调整大小，并且[它们与几乎所有浏览器兼容，除了 IE8 和 Android 2.x](http://caniuse.com/#search=svg)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-27T19:12:47.913

我确信图像大小通常不应该更像它定义的 CSS 媒体查询标准。

这是 2015-2016 年最流行设备的 CSS 媒体查询的简短列表。

如果需要，只需将新设备的媒体请求添加到此列表中即可。

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen and (min-device-width : 320px) and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : portrait) {
/* Styles */
}
/**********
iPad 3
**********/
@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : landscape) and (-webkit-min-device-pixel-ratio : 2) {
/* Styles */
}

@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : portrait) and (-webkit-min-device-pixel-ratio : 2) {
/* Styles */
}
/* Desktops and laptops ----------- */
@media only screen  and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen  and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media only screen and (min-device-width : 320px) and (max-device-width : 480px) and (orientation : landscape) and (-webkit-min-device-pixel-ratio : 2) {
/* Styles */
}

@media only screen and (min-device-width : 320px) and (max-device-width : 480px) and (orientation : portrait) and (-webkit-min-device-pixel-ratio : 2) {
/* Styles */
}

/* iPhone 5 ----------- */
@media only screen and (min-device-width: 320px) and (max-device-height: 568px) and (orientation : landscape) and (-webkit-device-pixel-ratio: 2){
/* Styles */
}

@media only screen and (min-device-width: 320px) and (max-device-height: 568px) and (orientation : portrait) and (-webkit-device-pixel-ratio: 2){
/* Styles */
}

/* iPhone 6 ----------- */
@media only screen and (min-device-width: 375px) and (max-device-height: 667px) and (orientation : landscape) and (-webkit-device-pixel-ratio: 2){
/* Styles */
}

@media only screen and (min-device-width: 375px) and (max-device-height: 667px) and (orientation : portrait) and (-webkit-device-pixel-ratio: 2){
/* Styles */
}

/* iPhone 6+ ----------- */
@media only screen and (min-device-width: 414px) and (max-device-height: 736px) and (orientation : landscape) and (-webkit-device-pixel-ratio: 2){
/* Styles */
}

@media only screen and (min-device-width: 414px) and (max-device-height: 736px) and (orientation : portrait) and (-webkit-device-pixel-ratio: 2){
/* Styles */
}

/* Samsung Galaxy S3 ----------- */
@media only screen and (min-device-width: 320px) and (max-device-height: 640px) and (orientation : landscape) and (-webkit-device-pixel-ratio: 2){
/* Styles */
}

@media only screen and (min-device-width: 320px) and (max-device-height: 640px) and (orientation : portrait) and (-webkit-device-pixel-ratio: 2){
/* Styles */
}

/* Samsung Galaxy S4 ----------- */
@media only screen and (min-device-width: 320px) and (max-device-height: 640px) and (orientation : landscape) and (-webkit-device-pixel-ratio: 3){
/* Styles */
}

@media only screen and (min-device-width: 320px) and (max-device-height: 640px) and (orientation : portrait) and (-webkit-device-pixel-ratio: 3){
/* Styles */
}

/* Samsung Galaxy S5 ----------- */
@media only screen and (min-device-width: 360px) and (max-device-height: 640px) and (orientation : landscape) and (-webkit-device-pixel-ratio: 3){
/* Styles */
}

@media only screen and (min-device-width: 360px) and (max-device-height: 640px) and (orientation : portrait) and (-webkit-device-pixel-ratio: 3){
/* Styles */
} 
```

并查看旧列表[https://css-tricks.com/snippets/css/media-queries-for-standard-devices/](https://css-tricks.com/snippets/css/media-queries-for-standard-devices/)和[https://gist.github.com/hs0ucy/3762901](https://gist.github.com/hs0ucy/3762901)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T00:29:22.667

考虑以下 html 代码：

```
<img src="images/myimage.jpg" alt="image"> 
```

看一下那个例子，我们需要多个图像，具体取决于屏幕尺寸。由于大多数浏览器首先查看 HTML 文档并在加载 Javascript 之前预加载图像，因此 Javascript 并不是一个完美的解决方案。

这就是为什么：**使用响应式图像服务器！**

我使用过**[Sencha.io Src](http://www.sencha.com/products/io/)**，它会计算设备屏幕并缩小（**它只**缩小图像）你的图像以适应它的屏幕尺寸限制。Sencha.io 使用浏览器用户代理字符串在其数据库中查找设备。然后它将您的图像缩小到设备的最大宽度并将其存储在缓存中，该缓存将可用 30 分钟。

像这样使用它：

```
<img src="http://src.sencha.io./http://[your domain and path]/images/myimage.jpg" alt="image"> 
```

PS：它也有它的缺点：它依赖于设备检测，并且需要您通过第三方路由所有图像。但由于目前它们不是很好的解决方案（即使使用媒体查询，您也必须处理浏览器，这些浏览器会在不适用的媒体查询中下载资源） - 我希望这会对您有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T21:52:58.310

您必须为此使用 CSS 媒体查询。在这里看看这篇文章：http: [//davidwalsh.name/image-max-width](http://davidwalsh.name/image-max-width)

```
/* iphone */
@media only screen and (min-device-width : 320px) and (max-device-width : 480px) {
      img { max-width: 100%; }
}

/* ipad */
@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) {
      img { max-width: 100%; }
} 
```

# c - 将节点添加到全局链表

> ID：12848765
> 
> 赞同：1
> 
> 时间：2012-10-11T21:27:22.510
> 
> 标签：c, linked-list, global

我正在尝试构建我的第一个链表，并且在阅读了[基本](http://cslibrary.stanford.edu/103/)介绍后，我完成了以下操作。首先，声明一个链表节点为：

```
struct errorNode {
    uint8 error;
    struct errorNode* next;
}; 
```

其次，将第一个节点全局定义为：

```
struct errorNode errorList = {0, NULL}; 
```

这样做是为了允许构成我当前项目的每个库将错误插入到一个公共列表中。执行此操作的功能是：

```
void errorListWrite(uint8 error) {
    struct errorNode* newNode = malloc(sizeof(struct errorNode));

    newNode->error = error;

    newNode->next = &errorList;
    errorList = *newNode;
} 
```

虽然编译没有错误，但它没有按预期运行。我认为问题在于列表写入函数的最后两个语句，但我不确定。关于我做错了什么的提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:36:54.070

问题是您创建了一个循环列表。

```
newNode->next = &errorList; 
```

所以`newNode`链接到全局节点。

```
errorList = *newNode; 
```

这相当于`errorList.error = newNode->error; errorList.next = newNode->next;`。所以现在`errorList`链接到全局节点。哎呀。

您可以做的是在列表中的全局节点*之后插入新节点：*

```
newNode->next = errorList.next;
errorList.next = newNode; 
```

这是假设您根本想要一个全局节点。如果你不这样做，那么你可以从 开始`struct errorNode *errorList = 0;`，然后添加一个新节点，如下所示：

```
newNode->next = errorList;
errorList = newNode; 
```

当您开始使用列表时，您的列表遍历可能看起来有点不同。使用指向节点的全局指针，您将从指向第一个节点的指针开始，您必须在使用前检查是否为空。对于全局节点，您将从肯定存在的节点开始，但其下一个指针可能为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:34:40.077

好吧，问题出在最后一行：您只是*覆盖了旧错误节点中的数据*！

您可能需要的是全局可访问头（指向第一个节点的指针），而不是第一个节点本身。这样，您的列表中就不需要虚假条目。

（请注意，您的代码不是线程安全的。）

代码：

```
errorNode* pGlobalErrorList = NULL;

// in errorListWrite
newNode->next = pGlobalErrorList;
pGlobalErrorList = newNode; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T21:44:08.647

您的 head (errorList) 应该是一个指针，并且应该初始化为 NULL，除非您需要一个值为 0 的节点的初始条目：

```
struct errorNode* errorList = NULL; 
```

然后你的函数需要正确地重新分配 errorList 。

```
void errorListWrite(uint8 error) { 
    struct errorNode* newNode = malloc(sizeof(struct errorNode)); 

    newNode->error = error; 
    newNode->next = errorList;

    errorList = newNode; 
} 
```

这一切都假设您的新节点将成为列表的新头，而不是新的尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T21:34:05.793

errorList 应该是指向第一个节点（不是第一个节点）的指针

您还需要知道这将被修改的最后一个节点是什么列表的头部不会被修改，只有当您想从列表的开头移动时才会使用它。

# android-layout - dialog.show() 使我的应用程序崩溃，为什么？

> ID：12848766
> 
> 赞同：1
> 
> 时间：2012-10-11T21:27:25.670
> 
> 标签：android-layout

我是新来的机器人。我喜欢在颜色达到某个值时做事。我喜欢（例如）在 r 大于 30 时显示警报，但应用程序会崩溃。感谢您提供非常简单的答案。

```
public class MainActivity extends Activity { 
private AlertDialog dialog; 
private AlertDialog.Builder builder; 
private BackgroundColors view; 

public class BackgroundColors extends SurfaceView implements Runnable { 
public int grand=0;
public int step=0;
private boolean flip=true;
private Thread thread; 
private boolean running; 
private SurfaceHolder holder; 

public BackgroundColors(Context context) { 
super(context); 
} 
```

在此循环内运行时为真。不可能显示对话框？？

```
public void run() { 
 int r = 0; 
while (running){ 
if (holder.getSurface().isValid()){ 
     Canvas canvas = holder.lockCanvas(); 
     if (r > 250) 
      r = 0; 
     r += 10; 

     if (r>30 && flip){
            flip=false;

    //      *********************************
            dialog.show(); 
    //      *********************************
    //      CRASH !!        

       }

     try { 
      Thread.sleep(300); 
     } 
     catch(InterruptedException e) { 
      e.printStackTrace(); 
     } 
     canvas.drawARGB(255, r, 255, 255); 
     holder.unlockCanvasAndPost(canvas); 

   } 
   } 

  } 

  public void start() { 
   running = true; 
   thread = new Thread(this); 
   holder = this.getHolder(); 
   thread.start(); 
  } 

  public void stop() { 
   running = false; 
   boolean retry = true; 
   while (retry){ 
    try { 
         thread.join(); 
         retry = false; 
    } 
    catch(InterruptedException e) { 
         retry = true; 
} 
   } 
  } 

  public boolean onTouchEvent(MotionEvent e){ 
   dialog.show(); 
   return false; 
  } 
  protected void onSizeChanged(int xNew, int yNew, int xOld, int yOld){
      super.onSizeChanged(xNew, yNew, xOld, yOld);
      grand = xNew;
      step =grand/15;
  }
} 

public void onCreate(Bundle b) { 
  super.onCreate(b); 
  view = new BackgroundColors(this); 
  this.setContentView(view); 
  builder = new AlertDialog.Builder(this); 
  builder.setMessage("ciao");
  builder.setPositiveButton("OK", new DialogInterface.OnClickListener() { 
   public void onClick(DialogInterface dialog, int which) { 
     Log.d("Basic", "It worked"); 
   } 
  }); 
  dialog = builder.create(); 
} 

public void onPause(){ 
  super.onPause(); 
  view.stop(); 
} 

public void onResume(){ 
  super.onResume(); 
  view.start(); 
} 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:31:42.983

你不能在线程中显示对话框。你应该为此使用处理程序。在主线程中创建一个处理程序并将其发送到你的线程，而不是你的线程中的 dialog.show() 你应该将消息发送到处理程序和 handleMessage 方法处理程序编写 dialog.show()。例子：

```
Handler handler = new Handler(){ 
@Override
        public void handleMessage(Message msg) {
            switch(msg.what) {
            case 1:
              dialog.show();
break;
}}}; 
```

并在线程中发送消息：

```
handler.sendEmptyMessage(1); 
```

# restlet - Restlet：在失败的 get() 上获取响应正文

> ID：12848780
> 
> 赞同：0
> 
> 时间：2012-10-11T21:28:25.283
> 
> 标签：restlet

我正在尝试调试以未经授权（401）响应的特定连接。在 Restlet 中，这会导致 Respresentation.get() 抛出错误。

我想要做的是获取响应正文，因为这个特定的 api 在正文中为您提供了更多的错误信息。

有什么建议么？

谢谢，卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:20:33.530

我不愿意将它推荐用于生产，但肯定是为了调试，您可以覆盖 ClientResource 中的 handleInbound 以更改引发错误的条件。然后 Restlet 将以通常的方式返回身体。

```
ClientResource clientResource = new ClientResource("http://your.url") {
  @Override
  public Representation handleInbound(Response response) {
    Representation result = null;

    if (response.getRequest().isSynchronous()) {
      if (response.getStatus().isError() 
        && !Status.CLIENT_ERROR_UNAUTHORIZED.equals(response.getStatus())) {
          doError(response.getStatus());
      } else {
          result = (response == null) ? null : response.getEntity();
      }
    }

    return result;
  }
};
Representation response = clientResource.get();
System.out.println(response.getText()); 
```

# java - 如何将字体样式的数据从excel复制到浏览器或java？

> ID：12848783
> 
> 赞同：0
> 
> 时间：2012-10-11T21:28:33.820
> 
> 标签：java, php, javascript, html, javafx

> **可能重复：**
> [CKEditor - 对所有粘贴的内容使用 pastefromword 过滤](https://stackoverflow.com/questions/5227140/ckeditor-use-pastefromword-filtering-on-all-pasted-content)

我正在尝试使用[`CKEditor`](http://ckeditor.com/).

添加以下两行

```
pasteFromWordRemoveFontStyles = false
pasteFromWordRemoveStyles = false 
```

为了`config.js`使其在 中正常工作`Internet Explorer`，但在`Chrome`处理 word 时它很好，从 excel 中粘贴数据时没有`fontstyle`，`JavaFx (WebView)`word 也可以正常工作，但是从 excel 中它以纯文本形式粘贴数据，我该如何解决？

我需要什么设置才能让 CKEditor 将字体从 Excel 复制到任何浏览器？

如果有人有其他工具，我可以从 MS excel 复制粘贴到 Java 或浏览器（使用字体样式）。

# java - 用于 java 方法签名的 Python 正则表达式，带有前面的注释且没有类属性声明

> ID：12848788
> 
> 赞同：1
> 
> 时间：2012-10-11T21:28:52.853
> 
> 标签：java, python, regex, method-signature

我正在尝试在 python 中做一个正则表达式，将 java 文件中的每个方法签名与前面的注释匹配（如果存在注释）。但同时，我不希望它匹配类属性声明。我的代码是：

```
st:'''
/**
 class attribute comments
 */
private Type class_attribute1;

private Type class_attribute2;

/**
 * method1 comments.
 */
public Returnvalue method1(arguments OR no arguments) {
    method1 body
}

private Returnvalue method2(arguments OR no arguments) {
           method2 body
}'''

   import re

   print re.findall(r"([/][*].*?[*][/].*?(public|private|protected).*?{|\s(public|private|protected).*?{)", st, re.DOTALL) 
```

但它也打印类属性注释和声明！

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-11T10:11:49.857

1）您的正则表达式`(public|private|protected).*`太宽泛 - 它无法区分类属性（以*;*结尾并且不能包含*[(){}]*）和方法原型（必须包含括号*(..)*然后是正文*{.. .}*并且不能以*;* ) 结尾，所以只需编写一个更好的正则表达式。

2）此外，您的正则表达式将需要[捕获组](https://docs.python.org/2/library/re.html#regular-expression-syntax)。然后不要使用`re.findall`，使用匹配对象，[只提取你想要的组，即实际声明](https://docs.python.org/2/library/re.html#match-objects)

# shell - UNIX 批处理 shell 脚本 - 仅在前一个命令完成执行后才会执行当前命令

> ID：12848800
> 
> 赞同：-3
> 
> 时间：2012-10-11T21:29:39.907
> 
> 标签：shell, unix

如果我有一个 UNIX shell 脚本，它的每一行都有一些需要运行的程序，比如

```
#!/bin/bash
command1
command2
command3
command4 
```

command2 将仅在 command1 执行完成后执行，还是它们并行运行而不等待前一个命令完成，因为每个命令都是需要执行的单独进程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:31:56.163

这些命令是串行运行的。要并行运行它们，请附加`&`到每一行：

```
#!/bin/bash
command1&
command2&
command3&
command4&
wait 
```

# jquery-ui - Jquery ui滑块句柄垂直偏移

> ID：12848805
> 
> 赞同：0
> 
> 时间：2012-10-11T21:30:04.447
> 
> 标签：jquery-ui

好吧，这是一个非常奇怪的问题，无论出于何种原因，滑块句柄在其父元素的高度或宽度的一半之外，他们为什么这样做？...

无论如何，你可以在这个小提琴中看到：http: [//jsfiddle.net/PGLkW/2/](http://jsfiddle.net/PGLkW/2/)那个句柄在它的容器之外，如果我想像这样删除边距：

```
.ui-slider .ui-slider-handle{
    width:100%; 
    margin-left:0px;
    left:0px;
    margin-bottom:0px;
} 
```

事情变得更糟了，据我所见，我实际上需要为这样一个愚蠢的事情编辑小部件本身，或者我没有看到什么？

所以只是为了澄清我的问题，我希望句柄留在它的容器内，当我点击任何地方开始拖动时，你可以看到鼠标并没有完全移动到句柄的中间，所以它看起来真的很糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:13:20.530

看起来它没有正确读取 css，或者因为有很多解决方案他们留给开发人员玩它，你必须这样做直到你得到你想要的结果，这里有一个解决方案使用margin-bottom 为负数：

```
//CSS
.ui-corner-all, .ui-corner-top, .ui-corner-left, .ui-corner-tl{ border-radius: 0; }
.ui-slider .ui-slider-handle{
    width: 58px;
    height: 50px;
    margin-bottom: -25px;
}

//HTML
<div class="slider" style="margin:50px; height:400px; width:50px;"></div>​ 
```

小提琴[http://jsfiddle.net/RFVZ2/](http://jsfiddle.net/RFVZ2/)。我希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-02T07:35:56.370

该错误报告中描述了解决方案（“这是设计的”）：[http ://bugs.jqueryui.com/ticket/4308](http://bugs.jqueryui.com/ticket/4308)

对于我使用的水平滑块：

```
.ui-slider-handle
{
    height: 24px !important;
    margin-bottom: -6px !important;
} 
```

# jena - Jena tdbloader 汇编器

> ID：12848807
> 
> 赞同：1
> 
> 时间：2012-10-11T21:30:14.593
> 
> 标签：jena, tdbloader

如何通过 tdbloader.bat (windows, Jena 2.7.3) 加载带有推理的 TDB 存储？

我使用了这个汇编文件：

```
 @prefix tdb: <http://jena.hpl.hp.com/2008/tdb#> .
 @prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
 @prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
 @prefix ja: <http://jena.hpl.hp.com/2005/11/Assembler#> .
 @prefix tdb: <http://jena.hpl.hp.com/2008/tdb#> .

 [] ja:loadClass "com.hp.hpl.jena.tdb.TDB" .
 tdb:DatasetTDB rdfs:subClassOf ja:RDFDataset .
 tdb:GraphTDB rdfs:subClassOf ja:Model .

  <#dataset> rdf:type ja:RDFDataset ;
          ja:defaultGraph <#infModel> .

   <#infModel>  a ja:InfModel ;
         ja:baseModel <#tdbGraph>; 
            ja:reasoner 
            [ ja:reasonerURL <http://jena.hpl.hp.com/2003/OWLFBRuleReasoner> ].

    <#tdbGraph> rdf:type tdb:GraphTDB ;
                     tdb:location "DB";
 . 
```

我的命令：

```
c:\apache-jena-2.7.3\bat>tdbloader --tdb=test.ttl C:\apache-jena-2.7.3\Lubm10\* 
```

我有一个例外：

```
 java.lang.ClassCastException: com.hp.hpl.jena.reasoner.rulesys.FBRuleInfGraph cannot be cast to com.hp.hpl.jena.tdb.store.GraphTDB 
```

怎么了？（删除“DB”后的分号 - 无济于事）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T22:32:32.967

目前尚不清楚您要达到的目标。`tdbloader`是一种在通过您的应用程序或 SPARQL 端点处理这些三元组之前将三元组加载到 TDB 存储中的工具。另外，从您的应用程序代码中，您可以构建一个 Jena 模型，该模型在 TDB 图中的基本模型上使用推理引擎。但我不明白你为什么在*加载*时使用推理模型。如果您查看您得到的异常：

```
FBRuleInfGraph cannot be cast to com.hp.hpl.jena.tdb.store.GraphTDB 
```

它确认您不能在该过程的那个阶段使用推理图，我不确定您为什么会这样做。当然，除非您尝试静态计算基础模型上的推理闭包并将其存储在 TDB 中，从而无需在运行时进行推理计算。但是，如果您*尝试*这样做，我不相信目前可以通过 Jena 汇编程序来完成。您现在必须编写自定义代码才能做到这一点。

底线：分离关注点。对 使用简单的图描述`tdbloader`，在运行时使用推理图。

# python - 使用matplotlib设置图例符号不透明度？

> ID：12848808
> 
> 赞同：68
> 
> 时间：2012-10-11T21:30:17.020
> 
> 标签：python, matplotlib

我正在绘制一个带有半透明“x”标记（20% alpha）的图。如何使标记在图例中以 100% 的不透明度显示？

```
import matplotlib.pyplot as plt
plt.plot_date( x = xaxis, y = yaxis, marker = 'x', color=[1, 0, 0, .2], label='Data Series' )
plt.legend(loc=3, mode="expand", numpoints=1, scatterpoints=1 ) 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2017-02-22T22:27:14.887

更新：有一个更简单的方法！首先，在创建图例时将其分配给变量：

```
leg = plt.legend() 
```

然后：

```
for lh in leg.legendHandles: 
    lh.set_alpha(1) 
```

或者如果上述方法不起作用（您可能使用的是旧版本`matplotlib`）：

```
for lh in leg.legendHandles: 
    lh._legmarker.set_alpha(1) 
```

分别使您的标记对 a`plt.plot`或 a不透明`plt.scatter`。

请注意，仅`lh.set_alpha(1)`在 a 上使用`plt.plot`将使图例中的线条不透明，而不是标记。您应该能够为其他绘图类型调整这两种可能性。

资料来源：根据[DrV](https://stackoverflow.com/users/3735428/drv)关于标记大小的一些[好的建议综合而成。](https://stackoverflow.com/questions/24706125/setting-a-fixed-size-for-points-in-legend)更新的灵感来自[Owen](https://stackoverflow.com/users/1676152/owen)的有用评论。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-03T22:52:55.543

跟进宇宙的回答，为了使图例的“假”线在情节上不可见，您可以使用 NaN，它们仍可用于生成图例条目：

```
import numpy as np
import matplotlib.pyplot as plt
# Plot data with alpha=0.2
plt.plot((0,1), (0,1), marker = 'x', color=[1, 0, 0, .2])
# Plot non-displayed NaN line for legend, leave alpha at default of 1.0
legend_line_1 = plt.plot( np.NaN, np.NaN, marker = 'x', color=[1, 0, 0], label='Data Series' )
plt.legend() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T01:15:05.760

如果您想在图例中添加特定内容，则使用适当的文本定义放置在图例中的对象会更容易。例如：

```
import matplotlib.pyplot as plt
import pylab

plt.plot_date( x = xaxis, y = yaxis, marker = 'x', color=[1, 0, 0, .2], label='Data Series' )
line1 = pylab.Line2D(range(1),range(1),color='white',marker='x',markersize=10, markerfacecolor="red",alpha=1.0)
line2 = pylab.Line2D(range(10),range(10),marker="_",linewidth=3.0,color="dodgerblue",alpha=1.0)
plt.legend((line1,line2),('Text','Other Text'),numpoints=1,loc=1) 
```

在这里，line1 定义了一条短的白线（基本上不可见），标记“x”为红色且完全不透明。例如，line2 为您提供了一条更长的蓝线，没有可见的标记。通过创建这些“线条”，您可以更轻松地控制它们在图例中的属性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-07T13:19:33.690

这里的其他答案通过在创建后更改图例中的 alpha 值或在创建图例后更改行的 alpha 来提供很好的实用解决方案。

以下是在图例中实现不同不透明度而不进行任何操作的解决方案。它使用一个`handler_map`和一个更新函数。

```
import matplotlib.pyplot as plt
import numpy as np; np.random.seed(43)
from matplotlib.collections import PathCollection
from matplotlib.legend_handler import HandlerPathCollection, HandlerLine2D

plt.plot(np.linspace(0,1,8), np.random.rand(8), marker="o", markersize=12, label="A line", alpha=0.2)

plt.scatter(np.random.rand(8),np.random.rand(8), s=144,
            c="red", marker=r"$\clubsuit$",  label="A scatter", alpha=0.2)

def update(handle, orig):
    handle.update_from(orig)
    handle.set_alpha(1)

plt.legend(handler_map={PathCollection : HandlerPathCollection(update_func= update),
                        plt.Line2D : HandlerLine2D(update_func = update)})

plt.show() 
```

[![在此处输入图像描述](../Images/6b81774e7bcf7f1066ff742dfbd1ba6e.png)](https://i.stack.imgur.com/dRokC.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-07T17:50:51.573

看起来 matplotlib在将 alpha 级别复制到图例*之后绘制了绘图线。*这意味着您可以在图例中创建具有所需 alpha 级别的绘图线，创建图例以复制该 alpha 级别，然后更改绘图线上的 alpha 级别。

这是一个完整的例子：

```
import matplotlib.pyplot as plt

x = (0, 1, 2)
y = (0, 2, 1)
line, = plt.plot(x, y, 'ro', label='label')  # Default alpha is 1.0.
plt.legend()  # Copy alpha to legend.
line.set_alpha(0.2)  # Change alpha for data points.

plt.show() 
```

当我在 Python 2.7.15 上使用 matplotlib 2.2.3 运行它时，该图如下所示：

[![示例图](../Images/bb21c786e76942573370f6ca7c0dd8be.png)](https://i.stack.imgur.com/5psnN.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-12T17:21:08.523

我发现该`.set_alpha()`函数适用于许多图例对象，但不幸的是，许多图例对象有几个部分（例如 的输出`errorbar()`），并且`.set_alpha()`调用只会影响其中一个。

可以使用`.get_legend_handles_labels()`然后循环部分句柄和`.set_alpha()`，但不幸的是，`copy.deepcopy()`似乎不适用于句柄列表，因此情节本身会受到影响。我能找到的最佳解决方法是将原始 alpha 保存为`.set_alpha()`我想要的，创建图例，然后将绘图 alpha 重置为原始值。如果我可以深度复制`handles`（我不必保存 alpha 值或重置它们）会更干净，但我不能在 python2.7 中执行此操作（可能这取决于图例中的对象）。

```
f,ax=plt.subplots(1)

ax.plot(  ...  )

def legend_alpha(ax,newalpha=1.0):
    #sets alpha of legends to some value
    #this would be easier if deepcopy worked on handles, but it doesn't 
    handles,labels=ax.get_legend_handles_labels()
    alphass=[None]*len(handles) #make a list to hold lists of saved alpha values
    for k,handle in enumerate(handles): #loop through the legend entries
        alphas=[None]*len(handle) #make a list to hold the alphas of the pieces of this legend entry
        for i,h in enumerate(handle): #loop through the pieces of this legend entry (there could be a line and a marker, for example)
            try: #if handle was a simple list of parts, then this will work
                alphas[i]=h.get_alpha()
                h.set_alpha(newalpha)
            except: #if handle was a list of parts which themselves were made up of smaller subcomponents, then we must go one level deeper still.
                #this was needed for the output of errorbar() and may not be needed for simpler plot objects
                alph=[None]*len(h) 
                for j,hh in enumerate(h):
                    alph[j]=hh.get_alpha() #read the alpha values of the sub-components of the piece of this legend entry
                    hh.set_alpha(newalpha)
                alphas[i]=alph #save the list of alpha values for the subcomponents of this piece of this legend entry
        alphass[k]=alphas #save the list of alpha values for the pieces of this legend entry
    leg=ax.legend(handles,labels) #create the legend while handles has updated alpha values
    for k,handle in enumerate(handles): #loop through legend items to restore origina alphas on the plot
        for i,h in enumerate(handle): #loop through pieces of this legend item to restore alpha values on the plot
            try: 
                h.set_alpha(alphass[k][i])
            except:
                for j,hh in enumerate(h): #loop through sub-components of this piece of this legend item to restore alpha values
                    hh.set_alpha(alphass[k][i][j])
    return leg

leg=legend_alpha(ax)
leg.draggable() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-23T05:37:47.583

在我的情况下，`set_alpha(1)`还修改了`edgecolors`我不想要的 ：我有“不可见”的边缘，并将 alpha 设置为不透明使它们在图例中可见。以下代码段 (OOP)**在不改变边框颜色的情况下改变了面部的不透明度**：

```
leg = ax.legend()
for lh in leg.legendHandles:
    fc_arr = lh.get_fc().copy()
    fc_arr[:, -1] = 1  # set opacity here
    lh.set_fc(fc_arr) 
```

请注意对 的调用`.copy()`，如果我们不这样做，它将修改整个绘图的不透明度。调用 copy 意味着我们只修改*图例框内*的 facecolor 。

或者，您可以将此功能添加到您的库中：

```
def opaque_legend(ax):
    """
    Calls legend, and sets all the legend colors opacity to 100%.
    Returns the legend handle.
    """
    leg = ax.legend()
    for lh in leg.legendHandles:
        fc_arr = lh.get_fc().copy()
        fc_arr[:, -1] = 1
        lh.set_fc(fc_arr)
    return leg 
```

然后简单地替换`leg = ax.legend()`为`leg = opaque_legend(ax)`. 希望这可以帮助！

安德烈斯

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-09-11T20:37:24.133

我没有弄乱传说的不透明性，而是找到了另一种方法。首先，我创建了一条具有我想要的图例风格的情节线。然后我改变了情节线风格，*奇迹般地*，传奇风格保持不变。MWE：

```
plt.plot(x, y, 'ro', label='label')
for lh in plt.gca().get_legend_handles_labels():
    lh[0].set_alpha(new_alpha) 
```

我想解释一下，为什么它有效，但我不能。我也不确定它是否适用于所有后端。

* * *

是的，我知道这个问题很老了。由于它仍然出现在 Google 中，我稍后会找到它并帮助我未来的自己。

# c# - 如何在 XAML/C# 中单击菜单项时显示带有填充项的列表框

> ID：12848809
> 
> 赞同：0
> 
> 时间：2012-10-11T21:30:16.577
> 
> 标签：c#, wpf, xaml

我的 XAML 文件中有一个上下文菜单。当我单击此菜单项时，我想向用户显示一个列表框，其中包含从后端调用填充的数据列表。我怎样才能做到这一点？我是 XAML/WPF 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:21:24.430

这将是您的 xaml：

```
<Window x:Class="MyWpfApp.MyWindow"
    xmlns:cmd="clr-namespace:MyWpfApp.MyCommandsNamespace"
    xmlns:vm="clr-namespace:MyWpfApp.MyViewModelsNamespace"
    ...>
    <Window.Resources>
        <DataTemplate x:Key="MyItemTemplate" DataType="{x:Type vm:MyItemClass}">
            <TextBlock Text="{Binding MyItemText}"/>
        </DataTemplate>
    </Window.Resources>
    <Window.CommandBindings>
         <CommandBinding Command="{x:Static cmd:MyCommandsClass.MyCommand1}" Executed="ExecuteMyCommand" CanExecute="CanExecuteMyCommand"/>
    </Window.CommandBindings>

    <Window.ContextMenu>
        <ContextMenu>
        <MenuItem Header="MyMenuItem1" 
              CommandTarget="{Binding}"
              Command="{x:Static cmd:MyCommandsClass.MyCommand1}"/>
        </ContextMenu>
    </Window.ContextMenu>
    <Grid>
        <ItemsControl ItemsSource="{Binding MyList}"
            ItemTemplate="{StaticResource MyItemTemplate}"/>
    </Grid>
</Window> 
```

这将是你的cs代码：

```
 public MyWindow()
    {
        VM = new MyViewModelsNamespace.MyViewModel();
        this.DataContext = VM;
        InitializeComponent();
    }
    public void ExecuteMyCommand(object sender, ExecutedRoutedEventArgs e)
    {
        VM.MyList.Add(new MyItemClass{MyItemText="some text"});
    }
    public void CanExecuteMyCommand(object sender, CanExecuteRoutedEventArgs e)
    {
        if (...) e.CanExecute = false;
        else e.CanExecute = true;
    } 
```

其中 MyViewModel 类似于：

```
 public class MyViewModel : DependencyObject
    {
        //MyList Observable Collection
        private ObservableCollection<MyItemClass> _myList = new ObservableCollection<MyItemClass>();
        public ObservableCollection<MyItemClass> MyList { get { return _myList; } }
    } 
```

MyItemClass 类似于：

```
 public class MyItemClass : DependencyObject
    {
        //MyItemText Dependency Property
        public string MyItemText
        {
            get { return (string)GetValue(MyItemTextProperty); }
            set { SetValue(MyItemTextProperty, value); }
        }
        public static readonly DependencyProperty MyItemTextProperty =
            DependencyProperty.Register("MyItemText", typeof(string), typeof(MyItemClass), new UIPropertyMetadata("---"));
    } 
```

我忘了提命令：

```
public static class MyCommandsClass
{
    public static RoutedCommand MyCommand1 = new RoutedCommand();
} 
```

# gis - Leaflet.js 中的层排序

> ID：12848812
> 
> 赞同：20
> 
> 时间：2012-10-11T21:30:33.367
> 
> 标签：gis, leaflet

如何强制在 Leaflet 中添加到地图的新图层成为底图上的第一个图层？

我找不到一种轻松更改图层顺序的方法，这是一个非常基本的 GIS 功能。我错过了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T14:41:53.630

Leaflet 地图由一组“窗格”组成，其视图顺序由 z-index 控制。每个窗格包含一个图层集合默认窗格显示顺序是瓷砖->阴影->叠加->标记->弹出窗口。`bringToFront()`就像 Etienne 描述的那样，您可以通过调用或来控制覆盖窗格内路径的显示顺序`bringToBack()`。 `L.FeatureGroup`也有这些方法，因此您可以在需要时立即更改叠加组的顺序。

如果要更改整个窗格的显示顺序，则只需使用 CSS 更改窗格的 z-index。

如果你想添加一个新的地图窗格......我不知道该怎么做。

[http://leafletjs.com/reference.html#map-panes](http://leafletjs.com/reference.html#map-panes)

[http://leafletjs.com/reference.html#featuregroup](http://leafletjs.com/reference.html#featuregroup)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-12T15:58:45.377

根据 Leaflet API，您可以使用`bringToFront`或`bringToBack`在任何层上将该层带到所有路径层的顶部或底部。

艾蒂安

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-23T19:44:28.283

关于更多细节，Bobby Sudekum 整理了[一个精彩的演示](http://bl.ocks.org/rsudekum/5431771)，展示了窗格 z-index 的操作。我一直用它作为起点。

这是关键代码：

```
var topPane = L.DomUtil.create('div', 'leaflet-top-pane', map.getPanes().mapPane);
var topLayer = L.mapbox.tileLayer('bobbysud.map-3inxc2p4').addTo(map);
topPane.appendChild(topLayer.getContainer());
topLayer.setZIndex(7); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-16T15:29:27.260

最近不得不解决这个问题，但偶然发现了这个问题。

这是一个不依赖 CSS hack 并与图层组一起使用的解决方案。它基本上以所需的顺序删除和重新添加层。

我将此提交为比当前答案更好的“最佳实践”。它展示了如何管理图层并重新排序它们，这对于其他上下文也很有用。当前方法使用图层`Title`来识别要重新排序的图层，但您可以轻松修改它以使用索引或对实际图层对象的引用。

欢迎和鼓励改进、评论和编辑。

JS 小提琴：http: [//jsfiddle.net/ob1h4uLm/](http://jsfiddle.net/ob1h4uLm/)

或者向下滚动并单击“运行代码片段”并使用它。我将初始缩放级别设置为有助于说明`layerGroup`重叠效果的点。

```
function LeafletHelper() {

    // Create the map
    var map = L.map('map').setView([39.5, -0.5], 4);

    // Set up the OSM layer
    var baseLayer = L.tileLayer(
        'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18
    }).addTo(map);

    var baseLayers = {
        "OSM tiles": baseLayer
    };

    this.map = map;

    this.BaseLayers = {
        "OSM tiles": baseLayer
    };
    this.LayersControl = L.control.layers(baseLayers).addTo(map);

    this.Overlays = [];
    this.AddOverlay = function (layerOptions, markers) {
        var zIndex = this.Overlays.length;
        var layerGroup = L.layerGroup(markers).addTo(map);
        this.LayersControl.addOverlay(layerGroup, layerOptions.title);
        this.Overlays.push({
            zIndex: zIndex,
            LeafletLayer: layerGroup,
            Options: layerOptions,
            InitialMarkers: markers,
            Title: layerOptions.title
        });
        return layerGroup;
    }
    this.RemoveOverlays = function () {
        for (var i = 0, len = this.Overlays.length; i < len; i++) {
            var layer = this.Overlays[i].LeafletLayer;
            this.map.removeLayer(layer);
            this.LayersControl.removeLayer(layer);
        }
        this.Overlays = [];
    }
    this.SetZIndexByTitle = function (title, zIndex) {

        var _this = this;

        // remove overlays, order them, and re-add in order
        var overlays = this.Overlays; // save reference
        this.RemoveOverlays();
        this.Overlays = overlays; // restore reference

        // filter overlays and set zIndex (may be multiple if dup title)
        overlays.forEach(function (item, idx, arr) {
            if (item.Title === title) {
                item.zIndex = zIndex;
            }
        });

        // sort by zIndex ASC
        overlays.sort(function (a, b) {
            return a.zIndex - b.zIndex;
        });

        // re-add overlays to map and layers control
        overlays.forEach(function (item, idx, arr) {
            item.LeafletLayer.addTo(_this.map);
            _this.LayersControl.addOverlay(item.LeafletLayer, item.Title);
        });
    }
}

window.helper = new LeafletHelper();

AddOverlays = function () {
    // does not check for dups.. for simple example purposes only
    helper.AddOverlay({
        title: "Marker A"
    }, [L.marker([36.83711, -2.464459]).bindPopup("Marker A")]);
    helper.AddOverlay({
        title: "Marker B"
    }, [L.marker([36.83711, -3.464459]).bindPopup("Marker B")]);
    helper.AddOverlay({
        title: "Marker C"
    }, [L.marker([36.83711, -4.464459]).bindPopup("Marker c")]);
    helper.AddOverlay({
        title: "Marker D"
    }, [L.marker([36.83711, -5.464459]).bindPopup("Marker D")]);
}

AddOverlays();

var z = helper.Overlays.length;

ChangeZIndex = function () {
    helper.SetZIndexByTitle(helper.Overlays[0].Title, z++);
}

ChangeZIndexAnim = function () {
    StopAnim();
    var stuff = ['A', 'B', 'C', 'D'];
    var idx = 0;
    var ms = 200;
    window.tt = setInterval(function () {
        var title = "Marker " + stuff[idx++ % stuff.length];
        helper.SetZIndexByTitle(title, z++);
    }, ms);
}

StopAnim = function () {
    if (window.tt) clearInterval(window.tt);
}
```

```
#map {
    height: 400px;
}
```

```
<link rel="stylesheet" type="text/css" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.css">
<script type='text/javascript' src="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.js"></script>
<div id="map"></div>
<input type='button' value='Remove overlays' onclick='helper.RemoveOverlays();' />
<input type='button' value='Add overlays' onclick='AddOverlays();' />
<input type='button' value='Move bottom marker to top' onclick='ChangeZIndex();' />
<input type='button' value='Change z Index (Animated)' onclick='ChangeZIndexAnim();' />
<input type='button' value='Stop animation' onclick='StopAnim();' />
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-31T07:45:09.400

我找到了这个修复（css）：

```
.leaflet-map-pane {
    z-index: 2 !important;
}

.leaflet-google-layer {
    z-index: 1 !important;
} 
```

在这里找到它：[https ://gis.stackexchange.com/questions/44598/leaflet-google-map-baselayer-markers-not-visible](https://gis.stackexchange.com/questions/44598/leaflet-google-map-baselayer-markers-not-visible)

# actionscript-3 - RemoteClass 类型保存失败

> ID：12848815
> 
> 赞同：0
> 
> 时间：2012-10-11T21:30:42.760
> 
> 标签：actionscript-3, apache-flex

考虑以下示例数据类：

```
[RemoteClass]
public class SOTestData {
    public var i:int;
    public function SOTestData(i:int) {
        this.i = i;
    }   
} 
```

据我了解，RemoteClass 元数据标记应确保当此类的对象被重新初始化时，类型信息被保留。

我使用以下程序进行测试：

```
public class SOTest extends Sprite {
    public function SOTest() {
        var data:SharedObject = SharedObject.getLocal("SOTest");
        if (data.data.object) {
            try {
                var stored:SOTestData = data.data.object;
                trace(stored.i);
            } finally {
                data.clear();
            }
        }
        else {
            data.data.object = new SOTestData(15);
            data.flush();
        }
    }   
} 
```

这里第一次运行写入数据，第二次读取并清除。运行这个，我仍然得到一个类转换错误。实际上，在 SharedObject 中没有存储类型信息。

我认为我没有错误地使用元数据，可能是编译器不知道如何处理它？我没有收到任何编译器错误/警告，尽管当我使用一些不存在的标签时它也不会抱怨。我正在使用带有 FlashDevelop 的 Flex 4.6 SDK 作为 IDE。

**编辑：**

下面是共享对象。如您所见，类型保存为“对象”而不是实际类型。

```
so = [object #2, class 'SharedObject'] {
  data: [object #0, class 'Object'] {
    object: [object #1, class 'Object', dynamic 'False', externalizable 'False'] {
      i: 15,
    },
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:53:45.660

我只使用 RemoteClass 进行 AMF RemoteObject 调用；我不认为它与共享对象有任何关系。根据[文档](http://livedocs.adobe.com/flex/3/html/metadata_3.html#198729)

> 使用 [RemoteClass] 元数据标记向 Flex 注册类，以便 Flex 在使用操作消息格式 (AMF) 序列化类实例时保留类型信息。在 ActionScript 类定义之前插入 [RemoteClass] 元数据标记。[RemoteClass] 元数据标记具有以下语法：

从您提供的代码中我可以看出，您没有以 AMF 格式序列化对象。

我相信您的班级演员错误是由于您没有班级演员。共享对象总是作为通用对象返回。尝试这个：

```
var stored:SOTestData = data.data.object as SOTestData ; 
```

* * *

这是我使用的应用程序的一些代码。首先将在共享对象中序列化的值对象：

```
package com.login.vos
{

    [RemoteClass(alias="com.login.vos.UserVO")]
    public class UserVO
    {
        public function UserVO()
        {
        } 

        public var firstName :String;
        public var lastName :String;
        public var userID :Number;
    }
} 
```

保存对象的代码：

```
 public static function saveUserVO(userVO:UserVO):void{
        var userSharedObject :SharedObject = SharedObject.getLocal('userVO')  ;
        userSharedObject.data.userVO = userVO;
        userSharedObject.flush();
    } 
```

最后，加载对象的代码：

```
 public static function getUserVO():UserVO{
        var userSharedObject :SharedObject = SharedObject.getLocal('userVO')
        if(userSharedObject.size <=0){
            return null;
        }
        return userSharedObject.data.userVO as UserVO;

    } 
```

这与原始海报的代码之间唯一明显的区别是我在 RemoteClass 元数据中指定了一个别名。

# git - 如何防止多个用户使用 git 编辑相同的文件

> ID：12848821
> 
> 赞同：3
> 
> 时间：2012-10-11T21:30:55.393
> 
> 标签：git, version-control

我目前正在与一个会议的博士后合作写一篇论文。我们使用版本控制软件进行了调查，git 似乎是一个很好的选择。现在我们必须真正体验它并且面临一些问题。具体来说，我们有时会在推送之前编辑相同的文件，从而导致第二个想要推送的人出错。

为了防止这种同时编辑，可以使用哪些技巧/工具/等？我知道 git 用于大型项目，有许多没有面临这些问题的合作者，那么我们做错了什么？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T16:10:57.603

实际上，当你在写论文而不是代码时，git 可能不是完美的工具。通过使用谷歌文档或类似的东西，您将能够几乎实时地看到您的合作伙伴所做的更改。而且您不必经历提交/推送/合并的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T22:05:42.287

Git 没有像 TFS 那样“锁定”文件的任何机制。如果两个人都在积极编辑文件的同一部分，您应该预料到会有冲突。

主要事项：

和你的同事谈谈你在做什么。如果可以，请协调，如果必须，请警告他们。这似乎是一种行人，但它通常比它应该发生的晚。 [Scrum](http://en.wikipedia.org/wiki/Scrum_%28development%29)很好，因为它使它成为你日常工作的一部分。

最大的因素是您对自己的更改保留多长时间。未完成更改的时间越长，重叠更改集的机会就越大。

在您正在共同开发的功能上创建集成分支是一件好事。如果您经常创建检查点、推送和变基，那么您就不太可能做出难以纠正的重大更改。不过，小冲突很容易处理。在推送到 master 之前，您可能需要返回并清理一些提交，但这通常很容易协调。

小事：

查看差异是了解一段代码如何变化的绝佳工具。人们在不同的格式偏好之间切换会破坏这个工具。

具有一致的格式有助于解决这些无关紧要的冲突。选择一致格式的过程是另一回事。;)

如果您正在处理一个函数并注意到空格不正确，您将修复它。从事相同功能的其他人也会这样做。

例如，左缩进：

```
namespace foo {
namespace bar {

    class Foo {
    public:
        void something();
    };

    class Foo {
        public:
            void something();
    };

}}

namespace foo {
    namespace bar {
    }
} 
```

我个人更喜欢将所有命名空间像第一组一样左对齐。这将空白噪声保持在最低限度。不过，一致性很重要。

制表符与空格是另一个。从理论上讲，您选择哪一种并不重要，但**一定**要选择一种。

避免移动代码（显然没有充分的理由）。这很难做到，但如果你有更多的文件，每个文件中的东西更少，这不是一个问题。

将小的“内务处理”更改与您的功能/错误修复提交分开。这使得合并这些提交上的更改变得非常简单。如果一个是特征变化，一个是空格变化，那么你可以盲目地接受特征变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T23:08:00.627

“锁定”在某种意义上是自动的。您有自己的副本，他们无法将其从您手中夺走！就像他们有他们的副本一样，您无法将其从他们手中夺走。这假设您**正在**使用 git DVCS 的分布式特性（而不是同时访问文件共享 :-( 您将各自拥有自己的克隆并交换分支或推送到公共裸仓库。

下一步是确保您使用的文档处理器适合 git 合并，理想情况下是纯文本源，例如 Latex 或 markdown。Git 会很高兴地合并您的单独贡献并突出显示您的冲突。但是不要使用很长的行。

如果您正在合作，您将能够讨论发生合并冲突的常见区域并同意最佳措辞。

享受同时工作的自由。

# c# - 在 GC 销毁尝试时保留对象

> ID：12848826
> 
> 赞同：7
> 
> 时间：2012-10-11T21:31:20.717
> 
> 标签：c#, garbage-collection

我在思考回收物品的方法时产生了这个想法。我这样做是为了看看内存池是如何工作的，我意识到在 99% 的情况下这是非常不必要的。

但是，我有一个问题。有没有办法强制 GC 保留对象？换句话说，我可以告诉 GC 不要销毁一个对象，而是说在一个列表中创建了一个新的引用来保存可使用的对象吗？问题是，虽然我没有对此进行测试，但如果我将这样的内容添加到列表中：

```
~myObject()
{
     ((List<myObject>)HttpContext.Current.Items[typeof(T).ToString()]).add(this);//Lets assume this is ASP
} 
```

它会将指向该对象的指针添加到列表中，但如果该对象被销毁，我将得到一个空指针异常，因为该对象不再存在。但是，也许我可以告诉 GC 不要收集这个项目，从而保留这个对象？

我知道这是大多数程序员会去的那种东西“你为什么要这样做？”。但另一方面，编程是关于尝试新事物和学习新事物。有什么建议、想法、实施吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T21:37:23.037

是的，这是合法的。它被称为“复活”。当您将`this`引用分配给“活动”的某个地方时，该对象不再被视为垃圾。

您还需要使用 重新注册以进行终结[`GC.ReRegisterForFinalize(this)`](http://msdn.microsoft.com/en-us/library/system.gc.reregisterforfinalize.aspx)，否则下次对象变为垃圾时，它将不会被终结（不会调用析构函数）。

[您可以在这篇 MSDN 杂志文章](http://msdn.microsoft.com/en-us/magazine/bb985010.aspx)中阅读有关对象复活的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T21:37:17.360

是的，这是可能的，它甚至还有一个名字：复活。

> 但是如果对象被销毁，我会得到一个空指针异常，因为对象不再存在。

更糟糕的是，你会得到一个无效的指针（引用）错误。并且可能是蓝屏或崩溃的服务器。但幸运的是，CLR 不会让这种情况发生。只需将一个注定失败的实例放在任何类型的列表中，它就可以再次访问，然后它就不会被回收。

当您希望您的对象被多次回收时，您将不得不调用`GC.ReRegisterForFinalize(x)`它。

但最实际的答案是：不要这样做。仅析构函数就占了相当大的开销，并且有很多方法可以解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T21:36:13.090

GC 只会处理那些引用已经消失的对象，无论是否超出了显式释放的范围。

无论哪种方式，您都需要查看[KeepAlive](http://msdn.microsoft.com/en-us/library/system.gc.keepalive.aspx)和[SuppressFinalize](http://msdn.microsoft.com/en-us/library/system.gc.suppressfinalize.aspx)方法，以防止 GC 对您的对象进行垃圾收集。[一旦你真正完成了它们，你需要使用ReRegisterForFinalize](http://msdn.microsoft.com/en-us/library/system.gc.reregisterforfinalize.aspx)注册它们以供收集器拾取。

# javascript - Opera中奇怪的画布旋转

> ID：12848830
> 
> 赞同：1
> 
> 时间：2012-10-11T21:31:29.750
> 
> 标签：javascript, canvas, html5-canvas, opera

我用画布写了简单的绘图：

```
var angle = 20
var k = Math.sin(Math.PI / 180 * angle)
var scaleY = 0.5
var radius = 55
var pushBy = {x: 60, y: 60}

var drawArc = function (context) {
  context.setTransform(1, -k, 0, scaleY, pushBy.x, pushBy.y)
  context.beginPath()
  context.arc(0, 0, radius, 0, Math.PI * 2)
  context.stroke()
}

var canvas = $('canvas')
var context = canvas.getContext('2d')

drawArc(context) 
```

实际上，它完全符合我的需要：它绘制了一个旋转了 20 度的扁平椭圆，但是......不是在 Opera 中。我也试过`rotate`了，它也不起作用。在 Chrome 和 FF 中一切正常。难道我做错了什么？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T23:14:15.917

它看起来像 Opera 中的一个错误。如果你看一下我的[http://jsfiddle.net/a6anq/5/](http://jsfiddle.net/a6anq/5/ "jsfiddle 示例")，网格在 Chrome 和 Opera 中都正确翻译，但椭圆不是。运行 arc() 时，Opera 似乎没有考虑转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:58:28.823

我的第一种方法是使用 绘制四个弧线`arcTo()`，我错误地认为这是通用的解决方法 =) 这是代码

```
var drawArcWith4ArcTo = function (context) {
  context.setTransform(1, -k, 0, scaleY, pushBy.x, pushBy.y)
  context.beginPath()
  context.moveTo(-radius, 0)
  context.lineTo(-radius, 0)
  context.arcTo(-radius, radius, 0, radius, radius)
  context.arcTo(radius, radius, radius, 0, radius)
  context.arcTo(radius, -radius, 0, -radius, radius)
  context.arcTo(-radius, -radius, -radius, 0, radius)
  context.stroke()
} 
```

但它在 Opera 中不起作用，原因有两个：

*   Opera`arcTo()`需要稍微不同的点作为参数 =)
*   它仍然没有将变换矩阵应用于结果路径。

所以我被迫使用一种解决方法，使用 4 条贝塞尔曲线画一个圆：

```
var drawArcWith4BezierCurves = function () {
  var kappa = 4 * (Math.sqrt(2) - 1) / 3

  return function (context) {
    context.setTransform(1, -k, 0, scaleY, pushBy.x, pushBy.y)
    context.beginPath()
    context.moveTo(-radius, 0)
    context.bezierCurveTo(
      -radius, radius * kappa,
      -radius * kappa, radius,
      0, radius
    )
    context.bezierCurveTo(
      radius * kappa, radius,
      radius, radius * kappa,
      radius, 0
    )
    context.bezierCurveTo(
      radius, -radius * kappa,
      radius * kappa, -radius,
      0, -radius
    )
    context.bezierCurveTo(
      -radius * kappa, -radius,
      -radius, -radius * kappa,
      -radius, 0
    )
    context.stroke()
  }
}

if (Prototype.Browser.Opera)
  drawArc = drawArcWith4BezierCurves() 
```

两个注意事项：

*   结果路径是一个近似值，而不是一个绝对圆（怀疑你是否会注意到这个=）
*   该示例使用了一些 Prototype.js，但很容易猜到我的意思。

# ruby - 谁能解释这个三元和代码的method_missing部分？

> ID：12848833
> 
> 赞同：1
> 
> 时间：2012-10-11T21:31:43.720
> 
> 标签：ruby, ternary-operator, method-missing

```
class Numeric
  @@currencies = {'yen' => 0.013, 'euro' => 1.292, 'rupee' => 0.019, 'dollar' => 1.0}

  def method_missing(method, *args)
    singular_currency = (method == :in ? args.first : method).to_s.gsub(/s$/, '')
    if @@currencies.has_key?(singular_currency)
      self.send(method == :in ? :/ : :*, @@currencies[singular_currency])
    else
      super
    end
  end
end 
```

我没有得到确切的代码，我知道，它是用于转换的，但我没有得到三元运算符部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T21:46:25.087

这些行：

```
singular_currency = (method == :in ? args.first : method).to_s.gsub(/s$/, '')
self.send(method == :in ? :/ : :*, @@currencies[singular_currency]) 
```

...也可以写成：

```
if method == :in
  singular_currency = args.first.to_s.gsub(/s$/, '')
  self / @@currencies[singular_currency]
else
  singular_currency = method.to_s.gsub(/s$/, '')
  self * @@currencies[singular_currency]
end 
```

这样写更清楚，但增加了更多重复。在 Ruby（以及整个 Smalltalk 系列）中，方法调用和消息发送是一回事。[`send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)是一种调用在其参数中指定的方法的方法。

添加它可以`method_missing`让您支持如下语法：

```
4.dollars
# => 4 * 1.0
4.dollars.in(:yen)
# => 4 * 1.0 / 0.013

4.yen
# => 4 * 0.013
4.yen.in(:dollars)
# => 4 * 0.013 / 1.0 
```

# python - SciPy 累积分布函数绘图

> ID：12848837
> 
> 赞同：2
> 
> 时间：2012-10-11T21:32:01.353
> 
> 标签：python, cdf

我在绘制累积分布函数时遇到问题。

到目前为止，我发现了这个：

```
scipy.stats.beta.cdf(0.2,6,7) 
```

但这只是给了我一点。

这将是我用来绘制的：

```
pylab.plot()
pylab.show() 
```

我希望它看起来像这样： [文件：二项分布 cdf.svg](http://en.wikipedia.org/w/index.php?title=File%3aBinomial_distribution_cdf.svg&page=1)

并且`p = .2`边界停止一次`y = 1`或接近 1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T21:55:25.807

的第一个参数`cdf`可以是一个值数组，而不是单个值。然后它将返回一个值数组。

```
import scipy.stats as stats
import matplotlib.pyplot as plt
import numpy as np

x = np.linspace(0,20,100)
cdf = stats.binom.cdf
plt.plot(x,cdf(x, 50, 0.2))
plt.show() 
```

![在此处输入图像描述](../Images/ed85210b7e9ff2c3df80fa3d77e63247.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-24T02:55:20.587

我认为上面的用户 ubuntu 没有建议使用正确的功能。实际上，他的回答在很大程度上具有误导性和不正确性。

请注意，这`binom.cdf()`是一个计算由 n 和 p 指定的二项式分布的 cdf 的函数`Binomial(n,p)`。也就是说，它返回 x 中每个值的随机变量的 cdf 值，而不是向量 x 指定的离散分布的实际 cdf 函数。

要计算向量 x 定义的任何分布的 cdf，只需使用以下`histogram()`函数：

```
import numpy as np
hist, bin_edges = np.histogram(np.random.randint(0,10,100), normed=True)
cdf = cumsum(hist) 
```

或者，只需使用`hist()`matplotlib 中的绘图功能。

# python - 运行 Celery 时出现“ImportError: No module named exceptions”

> ID：12848843
> 
> 赞同：3
> 
> 时间：2012-10-11T21:32:29.780
> 
> 标签：python, celery, importerror

我正在尝试运行使用 Celery 的 Django 应用程序，但收到以下错误：

```
 import djcelery
  File "/Library/Python/2.7/site-packages/djcelery/__init__.py", line 25, in <module>
    from celery import current_app as celery  # noqa
  File "/Library/Python/2.7/site-packages/celery/__compat__.py", line 135, in __getattr__
    module = __import__(self._object_origins[name], None, None, [name])
  File "/Library/Python/2.7/site-packages/celery/_state.py", line 18, in <module>
    from celery.utils.threads import LocalStack
  File "/Library/Python/2.7/site-packages/celery/utils/__init__.py", line 24, in <module>
    from celery.exceptions import CPendingDeprecationWarning, CDeprecationWarning
  File "/Library/Python/2.7/site-packages/celery/exceptions.py", line 15, in <module>
    from billiard.exceptions import ( # noqa
ImportError: No module named exceptions 
```

billiard 已安装并且该`exceptions`模块确实存在，并且我可以通过 Python 的交互式提示导入 billiard.exceptions 而不会出现问题。似乎芹菜未能导入台球。有任何想法吗？

# sql-server-2008 - SSMA 或 SSIS 用于从 Oracle 10 迁移到 SQL Server 2008 R2

> ID：12848844
> 
> 赞同：4
> 
> 时间：2012-10-11T21:32:30.047
> 
> 标签：sql-server-2008, ssis, oracle10g, database-migration

我们计划将 Oracle 10g 数据库迁移到 SQL Server 2008 R2。
目前在目标数据库中没有实现任何东西，这将使我们有机会在迁移期间更改和改进现有模式。

不仅要导入数据，还需要导入存储过程和视图。

我已经使用过 SSIS，并且发现了一款​​出色的数据处理产品。
一位同事提到了 SSMA 进行迁移。然而，经过网上的一些研究，它似乎主要适用于数据迁移和转换，而 SSIS 似乎提供了更广泛的功能集（任务、自定义脚本等）。

这两种产品的优点/缺点是哪一种，哪一种最适合这项任务？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T22:12:39.200

我会推荐一种混合方法。使用 SSMA[将架构和对象从 Oracle 转换为 SQL Server](http://msdn.microsoft.com/en-us/library/hh313200.aspx)。然后在 SQL 端改进和/或更改您认为合适的对象。一旦您对新架构感到满意。使用 SSIS 将仍在 Oracle 端等待的数据移动到在 SQL 上等待它的新模式中。

至于 SSMA 和 SSIS 的快速比较...... SSIS 在将数据从一个地方移动到另一个地方的[ETL](http://en.wikipedia.org/wiki/Extract,_transform,_load)方面要优越得多。但我不一定会推荐它用于您上面描述的创建/修改阶段。我认为您会发现使用 SSMA 会更轻松地完成该过程。另一方面，SSMA 在复制过程中并没有提供太多的转换方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-07T08:35:51.013

我会选择两者的混合体。

你知道你可以[从命令行](https://docs.microsoft.com/en-us/sql/ssma/access/command-line-options-in-ssma-console-accesstosql?view=sql-server-ver15)触发 SSMA吗？通过这种方式，您可以将 SSMA 迁移作为 SSIS 解决方案的一部分执行。

您还可以将 SSMA 项目保存为 SSIS 包：

[![在此处输入图像描述](../Images/98113fffe596ff8451e0609dc9fdd213.png)](https://i.stack.imgur.com/4Bfrr.png)

迁移后，请继续使用 SSIS 做额外的工作。

# asp.net - 在 ASP.NET 线程中引发异常以关闭 IIS

> ID：12848848
> 
> 赞同：0
> 
> 时间：2012-10-11T21:32:41.047
> 
> 标签：asp.net, multithreading, exception, iis

我正在做代码审查，发现了这段代码。在线程内抛出异常会导致 IIS 崩溃吗？阅读评论。

```
 Thread unhandledExceptionThread = new System.Threading.Thread(new System.Threading.ThreadStart(delegate()
         {
              System.Threading.Thread.Sleep(90 * 1000);
              throw new ApplicationException("Thread 1");
         }));
         unhandledExceptionThread.Name = "IntentionalCrasher";
         Thread environmentExitThread = new System.Threading.Thread(new System.Threading.ThreadStart(delegate()
         {
              System.Threading.Thread.Sleep(100 * 1000);
              Environment.Exit(-500);
         }));
         environmentExitThread.Name = "Thread 2";
         unhandledExceptionThread.Start();
         environmentExitThread.Start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:55:09.203

它不会导致“IIS 关闭”，但会终止 ASP.NET 工作进程。它将重新启动。

您的代码片段首先尝试通过抛出异常而死。10 秒后，如果这没有帮助，它会自行处理并终止进程。

或者，它可以调用`AppDomain.Unload`当前域。但这是重启工作进程的合理方式。

确保禁用快速故障保护。这个功能是魔鬼，因为它会在 5 次失败后永久关闭你的应用程序。永久不通知。任何类型的错误。

# java - 多值多优先级排序图

> ID：12848850
> 
> 赞同：0
> 
> 时间：2012-10-11T21:33:02.680
> 
> 标签：java, android, sorting, map

在android中，如何根据优先级对单行中的多个值进行排序，类似于Excel中的Sort功能？

```
Map<String,String,Float,Integer> shoes; // Style, Color, Price, Quantity
shoes.put("Boots","Red",15.50,5);
shoes.put("Boots","Green",17.50,2);
shoes.put("Skate","Red",12.25,6);
shoes.put("Skate","Blue",13.05,9);
shoes.Sort(1,0,2,3); // sorts by color, then by style

shoes.Sort(2,0,1,3); // sorts by price, then by style 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:45:55.897

Kae 提出的建议是正确的，但是，您可以执行以下操作：

1.  创建一个实现接口 Comparator 的类（内部或非内部），它应该作为与您要比较的内容相关的推断类型。
2.  使用与 Map 相同的规范和 Comparator 作为参数创建一个新的 TreeSet
3.  将所有对象放入创建的树集。

看这个线程：[Sort a Map<Key, Value> by values (Java)](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java)

但同样，您应该考虑根据需要创建一个类。

[]s 内托

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:50:51.770

[这里](http://www.javadeveloper.co.in/java-example/java-comparator-example.html)有一个很好的示例代码块，涵盖了设置通用比较器。对多列进行排序将需要多次调用，但它会产生预期的效果。来自[集合规范](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)

```
This sort is guaranteed to be stable: equal elements will not be reordered as a result of the sort. 
```

所以你从鞋子开始

```
public class Shoe
{
  String style;
  String color;
  float price;//There are some reasons to not use float for money, google has lots of blogs etc
  int quantity;
} 
```

然后根据上面链接的教程制作比较器，最终：

```
ArrayList<Shoe> shoes = makeShoes();
Collections.sort(shoes,col1Comparator);
Collections.sort(shoes,col2Comparator);
Collections.sort(shoes,col3Comparator); 
```

# php - XML RPC Wordpress 钩子

> ID：12848851
> 
> 赞同：2
> 
> 时间：2012-10-11T21:33:06.283
> 
> 标签：php, wordpress, xml-rpc

我正在尝试添加一个函数，该函数将在 wordpress 中的新 xml-rpc 请求上触发。我为此使用了一个插件，但我在那里写的任何东西似乎都没有真正改变任何东西，我什至不知道如何调试它，因为我无法 var_dump 或输出任何东西。这是我的代码：

```
add_filter('xmlrpc_methods', 'mydealz_xmlrpc_methods');
function mydealz_xmlrpc_methods($methods)
{
    $methods['myMethod'] = 'mydealz_xmlrpc_function';
    return $methods;
}

function mydealz_xmlrpc_function($args)
{

    wp_insert_term(
      'Baseem', // the term 
      'size' // the taxonomy
    );
    wp_mail( 'mymail@gmail.com', 'var_dump', 'fasdghfdsah' );

} 
```

非常感谢！

# c# - 如何使用 Javascript 更改 ASP.NET Gridview 的 cssClass？

> ID：12848856
> 
> 赞同：1
> 
> 时间：2012-10-11T21:33:18.703
> 
> 标签：c#, javascript, asp.net, gridview

我想访问 asp.net gridview 的 cssClass 属性并用 Javascript 更改它。

我知道我可以像这样访问其他个人样式属性：

```
document.getElementById('<%=GridView1.ClientID%>').style 
```

但我特别想更改 cssClass 。这是我尝试第一个建议后的结果。它目前还不起作用。我将您给我的那条线放在突出显示选定行的函数的第一部分中，以便所有先前突出显示的行都将恢复为正常样式。想法？

```
function ChangeRowColor(rowID) {
    document.getElementById('<%=gvxTaskList.ClientID%>').className += "tablestyle";

    var color = document.getElementById(rowID).style.backgroundColor;
    if (color != 'yellow')
        oldColor = color;
    if (color == 'yellow')
        document.getElementById(rowID).style.backgroundColor = oldColor;
    else document.getElementById(rowID).style.backgroundColor = 'yellow';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:41:06.410

尝试这个

```
document.getElementById('<%=GridView1.ClientID%>').className = "class"; 
```

并添加到现有类

```
document.getElementById('<%=GridView1.ClientID%>').className += " class"; 
```

## 更新

```
function addClass()
{
    var exClass = document.getElementById('<%=GridView1.ClientID%>').className;

    if(exClass.indexOf('className') == -1)  //check that the class does not already exist
    {
        if(exClass.length == 0)
           document.getElementById('<%=GridView1.ClientID%>').className += 'className'; //add
        else
           document.getElementById('<%=GridView1.ClientID%>').className += ' className'; //append
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T21:40:11.583

asp.net 中的 cssClass 将简单地转换为客户端 html 中的类，例如，在 .net 端中的代码如下：

```
<asp:datagrid id="myGrid" cssClass="myClass" runat=server></asp:datagrid"> 
```

将大致翻译为：

```
<table id="someRandomIdOrClientIdThatYouSet" class="myClass"><tr>....</tr></table> 
```

所以要实现你想要的，在javascript中，你可以改变它：

```
document.getElementById('<%=GridView1.ClientID%>').className = "newClassName"; 
```

或者使用像 jQuery 这样的库：

```
$('#<%=GridView1.ClientID%>').addClass("newClassName") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T21:35:39.750

```
 document.getElementById('<%=GridView1.ClientID%>').className += "class"; 
```

# html - Internet Explorer 9 不能正确显示 CSS 下拉菜单...？

> ID：12848857
> 
> 赞同：1
> 
> 时间：2012-10-11T21:33:22.447
> 
> 标签：html, css, internet-explorer

我正在为 HTML 网页开发基于 CSS 的下拉导航菜单。它在 Google Chrome、Mozilla Firefox 和 Mobile Safari 下完美呈现，问题在于 Internet Explorer 9。它不是显示为条形，而是显示带有项目符号的所有内容，就像没有分配给它的 CSS 脚本一样。我的 HTML 是标准

```
 <link href="menu.css" rel="stylesheet" /> 
```

和

```
 <nav><ul><li><ul>ITEM_NAME<a href="LINKS"></ul></li></ul></nav> 
```

格式。

我的 CSS 脚本如下所示：

```
 nav {
margin: auto; 
text-align: center;
    }

    nav ul ul {
display: none;
    }

nav ul li:hover > ul {
    display: block;
}

    nav ul {
background: #000;
list-style: none;
position: relative;
display: inline-table;
    }
nav ul:after {
    content: ""; clear: both; display: block;
}

nav ul li {
    float: left;
}
    nav ul li:hover {
        background: #FF6600;
    }
        nav ul li:hover a {
            color: #fff;
        }

    nav ul li a {
        display: block; padding: 10px 10px;
        color: #fff; text-decoration: none;
    }

nav ul ul {
    background: #000; padding: 0;
    position: absolute; top: 100%;
}
    nav ul ul li {
        float: none; 
        border-top: 1px solid #333;
                    border-left: 2px solid #333;
                    border-right: 2px solid #333;
        border-bottom: 1px solid #333; 
                    position: relative;
    }
        nav ul ul li a {
            padding: 10px 10px;
            color: #fff;
        }   
            nav ul ul li a:hover {
                background: #FF6600;
            }

nav ul ul ul {
    position: absolute; left: 100%; top:0;
} 
```

我需要做什么才能在 Internet Explorer 9 中正确渲染有什么想法吗？:) 谢谢，肖恩。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:46:04.443

并非所有版本的 IE 都能理解该`nav`标签。此处详述了一些解决方法：

[html5 新元素（页眉、导航、页脚、..）在 IE 中不起作用](https://stackoverflow.com/questions/5227331/html5-new-elements-header-nav-footer-not-working-in-ie)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:44:52.637

我说过这可能是`display: inline-table;`IE 不满意的地方。你可以改用 inline-block 吗？然后为了摆脱这些点，`list-style: none`

# ember.js - #each 中的 Emberjs bindAttr

> ID：12848861
> 
> 赞同：6
> 
> 时间：2012-10-11T21:33:41.840
> 
> 标签：ember.js

视图代码是

```
Ember.View.extend({
        template: Ember.Handlebars.compile(html), // html is in string
        content: function() {
            return [
            { Title: "Dashboard", ID: "dashboard" },
            { Title: "Invoices", ID: "invoices" },
            { Title: "Expenses", ID: "expenses" },
            { Title: "People", ID: "people" },
            { Title: "Reports", ID: "reports" },
            { Title: "Settings", ID: "settings" }
        ]},
        iconClass: function(link){
          return "icon icon-" + link.ID
        }
    }); 
```

模板（上面显示为“html”）如下所示：

```
<ul>
    {{#each link in view.content}}
    <li>
        <a>
            <span class="icon" {{bindAttr class="view.iconClass(link)"}}></span>
            <span class="title">{{link.Title}}</span>
        </a>
    </li>
    {{/each}}
</ul> 
```

这呈现

```
<span class="icon" data-bindattr-2="2"></span> 
```

因此不会呈现附加的类属性。我在范围上做错了吗？

**笔记：**

我更改了代码以显示我想要做什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T09:04:24.530

**编辑**

根据新问题，您必须使用`Ember.CollectionView`：

```
App.FooCollectionView = Ember.CollectionView.extend({
    itemViewClass: Ember.View.extend({
        iconClass: function() {
             return "icon-dashboard icon " + this.get('content.ID');
        }.property('content.ID')
    })
}); 
```

正如你所看到的，每个`itemViewClass`都有一个`iconClass`依赖于它的属性`content.id`。

现在您必须在视图的模板中添加集合视图`FooView`：

```
<ul>
    {{#collection App.FooCollectionView contentBinding="view.content"}}
    <li>
        <a>
            <span {{bindAttr class="view.iconClass"}}>foo</span>
            <span class="title">{{view.content.Title}}</span>
        </a>
    </li>
    {{/collection}}
</ul> 
```

这里我们使用`{{collection}}`Handlebars 助手，我们`FooView`将`FooCollectionView`.

它将自动`itemViewClass`为 CollectionView.content 中的每个对象创建一个实例，将其设置为关联对象，并将其添加到视图中。

我建议您阅读[Ember.CollectionView 文档](http://emberjs.com/api/classes/Ember.CollectionView.html)。

您可以在此JSFiddle[中尝试此解决方案](http://jsfiddle.net/AeVpZ/1/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T02:20:45.543

对于其他遇到 bindAttr 问题的人，结果如下：

`data-bindattr-1="1"`

确保您正在使用

`{{bindAttr src="myvariable"}}` 代替`{{bindAttr src="{{myvariable}}"}}`

可能会为您节省一些时间来寻找答案，这就是导致我的代码无法工作的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T18:13:16.370

另一种简单的方法是向模型添加计算属性。在下面的示例中，我需要一个专门的样式属性。

模型 - -

```
App.Photo = Em.Object.extend(
  objectId: null
  url: ""
  style: (-> 
    "background-image:url('" + @get("url") + "')"
  ).property("url")
) 
```

模板 - - -

```
{{#each item in App.photoController}}
<div {{bindAttr style="item.style"}}></div>
{{/each}} 
```

# multithreading - perl如何结束一个线程

> ID：12848862
> 
> 赞同：2
> 
> 时间：2012-10-11T21:33:50.130
> 
> 标签：multithreading, perl

我是 perl 新手，我对 perl 线程有疑问。

我正在尝试创建一个新线程来检查正在运行的函数是否超时，我的方法如下。

逻辑是 1.新建一个线程 2.运行main函数，看看是否超时，如果是，就kill掉

示例代码：

```
$exit_tread = false;      # a flag to make sure timeout thread will run
my $thr_timeout = threads->new( \&timeout );  
execute main function here;                

$exit_thread = true       # set the flag to true to force thread ends
$thr_timeout->join();      #wait for the timeout thread ends 
```

超时功能代码

```
sub timeout
{

$timeout = false;
my $start_time = time();
while (!$exit_thread)
{

    sleep(1);                 
    last if (main function is executed);

    if (time() - $start_time >= configured time )
    {
        logmsg "process is killed as request timed out";
        _kill_remote_process();
        $timeout = true;   
        last;         
    }
}    
} 
```

现在代码按我的预期运行，但我不是很清楚代码 $exit_thread = true 是否有效，因为在 while 循环的末尾有一个“last”。

谁能给我一个答案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:18:39.587

假设正确的伪代码是这样的：

```
sub timeout
{

$timeout = false;
my $start_time = time();
#$timeout instead of $exit_thread 
while (!$timeout)
{

    sleep(1);                 
    last if (main function is executed);

    if (time() - $start_time >= configured time )
    {
        logmsg "process is killed as request timed out";
        _kill_remote_process();

        $timeout= true;   
        last;         
    }
}    
} 
```

那么，不，调用`last`不会设置`$timeout`变量 - 它只会从调用它的点离开循环。

这是在回答你的问题吗？

# codeigniter - 如何在登录时根据用户类型重定向用户（codeigniter）

> ID：12848863
> 
> 赞同：-1
> 
> 时间：2012-10-11T21:33:57.573
> 
> 标签：codeigniter

我在根据用户类型重定向用户时遇到问题。怎么做这是我的代码，请建议如何做。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class VerifyLogin extends CI_Controller {

  function __construct()
  {
    parent::__construct();
  }

  function index()
  {
       $this->load->model('user','',TRUE);

    //This method will have the credentials validation
    $this->load->library('form_validation');
    $this->load->library('session');

    $this->form_validation->set_rules('username', 'Username','trim|required|xss_clean');
    $this->form_validation->set_rules('password', 'Password'
      'trim|required|xss_clean|callback_check_database');

      if($this->form_validation->run() == FALSE)
      {        

     //Field validation failed.&nbsp; User redirected to login page
     validation_errors();

     $this->load->view('error');
  }
 else
  {
  //Go to private area 
```

基本上在这里，如果用户是管理员，我想重定向然后重定向到管理页面，否则重定向到主页。我怎样才能做到这一点 ？？？

```
 redirect('home', 'refresh');
     }
    }

   function check_database($password)
   {
    //Field validation succeeded.&nbsp; Validate against database
      $username = $this->input->post('username');

       //query the database
       $result = $this->user->login($username, $password);

     if($result)
     {
      $sess_array = array();
       foreach($result as $row)
      {
       $sess_array = array(
     'id' => $row->id,
     'username' => $row->username
     );
     $this->session->set_userdata('logged_in', $sess_array);

        }
        return TRUE;
      }
    else
       {
         $this->form_validation->set_message('check_database', 'Invalid username or password');
         return false;
       }
     }  
     }
  ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:04:29.710

我这样做的方法是通过角色表加入用户。每个用户都被分配了一个角色（例如销售人员、会计经理等）。每个角色都有一个*可选*的主页，可在登录后重定向到。如果未设置，它将重定向到默认页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T10:04:52.280

好的，你说你有登录功能，所以这里是基础知识。迈克所说的是对的，我是如何做到的，但是如果您只有两种类型的用户，那么角色解决方案可能是矫枉过正的。就我个人而言，我使用角色来填充用户菜单，所有用户都获得相同的菜单，选项根据他们被允许查看的网站部分而变化。

对于基本的管理员/用户，虽然这真的没有必要。您需要做的只是在登录后基于用户组重定向，所以类似于此。

```
$this->db->where(username, $username);
$this->db->where(password, $password);
$query = $this->db->get(users);
if($query->num_results() ==1)
{
    $result = $query->result_array();
    switch ($result['usergroup']) {
        case '1':
        redirect 'home';
        break;
        case '2':
        redirect 'admin';
        break;
        default:
        redirect 'home';
        break;
    }
} 
```

正如我所说，这是一个基本解决方案，您可以将其用于几个不同的角色，如果您想做任何更复杂的事情，请研究创建角色。

您还需要将用户组保存到会话并在管理页面上检查它，如果用户不是管理员将他们从页面重定向。

# php - PHP => 替代会话数据？

> ID：12848864
> 
> 赞同：3
> 
> 时间：2012-10-11T21:34:03.257
> 
> 标签：php, session, session-variables

我有一个 Web 应用程序，其中 Cookie 和会话都很重要。

由于 Web 应用程序在不同的服务器上进行负载平衡，我正在寻找替代存储的建议，以获取所有服务器都能够访问的会话数据。

有些会话可能长达数天。

我想到的解决方案：

*   本机 PHP 会话（这是我想停止使用的会话）
*   MySQL 数据库
*   序列化并写入文件（为了表演，我想避免这种情况）
*   Memcache（但它可能会变得非常大或旧数据被淘汰）

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:39:09.390

您可以使用像 Couchbase 或 Redis 这样的无 sql 数据库，这与使用 Memcache 类似，但是它们都具有硬盘持久性，而 Memcache 只是内存中的缓存，因此您会遇到在 Memcache 运行时旧数据可能会丢失的问题到它的极限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T21:44:44.053

我会使用数据库作为替代方案。我过去使用过它，它对我来说效果很好。在选择一个数据库来完成这项任务时，我会选择一个已经是基础设施的一部分并且我知道的数据库。换句话说，如果您还不熟悉 NoSQL 数据库，我不建议您使用它。我过去曾使用 MySQL 和 Oracle 作为会话存储，它们对我来说是零麻烦的。

但话又说回来，如果你对 NoSQL 感到满意，或者想学习它们，你可能会朝那个方向发展。底线 - 我会坚持使用我知道的数据库作为备用 PHP 会话存储。

# php - Smarty 动态错误列表

> ID：12848869
> 
> 赞同：0
> 
> 时间：2012-10-11T21:34:23.417
> 
> 标签：php, smarty

我是 Smarty 与 PHP 相结合的新手，我真的很喜欢它。不幸的是，在 $_POST 完成后验证字段时遇到了问题。

我创建了一个名为 $errors 的数组，并使用它来保存错误消息，例如：$errors[] .= "Wrong email";。我的问题是将 $errors 数组发送到模板，以便我可以使用它来显示错误消息。

我的问题：如何将 $errors 变量“转移”到模板文件中，以便可以在其中使用它，例如 {foreach}。我打算做类似的事情

```
{if $hasErrors} 
    {foreach from=errors item=error}
          <li>{$error}</li>
    {/foreach}
{/if} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:36:33.113

您可以像分配任何其他变量一样将数组分配给您的模板。

```
$smarty->assign('errors', $errors); 
```

此外，在最初构建数组时，删除连接运算符并使用：

```
$errors[] = 'Wrong email'; 
```

最后，请务必在尝试向其添加元素或分配它之前初始化您的数组。

```
$errors = array() 
```

* * *

**编辑：**既然您已经包含了附加信息，我认为问题与您的 Smarty 标签语法有关。试试这一行，将 a 添加`$`到您的变量中：

```
{foreach from=$errors item=error} 
```

# ios - 为什么 XCode 不断下载旧的已删除配置文件和同一配置文件的副本？

> ID：12848870
> 
> 赞同：0
> 
> 时间：2012-10-11T21:34:26.113
> 
> 标签：ios, xcode

ing如果我在 XCode 中刷新配置文件：

a) 拉下那些不再存在的。已从门户中删除且不再存在的配置文件

b) 拉下同一配置文件的多个副本。如果我添加一个新设备，然后更新配置文件以包含该新设备。然后 XCode 将拉下新的更新配置文件，但也会拉下具有较旧日期的相同配置文件（即使门户网站只显示一个，最新的）。

如果我删除它们 XCode 它们会重新出现。

我在获取推送通知以使用临时分发时遇到问题，因此希望确保我使用最新的配置文件进行构建。XCode 的这种行为至少令人恼火，最坏的情况可能是我的问题的根源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:11:43.200

您需要在门户中撤销匹配的开发人员证书并将其从您的钥匙串中删除。对我来说，这是解决这个问题的唯一方法......

# android - 为什么 File.Exists 返回 false？

> ID：12848873
> 
> 赞同：2
> 
> 时间：2012-10-11T21:34:34.157
> 
> 标签：android, xamarin.android

我正在查询 Android 设备上的所有图像：

```
string[] columns = { MediaStore.Images.Media.InterfaceConsts.Data, 
            MediaStore.Images.Media.InterfaceConsts.Id };
string orderBy = MediaStore.Images.Media.InterfaceConsts.Id;
var imagecursor = ManagedQuery(MediaStore.Images.Media.ExternalContentUri, columns, null, null, orderBy);
for (int i = 0; i < this.Count; i++) {
    imagecursor.MoveToPosition(i);
    Paths[i]= imagecursor.GetString(dataColumnIndex);
    Console.WriteLine(Paths[i]);
    Console.WriteLine(System.IO.File.Exists(Paths[i]));
} 
```

问题是输出显示某些文件不存在。这是一个示例输出：

> /storage/sdcard0/Download/On-Yom-Kippur-Jews-choose-different-shoes-VSETQJ6-x-large.jpg
> 错误
> /storage/sdcard0/Download/397277_10151250943161341_876027377_n.jpg
> 错误
> /storage/sdcard0/Download/Roxy_Cottontail_&_ ..._Some_Bunny_Love's_You.jpg
> 错误
> /storage/sdcard0/Download/album-The-Rolling-Stones-Some-Girls.jpg
> 正确
> /storage/sdcard0/Download/some-people-ust-dont-appreciate-fashion[1 ].jpg
> 真
> /storage/sdcard0/Download/express.gif
> 真
> ...
> /storage/sdcard0/Download/some-joys-are-expressed-better-in-silence.JPG
> 假

这怎么可能？我自己从网上下载了这些图片！它们应该存在于磁盘中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:13:13.763

您似乎正在使用 LoaderMananger/ManagedQuery 来查询 Android 中的媒体内容提供程序。内容提供者只是从不同应用程序访问特定 SQLite 数据库的一种方式。如果您使用 Android 提供的媒体内容提供程序，则必须通过使用 MediaScannerConnection 来“手动”更新它，以添加您放置的新文件，因为在您的应用程序运行时，“服务”可能会或可能不会在内部更新.

以下是一些相关的 SO 问题： [扫描 Android SD 卡以查找新文件](https://stackoverflow.com/questions/4753252/scan-android-sd-card-for-new-files) 并[在特定路径（文件夹）上触发 mediascanner，如何？](https://stackoverflow.com/questions/9414955/trigger-mediascanner-on-specific-path-folder-how-to)但我不推荐全局扫描你的SD卡的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T18:09:06.767

如果这是三星设备，所有这些路径都可能不正确！

// 将其放入您的代码中，然后记录“外部”字符串以查看

```
String external = Environment.getExternalStorageDirectory(); 
```

如果你说：/storage/sdcard0/

然后三星自己说你必须做这个蹩脚的追加（我声称他们破坏了 API :)

```
external = external + "/external_sd/"; 
```

我不确定这是否适用于下载，但我怀疑它会影响所有类似的子路径。

[http://developer.samsung.com/forum/board/thread/view.do?boardName=GeneralB&messageId=162934&messageNumber=1381&startId=zzzzz~&searchType=TITLE&searchText=sdcard](http://developer.samsung.com/forum/board/thread/view.do?boardName=GeneralB&messageId=162934&messageNumber=1381&startId=zzzzz~&searchType=TITLE&searchText=sdcard)

[编辑：] 告诫 Emptor ！即使这在某些三星设备上也不起作用。ARRRRGGGGGG

# c++ - 未解析的外部符号——模板类

> ID：12848876
> 
> 赞同：4
> 
> 时间：2012-10-11T21:35:01.263
> 
> 标签：c++, templates

> **可能重复：**
> [C++ 模板，链接错误](https://stackoverflow.com/questions/1353973/c-template-linking-error)

我正在尝试实现选择排序，但我不断收到错误（打印在下面）。在我看来，我所有的包含和模板都正确完成。有人可以向我解释此错误的原因以及调试此类错误的一般方法。它通常似乎发生在存在包含或模板问题时，但偶尔会发生在我不知道出了什么问题的情况下。谢谢。

错误 LNK2019：函数 _main 中引用了未解析的外部符号“public：void __thiscall Selection::SelectionSort(int * const,int)”(?SelectionSort@?$Selection@H@@QAEXQAHH@Z)

测试.cpp

```
#include <iostream>
#include "SelectionSort.h"
using namespace std;

void main()
{
    int ar[] = {1,2,3,4,5};
    Selection<int> s;
    s.SelectionSort(ar,5);

    for(int i = 0; i < 5; i++)
    {

        cout << "\nstudent number " << i + 1<< " grade " << ar[i];
    }
} 
```

选择排序.h

```
template<class ItemType>
class Selection
{
public:
    void SelectionSort(ItemType[], int);
private:
    int MinIndex(ItemType[], int, int);
    void Swap(ItemType& , ItemType&);
}; 
```

选择排序.cpp

```
#include "SelectionSort.h"

template<class ItemType>
void Selection<ItemType>::SelectionSort(ItemType values[], int numValues)
// Post: The elements in the array values are sorted by key.
{
int endIndex = numValues-1;
for (int current = 0; current < endIndex; current++)
Swap(values[current],
values[MinIndex(values, current, endIndex)]);
}

template<class ItemType>
int Selection<ItemType>::MinIndex(ItemType values[], int startIndex, int endIndex)
// Post: Returns the index of the smallest value in
// values[startIndex]..values[endIndex].
{
int indexOfMin = startIndex;
for (int index = startIndex + 1; index <= endIndex; index++)
if (values[index] < values[indexOfMin])
indexOfMin = index;
return indexOfMin;
}

template<class ItemType>
inline void Selection<ItemType>::Swap(ItemType& item1, ItemType& item2)
// Post: Contents of item1 and item2 have been swapped.
{
ItemType tempItem;
tempItem = item1;
item1 = item2;
item2 = tempItem;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T21:37:10.387

将 to 的内容移动`SelectionSort.cpp`到`SelectionSort.h`类声明的正下方。还要确保在整个`.h`文件的内容周围有一个标题保护。

问题来自 C++ 如何实现模板。每次它看到与模板类（如`Selection<int>`）一起使用的新类型时，它都会重新创建整个类，`ItemType`用`int`.

出于这个原因，它需要在编译时知道类的完整定义（连同它的方法）。它不能只使用类定义并将链接延迟到以后。

# css - 边界半径结果不一致

> ID：12848877
> 
> 赞同：2
> 
> 时间：2012-10-11T21:35:01.527
> 
> 标签：css

在 Safari 和 Chrome 中获得一致的边框半径时出现问题。火狐没问题。

以下不会在 Safari 或 Chrome 中产生任何边框半径：

```
.hero-wrapper {
position: relative;
z-index: 2;
float: left;
width: 100%;
height: 429px;
border-radius: 10px;
border-top-left-radius: 0;
-webkit-border-radius: 10px;
-webkit-border-top-left-radius: 0;
-webkit-border-bottom-right-radius: 10px;
-moz-border-radius: 10px;
-moz-border-top-left-radius: 0;
-o-border-radius: 10px;
-o-border-top-left-radius: 0;
overflow: hidden 
```

}

具有讽刺意味的是，只需在我的 DOM 中的其他项目上使用没有 -moz 或 -webkit 的“border-radius”，就可以在所有浏览器上工作......太困惑了。我查看了 Stackoverflow 上的其他一些帖子，并阅读了以前版本的 Safari 中的一个错误，但我的是最新版本，并且还在 Chrome 上产生了问题。

这是适用于所有浏览器的其他边框半径代码：

```
.hero-cta:before, .nav-wrapper:before, .nav-wrapper:after, #feature-slider:after {
position: absolute;
content: "";
border-radius: 100px;
box-shadow: rgba(212,212,212,100) 550px 50px 150px;
width: 420px;
height: 300px;
opacity: .8 
```

}

这是开发网站的链接：[http ://www.plasticmonument.com/biomechaniks/index.html](http://www.plasticmonument.com/biomechaniks/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T02:31:03.173

那是因为您如何在网站上使用这些飞行图像，将边框应用于图像而不是 div，这将是您想要的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:17:11.720

首先，您在某些 css 规则的末尾缺少分号，因此这些规则可能会或可能不会起作用，具体取决于它们的位置。例如，您的 css 溢出和不透明度规则缺少分号。[其次，基于我制作的这个小提琴](http://jsfiddle.net/nbatothemax/wHCFA/6/)，chrome 支持无前缀边框半径。这意味着您不需要键入 webkit 前缀，因为它们只会浪费代码中的空间并使整个 css 文件变大。

# css - div 上的边框半径和内部图像的不透明度在 Chrome 中无法正常工作

> ID：12848878
> 
> 赞同：-1
> 
> 时间：2012-10-11T21:35:06.160
> 
> 标签：css, google-chrome

我正在使用一个具有border-radius 的div，该div 内部是一个具有不透明度的图像，并且在Firefox 上运行良好，但在Chrome 中border-radius 不起作用。看[例子](http://jsfiddle.net/WHNcd/2/)

Chrome 中是否有解决该问题的方法？

更新：我没有说我使用[这个方法](http://iw3b.info/348/programing/center-image-in-fixed-size-div-center-thumbnail-image/)将图像居中在 div 内，所以我不能在图像上使用边框半径，它必须在 div 上使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:37:55.693

改变这个

```
.thumb img{
opacity:0.7;
filter:alpha(opacity=70);
border-radius: 7px;    /*this8*/

} 
```

这有效，即使不透明

看[这里](http://jsfiddle.net/WHNcd/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:42:22.727

如果您将不透明度应用于`.thumb`并将边框半径应用于`img`，则它可以工作：

[http://jsfiddle.net/WHNcd/4/](http://jsfiddle.net/WHNcd/4/)

这意味着您可以根据需要为图像使用包装器

# python - 在内存中存储字节数组字符串

> ID：12848880
> 
> 赞同：-5
> 
> 时间：2012-10-11T21:35:14.383
> 
> 标签：python, bytearray

我们有大量的可变长度的 Python bytearray 字符串需要保留在内存中。Wrt raw-performance，对于字节数组字符串的只读随机访问，Python字典是最有效的内存存储吗？字典键可以是整数或字符串。如果不是，什么更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T21:44:18.693

这完全取决于您打算如何访问它们。如果您只想遍历它们，请将它们放在`list`. 如果要通过键搜索一个，请使用`dict`. 无论您使用什么，您都已经为所有 s 支付了空间， , 或其他内容`bytearray`之间的差异可能很小。一个列表将使用 500,000 个引用，每块 4 个字节 = 2MB，可能是它的几倍。`list``dict``dict`

# php - PHP脚本语言还是编程语言？

> ID：12848882
> 
> 赞同：6
> 
> 时间：2012-10-11T21:35:19.137
> 
> 标签：php, definition

我一直不明白为什么 PHP 称为“脚本语言”而不是“编程语言”。

我将自己介绍为“PHP 程序员”是错误的，我应该是“PHP 脚本师”吗？

编程语言和脚本语言的定义是什么？

PHP 可以完成复杂的程序并编译成 .exe 文件以在 Windows 上运行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T21:37:10.140

通常，如果一种语言未经编译，则称为脚本语言。但是现在它不再重要了——PHP 程序员可能是更准确的术语。你用语言做什么也很重要。即使是使用 Java Script 名称中包含“脚本”的语言编写的人，只要他们开始做一些比使用 jquery 进行简单 DOM 操作更高级的事情，他们就会被称为程序员。

我最近听到的唯一自称是脚本编写者的人是 bash-scripters :)

# iphone - shouldAutoRotate 没有被调用

> ID：12848884
> 
> 赞同：0
> 
> 时间：2012-10-11T21:35:33.020
> 
> 标签：iphone, objective-c, ios, ipad

> **可能重复：**
> [shouldAutorotateToInterfaceOrientation 不起作用](https://stackoverflow.com/questions/2868132/shouldautorotatetointerfaceorientation-doesnt-work)

`pushViewController`在调用shouldAutoRotate 方法并进入 iPhone后，我将 UIViewController 推入 UINavigationController 。但是，当我旋转设备时，不再调用它。为什么是这样？

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if (IS_IPHONE){
        return interfaceOrientation == UIInterfaceOrientationPortrait;
    } else {
        return YES;
    }
} 
```

我希望这个 UIViewController 只在纵向上。我的 viewWillLayoutSubviews 被调用了。为了提供更多上下文，将调用 willAnimate 方法

# javascript - 如何在画布上同时绘制图像和草图

> ID：12848891
> 
> 赞同：2
> 
> 时间：2012-10-11T21:35:46.300
> 
> 标签：javascript, jquery, image, html5-canvas, sketching

我想将图像绘制到画布上，然后允许用户通过 sketch.js 在其上绘制一些草图。现在的情况是：

```
 1.the image has been drawn on the canvas successfully
  2\. but when my mouse over the canvas, then image disappeared, and the canvas shows empty
  3\. when I dragged the mouse, some sketch shows on the empty canvas(the sketch looks correct) 
```

所以，我把这两个功能都做好了，但我对两者之间的部分感到困惑。我希望在画布上画出带有图像的草图。这是我的代码：

索引.html：

```
<canvas id="mysketch" width="578" height="400" style="margin: 0px; "></canvas> 
```

画布.js：

```
var mysketch = jQuery("#mysketch");

// draw the captured image to canvas 
    var displayImage = function() {
    var context = mysketch.get(0).getContext("2d");     
        var image = new Image();

        image.onload = function() {
            context.drawImage(image, 0, 0);
        }

    // prepend the required image info again
        image.src = dataURL;

        // call sketch.js to draw sketch on the canvas
    mysketch.sketch({defaultColor: "#ff0"});

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T07:13:41.320

我认为，在您调用草图方法时，
sketch.js 首先清除画布，然后允许您在其上绘制一些东西。
正如您在[此处](http://intridea.github.com/sketch.js/ "Sketch.js github 页面")的链接中看到的，在第三个示例（即工具示例）中，图像不是通过 drawImage 方法绘制的。
它实际上是画布的背景，无论你在上面画什么，它都会一直作为背景存在。

所以你可以做的是：

要么做与示例中相同的事情，即将你的图像设置为背景，

要么在你的画布后面创建一个具有相同宽度、高度和相同位置的新画布，并在其上绘制你的图像。并在第二个上做你的草图。

# ios - iOS - presentModalViewController 导致一些动画伪影（iPhone）

> ID：12848893
> 
> 赞同：1
> 
> 时间：2012-10-11T21:35:54.300
> 
> 标签：ios, xcode, uitoolbar, presentmodalviewcontroller, uiwindow

我将 UIToolbar（带有一些按钮）显示为当前顶窗口的子视图。这工作正常。在某些时候，我想在 UIToolbar 上显示一个模式对话框（使用 presentModalViewController）。

我试图以多种方式隐藏它（removeFromSuperview、sendSubviewToBack、setHidden、将帧大小更改为 0 等等），但是当最常见的 UIToolbar 看起来几乎消失但仍然显示一些褪色的按钮时，它们都会导致一些动画副作用的背景。

这几天想解决这个问题。我做错了什么还是只是一个错误？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T14:07:42.820

在隐藏之前尝试隐藏 UIToolBar 上的所有按钮，如下所示：

```
NSMutableArray *toolbarButtons = [self.toolbarItems mutableCopy];
[toolbarButtons removeAllObjects];
[self setToolbarItems:toolbarButtons animated:NO]; 
```

# php - 类结构可能需要实现组合来模拟多重继承

> ID：12848895
> 
> 赞同：0
> 
> 时间：2012-10-11T21:36:06.677
> 
> 标签：php, oop, design-patterns, multiple-inheritance

这是基本前提，我正在为 db 对象使用活动记录模式，我认为我需要一些指导来组织这些类。而且总的来说，我如何可能拆分我的班级结构。希望我不要解释得太糟糕。如果组合模式是要走的路，我可能需要一点手来实现它。

假设有一个`ActiveRecord`基类，位于图腾柱的底部，用于处理将对象映射到数据库以及将数据库映射到对象。

的子类`ActiveRecord`是一种通用`User`类，它处理用户会话、登录、保存时密码字段的加密等。

另一个孩子`ActiveRecord`是一个`ActiveRecordButSlightlyMoreAdvanced`班级。通常这个类与 无关`User`，但这是我的问题。

我想要一个子类，它本质上是`User`and的组合`ActiveRecordButSlightlyMoreAdvanced`；`UserButSlightlyMoreAdvanced`，而不必从 中复制粘贴所有方法`User`。`User`扩展没有意义`ActiveRecordButSlightlyMoreAdvanced`，因为它本质上需要重写一堆对`User`. `UserButSlightlyMoreAdvanced`扩展是有意义的`ActiveRecordButSlightlyMoreAdvanced`，但我必须从`User`.

我知道有些人认为图片更好，所以这里是图示的结构。

根据

```
class ActiveRecord
{
    ....
} 
```

孩子

```
class User extends ActiveRecord
{
    ....
} 
```

还有孩子

```
class ActiveRecordButSlightlyMoreAdvanced extends ActiveRecord
{
    ....
} 
```

问题

```
class UserButSlightlyMoreAdvanced extends User AND ActiveRecordButSlightlyMoreAdvanced
{
        :( :( :(
} 
```

我已经考虑这个问题大约一个月了，如果其中一个对象实现保存的方式发生变化，我想不出一个不会给对象双重维护带来负担的解决方案。在接下来的几天里，我将尝试一些解决方案，并可能发布我认为在这种情况下最好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:44:50.840

我的猜测是你的意思是这样说：

```
class UserButSlightlyMoreAdvanced extends User AND ActiveRecordButSlightlyMoreAdvanced 
{
    :) :) :)
} 
```

如果是这种情况，请查看特征[http://php.net/manual/en/language.oop5.traits.php](http://php.net/manual/en/language.oop5.traits.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:55:13.320

您可以尝试使用策略模式。在这种情况下，您将创建您的类：

```
class UserButSlightlyMoreAdvanced extends ActiveRecord implements ActiveRecordButSlightlyMoreAdvancedStrategy
{
    private $_strategy;

    public function useStrategy(ActiveRecordButSlightlyMoreAdvancedStrategy $s) {
        $this->_strategy = $s;
    }
} 
```

让你的策略课：

```
interface ActiveRecordButSlightlyMoreAdvancedStrategy
{
        // Define what this should do here
} 
```

制作一个实现上述接口的策略类。

```
class ActiveRecordButSlightlyMoreAdvanced implements ActiveRecordButSlightlyMoreAdvancedStrategry {
    // Do stuff here
} 
```

现在，当您调用这些高级方法时，两个类都实现了相同的接口，但 UserButSlightlyMoreAdvanced 类只是将请求传递给策略对象：

```
class UserButSlightlyMoreAdvanced extends ActiveRecord implements ActiveRecordButSlightlyMoreAdvancedStrategy
    {
        private $_strategy;

        public function useStrategy(ActiveRecordButSlightlyMoreAdvancedStrategy $s) {
            $this->_strategy = $s;
        }

        public function someSlightlyMoreAdvancedFunction () {
             return $this->_strategy->someSlightlyMoreAdvancedFunction():
        }
    } 
```

希望有帮助。

# java - 更改 java.security.KeyStore 密码

> ID：12848896
> 
> 赞同：0
> 
> 时间：2012-10-11T21:36:11.197
> 
> 标签：java, keystore

有谁知道怎么改密码`java.security.KeyStore`？这是我创建我的方式`KeyStore`：

```
 keyStore = KeyStore.getInstance("PKCS12", BouncyCastleProvider.PROVIDER_NAME);
        keyStore.load(null, null);
        if (keyStore.containsAlias(CERTIFICATE_ALIAS)) {
            keyStore.deleteEntry(CERTIFICATE_ALIAS);
        }

        keyStore.setKeyEntry(PRIVATE_KEY_ALIAS, privateKey, password, chain);

        keyStoreFileOutputStream = application.openFileOutput(KEY_STORE_FILE_NAME, Application.MODE_PRIVATE);
        keyStore.store(keyStoreFileOutputStream, password); 
```

# iphone - iPhone5 和 iOS6 组合产生显示问题

> ID：12848898
> 
> 赞同：0
> 
> 时间：2012-10-11T21:36:25.987
> 
> 标签：iphone, objective-c, ios, ios5, cocos2d-iphone

我的 cocos2D 应用程序 Forever Afloat 在您使用 iPhone 5 和 iOS6 之前，所有组合都可以完美运行！应用程序显示全部被拉伸，因此您只能看到左下角，其余部分不在屏幕上。只有在您强制它自动旋转之前，应用程序才会开始以适当的尺寸显示......

我的问题也可以在这个问题[cocos2D iOS 6 视网膜显示](https://stackoverflow.com/questions/12567239/cocos2d-ios-6-retina-display)
他们问同样的问题。有什么解决办法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:17:09.890

cocos2d 使用带有 image-hd.png 的图像而不是 image@2x.png 检查您是否使用@2x 替换为 hd

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:11:24.423

使用新版本的 cocos2d，这里是图片扩展。

```
-wide.png for iphone 5
-widehd.png for iPhone 5 HD
-hd.png for iPhone HD 
-ipad.png for iPad. 
-ipadhd.png for iPad HD. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:23:35.773

AppDelegate 中存在一些关于调用顺序的问题，这使得显示变得很奇怪。我所做的只是将初始化方法移到顶部，它修复了一切！

# android - 关于电池寿命的轮询参考框架？

> ID：12848901
> 
> 赞同：0
> 
> 时间：2012-10-11T21:36:45.017
> 
> 标签：android

我知道这是一个有点抽象的问题，答案取决于设备、网络、用户偏好等。尽管如此，我确实需要一些关于我可以允许我的民意调查“过度”的有根据的意见。假设我的一个典型轮询请求包含一个空请求主体（一个简单的 GET）和几百千字节的响应，那么每 4 小时轮询一次的服务是否属于过度类别？

我处于无法使用 C2DM 的不幸情况，所以请不要回答暗示这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:48:44.143

> 假设我的一个典型轮询请求包含一个空请求主体（一个简单的 GET）和几百千字节的响应，那么每 4 小时轮询一次的服务是否属于过度类别？

我不会这么认为。从电池的角度来看，每 4*分钟*会令人不快。理想情况下（恕我直言），可以通过首选项配置轮询周期。

此外，您可能希望观看[Reto Meier 的 Google I|O 2012 演示文稿](http://www.youtube.com/watch?v=PwC1OlJo5VM)，尤其是“效率”部分，该部分介绍了许多好的低级电池消耗内容。

此外，对于这种有效载荷大小，恕我直言，电池对于那些使用即用即付计划的人来说不是一个问题，而是带宽成本。你说的是~1MB/天，~30MB/月。这可能不是不合理的，但是如果用户理解你为什么要下载所有这些数据（相对于，比如说，某种差异或增量方法），那会很好，如果用户可以限制你的行为，那就太好了你的应用程序。否则，用户可能会选择从 Android 4.x+ 设备上的“设置”中限制您。

# c# - 从代码执行时，Handle.exe 不起作用

> ID：12848902
> 
> 赞同：2
> 
> 时间：2012-10-11T21:36:45.397
> 
> 标签：c#, file-io, file-locking

我正在尝试使用 handle.exe 来发现哪个进程拥有一个文件。当我通过命令行自行运行句柄时，它按预期工作。但是，当我从我的代码中执行它时，我总是会发现没有进程正在锁定文件。

我运行 Handle.exe 的代码：

```
Process tool = new Process();
tool.StartInfo.FileName = "handle.exe";
tool.StartInfo.Arguments = theFileName;
tool.StartInfo.UseShellExecute = false;
tool.StartInfo.RedirectStandardOutput = true;
tool.Start();
tool.WaitForExit();
string outputTool = tool.StandardOutput.ReadToEnd();

string matchPattern = @"(?<=\s+pid:\s+)\b(\d+)\b(?=\s+)";
foreach (System.Text.RegularExpressions.Match match in 
         System.Text.RegularExpressions.Regex.Matches(outputTool, matchPattern)) {
    Process p = Process.GetProcessById(int.Parse(match.Value));
    Console.WriteLine("Holding Process: " + p.Id);
} 
```

我还尝试了一些其他方法来查找此 SO 问题中建议的文件所有权： [使用 C#，如何确定哪个进程锁定了文件？](https://stackoverflow.com/questions/860656/how-does-one-figure-out-what-process-locked-a-file-using-c) 所有人仍然报告说没有任何东西可以控制该文件。

为了测试这些东西，我有一个单独的测试程序，基本上只是运行这个：

```
 using (FileStream theStream = new FileStream(theFileName, FileMode.Open, FileAccess.Read, FileShare.None)) {
        while (true) ;
    } 
```

**编辑：** 我以管理员身份运行 Visual Studio，因此我通过代码启动的任何进程都可以获得相同的权限。当然，这只是在调试时，但我至少需要让它在一个环境中工作，然后再担心其他环境。

句柄运行后输出工具是

```
手柄 v3.5
版权所有 (C) 1997-2012 Mark Russinovich
Sysinternals - www.sysinternals.com

找不到匹配的句柄。
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T19:25:36.043

Handle.exe 必须运行提升才能运行。我怀疑如果你转储 的内容`outputTool`，你会发现它说“初始化错误：确保你是管理员”。

运行您自己的提升应用程序应该会自动启动提升的handle.exe，这将解决问题。不幸的是，您不能简单地修改您的应用程序以启动提升的 handle.exe。那将需要 using `tool.StartInfo.Verb = "runas";`，这需要`tool.StartInfo.UseShellExecute = true;`，这将与`tool.StartInfo.RedirectStandardOutput = true;`

您可以添加一个带有`requestedExecutionLevel`set的应用程序清单，`requireAdministrator`以确保您的应用程序始终以提升的方式启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T00:01:43.800

我已经想通了。我的文件路径有一个额外的“\”。显然这混淆了句柄，但不是`File.Open(...)`。

```
theFileName = "C:\ProgramData\MyApp\\imagefile.tiff" 
```

每当我尝试在 Windows cmd 中运行 handle.exe 时，我都没有包含额外的“\”。

我想因为我从来没有在我的问题中包含文件路径，所以其他人不可能弄清楚。对不起SO用户。

# javascript - 当我将鼠标悬停在父级上时，如何切换子级？

> ID：12848903
> 
> 赞同：1
> 
> 时间：2012-10-11T21:36:47.283
> 
> 标签：javascript, jquery, html, ajax, asynchronous

这是一些示例 HTML

```
<style> .icon {display:none;} </style>
<ul>
    <li>ABC <i id="abc" class="icon">x</i></li>
    <li>DEF <i id="def" class="icon">x</i></li>
    <li>GHI <i id="ghi" class="icon">x</i></li>
</ul> 
```

`.icon`当我将鼠标悬停在其 parent上时，我需要显示`li`。

这是我正在尝试的：

```
$('.icon').each().parent().hover(function() {
    $(this).children('.icon').toggle();
}); 
```

你能为我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T21:38:58.480

不需要使用`each`方法，可以使用`$(selector, context)`，试试下面的：

```
$(document).ready(function() {
   $('ul li').hover(function() {
        $('.icon', this).toggle();
   });
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T21:42:55.067

您也可以使用 CSS 执行此操作（尽管在 IE 中存在问题，因为 :hover 在 A 以外的标签上存在问题）：

```
<style> 
.icon {display:none;} 
li:hover .icon {display:inline;}
</style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T21:50:17.163

我假设您只想在悬停时显示图标：

```
$('li').hover(

  // called on mouseenter
  function () {
    $(this).find('.icon').show();
  },

  // called on mouseleave
  function () {
    $(this).find('.icon').hide();
  }
); 
```

这种方法比简单`toggle`的可见性状态更节省，以防事件丢失。

# regex - 我需要一个正则表达式来修复在第 80 列拆分的行

> ID：12848911
> 
> 赞同：0
> 
> 时间：2012-10-11T21:37:18.940
> 
> 标签：regex

问题 - 多行、分号分隔的文件在第 79 列或第 80 列被拆分（由于某些奇怪的原因并不总是相同）。

在我看来，正则表达式是合适的解决方案，所以现在我有两个问题。

线路是：

```
1sdf.............................mno[cr][lf]
pqr........xyz......................[cr][lf]
.....|.....|.....|.....|.....|.....|[cr][lf]
2sdf.............................mno[cr][lf]
pqr........xyz......................[cr][lf]
.....|.....|.....|.....|.....|.....|[cr][lf]
3sdf.............................mno[cr][lf]
pqr........xyz......................[cr][lf]
.....|.....|.....|.....|.....|.....|[cr][lf]
4sdf.............................mno[cr][lf]
pqr........xyz......................[cr][lf]
.....|.....|.....|.....|.....|.....|[cr][lf]
... 10000 rows ... 
```

管道是非空格空白字符（可能是制表符）

我需要：

```
1sdf.............................mnopqr........xyz......................[cr][lf]
2sdf.............................mnopqr........xyz......................[cr][lf]
3sdf.............................mnopqr........xyz......................[cr][lf]
4sdf.............................mnopqr........xyz......................[cr][lf] 
```

我设法完成了工作

**第 1 遍：** 替换`^\s*\r\n`为`\rxxx\n`

// 将空行替换为 \rxxx\n 离开

```
1sdf.............................mno[cr][lf]
pqr........xyz......................[cr][lf]
[cr]xxx[lf]
2sdf.............................mno[cr][lf]
pqr........xyz......................[cr][lf] 
```

第 2 遍：替换`\r\n`为 [empty] //离开：

```
1sdf.............................mnopqr........xyz......................[cr]
xxx[lf]
2sdf.............................mnopqr........xyz...................... 
```

通过 3：替换`\rxxx\n`为`\r\n`

//离开：

```
1sdf.............................mnopqr........xyz......................[cr][lf]
2sdf.............................mnopqr........xyz...................... 
```

其余的清理工作是微不足道的。

有什么方法可以一步完成吗？输出来自一个常见的金融应用程序，我宁愿自己修复文件，也不愿尝试让多个客户调整他们的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:55:16.797

在记事本++（使用正则表达式模式）中，您可以使用：

找什么：`\r\n(\s*\r\n)?`

用。。。来代替：`\1`

然后只运行一次“全部替换”。但是，[**请确保您更新到 Notepad++ 6**](https://stackoverflow.com/a/133989/1633117)！否则，与正则表达式匹配`\r\n`将无法在 Notepad++ 中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T23:49:28.237

假设`^\s*\r\n`与您上面所说的要删除的行匹配，我相信您可以通过替换来做到这`\r\n\s*\r\n|\r\n`一点`\r\n`

这是我的第一个正则表达式，所以如果它不起作用，不要太苛刻:-)

祝你好运

# asp.net-mvc - 如何在 ASP.NET MVC 4 中重定向对某些图像的请求？

> ID：12848912
> 
> 赞同：0
> 
> 时间：2012-10-11T21:37:21.077
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我正在将第 3 方 jquery 插件集成到我的 ASP.NET MVC 网站上的页面中，我发现它期望图像位于相对于它所在页面的 img 文件夹中。它会生成如下所示的 img 标签：

```
<img src="img/blah.jpg"> 
```

问题是，我的页面位于类似的 URL 上`mysite.com/mycontroller/view/id`，因此没有简单的方法将 img 文件夹放在正确的位置以获取图像。我需要 img 标签是这样的：

```
<img src="/Content/img/blah.jpg"> 
```

显然，我可以编辑第 3 方 javascript 以在每次创建 img 标记时输出不同的路径，但我想知道 ASP.NET MVC 中是否有更好的方法（也许使用重新路由？）。

（我对 ASP.NET MVC 和 Web 开发非常陌生，所以请告诉我我是否以完全错误的方式处理这个问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:43:55.393

我建议避免尝试通过路由解决此问题。编辑脚本以使路径正确，这将更容易且性能最高。在客户端脚本中修复它可能与查找和替换或仅编辑单个字符串对象一样简单。

# c# - c# 从反向引用中获取值

> ID：12848914
> 
> 赞同：1
> 
> 时间：2012-10-11T21:37:33.223
> 
> 标签：c#, regex, backreference

我正在尝试从如下所示的 XML 文件中提取数据库连接字符串：

```
<DTS:Property DTS:Name="ConnectionString">
    Data Source=Instance1;
    User ID=;
    Initial Catalog=DB;
    Provider=SQLOLEDB.1;
    Integrated Security=SSPI;
    Auto Translate=False;    
</DTS:Property>
</DTS:ConnectionManager>
    </DTS:ObjectData>
</DTS:ConnectionManager>
<snip> 
```

现在理想情况下，我希望有一个团体回来

> [0] = 数据源=Instance_1；用户 ID=；初始目录=DB1；提供者=SQLOLEDB.1；集成安全性=SSPI；自动翻译=False；
> 
> [1] = DB1

所以我有这个正则表达式：

```
<DTS:Property DTS:Name="ConnectionString">(?<cs>.*)(?<cs>)</DTS:Property> 
```

所以我在第一个（）中捕获了值，有没有办法可以做一个正则表达式来捕获完整的连接字符串和只有数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:13:10.370

当然。用正则表达式给猫剥皮的方法有很多。见下文。

### 我推荐**[连接字符串生成器](http://msdn.microsoft.com/en-us/library/ms254947.aspx)**。

* * *

为了娱乐和教育，这里是这个问题的正则表达式解决方案：

> **注意**我故意*只*展示如何用正则表达式处理连接字符串，因为 XML 应该用 XmlReader、XDocument、XPathReader 或 XmlDocument（等）处理。

**[在http://ideone.com/I47R8](http://ideone.com/I47R8)**上现场观看

```
using System;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;

public class Program
{
    const string kvPair   = @"(?<pair>(?<key>.*?)\s*=\s*(?<value>.*?))";
    const string kvpRegex = "^" + kvPair + "$";
    const string csRegex  = @"^\s*(?<cs>(?:" + kvPair + @"\s*(;\s*|\s*$))+)$";

    public static void Main(string[] args)
    {
        const string input = @"Data Source=Instance1;User ID=;Initial Catalog=DB;Provider=SQLOLEDB.1;Integrated Security=SSPI;Auto Translate=False;";

        var match = Regex.Match(input, csRegex);
        Console.WriteLine("======\nSuccess: {0}\n======", match.Success);

        // 'smart' dictionary from the subcaptures:
        var dict = match.Groups["pair"]
            .Captures
            .Cast<Capture>()
            .Select(cap => Regex.Match(cap.Value, kvpRegex))
            .ToDictionary(submatch => submatch.Groups["key"].Value,
                          submatch => submatch.Groups["value"].Value);

        foreach (var kvp in dict)
            Console.WriteLine(kvp);

        // Getting just the DB1:
        Console.WriteLine("======\nCatalog: {0}\n======", dict["Initial Catalog"]);

        // raw access from csRegex full match:
        foreach (Capture cap in match.Groups["key"].Captures)
            Console.WriteLine("Key: '{0}'", cap.Value);
        foreach (Capture cap in match.Groups["value"].Captures)
            Console.WriteLine("Value: '{0}'", cap.Value);

        Console.WriteLine("======\nConnection string: '{0}'", match.Groups["cs"].Value);
    }
} 
```

使用正确的输出：

```
======
Success: True
======
[Data Source, Instance1]
[User ID, ]
[Initial Catalog, DB]
[Provider, SQLOLEDB.1]
[Integrated Security, SSPI]
[Auto Translate, False]
======
Catalog: DB
======
Key: 'Data Source'
Key: 'User ID'
Key: 'Initial Catalog'
Key: 'Provider'
Key: 'Integrated Security'
Key: 'Auto Translate'
Value: 'Instance1'
Value: ''
Value: 'DB'
Value: 'SQLOLEDB.1'
Value: 'SSPI'
Value: 'False'
======
Connection string: 'Data Source=Instance1;User ID=;Initial Catalog=DB;Provider=SQLOLEDB.1;Integrated Security=SSPI;Auto Translate=False;' 
```

# oauth2-playground - oauth2.0 尝试使用刷新令牌时请求无效

> ID：12848917
> 
> 赞同：6
> 
> 时间：2012-10-11T21:37:54.747
> 
> 标签：oauth2-playground

使用谷歌 oauth2 游乐场：[https ://developers.google.com/oauthplayground/ 关注：](https://developers.google.com/oauthplayground/) [https](https://developers.google.com/accounts/docs/OAuth2WebServer#offline) : //developers.google.com/accounts/docs/OAuth2WebServer#offline

任何人为什么我收到无效请求？

```
POST /o/oauth2/token HTTP/1.1
Host: accounts.google.com
Content-length: 209
Content-type: application/x-www-form-urlencoded
Authorization: OAuth ya29.XXXXXXXX

client_id=XXXXXXXXX&
client_secret=XXXXXXXXX&
refresh_token=1/0ffkj5lggn8XXXXXXXXX&
grant_type=refresh_token

HTTP/1.1 400 Bad Request
Content-length: 33
X-xss-protection: 1; mode=block
X-content-type-options: nosniff
X-google-cache-control: remote-fetch
-content-encoding: gzip
Server: GSE
Reason: Bad Request
Via: HTTP/1.1 GWA
Pragma: no-cache
Cache-control: no-cache, no-store, max-age=0, must-revalidate
Date: Thu, 11 Oct 2012 21:29:55 GMT
X-frame-options: SAMEORIGIN
Content-type: application/json
Expires: Fri, 01 Jan 1990 00:00:00 GMT

{
  "error" : "invalid_request"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T17:41:15.933

如果您得到 400 是因为您添加了无效参数或缺少参数。

编辑：

我相信从给定的数据有一个额外的标题授权。仅当在标头中传递 access_token 时才在 oauth2 中使用，以进行经过身份验证的调用

```
Authorization : Bearer XXXXXXXXXXXXXXXX 
```

在刷新 access_token 时，无需在标头中提供相同的内容。

[https://developers.google.com/accounts/docs/OAuth2InstalledApp#refresh](https://developers.google.com/accounts/docs/OAuth2InstalledApp#refresh)

# c# - asp.net IIS 7.5 站点绑定

> ID：12848919
> 
> 赞同：0
> 
> 时间：2012-10-11T21:37:56.333
> 
> 标签：c#, asp.net, iis-7.5

我有一个在我的家用计算机上部署到 IIS 7.5 的 asp.net 网页。当我输入

```
http://192.168.1.11 
```

进入我的浏览器它工作正常。我希望能够输入电脑名称，因为这样会更简单。即只需输入

```
http://computername 
```

. 但这不起作用。下面是我的绑定设置，我猜是配置问题所在。我的设置应该是什么？谢谢达摩

![在此处输入图像描述](../Images/afacb4b0a7f690ac1f137ac0304ae1a7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:45:34.763

从 C:\Windows\System32\drivers\etc 文件夹打开主机文件并添加如下条目

```
192.168.1.11 computername 
```

# mysql - 并发插入可以以这种方式产生吗

> ID：12848925
> 
> 赞同：0
> 
> 时间：2012-10-11T21:38:33.537
> 
> 标签：mysql, innodb

我想我遇到了一些与并发插入有关的问题，所以我想知道这样的并发插入语句是否 -

```
insert into table1 (field1,field2,field3) Values (A,B,C);
insert into table1 (field1,field2,field3) Values (1,2,3); 
```

可能会导致像

```
A B 3 
```

第一个插入语句中的 A 和 B 以及第二个插入语句中的 3。我的表正在使用 InnoDB 存储顺便说一句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:39:30.993

答案是不。插入和更新通常会锁定它们正在操作的表/行，这样就不会发生。

# cubism.js - 调整时间线标签

> ID：12848928
> 
> 赞同：1
> 
> 时间：2012-10-11T21:38:46.117
> 
> 标签：cubism.js

我最近将一天的时间序列数据加载到多个水平图中。数据来自静态 json 文件。

如何调整时间标题开始日期/时间并使其与图表中使用的步骤相对应？

例如，我的数据来自 2012 年 10 月 10 日。每个数据点每 30 秒收集一次。我不确定如何操纵 serverDelay 来获得我想要的。

var context = cubism.context() .serverDelay(new Date(2012, 10, 10) - Date.now()) .step(30*60*1000) .size(2880) .stop();

# javascript - css id 选择器与元素 id 选择器通过 JavaScript 控制样式

> ID：12848931
> 
> 赞同：0
> 
> 时间：2012-10-11T21:38:58.810
> 
> 标签：javascript, asp.net, css, styles

在我的代码中，所有表头都有一个 CSS 样式设置 -`<th>`

我没有为自己的 Css 进行设置，但直到现在对我来说还可以，所以我没有尝试编辑这些。

但是现在我必须打印页面，并且设置为`#ffffff` 它的字体颜色在背景上肯定看起来不错，但在打印出来时它不会显示

我的 CSS 是这样制作的

```
 #TBLtime th , #TBLparam1 th , #TBLparam2 th
    {
    font-size:12px;
    text-align:right;
    padding-top:5px;
    padding-bottom:4px;
    background-color:#A7C942;
    color:#ffffff;
    } 
```

所以 id 选择器是每个元素的，你如何更容易从 javascript 控制/修改

说我需要改变颜色属性。我将如何从 javascript 访问它？

```
 function DocPrnt() {
        document.getElementById(id).style.color = "black";
        print();
    } 
```

有没有更好的选择让选择器易于从 JS 访问，或者这是常见的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:44:04.957

好吧，对于纯 JavaScript 解决方案，这可能有效：

```
function DocPrnt() {
    var headerCells = [],
        i = 0;
    headerCells = document.getElementsByTagName('th');
    for (i = 0; i < headerCells.length; i += 1) {
        headerCells[i].style.color = "#000000";
    }
    print();
} 
```

就个人而言，我只是添加一个新的样式表仅用于打印：

```
<link rel="stylesheet" type="text/css" href="/print.css" media="print" /> 
```

# iphone - UIViewController 上的两个标题栏（UITableViewController 的子视图）

> ID：12848935
> 
> 赞同：1
> 
> 时间：2012-10-11T21:39:07.427
> 
> 标签：iphone, ios, uiviewcontroller

所以我有一个显示图片的表格视图控制器，然后当您选择一个单元格时，它会打开一个带有图像视图的 UIViewController 和一个带有返回或保存图像的按钮的导航栏。问题是我得到了第二个标题栏。我似乎无法删除它，我无法更改文本，老实说，我似乎无法找到它的来源。当我选择它时，它会选择导航栏，但如果我删除或隐藏导航栏，它会隐藏带有按钮的栏，并且这个“标题”栏会保留。

这是在模拟器中运行的样子：

![标题栏问题](../Images/46d417f2636aa3ed88b4d5cb151acc2c.png)

关于如何摆脱这个东西或至少改变它的标题的任何想法？唯一似乎改变它的是当我加载一个非常小的图像时，它会扩展以填充剩余的视图空间，如下所示：

![大标题栏](../Images/1fe5dae6856ee3a9c051f51eca9b16d4.png)

我已经删除了 UIImageView 甚至笔尖中的视图，它仍然存在。我什至删除了笔尖本身，没有任何变化。我只能猜测超级视图正在以某种方式加载它，但我找不到任何可能导致它的东西。如果它来自单元格方法，它将具有图像的标题，而不仅仅是“标题”。

这是 Superview（它是一个表格视图控制器）中的代码，它用问题初始化屏幕：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
NSUInteger row = [indexPath row];
NSString *title = [completePicturesList objectAtIndex:row];
NSArray *sysPaths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES );
NSString *docDirectory = [sysPaths objectAtIndex:0];
NSString *imagePath = [NSString stringWithFormat:@"%@/%@", docDirectory, title];

UIImage *image = [[UIImage alloc] initWithContentsOfFile:imagePath];

GCDetailViewController *childController = [[GCDetailViewController alloc] init];
childController.mainImage = image;
[self.navigationController pushViewController:childController animated:YES]; 
```

}

这是显示副本的 UIViewController 的 viewWillAppear：

```
- (void)viewWillAppear:(BOOL)animated { 
[super viewWillAppear:animated];

mainImageDisplay.image = mainImage;

UIBarButtonItem *editButton = [[UIBarButtonItem alloc] initWithTitle:@"Save"
                                                               style:UIBarButtonItemStyleBordered target:self action:@selector(saveImageToPhotoAlbum)];
self.navigationItem.rightBarButtonItem = editButton;
NSString *titleText = [NSString stringWithFormat:@"Image Review"];
self.title = titleText; 
```

此类中唯一的其他方法是保存照片。此外，也没有为此分配笔尖，因此它不存在。至于self.title，如果我改变它，它会改变上面写着“Image Review”的文字，而不是它下面的“title”。如果我尝试隐藏导航栏，它会隐藏图像查看栏并且标题栏会保留。

只是为了好玩，这里是 cellForRow 方法，看看它是否在那里：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

{

```
static NSString *CellIdentifier = @"newCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

NSUInteger row = [indexPath row];
NSArray *sysPaths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES );
NSString *docDirectory = [sysPaths objectAtIndex:0];
NSString *cellTitle = [completePicturesList objectAtIndex:row];
NSString *imagePath = [NSString stringWithFormat:@"%@/%@", docDirectory, cellTitle];
UIImage *image = [[UIImage alloc] initWithContentsOfFile:imagePath];

cell.textLabel.text = cellTitle;
cell.imageView.image = image;

return cell; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:06:39.123

如果不能回答我自己的问题，请原谅，但我确实找到了解决方案。

标题栏来自一个旧笔尖。我在情节提要中制作了它，添加了条形图，然后改变了我想如何处理它并删除它的想法。

无论出于何种原因，当我在模拟器和手机上重新加载应用程序时，它都没有覆盖最初导致此问题的旧笔尖（即使它已从 xCode 中删除）。我只是从手机和模拟器中删除了该应用程序并重新加载它，标题栏就消失了。

# java - 如何检查是否支持 Quartz Extreme？

> ID：12848938
> 
> 赞同：1
> 
> 时间：2012-10-11T21:39:12.493
> 
> 标签：java, macos, quartz-graphics

**问题：** 有什么方法可以通过使用 java 来检查 Mac 上是否支持 Quartz Extreme？

我四处寻找，但我似乎找不到任何有关如何进行检查的文档。

**原因：** 我使用的库需要 Quartz Extreme 才能在 OSX 上正确播放视频文件。如果不支持 Quartz Extreme，那么我将阻止程序运行视频文件，而不是吐出错误或运行得很慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:23:55.530

必须运行 Mac OS 10.6 或更高版本，因此，所有英特尔 Mac 都支持。除非您专门编写需要在较旧的 PowerPC Mac 上运行的应用程序，否则您可以放心地假设 QE 始终可用。

[http://support.apple.com/kb/HT1582](http://support.apple.com/kb/HT1582)

# android - 如何在 libgdx 中显示纹理的反射？

> ID：12848940
> 
> 赞同：1
> 
> 时间：2012-10-11T21:39:18.970
> 
> 标签：android, opengl-es, textures, libgdx

我需要创建一个 OpenGL ES 应用程序（最好使用 libGDX），该应用程序显示一个旋转纹理，该纹理在其下方具有某种反射。

我在网上搜索过，发现了一些关于如何在 OpenGL 中进行操作的非常古老的教程。

我想知道在 libGdx 或 Android 上是否有一种简单的方法可以做到这一点，如果我被迫使用 OpenGL 2 而不是 1.x。

有没有在 Java、Android 或 libgdx 中实现纹理反射的教程？

* * *

我已经取得了一些小的进展，但我仍然需要更多帮助。

目前显示纹理的代码基于[此链接](http://obviam.net/index.php/texture-mapping-opengl-android-displaying-images-using-opengl-and-squares/)，我已经对其进行了修改，以便显示旋转图像及其反射。

但是，我有一些不好的问题：

1.  它几乎就像一面完美的镜子。我需要添加某种特殊效果，使其具有某种渐变效果。

2.  图像可能会相互重叠，并且它们不透明。如果我将反射移动到更靠近旋转图像的位置，我可以看到它们相互重叠。

代码在这里：

```
public class GlRenderer implements Renderer

@Override
public void onDrawFrame(final GL10 gl)
  {
  gl.glClear(GL10.GL_COLOR_BUFFER_BIT|GL10.GL_DEPTH_BUFFER_BIT);
  square.draw(gl);
  // draw normal spinning image
  gl.glLoadIdentity();
  gl.glColor4f(1f,1f,1f,1f);
  gl.glTranslatef(0.0f,0.0f,-5.0f);
  gl.glRotatef(rotationAngle++,0.0f,0.0f,1.0f);
  square.draw(gl);
  // draw reflection
  gl.glLoadIdentity();
  gl.glColor4f(0.5f,0.5f,0.5f,1.0f);
  gl.glTranslatef(0.0f,-1.0f,-3.0f);
  gl.glRotatef(-80+180,1.0f,0.0f,0.0f);
  gl.glRotatef(rotationAngle,0.0f,0.0f,1.0f);
  } 
```

有没有人可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:15:38.820

为了获得完美的效果，您需要做两件事。假设您使用 Image 类来渲染它，首先是将相同的图像放在原始图像下方，并使用 scaleY 将其垂直翻转。

这将创建反射效果，但您需要将应用于第一张图像的相同内容应用于第二张图像，例如移动、旋转，无论您对它做了什么。

除此之外，你可能需要你的反射图像像渐变一样淡出，如果你在一个不移动的纯色背景上做所有事情，你可以创建第三个图像，它是从透明到背景颜色的渐变 png，然后放它在反射图像上。如果您有动态背景，那么您可能需要使用着色器（抱歉，仅限 openGL 2）。您可以在此处阅读有关如何编写自定义着色器的更多信息：http: [//blog.josack.com/2011/08/my-first-2d-pixel-shaders-part-3.html](http://blog.josack.com/2011/08/my-first-2d-pixel-shaders-part-3.html)（一个很棒的教程）]

希望有帮助。可能还有其他我不知道的解决方案，所以请继续研究，但这就是我想到的。

# mod-rewrite - 重写从根目录到子目录而不显示子目录名称的 .htaccess 规则

> ID：12848944
> 
> 赞同：2
> 
> 时间：2012-10-11T21:39:33.000
> 
> 标签：mod-rewrite, rewrite

我在根目录中有一个旧的 html 站点，在一个名为 new 的子目录中有一个新的 WP 站点。我只希望主 url 直接进入 /new 而不显示目录名称 /new

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:45:48.173

尝试将这些规则放在文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{DOCUMENT_ROOT}/new%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/new%{REQUEST_URI} -d [OR]
RewriteCond %{DOCUMENT_ROOT}/new%{REQUEST_URI} -s
RewriteRule ^ /new%{REQUEST_URI} [L] 
```

这首先检查以确保所请求的内容实际存在于`/new`目录中。如果是，那么它会在内部将 URI 重写为`/new`.

或者，您也可以将这些规则添加到 vhost/server 配置中。

# windows - 尝试从 ftp 递归下载特定文件并在其上运行命令

> ID：12848948
> 
> 赞同：0
> 
> 时间：2012-10-11T21:40:03.863
> 
> 标签：windows, powershell, ftp, cmd

我正在尝试从 ftp 位置下载具有特定文件名的每个文件，在其上运行命令然后将其删除。

例如：从“\some\random\ftp\location”下载每个看起来像“*_qwerty.jpeg”的文件，然后对其运行命令。一旦命令完成，删除它。我也需要脚本忽略所有 other.jpeg 文件。

我正在尝试在 Windows CMD 或 Powershell 中执行此操作

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T05:46:27.000

最简单的方法是使用 Ftp.exe 并用参数文件驱动它。使用 mget 下载带有通配符的文件。用 foreach 循环迭代文件并做一些事情。像这样，

```
<commandfile>
lcd <path-to-local-dir>
open <ftp-site>
<username>
<password>
bin
cd <path-to-remote-dir>
prompt
mget <filename-with-wildcards>
close
bye 
```

在 Powershell 中使用命令文件非常简单：

```
Ftp -s:<commandfile>
foreach($i in gci <path-to-images>) {
  <do-something> $i
} 
```

您也可以对批处理脚本执行相同的操作（记住在脚本中使用双%，在命令行中使用单%）。

```
Ftp -s:<commandfile>
for /f "tokens=*" %j in ('dir /b <path-to-images') do <do-something> %j 
```

# ios6 - iOS 存折日期字段未显示

> ID：12848955
> 
> 赞同：1
> 
> 时间：2012-10-11T21:40:20.107
> 
> 标签：ios6, passbook

我正在尝试在存折优惠券上显示有效期。这是我创建的第一张存折通行证。由于某种原因，日期没有显示在通行证上。

截图： [http ://screencast.com/t/looDjpqT](http://screencast.com/t/looDjpqT)

日期的 JSON 代码：

```
 "secondaryFields" : [
      {
        "dateStyle" : "PKDateStyleMedium",
        "isRelative" : true,
        "key" : "expires",
        "label" : "Valid On",
        "timeStyle" : "PKDateStyleNone",
        "value" : "2012-10-12T12:00:00-05:00"
      }
    ], 
```

知道为什么这个日期根本没有出现在我的通行证上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:34:30.773

你的代码很好。问题是内置的 OS X 存折查看器由于某种原因不显示日期。它可以在真实设备上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:03:36.127

它似乎只采用 UTC 的组合日期和时间，例如“2012-10-13T06:00Z”

一个完整的例子：

```
{
  "key": "date",
  "label": "Date and Time",
  "dateStyle": "PKDateStyleMedium",
  "timeStyle": "PKDateStyleShort",
  "value": "2012-10-13T06:00Z",
  "isRelative": true
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:56:10.410

timeStyle 标记显示不正确。它应该是 PKTimeStyleShort 而不是 PKDateStyleShort。

# mysql - 我可以在 GROUP BY 之前执行 COUNT()

> ID：12848962
> 
> 赞同：3
> 
> 时间：2012-10-11T21:40:58.347
> 
> 标签：mysql, sql, count, mysql-workbench

我正在为学校做一个 mySQL 作业，但我遇到了一个问题。我对 mySQL 还是很陌生。COUNT(o.customer_id) 没有按我想要的方式工作。我希望它计算订单数量，但它正在计算所有项目。即客户 1 有 2 个订单，但它返回 3 个，因为一个订单有两个项目。我有三张桌子，一张是客户，一张是订单，另一张是订单上的每个商品。我在下面提出了我的问题。任何帮助都会很棒。

```
SELECT email_address, COUNT(o.order_id) AS num_of_orders,
       SUM(((item_price - discount_amount) * quantity)) AS total
FROM customers c JOIN orders o
      ON c.customer_id = o.customer_id
     JOIN order_items ot
      ON o.order_id = ot.order_id
GROUP BY o.customer_id
HAVING num_of_orders > 1
ORDER BY total DESC; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T21:44:51.653

就像使用`Distinct`保留字一样简单：

```
SELECT email_address, COUNT(distinct o.order_id) AS num_of_orders 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T21:42:17.893

看起来您想计算 DISTINCT 订单数。将 DISTINCT 添加到 COUNT 中。尽管 MySQL 允许您在 HAVING 子句中使用 SELECT 表达式，但这样做并不是一个好习惯。

```
SELECT email_address, COUNT(DISTINCT o.order_id) AS num_of_orders,
       SUM(((item_price - discount_amount) * quantity)) AS total
FROM customers c JOIN orders o
      ON c.customer_id = o.customer_id
     JOIN order_items ot
      ON o.order_id = ot.order_id
GROUP BY o.customer_id
HAVING COUNT(DISTINCT o.order_id) > 1
ORDER BY total DESC; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-11T21:51:04.190

只需取出加入项目。它所做的只是在有多个项目时复制行。

```
SELECT email_address, COUNT(o.order_id) AS num_of_orders,
       SUM(((item_price - discount_amount) * quantity)) AS total
FROM customers c JOIN orders o
      ON c.customer_id = o.customer_id
GROUP BY o.customer_id
HAVING COUNT(o.order_id) > 1
ORDER BY total DESC; 
```

# ruby-on-rails - 如何将 rspec 与已清理的 YAML 固定装置一起使用？

> ID：12848963
> 
> 赞同：3
> 
> 时间：2012-10-11T21:41:00.030
> 
> 标签：ruby-on-rails, rspec, fixtures

我希望我的 rspec 测试加载我的 YAML 固定装置，并且我希望它们被加载到事务中，以便它们在每次测试后消失。

```
describe "the thing I'm testing"
   fixtures :sandwiches, :condiments

   before(:each) do
      # stuff
   end

   it "makes sandwiches"
      # making sandwiches 
   end
end 
```

当调用`fixtures`存在时（在`describe`块中，但不在`before`块中），它加载我的三明治和调味品，但在事务之外，因此被提交。好吧，看起来是这样的；可以肯定的是，测试完成后我的装置仍在数据库中。

我想也许我可以将调用`fixtures`放在`before`块中，在事务中，但后来我得到了

> NoMethodError：<RSpec::Core::ExampleGroup::Nested_1:0x007fd1f11f7578> 的未定义方法“fixtures”

所以我想我可以使用 DatabaseCleaner 或类似的东西，但是......没有它我不能得到我想要的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T02:51:36.047

`fixtures`是一种 Rails 方法（不是 RSpec），afaik 实际上并没有加载固定装置 - 只是注册它们以便稍后加载。

它*是*一个类方法，因此它必须在类中运行（`ExampleGroup`由 describe 返回），而不是在其中评估 、 等的`before`实例`it`。

你有`config.use_transactional_fixtures = true`spec_helper.rb 吗？

# apache-flex - 使用 SWFLoader 加载 Flex 应用程序时播放器崩溃

> ID：12848966
> 
> 赞同：1
> 
> 时间：2012-10-11T21:41:24.560
> 
> 标签：apache-flex, flex4, flash

我有一个非常简单的 Flex 4 应用程序，它的 mxml 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
  xmlns:s="library://ns.adobe.com/flex/spark"
  xmlns:mx="library://ns.adobe.com/flex/halo"
  minWidth="400" minHeight="300">
  <fx:Script>
      <![CDATA[
          import mx.controls.Alert;

          public function Execute(foo:Object):void {
              Alert.show("Hello World");
          }
      ]]>
  </fx:Script>
</s:Application> 
```

我正在使用`flex/bin/mxmlc file.mxml`.

在另一个 Flex 应用程序中，我尝试使用 SWFLoader 加载上面的应用程序并运行该`Execute`功能。它的代码类似于：

```
var swfLoader:SWFLoader = ...;
// on load, run the below
var loadedSM:SystemManager = SystemManager(swfLoader.content);
var loadedApp:Object = loadedSM.application;
loadedApp.Execute(this); 
```

外部应用程序被浏览器加载得很好，但是当 SWFLoader 加载内部应用程序时，外部应用程序崩溃/卸载：浏览器窗口变白。

在 Flash Player 的调试日志中，这是我看到的：

```
VerifyError: Error #1053: Illegal override of getElementNearestScrollPosition in spark.layouts.HorizontalLayout.

ReferenceError: Error #1065: Variable ImageSkin__embed_mxml_Assets_swf___brokenImage_818059060 is not defined.

ReferenceError: Error #1065: Variable _0c91adc980e321d1cb58dff2b8f06798859d4954576f5b2afe24ac0f6c486f60_flash_display_Sprite is not defined. 
```

有任何指针吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:28:52.673

在应用程序中，您可以使用[spark:ModuleLoader](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/modules/ModuleLoader.html)加载 spark 模块或应用程序（spark:Module 或 spark:Application）。这会处理依赖关系以及加载过程。

# ruby - 红宝石中是否有等效的“管道”？

> ID：12848967
> 
> 赞同：7
> 
> 时间：2012-10-11T21:41:29.560
> 
> 标签：ruby

有时在编写 Ruby 时，我发现自己想要一个`pipe`方法，类似于`tap`但返回调用块的*结果*`self`作为参数，如下所示：

```
class Object
  def pipe(&block)
    block.call(self)
  end
end

some_operation.pipe { |x| some_other_operation(x) } 
```

..但到目前为止，我还没有设法找出它的名字，如果它存在的话。它存在吗？

如果没有，我知道我可以用猴子补丁对象来添加它，但是，你知道，那很糟糕。除非有一个出色的，保证永远不会冲突（以及描述性和简短）的名称，否则我可以使用它......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-11T22:00:07.670

这种抽象在核心中不存在。我通常称它为`as`，它简短且具有声明性：

```
class Object
  def as
    yield(self)
  end
end

"3".to_i.as { |x| x*x } #=> 9 
```

[Raganwald](http://raganwald.com/)通常在他的帖子中提到抽象，他将其[称为](https://github.com/raganwald/homoiconic/blob/master/2008-10-30/thrush.markdown).

所以，总结一下，一些名字：`pipe`, `as`, `into`, `peg`, `thru`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-18T18:45:29.017

Ruby 2.5[引入了 Object.yield_self](https://bugs.ruby-lang.org/issues/6721)，这正是您正在使用的管道运算符：它接收一个块，将 self 作为第一个参数传递给它，并返回评估该块的结果。

```
class Object
  def yield_self(*args)
    yield(self, *args)
  end
end 
```

示例用法：

```
"Hello".yield_self { |str| str + " World" }
# Returns "Hello World" 
```

You can also read a little more about it in the following blog posts:

1.  [Explains the difference with Rails' try and Ruby's tap methods](https://blog.bigbinary.com/2017/12/12/ruby-2-5-added-yield_self.html)
2.  [Some very nice examples of using yield_self to simplify code](https://mlomnicki.com/yield-self-in-ruby-25/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-24T14:37:52.097

这是我用来链接对象的技术。除了我不重新开课外，几乎和上面一样`Object`。相反，我创建了一个`Module`我将使用它来扩展我正在使用的任何对象实例。见下文：

```
module Chainable
  def as
    (yield self.dup).extend(Chainable)
  end
end 
```

我已经定义了这个方法来禁止可变方法改变原始对象。下面是一个使用这个模块的简单例子：

```
[3] pry(main)> m = 'hi'
=> "hi"
[4] pry(main)> m.extend(Chainable).as { |m| m << '!' }.as { |m| m+'?'}
=> "hi!?"
[5] pry(main)> m
=> "hi" 
```

如果有人发现此代码有任何问题，请告诉我！希望这可以帮助。

# jquery - 如果链接已激活类，您如何滑动切换 div？

> ID：12848972
> 
> 赞同：0
> 
> 时间：2012-10-11T21:41:57.757
> 
> 标签：jquery, css, class

我知道……这有点令人困惑……

所以我有：

```
 $("div nav ul li a").click(function () {
    $(this).toggleClass("red");
   }); 
```

我的问题是，如果“div nav ul li a”上的类是“红色”，你如何**滑动切换一个 div？**

```
 $("div nav ul li a").click(function () {
    $(this).toggleClass("red");
   if (........... here?
    }); 
```

我的分...

```
 <div id="popout" style="display:none"></div> 
```

我想不通...帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T21:43:42.007

```
$('div nav ul li a').click(function () {
    var $this = $(this);
    $.toggleClass('red');
    if ($this.hasClass('red')) {
        // do your thing
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:43:51.420

您需要使用 hasClass 函数 ala：

```
if( $("div nav ul li a").hasClass('red') ){
...
} 
```

# scala - 如何将文件从一个文件夹移动到另一个文件夹？

> ID：12848973
> 
> 赞同：0
> 
> 时间：2012-10-11T21:41:58.290
> 
> 标签：scala

我需要将一个文件夹的文件移动到另一个文件夹

要在 java 中做到这一点，我会创建一个类似的方法：

```
private boolean moveFile(List<String> names, dir moveTo){

  for(String file : names){
    //copy the file from one dir to another
  }

} 
```

在 scala 中是否有更“实用”的方式或更好的方式来做到这一点？也许使用 scala 我什至不需要遍历文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:45:05.100

除了副作用之外，您什么也没做，因此它本身并不是一项非常实用的任务。使用 foreach 函数可能会更短一些，但差别不大。

# c++ - 是否可以在 qmake .pro 文件中设置 Visual Studio 项目属性？

> ID：12848974
> 
> 赞同：1
> 
> 时间：2012-10-11T21:42:05.590
> 
> 标签：c++, visual-studio-2008, qmake

我有一个 qmake 批处理文件，它使用 .pri 和 .pro 创建一个用于创建 dll 的 Visual Studio C++ 项目。但是我想自动设置这个项目的属性，特别是调试命令和命令行参数，这在 qmake 中是否可行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-06-21T09:25:04.843

有可能，创建一个

> add_qt_path.pri

文件某处包含以下内容：

```
# test if windows
win32 {
  # test if already exists
  VCXPROJ_USER_FILE = "$${OUT_PWD}/$${TARGET}.vcxproj.user"
  !exists( $${VCXPROJ_USER_FILE}) {
    # generate file contents
    TEMPNAME     = $${QMAKE_QMAKE}     # contains full dir of qmake used
    QTDIR        = $$dirname(TEMPNAME) # gets only the path
    # vcxproj.user template
    VCXPROJ_USER = "<?xml version=\"1.0\" encoding=\"utf-8\"?>$$escape_expand(\\n)\
    <Project xmlns=\"http://schemas.microsoft.com/developer/msbuild/2003\">$$escape_expand(\\n)\
      <PropertyGroup Condition=\"'$(Configuration)|$(Platform)'=='Debug|Win32'\">$$escape_expand(\\n)\
        <LocalDebuggerEnvironment>PATH=$${QTDIR};%PATH%</LocalDebuggerEnvironment>$$escape_expand(\\n)\
        <DebuggerFlavor>WindowsLocalDebugger</DebuggerFlavor>$$escape_expand(\\n)\
      </PropertyGroup>$$escape_expand(\\n)\
      <PropertyGroup Condition=\"'$(Configuration)|$(Platform)'=='Release|Win32'\">$$escape_expand(\\n)\
        <LocalDebuggerEnvironment>PATH=$${QTDIR};%PATH%</LocalDebuggerEnvironment>$$escape_expand(\\n)\
        <DebuggerFlavor>WindowsLocalDebugger</DebuggerFlavor>$$escape_expand(\\n)\
      </PropertyGroup>$$escape_expand(\\n)\
      <PropertyGroup Condition=\"'$(Configuration)|$(Platform)'=='Debug|x64'\">$$escape_expand(\\n)\
        <LocalDebuggerEnvironment>PATH=$${QTDIR};%PATH%</LocalDebuggerEnvironment>$$escape_expand(\\n)\
        <DebuggerFlavor>WindowsLocalDebugger</DebuggerFlavor>$$escape_expand(\\n)\
      </PropertyGroup>$$escape_expand(\\n)\
      <PropertyGroup Condition=\"'$(Configuration)|$(Platform)'=='Release|x64'\">$$escape_expand(\\n)\
        <LocalDebuggerEnvironment>PATH=$${QTDIR};%PATH%</LocalDebuggerEnvironment>$$escape_expand(\\n)\
        <DebuggerFlavor>WindowsLocalDebugger</DebuggerFlavor>$$escape_expand(\\n)\
      </PropertyGroup>$$escape_expand(\\n)\
    </Project>$$escape_expand(\\n)\
    "
    # write file
    write_file($${VCXPROJ_USER_FILE}, VCXPROJ_USER)  
  }
} 
```

然后**将**其包含在您的 qmake 项目 (*.pro) 文件中，**在**目标定义之后：

```
QT += core
QT -= gui

TARGET = test3
CONFIG += console
CONFIG -= app_bundle

include(./../../add_qt_path.pri) # add qt path to vs project

# other qmake stuff 
```

您还可以向 *.vcxproj.user 添加任何其他条目，例如调试命令和命令行参数，只需查看手动设置时 Visual Studio 如何在 *.vcxproj.user 文件中自动生成它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T23:28:26.157

大多数构建环境属性可以通过 qmake 选项设置（您可以在 qmake 源代码中找到它们，例如 *_objectmodel.* 文件）。不幸的是，您需要的两个选项实际上都是运行时选项，所以我认为您无法在 .pri/.pro 文件中设置它们。Afaik，它们甚至没有存储在 .vcxproj 文件中，而是存储在 .vcxproj.user 文件中。如果不是为了这个，那么修改 qmake 可能是一种选择，即使它可能不值得付出努力。

# yii - 使用 CDbCriteria 计算记录的困难时间

> ID：12848982
> 
> 赞同：3
> 
> 时间：2012-10-11T21:42:26.643
> 
> 标签：yii, count, criteria

当我尝试使用 CDbCriteria 来计算记录时，我得到**活动记录“Hotels”正在尝试选择无效列“count(t. `id`) as `count`”。**

这是我的代码：

```
$criteria = new CDbCriteria();
        $criteria->select = 'count(t.id) as `count`, t.`keywords`, min(offers.first_bookin) as first_bookin';
        $criteria->with = array('offers');
        $criteria->group = 'offers.hotels_id';
        $criteria->compare('first_bookin','>' . date('Y-m-d'));
        $criteria->together = true;

        $hotelItems = Hotels::model()->findAll($criteria); 
```

这是我在酒店模型中定义的关系：

```
return array(
            'headers' => array(self::HAS_MANY, 'Headers', 'hotels_id'),
            'offers' => array(self::HAS_MANY, 'Offers', 'hotels_id'),
        ); 
```

我在这里和其他一些网站上发了很多帖子，但似乎没有任何效果。我尝试使用 count(*)、count(id)，我尝试将 select 属性拆分为一个数组。每次我得到同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T05:48:03.007

只需从别名中删除**反引号，计数就可以了。**当然，如果您想轻松访问计数，则必须将其声明为类变量，如 onkarjanwa 所述。

如果您检查错误的来源，那就是这个函数：[`getColumnSelect`](https://github.com/yiisoft/yii/blob/master/framework/db/ar/CActiveFinder.php#L921 "https://github.com/yiisoft/yii/blob/master/framework/db/ar/CActiveFinder.php#L921")of `CActiveFinder`， select for count 应该满足这一行，在`getColumnSelect`：

```
elseif(preg_match('/^(.*?)\s+AS\s+(\w+)$/im',$name,$matches)) // if the column is already aliased 
```

但是由于别名中的反引号，它不匹配，并且会引发错误。所以你`select`应该没有别名的反引号：

```
$criteria->select = 'count(t.id) as count, t.`keywords`, min(offers.first_bookin) as first_bookin'; 
```

当我对此进行测试时，我在您的 中遇到了另一个错误`compare`，因此您应该将其更改为：

```
$criteria->compare('offers.first_bookin','>' . date('Y-m-d')); // can't use the alias in where clause 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T05:04:34.110

你需要声明一个变量`$count`，因为 Yii 不会自动启动不是表列的变量，所以你不能在没有声明的情况下使用任何新变量。

你可以通过这样做来解决你的问题。

声明一个模型变量：

```
class Hotels extends CActiveRecord
{
    public $count;
    ....

} 
```

# sql - SQL Server Management Studio 中的标准模板

> ID：12848983
> 
> 赞同：2
> 
> 时间：2012-10-11T21:42:33.163
> 
> 标签：sql, sql-server, ssms

我正在一个团队中工作，该团队有许多开发人员使用 SQL Server，开发存储过程、函数等。

我希望 SQL 之间的布局一致，具有版权的相同标题等。所以我需要一个标准的 SQL 模板。我知道在 Visual Studio 中可以共享模板。

如何为 SQL Server Management Studio 生成这样的模板，以便在开发人员之间共享？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T22:15:11.977

我就是这样做的：

*   我的模板的物理位置在（Win7 SQL Server Management Studio 2012）：

`C:\Users\ys\AppData\Roaming\Microsoft\SQL Server Management Studio\11.0\Templates\Sql`

*   我在其中创建了自己的文件夹（`00_Mine`）

*   创建了一个 git 仓库

*   要求其他开发人员从中撤出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T21:53:37.487

在 SQL Server Management Studio 中，按 Ctrl-Alt-T 或转到菜单、视图、模板资源管理器

它将列出所有模板。但是，从 SSMS 中，没有简单的方法可以通过拖放向其中添加模板，您可以创建新模板并将它们放入文件夹中，例如`_WORK_`.

模板实际存在于（对于 2008 R2）:`C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\SqlWorkbenchProjectItems\Sql`中，因此您可以简单地将文件和文件夹放入其中或使用组策略推送给团队成员。模板按字母顺序排序，因此是`_WORK_`上面的建议。 ***注意：***需要重新启动 SSMS 才能获取模板文件夹更改。

这是一篇文章：[使用 SQL Server 模板](http://www.databasejournal.com/features/mssql/article.php/3927396/Using-SQL-Server-Templates.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:39:59.673

对模板功能用户的问题：如果您有可能为以下数据设置占位符，您认为这是否会有所帮助：当前数据库、当前用户、日期/时间（其他？），所以，当您打开模板时，这些占位符将替换为适当的值。我开发了一个插件，前段时间就有了这个想法，但我不知道是否有人真的需要它。

# java - 从 Spring Controller 返回自定义对象

> ID：12848989
> 
> 赞同：0
> 
> 时间：2012-10-11T21:43:35.427
> 
> 标签：java, spring, model-view-controller

我正在从一个网页发送一个 ajax 请求，该请求被映射到我的控制器中的一个方法。我返回我已设置为自定义 MessageForm 对象的此方法的类型，该对象是我在方法中创建的。

问题是我在发送 ajaz 请求时收到 500 内部服务器错误，但不知道为什么。

我是否必须从控制器方法返回特定对象？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:52:03.133

一个标准的控制器方法将参考与之关联的视图返回一些东西（例如，一个`ModelAndView`或只是一个`String`匹配的视图名称）。

如果要返回自定义对象，则需要指定响应正文是内容，而不是视图引用。您可以使用`@ResponseBody`注释来执行此操作。

```
@RequestMapping(value = "getSomeList.do", method = RequestMethod.GET)
public @ResponseBody List<String> getSomeList() {
    List<String> myList = getMyList();

    return myList;
} 
```

结合[Jackson](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/bind/annotation/ResponseBody.html)之类的库，您可以将其序列化为 JSON，并使其在您的视图中易于解析。

# wcf - 输入参数上的命名空间错误

> ID：12848993
> 
> 赞同：1
> 
> 时间：2012-10-11T21:43:55.203
> 
> 标签：wcf

这应该是直截了当的，但是经过大量论坛浏览后，我仍然没有找到解决方案。开始：

我有一个相当简单的接口定义如下：

```
[ServiceContract(Namespace = "test-contract")]
public interface IDebitor : Source.BaseInterface.IBase
{
    [OperationContract]
    DebitorResult CreateUpdateDebitorPerson(DebitorPerson person)
}

[DataContract(Namespace = "test-person")]
public class DebitorPerson
{
    #region FIELDS

    // Line
    string senderSystemId;
    string firstName;
    string lastName;
    string address1;
    string address2;
    string postalCode;
    string city;
    string areaCode;
    string cprNumber;
    string payingCustomerId;
    string paymentCode;
    string languageCode;

    #endregion

    #region Propperties

    [DataMember(IsRequired = true, Order = 1)]
    public string SenderSystemId
    {
        get { return senderSystemId; }
        set { senderSystemId = value; }
    }

    [DataMember(IsRequired = true)]
    public string FirstName
    {
        get { return firstName; }
        set { firstName = value; }
    }

    [DataMember(IsRequired = true)]
    public string LastName
    {
        get { return lastName; }
        set { lastName = value; }
    }

    [DataMember(IsRequired = true)]
    public string Address1
    {
        get { return address1; }
        set { address1 = value; }
    }

    [DataMember(IsRequired = false)]
    public string Address2
    {
        get { return address2; }
        set { address2 = value; }
    }

    [DataMember(IsRequired = true)]
    public string PostalCode
    {
        get { return postalCode; }
        set { postalCode = value; }
    }

    [DataMember(IsRequired = true)]
    public string City
    {
        get { return city; }
        set { city = value; }
    }

    [DataMember(IsRequired = true)]
    public string AreaCode
    {
        get { return areaCode; }
        set { areaCode = value; }
    }

    [DataMember(IsRequired = true)]
    public string CprNumber
    {
        get { return cprNumber; }
        set { cprNumber = value; }
    }

    [DataMember(IsRequired = false)]
    public string PayingCustomerId
    {
        get { return payingCustomerId; }
        set { payingCustomerId = value; }
    }

    [DataMember(IsRequired = true)]
    public string PaymentCode
    {
        get { return paymentCode; }
        set { paymentCode = value; }
    }

    [DataMember(IsRequired = false)]
    public string LanguageCode
    {
        get { return languageCode; }
        set { languageCode = value; }
    }

    #endregion
} 
```

该服务运行得很好，但相应的soap xml不是我所期望的。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:test="test-contract" xmlns:test1="test-person">
   <soapenv:Header/>
   <soapenv:Body>
      <test:CreateUpdateDebitorPerson>
         <!--Optional:-->
         <test:person>
            <test1:Address1></test1:Address1>
            <!--Optional:-->
            <test1:Address2></test1:Address2>
            <test1:AreaCode></test1:AreaCode>
            <test1:City></test1:City>
            <test1:CprNumber></test1:CprNumber>
            <test1:FirstName></test1:FirstName>
            <!--Optional:-->
            <test1:LanguageCode></test1:LanguageCode>
            <test1:LastName></test1:LastName>
            <!--Optional:-->
            <test1:PayingCustomerId></test1:PayingCustomerId>
            <test1:PaymentCode></test1:PaymentCode>
            <test1:PostalCode></test1:PostalCode>
            <test1:SenderSystemId></test1:SenderSystemId>
         </test:person>
      </test:CreateUpdateDebitorPerson>
   </soapenv:Body>
</soapenv:Envelope> 
```

为什么元素属于测试合同而不是接口中定义的测试人员？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T21:52:25.740

因为元素本身（“<person>”）是在服务合同级别定义的，而不是在数据合同级别。你要么得到 <test-contract:person> （如果你在服务中使用它）或 <test-person:DebitorPerson> （如果你用 DataContractSerializer 以独立的方式序列化实例）。以某种方式混合两者（例如 <test-person:person>）会不一致 - 为什么命名空间应该来自 DataContract 级别，而名称应该来自 ServiceContract 级别？

# sdk - Rally Analytics 2.0 - 错误 413：请求实体太大

> ID：12848997
> 
> 赞同：1
> 
> 时间：2012-10-11T21:44:10.733
> 
> 标签：sdk, analytics, rally

我一直在编写一个应用程序，它使用回溯工具来获取项目在某个日期在其中的总点数。提取此信息的请求如下所示：

```
getPointsOn: function(date, iOIDs, callback) {
    var params    = {};
    params.find   = '{ Iteration: {$in: [' + iOIDs + ']}, PlanEstimate: { $gt: 0 }, __At: "' + date.toISOString() + '" }';
    params.fields = '[ "PlanEstimate", "Project" ]';

    Ext.Ajax.cors = true;
    Ext.Ajax.request({
        url: App.qURL,
        method: 'GET',
        params: params,
        withCredentials: true,
        success: function(response) {
            var points = {};
            Ext.Array.each(Ext.JSON.decode(response.responseText).Results, function(US) {
                if (points[US.Project] == undefined) points[US.Project] = 0;
                points[US.Project] += US.PlanEstimate;
            });
            callback(points);
        },
        failure: function() {
            console.log('Ajax Failed');
            callback({});
        }
    });
} 
```

它返回一个带有 Project/Points 对的对象，并且在将 1-2 次迭代 ObjectID 传递给它时完美地工作。问题是当我开始请求更大的数据集时。我一直收到“请求实体太大”错误。我认为这是请求本身的问题，尽管我不确定它如何“太大”。此错误的可能原因是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:32:12.580

您可以执行 Ext.util.Cookies.clear(cookieName) 来删除 cookie。通常，ALM 的最大请求大小为 8k，因此大型 pref cookie 与大量迭代 oid 可能会达到该限制。

此外，在 SDK 2.0p4 中，还有一种更全面支持的方式来访问 Lookback API。 [http://developer.rallydev.com/apps/2.0p4/doc/#!/api/Rally.data.lookback.SnapshotStore](http://developer.rallydev.com/apps/2.0p4/doc/#!/api/Rally.data.lookback.SnapshotStore)

```
Ext.create('Rally.data.lookback.SnapshotStore', {
    listeners: {
        load: function(store, data, success) {
            //process data
        }
    },
    fetch: ['PlanEstimate', 'Project'],
    filters: [
        {
            property: 'Iteration',
            operator: 'in',
            value: iOIDS //an array
        },
        {
            property: 'PlanEstimate',
            operator: '>',
            value: 0
        },
        {
            property: '__At',
            value: date.toISOString()
        },
    ],
    autoLoad: true
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:05:51.263

大型状态元素，例如从选取器中选择的值，应该与 Ext.state.LocalStorageProvider 实例一起存储，而不是 Ext.state.CookieProvider。假设不需要发送 cookie 来完成查询请求。