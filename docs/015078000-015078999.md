# StackOverflow 问答 15078000-15078999

# linux - 使用 ncurses 在 Linux 中构建 HelloWorld C++ 程序

> ID：15078001
> 
> 赞同：6
> 
> 时间：2013-02-25T22:46:13.940
> 
> 标签：linux, ncurses

我成功跑了`sudo apt-get install libncurses5-dev`

然后在我的 Eclipse 窗口中尝试构建以下`HelloWord.cpp`程序：

```
#include <ncurses.h>

int main()
{
    initscr();                 /* Start curses mode     */
    printw("Hello World !!!"); /* Print Hello World    */
    refresh();                 /* Print it on to the real screen */
    getch();                   /* Wait for user input */
    endwin();                  /* End curses mode    */

    return 0;
} 
```

我收到以下错误：

```
Invoking: GCC C++ Linker
g++ -m32 -lncurses -L/opt/lib -o "Test_V"  ./src/curseTest.o ./src/trajectory.o ./src/xJus-epos.o   -lEposCmd
/usr/bin/ld: cannot find -lncurses
collect2: error: ld returned 1 exit status
make: *** [Test_V] Error 1 
```

看起来编译器正在搜索 ncurses 库但找不到它？我检查`/usr/lib`了那里的库不存在，所以我需要手动链接那里的 ncurses 库 - 我认为 get-apt 安装程序会自动执行此操作吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-22T12:44:39.763

```
g++ HelloWorld.cpp -lncurses -o HelloWolrd 
```

如果您有 32 位计算机，`gcc compile m32 auto`. 如果你有一台 64 位的机器并且你想编译 32 位你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-18T11:25:13.340

您的论点顺序不正确。在指定要链接的库之前，您必须先指定所有源文件，然后再指定链接器搜索目录。你的命令应该是这样的：

```
g++ HelloWorld.o -L/opt/lib -lncurses -o HelloWorld 
```

取自[@ChrisDodd 的评论](https://stackoverflow.com/questions/15078001/building-helloworld-c-program-in-linux-with-ncurses#comment21206452_15078001)：

> 您的选项顺序错误 -`-L`必须在之前`-l`，并且两者都必须在之后`.o`

# python - ubuntu下重新安装numpy

> ID：15078002
> 
> 赞同：0
> 
> 时间：2013-02-25T22:46:17.403
> 
> 标签：python, ubuntu, numpy

不知何故，我设法破坏了一个工作`numpy`库（我试图安装一些优化库）。如果我`import numpy`在 ipython 中运行，那么我会得到`ImportError: libblas.so.3gf: wrong ELF class: ELFCLASS32`.

重新安装 numpy 没有帮助（使用`sudo-apt get remove/install`）。

我看到问题是 libblas 是 32 位版本。我在突触包管理器中没有找到 64 版本。

另一个令人困惑的部分是，ipython 说错误在

```
 `/home/andrey/.local/lib/python2.7/site-packages/numpy/linalg/linalg.py` 
```

但是当我删除 numpy 时，这个文件夹仍然存在。

你知道我该如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:56:28.533

`~/.local/lib/python2.7`是每个用户的安装目录，当然你不能使用`apt-get`. 由于 numpy 显然有 64 位，它需要 64 位库，因此您需要在系统上安装 64 位库。

# c++ - 在 Qt 图形视图中锁定选择

> ID：15078003
> 
> 赞同：1
> 
> 时间：2013-02-25T22:46:18.620
> 
> 标签：c++, qt, qt4

是否可以在 Qt 图形视图中“锁定”选择，使点击无效？

我的场景当前可以处于不同的状态，并且在某些状态下，即使点击发生，选择也不应该改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T23:26:24.657

`mousePressEvent(..)`在连接到场景的视图中重新实现以忽略事件。

```
void MyView::mousePressEvent(QMouseEvent* event)
{
    if ( ignoreClickFlag && ( dragMode() == QGraphicsView::RubberBandDrag ||
                              items( event->pos() ).size() ) ) {
        event->accept();
        return;
    }

    QGraphicsView::mousePressEvent( event );
} 
```

`MyView::ignoreClickFlag`只是一个布尔成员，您可以在插槽中设置。

因此，如果忽略模式打开，并且视图处于橡皮筋拖动模式和/或光标下有节点，则单击将被忽略。另一种说法是，如果用户可以执行选择拖动和/或光标下有项目，则忽略单击，但如果视图处于平移拖动模式并且光标下没有项目，则不会。

# command-line - 从前端获取命令行参数

> ID：15078007
> 
> 赞同：0
> 
> 时间：2013-02-25T22:46:28.263
> 
> 标签：command-line, sane

我正在尝试查看从 xsane 发送到 scanimage 的确切命令行参数。我尝试了 ltrace，但在日志中的任何地方都找不到“scanimage”。一般来说，假设您知道某些 GUI 程序是命令行专业人士的前端

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:28:58.567

如果`xsane`调用`scanimage`，你会发现`scanimage`通过这个脚本临时替换可执行文件：

```
#!/bin/bash

exec &>/tmp/trace
echo "$0" "$@" 
```

然后，

```
chmod +x /usr/bin/scanimage
xsane
cat /tmp/trace 
```

# actionscript-3 - 无法在 Flash AS3 中将自定义事件从一个类分派到另一个类

> ID：15078011
> 
> 赞同：0
> 
> 时间：2013-02-25T22:46:32.957
> 
> 标签：actionscript-3, flash, class, events, dispatch

这是我的自定义事件类：

```
package{
 import flash.events.Event;

 public class PetEvent extends Event{
      public static const ON_CRASH:String = "onCrash";

      public function PetEvent(type:String, bubbles:Boolean=true, cancelable:Boolean=false):void{
           super(type, bubbles, cancelable);
      }

      override public function clone():Event {
           return new PetEvent(type, bubbles, cancelable);
      }
 }
} 
```

这是我的游戏处理程序。我创建了一个我想从中收听的 Surf 类的新实例。

```
package {
import flash.display.MovieClip;
import flash.events.Event;

public class GameHandler extends MovieClip {
    public var newGame:Surf;

    public function GameHandler() {
        newGame = new Surf();
        newGame.addEventListener(PetEvent.ON_CRASH, onCrash);
        addChild(newGame);
    }

    public function onCrash(petEvent:PetEvent):void{
        trace("MPAM");
        var gameOver:GameOver = new GameOver(stage.stageWidth, stage.stageHeight);
        addChild(gameOver);

        newGame = null;
    }
}
} 
```

以及来自 Surf 类的相关行：

```
public function startSurfing(timerEvent:TimerEvent):void
{
    moveCatandDog();
    for each ( var boat:Boat in armada)
    {
        boat.moveBoat(boatSpeed);
        if ( cat.hitTestObject(boat) || dog.hitTestObject(boat) )
        {
            dispatchEvent( new PetEvent(PetEvent.ON_CRASH) );
            gameTimer.stop();
        }
    }
} 
```

因此，当 Surf 检测到崩溃时，我希望它将事件发送到 GameHandler 并且 GameHandler 将创建一个 GameOver 实例。

我已经尝试了一切，我什至没有得到任何痕迹。我通常不问问题，但这是针对 uni 项目的，我的时间不多了。我真的很感激任何反馈。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:07:41.520

问题解决了！

我不得不将我的文档类更改为 GameHandler 并创建一个公共的舞台静态变量。

以前我将 Surf 作为我的文档类，因为我在舞台上设置了一些键盘监听器。

所以 PetEvent 和 Surf 中的调度是正确的。我更改了 GameHandler，如下所示，在 StackOverflow 中找到了另一个解决方案。

在 GameHandler 的构造函数中，如果舞台准备就绪（不为空），它会将其设置为公共静态变量 STAGE（通过 init 函数），否则它会添加一个侦听器，当舞台准备就绪时，它会执行相同的操作并删除听众。

```
package {
import flash.display.MovieClip;
import flash.events.Event;
import flash.display.Stage;

public class GameHandler extends MovieClip {
    public var newGame:Surf;

    public static var STAGE:Stage;

    public function GameHandler() {
        if (stage){
            init();
        } else {
            addEventListener(Event.ADDED_TO_STAGE, init, false, 0, true);
        }

        newGame = new Surf();
        newGame.addEventListener(PetEvent.ON_CRASH, onCrash);
        addChild(newGame);
    }

    private function init(e:Event=null):void{
        removeEventListener(Event.ADDED_TO_STAGE, init);
        // store stage reference when stage ready  
        STAGE=stage;
    }

    public function onCrash(petEvent:PetEvent):void{
        var gameOver:GameOver = new GameOver(stage.stageWidth, stage.stageHeight);
        addChild(gameOver);

        newGame = null;
    }
}
} 
```

我将 GameHandler 导入到 Surf 中：

```
import GameHandler; 
```

所以我可以将 Surf 中的侦听器设置为 GameHandler.STAGE.addEventListener (...)

谢谢大家的建议！

# javascript - 通过 chrome 扩展 (JS) 将图像添加到 HTML

> ID：15078018
> 
> 赞同：1
> 
> 时间：2013-02-25T22:47:18.090
> 
> 标签：javascript, image, google-chrome, dom

我做了一个扩展，需要在每一页上放置一个固定的图像。内容脚本是：

```
imgTop = chrome.extension.getURL('top.png');
var top = document.createElement("img");
top.src=imgTop;
top.position='fixed';
top.zIndex='2353445';
top.top='200';
top.left='20';
document.getElementsByTagName('body')[0].appendChild(top); 
```

我得到错误：`Uncaught Error: NotFoundError: DOM Exception 8`

我尝试过但不起作用的方法：

*   添加样式，例如`top.style.position`.
*   使用`document.body`.

我知道我可以使用`innerHTML`，但它真的很乱......

知道有什么问题吗？或者另一种注入图像的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:12:27.410

The problem here seems to be that your variable is named `top`, which Chrome is confusing with the `window.top` property. Change the variable name to something else and it should work, like this:

```
var topImage = document.createElement('img');
topImage.src = chrome.extension.getURL('top.png');
topImage.style.position = 'fixed';
topImage.style.zIndex = '2353445';
topImage.style.top = '200px';
topImage.style.left = '20px';
document.body.appendChild(topImage); 
```

Some other things: Style properties are accessed through `element.style.property`, and if you're doing things to the body just use `document.body`. Also, no need to have a separate variable for the image URL, just call it directly for the `topImage.src` like here, especially if you're only calling it just once.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:38:56.833

您是否将 top.png 添加到 manifest.json 中？

您需要定义 web_accessible_resources 属性并列出资源（以及这些资源的可选内容安全策略）。

chrome 扩展文档网址：[https ://developer.chrome.com/extensions/manifest.html#web_accessible_resources](https://developer.chrome.com/extensions/manifest.html#web_accessible_resources)

# c# - 将文本框转换为浮动

> ID：15078019
> 
> 赞同：1
> 
> 时间：2013-02-25T22:47:18.433
> 
> 标签：c#, textbox, double

我一直在寻找不同的方法来做到这一点，但我仍然得到同样的错误：

我试过的：

```
float e = (float)Convert.ToDouble(e_textBox.Text);
bool valid = float.TryParse(e_textBox.Text.ToString(), out e); 
```

我得到这个错误：

```
Error   1   Cannot implicitly convert type 'float' to 'System.EventArgs' 
```

我做错了吗？谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T22:48:40.727

我猜您的代码存在于事件处理程序中。您的句柄的参数之一将是`EventArgs e`：

```
public void OnClick(object sender, EventArgs e)
{
    float e = (float)Convert.ToDouble(e_textBox.Text);
    bool valid = float.TryParse(e_textBox.Text.ToString(), out e);
} 
```

您只需要想出一个新的变量名称（或将参数重命名为 e 以外的名称）：

```
public void OnClick(object sender, EventArgs eargs)
{
    float e = (float)Convert.ToDouble(e_textBox.Text);
    bool valid = float.TryParse(e_textBox.Text.ToString(), out e);
} 
```

# oracle-adf - 带参数的 RichCommandMenuItem

> ID：15078020
> 
> 赞同：0
> 
> 时间：2013-02-25T22:47:18.590
> 
> 标签：oracle-adf

我在我的 jspx 上添加了一个 RichCommandMenuItem，但我不知道传递 URL 参数。这是我的菜单源代码。

```
RichCommandMenuItem menuPage1 = new RichCommandMenuItem();
menuPage1.setId("page1");
menuPage1.setText("Page 1");
menuPage1.setActionExpression(getMethodExpression("page1?par=123")); 
```

我想用我的 RichCommandMenuItem 发送一个参数。如果您有任何想法或建议，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:07:12.727

`Command`控件用于 11g 中的 ADF 应用程序中的导航。 `Go`控件用于导航到外部 URL。因此，您使用了错误类型的组件，请改用 RichGoMenuItem，它是 setDestination 方法。

[http://jdevadf.oracle.com/adf-richclient-demo/docs/apidocs/oracle/adf/view/rich/component/rich/nav/RichGoMenuItem.html](http://jdevadf.oracle.com/adf-richclient-demo/docs/apidocs/oracle/adf/view/rich/component/rich/nav/RichGoMenuItem.html)

# matlab - MATLAB：嵌套的for循环每次连续迭代都需要更长的时间

> ID：15078021
> 
> 赞同：3
> 
> 时间：2013-02-25T22:47:19.370
> 
> 标签：matlab, loops, for-loop

**/edit：循环不会变慢。我没有正确把握时间。见拉斯曼的回答。**

我正在为一个有点长而复杂的函数循环 3 个参数，我注意到两件我不明白的事情：

1.  每次连续迭代执行都会变慢，尽管该函数只返回一个结构（我只需要一个字段），每次迭代都会覆盖它。
2.  分析器显示`end`最里面的语句`for`需要很长时间。

考虑以下示例（我知道这可以很容易地向量化，但据我所知，我调用的函数不能）：

```
function stuff = doSomething( x, y, z )
    stuff.one = x+y+z;
    stuff.two = x-y-z;
end 
```

以及我如何执行该功能

```
n = 50;
i = 0;
currenttoc = 0;
output = zeros(n^3,4);
tic
for x = 1:n
    for y = 1:n
        for z = 1:n
            i = i + 1;
            output(i,1) = x;
            output(i,2) = y;
            output(i,3) = z;
            stuff = doSomething(x,y,z);
            output(i,4) = stuff.one;
            if mod(i,1e4) == 0 % only for demonstration, not in final script
                currenttoc = toc - currenttoc;
                fprintf(1,'time for last 10000 iterations: %f \n',currenttoc)
            end
        end
    end
end 
```

我怎样才能加快速度？为什么每次迭代都比前一次花费更长的时间？我很确定这是一个可怕的编程，对此感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:01:03.163

当我用和 plot替换对的调用`doSomething`时，我发现每次调用都需要越来越长的时间，显然。`output(i,4)=toc;``diff(output(:,4))``fprintf`

删除`if-clause`每次迭代的收益大约需要相同的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:07:25.527

`doSomething`如果返回多个输出变量而不是结构，它会快得多

```
function [out1,out2] = doSomething( x, y, z )
    out1 = x+y+z;
    out2 = x-y-z;
end 
```

它在每次后续迭代中变慢的事实很奇怪，我对此没有任何解释，但希望这至少能让你加快一些速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T23:08:38.467

因此，当我将 if 语句替换为：

```
if mod(i,1e4) == 0 % only for demonstration, not in final script
    fprintf(1,'time for last 10000 iterations: %f \n',toc); tic;
end 
```

我认为对 toc 的操作可能会导致问题

# vb.net - 需要帮助为搜索机器人 VB 2010 生成随机词

> ID：15078022
> 
> 赞同：0
> 
> 时间：2013-02-25T22:47:20.887
> 
> 标签：vb.net

所以我正在尝试制作一个使用随机词的搜索机器人。对于一次要执行的搜索次数，我使用最小为 2 和最大为 30 的增量值。

我在想这样的事情，但它似乎也不会那么好，因为它不会真正生成一个更好的随机字符串：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim SE As String
    SE = NumericUpDown1.Value
    Select Case SE
        Case "2"

    End Select
End Sub 
```

如果有人可以帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:48:59.657

您可以使用[`Random`](http://msdn.microsoft.com/en-us/library/system.random.aspx)该类及其方法[`Next`](http://msdn.microsoft.com/en-us/library/2dx6wyd4.aspx)来创建随机数。

```
Dim rnd As New Random()
Dim SE As String = rnd.Next(2, 31).ToString() 
```

请注意，随机数生成从种子值开始。如果重复使用相同的种子，则会生成相同的数字序列。

因此，如果要使用循环，则不应在循环中创建随机实例，而应在循环之外创建。

但是，我不确定您要创建什么样的单词。我怀疑您是否想要“2”和“30”之间的数字字符串，即使您的代码建议它也是如此。

**根据您的评论**更新****

 **> 2 和 30 是一次要进行多少次搜索，我想从 60-70 个单词列表中随机化单词

所以我假设你想要一个随机数（在 2-30 之间）来自字符串列表的随机词：

```
Dim words = {"word 1", "word 2", "word 3", ".....", "word 60"}
Dim rnd As New Random()
Dim howMany As Int32 = rnd.Next(2, 31)
Dim randomWords As New List(Of String)
For i As Int32 = 1 To howMany
    Dim nextRandomIndex = rnd.Next(0, words.Count)
    randomWords.Add(words(nextRandomIndex))
Next 
```**

# python - 在 Python 中裁剪图像：Image.crop() 与 Image.transform()？

> ID：15078026
> 
> 赞同：0
> 
> 时间：2013-02-25T22:47:35.160
> 
> 标签：python, image-processing, python-imaging-library

我想通过选择图像的一个子区域来裁剪图像以变成一个新的图像文件。

根据我在 PIL 文档中看到的内容，我试图在两种方法之间做出决定。

### 对于这两种方法：

```
 # assume I already have a PIL-opened image called original_image
    # assume I have a crop_box tuple for the area to crop, e.g. (0, 0, 100, 100) 
```

## 方法

1.  直接裁剪原始图像，然后将返回的裁剪区域转换为新文件。似乎我放弃了有关原始图像的所有模式数据/其他元数据，然后必须重新加载？

    ```
    cropped_image = original_image.crop(crop_box)
    # process cropped version as needed 
    ```

2.  做一个`image.transform()`我选择一个子区域

    ```
    # assume I have an output size of (100, 100)
    cropped_image = original_image.transform(size, Image.EXTENT, crop_box)
    # process cropped version as needed 
    ```

就速度、数据保存或我遗漏的另一个重要因素而言，一种方法是否优于另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:01:31.150

以下来自函数下[的 PIL.Image 文档](http://www.pythonware.com/library/pil/handbook/image.htm)`transform`：

> 它比作物稍慢

Plus`crop`更简单，并显示您的意图。这就是我会使用的。

# java - 无法使 PreferenceFragment 工作（编译错误）

> ID：15078029
> 
> 赞同：5
> 
> 时间：2013-02-25T22:47:44.430
> 
> 标签：java, android, fragment, android-preferences

![在此处输入图像描述](../Images/98a0608f7eec8a3309bec5cb1c7b78d9.png)

当我尝试编译我的项目时出现错误：“FragmentTransaction 类型中的方法 add(int, Fragment) 不适用于参数 (int, FragmentPreferences)”。据我所知，PreferenceFragment 是一个片段？我正在为 android 4.0 开发，但我必须使用 android-support-v4 库，因为我的项目还包括 ViewPager。[我在http://developer.android.com/guide/topics/ui/settings.html#Fragment](http://developer.android.com/guide/topics/ui/settings.html#Fragment)找到了这个例子：

```
// Display the fragment as the main content.
        getFragmentManager().beginTransaction()
                .replace(android.R.id.content, new SettingsFragment())
                .commit(); 
```

但我无法让它工作。

我的代码：

```
case R.id.menu_settings:
    FragmentPreferences prefs = new FragmentPreferences();
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.add(android.R.id.content, prefs);
    ft.commit();
    break; 
```

片段偏好：

```
public class FragmentPreferences extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);
    }

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-25T22:51:10.313

那是因为`PreferenceFragment`extends `android.app.Fragment`，而不是 the`android.support.v4.app.Fragment`所`android.support.v4.app.FragmentTransaction`期望的。

到目前为止，还没有`PreferenceFragment`支持库的官方反向移植。但是，您可以使用[UnifiedPreferences](https://github.com/saik0/UnifiedPreference)等库来填补这一空白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:49:22.417

检查`import`代码顶部的语句。您正在使用的其中一个类可能来自`support`，而另一个则不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-23T12:49:54.423

这是 PreferenceFragment 到支持库的非官方反向移植。上次更新是 2015 年 2 月，它与棒棒糖设备兼容。[android-support-v4-preferencefragment](https://github.com/kolavar/android-support-v4-preferencefragment)

```
import android.support.v4.preference.PreferenceFragment; 
```

# css - 使用 Chrome 实时编辑 CSS

> ID：15078031
> 
> 赞同：3
> 
> 时间：2013-02-25T22:47:53.550
> 
> 标签：css, google-chrome

我正在寻找能够让我从浏览器实时编辑 CSS 的扩展程序或工具。我安装了运行良好的 Stylebot，但每当我保存新的 CSS 时，它只会在浏览器中保留样式表，而不是 CSS 文件或 HTML 文件。我不知道如何对 CSS 文件本身进行更改，而且我不确定 Stylebot 是否有可能。

任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:49:43.597

这对我有用[http://tin.cr/](http://tin.cr/) 它真的很好，就像安装扩展一样简单。快乐编码:)

您所做的任何更改都已添加到 css 文件中。有点像反向 livereload :)

# authentication - 如何在不提示用户批处理的情况下以不同用户身份运行

> ID：15078035
> 
> 赞同：3
> 
> 时间：2013-02-25T22:48:03.470
> 
> 标签：authentication, powershell, batch-file, remote-server

我有一个批处理文件，它以不同的用户身份运行另一个批处理文件。

我还需要远程运行调用批处理文件。在本地，我可以绕过必须使用 /savecred 选项输入密码，但是当我运行批处理远程时，我仍然会提示输入密码，但它会出现连接超时，因为我被带回了 powershell 提示符我连接的机器。

我的批次看起来像这样：

```
runas.exe  /env /savecred /user:sqlsvr_dba ".\myBatch.bat" 
```

如何在本地计算机上运行远程批处理而无需输入密码？我一直在尝试为此使用powershell。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:09:56.957

同样的问题也困扰着我 :-) 我试图用 schtasks 和 eventcreate 解决这个问题。在这里我发布了我的解决方案：

[http://ss64.org/viewtopic.php?id=1539](http://ss64.org/viewtopic.php?id=1539)

如果你想在远程机器上运行脚本，你也可以尝试使用 wmic：

[http://ss64.org/viewtopic.php?id=1495](http://ss64.org/viewtopic.php?id=1495)

希望这些对您有所帮助。

# ssis - SSIS OLEDB SQL 命令执行很慢

> ID：15078040
> 
> 赞同：0
> 
> 时间：2013-02-25T22:48:22.867
> 
> 标签：ssis

我有超过百万条记录的表。

1.  当我在 SSMS 中执行查询时，在任何时间点肯定需要大约 1:24 不到 2 分钟，并返回大约 600,000 条记录。
2.  SSIS 需要几个多小时，事实上我只能导出一次。

这是示例sql：

```
SELECT distinct 
A.Col1, A.Col2, A.Col3, A.Col4, A.Col5, A.Col6, A.Col7, B.Col3
FROM tblA  A
inner join tblB B on A.Col1 = B.col1 and 
A.Col2 = 'AB' AND A.Col3 Not In ('A','B','C') AND 
A.Col3 In ('FPC','FPE','PRN','SUB','RVW','FPO','FEV','PRM') 
```

注意：select sql 查询中的所有列（以及 where 子句中提到的列）都存在索引。

在 SSIS 中，

1.  我在控制流上有数据流任务。
2.  带有 SQL 查询命令的 OleDB 源。
3.  OleDB 目标表。

什么可能导致 SSIS 延迟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:36:04.650

根据我的经验，这可能是以下两种情况之一：

1.  这可能是所谓的参数嗅探。这仅仅意味着有时它将一个糟糕的（慢速）查询计划绑定到查询+参数，并且由于缓存这个糟糕的计划可能会“卡住”并不断地重新用于特定的应用程序或用途。检测这种情况的方法是使用 SQL Profiler 捕获 SSIS 任务查询的查询计划，然后将其与快速执行的 SSMS 版本的查询计划进行比较。如果查询计划明显不同，那么您可能遇到了参数嗅探问题。

2.  但是，对于 SSIS，有一个更常见的问题（在我的评论/问题和 Mike Honey 的回答中提到）：因为 SSIS 使用管道架构，所以您只需要链中的一个慢速组件来停止整个管道。组件速度慢的一个非常常见的原因是没有为数据流任务使用最佳任务设置。

使用“快速加载”是一种可能性，但是根据我的经验，还有另一种设置在网络上流水线时更常见，那就是“DefaultBufferMaxRows”。默认值是 10,000，我总是发现对于网络连接来说太高了，在这些情况下可能应该在 100 到 1000 之间。

这是控制流中目标 DFT（数据流任务）的属性，因此要更改它只需在控制流视图中选择该任务的图标。您应该在属性窗格中看到 DefaultBufferMaxRows（在“Misc”下）。您可能还想按比例降低“DefaultBufferSize”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T02:44:14.693

您的问题很可能与您的 OLE DB 目标和它可以接受行的速率有关。您可以通过测试已删除 OLE DB 目标的包副本来确认这一点。

假设是这种情况，最常见的原因是未在传递到 SQL Server 的 OLE DB 目标中使用“快速加载”选项。

# ruby-on-rails - Rails - 从 yaml 文件加载内容的文件路径

> ID：15078052
> 
> 赞同：1
> 
> 时间：2013-02-25T22:49:10.650
> 
> 标签：ruby-on-rails, text, view, yaml

我有各种以静态长格式文本为内容的文本文件。现在我将它们存储在配置文件夹中的单独“内容”文件中。例如“../config/content/content1.yml”“../config/content/content2.yml”等等。

我想在我的应用程序中将这些文件串在一起。所以在我的控制器中，我有一些变量试图提取每个文件的内容，例如

```
@content1 = YAML.load_file("#{Rails.root}/app/config/content/content1.yml")
@content2 = YAML.load_file("#{Rails.root}/app/config/content/content2.yml") 
```

然后我尝试将该变量加载到我的视图中

```
<%= @content1 %>
<%= @content2 %> 
```

不过，这和我尝试过的所有其他方法似乎都不起作用。我真的只是想让文本显示在我的视图中。任何帮助我指出正确方向的帮助将不胜感激。我对rails仍然很不满意。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-25T23:07:13.703

我不知道您为什么不想将这些数据存储在数据库中，但让我们只使用视图来描述您需要什么。

* * *

根据评论，你需要的是部分。

例子：

让我们有文件`app/views/content/editor1/paragraph1.html`：

```
 Example paragraph 
```

然后在您看来，您可以使用以下方法渲染它：

```
<%= render partial: 'content/editor1/paragraph1' %> 
```

# css - 将网站分辨率调整为移动设备屏幕尺寸时出现问题

> ID：15078054
> 
> 赞同：4
> 
> 时间：2013-02-25T22:49:18.757
> 
> 标签：css

我正在重新设计我的网站，使其具有基于屏幕分辨率的两种布局。一个有 1000px 用于任何 1010px 或更大的屏幕，另一个有 675px 用于较小的屏幕。现在我正在使用以下视口标签：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"> 
```

此设置在桌面浏览器和 iPad 上运行良好。但是，Android 和 iPhone 浏览器都不能正确显示页面，它们从不同级别的缩放开始。相反，我希望 675px 显示正确缩放，以便整个宽度显示在屏幕上。我尝试使用：

```
<meta name="viewport" content="width=675px, user-scalable=yes"> 
```

它在一定程度上改进了 iPhone 版本，但迫使 iPad 显示更小的尺寸，即使它有 1024 像素宽的屏幕。不太清楚如何解决这个问题。

顺便说一句，该网站是[http://dendory.net](http://dendory.net)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:03:05.540

您是否尝试过删除 initial-scale=1.0 并将您的视口设置为：

```
<meta name="viewport" content="width=device-width"> 
```

然后在设计中为您的断点使用媒体查询。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T23:12:51.307

Try working with mediaqueries. It lets you target a device to apply certain css properties on. You just simply paste it in your stylesheet. I use it to create responsive emails.

Here is an example of a simple mediaquery:

```
@media screen and (max-width: 600px) {
  .class {
    background: #ccc;
  }
} 
```

I hope this helps !

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T23:46:44.873

您应该尝试使用`@media`查询。只需将这些应用到您的样式表中，您就可以根据设备、大小以及您希望使用不同设备实现的目标来获得总的可变样式。

例如

```
/* MOBILE PORTRAIT */
@media only screen and (min-width: 320px) {
    body {

    }
}

/* MOBILE LANDSCAPE */
@media only screen and (min-width: 480px) {
    body {

    }
}

/* SMALL TABLET */
@media only screen and (min-width: 600px) {
    body {

    }
} 
```

在这些中，您可以根据设备的规模简单地应用不同的样式，如下所示...

```
/* TABLET/NETBOOK */
@media only screen and (min-width: 768px) { 
    body {

    }

    /* COLUMN GRID */
    .g1,.g2,.g3 {display:inline; float: left}

    /* 2 COLUMN GRID */
    .g1 {width:48.0%}
    .g2 {width:48.0%}
    .g3 {width:98.0%}
}

/* LANDSCAPE TABLET/NETBOOK/LAPTOP */
@media only screen and (min-width: 1024px) { 
    body {

    }

    /* 3 COLUMN GRID */
    .g1 {width:31.333%}
    .g2 {width:64.667%;}
    .g3 {width:98.0%}
} 
```

如果您想为所有设备创建一个完全交互式的网站，这将非常有用。如今，使用媒体查询是一种常见的做法。

此外，媒体查询在大多数浏览器中都是非常透明的，这使得它们成为使用的“好习惯”。[看一下这个！](http://caniuse.com/css-mediaqueries)

# python - 在 Qt 5 中嵌入 Python

> ID：15078060
> 
> 赞同：8
> 
> 时间：2013-02-25T22:49:48.700
> 
> 标签：python, qt, compiler-errors, python-embedding

我想将 Python 解释器嵌入到 Qt 5 应用程序中。

我在 Qt 5 中有一个工作应用程序，但是当我把

```
#include <Python.h> 
```

在顶部（Qt 标头下方）编译中断为

```
../sample/python3.3m/object.h:432:23: error: expected member name or ';' after declaration specifiers
PyType_Slot *slots; /* terminated by slot==0\. */
~~~~~~~~~~~       ^ 
```

当我将 Python 标头放在 Qt 标头上方时，它会中断

```
In file included from ../Qt5.0.1/5.0.1/clang_64/include/QtGui/QtGui:59:
../Qt5.0.1/5.0.1/clang_64/include/QtGui/qpagedpaintdevice.h:63:57: error: expected '}'
                    A0, A1, A2, A3, A5, A6, A7, A8, A9, B0, B1,
                                                        ^
/usr/include/sys/termios.h:293:12: note: expanded from macro 'B0'
 #define B0      0
                ^
../Qt5.0.1/5.0.1/clang_64/include/QtGui/qpagedpaintdevice.h:62:19: note: to match this '{'
    enum PageSize { A4, B5, Letter, Legal, Executive,
                  ^
1 error generated. 
```

请问，有谁知道为什么会这样？我可能是因为 Qt 和 Python 定义了一些常用词？我能做些什么呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T23:39:35.937

发生这种情况是因为包含 Python.h 首先间接包含 termios.h，它将 B0 定义为 0，而 qpagedpaintdevice.h 又希望将其用作变量名。在 Qt 包含之后包含 Python.h 与字符串 'slots' 的作用几乎相同。

我建议以下顺序：

```
#include <Python.h>
#undef B0
#include <QWhatEver> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-23T06:43:08.090

已接受答案的替代方案：

由于 Qt 使用 the`slots`作为保留关键字，因此与Python API 中结构`slots`成员的声明存在冲突。`PyType_Spec`

可以指示 Qt 不使用普通的 moc 关键字，这将消除冲突。这是通过将以下内容添加到您的项目文件中来完成的： `CONFIG += no_keywords`

缺点是您需要引用相应的 Qt 宏而不是前面的关键字。

因此，Qt 端需要以下替换： `signals -> Q_SIGNALS slots -> Q_SLOTS emit -> Q_EMIT`

这在[使用 Qt with 3rd Part Signals and Slots 部分](http://doc.qt.io/qt-5/signalsandslots.html#using-qt-with-3rd-party-signals-and-slots)的信号和插槽的 Qt 文档中进行了解释。

PS：在开始一个新项目时，这通常是一个不错的选择，而不是在将 Python 添加到广泛使用 Qt 关键字的现有代码库时。

# clojure - Clojure Enlive：如何简化从 scrape3.clj 提取的 fn

> ID：15078062
> 
> 赞同：0
> 
> 时间：2013-02-25T22:49:54.950
> 
> 标签：clojure, enlive

我遵循了 enlive 教程，必须说我对 Enlive 解析网络的能力印象深刻。现在，我进一步查看了此处可用的 scrape3.clj：[https ://github.com/swannodette/enlive-tutorial/blob/master/src/tutorial/scrape3.clj](https://github.com/swannodette/enlive-tutorial/blob/master/src/tutorial/scrape3.clj)

Swannodette 在设计这个例子方面做得很好，但我觉得我们可以让它变得更枯燥一些。

我的问题：我会重写此提取函数以使其更干燥：

```
(defn extract [node]
  (let [headline (first (html/select [node] *headline-selector*))
        byline   (first (html/select [node] *byline-selector*))
        summary  (first (html/select [node] *summary-selector*))
        result   (map html/text [headline byline summary])]
    (zipmap [:headline :byline :summary] (map #(re-gsub #"\n" "" %) result)))) 
```

如果您对程序的其他元素有其他想法，请随时分享！

编辑：我到处玩，想出了：

```
 (defn extract [node]
      (let [s [*headline-selector* *byline-selector* *summary-selector*] 
            selected (map #(html/text (first (html/select [node] %))) s)
            cleaned  (map #(re-gsub #"\n" "" %) selected)]
        (zipmap [:headline :byline :summary] cleaned))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:32:37.223

`first (html/select [node]`可以提升到本地功能：

```
(defn extract [node]
  (let [selector (fn [sel]) (html/select [node] sel)
        headline (selector *headline-selector*)
        byline   (selector *byline-selector*)
        summary  (selector *summary-selector*)
        result   (map html/text [headline byline summary])]
    (zipmap [:headline :byline :summary] (map #(re-gsub #"\n" "" %) result)))) 
```

然后可以删除中间名称，尽管这些有助于使代码的重点清晰，因此这是个人喜好问题：

```
(defn extract [node]
  (let [selector (fn [selector]) (html/select [node] selector)
        result   (map html/text 
                   (map selector [*headline-selector* 
                                  *byline-selector* 
                                  *summary-selector*]))]
    (zipmap [:headline :byline :summary] (map #(re-gsub #"\n" "" %) result)))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T04:49:20.813

为了使函数的结果“更明显”，我将使用映射文字，如下所示：

```
(defn extract [node]
  (let [sel #(html/text (first (html/select [node] %)))
        rem #(re-gsub #"\n" "" %)
        get-text #(-> % sel rem)]
    {:headline (get-text *headline-selector*)
     :byline (get-text *byline-selector*)
     :summary (get-text *summary-selector*)
     })) 
```

# emacs - Emacs 字母闪烁

> ID：15078067
> 
> 赞同：0
> 
> 时间：2013-02-25T22:50:16.623
> 
> 标签：emacs

我有一个无法追踪的字母闪烁问题。

主要问题是我无法刻意启动该错误，但是当它发生时，它会继续在光标周围闪烁。我制作了一个小截屏视频来说明这个问题：

![截屏](../Images/524386abfc669b57ae9236e2db0ca65f.png)

它发生在

*   在任何主要模式
*   在迷你缓冲区中
*   完成缓冲区

当我尝试平分一些 elisp 配置时，我仍然可以重现它；它比以前更难（=更长的时间）。

您对我应该如何追踪错误有任何线索吗？

# vb.net - SaveAs2 方法还是提示！为什么？

> ID：15078076
> 
> 赞同：0
> 
> 时间：2013-02-25T22:50:51.887
> 
> 标签：vb.net, ms-word, office-interop

语境：

> vb.net 程序
> Visual Studio 2010 终极版
> MS Word 2010 自动化
> Microsoft.Office.Interop.Word 库

我正在使用 saveAs2 方法来保存我正在创建的新文档，但是当我调用该方法时应用程序仍在提示我。为什么？

应用程序不可见。application.displayAlerts 为假

有什么想法吗？

此外，当我手动完成 SaveUI 提示时，saveAs2 方法会引发异常。

这是我为要求它的人提供的代码：

```
 Public Sub generateModel() Implements ModelGenerator.generateModel

    wordApp.Visible = True
    wordApp.DisplayAlerts = Word.WdAlertLevel.wdAlertsNone

    wordDoc = wordApp.Documents.Add

    wordDoc.PageSetup.TopMargin = wordApp.InchesToPoints(0.25)
    wordDoc.PageSetup.BottomMargin = wordApp.InchesToPoints(0.25)
    wordDoc.PageSetup.LeftMargin = wordApp.InchesToPoints(0.25)
    wordDoc.PageSetup.RightMargin = wordApp.InchesToPoints(0.25)

    With wordDoc.Content.Paragraphs.Add(wordDoc.Bookmarks.Item("\endofdoc").Range)

        .Range.Text = _text 
        .Format.Alignment = Word.WdParagraphAlignment.wdAlignParagraphCenter
        .Format.LineUnitBefore = 1
        .Range.Font.SmallCaps = True
        .Range.Font.Size = 12

    End With

    Dim logo = wordDoc.Shapes.AddPicture(logoLoc)
    logo.Height = wordApp.InchesToPoints(0.5)
    logo.Width = wordApp.InchesToPoints(1.18)

    Me.mainTable = wordDoc.Tables.Add(wordDoc.Bookmarks.Item("\endofdoc").Range, 3, 2)
    mainTable.Rows.HeightRule = Word.WdRowHeightRule.wdRowHeightExactly
    mainTable.Columns.Width = wordApp.InchesToPoints(4)
    mainTable.Rows.Height = wordApp.InchesToPoints(3.25)
    mainTable.Select()
    wordApp.Selection.ParagraphFormat.Alignment = Word.WdParagraphAlignment.wdAlignParagraphLeft

    With wordDoc.Content.Paragraphs.Add(wordDoc.Bookmarks.Item("\endofdoc").Range)

        .Range.Text = "Rapport journalier de production - page 2"
        .Range.Font.Size = 10
        .Format.Alignment = Word.WdParagraphAlignment.wdAlignParagraphCenter
        .Format.LineUnitBefore = 0
        .Format.SpaceBeforeAuto = False
        .Format.SpaceBefore = 0

    End With

    wordDoc.SaveAs2("C:\Doc1.docx")

    wordDoc.Close(False)
    wordApp.Application.Quit()

End Sub 
```

**更新：

我在另一台机器上测试了代码，它可以工作。所以我在我的身上尝试了这段代码：

```
Dim app As New Microsoft.Office.Interop.Word.Application
Dim doc = app.Documents.Add
doc.SaveAs2("C:\Users\simon\Documents\Doc3.docx") 
```

它仍然使 saveUI 弹出。我很混乱...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:32:41.560

终于找到了问题的根源。

每次我安装 Word 时，我的 Acer 电脑都会安装一个插件。从 Word 中删除加载项后，一切都恢复正常。

插件是 AcerCloud 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:18:07.227

我只是尝试在 C#、Word Interop API v.15 (Office 2013) 中创建一个示例实现：

```
var wordApplication = new Application() { Visible = true };
var doc = wordApplication.Documents.Add();
doc.SaveAs2(@"C:\my.docx"); 
```

...当您保存到需要管理员权限的位置（例如在`C:\`驱动器的根目录上）时，Word Interop 会抛出一个`System.Runtime.InteropServices.COMException`说法：*“Word 无法保存或创建此文件。请确保您要保存的磁盘文件未满、未写保护或损坏。”*

相反，您应该保存在您的应用程序具有必要写入权限的位置，例如，保存到您自己的用户目录 - 然后它应该按预期工作。

# three.js - 如何在Blender中制作骨骼动画并在three.js中播放

> ID：15078079
> 
> 赞同：5
> 
> 时间：2013-02-25T22:50:58.480
> 
> 标签：three.js, blender

在 Blender 中创建模型并在 three.js 中播放的正确过程是什么？

谈论骨骼动画。为了在 three.js 上播放动画，要导出什么，以及调用哪些函数。此外，为了在 three.js 中工作，一个简单的 JSON 导出文件应该是什么样子。

正确结果的管道应该是什么样子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T08:50:03.007

导出动画模型时，您需要在导出器中选中“蒙皮”、“骨骼”和“骨骼动画”选项。生成的 json 文件应包含非空`skinWeights`和属性，例如在此文件中：`bones`http : [//mrdoob.github.com/three.js/examples/obj/buffalo/buffalo.js](http://mrdoob.github.com/three.js/examples/obj/buffalo/buffalo.js)`animation`

要使用 Three.js 播放动画，请从以下示例开始：http: [//mrdoob.github.com/three.js/examples/webgl_animation_skinning.html](http://mrdoob.github.com/three.js/examples/webgl_animation_skinning.html)（在 three.js 源包中提供）。

# python - 在 Python 的调试器 (pdb) 中方便地执行多行语句

> ID：15078087
> 
> 赞同：3
> 
> 时间：2013-02-25T22:51:33.267
> 
> 标签：python, debugging, vim

`!import code; code.interact(local=vars())`在提示符内运行允许您在调试器（ [source](https://stackoverflow.com/questions/5967241/how-to-execute-multi-line-statements-within-pythons-own-debugger-pdb/5967631#5967631)`pdb` ）中输入多行语句（例​​如类定义）。**有什么方法可以省略每次都复制粘贴/键入整行？**

 **我正在考虑`Conque`并`vim`设置类似`:noremap ,d i!import code; code.interact(local=vars())<Esc>`但在插入模式之外编辑任何内容似乎对提示没有任何影响。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T00:19:43.180

`.pdbrc`PDB 在启动时读入。来自[Python 文档](http://docs.python.org/2/library/pdb.html#debugger-commands)：

> 如果文件 .pdbrc 存在于用户的主目录或当前目录中，则读入并执行该文件，就好像它是在调试器提示符下键入的一样。这对于别名特别有用。如果两个文件都存在，则首先读取主目录中的文件，并且本地文件可以覆盖在那里定义的别名。

因此，请尝试创建该文件并将该命令按原样放入其中。**

# alignment - 表格中的文本对齐问题

> ID：15078091
> 
> 赞同：0
> 
> 时间：2013-02-25T22:52:08.680
> 
> 标签：alignment

我有一个免费的 wordpress 模板，我相信它会限制我做任何事情的能力。但是，这里有。

如果您访问[此页面](http://hamabeadpatterns.co.uk/hama-beads/midi-beads-5/disney-gift-sets/)，您会看到我有一个表格，第 2 列中的文本显示在第 1 列中的图像下方。我已经尝试了我认为我知道的事情（请注意这是非常有限的知识）但不能让它与左边对齐。

我希望第 2 列中的文本从其所在框的左上角开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:03:25.053

好吧，我不太了解 Wordpress，但问题是您的文本具有 css 属性

```
vertical-align: baseline; 
```

所以你必须将它设置为

```
vertical-align: top; 
```

我再说一遍，我不知道如何在 Wordpress 中申请，但如果你可以把它放在单元格中，它会起作用

```
 <td style="vertical-align: top">...</td> 
```

# javascript - jQuery 喜欢内联语法而不使用 jQuery？

> ID：15078092
> 
> 赞同：2
> 
> 时间：2013-02-25T22:52:13.030
> 
> 标签：javascript, syntax, prototype

在 jQuery 中，您可以调用这样的函数，例如：

```
$("id").someFunction(); 
```

现在在查看 jQuery 的代码库之后，看起来使用创建的对象`$`修改了它的原型以返回通过添加的函数`.fn`，在我的应用程序中，我只想要相同的语法而不需要 jQuery。

这种行为的另一个例子是Javascript的一些内置方法，`.replace`例如`.toLowerCase`：听到）。`.split``.toString`

我如何能够向分配的每个“字符串”或“对象”的原型添加一个函数。我这样做的原因是我试图创建一个附加事件的跨浏览器实现，而不必一直执行 if 语句。

因此，不需要去： if ( `el.addEventListener`) 或 if ( `el.attachEvent`) 我希望能够去`el.bindEvent`哪个幕后将是幕后的原型方法，它将执行所有检查事件绑定等。

在分配原型方法和诸如此类的东西方面，我的高级 JS 知识并不是那么好，因此感谢您在理解和纠正我所说的任何内容方面的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T02:00:29.423

扩展 DOM 元素的原型比扩展内置对象更糟糕^(†</sup>。请查看文章[“扩展 DOM 有什么问题”](http://perfectionkills.com/whats-wrong-with-extending-the-dom)。)

jQuery 提供的是一个简单的 DOM API*包装器，这没问题。*扩展 DOM 的问题在于

*   它们是宿主对象，其行为可能与 ECMAScript 规范中定义的对象不同，并且
*   较旧的 IE 版本甚至不公开 DOM 节点的原型。

> 我这样做的原因是我试图创建一个附加事件的跨浏览器实现，而不必一直执行 if 语句。

仅凭这一点就没有理由扩展 DOM。您可以定义自己的函数来绑定事件处理程序，您甚至必须在页面加载时测试`addEventListener`是否`attachEvent`仅存在*一次。*这样的函数可能如下所示：

```
var bindEvent = (function() {
    if (document.addEventListener) {
        return function(element, event, handler) {
            element.addEventListener(event, handler, false);
        };
    }
    else {
        return function(element, event, handler) {
            element.attachEvent("on" + event, function() {
                handler.call(element, window.event);
            }
        };
    }
}()); 
```

您可以在这样的函数中进行大量规范化。例如，当使用`attachEvent`,`this`通常不引用处理程序绑定到的元素（它引用`window`），这与 with 不同`addEventListener`。此外，您可能知道，事件对象不会作为参数传递给 IE 中的处理程序。这两个问题都通过这条线解决了：

```
handler.call(element, window.event); 
```

（缺点是你不能简单地移除处理程序，因为你没有`handler`直接绑定，但这些问题[也可以解决](https://stackoverflow.com/questions/5660131/how-to-removeeventlistener-that-is-addeventlistener-with-anonymous-function/5660165#5660165)）。

[您可以在 quirksmode.org 上的优秀文章中](http://www.quirksmode.org/js/introevents.html)找到有关这些浏览器差异的更多信息和更多信息。

* * *

†：由于浏览器提供[`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)了将属性标记为不可枚举的可能性，因此扩展内置对象不再那么糟糕了，但如果库开始使用它，名称冲突、方法覆盖和不兼容的可能性就会更高。
对于您自己的代码，应该没问题。DOM 对象仍然应该是一个禁忌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:57:35.873

If I understood correctly, you want to know how to add methods to the built in javascript objects, so:

```
myObject.prototype.myMethod = function() {
  // whatever
} 
```

so, by example:

```
String.prototype.splice = function() {
// splice function for every string
} 
```

# php - 图片上传安全

> ID：15078093
> 
> 赞同：0
> 
> 时间：2013-02-25T22:52:17.457
> 
> 标签：php

1-任何人都可以告诉我我应该申请上传图像的安全措施是什么

数据库，我刚写了这个脚本，我不知道它是否从 sql 注入中保存，甚至是 XSS 攻击，

2-我不想允许执行任何扩展名为（php、html、cgi等）的文件，其中图像文件夹将保存所有上传的图像，我只是不知道该怎么做，但我认为它必须用 .htaccess 来完成

3-我应该在我的网络服务器上找到图像文件夹以避免任何类型的攻击

请提供任何帮助，

```
<form method="post" action="index.php" enctype="multipart/form-data">

            <input type="file" name="image" />
            <br/>
            <input type="submit" value="UPLOAD" />

        </form>

    if(isset($_FILES['image']))
    {
        if($_FILES['image']['error'] > 1)
        {
            die('Please choose image');
        }

        else if (!preg_match('([^\s]+((jpg|png|gif|jpeg))$)', $_FILES['image']['type']))    
        {
            die('Please upload a valid image with extension of ( jpg, gif, png, jpeg)');
        }

        else 
        {

            $target  = "upload/".time().'_'.basename($_FILES['image']['name']);

            $temp    = $_FILES['image']['tmp_name'];

            $moved   = move_uploaded_file($temp, $target);

            $conn    = mysql_connect('127.0.0.1','root','') or die (mysql_error());

            $db      = mysql_select_db('test');

            $image   = str_replace('upload/','', $target);

            $sql     = mysql_query("INSERT INTO `image` (`id`, `image_name`) VALUES ('','$image')");

            header('Location: index.php');

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:56:03.100

检查文件上传的 OWASP 建议[https://www.owasp.org/index.php/Unrestricted_File_Upload](https://www.owasp.org/index.php/Unrestricted_File_Upload)

如果可能，将文件保存在 Web 服务器公共目录之外

# python - 加权搜索和排序 Python

> ID：15078095
> 
> 赞同：1
> 
> 时间：2013-02-25T22:53:08.850
> 
> 标签：python, sorting, search, artificial-intelligence

我正在用python创建一个生物模拟器，我做的第一件事就是寻找食物。自然地，要搜索的内容之一是距离，但我也想按食物来源的质量进行排序。有没有好的方法来做到这一点？我想我会得到一个所有可能来源的列表，然后对列表进行排序，我知道 python 已经内置了排序函数，但我并不真正理解它的 lambda 部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T22:59:42.243

lambda（您不必使用 lambda，您可以使用命名函数）是您插入效用计算的地方。创建一个函数，首先根据距离和质量为食物来源分配分数，然后将其作为“键”传递给您的排序函数以根据它对列表进行排序。重要的是，您可以将效用计算表达为产生可排序输出（如数字分数）的函数——如果不能，那么您就没有任何可排序的依据。

例如，一个简单的效用函数是根据质量减去距离进行评分：

```
sources.sort(key=lambda source: source.quality - source.distance, reverse=true) 
```

`reverse=true`是因为此功能将更高的分数分配给更好的选项；您可以随意反转您的实用方法（“距离减去质量”）并将其排除在外。 `source.distance`当然必须用某种函数替换来计算相对于当前位置的距离。

# c# - 如果只选择了部分行，如何获取所有选定的行？

> ID：15078097
> 
> 赞同：3
> 
> 时间：2013-02-25T22:53:13.060
> 
> 标签：c#, winforms, datagridview

如何选择选择某些内容的所有行？假设我们在不同/相同的列中选择了 10 个项目，在多行中，如下所示：

![在此处输入图像描述](../Images/ed4e03c9c19e63a392b6a449ee473c03.png)

我们希望得到类似的结果

```
var selected = ElementsTableView.SelectedRows.Cast<DataGridViewRow>(); 
```

然而，对于选择了至少一个列项目的所有行。如何在 C# 中用 WinForms 做这样的事情？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T22:59:50.043

试试这个：

```
var selected = ElementsTableView
               .SelectedCells
               .Cast<DataGridViewCell>()
               .Select(c => c.OwningRow)
               .Distinct(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:02:29.873

有`DataGridView`一个`SelectedCells`属性。 `DataGridViewCell`有一个`OwningRow`返回`DataGridViewRow`.

[请参阅此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.selectedcells.aspx)和[此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcell.owningrow.aspx)的 MSDN 文档。

# scala - 为支持 copy(id=newId) 方法的所有案例类创建共同特征

> ID：15078102
> 
> 赞同：7
> 
> 时间：2013-02-25T22:53:32.763
> 
> 标签：scala, case-class

我正在尝试做这样的事情：

```
trait IdentifiableModel[T] {
  self: { def copy(id: ObjectId): T } =>

  val id: ObjectId
} 
```

我发现了一些其他相关的问题试图做类似的事情，但他们并没有真正回答这个问题。就我而言，我正在尝试复制 IdentifiableModel 的案例类子类，它们都共享一个 id 值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:16:20.327

特拉维斯布朗有很好的答案，但没有回复。

他使用 Scala 宏： 如何使用 Scala 宏[对方法调用中的命名参数进行建模？](https://stackoverflow.com/questions/13446528/howto-model-named-parameters-in-method-invocations-with-scala-macros/13447439#13447439)

# c - 如何检查文本文件中的“分隔符”？

> ID：15078104
> 
> 赞同：0
> 
> 时间：2013-02-25T22:53:57.490
> 
> 标签：c, text, separator

我正在开始开发一个新程序（用于学校项目），用户可以在该程序中登录并拥有类似“时间线”的页面。现在它是一个简单的命令行 C 项目。

我想通过以下方式将数据存储在文本文件中：

```
#    
Message here Message here Message here Message here Message here Message here
Message here Message here Message here Message here Message here Message here
Message here Message here Message here Message here Message here Message here
#
Message2 here Message2 here Message2 here Message2 here Message2 here Message2 here 
Message2 here Message2 here Message2 here Message2 here Message2 here Message2 here
#
...etc 
```

我知道如何存储数据，它只是一个“最后写入”功能。我的问题与读取该文件有关。我希望能够检查“#”字符或我放置的任何字符来分隔消息并阅读消息，将其存储在一个结构中，在命令行中显示它，然后继续下一个标记，显示message2 等等。

有没有“好”或者我应该说在 C 中这样做的改进方法？

如果这里没有真正的代码，我很抱歉，我只是在实际开始代码之前提前考虑。

非常感谢任何愿意帮助或至少尝试的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:06:41.167

1.  您可以将整个文件读取到一个变量（必须足够大，因此您必须使用动态内存分配），然后使用函数`strtok`和字符`#`作为分隔符将其“划分”为分隔消息。

2.  您可以简单地在 char 之后开始读取文件 char 并将其保存到一个变量中，当您当前的 char 为时，`#`该变量将恰好存储 1 条消息，您可以继续阅读下一条消息并将其保存到新变量中，或者您在任何地方想要存储它。

有很多方法可以做到这一点，只需选择最适合您的一种即可。

# php - 如何诊断不抛出任何错误消息的 AJAX 错误？

> ID：15078113
> 
> 赞同：0
> 
> 时间：2013-02-25T22:54:37.990
> 
> 标签：php, javascript, jquery, ajax

我有以下部分 ajax 代码：

```
$(document).ready(function(){
    $("form input#dodaj").click(function(){
        var s = $("form input#zad").val();
        var str = "<li>"+s+"</li>";
        $.ajax( {
            type: "GET",
            url: "http://lesni.org/kss/dodaj_zadanie.php",
            data: { 
                pid: ($(this).attr('alt')),
                zad: encodeURI(s)},
            error: function( err ){ alert(err); }
                }
             ).done(function(){
                $("ul#zadania").append(str);
                $("form input#zad").val(" ");
            });
        });     
    }); 
```

注意：加载上述代码的页面来自类似的 URL `http://lesni.org/some/page`，因此同源策略不是问题。

但它似乎不起作用，我不知道为什么。

它调用的 PHP 文件是正确的。当我在浏览器中手动输入时：

```
http://lesni.org/kss/dodaj_zadanie.php?pid=1&zad=abc 
```

它工作正常（将记录添加到数据库）。但是ajax代码不起作用。它不会抛出任何错误，或者我不知道它是否会抛出任何错误......

所以问题是：我如何诊断这部分 AJAX 代码以了解问题所在。我也试过`POST`版本，没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:26:38.807

你这样指定`data`：

```
data: { 
    pid: ($(this).attr('alt')),
    zad: encodeURI(s)
} 
```

当您通过 将*对象*传递给 jQuery 时`data`，您**不需要**（或不想）对其进行编码。（你只能用一个字符串来做。）jQuery 为你做这件事。（如果您*确实*想对其进行编码，则需要`encodeURIComponent`，而不是`encodeURI`）。因此，您最终会得到双重编码的实体，因此无法正常工作。

那应该是：

```
data: { 
    pid: ($(this).attr('alt')),
    zad: s
} 
```

（您也不需要围绕 的值的括号`pid`，但它们是无害的，所以我离开了它们。）

* * *

但是回答问题

> 如何诊断不抛出任何错误消息的 AJAX 错误？

...你这样做

*   查看任何不错的浏览器开发工具中的“网络”选项卡，它可以*准确地*向您显示它发送到服务器的内容以及返回的内容。

*   使用服务器端调试（适当的调试，或通过将内容转储到日志中）来查看服务器接收到的*确切*内容。

*   查看服务器端日志以确保请求了正确的资源。

...等等。

# functional-programming - SML/NJ - 可以保存任何类型的链表

> ID：15078115
> 
> 赞同：1
> 
> 时间：2013-02-25T22:54:44.603
> 
> 标签：functional-programming, sml, smlnj

我试图为可以同时保存所有类型的链表创建一个数据类型，即 void* 元素的链表，设计是创建一个`Node`保存记录的数据类型包含`Value`和`Next` 。

到目前为止我所做的是 -

```
datatype 'a anything = dummy of 'a ; (* suppose to hold any type (i.e void*) *)

datatype linkedList = Node of {Value:dummy, Next:linkedList}; (* Node contain this record *) 
```

如您所见，上述尝试并没有成功，但我相信我的想法已经足够清晰，那么这里需要进行哪些更改才能使其发挥作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T23:05:17.387

我不确定您是否被迫使用记录类型。因为否则我认为这样做更简单：

```
datatype 'a linkedlist = Empty | Cons of 'a * 'a linkedlist 
```

然后你可以使用它有点像：

```
val jedis = Cons ("Obi-wan", Cons("Luke", Cons("Yoda", Cons("Anakin", Empty)))); 
```

我认为在这里使用记录是一个糟糕的选择。我什至想不出我怎么能用这种方法来表示一个空列表。

**-编辑-**

要回答您关于支持多种类型的评论：

```
datatype polymorphic = N of int | S of string | B of bool
Cons(S("A"), Cons(N(5), Cons(N(6), Cons(B(true), Empty)))); 
```

鉴于这种情况，您可能更喜欢 SML 列表：

```
S("A")::N(5)::N(6)::B(true)::[]; 
```

哪个产生列表

```
[S "A",N 5,N 6,B true] 
```

也就是说，一个相同类型（即多态）的列表，但是这种类型能够通过它的多个构造函数包含不同种类的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T12:01:37.497

仅供参考，如果多态列表的类型保持开放很重要，您可以使用 SML 的内置异常类型：exn。exn 类型是开放的，可以在程序的任何地方进行扩展。

```
exception INT of int
exception STR of string
val xs = [STR "A", INT 5, INT 6] : exn list 
```

您可以像往常一样有选择地对特定类型进行大小写：

```
val inc_ints = List.map (fn INT i => INT (i + 1) | other => other) 
```

您可以稍后扩展该类型，而无需提及其先前的定义：

```
exception BOOL of bool
val ys = [STR "A", INT 5, INT 6, BOOL true] : exn list 
```

请注意，您可以将任何异常的构造放在那里（这里是 div-by-zero 异常）：

```
val zs = Div :: ys : exn list 
```

也就是说，这种（ab）使用确实很少有很好的用例，并且通常使用封闭的总和类型会更好，正如 Edwin 在上面的答案中所解释的那样。

# ios - UITextField 在简历上崩溃的应用程序

> ID：15078118
> 
> 赞同：3
> 
> 时间：2013-02-25T22:55:26.510
> 
> 标签：ios, crash, uitextfield, nszombies

我有一个 UITextField 我在模式对话框中呈现。在触摸 UITextField 时，会显示 ABPeoplePicker（联系人选择器）（也是模态的）。如果我随后关闭 ABPeoplePicker 和最初呈现的模式对话框，然后将应用程序置于后台，我会在应用程序恢复时遇到 EXC_BAD_ACCESS 崩溃。

使用僵尸：

```
#   Address Category    Event Type  RefCt   Timestamp   Size    Responsible Library Responsible Caller
0   0xda96640   UITextField Malloc  1   00:05.995.892   336 UIKit   UINibDecoderDecodeObjectForValue
1   0xda96640   UITextField Retain  2   00:05.996.496   0   UIKit   -[UIRuntimeConnection initWithCoder:]
2   0xda96640   UITextField Retain  3   00:05.996.504   0   UIKit   -[UIRuntimeConnection initWithCoder:]
3   0xda96640   UITextField Retain  4   00:05.998.852   0   UIKit   UINibDecoderDecodeObjectForValue
4   0xda96640   UITextField Retain  5   00:05.998.870   0   UIKit   -[UIView(Internal) _addSubview:positioned:relativeTo:]
5   0xda96640   UITextField Retain  6   00:06.010.519   0   UIKit   -[UIRuntimeConnection initWithCoder:]
6   0xda96640   UITextField Retain  7   00:06.010.991   0   UIKit   UINibDecoderDecodeObjectForValue
7   0xda96640   UITextField Release 6   00:06.011.441   0   UIKit   -[UINibDecoder finishDecoding]
8   0xda96640   UITextField Release 5   00:06.011.489   0   UIKit   -[UINibDecoder finishDecoding]
9   0xda96640   UITextField Release 4   00:06.011.532   0   UIKit   -[UINibDecoder finishDecoding]
10  0xda96640   UITextField Release 3   00:06.011.581   0   UIKit   -[UIRuntimeConnection dealloc]
11  0xda96640   UITextField Release 2   00:06.011.659   0   UIKit   -[UIRuntimeConnection dealloc]
12  0xda96640   UITextField Release 1   00:06.011.718   0   UIKit   -[UIRuntimeConnection dealloc]
13  0xda96640   UITextField Retain  2   00:06.060.566   0   UIKit   -[UIView _tryRetain]
14  0xda96640   UITextField Autorelease     00:06.060.567   0   MyApp   -[MDDueViewController customerField]
15  0xda96640   UITextField Retain  3   00:06.060.567   0   MyApp   -[MDDueViewController refreshView]
16  0xda96640   UITextField Release 2   00:06.060.569   0   MyApp   -[MDDueViewController refreshView]
17  0xda96640   UITextField Retain  3   00:06.060.574   0   UIKit   -[UIView _tryRetain]
18  0xda96640   UITextField Autorelease     00:06.060.575   0   MyApp   -[MDDueViewController customerField]
19  0xda96640   UITextField Retain  4   00:06.060.575   0   MyApp   -[MDDueViewController refreshView]
20  0xda96640   UITextField Release 3   00:06.060.669   0   MyApp   -[MDDueViewController refreshView]
21  0xda96640   UITextField Retain  4   00:06.060.961   0   UIKit   -[UIView _tryRetain]
22  0xda96640   UITextField Autorelease     00:06.060.962   0   MyApp   -[MDDueViewController customerField]
23  0xda96640   UITextField Retain  5   00:06.060.962   0   MyApp   -[MDDueViewController refreshView]
24  0xda96640   UITextField Release 4   00:06.060.963   0   MyApp   -[MDDueViewController refreshView]
25  0xda96640   UITextField Release 3   00:06.066.904   0   UIKit   _UIApplicationHandleEvent
26  0xda96640   UITextField Release 2   00:06.066.954   0   UIKit   _UIApplicationHandleEvent
27  0xda96640   UITextField Release 1   00:06.066.955   0   UIKit   _UIApplicationHandleEvent
28  0xda96640   UITextField Retain  2   00:06.072.625   0   QuartzCore  -[CALayer layoutSublayers]
29  0xda96640   UITextField Release 1   00:06.072.809   0   QuartzCore  -[CALayer layoutSublayers]
30  0xda96640   UITextField Retain  2   00:06.074.635   0   QuartzCore  -[CALayer drawInContext:]
31  0xda96640   UITextField Release 1   00:06.074.645   0   QuartzCore  -[CALayer drawInContext:]
32  0xda96640   UITextField Retain  2   00:07.399.074   0   UIKit   -[UIView(Hierarchy) subviews]
33  0xda96640   UITextField Retain  3   00:07.960.376   0   UIKit   -[UITouch(UITouchInternal) setView:]
34  0xda96640   UITextField Retain  4   00:07.960.377   0   UIKit   -[UITouch(UITouchInternal) setGestureView:]
35  0xda96640   UITextField Retain  5   00:07.960.398   0   UIKit   -[UITouch view]
36  0xda96640   UITextField Autorelease     00:07.960.399   0   UIKit   -[UITouch view]
37  0xda96640   UITextField Retain  6   00:07.960.435   0   UIKit   -[UITouch view]
38  0xda96640   UITextField Autorelease     00:07.960.436   0   UIKit   -[UITouch view]
39  0xda96640   UITextField Retain  7   00:07.960.445   0   UIKit   -[UITouch view]
40  0xda96640   UITextField Autorelease     00:07.960.445   0   UIKit   -[UITouch view]
41  0xda96640   UITextField Retain  8   00:07.960.451   0   UIKit   -[UITouch view]
42  0xda96640   UITextField Autorelease     00:07.960.451   0   UIKit   -[UITouch view]
43  0xda96640   UITextField Retain  9   00:07.960.460   0   UIKit   -[UITouch view]
44  0xda96640   UITextField Autorelease     00:07.960.461   0   UIKit   -[UITouch view]
45  0xda96640   UITextField Retain  10  00:07.960.466   0   UIKit   -[UITouch view]
46  0xda96640   UITextField Autorelease     00:07.960.467   0   UIKit   -[UITouch view]
47  0xda96640   UITextField Retain  11  00:07.960.473   0   UIKit   -[UITouch view]
48  0xda96640   UITextField Autorelease     00:07.960.473   0   UIKit   -[UITouch view]
49  0xda96640   UITextField Retain  12  00:07.960.483   0   UIKit   -[UITouch view]
50  0xda96640   UITextField Autorelease     00:07.960.483   0   UIKit   -[UITouch view]
51  0xda96640   UITextField Retain  13  00:07.960.541   0   UIKit   -[UITouch view]
52  0xda96640   UITextField Autorelease     00:07.960.541   0   UIKit   -[UITouch view]
53  0xda96640   UITextField Retain  14  00:07.960.846   0   UIKit   -[UITouch view]
54  0xda96640   UITextField Autorelease     00:07.960.847   0   UIKit   -[UITouch view]
55  0xda96640   UITextField Retain  15  00:07.961.119   0   UIKit   -[UITouchesEvent _cloneEvent]
56  0xda96640   UITextField Retain  16  00:07.961.181   0   UIKit   -[UITouch _loadStateFromTouch:]
57  0xda96640   UITextField Retain  17  00:07.961.210   0   UIKit   -[UITouch view]
58  0xda96640   UITextField Autorelease     00:07.961.210   0   UIKit   -[UITouch view]
59  0xda96640   UITextField Retain  18  00:07.961.212   0   UIKit   -[UITouchesEvent _viewsForWindow:]
60  0xda96640   UITextField Retain  19  00:07.961.218   0   UIKit   -[UITouch view]
61  0xda96640   UITextField Autorelease     00:07.961.218   0   UIKit   -[UITouch view]
62  0xda96640   UITextField Release 18  00:07.961.221   0   UIKit   _UIApplicationHandleEvent
63  0xda96640   UITextField Release 17  00:07.961.225   0   UIKit   _UIApplicationHandleEvent
64  0xda96640   UITextField Release 16  00:07.961.226   0   UIKit   _UIApplicationHandleEvent
65  0xda96640   UITextField Release 15  00:07.961.244   0   UIKit   _UIApplicationHandleEvent
66  0xda96640   UITextField Release 14  00:07.961.260   0   UIKit   _UIApplicationHandleEvent
67  0xda96640   UITextField Release 13  00:07.961.271   0   UIKit   _UIApplicationHandleEvent
68  0xda96640   UITextField Release 12  00:07.961.278   0   UIKit   _UIApplicationHandleEvent
69  0xda96640   UITextField Release 11  00:07.961.278   0   UIKit   _UIApplicationHandleEvent
70  0xda96640   UITextField Release 10  00:07.961.279   0   UIKit   _UIApplicationHandleEvent
71  0xda96640   UITextField Release 9   00:07.961.279   0   UIKit   _UIApplicationHandleEvent
72  0xda96640   UITextField Release 8   00:07.961.279   0   UIKit   _UIApplicationHandleEvent
73  0xda96640   UITextField Release 7   00:07.961.280   0   UIKit   _UIApplicationHandleEvent
74  0xda96640   UITextField Release 6   00:07.961.280   0   UIKit   _UIApplicationHandleEvent
75  0xda96640   UITextField Release 5   00:07.961.286   0   UIKit   _UIApplicationHandleEvent
76  0xda96640   UITextField Retain  6   00:07.961.311   0   QuartzCore  -[CALayer layoutSublayers]
77  0xda96640   UITextField Release 5   00:07.961.403   0   QuartzCore  -[CALayer layoutSublayers]
78  0xda96640   UITextField Retain  6   00:08.038.720   0   UIKit   -[UITouch view]
79  0xda96640   UITextField Autorelease     00:08.038.721   0   UIKit   -[UITouch view]
80  0xda96640   UITextField Retain  7   00:08.039.129   0   UIKit   -[UITouch view]
81  0xda96640   UITextField Autorelease     00:08.039.130   0   UIKit   -[UITouch view]
82  0xda96640   UITextField Retain  8   00:08.039.422   0   UIKit   -[UITouch view]
83  0xda96640   UITextField Autorelease     00:08.039.422   0   UIKit   -[UITouch view]
84  0xda96640   UITextField Retain  9   00:08.039.425   0   UIKit   -[UITouch view]
85  0xda96640   UITextField Autorelease     00:08.039.426   0   UIKit   -[UITouch view]
86  0xda96640   UITextField Retain  10  00:08.039.428   0   UIKit   -[UIGestureRecognizer _shouldBegin]
87  0xda96640   UITextField Release 9   00:08.039.435   0   UIKit   -[UIGestureRecognizer _shouldBegin]
88  0xda96640   UITextField Retain  10  00:08.039.644   0   UIKit   -[UITouchesEvent _cloneEvent]
89  0xda96640   UITextField Retain  11  00:08.039.744   0   UIKit   -[UITouch _loadStateFromTouch:]
90  0xda96640   UITextField Retain  12  00:08.039.782   0   UIKit   -[UIResponder becomeFirstResponder]
91  0xda96640   UITextField Retain  13  00:08.039.831   0   UIKit   -[UIWindow _setFirstResponder:]
92  0xda96640   UITextField Retain  14  00:08.041.734   0   UIKit   -[UIFieldEditor becomeFieldEditorForView:]
93  0xda96640   UITextField Retain  15  00:08.042.968   0   MyApp   -[MDDueViewController customerBeginEditing:]
94  0xda96640   UITextField Retain  16  00:08.083.655   0   UIKit   -[UIViewController presentViewController:withTransition:completion:]
95  0xda96640   UITextField Retain  17  00:08.095.495   0   UIKit   -[UITextField _resignFirstResponder]
96  0xda96640   UITextField Autorelease     00:08.095.496   0   UIKit   -[UITextField _resignFirstResponder]
97  0xda96640   UITextField Retain  18  00:08.095.796   0   UIKit   -[UIView _tryRetain]
98  0xda96640   UITextField Autorelease     00:08.095.797   0   MyApp   -[MDDueViewController customerField]
99  0xda96640   UITextField Retain  19  00:08.095.798   0   MyApp   -[MDDueViewController customerFieldDidEndEditing:]
100 0xda96640   UITextField Retain  20  00:08.095.818   0   UIKit   -[UIView _tryRetain]
101 0xda96640   UITextField Autorelease     00:08.095.819   0   MyApp   -[MDDueViewController customerField]
102 0xda96640   UITextField Retain  21  00:08.095.820   0   MyApp   -[MDDueViewController customerFieldDidEndEditing:]
103 0xda96640   UITextField Release 20  00:08.095.838   0   MyApp   -[MDDueViewController customerFieldDidEndEditing:]
104 0xda96640   UITextField Release 19  00:08.095.839   0   MyApp   -[MDDueViewController customerFieldDidEndEditing:]
105 0xda96640   UITextField Release 18  00:08.095.869   0   UIKit   -[UIFieldEditor becomeFieldEditorForView:]
106 0xda96640   UITextField Retain  19  00:08.096.237   0   Foundation  +[NSConcreteNotification newTempNotificationWithName:object:userInfo:]
107 0xda96640   UITextField Release 18  00:08.096.243   0   Foundation  -[NSConcreteNotification dealloc]
108 0xda96640   UITextField Release 17  00:08.096.248   0   MyApp   -[MDDueViewController customerBeginEditing:]
109 0xda96640   UITextField Retain  18  00:08.097.915   0   Foundation  +[NSConcreteNotification newTempNotificationWithName:object:userInfo:]
110 0xda96640   UITextField Release 17  00:08.097.919   0   Foundation  -[NSConcreteNotification dealloc]
111 0xda96640   UITextField Release 16  00:08.097.929   0   UIKit   -[UIResponder becomeFirstResponder]
112 0xda96640   UITextField Retain  17  00:08.097.939   0   UIKit   -[UITouch view]
113 0xda96640   UITextField Autorelease     00:08.097.939   0   UIKit   -[UITouch view]
114 0xda96640   UITextField Retain  18  00:08.097.979   0   UIKit   -[UITouch view]
115 0xda96640   UITextField Autorelease     00:08.097.980   0   UIKit   -[UITouch view]
116 0xda96640   UITextField Retain  19  00:08.097.981   0   UIKit   -[UITouch view]
117 0xda96640   UITextField Autorelease     00:08.097.981   0   UIKit   -[UITouch view]
118 0xda96640   UITextField Retain  20  00:08.097.984   0   UIKit   -[UITouch view]
119 0xda96640   UITextField Autorelease     00:08.097.985   0   UIKit   -[UITouch view]
120 0xda96640   UITextField Retain  21  00:08.097.989   0   UIKit   -[UIApplication _cancelTouches:withEvent:includingGestures:notificationBlock:]
121 0xda96640   UITextField Retain  22  00:08.098.003   0   UIKit   __98-[UIApplication _cancelViewProcessingOfTouches:withEvent:sendingTouchesCancelledToViewsOfTouches:]_block_invoke_0
122 0xda96640   UITextField Retain  23  00:08.098.032   0   UIKit   -[UIApplication _cancelTouches:withEvent:includingGestures:notificationBlock:]
123 0xda96640   UITextField Retain  24  00:08.098.049   0   UIKit   -[UITouch view]
124 0xda96640   UITextField Autorelease     00:08.098.049   0   UIKit   -[UITouch view]
125 0xda96640   UITextField Release 23  00:08.098.050   0   UIKit   -[UITouch(UITouchInternal) setView:]
126 0xda96640   UITextField Release 22  00:08.098.051   0   UIKit   -[UITouch(UITouchInternal) setGestureView:]
127 0xda96640   UITextField Release 21  00:08.098.070   0   UIKit   -[UIApplication _cancelTouches:withEvent:includingGestures:notificationBlock:]
128 0xda96640   UITextField Release 20  00:08.098.415   0   UIKit   _UIApplicationHandleEvent
129 0xda96640   UITextField Release 19  00:08.098.422   0   UIKit   _UIApplicationHandleEvent
130 0xda96640   UITextField Release 18  00:08.098.427   0   UIKit   _UIApplicationHandleEvent
131 0xda96640   UITextField Release 17  00:08.098.428   0   UIKit   _UIApplicationHandleEvent
132 0xda96640   UITextField Release 16  00:08.098.429   0   UIKit   _UIApplicationHandleEvent
133 0xda96640   UITextField Release 15  00:08.098.429   0   UIKit   _UIApplicationHandleEvent
134 0xda96640   UITextField Release 14  00:08.098.445   0   UIKit   _UIApplicationHandleEvent
135 0xda96640   UITextField Release 13  00:08.098.548   0   UIKit   _UIApplicationHandleEvent
136 0xda96640   UITextField Release 12  00:08.098.552   0   UIKit   _UIApplicationHandleEvent
137 0xda96640   UITextField Release 11  00:08.098.592   0   UIKit   _UIApplicationHandleEvent
138 0xda96640   UITextField Release 10  00:08.099.264   0   UIKit   _UIApplicationHandleEvent
139 0xda96640   UITextField Release 9   00:08.099.275   0   UIKit   -[UITouch dealloc]
140 0xda96640   UITextField Release 8   00:08.099.356   0   UIKit   _UIApplicationHandleEvent
141 0xda96640   UITextField Release 7   00:08.099.372   0   UIKit   _UIApplicationHandleEvent
142 0xda96640   UITextField Release 6   00:08.099.373   0   UIKit   _UIApplicationHandleEvent
143 0xda96640   UITextField Release 5   00:08.099.383   0   UIKit   _UIApplicationHandleEvent
144 0xda96640   UITextField Release 4   00:08.099.385   0   UIKit   -[UITouch dealloc]
145 0xda96640   UITextField Release 3   00:08.099.656   0   UIKit   _UIApplicationHandleEvent
146 0xda96640   UITextField Retain  4   00:08.102.385   0   QuartzCore  -[CALayer layoutSublayers]
147 0xda96640   UITextField Release 3   00:08.102.455   0   QuartzCore  -[CALayer layoutSublayers]
148 0xda96640   UITextField Retain  4   00:10.762.824   0   UIKit   -[UIView _tryRetain]
149 0xda96640   UITextField Autorelease     00:10.762.825   0   MyApp   -[MDDueViewController customerField]
150 0xda96640   UITextField Retain  5   00:10.762.825   0   MyApp   -[MDDueViewController refreshView]
151 0xda96640   UITextField Release 4   00:10.762.828   0   MyApp   -[MDDueViewController refreshView]
152 0xda96640   UITextField Retain  5   00:10.762.833   0   UIKit   -[UIView _tryRetain]
153 0xda96640   UITextField Autorelease     00:10.762.833   0   MyApp   -[MDDueViewController customerField]
154 0xda96640   UITextField Retain  6   00:10.762.834   0   MyApp   -[MDDueViewController refreshView]
155 0xda96640   UITextField Release 5   00:10.762.888   0   MyApp   -[MDDueViewController refreshView]
156 0xda96640   UITextField Retain  6   00:10.763.054   0   UIKit   -[UIView _tryRetain]
157 0xda96640   UITextField Autorelease     00:10.763.054   0   MyApp   -[MDDueViewController customerField]
158 0xda96640   UITextField Retain  7   00:10.763.055   0   MyApp   -[MDDueViewController refreshView]
159 0xda96640   UITextField Release 6   00:10.763.056   0   MyApp   -[MDDueViewController refreshView]
160 0xda96640   UITextField Retain  7   00:10.768.666   0   UIKit   -[UIResponder becomeFirstResponder]
161 0xda96640   UITextField Retain  8   00:10.768.678   0   UIKit   -[UIWindow _setFirstResponder:]
162 0xda96640   UITextField Retain  9   00:10.768.753   0   UIKit   -[UIFieldEditor becomeFieldEditorForView:]
163 0xda96640   UITextField Retain  10  00:10.769.010   0   MyApp   -[MDDueViewController customerBeginEditing:]
164 0xda96640   UITextField Retain  11  00:10.796.341   0   UIKit   -[UITextField _resignFirstResponder]
165 0xda96640   UITextField Autorelease     00:10.796.342   0   UIKit   -[UITextField _resignFirstResponder]
166 0xda96640   UITextField Retain  12  00:10.796.506   0   UIKit   -[UIView _tryRetain]
167 0xda96640   UITextField Autorelease     00:10.796.507   0   MyApp   -[MDDueViewController customerField]
168 0xda96640   UITextField Retain  13  00:10.796.508   0   MyApp   -[MDDueViewController customerFieldDidEndEditing:]
169 0xda96640   UITextField Retain  14  00:10.796.522   0   UIKit   -[UIView _tryRetain]
170 0xda96640   UITextField Autorelease     00:10.796.523   0   MyApp   -[MDDueViewController customerField]
171 0xda96640   UITextField Retain  15  00:10.796.524   0   MyApp   -[MDDueViewController customerFieldDidEndEditing:]
172 0xda96640   UITextField Release 14  00:10.796.536   0   MyApp   -[MDDueViewController customerFieldDidEndEditing:]
173 0xda96640   UITextField Release 13  00:10.796.537   0   MyApp   -[MDDueViewController customerFieldDidEndEditing:]
174 0xda96640   UITextField Release 12  00:10.796.562   0   UIKit   -[UIFieldEditor becomeFieldEditorForView:]
175 0xda96640   UITextField Retain  13  00:10.796.980   0   Foundation  +[NSConcreteNotification newTempNotificationWithName:object:userInfo:]
176 0xda96640   UITextField Release 12  00:10.796.983   0   Foundation  -[NSConcreteNotification dealloc]
177 0xda96640   UITextField Release 11  00:10.797.049   0   MyApp   -[MDDueViewController customerBeginEditing:]
178 0xda96640   UITextField Retain  12  00:10.797.754   0   Foundation  +[NSConcreteNotification newTempNotificationWithName:object:userInfo:]
179 0xda96640   UITextField Release 11  00:10.797.757   0   Foundation  -[NSConcreteNotification dealloc]
180 0xda96640   UITextField Release 10  00:10.797.763   0   UIKit   -[UIResponder becomeFirstResponder]
181 0xda96640   UITextField Release 9   00:10.797.944   0   UIKit   -[UIViewController _dismissViewControllerWithTransition:from:completion:]
182 0xda96640   UITextField Release 8   00:10.798.036   0   UIKit   _UIApplicationHandleEvent
183 0xda96640   UITextField Release 7   00:10.798.040   0   UIKit   _UIApplicationHandleEvent
184 0xda96640   UITextField Release 6   00:10.798.051   0   UIKit   _UIApplicationHandleEvent
185 0xda96640   UITextField Release 5   00:10.802.137   0   UIKit   _UIApplicationHandleEvent
186 0xda96640   UITextField Release 4   00:10.802.827   0   UIKit   _UIApplicationHandleEvent
187 0xda96640   UITextField Release 3   00:10.802.867   0   UIKit   _UIApplicationHandleEvent
188 0xda96640   UITextField Release 2   00:10.802.868   0   UIKit   _UIApplicationHandleEvent
189 0xda96640   UITextField Retain  3   00:10.803.307   0   QuartzCore  -[CALayer layoutSublayers]
190 0xda96640   UITextField Release 2   00:10.803.419   0   QuartzCore  -[CALayer layoutSublayers]
191 0xda96640   UITextField Retain  3   00:14.465.011   0   QuartzCore  -[CALayer layoutSublayers]
192 0xda96640   UITextField Release 2   00:14.465.118   0   QuartzCore  -[CALayer layoutSublayers]
193 0xda96640   UITextField Release 1   00:17.082.546   0   UIKit   -[UIView(Internal) _invalidateSubviewCache]
194 0xda96640   UITextField Release 0   00:17.082.555   0   UIKit   -[UIView(Hierarchy) removeFromSuperview]
195 0xda96640   UITextField Zombie  -1  00:19.533.987   0   Foundation  __57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 
```

我在这里没有做任何太花哨的事情。我只是将我的几个 ViewController 方法绑定到情节提要中的 UITextField 的“Editing Did Begin”和“Editing Did End”事件，以便呈现和关闭 ABPeoplePicker：

```
- (IBAction)customerBeginEditing:(id)sender {
    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
    picker.peoplePickerDelegate = self;
    // Display only a person's phone, email, and birthdate
    NSArray *displayedItems = [NSArray arrayWithObjects:[NSNumber numberWithInt:kABPersonPhoneProperty], 
                               [NSNumber numberWithInt:kABPersonEmailProperty], nil];

    picker.displayedProperties = displayedItems;
    // Show the picker 
    [self presentModalViewController:picker animated:YES]; 
    [sender resignFirstResponder]; //dismiss the keyboard from under the contact picker

} 
```

选择联系人后，会发生以下情况 (ABPeoplePickerNavigationControllerDelegate)：

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {    
    [self setCustomerFromSelectedPerson:person];
    [self dismissModalViewControllerAnimated:YES];
    return NO;

} 
```

最后：

```
- (void)customerFieldDidEndEditing:(UITextField *)textField {
    if (self.customerField.text != nil && self.customerField.text.length > 0) {
        self.saveButton.enabled = YES;
    } else {
        self.saveButton.enabled = NO;
    }
} 
```

有趣的是，崩溃只发生在 iOS 6 中。iOS 5 运行良好。

iOS 内部是否有一些与通知相关的东西试图以某种方式向我的 UITextField 发送消息？我缺少一些潜在的清理任务？我在其他地方使用相同的技术没有问题，这真的让我很困惑。我什至尝试将原始文本字段移动到“推送”样式演示文稿（而不是模态），以排除由于嵌套的模态呈现对话框引起的任何问题。

请注意，我使用的是 ARC，并且 UITextField 在我的 ViewController 中被声明为弱引用。

任何见解都非常感谢！谢谢！

***更新***

好的，我发现了问题，但我不明白为什么会这样。我已将问题归结为在 customerBeginEditing 中对 [sender resignFirstResponder] 的调用。出于某种原因，此调用导致在应用程序恢复时调用 [NSNotificationCenter addObserver:selector:name:object:]（但仅当不再显示具有 UITextField 的页面时）。我可以通过修改我的代码来解决我的问题，以便根本不必调用 resignFirstResponder 但我仍然不明白 iOS5 和 iOS6 之间发生了什么变化导致了这个问题。有人有想法么？

# javascript - 带有元素 innerText 的 Safari 错误

> ID：15078122
> 
> 赞同：2
> 
> 时间：2013-02-25T22:55:52.383
> 
> 标签：javascript, html, safari

好的，我刚才问了这个问题，但是我有一些图片可以显示我在 safari 中遇到的这个错误。

在控制台区域 safari 显示此文本

```
<div id="rot3posDisp" class="rotDisp">C</div> 
```

但在实际页面上，它仍然具有`innerText`“B”。这意味着`innerText`我已经安装的 javascript 函数没有刷新。

有没有其他人在 safari 中遇到过这个错误，如果有，你有解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T23:06:10.207

如果能坚持IE9+，`.textContent`是首选。`.innerText`在 Firefox 中根本不起作用。

```
document.getElementById('rot3posDisp').textContent = 'C'; 
```

# c - 在 for 循环中使用 i 的历史是什么？

> ID：15078131
> 
> 赞同：1
> 
> 时间：2013-02-25T22:56:47.693
> 
> 标签：c, for-loop, fortran, history

在我遇到的所有编程语言中，似乎最好的做法是在循环迭代中使用变量 i。在嵌套循环中，通常 i 后跟 l。这似乎适用于静态编译和脚本语言。

这种做法的历史是什么？我是否标记整数、索引或其他内容？为什么，例如，考虑到数学背景，我们不使用更常见的 x。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:01:44.663

`i`代表最有意义，`index`因为循环在数组的每个元素上并且每个元素都被索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:00:17.977

我有两个理论：我可以代表 1）索引 2）整数（整数类型的值）

# c# - 这给了我一个“timer_Tick”匹配委托“System.EventHandler”的无重载' After I changed the line timer.Tick += new EventHandler(timer_Tick); to timer.Tick += timer_Tick; it still gives an error which is No overload for 'timer_Tick' matches delegate 'S 问问题 问问题 2013-02-25T22:56:51.997 328 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. After I changed the line timer.Tick += new EventHandler(timer_Tick); to timer.Tick += timer_Tick; it still gives an error which is No overload for 'timer_Tick' matches delegate 'System.EventHandler'namespace App3 { public sealed partial class MainPage : Page { public MainPage() { this.InitializeComponent(); } private int myCount; protected override void OnNavigatedTo(NavigationEventArgs e) { DispatcherTimer timer = new DispatcherTimer(); timer.Tick += timer_Tick; timer.Interval = TimeSpan.FromSeconds(5); timer.Start(); } protected override void OnNavigatedFrom(NavigationEventArgs e) { base.OnNavigatedFrom(e); } private void Btm_Click(object sender, RoutedEventArgs e) { App3.timer.Start(); } private void timer_Tick(object sender, EventArgs e) { myCount++; Label.Text = myCount.ToString(); } The reason you keep getting the inner nodes is because you incorrectly iterate over the outer list twice. The inner loop should iterate only over tag: doc = new XmlSlurper().parse("things.xml") doc.thing.each { thing -> println "thing index: ${thing.@indexNum}" thing.children().each { tag -> println " ${tag.name()}: ${tag.text()}" } } Output: thing index: 1 a: 123 b: 456 c: 789 thing index: 2 a: 123 b: 456 c: 789 c# 4 0 回答 0 Related 7 android - 在android中制作可点击的textview 1 jquery - 是否可以仅从指定的高度对 div 的宽度进行动画处理和更改，而其余部分保持原样？ 2 wcf - WCF ServiceContract的方法返回Task 和超时 2 python - linux-watch 命令：显示剩余时间 0 python - 为什么 django UpdateView 会在服务器重新启动之前返回 404？ 1 c# - C# - 删除部分列表框项目 1 php - 如何在 MySql 语句中获取方程的累计总数 1 java - Java/Webdriver - 打开一个 Firefox 实例 - firefoxbinary 和 setenvironmentproperty 3 c# - 正则表达式验证字母数字字符串的长度 2 qt-creator - libvlc_new (0, NULL); 分段故障 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15078133
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#

After I changed the line timer.Tick += new EventHandler(timer_Tick); to timer.Tick += timer_Tick; it still gives an error which is No overload for 'timer_Tick' matches delegate 'System.EventHandler'namespace App3

{

```
public sealed partial class MainPage : Page
{
    public MainPage()
    {

        this.InitializeComponent();

    }
    private int myCount;
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        DispatcherTimer timer = new DispatcherTimer();
        timer.Tick += timer_Tick;
        timer.Interval = TimeSpan.FromSeconds(5);
        timer.Start();

    }

    protected override void OnNavigatedFrom(NavigationEventArgs e)
    {
        base.OnNavigatedFrom(e);
    }

    private void Btm_Click(object sender, RoutedEventArgs e)
    {
        App3.timer.Start();
    }

          private void timer_Tick(object sender, EventArgs e)
    {
        myCount++;
        Label.Text = myCount.ToString();
    } 
```

# mysql - 数据库中的序列化 SQL

> ID：15078139
> 
> 赞同：0
> 
> 时间：2013-02-25T22:57:28.563
> 
> 标签：mysql, sql

我有一个使用 Woocommerce/Wordpress 建立基本 ecomm 商店的客户。在数据库中，所有订单项目都被序列化。例如：

```
a:1:{i:0;a:10:{s:2:"id";s:2:"25";s:12:"variation_id";s:0:"";s:4:"name";s:10:"The Hobbit";s:3:"qty";i:1;s:9:"item_meta";a:0:{}s:13:"line_subtotal";s:4:"17.5";s:17:"line_subtotal_tax";s:4:"1.84";s:10:"line_total";s:4:"17.5";s:8:"line_tax";s:4:"1.84";s:9:"tax_class";s:0:"";}} 
```

不是数据库天才 - 为什么要序列化任何数据？这有什么好处吗？此外，是否可以反序列化 SQL 以检索该数组中的各个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:00:26.987

这不是序列化的 SQL，而是序列化的数据，其格式看起来像是来自 PHP 的`serialize()`函数。您可以`unserialize()`通过 PHP 运行它，但在原始 SQL 中没有真正可靠的方法来执行此操作。

在这种情况下，这似乎将无模式数据（即，对于特定记录可能存在也可能不存在的数据，本质上可能是任意的）保存到数据库中。

# python - Restart socket server in python

> ID：15078141
> 
> 赞同：2
> 
> 时间：2013-02-25T22:57:38.017
> 
> 标签：python, sockets, restart

I've wrote a simple socket server in python (OS X). I want the server to restart when a client terminate the communication, so that the client can do a reconnect to the server. Look at the code below, what do i have to do at the "lost contact" IF? I'm completely new to Python.

Here is the code:

```
import socket              
import os

s = socket.socket()       
host = socket.gethostname() 
port = 5555               

os.system('clear') 
print 'Server started'
print 'Waiting'

s.bind((host, port))       
s.listen(5)                 
c, addr = s.accept()     
print 'Contact', addr   
while True:
    msg = c.recv(1024)
    if not msg:
       s.close
       print "Lost contact"
       exit ()
    else: 
       print msg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T20:55:14.017

我不知道你是否找到了答案，但我在寻找同样的问题时发现了这个。我试图重置服务器上的套接字，以便我可以连接到下一个客户端，所以我尝试使用 socket.close() 然后重新初始化整个套接字，但实际上你不需要在服务器端做任何事情，只需在客户端使用 socket.close() ，另一个客户端就可以连接而不会搞砸服务器（我意识到这现在可能对你没有多大帮助，但万一其他人做了我想让他们知道的事情）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-02T13:50:11.217

如果我得到你，你想在客户端断开连接时再次收听，所以这应该完成它的工作：

```
import socket              
import os

s = socket.socket()       
host = socket.gethostname() 
port = 5555               

os.system('clear') 
print 'Server started'
print 'Waiting'

def server():
  s.bind((host, port))       
  s.listen(5)                 
  c, addr = s.accept()     
  print 'Contact', addr   
  while True:
      msg = c.recv(1024)
      if not msg:
         s.close
         print "Restarting..."
         server()
      else: 
         print msg 
```

# ruby-on-rails - 使用测试/虚拟应用程序测试 Rails gem，/tmp 文件夹被破坏......不知何故

> ID：15078142
> 
> 赞同：0
> 
> 时间：2013-02-25T22:57:44.173
> 
> 标签：ruby-on-rails, testing, ruby-on-rails-3.2, gem

我正在编写一个 gem，它必须`//= require "XYZ"`根据应用程序启动时的配置选择 XYZ.js 文件的哪个版本可用于 sprockets 语句。我的解决方案是将`XYZ.variant.js`or复制`XYZ.variant2.js`到`/tmp/cache/<gemname>/XYZ.js`Rails 应用程序中。如果我手动测试，这似乎可行；如果我去`test/dummy`文件夹并通过正确找到`rackup`的功能测试功能。`XYZ.js`如果我通过另一个 Rails 应用程序测试 gem，它可以工作（通过`path:`Gemfile）。

`/tmp/cache/<gemname>/XYZ.js`但是，当我为这个 gem 运行测试套件时，它失败了，因为在初始复制到`/tmp/cache/assets`. 我不明白这在测试套件和其他 2 种工作方法中如何表现不同。就好像初始化顺序不同之类的。有什么特别的东西可以通过运行来`rackup`改变初始化顺序吗？

请注意，测试套件在此之前运行良好，特别是添加到执行 tmp 复制的代码中。这只是`enginex`本来会生成的普通代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:43:23.357

这与初始化程序无关，而是另一个破坏 tmp 文件夹的测试用例（用于生成器）。

# sql-server - 需要有关表关系的建议

> ID：15078143
> 
> 赞同：0
> 
> 时间：2013-02-25T22:57:46.613
> 
> 标签：sql-server, database, database-design, relational-database

我有一张桌子`Users`：

```
 [UserId] [int] IDENTITY(1,1) NOT NULL,
    [UserName] [nvarchar](20) NOT NULL,
    [Email] [nvarchar](100) NOT NULL,
    [Password] [nvarchar](128) NOT NULL,
    [PasswordSalt] [nvarchar](128) NOT NULL,
    [Comments] [nvarchar](256) NULL,
    [CreatedDate] [datetime] NOT NULL,
    [LastModifiedDate] [datetime] NULL,
    [LastLoginDate] [datetime] NOT NULL,
    [LastLoginIp] [nvarchar](40) NULL,
    [IsActivated] [bit] NOT NULL,
    [IsLockedOut] [bit] NOT NULL,
    [LastLockedOutDate] [datetime] NOT NULL,
    [LastLockedOutReason] [nvarchar](256) NULL,
    [NewPasswordKey] [nvarchar](128) NULL,
    [NewPasswordRequested] [datetime] NULL,
    [NewEmail] [nvarchar](100) NULL,
    [NewEmailKey] [nvarchar](128) NULL,
    [NewEmailRequested] [datetime] NULL 
```

此表与1对**1 关系**`Profiles`：

```
 [UserId] [int] NOT NULL,
    [FirstName] [nvarchar](25) NULL,
    [LastName] [nvarchar](25) NULL,
    [Sex] [bit] NULL,
    [BirthDay] [smalldatetime] NULL,
    [MartialStatus] [int] NULL 
```

我需要连接`user`到数据库中的所有其他表，所以最好：
1）从`Users`- 到其他表建立关系？
2）从`Profiles`- 到其他表建立关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:17:54.063

由于表 [Users] 包含 Identity 值，因此是 [UserID] 值的来源，我将创建所有外键返回给它。从性能的角度来看，假设您在 [UserID] 列上设置的两个表上都有聚集索引，那么性能影响应该很小。

从技术上讲，我认为 [Users] 表每行可以包含更多数据，因此索引可以跨越更多页面，并且查找时可能存在毫秒差异，但我认为将其关联回创建 [UserID] 的表更有意义] 并且名称相似。也就是说，你真的可以做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:39:24.507

如果 PK`Profiles`是 FK to `Users`，我将保持一致性并`Users`在数据库中的其他关系中用作父表。

但是，如果它是真正的一对一而不是一对零或一对一的关系，那也没关系。

另一个考虑因素是任何应用程序如何访问此数据库中的数据。应用程序是否使用 OR/M 之类的实体框架，它知道 FK 关系？如果是这样，请考虑使用具有基于子表的查询最常访问的列的表。例如，一个应用程序可能会到处显示`Profiles.LastName`并且`Profiles.FirstName`很少从`Users`表中读取任何内容。`Profiles`在这种情况下，您将通过在表外建立关系为您的数据库节省一些 I/O，并为您的开发人员节省一些击键。

# php - Select many to many entity collection using DQL

> ID：15078144
> 
> 赞同：0
> 
> 时间：2013-02-25T22:57:46.770
> 
> 标签：php, symfony, doctrine-orm

I have to entities that have ManyToMany relation with linking table. Like this:

```
class User
{

    /**
     * @ORM\ManyToMany(targetEntity="Post")
     * @ORM\JoinTable(name="favorite_posts",
     *      joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="post_id", referencedColumnName="id")}
     *      )
     **/
    private $favoritePosts;
}

class Post
{
    /**
     * @ORM\ManyToMany(targetEntity="User", mappedBy="favoritePosts")
     */
    private $usersInFavorite;
} 
```

And I can get all user's favorite posts using a User entity object:

```
$favorites = $user->getFavoritesPosts(); 
```

But I have no idea how to get **EXACTLY THE SAME** result using DQL or Doctrine Query Builder. Under result i mean an array of POST entity objects.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:15:07.630

Based on this [exemple](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/getting-started.html#queries-for-application-use-cases)

If you want to fetch it by dql,

```
$dql = "SELECT p FROM Posts p INNER JOIN p.$usersInFavorite u WHERE u= ?1";

$query = $entityManager->createQuery($dql)
                       ->setParameter(1, $user);
$favoritePosts = $query->getResult(); 
```

I tested it this time and i found the results as requested.

if you have the id of the user entity instead of the entity the same code will work with $user being the id of the user.

# javascript - How to return a variable from getItemMetadata?

> ID：15078147
> 
> 赞同：1
> 
> 时间：2013-02-25T22:58:01.300
> 
> 标签：javascript, jquery, slickgrid

I have a calendar grid and I want to colspan based on startcolumn + duration. How can I pass the variable col to the result of getItemMetadata?

I am using this example: [http://mleibman.github.com/SlickGrid/examples/example-colspan.html](http://mleibman.github.com/SlickGrid/examples/example-colspan.html)

**This works**

```
dataView.getItemMetadata = function (row) {
  var col = 3;
  return {
    "columns": {
       3 : {
         "colspan": 3
        }
     }
  };
}; 
```

**This doesnt work**

```
dataView.getItemMetadata = function (row) {
  var col = 3;
  return {
    "columns": {
       col : {
         "colspan": 3
        }
     }
  };
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:19:39.167

这就是你想要的：

```
dataView.getItemMetadata = function (row) {
  var col = 3, columns = {};
  columns[col] = { "colspan": 3 }
  return { "columns": columns };
}; 
```

# php - PHP Regex: Extract lucky and charms from lucky charms

> ID：15078152
> 
> 赞同：0
> 
> 时间：2013-02-25T22:58:53.070
> 
> 标签：php, expression

Reqex Question: Extract words

```
lucky
charms 
```

from string:

```
<a>lucky <b>charms</b></a> 
```

My attempt:

```
preg_match_all("/<(.*)>(.*)<\/(.*)>+/is", $text, $matches);
print_r($matches); 
```

Result:

```
Array
(
    [0] => Array
        (
            [0] => <a>lucky <b>charms</b></a>
        )

    [1] => Array
        (
            [0] => a>lucky <b>charms</b
        )

    [2] => Array
        (
            [0] => 
        )

    [3] => Array
        (
            [0] => a
        )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:07:40.800

结束标签和下一个开始标签之间的所有内容怎么样

```
preg_match_all("/\>([^\<]+)\</is", $text, $matches); 
```

然后你想要的比赛在`$matches[1]`

```
Array
(
    [0] => Array
        (
            [0] => >lucky <
            [1] => >charms<
        )
    [1] => Array
        (
            [0] => lucky 
            [1] => charms
        )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:03:17.643

如果您始终具有该结构，则可以使用：

```
preg_match("#<(.*?)>(.*?)<(.*?)>(.*?)</\\3></\\1>#is", '<a>lucky <b>charms</b></a>', $matches); 
```

其中`$matches`包含：

```
array(5) {
  [0]=>
  string(26) "lucky charms"
  [1]=>
  string(1) "a"
  [2]=>
  string(6) "lucky "
  [3]=>
  string(1) "b"
  [4]=>
  string(6) "charms"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T23:03:33.520

您的正则表达式不合适，因为 * 已准备好使用？使 * non-gready 或更改您的正则表达式

```
<([^>]+)>(.*?)</\1> 
```

# c++ - Storing value before return in a variable

> ID：15078153
> 
> 赞同：0
> 
> 时间：2013-02-25T22:58:56.090
> 
> 标签：c++, coding-style, return, return-value

Here is a fragment of code:

```
bool EqualsA(const Foo& a, const Foo& b)
{
    return a == b;
}

bool EqualsB(const Foo& a, const Foo& b)
{
    const bool result = a == b;

    return result;
}

int MethodA()
{
    return GetValue() * GetOtherValue();
}

int MethodB()
{
    const int result = GetValue() * GetOtherValue();

    return result;
} 
```

I wanted to know if there is any difference in returning values in these two different ways (instant return or store result in a variable). I think that storing is better for debugging but is there any performance loss (I don't think there is) or any other pros and cons for using one of those.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T23:02:54.550

编译器可以自由地优化掉局部变量，因此性能将是相同的。

在许多代码分析工具中，这被标记为代码异味，我倾向于同意。[可以使调试器查看堆栈上的返回值，](https://stackoverflow.com/questions/267674/inspect-the-return-value-of-a-function-in-gdb)因此局部变量不会购买任何东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T23:02:43.120

`operator ==`在为类型对象选择的重载返回的值`Foo`是类型的合理假设下`bool`，一个体面的编译器会在使用大量优化选项时优化你的临时存储，因此**对于性能来说，这并不重要**。

我的建议是选择使您的代码更具可读性或更便于维护或调试的形式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T23:02:23.150

几乎可以肯定没有区别。只要程序的行为与您编写的一样，编译器就可以对您的代码做任何喜欢的*事情*。所以任何好的编译器都会摆脱无意义的初始化。

但是，可能会出现无法使此初始化消失的情况。例如，如果用于通过引用返回类类型结果的`operator*`重载，则该类类型的构造函数可能会产生一些副作用。如果是这样，编译器就无法摆脱初始化，因为它改变了程序的可观察行为。`GetValue() * GetOtherValue()``const`

`operator*`但是，如果按值返回，为什么不是这样呢？那么这将成为复制省略的候选者，并且编译器可以摆脱该构造，而不管它是否有副作用。

# c# - 这两个实体实现中哪一个在 ASP.net MVC 中更好

> ID：15078158
> 
> 赞同：0
> 
> 时间：2013-02-25T22:59:22.967
> 
> 标签：c#, asp.net, sql, asp.net-mvc, entity-framework

我是 ASP.net MVC 的初学者。并且比 WebForms 更喜欢它。

所以我决定开始一个包含大约 6 个表的项目：

1.  画廊
2.  管理员
3.  会话
4.  会话图像
5.  优惠
6.  信息

我创建了两个项目：`FP.WebUI`和`FP.Domain`。

在我的域项目中，我创建了 3 个文件夹`Abstract`，`Concrete`并且`Entities`.

在 Abstract 文件夹内有 6 个接口`IGallery`，`ISessions`.. 等等。每个接口都有这样的东西：

```
namespace FP.Domain.Abstract
{
    public interface IGallery
    {
        IQueryable<Gallery> Gallery { get; }

    }
} 
```

文件夹内`Concrete`还有另外 7 个类 : `EFDbGallery`, `EFDbSessions`... 并且`EFDbContext`继承自`DbContext`类。

上面的每个类（除了`EFDbContext`），都实现了每个对应的接口。

*现在，当我想到它时，我发现我可以创建一个定义所有实体的接口，并且`Concrete`文件夹内只有一个类实现该接口。*

* * *

我真的不知道什么更好：

**6 个接口**，每个实体**6 个类**。

或者

**1 个接口**，**1 个**返回所有实体的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:41:22.747

您似乎偶然发现了存储库模式。典型的架构决策是创建一个接口

```
interface IRepository
{
    IQueryable<Gallery> Query { get; }
} 
```

然后让您的 ORM 类实现存储库接口。

```
class MyDbContext : DbContext , IRepository
{

} 
```

现在，要回答您的问题，我应该使用 6 个类和 6 个接口还是 1 个类和 1 个接口，答案绝对是 NO！

典型的模式需要一个 GENERIC 接口（所以实际上你有 6 个接口，但只有一个接口源，如果你需要额外的调用，你可以扩展泛型）。

```
//Actually this implementation is edging on 
//Unit Of Work
interface IRepository<T>  
{
    IQueryable<T> Query { get; }
    void Insert(T item);
    void SaveChanges();
} 
```

然后您的 EfContext 公开所有接口。原因是您的控制器通常只需要一个接口即可工作，这使得在您的控制器上进行模拟/伪造测试要容易得多（您不需要创建未使用方法的实现，例如 GalleryControllerTest 的 InfoQuery）。

如果您发现任何接口都需要特定于域的代码，您可以扩展 IRepository 接口。

```
interface IGalleryRepository : IRepository<Gallery>  
{
    void SomeSpecialOperation(Gallery item);
} 
```

最后，如果/当您开始引入控制反转时，这种模式的实现将使生活变得更加轻松。

PS 我通常将 ACTUAL EF 代码（即具体的存储库）重构为单独的程序集，以防万一您决定从项目中删除 EF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T01:02:59.797

我会使用 7 个类，因为它们将承担不同的职责。

.

# netbeans - 为什么我不能在 Netbeans 中运行 Coffeescript 项目？

> ID：15078162
> 
> 赞同：0
> 
> 时间：2013-02-25T22:59:38.203
> 
> 标签：netbeans, coffeescript

[新手] 我下载了 Netbeans 7.3 RC2 并安装了它和 CoffeeScript 插件。然后我创建了一个新的 CoffeeScript 项目，它给了我两个文件——HelloWorld.coffee 和 Cakefile。我尝试运行该项目，但“运行”菜单下的“运行主项目”命令是暗淡的，表明我无法选择它。我如何运行这个程序？（我对此很陌生；我没有尝试过任何其他版本的 NetBeans 或 Coffeescript。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:14:35.600

netbeans-coffeescript-plugin 用于在 netbeans ide 中对 cofeescriptfiles 进行语法高亮显示。您仍然需要第三方工具将您的咖啡脚本编译成 javascript 以便运行它们。例如，您可以在 ruby​​ 中使用保护宝石

# c# - WMI Win32_PageFileSetting

> ID：15078167
> 
> 赞同：1
> 
> 时间：2013-02-25T23:00:09.937
> 
> 标签：c#, .net, wmi, wmi-query

此代码使用 WMI 没有产生任何结果。我正在使用以下 WMI 代码在 Wind 7 上进行测试。

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher("root\\CIMV2",
                                    "SELECT * FROM Win32_PageFileSetting");

foreach (ManagementObject queryObj in searcher.Get())
    { 

    }

// The for loop does not get executed. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:15:41.020

它应该工作。您可能在所有驱动器上禁用了“分页”吗？在这种情况下 searcher.Get() 返回一个空集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-26T21:51:58.687

根据您尝试收集的信息，您可以使用`Select * from Win32_PageFileusage`提供页面文件信息的哪个。

我也遇到了问题`SELECT * FROM Win32_PageFileSetting`，而且大多数时候它返回的是空集合。

# android - BroadcastReceiver 从相机捕获图像

> ID：15078168
> 
> 赞同：0
> 
> 时间：2013-02-25T23:00:13.243
> 
> 标签：android, image, camera, broadcastreceiver

我想要一个广播接收，当用户在本机相机上拍照时，我截取了这张照片。

使用此代码：

```
<receiver android:name=".PictureReceiver" >
    <intent-filter android:priority="10000" >
        <action android:name="android.intent.action.CAMERA_BUTTON" />

        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</receiver> 
```

当用户拍照时，PictureReceiver 被激活，但我不知道如何或是否可以拍照

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T06:44:15.143

当用户拍照时，没有可用于过滤动作的广播动作。

检查链接[http://developer.android.com/reference/android/content/Intent.html#ACTION_CAMERA_BUTTON](http://developer.android.com/reference/android/content/Intent.html#ACTION_CAMERA_BUTTON)，只有“android.intent.action.CAMERA_BUTTON”可用于检测按下的“相机按钮”。

# c - 多线程 - 每个线程在特定时间后调用函数

> ID：15078170
> 
> 赞同：1
> 
> 时间：2013-02-25T23:00:20.623
> 
> 标签：c, linux, multithreading, signals, alarm

我希望所有线程（在 Linux 上运行的多线程 C 代码中）在特定时间后调用一个函数。我试过了*alarm()*。它不是线程安全的：*[以这种方式只能调度一次 SIGALRM 生成。如果尚未生成 SIGALRM 信号，则调用将导致重新安排生成 SIGALRM 信号的时间](http://pubs.opengroup.org/onlinepubs/009695399/functions/alarm.html)*。

有没有办法实现这样的功能并保证线程会调用该函数并在那时离开其当前任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T13:04:48.287

你有一个包含所有`pthread_t`其他线程的数组吗？如果是这样，则迭代数组并用于`pthread_kill`将信号发送到其他线程。

您可以在主线程中执行此操作，也可以在单独的线程中执行此操作。

请注意，在信号处理程序中您可以安全地做的事情并不多。没有 I/O 除了`write`, 特别是。

# c++ - C++ 类/结构大小

> ID：15078172
> 
> 赞同：1
> 
> 时间：2013-02-25T23:00:27.767
> 
> 标签：c++, class, struct, sizeof

嗨，我对类/结构的大小有一些问题这是我的 Graphnode.h，我只有 4 个变量 - 一个 16 无符号字符数组，三个无符号字符，我认为大小应该是 19。为什么会这样32？

```
Graphnode currentNode; 
cout<< sizeof(currentNode)<<endl;// why this is 32 ?
cout<< sizeof(currentNode.state)<< endl;// this is 16 
```

图节点.h：

```
#include <stdio.h>
#include <stdlib.h>
#include <tr1/array>

//using namespace std;
class Graphnode {

public:
    std::tr1::array<unsigned char, 16> state;
    unsigned char x;
    unsigned char depth;
    unsigned char direction;
    Graphnode(std::tr1::array<unsigned char, 16>,unsigned char,unsigned char, unsigned char);
    Graphnode();

};
Graphnode::Graphnode()
{
    int i=0;
    for(i=0;i<16;i++)
    {
       state[i] = 0;
    }
    x = 0;
    depth = 0;
    direction = 0;
}

Graphnode::Graphnode(std::tr1::array<unsigned char, 16> _state,unsigned char _x,unsigned char _d,unsigned char _direction)
{   
    int i=0;
    for(i=0;i<16;i++)
    {
       state[i] = _state[i];
    }
        x = _x;
        depth = _d;
        direction = _direction;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:02:26.003

因为编译器不会将数据结构成员一个接一个地布局；它还会在两者之间留下[填充](http://en.wikipedia.org/wiki/Data_structure_alignment#Data_structure_padding)。

通常这意味着任何结构都将是某个数量的倍数，具体取决于它包含的类型和目标平台，即使字段大小的总和更小。

所有编译器通常[都提供](http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.110%29.aspx)非标准[扩展](http://gcc.gnu.org/onlinedocs/gcc/Structure_002dPacking-Pragmas.html)，使您可以或多或少地控制此打包。

# c# - ASP.net ValidationSummary C#

> ID：15078174
> 
> 赞同：0
> 
> 时间：2013-02-25T23:00:30.107
> 
> 标签：c#, asp.net

我有两个问题是 C# Web 应用程序中单选按钮列表的形式。这些问题需要与它们关联的字段验证器，并且我的 Web 控件末尾还有一个 ValidationSummary。当我单击“提交”按钮时，旁边的每个问题都会出现两个必填字段验证，并且验证摘要通过说明“回答以下问题：”正确工作，然后列出每个未选​​择的问题. 我遇到的问题是当我选择两个问题之一时，“必填字段”消息会在问题旁边消失，但不会出现在 ValidationSummary 中。How can I get the ValidationSummary to update or refresh when one of the questions in the error messages are selected? 如果我需要更具体，请告诉我。

```
<asp:RadioButtonList ID="Question1" RepeatLayout="Flow" runat="server">
     <asp:ListItem Text="Yes" Value="Yes"></asp:ListItem>
     <asp:ListItem Text="No" Value="No"></asp:ListItem>
</asp:RadioButtonList>
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
     Text="Required" ErrorMessage="Question 1" 
     Display="Dynamic" ControlToValidate="Question1"
     EnableClientScript="true">
</asp:RequiredFieldValidator>

<asp:RadioButtonList ID="Question2" RepeatLayout="Flow" runat="server">
     <asp:ListItem Text="Yes" Value="Yes"></asp:ListItem>
     <asp:ListItem Text="No" Value="No"></asp:ListItem>
</asp:RadioButtonList>
<asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
     Text="Required"  ErrorMessage="Question 2" 
     Display="Dynamic" ControlToValidate="Question2" 
     EnableClientScript="true">
</asp:RequiredFieldValidator>
<asp:ValidationSummary ID="ValidationSummary1" runat="server" 
     HeaderText="Answer the following questions:" 
     DisplayMode="BulletList" 
     EnableClientScript="true"/>

<asp:Button ID="buttonSubmit" runat="server" Text="Submit" 
     OnClick="btnSubmit_OnClick"/> 

//Code behind for button
protected void btnSubmit_OnClick(object sender, EventArgs e)
{
    Response.BufferOutput = true;
    Response.Redirect("~/Page.aspx");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:21:28.723

我很确定摘要默认情况下不会动态更新，而只会在表单提交时更新。

通常，您可以通过挂接客户端onblur事件并调用验证符号（）来解决这个问题，但是当所选的广播按钮更改时，看起来RadioButtonList不会触发此事件。

下一个候选者将是客户端的 onClick 事件，但 RadioButtonList 控件没有 OnClientClick 事件。

因此，当我测试它时对我有用的解决方案是为 RadioButtonList 中的每个 ListItem 挂钩客户端 onClick 事件。像这样：

```
<asp:RadioButtonList ID="Question1" RepeatLayout="Flow" runat="server">
    <asp:ListItem Text="Yes" Value="Yes" onClick="ValidationSummaryOnSubmit()"></asp:ListItem>
    <asp:ListItem Text="No" Value="No" onClick="ValidationSummaryOnSubmit()"></asp:ListItem>
</asp:RadioButtonList> 
```

但是，如果您有一堆想要做的事情，这将很快变得丑陋。可能会考虑将 RadioButtonList 子类化，并在将每个子列表项发送到客户端之前向每个子列表项添加服务器端添加的 ListItem onclick 钩子，然后使用您的自定义版本的 RadioButtonList 而不是库存版本。

# state-machine - 在 SCXML 状态机中创建超时

> ID：15078176
> 
> 赞同：5
> 
> 时间：2013-02-25T23:00:40.043
> 
> 标签：state-machine, scxml

在[SCXML](http://www.w3.org/TR/scxml/)状态机中，我怎么能说*“在我进入此状态 3 分钟后触发一个事件，但如果我在该状态下坐 2.9 分钟然后离开，则不会。如果我重新进入该状态，请重新启动计时器（不要不要在 0.1 分钟内关闭）”*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T23:00:40.043

用于[`<send>`](http://www.w3.org/TR/scxml/#send)在您进入状态时触发延迟事件（具有任何名称，例如“超时”），并[`<cancel>`](http://www.w3.org/TR/scxml/#cancel)在您退出状态时用于移除计时器。您必须确保为`<send>`您计划稍后取消的每个实例创建一个唯一 ID。

```
<scxml xmlns='http://www.w3.org/2005/07/scxml' version='1.0'>
  <state id="s1">
    <onentry><send id="state1-timer" event="timeout" delay="180s"/></onentry>
    <onexit><cancel sendid="state1-timer"/></onexit>
  </state>
  <!-- ... --->
</scxml> 
```

[*[注意：根据CSS2 时间规范](http://www.w3.org/TR/1998/REC-CSS2-19980512/syndata.html#q20)，您只能使用`s`(seconds) 或`ms`(milliseconds) 作为延迟时间。因此，3 分钟是。`180s`*]

# python - Python argparse 条件参数

> ID：15078181
> 
> 赞同：1
> 
> 时间：2013-02-25T23:01:01.400
> 
> 标签：python, argparse

我正在创建一个需要使用 argparse 的条件参数的程序。我想根据是否输入了先前的参数在我的代码中生成新参数。这是我希望我的代码看起来如何的基本示例

```
import argparse
parser = argparse.ArgumentParser()

parser.add_argument("-bowtie",action = "store_true",help="use to run bowtie")
args = parser.parse_args()

if args.bowtie:
    parser.add_argument( add some new argument here )
    args = parser.parse_args() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:58:03.687

我最近做了很多与此非常相似的事情。查看子解析器：

```
parser = argparser.ArgumentParser
subparsers = parser.add_subparsers('-bowtie')
subparser = subparsers.add_parser()
subparser.add_argument('new argument') 
```

# ruby-on-rails - 模仿下一个方法

> ID：15078184
> 
> 赞同：0
> 
> 时间：2013-02-25T23:01:13.217
> 
> 标签：ruby-on-rails, ruby

我有一个控制器方法（连同下面未显示的代码）根据消息索引的当前编号呈现消息，每次调用都会递增。数据库中有 6 条消息，前 3 条消息一切正常，但是一旦索引达到 3（在初始化方法中设置为零），该`next_message`方法将返回索引 0 处的消息，并保持围绕前三个消息而不是移动到第四个消息。我对这段代码的唯一目标是检索数据库中的所有 6 条消息并一一显示。

你能解释为什么会发生这种情况吗？Puts 语句显示索引肯定会增加。请注意，无论如何我都是一个蹩脚的业余程序员，所以我意识到代码可能丑陋且效率低下（例如，在每次调用时查询每条消息似乎很浪费）所以如果有办法在解决问题的同时改进它，我会永远感激。

```
def next_,essage
   #... (some code ommitted)
   session[:message_index] += 1
   messages = Message.all
   message_index = session[:message_index]
   next_msg = messages[message_index]

   render :json {:next_message => next_msg}
end 
```

# javascript - 删除克隆元素上的淘汰赛 js 绑定

> ID：15078187
> 
> 赞同：2
> 
> 时间：2013-02-25T23:01:28.250
> 
> 标签：javascript, jquery, knockout.js

我正在使用淘汰赛 js 模板绑定功能将项目集合呈现给元素：

```
<script type="text/javascript">
    ko.applyBindings(new function () {
        this.childItems = [{ Text: "Test", ImageUrl: "Images/Image.png" }];
    });
</script>

<script type="text/html" id="template">
    <div class="childItem" data-bind="attr: { title: Text }">
        <img data-bind="attr: { src: ImageUrl }" />
    </div>
</script> 

<div class="childSelector" data-bind="template: { name: 'template', foreach: childItems }">
</div> 
```

单击时，子项被克隆并放置到另一个元素中：

```
$(".childSelector").on("click", ".childItem", function () {
    var clone = $(this).clone()[0];
    ko.cleanNode(clone);
    $(".targetNode").append(clone);
}); 
```

问题是当源数据发生变化，模板重新绑定到新数据时，会抛出如下错误：

> 未捕获的错误：无法解析绑定。消息：ReferenceError：文本未定义；绑定值：attr: { title: Text }

我发现另一个帖子建议使用`ko.cleanNode(element)`删除淘汰赛的绑定，但这并没有解决我的问题。

有没有办法删除克隆元素上的淘汰赛绑定以防止重新绑定时出现此错误？如果不是，我将通过从单击的元素中提取所需的数据来“手动”克隆元素。

[这](http://jsfiddle.net/QJu5u/)是我正在做的一个简单示例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:14:57.747

您可以通过遍历 DOM 并删除`data-bind`属性和剔除注释来从元素中删除所有剔除绑定。

使用`removeDataBindings(clone);`但首先清理节点`ko.cleanNode(clone)`以清除任何事件处理程序。

```
var commentNodesHaveTextProperty = document.createComment("test").text === "<!--test-->";
var startCommentRegex = commentNodesHaveTextProperty ? /^<!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*-->$/ : /^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/;
var endCommentRegex =   commentNodesHaveTextProperty ? /^<!--\s*\/ko\s*-->$/ : /^\s*\/ko\s*$/;

function isStartComment(node) {
    return (node.nodeType == 8) && (commentNodesHaveTextProperty ? node.text : node.nodeValue).match(startCommentRegex);
}

function isEndComment(node) {
    return (node.nodeType == 8) && (commentNodesHaveTextProperty ? node.text : node.nodeValue).match(endCommentRegex);
}

function traverseNode(node, func) {
    func(node);
    node = node.firstChild;
    while (node) {
        traverseNode(node, func);
        node = node.nextSibling;
    }
}

function removeDataBindings(element) {
    var koComments = [];

    traverseNode(element, function (node) {
        if (isStartComment(node) || isEndComment(node)) {
            koComments.push(node);
            return;
        }
        //remove the 'data-bind' attributes
        if (node.nodeType === 1) { //ELEMENT_NODE
            node.removeAttribute('data-bind');
        }
    });

    //remove Knockout binding comments
    for (i = 0; i < koComments.length; i++) {
        node = koComments[i];
        if (node.parentNode) {
            node.parentNode.removeChild(node);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:25:12.390

Oliver，像这样使用 jQuery 克隆绑定到淘汰赛的元素不是一个好主意。您应该对`targetNode`. 如果您还没有这样做，最好阅读[Knockout 教程](http://learn.knockoutjs.com/)以很好地了解基本用途。

如果您尝试使用克隆按钮保留项目列表，那么这是一个[简单的小提琴](http://jsfiddle.net/tyrsius/hc6xU/)，只使用 Knockout 来做到这一点。如果您想做其他事情，请告诉我；你的问题对你的目标并不完全清楚。

HTML：

```
<div data-bind="foreach: items">
    <span data-bind="text: $data"></span>
    <button data-bind="click: $parent.clone">Clone</button></br>
</div> 
```

JS：

```
var ViewModel = function(data) {
    var self  = this;
    self.items = ko.observableArray(data);
    self.clone = function(item) {
        //The ko.toJS here is a handy copy tool for viewModels
        //It isn't necessary for simple arrays like this one
        //But I included it because for an array of objects, you will want to use it
        self.items.push(ko.toJS(item));
    };
}; 
```

# php - 用于自定义帖子类型的 Wordpress 附件插件

> ID：15078191
> 
> 赞同：0
> 
> 时间：2013-02-25T23:01:48.530
> 
> 标签：php, wordpress

我正在尝试获取自定义帖子类型的附件插件，但由于附件已更新，我无法显示它。

```
define( 'ATTACHMENTS_LEGACY', true ); // force the legacy version of Attachments 
```

我已将 LEGACY 定义为使用旧版本的附件（我确信它在版本 1 中有效），但它现在只显示帖子和页面类型，而不是我的自定义帖子类型“属性”。

这是我在 single-property.php 中的代码

```
 <?php
                        if( function_exists( 'attachments_get_attachments' ) ){
                            $attachments = attachments_get_attachments();
                            $total_attachments = count( $attachments );
                            if( $total_attachments ) :
                                for( $i=0; $i<$total_attachments; $i++ ) : ?>
                                <img src="<?php echo $attachments[$i]['location']; ?>" title="<?php echo $attachments[$i]['title']; ?>" />
                                <?php endfor; ?>

                            <?php endif; ?>
                    <?php } ?> 
```

我也试过在这里创建一个自定义实例 - [http://wordpress.org/extend/plugins/attachments/other_notes/](http://wordpress.org/extend/plugins/attachments/other_notes/)但我在这一行遇到语法错误：

$fields => 数组（

T_DOUBLE_ARROW 上的语法错误。

任何帮助将不胜感激，正如我所说，它在附件更新之前有效。

这是有问题的网站 - [http://www.james-hayward.com/property/gloucester-road/](http://www.james-hayward.com/property/gloucester-road/)（通常附件出现在任何属性页面的右侧）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:06:11.523

放

定义（'ATTACHMENTS_LEGACY'，真）；// 强制使用旧版附件

在配置文件的顶部而不是底部，它起作用了。

# javascript - j对话框顶部的确认

> ID：15078197
> 
> 赞同：0
> 
> 时间：2013-02-25T23:02:14.297
> 
> 标签：javascript

我是 html 和 jquery 的新手。我有一个对话框，在尝试关闭它时，我需要询问一条确认消息，该消息应显示在现有对话框的顶部。我尝试使用 jconfirmation，但它在关闭现有对话框后出现。但我需要确认出现在现有对话框之上。我该怎么做？

```
$("#ref").load('myTest.html').dialog({
create:function(e,u) {
   // ETC
},
close:function(e,u){
  //ADD CODE TO SHOW CONFIRMATION ON TOP
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:05:26.280

嗨，对话框将在关闭后触发关闭回调。尝试使用 beforeClose 事件。您应该能够使用与 close 相同的回调

```
$("#ref").load('myTest.html').dialog({
   create:function(e,u) {
      // ETC
   },
   beforeClose:function(e,u){
      //ADD CODE TO SHOW CONFIRMATION ON TOP
   }
}); 
```

[http://docs.jquery.com/UI/API/1.8/Dialog#event-beforeClose](http://docs.jquery.com/UI/API/1.8/Dialog#event-beforeClose)

# php - 无法完成这项工作：根据 SO 条目访问站点根目录之外的文件

> ID：15078198
> 
> 赞同：0
> 
> 时间：2013-02-25T23:02:15.663
> 
> 标签：php, apache

我正在尝试学习如何访问站点根文件夹之外的文件。我在 SO [HERE](https://stackoverflow.com/questions/8676144/reading-image-from-outside-public-html-with-php)上发现了一篇有趣的帖子，其中提供了一些非常简单的代码：

“如果您想提供对文档根目录之外的文件的访问权限，则必须通过脚本来完成。最简单的方法是：

图像.php：

```
<?php
header('Content-type: image/jpeg');
readfile('/path/to/picture/outside/doc/root/file.jpg');
?> //original post was missing this closing tag 
```

在你的 html 中：

```
<img src="image.php"> 
```

"

我还在[这里](https://stackoverflow.com/questions/10530001/how-to-securely-store-files-on-a-server/10530250#10530250)阅读了运行 Apache（我正在运行 Apache 2.0）的 cPanel 服务器上的正确路径，该路径被列为：

```
/var/www/username 
```

我尝试了所有这些，用正确的路径和我自己的帐户用户名修改了上面的第一个代码。我上传了`image.php`文件和调用它的页面，当我测试页面时，我得到了 nada。查看源代码并检查 Firebug 中的元素，它显示了人们可能期望的内容：

```
<img src="image.php" /> 
```

那么......我在这里错过了什么？原始问题将此解决方案检查为有效答案。

我已经看到了一整天的提及`mod_rewrite`（我一整天都在这）并且不确定这是否在这里有效。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:05:22.043

在 Web 主机管理器 (WHM) 中，您需要为要允许在其根目录之外访问的每个用户启用 PHP open_basedir Tweak。

如果您在 linux 环境中使用 cPanel，应该可以通过访问[http://yourdomain.com/whm获得 WHM](http://yourdomain.com/whm)

参考[http://docs.cpanel.net/twiki/bin/view/11_36/WHMDocs/WebHome](http://docs.cpanel.net/twiki/bin/view/11_36/WHMDocs/WebHome)

# configuration - nginx中error_page的绝对路径？

> ID：15078201
> 
> 赞同：9
> 
> 时间：2013-02-25T23:02:24.023
> 
> 标签：configuration, nginx, webserver, absolute-path, custom-error-pages

有没有办法可以为 nginx error_pages 设置绝对路径？不是绝对的`http://`，而是绝对的`/usr/var/nginx/errors/500.html`。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T00:46:20.200

当然可以，但以间接的方式：

```
error_page 500 /500.html;
location = /500.html {
       root   /usr/var/nginx/errors;
       allow all;
       internal;
} 
```

见[http://wiki.nginx.org/HttpCoreModule#error_page](http://wiki.nginx.org/HttpCoreModule#error_page)

# c# - XNA DrawString() 仅绘制部分字符串

> ID：15078203
> 
> 赞同：3
> 
> 时间：2013-02-25T23:02:28.487
> 
> 标签：c#, xna

`DrawString()`我对in有问题`XNA`。我`SpriteBatches`对多个逻辑层使用多个。例如：背景、对象、菜单等。

在我的菜单批处理中，我绘制了一个菜单（背景中的大灰色框）、按钮（菜单上的较小灰色框）和按钮的字符串。

问题： http: [//ompldr.org/vaGw4YQ/Unbenannt.png](http://ompldr.org/vaGw4YQ/Unbenannt.png)

但是由于某种原因，字符串没有完全绘制。有谁知道为什么？

**编辑：**

```
_menuLayer.Begin(SpriteSortMode.BackToFront, BlendState.AlphaBlend);
        if (_menu != null)
        {
            _menuLayer.Draw(_menuBoard, new Vector2(graphics.PreferredBackBufferWidth / 2 - 160, graphics.PreferredBackBufferHeight / 2 - 240), Color.White);
        }
        _menuLayer.End();
        _buttonLayer.Begin(SpriteSortMode.BackToFront, BlendState.AlphaBlend);
        if (_menu != null)
        {
            foreach (Button button in _menu.Buttons)
            {
                if (button.Pressed)
                {
                    _buttonLayer.Draw(_menuButtonPressed, button.Location, Color.White);
                    _buttonLayer.DrawString(_text, button.Text, button.GiveStringLocation(_text), Color.Black);
                }
                else
                {
                    _buttonLayer.Draw(_menuButton, button.Location, Color.White);
                    _buttonLayer.DrawString(_text, button.Text, button.GiveStringLocation(_text), Color.Black);
                }
            }
        }
        _buttonLayer.End();

<?xml version="1.0" encoding="utf-8"?>
<!--
This file contains an xml description of a font, and will be read by the XNA
Framework Content Pipeline. Follow the comments to customize the appearance
of the font in your game, and to change the characters which are available to draw
with.
-->
<XnaContent xmlns:Graphics="Microsoft.Xna.Framework.Content.Pipeline.Graphics">
  <Asset Type="Graphics:FontDescription">

    <!--
    Modify this string to change the font that will be imported.
    -->
    <FontName>Arial</FontName>

    <!--
    Size is a float value, measured in points. Modify this value to change
    the size of the font.
    -->
    <Size>20</Size>

    <!--
    Spacing is a float value, measured in pixels. Modify this value to change
    the amount of spacing in between characters.
    -->
    <Spacing>0</Spacing>

    <!--
    UseKerning controls the layout of the font. If this value is true, kerning information
    will be used when placing characters.
    -->
    <UseKerning>true</UseKerning>

    <!--
    Style controls the style of the font. Valid entries are "Regular", "Bold", "Italic",
    and "Bold, Italic", and are case sensitive.
    -->
    <Style>Bold</Style>

    <!--
    If you uncomment this line, the default character will be substituted if you draw
    or measure text that contains characters which were not included in the font.
    -->
    <!-- <DefaultCharacter>*</DefaultCharacter> -->

    <!--
    CharacterRegions control what letters are available in the font. Every
    character from Start to End will be built and made available for drawing. The
    default range is from 32, (ASCII space), to 126, ('~'), covering the basic Latin
    character set. The characters are ordered according to the Unicode standard.
    See the documentation for more information.
    -->
    <CharacterRegions>
      <CharacterRegion>
        <Start>&#32;</Start>
        <End>&#126;</End>
      </CharacterRegion>
    </CharacterRegions>
  </Asset>
</XnaContent> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:57:44.190

尝试使用 SpriteSortMode.Immediate。否则，我认为问题可能出在你做事的方式上。将渲染留给 UI 之外的类似乎很麻烦。您应该能够告诉按钮进行绘制，并且它应该自己绘制。或者实际上只是告诉你的 UI 进行绘制，它会绘制所有控件，这些控件会绘制它们的子控件等。

这样你就可以在层次结构中构建你的 UI::)

稍微构建你的 UI；有一个像 UIControl 之类的基类；

```
List<UIControl> Children { get; protected set; }

Update(MyInputSystem input, float dt)
{
    UpdateChildren(input, dt);
}

UpdateChildren(MyInputSystem input, float dt)
{
    foreach(var child in Children)
        child.Update(input, dt);
}

Draw(SpriteBatch spriteBatch)
{
    DrawChildren(spriteBatch);
}

DrawChildren(SpriteBatch spriteBatch)
{
    foreach(var child in Children)
        child.Draw(spriteBatch);
} 
```

然后你有一个面板类：

```
class Panel: UIControl {

Vector2 Position { get; set; }
Texture2D Texture { get; set; }

override Draw(SpriteBatch spriteBatch)
{
    spriteBatch.Draw(Texture, Position, Color.White);
    base.Draw(spriteBatch);
}

} 
```

然后你有一个标签类：

```
class Label: Panel{

SpriteFont Font { get; set; }
String Text { get; set; }
Vector2 TextOffset { get; set; }
Color TextColor { get; set; }

override Draw(SpriteBatch spriteBatch)
{
    spriteBatch.Draw(Texture, Position, Color.White);
    spriteBatch.DrawString(Font, Text, Position + TextOffset,Text Color);
    DrawChildren(spriteBatch);
}

} 
```

和一个按钮类：

```
class Button: Label { //Inherit label, so we dont need to create som much new code

public event EventHandler<EventArgs> Click;

Rectangle _Bounds
public Rectangle Bounds
{
    get
    {
        if (_Rectangle.Width == 0)
            _Rectangle = new Rectangle((int)Position.X,(int)Position.Y, Texture.Width, Texture.Height);

        return _Texture;
    }
}

override Update(MyInputSystem input, flaot dt)
{
    if (input.MouseClicked && Bounds.Contains(input.MousePosition))
        Click(this, new EventArgs());
}

} 
```

您可能已经注意到我这里没有任何 SpriteBatch.Begin/End？那是因为：

```
class UI
{
List<UIControl> Controls;

Update(MyInputSystem input, flioat dt)
{
    foreach(var control in Controls)
       control.Update(input, dt);
}

Draw(SpriteBatch spriteBatch)
{
    spriteBatch.Begin(/*Parameters*/);
    foreach(var control in Controls)
       control.Draw(spriteBatch);
    spriteBatch.End();
}
} 
```

赶上我的漂移？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T04:45:39.580

看起来您的字体只允许您使用某些字符。

```
<CharacterRegions>
  <CharacterRegion>
    <Start>&#32;</Start>
    <End>&#126;</End>
  </CharacterRegion>
</CharacterRegions> 
```

确保您的字符在开始和结束标记的 ASCII 值内，或者更改开始和结束标记以包含您想要的字符。

[http://www.asciitable.com/](http://www.asciitable.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T01:01:54.337

您使用的字体可能有问题。确保您使用的字体是“.ttf”并尝试几种不同的字体。我强烈建议您使用 Microsoft 推荐的字体之一。链接： http: [//go.microsoft.com/fwlink/ ?LinkId=104778&clcid=0x409](http://go.microsoft.com/fwlink/?LinkId=104778&clcid=0x409)

# git - 将更改推送到 master 并更新下一个发布分支

> ID：15078210
> 
> 赞同：1
> 
> 时间：2013-02-25T23:02:50.047
> 
> 标签：git

我是 Git 新手，刚刚负责处理构建和发布。

我们有一个名为 2.15 的远程分支。大约 2 周前，其他人创建了一个名为 2.16 的远程分支；但是，从那时起，我们对 2.15 进行了更改。

今天是发布日，所以我需要将从 2.15 到现在的所有更改发送给“master”，然后将它们也拉到 2.16。

我一直在寻找正确的方法来做到这一点，但我对答案没有信心。我想也许我可以做这样的事情：

```
git checkout 2.15
git pull origin 2.15
git push origin master
git checkout 2.16
git pull origin master 
```

我接近了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:06:34.380

您需要合并`2.15`到`master`然后`2.16`推送这两个分支。你的命令是错误的，你需要类似的东西

```
git checkout master
git merge 2.15
git checkout 2.16
git merge 2.15
git push origin master 2.15 2.16 
```

当然，您需要检查合并是否正确，并可能在推送之前测试结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:21:27.007

我建议您首先确保您的本地 2.15 和 master 分支包含来自远程 repo 的所有更改：-

```
git checkout master
git pull origin master
git checkout 2.15
git pull origin 2.15 
```

我假设您还没有本地 2.16 分支，所以让我们创建它与远程 brancb 匹配：-

```
git checkout -b 2.16 remote/2.16 
```

然后，*假设您想要 master*中的 2.16 更改，请使用以下命令合并从 2.15 到 2.16 的更改：-

```
git merge 2.15 
```

然后将 2.16（现在也包含 2.15）合并到 master：-

```
git checkout master
git merge 2.16 
```

最后将所有这些更改推送到您的远程仓库：-

```
git push origin master
git push origin 2.16
git push origin 2.15 
```

# javascript - Javascript InsertBefore - 在父 div 中的不同 div 中

> ID：15078213
> 
> 赞同：1
> 
> 时间：2013-02-25T23:02:56.983
> 
> 标签：javascript

根据下面的设置，我想在不同的子 div（父 div 中的 2 个子 div）中插入一个 hr 元素。insertbefore 方法适用于同一 div 中的元素，但不适用于其他子 div 中的元素（请参见下面的代码）。我可以使用不同的方法来实现这一点还是我想要不可能的事情？

```
<body>

<div id="whole section">

<div id="group_a">
<h3 id="event_1">Heading 1</h3>    
<p> some text </p>

**// I would like to insert an hr element here**

<h3 id="event_2">Heading 2</h3>
<p> more text </p>

</div>

<div id="group_b">

**// I can only insert code here though**

<script type="text/javascript">
function add_hr(){
  var new_hr = document.createElement('hr');
  var reference = document.getElementById('event_2');
  document.body.insertBefore(new_hr, reference);
}

window.onload = function(){add_hr();};

</script>

</div>
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T23:08:40.653

[`insertBefore`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-952280727)要求引用元素是调用它的元素的直接子元素。你的线路

```
document.body.insertBefore(new_hr, reference); 
```

...告诉浏览器在 .直接包含`new_hr`的元素之前插入。但**不**直接包含引用元素，它在一个. 所以你得到一个错误，因为引用元素不能*直接*在你插入的元素中找到。`reference``document.body``document.body` **`div`**

 ***您可以通过使用参考元素的父级来解决此问题：

```
reference.parentNode.insertBefore(new_hr, reference); 
```

[实例](http://jsbin.com/ipudiy/1)| [资源](http://jsbin.com/ipudiy/1/edit)***

# php - PHP 在 5.4.10 版本中对异常的态度是否发生了变化？

> ID：15078219
> 
> 赞同：10
> 
> 时间：2013-02-25T23:03:17.680
> 
> 标签：php

以下内容适用于 PHP 5.3，但不适用于 PHP 5.4.10。

```
throw new Custom_Exception();

class Custom_Exception extends Exception {} 
```

PHP 5.4.10 将响应以下致命错误：

> 在...中找不到类“Custom_Exception”

有谁知道为什么？

ps 将类定义移到 throw 语句上方可以修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T02:55:44.540

我将您的代码放入名为 test.php 的文件中，并下载了[php-5.4.10](http://windows.php.net/downloads/releases/archives/php-5.4.10-Win32-VC9-x86.zip)

当我执行时：

```
php -c php.ini-development -f test.php 
```

我看到以下输出：

```
PHP Fatal error:  Uncaught exception 'Custom_Exception' in test.php:3
Stack trace:
#0 {main}
  thrown in test.php on line 3

Fatal error: Uncaught exception 'Custom_Exception' in test.php:3
Stack trace:
#0 {main}
  thrown in test.php on line 3 
```

我相信你有一个配置问题。你是从命令行测试吗？

编辑：

我还比较了 zend_compile.c 中的 do_bind_inherited_class 两个版本。

[来自 5.3 的 zend_compile.c](https://raw.github.com/php/php-src/PHP-5.3/Zend/zend_compile.c)

[来自 5.4.10 的 zend_compile.c](https://raw.github.com/php/php-src/PHP-5.4.10/Zend/zend_compile.c)

看起来他们只增加了对特征的支持。

我的回答是：不，我不相信态度已经改变。

# codeigniter - 将 CodeIgniter 项目上传到 cpanel

> ID：15078221
> 
> 赞同：0
> 
> 时间：2013-02-25T23:03:22.517
> 
> 标签：codeigniter, http-status-code-404, cpanel

我已经为此工作了一整天，但我找不到为什么我总是找不到 CI 404 页面。该项目在 localhost 中运行良好。可能是什么问题呢？这是我的 .htaccess

```
RewriteEngine on
RewriteCond $1 !^(index.php|css|js|jq|uploads|robots.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

我怀疑找不到默认控制器。

你认为我还应该向你展示什么？

我将不胜感激您的回答。

PD：我使用 CI 2.1.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:09:29.693

如果您已正确设置所有内容，请尝试将最后一行更改为：`RewriteRule ^(.*)$ /index.php/?$1 [L]`

编辑

由于禁用 .htaccess 并使用 index.php 时它不起作用，因此您需要检查 config.php 中的 base_url、index_page、uri_protocol 等...和 ​​routes.php 并确保默认控制器没有大写（阅读有关命名约定的更多信息，但我在评论中给你写了大致的想法）。

# android - 游戏网格无法针对 Android 上的不同手机进行适当缩放

> ID：15078222
> 
> 赞同：2
> 
> 时间：2013-02-25T23:03:23.697
> 
> 标签：android

我正在为我的游戏创建一个网格，但我希望网格的大小会有所不同，具体取决于手机的尺寸。当我运行代码时（注意：我从 ondraw 中删除了很多，只关心行 atm），看起来网格的大小在我的 HTC Desire 和 Wildfire 上是相同的 - 这使得网格在野火上看起来很完美，但是在欲望的网格下方有一个巨大的空间 - 因为欲望屏幕更大？我要问的是...

我如何使网格缩放到手机尺寸 - 我希望网格占据手机屏幕的大部分，但有一个边距。谢谢

```
 protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        padding = 8;
        for (int i = 0; i < 9; i++) {
            canvas.drawLine(padding + testWidth* i, padding, padding
                    + testWidth * i, testWidth* 8+padding, dark);
            canvas.drawLine(padding,  padding+testWidth* i, testWidth* 8
                    + padding, padding+testWidth* i, dark);
        }
    }

}
    public void onSizeChanged(int w, int h, int oldw, int oldh) {
        testWidth= w / 9f;
        testHeight = h / 9f;
        border = w;
        getRect(selX, selY, selRect);
        super.onSizeChanged(w, h, oldw, oldh);

    } 
```

编辑：我现在可以制作一个缩放到手机尺寸的网格，但它是一个矩形网格。看起来有点傻，我需要一个方形的。如果屏幕更大，也许我应该使填充更大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:12:21.087

这个答案是对 Nicolas Brown 的答案的补充，但您可以通过引入更多局部变量来更好地识别您的问题。例如，您的原始循环可以替换为：

```
padding = 8;
for (int i = 0; i < 9; i++) {
    int xposition = padding + testWidth * i;
    int yposition = padding + testHeight * i;
    // Horizontal line
    canvas.drawLine(padding, yposition, padding + testWidth * 8, yposition, dark);
    // Vertical line
    canvas.drawLine(xposition, padding, xposition, padding + testHeight * 8, dark);
} 
```

此外，正如 Nicolas 建议的那样，您没有考虑 8 像素填充。所以，在`onSizeChanged`你想要的：

```
testWidth = (w - 16f) / 9f;
testHeight = (h - 16f) / 9f; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:10:30.367

问题是打字错误。好像您已经复制并粘贴`testWidth`并忘记将其更改为。尝试这个：

```
protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        padding = 8;
        for (int i = 0; i < 9; i++) {
            canvas.drawLine(padding + testWidth* i, padding, padding
                    + testWidth * i, testWidth* 8+padding, dark);
            canvas.drawLine(padding,  padding+testHeight* i, testHeight* 8
                    + padding, padding+testHeight* i, dark);
        }
    } 
```

# android - 如何从 onHandleIntent (Android) 获取信息

> ID：15078226
> 
> 赞同：0
> 
> 时间：2013-02-25T23:03:36.683
> 
> 标签：android, android-intent, toast

我正在研究我`IntentService`的，我在其中循环生成值。在覆盖方法`onStartCommand()`和`onDestroy()`中，可以使用 显示消息`Toast`。`Toast`我也想在 中使用`onHandleIntent()`，但它不起作用。我知道有更好的方法（文件、属性等）来显示值，但我需要这些值，当它们被创建时。最终没有（仅用于控制，如果它工作正常）。拜托，你能帮我找出问题吗？提前致谢。

```
public class HelloIntentService extends IntentService {

  public HelloIntentService() {
      super("HelloIntentService");
  }

  @Override
  public int onStartCommand(Intent intent, int flags, int startId) {
      Toast.makeText(this, "service starting", Toast.LENGTH_SHORT).show();
      return super.onStartCommand(intent,flags,startId);
  }

  @Override
  protected void onHandleIntent(Intent intent) {

      long endTime = System.currentTimeMillis() + 5*1000;
      while (System.currentTimeMillis() < endTime) {
          synchronized (this) {
              try {
                  wait(endTime - System.currentTimeMillis());
              } catch (Exception e) {
              }
          }
      }}

  @Override
  public void onDestroy()
  {
      Toast.makeText(this, "Service is being destroyed now.", Toast.LENGTH_SHORT).show();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:20:44.810

onHandleIntent 根据[源代码](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/app/IntentService.java)在后台的单独线程上运行，因此没有任何更新 UI 的能力。我建议使用日志语句，而不是 Toasts 来显示您的信息：

```
Log.d("HelloIntentService","service starting"); 
```

# java - 多线程逻辑情况

> ID：15078227
> 
> 赞同：0
> 
> 时间：2013-02-25T23:03:47.963
> 
> 标签：java, multithreading

```
S1: Lookup for some input data
S2:  IF not found SET IT
S3:  INSERT DATA
S4:  ELSE RETURN 
```

最初没有存储数据。如果 2 个线程同时查找相同的输入数据，则查找在两种情况下都返回 FALSE。然后都经历了长 SET 阶段。最后，一个非同步的 Insert 方法中的单例服务 Thread Inserts 条目。

这样，虽然查找的目的是永远不要让相同的数据重复两次，但由于 2 个线程处理相同的数据，它的目的并没有解决。如何在多线程程序中处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:12:11.500

如果您正在使用数据库，那么您正在寻找的关键字是[upsert](https://stackoverflow.com/q/9871644/823393)。

如果是普通编码，你可能需要[atomics](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/package-summary.html)或者可能是[同步](http://onjava.com/onjava/excerpt/jthreads3_ch6/index1.html)。

如果你能澄清你的问题，也许我们可以提供进一步的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T01:05:33.140

应用双重检查锁定：

```
S1: Lookup for some input data
S2:  IF not found {
       synchronized(getClass()) {
S2-1:    Lookup for some input data
S2-2:    IF not found
S2-3:    INSERT DATA
       }
S3:  RETURN result of S1, S2-1, or S2-3 
```

# javascript - 表达式评估了 2 次

> ID：15078231
> 
> 赞同：5
> 
> 时间：2013-02-25T23:03:58.547
> 
> 标签：javascript, angularjs

在以下示例中：

测试.html

```
<!DOCTYPE html>
<html ng-app ng-controller="AppController">
    <head>
        <script type="text/javascript"  src="angular.js"></script>
        <script type="text/javascript"  src="script1.js"></script>
    </head>
    <body>
        <div ng-include="'test1.html'"></div>
        {{testFn()}}
    </body>
</html> 
```

test1.html

```
<div>{{testFn()}}</div> 
```

script1.js

```
function AppController($scope) {
    $scope.testFn = function() {
        console.log("TestFn");
        return "test";
    }
} 
```

发生 fn testFn 执行 4 次。我希望在控制台中只看到 2 个日志。即使，如果我删除

```
<div ng-include="'test1.html'"></div> 
```

有 2 个日志，而不仅仅是一个。我做错了什么？

更新：

角.js

```
// added console.log to original code
var ngBindDirective = ngDirective(function(scope, element, attr) {
  console.log("ngDirective", attr.ngBind);
  element.addClass('ng-binding').data('$binding', attr.ngBind);
  scope.$watch(attr.ngBind, function ngBindWatchAction(value) {
    console.log("ngDirective - scope.$watch", value);
    element.text(value == undefined ? '' : value);
  });
}); 
```

测试.html

```
<!DOCTYPE html>
<html ng-app ng-controller="AppController">
    <head>
        <script type="text/javascript"  src="angular.js"></script>
        <script type="text/javascript"  src="script1.js"></script>
    </head>
    <body>
        <div ng-bind="testFn()"></span>

    </body>
</html> 
```

安慰

```
createInjector - modulesToLoad undefined angular.js:2666
loadModules undefined angular.js:2756
createInjector - modulesToLoad 
["ng", Array[2]]
 angular.js:2666
loadModules 
["ng", Array[2]]
 angular.js:2756
loadModules ["ngLocale"] angular.js:2756
loadModules [] angular.js:2756
supportObject - key $locale angular.js:2702
provider - name $locale angular.js:2712
supportObject - key $compile angular.js:2702
provider - name $compile angular.js:2712
supportObject - key aDirective angular.js:2702
factory - name aDirective angular.js:2723
provider - name aDirective angular.js:2712
supportObject - key inputDirective angular.js:2702
factory - name inputDirective angular.js:2723
provider - name inputDirective angular.js:2712
supportObject - key textareaDirective angular.js:2702
factory - name textareaDirective angular.js:2723
provider - name textareaDirective angular.js:2712
supportObject - key formDirective angular.js:2702
factory - name formDirective angular.js:2723
provider - name formDirective angular.js:2712
supportObject - key scriptDirective angular.js:2702
factory - name scriptDirective angular.js:2723
provider - name scriptDirective angular.js:2712
supportObject - key selectDirective angular.js:2702
factory - name selectDirective angular.js:2723
provider - name selectDirective angular.js:2712
supportObject - key styleDirective angular.js:2702
factory - name styleDirective angular.js:2723
provider - name styleDirective angular.js:2712
supportObject - key optionDirective angular.js:2702
factory - name optionDirective angular.js:2723
provider - name optionDirective angular.js:2712
supportObject - key ngBindDirective angular.js:2702
factory - name ngBindDirective angular.js:2723
provider - name ngBindDirective angular.js:2712
supportObject - key ngBindHtmlUnsafeDirective angular.js:2702
factory - name ngBindHtmlUnsafeDirective angular.js:2723
provider - name ngBindHtmlUnsafeDirective angular.js:2712
supportObject - key ngBindTemplateDirective angular.js:2702
factory - name ngBindTemplateDirective angular.js:2723
provider - name ngBindTemplateDirective angular.js:2712
supportObject - key ngClassDirective angular.js:2702
factory - name ngClassDirective angular.js:2723
provider - name ngClassDirective angular.js:2712
supportObject - key ngClassEvenDirective angular.js:2702
factory - name ngClassEvenDirective angular.js:2723
provider - name ngClassEvenDirective angular.js:2712
supportObject - key ngClassOddDirective angular.js:2702
factory - name ngClassOddDirective angular.js:2723
provider - name ngClassOddDirective angular.js:2712
supportObject - key ngCspDirective angular.js:2702
factory - name ngCspDirective angular.js:2723
provider - name ngCspDirective angular.js:2712
supportObject - key ngCloakDirective angular.js:2702
factory - name ngCloakDirective angular.js:2723
provider - name ngCloakDirective angular.js:2712
supportObject - key ngControllerDirective angular.js:2702
factory - name ngControllerDirective angular.js:2723
provider - name ngControllerDirective angular.js:2712
supportObject - key ngFormDirective angular.js:2702
factory - name ngFormDirective angular.js:2723
provider - name ngFormDirective angular.js:2712
supportObject - key ngHideDirective angular.js:2702
factory - name ngHideDirective angular.js:2723
provider - name ngHideDirective angular.js:2712
supportObject - key ngIncludeDirective angular.js:2702
factory - name ngIncludeDirective angular.js:2723
provider - name ngIncludeDirective angular.js:2712
supportObject - key ngInitDirective angular.js:2702
factory - name ngInitDirective angular.js:2723
provider - name ngInitDirective angular.js:2712
supportObject - key ngNonBindableDirective angular.js:2702
factory - name ngNonBindableDirective angular.js:2723
provider - name ngNonBindableDirective angular.js:2712
supportObject - key ngPluralizeDirective angular.js:2702
factory - name ngPluralizeDirective angular.js:2723
provider - name ngPluralizeDirective angular.js:2712
supportObject - key ngRepeatDirective angular.js:2702
factory - name ngRepeatDirective angular.js:2723
provider - name ngRepeatDirective angular.js:2712
supportObject - key ngShowDirective angular.js:2702
factory - name ngShowDirective angular.js:2723
provider - name ngShowDirective angular.js:2712
supportObject - key ngSubmitDirective angular.js:2702
factory - name ngSubmitDirective angular.js:2723
provider - name ngSubmitDirective angular.js:2712
supportObject - key ngStyleDirective angular.js:2702
factory - name ngStyleDirective angular.js:2723
provider - name ngStyleDirective angular.js:2712
supportObject - key ngSwitchDirective angular.js:2702
factory - name ngSwitchDirective angular.js:2723
provider - name ngSwitchDirective angular.js:2712
supportObject - key ngSwitchWhenDirective angular.js:2702
factory - name ngSwitchWhenDirective angular.js:2723
provider - name ngSwitchWhenDirective angular.js:2712
supportObject - key ngSwitchDefaultDirective angular.js:2702
factory - name ngSwitchDefaultDirective angular.js:2723
provider - name ngSwitchDefaultDirective angular.js:2712
supportObject - key ngOptionsDirective angular.js:2702
factory - name ngOptionsDirective angular.js:2723
provider - name ngOptionsDirective angular.js:2712
supportObject - key ngViewDirective angular.js:2702
factory - name ngViewDirective angular.js:2723
provider - name ngViewDirective angular.js:2712
supportObject - key ngTranscludeDirective angular.js:2702
factory - name ngTranscludeDirective angular.js:2723
provider - name ngTranscludeDirective angular.js:2712
supportObject - key ngModelDirective angular.js:2702
factory - name ngModelDirective angular.js:2723
provider - name ngModelDirective angular.js:2712
supportObject - key ngListDirective angular.js:2702
factory - name ngListDirective angular.js:2723
provider - name ngListDirective angular.js:2712
supportObject - key ngChangeDirective angular.js:2702
factory - name ngChangeDirective angular.js:2723
provider - name ngChangeDirective angular.js:2712
supportObject - key requiredDirective angular.js:2702
factory - name requiredDirective angular.js:2723
provider - name requiredDirective angular.js:2712
supportObject - key ngRequiredDirective angular.js:2702
factory - name ngRequiredDirective angular.js:2723
provider - name ngRequiredDirective angular.js:2712
supportObject - key ngValueDirective angular.js:2702
factory - name ngValueDirective angular.js:2723
provider - name ngValueDirective angular.js:2712
supportObject - key ngMultipleDirective angular.js:2702
factory - name ngMultipleDirective angular.js:2723
provider - name ngMultipleDirective angular.js:2712
supportObject - key ngSelectedDirective angular.js:2702
factory - name ngSelectedDirective angular.js:2723
provider - name ngSelectedDirective angular.js:2712
supportObject - key ngCheckedDirective angular.js:2702
factory - name ngCheckedDirective angular.js:2723
provider - name ngCheckedDirective angular.js:2712
supportObject - key ngDisabledDirective angular.js:2702
factory - name ngDisabledDirective angular.js:2723
provider - name ngDisabledDirective angular.js:2712
supportObject - key ngReadonlyDirective angular.js:2702
factory - name ngReadonlyDirective angular.js:2723
provider - name ngReadonlyDirective angular.js:2712
supportObject - key ngSrcDirective angular.js:2702
factory - name ngSrcDirective angular.js:2723
provider - name ngSrcDirective angular.js:2712
supportObject - key ngHrefDirective angular.js:2702
factory - name ngHrefDirective angular.js:2723
provider - name ngHrefDirective angular.js:2712
supportObject - key ngClickDirective angular.js:2702
factory - name ngClickDirective angular.js:2723
provider - name ngClickDirective angular.js:2712
supportObject - key ngDblclickDirective angular.js:2702
factory - name ngDblclickDirective angular.js:2723
provider - name ngDblclickDirective angular.js:2712
supportObject - key ngMousedownDirective angular.js:2702
factory - name ngMousedownDirective angular.js:2723
provider - name ngMousedownDirective angular.js:2712
supportObject - key ngMouseupDirective angular.js:2702
factory - name ngMouseupDirective angular.js:2723
provider - name ngMouseupDirective angular.js:2712
supportObject - key ngMouseoverDirective angular.js:2702
factory - name ngMouseoverDirective angular.js:2723
provider - name ngMouseoverDirective angular.js:2712
supportObject - key ngMouseoutDirective angular.js:2702
factory - name ngMouseoutDirective angular.js:2723
provider - name ngMouseoutDirective angular.js:2712
supportObject - key ngMousemoveDirective angular.js:2702
factory - name ngMousemoveDirective angular.js:2723
provider - name ngMousemoveDirective angular.js:2712
supportObject - key ngMouseenterDirective angular.js:2702
factory - name ngMouseenterDirective angular.js:2723
provider - name ngMouseenterDirective angular.js:2712
supportObject - key ngMouseleaveDirective angular.js:2702
factory - name ngMouseleaveDirective angular.js:2723
provider - name ngMouseleaveDirective angular.js:2712
supportObject - key 
Object {$anchorScroll: function, $browser: function, $cacheFactory: function, $controller: function, $document: function…}
 angular.js:2702
provider - name $anchorScroll angular.js:2712
provider - name $browser angular.js:2712
provider - name $cacheFactory angular.js:2712
provider - name $controller angular.js:2712
provider - name $document angular.js:2712
provider - name $exceptionHandler angular.js:2712
provider - name $filter angular.js:2712
supportObject - key currencyFilter angular.js:2702
factory - name currencyFilter angular.js:2723
provider - name currencyFilter angular.js:2712
supportObject - key dateFilter angular.js:2702
factory - name dateFilter angular.js:2723
provider - name dateFilter angular.js:2712
supportObject - key filterFilter angular.js:2702
factory - name filterFilter angular.js:2723
provider - name filterFilter angular.js:2712
supportObject - key jsonFilter angular.js:2702
factory - name jsonFilter angular.js:2723
provider - name jsonFilter angular.js:2712
supportObject - key limitToFilter angular.js:2702
factory - name limitToFilter angular.js:2723
provider - name limitToFilter angular.js:2712
supportObject - key lowercaseFilter angular.js:2702
factory - name lowercaseFilter angular.js:2723
provider - name lowercaseFilter angular.js:2712
supportObject - key numberFilter angular.js:2702
factory - name numberFilter angular.js:2723
provider - name numberFilter angular.js:2712
supportObject - key orderByFilter angular.js:2702
factory - name orderByFilter angular.js:2723
provider - name orderByFilter angular.js:2712
supportObject - key uppercaseFilter angular.js:2702
factory - name uppercaseFilter angular.js:2723
provider - name uppercaseFilter angular.js:2712
provider - name $interpolate angular.js:2712
provider - name $http angular.js:2712
provider - name $httpBackend angular.js:2712
provider - name $location angular.js:2712
provider - name $log angular.js:2712
provider - name $parse angular.js:2712
provider - name $route angular.js:2712
provider - name $routeParams angular.js:2712
provider - name $rootScope angular.js:2712
provider - name $q angular.js:2712
provider - name $sniffer angular.js:2712
provider - name $templateCache angular.js:2712
provider - name $timeout angular.js:2712
provider - name $window angular.js:2712
decorator - serviceName $rootScope angular.js:2742
supportObject - key $rootElement angular.js:2702
factory - name $rootElement angular.js:2723
provider - name $rootElement angular.js:2712
---------------------------------------------
ngDirective testFn() angular.js:12363
TestFn script1.js:3
ngDirective - scope.$watch test angular.js:12366
TestFn script1.js:3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T23:30:03.940

更新：

在插入视图表达式并运行摘要循环时，Angular 将至少重新运行/插入每个表达式两次，以便在渲染之前“对其进行规范化”（请参阅​​此[github 问题](https://github.com/angular/angular.js/issues/1146)和此[SO 帖子](https://stackoverflow.com/questions/9682092/databinding-in-angularjs/9693933#9693933)）。

因此，这是预期的行为。

就此而言，如果您在视图表达式中使用范围方法，这些方法应该是幂等的（它们应该在给定相同输入的情况下提供相同的输出）。

# javascript - Javascript 时间出价

> ID：15078234
> 
> 赞同：0
> 
> 时间：2013-02-25T23:04:09.950
> 
> 标签：javascript, jquery, timing

我想制作在 1 秒后会提醒（'a'）的功能。但是如果在这 1s 内再次调用该函数，则计时会被清零。

像

```
bid();
//wait 500ms
bid();
//wait 300ms
bid();
//wait 1000ms
//now would be alert('a') 
```

我试过了：

```
$.holdTime = function(key,time)
{
    var time = time ? time : 500;

    if (!$.isArray($.mmTimeHold)) {
        $.mmTimeHold = new Array();
    }

    var isHold = $.mmTimeHold[key];

    $.mmTimeHold[key] = true;
    setTimeout(function(){
        $.mmTimeHold[key]=false;
    },time);

    isHold = isHold === undefined ? false : isHold;
    return isHold;
};

$.isHold = function(key)
{   
    if (!$.isArray($.mmTimeHold)) {
        $.mmTimeHold = new Array();
    }   
    var isHold = $.mmTimeHold[key]; 
    isHold = isHold === undefined ? false : isHold;
    return isHold;
} 
```

但它没有像我预期的那样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:08:00.563

我不确定这是否是您正在寻找的...

```
var timer = null;
function startBid(){
    clearTimeout(timer);
    timer = setTimeout(bid, 1000);
} 
```

# matlab - 如何使用 textscan 导入具有选定列的多个 csv 文件？

> ID：15078235
> 
> 赞同：1
> 
> 时间：2013-02-25T23:04:20.217
> 
> 标签：matlab, csv, textscan

我有大量的 csv 文件要处理。我只想要每个文件中的选定列，然后从某个文件夹加载所有文件，然后输出为一个组合文件。这是我的代码运行时出现错误......有人可以帮我解决这个问题吗？

```
data_directory = 'C:\Users\...\data';
numfiles = 17;
for n = 1:numfiles
    filepath = [data_directory,'data_', num2str(n),'_output.csv'];
    fid = fopen (filepath, 'rt');
    wanted_columns= [2 3 4 5 10 11 12 13 14 15 16 17 35 36 41 42 44 45 59 61];
    format = [];
    columns = 109;
for i = 1 : columns;
    if any (i == wanted_columns)
        format = [format '%s'];
    else
        format = [format '%*s'];
    end
end
    data = textscan(fid, format, 'Delimiter',',','HeaderLines',1);
    fclose(fid);
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T01:47:17.610

我认为您应该检查文件是否正确打开。错误消息似乎表明情况并非如此。如果不是，请检查是否`filepath`正确。

```
fid = fopen (filepath, 'rt');
if fid == -1
    error('Failed to open file');
end 
```

如果此处抛出错误，您就知道`'fopen'`.

当然，我不知道您的计算机上有哪些文件，但我假设`'...'`文件名中的文件不在您的实际 matlab 文件中，仅在您关于 SO 的问题中。但是会不会是你重复了这个词`'data'`，而实际的文件名只包含`'data'`一次？您现在的代码将产生像`''C:\Users\...\datadata_1_output.csv'`. 也许`'data'`应该删除 in`data_directory`或 in `filepath = ...`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:57:29.630

这是另一种以矢量化方式设置格式字符串的方法：

```
fcell = repmat({'%*s '},1,n_columns);
fcell(wanted_columns) = {'%s '};
formatstr = [fcell{:}]; 
```

注意`format`是 MATLAB 的内置函数，最好不要用于变量名。

# winapi - 如果没有建立 Internet 连接，则 MessageBox

> ID：15078236
> 
> 赞同：0
> 
> 时间：2013-02-25T23:04:20.933
> 
> 标签：winapi, assembly, x86, masm, masm32

我正在检查 Internet 连接状态，如果没有 Internet 连接，我想发送一个 MessageBox 我所拥有的是：

```
;build as a WINDOWS app

        .XCREF
        .NOLIST
        INCLUDE    \masm32\include\masm32rt.inc
        INCLUDE    \masm32\include\wininet.inc
        INCLUDELIB \masm32\lib\wininet.lib
        .LIST

;-------------------------------------------------------------------------

IsOnline PROTO   :LPSTR
Sleep PROTO STDCALL :DWORD

;-------------------------------------------------------------------------

IFNDEF FLAG_ICC_FORCE_CONNECTION
FLAG_ICC_FORCE_CONNECTION EQU 1
ENDIF

;-------------------------------------------------------------------------

        .CODE

IsOnline PROC    lpszURL:LPSTR

;Test Internet Connection
;
;lpszURL points to a zero-terminated test URL string (must start with "http://")
;
;Returns EAX = FALSE if not connected
;            = TRUE if connected
;        EDX = connection description (see InternetGetConnectedState documentation)

        push    eax
        mov     edx,esp

        INVOKE  InternetGetConnectedState,edx,0

        or      eax,eax
        jz      IsOnl0

        INVOKE  InternetCheckConnection,lpszURL,FLAG_ICC_FORCE_CONNECTION,0

IsOnl0: pop     edx
        ret

IsOnline ENDP

;-------------------------------------------------------------------------

szURL   db 'http://www.google.com',0

;-------------------------------------------------------------------------

_main   PROC

loop00: Invoke Sleep,5000 ;Sleep so it doesn't use 99% CPU
        INVOKE  IsOnline,offset szURL    
        or      eax,eax
        jz      loop00

        INVOKE  Beep,750,1000
        exit

_main   ENDP

;-------------------------------------------------------------------------

        END     _main 
```

现在我想添加这样的东西

```
 .data
    MyTitle db "No internet",0
    MyText db "No active internet connection found, retrying in 5 seconds.",0

            push 0
            push offset MyTitle
            push offset MyText
            push 0
            call MessageBoxA 
```

但我真的不知道我必须把它放在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:09:20.040

这个怎么样：

```
_main   PROC

loop00: 
        INVOKE  IsOnline,offset szURL    
        or      eax,eax
        jnz      done

        push 0
        push offset MyTitle
        push offset MyText
        push 0
        call MessageBoxA

        Invoke Sleep,5000 ;Sleep so it doesn't use 99% CPU

        jmp loop00

done:
        INVOKE  Beep,750,1000
        exit

_main   ENDP

.data
    MyTitle db "No internet",0
    MyText db "No active internet connection found, retrying in 5 seconds.",0 
```

这将首先等待 IsOnline 测试，如果失败，将等待 5 秒再试一次。否则它会在退出前发出哔哔声。

# d3.js - d3 可缩放地图的问题

> ID：15078237
> 
> 赞同：1
> 
> 时间：2013-02-25T23:04:29.303
> 
> 标签：d3.js

我在使用 d3 可缩放地图时遇到问题。

我正在从先前构建的 topojson 文件中加载地图，该文件带有一个`departments`对象（地图中的区域）和一个`maternidades`对象（地图中的几个点，最初用十字架渲染）。

我`d3.behavior.zoom`用来实现缩放行为，我希望它能够使用鼠标滚轮进行缩放并拖动平移。它适用于地图本身（区域）。但是，在任何缩放事件中，地图中的点都会立即移动到错误的位置。此外，点的路径不知何故从十字变为圆形！

您可以在此处重现该问题并查看代码：http: [//bl.ocks.org/monsieurBelbo/5033491](http://bl.ocks.org/monsieurBelbo/5033491)

这是代码：

```
<!DOCTYPE html>
<meta charset="utf-8">
<script src="http://d3js.org/d3.v3.js"></script>
<script src="topojson.v0.min.js"></script>
<html>
<style>
.background {
    fill: none;
    pointer-events: all;
}

.department {
    fill: #aaa;
    stroke: #fff;
    stroke-width: 1.5px;
}
</style>
<body>
<script>

d3.json("santafe.json", function(error, theProvince) {
    var width= 960, height= 500;
    var svg = d3.select("body").append("svg");
    var departments = topojson.object(theProvince, theProvince.objects.departments);

    // The projection
    var projection = d3.geo.mercator()
            .scale(14000)
            .center([-60.951,-31.2])
            .translate([width / 2, height / 2]);

    // The path
    var path = d3.geo.path()
            .projection(projection);

    // Zoom behavior
    var zoom = d3.behavior.zoom()
            .translate(projection.translate())
            .scaleExtent([height, Infinity])
            .scale(projection.scale())
            .on("zoom", function() {
                projection.translate(d3.event.translate).scale(d3.event.scale)
                map.selectAll("path.zoomable").attr("d", path);
            });

    // The map
    var map = svg.append("g")
            .classed("provinceMap", true)
            .call(zoom);

    map.append("rect")
            .attr("class", "background")
            .attr("width", width)
            .attr("height", height);

    // Departments
    map.selectAll(".department")
            .data(departments.geometries)
            .enter().append("path")
            .classed("department", true)
            .classed("zoomable", true)
            .attr("d", path);

    // Places
    map.selectAll(".place-label")
            .data(topojson.object(theProvince, theProvince.objects.maternidades).geometries)
            .enter().append("path")
            .classed("place", true)
            .classed("zoomable", true)
            .attr("d", d3.svg.symbol().type("cross"))
            .attr("transform", function(d) { return "translate(" + projection(d.coordinates.reverse()) + ")"; });
});

</script>
</body>
</html> 
```

有任何想法吗？谢谢！

**更新**

感谢@enjalot 的建议，通过重新翻译缩放行为的位置解决了这个问题。只需添加：

```
map.selectAll(".place").attr("transform", function(d) { return "translate(" + projection(d.coordinates) + ")"; }); 
```

缩放行为。在此处查看工作版本：http: [//tributary.io/inlet/5095947](http://tributary.io/inlet/5095947)

# java - 为什么 JUnit 套件类不执行自己的 Test、Before 和 After 注释？

> ID：15078241
> 
> 赞同：0
> 
> 时间：2013-02-25T23:05:03.613
> 
> 标签：java, junit, suite

为什么 JUnit Suite 类（在我的例子中称为 TestSuite.class）不执行自己的 Test、Before 和 After 注释？它只执行它自己的BeforeClass、AfterClass，然后是套件测试类的所有注释。我通过围绕这个理论创建一个测试项目证明了这一点： [https ://gist.github.com/djangofan/5033350](https://gist.github.com/djangofan/5033350)

任何人都可以参考我解释的地方吗？我需要真正理解这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:09:52.910

因为 TestSuite 不是测试本身。这些注释仅用于单元测试。有关示例，请参见[此处。](https://github.com/junit-team/junit/wiki/Aggregating-tests-in-suites)

```
public class FeatureTestSuite {
  // the class remains empty <----- important for your question
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:44:19.273

TestSuite 是一种识别一组你希望应用一些常见行为的测试的方法。

也许用一个例子更好地解释。

假设您正在对数据库 MyDB 中的订单表进行一些基本的 CRUD 测试。每个人都需要有 mydb 和存在的 orders 表，所以你把它们放在一个套件中。它设置数据库和表，运行测试，然后在套件超出范围之前删除数据库，一切都很好并且干净，可以用于下一次测试运行。否则，您必须在每个昂贵的测试中都这样做，或者更糟糕的是，以前测试的测试数据会导致其他测试经常明显随机失败，因为您会在它们之间创建隐式依赖关系。还有其他方法可以实现相同的目标，但是它们会使您的测试变得混乱，您必须记住调用它们。

你不必测试它。如果没有完成，您的任何测试都不会执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:19:22.700

正如其他人所说，这是因为 a`TestSuite`不是 a `Test`。它只是一个带有注解的类，用于对其他测试进行分组，这样运行起来更方便。

然而，它确实有一个特殊的属性，那就是 and 的`@BeforeClass`执行`@AfterClass`。启用这些以允许对套件进行全局设置/拆卸。它不执行任何测试（包括`@After`，`@Before`或任何规则）。

# python - Python - Pygame - 旋转不是很顺畅？[我知道为什么，就是想不出解决办法]

> ID：15078246
> 
> 赞同：0
> 
> 时间：2013-02-25T23:05:36.887
> 
> 标签：python, rotation, transform, pygame, blit

我正在制作一个简单的游戏来了解 Python 和 Pygame 的知识，但是，由于我以前没有使用过旋转，所以我遇到了一个问题。每次我的矩形旋转时，它都会变得越来越小，而我的游戏需要一个居中的旋转对象。

我有两个解决方案，也许三个。这些都行吗？如果没有，您有自己的解决方案吗？

1.  根据角度来回移动我的矩形的坐标 - 这将是一项艰苦的工作。
2.  有没有办法在对象的中间而不是左上角对对象进行 blit？这将是完美的
3.  使用精灵？？？我不确定它是否有帮助，我还没有研究或学习任何关于精灵的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:49:44.333

如果您发布一些代码，它将澄清您的问题。没有看到你的代码，我建议如下：像往常一样将矩形绘制到 Surface 上，然后使用[pygame.transform.rotate旋转 Surface](http://www.pygame.org/docs/ref/transform.html#pygame.transform.rotate)

# samba - Samba 通过 OpenVPN 共享，拆分隧道？

> ID：15078250
> 
> 赞同：1
> 
> 时间：2013-02-25T23:06:02.953
> 
> 标签：samba, openvpn

我希望我的 PC 连接到运行 OpenVPN + Samba + 文件管理软件的服务器。我将如何设置以使 PC 仅连接到服务器而不将所有互联网流量通过隧道传输到 VPN？我想保持 Samba Share 连接加密。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:18:14.237

你不应该从你的 OpenVPN 服务器推送默认路由——你只推送你想要访问的网络的路由。例如，我在内部网络上运行 OpenVPN，所以在 OpenVPN server.conf 我有这个：

```
push "route 10.10.2.0 255.255.255.0"
push "route 172.16.2.0 255.255.255.0" 
```

这将导致 Windows OpenVPN 客户端在连接后仅添​​加这 2 个网络的路由，因此不会影响默认路由和 Internet 流量。

需要注意的是，至少 Windows 7 可以通过网关识别不同的网络。如果网络没有网关，Windows 将无法识别该网络，并且您无法选择是家庭/工作/公共网络（如果使用 Windows 防火墙，这将拒绝 samba 访问）。

我使用的解决方法是添加一个具有大度量（999）的默认网关路由，这样它就不会被 Windows 用于路由。我在客户端配置文件中有这个，但可能它也可以放在服务器的配置中。

```
# dummy default gateway because of win7 network identity
route 0.0.0.0 0.0.0.0 vpn_gateway 999 
```

# java - 根据输入找到两个最高的数字

> ID：15078257
> 
> 赞同：-1
> 
> 时间：2013-02-25T23:06:21.887
> 
> 标签：java

我的任务是完成一个用户输入学生姓名和分数的程序。最后，程序应该输出得分最高的两个学生，但我只能输出得分最高的学生。

```
public class StudentScores
{
public static void main(String[] args) 
{
    Scanner input = new Scanner(System.in);
    System.out.print("Enter the number of students: ");
    int numStudents = input.nextInt();
    System.out.print("Enter the student's name: ");
    String Student1 = input.next();
    System.out.print("Enter the student's score: ");
    int Score1 = input.nextInt();

    for (int i = 0; i < numStudents - 1; i++) 
    {
        System.out.print("Enter the student's name: ");
        String Student = input.next();
        System.out.print("Enter the student's score: ");
        int Score = input.nextInt();

        if (Score > Score1) 
        {
            Student1 = Student;
            Score1 = Score;
        }
    }
    System.out.println(Student1 + "'s score is " + Score1);
}} 
```

我不确定的是如何根据用户输入计算出如何在混合中获得 Student2 和 Score 2。我想使用数组，但我必须使用循环，所以这就是我难住的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:13:09.327

```
if (Score > Score1) 
{
    Student2 = Student1;
    Score2 = Score1;
    Student1 = Student;
    Score1 = Score;
}
else if (Score > Score2)
{
    Student2 = Student;
    Score2 = Score;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:08:35.543

您可以将学生存储在一个数组中，然后对数组进行排序并返回前两个。

或者如果您只想存储最高的两个分数，那么您将需要一些嵌套比较器。

```
if (score > score2) {
    if (score > score1) {
        student2 = student1;
        score2 = score1;
        student1 = student;
        score1 = score;
    } else {
        student2 = student;
        score2 = score;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T23:11:33.883

您将需要另一对变量`Student2`来`Score2`跟踪第二个学生。您可以将两个分数都初始化为低于最小值的值（例如，如果分数范围从 0 到 10，您可以将它们初始化为 -1）；

```
String Student1 = "none", Student2 = "none";
int Score1 = -1, Score2 = -1;

for (int i = 0; i < numStudents; i++) 
{
    System.out.print("Enter the student's name: ");
    String Student = input.next();
    System.out.print("Enter the student's score: ");
    int Score = input.nextInt();

 if (Score > Score1) 
    {
        Student2 = Student1;
        Score2   = Score1;
        Student1 = Student;
        Score1   = Score;
    }
    else if (Score > Score2) {            
        Student2 = Student;
        Score2   = Score;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T23:13:00.590

您可以在 Java中使用[Arrays.sort() 方法。](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Arrays.html)正确的方法是创建一个带有名称和分数的“学生”对象。它看起来像这样：

```
public class Student implements Comparable {
     private int score;
     private String name;

     public Student(String name, int score)
     { // Constructor Code } 
```

让对象实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口，也就是写一个[compare 方法](http://www.javapractices.com/topic/TopicAction.do?Id=10)。对学生数组进行排序后，打印数组中的前两个姓名。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T23:19:33.740

为了便于排序（这适用于任何数量的学生），我建议班级`Student`处理分数和实施的名称`Comparable<Student>`。然后你必须编写一个`compareTo(Student student)`方法，如果分数`this`大于 ，则返回 1 `student`，如果它们相等则返回 0，否则返回 -1。然后你可以使用`Collections.sort()`(for `Collections`, ie `ArrayList`) 和`Arrays.sort()`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-25T23:19:52.380

A`TreeMap<Integer, String>`在这里很有用，它根据其键的自然顺序进行排序：

```
TreeMap<Integer, String> map = new TreeMap<Integer, String>();

Scanner input = new Scanner(System.in);
System.out.print("Enter the number of students: ");
int numStudents = input.nextInt();

for (int i = 0; i < numStudents; i++) {
    System.out.print("Enter the student's name: ");
    String Student = input.next();
    System.out.print("Enter the student's score: ");
    int Score = input.nextInt();
    map.put(Score, Student);
}

Map.Entry<Integer, String> entry1 = map.pollLastEntry();
Map.Entry<Integer, String> entry2 = map.pollLastEntry();
System.out.println("Highest score: " + entry1.getKey());
System.out.println("Highest scorer: " + entry1.getValue());
System.out.println("Second highest score: " + entry2.getKey());
System.out.println("Second highest scorer: " + entry2.getValue()); 
```

使用这种方法，找到第三、第四等最高分/得分者会容易得多。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-23T20:10:48.567

```
package deneme;

import java.util.Scanner;

public class HighestTwoScore {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        Scanner input = new Scanner(System.in);

        System.out.print("Enter the number of student: ");
        int numberOfStudents = input.nextInt();

        System.out.print("Enter the Students name and score: ");
        String name1 = input.next();
        int score1 = input.nextInt();

        System.out.print("Enter the Students name and score: ");
        String name2 = input.next();
        int score2 = input.nextInt();

        int controlScore = score1;
        String controlName = name1;
        if (score1 < score2) {
            score1 = score2;
            score2 = controlScore;
            name1 = name2;
            name2 = controlName;
        }

        int i = 0;
        while (i < numberOfStudents - 2) {
            System.out.print("Enter the Students name and score: ");
            String name = input.next();
            int score = input.nextInt();

            if (score > score1) {
                score2 = score1;
                name2 = name1;
                score1 = score;
                name1 = name;

            } else if (score > score2) {
                score2 = score;
                name2 = name;
            }

            i++;
        }
        System.out.println("Top student1 " + name1 + "'s score is " + score1);
        System.out.println("Top student2 " + name2 + "'s score is " + score2);
    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-05T19:14:13.743

```
import java.util.Scanner;

public class TwoLargestNumbers{

    public static void main(String[] args) {
        System.out.println("Enter number: ");

        Scanner input = new Scanner(System.in);

        int firstLarge = 0, secondLarge = 0;

        for (int i = 1; i <= 10; i++) {
            int num = input.nextInt();

            if (num >= firstLarge) {
                secondLarge = firstLarge;
                firstLarge = num;
            }

            if (num > secondLarge && num < firstLarge)
                secondLarge = num;

        }

        System.out.println("First large number is: " + firstLarge);
        System.out.print("Second large number is: " + secondLarge);
    }
} 
```

# html - 将 html 表单代码转换为单行嵌入代码

> ID：15078260
> 
> 赞同：0
> 
> 时间：2013-02-25T23:06:31.847
> 
> 标签：html

我花了几个小时寻找解决这个问题的方法。这可能很简单，但很好。

我正在使用带有一点 java 脚本的 html 和 CSS 编写我自己的 html 表单。在我使用 Wufoo 和 form stack 等在线服务之前。他们提供了简短的嵌入代码来添加到您的网站页面，而不是复制通常有 100 行长的整个表单代码。

我希望在我的表单上实现这一点，以使我的网页代码尽可能干净、清晰和简短。有没有人有插件或任何关于我如何使这项工作的想法。

需要明确的是，我不希望有人只提供代码并在路上。我想要可以为我指明正确方向的建议和想法。不要过度思考我的问题。一旦找到此问题的解决方案，我将更新我的问题以包含答案，以供以后查看和帮助未来的访问者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:11:42.047

您可以将表单放在单独的文件中，例如 form.htm，然后使用 PHP require("form.htm") 包含该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:13:17.017

尝试阅读 w3schools 上的教程：

[http://www.w3schools.com](http://www.w3schools.com)
[http://www.w3schools.com/html/html_forms.asp](http://www.w3schools.com/html/html_forms.asp)

那么您将需要使用服务器端语言（例如 php 或 asp）处理表单的内容。

# security - 用于防止路径遍历的权威正则表达式，以及用于处理相关项目的伪代码

> ID：15078266
> 
> 赞同：3
> 
> 时间：2013-02-25T23:06:48.927
> 
> 标签：security, node.js, http, language-agnostic

我正在创建一个网络服务器框架（在 Node.JS 中），并且我想将路径遍历作为内置功能包括在内，这样应用程序就不必这样做了。也许这可以成为保护路径遍历的权威指南，因此它对我以外的其他开发人员很有用。

我喜欢这段代码，因为它清楚易懂地处理跨多个操作系统的 UTF 编码字符。我认为这完全正确，但我想先和你们确认一下。

1.  从客户端获取`path`，将其与查询字符串分开，并确保第一个字符是`/`.

2.  如果 Path 包含`%2f`，则向客户端发送 HTTP 403 并停止。

3.  运行`path=decodeURIComponent(path)`或等效于您的语言，如果由于输入无效而失败则跳过

4.  为您的语言运行`path=encodeURIComponent(path)`或[等效](https://stackoverflow.com/q/6266377/463304)（该函数必须只输出字符`\x20-\x7e`并且第一个字符必须保持为`/`或`%2f`），以确保只有可打印的 ASCII 字符（根据定义，这将防止`NUL`字符攻击）。

5.  具体替换`%2f`为`/`. 全部替换，不区分大小写~

6.  对我喜欢的其他字符（如`+`, `&`, `=`）执行相同操作 - 将列表限制为仅可打印的 ASCII 字符 ( `\x20-\x7e`)（为了安全），跳过`%25`（为了一致性）。

7.  可以选择使用正则表达式来干净地清理路径遍历。（像`/test/../bob`刚刚成为的东西`/bob`）。确保正则表达式永远不会改变第一个字符是`/`.

8.  使用以下正则表达式以一种明显的方式防止路径遍历`s/\/\.?\.(?=\/|$)/\//g`。（允许`/..foobar/`，同时阻塞`/../`） - 全部替换，而不仅仅是第一个！

所以你怎么看？

这些是我要解决的安全项目，但如果我需要解决另一个项目，请告诉我。

*   防止`NUL`角色攻击（第 4 项）
*   进一步防止因操作系统对扩展 Unicode 字符的处理不一致而可能发生的篡改（第 4 项）
*   以明显/可读的方式防止路径遍历漏洞（第 8 项）
*   防止会导致不正确的相对 URL 路径的篡改（第 2 项和第 7 项）

我注意到第 7 项假设不会发生截断，但我认为这很好。最坏的情况是`/...longstuff/..foo`被截断为`/...longstuff/..`，相当于`/.`（对吗？）

# objective-c - 多部分方法名称必须以参数结尾吗？

> ID：15078269
> 
> 赞同：0
> 
> 时间：2013-02-25T23:06:59.113
> 
> 标签：objective-c

例如，以下方法有效：

```
- (void)feedBackController:(FeedbackController *)controller didReceiveLiveUnlikeComment:(NSString *)commentID; 
```

但是下一个方法不会：

```
- (void)feedBackController:(FeedbackController *)controller didReceiveLiveLike:; 
```

我收到语法错误：“预期：”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:11:20.540

如果你没有参数，你应该这样做：

```
- (void)feedBackControllerDidReceiveLiveLike:(FeedbackController *)controller; 
```

有关更多方法命名约定，请查看[Objective C 方法命名约定](https://stackoverflow.com/questions/8410602/objective-c-method-naming-convention)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:10:07.537

我想，你不得不提到第二个参数类型和名称

或者只是使用 id 作为类型并传递您需要的任何内容

# ajax - JSF Ajax 导航超时

> ID：15078272
> 
> 赞同：0
> 
> 时间：2013-02-25T23:07:27.877
> 
> 标签：ajax, jsf, navigation, timeout

我正在使用 selectonemenu 结合 ajax 进行导航。

JSF 代码

```
<p:selectOneMenu value="#{navigator.outcome}">                      
    <f:selectItem itemLabel="Select page..." />
    <f:selectItem itemValue="page1" itemLabel="Page 1" />
    <f:selectItem itemValue="page2" itemLabel="Page 2" />
    <f:selectItem itemValue="page3" itemLabel="Page 3" />
    <p:ajax event="change" listener="#{navigator.navigate}" />
</p:selectOneMenu> 
```

托管豆：

```
public void navigate() {
    FacesContext context = FacesContext.getCurrentInstance();
     NavigationHandler navigationHandler = context.getApplication()
            .getNavigationHandler();

    navigationHandler.handleNavigation(context, null, outcome
            + "?faces-redirect=true");
} 
```

我有一个问题，如果我让页面打开很长时间（可能是几个小时），ajax 导航似乎停止工作。有某种超时吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:17:09.530

而不是使用 ajax 导航使用以下内容：

```
<p:selectOneMenu value="#{navigator.outcome}" onchange="window.location =this.options[this.selectedIndex].value">                      
    <f:selectItem itemLabel="Select page..." />
    <f:selectItem itemValue="page1" itemLabel="Page 1" />
    <f:selectItem itemValue="page2" itemLabel="Page 2" />
    <f:selectItem itemValue="page3" itemLabel="Page 3" />

</p:selectOneMenu> 
```

即使会话超时，这也有效。

# javascript - 带有节点和父节点的循环未到达结束

> ID：15078273
> 
> 赞同：3
> 
> 时间：2013-02-25T23:07:27.993
> 
> 标签：javascript, nodes, parent-node

我正在尝试做一个简单的循环并检查节点/`parentNode`类名是否与数组中的字符串匹配。代码如下：

```
function isInside(list,node) {
    while( node !== undefined ) {
        for( var i = 0; i < list.length; i++ )
            if( node.className.indexOf(list[i]) > -1 )
                return true;
        node = node.parentNode;
    }
    alert(1); // The code does not reach this when false
    return false;
} 
```

任何想法这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:08:28.413

遵循这个模式：

```
var current = node;
while (current.parentNode){
 // do stuff with node
 current = current.parentNode

} 
```

# hibernate - 具有条件的别名的休眠用法

> ID：15078276
> 
> 赞同：6
> 
> 时间：2013-02-25T23:07:44.517
> 
> 标签：hibernate, alias, criteria

老实说，我对别名有点困惑，所以我希望有人能帮助我更好地理解它们。为了解释我所缺少的，我将使用示例。

可以说我有：

```
Criteria criteria = session.createCriteria(Car.class)
criteria.createAlias("doors", "doors"); 
```

这意味着现在我可以使用一些限制来找到位于左侧的门`Car`或沿着这些线的东西。

现在我的问题是如果我在哪里添加多个别名：

```
criteria.createAlias("doors", "doors").createAlias("doors.keytype", "keytype"); 
```

和

```
criteria.createAlias("tier".tier); 
```

这是什么意思？我的`criteria`对象有所有这些别名吗？在这种情况下，`getAlias()`方法会返回什么？

从 API：

> 获取此条件实例封装的实体的别名。

我的印象是所有的别名都被这个实例封装了？我错了吗？我是否不知何故失去了我的第一个别名？

另外，如果我做类似的事情：

```
Criteria criteri2 = criteria.createAlias("tier".tier); 
```

这是否意味着两者`criteria`和`criteria2`点都是相同的`Criteria`或不同的，哪一个指向什么别名？

此外，鉴于每个`createAlias`返回一个`Criteria`，我应该将其分配给原始`criteria`的还是新的？

好吧，我希望你能看到我的困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-21T09:24:38.880

> 这是什么意思？我的标准对象具有所有这些别名吗？

是的

> 在这种情况下 getAlias() 方法会返回什么？

返回- 您没有使用过的类的别名，但您可以指定: ，`getAlias`其中将返回。`createCriteria(Car.class)``createCriteria(Car.class, "c")``criteria.getAlias()``c`

> 这是否意味着标准和标准 2 点都是相同的标准或差异，哪一个指向什么别名？

[Criteria API](https://docs.jboss.org/hibernate/orm/4.0/javadocs/org/hibernate/Criteria.html#addOrder(org.hibernate.criterion.Order))中的大多数方法都返回自己的标准，以支持链接，以方便使用。您不需要保存返回的条件实例，因为对象（及其内部属性）正在内部更改。

```
criteria.createAlias("a.b", "a_b").add(Restrictions.eq("a_b", value)); 
```

类似于

```
criteria.createAlias("a.b", "a_b");
criteria.add(Restrictions.eq("a_b", value)); 
```

所以 ...

> 此外，鉴于每个 createAlias 返回一个 Criteria，我应该将其分配给原始条件还是新条件？

... 不。对于处于休眠状态的人来说，限制 Criteria 规范以强制程序员保存返回的实例是不可行的，并且假设条件对象没有被更改，这*有点违反 OO 标准。*

# html - 为什么第 n 个子选择器不会被另一个选择器覆盖？

> ID：15078277
> 
> 赞同：1
> 
> 时间：2013-02-25T23:07:47.713
> 
> 标签：html, css

我已经设置了以下示例：http: [//jsfiddle.net/SXEty/](http://jsfiddle.net/SXEty/)

```
<style>
table td, th { padding: 8px; text-align: left; }
table td:nth-child(1) { color: red; }
table td { color: blue }
</style>
...
<table>
    <tr><th>Name</th><th>Age</th><th>City</th></tr>
    <tr><td>Bob</td><td>27</td><td>Los Angeles</td></tr>
    <tr><td>Charlie</td><td>34</td><td>San Diego</td></tr>
    <tr><td>Daniel</td><td>41</td><td>San Francisco</td></tr>
</table> 
```

我很好奇为什么第一列是红色而不是蓝色。

在我的 CSS 中，我将每个第一个孩子设置为“红色”。但随后我的下一行 CSS 将每个元素设置为“蓝色”。CSS的第二行（颜色：蓝色）不会覆盖上一行（颜色：红色）吗？还是 nth-child 属性具有优先权？如果它确实有优先权，那么所有浏览器都这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T23:08:48.857

因为`td:nth-child(1)`比刚才更具体`td`。

我建议使用 Star Wars 主题对 CSS 特异性进行很好的概述

[http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)

![在此处输入图像描述](../Images/02127bda7d7347a2451535d8834cee54.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T23:09:15.887

因为是更具体的选择器，所以即使后面声明了后者`table td:nth-child(1)`，它也会优先。`table td`

有趣的是，如果您使用 来定位父 ID `table td`，则所有内容都会变为蓝色 - 即使`table td:nth-child(1)`稍后在 CSS 表中声明也是如此。

![在此处输入图像描述](../Images/a7ab59c07e3994ab047ad05ab58a6706.png) [http://jsfiddle.net/mLrAf/2/](http://jsfiddle.net/mLrAf/2/)

# c++ - 如何摆脱这个命令行参数错误？

> ID：15078281
> 
> 赞同：1
> 
> 时间：2013-02-25T23:08:06.450
> 
> 标签：c++, command-line-arguments

我用 C++ 编写了一个程序，它应该接受几个命令行参数，其中第一个是整数，其余三个是浮点数。处理该问题的代码部分如下所示：

```
_tmain(__in int argc, __in PZPWSTR argv)
{

    USHORT X, Y, Z, ZR, XR;                         // Position of several axes
    JOYSTICK_POSITION   iReport;                    // The structure that holds the full position data
    BYTE id=1;                                      // ID of the target vjoy device (Default is 1)
    UINT iInterface=1;                              // Default target vJoy device
    BOOL ContinuousPOV=FALSE;                       // Continuous POV hat (or 4-direction POV Hat)
    int count=0;
    DOUBLE Xr, Yr, Zr;

    // Get the ID of the target vJoy device
    if (argc>1 && wcslen(argv[1]))
        sscanf_s((char *)(argv[1]), "%d", &iInterface);

    sscanf_s((char *)(argv[2]), "%d", &Xr);
    sscanf_s((char *)(argv[3]), "%d", &Yr);
    sscanf_s((char *)(argv[4]), "%d", &Zr);

_tprintf("Acquired: X %d\nY %d\nZ %d\n", Xr, Yr, Zr);

the rest of the code ...} 
```

我的问题是，当我通过编写在命令行中调用程序时

```
name.exe 1 15 16 17 
```

我得到 Xr = 15 但 Zr = 16 而 Yr 只是一些看似随机的巨大负数。

我知道这可能是一些非常基本的错误，但我无法找到它是什么。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T23:14:40.587

您需要使用`%lf`转换来读取双精度。`%d`您当前使用的仅适用于s `int`。

# javascript - Jquery如何阻止选择元素下拉？

> ID：15078284
> 
> 赞同：1
> 
> 时间：2013-02-25T23:08:14.740
> 
> 标签：javascript, jquery

我想在单击选择选项元素时阻止用户查看列表：

```
<select name="_users_id_requester">
  <option value="0">-----</option>
  <option selected="" value="774">Asmaa El Habib,Yassine</option>//except this one 
  <option value="779" title="Ahlam Edouiri - U8K8O">Ahlam Edouiri</option>
  <option value="746" title="Ainane Mohamed - MohamedAinane">Ainane Mohamed</option>
</select> 
```

我尝试了 readonly 方法，但问题是我在表单中使用元素，所以表单无法读取选定的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:25:02.780

首先给选择一个id。也许

```
<select name="_users_id_requester" id "requestor" class = "requestorList">
   <option value="0">-----</option>
   <option selected="" value="774">Asmaa El Habib,Yassine</option>//except this one 
   <option value="779" title="Ahlam Edouiri - U8K8O">Ahlam Edouiri</option>
   <option value="746" title="Ainane Mohamed - MohamedAinane">Ainane Mohamed</option>
</select> 
```

然后您可以轻松禁用控件

```
$('#requestor').prop('disabled', 'disabled'); 
```

要重新启用控件：

```
$('#requestor').prop('disabled', ''); 
```

如果无法设置 ID：

```
$('.requestorList').prop('disabled', 'disabled'); 
```

要重新启用控件：

```
$('.requestorList').prop('disabled', ''); 
```

# javascript - 通过将表单名称作为构造函数传递来验证表单

> ID：15078287
> 
> 赞同：0
> 
> 时间：2013-02-25T23:08:18.133
> 
> 标签：javascript, forms, oop, validation

我试图通过构造函数传递表单节点来验证表单。我知道使用 OO 有点过分，但这是一个请求。我有下面的代码，但是当我尝试提醒函数（表单）中文本框的值时，它们会以未定义的形式出现。

```
<SCRIPT LANGUAGE="JavaScript">
    function Validator(fields) {
        this.fields = fields;
    }

    Validator.prototype.validate = function (form) {
        for (var i = 0, l = this.fields.length; i < l; i++) {
            alert(this.fields[i].value);
            if (this.fields[i].value == 0) {
                alert("The field  is empty");
                return false;
            }
        }
    }

    var validator = new Validator(["username", "password"]);

    function runValidate(form) {
        validator.validate(form);
    }
</SCRIPT>
</head>

<body>
<form NAME="AbbeyRoad">
    <fieldset>
    <legend>Please login</legend>
        <div class="form-element">
            <label for="username"><span class="shortkey">U</span>sername:</label>
            <input type="text" name="username" id="username" accesskey="u">
        </div>
        <div class="form-element">
            <label for="password"><span class="shortkey">P</span>assword:</label>
            <input type="password" name="password" id="password" accesskey="p">
        </div>
        <input type="button" name="login" value="Login" id="login" onClick="runValidate(this.form)">
    </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:28:45.763

改变：

```
alert(this.fields[i].value); 
```

到：

```
alert(form[this.fields[i]].value); 
```

还有这个：

```
if (this.fields[i].value == 0) { 
```

到：

```
if (form[this.fields[i]].value == 0) { 
```

# javascript - $.ajaxPrefilter 抛出 Uncaught TypeError: Cannot convert null to object 异常

> ID：15078288
> 
> 赞同：2
> 
> 时间：2013-02-25T23:08:24.670
> 
> 标签：javascript, jquery, ajax, javascript-objects

我想更改 AJAX 标头`$.ajaxPrefilter`并尝试以下操作：

```
$.ajaxPrefilter(function (options, originalOptions, jqXHR) {
    delete options.headers["myOwnHeader1"];
    options.headers["myOwnHeader2"] = "test";
}); 
```

在网络控制台 (Chrome)`myOwnHeader2`中设置和`myOwnHeader1`不设置。但它会引发以下异常：`Uncaught TypeError: Cannot convert null to object`on`options.headers["myOwnHeader2"] = "test";`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:56:01.047

该`options`对象不一定包含`headers`属性 - 只有在全局`$.ajaxSettings`或当前（原始）选项中给出时。所以你的选择是

*   使用`$.ajaxSetup({headers: {}});`, 也许`myOwnHeader2`已经设置
*   将您的删除/扩展操作包装在一个`if ("headers" in options)`块中
*   如果不存在，则在预过滤器中动态创建 headers 对象：

```
options.headers = options.headers || {};
delete options.headers["myOwnHeader1"];
options.headers["myOwnHeader2"] = "test"; 
```

# ios - iOS 滚动图片

> ID：15078292
> 
> 赞同：-1
> 
> 时间：2013-02-25T23:08:30.713
> 
> 标签：ios, objective-c, uiscrollview, scroll

在寻找教程并看到很多关于滚动图像的答案后，我很难像在 Lane Splitter 中选择字符那样实现 UIScrollView。在这个卷轴中，我感兴趣的区域是小图像。我想做同样的。

另一个让我感兴趣的例子应该是来自 Itunes 的封面流，但左右两边没有图像。只是中心的图像，以及相同的动画。

谢谢你的帮助 ！=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T01:48:15.003

```
-(id)init{
   self = [super init];
   if (self){
     UIScrollView *scroller = [[UIScrollView alloc] initWithFrame:CGRectMake(30, 155, 265, 180)];
        [scroller setBackgroundColor:[UIColor lightGrayColor]];
        [scroller setPagingEnabled:YES];
        [scroller setDelegate:self];
        [self addSubview:scroller];

     NSArray *arrayOfImages = [NSArray alloc] initWithObjects images, nil];
}

-(void)setScrollView:(UIScrollView *)scroller1 :(NSArray *)array{
    for (int i = 0; i < array.count; i++) {
        CGRect frame;
        frame.origin.x = scroller.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = scroller.frame.size;

        UIImageView *newPageView = [[UIImageView alloc] initWithImage:[array objectAtIndex:i]];
        newPageView.contentMode = UIViewContentModeScaleAspectFit;
        newPageView.frame = frame;
        [scroller addSubview:newPageView];

    }

    scroller.contentSize = CGSizeMake(scroller.frame.size.width * array.count, scroller.frame.size.height);
}

-(void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];
    [self setScrollView:scroller :arrayOfImages];
} 
```

我相信这应该有效。它是一个滚动视图并插入 uiimageviews

# d3.js - 新手被 selection.sort 难住了

> ID：15078301
> 
> 赞同：0
> 
> 时间：2013-02-25T23:09:14.973
> 
> 标签：d3.js

我是 JavaScript 和 D3 的新手。我有使用（太多）动画的条形图，但我一生都无法弄清楚如何对数据进行排序，以便条形图的大小上升或下降，更不用说编写一个允许用户重新-种类。我已经在各处尝试了 .sort(function(a,b){return a.value - b.value;}) 的变体，但老实说，我什至不知道将它放在链中的哪个位置，或者是否这是正确的命令。我需要一个例子，拜托！

鉴于下面的条形图，取自 D3 上的 Scott Murray 教程，我将如何在图表首次出现之前对其进行排序？我将如何使用它？仅仅使用数据集会自动重绘所有 svg 元素，还是需要使用数据集然后编写代码来重绘元素？（你可以看到，在这里工作的初学者！）

```
//Width and height
var w = 500;
var h = 100;
var barPadding = 1;

var dataset = [ 5, 10, 13, 19, 21, 25, 22, 18, 15, 13,
11, 12, 15, 20, 18, 17, 16, 18, 23, 25 ];

//Create SVG element
var svg = d3.select("body")
.append("svg")
.attr("width", w)
.attr("height", h);

svg.selectAll("rect")
.data(dataset)
.enter()
.append("rect")
.attr("x", function(d, i) {
return i * (w / dataset.length);
})
.attr("y", function(d) {
    return h - (d * 4);
})
.attr("width", w / dataset.length - barPadding)
.attr("height", function(d) {
    return d * 4;
}); 
```

非常感谢任何帮助

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-13T18:12:26.507

这是在代码片段中使用 d3 排序的示例。如果您愿意，可以在他们提供的文档中阅读更多相关信息。

d3.js 的排序方法： [https ://github.com/mbostock/d3/wiki/Selections#sort](https://github.com/mbostock/d3/wiki/Selections#sort)

作为 javascript 默认 Web API 方法的一部分进行排序： [https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)

```
 dataSet = [{
    text: 'cancel',
    index: 0,
    icon: 'images/cancel.svg',
    callback: function() {
      _this.cancel()
    }
  }, {
    text: 'previous',
    index: 5,
    icon: 'images/prev-avail.svg',
    callback: function() {
      _this.previousSegment();
    }
  }, {
    text: 'next',
    index: 2,
    icon: 'images/next-avail.svg',
    callback: function() {
      _this.nextSegment()
    }
  }, {
    text: 'nextAdded',
    index: 2,
    icon: 'images/example.svg',
    callback: function() {
      _this.nextSegment()
    }
  }];

  $('#div1').html(JSON.stringify(dataSet));

  dataSet.sort(function(a, b) {
    return a.index - b.index
  });

  $('#div2').html(JSON.stringify(dataSet));
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<div id="div1"></div>
<br/>
<div id="div2"></div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:58:45.993

您只是想对数据进行排序，还是我在这里遗漏了什么？

```
var dataset = [...];

dataset.sort(function(a,b){ 
    return a - b; 
});

// Create SVG element
// ... 
```

# mysql - 传感器数据的 MySQL 数据库结构建议（健全性检查）

> ID：15078304
> 
> 赞同：0
> 
> 时间：2013-02-25T23:09:21.050
> 
> 标签：mysql, database

我有一个传感器单元网络，将定期轮询或将（未决定的）数据推送到服务器。每个单元都有一些静态属性，以及我想要记录的一些随时间变化的读数。我主要担心的是以下草图实际上是可以实现的：

```
NODE Table -> stores time varying values per node. I would also like to add a column to store references to the relevant row in the NODES table
Headings --> TimeStamp | Voltage | Current | Temp | Humidity | RoundRobinIndex

NODES Table -> stores static properties about each node
Headings --> Serial | Latitude | Longitude | IP | OtherProps | Pointer to NODE table 
```

这是我第一次使用 MySQL（以及一般的数据库管理员），所以我想在沉浸在 MySQL 之前检查这是一种合理的方法。我也愿意接受其他数据库工具或方法的建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T01:44:44.603

您正在构建所谓的关系数据库。您使用什么数据库管理系统完全是您的选择；它们各有优缺点，但一般来说 MySQL 最适合 PHP（根据我的经验）。

除此之外，为了让您参考表中的信息`NODES`，您需要`Node_ID`在表中创建一列`NODE`。

```
NODE Table -> stores time varying values per node. I would also like to add a column to store references to the relevant row in the NODES table
Headings --> Node_ID | TimeStamp | Voltage | Current | Temp | Humidity | RoundRobinIndex 
```

设置`Node_ID`为主键（即允许您唯一标识表中的行的列），您可以将其作为表中的外键（来自另一个表的主键，在本例中为`NODE`表）引用`NODES`。

```
NODES Table -> stores static properties about each node
Headings --> Serial | Latitude | Longitude | IP | OtherProps | Node_ID 
```

要从`NODES`表中检索数据，您可以使用如下 SQL 语句：

```
SELECT NODE.Node_ID, NODE.TimeStamp, NODES.Serial
FROM NODE
-- Either:
INNER JOIN NODES ON NODE.Node_ID = NODES.Node_ID
WHERE NODE.Node_ID = 2;
-- Or:
WHERE NODE.Node_ID = NODES.Node_ID
AND NODE.Node_ID = 2; 
```

这将从它们各自的表中为 Node_ID 值等于 2 的记录选择`Node_ID`和。`TimeStamp``Serial`

# sms - 通用推送通知：通过 3G 的常规推送通知与来自 Asterisk 服务器的自动 SIP 呼叫？

> ID：15078311
> 
> 赞同：0
> 
> 时间：2013-02-25T23:10:04.700
> 
> 标签：sms, push-notification, asterisk, 3g, ivr

我有一家客户公司，它有一个简单的网络应用程序，用户可以通过桌面/移动网站与之交互。最近他们要求实现通知功能。用户如果愿意，可以注册来自网络应用程序的实时通知。

真正有趣的要求是通知应该：

1.  实时交付（60+秒延迟为失败）；
2.  有保证的交付，即我的客户希望确保每个用户都收到他/她的所有通知。
3.  能够以某种方式从后台通知用户，例如，典型用户不会等待在他/她的 Android 上打开浏览器窗口的通知。首选方式是让手机响铃和/或振动，并将一些消息放入通知区域，以便用户即使在手机放在口袋或包里时也能注意到通知。

笔记：

*   `$John`一个典型的通知消息是相当短的，这里是一个例子：“你好！你今天有一个会议在`$5pm`”；
*   所有用户都拥有启用了 3G 连接的智能手机（iPhone/Android）。

[由于现代移动浏览器的当前状态](https://stackoverflow.com/questions/9266285/get-vibrate-to-work-in-browser-without-phonegap)无法满足要求 3 ，因此完全实现规范的唯一两种方法是：

*   A. 制作iOS/Android APP，使用原生API让手机在收到通知时响铃和震动；
*   B. 使用 Asterisk 之类的 IVR 通过 SIP 呼叫用户，播放带有通知的声音，并要求他/她按 1 确认收到通知（声音可能类似于“您今天在下午 5 点。请按 1 确认”）。

但是当我开始测试那些 A 和 B 选项时，我发现（1）和（2）不能通过常规的 3G 连接来满足（公司在欧洲，连接还可以）。例如，Android 设备上的 Jabber 客户端可以长时间延迟（几分钟）获得一些消息，甚至丢失一些消息。

因此，满足要求 1、2 和 3 的唯一选择是使用 B（自动 IVR - Asterisk）。

我的推理正确吗？是否有任何其他机制可以向启用智能手机的用户实时发送简短通知，100% 保证并让智能手机在收到通知时响铃和/或振动？我应该尝试使用其他任何东西来代替自动 IVR 呼叫吗？

PS 在我的研究中我不考虑 SMS 技术，因为据我所知，[没有保证](http://en.wikipedia.org/wiki/SMS#GSM)消息的传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:54:22.647

如果您的所有用户都有智能手机，您的选择是 IVR、SMS 或推送通知。如果手机网络不可用，IVR 和 SMS 的所有投注都将关闭，但 iOS 和 Android 用户可能会通过 wifi 收到推送通知。如果电话网络存在但很弱（例如，没有 3G 或 LTE），IVR 和 SMS 也差不多 - SMS 可能会稍微好一些，因为电话连接不好会将您的消息变成“您好，您有约会今天与 KRRRZZZZT [通话中断]”。

# jquery - 设置 HTML5 视频在 FF 或 Safari 中不起作用

> ID：15078314
> 
> 赞同：1
> 
> 时间：2013-02-25T23:10:16.103
> 
> 标签：jquery, html, video, html5-video

在 www.graysonearle.com/bluemen/index2.html 制作这个有趣的网络项目，我遇到了各种各样的问题。SO 上的某个人帮助我确保在播放之前加载了视频，但这个解决方案只适用于我的 Chrome。这是代码：

```
 for (var i=0;i<16;i++) {
        document.write('<div class="vidBox" id="box'+i+'">');
        document.write('    <video class="vid" loop="loop" preload="metadata" id="vid'+i+'">');
        document.write('    <\/video>');
        document.write('<\/div>');
    }

var xhr = new XMLHttpRequest();
xhr.open('GET', 'videos/fullvid' + ext, true);
xhr.responseType = 'blob';
xhr.onload = function(e) {
  if (this.status == 200) {
    console.log("got it");
    var myBlob = this.response;
    var vid = (window.webkitURL ? webkitURL : URL).createObjectURL(myBlob);
    // myBlob is now the blob that the object URL pointed to.
       for (var i=0;i<16;i++) {
        display(i,vid)
   }
  }
};
xhr.send();

       function display(i,vid){

    var video = document.getElementById("vid"+i);
    console.log(video);
    video.src = vid;

} 
```

编辑：澄清一下，我希望加载这个 4x4 网格的视频（我稍后可能会添加一个加载屏幕）而不必自动播放。加载后，单击 PLAY ALL 应该使它们同时播放。单击 FISH 在电影网格中创建一个图案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:24:10.230

我不确定你为什么使用 document.write 添加这些，但无论如何尝试将自动播放属性添加到视频中......

```
<video controls="controls" autoplay="autoplay">
  Your browser does not support the video tag.
</video> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:24:45.703

我可以看看你的文档类型吗？请注意，html5 的 doctype 与早期版本的 html 不同。检查您的文档类型。它应该是`<!DOCTYPE HTML>`唯一的。

编辑 html5 视频的正确标签。我认为您可能必须修改语法。

```
<video width="320" height="240" controls>
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
Your browser does not support the video tag.
</video> 
```

并注意您的视频编解码器：

> MP4 = 具有 H264 视频编解码器和 AAC 音频编解码器的 MPEG 4 文件
> 
> WebM = 带有 VP8 视频编解码器和 Vorbis 音频编解码器的 WebM 文件
> 
> Ogg = 带有 Theora 视频编解码器和 Vorbis 音频编解码器的 Ogg 文件

以下是某些浏览器播放视频可能需要的其他内容：

```
videoTag.src = "vid";
videoTag.load();
videoTag.play(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T01:07:32.667

除了将视频添加到 HTML 的“有趣”方式之外，您还应该依赖[HTML5 媒体事件](http://www.w3.org/TR/html5/embedded-content-0.html#mediaevents)。

首先，如果您希望视频实际自动加载，请不要使用`preload="metadata"`，因为它只会加载视频元数据。将预加载设置为`"auto"`应该会有所帮助。或者，您可以完全忽略它，因为`auto`它是默认值。（尽管似乎每当 Opera 添加对此属性的支持时，他们可能会将其设为默认值`"metadata"`，因此您最好将其显式设置为`"auto"`.）

之后，摆脱整个 XHR 混乱。然后，您可以执行以下操作：

```
var videos = document.getElementsByTagName('video');

for(var i = 0, ii = videos.length; i < ii; i++) {
  videos[i].addEventListener('canplaythrough',enablePlayback,false);
}

var videosLoaded = 0;

function enablePlayback(e) {
  videosLoaded++;
  if(videosLoaded === 16) {
    // enable a play button or do whatever you want
    // in this case: start playing all the videos at once
    for(var i = 0, ii = videos.length; i < ii; i++) {
      videos[i].play();
    }
  }
} 
```

这段代码基本上为所有视频添加了一个事件监听器`canplaythrough`，然后当每个视频触发它时，它们会将`videosLoaded`变量加一，当最后一个视频调用它并且`videosLoaded`点击数为 16（4x4 网格中的视频数)，它将调用`play()`所有视频对象。

您可能需要对此进行大量试验才能使其正确（我自己手头并没有 16 个小而短的视频来充分测试这一点），但这应该会带您走向正确的方向。`video.load()`如果`preload="auto"`没有下载所有视频（可能会发生，因为它们太多了），您可能也想调查一下。

如果两者似乎都不起作用，您可以将所有视频设置为自动播放，然后监听`video.load()`事件并立即暂停它们（然后删除事件监听器）。之后，使用与以前相同的代码。`preload="auto"``play``play``canplaythrough`

# xsd - BizTalk 架构开发找不到元素的架构信息

> ID：15078319
> 
> 赞同：2
> 
> 时间：2013-02-25T23:10:25.233
> 
> 标签：xsd, biztalk, biztalk-2010, biztalk-deployment

请找到以下示例 XML 格式，我正在尝试在 BizTalk 解决方案上为其构建架构。

**我收到警告消息为**

> 警告 BEC2004：找不到元素“ORX”的架构信息。
> 警告 BEC2004：找不到元素“NONSIGNONMSGSRQV1”的架构信息。
> 警告 BEC2004：找不到元素“NONSONRQ”的架构信息。
> 警告 BEC2004：找不到元素“客户端”的架构信息。
> 警告 BEC2004：找不到元素“ID”的架构信息。
> 警告 BEC2004：找不到元素“USERPASS”的架构信息。
> 等等
> ………………
> _

```
<?xml version="1.0" encoding="UTF-8"?>
<?ORX ORXHEADER="200" VERSION="201" SECURITY="NONE" OLDFILEUID="NONE" NEWFILEUID="NONE" ?>
<ORX>
  <NONSIGNONMSGSRQV1>
    <NONSONRQ>
      <CLIENT>123456765</CLIENT>
      <ID>arout_int</ID>
      <USERPASS>IM_Developer</USERPASS>
      <LANGUAGE>ENG</LANGUAGE>
      <APPID>WASSUP</APPID>
      <APPOVER>1</APPOVER>
    </NONSONRQ>
  </NONSIGNONMSGSRQV1> 
  <NONVERMSGSRQV1>
    <NONEMPLOYERHISTTRNRQ>
      <COOKIE>1234576540</COOKIE>
      <COOKIETAN>12345612340</COOKIETAN> 
      <BILLINGO1>45674567890</BILLINGO1> 
      <BILLINGO2>1245673567890</BILLINGO2> 
      <PURPOSE>
        <CODE>PROGRAM</CODE>
      </PURPOSE> 
      <EMPLOYERHISTRQ>
        <EMPLOYEEID>123004567</EMPLOYEEID>
      </EMPLOYERHISTRQ>
  </NONEMPLOYERHISTTRNRQ>
  </NONVERMSGSRQV1>
</ORX> 
```

在我进行了一些谷歌搜索之后，我从链接 [验证 XML 实例中](https://social.msdn.microsoft.com/Forums/en-US/04764762-0362-4f33-a6ce-5e15ad5bf3c9/validating-xml-instance-having-issues?forum=biztalkgeneral)获得了一些知识，我尝试删除架构属性的目标名称空间，但 BizTalk 解决方案不允许删除架构中已经存在的目标名称空间。

请任何人建议我，我如何将该设置应用于我的 XML 模式开发，因为我的 XML 文档没有目标命名空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:31:54.430

我通过阅读[BizTalk 2006 Recipes: A Problem-Solution Approach](http://books.google.com/books?id=tvzUW4pnoDwC&pg=PA1&lpg=PA1&dq=xsd%20xml%20tutorial%20biztalk&source=bl&ots=KLSOjIr68e&sig=EQgXvBBBX-7eGQvXiHpDPJr9zeQ&hl=en&ei=4YF8SqadM6ewtgfnj_njAQ&sa=X&oi=book_result&ct=result&resnum=1#v=onepage&q&f=false)解决了这个问题，

步骤：打开架构 -> 转到架构节点 -> 架构节点属性 -> 删除命名空间，然后解决问题。

# emacs - 测试点是否在匹配的引号之间（emacs lisp）

> ID：15078322
> 
> 赞同：3
> 
> 时间：2013-02-25T23:11:03.587
> 
> 标签：emacs, lisp, quotes, point

我们如何检查是否`(point)`在匹配的“引号”内

示例 1：“ `(point)`”，

但不在

示例 2：“这里引用” `(point)`“那里引用”，

在 Emacs Lisp 中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T00:47:27.957

您正在寻找的是`syntax-ppss`（在 中定义`syntax.el`）。它返回 10 个值，第 4 个值告诉您该点是否在字符串内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:28:50.063

`(eq (nth 1 (text-properties-at (point))) font-lock-string-face)`

这将检查点处文本的字体是否被识别为字符串（即具有文本属性 face font-lock-string-face）。

这正在寻找一个更优雅的解决方案。

# scala - scala中的RESTful http DELETE方法（播放2.0）

> ID：15078323
> 
> 赞同：2
> 
> 时间：2013-02-25T23:11:04.383
> 
> 标签：scala, rest, playframework-2.0

我正在使用 Play 2.0 构建应用程序。
至于 Play 表单生成器不会生成原生 http“删除”请求方法，应将其替换为“获取”或“发布”。

```
@form(routes.Application.delete(id), 'class -> "topRight") {
    <input type="submit" value="Delete this computer" class="btn danger">
} 
```

根据播放示例，“发布”应用于“删除”目的。尽管使用“获取”很舒服，因为可以用简单的链接替换表单（尤其是在单个页面上包含这些链接的列表）

那么有什么理由使用 POST 来模拟 DELETE 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T23:38:23.010

使用`POST`emulating`DELETE` *而不是 的* `GET`原因是因为一些 HTTP 动词（又名方法）被 HTTP 规范认为是安全的。[这些方法`HEAD``GET``OPTIONS``TRACE`](http://www.w3.org/Protocols/rfc2616/rfc2616.html)是[、](http://www.w3.org/Protocols/rfc2616/rfc2616.html)[和](http://www.w3.org/Protocols/rfc2616/rfc2616.html)[。](http://www.w3.org/Protocols/rfc2616/rfc2616.html)这意味着在使用这些 HTTP 方法发出请求时，应用程序状态不应有任何副作用。日志记录、缓存或计数器增量通常不被视为应用程序状态修改，除非它是应用程序域的一部分。

`POST`用于模拟`DELETE`请求而不是直接在 Web 表单中使用的原因`DELETE`是因为许多浏览器不`DELETE`直接支持。许多使用助手生成表单标记的 Web 框架，如 Play 和 Rails，使用您引用的技巧将请求映射到代码中相应的 REST-ish 动作。有关详细信息，请参阅[浏览器中的 HTTP 方法支持](http://annevankesteren.nl/2007/10/http-method-support)。有关此主题的更多信息，另请参阅[此 SO 问题](https://stackoverflow.com/questions/165779/are-the-put-delete-head-etc-methods-available-in-most-web-browsers)。根据 W3C 对 HTML5 的最新候选推荐，[HTML5`FORM`元素不支持`method`GET 或 POST 以外的属性](http://www.w3.org/TR/html5/forms.html#attr-fs-method)值。[`FORM`HTML 4.01](http://www.w3.org/TR/html401/interact/forms.html#edef-FORM)中的元素也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T23:23:41.443

对于使用非 -`GET`或`POST`方法，您应该使用 JavaScript - 例如[jQuery $.ajax()](http://api.jquery.com/jQuery.ajax/)及其`type`设置。

你也可以使用[Play 的 javascriptRoutes](https://stackoverflow.com/a/11133586/1066240)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T23:36:12.613

大多数浏览器不能从 HTML 表单执行除 GET 或 POST 之外的 HTTP 请求，因此它通常使用带有覆盖标头或特殊表单变量的 HTTP POST 来模拟。

请参阅[从浏览器执行 HTTP PUT](https://stackoverflow.com/questions/1856996/doing-a-http-put-from-a-browser)

# objective-c - 单击时绘制夸脱形状

> ID：15078324
> 
> 赞同：0
> 
> 时间：2013-02-25T23:11:04.760
> 
> 标签：objective-c, ipad, cocoa-touch, quartz-graphics

这是我的代码：

```
@implementation myView2
{
BOOL _touchHasBegun;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
_touchHasBegun = YES;
}

- (void)drawRect:(CGRect)rect
{
if (_touchHasBegun == YES)
{
    NSLog(@"fjnv");
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetRGBStrokeColor(context, 0, 0, 225, 1);
    CGContextSetRGBFillColor(context, 0, 0, 255, 1);
    CGRect rectangle = CGRectMake(50, 50, 500, 500);
    CGContextStrokeEllipseInRect(context, rectangle);
}
} 
```

我也尝试过`UIButton`在按钮操作方法中`UIView`设置并设置。`CGRect`但这不起作用。这段代码也没有。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:59:59.823

这是一个工作片段：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    _touchHasBegan = YES;
    [self setNeedsDisplay];
}

- (void)drawRect:(CGRect)rect
{
    if(_touchHasBegan){
        CGContextRef context = UIGraphicsGetCurrentContext();
        CGContextSetRGBStrokeColor(context, 0, 0, 225, 1);
        CGContextSetRGBFillColor(context, 0, 0, 255, 1);
        CGRect rectangle = self.bounds;
        CGContextStrokeEllipseInRect(context, rectangle);
    }
} 
```

# sql - SQL查询在两个日期之间选择错误

> ID：15078334
> 
> 赞同：1
> 
> 时间：2013-02-25T23:12:03.090
> 
> 标签：sql, sql-server, sql-server-2008

我需要您的帮助，因为我正在努力处理 SQL 中的查询。这个查询没有给出我想要的确切结果。我需要提取两个日期之间的所有日期。

我尝试了两个查询：

```
SELECT a.MemberID,CONVERT(varchar(12), b.BirthDate, 101) AS BirthDate
FROM Members_Hired AS a
    INNER JOIN Members AS b
        ON a.ReferenceID = b.RecordID
WHERE (CONVERT(varchar(12), b.BirthDate, 101) >= '02/01/2013'
    and CONVERT(varchar(12), b.BirthDate, 101) <= '02/27/2013') 
```

和

```
SELECT a.MemberID,CONVERT(varchar(12), b.BirthDate, 101) AS BirthDate
FROM Members_Hired AS a
    INNER JOIN Members AS b
        ON a.ReferenceID = b.RecordID
WHERE (CONVERT(varchar(12), b.BirthDate, 101) BETWEEN '02/01/2013' and '02/27/2013') 
```

这也给出了 date 的`'02/05/1990'`结果`'02/17/1990'`。它只考虑月份和日期，而不是确切的年份。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T23:18:46.043

您应该比较日期而不是 varchar 值。如下更改您的 where 子句。另请注意，我在转换之前对字符串日期使用 ISO 格式 (yyyymmdd)，以确保它适用于任何文化。

```
b.birthdate between convert(date,'20130201' ) and 
                  convert(date, '20130227') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T23:18:07.157

我认为您正在比较字符串而不是日期时间，因此结果有记录“02/25”和“02/17”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T23:22:58.357

假设您的生日字段是`DateTime`您需要将输入转换为相同类型的类型。

你试过了吗？

```
WHERE (b.BirthDate BETWEEN Cast('02/01/2013' As DateTime) and Cast('02/27/2013' As DateTime)) 
```

# javascript - 使用索引将半径减小 10% - Jquery

> ID：15078337
> 
> 赞同：1
> 
> 时间：2013-02-25T23:12:14.317
> 
> 标签：javascript, math

我有 10 组数据进来，我需要将第一组的半径设置为最大，然后减少 10%。

我的索引是这样的：1、2、3、4、5....

我正在获取索引并将其除以 1

```
var radiusTest = 1 / (index);
circleRadius = radiusTest * 100 
```

然后我将它乘以 100，它接近我需要的值，但它并没有像我想要的那样退化。让每个半径减少 10% 是我正在寻找的，不确定设置它的最佳方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:17:01.903

我认为你会这样做：

```
var radiusTest = 1 - index * .1; 
circleRadius = radiusTest * 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:25:28.493

因此，您的值从迭代开始`100%`并以相等的量减少，或减少 10%。`10`这是一种在 JavaScript 中实现它的方法。

```
var steps = 10,
    step,
    stepSize = 1/steps,
    radii = [];
for(step = 0; step <= steps; step++) {
  radii[step] = (1-(stepSize * step)) * 100;
} 
```

该数组`radii`应包含：

```
[100, 90, 80, 70, 60, 50, 40,30,20, 10, 0] 
```

您可以弄乱常量以查看不同的步长和步长。

# c++ - 获取进程内存信息

> ID：15078342
> 
> 赞同：1
> 
> 时间：2013-02-25T23:12:43.007
> 
> 标签：c++, winapi

我一直在尝试在 Windows 中获取进程内存信息，并且我一直在关注 Microsoft 文档，并且我得到了这段代码，但它似乎不起作用。它应该打印成功，但它根本不打印任何东西。我的调试告诉我这是因为 hProcess = null，但我不明白为什么。这是我当前的代码

```
#include <windows.h>
#include <stdio.h>
#include <psapi.h>
#include<iostream>

using namespace std;

int main()
{
    DWORD aProcesses[1024], cbNeeded, cProcesses;

    if ( !EnumProcesses( aProcesses, sizeof(aProcesses), &cbNeeded ) )
    {
        return 1;
    }

    cProcesses = cbNeeded / sizeof(DWORD);

    for (int i = 0; i < cProcesses; i++ )
    {
    int processID = aProcesses[i];
    HANDLE hProcess;
    PROCESS_MEMORY_COUNTERS pmc;
    hProcess = OpenProcess(PROCESS_QUERY_INFORMATION | PROCESS_VM_READ, FALSE, processID );

    if (NULL == hProcess)
        return 2;

    if ( GetProcessMemoryInfo( hProcess, &pmc, sizeof(pmc)) )
    {
        cout<<"SUCCEEDED";
    }

    CloseHandle( hProcess );
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:29:37.337

您可能无权读取某些（特权系统）进程的内存。检查`GetLastError`您是否从`OpenProcess`.

一般来说，检查和处理 Win32 错误情况是一种很好的做法，即使 API“通常”适合您。

# c# - OpenXML - Rows getting written out in the wrong order resulting in lost data

> ID：15078346
> 
> 赞同：1
> 
> 时间：2013-02-25T23:12:52.187
> 
> 标签：c#, excel, openxml-sdk

I am using openxml-sdk to generate an excel file and upon opening of the file it tells me that the file is corrupt and offers to repair it. The repair does the following:

```
Removed Records: Cell information from /xl/worksheets/sheet.xml part
Repaired Records: Cell information from /xl/worksheets/sheet.xml part 
```

This repair results in the loss of some data, I have looked into the XML and discovered that the data seems to be removed because the row has been written out of order when a merged cell is encountered.

```
<x:sheetData>
    <x:row r="8">
         ...
    </x:row>
    <x:row r="16">
         ...
    </x:row>
    <x:row r="9">
         ...
    </x:row>
    <x:row r="10">
         ...
    </x:row>
    ...
</x:sheetData>
<x:mergeCells>
    ...
<x:mergeCell ref="C8:C16" />
    ...
</x:mergeCells> 
```

So as the above shows, there is a merge of C8:C16, wherever a merge like this happens it seems to write the row for the first and last then continue will all in the middle. However, when opening this excel doesn't seem to be able to cope and removes all out of order rows (9-15).

I have confirmed this by manually rearranging the rows in the XML then rezipping. It will then display all the data.

I am guessing this happens because I create row 16 earlier then row 9 so that I can do the merge. Is there a way to reorder the rows or get excel to handle this without having to create all the rows in advance?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:13:08.500

就 Excel 而言 - 您无法使 Excel 接受以错误顺序写出的行。您必须以某种方式编写代码，以便以正确的顺序写出行。

-埃里克

# java - 在 Android 客户端中处理来自 Jersey 服务器的多部分响应

> ID：15078347
> 
> 赞同：1
> 
> 时间：2013-02-25T23:12:53.923
> 
> 标签：java, android, rest, jersey, multipart

我已经设法将多部分消息从 Android 发送到 Jersey 服务器，如下所示：

```
File file = new File(imagePath);
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(url);
    FileBody fileContent = new FileBody(file);
    MultipartEntity multipart = new MultipartEntity();
    multipart.addPart("file", fileContent);

    try {
        multipart.addPart("string1", new StringBody(newProductObjectJSON));
        multipart.addPart("string2", new StringBody(vitaminListJSON));
        multipart.addPart("string3", new StringBody(mineralListJSON));
    } catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    httppost.setEntity(multipart);
    HttpResponse response = null;
    response = httpclient.execute(httppost);
    String statusCode = String.valueOf(response.getStatusLine().getStatusCode());
    Log.w("Status Code", statusCode);
    HttpEntity resEntity = response.getEntity();

    Log.w("Result", EntityUtils.toString(resEntity)); 
```

这很好，但问题是当我需要使用 GET 从服务器接收多部分响应时。服务器还需要向我发送一个图像和三个字符串作为多部分消息。我不确定如何处理：

```
HttpResponse response = null;
    HttpClient httpclient = new DefaultHttpClient();
    HttpGet httpget = new HttpGet(url);
    try {
        response = httpclient.execute(httpget);
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    HttpEntity resEntity = response.getEntity();
    Log.w("Result", EntityUtils.toString(resEntity)); 
```

我不确定如何从实体中提取值。如何从响应中获取该文件和字符串值？我知道如何处理像普通字符串或 JSON 这样的简单响应，但是多部分响应让我很困扰。任何建议都会非常有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:00:20.793

在客户端没有标准的方式来消费多部分内容，JAX-RS 规范主要关注服务器/资源端。但归根结底，与 JAX-RS 端点通信与与常规 HTTP 服务器通信几乎相同，因此任何现有的处理多部分 HTTP 响应的方法都可以工作。[在 Java 客户端世界中，使用mime4j 之](http://james.apache.org/mime4j/)类的第三方库来处理多部分响应是很常见的，但实际上使用 Jersey 有一种更简单的方法。该解决方案依赖于 JavaMail API（可通过[Maven](http://mvnrepository.com/artifact/javax.mail/mail)以及其他来源访问）：

```
final ClientConfig config = new DefaultClientConfig();
config.getFeatures().put(JSONConfiguration.FEATURE_POJO_MAPPING,
        Boolean.TRUE);
final Client client = Client.create(config);

final WebResource resource = client
        .resource(URL_HERE);
final MimeMultipart response = resource.get(MimeMultipart.class);

// This will iterate the individual parts of the multipart response
for (int i = 0; i < response.getCount(); i++) {
    final BodyPart part = response.getBodyPart(i);
    System.out.printf(
            "Embedded Body Part [Mime Type: %s, Length: %s]\n",
            part.getContentType(), part.getSize());
} 
```

检索后，您可以根据客户端代码处理各个正文部分。

# ios - iOS: Preserve JFIF/EXIF data when saving to camera roll

> ID：15078357
> 
> 赞同：5
> 
> 时间：2013-02-25T23:13:36.320
> 
> 标签：ios, exif

## Original Problem

I am trying to save an image into the camera roll while preserving all the original EXIF/JFIF data. I'd like the image as saved to the camera roll to be identical to the original file byte-for-byte. When I save the image via `[ALAssetsLibrary writeImageDataToSavedPhotosAlbum:metadata:completionBlock:]`, the original EXIF data is preserved, but JFIF is stripped out.

```
ALAssetsLibrary *library = [[[ALAssetsLibrary alloc] init] autorelease];
[library writeImageDataToSavedPhotosAlbum:imageData metadata:nil completionBlock:^(NSURL *assetURL, NSError *error) {
    [self imageDidFinishSavingToCameraRollWithError:error];
}]; 
```

I tried using the [iphone-exif](https://code.google.com/p/iphone-exif/) project to parse out the JFIF data and explicitly pass it in via the metadata parameter:

```
EXFJpeg *jpegScanner = [[EXFJpeg alloc] init];
[jpegScanner scanImageData:imageData];
EXFJFIF *jfif = [jpegScanner jfif];

NSMutableDictionary *jfifMetadata = [[NSMutableDictionary alloc] init];
[jfifMetadata setObject:[jfif version] forKey:(NSString *)kCGImagePropertyJFIFVersion];
...
NSMutableDictionary *metadata = [[NSMutableDictionary alloc] init];
[metadata setObject:jfifMetadata forKey:(NSString*)kCGImagePropertyJFIFDictionary]; 
```

But doing so results in the same file, byte-for-byte, as passing a `nil` metadata dictionary, meaning the JFIF data is still being stripped by iOS.

According to [Wikipedia](http://en.wikipedia.org/wiki/JPEG_File_Interchange_Format#Exif.2FPhotoshop_compatibility):

> Formally, the Exif and JFIF standards are incompatible. This is because both specify that their particular application segment (APP0 for JFIF, APP1 for Exif) must be the first in the image file. In practice, many programs and digital cameras produce files with both application segments included. This will not affect the image decoding for most decoders, but poorly designed JFIF or Exif parsers may not recognise the file properly.

Is there any way to save the original file to the camera roll byte-for-byte, or will iOS always ignore JFIF data if EXIF is present?

* * *

## Update: 2/26/13

I've filed `<rdar://13291591>` with Apple. I also created a sample project demonstrating the issue: [http://spolet.to/3J0l1u3w0R2e](http://spolet.to/3J0l1u3w0R2e)

The sample app has three buttons: one for a JPEG with JFIF data, one for a JPEG without JFIF data, and one for a PNG. When the button is tapped, the corresponding image will be hashed and saved to the photo library. The resulting ALAsset will then be hashed as well.

Results:

*   The ALAsset for the saved PNG has the same hash as the original file.
*   The ALAssets for the saved JPEGs do not have the same hashes as their original counterparts.

Digging in to this, it appears that the 'Brightness Value', 'Components Configuration', 'Thumbnail Length' and 'Thumbnail Image' attributes within the ALAsset EXIF data have been modified by the OS. Further, the original JFIF data (for the image with JFIF) has been stripped.

Expected Results:

*   All three files should have the same hash when saved into the photo library.

# android - Writing python code on android

> ID：15078361
> 
> 赞同：17
> 
> 时间：2013-02-25T23:13:57.153
> 
> 标签：android, python

I recently got a android tablet (nexus 7) and would like to be able to write python programs on it (not for it) without access to the internet or needing to access any other device to run the program. If somebody could suggest an app, or tell me how to set it up, it would be great. If however, someone could suggest an app that works with a different language, that would also be nice.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T23:31:22.493

如果您希望能够在设备上运行 Python 解释器，请使用 SL4A。

[http://www.github.com/damonkohler/sl4a](http://www.github.com/damonkohler/sl4a)

我用过的最好的编辑器是 DroidEdit。我实际上为专业版支付了 2 美元。

[https://play.google.com/store/apps/details?id=com.aor.droidedit.pro&hl=en](https://play.google.com/store/apps/details?id=com.aor.droidedit.pro&hl=en)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-09-08T00:40:21.983

我用过的最好的离线 IDE 是[Pydroid](https://play.google.com/store/apps/details?id=ru.iiec.pydroid)。我喜欢它在 Pastebin 上轻松分享的功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T23:29:57.333

如果您愿意在命令行上进行 Python 开发/测试，您可以按照[这些说明](http://tinyrobot.co.uk/blog/python-in-terminal-ide-for-android/)在[终端 IDE中运行 Python](https://play.google.com/store/apps/details?id=com.spartacusrex.spartacuside)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-17T13:29:19.993

这里有一个很棒的[QPython](http://qpython.com/)项目。您可以从 Play Market 安装[应用程序](https://play.google.com/store/apps/details?id=com.hipipal.qpyplus&hl=en)，并在任何地方享受 Python 编码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-07T04:47:58.990

最近试用[了 Pydroid](https://play.google.com/store/apps/details?id=ru.iiec.pydroid3)，Android 上最好的 IDE，自动补全和代码分析非常棒，支持很多库，比第三版还没有 pip 的 QPython3 好得多。

# c - ASN.1 compilers

> ID：15078362
> 
> 赞同：4
> 
> 时间：2013-02-25T23:13:58.463
> 
> 标签：c, protocols, asn.1

This is my first question so please bear with me, I'm trying to find a good compiler to parse the following [standard](http://www.3gpp.org/ftp/Specs/archive/29_series/29.002/ASN.1/), I've tried asn1c and I wasn't able compile it successfully, the problem is that I didn't get any error, I tried with "-P" and there was no output, this is what I did

sn1c MAP-ShortMessageServiceOperations.EXP -P

The files in the link have been generated by SIEMENS and for some reason they are not the standard ASN.1

The question is how can I compile all these ASN files with asn1c or any other asn compiler?

and also I've tried snacc and didn't get anything useful from it either.

I'm trying to write a C application that will be running on Red-hat Linux

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T16:35:39.717

一个很好的起点是[http://www.itu.int/ITU-T/asn1/links/index.htm](http://www.itu.int/ITU-T/asn1/links/index.htm)，其中列出了几个 ASN.1 编译器（免费和商业）。

您还可以在[http://asn1-playground.oss.com](http://asn1-playground.oss.com)上的免费在线编译器和编码器/解码器中尝试您的规范。

对于 3gpp 规范，您可能最好使用商业工具而不是免费工具之一。OSS Nokalva 在[http://www.oss.com/asn1/products/asn1-download.html](http://www.oss.com/asn1/products/asn1-download.html)上提供其 ASN.1 工具的免费试用版。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-02T13:55:09.063

[http://www.itu.int/en/ITU-T/asn1/Pages/Tools.aspx](http://www.itu.int/en/ITU-T/asn1/Pages/Tools.aspx)提到了两个免费的 ASN.1 编译器，其中之一是

*   [http://lionet.info/asn1c/compiler.html](http://lionet.info/asn1c/compiler.html) 这是 FOSS 并且似乎很受欢迎（[http://lionet.info/asn1c/quotes.html](http://lionet.info/asn1c/quotes.html)）
*   列出的第二个“免费”编译器似乎已经商业化（[http://www.oss.com/asn1/products/asn1-c/asn1-c.html](http://www.oss.com/asn1/products/asn1-c/asn1-c.html)），*但*同一家公司提供免费的在线编码/解码服务在[http://asn1-playground.oss.com/](http://asn1-playground.oss.com/)
*   我不知道这个是免费的还是需要购买 - [http://www.obj-sys.com/products/asn1c/index.php](http://www.obj-sys.com/products/asn1c/index.php)
*   这是 FOSS，可能值得研究 - [https://github.com/ttsiodras/asn1scc](https://github.com/ttsiodras/asn1scc)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-13T23:28:26.573

3GPP 规范的另一个工具是在线编码器/解码器[http://3gpp-message-analyser.com](http://3gpp-message-analyser.com)它支持 UTRAN RANAP SABP RNSAP NBAP PCAP RUA HNBAP, E-UTRAN S1AP X2AP M2AP M3AP

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-24T13:42:45.017

您还可以在这里找到各种免费的在线 ASN.1 解码器： [https ://www.marben-products.com/decoder-asn1/](https://www.marben-products.com/decoder-asn1/)

我希望它有所帮助。安托

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-27T16:17:44.473

我遇到了这个编译器，它可以很好地从 ASN.1 生成 C 代码

[https://github.com/ttsiodras/asn1scc](https://github.com/ttsiodras/asn1scc)

还有一个很好的介绍可以帮助您入门，这里：

[https://www.thanassis.space/asn1.html](https://www.thanassis.space/asn1.html)

这是迄今为止唯一对我有用的编译器。

# ios - iOS execute check before push notification is received

> ID：15078363
> 
> 赞同：2
> 
> 时间：2013-02-25T23:14:14.290
> 
> 标签：ios, apple-push-notifications, userlocation

I am writing an application that utilizes Apple's Push Notification Service. Some of the push notifications are based on the users location and should only be delivered if the user is a certain distance from an object. I don't want to continually update the user's position to my server and do the check that way, first, because of security reasons and second, to cut down on the network usage. Is there a way, when the push notification is received by the device, to do a check before the user is notified, and if it doesn't meet the criteria, discard the notification? Thanks for the help!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:36:53.910

不，遗憾的是，如果用户在应用程序未启动时单击通知，您将无法在客户端执行任何代码。您必须在服务器端进行检查以决定是否发送推送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:45:58.747

当您的应用程序未运行（最典型的情况）时收到的推送通知不在您的控制范围内。一旦发送，它们将被接收并显示给用户（假设用户已授予权限）

如果在您的应用程序运行时收到推送通知，您确实可以控制它们。

也许您可以改用本地通知（从用户设备生成和接收的通知）。您可以完全控制它们何时生成。

请记住，应用程序中的后台处理是不允许的，除了 4 件事

1.  位置跟踪（您可以在用户更改地理位置时订阅触发代码）
2.  警报
3.  玩音乐
4.  IP语音

这些之外的任何东西都不能在后台执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-24T20:50:31.247

从 iOS7 开始，您的代码可以运行，我引用，“与用户看到通知的时间大致相同”：

> **多任务增强**
> 
> 使用推送通知通知用户有新内容可用的应用程序可以在后台获取内容。要支持此模式，请在应用的 Info.plist 文件中包含带有远程通知值的 UIBackgroundModes 键。您还必须在您的应用委托中实现 application:didReceiveRemoteNotification:fetchCompletionHandler: 方法。

在此处查看更多信息：

[https://developer.apple.com/library/ios/releasenotes/General/WhatsNewIniOS/Articles/iOS7.html#//apple_ref/doc/uid/TP40013162-SW10](https://developer.apple.com/library/ios/releasenotes/General/WhatsNewIniOS/Articles/iOS7.html#//apple_ref/doc/uid/TP40013162-SW10)

和这里：

[https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html#//apple_ref/doc/uid/TP40007072-CH4-SW57](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html#//apple_ref/doc/uid/TP40007072-CH4-SW57)

我还没有尝试过，但我想知道你是否发送了一个推送通知有效负载，它在“apns”中没有标准的“alert”、“badge”值但在自定义值中，它仍然会调用你的代码但没有显示推送通知。

# javascript - How to override page styles without using !important, in a Greasemonkey script?

> ID：15078364
> 
> 赞同：1
> 
> 时间：2013-02-25T23:14:17.717
> 
> 标签：javascript, css, greasemonkey

I have a Greasemonkey script that applies styles with either `.css()` or `GM_addStyle()`. These styles are getting overwritten by the styles that are on the page, causing undesired effects.

I know that I can fix this by using `!important` on all of my styles, but I really don't want to do this. Is there any way to do this w/o using `!important`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:51:08.617

`!important`在 Greasemonkey 脚本和时尚风格中使用并没有错。（它有时在常规网页中被滥用，但用户脚本不同）。

`!important`是覆盖属性中设置的样式的唯一方法。例如，如果我们想改变这个：

```
<div id="annoyingBlock" style="background: red; top: 4em; display: inline block ... Bunch of other styles that we don't want to touch.">
    Look at me!
</div> 
```

要拥有白色背景，我们的用户脚本必须要么覆盖该`style`属性（这在大型复杂网站上可能是一种痛苦，并且可能破坏我们可能仍然想要的其他内联样式），或者它必须使用`!important`标志，如下所示：

```
GM_addStyle ( "                                 \
    #annoyingBlock {                            \
        background:         white !important;   \
    }                                           \
" ); 
```

这是因为属性（内联样式）比样式以外的任何东西[都具有更高的优先级](http://www.alternategateways.com/tutorials/css/css-101/part-four-the-css-order-of-precedence)`!important`。

* * *

* * *

如果您使用的样式更改`.css()`被页面的 javascript 覆盖，请使用[此答案](https://stackoverflow.com/a/14618898/331508)中的技术来解决此问题。

# c - redirecting a c function at runtime and calling the original function

> ID：15078365
> 
> 赞同：0
> 
> 时间：2013-02-25T23:14:34.663
> 
> 标签：c, linux, function, redirect, assembly

My program redirects a function to another function by writing a jmp instruction to the first few bytes of the function (only i386). It works like expected but it means that I can't call the original function anymore, because it will always jump to the new one.

There are two possible workarounds I could think of:

1.  Create a new function, which overwrites the jmp instruction of the target function and call it. Afterwards the function writes back the jmp instruction. But I'm not sure how to pass the arguments since there can be any number of them. And I wonder if the target function can jmp somewhere else and skip writing back the jmp instruction (like throw catch?).

2.  Create a new function which executes the code I have overwritten with the jmp instruction. But I can't be sure that the overwritten data is a complete instruction. I'd have to know how many bytes I have to copy for a complete instructions.

So, finally, my questions:

1.  Is there another way I didn't think of?

2.  How do I find the size of an instruction? I already looked at binutils and found [this](https://github.com/mirror/cygwin/blob/master/opcodes/i386-opc.tbl) but I don't know how to interpret it.

Here is a sample:

```
mov, 2, 0xa0, None, 1, Cpu64, D|W|CheckRegSize|No_sSuf|No_ldSuf, { Disp64|Unspecified|Byte|Word|Dword|Qword, Acc|Byte|Word|Dword|Qword } 
```

the 2nd column shows the number of operands (2) and the last column has information about the operands, seperated by a comma

I also found this question which is pretty much the same but I can't be sure that the 7 bytes contain a whole instruction. [Writing a Trampoline Function](https://stackoverflow.com/questions/8099660/writing-a-trampoline-function)

Any help is appreciated! Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-04T20:35:33.727

Sebastian, you can use the exe_load_symbols() function in hotpatch to get a list of the symbols and their location in the existing exe and then see if you can overwrite that in memory. I have not tried it yet. You may be able to do it with the LD_PRELOAD environment variable as well instead of hotpatch.

--Vikas

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:04:14.387

像这样的东西怎么样：

假设这是原始功能：

```
Instruction1
Instruction2
Instruction3
...
RET 
```

将其转换为：

```
JMP new_stuff
old:
Instruction2
Instruction3
...
RET
...
new_stuff:
CMP call_my_function,0
JNZ my_function
Instruction1
JMP old
my_function:
... 
```

当然，您必须考虑原始指令的大小（`objdump`例如，您可以通过反汇编来发现），以便第一个`JMP`完全适合（如果 s比原始指令短，则用`NOP`s填充） `JMP`）。

# azure - azure remote desktop cannot see worker role

> ID：15078369
> 
> 赞同：0
> 
> 时间：2013-02-25T23:14:55.210
> 
> 标签：azure, azure-storage, remote-debugging, remote-desktop

Recently i began to working with windows azure. My problem is that i published worker role to my account on windows azure (free trial account). I do it in visual studio. and Worker role is running- i know it because i can connect to it. But when i log into remote desktop of my windows azure account i cannot see this worker role in task manager. It is necessary for me because next step is to remote debug this worker role. Because in debug->attach to process in vs i see every process except this worker role which i would like to debug

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:33:22.533

您在寻找什么进程名称？辅助角色运行的进程是 WAWorkerHost.exe，而不是您为角色指定的名称。

# xcode - 叹息......不小心在整个项目文件夹上点击“将文件添加到项目”并开始循环重复复制项目本身

> ID：15078372
> 
> 赞同：0
> 
> 时间：2013-02-25T23:15:02.303
> 
> 标签：xcode, linker-errors

哇……两腿之间的尾巴……

所以我在 Xcode 中点击了“将文件添加到项目”。像往常一样，我的整个项目文件夹默认被选中。我改变主意并点击“取消”，但不小心点击了“添加”......所以它基本上创建了这个循环，不断在我的项目文件夹中添加我的项目文件夹......在我的项目文件夹中等等......直到它最终出错并停止。（将我的项目文件夹从大约 25Mb 带到近 3 个演出！！！

我进入了我的实际项目文件夹（在 finder 中，而不是在 xcode 中）并删除了包含所有其他重复项的重复文件夹。但是现在当我尝试构建时，我会遇到各种错误。这可能是我做过的最尴尬的事情。我有 5 天前的回购备份，但我宁愿不要失去 5 天的工作。有人可以帮助我吗:( 10亿个互联网点给任何可以帮助我的人，这样我今晚就可以继续工作！

> 以下是错误：
> 
> Lipo 错误：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/lipo：无法打开输入文件：/Users/Daniel/Library/Developer/Xcode/DerivedData/appname- rtgmnzqeqhksvjbmtqtvnaudfgr/Build/Intermediates/appname.build/Debug-iphoneos/appname.build/Objects-normal/armv7/appname（没有这样的文件或目录）
> 
> Apple Mach-O 链接器错误：ld：架构 armv7 clang 的 5 个重复符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）
> 
> Dsymutil 错误：GenerateDSYMFile /Users/Daniel/Library/Developer/Xcode/DerivedData/appname-gahmnzqeqhksvjbmtqtvnauibzrx/Build/Products/Debug-iphoneos/appname.app.dSYM /Users/Daniel/Library/Developer/Xcode/DerivedData/appname-gahmnzqeqhksvjbmtqtvnauibzrx /Build/Products/Debug-iphoneos/appname.app/appname cd /Users/Daniel/appDirectory setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/ Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/dsymutil /Users/Daniel/Library/Developer/Xcode/DerivedData/appname-gahmnzqeqhksvjbmtqtvnauibzrx/Build/Products/Debug-iphoneos/appname.app/appname -o /Users/Daniel/Library/Developer/Xcode/DerivedData/appname-gahmnzqeqhksvjbmtqtvnauibzrx/Build/Products/Debug-iphoneos/appname.app.dSYM
> 
> 错误：无法打开可执行文件'/Users/Daniel/Library/Developer/Xcode/DerivedData/appname-gahmnzqeqhksvjbmtqtvnauibzrx/Build/Products/Debug-iphoneos/appname.app/appname'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:31:32.177

![编译源码](../Images/a7bfa42939e62c582fbaaac3bd925993.png)![在此处输入图像描述](../Images/e41d9511442d0e7c7b1e732c523714ed.png)

我不知道我是否能让你理解，但我已经为你尝试了这个奇怪的东西，我也遇到了同样的错误。然后我为自己找到了解决方案，也许它也会帮助你。转到构建阶段-> 编译源代码，然后选择您在文件夹中看到的所有带有定位文件夹的文件，如下面的屏幕截图所示。您可以在slider/slider/slider 中看到main.m 文件.....其中slider 是我的主要项目文件夹。只需检查它并按底部的减号按钮。这将从查找器中删除所有重复的文件。可以像我在屏幕截图中显示的那样对图像进行相同的操作。然后转到您项目的查找器，只需删除包含所有文件夹的第一个文件夹，项目将顺利运行。我已经这样做了，希望这对你也有帮助。

# sip - Easiest way to make automated SIP phone calls from a web app?

> ID：15078374
> 
> 赞同：3
> 
> 时间：2013-02-25T23:15:13.010
> 
> 标签：sip, asterisk, ivr, freeswitch, pbx

I have a client company with a simple web application (Python Flask) and I need to add a phone notification functionality to it.

The main requirement is that the app should call users, play a certain sound file and accept some tone input ("Hello! This is an automated message from your WebApp account. You have a meeting with `$John` today at `$5pm`. Please press 1 to confirm"). The other requirement is that the solution should be relatively cheap and fast to market.

I have done some research already and it seems that there are a few consequent steps to achieve that:

1.  Set up an [Asterisk](http://en.wikipedia.org/wiki/Asterisk_%28PBX%29) or a [FreeSwitch](http://en.wikipedia.org/wiki/FreeSWITCH) server;
2.  Set up a SIP account;
3.  Write some business logic for the Asterisk server which allows to make calls and play sounds via a SIP account;
4.  Write an API at the Asterisk server and expose it to the Python Flask web app.

Do I miss something here? Can any of the steps be omitted anyhow? Can I do it simpler?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T04:36:18.337

让它工作的最快方法是使用带有语音合成器的云语音服务之一。这是一个简短的清单：

*   特维利奥
*   特罗波
*   普利沃

[这里](http://txlab.wordpress.com/voice-cloud-api-services/)我列出了一些细节。

这些服务每分钟向您收费，另外您可能需要支付一些月费。

如果您想运行独立且独立的服务，我会推荐 FreeSWITCH 而不是 Asterisk。它有到达集成的可能性和 API。您需要阅读 FreeSWITCH 这本书，以了解它是如何工作的以及如何构建您的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:36:16.483

我同意 Stanislav Sinyagin 对基于云的解决方案的看法，但我想再补充一个，[Voxeo Prophecy](http://voxeo.com/products/voxeo-prophecy/)。Tropo 来自 Voxeo，但他们提供 Prophecy 作为解决方案的时间更长，它支持开放标准[CCXML](http://www.w3.org/TR/ccxml/)和[VoiceXML](http://www.w3.org/TR/voicexml20/)。CCXML 对于出站通知应用程序的优势是您可以更好地控制通知过程。

Prophecy 平台具有出色的[通话进度分析](http://en.wikipedia.org/wiki/Call_progress_analysis)(CPA) 这将允许您确定是机器还是人应答并相应地处理呼叫。例如，要求机器“...按一个确认”是没有意义的。相反，您可能希望留下一条消息，提供一个回叫号码，供用户在收听语音消息后进行确认。CPA 可用于在正确的时间（当问候留言停止时）在机器上留言，这样您就不会在语音邮件中收到剪辑的消息。CPA 还允许您提供关于谁收到通知的详细报告，对于那些没有收到通知的人，它可以告诉您它是错误号码（收到 SIT 音）、调制解调器或传真应答，还是响铃无应答（漂亮这些天很少见）。这些类型的详细信息可能会影响您对失败通知的重试过程。

使用 Prophecy 和开放标准的另一个优势是，如果您想迁移，您的应用程序将可移植到与 VoiceXML/CCXML 兼容的其他[IVR系统。](http://en.wikipedia.org/wiki/Interactive_voice_response)Tropo、Twilio 和 Plivo 都使用专有 API，不允许您将应用程序移动到其他服务。Prophecy 也可作为软件解决方案使用，因此如果您想将其从云中取出，您可以在本地运行它。您可以免费获得两个端口版本来试用。

Voxeo 的开发者网站上有关于开发出站通知系统的优秀文档。查看 F 部分中关于外拨的[CCXML 文档](http://docs.voxeo.com/ccxml/1.0-final/)。

不确定您熟悉哪些开发语言，但如果您习惯于 ASP.NET MVC，那么有一个[名为 VoiceModel 的开源项目](http://voicemodel.codeplex.com/)可以更轻松地开发 VoiceXML 应用程序。VoiceModel 的另一个优点是您只需开发一次应用程序，它就可以在任何与 VoiceXML 兼容的平台和 Tropo 上运行。他们目前正致力于在这个项目中添加出站通知支持，这将适用于 Tropo 和 VoiceXML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T17:41:02.007

列出的第三方解决方案是您轻松的选择。运行自己的星号也适合您想做的事情，但我认为从操作的角度来看，仅此而已。

在星号中，您可以使用（基本身份验证的）HTTP 请求发起具有您需要的 2 个变量的调用。您还需要一些设置和一个小的拨号方案。设置 SIP 帐户更容易或更困难，具体取决于提供商提供的文档。他们中的大多数都有配置星号的详细文档（对于freeswitch来说没有那么多）。让这该死的东西活着就是你要得到的:)

# cryptography - 凯撒密码和简单替换密码的区别

> ID：15078377
> 
> 赞同：0
> 
> 时间：2013-02-25T23:15:24.157
> 
> 标签：cryptography, encryption

我很困惑：我一直在浏览互联网，搜索了一些博客等，但我真的很困惑。我的问题是关于 a`Caesar cipher`和 a `simple substitution cipher`-- 有什么区别吗？当我搜索一些博客时，`simple substitution cipher`我得到了`Caesar cipher`. 有没有人可以向我解释它们是否相同？我真的很想制作一个可以作为`simple substitution cipher`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:18:42.250

术语“凯撒密码”通常用于旋转密码（最常见的是 -3，即 D->A，E->B，...因为据我所知，这是凯撒显然使用的密码） .

简单的替换密码不一定是轮换，但可以用任何其他字母替换任何字母，例如 A->G、B->Z、C->D、E->W、...

只有 26 个旋转密码（微不足道的不是真正的加密方法），而有 26 个！一般来说，替换密码，其中一些保持一个或多个字母相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:19:18.967

凯撒密码是

> 一种替换密码，其中明文中的每个字母都被字母表中一些固定位置的字母替换。

[http://en.wikipedia.org/wiki/Caesar_cipher](http://en.wikipedia.org/wiki/Caesar_cipher)

换句话说，凯撒密码是替换密码的一个简单特例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T23:20:09.553

凯撒密码使用简单的移位来确定加密文本。这个例子取自维基百科（[http://en.wikipedia.org/wiki/Caesar_cipher](http://en.wikipedia.org/wiki/Caesar_cipher)）

如果你使用 3 的左移，你会得到一个密码，看起来像

```
Plain:    ABCDEFGHIJKLMNOPQRSTUVWXYZ
Cipher:   XYZABCDEFGHIJKLMNOPQRSTUVW 
```

因此，加密字符串中的任何 X 在解密时都是 A，Y 是 B，等等。

替换密码是一种更通用的形式，其中一个值的实例总是被另一个值的实例替换。例如，所有 X 都替换为 Q。

凯撒密码是一种特定类型的替换密码，但并非所有替换密码都是凯撒密码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-25T10:55:44.297

Caeser Cipher：简化的替换密码是必不可少的，它将字母表中的每个字母转换为 3 个字符 A>D、B>E 等，例如：

消息 = ABCEFGHIJKLMNOPQRSTUV WXYZ

```
 we will count 3 letters after M.   NOP so M > P 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-29T16:12:05.580

纯文本：**ABCDEFGHIJKL**

密码：**XYZABCDEFGHI**

*所以在凯撒密码中，我们使用 3 的左移，因此加密后**'A'**将是**'X'**。*

# wmi - 使用 WMI 检测模式对话框

> ID：15078381
> 
> 赞同：-1
> 
> 时间：2013-02-25T23:15:35.713
> 
> 标签：wmi

有什么方法可以检测打开的窗口或更具体地说是使用 WMI 调用打开的模式对话框？我已经能够通过 Win32_Process 获得进程列表，但这没有关于进程打开的窗口的任何信息。我特别提到了 WMI，因为该解决方案必须能够从远程机器获取信息，而无需在远程机器上安装我正在构建的任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T01:34:56.363

不，没有任何与对话框或 Windows 相关的 WMI 类。

# python - 填充函数 (Python) string.zfill

> ID：15078382
> 
> 赞同：0
> 
> 时间：2013-02-25T23:15:37.790
> 
> 标签：python, pandas, etl

我想更改下面的 Python 函数以涵盖我的 business_code 需要填充的所有情况。Python 函数处理这个`string.zfill`异常，向左填充，直到达到给定的宽度，但我以前从未使用过它。

```
 #function for formating business codes
def formatBusinessCodes(code):
    """ Function that formats business codes.  Pass in a business code which will convert to a string with 6 digits """
    busCode=str(code)
    if len(busCode)==1:
        busCode='00000'+busCode
    elif len(busCode)==2:
        busCode='0000'+busCode
    else:
        if len(busCode)==3:
            busCode='000'+busCode
    return busCode

#pad extra zeros 
df2['business_code']=df2['business_code'].apply(lambda x: formatBusinessCodes(x))
businessframe['business_code']=businessframe['business_code'].apply(lambda x: formatBusinessCodes(x))
financialframe['business_code']=financialframe['business_code'].apply(lambda x: formatBusinessCodes(x)) 
```

上面的代码处理长度为 6 的业务代码，但我发现业务代码的长度 < 和 > 6 不同。我正在逐个状态验证数据状态。每个州的业务代码长度都不同（IL - 6 len，OH - 8 len）。所有代码必须均匀填充。因此，10 的 IL 代码应该产生 000010 等。我需要处理所有异常。使用命令行解析参数 (argparse) 和 string.zfill。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T23:18:17.163

你可以使用[str.format](http://docs.python.org/library/string.html#format-string-syntax)：

```
def formatBusinessCodes(code):
    """ Function that formats business codes.  Pass in a business code which will convert to a string with 6 digits """
    return '{:06d}'.format(code) 
```

* * *

```
In [23]: formatBusinessCodes(1)
Out[25]: '000001'

In [26]: formatBusinessCodes(10)
Out[26]: '000010'

In [27]: formatBusinessCodes(123)
Out[27]: '000123' 
```

* * *

格式`{:06d}`可以理解为：

*   `{...}`表示用 , 中的参数替换以下内容`format`（例如`code`）。
*   `:`开始格式规范
*   `0`启用零填充
*   `6`是字符串的宽度。但是请注意，大于 6 位的数字不会被截断。
*   `d`表示参数（例如`code`）应该是整数类型。

* * *

注意在 Python2.6 中，格式字符串需要一个额外的 0：

```
def formatBusinessCodes(code):
    """ Function that formats business codes.  Pass in a business code which will convert to a string with 6 digits """
    return '{0:06d}'.format(code) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:45:21.000

```
parser.add_argument('-b',help='Specify length of the district code')   
businessformat=args.d 
businessformat=businessformat.strip() 

df2['business_code']=df2['business_code'].apply(lambda x: str(x)) 

def formatBusinessCodes(code): 
bus=code bus.zfill(4) 
return bus 

formatBusinessCodes(businessformat) 
```

# c# - c#Wait似乎没有重新获取锁

> ID：15078385
> 
> 赞同：0
> 
> 时间：2013-02-25T23:15:46.087
> 
> 标签：c#, c#-4.0

我不确定为什么这段代码不安全。我有一个测试用例来证明它不安全。

```
 List<T> _l = new List<T>();
        public void Add(T t)
        {
            lock (_l)
            {
                _l.Add(t);
                Monitor.PulseAll(_l);
            }
        }
        public T[] RemoveToArray(TimeSpan timeout)
        {
            lock (_l)
            {
                if (_l.Count == 0)
                {
                    bool timedout = !Monitor.Wait(_l, timeout);

                    // no lock 
                    if (timedout)
                    {
                        return new T[0];
                    }
                }
                // with lock
                T[] items = _l.ToArray();
                _l.Clear();
                return items;
            }
        } 
```

该函数应该等待一段时间（之后超时）以使新项目到达。当时间到时，返回一个空数组，否则将内部列表中的所有元素排到一个数组中。在测试代​​码中，我创建了两个Task，一个用来添加，另一个用来移除。

```
 times = 3;
        Task[] tasks = new Task[2];
        tasks[0] = Task.Factory.StartNew(() =>
        {
            firstRemoveItems = _l.RemoveToArray(_infinite);
            Util.Delay(TimeSpan.FromMilliseconds(10)).Wait();
            secondRemoveItems = _l.RemoveToArray(_infinite);
        });
        tasks[1] = Task.Factory.StartNew(() =>
        {
            _l.Add(new object());
            Util.Delay(TimeSpan.FromMilliseconds(5)).Wait();
            for (int i = 1; i < times; i++)                
                _l.Add(new object());
        }); 
```

添加了三个项目，但是，项目的总数是 2、3、4。我不太确定问题是什么。我假设等待超时后重新获取锁？

# php - 将所有产品设置为使用默认值所有商店

> ID：15078386
> 
> 赞同：1
> 
> 时间：2013-02-25T23:15:49.430
> 
> 标签：php, magento

我有一个 Magento 1.5.0.1 安装，有 3 个不同的商店视图。在某些时候，其中两家商店不使用产品属性的默认值。我试图找到一种方法让所有产品对所有商店都使用默认值，这样客户只需在一个地方更新东西。我找到[了这篇](https://stackoverflow.com/questions/10313936/magento-set-product-attribute-to-use-default-values "这个")文章，但它似乎只适用于特定名称的产品。谁能解释如何在我的情况下使用该代码？或者建议新代码？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T03:05:48.843

我可以让它工作的唯一方法是通过 MySQL：

```
DELETE FROM `catalog_product_entity_text` where store_id != 0;
DELETE FROM `catalog_product_entity_datetime` where store_id != 0;
DELETE FROM `catalog_product_entity_decimal` where store_id != 0;
DELETE FROM `catalog_product_entity_int` where store_id != 0;
DELETE FROM `catalog_product_entity_varchar` where store_id != 0; 
```

以上将重置所有产品以使用所有属性的默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:29:04.430

您应该使用 Mage::getSingleton('catalog/product_action') 连续更新大量产品。

1°）获取您想要的产品ID，供所有产品使用：

```
$ids = Mage::getModel('catalog/product')->getCollection()->getAllIds(); 
```

2°）制作属性列表并关联值“false”

```
$attributes = array('name'=>false,'description'=>false,....) 
```

3°) 选择要更改的商店 ID 列表并将其设置在数组中：

```
$stores = array(1,2,3); 
```

然后创建你的脚本：

```
foreach ($stores as $store_id)
{
     Mage::getSingleton('catalog/product_action')->updateAttributes($ids, $attributes, $store_id);
} 
```

它将更新所有产品（id）以将 store_id 中的属性设置为默认值（感谢“false”值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T02:39:42.617

这将采用已在任何商店中设置的值并将其合并到所有产品的默认值中：

```
 <?php 
    $cat = mysql_connect("host", "user", "password") or die(mysql_error());
        mysql_select_db("database",$cat) or die(mysql_error());

        $types = array(
        'catalog_product_entity_text',
        'catalog_product_entity_datetime',
        'catalog_product_entity_decimal',
    'catalog_product_entity_int',
    'catalog_product_entity_varchar'
    );

    foreach($types as $type){

    $result = mysql_query("select * from $type where store_id != 0",$cat) or die(mysql_error());  

        while ($row = mysql_fetch_assoc($result)) {

            if(!is_null($row['value'])){

                mysql_query("update $type set value = '".mysql_real_escape_string(stripslashes($row['value']))."' 
                where store_id = '0' 
                and entity_id = '".$row['entity_id']."' 
                and attribute_id = '".$row['attribute_id']."'",$cat) or die(mysql_error()); 
            }

            mysql_query("delete from $type where value_id = '".$row['value_id']."'",$cat) or die(mysql_error()); 

        }

    }
?> 
```

# r - 如何创建时间记录均等分布的 chron 序列（一致的 delta t）

> ID：15078388
> 
> 赞同：0
> 
> 时间：2013-02-25T23:16:00.273
> 
> 标签：r, chron

我有以下功能。 `CreateChronVector`完全符合它的含义。默认情况下，生成的向量以每小时为间隔。该`RoundHour`函数将 chron 向量四舍五入到小时。

```
CreateChronVector  <-  function(chronFrom, chronTo, frequency = "hourly")  {
  library(chron)
  datesFrom <- dates(chronFrom)
  timesFrom <- (chronFrom - dates(chronFrom))
  datesTo <- dates(chronTo)
  timesTo <- (chronTo - dates(chronTo))
  if ((timesFrom != 0 || timesTo != 0) && frequency == "daily") {
      print("Error: The indicated dates have hour components while the given frequency is daily.")
  }
  else {
      if (timesTo == 0 && frequency == "hourly") {
          timesTo <- 23/24
      }
      if (frequency == "hourly") {
          chronFrom <- chron(dates = datesFrom, times = timesFrom, 
              format = c(dates = "m/d/y", times = "h:m:s"))
          chronTo <- chron(dates = datesTo, times = timesTo, 
              format = c(dates = "m/d/y", times = "h:m:s"))
          dateVector <- seq(chronFrom, chronTo, by = 1/24)
      }
      else if (frequency == "daily") {
          dateVector <- seq(datesFrom, datesTo)
      }
      return(dateVector)
  }
}

RoundHour  <- function(x)  {
  res <-  trunc(x,'hours', eps=1e-17)
  res <-  ifelse((x-res) > 0.5/24, res+1/24, res)
  return(as.chron(res))
} 
```

我面临的问题是间隔不一致。例如，下面的代码返回两个不同的间隔大小：

```
unique(diff(CreateChronVector(as.chron('2010-01-01'), as.chron('2010-01-01')))) 
```

同样，使用我的舍入函数也不能纠正问题：

```
unique(diff(RoundHour(CreateChronVector(as.chron('2010-01-01'), as.chron('2010-01-01'))))) 
```

我确信这个问题与舍入错误有关。我一直在尝试使用 trunc 函数及其 eps 参数，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:35:20.453

你可以使用`xts`包。一旦你有你的数据在`xts`对象中，你可以使用`align.time`函数来“四舍五入”时间索引。几乎所有的时间序列分析都非常方便`xts`

PS：如果您提供可重复的数据示例，我将通过示例更新答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T00:22:21.330

从[@G 中吸取教训。Grothendieck](https://stackoverflow.com/questions/15078388/how-to-create-a-chron-sequence-where-time-records-are-equally-distributed-consi#comment21206821_15078388)，如果你试试这个，你可以看到他在说什么：

```
hours <- 1:23
dateVector <- sapply(hours , function(x){ chron( dates = "01/01/10" , times = paste0(x,":00:00") ) } )
head( dateVector )
[1] 14610.04166666666606034 14610.08333333333393966 14610.12500000000000000
[4] 14610.16666666666606034 14610.20833333333393966 14610.25000000000000000
unique(diff(dateVector))
[1] 0.04166666666787932626903 0.04166666666606033686548 
```

所以你不能真正做到这一点，因为这些数字不能用浮点数精确表示，但这对你来说有什么重要的原因吗？

# javascript - Backbone - 覆盖 Hashchange 历史记录

> ID：15078389
> 
> 赞同：1
> 
> 时间：2013-02-25T23:16:14.833
> 
> 标签：javascript, backbone.js, routes, browser-history, hashchange

是否可以在不使用的情况下重写浏览器的历史记录`history.pushState`？

我有一个带有路由器的骨干应用程序，看起来像这样：

```
routes: {
    'posts': 'posts',
    'modal': 'modal'
},

'before': function (args) {
    //check if logged in
        //do some various other setup tasks
    //maybe delete modal routes from the history?

    //forward to route
    args.next()
},

'posts': function () {
    //make and show posts
},

'modal': function (params) {
    //edit user email preferences OR
    //create a new post OR
    //do various other crud operations
} 
```

每当触发模式路由时，我都想防止将哈希写入浏览器的历史状态。原因是，用户在回溯历史时不应该重新打开模式。

我查看了主干源代码，但没有看到任何简单的内容`history = []`。

有没有办法在没有推送状态的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:25:15.157

您是否尝试将 router.navigate(fragment, [options]) 函数的 replace 选项设置为 true ？

这应该更新 URL 而不会在浏览器的历史记录中创建条目

[http://backbonejs.org/#Router-navigate](http://backbonejs.org/#Router-navigate)

如果您正在处理按钮单击事件，则应该在视图中而不是在路由器类中处理。

例子：

```
class MyView extends Backbone.View

    events :

        'click #backButton'    :    'onClick'

    initialize : ->

           #Some Stuff

    render: ->

           #Some Stuff

    onClick: ( e ) ->

           router.navigate '/projects', {replace : true } 
```

# javascript - 通过 Node.js 将客户端表单输入发送到服务器端数据库查询并将结果返回给客户端

> ID：15078390
> 
> 赞同：1
> 
> 时间：2013-02-25T23:16:26.727
> 
> 标签：javascript, sql, ajax, node.js, post

我正在开发一个 Web 应用程序，用户可以在网页上输入“设备 ID”（我们在现场有 100 台设备在生产中使用，每个设备都有一个唯一的 ID），用户输入的结果将被发送返回到 Node.js 服务器，该服务器会将其存储到一个变量中，并在 SQL 查询中使用它从数据库服务器检索有关该特定设备的结果，然后将结果显示回客户端网页。

目前表单输入功能尚未实现，尽管我已经在 html 中编写了表单代码。

该程序可以正常工作，因为如果我要手动将 DEVICE_ID 更改为我希望从代码中检索数据的设备，但当然我希望能够在客户端页面上输入它，而不是我必须更改它手动的服务器端源代码。

```
"use strict";
var pg = require('pg').native;
var http = require('http');
var $ = require('cheerio');
var fs = require('fs');
var url = require('url');

var htmlString = fs.readFileSync('index.html').toString();
var parsedHTML = $.load(htmlString);

var dbUrl = "tcp://URL HERE/";

// The Sign-ID
var DEVICE_ID = '2001202';

// Create the http server
http.createServer(function (request, response) {
    var request = url.parse(request.url, true);
    var action = request.pathname;

    // Connect and query the database
    pg.connect(dbUrl, function(err, client) {
        // The complete sql query for everything that's needed for the app!
        client.query("SQL QUERY IS HERE" + DEVICE_ID + "etc..", 
            function (err, result) {
                // Remaining program code is here that performs DOM based 
                // manipulation to display results returned from the server
                // to the client side page.

                // Time to Render the document and output to the console
                console.log(parsedHTML.html());

                // Render the document and project onto browser
                response.end(parsedHTML.html());
            }
        ); // End client.query
    }); // End pg.connect
}).listen(8080); // End http.CreateServer

pg.end(); 
```

我考虑过以下几点： 1) 在 HTML 代码中使用 OnClick() 函数，如下所示：

```
onclick="lookupSignID() 
```

然后在包含该函数的 HTML 中包含一个外部 JS 文件，`lookupSignID()`但是我很快发现这只是执行客户端功能，而不是我想要的。

2) AJAX 仅适用于服务器自己生成新信息的情况，因此我不能使用 AJAX，因为用户正在输入设备 ID 以从中获取信息。

3) 可能使用 POST/GET

谁能建议我应该采取什么行动？如果解决方案（3）是最好的方法，我将如何去做？它可以集成到我现有的代码（如上所示）中而无需进行很多更改吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:33:46.140

如果您在客户端使用带有 AJAX POST 功能的 jQuery，然后在服务器端使用 express.js，您可以这样做：

```
app.post('/deviceid', function(req, res) {
   var deviceid = req.param('deviceid')
   console.log(deviceid)
   ...
}) 
```

# php - 将 WHERE 子句连接到链接

> ID：15078391
> 
> 赞同：-1
> 
> 时间：2013-02-25T23:16:37.417
> 
> 标签：php, mysql, hyperlink, where, where-clause

我需要将 WHERE 子句连接到链接。这是我的代码：

```
<body>
<?php

function toiletPaper($input) {
    // Clean input
    return $input;
}

$username="USERNAME";
$password="PASSWORD";
$database="DATABASE";

mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");
$query="SELECT * FROM searchacts";
$result=mysql_query($query);

// process form when posted 
$query = "SELECT * FROM searchacts";
$options['PriceLow'] = array("desc" => "Price (Low to High)","query" => " ORDER BY price ASC");
$options['PriceHigh'] = array("desc" => "Price (High to Low)","query" => " ORDER BY price DESC");
$options['NameAZ'] = array("desc" => "Name (A-Z)","query" => " ORDER BY name ASC");
$options['NameZA'] = array("desc" => "Name (Z-A)","query" => " ORDER BY name DESC");

$query = "SELECT * FROM searchacts";
$filter['partybands'] = array("desc" => "Party Bands","query" => " WHERE category='Party Bands'");

// Important: function name is made up
$cleanValue = toiletPaper($_REQUEST['value']);
if (array_key_exists($cleanValue, $options)) {
    $query .= $query.$options[$cleanValue];
}
$result = mysql_query($query);
$num = mysql_num_rows($result);
echo "<a href='".$_SERVER['PHP_SELF']."'>All</a>";
foreach ($options as $key => $value) {
    echo "<a href='".$_SERVER['PHP_SELF']."?value=".$key."'>".$value['desc']."</a>";

}   

?>

<form action='<?php echo $_SERVER['PHP_SELF']; ?>' method='post' name='form_filter' >  
    <select name="value">  
        <option value="all">All</option>  
        <option value="PriceLow">Price (Low to High)</option>  
        <option value="PriceHigh">Price (High to Low)</option>  
        <option value="NameAZ">Name (A-Z)</option>  
        <option value="NameZA">Name (Z-A)</option>  
    </select>  
    <br />  
    <input type='submit' value = 'Re-Order'>  
</form>

<?php
$i=0;
while ($i < $num) {

$image=mysql_result($result,$i,"image");
$name=mysql_result($result,$i,"name");
$category=mysql_result($result,$i,"category");
$description=mysql_result($result,$i,"description");
$stamps=mysql_result($result,$i,"stamps");
$stickmen=mysql_result($result,$i,"stickmen");
$price=mysql_result($result,$i,"price");
$view=mysql_result($result,$i,"view");
$actpagelink=mysql_result($result,$i,"actpagelink");

?>

<a href="<?php echo $actpagelink; ?>" class="searchitem">
<div class="searchimage"><img src="<?php echo $image; ?>"/></div>
<div class="searchtext">
  <div class="searchname"><?php echo $name; ?></div>
  <div class="searchcategory"><?php echo $category; ?></div>
  <div class="searchdescription"><?php echo $description; ?></div>
</div>
<div class="searchstamps"><img src="<?php echo $stamps; ?>" /></div>
<div class="searchstickmen"><img src="<?php echo $stickmen; ?>" /></div>
<div class="searchprice"><span class="pricefrom">from</span>&pound;<?php echo $price; ?></div>

<div class="searchview"><img src="<?php echo $view; ?>" /></div>

</a>

<?php
$i++;
}

mysql_close();
?>

</body> 
```

所以我有我的条款：

```
elseif($_POST['value'] == 'partybands') {   

            $query = "SELECT * FROM searchacts
    WHERE category='Party Bands'";   
        } 
```

我需要连接到一个链接，例如。`<a href="">Party Bands</a>`

我该怎么做，因为我将有很多 where 子句来过滤数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:21:48.637

使用 url 参数并传入变量，然后使用这些变量来触发你想要 where 子句说的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:23:29.790

我建议使用关联[数组](http://php.net/manual/en/language.types.array.php)和[in_array](http://php.net/manual/en/function.in-array.php)进行验证。

还要确保在使用输入之前对其进行消毒。

编辑2：

```
<body>
<?php
function toiletPaper($input) {
    // Clean input
    return $input;
}

$username="USERNAME";
$password="PASSWORD";
$database="DATABASE";

mysqli_connect("localhost",$username,$password);
@mysqli_select_db($database) or die( "Unable to select database");

// process form when posted
$query = "SELECT * FROM searchacts";
$options['partybands'] = array("desc" => "Party Bands","query" => " WHERE category='Party Bands'");
$options['PriceLow'] = array("desc" => "Price (Low to High)","query" => " ORDER BY price ASC");
$options['PriceHigh'] = array("desc" => "Price (High to Low)","query" => " ORDER BY price DESC");
$options['NameAZ'] = array("desc" => "Name (A-Z)","query" => " ORDER BY name ASC");
$options['NameZA'] = array("desc" => "Name (Z-A)","query" => " ORDER BY name DESC");

// Important: function name is made up
$cleanValue = toiletPaper($_REQUEST['value']);
if (array_key_exists($cleanValue, $options)) {
    $query .= $query.$options[$cleanValue];
}
$result = mysqli_query($query);
$num = mysqli_num_rows($result);
echo "<a href='".$_SERVER['PHP_SELF']."'>All</a>";
foreach ($options as $key => $value) {
    echo "<a href='".$_SERVER['PHP_SELF']."?value=".$key."'>".$value['desc']."</a>";
}
?>
<br />
<?php
$i=0;
while ($i < $num) {
    $image = mysqli_result($result,$i,"image");
    $name = mysqli_result($result,$i,"name");
    $category = mysqli_result($result,$i,"category");
    $description = mysqli_result($result,$i,"description");
    $stamps = mysqli_result($result,$i,"stamps");
    $stickmen = mysqli_result($result,$i,"stickmen");
    $price = mysqli_result($result,$i,"price");
    $view = mysqli_result($result,$i,"view");
    $actpagelink = mysqli_result($result,$i,"actpagelink");
?>

<a href="<?php echo $actpagelink; ?>" class="searchitem">
    <div class="searchimage"><img src="<?php echo $image; ?>"/></div>
    <div class="searchtext">
        <div class="searchname"><?php echo $name; ?></div>
        <div class="searchcategory"><?php echo $category; ?></div>
        <div class="searchdescription"><?php echo $description; ?></div>
    </div>
    <div class="searchstamps"><img src="<?php echo $stamps; ?>" /></div>
    <div class="searchstickmen"><img src="<?php echo $stickmen; ?>" /></div>
    <div class="searchprice"><span class="pricefrom">from</span>&pound;<?php echo $price; ?></div>
    <div class="searchview"><img src="<?php echo $view; ?>" /></div>
</a>

<?php
 $i++;
}
mysql_close();
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T23:38:51.090

我猜你正在尝试：

[http://example.com/yourscript.php?value=partybands](http://example.com/yourscript.php?value=partybands)

但是发现这行不通...

这是因为您正在寻找数组中的`value`变量`$_POST`。

```
$_POST['value'] == 'partybands' 
```

如果您希望能够从 POST 或 GET 中获取值，您可以使用 $_REQUEST

```
$_REQUEST['value'] == 'partybands' 
```

您还需要修改最上面的条件`isset()`。

但请认真对待其他人在此提出的关于安全性和前向兼容性的警告。

不要相信用户数据。必须消毒。最好的方法可能是通过 PDO。

# html-lists - Markdown 中从 0 开始的有序列表

> ID：15078393
> 
> 赞同：36
> 
> 时间：2013-02-25T23:16:38.607
> 
> 标签：html-lists, markdown

我是**Markdown**的新手。我在写类似的东西：

```
# Table of Contents  
0\. Item 0  
1\. Item 1  
2\. Item 2 
```

但这会生成一个以 1 开头的列表，有效地呈现如下内容：

```
# Table of Contents
1\. Item 0
2\. Item 1
3\. Item 2 
```

我想从零开始列表。有没有简单的方法可以做到这一点？

如果没有，我可以简单地重命名我的所有索引，但是当有多个项目时这很烦人。从零开始列表对我来说似乎很自然，就像从零开始数组的索引一样。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-25T23:24:52.380

简单地说：**没有**

更长：**是的，但是**

当您在 Markdown 中创建有序列表时，它会被解析为 HTML 有序列表，即：

```
# Table of Contents

0\. Item 0  
1\. Item 1  
2\. Item 2 
```

将创建：

```
<h1>Table of Contents</h1>
<ol>
  <li>Item 0</li>
  <li>Item 1</li>
  <li>Item 2</li>
</ol> 
```

如您所见，没有关于起始编号的数据。如果您想从某个数字开始，不幸的是，您必须使用纯 HTML 并编写：

```
<ol start="0">
  <li>Item 0</li>
  <li>Item 1</li>
  <li>Item 2</li>
</ol> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T23:22:27.583

您可以使用 HTML**开始**标签：

```
<ol start="0">
  <li> item 1</li>
  <li> item 2</li>
  <li> item 3</li>
</ol> 
```

目前所有浏览器都支持它：Internet Explorer 5.5+、Firefox 1+、Safari 1.3+、Opera 9.2+、Chrome 2+

您可以选择使用**类型**选项卡进行更复杂的枚举：

*   `type="1"`- 十进制（默认样式）
*   `type="a"`- 低阿尔法
*   `type="A"`- 上阿尔法
*   `type="i"`- 低罗马
*   `type="I"`- 上罗马

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-30T04:32:10.160

通过 html：使用`<ol start="0">`

通过 CSS：

```
ol {
    counter-reset: num -1; // reset counter to -1 (any var name is possible)
}
ol li {
    list-style-type: none; // remove default numbers
}
ol li:before {
    counter-increment: num; // increment counter
    content: counter(num) ". "; 
} 
```

[小提琴](http://jsfiddle.net/gepvkx6p/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-12T13:32:39.643

**更新**：取决于实施。

当前版本的[CommonMark](http://spec.commonmark.org/0.27/#list-items)需要该`start`属性。一些实现已经支持这一点，例如 pandoc 和 markdown-it。有关更多详细信息，请参阅[babelmark](http://johnmacfarlane.net/babelmark2/?normalize=1&text=0.+Item+0++%0A1.+Item+1++%0A2.+Item+2)。

# autofixture - 无效构造函数参数的自动夹具测试

> ID：15078400
> 
> 赞同：11
> 
> 时间：2013-02-25T23:16:59.333
> 
> 标签：autofixture

我有以下课程和测试。我想测试将 null 值作为参数传递给构造函数，并期待`ArgumentNullException`. 但是因为我使用了 Autofixture 的`CreateAnonymous`方法，所以我得到了一个`TargetInvocationException`。

编写这些测试的正确方法是什么？

```
public sealed class CreateObject : Command {
    // Properties
    public ObjectId[] Ids { get; private set; }
    public ObjectTypeId ObjectType { get; private set; }
    public UserId CreatedBy { get; private set; }

    // Constructor
    public CreateObject(ObjectId[] ids, ObjectTypeId objectType, UserId createdBy) {
      Guard.NotNull(ids, "ids");
      Guard.NotNull(objectType, "objectType");
      Guard.NotNull(createdBy, "createdBy");

      Ids = ids;
      ObjectType = objectType;
      CreatedBy = createdBy;
    }
}

[TestMethod]
[ExpectedException(typeof(ArgumentNullException))]
public void constructor_with_null_ids_throw() {
    fixture.Register<ObjectId[]>(() => null);
    fixture.CreateAnonymous<CreateObject>();
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T07:05:27.167

IMO，[Ruben Bartelink 的评论](https://stackoverflow.com/questions/15078400/autofixture-test-for-invalid-constructor-parameter#comment21207626_15078400)是最好的答案。

使用[AutoFixture.Idioms](http://nuget.org/packages/AutoFixture.Idioms)，您可以这样做：

```
var fixture = new Fixture();
var assertion = new GuardClauseAssertion(fixture);
assertion.Verify(typeof(CreateObject).GetConstructors()); 
```

如果任何构造函数中的任何构造函数参数缺少保护子句，Verify 方法将为您提供非常详细的异常消息。

* * *

FWIW，AutoFixture 广泛使用反射，所以我不认为它抛出一个错误`TargetInvocationException`。虽然它*可以*解开所有`TargetInvocationException`实例并重新抛出它们的`InnerException`属性，但这也意味着处理（可能）有价值的信息（例如 AutoFixture 堆栈跟踪）。我已经考虑过这一点，但出于这个原因，我不想将 AutoFixture 朝那个方向发展。客户端总是可以过滤掉信息，但是如果信息被过早地删除，客户端就无法取回它。

如果您更喜欢另一种方法，那么编写一个解开异常的辅助方法并不难 - 可能是这样的：

```
public Exception Unwrap(this Exception e)
{
    var tie = e as TargetInvocationException;
    if (tie != null)
        return tie.InnerException;
    return e;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-06T12:00:20.480

我在寻找类似的东西时遇到了这个。我想补充一点，结合 automoqcustomization 和 xunit，下面的代码也可以工作，而且更简洁。

```
 [Theory, AutoMoqData]
    public void Constructor_GuardClausesArePresent(GuardClauseAssertion assertion)
    {
        assertion.Verify(typeof(foo).GetConstructors());
    } 
```

您只需按如下方式创建 AutoMoqData 属性。

```
 public class AutoMoqDataAttribute : AutoDataAttribute
    {
        public AutoMoqDataAttribute() : base(() => new Fixture().Customize(new AutoMoqCustomization()))
        {

        }
    } 
```

# apache-flex - 计算数据网格中的列

> ID：15078402
> 
> 赞同：0
> 
> 时间：2013-02-25T23:17:13.717
> 
> 标签：apache-flex, actionscript, flex3

我真的需要你的帮助。人员遇到以下问题：我有一个数据网格，其中有一列名为：第 2 列，它有一个固定的数字，其余的是可编辑的列 = true，以便我的客户可以输入数据。我希望每一个，因为我可以手动插入来调用我进行比较的函数。那行我正在更改值 ¿¿ 插入该行不能大于列的值：第 2 列

这是为每个采样线完成的

```
 Line 1: Fixed number ==> 85
 I can get editable columns in column 3: value = 20
 I can get editable columns in column 4: value = 50
 I can get editable columns in column 5: value = 100 
```

当该值大于列 Column 2 时发出警报。

我正在使用 Flex 3

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
<mx:ArrayCollection id="arrColl">
    <mx:source>
        <mx:Array>
            <mx:Object label="Student A" score="85" />
            <mx:Object label="Student B" score="48" />
            <mx:Object label="Student C" score="71" />
            <mx:Object label="Student D" score="88" />
            <mx:Object label="Student E" score="24" />
            <mx:Object label="Student F" score="64" />
            <mx:Object label="Student G" score="76" />
            <mx:Object label="Student H" score="76" />
            <mx:Object label="Student I" score="93" />
            <mx:Object label="Student J" score="88" />
            <mx:Object label="Student K" score="48" />
            <mx:Object label="Student L" score="76" />
        </mx:Array>
    </mx:source>
</mx:ArrayCollection>
<mx:DataGrid x="396" y="309" dataProvider="{arrColl}" editable="true">
    <mx:columns>
        <mx:DataGridColumn headerText="Column 1"  dataField="label"  />
        <mx:DataGridColumn headerText="Column 2"  dataField="score"  />
        <mx:DataGridColumn headerText="Column 3"  editable="true"  dataField="col1"/>
        <mx:DataGridColumn headerText="Column 4"  editable="true"  dataField="col2"/>
        <mx:DataGridColumn headerText="Column 5"  editable="true"  dataField="col3"/>
        <mx:DataGridColumn headerText="Column 6"  editable="true"  dataField="col4"/>
        <mx:DataGridColumn headerText="Column 7"  editable="true"  dataField="col5" />
    </mx:columns>
</mx:DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:36:49.683

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
<mx:Script>
<![CDATA[
    import mx.controls.Alert;
    import mx.controls.TextInput;
    import mx.events.DataGridEvent;
    import mx.events.DataGridEventReason;

    [Bindable]
    var Acumula:int = 0;

    protected function checkInput(event:DataGridEvent):void
    {

        if (event.reason == DataGridEventReason.NEW_ROW || event.reason == DataGridEventReason.NEW_COLUMN)
        {
            var editor:TextInput = (event.currentTarget as DataGrid).itemEditorInstance as TextInput;
            var text:String = editor.text;
            var myEditor:TextInput =  TextInput(event.currentTarget.itemEditorInstance);

            Acumula += int(myEditor.text);
            if(int(Acumula) > int(event.itemRenderer.data.score)) 
                {                           
                    Acumula = 0;

                    event.preventDefault();

                    Alert.show(text + "ULTRAPASSOU!");

                    return;
                }

        }
    }

]]>
</mx:Script>
<mx:ArrayCollection id="arrColl">
<mx:source>
    <mx:Array>
        <mx:Object label="Student A" score="85"/>
        <mx:Object label="Student B" score="48"/>
        <mx:Object label="Student C" score="71"/>
        <mx:Object label="Student D" score="88"/>
        <mx:Object label="Student E" score="24"/>
        <mx:Object label="Student F" score="64"/>
        <mx:Object label="Student G" score="76"/>
        <mx:Object label="Student H" score="76"/>
        <mx:Object label="Student I" score="93"/>
        <mx:Object label="Student J" score="88"/>
        <mx:Object label="Student K" score="48"/>
        <mx:Object label="Student L" score="76"/>
    </mx:Array>
</mx:source>
</mx:ArrayCollection>
<mx:DataGrid x="10" y="28" dataProvider="{arrColl}" editable="true" itemEditEnd="checkInput(event)">
<mx:columns>
    <mx:DataGridColumn headerText="Column 1"  dataField="label" editable="false"/>
    <mx:DataGridColumn headerText="Column 2"  dataField="score" editable="false"/>

    <mx:DataGridColumn headerText="Column 3"  editable="true" dataField="col1">
        <mx:itemEditor>
            <mx:Component>
                <mx:TextInput restrict="0-9"/>
            </mx:Component>
        </mx:itemEditor> 
    </mx:DataGridColumn>

    <mx:DataGridColumn headerText="Column 4"  editable="true" dataField="col2">
        <mx:itemEditor>
            <mx:Component>
                <mx:TextInput restrict="0-9"/>
            </mx:Component>
        </mx:itemEditor> 
    </mx:DataGridColumn>

    <mx:DataGridColumn headerText="Column 5"  editable="true" dataField="col3">
        <mx:itemEditor>
            <mx:Component>
                <mx:TextInput restrict="0-9"/>
            </mx:Component>
        </mx:itemEditor> 
    </mx:DataGridColumn>

    <mx:DataGridColumn headerText="Column 6"  editable="true" dataField="col4">
        <mx:itemEditor>
            <mx:Component>
                <mx:TextInput restrict="0-9"/>
            </mx:Component>
        </mx:itemEditor> 
    </mx:DataGridColumn>

    <mx:DataGridColumn headerText="Column 7"  editable="true" dataField="col5">
        <mx:itemEditor>
            <mx:Component>
                <mx:TextInput restrict="0-9"/>
            </mx:Component>
        </mx:itemEditor> 
    </mx:DataGridColumn>

</mx:columns>
</mx:DataGrid>
<mx:Label x="164" y="211" text="{Acumula}"/>
</mx:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:03:25.200

你需要这样做：

1.  为 score 列设置 editable = "false" 以防止用户更改固定值
2.  为列 col1 到 col5 设置限制以启用仅输入数字
3.  添加一个检查功能来做camparison

这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
<mx:Script>
    <![CDATA[
        import mx.controls.Alert;
        import mx.controls.TextInput;
        import mx.events.DataGridEvent;
        import mx.events.DataGridEventReason;

        protected function checkInput(event:DataGridEvent):void
        {
            if (event.reason == DataGridEventReason.NEW_ROW || event.reason == DataGridEventReason.NEW_COLUMN)
            {
                var editor:TextInput = (event.currentTarget as DataGrid).itemEditorInstance as TextInput;
                var text:String = editor.text;

                if( event.dataField == "col1" || event.dataField == "col2" || event.dataField == "col3" || event.dataField == "col4" || event.dataField == "col5")
                {
                    if(int(text) > int(event.itemRenderer.data.score)) 
                    {                           
                        editor.text = "";

                        event.preventDefault();

                        Alert.show(text + " is too big!");

                        return;
                    }
                }
            }
        }

    ]]>
</mx:Script>
<mx:ArrayCollection id="arrColl">
    <mx:source>
        <mx:Array>
            <mx:Object label="Student A" score="85"/>
            <mx:Object label="Student B" score="48"/>
            <mx:Object label="Student C" score="71"/>
            <mx:Object label="Student D" score="88"/>
            <mx:Object label="Student E" score="24"/>
            <mx:Object label="Student F" score="64"/>
            <mx:Object label="Student G" score="76"/>
            <mx:Object label="Student H" score="76"/>
            <mx:Object label="Student I" score="93"/>
            <mx:Object label="Student J" score="88"/>
            <mx:Object label="Student K" score="48"/>
            <mx:Object label="Student L" score="76"/>
        </mx:Array>
    </mx:source>
</mx:ArrayCollection>
<mx:DataGrid x="396" y="309" dataProvider="{arrColl}" editable="true" itemEditEnd="checkInput(event)">
    <mx:columns>
        <mx:DataGridColumn headerText="Column 1"  dataField="label" editable="false"/>
        <mx:DataGridColumn headerText="Column 2"  dataField="score" editable="false"/>

        <mx:DataGridColumn headerText="Column 3"  editable="true" dataField="col1">
            <mx:itemEditor>
                <mx:Component>
                    <mx:TextInput restrict="0-9"/>
                </mx:Component>
            </mx:itemEditor> 
        </mx:DataGridColumn>

        <mx:DataGridColumn headerText="Column 4"  editable="true" dataField="col2">
            <mx:itemEditor>
                <mx:Component>
                    <mx:TextInput restrict="0-9"/>
                </mx:Component>
            </mx:itemEditor> 
        </mx:DataGridColumn>

        <mx:DataGridColumn headerText="Column 5"  editable="true" dataField="col3">
            <mx:itemEditor>
                <mx:Component>
                    <mx:TextInput restrict="0-9"/>
                </mx:Component>
            </mx:itemEditor> 
        </mx:DataGridColumn>

        <mx:DataGridColumn headerText="Column 6"  editable="true" dataField="col4">
            <mx:itemEditor>
                <mx:Component>
                    <mx:TextInput restrict="0-9"/>
                </mx:Component>
            </mx:itemEditor> 
        </mx:DataGridColumn>

        <mx:DataGridColumn headerText="Column 7"  editable="true" dataField="col5">
            <mx:itemEditor>
                <mx:Component>
                    <mx:TextInput restrict="0-9"/>
                </mx:Component>
            </mx:itemEditor> 
        </mx:DataGridColumn>

    </mx:columns>
</mx:DataGrid>
</mx:Application> 
```

# python - 美丽的汤安装

> ID：15078411
> 
> 赞同：-1
> 
> 时间：2013-02-25T23:18:12.830
> 
> 标签：python, python-2.7

我有几个关于在 python 上安装包的问题。我已经查看并尝试查找有关 easy_install 的信息....我在哪里得到它以及如何使它工作。它的文档非常混乱。

我明白一旦我拥有它，我可以简单地使用它来easy_install beautifulsoup4。我只是无法让它工作。

我尝试下载设置工具，但它似乎不起作用....任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:55:51.183

setuptools 的 Windows 二进制文件可在下面的链接中找到。一旦安装了这些，您应该能够使用 easy_install 命令。

如果您不想每次都输入 easy_install 的完整路径，则需要将 easy_install.exe 的目录添加到您的 Windows PATH 环境变量中。

[https://pypi.python.org/pypi/setuptools](https://pypi.python.org/pypi/setuptools)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:44:24.830

（我写这个是为了回答你的问题的评论）尝试在 Windows 上安装[Cygwin](http://www.cygwin.com/)，然后使用 easy_install、pip 和类似的东西会更容易！可能有帮助！

# asp.net-mvc - 正确完成 ASP.NET MVC：查看模型

> ID：15078414
> 
> 赞同：1
> 
> 时间：2013-02-25T23:18:41.353
> 
> 标签：asp.net-mvc, orm, viewmodel

我阅读了这个 q/a [Real example of TryUpdateModel, ASP .NET MVC 3](https://stackoverflow.com/questions/7735635/real-example-of-tryupdatemodel-asp-net-mvc-3)并且对@ben-foster 的响应非常感兴趣。

我开始对该答案发表评论，但时间很长，因此开始了一个新问题。

拥有适用于所有方法的 ViewModels（我非常喜欢）让我进入了一些“奇怪的场景”，我想要建议我应该怎么做。

想象一下这个结构：

```
public class ProductListEditableViewModel {
    List<ProductEditViewModel> products {get;set;}
}
public class ProductEditViewModel {
    List<PriceViewModel> prices {get;set;}
}

public class PriceViewModel {
    CurrencyViewModel currency {get;set;}
} 
```

等等 ... ？你真的为每个内部类制作一个视图模型吗？那么如何将所有这些映射到模型对象？

此外，这涵盖了编辑，但我有一个添加，一个通过电子邮件发送，以及可能更多的视图，所以更多的视图模型！我应该像这样结束吗：

AddCurrencyViewModel QuickAddCurrencyViewModel EditCurrencyViewModel ListCurrencyViewModel DeleteCurrencyViewModel ShareCurrencyViewModel

都具有“几乎相同”的属性？

是否应该将所有这些打包到一个文件中？

我还需要所有这些视图模型还是继承方法可能会更好？

如果可以的话，我会很感激详细说明复杂的场景

此外，我使用 DTO 方法将一些模型对象公开到 Web 服务/api 中，所以我已经有了某种形式的映射，其中这个 DTO 不完全是我的 ViewModel，我应该删除其中一个吗？在这种情况下有什么建议？

我正在使用实体框架，但我认为问题是（或应该是）ORM 不可知论。不使用 UoW 模式（这会有帮助吗？），因为随着物体深度的增加，它看起来会变得更加复杂。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:30:39.757

我们通常每个视图都有一个视图模型，所以是的，如果您有很多视图，那么您*将*有很多视图模型。

在典型的 CRUD 应用程序中，我们经常有非常相似的视图，例如 Add 和 Update。在这些情况下，是的，我们使用继承而不是编写重复的代码——通常是添加子类更新。

```
public class AddFoo : UpdateFoo {
    public AddFoo() {
        // set up defaults for new Foo
    }
}

public class UpdateFoo {
    public string Name { get; set; }
    // etc.
} 
```

过去，我们试图在视图之间“共享”视图模型，但通常会陷入痛苦的世界。

关于你的“奇怪的场景”——这确实看起来很奇怪，但也许是因为我不理解你的应用程序。

您的视图模型的目标是为视图提供所需的信息，并理想地*展平*任何复杂的对象，以便它们更易于使用。你不应该像你的例子那样拆分你的视图模型，除非这样做是有意义的。

假设我想创建一个视图，客户可以在其中更改他们的联系方式。采用以下域对象：

```
public class Customer {
    public string FirstName { get; set; }
    public string LastName { get;set; }
    public Address Address { get; set; }
} 
```

我可能会将其展平为如下视图模型：

```
public class UpdateAddressModel {
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string AddressLine1 { get; set; }
    public string AddressLine2 { get; set; }
    public string AddressCity { get; set; }
    // etc.
} 
```

当然，在某些情况下这样做没有意义，例如在线商店中的仪表板视图，其中有一个缺货产品列表和一个最近订单列表——这两件事无关，但您的观点需要：

```
public class DashboardModel {
    public List<Product> ProductsGoingOutOfStock { get; set; }
    public List<Order> NewOrders { get; set; }
} 
```

> 那么如何将所有这些映射到模型对象？

我假设模型对象是指您的数据/域模型。这里的关键要点是，您用于呈现视图的视图模型不太可能与您发布到服务器的“模型”相同，如果它们是，您可能过度发布或者您有一些疯狂的输入-一切都会让你的眼睛流血的数据捕获屏幕。

我发现将发送到服务器的内容视为命令以及用于将视图呈现为视图模型的内容会有所帮助。

所以你的问题的答案 - 你如何将你的复杂视图模型映射*到*你的数据模型？- 很简单，你没有。您应该向服务器发送执行特定任务的命令，例如更新地址。

在如何构建视图模型方面没有硬性规定，但通常会采用有意义的方法，如果它开始感觉太复杂，您可能会尝试用一个视图做太多事情。

我希望这有帮助。[你会在我的博客](http://ben.onfabrik.com/posts/tagged/aspnet-mvc)上找到很多与这件事有关的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-21T16:32:17.940

我意识到这是一个老问题，但我确实想解决 OP 提出的一个没有回答的问题。

> Should all those [ViewModels] be packed into one file ?

Most of the examples I see put each ViewModel in a separate file, so the dominant convention seems to be one file per viewmodel, but I found in practice that this seems to be overkill. Instead I put all viewmodels for a particular controller in one file with multiple viewmodels in it. So for example if User is my Controller and I have several viewmodels associated with this controller such as UserAddViewModel, UserEditViewModel, UserDeleteViewModel I put all of the viewmodels for User in one file called UserViewModels.cs

# c# - C# <-> Java 套接字通信

> ID：15078417
> 
> 赞同：2
> 
> 时间：2013-02-25T23:19:05.667
> 
> 标签：c#, java, .net, sockets, datainputstream

我正在制作一个 .NET 应用程序，它应该通过套接字与 Java 应用程序进行通信。这是.NET代码：

```
string str = "  MSG1234";
TcpClient client = new TcpClient();
client.Connect("127.0.0.1", 8080);
byte[] msg = Encoding.UTF8.GetBytes(str);
client.Client.Send(msg);
StreamWriter sw = new StreamWriter(client.GetStream());
StreamReader sr = new StreamReader(client.GetStream());
while (true)
{
     Console.WriteLine(sr.Read());
} 
```

问题是 Java 应用程序不会发送答案。该应用程序是第 3 方软件，我无法更改它，但是我下载了反编译器并在 Java 类中找到了相关的代码：

```
try {
   while (this.is.available() <= 0);
   body = new byte[this.is.available()];
   this.is.readFully(body);
   System.out.println("Message received");
} catch (Exception e) {
   System.out.println("Error: " + body);
} 
```

在这种情况下，“是”是一个 DataInputStream。以下是发生的情况： 1\. 我创建一个套接字并发送消息 2\. 我等待响应，没有任何反应 3\. 我手动关闭应用程序 - 它导致套接字过期 4\. 突然整个消息出现在 Java 应用程序的日志中. 这意味着发生了异常，并且体内确实有东西。

您能否指出错误可能在哪里？我相信 this.is.readFully(body) 线不应该在那里，但我不确定。也许我应该从 C# 代码手动发送 EOF，但我无法找出如何。

该代码的另一个小问题是，消息的前两个字符被删除，这就是为什么我在实际消息前面包含两个空格。

先感谢您。

**编辑**

所以我试图用一些随机数据填充套接字，我终于得到了答案：

```
for (int i = 0; i < 600; i++) 
{
    sw.Write("some long random string"); 
    sw.Flush(); 
} 
```

不过，这不是一个好的解决方案，因为我发送的信息必须准确。然后我尝试在发送相关数据后关闭套接字，`soc.Disconnect(false);`这会导致 Java 应用程序的日志填充正确的调试信息。有没有办法将 EOL 发送到套接字，以便 Java 应用程序停止侦听并开始发送数据？谢谢你。

**编辑 2** 我试图创建一个 Java 客户端来连接到服务器，同样的事情也发生了。

然后，我创建了一个虚拟服务器来侦听与我正在连接的 Java 应用程序相同的端口，它的行为也与 Java 应用程序一样，并且正在工作。

现在我觉得我唯一的机会是将 EOT 或 EOF 命令发送到流，但我不知道如何在 .NET 上执行此操作，我也无法在互联网上找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:44:39.937

如果 Java 应用程序来自第三方，那么您可能做错了什么。该`DataInputStream.readFully(byte[])`函数阻止应用程序，直到它读取字节数组可以容纳的字节数，因此您拥有的代码片段来自读取操作。

我还看到您使用该`Socket.Send(byte[])`函数与 Java 应用程序进行通信，我建议您使用更高级别的东西，例如 StreamWriter 或 BinaryWriter，而不是像这样：

```
StreamWriter = new BinaryWriter(client.GetStream());
StreamWriter.Write(msg);
StreamWriter.Flush(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:32:30.827

您可以尝试同时刷新*（*因此`StreamWriter`它将其缓冲区写入流对象）和`NetworkStream`您从中获得的实际值`client.GetStream()`（因此它发送一个数据包，尽管数据包还没有“满”）？

```
NetworkStream ns = client.GetStream();
StreamWriter sw = new StreamWriter(ns);
StreamReader sr = new StreamReader(ns);
// ...
sw.Flush();
ns.Flush(); 
```

最有可能的是，您没有冲洗所有需要冲洗的东西。您是否尝试过使用例如 wireshark 来查看网络通信——数据是否真的出去*了*？如果不是，则问题出在您的 .NET 代码中。

# f# - 在 F# 类型提供程序中发出生成的类型

> ID：15078419
> 
> 赞同：4
> 
> 时间：2013-02-25T23:19:13.133
> 
> 标签：f#, type-providers, f#-3.0

我创建了一个简单的生成类型提供程序，它在重组类型时采用程序集的路径，将它们置于类型提供程序命名空间下（如果您愿意，可以进行内部化）。

相关代码的链接在这里 [https://github.com/colinbull/Playground](https://github.com/colinbull/Playground)

现在似乎正确提供了类型，

```
let[<Literal>]assemblyPath = @"D:\Appdev\Playground\SimpleLib\bin\Debug\SimpleLib.dll"
type T = Inno.InternalisingProvider<assemblyPath>
type C = T.Class1

[<EntryPoint>]
let main argv = 
    let c = new C()
    printfn "Result: %A" c.X
    System.Console.ReadLine() |> ignore
    0 
```

因为在 VS 中显示没有任何报告的错误。但是，当我编译此程序集时，IL 似乎发出错误并出现以下错误。

> 错误 1：写入二进制 'obj\Debug\TypeProviders.Tests.exe' 时出现问题：Program 类型的 pass3 出错，错误：mref = ".ctor" 的 GetMethodRefAsMethodDefIdx 出错，错误：'Microsoft.FSharp 类型的异常.Compiler.AbstractIL.ILBinaryWriter+MethodDefNotFound' 被抛出。FSC 1 1 TypeProviders.Tests

[示例包](http://fsharp3sample.codeplex.com/SourceControl/changeset/view/19675#354142)中给出的生成类型的示例似乎没有`StaticParameters`定义任何需要返回具有提供的类型名称的类型。在这种情况下，我如何在提供的程序集中发出类型？目前我正在做以下事情

```
 let provideAssembly (reqType:ProvidedTypeDefinition) assemblyPath =
      let name = Path.GetFileName(assemblyPath)
      let providedAssembly = ProvidedAssembly.RegisterGenerated(assemblyPath)

      for t in providedAssembly.GetExportedTypes() do
          let ty = createGeneratedType t
          ty.SetAssembly(providedAssembly)
          reqType.AddMember(ty)

      reqType 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T01:09:42.333

**免责声明：浏览器编译解决方案**

我相信在这里您不需要创建将包装现有类型的生成类型=>这应该可以

```
let provideAssembly (reqType:ProvidedTypeDefinition) assemblyPath =
    let existingAssembly = Assembly.LoadFrom(assemblyPath)

    for ty in providedAssembly.GetExportedTypes() do
        reqType.AddMember(ty)

    reqType 
```

你也可以试试这个：

```
let provideAssembly (reqType:ProvidedTypeDefinition) assemblyPath =
    reqType.AddAssemblyTypesAsNestedTypesDelayed(fun() -> Assembly.LoadFrom assemblyPath)
    reqType 
```

这个将保留命名空间，因此 C 类型的声明看起来像

```
type C = T.SimpleLib.Class1 
```

# android - 为 Galaxy Nexus 定义可绘制对象和布局

> ID：15078432
> 
> 赞同：0
> 
> 时间：2013-02-25T23:20:06.297
> 
> 标签：android, layout, drawable

我正在开发一个必须适用于多个设备屏幕的应用程序，因此，我正确分离了可绘制和布局文件夹：大地、大端口、sw720dp 等。

对于来自 Google 的 Nexus 等设备，我的菜单存在问题，即在操作系统中，而不是物理上，就像在其他设备中一样。所以，在像 SIII 这样的设备上运行良好的布局在 Nexus 上不起作用，它看起来像缩小了，因为我失去了它的高度。

和朋友讨论，我们想通过编程来设置它的布局，但是在一个有各种元素的屏幕中，保留它是不好的。有没有办法使用 android 的结构来组织这个布局和可绘制，就像我为其他分辨率和大小所做的那样？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:50:03.780

对于华硕的nexus 7，它将使用文件夹drawable-xhdpi中的drawables，所以将drawables放在那里......并且对于图标使用48x48尺寸，因此它们看起来与操作栏图标的尺寸相同......

# ruby-on-rails - 默认 I18n ActiveRecord 验证翻译

> ID：15078438
> 
> 赞同：0
> 
> 时间：2013-02-25T23:20:21.313
> 
> 标签：ruby-on-rails, ruby, internationalization

如果本地化文件查找失败，我可以使用默认的 I18n 配置进行查找吗？

作为 Rails 的一部分， http: [//guides.rubyonrails.org/i18n.html#how-i18n-in-ruby-on-rails-works](http://guides.rubyonrails.org/i18n.html#how-i18n-in-ruby-on-rails-works)

> 作为该解决方案的一部分，Rails 框架中的每个静态字符串（例如 Active Record 验证消息、时间和日期格式）都已国际化，因此 Rails 应用程序的本地化意味着“覆盖”这些默认值。

因此，当我添加自己的本地化文件时，我会丢失 ActiveRecord 的默认 rails 错误文本。例如，在模型中给出以下代码

```
validates_length_of :name, :maximum => 50 
```

当这失败时，我得到

```
translation missing: en-gb, activerecord, errors, models, model_name, attributes, name, too_long 
```

两个可能的修复：

1.  添加`:message`到每个`validates_*`方法？例如

    ```
    validates_length_of :name, :maximum => 50, :message => "is too long (maximum is %{count} characters)" 
    ```

    这样做的问题是有很多调用，添加新代码的人必须记住添加文本。（而且我认为变量替换在这里不起作用！）

2.  在每个语言环境配置文件中添加[rails 使用](https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/en-GB.yml)的一组默认值，例如

    ```
    errors:
      messages:
        less_than: must be less than %{count} 
    ```

    这里的问题是必须将相同的文本添加到每个语言环境文件中（因为我对翻译这些文件不感兴趣），这没什么大不了的，但看起来很奇怪。

建议哪些路线（如果有）？还有其他想法或建议吗？

是否没有 I18n 使用的默认/备用文件，即如果在语言环境文件中找不到查找？

（使用导轨 2.3.5）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:32:50.543

我发现这里最好的办法是在你的项目中包含[rails-i18n](https://github.com/svenfuchs/rails-i18n) gem，这样你就可以在所有可用的语言环境中进行翻译。然后在您的应用程序的翻译文件中，只需覆盖您需要的文件。

注意：您需要您的项目使用 gem 定义的相同语言环境，因此在您的示例中，您希望使用`en-GB`而不是`en-gb`.

# android - 祝酒中的 Android WebView

> ID：15078439
> 
> 赞同：0
> 
> 时间：2013-02-25T23:20:36.203
> 
> 标签：android, webview, toast

我正在尝试将 WebView 放入 toast 或将 Webview 显示在屏幕的一小部分上。

这是xml：

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<RelativeLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="@dimen/padding_medium"
        android:text="@string/hello_world"
        tools:context=".Webview" />
    <WebView 
        android:id="@+id/webviewEquationsView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
</RelativeLayout>
</LinearLayout> 
```

这是我想放置webview的java部分，代码来自android website-toast部分：

```
LayoutInflater inflater = getLayoutInflater();     
View layout = inflater.inflate(R.layout.toast_equation_menu,(ViewGroup)     findViewById(R.id.toast_layout_root));
Toast toast = new Toast(getApplicationContext());
toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
toast.setDuration(Toast.LENGTH_LONG);
toast.setView(layout);
toast.show(); 
```

先感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:23:52.690

尝试这个

```
 LayoutInflater inflater = getLayoutInflater();     
    View layout = inflater.inflate(R.layout.toast_equation_menu,(ViewGroup)findViewById(R.id.toast_layout_root)); 
```

从 inflatter 视图中获取 WebView

首先将 url 添加到 WebView

```
 WebView webview = (WebView) layout.findViewById(R.id.webviewEquationsView);   webview.loadUrl("http://www.google.com");

    Toast toast = new Toast(getApplicationContext());
    toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
    toast.setDuration(Toast.LENGTH_LONG);
    toast.setView(layout);
    toast.show(); 
```

# list - Haskell在特定位置重复元素

> ID：15078441
> 
> 赞同：3
> 
> 时间：2013-02-25T23:20:43.957
> 
> 标签：list, haskell, list-comprehension

我想复制列表的第 n 个元素，而我对 haskell 的了解非常有限。我尝试将列表分成两部分，然后获取第一部分的最后一个元素并将其粘贴在这些部分之间：

```
dupl n (x:xs) = (take n (x:xs)) ++ ( (x:xs) !! n) ++ (drop n (x:xs)) 
```

但我总是得到错误：

```
Prelude> :l f.hs
[1 of 1] Compiling Main             ( f.hs, interpreted )

f.hs:5:39:
   Occurs check: cannot construct the infinite type: a0 = [a0]
   In the first argument of `(:)', namely `x'
   In the first argument of `(!!)', namely `(x : xs)'
   In the first argument of `(++)', namely `((x : xs) !! n)'
Failed, modules loaded: none. 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T23:26:48.537

`list !! n`返回一个列表*元素*，而不是一个列表。`++`只能连接*列表*；您不能将列表元素添加到带有`++`.

更正式地说，`!!`有一种类型：

```
(!!) :: [a] -> Int -> a 
```

这意味着它接受`a`s 和 an的列表`Int`，并返回 an `a`。`++`，另一方面，具有以下类型：

```
(++) :: [a] -> [a] -> [a] 
```

这意味着它接受两个`a`s 列表并返回一个新的`a`s 列表。所以你可以看到它`++`接受列表，但`!!`不返回列表，所以你不能像那样将它们链接在一起。

* * *

我们如何解决这个问题？您需要将元素`list !! n`放入一个列表中，以便将其连接到其他两个列表，而不会让类型检查器产生混乱。

这应该可以解决问题：

```
dupl n l = (take n l) ++ [l !! n] ++ (drop n l) 
```

* * *

等效地，将所选元素添加到右侧列表，并将其连接到原始列表的另一半：

```
dupl n l = (take n l) ++ ((l !! n):(drop n l)) 
```

* * *

*警告讲师*：与@Marimuthu 的建议不同，上述两个函数都会引发异常，如果`n`是越界索引。异常来自`!!`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T00:55:21.757

如果您选择了错误的索引，请注意购买者，但是-</p>

```
dupN n xs = let (first, x:rest) = splitAt (n-1) xs in first ++ x:x:rest 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T00:06:22.433

您还可以使用[splitAt](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3asplitAt)：

```
dupl n xs = first ++ take 1 rest ++ rest where (first, rest) = splitAt (n - 1) xs 
```

`n`如果超出范围，这不会中断。

# ios - Objective-C 问题：EXC_BAD_ACCESS 代码=2

> ID：15078448
> 
> 赞同：0
> 
> 时间：2013-02-25T23:21:20.063
> 
> 标签：ios, objective-c, memory-leaks, calculator

我正在尝试编写一个计算器程序，但是在按下与函数 expressionEvaluation 链接的特定键时遇到此错误。我的计算器工作正常，但我正在尝试添加使用/存储变量的能力。为此，我使用了 expressionEvaluation 按钮。但是，一旦我按下链接到该方法的按钮，整个应用程序就会崩溃，并且 xcode 会给我错误 EXC_BAD_ACCESS code=2。我是objective-c的新手，所以我不确定如何调试这个错误。不过，据我所知，问题出在这条线上

```
double result = [CalculatorBrain evaluateExpression:self.brain.expression usingVariableValues:testValues]; 
```

...在我的视图控制器中。我在这条线之前设置了一个断点并且它没有崩溃，但是在这条线设置它导致了我正在经历的崩溃。我试图将代码删减到下面，并且只包含直接链接到 expressionEvaluation 按钮的内容。谢谢您的帮助！

这是我的大脑方法的.h：

```
//  CalculatorBrain.h

#import <Foundation/Foundation.h>

@interface CalculatorBrain : NSObject
- (void) pushOperand:(double)operand;
- (void) setVariableAsOperand:(NSString *)variableName;
- (void) performWaitingOperation;
- (double) performOperation:(NSString *)operation;

@property (readonly) id expression;
+ (double)evaluateExpression: (id)anExpression
         usingVariableValues: (NSDictionary *)variables;
+ (NSSet *)variablesInExpression:(id)anExpression;
+ (NSString *)descriptionOfExpression:(id)anExpression;

+ (id)propertyListForExpression:(id)anExpression;
+ (id)expressionForPropertyList:(id)propertyList;

@end 
```

这是.m：

```
//  CalculatorBrain.m

#import "CalculatorBrain.h"
#define VARIABLE_PREFIX @"^"

@interface CalculatorBrain()
@property (nonatomic) double operand;
@property (nonatomic, strong) NSString *waitingOperation;
@property (nonatomic) double waitingOperand;
@property (nonatomic) double storedOperand;
@property (nonatomic) NSMutableArray *internalExpression;
@end

@implementation CalculatorBrain
@synthesize operand = _operand;                     //operand in use
@synthesize waitingOperation = _waitingOperation;   //waiting to be computed
@synthesize waitingOperand = _waitingOperand;       //waiting to be used
@synthesize storedOperand = _storedOperand;         //stored in memory
@synthesize internalExpression = _internalExpression; //private expression stored
@synthesize expression = _expression;

- (id) expression {;
    return [NSMutableArray arrayWithArray:self.internalExpression];
}

//here I have instance methods that add objects to the array internalExpression
//these work fine as far as I can tell

+ (double) evaluateExpression:(id)anExpression usingVariableValues:(NSDictionary *)variables {
    double result = 0;
    int count = [anExpression count];
    CalculatorBrain *brain;
    for (int i = 0; i < count; i++) {
        if([[anExpression objectAtIndex:i] isKindOfClass:[NSNumber class]]) {
            double operand = [[anExpression objectAtIndex:i] doubleValue];
            [brain pushOperand:operand];
        }
        if([[anExpression objectAtIndex:i] isKindOfClass:[NSString class]]) {
            NSString *string = [anExpression objectAtIndex:i];
            if([string characterAtIndex:0] == '^') {
                NSString* variable = [NSString stringWithFormat:@"%c",[string characterAtIndex:1]];
                double valueOfVariable = [[variables objectForKey:variable] doubleValue];
                [brain pushOperand:valueOfVariable];

            }
            else {
                NSString* operator = [anExpression objectAtIndex:i];
                result = [brain performOperation:operator];
            }
        }
    }
    return result;
}

@end 
```

这是我的视图控制器的 .h ：

```
//  CalcViewController.h

#import <UIKit/UIKit.h>
//view controller for calculator
@interface CalcViewController : UIViewController
@property (weak, nonatomic) IBOutlet UILabel *display;          //real-time display
@property (strong, nonatomic) IBOutlet UILabel *miniDisplay;    //past display
@property (strong, nonatomic) IBOutlet UILabel *memDisplay;     //display stored digits
- (IBAction)digitPressed:(UIButton *)sender;    //pressed number
- (IBAction)operandPressed:(UIButton *)sender;  //pressed operation
- (IBAction)variablePressed:(UIButton *)sender; //pressed variable
- (IBAction)expressionEvaluation:(UIButton *)sender; //evaluate expression with variables
@end 
```

这是.m：

```
//  CalcViewController.m

#import "CalcViewController.h"
#import "CalculatorBrain.h"

@interface CalcViewController ()
@property (nonatomic, strong) CalculatorBrain *brain;
@property (nonatomic) BOOL userIsInTheMiddleOfTypingANumber;
@end

@implementation CalcViewController
- (CalculatorBrain *) brain {
    if (!_brain) _brain = [[CalculatorBrain alloc] init];
    return _brain;
}

- (IBAction)expressionEvaluation:(UIButton *)sender {
    NSDictionary* testValues = [NSDictionary dictionaryWithObjectsAndKeys:@"x", 2, @"y", 3, @"z", 4, nil];
    double result = [CalculatorBrain evaluateExpression:self.brain.expression usingVariableValues:testValues];
    NSString *resultString = [NSString stringWithFormat:@"%g", result];
    self.display.text = resultString;
}

@end 
```

编辑：顺便说一句，我没有收到任何错误，只有一个警告：不完整的实现。这是因为我还没有完成几个类方法，但我认为它不会导致崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:38:25.337

```
NSDictionary* testValues = [NSDictionary dictionaryWithObjectsAndKeys:@"x", 2, @"y", 3, @"z", 4, nil]; 
```

原来是错误的路线。它应该是：

```
NSDictionary* testValues = [NSDictionary dictionaryWithObjectsAndKeys:@"x", [NSNumber numberWithInt:2], @"y", [NSNumber numberWithInt:3], @"z", [NSNumber numberWithInt:4], nil]; 
```

感谢所有帮助过的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:33:05.947

通过在 xCode 中添加异常断点，您将获得有关引发异常的代码行的更多信息。

# c# - 获取按钮数组以显示 XML 文件中的数据？

> ID：15078449
> 
> 赞同：0
> 
> 时间：2013-02-25T23:21:22.670
> 
> 标签：c#, winforms

所以，我的 XML 文件如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<quiz>

</answers>
</question>

<!-- More questions here  -->

</quiz> 
```

我的 Form1.cs 看起来像这样：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using System.Xml.Linq;
using System.Drawing;

namespace WindowsFormsApplication1
{
    public partial class FormMain : Form
    { 
```

基本上，所有四个按钮上都有问题而不是答案，并且在左下角的按钮下方，似乎有一个空白按钮。如何让问题显示 label1 在哪里以及答案在四个单独的按钮上？另外，当我开始添加多个问题时，我将如何做（用户显然无法继续下一个问题，除非他们得到前一个问题并且可以在开始时选择难度以显示一组不同的问题）。

我在这方面已经有一段时间了，我认为它需要一个全新的视角，因为我相对新手的 C# 大脑无法弄清楚。有人帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:26:42.673

看看这个问题的答案。更容易处理的是将 XML 反序列化为您创建的具有匹配结构的类。

[如何反序列化 XML 文档](https://stackoverflow.com/questions/364253/how-to-deserialize-xml-document)

更多信息在这里：http: [//msdn.microsoft.com/en-us/library/58a18dwa.aspx](http://msdn.microsoft.com/en-us/library/58a18dwa.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:26:53.173

您每次在循环周围设置每个按钮的文本：

```
foreach (var question in _questions)
{
    button1.Text = question.QuestionText;
    button2.Text = question.QuestionText;
    button3.Text = question.QuestionText;
    button4.Text = question.QuestionText;
} 
```

最后一次循环时，每个按钮都会将文本设置为最后一个问题的文本。

它看起来也有点奇怪，因为您有四个按钮定义为表单的字段，但是您在`PopulateForm`方法中创建了其他按钮，但对它们什么也没做。

您最好摆脱这些字段并直接使用新创建的按钮：

```
private void PopulateForm()
{
    int count = 0;

    foreach (var question in _questions)
    {
        var button = new Button();
        button.Size = new Size(60, 23);
        button.Location = new Point(100, 40 + (count * 30));
        button.Text = question.QuestionText;
        Controls.Add(button);
        count++;
    }
} 
```

您必须将每个按钮的位置设置为不同的位置，否则它们将全部显示在同一个位置。

* * *

**编辑：**

通过查看 zip 文件中的代码，您想要的是（假设您的问题有四个答案）：

```
private void PopulateForm()
{
    foreach (var question in _questions)
    {
        label1.Text = question.QuestionText;

        button1.Text = question.Answers[0];
        button2.Text = question.Answers[1];
        button3.Text = question.Answers[2];
        button4.Text = question.Answers[3];
    }
} 
```

# php - Javascript confirm() 函数无法正确传递参数

> ID：15078453
> 
> 赞同：2
> 
> 时间：2013-02-25T23:21:28.573
> 
> 标签：php, javascript, window

我正在使用 PHP 和 JavaScript，在处理`confirm()`JavaScript 中的函数时遇到了问题。

假设我有一个页面 add.php，首先我接收到从另一个页面传递的一些参数，然后检查它们是否有效。如果是，我只是将数据插入db并返回另一个页面，如果它们无效，则会`confirm()`弹出一个窗口让用户选择是否继续。如果用户仍然选择继续，我希望重新加载页面并再次发送所有参数。但问题是第二次加载 add.php 时我无法获取参数。

以前我没有使用`window.onload`函数并`confirm()`弹出，而是一个`< a href>`链接，一切正常（请参阅最后的附加代码）。但是当我尝试使用以下代码时，相同的 url 停止工作

```
echo "<script type=\"text/javascript\">";
echo "window.onload = function() {
    var v = confirm(\"$name is not alive, do you want to add it into system?\");
    if (v) {
        window.location.href= \"add.php?type=room&amp;name=$name&amp;area\"
            + \"=$area&amp;description=$description&amp;\"
            + \"capacity=$capacity&amp;confirm=Y\";
    } else {
        window.location.href= \"admin.php?area=$area\";
    }
}";
echo "</script>"; 
```

以下是以前的版本，`window.onload()`我没有使用，而是使用`< a href="..." />`链接，当时一切正常。get_form_var是functions.inc中的一个函数，就是用`$_GET`数组来获取参数。

```
<?php
    require_once "functions.inc";
    // Get non-standard form variables
    $name = get_form_var('name', 'string');
    $description = get_form_var('description', 'string');
    $capacity = get_form_var('capacity', 'string');
    $type = get_form_var('type', 'string');
    $confirm = get_form_var('confirm','string');

    $error = '';

    // First of all check that we've got an area or room name
    if (!isset($name) || ($name === ''))
    {
        $error = "empty_name";
        $returl = "admin.php?area=$area" 
                . (!empty($error) ? "&error=$error" : "");
        header("Location: $returl");
    } 

    // we need to do different things depending on if its a room
    // or an area
    elseif ($type == "area")
    {
        $area = mrbsAddArea($name, $error);
        $returl = "admin.php?area=$area" 
                . (!empty($error) ? "&error=$error" : "");
        header("Location: $returl");
    }

    elseif ($type == "room")
    {
        if (isset($confirm)){
            $dca_osi = getOsiVersion($name);
            $room = mrbsAddRoom(
                $name, 
                $area, 
                $error, 
                $description, 
                $capacity,
                $dca_osi,
                1
            );
            $returl = "admin.php?area=$area" 
                    . (!empty($error) ? "&error=$error" : "");
            header("Location:$returl");
        }
        else {
            $dca_status= pingAddress($name);
            $dca_osi = getOsiVersion($name);
            if( $dca_status == 0){ 
                $room = mrbsAddRoom(
                    $name, 
                    $area, 
                    $error, 
                    $description, 
                    $capacity,
                    $dca_osi,
                    0
                );
                $returl = "admin.php?area=$area" 
                        . (!empty($error) ? "&error=$error" : "");
                header("Location:$returl");
            }
            else {
                print_header(
                    $day, 
                    $month, 
                    $year, 
                    $area, 
                    isset($room) ? $room : ""
                );
                echo "<div id=\"del_room_confirm\">\n";
                echo "<p>\n";
                echo "$name is not alive, are you sure to add it into system?";
                echo "\n</p>\n";
                echo "<div id=\"del_room_confirm_links\">\n";
                echo "<a href=\"add.php?type=room&amp;name"
                     . "=$name&amp;area=$area&amp;description"
                     . "=$description&amp;capacity=$capacity&amp;confirm"
                     . "=Y\"><span id=\"del_yes\">" 
                     . get_vocab("YES") . "!</span></a>\n";
                echo "<a href=\"admin.php?area=$area\"><span id=\"del_no\">" 
                     . get_vocab("NO") . "!</span></a>\n";
                echo "</div>\n";
                echo "</div>\n";
            }
        }
    }

    function pingAddress($host)
    {
        $pingresult = exec("/bin/ping -c 1 $host", $outcome, $status);
        if ($status==0) {
            return $status;
        }
        else {
            return 1;
        }
    } 

    function getOsiVersion($host)
    {
        $community = 'public';
        $oid = '.1.3.6.1.4.1.1139.23.1.1.2.4';
        $sysdesc = exec("snmpwalk -v 2c -c $community $host $oid");
        $start = strpos($sysdesc, '"');
        if ($start!==false) {
            $sysdesc = substr($sysdesc, $start+1,$sysdesc.length-1);
            return $sysdesc;
        }
        else {
            return "not available";
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T01:53:37.050

我已经解决了这个问题，只需使用“&”而不是“&” 在 url 链接中...现在可以正常工作了...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:25:23.160

你试试 location.reload() javascript 调用？

# ruby-on-rails - Rails 错误 - 无法加载此类文件 -- aws-sdk（您可能需要安装 aws-sdk gem）

> ID：15078455
> 
> 赞同：5
> 
> 时间：2013-02-25T23:21:36.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, paperclip

我有一个通过回形针和亚马逊 s3 上传图像的 RoR 应用程序。一切正常，直到我决定将路由从 myapp.com/id 更改为 myapp.com/model-name。现在我收到以下错误：`LoadError cannot load such file -- aws-sdk (You may need to install the aws-sdk gem)`. 这些更改涉及更改模型、控制器和数据库。

模型：

```
class Major < ActiveRecord::Base
  attr_accessible :glance, :name, :image

  # Validations
  validates :glance, presence: true
  validates :name, presence: true
  validates_attachment :image, content_type: {content_type: ['image/jpeg', 'image/jpg', 'image/png', 'image/gif']}, size: { less_than: 5.megabytes }
  validates :slug, uniqueness: true, presence: true

  before_validation :generate_slug

  # Associations
  has_attached_file :image, styles: { 
   profile: "350x350>", 
   similar: '166x134>', 
   thumb: "100x100>" 
  },
    :storage => :s3,
    :bucket => 'major finder'
    :s3_credentials => {
      :access_key_id => 'my_key_id',
      :secret_access_key => 'my_secret_access_key'
    },
    :path => "/majors/:attachment/:style/:filename"    

  # make the url path memorable (instead of using the id)
  def to_param
    slug
  end

  def generate_slug
    self.slug ||= name.parameterize
  end 
end 
```

控制器：

```
class MajorsController < ApplicationController
  before_filter :authenticate_user!, only: [:new, :edit]
  before_filter :find_page, only: [:show, :edit, :update, :destroy]

  def index
    @majors_recent = Major.order("created_at DESC")
    @majors = Major.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @majors }
    end
  end

  def show
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @major }
    end
  end

  def new
    @major = Major.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @major }
    end
  end

  def edit
  end

  def create
    @major = Major.new(params[:major])

    respond_to do |format|
      if @major.save
        format.html { redirect_to @major, notice: 'Major was successfully created.' }
        format.json { render json: @major, status: :created, location: @major }
      else
        format.html { render action: "new" }
        format.json { render json: @major.errors, status: :unprocessable_entity }
      end
    end
  end

  def update
    respond_to do |format|
      if @major.update_attributes(params[:major])
        format.html { redirect_to @major, notice: 'Major was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @major.errors, status: :unprocessable_entity }
      end
    end
  end

  def destroy
    @major.destroy

    respond_to do |format|
      format.html { redirect_to majors_url }
      format.json { head :no_content }
    end
  end

private 
  def find_page
    @major = Major.find_by_slug!(params[:id])
  end
end 
```

我的数据库架构如下所示：

```
 create_table "majors", :force => true do |t|
    t.text     "glance",             :limit => 255
    t.datetime "created_at",                        :null => false
    t.datetime "updated_at",                        :null => false
    t.string   "name"
    t.string   "image_file_name"
    t.string   "image_content_type"
    t.integer  "image_file_size"
    t.datetime "image_updated_at"
  end 
```

这是我的 Gemfile：

```
gem 'rails', '3.2.11'
gem 'jquery-rails'
gem 'devise'
gem 'simple_form'
gem 'aws-sdk'
gem "paperclip", "~> 3.0"
gem 'sunspot_rails'
gem 'activeadmin'

group :production do
  gem 'pg'
end

group :development, :test do
  gem 'sqlite3'
  gem 'sunspot_solr'
end

group :assets do
  gem 'sass-rails', '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'bootstrap-sass', '~> 2.2.2.0'
end 
```

我跑了`$ rails g migration add_slug_to_majors slug:index`，然后`$ rake db:migrate` 现在即使我已经删除了所有更改，我仍然收到此错误。我已经看遍了，找不到解决方案。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-12-18T19:27:58.210

这实际上是您在*Gemfile*中管理版本时可能遇到的*问题*。

 *就我而言，它是导致**问题**的较新版本的*回形针*。降级到旧版本为我修复了它。

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T23:33:20.077

解决方案写错了，您还需要`aws-sdk`gem 处于开发模式（因为您在模型中使用它）。只需移动`gem 'aws-sdk'`到组外即可。

*顺便说一句*：在开发和生产模式下使用相同的数据库引擎，我在配置方面遇到了一些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-05T22:20:22.350

我今天（2021 年 10 月 5 日）遇到了这个问题，将一个名为 FilterTRAK 的应用程序从 Rails v4.2.1 重写为 Rails v6.1.4.1。

我在这个问题的主题中得到了确切的错误。

由于对已被 YANKED 的 Mimemagic 0.3.0 的依赖问题，我无法降级回形针。
Mimemagic 0.3.7 是所有可用的，要做到这一点，您必须升级到回形针 5.0；问题是回形针 5.0 给出了同样的错误。

解决方案：
gem 回形针-aws 我专门安装了这个 gem，如下所示：

```
gem 'paperclip-aws', '~> 1.6', '>= 1.6.8' 
```

我的应用程序正确加载。***

# c# - 让自定义表单在 Sharepoint 2010 中工作

> ID：15078458
> 
> 赞同：1
> 
> 时间：2013-02-25T23:21:52.570
> 
> 标签：c#, sharepoint, sharepoint-2010, schema

我为页面构建了一个自定义的新表单，并在架构文件中执行了以下操作：

```
<Form Type="NewForm" Url="NewForm.aspx" WebPartZoneID="Main" /> 
```

所以它会寻找我的自定义表单，它适用于我创建的新客户，但系统中已经存在的客户仍然指向标准的新表单

```
<Form Type="NewForm" Url="NewForm.aspx" SetupPath="pages\form.aspx" WebPartZoneID="Main" /> 
```

因此，我尝试创建一个升级规则，让较旧的规则通过以下方式查看自定义表单：

```
var list = web.TryGetList("Client Programs");
list.DefaultNewFormUrl = "NewForm.aspx";
list.Update(); 
```

但我有一种感觉，这不会做任何事情，有没有办法通过站点设置页面将旧数据指向新的自定义表单，或者我需要在升级规则中添加/更改什么才能使其正常工作？

**更新**

我还应该提到，在表单的属性中，我已将其更改为在配置单元中查找表单并将其设为元素文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:44:55.233

现有项目由 EditForm.aspx 编辑，而不是来自 newform.aspx

您必须复制 newform.aspx 并将其命名为 editform.aspx（可以创建一个 displayform.aspx）。

```
<Forms>
  <Form Type="DisplayForm" Url="DispForm.aspx" SetupPath="features\$SharePoint.Feature.DeploymentPath$\YourProject\CustomDisplay.aspx" UseLegacyForm="True" WebPartZoneID="Main" />
  <Form Type="EditForm" Url="EditForm.aspx" SetupPath="features\$SharePoint.Feature.DeploymentPath$\YourProject\CustomEdit.aspx" UseLegacyForm="True" WebPartZoneID="Main"  />
  <Form Type="NewForm" Url="NewForm.aspx" SetupPath="features\$SharePoint.Feature.DeploymentPath$\YourProject\CustomNew.aspx" UseLegacyForm="True" WebPartZoneID="Main" />
</Forms> 
```

对于每个表单，每个 SharePoint 表单字段都必须使用正确的控制模式进行标记

新表格：

```
<SharePoint:FormField runat="server" ID="field_YourFieldName" ControlMode="New" FieldName="YourFieldName" /> 
```

编辑表格：

```
<SharePoint:FormField runat="server" ID="field_YourFieldName" ControlMode="Edit"                                                    FieldName="YourFieldName" /> 
```

显示形式：

```
<SharePoint:FormField runat="server" ID="field_YourFieldName" ControlMode="Display"                                                        FieldName="YourFieldName" /> 
```

# c++ - 碰撞检测方法

> ID：15078462
> 
> 赞同：1
> 
> 时间：2013-02-25T23:22:37.087
> 
> 标签：c++, collision

我已经用 C++ 编程大约 6 个月了，仍然是初学者，但我一直在为游戏创建一个碰撞检测系统。我设计了一种获取多边形的方法，并测试一个点以查看它是否在该多边形内。一旦我对图形有了更好的处理，我将运行一个动画循环，用所有射弹测试所有敌人，然后根据它们的运动功能移动它们。

我处理碰撞检测的方法是使用[此链接](http://alienryderflex.com/polygon/)中说明的系统。我创建的代码可以在[这里](http://ideone.com/n9cXjZ)和下面看到。我的问题是，对于每一帧的每一个边界框（每一个敌人）来说，所有这些过程是否太多了？我知道处理速度和效率在游戏设计中极为重要，那么这种方法是否过于冗长，还是我低估了处理器的实际运行速度？任何关于如何处理这些事情的建议都值得赞赏。

```
#include <iostream>
#include <vector>

class point
{
    public:
        point (int a, int b): x(a), y(b) {};
        ~point () {};

        int getX() {return x;}
        int getY() {return y;}

    private:
        int x;
        int y;
};

class side
{
    public:
        side(point f, point s): first(f), second(s) {};
        ~side() {};
        point getFirst() {return first;}
        point getSecond() {return second;}

    private:
        point first;
        point second;
};

class boundingBox
{
    public:
        boundingBox(std::vector <point> p);
        ~boundingBox() {};

        std::vector <side> getSides() {return boundingSides;}

    private:
        std::vector <point> boundingPoints;
        std::vector <side> boundingSides;
};

boundingBox::boundingBox(std::vector <point> p)
{
    boundingPoints = p;

    // in the constructor, create a vector of sides from the points
    for (std::vector <point>::iterator i = boundingPoints.begin(); i != boundingPoints.end()-1; i++)
    {
        boundingSides.push_back( side(*i, *(i+1)) );
    }

    boundingSides.push_back( side (*(boundingPoints.end()-1), *(boundingPoints.begin()) ) );
}

bool collisionCheck(std::vector <side> s, point p)
{
    std::vector <side> nodeSides;

    int toleft = 0;
    int toright = 0;

    for (std::vector <side>::iterator i = s.begin(); i != s.end(); i++)
    {
        //if the Y value of the point being tested is between the Y values of a side, add a node
        if (p.getY() > (*i).getFirst().getY() && p.getY() < (*i).getSecond().getY() ||
            p.getY() < (*i).getFirst().getY() && p.getY() > (*i).getSecond().getY() )
        {
            nodeSides.push_back( side ( (*i).getFirst(), (*i).getSecond() ) );
        }

        // if the Y value of the point being tested is also the Y of the second point of the side...
        if (p.getY() == (*i).getSecond().getY())
        {
            //if it isn't the last side, and this side and the next strattle that y value, add a node
            if (i != s.end()-1)
            {
                if ((*i).getFirst().getY() < p.getY() && (*(i+1)).getSecond().getY() > p.getY() ||
                    (*i).getFirst().getY() > p.getY() && (*(i+1)).getSecond().getY() < p.getY() )
                {
                    nodeSides.push_back( side ( (*i).getFirst(), (*i).getSecond() ) );
                }   
            }   

            //if it is the last side, and this side and the first side strattle that y value, add a node
            else if ((*i).getFirst().getY() < p.getY() && s.front().getSecond().getY() > p.getY() ||
                 (*i).getFirst().getY() > p.getY() && s.front().getSecond().getY() < p.getY() )
            {
                nodeSides.push_back( side ( (*i).getFirst(), (*i).getSecond() ) );
            }
        }
    }

    for (std::vector <side>::iterator i = nodeSides.begin(); i != nodeSides.end(); i++)
    {
        double deltaY = (*i).getSecond().getY() - (*i).getFirst().getY();
        double deltaX = (*i).getSecond().getX() - (*i).getFirst().getX();

        double slope = deltaX - deltaY;

        double x = ( p.getY() - (*i).getSecond().getY() + (slope * (*i).getSecond().getX()) ) / slope;

        if (x < p.getX()) 
        {
            toleft++;
        }

        else
        {
            toright++;
        }
    }

    std::cout << "Analysis: " << toleft << " nodes to the left, " << toright << " nodes to the right." << std::endl;

    if (toleft % 2 == 0)
    {
        std::cout << "return false, does not hit" << std::endl;
        return false;
    }

    else
    {
        std::cout << "return true, hits" << std::endl;
        return true;
    }
}

int main ()
{
    std::vector <point> points;

    points.push_back(point(3, 5));
    points.push_back(point(1, 13));
    points.push_back(point(7, 16));
    points.push_back(point(14, 14));
    points.push_back(point(8, 13));
    points.push_back(point(9, 11));
    points.push_back(point(17, 13));
    points.push_back(point(16, 18));
    points.push_back(point(21, 15));
    points.push_back(point(17, 9));
    points.push_back(point(9, 7));
    points.push_back(point(12, 5));
    points.push_back(point(14, 7));
    points.push_back(point(15, 2));
    points.push_back(point(6, 3));

    boundingBox enemy(points);

    point hitSimp(13, 4);
    point hitComp(19, 15);
    point missNear(10, 12);
    point missFar(100,100);

    collisionCheck(enemy.getSides(), hitSimp);

    collisionCheck(enemy.getSides(), hitComp);

    collisionCheck(enemy.getSides(), missNear);

    collisionCheck(enemy.getSides(), missFar);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:46:09.447

如果您的程序将通过检查太多的冲突来绑定，请查看[四叉树](http://en.wikipedia.org/wiki/Quad_tree)

在进行多边形碰撞测试之前，您还可以先检查简单的边界体，例如轴对齐和定向边界框。

# ios - 无法从 facebook iOS SDK 3.1 中提取电子邮件

> ID：15078471
> 
> 赞同：0
> 
> 时间：2013-02-25T23:23:37.967
> 
> 标签：ios, facebook-ios-sdk

我正在尝试从 Facebook iOS sdk (3.1) 获取用户电子邮件地址，但似乎找不到这样做的方法。我已将电子邮件添加为权限，`requestToMe`但`FBGraphUser`对象返回

```
[[FBRequest requestForMe] startWithCompletionHandler:
         ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
}]; 
```

根本没有电子邮件属性。是否有另一个 API 调用来获取用户电子邮件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:46:42.610

尝试在 Facebook 中删除您的应用程序，看看您是否可以在重新授权时获取电子邮件地址。如果您授权应用程序然后添加代码以获取电子邮件，您将无法从之前授权它的 Facebook 帐户获取电子邮件。

我过去曾遇到过这个问题。

# c# - 禁用 ASP.net 树视图复选框

> ID：15078476
> 
> 赞同：3
> 
> 时间：2013-02-25T23:23:56.077
> 
> 标签：c#, javascript, asp.net, checkbox, treeview

你们将如何有条件地禁用 asp 树视图中的复选框？

例如，如果应用程序用户没有特定权限，请在权限树视图中禁用该权限条目复选框。

这就是我要找的东西，这是 winform 应用程序中的等价物（复选框在文本变灰的情况下被禁用）：

![在此处输入图像描述](../Images/da50d79a5eb1c82277084ce0ce92be1d.png)

我看到了其他解决方案，其中复选框上的单击事件被拦截并忽略。我更喜欢复选框被简单地设置为禁用的解决方案。

我正在寻找 C# 解决方案，但会对 C#/Javascript 解决方案感到满意。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T00:51:57.340

好的，找到了一个相当干净的解决方案：

在代码隐藏中：

```
TreeNode newNode = new TreeNode(permission.ToString());
newNode.SelectAction = TreeNodeSelectAction.None; // no Link

    if (shouldDisableCheckbox)
    {
        // Set a class so disabled nodes can be formatted thru CSS
        // and be identifiable as disabled in Javascript.
        newNode.Text = "<span class=disabledTreeviewNode>" + newNode.Text +"</span>";
    }

nodes.Add (newNode); 
```

在 Javascript 中，扫描所有具有该 className 的树视图节点并禁用与它们关联的复选框：

```
 // Called via a startup script created in Code Behind.
    // Disables all treeview checkboxes that have a text with a class=disabledTreeviewNode.
    // treeviewID is the ClientID of the treeView
    function DisableCheckBoxes(treeviewID)
    {
        TREEVIEW_ID = treeviewID;

        var treeView = document.getElementById(TREEVIEW_ID);

        if (treeView)
        {
            var childCheckBoxes = treeView.getElementsByTagName("input");
            for (var i = 0; i < childCheckBoxes.length; i++)
            {
                var textSpan = GetCheckBoxTextSpan(childCheckBoxes[i]);

                if (textSpan.firstChild)
                    if (textSpan.firstChild.className == "disabledTreeviewNode")
                        childCheckBoxes[i].disabled = true;
            }
        }
    }

function GetCheckBoxTextSpan(checkBox)
{
    // Set label text to node name
    var parentDiv = checkBox.parentNode;
    var nodeSpan = parentDiv.getElementsByTagName("span");

    return nodeSpan[0];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-05T09:59:27.427

可悲的是，我没有足够的声誉来直接评论 zukanta 的答案，这有点痛苦，但我必须在 javascript 中进行修改才能使这项工作：

```
if (textSpan.firstChild)
                if (textSpan.className == "disabledTreeviewNode")
                    childCheckBoxes[i].disabled = true; 
```

即用*textSpan.ClassName*替换*textSpan.firstChild.ClassName*

还值得指出的是，除非您正在处理的树视图中的所有树节点都具有

```
<span></span> 
```

在他们中。你得到一个空引用

```
if (textSpan.firstChild) 
```

并且不处理后续节点。

我通过向所有我不想禁用的树节点添加一个带有 class=enabledTreeviewNode 的跨度来解决这一点。

我猜你也可以在 JavaScript 中处理异常。

希望这对以后偶然发现这个（否则很好）解决方案的人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T23:38:17.017

您可以使用安全修整来不显示用户无权访问的项目。我不知道有什么方法可以显示项目但不活动。在客户端禁用复选框只会造成安全漏洞。

[演练：根据安全角色过滤站点地图节点](http://msdn.microsoft.com/en-us/library/ms178429%28v=vs.100%29.aspx)

[ASP.NET 站点地图安全修整](http://msdn.microsoft.com/en-us/library/ms178428%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-14T13:23:08.400

OP 正在寻找有条件的禁用，但我只想使用 TreeView 来显示历史审计数据，以及何时打开项目的日志。我页面上的所有复选框都应该被禁用。我花了一些时间才找到这个优雅的 jQuery 解决方案。我希望它可以帮助任何有类似问题的人。

将下面的代码添加到您的脚本部分。由于所有输入框都将被禁用，因此根本无需对代码隐藏进行任何更改。

```
<script type="text/javascript">
    $(document).ready(function () {
        $("input:checkbox").each(function () {
            $(this).prop('disabled', true);
        });
    });
</script> 
```

# css - 如何通过css进行自定义滚动？

> ID：15078482
> 
> 赞同：0
> 
> 时间：2013-02-25T23:24:37.603
> 
> 标签：css, scrollbar, custom-scrolling

我面临一个问题。我正在与一个网站合作。在那里，我必须放置一个自定义滚动条。我不知道我该怎么说。你能帮我如何使用自定义滚动条而不是css的默认滚动条（这是我需要的滚动条：http: [//i.imgur.com/NepkiOg.jpg](http://i.imgur.com/NepkiOg.jpg)）？目前，我只使用了默认滚动条：[http ://abidhasan.zxq.net/Fysiovisiq](http://abidhasan.zxq.net/Fysiovisiq)

 ````
.twitter_middle {
    width: 100%;
    height: 166px;
    overflow-y: scroll;
} 
````  `另外，您能否告诉我如何使自定义滚动条跨浏览器兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:27:23.827

您可以使用 jquery 和 jqueryUI 去查看他们的网站，您会在那里找到所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:32:37.053

试试 jQuery 自定义内容滚动条。它是跨浏览器兼容的，并且写得很好且易于使用。[这是一个指南。](http://manos.malihu.gr/jquery-custom-content-scroller/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T23:46:15.143

Tiny Scrollbar 可用于滚动内容。它是使用 javascript jQuery 库构建的。也非常易于使用和样式与 css

示例：[http ://baijs.nl/tinyscrollbar/](http://baijs.nl/tinyscrollbar/)`

# jquery - 使用 AngularJS 和 JQuery 的用例

> ID：15078487
> 
> 赞同：32
> 
> 时间：2013-02-25T23:25:01.533
> 
> 标签：jquery, angularjs

我是一名 JQuery 程序员，希望在我的下一个项目中使用 AngularJS。在阅读了这个关于如何“在 Angular 中思考”而不是包含和使用 JQuery 的[优秀答案之后，我想知道使用 JQuery + Angular 有哪些好的用例。](https://stackoverflow.com/questions/14994391/how-do-i-think-in-angularjs-if-i-have-a-jquery-background/15012542#15012542)我想为我的 Angular 编程带来一些熟悉感。

引用 Stackoverflow 帖子：

“底线是：解决问题时，首先“在 AngularJS 中思考”；如果您想不出解决方案，请咨询社区；如果毕竟没有简单的解决方案，请*随意*使用 jQuery "

我应该什么时候使用 JQuery？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-02T20:50:43.727

AngularJS 是一个复杂的框架，具有中等到陡峭的学习曲线。JQuery 不是一个框架，而是一个库。如果您正在寻找构建单页应用程序，尤其是 CRUD 应用程序，那么 AngularJS 非常适合，因为它将提供两种方式的数据绑定、路由（对于单页应用程序很重要）以及许多其他开箱即用的功能。

它使用 jQlite jQuery 的一个子集，但它对应用程序的构建方式持固执己见，这意味着您需要深入了解它的工作原理，您需要了解控制器、服务和指令以及为什么只应该在指令中更新 DOM .

单页应用程序可以单独使用 jQuery 完成，但您必须自己管理框架方面的事情。

如果您在 AngularJS 之前包含 jQuery，它将取代 jQlite，以掌握基础知识，从而用知识武装自己来做出使用决策，请[在 egghead.io 上查看这些出色的视频](http://egghead.io)。

**何时使用 jQuery**

当您无法以 Angular 方式做某事时，您会使用 jQuery，这通常是在您处于框架的边界时。

**例子：**

这方面的一个例子是 Angular 没有办法禁用选择元素中的项目。您可以在这里使用 jQuery 来监听 select 上的更改事件，并自己从指令中操作 UI。**请参阅下面的更新**。

例如，如果您使用第三方库，您可能需要使用 jQuery 触发事件并在第三方代码或其他地方获取它。在这里，您会发现 jQuery 或类似 pubsub 的东西非常宝贵。

**更新**

关于路由能力，我强烈推荐优秀的[UI-Router](https://github.com/angular-ui/ui-router)而不是开箱即用的路由器。

**更新 v2**

Angular 1.4 现在支持在选择元素中禁用选项。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-26T00:23:54.180

我认为您问题引文中的关键词是“*如果毕竟没有*简单*的解决方案*”

> 我想知道使用 JQuery + Angular 有哪些好的用例。

用例：我正在做的一个项目使用 Zurb Foundation 的“显示”组件作为模态窗口，我特别喜欢这个。它与我正在开发的应用程序相得益彰。当然有一个 Angular UI 项目具有模态窗口，但我更喜欢在这种情况下显示。

这依赖于 JQuery。[用户 blesh 回答了关于如何在此处](https://stackoverflow.com/questions/14966981/what-is-the-angularjs-way-of-handling-a-modal-like-this)以 AngularJS 方式合并的好主意。

经过一番研究，如果你得出结论，你可以在 JQuery 中做一些更容易的事情，那就去做，但一定要以 AngularJS 的方式集成组件。

无论如何，这就是我的看法。

# javascript - 离线 Web 应用程序句柄保存在 javascript 中

> ID：15078489
> 
> 赞同：0
> 
> 时间：2013-02-25T23:25:09.010
> 
> 标签：javascript, html, cross-browser, save, offlineapps

我正在构建一个离线 Web 应用程序，我希望能够在用户保存之前更改页面的 html。因为我似乎找不到从 javascript（IE 除外）触发另存为功能的方法，所以我需要在让浏览器保存页面之前做一些准备工作。我不是试图强迫用户做任何事情，只是试图更新页面，以便将其状态保存到正在保存的页面的实际 html 中。我可以用一个按钮来做到这一点，但我必须要求用户按下 Ctrl+S，这根本不流畅。

所以我要么需要能够从 JavaScript 触发浏览器保存，要么在允许默认回调发生之前自己处理保存事件。

这可以以跨浏览器支持的方式完成吗？我已经找到了几个处理这个问题的页面，但是没有一个像我希望的那样清除它，如果这听起来像重复，那么抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:15:09.300

您可以使用数据 URI 来做到这一点。[这个问题](https://stackoverflow.com/questions/4639372/export-to-csv-in-jquery)类似，一个 javascript 生成的 CSV 文件，会提示用户下载。

可能还有其他解决方案，但我认为它们将是专有的，因此不是面向未来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T04:46:30.480

现在，这已成为可能与 blob。[FileSaver.js](https://github.com/eligrey/FileSaver.js/)是一个跨平台的解决方案。这将允许保存任何二进制资源。

# highcharts - 具有 Y 轴分组的 Highcharts 堆叠列

> ID：15078492
> 
> 赞同：2
> 
> 时间：2013-02-25T23:25:16.360
> 
> 标签：highcharts

有什么方法可以将 Y 轴类别与 Highcharts 中的堆积柱形图组合在一起。这在 Excel 中是非常微不足道的东西，但在 Highcharts 中似乎很难。

类似于下图的东西。

![在此处输入图像描述](../Images/53a050e7dfbd49cf1f64e52ccc452206.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:57:15.653

您可以使用其他插件

[https://github.com/blacklabel/grouped_categories](https://github.com/blacklabel/grouped_categories)

# c# - asp.net 如何用这种方法删除当前记录？

> ID：15078498
> 
> 赞同：0
> 
> 时间：2013-02-25T23:25:36.583
> 
> 标签：c#, asp.net, database, vb.net

**Default.aspx ：（**我在页面上动态生成了表格行，其中数据来自具有 2 个字段的数据库表，如您所见：`ID`和）（顺便说一句，为了示例清晰起见，`studentname`我从下面的代码中删除了）`<table>,<tr>,<td>`

```
<asp:AccessDataSource ID="AccessDataSource1" runat="server"
                      DataFile="C:\db1.mdb"
                      SelectCommand="SELECT * FROM [table1]">
</asp:AccessDataSource>
<asp:DataList ID="DataList1" runat="server" DataSourceID="AccessDataSource1"
              DataKeyField="ID" RepeatColumns="3" RepeatDirection="Horizontal">
    <ItemTemplate>
        <asp:Label ID="Label1" runat="server" Text='<%# "ID: " & Eval("ID") %>'></asp:Label>
        <asp:Label ID="Label2" runat="server" Text='<%# Eval("studentname") %>'></asp:Label>
        <asp:Button ID="Button1" runat="server" Text="Delete Row Button"  OnClick="Button1_Click" />
    </ItemTemplate>
</asp:DataList> 
```

因此，如果我的数据库表有 2 条记录，则在这样的页面上生成一个有 2 行的表，并且我为每一行创建了一个删除按钮：
----------------
| 1 | 名称1 | 删除行按钮
----------------
| 2 | 名称2 | 删除行按钮
----------------

**Default.aspx.vb：（**命令按钮的代码隐藏）

```
Dim x As New Connection

Protected Sub Button1_Click(ByVal a As Object,
                            ByVal b As System.EventArgs)
    x.deleterowclass("1")

End Sub 
```

**connection.vb：（**我创建的一个类，我在其中删除记录）

```
Imports System.Data.OleDb
Imports System.Data
Imports Microsoft.VisualBasic
Dim str As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\db1.mdb"
Dim con As New OleDbConnection(str)

Public Sub deleterowclass(ByVal ID As Integer)
    con.Open()
    Dim adp As New OleDbCommand("Delete * from table1 where ID=" & ID, con)
    adp.ExecuteNonQuery()
    con.Close()
End Sub 
```

# 问题：

- 上面的按钮代码从访问数据库中删除一条记录，只有我指定的 ID 为“1”：`x.deleterowclass("1")`
- 因为数据库中的每条记录都会在页面上的每一行旁边创建一个新按钮`Button1`，我是不确定解决问题是问题还是优势，因为它确实有效。

# 我的问题：

如何通过单击旁边存在的按钮（我的意思是页面上的行旁边）删除任何记录？我的想法是也要处理 ID 并将其传递到某个地方，但不幸的是我不确定如何完成它，我尝试了很多这样的参数，`OnClick="Button2_Click(<%# Eval("ID") %>)`但我失败了，并显示错误消息：服务器标签格式不正确。

## 编辑：解决方案：

非常感谢 atbebtg，下面是 VB 中的对应代码，以防有人发现它有用。

**Default.aspx 中的按钮代码（与您的答案相同，但我也想把它放在这里）：**

```
<asp:Button ID="Button1" runat="server" Text="Delete Row Button" OnClick="Button1_Click" CommandArgument='<%# Eval("MyID") %>'/> 
```

**VB中的OnClick代码：**

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs)
    Dim mybutton As Button = DirectCast(sender, Button)
    x.deleterowclass(Convert.ToInt32(mybutton.CommandArgument))
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:33:27.037

将您的按钮代码更改为以下内容：

```
 <asp:Button ID="Button1" runat="server" Text="Delete Row Button" OnClick="Button1_Click" CommandArgument='<%# Eval("MyID") %>'/> 
```

现在在您的 onclick 上甚至添加以下代码

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        Button mybutton = (Button)sender;
        deleterowclass(Convert.ToInt32(mybutton.CommandArgument);
    } 
```

抱歉，上面是 c# 代码，我真的不知道 vb 的语法。但基本上你想将发送者转换为按钮并获取按钮的 CommandArgument 属性以获取当前行的 ID。

# java - Android 应用程序将无法运行

> ID：15078501
> 
> 赞同：0
> 
> 时间：2013-02-25T23:25:53.877
> 
> 标签：java, android

因此，我正在尝试运行我用来了解线程和意图的应用程序，但是该应用程序将无法运行，但是我的代码中没有任何警告/错误下划线，谁能帮助我。

清单代码：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.learn.tam.Splash"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.SPLASH" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.learn.tam.StartingPoint"
        android:label="@string/app_name" >
    </activity>
 </application>

</manifest> 
```

和活动代码

```
package com.example.learn.tam;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class Splash extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.splash);

    Thread timer = new Thread(){

        public void run(){
            try {
                sleep(5000);
            }
            catch (InterruptedException e){
                e.printStackTrace();
            }
            finally{
Intent openStartingPoint = new   Intent("com.example.learn.tam.StartingPoint"); 
startActivity(openStartingPoint);
            }
        }
    };

    timer.start();
}

} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T23:29:04.497

改变

```
<intent-filter>
            <action android:name="android.intent.action.SPLASH" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

至

```
<intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

由于您的应用程序可能未显示在主屏幕上（`MAIN`需要类别）。

也改变

```
Intent openStartingPoint = new   Intent("com.example.learn.tam.StartingPoint"); 
startActivity(openStartingPoint); 
```

至

```
Intent openStartingPoint = new   Intent(Splash.this, StartingPoint.class ); 
startActivity(openStartingPoint); 
```

由于您的 StartingPoint 没有定义 Intent-Action`"com.example.learn.tam.StartingPoint"`

看看能不能解决什么问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T23:28:40.500

删除这个：

```
 <action android:name="android.intent.action.SPLASH" /> 
```

并将其替换为：

```
 <action android:name="android.intent.action.MAIN" /> 
```

# api - Web API 中的当前 PayPal 费用？

> ID：15078504
> 
> 赞同：2
> 
> 时间：2013-02-25T23:26:22.440
> 
> 标签：api, magento, paypal

有谁知道是否有公开可用的 PayPal 资源可以让我在我的 Magento 代码中计算交易费用？

例如，如果有人以 1.00 美元买了东西，我想知道其中 0.15 美元是否是 PayPal 费用。

如果有一个资源，比如 paypal.com/currentfees.xml 或者我可以在我的 PHP 代码中读出的东西，我可以。它存在吗？我知道不同的付款方式（例如，AMEX）有不同的费用，费用可能随时变化 -> 所以最好有一个动态的方法来计算 Magento 的订单总额中有多少是真正的 PayPal 费用。

编辑：澄清一下，我对向客户收取更多费用不感兴趣，只是想知道我的价格中有多少要收费。用于簿记。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:39:10.557

不同账户甚至不同交易的 PayPal 费用都不相同；跨境交易有不同的费用，PayPal Here交易，大商折扣等等。
查看[https://www.paypal.com/webapps/mpp/paypal-fees](https://www.paypal.com/webapps/mpp/paypal-fees)了解更多详情。
所以不，很遗憾，您无法提取资源来查找当前费用。

但是，PayPal*会*在 API 响应中返回为每笔交易支付的费用。
例如，如果您与 PayPal Express Checkout 集成，则 DoExpressCheckoutPayment API ( [doc](https://www.x.com/developers/paypal/documentation-tools/api/doexpresscheckoutpayment-api-operation-nvp) ) 用于完成交易。此 API 调用返回一个“PAYMENTINFO_0_FEEAMT”参数，其中包含为交易支付的总费用金额。

如果您希望在交易完成*后检索此信息；*PayPal 还提供 GetTransactionDetails API 调用 ( [doc](https://www.x.com/developers/paypal/documentation-tools/api/gettransactiondetails-api-operation-nvp) )。此 API 调用还返回“FEEMT”作为参数。
只需提交 TRANSACTIONID 并读出 FEEAMT。

注意：费用仅根据已完成的交易计算。对于任何订单或授权 ID（例如以 O-xxxxxxxx 开头的那些），您都不会收到 FEEAMT。

# php - Symfony2 单元测试包扩展::load()

> ID：15078506
> 
> 赞同：4
> 
> 时间：2013-02-25T23:26:28.290
> 
> 标签：php, unit-testing, symfony

有人对单元测试`Extension::load()`方法有任何提示吗？

这个函数似乎不是为处理单元测试而设计的，因为我们硬编码了要加载的路径。

有任何想法吗？

# php - php函数来确定有多少总时间是在晚上

> ID：15078507
> 
> 赞同：-5
> 
> 时间：2013-02-25T23:26:37.213
> 
> 标签：php

我有两个变量，开始时间和结束时间。

我需要确定其中的哪一部分在 06:00 到 19:00（早上）之间，或者它们之间的时间是在晚上（19:00 到 06:00）之间的时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:49:04.903

```
$sunset = date_sunset(strtotime('2013-02-26 noon'), $timezone, SUNFUNCS_RET_TIMESTAMP);
$sunrise = date_sunrise(strtotime('2013-02-27 noon'), $timezone, SUNFUNCS_RET_TIMESTAMP); 
```

这样，您应该获得日落和日出的时间戳。有关参数的详细信息，请参阅[`date_sunrise()`'](http://php.net/date-sunrise)和[`date_sunset()`](http://php.net/date-sunset)，因为您可能需要更多有用值的信息（比较开罗和赫尔辛基的日落；））。

现在你应该能够找到时间段，在晚上，如果你遵循一些规则

*   开始和结束之间的每晚时段，*不*关心时间（例如假设“中午”）
*   从夜间删除

    *   开始日期：如果开始在“晚上”之内，日落和开始之间的差异
    *   结束日期：如果结束在“夜晚”之内，结束与日出的区别

# jsf-2 - 保存和恢复用于排序数据表的输入值的最佳方法（JSF，Richfaces）

> ID：15078513
> 
> 赞同：1
> 
> 时间：2013-02-25T23:26:53.513
> 
> 标签：jsf-2, richfaces, datatables, restore

在过去的几天里，我面临着一项对我来说成为问题的任务。

我正在使用`rich:dataTable`自己的过滤和排序列。在后端使用标准排序和过滤 bean 进行简单输入或选择。我的问题是，我需要以某种方式记住许多表单的排序和过滤值，以便在某些情况下恢复它们 - 例如：用户使用后退按钮（最重要的情况）。我知道如何处理浏览器后退按钮，但我不知道必须以某种简单明了的方式保存和恢复我的值。重要的是***我不能使用*** `rich:extandedDataTable`并且我使用 bean 的视图范围。

（其中一种解决方案是使用会话范围 bean 来管理 s&f，但是为一种形式制作一个 bean 成本太高，而且制作一个这样的 bean 以我想使用的方式使用起来非常复杂。）

所以，我的问题是：我该怎么做？处理这种事情的最佳做法是什么？我应该走哪条路？

我正在使用 RF 4.3 和 Mojarra 2.1.17（我认为这并不重要）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:50:14.813

理想情况下，该`stateVar`属性将非常适合您的需求，但有关它的文档很少，似乎没有人真正知道如何处理它。我将推荐以下 hack，它基本上可以让您手动保存和恢复数据表变量的状态

如果您只是想保留表的当前过滤器状态，RF datatable 有一种`getComponentState()`方法可以基本上做到这一点。如果要存储特定值，则必须自己深入研究数据表。无论您选择什么，都必须在组件的生命周期中的某个时间进行

1.  定义一个合适的`<f:event/>`侦听器，您将在其中捕获数据表的状态变量。我推荐`preValidate`.

    ```
     <rich:extendedDataTable binding="#{bean.table}" ...>       
       <f:event type="preValidate" listener="bean.saveTableState"/>        
     </rich:extendedDataTable> 
    ```

    然后在您的支持 bean 中定义将从表绑定中检索状态变量的方法

    ```
     public void saveTableState(ComponentSystemEvent evt){
          UIExtendedDataTable table = (UIExtendedDataTable)evt.getComponent();
          //now you have the table, you can get what you need from it
            DataComponentState savedState = table.getComponentState(); //this object obtained here you can restore to reset the table to it's condition when you obtained the state.
            //or go into the table's hierarchy to retrieve specific values
            Iterator<UIComponent> cols = table.columns();
            while(cols.hasNext()){
            UIColumn col = (UIColumn)cols.next();
              col.getFilterValue(); //Retrieve the current filter value on the column
            }       
     } 
    ```

2.  根据您的偏好，在组件的生命周期中找到合适的点来恢复值。我会推荐`preRenderComponent`。

    ```
     public void restoreTableConditions(ComponentSystemEvent evt){
         table.restoreState(FacesContext.getCurrentInstance(),savedState); //restore the DataComponentState from wherever you stashed it
        } 
    ```

# php - 动态内容....为什么它不起作用？

> ID：15078514
> 
> 赞同：0
> 
> 时间：2013-02-25T23:27:03.857
> 
> 标签：php

好的，我想提前道歉，因为我无法阐明问题的根本原因是我正在尝试构建的这个网站。所以如果我在外太空……=/

无论如何，我遇到的第一个问题是，当我尝试解决 php 中“包含”函数的问题时，我收到了这个错误（如下），我完全篡改它的原因是因为我的导航不是工作。每当我尝试离开 index.php 页面时，我都会收到 404。

> 警告：包含（/home/content/22/10350022/html/../Setup.php）[function.include]：无法打开流：/home/content/22/10350022/html/中没有这样的文件或目录第 6 行的 index.php

警告：include() [function.include]: 未能打开 '/home/content/22/10350022/html/../Setup.php' 以包含 (include_path='.:/usr/local/php5_3/lib/php ') 在第 6 行的 /home/content/22/10350022/html/index.php

以下是 index.php、setup 和 navs 中的代码：

Index.php ---下面

```
 > > <?php
// Setup Document:
//include (1) - forces the site to load the file one time but we're not going to include set up file more than once

define('APP_PATH', dirname(__FILE__) . "/../");
include(APP_PATH . "Setup.php");

if (isset($_GET['page']) && $_GET['page'] ==! ''){
   $pg =$_GET['page'];
} else {
   $pg = 'Home';
}

?>

<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>

<link rel="stylesheet" type="text/css" href="Css/styles.css">

<style type="text/css">
body {
    background-color: #039;
}
</style>
</head>

<body>
<div class ="header">
            <?php include('Template/header.php');?>
     </div>   
    <div class ="main_Nav">
          <?php include('Template/main_Nav.php');?>     
    </div>

    <div class ="main_Content">

        <?php include('Content/'.$pg.'.php');?>
        <?php #$Home = "SELECT body FROM Pages WHERE Id=1";
            #$d = '$Home, $conn';
                #if ($d == false) {
                    #echo "FAILURE".mysql_error($conn);
                #}
        ?>
<div class ="main_Footer">
        <?php include('Template/footer.php');?> 
    </div>

</body>

</html> 
```

有些东西是故意注释掉的，所以我可以解决这个问题。

下面的导航——

```
<?php
## Main Navigation Document
include('/Config/setup.php');
?>

    <ul>
        <li><a href="Home">Home</a></li>
        <li><a href="Services">Services</a></li>
        <li><a href="FreeStuff">Free Stuff</a></li>
        <li><a href="Blog">Blog</a></li>
        <li><a href="AboutUs">About Us</a></li>
    </ul> 
```

最后 - 设置 - 一些信息明显被涂黑，一些东西被故意注释掉

```
<?php

    ## Setup Document

    //Host - location of database on server etc
    //username
    //pswd
    //database name

    //connection variables
    $host = "";
    $user = "test";
    $pwd = "";
    $db = "test";

    //connection info

    $conn = mysqli_connect ($host, $user, $pwd, $db);
    if ($conn ==false) {
        echo "connection has failed";
    }

    //fetching the title of pages
    #$sql = "SELECT title FROM pages WHERE Id=2";

    //da warnings

    #$r = '$sql,$conn';
    #   echo $r;
    #   echo "sucess!";
    // return

    #if ($r == false) {
    #   echo "FAILURE".mysql_error($conn);
    #}

    ?> 
```

最初我只是使用**include('/Config/setup.php');** 哪个有效。但是，每当我尝试导航到导航栏中的特色内容时……我都会收到 404 错误。现在这应该只改变内容框——页面的其余部分应该保持静态。`<?php include('Content/'.$pg.'.php');?>`这就是我想我在这里做的。或者至少我希望它是大声笑。$pg 是字符串 4(Home)，除非 page 另有定义，否则默认为 home。至少那是我认为我在上面写的。

我的文件结构真的很快是这样的：

... FTP 上的根文件夹 -content -config -images -Css -templates -Stats -Roodyinfo

现在它一直要求这条路径......这与我的托管服务有关吗？因为它似乎在说我必须定义一个绝对路径？？？

欢迎并感谢所有帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:30:36.413

只需将您需要的所有文件放在同一目录中并使用 require('filename'); 没有路径。

# java - 为什么我的代码不起作用？- 获取用户输入以启动 for 循环

> ID：15078515
> 
> 赞同：0
> 
> 时间：2013-02-25T23:27:08.270
> 
> 标签：java, string, for-loop, variable-assignment, user-input

所以我有这个Java作业，我必须在其中创建一个程序，如果用户输入“initiate”，它将开始for循环，它将打印“initiate”100次。我已经在我的代码中搜索错误，但找不到任何错误。请帮忙 ：）

提前致谢。

```
 package container;

        import java.util.Scanner;

        public class Assignment1 {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        int x = 0;

        String checker = "initiate";

        Scanner scan = new Scanner(System.in);
        String input = scan.nextLine();     
        if(input == checker){

            for(x=0;x<=100;x++){

                System.out.println("Initiated");

            }
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:28:07.133

`equals`您应该使用而不是比较字符串`==`

```
if (input.equals(checker)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T23:28:04.140

```
 if(input == checker){ 
```

应该

```
 if(input.equals(checker)){ 
```

使用`equals()`方法检查两个字符串对象是否相等。`==`字符串（一般是对象）的运算符检查两个引用是否引用同一个对象

*   [**如何比较 Java 中的字符串？**](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T23:31:51.603

正如其他人所指出的，使用该`equals`方法来比较字符串：

```
if(checker.equals(input)) 
```

但是，对于从 0 到 100的值，您的`for`循环也将打印101 次。替换`Initiated``x`

```
for(x=0;x<=100;x++) 
```

和

```
for(x=0;x<100;x++) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T23:28:37.937

您应该使用`input.equals(checker)`而不是`input == checker`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T23:29:57.440

```
if(input == checker) 
```

比较这两个变量是否具有相同的对象引用。即：指向同一个对象。

```
if(input.equals(checker)) 
```

检查输入是否与检查器具有相同的内容。这就是为什么它不起作用:)

# asp.net - WCF 跨域身份验证和模拟

> ID：15078518
> 
> 赞同：1
> 
> 时间：2013-02-25T23:27:27.823
> 
> 标签：asp.net, .net, wcf, cross-domain, windows-authentication

场景：现有 WCF 服务 X 在 Domain_A 中的计算机上运行。该服务依赖于模拟，因此必须具有 Windows 身份。ASP.NET 网站在不属于域的机器上运行（它是 DMZ）。它需要调用服务 X，最好（尽管不是必须）使用 net.tcp 绑定。

根据我对 SO 的类似问题的理解，无法在 WCF 中跨域使用 Windows 身份验证。如果我使用不同的机制（即证书），这是否意味着仍然无法向服务 X 提供可用于模拟的凭据？或者证书可以以某种方式映射到 Domain_A 上的帐户？

我能看到的唯一其他解决方案是在 Domain_A 上创建网站可以连接到的附加服务 Y（无需模拟），然后使用 Y 的身份将请求路由到服务 X。但是，那感觉真的很笨拙。

有没有人对此有更聪明的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:43:34.413

因此，由于在使用 Windows 身份验证配置 SSL 绑定与映射到帐户的证书以及 netTcpBinding 时遇到困难，我硬着头皮创建了一个中间“服务 Y”。不是最优雅的解决方案，但它有效..

# python - 作为输入传递给函数的python字典在该函数中充当全局而不是局部

> ID：15078519
> 
> 赞同：78
> 
> 时间：2013-02-25T23:27:28.190
> 
> 标签：python, variables, dictionary, global, local

我对以下行为感到非常困惑。案例 1、3 和 4 的表现与我预期的一样，但案例 2 没有。为什么情况 2 允许函数全局更改字典条目的值，即使函数从未返回字典？我使用函数的一个主要原因是将函数中的所有内容与其余代码隔离开来，但如果我选择在函数内部使用相同的变量名，这似乎是不可能的。**我的理解是，在函数中明确定义的任何内容都是该函数的本地内容，但如果字典被定义并作为输入传递给**函数，情况似乎并非如此。

```
Python 2.7.2+ (default, Oct  4 2011, 20:06:09) 
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information. 
```

=============案例1================

```
>>> def testfun1(a):
...     a=2
... 
>>> a=0
>>> testfun1(a)
>>> a
0 
```

=============案例2================

```
>>> def testfun2(b):
...     b['test']=2
... 
>>> b={}
>>> testfun2(b)
>>> b
{'test': 2} 
```

=============案例3===============

```
>>> def testfun3():
...     c=2
... 
>>> c=0
>>> testfun3()
>>> c
0 
```

=============案例 4=============== （由这个问题解释：[全局字典不需要关键字 global 来修改它们？](https://stackoverflow.com/questions/14323817/global-dictionaries-dont-need-keyword-global-to-modify-them)）

```
>>> def testfun4():
...     d['test']=10
... 
>>> d={}
>>> testfun4()
>>> d
{'test': 10} 
```

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-02-25T23:34:47.710

[Python 的“参数评估策略”与您可能习惯使用的语言有些不同](http://lucumr.pocoo.org/2011/7/9/python-and-pola/#pass-by-what-exactly)。python没有显式的按值调用和按引用调用语义，而是[通过共享调用](https://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_sharing)。您本质上总是在传递对象本身，而对象的可变性决定了它是否可以被修改。列表和字典是可变对象。数字、字符串和元组不是。

您将字典传递给函数，而不是副本。因此，当您修改它时，您也在修改原始副本。

为避免这种情况，您应该在调用函数之前或从函数内部首先复制字典（将字典传递给`dict`函数应该这样做，即将函数`testfun4(dict(d))`定义为`def testfun4(d):`）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-06-05T10:17:50.403

为了支持[@Casey Kuball](https://stackoverflow.com/users/936083/casey-kuball)所说的，Python 中的每个对象都是通过引用传递的。每个函数都会收到对您传递的实际对象的引用。修改这些对象取决于它们是否是可变数据类型。

本质上，可以说字典、集合和列表等可变对象是通过引用传递的。像`int`, `str`,等不可变对象`tuple`是按值传递的。

您还应该注意，在某些情况下，可变对象在函数中被覆盖，从而失去对传递给函数的实际对象的引用。

```
>>> def testfun(b):
...     b = b or {}  # Creates a new object if b is false
...     b['test'] = 2
... 
>>> b = {}
>>> testfun(b)
>>> b
{} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-25T23:38:22.390

当您将整数或字符串等基本对象传递给函数时，如果您在函数内部对其进行更改，则函数外部的相应对象不会发生任何事情，因为当您使用基本对象时，python 按值传递它。

但是，如果您将字典或列表传递给函数，它们将通过引用传递，这意味着您将具有这种行为：函数外部的对象已更改，如您所见。

***编辑：*** 此外，通过值传递或通过引用传递之间存在区别：通过值，对象的“副本”被制作以便在函数中使用；通过引用，完全相同的对象通过引用传递，并且在函数内部对其进行的修改在外部可见。根据定义，python 通过值传递其不可变对象，并通过引用传递其可变对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-25T23:29:37.693

global 关键字仅用于赋值（很可能`del`，我从未尝试过）。对象突变是完全有效的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T23:32:32.400

你给函数传递了一个`dict`对象，在函数内部修改了，当然函数返回后也会修改。该对象没有被复制，因此您修改了您传递的同一对象，并且这个问题与命名、相似名称、范围等无关，因为您明确传递了该对象。

# android - 指定 Android 库版本代码/名称

> ID：15078525
> 
> 赞同：5
> 
> 时间：2013-02-25T23:28:21.070
> 
> 标签：android, android-library, android-version

哪个是指定android的库项目版本代码/名称的正确位置？图书馆的 Android 清单上的当前状态是什么？当您捆绑库 jar 时，在捆绑 jar 并仍然提供可用/未损坏的 jar 时可以忽略 AndroidManifest 吗？

我的问题与[此有关](https://stackoverflow.com/questions/3853639/retrieve-androidversionname-from-library-project)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T01:20:45.077

您在其 中设置项目的版本代码/名称[`AndroidManifest.xml`](http://developer.android.com/guide/topics/manifest/manifest-intro.html)。但如果是库项目，集成到宿主项目后，清单中的所有信息都会被忽略。

有[一个问题](https://code.google.com/p/android/issues/detail?id=25226)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-01T23:32:20.763

```
BuildConfig.VERSION_NAME
BuildConfig.VERSION_CODE 
```

只需确保为您的库导入 BuildConfig（因为实际上每个 android 库/应用程序在其包路径上都有自己的 BuildConfig）。Android Studio 的 Gradle 构建系统表明它始终是从 0.7.0 版开始生成的（请参阅[更改日志](http://tools.android.com/tech-docs/new-build-system)）。这作为生成的类持续存在到托管应用程序/库中。

# java - 从 jfreechart Piechart 中删除灰色边框

> ID：15078529
> 
> 赞同：3
> 
> 时间：2013-02-25T23:28:24.553
> 
> 标签：java, jakarta-ee, jfreechart

我在从 servlet 发送的 JSP 页面中使用 JFreeChart。

但是我无法删除图表周围的灰色边框（见截图）。

[jfreechart 带边框 http://www.craenhals.eu/images/jfreechart.png](http://www.craenhals.eu/images/jfreechart.png)

我怎样才能删除它？

我使用以下代码在我的 servlet 中生成图表：

```
 PiePlot plot = new PiePlot(dataset);
    StandardPieSectionLabelGenerator labels = new StandardPieSectionLabelGenerator("{0} = {2}");
    plot.setLabelGenerator(labels);
    plot.setInteriorGap(0);
    plot.setBackgroundPaint(Color.white);
    plot.setBaseSectionOutlinePaint(Color.blue);
    plot.setBaseSectionPaint(Color.green);
    plot.setShadowPaint(Color.black);
    plot.setShadowXOffset(0);
    plot.setShadowYOffset(0);
    plot.setOutlineVisible(false);

    chart = new JFreeChart("", plot);

    chart.setPadding(new RectangleInsets(0, 0, 0, 0));

    chart.setBorderVisible(false);
    chart.clearSubtitles(); 
```

我在这里想念什么？我还在我的 JSP 中使用此代码来嵌入图像：

```
<img
    src="<c:url value="/beheerder/statistieken?actie=chart_contactwijze"/>"
    title="Contactwijze" border="0"/> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-18T13:26:22.770

plot.setOutlineVisible(false);

为我做了伎俩。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-31T11:51:46.840

```
plot.setShadowPaint(null) 
```

这对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T08:47:57.083

灰色边框是图表的背景。要更改它，只需添加以下行：`chart.setBackgroundPaint(Color.white)`

# alignment - 对齐文本支持

> ID：15078533
> 
> 赞同：0
> 
> 时间：2013-02-25T23:28:27.503
> 
> 标签：alignment, center

我希望将买入底部应用于此页面上表格的字段 3 中的列。

[http://hamabeadpatterns.co.uk/hama-beads/midi-beads-5/disney-gift-sets/](http://hamabeadpatterns.co.uk/hama-beads/midi-beads-5/disney-gift-sets/)

但是，当我这样做时，我怎样才能让臀部与场地的死点对齐。与底部中心相对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:32:13.867

添加`vertical-align: middle;`到您的`<td>`标签。

# objective-c - 索引超出范围错误

> ID：15078541
> 
> 赞同：0
> 
> 时间：2013-02-25T23:28:49.723
> 
> 标签：objective-c, uitableview, nsuinteger

我收到此错误：

```
-[__NSArrayM objectAtIndex:]: index 556503008 beyond bounds [0 .. 2]' 
```

这是应用程序崩溃的地方：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSUInteger index = [[Data singleton].annotations objectAtIndex:indexPath.row];
    self.pinVC = [[PinViewController alloc]init];
    [self.pinVC setIdentifier:index];
    [[self navigationController]pushViewController:self.pinVC
                                      animated:YES];
 }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return self.pinArray.count;
} 
```

我是 Objective C 的新手，我不知道为什么会这样。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:38:52.637

It's likely that your `pinArray` variable isn't matching up to your call to `objectAtIndex:` on your singleton array. Assuming `[[Data singleton].annotations` holds the same type of information as your `pinArray` variable, then you might try:

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    NSNumber *num = [self.pinArray objectAtIndex:indexPath.row];
    NSInteger index = [num integerValue]; //<-As an aside, observe I converted the number to integer type
    ...
    ...
} 
```

The idea is that you are likely returning a higher row count than there are annotation objects in your array, hence the *beyond bounds* error.

Or else you should be doing this:

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    NSNumber *num = [[Data singleton].annotations objectAtIndex:indexPath.row];
    NSInteger index = [num integerValue]; //<-As an aside, observe I converted the number to integer type
    ...
    ...
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
    return [Data singleton].annotations.count;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:36:36.527

大概就是这一行：

```
 NSUInteger index = [[Data singleton].annotations objectAtIndex:indexPath.row]; 
```

`objectAtIndex`返回一个对象，但您将结果分配给一个原语 ( `NSUInteger`，这是一个无符号整数的花哨名称)。我很惊讶 XCode 没有在这一行给你警告。你在存储`annotations`什么？

错误本身是一个越界错误 - 尽管我认为这意味着它*可能*是索引路径本身，正如 Jeremy 在评论中所建议的那样，您尝试访问数组的位置 556503008 的事实向我表明它不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T00:22:00.997

So I realize that I meant to get the index of the object, but I was assigning the object to an NSUInteger, when it is a instance of a custom class. So I just changed that line of code to this:

```
NSUInteger index = indexPath.row; 
```

# javascript - 我需要添加一个加载一次的 JavaScript 加载函数

> ID：15078554
> 
> 赞同：1
> 
> 时间：2013-02-25T23:29:59.177
> 
> 标签：javascript, jquery, function, lightbox

我正在寻找一种方法来添加一个函数，告诉我`.playerWindow`只使用 cookie 加载一次。现在每次我刷新页面时它都会加载。

```
<script type="text/javascript">

    $(function () {

        $("#button").click(function () {
            $("#overlay").fadeTo(1000, .8);
            $(".playerWindow").show(750);
            //$("body").scrollTop(0);
        });

        $(".closePlayer, #overlay").click(function () {
            $(".playerWindow").hide(750);
            $("#overlay").fadeOut(1000);
        });

    });

    $(window).load(function () {
        if (document.cookie.indexOf('visited=true') === -1) {
            var fifteenDays = 1000 * 60 * 60 * 24 * 15;
            var expires = new Date((new Date()).valueOf() + fifteenDays);
            document.cookie = "visited=true;expires=" + expires.toUTCString();
            $("#overlay").fadeTo(1000, .8);
            $(".playerWindow").show(750);
        }
    });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:44:15.277

```
$(window).load(function() {
  if (document.cookie.indexOf('visited=true') === -1) {
    var fifteenDays = 1000*60*60*24*15;
    var expires = new Date((new Date()).valueOf() + fifteenDays);
    document.cookie = "visited=true;expires=" + expires.toUTCString();
    $("#overlay").fadeTo(1000, .8);
    $(".playerWindow").show(750);
  }
}); 
```

澄清一下，这个 HTML 页面适用于我的 Apache 服务器。

```
<html>
    <head></head>
    <body>
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>
            $(window).load(function() {
           if (document.cookie.indexOf('visited=true') === -1) {
              var fifteenDays = 1000*60*60*24*15;
              var expires = new Date((new Date()).valueOf() + fifteenDays);
              document.cookie = "visited=true;expires=" + expires.toUTCString();
              alert("bam!");
         }
    });

         </script>
    </body>
</html> 
```

它显示“砰！” 我第一次访问，然后第二次、第三次等什么都没有。在 Chrome 中打开隐身窗口会导致它再次出现。

# github - 使用fabricjs需要哪些文件

> ID：15078555
> 
> 赞同：1
> 
> 时间：2013-02-25T23:30:03.897
> 
> 标签：github, fabricjs

当我将 FabricJS[演示](http://fabricjs.com/shadows/)中包含的 css 和 js 文件与我从[github](https://github.com/kangax/fabric.js/)下载的 zip 文件中获得的文件进行比较时，它们并不相同。

例如，从其中一个演示的源代码中，我找到了以下参考：

**1 -** "../css/" ...*但在 github 的 zip 中不存在*

**2 -** "../js/" ...*但在 github 的 zip 中不存在*

**3 -** "../lib/fabric.js ...*但在 github 的 zip 中不存在*

那么在我的 html5 页面中包含哪些正确的 js 和 css 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T01:15:30.647

他们刚刚发布了 1.0 版---生日快乐，FabricJS ！

我认为 github 文件仍然是 .9xx 版本

因此，请访问[http://fabricjs.com/](http://fabricjs.com/)并转到屏幕底部并单击“下载”。

您只需要这 1 个脚本文件： **“../dist/all.js”**

没有关联的样式表。

# python - pp下并行Python使分形和资源序列化

> ID：15078563
> 
> 赞同：0
> 
> 时间：2013-02-25T23:31:00.763
> 
> 标签：python, python-2.7, fractals, parallel-python

我制作了一个 python 脚本来制作分形图像。

我尝试使用 pp python 模块来加快这个源代码。

最大的问题是：**image.putpixel((x, y), (i % 8 * 16, i % 4 * 32,i % 2 * 64))**。这行源代码在使用时给了我一些关于： *cPickle.UnpickleableError: Cannot pickle objects*。

我认为这个资源不能在 pp 下序列化。知道吗？谢谢你。问候。

我的源代码：

```
from PIL import Image
#size of image
imgx = 600
imgy = 400
#make image buffer
image = Image.new("RGB", (imgx, imgy))

# area of fractal
xa = -2.0
xb = 2.0
ya = -2.0
yb = 2.0

#define constants
max_iterations = 10 # max iterations allowed
step_derivat = 0.002e-1 # step size for numerical derivative
error = 5e-19 # max error allowed

# function will generate the newton fractal
def f(z): return z * z  +complex(-0.31,0.031)

# draw derivate fractal for each y and x 
for y in range(imgy):
 zy = y * (yb - ya)/(imgy - 1) + ya
 for x in range(imgx):
  zx = x * (xb - xa)/(imgx - 1) + xa
  z = complex(zx, zy)
  for i in range(max_iterations):
   # make complex numerical derivative
   dz = (f(z + complex(step_derivat, step_derivat)) - f(z))/complex(step_derivat,step_derivat)
    # Newton iteration see wikipedia   
   z0 = z - f(z)/dz 
   # stop to the error 
   if abs(z0 - z) < error: 
    break
   z = z0
  #I use modulo operation expression to do RGB colors of the pixels 
  image.putpixel((x, y), (i % 8 * 16, i % 4 * 32,i % 2 * 64))

#save the result 
image.save("fractal.png", "PNG") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:01:27.137

并行 Python 或多处理模块要求需要传递给其他进程的对象是可挑选的，而来自 PIL 的图像对象则不是。

我建议从要并行化的函数中删除对 image.putpixel 的调用，返回一个简单的 RGB 点列表或一个可挑选的 numpy 数组。然后，计算完成后，您可以组装图像。

此外，为了获得更具体的建议，您还应该发布代码的并行版本。

# r - 为 xts 分配新列

> ID：15078565
> 
> 赞同：4
> 
> 时间：2013-02-25T23:31:13.057
> 
> 标签：r, xts, zoo

我已经使用`lapply`将累积产品计算为数据集上的新列，但我必须获取数据，计算它，然后在 lapply 的每次迭代中使用 assign 覆盖原始数据。我想知道是否有一种更优雅的方式可以自动将新列名分配给 xts 对象

这是一个产生正确结果的模拟示例......它应该可以复制粘贴到 R

```
library(xts)
x <- xts(matrix(rnorm(10*1000,0.001,0.0001),ncol=10), Sys.Date()-c(1000:1))
colnames(x) <- paste0("x.",c(1:10))
tmp <- lapply(5:20, function(y){
    tmp.cum.prod <- rollapply(x,width=y,function(z){
        prod(rowMeans(z[,1:10])+1)-1
    },by.column=FALSE,align="right")
    orig.colnames <- colnames(x)
    x <- merge(x,tmp.cum.prod)
    colnames(x) <- c(orig.colnames,paste0("cum.prod.",y))
    assign("x",x,envir=.GlobalEnv)
})
tail(x) 
```

但我认为可能会改进以下几行：

```
orig.colnames <- colnames(x)
x <- merge(x,tmp.cum.prod)
colnames(x) <- c(orig.colnames,paste0("cum.prod.",y))
assign("x",x,envir=.GlobalEnv) 
```

有什么建议么？此外，如果您认为上面还有其他可以改进的行（例如使用`lapply`），我总是热衷于学习如何编写更优雅的代码。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:57:04.557

如果您要分配给`lapply`函数内部的全局环境，则可能应该使用 for 循环。这就是我会做的...

```
set.seed(21)
x <- xts(matrix(rnorm(10*1000,0.001,0.0001),ncol=10), Sys.Date()-1000:1)
colnames(x) <- paste0("x.",1:10)

rmx <- xts(rowMeans(x)+1,index(x))
for(i in 5:20) {
  tmp.cum.prod <- rollapplyr(rmx,i,prod,by.column=FALSE)-1
  colnames(tmp.cum.prod) <- paste0("cum.prod.",i)
  x <- merge(x,tmp.cum.prod)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T01:22:22.203

您可以使用`Reduce`来`merge`代替循环。

```
> library(xts)
> x <- xts(matrix(rnorm(10*1000,0.001,0.0001),ncol=10), Sys.Date()-c(1000:1))
> colnames(x) <- paste0("x.",c(1:10))
> tmp <- lapply(5:20, function(y){
+   tmp.cum.prod <- rollapply(x,width=y,function(z){
+     prod(rowMeans(z[,1:10])+1)-1
+   },by.column=FALSE,align="right")
+   colnames(tmp.cum.prod) <- paste0("cum.prod.",y)
+   return(tmp.cum.prod)
+ })
> 
> result <- Reduce(function(...) merge(..., all=F), tmp, init = x)
> tail(result)
                    x.1          x.2          x.3          x.4          x.5          x.6          x.7          x.8          x.9         x.10
2013-02-20 0.0008919729 0.0010013599 0.0010276262 0.0007968856 0.0010731857 0.0010363689 0.0012281909 0.0010999609 0.0012081942 0.0010884836
2013-02-21 0.0009690167 0.0009131937 0.0009831485 0.0011843868 0.0011380318 0.0010424227 0.0011061298 0.0009944692 0.0010294051 0.0009762645
2013-02-22 0.0009269100 0.0010155799 0.0009445889 0.0010970406 0.0010646493 0.0011235968 0.0009402159 0.0010529831 0.0010884473 0.0008735272
2013-02-23 0.0009855041 0.0008282001 0.0011063870 0.0010430884 0.0008031531 0.0012577790 0.0009949316 0.0010046824 0.0011176581 0.0010516397
2013-02-24 0.0008176369 0.0009818399 0.0009964602 0.0009347190 0.0010362750 0.0010734247 0.0009749511 0.0010822521 0.0009335049 0.0010115921
2013-02-25 0.0009861176 0.0007606129 0.0010802525 0.0008771646 0.0010292476 0.0009319029 0.0011008009 0.0007901849 0.0011368412 0.0009677856
            cum.prod.5  cum.prod.6  cum.prod.7  cum.prod.8  cum.prod.9 cum.prod.10 cum.prod.11 cum.prod.12 cum.prod.13 cum.prod.14 cum.prod.15
2013-02-20 0.005080621 0.006084484 0.007080320 0.008074656 0.009105274  0.01009016  0.01111046  0.01212787  0.01317140  0.01416878  0.01516398
2013-02-21 0.005127238 0.006119520 0.007124420 0.008121286 0.009116649  0.01014833  0.01113423  0.01215559  0.01317405  0.01421867  0.01521707
2013-02-22 0.005119219 0.006145185 0.007138471 0.008144390 0.009142264  0.01013864  0.01117136  0.01215826  0.01318065  0.01420015  0.01524582
2013-02-23 0.005120808 0.006143740 0.007170751 0.008165050 0.009171994  0.01017089  0.01116827  0.01220205  0.01318996  0.01421339  0.01523392
2013-02-24 0.005105586 0.006110114 0.007134052 0.008162074 0.009157352  0.01016529  0.01116516  0.01216353  0.01319833  0.01418721  0.01521165
2013-02-25 0.005026133 0.006076609 0.007082108 0.008107036 0.009136051  0.01013229  0.01114120  0.01214204  0.01314137  0.01417717  0.01516701
           cum.prod.16 cum.prod.17 cum.prod.18 cum.prod.19 cum.prod.20
2013-02-20  0.01619964  0.01724359  0.01830398  0.01928576  0.02034408
2013-02-21  0.01621330  0.01725003  0.01829506  0.01935654  0.02033935
2013-02-22  0.01624524  0.01724248  0.01828025  0.01932634  0.02038890
2013-02-23  0.01628066  0.01728110  0.01827936  0.01931819  0.02036534
2013-02-24  0.01623318  0.01728095  0.01828237  0.01928161  0.02032147
2013-02-25  0.01619243  0.01721496  0.01826374  0.01926613  0.02026633 
```

# java - JAXB：如何解组不同类型但具有共同父对象的对象列表？

> ID：15078566
> 
> 赞同：13
> 
> 时间：2013-02-25T23:31:15.010
> 
> 标签：java, jaxb

在我们的应用程序中有一个相当普遍的模式。我们在 Xml 中配置一组（或列表）对象，它们都实现了一个通用接口。在启动时，应用程序读取 Xml 并使用 JAXB 创建/配置对象列表。我从来没有想过（在多次阅读各种帖子之后）只使用 JAXB 来做到这一点的“正确方法”。

例如，我们有一个接口`Fee`，以及多个具体的实现类，它们有一些共同的属性，也有一些不同的属性，以及非常不同的行为。我们用来配置应用程序使用的费用列表的 XML 是：

```
<fees>
   <fee type="Commission" name="commission" rate="0.000125" />
   <fee type="FINRAPerShare" name="FINRA" rate="0.000119" />
   <fee type="SEC" name="SEC" rate="0.0000224" />
   <fee type="Route" name="ROUTES">
       <routes>
        <route>
            <name>NYSE</name>
            <rates>
                <billing code="2" rate="-.0014" normalized="A" />
                <billing code="1" rate=".0029" normalized="R" />
            </rates>
        </route>        
        </routes>
          ...
    </fee>
  </fees> 
```

在上面的 XML 中，每个`<fee>`元素对应一个 Fee 接口的具体子类。该`type`属性提供有关要实例化哪种类型的信息，然后一旦实例化，JAXB 解组将应用剩余 Xml 中的属性。

我总是不得不求助于做这样的事情：

```
private void addFees(TradeFeeCalculator calculator) throws Exception {
    NodeList feeElements = configDocument.getElementsByTagName("fee");
    for (int i = 0; i < feeElements.getLength(); i++) {
        Element feeElement = (Element) feeElements.item(i);
        TradeFee fee = createFee(feeElement);
        calculator.add(fee);
    }
}

private TradeFee createFee(Element feeElement) {
    try {
        String type = feeElement.getAttribute("type");
        LOG.info("createFee(): creating TradeFee for type=" + type);
        Class<?> clazz = getClassFromType(type);
        TradeFee fee = (TradeFee) JAXBConfigurator.createAndConfigure(clazz, feeElement);
        return fee;
    } catch (Exception e) {
        throw new RuntimeException("Trade Fees are misconfigured, xml which caused this=" + XmlUtils.toString(feeElement), e);
    }
} 
```

在上面的代码中，这`JAXBConfigurator`只是 JAXB 对象的一个​​简单包装器，用于解组：

```
public static Object createAndConfigure(Class<?> clazz, Node startNode) {
    try {
        JAXBContext context = JAXBContext.newInstance(clazz);
        Unmarshaller unmarshaller = context.createUnmarshaller();
        @SuppressWarnings("rawtypes")
        JAXBElement configElement = unmarshaller.unmarshal(startNode, clazz);
        return configElement.getValue();
    } catch (JAXBException e) {
        throw new RuntimeException(e);
    }
} 
```

最后，在上述代码中，我们得到一个 List，其中包含在 Xml 中配置的任何类型。

有没有办法让 JAXB 自动执行此操作，而无需编写代码来迭代上面的元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T00:38:59.257

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

如果您使用 MOXy 作为您的 JAXB 提供程序，那么您可以使用 MOXy 的`@XmlPaths`注释来扩展标准 JAXB`@XmlElements`注释以执行以下操作：

**费用**

```
import java.util.List;
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.*;

@XmlRootElement
public class Fees {

    @XmlElements({
        @XmlElement(type=Commission.class),
        @XmlElement(type=FINRAPerShare.class),
        @XmlElement(type=SEC.class),
        @XmlElement(type=Route.class)
    })
    @XmlPaths({
        @XmlPath("fee[@type='Commission']"),
        @XmlPath("fee[@type='FINRAPerShare']"),
        @XmlPath("fee[@type='SEC']"),
        @XmlPath("fee[@type='Route']")
    })
    private List<Fee> fees;

} 
```

**委员会**

接口的实现`Fee`将被正常注释。

```
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Commission implements Fee {

    @XmlAttribute
    private String name;

    @XmlAttribute
    private String rate;

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/03/map-to-element-based-on-attribute-value.html](http://blog.bdoughan.com/2011/03/map-to-element-based-on-attribute-value.html)
*   [http://blog.bdoughan.com/2010/10/jaxb-and-xsd-choice-xmlelements.html](http://blog.bdoughan.com/2010/10/jaxb-and-xsd-choice-xmlelements.html)
*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T00:57:56.517

您可以将 an`XmlAdapter`用于此用例。impl bleow 只处理`Commission`类型，但可以轻松扩展以支持所有类型。您需要确保`AdaptedFee`包含来自接口的所有实现的组合属性`Fee`。

```
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class FeeAdapter extends XmlAdapter<FeeAdapter.AdaptedFee, Fee>{

    public static class AdaptedFee {

        @XmlAttribute
        public String type;

        @XmlAttribute
        public String name;

        @XmlAttribute
        public String rate;

    }

    @Override
    public AdaptedFee marshal(Fee fee) throws Exception {
        AdaptedFee adaptedFee = new AdaptedFee();
        if(fee instanceof Commission) {
            Commission commission = (Commission) fee;
            adaptedFee.type = "Commission";
            adaptedFee.name = commission.name;
            adaptedFee.rate = commission.rate;
        }
        return adaptedFee;
    }

    @Override
    public Fee unmarshal(AdaptedFee adaptedFee) throws Exception {
        if("Commission".equals(adaptedFee.type)) {
            Commission commission = new Commission();
            commission.name = adaptedFee.name;
            commission.rate = adaptedFee.rate;
            return commission;
        }
        return null;
    }

} 
```

An`XmlAdapter`是使用`@XmlJavaTypeAdapter`注解配置的：

```
import java.util.List;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Fees {

    @XmlElement(name="fee")
    @XmlJavaTypeAdapter(FeeAdapter.class)
    private List<Fee> fees;

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/01/jaxb-and-inhertiance-using-xmladapter.html](http://blog.bdoughan.com/2012/01/jaxb-and-inhertiance-using-xmladapter.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T00:07:33.697

如果所有元素都被命名，我认为这是不可能的`<fee>`。即使它曾经（或现在）从维护的角度来看也会非常混乱。

您是否能够根据类型重命名各种费用元素（例如`<tradeFee>`，而不是`<fee>`）？

否则，您可以创建一个`BaseFee`包含每种可能类型的所有字段的类`<fee>`。您可以将数据解组为`BaseFee`对象列表，并在运行时将它们转换为更具体的类型，例如

```
List<BaseFee> fees = ...;
for (BaseFee fee : fees) {
    if (isTradeFee(fee)) {
        TradeFee tradeFee = toTradeFee(fee);
        // do something with trade fee...
    }
} 
```

有点破解，但考虑到它应该完成这项工作的要求。

# android - 使用计时器 - 正确的方法

> ID：15078568
> 
> 赞同：0
> 
> 时间：2013-02-25T23:31:22.057
> 
> 标签：android, performance

我正在开发一个 Android 应用程序，我需要一个计时器。我需要计时器从 15 分钟倒计时到 0 分钟，但我需要它每秒通知我一次，以便`View`用当前剩余时间更新 a。

在Android中执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T23:34:07.077

这听起来像是一个完美的案例[`CountDownTimer`](http://developer.android.com/reference/android/os/CountDownTimer.html)。

# arrays - 对整数求和的算法的运行时间

> ID：15078570
> 
> 赞同：3
> 
> 时间：2013-02-25T23:31:22.357
> 
> 标签：arrays, runtime, sum

我在执行有关运行时间的任务时遇到问题。

问题陈述是：“Isabel 有一种有趣的方法来对包含 n 个整数的数组 A 中的值求和，其中 n 是 2 的幂。她创建了一个大小为 A 一半的数组 B，并设置 B[i] = A[2i] + A[2i+1]，对于 i=0,1,…,(n/2)-1。如果 B 的大小为 1，则输出 B[0]。否则，她将 A 替换为B，重复这个过程。她的算法的运行时间是多少？

这会被认为是 O(log n) 还是 O(n)？我在想 O(log n) 因为你会继续将数组分成两半，直到你得到最终结果，我相信 O(log n) 的基础是你不遍历整个数据结构。但是，为了计算总和，您必须访问数组中的每个元素，因此我认为它可能是 O(n)。任何帮助理解这一点将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:38:18.973

正如您自己发现的那样，您确实需要访问所有元素来计算总和。所以你的提议：

> 我相信 O(log n) 的基础是你不遍历整个数据结构

不成立。您可以放心地忽略算法存在的可能性`O(log n)`。

至于是`O(n)`或不同的东西，你需要考虑作为一个整体会完成多少操作。[George Skoptsov 的回答](https://stackoverflow.com/a/15078680/520779)很好地暗示了这一点。我只想提请注意一个事实（根据我自己的经验），要确定“运行时间”，您需要考虑一切：内存访问、操作、输入和输出等。在您的简单情况下，只有查看访问（或总和的数量）可能就足够了，但在实践中，如果您不从各个角度看待问题，您可能会得到非常倾斜的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T23:39:52.993

> 我相信 O(log n) 的基础是你不遍历整个数据结构。

没有信仰或猜测的基础。在心里运行算法。`A`大小数组将有多少次递归`n`？每次递归将有多少个求和（当数组 A 的大小为 时`n`）？

*   第一次运行：`n/2`求和，`n`访问元素`A`
*   .
*   .
*   .
*   最后一次运行：`1`求和，`2`访问元素`A`

总共有多少次运行？总结一下，什么是最高的幂`n`？

# continuous-integration - 收到 SVN 提交后触发器时，Hudson 未构建项目

> ID：15078573
> 
> 赞同：1
> 
> 时间：2013-02-25T23:31:46.673
> 
> 标签：continuous-integration, hudson, build-triggers

我正在尝试设置 Hudson 持续集成服务器，以便任何 SVN 提交都会触发新构建。我在 stackoverflow 上看到了很多关于配置 SVN 服务器的问题和答案，但在配置 Hudson 方面却不多。

我在 SVN 服务器上添加了一个提交后挂钩，它将在提交时联系 Hudson。我正在使用此处描述的提交后挂钩：[http ://wiki.hudson-ci.org/display/HUDSON/Subversion+Plugin](http://wiki.hudson-ci.org/display/HUDSON/Subversion+Plugin)

但是在 SVN 提交后不会触发构建。我从上面的提交后挂钩脚本中获得了 UUID 值，并将我自己的 HTTP POST 请求发送到 Hudson 服务器：

```
http://<server>/hudson/subversion/<uuid>/notifyCommit?rev=<rev> 
```

之后哈德逊日志显示以下内容：

```
WARNING: No subversion jobs using SCM polling 
```

所以我的 HTTP POST 请求正在到达 Hudson，但 Hudson 抱怨没有配置任何作业来处理此通知。

根据上面的链接，我需要 (a) 设置 SCM 轮询（任何时间表都足够）和 (b) 允许匿名读取访问和 (c) 禁用跨站点漏洞检查。

因此，我将我的一项 Hudson 作业配置为使用 SCM 轮询进行夜间构建，并验证已禁用跨站点漏洞利用检查。我还禁用了“启用安全性”选项，这意味着（我假设）允许匿名读取访问。

然后我再次发送代表 SVN 提交通知的 HTTP POST 请求。这次系统日志中没有消息，这意味着没有 SCM 轮询的作业没有警告。但是仍然没有构建。

在我看来，Hudson 可以通过 HTTP POST 请求识别构建触发器，并且知道 SCM 轮询的作业可以接受构建触发器，但无法触发构建。

我想知道我需要做什么来解决这个问题。我是否需要启用安全性并明确允许匿名读取访问？还是启用“任何人都可以做任何事”授权选项？我是否需要以某种方式更改 SCM 轮询（当前设置为“0 2 * * *”）？

任何帮助表示赞赏。

**编辑**：我在 Tomcat 中运行 Hudson，并且 Tomcat 在 Windows XP 上作为服务启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:41:50.013

在 v3.0.0（v2.2.1 及更早版本）之前，Hudson 中的轮询功能有两个含义：

1）如果您选择轮询并放入计划，该作业将运行，在指定时间查找任何更改。该作业将忽略来自 SCM 的任何提交后挂钩，就像构建完全没有轮询的作业一样

2) 启用轮询但将实际轮询字段**留空**。这使得 Hudson 可以“被动地”轮询：即，它处于空闲状态，直到提交后触发器到达 Hudson，并且只有在那个时候才会运行构建作业。

我的建议是像您一样启用轮询，但取消时间表。让社区知道这是否可以解决您的问题。

# php - 如何将特定的 MySQL 字段值提取到定义的占位符中？

> ID：15078575
> 
> 赞同：0
> 
> 时间：2013-02-25T23:31:53.663
> 
> 标签：php, arrays, security, loops, pdo

有人可以建议我如何将 MySQL 值提取到定义的占位符中。我正在构建自定义 CMS 并坚持缺乏 PHP 知识。

我的 SQL 表：

```
`menuLinkID` smallint(5),
`menuLinkDescription` text NOT NULL,
`menuActualLink` mediumtext NOT NULL, 
```

1）Index.php（我在哪里定义函数）；

```
// Build Index page:
function IndexFunction() {
$results = array();
$results['pages'] = $data['results']; 
```

2) Include.php (我的默认模板应该填充所需的链接)

```
<div id="text1"><a href="<?php echo $menuActualLink1; ?>"><?php echo $menuLink1; ?><span>&raquo;<?php echo $menuLinkDesc1; ?></span></a></div>
<div id="text2"><a href="<?php echo $menuActualLink2; ?>"><?php echo $menuLink2; ?><span>&raquo;<?php echo $menuLinkDesc2; ?></span></a></div>
<div id="text3"><a href="<?php echo $menuActualLink3; ?>"><?php echo $menuLink3; ?><span>&raquo;<?php echo $menuLinkDesc3; ?></span></a></div> 
```

3）myClass.php（实际上完成所有工作的类）

这是我卡住的地方。我几乎设法显示所有记录，但这不是我的目标。我的目标是获取所有记录来填充我所有的占位符（所以我相信在这种情况下需要循环语句）

```
public static function getList( $numRows=1000000, $order="menuLinkID ASC" ) {
$conn = new PDO( DB_dsn, DB_Uname, DB_pass );
$sql = "SELECT SQL_CALC_FOUND_ROWS *, menuLinkID AS id FROM myTABLE
        ORDER BY " . mysql_real_escape_string($order) . " LIMIT :numRows";

$st = $conn->prepare( $sql );
$st->bindValue( ":numRows", $numRows, PDO::PARAM_INT );
$st->execute();
$list = array(); 
```

我不知道如何做到这一点。如果您能就此向我提出建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:57:08.523

虽然很难进入你的结构（这似乎很不寻常），但我会尝试。

```
public static function getList() {
    global $conn; //connect somewhere else and use one connection everywhere
    $sql = "SELECT * FROM myTABLE ORDER BY menuLinkID ASC";
    $st  = $conn->prepare( $sql );
    $st->execute();
    return $st->fetchAll();
} 
```

（您也可以在构造函数中定义 PDO 连接，从而使用`$this->conn`而不是全局）

然后在索引中

```
$data['menulinks'] = $yourClass->getList(); 
```

然后在模板中

```
<?php foreach($data['menulinks'] as $i => $row): ?>
<div id="text<?php echo $i+1; ?>">
  <a href="<?php echo $row['menuActualLink1']; ?>">
    <?php echo $row['menuLink1']; ?>
    <span>&raquo;<?php echo $row['menuLinkDesc1']; ?></span>
  </a>
</div>
<?php endforeach ?> 
```

# c# - 仅当字符串中的单词不存在时才匹配字符串

> ID：15078577
> 
> 赞同：1
> 
> 时间：2013-02-25T23:32:08.907
> 
> 标签：c#, sql, regex, negative-lookbehind

我正在尝试从 SQL 脚本中提取表名。我有以下字符串：

```
from db1.tableX tbx1 --quantity table
inner join tableY tbx2  on tbx1.xyz=tbx2.xyz 
```

我不想匹配这个字符串，因为`tabley`它没有以数据库名称为前缀。我试图做到这一点的方法是在数据库名称之前的字符串中检测单词“on”。

我的正则表达式匹配`tablex`但也匹配`tbx1`，我不希望我的表达式匹配。

我希望它只在这种情况下匹配。

```
from db1.tableX tbx1 --quantity table
inner join db1.tableY tbx2 on tbx1.xyz = tbx2.xyz 
```

我的正则表达式应该给我`tableX`，`tableY`因为它们以数据库名称为前缀。

这是我的表达：

```
(insert\s+into|from|inner\s+join|left\s+outer\s+join|join)\s+[\sa-zA-Z0-9_$#-]*\.\s*(?<table>[a-zA-Z0-9_]+)(?=\s+[a-zA-Z0-9_$#-]+)* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:09:59.900

你可以简化你的表达

```
(?<=\b(from|join)\s+[a-zA-Z0-9_$#-]*\.\s*)[a-zA-Z0-9_]+ 
```

它将直接产生表名，而不必使用命名组。我正在使用模式

```
(?<=prefix)find 
```

这仅返回“查找”部分作为匹配值。作为前缀，我使用“from”或“join”，后跟数据库名称，点和可能的空格。

`\b`是单词的开头或结尾。

最后一部分`[a-zA-Z0-9_]+`是表名。

是否有内连接、外连接等都没有区别，所以我放弃了这种区别。

评论很难被发现，因为它们可以包含任何东西并且可以出现在任何地方。此外，您还有两种类型的评论`-- Until end of line`和`\* ... *\`.

您可以尝试检测这样的评论和空格

```
(\s|--.*?$|\\\*.*?\*\\)+ 
```

请注意，退格和星号必须被转义，所以`\*`变得`\\\*`和`*\`变得`\*\\`。

`$`表示行尾。`?`after`.*`确保不会一次跳过多个注释，从而跳过它们之间的有意义的文本。

这在大多数情况下都有效；但是，类似结构的注释可以包含在字符串文字中：`SELECT 'hello -- world' AS greeting FROM ...`. 这不是评论！如果没有对 SQL 文本的完整语法分析，您将无法涵盖所有​​可能的情况。但是你不能用正则表达式来做到这一点。正则表达式有其局限性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:31:54.580

*一步步：*

1) [http://regexr.com?33tto](http://regexr.com?33tto)

我不知道你为什么在比赛结束时放那个前瞻。我认为你不需要它，所以我删除了它。

2) [http://regexr.com?33ttr](http://regexr.com?33ttr)

现在我们解决您指出的问题。问题是在您的数据库名称匹配中`[\sa-zA-Z0-9_$#-]*`，您已将空格作为有效字符包含在内。我也删除了那个。

3) [http://regexr.com?33ttu](http://regexr.com?33ttu)

这是期望的结果吗？

# mysql - 如何显示一个表中的所有记录，即使它们与 WHERE 子句与 JOIN 不匹配

> ID：15078581
> 
> 赞同：0
> 
> 时间：2013-02-25T23:32:34.370
> 
> 标签：mysql, join, count

我有一个咨询我试图实现的问题：

```
SELECT [columns] FROM table1 LEFT/RIGHT JOIN table2 ON table1.id_user = table2.id  [WHERE clause] GROUP BY column 
```

我希望这个咨询做的一个例子如下所示：

在 table1 中有这些记录：

> 编号 | id_user | 用户 | 价值
> 
> 1 | 1 | 名称1 | 10
> 
> 2 | 1 | 名称1 | 10
> 
> 3 | 1 | 名称1 | 11
> 
> 4 | 1 | 名称1 | 10
> 
> 5 | 2 | 名称2 | 11
> 
> 6 | 2 | 名称2 | 11

这在表 2 中：

> 编号 | 用户
> 
> 1 | 名称1
> 
> 2 | 名称2

我想获取给定值的每个用户存在多少条记录，例如，如果我们查找值 10 我想得到：

> 名称1 | 3
> 
> 名称2 | 0

我已经尝试使用 LEFT 和 RIGHT JOIN 但没有用，我只是得到了这个，因为这是我猜想的唯一匹配 WHERE 子句的记录：

> 名称1 | 3

而不是 name2 的结果。

在把我的问题带到这里之前，我一直没有成功地寻找解决方案，希望有人可以帮助我解决这个问题:)

抱歉英语不好。我非常感谢您能提供的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:37:38.367

不是最有效的查询，但这应该可以

```
select user, (select count(*) from table1 b where b.id_user=a.id and b.value=10)
from table2 a 
```

通常，因为这个查询效率太低，我会在客户端加入结果，而不是尝试在 sql 中进行。这个过程会是这样的。

1.  从表 2 中选择 *
2.  选择 id_user, count(*) from table1 where value=10
3.  遍历查询 #1 并将结果存储在一个可能看起来像的对象中`{'user': name, 'count': 0}`
4.  遍历查询 #2 并更新步骤 #3 中的对象。

它总是取决于结果集的大小，可能还取决于所涉及的硬件，但通常这会更快，尽管在代码中编写起来相当复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:42:53.380

尝试这个。

```
SELECT t2.user,SUM(CASE WHEN t2.id=t1.id_user THEN 1 ELSE 0 END) AS TotalRecords 
FROM table2 t2
LEFT JOIN table1 t1 ON t2.id =t1.id_user
GROUP BY t2.id 
HAVING t1.value=10 
```

# c - 使用 strcat 的 C 程序在运行时不断给出意外的输出

> ID：15078585
> 
> 赞同：1
> 
> 时间：2013-02-25T23:32:40.467
> 
> 标签：c

我正在尝试创建一个能够在 k 点旋转的程序，定义为“请求的旋转”。

示例：rotate("derp", 3) => pder

我的这个函数的代码叫做旋转，如下所示。它接受我的 main 中定义的 char 指针数组 startString 和旋转次数（一个 long int，因为我使用 atol 从命令行获取整数）。

```
int rotate(char *startString, long int rotations) {
    char *doubleString = malloc((sizeof startString * 2) + sizeof(char));
    strcat(doubleString, startString);
    strcat(doubleString, startString);
    long int stringSize = (sizeof startString - 1);
    long int breakIndex = (rotations % stringSize);
    char* rotatedString = malloc((sizeof startString + sizeof(char)));

    int i;

    for (i = 0; i < stringSize + 1; i++) {
        char pushedCharacter = doubleString[(int)breakIndex + i];
        strcat(rotatedString, &pushedCharacter);
    }

    printf("%s\n", rotatedString);
    printf("%s\n", doubleString);
    return 0;

} 
```

但是，当我输出时，如果我使用类似 doghouse 的东西，我会得到一个奇怪的 ?4??? 在旋转字符串的输出前面。它也完全不适用于derp，而是用相同的?4???打印出pderp 在前。这个运行时错误是在哪里引起的？

**编辑**

给出的答案是正确的，但目标是能够接受大于给定字符串长度的旋转。该代码如下：

```
void rotate(char * startString, long int rotations) {
    long int stringSize = strlen(startString);

    long int breakIndex = (rotations % stringSize);
    char *rotatedString = malloc(stringSize + 1); //counting extra char for null terminator
    strncpy(rotatedString, startString + breakIndex, stringSize - breakIndex);
    strncpy(rotatedString + stringSize - breakIndex, startString, breakIndex);
    rotatedString[stringSize] = '\0'; // for the ending null character of the char array

    printf("Result: %s\n", rotatedString);
    free(rotatedString); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:46:11.740

您的双字符串初始化分配的内存太少，因为您使用的是 sizeof(startstring)，它是指针的大小，而不是 strlen(startstring) + 1，它是包含终止 NUL 字符的字符串的长度。这意味着您的代码正在用有趣的结果覆盖缓冲区的末尾。尝试以下操作：

```
void rotate(char * startString, int rotation) {
    int len = strlen(startString);
    if (len == 0 || len <= rotation)
        return;

    char *rotatedString = malloc(len + 1); /* One extra char for the terminating NUL */
    strncpy(rotatedString, startString + rotation, len - rotation);
    strncpy(rotatedString + len - rotation, startString, rotation);
    rotatedString[len] = '\0';

    printf("%s\n", rotatedString);
    free(rotatedString);       /* don't leak memory! */
} 
```

# jquery-ui - 对话框的 z-index

> ID：15078587
> 
> 赞同：1
> 
> 时间：2013-02-25T23:32:53.890
> 
> 标签：jquery-ui, jquery-ui-dialog

有许多帖子表明可以通过将参数传递给 jQuery UI 对话框的 z-index 来设置`zIndex`，`.Dialog()`包括

[最后一个 jQuery 模态对话框 z-index 覆盖初始模态 z-index](https://stackoverflow.com/questions/6359223/last-jquery-modal-dialog-z-index-overrides-initial-modal-z-index)

但是，该参数未在 jQuery UI API 文档中列出

[http://api.jqueryui.com/dialog/](http://api.jqueryui.com/dialog/)

如果我无论如何设置它，我的对话框的 z-index 不受影响。

如何设置对话框的 z-index？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T01:22:45.143

事实证明，我引用了为旧版本的 jQuery UI 构建的自定义 jQuery UI 主题。

引用我现在使用的版本的基本主题解决了这个问题。

要将自定义主题升级到当前版本，请参阅

[如何升级自定义 jQuery UI 主题？](https://stackoverflow.com/questions/3802447/how-to-upgrade-a-custom-jquery-ui-theme)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:36:54.297

我认为最好在基于选择器的 CSS 中执行此操作，例如：

```
#dialog {
    z-index: 100000000;
} 
```

或者，在 js 中：

```
$('#dialog').css('z-index','1000000'); 
```

还是需要设置动态 z-index 值？

# c# - 为什么 Visual Studio 没有一种简单的方法来重新创建/导出项目的“整体”

> ID：15078590
> 
> 赞同：2
> 
> 时间：2013-02-25T23:33:14.007
> 
> 标签：c#, visual-studio

正如标题所说，为什么？我希望能够以仍然可以在不同位置打开它的方式传输或保存我的 c# 表单项目。我知道冲突的框架或 Visual Studio 版本会阻止这种情况发生，尽管我可以保证我的 .NET 和 VS 版本对于两个住宅都是相同的。

一般来说，我在visual studio打开项目时出现错误，但是，当我想编辑表单的任何部分时，我注意到Form1.CS（包括From1.CS）下的所有文件都有锁并且无法找到. 我意识到该项目遵循这些文件在 IDE 中值得注意的路径，有没有办法可以将 Visual Studio 定向到这些“丢失”的文件？或者，在将项目保存到原始 PC 之前，我是否需要调用一些措施？

我即将结束我的第一个编程年，我想澄清我可能要承担的任何错误，或者我可以做些什么来防止此类错误，以免以后遇到类似的冲突。在研究了类似的说法后，我非常清楚我需要完成的事情的复杂性可能超出了我目前的理解。尽管如此，帮助确实是帮助，我会尽力做到最好。

此外，由于压缩文件仍然不包含我的表单文件，我导出的模板没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:36:47.253

特别是如果下面的文件`Form1.cs`丢失，您无法复制`Form1.designer.cs`和/或`Form1.resx`.

一般来说，项目的结构使得所有引用的源文件都在项目的根文件夹中或之下。

如果您采用这种方法，则复制带有子文件夹的整个文件夹就足以确保所有源文件都可用于项目（或者更好...将所有源文件检查到根目录中或根目录下的版本控制中，然后将它们签出 /让他们在新电脑上）。

如果它引用了新计算机上不可用的程序集（例如安装在 GAC 中的东西，或通过路径引用的东西），您仍然可能会遇到构建项目所需的缺失组件。如果你使用[NuGet](http://nuget.org/)管理第三方依赖项，它会为你在新计算机上下载缺失的包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:37:35.133

我不确定您到底在做什么来在计算机之间传输文件，但您似乎可以受益于像[Subversion](http://subversion.tigris.org)、[Mercurial](http://mercurial.selenic.com)或[Git这样的](http://git-scm.com)[源代码控制](http://en.wikipedia.org/wiki/Revision_control)系统以及匹配的网络提供商来存储您的源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T23:38:37.470

我的代码可移植性从来没有任何问题，我简单地将所有代码放在 Dropbox 中，并以这种方式在计算机之间同步。

只要您的所有引用都设置为复制到项目文件夹并且您没有使用任何硬编码路径，这应该不是问题。

# sql - 无法通过脚本将用户添加到 db_datareader

> ID：15078596
> 
> 赞同：12
> 
> 时间：2013-02-25T23:33:37.290
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我有以下脚本：

```
ALTER ROLE [db_datareader] ADD MEMBER [DomainGroup123] 
```

当我对 SQL Server 2008 R2 运行此程序时，我收到此错误：

> 消息 156，级别 15，状态 1，第 1 行
> 关键字“添加”附近的语法不正确。

我在网上查看过，并找到了使用此确切语句的[示例（但使用不同的用户。）](http://sql-articles.com/articles/general/contained-database-sql-server-2012/)

我已经仔细检查了登录是否存在并且是我正在使用的数据库上的有效用户。我也有服务器上的 SA 权限。

我在发什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-25T23:41:14.907

使用 sp_addrolemember。

```
EXECUTE sp_addrolemember db_datareader, 'UserName' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-25T23:40:51.530

找到了这个答案：[https ://stackoverflow.com/a/456365/16241](https://stackoverflow.com/a/456365/16241)

这表明我可以像这样运行它：

```
exec sp_addrolemember db_datareader, [DomainGroup123] 
```

我这样做了，它奏效了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-22T08:42:41.390

我注意到根据服务器的版本，我需要执行以下操作之一。

```
alter role RoleName add member UserName 
```

或者

```
execute sp_addrolemember RoleName, UserName 
```

我正在考虑将我的方法从试错法更改为某种有条件的方法，但是（a）在我的情况下很少执行此操作，并且（b）我现在有点懒惰。

# c# - Windows Phone - 从 DLL 显示 UI

> ID：15078597
> 
> 赞同：0
> 
> 时间：2013-02-25T23:33:39.790
> 
> 标签：c#, windows-phone-7, xaml

出于研究目的，我需要知道在程序执行期间是否可以从服务器下载 dll 并在 dll 中调用图形用户界面。

在下载和加载程序集时我应该考虑哪些步骤？

1.  下载
2.  将文件解析为 DLL？
3.  装配.加载（）？
4.  呼叫界面

我的目标是为几个未知任务（在启动时）为许多 thik-clients 编程，希望有人理解我的问题并可以给我一个建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:47:20.090

我认为你的想法不符合微软设定的[App 认证要求](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184843%28v=vs.105%29.aspx)，会违反以下规则：

2.1 从 Windows Phone 商店获取时，您的应用程序必须功能齐全。

2.3 您的应用不得危害 (a) Windows Phone 设备或 (b) Windows Phone Store 的安全性或功能，并且不得有可能对 Windows Phone 用户造成伤害。

4.1 程序集和数据文件必须打包为 XAP 文件包。Visual Studio 生成必要的 XAP 包和清单文件。

5.1.4 应用程序在提交到 Windows Phone 商店时必须是可测试的。如果由于任何原因（包括但不限于以下各项）无法测试您的应用程序，则您的应用程序可能无法满足此要求。

然后我什至没有提到关于安全的规则（第 5.4 章）。

# ios - 修改 MPMoviePlayerViewController 上允许的方向（从 UIWebView 调用）。iOS 5 和 iOS 6

> ID：15078600
> 
> 赞同：2
> 
> 时间：2013-02-25T23:33:49.490
> 
> 标签：ios, mpmovieplayercontroller

我有一个在 iOS 5 和 6 上运行的应用程序。这个应用程序必须只能在纵向模式下运行（已经完成）。但在这个应用程序中，我必须展示和播放一些 YouTube 视频。

为此，我使用 a`UIWebView`来显示 YouTube 视频的缩略图。所以，我有一个很好的缩略图，当用户触摸它时，应用程序会自动显示`MPMoviePlayerController`正在播放的视频。几乎所有的都是完美的...

我的问题是我需要`MPMoviePlayerController`支持两个方向（但只有这个控制器）。我怎么能做到这一点？

非常感谢，

卡洛斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:49:54.627

1.  将所需的方向添加到您的 Info.plist
2.  子类 MPMoviePlayerViewController
3.  覆盖 shouldAutorotate 和 supportedInterfaceOrientations 以分别返回 YES 和您希望支持的所有方向。

# ruby-on-rails - 手动关联模型，Rails 无法理解来自第二个模型的数据。为什么？

> ID：15078602
> 
> 赞同：0
> 
> 时间：2013-02-25T23:33:50.560
> 
> 标签：ruby-on-rails

我创建了 2 个模型：用户和朋友。用户有_许多朋友和朋友属于_to 用户。

在这两个模型中，我手动将 foreign_key 设置为 = uid。因此我假设当我查找 current_user.friends 时，它应该列出所有拥有friend.uid = current_user.uid 的朋友。然而，这种情况并非如此。

我相信这可能与我对 current_user 的定义有关。

我对 current_user 的定义在我的 sessions_helper 中为：

```
def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
end 
```

注意会话[:user_id]。当我亲自登录时，我的 user_id 是 1。

我注意到，当我拉`<%= current_user.friends>`入主视图时，它返回一个空白数组，这很奇怪，因为我可以在 SQLite 数据库中看到当前有 1 个用户，其 uid 为 12345，并且朋友模型中有超过 100 个条目uid 也是 = 12345。因此，我期望超过 100 个朋友的数组。查看我的服务器日志，它显示：

`SELECT "users".* FROM "users" WHERE "users"."id" =? LIMIT 1 <-[0m [['id',1]]` `SELECT "friends".* FROM "friends" WHERE "friends"."uid" =1 LIMIT 30 offset 0`

这很重要，因为请注意它正在寻找friends.uid =1。我假设它与 session[:user_id] 相关联，但我不明白为什么它不寻找`current_user.uid`尽管我`uid`在两个表中专门关联为 foreign_key 。

我究竟做错了什么？

用户模型：

```
class User < ActiveRecord::Base
   attr_accessible :name, :provider, :uid
   has_many :friends, :foreign_key => "uid" 
```

朋友模型

```
class Friend < ActiveRecord::Base
   attr_accessible :friendid, :name, :uid
   belongs_to :user, :foreign_key => "uid" 
```

请注意，在登录时在我的会话控制器中，我使用 OMNIAUTH 并设置`session[:user_id] = user.id`是否相关：Sessions_controller：

```
def create
    auth = request.env["omniauth.auth"] 
    user = User.find_by_provider_and_uid(auth["provider"], auth["uid"]) || User.create_with_omniauth(auth)
    session[:user_id] = user.id
    redirect_to root_url, :notice =>"Signed in!"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:57:02.313

对于遇到此问题的任何人。解决方案是在用户模型中设置primary_key = 'uid'，在朋友模型中设置:foreign_key =>'uid'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:46:50.630

你的设置有问题。这个说法

```
has_many :friends, :foreign_key => "uid" 
```

在用户模型中，匹配`friends.uid`到`user.id`。`friends.uid`是与用户的主键（即 id 列）匹配的外来词。这里也一样，

```
belongs_to :user, :foreign_key => "uid" 
```

`uid`如果你想让它工作，你需要将用户的主键设置为。你有什么理由要这样做吗？

# apache-flex - Flex 4.6 阿拉伯语（回历）日历日期选择器组件

> ID：15078603
> 
> 赞同：1
> 
> 时间：2013-02-25T23:33:56.987
> 
> 标签：apache-flex, calendar, locale, arabic, hijri

我正在开发一个需要阿拉伯语 (Hijri) 日历/日期选择器的 Flex 项目，尽管迄今为止我还没有找到任何此类组件并且无法令人满意地自定义现有的 Flex 组件。

我已经阅读了如何通过 DateTimeFormatter 使用 locale 属性将日期从公历转换为回历以指定语言/日历类型（[http://blogs.adobe.com/globalization/en/formatting-with-alternate-calendars -in-flex/](http://blogs.adobe.com/globalization/en/formatting-with-alternate-calendars-in-flex/)），但这似乎不适用于我最初用于输入和日期选择器的 DateField 组件。

我还阅读了有关使用 DateField 组件上的 locale 属性的其他问题，该属性建议仅修改日期和月份名称（[Flex 4.5，为 datefield 设置区域设置不起作用](https://stackoverflow.com/questions/6823473/flex-4-5-setting-locale-for-datefield-does-not-work)），但这对于具有与公历计算日、月和年的不同方式。更不用说需要从右到左排序日期。

由于此 SWF 将嵌入到 PDF 中，因此我无法通过使用外部日历并将数据读回应用程序来解决它。

有谁知道我如何在 Flash/Flex 中实现 Hijri 日历？

# python - Python的类变量和继承

> ID：15078606
> 
> 赞同：1
> 
> 时间：2013-02-25T23:34:07.690
> 
> 标签：python, design-patterns, inheritance, class-variables

我这里有一些用于单位转换程序的代码；`NameError`由于 Python 的继承顺序，它会抛出。

```
class _Units :
    _metric_unit_names   = {'metric'}
    _standard_unit_names = {'standard'}

class TemperatureUnits (_Units) :
    _metric_unit_names.update({'celsius', 'c'})
    _standard_unit_names.update({'fahrenheit', 'f'})

TemperatureUnits() 
```

我想知道这种情况下的“最佳”技术是什么。我可以创建`_metric_unit_names`和`_standard_unit_names`实例变量，但是在每个实例化上创建一个新集合似乎很浪费。在这种特殊情况下，共享行为似乎也是最佳选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:38:39.293

最好的做法是不要将属性定义为类的静态属性。你所追求的是这样的：

```
class _Units :
    def __init__(self):
        self._metric_unit_names   = {'metric'}
        self._standard_unit_names = {'standard'}

class TemperatureUnits (_Units) :
    def __init__(self):
        _Units.__init__(self)
        self._metric_unit_names.update({'celsius', 'c'})
        self._standard_unit_names.update({'fahrenheit', 'f'})

TemperatureUnits() 
```

在外部定义属性`__init__`会使它们成为类的静态成员（即`_Units._metric_unit_names`）。在其中定义它们`init`会使它们成为类实例的属性（即`my_units_instance._metric_unit_names`）。

# javascript - Javascript for循环在字符串中查找URL并更改为链接？

> ID：15078610
> 
> 赞同：4
> 
> 时间：2013-02-25T23:34:21.467
> 
> 标签：javascript, string, url, hyperlink

广泛搜索以回答我的问题，但一切似乎都非常复杂。我是 Javascript 的新手，我希望得到这个问题的帮助，而不是仅仅回答这个问题（如果你觉得有必要给出一个直接的答案，那么分解会很好）。

我有一个从 HTML 文本区域引入字符串的函数。我需要在字符串中搜索任何链接，因此，搜索“www”。或“http://”。然后我需要遍历该部分，直到链接结束（或出现空格）。这需要保存为变量，然后`"<a href = newVar>"`需要在开头放置a，然后与之后的新变量一起，然后以`</a>`标签结束。

字符串中可能有许多 URL。

我必须将其作为 for 循环来执行。

我有一个起始代码，但我超级卡住了！任何帮助是极大的赞赏！

```
//Checking for URL's in the message string
function checkLink(text)
{
    for (var i=0; i == text.length; i++)
    {
        var currentChar = text.charAt(i);
        if(text.charAt(i) == "w" && text.charAt(i+1) == "w" && text.charAt(i + 2) ==  "w" && text.charAt(i + 3) == ".")
        {
            //Not to sure what to do here
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:09:40.420

到目前为止，正则表达式是最好的方法。但是，由于这是出于教育目的，这里有一种在字符串中查找 URL 的方法。这不是一个正确的答案，但显示了概念。

假设您有以下文本：

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。Duis faucibus dui nec est auctor 。Nullam vulputate，augue non auctor rhoncus，urna urna tempus velit，non tincidunt nibh orci et elit。整数 sed nibh massa，eget 前庭 velit。[www.Nulla.com](http://www.Nulla.com) in elit vitae massa egestas accumsan ac semper nisl。Curabitur viverra lorem 在 urna porttitor 坐 amet aliquam sapien [http://imperdiet.org](http://imperdiet.org)。Pellentesque ultricies sagittis malesuada。Mauris lobortis aliquam felis 坐在前庭。在 vitae faucibus lectus 中。Donec consectetur ante nisi。Lorem ipsum dolor sit amet, consectetur adipiscing elit。暂停潜力。

里面有两个链接。代码看起来像这样。

以某种方式获取变量中的文本，我们将其称为`text`.

```
var text = '<that text above>'; 
```

现在我们将文本拆分为一个名为`words`.

```
var words = text.split(' '); 
```

我们将在这个例子中产生新的输出，所以我们需要一个字符串变量来保存它。

```
var new_text = ''; 
```

您似乎了解循环，但这正是大多数循环通过数组的样子。

```
for (var i=0; i < words.length; i++) {
    var word = words[i]; 
```

我们检查这个“单词”的开头（在这种情况下，它指的是由空格分隔的每个文本部分）是否包含我们的任何一个前缀。实际上 bit.ly 是一个有效的 URL。正则表达式比我们更好地处理这个问题。

```
 if (word.indexOf('http://') === 0 || word.indexOf('www.') === 0) { 
```

我们通过放置链接语法来更改单词的值。我使用 Markdown，但你可以做 HTML，或者任何你喜欢的东西。

```
 word = '[A LINK]' + '(' + word + ')';
    } 
```

这是我们在脚本顶部讨论的输出。只是继续在上面添加东西，不管它们是否被修改。问题是我们的单词后面可能有 1 或 94 个空格，但我们总是放回一个。正则表达式具有更好地处理这个问题的功能。

```
 new_text += word + ' ';
} 
```

`new_text`现在看起来像这样。

```
Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
Duis faucibus dui nec est auctor auctor. Nullam vulputate, augue 
non auctor rhoncus, urna urna tempus velit, non tincidunt nibh 
orci et elit. Integer sed nibh massa, eget vestibulum 
velit. [A LINK](www.Nulla.com) in elit vitae massa egestas
accumsan ac semper nisl. Curabitur viverra lorem in urna 
porttitor sit amet aliquam sapien [A LINK](http://imperdiet.org.) 
Pellentesque ultricies sagittis malesuada. Mauris lobortis aliquam 
felis sit amet vestibulum. In vitae faucibus lectus. Donec 
consectetur ante nisi. Lorem ipsum dolor sit amet, 
consectetur adipiscing elit. Suspendisse potenti. 
```

在堆栈溢出时，如下所示：

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。Duis faucibus dui nec est auctor 。Nullam vulputate，augue non auctor rhoncus，urna urna tempus velit，non tincidunt nibh orci et elit。整数 sed nibh massa，eget 前庭 velit。[elit](http://Nulla.com) vitae massa egestas accumsan ac semper nisl 中的链接。Curabitur viverra lorem 在 urna porttitor 坐 amet aliquam sapien [A LINK](http://imperdiet.org.) Pellentesque ultricies sagittis malesuada。Mauris lobortis aliquam felis 坐在前庭。在 vitae faucibus lectus 中。Donec consectetur ante nisi。Lorem ipsum dolor sit amet, consectetur adipiscing elit。暂停潜力。

注意到问题了吗？分裂技术看到' [http://imperdiet.org](http://imperdiet.org) '。作为网址。用户的意思是让 ' [http://imperdiet.org](http://imperdiet.org) ' 成为 url，并在它之后有一个句点。正则表达式还允许您避免这种情况。

该演示包含所有代码，中间没有我的评论。

## [演示](http://jsfiddle.net/RxGfT/)

如果你想了解正则表达式，我推荐[这个网站](http://www.regular-expressions.info/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T00:11:46.567

我建议遍历每个单词，用空格分隔。

```
//split string by any space characters
textarea.value.split(/\s/).reduce(function (prev, cur) {
    //word starts with http; convert to link
    if (cur.indexOf('http') === 0) {
        cur = '<a href="' + cur + '">' + cur + '</a>';
    }
    //word starts with www; convert to http://+link
    else if (cur.indexOf('www') === 0) {
        cur = '<a href="http://' + cur + '">' + cur + '</a>';
    }
    //append space to display properly
    return prev + cur + ' ';
}, ''); 
```

这个解决方案并不完美，因为没有保留确切的空间，它会寻找 just`http`和 not `https?://`，但我会留给您解决这些问题。

[http://jsfiddle.net/98gMb/](http://jsfiddle.net/98gMb/)

# android - 根据异步任务的结果移动到多个新活动的正确方法

> ID：15078611
> 
> 赞同：0
> 
> 时间：2013-02-25T23:34:25.367
> 
> 标签：android, android-asynctask

我已经在我的 AsyncTask 中与服务器进行了一些通信。现在，根据该数据，我想转到屏幕 A 或屏幕 B。正确的方法是什么？

我应该在 postExcute 部分调用新活动吗？我目前在启动画面上。

```
private class CheckLoginDetails extends AsyncTask<Void, String, String> {

        protected void onPreExecute() {
                //does stuff before excuting code
        }

        //does the main operation
        protected String doInBackground(Void... params)  {

            publishProgress("10", "Checking Login Details Exist . . .");

            if(checkForLogin()){    
                //validate with DB
                publishProgress("20", "Logging in, verifying . . .");
                if(sendforVerif()){
                    publishProgress("100", "You Are Logged In!");

                }else{                  
                    publishProgress("100", "Error Logging In.");

                }

            }else{
                //login or registration required
                publishProgress("100", "Login Required . . .");
            }

            return null;
        }

        //Update Progress       
        protected void onProgressUpdate(String... values) {
            mProgress.setProgress(Integer.parseInt(values[0]));
            statusReadout.setText(values[1]);
        }

        //Update UI with results
        protected void onPostExecute() {
            Intent intent = new Intent(SplashScreen.this, MenuScreen.class);
            SplashScreen.this.startActivity(intent);
        }

    } 
```

我不认为这是正确的，而且它不起作用！？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:37:58.727

目前，您没有覆盖将代码更改为的`onPostExecute`方法：`AsyncTask`

```
private class CheckLoginDetails extends AsyncTask<Void, String, String> {

@Override
    protected void onPreExecute() {
            //does stuff before excuting code
    }

    //does the main operation
@Override
    protected String doInBackground(Void... params)  {

             // your code here...
        return null;
    }

    //Update Progress 
@Override     
    protected void onProgressUpdate(String... values) {
  // your code here...
    }
   @Override
    protected void onPostExecute(String result ) {
        Intent intent = new Intent(SplashScreen.this, MenuScreen.class);
        SplashScreen.this.startActivity(intent);
    }

} 
```

# java - java.lang.NoClassDefFoundError: org/hibernate/criterion/Criterion

> ID：15078614
> 
> 赞同：0
> 
> 时间：2013-02-25T23:34:40.553
> 
> 标签：java, mysql, spring-mvc, tomcat, tomcat7

我在 eclipse Juno、Spring 3.1.1、hibernate 4.1、tomcat 7 和 mySQL 中使用 STS。

我创建了一个简单的 MVC 模板项目。我的目的是用户将一些数据输入到表单中，这些数据将保存在数据库中。

我创造了：

**网络层：**

1.  简单的形式。
2.  从表单接收数据并将其传递给服务层的控制器。

**服务层：**

一个包含 DAO 字段并操作 dao 方法的服务类。

**数据访问层：**

1.  一个不与数据库连接的模拟 DAO 实现。
2.  不与数据库连接的 Real DAO 实现。

当我使用模拟 DAO 实现检查系统时，一切正常 - 从 Web 层到模拟 DAO。

但是当注入真正的 DAO 时，我只是得到一个 404 错误，并且数据库中没有发生任何事情。

我将只展示 DAO 实现和 root-context.xml，因为这是我认为问题所在。

我的 DAO 实现：

```
@Repository
public class Presentation_page_dao_hibernate_Impl implements Presentation_page_dao {

    private  SessionFactory sessionFactory;

    @Autowired
    public Presentation_page_dao_hibernate_Impl(SessionFactory sessionFactory) {
        this.sessionFactory=sessionFactory;
        System.out.println("Hi! i'm in ActionDao_HibernateImpl constructor");
        }

    private Session currentSession() {
        return sessionFactory.getCurrentSession();
    }

    public void create(Presentation_page pp) {  
        currentSession().beginTransaction();
        currentSession().save(pp);
        currentSession().getTransaction().commit();
        currentSession().close();       
    }

    public Presentation_page read(int pageid) throws PresentationPageNotFoundException {

        currentSession().beginTransaction();

        Criteria criteria=currentSession().createCriteria(Presentation_page.class);

        criteria.add(Restrictions.eq("page_id", pageid));
        List<Presentation_page> list_of_pages=criteria.list();

        currentSession().getTransaction().commit();
        currentSession().close();

        for(Presentation_page pp:list_of_pages) {
            if (pp.getPage_id()==pageid){
                return pp;
            }
        }
        return null;
    }

    public void update(Presentation_page pp) throws PresentationPageNotFoundException {

        currentSession().beginTransaction();
        currentSession().update(pp);
        currentSession().getTransaction().commit();
        currentSession().close();   

    }

    @Override
    public void delete(Presentation_page  pp) throws PresentationPageNotFoundException {

        currentSession().beginTransaction();
        currentSession().delete(pp);
        currentSession().getTransaction().commit();
        currentSession().close();
    }

} 
```

这是我的根上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xsi:schemaLocation="http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">    

    <!-- Root Context: defines shared resources visible to all other web components -->

    <!-- For annotations -->
    <context:component-scan 
        base-package="my.topLevel.pack">
    </context:component-scan> 

    <import resource="hibernate2.xml"/>

</beans> 
```

这是我的hibernate.xml：

```
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <!-- Database connection settings -->
        <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="connection.url">jdbc:mysql://localhost:3306/spring_presentation</property>
        <property name="connection.username">rotemya</property>
        <property name="connection.password">*******</property>

        <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">1</property>

        <!-- SQL dialect -->
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>

        <!-- Enable the second-level cache  -->
        <property name="cache.provider_class">org.hibernate.cache.internal.NoCacheProvider</property> 

        <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">true</property>

        <!-- Drop and re-create the database schema on startup -->
        <property name="hbm2ddl.auto">create</property>

        <!-- Names the annotated entity class -->
        <mapping class="my.topLevel.pack.Domain"/>

    </session-factory>
</hibernate-configuration> 
```

我对 pom.xml 有以下依赖项：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>my.topLevel</groupId>
    <artifactId>pack</artifactId>
    <name>SpringSTS_Sample_Project</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>
    <properties>
        <java-version>1.6</java-version>
        <org.springframework-version>3.1.1.RELEASE</org.springframework-version>
        <org.aspectj-version>1.6.10</org.aspectj-version>
        <org.slf4j-version>1.6.6</org.slf4j-version>
    </properties>
    <dependencies>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                 </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.0.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>3.0.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.eclipse.persistence</groupId>
            <artifactId>javax.persistence</artifactId>
            <version>2.0.0</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.13</version>
        </dependency>
    </dependencies>

</project> 
```

这是我的休眠 jar 文件：

![在此处输入图像描述](../Images/cce9a66944c726f5f0938d0c932f5005.png)

我收到以下错误：

**java.lang.NoClassDefFoundError: org/hibernate/criterion/Criterion**

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:41:32.677

好的 - 问题解决了！

我从休眠库文件（我创建的）中删除了所有 jar，并通过 Maven（pom.xml 文件）将它们全部添加。错误消失了..

# php - 对表PHP中的行数据进行排序？

> ID：15078619
> 
> 赞同：0
> 
> 时间：2013-02-25T23:35:25.787
> 
> 标签：php, sql, echo

我有一个表从单个查询回显到我们数据库中的一个表，我让它回显下表；

[http://www.skulldogs.com/dev/testview.php](http://www.skulldogs.com/dev/testview.php)

我希望它在“mainToon”名称匹配的正确绿色行下对“黄色”行进行排序，例如：

高压

--真正的麦考伊

--cpt钩子

里亚萨尔

-- 淡水河谷

我回显上述页面的代码是；

```
<?php

  $result = mysql_query("SELECT * FROM `members`");
  echo "<table border='1'>
  <tr>
  <th>Character ID</th>
  <th>Name</th>
  <th>MainToon</th>
  <th>toonCategory</th>
  </tr>";
    while ($row = mysql_fetch_array($result)) {
        $characterID = $row['characterID'];
        $name = $row['name'];
        $startDateTime = $row['startDateTime'];
        $logonDateTime = $row['logonDateTime'];
        $logoffDateTime = $row['logoffDateTime'];
        $location = $row['location'];
        $role = $row['role'];
        $vouchedBy = $row['vouchedBy'];
        $positionHeld = $row['positionHeld'];
        $remarks = $row['remarks'];
        $afkNotice = $row['afkNotice'];
        $toonCategory = $row['toonCategory'];
        $mainToon = $row['mainToon'];
        $watch = $row['watch'];

    if ($toonCategory == 'Main Toon') {
        echo "<tr bgcolor='#00FF00'>"; }
    else {
        echo "<tr bgcolor='#FFFF00'>"; }
    echo "<td>" . $characterID . "</td>";
    echo "<td>" . $name . "</td>";
    echo "<td>" . $mainToon . "</td>";
    echo "<td>" . $toonCategory . "</td>";
    echo "</tr>";
  }
    echo "</table>";

?> 
```

目前我不会回显其他数据，直到我能弄清楚如何相应地显示此表。可以这样做吗？

这就是我想要显示表格的方式；

[http://www.skulldogs.com/dev/mockup.php](http://www.skulldogs.com/dev/mockup.php)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T23:37:16.090

在你的 sql 中添加一个`ORDER BY`子句：

```
SELECT * FROM `members` ORDER BY toonCategory; 
```

如果“Main Toon”上下还有其他值，您可以通过布尔值排序：

```
SELECT * FROM `members` ORDER BY toonCategory = 'Main Toon' DESC; 
```

编辑：

现在，我看到了您提出示例后的要求，请尝试：

```
SELECT * FROM `members` ORDER BY CONCAT(MainToon, Name); 
```

如果空格是空字符串或：

```
SELECT * FROM `members` ORDER BY COALESCE(MainToon, Name) DESC, Name; 
```

如果空白行为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:38:33.537

尝试 SELECT * FROM `members`ORDER BY toonCategory;

# javascript - div 的 removeChild 中的 DOM 8 错误

> ID：15078621
> 
> 赞同：1
> 
> 时间：2013-02-25T23:35:37.453
> 
> 标签：javascript, dom, appendchild, removechild

我有点新手，我知道我的代码不是最好的，但我正在学习。我将几个作为事件函数触发的图像序列动画放在一起。点击一个按钮，动画。将鼠标悬停在 div 上，动画。等等。

我认为我遇到的麻烦是动画被中断时。我在第二个 else if walk_div.removeChild(img);

然后图像序列开始基本上闪烁。有什么帮助吗？

```
function loadUp(){
var cyclenum = 175;
var folder = "animations/rollO/";
var imgType = '.png';
var count = 0;
var subCount = 1;
var initialImg = new Image();
initialImg.src = folder + '1.png';
var walk_div = document.getElementById('begin');
var img = new Image();
walk_div.appendChild(initialImg);

function animation(){
count++;
subCount = count - 1;

    if(count == cyclenum){
        clearInterval(walkAnimate);
    }
    else if(count == 1){
        subCount = 2;
        img.src = folder + subCount + imgType;
        walk_div.removeChild(initialImg);
        walk_div.appendChild(img);
        count = 2;      
    }
    else if (count < cyclenum){
        img.src = folder + subCount + imgType;
        walk_div.removeChild(img);      
        img.src = folder + count + imgType;
        walk_div.appendChild(img);
    }
}

var walkAnimate = setInterval(animation, 42);
}

function preAction(){   
var cyclenum = 30;
var folder = "animations/pre/";
var imgType = '.png';
var count = 0;
var subCount = 1;
var initialImg = new Image();
initialImg.src = folder + '1.png';
//Clears out the walk div
var rmv = document.getElementById('begin');
if (rmv.hasChildNodes()){
    while (rmv.childNodes.length >= 1)
    {
        rmv.removeChild(rmv.firstChild);
    }
}
//end clear
var walk_div = document.getElementById('begin');
var img = new Image();
walk_div.appendChild(initialImg);

    function animation(){
    count++;
    subCount = count - 1;

        if(count == cyclenum){
            clearInterval(walkAnimate);
        }
        else if(count == 1){
            subCount = 2;
            img.src = folder + subCount + imgType;
            walk_div.removeChild(initialImg);
            walk_div.appendChild(img);
            count = 2;      
        }
        else if (count < cyclenum){
            img.src = folder + subCount + imgType;
            walk_div.removeChild(img);      
            img.src = folder + count + imgType;
            walk_div.appendChild(img);
        }
    }

    var walkAnimate = setInterval(animation, 42);
}

function nextAction(){  
var cyclenum = 30;
var folder = "animations/next/";
var imgType = '.png';
var count = 0;
var subCount = 1;
var initialImg = new Image();
initialImg.src = folder + '1.png';
//Clears out the walk div
var rmv = document.getElementById('begin');
if (rmv.hasChildNodes()){
    while (rmv.childNodes.length >= 1)
    {
        rmv.removeChild(rmv.firstChild);
    }
}
//end clear
var walk_div = document.getElementById('begin');
var img = new Image();
walk_div.appendChild(initialImg);

    function animation(){
    count++;
    subCount = count - 1;

        if(count == cyclenum){
            clearInterval(walkAnimate);
        }
        else if(count == 1){
            subCount = 2;
            img.src = folder + subCount + imgType;
            walk_div.removeChild(initialImg);
            walk_div.appendChild(img);
            count = 2;      
        }
        else if (count < cyclenum){
            img.src = folder + subCount + imgType;
            walk_div.removeChild(img);      
            img.src = folder + count + imgType;
            walk_div.appendChild(img);
        }
    }

    var walkAnimate = setInterval(animation, 42);
}

function galleryRightIn(){  
var cyclenum = 15;
var folder = "animations/galleryRIn/";
var imgType = '.png';
var count = 0;
var subCount = 1;
var initialImg = new Image();
initialImg.src = folder + '1.png';
//Clears out the walk div
var rmv = document.getElementById('begin');
if (rmv.hasChildNodes()){
    while (rmv.childNodes.length >= 1)
    {
        rmv.removeChild(rmv.firstChild);
    }
}
//end clear
var walk_div = document.getElementById('begin');
var img = new Image();
walk_div.appendChild(initialImg);

    function animation(){
    count++;
    subCount = count - 1;

        if(count == cyclenum){
            clearInterval(walkAnimate);
        }
        else if(count == 1){
            subCount = 2;
            img.src = folder + subCount + imgType;
            walk_div.removeChild(initialImg);
            walk_div.appendChild(img);
            count = 2;      
        }
        else if (count < cyclenum){
            img.src = folder + subCount + imgType;
            walk_div.removeChild(img);      
            img.src = folder + count + imgType;
            walk_div.appendChild(img);
        }
    }

    var walkAnimate = setInterval(animation, 42);
}

function galleryRightOut(){ 
var cyclenum = 15;
var folder = "animations/galleryROut/";
var imgType = '.png';
var count = 0;
var subCount = 1;
var initialImg = new Image();
initialImg.src = folder + '1.png';
//Clears out the walk div
var rmv = document.getElementById('begin');
if (rmv.hasChildNodes()){
    while (rmv.childNodes.length >= 1)
    {
        rmv.removeChild(rmv.firstChild);
    }
}
//end clear
var walk_div = document.getElementById('begin');
var img = new Image();
walk_div.appendChild(initialImg);

    function animation(){
    count++;
    subCount = count - 1;

        if(count == cyclenum){
            clearInterval(walkAnimate);
        }
        else if(count == 1){
            subCount = 2;
            img.src = folder + subCount + imgType;
            walk_div.removeChild(initialImg);
            walk_div.appendChild(img);
            count = 2;      
        }
        else if (count < cyclenum){
            img.src = folder + subCount + imgType;
            walk_div.removeChild(img);      
            img.src = folder + count + imgType;
            walk_div.appendChild(img);
        }
    }

    var walkAnimate = setInterval(animation, 42);
}

function galleryBackIn(){   
var cyclenum = 15;
var folder = "animations/galleryBIn/";
var imgType = '.png';
var count = 0;
var subCount = 1;
var initialImg = new Image();
initialImg.src = folder + '1.png';
//Clears out the walk div
var rmv = document.getElementById('begin');
if (rmv.hasChildNodes()){
    while (rmv.childNodes.length >= 1)
    {
        rmv.removeChild(rmv.firstChild);
    }
}
//end clear
var walk_div = document.getElementById('begin');
var img = new Image();
walk_div.appendChild(initialImg);

    function animation(){
    count++;
    subCount = count - 1;

        if(count == cyclenum){
            clearInterval(walkAnimate);
        }
        else if(count == 1){
            subCount = 2;
            img.src = folder + subCount + imgType;
            walk_div.removeChild(initialImg);
            walk_div.appendChild(img);
            count = 2;      
        }
        else if (count < cyclenum){
            img.src = folder + subCount + imgType;
            walk_div.removeChild(img);      
            img.src = folder + count + imgType;
            walk_div.appendChild(img);
        }
    }

    var walkAnimate = setInterval(animation, 42);
}

function galleryBackOut(){  
var cyclenum = 15;
var folder = "animations/galleryBOut/";
var imgType = '.png';
var count = 0;
var subCount = 1;
var initialImg = new Image();
initialImg.src = folder + '1.png';
//Clears out the walk div
var rmv = document.getElementById('begin');
if (rmv.hasChildNodes()){
    while (rmv.childNodes.length >= 1)
    {
        rmv.removeChild(rmv.firstChild);
    }
}
//end clear
var walk_div = document.getElementById('begin');
var img = new Image();
walk_div.appendChild(initialImg);

    function animation(){
    count++;
    subCount = count - 1;

        if(count == cyclenum){
            clearInterval(walkAnimate);
        }
        else if(count == 1){
            subCount = 2;
            img.src = folder + subCount + imgType;
            walk_div.removeChild(initialImg);
            walk_div.appendChild(img);
            count = 2;      
        }
        else if (count < cyclenum){
            img.src = folder + subCount + imgType;
            walk_div.removeChild(img);      
            img.src = folder + count + imgType;
            walk_div.appendChild(img);
        }
    }

    var walkAnimate = setInterval(animation, 42);
} 
```

编辑：首先，感谢您的回复！

使用 setAnimationFrame 的部分问题是它在 IE 中不可靠。我也有最多 175 帧的图像序列，所以映射一张巨大的图像听起来像是很多工作 - 但是，我至少现在知道我什至可以做到这一点。可能对其他项目很方便。

这些动画有一个非常具体的开始和停止。当用户与网页交互时，卡通会指向不同的元素。我最终从 div 中删除了 firstChild。我意识到我正在调用一个特定的图像，所以当动画被中断时它不存在时，这就是我得到 DOM 8 的原因。它现在工作得更好了。

我现在需要做的是在另一个动画开始时停止动画。我发现你不能用 Javascript 真正做到这一点。我可以清除间隔，但它们需要是全局的，而且我还没有弄清楚如何做到这一点。我唯一的另一个想法是在单独的 div 中运行它们并根据活动功能隐藏或显示。然而，这意味着动画继续运行......只是在后台。除了开场动画外，它们只有 30 帧，而且我将图像的文件大小制作得非常小，但要继续运行就需要很多。我会用它作为最后的手段，但我更愿意找到更好的方法。

编辑编辑：

我最终对图像使用了相同的做法 - 添加和删除动画运行的 div。我知道这可能不是最优雅的方法，但直到事情变得更标准（*咳嗽*IE*咳嗽*）它会必须要做。它也适用于所有主流浏览器，甚至支持 IE7。

感谢大家抽出宝贵的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:08:58.523

DOM 8 错误意味着它找不到您要删除的元素。您正在尝试删除不存在的元素。

您要么需要检测是否需要以不同的方式移除元素，要么使用另一种方法来检测元素本身。

但是，这些都不重要，因为您尝试做的事情以另一种方式做得更好。而不是像这样创建和销毁元素，您应该使用图像条并像这样更改背景位置：

```
// Wait for the window load event and start the animation.
window.addEventListener('load', init, false);

var frame = 0; // Current frame
var frames = 8; // Frame count
var frameWidth = 64; // Frame dimensions
var frameHeight = 64;
var element; // DOM element to animate

function init() {
    // Fetch the dom element.
    element = document.getElementById('anim');
    // Begin the animation. Ideally you would use requestAnimationFrame but I'm
    // using setInterval for simplicity.
    setInterval(animate, 120);
}

function animate() {
    // Increment the frame number.
    frame = (frame + 1) % frames;
    // Set the element's backgroundPosition to "0px -#px" according to the frame
    // number and size.
    element.style.backgroundPosition = '0px -' + (frame * frameHeight) + 'px';
    // You use negative dimensions here because it's an offset of the background
    // image, and moving the image up requires negative dimensions, since
    // positive on the Y-axis is down.
} 
```

你可以看到它在这里工作：http: [//jsfiddle.net/xfYk6/](http://jsfiddle.net/xfYk6/)

另一种类似于您自己的方法是简单地隐藏未使用的帧，而不是销毁它们并重新创建它们。但是，我不会推荐这种方法。

# c# - 通过后代循环的问题

> ID：15078625
> 
> 赞同：0
> 
> 时间：2013-02-25T23:36:08.337
> 
> 标签：c#, linq, linq-to-xml

我对使用 linq 还很陌生，我很难弄清楚这一点。我搜索了互联网并找到了几个示例，但没有一个返回我需要的结果。我能够遍历机器名称。现在我想遍历它以获取该服务器的功能。下面是我的 XML 示例，后面是我正在使用的代码。它不是返回两个功能，而是返回其中的六个（对于所有服务器）。我确信有更好的方法可以做到这一点，但我尝试了很多变化。

```
<?xml version="1.0"?>
<Enterprise xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Version>4.2</Version>
  <Sites>
    <Site>
      <Machines>
        <Machine>
          <MachineName>1950-16-CORE</MachineName>
          <ServerRole>CoreServer</ServerRole>
          <ClientRoles>Core</ClientRoles>
          <Features>
            <Feature>
              <FeatureName>CoreProcess</FeatureName>
              <FeatureEnabled>true</FeatureEnabled>
            </Feature>
            <Feature>
              <FeatureName>Antivirus</FeatureName>
              <FeatureEnabled>true</FeatureEnabled>
            </Feature>
          </Features>
        </Machine>
        <Machine>
          <MachineName>1950-16-COREX</MachineName>
          <ServerRole>CoreExpansionServer</ServerRole>
          <ClientRoles>CoreEx</ClientRoles>
          <Features>
            <Feature>
              <FeatureName>CoreExProcess</FeatureName>
              <FeatureEnabled>true</FeatureEnabled>
            </Feature>
            <Feature>
              <FeatureName>Antivirus</FeatureName>
              <FeatureEnabled>true</FeatureEnabled>
            </Feature>
          </Features>
        </Machine>
        <Machine>
          <MachineName>1950-16-PRIDB</MachineName>
          <ServerRole>DatabaseServer</ServerRole>
          <ClientRoles>NONE</ClientRoles>
          <Features>
            <Feature>
              <FeatureName>MSSQL</FeatureName>
              <FeatureEnabled>true</FeatureEnabled>
            </Feature>
            <Feature>
              <FeatureName>Antivirus</FeatureName>
              <FeatureEnabled>true</FeatureEnabled>
            </Feature>
          </Features>
        </Machine>
      </Machines>
    </Site>
  </Sites>
  <GeneratedOn>2013-02-15T18:11:45.0345530Z</GeneratedOn>
</Enterprise> 
```

代码：

```
 private void ParseXMLData()
    {
        if (File.Exists(xmlFile))
        {
            Cursor.Current = Cursors.WaitCursor;

            XDocument xmlDoc = XDocument.Load(@xmlFile);
            IEnumerable<XElement> siteRows = from siterow in xmlDoc.Descendants("Sites")
                                         select siterow;

            foreach (XElement xEleSite in siteRows)
            {
                IEnumerable<XElement> siteLists = from siteList in xEleSite.Descendants("Site")
                                                  select siteList;

                var machines = from ms in siteLists.Descendants("Machine")
                               select new
                               {
                                   machineName = ms.Element("MachineName").Value,
                                   serverRole = ms.Element("ServerRole").Value,
                                   clientRole = ms.Element("ClientRoles").Value,
                               };

                foreach (var server in machines)                    
                {
                    IEnumerable<XElement> machineRows = from machineRow in siteLists.Descendants("Machines")
                                                        select machineRow;

                    foreach (var currentServer in machineRows)
                    {
                        MessageBox.Show(server.machineName + "\r\n" + server.serverRole + "\r\n" + server.clientRole);

                        IEnumerable<XElement> featureLists = from features in currentServer.Descendants("Features")
                                                             select features;

                        var feature = from fs in featureLists.Descendants("Feature")
                                      select new
                                      {
                                          featureName = fs.Element("FeatureName").Value,
                                          featureEnabled = fs.Element("FeatureEnabled").Value,
                                      };

                        ArrayList alMachineFeature = new ArrayList();
                        ArrayList alMachineFeatureStatus = new ArrayList();

                        foreach (var fs in feature)
                        {
                            alMachineFeature.Add(fs.featureName.ToString());

                            if (fs.featureEnabled.ToString() == "true")
                            {
                                alMachineFeatureStatus.Add("YES");
                            }
                            else
                            {
                                alMachineFeatureStatus.Add("no");
                            }
                        }
                    }
                }
            }
            Cursor.Current = Cursors.Default;
            return;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:01:03.050

您应该使用 Elements() 而不是 Descendants() 来仅获取 XElement 的子元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T00:15:12.187

XElement.Descendants("ElementName") 是一种递归方法：它将返回节点的所有名为“ElementName”的后代，无论这些后代有多深。

如果您想一次降低一级，请使用 XElement.Elements("ElementName") 获取当前元素的直接后代的可枚举列表。

```
var machines = xmlDoc.Descendants("Machine");

foreach(var machine in machines)
{
    System.Diagnostics.Debug.WriteLine("Machine: {0}", machine.Element("MachineName"));

    foreach(var feature in machine.Descendants("Feature").Select(f => new { 
              name= f.Element("FeatureName").Value, 
              enabled = f.Element("FeatureEnabled").Value 
            }))
    {
        System.Diagnostics.Debug.WriteLine("  Feature: Name={0}, Enabled={1}", feature.name, feature.enabled);
    }
} 
```

# apache-flex - 用于列表的 Flex 4 Itemrenderer

> ID：15078627
> 
> 赞同：-4
> 
> 时间：2013-02-25T23:36:13.580
> 
> 标签：apache-flex, flash-builder, mxml

我刚开始使用 Flex。我知道这很可悲，但这是一个很长的故事。现在，我面临的问题是我有一个列表组件，上面有一个数据提供者。我想做的是，当单击列表中的一个项目时，我希望在标签旁边有一个复选标志。

下面是组件：

```
<s:List id="tabList" width="100%"
                        borderVisible="false" click="tabList_clickHandler(event)"
                        selectedIndex="{this.hostComponent.selectedIndex}"
                        itemRenderer="MultiTabListRenderer" /> 
```

下面是 Itemrenderer 代码：

```
protected function AddCheck_clickHandler(event:MouseEvent):void {
        // TODO Auto-generated method stub
        var checkLabel:Label;
        checkLabel = new Label();
        checkLabel.text = "checkMark";

        var e: ItemClickEvent = new ItemClickEvent(ItemClickEvent.ITEM_CLICK, true);
        e.item = data;
        e.index = itemIndex;
        dispatchEvent(e);
        this.checkRectGroup.addElementAt(checkLabel, e.index);
    }

<s:Label id="customMultitabList" text="{data.label}"
             left="10" right="0" top="6" bottom="6" click="AddCheck_clickHandler(event)"/> 
```

我在函数中的代码是错误的，这主要是因为我不理解 flex 中的每一个内容。我没有心情详细学习这门语言，因为这对我来说不是一项长期的工作。此外，在渲染器文件中，当我使用 s:List 而不是 s:label 时，我再也看不到标签了。当然，我将属性文本替换为 dataprovider={data.selectedItem}。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:11:47.820

解决此问题的一种方法是向 dataProvider 中的对象添加一个字段，以跟踪项目是否已被选中。

然后，在您的项目渲染器中，您检查此字段并决定是否显示复选标记。这是一个工作示例应用程序和渲染器：

应用：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" xmlns:local="*"
               creationComplete="application1_creationCompleteHandler(event)">
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.events.CollectionEvent;
            import mx.events.CollectionEventKind;
            import mx.events.FlexEvent;
            import mx.events.PropertyChangeEvent;
            import mx.events.PropertyChangeEventKind;

            private var collection:ArrayCollection;

            protected function application1_creationCompleteHandler(event:FlexEvent):void
            {
                collection = new ArrayCollection([
                    { label: 1, selected: false },
                    { label: 2, selected: false },
                    { label: 3, selected: false }]);

                listbert.dataProvider=collection;
            }

            protected function listbert_clickHandler(event:MouseEvent):void
            {
                var index:int = listbert.selectedIndex;
                var item:Object = listbert.selectedItem;
                item.selected = !item.selected;
                // Create these events because the items in the ArrayCollection
                // are generic objects. It shouldn't be necessary if items in
                // your collection are a Class that extends EventDispatcher
                // see ArrayList::startTrackUpdates()
                var e:PropertyChangeEvent = new PropertyChangeEvent(
                    PropertyChangeEvent.PROPERTY_CHANGE, false,false,
                    PropertyChangeEventKind.UPDATE, 'selected', !item.selected,
                    item.selected, item);

                collection.dispatchEvent(new CollectionEvent(
                    CollectionEvent.COLLECTION_CHANGE, false,false,
                    CollectionEventKind.UPDATE, index, index, [e]));
            }

        ]]>
    </fx:Script>

        <s:List id="listbert" click="listbert_clickHandler(event)" itemRenderer="TestRenderer"/>
</s:Application> 
```

项目渲染器：

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" >
    <fx:Script>
        <![CDATA[

            override public function set data(value:Object):void
            {
                super.data = value;
                labelDisplay.text = value.label;
                if (value.selected)
                    checkMarkLabel.text = "✓";
                else
                    checkMarkLabel.text = "";
            }
        ]]>
    </fx:Script>

    <s:layout>
        <s:HorizontalLayout/>
    </s:layout>
    <s:Label id="labelDisplay" />
    <s:Label id="checkMarkLabel" />
</s:ItemRenderer> 
```

# c - 不知道为什么我的代码没有添加和打印我的链接列表？

> ID：15078629
> 
> 赞同：1
> 
> 时间：2013-02-25T23:36:20.013
> 
> 标签：c, list, syntax

这是我的链表，它包含一个字符串版本的键，其中包含内容的字符串表示：

```
struct node{
    char key[10];
    char content;
struct node *next;
};
struct node *head=(struct node *) NULL;
struct node *tail=(struct node *) NULL;

struct node * initinode(char *key, char content)
{
    struct node *ptr;
    ptr = (struct node *) calloc( 1, sizeof(struct node ) );
    if( ptr == NULL )                       
        return (struct node *) NULL;        
    else {                                  
        strcpy( ptr->key, key );          
        ptr->content = content;                       
        return ptr;                         
    }
}
void printnode( struct node *ptr )
{
    printf("Key ->%s\n", ptr->key );
    printf("Contents   ->%d\n", ptr->content );
}
void printlist( struct node *ptr )
{
    while( ptr != NULL )        
    {
        printnode( ptr );        
        ptr = ptr->next;         
    }
}
void add( struct node *new )  
{
    if( head == NULL )      
        head = new;         
    tail->next = new;       
    tail->next = NULL;      
    tail= new;              
}

struct node * searchname( struct node *ptr, char *key )
{
    while( strcmp( key, ptr->key ) != 0 ) {    
        ptr = ptr->next;                         
        if( ptr == NULL )                        
            break;                                
    }
    return ptr;                                 
}                     

//-----------------------------add to the list number of files and print list

int file_count = 0;
DIR * dirp;
struct dirent * entry;
dirp = opendir(cwd); 
while ((entry = readdir(dirp)) != NULL)
{
    if (entry->d_type == DT_REG) { /* If the entry is a regular file */
        file_count++;
    }
}
printf("%d \n",file_count);
char file=(char)file_count;
closedir(dirp);

ptr=initinode(files, file);
add(ptr);
printlist( head );
//-----------------------------------casting 
```

除了那个问题，我想以字符串表示的形式将不同的数据类型添加到我的列表中。我想尝试将其转换为字符串，但似乎我用于此的方法不适用于其他人。如果您建议为列表使用无效数据类型，请彻底解释。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:13:27.780

在您的代码中，我在这里有一条评论

```
void add( struct node *new )  
{
    if( head == NULL )      
        head = new;         
    tail->next = new;        // Making tail point to next node
    tail->next = NULL;      // but, immediately setting tail to NULL --> problem
    tail= new;              // tail pointing to new but connection to previous node lost
} 
```

我觉得这个功能可以

```
void add( struct node *new )  
{
    if( head == NULL ) {      
        head = new;
        tail = new; // Grow at tail and keep head static
    }
    else {         
        tail->next = new;        // Connect current node to next
        tail= new;              // Move tail to new node
        tail->next = NULL;      // Since this is the last node, set next to NULL
    }
} 
```

还有一点需要考虑。在此调用中，`printlist( head );`您传递的`head`是函数内部正在更新的指针。我觉得制作副本`head`并将其传递给函数可能是个好主意，这样它`head`总是指向列表的第一个元素。

PS：请避免命名变量，`new`因为它是`C++`

# c++ - 我可以将 unsigned char 转换为 char ，反之亦然吗？

> ID：15078638
> 
> 赞同：67
> 
> 时间：2013-02-25T23:37:14.683
> 
> 标签：c++, c

我想使用一个期望这样的数据的函数：

```
void process(char *data_in, int data_len); 
```

所以它实际上只是在处理一些字节。

但是当涉及到原始字节时，我更喜欢使用“unsigned char”（它以某种方式“感觉”只处理正的 0 到 255 值更正确），所以我的问题是：

我总是可以安全地将 a 传递给`unsigned char *`这个函数吗？

换句话说：

*   是否保证我可以随意在 char 和 unsigned char 之间安全地转换（转换），而不会丢失任何信息？
*   我可以随意在指向 char 和 unsigned char 的指针之间安全地转换（强制转换），而不会丢失任何信息吗？

奖励：C 和 C++ 中的答案是否相同？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-03-02T08:11:05.593

如果您使用显式强制转换，简短的回答是肯定的，但要详细解释它，需要考虑三个方面：

**1) 转换的合法性**通常可以在 and 之间进行转换（对于某些类型），因为可以首先将源类型转换为（
这是标准转换，§4.10），然后可以使用转换为目标类型一个明确的（§5.2.9/13）：`signed T*``unsigned T*``T``void *``void *``static_cast`

```
static_cast<unsigned char*>(static_cast<void *>(data_in)) 
```

这可以缩写（§5.2.10/7）为

```
reinterpret_cast<unsigned char *>(data_in) 
```

因为`char`是标准布局类型（§3.9.1/7,8 和 §3.9/9）并且签名不会改变对齐方式（§3.9.1/1）。它也可以写成 C 风格的演员表：

```
(unsigned char *)(data_in) 
```

同样，这是双向的，`unsigned*`往返`signed*`。还可以保证，如果您以一种方式应用此过程然后再返回，则指针值（即它指向的地址）不会改变（第 5.2.10/7 节）。

所有这些不仅适用于 和 之间的转换`signed char *`，`unsigned char *`还分别适用于`char *`/`unsigned char *`和`char *`/ `signed char *`。( `char`，`signed char`并且`unsigned char`在形式上是三种不同的类型，§3.9.1/1。)

需要明确的是，您使用三种演员阵容中的哪一种并不重要，但您必须使用其中一种。仅仅传递指针是行不通的，因为转换虽然合法，但不是标准转换，因此不会隐式执行（如果您尝试，编译器会发出错误）。

**2) 访问值的明确定义**
如果在函数内部取消引用指针，即执行`*data_in`检索底层字符的泛左值，会发生什么情况；这是明确和合法的吗？这里的相关规则是严格别名规则（§3.10/10）：

> 如果程序尝试通过非下列类型之一的*泛左值访问对象的存储值，则行为未定义：*
> 
> *   [...]
> *   与对象的动态类型相对应的有符号或无符号类型，
> *   [...]
> *   一个`char`或`unsigned char`类型。

因此，此规则不允许通过 (or ) 访问( `signed char`or ) ，反之亦然 - 您应该能够毫无问题地执行此操作。`char``unsigned char*``char`

**3) 结果值**
在解除对类型转换指针的引用后，你能处理你得到的值吗？重要的是要记住，上述指针的转换和取消引用相当于重新解释（而不是改变！）存储在字符地址处的位模式。那么当有符号字符的位模式被解释为无符号字符的位模式时会发生什么（反之亦然）？

当从无符号变为有符号时，*典型的效果*是对于 0 到 128 之间的值没有任何反应，而 128 以上的值变为负数。反过来类似：当从有符号变为无符号时，负值将显示为大于 128 的值。

*但标准实际上并不能保证*这种行为。标准唯一保证的是，对于所有三种类型，`char`和`unsigned char`，`signed char`所有位（不一定是 8，顺便说一句）都用于值表示。因此，如果您将一个解释为另一个，复制几份然后将其存储回原始位置，您可以确定不会丢失信息（根据您的要求），但您不一定知道值是什么实际上意味着（至少不是以完全可移植的方式）。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-25T23:39:16.507

`unsigned char`或者`signed char`只是解释：没有发生转换。

由于您正在处理字节，为了显示意图，最好声明为

```
void process(unsigned char *data_in, int data_len); 
```

[正如一位编辑所指出的：普通`char`类型可以是有符号或无符号类型。C 和 C++ 标准明确允许两者之一（它始终是独立于任一`unsigned char`or的类型`signed char`，但与其中一个具有相同的范围）]

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-06T18:24:28.087

是的，您始终可以毫无问题地从 char 转换为 unsigned char，*反之亦然。*如果您运行以下代码，并将其与 ASCII 表（参考[http://www.asciitable.com/](http://www.asciitable.com/)）进行比较，您可以自己查看证明，以及 C/C++ 如何处理转换 - 它们处理完全相同的方式：

```
#include "stdio.h"

int main(void) {
    //converting from char to unsigned char
    char c = 0;
    printf("%d byte(s)\n", sizeof(char));  // result: 1byte, i.e. 8bits, so there are 2^8=256 values that a char can store.
    for (int i=0; i<256; i++){
        printf("int value: %d - from: %c\tto: %c\n", c,  c, (unsigned char) c);
        c++;
    }

    //converting from unsigned char to char
    unsigned char uc = 0;
    printf("\n%d byte(s)\n", sizeof(unsigned char));
    for (int i=0; i<256; i++){
        printf("int value: %d - from: %c\tto: %c\n", uc, uc, (char) uc);
        uc++;
    }
} 
```

我不会发布输出，因为它有太多行！在输出中可以注意到，在每个部分的前半部分，即从 i=0:127 开始，从 chars 到 unsigned chars 的转换效果很好，*反之亦然，没有任何修改或丢失。*

但是，从 i=128:255 开始，无法转换 chars 和 unsigned chars，否则您将有不同的输出，因为 unsigned char 保存 [0:256] 中的值，而 char 保存区间 [-128:127] 中的值]）。尽管如此，这第二部分的行为是无关紧要的，因为在 C/C++ 中，一般来说，您只能以 chars/unsigned chars 作为 ASCII 字符开头，其只能采用 128 个不同的值和其他 128 个值（对于 chars 为正或负对于无符号字符）从不使用。

如果您从未在不代表字符的 char 中输入值，并且从未在不代表字符的 unsigned char 中输入值，那么一切都会好起来的！

额外：即使您在 C/C++ 的字符串中使用 UTF-8 或其他编码（用于特殊字符），使用这种类型转换的所有内容都可以，例如，使用 UTF-8 编码（参考[http:// lwp.interglacial.com/appf_01.htm](http://lwp.interglacial.com/appf_01.htm)）：

```
char hearts[]   = {0xe2, 0x99, 0xa5, 0x00};
char diamonds[] = {0xe2, 0x99, 0xa6, 0x00};
char clubs[]    = {0xe2, 0x99, 0xa3, 0x00};
char spades[]   = {0xe2, 0x99, 0xa0, 0x00};
printf("hearts (%s)\ndiamonds (%s)\nclubs (%s)\nspades (%s)\n\n", hearts, diamonds, clubs, spades); 
```

该代码的输出将是：
红心 (♥)
方块 (♦)
梅花 (♣)
黑桃 (♠)

即使您将其每个字符都转换为无符号字符。

所以：

*   “我总是可以安全地将 unsigned char * 传递给这个函数吗？” 是的！

*   “是否保证我可以随意在 char 和 unsigned char 之间安全地转换（转换），而不会丢失任何信息？” 是的！

*   “我可以随意在指向 char 和 unsigned char 的指针之间安全地转换（强制转换），而不会丢失任何信息吗？” 是的！

*   “C 和 C++ 中的答案是否相同？” 是的！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-05T06:13:22.790

从语义上讲，在and之间**传递**是安全的，即使在它们之间进行转换也是如此，就像在 c++ 中一样。 `unsigned char *``char *`

但是，请考虑以下示例代码：

```
#include "stdio.h"

void process_unsigned(unsigned char *data_in, int data_len) {
    int i=data_len;
    unsigned short product=1;

    for(; i--; product*=data_in[i]) 
        ;

    for(i=sizeof(product); i--; ) {
        data_in[i]=((unsigned char *)&product)[i];
        printf("%d\r\n", data_in[i]);
    }
}

void process(char *data_in, int data_len) {
    int i=data_len;
    unsigned short product=1;

    for(; i--; product*=data_in[i]) 
        ;

    for(i=sizeof(product); i--; ) {
        data_in[i]=((unsigned char *)&product)[i];
        printf("%d\r\n", data_in[i]);
    }
}

void main() {
    unsigned char 
        a[]={1, -1}, 
        b[]={1, -1};

    process_unsigned(a, sizeof(a));
    process(b, sizeof(b));
    getch();
} 
```

输出：

```
0
255
-1
-1

```

`process_unsigned`里面的所有代码`process`都是**相同**的。唯一的区别是无符号和有符号。此示例显示**黑盒中**的代码确实受**SIGN**影响，并且在被调用者和调用者之间**没有任何保证。**

因此，我会说，它仅适用于**通过**，但不能保证任何其他可能性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-25T23:53:36.417

您可以将指针传递给不同类型的`char`，但您可能需要显式转换它。保证指针具有相同的大小和相同的值。转换过程中不会丢失任何信息。

如果要在函数内部进行转换`char`，`unsigned char`只需将`char`值分配给`unsigned char`变量或将`char`值强制转换为`unsigned char`.

如果您需要在不丢失数据的情况下转换`unsigned char`为`char`，这有点困难，但仍然可能：

```
#include <limits.h>

char uc2c(unsigned char c)
{
#if CHAR_MIN == 0
  // char is unsigned
  return c;
#else
  // char is signed
  if (c <= CHAR_MAX)
    return c;
  else
    // ASSUMPTION 1: int is larger than char
    // ASSUMPTION 2: integers are 2's complement
    return c - CHAR_MAX - 1 - CHAR_MAX - 1;
#endif
} 
```

此函数将转换`unsigned char`为`char`返回值可以转换回与`unsigned char`参数相同的值的方式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-02T09:06:16.043

您确实需要查看代码以`process()`了解是否可以安全地传递无符号字符。如果函数使用字符作为数组的索引，那么不，您不能使用无符号数据。

# wpf - 使用 GridViewHeaderPresenter 进入列标题

> ID：15078643
> 
> 赞同：0
> 
> 时间：2013-02-25T23:37:42.267
> 
> 标签：wpf, wpf-controls, wpfdatagrid

我正在使用 GridViewRowPresenter/GridViewHeaderRowPresenter 并且我想允许用户使用标签进入列标题。我试过以下没有运气...

```
<GridViewHeaderRowPresenter.ColumnHeaderContainerStyle>
    <Style>
        <Setter Property="KeyboardNavigation.TabNavigation" Value="Local"/>
        <Setter Property="KeyboardNavigation.IsTabStop" Value="true" />
    </Style>
</GridViewHeaderRowPresenter.ColumnHeaderContainerStyle> 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:22:22.693

```
 <GridViewHeaderRowPresenter.ColumnHeaderContainerStyle>
     <Style>
         <Setter Property="GridViewHeaderRowPresenter.Focusable" Value="true" />
     </Style>
  </GridViewHeaderRowPresenter.ColumnHeaderContainerStyle> 
```

# asp.net-mvc - 在 ASP.NET 中将 OAuth 与 Twitter 结合使用

> ID：15078646
> 
> 赞同：0
> 
> 时间：2013-02-25T23:37:53.320
> 
> 标签：asp.net-mvc, twitter, oauth

我使用 Twitter 作为 ASP.NET MVC 4 网站的 OAuth 提供程序。我希望能够在以后通过电子邮件或推文跟进注册用户。除了让用户在 Twitter 上关注我之外，我还有其他选择与用户交流吗？

这是我没有成功考虑的：

1.  似乎无法访问电子邮件地址，因为 Twitter OAuth API 不返回它。

2.  除非用户在 Twitter 上关注我，否则我似乎无法发送直接消息。

3.  “Read/Write/DirectMessage”权限似乎太麻烦了——我想做的就是向用户发送一条新产品发布的消息——我不需要这种权限级别提供的任何写入功能。

回顾一下，如果用户使用 Twitter 登录我的网站，我有哪些选择可以在以后联系该用户？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:19:19.960

Twitter 针对这种人与人之间的交流的解决方案是直接消息，但是，Twitter 已经（正确地）决定双方都需要同意此渠道可用。该决定旨在减少 Twitter 生态系统中的垃圾邮件数量。

发布提及用户名的公开推文会引起用户的注意，但也会将他们与贵公司的关系传播到整个 Twitter 生态系统。本质上，您将在未经他们许可的情况下宣传他们与您公司的关系。这种方法迟早会让你头疼。

电子邮件可能是向现有客户发布通知的更好选择。

# c++ - C++ 头文件和 cpp 文件 - 我该如何管理它们？

> ID：15078648
> 
> 赞同：1
> 
> 时间：2013-02-25T23:38:09.197
> 
> 标签：c++, header-files, file-structure

尝试在 VS2010 上构建我的解决方案时，我变得疯狂、神秘的编译器错误。我真的很难理解这些包括工作。

```
Game.cpp
Game.h
Deck.cpp
Deck.h
Card.h

// Game.cpp
#include "Game.h" 
```

都好。现在我需要创建一个新牌组：

```
// Game.h
private:
    static Deck _deck; 
```

那么我需要包含 Deck.h 以便它知道它是什么：

```
// Game.h
#include "Deck.h"
class Game {
private:
    Deck _deck;
} 
```

好的，没关系。但现在我需要使用 Game.cpp 中的 _deck

```
// Game.cpp
#include "Game.h"
Deck Game::_deck;
void Shuffle(void)
{
     _deck = Deck();
     _deck.Shuffle();
} 
```

但我收到一条错误消息，提示“Deck 未定义”。但是既然 Game.cpp 包含 Game.h，Game.h 应该包含 Deck.h 吗？

如果我将 Deck.h 添加到 Game.cpp 我得到：

```
"Uses undefinied class Deck Game.cpp" 
```

和

```
"Deck class redeclaration Deck.h" 
```

我完全不明白这个...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:42:25.257

你应该看到这个解释包括警卫的stackoverflow问题

[为什么在 C++ 头文件中使用 #ifndef 和 #define？](https://stackoverflow.com/questions/1653958/why-are-ifndef-and-define-used-in-c-header-files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:54:53.273

`#include`是在编译器之前运行的预处理器阶段的一部分，基本上执行文本的替换。

您描述的问题与[翻译单位](http://en.wikipedia.org/wiki/Translation_unit_%28programming%29)有关。基本上，您可以认为源文件（.c、.cpp、.inl 等）与头文件（.h、.hpp）不同，因为每个源文件都定义了编译器可以执行的翻译单元操作。源文件基本上由文件中的所有逻辑加上它直接或间接引用的所有包含组成。

编译器将从每个翻译单元构建目标文件，然后链接器的工作是将它们全部放在一个库或可执行二进制文件中。在链接时间之前，其他源文件中的逻辑不能立即用于任何其他源文件或头文件。

最容易记住的是，头文件定义了你的接口，而源文件定义了你的实现。您希望您的头文件尽可能轻巧，并且尽可能多地避免实现细节，以提高编译时间速度并放松对象之间的耦合。为此，您需要依赖头文件中的前向声明并尝试在其他头文件中保留尽可能少的 .h 引用，而不是将它们移动到源文件中。

许多现代语言混合了接口和实现这两个概念，并且借助新 IDE 的强大功能，这不是什么大问题。然而，我仍然回顾并欣赏 C++ 中的分离，因为这种方法更加明确。编写良好的类的客户端应该能够忽略实现细节，因此他们应该只需要看到标题才能使用该类。当您使用 C++ 处理库时，通常会出现这种情况，因为您可能只能访问头文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T23:43:54.563

你有一个循环包含。幸运的是，`static`成员在声明时不需要完整定义，因此您可以在 Game.h 中包含前向声明：

```
// Game.h
class Deck;

//....
private:
    static Deck _deck; 
```

# jquery - jQuery Deferred 设置默认状态

> ID：15078649
> 
> 赞同：0
> 
> 时间：2013-02-25T23:38:16.387
> 
> 标签：jquery, ajax

考虑一个可能执行也可能不执行 AJAX 请求的函数。`$.ajax`返回一个[`Deferred`](http://api.jquery.com/category/deferred-object/)实例。对于可链接性，该函数应始终返回一个[`Deferred`](http://api.jquery.com/category/deferred-object/)实例。

```
function doAjaxReq() {
    if (conditional_is_true) {
         return (
              $.ajax(
               ....
              );
         );
    } else {
        // Create a Deferred instance
        var deferred = $.Deferred();
        // Set the Deferred state to "done"
        // ????
        return deferred;
    }
} 
```

想象一下其他一些类似的函数，如`doAjaxReq2`,`doAjaxReq3`等。它们将链接如下：

```
doAjaxReq()
    .done(function() {
        doAjaxReq2()
            .done(function() {
                ....
            })
        .fail(ajaxFailHandler)
    })
    .fail(ajaxFailHandler); 
```

如何[`Deferred`](http://api.jquery.com/category/deferred-object/)设置新对象的默认状态？在这种情况下，设置为已解决状态，因此`done()`即使从未尝试过 AJAX 请求，也会立即触发回调。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:40:58.050

```
return $.Deferred().resolve(); 
```

[http://api.jquery.com/deferred.resolve/](http://api.jquery.com/deferred.resolve/)

# java - 设计问题：这仅适用于生产者/消费者吗？

> ID：15078652
> 
> 赞同：2
> 
> 时间：2013-02-25T23:38:21.670
> 
> 标签：java, concurrency, producer-consumer, java.util.concurrent, futuretask

我正在尝试提高索引我的 lucene 文件的性能。为此，我创建了一个工作人员“LuceneWorker”来完成这项工作。

鉴于下面的代码，“并发”执行变得非常缓慢。我想我知道为什么 - 这是因为期货增长到一个极限，几乎没有内存来执行 LuceneWorker 的另一项任务。

问：有没有办法限制进入执行程序的“工人”数量？换句话说，如果有“n”个期货 - 不要继续并允许首先对文档进行索引？

我的直观方法是我应该使用 ArrayBlockingQueue 构建消费者/生产者。但是在我重新设计它之前想知道我是否正确。

```
 ExecutorService executor = Executors.newFixedThreadPool(cores);
        List<Future<List<Document>>> futures = new ArrayList<Future<List<Document>>>(3);
        for (File file : files)
        {
            if (isFileIndexingOK(file))
            {
                System.out.println(file.getName());
                Future<List<Document>> future = executor.submit(new LuceneWorker(file, indexSearcher));
                futures.add(future);
            }
            else
            {
                System.out.println("NOT A VALID FILE FOR INDEXING: "+file.getName());
                continue;   
            }
        } 

        int index=0;
        for (Future<List<Document>> future : futures)
        {
            try{

                List<Document> docs = future.get();

                for(Document doc : docs)
                    writer.addDocument(doc);    

            }catch(Exception exp)
            {
                //exp code comes here.
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:01:39.430

如果要限制等待作业的数量，请使用`ThreadPoolExecutor`带有有界队列的 a，例如`ArrayBlockingQueue`. 也滚动你自己的`RejectedExecutionHandler`，以便提交线程等待队列中的容量。您不能使用其中的便捷方法`Executors`作为`newFixedThreadPool`使用 unbounded `LinkedBlockingQueue`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T11:50:19.450

根据标准输入大小和 LuceneWorker 类的复杂性，我可以想象至少部分地使用 Fork/Join 框架来解决这个问题。当使用 JDK 8 的[CountedCompleter](http://gee.cs.oswego.edu/dl/jsr166/dist/jsr166ydocs/jsr166y/CountedCompleter.html)实现（包含在[jsr166y](http://gee.cs.oswego.edu/dl/jsr166/dist/jsr166y.jar)中）时，I/O 操作不会产生任何问题。

# objective-c - 来自 CIImage 的 UIImage - 数据长度为零？

> ID：15078659
> 
> 赞同：0
> 
> 时间：2013-02-25T23:38:44.480
> 
> 标签：objective-c, cocoa-touch, uiimage, core-image

我正在使用`AVCaptureVideoDataOutput`它的委托方法来操作视频帧。在委托方法中，我使用`sampleBuffer`来创建 a `CIImage`，然后从这里裁剪`CIImage`，将其转换为 a`UIImage`并显示它。不幸的是，我需要确定这个 new 的文件大小`UIImage`，但它正在返回`0`. 代码有效，图像裁剪精美，一切。我只是不明白为什么它没有数据！

为什么会这样？相关代码如下：

```
//In delegate method, given sampleBuffer...
CVPixelBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
CFDictionaryRef attachments = CMCopyDictionaryOfAttachments(kCFAllocatorDefault,
                                  sampleBuffer, kCMAttachmentMode_ShouldPropagate);
CIImage *ciImage = [[CIImage alloc] initWithCVPixelBuffer:pixelBuffer 
                                                  options:(NSDictionary *)attachments];

...

dispatch_async(dispatch_get_main_queue(), ^(void) {
    CGRect rect = [self drawFaceBoxesForFeatures:features forVideoBox:clap
                                                 orientation:curDeviceOrientation];

    CIImage *cropped = [ciImage imageByCroppingToRect:rect];
    UIImage *image = [[UIImage alloc] initWithCIImage:cropped];

    NSData *data = UIImageJPEGRepresentation(image, 1);
    NSLog(@"Image size is %d", data.length); //returns 0???

    [imageView setImage:image];

    [image release];
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-18T14:45:51.627

我有同样的问题，但有简单的过滤图像。

我偶然发现了[这一点](http://picopikopon.blogspot.de/2011/11/how-to-convert-ciimage-to-jpeg.html)，它解决了这个问题。在此之后，我能够保存我的图像。

```
CGSize size = self.originalImage.size;
CGRect rect;
rect.origin = CGPointZero;
rect.size   = size;

UIGraphicsBeginImageContext(size);
[[UIImage imageWithCIImage:self.filteredImage] drawInRect:rect];
UIImage * image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

NSData * jpegData = UIImageJPEGRepresentation(image, 1.0); 
```

但我只需要“ImageContext”中的这两行

# c++ - 在效果 sdk 后无法获取素材路径

> ID：15078661
> 
> 赞同：2
> 
> 时间：2013-02-25T23:38:51.040
> 
> 标签：c++, sdk, after-effects

后效 sdk 有问题。基本上，我正在遍历所有素材项目项目并尝试从中获取素材路径。这是我在循环中的代码。

```
AEGP_ItemType itemType = NULL;
ERR(suites.ItemSuite6()->AEGP_GetNextProjItem(projH, itemH, &itemH));
if (itemH == NULL) {
  break;
}
ERR(suites.ItemSuite6()->AEGP_GetItemType(itemH, &itemType));
if (itemType == AEGP_ItemType_FOOTAGE) {
          numFootage++;
          AEGP_FootageH footageH;
          ERR(suites.FootageSuite5()->AEGP_GetMainFootageFromItem(itemH, &footageH));
          A_char newItemName[AEGP_MAX_ITEM_NAME_SIZE] = {""};
          wchar_t footagePath[AEGP_MAX_PATH_SIZE];
          ERR(suites.ItemSuite6()->AEGP_GetItemName(itemH, newItemName));
          AEGP_MemHandle pathH = NULL;
          ERR(suites.FootageSuite5()->AEGP_GetFootagePath(footageH, 0, AEGP_FOOTAGE_MAIN_FILE_INDEX, &pathH));
          ERR(suites.MemorySuite1()->AEGP_LockMemHandle(pathH, reinterpret_cast<void**>(&footagePath)));
          std::wstring_convert<std::codecvt_utf8<wchar_t>> converter;
          const std::string utf8_string = converter.to_bytes(footagePath);
          std::ofstream tempFile;
          tempFile.open ("C:\\temp\\log1.txt");
          tempFile << utf8_string;
          tempFile.close();
          ERR(suites.MemorySuite1()->AEGP_UnlockMemHandle(pathH));
          ERR(suites.MemorySuite1()->AEGP_FreeMemHandle(pathH));
} 
```

我正在获取素材路径

然后我将 UTF-16 (wchar_t) 指针转换为 UTF-8 字符串

然后我将该 UTF-8 字符串写入一个临时文件，它总是输出以下内容。

펐㛻

我可以请一些指导吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:23:30.510

您已经将数据作为更智能的 std::wstring，为什么要将其转换为字节数组，然后将其强制为简单的 std::string？一般来说，您应该避免通过字节数组转换字符串。我对 C++ STDLIB 的了解已经有几年了，但问题*可能*在于 std::string 类*可能*仍然没有任何 UTF8 支持。

你真的需要将它存储为utf8吗？如果它只是用于记录，请尝试使用 ofwstream （宽的），完全删除转换和“字符串”，而直接将“wstring”写入流。

此外，完全有可能一切正常，只是您的文件查看器变得疯狂。使用 hexeditor 检查您的日志文件，并检查文件的开头是否包含 Unicode 格式标记，如 0xFFFE 等：

*   如果它有一些，并且您以标记指示的不同编码写入数据，那么这就是问题所在
*   如果没有，请尝试添加正确的标记。也许您的文件查看器根本没有注意到它是那种类型的 unicode 并误读了文件。Unicode 标记帮助读者正确解码数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T04:24:38.863

我能够找出答案。 [http://forums.adobe.com/message/5112560#5112560](http://forums.adobe.com/message/5112560#5112560)

这是错误的。这是因为执行代码处于循环中，而我没有使用 new 运算符分配字符串。

这是需要新的生产线。wchar_t 素材路径[AEGP_MAX_PATH_SIZE];

另一条有用的信息是并非所有素材项目都有路径。

如果没有路径，它将返回空字符串。这是我最终得到的代码。

```
if (itemType == AEGP_ItemType_FOOTAGE) {
          A_char* newItemName = new A_char[AEGP_MAX_ITEM_NAME_SIZE];
          ERR(suites.ItemSuite6()->AEGP_GetItemName(newItemH, newItemName));
          AEGP_MemHandle nameH = NULL;
          AEGP_FootageH footageH = NULL;
          char* footagePathStr = new char[AEGP_MAX_PATH_SIZE];
          ERR(suites.FootageSuite5()->AEGP_GetMainFootageFromItem(newItemH, &footageH));
          if (footageH) {
                            suites.FootageSuite5()->AEGP_ GetFootagePath(footageH, 0, AEGP_FOOTAGE_MAIN_FILE_INDEX, &nameH);
                            if(nameH) {
                                       tries++;
                                       AEGP_MemSize size = 0;
                                       A_UTF16Char *nameP = NULL;
                                       suites.MemorySuite1()->AEGP_GetMemHandleSize(nameH, &size);
                                       suites.MemorySuite1()->AEGP_LockMemHandle(nameH, (void **)&nameP);
                                       std::wstring test = L"HELLO";
                                       std::string output;
                                       int len = WideCharToMultiByte(CP_OEMCP, 0, (LPCWSTR)nameP, -1, NULL, 0, NULL, NULL);
                                       if (len > 1) {
                                                  footagePathStr = new char[len];
                                                  int len2 = WideCharToMultiByte(CP_OEMCP, 0, (LPCWSTR)nameP, -1, footagePathStr, len, NULL, NULL);
                                                  ERR(suites.MemorySuite1()->AEGP_UnlockMemHandle(nameH));
                                                  suites.MemorySuite1()->AEGP_FreeMemHandle(nameH);
                                       }
                            }
          }
} 
```

# asp.net - 涉及阵列时不显眼的窃听器

> ID：15078665
> 
> 赞同：1
> 
> 时间：2013-02-25T23:39:04.223
> 
> 标签：asp.net, asp.net-mvc, razor, asp.net-mvc-4, unobtrusive-validation

我有以下电话：

```
 @Html.TextBoxFor(m => m.SelectedName)
    @Html.TextBoxFor(m => m.Selections[0].Name) 
```

在这两种情况下，我分别用以下注释标记`SelectedName`and`Name`

```
 [Required(ErrorMessage = "Please provide required value")] 
```

但是 SelectedName 打印正确的不显眼的 html 属性：

```
<input id="SelectedName" name="SelectedName" data-val="true" data-val-required="Please provide required value"> 
```

其中 m.Selections[0].Name 显示如下：

```
<input id="Selections_0__Name" name="Selections[0].Name" value="" type="text"> 
```

是什么赋予了？我不敢相信这种情况在 MVC4 中被忽略了，这似乎是一个相当常见的用例。我将如何验证作为数组或包含数组的视图模型？

=====================为清晰起见编辑为 ViewModel 添加代码=====================

```
public class ContainerVM
{
    [Required]
    public string SelectedName {get;set;}
    public MemberVM[] Selections {get;set;}
}

public class MemberVM
{
    [Required]
    public string Name { get;set; }
} 
```

=====================表格====================

```
@using MyProject.Models;
@model ContainerVM
@{
    ViewContext.FormContext = new FormContext(); //This is just a hack because the parent isn't defined yet.
}

        @Html.TextBoxFor(m => m.SelectedCptGroupId)
        @Html.TextBoxFor(m => m.CptGroupSelections[0].Name) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:20:09.340

在获得更多反馈之前，我犹豫是否要提出答案，但是

`[required]`注释不能应用于数组或复杂对象。

您可以`[required]`为类的特定元素甚至嵌套类的成员应用注释。

显然我们都知道我们可以注释经典

```
[required]
public string SelectedName {get; set;} 
```

这应该有效。这个问题我无话可说。

但是，相反地对字符串数组进行注释

```
[required]
public string[] SelectedName {get;set;} 
```

**会失败。**要成功，您必须注释模型的每个元素。

同样，如果我们尝试使用成员 [required] public SelectionsModel Selections {get;set;} 注释嵌套模型

**这也会失败。**

最糟糕的是，您似乎正在尝试注释模型数组 [必需] public SelectionsModel Selections[] {get;set;}

**这又会失败。**

* * *

***什么应该起作用（虽然我没有尝试过）：***

**注释嵌套模型选择的每个元素。**

然后数组的每个模型的每个元素都应该需要输入。

```
 public class SelectionsModel 
    {
        [required]
        public string name {get; set;}
        [required]
        public int age { get; set; }

    } 
```

# tcpdf - TCPDF：更改标题中的字体大小

> ID：15078667
> 
> 赞同：1
> 
> 时间：2013-02-25T23:39:10.077
> 
> 标签：tcpdf

是否可以更改标题中字符的字体大小？我尝试过的所有字体设置似乎只会影响 PDF 文件的正文。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T04:58:11.097

如果您使用的是默认标题，请在调用 AddPage 方法之前调用它。

```
$pdf->setHeaderFont(array('fontnamehere', 'stylehere', fontsize)); 
```

例如，这是我在自己的项目中使用的一个：

```
$pdf->setHeaderFont(array('playtime', '', 20)); 
```

它将标题设置为使用 20pt 的常规样式播放时间字体（我添加到我的安装中的字体）。无论如何，我认为这是积分。我能找到的任何地方都没有记录该数组，这是典型的 TCPDF 文档。我应该注意，较大的尺寸可能不像您期望的那样适合，因此您可以设置内容容器的上边距，以便为不同大小的标题留出更多空间，如下所示：

```
$topheader = 40; //Just an example, new top margin in current TCPDF units.
$pdf->SetMargins(PDF_MARGIN_LEFT, $topheader, PDF_MARGIN_RIGHT); 
```

我想再花一点时间来强调它应该在调用 AddPage 之前调用，我自己也吸取了教训。

如果你想做更复杂的标题，你也可以通过扩展类来编写你自己的`Header`和`Footer`方法，如 TCPDF 网站上的示例 3。

# sql - SQL 查询将派生表转换为普通联接（索引视图）

> ID：15078670
> 
> 赞同：1
> 
> 时间：2013-02-25T23:39:20.203
> 
> 标签：sql, sql-server, left-join

我有以下带有派生表的 SQL 查询，因此我无法创建索引视图的 CLUSTERED INDEX。所以我必须将派生表转换为普通连接。

```
SELECT
......
FROM 
dbo.invoice i

LEFT JOIN 
(
    SELECT SUM(amount) as servicesamount
    ,ise.invoiceuid
    ,ise.episodeuid
    ,ise.memberuid
    ,ev.caseuid

    FROM dbo.invoice_services ise
    JOIN dbo.invoice inv on inv.invoiceuid = ise.invoiceuid
    JOIN dbo.event ev ON ev.eventuid = ise.episodeuid -- JOIN IN ORDER TO BRING EVENT INVOCIES ONLY (DENTAL INVOICES COULD EXIST)
    GROUP BY ise.invoiceuid,ise.episodeuid,ise.memberuid,ev.caseuid

) ise ON ise.invoiceuid = i.invoiceuid 
```

关于如何转换的任何线索

```
LEFT JOIN 
    (
        SELECT SUM(amount) as servicesamount
        ,ise.invoiceuid
        ,ise.episodeuid
        ,ise.memberuid
        ,ev.caseuid

        FROM dbo.invoice_services ise
        JOIN dbo.invoice inv on inv.invoiceuid = ise.invoiceuid
        JOIN dbo.event ev ON ev.eventuid = ise.episodeuid -- JOIN IN ORDER TO BRING EVENT INVOCIES ONLY (DENTAL INVOICES COULD EXIST)
        GROUP BY ise.invoiceuid,ise.episodeuid,ise.memberuid,ev.caseuid

    ) ise 
```

能正常加入吗？

欣赏它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:03:50.310

你可以试试这个

```
SELECT ...
  ,SUM(amount) as servicesamount
  ,ise.invoiceuid
  ,ise.episodeuid
  ,ise.memberuid
  ,ev.caseuid
  ,...
FROM dbo.invoice inv 
 LEFT JION dbo.invoice_services ise ON inv.invoiceuid = ise.invoiceuid
 LEFT JOIN dbo.event ev ON ev.eventuid = ise.episodeuid
GROUP BY inv..., ise.invoiceuid,ise.episodeuid,ise.memberuid,ev.caseuid 
```

# c# - 从后台线程访问 GUI

> ID：15078678
> 
> 赞同：0
> 
> 时间：2013-02-25T23:39:47.333
> 
> 标签：c#, multithreading, dispose, invoke

我制作了一个示例程序，它在后台线程上每秒生成 2000 个整数，当它完成时，它会触发一个事件，该事件会根据随机生成的数据在 GUI 上绘制图形（我的线程中有一个睡眠来模拟真实测量）。

```
private void SetChart(System.Windows.Forms.DataVisualization.Charting.Series series)
{
  if (InvokeRequired)
  {
    SetChartCallback d = new SetChartCallback(SetChart);
    this.Invoke(d, new object[] { series });
  }
  else
  {
    chart1.Series[0] = series;
    chart1.Series[0].Name = "Generated Data";
  }
} 
```

我在 MSDN 网站上找到了这种方法。它工作正常，唯一的问题是，当我关闭应用程序时。有时会出现错误消息：

> 无法访问已处置的对象。
> 对象名称：'Form1'。

当我关闭程序时它会处理所有元素，我怎样才能防止这个错误不发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:07:18.863

您已经关闭了表单，但线程仍在运行，因此当它完成时，它会尝试调用已处置对象上的方法。你的表格。

您可以等待线程完成。或者您可以以某种方式向它发出信号以停止创建您不再需要的整数并立即退出它的循环。

不要试图杀死它。非常坏的习惯，你不想进入那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T00:18:00.477

正确的方法，虽然看起来很丑陋，但可能是捕获异常并吞下它。`Dispose`在后台线程退出之前阻止表单可能是不合理的（这种情况很容易导致死锁）；框架也没有提供任何方法来尝试`Invoke`或`BeginInvoke`在控件或表单上使用此方法，但如果它已被处置，则根本不做任何事情。因此，您最好的选择可能是编写`TryInvoke`和`TryBeginInvoke`方法，通过捕获表单已被处理时产生的任何异常来实现这一点。您可能会在这种方法中使用`IsDisposed`检查，但您应该意识到，由于某些框架怪癖，有些竞争条件无法很好地解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T23:51:39.333

一个解决方案可能是检查 IsDisposed。像这样的东西：

```
private void SetChart(System.Windows.Forms.DataVisualization.Charting.Series series)
{
    if (IsDisposed)
       return;

    // ...
} 
```

# cocoa - 用 NSArrayController 绑定有序关系

> ID：15078679
> 
> 赞同：11
> 
> 时间：2013-02-25T23:39:52.543
> 
> 标签：cocoa, core-data, cocoa-bindings, nsarraycontroller

*如何将 NSArrayController 的内容绑定到有序对多关系中的实体？*

我的核心数据模型中有一个无序的多对多关系，以及一个 NSArrayController，其内容集绑定到父实体的该关系。这工作正常，数据可以从 NSArrayController 访问，没问题。

我在开发过程中决定让用户手动重新排序这些子对象会更好，所以我将关系更改为有序的。现在，当从我的 nib 创建我的 NSArrayController 时，会出现以下错误：

```
Cannot create NSSet from object Relationship '...' fault on managed object ... of class _NSFaultingMutableOrderedSet 
```

现在实际上，我认为这一切都是有道理的：这是一个有序的关系，所以现在我得到了一个有序的集合。将它绑定到 Content Array 也是不合适的，因为它现在是一个 NSOrderedSet，而不是一个数组。我的问题是：**现在如何将这种关系的数据绑定回 NSArrayController？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-21T01:25:54.203

我在寻找这方面是否有任何新的发展时遇到了这个讨论。在一个运输应用程序中，我目前将数组控制器的内容数组绑定到`orderedSetKey.@array`它，它工作得很好，不确定我是自己发现的还是其他人在某处建议的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-24T23:55:52.087

根本问题是 Core Data 的有序对多关系返回一个 NSOrderedSet，而 NSOrderedSet 不是 NSSet 的子类。任何期望 NSSet 的阵列控制器绑定都将失败。

Tom Fewster 有一篇[详细的博客文章](http://www.wannabegeek.com/?p=74)描述了使用 NSValueTransformer 来解决这个缺点，在 NSOrderedSet 和 NSArray 之间进行动态转换。他还在[Github 上提供了一个示例实现](http://www.wannabegeek.com/wp-content/uploads/2011/09/OrderedSetTest.tar.gz)。

# vbscript - 在 Windows 2008R2 中使用任务计划程序运行时，不会从 VBS 文件中调用批处理文件

> ID：15078681
> 
> 赞同：0
> 
> 时间：2013-02-25T23:39:56.163
> 
> 标签：vbscript, batch-file, scheduled-tasks

我创建了一个调用批处理文件的 vbs 文件，该文件在手动运行时可以完美运行。但是，当我从计划任务运行相同的 vbs 脚本时，vbs 完成时没有错误，但似乎没有调用批处理文件，因为它负责的任务都没有完成。

我已确保计划任务在我的管理员帐户下运行。我在旧服务器上运行同样的任务有很多经验，但我最近从 2003 年迁移到了新的 2008 R2。

这是不执行的行：

```
wshell.run "%comspec% /c ""C:\My Scripts\ForAdministration\AddSitesScripts\AddSite.bat"" " & DomainName & " " & WebsiteID & " " & DomainName20 & " " & Path & " " & HasStats & " " & NewAppPool & " " & 1 & " " & 1 & " " & 1, 0, True 
```

我将所有变量记录到一个文本文件中，它们很好。正如我所说，这在手动触发时运行良好。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:06:31.817

Probably being run as a different user in a scheduled task.

Verify that the user has the necessary permissions.

Verify that the problem is not due to an assumed current directory.

Put the following statement as the first line in the bat file and try running both ways (manual and scheduled):

```
echo.CD=%cd% & pause 
```

Note that the current directory gets change when you 'Run as administrator'. You can resolve that by adding the following line at the top of your program (to set the desired CD before referencing any files/folders).

```
pushd %~dp0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:14:02.483

您的 2008 R2 机器是 64 位系统，%comspec% 指定 CMD.exe 的 64 位版本。很可能您想使用 32 位版本的 CMD.exe（是的，有两个！）。将 %comspec% 更改为

```
%SystemRoot%\sysWOW64\cmd.exe 
```

是的，这是正确的！sysWOW64中的CMD.exe是32位版本！

# python - Python：为什么 DictWriter 写入“NULL”字节？

> ID：15078683
> 
> 赞同：1
> 
> 时间：2013-02-25T23:40:01.357
> 
> 标签：python, dictionary, null, python-2.6

```
class WhatsGoingOn:
    def __init__(self, filename, fieldNames, maxLines):
        self.file_to_write = filename
        self.fieldNames = fieldNames'
        self.maxLines = maxLines

        # Open the file for reading and writing. Create it if it doesn't exist, 
        #  and truncate it if it does.
        self.file = open(self.file_to_write, 'w+b')
        self.csvReader = csv.DictReader(self.file, fieldnames=self.fieldNames)
        self.csvWriter = csv.DictWriter(self.file, fieldnames=self.fieldNames, extrasaction='ignore')

    def looper(self):
        # Infinitly (don't worry about that - this is a daemon), 
        #  write to the file. When a certain number of lines have been written, 
        #  read the file and then truncate it.
        try:
            numRowsWritten = 0
            while True:
                # Nevermind what's being written
                self.csvWriter.writerow({'name_of_field_0': str(numRowsWritten ), 'name_of_field_1': str(numRowsWritten )})
                numRowsWritten  += 1

                if numRowsWritten  >= self.maxLines:
                    # Iterate through each row of the file
                    self.file.seek(0)

                    # This only works the first time...
                    for row in self.csvReader:
                        print row['name_of_field']

                    # Truncate the file, and restart the 
                    self.file.truncate(0)
                    numRowsWritten  = 0

        except Exception as e:
            print 'Exception!: {0}'.format(e)
            self.file.close() 
```

**输出：** `Exception!: line contains NULL byte`

第二次`for row in self.csvReader:`命中该行时，抛出异常，当我查看文件时，文件确实在开始时确实有一大堆 NULL 字节。显然，在文件被截断后， DictWriter 写了一大堆 NULL 字节（或者至少这是我的假设）。**如何防止 NULL 字节被写入我的文件？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:32:32.980

显然，通过截断文件，您会弄乱编写器的某些内部状态。而不是截断，关闭并重新打开文件（模式`w+b`截断），然后重新初始化`csvReader`and `csvWriter`。

# sql - 积分系统的高效数据库模型？

> ID：15078684
> 
> 赞同：2
> 
> 时间：2013-02-25T23:40:04.237
> 
> 标签：sql, optimization

我正在尝试向站点添加一个非常简单的积分系统。在我的 SQL 数据库中，有一个用于奖励积分的表格，因为管理员可以将用户的积分增加任意数量，以及增加积分的理由。因此，稍微简化一下，此表包含每次管理员奖励积分时获得的积分数、理由和用户 ID。到现在为止还挺好。

但是，网站上有 10 个用户组争夺最高总分。单个用户组的总点数很容易达到 15 000，因为该站点已经有超过 10 000 名成员（诚然，大多数是不活动的）。我想有一个排行榜来显示竞争的用户组和他们的总分，但我担心在实施系统时，每次总结积分会花费太长时间。问题是：我应该在什么级别（如果有的话）将积分汇总保存在数据库中？我是否应该在用户表中为每个用户的总积分设置一个字段，并为用户组排行榜即时汇总这些积分？或者我应该为每次将点添加到单个用户时更新的每个用户组都有一个聚合字段？在实际实施该系统之前，我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:50:05.557

这取决于您的硬件，但汇总数千行应该没问题。不过，一般来说，您应该避免将所有用户得分相加，除非您绝对需要。我建议添加一个汇总表，该表将存储每个组的总分，然后每晚运行一个 cron 来验证总分（基本上是求和，然后存储绝对正确的值）。

我建议在您的表格中添加记录奖励积分和奖励原因的表格。此外，分别存储每个用户的总分，并在将其插入日志表和另一个表的同时更新它，其中包含每组的总分。这应该在您的活动水平上运作良好。如果争议太大，您也可以对总组分数进行异步更新，但应该没问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-26T01:49:46.373

老实说，您的聚合仍然可能会在不到一秒的时间内计算出少于 10k 行的数据——您应该让您的操作数据库保持原子性，只存储每个点事务并在查询时计算聚合。如果你真的想要，你可以将你的聚合预先计算到一个物化视图中，但我真的认为你不需要这样做。

您可以使用该子句创建物化视图

```
 refresh fast start with sydate
     next sysdate + 1/24 
```

- 让它每小时刷新一次。

您不会有实时聚合数据（它可能会关闭一个小时），但如果数据变得庞大，它可以大大提高聚合查询的性能。就像你现在的数据一样，我什至不会打扰它——你的表现*应该*没问题。

编辑：不知道为什么我被否决了。我认为这是比将聚合存储在表中更好的解决方案。

# c - 数组指针和返回类型

> ID：15078686
> 
> 赞同：0
> 
> 时间：2013-02-25T23:40:08.510
> 
> 标签：c, arrays, pointers

如果句子不是 pangram，我正在尝试做一个程序来检测丢失的字母。我在这里搞乱了指针和数组，我完全迷失了。我必须返回一个指向函数 getMissing Letters 的 char 指针，它会将句子作为参数来判断它是否是 pangram。

一个 PAngram 包含所有 26 个字母 az。

```
 #include <stdio.h>
 include <stdlib.h>

 char * getMissingLetters(const char *sentence)
 {
char ch, allchars[26] = {0};
    char * missing[26]={0};
int total = 0,i;

while ((ch = *sentence++)) {
    int index;

    if('A'<=ch&&ch<='Z')
        index = ch-'A';
    else if('a'<=ch&&ch<='z')
        index = ch-'a';
    else
        continue;

    total += !allchars[index];
            allchars[index] = 1;

}
    for(i=0;i<26;i++)
    {
    if(allchars[i]==0) 
       missing[i]=(char)(i+97);
       printf("missing[i]=%c\n",missing[i]);
    }

return missing;
 }
int main()
{
int i;
const char *tests[] = {
    "A slow yellow fox crawls under the proactive dog",
    "The quick brown fox jumps over the lazy dog.",
            "Lions, and tigers, and bears, oh my!"
};
    char * missing[26]; 
for (i = 0; i < 3; i++){
       missing = isPangram(tests[i]);

   }

return 0;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:10:28.013

您声明`missing`为`char *`数组，但随后将其用作`char`数组，如果没有错误，这应该会给您很多编译器警告。

但是，您的主要问题是您返回了一个指向局部变量 ( `missing`) 的指针，该变量超出范围并在您返回时被销毁。因此，`main`您有一个悬空（无效）指针。你需要分配一个`missing`地方，它仍然会在 main 中存在。例如，您可以在 main 中分配它并将其作为额外的 agrument 传递：

```
void getMissingLetters(char *sentence, char *missing) {
    :
int main() {
    char missing[26];
       :
    getMissingLetters(tests[i], missing); 
```

# c++ - 我是否应该尽可能在 C++11 中将 'const int' 替换为 'constexpr int' ？

> ID：15078689
> 
> 赞同：14
> 
> 时间：2013-02-25T23:40:32.213
> 
> 标签：c++, c++11, constants, constexpr

你会换

```
const int one = 1;
const int two = 2; 
```

有了这个？

```
constexpr int one = 1;
constexpr int two = 2; 
```

我的理解是否正确，这两个块在语义上是相同的，并且目前只是一个口味问题？

另一方面，正如`constexpr`所暗示的那样`const`，您可能会争辩说，总是更喜欢限制性更强的形式更一致，即使在没有任何影响的微不足道的情况下也是如此？

（我知道当右边的表达式允许更复杂时情况完全改变。所以为了澄清，问题只关注表达式是固定整数的最简单的情况。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T00:01:16.653

我认为您所说的`const`和`constexpr`“*在语义上相同*”的声明应该被修改：它们都声明了其值不能改变的对象，而且`constexpr`还要求初始化表达式在编译时是可计算的。

现在，如果右侧的表达式不能在编译时计算，那么使用`constexpr`是不可能的。另一方面，只要初始值设定项是文字，您*就可以*使用`constexpr`，但请注意变量的语义是什么：您的常量变量是否真的表示其值*应该*在编译时可计算的东西？

在 SW 维护/进化光学系统中，您可能会随时间改变初始化变量的方式：今天初始化程序是文字，明天可能是更复杂的表达式。

*无论您现在*以何种方式为其分配值，您是否认为它`i`需要由文字以外的任何其他东西进行初始化，并且初始化表达式可能在编译时无法计算？如果是这种情况，那么只需创建您的变量`const`，即使您当前正在使用文字对其进行初始化；否则，做它`constexpr`。

换句话说，选择最能表达变量语义的限定词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-13T09:12:32.153

在这种情况下，您不必替换`const`为，`constexpr`

```
const int one = 1;
const int two = 2; 
```

如果你有一个像这样的常量变量，

```
const int three = one + two; 
```

你最好把它定义为`constexpr`

```
constexpr int three = one + two; 
```

以确保在编译期间将计算三个。

我知道有人会争辩说，现代编译器会进行优化，甚至只用`const`.

我只是举个例子来说明 constexpr 的用法，可能计算复杂，编译器无法优化。

# ruby-on-rails - 如何在 Actionmailer 消息中使用不同的布局？

> ID：15078692
> 
> 赞同：7
> 
> 时间：2013-02-25T23:40:46.723
> 
> 标签：ruby-on-rails, actionmailer

我有带有布局的 project_mailer，但如果 project_notification 方法具有参数 that ，我想使用不同的方法`unsubscribe_link = true`。

```
layout "project_mail"

def project_notification(user, projects, unsubsribe_link = false)
  attachments.inline['logo_252.png'] = File.read(Rails.root + 'public/images/logo_252.png')
  @user = user
  @projects = projects

  mail(:to => user.email, :subject => "New Projects")
end 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-10-25T14:16:50.873

我假设你已经解决了你的问题，我回答是为了帮助别人：

```
layout 'project_mail'

def project_notification(user, projects, unsubscribe_link = false)
  attachments.inline['logo_252.png'] = File.read(Rails.root + 'public/images/logo_252.png')
  @user = user
  @projects = projects
  layout_name = unsubscribe_link ? 'other_fancy_layout' : 'project_mail'

  mail(to: user.email, subject: "New Projects") do |format|
    format.html { render layout: layout_name }
    format.text { render layout: layout_name }
  end
end 
```

# incompatibletypeerror - 发现不兼容的类型：双

> ID：15078696
> 
> 赞同：0
> 
> 时间：2013-02-25T23:41:21.677
> 
> 标签：incompatibletypeerror

我正在尝试编写一个程序，到目前为止的其余代码都可以工作，但是我发现了一个不兼容的类型：双重要求：第 38 行的杂货项目。谁能帮我解释为什么我收到这个错误以及如何正确吗？谢谢你。这是我的代码：

```
 import java.util.Scanner;

public class GroceryList {

  private GroceryItem[]groceryArr; //ARRAY HOLDS GROCERY ITEM OBJECTS
  private int numItems;
  private String date;
  private String storeName;
  public GroceryList(String inputDate, String inputName) {

//FILL IN CODE HERE
// CREATE ARRAY, INITIALIZE FIELDS
    groceryArr = new GroceryItem[10];
    numItems = 0;

  }

  public void load() {

    Scanner keyboard = new Scanner(System.in);
      double sum = 0;
      System.out.println ("Enter the trip date and then hit return:");
    date = keyboard.next();
    keyboard.nextLine();
    System.out.println("Enter the store name and then hit return:");
    storeName = keyboard.next();
    keyboard.nextLine();
    double number = keyboard.nextDouble();

    //NEED TO PROMPT USER FOR, AND READ IN THE DATE AND STORE NAME.

    System.out.println("Enter each item bought and the price (then return).");
    System.out.println("Terminate with an item with a negative price.");
    number = keyboard.nextDouble();

    while (number >= 0 && numItems < groceryArr.length) {
      groceryArr[numItems] = number;
      numItems++;
      sum += number;
      System.out.println("Enter each item bought and the price (then return).");
      System.out.println("Terminate with an item with a negative price.");
      number = keyboard.nextDouble();
    }

     /* 
    //READ IN AND STORE EACH ITEM. STORE NUMBER OF ITEMS
  }

  private GroceryItem computeTotalCost() {
    //add code here
  }

  public void print() {
    \\call computeTOtalCost
  }
  */
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:59:47.663

*“groceryArr[numItems] = 数量；”*

groceryArr[numItems] 是 GroceryItem() 的一个实例 - 'number' 是双精度

您需要在 GroceryItem() 对象中使用双变量来存储“数字”值。

# jquery - Node.js Crawler 将 result.body 作为 Buffer 而不是 html

> ID：15078699
> 
> 赞同：0
> 
> 时间：2013-02-25T23:41:25.077
> 
> 标签：jquery, node.js, web-crawler, jsdom

我有一个来自[https://github.com/sylvinus/node-crawler的超级简单的示例代码](https://github.com/sylvinus/node-crawler)

```
var Crawler = require("crawler").Crawler;

var c = new Crawler({
    "maxConnections":10,
    "callback":function(error,result,$) {
        console.log(result.body);
    }
});

c.queue("http://google.com"); 
```

输出是

```
<Buffer 3c 21 64 6f 63 74 79 70 65 20 68 74 6d 6c 3e 3c 68 74 6d 6c 20 69 74 65
6d 73 63 6f 70 65 3d 22 69 74 65 6d 73 63 6f 70 65 22 20 69 74 65 6d 74 79 70 65
 ...> 
```

如果我将 Url 更改为，比如说，，`c.queue("http://bing.com")`我可以获得 html 文本。这种行为因网站而异，我不明白。

如果我更改`console.log(result.body);`为`console.log($('body').text());`，google.com 网站会给我一些奇怪的文字，看起来不像发送到我的浏览器的文字。

**如果我将 Url 更改为Pinterest.com**等其他网站，我开始在**jsdom.js**本身中出现错误。

```
C:\node_modules\crawler\node_modules\crawler\node_modules\jsdom\lib\jsdom.js:256

        window.document.documentElement.appendChild(script);
                                        ^
TypeError: Cannot call method 'appendChild' of null
    at exports.env.exports.jsdom.env.processHTML (C:\node_modules\crawler\node_m
odules\crawler\node_modules\jsdom\lib\jsdom.js:256:41)
    at Array.forEach (native)
    at exports.env.exports.jsdom.env.processHTML (C:\node_modules\crawler\node_m
odules\crawler\node_modules\jsdom\lib\jsdom.js:239:18)
    at Object.exports.env.exports.jsdom.env (C:\node_modules\crawler\node_module
s\crawler\node_modules\jsdom\lib\jsdom.js:268:5)
    at exports.Crawler.self.onContent.jsd (C:\node_modules\crawler\node_modules\
crawler\lib\crawler.js:243:37)
    at exports.Crawler.self.onContent (C:\node_modules\crawler\node_modules\craw
ler\lib\crawler.js:278:29)
    at fs.readFile (fs.js:176:14)
    at Object.oncomplete (fs.js:297:15) 
```

所以我想这是代码本身的一些错误，但如果不是，有人可以帮忙指出我的错误吗？

**注意：** `jQueryUrl`可能会添加参数`new Crawler({})`以使其与您的 jQuery 文件位置一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:57:15.813

如果您还没有，请查看[Cheerio 。](https://github.com/MatthewMueller/cheerio)它可能会给你更一致的结果。我已经将它用于爬虫一段时间，并没有像你描述的那样出现问题。

我选择它是因为它似乎有一个更干净的设计。

# azure - 用于硒测试的团队基础服务器自定义托管构建控制器

> ID：15078701
> 
> 赞同：4
> 
> 时间：2013-02-25T23:41:40.730
> 
> 标签：azure, selenium, tfs, msbuild

我目前正在使用 Team Foundation Hosted Build Server。我在我的天蓝色云服务中进行了此设置，因此当我提交代码更改时，托管构建控制器将构建我的更改，然后将更改部署到云服务中的暂存环境。在构建过程中，我还有一组使用 NUnit 运行的自动化测试。

在 Selenium 测试开始之前，这一切都很好。由于 IE 和 firefox 未部署在 TFS 托管构建服务器上，因此我的测试失败。目前 TFS 托管的构建服务器是微软设计的 VM 镜像。

是否有任何简单的方法来指定一个安装了浏览器的自定义 VM 映像，以便我每次签入代码更改时都可以运行这些自动化测试？或者在创建托管构建服务器时，自动安装浏览器以便它们可用于测试？

谢谢！

威利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:59:17.650

我最终放弃了 TFS 托管的构建控制器，因为您无法自定义它们。

我能够创建一个安装了 Windows 2012 服务器的 azure VM。我安装了 TFS 服务器，并且能够将我的 TFS 帐户链接到我的本地 TFS 构建控制器。

由于我使用的是 azure VM，因此我可以对其进行自定义，因此我能够下载所有浏览器、安装 Selenium IE 驱动程序并让构建工作。

我仍在研究如何自动启动 VM 并在不使用时将其关闭，因此我不会在不使用时为计算时间付费，但它总是启动以便它可以自动运行是件好事在代码签入后构建。

# ios - 将应用用作应用内购买的内容

> ID：15078703
> 
> 赞同：0
> 
> 时间：2013-02-25T23:41:49.013
> 
> 标签：ios, in-app-purchase, ipa

我正在寻找一种方法来下载 iPhone 应用程序（或只是 Payload 文件夹的 .app 内容）作为应用程序内购买。

我与一家公司合作，该公司在 Flash 中构建了他们的整个资产库，我们现在正试图使其移动化。我知道这并不理想，但使用 Flash CS5.5 我们可以将 Flash 导出为 .ipa。虽然我们可以将每门课程作为其自己的应用程序发布，但我们正在努力实现更简化的体验（想想 Marvel Comics 应用程序）。最终我想在 Xamarin 中编写容器应用程序。

有没有办法通过应用内下载使这些“应用程序”或其有效负载成为非消耗性内容，有人可以指出我启动它们的正确方向吗？我并不想绕过 Apple 的安全规定或应用内购买规则，因此我们将不胜感激任何输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:08:45.317

Apple 不允许 IAP 成为代码。您不能使用 IAP 分发应用程序。您可以在您的应用程序中投放包含其他应用程序的广告，但没有从另一个应用程序购买一个应用程序的机制。

# sql - 在预期条件的上下文中指定的非布尔类型的表达式，靠近 'then'

> ID：15078704
> 
> 赞同：4
> 
> 时间：2013-02-25T23:41:49.960
> 
> 标签：sql, sql-server, select, sql-server-2008-r2

我正在检查很多存在类似错误的问题，但找不到可以帮助我解决我选择的错误的问题

```
select 
    case 
    when e.EthnCode in ('N','A','B','P','W') then ethnicity
    else 'Multi' 
    end as Ethnicity,
    case when cat.CategCode IN ('CH','IN','NB','PG','PP','SR')then Category else 0 end as ' ',
 --COUNT (c.EthnCode) as '(A) tottal Numbers of participamts by Rase', 
 sum(case when C.StatusID =1 or C.StatusID =2 then 1 else 0 end),
 sum(case when c.Hispanic then 1 else 0 end) as 'Hisp'
from  Ethnicity E
LEFT JOIN Clients C
ON c.EthnCode = e.EthnCode 
LEFT join Category cat 
ON c.CategCode = cat.CategCode
where c.StatusID = 1 
group by case 
    when e.EthnCode in ('N','A','B','P','W') then ethnicity
    else 'Balance Reporting More Than One Race' 
    end 
```

它抛出错误

```
Msg 4145, Level 15, State 1, Line 9
An expression of non-boolean type specified in a context where a condition is expected, near 'then'. 
```

9号线

```
 sum(case when c.Hispanic then 1 else 0 end) as 'Hisp' 
```

它强调西班牙裔请需要帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:50:01.643

```
 sum(case when c.Hispanic then 1 else 0 end) as 'Hisp' 
```

更改为（请在比较中使用正确的值和数据类型）

```
 sum(case when c.Hispanic = 1 then 1 else 0 end) as 'Hisp' 
```

或者对于一个简单的案例

```
 sum(case c.Hispanic when 1 then 1 else 0 end) as 'Hisp' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:50:29.487

它不认为 C.Hispani 是布尔值。 `Case When C.Hispanic = 1 Then`……

或者一些这样的人会解决它。

# php - 我的 iMacro 脚本不在我的 PHP 脚本中运行。为什么？

> ID：15078705
> 
> 赞同：1
> 
> 时间：2013-02-25T23:42:10.857
> 
> 标签：php, imacros, web-scripting

我正在学习如何从我的 php 脚本运行 iMacros，以便 PHP 脚本调用 iMacros 浏览器会话并传递我拥有的任何变量（例如 url 和宏名称）。然后 iMacros 会话运行 iMacro，在宏运行完成后，它会将生成的 html 页面传回 PHP 脚本并自行关闭。无论如何，在一个理想的世界里。

这是 iMacros 调用脚本：

```
<?php

require 'src/iimfx.class.php';

$iim = new imacros();

$vars = array();

$iim->play($vars,'grab_data.iim');

?> 
```

但是当我从 WAMP 上的 cmd.exe [命令行] 运行这个脚本时，我得到了这个：

```
New imacros session started!
Using Proxy: MY_PROXY_IP:MY_PROXY_PORT
-runner -fx -fxProfile default
--------------------------------------------------------
Setting Value IP => MY_PROXY_IP
Setting Value port => MY_PROXY_PORT
Playing Macro proxy.iim
--------MACRO ERROR!-------------------
 ERROR: Browser was not started. iimInit() failed?
--------------------------------------------------------
Playing Macro grab_google.iim
--------MACRO ERROR!-------------------
 ERROR: Browser was not started. iimInit() failed? 
```

PS MY_PROXY_IP 和 MY_PROXY_PORT 在上面的错误消息和 iimfx.class.php 中都替换为实际数字。

这是 iimfx.class.php 的代码：

```
<?php

class imacros {
    function __construct($proxyip = 'MY_PROXY_IP', $proxyport = 'MY_PROXY_PORT', $silent = false, $noexit = false) {

        echo "--------------------------------------\nNew imacros session started!\nUsing Proxy: $proxyip:$proxyport\n";
        $this->proxyip = $proxyip;
        $this->proxyport = $proxyport;

        if (empty ( $this->proxyip ))
            echo "NO PROXY!!\n";

        $this->noexit = $noexit;
        $this->fso = new COM ( 'Scripting.FileSystemObject' );
        $this->fso = NULL;

        $this->iim = new COM ( "imacros" );

        $toexec = "-runner -fx -fxProfile default";

        if ($silent === true)
            $toexec .= " -silent";

        if ($noexit === true)
            $toexec .= " -noexit";

        echo $toexec . "\n";

        $this->iim->iimInit ( $toexec );

        if (! empty ( $this->proxyip )) {
            $dvars ['IP'] = $this->proxyip;
            $dvars ['port'] = $this->proxyport;
            $this->play ( $dvars, 'proxy.iim' );
        }
    }

    function __destruct() {
        if ($this->noexit === false)
            $this->iim->iimExit ();
    }

    function play($immvars = '', $macro) {

        echo "--------------------------------------------------------\n";

        if (is_array ( $immvars )) {
            foreach ( $immvars as $key => $value ) {
                echo "Setting Value $key => $value\n";
                $this->iim->iimSet ( "-var_" . $key, $value );
            }
        }

        echo "Playing Macro $macro\n";
        $s = $this->iim->iimPlay ( $macro );

        if($s>0){
            echo "Macro successfully played!\n";
        }else{
            echo "--------MACRO ERROR!-------------------\n ERROR: " . $this->getLastError() . "\n";
        }
        return $s;
    }

    // This function retrieves extracts in your iMacros script if you have any. 
    function getLastExtract($num) {
        return $this->iim->iimGetLastExtract ( $num );
    }

    // Returns the last error :)
    function getLastError(){
        return $this->iim->iimGetLastError();
    }

    // Enables/disables images
    function setImages($images = 1) { // 1 = on 2 = off

        $dvars ['images'] = $images;
        $this->play ( $dvars, 'images.iim' );

    }

    // Enables or disables adblockplus
    function enableABP($status = true){

        $dvars['status'] = $status;
        $this->play ( $dvars, 'abp.iim' );

    }

}

?> 
```

我在这里缺少什么吗？我在所有这些过程中都在运行 iimRunner.exe [在运行脚本之前手动启动]，并且我有 iMacros Browser V8+。此外，我的grab_data.iim 和所有其他必需的.iim 与试图调用它们并执行它们的php 脚本位于同一位置。

任何形式的帮助和/或朝着正确的方向引导将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-04-30T18:10:45.577

你必须在启动脚本之前启动 immrunner =)

[http://wiki.imacros.net/iimRunner](http://wiki.imacros.net/iimRunner)

# java - 在另一台机器上从一个 jar 加载一个类，而不下载整个 Jar

> ID：15078707
> 
> 赞同：0
> 
> 时间：2013-02-25T23:42:20.053
> 
> 标签：java, applet, classloader

我见过两个相同主题的问题，但似乎没有一个能回答我的问题。 [如何在不下载的情况下从 URL 加载 jar？](https://stackoverflow.com/questions/14751584/how-to-load-a-jar-from-an-url-without-downloading-it)
[从存储库中的 Jar 获取文件，而无需从 Java 下载整个 Jar](https://stackoverflow.com/questions/9231197/get-files-from-jar-which-is-on-the-repository-without-downloading-the-whole-jar)

我在一个小程序中，想从服务器内的 Jar 文件下载类，但不下载整个 jar 文件。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:19:57.547

> 在小程序中，想从服务器内的 Jar 文件下载类，但不下载整个 jar 文件

如果您可以控制服务器代码，请编写一个 servlet，然后使用适当的查询调用该 servlet 以在 jar 中提取所需的类。如下所示：

```
http://myserver.com/myservlet?download_class=x.y.z.class&jar_file=my.jar 
```

小程序将调用上述 URL。在服务器上，您的 servlet 将选择 jar 文件并提取所需的类，然后将其通过（使用`ServletOutputStream`）发送到小程序。

我认为上面应该对你有用。

# svn - SVN、OSX10.7：SSL 握手失败：SSL 错误代码 -1/1/336032856

> ID：15078712
> 
> 赞同：10
> 
> 时间：2013-02-25T23:42:48.903
> 
> 标签：svn, ssl, osx-lion

由于 SSL 握手错误，我无法访问 svn 存储库。这是我得到的输出

```
$ svn ls https://example.edu:40657/folder
svn: OPTIONS of 'https://example.edu:40657/folder': SSL handshake failed: SSL error code -1/1/336032856 (https://example.edu:40657) 
```

这在存储库移动到另一台服务器后开始发生。还颁发了新的安全证书。

我已经看到了这里提出的问题（[在 OS X 10.7 上出现“SSL 错误代码 -1/1/336032856”的握手失败](https://stackoverflow.com/questions/7363259/osx10-7-ssl-handshake-failed)）并阅读了常见问题解答，但我的 ssl 版本是 1.0.1c。我认为这是一个客户端问题，因为没有其他（linux）机器出现这个问题。我已经删除了我的 ~/.subversion 文件夹并在我的钥匙串中删除了任何标记为 svn 或 ssl 的东西，但仍然没有运气。我的猜测是仍然有安全密钥存储在我不知道的地方。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-23T11:08:43.360

尝试使用自签名证书签出服务器上的存储库时，我也遇到了此错误。

你必须满足2个要求：

*   证书中的 CN（通用名称）应与您在 repo URL 中使用的主机名匹配
*   在处理请求的虚拟主机中配置的 ServerName 也应该与 URL 匹配。

后者可能就足够了。

我使用的是来自 Debian 的 default-ssl apache 配置，它没有设置任何特定的 ServerName（因此使用了全局 Apache 配置中的主 ServerName）。通过服务器的真实主机名访问存储库是有效的（您第一次尝试连接时只会收到“证书不是由受信任的机构颁发”警告），但尝试通过任何其他别名访问它（即使是通过它的别名） IP) 因此错误而失败。

所以这里的解决方法是询问服务器管理员真正的 ServerName 是什么（它可能列在 404 错误页面的页脚中）或要求他相应地设置它。

例子：

```
$ svn co https://alias.or.ip.of.the.server.real.hostname/svn/test
svn: OPTIONS of 'https://alias.or.ip.of.the.server.real.hostname/svn/test': SSL negotiation failed: SSL    error code -1/1/336032856 (https://alias.or.ip.of.the.server.real.hostname)

$ svn co https://real.hostname.of.the.server/svn/test
Error validating server certificate for 'https://real.hostname.of.the.server:443':
 - The certificate is not issued by a trusted authority. Use the
   fingerprint to validate the certificate manually!
Certificate information:
 - Hostname: real.hostname.of.the.server
 - Valid: from Mon, 23 Sep 2013 10:55:49 GMT until Thu, 21 Sep 2023 10:55:49 GMT
 - Issuer: real.hostname.of.the.server
 - Fingerprint: 61:81:26:51:53:26:9a:ea:c1:28:b8:6d:22:13:05:8f:81:1a:ed:67
(R)eject, accept (t)emporarily or accept (p)ermanently? 
```

永久存储它，您就可以开始使用了！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-20T15:52:00.923

这也可能由于 TLS 使用 SNI ( [https://en.wikipedia.org/wiki/Server_Name_Indication](https://en.wikipedia.org/wiki/Server_Name_Indication) ) 而发生。

鉴于您正在使用 Apache 和类似这样的配置

```
ServerName  my-server
ServerAlias another-name 
```

客户端使用此 URL 连接到您的服务器

```
svn ls https://svn-server 
```

当客户端使用 SNI 时，它会在握手期间告诉服务器

```
Btw. I think you are called "svn-server" 
```

服务器仅通过名称“my-server”和“another-name”知道自己，因此它会引发 TLS 警告：

```
Warning: I am not called "svn-server". That name is unknown to me. 
```

此警告导致握手失败，因为客户端认为发生了不好的事情。

一种**解决方案**是将客户端使用的名称添加到服务器别名

```
ServerAlias another-name svn-server 
```

并且不要忘记检查 SSL 证书的“通用名称”或别名是否也与客户端使用的名称匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T16:56:21.253

非常感谢 Ned Deily，他的评论是正确的。在我下载并构建 subversion 1.7.8 ( [http://subversion.apache.org/download/#recommended-release](http://subversion.apache.org/download/#recommended-release) ) 后问题就消失了。我还必须下载并构建 neon ( [http://www.webdav.org/neon/](http://www.webdav.org/neon/) )，以允许 svn 识别 http 和 https 地址。最后，我不得不将苹果提供的 svn 二进制文件移动到另一个文件夹以找到新版本（新版本安装到 /usr/local/bin，而苹果提供的版本安装在 /usr/bin 中）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-20T08:22:42.367

[http://subversion.apache.org/faq.html#ssl-error-336032856](http://subversion.apache.org/faq.html#ssl-error-336032856)

当服务器报告的主机名与 SSL 证书中给出的主机名不匹配时，可能会发生这种情况。**确保您的服务器配置为ServerName**和**NameVirtualHost**使用正确的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-30T14:37:08.210

我收到了类似的错误，原因似乎是系统时钟关闭（夏令时刚刚过去，系统时钟关闭了 1 小时）。

# verilog - 在 Verilog 中生成 If 语句

> ID：15078715
> 
> 赞同：3
> 
> 时间：2013-02-25T23:43:07.013
> 
> 标签：verilog

我正在尝试在 Verilog 中创建一个可合成的、参数化的优先级编码器。具体来说，我想在向量中找到最不重要的 1 并返回一个仅包含该 1 的向量。例如：

```
IN[3:0] | OUT[4:0]
--------+---------
1010    | 00010
1111    | 00001
0100    | 00100
0000    | 10000   (special case) 
```

因此，如果向量是四位宽，则代码为：

```
if (in[0]==1'b1) least_one = 1;
else if (in[1]==1'b1) least_one = 2;
else if (in[2]==1'b1) least_one = 4;
else if (in[3]==1'b1) least_one = 8;
else out = 16; // special case in==0, set carry bit 
```

我需要一种通用的、可扩展的方法来执行此操作，因为输入/输出向量长度是参数化的。我目前的代码是：

```
module least_one_onehot
#(parameter ADDR_WIDTH=4)
(output reg [ADDR_WIDTH:0] least_one,
input [ADDR_WIDTH-1:0] in);

genvar i;

always @(in) begin
    if (in[0]==1'b1) least_one = 1;
    generate for (i=1; i<ADDR_WIDTH; i=i+1) begin : U 
        else if (in[i]==1'b1) least_one = 2**i; 
        end 
        endgenerate
    else least_one = 2**ADDR_WIDTH;
    end

endmodule 
```

当我尝试编译它时，我收到以下错误：

```
file: least_one_onehot.v
        generate for (i=1; i<ADDR_WIDTH; i=i+1) begin : U
               |
ncvlog: *E,GIWSCP (least_one_onehot.v,10|8): Generated instantiation can only be valid within a module scope [12.1.3(IEEE 2001)].
                        else if (in[i]==1'b1) least_one = 2**i; 
                           |
ncvlog: *E,NOTSTT (least_one_onehot.v,11|6): expecting a statement [9(IEEE)].
                endgenerate
                          |
ncvlog: *E,GIWSCP (least_one_onehot.v,13|12): Generated instantiation can only be valid within a module scope [12.1.3(IEEE 2001)].
                else least_one = 2**ADDR_WIDTH;
                   |
ncvlog: *E,NOTSTT (least_one_onehot.v,14|5): expecting a statement [9(IEEE)] 
```

我尝试了生成、if 和 always 语句的各种安排，但都没有成功。任何人都知道正确的语法吗？案例陈述实施或其他替代方案也可以。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:57:13.677

我认为您误解了 generate 的工作原理。它不是一个文本预处理器，它通过适当的替换在 generate/endgenerate 对之间发出代码。你必须有完整的句法实体与对。我现在无法访问模拟器，但这可能对你有用（完全未经测试）

```
genvar i;
generate
    for (i = 1; i < ADDR_WIDTH; i = i + 1) begin : U
        least_one[i] = in[i] & ~|in[i - 1:0];
    end
endgenerate
least_one[0] = in[0];
least_one[ADDR_WIDTH] = ~|in; 
```

通常 Verilog 会抱怨非恒定位切片宽度，但由于它在生成循环内，它可能会起作用。

如果像上面那样失败，您只需在 for 循环中测试第一个设置位，然后解码该结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T01:36:13.530

您*不需要*生成块。你可以使用：

```
integer i;
reg found;
always @(in) begin
  least_one = {(ADDR_WIDTH+1){1'b0}};
  found = 1'b0;
  for (i=0; i<ADDR_WIDTH; i=i+1) begin
    if (in[i]==1'b1 && found==1'b0) begin
      least_one[i] = 1'b1;
      found = 1'b1;
    end
  end
  least_one[ADDR_WIDTH] = (found==1'b0);
end 
```

如果您真的想使用生成块，那么您需要分配每个位。

```
assign least_one[0] = in[0];
assign least_one[ADDR_WIDTH] = (in == {ADDR_WIDTH{1'b0}});
genvar i;
generate
  for (i=1; i<ADDR_WIDTH; i=i+1) begin : U
    assign least_one[i] = in[i] && (in[i - 1:0] == {i{1'b0}});
  end
endgenerate 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T01:48:16.420

这模拟了你想要的方式，但它是不可合成的（你没有指定这是否是一个要求）：

```
module least_one_onehot #(parameter ADDR_WIDTH=4) (
    output reg [ADDR_WIDTH-1:0] least_one,
    input      [ADDR_WIDTH-1:0] in
);

always @* begin
    least_one = '0;
    for (int i=ADDR_WIDTH-1; i>=0; i--) begin
        if (in[i]) least_one = 2**i;
    end
end

endmodule 
```

请注意，它使用 SystemVerilog 构造。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-09T07:55:28.123

就个人而言，我喜欢以下代码块来满足您的需求：assign out = {1'b1,in} & ((~{1'b1,in})+1);

你可以试试这个（为了易读性而放弃额外的高位），但我喜欢明确地做这两个恭维以避免任何潜在的兼容性问题。

分配 = in & (-1*in);

# tsql - 如何使用 where 子句遍历表的数据

> ID：15078716
> 
> 赞同：0
> 
> 时间：2013-02-25T23:43:11.257
> 
> 标签：tsql, loops

我有以下数据库和查询：

```
CREATE TABLE table1
    (`group` int, `points` int)
;

INSERT INTO table1
    (`group`, `points`)
VALUES
    (1, 115),
    (2, 125),
    (1, 105),
    (2, 000),
    (3, 005),
    (1, 020),
    (2, 005),
    (1, 010),
    (2, 005),
    (3, 030),
    (2, 000),
    (2, 055),
    (2, 100),
    (1, 020),
    (3, 055),
    (3, 055),
    (1, 005),
    (1, 010),
    (2, 025),
    (1, 035),
    (2, 100),
    (1, 120),
    (3, 140),
    (3, 105),
    (1, 065),
    (3, 025),
    (4, 015),
    (1, 005),
    (2, 010),
    (1, 130),
    (4, 040),
    (1, 055),
    (4, 020),
    (4, 060),
    (3, 010),
    (3, 105),
    (4, 125),
    (3, 000),
    (2, 005),
    (2, 010),
    (1, 115)
;

CREATE TABLE soruce1
    (`group` int)
;

INSERT INTO soruce1
    (`group`)
VALUES
    (1),
    (2),
    (3),
    (4)
;

  select s1.`group`, SUM(t1.`points`) FROM table1 as t1
    inner join soruce1 as s1
      on s1.`group` = t1.`group`
  where s1.`group` = 1
  GROUP BY s1.`group`
  ORDER BY SUM(t1.`points`) ASC; 
```

[数据库和查询](http://sqlfiddle.com/#!2/77428/4)（SQL Fiddle Link）

如何使用 where 子句循环遍历 source1 中的所有值，而不必使用 While 循环，因此当它完成对组 1 的查询时，它将移动到组 2，依此类推，直到表的末尾，自然，选择将用于插入

这只是数据的一个样本，source1 有近 5000 个条目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:49:02.217

注释掉 WHERE 行`-- where s1.group = 1`，你会得到 4 行？你是这个意思吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:50:14.213

您可以删除 where 子句，查询将汇总每个组的总和。

[SQL小提琴](http://sqlfiddle.com/#!3/56e60/1/0)

```
 select s1.[group], SUM(t1.points) FROM table1 as t1
    inner join soruce1 as s1
      on s1.[group] = t1.[group]
  --where s1.[group] = 1
  GROUP BY s1.[group]
  ORDER BY SUM(t1.points) ASC; 
```

# jquery - 点击后的静态“悬停状态”？对于基于部分的网站

> ID：15078717
> 
> 赞同：0
> 
> 时间：2013-02-25T23:43:26.780
> 
> 标签：jquery, css, hover, pageload

我有一个基于部分的网站（选项卡式导航），其中内容被加载到容器中。我也有几个内部选项卡式导航，它们的行为相同。我的问题是用户看不到他们所在的部分，我希望保持悬停状态，直到在同一导航中单击另一个链接。

我认为我没有任何对任何人有用的代码，因为我还没有创建任何代码。如果您需要任何东西，请告诉我 - 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:54:36.300

*我同意上面提到的评论，但我想我对你所指的有所了解*。

您应该有一个 CSS 类**.active**，其中包含与悬停状态相同的样式。

然后，您可以在选择时使用 jQuery **addClass**和**removeClass**，这样其他选项卡就没有这个活动类。

检查这里[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

您也可以在这里查看标签作为参考[http://twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)

# jquery - 为什么我无法在 jQuery 中读取 JSON 数据？

> ID：15078722
> 
> 赞同：0
> 
> 时间：2013-02-25T23:43:59.887
> 
> 标签：jquery, json

我有 jQuery 数据。但我无法阅读它。我不确定为什么。

链接在这里

```
$(document).ready(function(e){
      $('#tolaststep').click(function(e) {
    e.preventDefault();
         var errormessages=[{
                                username: 
                               {
                                    required: "Username is Required"
                                }
                            }];
    alert("Here I am getting the result   "+errormessages[0].username.required);
$('input').each(function()
           {
              if ($(this).val() === "") 
              {
                    var currentid=$(this).attr("id");
                    alert(typeof currentid);
                    alert("I am not getting result here :( "+errormessages[0].currentid.required);
                       $(this).css("border", "1px solid red");
                }

           });
       });
    }); 
```

[http://jsfiddle.net/btJDH/](http://jsfiddle.net/btJDH/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:47:21.483

使用存储在变量中的键访问对象的属性需要方括号：

```
errormessages[0][currentid].required 
```

否则，JS 解释器会认为您正在寻找一个关键的“currentid”。

# ios - UITableView : viewForHeaderInSection: reloadData 期间未调用：

> ID：15078725
> 
> 赞同：131
> 
> 时间：2013-02-25T23:44:14.733
> 
> 标签：ios, uitableview, uitableviewsectionheader

我已经使用正确的委托和数据源链接设置了表格视图。reloadData 方法调用数据源和委托方法，但`viewForHeaderInSection:`.

为什么呢？

* * *

## 回答 #1

> 赞同：264
> 
> 时间：2013-02-25T23:51:41.983

的使用`tableView:viewForHeaderInSection:`要求您还实现`tableView:heightForHeaderInSection:`. 这应该为标题返回一个适当的非零高度。还要确保您没有同时实施`tableView:titleForHeaderInSection:`. 您应该只使用其中一个（`viewForHeader`或`titleForHeader`）。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-06-12T07:55:17.307

诀窍是这两种方法属于不同的`UITableView`协议：`tableView:titleForHeaderInSection:`是**`UITableViewDataSource`**协议方法，其中`tableView:viewForHeaderInSection`属于**`UITableViewDelegate`**.

这意味着：

*   如果您实现方法但仅将自己指定为 `dataSource`for `UITableView`，您的 `tableView:viewForHeaderInSection`实现将被忽略。

*   `tableView:viewForHeaderInSection`具有更高的优先级。如果您实现这两种方法并将自己指定为 the `dataSource`和 the `delegate`，`UITableView`您将返回节标题的视图，但您的 `tableView:titleForHeaderInSection:`将被忽略。

我也试过删除`tableView:heightForHeaderInSection:`；它工作正常，似乎没有影响上述程序。但是文档说它是`tableView:viewForHeaderInSection`正常工作所必需的；所以为了安全起见，实施这一点也是明智之举。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-10-02T15:14:50.253

@rmaddy 两次错误地陈述了该规则：实际上，`tableView:viewForHeaderInSection:`不需要您也实施*，*而且同时调用and`tableView:heightForHeaderInSection:`也很好。我将正确地说明规则以供记录：`titleForHeader``viewForHeader`

规则很简单，`viewForHeader`除非您以某种方式给标题指定高度，否则不会调用它。您可以通过以下三种方式的任意组合来执行此操作：

*   实施`tableView:heightForHeaderInSection:`。

*   设置表的`sectionHeaderHeight`.

*   调用`titleForHeader`（如果标题没有默认高度，这会以某种方式为标题提供默认高度）。

如果你不做这些事情，你将没有标题，`viewForHeader`也不会被调用。那是因为没有高度，运行时将不知道如何调整视图的大小，所以它不会费心去要求一个。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2017-03-08T21:22:33.393

给予`estimatedSectionHeaderHeight`和`sectionHeaderHeight`价值观解决了我的问题。例如， `self.tableView.estimatedSectionHeaderHeight = 100 self.tableView.sectionHeaderHeight = UITableViewAutomaticDimension`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-10-05T21:56:26.800

离开 rmaddy 的回答，我试图隐藏 Header 视图，并为 "tableView:heightForHeaderInSection" 返回 0.0f 和从`tableView:viewForHeaderInSection`.

从更改`return 1.0f`为`return 0.0f`in后，确实调用`tableView:heightForHeaderInSection`了委托方法。`tableView:viewForHeaderInSection`

原来我想要的效果不需要使用“tableView：heightForHeaderInSection”；但这对于在调用“tableView:heightForHeaderInSection”委托方法时遇到问题的其他人可能很有用。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-02-20T10:57:59.367

您应该实现`tableView:heightForHeaderInSection:`并设置标题 > 0 的高度。

此委托方法与方法一起使用`viewForHeaderInSection:`。

我希望这有帮助。

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
         return 40;
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-07-24T11:41:09.087

值得注意的是，如果您实现了return ， then`tableView:heightForHeaderInSection:`将不会被调用。`UITableViewAutomaticDimension``tableView:viewForHeaderInSection:`

`UITableViewAutomaticDimension`假定`UITableViewHeaderFooterView`将使用使用委托方法填充的标准`tableView:titleForHeaderInSection:`。

从评论中`UITableView.h`：

> 如果标题不为零，则返回此值`tableView:heightForHeaderInSection:`或`tableView:heightForFooterInSection:`导致适合返回值的高度。`tableView:titleForHeaderInSection:``tableView:titleForFooterInSection:`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-07-22T08:56:22.197

我刚刚遇到了**iOS 7.1**没有显示标题的问题，但在我测试过的更高版本中工作正常，明确地使用 8.1 和 8.4。

对于完全相同的代码，7.1*根本没有*调用任何节头委托方法，包括：`tableView:heightForHeaderInSection:`和`tableView:viewForHeaderInSection:`.

经过实验，我发现从我制作的标题中**删除**这一行`viewDidLoad`会重新出现在 7.1 中，并且不会影响我测试的其他版本：

```
// _Removing_ this line _fixed_ headers on 7.1
self.tableView.estimatedSectionHeaderHeight = 80; 
```

……所以，至少 7.1 似乎存在某种冲突。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-11-23T07:30:59.843

我也遇到了同样的问题，但是当我使用**xCode 9的****自动高度计算**时，我无法给出上面提到的任何明确的高度值。经过一些实验，我**得到了解决方案**，我们必须重写这个方法，

 ****```
-(CGFloat)tableView:(UITableView *)tableView 
         estimatedHeightForHeaderInSection:(NSInteger)section
{
      return 44.0f;
} 
```

虽然我已经**检查**了两个选项

1.  **自动高度计算**
2.  **自动估计高度计算**

正如苹果所说，来自**故事板**，但我仍然遇到了这个奇怪的错误。

**请注意**：此错误仅在**IOS-10**版本上显示，而不在**IOS-11**版本上显示。也许这是来自 xCode 的错误。谢谢

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-12-05T20:22:15.410

`viewForHeaderInSection`没有被调用的原因是以下两个原因之一：

要么你没有设置你的`UITableViewDelegate`，要么你设置`UITableViewDelegate`不正确。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-09-22T14:39:31.570

这是我发现的（**Swift 4**）（感谢对另一个问题的[评论）](https://stackoverflow.com/a/28488181/428981)

无论我使用的是 titleForHeaderInSection 还是 viewForHeaderInSection - 并不是在滚动 tableview 并加载新单元格时它们没有被调用，而是我为 headerView 的 textLabel 所做的任何字体选择都只出现在加载时最初可见的内容上，而不是在表格滚动时。

修复是 willDisplayHeaderView：

```
func tableView(_ tableView: UITableView, willDisplayHeaderView view: UIView, forSection section: Int) {
    if let header = view as? UITableViewHeaderFooterView {
        header.textLabel?.font = UIFont(name: yourFont, size: 42)
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-10-15T10:57:32.720

在我的情况下，我已经创建了标题视图，并像这样`UITableviewCell`返回单元格`viewForHeaderInSection`

```
return cell 
```

将其更改为

```
return cell.contentView 
```

为我工作。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-10-30T13:04:47.667

就我而言

```
viewForHeaderInSection 
```

是在一个很远的派生类中实现的，它不会打扰到超类。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-07-27T06:34:12.980

就我而言，这是因为我没有实施：

```
func tableView(_ tableView: UITableView, heightForHeaderInSection section: Int) -> CGFloat 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2015-08-06T16:03:32.207

有时在or方法中设置`tableview.delegate`or可能会导致此问题。确保不要这样做...`datasource = nil``viewWillAppear:``viewDidAppear:`

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2017-05-15T00:11:40.143

我已将以下两种方法从 Swift 2 项目中剪切并粘贴到我的 Swift 3 项目中，这些方法从未被调用，因为在 Swift 3 中，这些方法必须在第一个参数名称前有“-”。

```
func tableView(tableView: UITableView, heightForHeaderInSection section: Int) -> CGFloat {
    return 44.0
}

func tableView(tableView: UITableView, viewForHeaderInSection section: Int) -> UIView? {

    let headerView = tableView.dequeueReusableHeaderFooterView(withIdentifier: B2BTrolleyHeaderFooterView.reuseIdentifier) as! B2BTrolleyHeaderFooterView        
    return headerView
} 
```****

# f# - 使用演员将文档快速插入 Couchbase

> ID：15078726
> 
> 赞同：1
> 
> 时间：2013-02-25T23:44:14.953
> 
> 标签：f#, actor, couchbase

我正在编写一个程序，它将大量文档放入 Couchbase 商店。我正在使用 F#，并且我对演员模式很感兴趣，因为我觉得这是一项可以通过演员大大加快的工作。我不确定的是我如何处理 Couchbase 客户端。我想确保尽可能多的与 Couchbase 的连接可用，但不会因参与者过多而导致任何问题。我该如何去实例化客户端，或者有什么可以为我处理的？我在互联网上找不到任何关于人们使用演员模式（不一定是 .NET）将文档插入 Couchbase 的指南。有谁知道有什么好的资源可以让我开始？

# c++ - cURL 下载相机图像（http 请求）

> ID：15078730
> 
> 赞同：1
> 
> 时间：2013-02-25T23:44:32.193
> 
> 标签：c++, image, curl, camera

我已经安装了 cURL，并且能够从网站下载图像，并且工作正常。

这是代码：

```
#define CURL_STATICLIB
#include <stdio.h>
#include <stdlib.h>
#include </usr/include/curl/curl.h>
#include </usr/include/curl/stdcheaders.h>
#include </usr/include/curl/easy.h>

size_t write_data(void *ptr, size_t size, size_t nmemb, FILE *stream) {
   size_t written = fwrite(ptr, size, nmemb, stream);
   return written;
}

int main(void) {
   CURL *curl;
   FILE *fp;
   CURLcode res;

   char *url = "http://www.example.com/test_img.png"; 
   char outfilename[FILENAME_MAX] = "/home/c++_proj/output/web_req_img.png";
   curl = curl_easy_init();
   if (curl) {
       fp = fopen(outfilename,"wb");
       curl_easy_setopt(curl, CURLOPT_URL, url);
       curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write_data);
       curl_easy_setopt(curl, CURLOPT_WRITEDATA, fp);
       res = curl_easy_perform(curl);
       /* always cleanup */
       curl_easy_cleanup(curl);
       fclose(fp);
   }
   return 0;
} 
```

我还有一台 dlink DCS-930L 相机。我可以轻松地将我的相机连接到一个静态 IP 地址，并且我可以通过登录到相机（例如`http://192.168.1.5`）查看相机上的实时视频。我不需要任何特殊的软件或任何东西来开始观看视频。

现在，我想使用 cURL 从相机下载图像。但我不知道该怎么做。有人可以告诉我，或者提供一些代码吗？我要做的就是捕获（采样）一些正在流式传输的图像。我怎么知道何时提出请求，以及何时是图像之间的边界。

我真的很感激一些可以让我前进的建议和代码。

吨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:52:46.237

根据此相机的手册 [1]，您需要使用 Java 或 ActiveX 插件来接收和观看视频：

> 请确保您的计算机上安装了最新版本的 Java 应用程序，以确保在 Java 模式下观看视频时正常运行。Java 应用程序可以从 Sun 的网站 ( [http://www.java.com](http://www.java.com) ) 免费下载。
> 
> 当您连接到相机的主页时，系统会提示您下载 ActiveX。如果您想使用 ActiveX 而不是 Java 来查看视频图像，那么您必须下载 ActiveX。

这表明抓取图像将比简单地发出 HTTP 请求更困难。

```
[1] http://www.dlink.com/us/en/support/product/-/media/Consumer_Products/DCS/DCS%20930L/Manual/DCS%20930L_Manual_EN_US.pdf 
```

# ios - NSManagedObject 在 NSOperation (ARC) 上崩溃

> ID：15078732
> 
> 赞同：0
> 
> 时间：2013-02-25T23:44:42.360
> 
> 标签：ios, objective-c, core-data, exc-bad-access, nsoperation

我正在将我的项目转换为 ARC，当我到达一些`NSOperation`负责在后台下载一些图像的子类时，代码开始崩溃。

所以我有我的`NSOperation`子类及其主要代码：

```
- (void)main
{
    Post *p = [[Post alloc] initWithNewManagedObjectContext];
    Post *post = (Post *)[p findById:postId];
    [post downloadAndProcessImageOfTypeThumbOrAll:thumbOrAll];

    if (![self isCancelled]) {
        [target performSelectorOnMainThread:afterCompletionAction withObject:postId waitUntilDone:NO];
    }
} 
```

该代码在没有**ARC**的情况下（以及适当的版本）编译时有效，但是当它转换为 ARC 时，它在完成 main 方法后立即收到**EXC_BAD_ACCESS异常。**

我想这与 ARC 在应该之前释放任何对象有关，也许是 Posts 对象。但我不知道如何将它们保留更长时间。

此外，`[[Post alloc] initWithNewManagedObjectContext];`创建或重用现有上下文以从 CoreData 访问对象。

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:53:37.813

实际上，一位朋友帮助我找到了问题。感谢每一条评论。

问题出`NSManagedObjectContext`在后台线程正在访问的 .

解决方案是为后台线程创建一个新的上下文，并且使用的技巧是将上下文存储在`threadDictionary`其他后台线程中，如果需要的话。

所以现在，`[[Post alloc] initWithNewManagedObjectContext];`创建了一个单独的上下文：

```
NSManagedObjectContext *managedObjectContext = nil;
NSThread *thread = [NSThread currentThread];
managedObjectContext = [[thread threadDictionary] valueForKey:@"managedObjectContext"];

if (!managedObjectContext) {
    GTCoreData *gtcd = [[GTCoreData alloc] init];
    NSPersistentStoreCoordinator *coordinator = [gtcd persistentStoreCoordinator];
    if (coordinator != nil) {
        managedObjectContext = [[NSManagedObjectContext alloc] init];
        [managedObjectContext setPersistentStoreCoordinator:coordinator];
        [[thread threadDictionary] setValue:managedObjectContext forKey:@"managedObjectContext"];
    }
}

NSEntityDescription *entity = [NSEntityDescription entityForName:@"Post" inManagedObjectContext:managedObjectContext];
Post *post = [[Post alloc] initWithEntity:entity insertIntoManagedObjectContext:managedObjectContext];
return post; 
```

# ruby-on-rails - 无法让 Ruby on Rails 在 Windows 7 上运行

> ID：15078733
> 
> 赞同：0
> 
> 时间：2013-02-25T23:44:49.533
> 
> 标签：ruby-on-rails

这是对较早问题的跟进。我刚刚使用 rails 安装程序 (www.railsinstaller.org) 安装了 Ruby on Rails，但是当我尝试运行任何命令时，`gem -v`或者`rails new sample`我收到一条错误消息：

```
Failed to load C:/Users/Zack/.gemrc due to permissions problem. 
```

任何想法做什么都将非常感激。（请注意，这一切都在 Windows 7 上运行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T06:23:37.113

可能有两个文件`.gemrc`，如 in`C:/Users/Zack/.gemrc`和`C:/ProgramData/gemrc/.gemrc`. 最后验证并删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T06:04:58.683

这只是您在控制台中收到的唯一错误吗？您还检查了该文件是否存在于它指向的目录中。如果是的话，里面有什么。如果您在中发生类似以下的事情，`.gemrc`您应该具有以下内容：

```
"gem": "--no-ri --no-rdoc" 
```

如果此文件存在，这应该可以工作。这可能是在您使用 admin 安装 Ruby 然后创建文件时引起的。有关支持的信息，请检查以下 SO 问题，这也可能支持您[列出的 Ruby gem，但不会加载](https://stackoverflow.com/questions/1260561/ruby-gem-listed-but-wont-load-gem-in-user-dir-not-ruby-dir)

# macos - OS X 数据文件编辑器保存到 XML：是否基于文档？

> ID：15078735
> 
> 赞同：0
> 
> 时间：2013-02-25T23:44:55.837
> 
> 标签：macos, cocoa, core-data, nsdocument

所以我正在尝试为我拥有的 iOS/Android 应用程序制作数据编辑器。我希望能够编辑 3 个单独的数据文件，并且我想将它们保存到 plist 文件或 xml 文件中。我打算在应用程序中使用 Core Data。我遇到的问题：

1）。这是否应该是基于文档的应用程序？

2）。如果是这样，我将如何设置它以允许编辑 3 种不同的文件结构？

3）。如果是这样，我将如何设置基于文档的应用程序以使用常规 plist/xml 文件作为文件类型而不是某些自定义文件类型？

计划是让编辑器能够打开和编辑文件，然后可以将保存的文件复制到iOS和Android应用程序的项目资源中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T06:56:24.083

### 1\. 应用程序是否应该基于文档？

是的。

### 2\. 如何允许编辑三种不同结构的文件？

从以下任一项中选择：

1.  在文档类型列表中创建三个字典，这三个字典都引用同一个文档类。
2.  与上面相同，但根据文档类型使用`windowNibName`或选择 UI。`makeWindowControllers`换句话说，共享模型代码，但不同的视图层次结构。（我可能会选择其中任何一种。）
3.  创建三个文档类型字典，每个字典都有自己的文档类。

您选择哪一种将取决于类型的不同程度。

您可能还希望为每种文档类型导出 UTI。Xcode 不会帮助你。您需要手动编写每个 UTI 词典。

### 3\. 如何将基于文档的应用程序设置为使用常规 plist/xml 文件作为文件类型而不是某些自定义文件类型？

如果您导出一个或多个 UTI，则应适当设置每个 UTI 的父 UTI，但这是建议性的；这意味着您将能够使用通用 plist 或 XML 编辑器/查看器打开文档。

在每个文档类中，读入和写出数据取决于您。您将不得不使用 NSPropertyListSerialization、NSXMLParser、[PRHXMLParser](https://github.com/boredzo/PRHXMLParser)、NSXMLDocument 或其他您认为合适的东西；NSDocument 不会为您处理文件格式。

# java - Java括号索引匹配

> ID：15078736
> 
> 赞同：0
> 
> 时间：2013-02-25T23:45:16.497
> 
> 标签：java, string-matching, parentheses

我正在编写代码来发现字符串的**最左内索引**（我正在做字符串解析）

下面的代码看起来正确吗？

```
 String   t = "VREF_DAC_BAND_GAP_(VALUE|DELTA|TRIM|K(7-0|15-9))"
 int lb_ind = t.indexOf('(', 0);      // left bracket index
 int rb_ind = t.indexOf(')', lb_ind); //right bracket index

 while((t.indexOf("(", lb_ind+1) != -1) && (t.indexOf("(", lb_ind+1) < rb_ind))
      {
          lb_ind = t.indexOf('(', lb_ind+1);
      }

 //  lb_ind should now contain the position of the inner left most parenthesis 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:41:15.630

是的，但是您可以使用下面的而不是 while 循环。

lastIndexOf(String str, int fromIndex)
返回此字符串中指定子字符串最后一次出现的索引，从指定索引开始向后搜索。

```
String   t = "VREF_DAC_BAND_GAP_(VALUE|DELTA|TRIM|K(7-0|15-9))"
int lb_ind = t.indexOf('(', 0);      // left bracket index
int rb_ind = t.indexOf(')', lb_ind); //right bracket index

if(t.lastIndexOf("(", rb_ind) != -1)
  {
      lb_ind = t.lastIndexOf("(", rb_ind);
  } 
```

# shell - 从脚本调用脚本

> ID：15078737
> 
> 赞同：2
> 
> 时间：2013-02-25T23:45:17.177
> 
> 标签：shell

如何让我的 shell 脚本向我回显它调用的脚本失败了？

```
#!/bin/sh

test="/Applications/test.sh"

sh $test

exit 0
exit 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:47:19.520

```
#!/bin/sh

if sh /Applications/test.sh; then
    echo "Well done $USER"
    exit 0
else
    echo "script failed with code [$?]" >&2
    exit 1
fi 
```

`/Applications/test.sh`脚本应该编码良好，以常规状态退出。`0`如果没问题，`> 0`如果失败。

如您所见，不需要测试特殊变量`$?`，我们直接使用[布尔表达式](http://en.wikipedia.org/wiki/Boolean_expression)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:53:02.110

我通常采取以下方法：

```
#!/usr/bin/env bash

test="/Applications/test.sh"
sh "${test}"
exit_status=$?
if [[ ${exit_status} ]] ; then
    echo "Error: ${test} failed with status ${exit_status}." >&2
else
    echo "Success!"
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T23:56:47.907

就最佳实践而言，您不应该这样做。如果脚本失败，它应该在终止之前发出一条错误消息，这样它的父级就不必这样做了。主要原因是进程知道失败的原因，而父进程只能猜测。换句话说，你应该只写：

```
#!/bin/sh

test="/Applications/test.sh"

sh $test 
```

虽然真的，更典型的写法是：

```
#!/bin/sh
/Applications/test.sh 
```

`test.sh`将发出必要的错误消息，并且您的脚本将返回与 did 相同的值`test.sh`。此外，在当前形式下，您的脚本将始终成功，即使`test.sh`实际上失败了，因为`exit 0; exit 1`这毫无意义：`exit 1`永远不会调用。

# watir - 等待 - 安装

> ID：15078743
> 
> 赞同：7
> 
> 时间：2013-02-25T23:46:01.787
> 
> 标签：watir

我已经安装了 Ruby 2、devkit 和 Watir。我收到以下错误。谁能帮我解决这个问题？

```
C:\devkit>irb
DL is deprecated, please use Fiddle
irb(main):001:0> require "watir"
=> true

irb(main):002:0> browser = Watir::Browser.new

LoadError: cannot load such file -- watir-classic
from C:/Ruby200/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
from C:/Ruby200/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in`require'
from C:/Ruby200/lib/ruby/gems/2.0.0/gems/watir-4.0.2/lib/watir/loader.rb:48:in `load_driver'
from C:/Ruby200/lib/ruby/gems/2.0.0/gems/watir-4.0.2/lib/watir/loader.rb:40:in `load_driver_for'
from C:/Ruby200/lib/ruby/gems/2.0.0/gems/watir-4.0.2/lib/watir/loader.rb:8:in `new'
from (irb):2
from C:/Ruby200/bin/irb:12:in `<main>'
irb(main):003:0> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T21:57:40.843

我不确定当时发生了什么，但如果其他人遇到这个问题，我就是这样做的。安装 watir-classic（按照建议），安装 ffi，卸载 ffi，再次安装 ffi。出于某种原因，我有 2 个 ffi 变体（可能是由于最初安装了 Ruby 64 位？），但我还卸载了 64 位 Ruby 并安装了 32 位以使这一切正常工作。– 轻松的卡特 2 月 26 日 13:47

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-08T12:38:18.000

我假设您正在谈论在 Windows 机器上使用 Watir。根据我的经验，以正确的方式安装 Ruby 是最困难的部分。

首先，像在 32 位系统上一样安装所有内容。64 位安装通常会带来不必要的问题。

也就是说，`ffi`gem 也会导致问题，因此您必须将其卸载，然后使用特定标签重新安装：

```
gem uninstall ffi
gem install ffi --platform ruby 
```

最后，显示的错误`LoadError: cannot load such file -- watir-classic`只是意味着您正在做的是试图利用某个不存在的宝石。在这种情况下`watir-classic`，所以以下应该解决这个问题：

```
gem install watir-classic 
```

[在 Windows 上安装 Watir 的完整指南](http://www.testautomation.info/Installing_ruby_with_cucumber_on_a_windows_machine)

# silverlight - 如何在 Windows Phone 的浏览器控件中缓存图像以供离线显示

> ID：15078744
> 
> 赞同：0
> 
> 时间：2013-02-25T23:46:03.897
> 
> 标签：silverlight, webbrowser-control, windows-phone

我想从 Web 检索一些 HTML 内容（例如 RSS 提要），将其保存以供离线使用，然后将其显示在 Windows Phone 应用程序的 Web 浏览器控件中。我可以轻松地将内容保存为字符串并使用 NavigateToString() 方法显示 HTML，但我该如何处理图像？我可以下载它们并保存它们，甚至替换 img 标签的 src 属性，但是我如何拦截 Web 浏览器控件中的图像加载并从本地数据库中提供图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:51:52.393

好吧，您将遇到任何资产的问题，而不仅仅是图像（除非您谈论的是没有任何外部 javascript 或 CSS 的 HTML）。您可能有一种方法来检测资产来源（或者`<script src="">`是一些明显的例子）。然后，您将该资产下载为本地文件。然后，当您显示它时，您会将 HTML 字符串中的所有资产替换为本地副本。`<img src="">``<link href="">`

我根本没有在 Windows Phone 上工作过，但我认为您的解决方案将围绕这些线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:37:41.517

我结束了解析 HTML 下载图像并将 src 属性替换为本地文件名。然后我将 html 保存在本地存储中，以便相关链接继续工作。遗憾的是，我没有找到将内容存储在数据库中的方法，因为如果我使用 NavigateToString 来提供 HTML，我将无法提供图像数据。

# html - 如何在 HTML 中制作工作路径？

> ID：15078748
> 
> 赞同：0
> 
> 时间：2013-02-25T23:46:26.513
> 
> 标签：html

所以，目前我正在制作一个网站。这是一个任务。当我试图在不同的计算机上打开它时，它不起作用。

因此，例如：“a href="file:///E:/​​assignment/main page/index.html#"

它确实在我的电脑上工作，但它不会在另一台电脑上工作。我需要它在任何计算机上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:12:49.430

你的问题有两部分：

**如何让我的网站在任何地方都可以访问？**

您需要一个*网络服务器*，或者您需要使用*托管公司*。GoDaddy、1and1、HostGator 和其他托管公司拥有配置为向世界上任何人显示其网页的计算机（Web 服务器）。它们每月花费大约 10 美元，您最终可以创建链接，例如`http://example.com/myproject/index.html`

您的教授可能会让您将您的网页放在他的一个驱动器上，该驱动器可以在校园的任何地方访问。否则，闪存驱动器可以在紧要关头。将文件放入闪存驱动器，然后将闪存驱动器带到课堂上。

**有没有更好的方法来写链接？**

大多数网站在其链接中使用*相对 URL 。*例如，Stack Overflow`http://stackoverflow.com/whatever`通常不会将每个链接都写为 ，而是使用相对 URL `/whatever`：

`href`在将标签转换为网址时，您的浏览器会遵循一些简单的规则（在此示例中，我们从该页面开始`http://stackoverflow.com/questions/15078748/how-to-make-working-path-in-html#15078792`：）

*   如果链接以`http://`（或 a 之前的任何其他内容`://`）开头，那么您的浏览器会将您带到那里。例如： `http://stackoverflow.com`带您到 Stack Overflow 主页。
*   如果链接以 开头`/`，则浏览器将在执行链接的其余部分之前将您带出任何子文件夹。例如： `/election`将带你到这里：`http://stackoverflow.com/election`
*   如果链接以 开头`../`，那么它将向您发送一个文件夹。这可以多次完成。例如。`../`会送你到这里：`http://stackoverflow.com/questions/`。
*   如果链接以问号、与号或井号标记 ( `?`, `&`, `#`) 开头，那么它通常会将其附加到您当前所在的任何页面上。`#example`会带你去 `http://stackoverflow.com/questions/15078748/how-to-make-working-path-in-html#example` 。
*   最后，浏览器会将您保存在当前文件夹中，然后将您发送到该链接，例如：`example`将发送您到此处： `http://stackoverflow.com/questions/15078748/example`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T00:09:46.830

简单来说，你必须写：

```
<a href="./index.html">...</a> 
```

链接到 index.html 与您的文件 index.html 位于同一目录中的页面；

示例： ./
my_page.html
使用“./”链接同一目录中的页面；

如果源页面和目标页面在不同的文件夹中，则应 根据页面的相对路径使用：
../my_page.html
或
./folder_path/my_page.html 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T23:49:31.577

您必须使用相对路径而不是绝对路径。

# html - 使用 Rails 3.2.1 在 Heroku 生产中添加的旧 HTML

> ID：15078750
> 
> 赞同：0
> 
> 时间：2013-02-25T23:46:38.837
> 
> 标签：html, css, ruby-on-rails-3

这是我的 posts/index.html.erb 文件的代码：

```
<!--
  Iterate over each post in list format
-->
  <% @posts.each do |post| %>       
    <ul class="posts">
    <!--
      Link to article, display date created, show edit, delete links if logged in
    -->
    <li><%= link_to "#{post.title}".html_safe, post, id: "article" %></li>
    <li id="date">  <%= post.created_at.strftime("%B %Y") %></li>

    <% if logged_in? %>
      <li>
        <%= link_to 'Edit', "/editor" + post_path(post), id: "edit_delete", data: {save_url: mercury_update_post_path(post)}  %>
        <%= link_to 'Delete', post, id: "edit_delete", :method => :delete %>    
      </li>
    <% end %>
  </ul>
<% end %> 
```

在我的本地开发和生产环境中，关联的 css 样式表和 html 可以在浏览器中正确编译和呈现。但是，当我将此代码部署到 heroku 时，它会添加一些我之前删除的旧 HTML，如页面源代码所示：

```
 <!--
    Iterate over each post in list format
-->
            <ul class="posts">
                <!--
                    Link to article, display date created
                -->
                <li>    <a href="/posts/5" id="article"><b>Endurance Exercise is Bad for your Health?</b>
<div><b><br></b></div></a>  </li>
                <li id="date">  February 2013                                   </li>

                    <!--
                        Show edit, delete links if logged in
                    -->
            </ul> 
```

请参阅`<div><b><br></b></div>`文章“耐力运动对您的健康有害？”链接标签中嵌入的标签。...任何人都知道为什么在生产中部署到heroku时将其放在那里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:00:59.157

这是你的罪魁祸首。 `"#{post.title}".html_safe`

One of the posts that you are displaying has html tags in its title. It's a bad idea to call `.html_safe` to anything entered by a user. You should escape that using `h(post.title)` or sanitize the string first for accepted tags. Look at the [sanitize helper](http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-sanitize)

# javascript - IOS获取js文件的结果

> ID：15078755
> 
> 赞同：0
> 
> 时间：2013-02-25T23:46:52.130
> 
> 标签：javascript, ios, json, cocoa-touch

我必须从网上获取一些数据，但给定的 url 是一个 js 文件。当我从 url 获取数据时，我得到的是 html 和 javascript 代码。当我在浏览器中打开页面时，我得到了预期的 json 数据，但是如何在 IOS 环境中获取这个 json 数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:57:53.150

您可以将其指向 UIWebView 并在加载完成后读取视图的内容。您的代表将`- (void)webViewDidFinishLoad:(UIWebView *)view`在完成加载后接到电话。

```
NSString *url = @"http://www.newyorktimes.com/page/contents.js";
[webView loadRequest:
    [NSURLRequest requestWithURL:
        [NSURL URLWithString:url]]]; 
```

在您的 webViewDidFinishLoad 中使用：

```
NSString *contents = [view stringByEvaluatingJavaScriptFromString: 
                                         @"document.body.innerHTML"]; 
```

# c# - 使用 Linq 读取 XML 文件

> ID：15078757
> 
> 赞同：3
> 
> 时间：2013-02-25T23:47:00.460
> 
> 标签：c#, asp.net, xml, linq, linq-to-xml

**概括：**

我知道这是一个很长的阅读。总而言之，我需要不在`documentation`列中的每种语言下的名称、前缀和所有值。而且我还需要存储每个标签所归属的语言。

**我的问题是：**

读取数据并将其保存在正确的列中 - 主要是如果有一个*空白值*，它会抛出所有内容。在上面的 Excel 示例中，对于空白的日文标签，以下代码实际上将`gl-plt`移入该`label`列：

```
for(int t=0; t<labelLinkValues.Count; t+=labelLinkCol.Count) {

    for(int j=0; j<labelLinkCol.Count; j++) {
        if(labelLinkCol[j].Value=="prefix")
            Response.Write(labelLinkValues[t+j].Value+"<br/>");

        if(labelLinkCol[j].Value=="name")
            Response.Write(labelLinkValues[t+j].Value+"<br/>");

        for(int p=0; p<langList.Count; p++) {
            if(j>=langList[p].start&&j<=langList[p].end)
                if(labelLinkCol[j].Value!="documentation"&&labelLinkValues[j].Value!="")
                    Response.Write(langList[p].languageValue+"---"+labelLinkValues[t+j].Value+"<br/>");
        }

    }

    Response.Write("----<br>");
} 
```

* * *

**整个故事：**

我正在尝试使用 Linq读取**excel 导出的 XML 文件。**我能够获取数据，但无法使其正常工作，无法将列与正确的行单元格对齐。

在我发布代码之前，我应该提到一些事情。该程序旨在读取**任意数量的文件**，它们可能有**多种语言**（第二行）。在这个特定的示例中，有两种语言，但将来可能有 1 种语言，3 种语言，例如，语言定义如下：

```
<Row ss:AutoFitHeight="0">
    <Cell ss:StyleID="ColumnHead2" ss:Index="4" ss:MergeAcross="1">
        <ss:Data ss:Type="String">en</ss:Data>
    </Cell>

    <Cell ss:StyleID="ColumnHead2" ss:MergeAcross="1">
        <ss:Data ss:Type="String">ja</ss:Data>
    </Cell>
</Row> 
```

第一种语言的索引属性告诉你它从哪里开始，合并告诉你它跨越了多少列。后续语言仅包含跨值合并，这些值告诉您每种语言之后跨越多少列。

首先，这里是两行样本数据的截图。

> （下载图像的分辨率更高） ![在此处输入图像描述](../Images/79598b38d9db1fb7b2886cd3e03cc9e0.png)

这是第一行的相应 XML 代码：

```
<Row ss:AutoFitHeight="0">
    <Cell ss:StyleID="NoBorderNumberCell">
        <ss:Data ss:Type="Number">1</ss:Data>
    </Cell>

    <Cell ss:StyleID="NoBorderCell">
        <ss:Data ss:Type="String">gl-cor</ss:Data>
    </Cell>

    <Cell ss:StyleID="NoBorderCell">
        <ss:Data ss:Type="String">account</ss:Data>
    </Cell>

    <Cell ss:StyleID="NoBorderCell">
        <ss:Data ss:Type="String">Tuple: parent container for account numbers and identifiers. No entry is made here, but each detail line may have multiple accounts assigned to it for reporting in different GAAPs, offsetting accounts in Japan</ss:Data>
    </Cell>

    <Cell ss:StyleID="NoBorderCell">
        <ss:Data ss:Type="String">Account Identifier</ss:Data>
    </Cell>

    <Cell ss:StyleID="NoBorderCell">
        <ss:Data ss:Type="String">タプル。勘定科目番号と識別子&lt;/ss:Data>
    </Cell>

    <Cell ss:StyleID="NoBorderCell"/>

    <Cell ss:StyleID="NoBorderCell">
        <ss:Data ss:Type="String">gl-plt</ss:Data>
    </Cell>
</Row> 
```

我需要从给定的 XML 文件中提取 3 个值：

名称和前缀不是语言的一部分并且始终存在，因此获取它们不是问题。

语言列下未显示的任何值`documentation`。所以我需要**忽略这些`documentation`列**。

现在这是我拥有的代码，可以在上面阅读：

```
XElement xdocument=XElement.Load(fpath);
XNamespace ns="urn:schemas-microsoft-com:office:spreadsheet";
XNamespace docProperties="urn:schemas-microsoft-com:office:office";
XNamespace ss="urn:schemas-microsoft-com:office:spreadsheet";
XNamespace search="ss";

var labelLinkCol=(
    from worksheets in xdocument.Elements(ns+"Worksheet")
    where (string)worksheets.Attribute(ss+"Name")=="Label Link"
    from columnHead in worksheets.Descendants(ns+"Cell")
    where (string)columnHead.Attribute(ss+"StyleID")=="ColumnHead"
    select columnHead
    ).ToList();

var langValues=(
    from worksheets in xdocument.Elements(ns+"Worksheet")
    where (string)worksheets.Attribute(ss+"Name")=="Label Link"
    from columnHead in worksheets.Descendants(ns+"Cell")
    where (string)columnHead.Attribute(ss+"StyleID")=="ColumnHead2"
    select columnHead
    ).ToList();

var labelLinkValues=(
    from worksheets in xdocument.Elements(ns+"Worksheet")
    where (string)worksheets.Attribute(ss+"Name")=="Label Link"
    from columnHead in worksheets.Descendants(ns+"Cell")
    where
        (string)columnHead.Attribute(ss+"StyleID")!="ColumnHead"
        &&
        (string)columnHead.Attribute(ss+"StyleID")!="ColumnHead2"
        &&
        (string)columnHead.Attribute(ss+"StyleID")!="ColumnHead2BL"
    select columnHead
    ).ToList();

int index=0;
List<language> langList=new List<language>();

for(int j=0; j<langValues.Count; j++) {
    language languageXML=new language();

    //the first value has the index
    if(j==0) {
        index=Convert.ToInt32(langValues[j].Attribute(ss+"Index").Value);
        languageXML.index=index;
        languageXML.start=index;
        languageXML.end=index+Convert.ToInt32(langValues[j].Attribute(ss+"MergeAcross").Value);
        languageXML.languageValue=langValues[j].Value;
    }
    else {
        //get the value of when the first language begins
        languageXML.index=index;

        //to get the beginning, get the end of the previous location and add 1
        languageXML.start=langList[langList.Count-1].end+1;

        //to get the last column, add the merge to the beginning
        languageXML.end=languageXML.start+Convert.ToInt32(langValues[j].Attribute(ss+"MergeAcross").Value);
        languageXML.languageValue=langValues[j].Value;
    }

    langList.Add(languageXML);
    //Response.Write(languageXML.start + "--" + languageXML.end + "--" + languageXML.languageValue + "<br>");
} 
```

`language`是一个简单的类，只包含第一种语言的列、当前语言的起始列和当前语言的结束列。

我相信上面的代码是合理的。它读取所有值并正确识别每种语言的开始和结束位置，问题如帖子前面所述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:49:53.073

在我看来，你让它变得比它需要的更复杂。我最近参与了一个项目，该项目要求用户从 excel 中复制数据，这些数据通过剪贴板作为 XML 电子表格读取，然后通过解析器发送并转换为表格格式。

我发现 XML 电子表格参考非常宝贵：http: [//msdn.microsoft.com/en-us/library/office/aa140066 (v=office.10).aspx](http://msdn.microsoft.com/en-us/library/office/aa140066(v=office.10).aspx)

您应该注意的一件事，我认为是您的问题的原因是 ss:Index 不是从零开始的（第 1 列 = 索引 1）。

它真的应该像遍历行然后遍历它们的单元格并跟踪单元格的索引一样简单。您可能还想检查所需的单元格是否有子数据元素。

# c - PThread 互斥锁没有按预期工作

> ID：15078758
> 
> 赞同：2
> 
> 时间：2013-02-25T23:47:06.773
> 
> 标签：c, multithreading, thread-safety, pthreads, mutex

我正在使用互斥锁来尝试将对代码的某些部分的访问限制为一个线程，但不是锁定一次并阻止其他线程，它似乎允许所有线程“锁定”。以下是我的代码，然后是显示代码不起作用的输出部分。

```
//headers defined, etc

pthread_mutex_t queuemutex = PTHREAD_MUTEX_INITIALIZER;

// other code with various functions

int main(void) {

    //unrelated code

    threadinformation **threadArray = (threadinformation **)malloc( POOLSIZE * sizeof(threadinformation) );

    int k;
    for (k = 0; k < POOLSIZE; k++) {
        pthread_t thread;
        threadinformation *currentThread = (threadinformation *)malloc(sizeof(threadinformation));
        currentThread->state = (int *)malloc(sizeof(int));
        currentThread->state[0] = 0;
        currentThread->currentWaiting = currentWaiting;
        currentThread->number = k;
        threadArray[k] = currentThread;
        pthread_create(&thread, NULL, readWriteToClient, threadArray[k]); //thread is created here
        currentThread->thread = thread;
        joinArray[k] = thread;
    }

    //unrelated code

}

static void* readWriteToClient(void *inputcontent) {

    while(1){

        //unrelated code

        pthread_mutex_lock(&queuemutex); //problem happens here

        fprintf(stderr,"Thread %d got locked \n",threadInput->number);

        while((threadInput->currentWaiting->status) == 0){
            pthread_cond_wait(&cond, &queuemutex);
            fprintf(stderr,"Thread %d got signalled \n",threadInput->number);
        }

        connfd = threadInput->currentWaiting->fd;
        threadInput->currentWaiting->status = 0;
        pthread_cond_signal(&conncond);
        pthread_mutex_unlock(&queuemutex);

        //unrelated code

    }

} 
```

输出。

```
Thread 0 got locked 
Thread 7 got locked 
Thread 25 got locked 
Thread 97 got locked 
Thread 6 got locked 
Thread 5 got locked 
Thread 4 got locked 
Thread 3 got locked 
Thread 8 got locked 
Thread 9 got locked 
Thread 10 got locked 
Thread 11 got locked 
Thread 12 got locked 
Thread 13 got locked 
Thread 14 got locked 
Thread 15 got locked 
Thread 16 got locked 
Thread 17 got locked 
Thread 18 got locked 
Thread 19 got locked 
Thread 20 got locked 
    And so on... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:58:54.383

没有问题。

pthread_cond_wait(&cond, &queuemutex);

等待条件变量释放互斥锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T21:12:00.227

fceller 所说的更长的版本是， pthread_cond_wait(&cond, &mutex) 在返回之前做了三件事：它释放锁，然后等待信号，然后等待（如果需要）重新获取锁.

您的示例没有显示什么（如果有的话）发送了第一个信号，也没有显示什么（如果有的话）设置了工作线程正在等待的状态。

这是 pthread_cond_wait() 和 pthread_cond_signal() 的更典型用例。

```
void producer() {
    pthread_mutex_lock(&mutex);
    push_something_on_the_queue();
    ptherad_cond_signal(&cond);
    pthread_mutex_unlock(&mutex);
}

void consumer() {
    pthread_mutex_lock(&mutex);
    while (! time_to_quit) {
        if (queue_is_empty) {
            pthread_cond_wait(&cond, &mutex);
        } else {
            thing = take_something_from_the_queue();

            pthread_mutex_unlock(&mutex);
            do_something_with(thing);
            pthread_mutex_lock(&mutex);
        }
    }
    pthread_mutex_unlock(&mutex);
} 
```

生产者线程将事物放入队列中。消费者线程等待事物出现在队列中，然后将它们弹出并处理它们。消费者在循环中等待，每次唤醒时都会检查队列的状态（即使队列中没有任何内容，线程也可能被“错误地”发出信号）。

当消费者检查队列时，互斥锁被锁定，并且它保持锁定状态，直到消费者睡眠或从队列中弹出一个东西。当消费者睡觉时互斥锁*没有*被锁定，当消费者对事物做任何事情时它也没有被锁定。

任意数量的消费者可以同时在 consumer() 方法中。他们可能正在对不同的事物进行操作，或者他们可能正在睡觉；但是互斥锁确保在任何给定时间不超过一个线程（生产者或消费者）可以访问队列。

# google-ads-api - Google Adwords SOAP 请求

> ID：15078759
> 
> 赞同：0
> 
> 时间：2013-02-25T23:47:10.753
> 
> 标签：google-ads-api

我正在使用 Java Adwords API。有没有一种方法可以让我看到创建 AdGroup（mutate）时发送的 SOAP 请求是什么样子的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:18:42.510

[您可以通过启用日志记录](http://code.google.com/p/google-api-ads-java/source/browse/examples/adwords_axis/src/main/resources/log4j.properties)来查看 SOAP XML 。默认`soapXmlLogger`只是配置为记录错误，但如果您想查看所有内容，可以将其更改`WARN`为；`INFO`例如：

```
log4j.category.com.google.api.ads.adwords.lib.client.AdWordsServiceClient.soapXmlLogger=INFO, SOAP_LOG, CONSOLE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-15T22:34:21.263

与您的用户对象 - 调用 -

$user->LogAll();

默认情况下，这将写入一个名为soap_xml.log 的文件——您可能需要创建它或调整权限以确保它可被apache 写入——但您应该能够在那里看到所有的soap 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-04T23:02:48.533

使用**log4j.xml**，以下附加程序将删除soap请求/响应日志

```
<logger name="com.google.api.ads.adwords.lib.client.AdWordsServiceClient.soapXmlLogger"  additivity="false">
    <level value="error"/>
    <appender-ref ref="<your-appender>"/>
</logger> 
```

# javascript - 显示数组的其余内容

> ID：15078764
> 
> 赞同：0
> 
> 时间：2013-02-25T23:47:31.257
> 
> 标签：javascript, for-loop

我正在尝试使用 FOR 循环来显示数组的内容。

我要创建的函数类似于 underscore.js _.rest 函数，但目标是使用 FOR 循环。

休息（anyArray，n）；

所以如果我输入“rest([1,2,3,4,5], 3);”，我想返回“[4,5]”。

这是我所拥有的，但它不起作用：

```
rest: function (anyArray, n) {
  var isArray = (anyArray instanceof Array),
    isNum = (typeof n === 'number'),
    result = new Array,
    valRange = (n >= 0);
  if (isArray && isNum) {
    for (len = anyArray.length, i = 0, j = (len - (n + len)); i < j, n < len; i++, j++) {
      result[i] = anyArray[j];
    }
    return result;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:50:17.100

```
rest: function (anyArray, n) {
    return anyArray.slice(n);
} 
```

* * *

```
rest: function (anyArray, n) {
    var output = [];
    for (; n < anyArray.length; n++) {
        output.push(anyArray[n]);
    }
    return output;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:58:10.257

导致“不工作”的部分是`j = (len - (n + len))`：本质上，你说`j = n`，然后你正在循环 while `i < j`。我希望你真正想要的是`j < len`. 此外，您应该添加`var`关键字：

```
rest: function(anyArray, n){
    var isArray = (anyArray instanceof Array),
        isNum = (typeof n === 'number'),
        result = [];
    if (isArray && isNum) {
        for (var len = anyArray.length, i = 0, j = n; j < len; i++, j++) {
            result[i] = anyArray[j];
        }
        return result;
    }
    // else?
} 
```

当然，仅使用本机[`slice`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)会容易得多。

# jquery - .click, .live, .on... 没有触发我的代码？

> ID：15078767
> 
> 赞同：0
> 
> 时间：2013-02-25T23:47:48.510
> 
> 标签：jquery, live

我不知道为什么这不起作用？我一直在使用点击，实时，它只是有效但不在这里......知道为什么吗？

什么在 p.tableItem.live 中不起作用

渲染的行看起来像这样

```
<tr>
    <td>
<p id="spEmailAddress_2_0" class="tableItem" alt="EmailAddress">charlie.nguyen@exacttarget.com</p></td><td><p id="spUserID_2_1"  class="tableItem" alt="Number">10442135</p></td><td><p id="spSubscriberKey_2_2" class="tableItem" alt="Text">charlie.nguyen@exacttarget.com</p>
    </td>
</tr> 
```

这是未运行的脚本

```
<script type="text/javascript">

    $(document).ready(function() {

        $.post(wsUrl, { Method: "GetDEs"}).done(function(data){
            data = CreateObjectFromOutput(data);
            $("#DEContainer").html(BuildDEDDL(data));

            $("#ddlDE").change(function(){
                $.post(wsUrl, { Method: "GetFieldsAndRows", Input: JSON.stringify({ DEName: $(this).val()})}).done(function(data){
                    data = CreateObjectFromOutput(data);
                    $("#FieldContainer").html(BuildFiledTable(data));
                    $(".Date").datepicker();
                });
            });
        });

        $("p.tableItem").live("click", function(event){
            alert($(this).text());
        });

    });

</script>
</head>
<body>
    <div id="Wrapper">
        <div id="DEContainer"></div>
        <div id="FieldContainer"></div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:53:22.670

为什么不这样？

```
$("p.tableItem").click(function(){
   alert($(this).text());
}); 
```

或者

```
 $("p.tableItem").bind('click', function() {
    alert($(this).text());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:55:11.713

表格行必须在`table`元素中，而不是在`div`元素中。将其更改为表格：

```
<table id="FieldContainer"></table> 
```

# android - 通过 google play 控制台禁用某些 Android 版本的 apk

> ID：15078768
> 
> 赞同：3
> 
> 时间：2013-02-25T23:47:50.320
> 
> 标签：android, google-play, android-4.2-jelly-bean

我有一个可以按计划打开和关闭飞行模式的应用程序。或者，更确切地说，它可以，直到 Android 4.2 出现，并且此设置[变得不可用](https://stackoverflow.com/questions/13422527/modify-airplane-mode-on-on-android-4-2-and-above)。我的应用没有在清单中设置 android:maxSdkVersion，而且我已经开始收到来自拥有 Android 4.2 设备的用户的愤怒电子邮件。此外，根据[这里的答案](https://stackoverflow.com/questions/9747599/android-app-to-be-runned-only-in-2-2-and-2-1-versions)， android:maxSdkVersion 可能不是最好的解决方案。

我想为 Android 4.2+ 用户禁用我的应用程序，但保持它可用于 4.2 之前的设备。最好的方法是什么？理想情况下，通过开发者控制台，无需上传新的 apk。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:12:00.340

就像这里所说[的](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)那样，并且在您链接到的问题中，设置`maxSdkVersion` *确实*在 Google Play 中过滤它，所以它不会被高于该级别的设备看到。不过，这是唯一检查它的地方。侧载仍然是可能的。

您将遇到的唯一真正问题是人们升级他们的操作系统。如果他们从 Play with 4.1 下载它，然后升级到 4.2，则该应用程序将无法正常运行。

对于这些用户（和侧加载器），您可能希望在启动时进行版本检查。如果他们未通过检查，请在对话中优雅地告诉他们发生了什么，等等。这比无形的“它不再起作用了！”要好得多。

# django - django-paging 不可散列类型

> ID：15078770
> 
> 赞同：5
> 
> 时间：2013-02-25T23:48:05.077
> 
> 标签：django, pagination, jinja2, django-pagination

paginators.py (django-paging 包):

```
try:

_page = EndlessPage(list(self.object_list[bottom:top]), number, self) 
```

这一行给出了一个 `TypeError: unhashable type error，尽管该 object_list 来自一个标准的 QuerySet，可以毫无问题地与 [bottom:top] 一起使用。

模板：

```
{% with paginate(request, my_queryset) as results %}
{{ results.paging }}
    {% for result in results.objects %}
        {{ result }}
    {% endfor %}
{{ results.paging }}
{% endwith %}` 
```

看法：

```
my_objects = BetterPaginator(queryset,25)
page = 1
context = { 'my_queryset': my_objects.get_context(page) } 
```

# c# - List Newbie：每次迭代都会覆盖 xml 元素和域对象的列表

> ID：15078773
> 
> 赞同：0
> 
> 时间：2013-02-25T23:49:04.547
> 
> 标签：c#, c#-4.0, xml-parsing

我有两个域类如下：

```
Class FooA:

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace XXX.MyCore.Domain
{
  public class FooA
    {
        public string String_FA { get; set; } 
        public string String_FB { get; set; }

    }
}

Class FooB

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace XXX.MyCore.Domain
{
    public class FooB
    {
        public string FooC{ get; set; }
        public List<FooA> FooA_List { get; set; }

    }
} 
```

我的 xml 重复节点如下（共 6 个）：

```
:
:
      <ns2:Example>
        <A>DataA1</A>
        <B>DataB1</B>   
      </ns2:Example>
      <ns2:Example>
        <A>DataA2</A>
        <B>DataB2</B>
      </ns2:Example>
:
: 
```

我有另一个类引用这些域对象。

```
:
:

List<FooA> fooANodeElemValue = new List<FooA>();
FooA fA = new FooA();

// I now iterate through the XML elements to parse sibling values

 foreach (XElement elem in document.Descendants().Elements(nsUsr + "ExampleA"))
                                {
                                    fA.String_FA= elem.Element("A").Value;
                                    fA.String_FB= elem.Element("B").Value;

                                    fooNodeElemValue.Add(fA);
                                    FooB.FooA_List= fooNodeElemValue;

                                } 
```

我能够构建一个包含六个父项的列表以及每个包含 fA 对象的相应子元素。但是，对于 forEach 块中的每次迭代，列表都会被新的兄弟节点值覆盖。具体来说，

```
fooNodeElemValue.Add(fA); 
```

和

```
FooB.FooA_List= fooNodeElemValue; 
```

被覆盖。

因此，当循环完成时，每个列表元素被复制 6x 所以，

```
FooB.FooA_List[0] = {DataA2, DataB2} 
```

和

```
FooB.FooA_List[1] = {DataA2, DataB2}
              :
              : 
```

非常感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:58:24.993

首先，您想在每次迭代中实例化一个新的 FooA。其次，没有理由每次都重置列表，可以使用现有的。尝试以下更改：

```
// Create a new list and assign it to the public property of FooB...
FooB.FooA_List = new List<FooA>();

foreach (XElement elem in document.Descendants().Elements(nsUsr + "ExampleA"))
{
    // Create a temporary variable (in the scope of this loop iteration) to store my new FooA class instance...
    FooA fA = new FooA() { 
        String_FA = elem.Element("A").Value, 
        String_FB = elem.Element("B").Value
    };

    // Because FooB.FooA_List is the list I want to add items to, I just access the public property directly.
    FooB.FooA_List.Add(fA);
} 
```

做一些事情，比如创建一个全新的列表，然后将该列表分配给的属性`FooA`只是很多额外的工作。`fA`是一个仅存在于*当前循环迭代*范围内的实例，一旦循环进入下一个循环，`fA`就会自动成为全新的，就好像它从未存在过一样。

`FooB.FooA_List`是您要添加内容*的列表实例。*不断地将此变量重新分配给列表实例的不同副本是没有意义的。因此，无需`FooB.FooA_List = whatever`在循环中使用，因为您可以直接通过 访问实例`FooB.FooA_List`，并使其通过`FooB.FooA_List.Add(whatever);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:14:35.027

我弄清楚了问题所在。1\. 我需要在循环中实例化 fA 对象。2\. 我需要在循环中将 fA 对象设置为 null。

```
foreach (XElement elem in document.Descendants().Elements(nsUsr + "ExampleA"))
{
FooA fA = new FooA();                             
fA.String_FA= elem.Element("A").Value;
fA.String_FB= elem.Element("B").Value;

fooNodeElemValue.Add(fA);
FooB.FooA_List= fooNodeElemValue;
fA =null;
} 
```

# java - 从 ByteBuffer 读取字符串而不使用双缓冲

> ID：15078778
> 
> 赞同：3
> 
> 时间：2013-02-25T23:49:36.180
> 
> 标签：java, optimization, nio, bytebuffer

有没有一种方法可以在不首先从缓冲区读取内容到中间体的情况下构造一个`String`from ？`ByteBuffer``byte[]``char[]`

一个类似于[接受 byte[] 的字符串构造函数](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28byte%5B%5D,%20int,%20int,%20java.nio.charset.Charset%29)的 API 让我觉得很理想：

```
public String(ByteBuffer buffer, int offset, int length, Charset charset) 
```

...但不存在这样的事情。

我发现[如何从 ByteBuffer 转换为 Integer 和 String？](https://stackoverflow.com/questions/7395695/how-to-convert-from-bytebuffer-to-integer-and-string)，但它使用辅助数组。

到目前为止，我发现的下一个最好的事情是将字节缓冲区投影为 a`CharBuffer`和 call [`toString()`](http://docs.oracle.com/javase/7/docs/api/java/nio/CharBuffer.html#toString%28%29)。但这不允许使用类似`UTF-8`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:58:42.297

怎么样[`CharsetDecoder.decode`](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/CharsetDecoder.html#decode%28java.nio.ByteBuffer%29)和调用[`toString`](http://docs.oracle.com/javase/7/docs/api/java/nio/CharBuffer.html#toString%28%29)返回的[`CharBuffer`](http://docs.oracle.com/javase/7/docs/api/java/nio/CharBuffer.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:58:26.237

哪有这回事。

ByteBuffer 不包含字符。必须先将它们转换为字符，然后才能用它们制作字符串。

此外，字符串必须在 JVM 内存中。ByteBuffer 可以被映射或直接，在这两种情况下它都在 JVM 之外。

为了将数据移入 JVM 并将其转换为字符，您必须使用辅助数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T00:01:38.877

java.lang.String 是不可变的和最终的，因此最终别无选择，只能最终以它已经接受的格式提供数据。（当然没有通过反射来操纵它的内部......）

您可以隐藏使用字符串构建器或其他东西的 API 背后的丑陋，但在某些时候，内存中会有两个数组副本，一个在构建器中，另一个用于实际字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T00:01:56.323

`String`由`char`s 组成，而不是`byte`s。您需要一个**字符集**，用于将字节转换为字符，例如 UTF-8、UTF-16、ISO-8859-1、ISO-8859-5、...

如果你不知道字符集，你就不会知道**字节代表哪个字符**。

# background - windows 8 设置为桌面背景

> ID：15078780
> 
> 赞同：2
> 
> 时间：2013-02-25T23:49:41.887
> 
> 标签：background, wallpaper

我正在编写一个小程序，只需单击一两次鼠标即可更改桌面背景..

我知道我可以右键单击任何图像文件并将其设置为桌面背景..

问题正是从那里开始的。我无法在任何 dll 中找到正确的条目，该条目具有“设置为桌面背景”甚至“新桌面背景”条目。

我知道如何在注册表中创建它们，但我不想为此编辑注册表，而是希望在我的小程序中正确设置它，这样只需单击两次，我就可以控制计算机上的所有图像文件将它们显示为桌面背景。这来自任何文件夹甚至任何连接的驱动器，而无需返回个性化菜单。

如果你们中的任何人知道我在哪里可以找到上述上下文菜单字符串的条目，那么我将非常感激。

仅供个人使用，不得出售或赠送。

谢谢克里斯

PS 请原谅我的英语不好，我来自一个非英语的欧洲国家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T21:28:09.800

例如，如果您查看 HKEY_CLASSES_ROOT\SystemFileAssociations.jpg\Shell\setdesktopwallpaper\Command

您会注意到它具有 DelegateExecute 成员集。这意味着 Windows 将尝试使用指定 DLL 中的 IExecuteCommand 接口。阅读 MSDN 上的内容，并尝试模拟资源管理器，我想出了这个，它有效。

我不确定为什么需要 Sleep()，但如果有人能详细说明，我会很高兴。

```
void SetWallpaper(LPCWSTR path)
{
    const GUID CLSID_SetWallpaper = { 0xFF609CC7, 0xD34D, 0x4049, { 0xA1, 0xAA, 0x22, 0x93, 0x51, 0x7F, 0xFC, 0xC6 } };
    HRESULT hr;
    IExecuteCommand *executeCommand = nullptr;
    IObjectWithSelection *objectWithSelection = nullptr;
    IShellItemArray *shellItemArray = nullptr;
    IShellFolder *rootFolder = nullptr;
    LPITEMIDLIST idlist = nullptr;

    // Initalize COM, probably shouldn't be done in this function
    hr = CoInitialize(nullptr);
    if (SUCCEEDED(hr))
    {
        // Get the IExecuteCommand interface of the DLL
        hr = CoCreateInstance(CLSID_SetWallpaper, nullptr, CLSCTX_INPROC_SERVER, IID_IExecuteCommand, reinterpret_cast<LPVOID*>(&executeCommand));

        // Get the IObjectWithSelection interface
        if (SUCCEEDED(hr))
        {
            hr = executeCommand->QueryInterface(IID_IObjectWithSelection, reinterpret_cast<LPVOID*>(&objectWithSelection));
        }

        //
        if (SUCCEEDED(hr))
        {
            hr = SHGetDesktopFolder(&rootFolder);
        }

        if (SUCCEEDED(hr))
        {
            hr = rootFolder->ParseDisplayName(nullptr, nullptr, (LPWSTR)path, nullptr, &idlist, NULL);
        }

        if (SUCCEEDED(hr))
        {
            hr = SHCreateShellItemArrayFromIDLists(1, (LPCITEMIDLIST*)&idlist, &shellItemArray);
        }

        if (SUCCEEDED(hr))
        {
            hr = objectWithSelection->SetSelection(shellItemArray);
        }

        if (SUCCEEDED(hr))
        {
            hr = executeCommand->Execute();
        }

        // There is probably some event, or something to wait for here, but we
        // need to wait and relinquish control of the CPU, or the wallpaper won't
        // change.
        Sleep(2000);

        // Release interfaces and memory
        if (idlist)
        {
            CoTaskMemFree(idlist);
        }
        if (executeCommand)
        {
            executeCommand->Release();
        }
        if (objectWithSelection)
        {
            objectWithSelection->Release();
        }
        if (shellItemArray)
        {
            shellItemArray->Release();
        }
        if (rootFolder)
        {
            rootFolder->Release();
        }

        CoUninitialize();
    }
} 
```

编辑：在对此做了更多研究之后，为了我自己，我意识到 stobject.dll 实际上只是使用 IDesktopWallpaper 接口；这是 CLSID_DesktopWallpaper 的一部分

[http://msdn.microsoft.com/en-us/library/windows/desktop/hh706946(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh706946(v=vs.85).aspx)

# node.js - 如何使用 PHP 通知 NodeJS 服务器？

> ID：15078783
> 
> 赞同：0
> 
> 时间：2013-02-25T23:49:50.533
> 
> 标签：node.js, socket.io

我想为基于 PHP 的论坛添加实时功能 - 新帖子一经创建就会自动显示给用户。

我觉得有点困惑的是 PHP 代码和 NodeJS+socket.io 之间的交互。

我将如何通知 NodeJS 服务器有关新帖子并让服务器通知正在观看帖子发布的线程的客户端？

**编辑**

尝试了以下代码，它似乎有效，我唯一的问题是这是否被认为是一个好的解决方案，因为它看起来有点乱。

我使用 socket.io 在端口 81 上监听客户端，而运行 om 端口 82 的服务器仅供论坛使用 - 当创建新帖子时，PHP 脚本会在端口 82 上向 localhost 发送 POST 请求，连同数据。

这个可以吗？

```
var io = require('socket.io').listen(81);

io.sockets.on('connection', function(socket) {
    socket.on('init', function(threadid) {
        socket.join(threadid);
    });
});

var forumserver = require('http').createServer(function(req, res) {
    if (res.socket.remoteAddress == '127.0.0.1' && req.method == 'POST') {
        req.on('data', function(chunk) {
            data = JSON.parse(chunk.toString());
            io.sockets.in(data.threadid).emit('new-post', data.content);
        });
    }

    res.end();
}).listen(82); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:10:29.547

您在特殊端口上运行的 HTTP 服务器的解决方案正是我在遇到类似问题时最终得到的解决方案。PHP 应用程序只是使用[curl](http://www.php.net/manual/en/ref.curl.php)到`POST`Node 服务器，然后将消息推送到 socket.io。

**但是**，您的 HTTP 服务器实现已损坏。事件`data`就是[`Stream`](http://nodejs.org/api/stream.html)事件；流**不发出消息**，它们发出数据块。换句话说，请求实体数据可以被分成两个块并发出。

如果`data`事件发出部分数据块，`JSON.parse`几乎肯定会抛出异常，并且您的 Node 服务器会崩溃。

您要么需要手动[缓冲数据](https://stackoverflow.com/a/14540576/201952)，要么（我的建议）为您的 HTTP 服务器使用更强大的框架，例如[Express](http://expressjs.com)：

```
var express = require('express'), forumserver = express();
forumserver.use(express.bodyParser()); // handles buffering and parsing of the
                                       // request entity for you
forumserver.post('/post/:threadid', function(req, res) {
    io.sockets.in(req.params.threadid).emit('new-post', req.body.content);
    res.send(204); // HTTP 204 No Content (empty response)
});

forumserver.listen(82); 
```

PHP 只需要使用包含`content`. （可接受 JSON、URL 编码或多部分编码的实体。）确保您的防火墙在您的公共接口上阻止端口 82。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T05:21:38.693

关于 PHP 代码/论坛与 Node.JS 的交互，您可能需要创建一个 API 端点来监听对论坛所做的更改。根据您的论坛软件，您可能希望在此时加入创建新帖子的过程并执行对 Node.js 的 API 回调。

开箱即用的 Socket.io 面向通过 Javascript 在前端连接的网站访问者。在 Node 服务器收到新帖子更新的通知后，它会通知已连接的客户端这个新帖子及其详细信息，此时它可能会将新的 HTML 添加到访问者正在查看的页面的 DOM 中。

您可能希望安排事物的 Socket.io 部分，以便用户仅订阅他们在特定房间（例如“subforum123”）发出的特定事件，以便他们仅接收适用帖子的通知。

# html - 网格布局中的块级链接元素，chrome中的怪癖

> ID：15078797
> 
> 赞同：3
> 
> 时间：2013-02-25T23:50:54.040
> 
> 标签：html, css, google-chrome

如果这里有一些非常明显的地方需要纠正，我深表歉意，但我对此感到困惑。我只是尝试在网格布局中布局一系列链接（样式为块级元素）。我已经把我想做的事情归结为这里最简单的状态：http: [//cdpn.io/JLdne](http://cdpn.io/JLdne)

在 Safari 和 Firefox 中，它按我的预期呈现，但在 Chrome（所有浏览器中）中，第二个和第三个链接元素又向下移动了 32 个像素。

我的一部分是说我可能在 chrome 中发现了一个奇怪的错误，但我认为更有可能是我做错了什么。有一个更好的方法吗？我尝试将 a 元素更改为显示为内联块，而不是使用浮动，但它开始在我的布局中引起其他问题。想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:58:51.590

在 div 类上删除 clear:both

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:07:30.293

似乎这只影响 Chrome 25 ......刚刚在 Spoon.net 上使用 Chrome 24 进行了测试，它的呈现与 Firefox 相同

# mysql - 不会在 MySQL 表上创建外键约束

> ID：15078799
> 
> 赞同：1
> 
> 时间：2013-02-25T23:51:14.623
> 
> 标签：mysql, foreign-keys

好的，这是我的两个有冲突的表：

```
CREATE TABLE visit_physician (
   visit_id INT(11) UNSIGNED NOT NULL,
   physician_id INT(11) UNSIGNED NOT NULL,
   physician_role INT(11) UNSIGNED NOT NULL,
   PRIMARY KEY(visit_id, physician_id)
);

CREATE TABLE physician_role (
   id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT KEY,
   name VARCHAR(50) NOT NULL,
   UNIQUE(name)
);

ALTER TABLE visit_physician
ADD CONSTRAINT FK_roleid
FOREIGN KEY (physician_role) REFERENCES physician_role(id)
ON UPDATE CASCADE
ON DELETE CASCADE; 
```

医生角色和 id 是相同的数据类型和大小以及一切.. 那么为什么不创建呢？我的其他外键分配没有问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:04:49.020

我在 MySQL 5.5.29 上测试了你的语句，它们运行良好。请注意，两个表都必须使用 InnoDB 存储引擎才能支持外键。如果不是，MySQL 将解析但忽略这些约束的声明。

在我的实例中，默认存储引擎是 InnoDB。您的 CREATE TABLE 语句未指定存储引擎，因此它们将使用默认值。检查您的环境中的默认存储引擎是什么：

```
mysql> show global variables like 'default_storage_engine';
+------------------------+--------+
| Variable_name          | Value  |
+------------------------+--------+
| default_storage_engine | InnoDB |
+------------------------+--------+ 
```

使用 .检查表使用的存储引擎`SHOW TABLE STATUS LIKE '%physician%'`。查看输出的 Engine 列：

```
+-----------------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+-------------+------------+-------------------+----------+----------------+---------+
| Name            | Engine | Version | Row_format | Rows | Avg_row_length | Data_length | Max_data_length | Index_length | Data_free | Auto_increment | Create_time         | Update_time | Check_time | Collation         | Checksum | Create_options | Comment |
+-----------------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+-------------+------------+-------------------+----------+----------------+---------+
| physician_role  | InnoDB |      10 | Compact    |    0 |              0 |       16384 |               0 |        16384 |         0 |              1 | 2013-02-25 15:56:26 | NULL        | NULL       | latin1_swedish_ci |     NULL |                |         |
| visit_physician | InnoDB |      10 | Compact    |    0 |              0 |       16384 |               0 |        16384 |         0 |           NULL | 2013-02-25 15:56:26 | NULL        | NULL       | latin1_swedish_ci |     NULL |                |         |
+-----------------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+-------------+------------+-------------------+----------+----------------+---------+ 
```

如果引擎是 MyISAM 或其他存储引擎，则可能无法创建约束。

如果要将存储引擎更改为 InnoDB，可以这样做：

```
mysql> ALTER TABLE visit_physician ENGINE=InnODB;
mysql> ALTER TABLE physician_role ENGINE=InnODB; 
```

然后您应该能够重新执行约束的创建。但是，如果表中已经包含不满足约束的数据，则可能会导致问题。

但在进行任何此类更改之前，我鼓励您测试您的应用程序是否仍可与不同的存储引擎一起使用。它很可能会正常工作，但测试总是一个好主意。

* * *

当您尝试添加外键时会发生什么？如果它给出这样的错误：

```
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint 
fails (`test`.`#sql-c67_52`, CONSTRAINT `FK_roleid` FOREIGN KEY (`physician_role`) 
REFERENCES `physician_role` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) 
```

那么您可能在表中已经有一些不满足约束的值。

关于存储引擎和数据类型的其他可能性也可能导致错误，但我们已经排除了，因为您说表都是 InnoDB 并且数据类型看起来相同，并且在我测试时它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T01:37:57.397

我认为这可能与一张表上的两个外键约束有关，但我在创建表时添加了它们，所以它是这样的：

```
CREATE TABLE visit_physician (
   visit_id INT(11) UNSIGNED NOT NULL,
   physician_id INT(11) UNSIGNED NOT NULL,
   physician_role INT(11) UNSIGNED NOT NULL,
   PRIMARY KEY(visit_id, physician_id),
   CONSTRAINT FOREIGN KEY (physician_id) REFERENCES user (id) ON DELETE CASCADE ON UPDATE CASCADE,
   CONSTRAINT FOREIGN KEY (physician_role) REFERENCES physician_role (id) ON DELETE CASCADE ON UPDATE CASCADE
); 
```

以防万一有人遇到我遇到的奇怪问题..

# objective-c - IOS模拟器中的UI不显示

> ID：15078801
> 
> 赞同：0
> 
> 时间：2013-02-25T23:51:28.360
> 
> 标签：objective-c, sqlite, ios-simulator, xcode4.2

我有一个问题，我正在尝试根据我在此处发布的教程创建数据库。我一直遇到的问题是，当我构建项目时，项目构建成功。但是，当 IOS 模拟器启动以向我显示 UI 时，我有一个黑屏。我已经加倍检查了我与故事板的连接是否正确。我的用户界面仍然没有显示。我已确保我的 sqlite 库已连接到项目中，并且确实如此。这是 IPAD 的单一视图应用程序。我已经搜索了在我的代码中查找问题的方法，并且我已经完成了断点以查看我的应用程序在哪里中断。这就是我发现的。 ![在此处输入图像描述](../Images/fd2c3d140b6e2977134d3a6005c7f3fa.png)

这是我的应用程序中断的地方，因为这是我启动 IOS 模拟器后它弹出的第一个屏幕。我不知道如何解决这个问题。

![在此处输入图像描述](../Images/b2cc79303f5abc7eb16a11c85a105eab.png) 这个屏幕基本上告诉我 UIwindow 分配有问题。出于某种原因，这里中断了，我不知道为什么。

![在此处输入图像描述](../Images/b0c784786b98aca9e0188d8bef6a2295.png) 最后一个屏幕截图不太好解释，特别是如果它是数字的话。

请帮忙。如果需要，我将在这一点上发布更多屏幕截图，我需要我能得到的所有帮助。我不认为创建和链接数据库会很困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:07:29.283

如果您使用故事板，则需要删除 didFinishLaunchingWithOptions 中的所有代码并返回 YES。还要在 plist 文件中适当地设置您的主故事板文件。

# javascript - JavaScript 设计模式：注入尚未创建的依赖项

> ID：15078811
> 
> 赞同：1
> 
> 时间：2013-02-25T23:52:36.007
> 
> 标签：javascript, design-patterns, dependency-injection, commonjs

我有一个 CommonJS 模块：

```
// main-module
module.exports = function () {
  var foo,
      someModule = require('other-module')(foo);

  // A value is given to foo after other-module has been initialised
  foo = "bar";
} 
```

如您所见，这需要`other-module`：

```
// other-module.js
module.exports = function (foo) {
  function example() {
    console.log(foo);
    // > "bar"
  }
} 
```

我希望`example`里面的函数`other-module`知道`foo`里面的变量`main-module`，即使它是在需要模块之后建立的。

`other-module`运行时，`foo`不会`undefined`。但是，关键是到我的`example`函数运行时，`foo`将被赋予`bar`.

上面的模式显然行不通。我需要实现什么设计模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:56:04.757

我对 CommonJS 不是很熟悉，所以这可能不是惯用的方法，但是使用函数而不是变量应该可以：

```
// main-module
module.exports = function () {
  var foo,
      someModule = require('other-module')(function() { return foo; });

  foo = "bar";
}

// other-module.js
module.exports = function (fooFn) {
  function example() {
    console.log(fooFn());
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T23:56:56.150

foo 值（一个字符串）将按值传递，所以它`undefined`在 other-module 中。您可以使用通过引用传递的选项对象：

```
var options = {},
someModule = require('other-module')(options);

options.foo = "bar"; 
```

# c++ - 如何在延迟着色系统中实现光遮挡？

> ID：15078814
> 
> 赞同：4
> 
> 时间：2013-02-25T23:52:51.583
> 
> 标签：c++, shadow, directx-11, deferred-shading

我正在实现一个延迟着色系统，它使用计算着色器（在 DirectX 11 中）来剔除瓦片中的灯光，因此我可以以稳定的帧速率获得数千个灯光。当我必须确定灯光是否被场景阻挡时，问题就出现了几何。我的意思是我的点光源穿过墙壁和桥梁。我在主光（太阳）的角度上有一个阴影贴图，但是为场景上的每个点光源生成一个阴影贴图需要生成一千个立方体贴图，那就是不可能。那么这个问题通常是如何处理的呢？像 Dead Space 3 和 Battlefield 3 这样的游戏在场景中有很多灯光，但它们不会流过固体物体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T09:21:42.323

一种直接的解决方案是使用屏幕空间环境遮挡方法。在那里，您尝试根据邻域的采样来估计遮挡。我知道的一种方法是[SSDO](http://www.mpi-inf.mpg.de/~ritschel/Papers/SSDO.pdf)，它直接针对在屏幕空间中创建阴影。可能您最终会在复杂场景中遇到大量伪影。好处是[SSDO](http://www.mpi-inf.mpg.de/~ritschel/Papers/SSDO.pdf)还增加了一些全局光照效果。

我认为大多数游戏/引擎都试图通过预处理步骤来克服这些问题。

1.  静态光照：如果您的光源不四处移动（建筑物中的灯光......）计算光照贴图或一些包含灯光的额外顶点属性。

2.  调整灯光：只需调整衰减距离或强度或位置，直到没有明显的出血。

3.  一些自己的想法：根据您对灯光的表示（球体/圆盘？），您可以计算灯光的修剪形状。墙后的像素不会位于新的光体积内，也不会以这种方式变亮。如果你不能任意塑造你的光体积，你可能可以为每个光定义墙添加一个或两个平面。对于大多数灯光，这些平面可以是未定义的，并且仅针对靠近墙壁的灯光推送到 GPU。然后，可以在相应光的照明过程中检查像素位于哪一侧。

# java - Java 扫描到行尾

> ID：15078819
> 
> 赞同：0
> 
> 时间：2013-02-25T23:53:18.297
> 
> 标签：java, loops, line, java.util.scanner

我正在尝试使用`Scanner`.

问题是我需要编写一个只扫描一行的循环。

例如，该行是：

```
Hello world it is nice out 
```

我希望它将整个句子保存在 a 中，`String`而无需继续阅读文件的其余部分。所以：

```
while(charscan.hasNext()) {
    String test= charscan.next() + " ";        
} 
```

不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:11:17.280

```
 while(charscan.hasNext()){
        String test= charscan.nextLine() + " ";
        break;

  } 
```

如果您只对一行感兴趣并且不想使用循环，那么请改用`if`语句，即

```
if(charscan.hasNext()){
    String test = charscan.nextLine() + " ";
} 
```

# emacs - 在 Emacs Lisp 中检查 forward-sexp 是否成功

> ID：15078822
> 
> 赞同：2
> 
> 时间：2013-02-25T23:53:21.467
> 
> 标签：emacs, lisp, elisp, emacs24

我想检查 a 是否`(forward-sexp 1)`成功，或以错误结束。问题是它返回 nil，即使它已经成功。如何进行此项检查？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T00:45:24.263

试试`scan-sexps`吧。它是背后的主力，`forward-sexp`并返回一个有意义的值。

当然，如果括号不平衡，那么你会得到一个错误 - 所以你需要`ignore-errors`or `condition-case`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T02:53:44.273

`forward-sexp`如果它不能向前移动点，则发出错误信号。`condition-case`如果你愿意，你可以抓住这个。这是一个测试它的示例命令：

```
(defun test-forward-sexp ()
  "simple command testing (forward-sexp 1)"
  (interactive)
  (condition-case nil
      (progn
        (forward-sexp 1)
        (message "succeeded"))
    (error (message "failed")))) 
```

[您可以在信息页面Writing Code to Handle Errors](http://www.gnu.org/software/emacs/manual/html_node/elisp/Handling-Errors.html)上阅读有关处理错误的更多信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T02:23:20.010

`forward-sexp`如果出现错误，则不返回 nil （实际上在这种情况下，它不返回任何内容；而是发出错误信号）。

# macos - 在 osx 上找不到 Mercurial 全局配置文件

> ID：15078823
> 
> 赞同：4
> 
> 时间：2013-02-25T23:53:23.030
> 
> 标签：macos, mercurial

我是[Bitbucket](https://bitbucket.org/)的新手。我正在尝试[使用以下说明设置我的计算机以访问](https://confluence.atlassian.com/pages/viewpage.action?pageId=270827678)[Bitbucket](https://bitbucket.org/) 。在，我被告知要添加到文件中。我似乎找不到文件。有没有人成功完成这一步？我该怎么做？`Step 5``ssh = ssh -C``~/.hgrc`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T07:27:52.343

看来你根本没有`Mercurial`安装。[`Step 3`](https://confluence.atlassian.com/pages/viewpage.action?pageId=269981802)Bitbucket 教程的详细说明如何从`MacPorts`.

安装`Mercurial`后，只需`.hgrc`手动创建并添加配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T00:08:45.197

如果您没有此文件 - 创建它。但是你，也许，**只是**看不到它 - 虚线文件被隐藏了。反正读`hg help config`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-16T17:01:10.763

我也遇到了这个问题，但设法找到了 .hgrc 文件。首先通过下载此软件[http://invisiblix.read-write.fr/获取所有可见的隐藏文件](http://invisiblix.read-write.fr/)

最初我试图用聚光灯找到 .hgrc 文件，但什么也没找到。碰巧聚焦“~/”，然后这个“~/.config”文件夹出现了，所以我去那里，在同一目录中找到了.hgrc。不知何故，它总是在那里，但即使在终端被要求时也不会出现。

# web-services - Grails：无法解析类 groovyx.net.http.HTTPBuilder

> ID：15078827
> 
> 赞同：2
> 
> 时间：2013-02-25T23:53:27.797
> 
> 标签：web-services, grails, post, request, httpbuilder

我已经开发了一些我希望在我的 grails 应用程序中使用的 Web 服务。可以使用 Get 或 POST 协议调用这些服务。

我已经看到我需要使用 HTTP 构建器对象来做到这一点。

这是我的代码：

```
import groovyx.net.http.HTTPBuilder
import groovyx.net.http.ContentType
import groovyx.net.http.Method
import groovyx.net.http.RESTClient
import groovyx.net.http.HttpResponseDecorator
        def http = new HTTPBuilder( 'http://localhost:8086' )
        http.request( GET, JSON ) {
          uri.path = '/RegistrationService/webresources/users/isRegistered'
          uri.query = [ login:'aa', password: 'bb' ]

          response.success = { resp, xml ->
            def xmlResult = xml
          }
        } 
```

我遇到的问题是，在 Netbeans 中，每次导入都有一个错误： Unable to resolve class groovyx.net.http.HTTPBuilder Unable to resolve class groovyx.net.http.ContentType ...

但是我尝试运行应用程序，这是我运行代码时的错误：

```
| Error 2013-02-25 23:33:32,596 [http-bio-8080-exec-3] ERROR errors.GrailsExceptionResolver  - MissingPropertyException occurred when processing request: [POST] /WordGame/user/authenticate
No such property: uriPath for class: groovyx.net.http.HTTPBuilder$RequestConfigDelegate. Stacktrace follows:
Message: No such property: uriPath for class: groovyx.net.http.HTTPBuilder$RequestConfigDelegate
    Line | Method
->>   21 | doCall    in wordgame.UserController$_closure2_closure4
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    425 | doRequest in groovyx.net.http.HTTPBuilder
|    359 | request . in     ''
|     19 | doCall    in wordgame.UserController$_closure2
|    195 | doFilter  in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|     63 | doFilter  in grails.plugin.cache.web.filter.AbstractFilter
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread 
```

我已经使用以下命令安装了其余插件：grails install-plugin rest 我已经尝试使用 netbeans 界面安装它，它告诉我它已正确安装。

我在一些论坛上看到我需要在 BuildConfig.groovy 文件中具有这样的依赖项：

```
dependencies {
     runtime('org.codehaus.groovy.modules.http-builder:http-builder:0.5.1') {
        excludes 'xalan'
        excludes 'xml-apis'
        excludes 'groovy'
    }
} 
```

但这并不能解决问题。

有关信息，我使用的是 netbeans 7.2.1 和 Grails 2.2.0。

我的代码有问题还是有更简单的方法来请求 Web 服务？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T14:27:40.477

所以，我再次阅读了`Exception`您发布的内容和您的代码片段，您似乎在闭包中省略了`req`变量。`http.request(){}`您还没有导入`GET`方法和`TEXT`内容类型。尝试：

```
import groovyx.net.http.HTTPBuilder
//import groovyx.net.http.ContentType // this doesn't import ContentType
//import groovyx.net.http.Method // this doesn't import Method
import groovyx.net.http.RESTClient
import groovyx.net.http.HttpResponseDecorator

// ContentType static import
import static groovyx.net.http.ContentType.*
// Method static import
import static groovyx.net.http.Method.*

        def http = new HTTPBuilder( 'http://localhost:8086' )
        http.request( GET, JSON ) { req -> // 'req ->' is not present in your code snippet!
          uri.path = '/RegistrationService/webresources/users/isRegistered'
          uri.query = [ login:'aa', password: 'bb' ]

          response.success = { resp, xml ->
            def xmlResult = xml
          }
        } 
```

我还建议在此位置阅读 HTTPBuilder 的文档：http://groovy.codehaus.org/modules/http-builder/doc/index.html[因为](http://groovy.codehaus.org/modules/http-builder/doc/index.html)代码解释得很好，并且还列出了一些操作方法和教程;)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-16T11:30:44.423

我刚刚解决了我的问题。下载这个：[http ://repository.codehaus.org/org/codehaus/groovy/modules/http-builder/http-builder/0.5.2/](http://repository.codehaus.org/org/codehaus/groovy/modules/http-builder/http-builder/0.5.2/)

从 groovy_installed_directory/lib 中的依赖目录中复制 httpBuilder.jar 和所有 jar。然后重新启动控制台并重试。

希望能帮助到你。BR

# jquery - 为什么这个 jQuery 代码没有被解析？

> ID：15078828
> 
> 赞同：0
> 
> 时间：2013-02-25T23:53:30.827
> 
> 标签：jquery

有人可以看看[这个脚本](http://www.tapet-online.ro/skin/frontend/default/acumen/js/manatln.js)并告诉我为什么它没有被解析、触发和激活吗？我的意思是，我放在后面的所有东西`(function($) {`都没有效果。

该脚本应该从类别页面中下拉过滤菜单的元素。（即：[这个](http://www.tapet-online.ro/catalog/fototapet.html)）

我真的不知道在这里做什么。我已经尝试了几件事，但我还没有找到解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:01:39.820

我发现了错误 - 我删除了另一个包含 jQuery 文件的文件夹。

# c++ - 遵循一些规则格式化代码的 Visual Studio C++ 插件

> ID：15078833
> 
> 赞同：2
> 
> 时间：2013-02-25T23:53:46.253
> 
> 标签：c++, visual-studio, plugins, code-formatting

有人知道是否存在一些用于 Visual Studio C++ 的插件，其作用类似于 Eclipse 的格式化程序和清理配置文件？

我想要一些按照一些预定义的规则格式化我的代码的东西，比如：

*   尽可能将 const 放入函数中

*   不允许空行

*   不允许函数通过 100 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:06:37.907

我对此类实用程序没有任何经验，但您可以在 Visual Studio 库中搜索代码清理插件：http: [//msdn.microsoft.com/vstudio](http://msdn.microsoft.com/vstudio)

# c# - Unity3D：如果条件为真，如何显示 GUI.box？

> ID：15078834
> 
> 赞同：0
> 
> 时间：2013-02-25T23:53:52.993
> 
> 标签：c#, user-interface, unity3d

我正在使用 C# 在 Unity3D 中制作游戏。我正在使用 GUI.box 为小怪显示一个健康栏，但我只想在有目标时显示 GUI.box。

这是我目前的代码。

```
public GameObject target;
public bool existsTarget;

// Use this for initialization
void Start()
{

PlayerAttack pa = (PlayerAttack)GetComponent("PlayerAttack");
target = pa.target;

existsTarget = false;
}

// Update is called once per frame
void Update()
{

if(target != null)
existsTarget = true;
else
existsTarget = false;

}

void OnGUI()
{
if(existsTarget)
        GUI.Box(new Rect(500, 10, healthBarLength, 20), curHealth + "/" + maxHealth);
    else   {
       GUI.Box(new Rect(Screen.width, 10, healthBarLength, 20), curHealth + "/" + maxHealth);
   } 
```

不幸的是，这根本没有显示任何健康条。关于为什么的任何想法？

在大众需求后在这里发布脚本。

```
public class Targetting : MonoBehaviour {
public List<Transform> targets;
public List<Transform> items;
public GameObject TheSelectedTarget {get; set;}
private Transform selectedTarget;
private Transform selectedItem;
private Transform myTransform;

// Use this for initialization
void Start () {
    targets = new List<Transform>();
    items = new List<Transform>();

    selectedTarget = null;
    selectedItem = null;
    myTransform = transform;
    TheSelectedTarget = null;

    addAllEnemies();
    addAllItems();
}

//adds all targets to a list
private void addAllEnemies() {

    GameObject[] go = GameObject.FindGameObjectsWithTag("Enemy");

    foreach(GameObject enemy in go){
        addTarget(enemy.transform);
    }

}

//adds a target
private void addTarget(Transform enemy) {

    targets.Add(enemy);
}

//sorts target by distance
private void sortTargets() {

    targets.Sort(delegate(Transform t1, Transform t2) {
        return Vector3.Distance(t1.position, myTransform.position).CompareTo(Vector3.Distance(t2.position, myTransform.position));
    });
}

//targets an enemy
private void targetEnemy() {

    addAllEnemies();

    if(selectedTarget == null) {
        sortTargets();
        selectedTarget = targets[0];
    } else {
        int index = targets.IndexOf(selectedTarget);

        if(index < targets.Count -1) {
            index++;

        } else {
            index = 0;

        } 
        deselectTarget();
        selectedTarget = targets[index];
}
    selectTarget();
    targets.Clear();
    }
//selects a specific target, and colors it red
public void selectTarget() {

    selectedTarget.renderer.material.color = Color.red;

    PlayerAttack pa = (PlayerAttack)GetComponent("PlayerAttack");
    pa.target = selectedTarget.gameObject;

    TheSelectedTarget = pa.target;
}

//deselects the current selected target, and colors i grey
private void deselectTarget() {
    selectedTarget.renderer.material.color = Color.gray;
    selectedTarget = null;
}

//adds all items to a list
void addAllItems() {

GameObject[] go = GameObject.FindGameObjectsWithTag("Book");

foreach(GameObject book in go){
    addItem(book.transform);
} 
```

}

'

....然后脚本继续，但与此无关...

```
'          public class EnemyHealth : MonoBehaviour
          {
            public string enemyName;
              public int maxHealth = 100;
              public int curHealth = 100;
              public float healthBarLength;
              public GameObject target;
          public bool existsTarget;
          public AudioSource dying;

    // Use this for initialization
    void Start()
{
    //enemyName = this.enemyName;
    healthBarLength = Screen.width / 3;

    existsTarget = false;
}

// Update is called once per frame
void Update()
{
    adjustCurHealth(0);

    Targetting ta = (Targetting)GetComponent("Targetting");
    target = ta.TheSelectedTarget;
    Debug.Log (target);

    if(target != null)
        existsTarget = true;
    else {
        existsTarget = false;   
    }

}

void OnGUI()
{
    if(existsTarget)
        GUI.Box(new Rect(500, 10, healthBarLength, 20), curHealth + "/" + maxHealth);
    else   {
       GUI.Box(new Rect(Screen.width, 10, healthBarLength, 20), curHealth + "/" + maxHealth);
   }
}

public void adjustCurHealth(int adj)
{
    curHealth += adj;

    if (curHealth < 0)
        curHealth = 0;

    if (curHealth > 100)
        curHealth = 100;

    if (maxHealth < 0)
        maxHealth = 1;

    if(curHealth == 0)
    {
        //dying.Play ();
        GameObject.Destroy(gameObject);
    }

    healthBarLength = (Screen.width / 3) * (curHealth / (float)maxHealth);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T05:01:11.307

您是否曾经在 Start() 方法之外的任何地方设置目标？如果 PlayerAttack.Target 在开始时不为空，您显示的代码只会显示 GUI.box。尝试将此代码移至 Update() 方法。

```
PlayerAttack pa = (PlayerAttack)GetComponent("PlayerAttack");
target = pa.target; 
```

编辑：

检查目标是否为空，这可能是问题所在。

```
target = pa.target;
Debug.Log(target); 
```

这将作为任何 GameObject 打印到日志中，或者为 null。如果它为空，则没有目标。

# java - 我试图让球逐渐移动

> ID：15078835
> 
> 赞同：3
> 
> 时间：2013-02-25T23:53:53.010
> 
> 标签：java, swing, keylistener, paintcomponent, graphic

当你按下一个箭头键时，我试图让球逐渐移动，现在它只是传送。我想要它，这样你就可以看到它移动了。基于这个[例子](https://stackoverflow.com/a/5797965/230513)，我正在使用键绑定，并且有一个名为 delta 的变量会导致球移动 50 像素，但就像我说的那样，无论你按下箭头键的哪个方向，球只会出现 50 像素，我想要它就像你踢球一样，你可以看到它从a点到b点。转到我认为问题所在的第 89 行。

```
package game;

import java.awt.BasicStroke;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.RenderingHints;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;

/**
 * @see https://stackoverflow.com/questions/6991648
 * @see https://stackoverflow.com/questions/6887296
 * @see https://stackoverflow.com/questions/5797965
 */
public class LinePanel extends JPanel {
myObject ball;

private Point b1 = new Point(0,0);

private MouseHandler mouseHandler = new MouseHandler();
private Point p1 = new Point(100, 100);
private Point p2 = new Point(540, 380);
private boolean drawing;

public LinePanel() {
    this.setPreferredSize(new Dimension(640, 480));
    this.addMouseListener(mouseHandler);
    this.addMouseMotionListener(mouseHandler);
}

@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D) g;
    g2d.setColor(Color.blue);
    g2d.setRenderingHint(
        RenderingHints.KEY_ANTIALIASING,
        RenderingHints.VALUE_ANTIALIAS_ON);
    g2d.setStroke(new BasicStroke(8,
        BasicStroke.CAP_ROUND, BasicStroke.JOIN_BEVEL));
    g.drawLine(p1.x, p1.y, p2.x, p2.y);
    ball = new myObject(b1.x,b1.y,"Stuff/ball.png",50,50);
    g.drawImage(ball.getImage(),ball.getX(),ball.getY(), ball.getWidth(),         ball.getHeight(), null);
    repaint();
}

private class MouseHandler extends MouseAdapter {

    @Override
    public void mousePressed(MouseEvent e) {
        drawing = true;
        p1 = e.getPoint();
        p2 = p1;
        repaint();
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        drawing = false;
        p2 = e.getPoint();
        repaint();
    }

    @Override
    public void mouseDragged(MouseEvent e) {
        if (drawing) {
            p2 = e.getPoint();
            repaint();
        }
    }
}

private class ControlPanel extends JPanel {

    private static final int DELTA = 50;
// above is telling the ball to move by 50 pixels
    // I want it to move by 50 pixels but gradually I dont want it to teleport
    public ControlPanel() {
        this.add(new MoveButton("\u2190", KeyEvent.VK_LEFT, -DELTA, 0));
        this.add(new MoveButton("\u2191", KeyEvent.VK_UP, 0, -DELTA));
        this.add(new MoveButton("\u2192", KeyEvent.VK_RIGHT, DELTA, 0));
        this.add(new MoveButton("\u2193", KeyEvent.VK_DOWN, 0, DELTA));

    }

    private class MoveButton extends JButton {

        KeyStroke k;
        int myX, myY;

        public MoveButton(String name, int code, final int myX, final int myY) {
            super(name);
            this.k = KeyStroke.getKeyStroke(code, 0);
            this.myX = myX;
            this.myY = myY;
            this.setAction(new AbstractAction(this.getText()) {

                @Override
                public void actionPerformed(ActionEvent e) {
                    LinePanel.this.b1.translate(myX, myY);

                    LinePanel.this.repaint();
                }
            });
            ControlPanel.this.getInputMap(
                WHEN_IN_FOCUSED_WINDOW).put(k, k.toString());
            ControlPanel.this.getActionMap().put(k.toString(), new AbstractAction() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    MoveButton.this.doClick();
                }
            });
        }
    }
}

private void display() {
    JFrame f = new JFrame("LinePanel");
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.add(this);
    f.add(new ControlPanel(), BorderLayout.SOUTH);
    f.pack();
    f.setLocationRelativeTo(null);
    f.setVisible(true);
}

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            new LinePanel().display();
        }
    });
}

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T00:32:50.323

任何动画的基本前提都是随时间变化。

您需要能够在给定的时间段内将球从位置 A 移动到位置 B。为此，您需要某种可用于更新球在此期间的位置的“代码”。一般来说，25fps（或大约 40 毫秒）就绰绰有余了。

为了在 Swing 中安全地实现这一点，最简单的解决方案是使用 Swing `Timer`。您可以使用`Thread`，但随后您将负责将更新同步回 UI，并且在此阶段确实需要它更复杂。

此示例使用 1 秒的持续时间将球从 A 点移动到 B 点。这是一个线性动画，您需要研究适当的动画框架以获得更复杂的解决方案。

```
import java.awt.BasicStroke;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.RenderingHints;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.Timer;

public class LinePanel extends JPanel {

//    myObject ball;
    private Point b1 = new Point(0, 0);
    private Point startPoint = new Point(0, 0);
    private Point targetPoint = new Point(0, 0);
    private MouseHandler mouseHandler = new MouseHandler();
    private Point p1 = new Point(100, 100);
    private Point p2 = new Point(540, 380);
    private boolean drawing;

    private Timer animate;
    private long startTime;
    private int duration = 1000;

    public LinePanel() {
        this.setPreferredSize(new Dimension(640, 480));
        this.addMouseListener(mouseHandler);
        this.addMouseMotionListener(mouseHandler);
        animate = new Timer(40, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                long now = System.currentTimeMillis();
                long dif = now - startTime;
                if (dif >= duration) {
                    dif = duration;
                    ((Timer)e.getSource()).stop();
                }
                float progress = (float)dif / (float)duration;
                b1 = calculateProgress(startPoint, targetPoint, progress);
                repaint();
            }
        });
        animate.setRepeats(true);
        animate.setCoalesce(true);
    }

    public void moveBallTo(Point target) {

        if (animate.isRunning()) {
            animate.stop();
        }

        startPoint = b1;
        targetPoint = target;

        startTime = System.currentTimeMillis();
        animate.start();

    }

    public void moveBallBy(int xDelta, int yDelta) {

        animate.stop();

        Point t = new Point(targetPoint == null ? b1 : targetPoint);
        t.x += xDelta;
        t.y += yDelta;

        moveBallTo(t);

    }

    public Point calculateProgress(Point startPoint, Point targetPoint, double progress) {

        Point point = new Point();

        if (startPoint != null && targetPoint != null) {

            point.x = calculateProgress(startPoint.x, targetPoint.x, progress);
            point.y = calculateProgress(startPoint.y, targetPoint.y, progress);

        }

        return point;

    }

    public int calculateProgress(int startValue, int endValue, double fraction) {

        int value = 0;
        int distance = endValue - startValue;
        value = (int)Math.round((double)distance * fraction);
        value += startValue;

        return value;

    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.setColor(Color.blue);
        g2d.setRenderingHint(
                RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setStroke(new BasicStroke(8,
                BasicStroke.CAP_ROUND, BasicStroke.JOIN_BEVEL));
        g.drawLine(p1.x, p1.y, p2.x, p2.y);

        g.setColor(Color.RED);
        g.drawOval(b1.x - 4, b1.y - 4, 8, 8);
//        ball = new myObject(b1.x, b1.y, "Stuff/ball.png", 50, 50);
//        g.drawImage(ball.getImage(), ball.getX(), ball.getY(), ball.getWidth(), ball.getHeight(), null);
        repaint();
    }

    private class MouseHandler extends MouseAdapter {

        @Override
        public void mousePressed(MouseEvent e) {
            drawing = true;
            p1 = e.getPoint();
            p2 = p1;
            repaint();
        }

        @Override
        public void mouseReleased(MouseEvent e) {
            drawing = false;
            p2 = e.getPoint();
            repaint();
        }

        @Override
        public void mouseDragged(MouseEvent e) {
            if (drawing) {
                p2 = e.getPoint();
                repaint();
            }
        }
    }

    private class ControlPanel extends JPanel {

        private static final int DELTA = 50;
// above is telling the ball to move by 50 pixels
        // I want it to move by 50 pixels but gradually I dont want it to teleport

        public ControlPanel() {
            this.add(new MoveButton("\u2190", KeyEvent.VK_LEFT, -DELTA, 0));
            this.add(new MoveButton("\u2191", KeyEvent.VK_UP, 0, -DELTA));
            this.add(new MoveButton("\u2192", KeyEvent.VK_RIGHT, DELTA, 0));
            this.add(new MoveButton("\u2193", KeyEvent.VK_DOWN, 0, DELTA));

        }

        private class MoveButton extends JButton {

            KeyStroke k;
            int myX, myY;

            public MoveButton(String name, int code, final int myX, final int myY) {
                super(name);
                this.k = KeyStroke.getKeyStroke(code, 0);
                this.myX = myX;
                this.myY = myY;
                this.setAction(new AbstractAction(this.getText()) {
                    @Override
                    public void actionPerformed(ActionEvent e) {
//                        LinePanel.this.b1.translate(myX, myY);
                        moveBallBy(myX, myY);
                        LinePanel.this.repaint();
                    }
                });
                ControlPanel.this.getInputMap(
                        WHEN_IN_FOCUSED_WINDOW).put(k, k.toString());
                ControlPanel.this.getActionMap().put(k.toString(), new AbstractAction() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        MoveButton.this.doClick();
                    }
                });
            }
        }
    }

    private void display() {
        JFrame f = new JFrame("LinePanel");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.add(new ControlPanel(), BorderLayout.SOUTH);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new LinePanel().display();
            }
        });
    }
} 
```

看一眼 ...

*   [如何使用摆动计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)
*   [时序框架](http://java.net/projects/timingframework/pages/Home)
*   [三叉戟](http://kenai.com/projects/trident/pages/Home)
*   [通用补间引擎](http://code.google.com/p/java-universal-tween-engine/)

**边注**

在你的绘画方法中这样做`ball = new myObject(b1.x, b1.y, "Stuff/ball.png", 50, 50);`是非常低效的。 `paint`可以快速连续调用多次。在可能的情况下，您希望`paint`方法尽可能优化，在您的绘制方法中花费大量时间会使您的程序看起来很慢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T00:21:11.953

编写代码的方法很多，我对环境不熟悉。但基本上你使用击键来设置移动方向，然后你有另一个例程将球朝那个方向移动。你一步移动多少像素和一步需要多长时间就是你的速度。

如何使用键盘取决于游戏玩法。按住加速，向右按向左停止。你想给它惯性。即从右到左将向右运动减慢到零，然后开始向左运动。

各种各样的选择，但诀窍是让移动球成为一种常规，然后使用您的输入设备来控制方向、加速度等。

# python - 如何使用 Reddit API 获取 1000 多张图片？

> ID：15078837
> 
> 赞同：1
> 
> 时间：2013-02-25T23:54:08.360
> 
> 标签：python, web-scraping, reddit

我写了一个 Reddit 图片抓取工具，而 Reddit API 只允许我获取最新的 1000 张图片。有谁知道我是否可以支付额外费用来获取更多数据（进入数十万），或者免费解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T03:01:02.063

> reddit API 只允许我查看最新的 1000 张图片

我假设您的意思是列表只能追溯到 1000 次提交。这是一个硬性限制，适用于除[http://www.reddit.com/new](http://www.reddit.com/new)之外的所有 reddit 列表（据我所知）。目前没有支付*额外*API 访问费用的选项。但是，假设您遵守[reddit 的 API 规则](https://github.com/reddit/reddit/wiki/API)，您可以使用[http://www.reddit.com/new](http://www.reddit.com/new)列表返回任意位置，只需过滤掉您不关心的子版块的提交。

这是一个简单的[PRAW](https://github.com/praw-dev/praw)示例，它计算最近 10000 次提交中对一组 subreddits 的提交次数（运行大约需要 200 秒）。

```
import praw
r = praw.Reddit('stackoverflow question test')
subs = set(['aww', 'funny'])

count = 0
for submission in r.get_new(limit=10000):
    if submission.subreddit.display_name.lower() in subs:
        count += 1
print(count) 
```

# python - Python 文件正则表达式匹配

> ID：15078838
> 
> 赞同：0
> 
> 时间：2013-02-25T23:54:09.267
> 
> 标签：python, regex, match

我正在尝试在 python 中使用正则表达式从文件中提取某些单词，但我无法得到它。我的原始文件看起来像

```
List/VB 
[ the/DT flights/NNS ]
from/IN 
```

我希望输出是

```
List VB 
the DT
flights NNS
from IN 
```

我写了以下代码：

```
import re

with open("in.txt",'r') as infile, open("out.txt",'w') as outfile: 
    for line in infile:
        if (re.match(r'(?:[\s)?(\w\\\w)',line)):
            outfile.write(line) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:03:30.547

使用您提供的示例数据：

```
>>> data = """List/VB 
... [ the/DT flights/NNS ]
... from/IN"""

>>> expr = re.compile("(([\w]+)\/([\w]+))", re.M)
>>> for el in expr.findall(data):
>>>     print el[1], el[2]
List VB
the DT
flights NNS
from IN 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T21:07:01.700

```
import re

expr = re.compile("(([\w]+)\/([\w]+))", re.M)
fp = open("file_list.txt",'r')
lines = fp.read()
fp.close()
a = expr.findall(lines)
for el in expr.findall(lines):
    print ' '.join(el[1:]) 
```

输出：

```
List VB
the DT
flights NNS
from IN 
```

# mongodb - 子文档的 MongoDB 投影

> ID：15078840
> 
> 赞同：11
> 
> 时间：2013-02-25T23:54:18.563
> 
> 标签：mongodb

如何使用 MongoDB 查询投影作者的名字

```
{
 name: "Wings Of Fire",
 author:
 {
  first: "Abdul",
  last: "Kalam"
 }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-26T00:07:20.827

您可以在字段选择器中使用[点表示法](http://docs.mongodb.org/manual/core/document/#dot-notation)来投影子文档字段。在外壳中：

```
db.test.find({}, {'author.first': 1}) 
```

# jquery - Fancybox 2 - 缩略图标题

> ID：15078842
> 
> 赞同：1
> 
> 时间：2013-02-25T23:54:28.993
> 
> 标签：jquery, fancybox

我希望能够在每个缩略图上显示一个标题。这可能吗？一直试图在文档中找到它，并通过自定义尝试一段时间但没有得到任何地方。[与这里](https://stackoverflow.com/questions/14690765/fabcybox-1-3-4-thumbnail-title-on-hover)的这个问题类似，但没有得到回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T14:12:15.563

我试图做同样的事情，对我来说最好的解决方案是将所有内容放在一个元素中并`<figcaption>`用于拇指图像下方的标题。这是一个例子：

```
<li>
  <figure><a class="fancybox" id="gen_acc2" href="images/prodsec/prodsec_gtv100_pt.jpg" 
     data-fancybox-group="gallery" title="Lorem ipsum dolor sit amet">
  <img src="images/prod_thumbs/prod_img_gtv100.jpg" alt="" /></a>
  <figcaption><h4>GTV 100</h4></figcaption></figure> 
```

希望能帮助到你。

# eclipse - 在 Eclipse IDE 中向 Servlet 提交 Html 表单

> ID：15078844
> 
> 赞同：1
> 
> 时间：2013-02-25T23:54:33.513
> 
> 标签：eclipse, tomcat, servlets

有点奇怪..

我有一个带有表单的简单文件 /WebContent/login.html

```
<form action="/LoginHandler" method="POST"> 
```

和一些带有 web.xml 的类

```
/Java Resources/src/controller/LoginHandler.java
/Java Resources/src/controller/ProtectedResource.java 
```

例如 LoginHandler.java

```
package controller;

[imports]

@WebServlet("/LoginHandler")
public class LoginHandler extends HttpServlet {

private static final long serialVersionUID = 1L;

public LoginHandler() {
    super();
}

protected void doPost(HttpServletRequest request, HttpServletResponse ... 
```

/WebContent/WEB-INF/web.xml 定义如下：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
version="2.5">

<display-name>Webshop</display-name>
<servlet>
    <servlet-name>LoginHandler</servlet-name>
    <servlet-class>Webshop.controller.LoginHandler</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>LoginHandler</servlet-name>
    <url-pattern>/LoginHandler</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>ProtectedResource</servlet-name>
    ...

</web-app> 
```

即使我跑我得到

```
http://localhost:8080/Webshop/login.html 
```

但如果我提交表格，我会在这里得到：

```
http://localhost:8080/servlet?user=foo&password=bar 
```

带有 404 状态！

它从何而来？有什么我不介意的吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T00:05:11.833

看起来您的 Web 应用程序根据您提供的登录 html url 部署在上下文根 /Webshop 下。因此你的表格应该是

```
<form action="/Webshop/LoginHandler" method="POST"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:51:48.300

更改您的 html 从

从

```
<form action="/LoginHandler" method="POST"> 
```

到

```
<form action="../LoginHandler" method="POST"> 
```

# html - 另一个类中的类前缀选择器

> ID：15078853
> 
> 赞同：2
> 
> 时间：2013-02-25T23:55:29.060
> 
> 标签：html, css, css-selectors

我想知道下面示例的正确选择器是什么

```
<span class="A">
   <span class="B_C"></span>
   <span class="B_D"></span>
<span> 
```

我想选择所有以`B_`嵌套在`A`. 我已经尝试了其中的每一个，但都没有奏效：

```
.A + [class^="B_"], .A + [class*=" B_"]
.A > [class^="B_"], .A > [class*=" B_"]
.A [class^="B_"], .A [class*=" B_"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:58:23.473

一个 Element 可以有多个类，因此如果您只按类选择，则可以更容易：

```
<span class="A">
   <span class="class_b class_c"></span>
   <span class="class_b class_d"></span>
<span> 
```

您可以选择所有具有`b`：

```
.A .class_b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T00:02:13.640

`.A [class^="B_"]`作品。通常，您会将该属性选择器与另一个元素放在一起，例如`.A span[class^="B_"]`（也可以）。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/kwfN2/)]]]

### 输出：

> ![输出](../Images/f04f60724aaaa402e15674fb241c947e.png)

### CSS：

```
.A [class^="B_"] {
    color: red;
} 
```

### HTML：

```
<span class="A">
   <span class="B_C">B_C</span>
   <span class="B_D">B_D</span>
   <span class="C_D">C_D</span>
<span> 
```

# android - 有没有办法在新的 Android SDK 3.0 中以编程方式将用户从 FB 中注销？

> ID：15078854
> 
> 赞同：2
> 
> 时间：2013-02-25T23:55:34.007
> 
> 标签：android, facebook, android-3.0-honeycomb

我打电话

```
s.closeAndClearTokenInformation();
s.close();
Session.setActiveSession(null); 
```

这是我看到的唯一似乎重置用户登录的方法，但是，在我的下一个循环通过我的应用程序并调用 Session.getActiveSession() 时，我没有得到登录对话框，并且使用了预先存在的令牌。

我在文档中没有看到有关注销用户的任何内容（我只看到有关如何使用注销按钮向他们展示的选项，这不适用于我们的用例）。

非常感谢对此的一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:47:32.547

当您调用 closeAndClearTokenInformation 时，它将清除您应用的本地缓存中与用户关联的令牌信息。

当您创建另一个会话并打开它并使用 SSO 并且设备上存在 Facebook 应用程序并且用户未从 Facebook 应用程序注销时，该应用程序将再次静默授权您的应用程序，而无需进一步的用户交互。这是设计使然（因为当他们授权您的应用程序时，除非他们明确撤销访问权限，否则授权处于活动状态）。

您希望查看后续会话打开调用的用户交互的用例是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T00:01:51.637

您注销，但您没有撤销访问权限，因此再次打开时，它会登录并看到它已获得授权。

我不知道它是如何在新 API 中完成的，但请查看[Facebook API SDK revoke access](https://stackoverflow.com/questions/9050190/facebook-api-sdk-revoke-access)

希望能帮助到你。

# asp.net-mvc - 一个控制器中有两个或多个 Get 方法

> ID：15078856
> 
> 赞同：0
> 
> 时间：2013-02-25T23:55:49.577
> 
> 标签：asp.net-mvc, getter

嗨，我在一个控制器中有两个 Get 方法，如下所示：

```
public class aController : ApiController
{
   public pubResponse GetPub(string a, double b, double c, string d)
   {
   }

   public pubResponse GetFeatures(string a, double b, double c, string d)
   {
   }
} 
```

两种方法的签名都是相同的，只是在第二个中添加了一个参数。

问题是我应该如何让控制器映射传递的参数数量并相应地选择操作。如果有 3 个参数，那么 Controller 应该 GetPub，如果有 4 个参数，那么 Controller 应该 GetFeatures。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:46:59.237

你有没有尝试过这样的事情？我假设您并不是要在 GetPub 中有 4 个参数。

公共 pubResponse GetPub(string a, double b, double c) { }

公共 pubResponse GetPub(string a, double b, double c, string d) { }

或者，如果这两种方法都做同样的事情，你可以让你的第四个参数字符串 d = "" - 一个可选参数 - 并且只有在它不为空时才使用它。

# c++ - 找出指向同一对象的两组指针之间的差异

> ID：15078861
> 
> 赞同：1
> 
> 时间：2013-02-25T23:56:18.640
> 
> 标签：c++, pointers, set

如何找到指向同一对象的两组指针之间的差异？

有没有一种有效的方法而不遍历两组的所有对象。

我有两套这样的：

```
std::set<Object*> 
```

如果对象私有成员（名称）与其他对象名称相同，则表示该对象相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:09:37.603

STL 的算法库非常棒、可扩展且未被充分利用。

这将为您提供作为向量的集合差异（我想您可以将其转换为集合，但没有必要，至少对于您所要求的而言，并且向量更快，因为集合已经排序）。

```
template<typename T>
std::vector<T> set_diff(std::set<T> const &a, std::set<T> const &b) {
    std::vector v<T>;
    std::set_difference(a.begin(), a.end(), b.begin(), b.end(), v.begin());
    return v;
} 
```

可选地，放在构造函数之后

```
 v.reserve(a.size() + b.size()); 
```

和返回之前 (C++11)

```
 v.shrink_to_fit(); 
```

**注意**：这会产生 in`a`中没有的项目`b`。要查找两者之一而不是另一个中的所有项目，请`std::set_symmetric_difference`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T05:30:33.997

我认为你的意思不同的是找到只出现在一组中的指针元素。最有效的方法是同步迭代这两个集合，这将仅花费 O(n+m) 时间，其中 n，m 表示两个集合的大小，通常是问题的下限。

幸运的是，STL 容器集以平衡二叉搜索树为基，我们可以在线性时间内按顺序迭代所有元素，因此可以实现 O(n+m)。

```
template<typename T>
std::vector<T> set_diff(std::set<T> const &a, std::set<T> const &b) {
  std::vector<T> v;
  auto ita = a.begin();
  auto itb = b.begin();
  while (ita != a.end() && itb != b.end()) {
    if (*ita == *itb) {
      ++ita, ++itb;
    } else if (*ita < *itb) {
      v.push_back(*ita);
      ++ita;
    } else {
      v.push_back(*itb);
      ++itb;
    }
  }
  for (; ita != a.end(); v.push_back(*ita), ++ita);
  for (; itb != b.end(); v.push_back(*itb), ++itb);
  return v;
} 
```

# r - 布局序列R后未出现标签

> ID：15078862
> 
> 赞同：1
> 
> 时间：2013-02-25T23:56:24.393
> 
> 标签：r, plot

我正在运行以下代码：

```
par(bg="yellow", mar=c(2,2,2,2))
layout(matrix(c(rep(1,12),2:13),nrow=2,byrow=T),width=myWidth)
plot(days,sum_precip,type="l",xaxt="n",yaxt="n",ann=FALSE,
                      xlab="TEST",main="WEWQWE",ylab="dsads") 
```

在最后一条语句中，即使在参数中指定了它，我的绘图也无法显示任何标签。是因为我的利润太小吗？

我正在尝试为布局底行上的每个图表添加 x 轴标题。

问题示例：

![](../Images/ac3f6f8a7f94991f20c49ce2367ba683.png)

请注意，我更好奇为什么这不起作用。我知道我可以只指定一个轴（..），但这更不感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:39:01.353

是的，利润太小了。

例子：

```
par(mar=rep(4,4))
plot(1, 1, xaxt='n', xlab='x', yaxt='n', ylab='y') 
```

![边距 4,4,4,4](../Images/138f850a09613924b058a172adb86191.png)

这显示了标签（抱歉它很小）。

但是使用`par(mar=rep(2,4))`：

![边距 2,2,2,2](../Images/b2b06842c5fbd777c887b9ab8d4b1b28.png)

标签被切断。

您可以使用该`mgp`参数来修改轴文本相对于轴的偏移量（以行为单位）。特别是 ( `?par`)，`mgp`是长度为 3 的向量，其中`mgp[1]`是绘图和轴标签之间的线，`mgp[2]`是轴线本身，`mpg[3]`是轴刻度标签。

所以：

```
par(mar=rep(2,4))
# mgp[2:3] irrelevant in this case as we have turned
# axis line/ticks off; doesn't matter what they are set to
plot(1, 1, xaxt='n', xlab='x', yaxt='n', ylab='y', mgp=c(1,0,0)) 
```

这会将轴标签放置在距离轴 1 行的位置（即在第二行之外），正好适合我们的边距 2,2,2,2。

![边距 2,2,2,2 与 mgp](../Images/0727dbeeec0af7a9b0c57848272ab9b9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T02:41:23.963

这里有一个使用`mtext`. 见 ?mtext

> 文本写入当前图形区域的四个边距之一或设备区域的外边距之一。

```
 par(bg="lightyellow", mar=c(2,2,2,2))
 layout(matrix(c(rep(1,12),2:13),nrow=2,byrow=T))

 replicate(13,
           {  plot(x=1:5,y=cumsum(1:5),type="l",xaxt="n",yaxt="n",ann=FALSE)
              mtext(text='TEST',side=1,line=1)
              mtext(text='dsads',side=2,line=1)

              }) 
```

![在此处输入图像描述](../Images/8bc7878b944a369e5284be0dc3c3ab04.png)

**编辑**

您可以为每个绘图设置边距。

```
 par(bg="lightyellow", mar=c(2,2,2,0))
 layout(matrix(c(rep(1,12),2:13),nrow=2,byrow=T))
 for(i in 1:13){  
              if (i %in% 1:2){
                plot(x=1:5,y=cumsum(1:5),type="l",xaxt="n",yaxt="n",ann=FALSE)
                  mtext(text='TEST',side=1,line=1)
                  mtext(text='dsads',side=2,line=1)
              }else{
                par( mar=c(2,0,2,0))
                plot(x=1:5,y=cumsum(1:5),type="l",xaxt="n",yaxt="n",ann=FALSE)
              }
          } 
```

![在此处输入图像描述](../Images/ad409988fd1184b5e7b3141fbe050efd.png)

# ruby-on-rails - Rails cache_digests touch has_many 关联

> ID：15078863
> 
> 赞同：6
> 
> 时间：2013-02-25T23:56:32.937
> 
> 标签：ruby-on-rails, caching

我有这样的事情：

```
class Suite < ActiveRecord::Base
  has_many :tests
end

class Test < ActiveRecord::Base
  belongs_to :suite
end 
```

我正在使用 cache_digests gem 来进行片段缓存。我希望当我更新套件对象时，子测试缓存过期。我试图`touch: true`在`has_many`关联中添加一个但没有成功。

我怎样才能做到这一点？

提前致谢

* * *

## 编辑

我在做我的缓存是这样的：

```
<% cache test do %>
  <tr>
   etc...
    <% cache test.suite do %>
      etc..
    <% end %>
  </tr>
<% end %> 
```

但它不起作用，因为当我编辑一个套件时，他们的测试没有被触及。因此，我将缓存声明更改为如下内容：

```
<% cache [test, test.suite] do %>
   etc..
<% end %> 
```

它按预期工作。

当我编辑一个测试或一个套件时，其中一个被触及，所以片段过期了，我得到了预期的新版本。

感谢@taryn-east 的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-25T22:56:32.580

你是对的，对人际关系`touch: true`不起作用。`has_many`您可以使用`after_save`挂钩并手动更新所有相关资产。例如...

```
class Post < ActiveRecord::Base
  has_many :assets
  after_save :touch_assets

  def touch_assets
    assets.update_all(updated_at: Time.now)
    # This does a single SQL call, but bypasses ActiveRecord in the process. See warning below.
    # SQL> UPDATE "assets" SET "updated_at" = '2014-03-25 22:37:55.208491' WHERE "assets"."post_id"  [["post_id", 2]]
  end
end

class Asset < ActiveRecord::Base
  belongs_to :post
end 
```

**警告：**这将在更新资产时绕过 ActiveRecord，因此如果资产需要依次接触另一个对象，这将不起作用。`touch_assets`但是，您可以在更新资产应该更新的对象的方法中添加一些额外的逻辑。但这开始变得混乱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T00:14:13.240

本页： [https ://github.com/rails/rails/issues/8759](https://github.com/rails/rails/issues/8759)

建议使用 after_save 钩子：

```
class Post < ActiveRecord::Base
  has_many :assets
  after_save -> { self.touch }
end

class Asset < ActiveRecord::Base
  belongs_to :post
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-11T03:44:20.660

改变你的片段缓存策略，使用类似：

```
<% cache [test, test.suite] do %> 
```

我在评论中找到了这个答案。我只是想表明这是“答案”。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-07-21T04:49:20.687

你需要添加

```
autosave: true 
```

如果您想强制父母更新孩子，请在 has_many 关联上。touch 用于更新子 -> 父。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2013-09-23T10:39:23.477

试试这个

```
 class Suite < ActiveRecord::Base
      has_many :tests
    end

    class Test < ActiveRecord::Base
      belongs_to :suite, :touch => true
    end 
```

# css - 使用 Webkit 渐变转换线性渐变

> ID：15078868
> 
> 赞同：0
> 
> 时间：2013-02-25T23:56:40.800
> 
> 标签：css

我试图得到相当于：

```
background-image: linear-gradient(90deg, rgb(166, 230, 230), rgb(231, 231, 231) 5%, rgb(255, 255, 255) 15%); 
```

使用 webkit 渐变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:02:13.347

使用`left`而不是`90deg`for `-webkit`。

[http://jsfiddle.net/Wyv4f/1/](http://jsfiddle.net/Wyv4f/1/)

# pdf - 从 pdf 文件中解析电话号码

> ID：15078869
> 
> 赞同：1
> 
> 时间：2013-02-25T23:56:44.483
> 
> 标签：pdf, groovy

我想读取一个`pdf`文件并将电话号码存储在数据库中。有什么方法可以阅读pdf文件`groovy`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:01:36.763

您可以使用 Apache PDFBox，一个 Java 库。

[http://pdfbox.apache.org/](http://pdfbox.apache.org/)

# c# - 将 XML 发布到 URL

> ID：15078875
> 
> 赞同：9
> 
> 时间：2013-02-25T23:57:18.257
> 
> 标签：c#, .net, xml

我正在尝试发布`XMLDocument`到 URL。这是我到目前为止所拥有的：

```
 var uri = System.Configuration.ConfigurationManager.AppSettings["Url"];
   var template = System.Configuration.ConfigurationManager.AppSettings["Template"];
   XmlDocument reqTemplateXml = new XmlDocument();
   reqTemplateXml.Load(template);

   reqTemplateXml.SelectSingleNode("appInfo/appNumber").InnerText = x; 
   reqTemplateXml.SelectSingleNode("appInfo/coappNumber").InnerText = y;

   WebRequest req = null;
   WebResponse rsp = null;
   req = WebRequest.Create(uri);
   req.Method = "POST";
   req.ContentType = "text/xml";
   rsp = req.GetResponse(); 
```

我想弄清楚的是如何将其加载`XmlDocument`到`WebRequest`对象中，以便可以将其发布到该 URL。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-26T00:05:43.963

您需要在这样调用之前写入 RequestStream `req.GetResponse()`。

```
 using (var writer = new StreamWriter(req.GetRequestStream()))
    {
        writer.Write(xml);
    } 
```

# javascript - 使用 Android 和 JavaScript api 访问同一个 ParseObject

> ID：15078879
> 
> 赞同：0
> 
> 时间：2013-02-25T23:57:51.370
> 
> 标签：javascript, android, parse-platform

这听起来像是一个简单的问题，但我是 Parse 和 StackOverFlow 的新手。我正在开发一个 android 应用程序，它将用户位置作为两个字符串值（纬度和经度）发送到 ParseObject。我有这个完美的工作，但我也想在 JavaScript 应用程序中使用这两个字符串值，将它们从同一个对象中提取出来。所以我的问题是......我可以使用 Android 和 JavaScript api 访问相同的 ParseObject 值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:45:47.583

是的，您可以访问同一个对象。将 lat/long 保存到 Parse 后端后，您可以使用解析的其余 API 再次提取数据。提供。Parse 中的后端不限于单个入口点。目标是让尽可能多的平台可以使用相同的数据。

如果您已保存数据并且在其仪表板上的解析数据浏览器中可见，那么您应该能够通过 javascript 再次将其拉出。查看他们的 javascript 开发人员指南以获取详细信息..

[https://parse.com/docs/js_guide](https://parse.com/docs/js_guide)

如果您需要通过 Android 保存数据的帮助，请告诉我。

# android - 谷歌地图android api v1 mapview教程崩溃

> ID：15078881
> 
> 赞同：2
> 
> 时间：2013-02-25T23:57:58.563
> 
> 标签：android, google-maps

我正在做这里的 MapView 教程：[https ://developers.google.com/maps/documentation/android/v1/hello-mapview](https://developers.google.com/maps/documentation/android/v1/hello-mapview)

问题是它一直在崩溃。这是代码：

```
package com.example.googlemapstest;

import java.util.List;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.view.Menu;

public class MainActivity extends MapActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    MapView mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    List<Overlay> mapOverlays = mapView.getOverlays();

    Drawable drawable = this.getResources().getDrawable(R.drawable.androidmarker);
    HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, this);

    GeoPoint point = new GeoPoint(19240000,-99120000);
    OverlayItem overlayitem = new OverlayItem(point, "Hola, Mundo!", "I'm in Mexico City!");

    drawable.setBounds(0,0, drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight());
    overlayitem.setMarker(drawable); 

    itemizedoverlay.addOverlay(overlayitem, drawable);
    mapOverlays.add(itemizedoverlay);

}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

和 HelloItemizedOverlay 类：

```
package com.example.googlemapstest;

import java.util.ArrayList;

import android.app.AlertDialog;
import android.content.Context;
import android.graphics.drawable.Drawable;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class HelloItemizedOverlay extends ItemizedOverlay
{
private ArrayList<OverlayItem> mOverlays;
Context mContext; 

public HelloItemizedOverlay(Drawable defaultMarker) {
      super(boundCenterBottom(defaultMarker));
      mOverlays =  new ArrayList<OverlayItem>(); 
      populate(); 
    }

public void addOverlay(OverlayItem overlay, Drawable drawable) {
    overlay.setMarker(drawable); 
    mOverlays.add(overlay);
    populate();
}

@Override
public int size() {
  return mOverlays.size();
}

public HelloItemizedOverlay(Drawable defaultMarker, Context context) {
      super(boundCenterBottom(defaultMarker));
      mContext = context;
      mOverlays =  new ArrayList<OverlayItem>(); 
      populate(); 
    }

@Override
protected boolean onTap(int index) {
  OverlayItem item = mOverlays.get(index);
  AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
  dialog.setTitle(item.getTitle());
  dialog.setMessage(item.getSnippet());
  dialog.show();
  return true;
}

@Override
protected OverlayItem createItem(int arg0) {
    // TODO Auto-generated method stub
    return null;
}
} 
```

我不断得到的例外是

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.googlemapstest/com.example.googlemapstest.MainActivity} : java.lang.NullPointerException 
```

崩溃发生在 itemizedoverlay.addOverlay(overlayitem, drawable) 中的 populate() 行；现在，最初我发现我添加的 OverlayItem 的 mMarker 变量为空，并添加了两行手动设置它。但是，程序仍然不断崩溃！

然后我发现了这个问题：[ItemizedOverlay 崩溃的问题，](https://stackoverflow.com/questions/3755921/problem-with-crash-with-itemizedoverlay)它似乎正在处理相同的错误。

我按照那里的最佳答案中的建议做了，但仍然没有运气。

我相信我已经认真梳理了这一点，并且无法想象 null 错误来自哪里。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:38:48.770

我很确定您不应该返回`null`in `createItem(int index)`，这意味着您应该在`HelloItemizedOverlay`班级中更改以下方法：

```
@Override
protected OverlayItem createItem(int arg0) {
    // TODO Auto-generated method stub
    return null;
} 
```

最基本的实现应该返回`OverlayItem`适​​合给定的对象`index`。很可能，您只想返回位于`OverlayItem`同一索引处的 s 列表中的任何对象。例如：

```
@Override
protected OverlayItem createItem(int index) {
    return mOverlays.get(index);
} 
```

仅当您还在某处填充该列表时，这才有意义。此外，为避免混淆，您可能应该将变量重命名为`mOverlayItems`，因为这是它包含的内容（而不是“覆盖”）。

更重要的是，正如@ianhanniballake 已经提到的：Android Maps SDK v1 已被弃用，取而代之的是 v2。这意味着从**2013 年 3 月 3 日起，**您将无法再为 v1 请求 API 密钥。如果您还没有这样做，最好现在快点生成密钥，或者现在迁移到 v2，这可能不是一个坏举动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T06:41:34.500

自 2012 年 12 月 3 日起正式弃用 Google Maps Android API 版本 1

使用 Google Map API V2，让您的生活更轻松

[https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

快乐编码

# r - 如何合并R中列表的所有元素？

> ID：15078896
> 
> 赞同：22
> 
> 时间：2013-02-25T23:58:53.543
> 
> 标签：r, list, merge

我有一个列表，其中包含数据框作为其在 R 中的元素。

例子：

```
df1 <- data.frame("names"=c("John","Sam","Dave"),"age"=c(21,22,25))
df2 <- data.frame("names"=c("John","Sam"),"score"=c(22,25))
df3 <- data.frame("names"=c("John","Sam","Dave"),"country"=c("US","SA","NZ"))
mylist <- list(df1,df2,df3) 
```

是否可以在不使用循环的情况下将 mylist 的所有元素合并在一起？

这个例子我想要的输出是：

```
 names age score country
1  John  21    22      US
2   Sam  22    25      SA 
```

本例中的列表只有三个元素；但是，我正在寻找一种可以处理任意数量元素的解决方案。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-26T02:08:15.913

您可以使用`Reduce`，一种衬垫解决方案：

```
Reduce(merge,mylist)

  names age score country
1  John  21    22      US
2   Sam  22    25      SA 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-26T00:02:07.220

快速而肮脏的例子：

```
merge(merge(df1, df2),df3) 
```

* * *

**编辑**- 这里非常相似的问题：[Simultaneously merge multiple data.frames in a list](https://stackoverflow.com/questions/8091303/merge-multiple-data-frames-in-a-list-simultaneously)

解决方案：

```
merged.data.frame = Reduce(function(...) merge(..., all=F), my.list) 
```

免责声明 - 我从@Charles 的答案中改变的只是制作`merge(..., all=F)`而不是`T`- 这样它可以提供您想要的输出。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-26T02:21:46.707

只是为了表明它可以通过另一种方式完成......

```
mymerge <- function(mylist) {
  names(mylist) <- sapply(mylist, function(x) names(x)[2])
  ns <- unique(unlist(lapply(mylist, function(x) levels(x$names))))
  as.data.frame(c(list(names=ns), lapply(mylist, function(x) 
                         {x[match(ns, x$names),2]})))
}

> mymerge(mylist)
  names age score country
1  Dave  25    NA      NZ
2  John  21    22      US
3   Sam  22    25      SA 
```

人们可以很容易地适应删除具有缺失值的行，或者可能只是在之后使用`complete.cases`.

为了证明它更快，我们将组成一个更大的数据集；100 个变量和 25 个名称。

```
set.seed(5)
vs <- paste0("V", 1:100)
mylist <- lapply(vs, function(v) {
  x <- data.frame(names=LETTERS[1:25], round(runif(25, 0,100)))
  names(x)[2] <- v
  x
})

> microbenchmark(Reduce(merge, mylist), myf(mylist))
Unit: milliseconds
                   expr       min        lq    median        uq       max
1           myf(mylist)  12.81371  13.19746  13.36571  14.40093  33.90468
2 Reduce(merge, mylist) 199.23714 206.28608 207.30247 208.44939 226.05980 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-05T14:17:29.383

你试过这个功能吗？

[http://rss.acs.unt.edu/Rdoc/library/gtools/html/smartbind.html](http://rss.acs.unt.edu/Rdoc/library/gtools/html/smartbind.html)

```
library(gtools)
df1 <- data.frame(list(A=1:10), B=LETTERS[1:10], C=rnorm(10) )
df2 <- data.frame(A=11:20, D=rnorm(10), E=letters[1:10] )
df3 <- df1

out <- smartbind( mylist <- list(df1,df2,df3)) 
```

# loops - Haskell 无限循环

> ID：15078898
> 
> 赞同：-1
> 
> 时间：2013-02-25T23:59:01.097
> 
> 标签：loops, haskell

我在 Haskell 中实现了一个计算器来复习语言，但是当我希望它进入无限循环直到用户输入时，我在 main 中遇到了障碍`q`。这是我的主要内容，如果您看到我做错了什么并且生病也发布我的错误，请告诉我

```
error: No instances for (Floating (IO a0), Read (IO a0))
      arising from a use of `compute'
    Possible fix:
      add instance declarations for (Floating (IO a0), Read (IO a0))
    In a stmt of a 'do' block: compute e
    In the expression:
      do { compute e;
           evaluate_input }
    In an equation for `evaluate_expression':
        evaluate_expression e
          = do { compute e;
                 evaluate_input } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T00:27:56.427

在你的做声明中

```
 compute e 
 evaluate_input 
```

两个函数都需要是相同的单子类型，在这里`IO`（由 声明`evaluate_input :: IO ()`）。所以 GHC 现在可以预期这`compute`是一个接受`String`e 并返回`IO a0`( `== a`) 的函数。然而，它找不到任何`a0`所以是or`IO a0`的实例，它必须是。`Floating``Read``a`

我假设您想输出计算结果（并且`a`是`Show`而不是的实例`Read`），所以使用

```
do
 putStrLn . show $ compute e
 evaluate_input 
```

# c - 比较c中两个文件的数字；使用 fopen 等

> ID：15078902
> 
> 赞同：0
> 
> 时间：2013-02-25T23:59:31.777
> 
> 标签：c

我正在尝试从代码中打开两个文件，但在尝试从 first.txt 获取我的三个数字时遇到了麻烦，但它只打印第一个。我只需要帮助打印我的文本文件中的所有数字，因此无需完成我的整个程序，但欢迎提出建议:)！

```
 int main(int argc, char **argv)
    {
    int *number1Pointer = malloc(80 * sizeof(int));
    FILE *file1;
    //FILE *file2;
    file1 = fopen("first.txt", "r");
    //file2 = fopen("second.txt", "r");

    int read = fscanf(file1, "%d", number1Pointer);

    if(read != '\0')
    {
            printf("%d", &number1Pointer);
    }
    else
    {
            fclose(file1);

    }

    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:03:04.483

`int read = fscanf(file1, "%d", number1Pointer);`只会`scanf("%d", &num)`从标准输入中读取一个“%d”。

您可以使用 while 循环或`fscanf(file1, "%d%d%d", ...)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T00:03:33.307

如果您需要读取 3 个数字，那么您可以尝试使用此代码

```
int read = fscanf(file1, "%d %d %d", &number1Pointer[0], &number1Pointer[1], &number1Pointer[2]); 
```

变量 read 将具有读取的元素数或 EOF。因此，必须调整检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T00:07:17.580

如果您的文件包含由空格分隔的三个数字 - 即`21 32 32`- 您需要一个与该格式匹配的格式字符串：

```
fscanf(file1, "%d %d %d", &number1Pointer[0], &numberPointer[1], &numberPointer[2]); 
```

使用后请记住`free()`分配的变量。

# java - Eclipse 剪贴簿中的枚举

> ID：15078904
> 
> 赞同：1
> 
> 时间：2013-02-25T23:59:45.257
> 
> 标签：java, eclipse, enums, eclipse-juno, jpage

不知道这是一个错误还是我有点疯狂..我正在尝试对 Eclipse jpage Scrapbook 中的枚举进行一些快速测试（使用 JDK 1.7.0_02，Win XP 64 位，Eclipse Juno）

```
class A {
    enum Month {JAN, FEB, MAR, APR, MAY, JUN, JUL, AUG, SEP, OCT, NOV, DEC}
}
A a = new A(); 
```

当我尝试执行此操作时，我得到：

> 成员枚举 Month 只能在顶级类或接口内定义

如果我将枚举移出类定义，就会发生这种情况。

```
enum Month {JAN, FEB, MAR, APR, MAY, JUN, JUL, AUG, SEP, OCT, NOV, DEC}
Month.valueOf("JAN"); 
```

这些是我在上面得到的错误：

> 成员枚举 Month 只能在顶级类或接口内定义
> 
> 月份无法解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:25:57.580

我相信做到这一点的唯一方法是将枚举本身从 jpage 移到一个新类中。所以我让课程像这样：

```
package test;
public class Test {
   public enum Month {
      JAN, FEB, MAR, APR, MAY, JUN, JUL, AUG, SEP, OCT, NOV, DEC;
   };
} 
```

然后在jpage中：

1.  右键单击并选择“设置导入”
2.  单击“添加包”并输入/选择**测试**包。

然后我的jpage将只有以下代码：

```
Test.Month.valueOf("JAN"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-05T15:46:35.803

好吧，对不起，如果我要说的有点愚蠢，但是您不应该将枚举声明为 A 类的公共成员吗？类中的枚举本质上是静态的，但不是公共的。在您的第一个示例中，如果您尝试将其声明为公开会发生什么？

# arrays - Azure 表存储中的对象数组

> ID：15078906
> 
> 赞同：0
> 
> 时间：2013-02-26T00:00:04.000
> 
> 标签：arrays, azure, insert

我正在尝试在 Azure 上构建一个简单的移动服务，但在插入信息时遇到了一些问题。现在，我的模型中有两个类，用户和汽车。用户有一个 AccountID、一个名称（所有这些字符串）和一个汽车数组。一辆汽车有一个盘子、一个颜色和一个模型（所有这些字符串）。

我正在将 User 对象正确序列化为 JSON，当我尝试执行 request.execute() 时，它会抛出一个错误，提示“属性 'cars' 的值是不支持的对象类型”。我知道只支持字符串、数字、布尔值和日期。

我想做的是有两个单独的表，一个用于用户，另一个用于汽车，并以某种方式在它们之间建立关系。这是我到目前为止写的脚本

```
function insert(item, user, request) {
    if(item.accountID !== user.userId){
        request.respond(statusCodes.UNAUTHORIZED,
        "Unauthorized user");
    } else {
        if(item.cars.length){
            var tableCars = tables.getTable('cars');
            populateTable(tableCars, request, item.cars);
        }
        request.execute();
    }       
}

function populateTable(table, request, array){
    var index = 0;

    var insertNext = function(){
        if(index < array.length){
            var toInsert = array[index];
            table.insert(toInsert, {
                success: function(){
                    index++;
                    insertNext();
                }
            });
        }
    };

    insertNext();
} 
```

在这一点上，我有几个问题。如果我这样离开它，它会崩溃，因为 items.cars 是一个 Car 数组（JS 的对象），但我确实希望在这里有某种 id 来在其表中查找属于该用户的汽车。也许我应该在 Car 的“所有者”中添加一些类型，但我不确定，我对数​​据库的了解有点差。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:46:19.563

Azure 表存储不支持关系表。此外，ATS 不支持将强类型子对象存储为父实体的一部分。ATS 是一种基于键值实体的表存储。它只支持基本数据类型，如字符串、日期、双精度、布尔值等。

如果要在 ATS 中存储复杂对象（复杂，即包含其他对象的对象），建议在存储数据时将子对象序列化为字符串而不是对象，并在期间将字符串反序列化回对象恢复。

或者，您可以非常喜欢您的 Row/PartitionKeys 并将父对象和子对象存储为同一 PartitionKey 中的不同实体 - 并且在读回值时重建层次结构。

# php - 从单个mysql查询中获取多个数组

> ID：15078909
> 
> 赞同：0
> 
> 时间：2013-02-26T00:00:11.343
> 
> 标签：php, mysql

这可能比我做的要简单，但我对 php/mySQL 还很陌生，并且遇到了一些障碍。

我有来自两个表的数据

1-雇主*有一般联系信息*

2-职责*有雇主负责的工作*

这是一对多的关系，因为每个雇主都有许多职责。当我独立显示每个雇主时，我知道如何显示职责列表，但在此应用程序中，我需要显示雇主列表，其中包含每个雇主在其公司信息与同一页面上列出的所有公司之后的职责。

我目前拥有它的方式我得到了

*   每次与雇主重复的每一项职责。

    控制器

    ```
    // Display employment

        try
        {
          $result = $pdo->query('SELECT d.*, m.*,
          date_format(start_date,"%M, %Y") AS started,
          date_format(end_date,"%M, %Y") AS ended FROM employers m
          LEFT JOIN duties d ON d.e_id = m.id');
        }

        catch (PDOException $e)
        {
          $error = 'Error fetching employers from the database!' . $e->getMessage();
          include '/error.html.php';
          exit();
        }

        foreach ($result as $row)
        {
          $employers[] = array(
          'id' => $row['id'],
          'name' => $row['name'],
          'city' => $row['city'],
          'state' => $row['state'],
          'started' => $row['started'],
          'ended' => $row['ended'],
          'title' => $row['title'],
          'duty' => $row['duty']
          );
        } 
    ```

    风景

    ```
    <section id="employers">
        <h2>Employers</h2>
        <ul>
            <?php foreach ($employers as $employer): ?>
            <li>
                <?php htmlout($employer['id']); ?>
                <?php htmlout($employer['name']); ?>
                <?php htmlout($employer['city']); ?>
                <?php htmlout($employer['state']); ?>
                <?php htmlout($employer['duty']); ?>
           </li>
           <?php endforeach; ?>
        </ul>
        </section> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:08:10.280

如果您想对每个员工的所有职责进行分组，您应该修改您的循环。这里有一个例子

```
// Initialize employers
$employers = array();

// The current employee ID
$employeeId = false;

// The current new employee
$newEmployee = false;

// Loop on each line of employee-duty
foreach ($result as $row)
{
    // Check if we have to add a new employee
    if ($employeeId == false || $row['id'] != $employeeId)
    {
        // Store previous employee if exists
        if ($newEmployee != false)
            $employers[] = $newEmployee;

        // Create new employee
        $newEmployee = array(
            'id' => $row['id'],
            'name' => $row['name'],
            'city' => $row['city'],
            'state' => $row['state'],
            'started' => $row['started'],
            'ended' => $row['ended'],
            'title' => $row['title'],
            'duty' => array()
        );

        // Set the new employee ID
        $employeeId = $row['id'];
    }

    // In all case, add the duty
    $newEmployee['duty'][] = $row['duty'];
}

// Save the last employee that will not be saved in the loop
if ($newEmployee != false)
    $employers[] = $newEmployee; 
```

`duty`在此代码的末尾，您将在条目中拥有所有具有所有职责的员工（唯一） 。

**重要提示**：另一个解决方案是修改您的 SQL 查询，并使用*group by*和*聚合函数*在 SQL 服务器端执行这些操作。这将简化 PHP 端的代码。

祝你好运。

# ruby-on-rails - 使用 attr_accessible 和 attr_protected 修复安全漏洞有哪些风险？

> ID：15078910
> 
> 赞同：0
> 
> 时间：2013-02-26T00:00:18.340
> 
> 标签：ruby-on-rails, ruby

我有一个安全漏洞，建议修复从使用`attr_protected`调用切换到`attr_accessible`.

我试图了解进行此更改的风险程度？这是否被认为是一个重大变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:05:17.027

更改为`attr_accessible`将更安全（而不是更少），因为您正在从

**默认情况下可访问的所有内容，并且这些内容受到保护**

至

**默认情况下受保护的所有内容，这些都可以访问**

主要风险是您将破坏所有现有表单......除非您将属性明确设置为可访问，或明确设置类上的每个受保护属性。

* * *

例如，使用属性：`id, email, phone number, zip_code and first_name` 这两个将导致现有属性的相同行为

```
# only protect these two attributes, everything else is open season
# a new attribute will start out accessible by default
attr_protected :id, :email 
```

和

```
# only these attributes are accessible - everything else is protected
# a new attribute will start out protected by default
attr_accessible :first_name, :zip_code, :phone_number 
```

# java - 如何在java中使现有的多边形移动？

> ID：15078911
> 
> 赞同：0
> 
> 时间：2013-02-26T00:00:24.067
> 
> 标签：java, polygon, move, translate

嘿伙计们，伙计们。高中 Comp Sci 学生报告。

现在我们正在做一些绘图和多边形的工作，挑战之一是让它以各种方式在屏幕上移动。（从左到右等）看，如果我知道该语言或有能力在基础水平上学习它，这将不是问题。但是我们的老师只是给我们一些环境和一些代码来复制、粘贴和查看，从长远来看，这些都没有真正的帮助，除了最基本的东西。

所以，我的朋友们，我可以通过绘制点来制作一个多边形，如下所示：

```
int xPoints[]={  xP*684/1000,xP*706/1000, xP*661/1000, xP*687/1000,
                 xP*735/1000,xP*760/1000, xP*723/1000, xP*713/1000,
                 xP*698/1000,xP*686/1000, xP*669/1000, xP*653/1000,
                 xP*639/1000,xP*639/1000, xP*641/1000, xP*648/1000};

int yPoints[]={ yP*354/1000, yP*354/1000, yP*472/1000, yP*472/1000,
                yP*354/1000, yP*354/1000, yP*452/1000, yP*471/1000,
                yP*487/1000, yP*498/1000, yP*503/1000, yP*504/1000,
                yP*492/1000, yP*473/1000, yP*455/1000, yP*440/1000};
int numPoints=16; 
```

但是我一生都无法弄清楚需要什么样的特定输入或代码才能使其移动。（我的意思是在屏幕上翻译）任何让我走上正轨的提示将不胜感激。我完全没有办法自己解决这个问题。

编辑：哎呀，是的，它是Java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:19:15.427

欢迎来到 SO！你需要把它分解成你需要弄清楚如何去做的小部分。想到的一些是

1.  创建一个窗口来绘制。

2.  在那个窗口中画一条线。

3.  在窗口中绘制一个多边形。

4.  从 (x, y) 沿给定方向移动一个点。

这些中的每一个都可能进一步细分。通常解决编程问题都是从这种思维开始的。当您尝试执行这些操作以及您提出的任何其他操作时，请随时回来提出更多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T00:11:20.523

我不知道 IBM VisualAge，但如果你有任何绘图方法/循环，你应该增加 xP 向右移动，减少它向左移动等，例如使用 for 循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T00:20:48.310

假设它是一个 java.awt.Polygon，你有没有看过

`Polygon.translate(int dx, int dy);` ？？？

如果是其他类型的多边形，请检查是否有类似的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T00:22:14.660

也许是一个for循环？

```
for(int i=0;i<xPoints.length;i++)
    xPoints[i]+=1;// shift 1 unit
for(int i=0;i<yPoints.length;i++)
    yPoints[i]+=1;// shift 1 unit 
```

# android - Android rawQuery结果检查

> ID：15078912
> 
> 赞同：4
> 
> 时间：2013-02-26T00:00:27.550
> 
> 标签：android, sql, sqlite, mobile

我一遍又一遍地寻找这个问题的答案，但你是我唯一的机会。事情是这样的：

我有一个 DBAdapter 类，MakeListActivity 和 SeeListActivity。

在 DBAdapter 我做了以下方法：

```
public Cursor commitQuery(String query)
{
    return myDataBase.rawQuery(query,null);
} 
```

MakeListActivity 有以下方法：

```
String query = "INSERT INTO list('name','description') VALUES('"+name+"','"+desc+"')";
dbAdapter.commitQuery(query); 
```

最后，SeeListActivity 有以下代码：

```
Cursor c = dbAdapter.commitQuery("SELECT * FROM list");
if(c!=null)
{
    c.moveToFirst();
    Log.i("cursor",c.getString(1));
} 
```

我实际上不确定我是否正确插入了数据，但是当我想查看数据（在我的情况下使用 logcat 记录它）时，我得到“不幸的是，com.dstankovic.app 已停止。”

这也是logcat错误：

```
 02-26 00:31:11.762: E/AndroidRuntime(660): java.lang.IllegalStateException: Could not execute method of the activity
02-26 00:31:11.762: E/AndroidRuntime(660):  at android.view.View$1.onClick(View.java:3599)
02-26 00:31:11.762: E/AndroidRuntime(660):  at android.view.View.performClick(View.java:4204)
02-26 00:31:11.762: E/AndroidRuntime(660):  at android.view.View$PerformClick.run(View.java:17355)
02-26 00:31:11.762: E/AndroidRuntime(660):  at android.os.Handler.handleCallback(Handler.java:725)
02-26 00:31:11.762: E/AndroidRuntime(660):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-26 00:31:11.762: E/AndroidRuntime(660):  at android.os.Looper.loop(Looper.java:137)
02-26 00:31:11.762: E/AndroidRuntime(660):  at android.app.ActivityThread.main(ActivityThread.java:5041)
02-26 00:31:11.762: E/AndroidRuntime(660):  at java.lang.reflect.Method.invokeNative(Native Method)
02-26 00:31:11.762: E/AndroidRuntime(660):  at java.lang.reflect.Method.invoke(Method.java:511)
02-26 00:31:11.762: E/AndroidRuntime(660):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-26 00:31:11.762: E/AndroidRuntime(660):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-26 00:31:11.762: E/AndroidRuntime(660):  at dalvik.system.NativeStart.main(Native Method)
02-26 00:31:11.762: E/AndroidRuntime(660): Caused by: java.lang.reflect.InvocationTargetException
02-26 00:31:11.762: E/AndroidRuntime(660):  at java.lang.reflect.Method.invokeNative(Native Method)
02-26 00:31:11.762: E/AndroidRuntime(660):  at java.lang.reflect.Method.invoke(Method.java:511)
02-26 00:31:11.762: E/AndroidRuntime(660):  at android.view.View$1.onClick(View.java:3594)
02-26 00:31:11.762: E/AndroidRuntime(660):  ... 11 more
02-26 00:31:11.762: E/AndroidRuntime(660): Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
02-26 00:31:11.762: E/AndroidRuntime(660):  at android.database.AbstractCursor.checkPosition(AbstractCursor.java:424)
02-26 00:31:11.762: E/AndroidRuntime(660):  at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
02-26 00:31:11.762: E/AndroidRuntime(660):  at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:50)
02-26 00:31:11.762: E/AndroidRuntime(660):  at com.dulerock.eatwell.MakeNewListActivity.SaveList(MakeNewListActivity.java:278) 
```

有人可以给我一个提示吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:08:09.940

你假设因为你有一个 Cursor 你有元素：

```
Cursor c = dbAdapter.commitQuery("SELECT * FROM list");
if(c!=null)
{
    c.moveToFirst();
    Log.i("cursor",c.getString(1));
} 
```

尝试先检查是否`c.moveToFirst()`返回 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T04:11:29.023

这里游标不为空但它没有数据...您需要确保游标中有数据

`moveToFirst()`如果游标中有数据则返回真，如果为空则返回假

试试这个

```
Cursor c = dbAdapter.commitQuery("SELECT * FROM list");
if(c.moveToFirst())
{
   Log.i("cursor",c.getString(1));
} 
```

# javascript - 如何将 13 个不同工作表中的多个范围复制到 Google Docs 中的另一个工作簿

> ID：15078914
> 
> 赞同：1
> 
> 时间：2013-02-26T00:00:35.740
> 
> 标签：javascript, google-apps-script, google-sheets

我有一个 13 张的 Google 电子表格。每张工作表都具有相同的格式和布局，但数据各不相同。我需要的每张纸的范围是 F7:G13 和单元格 F2。F7:G13 范围内的每一行都应与 Cell F2 配对，并放入另一个工作簿（我们将其称为 Workbook2）的 3 个相邻列中。因此，如果 F 列中有一个数据点，则相邻的 G 单元格中也会有一个数据点。只要 G:F 范围内有数据，则单元格 F2 的内容也需要复制。

一些潜在的问题...
F:G 范围内的行数在任何给定的工作表上从 0 到 7 不等。Workbook2 有一些自动填充的单元格（范围 F1:J14），它们将根据复制的信息进行一些计算。我之所以提到这一点，是因为除非有办法在特定的单元格范围 (A:C) 上使用 appendRow，否则它将复制我不想要的从第 15 行开始的数据。

我想我已经包含了所有内容，但我很乐意澄清任何事情。提前感谢您的帮助。

# wpf - 未找到方法：从 Framework 4.5 降级到 4.0 时使用ConsistentNullReferenceBehavior

> ID：15078920
> 
> 赞同：1
> 
> 时间：2013-02-26T00:00:58.623
> 
> 标签：wpf, .net-4.0, windows-xp, .net-4.5

我有一个最初针对 .Net Framework 4.5 的 VS 2012 C#/WPF 解决方案。然而，当我去部署它时，我发现4.5不支持WinXP。WinXP 仍在 4.0 框架的支持列表中，因此我将解决方案中的所有项目都更改为针对 4.0 客户端框架。

一切构建和发布都没有错误，并且在 Win7 上安装和运行良好。但是，该应用程序在 WinXP 上失败并显示以下消息：

> 加载首选项和配置数据时出错。找不到方法：'无效 System.Data.Objects.ObjectContextOptions.set_UseConsistentNullReferenceBehavior（Boolean）'。

我已经在我的解决方案中搜索了 UseConsistentNullReferenceBehavior，但我无法在任何地方找到它。

关于如何解决这个问题的任何想法？我宁愿不必创建新的解决方案和新项目，但这可能是我的下一步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T13:34:58.810

当解决方案针对 .Net Framework 4.5 / Entity Framework 5 时，意识到代码生成模板（.emdx 文件下的 *.tt）文件已经生成，我在我的数据对象项目中删除了模型，然后在针对 .Net Framework 4.0 / Entity Framework 4 时再次创建它。不幸的是，为这个新模型生成的代码仍在尝试使用 Entity Framework 5，因为它引用了 System.Data.Entity.Infrastructure 命名空间。

看来，一旦您在解决方案中以 .Net Framework 4.5 为目标，您就无法将其退回到 4.0

# sql - 将结果集插入临时表时出现 SQL Server 2005 DB2 链接服务器错误

> ID：15078925
> 
> 赞同：0
> 
> 时间：2013-02-26T00:01:07.533
> 
> 标签：sql, sql-server, sql-server-2005, db2, linked-server

我们在 SQL Server 2005 上有一个针对 DB2 的链接服务器。当我们尝试将来自链接服务器的简单查询结果集放入临时表时，返回此错误。

链接服务器“SOMEDSN”的 OLE DB 提供程序“MSDASQL”返回消息“[IBM][CLI Driver] SQL0998N 事务或启发式处理期间发生错误。原因代码 =“16”。子代码 =“2-8004D026”。SQLSTATE=58005“ . 消息 7391，级别 16，状态 2，第 21 行 由于链接服务器“SOMEDSN”的 OLE DB 提供程序“MSDASQL”无法开始分布式事务，因此无法执行操作。

```
DECLARE @FilterCode varchar(20);
Set @FilterCode = '11122';

Create Table #TmpTable (
    Id Int
)

Insert Into #TmpTable
EXEC ('Select A.Id From SCM1.DB2TBL1 A Where A.FilterCode = ?', @FilterCode) At SOMEDSN; 
```

Exec 在显示正确的结果集的情况下工作得很好，但是一旦我们尝试将结果集放入临时表中，就会出现错误。

我在这里和许多其他地方搜索并尝试了以下内容。

1.  sp_configure '远程进程传输', 0
2.  在 Linked Server Properties > Server Options 上将“Enable Promotion of Distributed Transactions”设置为 false。我没有看到这个选项。
3.  在链接服务器属性 > RPC 上，RPC 输出和分配器设置为值 TRUE
4.  使用了 Openquery，但它不能使用动态 SQL 或传递参数。

该表包含很多行。我们需要在 DB2 端执行查询，根据参数减少结果集。

任何帮助都将被大大占用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:14:03.147

您是否启动了 MSDTC 服务 (DTC)？

在 Windows 2008 下：

*   从管理工具->组件服务->计算机->我的电脑：本地 DTC。右键单击属性，转到 MSDTC 选项卡并选择“安全配置”。
*   启用“网络 dtc 访问”和“允许出站”复选框。
*   启用“无需身份验证”复选框

如果这不起作用，请尝试[禁用连接池](http://support.microsoft.com/kb/899607/en-us)。

# php - 代码检查一个复选框或另一个，但不是同时检查两者

> ID：15078928
> 
> 赞同：0
> 
> 时间：2013-02-26T00:01:21.650
> 
> 标签：php, wordpress, checkbox

所以基本上，我有一个在 wordpress 上创建帖子时运行的函数。我通过添加以下代码修改了这个函数。

```
$episodeID = $_POST['item_meta'][137];
$episodeVersion = $_POST['item_meta'][357];

if ($episodeVersion == "Subbed") { 
    $value = array("Subbed");

    update_field('field_48', $value, $episodeID);

} 
else if ($episodeVersion == "Dubbed") { 
    $value = array("Dubbed");

    update_field('field_48', $value, $episodeID);

} 
```

这段代码基本上是说，如果该帖子中某个字段的值为“Subbed”，则通过选中“Subbed”复选框来更新另一个复选框字段。如果它是“配音”，则通过选中“配音”复选框来更新复选框字段。

这工作得很好，但是没有时间同时选中这两个复选框。如果我添加一个带有配音的帖子，它会选中配音，然后如果我添加一个带有 Subbed 的帖子，它将取消选中已配音并选中已配音。

所以基本上，我怎样才能做到这一点，所以它实际上并没有取消选中已经检查过的任何内容。那么我应该用什么来检查复选框是未选中还是选中？某种类型的布尔真/假？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T01:28:29.683

好的，所以我能够操纵一些代码并最终让它工作。

我所要做的就是检查在执行配音的 if 语句时是否已经检查了 Subbed 复选框，反之亦然。

这是更新的代码

```
$episodeID = $_POST['item_meta'][137];
$episodeVersion = $_POST['item_meta'][357];

if ($episodeVersion == "Subbed" && !(get_field('episode_sdversion') && in_array('Subbed', get_field('episode_sdversion', $episodeID))) ) { 
    if (get_field('episode_sdversion') && in_array( 'Dubbed', get_field('episode_sdversion'))) {    
        $value = array("Subbed", "Dubbed");         
    } else {
        $value = array("Subbed");
    }       

    update_field('field_48', $value, $episodeID);

} 
if ($episodeVersion == "Dubbed" && !(get_field('episode_sdversion') && in_array('Dubbed', get_field('episode_sdversion', $episodeID))) ) { 

    if (get_field('episode_sdversion') && in_array( 'Subbed', get_field('episode_sdversion'))) {    
        $value = array("Subbed", "Dubbed");         
    } else {
        $value = array("Dubbed");
    }

    update_field('field_48', $value, $episodeID);

} 
```

# mysql - 改进多和查询

> ID：15078929
> 
> 赞同：-1
> 
> 时间：2013-02-26T00:01:24.533
> 
> 标签：mysql, sql, entity-attribute-value

```
SELECT wposts.*, wpostmeta.* 
FROM wp_posts wposts, wp_postmeta wpostmeta, wp_postmeta wpostmeta2, wp_postmeta wpostmeta3 
WHERE 
      wposts.ID = wpostmeta.post_id 
  AND wposts.ID = wpostmeta2.post_id 
  AND wposts.ID = wpostmeta3.post_id 
  AND wpostmeta.meta_key = 'listing_subtype' 
  AND wpostmeta.meta_value = 'Seattle' 
  AND wpostmeta2.meta_key = 'district' 
  AND wpostmeta2.meta_value = 'Breadview' 
  AND wpostmeta3.meta_key = 'price_current' 
  AND wpostmeta3.meta_value BETWEEN 0 AND 800000
  AND wposts.post_status = 'publish' 
  AND wposts.post_type = 'vreb_property' 
ORDER BY wposts.post_date DESC 
LIMIT 0, 20 
```

我现在正在查看这个查询，并认为我应该提高它的效率。而且我一直在尝试很多变化，我认为最好要求 SO 输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:05:56.177

您想使用`group by`and`having`子句来执行此操作。要获取帖子列表：

```
select p.id
from wp_post_meta p
group by p.id
having sum(case when p.meta_key = 'listing_subtype' and p.meta_value = 'Seattle' 
                then 1 else 0 end) > 0 and
       sum(case when p.meta_key = 'district' and p.meta_value = 'Breadview'
                then 1 else 0 end) > 0 and
       sum(case when p.meta_key = 'price_current' and cast(p.meta_value as float) BETWEEN 0 AND 800000
                then 1 else 0 end) > 0 
```

注意：这是未经测试的，所以它可能有语法错误。

要获取所有信息，请重新加入帖子：

```
select p.*
from wp_posts p join
     (select p.id
      from wp_post_meta p
      group by p.id
      having sum(case when p.meta_key = 'listing_subtype' and p.meta_value = 'Seattle' 
                      then 1 else 0 end) > 0 and
             sum(case when p.meta_key = 'district' and p.meta_value = 'Breadview'
                      then 1 else 0 end) > 0 and
             sum(case when p.meta_key = 'price_current' and cast(p.meta_value as float) BETWEEN 0 AND 800000
                      then 1 else 0 end) > 0
    ) p2
    on p.id = p2.id 
```

# java - .class 在 Java 中是什么意思？

> ID：15078935
> 
> 赞同：177
> 
> 时间：2013-02-26T00:01:42.453
> 
> 标签：java, class, methods

`.class`在 Java中是什么意思？例如，如果我创建了一个名为`Print`. 返回什么`Print.class`？

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2013-02-26T00:03:21.833

当您写`.class`在类名之后时，它会引用类文字 - [`java.lang.Class`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)表示*有关*给定类的信息的对象。

例如，如果您的类是`Print`，则`Print.class`是一个表示`Print`运行时类的对象。它与`getClass()`的任何（直接）实例的方法返回的对象相同`Print`。

```
Print myPrint = new Print();
System.out.println(Print.class.getName());
System.out.println(myPrint.getClass().getName()); 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-02-26T00:08:54.170

`.class`当没有可用的类的实例时使用。

`.getClass()`当有可用的类的实例时使用。

`object.getClass()`返回给定对象的类。

例如：

```
String string = "hello";
System.out.println(string.getClass().toString()); 
```

这将输出：

```
class java.lang.String 
```

这是字符串对象的类:)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-09-20T19:18:22.977

澄清一下，这个 '.class' 方法并不是指您在编译 java 代码后看到的字节码文件，也不是 OOP 理论中类与对象概念之间的混淆。

这个 '.class' 方法在 Java 中用于代码反射。通常，您可以为您的类收集元数据，例如完整的类名、常量列表、公共字段列表等。

检查这些链接（上面已经提到）以获取所有详细信息：
[https ://docs.oracle.com/javase/tutorial/reflect/class/classNew.html](https://docs.oracle.com/javase/tutorial/reflect/class/classNew.html)
[https://docs.oracle.com/javase/8/docs /api/java/lang/Class.html](https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html)

通常，您不打算在开始构建项目时立即使用反射。这是您在尝试管理已经工作的代码后知道需要的东西。很多时候，您需要它来管理程序的多个实例。也许您想识别每个特定的“克隆”以确定是否已经定义了某些内容，或者计算函数的数量，或者只是简单地记录类的特定实例的详细信息。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-11-05T23:55:08.060

如果一个对象的实例可用，那么获取其 Class 的最简单方法是调用`Object.getClass()`

`.class`语法_

如果类型可用但没有实例，则可以通过附加`.class`到类型名称来获取 Class。这也是获取原始类型的 Class 的最简单方法。

```
boolean b;
Class c = b.getClass();   // compile-time error

Class c = boolean.class;  // correct 
```

参见：[docs.oracle.com 关于类](https://docs.oracle.com/javase/tutorial/reflect/class/classNew.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-03T11:31:26.137

如果没有可用的实例，则`.class`使用语法获取类的相应 Class 对象，否则您可以使用 getClass() 方法获取 Class 对象。由于没有原始数据类型的实例，我们必须使用`.class`原始数据类型的语法。

```
 package test;

    public class Test {
       public static void main(String[] args)
       {
          //there is no instance available for class Test, so use Test.class
          System.out.println("Test.class.getName() ::: " + Test.class.getName());

          // Now create an instance of class Test use getClass()
          Test testObj = new Test();
          System.out.println("testObj.getClass().getName() ::: " + testObj.getClass().getName());

          //For primitive type
          System.out.println("boolean.class.getName() ::: " + boolean.class.getName());
          System.out.println("int.class.getName() ::: " + int.class.getName());
          System.out.println("char.class.getName() ::: " + char.class.getName());
          System.out.println("long.class.getName() ::: " + long.class.getName());
       }
    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-01-02T07:40:39.770

添加到上述答案：

假设您有一个名为“myPackage.MyClass”的类。假设在类路径中，以下语句是等价的。

```
//checking class name using string comparison, only Runtime check possible
if(myInstance.getClass().getName().equals(Class.forName("myPackage.MyClass")).getName()){}

//checking actual Class object for equality, only Runtime check possible
if(myInstance.getClass().getName() == Class.forName("myPackage.MyClass"))){}

//checking actual Class object for equality, but compile time validation
//will ensure MyClass is in classpath. Hence this approach is better (according to fail-fast paradigm)
if(myInstance.getClass() == MyClass.class){} 
```

同样，以下也是等价的。

```
Class<?> myClassObject = MyClass.class; //compile time check

Class<?> myClassObject = Class.forname("myPackage.MyClass"); //only runtime check 
```

如果 JVM 加载一个类型，代表该类型的类对象将出现在 JVM 中。我们可以从反射包中非常常用的类对象中获取有关类型的元数据。MyClass.class 是一个简写方法，它实际上指向代表 MyClass 的 Class 对象。

作为附录，有关 Class<?> 参考的一些信息将有助于阅读，因为大多数情况下它们是一起使用的。

Class<?> 引用类型可以包含代表任何类型的任何 Class 对象。

如果 Class<?> 引用也在方法参数中，则这以类似的方式工作。

请注意，“Class”类没有公共构造函数。所以你不能用“new”操作符来实例化“Class”实例。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-04T19:34:51.720

我认为这里的关键是理解类和对象之间的区别。对象是类的实例。但是在完全面向对象的语言中，**Class 也是 Object**。因此调用`.class`获取对该类的类对象的引用，然后可以对其进行操作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-13T09:02:53.983

类字面量是由类、接口、数组或原始类型或伪类型 void 的名称组成的表达式，后跟一个“.”。和令牌类。JDK 5.0 中的变化之一是类 java.lang.Class 是通用的`java.lang.Class Class<T>`，因此：

```
Class<Print> p = Print.class; 
```

此处参考：

[https://docs.oracle.com/javase/7/docs/api/java/lang/Class.html](https://docs.oracle.com/javase/7/docs/api/java/lang/Class.html)

[http://docs.oracle.com/javase/tutorial/extra/generics/literals.html](http://docs.oracle.com/javase/tutorial/extra/generics/literals.html)

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.2)

# php - PHP 上传数据

> ID：15078936
> 
> 赞同：-3
> 
> 时间：2013-02-26T00:01:43.973
> 
> 标签：php, javascript, jquery, ajax, upload

我目前正在制作一个网站，您可以在其中上传和下载文件，例如云服务器或类似的东西。我只是想知道如果我在硬盘驱动器上没有空间会发生什么，我将如何告诉 PHP 上传以上传到不同的硬盘驱动器以及类似的东西？

我有这段代码，我将添加安全性，但现在我正在测试：

```
<?php
set_time_limit(30000);
session_start();
include('../Connect/Connect.php');

$User = $_SESSION['User'];
$Get = 'SELECT * FROM Users WHERE Username = "'.$User.'"';
$Files = $_FILES['File'];
if(isset($User))
{
    if(!empty($Files))
    {
        if($Result = $Connect->query($Get))
        {
            while($Row = $Result->fetch_assoc())
            {
                $Limit = $Row['Limit'];

                for($X = 0; $X < count($Files['name']); $X++)
                {
                    $Name = $Files['name'][$X];
                    $TMP = $Files['tmp_name'][$X];

                    move_uploaded_file($TMP, '../Users/' . $User . '/' . $Name);
                }   
            }
        }
    }
}
else
{
    header("location:../"); 
}
header("location:index.php");
$Connect->close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:07:03.997

在尝试上传/移动文件之前，您始终可以使用[disk_free_space() 。](http://php.net/manual/en/function.disk-free-space.php)此外，move_uploaded_file 可能会返回 false，但这也可能是因为权限等其他问题。

# android - 从相机和画廊获取照片

> ID：15078955
> 
> 赞同：1
> 
> 时间：2013-02-26T00:03:36.487
> 
> 标签：android, android-camera, android-camera-intent

你好，

我正在创建一个简单的 Android 应用程序，它允许用户从照片库中选择照片或使用相机拍摄照片。得到选定的照片后，我将开始另一个活动来对照片做一些事情。但是，我在另一个活动中显示照片时遇到了一些问题。

这是获取照片的第一个活动：

```
public class GetPhoto extends Activity implements OnClickListener {

    ImageButton ibPhotoLib;
    ImageButton ibCamera;
    final static int FROM_CAMERA = 0, FROM_PHOTOLIB = 1;
    public static Bitmap bmp;

    @Override
    public void onClick(View v) {
        switch(v.getId()){
        case R.id.ibCamera:
            Intent cameraIntent = new Intent(
                    android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(cameraIntent, FROM_CAMERA);
            break;
        case R.id.ibPhotoLib:
            Intent photoPickerIntent = new Intent(Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);             
            startActivityForResult(photoPickerIntent, FROM_PHOTOLIB);
            break;      
        }       
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);      
        if (resultCode == RESULT_OK) {
            switch (requestCode) {
            case FROM_CAMERA:
                Bundle extras = data.getExtras();
                bmp = (Bitmap)extras.get("data");               
                break;
            case FROM_PHOTOLIB:
                Uri chosenImageUri = data.getData();            
                try {
                    bmp = Media.getBitmap(this.getContentResolver(), chosenImageUri);
                } catch (Exception e) {
                    e.printStackTrace();
                }
                break;
            }    
            Intent intent = new Intent(GetPhoto.this, PhotoProcessing.class);
            startActivity(intent);
        }
    }
} 
```

然后我开始另一个活动 ( `PhotoProcessing`)，在这个活动中，我将首先显示照片。如果我使用相机拍照，问题就来了，它以纵向模式显示，这正是我想要的。但是，如果我从图库中选择一张照片，它总是水平显示，这真的很烦人。有谁知道如何解决这个问题？

而且当我尝试获取图像的宽度和高度时：

```
float imageWidth = GetPhoto.bmp.getWidth();
float imageHeight = GetPhoto.bmp.getHeight(); 
```

*   如果照片是从相机拍摄的，`imageWidth`= `153`, `imageHeight`=`204`
*   如果照片是从图库中选择的，`imageWidth`= `3264`, `imageHeight`=`2448`

对于相同的图像。

谁能解释为什么这如此不同？我很困扰。

任何解决方案或建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:46:57.227

从相机意图传回的位图是缩略图。更糟糕的是，我认为一些制造商的相机实现不会返回任何东西。

您需要为相机意图提供一个文件，然后在 onActivityResult 方法中从该文件中获取图像数据。

查看[简单拍照](https://developer.android.com/training/camera/photobasics.html#TaskPath)指南了解实施细节。

# python - Python：帮助以不同的方式编写这个程序。匹配字符串。精确和关闭一个字符

> ID：15078956
> 
> 赞同：1
> 
> 时间：2013-02-26T00:03:57.683
> 
> 标签：python

我编写了这个程序，但在将它与我编写的另一个程序集成时遇到了麻烦。我相信这个程序的编写方式给我带来了困难。任何有关不同方法的建议将不胜感激。

该程序接受两个字符串，并确定它们是完全匹配、相差一个字符，还是相差一个字符以上。如果它们完全匹配或相差一个字符，则返回 True；如果它们相差一个以上的字符，则返回 false。

```
import string

def similarstrings():
    print "This program will determine whether two strings differ"
    print "by more than one character. It will return True when they"
    print "are the same or differ by one character; otherwise it will"
    print "return False"
    str1 = raw_input("Enter first string:")
    str2 = raw_input("Enter second string:")
    str1 = ' '.join(str1)
    str2 = ' '.join(str2)
    strL1 = string.split(str1, " ")
    strL2 = string.split(str2, " ")
    x = 0
    for i in range(len(strL1)):
        if strL1[i] == strL2[i]:
            x = x + 1
        else:
            x = x
    if x >= len(strL1) - 1:
        print True
    else:
        print False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:20:06.670

这种方法仅适用于 gnibbler 指出的一组受限输入 - 您可以尝试使用内置的 difflib 库来查找字符串之间的相似性。

```
>>> import difflib
>>> s1 = "some string"
>>> s2 = "same string"
>>> difflib.SequenceMatcher(None, s1, s2).ratio()
0.9090909090909091 
```

有关上述（或相关方法）的更多详细信息，您可以参考此[堆栈溢出问题](https://stackoverflow.com/questions/6690739/fuzzy-string-comparison-in-python-confused-with-which-library-to-use)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T00:10:04.410

不知道相差 1 个字符是什么意思。您的代码似乎假设字符串的长度相同。如果是这样，这应该工作

```
def similarstrings(str1, str2):
    return sum(i != j for i, j in zip(str1, str2)) <= 1 
```

# delphi - 在子线程 (TThread) 中使用 TServerSocket（非块 I/O）

> ID：15078957
> 
> 赞同：0
> 
> 时间：2013-02-26T00:04:02.040
> 
> 标签：delphi, sockets

我正在`TServerSocket`从继承的类中创建一个实例`TThread`。`Execute`我的问题是，主线程代码的过程中应该包含什么代码？

```
TServerThread = class(TThread)
private
  FServerSocket: TServerSocket;

  // FServerSocket event handlers
  procedure ClientConnect(Sender: TObject; Socket: TCustomWinSocket);
  procedure ClientDisconnect(Sender: TObject; Socket: TCustomWinSocket);
  procedure ClientError(Sender: TObject; Socket: TCustomWinSocket; ErrorEvent: TErrorEvent; var ErrorCode: Integer);
  procedure ClientRead(Sender: TObject; Socket: TCustomWinSocket);
  procedure Listen(Sender: TObject; Socket: TCustomWinSocket);
protected
  procedure Execute; override;
public
  constructor Create;
  destructor Destroy; override;
end; 
```

这就是类的外观，因此您将了解其实现的外观。

我问这个的原因是因为所有主要代码都发生在事件处理程序中，我想不出 MAIN 过程（执行）应该做的任何繁忙的工作操作，除了循环和睡眠？

在[这里](http://www.delphigroups.info/2/12/487883.html)，有人建议了一个消息循环，但我认为该线程不会接收任何消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T01:21:44.400

`TServerSocket`在非阻塞模式下使用隐藏窗口来处理套接字活动的窗口消息，因此线程的`Execute()`方法需要有一个活动消息循环来分发这些消息，例如：

```
procedure TMyThread.Execute;
var
  Msg: TMsg;
begin
  ...
  ServerSocket.Active := True;
  try
    while not Terminated do
    begin
      if GetMessage(Msg, 0, 0, 0) > 0 then
      begin
        TranslateMessage(Msg);
        DispatchMessage(Msg);
      end else begin
        Break;
      end;
      ...
    end;
  finally
    ServerSocket.Active := False;
  end;
  ...
end;

procedure TMyThread.Stop;
begin
  PostThreadMessage(ThreadID, WM_QUIT, 0, 0);
end; 
```

# bash - Bash：使用 sed 取消注释 XML 标记

> ID：15078958
> 
> 赞同：2
> 
> 时间：2013-02-26T00:04:18.670
> 
> 标签：bash, awk, sed, xml-parsing

我目前有一个包含以下内容的文件：

```
<refrigerator>
    <food="watermelon" location="topShelf" />
    <!--
    <food="mango" location="bottomShelf" />
    --> 
    <!--
    <food="orange" location="middleShelf" />
    --> 
</refrigerator> 
```

如何使用 'sed' 删除`<!--`，`-->`以便从文件中取消注释“mango”？但是，如果文件中还有其他行注释，我希望它们保持注释吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T00:09:37.173

你`sed`可以尝试：

```
sed '/<!--/{ N; N; s/.*\n\(.*food="mango".*\)\n.*-->.*/\1/; }' file 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T00:23:30.610

`sed`不是正确的工具（默认情况下不是多行），尝试使用[perl](/questions/tagged/perl "显示标记为“perl”的问题")，这更适合这种情况：

```
$ perl -i -0777 -pe 's/\s*<!--\s*\n(.*?food="mango".*?)\n\s*-->/\n$1/' file.txt 
```

## 输出

```
<refrigerator>
    <food="watermelon" location="topShelf" />
    <food="mango" location="bottomShelf" /> 
    <!--
    <food="orange" location="middleShelf" />
    --> 
</refrigerator> 
```

## 解释

*   `-i`switch*就地*编辑文件（就像`sed -i`）
*   `-0777`一次读取整个文件（也可以按段落*读取*`-00`）
*   `-p`假设 "while (<>) { ... }" 循环程序，并打印换行符
*   `s///`是`sed`类似替换的骨架
*   `\s`是 Perl 的空白字符
*   `.*?`代表*不贪心*匹配
*   `$1`与 sed 相同`\1`（*捕获*的部分）

## 文档

看

*   `perl -h`
*   [perldoc perlrun](http://perldoc.perl.org/perlrun.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-25T23:23:46.520

这是我使用创建的解决方案`awk`

识别在`xml`元素内具有“连接器服务器=”的所需元素，但不在具有`<!--`

### 脚本.awk：

```
/<!--/ && /-->/ {print;next;}
/-->/ && insideComment {
    if (insideDesiredElement) {
        sub("<!--","",firstLine);
        sub("-->","");
        insideDesiredElement = 0;
    }
    print firstLine ORS commentBlock $0;
    insideComment = 0;
    next;
}
/<!--/ {
    insideComment = 1;
    commentBlock = "";
    firstLine = $0;
    next;
}
insideComment {
    if ($0 ~ "Connector server=") insideDesiredElement = 1;
    commentBlock = commentBlock $0 ORS;
    next;
}1 
```

### 跑步：

```
awk -f script.awk input.xml 
```

# qt - ROS Qt 媒体在重新制作之前不显示

> ID：15078959
> 
> 赞同：1
> 
> 时间：2013-02-26T00:04:21.443
> 
> 标签：qt, ubuntu, cmake, phonon, ros

我有一个 Smach 状态机，它通过 ROS 中间件与 Qt 应用程序通信，以根据 Smach 状态传递给 GUI 的内容显示动态 GUI。视频和音频是在 Phonon 库的帮助下使用的，但是，每次我启动具有此设置的 Ubuntu 虚拟机时，视频、声音和图像都无法显示，直到我`make`再次进行项目。我在专用的 Ubuntu 机器上尝试过，因为我认为 VirtualBox 可能会导致一些问题，但问题仍然存在。当我`make`再次进行项目时，视频、声音和图像会立即显示在 GUI 上。

我正在使用 Qt 库和 ROS Electric，但它被创建到一个项目中并使用 CMake 编译。

有谁知道为什么每次打开机器时都需要制作该项目？在重新制作项目之前，是否有可能某些库没有正确链接？

任何帮助表示赞赏。

谢谢

雅各布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:42:25.963

我发现了问题。

在从 smach 发送的 XML 中，我为所有图像和视频使用了相对路径，由于某种原因，这仅在制作应用程序时才正确。系统重新启动后，路径不再正确，因此目前绝对路径正在工作。

# python - 在Z3 python中修改变量

> ID：15078960
> 
> 赞同：1
> 
> 时间：2013-02-26T00:04:27.300
> 
> 标签：python, z3

我正在编写某种模拟某些规则的应用程序。我发现 Z3py 的定点对我有帮助。我的应用程序大纲如下：(fp = Fixedpoint())

1.  声明一些整数变量，例如：a, b, c = Ints('ab c') 并注册到定点 - fp.(a, b, c)

2.  遵循某些变量（事实）的性质，增加或减少其他一些变量。例如：如果 (a>0 and b>0) 那么 c=c+1

3.  查询目标变量是否满足某些条件，例如 query(target>0)

我不知道如何使用规则来指定 2。有人可以告诉我这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:19:26.570

我采用了您概述的示例并创建了一个示例：

*   [http://rise4fun.com/Z3Py/kD1P](http://rise4fun.com/Z3Py/kD1P)

我希望这有帮助。

Z3 打印 UNSAT 因为查询不可访问。然后它显示一个不变量，证明查询不可访问。

更详细

要声明具有三个参数的属性，请执行以下操作：

```
P = Function('P', IntSort(), IntSort(), IntSort(), BoolSort()) 
```

为定点引擎注册它：

```
fp.register_relation(P) 
```

添加您想到的任何规则：

```
fp.rule(P(-1,1,-10))
fp.rule(P(a,b,c+1), [a > 0, b > 0, P(a,b,c)])
fp.rule(P(a+1,b,c-1), [a <= 0, b < 0, P(a,b,c)]) 
```

第一条规则说明了最初的属性。第二条规则说如果 a > 0, b > 0，c 可以递增。

最后询问是否可以访问某些属性：

```
print fp.query(P(a,b,c),c > 0 ) 
```

# ruby - Ruby：Titleize：如何忽略较小的单词，例如“and”、“the”、“or”等

> ID：15078964
> 
> 赞同：11
> 
> 时间：2013-02-26T00:04:58.207
> 
> 标签：ruby, string

```
def titleize(string)
  string.split(" ").map {|word| word.capitalize}.join(" ")
end 
```

这为每个单词命名，但是我如何捕获某些我不想大写的单词？

即）杰克和吉尔

请不要使用正则表达式。

更新：

我无法使这段代码正常工作：我让它打印一个全部大写的单词数组，但不是没有下面的列表。

```
words_no_cap = ["and", "or", "the", "over", "to", "the", "a", "but"]

def titleize(string)
cap_word = string.split(" ").map {|word| word.capitalize}

cap_word.include?(words_no_cap)

end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-25T13:44:22.410

您可能想要创建Rails 提供的[现有功能的扩展。`titleize`](https://github.com/rails/rails/blob/feaa6e2048fe86bcf07e967d6e47b865e42e055b/activesupport/lib/active_support/core_ext/string/inflections.rb#L107)

为此，只需在初始化程序中包含以下文件，然后！即时提供异常或可选地修改我的示例以将默认值添加到初始化程序中。

我意识到您不想使用 Regex，但是，实际的 rails 函数使用 Regex，因此您不妨保持同步。

将此文件放入`Rails.root/lib/string_extension.rb`并将其加载到初始化程序中；或者只是将其放入初始化程序本身。

更新：由于@svoop 建议添加结束词边界，因此修改了正则表达式。

```
# encoding: utf-8
class String
  def titleize(options = {})
    exclusions = options[:exclude]

    return ActiveSupport::Inflector.titleize(self) unless exclusions.present?
    self.underscore.humanize.gsub(/\b(?<!['’`])(?!(#{exclusions.join('|')})\b)[a-z]/) { $&.capitalize }
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-20T05:43:12.807

If you throw this into config/initializers into a new file (you can name it anything like string.rb), you can call your custom functions to any string. Make sure you restart, and then you will be able to run below like ex) "anystring".uncapitalize_puncs

This is easier than messing around trying to change the default code of titleize. So now, you can just call @something.title.titleize.uncapitalize_puncs

```
class String

    def uncapitalize_puncs
        puncs = ["and", "the", "to", "of", "by", "from", "or"]
        array = self.split(" ")
        array.map! do |x| 
            if puncs.include? x.downcase
                x.downcase
            else
                x
            end
        end
        return array.join(" ")
    end

end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-29T06:08:31.847

这是我的小代码。您可以将其折射为几行。

```
def titleize(str)
    str.capitalize!  # capitalize the first word in case it is part of the no words array
    words_no_cap = ["and", "or", "the", "over", "to", "the", "a", "but"]
    phrase = str.split(" ").map {|word| 
        if words_no_cap.include?(word) 
            word
        else
            word.capitalize
        end
    }.join(" ") # I replaced the "end" in "end.join(" ") with "}" because it wasn't working in Ruby 2.1.1
  phrase  # returns the phrase with all the excluded words
end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-06T05:28:08.920

如果您不想大写 and 或 the，只需执行以下操作：

```
def titleize(string)
  nocaps = "and"
  string.split(" ").map { |word| nocaps.include?(word) ? word : word.capitalize }.join(" ")
end 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-27T10:50:59.673

The answer of @codenamev is not quite doing the job:

```
EXCLUSIONS = %w(a the and or to)
"and the answer is all good".titleize(exclude: EXCLUSIONS)
# => "And the Answer Is all Good"
                        ^^^ 
```

Exclusions should match trailing word boundaries. Here's an improved version:

```
# encoding: utf-8
class String
  def titleize(options = {})
    exclusions = options[:exclude]

    return ActiveSupport::Inflector.titleize(self) unless exclusions.present?
    self.underscore.humanize.gsub(/\b(['’`]?(?!(#{exclusions.join('|')})\b)[a-z])/) { $&.capitalize }
  end
end

"and the answer is all good".titleize(exclude: EXCLUSIONS)
# => "And the Answer Is All Good"
                        ^^^ 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-05T12:29:31.777

# metodo 大写 para títulos

```
def capitalizar_titulo(string)
    words_not_to_capitalize = ["a","e","i","o","u","ao","aos", "as", "nos","nós","no","na","mas", "mes", "da", "de", "di", "do", "das", "dos"]
    s = string.split.each{|str| str.capitalize! unless words_not_to_capitalize.include? (str.downcase) }
    s[0].capitalize + " " + s[1..-1].join(" ")
  end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-26T00:09:12.947

这很简单，只需在调用时添加一个条件`captalize`：

```
$nocaps = ['Jack', 'Jill']

def titleize(string)
  string.split(" ").map {|word| word.capitalize unless $nocaps.include?(word)}.join(" ")
end 
```

全局变量是为此示例设计的，它可能是您实际应用程序中的实例变量。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-11T00:37:34.243

某些标题具有您可能需要考虑的边缘情况（双关语）。

例如，标题开头或标点符号后的小词通常应该大写（例如“纳尼亚传奇：狮子、女巫和魔衣橱”两者都有）。

人们可能还希望/需要将小字强制小写，以便像“Jack and Jill”这样的输入被呈现为“Jack and Jill”。

有时您可能还需要检测一个词（通常是品牌名称）何时必须保留不寻常的大写，例如“iPod”，或首字母缩略词，例如“NATO”，或域名，“example.com”。

要正确处理此类情况，[titleize](https://github.com/granth/titleize) gem 是您的朋友，或者至少应该为完整的解决方案提供基础。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-21T11:40:52.847

我认为短语的第一个单词必须大写：

```
class String

  def uncapitalize_puncs
    puncs = ["and", "the", "to", "of", "by", "from", "or"]
    array = self.split(" ")
    i = -1
    array.map! do |x|
      i += 1
      if puncs.include?(x.downcase) && i > 0
        x.downcase
      else
        x
      end
    end
    array.join(" ")
  end

end 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-01-03T15:23:31.213

```
titleize("the matrix or titanic")

def titleize(string)
  no_cap = ["and", "or", "the", "over", "to", "the", "a", "but"]
  string.split(" ").map { |word| no_cap.include?(word) ? word : 
  word.capitalize }.join(" ")
end 
```

结果：

```
"the Matrix or Titanic" 
```

# hibernate - JodaTime 将 DateTime 持久化为多列

> ID：15078971
> 
> 赞同：1
> 
> 时间：2013-02-26T00:05:51.330
> 
> 标签：hibernate, grails, jodatime

所以这就是我想要做的。我有一个 gsp 视图，其表单发布了以下带有一些示例值的内容：

params.startTime: 01:00:00 AM, params.startDate: 2013-01-01, params.timeZone: US/Central

这是我的域类中的一些代码

```
 class MyClass {
     DateTime startDate
    }
    static mapping {
     startDate type: PersistentDateTimeWithZone, {
      column name: "start_date_time"
      column name: "start_date_zone"
    } 
```

这是我的控制器的一些代码

```
 //This is a service i created to return the UTC id of a long time zone
    def tzs = new TimeZoneService()
    params.timeZone = tzs.getTimeZoneId(params.timeZone)    
    def startTimeZone = DateTimeZone.forID(params.timeZone)

    def startDate = new DateTime(params.startDate + "T" + params.startTime, startTimeZone) 
```

这是我的数据库中的样子：

```
 start_date_time: 2013-01-01 01:00:00 
    start_date_zone: -06:00 
```

所以这就是问题所在。当我使用以下模式格式化 startTime

```
 DateTimeFormatter fmt = DateTimeFormat.forPattern("MMM dd, yyyy  h:mm a z"); 
```

我的时区显示为 -06:00 而不是美国/中部。这是我的问题：我正在尝试不同的方法来持久化我的 DateTime。如果我只想使用一列将日期时间和区域保持在一起，我该怎么做？如果我的日期时区属性作为单独的参数出现，那么使用这三个参数构建 DateTime 的正确方法是什么？请帮忙！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:43:32.743

为了修复此错误，您需要获取时区偏移的 UTC 值。我相信它通过 Joda DateTimeZone 为您提供的输出是 America/Chicago、America/Eastern、America/Pacific 等，因此，如果您想要自定义值，例如 US/Central，则必须创建一个映射您想要匹配这些偏移量的任何值。

希望这可以帮助！

# php - 如何保护文件免受未经授权的下载

> ID：15078973
> 
> 赞同：4
> 
> 时间：2013-02-26T00:05:58.043
> 
> 标签：php, mysql, apache, download

我正在使用 PHP 和 MySQL 数据库创建会员网站，我可以让用户使用他们的用户名和密码登录。所有非常标准的东西。

我什至建立了允许注册用户下载示例视频文件的系统。这也很好用。

然而，问题是任何能够弄清楚文件系统的人都可以直接下载这些文件。

假设我们有一个包含名为“videos”的视频内容的主文件夹，在“videos”中我们有诸如“planes”、“trains”和“automobiles”之类的子文件夹，每个文件夹中有单独的文件夹（例如“jets” '、'prop' 和 'spy' for 'planes'）以及每个子类别的特定视频。

因此，如果有人知道文件系统，`https://www.myvideosite.com/videos/planes/jets/f15.wmv`只要他们知道文件名，他们就可以简单地键入并下载到他们心中的内容。（如您所见，我有一个安全连接，它位于运行 Linux 的 Apache 服务器上。）

这是一个主要的安全漏洞，我想在它被发现之前堵住它。我研究了 .htaccess 的东西，但我的努力经常导致整个“视频”文件夹无法访问（我承认，我对这一切都是新手！）。

我还阅读了有关将我的视频文件放在站点根文件夹之外的内容，但这看起来更加令人困惑。

简而言之，我到底如何才能禁止非会员但可能（通过任何方式）发现文件系统是什么的人下载？在我看来，这应该很简单，但可惜我没有找到可靠的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T00:10:16.390

您可以使用 .htaccess 文件保护您的视频文件夹，并通过 php 脚本“路由”所有请求：

```
RewriteEngine on
RewriteRule (.*) index.php?file_id=$1 [L] 
```

并在 index.php 中进行身份验证

```
session_start();
// get filename from database or somewhere else
$filename = getFilename($_GET["file_id"]);

if ($_SESSION["is_logged_in"]) {
    readfile($filename);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T00:39:30.737

如果您在使用 .htaccess 时遇到问题，这是一个答案

好的，所以如果您使用的是 public_html，请转到它的父目录创建一个目录名称“videos”。（如果不在 public_html 中，您可能需要在路径中添加一些 ../）。pathinfo 负责验证问题，如果有人试图在其中偷偷摸摸路径，它将只返回一个文件名。如果将其命名为 download.php，则：

下载.php?video=fun.mp4

将从视频目录加载一个名为 fun.mp4 的文件。

```
<?php
// do your user authentication
$video_directory = "../videos/";
$file = pathinfo($_GET["video"], PATHINFO_BASENAME);
if( $user_is_logged_in )
{
    if( file_exists( $file ) readfile( $video_directory . $file );
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:39:40.727

使用简单的 .htaccess/htpasswd 身份验证、digest 或 basic：

[http://www.askapache.com/online-tools/htpasswd-generator/](http://www.askapache.com/online-tools/htpasswd-generator/)

# git - “git log”输出因签出分支而异——文档在哪里解释这一点？

> ID：15078976
> 
> 赞同：3
> 
> 时间：2013-02-26T00:06:10.507
> 
> 标签：git

`git log`根据我当前签出的分支，输出会有所不同。它在 git 文档中的什么地方解释了这种行为？

我看了看，`git log --help`但`git rev-list --help`没有看到任何解释`git log`基于我签出的分支的上下文相关的内容。

编辑：
我已经阅读了@max 和@James 提到的以下部分，并且很清楚当其中一个提交被省略并被`..`指定时会发生什么。但是当两个提交都被省略时会发生什么是模棱两可的。当一个提交被省略并且`..`被省略时，它也是模棱两可的：

> <从>..<直到>
> 
> 仅显示指定的两个提交之间的提交。当 <since> 或 <until> 被省略时，它默认为 HEAD，即当前分支的尖端。

因此，例如，以下内容
`git log master..` 等价于： 等价于：
`git log master..HEAD`

`git log ..master`相当于：
`git log HEAD..master`

但是，如果<since> 和 <until> 都被省略了，那又如何呢**？**
`git log`不**等于**：
`git log HEAD..HEAD`

那么`git log`<since>..<until> 格式中的等价物是什么？

如果只列出了一个提交，但没有列出，`..`那又如何呢？
`git log foo`相当于：
`git log foo..HEAD`或
`git log HEAD..foo`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T00:13:08.250

[git-log 手册页](http://www.kernel.org/pub/software/scm/git/docs/git-log.html)的第一部分之一：

> <从>..<直到>
> 
> 仅显示指定的两个提交之间的提交。当 <since> 或 <until> 被省略时，它默认为 HEAD，即当前分支的尖端。

`git log`需要一个点（或多个点）开始，所以当没有提供修订时，它默认为`HEAD`，它指向当前分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T00:19:56.690

Git log 有一个隐含的参数 HEAD 所以当你这样做时

> 混帐日志

你实际上在做

> git日志头

这意味着您将从当前分支的尖端获取日志

从[Git 日志手册](http://www.kernel.org/pub/software/scm/git/docs/git-log.html)中获取 since..until 选项

> 仅显示指定的两个提交之间的提交。当 或 被 > 省略时，**它默认为 HEAD**，即当前分支的尖端。如需更完整的 > 拼写 and 的方法列表，请参阅 gitrevisions(7)。

根据**更新的问题**，以下应解释您所说的所有情况

来自[Git 修订版](http://git-scm.com/docs/gitrevisions.html)

> 例如，origin.. 是 origin..HEAD 的简写，并询问“自从我 > 从 origin 分支分叉后我做了什么？” 类似地，..origin 是 HEAD..origin 的简写，并且 > 询问“自从我从他们那里分叉后，origin 做了什么？” 请注意，.. 意味着 >HEAD..HEAD 是一个空范围，可以从 HEAD 到达和无法到达。

如果 .. 被省略，那么它只是

```
git log <rev> 
```

其中包括可从 rev （即祖先）访问的提交。如手册中所述，这在[git-rev-list](http://www.kernel.org/pub/software/scm/git/docs/git-rev-list.html)谁的选项适用于 git-log 中进行了解释。

# c - 父进程在 linux shell 上等待上一个子进程

> ID：15078979
> 
> 赞同：0
> 
> 时间：2013-02-26T00:06:44.760
> 
> 标签：c, linux, signals

我有一个分叉进程的程序，并确定子进程是否应该在前台和后台运行。我在分叉之前调用信号函数来处理子信号，以确保死去的子进程不会变成僵尸。

到目前为止，我的程序运行良好，它创建一个子进程并在用户输入带有“&”的命令时在后台运行它，并在用户输入不带“&”的命令时在前台运行它。

但是，我发现了一个非常有趣的行为。假设我调用了这个操作序列：

```
sleep 5 &
ls 
```

第一个命令可以正常工作，父进程不会等待 sleep 5 完成。但是，当我运行“ls”时，它会打印该文件夹中的所有文件（这很好），但是外壳卡住了，等待之前的“sleep 5 &”完成......

为什么会出现这种情况？我的子进程和父进程代码（分叉后）如下所示：

```
 if (pid == 0)
 {
      // child process, execute stuff
      execv();
 } 
 else if (pid > 0) 
 {
      // parent process: call waitpid to wait for foreground child
 } 
```

我试图做一些研究，但我找不到任何可以帮助我的东西。我尝试通过在 execv() 之前调用它来为子进程使用“set session-id”，但它会阻止我的子进程在终端上打印任何内容。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:57:14.027

```
 #define _XOPEN_SOURCE 700
    #include <unistd.h>
    #include <signal.h>
    #include <stdio.h>
    #include <stdbool.h>
    #include <string.h>
    #include <stdlib.h>
    #include <sys/types.h>
    #include <sys/wait.h>

    void run_command(void)
    {
        char *cmd = NULL, *arg;
        size_t n, l;
        bool background;
        pid_t child;

        l = getline(&cmd, &n, stdin);
        cmd[l-1] = 0;
        l--;

        if (cmd[l-1] == '&') {
            background = true;
            cmd[l-1] = 0;
            l--;
        }
        else
            background = false;

        arg = strchr(cmd, ' ');
        if (arg) {
            *arg = 0;
            arg++;
        }

        child = fork();

        if (child) {
            if (!background)
                waitpid(child, NULL, 0);
        }
        else {
            execlp(cmd, cmd, arg, NULL);
            exit(-1);
        }

        free(cmd);
    }

    int main(void)
    {
        sigset_t set;
        struct sigaction sig;

        sigemptyset(&set);
        sig.sa_handler = SIG_DFL;
        sig.sa_mask = set;
        sig.sa_flags = SA_NOCLDWAIT;
        sigaction(SIGCHLD, &sig, NULL);

        while(!feof(stdin)) run_command();
    } 
```

这按预期工作：

```
hdante@aielwaste:~/code$ ./shell 
pwd
/home/hdante/code
ls /home
hdante
sleep 5
ls /
bin    dev   initrd.img      lib32   lost+found  opt   run      srv  usr      vmlinuz.old
boot   etc   initrd.img.old  lib64   media       proc  sbin     sys  var
cdrom  home  lib         libnss3.so  mnt         root  selinux  tmp  vmlinuz
sleep 5&
xedit&
ls /
bin    dev   initrd.img      lib32   lost+found  opt   run      srv  usr      vmlinuz.old
boot   etc   initrd.img.old  lib64   media       proc  sbin     sys  var
cdrom  home  lib         libnss3.so  mnt         root  selinux  tmp  vmlinuz 
```

在上面的示例中， sleep 5 正确阻塞，而 sleep 5& 和 xedit& 不会。

如果不查看您的代码，就不可能知道问题出在哪里。但是请注意我处理僵尸进程的方式：我在 sa_flags 中使用 SA_NOCLDWAIT，这样我就不需要跟踪 pid。另外，我使用waitpid() 等待前台子进程。这就是我认为问题所在。您的代码可能正在调用 wait() 而不是 waitpid()。不同之处在于 wait() 等待所有孩子。

# javascript - 使用 Knockout.js 在网格中创建依赖下拉列表

> ID：15078989
> 
> 赞同：4
> 
> 时间：2013-02-26T00:07:43.353
> 
> 标签：javascript, knockout.js

我正在尝试创建一个包含两个下拉列的数据绑定表。但是，右侧下拉菜单中可用的选项取决于左侧下拉菜单中选择的内容。例如，imagine`DropdownA`有一个州列表，并且`DropdownB`有一个该州的城市列表。我的模板如下所示：

```
<!-- ko foreach: MeasurementInfoPlans -->
<tr>
   <td><select id="DropdownA" data-bind="options: $root.AllStates, optionsValue: 'State', optionsText: 'Name', value: StateId"></select></td>
   <td><select id="DropdownB" data-bind="options: $root.AllCities, optionsValue: 'City', optionsText: 'Name', value: CityId"></select></td>
</tr>
<!-- /ko --> 
```

现在，`DropdownB`显示`$root.AllCities`. 但是，我希望*它只*显示具有在`State`中选择的任何值的属性的城市`DropdownA`。

我在网上找到了各种关于如何使用计算的 observable 定义依赖下拉列表的示例，但是这些示例假设您只有一个源下拉列表（例如 State）。就我而言，我需要在网格中创建任意数量的下拉*对。*有没有人有一个如何做到这一点的例子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T00:26:22.410

我会将城市放在`state`对象上，然后将它们作为`computed`行项目跟踪，因为它将具有用于状态选择的 oberable。这是[一个小提琴](http://jsfiddle.net/tyrsius/jP8SY/)

html:

```
<select data-bind="options: $parent.states,
                   optionsText: 'name',
                   value: state"></select>
<select data-bind="options: cities, value: city"></select> 
```

js：

```
 self.state = ko.observable("");
    self.city = ko.observable("");
    self.cities = ko.computed(function(){
        if(self.state() == "" || self.state().cities == undefined)
            return [];
        return self.state().cities;
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T00:17:01.610

我想到了两个解决方案：

*   订阅`DropdownA`viewmodel 中的 observableArray 并替换 observableArray 中的城市范围，`DropdownB` 只要它发生变化
*   使用可观察的数据上下文：使用可观察的作为选项源，以便您在需要时也可以更改它。像第一个一样订阅并`DropdownA`在更改时替换整个城市集合

我会选择第二个，因为那更干净。

这是我为您制作[的 jsfiddle 示例。](http://jsfiddle.net/yBwe6/)

html:

```
<select data-bind="options: dropdownA, value: dropdownAValue">
</select>
<select data-bind="options: dropdownB">
</select> 
```

JS：

```
var viewModel = function() {
    var _this = this,
        dataSource1,
        dataSource2;

    dataSource1 = ["Hello"];
    dataSource2 = ["World"];

    _this.dropdownA = ko.observableArray(["A", "B"]);
    _this.dropdownB = ko.observable(dataSource1);
    _this.dropdownAValue = ko.observable();

    _this.dropdownAValue.subscribe(function() {
        if (_this.dropdownAValue() == "A") {
            _this.dropdownB(dataSource1);   
        } else {
            _this.dropdownB(dataSource2);   
        }
    });
};

ko.applyBindings(new viewModel()); 
```

然后很容易在多行中使用这个概念：http: [//jsfiddle.net/jGRQH/](http://jsfiddle.net/jGRQH/)

html:

```
<table data-bind="foreach: rows">
    <tr>
       <td>
            <select data-bind="options: $root.dropdownA, value: dropdownAValue">
            </select>
        </td>
        <td>
            <select data-bind="options: dropdownB">
            </select>
        </td>
    </tr>
</table> 
```

JS：

```
var rowViewModel = function(dataSource1, dataSource2) {
    var _this = this;

    _this.dropdownB = ko.observable(dataSource1);
    _this.dropdownAValue = ko.observable();

    _this.dropdownAValue.subscribe(function() {
        if (_this.dropdownAValue() == "A") {
            _this.dropdownB(dataSource1);   
        } else {
            _this.dropdownB(dataSource2);   
        }
    });
};

var mainViewModel = function() {
    var _this = this,
        dataSource1,
        dataSource2,
        addRow;

    dataSource1 = ["Hello"];
    dataSource2 = ["World"];

    addRow = function () {
        _this.rows().push(new rowViewModel(dataSource1, dataSource2));
    };

    _this.rows = ko.observableArray();

    _this.dropdownA = ko.observableArray(["A", "B"]);

    addRow();
    addRow();
    addRow();
};

ko.applyBindings(new mainViewModel()); 
```

# regex - 禁止在正则表达式中使用以下字符：~%^*= [{}]|;<>

> ID：15078990
> 
> 赞同：1
> 
> 时间：2013-02-26T00:07:51.043
> 
> 标签：regex, regex-negation

我正在使用这个正则表达式：

```
^(?!.*&#.*)[a-zA-Z0-9!@_'?., `#$&()-\\\\/:"]*$ 
```

但它接受以下字符：`*=+[;<>` 如何禁止它们？我尝试添加这个`(?!.*(~%^*=+[{}]|;<>))`，但没有奏效！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:12:26.673

确保逃离`-`那里。

```
^(?!.*&#.*)[a-zA-Z0-9!@_'?., `#$&()\\-\\\\/:"]*$
                                   ^^ 
```

# functional-programming - 如何处理 FRP 中的协调事件

> ID：15078995
> 
> 赞同：4
> 
> 时间：2013-02-26T00:08:16.757
> 
> 标签：functional-programming, reactive-programming

对于函数式反应式编程，是否有一种通用技术来处理必须协调的不同流中的事件？

例如，假设您有相关的流 A、B、C，例如 A -> B、B -> C 和 A -> C（即 B 依赖于 A，C 依赖于 A 和 B）。如果 A 发出一个事件，C 在一段时间内持有最新的 A，但旧的 B（从旧的 A 派生），这是流 C 的不一致状态。

有多种解决方案需要深入了解整个 FRP 流图，例如，如果 C 知道其依赖关系之间的所有关系，它将知道 B 依赖于 A，并且可以在发射之前等待 A 和 B。这看起来既复杂又昂贵。

# jquery - 带有选项卡和自定义错误消息的 jquery 表单验证

> ID：15078999
> 
> 赞同：1
> 
> 时间：2013-02-26T00:08:45.160
> 
> 标签：jquery, forms, jquery-validate

我正在使用[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)进行表单验证。

我的表格被分成不同的标签。

最后一个选项卡是我的表单提交按钮所在的位置。现在验证检查似乎工作了，但是，验证总是回到一个缺少完成的字段。

我宁愿在提交按钮上方输出我的错误消息，告诉用户返回有问题的选项卡并完成该字段。

这是我正在使用的代码

```
var errcontainer = $('.errcontainer');
$("#application-submit").click(function() {
        $("#application-form").validate({
        debug: true,
        rules: {
            student_lastname: "required"
        },
        errorContainer: errcontainer,
        errorLabelContainer: $("ol", errcontainer),
        wrapper: 'li',
        meta: "validate"
    });
}); 
```

[http://jsfiddle.net/F2HNh/](http://jsfiddle.net/F2HNh/)

当我禁用选项卡时会输出错误消息，但是当我启用它们时，我什么也得不到。

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:26:48.190

就像任何其他 jQuery 插件一样，您可以在 DOM 就绪时对其进行初始化。无需放入[`.validate()`](http://docs.jquery.com/Plugins/Validation/validate#options)点击处理程序中。如果您只是希望它在单击提交按钮时测试表单的有效性，默认情况下它已经这样做了。

```
$(document).ready(function() {
    $("#application-form").validate({
        debug: true, // <-- this will block a real submission
        rules: {
            student_lastname: "required"
        },
        errorContainer: errcontainer, // <-- errcontainer not defined or a valid selector.
        errorLabelContainer: $("ol", errcontainer), // <-- errcontainer not defined or a valid selector.
        wrapper: 'li',
        meta: "validate"  // <-- this is not a documented option
    });
}); 
```

我不确定您的意图是什么`meta: "validate"`……[这不是记录在案的选项](http://docs.jquery.com/Plugins/Validation/validate#toptions)。

此外，您的`errorContainer:`和`errorLabelContainer:`选项无效。 [根据文档和示例](http://docs.jquery.com/Plugins/Validation/validate#toptions)，`errorLabelContainer:`是*“由作为`errorContainer`选项传递的选择器指定”*。 `errcontainer`不是有效的选择器，也不是已定义的变量。

与 ,相同`errorLabelContainer:`，`$("ol", errcontainer)`不是有效的选择器。

正如您定义的那样，这两个选项都会导致插件失败并出现错误：http: [//jsfiddle.net/5JRNV/](http://jsfiddle.net/5JRNV/)

如果您不想关注第一个无效字段，请使用该`focusInvalid: false`选项。

```
$(document).ready(function() {
    $("#application-form").validate({
        focusInvalid: false,
        rules: {
            student_lastname: "required"
        },
        // other options.
    });
}); 
```

**标准演示：http: [//jsfiddle.net/5G5PT/](http://jsfiddle.net/5G5PT/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:54:30.760

尝试使用空数组传入*忽略选项*

```
$('form').validate({
 // your other options    
 ignore:[]
}); 
```

如果错误消息在您启用选项卡之前显示在您的*errorLabelContainer*中，但之后没有显示，则可能是因为错误位于隐藏的字段上，默认情况下未验证。