# StackOverflow 问答 14669000-14669999

# python - 将数组广播到不同的形状（添加“假”尺寸）

> ID：14669006
> 
> 赞同：7
> 
> 时间：2013-02-03T02:49:43.187
> 
> 标签：python, arrays, numpy, fortran, array-broadcasting

在 python 中（使用 numpy），我可以将数组广播到不同的形状：

```
>>> import numpy as np
>>> a = np.array([2,3,4])
>>> b = np.zeros((3,2))
>>> b[:,:] = np.zeros((3,2))
>>> b[:,:] = a[:,np.newaxis]  #<-- np.newaxis allows `a` to be "broadcasted" to the same shape as b.
>>> b
array([[ 2.,  2.],
       [ 3.,  3.],
       [ 4.,  4.]])
>>> c = np.zeros((2,3))
>>> c[:,:] = a[np.newaxis,:]
>>> c
array([[ 2.,  3.,  4.],
       [ 2.,  3.,  4.]]) 
```

有没有办法在**fortran**中达到同样的效果？我有一个子例程，它期望`2D`传入一个数组——我想将我的一维数组“广播”到二维，正如我在上面演示的那样。看起来很重要，我的二维数组*确实*有一个明确的接口。

作为旁注，我认为这个功能*可能*是由[`reshape`](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gfortran/RESHAPE.html)内在提供的， - 类似于：

```
real,dimension(3) :: arr1d
reshape(arr1d, (/3,3/), order=(/1,/1)) 
```

但在阅读文档后，我认为这是不可能的，因为`order`似乎需要包括所有数字 1 到“N”。

编辑：为了更清楚一点，我正在寻找一种简单的方法来在输入上创建几个转换，`a`例如：

**情况1**

```
b(i,j) .eq. a(i)  !for all j, or even just j=1,2 
```

和

**案例2**

```
b(j,i) .eq. a(i)  !for all j, or even just j=1,2 
```

任意维度的加分^(1 ：)

```
b(i,j,k) .eq. a(i,j)
b(i,k,j) .eq. a(i,j) 
```

等等

^(¹免责声明——我实际上并没有给回答者加分的超能力；-))

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T08:19:30.563

我不确定您要完成什么，但这里有几个片段可能会有所帮助。

`reshape`可以采用一个可选参数，称为`pad`，当您重塑为具有比您开始时更多的元素的数组时（例如从 3x4 到 2x4x2），该参数可用于提供所需的“额外”元素。

您可能还对`spread`为“提升”数组而设计的函数感兴趣，该函数将一个 rank-N 数组放入并输出一个 rank-N+1 数组。第二份副本中的片段可以重写为

```
array2d = spread(array1d,2,2) 
```

在此示例中，第二个参数是沿其展开第一个参数以生成输出的维度。第三个参数是要制作的输入数组的副本数。

PS 调用`spread`应该是`spread(array1d,1,2)`，我没有检查过。

**编辑**以回应OP对问题的编辑

通过分别跨维度 2 和 1 扩展来满足这两种情况，1 和 2。在 Fortran 中

```
b = spread(a,2,j) 
```

和

```
b = spread(a,1,j) 
```

由于`spread`返回一个秩 1 大于其第一个参数的秩的数组，因此它提供了所寻求的任意维度。但是，由于显示 rank-3 及以上的数组非常占用空间，我不打算这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T03:09:38.127

reshape 内在函数将允许您将 1D 数组复制到 2D 数组。使用足够新的 Fortran 编译器，它们是一种指针技术。指针提供了第二种引用存储的方式，避免了复制。该方法是“指针边界重新映射”。一个例子：

```
program array_tst

  integer, dimension (4), target :: array_1d
  integer, dimension (:,:), pointer :: array_2d

  array_1d = [ 1, 2, 3, 4 ]

  array_2d (1:2, 1:2) => array_1d

  write (*, *) array_2d (1,1), array_2d (1,2), array_2d (2,1), array_2d (2,2)

end program array_tst 
```

另请参阅[在 fortran 中更改数组维度](https://stackoverflow.com/questions/5406016/changing-array-dimensions-in-fortran)

PS回复评论...如果您不介意复制数组，这里是如何使用reshape：

```
program array_reshape

  integer, dimension (4) :: array_1d
  integer, dimension (2, 2) :: array_2d

  array_1d = [ 1, 2, 3, 4 ]

  array_2d = reshape ( array_1d, [2,2] )

  write (*, *) array_2d (1,1), array_2d (1,2), array_2d (2,1), array_2d (2,2)

end program array_reshape 
```

# jquery - jquery 插件，具有多个表的 tablesorter 寻呼机

> ID：14669008
> 
> 赞同：0
> 
> 时间：2013-02-03T02:49:50.613
> 
> 标签：jquery, asp.net-mvc

我正在尝试在带有 asp.net/mvc3 的多个表上使用 jQuery tablesorter 插件。我正在关注本教程： [http ://weblogs.asp.net/hajan/archive/2011/02/09/table-sorting-amp-pagination-with-jquery-in-asp-net-mvc.aspx](http://weblogs.asp.net/hajan/archive/2011/02/09/table-sorting-amp-pagination-with-jquery-in-asp-net-mvc.aspx)

我的页面上有 2 个不同的表格。我希望能够使用此插件为每个表设置行数。我遇到的一个问题是默认情况下表具有第一个表显示的行数。然后我可以在每张桌子上使用插件。因此，例如，在表 1 下方，我有这个：

```
<div id="pagerOwnerRequests">
    <form>
        <select id="selectOwnerRequests" class="pagesize">
        @*<select id="selectOwnerRequests" class="pagesizeOwnerRequests">*@
            <option selected="selected" value="0">0</option>
            <option value="2">2</option>
            <option value="10">10</option>
        </select>
    </form>
    </div> 
```

在表2下面，我有这个：

```
<div id="pagerBoardRequests">
    <form>
        <select id="selectBoardRequests" class="pagesize">
            <option selected="selected" value="1">1</option>
            <option value="2">2</option>
            <option value="10">10</option>
        </select>
    </form>
    </div> 
```

在这个页面的 .cshtml 文件的底部，我有这个：

```
 $(document).ready(function () {
        $("#tbOwnerRequests").tablesorter({
              headers: {
                 6: {
                        sorter: false
                    }
                }
            }
        ).tablesorterPager({ container: $("#pagerOwnerRequests"), size: $(".pagesize option:selected").val() });
    });
$(document).ready(function () {
        $("#tbBoardRequests").tablesorter({
                headers: {
                    7: {
                        sorter:false
                    }
                }
            }
        ).tablesorterPager({ container: $("#pagerBoardRequests"), size: $(".pagesize option:selected").val() });
    }); 
```

那么页面加载时会发生什么，因为表1的下拉列表设置为0，所以表1和表2都有0个元素。然后当我手动进入并更改表 1 或表 2 的下拉列表时，它会正确更新。我不确定为什么。我刚开始使用 jQuery/html/css，如果答案很明显，我很抱歉，但我似乎看不到它。TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T03:54:23.417

看看这个 [http://www.datatables.net/](http://www.datatables.net/)

这个插件在小米工作中效率太高了

# android - 在 Android 中访问和修改 Wifi 状态

> ID：14669012
> 
> 赞同：2
> 
> 时间：2013-02-03T02:50:38.603
> 
> 标签：android, android-intent, android-manifest

我想知道我是否可以得到第二个（或很多个）眼睛来帮助我解决这个问题。我一生都无法弄清楚是什么原因造成的。基本上，这只是一个允许您更改 wifi 状态的无线活动。但是，我的代码在调用 getWiFi(); 时踢出 nullPointerException。它也指向第 123 行，但我认为没有错。谁能明白为什么这会崩溃？据我所知，我在清单中的权限是正确的。这是java文件中的代码。第 89 行是 getWifi(); 叫做。任何帮助将不胜感激。

WirelessManager.java 的代码

```
import android.app.Activity;
    import android.content.Context;
    import android.os.Bundle;
    import android.view.View;
        import android.view.View.OnClickListener;
        import android.net.wifi.WifiInfo;
        import android.net.wifi.WifiManager;
        import android.widget.TextView;
        import android.widget.ImageView;
        import android.widget.Button;

        public class WirelessManager extends Activity {
    //index values to access the elements in the TextView array.
    private final int SSTRENGTH = 0;
    private final int WIFISTATE = 1;
    private final int IPADD     = 2;
    private final int MACADD    = 3;
    private final int SSID      = 4;
    private final int LINKSPD   = 5;    

    private TextView[] data_labels;
    private TextView name_label;
    private TextView enable_label;
    private Button state_button;
    private Button back_button;
    private WifiManager wifi;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.info_layout);

        wifi = (WifiManager)getSystemService(Context.WIFI_SERVICE);
        TextView[] titles = new TextView[6];
        data_labels = new TextView[6];

        int[] left_views = {R.id.first_title, R.id.second_title, R.id.third_title,
                       R.id.fourth_title, R.id.fifth_title};

        /*R.layout.info_layout is the same layout used for directory info.
         *Re-using the layout for this activity, so id tag names may not make sense,
         *but are in the correct order.
         */
        int[] right_views = {R.id.dirs_label, R.id.files_label, R.id.time_stamp,
                             R.id.total_size, R.id.free_space};
        String[] labels = {"Signal strength", "WIFI State", "ip address",
                          "mac address", "SSID", "link speed"};

        for (int i = 0; i < 5; i++) {
            titles[i] = (TextView)findViewById(left_views[i]);
            titles[i].setText(labels[i]);

            data_labels[i] = (TextView)findViewById(right_views[i]);
            data_labels[i].setText("N/A");
        }

        name_label = (TextView)findViewById(R.id.name_label);
        enable_label = (TextView)findViewById(R.id.path_label);
        state_button = (Button)findViewById(R.id.back_button);
        back_button = (Button)findViewById(R.id.zip_button);
        back_button.setText(" Back ");

        state_button.setOnClickListener(new ButtonHandler());
        back_button.setOnClickListener(new ButtonHandler());

        ImageView icon = (ImageView)findViewById(R.id.info_icon);
        icon.setImageResource(R.drawable.wireless);

        get_wifi();
    }

    private void get_wifi() {
        WifiInfo info = wifi.getConnectionInfo();
        int state = wifi.getWifiState();
        int strength = WifiManager.calculateSignalLevel(info.getRssi(), 5);
        boolean enabled = wifi.isWifiEnabled();

        name_label.setText(info.getSSID());
        enable_label.setText(enabled ?"Your wifi is enabled" :"Your wifi is not enabled");
        state_button.setText(enabled ?"Disable wifi" : "Enable wifi");

        switch(state) {
            case WifiManager.WIFI_STATE_ENABLED:
                data_labels[WIFISTATE].setText(" Enabled");
                break;
            case WifiManager.WIFI_STATE_DISABLED:
                data_labels[WIFISTATE].setText(" Disabled");
                break;
            case WifiManager.WIFI_STATE_DISABLING:
                data_labels[WIFISTATE].setText(" Being Disabled");
                break;
            case WifiManager.WIFI_STATE_ENABLING:
                data_labels[WIFISTATE].setText(" Being Enabled");
                break;
            case WifiManager.WIFI_STATE_UNKNOWN:
                data_labels[WIFISTATE].setText(" Unknown");
                break;
        }
        if(enabled) {
            data_labels[IPADD].setText(FileManager.integerToIPAddress(info.getIpAddress()));
            data_labels[MACADD].setText(info.getMacAddress());
            data_labels[SSID].setText(info.getSSID());
            data_labels[LINKSPD].setText(info.getLinkSpeed() + " Mbps");
            data_labels[SSTRENGTH].setText("strength " + strength);
        }else {
            data_labels[IPADD].setText("N/A");
            data_labels[MACADD].setText(info.getMacAddress());
            data_labels[SSID].setText("N/A");
            data_labels[LINKSPD].setText("N/A");
            data_labels[SSTRENGTH].setText("N/A");
        }
    }

    private class ButtonHandler implements OnClickListener {

        public void onClick(View v) {

            if(v.getId() == R.id.back_button) {
                if(wifi.isWifiEnabled()){
                    wifi.setWifiEnabled(false);
                    state_button.setText("Enable wifi");
                }else {
                    wifi.setWifiEnabled(true);
                    state_button.setText("Disable wifi");
                    get_wifi();
                }   
            }else if(v.getId() == R.id.zip_button)
                finish();
        }
    }

}

Code for AndroidManifest.xml

        <manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="coxxxxxxxxxx"
      android:versionCode="100"
      android:versionName="1.0.0"
      android:installLocation="auto">
    <application android:icon="@drawable/icon" android:label="@string/app_name" >

        <activity android:name=".Settings" android:label="@string/app_name" />

        <activity android:name=".ProcessManager" android:label="@string/manager_act" />
        <activity android:name=".WirelessManager" android:label="Wireless Information" />
        <activity android:name=".ApplicationBackup" android:label="Installed Applications" />

                <activity android:name=".Main"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.GET_CONTENT" />
                <data android:mimeType="*/*" />
                <category android:name="android.intent.category.OPENABLE" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>

        </activity>

        <activity android:name=".AudioPlayblack"
                  android:label="@string/media_dialog"
                  android:theme="@android:style/Theme.Dialog" />

        <activity android:name=".DirectoryInfo" android:enabled="true"
                  android:label="@string/dir_info">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <data android:mimeType="application/manager" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <activity android:name=".HelpManager"
                  android:label="XXXXXXXXX"
                  android:theme="@android:style/Theme.Dialog" />

 </application>
            <supports-screens android:smallScreens="true"
                      android:normalScreens="true"
                      android:largeScreens="true" />
            <uses-sdk android:minSdkVersion="4"
              android:maxSdkVersion="10"/>

         <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

         <uses-permission android:name="android.permission.INTERNET"></uses-permission>
         <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
         <uses-permission android:name="android.permission.CHANGE_WIFI_STATE"/>

       </manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:54:28.847

关闭 1 个错误。您获取视图的 for 循环 i<5，但您正在使用 LINKSP 访问 i=5。将您的 for 循环和所有数组增加 1。

# timeout - 如何在事件超时（批处理）中捕获按下的键

> ID：14669014
> 
> 赞同：2
> 
> 时间：2013-02-03T02:51:05.290
> 
> 标签：timeout, cmd

我在 cmd 批处理中使用超时事件，但是当它超时时，我如何捕捉用户按下事件的键？或者知道时间已经过去了？

可能是这样的：

```
@echo 关闭
echo "请按任意键继续，否则程序将退出"
超时/t 5
(
     if(timeout == true 和 keypress != "null")(
           转到继续         
     ） 别的 （
           出口
     )
)

```

P/S：很抱歉在其中使用了一些 java 代码，因为我仍然无法想象它在 cmd 批处理中是如何工作的（谷歌搜索但仍然不能。）

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:43:11.400

另一个选项是选择命令。

```
choice /c abcd /n /t 5 /d defaultchoice /m "Please press a or b or c or d to continue or Program will exit"
if errorlevel 1 set choice=a
if errorlevel 2 set choice=b
if errorlevel 3 set choice=c
if errorlevel 4 set choice=d 
```

选择命令的缺点是您不能按任何键，您必须设置用户能够按的所有键。不过，可能有更好的解决方案。

/t 用于超时

/d 是默认选择，例如`/d a`

/n 隐藏选项列表

/c abcd 将可用选项设置为 a、b、c 和 d

添加 /cs 以区分大小写

# jquery - 如何检查在一组具有不同名称值的复选框中是否至少选中了一个复选框

> ID：14669018
> 
> 赞同：5
> 
> 时间：2013-02-03T02:52:12.373
> 
> 标签：jquery, html, validation, checkbox

我有一个问题，我一直在寻找答案一段时间，但无法让它发挥作用。

我正在寻找一种方法来检查是否选中了一组复选框中的至少一个复选框。对我来说如此困难的是，这些输入中的每一个都有不同的名称值。我只找到了 jQuery 验证插件等的答案。这是我的 html：

```
<tr class="formField-checkbox formFieldRequired">
  <td class="formLabelHolder"><label for="field129">Group of checkboxes</label></td>
  <td class="formFieldHolder">
    <input type="checkbox" name="field129[0]" class="formCheckbox required" value="Something1"> 
    <label><span class="formCheckboxLabel">Something1</span></label>
    <input type="checkbox" name="field129[1]" class="formCheckbox required" value="Something2"> 
    <label><span class="formCheckboxLabel">Something2</span></label>
    <input type="checkbox" name="field129[2]" class="formCheckbox required" value="Something3"> 
    <label><span class="formCheckboxLabel">Something3</span></label>
  </td>
</tr> 
```

这是我现在拥有的 jQuery：

```
// Validate all checkboxes
var named = [];
var $requiredCheck = $(this).find('input[type="checkbox"].required');

$($requiredCheck,$formId).each(function() {
  // Creates an array with the names of all the different checkbox group.
  named[$(this).attr('name')] = true;
});

// Goes through all the names and make sure there's at least one checked.
for (name in named) {
  var $checkboxes = $("input[name='" + name + "']");
  if ($checkboxes.filter(':checked').length == 0) {
    $checkboxes.closest('.formFieldHolder').addClass('error').append('<span   class="error">Required!</span>');
  } 
} 
```

这显然目前无法完美运行，因为复选框具有不同的名称值。现在追加打印出与复选框一样多的错误消息。例如，如果有五个复选框，其中一个被选中，它仍然会给出四次错误消息。我已经尝试自己解决这个问题很长时间了，但根本无法解决。我不能更改这些复选框的名称值，也不能简单地对 html 做任何事情。我认为可以做到这一点的一种方法是删除名称中的最后 [0]、[1] 和 [2] 部分，但我没有找到如何让它工作的方法。

我认为简单的 jQuery 验证方法会失败，因为可能有更多的复选框组，而不仅仅是一个表单中的一个。下一组复选框的名称值为 name="field130[0]"、name="field130[1]" 和 name="field130[2]"。我想你明白我的意思，希望如此。

任何帮助将非常感激。

**编辑：**

增加了一个表单中可能有多个复选框的描述

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-03T03:11:10.857

你让这种方式太复杂了:)

```
if ($('.required:checked').length > 0) {  // the "> 0" part is unnecessary, actually
    [do something]
} 
```

[请参阅官方 jQuery API 页面](http://api.jquery.com/checked-selector/)上的第一个示例以获取 :checked 。

**回应您的评论**

如果页面上有多个表单，可以将表单指定为容器：

```
if ($('#form1_id').find('.required:checked').length) {... 
```

**测试多个表格**

给每个表格上课`testable_form`。

```
$('.testable_form').each(function() {
    if ($(this).find('.required:checked').length) {
        [do something - set a flag, add a class...]
    }
}); 
```

# java - Google AppEngine 数据存储 - 远程登录？

> ID：14669023
> 
> 赞同：0
> 
> 时间：2013-02-03T02:53:33.073
> 
> 标签：java, google-app-engine, nosql

有没有办法远程登录到我的 AppEngine 应用程序的数据存储，以便插入和修改实体？还是只能在我部署在 AppEngine 上的服务器端代码中执行此操作？

我正在尝试根据在线公开可用的数据在 AppEngine 上生成一个数据库，并且我想在本地运行一个程序，在我的 AppEngine 数据库上进行这些插入。这可能吗？还是我必须在 AppEngine 上为我部署一个 servlet？

我想这个问题归结为是否可以（由外界）远程访问 Google AppEngine 的数据存储。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T06:27:41.317

是的。

查看远程 API：

[https://developers.google.com/appengine/docs/java/tools/remoteapi](https://developers.google.com/appengine/docs/java/tools/remoteapi)

请务必小心，因为您必须在源代码中包含您的管理员凭据。

# ios5 - 什么取代了 iOS 5 已弃用的加速度计：didAccelerate？

> ID：14669026
> 
> 赞同：8
> 
> 时间：2013-02-03T02:53:39.080
> 
> 标签：ios5, deprecated, core-motion, accelerate-framework

嗯......我落后于时代并试图将一些旧代码移植到新应用程序中，并且加速器委托已被弃用。必须有替代品。请指出我的文档并让我开始。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-03T03:12:41.867

加速度计被 Core Motion 框架取代。以下是文档：http: [//developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CoreMotion_Reference/_index.html](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CoreMotion_Reference/_index.html)

您可能还会发现此答案很有帮助： [为什么在 IOS5 中不推荐使用加速度计：didAccelerate：？](https://stackoverflow.com/questions/6742531/why-is-accelerometerdidaccelerate-deprecated-in-ios5)

# c++ - 纹理仅适用于 compat 和 glGetError 一旦上下文打开，总是 INVALID_ENUM

> ID：14669033
> 
> 赞同：0
> 
> 时间：2013-02-03T02:54:33.957
> 
> 标签：c++, opengl, glsl, glfw

我在使用 OpenGL 3.3 Core 时遇到了一些纹理问题。

如果我使用兼容配置文件，它会完美呈现。我尝试使用 glGetError() 进行调试

它在获得 vao 后返回一个无效的枚举。并在主循环期间返回相同的值。但这肯定不是问题吗？- 到那时不可能有错误。

我印象深刻的是调用 glGetError() 会清除错误，所以下一次调用只会显示两者之间的错误？

我的平台是带有驱动程序版本 310.70 的 nVidia GTX580 的 Windows7 64。

对于我的加载库，我在 min 时使用 glload，但我也使用了 GLEW。我正在使用 GLFW 来管理 OpenGL 上下文和 DevIL 来加载纹理。我正在VS2010中构建。

这是我的完整来源的链接。（我已经将主程序中的所有内容都成熟了，并尽可能合理地命名变量）

[完整的源代码](https://dl.dropbox.com/u/15586644/so.cpp)

最有可能导致问题的代码。

使用 devIL 加载图像并缓冲到 GPU。

```
void loadImage(const char* imageFile)
{
    ILuint texid; 
    ilGenImages(1, &texid); 
    ilBindImage(texid); 

    ilLoadImage(imageFile);

    int size = ilGetInteger( IL_IMAGE_SIZE_OF_DATA ) ;
    ilConvertImage(IL_RGBA, IL_UNSIGNED_BYTE); 

    glActiveTexture(GL_TEXTURE0);
    glGenTextures(1,&textureBuffer);
    glBindTexture(GL_TEXTURE_2D, textureBuffer);

    glTexImage2D(GL_TEXTURE_2D, 
         0, 
         ilGetInteger(IL_IMAGE_BPP), 
         ilGetInteger(IL_IMAGE_WIDTH),
         ilGetInteger(IL_IMAGE_HEIGHT), 
         0, 
         ilGetInteger(IL_IMAGE_FORMAT),
         GL_UNSIGNED_BYTE,
         ilGetData());

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

    ilDeleteImages(1, &texid);

} 
```

从主循环调用的渲染函数。

```
void render()
{
    glUseProgram(program);
    glBindVertexArray(vao);

    glBindBuffer(GL_ARRAY_BUFFER, dataBuffer);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, elementObject);
    glEnableVertexAttribArray(0);
    glEnableVertexAttribArray(1);
    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D,textureBuffer);

    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

    glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, 0);
    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 0, (void*)(8*4));
    glDrawElements(GL_TRIANGLES,6,GL_UNSIGNED_INT,0); 

    glDisableVertexAttribArray(0);
    glDisableVertexAttribArray(1);
    glUseProgram(0);
} 
```

顶点着色器

```
#version 330

layout(location = 0) in vec2 position;
layout(location = 1) in vec2 coords;
smooth out vec2 textureCO;
void main()
{
    gl_Position = vec4(position.x,position.y,0.0,1.0);
    textureCO = coords;

} 
```

片段着色器

```
#version 330

out vec4 outputColor;
smooth in vec2 textureCO;
uniform sampler2D texture1;
void main()
{
    vec4 textureColor = texture(texture1, textureCO);
    outputColor = textureColor;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:03:29.280

关于获取 的问题`GL_INVALID_ENUM`，这是 GLEW 库的常见问题。它记录[在](http://www.opengl.org/wiki/OpenGL_Loading_Library)opengl.org 上。只需清除错误（通过调用`glGetError`，就像您说的那样），然后 OpenGL 错误报告将正常运行（或更准确地说，正如您所期望的那样）。

As for the texture problem, it may be related to the call to `ilGetInteger(IL_IMAGE_BPP)`. In core profiles, the internal format may only be one of the specified image formats, while according to the DevIL documentation, `ilGetInteger(IL_IMAGE_BPP)` returns an integer value of the number of bytes per pixel. `glTexImage*D` under compatibilty mode will accept values of 1, 2, 3, or 4 for the internal format, but those values will also generate a `GL_INVALID_VALUE` error under a core profile.

# php - 来自blob数据PHP的图像损坏？

> ID：14669035
> 
> 赞同：2
> 
> 时间：2013-02-03T02:55:21.207
> 
> 标签：php, blob

好的，所以我知道有人问过这个问题，但我仍然无法弄清楚我的代码出了什么问题。

我正在尝试将图像上传到数据库并将其存储为 blob，以便它可以在页面上输出。一切正常，一切都存储在 mysql 数据库中，但是当我尝试回显 blob 时，它给了我一个损坏的图像。这是我的代码。

```
$file = $_FILES['image']['tmp_name'];

if(!isset($file)) {
echo "Please select image.";
} else {
    $image = addslashes(file_get_contents($_FILES['image']['tmp_name']));
    $image_name = $_FILES['image']['name'];
    $image_size = getimagesize($_FILES['image']['tmp_name']);

    if($image_size==FALSE) {
    echo 'that is not an image.';
    } else {
     if (!$insert = mysql_query("INSERT INTO photo VALUES ('', '$image_name', '$image')")) {
      echo "Problem uploading image";
     } else {
      $lastid = mysql_insert_id();
      echo "Image uploaded.<p />Your image:<p /><img src=ShowPics.php?id=$lastid>";
     }
    }

}

?>

<form action="Photosite.php" method="POST" enctype="multipart/form-data">
<input type="file" name="image"></br></br>
<input type="submit" value="Submit">
</form> 
```

还有我的 PHP 页面

```
 <?php

 $id = addslashes($_REQUEST['id']);
 $image = mysql_query("SELECT * FROM photo WHERE id=$id");
 $image = mysql_fetch_assoc($image);
 $image = $image['image'];

 header("Content-type: image/jpeg");
 echo $image;

?> 
```

任何帮助表示赞赏？？？我只是不明白为什么我的图像损坏了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T03:17:41.313

你在第一行，之前有一个空格`<?php`。如果它在你的代码中是这样的，那就是问题所在。在回显图像之前不应输出任何内容。

如果您确定当前文件是正确的，您可以这样做

```
<?php
ob_start();

// do stuff

ob_end_clean();
header("Content-type: image/jpeg");
echo $image; 
```

使用此解决方法，如果 de DB 中的 blob 正确，则会显示图像。

[您可以使用转换检查 phpmyadmin 中](http://docs.phpmyadmin.net/en/latest/transformations.html)的 BLOB 。

* * *

PS`addslashes`仅在将值放在斜线之间时才有帮助，所以

```
$id = addslashes($_REQUEST['id']);
$image = mysql_query("SELECT * FROM photo WHERE id='$id'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T03:03:21.630

很有可能它是您的一个 PHP 文件开头的[隐藏 BOM字符。](http://en.wikipedia.org/wiki/Byte_order_mark)

请问能改吗

```
header("Content-type: image/jpeg");
echo $image; 
```

至

```
//header("Content-type: image/jpeg");
echo substr($image, 0, 20); 
```

看看它是否看起来像一个有效的 jpeg 文件的开始 - 比如 'ÿØÿàJFIF'

如果相反，它在开头有 'ï»¿'，这意味着您的 PHP 文件中至少有一个在它的开头有字节顺序标记，需要将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T02:37:45.573

嗯，在我从这个网站 [http://www.boogiejack.com/html-help/html-help-broken-image.html] 阅读这篇文章之前，我还分享了你的图像损坏问题。第一次观察帮助我了解了我在创建表字段时使用的名称，我震惊地看到我为表字段提供了错误的名称。改正后，我的形象开始出现，感谢上帝，我是不是很开心，很开心。请查看您表格的字段，也许您像我一样拼错了。:)

# sql - Rails 和 Active Record：SQL 等价物

> ID：14669042
> 
> 赞同：0
> 
> 时间：2013-02-03T02:56:32.690
> 
> 标签：sql, ruby-on-rails, rails-activerecord

我试图为表中的许多记录选择一列。这不会产生我正在寻找的东西。我试图产生的 SQL 等价物是：

```
SELECT OneColumn FROM Table WHERE ForeignKey = 1 
```

我已经尝试了 Rails Guide for Active Record 中的许多建议，但都没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:06:38.677

从 rails 3.2+ 你有[#pluck](http://apidock.com/rails/ActiveRecord/Calculations/pluck)：

```
Table.where( ForeignKey: 1 ).pluck( :OneColumn ) 
```

如果您因非常规的列或表名而遇到麻烦，请尝试：

```
Table.where( Table.arel_table["ForeignKey"].eq 1 ).pluck( Table.arel_table["OneColumn"]) 
```

如果您只想要“低级”SQL 查询，请尝试[#select_all](http://apidock.com/rails/ActiveRecord/ConnectionAdapters/DatabaseStatements/select_all)或[#select_values](http://apidock.com/rails/v3.2.8/ActiveRecord/ConnectionAdapters/DatabaseStatements/select_values)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T03:05:04.730

使用[`pluck`](http://apidock.com/rails/ActiveRecord/Calculations/pluck)：

```
Table.where(ForeignKey: 1).pluck(:OneColumn) 
```

# java - Netbeans - 鼠标经过时黑色 JPane

> ID：14669047
> 
> 赞同：2
> 
> 时间：2013-02-03T02:57:09.853
> 
> 标签：java, swing, netbeans

我正在使用Netbeans图形界面的构建工具进行项目，当我将光标移动到JFrame或JOptionPane（我只使用这些）时，它变成黑色，没有显示任何组件，如按钮或文本字段. 但是，如果我将鼠标放在组件上，它会出现，如下所示：

![黑色 JPane 插图](../Images/058a33f27cd916263853e69b0de07963.png)

那么，有人有解决这个问题的方法吗？

（我对英语感到抱歉......我是一名巴西人，他的英语课程处于第三级（六级））

# magento - 如何通过具有唯一选项ID的代码在magento中添加自定义选项？

> ID：14669058
> 
> 赞同：1
> 
> 时间：2013-02-03T02:59:08.830
> 
> 标签：magento, options, product

我想向产品添加具有唯一 ID 的自定义选项。我已经使用此代码向产品添加了一些自定义选项，它工作正常

```
 $options_print[$sku] = array(
                    'title' => 'Select Size',
                    'type' => 'drop_down',
                    'is_require' => 0,
                    'sort_order' => 0,
                    'values' => array()
                );
                $options_print[$sku]['values'][] = array(
                    'title' => '5',
                    'price' => 0.00,
                    'price_type' => 'fixed',
                    'sku' => '',
                    'sort_order' => '1'
                );
                $options_print[$sku]['values'][] = array(
                    'title' => '6',
                    'price' => 0.00,
                    'price_type' => 'fixed',
                    'sku' => '',
                    'sort_order' => '1'
                ); 
```

我的问题是，我想为下拉选项“选择大小”分配唯一的 ID，这样我就可以在需要时通过代码使用该 ID 检索它，但似乎没有分配“sku”或“option_id”的选项它。

Magento 会自动为其分配选项 ID，例如，

```
Array
(
    [label] => Select Size
    [value] => 10
    [print_value] => 10
    **[option_id] => 267**
    [option_type] => drop_down
    [option_value] => 729
    [custom_view] => 
) 
```

我无法控制它，选项 id 会随着每个产品而变化，所以我很难根据它的 id 检索这个选项值。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T07:48:04.410

```
$productSku = $_product->getSku();
$product = Mage::getModel('catalog/product');
$productId = $product->getIdBySku( $productSku );

$product = Mage::getModel("catalog/product")->load($productId);

$attVal = $product->getOptions();

$optStr = "";

// loop through the options
foreach($attVal as $optionKey => $optionVal) {

    //$optStr .= "<br/>";

    //$optStr .= $optionVal->getTitle().": ";

    $optStr .= "<select style='display:block; clear:both;' name='options[".$optionVal->getId()."]'>";

    foreach($optionVal->getValues() as $valuesKey => $valuesVal) {
        $optStr .= "<option value='".$valuesVal->getId()."'>".$valuesVal->getTitle()."</option>";
    }

    $optStr .= "</select>";

}

echo($optStr ); 
```

# algorithm - 使用 2 个数字求和的方法数

> ID：14669061
> 
> 赞同：1
> 
> 时间：2013-02-03T02:59:46.350
> 
> 标签：algorithm, combinations

我需要找到仅使用数字 1 和 2 求和的方法数（比如 1000000）。顺序很重要。我使用组合提出了一个解决方案：

![在此处输入图像描述](../Images/eee2149d96faeb070d31822db0846795.png)

`n`总和在哪里。

例子：

对于`n=7`，有`21`办法。

1111111、111112、111121、111211、112111、121111、211111、11122....1222、2122、2212、2221

这个数字可能非常大，我必须以一些大素数为模找到它。（是的，它是在线编码竞赛的一个小问题）。我需要一个对计算机更友好的公式……有什么帮助吗？或者也许可以通过创建递归和矩阵求幂来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:13:02.743

这样做的方法数等于第 n 个斐波那契数，F(n)，易于计算。

归纳证明。假设 n 为真。考虑一个长度为 n+1 的序列。这可以通过将 1 添加到总 n 的序列或 2 到总 n-1 的序列来形成。这是不同的，代表了所有的可能性。

所以 F(n+1) = F(n) + F(n-1) F(1) = 1

整齐吧？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T10:44:09.620

您要查找的数字是第 n 个斐波那契数。最好的方法（因为你说 n 可能真的很大）是实现这个递归`O(log n)`公式（这些是 2x2 矩阵，对于丑陋的格式感到抱歉）。

```
[F(n+2)] = [1 1] [F(k+1)]
[F(n+1)]   [1 0] [F (k) ] 
```

也许显式形式更适合您，而不是递归形式：

```
[1 1]^n = [F(k+1)   F(k) ]
[1 0]     [ F(k)   F(k-1)] 
```

这是我知道计算斐波那契数的最快方法。请记住，输出增长非常快，因此您将无法缓存大 n 的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T03:25:48.990

这是我想出的：

```
def onesAndTwos(num):
    if num <= 0:
        return set()
    elif num == 1:
        return set([(1, 0)])
    elif num == 2:
        return set([(2,0), (0, 1)])
    else:
        setA = set([(1 + x[0], x[1]) for x in onesAndTwos(num-1)])
        setB = set([(x[0], 1 + x[1]) for x in onesAndTwos(num-2)])
        setA.update(setB);
        return setA

print onesAndTwos(10)
print len(onesAndTwos(10)) 
```

它使用一组元组，其中第一个元素是个数，第二个元素是个数。所以 3 的总和可以产生`set[(3,0), (1,1)]`。要找出有多少组合，您可以计算集合中的元组。10的输出：

```
set([(8, 1), (6, 2), (0, 5), (4, 3), (10, 0), (2, 4)])
6 
```

这在某种程度上是一种动态编程方法，其中我们有一组重复出现的子问题和类似的结构，使我们能够在以前的解决方案的基础上进行构建。这并不是最优的，因为您没有在两个分支中重用先前计算的值（第一个在取走 1 时，第二个在取走 2 时），所以我认为这是一个幼稚的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T05:02:38.090

```
public class Fibonacci {
    public static int magic(int input) {
        if (input == 1) {
            return 1;
        } else if (input == 2) {
            return 2;
        } else {
            return magic(input-1) + magic(input-2);
        }
    }

    public static void main(String args[]) {
        int input = 7;
        int numberOfCombinations = magic(input);
        System.out.println("The total number of combinations for the given integer "+input+" is "+numberOfCombinations);
    }
} 
```

完整且有效的 Java 代码。随意将其用于您的比赛。我希望代码对底层算法是不言自明的。祝你好运！

# load-balancing - OrientDB - 将数据库复制到远程服务器错误

> ID：14669067
> 
> 赞同：2
> 
> 时间：2013-02-03T03:00:46.120
> 
> 标签：load-balancing, distributed, orientdb

很抱歉再次提问，但我无法让它工作。

首先，我在 204 上启动一个 OrientDB 服务器，然后我在我的本地机器上启动一个 OrientDB 服务器，并创建一个数据库

```
orientdb> create database remote:localhost/mydemo root password local graph
create database remote:localhost/mydemo root password local graph
Creating database [remote:localhost/mydemo] using the storage type [local]...

Disconnecting from remote server [remote:localhost/ddemo]...OK

Disconnecting from the database [ddemo]...OK
Connecting to database [remote:localhost/mydemo] with user 'admin'...OK
Database created successfully.

Current database is: remote:localhost/mydemo 
```

然后我尝试将此数据库复制到远程服务器 204：

```
orientdb> copy database mydemo admin admin 192.168.222.204 local
orientdb> copy database mydemo admin admin 192.168.222.204 local
copy database mydemo admin admin 192.168.222.204 local
Copying database 'mydemo' to the server '192.168.222.204' via network streaming...

!ERROR: Connection is closed 
```

为什么我得到这个错误？

我也尝试过使用 JAVA API，没有异常，但是执行后，远程服务器上不存在数据库。

```
 OServerAdmin admin = new OServerAdmin("remote:localhost/mydemo");
    admin.connect("root", "password");
    admin.copyDatabase("ddemo", "admin", "admin", "192.168.222.204", "local"); 
```

如何将其复制到远程服务器，以便继续进行集群工作？

当我想将数据库复制到204时，远程服务器204应该作为集群节点还是作为单个服务器启动？

是否有所有这些操作的文件？有关如何设置有关 OrientDB 的集群服务器的任何文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T10:58:08.527

您正在尝试将数据存储类型创建为本地，但将 url 提供为远程：。配置集群/分布式网络的步骤。- 在一个节点中创建数据库。- 将 db 文件夹复制到其他节点 - 将 orinetDB 服务器作为 dserver.bat 启动。它将创建集群。

# android - 如何从服务调用的活动返回数据

> ID：14669070
> 
> 赞同：1
> 
> 时间：2013-02-03T03:01:34.310
> 
> 标签：android, android-activity, android-service

基本上，我正在从我的服务创建一个活动，该活动使用 AlertDialog 询问用户如果在与后端服务器同步期间发生冲突，他们想要什么文件。由于 Activity 是在服务中创建的，因此我无法使用 startActivityForResult(...);。我知道它不受欢迎，最好使用通知。我这样做是因为将运行此应用程序的设备专门用于此软件，并且所有应用程序都将使用此服务同步到中央数据库。

除了 startActivityForResult(...) 之外，还有其他方法可以将数据从活动发送回调用它的服务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T03:07:21.533

有几种方法可以做到这一点。一种是使用 AIDL 允许服务和活动通过函数调用进行通信（Android 会根据需要将它们转换为 RPC）。这需要大量的工作，但它是一种有用的技术。另一种方法是使用自定义意图，并让服务为该意图创建广播接收器，并通过消息通知其处理程序。

# excel - 从关闭的 excel 工作启动镜像页面

> ID：14669074
> 
> 赞同：1
> 
> 时间：2013-02-03T03:02:44.847
> 
> 标签：excel, vba

我正在尝试构建一个从封闭的工作簿中提取 5 张工作表的 excel 工作簿，原始工作簿大约有 20 张工作表。

*   两个文件都在同一个位置，我想在原书中保持所有相同的格式。所以我需要镜子。

*   新工作簿每次打开时都需要能够与原始工作簿刷新/同步。（我总是可以作为同步宏，没问题）

链接单元格很容易，但我需要打开两个文件。如果可能的话，我真的需要避免这种情况。

如果有人能指出我正确的方向，将不胜感激！

# c - 在文本冒险中让用户选择“是或否”？

> ID：14669080
> 
> 赞同：-3
> 
> 时间：2013-02-03T03:03:42.010
> 
> 标签：c, user-input

如何在 C 中提出是或否的问题？

该代码应该采用用户名并将其设为字符串（有效）。然后它继续询问用户是否准备好开始他们的旅程（这将是一个简单的文字冒险游戏）。

不幸的是，这不起作用。我无法提出是/否的问题，因为我不知道该怎么做。谷歌搜索和搜索 StackOverflow 也没有帮助我。

这是我迄今为止所拥有的：

```
#include <stdio.h>

int main()
{

/*This declares the strings*/

char name[20];
char yesno[3];
char choice[1];

/*This tells the user that they should only use Y/N when responding to Yes or No questions.*/

printf("When responding to Yes or No questions use Y/N.\n");

/*This asks the user what their name is and allows the program to use it as a string for the rest of the program*/  

printf("Hello! What is your name?\n");
scanf("%s",name);

printf("Hello %s, are you ready for your journey?\n",name);
scanf("%c",choice);

char choice, 'Y';
while (choice != 'N' && choice == 'Y')
    {
        printf("Okay!Let's continue %s.\n",name);
    }
char choice,'N';
while (choice != 'Y' && choice == 'N')
    {
        printf("Goodbye.\n");
    }

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:49:46.963

我看到一些可能的问题：

> printf("你好 %s，你准备好你的旅程了吗？\n",name); scanf("%c",选择);

1) Scanf 需要地址来存储扫描的输入，并且由于您已经指定了数组，因此将数组名称作为参数适用于 'name'，它有 20 个字符的空间（请记住 C 使用 NULL ('\0')字符来标记字符串的结尾）。给出数组名称会产生数组开头的地址，这是您想要的，但您将“选择”声明为一个字符的数组。它不能保存任何非空字符串，因为终止的 '\0' 填充了数组。我建议只使用 char 并给 'scanf' 它的地址，因此：

```
char choice;
...
scanf("%c", &choice);
...
if (choice=='Y' [etc.] 
```

如果您只是必须使用数组，请记住 'choice' 给出第一个元素的*地址*，因此要测试 char，您需要 '*choice' 或 'choice[0]' （它们是相同的）。

所以：`... if (*choice == 'y' || *choice == 'Y')...`

或者：`... if (choice[0] ...`

顺便说一句，当您测试大量字符时，func 的 'toupper(int c) 和 tolower(int c) 可以节省打字：（`c=(char) tolower((int) c); if (c == 'y') ...else if (c == 'z') [etc.]`您可能会在没有演员表的情况下过关）。

- 另外，当有人输入超过 19 个字符的名称时，`scanf`会将它们存储在`name`数组之后的内存中，可能会清除一些其他数据。事实上，这可能是你的问题。使用`scanf("%19s", name)`将解决这个问题（你还应该确保`yesno`得到@最多两个字符）。

[编辑：]更进一步：如果您想循环直到获得有效输入，您需要执行以下操作：

```
...
printf("Are you truly ready to embark on your journey (y/n)? ");  
scanf("%c", &choice); /* 'choice' defined as char, not vector */  
while (!strchr("nNyY", choice)) { /* bad input, reprompt */  
    printf("Please enter either 'y' or 'n': ");  
    scanf("%c", &choice);  
}  
if (choice=='y' || choice=='Y') {  
    printf("Well met, %s, thou brave soul!\n", name);  
    /* etc. */  
}  
else {  
    printf("Goodbye!\n");  
    /* etc */  
} 
```

我承认我没有测试过这段代码，但这是我要开始的地方。希望它有帮助......
问候，埃德

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T10:58:52.317

```
#include <stdio.h>
#include <string.h>

int letterinput(const char *validchars) {
    int ch;
    do ch = getchar(); while ((ch != EOF) && !strchr(validchars, ch));
    return ch;
}

int main(void) {
    int x;
    printf("Enter Y/N: ");
    fflush(stdout);
    x = letterinput("nNyY");
    if (x != EOF) {
        if ((x == 'y') || (x == 'Y')) {
            printf("YES!\n");
        } else {
            printf("no :(\n");
        }
    } else {
        printf("You didn't answer\n");
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T03:08:18.300

```
char[80] choice;
fgets(choice, sizeof(choice), stdin);

if (choice[0] == 'Y' || choice[0] == 'y')
{
    printf("Okay!Let's continue %s.\n",name);
}
else
{
    printf("Goodbye.\n");
    exit(0);
} 
```

# java - 旧 Java 项目兼容性

> ID：14669081
> 
> 赞同：0
> 
> 时间：2013-02-03T03:03:55.437
> 
> 标签：java

我想问一个关于项目兼容性的问题。我的论文项目是在 Windows vista 和 XP 上的 JRE 1.6 和 JDK 1.6 下开发的。该项目使用Java新套接字。今天我尝试在 Windows 8（64 位）机器上运行它。插座不工作。我稍后将 JRE 和 JDK 配置为 1.6。它有时会开始工作。消息不能通过本地机器上不同进程之间的套接字传递。我还使用了不同版本的 eclipse。我现在没有任何线索。防病毒软件也会成为一个因素吗？还是与 IPv4 和 IPv6 有关？

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:47:15.807

这很可能不是 Java 兼容性问题。最可能的解释是（IMO）您的应用程序使用了错误的地址，或“防火墙”，或（可能）“访问控制”。

也有可能您在新机器（或其他东西）上专门禁用了 IPv4（或 IPv6），并且您已将应用程序编码为以 IPv4 为中心（或以 IPv6 为中心）。

# php - 架构选择：如何在一个站点中处理多个应用程序

> ID：14669082
> 
> 赞同：0
> 
> 时间：2013-02-03T03:03:55.983
> 
> 标签：php, ruby-on-rails, codeigniter

我有一个网站，其中有一个企业的多个应用程序。它们共享多种模型，但每种模型的功能之间都有明显的区别。例如，其中一个应用程序允许用户为客户报价产品。另一个应用程序是购物车。另一个是用于跟踪产品。他们为不同的受众做不同的事情，但他们都使用产品和用户模型等。

我的问题是，当使用像 codeigniter for php 或 RoR 这样的框架时，最好的架构决策是什么：

1.  **只构建一个包含所有功能的应用程序。**

2.  **在一个“主应用程序”中构建多个应用程序并处理常用模型和库（我的选择）**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:26:18.770

我们也在处理相同的场景。我们的解决方案是在 .NET 中，但技术不是需要担心的问题，至少在大多数情况下是这样。

我们常见的应用程序组件是：客户帐户管理、购物车和身份验证模型，在 3 个不同的客户端 Web 应用程序中共享。您可能需要研究几种方法来解决此问题。目标是在您的所有网站上共享通用组件。

我们选择的方法是让我们所有的应用程序共享相同的代码库。我们从所有三个应用程序中提取了客户帐户管理、购物车和身份验证模型，并首先创建了一个通用代码库。关键是要确保公共共享模型不知道使用它服务的应用程序。在某些情况下，我们使用特定于应用程序的注入，但主要的通用组件大部分只关心要编写哪个应用程序数据库，其他常见但对于每个应用程序不同的杂项设置。

缺点是每个应用程序都有自己的二进制文件，因此当在同一个 Web 服务器上运行时，加载到内存中的代码是每个应用程序加载相同公共模型的三倍。但这是我们预先知道的价格，因为现在内存非常便宜。

优点是我们有共同的关注点分离，如果在某些时候应用程序变得足够不同，它们可以演变成不同的动物。

另一种方法是将通用模型分离为 Web 服务。但是从部署的角度来看，这种方法有点脆弱。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T03:21:56.897

对于 RoR，您应该考虑创建要在您的应用程序之间共享的 gem。这将允许您选择这些组件的哪种组合用于这些客户端。

您可以研究的另一件事是引擎，它就像应用程序中的应用程序 - [http://guides.rubyonrails.org/engines.html](http://guides.rubyonrails.org/engines.html) - 此页面为您提供了如何使用它的示例。

# postgresql - 不使用连接的 PostgreSQL 查询

> ID：14669083
> 
> 赞同：0
> 
> 时间：2013-02-03T03:04:25.673
> 
> 标签：postgresql

是否可以为 PostgreSQL 数据库编写/制作模式，然后查询让我们说

```
SELECT email, username, city_population
FROM users, cities
WHERE email = 'user@example.com' 
```

用户表和城市表之间的连接是在其他地方定义的，PostgreSQL 使用该信息来连接表。有没有类似的东西？

编辑：没有意见

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T03:10:18.653

有`NATURAL JOIN`，但要使其工作，列必须具有相同的名称。换句话说，这将起作用：

```
CREATE TABLE cities (
  city_id SERIAL PRIMARY KEY,
  city_population INTEGER,
  ...
);

CREATE TABLE users (
  username VARCHAR PRIMARY KEY,
  city_id INTEGER REFERENCES cities,
  ...
);

SELECT email, username, city_population
FROM users
NATURAL JOIN cities
WHERE email = 'user@example.com'; 
```

威尔的观点解决方案更好，可能更接近你应该想要的，但我认为这更接近你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T03:15:42.807

所以你想从联合表中得到结果，只是没有定义如何加入它们？

答案是不。*显然，您必须以某种方式*加入他们，并且由于有很多可能的方式，您必须定义*如何*。

[`NATURAL JOIN`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)可能是你所说的下一个最好的事情。请参阅[@Daniel 的答案](https://stackoverflow.com/a/14669129/939860)。

标准 SQL 中的另一个语法快捷方式是[`USING`从句](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)。使用它，您可以定义要连接表的列列表。列名在两边都必须是*唯一的。*

```
SELECT u.email, u.username, c.city_population
FROM   users  u 
JOIN   cities c **USING (city_id)**
WHERE  u.email = 'user@example.com'
```

我还为您原本可能不明确的查询添加了*表格限定条件。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T16:03:04.993

不，`NATURAL JOIN`Daniel 所描述的和 SQL 一样接近。这是有原因的。虽然人们经常希望基于同一域中列的相等性来加入，但他们有时想要更复杂的东西。我看到很多查询询问诸如“谁住在离这个城市 300 英里范围内的城市？”、“离该用户最近的 3 个城市是什么，不包括他们居住的城市？”或“什么城市？”其他用户与该用户生活在同一状态？” 基于一些假设的连接标准的自动连接将使编写明确的查询来回答这样的问题变得更加困难。

也就是说，想要您正在寻找的东西并不少见，因此正如 Craig 所说，有许多工具使用外键定义来提供默认链接。

基于这个问题，我怀疑您可能对[HTSQL](http://htsql.org/)感兴趣，它提供自动链接和其他便利功能，以帮助弥合关系数据库与人们可能已经知道的其他格式之间的差距。它的发展部分由基金会资助，包括国家科学基金会。（除了阅读文档，并在会议上与其中一位作者进行了简短交谈外，我与该项目没有任何关系。）

# java - 简化正则表达式

> ID：14669084
> 
> 赞同：3
> 
> 时间：2013-02-03T03:04:26.670
> 
> 标签：java, regex

我有一个非常简单的问题（双关语）。

这个正则表达式最简单的形式是什么？

```
(((0|1)*(00)(0|1)*)((0|1)*(11)(0|1)*))|(((0|1)*(11)(0|1)*)((0|1)*(00)(0|1)*)) 
```

我正在创建一个正则表达式，它接受包含子字符串 00 和 11 （以任何顺序）的所有二进制字符串的语言。

我现在的表达方式有效，但我确信它可以简化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T03:07:41.610

这几乎是相同的正则表达式。我只转换了`(0|1)`into ，在两种情况下共享的左右`[01]`添加了 a （首先是 11 或首先是 00），并删除了一些不必要的括号：`[01]*`

```
[01]*(00[01]*11|11[01]*00)[01]* 
```

* * *

## 重现步骤

1.  与

    `(((0|1)*(00)(0|1)*)((0|1)*(11)(0|1)*))|(((0|1)*(11)(0|1)*)((0|1)*(00)(0|1)*))`
    `__^^^^^_____^^^^^___^^^^^_____^^^^^______^^^^^_____^^^^^___^^^^^_____^^^^^___`

2.  全部替换`(0|1)`为`[01]`

    `(([01]*(00)[01]*)([01]*(11)[01]*))|(([01]*(11)[01]*)([01]*(00)[01]*))` `_______^^^^____________^^^^_______________^^^^____________^^^^_______`

3.  删除 and 周围的括号`(00)`，`(11)`因为您不想捕获该组，并且括号后面没有`*`, 。因此，由于模棱两可，它不是必需的。`+``?`

    `(([01]*00[01]*)([01]*11[01]*))|(([01]*11[01]*)([01]*00[01]*))`
    `_^____________^^____________^___^____________^^____________^_`

4.  删除更多不能解决任何歧义的括号：

    `([01]*00[01]*[01]*11[01]*)|([01]*11[01]*[01]*00[01]*)`
    `________^^^^^^^^^^_________________^^^^^^^^^^________`

5.  Collapse `[01]*[01]*`into `[01]*`which 意思完全一样。

    `([01]*00[01]*11[01]*)|([01]*11[01]*00[01]*)`
    `_^^^^^_________^^^^^___^^^^^_________^^^^^_`

6.  提取公共前缀和后缀`[01]*`

    `[01]*(00[01]*11|11[01]*00)[01]*`

# python - defaultdict 的意外行为

> ID：14669086
> 
> 赞同：0
> 
> 时间：2013-02-03T03:05:09.867
> 
> 标签：python, oop, dictionary, python-2.7

我今天遇到了一个奇怪的问题，这是一些示例代码

```
from collections import defaultdict

class Counter:
    hits = 0
    visitors = set()

    def addHit(self, ip):
        self.hits += 1
        self.visitors.add(ip)

d = defaultdict(Counter)
d['a'].addHit('1.1.1')
d['a'].addHit('2.2.2')
d['b'].addHit('3.3.3')

print d['a'].hits, d['a'].visitors
print d['b'].hits, d['b'].visitors 
```

预期结果：

```
2 set(['1.1.1', '2.2.2'])
1 set(['3.3.3']) 
```

实际结果：

```
2 set(['1.1.1', '3.3.3', '2.2.2'])
1 set(['1.1.1', '3.3.3', '2.2.2']) 
```

为什么访问者集在我认为应该是 Counter 类的单独实例之间共享数据。每个输入不应该指向一个特定的实例吗？

使这更难理解的是，命中计数器似乎工作正常并且将事物分开。

谁能帮助我了解这里发生了什么或如何解决它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T03:07:22.827

我怀疑您的访问者集是类变量而不是实例变量。

与 defaultdicts 行为无关。

尝试：

```
class Counter:
    def __init__(self):
        self.hits = 0
        self.visitors = set()

    def addHit(self, ip):
        self.hits += 1
        self.visitors.add(ip) 
```

编辑：与您的问题无关，只是一些如何扩展计数器的想法：

```
#! /usr/bin/python3.2

class Counter:
    def __init__(self):
        self.__hits = 0
        self.__visitors = {}

    def addHit(self, ip):
        self.__hits += 1
        if ip not in self.__visitors:
            self.__visitors [ip] = 0
        self.__visitors [ip] += 1

    @property
    def hits (self):
        return self.__hits

    @property
    def uniqueHits (self):
        return len (self.__visitors)

    @property
    def ips (self):
        return (ip for ip in self.__visitors)

    def __getitem__ (self, ip):
        return 0 if ip not in self.__visitors else self.__visitors [ip]

c = Counter ()

c.addHit ('1.1.1.1')
c.addHit ('1.1.1.1')
c.addHit ('1.1.1.1')
c.addHit ('1.1.1.1')
c.addHit ('1.1.1.2')
c.addHit ('1.1.1.2')
c.addHit ('1.1.1.3')

print (c.hits)
print (c.uniqueHits)
for ip in c.ips:
    print (ip, c [ip] ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T03:07:33.430

这与[Python 对象的多个实例表现得像同一个实例完全相同的问题](https://stackoverflow.com/questions/14667465/multiple-instances-of-a-python-object-are-acting-like-the-same-instance/14667488#14667488)

您正在使用类级别变量。将其更改为

```
class Counter:
    def __init__(self):
        self.hits = 0
        self.visitors = set()

    def addHit(self, ip):
        self.hits += 1
        self.visitors.add(ip) 
```

# javascript - jQuery选择插件

> ID：14669090
> 
> 赞同：1
> 
> 时间：2013-02-03T03:05:56.187
> 
> 标签：javascript, jquery, jquery-chosen

我想了解选择的工作原理。焦点停留在输入框上，但是，keydown/keypress 事件（向下箭头和向上箭头）被委托给选定的框。这怎么可能？任何链接和其他材料来实现这种技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T03:25:01.453

`<ul>`理解 selected 的关键在于，它使用完全独立的 DOM 元素（尤其是with元素）复制选择框，`<li>`然后使用这些元素。

您可以在[此处](https://github.com/harvesthq/chosen/)查看 GitHub 页面。它是用 CoffeeScript 编写的，然后使用 cakebuild 制作 JavaScript，这会产生一些奇怪的东西，可能会让你有点困惑 :)

# .net - 以编程方式将代码注入函数？

> ID：14669091
> 
> 赞同：0
> 
> 时间：2013-02-03T03:06:06.057
> 
> 标签：.net

假设在 .NET/C# 中，我在命名空间中有一堆静态类。我不想手动更改代码，但我想让它们在输入函数时都调用特定的函数。如果我可以传入类/函数名称但不是必需的，那就太好了。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T03:09:43.423

You are looking for something called `Aspect Oriented Programming` or `AOP`.

Try the [PostSharp](http://www.sharpcrafters.com) library

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T07:25:13.933

如果您想在不修改源代码的情况下执行此操作，您将考虑直接修改 IL。事实上，“PostSharp”本身确实重写了您的程序集 IL，许多面向方面的库也是如此。

从理论上讲，您可以自己重写您的 IL，（并且像[Cecil](http://www.mono-project.com/Cecil)这样的项目可能会有所帮助）而不修改源代码 - 但是，我怀疑这是否值得。

# apache - cgi bash脚本不等待命令的所有输出

> ID：14669097
> 
> 赞同：0
> 
> 时间：2013-02-03T03:07:13.623
> 
> 标签：apache, bash, cgi

我有一个 cgi 脚本正在运行，但我遇到了 cgi 脚本没有等待所有命令输出的问题。

这是cgi脚本：

```
#!/bin/bash
echo Content-type: text/plain
echo ""

case "$QUERY_STRING" in
  start)
    service servicename start
    ;;
  stop)
    service servicename stop
    ;;
  restart)
    service servicename restart
    ;;
  backup)
    service servicename backup
    ;;
  checkisup)
    service servicenamet checkisup
    ;;
  status)
    service servicename status
    ;;
  *)
  echo "Usage: $0 {checkisup|start|stop|restart|backup|status|restart}"
  exit 1
  ;;
esac

exit 0 
```

当我用`script.cgi?status`

它从我的服务中执行状态功能

```
 if pgrep -u $USERNAME -f $SERVICE > /dev/null
  then
    pre_log_len=`wc -l "$PATH/server.log" | awk '{print $1}'`
    echo "$SERVICE is running... executing command"
    as_user "screen -p 0 -S screenname -X eval 'stuff \"$command\"\015'"
    sleep .1
    tail -n $[`wc -l "$PATH/server.log" | awk '{print $1}'`-$pre_log_len] "$PATH/server.log"
  fi 
```

我遇到的问题是当函数到达`sleep .1`cgi 脚本时将继续执行而不等待 tall 的输出。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:43:46.203

您可能看不到任何输出，`tail`因为您对`-n`参数的算术结果可能为 0：

```
anew@Wintermute:work$ wc -l dev-configuration.json 
     105 dev-configuration.json
anew@Wintermute:work$ tail -n 0 dev-configuration.json 
anew@Wintermute:work$ 
```

# javascript - Javascript 对象：如何创建工作对象的包容性封装？

> ID：14669102
> 
> 赞同：0
> 
> 时间：2013-02-03T03:07:34.420
> 
> 标签：javascript, object, constructor, encapsulation

我想使用面向对象的 Javascript，但我的“对象”的行为并不像我期望的那样。

这是我的对象：

```
var Test = function(a){
    var variable = a;

    this.getA = function(){
        return this.variable;
    }

    this.setA = function(a){
        this.variable = a;
    }
} 
```

现在我运行这段代码：

```
var a = new Test("foo");
var b = new Test("bar");

alert(a.getA());                //undefined, but "foo" expected
alert(a.getA() == b.getA());    //true, but false expected

alert(a.variable);              //undefined, as expected

a.variable = "whatever";
alert(a.getA());                //"whatever", but undefined expected
alert(a.variable);              //"whatever", but undefined expected

a.setA("somewhere");
alert(a.getA());                //"somewhere", as expected
alert(a.variable);              //"somewhere", but undefined expected 
```

有谁知道如何创建一个功能对象，而无需在开始时调用“setA(a)”，并且对象封装不允许 a.variable =“whatever”；？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T03:11:26.880

如果您要封装 的值`a`，则无需使用`this.variable`来访问该值，只需更改`this.variable`为即可`variable`解决问题。

变量具有函数作用域，因此`var variable`定义了一个变量，该变量不仅在 for 范围内`Test`，而且在 for `setA`and范围内`getA`：

```
var Test = function(a){
    var variable = a;

    this.getA = function(){
        //you want to access the variable,
        //not the property on the instance
        return variable;

    }

    this.setA = function(a){
        variable = a;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T03:48:16.530

JS 中引用的任何`this`内容都将可公开访问。

但是，由于***闭包***的概念，您可以拥有一个完全私有的状态，只需在函数内部声明变量（或函数）。

此外，除非您希望通过编码获得原型，否则您甚至不需要`new`, 那里，也不需要`this`.

一个例子：

```
var makePerson = function (secret) {

    var is_alive = true,

        sayName = function () {
            if (!is_alive) { return; }
            console.log("My name is " + secret.name + ".");
        },

        sayAge = function () {
            if (!is_alive) { return; }
            console.log("My age is " + secret.age + ".");
        },

        haveBirthday = function () {
            if (!is_alive) { return; }
            secret.name += 1;
            console.log("I'm " + secret.name + 
                        ", and today I turned " + secret.age + ".");
        },

        die = function () {
            is_alive = false;
            console.log(secret.name + " died today;" +
                        " they were " + secret.age + " year" +
                        (secret.age > 1 ? "s" : "") + " old."   );
        },

        public_interface = { sayName      : sayName,
                             sayAge       : sayAge,
                             haveBirthday : haveBirthday,
                             die          : die           };

    return public_interface;
};

var bob = makePerson({ name : "Bob", age : 32 }); 
```

没有人可以触摸`secret.name`，`secret.age`也不`is_alive`能从外面触摸。

```
bob.name; // undefined
bob.is_alive = false;  // Doesn't matter -- the code isn't relying on a public property.

bob.sayAge();       // "My age is 32"
bob.haveBirthday(); // "I'm Bob, and today I turned 33"
bob.die();          // "Bob died today; they were 33 years old" 
```

更好的是，JS 允许您随时更改分配，因此您可能会担心这样的事情：

```
// person overwriting the function
bob.haveBirthday = function () { is_alive = false; }; 
```

...但是绝对没有理由害怕有人这样做，因为他们无法访问这些内部属性。

```
bob.haveBirthday(); // window.is_alive = false;
bob.sayAge(); "My age is 33"; 
```

同样，如果您尝试重写函数以窃取值：

```
bob.sayName = function () { return secret.name; };
bob.sayName(); // window.secret.name;  OR  ERROR: can't call `name` of `undefined` 
```

任何未在函数内部定义***的***函数都***无法***访问内部属性或方法。

您可以以完全相同的方式拥有私有方法——事实上，所有这些函数都是私有的，直到我将它们全部附加到`public_interface`对象（这是我返回的）。

如果您开始使用`prototype`.

```
var Thing = function (secret) {};
Thing.prototype.sayName = function () { console.log("My name is " + secret.name); };
var thing = new Thing({ name : "Bob", age : 32 });

thing.sayName(); // "My name is undefined" 
```

甚至原型函数都无法访问私有状态——它们必须使用公共状态（通过`this`）。

您可以使用更复杂的结构，使多个闭包具有`public`, `private`,`private static`和`public static`（这`prototype`是最相似的）属性，但这更高级一些，并且在开始时更令人困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T04:30:33.857

只是为了好玩（或出于演示目的），同时我找到了另一个解决方案：

```
var Test = function(x){
    var variables = function(){}
    variables.variable = x; 

    this.getA = function(){
        return variables.variable;
    }

    this.setA = function(x){
        variables.variable = x;
    }
} 
```

测试结果：

```
 var a = new Test("foo");
    var b = new Test("baz");

    alert(a.getA());                //"foo" as expected
    alert(a.getA() == b.getA());    //false as expected

    a.variable = "whatever";
    alert(a.getA());                //"foo" as expected
    alert(a.variable);              //"whatever", doesn't seem preventable

    a.setA("somewhere");
    alert(a.getA());                //"somewhere", as expected
    alert(a.variable);              //"whatever", doesn't seem preventable 
```

# java - 从两个不同的类登录 xml 的正确方法是什么？现在我在生成的 xml 中遇到错误

> ID：14669103
> 
> 赞同：1
> 
> 时间：2013-02-03T03:07:38.897
> 
> 标签：java, xml, logging, java.util.logging

默认情况下，代码：

```
class Tester {
  public static void main(String args[]) throws IOException{
    Logger logger = Logger.getLogger(Tester.class.getName());
    FileHandler fHandler = new FileHandler("LOGGED.xml",true);
    logger.addHandler(fHandler);
    logger.log(Level.INFO,"This is an info log message");
    fHandler.close();
  }
} 
```

产生 a`xml`的类型：

```
<?xml version="1.0" encoding="windows-1252" standalone="no"?>
<!DOCTYPE log SYSTEM "logger.dtd">
<log>
  <record>
    <date>2013-02-03T08:16:37</date>
    <millis>1359859597763</millis>
    <sequence>0</sequence>
    <logger>Tester</logger>
    <level>INFO</level>
    <class>Tester</class>
    <method>main</method>
    <thread>1</thread>
    <message>This is an info log message</message>
 </record>
</log> 
```

但是，如果我尝试通过以下代码附加到上面生成的*xml中：*

```
class Tester_1{
public static void main(String args[]) {
    try {
        Logger logger = Logger.getLogger(Tester_1.class.getName());
        FileHandler fHandler = new FileHandler("LOGGED.xml",true);
        logger.addHandler(fHandler);
        logger.log(Level.INFO,"This is a custom message from my own formatter !");
        fHandler.close();
    }catch(Exception exc) {
        exc.printStackTrace();
    }
} 
```

}

它将以下内容附加到先前生成的*xml*中：

```
<?xml version="1.0" encoding="windows-1252" standalone="no"?>
<!DOCTYPE log SYSTEM "logger.dtd">
<log>
 <record>
   <date>2013-02-03T08:16:51</date>
   <millis>1359859611306</millis>
   <sequence>0</sequence>
   <logger>Tester_1</logger>
   <level>INFO</level>
   <class>Tester_1</class>
   <method>main</method>
   <thread>1</thread>
   <message>This is a custom message from my own formatter !</message>
 </record>
</log> 
```

当我尝试在浏览器中打开此*xml时，出现以下错误：*

```
This page contains the following errors:

error on line 27 at column 6: XML declaration allowed only at the start of the document 
```

我该怎么做才能避免这些陈述：

```
<?xml version="1.0" encoding="windows-1252" standalone="no"?>
<!DOCTYPE log SYSTEM "logger.dtd"> 
```

两次？我想要只在*xml*`log`末尾附加标签的 xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:15:37.310

如果您想在日志文件中完全避免 xml 标头，您可以在代码中尝试此操作

```
 FileHandler fHandler = new FileHandler("LOGGED.xml", true);
    fHandler.setFormatter(new XMLFormatter() {
        @Override
        public String getHead(Handler h) {
            return "";
        }
    });
    logger.addHandler(fHandler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T03:55:17.580

修复它的简单方法是将 FileHandler 配置为每次启动应用程序时生成一个新文件名，例如

```
new FileHandler("log%g.xml", 100000000, 10); 
```

详见 API

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T15:36:12.203

提议的补丁列在 RFE [JDK-4629315 中：附加 XML 日志文件不会合并新记录。](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4629315) 您可能能够扩展 XMLFormatter 并覆盖该`getHead`方法以根据目标文件的大小（空或满）有条件地写入默认头值或空字符串。假设您可以计算用于记录的当前文件。

# c# - MVC多选不返回列表

> ID：14669108
> 
> 赞同：0
> 
> 时间：2013-02-03T03:08:30.553
> 
> 标签：c#, javascript, asp.net-mvc, asp.net-mvc-3, c#-4.0

当我在 javascript 中调试时，我看到 $("#widgetIds").val() 的值是一个 int 值数组，例如 [1,2,3,4]。当它到达控制器时，widgetIds 列表为空。我努力了：

*   在 javascript 中使用 .serialize() 和 .serializeArray()
*   将 widgetIds 类型更改为`<string>`控制器上的 List
*   在控制器上将 widgetIds 类型更改为 int[]
*   在控制器上将 widgetIds 类型更改为 string[]
*   几个小时的小调整没有奏效或让事情变得更糟
*   谷歌
*   对着我的显示器大喊大叫
*   把我的拳头砸在我的桌子上
*   啤酒

注意：我正在使用这个[多选](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)控件。optgroups 的原因是为了在多选中分离。

JavaScript

```
function ProcessButtonClick(){
$.post(processWidgetsUrl, { widgetIds: $("#widgetIds").val() });
} 
```

看法

```
<select id="widgetIds" name="widgetIds" multiple="multiple">
    <optgroup label="Big Widgets">
        @foreach (var widget in Model.Widgets.Where(d => d.WidgetCategoryId == 1))
        {
            <option value="@widget.Id">@widget.DisplayName</option>
        }
     </optgroup>

     <optgroup label="Little Widgets">
         @foreach (var widget in Model.Widgets.Where(d => d.WidgetCategoryId == 3))
         {
             <option value="@widget.Id">@widget.DisplayName</option>
         }
     </optgroup>

     <optgroup label="Red Widgets">
         @foreach (var widget in Model.Widgets.Where(d => d.WidgetCategoryId == 4))
         {
             <option value="@widget.Id">@widget.DisplayName</option>
         }
     </optgroup>

     <optgroup label="Blue Widgets">
         @foreach (var widget in Model.Widgets.Where(d => d.WidgetCategoryId == 5))
         {
             <option value="@widget.Id">@widget.DisplayName</option>
         }
     </optgroup>

     <optgroup label="Round Widgets">
         @foreach (var widget in Model.Widgets.Where(d => d.WidgetCategoryId == 6))
         {
             <option value="@widget.Id">@widget.DisplayName</option>
         }
     </optgroup>

     <optgroup label="Square Widgets">
         @foreach (var widget in Model.Widgets.Where(d => d.WidgetCategoryId == 7))
         {
             <option value="@widget.Id">@widget.DisplayName</option>
         }
     </optgroup>
 </select> 
```

控制器

```
public virtual ActionResult ProcessWidgets(List<int> widgetIds)
{
    return Json(_widgetComponent.DoStuff(widgetIds));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:29:02.573

您需要告诉服务器您正在向它发送 Json，然后 ASP.NET MVC 将知道如何在将数据发送到控制器之前正确解释数据：

```
function ProcessButtonClick(){
  $.post(processWidgetsUrl, { widgetIds: $("#widgetIds").val() }, null, "json");
} 
```

您可能需要将数组转换为正确的 JSON[如何使用 JSON、jQuery 将复杂对象数组发布到 ASP.NET MVC 控制器？](https://stackoverflow.com/questions/320291/how-to-post-an-array-of-complex-objects-with-json-jquery-to-asp-net-mvc-control)

# android - 尝试将 github 项目导入 Android 项目

> ID：14669111
> 
> 赞同：3
> 
> 时间：2013-02-03T03:09:00.577
> 
> 标签：android, eclipse, github

我已经在这里坐了几个小时，试图在我的 Eclipse 中的 Android 项目中使用这个 github 项目。我以前从未从 github 成功导入任何东西。我已经阅读了我能找到的所有内容，并尝试了所有可能的选择，并且完全耗尽了我的耐心。

有人可以逐步列出这个特定项目的过程，以便我最终可以像作者描述的那样在 XML 中使用它：

```
 <com.polites.android.GestureImageView
    android:id="@+id/image"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/image"
    gesture-image:min-scale="0.1"
    gesture-image:max-scale="10.0"
    gesture-image:strict="false"/> 
```

链接是[https://github.com/jasonpolites/gesture-imageview](https://github.com/jasonpolites/gesture-imageview)

我将永远感激不尽。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-11T08:57:57.523

查找以下有关导入项目的说明：

1.  为 Eclipse 安装 Git 插件
2.  右键单击 Projects Explorer 并单击导入，然后选择 'git'->'projects'->'URI'
3.  输入' [https://github.com/jasonpolites/gesture-imageview.git](https://github.com/jasonpolites/gesture-imageview.git) '
4.  输入您的 github 的用户名和密码，然后按“下一步”（未完成）。输入您的 github 详细信息是可选的。您也可以在此处将它们留空。
5.  选择你要下载的分支
6.  在下一个屏幕中输入将导入项目的目录。这将是您的根目录
7.  按完成导入项目。
8.  然后在下一步中单击“使用新项目向导”
9.  选择“从现有代码中的 android 项目”
    1.  在下一个屏幕中，在提到“根目录”选择选项的地方单击“浏览”，选择您导入项目的位置。
    2.  按完成

该项目现在应该作为 android 项目导入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-25T18:27:55.933

您可以通过在 Layout TAG 中添加此行以引用您的包来解决您的问题：

```
xmlns:gesture-image="http://schemas.polites.com/android" 
```

# c++ - 快速解析简单语言的指南

> ID：14669120
> 
> 赞同：0
> 
> 时间：2013-02-03T03:09:35.517
> 
> 标签：c++, parsing, c++11

我发现自己需要解析某种简单的语言。一种比*正则表达式*更具表现力的语言，但它是如此之小，不值得使用像野牛这样强大的东西。

我最终使用单元测试做一个*临时*解析器来保证它的正确性。我创建了一个提取单个标记的函数，另一个函数将继续提取标记并通过几个循环和许多 ifs 来解析语言。但是，这不是解析语言的正确方法，如果有人看到代码，就不会明白它是做什么的。

我一直在寻找一些更好的解决方案来快速解析小语言。一些图书馆，或某种技术来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T03:12:29.543

这是解析语言的完美方式。保持标记化和解析部分分开，可能有一两个枚举来保存不同类型的标记。我不明白为什么这种方法会导致代码不干净，尤其是对于相当简单的语言。

除此之外，野牛应该可以正常工作，并且使用它的智力开销并不大。

# c# - ReadTimeout and writeTimeout Exception thrown when attaching a file to calendar event programatically

> ID：14669124
> 
> 赞同：0
> 
> 时间：2013-02-03T03:09:44.913
> 
> 标签：c#, outlook, mailing

When I am trying to attach file in My Calendar event through C# code for Outlook I am getting this error and mail is getting triggered but without the attachment.

My Code as Bellow

```
private static MailMessage MailMessageComp(DateTime dtStartDateTime, DateTime dtEndDateTime, string sSubject,
        string sSummary, string sLocation, string sOrganizerName, string sOrganizerEmail, MailAddressCollection attendeeList, DataMailItem _mailItem, bool bStatus) {
        MailMessage msg = new MailMessage();

        System.Net.Mime.ContentType textType = new System.Net.Mime.ContentType("text/plain");
        System.Net.Mime.ContentType HTMLType = new System.Net.Mime.ContentType("text/html");
        System.Net.Mime.ContentType calendarType = new System.Net.Mime.ContentType("text/calendar");

        calendarType.Parameters.Add("method", ((bStatus) ? "CANCEL" : "REQUEST")); // "REQUEST");
        calendarType.Parameters.Add("name", "meeting.ics");

        AlternateView textView = AlternateView.CreateAlternateViewFromString(_mailItem.Body, textType);
        msg.AlternateViews.Add(textView);

        AlternateView HTMLView = AlternateView.CreateAlternateViewFromString(_mailItem.Body, HTMLType);
        string attachmentName = "myPdf.pdf";
        msg.AlternateViews.Add(HTMLView);
        //create the Body in VCALENDAR format
        string calDateFormat = "yyyyMMddTHHmmssZ";
        string bodyCalendar = "BEGIN:VCALENDAR\r\n" + "METHOD:" + ((bStatus) ? "CANCEL" : "REQUEST") + "\r\n" + "PRODID:Microsoft CDO for Microsoft Exchange\r\n" + "VERSION:2.0\r\n" 
            + "BEGIN:VTIMEZONE\r\n" + "TZID:(GMT-06.00) Central Time (US & Canada)\r\n" + "X-MICROSOFT-CDO-TZID:11\r\n" + "BEGIN:STANDARD\r\n" + "DTSTART:16010101T020000\r\n"
            + "TZOFFSETFROM:-0500\r\n" + "TZOFFSETTO:-0600\r\n" + "RRULE:FREQ=YEARLY;WKST=MO;INTERVAL=1;BYMONTH=11;BYDAY=1SU\r\n" + "END:STANDARD\r\n" + "BEGIN:DAYLIGHT\r\n" 
            + "DTSTART:16010101T020000\r\n" + "TZOFFSETFROM:-0600\r\n" + "TZOFFSETTO:-0500\r\n" + "RRULE:FREQ=YEARLY;WKST=MO;INTERVAL=1;BYMONTH=3;BYDAY=2SU\r\n" 
            + "END:DAYLIGHT\r\n" + "END:VTIMEZONE\r\n" + "BEGIN:VEVENT\r\nDTSTAMP:{8}\r\n"
            + "ATTACH;ENCODING=BASE64;VALUE=BINARY;X-FILENAME=" + "TestFile.pdf" + ":{10}\r\n"
            + "DTSTART:{0}\r\n" + "SUMMARY:{7}\r\nUID:{5}\r\n" +
            "{9}\":MAILTO:{9}\r\nACTION;RSVP=TRUE;CN=\"{4}\":MAILTO:{4}\r\nORGANIZER;CN=\"{3}\":mailto:{4}\r\nLOCATION:{2}\r\nDTEND:{1}\r\nDESCRIPTION:{7}\\N\r\nSEQUENCE:1\r\nPRIORITY:5\r\nCLASS:\r\nCREATED:{8}\r\nLAST-MODIFIED:{8}\r\nSTATUS:CONFIRMED\r\nTRANSP:OPAQUE\r\nX-MICROSOFT-CDO-BUSYSTATUS:BUSY\r\nX-MICROSOFT-CDO-INSTTYPE:0\r\nX-MICROSOFT-CDO-INTENDEDSTATUS:BUSY\r\nX-MICROSOFT-CDO-ALLDAYEVENT:FALSE\r\nX-MICROSOFT-CDO-IMPORTANCE:1\r\nX-MICROSOFT-CDO-OWNERAPPTID:-1\r\nX-MICROSOFT-CDO-ATTENDEE-CRITICAL-CHANGE:{8}\r\nX-MICROSOFT-CDO-OWNER-CRITICAL-CHANGE:{8}\r\nBEGIN:VALARM\r\nACTION:DISPLAY\r\nDESCRIPTION:REMINDER\r\nTRIGGER;RELATED=START:-PT00H15M00S\r\nEND:VALARM\r\nEND:VEVENT\r\nEND:VCALENDAR\r\n";

        bodyCalendar = string.Format(bodyCalendar,
            dtStartDateTime.ToUniversalTime().ToString(calDateFormat),
            dtEndDateTime.ToUniversalTime().ToString(calDateFormat),
            sLocation,
            sOrganizerName,
            sOrganizerEmail,
            Guid.NewGuid().ToString("B"),
            sSummary,
            ((bStatus) ? "Cancelled " : "")+ sSubject,
            DateTime.Now.ToUniversalTime().ToString(calDateFormat), BuildAttendees(attendeeList, ((bStatus) ? "CANCEL" : "NEEDS-ACTION"))
            , GetRDocPDFAttachment(_mailItem.ProjectRefNo.ToString(), _mailItem.ResponseId.ToString()));
        //attendeeList.ToString());
        AlternateView calendarView = AlternateView.CreateAlternateViewFromString(bodyCalendar, calendarType);
        //calendarView.TransferEncoding = TransferEncoding.Base64;
        msg.AlternateViews.Add(calendarView);

        //  Adress the message
        msg.From = new MailAddress(sOrganizerEmail, sOrganizerName);
        foreach(MailAddress attendee in attendeeList) {
            msg.To.Add(attendee);
        }
        msg.Bcc.Add(new MailAddress(_mailItem.From.EmailAddress, _mailItem.From.Name));
        msg.Subject = sSubject + ((bStatus) ? " - Cancelled" : "");
        return msg;
    } 
```

This MailMessage is getting composed and then I am mailing it.

Everything is fine except the attachment to calendar event.

Please help.

Thanking you in advance. Umakanta(Babu).

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-03T07:23:50.950

在此代码中，您实际上并未附加文件，而是使用文本、HTML 和日历替代视图创建消息。但是，您不会在任何地方将文件附加到 MailMessage。

您已经声明了一个包含附件名称的字符串：

```
string attachmentName = "myPdf.pdf"; 
```

但是，永远不会再次引用此附件名称。如果您打算将此添加到消息中，则必须这样做：

```
msg.Attachments.Add(...) 
```

您可以查看[如何使用 System.Net.Mail 向电子邮件添加附件？](https://stackoverflow.com/questions/527214/how-do-i-add-an-attachment-to-an-email-using-system-net-mail)有关如何实际添加附件的更多详细信息。

我希望我已经正确理解了这个问题，我希望这会有所帮助。

# iphone - Link two events to the same UIButton

> ID：14669127
> 
> 赞同：0
> 
> 时间：2013-02-03T03:10:01.137
> 
> 标签：iphone, ios, xcode, uievent

I have created a UIButton programmatically in my iphone application using this code :

```
UIButton *button = [UIButton          buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self 
       action:@selector(aMethod:)
 forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Show View"  forState:UIControlStateNormal];
button.frame = CGRectMake(80.0, 210.0,  160.0, 40.0);
[view addSubview:button]; 
```

Now what I want to do is: when I touch down this button (first action) to show a hidden label and when I release it, it takes me to another view (second action). Does any one can help me to approach that. Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T03:20:53.487

尝试这个

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self action:@selector(buttonTouchDown:) forControlEvents:UIControlEventTouchDown];
[button addTarget:self action:@selector(buttonTouchUp:) forControlEvents:UIControlEventTouchUpInside];
[button addTarget:self action:@selector(buttonTouchUpOutside:) forControlEvents:UIControlEventTouchUpOutside];

- (void) buttonTouchDown:(id) sender
{
    //show hidden label
}

- (void) buttonTouchUp:(id) sender
{
    //hide hidden label
    //goto second view
}
- (void) buttonTouchUpOutside:(id) sender
{
    //hide hidden label
} 
```

# javascript - jQuery - 我可以测试一个项目是隐藏还是显示？

> ID：14669128
> 
> 赞同：2
> 
> 时间：2013-02-03T03:10:02.547
> 
> 标签：javascript, jquery, html, hidden, visible

好的，我知道堆栈溢出还有其他类似的问题，但这不一样。

我有这个用 jQuery 制作的东西，它基本上是一个四处走动的火柴人。到目前为止，火柴人有两种状态。坐着，站着。我想知道如何检查站立图片是可见还是隐藏，因此我可以在站立图片隐藏时禁用移动。这是事情，所以你知道我在说什么：http:
[//jsbin.com/okazof](http://jsbin.com/okazof)
这是代码源：http:
[//jsbin.com/okazof/1/edit](http://jsbin.com/okazof/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:14:14.653

```
if($('#sitting').is(':visible')) {
  console.log('sitting is visible');
} 
```

> **编辑**：[工作代码](http://jsbin.com/okazof/2/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T03:12:37.233

我会将您的 HTML 更改为 div 并使用 CSS 类。

通过向元素添加一个坐席类，您可以更好地控制 JavaScript 和 CSS。例如;

CSS

`.sitting { background-image: url( ... ); }`

JS

`$( '#sitting' ).hasClass( 'sitting' );`

# javascript - Jquery .fadeToggle() 在一个页面上工作，在另一个页面上不起作用（相同的代码）

> ID：14669134
> 
> 赞同：1
> 
> 时间：2013-02-03T03:11:09.793
> 
> 标签：javascript, jquery, wordpress, firebug

使用 Jquery (1.7.1) 我正在尝试在 .hover() 上制作图像 .fadeToggle

图片在页面顶部，上面写着“Concurso de Desfraces ....”

该代码适用于此页面：[https ://tienda.lirainwonderland.es](https://tienda.lirainwonderland.es)

**为什么它在此页面上不起作用？**: [http://lirainwonderland.es](http://lirainwonderland.es)

我可以在 .hover() 上发出警报，所以我确定问题出在 .fadeToggle()

我尝试使用 firebug 来查找此问题的根源，当我在线中断脚本时，脚本面板的堆栈选项卡上似乎确实存在差异，但不知道为什么......

这是javascript：

```
$(document).ready(function () {
 $("#concurso").hover(function () { 
   $('#concurso2').fadeToggle("slow", "linear");            
});
}); 
```

这是CSS：

```
#concurso {
 position: relative;
}

#concurso2 {
    display: none;
    position: absolute;
    top: -240px;
    left: 0;
} 
```

这是HTML：

```
<a id="concurso" href="">
  <img id="concurso1" src="/images/consurso_de_disfraces_carnival_2013_rojo_inico.png" alt="Concurso de Disfraces Lira in Wonderland 2013" />
  <img id="concurso2" src="/images/consurso_de_disfraces_carnival_2013_rosa_inico.png" alt="Concurso de Disfraces Lira in Wonderland 2013" />
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:14:40.050

当你只运行代码时，你会看到一个错误

```
$('#concurso2').fadeToggle("slow", "linear"); 
```

尝试在[http://lirainwonderland.es/上运行它](http://lirainwonderland.es/)

这意味着您的 2 页上有不同的版本

```
jQuery.fn.jquery; // checks jQuery version 
```

但这不是问题所在，您的 $() 似乎不是 jQuery，也许您还有其他脚本，例如 mootools、prototype 等

而不是 $，你可以使用**jQuery**，当我尝试它时它就起作用了。

```
jQuery('#concurso2').fadeToggle("slow", "linear"); 
```

# php - exif_imagetype() [function.exif-imagetype]: Filename cannot be empty

> ID：14669141
> 
> 赞同：1
> 
> 时间：2013-02-03T03:12:12.067
> 
> 标签：php

I have a website where i have given my users an option to upload their picture and i have set a condition like if they didnt select any file for uploading and if they click the upload button without choosing a picture they get an alert box, but apart from that my website is showing the error that i am pasting below.

> Warning: exif_imagetype() [function.exif-imagetype]: Filename cannot be empty in /mounted-storage/home98a/sub009/sc61374-HGPS/sitakalyanam.com/newsita/php4upload.class.php on line 86

well line 86 piece of code i am attaching..

```
 function _doSafeUpload ()
{
    preg_match('/\.([a-zA-Z]+?)$/', $this->_params['name'], $matches);
    if (exif_imagetype($this->_params['tmp_name']) &&       in_array(strtolower($matches[1]), $this->_types))
    {
        if ($this->_params['size'] > $this->_maxsize)
            $this->_errors[] = $this->_lang['E_SIZE'];
        else
            $this->_im_status = true;

        if ($this->_im_status == true)
        {
            $ext = substr($this->_params['name'], -4);
            $this->new_name = md5(time()).$ext;

            move_uploaded_file($this->_params['tmp_name'], $this-        >_upload_dir.$this->new_name);

        $this->imgurl =$this->new_name;

        //$this->imgurl = .$this->new_name;

        }
    }
    else
        $this->_errors[] = $this->_lang['E_TYPE'];
} 
```

i dont want to show the error getting displayed in my webpage for my user. instead i want to show them or intimate them that they have not selected any file for uploading.

here i am uploading the complete code.but no errors if uploading files are selected error comes only if no file is choosen for uploading

```
 <?php
   /*

  - PHP4 Image upload script

  */

   class imageupload
  {
  //pblic variables
    var $path = '';
    var $errorStr = '';
    var $imgurl = '';

    //private variables
    var $_errors = array();
    var $_params = array();
    var $_lang = array();
    var $_maxsize = 1048576;

    var $_im_status = false;

    //public methods
    function imageupload ()
 {
    //require 'photouploadconfig.php';

    if($_GET['Choice']=="1")
    {           
   require 'Photouploddir1.php';
   }
   elseif ($_GET['Choice']=="2")
   {
   require 'Photouploddir2.php';
   }
   elseif ($_GET['Choice']=="3") 
   {
   require 'Photouploddir3.php';
   }
   elseif ($_GET['horoschoice']=="1")
  {
  require 'horosuploaddir.php';
  }
  elseif ($_GET['videoChoice']=="5")
  {
  require 'videouploaddir.php';
  }

        $this->_types = $types;
        $this->_lang = $lang;
    $this->_upload_dir = $upload_dir;
    $this->_maxsize = $maxsize;

        $this->path = $PHP_SELF;

        if (is_array($_FILES['__upload']))
        {
            $this->_params = $_FILES['__upload'];
            if (function_exists('exif_imagetype'))
                $this->_doSafeUpload();
        else
                $this->_doUpload();

            if (count($this->_errors) > 0)
                $this->_errorMsg();
        }
     }

    function allowTypes ()
    {
        $str = '';
        if (count($this->_types) > 0) {
            $str = 'Allowed types: (';
            $str .= implode(', ', $this->_types);
            $str .= ')';
        }

        return $str;
    }  

       // private methods
    function _doSafeUpload ()
    {
        preg_match('/\.([a-zA-Z]+?)$/', $this->_params['name'], $matches);
        if (exif_imagetype($this->_params['tmp_name']) == exif_imagetype($this-           >_params['']))
        { 
          print '<script type="text/javascript">'; 
              print 'alert("Opps! You Have Not Choosen Any Photos For Uploading.Kindly          Select Choose File Tab For Uploading.")'; 
               print '</script>'; 
               print "<script>";
               print " self.location='photoupload.php';";
               print "no photo uploaded";
                  print "</script>";
        }  
        if (exif_imagetype($this->_params['tmp_name']) && in_   a      rray(strtolower($matches[1]), $this->_types))
        {
            if ($this->_params['size'] > $this->_maxsize)
            $this->_errors[] = $this->_lang['E_SIZE'];
        else
            $this->_im_status = true;

        if ($this->_im_status == true)
        {
            $ext = substr($this->_params['name'], -4);
            $this->new_name = md5(time()).$ext;

                move_uploaded_file($this->_params['tmp_name'], $this->_u        pload_dir.$this->new_name);

            $this->imgurl =$this->new_name;

        //$this->imgurl = .$this->new_name;

        }
            }
       else
        $this->_errors[] = $this->_lang['E_TYPE'];
                } 

        function _doUpload ()
       {
    preg_match('/\.([a-zA-Z]+?)$/', $this->_params['name'], $matches);
    if(in_array(strtolower($matches[1]), $this->_types))
    {
            if ($this->_params['size'] > $this->_maxsize)
            $this->_errors[] = $this->_lang['E_SIZE'];
        else
            $this->_im_status = true;

        if ($this->_im_status == true)
        {
            $ext = substr($this->_params['name'], -3);
                $this->new_name = md5(time()).$ext;

                move_uploaded_file($this->_params['tmp_name'], $this->_u          pload_dir.$this->new_name);

                $this->imgurl = ''.$this->new_name;

    //$this->imgurl = ''.$this->_upload_dir.''.$this->new_name;
    //$this->imgurl = ''.$this->new_name;

                //$this->imgurl = $this->_upload_dir.'/'.$this->new_name;

            }
        }
    else
        $this->_errors[] = $this->_lang['E_TYPE'];
        }   

           function _errorMsg()
           { 
         $this->errorStr = implode('<br />', $this->_errors);
           }
           }

           ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T03:33:24.207

这：`$this->_params['tmp_name']`显然不包含文件路径。通常你会从那里得到这些数据，`$_FILES['name']['tmp_name']`但是你有某种抽象，这使得很难看出问题可能出在哪里。

# meteor - 从流星中的css文件加载背景图像

> ID：14669143
> 
> 赞同：16
> 
> 时间：2013-02-03T03:12:20.977
> 
> 标签：meteor

我第一次构建流星应用程序并遇到了一些问题。特别是，我试图让图片查看器工作，但导航按钮中的左右箭头似乎不见了。当我尝试使用谷歌的开发人员工具加载应该在按钮中的图像时，它被显示为一个空图像。因此，可能是我没有将图像文件放在适当的目录中，因此流星无法将其加载到 css 文件中。我不确定是这种情况还是其他原因。这可能不是任何语法错误，因为当我在流星之外运行插件时，我能够看到按钮中的箭头。

这是我的css文件中的行：

```
background: transparent url('themes.gif') no-repeat left top;  margin-top: -45px; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-04T20:40:48.610

所以我设法让它工作。我在 public 文件夹中创建了一个资源目录，并将 css 文件中的 url 更改为`url("/resources/button")`，这似乎可以解决问题。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-03T04:52:40.950

您可以保留 CSS 原样，并将 theme.gif 文件放在`/public`Meteor 应用程序的目录中——然后它应该可以访问。

根据[文档](http://docs.meteor.com/#structuringyourapp)：

> 最后，Meteor 服务器将提供公共目录下的任何文件，就像在 Rails 或 Django 项目中一样。这是图片、favicon.ico、robots.txt 和其他任何东西的地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-27T15:43:23.430

您必须`/`在文件名前面加上前缀 a。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-12T09:06:12.720

[我的网站架构](https://i.stack.imgur.com/8OoyY.png)

```
body{   
  background-image: url('image/back1.jpg');
  background-repeat: no-repeat;
  background-attachment: fixed;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-12T06:56:51.840

文件需要放入 /public 目录并从 css 中删除路径中的“/public”。

例如：如果路径中的图像 -`/public/img/logo.png`

然后使用下面的 CSS ：

```
background-image('img/logo.png'); 
```

# qt - 为什么我的 fread 在读取某些文件时停止？

> ID：14669146
> 
> 赞同：0
> 
> 时间：2013-02-03T03:12:36.903
> 
> 标签：qt, fread

```
//#include <QtCore/QCoreApplication>
#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <string>
#include "shift.h"

using namespace::std;

int main(int argc, char *argv[])
{
    unsigned char tmpBuf;
    FILE* fp;
    FILE* fp2;
    char fname[50];
    static unsigned int lSize, count, num;

    cout << "Input the filename:" << endl;
    cin >> fname;

    fp = fopen(fname,"r");
    if(fp == NULL) {
        cout << "The file does not exist!" << endl;
        exit(1);
    }

    // obtain file size:
    fseek(fp , 0 , SEEK_END);
    lSize = ftell(fp);
    rewind(fp);
    cout << "The intput file's size is: " << lSize << endl;

    fp2 = fopen("myfile", "w");

    while(1){
        num = fread(&tmpBuf, 1, 1, fp);
        count += num;
//        putchar(tmpBuf);
//        tmpBuf = cror(tmpBuf, 4);
//        tmpBuf = crol(tmpBuf, 4);
        fwrite(&tmpBuf, 1, num, fp2);

        cout << tmpBuf << " " << num << " " << count << endl;
        if (count == lSize){
            printf("over\n");
            break;
        }
    }

    fclose(fp);
    fclose(fp2);

    while(1){}

    return 0;

    //return a.exec();
} 
```

我制作了一个 Qt 控制台程序并禁用了 QtCore，就像上面的代码一样。当读取某个文件时，例如 1.txt（仅包含 1234567890），它会成功。但是当读取其他文件时，例如 1.rar，它会失败，如下所示： 为什么？ ![在此处输入图像描述](../Images/f91ad3531381fff086d78fad2425eff5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:25:29.860

检查返回的 num 的值

```
num = fread(&tmpBuf, 1, 1, fp); 
```

如果它返回为 0，那就可以解释为什么

```
if (count == lSize){ 
```

永远不会像真的那样让你摆脱困境。

至于为什么会发生这种情况，您正在以“r”模式打开 fname，但 rar 文件将是二进制文件。为此，我建议以“rb”模式打开。如果 fread 需要 txt 格式但达到 EOF 指示器，它将停止前进，因此 num = 0 并且 count 不会增加。

我没有可用的窗口来测试这个，但由于这个原因，stackoverflow 上出现了其他问题：

[fread/ftell 在 Windows 下明显坏了，在 Linux 下工作正常](https://stackoverflow.com/questions/3187693/fread-ftell-apparently-broken-under-windows-works-fine-under-linux)

# javascript - Photoswipe Thumbnail Image Size Issues - Trying to Resize Thumbnails for Uniform Look

> ID：14669155
> 
> 赞同：2
> 
> 时间：2013-02-03T03:14:09.907
> 
> 标签：javascript, html, css, photoswipe

I'm having an image sizing issue with Photoswipe. Basically, this is how my photo gallery looks like now: [http://img4.imageshack.us/img4/8431/problemeq.png](http://img4.imageshack.us/img4/8431/problemeq.png)

There are gaps in between my photos that I have inserted. I'm basically not using thumbnails, but instead passing in original photos. But I tried resizing the photos to about a thumbnail size, and yet, all it does is keep the same dimensions and reduce the quality of the photos being displayed.

And I want it to look like this without squishing the photos: [http://img651.imageshack.us/img651/9199/exampleiq.png](http://img651.imageshack.us/img651/9199/exampleiq.png)

I've styled the height to be fixed at 200px rather than 'auto,' so it really stretches the photos when changing window resolutions.

What am I missing? I don't think this is a Photoswipe problem; most likely CSS, but I don't know what to change. Any help would be greatly appreciated. Thanks!

P.S. Sorry for the links, but I can't post images yet.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-20T08:22:31.263

这似乎是一个被遗弃的问题，但它让我得到了答案。此外，没有看到 OP 代码有点棘手，但假设它是相当完好的照片滑动，这是我的答案......

简而言之，用这些替换库存`div.gallery-item`、`div.gallery-item a`和`div.gallery-item img`，并添加一些`img`调整。

```
div.gallery-item {
     float:left;
     width: 33.3333333%;
     padding-bottom: 33.3333333%;
     position: relative;
}

div.gallery-item a {
    position:absolute;
    width:100%;
    height:100%;
    background:#fff;
    text-align:center;
    border:1px solid #3c3c3c;
}
div.gallery-item img {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
}

img{
    max-height:100%;
    max-width:100%;
} 
```

[这是一个小提琴](http://jsfiddle.net/3xma7/2/)（不是用照片滑动，而是它的主要要点）

# wpf - The memory usage shown in memory profiler is different from Process Explorer

> ID：14669157
> 
> 赞同：1
> 
> 时间：2013-02-03T03:14:26.493
> 
> 标签：wpf, memory, memory-leaks

I'm learning to use [.Net Memory Profiler](http://memprofiler.com/) and testing the memory usage of [Microsoft's DataBindingLab sample project](http://archive.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=wpfsamples&DownloadId=7747).

.Net Memory Profiler shows total live bytes are 2011015, ie. 2MB. ![.Net Memory Profiler](../Images/40ba21d133adf21fc2fc13d14bfdfb93.png)

Process Explorer shows Private Bytes are 56MB. ![Process Explorer](../Images/192ddf236050996ab77291e7ff8fff57.png)

Obviously, there is such a big difference between the value given by the two tools. Where does the remaining 54MB come from?

# ruby-on-rails - OpenShift: rhc setup error

> ID：14669162
> 
> 赞同：1
> 
> 时间：2013-02-03T03:15:09.403
> 
> 标签：ruby-on-rails, linux, gem, openshift, openshift-client-tools

I am setting up my openshift connection for the first time following [this](https://openshift.redhat.com/community/get-started#cli) guide but `rhc setup` throws the following error:

```
/usr/local/lib/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find rhc (>= 0) amongst [ZenTest-4.8.2, actionmailer-3.2.8, actionpack-3.2.8, activemodel-3.2.8, activerecord-3.2.8, activeresource-3.2.8, activesupport-3.2.8, addressable-2.3.2, annotate-2.5.0, arel-3.0.2, autotest-4.4.6, autotest-notification-2.3.4, autotest-rails-pure-4.1.2, autotest-standalone-4.5.9, bcrypt-ruby-3.0.1, bootstrap-sass-2.0.4.0, builder-3.0.4, builder-3.0.3, builder-3.0.0, bundler-1.1.5, capybara-1.1.2, childprocess-0.3.5, coffee-rails-3.2.2, coffee-script-2.2.0, coffee-script-source-1.4.0, coffee-script-source-1.3.3, daemons-1.1.9, diff-lcs-1.1.3, erubis-2.7.0, eventmachine-0.12.10, excon-0.16.2, execjs-1.4.0, factory_girl-4.1.0, factory_girl_rails-4.1.0, ffi-1.1.5, guard-1.4.0, guard-rspec-1.2.1, guard-spork-1.2.0, heroku-2.30.5, heroku-api-0.3.4, hike-1.2.1, i18n-0.6.1, i18n-0.6.0, journey-1.0.4, jquery-rails-2.2.0, jquery-rails-2.1.3, jquery-rails-2.1.1, jquery-rails-2.0.2, json-1.7.6, json-1.7.5, launchy-2.1.2, libnotify-0.5.9, libwebsocket-0.1.5, listen-0.5.2, mail-2.4.4, mime-types-1.19, multi_json-1.5.0, multi_json-1.3.6, mysql2-0.3.11, netrc-0.7.7, nokogiri-1.5.5, polyglot-0.3.3, rack-1.4.4, rack-1.4.1, rack-cache-1.2, rack-ssl-1.3.2, rack-test-0.6.2, rack-test-0.6.1, rails-3.2.8, railties-3.2.8, rake-10.0.3, rake-0.9.2.2, rb-inotify-0.8.8, rdoc-3.12, rest-client-1.6.7, rspec-2.11.0, rspec-core-2.11.1, rspec-expectations-2.11.3, rspec-expectations-2.11.2, rspec-mocks-2.11.3, rspec-mocks-2.11.2, rspec-rails-2.11.0, rubygems-bundler-1.0.7, rubyzip-0.9.9, rvm-1.11.3.5, sass-3.2.5, sass-3.2.1, sass-rails-3.2.6, sass-rails-3.2.5, selenium-webdriver-2.25.0, spork-0.9.2, sprockets-2.1.3, sqlite3-1.3.6, sqlite3-1.3.5, sqlite3-ruby-1.3.3, sys-proctable-0.9.1-universal-linux, thor-0.17.0, thor-0.16.0, tilt-1.3.3, treetop-1.4.12, treetop-1.4.10, tzinfo-0.3.35, tzinfo-0.3.33, uglifier-1.3.0, uglifier-1.2.7, uglifier-1.2.3, webrat-0.7.3, xpath-0.1.4] (Gem::LoadError)
    from /usr/local/lib/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
    from /usr/local/lib/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
    from /usr/bin/rhc:22:in `<main>' 
```

Am I missing something? Linux mint 12

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-05T20:47:52.997

有同样的问题。通过跑步为我工作

```
sudo rhc setup 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:16:52.753

您是否正确安装了*rhc*（您提到的指南的第二步）？看起来它没有安装，或者你的 ruby​​ 环境设置错误。我会假设*rhc --help*显示相同的错误，对吗？哪个*rhc*是怎么回事？

如果没有有关您的设置的更多信息，很难提供更多帮助。就我个人而言，我喜欢通过[rvm](https://rvm.io/)管理我的 ruby​​ 安装，但这绝对不是必须的。

# java - 如何强制弹出 Android 键盘？

> ID：14669163
> 
> 赞同：1
> 
> 时间：2013-02-03T03:15:13.443
> 
> 标签：java, android, keyboard

> **可能重复：**
> [Android：当焦点位于 EditText 上时自动显示软键盘](https://stackoverflow.com/questions/2403632/android-show-soft-keyboard-automatically-when-focus-is-on-an-edittext)

我正在编写一个应用程序，我需要做的主要事情之一是打开键盘并能够在焦点所在的文本字段上键入。

我试过了：

```
((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE)).toggleSoftInput(InputMethodManager.SHOW_FORCED, InputMethodManager.HIDE_IMPLICIT_ONLY); 
```

这不起作用，任何人都可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:26:22.670

尝试在 AndroidMainifest.xml 中添加以下活动：

```
android:windowSoftInputMode="stateAlwaysVisible" 
```

然后可能看起来像那样

```
<activity
    android:name=".MainActivity"
    android:windowSoftInputMode="stateAlwaysVisible">
</activity> 
```

# c# - LiteralExpression - ArgumentOutOfRangeException

> ID：14669167
> 
> 赞同：5
> 
> 时间：2013-02-03T03:15:31.607
> 
> 标签：c#, literals, roslyn

对于我的一生，我无法弄清楚为什么这行代码：

```
var literalExpressionSyntax = 
     Syntax.LiteralExpression(SyntaxKind.CharacterLiteralExpression); 
```

`ArgumentOutOfRangeException`在 Roslyn CTP3 下抛出一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T03:49:58.227

第二个参数是可选的原因是文本对于*某些* `SyntaxKind`值是隐含的。例如，如果您传递`SyntaxKind.TrueLiteral`第一个参数，那么您可以省略第二个参数。但是，当第二个参数基于第一个参数没有合理的默认值时，我们会抛出`ArgumentOutOfRangeException`.

在您的示例中，您可以使用以下命令创建表达式：

`Syntax.LiteralExpression(SyntaxKind.CharacterLiteralExpression, Syntax.Literal('a'))`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T03:24:30.997

你不应该提供第二个参数，它是实际的文字。

# html - 如何在禁用选项中获取文本以更改 IE9 中的颜色？

> ID：14669170
> 
> 赞同：4
> 
> 时间：2013-02-03T03:16:03.747
> 
> 标签：html, css, internet-explorer-9

在除 IE9 之外的所有主要浏览器中，它会将禁用选项的文本着色为红色此代码：

```
<option disabled='disabled' class='red' value=''>No Students available to take up Assessment</option>

...
//CSS
.red{
color:red;
} 
```

但在 IE 中，它不会改变文本颜色，它保持灰色禁用颜色。如何在 IE9 中更改禁用的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T03:34:58.557

也许在 CSS 中使用属性选择器？

```
option:disabled,
option[disabled] {
    color: red;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-03T03:17:56.553

像这样的东西？

```
select :disabled.red {
    color: red;
} 
```

这是来自 Microsoft的[关于`:disabled`伪类的文档。](http://msdn.microsoft.com/en-us/library/ie/jj127307%28v=vs.85%29.aspx)

这是一个[应该在 IE9 及更高版本中工作的小提琴](http://jsfiddle.net/H5u6n/3/)。

* * *

**更新：**这似乎只适用于 IE>8。[这个答案](https://stackoverflow.com/a/602298/2005939)指出了在表单元素上使用 readonly 属性的解决方法。不过，这不是选项标签的选项。

周围有适用于旧 IE 的 JavaScript 解决方法。一个简单的谷歌搜索把我带到了[这个](http://harrybailey.com/2008/11/disabling-select-options-in-internet-explorer/)提供 jQuery 解决方案的网站。

**从[博客](http://harrybailey.com/2008/11/disabling-select-options-in-internet-explorer/)：**

> 通过添加一点 css 样式魔法，您最终会在所有其他现代浏览器中得到相同的结果。
> 
> 然后，您可以使用 javascript 启用和禁用。许多人编写的代码使选项看起来像被禁用，等待单击选项元素然后模糊它或聚焦下一个/先前选择的选项以使其表现得像被禁用。
> 
> 我想出了与 jQuery 一起使用的函数，通过将其转换为 optgroup 并返回来禁用/启用选择选项。它在 firefox 2 & 3, safari 3, 即 6 + 7 中测试，它在 Opera 9 中工作（虽然 opgroups 跳到底部）

# oracle - Oracle 检查完整性约束

> ID：14669174
> 
> 赞同：1
> 
> 时间：2013-02-03T03:16:24.760
> 
> 标签：oracle, constraints

我正在尝试在 Oracle 中创建一个受多个完整性约束约束的表。该表由一个假设的学生数据库组成。数据库的规则之一是，要被归类为大三学生，他们必须完成 55 到 84 个学分（含）。

我需要创建一个完整性约束来强制执行此规则，但我不完全确定如何去做。我觉得 CHECK 约束在这种情况下会很有用。

到目前为止，我已经...

```
CONSTRAINT IC4 CHECK (hours >=55 AND hours <= 84), 
```

此代码有效，但不能确定学生记录是否为大三学生。

我的餐桌布置是...

```
 CREATE TABLE  Students ( id                INTEGER, 
                             name              CHAR(10)    NOT NULL,  
                             classification    CHAR(10)    NOT NULL, 
                             hours             INTEGER, 
                             gpa               NUMBER(3,2) NOT NULL, 
                             mentor            INTEGER); 
```

因此，如果我们尝试插入...

```
INSERT INTO Students VALUES (50, 'Kim', 'junior', 34, 3.5, 40); 
```

...完整性约束将被违反，因为记录试图存储为“初级”，但学生只完成了 34 小时。

我将如何编写一个强制执行这些规则的约束？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T04:48:26.230

您需要`and`再次使用魔术词：

```
CREATE TABLE students (
....
 , CONSTRAINT IC4 CHECK ( classification = 'junior' AND hours >=55 AND hours <= 84 ) 
```

我怀疑你也会想要其他分类，并验证它们的范围。使用括号和 OR 来执行此操作。（为了清楚起见，使用 BETWEEN 定义范围）....

```
, CONSTRAINT IC4 CHECK ( ( classification = 'junior' AND hours BETWEEN 55 AND 84 ) 
                       OR ( classification = 'sophomore' AND hours BETWEEN 85 AND 124 )  
                       OR ( classification = 'senior' AND hours > 124 )  
                       OR ( classification = 'fresher' )
                       ) 
```

确保你有一套完整的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T07:17:02.157

创建表后：

然后使用下面给出的 alter 语句添加检查约束：

```
ALTER TABLE Students
ADD CONSTRAINT IC4 (classification='junior' AND hours >=55 AND hours <= 84 ); 
```

现在，当您尝试插入以下语句时：

```
INSERT INTO Students VALUES (50, 'Kim', 'junior', 34, 3.5, 40); 
```

它不允许插入上述语句。

# ios - 通过无线在 iOS 和 MacOS 之间传输数据的最佳方式是什么？

> ID：14669176
> 
> 赞同：-1
> 
> 时间：2013-02-03T03:16:40.610
> 
> 标签：ios, objective-c, wifi, core-bluetooth

我想通过蓝牙或 Wi-fi 在 iOS 和 Mac（短距离）之间直接传输数据。

我读了一些问题，如果我们使用蓝牙，我们必须添加蓝牙 LE 适配器，我不想要它。

如果我们使用 Wi-fi，那将影响当前的 Internet 网络。

最好和最快的方法是什么？我只想直接发送小数据。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:23:06.573

了解 Apple 的 Bonjour 技术：[Bonjour 教程](http://mobileorchard.com/tutorial-networking-and-bonjour-on-iphone/)

从发现附近的其他计算机/设备到获取他们的 IP Addy，可能需要做很多工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T11:05:09.857

您可以使用[NSStream](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/Foundation/Classes/NSStream_Class/Reference/Reference.html)或这个第三方[库](https://github.com/robbiehanson/CocoaAsyncSocket)和 Tcp 协议。您可以使用 Bonjour 来帮助发现网络设备。上面的两个链接都有示例应用程序。注意：两个设备需要在同一个本地网络上。

# php - 不从服务器删除电子邮件时，PHP电子邮件到mysql数据库问题

> ID：14669177
> 
> 赞同：4
> 
> 时间：2013-02-03T03:16:51.747
> 
> 标签：php, mysql, imap, pop3

我正在使用在这里找到的 php 类 etodb

[http://www.phpclasses.org/package/3324-PHP-Retrieve-e-mail-messages-into-a-MySQL-database.html](http://www.phpclasses.org/package/3324-PHP-Retrieve-e-mail-messages-into-a-MySQL-database.html)

它检查电子邮件帐户并将消息下载到 mysql 数据库中。它完美地工作，但是在每个循环结束时（循环收件箱中的每条消息）它会删除电子邮件。我知道如何阻止它删除电子邮件，但问题是由于某种原因，脚本不会将任何新电子邮件插入数据库，除非我允许它删除邮件或收件箱完全为空。

这是上面引用的 php 类的结尾部分。本节仅循环遍历每条消息并将其插入数据库，如果设置，它将删除消息。总之，我的问题是让脚本正常工作，而不需要删除消息或有一个空的收件箱。

```
$total_messages = $this->num_message(); 

// IM ASSUMING THIS FOR LOOP IS NOT LOOPING MESSAGES CORRECTLY 
for ($i = 0; $i < $total_messages; $i++) {

#Get first message
$email = $this->email_get();

$ismsgdb = $this->db_add_message($email); // THIS INSERTS EACH MSG INTO DATABASE

#Get store dir
$dir = $this->dir_name();

$id_log = $this->add_db_log($email, 'Copy e-mail - start ');

foreach($this->partsarray as $part){
 if($part[text][type] == 'HTML'){
   #$message_HTML = $part[text][string];
   $this->db_update_message($part[text][string], $type= 'HTML');
 }elseif($part[text][type] == 'PLAIN'){
   $message_PLAIN = $part[text][string];
   $this->db_update_message($part[text][string], $type= 'PLAIN');
 }elseif($part[attachment]){
    #Save files(attachments) on local disc

   // $message_ATTACH[] = $part[attachment];
    foreach(array($part[attachment]) as $attach){
        $attach[filename] = $this->mimie_text_decode($attach[filename]);
        $attach[filename] = preg_replace('/[^a-z0-9_\-\.]/i', '_', $attach[filename]);
        $this->add_db_log($email, 'Start coping file:"'.strip_tags($attach[filename]).'"');

        $this->save_files($this->newid.$attach[filename], $attach[string]);
        $filename =  $dir.$this->newid.$attach[filename];
        $this->db_add_attach($attach[filename], $filename);
        $this->update_db_log('<b>'.$filename.'</b>Finish coping: "'.strip_tags($attach[filename]).'"', $this->logid);
    }
  //

 }elseif($part[image]){
    #Save files(attachments) on local disc

    $message_IMAGE[] = $part[image];

    foreach($message_IMAGE as $image){
        $image[filename] = $this->mimie_text_decode($image[filename]);
        $image[filename] = preg_replace('/[^a-z0-9_\-\.]/i', '_', $image[filename]);
        $this->add_db_log($email, 'Start coping file: "'.strip_tags($image[filename]).'"');

        $this->save_files($this->newid.$image[filename], $image[string]);
        $filename =  $dir.$this->newid.$image[filename];
        $this->db_add_attach($image[filename], $filename);
        $this->update_db_log('<b>'.$filename.'</b>Finish coping:"'.strip_tags($image[filename]).'"', $this->logid);
    }

 }

}
$this->spam_detect();
$this->email_setflag(); 
$this->email_delete(); // WHEN I REMOVE THIS THE SCRIPT WONT GRAB NEW EMAILS
$this->email_expunge(); // WHEN I REMOVE THIS THE SCRIPT WONT GRAB NEW EMAILS

$this->update_db_log('Finish coping', $id_log);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:28:58.383

但是您的问题是，在循环中，您一直在抓取第一封电子邮件。

```
#Get first message
$email = $this->email_get(); 
```

该类有一个内部指针“$this->msgid”，您需要递增该指针以获取下一条消息。如果在调用函数之前将其设置为 $i + 1，您应该会收到下一条消息。

```
#Get message determined b $i
$this->msgeid = $i + 1;
$email = $this->email_get(); 
```

（注：已编辑，现见源码）

# centos - percona won't start after uncommenting innodb lines in my.cnf

> ID：14669178
> 
> 赞同：1
> 
> 时间：2013-02-03T03:16:53.313
> 
> 标签：centos, innodb, percona, my.cnf

I'm running `Percona 5.5` on a `Centos 6.3`. I'm using the prepackaged "huge" **my.cnf** which ships with percona, it matches my server specs pretty well. My database uses innodb tables. Reading the my.cnf file, there is a section pertaining to innodb:

```
# Uncomment the following if you are using InnoDB tables
innodb_data_home_dir = /var/lib/mysql
#innodb_data_file_path = ibdata1:2000M;ibdata2:10M:autoextend
#innodb_log_group_home_dir = /var/lib/mysql
# You can set .._buffer_pool_size up to 50 - 80 %
# of RAM but beware of setting memory usage too high
#innodb_buffer_pool_size = 384M
#innodb_additional_mem_pool_size = 20M
# Set .._log_file_size to 25 % of buffer pool size
#innodb_log_file_size = 100M
#innodb_log_buffer_size = 8M
#innodb_flush_log_at_trx_commit = 1
#innodb_lock_wait_timeout = 50 
```

I uncommented the above lines (obviously leaving the actual comments commented), restarted percona and I get the following message:

```
Starting MySQL (Percona Server). ERROR! The server quit without updating PID file (/var/lib/mysql/rmdb.pid). 
```

I'm new to managing a database server. What benefit is there to uncommenting the above lines, and why does it crash `mySQL` when I restart when I do?

Thanks

# ruby-on-rails - 嵌套属性不适用于 Simple_form、Decent_exposure、Strong_parameters

> ID：14669179
> 
> 赞同：1
> 
> 时间：2013-02-03T03:17:40.837
> 
> 标签：ruby-on-rails, simple-form

我正在使用带有 Decent_exposure、Strong_parameters 的 Simple_form 我有以下设置，我可以发布给家庭，但没有任何东西发布给邻居

模型

```
class Household < ActiveRecord::Base
 include ActiveModel::ForbiddenAttributesProtection

has_many :neighbors
 accepts_nested_attributes_for :neighbors 
```

看法

```
= simple_nested_form_for household do |f|
  = f.input :household_name
  = f.simple_fields_for :neighbor, Neighbor.new do |neighbor_form|
  = neighbor_form.input :first_name
  = neighbor_form.input :middle_name
  = neighbor_form.input :last_name
  = neighbor_form.input :address

  = f.button :submit 
```

根据我的日志中的以下内容，看起来表单正在工作，但它没有将嵌套模型保存到邻居 - 我已经尝试了 simple_fields_for :neighbor do 和 simple_fields_for :neighbor, Neighbor.new 希望创建一个新邻居会有所帮助但事实并非如此。

```
Parameters:{"utf8"=>"✓",
authenticity_token"=>"cVTteqPFa0JMoFi/ys0wAmNIQghubADv5lbPBr6hyq0=",
"household"=>  {"household_name"=>"Deew", "neighbor"=>{"first_name"=>"Bill",
"middle_name"=>"", "last_name"=>"Ew", "street"=>"we"}}, "commit"=>"Create Household"}
(0.1ms)  begin transactionSQL (0.7ms)  INSERT INTO "households" ("created_at",
"household_name", "name", "updated_at") VALUES (?, ?, ?, ?) 
[["created_at", Sun, 03 Feb 2013 03:02:56 UTC +00:00], ["household_name", "Deew"], 
["name", nil], ["updated_at", Sun, 03 Feb 2013 03:02:56 UTC +00:00]](0.8ms) 
commit transaction 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:35:32.030

确保在允许的参数中包含 neighbors_attributes。

# shell - 在 Linux 中使用 Headless FireFox 使用命令行保存所有 HTML 文件

> ID：14669181
> 
> 赞同：10
> 
> 时间：2013-02-03T03:17:44.213
> 
> 标签：shell, firefox, headless

当前将 shell_exec 与 Xvfb 和 FireFox 一起使用来捕获屏幕截图。但是，需要使用 shell_exec 将整个 html（例如，将页面另存为 --> 网页完成）下载到一个目录中。查看了 Mozilla 开发者论坛中提供的所有不同选项，但无法弄清楚如何做到这一点。

这段代码似乎是我可能需要的，但是它是在哪里以及如何实现的，以便可以在 shell_exec 中访问它？

```
var file = Components.classes["@mozilla.org/file/local;1"]
.createInstance(Components.interfaces.nsILocalFile);
file.initWithPath("C:\\filename.html");
var wbp = Components.classes['@mozilla.org/embedding/browser/nsWebBrowserPersist;1']
.createInstance(Components.interfaces.nsIWebBrowserPersist);
wbp.saveDocument(content.document, file, null, null, null, null); 
```

[以上代码源](https://developer.mozilla.org/en-US/docs/Code_snippets/Miscellaneous)

```
void saveDocument(
in nsIDOMDocument aDocument,
in nsISupports aFile,
in nsISupports aDataPath,
in string aOutputContentType,
in unsigned long aEncodingFlags,
in unsigned long aWrapColumn
); 
```

[以上代码源](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsILocalFile)

这里有一个 Stackoverflow 手动解决方案，但它没有解决 shell_exec： [如何在本地保存网页，包括图片等](https://stackoverflow.com/questions/11271898/how-to-save-a-webpage-locally-including-pictures-etc)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:33:40.283

我知道的选项很少，但我知道没有一个选项完全符合您的问题。

1.  `firefox http://yoursite.com`从外壳打开，然后使用`xte`或类似方法将击键发送到 Firefox。（虽然这不是无头模式。）
2.  使用 wget 下载。它可以以递归方式工作。或者，如果它是非常简单的网页，您也可以解析 HTML。如果您需要提交表单，请使用 curl 而不是 wget。
3.  使用greasemonkey插件并编写一个脚本，该脚本将被加载`http://some-fake-page.com/?download=http://yoursite.com`然后使用该假页面网址打开Firefox。
4.  开发您自己的 Firefox 插件来完成上述工作。

可能还有其他更好的选择，但我不知道。

# grails - Grails - gorm false OR NULL

> ID：14669183
> 
> 赞同：0
> 
> 时间：2013-02-03T03:18:03.747
> 
> 标签：grails, grails-orm

我在一个名为 disabled 的表中有一个字段，它是一个布尔值。我正在尝试查询 false 或 null 但似乎无法使其正常工作。我已经尝试了一些事情，最有可能的解决方案，但似乎没有工作是

```
p = book.createCriteria().list {
'in'('createdUnderAccountCustomerNumber', accountIds)
and {
   'in'('createdUnderProfessionalCustomerNumber', professionalCustomerNums)
   isNull('disabled')
   or {
     eq('disabled', false)
   }
} 
```

基本上，我想获取在帐户列表和已禁用的专业人员列表下创建的所有书籍设置为 false 或 null

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T03:41:27.813

将两部分`or`放在封闭内：

```
or {
    isNull('disabled')
    eq('disabled', false)
} 
```

# ios - 在iOS中碰到屏幕边缘时转换图像

> ID：14669184
> 
> 赞同：1
> 
> 时间：2013-02-03T03:18:08.573
> 
> 标签：ios, objective-c, uiimageview, cgaffinetransform

我有 10 只萤火虫，我使用下面的代码在屏幕上“飞”。该代码还用于将萤火虫保持在屏幕上。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

NSArray *blueArray = [NSArray array];
blueArray = [[NSArray alloc] initWithObjects:
             [UIImage imageNamed:@"blue1.png"],
             [UIImage imageNamed:@"blue2.png"], nil];

blue.animationImages = blueArray;
blue.animationDuration = 0.20;
blue.animationRepeatCount = -1;
[blue startAnimating]; 

    bluepos =CGPointMake(2.0, 1.5);
}

-(void) someMethod {
    endingAnimationTimer = [NSTimer scheduledTimerWithTimeInterval:(0.03) target:self selector:@selector(makeFly) userInfo:nil repeats:YES];
}

-(void) makeFly {

    blue.center = CGPointMake(blue.center.x+bluepos.x, blue.center.y+bluepos.y);{
        if(blue.center.x > 480 || blue.center.x <0)
            bluepos.x = -bluepos.x;

        if(blue.center.y > 320 || blue.center.y <0)
            bluepos.y = -bluepos.y;
    }
} 
```

“飞行”效果很好，除了当萤火虫撞击屏幕边缘并反转方向以将它们保持在屏幕上时，萤火虫图像本身仍然“面向”其他方向，因此看起来它们有一半时间向后飞行。

我想设置它，以便当萤火虫撞击屏幕边缘时，它们会反转方向并且图像本身也会反转。

我试过这个：

在.h

```
@property (nonatomic, assign) BOOL blueIsFacingRight; 
```

在.m

```
 @synthesize blueIsFacingRight;

-(void) makeFly {

    blue.center = CGPointMake(blue.center.x+bluepos.x, blue.center.y+bluepos.y); {
        if(blue.center.x > 480 ) {
            if (blueIsFacingRight == YES) {
                blue.transform = CGAffineTransformMakeScale(-1, 1);
                blueIsFacingRight = NO;
            }
            bluepos.x = -bluepos.x;

        }

        if(blue.center.x <0) {
            bluepos.x = -bluepos.x;

            if (blueIsFacingRight == NO) {
                blue.transform = CGAffineTransformMakeScale(1, 1);
                blueIsFacingRight = YES;
            }
        }

        if(blue.center.y > 320 )
            bluepos.y = -bluepos.y;

        if( blue.center.y <0)
            bluepos.y = -bluepos.y;
    }
} 
```

我认为这会起作用，但是当它撞到“墙壁”时，图像并没有反转

谁能解释为什么这不起作用以及是否有更好的原因来实现我正在寻找的效果？

![在此处输入图像描述](../Images/79c456a6d5f767d7ec1abc35c23652ae.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T03:29:38.847

You are setting the transform X value to -1 in both cases. When its facing right you should set transform like this CGAffineTransformMakeScale(1, 1);

```
blue.center = CGPointMake(blue.center.x+bluepos.x, blue.center.y+bluepos.y); {
if(blue.center.x > 480 ) {
    if (blueIsFacingRight == YES) {
        blue.transform = CGAffineTransformMakeScale(-1, 1);
        blueIsFacingRight = NO;
    }
    bluepos.x = -bluepos.x;

}

if(blue.center.x <0) {
    bluepos.x = -bluepos.x;

    if (blueIsFacingRight == NO) {
        blue.transform = CGAffineTransformMakeScale(1, 1);
        blueIsFacingRight = YES;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T00:15:05.233

```
**blue.transform =CGAffineTransformIdentity;** 
```

上面是在我的 makeFly 方法中，上面有一堆其他的东西，我正在反转图像，所以我在下次调用该方法时撤消更改（0.03 之后）

伙计，我觉得自己很愚蠢

# java - 用于有效索引数千个移动点的数据结构？

> ID：14669185
> 
> 赞同：2
> 
> 时间：2013-02-03T03:18:22.470
> 
> 标签：java, algorithm, data-structures

情况：

我可能有数万个移动（2D）点。它们仅在一定范围内相互影响。他们可以从一个地方移动到另一个地方（本质上不是传送，只是在屏幕上飞来飞去）。

由于我必须在每一个刻度上检查更新，因此有效地执行此操作非常重要。

我天真的解决方案是简单地创建一个网格类型结构，网格间距在效果半径附近的某处，并且随着点从一个单元格移动到另一个单元格，更新它们所在的单元格。所以当我需要进行效果检查时，我只需要检查一个点的单元格和几个相邻的单元格。

我熟悉四叉树，但我担心它比我需要做的要贵一点，但如果这确实是正确的路线，我愿意接受建议。

此外，有关附加信息，这是在 Java 中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:53:01.230

我曾经和我的下一个项目将处于类似的情况。
我选择了简单的网格变体，因为它实现起来更简单、更快。数以万计的人在四叉树或 kd 树可能有意义的边界。（尤其是当许多单元格为空时）

您应该尝试测试网格方法是否足够。大概是这样。

# javascript - 将图像从 Flickr 加载到 Lightbox 2 的更有效方法是什么？

> ID：14669186
> 
> 赞同：0
> 
> 时间：2013-02-03T03:18:28.617
> 
> 标签：javascript, html, lightbox

我正在使用 Lightbox 2，我想知道您是否可以给我一些指示。现在这就是我添加图像的方式：

```
<a href="IMAGE URL GOES HERE" rel="lightbox[gallery1]" title="TITLE HERE"></a>
<a href="IMAGE URL GOES HERE" rel="lightbox[gallery1]" title="TITLE HERE"></a>
<a href="IMAGE URL GOES HERE" rel="lightbox[gallery1]" title="TITLE HERE"></a>
<a href="IMAGE URL GOES HERE" rel="lightbox[gallery1]" title="TITLE HERE"></a>
<a href="IMAGE URL GOES HERE" rel="lightbox[gallery1]" title="TITLE HERE"></a>
<a href="IMAGE URL GOES HERE" rel="lightbox[gallery1]" title="TITLE HERE"></a>
etc....... 
```

Lightbox 的想法是所有在 rel 中具有相同“gallery1”标签的图像都将显示在 Lightbox 库中。我的问题是我不想一次又一次地不断地将这样的图像添加到画廊中。有没有更快、更有效的方法来做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T05:17:10.090

您可以将文件名放在一个数组中并在 JS 中循环它们。假设你有 jQuery，试试这个。请注意，这取决于文件的路径。这是一个工作[小提琴](http://jsfiddle.net/Zazcc/)。

HTML：

`<ul id="photos-ul"></ul>`

JS：

```
var fileNames = ["1","2","3"]; // put the filenames in an array and make the url correct in the loop
for (i=0; i < fileNames.length; i++){
    $('#photos-ul').append("<li><a href='http://flicker.com/photo" + fileNames[i] + "'>Photo " + fileNames[i] + "</a></li>"); 
} 
```

# c# - Unity3D 中辅助角色动画的关节

> ID：14669188
> 
> 赞同：1
> 
> 时间：2013-02-03T03:18:46.780
> 
> 标签：c#, animation, unity3d

我听说有一些方法可以将骨骼绑定到网格上，然后插入刚体 + 关节来为马尾辫、布料等创建自动辅助运动。我目前正在尝试为我的角色这样做，但由于某种原因我不能得到想要的效果。

我目前在头骨下连接了一个颚骨，并添加了一个角色关节修改器，头骨是 Connected Rigidbody。我希望角色的动作（目前是 Unity 中的 Mecanim 装备）来创建主要动作，这反过来会使颚骨反弹。相反，我看不到颌骨有任何运动。

有任何想法吗？也许我做错了？也许我听错了，我不能这样做？

提前致谢！

一种。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T00:26:16.950

好的，想通了。只需从 Mecanim 系统中移除钳口，然后添加带有铰链接头的刚体即可。然后在头部骨骼上添加一个没有重力和 Frozen XYZ 旋转和位置的刚体。使用头部的刚体作为下颌的铰链连接体，并对设置进行调整以获得所需的弹性……现在下颌响应身体的运动。哇！

# fat-free-framework - Fat Free Framework 3.0 和多个文件

> ID：14669190
> 
> 赞同：1
> 
> 时间：2013-02-03T03:19:19.743
> 
> 标签：fat-free-framework

我用 F3 (fat free framework) 2.0 完成了一个简单的项目，一切都很好。现在我开始了一个新项目，我发现它已经发生了很大的变化。我创建了一个简单的基本测试，只是不断地遇到错误和怪异。我不是 F3 专家，是的，我已经阅读了文档，当然，我可能错过了一些东西。希望有人可以帮助我。这是我失败的例子：

从我的配置文件开始

## 配置文件

```
cfgDbConnection="mysql:host=localhost;port=8889;dbname=test";
cfgDbUser="root"
cfgDbPassword="123456"
cfgCache=true 
```

//...ETC

起点

## 索引.php

```
$f3=require('lib/base.php');
$f3->set('UI','ui/');
$f3->set('AUTOLOAD', 'classes/'); // this folder contains class objects for the project

$f3->config('config.cfg');
$f3->set('CACHE', $f3->get('cfgCache'));
$f3->set('DEBUG',3); 

$db = new DB\SQL(
    $f3->get('cfgDbConnection'),
    $f3->get('cfgDbUser'),
    $f3->get('cfgDbPassword')
);
$f3->set('DB',$db);

require_once("menuRoutes.php");
$f3->run(); 
```

用于路由的 5 个 php 文件中的第一个

## menuRoutes.php

```
<?php
$f3->route('GET /', function() use ($f3){
    AuthManager::authenticateSession($f3); // checks if user is logged in /classes/AutManager.php 
    echo View::instance()->render('landing.htm');
}); 
```

## 登陆.htm

```
<include href="mainHeaderBar.htm"/> (this has css & js loads)
general html.......
<include href="mainFooterBar.htm"/> (other jquery scripts) 
```

此时页面加载了一般的 html，CSS 和 JS 脚本没有加载，因为包含没有加载，它们被忽略了......？

PHP 日志显示：

```
HTTP 405 (HEAD /)
/Users/home/Documents/My Projects/testApp/web/index.php:39 Base->run()
ob_clean(): failed to delete buffer. No buffer to delete
/Users/home/Documents/My Projects/testApp/web/lib/base.php:859 ob_clean()
/Users/home/Documents/My Projects/testApp/web/lib/base.php:1118 Base->error(405)
/Users/home/Documents/My Projects/testApp/web/index.php:39 Base->run()
PHP Fatal error:  Uncaught exception 'ErrorException' with message 'ob_clean(): failed to delete buffer. No buffer to delete' in /Users/home/Documents/My Projects/testApp/web/lib/base.php:1391 
```

感谢您的帮助/建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T23:29:25.357

您的包含标签没有被呈现，因为您没有使用模板类...尝试

```
echo Template::instance()->render('landing.htm'); 
```

而不是视图

# android - 初始化 Git 团队提供者失败

> ID：14669192
> 
> 赞同：3
> 
> 时间：2013-02-03T03:20:01.363
> 
> 标签：android, eclipse, git, eclipse-plugin, egit

每当我 使用 eclipse 插件添加`Android project`到 a时，我都会收到此错误消息`git repository``EGit`

> 无法初始化 Git 团队提供程序。

当可视化错误日志时，我得到了这个：

```
Failed to initialize Git team provider. 
Problems encountered while moving resources.
Could not move '/SearchInContatsWithLoader'.
Could not move: D:\AndrComp\SearchInContatsWithLoader.
Problems encountered while deleting files.
Could not delete: D:\AndrComp\SearchInContatsWithLoader\libs\android-support-v4.jar.
Could not delete: D:\AndrComp\SearchInContatsWithLoader\libs.
Could not delete: D:\AndrComp\SearchInContatsWithLoader. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:03:06.453

检查您是否没有阻止这些文件的 Windows 进程（保持对它们的句柄），这将阻止另一个进程（如`EGit`）移动它们。

要解决此问题，请尝试关闭尽可能多的进程（或者更好的是，重新启动并仅启动 Eclipse），然后重试您的操作。

# nfc - NFC 名片上的数据格式

> ID：14669193
> 
> 赞同：1
> 
> 时间：2013-02-03T03:20:10.397
> 
> 标签：nfc

如果这个问题有点低端，请提前道歉 - 我只有四分之一的技术知识。

我正在尝试制作一些支持 NFC 的名片，并且一直在试用一些兼容 Mifare 1K 和超轻卡。我一直在通过三星 GS3 使用标签编写器应用程序对数据进行编码，它似乎表现良好（即，当发生联系时，GS3 会无缝询问我也想添加联系人卡片的电子邮件帐户，而无需安装特定的应用程序等.

我的问题与联系人数据的通用格式有关，当它们不可避免地启用 NFC 时（即 Blackberry、Windows phone 和下一个 I-phone），可以允许与上述 GS3 与其他手机格式发生的相同类型的结果。我一直在阅读有关 .VCF 或 Vcard 作为通用格式的信息，但是当我使用这种格式的联系人卡对 mifare 卡进行编码并尝试通过 GS3 读取它时，手机会询问我想使用哪个应用程序。有没有我可以使用的格式，它允许所有手机处理并询问用户希望在没有标签阅读器应用程序或类似应用程序的情况下将数据保存在哪里？

谢谢布拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-30T17:53:10.743

不幸的是，NFC 标签上的 vCard 没有通用的格式。最接近它的是使用`MIME`NDEF 有效负载中的类型并引用 vCard 规范。这种方法的问题在于，每个手机操作系统或制造商都可能以不同的方式实现这一点。

细节在于 NFC 标准机构 NFC 论坛没有明确将 vCard 定义为`Well Known Type`. 数据存储在 NFC 标签上的格式称为`NDEF`. NDEF 规范列出了一个结构并提供了一个`TNF`字段来选择`WKF`、、、`MIME`和[其他](https://www.dropbox.com/s/n2mmu894sybc9xw/nfc-forum-ndef.pdf?dl=0)。这些值映射到应处理 NDEF 数据的应用程序。在 的情况下，通常本机应用程序知道如何处理它（这就是您所要求的）。但是，WKT 目前仅指定以下结构：`EXT``TNF``WKT`

![NDEF 的基础知识](../Images/dacc44df1a5c632746fb714ec1ae06d5.png)

1.  [文本](https://www.dropbox.com/s/n30cklgfhv5qf87/nfc-forum-text_rtd.pdf?dl=0)
2.  [URI](https://www.dropbox.com/s/efo7doz075bsxik/nfc-forum-uri_rtd.pdf?dl=0)
3.  [智能海报](https://www.dropbox.com/s/yc5899cdr0ycgc7/nfc-forum-smart_poster_rtd.pdf?dl=0)
4.  [交出](https://www.dropbox.com/s/888976lhjghmuu7/nfc-forum-connection_handover_rtd.pdf?dl=0)
5.  [通用控制](https://www.dropbox.com/s/m0if3dmyn061shr/nfc-forum-generic_control_rtd.pdf?dl=0)
6.  [签名](https://www.dropbox.com/s/g9kbln9l76w6bbo/nfc-forum-signature_rtd.pdf?dl=0)

由于没有`WKT`vCard，三星的 GS3 应用程序正在做的是使用`MIME`类型。`MIME`具有与 NDEF 类似的结构，但不由 NFC 论坛管理，因此 Windows、Blackberry 等可能会选择以不同的方式（`EXT`例如，使用类型）实现 vCard 结构，但仍符合 NFC 论坛。

更多关于[在此处分解 NDEF 的信息](http://flomio.com/2012/05/ndef-basics/)。

# html - 在 CSS、HTML 或 Javascript 中创建可自定义的计数函数？

> ID：14669194
> 
> 赞同：0
> 
> 时间：2013-02-03T03:20:13.313
> 
> 标签：html, css, math, counter

我有一个倒计时功能（代码如下），它很小并且与左上角对齐。

我希望能够自定义大小、对齐方式、背景颜色、前景色，并且还有一个按钮来停止、启动和清除计时器。其次，我希望计数器在开始时显示“00:00:00”，当它达到“00:00:59”时，我希望它翻转到“00:01:00”，显示 1 分钟有通过了。

我认为 CSS/HTML 将是最合适的语言来实现所需的视觉效果，但 Javascript 似乎具有更多的算术/解析功能。

```
<br><script language="JavaScript">
function calcage(secs, num1, num2) {
    s = ((Math.floor(secs/num1))%num2).toString();
    if (LeadingZero && s.length < 2) {
        s = "0" + s;
        return "<b>" + s + "</b>";
    }
}

function CountBack(secs) {
    if (secs < 0) {
        document.getElementById("cntdwn").innerHTML = FinishMessage;
        return;
    }
    DisplayStr = DisplayFormat.replace(/%%D%%/g,calcage(secs,86400,100000));
    DisplayStr = DisplayStr.replace(/%%H%%/g, calcage(secs,3600,24));
    DisplayStr = DisplayStr.replace(/%%M%%/g, calcage(secs,60,60));
    DisplayStr = DisplayStr.replace(/%%S%%/g, calcage(secs,1,60));

    document.getElementById("cntdwn").innerHTML = DisplayStr;
    if (CountActive) {
        setTimeout("CountBack(" + (secs+CountStepper) + ")", SetTimeOutPeriod);
    }
}

function putspan(backcolor, forecolor) {
    document.write("<span id='cntdwn' style='background-color:" + backcolor + "; color:" + forecolor + "'></span>");
}

if (typeof(BackColor)=="undefined") {
    BackColor = "black";
}
if (typeof(ForeColor)=="undefined") {
    ForeColor= "white";
}
if (typeof(TargetDate)=="undefined") {
    TargetDate = "12/31/2050 5:00 AM";
}
if (typeof(DisplayFormat)=="undefined") {
    DisplayFormat = "%%H%%:%%M%%:%%S%%";
}
if (typeof(CountActive)=="undefined") {
    CountActive = true;
}
if (typeof(FinishMessage)=="undefined") {
    FinishMessage = "";
}
if (typeof(CountStepper)!="number") {
    CountStepper = -1;
}
if (typeof(LeadingZero)=="undefined") {
    LeadingZero = true;
}

CountStepper = Math.ceil(CountStepper);
if (CountStepper == 0) {
    CountActive = false;
}
var SetTimeOutPeriod = (Math.abs(CountStepper)-1)*1000 + 990;
putspan(BackColor, ForeColor);
var dthen = new Date(TargetDate);
var dnow = new Date();
if(CountStepper>0) {
    ddiff = new Date(dnow-dthen);
}
else {
    ddiff = new Date(dthen-dnow);
}
gsecs = Math.floor(ddiff.valueOf()/1000);
CountBack(gsecs);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T03:25:24.350

我会使用一个更简单的解决方案，使用 javascript Date 对象，在时间计数器上求和毫秒，然后将毫秒格式化为时间。

一些参考：日期对象和函数：[http ://w3schools.com/jsref/jsref_obj_date.asp](http://w3schools.com/jsref/jsref_obj_date.asp)

# php - Mysqli -> num_rows 总是返回 1

> ID：14669205
> 
> 赞同：0
> 
> 时间：2013-02-03T03:23:48.187
> 
> 标签：php, mysqli

这似乎总是为 $item_result->num_rows 返回 1; 即使数据库中有 0 行。但是，如果一个项目存在，它会正确更新该行。我确定我的语法有问题，但我很难理解这个 mysqli。

```
$item_query = "SELECT COUNT(*) FROM `rel` WHERE `cart_id` = '".$cartId."' && `id_item` = '".$item_id."'";
$item_result = $mysqli->query($item_query) or die($mysqli->error.__LINE__);

if($item_result->num_rows==1) {

$item_query2 = "SELECT * FROM `rel` WHERE `cart_id` = '".$cartId."' && `id_item` = '".$item_id."'";
$item_result2 = $mysqli->query($item_query2) or die($mysqli->error.__LINE__);

$getOldItems = $item_result2->fetch_array();
$oldQty = $getOldItems['amount'];
$oldNotes = $getOldItems['notes'];

$newQty = $oldQty + $item_quantity;
$newNotes = $oldNotes . $item_notes;

$update_qty = $mysqli->query("UPDATE rel SET amount = '$newQty', notes = '$newNotes' WHERE `cart_id` = '$cartId' && `id_item` = '$item_id'");

if(!$update_qty){
    printf("Errormessage: %s\n", $mysqli->error);
}
  header('Location: ./ordernew.php');   

} else {

    $insert_cart_item = $mysqli->query("INSERT INTO rel (`email`, `cart_id`, `id_item`, `amount`, `notes`) VALUES ('$email', '$cartId', '$item_id', '$item_quantity', '$item_notes')");

if(!$insert_cart_item) {
printf("Errormessage: %s\n", $mysqli->error);
}
 header('Location: ./ordernew.php');    

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T03:29:58.457

当你这样做`SELECT COUNT(*)`时，总会有至少一个结果。哪怕是0。

您将需要获取查询结果以获得正确的计数。

# c++ - 为什么taskset对fedora没有影响？

> ID：14669206
> 
> 赞同：0
> 
> 时间：2013-02-03T03:24:06.817
> 
> 标签：c++, c, multithreading, parallel-processing, core

我正在尝试运行一个高度多线程的应用程序，并希望使用不同的内核（0、1、2、3、4、5、6 ... 12）来衡量它的性能。我在谷歌上看到了任务集，

```
taskset 0x00000003 ./my_app 
```

但是当我看到 Fedora 的系统监视器时，它只显示一个核心在 100% 运行，而其他核心只有 12%、0% 等。有没有办法告诉进程在某个核心上运行。我还听说过像 -t #no of cores 这样的选项。像

```
./my_app -t2 
```

对于 0 和 1 核心 .. 但这也没有影响我做错了什么可以请任何人引导我走向正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T07:25:20.020

`taskset 0x00000003 ./my_app`将 my_app 进程的关联性设置为核心 1 和 2。如果您的应用程序是多线程的，则线程继承关联性，但未设置它们在核心 1 和 2 之间的分配。

要设置进程中每个线程的亲和性，您可以在进程运行后使用任务集（即运行 myapp，检查线程 ID 并`taskset -pc <core> <tid>`为每个线程调用），或者在创建线程时使用 设置亲和性`sched_setaffinity`，`pthread_setaffinity_np`如果您使用的是 pthreads 等）。

无论做什么`./myapp -t2`都特定于您的应用程序。

# java - 通过自定义 ListCellRendered 隐藏部分 JList 字符串

> ID：14669211
> 
> 赞同：0
> 
> 时间：2013-02-03T03:25:27.417
> 
> 标签：java, render, jlist, cellrenderer

这是我用来添加（一般）、（耳语）、（公会）或（全局）类型消息的“协议语法”

```
// add the message in list box
ChatJInternalFrame.modelChatList.addElement("(general)" + characterName + ": " + chatMessage); 
```

这是我设置列表的模型和单元格渲染器的地方：

```
modelChatList = new DefaultListModel<String>();
listForChat = new JList<String>(modelChatList);
listForChat.setFont(new Font("Lucida Console", Font.PLAIN, 14));
listForChat.setCellRenderer(new ColoredChatListRenderer()); 
```

这是我的自定义 cellRenderer：

```
public class ColoredChatListRenderer extends DefaultListCellRenderer {

    @Override
    public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {

        super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);  

        String s = String.valueOf(value);
        String splitPipe[] = s.split("\\)");        

        if(s.length() > 7 && s.substring(0, 8).equals("~SERVER~")){
            setForeground(Color.red);
        } else if (splitPipe[1].length() > 11 && (splitPipe[1].substring(0,12).equals("DEV Proskier") || splitPipe[1].substring(0,11).equals("DEV Sparkle"))){
            setForeground(Color.orange);
        } else {
            if (splitPipe[0].equals("(general")){
                setForeground(Color.black);
            } else if (splitPipe[0].equals("(whisper")){
                setForeground(Color.magenta);
            } else if (splitPipe[0].equals("(guild")){
                setForeground(Color.blue);
            } else if (splitPipe[0].equals("(global")){
                setForeground(Color.pink);
            }
        }
        return(this);
    }
} 
```

![聊天模式](../Images/8df64800398c50f4c97d48dbbe1cddd8.png)

现在这很好用，但是我想我不希望聊天中出现类型（一般）、（耳语）等，只是颜色变化。抱歉，如果这是一个真正简单的问题，我的大脑会因为在聊天窗口上工作而受到我用来切换聊天模式的焦点遍历废话的伤害。

有没有一些简单的方法可以做到这一点？？？就像只是切断前几个字符的子字符串一样，我可以使模式长度相同......又名（GEN），（GLO），（GUI），（WHI）

****编辑****

感谢您的帮助，但这对我来说是最简单的解决方案。请让我知道这是否在某些方面不好。

```
 if (splitPipe[0].equals("(general")){
        setText(splitPipe[1]);
        setForeground(Color.black);
    } else if (splitPipe[0].equals("(whisper")){
        setText(splitPipe[1]);
        setForeground(Color.magenta);
    } else if (splitPipe[0].equals("(guild")){
        setText(splitPipe[1]);
        setForeground(Color.blue);
    } else if (splitPipe[0].equals("(global")){
        setText(splitPipe[1]);
        setForeground(Color.pink);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T03:36:49.000

创建一个包含两条数据的自定义对象，消息类型和消息文本。将对象添加到 ListModel。然后，您的渲染器可以检查类型以突出显示目的，并将文本用于显示目的。

请参阅：[Java：Swing JComboBox，是否可以为列表中的每个项目隐藏数据？](https://stackoverflow.com/questions/5010537/java-swing-jcombobox-is-it-possible-to-have-hidden-data-for-each-item-in-the-l/5010548#5010548)有关此方法的示例。该示例使用组合框，但概念相同。

# jquery - 如何确定元素是否已配置对话框？

> ID：14669213
> 
> 赞同：0
> 
> 时间：2013-02-03T03:25:49.870
> 
> 标签：jquery

这是我正在尝试做的一个示例。

```
<html>
<head>
    <script type="text/javascript" language="javascript">
      function doOpen() {
        if ($('#dialog-modal').dialog('widget') == '')
          document.getElementById('#dialog-modal').style.display = 'block';
        else    
          $('#dialog-modal').dialog('open');
      }

      function doClose() {
        if ($('#dialog-modal').dialog('widget') == '')
          document.getElementById('#dialog-modal').style.display = 'none';
        else
          $('#dialog-modal').dialog('close');
      }     

      function doAttach() {    
        $('#dialog-modal').dialog({
          width: 'auto',
          height: 'auto',
          title: 'Popup Dialog',
          autoOpen: false,
          resizable: false,
          modal: true
        });

        document.getElementById('dialog-modal').style.display = 'block';
      }
    </script>
</head>
<body>
<input type="button" id="Show" value="Open" onclick="doOpen();" />
<input type="button" id="Attach" value="Attach" onclick="doAttach();" />

<div id="dialog-modal" style="display:none">
Show this in a model dialog window<br />
<input type="button" id="Close" value="Close" onclick="doClose()" />
</div>
</body>
</html> 
```

如果我在执行任何其他操作之前单击“附加”，对话框就会显示得很好。但是，如果我先单击“打开”，则会出现错误。我需要知道这条线应该是什么，以确定对话框模式是否已附加到对话框

```
if ($('#dialog-modal').dialog('widget') == '') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:43:07.623

很难说出您要做什么，但是您可以使用 data() 查看是否已附加对话框。

```
if ($('#dialog-modal').data('uiDialog')) {
  alert('dialog attached');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T04:28:33.113

大多数插件在目标 html 元素中添加了一些类和数据。您需要找出他们正在添加的类和数据，而不是像这样

```
if($('selector').hasClass('classAdded')){
//do something
} 
```

或者

```
if($('selector').data('dataKey')){
//do something
} 
```

对于课程，您可以简单地在萤火虫屏幕或其他屏幕上看到。要获取他们分配的数据，请使用

```
alert(JSON.stringify($(selector).data())); 
```

# android - WebView 嵌入的 youtube 视频不接受全屏按钮？

> ID：14669218
> 
> 赞同：2
> 
> 时间：2013-02-03T03:26:49.807
> 
> 标签：android, html, webview, youtube

我有一个 WebView 正在加载一个 WordPress 网站，该网站在一些文章中嵌入了 HTML5 youtube 视频。视频可以正常播放，但全屏按钮只会使视频崩溃。我有... android:hardwareAccelerated="true"

```
 web = (WebView) findViewById(R.id.web_view);
         web.setWebChromeClient(new WebChromeClient());
         web.getSettings().setPluginState(PluginState.ON); 
```

所以不是硬件加速。有任何想法吗？

# datagrid - Select Cell datagrid flash builder

> ID：14669224
> 
> 赞同：0
> 
> 时间：2013-02-03T03:28:09.580
> 
> 标签：datagrid, flash-builder, cell

Basically what I want to do is to select just one cell, and let the information about that cell being displayed as either a label in the box under it.

![enter image description here](../Images/6c8fcd275c0fa6deb256c2708c0d450c.png)

This is what I have at the moment:

```
 <s:DataGrid selectionMode="multipleCells" x="726" y="0" width="446" height="50" requestedRowCount="0" click="itemClickEvent(event)">
                        <s:columns>
                            <s:ArrayList>
                                <s:GridColumn width="63" dataField="dataField1" headerText="見積条件"></s:GridColumn>
                                <s:GridColumn width="63" dataField="dataField2" headerText="原価見積"></s:GridColumn>
                                <s:GridColumn width="63" dataField="dataField3" headerText="見積作成"></s:GridColumn>
                                <s:GridColumn width="63" dataField="dataField4" headerText="見積発行"></s:GridColumn>
                                <s:GridColumn width="63" dataField="dataField5" headerText="受注失注"></s:GridColumn>
                                <s:GridColumn width="63" dataField="dataField6" headerText="納品"></s:GridColumn>
                                <s:GridColumn width="63" dataField="dataField7" headerText="請求"></s:GridColumn>
                            </s:ArrayList>
                        </s:columns>

                        <s:ArrayList>
                            <fx:Object dataField1="2" dataField2="1" dataField3="2" dataField4="1" dataField5="4" dataField6="1" dataField7="1"></fx:Object>
                        </s:ArrayList>
                    </s:DataGrid>

private function itemClickEvent(event:Event):void
            {
                currentState='information_dropdown'
                Alert.show("Row : " +event.rowIndex + "Column : " +event.columnIndex)

            } 
```

Although the code shows an alert box I want to display it as a label under it instead. I do get an error on the rowIndex and columnIndex part.

Any advice would be great.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:00:17.503

不是在 datagrid 上监听 click 事件，而是监听 GridEvent.GRID_CLICK：

```
<s:DataGrid selectionMode="multipleCells" x="726" y="0" width="446" height="50" requestedRowCount="0" gridClick="itemClickEvent(event)"> 
```

并将侦听器参数类型更改为 GridEvent：

```
private function itemClickEvent(event:GridEvent):void
{
    ...
} 
```

然后 rowIndex 和 columnIndex 应该给出正确的结果。

# javascript - Can't add markers to mobile google map

> ID：14669227
> 
> 赞同：0
> 
> 时间：2013-02-03T03:29:16.290
> 
> 标签：javascript, android, cordova, mobile

Trying to create a PhoneGap mobile app. Totally new to mobile apps, phonegap, and JS so bear with me. This is where I'm at:

```
 <script type="text/javascript">
 function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(40.710,-73.994), //New york, NY
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions)
}; 
```

With that, the map renders in the browser just fine. When adding the following that I've found in a number of tutorials it refuses to render anything. I am trying to do all of this in the googlemap/index.html page that I have created.

```
<script type="text/javascript">
 function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(40.710,-73.994), //New york, NY
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);
    var LatLng = new google.maps.LatLng(40.710,-73.994)
    var marker = new.google.maps.Marker({
        position: myLatLng,
        title: "hello world!"
        });
    marker.setMap(map);
}; 
```

When I add the following, the entire page refuses to render.

Basically, I'm using the above method to display a google map, and I'm trying to add a pin to the center location. Seems simple enough but proving to be beyond my abilities.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:58:43.303

You have a syntax error on this line:

```
var marker = new.google.maps.Marker({ 
```

Notice that there is a dot between the `new` operator and the class name.

To fix, replace the line above with:

```
var marker = new google.maps.Marker({ 
```

Happy mapping!

PS: The error was reported in the (desktop) browser's console, I'm not sure how you'd see the same on an Android device.

# c++ - Keeping parallel arrays updated when adding a new element in order

> ID：14669230
> 
> 赞同：1
> 
> 时间：2013-02-03T03:29:38.553
> 
> 标签：c++, c, arrays, algorithm, parallel-processing

This is a college assignment so I would prefer pseudo code, or just a basic idea of the process; however, any help would be appreciated.

The problem:

I have two parallel arrays: array **courseNames** and array **maximumEnrollment**. I must use a function provided by faculty that inserts new elements into array **courseNames** by alphabetical order:

```
// Assume the elements of the array are already in order
// Find the position where value could be added to keep
//    everything in order, and insert it there.
// Return the position where it was inserted
//  - Assumes that we have a separate integer (size) indicating how
//     many elements are in the array
//  - and that the "true" size of the array is at least one larger 
//      than the current value of that counter

template <typename T>
int addInOrder (T* array, int& size, T value)
{
  // Make room for the insertion
  int toBeMoved = size - 1;
  while (toBeMoved >= 0 && value < array[toBeMoved]) {
    array[toBeMoved+1] = array[toBeMoved];
    --toBeMoved;
  }
  // Insert the new value
  array[toBeMoved+1] = value;
  ++size;
  return toBeMoved+1;
} 
```

Since the array **courseNames** is empty, I don't have to worry about the array being in order when I first use the function. All the input comes from a file separated by lines, every line contains the name of the class(ei. CS150) and the maximum enrollment allowed(ei. 50). The first array, holds the names of the courses, while the second array holds the maximum enrollment.

My code for the function that reads the inputs from the files looks like this:

```
/*
 * Read the course names and max enrollments. Keep the courses
 * in alphabetic order by course name.
 */
void readCourses (istream& courseFile, int numCourses,
          string* courseNames, int* maxEnrollments)
{
  //!! Insert your code here
    for(int i =0; i < numCourses; ++i){
        string course;
        courseFile >> course;
        int pos = addInOrder(courseNames, numCourses, course);
        courseFile >> maxEnrollments[pos];
    }
} 
```

I'm using the position given to the elements of **courseNames** as the index to store the maximum enrollment for the given course. The problem arises when a new value is inserted into **courseNames** and I get the position in which it was added. If I use that position, the old value of the index will be overwritten and everything will fall out of place.

My **question** is, how can I prevent this from happening? How can I find out what value was replaced to keep the array in order and make the parallel array *maximumEnrollment** match the index of **courseNames** for each course?

Thank you in advance for any help you might be able to provide!

**UPDATE**

I was also provided this function:

```
// Add value into array[index], shifting all elements already in positions
//    index..size-1 up one, to make room.
//  - Assumes that we have a separate integer (size) indicating how
//     many elements are in the array
//  - and that the "true" size of the array is at least one larger 
//      than the current value of that counter

template <typename T>
void addElement (T* array, int& size, int index, T value)
{
  // Make room for the insertion
  int toBeMoved = size - 1;
  while (toBeMoved >= index) {
    array[toBeMoved+1] = array[toBeMoved];
    --toBeMoved;
  }
  // Insert the new value
  array[index] = value;
  ++size;
} 
```

So I changed my code to this:

```
/*
 * Read the course names and max enrollments. Keep the courses
 * in alphabetic order by course name.
 */
void readCourses (istream& courseFile, int numCourses,
          string* courseNames, int* maxEnrollments)
{
  //!! Insert your code here
    int size = 1;
    for(int i =0; i < numCourses; i++){
        string course;
        int maxEnroll;
        courseFile >> course;
        courseFile >> maxEnroll;

        int pos = addInOrder(courseNames, size, course);
        addElement(maxEnrollments, size, pos, maxEnroll);

    }
} 
```

# c++ - what's the best way to get rid of the \0 at the end of a string literal?

> ID：14669233
> 
> 赞同：0
> 
> 时间：2013-02-03T03:30:00.797
> 
> 标签：c++

I'm trying to do something like

```
strcmp(argv[3], "stdout") 
```

however, in the command line I don't want to type

```
stdout\0 
```

what's the best way to get rid of the \0 at the end of a string literal?

Thanks!

update:

Thanks guys. I found what's wrong with my code... I should have used

```
strcmp(argv[3], "stdout") == 0 
```

Thanks @Nicol Bolas

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T03:32:42.557

You don't have to type "stdout\0" on the command line. Whichever way your system makes command-line arguments available to your process (it differs by operating system) automatically adds the null character.

As you know, a C-style string is terminated by the null character, which is written in code as '\0'. If that character weren't at the end of the string, a function such as `strcmp` would keep going well beyond the end of the string, since such a string flouts convention. Since the terminating null character is the C convention, however, the compiler is smart enough to add the null character to the end of a string literal, and the system is smart enough to add the null character to the command-line arguments stored in the memory of a freshly created process. If `argc` is greater than 3, and the third argument you type on the command-line for your program is "stdout", the call to `strcmp(argv[3], "stdout")` will return 0 to mean that the two strings match.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T03:33:07.667

You don't need to type `\0` in most cases. String literals have a `\0` implicitly appended to them, and the C functions that store string data into character arrays will append a `\0` on the end (which is why the documentation for many of those functions specifies that your character buffer must have enough space for the string and the null terminator).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T03:38:20.667

字符串字面量由源字符集中的零个或多个字符组成，并用双引号 (") 括起来。字符串字面量表示一系列字符，它们一起形成一个以空字符结尾的字符串。

[strcmp](http://en.cppreference.com/w/c/string/byte/strncmp) 开始比较每个字符串的第一个字符。如果它们彼此相等，则继续以下对，直到字符不同或到达终止空字符。

所以你不需要写`\0`在最后`stdout`，你需要比较to的返回`strcmp`值`0`：

```
if (strcmp(argv[3], "stdout") == 0) 
```

# android - How to stop an android repeating alarm from a notification action

> ID：14669234
> 
> 赞同：0
> 
> 时间：2013-02-03T03:30:15.553
> 
> 标签：android, notifications, alarmmanager, alarm

I'am trying to find a way to use an NotificationCompat.Builder.addAction(...) to call some code to stop a repeating alarm without starting an activity... but as i understood so far the only thing I can do with this is start intents with Activities. There's any way I can stop the alarm without leaving the notification?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T03:53:52.680

您可以通过以 PendingIntent 作为参数调用 set() 函数向警报管理器添加请求。您只需要使用相同的 PendingIntent 调用 cancel() 即可停止它；尽管我非常清楚您的通知问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-07T05:55:17.680

使用 PendingIntent 在 AlarmManager 上调用 cancel()。

```
Intent intent = new Intent(this, AlarmReceive.class);
PendingIntent sender = PendingIntent.getBroadcast(this, 0, intent, 0);
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

alarmManager.cancel(sender); 
```

而已

# c++ - how to implement timers in multithread environment in c++

> ID：14669239
> 
> 赞同：1
> 
> 时间：2013-02-03T03:31:20.000
> 
> 标签：c++, multithreading

I normally use single thread process with signal handlers and to achieve concurrency, by dividing parallel tasks into multiple process.

Now, i am trying to check if multi-threading can be faster. To implement alarms/timers, i typically register alarmHandlers and let OS send a signal. But in multi-threading environment, i cannot take this approach, UNLESS, there is a way such that signal can be delivered to a specific thread.

Hence my question, how to implement timers in multithreading environment? I can start a thread and let it sleep for desired amount and then set a shared variable. What other options do i have?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T22:29:14.263

我假设您想在不同的时间启动线程。您可以使用 sleep_until 函数。这是一个 C++11 函数线程将休眠到某个时刻 [http://en.cppreference.com/w/cpp/thread/sleep_until](http://en.cppreference.com/w/cpp/thread/sleep_until)

因此，如果您有几项任务要执行，您的代码将如下所示：

```
int PerformTask(const std::chrono::time_point<Clock,Duration>& sleep_time, TaskParameters)
{
     sleep_until(sleep_time);
     PerformTask(TaskParameters);
} 
```

希望有帮助，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T04:16:54.527

您没有指定您使用的环境（操作系统、API 等），因此您得到的任何答案都必须是相当笼统的。

从你关于启动一个线程并让它休眠一段时间然后设置一个共享变量的示例中，听起来你想要做的是让多个线程在特定时间都做一些特殊的事情，对吗？

如果是这样，一种简单的方法是在生成线程之前选择警报时间，以便每个线程可以提前知道何时执行特殊操作。然后只需将每个线程编码为“看时钟”并在指定时间执行操作即可。

但是，假设您事先不知道警报应该在什么时候响起。在那种情况下，我认为您需要的是一种线程间通信机制。一旦您有办法让一个线程将信号/消息发送到另一个线程，您就可以使用它来告诉目标线程何时该执行警报操作。

有各种 API 可以做到这一点，但我喜欢使用的方式（因为它是跨平台可移植的并且使用标准 BSD 套接字 API）是在生成每个线程之前创建一个完全本地的套接字连接。在 Unix/Posix 下，你可以很容易地通过调用 socketpair() 来做到这一点。在 Windows 下没有要调用的 socketpair() 函数，但您可以通过通常的网络调用（socket()、bind()、listen()、accept() 为一个套接字滚动自己的 socketpair()，然后是 socket( ) 和 connect() 创建另一个套接字并将其连接到第一端）。

一旦你有一对连接的套接字，你的父线程只保留第一个套接字，而新生成的线程只保留第二个套接字。瞧，现在您的父线程和子线程可以通过套接字相互通信。例如，如果您的父线程希望子线程做某事，它可以在其套接字上发送（）一个字节，子线程将在其套接字上接收该字节，反之亦然，如果子线程想告诉父线程做一点事。

这样，父线程可以产生一堆线程，然后在警报时间到达时在每个线程的套接字上发送一个字节。与此同时，子线程可能正在工作并通过非阻塞的 recv() 调用轮询他们的套接字，或者如果他们更喜欢在等待警报时睡觉，他们可以在 select() 或 recv() 或其他内部阻塞。

请注意，如果您不想，则不必通过套接字对发送所有跨线程数据；通常我只是锁定一个互斥体，将命令对象添加到 FIFO 队列，解锁互斥体，然后发送一个字节。当子线程接收到该字节时，它会通过锁定相同的互斥体、将命令对象从 FIFO 队列中弹出、解锁互斥体，然后执行命令来做出响应。这样，您可以使用共享内存向子线程“发送”任意大量数据，而无需通过套接字发送大量字节。发送的一个字节仅充当唤醒子线程的“信号”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-21T01:30:38.730

**使用 boost::asio 实现计时器**

这是我们在项目中使用的定时器类，女巫项目处理 4Gbit/s 互联网流量（约 3.0-400 万定时器）。计时器适用于最一般的工作。

计时器.h

```
/*
 * Timer
 * Licensed under Apache
 *
 * Author: KaiWen <wenkai1987@gmail.com>
 * Date: Apr-16-2013
 *
 */
#ifndef TIMER_H
#define TIMER_H

#include <boost/asio.hpp>
#include <boost/thread.hpp>
#include <boost/shared_ptr.hpp>
#include <boost/function.hpp>
#include <boost/unordered_map.hpp>

typedef boost::asio::deadline_timer* timer_ptr;

namespace bs = boost::system;

class timer;
class timer_node;

class tm_callback {
public:
    explicit tm_callback(boost::function<void(timer_node&)>& f) : m_f(f)
    {
    }

    void operator()(timer_node& node, const bs::error_code& e) {
        if (!e)
            m_f(node);
    }
private:
    boost::function<void(timer_node&)> m_f;
};

class timer_node {
    friend class timer;
public:
    timer_node() {}
    timer_node(timer_ptr p, int ms, boost::function<void(timer_node&)> f) :
        m_tptr(p), m_ms(ms), m_callback(f)
    {
    }

    void reset(unsigned int ms = 0, boost::function<void(timer_node&)> f = 0) {
        if (ms)
            m_tptr->expires_from_now(boost::posix_time::milliseconds(ms));
        else
            m_tptr->expires_from_now(boost::posix_time::milliseconds(m_ms));

        if (f)
            m_tptr->async_wait(boost::bind<void>(tm_callback(f), *this, _1));
        else
            m_tptr->async_wait(boost::bind<void>(tm_callback(m_callback), *this, _1));
    }
private:
    timer_ptr m_tptr;
    int m_ms;
    boost::function<void(timer_node&)> m_callback;
}; 
```

计时器.cpp

```
/*
 * Timer
 *
 * Licensed under Apache
 *
 * Author: KaiWen <wenkai1987@gmail.com>
 * Date: Apr-16-2013
 *
 */
#include "timer.h"
#include <boost/bind.hpp>
#include <boost/date_time/posix_time/ptime.hpp>

namespace ba = boost::asio;

timer::timer(int thread_num) : m_next_ios(0), m_size(0) {
    for (int i = 0; i < thread_num; i++) {
        io_service_ptr p(new ba::io_service);
        work_ptr pw(new ba::io_service::work(*p));
        m_ios_list.push_back(p);
        m_works.push_back(pw);
    }

    pthread_spin_init(&m_lock, 0);
}

timer::~timer() {
    pthread_spin_destroy(&m_lock);
}

void timer::run() {
    for (size_t i = 0; i < m_ios_list.size(); i++)
        m_threads.create_thread(boost::bind(&ba::io_service::run, &*m_ios_list[i]))->detach();
} 
```

如果愿意，可以将 timer.cpp 与 timer.h 结合起来，这样就只有一个头文件了。一个简单的用法：

```
#include <stdio.h>
#include "timer.h"

timer t(3);

void callback(timer_node& nd) {
    std::cout << "time out" << std::endl;
    t.del_timer(nd);
}

int main(void) {
    t.run();

    t.add_timer(5000, callback);    // set timeout 5 seconds

    sleep(6);

    return 0;
} 
```

**实现线程专用定时器**

上面的计时器有一个锁，导致程序不是*很快*。你可以实现你的欧文线程特殊定时器，不使用锁，不阻塞，比上面的定时器更胖，但这需要一个“驱动程序”并且很难实现。这是我们实现它的一种方式：

```
pkt = get_pkt();
if (pkt) {
    now = pkt->sec;
    timer.execut_timer(now);
} 
```

现在，这里没有锁，并且无阻塞并提高您的性能，我们用它来处理 10GBit/s 的互联网流量（大约 8.0-900 万个计时器）。但这是实现依赖。希望能帮到你。

# ruby-on-rails - 试图关注一本书，但没有生成我的表格，这是为什么呢？

> ID：14669242
> 
> 赞同：1
> 
> 时间：2013-02-03T03:31:41.883
> 
> 标签：ruby-on-rails, ruby

试图关注一本书，但没有生成我的表格，这是为什么呢？这是我的 new.html.erb

```
<h1>New ad</h1>

<% form_for :ad,:url=>{:action=>'create'} do |f| %>
    <p><b>Name</b><br /><%= f.text_field :name %></p>

    <p><b>Description</b><br /><%= f.text_area :description %></p>

    <p><b>Price</b><br /><%= f.text_field :price %></p>

    <p><b>Seller</b><br /><%= f.text_field :seller_id %></p>

    <p><b>Email</b><br /><%= f.text_field :email %></p>

    <p><b>Img url</b><br /><%= f.text_field :img_url %></p>
    <p><%= f.submit "Create" %></p>
<% end %> 
```

这是我的 ads_controller

```
class AdsController < ApplicationController
    def show
    @ad = Ad.find(params[:id])
    end

    def stats
    @seller = Seller.find(params[:id])
    end

    def index
    @ads = Ad.find(:all)
    end

    def new
    @ad = Ad.new
    end
end 
```

我的路线是

```
resources :ads 
```

这就是我得到的全部

[http://imgur.com/Zkyn9wL](http://imgur.com/Zkyn9wL)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T03:36:46.150

`<% form_for`应该是`<%= form_for`，否则将不会呈现表单模板。

# html - Is //sub.sitename.com/thing/ standard?

> ID：14669243
> 
> 赞同：2
> 
> 时间：2013-02-03T03:31:45.007
> 
> 标签：html, browser, standards

> **Possible Duplicate:**
> [Is it valid to replace http:// with // in a <script src=“http://…”&gt;?](https://stackoverflow.com/questions/550038/is-it-valid-to-replace-http-with-in-a-script-src-http)

I just saw `//sub.sitename.com/thing/` in a url. Is this standard? I would assume it keeps the scheme (http vs https) when going to the other site but I don't know. Is this standard? or a sin in the html world?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T03:45:42.390

答案是肯定的，这是由[RFC 3986](http://www.ietf.org/rfc/rfc3986.txt) § 4.2 标准化的：

> 相对引用利用分层语法（第 1.2.3 节）来表示相对于另一个分层 URI 的名称空间的 URI 引用。
> 
> [...]
> 
> 以两个斜杠字符开头的相对引用称为网络路径引用；这种引用很少使用。

# php - Does APC cache .ini files?

> ID：14669245
> 
> 赞同：1
> 
> 时间：2013-02-03T03:32:27.473
> 
> 标签：php, apc, ini

I am deciding whether or not to use .ini format vs. standard PHP variables/constants in a file holding my app's configuration information. One of my considerations is APC's ability to cache the ini file. If it can, I assume it will speed up my app, as well as reduce reading the config file from the disk on each page load...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:53:54.037

不正常。APC 仅缓存作为 PHP 代码加载和执行的文件。`.ini`文件不是 PHP 代码，因此它们不会自动缓存。

不过，您的应用程序可以在 APC 变量缓存中存储它想要的任何内容，包括`.ini`文件的内容。

# windows-phone-7 - 如何强制背景颜色+如何更改“固定到启动”的图标

> ID：14669249
> 
> 赞同：0
> 
> 时间：2013-02-03T03:32:58.157
> 
> 标签：windows-phone-7

我试图提交我的第一个 wp7 应用程序，但由于区域 7.1 而被拒绝，这显然与某些用于固定的图标有关。

我不知道他们的应用程序是否还有其他问题（我以为我已经满足了所有要求）并且他们只是在他们失败的第一件事后停止测试。

我从在线阅读中了解到，用户可以更改应用程序的背景颜色，这也会导致很多人失败。

我怎么能强迫他们不能这样做。我不知道如何自己更改背景颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:42:56.417

关于用于固定的图标，要求是在固定项目时禁用此图标。您不需要让用户从应用程序中取消固定图标，他们可以在主屏幕上执行此操作。因此，只需检查项目是否已固定，如果是，请禁用应用程序栏中的图标（我假设您在应用程序栏中有它）。您可以使用代码检查它：

```
((ApplicationBarIconButton)button).IsEnabled = ShellTile.ActiveTiles.FirstOrDefault(x => x.NavigationUri.ToString().Contains("?value=" + value)) == null ? true : false; 
```

我不太明白第二个问题，但如果您希望您的应用程序在白色/黑色主题下都很好，只需为您想要保持一种静态颜色的所有项目（如文本块）设置前景色。如果您将在 XAML 代码中使用它，则更改背景主题不会影响您的应用程序。

# vb.net - vb.net中的自动增量nvarchar值

> ID：14669252
> 
> 赞同：0
> 
> 时间：2013-02-03T03:33:58.590
> 
> 标签：vb.net, increment, nvarchar

我的表中有一个**UserID**字段，我需要在我的应用程序中获取该值，并且每当我想添加新记录时，它应该**按值 '1' 递增**。

所以这就是我试图从我的表中获取**最后一个 ID的方式。**

**例如**，我的值为**“A000”**，我需要将该值增加“1”，使其变为**“A001”**，依此类推……在**PinnyM**指出的“A999”之后，它应该变为**'A1000'**。

我不想从数据库编写任何存储过程或任何其他方式。我想使用我现有的代码以更简单的方式来完成它。

```
 Dim strConnection As String = "Data Source=.\SqlExpress;Initial Catalog=Subscription;Integrated Security=True"
 Dim con As New SqlConnection(strConnection)
 con.Open()
 Dim comm As New SqlCommand
 comm.CommandText = "SELECT MAX(UserID) FROM Customers"
 comm.Connection = con
 Dim MaxUserID As Object = comm.ExecuteScalar()
 txtID.text=MaxUserID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:12:13.140

我通过这种方式设法使其工作：

```
Public Function IncrementString(ByVal Sender As String) As String
    Dim Index As Integer
    For Item As Integer = Sender.Length - 1 To 0 Step -1
        Select Case Sender.Substring(Item, 1)
            Case "000" To "999"
            Case Else
                Index = Item
                Exit For
        End Select
    Next
    If Index = Sender.Length - 1 Then
        Return Sender & "1" '  Optionally throw an exception ?
    Else
        Dim x As Integer = Index + 1
        Dim value As Integer = Integer.Parse(Sender.Substring(x)) + 1
        Return Sender.Substring(0, x) & value.ToString()
    End If
End Function 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-03T03:55:26.440

基于以上评论，我建议：

```
comm.CommandText = "SELECT 'A' + RIGHT('000', CAST((MAX(primary_key) + 1) as nvarchar(255)), 3) FROM Customers" 
```

这是做什么的：

*   获取最后一个key并加1
*   转换为 nvarchar
*   必要时用 0 填充（最多 3 个位置）

我绝对*不会*尝试使用基于字符的键来执行此操作，因为它`UserID`似乎已构建。另外，请注意，这不是原子的，并且不能保证另一个连接不会在您之前插入一行。所以它确实返回了一个可能实际上并不正确的乐观值。如果这对您不起作用，请考虑让 IDENTITY 为您完成工作并在使用创建行后获取值`SCOPE_IDENTITY()`

# php - 使用 preg_match 重复模式

> ID：14669256
> 
> 赞同：0
> 
> 时间：2013-02-03T03:35:03.553
> 
> 标签：php, preg-match

我希望能够验证下面的字符串以允许反引号之间的数据无限次，只要它后面跟着一个逗号，如果它不是逗号必须是“）”。空格只允许在反引号之外，不在其中。

我对正则表达式没有经验，所以我不知道如何允许重复模式。以下是我到目前为止的模式。

谢谢

**更新**

```
// first 3 lines should match
$lines[] = "(`a-z0-9_-`,`a-z0-9_-`,`a-z0-9_-`,`a-z0-9_-`)";
$lines[] = "( `a-z0-9_-`, `a-z0-9_-` ,`a-z0-9_-` , `a-z0-9_-` )";
$lines[] = "(`a-z0-9_-`, 
    `a-z0-9_-` 
    ,`a-z0-9_-` ,`a-z0-9_-`)";

// these lines below should not match
$lines[] = "(`a-z0-9_-``a-z0-9_-`,`a-z0-9_-`,`a-z0-9_-`)";
$lines[] = "(`a-z0-9_-``a-z0-9_-`,`a-z0-9_-`.`a-z0-9_-`";

$pattern = '/~^\(\s*(?:[a-z0-9_-]+\s*,?\s*)+\)$~/';

$result = array();

foreach($lines as $key => $line)
{
        if (preg_match($pattern, $line))
        {
            $result[$key] = 'Found match.';
        }
        else
        {
            $result[$key] = 'Not found a match.';
        }
}

print("<pre>" . print_r($result, true). "</pre>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:57:51.317

你很亲密。看起来你想要这个：

```
$pattern = "~^\(\s*`[a-z0-9_-]+`\s*(?:,\s*`[a-z0-9_-]+`\s*)*\)$~"; 
```

您的正则表达式的两个问题是：

1.  你有两组分隔符（斜线和波浪号）——只选择一个并坚持下去。我个人的偏好是括号，因为这样你就不必“仅仅因为分隔符”而转义任何东西，而且它也帮助我记住整个匹配是匹配数组中的第一个条目。

2.  通过使逗号可选，你允许你不想要的东西。解决方案确实涉及重复自己一点，但它更准确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T17:56:54.570

这是一个通用的重复模式：

```
preg_match_all("/start_string([^repeat_string].*?)end_string/si", $input, $output);
var_dump($output); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T03:48:53.710

好吧，您对括号之间数据的匹配规则不是很清楚，并且您并没有真正指定是否要捕获任何内容，所以...我根据您的代码上下文进行了最佳猜测，希望这会适合您的需求。

**编辑**：修复了代码块，因此它会显示模式中的反引号，还将分隔符从 ~ 更改为 / 因为 OP 对此感到困惑

```
$pattern = '/^\((\s*`[a-z0-9_-]+`\s*[,)])+$/'; 
```

# python - timeit 在 Python 中抛出 keyerror

> ID：14669261
> 
> 赞同：0
> 
> 时间：2013-02-03T03:37:16.230
> 
> 标签：python, timeit

我正在尝试使用 timeit 为一个简单的 Python 方法计时，但我不断收到以下错误

```
File "<timeit-src>", line 6, in inner
KeyError: 'tree' 
```

如下所示，代码创建了一个“树”对象，然后我尝试在 Timer 对象中传递该对象。我想这就是问题所在。

请注意，如果我改为将 binarytree.mkthing(0,10) 传递给 Timer，则代码有效。然而，这样做每次都会调用 mkthing。我只想调用一次然后重用它。

我该怎么做呢？

```
if __name__=="__main__":

    tree = mkthing(0,10)

    t1=timeit.Timer("binarytree.traverse_asc(locals()['tree'],binarytree.printout)","import binarytree")
    print t1.repeat(2, 3) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:50:04.563

你可以这样做： `from __main__ import tree`在设置代码中：

```
t1 = timeit.Timer("binarytree.traverse_asc(tree,binarytree.printout)",
                  setup = "import binarytree; from __main__ import tree") 
```

或者更好的是，将事物 ( `tree`) 的制作全部移到设置代码中：

```
t1 = timeit.Timer("binarytree.traverse_asc(tree,binarytree.printout)",
                  setup = "import binarytree; tree = mkthing(0,10)") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T03:50:22.880

timeit.Timer 评估您在 timeit 模块中传递的语句。它无法访问树变量。

The [question](https://stackoverflow.com/questions/5086430/how-to-pass-parameters-of-a-function-when-using-timeit-timer) is somewhat related and should help you get the gist.

# c++ - 尝试构建仅递归“标尺”时的堆栈溢出/异常（无循环！）

> ID：14669263
> 
> 赞同：0
> 
> 时间：2013-02-03T03:37:45.547
> 
> 标签：c++, exception, recursion

我不得不设计一个只使用递归（无循环）的标尺。用户输入刻度线的标尺长度和深度（高度）。我设法使用简单的 for 和 while 循环很好地构建了它，但是当我尝试将其转换为递归时，我遇到了一些麻烦。在运行文件结束时，我得到一个堆栈溢出和第一次机会异常，但是，就在错误杀死它之前，我得到了正确的输出。我一直在使用测试用例长度：4 和深度：5，长度：12 和深度：3。

如果有人知道我在递归工作中搞砸了多少，我会全神贯注。

```
#include <iostream>
#include <string>

using namespace std;
void solve (int, int, int, string, int);

int main()
{
    int depth, length;
    cout << "Enter a ruler length: ";
    cin >> length;
    cout << endl << "Enter a marking depth: ";
    cin >> depth;

    int i = 0;
    string ruler = "";
    int size = length * pow(2, (depth-1));

    solve(length, depth, i, ruler, size);

    int x;
    cin >> x;

    return 0;
}

void solve (int length, int depth, int i, string ruler, int size)
{
    if (depth > 0)
    {

        int inc = pow(2, depth-1);

        if (i <= (size))
        {   
            if (i % inc == 0) {
                cout << "|";
            }

            if (i % inc != 0) {
                cout << " ";                
            }

            solve (length, depth, ++i, ruler, size);

        }
        cout << "\n";

    }

    solve (length, depth-1, 0, ruler, size);    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T03:40:43.937

您需要`solve`递归函数的返回点，例如：

```
void solve (int length, int depth, int i, string ruler, int size)
{

    if (depth > 0)
    {
        int inc = pow(2, depth-1);

        if (i <= (size))
        {   
            if (i % inc == 0) {
                cout << "|";
            }

            if (i % inc != 0) {
                cout << " ";                
            }

            solve (length, depth, ++i, ruler, size);
        }
        cout << "\n";            
    }
    else
    {
         return; //<<<---- return out  
    }

    solve (length, depth-1, 0, ruler, size);    
} 
```

# jquery - 是否可以使用 jquery 更改 $(document) 宽度？

> ID：14669267
> 
> 赞同：3
> 
> 时间：2013-02-03T03:38:46.987
> 
> 标签：jquery, html, css

我是 jQuery 和 HTML 的新手，所以这可能是一个非常愚蠢的问题，但我只是好奇是否可以使用 jQuery 更改文档或窗口宽度？

这样的事情可能吗：

```
$(document).ready(function() {
   $(document).width( $(window).width() );
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T03:54:07.130

据我了解， $(document).width() 是只读的，不会更新宽度值。你可能有更好的运气：

```
$('body').width( $(window).width() ); 
```

尽管除非您的文档/页面的根元素的样式设置为大于视口（将消除水平滚动），否则这将无效。

# html - CSS 条形菜单

> ID：14669270
> 
> 赞同：1
> 
> 时间：2013-02-03T03:39:24.417
> 
> 标签：html, css

我正在尝试解决用户界面的逻辑一段时间。您可以想象的全新，并且仍在深入研究 CSS 内容。

我正在尝试创建一个“条形”菜单，其中内部具有固定宽度，左侧带有徽标，右侧带有菜单项。这是一张图片来告诉你我的意思：

![上栏 - 居中菜单](../Images/db066331a52d3f63ebc0f3924abd51bc.png)

这是我走了多远： http: [//cssdeck.com/labs/31sxhkiv](http://cssdeck.com/labs/31sxhkiv)

问题是：我不知道如何将菜单项放在栏的浮动中心部分的右侧。我尝试将它们浮动到右侧（顺序更改）并给它们一个绝对价值......他们都没有帮助。

我确定我错过了一点，所以想试一试！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T03:45:04.063

```
#content{
    background-color: gray;
    height: 25px;
    width: 600px;
    margin-left: auto;
    margin-right: auto;
    position:relative;    /* ADD THIS LINE */
}
#menu{                    /* ADD THIS STYLES */
    position:absolute;
    right:0px;
    top:0px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T03:49:04.113

我真的不认为绝对定位是您想要的，因为以后添加新项目很痛苦。[这是我的你的 cssdeck 的叉子](http://cssdeck.com/labs/actg2xh0)。我认为这更接近你想要的，但你必须打那个电话。我的主要想法是制作您的菜单项`inline-block`，`position:relative`以便项目以正确的顺序和布局呈现。即使使用相对定位，您也可以使用`margin`.

## 编辑

我创建了一个新的分叉，我认为这次它挽救了我的工作。另外，我决定继续并离开`float`范式，因为这可能是您想要的更多。诀窍是设置`#menu`为向右浮动，而菜单项向左浮动。我没想过要添加它，但您可能需要添加一个新行来清除浮动行为：

```
#menu:after { clear:float; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T03:41:00.657

您可以使用 a `ul`with `li`items`display: inline`并将其绝对定位在相对定位的容器中。

# c# - c#多线程时如何访问其他类中的Form.cs方法

> ID：14669272
> 
> 赞同：0
> 
> 时间：2013-02-03T03:39:57.267
> 
> 标签：c#, multithreading, class

> **可能重复：**
> [C# 下载器：我应该使用线程、BackgroundWorker 还是 ThreadPool？](https://stackoverflow.com/questions/6913487/c-sharp-downloader-should-i-use-threads-backgroundworker-or-threadpool)
> [C#，如何在当前线程中找到在其他线程中创建的东西？](https://stackoverflow.com/questions/11257238/c-sharp-how-reach-something-in-current-thread-that-created-in-other-thread)

所以我有以下代码

下载器.cs

```
class Downloader
{  
    private WebClient wc = new WebClient();
    public void saveImages(string picUrl, string path)
    {
                this.wc.DownloadFile(picUrl, path + p);
                Form1.Instance.log = picUrl + " is downloaded to folder " + path + ".";
    }
} 
```

Form1.cs / Windows 窗体

```
public partial class Form1 : Form
{
    static Form1 instance;
    public static Form1 Instance { get { return instance; } }

    protected override void OnShown(EventArgs e)
    {
        base.OnShown(e);
        instance = this;
    }

    protected override void OnClosed(EventArgs e)
    {
        base.OnClosed(e);
        instance = null;
    }
    public string log
    {
        set { logbox.AppendText(value); } // Logbox is Rich Text Box
    }
    private void ThreadJob()
    {
        Downloader r = new Downloader();
        r.saveImages("http://c.org/car.jpg","c:/temp/");
    }
    private void download_Click(object sender, EventArgs e)
    {
        ThreadStart job = new ThreadStart(ThreadJob);
        Thread thread = new Thread(job);
        CheckForIllegalCrossThreadCalls = false;
        thread.Start();
    }
} 
```

我需要`Form1.Instance.log = picUrl + " is downloaded to folder " + path + ".";`在没有`CheckForIllegalCrossThreadCalls`设置的情况下开始工作，`false`因为我听说这是做事的坏方法。

PS:: 部分代码缺失但我认为相关信息是有的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:54:11.260

而不是`saveImages`成为一个`void`方法并修改表单，`saveImages`应该返回它计算的字符串值并允许表单修改自己：

```
public string saveImages(string picUrl, string path)
{
            this.wc.DownloadFile(picUrl, path + p);
            return picUrl + " is downloaded to folder " + path + ".";
} 
```

现在，您真正需要的是一种在后台线程中执行长时间运行的任务并使用结果更新 UI 的方法。该类`BackgroundWorker`是专门为此目的而设计的，并且在 winform 应用程序中使用比直接处理线程要容易得多。

你只需要创建一个`BackgroundWorker`，在事件中设置它需要做的工作，`DoWork`然后在事件中更新 UI `RunWorkerCompleted`。

在这种情况下，`DoWork`只需要调用`saveImages`然后将 设置`Result`为返回值，然后完成的事件就可以添加`Result`到富文本框中。这`BackgroundWorker`将确保完成的事件将由 UI 线程运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T03:55:19.127

请参阅有关 BackgroundWorker 或 Control.Invoke 的文档。记住谷歌是你的朋友。

# angularjs - $resource $delete 不会删除 Resource 对象

> ID：14669273
> 
> 赞同：1
> 
> 时间：2013-02-03T03:40:26.220
> 
> 标签：angularjs

我有一个 AngularJS [`$resource`](http://docs.angularjs.org/api/ngResource.%24resource)：

```
App.factory("pjApi", ["$resource", function($resource) {
  return $resource("/api/:user/:action/:post_id/", {action:"posts"});
}]); 
```

在我的控制器中，我基本上是这样使用它的：

```
$scope.deletePost = function(post_id) {
    $scope.posts.forEach(function(post) {
        if (post_id === post.id)
            post.$delete({user:"tjb1982",action:"delete",post_id:post.id});
    });
} 
```

服务器给出状态为 200、application/json 和 body:"1" 的响应

Angular 对此响应所做的是删除已删除的 Resource 对象实例，但随后 Angular 将其替换为来自服务器的响应（即“1”），就像我正在创建或更新一样：

`posts [Resource { 0="1", $$hashKey="00D", $get=function(), more...}]`

等等

所以我的模板更新了这个新的（大部分是空白的）信息，这是我试图避免的。我尝试从服务器不返回任何内容或“0”——不返回任何内容会导致资源实例被完全保留，返回“0”的结果与返回“1”的结果相同。

为了让这个 Resource 实例被完全删除以便我的模板正确呈现，Angular 正在寻找什么响应？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-03T04:08:15.450

调用`$delete`资源只向服务器发送 HTTP 请求；如果您想从某些客户端表示（例如数组）中删除该项目，您必须自己这样做。

因此，对于您的示例，您可以尝试以下操作：

```
$scope.deletePost = function(post_id) {
  $scope.posts.forEach(function(post, index) {
    if (post_id === post.id) {
      post.$delete({user:"tjb1982",action:"delete",post_id:post.id}, function() {
        $scope.posts.splice(index, 1);
      });
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-15T22:03:52.910

```
// instance is cleared on success
post.$delete({/* request data */}, function() {
    // remove empty element from array
    $scope.posts = $scope.posts.filter(function(el) {
        return el.id !== undefined;
    });
}); 
```

# php - 有人在 Yii 框架中使用过 tel: 协议吗？

> ID：14669277
> 
> 赞同：0
> 
> 时间：2013-02-03T03:41:12.907
> 
> 标签：php, yii, tel

以下代码在运行时被剥离：

```
$PhoneHomeLink=CHtml::link($this->phone_home,'tel:'.$this->phone_home); 
```

假设家庭电话号码是 999-555-1212，输出显示：

```
<a>999-555-1212</a> 
```

发生了什么事了：

```
<a href="tel:999-555-1212">999-555-1212</a> 
```

嗨，我认为这很容易，但我想这比我计划的要多。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T02:15:11.650

任何有兴趣的人都可以，我在几个不同的地方测试了这个函数并且它工作了，所以我发现它是我最终的实现。

我想使用以下代码在 CGridview 中创建 tel: 链接：

```
'home'=>array('type'=>'html','name'=>'home_phone','value'=>'CHtml::link($data->phoneHome,"tel:".$data->phoneHome)','htmlOptions'=>array('width'=>'120')), 
```

在挠了挠头，挖了又挖之后，我发现了另一种叫做 raw 的“类型”，它在这种情况下很有效。我只需要更改该行中的一项，如下所示：

```
'home'=>array('type'=>'raw','name'=>'home_phone','value'=>'CHtml::link($data->phoneHome,"tel:".$data->phoneHome)','htmlOptions'=>array('width'=>'120')), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-12T11:46:12.687

对于 Yii 2.x，不推荐使用 CHtml()。

使用 HTML()。这是我在 DetailView::widget() 中用于呼叫电话号码的内容。

```
 ['attribute' => 'CW_phone',
            'format' => 'raw',
            'value' => Html::a($model->CW_phone,"tel:".$model->CW_phone),
        ], 
```

# c++ - C++ 简单字符检查

> ID：14669280
> 
> 赞同：0
> 
> 时间：2013-02-03T03:42:02.600
> 
> 标签：c++, .net, visual-studio, visual-c++, char

无论输入是否正确，下面的代码都不起作用。如果输入正确，则 if 语句由于某种原因仍会执行。任何快速的建议都会有所帮助。

```
char status;

cout<<"Please enter the customer's status: ";
cin>>status;

if(status != 'P' || 'R')
{

    cout<<"\n\nThe customer status code you input does not match one of the choices.\nThe calculations that follow are based on the applicant being a Regular customer."<<endl;

    status='R';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T03:42:42.580

是`if(status != 'P' || status != 'R')`。

即使这样，逻辑也有点不对劲。您不能像那样链接逻辑 OR（或任何逻辑运算符），您可能应该使用其他类似的东西`if(status != 'P' && status != 'R')`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T03:43:06.853

```
if ('R') 
```

总是计算为真，所以`if(status != 'P' || 'R')`总是计算为真。

改变

```
if(status != 'P' || 'R') 
```

至

```
if(status != 'P' && status != 'R') 
```

或者

```
if(status == 'P' || status == 'R') 
```

最后一个版本可能会让您更清楚地了解您想要什么？

# java - hadoop映射器读取多行

> ID：14669282
> 
> 赞同：0
> 
> 时间：2013-02-03T03:42:16.083
> 
> 标签：java, input, hadoop, mapper

hadoop 新手 - 我正在尝试以块的形式读取我的 HDFS 文件，例如 - 一次 100 行，然后使用映射器中的 apache OLSMultipleLinearRegression 对数据进行回归。我正在使用此处显示的此代码读取多行：[http ://bigdatacircus.com/2012/08/01/wordcount-with-custom-record-reader-of-textinputformat/](http://bigdatacircus.com/2012/08/01/wordcount-with-custom-record-reader-of-textinputformat/)

我的映射器定义为：

```
public void map(LongWritable key, Text value,Context context) throws java.io.IOException ,InterruptedException
{
    String lines = value.toString();
    String []lineArr = lines.split("\n");
    int lcount = lineArr.length;
    System.out.println(lcount); // prints out "1"
    context.write(new Text(new Integer(lcount).toString()),new IntWritable(1));
} 
```

我的问题是：为什么 lcount==1 来自 system.out.println？我的文件由“\n”分隔，并且我在记录阅读器中设置了 NLINESTOPROCESS = 3。我的输入文件格式为：

```
y x1 x2 x3 x4 x5
y x1 x2 x3 x4 x5
y x1 x2 x3 x4 x5
... 
```

如果我一次只读取 1 行，我将无法执行多重回归，因为回归 API 需要多个数据点......谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:15:53.283

`String.split()`将正则表达式作为参数。你必须双重逃避。

```
String []lineArr = lines.split("\\n"); 
```

# python - < > 在python中用beautifulsoup解析html时改为<和>

> ID：14669283
> 
> 赞同：7
> 
> 时间：2013-02-03T03:42:27.397
> 
> 标签：python, html, parsing, beautifulsoup

在使用 Beautifulsoup 处理 html 时， < 和 > 被转换为`&lt;`and `&gt;`，由于标记锚都被转换，整个汤失去了它的结构，有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T10:38:08.640

设置`formatter=None`可能会有所帮助（[http://www.crummy.com/software/BeautifulSoup/bs4/doc/#output-formatters](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#output-formatters)），但这可能表明您的 HTML 无效。

如果这不起作用，您能否提供一些重现问题的示例代码和 HTML？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-06T00:44:04.740

这可能是由于无效字符（由于字符集编码/解码），因此 BeautifulSoup 在解析输入时存在问题。我通过将我的字符串直接传递给 BeautifulSoup 来解决它，而不进行任何编码/解码。就我而言，我试图自己将 UTF-16 转换为 UTF-8。

# wordpress - 在 Wordpress 3.5 中更改自定义帖子的永久链接

> ID：14669288
> 
> 赞同：0
> 
> 时间：2013-02-03T03:44:02.190
> 
> 标签：wordpress, .htaccess, nginx, rewrite, permalinks

如果这个问题已经解决，请原谅我，但我搜索了这里提供的解决方案似乎都与我的情况不符。

我有一个插件程序来创建一个名为“练习”的自定义帖子类型。当我第一次创建帖子时，插件会将标题分配给帖子 URL。例如：

```
mysite dot com/?exercise=pushups 
```

永久链接设置是默认设置`mysite dot com/?p=123`，但插件以某种方式将自定义帖子标题分配给 URL，使其如上所示。

通过常规帖子，我可以更改帖子标题并更改永久链接。但是，我遇到的问题是我无法在初始创建后使用自定义帖子编辑 URL 标题。例如，我希望这样：

```
mysite dot com/?exercise/%postname%/ 
```

我可以`postname`直接从帖子管理页面进行编辑。

有谁知道可能导致这种情况的原因以及我可以在哪里进行更改？程序员建议它需要 nginx 重写配置（他们不熟悉。有什么办法可以改变它，以便我可以在创建练习后编辑标题？我尝试更改永久链接设置，但这使得自定义插件没有功能。

提前致谢！

# php - 您如何使用 php 和正则表达式使链接点击可点击？

> ID：14669293
> 
> 赞同：0
> 
> 时间：2013-02-03T03:45:17.397
> 
> 标签：php, regex, preg-replace

我想解析我们的网址并使它们可点击..即使前面没有 http://

例如，如果我们有

```
$text = "Hello this is a sample.com so go and parse that and also http://www.sample.com" 
```

它会使 sample.com 和[http://www.sample.com](http://www.sample.com)都可以点击。我将如何使用 php 中的正则表达式来做到这一点？

# protocol-buffers - 链接 protobuf 库的问题

> ID：14669299
> 
> 赞同：2
> 
> 时间：2013-02-03T03:46:13.207
> 
> 标签：protocol-buffers

我对makefile不熟悉，这是我的makefile

```
CC = gcc

TARGET = sample_client sample_server

CFLAGS += -g -I/usr/include
LDFLAGS += -g -lprotobuf-c -L/usr/lib

all:    $(TARGET)

$(TARGET):  lsp.o lspmessage.pb-c.o

%.o:    %.c
    $(CC) -c $(CFLAGS) $< -o $@

clean:
    rm -f *.o 
    rm -f $(TARGET) 
```

当我运行 make -f Make 时，我得到了这些错误。

```
**@**:./$ make -f Makefile
gcc -g -I/usr/include  -g -lprotobuf-c -L/usr/lib  sample_client.c lsp.o lspmessage.pb-c.o   -o sample_client
lspmessage.pb-c.o: In function `lspmessage__get_packed_size':
./lspmessage.pb-c.c:19: undefined reference to `protobuf_c_message_get_packed_size'
lspmessage.pb-c.o: In function `lspmessage__pack':
./lspmessage.pb-c.c:26: undefined reference to `protobuf_c_message_pack'
lspmessage.pb-c.o: In function `lspmessage__pack_to_buffer':
./lspmessage.pb-c.c:33: undefined reference to `protobuf_c_message_pack_to_buffer'
lspmessage.pb-c.o: In function `lspmessage__unpack':
/home/**/Downloads/CSCE662/HW/skeleton-code/lspmessage.pb-c.c:41: undefined reference to `protobuf_c_message_unpack'
lspmessage.pb-c.o: In function `lspmessage__free_unpacked':
./lspmessage.pb-c.c:50: undefined reference to `protobuf_c_message_free_unpacked'
collect2: error: ld returned 1 exit status
make: *** [sample_client] Error 1 
```

我不知道原因。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T08:13:57.870

C 链接器的工作原理是只搜索文件之后的库。

尝试像这样重新排序该行：

`gcc -g -I/usr/include -g sample_client.c lsp.o lspmessage.pb-c.o -o sample_client -L/usr/lib -lprotobuf-c`

您可以先从命令行运行它以查看问题是否已解决。之后，要修复您的 Makefile，请参阅这个问题[How to use LDFLAGS in makefile](https://stackoverflow.com/questions/13249610/how-to-use-ldflags-in-makefile)。

# c++ - C++ 数组中的问题

> ID：14669302
> 
> 赞同：4
> 
> 时间：2013-02-03T03:46:45.130
> 
> 标签：c++, arrays

我正在尝试做一些功课，但遇到了问题。我的作业是

• 使用for 循环，打印数组的内容。

输出应如下所示：

打印阵列内容

ABCDEFGHIJKLMNOPQRSTU VWXYZ

我有我的代码，它正在工作。然而，在我的字母表末尾出现了一堆随机字符和符号。你们有没有看到我做错了什么？

这是我的代码。

```
#include <iostream>
using std::cin;
using std::cout;
using std::endl;

// main FUNCTION BEGIN PROGRAM EXECUTION
int main()
{
// ALPHABET ARRAY DECLARATIONS
char Letters [26] = { 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'};

for (int i = 0; i < 27 ; i++)
{
cout<< "PRINTING CONTENTS OF ARRAY" << endl;
cout<< "===============================" << endl;
cout<< Letters << " ";
cout<< endl;
break;
}
return 0 ;
} // ***END main FUNCTION*** 
```

基本上，简单地说问题是它像我想要的那样打印 AZ，但还在 Z 之后打印一堆随机符号。有什么想法吗？因为我是新手，所以我相信这可能很简单。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T03:49:22.367

当您将字符数组传递给输出流时，该数组必须以空值结尾。你的数组不是空终止的；这就是为什么你最后会得到额外的垃圾。

但是，这不是您解决方案的主要问题：您需要*索引*字母，如下所示：

```
cout << Letters[i] << " "; 
```

最后，对于 26 个字母，索引从 0 到 25，因此循环继续条件应该是`i < 26`、`i != 26`或`i <= 25`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T03:49:13.907

要删除“一堆随机字符和符号”，`NUL`请在末尾添加一个`Letters`：

```
char Letters [] = { 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 
                    'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 
                    'U', 'V', 'W', 'X', 'Y', 'Z', 0}; 
```

这将打印***26***次字母表，这可能不是您想要的。*编辑：*之前的陈述错误——我错过了你的`break;`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T03:54:34.590

在数组末尾添加一个空值。c 函数检查空字符以终止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T03:47:50.303

数组索引从`0`to开始`N`，Letters 中有 26 个字符，索引从`0`to开始`25`：

```
cout<< "PRINTING CONTENTS OF ARRAY" << endl;
cout<< "===============================" << endl;

for (int i = 0; i < 26 ; i++)
{
    cout<< Letters[i] << " ";
}
cout<< endl; 
```

`break;`通常用于在特定条件下中断`for`或循环。`while`你在循环中`for`循环`finishes smoothly, you don't need a`break`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T06:45:09.013

C++ 中的 char 数组以空值结尾，并从基于零的索引开始，因此当您初始化数组时

```
char Letters [26] = { 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'}; 
```

您没有考虑到 '\0' 需要 1 个空间来终止导致未定义行为的数组

由于您将 Letters[0] 打印到 Letters[26]，因此在您编写 Letters[26] 时再次导致未定义的行为，因此出现垃圾值

# php - “查看电子邮件有问题吗？在线查看电子邮件？” Codeigniter 电子邮件中的唯一链接

> ID：14669304
> 
> 赞同：0
> 
> 时间：2013-02-03T03:47:33.960
> 
> 标签：php, codeigniter, email, newsletter

我不知道从哪里开始这项任务，所以我正在寻找关于如何去做这件事的想法的答案。

当新用户在我的 Codeigniter 网站上创建帐户时，我会向他/她发送一封关于注册的电子邮件（非常典型）。这是我发送电子邮件的方式...

```
...

$subject = 'Welcome to __________, ' . $firstName . '!';
$emailData = array(
    'name' => $name,
    'blah' => $blah,
    'blah' => $blah,
    // etc.
);
$html_email = $this->load->view('emails/signup_html_view', $emailData, true);
$text_email = $this->load->view('emails/signup_text_view',  $emailData, true);
$this->email->from('team@_________.com', '________ Team');
$this->email->to($to);
$this->email->subject($subject);
$this->email->message($html_email);
$this->email->set_alt_message($text_email);
$this->email->send();

... 
```

如您所见，我将数据传递给这些视图以发送电子邮件。在电子邮件视图的顶部，我有一个链接，上面写着“*查看电子邮件时遇到问题？单击此处在线查看。* ”。这是时事通讯、注册电子邮件等电子邮件的常见做法，以便用户可以在线查看电子邮件，如果它呈现怪异或出现问题。

**我迷路的地方是如何生成唯一的“ *...在线查看。* ”链接，以便当用户单击它时，他们会看到电子邮件的在线版本，并且在线版本仍然保留所有数据给它？我是否需要创建一个单独的控制器或者处理它的最佳方法是什么？如何生成该唯一链接？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:15:27.943

@扎克，

是的，你要做的是：

1）创建一个可以显示此电子邮件的单独控制器，就像您制作页面一样

2）我假设用户已经在数据库中创建，但尚未激活或未采取措施登录。因此，备份一点，当您制作用户记录时，还要创建一个随机标签并存储它。

现在，在电子邮件链接中，将其设置为 www.mysite.com/welcome/hashtag

这样，您就可以让他们获得唯一的记录，而无需使用他们可以用来查看其他人的 id

当然，这个欢迎页面不需要他们登录。可能你给他们一个提交（可能在他们填写更多信息之后），然后激活他们的帐户

希望这与您要求通过的内容足够接近

# node.js - 如何在 kue 中检索具有特定状态的工作？

> ID：14669306
> 
> 赞同：9
> 
> 时间：2013-02-03T03:47:47.987
> 
> 标签：node.js, kue

我正在使用[kue](http://learnboost.github.com/kue/ "奎")作为我的作业队列，并且我想在不使用 GUI 的情况下知道还剩下多少作业，有多少作业失败等。如何检索此类信息？

例如，在开始处理作业队列几分钟后，我想将迄今为止失败的所有作业的状态更新为“非活动”，以便重新启动它们。

我可以在 stackoverflow 上找到的唯一相关问题是[this](https://stackoverflow.com/questions/14280962/node-js-kue-how-to-restart-failed-jobs)，但是，它在处理某个事件时触发某个事件后一次处理一项作业。我的担忧有所不同，因为我有兴趣检索数据库中具有特定状态的所有作业。

[这个问题](https://stackoverflow.com/questions/9706846/how-to-remove-completed-jobs-older-than-x-from-kue)的答案提到了 kue 库的 .complete 函数，它检索数据库中所有已完成的作业。其他可能的工作状态是否有类似的功能？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-27T09:01:47.953

我通过浏览 kue 源代码找到了解决方案。以下代码实现了我所需要的：

```
var redis = require ('redis'),
    kue = require ('kue'),
    redisClient = redis.createClient(6379, "127.0.0.1");

kue.redis.createClient = function () {
    return redisClient;
};

kue.app.listen(3000); 

kue.Job.rangeByType ('job', 'failed', 0, 10, 'asc', function (err, selectedJobs) {
    selectedJobs.forEach(function (job) {
        job.state('inactive').save();
    });
}); 
```

作为参考，这里是相关的 kue 源代码：

/队列/job.js:123：

```
/**
 * Get jobs of `type` and `state`, with the range `from`..`to`
 * and invoke callback `fn(err, ids)`.
 *
 * @param {String} type
 * @param {String} state
 * @param {Number} from
 * @param {Number} to
 * @param {String} order
 * @param {Function} fn
 * @api public
 */

exports.rangeByType = function(type, state, from, to, order, fn){
  redis.client().zrange('q:jobs:' + type + ':' + state, from, to, get(fn, order));
}; 
```

**Kue源代码表明：**

*   `type`是工作类型
*   `from`,`to`是索引的作业范围（例如，您可以指定从索引 0 到 10 的加载作业，总共 11 个作业。）
*   `order`指定获取作业的顺序。默认为`asc`。您也可以按以下方式排序`desc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-10T11:41:42.843

以下作品使用预先存在的`queue`对象，因此没有 Japrescott 在已接受答案的评论中提到的双重 Redis 连接问题。

```
queue.cardByType("notifications", "complete", function( err, count ) {
  console.log(count);
}); 
```

随意替换为有效状态，以下是有效状态列表。

```
inactive
complete
active
failed
delayed 
```

# facebook - facebook是否需要真正抓取一个页面才能让OG正常工作？

> ID：14669313
> 
> 赞同：1
> 
> 时间：2013-02-03T03:48:44.940
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我正在尝试复制 Amazon.com 正在做的一些事情。一个人结账后，他们就可以在社交网络上分享他们刚刚购买的产品。

然而，在我的网站上，facebook 永远不会抓取最终的预订页面，因为它们是在用户输入信用卡信息后动态驱动的。

我知道 linter 可以用来强制解除缓存……但这真的不是这里的故事……

我当然是指存储在元标记中的 OG 信息。

```
 <meta property="og:title" content="The Rock"/>
    <meta property="og:type" content="movie"/>
    <meta property="og:url" content="http://www.imdb.com/title/tt0117500/"/>
    <meta property="og:image" content="http://ia.media-imdb.com/rock.jpg"/>
    <meta property="og:site_name" content="IMDb"/>
    <meta property="fb:admins" content="USER_ID"/>
    <meta property="og:description"
          content="A group of U.S. Marines, under command of
                   a renegade general, take over Alcatraz and
                   threaten San Francisco Bay with biological
                   weapons."/> 
```

我还没有找到任何明确的文档来说明 facebook 是否真的需要在 opengraph 工作之前抓取一个页面。如果上面的内容不在可抓取的页面上，它还能工作吗？

如果不？有没有解决的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:24:31.063

是的，要让 Like-Button 和 Open Graph-Metadata 起作用，Facebook**肯定必须抓取您的页面**（否则如何获取元标记的内容？）。这是关于 OG-metatags 的（旧）文档，它提供了一个很好的概述：

[https://developers.facebook.com/docs/opengraphprotocol/](https://developers.facebook.com/docs/opengraphprotocol/)

这个想法是，图中的每个对象都表示在一个唯一的 URL 上，其中包含 OG 元数据。对于您的应用程序，这意味着动态生成的预订页面必须可供爬虫使用，例如[http://yourapp.com/booking.php?id=45345](http://yourapp.com/booking.php?id=45345)您将输出以下标签：

```
<meta property="og:title" content="Booking No. 45345"/>
<meta property="og:type" content="order"/>
<meta property="og:description" content="..."/>
<meta property="og:url" content="http://yourapp.com/booking.php?id=45345"/> 
```

该 URL 的 Like-Button 生成的故事将包含返回订单页面的链接。

现在，问题是，您真的希望预订页面可以公开且永久可用吗？如果答案是“否”，那么 Like-Button 和 OG-metatags 可能不是在您的应用程序中共享的正确选择。您应该考虑让您的用户在 Feed 对话中分享故事，它可以让您制作个人故事：

[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

# javascript - JS 不工作。引用正确，但不起作用

> ID：14669319
> 
> 赞同：2
> 
> 时间：2013-02-03T03:49:31.610
> 
> 标签：javascript, html

[http://mogswamp.com/testing/](http://mogswamp.com/testing/)

单击“单击以查看激励措施”标题应使框下拉。我不知道出了什么问题。我一直在摆弄这个，并且不知所措。我真的很感激一些帮助。

```
<script language="JavaScript" type="text/javascript" src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
<script language="JavaScript" type="text/javascript" src="/testing/extend.js"></script> 
```

扩展.js

```
(function(){
  $('.incentives').hide();

  $('.incentives-click').on("click", function(){
    $('.incentives').fadeToggle();
  });
})(); 
```

如果您需要我提交其他任何内容，请询问，但在页面源代码中应该很容易看到。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:53:49.567

看起来您的代码在脚本和/或页面完全加载之前正在执行。试试这个：

```
$(document).ready(function() {
  $('.incentives').hide();

  $('.incentives-click').on("click", function(){
    $('.incentives').fadeToggle();
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T03:53:32.810

*要么把你的 javascript 放在你应该*的页面底部，而不是放在`head`，或者让它与它之后添加的内容一起工作。尝试**[事件委托](http://api.jquery.com/on/)**，或者等待[**DOM 就绪**](http://api.jquery.com/ready/)

# regex - 使用正则表达式解析字符串中的变量

> ID：14669320
> 
> 赞同：1
> 
> 时间：2013-02-03T03:49:38.140
> 
> 标签：regex, coldfusion, coldfusion-8

ColdFusion 的正则表达式有点问题。

我有一个字符串：

```
Hi my name is {firstname}. and i live in {towncity} my email address is {email} 
```

我想知道的是如何在我的字符串中找到包含在一组`{}`括号中的所有字符串？我想将所有匹配的字符串拆分为一个数组，以便可以使用查询数据的结果。

这也是用于处理匹配字符串中的字符串以合并可变数据的常用模式吗？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T14:24:50.560

### 简单的答案

要查找所有用大括号括起来的字符串，可以使用[rematch](http://cfdocs.org/rematch)和简单表达式`\{[^{}]+\}`

### 解释

每个大括号前的反斜杠`\`用于转义它们，并让它们充当字面大括号（否则它们具有特殊含义）。

`[^`...`]`是一个否定字符类，表示匹配不是其中包含的字符之一的任何单个字符，并且贪婪`+`量词告诉它匹配前一项中的尽可能多的字符，但至少匹配一个字符。

因此`[^{}]+`在大括号之间使用意味着它不会匹配嵌套或不匹配的大括号。（虽然 using`\{.*?\}`可以匹配两个左大括号。注意：the`*?`是一个惰性量词，它不匹配任何内容（如果可能），但根据需要匹配多个。）

### 扩展答案

但是，由于您说结果来自查询，因此仅匹配您正在处理的值的一种方法是使用查询的 ColumnList 来形成一个表达式：

```
`\{(#ListChangeDelims(QueryName.ColumnList,'|')#)\}` 
```

这会将 ColumnList 更改为以竖线分隔的列表 - 一组备选方案，由括号分组 - 即生成的模式将如下所示：

```
 \{(first_name|towncity|email)\} 
```

（该组的内容进入捕获组 1）。

要实际填充文本（而不仅仅是匹配），您可以做类似的事情，除了这里不需要正则表达式，只需在循环列时直接[替换：](http://cfdocs.org/replace)

```
<cfloop index="CurColumn" list=#QueryName.ColumnList#>
    <cfset text = replace( text , '{#CurColumn#}' , QueryName[CurColumn][CurrentRow] , 'all' ) />
</cfloop> 
```

（由于这是一个标准替换，没有必要用反斜杠转义大括号；它们在这里没有特殊含义。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T05:30:55.423

使用该`reMatch(reg_expression, string_to_search)`功能。

Coldfusion 10 中的正则表达式的详细信息在[这里](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSc3ff6d0ea77859461172e0811cbec0a38f-7ffb.html)。（我相信 CF8 中的正则表达式大致相同。）

使用以下代码。

```
<cfset str = "Hi my name is {firstname}. And I live in {towncity} my email address is {email}.">
<cfoutput>Search string: <b>#str#</b><br />Search result:<br /></cfoutput>
<cfset ret = reMatch("\{[\w\s\(\)\+\.@-]+\}", str)>
<cfdump var ="#ret#"> 
```

这将返回一个包含以下条目的数组。

*   {名}
*   {城镇}
*   {电子邮件}

CF 正则表达式中的`[]`括号定义一个字符集来匹配单个字符。您`+`在方括号后放置一个或多个字符，以匹配`[]`. 例如，要**匹配一个或多个**大写字母，您可以编写`[A-Z]+`.

如上面链接所述，CF 定义了匹配各种字符的快捷方式。我在代码中使用的是：`\w`匹配字母数字字符或下划线，`\s`匹配空白字符（包括空格、制表符、换行符等）。

要匹配以下特殊字符`+*?.[^$({|\`，您可以通过在它们前面写反斜杠来转义`\`它们。

破折号是一个例外`-`，它不能用反斜杠转义。因此，要将其用作文字，只需将其放在字符集的最后，就像我在上面所做的那样。

例如，使用上面的正则表达式，您可以从以下字符串中提取字符。

```
<cfset str = "Hi my name is { John Galt}. And I live in {St. Peters-burg } my email address is {john@exam_ple.com}."> 
```

结果将是一个包含以下条目的数组。

*   {约翰高尔特}
*   {英石。圣彼得堡 }
*   {john@exam_ple.com}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T04:28:36.367

可能有更好的方法来做到这一点，但使用类似的东西`rematch( '{.*?}', yourstring )`会给你所有匹配的数组。

为了将来参考，我使用出色的[RegExr](http://gskinner.com/RegExr/)进行了此操作，这是一个非常好的在线正则表达式检查器。完全披露，它不是*专门*针对 ColdFusion 的，但它是测试事物的好方法。

# angularjs - ng 在 Angular.js 指令中代表什么

> ID：14669322
> 
> 赞同：280
> 
> 时间：2013-02-03T03:49:48.590
> 
> 标签：angularjs

Angular.js 使用了几个前缀`ng`如下的指令：

`ng`（基本指令）

```
ng-switch
ng-repeat
ng-view 
```

我想知道是否有人知道`ng`代表什么，因为我在文档中找不到它。它是某事的首字母缩写词吗？

* * *

## 回答 #1

> 赞同：285
> 
> 时间：2013-02-03T03:58:23.127

前缀`ng`代表“Angular;” Angular 附带的所有内置指令都使用该前缀。同样，建议您*不要在**自己的*指令中使用`ng`前缀，以避免在未来版本的 Angular 中可能发生名称冲突。

 *从[常见问题解答](http://docs.angularjs.org/misc/faq)：

> **为什么这个项目叫“AngularJS”？为什么命名空间叫“ng”？**
> 
> 因为 HTML 有 Angular 括号，而“ng”听起来像“Angular”。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-11-16T19:18:56.030

我猜你们中间没有多少星际迷航迷。“ng”代表*下一代*，因为 Angular 是下一代`HTML`.

“增强”`HTML`我会说 xD。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2015-04-06T02:52:07.037

我认为他们采用了 Angular 名称的任意子部分并将其用作名称空间：

不**正常**的

加上“NG”听起来不像 Angular；不管你怎么说。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-11-30T09:19:05.883

`ng` is an abbreviation of A**ng**ular.

Programmers don't like to code long names, so they keep it short and that makes it a bit more cryptic. If you look at Assembler, you know what I mean with ADD, JMP etc. JQuery is the name, the `$` is what you use. Angular is the name, `ng` is what you use.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-11-30T23:32:59.323

NG 代表“**下一代**”。

它在许多应用程序中用作后缀，特别是在**Linux**中。示例：syslog-ng 和 Aircrack-ng。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-06-21T16:56:07.590

根据[AngularJS 杂项常见问题解答](https://docs.angularjs.org/misc/faq#why-is-this-project-called-angularjs-why-is-the-namespace-called-ng-)：

**Why is this project called "AngularJS"? Why is the namespace called "ng"?**
Because HTML has Angular brackets and "ng" sounds like "Angular".

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-15T13:04:31.147

This guy is a Google superstar, I think ng is a part of their culture.

[https://en.wikipedia.org/wiki/Andrew_Ng](https://en.wikipedia.org/wiki/Andrew_Ng)*

# php - 如果 Wordpress 查询字符串为空，则重定向

> ID：14669336
> 
> 赞同：0
> 
> 时间：2013-02-03T03:52:19.047
> 
> 标签：php, regex, wordpress

我在我的`functions.php`文件中使用以下代码向我的 Wordpress 安装添加了一个查询字符串：

```
function add_query_vars($aVars) {
    $aVars[] = "username";
    return $aVars;
}

add_filter('query_vars', 'add_query_vars');

function add_rewrite_rules($aRules) {
    $aNewRules = array(
        '([^/]+)/manage' => 'index.php?pagename=manage&username=$matches[1]',
        '([^/]+)/settings' => 'index.php?pagename=settings&username=$matches[1]',
    );
    $aRules = $aNewRules + $aRules;
    return $aRules;
}

add_filter('rewrite_rules_array', 'add_rewrite_rules'); 
```

但是，如果查询字符串为空，我不想加载页面模板`username`，而是想重定向到主页。例如：

```
website.com/myusername/manage 
```

...将加载页面模板

```
website.com/manage 
```

...将重定向回家。

我可以使用 Wordpress 的重写引擎来做到这一点，还是应该采取另一种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T11:41:11.850

好吧，我会使用这段代码：

```
function redirect_to_homepage( $query ) {   
    //page manage and settings does NOT exits
    if ( $query->is_main_query() && ( $query->query_vars['name'] == 'manage' || $query->query_vars['name'] == 'settings' ) ){       
        if( ( !array_key_exists( 'username', $query->query_vars ) || ( array_key_exists( 'username', $query->query_vars ) && trim($query->query_vars['username']) == '' ) ) ) {
            wp_redirect( get_bloginfo('url') );
            exit;
        }   
    }
    //page manage and settings does exits
    if ( $query->is_main_query() && ( $query->is_page('manage') || $query->is_page('settings') ) ){
        if( ( !array_key_exists( 'username', $query->query_vars ) || ( array_key_exists( 'username', $query->query_vars ) && trim($query->query_vars['username']) == '' ) ) ) {
            wp_redirect( get_bloginfo('url') );
            exit;
        }   
    }
}
add_action( 'parse_query', 'redirect_to_homepage' ); 
```

# oracle - Oracle SQL 转换为连接运算符样式

> ID：14669347
> 
> 赞同：0
> 
> 时间：2013-02-03T03:54:57.983
> 
> 标签：oracle, join

该查询有效，但我被要求以连接运算符样式重写它。

```
SELECT pr.ProdName, pr.ProdPrice
FROM Product pr, OrderTbl ord, OrdLine ol, Customer cu
WHERE pr.ProdNo=ol.ProdNo
AND ord.OrdNo=ol.OrdNo
AND cu.CustNo=ord.CustNo
AND cu.CustNo='C2388597'
AND ord.OrdDate BETWEEN '01-Jan-04' AND '31-Jan-04'; 
```

我刚开始使用 Oracle，所以我不确定如何。我想我应该使用 INNER JOINS，但我不知道具体如何。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:59:24.860

不过，您绝对应该阅读有关[连接](http://en.wikipedia.org/wiki/Join_%28SQL%29)的信息，但这里是如何将这种交叉连接样式转换为内部连接

```
SELECT pr.ProdName, pr.ProdPrice
FROM Product pr
 INNER JOIN OrdLine ol ON pr.ProdNo=ol.ProdNo
 INNER JOIN OrderTbl ord ON ord.OrdNo = ol.OrdNo
 INNER JOIN Customer cu ON cu.CustNo=ord.CustNo 
WHERE cu.CustNo='C2388597'
AND ord.OrdDate BETWEEN '01-Jan-04' AND '31-Jan-04'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T04:03:30.263

```
SELECT pr.ProdName, pr.ProdPrice
FROM Product pr
 INNER JOIN OrdLine ol ON pr.ProdNo=ol.ProdNo
 INNER JOIN OrderTbl ord ON ord.OrdNo = ol.OrdNo
 INNER JOIN Customer cu ON cu.CustNo=ord.CustNo
WHERE cu.CustNo='C2388597'
AND ord.OrdDate BETWEEN '01-Jan-04' AND '31-Jan-04'; 
```

[这是供您继续阅读的`Joins`：](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)。

# html - HTML5 是否需要“字符集”元标记？

> ID：14669352
> 
> 赞同：30
> 
> 时间：2013-02-03T03:55:21.797
> 
> 标签：html, character-encoding, w3c, meta

W3C *“ [HTML5 与 HTML4 的区别](http://www.w3.org/TR/html5-diff/#character-encoding)”*工作草案指出：

> 对于 HTML 语法，作者需要声明字符编码。

“需要”是什么意思？

`charset`显然，浏览器仍然会在没有元标记的情况下呈现 HTML5 。如果没有指定编码，浏览器将使用哪种编码？

基本上，我想知道是否真的需要包含`<meta charset="">`，或者浏览器是否在 99% 的情况下都会使用正确的编码。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-03T04:15:40.843

没有必要包括`<meta charset="blah">`. 正如规范所说，服务器也可以使用 HTTP`Content-Type`标头或通过在下载文件的开头包含 Unicode BOM 来指定字符集。

`Content-Type`如果没有指定，今天的大多数 Web 服务器将在 HTML 文本数据的标头中发回一个字符集。如果 Web 服务器没有发回带有`Content-Type`标头的字符集*并且*文件不包含 BOM*并且*页面不包含`<meta charset="blah">`声明，则浏览器将具有通常基于主机语言设置的默认编码电脑。如果这与文件的实际字符编码不匹配，则某些字符将无法正确显示。

浏览器会在 99% 的时间内使用正确的编码吗？如果您的页面是 UTF-8，可能。如果没有，可能不会。

W3C 提供了一个[文档，概述了三种方法的优先规则，](http://www.w3.org/International/questions/qa-html-encoding-declarations#answer)说明顺序是 HTTP 标头、BOM，然后是文档内规范（元标记）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-24T23:04:58.867

根据 Google PageSpeed 浏览器扩展，在元元素中声明字符集“禁用 IE8 的先行功能”，这显然会强制它以串行方式下载所有内容。

我的理解是，这`<meta charset-"utf-8">`是有效 HTML5 所必需的，但这就是我开始在这里浏览的原因。

该规范草案对我来说似乎很清楚，并且由于我通过添加 HTTP 标头`.htaccess`，我将开始将其省略...即使我很想不这样做，只是让 IE8 用户遭受更多痛苦。

谢谢。

@Jules Mazur 你对这些观点有什么参考吗？我所做的大部分工作都是 SEO 和可访问性对我来说很重要，如果是这种情况，我非常愿意离开元声明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-21T23:27:13.190

尽可能早地指定文档的字符集很重要（通过`Content-Type`标题或`META`标签），否则浏览器将在解析文档之前确定编码，这可能[会对页面加载时间产生负面影响](http://eprev.org/2017/01/04/the-importance-of-html-character-encoding/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-20T15:43:15.493

自 1999 年大部分[W3C](https://en.wikipedia.org/wiki/World_Wide_Web_Consortium)规范问世以来，标准机构一直在推动供应商（服务器、浏览器和文档应用程序的制造商）遵循编码规则并使用元标记来帮助确定意图。

但由于贪婪、糟糕的浏览器设计和其他因素，多年来很少有人能始终如一地遵循规范。结果，我们有一个破碎的系统。一些供应商，如[Mozilla](https://en.wikipedia.org/wiki/Mozilla_Foundation)，自 2001 年以来一直遵循元标记标准，而其他供应商，如微软和谷歌，则没有。

出于这个原因，所有 Web 开发人员都应该在他们的所有网页的构建方式中使用应急设计，并使用元标记和其他标准标记来支持网页构建中使用的正确字符编码，尽管对此类标记的支持不一致。换句话说，同时使用元标记类型（`<meta charset="UTF-8">`和`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`），尽管实际上这样的标记很少会决定现代网页如何被现代用户代理编码或解释。

确定浏览器在解释页面时使用什么编码的主要驱动程序通常基于创建网页时使用的软件（如上所述），越来越多的是 UTF-8。这只是[Unicode的标准编码方案](https://en.wikipedia.org/wiki/Unicode)目前在创建 HTML5 网站时很流行。然后，用户的浏览器可能会跳过元标记并检查页面以猜测作者的编码意图。然而，主要驱动程序是 Web 服务器，其 HTTP 响应标头通常会告诉浏览器使用的编码类型，对于 HTML5 页面来说，它始终是 UTF-8。因为旧网页中使用的旧 ASCII（前 127 个字符）在 99.99% 的情况下完全可以转换为 UTF-8，所以浏览器对所有内容都进行了 UTF-8 编码和解码。由于所有这些后备设计，如今通常根本不需要使用元标记，并且在现代网页解析中完全被忽略了。

元标签的更多历史......在 2000 年，整个元标签辩论比今天糟糕得多。使用嵌入了 Unicode 字符的[HTML 4](https://en.wikipedia.org/wiki/HTML#HTML_4)通常意味着页面既不能正确编码也不能正确呈现，尽管服务器 HTTP 标头、使用字符实体和元标记只是因为当时的现代浏览器**没有**遵循标准并且没有查看元标签、页面编码或编码字符实体。这就是为什么要在失败的标准采用中与所有复杂的支持和系统组合作斗争，最好使用所有技术组合来增加正确呈现网页的“可能性”。

当时我们吸取了宝贵的教训：公司永远不会始终如一地遵循*Web 标准。*当私营行业没有一致采用标准时，最好始终以各种可能的形式使用所有形式和版本的标记，以最大限度地利用这些标准的各种形式在许多不同的设备上正确查看您的页面，即使今天它们无关紧要（因为浏览器现在解析页面并自行确定编码）。

这应该是所有网页设计所使用的策略，直到我们以某种方式强制普遍采用 Web 标准，现在移动用户代理和[HTML5](https://en.wikipedia.org/wiki/HTML5)越来越不可能，这迫使我们再次放弃许多本可以更好地执行的 XML 标准标记设计。

# ruby - 删除 ruby 中的远程文件夹

> ID：14669355
> 
> 赞同：0
> 
> 时间：2013-02-03T03:55:34.680
> 
> 标签：ruby, rubygems

我有一个 ruby​​ 脚本，它在我的本地机器上运行，它定期从服务器 ftps 一个文件夹。现在，一旦我从本地机器上运行的 ruby​​ 下拉文件夹，我想删除该文件夹。有可能这样做吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:06:11.380

我可以看到我们可以使用 sftp.remove("/path/to/file").wait 删除文件和 sftp.rmdir("/path/to/directory").wait 删除文件夹。

# jsf - Primefaces p：overlayPanel在右键单击时显示，防止浏览器上下文菜单？

> ID：14669356
> 
> 赞同：0
> 
> 时间：2013-02-03T03:55:36.627
> 
> 标签：jsf, primefaces, overlay, contextmenu

```
<p:overlayPanel showEvent="contextmenu" ..> 
```

我喜欢在右键单击时显示叠加层。浏览器还显示其上下文菜单。有没有办法阻止浏览器显示其上下文菜单？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:10:08.410

您可以编写一个 javaScript 函数来禁用浏览器 contextMenu。像这样的东西

```
<script type="text/javascript">
document.oncontextmenu=function(){return false}; 
</script> 
```

供您参考，如果用户禁用 JavaScript，此技术将失败。

# php - Yii 中的 'users'=>array('admin') 是如何设置的？

> ID：14669358
> 
> 赞同：0
> 
> 时间：2013-02-03T03:55:55.340
> 
> 标签：php, yii

我有一个功能`WebUser` `getIsAdmin`

```
public function getIsAdmin() {
    $user = $this->loadUser(Yii::app()->user->id);
    if ($user === null) {
        return false;
    }
    return intval($user->user_level_id) == AccountModule::USER_LEVEL_ADMIN;
} 
```

但是我在控制器中的规则不起作用

```
array('allow',
      'actions'=>array('index','create','upload'),
      'users'=>array('admin'),
), 
```

我在哪里设置所以用户是`admin`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T04:23:48.050

访问控制过滤器中的`users`属性仅检查用户名，即检查`Yii::app()->user->name=='admin'`. 在您的场景中，您可以使用该`expression`属性。仅当表达式评估为 true 时才授予访问权限。该`$user`变量可以在表达式中用作 的别名`Yii::app()->user`。所以你的条件是

```
array('allow',
      'actions'=>array('index','create','upload'),
      'expression'=>'$user->getIsAdmin()',
), 
```

# eclipse - 在 Eclipse 中为 PHP 导出语法着色

> ID：14669361
> 
> 赞同：1
> 
> 时间：2013-02-03T03:56:19.707
> 
> 标签：eclipse, import, export, preferences

我去了：

```
 Window / Preferences / PHP / Syntax Coloring 
```

然后对我正在处理的工作区进行了更改，然后我创建了一个新工作区，并希望导入保存在 php 语法着色中的那些首选项，因为它需要一个小时才能重新配置为所有颜色的相同首选项对于语法，但找不到如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T13:29:16.193

```
WORKSPACE_DIR/.metadata./plugins/org.eclipse.core.runtime/.settings/org.eclipse.php.ui.prefs 
```

如果您将它从一个工作区复制到另一个工作区，那么您将在两者中获得相同的语法着色设置。

# android - 清单文件如何将活动标签与活动文件链接

> ID：14669363
> 
> 赞同：0
> 
> 时间：2013-02-03T03:57:12.867
> 
> 标签：android

我刚开始阅读有关 android 开发的信息，并且正在使用 Eclipse。我的问题是 AndridManifest 文件如何知道使用来自活动标签的信息来调用哪个 xml 文件。例如，我刚刚添加了一个新活动并将其命名为 activity_two，结果 eclipse 为我生成了两个主文件`ActivityTwo.java`， `activity_activity_two.xml`. 它还将活动标签添加到清单文件中

```
 <activity
            android:name=".ActivityTwo"
            android:label="@string/title_activity_activity_two" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

现在我的问题是 eclipse 是如何知道这个标签关联的`activity_activity_two.xml`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T05:00:01.277

你在混合东西。

`ActivityTwo.java`

是您的活动，您将在其中添加应用代码。在您的清单中，您有一个`<manifest>`类似于以下的标签，带有一个包声明。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.pedal"
    android:versionCode="1"
    android:versionName="1.0" > 
```

如您所见，我的示例中的包是`com.example.pedal`.

然后你在你的`<Application>`标签中有一个或多个 Activity 声明。

```
 <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
       <activity
        android:name=".ActivityTwo"
        android:label="@string/app_name" >
    </activity>

</application> 
```

因此，要找到您的活动文件，它将使用您的活动名称加入包字符串：

`com.example.pedal.MainActivity`

在此示例中，有两个活动。Intent `<category android:name="android.intent.category.LAUNCHER" />` 定义了应用程序启动时将执行的活动。

如果您的`/src`结构中有不同的包，您可以使用完整的包名称引用它们，并在清单中使用类

```
<activity
            android:name="com.example.PackageTwo.ActivityTwo"
            android:label="@string/app_name" >
        </activity> 
```

`activity_activity_two.xml`

是一个布局文件。在那里，您将定义将在您的活动中显示的视图。它会是什么样子，哪些按钮，文本视图，无论您决定什么，正如@Procurares 上面回答的那样，这是使用以下定义的：

`setContentView(R.layout.activity_activity_two);`

[开发人员指南](http://developer.android.com/guide/components/activities.html)提供了关于活动如何工作的非常好的指南。

也回答你的评论。我不确定活动的名称是否在捆绑包中传递（但我怀疑）。那里包含的信息是关于活动状态的，以防需要重新创建。[这里](https://stackoverflow.com/questions/10810418/whats-oncreatebundle-savedinstancestate)有一篇关于这个主题的非常有用的帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T04:09:31.160

Eclipse 不知道任何活动的布局文件。
稍后，在`OnCreate`方法内部，您需要通过编写简单的行“给”Activity 她的布局文件：`setContentView(R.layout.activity_activity_two);`

# php - 我应该使用 $ 表示法还是使用范围解析运算符 :: 来调用 Fat Free 对象

> ID：14669364
> 
> 赞同：1
> 
> 时间：2013-02-03T03:57:26.877
> 
> 标签：php, fat-free-framework

> **可能重复：**
> [PHP 中 ::（双冒号）和 ->（箭头）有什么区别？](https://stackoverflow.com/questions/3173501/whats-the-difference-between-double-colon-and-arrow-in-php)

我在网上的例子中看到了人们使用 Fat Free Framework 两种方式，即：

```
echo $f3->get('varname'); 
```

对比

```
echo F3::get('varname'); 
```

显然，两者都有效。哪个更好？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:19:33.430

无论哪种方式都有效，仅取决于您的设置。Fat-free 的较新版本倾向于使用静态变量和函数，这通常是在线文档中显示的内容。再一次，由你决定。无论哪种方式都很好。使用静态版本允许您全局访问函数和变量，这就是我使用静态版本的原因。

# ssh - ssh 无论如何都会询问密码

> ID：14669366
> 
> 赞同：0
> 
> 时间：2013-02-03T03:57:47.840
> 
> 标签：ssh, passwords

这里的中级用户（至少我希望如此！）

抱歉，如果这是多余的，但我找了几个小时却找不到！

我正在尝试在运行 Ubuntu 10.04 的廉价笔记本电脑（Atom）上安装服务器。我生成了一个类似于 1 年前的 RSA 密钥（这就是我发表新帖子的原因，我想使用与我用来连接的另一台服务器相同的私钥）。公钥在服务器上的 ~/.ssh/authorized_keys 中，私钥在我本地笔记本电脑上的 .ssh 中，但是当我通过 ssh 连接时，它一直在询问我的密码。

任何帮助将不胜感激，

多谢，

将要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:00:04.127

[http://www.rebol.com/docs/ssh-auto-login.html](http://www.rebol.com/docs/ssh-auto-login.html)

从这个开始。然后请记住，生成的密钥是您想要在您尝试登录的任何机器上拥有的唯一密钥。希望有帮助。

# java - 在 NetBeans 上设置 GlassFish 服务器

> ID：14669369
> 
> 赞同：1
> 
> 时间：2013-02-03T03:58:48.740
> 
> 标签：java

我正在尝试转向 Java EE 以及 Web 服务和 JSF 应用程序。其中大多数都需要服务器。我知道从工具菜单安装 Glassfish。但是，即使我安装了 Glassfish 几次，我也遇到了同样的问题。

这是 NetBeans 上 WelcomeSOAP 的运行部署的输出窗口：

```
compile:
compile-jsps:
Starting GlassFish Server 3+
Could not connect to admin listener for GlassFish Server 3+.
Verify that NetBeans can make outbound connections to localhost:4848
C:\Documents and Settings\NetBeansProjects\WelcomSOAP\nbproject\build-impl.xml:1023: Deployment error: Could not connect to admin listener for GlassFish Server 3+.
Verify that NetBeans can make outbound connections to localhost:4848
See the server log for details.
BUILD FAILED (total time: 2 minutes 3 seconds) 
```

我已经多次从防火墙中解除对 NetBeans 的阻止……所以我认为这不是问题所在。另一件事是我的 NetBeans 上的 Glassfish 3+ 输出显示了大量的错误......就像我的屏幕上 10 英尺一样。

最后，我的 NetBeans 发出了一个弹出窗口，上面写着：

```
Verify that NetBeans can make outbound connections to localhost:4848 
```

# iphone - iPhone SDK：NSURL 字符串错误/% 符号对抗

> ID：14669372
> 
> 赞同：0
> 
> 时间：2013-02-03T03:59:17.460
> 
> 标签：iphone, ios, url, uiwebview

在我获取网址以访问网站的代码中，我遇到了警告。该应用程序仍会加载，但 url 不会加载 Web 视图。这是我的代码：

```
 NSString *strWebsiteUlr = [NSString stringWithFormat:@"https://login.live.com/login.srf?wa=wsignin1.0&rpsnv=11&ct=1359826314&rver=6.1.6195.0&wp=MBI_SSL&wreply=https:%2F%2Flogin.secure.co1.msn.com%2Fwlsignin.aspx%3Fru%3Dhttp%253a%252f%252"];
NSURL *url = [NSURL URLWithString:strWebsiteUlr];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[eMail loadRequest:requestObj]; 
```

使用此代码，我收到警告说：比数据参数更多的转换百分比。我猜它的意思是我的百分比符号与参数不对应；但是，这是 url 的一部分，当我尝试加载它时，webview 保持空白。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T04:07:57.127

在这种情况下您不需要使用`stringWithFormat:`，因为您没有尝试在字符串中插入任何值。将您的代码更改为以下内容：

```
NSString *strWebsiteUlr = @"https://login.live.com/login.srf?wa=wsignin1.0&rpsnv=11&ct=1359826314&rver=6.1.6195.0&wp=MBI_SSL&wreply=https:%2F%2Flogin.secure.co1.msn.com%2Fwlsignin.aspx%3Fru%3Dhttp%253a%252f%252";
NSURL *url = [NSURL URLWithString:strWebsiteUlr];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[eMail loadRequest:requestObj]; 
```

您也可以`strWebsiteUlr`完全跳过该变量，然后执行以下操作：

```
NSURL *url = [NSURL URLWithString:@"https://login.live.com/login.srf?wa=wsignin1.0&rpsnv=11&ct=1359826314&rver=6.1.6195.0&wp=MBI_SSL&wreply=https:%2F%2Flogin.secure.co1.msn.com%2Fwlsignin.aspx%3Fru%3Dhttp%253a%252f%252"]; 
```

如果您确实想在字符串中插入值，`stringWithFormat:`您可以使用另一个百分比来转义百分号，例如`%%`.

# php - 读取 YQL XML 文件时出错

> ID：14669375
> 
> 赞同：0
> 
> 时间：2013-02-03T03:59:27.357
> 
> 标签：php, xml, yql

我正在尝试从 YQL xml 文件中读取和显示一些值。XML 在这里：

[http://query.yahooapis.com/v1/public/yql?q=select%20](http://query.yahooapis.com/v1/public/yql?q=select%20) *%20from%20yahoo.finance.quotes%20where%20symbol%20in%20(%22YHOO%22)%0A%09%09&diagnostics =false&format=xml&env=http%3A%2F%2Fdatatables.org%2Falltables.env

我正在尝试使用的 PHP 文件如下。我回显的单词正在显示，但 XML 文件中没有变量值。

任何帮助将非常感激！谢谢，詹姆斯

代码：

```
<?php

$xml = simplexml_load_file('http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20(%22YHOO%22)%0A%09%09&diagnostics=false&format=xml&env=http%3A%2F%2Fdatatables.org%2Falltables.env');

// iterate over query result set
echo '<h2>YHOO</h2>';
$results = $xml->results;
foreach ($results->quote as $q) {
  echo '<p>';
  echo 'Ask: ' . $q->Ask['ask'];
  echo "\n";
  echo 'Average Daily Volume: ' . $q->AverageDailyVolume['adv'];
  echo '</p>';
}  
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:10:44.010

在尝试访问引用的值时，您犯了几个简单的错误。

**不正确**

*   `$q->Ask['ask']`
*   `$q->AverageDailyVolume['adv']`

**正确的**

*   `$q->Ask`
*   `$q->AverageDailyVolume`

[请参阅codepad.viper-7.com/0Mp7VN](http://codepad.viper-7.com/0Mp7VN)上的固定示例

# python - 从 Python 中删除 ()

> ID：14669383
> 
> 赞同：0
> 
> 时间：2013-02-03T04:01:15.307
> 
> 标签：python, sandbox

从这个网站：http: [//isisblogs.poly.edu/2012/10/26/escaping-python-sandboxes/](http://isisblogs.poly.edu/2012/10/26/escaping-python-sandboxes/)

通过删除模块和其他功能，可以在一定程度上保护 python 的环境。但是，该站点还展示了如何通过访问元组 () 来摆脱它。有什么办法也可以删除或禁用（）？

# c# - 使用 DataContractJsonSerializer 解析 JSON 然后得到错误无法评估表达式

> ID：14669388
> 
> 赞同：0
> 
> 时间：2013-02-03T04:02:58.457
> 
> 标签：c#, json, windows-phone-7

json数据是这样的

```
{"content": 
[{"url": "http://job.hust.edu.cn/show/recruitcouncil/recruitfair.htm?id=20830",
 "company": {"id": "50e25f89b041be4510f09cf8", "index": ["\u67d0", "\u91cd\u5e86\u5e02", "\u91cd\u5e86", "\u653f\u6cd5", "\u673a\u5173"], "name": "\u91cd\u5e86\u5e02\u67d0\u653f\u6cd5\u673a\u5173", "alias": []}, "starttime": 1357606832.0, "address": {"university": "\u534e\u4e2d\u79d1\u6280\u5927\u5b66", "city": "\u6b66\u6c49", "accurate": {"name": "\u5927\u5b66\u751f\u6d3b\u52a8\u4e2d\u5fc3", "longitude": 114.4141960144043, "latitude": 30.51835035703118, "id": "4f4858f1cea1755b6c000000"}, "detail": "\u5927\u5b66\u751f\u6d3b\u52a8\u4e2d\u5fc3302\u5ba4"}, "endtime": 1357615800.0, "id": "50e25f89b041be4510f09cfa"}, {"url": "http://job.hust.edu.cn/show/recruitcouncil/recruitfair.htm?id=20914", "company": {"id": "50ea9ef2b041be0b2669b246", "index": ["\u5e7f\u897f", "\u8d28\u76d1\u5c40", "\u8d28\u76d1"], "name": "\u5e7f\u897f\u8d28\u76d1\u5c40", "alias": []}, "starttime": 1357608654.0, "address": {"city": "\u6b66\u6c49", "university": "\u534e\u4e2d\u79d1\u6280\u5927\u5b66", "detail": "\u4e3b\u6821\u533a\u6559\u5de5\u6d3b\u52a8\u4e2d\u5fc3"}, "endtime": 1357615800.0, "id": "50ea9ef2b041be0b2669b248"}, {"url": "htt://job.hust.edu.cn/show/recruitcouncil/recruitfair.htm?id=20907", "company": {"id": "50ea9ef2b041be0b2669b243", "index": ["\u53d1\u5c55", "\u7535\u529b", "\u6c47", "\u96c6\u56e2", "\u4e30", "\u6c47\u8fbe\u4e30", "\u73e0\u6d77", "\u8fbe"], "name": "\u73e0\u6d77\u6c47\u8fbe\u4e30\u7535\u529b\u53d1\u5c55\uff08\u96c6\u56e2", "alias": []}, "starttime": 1357803004.0, "address": {"city": "\u6b66\u6c49", "university": "\u534e\u4e2d\u79d1\u6280\u5927\u5b66", "detail": "\u897f\u4e5d\u697c224\u5ba4"}, "endtime": 1357813800.0, "id": "50ea9ef2b041be0b2669b245"}, {"url": "htt://job.hust.edu.cn/show/recruitcouncil/recruitfair.htm?id=20717", "company": {"id": "50d07331b041be3b0b10f707", "index": ["\u89c1\u9762", "\u6bd5\u4e1a\u751f", "\u6bd5\u4e1a", "\u4f9b\u9700", "\u5c4a", "\u4f9b\u9700\u89c1\u9762", "\u4e1a\u751f", "\u9762\u4f1a", "\u89c1\u9762\u4f1a", "\u4f1a", "2013"], "name": "2013\u5c4a\u6bd5\u4e1a\u751f\u4f9b\u9700\u89c1\u9762\u4f1a", "alias": []}, "starttime": 1363654837.0, "address": {"university": "\u534e\u4e2d\u79d1\u6280\u5927\u5b66", "city": "\u6b66\u6c49", "accurate": {"name": "\u5149\u8c37\u4f53\u80b2\u9986", "longitude": 114.41835880279541, "latitude": 30.508552777754073, "id": "4f485921cea1755b6d00000f"}, "detail": "\u5149\u8c37\u4f53\u80b2\u9986"}, "endtime": 1363680000.0, "id": "50e25f89b041be4510f09cf7"}], "deleted": [], "count_query": 4} 
```

我的代码是

```
[DataContract]
public class Job
{
    [DataMember(Name = "url")]
    public string Url { set; get; }
    [DataMember(Name = "company")]
    public Company Company { set; get; }

    [DataMember(Name = "starttime")]
    public long StartTime { set; get; }
    [DataMember(Name = "address")]
    public Address Address { set; get; }
    [DataMember(Name="endtime")]
    public long EndTime { set; get; }
    [DataMember(Name="id")]
    public string Id { set; get; }

}

[DataContract]
public class Address
{
    [DataMember(Name = "university")]
    public String University { set; get; }
    [DataMember(Name = "city")]
    public String City { set; get; }
    [DataMember(Name="accurate")]
    public Accurate Accurate { set; get; }

    [DataMember(Name="detail")]
     public String Detail { set; get; }      
}

[DataContract]
public class Accurate
{
    [DataMember(Name = "name")]
    public string Name { set; get; }
    [DataMember(Name = "longitude")]
    public double Longitude { set; get; }
    [DataMember(Name="latitude")]
    public double Latitude { set; get; }

    [DataMember(Name = "id")]
    public string Id { set; get; }
    [DataMember(Name = "detail")]
    public string Detail { set; get; }

}
[DataContract]
public class Company
{
    [DataMember(Name = "id")]
    public String Id { set; get; }
    [DataMember(Name = "index")]
    public string[] Index { set; get; }
    [DataMember(Name = "name")]
    public String Name { set; get; }
    [DataMember(Name="alias")]
    public string[] alias { set; get; }

}

 public static T JsonToObject<T>(string json)
    {
       //json = str;
        if (!string.IsNullOrEmpty(json))
        {
            var ms = new MemoryStream(Encoding.UTF8.GetBytes(json));
            var ser = new DataContractJsonSerializer(typeof(T));
            return (T)ser.ReadObject(ms);
        }
        return default(T);
    }

     when I debug I get the result 
jsonDeserializer    = null  
KnownDataContracts = Could not evaluate expression
knownDataContracts  null 
```

我无法从此代码中获得任何结果，有人可以帮我解析这个 json，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:38:38.300

似乎 JSON 响应的某些值已被 unicode 转义。看看这篇[文章](https://stackoverflow.com/a/7885499/2030554)。我相信它会回答你的问题。

# javascript - 你如何强制节点模块的绝对路径？

> ID：14669390
> 
> 赞同：4
> 
> 时间：2013-02-03T04:03:42.840
> 
> 标签：javascript, node.js, titanium, jasmine-node

我有一个使用 CommonJS 模块样式的 Titanium 项目。但是，代码使用绝对路径，因此当它构建时，绝对路径会被沙箱化到应用程序目录。

```
var foo = require("/lib/module"); 
```

我想在命令行上运行一些测试并让 jasmine-node 工作。但是，当测试执行模块时，模块的 require 语句中将包含上述绝对路径。

有没有办法隔离（可能是 chroot）节点来解析到特定目录的绝对需要路径？如果有怎么办？

```
-- RepositoryRoot/
   |- app/
   |  \- Resources/
   |     |- app.js  # Has require("/lib/module1.js")
   |     \- lib/
   |        |- module1.js # Has require("/lib/module2.js")
   |        \- module2.js
   \- tests/
      \- module1.spec.js # Has require("../app/Resources/lib/module1")
                         # Or require("/lib/module1") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T10:57:30.207

在这里找到解决方案后，我学到了：对上述问题的简短回答是**你不能这样做**。Node 将绝对路径读取为绝对路径。所以简而言之，答案是将我的路径从绝对路径更改为*伪绝对*（相对）路径。[这是这篇博客文章](http://titaniumninja.com/testing-titanium-mobile-applications-with-jasmine-and-sinon-part-i/)的引述，它提供了一些启示：

> `require()`CommonJS的[Titanium](https://jira.appcelerator.org/browse/TIDOC-514)实现有问题，并且不能正确支持相对路径。当尝试将 jasmine-node 测试运行器集成到具有最小复杂目录树的项目中时，这代表了一个主要问题。
> 
> 该问题的一个可能解决方案是不在 `require()`Titanium 中使用相对路径（但您可以在通过节点运行的 jasmine 规范中自由使用它们）。我们需要使用完整路径而不是相对路径`Resources`作为根目录。

这是通过`NODE_PATH`在运行任何节点命令之前设置环境变量来完成的。这样，诸如 `require("module/path") 之类的路径由节点*和*钛解析。

有一些注意事项。一些模块强制需要绝对路径。在这种情况下，只要没有任何循环依赖，就需要[proxyquire来模拟绝对路径。](https://github.com/thlorenz/proxyquire)此外，由于节点没有 Titanium API，您还必须包含[mockti](https://github.com/russfrank/mockti)包来模拟 Titanium API。在你的 spec_helper.js 中使用它：

```
global.Ti = require("mockti"); 
```

和

```
proxyquire = require("proxyquire");
var myModule = proxyquire("relative/path/to/MyModule", {
    "/absolute/path/to/some/module": require("absolute/path/to/some/module")
}); 
```

# c - (C) 函数中声明的指针，函数结束后指针会丢失吗？

> ID：14669392
> 
> 赞同：1
> 
> 时间：2013-02-03T04:05:08.883
> 
> 标签：c, function, scope

首先，让我首先说我知道这个问题已经在某个时候得到了回答。它必须是，但我根本不知道要找到答案的关键字。

我正在编写一个程序，在我的程序内部，我必须在各处创建多个动态大小的数组，然后将它们存储到一个大结构中。因此，如果我必须创建相同类型的动态分配数组，我会在一个函数中创建它（即声明它、malloc 并返回它）到我的结构字段。然而，现在我已经走上了这条路，我认为我犯了一个重大缺陷。我相信我所做的会被函数的作用域破坏，这意味着一旦函数完成，原始指针就会被杀死，因此我的结构是指向不再是“我的”地址的指针。下面是对该函数的示例调用，希望它在没有注释的情况下有意义。

```
//Call from main()
current_event->mens_names = create_names_matrix(number_of_couples, 20);

//my "create_names_matrix" function:
char ** create_names_matrix(int num_of_names, int length_of_names){
int i;
char **return_matrix;

return_matrix = malloc(num_of_names * sizeof(char*));
if(return_matrix == NULL){
    panic("return_matrix"); //Panic is a function that checks if malloc failed
}

for(i = 0; i < num_of_names; i++){
    return_matrix[i] = malloc(length_of_names * sizeof(char));
}

if(return_matrix[i-1] == NULL){
    panic("return_matrix"); //Panic is a function that checks if malloc failed
}
return return_matrix; 
```

}

解决方案是继续声明并在主中动态创建每个字段数组，然后将其作为参数传递给我的每个“create_xxx_matrix”函数，以避免在函数范围完成后它们被杀死？

我知道这是一个菜鸟问题，但自从我使用指针和 c 以来已经有一段时间了。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T04:08:42.140

动态分配的指针是在堆中分配的，不会被函数范围杀死。根据作用域，分配在堆栈中的变量一旦离开函数就会被销毁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T07:30:31.223

这将正常工作。你真正担心的不是指针本身，而是它指向的内存。指针实际上只是一个指示内存位置的数字（如 0x0043AF）。由于您使用`malloc()`了您的内存在堆上，除非您专门调用`free(ptr)`这将释放所有指向的内存，否则它永远不会被释放。

# c# - 打破 Liskov 替换原则的类使用陷阱

> ID：14669394
> 
> 赞同：6
> 
> 时间：2013-02-03T04:05:46.417
> 
> 标签：c#, .net, types, dependency-injection, liskov-substitution-principle

在我最近工作的一个项目中，注意到一些接受**属于层次结构的类的**方法具有类似于以下的代码：

```
public void Process(Animal animal) {
    if(animal.GetType() == typeof(Dog)) {
        Console.WriteLine("We have a dog");
    }
    else {
        Console.WriteLine("not a dog");
    }
} 
```

*好吧，这让我觉得这是对LSP*的公然违反，因为现在**如果您**在生产代码、单元测试模拟或依赖注入拦截器的一部分中使用狗的子类，**则此代码将不会以相同的方式工作**。我相信通过将条件更改为：

```
 if (animal is Dog) 
```

这让我想到了：

是否还有其他可以在客户端代码中破坏 LSP 的陷阱？

**更新**

为了澄清起见，我正在寻找在层次结构中使用类的代码中可能存在的缺陷。我知道并且我不是在寻找结构严重的层次结构的问题 - （例如矩形 - 正方形问题）。我试图找出要查找的内容，以确保代码将支持动态模拟、拦截器、装饰类（例如 LoggingDog），就像它处理原始类一样。

到目前为止，在浏览完答案和链接之后，我可以看到唯一的陷阱是直接使用类的类型——即直接使用`GetType()`方法或通过其他一些技术。尽管这里有一些注释`is`和`as`操作符，在这种情况下，甚至转换为基类型也不会破坏 LSP，因为子类的评估方式与原始类的评估方式相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T14:33:45.200

如果我们暂时忽略确实存在您可能需要强制转换为特定类型的情况，那么在大多数情况下，可以通过更改设计来解决问题：

```
public class Animal
{
    public virtual void Process()
    {
        Console.WriteLine("Animal (not a dog)");
    }
}

public class Dog : Animal
{
    public override void Process()
    {
        Console.WriteLine("We have a dog");
    }
} 
```

通过使用这种设计，我们避免了在处理动物的代码中的需要：

```
var animal = ...; // maybe a Dog, maybe not
animal.Process(); 
```

# swing - 可以在 ActionListener 和 ActionEvent 中使用帮助

> ID：14669395
> 
> 赞同：1
> 
> 时间：2013-02-03T04:05:58.770
> 
> 标签：swing, jframe, jbutton, actionlistener, java-7

我正在尝试为我的班级编写一个程序，该程序在单击后`Computer Science`禁用 a 。但是，它在我单击一次后立即禁用。我仍然不确定我做错了什么。`JButton``8 times`

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class JFrameDisableButton extends JFrame
{
    public static void main(String[] args)
    {
        JFrameDisableButton window = new JFrameDisableButton();
        window.setVisible(true);
    }

    final int WIDTH = 150;
    final int HEIGHT = 150;
    private Font bigFont = new Font("Arial", Font.BOLD, 16);
    private JButton disableButton = new JButton("Disable");
    private Container pane = getContentPane();
    private JLabel annoyed;

    public JFrameDisableButton()
    {
        super("Disable Frame");
        setSize(WIDTH,HEIGHT);
        setLayout(new FlowLayout());
        pane.add(disableButton);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        DisableButtonListener disableListener = new DisableButtonListener();
        disableButton.addActionListener(disableListener);
    }

    private class DisableButtonListener implements ActionListener
    {
        public void actionPerformed(ActionEvent click)
        {
            if(actionPerformed(ActionEvent (click = 8)))
            {
                disableButton.setEnabled(false);
            }
            else
            {
                disableButton.setEnabled(true);
                annoyed = new JLabel("That's enough!");
                pane.add(annoyed);
                annoyed.setFont(bigFont);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:38:42.197

在这里，我对您的代码进行了一些修改，请看一下，它禁用了`JButton`. 尽管如何将其恢复到`Enabled`状态，但为此，您需要使用 another`JButton`或其他某种事件将其恢复到启用状态。只需使用一个`private int counter = 0`变量，它将按钮计数计数到 8，然后禁用`JButton`.

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class JFrameDisableButton extends JFrame
{
    public static void main(String[] args)
    {
        /*
         * Do learn about Concurrency in Swing too,
         * to display GUI related updates on the EDT.
         */
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                JFrameDisableButton window = new JFrameDisableButton();
                window.setVisible(true);
            }
        });        
    }

    final int WIDTH = 150;
    final int HEIGHT = 150;
    private Font bigFont = new Font("Arial", Font.BOLD, 16);
    private JButton disableButton = new JButton("Disable");
    private Container pane = getContentPane();
    private JLabel annoyed;
    private int counter = 0;

    public JFrameDisableButton()
    {
        super("Disable Frame");

        setLayout(new FlowLayout());
        pane.add(disableButton);
        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        DisableButtonListener disableListener = new DisableButtonListener();
        disableButton.addActionListener(disableListener);
        annoyed = new JLabel("Clicked : " + counter + " times.");
        annoyed.setFont(bigFont);
        pane.add(annoyed);
        /*
         * Always call pack()/setSize() methods, only
         * when you are done adding components to 
         * the parent Container. Once it had realized it 
         * components, so that it can calculate, it''s 
         * size in a better way.
         */
        pack();
    }

    private class DisableButtonListener implements ActionListener
    {
        public void actionPerformed(ActionEvent click)
        {
            counter++;
            if(counter == 8)
            {
                annoyed.setText("Clicked : " + counter + " times.");
                disableButton.setEnabled(false);
                counter = 0;
            }
            else
            {
                annoyed.setText("Clicked : " + counter + " times.");                                
            }
        }
    }
} 
```

# javascript - 触发函数时随机化类的事件处理程序

> ID：14669405
> 
> 赞同：0
> 
> 时间：2013-02-03T04:08:10.720
> 
> 标签：javascript

我有一个事件处理程序，它有 6 个作为类名放入的参数。当我触发函数时，它直接打印出所有六个参数，

所以我试图创建一个包含类的数组，但这不起作用。数组正在调用内部索引值的控制台日志寄存器......但屏幕上没有魔法。有任何想法吗 ？

```
 function AddEvent(){
            var AddEvent = "add";
            var addClassArr= document.getElementsByClassName(AddEvent);
            for(var i=0; i<addClassArr.length; i++){
                var addClass = addClassArr[i];
                addClass.addEventListener("click", addDiceEvent, true);
            }
            var diceArray = ["dice dice-side-one",
            "dice dice-side-two",
            "dice dice-side-three",
            "dice dice-side-four",
            "dice dice-side-five",
            "dice dice-side-six",
            "dice dice-side-six"];

 function addDiceEvent() {
             var sides = diceArray[2];

    }    }
        AddEvent(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:01:21.913

最好将功能包装在这样的函数中：

```
function AddEvent(className) 
{
    var nodes = document.getElementsByClassName(className),
    sides = ["dice dice-side-one",
            "dice dice-side-two",
            "dice dice-side-three",
            "dice dice-side-four",
            "dice dice-side-five",
            "dice dice-side-six",
            "dice dice-side-six"],
    handleClick = function() {
        var sides = sides[2];
    }

    for (var i=0; i<addClassArr.length; i++) {
        var addClass = addClassArr[i];
        addClass.addEventListener("click", handleClick, true);
    }
} 
```

致电：

```
AddEvent('add'); 
```

或者，您可以使用模块模式来完成实现隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T04:44:54.017

好吧，我可以自己回答我的问题:) 问题是我在事件调用者内部创建了数组。没有用，但这成功了。

```
 var Array=["dice dice-side-one",
        "dice dice-side-two",
        "dice dice-side-three",
        "dice dice-side-four",
        "dice dice-side-five",
        "dice dice-side-six",
        "dice dice-side-six"];
        var rand = Array[Math.floor(Math.random() * Array.length)];

        function addDiceEvent() {
        dicesides_func(rand); 
```

# php - 在非对象上调用成员函数 check_if_image_exist()

> ID：14669408
> 
> 赞同：0
> 
> 时间：2013-02-03T04:08:41.237
> 
> 标签：php, codeigniter

我想知道我的代码有什么问题，为什么它向我抛出此错误“在线调用非对象 D:\xampp\htdocs\project-001\application\controllers\c_userHome.php 上的成员函数 check_if_image_exist() 48"

我的其他功能具有相同的代码，但其他功能都可以正常工作..我被这个错误搞砸了:(

这是在我的控制器中：

```
 //check if dir has image
        $this->load->library('image_checker');
        $this->image_checker->check_if_image_exist(); //this is line 48 
```

这是在我的图书馆中，我称之为：

```
class Image_checker extends CI_Controller {

var $userfile_path;

function __construct()
{
    parent::__construct();
    $this->userfile_path = realpath(APPPATH . '../userfiles/');
}

public function check_if_image_exist()
{
        $user = $this->session->userdata('username');
        $dir = $this->userfile_path;

        $handle = opendir($dir);

        while(($file = readdir($handle)) !== false){
             if($file != "." && $file != ".."){
                $file_list[] = $file;
             }
        }
        closedir($handle);

    return $file_list;
} 
```

}

提前致谢！-达里尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:11:50.277

这似乎是你的控制器，因为你正在扩展`CI_Controller`，所以改变：

```
class Image_checker extends CI_Controller {
... 
```

到

```
class Image_checker {
... 
```

查看更多：[Codeigniter 自定义库](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

# r - 5年生存率卡方检验

> ID：14669411
> 
> 赞同：1
> 
> 时间：2013-02-03T04:09:04.193
> 
> 标签：r

我正在为具有两个子组的人口使用生存包。我需要每个组的 5 年 KM 存活率。我从以下位置得到这个值：

```
summary(survfit(Surv(survtime, vital)~subgroup)), time = 60) #in months 
```

但是，我还想对两个五年生存率进行 chisq 测试。有没有一种简单的方法来使用生存包运行这个测试？

感谢您的任何建议和帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T06:08:54.823

不确定这是否是正确的方法（请注意买家），但这里有一个示例，使用包含在包中的`aml`数据集作为示例数据。`survival`

```
library(survival)
amlsurv <- with(aml,survfit(Surv(time,status) ~ x))
summary(amlsurv ,time=20) 
```

这导致`time=20`：

```
Call: survfit(formula = Surv(time, status) ~ x)

                x=Maintained 
        time       n.risk      n.event
      20.000        7.000        3.000 ...

                x=Nonmaintained 
        time       n.risk      n.event
      20.000        6.000        5.000 ... 
```

这两个选项都使用以下`survdiff`功能失败：

```
survdiff(summary(aml,time=20))
survdiff(aml,time=20) 
```

现在尝试手动限制为 20 天：

```
aml$status.20 <- aml$status
# set 'deaths' with a time greater than 20 to be 'survivors'
aml$status.20[aml$status == 1 & aml$time > 20] <- 0
amlsurv <- (Surv(aml$time,aml$status.20) ~ aml$x)
summary(survfit(amlsurv))
# results are the same as above, Maintained=3 events,Nonmaintained=5 events 
```

现在，您可以通过比较两组来获得 20 天限制的结果：

```
survdiff(amlsurv)
Call:
survdiff(formula = amlsurv)

                     N Observed Expected (O-E)^2/E (O-E)^2/V
aml$x=Maintained    11        3      4.3     0.392     0.874
aml$x=Nonmaintained 12        5      3.7     0.455     0.874

 Chisq= 0.9  on 1 degrees of freedom, p= 0.35 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T09:42:35.733

您可以轻松使用`survdiff()`：

```
s.fit <- survfit(Surv(survtime, vital)~subgroup)
survdiff(s.fit) 
```

# c - 是否可以在 C 中使用匿名的临时数组？

> ID：14669412
> 
> 赞同：22
> 
> 时间：2013-02-03T04:09:06.790
> 
> 标签：c, arrays

是否可以在 C 中创建匿名的临时数组？

例如，假设我有一个调用函数`processArray(int[] array)`，它以一个 int 数组作为其参数，我可以通过以下方式将一个匿名数组传递给它：

```
int main(){
 processArray( (int[]){0, 1, 2, 3} ); //can I create this type of array?
 return 0;
} 
```

还是我必须事先声明数组（使用指针），然后将其指针传递给 processArray()？例如：

```
int main(){
 int[] myArray = {0, 1, 2, 3};
 processArray(myArray);
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-03T04:16:44.663

使用 C99 和 C11，您可以编写自己编写的内容，如以下代码所示。这些是“复合文字”，在 ISO/IEC 9899:2011 [§6.5.2.5 复合文字](http://port70.net/~nsz/c/c11/n1570.html#6.5.2.5)中进行了描述（与 ISO/IEC 9899:1999 中的相同部分）。

```
#include <stdio.h>

static void processArray(int n, int arr[])
{
    for (int i = 0; i < n; i++)
       printf(" %d", arr[i]);
    putchar('\n');
}

int main(void)
{
    processArray(4, (int[]){0, 1, 2, 3});
    return 0;
} 
```

运行时，它会产生答案：

```
 0 1 2 3 
```

# .net - SQL 批量插入未将值正确插入表中

> ID：14669415
> 
> 赞同：0
> 
> 时间：2013-02-03T04:09:38.007
> 
> 标签：.net, excel, sql-server-2008-r2, sqlbulkcopy

我有一个 Excel 文件（.xlsx），我正在尝试将文件的内容上传到 Sql 服务器表中。我正在使用 SQL 大容量复制来大容量插入数据。数据被插入到表中，但我发现数据没有正确插入。

这是示例 Excel 数据-

![在此处输入图像描述](../Images/cd0ce317c934a007acb8f9c4be89871d.png)

这是 Sql 批量复制的代码：

```
string fname = Path.GetFileName(fup_addRoute.FileName);
fup_addRoute.SaveAs(Server.MapPath("/Admin/UserRoutes/" + fname));
string path = Server.MapPath("/Admin/UserRoutes/" + fname);

using (OleDbConnection connection = new OleDbConnection(string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=Excel 8.0", path)))
{
      OleDbCommand command = new OleDbCommand("select * from [Sheet1$]", connection);
      connection.Open();
      System.Data.Common.DbDataReader dr = command.ExecuteReader();
      SqlBulkCopy bulkInsert = new SqlBulkCopy(con); 
      bulkInsert.DestinationTableName = "routesdata";
      bulkInsert.WriteToServer(dr);
      connection.Close();
      dr.Close();
      bulkInsert.Close();
} 
```

插入后的数据：

![在此处输入图像描述](../Images/8a40a95c71caa6404b08d354106b6b7c.png)

仅插入最后一行，并且缺少 excel 表中的第一列值。表中的 xid 列是一个自增列。

这个过程在 MySql 中使用“加载数据文件”很容易，但我刚刚迁移到 Sql 服务器。我在代码中做错了什么。请提出建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T04:30:48.960

作为我之前评论的后续，由于您只缺少第一行，因此听起来您需要添加`HDR=No`到连接字符串中。

它应该看起来像这样：

```
Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties='Excel 8.0;HDR=No'; 
```

- 编辑

请注意添加的撇号。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T04:21:20.873

我实际上有点惊讶您没有报告异常。

无论如何，我怀疑（至少部分）您的问题是您需要指定列映射。

来自[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopycolumnmapping.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopycolumnmapping.aspx)

> 如果未定义映射（即 ColumnMappings 集合为空），则根据序号位置隐式映射列。为此，源模式和目标模式必须匹配。如果他们不这样做，将抛出 InvalidOperationException。

从我可以看到您的 Excel 文件和您的数据库表在所有列上**都不**匹配（例如自动增量）。所以我会尝试指定你的[列映射](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.columnmappings.aspx)。

# java - 如何整合 java.util.logging、System.(out|err) 和 Jetty 日志记录？

> ID：14669416
> 
> 赞同：3
> 
> 时间：2013-02-03T04:09:48.223
> 
> 标签：java, jetty, slf4j, logback, java.util.logging

我阅读了有关如何将 java.util.logging 日志和 System.(out|err) 输出通过管道传输到 slf4j 的信息：

*   [将 java.util.logging 桥接到 slf4j](http://blog.cn-consult.dk/2009/03/bridging-javautillogging-to-slf4j.html)
*   [将 System.out 和 System.err 重定向到 slf4j](https://stackoverflow.com/questions/11187461/redirect-system-out-and-system-err-to-slf4j)
*   [通过 slf4j 系统输出](http://projects.lidalia.org.uk/sysout-over-slf4j/)

但它需要在码头启动时执行一些 jar/类和代码。基本上是这样的：

`SLF4JBridgeHandler.install() // to pipe j.u.l` `SysOutOverSLF4J.sendSystemOutAndErrToSLF4J() // to pipe System.(out|err)`

我知道如何为码头添加所需的罐子/类（只需将 sysout-over-slf4j.jar 和 jul-to-slf4j.jar 添加到 $JETTY_HOME/lib/ext），但**我不知道如何运行服务器启动中的 abobe 代码，**以便码头将合并的输出（sysout 和 jul）配置为 slf4j。我可以为每个 webapp 运行该代码，但为了使事情正确，它应该由 jetty 完成，而不是由需要这种行为的每个 webapp 完成。

这应该以不同的方式完成吗？有没有一种非巫毒的方式来做到这一点？

请让你的答案是码头版本> = 8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:47:35.163

我不知道这是否会奏效，但你试过了吗？

```
public class MyWebappServlet ... {
  static {
    // to pipe j.u.l
    SLF4JBridgeHandler.install();

    // to pipe System.(out|err)
    SysOutOverSLF4J.sendSystemOutAndErrToSLF4J();
  }
  ... 
```

在你的`web.xml`：

```
<servlet>
  <servlet-name>MyWebapp</servlet-name>
  <servlet-class>MyWebappServlet</servlet-class>
</servlet> 
```

它可能不会从一开始就拦截所有内容，但是一旦 Jetty 加载您的`MyWebappServlet`类，日志记录应该被重定向。

否则，您将需要使用这两行*自定义*您的 Jetty。

**更新：** 还有另一种方法 - 使用像[BCEL](http://commons.apache.org/proper/commons-bcel/apidocs/org/apache/bcel/util/JavaWrapper.html)`main()`这样​​的包装器来启动 Jetty，但只有在完成这些日志重定向之后。

在这种情况下，命令行将是这样的：

```
java my.custom.JavaWrapper org.eclipse.jetty.start.Main [arguments] 
```

如果可以这样做，`jetty.sh`那么它将适用于该服务器实例中的所有 Web 应用程序。

# objective-c - 我可以在 UIGesture 序列（如 UIPanGesture -iOS）期间更改子视图顺序吗

> ID：14669418
> 
> 赞同：1
> 
> 时间：2013-02-03T04:10:21.890
> 
> 标签：objective-c

此代码循环通过将子视图添加到当前子视图（这是一个纸牌游戏）...

```
 //Creates the Card's view and adds it to the cardContainerView
        CardView *cardView = [[CardView alloc]initWithFrame:CGRectMake(0, 0, 67,99)];
        [cardContainerView addSubview:cardView];

        //Assign the UIGesture to the CardView

        //For panning and dragging
        UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(handlePanGesture:)];
        [cardView addGestureRecognizer:panGesture]; 
```

...一旦交易完成，我想用触摸手势选择一张卡片并拖动它 - 在这个序列中，我希望这张卡片悬停在所有其他卡片上（比如在纸牌中，你想从一张卡片中添加一张卡片列到另一个）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:23:45.310

我认为你需要做的就是这样的：

在handlePanGesture中：

```
- (void)handlePanGesture:(UIGestureRecognizer *)recognizer {

    UIView *touchedView = recognizer.view;
    [touchedView.superview bringSubviewToFront:touchedView];
    ... // Rest of your code here.
} 
```

如果`touchedView.superview`不起作用，您可能需要考虑使 cardContainerView 成为您的类的属性并在您的`handlePanGesture:`方法中访问它。

# javascript - jQuery用替换功能替换背景图像

> ID：14669420
> 
> 赞同：1
> 
> 时间：2013-02-03T04:10:29.730
> 
> 标签：javascript, jquery, replace

如果 img 在 background 属性中而不是 src 中，如何执行以下操作？

```
this.src = this.src.replace("_1","_2"); 
```

CSS：

```
#someimg {  
    background:url('someimg_1.jpg');
} 
```

就像是：

```
$('#someimg').css.('background-image',
    $(this).css('background-image').replace("_1","_2")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T04:13:29.043

为这些不同的背景定义类并添加和删除类要好得多，而不是这种脆弱的做法，但是，这是可以做到的，

```
var backGroundImage = $('#someimg').css('background-image');
$('#someimg').css('background-image', backGroundImage.replace("_1","_2")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T04:13:51.180

`**[LIVE DEMO](http://jsbin.com/igives/1/edit)**`

```
var src2 = $('#someimg').attr('src').replace('_1', '_2');
$('#someimg').attr( 'src', src2 ); 
```

或者，如果您愿意，可以这样做：

```
var $omeimg = $('#someimg');
$omeimg.attr('src', $omeimg.attr('src').replace('_1', '_2') ); 
```

这与您所做的最相似，只是在您的示例中，您有 2 个小错误：

```
$('#someimg').css.('background-image',  $(this).css('background-image').replace("_1","_2"));
//               ^---- this dot         ^^^^^^^---- and this undefined 
```

# python - 为什么我在控制台上收到语法错误，但从脚本运行相同的代码时却没有？

> ID：14669425
> 
> 赞同：0
> 
> 时间：2013-02-03T04:11:56.017
> 
> 标签：python

Python 2.7.3

从控制台：

```
>>> try:
...     fsock = open("something_that_does_not_exist")
... except IOError:
...     print "The file does not exist"
... print "Let's keep going"
Traceback (  File "<interactive input>", line 5
    print "Let's keep going"
        ^
SyntaxError: invalid syntax 
```

如果我将相同的代码保存到脚本中：

**ex.py**

```
def try1():
    try:
        fsock = open("something_that_does_not_exist")
    except IOError:
        print "The file does not exist"
    print "Let's keep going" 
```

并运行它：

```
>>> import ex
>>> ex.try1()
The file does not exist
Let's keep going
>>> 
```

我在控制台、IDLE 和 PythonWin 上试过这个。结果相同。

有什么不同？

**编辑：**

我正在学习 Python，其中包括“潜入 Python”（[http://www.diveintopython.net/](http://www.diveintopython.net/)）。在示例 6.1 中，作者准确地展示了从命令行运行的示例： [http ://www.diveintopython.net/file_handling/index.html](http://www.diveintopython.net/file_handling/index.html)

这就是为什么我认为这应该有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T04:16:11.390

你必须完成这个`try` `except`块。如果您在两者之间添加另一行，解释器就不会搞砸。原因是它认为 print 语句是 try 的一部分，但事实并非如此。因此，如果您完成了 except 语句，并让该部分运行，然后粘贴下一个打印语句，它将起作用。

```
>>> try:
...     fsock = open("something_that_does_not_exist")
... except IOError:
...     print "The file does not exist"
...
<output is here> 
```

然后将此语句添加到：

```
>>> print "Let's keep going" 
```

出于与此类似的一系列原因，粘贴到 python 解释器中并不总是有效。解释器是用来测试随机代码片段的，你不能指望粘贴巨大的函数在插入时总是有效的。

如您所见，这是同一件事：

```
>>> try:
...     print 'hi'
... except:
...     print 'yo'
... print 'hi'
  File "<stdin>", line 5
    print 'hi'
        ^
SyntaxError: invalid syntax
>>> 
```

# javascript - 如果 div 2 可见，javascript 隐藏 div 1？

> ID：14669432
> 
> 赞同：-1
> 
> 时间：2013-02-03T04:13:29.497
> 
> 标签：javascript

我正在尝试创建一段 javascript，我想创建一个函数，说明如果一个 div 可见，则阻止另一个 div 打开，或者如果 div 1 可见，则在页面加载时隐藏 div 2。

有人可以告诉我如何做到这一点。谢谢。

```
<script>

      window.onload (function () {
        if  ($('.welcome_overlay').is(":visible")) {
            $("#cover").hide();

                    }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T05:29:14.830

您的`onload`语法不正确-您尝试使用类似于 jQuery 方法的语法来调用它，但这不是它的工作方式。与其尝试*调用* `onload`函数并将其作为参数传递，不如将其*分配*给函数：

```
window.onload = function () {
    if  ($('.welcome_overlay').is(":visible")) {
        $("#cover").hide();
    }
}; 
```

或者，既然您似乎在使用 jQuery，为什么不使用 jQuery 就绪处理程序：

```
$(document).ready(function() {
    if  ($('.welcome_overlay').is(":visible")) {
        $("#cover").hide();
    }
}); 
```

无论哪种方式，除非您在脚本之前包含 jQuery 脚本，否则您的代码将无法工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-10T18:03:17.573

HTML：

```
<div id='Div1'></div><div id='Div2'></div> 
```

Javascript：

```
if(document.getElementById("Div1").style.visibility == "visible") {
    document.getElementById("Div2").style.visibility = "hidden";
} 
```

# c++ - 谷歌原生客户端渲染循环

> ID：14669436
> 
> 赞同：0
> 
> 时间：2013-02-03T04:14:25.960
> 
> 标签：c++, opengl, pthreads, google-nativeclient

我正在尝试使用 Google Native Client 实现渲染循环，我知道您不能在除主线程之外的任何线程上进行 Pepper API 调用，因此我正在尝试实现以下内容。Module() -> 使用 DoGL_() 创建新线程 -> DoGL() 在主线程上调用带有 Pepper API 调用的函数 -> DoGL_() 仍然在单独的线程上调用 DoGL()。

我正在尝试仅使用 Pepper 19 来执行此操作，而且我对线程的了解还不够多，无法解决此问题。现在模块只是崩溃了。

这是我的代码（不漂亮，我只是想摆脱杂务代码）：

DoGL.h

```
#include "Include.h"

class Context : public pp::Graphics3DClient
{
    pp::Size size;
    bool init_;
    const struct PPB_OpenGLES2 *gles2Interface;
    public: 
        Context( pp::Instance *instance );
        ~Context();
        virtual void Graphics3DContextLost() {
        }
        bool MakeCurrentContext( pp::Instance *instance );
        void FlushContext();
        pp::Graphics3D context;
        void ( *callback ) ( void*, int32_t );
        pp::Instance *ppinstance;
        PPB_Graphics3D* ppb_g3d_interface;
        GLuint programObject;
        GLuint LoadShader( const char *shaderSrc, GLenum type );
        GLuint Init();
        void Draw();
        void DoGL();
        void GLDebug( std::string msg = "" );
        static void FillIn( void* v, int32_t i ) {
        }
        pp::Core *ppb_core_interface;
};

static Context *cjcontext;
void* DoGL_( void* p ) {
    cjcontext->DoGL();
}
void Init_( void *p, int32_t i ) {
    cjcontext->Init();
}
void Draw_( void *p, int32_t i ) {
    cjcontext->Draw();
}
void MakeContext_( void *p, int32_t i ) {
    cjcontext->ppinstance->PostMessage( "Called on the main thread!!!!\n" );
    cjcontext->MakeCurrentContext( cjcontext->ppinstance );
}
void FlushContext_( void *p, int32_t i ) {
    cjcontext->FlushContext();
} 
```

DoGL.cpp

```
#include "DoGL.h"
Context::Context( pp::Instance *instance ) : pp::Graphics3DClient( instance )
{
    pp::Module *module = pp::Module::Get();
    gles2Interface = static_cast< const struct PPB_OpenGLES2 * > ( module->GetBrowserInterface( PPB_OPENGLES2_INTERFACE ) );
    init_ = false;
}
Context::~Context() {
    glSetCurrentContextPPAPI( 0 );
}
bool Context::MakeCurrentContext( pp::Instance *instance )
{
    //Is somthing broken?//
    if( instance == NULL ) {
        glSetCurrentContextPPAPI( 0 );
        return ( false );
    }
    if( context.is_null() == true )
    {
        //OpenGL attributes.//
        int32_t attribs[] = 
        { 
            PP_GRAPHICS3DATTRIB_ALPHA_SIZE, 8,
            PP_GRAPHICS3DATTRIB_DEPTH_SIZE, 24,
            PP_GRAPHICS3DATTRIB_STENCIL_SIZE, 8,
            PP_GRAPHICS3DATTRIB_SAMPLES, 0,
            PP_GRAPHICS3DATTRIB_SAMPLE_BUFFERS, 0,
            PP_GRAPHICS3DATTRIB_WIDTH, 500,
            PP_GRAPHICS3DATTRIB_HEIGHT, 500,
            PP_GRAPHICS3DATTRIB_NONE /*Terminate list.*/
         };
        context = pp::Graphics3D( instance, pp::Graphics3D(), attribs );
        if ( context.is_null() == true ) {
            glSetCurrentContextPPAPI( 0 );
            return ( false );
        }
        instance->BindGraphics( context );
    }
    //Get the context.//
    glSetCurrentContextPPAPI( context.pp_resource() );
    glViewport( 0, 0, 500, 500 );
    glClearColor( 0.0f, 0.0f, 0.0f, 1.0f );
    return true;
}
void Context::FlushContext()
{
    //Make sure that the flush is not pending.//
    for( unsigned int wait = 0; wait < 1001; ++wait );
    context.SwapBuffers( pp::CompletionCallback( FillIn, ( ( void* ) this ) ) );
}

GLuint Context::LoadShader( const char *shaderSrc, GLenum type )
{
    GLuint shader;
    GLint compiled;
    //Create the shader object.//
    shader = glCreateShader( type );
    if( shader == 0 ) {
        return 0;
    }
    //Load the shader source.//
    glShaderSource( shader, 1, &shaderSrc, NULL );
    //Compile the shader.//
    glCompileShader( shader );
    //Check the compile status.//
    glGetShaderiv( shader, GL_COMPILE_STATUS, &compiled );
    return shader;
}

GLuint Context::Init()
{
    const char* vShaderStr =  
        "#version 100                \n"
        "attribute vec4 vPosition;   \n"
        "void main()                 \n"
        "{                           \n"
        "   gl_Position = vPosition; \n"
        "}                           \n";
    const char* fShaderStr =  
        "#version 100                               \n"
        "precision mediump float;                   \n"
        "void main()                                \n"
        "{                                          \n"
        "  gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0); \n"
        "}                                          \n";
    GLuint vertexShader;
    GLuint fragmentShader;
    GLint linked;
    //Load the vertex/fragment shaders.//
    vertexShader = LoadShader( vShaderStr, GL_VERTEX_SHADER );
    fragmentShader = LoadShader( fShaderStr, GL_FRAGMENT_SHADER );
    //Create the program object.//
    programObject = glCreateProgram();
    if( programObject == 0 ) {
        return 0;
    }
    glAttachShader( programObject, vertexShader );
    glAttachShader( programObject, fragmentShader );
    //Bind vPosition to attribute 0.//
    glBindAttribLocation( programObject, 0, "vPosition" );
    //Link the program.//
    glLinkProgram( programObject );
    //Check the link status.//
    glGetProgramiv( programObject, GL_LINK_STATUS, &linked );
    glClearColor( 0.0f, 0.0f, 0.0f, 1.0f );
    return programObject;
}

void Context::Draw()
{
    ppinstance->PostMessage( "Drawing!" );
    GLfloat scaler = 1.f;
    GLfloat vVertices[] = 
    { 
        0.0f,  ( scaler * 0.5f ), 0.0f, 
        ( scaler * -0.5f ), ( scaler * -0.5f ), 0.0f,
        ( scaler * 0.5f ), ( scaler * -0.5f ),  0.0f
     };
    ++scaler;
    ppinstance->PostMessage( "Scaler" );
    ppinstance->PostMessage( scaler );
    //Set the viewport.
    glViewport( 0, 0, 500, 500 );
    //Clear the color buffer.//
    glClear( GL_COLOR_BUFFER_BIT );
    //Use the program object.//
    glUseProgram( programObject );
    //Load the vertex data.//
    glVertexAttribPointer( 0, 3, GL_FLOAT, GL_FALSE, 0, vVertices );
    glEnableVertexAttribArray( 0 );
    glDrawArrays( GL_TRIANGLES, 0, 3 );
}

void Context::DoGL()
{
    if( init_ == false )
    {
        pp::CompletionCallback cc;
        //ppinstance->PostMessage( "Init is false." );
        cjcontext->MakeCurrentContext( ppinstance );
        for( int i = 0; i < 10001; ++i );
        cc = pp::CompletionCallback( &Init_, 0, 0 );
        ppb_core_interface->CallOnMainThread( 0, cc, 0 );
        init_ = true;
        cjcontext->FlushContext();
    }
    pp::CompletionCallback cc;
    for( int i = 0; i < 101; ++i );
    cc = pp::CompletionCallback( &MakeContext_, 0, 0 );
    ppb_core_interface->CallOnMainThread( 0, cc, 0 );
    for( int i = 0; i < 101; ++i );
    cc = pp::CompletionCallback( &Draw_, 0, 0 );
    ppb_core_interface->CallOnMainThread( 0, cc, 0 );
    for( int i = 0; i < 101; ++i );
    cc = pp::CompletionCallback( &FlushContext_, 0, 0 );
    ppb_core_interface->CallOnMainThread( 0, cc, 0 );
    void *p;
    DoGL_( p );
}

pthread_t reanderHandle;
int threadStatus;

//Standard NaCl chore code.//
class CubeJumpInstance : public pp::Instance
{
    public: 
        explicit CubeJumpInstance( PP_Instance instance ) : pp::Instance( instance ) {
            PostMessage( "Instance create.\n" );
        }
        virtual ~CubeJumpInstance() {
            PostMessage( "Instance destroyed.\n" );
        }
};

class CubeJumpModule : public pp::Module
{
    public: 
        CubeJumpModule() : pp::Module() {
        }
        virtual ~CubeJumpModule() {
            glTerminatePPAPI();
        }
        virtual pp::Instance* CreateInstance( PP_Instance instance )
        {
            glInitializePPAPI( get_browser_interface() );
            pp::Instance *instance_ = new CubeJumpInstance( instance );
            cjcontext = new Context( instance_ );
            cjcontext->ppinstance = instance_;
            cjcontext->ppb_core_interface = this->core();
            threadStatus = pthread_create( &reanderHandle, 0, DoGL_, 0 );
            cjcontext->ppinstance->PostMessage( "Instace done.\n" );
            //pthread_join( reanderHandle, 0 );
            return cjcontext->ppinstance;
        }
};

namespace pp
{
    pp::Module* CreateModule() {
        return new CubeJumpModule();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:07:43.350

这里有很多问题，我将专注于主要概念：您不需要渲染线程，您可以只使用交换缓冲区来驱动渲染循环。

基本概念是：

```
// do this to kick things off
CallOnMainThread(Render)

Render()
    if (!init)
        Init();

    MakeContext();
    Draw();
    SwapBuffers(Render); 
```

而已。`SwapBuffers`将安排下一次调用在“正确”时间进行渲染。

至于你的程序为什么会崩溃，可能是很多事情，我猜你的主要问题是递归调用`DoGL`，直到你的堆栈爆炸。

# cuda - CUDA：挂起的代码用-g -G编译得很好

> ID：14669438
> 
> 赞同：-1
> 
> 时间：2013-02-03T04:15:00.557
> 
> 标签：cuda

我有一个在某些输入数据上执行时挂起的 CUDA 代码。

为了调试它，我用 -g -G 编译它，这样我就可以用 cuda-gdb 运行它，但是当用 -g -G 编译时，即使在 cuda-gdb 之外，代码也能正常工作。

如何调试代码，可能是什么问题？

我在多个地方实现了互斥机制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:08:11.843

尝试使用[cuda-memcheck](https://developer.nvidia.com/cuda-memcheck)运行。

# c - 在不同窗口中并行执行curses ...（使用ncurses）

> ID：14669443
> 
> 赞同：0
> 
> 时间：2013-02-03T04:16:01.740
> 
> 标签：c, ncurses

我一直在尝试`pong`使用. 我已经成功地为两个玩家创建了两个酒吧。问题是，当两个玩家按下相应的键时，只有一个在移动。`ncurses``terminal`

所以，我在网上搜索，发现我们可以使用窗口，我们可以拥有`logical curser`每个窗口，从而并行执行来自玩家的命令。我的程序的代码片段如下所示：

```
pthread_t player_1, player_2;
pthread_create(&player_1, NULL, (void*)&player_1_move, (void*)pl_window);
pthread_create(&player_2, NULL, (void*)&player_2_move, (void*)p2_window);

while(1)
{
    char c=getch();
    if(key is from p1)
         //signal player_1 thread to refresh the bar position

    if(key is from p2)
         //refresh it for player_2 by signaling 2nd thread..

}
//here player_1_move and player_2_move are the functions for changing the bar position         for each of the players..I have created two windows in which i draw these bars, which i haven't shown in my code.. 
```

问题是虽然我使用了 pthreads，但当两个玩家同时按下时，我仍然看不到两者同时移动。

任何建议请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:19:12.953

正如克雷格所说......当同时按下两个键时，终端无法处理。它会选择其中任何一个。这正是问题所在。即使我们使用 . 也无法解决`pthreads`。

# android - 为什么在android Logcat中打印空字符串什么都不显示？

> ID：14669448
> 
> 赞同：5
> 
> 时间：2013-02-03T04:17:55.670
> 
> 标签：android, logcat

当我使用 Log 进行调试时，巧合的是一条消息为空字符串（不是空格，就像“”），结果什么也没有显示，甚至没有空的彩色 logcat 行，也就是说，如果我想执行 Log.d (TAG, msg) 但字符串 msg 是一个空字符(msg.equals(""); 它在 DDMS 中什么都不显示，所以我必须附加一些其他字符作为标记以保证日志行出现以供检查。是还有其他方法来处理这个问题吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:38:48.900

通常打印一些描述你的 String 变量应该意味着什么的东西是有帮助的，所以为什么不做类似的事情：

```
Log.d(TAG, "my message: " + msg); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-14T19:24:21.223

如果字符串为空（例如：“”），则不会按照文档中的说明记录。要查看该字符串，您必须将其与一些附加信息连接起来，例如：

```
Log.d(TAG, "String value:"+message) 
```

# node.js - Node.js + Express 3 + Frameset 导航栏

> ID：14669450
> 
> 赞同：-2
> 
> 时间：2013-02-03T04:17:59.360
> 
> 标签：node.js, express

我正在尝试使用框架集来创建左侧导航栏，但它似乎不起作用。我的代码是

```
<frameset cols="175,*" frameborder="0" frameborder="no" framespacing="0" border="0">
    <frame src="navbar.htm" name="choices" scrolling="auto">
    <frame src="main.htm" name="khephra">
</frameset> 
```

navbar.htm 和 main.htm 都与 ejs 在同一个文件夹中。我试过把ejs复制到公用文件夹，还是不行。任何想法？

更新：

从这个链接我发现 node.js 不支持框架集。我会尝试使用 iframe

[https://groups.google.com/forum/#!msg/zombie-js/nxScI6rvtgA/tpz7Z6myOm4J](https://groups.google.com/forum/#!msg/zombie-js/nxScI6rvtgA/tpz7Z6myOm4J)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:48:39.773

我刚刚使用您的标记将一个死的简单快速应用程序放在一起，它运行良好，没有问题。

我用 ejs 替换了翡翠（在 package.json 和 app.js 中），并将您的标记添加为`views/index.ejs`：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html>
  <frameset cols="175,*" frameborder="0" frameborder="no" framespacing="0" border="0">
    <frame src="navbar.htm" name="choices" scrolling="auto">
    <frame src="main.htm" name="khephra">
  </frameset>
</html> 
```

然后我制作了两个虚拟版本的`navbar.htm`and`main.html`并将它们放入`public`. 最终文件结构如下：

```
approot/
  views/
    index.ejs
  public/
    main.htm
    index.htm 
```

# php - PHP：扫描数据库中的某个值然后组织它

> ID：14669451
> 
> 赞同：0
> 
> 时间：2013-02-03T04:18:01.857
> 
> 标签：php, mysql

我一直在做这个项目，最近卡住了。基本上可以说我有一个 MySQL 数据库，它有 2 列，名称和胡萝卜。我想扫描一个数据库并检查每个数据条目是否该人喜欢胡萝卜。如果他们喜欢胡萝卜，则胡萝卜条目应为 1，否则应为 0。如果他们喜欢胡萝卜并希望它与名称相呼应。我怎么能这样做？我对数据库的东西不是很好，但这是必不可少的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:23:30.540

我自己会有点模糊，因为我不知道你都尝试了什么。

首先，创建一个查询以获取所有喜欢胡萝卜的人的列表：

```
SELECT `Name`, `Carrot` FROM MyTable WHERE `Carrot` = 1; 
```

接下来，执行它并在 PHP 中获取结果（如果您不知道如何，请在网上搜索或询问）。

然后使用循环遍历每行返回的名称并将它们回显出来。

```
echo '$name likes carrots!'; 
```

如果没有您提出更具体的问题，我无法更具体。

# javascript - jQuery - 我正在尝试将箭头键绑定到动态图片

> ID：14669454
> 
> 赞同：0
> 
> 时间：2013-02-03T04:19:10.430
> 
> 标签：javascript, jquery, html, binding

我需要使用箭头键在屏幕上移动火柴人图片。我似乎无法找到如何。我已经尝试了我发现的所有东西，但仍然没有用。这是[链接](http://dotcomaftereverything.com/jquery/game.php)。

代码：

```
<script>
     $(document).ready(function(){
        $('#sitting').hide();  
            $(document).keydown(function(e){
                var keyCode = e.keyCode || e.which,
                    arrow = { left:37, up:38, right: 39, down: 40 };
                switch (keyCode {
                case arrow.left:
                    if(!$('#sitting').is(':visible')){
                    $('#img,#sitting').animate({
                        left:'-=60px'
                    },300,"linear");
                    }
                break;
                case arrow.up:
                break;
                case arrow.right:
                    if(!$('#sitting').is(':visible')){
                    $('#img,#sitting').animate({
                        left:'+=60px'
                    },300,"linear");
                    }
                break;
                case arrow.down:
                break;
                }
            });
        $('#sit').click(function(){
            $('#img').fadeToggle(-100,function(){
                $('#sitting').fadeToggle(-100);
            });
        });
    }); 
    </script>
    <button id='left'><<</button><button id='right'>>></button><button id='sit'>Sit Down/Stand up</button><br />
    <img src='/jquery/sprites/spritePerson.png' id='img' style='position: absolute; margin-top: 375px;' /><img id='sitting' src='/jquery/sprites/spriteSitting.png' style='position: fixed; margin-top: 375px;'><img id='tree' src='/jquery/sprites/spriteTree.png' style='position: absolute; margin-top: 100px; margin-left: 700px;' /><br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:55:22.327

Think your code to be working . only you missed a bracket code in `switch (keyCode)`.

How ever you need to work around your code. some of your code can be optimized.

like.

1.  Always use stop(true) before you call animate method. This stops the queue of animate . like `$(selector).stop(true).animate({});`
2.  Why you need to make a new object of arrow . you can directly use key code in case;

3.  make a reference to your selector so it will not traverse all the time to get element.

see jsfiddle : [http://jsfiddle.net/bxAtd/](http://jsfiddle.net/bxAtd/)

# algorithm - 可以选择 n-1 条边以形成具有 n 个节点的连通图的方式数

> ID：14669456
> 
> 赞同：2
> 
> 时间：2013-02-03T04:19:56.077
> 
> 标签：algorithm, data-structures, nodes, graph-theory, edges

基本上，您需要 n-1 条边来制作具有 n 个节点的连通图。我想知道是否有任何理论可以找到可以从可能的总 n(n-1)/2 条边中选择 n-1 条边的不同方式的数量，从而使图形保持连接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T04:44:13.737

有完全连通的图，其顶点集为。这个结果被称为[凯莱公式](http://en.wikipedia.org/wiki/Cayley%27s_formula)。`n^(n-2)``{1,...n}``n > 0`

# c++ - “元素”的初始化被“案例”标签跳过

> ID：14669457
> 
> 赞同：85
> 
> 时间：2013-02-03T04:20:16.763
> 
> 标签：c++, debugging

我不明白为什么我会收到错误：

> “元素”的初始化被“案例”标签跳过。

有人可以向我解释吗？

```
void LinkedList::process_example(int choice) {
    switch(choice) {
    case 1:
        cout << endl << endl << "Current S = ";
        this->printSet();

        cout << "Enter an element :";
        char* element = "lol";

        //cin>>element;
        cin.clear();
        cin.ignore(200, '\n');

        this->Addelementfromback(element); //error is here
        cout << endl << endl << "Current S = ";

        this->printSet();
        break;

    case 2:
        this->check_element();
        break;

    case 3:
        cout << endl << endl;
        cout << "Current Set S = ";
        this->printSet();

        cout << endl << "S has ";
        int count = this ->check_cardinality();
        cout << count << " elements";
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2013-02-03T04:24:51.933

尝试 wrap `case`with `{}`，并将所有语句放入`{}`.

```
case 1:
{
   cout << endl << endl << "Current S = ";
   this->printSet();    
   // and other mess
}
break; 
```

您应该将所有这些语句放在函数中，保持`case`语句清晰。例如，写这种风格：

```
case 1:
   initializeElement();
   break;
case 2:
   doSomethingElse();
   break; 
```

见 [链接](https://stackoverflow.com/questions/92396/why-cant-variables-be-declared-in-a-switch-statement)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-09-29T09:52:32.093

当一个变量在 one 中声明时`case`，下一个`case`在技术上仍然在同一个范围内，所以你可以在那里引用它，但是如果你在`case`没有先点击这个的情况下点击它，你最终会调用一个未初始化的变量。这个错误可以防止这种情况。

您需要做的就是在`switch`语句之​​前定义它，或者使用花括号`{ }`确保它在退出特定的`case`.

# c - 如何在另一种类型的函数中使用一种类型的函数？

> ID：14669458
> 
> 赞同：2
> 
> 时间：2013-02-03T04:20:23.653
> 
> 标签：c

我有一个功能可以打印菜单并返回选择。还有另一个函数来计算我从用户那里得到的 2 个数字。现在，计算取决于第一个函数的选择返回，我真的不知道一起使用两种不同类型的函数的正确方法是什么......这是两个函数：

```
float calc(float number1, float number2)

{
    float answer;
    int operand;
    operand =get_choice();// problemmmm

}

char get_choice(void)

{
    char choice;

    printf("Enter the operation of your choice:\n");
    printf("a. add        s. subtract\n");
    printf("m. multiply   d. divide\n");
    printf("q. quit");

    while ((choice = getchar()) != 'q')
    {

        if (choice != 'a' || choice != 's' || choice != 'm' || choice != 'd')
        {
            printf("Enter the operation of your choice:\n");
            printf("a. add        s. subtract\n");
            printf("m. multiply   d. divide\n");
            printf("q. quit");
            continue;
        }
    }
    return choice;
} 
```

我收到一条错误消息，提示“get_choice 的隐式函数在 C99 中无效”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:45:41.360

该隐式函数错误可能意味着编译器在调用该函数时还不知道该`get_choice`函数。您可以通过任一方式解决此问题。

1.  更改编写函数的顺序。在 calc 函数之前编写 get_choice

2.  在 calc 函数之前添加 get_choice 函数的声明。声明将只是函数名称和类型，没有代码：

    ```
    char get_choice(void); 
    ```

如果您想知道该消息是关于什么的，在 C89 中，未声明的函数被隐式假定为返回一个整数。C99 更严格，并强制您始终声明函数，但错误消息仍然引用 C89 样式的隐式声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T04:32:10.640

您是否尝试根据运营商执行不同的计算？您可以使用函数指针来实现它。即，编写一个字典，将每个选择（'a'，'s'，'m'，'d'）分别映射到函数指针类型的操作（加，减，乘，除）`float (*)(float, float)`。

顺便说一句，如果你没有声明`get_choice`，你应该把它的函数体放在 BEFORE 之前`calc`。另一个问题是`get_choice(void)`return `char`，但您将操作数声明为`int`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T04:55:00.373

> 我收到一条错误消息，提示“get_choice 的隐式函数在 C99 中无效”

在 C 中，您需要在调用之前*声明一个函数；*否则编译器不知道返回类型应该是什么。

你可以做两件事之一。一，你可以`get_choice`在调用函数之前声明它：

```
float calc(float number1, float number2)
{
    float answer;
    int operand;

    char get_choice(void);

    operand =get_choice();// problemmmm
} 
```

或者，您可以切换定义函数的顺序，以便在`get_choice`调用函数之前定义函数（我的偏好）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T05:00:17.060

IC/C++，编译器需要知道标识符的类型（大小），而不是它持有的特定值（如果是变量）。这称为[前向声明](http://en.wikipedia.org/wiki/Forward_declaration)

在您的情况下，编译器不知道`get_choice()`您何时从`calc()`.

# objective-c - unsafe_unretained 和弱并在 ARC 下分配？

> ID：14669463
> 
> 赞同：0
> 
> 时间：2013-02-03T04:22:26.257
> 
> 标签：objective-c

> **可能重复：**
> [强 / 弱 / 保留 / unsafe_unretained / 分配](https://stackoverflow.com/questions/9784762/strong-weak-retain-unsafe-unretained-assign)

ARC下unsafe_unretained和weak and assign有什么区别？多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:26:44.587

从文档中：

> 弱指定不保持被引用对象活动的引用。当对象没有强引用时，弱引用设置为 nil。

`Assign`与 相同，`weak`只是它没有将指向已释放实例的指针设置为 nil，可能会留下悬空指针。`Assign`并且`unsafe_unretained`用法相同。

编辑：哦，我的，似乎我严重混淆了财产属性和所有权限定符；我原来的答案是正确的。`Assign`并且`unsafe_unretained`都是暗示`__unsafe_unretained`其支持实例变量的所有权限定符的属性属性。用于`unsafe_unretained`向后兼容 iOS 4 等`assign`。

# android - 断开wifi连接的正确位置

> ID：14669467
> 
> 赞同：0
> 
> 时间：2013-02-03T04:22:52.403
> 
> 标签：android, android-activity, android-wifi

我正在构建一个应用程序。该应用程序需要在启动时连接到 Wifi，并且当您退出应用程序或应用程序崩溃时，它必须关闭/断开 wifi。

1.  我需要您对在 Activity 中放置 diconnect 命令的位置提出建议。

2.  应用程序崩溃时是否会调用任何常用方法？如果是这样，我可以尝试在那里安装 Wifi disconnect 命令。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:25:01.780

将断开连接置于 onPause（如果您希望它在用户转到另一个应用程序时关闭 wifi）或 onStop（如果您希望它仅在您的活动结束时关闭）。

崩溃时不会调用任何内容，因为假定您处于不可恢复的状态。

# jquery - jquery：我怎样才能一个接一个地复制元素？

> ID：14669471
> 
> 赞同：1
> 
> 时间：2013-02-03T04:23:21.810
> 
> 标签：jquery

我试图在另一个元素的内容之后添加一个元素的内容。下面的代码将成功*移动*元素。我想要/需要做的只是将元素的精确副本放置到该位置？

```
$('#row' + after_index).after($('#availablesongs')); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T04:24:43.510

```
$('#row' + after_index).after($('#availablesongs').clone()); 
```

# javascript - Date.getTimezoneOffset 倒置？

> ID：14669475
> 
> 赞同：7
> 
> 时间：2013-02-03T04:23:59.330
> 
> 标签：javascript, date, timezone-offset

我的服务器收到 JSON 响应，以秒为单位提供 UTC Unix 时间戳。我将其解析为将在图表中使用的 JavaScript 日期（在用户的语言环境中显示时间）。

`Date`根据_ `getTimezoneOffset()`_ [MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)，将两者都转换为毫秒，并返回总和。现在我在用户的语言环境中有一个 JavaScript 友好的 Unix 时间戳。

但是，我没有。

事实证明，`(new Date()).getTimezoneOffset()`在 GMT-5 中返回（正）300，在 GMT+2 中返回 -120。为什么偏移量会反转？我本来希望偏移量与时区的符号相匹配 - 即：我需要减去 300 分钟才能到达 GMT-5，并添加 120 分钟才能到达 GMT+2。相反，我必须减去返回的值`getTimezoneOffset`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T04:31:03.337

没有。

[规范（§15.9.5.26）](http://ecma262-5.com/ELS5_HTML.htm#Section_15.9.5.26)说：

> **15.9.5.26 Date.prototype.getTimezoneOffset()**
> 
> 以分钟为单位返回本地时间和 UTC 时间之间的差异。
> 
> 1.  设*t*为该时间值。
> 2.  如果*t*是 NaN，则返回 NaN。
> 3.  返回 ( *t* - LocalTime(t)) / *msPerMinute*。

# ssl - SSL dns 区别

> ID：14669477
> 
> 赞同：-3
> 
> 时间：2013-02-03T04:24:18.003
> 
> 标签：ssl

我有一个简单的问题，我应该知道，但我只是想确定一下。

我想购买 ssl 证书，但是当我打电话给他们订购时，他们问我是否想要“example.ca”或“www.example.ca”的证书。不想犯错误，我决定从这里的专家那里得到澄清。

我没想到会出现这种类型的问题，因为我相信它们实际上是相同的，但是在被问到这个问题之后，我还想知道在编程方面是否还有其他我应该知道的关于两者之间的区别。

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T04:32:02.200

获取为 颁发的证书`www.example.ca`，但请确保供应商会向您颁发包含基本`example.ca`域名作为主题替代名称的证书。我知道 GoDaddy 的证书可以做到这一点，但您可以咨询其他供应商，因为他们可能也会这样做。不要为 SAN（Subject Alt Name）证书支付额外的现金。这些适用于试图保护多个不同主机名（例如`www.example.ca`，`www.otherexample.ca`）的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T04:37:50.767

在编程方面，一些服务器可能要求每个子域有一个单独的 IP 地址，因此 www.example.ca 与 shop.example.ca 不同。

# wordpress - 具有 SEF 页面层次结构的 wordpress 自定义插件

> ID：14669483
> 
> 赞同：0
> 
> 时间：2013-02-03T04:25:00.593
> 
> 标签：wordpress, plugins

这是我的问题。我的公司需要将供应商数据库添加到我们的 wordpress 网站。现有的插件都不能满足我们的需要，而且我们已经有一个包含我们所有信息的 mysql 数据库，所以我们需要创建一个插件或其他东西来做我们需要的事情。

这些 url 需要可直接访问并具有 SEF url。因此，例如：

```
mysite.com/vendors/
mysite.com/vendors/pipe-manufacturers/
mysite.com/vendor/bobs-pipes/ 
```

而且，自定义内容需要出现在 wordpress 模板中。

真的有2个选择：

1) 找到一种在 wordpress 之外编写应用程序的方法，但找到一种方法来引导 wordpress 以显示页眉、页脚和侧边栏。

2）从wordpress内部运行应用程序。

所以我选择了选项#2。我创建了一个名为“vendor.php”的新模板文件，然后开始工作。我将此代码添加到我的主题的functions.php中：

```
add_filter( 'template_include', 'xyz_template_check' );

function xyz_template_check() {
    global $template;

    $rqst = $_SERVER['REQUEST_URI'];

    $ra = split("/", $rqst);

    if ($ra[1] == "vendors") {

        $template_file = get_stylesheet_directory() . '/vendors.php';
        return $template_file;

    }

    return $template;

} 
```

那么上面的代码做了什么，如果它看到“vendors”这个词作为站点名称之后的url的第一部分，它会将你发送到vendor.php。这非常有效....

除了...

Wordpress 认为找不到该页面。它返回一个 404 标题，并且在页面标题和面包屑中找不到。

使用永久链接“/vendors/”添加一个名为“供应商数据库”的页面可修复主页。但实际上将有数百个供应商和不同的类别。我不能为每个人创建一个自定义页面。这需要是动态的。

那么，我如何让 wordpress 给出 200，并提供可接受的页面标题、面包屑等。

甚至不要让我开始使用危险的 wp_title 过滤器。这没有像记录的那样工作。虽然，我只是想到这可能是 Wordpress SEO 的问题（wp_title 过滤器问题）。

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:09:35.123

好的，知道了。解决方案是使用上面提到的重写 api 来查找模式 /vendors/，让它知道它是一个有效的 URL。再加上我现有的模板覆盖，这就是我所需要的。

# odata - 在 Web 浏览器中查看 Odata 响应

> ID：14669500
> 
> 赞同：1
> 
> 时间：2013-02-03T04:29:09.633
> 
> 标签：odata, odata4j

**大家**
好，我使用 Odata4j 创建 Odata 服务并部署在 tomcat 中。当我使用*芝麻数据浏览器*时，我可以看到一个
![](../Images/09187627391d9fc6b73c8f73609ec886.png)带有标题的表（如果我点击 THREAD ）。我的问题应该是在网络浏览器中查看相同数据的 url 是什么？我想在服务中使用它，所以想知道 url。

如果我在*`http://localhost:8888/OdataEx/example.svc`*浏览器中输入这个，我可以看到一些 XML

```
<?xml version="1.0" encoding="utf-8" ?> 
 <service xmlns="http://www.w3.org/2007/app" xml:base="http://localhost:8888/OdataEx/example.svc/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app">
 <workspace>
  <atom:title>Default</atom:title> 
 <collection href="Threads">
  <atom:title>Threads</atom:title> 
  </collection>
  </workspace>
  </service> 
```

Java 代码生成服务是

```
public class ExampleProducerFactory implements ODataProducerFactory {
  public ODataProducer create(Properties properties) {
    InMemoryProducer producer = new InMemoryProducer("example");
    // expose this jvm's thread information (Thread instances) as an entity-set called "Threads"
    producer.register(Thread.class, Long.class, "Threads", new Func<Iterable<Thread>>() {
      public Iterable<Thread> apply() {
        ThreadGroup tg = Thread.currentThread().getThreadGroup();
        while (tg.getParent() != null)
          tg = tg.getParent();
        Thread[] threads = new Thread[50];
        int count = tg.enumerate(threads, true);
        return Enumerable.create(threads).take(count);
      }
    }, Funcs.method(Thread.class, Long.class, "getId"));
    return producer;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:23:43.613

要查看特定实体集，只需将实体集名称附加到 URL。例如：

示例服务 URL 为：[http ://services.odata.org/OData/OData.svc/](http://services.odata.org/OData/OData.svc/)

要查看 Products 实体集，请访问：[http ://services.odata.org/OData/OData.svc/Products](http://services.odata.org/OData/OData.svc/Products)

请注意，这也在 .svc 直接返回的服务文档中进行了描述。每个集合元素都有一个 href 属性，它是指向该集合的相对 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T11:39:52.740

如果您想从浏览器中查看数据，只需在 .svc 后添加实体集名称。也可以放查询查看过滤后的数据

示例服务 URL 为：[http ://services.odata.org/OData/OData.svc/](http://services.odata.org/OData/OData.svc/)

[http://services.odata.org/OData/OData.svc/entitynameset](http://services.odata.org/OData/OData.svc/entitynameset)

# matlab - 在matlab中对齐3d图中的轴标签

> ID：14669503
> 
> 赞同：4
> 
> 时间：2013-02-03T04:30:08.110
> 
> 标签：matlab, matlab-figure, axis-labels

我使用以下 matlab 命令绘制网格数据

```
[x, y] = meshgrid(-10:0.1:10, -10:0.1:10);
z = exp(-x.^2 - y.^2);
mesh(x, y, z);
xlabel('time variable');
ylabel('space variable');
zlabel('wave'); 
```

您会看到，无论如何旋转轴，x 和 y 标签始终水平对齐。在我旋转轴时，有什么方法可以使其分别与 x 轴和 y 轴对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T04:44:34.037

已经提交了将轴标签与图轴对齐的[文件](http://www.mathworks.com.au/matlabcentral/fileexchange/27450-align-axes-labels-in-3d-plot/content/axesLabelsAlign3D.m)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T21:04:47.723

您可以设置`rotation`每个标签的属性：

```
set(get(gca,'xlabel'),'rotation',angle); %where angle is in degrees 
```

# php - 直接链接脸书视频

> ID：14669512
> 
> 赞同：2
> 
> 时间：2013-02-03T04:31:34.663
> 
> 标签：php, facebook, hotlinking

Facebook 视频使用令牌等来授权谁可以流式传输视频，但同时我看到一些网站允许在该网站上向公众提供相同的内容。谁能解释一下如何直接从 facebook 链接视频供任何人观看？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-14T22:05:59.113

```
<iframe src="https://www.facebook.com/video/embed?video_id=***FACEBOOKVIDEOID***" frameborder="0" height="484" width="860"></iframe> 
```

我在我的网站上使用它：> [http://bohouth.com](http://bohouth.com) 你可以看到你自己

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-04T05:37:47.040

1.  右键单击您的 Facebook 视频墙，然后选择在新选项卡/窗口中打开
2.  复制网址 ....（例如 ---> hxxps://www.facebook.com/video.php?v=333795456792280 ）

3.  转到：[http](http://www.fbdown.net/down.php) ://www.fbdown.net/down.php ---然后将您的 facebook 视频链接粘贴到那里...

4.  搜索以低质量下载视频的链接，右键单击然后选择复制链接位置

现在你得到你的Facebook视频直接链接，像这样......

hxxps://fbcdn-video-aa.akamaihd.net/hvideo-ak-xaf1/v/t42.1790-2/10645446_333805790124580_926756394_n.mp4?oh=4afdeb36de7f27596825e4a09e451ae9&oe=542FA3AE& **gda** =1412411313_7c80217b8c75e257693cb17ab6c43d79

祝你好运

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-05-15T02:29:57.997

[您可以使用https://www.videofk.com/facebook-video-download](https://www.videofk.com/facebook-video-download)下载 Facebook 视频，这对我来说是最好的。

# java - 试图实现一个类

> ID：14669513
> 
> 赞同：0
> 
> 时间：2013-02-03T04:31:45.587
> 
> 标签：java

我试图获得帮助以使用我的汽车编译器运行我改变了一些东西并且我有 1 个错误

```
public class AutomobileDescription
{ 
    /**
    Constructor to display the make, model and price the new automobile I wish to purchase
   */

    public AutomobileDescription(String carMake, String carModel, carPrice) 
    {
        make = m; 
        model = mo;
        price = p; 
    } 
     public String m =("Toyota");
     public String mo =("Camry");
     public String p =("22055");

     public String getAutomobileinfo()
     {  
     return m + mo +  p;
     Automobile myAutomobile = new Automobile(Toyota, Camry, 22055);
     System.out.println("The Make, Model and Price of the car is: m + mo + p "); 

    }
} 
```

----jGRASP exec: javac -g AutomobileDescription.java

AutomobileDescription.java:7：错误：预期的公共汽车描述（字符串 carMake，字符串 carModel，carPrice）^ 1 错误

----jGRASP楔2：进程退出代码为1。 ----jGRASP：操作完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:20:59.310

```
public AutomobileDescription(String carMake, String carModel, carPrice) 
                                                              ^^^^^^^^ 
```

您省略了参数的*类型*`carPrice`。很可能你想要

```
public AutomobileDescription(String carMake, String carModel, BigDecimal carPrice) 
```

另一个问题...

```
 public String getAutomobileinfo()
 {  
     return m + mo +  p;
     Automobile myAutomobile = new Automobile(Toyota, Camry, 22055);
     System.out.println("The Make, Model and Price of the car is: m + mo + p "); 
} 
```

该`return`语句意味着永远无法达到以下两个语句，这将导致您更正第一个问题后编译错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T05:21:21.560

您在这里有多个问题：

```
public class AutomobileDescription
{ 
    /**
    Constructor to display the make, model and price the new automobile I wish to purchase
   */

public AutomobileDescription(String carMake, String carModel, /*no return type*/ carPrice) 
{
    make = m; 
    model = mo;
    price = p; 
} 
 public String m =("Toyota");
 public String mo =("Camry");
 public String p =("22055");

    public String getAutomobileinfo()
    {  
     return m + mo +  p; /*return? then why statements after this?*/
     Automobile myAutomobile = new Automobile(Toyota, Camry, 22055);
     System.out.println("The Make, Model and Price of the car is: m + mo + p "); 

    }
} 
```

解决方案：

```
public class AutomobileDescription{ 
/**
Constructor to display the make, model and price the new automobile I wish to purchase
*/

public AutomobileDescription(String carMake, String carModel, String carPrice) 
{
    m = make;
    mo = model;
    p = carPrice;
} 
 private String m;
 private String mo;
 private String p;

 public String getAutomobileinfo()
 {  
    return m + mo +  p;
 }
 public static void main(String[] args){
    AutomobileDescription myAutomobile = new AutomobileDescription("Toyota", "Camry", "22055");
    System.out.println("The Make, Model and Price of the car is: " + myAutomobile.getAutomobileinfo()); 
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T04:35:47.437

这不是有效的方法名称：

```
public String getMake + getModel + getPrice; 
```

修复它。如果您仍然有问题，请更详细一点。甚至可能发布错误消息！

# python - 如何在访客指定的日期发送电子邮件？

> ID：14669516
> 
> 赞同：1
> 
> 时间：2013-02-03T04:32:06.947
> 
> 标签：python, django, cron, redis, celery

我正在构建一个 django 应用程序，让用户访问我的网站，输入一串文本、他们的电子邮件、朋友的电子邮件以及他们希望收到电子邮件的日期。

我将如何在他们在 date_returned 字段中请求的日期将他们输入的文本通过电子邮件发送给他们？有什么具体的应用吗？循环？ETC

谢谢，

我的 Models.py 看起来像：

```
class bet(models.Model):
name = models.CharField(max_length=100)
email_1 = models.EmailField()
email_2 = models.EmailField()
wager = models.CharField(max_length=300)
date_submitted = models.DateField(_("Date"), auto_now_add=True) 
date_returned = models.DateField(null=True)

def __unicode__(self):
    return self.name

class BetForm(ModelForm):
name = forms.CharField(widget=forms.TextInput(attrs={'placeholder': 'Bet Name'}),      max_length=100)
email_1 = forms.EmailField(widget=forms.TextInput(attrs={'placeholder': 'Your Email'}))
email_2 = forms.EmailField(widget=forms.TextInput(attrs={'placeholder': 'Your Friend\'s Email'}))
wager = forms.CharField(widget=forms.TextInput(attrs={'placeholder': 'What\'s The Wager?'}), max_length=200)
date_returned = forms.DateField(widget=SelectDateWidget())
class Meta:
    model=bet 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T05:09:05.387

为此，您可以在 django 中编写[自定义管理命令。](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)然后，您将需要安排每天[`cron job`](http://en.wikipedia.org/wiki/Cron)运行此命令。

您还应该添加一个`BooleanField`以检查电子邮件是否已发送。

请看一个相关的问题 - [Django - Set Up A Scheduled Job?](https://stackoverflow.com/questions/573618/django-set-up-a-scheduled-job)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T05:11:01.817

在 django 和 python 中，发送电子邮件很容易，所以我不会涉及。在某些特定事件中发送电子邮件的问题不是 Web 应用程序的工作。我建议设置一个调用 django 命令的 cron 作业（[https://docs.djangoproject.com/en/dev/howto/custom-management-commands/](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)）。编写一个简单的命令来使即将发生的事件出列并发送适当的电子邮件。让 cron 定期运行以模拟实时。

# 模型.py

```
class Bet(models.Model):
    name = models.CharField(max_length=100)
    email_1 = models.EmailField()
    email_2 = models.EmailField()
    wager = models.CharField(max_length=300)
    date_submitted = models.DateField(_("Date"), auto_now_add=True) 
    date_returned = models.DateField(null=True)
    email_sent = model.BooleanField(default=False) 
```

# 出队邮件.py

```
from django.core.management.base import BaseCommand, CommandError
from app_name.models import bet 

class Command(BaseCommand):
    def handle(self, *args, **options):
        for bet in bet.objects.filter(date_returned__gt=datetime.datetime.now(),email_sent=False):
            #python code to send email
            bet.email_sent=True
            bet.save() 
```

# crontab

* * * * * python manage.py dequeueemail

如果您想在不实际安装 cron 的情况下破解此应用程序，请查看此应用程序 ( [http://code.google.com/p/django-cron/](http://code.google.com/p/django-cron/) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T10:31:56.413

从 Celery 标签上的问题来看，您可能对使用 Celery 的解决方案持开放态度，所以我会提出一个。类似于只运行一次的 cron 作业，Celery 可以将任务延迟到给定的日期时间：[http ://celery.readthedocs.org/en/latest/userguide/calling.html#eta-and-countdown](http://celery.readthedocs.org/en/latest/userguide/calling.html#eta-and-countdown)

这是相当直接的。只需为您的调用提供关键字 arg `eta`，该任务将在那时执行。`datetime``.apply_async`

# powershell - NuGet init.ps1 执行两次

> ID：14669518
> 
> 赞同：3
> 
> 时间：2013-02-03T04:32:33.187
> 
> 标签：powershell, nuget

我正在关注“[创建显示更新通知的 NuGet 包](https://stackoverflow.com/questions/11050030/create-a-nuget-package-that-shows-update-notifications)”中的解决方案，以获取有关 nuget 包更新的通知。

但是 init.ps1 脚本执行了两次。

我删除了所有代码，因此 init.ps1 中只有以下代码。

```
param($installPath, $toolsPath, $package, $project)
if ($project -eq $null) {
$project = Get-Project
}

Write-Host "Hello, I'm running inside of init.ps1" 
```

当我关闭解决方案并重新打开它时，在输出窗口中文本会出现两次。

![重复初始化执行](../Images/f398ae704d43b0ada4a71d0d17325b7e.png)

我正在使用 VS 2012，NuGet 2.2.31210

我检查了 packages.config 文件，我的包只有一个条目。

为什么它运行两次，有没有办法让它只运行一次？

谢谢，乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T05:27:30.070

在 init.ps1 脚本中，Get-Project 将返回解决方案中的随机项目，但不返回已安装包的特定项目。

使用 $projects = Get-Project -All 获取解决方案中的项目列表，遍历项目并搜索 packages.config 以检查当前项目是否安装了包。

# iphone - 发送和接收流

> ID：14669521
> 
> 赞同：0
> 
> 时间：2013-02-03T04:33:34.653
> 
> 标签：iphone, objective-c, cocoa, stream, mp3

我想从我的 Mac 应用程序提供一个 mp3 的二进制流，然后用另一个应用程序接收它。我已经做了一些研究，但仍然卡住了。由于源将来自 mp3，我会使用 NSInputStream 吗？我如何能够托管它，以便我可以进入另一台计算机，打开应用程序并接收流？您找到的任何指导或代码都会很棒！

# java - 创建单例管理器时无法对非静态字段进行静态引用

> ID：14669522
> 
> 赞同：1
> 
> 时间：2013-02-03T04:33:50.217
> 
> 标签：java, eclipse

```
public class GameManager {
    private static GameManager INSTANCE;

    private final int INITIAL_SCORE = 0;

    private int mCurrentScore;

    GameManager(){
    }

    public static GameManager getInstance(){
        if(INSTANCE == null){
            INSTANCE = new GameManager();
        }
        return INSTANCE;
    }

    public int getCurrentScore(){
        return mCurrentScore;
    }

    public void incrementScore(int pIncrementBy){
        mCurrentScore += pIncrementBy;
    }

    public void resetGame(){
        mCurrentScore = GameManager.INITIAL_SCORE;
    }
} 
```

我在eclipse中运行上面的代码。我想知道为什么在将 GameManager.INITIAL_SCORE 的值分配给 mCurrentScore 的值时，eclipse 告诉我“无法对非静态字段 GameManager.INITIAL_SCORE 进行静态引用”。mCurrentScore 不是静态的，是吗？如果 mCurrentScore 不是静态的，我为什么要将 INITIAL_SCORE 声明为静态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:35:39.273

```
private final int INITIAL_SCORE = 0; 
```

不是`static`字段，它是实例字段（与 相同`mCurrentScore`）。你只需要返回 INITIAL_SCORE;

您无法使用类名访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T04:38:53.590

当您在变量前面加上类名时，您是在告诉 Java 该变量是静态的。由于变量不是静态的，它会给你一个错误。代码应为：

```
public void resetGame(){
    mCurrentScore = INITIAL_SCORE;
} 
```

# php - PHP 循环没有按应有的方式执行

> ID：14669524
> 
> 赞同：-1
> 
> 时间：2013-02-03T04:34:06.207
> 
> 标签：php, mysql, loops, where

```
 $query = "SELECT * FROM table WHERE data = '$userinput'";
 $row = mysql_query($query);

   while ($row = mysql_fetch_array($row))
    {
         echo $row['data'];
    } 
```

好的所以我的问题是：

1.  mysql_fetch_array 究竟返回什么？
2.  如果我的 WHERE 子句找到多个匹配项，循环不应该执行多次吗？

我正在运行一个程序，我只能打印第一个结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T04:36:53.220

你正在覆盖`$row`. 而是为查询结果使用不同的变量。

```
$query = "SELECT * FROM table WHERE data = '$userinput'";
$result = mysql_query($query);

while ($row = mysql_fetch_array($result))
{
    echo $row['data'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T04:36:08.753

尝试使用`mysql_fetch_assoc($row)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T04:38:13.197

您不应使用与索引和循环变量相同的变量。

```
$row = mysql_query

while( $row = ... 
```

将第一个替换`$row`为`$result`

# java - 如何导入包 android.R 和 myapp.R 而不会发生冲突？

> ID：14669526
> 
> 赞同：0
> 
> 时间：2013-02-03T04:35:17.143
> 
> 标签：java, android

我对java完全陌生，我需要同时导入：

```
import com.myapp.R;
import android.R 
```

同时，我需要使用我的 strings.xml 文件夹中的翻译以及图标`R.drawable.ic_media_play`。但是，由于导入冲突，我得到一个错误。

如何从 android 和我的应用程序访问资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:39:57.800

不要同时导入它们。通过它们的完全限定名称来引用它们。

导入安卓.R

...

doSomething(R.drawable.ic_media_play)

相当于

...

doSomething(android.R.drawable.ic_media_play)

您可以导入您最常用的一个，并为另一个使用完全限定名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T04:40:22.437

您不能同时导入两者。惯例是导入项目的 R 文件 (com.myapp.R)，并在使用 android R 文件时使用完整的包表示法。这样，很容易判断您何时引用自己的标识符，以及何时引用外部标识符。

所以如果你想引用`ic_media_play`标识符，你会使用`android.R.drawable.ic_media_play`.

# android - 设置 RGB 颜色以检测白色物体放在相机前面时的变化，Android

> ID：14669528
> 
> 赞同：0
> 
> 时间：2013-02-03T04:35:45.843
> 
> 标签：android, camera, rgb, motion-detection

我有一部安卓手机，它的摄像头正对着一张棕色的木桌。当有人将一张白纸放在桌子上时，我希望它触发一个意图。

在木桌上，相机返回的 RGB 值对于所有三个 RGB 值都是 85 到 120，正如预期的那样，Android 手机不是白平衡的。

我有一部手机，我可以将红色 RGB 值设置为 if(RedValue > 120){ //fire intent }。这对于该特定电话可靠地工作。但是，对于我想使用的不同 android 手机，工作方式不同。想让它可靠地工作。

我知道白色是 RGB（255、255、255），我应该在所有 RGB 值都必须接近 255 的情况下添加一个 if 语句，例如 230？

如何最好地做到这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T05:29:45.657

研究使用 JavaCV 或 OpenCV。它们支持对象和模式识别。

这是我最近关于在 android 上设置 openCV 的帖子：[使用 OpenCV 设置 Android](https://stackoverflow.com/questions/14554067/setting-up-android-with-opencv/14557005#14557005)

# regex - 用区号+号码或国家+地区+号码捕获手机

> ID：14669531
> 
> 赞同：1
> 
> 时间：2013-02-03T04:36:09.200
> 
> 标签：regex

> **可能重复：**
> [正则表达式将电话号码与国家代码匹配](https://stackoverflow.com/questions/1566544/regular-expression-to-match-phone-numbers-with-country-codes)

目前我有这个正则表达式来验证/捕获电话号码：`^(\+?(?<country>\d{1,3}?) ?)?(\(?0?(?<area>\d{2})\)? ?)?(?<phone>9?\d{4}[-. ]?\d{4})$`

它接受`88888888`, `8888-8888`, `8888.8888`, `11 8888-8888`,`(11) 88888888`等数字`+22 (21) 8888-8888`以及这种格式的每个组合。

问题是：当我通过没有国家代码的区号（像这样：`(11) 8888-8888`或`11 8888-8888`什至`1188888888`）时，它会将区号部分（11）作为国家代码，并将区号留空。

我怎么能做类似`country + area + phone`OR`area + phone`但 NOT的事情`country + phone`？不做这样的事情：

`^(((\(?0?(?<area>\d{2})\)? ?)?|(\+?(?<country>\d{1,3}?) ?)?(\(?0?(?<area>\d{2})\)? ?)?)(?<phone>9?\d{4}[-. ]?\d{4})$`

Wich 是 (area+phone|country+area+phone) 但 area 和 country 正则表达式重复两次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:37:43.640

事实上，两位数的国家代码和两位数的区号之间存在歧义。当正则表达式遇到这种情况时，它会将地区代码视为国家代码，因为国家代码放在第一位，而地区代码是可选的。

**解决方案 #1：使用负前瞻 (?!...)**

为了解决这个问题，可以告诉正则表达式**忽略**后跟电话号码的两位数字国家代码。为了使正则表达式足够小（因此不太复杂），可以只给出电话号码的开头。

这是要使用的负前瞻：`(?!9?\d{4})`

仅当后面没有电话号码的开头 ( `9?\d{4}`) 时，才能将两位数字作为国家代码。

最终的正则表达式是：

```
^(\+?(?<country>\d{1,3}?) ?(?!9?\d{4}))?(\(?0?(?<area>\d{2})\)? ?)?(?<phone>9?\d{4}[-. ]?\d{4})$ 
```

**解决方案#2：模板化正则表达式**

IMO，如果一种风味可以允许使用模板构建正则表达式，那将是一个强大的功能。嗯，这个功能在我所知道的任何口味中都不存在。

但是有一个解决方法。以下代码是用 C# 编写的代码片段

```
(...)
string country = "(\\+?(?<country>\\d{1,3}?) ?)";
string area = "(\\(?0?(?<area>\\d{2})\\)? ?)";
string phone = "(?<phone>9?\\d{4}[-. ]?\\d{4})";
string final_regexp = String.Format("^{1}{2}{3}|{2}?{3}$", country, area, phone);
(...) 
```

# c++ - 排序整数的多维向量？

> ID：14669533
> 
> 赞同：5
> 
> 时间：2013-02-03T04:36:45.240
> 
> 标签：c++, sorting, vector, int, multidimensional-array

信不信由你，当我搜索这个时，我想出了 nada。

如何按“列”之一对 s`vector`的多维进行排序？`int`

提前谢谢了！

**C++**

```
res = mysql_perform_query(conn, "SELECT column1, column2, column3 FROM table1;");
std::vector< std::vector< int > > myVector;
while ((row = mysql_fetch_row(res)) !=NULL){
    int rankedID = atoi(row[0]);
    std::vector< int > tempRow;
    tempRow.push_back(atoi(row[0]));
    tempRow.push_back(atoi(row[1]));
    tempRow.push_back(atoi(row[2]));
    myVector.push_back(tempRow);
} 
```

我想`myVector`按`myVector[i][1]`降序排序。

再次感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T05:20:40.400

```
std::sort(myVector.begin(), myVector.end(), [](const std::vector< int >& a, const std::vector< int >& b){ 
    //If you want to sort in ascending order, then substitute > with <
    return a[1] > b[1]; 
}); 
```

请注意，您将需要 C++11 编译器来编译此代码。正如 Blastfurnace 所建议的，您应该使 lambda 函数接受 const 引用以避免昂贵的副本。

```
#include <iostream>
#include <vector>
#include <algorithm>

int main(){
    std::vector< std::vector< int > > myVector({{3,4,3},{2,5,2},{1,6,1}});
    std::sort(myVector.begin(), myVector.end(), [](const std::vector< int >& a, const std::vector< int >& b){ return a[1] > b[1]; } );

    std::cout << "{";
    for(auto i : myVector){
        std::cout << "[";
        for(auto j : i)
            std::cout << j << ",";
        std::cout << "],";
    }
    std::cout << "}" << std::endl;
    return 0;
} 
```

程序的输出：

```
{[1,6,1,],[2,5,2,],[3,4,3,],} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T05:19:11.757

我的建议是使用结构表虽然：

```
struct Table
{
  Table(int c1, int c2, int c3)
  : column1(c1),
    column2(c2),
    column3(c3)
  {
  }

  int column1;
  int column2;
  int column3;  
}; 
```

将数据库中的每一行放入一个结构中，然后将其存储在向量中：

```
std::vector<Table> myVector;
while ((row = mysql_fetch_row(res)) !=NULL)
{
    myVector.push_back(Table(atoi(row[0]), atoi(row[1]), atoi(row[2]));
} 
```

现在您可以按任何列对向量进行排序

```
#include <algorithm>
struct 
{
    bool operator()(const Table& lhs, const Table& rhs)
    {   
      return lhs.column2 > rhs.column2;
    }   
} ColumnLess;

std::sort(myVector.begin(), myVector.end(), ColumnLess); 
```

如果您使用 C++11，也可以使用 lambda：

```
std::sort(myVector.begin(), myVector.end(), 
         [](const Table& lhs, const Table& rhs){return lhs.column2 < rhs.column2;}); 
```

# c++ - 在 C++ 中使用 std:: 与不使用它有什么区别？

> ID：14669535
> 
> 赞同：1
> 
> 时间：2013-02-03T04:37:08.807
> 
> 标签：c++

> **可能重复：**
> [使用 std 命名空间](https://stackoverflow.com/questions/1265039/using-std-namespace)

我只是想知道是否有理由在某些操作中包含 std:: ，例如 std::sort() 。是因为可能超载吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:45:58.310

除了通常众所周知的用不必要的符号名称和可读性污染当前名称空间的原因之外，还有另一个微妙的原因。

考虑**[std::swap](http://www.cplusplus.com/reference/algorithm/swap/)**的示例，它是交换两个值的标准库算法。对于**[Koenig 算法/ADL](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)**，在使用此算法时必须谨慎，因为：

```
std::swap(obj1,obj2); 
```

可能不会显示与以下相同的行为：

```
using std::swap;
swap(obj1, obj2); 
```

使用 ADL，`swap`调用哪个版本的函数将取决于传递给它的参数的名称空间。
如果存在命名空间`A`并且 if `A::obj1`, `A::obj2`&`A::swap()`存在，那么第二个示例将导致调用`A::swap()`可能不是用户想要的。

此外，如果由于某种原因：
`A::swap(A::MyClass&, A::MyClass&)`和`std::swap(A::MyClass&, A::MyClass&)`都被定义，那么第一个示例将调用`std::swap(A::MyClass&, A::MyClass&)`，但第二个示例将不会编译，因为`swap(obj1, obj2)`它是模棱两可的。

# asp.net-mvc - 传递模型的 Html Partial MVC

> ID：14669537
> 
> 赞同：1
> 
> 时间：2013-02-03T04:37:43.177
> 
> 标签：asp.net-mvc, model-view-controller

我试图在部分方法中传递这个模型

```
@Html.Partial("_RefillModal",new Refill()
                                     {
                                         PatientId=Model.Id
                                     }) 
```

现在在 _RefillModal 中，我正在尝试通过执行 Model.PatientId 来读取 PatientId。但是，我没有得到价值。

我可以通过这样做获得 ID 的值

```
@Html.Partial("_RefillModal",new Refill(),new ViewDataDictionary(){{"PatientId",Model.Id}}) 
```

这是我在部分视图中尝试做的事情

```
@Html.Hidden("Refill.PatientId",Model.PatientId) 
```

这是发生的 Html 标记

```
<input id="PatientId" name="PatientId" type="hidden" value=""> 
```

但是，当我在页面上的任何位置执行 @Modal.PatientId 时，我确实得到了值

所以看起来，如果我在表单中放入任何东西，它就会被覆盖。有解决办法吗？

```
 @using (Html.BeginForm())
        {
//any custom input here gets overriden

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:14:07.223

由于您没有发布您的问题，因此很难看出问题出在哪里，`Partial View`但我会提供一些建议。确保您已将实际声明为`Model`您`Refill`的`_RefillModal`.

```
@model Refill 
```

下一步是确保您实际上在这行代码中传递了一个值：

```
@Html.Partial("_RefillModal", new Refill()
                                 {
                                     /** Make sure that Model.Id actually 
                                         contains some value. */
                                     PatientId = Model.Id
                                 }) 
```

# jquery - MeteorJS 基本 jquery 用法

> ID：14669541
> 
> 赞同：1
> 
> 时间：2013-02-03T04:37:59.110
> 
> 标签：jquery, node.js, meteor

在添加了 jquery 包的干净流星应用程序中，我正在尝试使用基本的 jquery css 选择器。我究竟做错了什么？非工作示例可以在这里找到：http: [//jquery-test.meteor.com/](http://jquery-test.meteor.com/)

JavaScript 直接放在生成的`template.hello.events`方法下方。

JS：

```
$("#foo").click( function() {
console.log("clicked!");
}); 
```

HTML：

```
<button id="foo" style="border: 10px">This is a test div</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T04:50:01.340

您必须将 jQuery 代码放在`Template.hello.rendered`函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T22:56:18.257

这可能是解决您的问题的另一种方法：

**HTML：**

```
<button id="foo" class="foo" style="border: 10px">This is a test div</button> 
```

**JS：**

```
Template.hello.events({
 'click .foo': function(event){
    console.log('clicked');
    console.log(event.currentTarget);  
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T04:50:36.563

正如您提到的，我看到了链接，您`elems are dynamically generated`和您正在尝试将事件放在 dom 中不可用的那些上。因此，您必须将事件委托给所有其他元素的`existing closest parent`or 。`document``existing parent`

您可以像这样绑定事件：

```
$(document).on('click', '#foo', function() {
    console.log("clicked!");
}); 
```

和`make sure to load jQuery first.`

# iphone - iPhone 模拟器启动时自动打开 Safari 调试器

> ID：14669542
> 
> 赞同：22
> 
> 时间：2013-02-03T04:38:08.680
> 
> 标签：iphone, xcode, safari, automator

Safari 中的 iOS Web 调试器是蜜蜂的膝盖，但每次重启模拟器时它都会关闭。每次构建后从菜单中重新打开它不仅很烦人，而且调试启动期间发生的任何行为也很棘手。

有没有办法在 Xcode 中设置触发器以在每次构建后自动打开 Safari 调试器，或者是否可以构建 shell 脚本或 Automator 操作来进行构建并立即打开调试器？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-04-23T14:37:42.573

这是部分解决方案。这将一键打开 Safari 的调试窗口，这要好得多，但不是自动的。

在你的 Mac 上打开`Script Editor`（Command + Space Bar 并在脚本编辑器中输入）

粘贴此代码：

```
-- `menu_click`, by Jacob Rus, September 2006
-- 
-- Accepts a list of form: `{"Finder", "View", "Arrange By", "Date"}`
-- Execute the specified menu item.  In this case, assuming the Finder 
-- is the active application, arranging the frontmost folder by date.

on menu_click(mList)
    local appName, topMenu, r

    -- Validate our input
    if mList's length < 3 then error "Menu list is not long enough"

    -- Set these variables for clarity and brevity later on
    set {appName, topMenu} to (items 1 through 2 of mList)
    set r to (items 3 through (mList's length) of mList)

    -- This overly-long line calls the menu_recurse function with
    -- two arguments: r, and a reference to the top-level menu
    tell application "System Events" to my menu_click_recurse(r, ((process appName)'s ¬
        (menu bar 1)'s (menu bar item topMenu)'s (menu topMenu)))
end menu_click

on menu_click_recurse(mList, parentObject)
    local f, r

    -- `f` = first item, `r` = rest of items
    set f to item 1 of mList
    if mList's length > 1 then set r to (items 2 through (mList's length) of mList)

    -- either actually click the menu item, or recurse again
    tell application "System Events"
        if mList's length is 1 then
            click parentObject's menu item f
        else
            my menu_click_recurse(r, (parentObject's (menu item f)'s (menu f)))
        end if
    end tell
end menu_click_recurse

menu_click({"Safari", "Develop", "Simulator", "index.html"}) 
```

打开模拟器后，单击脚本上的运行（您可能需要第一次在设置中允许脚本编辑器）。

（可选）您可以将脚本保存为应用程序，这样您就不必打开脚本编辑器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-11T00:27:17.563

有一个[问题应该被标记为重复](https://stackoverflow.com/questions/13073496/when-ios-simulator-starts-is-it-possible-to-automatically-load-the-web-inspecto)，描述使用 setTimeout() 给您足够的时间将窗口切换到 Safari 并设置断点。

像这样的东西，其中 startMyApp 是您的应用程序的引导功能：

```
setTimeout(function () {
  startMyApp();
}, 20000); 
```

这是超级贫民区，但确实有效。我也通过[http://www.apple.com/feedback/safari.html](http://www.apple.com/feedback/safari.html)提交了功能请求以关闭循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-03T00:34:05.220

扩展@Prisoner 的答案，如果您使用 WKWebView，您可以：

```
 let contentController:WKUserContentController = WKUserContentController()

    let pauseForDebugScript = WKUserScript(source: "window.alert(\"Go, turn on Inspector, I'll hold them back!\")",
                                           injectionTime: WKUserScriptInjectionTime.AtDocumentStart,
                                           forMainFrameOnly: true)
    contentController.addUserScript(pauseForDebugScript)

    let config = WKWebViewConfiguration()
    config.userContentController = contentController
    //Init browser with configuration (our injected script)
    browser = WKWebView(frame: CGRect(x:0, y:0, width: view.frame.width, height: containerView.frame.height), configuration:config) 
```

同样重要的是从`WKUIDelegate`协议实现警报处理程序

```
//MARK: WKUIDelegate
func webView(webView: WKWebView, runJavaScriptAlertPanelWithMessage message: String,
             initiatedByFrame frame: WKFrameInfo, completionHandler: () -> Void) {

    let alertController = UIAlertController(title: message, message: nil,
                                            preferredStyle: UIAlertControllerStyle.Alert);

    alertController.addAction(UIAlertAction(title: "OK", style: UIAlertActionStyle.Cancel) {
        _ in completionHandler()}
    );

    self.presentViewController(alertController, animated: true, completion: {});
} 
```

和一件小事，以防万一你可能有`UIAlertController:supportedInterfaceOrientations was invoked recursively`错误添加以下扩展名（[来自this SO Answer](https://stackoverflow.com/a/32010520/923340)）

```
extension UIAlertController {     
    public override func supportedInterfaceOrientations() -> UIInterfaceOrientationMask {
        return UIInterfaceOrientationMask.Portrait
    }
    public override func shouldAutorotate() -> Bool {
        return false
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-27T10:24:27.197

将汤姆的答案与我的解决方案结合起来，首先执行以下操作：

*   按照上面 Tom 的描述创建一个应用程序
*   在“系统偏好设置 -> 安全和隐私 -> 隐私 -> 辅助功能”中添加您的新脚本应用程序并确保允许它控制您的计算机

现在，我正在使用cordova，并从命令行构建、运行模拟器并打开 safari 调试控制台：

```
cordova build ios; cordova emulate ios; open /Applications/Xcode.app/Contents/Developer/Applications/Simulator.app; sleep 1 ; open /PATH/TO/OpenDevelop.app/ 
```

确保将 /PATH/TO/ 替换为保存脚本的适当路径。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-02-20T03:41:44.610

嗯，我不认为你可以这样做，但你可以在 web 调试器中按“CTRL+R”。

# ruby-on-rails - 设计具有所有者的用户/帐户模型

> ID：14669554
> 
> 赞同：1
> 
> 时间：2013-02-03T04:39:39.127
> 
> 标签：ruby-on-rails, database-design

我有一个简单的`Account`and设置`User`：

```
class Account < ActiveRecord::Base
  has_many :users
end

accounts
--------
id
name
... 
```

.

```
class User < ActiveRecord::Base
  belongs_to :account
end

users
-----
id
account_id
username
... 
```

现在，我如何设计一个`Account`具有“所有者”（对帐户拥有完全权限的用户）。我能想到的选项：

1.  在名为的用户上添加一个布尔字段`account_owner`？（我觉得不对）
2.  `accounts`在表上添加一个名为 的字段`user_id`，从而产生一种先有鸡还是先有蛋的问题。
3.  还有什么？角色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:39:57.037

像这样的东西会起作用吗？您需要将`owner_id`外键添加到`Account`.

```
class Account < ActiveRecord::Base
  belongs_to :owner, class_name: "User"
  has_many :users
end

class User < ActiveRecord::Base
  belongs_to :account
end

# Somewhere in your code...

account = Account.create(name: "Account 1")
owner   = User.create(username: "tom")

account.users << owner
account.users << User.create(username: "sarah")
account.owner = owner
account.save 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T04:48:37.540

如果一个帐户可能有多个所有者，您可以向用户添加一个角色列。

```
@user.account == @account && @user.role == 'admin' 
```

# php - php 缓存和 .htaccess 缓存

> ID：14669559
> 
> 赞同：0
> 
> 时间：2013-02-03T04:41:08.670
> 
> 标签：php, .htaccess, caching, header

还有另一个与此类似的线程已关闭并且其中没有任何有用的信息：[https ://stackoverflow.com/questions/11955822/php-file-caching-vs-cache-through-htaccess](https://stackoverflow.com/questions/11955822/php-file-caching-vs-cache-through-htaccess)

如果通过.htaccess进行缓存，是否有必要实现一个php缓存系统？这是我当前的 .htaccess 缓存：

```
<IfModule mod_headers.c>
    # Cache Media Files
    <FilesMatch "\.(ico|pdf|flv|jpg|jpeg|png|gif|swf|mp3|mp4)$">
        Header set Cache-Control "public"
        Header set Expires "Mon, 20 Apr 2015 20:00:00 GMT"
        Header unset Last-Modified
    </FilesMatch>

    # Cache JavaScript & CSS
    <FilesMatch "\.(js|css)$">
        Header set Cache-Control "public"
        Header set Expires "Mon, 20 Apr 2015 20:00:00 GMT"
        Header unset Last-Modified
    </FilesMatch>

    # Disable Caching for Scripts and Other Dynamic Files
    <FilesMatch "\.(pl|php|cgi|spl|scgi|fcgi)$">
        Header unset Cache-Control
    </FilesMatch>
</IfModule> 
```

有了这个文件缓存，构建一个 php 缓存系统会进一步改善我的网站吗？或者在 .htaccess 中压缩数据并使用 php 进行缓存是否更有意义？我只是想了解哪种缓存方法可以更好地改善网站，或者是否建议同时使用这两种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T05:35:08.880

对于静态文件，可以通过 HTML Headers 标签进行缓存，而 .htaccess 浏览器会将其缓存在本地机器中。

对于 .PHP 的动态内容，您可以缓存小部件、对象以减少对 mysql 数据库的查询调用。

你可以试试[这个](http://www.phpfastcache.com)。例如，它在 600 秒内缓存 $products，而您的 PHP 只向数据库发送 1 个请求。如果您有 500 名在线访问者，您的页面仍然使用来自第一批访问者的 1 个查询来提供 500 名访问者。

```
<?php
    include("php_fast_cache.php");
    // try to get from Cache first.
    $products = phpFastCache::get("products_page");

    if($products == null) {
        $products = YOUR DB QUERIES || GET_PRODUCTS_FUNCTION;

        // set products in to cache in 600 seconds = 5 minutes
        phpFastCache::set("products_page",$products,600);
    }

    foreach($products as $product) {
        // Output Your Contents HERE
    }
?> 
```

如果您使用的是 Wordpress，您可以看到所有缓存插件，它们通过 PHP（文件或 Memcache）缓存您的内容，并通过 .htaccess 缓存您的图像、css、js

我们需要他们两个一起来加速站点并节省带宽/CPU

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:01:56.797

您仅对静态文件进行客户端缓存。

PHP 中的缓存解决了一个完全不同的问题——应用程序的服务器端性能问题。因此，如果您的网站加载速度太慢或导致服务器负载过高，您应该使用它。

有许多策略如何实现服务器端缓存，由您决定最适合您的应用程序的策略。

例如，您可以缓存 SQL 查询结果，也可以缓存整个网页的 HTML 输出。当您的数据更改时，不要忘记缓存失效。

# mongodb - MongoDB（通过 Fuelphp）：在数组上添加条目

> ID：14669562
> 
> 赞同：0
> 
> 时间：2013-02-03T04:42:20.230
> 
> 标签：mongodb, mongodb-php, fuelphp

我会很感激这里的帮助。出于讨论的目的，我在这里有一个示例（我将使用粘贴箱作为代码）：

[http://pastebin.com/VPuyKn6W](http://pastebin.com/VPuyKn6W)

我正在尝试产生这个输出：

[http://pastebin.com/4iMLacRu](http://pastebin.com/4iMLacRu)

我知道我需要使用 $push 来完成这项工作。但是经过测试，它似乎没有做任何事情。我按照[文档](http://fuelphp.com/docs/classes/mongo/methods.html#/get_collection)中规定的说明进行操作，但我没有使用 $Id，而是使用 user_id 在集合中查找文档。这是我的模型：

[http://pastebin.com/QB94tbZn](http://pastebin.com/QB94tbZn)

我是否误解了什么，或者我没有正确使用 $push 运算符，或者我如何创建文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T05:16:00.863

走出去后，我终于得到了答案。

```
 public static function create_mongo()
{
    $data = array(
        'user_id'       => '123895',
        'First_Name'    => 'John',
        'Last_name'     => 'Doe',
        'sites'      => array(
            array(
                'title' => 'Sankaku Complex',
                'site'  => 'http://sankakucomples.com'
            )
        )
    );

    $db = Fuel\Core\Mongo_Db::instance();
    $db->insert('test_collection',$data);
} 
```

站点应该是一个带有数组变量的数组。

# ruby - 构建有效的数组整数增量器，每个数字具有不同的上限

> ID：14669563
> 
> 赞同：4
> 
> 时间：2013-02-03T04:42:21.857
> 
> 标签：ruby

我想编写一个由数字数组表示的计数器，从：

```
[0, 0, 0] 
```

这里的限制是，每个位置都有不同的上限，所以它不一定是 9 或其他东西，但它是给定的。例如：

```
[4, 2, 1] 
```

这将导致以下递增序列：

```
[0, 0, 0]
[0, 0, 1] 
[0, 1, 0]
[0, 1, 1]
[0, 2, 0]
[0, 2, 1]
[1, 0, 0]
.
.
. 
```

当然，我可以想到一个使用模数并将每个结转添加到下一个位置的解决方案。但是有人知道如何有效地实现这一点，分别使用漂亮的 Ruby 语法而不会使它过于混乱吗？

那是我天真的实现：

```
max = [10, 1, 1, 1, 10]
counter = [0, 0, 0, 0, 0]

i = counter.length-1
while counter != max do
   counter[i] = counter[i] + 1
   while counter[i] > max[i]
      counter[i] = 0
      i = i - 1
      counter[i] = counter[i] + 1
   end
   i = counter.length-1
 end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T05:33:32.280

我不确定效率，但这是我的看法：

```
start = [0, 0, 0]
cap = [4, 2, 1]

start.zip(cap).map{ |i, c| (i..c).to_a }.reduce(&:product).map &:flatten 
```

产生类似的东西：

```
[[0, 0, 0],
 [0, 0, 1],
 [0, 1, 0],
 [0, 1, 1],
 [0, 2, 0],
 [0, 2, 1],
 [1, 0, 0],
 [1, 0, 1],
 [1, 1, 0],
 [1, 1, 1],
 [1, 2, 0],
 [1, 2, 1],
 [2, 0, 0],
 [2, 0, 1]...] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T06:36:44.203

编辑：在您进行编辑之前，我正在写这篇文章。看起来你想要一个计数器对象，而不仅仅是输出一个列表。

1）我建议不要指定每个数字的限制而是（limit+1）。例如，对于 [second, minute, hour, day, year] 计数器，（对我来说）写 [60, 60, 24, 365] 而不是 [59,59,23,364] 更有意义。

2）如果您的计数器溢出数组的最后一个限制，您必须弄清楚该怎么做。我添加了一个计数到无穷大的额外位置。

3）我还建议颠倒数组的顺序，至少在内部表示中以避免反转下标。如果你不想那样，你可以`.reverse`在里面`bases``initialize``@digits``to_s`

```
class MyCounter 
  def initialize bases
    @bases = bases
    @bases << 1.0/0 # Infinity
    @digits = Array.new(bases.size, 0)
    prod = 1
    @digit_values = [1] + @bases[0..-2].map { |b| prod *= b }
  end

  attr_reader :digit_values

  def to_s
    @digits
  end

  def increment(digit=0)
    v = @digits[digit] + 1
    if v < @bases[digit]
      @digits[digit] = v
    else 
      @digits[digit] = 0
      increment(digit+1)
    end
    self
  end

  def +(integer)
    (@digits.size - 1).step(0,-1).each do |i|
      @digits[i] += integer / @digit_values[i]
      integer = integer % @digit_values[i]
    end
    self
  end
end

c1 = MyCounter.new [2,3,5]
20.times { c1.increment; p c1 }

c2 = MyCounter.new [2,3,5]
c2 += 20
p c2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T23:03:43.657

为每个上限创建一个数组，其值从 0 到上限。取第一个数组并计算其余数组的笛卡尔积。

```
caps = [4, 2, 1]
arrs = caps.map{|cap| (0..cap).to_a} #=>[[0, 1, 2, 3, 4], [0, 1, 2], [0, 1]]
p arrs.shift.product(*arrs)
# =>[[0, 0, 0], [0, 0, 1], [0, 1, 0], [0, 1, 1], [0, 2, 0], [0, 2, 1], ... 
```

如果您不想要一个包含结果的内存消耗数组，请提供一个块。`product`将一个一个地产生每个元素。

```
arrs = caps.map{|cap| (0..cap).to_a}
arrs.shift.product(*arrs){|el| puts el.join} #no resulting array
#000
#001
#010
#011
#... 
```

# php - 谷歌组和订阅代码

> ID：14669565
> 
> 赞同：4
> 
> 时间：2013-02-03T04:42:39.683
> 
> 标签：php, subscription, google-groups

我是任何领域的编程新手。刚开始我有一个添加订阅按钮的任务。

我有的：

1.  Google 群组邮寄名单
2.  一个网站
3.  我没有 Google App 引擎。

要求：非常简单 - 网站上的订阅按钮，可以自动订阅邮件列表的人。

语言：PHP、HTML。不要问我关于编码的问题，我现在很烂，但不会太久。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T14:52:15.167

```
<h3>Subscribe to <?= $group_title ?></h3>
<form action="http://groups.google.com/group/<?= $group_name ?>/boxsubscribe">
<input name="email"/>
<input type="submit" value="Subscribe" name="sub"/>
<a href="http://groups.google.com/group/<?= $group_name ?>">Browse Archives</a>
</form> 
```

使用 $group_title 和 $group_name 进行相应设置。$group_name 可以在查看您的组时从 url 确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T13:31:12.667

发送到 your-group+subscribe@googlegroups.com 的电子邮件会自动将发件人订阅到该组。因此，您可以简单地拥有一个 HTML 链接，例如：

```
mailto:your-group+subscribe@googlegroups.com?subject=Subscribe%20to%20Your%20Group 
```

它需要用户额外点击几下，但它是一种处理订阅的相当自动化的方式，它确保您拥有用户的真实电子邮件地址（因为他们正在从它发送电子邮件）并且不需要后端编程工作你的部分。

# ios6 - 如何在没有委托的情况下从 UIAlertView 完成块访问用户输入？

> ID：14669566
> 
> 赞同：1
> 
> 时间：2013-02-03T04:42:41.557
> 
> 标签：ios6, uitextfield, uialertview, objective-c-blocks, objective-c-category

使用 iOS6：

我想将用户输入的文本检索到与 UIAlertView 关联的 UITextField 中。我知道我可以通过委托实现预期的结果，但是我很想用回调函数解决这个问题，因为我相信这可能是一个有趣的模式。我首先研究了 UIAlertView 类的类别扩展的通用模式。代码如下。在此先感谢您的任何建议。

```
import <UIKit/UIKit.h>

@interface UIAlertView (Block)
- (id)initWithTitle:(NSString *)title message:(NSString *)message completion:(void (^)(BOOL cancelled,     NSInteger buttonIndex, UITextField *textField))completion cancelButtonTitle:(NSString *)cancelButtonTitle otherButtonTitles:(NSString *)otherButtonTitles, ... NS_REQUIRES_NIL_TERMINATION;

@end 
```

该类别的 .m 如下：

```
#import "UIAlertView+Block.h"
#import <objc/runtime.h>

static char const * const alertCompletionBlockTag = "alertCompletionBlock";

@implementation UIAlertView (Block)

- (id)initWithTitle:(NSString *)title
            message:(NSString *)message
         completion:(void (^)(BOOL cancelled, NSInteger buttonIndex))completion
  cancelButtonTitle:(NSString *)cancelButtonTitle
  otherButtonTitles:(NSString *)otherButtonTitles, ... {

self = [self initWithTitle:title message:message delegate:self cancelButtonTitle:cancelButtonTitle otherButtonTitles:nil ];

if (self) {
    objc_setAssociatedObject(self, alertCompletionBlockTag, completion, OBJC_ASSOCIATION_COPY);

    va_list _arguments;
    va_start(_arguments, otherButtonTitles);

    for (NSString *key = otherButtonTitles; key != nil; key = (__bridge NSString *)va_arg(_arguments, void *)) {
        [self addButtonWithTitle:key];
    }
    va_end(_arguments);
}

[self setAlertViewStyle:UIAlertViewStylePlainTextInput];
return self;
}

- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {

id completion = objc_getAssociatedObject(self, alertCompletionBlockTag);

[self complete:completion index:buttonIndex];
}

- (void) complete:(void (^)(BOOL cancelled, NSInteger buttonIndex))block index:(NSInteger)buttonIndex {
BOOL _cancelled = (buttonIndex == self.cancelButtonIndex);
block(_cancelled, buttonIndex );

objc_setAssociatedObject(self, alertCompletionBlockTag, nil, OBJC_ASSOCIATION_COPY);
//objc_removeAssociatedObjects(block);
}

@end 
```

类别的用途如下设置。主要问题是我无法从完成块中引用索引 0 处的 UIAlertView textField。

```
[[[UIAlertView alloc] initWithTitle:@"Add"
                           message:@"Add New Asset Type"
                        completion:^(BOOL cancelled, NSInteger buttonIndex){
                            if (!cancelled) {

                                //call on completion of UISheetAction ???
                                NSLog(@"%@",needToAccessUIAlertView._textFields[0]);

                            }
                        }
                 cancelButtonTitle:@"Cancel"
                 otherButtonTitles:@"OK", nil] show]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T08:39:22.527

所以基本上你想从块中访问警报视图。你可以这样做：

```
__block __weak UIAlertView *alertViewWeak;
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Add"
                           message:@"Add New Asset Type"
                        completion:^(BOOL cancelled, NSInteger buttonIndex){
                            if (!cancelled) {

                                //call on completion of UISheetAction ???
                                NSLog(@"%@",[alertViewWeak textFieldAtIndex:0]);

                            }
                        }
                 cancelButtonTitle:@"Cancel"
                 otherButtonTitles:@"OK", nil];
alertViewWeak = alertView;
[alertView show]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:27:31.783

如果你想自己做一个类别，上面就足够了。但是，有很多类使用委托模式。你想一一做分类吗？

有[REKit](https://github.com/zuccoi/REKit)。有了它，您可以像使用基于块的类一样使用这些类：

```
UIAlertView *alertView;
alertView = [[UIAlertView alloc]
    initWithTitle:@"title"
    message:@"message"
    delegate:nil
    cancelButtonTitle:@"Cancel"
    otherButtonTitles:@"OK", nil
];
[alertView
    respondsToSelector:@selector(alertView:didDismissWithButtonIndex:)
    withKey:nil
    usingBlock:^(id receiver, UIAlertView *alertView, NSInteger buttonIndex) {
        // Do something…
    }
];
alertView.delegate = alertView; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-25T08:54:34.313

试试这个库 这是另一个有用的库来做同样的事情。[http://ichathan.com/2014/08/19/ichalertview/](http://ichathan.com/2014/08/19/ichalertview/)

# amazon-sqs - 是否可以为 IAM 用户应用 SQS 限制？

> ID：14669567
> 
> 赞同：1
> 
> 时间：2013-02-03T04:42:58.823
> 
> 标签：amazon-sqs, amazon-iam

我目前正在从事一个拥有大量 IAM 用户的项目，每个用户都需要对特定 SQS 队列进行有限访问。

例如，假设我有一个名为“Bob”的 IAM 用户和一个名为“BobsQueue”的 SQS 队列。我想做的是授予 Bob 管理他的队列 (BobsQueue) 的完全权限，但我想限制他的使用，这样：

*   Bob 每秒只能向 BobsQueue 发出 10 个 SQS 请求。
*   Bob 每月发出的 SQS 请求不能超过 1,000,000 个。

我本质上想对这个 SQS 队列应用任意使用限制。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:12:21.720

在我看来，没有任何可用的 AWS 服务提供资源使用限制，除非内置到服务的基本操作方式中（例如[Amazon DynamoDB](http://aws.amazon.com/dynamodb/)中的预置*吞吐量*）并且[Amazon SQS](http://aws.amazon.com/sqs/)也不例外，只要[可用密钥](http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/AccessPolicyLanguage_ElementDescriptions.html#AvailableKeys)*支持目前所有采用访问策略语言进行访问控制的 AWS 服务都*缺乏此类资源限制约束。

 *虽然我可以看到您的用例，但我认为实际上更有可能看到这样的事情，将灯视为一种会计/计费功能，只要通过设置（可能是细粒度的）AWS 资源使用限制来控制成本是有意义的- 虽然这也不可用。

*   请注意，此功能经常被请求（请参阅[如何限制 AWS 资源消耗？](https://stackoverflow.com/q/13769400/45773)）并且它的缺失实际上允许发起 Christofer Hoff 恰当地称为[经济拒绝可持续性攻击](http://rationalsecurity.typepad.com/blog/2008/11/cloud-computing-security-from-ddos-distributed-denial-of-service-to-edos-economic-denial-of-sustaina.html)（请参阅[Google 攻击：我如何使用 Google 电子表格攻击自己）](http://www.behind-the-enemy-lines.com/2012/04/google-attack-how-i-self-attacked.html)我为一个有点讽刺但实际上非恶意的例子[增加了 1000 美元的带宽费用）。](http://www.behind-the-enemy-lines.com/2012/04/google-attack-how-i-self-attacked.html)

## 解决方法

您可以通过使用 IAM 策略来促进[共享队列](http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/acp-overview.html)，该策略授予用户 Bob 访问权限，如[Amazon SQS 的示例 AWS IAM 策略中](http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/UsingIAM.html#ExamplePolicies_SQS)所述，并通过为一个人[创建 Amazon CloudWatch 警报](http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/AlarmThatSendsEmail.html)依次使用[Amazon CloudWatch](http://aws.amazon.com/cloudwatch/)监控此队列，从而实现您的规范的近似值或更多您想要限制的[Amazon SQS 维度和指标，例如](http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/CW_Support_For_AWS.html#sqs-metricscollected)*NumberOfMessagesSent*。达到限制后，您可以撤销此共享队列的用户 Bob 的 IAM 授权，直到他再次合规。

 **   显然，在没有彻底的簿记的情况下，仅基于这个指标来实现“每秒”/“每月”规范并不一定是微不足道的，也不能在达到限制时准确地“拔掉插头”，而是需要考虑处理时间和 API 延迟。

祝你好运！**

# r - R中不同处理的相关矩阵

> ID：14669568
> 
> 赞同：1
> 
> 时间：2013-02-03T04:42:59.120
> 
> 标签：r, matrix, correlation, pearson

使用下面的代码，我创建了一个相关矩阵。下面的代码只是为所有数据创建了一个矩阵，无论处理如何。但是，我数据中的一列是治疗。我想制作两个不同的矩阵（每种治疗类型一个）。我的治疗是第 6 列“治疗”中的分类值。第 10 到 44 列我想为其创建一个矩阵。

```
correlations <- cor(Plants[,c(10:44)], use="pairwise.complete.obs", method="pearson")
correlations<-as.matrix(correlations) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:51:52.053

如果您只有两个治疗类别，那么您可以为每个级别进行两次单独的分析（仅选择特定级别的数据）。只需将名称替换为您`Treatment1`的`Treatment2`治疗的实际名称即可。

```
kor1<-cor(Plants[Plants$Treat=="Treatment1",c(10:44)], use="pairwise.complete.obs", method="pearson")
kor2<-cor(Plants[Plants$Treat=="Treatment2",c(10:44)], use="pairwise.complete.obs", method="pearson") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T09:43:48.903

您可以使用`by`将函数应用于数据的不同子集。

```
by(Plants[10:44], Plants["Treat"],
   cor, use = "pairwise.complete.obs", method = "pearson") 
```

# c++ - 宽流和字符

> ID：14669577
> 
> 赞同：1
> 
> 时间：2013-02-03T04:45:32.177
> 
> 标签：c++, widechar

我看到允许将 a 写入`char`a `std::wostream`（例如`std::wcout<<"looooool";`）。

如何`char`更改为`wchar`（如果发生这种情况）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:30:27.860

当您将 a`char`或 c 字符串 ( `char *`) 发送到宽流时，ì单个八位字节（字节）将转换为 wchar [`widen`](http://en.cppreference.com/w/cpp/io/basic_ios/widen)。没有从`std::string`.

您不能以这种方式将多字节 UTF-8 字符发送到宽流中，因为这些字节一次转换一个。在默认语言环境中，没有从非 ascii 字符到宽字符的转换，因此转换将失败，将宽流置于错误状态。

您是否利用这种转换取决于您；标准允许它，至少对于字符和字符串文字，它对我来说似乎无害。但请注意，您发送到宽流的字符串对象必须是`std::wstring`，而不是`std::string`。

# php - 将文件名作为参数传递给函数的问题？

> ID：14669581
> 
> 赞同：0
> 
> 时间：2013-02-03T04:46:16.027
> 
> 标签：php, string, user-defined-functions

我有这段代码

```
redirect_loc(index.php); 
```

这个函数的定义在函数文件的某个地方。

```
 function redirect_loc($location=NULL)
{
    if($location!=NULL)
    {
        header("Location:$location");
        exit;
    }
} 
```

当我传递“index.php”（注意引号以指定为字符串）时，它可以工作，但是传递 index.php 会给出错误在此服务器上找不到请求的 URL /indexphp。

当它不作为字符串传递时，为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T04:52:32.457

当你写：

```
redirect_to(index.php); 
```

这是`index`一个常数和`php`另一个常数，并使用`.`连接运算符连接它们。

它正在寻找一个名为的常量`index`（又是一个名为`php`的常量），并且没有找到具有该名称的常量，它使用值“index”（或“php”）作为字符串文字。

这不是推荐的做法。如果您打开错误日志记录，您将看到它发出类似“未定义常量`index`，取而代之的是字符串值”的通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T04:48:37.530

这 。充当连接运算符。您看到找不到的文件的名称了吗？不`.`......它将两个“字符串”（`index`和`php`）连接在一起 - 它认为这就是你想要的。

# matlab - 是否可以在 matlab 中的实时视频源上覆盖动态框？

> ID：14669584
> 
> 赞同：0
> 
> 时间：2013-02-03T04:47:08.480
> 
> 标签：matlab, video-processing

我正在做一个对象识别项目，并希望积极地看到在视频源中被识别的对象。这需要在实时提要中将对象装箱。该框将根据对象的大小自动调整大小。

这在matlab中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:40:55.807

假设您可以为图像执行此操作，只需为每个图像执行此操作，并且您已为视频执行此操作。

如果这太慢，您可能只想计算每第 n 个图像的框。

如果您想要更详细的答案，请说明您卡在哪里。

# java - 环境变量不起作用

> ID：14669588
> 
> 赞同：1
> 
> 时间：2013-02-03T04:47:51.360
> 
> 标签：java, environment-variables

我正在尝试为 java 设置一个 PATH 环境变量。当我将变量值设置如下时，在 cmd 中键入“java”时它工作得很好

```
C:\Program Files (x86)\Java\jdk1.7.0_13\bin 
```

但是对于以下我得到错误，'java'不被识别为内部或外部命令，

```
%ProgramFiles(x86)%\Java\jdk1.7.0_13\bin 
```

我正在使用 Windows 8。知道为什么上述变量不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:56:17.080

为了降低复杂性，我建议创建另一个系统环境变量：

```
JAVA_HOME=C:\Program Files (x86)\Java\jdk1.7.0_13\bin 
```

然后在您的 PATH 中，您可以添加：

```
%JAVA_HOME% 
```

# joomla - 在 ddermart 中单击下订单时重定向到首页

> ID：14669593
> 
> 赞同：-1
> 
> 时间：2013-02-03T04:49:20.750
> 
> 标签：joomla, joomla1.5, joomla-extensions, virtuemart

我使用的是 1.1.9 版和 joomla 1.5.14 版。我的问题是，当我单击添加到购物车时，它会将我带到下订单并继续购物。之后，每当我点击下订单按钮时​​，它就会将我重定向到首页。在下单按钮中显示的链接是：-www.mysite.com.books.html?page=checkout.index&ssl_redirect=1。我没有在我的网站中使用 ssl。即使我更改了美德玛特的配置文件，也检查了我的日志文件，它向我显示 PHP 警告：stristr() [function.stristr]: Empty delimiter in /home/kiranpra/public_html/administrator/components/com_virtuemart/classes /ps_session.php 在第 566 行。我认为这只是一个警告而不是错误。我使用的是内置的 joomla sef 而不是任何其他类型的 3rd 方扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:15:06.710

VirtueMart 路由这些请求的方式有些奇怪。

问题是 VirtueMart 的方法和您的模板的组合 - 如果这是我过去在客户网站上遇到的相同问题 - 会抑制首页上的标准“组件”输出。

我不知道您使用的是什么模板，它是基于哪个模板框架构建的，或者是哪个模板提供者构建的，但是您应该转到模板管理器并单击模板的选项，看看是否“在首页显示组件输出”是一种选择。

如果是这样，您应该尝试一下，看看是否可以解决问题。不幸的是，当您通常导航到网站的首页时，这可能意味着您最终会得到其他不需要的输出。

我不记得我最终如何解决这个问题的细节 - 可能在模板中使用一些代码来检测首页（默认页面）以及正在输出的组件，从而允许在首页上为美德玛特输出组件 - 但没有其他组件。

当然-您可能遇到完全不同的问题，因此您的里程可能会有所不同。

# ios - 连接到 safari 的调试控制台时我的 ember 应用程序可以正常工作的原因可能是什么？

> ID：14669595
> 
> 赞同：0
> 
> 时间：2013-02-03T04:49:40.623
> 
> 标签：ios, safari, ember.js

我在 iOS 设备上的 ember 应用程序中观察到一个奇怪的行为。

当设备连接到调试控制台时（通过使用开发菜单并选择设备/网页），一切正常，但是当设备未连接时，屏幕无法正确刷新。单击更新屏幕某些部分的内容，将其保留为空白。

任何线索，提示将不胜感激。

谢谢。

# ruby - 来自 Arel::Attributes::Attribute 对象的 SQL 列类型

> ID：14669599
> 
> 赞同：1
> 
> 时间：2013-02-03T04:50:43.633
> 
> 标签：ruby, activerecord, arel, rails-activerecord

**tl;dr**给定一个`Arel::Attributes::Attribue`对象，说`Model.arel_table[:created_at]`如何获得它的 SQL 类型？

**背景：**我正在绕过 ActiveRecord 基础设施，支持 Arel 编写一些需要真正有效生成的 SQL 报告。使用 Arel 的`to_sql`方法，我正在生成最终的 SQL 并直接通过`ActiveRecord::Base.connection.execute`. 但是，我需要将 SQL 转换应用于某些列（例如，更改存储在 GMT 中的时间戳的时区）。由于列数很大（并且根据用户输入而变化），我不想对这些转换进行硬编码。我想查看所选列的 SQL 类型并相应地应用转换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T06:00:04.380

如果您设置了 ActiveRecord 类，那么您可以访问它的`columns`和`columns_hash`方法。这些将为您提供列对象（的实例） ，`ActiveRecord::ConnectionAdapters::Column`您应该在那里找到方法。例如：`type``sql_type`

```
> Model.columns_hash['created_at'].type
 => :datetime 
> Model.columns_hash['created_at'].sql_type
 => "timestamp without time zone" 
```

将`sql_type`是特定于数据库的（即上面的 PostgreSQL），`type`将与迁移中的类型匹配，因此您可能希望使用它而不是`sql_type`.

也就是说，您可能会使用通常的 ActiveRecord 关系方法（它应该为您处理转换和时区）然后`to_sql`在最后调用：

```
sql = Model.where('created_at > ?', some_time).select('pancakes').to_sql 
```

然后将该 SQL 输入`execute`or `select_rows`。这将使您可以使用大多数常用的 ActiveRecord 东西，同时避免创建一堆您不关心的 ActiveRecord 包装器的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-21T20:48:43.827

在 arel 中可能特别有用的东西是[type_cast_for_database](https://www.rubydoc.info/github/rails/arel/Arel/Table#type_cast_for_database-instance_method)。这可以在 arel 表上使用：

```
Model.arel_table.type_cast_for_database(:id, 'test')
=> 0
Model.arel_table.type_cast_for_database(:id, '47test')
=> 47 
```

虽然您没有具体了解类型，但您可以查看字符串之类的值是否将转换为数字或其他内容。

**编辑**

需要注意的是，这仅在 arel 表具有 type_casterable_to_type_cast[时才有效？](https://www.rubydoc.info/github/rails/arel/Arel/Table#able_to_type_cast%3F-instance_method). 如果你从上面的模型中得到它，它应该有一个类型脚轮。

# ios - iOS - UIView animateWithDuration 中的完成块被调用得太早

> ID：14669601
> 
> 赞同：32
> 
> 时间：2013-02-03T04:51:08.597
> 
> 标签：ios, uiviewanimation

当表查看单元格所选时，我正在尝试做一些动画。出于某种原因，完成块被调用得太早了。即使将持续时间设置为 10 秒，完成块也会立即被调用。

```
[UIView animateWithDuration:10.0 animations:^{
    message.frame = newFrame;
} completion:^(BOOL finished) {
    NSLog(@"DONE???");
}]; 
```

关于为什么会发生这种情况的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-03T07:55:19.703

从[UIView 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)：

> 完成
> 
> 动画序列结束时要执行的块对象。该块没有返回值，并采用一个布尔参数，该参数指示动画是否在调用完成处理程序之前实际完成。如果动画的持续时间为 0，则在下一个 run loop 循环开始时执行此块。此参数可能为 NULL。

这意味着不能保证只有在动画完成时才会执行代码。我建议您检查“完成”参数作为执行条件。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-11-19T22:02:17.427

是的。它被调用得太早了，因为它被某种方式中断了。可能是通过模态演示转换或其他方式。根据您的需要，以下可能是您喜欢的解决方案。我们通过手动延迟动画代码的执行来避免冲突，如下所示：

```
// To get this in Xcode very easily start typing, "dispatch_aft..."

// Note the "0.2". This ensures the outstanding animation gets completed before we start ours
dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.2 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
    [UIView animateWithDuration:1.0 delay:0 options:0 animations:^{
        // Your animation code
    } completion:^(BOOL finished) {
        // Your completion code
    }];
}); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-02-03T16:56:44.337

如果动画没有效果，也可以提前调用完成，例如将视图的 alpha 设置为它已经拥有的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-16T14:53:43.407

在这里发布以防万一。就我而言，我使用的是`keyframe`动画，并且立即调用了完成块。注意这些概念：

*   持续时间：整个动画的持续时间，以秒为单位。如果您指定负值或 0，则会立即进行更改且不显示动画。

*   frameStartTime：开始指定动画的时间。该值必须在 0 到 1 的范围内，其中 0 代表整个动画的开始，1 代表整个动画的结束。例如，对于持续时间为 2 秒的动画，将开始时间指定为 0.5 会导致动画在整个动画开始后一秒开始执行。

*   frameDuration：动画到指定值的时间长度。此值必须在 0 到 1 的范围内，并指示相对于整个动画长度的时间量。如果您指定值 0，那么您在动画块中设置的任何属性都会在指定的开始时间立即更新。如果您指定一个非零值，则属性会在该时间段内进行动画处理。例如，对于持续时间为两秒的动画，将持续时间指定为 0.5 会导致动画持续时间为一秒。

将这些值中的任何一个设置错误都会影响调用完成的时间。

# jquery - AngularJS 没有解析有效的 JSON

> ID：14669602
> 
> 赞同：0
> 
> 时间：2013-02-03T04:51:09.830
> 
> 标签：jquery, json, angularjs

要么我错误地使用了 $resource（很可能，今天刚从 angular 开始），要么我的 JSON 不好。

AngularJS 小提琴： http: [//jsfiddle.net/8zVxH/1/](http://jsfiddle.net/8zVxH/1/)和相关代码：

```
angular.module('app', ['ngResource']);

function AppCtrl($scope, $resource) {
var url = 'http:,,api.petfinder.com,pet.getRandom;key=260f9e3a6f6670b5d9db68b281ebe7a9;format=json;location=51503';
$scope.petfinder = $resource('http://jsonproxy.aws.af.cm/proxy/:action', 
                                 {action:url, callback:'JSON_CALLBACK'},
                                 {get: {method:'JSONP'}});

$scope.indexResult = $scope.petfinder.get();

} 
```

jQuery Fiddle： http: [//jsfiddle.net/78Cab/](http://jsfiddle.net/78Cab/)和相关代码

```
$.ajax({
  url: 'http://jsonproxy.aws.af.cm/proxy/http:,,api.petfinder.com,pet.getRandom;key=260f9e3a6f6670b5d9db68b281ebe7a9;format=json;location=51503',
  method: 'GET'
}).done(function (data) {
  console.log(data);
}); 
```

jQuery fiddle 可以访问相同的 URL ..

点击这个 JSON URL [http://jsonproxy.aws.af.cm/proxy/http:,,api.petfinder.com,pet.getRandom;key=260f9e3a6f6670b5d9db68b281ebe7a9;format=json;location=51503](http://jsonproxy.aws.af.cm/proxy/http:,,api.petfinder.com,pet.getRandom;key=260f9e3a6f6670b5d9db68b281ebe7a9;format=json;location=51503)通过[http://jsonlint .com/](http://jsonlint.com/)作为有效的 JSON

还有其他人有类似的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T15:21:36.290

我想到了。即使服务返回了有效的 JSON，$resource 调用也期待 JSONP，并且不够聪明，无法使用计划 JSON。我不得不修改服务以返回回调（JSON）而不仅仅是 JSON。

# android - Android SDK 示例错误

> ID：14669603
> 
> 赞同：0
> 
> 时间：2013-02-03T04:51:20.060
> 
> 标签：android

我已经通过 Android 向导导入了 Android SDK 示例。但我收到如下所示的错误： ![在此处输入图像描述](../Images/189850c3cf159a448557033e3126fc12.png)

我已经确认我的 Java 是 1.6（我已将其更改为 1.5 并返回），但无济于事： ![在此处输入图像描述](../Images/9b4ec782cd6d1629437046d7ba486d6b.png)

如果还有什么我可以做的，请告诉我！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T05:07:53.923

好像您缺少 android 支持库 jar，您可以通过右键单击您的项目 -> Android 工具 -> 添加支持库将此库添加到您的项目

![在此处输入图像描述](../Images/a94130c9e16b262db1799c412d8bcfed.png)

# java - Java -Xms 和 -Xmx 测试

> ID：14669608
> 
> 赞同：1
> 
> 时间：2013-02-03T04:52:10.337
> 
> 标签：java, memory, jvm, runtime

我创建了一个 Main 类，其中包含如下主要方法：

```
public class Main {

    public static void main(String[] _args) {
    System.out.println("free:" + Runtime.getRuntime().freeMemory()
        + ". max:" + Runtime.getRuntime().maxMemory());
    }
} 
```

然后我用-Xms2m 和-Xmx2m 运行课程。输出是这样的：

```
free:2984840\. max:7471104 
```

那么，我的问题是，如果 1 兆字节是 1048576 字节，那么显示的可用内存不是 -Xms 中设置的 2 兆字节。当我将 -Xms 选项增加到 3m 时，它显示免费添加兆字节。任何人都可以解释发生了什么，.?

-Xmx 选项会发生不同的情况，当我将其增加到 3m、4m 和 5m 时，最大值保持显示 7471104。大约是 71.44m。我真的不明白这两个选项是如何工作的。

这是我设置 -Xms3m 和 -Xmx6m 时打印的内容

```
free:4033416\. max:7471104 
```

任何人都可以帮助，.?

谢谢你 ：）

注意：我正在使用 Win7 x64 和 Java 1.6 更新 35。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:52:16.663

JVM 在如何分配内存方面有限制，这并不明显。这意味着它仅将您提供的尺寸作为提示，并将尽可能严格地遵循。对于非常小的内存大小，这些差异更为显着，但即使您要求 20 GB，它也不会精确到 20 GB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T09:01:26.097

堆不仅包含应用程序分配的数据，还包含 VM 分配的对象（例如表示类的对象）。Hotspot **VM 占用空间**肯定大于您设置的最大堆大小。这就是实际堆大小更大的原因。

# c - Doxygen for C——多个对象

> ID：14669609
> 
> 赞同：2
> 
> 时间：2013-02-03T04:52:22.173
> 
> 标签：c, object, doxygen

所以，我正在学习如何使用 Doyxgen 创建文档。我几乎已经完成了单个文件文档，即如何指定参数、放置方程式、指定输出等。

我不确定如何在不让生成的 pdf 复制文档的情况下跨多个对象记录多个文件。例如，在我的主文件中，我有：

```
extern double getPMF(.....); 
```

我宁愿不将其记录为主要函数，而是作为我的数学对象中的函数。我现在这样做的方式是，该函数的文档显示在我的主文件 c 和我的数学 c 文件的描述中。

我该怎么做呢？

修复：为了澄清，这个函数在我生成的所有文件参考文档中都有重复。我只想将此函数记录在我的 maths.c 文件参考中，但它会被添加到头文件参考中，以及现在需要调用它的任何文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T02:37:29.910

一种快速的解决方案是标记您希望 Doxygen 忽略的元素：

```
/** \cond doxy_ignore */
double getPMF();

/** \endcond */ 
```

听起来被忽略的部分可能涵盖了您的某些文件的大部分。

# java - 判断一个点是否在三角形内

> ID：14669614
> 
> 赞同：5
> 
> 时间：2013-02-03T04:52:56.750
> 
> 标签：java, geometry

我已经研究了好几个小时，尝试不同的方法来查看几乎每个问题。也许我完全错了，但我觉得我的数学是正确的，但无论我输入什么数字，我都会得到相同的输出。我的代码在某处关闭，我必须在午夜前将其上交。

太有趣了：查找一个点是否在三角形代码内。（对新手而言）

```
import java.util.Scanner;

public class PointsTriangle {

    // checks if point entered is within the triangle
    //given points of triangle are (0,0) (0,100) (200,0)
    public static void main (String [] args) {
        //obtain point (x,y) from user
        System.out.print("Enter a point's x- and y-coordinates: ");
        Scanner input = new Scanner(System.in);
        double x = input.nextDouble();
        double y = input.nextDouble();

        //find area of triangle with given points
        double ABC = ((0*(100-0  )+0*(0  -0)+200*(0-100))/2.0);
        double PAB = ((x*(0  -100)+0*(100-y)+0  *(y-  0))/2.0);
        double PBC = ((x*(100-0  )+0*(0  -y)+200*(y-100))/2.0);
        double PAC = ((x*(0  -100)+0*(100-y)+200*(y-  0))/2.0);

        boolean isInTriangle = PAB + PBC + PAC == ABC;

        if (isInTriangle)
            System.out.println("The point is in the triangle");
        else
            System.out.println("The point is not in the triangle");
    }//end main
}//end PointsTriangle 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T05:52:54.180

您在公式中放置了错误的值顺序；因此，结果是错误的。如果3个顶点如下

```
A(x1, y1) B(x2, y2), C(x3, y3) 
```

那么面积计算为

```
double ABC = Math.abs (x1 * (y2 - y3) + x2 * (y3 - y1) + x3 * (y1 - y2)) / 2; 
```

之后，您只需将每个顶点替换为输入点，我们将有以下三角形：PBC、APC、ABP。

把所有东西放在一起，我们会有正确的

```
int x1 = 0, y1 = 0;
int x2 = 0, y2 = 100;
int x3 = 200, y3 = 0;

// no need to divide by 2.0 here, since it is not necessary in the equation
double ABC = Math.abs (x1 * (y2 - y3) + x2 * (y3 - y1) + x3 * (y1 - y2));
double ABP = Math.abs (x1 * (y2 - y) + x2 * (y - y1) + x * (y1 - y2));
double APC = Math.abs (x1 * (y - y3) + x * (y3 - y1) + x3 * (y1 - y));
double PBC = Math.abs (x * (y2 - y3) + x2 * (y3 - y) + x3 * (y - y2));

boolean isInTriangle = ABP + APC + PBC == ABC; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-03T05:06:55.790

如果你画一幅画，你可以看到这个点必须满足简单的不等式（在某些线的下方/上方/右侧）。“在边缘”是进还是出，我会留给你：

```
Y > 0 (above the X axis)
X > 0 (to the right of the Y axis)
X + 2* Y < 200 (below the hypotenuse) 
```

围绕这三个写一个 if 语句，你就完成了：

```
if( (y > 0) && (x > 0) && (x + 2*y < 200) ) 
  System.out.println("The point is in the triangle");
else
  System.out.println("The point is not in the triangle"); 
```

# sql - 相关子查询的结果不正确

> ID：14669615
> 
> 赞同：-1
> 
> 时间：2013-02-03T04:53:00.317
> 
> 标签：sql

我的任务是：查找只有同年级朋友的学生的姓名和年级。

我的桌子：

### 高中生

```
ID  name    grade
1510    Jordan  9
1689    Gabriel 9
1381    Tiffany 9
1709    Cassandra   9
1101    Haley   10
1782    Andrew  10
1468    Kris    10
1641    Brittany    10
1247    Alexis  11
1316    Austin  11
1911    Gabriel 11
1501    Jessica 11
1304    Jordan  12
1025    John    12
1934    Kyle    12
1661    Logan   12 
```

### 朋友

```
ID1 ID2
1510    1381
1510    1689
1689    1709
1381    1247
1709    1247
1689    1782
1782    1468
1782    1316
1782    1304
1468    1101
1468    1641
1101    1641
1247    1911
1247    1501
1911    1501
1501    1934
1316    1934
1934    1304
1304    1661
1661    1025
1381    1510
1689    1510
1709    1689
1247    1381
1247    1709
1782    1689
1468    1782
1316    1782
1304    1782
1101    1468
1641    1468
1641    1101
1911    1247
1501    1247
1501    1911
1934    1501
1934    1316
1304    1934
1661    1304
1025    1661 
```

我的查询：

```
select name, grade from highschooler
where id in
(  select distinct id1 
   from friend out
   where not exists
     (select id1
      from friend
      where    
          (select grade from highschooler where id = out.id1) <>
          (select grade from highschooler where id = out.id2)
     )
) 
```

我的结果：

```
Jordan  9
Gabriel 9
Tiffany 9
Cassandra   9
Haley   10
Andrew  10
Kris    10
Brittany    10
Alexis  11
Gabriel 11
Jessica 11
Jordan  12
John    12
Kyle    12
Logan   12 
```

预期的查询结果：

```
Jordan  9
Brittany    10
Haley   10
Kris    10
Gabriel 11
John    12
Logan   12 
```

我用 Tiffany 仔细检查了我的代码：

```
1381    Tiffany 9   1247    Alexis  11
1381    Tiffany 9   1510    Jordan  9 
```

我的相关子查询有问题。你能告诉我什么是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:58:53.600

要仅获取在同年级有朋友但没有其他朋友的学生，请尝试以下操作：

```
SELECT DISTINCT H.Id, H.Name, H.Grade
FROM HighSchooler H
  JOIN Friend F ON H.Id = F.ID1
  JOIN HighSchooler H2 ON F.ID2 = H2.ID AND H2.Grade = H.Grade
WHERE NOT EXISTS 
 (SELECT *
  FROM HighSchooler H3
  JOIN Friend F2 ON H3.Id = F2.Id1
  JOIN HighSchooler H4 ON F2.Id2 = H4.Id
  WHERE H4.Grade <> H.Grade AND H3.Id = H.Id) 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!3/a1c84/6)。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T05:34:57.957

我会使用 TDQD（测试驱动的查询设计）来解决这个问题。

### 确定特定高中生的朋友的成绩

```
SELECT f.id1 AS h1_id, h1.grade AS h1_grade, h2.grade AS h2_grade
  FROM Friends AS f
  JOIN Highschoolers AS h1 ON f.id1 = h1.id
  JOIN Highschoolers AS h2 ON f.id2 = h2.id 
```

这为每个朋友列出了其朋友的高中生、高中生的年级和朋友的年级。

### 生成有朋友不在自己年级的学生列表

```
SELECT DISTINCT h1_id
  FROM (SELECT f.id1 AS h1_id, h1.grade AS h1_grade, h2.grade AS h2_grade
          FROM Friends AS f
          JOIN Highschoolers AS h1 ON f.id1 = h1.id
          JOIN Highschoolers AS h2 ON f.id2 = h2.id
       )
 WHERE h1_grade != h2_grade; 
```

### 生成至少有一个朋友且没有朋友不在同年级的学生列表

```
SELECT h.id, h.name, h.grade
  FROM Highschooolers AS h
  JOIN Friends AS f ON h.id = f.id1
 WHERE h.id NOT IN
       (SELECT DISTINCT h1_id
          FROM (SELECT f.id1 AS h1_id, h1.grade AS h1_grade, h2.grade AS h2_grade
                  FROM Friends AS f
                  JOIN Highschoolers AS h1 ON f.id1 = h1.id
                  JOIN Highschoolers AS h2 ON f.id2 = h2.id
               )
         WHERE h1_grade != h2_grade
       ) 
```

这将选择确实出现在`id1`“朋友”表列中的高中生；他们至少列出了一位朋友，而且他们的每一位朋友都在同一年级。

### 生成没有朋友不在同年级的学生列表

```
SELECT h.id, h.name, h.grade
  FROM Highschooolers AS h
 WHERE h.id NOT IN
       (SELECT DISTINCT h1_id
          FROM (SELECT f.id1 AS h1_id, h1.grade AS h1_grade, h2.grade AS h2_grade
                  FROM Friends AS f
                  JOIN Highschoolers AS h1 ON f.id1 = h1.id
                  JOIN Highschoolers AS h2 ON f.id2 = h2.id
               )
         WHERE h1_grade != h2_grade
       ) 
```

这将选择未出现在`id1`Friends 表列中的高中生；他们没有列出朋友（可能没有输入数据，而不是非常孤独），所以他们的朋友中没有一个是不同年级的。

请注意，所有这些查询都假定学生 B 不一定将学生 A 列为朋友，因为学生 A 将学生 B 列为朋友。也就是说，如果条目 (1234, 2345) 出现在朋友表中（说明学生 1234 认为 2345 是朋友），则不会自动得出 2345 认为 1234 是朋友；必须有一个明确的逆向条目（2345、1234）来指示互惠关系。如果友谊是自动互惠的，那么查询会变得更加复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T05:35:42.107

这有效：

```
select "name", "grade" from highschooler a
where not exists
(
  select 1 from (
(select id1, id2, count(distinct "grade") from (
SELECT *
FROM friend f, highschooler h
where f.id1 = h.id
or f.id2 = h.id
order by id1,id2)
group by id1, id2
having count(distinct "grade") > 1))
  where id1 = a.id or id2 = a.id)
order by "grade", "name" 
```

[上述查询的 SQLFIDDLE](http://www.sqlfiddle.com/#!4/97a62/57/0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:44:01.173

这肯定有效，我试过运行它......

```
Select distinct h1.name,h1.grade  
From Highschooler h1,Highschooler h2,Friend
Where h1.ID = Friend.ID1
AND h2.ID = Friend.ID2
AND h1.grade = h2.grade

EXCEPT
Select distinct h1.name,h1.grade
From Highschooler h1,Highschooler h2,Friend
Where h1.ID = Friend.ID1
AND h2.ID = Friend.ID2
AND h1.grade <> h2.grade
order by h1.grade,h1.name 
```

# ruby-on-rails - rails 3.2.x，simple_form_for，回形针，多次上传

> ID：14669616
> 
> 赞同：0
> 
> 时间：2013-02-03T04:53:05.467
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, amazon-s3, paperclip

好的，只是为了解决这个问题，我不需要任何花哨的东西就可以列出 5 个用于上传图像的文件字段。目前，我在访问表单时没有收到任何错误，但表单文件上传输入没有显示在表单的其余部分正确呈现的位置。

到目前为止我所做的事情：

*   s3 带回形针
*   上传单个文件

话虽如此，我会发布部分模型，以更好地了解我的设置：

我的产品型号：

```
has_many :photos
attr_accessible :name, :description, :price, :category_id, :location_ids
accepts_nested_attributes_for :photos, :allow_destroy => true 
```

我的照片模型：

```
belongs_to :products
attr_accessible :image,
has_attached_file :image, styles: {
  thumb: '100x100>',
  square: '200x200#',
  medium: '300x300>'
} 
```

我的产品控制器：

```
def new
  @product = Product.new
  5.times { @product.photos.build }
end 
```

我的产品发布表单：

```
<%= simple_form_for @product,
:url => admin_products_path  do |form| %>
<% form.simple_fields_for :photos do |builder| %>
  <% if builder.object.new_record? %>
  <p>
    <%= builder.input :image %>
  </p>
  <% end %>
<% end %>
....
<% end %> 
```

因为这是我的第一个实现，所以我尽量保持简单。大多数在线文档都是针对稍旧的 rails 的，但我试图让它与 rails 3.2.1、paperclip、simple_forms_for、aws-sdk 一起使用。

请帮忙 :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T05:01:27.507

我相信您需要为`simple_fields_for`嵌套属性助手使用 erb 输出语法：

```
<%= form.simple_fields_for :photos do |builder| %>
# ^ ... 
```

# php - 生成 000 到 999 之间的所有数字，不重复且以随机顺序

> ID：14669620
> 
> 赞同：-7
> 
> 时间：2013-02-03T04:54:39.757
> 
> 标签：php

我需要生成 000 到 999 之间的所有数字，不重复且按顺序生成。目前我正在使用代码

```
 for($count = 0; $count <= 999; $count++)
    {
            echo str_pad($count, 3, '0', STR_PAD_LEFT) . "<br />\r\n";
    } 
```

但它正在按顺序生成数字。那么有人可以为我提供以非顺序顺序生成它们且不重复的代码吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T04:59:46.203

You can use a shuffle function to do that. First, create an array with values {0,1,2,3,...,999} Then, use a shuffle function to shuffle the order of element in the array. Read the example code in this link: [http://php.net/manual/en/function.shuffle.php](http://php.net/manual/en/function.shuffle.php)

# datagridview - 什么事件用于单击 datagridview 中的整行

> ID：14669622
> 
> 赞同：0
> 
> 时间：2013-02-03T04:54:45.757
> 
> 标签：datagridview

我想知道我应该使用什么事件来单击整行 datagridview 并在单击后提供操作。我已经使用了 cellcontentclick，但只有一个特定的单元格允许执行操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:00:00.833

我假设您在谈论`WinForms` `DataGridView`控件。

您需要处理该`RowStateChanged`事件。该`DataGridViewRowStateChangedEventArgs`对象**`e`**包含一个`StateChanged`属性，您需要检查状态是否为`Selected`. `Selected`作为一个轻微的警告，当一行被选中和未被选中时，该值将同时返回，因此您可能需要一些额外的逻辑来检查是否`e.Row`被选中，具体取决于您的场景。

# jquery - jquery fadeIn 淡出效果

> ID：14669623
> 
> 赞同：0
> 
> 时间：2013-02-03T04:54:50.237
> 
> 标签：jquery, ajax

我有一个跨度元素：

```
<span id="signInResult" style="border: 1px solid white;">html in here</span> 
```

当 jquery ajax 成功触发时，我希望 span 立即变为绿色，然后淡出回默认的白色：

```
success: function(msg){
  $("#signInResult").css('border-style', 'solid');
  $("#signInResult").css('border-color', 'green');
  $("#signInResult").fadeIn(300).css('border-color', 'white').fadeIn(300);
} 
```

我已经尝试了许多淡入和淡出的变体.. 上面的当前版本似乎没有做任何事情.. 最好的方法是这样做以获得期望的结果？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:02:53.523

您可能想使用`animate`. 它在指定的时间范围内将缓慢给出的 css 属性更改为给定的值。FadeIn/FadeOut 只处理`opacity`and `display`。

尝试：

```
success:function(msg) {
    $("#signInResult").css('border-color', '#0f0').animate({'border-color': '#fff'}, 300);
} 
```

文档：[http ://api.jquery.com/animate/](http://api.jquery.com/animate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T05:14:28.887

正如您的问题提到您想要更改边框的颜色，对于动画颜色试试这个：

`[http://jsbin.com/anubin/1/edit](http://jsbin.com/anubin/1/edit)`

```
 $(function() {
    $("#signInResult").css('border-style', 'solid');
    $("#signInResult").css('border-color', 'green');
    $("#signInResult").hide().fadeIn(300);

    $("#signInResult").animate({
        borderColor: "white",
        width: 500
      }, 1000 );
 }); 
```

`jquery ui`需要插件。

# php - 使用 'mysql_connect()' 和不使用它的性能差异

> ID：14669626
> 
> 赞同：2
> 
> 时间：2013-02-03T04:55:52.240
> 
> 标签：php, mysql, xampp

解释一个普通的 PHP 文件（不使用 MySQL）大约需要**0.01**毫秒。但是，如果您添加`mysql_connect()`或`mysqli_connect()`任何其他函数来连接到数据库，则需要更多时间来解释它。（通常约为**1.05**毫秒）。

我测试了很多次，连接数据库时出现问题。无论您运行多少查询，它们都非常快。但是为什么连接到数据库比从中查询要慢。

这里有什么问题？连接到 MySQL 的最快方法是什么？

*我在 Windows 7 上将 XAMP 与 Apache 和 MySQL 一起使用*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T04:59:23.333

当您连接到 MySQL 时，您正在打开一个套接字连接。这是通过操作系统的网络层路由的，并且对于客户端（您的代码）传递用户名和密码的每个连接都要执行握手，并且数据库引擎必须验证这些凭据。然后客户端打开到特定数据库的连接。

这被称为打开数据库连接的“开销”。

最好的解决方案是，（a）不要担心代码中的 1ms 延迟，可能还有其他方法可以让您恢复性能优势，和/或用户甚至不会注意到 1ms；或 (b) 如果您真的必须对其进行微优化，那么您每页只连接一次，或者如果您不需要该特定页面上的连接，则根本不连接。

# java - 从 CustomArray 适配器调用 onActivityResult

> ID：14669636
> 
> 赞同：2
> 
> 时间：2013-02-03T04:59:16.980
> 
> 标签：java, android, eclipse

我的 ListView 有一个用于自定义 ArrayAdapter 的类，下面是代码。

```
public class CustomArrayAdapterForProduct extends ArrayAdapter<ProductClass> 
{
    private final Activity context;
    public final ArrayList<ProductClass> products;
    private static final int PICK_CONTACT = 1;

    public CustomArrayAdapterForProduct(Activity context, ArrayList<ProductClass> products) 
    {
        super(context, R.layout.product, products);
        this.context = context;
        this.products = products;
    }

    static class ViewHolder {
        protected TextView name;
        protected Button share;
        protected Button call;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {       
            View view = null;
            LayoutInflater inflator = context.getLayoutInflater();
            view = inflator.inflate(R.layout.product, parent,false);
            final ViewHolder viewHolder = new ViewHolder();
            final ProductClass file =   products.get(position);

            viewHolder.name = (TextView) view.findViewById(R.id.name);
            viewHolder.share = (Button) view.findViewById(R.id.videoView);
            viewHolder.call = (Button) view.findViewById(R.id.videoView);

            viewHolder.share.setOnClickListener(new OnClickListener() 
            {
                public void onClick(View v) 
                {
                  Intent intent = new Intent(Intent.ACTION_PICK,  Contacts.CONTENT_URI);
                  context.startActivityForResult(intent, PICK_CONTACT);
                }

            });

            viewHolder.name.setText(file.name.toString());
            view.setTag(viewHolder);

        return view;
    }
} 
```

看看这个`context.startActivityForResult(intent, PICK_CONTACT);` 我如何`onActivityResult`在我的 customArrayAdapter 中定义我的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T05:09:01.897

`onActivityResult(int requestCode, int resultCode, Intent data)`是 Activity 类方法不适用于任何 JAVA 类。

它仅适用于 Android Activity 本身。

# mongodb - 简单的mongo查询

> ID：14669638
> 
> 赞同：1
> 
> 时间：2013-02-03T04:59:27.907
> 
> 标签：mongodb, nosql

我刚开始学习 mongo，并且坚持`{}`引用集合中的所有文档，并认为这个查询：`db.foo.update( {}, { $set: { letter : 'a' } }, { multi : true } );`将更新集合中的所有文档。

以防万一我使用`MongoDB shell version: 2.0.4`

```
> for (i=0; i<3; i++) db.foo.insert({ num : i });
> db.foo.find()
{ "_id" : ObjectId("510debe5ccc97edd4aca03dc"), "num" : 0 }
{ "_id" : ObjectId("510debe5ccc97edd4aca03dd"), "num" : 1 }
{ "_id" : ObjectId("510debe5ccc97edd4aca03de"), "num" : 2 }
> db.foo.update( {}, { $set: { letter : 'a' } }, { multi : true } );
> db.foo.find()
{ "_id" : ObjectId("510debe5ccc97edd4aca03dd"), "num" : 1 }
{ "_id" : ObjectId("510debe5ccc97edd4aca03de"), "num" : 2 }
{ "_id" : ObjectId("510debe5ccc97edd4aca03dc"), "letter" : "a", "num" : 0 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T05:19:55.563

线

```
db.foo.update( {}, { $set: { letter : 'a' } }, { multi : true } ); 
```

不做你想的！

的第三个参数`update`应该是更新是否是 upsert。如果第三个论点是真实的，你就做一个 upsert。如果是假的，你就没有。你传入了一个真实的对象 ( `{multi: true}`)，所以你正在做一个 upsert。

第四*个*参数是多。您没有提供第四个参数，在 JavaScript 中，这意味着它是未定义的，这是错误的，因此您的查询不会执行多重！

你的意思是写：

```
db.foo.update( {}, { $set: { letter : 'a' } }, false, true ); 
```

这是在 JavaScript 中进行多重更新的方式。

# visual-studio-2010 - DirectX SDK 2010 年 6 月号

> ID：14669646
> 
> 赞同：2
> 
> 时间：2013-02-03T05:01:11.277
> 
> 标签：visual-studio-2010, visual-c++, directx

我正在尝试运行[Physics for Game Programmers](http://shop.oreilly.com/product/9780596000066.do)书中的示例代码。我已在 2010 年 6 月安装了 DirectX SDK，但出现以下错误。

```
Cannot open include file: 'd3drmwin.h'
Cannot open include file: <d3drm.h>
Cannot open include file: <d3dtypes.h> 
```

我相信我已经添加了所有必要的包含和库路径以及附加依赖项（D3D10.lib 和 D3DX10.lib），因为我可以毫无问题地访问头文件 d3d10.h 和 d3d9.h。

任何想法如何让他们的代码运行？代码是否可能引用旧版本的 DirectX？

编辑：我已经安装了 SDK 并设置了以下内容：

项目->属性->VC++目录->包含目录并添加

```
C:\Program Files %28x86%29\Microsoft DirectX SDK %28June 2010%29\Include; 
```

项目->属性->VC++目录->库目录并添加

```
C:\Program Files %28x86%29\Microsoft DirectX SDK %28June 2010%29\Lib\x86; 
```

项目->属性->链接器->输入并添加

```
D3D10.lib;D3DX10.lib 
```

编辑

好的，我发现那些头文件属于 DirectX 8。所以最新的 SDK 不支持它们。现在我只需要弄清楚在哪里下载 DirectX 8 SDK。任何想法在哪里可以找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T05:45:41.803

更改文件夹的路径以正确使用双引号，如

```
"C:\Program Files x86\Microsoft DirectX SDK June 2010\Include;" 
```

Windows 不是网络浏览器；它是一个操作系统。就目录位置而言，它不理解 URL 编码。（我没有这本书，但它可能是一个错字。）

# ruby-on-rails - 将变量传递给rails 3

> ID：14669647
> 
> 赞同：1
> 
> 时间：2013-02-03T05:01:13.193
> 
> 标签：ruby-on-rails, ruby-on-rails-3, partial, zurb-foundation

我正在尝试将变量传递给部分，以便可以在部分中调用它这就是我渲染部分的方式

```
 = render :partial => "layouts/reveal_delete", :resource => @schedule 
```

这就是我在部分中调用变量的方式，尽管它似乎不起作用

```
#RevealDelete.reveal-modal
%a.close-reveal-modal ×
  %h3= "Delete #{@resource}"
  %p Are you sure you want to delete this?
  =link_to "Delete #{@resource}", @resource, :method => :delete, :class => "button close-reveal-modal"
  %a.button.alert.close-reveal-modal Cancel 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T05:12:23.163

这样称呼它：

```
= render :partial => "layouts/reveal_delete", :locals => { :resource => @schedule } 
```

然后在部分中，您可以通过引用`resource`(no `@`) 来使用它，如下所示：

```
%h3= "Delete #{resource}" 
```

但是，通常情况下，您会命名局部变量`schedule`以匹配实例变量，因此：

```
= render :partial => "layouts/reveal_delete", :locals => { :schedule => @schedule } 
```

然后你可以参考`schedule`你的部分。

此外，如果您愿意，您可以删除`:partial`和`:locals`选项键，并使用以下更短的语法：

```
= render "layouts/reveal_delete", :schedule => @schedule 
```

这里，Rails 假设如果你传入一个字符串作为你的第一个参数，那么第一个参数是你的部分名称，其余的被解释为局部变量赋值。这是[讨论此语法的答案](https://stackoverflow.com/questions/4402556/rails-confused-about-syntax-for-passing-locals-to-partials)：

[文档](http://guides.rubyonrails.org/layouts_and_rendering.html#passing-local-variables)中还有更多信息。

# vb.net - C# 或 VB：从属性中获取变量类型

> ID：14669650
> 
> 赞同：0
> 
> 时间：2013-02-03T05:01:46.587
> 
> 标签：vb.net, reflection, types

我正在尝试根据类中的字符串获取成员，然后获取类型，但我没有任何运气。

```
Public Class Monster
    Public Property Name As String
    Public Property EatsPeople As Boolean
    Public Property Description As String
End Class 
```

要获取成员“EatsPeople”的详细信息，我会：

```
Dim t = GetType(Monster) ' Get the type of the Product entity.
Dim fieldMemberInfo = t.GetMember("EatsPeople", BindingFlags.IgnoreCase Or BindingFlags.Public Or BindingFlags.Instance).Single() 
```

无论我尝试什么组合，我都会得到 Nothing 或 RuntimePropertyType

```
Dim x = fieldMemberInfo.GetType 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T05:32:59.197

如果我正确理解您的问题，您只想获取“EatsPeople”属性的类型。为此，它更易于使用`PropertyInfo`。

例如

```
Dim t = GetType(Monster) ' Get the type of the Product entity.
Dim propertyInfo = t.GetProperty("EatsPeople") 'Get the property info

Dim x = propertyInfo.PropertyType 'Get the type of the "Eats People" property. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:05:48.013

您可以像这样获取属性名称：

```
Dim t1 As PropertyInfo = fieldMemberInfo
Dim t2 = t1.PropertyType.FullName 
```

# c# - 通过引用或值初始化的 C# 容器？

> ID：14669651
> 
> 赞同：-2
> 
> 时间：2013-02-03T05:01:50.597
> 
> 标签：c#, reference, containers

我对 C++ 有经验，但对 C# 有点陌生。

将对象添加到容器时，它们是按引用传递还是按值传递？

也就是说，如果我这样做：

```
myClass m = new myClass(0);       //Assume the class just holds an int
List<myClass> myList = new List<myClass>(1);
myList.Add(m);
myList[0] += 1;
Console.WriteLine(m);
Console.WriteLine(myList[0]); 
```

结果会是：

```
0
1 
```

还是会

```
1
1 
```

?

如果是前者，那我怎样才能让它做后者呢？我的第一直觉是做类似的事情

```
myClass ref mref = m; 
Console.WriteLine(mref); 
```

但这似乎不是有效的语法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T05:08:50.973

值是按值传递给`Add`方法的；然而，如果你传递一个引用类型（一个类总是一个引用类型），那么值本身就是一个引用。所以问题不在于值是通过值传递还是通过引用传递，而是类型是值类型还是引用类型。

```
class MyClass
{
    public int Number { get; set; }
} 
```

通过这个声明，我们得到：

```
MyClass m = new MyClass();
List<MyClass> myList = new List<MyClass>();
myList.Add(m);

myList[0].Number += 1;
Console.WriteLine(myList[0].Number); // Displays 1
Console.WriteLine(m.Number); // Displays 1

myList[0].Number += 1;
Console.WriteLine(myList[0].Number); // Displays 2
Console.WriteLine(m.Number); // Displays 2 
```

请注意，这不适用于 a `struct`，因为返回的值`myList[0]`将是存储在列表中的值的副本。这`+= 1`只会增加`Number`这个临时副本的属性，因此除了消耗几个处理器周期外没有其他影响。因此，只创建不可变结构是一个很好的建议。

* * *

如果要直接显示对象，请覆盖`ToString`

```
class MyClass
{
    public int Number { get; set; }

    public override string ToString()
    {
        return Number.ToString();
    }
} 
```

现在，你可以写

```
myList[0].Number += 1;
Console.WriteLine(myList[0]);
Console.WriteLine(m); 
```

* * *

您甚至可以`myList[0] += 1`使用运算符重载。在`MyClass`声明中

```
public static MyClass operator +(MyClass m, int i) 
{
    m.Number += i;
    return m;
} 
```

但这有点奇怪，除非您的类代表一个数字，但在这种情况下，不可变的`struct`将是首选，因为数字通常被视为不可变的值类型。

```
public static MyStruct operator +(MyStruct m, int i) 
{
    return new MyStruct(m.Number + i);
} 
```

# iphone - 使用 CALayer 将对角横幅/徽章添加到 UITableViewCell 的角落

> ID：14669652
> 
> 赞同：3
> 
> 时间：2013-02-03T05:02:16.233
> 
> 标签：iphone, ios, uitableview

我正在尝试在表格视图中绘制装饰 UITableViewCell 的文本横幅，该横幅看起来像邮票，斜跨单元格的左上角。

我可能完全在错误的地方执行此操作，但我正在覆盖`-layoutSubviews`添加图层。我试图这样做，`-drawRect:`但横幅最终被表格视图的 imageView 覆盖，因为表格呈现（即图层位于图像视图下方，因为稍后添加了图像视图）。

我真的很难得到正确的数学。我计算过，假设横幅从单元格顶部的 40 点和左侧的 40 点开始，角度正好为 -45º，则斜边将为 56 点。所以我正在制作一个 56 点宽的 CALayer，然后将其旋转 -45º，这样就可以了。问题是牢房内的位置……它坐落在牢房的外面，而不是硬靠在牢房的边缘。

与其让我通过反复试验来把它放在正确的地方，有人可以帮我做数学吗？显然我需要移动图层*并*旋转它。

感觉 anchorPoint 是我在这里需要的，但这似乎实际上是在移动图层，所以我一定错过了这一点（不是双关语）。

```
- (void)layoutSubviews
{
    [super layoutSubviews];

    self.imageView.frame = CGRectMake(10, 10, 50, 50);

    if (self.hasBanner) {
        CALayer *banner = [CALayer layer];
        banner.backgroundColor = [UIColor colorWithRed:.5f green:.5f blue:.5f alpha:1.f].CGColor;
        banner.frame = CGRectMake(0, 40-15, 56, 15);
        banner.anchorPoint = CGPointMake(0, 1); // this just makes it worse
        banner.transform = CATransform3DMakeRotation(-45.0 / 180.0 * M_PI, 0.0, 0.0, 1.0);
        [self.layer addSublayer:banner];
    }
} 
```

![横幅坐错了位置](../Images/727cd5adc405eafd8f25128eaf666d2a.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T06:25:20.297

## 该层应该去哪里？

我们画一个图：

![在此处输入图像描述](../Images/cd443c91ea5f95b74af46bd61bb0d48b.png)

我们可以走得更远，做一些触发，但让我们停在这里。很明显，横幅的中顶点应该在`(20,20)`. 我们可以告诉 Core Animation 这样做。

## 定位图层

可以从四个独立的步骤来考虑它：

1.  设置图层的大小
2.  确定图层中的哪个点是方便的参考点
3.  设置该参考点的位置
4.  围绕参考点旋转图层

这些对应于四个属性：`bounds`、`anchorPoint`、`position`和`transform`。

您不想触摸该`frame`属性，因为它的值是*从*`bounds`、`position`、`transform`和派生的`anchorPoint`。如果您尝试设置`frame`，CALayer 将尝试反转`transform`，将其应用于您提供的 rect ，然后设置`bounds`and `position`。这可能不会给出你想要的结果，所以你最好完全忽略它——这样就不会那么混乱了。

（有关更多信息，请参阅[核心动画指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004514)，特别是[图层对象定义自己的几何](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/CoreAnimationBasics/CoreAnimationBasics.html#//apple_ref/doc/uid/TP40004514-CH2-SW15)部分。）

在代码中，我们将：

1.  设置`bounds`为 rect `0, 0, width, height`。（我故意留给`width`你——它必须超过 56 岁。）
2.  定点。`anchorPoint`_ `0.5, 0`换句话说，沿着图层宽度的一半，在图层的顶部。
3.  定点。`position`_`20, 20`
4.  设置`transform`为旋转 45°。

顺便说一句，在下面的代码中，我设置了`affineTransform`而不是`transform`，只是因为它对于简单的二维转换更方便一些。

## 何时设置图层

您是对的，这`-drawRect:`是创建和添加图层的错误位置。该方法应该绘制到视图的内容（它的`CGContext`）中，但什么*也不*做。

`layoutSubviews`会起作用，但它会比你预期的更频繁地被调用，而且你不想每次都创建和添加一个新层。

看起来您只需要设置一次图层的几何图形，就再也不用触摸它了。`hasBanner`为什么不在属性更改时创建或销毁图层？

```
@interface MyTableViewCell ()

@property (nonatomic) BOOL hasLayer;
@property (nonatomic) CALayer* bannerLayer;

@end

- (void)setHasBanner:(BOOL)hasBanner
{
    if (hasBanner != _hasBanner) {
        _hasBanner = hasBanner;

        if (hasBanner) {
            CALayer* banner = [CALayer layer];
            banner.backgroundColor = [UIColor colorWithRed:.5f green:.5f blue:.5f alpha:1.f].CGColor;

            banner.bounds = CGRectMake(0, 0, 56, 15);
            banner.anchorPoint = CGPointMake(0.5, 0);
            banner.position = CGPointMake(20, 20);
            banner.affineTransform = CGAffineTransformMakeRotation(-45.0 / 180.0 * M_PI);

            // Add the layer to the view, and remember it for later
            [self.layer addSublayer:banner];
            self.bannerLayer = banner;
        } else {
            // Remove the layer from the view, and discard it
            [self.bannerLayer removeFromSuperlayer];
            self.bannerLayer = nil;
        }
    }
} 
```

# jquery - Chrome，IE8 不显示 jquery html 文本 - 同步 Ajax。它适用于 Firefox

> ID：14669656
> 
> 赞同：0
> 
> 时间：2013-02-03T05:02:36.793
> 
> 标签：jquery

在 js（jquery 1.7）中，我使用以下代码：单击按钮时应该发生两个操作：1\. 显示状态（显示 html） 2\. 运行函数以生成 pdf

```
$( "#create_box" ).on("click", "#make_pdf_btn",function(){
$('.pdf_status0').html('Generating report...' );  // problematic line
 make_pdf2();
 return false;
  }); 
```

然后：

```
function make_pdf2(){
    $.ajax({
            type: "GET",
            url: "make_pdf.php",   // pdf is created and saved
            async: false,          // synchronous  ajax
            success: function(html){ strReturn = html; }
    });

   if ( strReturn == 'pdfok' ){ 
        $('.pdf_status0').html('Done!<br>');
        $('.pdf_status').show();
       } else {
         $('.pdf_status').html('Error creating pdf.' );  
       }
  return false; 
```

}

问题是那行 $('.pdf_status0').html('Generating report...' ); 在 Firefox 中运行正常，文本“生成报告...”显示在 div 中，然后替换为“完成！”。但是 Chrome 和 IE8 不显示“正在生成报告..”只有“完成！” 并创建了pdf。

如果我使用 alert('text') 而不是 jquery html，它会运行并在 IE、chrome 和 firefox 中显示警报

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:35:04.727

我认为应该是这样的：

```
$(function(){
   $( "#create_box" ).on("click", "#make_pdf_btn",function(){
     $('.pdf_status0').html('Generating report...').promise().done(function(){
        make_pdf2();
     });
     return false;
   });
});

function make_pdf2(){
    $.ajax({
        type: "GET",
        url: "make_pdf.php",   // pdf is created and saved
        async: false,          // synchronous  ajax
        success: function(html){ 
             strReturn = html;
             if ( strReturn == 'pdfok' ){ 
                  $('.pdf_status0').html('Done!<br>');
                  $('.pdf_status').show();
             } else {
                  $('.pdf_status').html('Error creating pdf.' );  
             } 
        }
   });      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T05:17:47.907

当您进行同步 ajax 调用时，它通常会锁定浏览器，直到响应被处理，这意味着屏幕不会重新绘制以显示您的“正在生成报告...”消息，直到为时已晚，因为您已经更改了它到“完成！”。

几乎没有使用同步 ajax 的充分理由，而且我在您的代码中看不到任何无法轻松重构为异步的内容 - 这使浏览器有机会在 ajax 调用正在进行时重新绘制：

```
function make_pdf2(){
    $.ajax({
            type: "GET",
            url: "make_pdf.php",   // pdf is created and saved
            async: true,          // use Asynchronous  ajax
            success: function(html){
               // do all required processing on response in the success callback
               strReturn = html;
               if ( strReturn == 'pdfok' ){ 
                  $('.pdf_status0').html('Done!<br>');
                  $('.pdf_status').show();
               } else {
                  $('.pdf_status').html('Error creating pdf.' );  
              }
           }
    });

  return false;      
} 
```

话虽如此，我偶尔会发现较旧的 IE（不确定 IE8）仍然会以一种可以通过`setTimeout()`hack 修复的方式感到困惑：

```
setTimeout(make_pdf2, 4); // make call to make_pdf2() async too 
```

# google-app-engine - 如何通过 Google Drive 和 App Engine SDK 使用 Oauth2 服务帐户

> ID：14669661
> 
> 赞同：3
> 
> 时间：2013-02-03T05:03:19.233
> 
> 标签：google-app-engine, sdk, oauth-2.0, google-drive-api

使用 App Engine 和服务帐户访问 Google Drive 可以正常工作。为了使它工作，我还必须使用服务帐户名称共享我的云端硬盘文件：appid@appspot.gserviceaccount.com。

但是当我使用 GAE SDK 时，我收到了 401。我认为原因是我的股份的 SDK 的 service_account 名称。SDK 的服务帐号名称为：test@localhost 根据：

```
app_identity.get_service_account_name()  # returns test@localhost 
```

SDK 控制台中的错误消息：

发生错误：https://www.googleapis.com/drive/v2/files/0B9-mE........nM/children?alt=json&key =AI.......................N0 返回“无效凭证”>

这是访问 Google Drive 的代码：

```
def get(self):

    SCOPE = 'https://www.googleapis.com/auth/drive'
    credentials = AppAssertionCredentials(scope=SCOPE)
    logging.info(app_identity.get_service_account_name())
    http = credentials.authorize(httplib2.Http())
    if os.environ['SERVER_SOFTWARE'].startswith('Development') : 
        service = build('drive', 'v2', http=http, developerKey='...API key...')
    else :
        service = build('drive', 'v2', http=http, developerKey='...APY key...')
    # drive requests 
```

**更新 ：**

我的个人意见：这只能与 GAE 一起使用，而不能与 SDK 一起使用，因为我无法使用 SDK service_account 名称进行 Drive 共享。或者是否可以指定另一个服务帐户名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T05:58:13.613

请查看[应用程序拥有的服务帐户](https://developers.google.com/drive/service-accounts)的文档，[您也可以观看视频](http://www.youtube.com/watch?v=iK14bfd6qhs)。

文档包含 Python 示例代码。

# c - 释放共享内存

> ID：14669662
> 
> 赞同：2
> 
> 时间：2013-02-03T05:03:40.063
> 
> 标签：c, process, shared-memory

因此，下面的程序访问位于“shmid”位置的一块共享内存，并将其附加到指针“total”。然后创建一个子进程来访问和修改这块内存，然后一旦完成，另一个子进程被创建并执行相同的操作，然后是第三个子进程。一旦这 3 个子进程修改完值并执行完毕，父进程就会释放共享内存，然后程序退出。我的印象是这个“shmctl”块会产生预期的效果，但似乎没有。

```
if ((shmctl (shmid, IPC_RMID, (struct shmid_ds *) 0)) == -1)
{
  perror ("shmctl");
 exit (-1);
} 
```

我不相信它，因为在这个块之后我有以下在执行期间打印出与以前相同的值。这是否表明指针仍在访问同一位内存，还是我弄错了？

```
printf("value after memory release:%d\n", total->value); 
```

谢谢您的意见！

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <stdlib.h>
#include <unistd.h>

/* change the key number */
#define SHMKEY ((key_t) 5600) //7890

typedef struct
{
  int value;
} shared_mem;

shared_mem *total;

/*----------------------------------------------------------------------*
 * This function increases the value of shared variable "total"
 *  by one all the way to 100000
 *----------------------------------------------------------------------*/

void process1 ()
{
  int k = 0;

  while (k < 100000)
  {
      k++;
      total->value = total->value + 1;
  }
  printf ("From process1 total = %d\n", total->value); //process 1 prints out total and  returns to main() function
}

/*----------------------------------------------------------------------*
 * This function increases the vlaue of shared memory variable "total"
 *  by one all the way to 170000
 *----------------------------------------------------------------------*/

void process2 ()
{
  int k = 0;

  while (k < 170000)
  {
  k++;
  total->value = total->value + 1;
  }
  printf ("From process2 total = %d\n", total->value); //process 2 prints out total and returns to main() function
}
/*----------------------------------------------------------------------*
 * This function increases the vlaue of shared memory variable "total"
 *  by one all the way to 200000
 *----------------------------------------------------------------------*/

void process3 ()
{
  int k = 0;

  while (k < 200000)
  {
    k++;
    total->value = total->value + 1;
  }
  printf ("From process3 total = %d\n", total->value); //process 3 prints out total and returns to main() function
}

/*----------------------------------------------------------------------*
 * MAIN()
 *----------------------------------------------------------------------*/

int main()
{
  int shmid;
  int pid1;
  int pid2;
  int pid3;
  int ID;
  int status;

  char *shmadd;
  shmadd = (char *) 0;

/* Create and connect to a shared memory segmentt*/

if ((shmid = shmget (SHMKEY, sizeof(int), IPC_CREAT | 0666)) < 0)
{
  perror ("shmget");
  exit (1);
}

if ((total = (shared_mem *) shmat (shmid, shmadd, 0)) == (shared_mem *) -1)
{
  perror ("shmat");
  exit (0);
}

total->value = 0;

if ((pid1 = fork()) == 0) //first child created
{
  process1(); //first child process begins
}

while((ID = wait(&status)) != -1) //parent loops until 1st child is finished
printf("child %d is finished\n", ID); //parent prints out returned value after child is finished

if ((pid1 != 0) && ((pid2 = fork()) == 0)) //second child created
{
  process2(); //second child process begins
}   

while((ID = wait(&status)) != -1) //parent loops until 2nd child is finished
printf("child %d is finished\n", ID); //parent prints out returned value after child is finished

if ((pid1 != 0) && (pid2 != 0) && ((pid3 = fork()) == 0)) //third child created
{
  process3(); //third child process begins
}

while((ID = wait(&status)) != -1) //parent loops until 3rd child is finished
printf("child %d is finished\n", ID); //parent prints out returned value after child is finished

if ((pid1 != 0) && (pid2 != 0) && (pid3 != 0)) 
{
  if ((shmctl (shmid, IPC_RMID, (struct shmid_ds *) 0)) == -1)
  {
 perror ("shmctl");
 exit (-1);
  }

  printf ("\t\t  End of Program.\n"); //prints after all children have finished

  printf("value after memory release:%d\n", total->value);
}
return 0;
} 

/***** Note:  loop for parent to wait for child processes to finish and print ID of each child*****/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T07:05:11.357

从 shmctl 手册页：

> IPC_RMID
> 
> 标记要销毁的段。该段只有在最后一个进程将其分离后才会真正被销毁（即，当相关结构 shmid_ds 的 shm_nattch 成员为零时）。调用者必须是所有者或创建者，或者具有特权。如果段已被标记为销毁，则将设置 IPC_STAT 检索的相关数据结构中 shm_perm.mode 字段的（非标准）SHM_DEST 标志。
> 
> 调用者必须确保一个段最终被销毁；否则它的错误页面将保留在内存或交换中。

即您的代码将段标记为销毁，但在程序退出之前不会将其分离。

如果你想早点分离它，你可以调用`shmdt(total);`. 如果在最后一个 printf 之前执行此操作，则 printf 可能会导致 seg 错误。

# python - 如何在 Python 中选择其子元素包含某些文本的节点？

> ID：14669663
> 
> 赞同：0
> 
> 时间：2013-02-03T05:04:00.743
> 
> 标签：python, lxml

我有一个这样的xml文件：

```
<data>
      <entry>
           <word>ABC</word> (this)
      </entry>
      <entry>
           <word>ABC</word> [not this]
      </entry>
</data> 
```

我想选择其后代包含“（”的节点，并将（。*）移动到文本`<entry>`。即：

```
<data>
      <entry>
           (this)
           <word>ABC</word>
      </entry>
      <entry>
           <word>ABC</word> [not this]
      </entry>
</data> 
```

我正在使用lxml。我试过了：

```
 import lxml.etree as ET
 data = ET.parse('sample.xml')
 for entry in data.iter('entry'):
      A = entry.xpath('.//*[text() = ".*(.*?)"]') 
```

但它不起作用。"(" 可以显示为节点的尾部或节点的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:35:15.733

如果`(`在尾部并将其移动到父文本.. 那么.. .

```
In [67]: myxml="""<data>
    ...:       <entry>
    ...:            <word>ABC</word> (this)
    ...:       </entry>
    ...:       <entry>
    ...:            <word>ABC</word> [not this]
    ...:       </entry>
    ...: </data>"""

In [68]: import StringIO, re, lxml.etree as ET

In [69]: f=StringIO.StringIO(myxml)

In [70]: data=ET.parse(f)

In [71]: print ET.tostring(data)
<data>
      <entry>
           <word>ABC</word> (this)
      </entry>
      <entry>
           <word>ABC</word> [not this]
      </entry>
</data>

In [72]: for elem in data.findall("/entry/"):
    ...:     if re.match(".*\(.*\).*",elem.tail):
    ...:         elem.getparent().text=elem.tail
    ...:         elem.tail=None
    ...:         

In [73]: print ET.tostring(data)
<data>
      <entry> (this)
      <word>ABC</word></entry>
      <entry>
           <word>ABC</word> [not this]
      </entry>
</data> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T06:38:59.923

这里有几个问题：

首先，您尝试使用 xpath 进行正则表达式匹配，但您使用的是 =。您的正则表达式也格式不正确。要在 xpath 中实际进行正则表达式匹配，您需要执行以下操作：

```
import lxml.etree as ET
data = ET.parse('sample.xml')
regexpNS = "http://exslt.org/regular-expressions"
for entry in data.iter('entry'):
    A = entry.xpath('.//*[re:test(text(), ".*\(.*\).*")]',
                    namespaces={'re':regexpNS}) 
```

不幸的是，这实际上对您不起作用，因为您希望尾部有文本，而`text()`. lxml 文档使它看起来应该包含在 中`string()`，但我试过了，它也不起作用。我找不到使用 xpath 和 lxml 的任何方法。

因此，这是一种使用更多 Python 和更少 xpath 的方法：

```
 import re
 import lxml.etree as ET
 rx = re.compile('.*\(.*\).*')
 data = ET.parse('sample.xml')
 for entry in data.iter('entry'):
    for child in entry.xpath('.//*'):
        if rx.match(child.text + child.tail):
            # Your manipulations go here
            print child 
```

无论哪种情况，一个愉快的副作用是这个正则表达式在雪地里玩得很开心：`.*\(.*\).*`.

# javascript - 如何使用 Express 解析查询字符串中的变量？

> ID：14669669
> 
> 赞同：26
> 
> 时间：2013-02-03T05:05:32.383
> 
> 标签：javascript, express, query-string, request-object

我有一个请求被发送到服务器：

```
"/stuff?a=a&b=b&c=c" 
```

使用 express，我如何获得这些值？

我尝试了以下...

```
app.get( "/stuff?:a&:b&:c", function( req, res ){}); 
```

...但是它似乎无法识别路线。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-03T08:59:06.870

在路由中使用查询字符串不是一个好主意。

在 Express 逻辑中，您需要为“/stuff”创建一个路由。查询字符串将在`req.query`.

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-08-06T13:59:44.343

您可以直接使用 声明您的路由，然后可以通过JSON 对象`/stuff`访问查询参数。`req.query`这是您的示例：

```
app.get("/stuff", function(req, res) {
    var a = req.query.a;
    ...
}); 
```

在您的情况下，`req.query`等于：

```
{ a: 'a',
  b: 'b',
  c: 'c' } 
```

在 Express 的文档（4.x 和 3.x）中，您可以找到其他示例： [Express - req.query](http://expressjs.com/4x/api.html#req.query)。

# java - 读取 jar 中的文件？

> ID：14669673
> 
> 赞同：0
> 
> 时间：2013-02-03T05:06:55.160
> 
> 标签：java, file, jar

我知道这已经被问过很多次了，但我在这里遇到了问题。我希望能够逐行读取自定义文件类型，以便执行保存和加载等操作。谁能写一小段代码来告诉我如何做到这一点？

这是我想阅读的方式：

```
//Here is where the code to get the file should be

while((String text = reader.readLine()) != null)
{
    if (text.startsWith("add"))
    //ect
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:14:13.673

Jar 文件是 ZIP 文件，其中包含所有 java 编译的类文件和其他材料。为了读取 JAR 文件中的文件，您必须能够读取 zip 文件。这里有一个例子：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Enumeration;
import java.util.zip.ZipEntry;
import java.util.zip.ZipFile;

public class ReadZip {
  public static void main(String args[]) {
    try {
      ZipFile zf = new ZipFile("ReadZip.zip");
      Enumeration entries = zf.entries();

      BufferedReader input = new BufferedReader(new InputStreamReader(System.in));
      while (entries.hasMoreElements()) {
        ZipEntry ze = (ZipEntry) entries.nextElement();
        System.out.println("Read " + ze.getName() + "?");
        String inputLine = input.readLine();   // your code here

 }
      }
    } catch (IOException e) {
      e.printStackTrace();
    }
  }
} 
```

来自：[http ://www.java2s.com/Code/Java/File-Input-Output/ReadingtheContentsofaZIPFile.htm](http://www.java2s.com/Code/Java/File-Input-Output/ReadingtheContentsofaZIPFile.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T05:19:33.917

假设我们正在谈论的 jar 是您的应用程序或您的应用程序的依赖项之一，这应该可以工作

```
BufferedReader br  = new BufferedReader(new InputStreamReader(getClass().getResourceAsStream(path))); 
```

path - jar 中文件的路径，例如“/test/test.txt”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T05:25:58.483

要从 jar 资源中打开文件，请参阅：[Class#getResourceAsStream](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)。

读取文本文件的代码示例：

```
 try {
        InputStream in = getClass().getResourceAsStream("resource name"); // get binary stream to resource
        // InputStream in = new FileInputStream("filePath"); //in case file loaded from the FileSystem
        BufferedReader reader = new BufferedReader(new InputStreamReader(in));
        String line = null;
        while ((line = reader.readLine()) != null)
        {
            if (line.startsWith("add")) {
                // e.t.c.
            }
        }
    }
    catch (IOException e) {
        //process exception or throw up
    } 
```

* * *

[使用Guava](http://guava-libraries.googlecode.com/svn/tags/release09/javadoc/com/google/common/io/Resources.html)从资源加载文件更容易：

```
URL url = Resources.getResource(resourceName);
List<String> text = Resources.readLines(url, Charsets.UTF_8); 
```

# javascript - setInterval 中的 Javascript 执行顺序

> ID：14669675
> 
> 赞同：2
> 
> 时间：2013-02-03T05:07:08.153
> 
> 标签：javascript, execution

假设我在 setInterval 中运行一些代码。也就是说，每隔 33 毫秒左右就会开始运行一堆代码。

在这堆代码中是一个函数，我们称之为 Overlord 函数，它根据一些状态变量的值执行其他函数。

问题是这样的：

假设 Overlord 执行 function1。假设 function1 在 33 毫秒（或任何间隔长度）之后还没有完成运行。然后 Overlord 执行 function2 而 function1 大概仍在运行。怎么了？

在javascript运行function2之前function1是否完成？javascript执行中是否内置了某种que？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T05:10:15.020

Javascript 是单线程的，因此第二个函数将被排队，但在第一个函数完成执行之前无法执行。也就是说，如果您的函数执行时间超过 33 毫秒，最好将其分成小的异步块（以防止锁定接口）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T05:24:39.697

这是`setInterval`可以很快成为一个非常***糟糕的想法***™ 的地方。

问题是这样的：

如果您调用`setInterval(lots_O_functions, 15);`将要发生的事情`lots_O_functions`，那么它将在 15 毫秒后被调用，但是如果需要 45 毫秒来完成所有这些工作，它不会被中断，相反，您将有两个`lots_O_functions`呼叫等待一旦你的第一个完成就运行......

...假设这两个也分别花费 45 毫秒，那么您现在还有 6 个`lots_O_functions`电话在排队等待...

那是你想要发生的事情吗？我不知道。就个人而言，我会说大多数时候不是，原因如下：

JS 在单线程上运行。事实上，在绝大多数情况下，浏览器中的几乎所有***事情***（点击、重新绘制页面上的元素，甚至离开页面并转到其他地方）都与同一个线程相关联。

因此，通过对繁重函数的重叠调用来阻塞线程是***不好***的™

相反，为什么不使用类似的东西：

```
var big_state_machine = { /*...*/ },
    lots_O_work = function () {
        big_state_machine.currentState.jobs.forEach(/*...*/);
        /*....... do lots o' work ......*/
        var more_work_to_do = /* figure out if you need to rerun lots_O_work */;

        if (more_work_to_do) { setTimeout(lots_O_work, 20); }
    };

lots_O_work(); 
```

现在，它会做它需要做的事情，如果之后还有更多事情要做，它会调用 setTimeout 以在该点之后***至少***排队20 毫秒。

`setTimeout`不像 a`sleep`或 a `wait`，它说：“展望未来 20 毫秒，看看有多少人已经在等待做事......从那里开始，让我排在下一个可用的位置”。

这里的不同之处在于，您在第一个函数完成后 20 毫秒完成，这意味着至少需要 20 毫秒才能发生其他事情（点击、绘画、AJAX 等）。

使用`setInterval`，它就像，但不是在*事后*`setTimeout`在下一个可用位置排队，而是将自己设置在队列中，无论它是否准备好（或需要）。

 *你可以进一步分解它以保持它真正的响应，但这将是一个好的开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T05:22:15.847

Javascript 是单线程的，所以你是安全的......大多数时候。function2 在 function1 完成之前运行的唯一方法是 function1 是否有任何带有回调的异步代码来完成，如 ajax 调用或另一个 setTimeout 或 setInterval。例如：

```
var setInterval(function(){

    //.. 
    function1();
    function2();

}, 33);

var globalVariable = 0;

var function1 = function(){
    console.log(globalVariable);

    setTimeout(function(){
        globalVariable+=2;
    }, 1000);
};
var function2 = function(){
    console.log(globalVariable);
}; 
```

该程序的输出将是。

-->0

-->0

-->2

-->2

你可能已经预料到了。

-->0

-->2

-->2

-->4*

# c# - XNA 4.0 和效果代码

> ID：14669686
> 
> 赞同：2
> 
> 时间：2013-02-03T05:10:42.907
> 
> 标签：c#, xna, shader, xna-4.0, hlsl

我正在使用 XNA 4.0 库（不使用游戏类和 ContentManager）开发游戏据我所知，XNA 4.0 不支持运行时编译效果。我尝试使用 fxc 编译器编译 .fx 文件并像这段代码一样加载到 Effect 构造函数

```
FileStream f = new FileStream(FName, FileMode.Open);
byte[] fData = new byte[f.Length];
f.Read(fData, 0, FData.Length);
f.Close();
Effect ef = new Effect(GfxDev, fData); 
```

此时我收到异常错误消息“您只能使用已编译的数据构造 Effect。此数据不是已编译的效果。”

我需要为效果构造函数使用什么代码？我查了 MSDN，没有任何解释。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T14:45:02.613

的输出与`fxc`XNA 中效果编译器的输出略有不同。我不记得确切的细节 - 但我认为文件头存在差异 - 我认为关于枚举效果参数的一些事情。

因此，解决方案是使用 XNA 的内容管道附带的效果编译器来代替`fxc`. 您需要的课程是`Microsoft.Xna.Framework.Content.Pipeline.Processors.EffectProcessor`.

这是一个如何使用它的示例。你可以把它放到一个简单的命令行项目中：

```
string fx = File.ReadAllText("Effect1.fx");

EffectProcessor effectProcessor = new EffectProcessor();
var effect = effectProcessor.Process(new EffectContent { EffectCode = fx }, new MyContext());

byte[] yourEffectCode = effect.GetEffectCode(); 
```

请注意，您需要一个上下文类，它派生自`ContentProcessorContext`. 您需要重写很多方法，但实际上只需要三个方法就可以使上述代码正常工作：

```
class MyContext : ContentProcessorContext
{
    public override string BuildConfiguration { get { return ""; } }
    public override TargetPlatform TargetPlatform { get { return TargetPlatform.Windows; } }
    public override GraphicsProfile TargetProfile { get { return GraphicsProfile.HiDef; } }
    // ... other overrides ...
} 
```

请注意（以及`Microsoft.Xna.Framework.Graphics.dll`）这要求您的项目引用`Microsoft.Xna.Framework.Content.Pipeline.dll`. 这要求您的项目是针对完整的 .NET 4.0 框架（*而不是*“客户端配置文件”）构建的。此外，此内容管道 DLL*不可*再分发（但我也不确定 fxc 是否也是如此）。

# c# - 构建和部署工作，但不运行

> ID：14669689
> 
> 赞同：0
> 
> 时间：2013-02-03T05:11:20.770
> 
> 标签：c#, sql, sql-server, tsql, reporting-services

当我尝试部署或构建报告时，我能够成功。没有错误。

但是，当我尝试在本地运行它时，我得到：

![在此处输入图像描述](../Images/266138b838b89bfb45577308fa520b3e.png)

我将不胜感激有关我可以从哪里开始解决此问题的建议？

我在 Windows 7、64 位的 Visual Studio 2008 中运行 SSRS 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:35:09.277

您是否为两者使用相同的用户登录名？如果没有，请检查用户是否有权访问数据源。

此外，本地电脑似乎没有安装 OLE DB 驱动程序。我在工作中遇到了相反的情况，我的电脑有驱动程序但服务器没有。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:00:28.633

如果您使用链接服务器和 Windows 身份验证，我的第一个猜测是检查您的 SQL Server 服务帐户是否是域用户，如果是 - 检查它是否在 AD 中正确设置。

链接：http: [//blogs.msdn.com/b/sql_protocols/archive/2006/08/10/694657.aspx](http://blogs.msdn.com/b/sql_protocols/archive/2006/08/10/694657.aspx)

但话又说回来，我不太擅长猜测：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T06:52:49.500

你试过[http://forums.asp.net/t/1383105.aspx/1](http://forums.asp.net/t/1383105.aspx/1)

似乎本地链接服务器操作需要某种授权，这可能已经存在于生产中，我认为这一点很有希望：

```
GRANT ALTER ANY LOGIN TO MachineName\ASPNET
GRANT ALTER ANY LINKED SERVER TO MachineName\ASPNET 
```

# arrays - 如何根据SAS中的另一个变量修改数组值？

> ID：14669690
> 
> 赞同：0
> 
> 时间：2013-02-03T05:11:29.667
> 
> 标签：arrays, variables, sas

```
data tempx1;
  input ID;
  cards;
  1
  2
  3
  4
  ;
run;

data tempx2;
   set tempx1;
   array diag{4} d1 d2 d3 d4 (1,2,3,4);
     do i = 1 to 4;
      if diag[i] = ID then diag[i] = 1; else diag[i] = 0;
     end;
    drop i;
run; 
```

我希望 1 在数组的对角线上，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T00:45:23.097

我认为您有一个更简单的解决方案，因为您实际上并没有尝试使用初始化值。你只是没有做正确的比较。与 i 比较，不要与 diag[i] 比较。

```
data tempx2;
   set tempx1;
   array diag{4} d1 d2 d3 d4 (1,2,3,4);
     do i = 1 to 4;
      if i = ID then diag[i] = 1; else diag[i] = 0;
     end;
    drop i;
run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:54:56.390

当你用一组值初始化一个数组时，你给它的值只设置一次。它们不会为数据集的每个隐式循环重新设置。

因此，您必须明确地执行此操作。以下代码将为您工作：

```
data tempx2;
set tempx1;
array diag{4} d1 d2 d3 d4 (1,2,3,4);

do i = 1 to 4;
diag[i] = i;
end;

do i = 1 to 4;
if diag[i] = ID then diag[i] = 1; else diag[i] = 0;
end;

drop i;

run; 
```

这是一个演示，它应该可以更容易地理解为什么会这样：

```
data test;
set tempx1;
array diag{4} d1 d2 d3 d4 (1,2,3,4);
put _all_;
output;
if _n_ = 1 then diag{1} = 10;
if _n_ = 3 then diag{1} =  20;
put _all_;
output;
run; 
```

# java - MediaPlayer 使 Android 应用程序崩溃

> ID：14669695
> 
> 赞同：0
> 
> 时间：2013-02-03T05:12:22.910
> 
> 标签：java, android, xml, eclipse, android-mediaplayer

我正在这样做，因此单击按钮时会发出声音，但我一直遇到错误。这是我的java代码：

```
package com.thisisfoo.testgame;

 import android.app.Activity;
 import android.content.Intent;
 import android.media.MediaPlayer;
 import android.os.Bundle;
 import android.view.Menu;
 import android.view.View;
 import android.widget.Button;

 public class Main extends Activity {
    MediaPlayer buttonSound;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

 //Button sounds
    final MediaPlayer buttonSound = MediaPlayer.create(Main.this, R.raw.test);

 //setting up buttons
    Button button1 = (Button) findViewById(R.id.button1);

    button1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
 // TODO Auto-generated method stub

            buttonSound.start();
            startActivity(new Intent("com.thisisfoo.testgame"));
        }
    });
} 
```

当我运行它时它会播放声音，但它会崩溃并说“不幸的是，测试已停止”。谁能帮助我。谢谢！

编辑：继承人我的logcat

```
 02-02 22:56:29.401: E/AndroidRuntime(27328): FATAL EXCEPTION: main
 02-02 22:56:29.401: E/AndroidRuntime(27328): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.thisisfoo.testgame }
 02-02 22:56:29.401: E/AndroidRuntime(27328):   at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1638)
 02-02 22:56:29.401: E/AndroidRuntime(27328):   at android.app.Instrumentation.execStartActivity(Instrumentation.java:1510)
 02-02 22:56:29.401: E/AndroidRuntime(27328):   at android.app.Activity.startActivityForResult(Activity.java:3263)
 02-02 22:56:29.401: E/AndroidRuntime(27328):   at android.app.Activity.startActivity(Activity.java:3370)
 02-02 22:56:29.401: E/AndroidRuntime(27328):   at com.thisisfoo.testgame.Main$1.onClick(Main.java:35)
 02-02 22:56:29.401: E/AndroidRuntime(27328):   at android.view.View.performClick(View.java:3538)
 02-02 22:56:29.401: E/AndroidRuntime(27328):   at android.view.View$PerformClick.run(View.java:14319)
 02-02 22:56:29.401: E/AndroidRuntime(27328):   at android.os.Handler.handleCallback(Handler.java:608)
 02-02 22:56:29.401: E/AndroidRuntime(27328):   at android.os.Handler.dispatchMessage(Handler.java:92)
 02-02 22:56:29.401: E/AndroidRuntime(27328):   at android.os.Looper.loop(Looper.java:156)
 02-02 22:56:29.401: E/AndroidRuntime(27328):   at android.app.ActivityThread.main(ActivityThread.java:5060)
 02-02 22:56:29.401: E/AndroidRuntime(27328):   at java.lang.reflect.Method.invokeNative(Native Method)
 02-02 22:56:29.401: E/AndroidRuntime(27328):   at java.lang.reflect.Method.invoke(Method.java:511)
 02-02 22:56:29.401: E/AndroidRuntime(27328):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 02-02 22:56:29.401: E/AndroidRuntime(27328):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 02-02 22:56:29.401: E/AndroidRuntime(27328):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T10:46:49.173

此崩溃是因为您的媒体播放器在您开始另一个活动时在主要活动上下文中播放声音。你可以通过不同的方式解决这个问题，例如你在线程中启动这个媒体播放器或者等待你的媒体播放器停止然后开始另一个活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T05:25:38.287

如日志：

> ActivityNotFoundException：未找到处理 Intent 的 Activity

因为你没有通过正确的行动来开始下一个活动。尝试以以下方式启动下一个活动：

```
Intent intent=new Intent(Main.this,Your_Next_Activity.class);

startActivity(intent); 
```

# iis - 域设置和 IIS 设置

> ID：14669696
> 
> 赞同：-1
> 
> 时间：2013-02-03T05:12:27.553
> 
> 标签：iis, dns

我有一个 IP 地址，例如 1.2.3.4，我有一个来自 namecheap 的域名，例如 ABC.COM

在 ABC.COM 我配置

*   @ 1.2.3.4
*   1.2.3.4

但是在我的端口 80 的 IIS 设置中，我的站点未配置为使用主机 ABC.COM，但它仍然有效，如果我在主机设置中配置 ABC.COM，它将无法正常工作。为什么？

以及如何添加一个子域，例如 domain1.ABC.COM 并将其指向 IIS 中的新网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:52:10.820

“以及如何添加一个子域，例如 domain1.ABC.COM 并将其指向 IIS 中的一个新网站？” - 在您的 DNS 设置中添加新的子域，然后在 IIS 中创建新网站并将其设置为使用您在 DNS 中设置的相同 IP 地址

“但是在我的端口 80 的 IIS 设置中，我的站点没有配置为使用主机 ABC.COM，但它仍然可以工作，如果我在主机设置中配置 ABC.COM，它将无法工作。为什么？” - 最好尝试在 IIS 中设置 IP 地址而不是主机名。

# python - 如何在python中将信息从一种方法传递到另一种方法

> ID：14669698
> 
> 赞同：0
> 
> 时间：2013-02-03T05:12:31.213
> 
> 标签：python, class, pyqt4

所以我是 PyQt 和 python 的菜鸟。我正在尝试编写一个简单的 Qt 应用程序，它允许您单击一个按钮，然后在命令提示符的文本字段中显示您在文本字段中输入的内容，（我知道这是非常基础的，但我正在努力学习它）但我似乎无法弄清楚如何从 printTexInput() 方法访问 textBox 属性。所以我的问题是您将如何从另一种方法访问该值？还是我对此的思考方式完全错误？任何帮助将不胜感激。

```
import sys
from PyQt4 import QtGui, QtCore

class Example(QtGui.QWidget):

    def __init__(self):
        super(Example, self).__init__()

        self.initUI()

    def initUI(self):
        textBoxLabel = QtGui.QLabel('Text Input')
        self.textBox = QtGui.QLineEdit()

        okayButton = QtGui.QPushButton("Okay")

        okayButton.clicked.connect(self.printTexInput)

        grid = QtGui.QGridLayout()
        grid.setSpacing(10)

        grid.addWidget(textBoxLabel, 0, 0)
        grid.addWidget(textBox, 0, 1)
        grid.addWidget(okayButton, 3, 3)

        self.setLayout(grid)

        self.setGeometry(300,300,250,250)
        self.setWindowTitle("test")
        self.show()

    def printTexInput(self):
        print self.textBox.text()
        self.close()

def main():

    app = QtGui.QApplication(sys.argv)
    ex  = Example()
    sys.exit(app.exec_())

if __name__=='__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:19:04.690

现在`textBox`是方法中的一个局部变量，`initUI`当您离开该方法时它会永远丢失。如果你想存储`textBox`在你的类的这个实例上，你需要说`self.textBox = QtGui.QLineEdit()`。然后`printTextInput`你可以打电话`print self.textBox.text()`。

# java - Java IOException，文件路径异常

> ID：14669700
> 
> 赞同：-1
> 
> 时间：2013-02-03T05:12:48.810
> 
> 标签：java

我收到 java.io.IOException：文件名、目录名或卷标语法不正确，我不明白为什么。

如果我直接使用字符串尝试我的代码，它可以工作（文件夹存在，权限正常等）当我尝试从数组构建字符串时，它会失败并出现上述异常。这是代码，我尝试过失败的注释行，以及什么是有效的以及 println 输出是什么：

```
 // //////////////////////////////////////////////////////////////////
            // Create a file chooser and select a directory
            JFileChooser fc = new JFileChooser();
            fc.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
            fc.setAcceptAllFileFilterUsed(false);

            int rVal = fc.showOpenDialog(MyApp.this);

            if (rVal == JFileChooser.APPROVE_OPTION) {
                dlDirectory = fc.getSelectedFile().toString() + "\\"; 
                System.out.println("Selected Directory: " + dlDirectory);
            } else {
                System.out.println("No Selection");
            }

            ...
            ...(I create a string array of file names here)
            ...

            for (int i = 0; i < filesToRetrieve.length; i++) {

                    //put together the directory and file name
                    String dlFileName = (dlDirectory + filesToRetrieve[i]); 
                    try {   
                                System.out.println(dlDirectory); // output: C:\Users\michael\Documents\tmp\ (as expected)
                                System.out.println(filesToRetrieve[i]); // output: nameoffile.txt (as expected)
                                System.out.println(dlFileName); // output: C:\Users\michael\Documents\tmp\nameoffile.txt (as expected)

                                File myFile = new File(dlFileName); //<--this does not work -- java.io.IOException: The filename, directory name, or volume label syntax is incorrect
                                //File myFile = new File(dlDirectory + filesToRetrieve[i]); //<--this does not work either

                                //File myFile = new File(dlDirectory + "nameoffile.txt");  // <--this does work !?!?

                                if(!myFile.exists()) {
                                    System.out.println("file does not exist");
                                    myFile.createNewFile();
                                } 
                    } catch (Exception e) {
                        System.err
                                .println("failed");
                        System.err.println(e);
                    }       
            } 
```

谁能明白为什么会这样？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:26:36.537

尝试`File targetFile = new File(dlDirectory, filesToRetrieve[i]);`

PS也许尝试使用`trim()`文件名。

# iphone - 禁用 TabBar 的返回功能

> ID：14669708
> 
> 赞同：0
> 
> 时间：2013-02-03T05:14:39.790
> 
> 标签：iphone, ios, objective-c, xcode, uitabbarcontroller

我有一个包含导航栏和标签栏的详细视图。我可以轻松地隐藏/禁用导航栏中的后退按钮，但我需要防止用户通过按标签栏返回到列表视图。任何帮助都会很棒！

这就是我禁用导航栏中的后退按钮的方式：

```
[self.navigationItem setHidesBackButton:TRUE]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T07:14:06.477

在推送详细视图之前，请执行以下操作：

```
detailView.hidesBottomBarWhenPushed = YES; 
```

这样，当显示详细视图时，选项卡栏将被隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T07:28:23.757

我猜这就是你的故事板的样子。

![在此处输入图像描述](../Images/17c9590dbfd978dad563f694a52dffce.png)

但实际上，你应该这样做。

![在此处输入图像描述](../Images/bc758f77ef06bbcc6208a1ae0c2141c0.png)

# delphi - 什么时候 ISomeGenericInterface 可分配给 ISomeGenericInterface ?

> ID：14669712
> 
> 赞同：2
> 
> 时间：2013-02-03T05:15:30.497
> 
> 标签：delphi, generics, delphi-2010

> **可能重复：**
> [通用方法在 Delphi 2010 中返回通用接口](https://stackoverflow.com/questions/3574358/generic-method-returning-generic-interface-in-delphi-2010)

在 Delphi 2010 中，什么时候可以`ISomeGenericInterface<T>`分配给`ISomeGenericInterface<T>`?

以下程序按预期编译和运行...

```
unit uGenDemo;
interface

{.$define declare-a-type}

function Tokenize: IEnumerator<string>;
{$IFDEF declare-a-type}
type TX = integer;
{$ENDIF}

implementation  

uses SysUtils;

type
IStringEnumerator = interface( IEnumerator<string>)
    ['{3A28E4FB-CDF7-4933-8D67-D9EF5C2466E0}']
  end;

TBaseEnumerator = class( TInterfacedObject, IEnumerator)
  private
    function  MoveNext: Boolean;
    function  BaseGetCurrent: TObject;
    function  IEnumerator.GetCurrent = BaseGetCurrent;
    procedure Reset;
  end;

TStringEnumerator = class( TBaseEnumerator, IStringEnumerator)
  private
    function GetCurrent: string;
    property Current: string read GetCurrent;
  end;

function Tokenize: IEnumerator<string>;
begin
result := TStringEnumerator.Create as IStringEnumerator
end;

{ TBaseEnumerator }

function TBaseEnumerator.BaseGetCurrent: TObject;
begin
result := nil
end;

function TBaseEnumerator.MoveNext: Boolean;
begin
result := False
end;

procedure TBaseEnumerator.Reset;
begin
end;

{ TStringEnumerator }

function TStringEnumerator.GetCurrent: string;
begin
result := ''
end;

end. 
```

...但是，当我们在声明函数后声明任何类型时`Tokenize()`，例如，通过将行从 ...

```
{.$define declare-a-type} 
```

... 至 ...

```
{$define declare-a-type} 
```

...编译器阻止并抛出错误...

```
[DCC Error] uGenDemo.pas(43): E2010 Incompatible types: 'IEnumerator<System.string>' and 'IStringEnumerator' 
```

**为什么？**

1.  这是编译器错误吗？
2.  一般来说，将接口指针分配给一般参数化的祖先类型的接口指针是否安全？

（我的编译器版本是 Embarcadero® Delphi® 2010 Version 14.0.3593.25826）

# javascript - AngularJS/jQuery：更改跨度中的文本不会触发调整大小事件

> ID：14669721
> 
> 赞同：5
> 
> 时间：2013-02-03T05:18:45.943
> 
> 标签：javascript, jquery, angularjs, angularjs-directive

在我更改了跨度内的文本之后，我无法让 jQuery 的`resize`事件在 a 上触发。`span`

我正在`span`使用 AngularJS 指令将事件处理程序应用于元素：

```
angular.module("test.directives", [])
    .directive("trackSize", ["$parse", function($parse) {
        return function(scope, element, attrs) {
            function callback() {
                var size = { w: element.width(), h: element.height() };
                scope[attrs.trackSize].call(scope, size);
            }
            element.on("resize", function() {
                console.log("resize");
                scope.$apply(callback);
            });
            callback();
        };
    }]); 
```

但是当里面的文本发生变化时，我没有看到回调触发`span`。如果相关：正在使用嵌入的 AngularJS 表达式更改文本。

我的实际（完整）代码片段可以在 jsFiddle 上看到：http: [//jsfiddle.net/KkctU/13/](http://jsfiddle.net/KkctU/13/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T05:55:11.480

resize 事件并不适用于文档内的元素，例如跨度。它仅用于窗口。

[这是一个可能对您有所帮助的插件](http://benalman.com/projects/jquery-resize-plugin/)。我没有使用它，但它似乎对你来说是正确的。

不过，最后，在指令中设置一个监视绑定到它的内容可能会更好/更容易，然后检查文本更改时高度和宽度是否发生了变化。就像一个想法：

```
app.directive('trackSize', function () {
   return function(scope, element, attrs) {
       var w = element.width(),
           h = element.height();
       scope.$watch(attrs.trackSize, function(v) {
           element.text(v);
           var w2 = element.width(),
               h2 = element.height();
           if(w != w2 || h != h2) {
              //TODO: do something here, the size has changed.
           }           
       });
   }
}); 
```

# php - 将登录的用户名从 phpbb3 传递到 phpfreechat

> ID：14669731
> 
> 赞同：0
> 
> 时间：2013-02-03T05:20:30.973
> 
> 标签：php, phpbb3

嘿，我已经围绕 phpbb3 登录系统建立了一个会员网站。除非您登录，否则您无法访问该网站的某些部分，包括聊天室。

我希望 phpfreechat 使用登录到 phpbb3 的用户名自动登录。

这是我已经走了多远。

在聊天室页面的顶部...

```
<?php 

session_start();
include '../phpbb3/phpbb3class.php'; 

if(!$user->data['is_registered']) { header('Location: ../login/'); }
$_SESSION['chatname'] = $user->data['username'];

?> 
```

如果我回显 $_SESSION['chatname'] 我得到正确的值。

现在在 phpfreechat 的 config.php 文件中，我尝试使用提供的登录挂钩...

```
$GLOBALS['pfc_hooks']['pfc.before.auth'][5] = function ($app, $req, $res,) {
   return function () use ($app, $req, $res,) 
      {

    return ($_SESSION['chatname']);

   };
}; 
```

在 config.php 文件的顶部，我还有 session_start();

这不起作用，我加载了聊天页面并且聊天模板是空白的，没有登录用户:(

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:35:31.330

看看这段代码：[https ://github.com/kerphi/phpfreechat/tree/master/server/contrib/phpbb3-auth](https://github.com/kerphi/phpfreechat/tree/master/server/contrib/phpbb3-auth)

它展示了如何使用 phpfreechat 的 pfc.before.auth 钩子将 phpbb3 登录集成到聊天中。

您可以调整 auth.php 脚本以匹配您的 phpbb3 安装。

# css - 为什么透明 DIV 标签中的文本颜色会发生变化？

> ID：14669736
> 
> 赞同：0
> 
> 时间：2013-02-03T05:21:00.363
> 
> 标签：css

嗨，你能看看下面的例子（代码和链接），让我知道为什么透明 div 内其他元素的颜色也会改变，我该如何防止这种情况发生？我的意思是我喜欢我已经指定的文本框和字体颜色为白色，但现在它们看起来是灰色的！

[链接在这里](http://ghazalphoto.com/contact/)

正如您从链接中看到的那样，框内的文本输入颜色变为灰色！这是代码：

```
.test
{
    color:#FFF;
    border: solid 2px #2d2d2d;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
    height: 180px;
    width: 250px;
    filter: alpha(opacity=60);
    opacity: 0.60;
    background: #000;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T08:33:24.397

在元素上使用`opacity`也会影响所有子元素。这就是为什么您的文本看起来是灰色的原因。为了防止这种情况，请使用 RGBA 颜色并同时设置它的透明度值。

我创建了一个小[演示](http://jsfiddle.net/ShSMW/1/)来显示差异。

这是`background`.

```
background: rgba(0, 0, 0, 0.6); /* The last value declares the transparency */ 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T05:52:05.223

白色变成灰色是因为您将某些东西的不透明度设置为黑色背景上的 60%。删除不透明度规则，它应该看起来像您期望的那样。

**删除这些 CSS 规则**

```
filter: alpha(opacity=60);
opacity: 0.60; 
```

# akka - 如何告诉akka actor成功发送消息到其他actor的邮箱？

> ID：14669740
> 
> 赞同：3
> 
> 时间：2013-02-03T05:21:29.747
> 
> 标签：akka, lookup, actor, sender

这是我的关键任务应用程序中的场景：Actor A 做了一些资源密集型工作，然后在另一个物理 unix 盒子上向 Actor B 发送一条消息。B正在访问外部网元，可能需要很长时间来处理消息。然后 B 将处理结果发回给 A。

Q1：A 使用 B 的路径查找 B。如果 B 的 unix 框已关闭或 B 尚未启动，则查找将失败。akka doc 说返回了像 actor ref 这样的死信。我如何测试它是正常的演员参考还是返回了类似死信的演员参考？

Q2：假设B的正常actor ref是return。如果 A 使用 B.tell() 将 msg 发送到 B 并且 msg 无法到达 B 的邮箱，这是持久的，我怎么知道它发生了，以便 A 可以将 msg 发送到具有持久邮箱的本地演员 C？C 将一直尝试将消息传递给 B，直到它成功为止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T08:57:22.143

### 答案1：

`system.actorFor(someRemotePath)`总是给你一个远程actor ref，并且没有办法通过检查这个ref 来找出它指向的actor 是否存在或可以到达。找出在给定 URI 上是否存在 actor 的唯一方法是发送一条消息：如果您收到回复，那么它是活跃的，如果在一段合理的时间后没有回复，您必须假设它已关闭和/或重试——尽管很可能由于防火墙重新启动或其他原因而导致回复消息丢失。

### 答案 2：

您的参与者 C 是您所有问题的解决方案：您需要始终发送到 C 并让 C 确保消息最终被远程参与者确认。在 Akka 中无法查明给定消息是否已发送到邮箱，因为这并不意味着参与者无论如何都可以成功处理该消息。

一般来说，我建议阅读有关[消息传递保证](http://doc.akka.io/docs/akka/snapshot/general/message-delivery-reliability.html)的文档，尤其是在实施关键任务应用程序之前。

# apache - URL 重写导致现有链接相对于重写 url

> ID：14669741
> 
> 赞同：0
> 
> 时间：2013-02-03T05:22:14.090
> 
> 标签：apache, .htaccess, url-rewriting

我正在尝试将 url 重写到我当前的现有站点中。

说这是原始网址
`www.example.com/products/product.php?id=4`

并使用 URL 重写我将其更改为
`www.example.com/item/4`

* * *

通过这样做，所有现有链接都会更改为重写的 url，从而导致它们中断。
例如我有一个这样的链接：
`www.example.com/products/add.php`
现在改为
`www.example.com/item/add.php`

编辑：我在 .htaccess 中的规则是
`RewriteRule ^item/([0-9]+)/?$ products/product.php?id=$1 [NC,L]`

**反正有保留原始网址吗？**

谢谢，
维杜

# javascript - 在 dojo 附加的 div 上调用 onclick 事件

> ID：14669744
> 
> 赞同：0
> 
> 时间：2013-02-03T05:22:38.783
> 
> 标签：javascript, dojo, dom-events

我使用 dojo 将 onclick 添加到我的一个 div

```
dojo.connect(dojo.byId("button1"), "onclick", function () {
alert('clicked');
} 
```

我现在需要在 Javascript 的其他部分动态调用完全相同的函数，我试过了

```
dojo.byId("button1").onclick();. 
```

那没起效。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:58:01.080

这对我有用：

```
dojo.query("#button1").onclick(function(e){ 
alert('clicked');
})

dojo.byId('button1').click(); 
```

这是一个[JSFiddle](http://jsfiddle.net/hEHcf/11/)。

# php - 我如何提交表单并在完成后转到另一个页面？

> ID：14669745
> 
> 赞同：-5
> 
> 时间：2013-02-03T05:23:05.447
> 
> 标签：php, javascript, jquery, html, ajax

我有这个表格

**您的电子邮件**

**收件人电子邮件**

**主题**

**消息**

我如何提交这些数据并转到另一个页面（使用任何标记的语言）？请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T05:30:10.873

如果我的问题是正确的，那么您的答案将是：

您的提交按钮必须是这样的：

```
<form method="POST" action="file.php">
    <!-- Whatever data you want to submit -->
    <input type="submit" value="Submit">
</form> 
```

你的 PHP file.php 必须是：

```
<?php
   if(isset($_POST['submit']))
   {
    //Do all the submission part or storing in DB work and all here
    header('Location: whateverpath.php');
   }
?> 
```

让我知道这是否是您想要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T06:36:07.807

如果您只使用 PHP 来完成任务，请使用以下代码重定向到另一个页面。

```
header('Refresh: 5; URL= navigated.php'); 
```

在这里，5 是重定向的刷新计时器，URL 定义了你想去的地方。不要忘记一件事，永远不要在这个头函数之前写一个回显语句。

如果您想通过 javascript 或 jquery 执行此操作，请在末尾添加以下行。

```
window.location.href=navigated.php; 
```

在这里，navigated.php 是您要重定向的页面。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T08:49:30.853

从页面 A 到页面 B（PHP）然后到页面 C 的替代方法是从 A 到 B 提交 ajax 帖子，验证，然后直接进入页面 C。这样做的好处是您可以在服务器端进行验证（发生在页面 B），并在页面 A 上警告您的用户，而无需离开或重新加载它。否则，您将不得不从 A 到 B，然后再返回 A。

```
<script>
$(function() {
        $('form').submit(function() {
                //Initial validation
                if($('#input1').val()=="")
                {
                    alert("field is blank!");
                    return false
                }
                //After validating form, send to page B
                $.post('PageB.php', {
                        'field1': $('#input1').val(),
                        'field2': $('#input2').val()
                        //etc
                    }, function (data) {
                        //Validate the response from Page B
                        if (data!="success")
                        {
                            alert("Error:"+data);
                        }
                        else
                        {
                            //Go to Page C if Page B was successful
                            window.location.href = "nextpage.html";
                        }
                    });
        return false;
    });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T11:01:47.710

使用 JQuery 和 AJAX 以及 JSP servlet 或 PHP 等服务器端脚本的类型非常容易。在我的情况下，我将 JSP 用作服务器端脚本，并使用 JQuery 的 AJAX 支持提交到服务器端脚本。

服务器端组件的代码在这里..

page2.jsp

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>

    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Insert title here</title>
    </head>
    <body>

    <h1 style="color:red">Contents from Page 2</h1>
    <%=request.getParameter("parmeter")%>
    </body>
    </html> 
```

客户端脚本的代码在这里..

页面1.html

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Insert title here</title>
    </head>
    <body>
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
       <script>       
          function submitRequest(){

             var v= document.getElementById("test1").value;
             alert(v);
              $.ajax({url:"page2.jsp?parmeter="+v,
                    error: function (xhr, ajaxOptions, thrownError) {

                        alert("fail");
                        alert(xhr.status);
                        alert(thrownError);
                   },
                    success:function(result){
                          alert("sucesses");
                          $("#mydiv").html(result);
                    }
                  });
          }

        </script>

    </body>

    <form>
        <!-- Whatever data you want to submit -->
        <input type="text" id="test1"><br>
        <input type="button" value="Submit" onclick="submitRequest()">
    </form>

    <div id="mydiv">
    Contents of Page 2 jsp will be displayed here
    </div>
    </html> 
```

单击提交后，在文本框中输入的内容将提交给该函数`submitRequest()`，该函数对另一个页面进行 AJAX 调用，将请求提交给 page2.jsp。page2.jsp 只显示接收到的参数，因此我们可以选择通过在 AJAX 回调函数中编码来在当前页面上显示 page2 的结果，**如上**所示。

它会将当前页面的内容替换为通过 AJAX 请求请求的页面。表明我们可以将详细信息提交到其他页面

# ios - 在导航栏按钮中显示未读消息的数量

> ID：14669748
> 
> 赞同：0
> 
> 时间：2013-02-03T05:24:08.227
> 
> 标签：ios, uinavigationbar

![导航栏按钮](../Images/89e4309a90ef9f59798a62af1a22cb36.png)

如何创建此功能在其中没有。未读消息显示在导航栏按钮的右上角？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:30:38.940

这可能只是一个在 UINavigationBar 顶部添加标签的红色视图。例如，添加此代码，您会在导航栏上注意到类似的内容：

```
UILabel *redLabel = [[UILabel alloc] init];
[redLabel setBackgroundColor:[UIColor redColor]];
[redLabel setTextColor:[UIColor whiteColor]];
[redLabel setText:@"2"];
[redLabel setFont:[UIFont boldSystemFontOfSize:14.0]];
[redLabel setShadowColor:[UIColor blackColor]];
[redLabel setShadowOffset:CGSizeMake(0, 1)];
[redLabel setTextAlignment:NSTextAlignmentCenter];

[redLabel sizeToFit];
[redLabel setFrame:CGRectMake(120, 4, [redLabel frame].size.width + 6, [redLabel frame].size.height)];

[[[self navigationController] navigationBar] addSubview:redLabel]; 
```

# http - 如何查看 HTTP 请求的所有详细信息

> ID：14669750
> 
> 赞同：0
> 
> 时间：2013-02-03T05:24:38.213
> 
> 标签：http, google-chrome, firefox

在有关 HTTP 的 Wikipedia 文章中，此屏幕截图作为每个 HTTP 请求的所有幕后示例提供。

我的问题是，使用 Google Chrome 或 Firefox，有没有办法以与此屏幕截图相同的方式查看所有 HTTP 标头、请求、状态、类型和所有其他细节？

![维基百科 HTTP](../Images/f0292d11afcd3620a9f964d538170634.png)

# android - Android倒数计时器显示毫秒？

> ID：14669752
> 
> 赞同：2
> 
> 时间：2013-02-03T05:24:49.070
> 
> 标签：android, android-sdk-tools

当我点击一个从 3 秒开始倒计时的按钮时，我想要一个计时器弹出。它做得很好，但我希望它也显示毫秒，所以当我单击按钮时，文本将从 3.0 变为 0.1。如何将毫秒添加到文本视图？

```
new CountDownTimer(1000, 3000) {

                public void onTick(long millisUntilFinished) {
                    textViewTimer.setText("" + millisUntilFinished / 1000);
                }

                public void onFinish() {
                    textViewTimer.setVisibility(View.INVISIBLE);
                    textViewLevelGained.setVisibility(View.INVISIBLE);

                }
            }.start(); 
```

这就是我所拥有的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T05:52:40.513

其他 SO 问题表明 CountDownTimer 不能很好地做到低于 1 秒的粒度。查看不同的类，例如 TimerTask。

否则，以下将起作用。

```
new CountDownTimer(3000, 1) {
    public void onTick(long millisUntilFinished) {
        textViewTimer.setText("" + millisUntilFinished / 1000
          + "." + millisUntilFinished % 1000);
    }

    public void onFinish() {
        textViewTimer.setVisibility(View.INVISIBLE);
        textViewLevelGained.setVisibility(View.INVISIBLE);
    }
}.start(); 
```

# java - 服务器上有可用的 RAM，但无法运行 java 应用程序

> ID：14669755
> 
> 赞同：-1
> 
> 时间：2013-02-03T05:25:05.917
> 
> 标签：java, memory

我的服务器有 24GB 的 RAM。它在 Windows Server 2008 上运行。现在，我正在寻找，其中大约 80% 是免费的。但是，当我尝试运行 Java 应用程序时，我可以为其堆大小提供的最大值是 - `Xmx1500m`。如果我尝试`-Xmx1600m`或`-Xmx2G`应用程序将无法启动。这是 Java 还是我的应用程序的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T05:34:48.657

32 位进程在 Windows 下有此限制。32 位进程可以使用的最大内存量是 2G。您可以通过升级到 64 位版本的 Java 轻松解决此问题。

# c# - Console.WriteLine 在 Resolve() 之后不起作用

> ID：14669756
> 
> 赞同：0
> 
> 时间：2013-02-03T05:25:12.303
> 
> 标签：c#, containers, castle-windsor, console.writeline

此代码在执行期间没有给出错误或警告。但它忽略了 console.read() 函数，我是温莎的新手。这真的是一个错误还是温莎的简单行为？

```
using System;
using Castle.Windsor;
using Castle.MicroKernel.Registration;

namespace CastleProject
{
class Program
{
    internal interface ILogger
    {
        void log(string message);
        void showMethod();
    }
    internal interface Ishowing
    {
        void checkInterface();
    }

    class Logger : ILogger
    {
        public void log(string message)
        {
            Console.WriteLine(message);
            Console.Read();
        }
        public void showMethod()
        {
            Console.WriteLine("This is again showing just function i existing");
        }

    }
    class Showing : Ishowing
    {
        public void checkInterface()
        {
            Console.WriteLine("this is line from checkInterface()");
            var a = Console.ReadLine();
            Console.WriteLine(a);
        }
    }

    static void Main(string[] args)
    {
        var container = new WindsorContainer();
        container.Register(Component.For<ILogger>().ImplementedBy<Logger>(),Component.For<Ishowing>().ImplementedBy<Showing>());
        var logger = container.Resolve<ILogger>();
        var logger2 = container.Resolve<Ishowing>();
        logger.log("hello message");
        logger.showMethod();
        logger2.checkInterface();          
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:34:28.287

我想你可能想要使用`Console.ReadLine`而不是`Console.Read`.

试试这段代码来理解 Read/ReadLine 行为：

```
var a = Console.Read();
Console.WriteLine(a);
var b = Console.ReadLine();            
Console.WriteLine(b); 
```

# linux - bash中的剪切命令以引号终止

> ID：14669760
> 
> 赞同：2
> 
> 时间：2013-02-03T05:26:06.217
> 
> 标签：linux, bash, shell, unix, scripting

因此，我试图读取一个文件，该文件包含一堆带有电子邮件地址的行，然后是其中的昵称。我正在尝试提取这个用括号括起来的昵称，如下所示

```
email@somewhere.com (Tom) 
```

所以我的想法只是使用 cut 来理解这个词`Tom`，但是当我最终得到以下内容时，这被挫败了

```
email2@somewhereElse.com ("Bob") 
```

因为 Bob 有引号，所以 cut 命令失败如下

`cut: <file>: Illegal byte sequence`

有谁知道这样做的更好方法？或解决此问题的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T10:55:42.373

将您的重置`locale`为`C`（原始未解释的字节序列）以避免`Illegal byte sequence`错误。

```
locale charmap
LC_ALL=C cut ... | LC_ALL=C sort ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T05:30:07.053

我觉得

```
grep -o '(.*)' emailFile 
```

应该这样做。“遍历文件中的所有行。查找以打开括号开头的序列，然后是任何字符，直到关闭括号。将与字符串匹配的位回显到标准输出。”

这会保留昵称周围的引号......以及括号。如果你不想要这些，你可以剥离它们：

```
grep -o '(.*)' emailFile | sed 's/[(")]//g' 
```

（“将方括号之间的任何字符替换为空，无处不在”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T07:00:52.253

```
perl -lne '$_=~/[^\(]*\(([^)]*)\)/g;print $1' 
```

[在这里](http://ideone.com/63Xgbc)测试

# java - 传递给方法的 Java 参数

> ID：14669763
> 
> 赞同：0
> 
> 时间：2013-02-03T05:27:19.630
> 
> 标签：java, argument-passing

> **可能的重复：**
> [Java 是“按引用传递”吗？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)
> [Java中的值传递还是引用传递？](https://stackoverflow.com/questions/7301637/pass-by-value-or-pass-by-reference-in-java)

当我们将参数传递给 java 类中的方法时。传入的参数是默认 **通过VALUE**还是**BY REFERENCE ？**

可能有两种可能性，
1\. 如果我们将参数从同一个类中的另一个方法传递给一个方法。
2\. 如果我们将参数传递给另一个类的方法。

其次，如果我想通过引用传递值（如果java的默认属性是By Value）那么我应该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T05:29:13.367

无论如何.. Java 是**按**值传递的，甚至**引用**也是按值传递的

要在这里获得更多示例，请阅读一些有趣的链接

[http://www.javaworld.com/javaqa/2000-05/03-qa-0526-pass.html](http://www.javaworld.com/javaqa/2000-05/03-qa-0526-pass.html)
[如何对Java中的原语按引用传递等效传递](https://stackoverflow.com/questions/5614562/how-to-pass-by-reference-in-java)
[值或在Java中按引用传递？](https://stackoverflow.com/questions/7301637/pass-by-value-or-pass-by-reference-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T06:49:07.690

我很确定 Java 都是按值传递的。C/C++ 是通过引用传递的。就通过引用传递而言，这很容易。与 C 一样，Java 也有返回类型方法。您只需将变量放在赋值 ( = ) 运算符的左侧，即可调用返回其新值的方法。加上其他一些方法。

字符串名称 = "Jon Doe";

名称 = 获取名称（）；

字符串 getName() {

//获取名称的代码在这里。

}

# java - spring3构建错误

> ID：14669764
> 
> 赞同：0
> 
> 时间：2013-02-03T05:27:53.297
> 
> 标签：java, spring, jakarta-ee, spring-mvc

我有一个使用 struts2 和 spring 3 的 Web 应用程序。为了配置 spring，我使用 eclipse 和 tomcat 中的构建路径在项目中添加了所需的库。我也在 web.xml 中添加了监听器，但是当我想运行应用程序时，会出现此错误：严重：配置类 org.springframework.web.context.ContextLoaderListener java.lang.ClassNotFoundException: org.springframework.web 的应用程序监听器时出错.context.ContextLoaderListener 我用谷歌搜索太多但什么也没发生..有人告诉我一定要在应用程序库和 tomacat 中添加 spring-web.jar，但没有任何变化..请帮忙

类路径：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
<classpathentry kind="src" path="src"/>
<classpathentry exported="true" kind="con"    path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jre6">
    <attributes>
        <attribute name="owner.project.facets" value="java"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="con" path="org.eclipse.jst.server.core.container/org.eclipse.jst.server.tomcat.runtimeTarget/Apache Tomcat v6.0">
    <attributes>
        <attribute name="owner.project.facets" value="jst.web"/>
    </attributes>
</classpathentry>
<classpathentry exported="true" kind="con" path="org.eclipse.jst.j2ee.internal.web.container"/>
<classpathentry exported="true" kind="con" path="org.eclipse.jst.j2ee.internal.module.container"/>
<classpathentry exported="true" kind="con" path="org.eclipse.jdt.USER_LIBRARY/hibernate"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/antlr-2.7.6.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/asm-attrs.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/asm.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/cglib-2.1.3.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/commons-beanutils-1.8.2.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/commons-collections-3.1.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/commons-collections-3.2.1.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/commons-digester-2.1.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/commons-fileupload-1.2.2.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/commons-logging-1.0.4.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/commons-logging-1.1.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/commons-logging.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/DateConverter.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/dom4j-1.6.1.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/ejb3-persistence.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/freemarker-2.3.13.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/groovy-all-1.7.5.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/hibernate-annotations.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/hibernate-commons-annotations.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/hibernate-validator.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/hibernate3.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/hsqldb.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/imaging.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/iText-2.1.7.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/jasperreports-4.5.1.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/javassist-3.9.0.GA.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/jdt-compiler-3.1.1.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/jstl-1.2.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/jta-1.1.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/junit-3.8.1.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/log4j-1.2.15.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/ocrs12.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/ognl-2.6.11.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/orai18n.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/simplecaptcha-1.1.1.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/slf4j-api-1.5.8.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/slf4j-log4j12-1.5.8.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/sqljdbc4.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/standard.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/struts2-convention-plugin-2.1.6.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/struts2-core-2.1.6.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/struts2-fullhibernatecore-plugin-1.4-GA.jar"/>
<classpathentry exported="true" kind="lib" path="WebContent/WEB-INF/lib/xwork-2.1.2.jar"/>
<classpathentry exported="true" kind="con" path="org.eclipse.jdt.USER_LIBRARY/spring"/>
<classpathentry kind="output" path="WebContent/WEB-INF/classes"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:18:54.510

`org.springframework.web.context.ContextLoaderListener java.lang.ClassNotFoundException` 当 eclipse 不正确地将应用程序发布到 tomcat 服务器时，我经常遇到这个问题（这经常发生在我一天中第一次启动 eclipse 或在一些更大的 svn checkout 之后）

在我的情况下，它有助于执行一系列操作（并始终等待下一步，直到前一步完成！）

*   首先刷新项目（F5），然后
*   有一个干净的项目构建（项目/清洁），
*   再次刷新项目 (F5)，然后
*   清理服务器
*   将项目发布到服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:49:55.170

我建议使用 maven 而不是手动摆弄 eclipse 类路径，如果您可以这样做的话。以下是您可以遵循的简单步骤：

```
mvn archetype:generate -DgroupId=com.test -DartifactId=test -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=false 
```

这将生成所需的 Maven 项目结构。然后编辑 pom.xml 文件，如下所示。

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.test</groupId>
  <artifactId>test</artifactId>
  <packaging>war</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>test Maven Webapp</name>
  <url>http://maven.apache.org</url>
  <repositories>
    <repository>
      <id>java.net</id>
      <url>http://download.java.net/maven/2/</url>
    </repository>
  </repositories>
  <dependencies>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-context</artifactId>
      <version>3.0.0.RELEASE</version>
      <scope>runtime</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.struts</groupId>
      <artifactId>struts2-core</artifactId>
      <version>2.1.8</version>
    </dependency>
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate</artifactId>
      <version>3.2.7.ga</version>
    </dependency>
    <dependency>
      <groupId>dom4j</groupId>
      <artifactId>dom4j</artifactId>
      <version>1.6.1</version>
    </dependency>
    <dependency>
      <groupId>commons-logging</groupId>
      <artifactId>commons-logging</artifactId>
      <version>1.1.1</version>
    </dependency>
    <dependency>
      <groupId>commons-collections</groupId>
      <artifactId>commons-collections</artifactId>
      <version>3.2.1</version>
    </dependency>
    <dependency>
      <groupId>cglib</groupId>
      <artifactId>cglib</artifactId>
      <version>2.2</version>
    </dependency>
    <dependency>
      <groupId>antlr</groupId>
      <artifactId>antlr</artifactId>
      <version>2.7.7</version>
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
  <build>
    <finalName>test</finalName>
  </build>
</project> 
```

构建项目：

```
mvn clean package 
```

并生成eclipse配置源文件：

```
mvn eclipse:eclipse -DdownloadSources=true 
```

这些步骤足以创建项目结构，该结构在类路径中具有所需的库并附加了源代码。

最后，您可以在 Eclipse 中导入项目。

```
File > Import > General > Existing project into Workspace > Select the project directory 
```

[您可以从http://maven.apache.org/download.cgi](http://maven.apache.org/download.cgi)下载并安装 maven

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T02:02:46.963

我看到你使用 eclipse wtp 插件来运行 web 应用程序，然后你可以在文件系统中找到扩展 web 应用程序，并检查 lib 目录有 spring.jar，你也可以看到这个[我的应用程序没有看到 ContextLoaderListener](https://stackoverflow.com/questions/14670157/my-application-does-not-see-contextloaderlistener)

# django-models - Django模型从同一模型插入外键

> ID：14669768
> 
> 赞同：2
> 
> 时间：2013-02-03T05:28:31.233
> 
> 标签：django-models

我正在 Django 中构建一个简单的评论应用程序。该应用程序允许回复评论并使用相同的模型来存储评论和回复。我的问题是当我尝试插入新回复时，父帖子（FK 到父评论）插入为 NULL。当我使用管理界面插入回复时，它会正确存储我选择的父帖子的父帖子 ID。所以我知道问题不在我的模型中，而是在我的观点中。

/*型号*/

```
class UserPost(models.Model):

name = models.CharField(max_length=50)
slug = models.SlugField(max_length=50, unique=True,
                        help_text='Unique value for product page URL, created from name.', editable = False)

post = models.TextField()
is_active = models.BooleanField(default=True)
meta_keywords = models.CharField("Meta Keywords", max_length=255, blank = True, null = True,
                                 help_text='Content for description meta tag')
meta_description = models.CharField(max_length = 255, blank = True, null = True,
                                    help_text = 'Content for description meta tag')
created_at = models.DateTimeField(auto_now_add = True)
updated_at = models.DateTimeField(auto_now = True)
parentpost = models.ForeignKey('self', blank = True, null = True)

class Meta:
    #app_label = ''

    db_table = 'userposts'
    ordering = ['created_at']
    verbose_name_plural = 'UserPosts'

def __unicode__(self):
    return self.name

@models.permalink   
def get_absolute_url(self):
    return ('lync_posts', (), {'posts_slug': self.slug})

def save(self):
    if not self.id:
        d = datetime.datetime.now()
        s = d.strftime('%Y-%M-%d-%H-%M-%S-%f')

        slugfield = str(self.name + s)
        self.slug = slugfield

        super(UserPost, self).save() 
```

/*查看*/

```
def reply(request, slugIn):

parentpostIn = UserPost.objects.get(slug = slugIn)

pid = parentpostIn.id
template_name = 'reply.html'

if request.method == 'POST':
    form = forms.ReplyPostForm(data = request.POST)
    # create a new item

    if form.is_valid(): # All validation rules pass
        # Process the data in form.cleaned_data
        # ...
        if form.is_valid():
            nameIn = form.cleaned_data['name']
            postIn = form.cleaned_data['post']

            newPost = UserPost(name = nameIn, post = postIn, parentpost = pid)
            newPost.save()
    return render_to_response(template_name, locals(), context_instance = RequestContext(request))

else:
    # This the the first page load, display a blank form
    form = forms.NewPostForm()

    return render_to_response(template_name, locals(), context_instance=RequestContext(request))

return render_to_response(template_name, locals(), context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:11:33.387

您正在尝试通过 id 设置 parentpost ForeignKey。

您应该使用：

```
newPost = UserPost(name = nameIn, post = postIn, parentpost = parentpostIn) 
```

或（参见[Django：使用整数设置外键？](https://stackoverflow.com/questions/2846029/django-set-foreign-key-using-integer)）：

```
newPost = UserPost(name = nameIn, post = postIn)
newPost.parentpost_id = pid 
```

# class - 如何获取scala类字段的注释

> ID：14669772
> 
> 赞同：2
> 
> 时间：2013-02-03T05:28:59.403
> 
> 标签：class, scala, annotations, field

> **可能重复：**
> [如何创建注释并在 scala 中获取它们](https://stackoverflow.com/questions/5177010/how-to-create-annotations-and-get-them-in-scala)

其他示例获取带注释的类的注释。我想做的是获取类字段的注释（此测试中的版本），如下所示：

```
import java.lang.annotation.{RetentionPolicy, Retention}
import annotation.meta.field

class AttribField() extends scala.annotation.StaticAnnotation
object MyTypes { type Attrib = AttribField @field }
import MyTypes._
case class TestClass(@Retention(RetentionPolicy.RUNTIME) 
                     @Attrib version: Option[String])
object TestMe {
  def main(args: Array[String]) {
    val testObj = new TestClass(version = Some("1"))
    testObj.getClass.getDeclaredFields.foreach(field => {
  field.setAccessible(true)
  println("field: name=" + field.getName + " value=" + field.get(testObj))
  field.getAnnotations.foreach(x => println("x="+x))  // nothing in here
  field.getDeclaredAnnotations.foreach(x => println("y="+x))  // nothing in here
  // does not even compile
//     field.getAnnotation(classOf[AttribField])
   })
  }
} 
```

我想测试是否有某个注释，然后分支。但我不能通过去。一定有一些基本的东西我错过了，但是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:20:10.027

有了这个片段，我猜你会非常接近你的目标。

```
import scala.reflect.runtime.universe
def annotationsOf[T: universe.TypeTag](obj: T) = {
    universe.typeOf[T].members.foldLeft(Nil: List[universe.type#Annotation]) {
        (xs, x) => x.annotations ::: xs
    }
} 
```

你会在你的例子中这样称呼它：

```
val testObj = TestClass(version = Some("1"))
println(annotationsOf(testObj)) 
```

如果您想了解更多信息，您应该查看一下`TypeTag`，特别是`members`，我的代码片段中的内容以及它提供的方法。

问候，
丹尼尔

# css - IE悬停在没有背景的情况下不起作用？

> ID：14669777
> 
> 赞同：0
> 
> 时间：2013-02-03T05:29:59.230
> 
> 标签：css, internet-explorer, menu, hover, html-lists

我有一个 IE（8 及更高版本）css 问题，在 Wordpress 中生成了一个非常典型的基于列表的下拉菜单。这不是 JavaScript 问题。

如果有人可以请看这里：http: [//jchmusic.com](http://jchmusic.com)

点击右侧的“更多”链接。出现下拉子菜单。到现在为止还挺好。

但是在 IE 中，当一个人将鼠标从“更多”移到下拉菜单（这是一个 ul）时，无法到达下拉菜单。在 Chrome、FF、Safari 中运行良好。

但是，如果我向包含下拉菜单的 ul 添加背景颜色，则悬停“工作”正常。

任何建议的解决方法？

```
<li id="menu-item-3570" class="menu-item menu-item-type-custom menu-item-object-custom     current-menu-item current_page_item menu-item-home">
  <a href="http://jchmusic.com/#more">More…&lt;/a>
  <ul class="sub-menu">
    <li id="menu-item-1835" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://jchmusic.com/downloads/">Downloads</a>
    </li>
    <li id="menu-item-1873" class="menu-item menu-item-type-post_type menu-item-object-page">
    <li id="menu-item-1849" class="menu-item menu-item-type-post_type menu-item-object-page">
    <li id="menu-item-2025" class="menu-item menu-item-type-post_type menu-item-object-page">
    <li id="menu-item-3585" class="menu-item menu-item-type-post_type menu-item-object-page">
  </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T05:33:34.427

具有透明背景的元素对于 IE 中的鼠标事件也是“透明的”。

您可以通过使用“几乎但不完全透明”的背景 ( `rgba(0,0,0,0.01)`) 来解决此问题，但这仅适用于最新版本。另一种方法是只使用纯色背景。

# r - R：二次曲线打印成几十 条线

> ID：14669783
> 
> 赞同：2
> 
> 时间：2013-02-03T05:30:33.683
> 
> 标签：r, curve-fitting, quadratic

R 没有打印出漂亮的曲线，而是打印出密集的线段。不过，那个密集混乱的边缘看起来与我要打印的曲线一模一样。

![错误图](../Images/067d017b938105aef598b6bd7b614314.png)

我绘制了数据集 X2 和 Y2，并试图在现有图上打印二次曲线。这是我的代码：

> X22 <- X2^2
> 
> model2s <- lm(Y2 ~ X2 + X22)
> 
> 情节（X2，Y2）
> 
> 线（X2，拟合（model2s））

```
X2:
[1] -2.69725933 -1.54282303 -1.91720835 -0.08528522 -2.57551112 -2.65955930  1.66190727  0.01135419
  [9] -1.67597429 -0.46931267  1.31551076  1.78942814 -0.54821881 -2.93750249 -0.63519111 -2.17234702
 [17]  2.26156660 -2.13808807 -0.74155513  2.65037057  2.44828088 -2.52896408 -2.02068505 -1.36222982
 [25]  1.97171562 -0.27897421 -2.12562749 -0.85870780  0.71198294  1.24482512  0.20295272 -1.58949497
 [33] -0.59396637  0.45486252  2.51659763  2.62181364  2.20407646  1.06466931 -1.43400604  0.01579675
 [41] -0.33513385 -0.05453015  1.96167436  1.28448541 -2.69429783 -1.08642394 -0.09400599  2.98775967
 [49]  2.05795131  1.58896527  0.67934349 -0.13352141 -0.52543898 -2.40677026 -0.13610972 -1.31887725
 [57] -1.56066767 -1.35457660  1.16511448 -2.55372404 -2.28185200 -0.19699659  1.84159785  1.24092476
 [65] -2.90374380  2.29220701  1.22968228  2.60137009  0.87307737  2.71556663  0.94467230  0.96922155
 [73]  1.89863312  1.64500729  1.37186380 -1.87455109  1.15276643  0.26130981 -1.84580809 -1.32085543
 [81] -2.41207641  0.19248616 -1.65741770  2.13950098 -1.69597327 -0.06976200  1.14711285  2.97132615
 [89]  0.71798324 -1.02838913  0.44070700  2.07600642 -0.21917452 -0.36556134  2.60091749 -1.41738042
 [97]  1.04864677  0.83080236  2.56432957 -0.72499588 -0.81415858 -2.49700816 -2.72860601  0.49777866

Y2:
  [1]  -9.00479135  -1.56827264  -3.85069478   3.80620694  -7.78195591  -6.21173824   4.24967581   3.39550072
  [9]  -2.51108153   1.71820705   5.44931613   4.97755290   2.66081793 -11.34941655   0.27113981  -5.27374362
 [17]   3.55191243  -3.64065638   1.27630806   4.20004221   5.53455823  -6.48854059  -4.17995733  -2.00651295
 [25]   3.72495467   0.68337096  -4.28579895  -1.37001146   4.87616860   6.06427661   1.70089898  -3.07543568
 [33]   2.90859968   4.12792739   2.76034855   3.87910950   4.14718875   4.73100437  -2.38820139   3.32093131
 [41]   1.86320165   3.27669364   2.46242358   4.92157619  -7.90548937  -0.75929903   2.94267998   1.74858185
 [49]   3.45587195   3.74016585   4.00274064   2.93845395   1.85504582  -4.30620277   3.40285048  -1.11881798
 [57]  -0.50718093  -0.43403754   2.54878083  -6.90253145  -5.37796863   3.25636120   3.41966211   3.40255742
 [65]  -8.59066220   1.82125444   3.20829746   2.46454987   4.09421369   1.79725157   5.61761174   4.55423983
 [73]   3.12240983   2.86139737   4.00807877  -4.19551852   4.63684416   4.82350596  -2.73656766  -1.69755051
 [81]  -4.16628941   2.60384722  -2.77361082   3.98215540  -2.73349536   1.61857480   4.05148933   3.57791895
 [89]   3.35775758   1.13832332   4.17317062   1.62551176   1.15076311   2.24591763   1.99284489  -2.35373088
 [97]   3.86807106   5.50186659   2.51879877   0.82435797   1.56822937  -9.69863069  -7.75684415   3.61224550 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T07:16:29.597

`lines`将按照给定的顺序在点之间画线。就像是

```
plot(X2,Y2)
ox2 <- order(X2)
lines(X2[ox2],fitted(model2s)[ox2]) 
```

应该给你你正在寻找的东西。

# java - 拦截@Finally 和@Catch

> ID：14669786
> 
> 赞同：1
> 
> 时间：2013-02-03T05:30:57.003
> 
> 标签：java, playframework, playframework-1.x

我正在尝试使用拦截在控制器中进行异常处理的演示`@Finally`。

我故意`NullPointerException`在控制器中并试图在`@Finally`块中捕获异常。

当我尝试这样做时，它可以工作：

```
@Finally
 static void log(Throwable e) {
   if( e == null ){
       Logger.info("Inside FInally: Action call was successful");
   } else{
       Logger.info("Inside Finally: Action call failed", e);
   }
 } 
```

但是如果我尝试这个它不起作用：

```
@Finally
static void log(NullPointerException e) {
   if( e == null ){
       Logger.info("Inside FInally: Action call was successful");
   } else{
       Logger.info("Inside Finally: Action call failed", e);
   }
 } 
```

同样，如果我考虑`@Catch`拦截，那么以下两种方法都有效：

```
 @Catch(value = Throwable.class , priority = 2)
 public static void te(Throwable throwException){
    .....
 }

@Catch(value = NullPointerException.class , priority = 1)
public static void npe(Throwable throwNullPointerException){
    .....
 } 
```

`@Finally`为什么第二种情况在拦截中不起作用？**对任何类型的异常只** `Throwable`使用超类而不是使用任何特定的子类异常是否是一种强迫行为？

请让我知道这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:45:36.753

在线开发人员指南没有明确说明您不能使用特定的异常类型。但是考虑到这个**@Finally** intercetpion 背后的想法，我想你是对的；也就是说，**@Finally**只接受 Throwable。

我们从这个角度考虑，如果方法中有**多个catch语句**，如果抛出异常，只会触发一个catch。**在这种情况下，如果参数是NPE**但实际上抛出了**DBConnectionTimeout**（例如），那将是令人困惑的。因此，您的拦截器无法与其他类型的异常一起使用，您也不能拥有多个 @Finally 拦截器。

# c++ - 执行地址而不直接修改地址时引发异常

> ID：14669788
> 
> 赞同：0
> 
> 时间：2013-02-03T05:32:27.787
> 
> 标签：c++, windows, exception, breakpoints

我想在执行给定地址的代码时引发异常，而不使其在代码中可见。

我知道使用硬件断点是可能的，但是如果有人要附加使用它们的调试器，这些将被删除，我无法检测它们是否丢失并替换它们。还有哪些其他选择？

速度是一个问题，即：我不能做 PAGE_GUARD 单步；用户会滞后到死。

我在 Windows 上并使用带有 C++ 的 VC 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:57:18.360

如果异常处理成本太高，唯一的其他解决方案是像 CPU 那样模拟代码。

但是，有一些警告：

*   有很多指令，正确解码和模拟它们是一项艰巨的任务。在仿真和执行之间切换会花费你额外的 CPU 周期。
*   您将无法模拟所有内容，因此必须在“操场/沙盒”中执行许多指令（例如 FPU/MMX/SSE 指令）。
*   要正确处理系统调用，您实际上必须准备 CPU 状态并执行它们，然后返回模拟器。您可能必须在此处动态生成代码。
*   如果模拟代码导致 CPU 异常并使用 SEH 处理它们（或再次通过 SEH 将 C++ 异常作为 CPU 异常抛出和捕获），您很可能会破坏代码，因为堆栈展开不会在外部（模拟器）上工作堆。
*   多线程代码会让事情变得棘手，尤其是在多处理器系统上。您必须捕获线程创建/销毁并创建/销毁模拟器的各个实例，并处理线程之间的内存共享并处理模拟/执行指令的原子性。
*   什么我都忘了去想。
*   事情可能仍然工作得太慢或根本不起作用。

另一个可能更实用的选项是在感兴趣的地址修补可执行文件，将执行转移到您的代码（使用`jmp`指令），在那里做任何您需要的事情，然后返回。您必须处理所有上下文保存/恢复，并模拟被`jmp`写在它们上面的指令损坏的指令。这里也有一些警告。那些被覆盖的指令可能会从代码的其他地方跳转到。您必须选择地址以确保不会跳转到您的中间，`jmp`或者您必须以某种方式处理它们（尚不确定如何处理）。

# sql - 使用此数据构建查询

> ID：14669789
> 
> 赞同：1
> 
> 时间：2013-02-03T05:32:34.893
> 
> 标签：sql, sql-server, select

```
╔════╦══════╦════════════╗
║ ID ║ NAME ║    WORK    ║
╠════╬══════╬════════════╣
║  1 ║ a    ║ complete   ║
║  1 ║ a    ║ complete   ║
║  2 ║ b    ║ incomplete ║
║  3 ║ c    ║ complete   ║
║  4 ║ d    ║ incomplete ║
║  4 ║ d    ║ complete   ║
║  5 ║ e    ║ complete   ║
║  5 ║ e    ║ complete   ║
║  5 ║ e    ║ incomplete ║
║  6 ║ f    ║ incomplete ║
║  6 ║ f    ║ incomplete ║
╚════╩══════╩════════════╝ 
```

我想构建一个查询，该查询仅检索所有作业已完成或单个未完成的 id

例如在上面的数据中我只想得到这些 id

```
1, 2, 3, 4, 5 
```

不是 6，因为它有不止一个不完整的工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T05:41:37.770

```
SELECT  ID, Name
FROM    tableName
GROUP   BY ID, NAME
HAVING  SUM(CASE WHEN Work = 'Incomplete' THEN 1 ELSE 0 END) < 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/f93fd/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T05:38:39.413

您应该可以使用以下方法执行以下操作`NOT EXISTS`：

```
SELECT DISTINCT H.ID
FROM Homework H
WHERE H.Work = 'Complete'
   AND NOT EXISTS (
        SELECT * 
        FROM Homework H2 
        WHERE H2.Work != 'Complete' AND H2.ID = H.ID ) 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!3/1582d/1)。

编辑——实际上，刚刚注意到你还想要那些不完整的——让我编辑。那应该这样做：

```
SELECT DISTINCT H.ID
FROM Homework H
GROUP BY H.ID
HAVING COUNT(*) = 1 OR (
  NOT EXISTS (
    SELECT * 
    FROM Homework H2 
    WHERE H2.Work != 'Complete' 
      AND H2.ID = H.ID )) 
```

还有更多小提琴：[http ://sqlfiddle.com/#!3/c7d43e/3](http://sqlfiddle.com/#!3/c7d43e/3)

祝你好运。

# regex - 如何跳转到vim中第一个未注释的语句？

> ID：14669795
> 
> 赞同：0
> 
> 时间：2013-02-03T05:33:56.443
> 
> 标签：regex, vim, ide, comments

我`/print`用来搜索我未注释的`print`语句，因为我想将它们注释掉。我知道我可以使用搜索和替换来首先删除所有注释，然后应用它们，但我只是想找到下一个未注释的打印语句，我不知道该怎么做。

例如我有：

```
 #print fooVal
        #... do stuff
        #print barF
        #... more stuff
            print gold # <-- I want to use vim to jump straight to this line 
```

我想匹配这个，所以我不必循环遍历*所有*`print`语句（甚至是注释掉的语句）只是为了找到*一个* `print`没有`#`.

我试过使用`:s/^\s+print`，`/^print`但[vim](http://www.vim.org/)不喜欢它。另外，我[在这里查看](http://www.vimregex.com/)，但找不到信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T05:43:00.403

在您的情况下，打印前没有空格。所以尝试使用'*'而不是'+'。

这对我有用：`/^\s*print`

不太方便的模式应该用 print 突出显示未注释的行：`/^[^#]*\s*print`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T19:53:47.080

在你的情况下，@Taky 的解决方案是我认为最好的，但我注意到一些关于 vim 正则表达式的评论。最近几天我研究了这个，所以也许把它写下来是个好主意。

在 vimworld 中，使用 eg`*`和`^`正`$`则表达式的特殊字符被称为“魔法”（`set magic`默认）。默认`+`不是正则表达式字符，必须用于`\+`表示“正则表达式+”。然而，只要稍加改动，它也可能是“神奇的”，请阅读：[vim 帮助 - 搜索模式](http://vimdoc.sourceforge.net/htmldoc/usr_27.html)（与 vim 编辑器中的相同，但作为 HTML，并且顶部具有良好的搜索功能）。
另见[vim 帮助 - 模式](http://vimdoc.sourceforge.net/htmldoc/pattern.html)

这是一个简短的指南（规则在列表中被否决）：
**设置：**
`:set ignorecase`在搜索和替换
`:set smartcase`中忽略大小写，只要不使用大写字母就忽略大小写（`ignorecase`必须打开才能工作）。
`:set magic`能够将某些字符用作正则表达式特殊字符，例如`*`，而不必在它们前面加上`\`. 这是默认的（我认为）。

**搜索模式中的规则**（否决设置）
`\c`忽略大小写，`\C`区分大小写
使用例如`/\cxxx`“忽略大小写”，`/\Cxxx`区分大小写（与替换语法中`\c`的标志相同。使用“魔术”（与设置相同），没有“魔术” . `i``s/xxx/yyy/i`
`\m``magic``\M`

这是**在 vim 模式****中使用的有趣部分`+`**：
`\v`被描述为“非常神奇”，我认为这就是我们在使用 regexp 时所习惯的。
`\V`“非常nomagic”，ALL是字面意思，只有`\`特殊含义。

现在，**`+`可以**像 in 一样直接使用`/\v\s+print`（但对你来说，最好`*`在那种特殊情况下使用，`+`不会找到开始该行的“插件”）。
例如，如果不使用，`{`表达式也必须有。`\``\v`

**提示：**在 .vimrc 中进行这些映射以始终`\v`在搜索模式中使用：

```
" To get 'normal' behavior for regexps (use "\V" to avoid)
nnoremap / /\v
vnoremap / /\v 
```

`\v`（而且在不需要的时候很容易“退格” ）。

# if-statement - 我需要帮助编写这个批处理脚本

> ID：14669801
> 
> 赞同：0
> 
> 时间：2013-02-03T05:34:46.257
> 
> 标签：if-statement, for-loop, batch-file, switch-statement

如果文件名以一个东西开头，我想让这个脚本执行另一个脚本，如果它以另一个东西开头，另一个脚本，如果它以其他任何东西开头，则继续执行其余代码。我希望它遍历文件夹中的所有文件并对此进行检查。我已经研究了一段时间，并且正在寻找一双新的眼睛，因为显然我似乎无法让它正常工作。任何帮助，将不胜感激！

```
 :========================================================================================
:: purpose: 1\. copy file(s) from the export dir (SOURCE_DIR) (ARCHIVE_DIR)
::          2\. copy file(s) from the export dir (SOURCE_DIR) (TARGET_DIR)
::          3\. once file(s) are processed delete them from the export dir (SOURCE_DIR)
::=======================================================================================
::      
@echo off
setlocal
:: Display the command line on the window's Title Bar
title %0 %1
set LOG_FILE="here.txt"
set SOURCE_DIR=here\there
set TARGET_DIR=here\nowHere
set ARCHIVE_DIR=here\oldStuffnThings
set FILE=FileStartingWithBlahBlergOrOther.docx

echo --------------------------------------------------------------------------------------------------------------------------------------- >> %LOG_FILE%
echo %DATE% %TIME% Starting file move >> %LOG_FILE%

if not exist "%SOURCE_DIR%%FILE%" (
  echo %DATE% %TIME% "%SOURCE_DIR%%FILE%" not found >> %LOG_FILE%
  echo %DATE% %TIME% no files to move so stopping >> %LOG_FILE%
  exit
)

FOR /R %completepath% %%G IN (FileStartingWithBLAH*) DO (
  call C:\otherScript1
)

FOR /R %completepath% %%G IN (FileStartingWithBLERG*) DO (
  call C:\otherScript2
)

:: one at a time copy files to archive, copy to dir, then delete from the export dir
FOR /R %SOURCE_DIR% %%G IN (%FILE%) DO (
echo %DATE% %TIME% %%G was found for processing >> %LOG_FILE%
XCOPY %%G "%ARCHIVE_DIR%"/Y 
echo %DATE% %TIME% %%G was archived status %ERRORLEVEL% >> %LOG_FILE% 
XCOPY %%G "%TARGET_DIR%"/Y 
echo %DATE% %TIME% %%G was copied to  dir status %ERRORLEVEL% >> %LOG_FILE%
del %%G
echo %DATE% %TIME% %%G was deleted from the export dir status %ERRORLEVEL% >> %LOG_FILE%
)

rem set err_code=%errorlevel%
rem if %err_code% NEQ 0 (
rem    echo %DATE% %TIME% **ERROR moving files %err_code% >> %LOG_FILE%
rem    exit     
rem )
rem echo %DATE% %TIME% File(s) moved successfully >> %LOG_FILE%

rem echo %DATE% %TIME% Process Complete >> %LOG_FILE% 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:04:23.390

一个问题是你必须在后面加上一个反斜杠，`SOURCE_DIR=here\there`否则它会寻找`here\thereFileStartingWithBlahBlergOrOther.docx`

# html - 使用 SSI 的 CSS 导航栏上的“选择”按钮

> ID：14669807
> 
> 赞同：2
> 
> 时间：2013-02-03T05:35:46.697
> 
> 标签：html, css, class, navbar, ssi

我在一个网站上工作，我正在使用 SSI 将横幅/菜单/页脚附加到我网站上的每个页面。我遇到的问题是在每个不同页面的菜单上显示“已选择”状态。

只是为了避免混淆，整个导航栏是一个固定高度/宽度的图像，并且位置会改变以更改按钮状态。

**到目前为止我所拥有的：**

索引.html

```
<!--#include virtual="./global_header.html" -->
<!--#include virtual="./global_footer.html" -->

    /**Yeah, that's it for index.html at the moment. Like I said, a work in progress**/ 
```

header.html

```
<!DOCTYPE...

<div class="s_container" id="s_menu">
    <ul id="navbar">
        <li id="menu_borderl"><p>[</p></li>
        <li id="menu_home"><a href="index.html" title="Home">Home</a></li>
        <li id="menu_forum"><a href="/forum/" title="Forum">Forum</a></li>
        <li id="menu_apply"><a href="apply.html" title="Apply">Apply</a></li>
        <li id="menu_about"><a href="about.html" title="About">About</a></li>
        <li id="menu_borderr"><p>]</p></li>
    </ul>
</div>... 
```

CSS：

```
ul#navbar {
    width:1000px;
    list-style:none;
    height:76px;
    margin:0px;
    padding:0px;
}

ul#navbar li {
    display:inline;
}

ul#navbar li a {
    height:76px;
    float:left;
    text-indent:-9999px;
}

ul#navbar li p {
    height:76px;
    float:left;
    text-indent:-9999px;
    margin:0px;
}

/**HOME**/
/**I have these once for each button, with the correct x,y for the bg position**/
ul#navbar li#menu_home a {
    width:205px;
    background:url(images/menu_buttons.png) no-repeat -75px 0;
}
ul#navbar  li#menu_home a:hover {
    background-position:-75px -76px; 
}
ul#navbar  li#menu_home a.current {
    background-position:-75px -152px;
} 
```

如果我添加`class="current"`到任何 li 它会按预期工作。

现在问我的问题，如果很明显很抱歉，但我对此很陌生。有什么方法可以在“index.html”中放置一些代码以将“当前”类添加到给定的行项目？感谢您的帮助，如果它非常明显，我们很抱歉。如果您需要更多信息，请告诉我。

**解决了**

由于我是新人，我无法再等几个小时回答我的问题，但这是我要发布的内容：

**编辑**

根据 leftclickbens 的建议，对 index.html 的代码进行了一些更改，以摆脱 !important

*所以我想通了。对于上面的例子，我删除了*

```
ul#navbar  li#menu_home a.current {
    background-position:-75px -152px;
} 
```

*从 CSS 文件中添加*

```
ul#navbar li#menu_home a, ul#navbar li#menu_home a:hover {
    background-position:-75px -152px;
} 
```

*进入 index.html（在 SSI 之间）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:00:44.080

如果您使用的是“静态”服务器端包含，而不是像 PHP 这样的动态服务器端语言，那么最好的办法是查看突出当前页面的 JavaScript 方法。有很多可用的插件，这取决于您使用的框架（例如 jQuery），或者如果您的要求很简单，您可以通过一些简单的正则表达式匹配来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T03:47:33.710

根据 leftclickbens 的建议，对 index.html 的代码进行了一些更改，以摆脱 !important

所以我想通了。对于上面的例子，我删除了

```
ul#navbar  li#menu_home a.current {
    background-position:-75px -152px;
} 
```

从 CSS 文件中添加

```
ul#navbar li#menu_home a, ul#navbar li#menu_home a:hover {
    background-position:-75px -152px;
} 
```

进入 index.html（在 SSI 之间）

# oracle - oracle-sql查询

> ID：14669808
> 
> 赞同：0
> 
> 时间：2013-02-03T05:36:22.273
> 
> 标签：oracle, oracle10g, oracle11g, proc

我想使用单个游标来获取单个记录或使用 where 条件的所有记录，例如：`student`是表并且`sid`是一个属性。

我有两个光标，

`DECLARE S1 CURSOR FOR SELECT * FROM Student;`

和

`Declare S2 Cursor for select * from Student where sid=11`

我的查询是关于如何结合这两个条件以仅使用一个游标。我需要这个，因为我有两个功能`m_viewStudent`，`m_viewallStudents`为此我只想使用一个光标来显示表中请求的详细信息。

那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T06:00:52.917

试试这个：

```
select * 
from student
where sid = 11 
or not exists (select 1 from student where sid = 11) 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/60b16/1)

* * *

**更新**

如果您想为不同的功能使用相同的光标，那么您可以这样做：

```
create package p is

  procedure one_sid(in_sid number);
  procedure all_sid;

end p;
/

create package body p is

  cursor c(p_sid number) is
  select * 
    from student 
   where sid = p_sid or p_sid is null;

  procedure one_sid(in_sid number) is

  begin

   open c(in_sid);

   close c;

  end;

  procedure all_sid is

  begin

   open c(null);

   close c;

  end;

end p;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T06:46:14.050

您可以将光标更改为

```
SELECT * FROM students WHERE sid like '%' || variable_from_function || '%'; 
```

这将确保当函数`m_viewStudent`调用它时，仅选取 sid（发送到此函数 variable_from_function 的值）记录。当`m_viewallStudents`调用它时，所有记录都被挑选为 variable_from_function 将为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T09:00:51.060

假设你的过程变量是`$var`，试试这个：

```
Declare S2 Cursor for select * from Student 
    where sid=$var 
        or $var is null 
```

并在需要时传入 null，或者将参数的默认值设为 null 并且不传入任何参数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T11:58:57.060

最好的方法是使用游标变量，通常称为参考游标。这基本上是一个指向结果集的指针。Ref Cursor 的优点是我们可以改变 select 语句，如下所示：

```
create or replace package student_utils is

   --  a hard-types ref cursor
   type stud_cur is ref cursor return students%rowtype;
   function get_students 
      ( p_sid in students.sid%type  := null )
      return  stud_cur;
end; 
```

请注意，我对您打算如何使用代码做出了一些假设。使用包允许我们定义一个硬类型引用游标，这意味着它只能用于与 STUDENTS 表的投影匹配的查询。（如果您没有实际的 STUDENTS 表，则可以使用视图或定义 Pl/SQL 记录。）

```
create or replace package body student_utils is

   function get_students 
      ( p_sid in students.sid%type := null )
      return  stud_cur
   is
       return_value stud_cur;
   begin
       if p_sid is null
       then
           open return_value for 
                select * from m_viewallStudents;
       else
           open return_value for 
                select * from m_viewStudent
                where sid = p_sid;
       end if;  
       return return_value;
    end;
end; 
```

这些查询是硬编码的，但我们也可以使用动态 SQL 打开 Ref Cursors，这是一种强大的技术。

阅读文档以[了解更多信息。](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/static.htm#i7106)

# copy - 如何在 gradle 中复制依赖库 JAR

> ID：14669809
> 
> 赞同：47
> 
> 时间：2013-02-03T05:36:32.937
> 
> 标签：copy, dependencies, gradle

我用这个 build.gradle 得到了一个可运行的 jar

```
apply plugin: 'java'
apply plugin: 'application'

manifest.mainAttributes("Main-Class" : "com.test.HelloWorld")

repositories {
    mavenCentral()
}

dependencies {
    compile (
        'commons-codec:commons-codec:1.6',
        'commons-logging:commons-logging:1.1.1',
        'org.apache.httpcomponents:httpclient:4.2.1',
        'org.apache.httpcomponents:httpclient:4.2.1',
        'org.apache.httpcomponents:httpcore:4.2.1',
        'org.apache.httpcomponents:httpmime:4.2.1',
        'ch.qos.logback:logback-classic:1.0.6',
        'ch.qos.logback:logback-core:1.0.6',
        'org.slf4j:slf4j-api:1.6.0',
        'junit:junit:4.+'
    )
} 
```

但它运行失败，因为找不到依赖项 jar。

然后我添加以下代码：

```
task copyToLib(type: Copy) {
    into "$buildDir/output/libs"
    from configurations.runtime
} 
```

但没有任何改变...我找不到文件夹输出/库...

如何将依赖项库 jar 复制到指定的文件夹或路径？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-10-08T06:03:44.467

Add:

```
build.dependsOn(copyToLib) 
```

When `gradle build` runs, Gradle builds tasks and whatever tasks depend on it (declared by `dependsOn`). Without setting `build.dependsOn(copyToLib)`, Gradle will not associate the copy task with the build task.

So:

```
apply plugin: 'java'
apply plugin: 'application'

manifest.mainAttributes('Main-Class': 'com.test.HelloWorld')

repositories {
    mavenCentral()
}

dependencies {
    compile (
        'commons-codec:commons-codec:1.6',
        'commons-logging:commons-logging:1.1.1',
        'org.apache.httpcomponents:httpclient:4.2.1',
        'org.apache.httpcomponents:httpclient:4.2.1',
        'org.apache.httpcomponents:httpcore:4.2.1',
        'org.apache.httpcomponents:httpmime:4.2.1',
        'ch.qos.logback:logback-classic:1.0.6',
        'ch.qos.logback:logback-core:1.0.6',
        'org.slf4j:slf4j-api:1.6.0',
        'junit:junit:4.+'
    )
}

task copyToLib(type: Copy) {
    into "${buildDir}/output/libs"
    from configurations.runtime
}

build.dependsOn(copyToLib) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-03-03T06:06:47.560

我发现应用程序插件在其输出中过于繁琐且过于冗长。这是我最终获得满意设置的方式，即在子目录中创建一个包含依赖 jar 的分发 zip 文件，`/lib`并将所有依赖`Class-Path`项添加到清单文件中的条目：

```
apply plugin: 'java'
apply plugin: 'java-library-distribution'

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.apache.commons:commons-lang3:3.3.2'
}

// Task "distZip" added by plugin "java-library-distribution":
distZip.shouldRunAfter(build)

jar {
    // Keep jar clean:
    exclude 'META-INF/*.SF', 'META-INF/*.DSA', 'META-INF/*.RSA', 'META-INF/*.MF'

    manifest {
        attributes 'Main-Class': 'com.somepackage.MainClass',
                   'Class-Path': configurations.runtime.files.collect { "lib/$it.name" }.join(' ')
    }
    // How-to add class path:
    //     http://stackoverflow.com/questions/22659463/add-classpath-in-manifest-using-gradle
    //     https://gist.github.com/simon04/6865179
} 
```

[在这里](https://gist.github.com/MartinanderssonDotcom/c63675ce87947da1ef4a)作为要点托管。

结果可以在 中找到，`build/distributions`解压后的内容如下所示：

> lib/commons-lang3-3.3.2.jar
> MyJarFile.jar

内容`MyJarFile.jar#META-INF/MANIFEST.mf`：

> 清单版本：1.0
> 主类：com.somepackage.MainClass
> 类路径：lib/commons-lang3-3.3.2.jar

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-11-15T18:42:15.077

从 Gradle 6.0 开始，它是：

```
tasks {
    val deps by registering(Copy::class) {
        from(configurations.runtimeClasspath)
        into("build/deps")
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T20:04:16.863

应用程序插件要求您像这样设置主类名称：

```
mainClassName = "com.test.HelloWorld" 
```

您需要将其添加到您的构建脚本中。请记住，如果您尝试使用该`java`命令运行您的应用程序，您还需要使用`-cp`.

应用程序插件通过提供任务[distZip](http://gradle.org/docs/current/userguide/userguide_single.html#N13F72)简化了这个过程。如果您运行该任务，则会在`build/distributions`. 该发行版包含启动脚本和所有依赖项。生成的启动脚本已经为您设置了类路径，因此您不必再处理它了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-13T11:25:45.183

该`java`插件可以打包一个带有依赖项的jar，并且不需要该`application`插件。像下面这样的任务会做：

```
task buildWithDeps(type: Jar) {
    manifest {
        attributes "Main-Class": "com.test.HelloWorld"
    }
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-06T17:52:04.960

所有先前答案的问题在于它们仅从一个配置中收集依赖项。要获取所有依赖项，您应该使用以下命令：

```
task saveDependencies(type: Copy){
    configurations.each {
        if (it.isCanBeResolved())
            from it into "gradle_dependencies"
    }
    from buildscript.configurations.classpath into "gradle_dependencies"
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-15T14:53:28.620

至少从 Gradle 5.6.4 开始，您会想要做一些更接近此的事情。

```
dependencies {
    implementation 'my.group1:my-module1:0.0.1'
    implementation 'my.group2:my-module2:0.0.1'
}

jar {
    from {
        configurations.compileClasspath.filter { it.exists() }.collect { it.isDirectory() ? it : zipTree(it) }
    }
} 
```

# objective-c - 将汉字保存到 SQLite 数据库

> ID：14669810
> 
> 赞同：0
> 
> 时间：2013-02-03T05:36:44.870
> 
> 标签：objective-c, sqlite, ios5, utf-8, localization

我在将中文字符保存到我的应用程序后面运行的 SQLite 数据库中时遇到了一些问题。

我在保存变量之前记录了它们，它们很好，但在数据库中它们看起来像 -> `â°ÂªÃ±â°â«â«`，所以它绝对是一个保存问题。我在保存时也将文本转换为 UTF8String。`[variable UTF8String]`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T11:19:35.820

面临同样的问题。使用 adLongVarWChar 作为 SQLite 中列的数据类型。它肯定会保存和检索您的中文字符或任何其他语言字符。

# android - NoClassDefFoundError: com.google.api.client.http.apache.ApacheHttpTransport();

> ID：14669811
> 
> 赞同：0
> 
> 时间：2013-02-03T05:37:06.960
> 
> 标签：android, apache, api, http, noclassdeffounderror

我正在 Eclipse 中创建一个 Android 应用程序，并且我不断收到

```
NoClassDefFoundError: com.google.api.client.http.apache.ApacheHttpTransport(); 
```

我之前已经查看了有关此问题的所有 Stackoverflow 答案，但我似乎仍然无法修复它。

以下是我所做的事情：
* 已下载`google-http-java-client-1.12.0-beta`
* 将`libs`文件夹（包含所有 jar 和属性文件）添加到我的项目中
* 将文件`dependencies`夹中的文件添加到文件`libs`夹
* 右键单击​​我的项目 > 属性 > java 构建路径> 添加 jars > 添加来自`libs`
* Clean and build project的所有 .jar 文件

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T05:52:55.000

导入库也很重要导入顺序。[阅读我的文章](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/)中的“文章扩展”以了解库的导入顺序。

# ruby-on-rails - Ruby on Rails 错误，Ruby 未安装但已安装

> ID：14669812
> 
> 赞同：0
> 
> 时间：2013-02-03T05:37:12.073
> 
> 标签：ruby-on-rails, ruby, macos

我已经关注了这个[线程](https://stackoverflow.com/questions/14662569/installing-ruby-on-mac-os-x-10-8-2)并关注了 Linuxios 的回答，一切正常，但后来我得到了

```
-bash: export: `[[': not a valid identifier
-bash: export: `-s': not a valid identifier
-bash: export: `/Users/duaneadam/.rvm/scripts/rvm': not a valid identifier
-bash: export: `]]': not a valid identifier 
```

所以，我通过终端从 .bash__profile 中删除。

```
export PATH=$PATH:/usr/local/git/bin/ [[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function 
```

..认为代码行是问题，但之后我得到的更糟。由于某些原因.. Ruby 没有安装.. 再次。因此，我重新添加了代码行并尝试重新启动/重新启动我的 Mac，但问题仍然存在。截图：

.bash_profile： ![.bash_profile](../Images/ac838b3f0a47da91abc9d5cf26506c58.png) 解决方案好吗？我什至尝试使用他的方法重新安装。天哪，这很难，也许 Ruby on Rails 不只是适合我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T05:48:48.127

使用 rvm 设置 ruby​​ 有时会变得相当复杂。在使用像 rvm 这样的包管理器时，永远不要使用 sudo 的一些黄金法则。

尝试以下操作：

*   `rvm implode`（这基本上完全删除了 rvm 安装。）
*   从 ~/.bash_profile 和 ~/.bashrc 中删除所有对 rvm 的引用
*   `which ruby`（输出应该类似于 /usr/bin，也`ruby --version`应该是 1.8.7，默认与 OS X 捆绑在一起。）
*   在单用户模式下再次安装 rvm。
*   安装您选择的 ruby​​ 版本。
*   确保在 ruby​​ 程序所在的位置创建 .rvmrc 文件。（.rvmrc -> 的典型内容`rvm use ruby-version@gemset-name --create`；例如`rvm use 1.9.3@my-awesome-project --create`：）
*   cd 进入带有 .rvmrc 的目录
*   确保加载了正确的 gemset`rvm gemset list`

还要确保 rvm 作为函数加载。`type rvm | head -1`（您可以通过在控制台中输入来验证这一点。）

还有一些对我有帮助的观点来自[http://jfire.io/blog/2012/03/02/xcode-4-dot-3-homebrew-and-ruby/](http://jfire.io/blog/2012/03/02/xcode-4-dot-3-homebrew-and-ruby/)：

*   安装 apple-gcc42、autoconf 和 automake（使用像 homebrew 这样的包管理器会很有用。）
*   还`rvm requirements`告诉您需要安装哪些其他工具。

干杯!

# hibernate - Grails GORM 服务类测试 withNewSession()

> ID：14669814
> 
> 赞同：2
> 
> 时间：2013-02-03T05:37:25.277
> 
> 标签：hibernate, grails, grails-orm, integration-testing

我正在尝试更新我的测试，因为我对我的服务类进行了更改。在我添加的服务方法中（“withNewSession”）

```
Domain.withNewSession {
  .. ...
  domain.save()
} 
```

由于我使用的是“withNewSession”，因此在我的测试类中模拟了这个域，因此我得到了方法丢失异常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T15:56:10.950

单元测试不允许使用 withNewSession 方法。在您的测试类中使用：

```
@org.junit.Before
void before() {
    DomainClazz.metaClass.static.withNewSession = {Closure c -> c.call() }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T06:04:47.613

*您应该使用集成*测试而不是单元测试来测试持久性。仅在测试依赖于域类的控制器或其他类但域类不是被测类时才使用域类模拟。

# python - 谷歌应用引擎适合我吗（托管一些使用 python 创建的快速更新的文本文件）

> ID：14669819
> 
> 赞同：0
> 
> 时间：2013-02-03T05:38:10.283
> 
> 标签：python, google-app-engine

我有一个 python 脚本，它创建了一些文本文件，然后将它们上传到我当前的网络主机。这是每 5 分钟完成一次。文本文件用于每 5 分钟获取最新版本的软件程序中。现在我让它在我的网络主机上运行，​​但我想转移到 GAE 以提高可靠性。（也因为我当前的网络主机不允许只托管普通文件，根据他们的 TOS。）

谷歌应用引擎适合我吗？我对 python 有一些经验，但与网络技术无关。我浏览了基本的 hello world 教程，对于一个网站来说这似乎很简单，但我不知道我将如何实现我的项目。我还担心任何可能导致最新文件在谷歌服务器上传播速度不够快的缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:32:31.687

是和不是。

Appengine 在可靠性、服务器速度、功能等方面都很棒。但是，它有两个主要缺点：您处于沙盒环境中（没有文件系统访问权限，必须使用数据存储），并且您按实例小时付费。通常，如果您只是托管一个偶尔访问的小型服务器，您可以获得免费托管；如果您每天都在运行一项 cron 作业，那么您必须始终使用至少一个实例，从而花费您的金钱。

您对谷歌服务器上的速度和传播的担忧是没有实际意义的；他们有一个全球时间服务器通过他们的数据中心脉动确保您的操作是原子的；如果你请求一致性=STRONG的数据，只要你的get在put之后开始，你就会看到更新的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T16:26:07.740

如果您的文本文件总是小于 1 兆，并且您不打算扩展到大量用户，那么设置一个系统将您的文本文件作为 TextProperty 发布到实体中将非常容易。如果您是 GAE 的新手，那么运行它可能需要不到 1 小时。我这样做是为了加快我的 HTML 工作的测试速度（比部署静态文件快一英里）。以下是一些非常简单的代码摘录作为示例。（如果我在修改它以简化/匿名化时搞砸了，我深表歉意。） HTH -stevep

```
#client side python...

import time
import urllib
import httplib

def processUpdate(filename):
    f = open(filename, 'rb')
    parts = filename.split('/')
    name = parts[len(parts)-1]
    print name
    html = f.read()
    f.close()
    htmlToLoad = urllib.quote(html)
    params = urllib.urlencode({'key':'your_arbitrary_password_here(or use admin account)',
                                'name':name,
                                'htmlToLoad':htmlToLoad,
                                })
    headers = {'Content-type': 'application/x-www-form-urlencoded', 'Accept': 'text/plain'}
    #conn = httplib.HTTPConnection('your_localhost_here')
    conn = httplib.HTTPConnection('your_app_id_here')
    conn.request('POST', '/your_on-line_handler_url_stub_here', params, headers)
    response = conn.getresponse()
    print '%s, %s, %s' % (filename, response.status, response.reason)

def main():
    startTime = time.time()
    print '----------Start Process----------\n'
    processUpdate('your_full_file01_path_here')
    processUpdate('your_full_file02_path_here')
    processUpdate('your_full_file03_path_here')
    print '\n----------End Process----------', time.time() - startTime

if __name__ == '__main__':
    main()

# GAE Kind
class Html_Source(db.Model):
    html = db.TextProperty(required=True, indexed=False)
    dateM = db.DateTimeProperty(required=True, indexed=False, auto_now=True)
    v = db.IntegerProperty(required=False, indexed=False, default=1)

#GAE handler classes

EVENTUAL = db.create_config(read_policy=db.EVENTUAL_CONSISTENCY)

class load_test(webapp2.RequestHandler):
    def post(self):
        self.response.clear()
        if (self.request.get('key') != 'your_arbitrary_password_here(or use admin account)'):
            logging.info("----------------------------------bad key")
            return
        name = self.request.get('name')
        rec = Html_Source(
                    key_name = name,
                    html = urllib.unquote(self.request.get('htmlToLoad')),
                    )
        rec.put()
        self.response.out.write('OK=' + name)

class get_test(webapp2.RequestHandler):
    def get(self):
        urlList = self.request.url.split('/')
        name = urlList[len(urlList) - 1]
        extension = name.split('.')
        type = '' if len(extension) < 2 else extension[1]
        typeM = None
        if type == 'js': typeM = 'application/javascript'
        if type == 'css': typeM = 'text/css'
        if type == 'html': typeM = 'text/html'
        self.response.out.clear()
        if typeM: self.response.headers["Content-Type"] = typeM
        logging.info('%s-----name, %s-----typeM' % (name, typeM))
        htmlRec = Html_Source.get_by_key_name(name, config=EVENTUAL)
        if htmlRec is None:
            self.response.out.write('<p>invalid:%s</p>' % (name))
            return
        self.response.out.write(htmlRec.html) 
```

# java - 如何将 String 数组转换为 Byte 数组？（爪哇）

> ID：14669820
> 
> 赞同：13
> 
> 时间：2013-02-03T05:38:19.623
> 
> 标签：java, bytearray, converter, bytebuffer, arrays

我有一个要转换为一维字节数组的一维字符串数组。我该怎么做呢？这需要 ByteBuffer 吗？我怎样才能做到这一点？（字符串可以是任意长度，只是想知道如何进行这样的操作。在将其转换为字节数组之后，我如何将其转换回字符串数组？

-担

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-03T05:43:06.683

**数组到数组**，您应该**手动**将其解析为双方，但如果您只有一个字符串，您可以`String.getBytes()`和`new String(byte[] data)`; 像这样

```
public static void main(String[] args) {
    String[] strings = new String[]{"first", "second"};
    System.out.println(Arrays.toString(strings));
    byte[][] byteStrings = convertToBytes(strings);
    strings = convertToStrings(byteStrings);
    System.out.println(Arrays.toString(strings));

}

private static String[] convertToStrings(byte[][] byteStrings) {
    String[] data = new String[byteStrings.length];
    for (int i = 0; i < byteStrings.length; i++) {
        data[i] = new String(byteStrings[i], Charset.defaultCharset());

    }
    return data;
}

private static byte[][] convertToBytes(String[] strings) {
    byte[][] data = new byte[strings.length][];
    for (int i = 0; i < strings.length; i++) {
        String string = strings[i];
        data[i] = string.getBytes(Charset.defaultCharset()); // you can chose charset
    }
    return data;
} 
```

* * *

对于 string[] 中的一个字节[]，您必须：

*   使用一些分隔符从每个字符串到 byteArray 连接字节数组
*   从 bytearray 按相同的分隔符拆分并创建字符串，如上所述。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T06:04:10.020

您没有说要对字节做什么（除了将它们转换回`String[]`之后），而是假设您可以将它们视为不透明的数据包（因此您可以将它们保存到文件中或将它们发送过来网络之类的，但你不需要以任何方式检查或修改它们），我认为你最好的选择是使用序列化。要序列化您的字符串数组，您可以编写如下内容：

```
final String[] stringArray = { "foo", "bar", "baz" };

final ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
final ObjectOutputStream objectOutputStream =
    new ObjectOutputStream(byteArrayOutputStream);
objectOutputStream.writeObject(stringArray);
objectOutputStream.flush();
objectOutputStream.close();

final byte[] byteArray = byteArrayOutputStream.toByteArray(); 
```

并在之后恢复它，你会写相反的：

```
final ByteArrayInputStream byteArrayInputStream =
    new ByteArrayInputStream(byteArray);
final ObjectInputStream objectInputStream =
    new ObjectInputStream(byteArrayInputStream);

final String[] stringArray2 = (String[]) objectInputStream.readObject();

objectInputStream.close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-31T20:36:06.133

你可以检查这个

```
package javaapplication2;

import java.util.Arrays;

/**
 *
 * @author Ali
 */
public class JavaApplication2 {

 public static byte[] to_byte(String[] strs) {
        byte[] bytes=new byte[strs.length];
        for (int i=0; i<strs.length; i++) {
            bytes[i]=Byte.parseByte(strs[i]);
        }
        return bytes;
    }

    public static void main(String[] args) {
        String[] input = {"1","2","3"};       //original data
        byte[] byteArray = to_byte(input);//data to byte array
        String[] recovered=Arrays.toString( byteArray).split(",");// recovered data 

    }    
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-31T16:13:20.953

*首先*像我在这里声明的那样声明字符串`str="Suresh"`
*第二次*使用`getBytes()`以字节为单位将其转换
*getBytes*返回字节数组。

```
String str="Suresh";
byte[] s=str.getBytes(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T06:33:57.093

我会将其视为序列化问题，并按如下方式实现（完整且有效的 Java 代码）：

```
import java.nio.ByteBuffer;
import java.util.ArrayList;

public class Serialization {
    public static byte[] serialize(String[] strs) {
        ArrayList<Byte> byteList = new ArrayList<Byte>();
        for (String str: strs) {
            int len = str.getBytes().length;
            ByteBuffer bb = ByteBuffer.allocate(4);
            bb.putInt(len);
            byte[] lenArray = bb.array();
            for (byte b: lenArray) {
                byteList.add(b);
            }
            byte[] strArray = str.getBytes();
            for (byte b: strArray) {
                byteList.add(b);
            }
        }
        byte[] result = new byte[byteList.size()];
        for (int i=0; i<byteList.size(); i++) {
            result[i] = byteList.get(i);
        }
        return result;
    }

    public static String[] unserialize(byte[] bytes) {
        ArrayList<String> strList = new ArrayList<String>();
        for (int i=0; i< bytes.length;) {
            byte[] lenArray = new byte[4];
            for (int j=i; j<i+4; j++) {
                lenArray[j-i] = bytes[j];
            }
            ByteBuffer wrapped = ByteBuffer.wrap(lenArray);
            int len = wrapped.getInt();
            byte[] strArray = new byte[len];
            for (int k=i+4; k<i+4+len; k++) {
                strArray[k-i-4] = bytes[k];
            }
            strList.add(new String(strArray));
            i += 4+len;
        }
        return strList.toArray(new String[strList.size()]);
    }

    public static void main(String[] args) {
        String[] input = {"This is","a serialization problem;","string concatenation will do as well","in some cases."};
        byte[] byteArray = serialize(input);
        String[] output = unserialize(byteArray);
        for (String str: output) {
            System.out.println(str);
        }
    }
} 
```

这个想法是，在生成的字节数组中，我们存储第一个字符串的长度（如果我们使用 type ，则始终为 4 个字节`int`），然后是第一个字符串的字节（稍后可以从前面的 4 个字节中读取其长度） )，然后是第二个字符串的长度和第二个字符串的字节数，以此类推。这样，字符串数组可以很容易地从生成的字节数组中恢复，如上面的代码所示。而且这种序列化方法可以处理任何情况。

如果我们对输入字符串数组做一个假设，代码会简单得多：

```
public class Concatenation {
    public static byte[] concatenate(String[] strs) {
        StringBuilder sb = new StringBuilder();
        for (int i=0; i<strs.length; i++) {
            sb.append(strs[i]);
            if (i != strs.length-1) {
                sb.append("*.*"); //concatenate by this splitter
            }
        }
        return sb.toString().getBytes();
    }

    public static String[] split(byte[] bytes) {
        String entire = new String(bytes);
        return entire.split("\\*\\.\\*");
    }

    public static void main(String[] args) {
        String[] input = {"This is","a serialization problem;","string concatenation will do as well","in some cases."};
        byte[] byteArray = concatenate(input);
        String[] output = split(byteArray);
        for (String str: output) {
            System.out.println(str);
        }
    }
} 
```

假设是`*.*`输入数组中的任何字符串都不存在。换句话说，如果您事先知道某些特殊的符号序列不会出现在输入数组的任何字符串中，您可以使用该序列作为拆分器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-03T05:42:01.870

`String.getBytes()`? 就是你要找的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-03T05:43:09.580

您可以迭代每个字符串并继续附加到最终的字节数组。

```
String example = "This is an example";
//Convert String to byte[] using .getBytes() function
byte[] bytes = example.getBytes();
//Convert byte[] to String using new String(byte[])      
String s = new String(bytes); 
```

# python - Python：urlretrieve PDF下载

> ID：14669827
> 
> 赞同：3
> 
> 时间：2013-02-03T05:40:40.633
> 
> 标签：python, pdf, urllib2, urllib

我在 Python 中使用 urllib 的 urlretrieve() 函数来尝试从网站上获取一些 pdf。它（至少对我而言）已停止工作并正在下载损坏的数据（15 KB 而不是 164 KB）。

我已经用几个 pdf 对此进行了测试，但都没有成功（即[random.pdf](http://www.mathworks.com/moler/random.pdf/)）。我似乎无法让它工作，我需要能够为我正在从事的项目下载 pdf 文件。

这是我用来下载 pdf 的代码类型的示例（并使用[pdftotext.exe](http://www.foolabs.com/xpdf/download.html/)解析文本）：

```
def get_html(url): # gets html of page from Internet
    import os
    import urllib2
    import urllib
    from subprocess import call
    f_name = url.split('/')[-2] # get file name (url must end with '/')
    try:
        if f_name.split('.')[-1] == 'pdf': # file type
            urllib.urlretrieve(url, os.getcwd() + '\\' + f_name)
            call([os.getcwd() + '\\pdftotext.exe', os.getcwd() + '\\' + f_name]) # use xpdf to output .txt file
            return open(os.getcwd() + '\\' + f_name.split('.')[0] + '.txt').read()
        else:
            return urllib2.urlopen(url).read()
    except:
        print 'bad link: ' + url    
        return "" 
```

我是一个新手程序员，所以任何输入都会很棒！谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T05:54:32.327

我建议尝试[requests](http://docs.python-requests.org/en/latest/)。这是一个非常好的库，它隐藏了一个简单的 api 后面的所有实现。

```
>>> import requests
>>> req = requests.get("http://www.mathworks.com/moler/random.pdf")
>>> len(req.content)
167633
>>> req.headers
{'content-length': '167633', 'accept-ranges': 'bytes', 'server': 'Apache/2.2.3 (Red Hat) mod_jk/1.2.31 PHP/5.3.13 Phusion_Passenger/3.0.9 mod_perl/2.0.4 Perl/v5.8.8', 'last-modified': 'Fri, 15 Feb 2008 17:11:12 GMT', 'connection': 'keep-alive', 'etag': '"30863b-28ed1-446357e3d4c00"', 'date': 'Sun, 03 Feb 2013 05:53:21 GMT', 'content-type': 'application/pdf'} 
```

顺便说一句，您只能下载 15kb 的原因是您的 url 错误。它应该是

```
http://www.mathworks.com/moler/random.pdf 
```

但你得到了

```
http://www.mathworks.com/moler/random.pdf/

>>> import requests
>>> c = requests.get("http://www.mathworks.com/moler/random.pdf/")
>>> len(c.content)
14390 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-27T19:08:45.513

将文件写入光盘：

```
myfile = open("out.pdf", "w")
myfile.write(req.content) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-30T10:21:19.403

也许它有点晚了，但你可以试试这个：只需将内容写入一个新文件并使用 textract 读取它，因为这样做没有给我包含'#$'的不需要的文本。

```
import requests
import textract
url = "The url which downloads the file"
response = requests.get(url)
with open('./document.pdf', 'wb') as fw:
    fw.write(response.content)
text = textract.process("./document.pdf")
print('Result: ', text) 
```

# php - 数组中的 PHP 数组

> ID：14669831
> 
> 赞同：0
> 
> 时间：2013-02-03T05:41:47.020
> 
> 标签：php, arrays

```
 $row[];  // Declare array. PRETEND ITS AN ARRAY
  $row2[]; // Declare another
  $row3[]; // Declare one more

  $rowarray[];

  $rowarray[0] = $row
  $rowarray[1] = $row2
  $rowarray[2] = $row3 // Store array in an array 
```

我的问题： 1\. 这有效甚至有用吗？2\. 如果我这样做，我如何访问 $row[0] $row[1] 等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T05:45:38.090

1.  这个概念是有效的，但语法不是——数组没有像 PHP 中那样显式声明。初始化它的正确方法是：

    ```
    $row1 = array(1, 2, 3);
    $row2 = array(4, 5, 6);
    $row3 = array(7, 8, 9);
    $rowarray = array($row1, $row2, $row3); 
    ```

    或者，等效且更简洁：

    ```
    $rowarray = array(
        array(1, 2, 3),
        array(4, 5, 6),
        array(7, 8, 9)
    ); 
    ```

2.  `$rowarray[1][2]`. 索引是按顺序排列的，因此，鉴于我使用的示例数据，这将是 6（数组的元素 2，即 的元素 1 `$rowarray`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T05:46:39.623

您正在寻找的是一个多维数组。

例如：

```
$a1 = array(
   array(1, 2, 3, 4),
   array(1, 2, 3, 4)
); 
```

# sql - Access 2010 中的参数化存储过程

> ID：14669838
> 
> 赞同：2
> 
> 时间：2013-02-03T05:43:17.313
> 
> 标签：sql, sql-server, ms-access

我有一个在 SQL Server 上运行的数据库，我在 Access 2003 中创建了一些表单。一些表单调用存储过程和函数，它们会提示您输入所需的参数。Access 2003 会自动弹出一个框，询问我的参数，然后返回结果或插入数据。Access 2010 不会提示我输入参数，它只是给我一个错误，说缺少必需的参数或其他东西。我听说人们说我需要创建一个直通查询。我试过了，但如果不对参数进行硬编码，就什么都做不了。

为什么 Access 2003 提示输入参数而 Access 2010 不提示？我需要重写这些程序和函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:38:58.140

试着用你的方式解决这个问题。

[http://office.microsoft.com/en-us/access-help/use-a-parameter-to-make-a-query-ask-for-input-HA010341833.aspx](http://office.microsoft.com/en-us/access-help/use-a-parameter-to-make-a-query-ask-for-input-HA010341833.aspx)

# javascript - 为什么上传的图片文件不显示？

> ID：14669841
> 
> 赞同：1
> 
> 时间：2013-02-03T05:43:32.183
> 
> 标签：javascript, html, image, upload

我正在做一个项目，该项目要求我在上传图像时显示图像，并且我尝试了几种解决方案均无济于事（请参阅：[选项 1](http://www.html5rocks.com/en/tutorials/file/dndfiles/)，[选项 2](https://stackoverflow.com/questions/4459379/preview-an-image-before-it-is-uploaded?answertab=oldest#tab-top)）。在每种情况下，我都可以让解决方案在一组独立的测试 HTML/CSS/JavaScript 文件中工作，但它不能集成到项目中。我已经多次重写了主项目的 HTML 和 Javascript，但问题仍然存在。我还可以尝试什么，或者我可以在哪里寻找来解决这个困难？

编辑：澄清一下——第[一个选项](http://www.html5rocks.com/en/tutorials/file/dndfiles/)是一个可行的解决方案。我可以在一个独立的 HTML 文件中运行它，它会上传和显示图像。然而，每当我尝试在另一个项目中使用此解决方案时，上传似乎是成功的，但没有出现缩略图。即使粘贴了上述解决方案的确切文本也是如此，这是我在使用其他解决方案时遇到的问题。我正在寻求一般的故障排除建议——我可以做些什么来了解哪里出了问题

编辑：现在我看到 Firefox（版本 18.0.1）中存在该功能（即图像正确显示），但图像在 Safari（版本 6.0.2）中根本不出现。那么，我修改后的问题是，**为什么它们不会在 Safari 中显示？**

# php - 在 PHP 中的 2 位数字之间放置空格？

> ID：14669843
> 
> 赞同：0
> 
> 时间：2013-02-03T05:44:49.030
> 
> 标签：php, string

我要么从我的数据库中获取一位数或两位数，如 52、8、4、99 等。我现在要做的是显示数字，如果数字是两位数，如“5 2” ”。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T05:49:00.233

我相信这会做你想要的：

```
echo join(' ', str_split($number)); 
```

# c# - 朝它所面对的方向移动相机

> ID：14669844
> 
> 赞同：1
> 
> 时间：2013-02-03T05:45:14.007
> 
> 标签：c#, xna, camera, rotation, frame-rate

我已经按照 Microsoft 网站上有关如何在 XNA 中的 3D 世界中使第一人称相机旋转和移动的教程进行了操作。但是当我沿着它的 Y 轴旋转相机时，它不会移动它旋转/面对的方向，而是像面对它最初面对的方向一样移动。

**这是我的代码：**

```
static Vector3 avatarPosition = new Vector3(0, 0, 0);
static Vector3 cameraPosition = avatarPosition;
Vector3 cameraReference = new Vector3(10, 0, 0);
// Create a vector pointing the direction the camera is facing.
Matrix world = Matrix.CreateWorld(new Vector3(0, -1, 0), Vector3.Forward, Vector3.Up);
Matrix rotationMatrix = Matrix.CreateRotationY(MathHelper.ToRadians(0));
int Rot = 0;
Vector3 worldVector = new Vector3(5,-2, 0);
Matrix view, proj;
Vector3 cameraLookat;
Update()
{
    world = Matrix.CreateWorld(worldVector, Vector3.Forward, Vector3.Up);
    if (IsKeyDown(Keys.W))
        avatarPosition += new Vector3(0.2f, 0f, 0);
    if (IsKeyDown(Keys.S))
        avatarPosition += new Vector3(-0.2f, 0f, 0);
    if (IsKeyDown(Keys.A))
        avatarPosition += new Vector3(0f, 0f, -0.2f);
    if (IsKeyDown(Keys.D))
        avatarPosition += new Vector3(0f, 0f, 0.2f);

    if (IsKeyDown(Keys.Left))
        Rot += 1;
    if (IsKeyDown(Keys.Right))
        Rot += -1;

    rotationMatrix = Matrix.CreateRotationY(MathHelper.ToRadians(Rot));
    // Create a vector pointing the direction the camera is facing.
    Vector3 transformedReference = Vector3.Transform(cameraReference, rotationMatrix);
    // Calculate the position the camera is looking at.
    cameraLookat = transformedReference + cameraPosition;
    // Set up the view matrix and projection matrix.
    view = Matrix.CreateLookAt(cameraPosition, cameraLookat, new Vector3(0.0f, 1.0f, 0.0f));

    proj = Matrix.CreatePerspectiveFieldOfView(MathHelper.ToRadians(45), graphics.GraphicsDevice.Viewport.AspectRatio,
                                          0.1f, 1000);
    cameraPosition = avatarPosition;
 } 
```

有人可以告诉我为什么相机不按照旋转的方式行进吗？或者有人可以给我该死的代码来制作一个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T07:23:22.213

我看来您遇到的问题来自代码的这个区域：

```
if (IsKeyDown(Keys.W))
    avatarPosition += new Vector3(0.2f, 0f, 0);
if (IsKeyDown(Keys.S))
    avatarPosition += new Vector3(-0.2f, 0f, 0);
if (IsKeyDown(Keys.A))
    avatarPosition += new Vector3(0f, 0f, -0.2f);
if (IsKeyDown(Keys.D))
    avatarPosition += new Vector3(0f, 0f, 0.2f); 
```

而不是直接沿 x 或 z 轴平移 avatarPosition，它应该使用您指向的方向，这似乎是您的 translateReference 变量。

例如，要向前移动相机的朝向：

```
if (IsKeyDown(Keys.W))
    avatarPosition += transformedReference; 
```

但是，由于transformedReference 变量似乎已标准化，它可能无法将化身移动到您希望的距离。在这种情况下，只需将其乘以某个常量 MOVEMENT_SPEED 即可：

```
if (IsKeyDown(Keys.W))
    avatarPosition += transformedReference * MOVEMENT_SPEED; 
```

# java - 如何使用快捷方式像运行典型程序一样运行 java 应用程序？

> ID：14669850
> 
> 赞同：0
> 
> 时间：2013-02-03T05:46:24.993
> 
> 标签：java, jar

我目前正在使用 IDE 编写 Java 应用程序并对其进行测试。在 IDE 中，我可以运行应用程序并查看它是如何工作的。但是，我将如何使用快捷方式或 jar 文件运行应用程序？例如，为了运行我的 WAMP 服务器，我运行 WAMP 目录中的 wamp.exe 文件。所以，我正在运行一个启动整个程序的文件。如何使用 java 应用程序实现这种功能？我听说过使用 jar 文件，但我不确定这是否是正确的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T05:48:53.987

这取决于您使用的 IDE。以 eclipse 为例，您打开文件选项卡，选择导出，在树中打开 java，然后选择可运行的 jar 文件。然后填写界面，一切顺利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T05:50:13.087

如果您使用的是 Eclipse，那么您可以将您的应用程序导出为单个 jar 文件并通过双击直接运行它

在包资源管理器视图中：

1.  右键单击您的项目
2.  转到“导出”
3.  单击“导出为可运行 Jar”

你完成了

如果您使用的是 Netbeans，请按照以下步骤操作：

1.  右键单击您的项目
2.  点击“清理并构建”
3.  现在得到了创建 netbeans 项目的目录（通常应该是“C:\Users\your_user_name\Documents\NetBeansProjects”
4.  打开你的项目的目录（以你的项目名称命名的目录）
5.  打开“dist”文件夹，你会在那里找到你的应用程序/项目的 jar 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T06:18:20.730

[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)是为桌面应用程序添加快捷方式的最简单方法。

> Java Web Start (JWS) 是 Oracle Corporation 的技术，用于直接从网络或 Internet 链接启动富客户端（Swing、AWT、SWT）桌面应用程序。它为支持 Java 的平台提供“一键式”安装。
> 
> JWS 提供了许多吸引人的功能，包括但不限于启动屏幕、**桌面集成、**文件关联、自动更新（包括延迟下载和更新的编程控制）、按平台、架构或 Java 版本、配置划分本地和其他资源下载运行时环境（最低 J2SE 版本、运行时选项、RAM 等），使用扩展轻松管理公共资源。

### 也可以看看

[这个答案](https://stackoverflow.com/a/11323662/418556)- 右侧“JotPad”和“Star Zoom Animation”的2个图标是JWS安装的图标。

![](../Images/3c59a7150ccbe64641b45391650d1e08.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T05:54:54.157

为了好玩，您还可以在 C++ 中创建一个启动器来启动您的可执行文件（Limewire 的方式）。下面给出一个简单的控制台模式 C 程序。

```
#include <stdlib.h>

int main(int argc, char *argv[]) {
    system("java YourProgramClassFileNameHere");
    return 0;
} 
```

您的平台需要`CreateProcess()`在 win32API 或 JNI 中使用高级方法。

您可以将其转换为可执行的 Jar 文件（参见 Abu 的回答）

您还可以创建一个可以运行您的程序的 bat 文件：（仅限 Windows）

```
@echo off
start java YourProgramClassFileNameHere 
```

或者一个shell脚本（BASH）

另外，请参阅此处[从 c++ 代码运行可执行 jar](https://stackoverflow.com/questions/7844884/run-a-executable-jar-from-c-code)

# asp.net - 如何在 ListView 控件中修改此列的区域/大小？

> ID：14669861
> 
> 赞同：3
> 
> 时间：2013-02-03T05:49:16.473
> 
> 标签：asp.net, listview, styles

我是一名新的 ASP.NET 开发人员，我在 ListView 的样式方面遇到了一个奇怪的问题。样式运行良好，但现在我看不到右侧的最后一列，我不知道为什么，如此快照所示：

![在此处输入图像描述](../Images/8b35485aed8aa9f0fb09c5eac734239f.png)

这是我的原始代码：

```
<asp:ListView ID="All_ListView" runat="server"  DataKeyNames="ID" DataSourceID="SqlDataSource1">
                        <LayoutTemplate>
                            <div ><table id="thetable" cellpadding="4px" cellspacing="1px" style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px; font-weight:bold;">
                                <thead>
                                    <tr style="background-color:#C6D7B5;">
                                        <%--<th style="border-right:2px solid white;border-bottom:2px solid #003366; ">LL No.</th>--%>
                                        <th style="border-bottom:2px solid #003366; ">
                                            <asp:CheckBox ID="CheckBox1" runat="server" CssClass="chkBoxPosition" OnCheckedChanged="CheckBoxHeader_All" AutoPostBack="true" />
                                        </th>    
                                        <th style="border-bottom:2px solid #003366; ">Title</th>
                                        <th style="border-bottom:2px solid #003366; ">Description</th>
                                        <th style="border-bottom:2px solid #003366; ">Type</th>
                                        <th style="border-bottom:2px solid #003366; ">Username</th>
                                        <th style="border-bottom:2px solid #003366; ">Name</th>
                                        <th style="border-bottom:2px solid #003366; ">Division</th>
                                        <th style="border-bottom:2px solid #003366; ">Submitted Date</th>
                                        <th style="border-bottom:2px solid #003366; ">Status</th>
                                    </tr>
                                </thead>
                                <tbody><tr id="itemPlaceholder" runat="server"></tr></tbody>
                            </table></div>
                        </LayoutTemplate>
                        <ItemTemplate>
                            <tr>
                                <td>
                                    <asp:CheckBox ID="CheckBox2" runat="server" />
                                    </td>
                                <td>
                                    <asp:Label runat="server" ID="lblTitle" Text='<%#Eval("Title") %>'></asp:Label>
                                    </td>
                                <td>
                                    <asp:Label runat="server" ID="lblDescription" Text='<%#Eval("Description")%>'></asp:Label>
                                </td>
                                <td>
                                    <asp:Label runat="server" ID="lblType" Text='<%#Eval("Type")%>'></asp:Label>
                                </td>
                                <td>
                                    <asp:Label runat="server" ID="lblUsername" Text='<%#Eval("Username") %>'></asp:Label>
                                </td>
                                <td>
                                    <asp:Label runat="server" ID="lblName" Text='<%#Eval("Name") %>'></asp:Label>
                                </td>
                                <td>
                                    <asp:Label runat="server" ID="lblDivision" Text='<%#Eval("DivisionShortcut") %>'></asp:Label>
                                </td>
                                <td>
                                    <asp:Label runat="server" ID="lblSubmittedDate" Text='<%#Eval("DateSubmitted")%>'></asp:Label>
                                </td>
                                <td>
                                    <asp:LinkButton runat="server" ID="lnkSuggestionStatus" Text='<%#Eval("Status")%>'
                                                            OnClick="lnkSuggestionStatus_Click">
                                    </asp:LinkButton>
                                </td>
                            </tr>
                        </ItemTemplate>                
                </asp:ListView> 
```

我改变了占据列表视图大部分区域的第二列的宽度，看看我改变它时发生了什么

```
<asp:ListView ID="All_ListView" runat="server"  DataKeyNames="ID" DataSourceID="SqlDataSource1">
                        <LayoutTemplate>
                            <div ><table id="thetable" cellpadding="4px" cellspacing="1px" style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px; font-weight:bold;">
                                <thead>
                                    <tr style="background-color:#C6D7B5;">
                                        <%--<th style="border-right:2px solid white;border-bottom:2px solid #003366; ">LL No.</th>--%>
                                        <th style="border-bottom:2px solid #003366; ">
                                            <asp:CheckBox ID="CheckBox1" runat="server" CssClass="chkBoxPosition" OnCheckedChanged="CheckBoxHeader_All" AutoPostBack="true" />
                                        </th>    
                                        <th style="border-bottom:2px solid #003366; ">Title</th>
                                        <th style="border-bottom:2px solid #003366; ">Description</th>
                                        <th style="border-bottom:2px solid #003366; ">Type</th>
                                        <th style="border-bottom:2px solid #003366; ">Username</th>
                                        <th style="border-bottom:2px solid #003366; ">Name</th>
                                        <th style="border-bottom:2px solid #003366; ">Division</th>
                                        <th style="border-bottom:2px solid #003366; ">Submitted Date</th>
                                        <th style="border-bottom:2px solid #003366; ">Status</th>
                                    </tr>
                                </thead>
                                <tbody><tr id="itemPlaceholder" runat="server"></tr></tbody>
                            </table></div>
                        </LayoutTemplate>
                        <ItemTemplate>
                            <tr>
                                <td>
                                    <asp:CheckBox ID="CheckBox2" runat="server" />
                                    </td>
                                <td>
                                    <asp:Label runat="server" ID="lblTitle" Text='<%#Eval("Title") %>'></asp:Label>
                                    </td>
                                <td>
                                    <asp:Label runat="server" ID="lblDescription" Text='<%#Eval("Description")%>' Width="50%"></asp:Label>
                                </td>
                                <td>
                                    <asp:Label runat="server" ID="lblType" Text='<%#Eval("Type")%>'></asp:Label>
                                </td>
                                <td>
                                    <asp:Label runat="server" ID="lblUsername" Text='<%#Eval("Username") %>'></asp:Label>
                                </td>
                                <td>
                                    <asp:Label runat="server" ID="lblName" Text='<%#Eval("Name") %>'></asp:Label>
                                </td>
                                <td>
                                    <asp:Label runat="server" ID="lblDivision" Text='<%#Eval("DivisionShortcut") %>'></asp:Label>
                                </td>
                                <td>
                                    <asp:Label runat="server" ID="lblSubmittedDate" Text='<%#Eval("DateSubmitted")%>'></asp:Label>
                                </td>
                                <td>
                                    <asp:LinkButton runat="server" ID="lnkSuggestionStatus" Text='<%#Eval("Status")%>'
                                                            OnClick="lnkSuggestionStatus_Click">
                                    </asp:LinkButton>
                                </td>
                            </tr>
                        </ItemTemplate>                
                </asp:ListView> 
```

**你能帮我解决这个显示问题吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:45:53.730

你好，你可以试试这个。

```
int height = listView1.Items[0].Bounds.Height + listView1.Items[listView1.Items.Count - 1].Bounds.Bottom;

listView1.Size = new Size(400, height); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T09:45:49.697

我怀疑您的列表视图位于具有固定宽度（例如 600 像素）的 div、面板或其他父控件内，并且由于您更改了第二列的宽度，因此其他列没有足够的空间来显示，我我猜没有在 div 上设置溢出。

**你有两个选择：**

1.  从此父控件中删除您的 ListView，以便它可以根据需要动态调整大小
2.  为 div 创建 CSS 样式规则，以在内容超出固定宽度时显示滚动条：

**CSS：**

```
#listViewParent
 {
   width:600px;
   float:left;
   overflow:auto;
 } 
```

**ASPX：**

```
<div id="listViewParent">
  Your ListView goes here
</div> 
```

# php - datetime 仅返回日期

> ID：14669863
> 
> 赞同：0
> 
> 时间：2013-02-03T05:49:23.607
> 
> 标签：php, mysql, sql, datetime

我有一个表，其中列日期设置为日期时间。当我返回并从行中获取日期时，它只返回日期而不是时间。

```
 $date = $row["date"]; 
```

我尝试如下格式化，但出现以下错误：

警告：date_format() 期望参数 1 为 DateTime，给定字符串

```
 $date = date_format($row["date"], 'Y-m-d H:i:s'); 
```

我如何获得全部价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T05:51:55.237

在您的选择语句中，将日期转换为日期时间。前任

```
SELECT CAST(date AS DATETIME) newDate 
```

并将其检索为

```
$dateTime = strtotime($row["newDate"]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T05:52:24.630

您需要将字符串 $date 转换为正确的类型。我必须尝试一些事情才能做到这一点，但这现在在我的机器上运行：

```
$thisDate = "2013-02-02 22:17:06"; // example you gave, as a string

$timezone="America/New_York";      // machine was complaining when I didn't specify

$DT = new DateTime($thisDate, new DateTimeZone($timezone)); // this really is a DateTime object

echo $DT->format('Y-m-d H:i');    // you can echo this to the output

$dateString = $DT->format('Y-m-d H:i:s');  // or format it into a string variable 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T05:52:54.130

尝试：

```
$date = date_format(new DateTime($row['date']), "Y-m-d H:i:s"); 
```

或者

```
$date = date('Y-m-d H:i:s', strtotime($row['date'])); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T06:49:19.233

您需要先将字符串转换为日期类型。然后 date_format() 将起作用。试试下面的。

```
$date = date_format(date_create($row["date"]), 'Y-m-d H:i:s'); 
```

祝你好运

# php - 使用APC存储生成的html

> ID：14669864
> 
> 赞同：0
> 
> 时间：2013-02-03T05:49:32.277
> 
> 标签：php, caching, apc

我们的一些页面使用了大量的处理能力，因此当用户未登录时，完全缓存它们是有意义的。

我正在使用`apc`以下代码来尝试完成此操作：

```
$key = "forum-thread-list-cache";

if(($data = apc_fetch($key)) === false) {

    ob_start();

        $forumOb = new Forum();
        $threadList = $forumOb->getThreadList();

        require "templates/forum.php";

    $data = ob_get_contents();
    ob_end_clean();

    //Debugging
    file_put_contents("/home/user/log.txt", $data);

    //15 Minutes
    apc_store($key, $data, 60 * 15);

    flush();
} 
```

目前生成的 html 将出现在`log.txt`文件中，但我无法让它出现在 apc 用户缓存条目中？

生成的 html 大小约为 18kb。

我在这里做错了吗？

这是我的运行时设置，这里有什么可以防止 18kb 的 html 被缓存吗？

![Apc 设置](../Images/aa93643adb1ab62129bdc873b338c6ae.png)

# ruby-on-rails - rails 3单元测试未运行

> ID：14669867
> 
> 赞同：2
> 
> 时间：2013-02-03T05:50:09.007
> 
> 标签：ruby-on-rails, ruby, unit-testing

以下代码存在于`test/unit/this_stupid_test.rb`

```
require 'test/unit'

class ThisStupidTest < Test::Unit::TestCase
  def better_be_true
    assert true
  end
end 
```

当我运行`rake test:units`它说`finished with 0 tests and 0 assertions`。

当我跑步时它说同样的话`ruby test/unit/this_stupid_test.rb`

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T05:53:53.147

尝试将您的方法定义更改为`def test_better_be_true`.

# iphone - 单视图iOS 6的方向问题

> ID：14669869
> 
> 赞同：0
> 
> 时间：2013-02-03T05:50:31.250
> 
> 标签：iphone, screen-orientation

我的应用程序中有 7 个视图控制器都处于纵向模式。现在我需要显示另一个支持两个方向的视图（第 8 个视图）。我已经实现了这三种方法，但屏幕没有在横向模式下旋转。请给我建议。

```
 - (BOOL)shouldAutorotate{
    return YES;
 }

 - (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskAllButUpsideDown;
 }

 - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation{
    return UIInterfaceOrientationMaskAllButUpsideDown;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:13:24.450

您必须在 appDelegate 中实现以下内容：

```
- (NSUInteger) application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {    

return self.rotateToLandScape ?
    UIInterfaceOrientationMaskAllButUpsideDown :
    UIInterfaceOrientationMaskPortrait; 
```

}

那么您应该在第 8 个屏幕中将 self.rotateToLandScape 设置为 true。

# antlr - 如何使用类似的词法分析器

> ID：14669870
> 
> 赞同：0
> 
> 时间：2013-02-03T05:51:19.677
> 
> 标签：antlr

我有以下语法：

```
cmds
    : cmd+
    ;

cmd
    : include_cmd  |  other_cmd
    ;

include_cmd
    : INCLUDE  DOUBLE_QUOTE  FILE_NAME  DOUBLE_QUOTE
    ;

other_cmd
    : CMD_NAME  ARG+
    ;

INCLUDE
    : '#include'
    ;

DOUBLE_QUOTE
    : '"'
    ;

CMD_NAME
    : ('a'..'z')*
    ;

ARG
    : ('a'..'z' | 'A'..'Z' | '0'..'9' | '_')+
    ;

FILE_NAME
    : ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '.')+
    ; 
```

所以 CMD_NAME、ARG 和 FILE_NAME 的区别不大，CMD_NAME 必须是小写字母，ARG 可以有大写字母和“_”，而 FILE_NAME 可以有“.”。

但这有一个问题，当我用-#include“abc”测试规则时，'abc'被解释为CMD_NAME而不是FILE_NAME，我认为这是因为CMD_NAME在语法文件中的FILE_NAME之前，这导致解析错误。

我是否必须依靠 predict 之类的技术来处理这个问题？除了依赖宿主编程语言，还有纯 EBNF 解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T23:16:17.780

> 但这有一个问题，当我用-#include“abc”测试规则时，'abc'被解释为CMD_NAME而不是FILE_NAME，我认为这是因为CMD_NAME在语法文件中的FILE_NAME之前，这导致解析错误。

所有有效`CMD_NAME`s 的集合与所有有效 s 的集合相交`FILE_NAME`。输入`abc`符合两者的条件。词法分析器将输入与列出的第一个规则匹配（正如您所怀疑的），因为它是第一个匹配的。

> 我是否必须依靠[谓词]之类的技术来处理这个问题？除了依赖宿主编程语言，还有纯 EBNF 解决方案吗？

这取决于你愿意接受的语法。考虑将您的`include_cmd`规则更改为更传统的规则，如下所示：

```
include_cmd : INCLUDE STRING;

STRING 
    : '"' ~('"'|'\r'|'\n')* '"' {String text = getText(); setText(text.substring(1, text.length() - 1));}
    ; 
```

现在 input`#include "abc"`变成了 tokens `[INCLUDE : #include] [STRING : abc]`。

我认为语法不应该负责确定文件名是否有效：有效的文件*名*并不意味着有效的*文件*，并且语法必须理解 OS 文件命名约定（有效字符、路径等) 这可能与语法本身无关。我认为如果您愿意放弃`FILE_NAME`上述规则之类的规则，那您会没事的。

另外值得注意的是，您的`CMD_NAME`规则匹配零长度输入。考虑更改`('a'..'z')*`为，`('a'..'z')+`除非 a`CMD_NAME`真的可以为空。

* * *

请记住，您也会`ARG`遇到与`FILE_NAME`. 它在 之后列出`CMD_NAME`，因此符合这两个规则的任何输入（`abc`同样）都将命中`CMD_NAME`。考虑将这些规则分解成更传统的规则，如下所示：

```
other_cmd : ID (ID | NUMBER)+ SEMI;   //instead of CMD_NAME ARG+
ID        : ('a'..'z'|'A'..'Z'|'_')+; //instead of CMD_NAME, "id" part of ARG
NUMBER    : ('0'..'9')+;              //"number" part of ARG
SEMI      : ';'; 
```

我添加了规则`SEMI`来标记命令的结束。否则解析器将不知道输入`a b c d`应该是一个带有三个参数的命令 ( `a(b,c,d)`) 还是两个各有一个参数的命令 ( `a(b), c(d)`)。

# javascript - onblur 和 onsubmit 功能不起作用，有人可以帮我吗

> ID：14669874
> 
> 赞同：0
> 
> 时间：2013-02-03T05:52:13.667
> 
> 标签：javascript, html

我正在使用 php、html、javascript 进行项目。我正在使用 on blur 和 onsubmit 这两个函数来提供动态的错误感觉。以下逻辑适用于除此文件之外的每个文件。onsubmit 和 onblur 等表单功能不起作用，我也使用了警报来检查，但它没有被调用，有人可以检查并告诉我哪里出错了

```
<script language="Javascript">
//the flags are used to check if all the fields are filled and none is empty
var flag1;
var flag2;
var flag3;

function test(){

    alert("fn called");
    return true;

}
function fun1() 
{
var donated_date=document.forms["myform"]["donated_date"];
if(donated_date==null||donated_date=="")
{   
    document.getElementById('ddate').innerHTML = "Choose the date of your last donation " ;
    document.getElementById('ddate').style.display = "block" ;
    flag1=false;
    return false;

}
document.getElementById('ddate').style.display = "none" ;
flag1=true;
return true;

}
function fun2()
{   
var location=document.forms["myform"]["location"];
if(location==null||location==""||!isNaN(location))
{
    document.getElementById('loc').innerHTML = "Mention the location of your last donation " ;
    document.getElementById('loc').style.display = "block" ;

    flag2=false;
    return false;
}
document.getElementById('loc').style.display = "none" ;
flag2=true;
return true;

function fun3()
{   

var hospital_name=document.forms["myform"]["hospital_name"];

if(hospital_name==null||hospital_name==""||!isNaN(hospital_name))
{
    document.getElementById('hname').innerHTML = "Mention the Hospital Name where you last donated " ;
    document.getElementById('hname').style.display = "block" ;
    flag3=false;
    return false;
}
document.getElementById('hname').style.display = "none" ;
flag3=true;
return true;

}

function validate()
{
alert("hello");

}
</script>
          <form name="myform" method="post" action="o.php"  onsubmit="return validate()">
          <table width="94%" cellpadding="3px" class=" lastDonatedblood_table" cellspacing="0" style="border: 1px solid #CCCCCC;margin: -18px 0 14px 6px;width: 98.5%;">
            <tr>
                    <td style="text-align:left;">Donated Date:</td>
                    <td style="text-align:left;">
<input type="text" name="donated_date" id="donated_date"  onblur="return test();" style="width:300px;"/>
                        <div id="ddate"></div>
                    </td>

                </tr>
                <tr>
                    <td style="text-align:left;">Location:</td>
                    <td style="text-align:left;"><textarea  name="location" id="location"  onblur="return fun2();" style="width:300px;"></textarea></td>
                </tr>
                <center></center>
                <tr>
                    <td style="text-align:left;">Hospital Name:</td>
                    <td style="text-align:left;"><input type="text" name="hospital_name" id="hospital_name"  onblur="return fun3();" style="width:300px;"/></td>
                </tr>
                <center><div id="hname"></div></center>
                <tr>
                    <td style="text-align:left;">Type of Donation:</td>
                    <td style="text-align:left;">
                        <select title="" name="donationtype" id="donationtype"  style="width:317px;">

               <option value="blood">Blood</option> 
               <option value="platelets">Platelets</option>
               </select>
                    </td>
                </tr>
                <tr >
                  <td colspan="2">
                     <input name="submit" id="submit" value="ADD" type="submit" style="margin-top:5px; margin-left:185px; font-size:14px; width:100px;">
                  </td>
                </tr>
            </table>
            </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:00:56.433

您缺少结束大括号（函数关闭）`fun2()`，

```
function fun2()
{   
var location=document.forms["myform"]["location"];
if(location==null||location==""||!isNaN(location))
{
    document.getElementById('loc').innerHTML = "Mention the location of your last donation " ;
    document.getElementById('loc').style.display = "block" ;

    flag2=false;
    return false;
}
document.getElementById('loc').style.display = "none" ;
flag2=true;
return true;
} <-- added closing curly bracket here 
```

**检查控制台，你会得到错误**

# javascript - 移除父元素和所有子元素

> ID：14669877
> 
> 赞同：0
> 
> 时间：2013-02-03T05:52:46.793
> 
> 标签：javascript, jquery, html, css

所以我有一个表格，每次提交按钮时，它都会在表格中添加一行，有 4 列，我在每一行中放置一个删除按钮。我的目的是能够删除整行，但是当我按下它时，它只会删除按钮。如何删除整行？

```
$(this).parent().remove() 
```

我试过了，但它不起作用，td 直接在 tr 内，所以它应该访问 tr 并删除它，但该行仍然存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T05:55:12.260

您要选择最近的`tr`元素，而不是直接父元素。没有看到你的事件绑定，我猜那`$(this)`是按钮，那`$(this).parent()`是`<td>`. 相反，您应该尝试：

```
$(this).closest('tr').remove(); 
```

或者，如果您可以保证 的特定层次结构`tr>td>button`，那么您可以使用：

```
$(this).parent().parent().remove(); 
```

我**强烈反对**使用后一种格式，因为它与 HTML 的结构紧密耦合。如果您的 HTML 开头为：

```
<tr>
    <td>
        <button>Example</button>
    </td>
</tr> 
```

后来更改为：

```
<tr>
    <td>
        <div class="wrapper">
            <button>Example</button>
        </div>
    </td>
</tr> 
```

using`closest('tr')`将继续工作，但 using`parent().parent()`将中断。

* * *

与您没有触发事件的次要问题有关。如果您将事件与`$('.foo button').click(removeRow);`（其中`.foo`与`table`元素匹配）绑定，则这些事件将不适用于新创建的`button`元素。相反，您应该使用以下的事件委托形式`on`（或者只是`delegate`如果您使用的是旧版本的 jQuery）：

```
$('.foo').on('click', 'button', removeRow); 
```

这会将事件绑定存储在`table`元素上，当回调被调用时，它会检查触发指定事件的元素是否匹配第二个参数中指定的选择器（在这种情况下`'button'`），如果匹配，它会触发指定的处理程序（在这种情况下`removeRow`）以匹配的元素作为上下文（在处理程序内，`this`仍将指向一个`button`元素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T05:54:54.250

```
 $(this).closest('tr').remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T05:55:58.580

我假设您的代码如下所示：

```
<table>
    <tr>
        <td>Column</td>
        <td><button></button></td>
    </tr>
</table> 
```

所以，你的`$(this).parent()`是`<td>`，而不是`<tr>`。你需要另一个`parent()`：

```
$(this).parent().parent().remove(); 
```

# android - 如何将样式动态设置为 RatingBar 以便在 Android 中创建自定义 SeekBar

> ID：14669882
> 
> 赞同：1
> 
> 时间：2013-02-03T05:53:03.070
> 
> 标签：android

通过 layout.xml 它正在工作。

```
<RatingBar 
  android:id="@+id/hotel_rating_bar"
  style="@style/custom_ratingbar" /> 
```

但我想动态设置样式。

任何答案将不胜感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:56:28.140

Android 尚不支持在运行时动态更改视图样式，但`TextViews`通过[setTextAppearance](http://developer.android.com/reference/android/widget/TextView.html#setTextAppearance%28android.content.Context,%20int%29)除外。

您必须在绘制视图之前
通过 XML 或通过构造函数中的 Java 设置样式。

```
RatingBar ratingBar = new RatingBar(context, null, android.R.attr.ratingBarStyleSmall); 
```

# jquery - Jquery在悬停时切换图像的src

> ID：14669884
> 
> 赞同：0
> 
> 时间：2013-02-03T05:53:21.357
> 
> 标签：jquery, ajax

我有一长串通过 ajax 调用返回的位置列表。当用户将鼠标悬停在其中一个位置时，google 静态图像将替换为他们突出显示的 div 的位置。

每个 div 都是位置类的一部分，并且有一个名为 location 的属性，由 php 填充。正在更新的 div 称为#default。在我开始使用 ajax 调用之前，这一切都奏效了。现在它甚至无法识别悬停（我将源设为一些随机的谷歌图像，它不会改变它）。

我怎样才能让它工作，有人可以解释为什么脚本在将它们放入 ajax 调用后不起作用？我正在转换我网站的大部分内容，如果我不知道是什么导致了问题，这个问题将继续出现。

谢谢！

```
<script>
$(".locations").hover(function(e) {

  var id = this.id; 
  var local= $(this).attr("location"); 
  $("#default").attr("src","http://maps.googleapis.com/maps/api/staticmap?center="+ local +"&zoom=16&size=235x144")

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:25:25.473

您正在绑定所有具有类“位置”的元素，以在页面上有任何具有“位置”类的元素之前在悬停时执行方法（因为稍后使用 ajax 异步加载位置）。有几种方法可以做到这一点。1) 在 ajax 调用成功返回后执行绑定，或者 2) 使用此事件将所有未来的元素与类“位置”绑定。

显然，悬停事件不是真正的事件，它只是 mouseenter 和 mouseleave 添加在一起的简写。[http://api.jquery.com/hover/](http://api.jquery.com/hover/) （你每天都会学到新东西）

## 方法二

```
$(".locations").live("mouseenter",function(e) {
    var id = this.id; 
    var local= $(this).attr("location"); 
    $("#default").attr("src","http://maps.googleapis.com/maps/api/staticmap?center="+ local +"&zoom=16&size=235x144")
}); 
```

# ruby-on-rails - 如何从 gem 的上下文中列出 Rails 项目中的所有模型？

> ID：14669885
> 
> 赞同：2
> 
> 时间：2013-02-03T05:53:24.240
> 
> 标签：ruby-on-rails, ruby, gem

我正在尝试确定如何执行两个简单的任务：

1.  我想从 Gem 的上下文中加载所有 Rails 应用程序的模型。例如，假设 Rails 应用程序是一个博客，并且有作者、帖子和评论。我希望包含的 gem 在不知道它们存在的情况下找到这些模型。

2.  同样，从加载的 gem 的上下文中，我希望我可以使用 rails 模型；例如，我可以在不知道 Authors 存在的情况下调用 Author.first，并且我希望该信息可用于 gem。

所以总结一下这个问题。**从 gem 的上下文中，如何加载 rails 项目的所有模型并访问这些模型？**

这是我的快速破解：

```
module ActiveTest
  class Base
    def listme
      ::ActiveRecord::Base.subclasses.collect { |type| type.name }.sort
    end
  end
end

1.9.3-p286 :005 > a = ActiveTest::Base.new
 => #<ActiveTest::Base:0x007f8882bdd460> 
1.9.3-p286 :006 > a.listme
    NameError: uninitialized constant ActiveRecord 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T06:21:08.920

使用`ActiveSupport`

```
models = Dir["#{Rails.root}/app/models/**/*.rb"].map do |f|
  f.chomp('.rb').camelize # works with namespaces e.g. Foo::Bar::MyClass
end 
```

如果您想将这些字符串变成实际的`Class`对象，请在`constantize`后面添加`camelize`

[骆驼化文档](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-camelize)

[恒定化文档](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-constantize)

# java - Java中根据线程划分循环执行

> ID：14669887
> 
> 赞同：0
> 
> 时间：2013-02-03T05:53:44.883
> 
> 标签：java, multithreading

假设我有一个方法**运行**如下，

```
public void run()
{  
for(i=loopstart;i<loopend;i++){  
     //some code here to execute. no dependency exists   
} 
```

**loopstart & loopend**变量具有循环执行的最小值和最大值。

现在我要做的就是将此循环执行分为 2 到 5 个线程，以便并行执行。为此，我已将此方法更改为

```
public void run()
{
for(i=thread_start; i<thread_end; i++)
     //some code here to execute.    
} 
```

变量**thread_start**和**thread_end**是每个线程必须运行的范围。那么最好如何划分循环执行。假设我在范围内执行循环

```
 5-94 
```

我想根据线程数将其划分为多个执行范围。
例如

```
 threads               ranges    
 2                     5-44, 45-94   
 3                     5-34, 35-65, 66-94 
```

这些只是示例（不准确）。我想根据可用的线程划分它的执行。
所以对于**2个线程**，

```
 thread_start=5  ,thread_end=44       1st thread 
 thread_start=45 ,thread_end=94       2nd thread. 
```

我应该如何（使用java代码）在几乎相同的长度范围内划分循环执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:07:58.723

```
public class Looper implements Runnable {

    private int start;
    private int end;

    public Looper(int start, int end){
        this.start = start;
        this.end = end;
    }

    @Override
    public void run() {
        for(int i=start; i<end; i++){
            System.out.println("thread id : " + Thread.currentThread().getId() + "; index : " + i) ;
        }
    }
}

public class Test {

    public static void main(String[] args){
        Thread looper1 = new Thread(new Looper(1,1000));
        Thread looper2 = new Thread (new Looper(1001,2000));
        looper1.start();
        looper2.start();
    }
} 
```

这是你需要的吗？如果您需要在运行时获取可用的线程，您可以考虑使用 ThreadPool。

# php - var_dump() 显示数组，但 is_array() 为假

> ID：14669890
> 
> 赞同：2
> 
> 时间：2013-02-03T05:53:55.883
> 
> 标签：php, simplexml

`$response`是一个 SimpleXML 元素，初始 var_dump 将其显示为一个数组，但我无法循环遍历它。当我专门访问它时，它变成了一个对象。

有什么建议么？

```
 var_dump($response); //shows KeyResult as array
    if (is_array($response->KeyResult)) { //returns false
        $addressRankings = array();
        foreach ($response->KeyResult as $rating) {
            print_r($rating); 
```

这是 var_dump

```
object(SimpleXMLElement)#8 (1) {
  ["KeyResult"]=>
  array(10) {
    [0]=>
    object(SimpleXMLElement)#7 (5) { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T06:10:49.767

`var_dump`转储 SimpleXML 对象内容，但是当您调用`->KeyResult`它时，它有更多的魔力（如 __get 方法），它返回的不是[数组](http://www.php.net/manual/en/simplexml.examples-basic.php#example-5288)：

> 属性（前面示例中的 $movies->movie）不是数组。它们是可迭代且可访问的对象。

# mysql - 在mysql中对没有“GROUP BY”表达式的行进行分组

> ID：14669891
> 
> 赞同：0
> 
> 时间：2013-02-03T05:54:07.127
> 
> 标签：mysql, sql, group-by

我有这张桌子，我想做以下事情：

```
idstep   idproject   beg_date  end_date
   1        1
   2        1
   3        1
   4        1
   1        2
   2        2
   3        2
   4        2
   5        2
   1        3
   2        3
   3        3 
```

**在不使用“GROUP BY”的情况下检索每个项目的最大步数**

*使用 GROUP BY 子句，我得到了我想要的结果，如下所示：*

```
 SELECT MAX(idstep), idproject 
    FROM mytable
GROUP BY idproject; 
```

结果：

```
 idstep     idproject
    4            1
    5            2
    3            3 
```

拜托，这里有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T05:59:01.963

我同意在这种特殊情况下使用 GROUP BY 更有意义，但这应该有效：

```
SELECT t.project, t.step
FROM YourTable t
  LEFT JOIN YourTable t2 on t.step < t2.step and t.project = t2.project
where t2.step IS NULL 
```

这是[小提琴](http://www.sqlfiddle.com/#!2/05ceb/1)。

您也可以使用 NOT EXISTS（感觉就像我整晚都在使用它），虽然我个人更喜欢 LEFT JOIN / NULL 方法：

```
SELECT t.project, t.step
FROM YourTable t
WHERE NOT EXISTS (
  SELECT *
  FROM YourTable t2 
  WHERE t.step < t2.step 
    AND t.project = t2.project
) 
```

更多小提琴：[http ://www.sqlfiddle.com/#!2/ebbc2/1](http://www.sqlfiddle.com/#!2/ebbc2/1)

祝你好运。

# c - numactl --membind

> ID：14669900
> 
> 赞同：2
> 
> 时间：2013-02-03T05:56:11.780
> 
> 标签：c, linux, openmp, numa

在 Linux 中使用带有 --membind 选项的 numactl 时，假设我执行以下操作：

```
numactl --membind=0,1,2 ./prog 
```

./prog 的内存是否会分配在所有 NUMA 节点 0、1 和 2 上？或者如果 NUMA 节点 0 的内存不够，内存会只分配在 NUMA 节点 1 和 2 上吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:10:54.080

手册页`numactl`说：

```
--membind=nodes, -m nodes 
  Only allocate memory from nodes. Allocation will fail when there is not enough 
  memory available on these nodes. 
```

因此，如果节点 0 没有足够的内存，内存将分配在节点 1,2 上。每个节点分配的实际内存分配可能取决于**内存放置策略**。

# jquery - jQuery：后代选择器仅适用于一个“隐藏”的 div

> ID：14669902
> 
> 赞同：0
> 
> 时间：2013-02-03T05:56:52.583
> 
> 标签：jquery, jquery-ui, jquery-selectors

嗨，伙计们，也许你可以帮忙。
我正在使用标准的 jQuery UI 构建一个简单的选项卡式表单。由于各种原因，此表单将包含约 40 个隐藏 div，其中包含所有表单字段（我无法通过 AJAX 加载此负载）。

我创建了一个带有大量精简版页面[的小提琴。](http://jsfiddle.net/4EssX/)您将在“管理”选项卡下看到一些内容，但在管理或临床选项卡下不会显示任何内容。对 HTML 的检查将显示其中确实有内容。

可能导致问题的特定代码是这样的，特别是 CSS 后代选择器：

```
 jQuery( '.tabDiv ul li a' ).click(function() {                  /* Create Toggle Function */
    var link = $(this).attr('href'); 
    jQuery( '.navigation' ).removeClass("active").addClass("hidden");
    jQuery( link ).removeClass("hidden").addClass("active");
    return false;
}); 
```

但如果是，我不明白为什么。此页面将始终在最新的 Chrome 浏览器上运行，因此可以忽略任何 IE/Firefox 问题。

在此先感谢您的帮助，我在很短的时间内从这个网站上学到了很多东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:08:33.490

唯一的问题是文本出现在菜单**下方**，而不是右侧。此外，只有管理选项卡下的前 2 项有任何内容。

# ruby-on-rails - Capistrano 在未先停止进程的情况下部署失败

> ID：14669904
> 
> 赞同：0
> 
> 时间：2013-02-03T05:57:38.197
> 
> 标签：ruby-on-rails, deployment, capistrano

当我发出以下问题时，我遇到了 capistrano 的问题：

> 帽部署

```
 ** [out :: ***] rake aborted!
     ** [out :: ***] Killed
     ** [out :: ***] 
     ** [out :: ***] (in /home/deployer/apps/webapp/releases/20130203054234/app/assets/javascripts/application.js)
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:142:in `exec_runtime'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:28:in `block in exec'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:27:in `exec'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/uglifier-1.3.0/lib/uglifier.rb:100:in `compile'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/sprockets/compressors.rb:74:in `compress'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/processing.rb:265:in `block in js_compressor='
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/processor.rb:29:in `call'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/processor.rb:29:in `evaluate'
     ** [out :: ***] 
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/tilt-1.3.3/lib/tilt/template.rb:76:in `render'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/context.rb:193:in `block in evaluate'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/context.rb:190:in `each'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/context.rb:190:in `evaluate'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/bundled_asset.rb:26:in `initialize'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:252:in `new'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:252:in `build_asset'
     ** [out :: ***] 
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/index.rb:93:in `block in build_asset'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/caching.rb:19:in `cache_asset'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/index.rb:92:in `build_asset'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:169:in `find_asset'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/index.rb:60:in `find_asset'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/sprockets/static_compiler.rb:19:in `block in compile'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:219:in `block in each_logical_path'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:206:in `block (2 levels) in each_file'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:196:in `each'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:196:in `each_entry'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:204:in `block in each_file'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:203:in `each'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:203:in `each_file'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:217:in `each_logical_path'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/sprockets/static_compiler.rb:18:in `compile'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/sprockets/assets.rake:56:in `internal_precompile'
     ** [out :: ***] /home/deployer/apps/webapp/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/sprockets/assets.rake:74:in `block (3 levels) in <top (required)>'
     ** [out :: ***] 
     ** [out :: ***] Tasks: TOP => assets:precompile:nondigest
     ** [out :: ***] (See full trace by running task with --trace) 
```

但是，当我先停止该过程然后进行部署时，一切正常。还有其他人遇到同样的问题吗？

> 上限部署：停止
> 
> 帽部署

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:56:54.120

终于让它工作了，必须在 gemfile 中添加以下内容：

```
# for the assets group
gem 'therubyracer'
gem 'execjs' 
```

希望它可以帮助其他人。

# php - PHP如何在内部表示字符串？

> ID：14669912
> 
> 赞同：2
> 
> 时间：2013-02-03T05:58:41.200
> 
> 标签：php

我有基本的 PHP 问题

假设我有一个字符串“02/03/2013”​​，它是如何在 PHP 内部表示的，它是转换为整数还是十六进制等价物

比较两个字符串时，PHP 如何在内部比较它们？

感谢您提前回答

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T06:12:00.863

PHP 是用 C 编写的。所有变量都是 ZVAL 结构。

请阅读这些教程以了解有关 PHP 内部的更多信息并开始编写扩展。

*   [扩展写作第一部分：PHP和Zend简介](http://devzone.zend.com/303/extension-writing-part-i-introduction-to-php-and-zend/)
*   [扩展编写第二部分：参数、数组和 ZVAL](http://devzone.zend.com/317/extension-writing-part-ii-parameters-arrays-and-zvals/)
*   [扩展写作第三部分：资源](http://devzone.zend.com/446/extension-writing-part-iii-resources/)

> 表 1 显示了各种类型，以及它们对应的字母代码和可以与 zend_parse_parameters() 一起使用的 C 类型：

```
Type      Code    Variable Type
Boolean   b       zend_bool
Long      l       long
Double    d       double
String    s       char*, int
Resource  r       zval*
Array     a       zval*
Object    o       zval*
zval      z       zval* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T06:04:56.007

PHP 字符串只是一个字节序列，没有标记编码。访问[这里](https://softwareengineering.stackexchange.com/questions/151293/how-does-php-internally-represent-strings)了解更多信息。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T06:03:14.807

字符串是字符串。不发生转换；您的字符串恰好包含一些数字，这很好，但 PHP 对它的处理与任何其他字符串没有任何不同。

PHP 比较字符串的方式与任何其他语言相同：它逐个字符地检查两个字符串，并查找第一对不同的字符。一旦找到一个，具有较低 ASCII 值的字符的字符串（就像你从 得到的[`ord()`](http://php.net/ord)）被认为是“小于”另一个字符串。

# annotations - 是否有从字符串转换为布尔值的 Jackson 注释

> ID：14669913
> 
> 赞同：0
> 
> 时间：2013-02-03T05:58:42.753
> 
> 标签：annotations, jackson

这是一项非常常见的任务，我希望只是在我的对象上打一个注释并称之为好。

我宁愿不创建自定义序列化器/反序列化器类等

查看 1.9 注释和 2x 注释，我没有看到一个。

是否有一个简单的杰克逊注释可以将字符串转换为布尔值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:13:23.473

“从字符串转换为布尔值”到底是什么意思？什么样的类和 JSON？

Jackson 会根据需要进行隐式转换，因此即使 JSON 具有字符串值（“true”和“false”），它们也会被转换。反向没有完成——原生 Java 布尔值以 JSON 布尔值的形式出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-03T16:26:14.197

不是专门针对 Jackson，但 Spring 中有一个转换器（如果这是您使用 Jackson 的环境）`org.springframework.core.convert.support.StringToBooleanConverter`，它似乎支持将以下值转换为布尔值：

```
trueValues.add("true");
trueValues.add("on");
trueValues.add("yes");
trueValues.add("1");

falseValues.add("false");
falseValues.add("off");
falseValues.add("no");
falseValues.add("0"); 
```

# java - Swing 中的鼠标事件处理

> ID：14669916
> 
> 赞同：-6
> 
> 时间：2013-02-03T05:59:21.627
> 
> 标签：java, swing, mouse, jbutton

我想知道，Swing 组件如何知道鼠标在哪里以及何时被单击，以及如何在我自己的类中使用它，而不必在每次我想将对象添加到新的对象时添加新的鼠标侦听器控制板？

编辑：我正在扩展 JComponent，我想在鼠标移动时调用一个事件方法 EDIT2：现在可以工作了，谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T06:10:39.073

向您的 JButton 添加一个动作侦听器，它会告诉您何时单击它，如下所示：

```
someButton.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e) {
         //the button was pressed and do your stuff here.
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T06:11:55.070

`how does the JButton know where the mouse is and when it clicked`

这就是**Listeners**的含义 - 它侦听相应类型的事件

只需执行此操作即可实现`ActionListener`并将其注册到其侦听器： `jbutton.addActionListener(this);` 现在，当您单击按钮时，它将生成一个`event`将在此部分处理的 b

```
public void actionPerformed(ActionEvent e){
    ... // handle event
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T06:34:19.563

从另一篇文章的评论中，您想[`MouseListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseListener.html)使用[`Component#addMouseListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#addMouseListener%28java.awt.event.MouseListener%29)

您可能想阅读[如何编写鼠标侦听](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)器以获取更多信息

# asp.net-mvc - 无法使用带有优化的 ScriptBundle 类捆绑 SignalR JavaScript

> ID：14669927
> 
> 赞同：1
> 
> 时间：2013-02-03T06:00:58.143
> 
> 标签：asp.net-mvc, signalr, scriptbundle

安装 SignalR NuGet 包后：

```
Install-Package Microsoft.AspNet.SignalR -pre 
```

我得到以下文件：

```
jquery.signalR-1.0.0-rc2.js
jquery.signalR-1.0.0-rc2.min.js 
```

我注册了捆绑包：

```
bundles.Add(new ScriptBundle("~/bundles/jquery.signalR").Include(
            "~/Scripts/jquery.signalR-{version}.js")); 
```

在我看来，我呼吁：

```
@Scripts.Render("~/bundles/jquery.signalR") 
```

这一切都在开发过程中有效，但一旦我启用：

```
BundleTable.EnableOptimizations = true; 
```

捆绑包无法呈现脚本。

我也试过：

```
bundles.Add(new ScriptBundle("~/bundles/jquery.signalR").Include(
            "~/Scripts/jquery.signalR-{version}-rc2.js")) 
```

这有点没用，因为使用 {version} 的全部目的是为将来的版本做好准备，而下一个版本正在摆脱“-rc2”位。

如何有效地使用通配符匹配来匹配脚本：

```
jquery.signalR-1.0.0-rc2.js 
```

正在开发中，以及

```
jquery.signalR-1.0.0-rc2.min.js 
```

在生产中，同时为 SignalR 的未来更新做准备？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T08:34:07.700

捆绑中的`{version}`名称不适用于预发布脚本。要使用预发布脚本，您可以使用以下注册

```
bundles.Add(new ScriptBundle("~/bundles/jquery.signalR").Include(
        "~/Scripts/jquery.signalR*")); 
```

# sql - 我怎样才能看到 sql server 2000 中的所有方案

> ID：14669932
> 
> 赞同：-2
> 
> 时间：2013-02-03T06:02:10.790
> 
> 标签：sql, sql-server, tsql, sql-server-2000

> **可能重复：**
> [如何获取 Sql Server 数据库中所有模式的列表](https://stackoverflow.com/questions/3719623/how-do-i-obtain-a-list-of-all-schemas-in-a-sql-server-database)

我设法看到了 sql server 2000 中的所有模式。我使用了以下语句

```
show search_path 
```

但它失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:03:41.377

请试试：

```
SELECT * FROM INFORMATION_SCHEMA.SCHEMATA 
```

有关更多信息，请参阅链接[How do I get a list of all schemas in a Sql Server database](https://stackoverflow.com/questions/3719623/how-do-i-obtain-a-list-of-all-schemas-in-a-sql-server-database)

# c# - 带有自定义滚动条的 WPF Web 浏览器控件

> ID：14669938
> 
> 赞同：1
> 
> 时间：2013-02-03T06:03:37.623
> 
> 标签：c#, wpf, scrollbar, webbrowser-control

我正在尝试为`Web browser Control`.

我`Scroll Bar Control`为此使用了一个，所以我附上`Scroll Bar Control`了`Web browser Control` 使用以下代码：

```
 Doc = (mshtml.HTMLDocument)browser.Document;
        Doc.parentWindow.document.body.style.overflow = "hidden";
        mshtml.IHTMLElement2 ScrolablePlace= (mshtml.IHTMLElement2)Doc.getElementById("ScrolablePlace");
        ScrollBar.ViewportSize = browser.ActualHeight;
        ScrollBar.Maximum = ScrolablePlace.scrollHeight; 
```

在滚动滚动条时：

```
 private void ScrollBar_Scroll(object sender, ScrollEventArgs e)
        {
            if (Doc != null)
            {
                Doc.parentWindow.scroll(0, (int)e.NewValue);
            }
        } 
```

这是工作，但`ScrollBar.Maximum`值总是大于滚动条的地方。剂量`ScrollBar.ViewportSize` 和`ScrollBar.Maximum` 设置是否正确？

我希望我可以用这张图片正确解释我的问题：

![在此处输入图像描述](../Images/ae3d0725c54b0de92ba55f351d3a9c3b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T07:35:00.997

经过一番研究，我发现滚动条`maximum`属性必须从这个公式计算：

```
scrolbar.maximum=(maxsize-scrolbar.ViewportSize)+scrolbar.smallchanges 
```

所以我只是这样做，它工作正常：

```
 ScrollBar.Maximum = ScrolablePlace.scrollHeight- browser.ActualHeight+ScrollBar.SmallChange; 
```

# c# - System.IO 不检索文本文件的最后一个字符

> ID：14669940
> 
> 赞同：4
> 
> 时间：2013-02-03T06:03:43.827
> 
> 标签：c#, streamreader, outputstream, streamwriter, .net

我尝试使用编写文本文件，`OutputStream.Write`但是我注意到文件的最后一个字符没有被发送。

无论文件是 6KB 还是 242KB，都会跳过最后一个字符。

```
AwAIB0UfFlJTSTNABEQWGgMVAhNFBkVeKgVTSx4LCVQMBUUQRUMwBVFTGwcAEAASRRNTBipNQQMFDREYB
BUAH0VIKgVLRVccCRFFGRcbR08wREgDEQENEUkCDRNOTX5cS1ZXHgQGHFYIB0NOfgUIAwMABFQABBcdUg
YpRFcDHgZBAA0TRTEDBj1KQEZXREEdRRIKHFQGK0tARgUbFRULEkUFSF9+R1FXVxwJEUUkAAFQSTBWQQ0
xBBQHDV5MUkFIOgV2RgQYDhoWE0sxTEktQAwKVx8AB0UCDRcAQyxXS1FZSBUcBAIWUldDN1dAAxEHE1QI
E0UTTkJ+TARAFgYVVBAYARdSVSpESkdXAAAcBFg= 
```

**注意**：*整个文本是文本文件中的一行。*

我的文本文件与上面的有些相似。那么有人可以帮帮我吗？

## 我的代码：

```
var path = Request.QueryString["path"];
path = Server.MapPath(Url.Content("~/Files/" + path + "/somefile.txt"));
Response.Buffer = false;
Response.ContentType = "text/plain";
FileInfo file = new FileInfo(path);
int len = (int)file.Length, bytes;
Response.AppendHeader("content-length", len.ToString());
byte[] buffer = new byte[1024];
Stream outStream = Response.OutputStream;
using (Stream stream = System.IO.File.OpenRead(path))
{
    while (len > 0 && (bytes = stream.Read(buffer, 0, buffer.Length)) > 0)
    {
        outStream.Write(buffer, 0, bytes);
        len -= bytes;
    }
}
Response.Flush();
Response.Close(); 
```

**更新 1：** *现在显示文件中的完整文本。*

**更新 2：** *更新了完整的 C# 代码。*

**更新3：** *谢谢，我的朋友们，你们的努力！我以某种方式使它起作用-问题是`Response.Flush()`并且`Response.Close()`；一旦我删除了这两条语句，它就开始工作了。我不明白为什么会出现这个问题，因为我总是使用`Response.Flush()`and `Response.Close()`。我从来没有收到过这种错误，但这是第一次。如果有人能给我一个解释，将不胜感激。我会将@AlexeiLevenkov 的帖子标记为答案，因为我只是在没有 and 的情况下再次对其进行了测试，`Response.Flush`并且`Close()`它正在工作。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T06:17:37.123

[Stream.CopyTo](http://msdn.microsoft.com/en-us/library/vstudio/system.io.stream.copyto%28v=vs.100%29.aspx)是更容易的方法（只要您可以使用 .Net 4.0）。

```
using (var stream = System.IO.File.OpenRead(path))
{
  stream.CopyTo(outStream);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T06:21:12.627

我想你需要打电话`Response.Flush()`或`outStream.Flush()`

# javascript - 如何将“返回”按钮添加到在新选项卡中打开的外部页面？

> ID：14669948
> 
> 赞同：0
> 
> 时间：2013-02-03T06:05:08.503
> 
> 标签：javascript, html, browser-history

对于这个广泛的问题，我很抱歉，但我不知道从哪里开始。

我的网站上有一个通过 MailChimp 生成的 optin 表单。当用户选择时，我让他进入自定义页面。该页面在新选项卡中打开。

我找到了这样的解决方案：

```
<input type="button" value="Go Back From Where You Came!" onclick="history.back(-1)" />

<FORM><INPUT Type="button" VALUE="Back" onClick="history.go(-1);return true;"></FORM> 
```

他们将在内部导航中工作，但不适用于我想要实现的目标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T06:28:54.633

你不可以做这个。浏览器历史记录与单个窗口相关联，因此您可以使窗口在历史记录中向后或向后移动，但您不能打开新窗口并直接转到第一个窗口的上一页。您甚至无法获得之前的实际 URL，因为这是一项安全功能。

您可以做的最好的事情是通过 cookie 或会话变量跟踪您网站的上一页，然后使用 javascript 弹出带有存储 URL 的窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-02T13:07:43.530

如果原始页面是静态页面或网页模板中的变量，则可以添加如下`<a>`标签：

```
<a href="/pageYouShouldHaveCameFrom">
<button type="button" name="button" onClick="javascript:history.go('/pageYouShouldHaveCameFrom');">Back</button>
</a> 
```

当页面不是内部页面并且没有历史记录时，它将转到 href 中定义的链接。正如 Crayon Violent 所说，更复杂的网页应该使用 cookie 或会话变量。

# css - 如何使嵌入的 youtube 视频透明 在歌剧更亮？

> ID：14669949
> 
> 赞同：1
> 
> 时间：2013-02-03T06:05:25.730
> 
> 标签：css, youtube, cross-browser, opera, transparent

我正在尝试在透明 div 上嵌入一些 youtube 视频在 chrome 和 firefox 中它们工作正常，但在歌剧中它们非常暗

歌剧 [http://i.imgur.com/QapAeO2.jpg](http://i.imgur.com/QapAeO2.jpg)

铬/火狐 [http://i.imgur.com/bVY97h2.jpg](http://i.imgur.com/bVY97h2.jpg)

这是我的嵌入代码：

```
<iframe id="ytplayer" type="text/html" width="640" height="390" src="http://youtube.com/embed/$3?wmode=transparent" frameborder="0"/></iframe> 
```

我正在使用 IPB，这个“$3”是第三个正则表达式匹配，来自

```
http(?:s)?://(www.)?youtube.com/watch\?(\S+?)?v=([\d\w-_]+?)(&\S+?)? 
```

包装 div 设置为 opacity: 0.94;

当我将包装 div 的不透明度设置为“1”时，嵌入视频就可以了。

有谁知道如何修复这个问题，除了添加一个javascript的“解决方案”，它将添加一个绝对定位的非透明div，并将对应的视频放在原始视频之上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:19:24.497

Opera 有一个关于透明度和插件的已知错误（内部跟踪为 DSK-288890），这可能是导致问题的原因。

改变 wmode=transparent 会改变什么吗？如果没有，我能想到的唯一解决方法是将 Opera 的不透明度设置为 1。

# iphone - 如何在 UIWebView 中加载本地 HTML 文件？

> ID：14669950
> 
> 赞同：1
> 
> 时间：2013-02-03T06:05:40.333
> 
> 标签：iphone, ios, objective-c, uiwebview

我是 Objective-CI 的新手，想知道如何将本地 html 文件（比如 index.html）加载到 UIWebView 中，我可以像这样加载 url，

```
 -(void)viewWillAppear:(BOOL)animated
    {
        NSLog(@"willAppear");

        UIWebView *myWebView=[[UIWebView alloc]initWithFrame:CGRectMake(20, 20, 400, 400)];

        NSURL *url = [[NSURL alloc] initWithString:@"http://www.google.co.in/"];

        [myWebView loadRequest:[NSURLRequest requestWithURL:url]];
        myWebView.scalesPageToFit = YES;
        [self.view addSubview:myWebView];
    } 
```

我想加载本地 html 文件而不是加载 url。我该怎么做？

我也想调用委托方法

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request 
```

导航类型：（UIWebViewNavigationType）导航类型，没有被调用。任何指导都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-03T06:08:46.383

首先，在google搜索之前，请先浏览一下apple的文档。我建议你浏览一下基本的objective c编程概念。

关于[UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)，我想告诉你如何加载本地 html。

```
UIWebView *myWebView=[[UIWebView alloc]initWithFrame:CGRectMake(20, 20, 400, 400)];
NSString *indexPath = [NSBundle pathForResource:@"index" ofType:@"html" inDirectory:nil];
[myWebView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:indexPath]]];
[self.view addSubview:myWebView]; 
```

要调用任何委托方法，首先在您的类中实现 UIWebViewDelegate 协议..即在您的接口声明中，如下所示...</p>

```
@interface YourViewController : UIViewController<UIWebViewDelegate> 
```

然后将您的 webview 委托设置为您的类..即，在您初始化 web 视图之后。

```
myWebView.delegate = self; 
```

希望它有效......快乐编码:-)

# c++ - 程序接收信号 SIGSEGV，Segmentation fault

> ID：14669953
> 
> 赞同：0
> 
> 时间：2013-02-03T06:06:54.077
> 
> 标签：c++

这是我在此的头一篇博文。我是 C++ 编程的相对新手，这个错误让我很难过。

我的程序应该从几个空格分隔的文本文件中获取输入并输出一个 csv 文件。

我的代码编译得很好，但是程序崩溃了，我已经能够检索到以下错误：

正在调试的程序在从 GDB 调用的函数中发出信号。GDB 已将上下文恢复到调用前的状态。要更改此行为，请使用“set unwindonsignal off”。将放弃对包含函数 (std::string::size() const) 的表达式的评估。程序收到信号 SIGSEGV，分段错误。0x00423576 在 std::string::size() const ()

此代码的第 16 行出现错误：

```
#include "arrayUtils.h"
#include "enrollment.h"
#include <string>
#include <iostream>

using namespace std;

/*
 * Read the course names and max enrollments. Keep the courses
 * in alphabetic order by course name.
 */
void readCourses (istream& courseFile, int numCourses,
          string* courseNames, int* maxEnrollments)
{
  string courseNameValue = ""; // PROBLEMS START HERE
  int maxEnrollmentValue = 0;

  while (courseFile){
    courseFile >> courseNameValue;
    addInOrder(courseNames, numCourses, courseNameValue); //PROGRAM CRASHES HERE

    courseFile >> ws;

    courseFile >> maxEnrollmentValue;
    addInOrder(maxEnrollments, numCourses, maxEnrollmentValue);
  }
}

/*
 * Read the enrollment requests, processing each one and tracking
 * the number of students successfully enrolled into each course.
 */
void processEnrollmentRequests (istream& enrollmentRequestsFile,
                int numCourses,
                string* courseNames,
                int* maxEnrollments,
                int* enrollments)
{
  // Start the enrollment counters at zero
  for (int pos = 0; pos < numCourses; ++pos)
  {
      enrollments[pos] = 0;
  }

  // Read the requests, one at a time, serving each one
  string courseName;
  int courseIndex = 0;

  enrollmentRequestsFile >> courseName;
  while (enrollmentRequestsFile) {
    enrollmentRequestsFile >> ws;
    string studentName;
    getline (enrollmentRequestsFile, studentName);

    courseIndex = binarySearch(courseNames, numCourses, courseName);

    if (courseIndex >= 0)
    {
        if (maxEnrollments[courseIndex] >= enrollments[courseIndex])
        {
            ++enrollments[courseIndex];
            cout << studentName << " has enrolled in " << courseName << "\n";
        }
        else
        {
            cout << studentName << " cannot be enrolled in " << courseName << "\n";
        }
    }
    else
    {
        cout << studentName << " cannot be enrolled in " << courseName << "\n";
    }

    enrollmentRequestsFile >> courseName;
   }
}

/*
 * Write a CSV report listing each course and its enrollment.
 */
void generateReport (ostream& reportFile,
             int numCourses,
             string* courseNames,
             int* enrollments)
{
  for (int pos = 0; pos < numCourses; ++pos)
  {
      reportFile << "\"" << courseNames[pos] << "\"," << enrollments << "\n";
  }
}

void processEnrollments (istream& courseFile, istream& enrollmentRequestsFile,
             ostream& reportFile)
{ 
  int numCourses = 0;
  int arraySize = 0;
  courseFile >> numCourses;

  arraySize = numCourses + 1;

  // Create the arrays we need
  string courseNames[arraySize];
  int maxEnrollments[arraySize];
  int enrollments[arraySize];

  // Process the enrollments
  readCourses (courseFile, numCourses, courseNames, maxEnrollments);
  processEnrollmentRequests (enrollmentRequestsFile, numCourses,
                 courseNames, maxEnrollments, enrollments);
  generateReport (reportFile, numCourses, courseNames, enrollments);
} 
```

我调用来组织字符串数组的函数是：

```
// Assume the elements of the array are already in order
// Find the position where value could be added to keep
//    everything in order, and insert it there.
// Return the position where it was inserted
//  - Assumes that we have a separate integer (size) indicating how
//     many elements are in the array
//  - and that the "true" size of the array is at least one larger
//      than the current value of that counter
template <typename T>
int addInOrder (T* array, int& size, T value)
{
  // Make room for the insertion
  int toBeMoved = size - 1;
  while (toBeMoved >= 0 && value < array[toBeMoved]) {
    array[toBeMoved+1] = array[toBeMoved];
    --toBeMoved;
  }
  // Insert the new value
  array[toBeMoved+1] = value;
  ++size;
  return toBeMoved+1;
} 
```

请帮忙！我不知道该怎么做才能解决这个问题，该程序即将到期！

编辑：

主程序如下所示：

```
#include <cstdlib>
#include <iostream>
#include <string>
#include <fstream>

#include "enrollment.h"

using namespace std;

int main (int argc, char** argv)
{
  if (argc != 4)
    {
      cerr << "Usage: " << argv[0] << " courseFile enrollmentFile reportFile" << endl;
      return -1;
    }

  // Take input and output file names from the command line
  ifstream coursesIn (argv[1]);
  ifstream enrollmentIn (argv[2]);
  ofstream reportOut (argv[3]);

  processEnrollments (coursesIn, enrollmentIn, reportOut);

  coursesIn.close();
  enrollmentIn.close();
  reportOut.close();

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:15:10.297

在 addInOrder 函数中：

```
int toBeMoved = size - 1;
while (toBeMoved >= 0 && value < array[toBeMoved]) {
  array[toBeMoved+1] = array[toBeMoved]; 
```

**toBeMoved**在第一次迭代中变为**大小**，超出数组范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T06:29:04.830

扩展 Jermaine Xu 的回答：

解决方案：

使用`std::vector<T>`而不是数组/指针。它负责动态调整大小和删除..您的程序也会更干净（并且可能也更有效）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T08:13:30.983

您没有`addInOrder`正确使用功能。

```
string courseNames[numCourses + 1]; 
```

courseNames 数组定义如上，然后你`courseName`就`numCourses`直接传到`addInOrder`。在`addInOrder`你做：

```
courseName[numCourses]  //toBeMoved = size - 1; toBeMoved+1 
```

您访问`courseName`数组边界之外并且您实际上打算访问`last element of courseName`.

因此，您需要一个额外的变量来记住您当前的数组大小。像这样的东西：

```
void readCourses (istream& courseFile, int numCourses,
          string* courseNames, int* maxEnrollments)
{
  string courseNameValue = ""; 
  int maxEnrollmentValue = 0;

  int index = 0;           // index to how many real courses are added to courseName array
  while (courseFile){
    if (index == numCourses){  // courseName array is full, break out
        break;
    }
    courseFile >> courseNameValue;
    addInOrder(courseNames, index , courseNameValue);  // pass in index, not array size

    courseFile >> ws;

    courseFile >> maxEnrollmentValue;
    addInOrder(maxEnrollments, numCourses, maxEnrollmentValue);
  }
} 
```

希望这可以帮助！

# javascript - JQuery 加载页面片段返回未定义

> ID：14669957
> 
> 赞同：0
> 
> 时间：2013-02-03T06:07:43.077
> 
> 标签：javascript, jquery, ajax, jsp, twitter-bootstrap

这是我的 ajax 响应返回的页面。

```
<!DOCTYPE HTML>
<%@ taglib prefix="s" uri="/struts-tags"%>
<html>
<head>
<title>Insert title here</title>
<script src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
</head>
<body>

    <div id = "div1">
        <h1>HI am a dashboard</h1>
        <h1>HI am a dashboard</h1>
        <h1>HI am a dashboard</h1>
    </div>
</body>
</html> 
```

在我的 ajax 成功代码上，我正在这样做

```
$('body').on('submit', '#sign-in', function(e) {
    e.preventDefault();

    var data = $(this).serialize();

    var url = $(this).attr('action');
    $.ajax({
        //this is the php file that processes the data and send mail
        url : url,
        type : "POST",
        data : data,
        dataType:"html",
        //Do not cache the page
        cache : false,
        //success
        success : function(data) {
            console.log(data);
            console.log($(data).find('#div1').html());
        }
    });
}) 
```

是`console.log($(data).find('#div1').html());` 未定义的。而

```
console.log(data); 
```

返回我之前声明的页面。

**更新** 发现问题，我的代码中有两个“数据”变量。我已经成功更改了一个，但它仍然返回未定义

```
$('#submit-login').on('click',function(e){
        $('#hidden-submit-login').click();
})

    $('body').on('submit', '#sign-in', function(e) {
        e.preventDefault();

        var data = $(this).serialize();

        var url = $(this).attr('action');
        $.ajax({
            //this is the php file that processes the data and send mail
            url : url,
            type : "POST",
            data : data,
            dataType:"html",
            //Do not cache the page
            cache : false,
            //success
            success : function(response) {
                console.log($(response).find('#div1').html());
                console.log(response);
                //console.log($((html).find('#div1').html();
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:24:11.400

您在`string`非 DOM 元素上应用 jQuery 选择器。对象是请求的结果
；`response`它在您的 DOM 中不存在。

就像; `document.getElementById('div1')`会回来`null`的。

您应该在使用它之前创建/附加一个 HTML 元素到 DOM。

如果您要做的是解析`<div id="div1">...</div>`您发出请求的页面内的块：

首先我建议你去掉所有其他标签（包括`<html>`,`<body>`和`<head>`里面的所有东西`<head>`）。所以你的文件只包括：

```
<div id="div1">
    <h1>HI am a dashboard</h1>
    <h1>HI am a dashboard</h1>
    <h1>HI am a dashboard</h1>
</div> 
```

然后在您的 AJAX`success()`回调中；使用 jQuery DOM 插入方法（在此处选择适合您的方法：[inside](http://api.jquery.com/category/manipulation/dom-insertion-inside/)，[outside](http://api.jquery.com/category/manipulation/dom-insertion-outside/)）：

```
$.ajax({
    url : url,
    type : "POST",
    data : data,
    dataType: "text",
    cache : false,
    success : function(data) {
        if (data) {
            $('body').append(data); //this will append the html inside the response; at the end bottom of your page's body
            console.log($('#div1').html());
        }
    }
}); 
```

现在您已`div1`在页面正文的底部附加了您的内容，因此可以访问它。

```
console.log($('#div1').html()); 
```

*注意：确保您的**id** `div1`是唯一的，这样您在进行进一步操作时就不会选择其他现有元素。*

# url - 在 Go 中通过代理获取 URL 时出错

> ID：14669958
> 
> 赞同：3
> 
> 时间：2013-02-03T06:07:45.260
> 
> 标签：url, proxy, go, fetch

这与[另一个问题有关](https://stackoverflow.com/q/14661511/561309)。我正在使用以下简单代码通过代理获取 URL：

```
package main

import (
    "fmt"
    "io/ioutil"
    "net/http"
    "net/url"
)

func main() {
    proxyUrl, err := url.Parse("87.236.233.92:8080")
    httpClient := &http.Client { Transport: &http.Transport { Proxy: http.ProxyURL(proxyUrl) } }
    response, err := httpClient.Get("http://stackoverflow.com")
    if err != nil {
        fmt.Println(err.Error())
    } else {
        body, _ := ioutil.ReadAll(response.Body)
        fmt.Println("OK: ", len(body))
    }
} 
```

如果我运行此代码，我会收到此错误：

> 获取[http://stackoverflow.com](http://stackoverflow.com) : http: error connected to proxy 87.236.233.92:8080: GetServByName: The requested name is valid, 但未找到请求类型的数据。

我知道代理地址是有效的，如果我通过代理通过其他方式获取 URL，它就可以工作。知道为什么我会收到此错误吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T11:00:08.813

用 in 指定您的代理，`http://`它应该可以工作，例如

```
proxyUrl, err := url.Parse("http://87.236.233.92:8080")
if err != nil {
    fmt.Println("Bad proxy URL", err)
    return
} 
```

# java - 使用单独的控制器进行拦截

> ID：14669964
> 
> 赞同：0
> 
> 时间：2013-02-03T06:08:35.150
> 
> 标签：java, playframework, playframework-1.x

我创建了一个只包含方法的`Controller`命名。另一个将包含所有方法并使用using注释。`InterceptionLogger.java``Interception``Controller``Application``action``Interception``@With`

这是`Application.java`控制器：

```
@With(InterceptionLogger.class)
public class Application extends Controller {

public static void index() {
    System.out.println("Inside index!!!");
    render();
}

public static void welcome(String txtName){     
    render(txtName);
} 
```

如果`InterceptionLogger.java`控制器是这样的：

```
public class InterceptionLogger extends Controller {   

@Before
static void logBefore(){
    System.out.println("Inside \"logBefore\" method of App Controller");
}

@After
static void logAfter(){
    System.out.println("Inside \"logAfter\" method of App Controller");
}

} 
```

当我运行应用程序时，**输出是：**

```
Inside "logBefore" method of App Controller
Inside index!!!
Inside "logAfter" method of App Controller 
```

很好，正如预期的那样。

但是，如果我将其更改`InterceptionLogger.java`为：

```
public class InterceptionLogger extends Controller {   

@Before(only="welcome")
static void logBefore(){
    System.out.println("Inside \"logBefore\" method of App Controller");
}

@After(only="index")
static void logAfter(){
    System.out.println("Inside \"logAfter\" method of App Controller");
}

} 
```

然后我得到这个**输出**：`index`

```
Inside index!!! 
```

在这种情况下，为什么该语句`Inside "logAfter" method of App Controller`没有在控制台中打印？

如何让它发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:35:57.800

玩！正在寻找当前控制器中被拦截的方法。如果方法在另一个控制器中，您需要提供完整路径：

```
@Before(only="Application.welcome")
static void logBefore(){
    System.out.println("Inside \"logBefore\" method of App Controller");
}

@After(only="Application.index")
static void logAfter(){
    System.out.println("Inside \"logAfter\" method of App Controller");
} 
```

# sql - SQLite 删除 {A,B} 和 {B,A} 的集合

> ID：14669967
> 
> 赞同：0
> 
> 时间：2013-02-03T06:09:09.460
> 
> 标签：sql, select, tuples, set

有人可以帮我处理一个有表的sql查询吗

```
Col A | Col B
-------------
A       B
C       D
E       F
B       A 
```

如何删除 {B, A} 或选择 {B, A}

问题是：

```
If two students A and B are friends, and A likes B but not vice-versa,
remove the Likes tuple. 
```

我已经弄清楚了 A 和 B 是朋友并且 A 喜欢 B 的表，但我不知道如何删除 B 喜欢 A 元组

我有

```
select friend.id1, friend.id2
from friend, likes
where friend.id1 = likes.id1 and friend.id2 = likes.id2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:16:20.197

我以前看过这个家庭作业...

```
DELETE FROM Likes
WHERE ID1 IN (SELECT L.ID1
                       FROM Friend F,Likes L
                       WHERE F.ID1 = L.ID1 AND F.ID2 = L.ID2
                       AND F.ID1 NOT IN (SELECT ID2 
                                         FROM Likes
                                         WHERE ID1=L.ID2 AND ID2=L.ID1)) 
```

尝试自己解决这些问题 - 如果无法解决，请尝试在 Google 上搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T00:21:48.830

```
DELETE FROM friends f1
WHERE NOT EXISTS (
    SELECT *
    FROM friends f2
    WHERE f2.a = f1.b AND f2.b = f1.a
    ); 
```

注意：这可能在 mysql 中**不起作用**，因为它不允许在子查询中引用目标表。

# ruby-on-rails - 如何使用符号键将对象转换为哈希数组

> ID：14669969
> 
> 赞同：1
> 
> 时间：2013-02-03T06:10:01.443
> 
> 标签：ruby-on-rails, ruby, hash

我在尝试：

```
Product.first.attributes.map{|k, v| "#{k.to_sym} => #{v}"} 
```

但是，我收到如下输出：

```
["id => 53", "name = blah"], ["id => 54", "name = blahblah"] 
```

我想要的是：

```
[{:id=>53,:name=>"blah"}, {:id=>54,:name=>"blahblah"}] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T06:49:01.863

看起来您只是想将`Product.first.attributes`哈希转换为带有键符号而不是字符串的哈希。您可以通过调用[`symbolize_keys`](https://api.rubyonrails.org/classes/Hash.html#method-i-symbolize_keys)Rails（实际上是 ActiveSupport）已修补到 Hash 中来使自己变得轻松：

```
h = Product.first.attributes.symbolize_keys 
```

* * *

当你这样说时：

```
"#{k.to_sym} => #{v}" 
```

您只是在生成一个看起来有点像 Hash 的字符串，这并不是非常有用。如果您想长时间地符号化键，您可能会使用以下方法生成一个数组数组：

```
...map { |k, v| [ k.to_sym, v ] } 
```

然后把整个东西喂给[`Hash[]`](https://ruby-doc.org/core/Hash.html#method-c-5B-5D)：

```
h = Hash[Product.first.attributes.map { |k, v| [ k.to_sym, v ] }] 
```

不过，我不会为所有这些噪音而烦恼，只需使用`symbolize_keys`并继续解决更有趣的问题。

# python - Django Request 更高效地解包和渲染本地模板

> ID：14669973
> 
> 赞同：0
> 
> 时间：2013-02-03T06:11:14.607
> 
> 标签：python, django

我尝试编写这些变量并将它们重新插入 Django 快捷方式的渲染函数中，这意味着只为一个变量编写至少 4 次。

例如：

```
def foo(request):

  bar = request.GET.get('bar')
  bar += 1
  result = {'bar':bar}
  render('parrot.html', result) 
```

当我只写一个 var 时没关系，但是当涉及到 20 多个 GET var 时，这完全是一场灾难。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:04:22.637

首先， 的返回值的类型`request.GET.get('bar')`是`str`or`NoneType`而不是`int`，因此您不能简单地添加它`1`。

其次，记住没有“魔法”，我想像下面这样重写代码，但仍然出现四次`bar`

```
def foo(request):
    try:
        bar = 1 + int(request.GET['bar'])
    except:
        bar = 0
    return render('parrot.html', {'bar':bar}) 
```

如果您不喜欢这种冗长，只需将`try...except`部分抽象为一个助手，例如`get_int`. 当有 20 个或更多的 var 进行操作时，您可能需要更高级别的抽象，例如[Django 表单](https://docs.djangoproject.com/en/dev/topics/forms/)...

# c++ - 将 GCC 的 typeof() 扩展与成员访问相结合

> ID：14669982
> 
> 赞同：3
> 
> 时间：2013-02-03T06:13:07.067
> 
> 标签：c++, gcc, template-specialization, typeof

我正在开发一个通过模板使用静态多态性的 C++ 库。之所以这样设计，是因为目标是具有小堆栈的嵌入式系统，并且通常有利于`inline`成员函数以节省堆栈使用量。

静态多态性模板的使用意味着事件发射器（通常是设备驱动程序）类型的名称通常长得令人讨厌：

```
class DeviceThatUsesSPI<class SPI_BUS_TYPE> {

  public:
    class DeviceEvent : public Event<DeviceThatUsesSPI> {};

    // and the rest of the device driver implementation, including
    // the code that emits that event.

}

SomeSpecificGpioBus gpio_bus();
SoftwareSpiBus<typeof(gpio_bus)> spi_bus(&gpio_bus);
DeviceThatUsesSPI<typeof(spi_bus)> device(&spi_bus); 
```

如您所见，我们使用 GCC扩展运算符来避免重复`typeof`写出完整的令人讨厌的类型名称。`DeviceThatUsesSPI<SoftwareSpiBus<SomeSpecificGpioBus>>`这在我们尝试过的任何地方都像一个魅力，直到今天我试图用它来访问一个代表事件的嵌套类。在我当前的示例中，这是一个模板特化，实现编译时事件处理程序绑定：

```
template<>
inline void event_handler<typeof(device)::ExampleEvent>(typeof(device) *emitter) {
    // event handler implementation...
} 
```

但是，我也在变量声明的一个更简单的示例中尝试了这一点：

```
typeof(device)::ExampleEvent event; 
```

在这两种情况下，G++ 都无法解析带有语法错误的表达式。我认为这是因为在标准 C++ 语法中，除了标识符之外没有任何情况，`::`并且解析器在遇到冒号时无法回溯并将第一部分视为类型。

但是，[GCC 手册 about`typeof`](http://gcc.gnu.org/onlinedocs/gcc/Typeof.html)对该运算符做出以下承诺：

> `typeof`可以在任何可以使用 typedef 名称的地方使用构造。例如，您可以在声明、强制转换或 or 内部使用`sizeof`它`typeof`。

如果我用`typeof`typedef 替换示例中的两个用途，G++ 很高兴：

```
typedef typeof(device) device_type;

template<>
inline void event_handler<device_type::ExampleEvent>(typeof(device) *emitter) {
    // event handler implementation...
}

device_type::ExampleEvent event; 
```

因此，这进一步加深了我的怀疑，即编译器对我在语义上编写的内容没有问题，但语法不允许我表达它。虽然使用 typedef 间接确实可以让我工作代码，但为了方便这个库的用户，我更愿意找到一种方法来使事件处理程序声明自包含。有没有办法编写`typeof`运算符来消除解析歧义，以便我可以使事件声明单行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T06:31:40.243

根据[针对 GCC 的错误报告，](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=6709)这是一个已知问题，已在 GCC 4.7 中修复。升级 GCC 是长期的解决方案。

错误报告描述了在旧版本中使用类模板作为间接绕过解析器的进一步解决方法：

```
class SameType<T> {
  public:
    typedef T R;
}
T<typeof(device)>::ExampleEvent event; 
```

这比 typedef 更好，因为它可以泛化到所有事件类型，但对用户来说仍然不自然。

同样的问题，应用于新的标准`decltype`运算符，实际上是[C++11 规范更改](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3031.pdf)的主题，该更改阐明了围绕类型解析的规则，以使其按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T06:20:09.027

我认为一个小的元函数可以解决问题。

```
template<typename T>
struct self
{
   typedef T type;
}; 
```

然后将其用作：

```
template<>
inline void 
event_handler<self<typeof(device)>::type::ExampleEvent>(typeof(device) *emitter)
{
    // event handler implementation...
} 
```

或者您可以将元函数（*不太*通用）定义为：

```
template<typename T>
struct event
{
   typedef typename T::ExampleEvent type;
}; 
```

然后将其用作：

```
template<>
inline void 
event_handler<event<typeof(device)>::type>(typeof(device) *emitter)
{
    // event handler implementation...
} 
```

* * *

顺便说一句，在 C++11 中，您可以使用`decltype`代替`typeof`（这是一个编译器扩展）：

```
template<>
inline void 
event_handler<decltype(device)::ExampleEvent>(typeof(device) *emitter) 
{
    // event handler implementation...
} 
```

希望有帮助。:-)

# c++ - C++11 静态局部变量和线程

> ID：14669983
> 
> 赞同：5
> 
> 时间：2013-02-03T06:13:26.950
> 
> 标签：c++, multithreading, c++11

静态局部变量对于创建/使用`std::thread`s 的类是否安全？

因为当我使用这样的东西时：

```
logger& logger::get_instance(void)
{
    static logger lg;
    return lg;
} 
```

并尝试退出（强制关闭）可执行文件，它崩溃/退出不正确（Visual Studio 2012 调试器甚至崩溃）。

当我不这样做时，当我强制关闭时程序会优雅地退出。

这是崩溃时的堆栈调用

```
 ntdll.dll!77c10dbd()    Unknown
        [Frames below may be incorrect and/or missing, no symbols loaded for ntdll.dll] 
        ntdll.dll!77b7bfdc()    Unknown
        kernel32.dll!75b55bab() Unknown
    >   msvcr110d.dll!__crtCreateThreadpoolWait(void (_TP_CALLBACK_INSTANCE *, void *, _TP_WAIT *, unsigned long) * pfnwa, void * pv, _TP_CALLBACK_ENVIRON_V1 * pcbe) Line 569  C
        msvcr110d.dll!Concurrency::details::RegisterAsyncWaitAndLoadLibrary(void * waitingEvent, void (_TP_CALLBACK_INSTANCE *, void *, _TP_WAIT *, unsigned long) * callback, void * data) Line 675    C++
        msvcr110d.dll!Concurrency::details::ExternalContextBase::PrepareForUse(bool explicitAttach) Line 120    C++
        msvcr110d.dll!Concurrency::details::ExternalContextBase::ExternalContextBase(Concurrency::details::SchedulerBase * pScheduler, bool explicitAttach) Line 52 C++
        msvcr110d.dll!Concurrency::details::SchedulerBase::GetExternalContext(bool explicitAttach) Line 1579    C++
        msvcr110d.dll!Concurrency::details::SchedulerBase::AttachExternalContext(bool explicitAttach) Line 1527 C++
        msvcr110d.dll!Concurrency::details::SchedulerBase::CreateContextFromDefaultScheduler() Line 569 C++
        msvcr110d.dll!Concurrency::details::SchedulerBase::CurrentContext() Line 402    C++
        msvcr110d.dll!Concurrency::details::LockQueueNode::LockQueueNode(unsigned int timeout) Line 616 C++
        msvcr110d.dll!Concurrency::critical_section::lock() Line 1017   C++
        msvcp110d.dll!mtx_do_lock(_Mtx_internal_imp_t * * mtx, const xtime * target) Line 65    C++
        msvcp110d.dll!_Mtx_lock(_Mtx_internal_imp_t * * mtx) Line 144   C++
        escobar.exe!std::_Mtx_lockX(_Mtx_internal_imp_t * * _Mtx) Line 68   C++
        escobar.exe!std::_Mutex_base::lock() Line 43    C++
        escobar.exe!std::unique_lock<std::mutex>::unique_lock<std::mutex>(std::mutex & _Mtx) Line 228   C++
        escobar.exe!escobar::utilities::blocking_queue<escobar::logging::log_message *>::interrupt() Line 71    C++
        escobar.exe!escobar::logging::log_worker::~log_worker() Line 17 C++
        escobar.exe!escobar::logging::log_worker::`scalar deleting destructor'(unsigned int)    C++
        escobar.exe!escobar::logging::logger::close() Line 72   C++
        escobar.exe!escobar::logging::logger::~logger() Line 27 C++
        escobar.exe!`escobar::logging::logger::get_instance'::`2'::`dynamic atexit destructor for 'lg''()   C++
        msvcr110d.dll!doexit(int code, int quick, int retcaller) Line 585   C
        msvcr110d.dll!_cexit() Line 410 C
        msvcr110d.dll!__CRTDLL_INIT(void * hDllHandle, unsigned long dwReason, void * lpreserved) Line 296  C
        msvcr110d.dll!_CRTDLL_INIT(void * hDllHandle, unsigned long dwReason, void * lpreserved) Line 210   C
        ntdll.dll!77bb2846()    Unknown
        ntdll.dll!77bb2893()    Unknown
        ntdll.dll!77bc09c8()    Unknown
        ntdll.dll!77bc08ad()    Unknown
        KernelBase.dll!75525bbb()   Unknown
        KernelBase.dll!75525c51()   Unknown
        kernel32.dll!75b58543() Unknown
        ntdll.dll!77bbac69()    Unknown
        ntdll.dll!77bbac3c()    Unknown 
```

这是几个功能

```
log_worker::~log_worker(void)
{
    this->queue.interrupt();
    service.join();
}

void log_worker::run(void)
{
    while (true)
    {
        log_message* msg;
        if (this->queue.dequeue(msg) == false)
            break;

        this->lg->print_log_message(msg);

        delete msg;
    }
}

    bool dequeue(T& item)
    {
        std::unique_lock<std::mutex> lock(m);

        // handles spurious wakeups
        while (!this->data_available && !this->interrupted)
            cv.wait(lock);

        if (this->interrupted)
            return false;

        item = std::move(this->front());
        this->pop();
        if (this->empty())
            this->data_available = false;
        return true;
    }

    void interrupt(void)
    {
        std::unique_lock<std::mutex> lock(m);
        this->interrupted = true;
        cv.notify_all();
        printf("notified threads...\n");
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T06:36:48.473

看起来您有一个分离的线程`SchedulerBase`（*可能是任何仍在使用的计划线程`logger`*），它在您的应用程序停止并被破坏时仍在运行，`logger`从而导致崩溃。

> 而 log_worker 是在 logger 类中动态分配的。

*   您需要确保所有使用`logger`实例的线程在`logger`被销毁之前都已正确关闭
*   在记录器析构函数中删除 log_worker

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T15:20:23.940

我只需要停止在关机时删除东西。当您使用“X”按钮关闭控制台时，这不是正确的关闭，因此尝试关闭线程是没有意义的。

# c++ - 包含 boost/thread.hpp 时编译错误

> ID：14669984
> 
> 赞同：0
> 
> 时间：2013-02-03T06:13:52.323
> 
> 标签：c++, boost, clang

我正在尝试在 C++ 中使用线程，使用 boost 的线程库。Clang 给了我一个错误，我不知道如何解释它。我试图编译的文件是尽可能少的：

```
#include <iostream>
#include <boost/thread.hpp>

using namespace std;

int main() {
    return 0;
} 
```

这是成绩单：

```
$ clang++ -std=c++11 -o 4.4 4.4.cpp -v
Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin12.2.1
Thread model: posix
 "/usr/bin/clang" -cc1 -triple x86_64-apple-macosx10.8.0 -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -main-file-name 4.4.cpp -pic-level 1 -mdisable-fp-elim -relaxed-aliasing -masm-verbose -munwind-tables -target-cpu core2 -target-linker-version 134.9 -v -resource-dir /usr/bin/../lib/clang/4.1 -fmodule-cache-path /var/folders/mt/k4dhhm7d7_7_q6drl3zkjj4r0000gn/T/clang-module-cache -std=c++11 -fdeprecated-macro -fdebug-compilation-dir /Users/thinkpad20/Documents/workspace/cpp/homework4 -ferror-limit 19 -fmessage-length 100 -stack-protector 1 -mstackrealign -fblocks -fobjc-runtime-has-arc -fobjc-runtime-has-weak -fobjc-dispatch-method=mixed -fobjc-default-synthesize-properties -fcxx-exceptions -fexceptions -fdiagnostics-show-option -fcolor-diagnostics -o /var/folders/mt/k4dhhm7d7_7_q6drl3zkjj4r0000gn/T/4-49j8fE.o -x c++ 4.4.cpp
clang -cc1 version 4.1 based upon LLVM 3.1svn default target x86_64-apple-darwin12.2.1
ignoring nonexistent directory "/usr/include/c++/4.2.1/i686-apple-darwin10/x86_64"
ignoring nonexistent directory "/usr/include/c++/4.0.0"
ignoring nonexistent directory "/usr/include/c++/4.0.0/i686-apple-darwin8/"
ignoring nonexistent directory "/usr/include/c++/4.0.0/backward"
ignoring nonexistent directory "/usr/local/include"
#include "..." search starts here:
#include <...> search starts here:
 /usr/include/c++/4.2.1
 /usr/include/c++/4.2.1/backward
 /usr/bin/../lib/clang/4.1/include
 /usr/include
 /System/Library/Frameworks (framework directory)
 /Library/Frameworks (framework directory)
End of search list.
 "/usr/bin/ld" -demangle -dynamic -arch x86_64 -macosx_version_min 10.8.0 -o 4.4 /var/folders/mt/k4dhhm7d7_7_q6drl3zkjj4r0000gn/T/4-49j8fE.o -lstdc++ -lSystem /usr/bin/../lib/clang/4.1/lib/darwin/libclang_rt.osx.a
Undefined symbols for architecture x86_64:
  "boost::system::system_category()", referenced from:
      ___cxx_global_var_init3 in 4-49j8fE.o
  "boost::system::generic_category()", referenced from:
      ___cxx_global_var_init1 in 4-49j8fE.o
      ___cxx_global_var_init2 in 4-49j8fE.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

任何帮助表示赞赏！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:24:46.980

您需要告诉 clang 要链接哪些库。在你的情况下，这是`boost_system`（这就是错误消息告诉你的）和（一旦你真正开始在你的程序中使用一些线程的东西）`boost_thread`，所以像这样编译它：

`clang++ -std=c++11 -o myapp myfile.cpp -lboost_system -lboost_thread`

# python - python中的短代码

> ID：14669990
> 
> 赞同：1
> 
> 时间：2013-02-03T06:14:14.820
> 
> 标签：python, optimization

我怎样才能在 python 中仅用一行编写这个完整的代码，或者我必须说一些使用最少空间或最少没有字符的东西？

```
t=int(input())
while t>0:
  n=int(input())
  s=sum(1/(2.0*i+1) for i in range(n))
  print "%.15f"%s
  t-=1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T06:17:07.497

别客气

```
for t in range(int(input()), 0, -1): print '%.15f' % sum(1/(2.0*i+1) for i in range(int(input()))) 
```

**编辑**（解释）：

首先，您可以在[range中使用](http://docs.python.org/2/library/functions.html#range)[for 循环](http://docs.python.org/2/reference/compound_stmts.html#for)，而不是 while 循环。for 循环中的最后一个参数是 -1 表示每次减 1，而不是默认的每次加 1。

如果 if 语句或循环中只有一条语句，则可以将一条语句保留在同一行中，而无需转到下一行。

无需创建 n 的变量，您只需将其插入即可，因为它只使用一次。s 也是如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T09:05:50.573

```
for _ in range(input()):print"%.15f"%sum(1/(2.0*i+1)for i in range(input())) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-05T18:09:51.937

`exec"print sum((-1.)**i/(i-~i)for i in range(input()));"*input()`

我知道我回答这个问题为时已晚。但上面的代码给出了相同的结果。它会变得更短。我也在想办法缩短它。#CodeGolf #Python2.4

# regex - 正则表达式抓取一组数字

> ID：14669992
> 
> 赞同：0
> 
> 时间：2013-02-03T06:15:03.533
> 
> 标签：regex, bash, sed

我已经工作了几个小时来研究如何为 bash 脚本编写一个正则表达式，该脚本只能抓取一组超过 2 个数字。例如，如果我有#jk2478_0.JPEG，我只想返回 2478。我可以返回所有的数字，但不知道如何在这个例子的结果中不包含 0。这是我到目前为止所拥有的。

```
i='#jk2478_0.JPEG';
f=`echo $i | sed s/[^0-9]*[^0-9]//g`
echo $f #24780 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:23:16.947

```
$ echo '#jk2478_0.JPEG,' | grep -E -o '[0-9]{2,}'
2478 
```

`-o`表示仅匹配

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:16:00.500

使用 sed 的其他方式

```
echo '#jk2478_0.JPEG,' | sed -re 's/(.*)([a-zA-Z]+)([0-9]+)(.*)/\3/' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T06:23:27.640

也许这个？

```
f=`echo $i | sed s/.*([0-9]\{2,\}.*/\1/` 
```

# c++ - 在哪个命名空间做哈希 用户类型的函子属于？

> ID：14669995
> 
> 赞同：11
> 
> 时间：2013-02-03T06:15:18.113
> 
> 标签：c++, hash, c++11, namespaces

从 C++11 标准中我不清楚`hash<T>`应该在哪里定义用户定义的函子。

例如，在*23.5.2 Header`<unordered_map>`*中，它显示：

```
template <class Key,
        class T,
        class Hash = hash<Key>,
        class Pred = std::equal_to<Key>,
        class Alloc = std::allocator<std::pair<const Key, T> > >
    class unordered_map; 
```

这表明，默认情况下，`hash<T>`在全局命名空间`equal_to<>`中搜索，而在`std`命名空间中搜索。

`hash<>`为什么和之间的命名空间有区别`equal_to<>`？

（实际上，在[http://www.cplusplus.com/reference/unordered_map/unordered_map/](http://www.cplusplus.com/reference/unordered_map/unordered_map/)的描述中，都没有指定`std`命名空间。）

因此，当`hash<>`为用户类型定义函子时，我们应该将它包含在一个`namespace std { }`块中，还是可以保留在当前命名空间中？

如果代码没有`using namespace std;`，那么 STL 容器如何`unordered_map`知道在`std`命名空间中查找`hash<>`与原始类型关联的预定义函子？似乎默认值`Hash = hash<Key>`无法找到这些。

对不起，如果这些是愚蠢的问题..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T07:31:23.367

首先，模板没有“参数依赖查找”。因此`hash<Key>`将始终引用相同的模板，无论是在全局命名空间中`std`还是在全局命名空间中，独立于`Key`. 如果它已解析为不同翻译单元中的不同模板，则会因 ODR 违规而导致未定义的行为。仅此一项就表明，`hash`这里的意思`std::hash`是，就像`unordered_map`是这样声明的：

```
namespace std {
    template<class T> struct hash;

    template <class Key,
        class T,
        class Hash = hash<Key>,    // resolves to std::hash<Key> for all Keys
        class Pred = std::equal_to<Key>,
        class Alloc = std::allocator<std::pair<const Key, T> > >
    class unordered_map;
} 
```

但是，标准头文件中声明的类型不需要在源代码中编写（原则上它们可以内置于编译器或通过其他魔法预编译）。该标准要求每个标准标头仅声明其概要中的类型，这意味着通过省略`std::hash`声明，该标准允许一些假设的实现以避免上述命名空间污染。这解释了为什么您在概要中看不到上述声明。

为了进一步支持上述结论，我们转到 §20.8.12 类模板哈希 [unord.hash]，内容如下：

> 23.5 中定义的无序关联容器使用类模板散列的特化作为默认散列函数。

本段指的是`std::hash`，我们可以从 的概要中推断出来`<functional>`。

**底线：**这是标准格式的不一致。有很多不一致的地方，所以这个具体案例一点也不奇怪。在这种情况下，人们必须通过推断什么是唯一明智的事情来理解其意图。

**专业化。**您在声明它们的名称空间中专门化模板。您被明确授予为您自己的类型专门化标准模板的权利：

```
namespace std {
    template<> struct hash<YourClass> {
        // specialization goes here
    };
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-03T07:31:33.780

当您想为您的类型定义一个*哈希函子时*，只需将其放入**您的**命名空间并用它进行实例化`unordered_xxx`——非常简单......

```
namespace my {
struct some_type {/*...*/};
struct some_hasher {/*...*/};
}

typedef std::unordered_map<int, my::some_type, my::some_hasher> my_some_hash_map; 
```

AFAIK 不建议（而且显然不安全）将 smth 添加到`std`命名空间中。实际上它不是必需的（根据我的经验，我不记得什么时候想添加 smth `std`——总是可以解决不这样做的“问题”）

顺便说一句：

> 这表明，默认情况下，在全局命名空间中搜索 hash，而在 std 命名空间中搜索 equal_to<>。

错误的！考虑一下：

```
namespace my {
// See declaration of some_type above...
template <
    typename SomeType = some_type
  , typename Alloc = std::allocator<SomeType>
  >
struct test;
} 
```

显然，`some_type`将在当前命名空间中搜索！

> 因此，当为用户类型定义 hash<> 仿函数时，我们应该将它包含在一个`namespace std { }`块中，还是可以保留在当前命名空间中？

不！不要试图通过提供模板特化来减少类型的符号数`std::hash<YourType>`——只需在命名空间中编写自己的哈希函子并在实例化时将其添加为模板参数`std::unordered_xxx`...

遵循这个简单的规则：**避免将 smth 添加到`namespace`不受您控制的 a 中**（所有名称空间！不仅`std`......）除非是（某些库）明确要求的情况。

# html - 回形针上传图片

> ID：14669996
> 
> 赞同：0
> 
> 时间：2013-02-03T06:16:07.097
> 
> 标签：html, ruby-on-rails, paperclip, pic

# 这是我的需要：

我有三个奖品，每个奖品都有一张照片，例如：

奖品1 pic1奖品2
pic2
奖品3 pic3

# 这是我的设计：

我在我的数据库中使用了四条记录，第 1 到第 3 行是从第 1 到第 3 奖的映射，第 4 行是默认奖品，可以用作添加奖品。

# 问题来了：

用户回形针何时上传我的照片，识别每张照片都有一些问题。详情如下：

```
<form>
<input type="file" name="pic[]">
<input type="file" name="pic[]">
<input type="file" name="pic[]">
<input type="submit">
</form> 
```

当我选择`choose file`上传和提交表单时，`pic`数组将通过参数传递，所以我可以得到图片，并按数组的顺序保存它们。

但是，当我只`choose file`中奖时，数组的大小为1，我无法判断后端改变了哪一个，所以我想听听大家的意见，让我看看你如何设计它，或者我可以做一些改变来解决它！

# 任何方式的坦克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:11:51.173

您需要确保上传的照片是更新您想要的奖品的正确资源。

假设您数据库中的每个奖品都有自己的行和回形针列设置正确，您将希望表单如下所示：

```
= form_for @prize, method: 'put', html: { multipart: true } do |f|
  = f.file 'pic'
  = f.submit 
```

这应该`PUT`将图片信息传递给控制器​​，`/prize/1234`并且控制器应该将照片字段/参数视为属性并相应地更新。

需要注意的事项：

1.  不要忘记添加多部分
2.  确保回形针配置正确
3.  确保产品的其他属性也可以更新

祝你好运！

# html - 如何防止我的背景重复？

> ID：14669997
> 
> 赞同：0
> 
> 时间：2013-02-03T06:16:19.780
> 
> 标签：html, css

我在 1998 年做了这个[页面](http://web.comhem.se/nrz/)，现在屏幕更宽了，背景会水平重复：

![在此处输入图像描述](../Images/12775758d3a9374a3f0f321902018c97.png)

如何使迷彩条仅在最左侧出现一次，并且最好使灰色扩展到全屏？我必须处理图像还是可以对其进行编码？

我发现改变不是微不足道的，现在我只是使用

`<body bgcolor="#FFFFFF" background="back4.gif" text="#333366" link="#CC0000" alink="#999999" vlink="996666" marginheight=0 marginwidth=0>`

而且背景是一个简单的[文件](http://web.comhem.se/nrz/back4.gif)。

你能帮我解决问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:26:40.490

用于`background-repeat:no-repeat`停止重复你的背景图片，
从这里阅读[链接](https://developer.mozilla.org/en-US/docs/CSS/background-repeat)

**编辑：**
这个链接信息量很大，检查一下[-link2](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T06:51:36.913

我会说做这样的事情

```
html, body{
    height:100%;
}
html{
    background: #777 url("http://i.imgur.com/t9EMKKM.jpg") top left repeat;
}
body{
    background: transparent url("http://i.imgur.com/sWhAr9t.jpg") top left repeat-y;
} 
```

[http://jsfiddle.net/daCrosby/hqZfW/](http://jsfiddle.net/daCrosby/hqZfW/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T06:20:09.587

使用 css 设置背景，如下所示：

```
<style type="text/css">
 body {
  background: url(path/to/back4.gif) no-repeat;

}
</style> 
```

这将修复背景，至于您的其他样式，请阅读一些关于 css 的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T07:49:06.557

```
<body bgcolor="#FFFFFF" style="background: url(http://web.comhem.se/nrz/back4.gif) no-repeat;" 
text="#333366" link="#CC0000" alink="#999999" vlink="996666" marginheight=0 marginwidth=0> 
```

这应该解决它。

# javascript - JQuery 缓慢的窗口加载

> ID：14669999
> 
> 赞同：1
> 
> 时间：2013-02-03T06:16:26.520
> 
> 标签：javascript, jquery, html

所以我现在正在使用谷歌浏览器，我的 html 页面在没有 jquery 源的情况下运行得非常好。我使用下面的 Google API url，但是当我加载我的页面时，加载大约需要 30 秒或更长时间。

```
src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" 
```