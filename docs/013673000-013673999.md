# StackOverflow 问答 13673000-13673999

# c++ - 在 KDevelop 中调试 KDevelop

> ID：13673003
> 
> 赞同：0
> 
> 时间：2012-12-02T19:39:26.350
> 
> 标签：c++, qt, kde, kdevelop, kdevelop4

我正在尝试使用我的系统 KDevelop 安装来调试 KDevelop 项目，我遇到了一个问题，即我的（正在调试的）KDevelop 应用程序不会从本地安装目录中读取插件。取而代之的是，它尝试通过使用此 api 来使用系统插件：

```
KServiceTypeTrader::self() ->query 
```

有没有可能让 KDevelop 从不同的资源读取插件信息，比如说从一个指定的目录？我试图改变代码来做这样的事情：

```
 QDir dir("/home/alekstheod/workspaces/kdevelop/kdevelop/Installation/lib/kde4/plugins/");

QStringList files;
files = dir.entryList(QStringList("*"),
                      QDir::Files | QDir::NoSymLinks);

QStringList newFiles;
for( int i = 0; i < files.size(); i++ )
{
    newFiles.push_back(  dir.path() + "/" + files.at(i) );
}

//QStringList resources  = dirs.findAllResources("lib", "*.so", KStandardDirs::Recursive);
int a = newFiles.size();
std::cout << a << std::endl;
KPluginInfo::List res = KPluginInfo::fromFiles(newFiles);

return res; 
```

但不幸的是它没有帮助我。可能我做错了什么。请帮忙 ：）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:02:26.823

要么删除系统一，只使用本地系统（吃你自己的狗粮：D）

或附加到正在运行的进程。

# wxwidgets - wxWidgets 2.9.4 + Xcode 4.5.2 - 无法正常工作

> ID：13673006
> 
> 赞同：1
> 
> 时间：2012-12-02T19:39:33.180
> 
> 标签：wxwidgets, xcode4.5, osx-mountain-lion

我在尝试使用 wxWidgets 2.9.4 和 Xcode 4.5.2 时遇到了麻烦，我遇到了各种各样的错误。首先，我认为我正确安装了 wxWidgets，因为每个示例和演示都运行良好。问题是当我尝试创建一个 Xcode 项目时。

1.  当我按照 wxWidgets 教程更改构建设置时，如下所示：

    *   将 --cppflags 粘贴到“其他 C++ 标志”中
    *   将 --libs 粘贴到“其他链接器标志”中（删除 -L）
    *   将编译器更改为 GCC 我得到：

    *   > ld：找不到 -lwxregexu-2.9 的库
        > 
        > clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

2.  当我按照[http://zebratale.tumblr.com](http://zebratale.tumblr.com)教程（对我来说似乎更详细）时，我得到：

    > ld：找不到 -lwx_osx_cocoau_xrc-2.9 的库
    > 
    > clang：错误：链接器命令失败，退出 cod 1（使用 -v 查看调用）

我完全迷路了，我会很感激任何帮助

- - - - - - 更新 - - - - - - - - - - - -

我刚刚发现可以使用终端命令编译它：

> g++ -o main main.cpp './../../build-cocoa-debug/wx-config --debug --cxxflags --libs'

所以我猜问题是Xcode正在使用的编译器。但是当我将它更改为 LLMV GCC 4.2 时，我得到了同样的错误（是的，好像它仍在使用 clang）要更改编译器，我去构建设置->构建选项->c/c++/objective-c 的编译器并改变了它。

---------更新2-----------------

即使现在我更改了 Xcode 上的编译器，错误仍然是：

> ld：找不到 -lwx_osx_cocoau_xrc-2.9 的库
> 
> collect2: ld 返回 1 个退出状态
> 
> 命令 /Applications/Xcode.app/Contents/Developer/usr/bin/llvm-g++-4.2 失败，退出代码为 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:22:37.240

首先，使用`--cxxflags`（C++ 编译器标志），而不是`--cppflags`（C 预处理器标志）。

第二，为什么要删除`-L`？当然，如果您删除告诉它它们在哪里的选项，链接器将找不到这些库。

# php - 从php中的数据库中删除确认记录

> ID：13673009
> 
> 赞同：0
> 
> 时间：2012-12-02T19:39:49.817
> 
> 标签：php, database, record

我正在制作一个表格，您可以在其中输入记录名称和代码，以便您可以从数据库“世界”中删除它。

但我不断收到这些错误:(:

> 警告：doblok66() 缺少参数 1，在 C：第 224 行调用并在 C：第 89 行定义 警告：doblok66() 缺少参数 2，在 C：第 224 行调用并在 C：第 89 行定义注意：未定义变量：C 中的landcode：第 92 行 注意：未定义变量：C 中的 taal：第 92 行

这是php代码：

```
<?php
if(isset($_POST['blok66'])) {
    $taaltmp=$_POST ['taal'];
    $landtmp=$_POST ['landcode'];
    doblok66();
}
?>'

function doblok66($taal, $landcode) {
    $link = mysql_connect("localhost","root") ;
    $dbresultaat = mysql_select_db("world") ;
    $sql = "DELETE FROM countrylanguage  WHERE (CountryCode = '".$landcode."' AND Language = '".$taal."' ) AND IsOfficial = 'F' ";
    mysql_query($sql) ;

} 
```

和html代码：

```
<h1> opdracht 6.6 </h1>

<table>
  <form action='blok6.php' method='post'>
    <tr>
      <td> taal: </td> <td> <input type="text" name="taal"></td> 
    </tr>
    <tr>
      <td> landcode: </td> <td> <input type="text" name="landcode"></td> 
    </tr>
    <tr>
      <td>
        <input type="submit" name='blok66' value="Submit">
      </td>
    </tr>
  </form>
</table> 
```

我只是想知道是否有人可以看看并让我知道我哪里出错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T19:43:42.063

您的函数`doblok66()`需要两个参数，但是当您调用它时，您没有给出任何参数。您需要像这样调用函数：

```
doblok66($taaltmp, $landtmp); 
```

问题是您定义了变量，然后调用了一个函数。当 PHP 开始执行函数时，它并不“知道”您之前定义的变量，您需要将这些变量作为参数提供。

更多信息：[PHP 函数参数](http://php.net/manual/en/functions.arguments.php)和[PHP 变量范围](http://php.net/manual/en/language.variables.scope.php)

# python - 我的 Python 方程求解器无法求解分数

> ID：13673012
> 
> 赞同：0
> 
> 时间：2012-12-02T19:40:10.313
> 
> 标签：python, loops, integer, equation

好的，所以我制作了一个求解 x 的小型方程求解器。它适用于整数值，但每当我尝试求解分数时，它都会进入无限循环。这是我的代码：

```
print "Make the variable in your equation stand for x"
print
startingLimit=int(raw_input("What is the lowest estimate that your variable could possibly be?"))
print
wholeNumber=raw_input("Do you know if your variable will be a whole number or a fraction? Answer: yes/no")
if (wholeNumber== "yes"):
    print
    fraction= raw_input("Is it a decimal/fraction? Answer:yes/no")
    if (fraction=="yes"):
        print
        print "This program will only calculate up to the 2nd place to the right of the decimal"
        xfinder=float(0.01)
    else:
        xfinder=int(1)
else:
    xfinder=float(0.01)

leftEquation=raw_input("Enter your left side of the equation:")
print
rightEquation=raw_input("Enter the right side of the equation:")
print
amountSolutions=100

print

#solving

a=0
indivisualCount=0
count=0
x=float(startingLimit)
while (count!=amountSolutions):
    ifstuffleft=eval(leftEquation)
    ifstuffright=eval(rightEquation)
    if (ifstuffleft!=ifstuffright):
        x=float(x+xfinder)
        print x
    else:
        a=(a+1)
        count=count+1
        print "Solution",a,"=",x
        print
        x=float(x+xfinder) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T19:43:04.297

`if (ifstuffleft!=ifstuffright):`应该成为

`if abs(ifstuffleft - ifstuffright) < tolerance:`

`tolerance`你愿意接受的错误在哪里

# php - 使用 PHP 和 mysql 我想允许用户从数组中选择结果

> ID：13673016
> 
> 赞同：2
> 
> 时间：2012-12-02T19:40:40.073
> 
> 标签：php, mysql

我有一个学术参考数据库，它是所有用户都能看到的公共银行的一部分。我想让用户选择他们想要添加到他们自己的列表并在单独的页面上输出的引用之一。

我的目标是使用一个唯一的参考 ID，然后将其链接到一个单独的用户表，当他们转到他们的个人页面时，它会输出他们选择的参考。

到目前为止，我尝试做的是在所有已输出的引用旁边有一个按钮，该按钮链接到一个表单，然后将用户带到一个新页面，该页面执行 INSERT INTO 语句以添加参考 ID与他们的学生 ID 一起作为复合键。

我所拥有的如下（删除了一些字段以简化）：

```
$query = mysql_query("SELECT * FROM references")or die(mysql_error()); 

echo "<table>"; 
echo "<tr>";
echo "<td>Reference ID</td>";
echo "<td>Author</td>";
echo "<td>Save</td>";
echo "</tr>";
 while($refer = mysql_fetch_array( $query )) 
 { 

 echo "<tr>"; 
 echo "<td><form name='addreference' method='post' action='saveref.php'><input type='text' name='referenceid' readonly='readonly' id='refid' value='".$refer['refid'] . "'/></td> ";
 echo "<td>".$refer['author'] . "</td> ";  
 echo "<td><center><input type='submit' name='addref' value='Add'></center></td>"; 
```

在此屏幕上输出正确的参考 ID，但是当我在 saveref.php 上执行 var_dump($_POST) 时，发布的参考 ID 始终是数组中最后一个的参考 ID，无论在参考列表上单击哪个按钮。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:49:58.590

欢迎来到 StackOverflow！

如评论中所述，您应该使用 mysqli 而不是 mysql，因为不推荐使用 mysql。

这是对表单的重写，它允许您发布对 saveref.php 的引用数组。我做了很多改进，包括在您的 HTML 属性上添加双引号（W3 建议），将 thead 和 tbody 添加到您的表格中，并将您的引用放在底部带有单个按钮的复选框中。

```
<form name="addreference" method="post" action="saveref.php">
<table>
    <thead>
        <tr>
            <th>Reference ID</th>
            <th>Author</th>
            <th>Save</th>
        </tr>
   </thead>
   <tbody>
<?php
$sql = "SELECT * FROM references";
$results = mysql_query($sql)
    or die(mysql_error()); 
while ($refer = mysql_fetch_array($results)) { 
    echo <<<HTML
        <tr>
            <td>{$refer['refid']}</td>
            <td>{$refer['author']}</td>  
            <td><input type="checkbox" name="references[]" value="{$refer['refid']}"/></td>
        </tr>
HTML;
}
?>
<button type="submit" name="addref">Add Selected</button>
</form> 
```

您的`saveref.php`文件将如下所示：

```
<?php
$student_id = 1; // This value would get set elsewhere, I presume?
$references = !empty($_POST['references']) ? (array) $_POST['references'] : array();
$cnt = count($references);
if ($cnt) {
    for ($i = 0; $i < $cnt; $i++) {
        $references[$i] = "(" . ((int) $student_id) . ", " . ((int) $references[$i]) . ")";
    }
    $sql = "INSERT INTO references (student_id, reference_id) VALUES ";
    $sql .= implode(", ", $references);
    mysql_query($sql);
} 
```

# c++ - 将子类传递给接受其超类的函数

> ID：13673020
> 
> 赞同：8
> 
> 时间：2012-12-02T19:41:16.613
> 
> 标签：c++, inheritance, parameters, subclass

假设我有三个类 - `Animal`,`Cat`和`Dog`, where`Cat`和`Dog`是子类`Animal`（这听起来确实像第一堂课，但我保证这不是作业，只是简化真实代码）

```
Dog* spike = new Dog(); 
Cat* puss = new Cat();   

int main(int argc, char** argv)
{
    function(spike, puss);
    return 0;
}

void function(Animal *pet, Animal *pet2)
{
   magic->andSoForth();
} 
```

现在这会产生以下错误：

```
Cannot convert parameter 1 from 'Dog *' to 'Animal'
  No constructor could take the source type,
    or constructor overload resolution was ambiguous 
```

将参数更改为完全匹配会产生类似的错误，只是它说它不能从一个类转换为同一个类。

我已经成功地调用了它们从超类继承的子类函数和成员，所以我知道这在逻辑上应该可以工作。我只是不知道这种语言要我扭曲逻辑的扭曲方式。

**编辑**

解决方案恰好是：指针混淆了每个人。

*   声明指针。
*   将指针作为参数发送给不处理指针的函数。

在我的示例中，我将“非指针”发送到需要指针的函数，我只是切换了它。现在它工作正常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T19:47:08.127

当您动态分配一个新对象时，您会得到一个指向该对象的指针。所以你需要将它存储在一个指针中，如下所示：

```
Dog* spike = new Dog();
Cat* puss = new Cat(); 
```

然后，您可以传递`spike`或`puss`类型的任何参数`Animal*`，假设`Dog`并且`Cat`确实继承自`Animal`. 这是 C++ 中多态的基础知识：

> “指向*cv* `D`的指针”类型的纯右值，其中`D`是类类型，可以转换为“指向*cv* `B`的指针”类型的纯右值，其中`B`是 的基类（第 10 条）`D`。

当然，您可以立即将它们存储为`Animal*`：

```
Animal* spike = new Dog();
Animal* puss = new Cat(); 
```

不要忘记`delete`他们。更好的是，根本不要使用`new`：

```
Dog spike;
Cat puss;
void function(const Animal&, const Animal&);
function(spike, puss); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T20:21:16.917

可以*合理*地假设您遇到的问题是将指针分配给非指针，反之亦然。但是您的代码**不是真正的代码**，而且您的错误消息显然**不是真正的错误消息**。所以这都是猜测，特别是那些已经发布的答案说“就是这样”（可能是，但不一定，不确定性完全是你自己的错）。

* * *

编辑：OP 在我发布后 10 秒更改了问题的代码。

该代码仍然不符合声称的错误消息。

我不会追问这个问题，因为它会发生变化。

* * *

现在，至于该怎么做……

* * *

不要使用`new`.

有经验的 C++ 程序员有时会`new`以受控方式使用，并用合适的代码包装。不称职的 C++ 程序员经常`new`理所当然地使用。但总的来说，你不需要它，而且它有问题，所以最好默认不要使用它。

然后，您的程序（您忽略了显示）将如下所示：

```
#include <iostream>

struct Animal {};
struct Dog: Animal {};
struct Cat: Animal {};

void function(Animal const& pet1, Animal const& pet2 )
{
   //magicAndSoForth();
}

int main()
{
    Dog spike; 
    Cat puss;

    function( spike, puss );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T22:25:53.333

你的原型`function`几乎可以肯定地说

```
void function(Animal pet1, Animal pet2); 
```

或与此非常相似的东西。（我知道您有一个原型，因为它`function`出现在`main`.`function`

问题是，你的真实`function`需要指针。而且由于`main`出现在 real 之前`function`，它没有看到。它只看到一个接受实际`Animal`s 的声明，因此它尝试使用它......但失败了，因为 Animal 指针不是 Animal。（由于重载的可能性，与原型的真正`function`不同之处在于 C++。据编译器所知，`function(Animal, Animal)`存在于另一个翻译单元中，您也只是在定义`function(Animal*, Animal*)`。）

查看您的代码以查找 的声明`function`，并说明

```
void function(Animal *pet1, Animal *pet2); 
```

与实际函数的签名相匹配。

**PS：**如果您包含所有相关声明，这将更容易弄清楚。

**PPS：如**[Alf](https://stackoverflow.com/a/13673445/319403)所建议的，一个更好的主意是取而代之。但无论如何，为了做到这一点，您必须首先修复原型不匹配（或使真正的函数出现在使用它的代码之前）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-02T19:45:48.970

嗯，你需要做的是这个

```
Animal *spike = new Dog();
Animal *puss = new Cat(); 
```

基本上，您的所有指针定义都必须是基类，并且可以使用派生类指针进行初始化。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-12-02T20:57:24.380

这就是它应该的样子。

```
Dog* spike = new Dog();
Cat* puss = new Cat();

function(*spike, *puss);

void function(Animal pet, Animal pet2)
{
   //magic
} 
```

测试和工作。

# dart - 如何在 Dart 中动态地将文件输入添加到 FormData？

> ID：13673030
> 
> 赞同：5
> 
> 时间：2012-12-02T19:42:10.873
> 
> 标签：dart

我正在尝试使用 FormData 类通过 HttpRequest.send() 将数据发送到我的服务器。我需要使用多个字段进行 POST 请求。它应该与以下 Javascript 代码相同：

```
//Upload File
var uploadFile = function(file, tag, callback)
{
    var xhr = new XMLHttpRequest();
    xhr.open('POST', "upload/", true);
    xhr.onreadystatechange=function()
    {
        if (xhr.readyState==4 && xhr.status==200)
        {
            callback();
        }
    }
    var formData = new FormData();
    formData.append('file', file);
    formData.append('tag', tag);
    var csrftoken = $.cookie('csrftoken');
    xhr.setRequestHeader("X-CSRFToken", csrftoken);
    xhr.send(formData);
}; 
```

但是 FormData 在 Dart 中的工作方式似乎不同。如果可能的话，有人可以解释如何在 Dart 中做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:44:11.667

不幸的是，这看起来是一个错误。我已经打开问题[http://code.google.com/p/dart/issues/detail?id=7152](http://code.google.com/p/dart/issues/detail?id=7152)进行跟踪。感谢您的用例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-24T08:22:43.400

您必须使用[FormData.appendBlob](https://api.dartlang.org/apidocs/channels/stable/#dart-dom-html.FormData@id_appendBlob)：

```
void uploadFile(File file, String tag, callback) {
  final xhr = new HttpRequest();
  xhr.open('POST', "upload/", true);
  xhr.on.readyStateChange.add((e) {
    if (xhr.readyState == 4 && xhr.status == 200) {
      callback();
    }
  });
  final formData = new FormData();
  formData.appendBlob('file', file);
  formData.append('tag', tag);
  xhr.send(formData);
}; 
```

# objective-c - 线程 1：信号 SIGABRT - 尝试获取 NSMutableString 时

> ID：13673033
> 
> 赞同：0
> 
> 时间：2012-12-02T19:42:27.880
> 
> 标签：objective-c, macos, nsmutablestring

这是我的代码：

。H

```
NSMutableString *buffer, *tmpBuffer;
int status; // 0=waiting for <DMX>, 1=recording 
```

.m

```
 - (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    buffer = [[NSMutableString alloc] init];
    tmpBuffer = [[NSMutableString alloc] init];
    status = 0;
}

- (void) receivedData:(NSString *)data {

        // status=0 means we are still looking for start tag
        if(status == 0) {
            // add new data to last examined chunk (if any)
            [tmpBuffer appendString:data];

            // try to locate the open tag inside the tmpBuffer
            NSRange range = [tmpBuffer rangeOfString:@"<DMX>" options:NSCaseInsensitiveSearch];

            // if found, store the portion after the start tag into buffer
            if(range.location != NSNotFound) {
                range.length = [tmpBuffer length] - range.location + 5; // 5 is length of start tag...
                [buffer setString:[tmpBuffer substringWithRange:range]];
                status = 1; // set status to 1 so we know recording started
            } else {
                // store last examined chunk
                [tmpBuffer setString:data];
            }
        } else {
            [buffer appendString:data];
            NSRange range = [buffer rangeOfString:@"</DMX>" options:NSCaseInsensitiveSearch];
            if(range.location != NSNotFound) {
                range.length = [buffer length] - range.location;

                [self fullDMXReceived:buffer];

                [buffer deleteCharactersInRange:range];
                status = 0;
            }
        }
    }

    - (void) fullDMXReceived:(NSString*)finalData {
        NSRunAlertPanel(@"", finalData, @"", @"", @"");
    } 
```

这是错误：

```
2012-12-02 14:39:00.356 Chatty Mac[1805:303] *** Assertion failure in -[NSTextFieldCell _objectValue:forString:errorDescription:], /SourceCache/AppKit/AppKit-1187.34/AppKit.subproj/NSCell.m:1532
2012-12-02 14:39:00.362 Chatty Mac[1805:303] An uncaught exception was raised
2012-12-02 14:39:00.367 Chatty Mac[1805:303] Invalid parameter not satisfying: aString != nil
2012-12-02 14:39:00.374 Chatty Mac[1805:303] (
    0   CoreFoundation                      0x00007fff93e350a6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff8f52e3f0 objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff93e34ee8 +[NSException raise:format:arguments:] + 104
    3   Foundation                          0x00007fff933fe6a2 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 189
    4   AppKit                              0x00007fff92660205 -[NSCell _objectValue:forString:errorDescription:] + 159
    5   AppKit                              0x00007fff9266015f -[NSCell _objectValue:forString:] + 20
    6   AppKit                              0x00007fff926600db -[NSCell setStringValue:] + 39
    7   AppKit                              0x00007fff926f43fc -[NSControl setStringValue:] + 138
    8   AppKit                              0x00007fff928c2ba8 -[NSAlert buildAlertStyle:title:formattedMsg:first:second:third:oldStyle:] + 7479
    9   AppKit                              0x00007fff928c478b _NXDoLocalRunAlertPanel + 343
    10  AppKit                              0x00007fff928c461c NSRunAlertPanel + 157
    11  Chatty Mac                          0x00000001000070bd -[AppDelegate fullDMXReceived:] + 61
    12  Chatty Mac                          0x0000000100007036 -[AppDelegate receivedData:] + 582
    13  Chatty Mac                          0x000000010000e751 -[ORSSerialPortDemoController serialPort:didReceiveData:] + 401
    14  Chatty Mac                          0x000000010000a6fa -[ORSSerialPort receiveData:] + 170
    15  Chatty Mac                          0x0000000100009676 __block_global_1 + 38
    16  libdispatch.dylib                   0x00007fff9637bf01 _dispatch_call_block_and_release + 15
    17  libdispatch.dylib                   0x00007fff963780b6 _dispatch_client_callout + 8
    18  libdispatch.dylib                   0x00007fff9637d0c8 _dispatch_main_queue_callback_4CF + 275
    19  CoreFoundation                      0x00007fff93dd70fe __CFRunLoopRun + 1614
    20  CoreFoundation                      0x00007fff93dd66b2 CFRunLoopRunSpecific + 290
    21  HIToolbox                           0x00007fff949130a4 RunCurrentEventLoopInMode + 209
    22  HIToolbox                           0x00007fff94912e42 ReceiveNextEventCommon + 356
    23  HIToolbox                           0x00007fff94912cd3 BlockUntilNextEventMatchingListInMode + 62
    24  AppKit                              0x00007fff92682613 _DPSNextEvent + 685
    25  AppKit                              0x00007fff92681ed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
    26  AppKit                              0x00007fff92679283 -[NSApplication run] + 517
    27  AppKit                              0x00007fff9261dcb6 NSApplicationMain + 869
    28  Chatty Mac                          0x00000001000056d2 main + 34
    29  Chatty Mac                          0x0000000100001da4 start + 52
    30  ???                                 0x0000000000000003 0x0 + 3
)
2012-12-02 14:39:00.475 Chatty Mac[1805:303] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid parameter not satisfying: aString != nil'
*** First throw call stack:
(
    0   CoreFoundation                      0x00007fff93e350a6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff8f52e3f0 objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff93e34ee8 +[NSException raise:format:arguments:] + 104
    3   Foundation                          0x00007fff933fe6a2 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 189
    4   AppKit                              0x00007fff92660205 -[NSCell _objectValue:forString:errorDescription:] + 159
    5   AppKit                              0x00007fff9266015f -[NSCell _objectValue:forString:] + 20
    6   AppKit                              0x00007fff926600db -[NSCell setStringValue:] + 39
    7   AppKit                              0x00007fff926f43fc -[NSControl setStringValue:] + 138
    8   AppKit                              0x00007fff928c2ba8 -[NSAlert buildAlertStyle:title:formattedMsg:first:second:third:oldStyle:] + 7479
    9   AppKit                              0x00007fff928c478b _NXDoLocalRunAlertPanel + 343
    10  AppKit                              0x00007fff928c461c NSRunAlertPanel + 157
    11  Chatty Mac                          0x00000001000070bd -[AppDelegate fullDMXReceived:] + 61
    12  Chatty Mac                          0x0000000100007036 -[AppDelegate receivedData:] + 582
    13  Chatty Mac                          0x000000010000e751 -[ORSSerialPortDemoController serialPort:didReceiveData:] + 401
    14  Chatty Mac                          0x000000010000a6fa -[ORSSerialPort receiveData:] + 170
    15  Chatty Mac                          0x0000000100009676 __block_global_1 + 38
    16  libdispatch.dylib                   0x00007fff9637bf01 _dispatch_call_block_and_release + 15
    17  libdispatch.dylib                   0x00007fff963780b6 _dispatch_client_callout + 8
    18  libdispatch.dylib                   0x00007fff9637d0c8 _dispatch_main_queue_callback_4CF + 275
    19  CoreFoundation                      0x00007fff93dd70fe __CFRunLoopRun + 1614
    20  CoreFoundation                      0x00007fff93dd66b2 CFRunLoopRunSpecific + 290
    21  HIToolbox                           0x00007fff949130a4 RunCurrentEventLoopInMode + 209
    22  HIToolbox                           0x00007fff94912e42 ReceiveNextEventCommon + 356
    23  HIToolbox                           0x00007fff94912cd3 BlockUntilNextEventMatchingListInMode + 62
    24  AppKit                              0x00007fff92682613 _DPSNextEvent + 685
    25  AppKit                              0x00007fff92681ed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
    26  AppKit                              0x00007fff92679283 -[NSApplication run] + 517
    27  AppKit                              0x00007fff9261dcb6 NSApplicationMain + 869
    28  Chatty Mac                          0x00000001000056d2 main + 34
    29  Chatty Mac                          0x0000000100001da4 start + 52
    30  ???                                 0x0000000000000003 0x0 + 3
)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

它发生在 [self fullDMXReceived:buffer]; 被调用是因为当我删除它时，它不会崩溃。

这里发生了什么事？任何人都可以解码这个错误吗？

仅供参考，我正在从另一个类中调用 receivedData，如下所示： AppDelegate *theAppDelegate = [[AppDelegate alloc] init]; [AppDelegate 收到的数据：字符串]；这会是个问题吗？

当我运行 AppDelegate *theAppDelegate = (AppDelegate *)[[NSApplication sharedApplication] delegate];

我收到此错误消息：

```
2012-12-03 06:00:12.791 Chatty Mac[1580:303] An uncaught exception was raised
2012-12-03 06:00:12.793 Chatty Mac[1580:303] -[__NSCFString substringWithRange:]: Range or index out of bounds
2012-12-03 06:00:12.797 Chatty Mac[1580:303] (
0   CoreFoundation                      0x00007fff8d0ee0a6 __exceptionPreprocess + 198
1   libobjc.A.dylib                     0x00007fff887e73f0 objc_exception_throw + 43
2   CoreFoundation                      0x00007fff8d0ede7c +[NSException raise:format:] + 204
3   CoreFoundation                      0x00007fff8d0c555d -[__NSCFString substringWithRange:] + 109
4   Chatty Mac                          0x0000000100006ecb -[AppDelegate receivedData:] + 283
5   Chatty Mac                          0x000000010000e772 -[ORSSerialPortDemoController serialPort:didReceiveData:] + 466
6   Chatty Mac                          0x000000010000a6ba -[ORSSerialPort receiveData:] + 170
7   Chatty Mac                          0x0000000100009636 __block_global_1 + 38
8   libdispatch.dylib                   0x00007fff8f634f01 _dispatch_call_block_and_release + 15
9   libdispatch.dylib                   0x00007fff8f6310b6 _dispatch_client_callout + 8
10  libdispatch.dylib                   0x00007fff8f6360c8 _dispatch_main_queue_callback_4CF + 275
11  CoreFoundation                      0x00007fff8d0900fe __CFRunLoopRun + 1614
12  CoreFoundation                      0x00007fff8d08f6b2 CFRunLoopRunSpecific + 290
13  HIToolbox                           0x00007fff8dbcc0a4 RunCurrentEventLoopInMode + 209
14  HIToolbox                           0x00007fff8dbcbe42 ReceiveNextEventCommon + 356
15  HIToolbox                           0x00007fff8dbcbcd3 BlockUntilNextEventMatchingListInMode + 62
16  AppKit                              0x00007fff8b93b613 _DPSNextEvent + 685
17  AppKit                              0x00007fff8b93aed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
18  AppKit                              0x00007fff8b932283 -[NSApplication run] + 517
19  AppKit                              0x00007fff8b8d6cb6 NSApplicationMain + 869
20  Chatty Mac                          0x0000000100005692 main + 34
21  Chatty Mac                          0x0000000100001d64 start + 52
22  ???                                 0x0000000000000003 0x0 + 3
)
2012-12-03 06:00:12.799 Chatty Mac[1580:303] *** Terminating app due to uncaught exception 'NSRangeException', reason: '-[__NSCFString substringWithRange:]: Range or index out of bounds'
*** First throw call stack:
(
0   CoreFoundation                      0x00007fff8d0ee0a6 __exceptionPreprocess + 198
1   libobjc.A.dylib                     0x00007fff887e73f0 objc_exception_throw + 43
2   CoreFoundation                      0x00007fff8d0ede7c +[NSException raise:format:] + 204
3   CoreFoundation                      0x00007fff8d0c555d -[__NSCFString substringWithRange:] + 109
4   Chatty Mac                          0x0000000100006ecb -[AppDelegate receivedData:] + 283
5   Chatty Mac                          0x000000010000e772 -[ORSSerialPortDemoController serialPort:didReceiveData:] + 466
6   Chatty Mac                          0x000000010000a6ba -[ORSSerialPort receiveData:] + 170
7   Chatty Mac                          0x0000000100009636 __block_global_1 + 38
8   libdispatch.dylib                   0x00007fff8f634f01 _dispatch_call_block_and_release + 15
9   libdispatch.dylib                   0x00007fff8f6310b6 _dispatch_client_callout + 8
10  libdispatch.dylib                   0x00007fff8f6360c8 _dispatch_main_queue_callback_4CF + 275
11  CoreFoundation                      0x00007fff8d0900fe __CFRunLoopRun + 1614
12  CoreFoundation                      0x00007fff8d08f6b2 CFRunLoopRunSpecific + 290
13  HIToolbox                           0x00007fff8dbcc0a4 RunCurrentEventLoopInMode + 209
14  HIToolbox                           0x00007fff8dbcbe42 ReceiveNextEventCommon + 356
15  HIToolbox                           0x00007fff8dbcbcd3 BlockUntilNextEventMatchingListInMode + 62
16  AppKit                              0x00007fff8b93b613 _DPSNextEvent + 685
17  AppKit                              0x00007fff8b93aed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
18  AppKit                              0x00007fff8b932283 -[NSApplication run] + 517
19  AppKit                              0x00007fff8b8d6cb6 NSApplicationMain + 869
20  Chatty Mac                          0x0000000100005692 main + 34
21  Chatty Mac                          0x0000000100001d64 start + 52
22  ???                                 0x0000000000000003 0x0 + 3
)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T01:56:49.053

在评论中，你说：

```
AppDelegate *theAppDelegate = [[AppDelegate alloc] init];
[theAppDelegate receivedData:string]; 
```

这会创建一个**新** `AppDelegate`对象，这意味着该`applicationDidFinishLaunching`方法没有被调用（它已经在第一个`AppDelegate`实例中被调用）。改用原来的。

```
AppDelegate *theAppDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

# mysql - 如何将小时转换为天 - MYSQL

> ID：13673039
> 
> 赞同：1
> 
> 时间：2012-12-02T19:42:55.853
> 
> 标签：mysql

如果我有开始时间和结束时间，并且我正在找到总时间，如果超过 24 小时，我希望它而不是显示 26，显示 1 天和 2 小时。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:47:30.710

你可能想做一个

```
IF    (MOD(HOUR(TIME) / 24) )  > 24, 
    SELECT CONCAT(
    FLOOR(HOUR(TIME) / 24), ' days ',
    MOD(HOUR(TIME), 24), ' hours ',
    MINUTE(TIME), ' minutes')
) 
```

与`Timediff`,

```
FLOOR(HOUR(TIMEDIFF('2010-01-06 08:46', '2010-01-01 12:30')) / 24), ' days ', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:47:42.127

如果您的`start_time`和`end_time`是日期时间类型，则使用[**TIMEDIFF**](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff) 函数并应用所需的 DATE_FORMAT。

例如

```
select DATE_FORMAT(TIMEDIFF('2012:01:01 00:00:00', '2012:01:01 00:00:00.000001'),
                  '%d: %H: %m'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-28T21:21:45.820

这对我有用：

```
select
   o.id,
   o.created,
   o.complete_date,
   concat(timestampdiff(day, o.created, o.complete_date),
          'd ',
          lpad(
             mod(timestampdiff(hour, o.created, o.complete_date), 24),
             2, '0'),
          'h'
   ) as time_to_complete,
from
   orders o
; 
```

结果：

```
+---------+---------------------+---------------------+------------------+
| id      | created             | complete_date       | time_to_complete |
+---------+---------------------+---------------------+------------------+
| 2393721 | 2018-02-20 00:01:44 | 2018-02-21 02:32:08 | 1d 02h           |
| 2393722 | 2018-02-20 00:02:56 | 2018-02-21 00:32:08 | 1d 00h           |
| 2393723 | 2018-02-20 00:04:12 | 2018-02-20 21:32:07 | 0d 21h           |
| 2393724 | 2018-02-20 00:04:50 | 2018-02-20 23:47:05 | 0d 23h           |
| 2393725 | 2018-02-20 00:07:07 | 2018-02-20 17:32:03 | 0d 17h           |
| 2393726 | 2018-02-20 00:13:41 | 2018-02-21 00:32:08 | 1d 00h           |
| 2393727 | 2018-02-20 00:14:25 | 2018-02-21 00:32:08 | 1d 00h           |
| 2393728 | 2018-02-20 00:16:47 | 2018-02-20 23:32:04 | 0d 23h           |
| 2393729 | 2018-02-20 00:17:19 | 2018-02-20 23:47:09 | 0d 23h           |
| 2393730 | 2018-02-20 00:17:59 | 2018-02-21 01:32:08 | 1d 01h           |
+---------+---------------------+---------------------+------------------+ 
```

# java - 如何在 iText 中重置段落

> ID：13673040
> 
> 赞同：0
> 
> 时间：2012-12-02T19:42:57.900
> 
> 标签：java, pdf, itext

我正在使用[iText](http://itextpdf.com)在 java 中创建 pdf 一切似乎都按照我的想法工作，除了当我使用循环时，我正在使用的段落似乎包含我存储在其中的所有数据。更清楚一点，这就是我想要做的：

```
PdfPTable table = new PdfPTable();

for(int k=0; k < 3; k++){

Paragraph leftPar = new Paragraph();

leftPar.add(new Paragraph("\n List Object " + k, topicFont));

table_cell = new PdfPCell(leftPar)
table.addCell(table_cell);    
} 
```

我想要的表的输出是：

```
List Object 0
-------------
List Object 1
-------------
List Object 2 
```

但我得到的输出是：

```
List Object 0
-------------
List Object 0
List Object 1
-------------
List Object 0
List Object 1
List Object 2
------------- 
```

我必须将信息放在不同的单元格中，所以我的问题是我认为当我声明 leftpar = new 段落时，它会创建它的一个新实例，但它似乎保留了我添加的其他内容。我什至试过 leftPar = null; 然后leftpar =新段落，仍然没有？有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T17:55:02.657

答案是表格本身保留了所有其他信息。所以我不得不使用方法 flushContent(); 在循环结束时，将表格添加到文档后。

```
table.flushContent(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:46:03.887

[尝试类似这里](http://api.itextpdf.com/itext/com/itextpdf/text/Paragraph.html)提到的东西：

```
Paragraph p = new Paragraph("This is a paragraph",
               FontFactory.getFont(FontFactory.HELVETICA, 18, Font.BOLDITALIC, new Color(0, 0, 255))); 
```

在你的情况下，也许这会做：

```
Paragraph leftPar = new Paragraph("\n List Object " + k, topicFont); 
```

# javascript - 使用 setTimeout 一次显示一张图像

> ID：13673041
> 
> 赞同：-1
> 
> 时间：2012-12-02T19:43:03.183
> 
> 标签：javascript, timer, hide, delay, show

我正在使用带有淡入和淡出的悬停功能来显示和隐藏图像。问题是我希望每个图像在另一个开始淡入之前完成淡入淡出。

这就是我正在尝试的。setTimeout 函数破坏了悬停功能，并且在页面加载时显示所有图像。

```
 $(document).ready(function() {
  var delay = 0;

  //Everything below repeats for each image 

  $("#image_e_natural_minor").hide();

  $("#hover_e_natural_minor").hover(
      if (delay == 1) {
      setTimeout(function() {
      function () {
        $("#image_e_natural_minor").fadeIn(1000);
      }, //mouse over
      function () {
        $("#image_e_natural_minor").fadeOut(1000);
        delay = 0;
      } //mouse out
    );  //hover close
    },1000); // delay time
  }
  else {
  $("#hover_e_natural_minor").hover(
    function () {
      delay = 1;
      $("#image_e_natural_minor").fadeIn(1000);
    }, //mouse over
    function () {
      $("#image_e_natural_minor").fadeOut(1000);
      delay = 0;
    } //mouse out
    );  //hover close
  } 
```

这是我之前的作品，但它会一次显示两个图像。

```
 $("#image_e_natural_minor").hide();
  $("#hover_e_natural_minor").hover(
    function () {
      $("#image_e_natural_minor").fadeIn(1000);
    }, //mouse over
    function () {
      $("#image_e_natural_minor").fadeOut(1000);
    } //mouse out
    );  //hover close

  $("#image_e_harmonic_minor").hide();
  $("#hover_e_harmonic_minor").hover(
    function () {
          $("#image_e_harmonic_minor").fadeIn(1000);
    }, //mouse over
    function () {
      $("#image_e_harmonic_minor").fadeOut(1000);
    } //mouse out
    ); //hover close 
```

抱歉语法不好。我对编程很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:29:44.390

jQuery 函数[fadeIn](http://api.jquery.com/fadeIn/)和[fadeOut](http://api.jquery.com/fadeOut/)都有一个回调参数，在动画结束时触发，所以你可以在动画结束时挂钩`fadeIn`for current image 调用`fadeOut`。

**但是：**首先在单个图像上尝试这个；一旦你让它工作，尝试在一个函数中重写它，你可以调用每个图像。记住 DRY 原则：不要重复自己。

编辑：我的意思是：当将鼠标悬停在图像 A“悬停检测器”上时，该函数应首先淡出当前可见的图像 B（您可以使用`:visible`jQuery 选择器获得），当淡出动画完成时，它将调用淡入图像 A（您提供的抛出回调参数）：

```
$("#image_e_natural_minor").hide();
$("#hover_e_natural_minor").hover(
    function () {
        $(".myImageClass:visible").fadeOut(1000, function(){$("#image_e_natural_minor").fadeIn(1000)});
    }, //mouse over
    function () {
        $("#image_e_natural_minor").fadeOut(1000);
    } //mouse out
);  //hover close 
```

**再次**：尝试使用单个图像，然后重写它，使其看起来像：

```
$("#image_e_natural_minor").hide();
$("#hover_e_natural_minor").hover(
    function(){showThis('#image_e_natural_minor')}, //mouse over
    function(){hideThis('#image_e_natural_minor')} //mouse out
);  //hover close 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:29:57.297

我认为你需要的是这样的[东西](http://jsfiddle.net/Z2Scm/28/)。（在此示例中，您还需要将悬停图像设置为 class='hoverI'。）

```
var delayF = false,
    mouseOn = null;
function setHandlers() {
    $(".hoverI").hover(function() {
        mouseOn = $('#' + event.target.id.replace('hover_e', 'image_e'));
        if (!delayF) {
            mouseOn.fadeIn(1000);
            mouseOn = null;
        }
    }, function() {
        var image = $('#' + event.target.id.replace('hover_e', 'image_e'));
        if (mouseOn == image) mouseOn = null;
        delayF = true;
        image.fadeOut(1000, function() {
            delayF = false;
            if (mouseOn) {
                mouseOn.fadeIn(1000);
                mouseOn = null;
            }
        });
    });
}
$("#image_e_natural_minor").hide();
$("#image_e_harmonic_minor").hide();
setHandlers();​ 
```

# c - 如果我有一个二进制数 1111111111111111 并且英特尔处理器使用的存储格式是 32 位，那么浮点数的值是多少？

> ID：13673045
> 
> 赞同：-1
> 
> 时间：2012-12-02T19:43:17.397
> 
> 标签：c, memory, processor

我必须用浮点数表示二进制数。我有一个十六进制数作为 FFFF，当我将此十六进制数转换为二进制时，我得到相应的二进制数为 1111111111111111。我的英特尔处理器使用的存储格式是 32 位，意味着 1 位用于符号，8 位用于指数, 尾数为 23 位。我有一些想法，但很困惑。谁能帮我看看这个二进制数对应的浮点值是多少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T19:47:58.780

# 32 个

简单地尝试一下：

```
#include <stdio.h>

int main() {
  union {
    unsigned i;
    float f;
  } u;
  u.i = 0xffffffff;
  printf("%f\n", u.f);
  return 0;
} 
```

打印`-nan`。该实验假设您实际上`0xffffffff`不想要`0xffff`您的问题所述。

查看[http://en.wikipedia.org/wiki/Single_precision](http://en.wikipedia.org/wiki/Single_precision)，您会发现指数`0xFF`与非零有效数一起被视为 NaN。

# 16 个

如果您真的只是在追求`0xFFFF`，正如您的问题所写，那么代码将打印`0.000000`，但将更`%f`改为`%g`您得到`9.18341e-41`。这是因为整数和浮点数都使用相同的字节序，即您正在谈论对应于位模式的浮点数`0x0000ffff`。

在那里你看到你现在将有零符号（即正数）、零指数和一个非零有效数。根据同一篇维基百科文章，这代表了一个[低于正常的数字](http://en.wikipedia.org/wiki/Subnormal_numbers)。所以这实际上是 0xffff ∙ 2 ^(−149) = 65535 ∙ 2 ^(−149)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T19:48:53.707

假设 IEEE-754 32 位浮点数，`0xFFFFFFFF`（所以 32 个）：

第一个是符号，所以它是一个负浮点数。然后是指数，因为它是最大值，所以它是一个“特殊”指数。

因为有效数不为零，所以结果是`NaN`。

资料来源：[维基百科](http://en.wikipedia.org/wiki/Single_precision_floating-point_format#Exponent_encoding)。

如果你只想要 16 个，那么：

~~假设剩余位为零并且我们使用的是小端序，我们将有 `0xFFFF0000`。这仍然不足以使有效数字为零，因此结果仍然是 `NaN`。事实上，无论您为最后 16 位选择哪个值，结果都将始终为“NaN”。~~

显然，MvG 所证明的情况并非如此。

假设剩余位为零，则输入为`0x0000FFFF`。第一位是符号，它是零。所以我们有一个正浮动。
然后我们有 8 位的指数。由于它们都为零，我们将（取决于分数）为零或次正规数。
因为分数不是全零，所以这个浮点数是次正规数。
此时，我们已经检查了 9 位，所以还有 7 个额外的零。
分数由 7 个零组成，后跟 16 个 1，因此有效位是 (in binary) `0.00000001111111111111111`。乘以，`2e-126`你就会得到答案。
结果显然是`9.18341e-41`.

# iphone - 获取特定地理位置的时间

> ID：13673046
> 
> 赞同：0
> 
> 时间：2012-12-02T19:43:33.563
> 
> 标签：iphone, ios, sdk, geolocation, timezone

我有一个位置的经纬度，想知道那个位置是白天还是晚上，或者至少知道那里的时间。

有没有办法在不使用 Web 服务的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:50:43.620

[在http://williams.best.vwh.net/sunrise_sunset_algorithm.htm](http://williams.best.vwh.net/sunrise_sunset_algorithm.htm)有关于如何计算日出和日落时间的说明

这会产生 UTC 的结果。电话知道当前的 UTC 时间。因此，您可以计算出太阳是否已经落山，以及多久之前，在您想要的位置。

# objective-c - 延迟触发一个又一个动画

> ID：13673049
> 
> 赞同：1
> 
> 时间：2012-12-02T19:43:53.110
> 
> 标签：objective-c, ios, xcode, animation

我有两个同时淡入显示的对象，最初设置为`hidden`，我想在第一个动画后几秒钟触发第二个动画，但它们同时淡入？

```
_text.alpha = 0;

_text.hidden = NO;

[UIView animateWithDuration:1.9 animations:^{
   _text.alpha = 1;

}];

////////////second animation

_note.alpha = 0;

_note.hidden = NO;

[UIView setAnimationDelay:2.0];

[UIView animateWithDuration:1.9 animations:^{
    _note.alpha = 1;

}]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T19:52:53.163

尝试这个：

```
[UIView animateWithDuration:1.9 animations:^{
    _text.alpha = 1;    
} completion:^(BOOL finished) {

    [UIView animateWithDuration:1.9 animations:^{
       _note.alpha = 1;
    }];

}]; 
```

当第一个动画结束时，第二个块被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T19:52:28.240

使用[苹果文档](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/animateWithDuration%3aanimations%3acompletion%3a)`animateWithDuration:animations:completion:`中描述的方法。将第二个动画放入第一个动画的完成块中。

# android - 将新项目添加到列表视图的开头，并保持滚动位置

> ID：13673054
> 
> 赞同：3
> 
> 时间：2012-12-02T19:44:26.620
> 
> 标签：android, listview, android-listview, listviewitem, listview-adapter

我有以下情况，我找不到解决方案。我有一个项目的列表视图，现在，当用户向上滚动列表视图时，我想在列表视图的开头加载越来越多的项目，这样用户将永远不会到达列表视图的头部（顶部） ，然后继续滚动。

问题是，在我将项目添加到列表后，我在 listView 中出现了一点差距\跳跃 - 所有项目都在向上移动一点，而不是保持它们应该**在尖叫声中的位置。**

例子：

listView 索引是：

0

1

2

3

4 <- 第一个可见项目

5

6

7

8 <- 最后一个可见项目

9

10

现在，假设用户向上滚动并到达第 3 项，在这种情况下，我将在 listView 的开头添加项目：

例子：

0-7 是新项目

0

1

2

3

4

5

6

7

8 <- 9 之前的“3”项

10

11

12

13

14

15

我不会让用户意识到 listView 变大了，所以我试图操纵 listView 的位置和偏移量，使当前显示的 listViews 项目不会移动。

```
int position = listView.getFirstVisiblePosition();
listView.setSelectionFromTop(position + NUM_OF_NEW_ITEMS, 0); 
```

这就是我到达显示的最顶部视图的开头的方式，但是如果视图没有在屏幕上显示interlay - 我会在该项目的偏移大小上得到一个跳跃（之间的距离该项目的开头和屏幕上 listView 外观的开头）

有人知道如何解决吗？也许以某种方式使用滚动器位置或将偏移大小添加到列表视图当前位置？

我希望我很清楚谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:35:02.400

看起来您正在寻找一个动态加载的列表视图，具有特定的加载首选项，有几个类似的库`EndlessAdapter`：[https ://github.com/commonsguy/cwac-endless](https://github.com/commonsguy/cwac-endless)

或者，如果您只想要一些代码，您可以自己修改：http: [//p-xr.com/android-tutorial-dynamicaly-load-more-items-to-the-listview-never-ending-list/](http://p-xr.com/android-tutorial-dynamicaly-load-more-items-to-the-listview-never-ending-list/)

# redis - 在 Redis 中找到最大对象的最简单方法是什么？

> ID：13673058
> 
> 赞同：51
> 
> 时间：2012-12-02T19:44:42.123
> 
> 标签：redis

我在生产中有一个 20GB+ 的 rdb 转储。我怀疑有一组特定的键使其膨胀。我希望有一种方法可以始终从静态转储分析中发现前 100 个最大的对象，或者将其询问给服务器本身，顺便说一下，服务器本身有超过 7M 的对象。

像 rdbtools 这样的转储分析工具在这个（我认为）非常常见的用例中没有帮助！

我正在考虑编写一个脚本并使用“redis-cli 调试对象”迭代整个键集，但我觉得一定有一些我缺少的工具。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2015-01-08T00:34:18.843

redis-cli 添加了一个选项：`redis-cli --bigkeys`

基于[https://gist.github.com/michael-grunder/9257326的示例输出](https://gist.github.com/michael-grunder/9257326)

```
$ ./redis-cli --bigkeys

# Press ctrl+c when you have had enough of it... :)
# You can use -i 0.1 to sleep 0.1 sec every 100 sampled keys
# in order to reduce server load (usually not needed).

Biggest string so far: day:uv:483:1201737600, size: 2
Biggest string so far: day:pv:2013:1315267200, size: 3
Biggest string so far: day:pv:3:1290297600, size: 5
Biggest zset so far: day:topref:2734:1289433600, size: 3
Biggest zset so far: day:topkw:2236:1318723200, size: 7
Biggest zset so far: day:topref:651:1320364800, size: 20
Biggest string so far: uid:3467:auth, size: 32
Biggest set so far: uid:3029:allowed, size: 1
Biggest list so far: last:175, size: 51

-------- summary -------

Sampled 329 keys in the keyspace!
Total key length in bytes is 15172 (avg len 46.12)

Biggest   list found 'day:uv:483:1201737600' has 5235597 items
Biggest    set found 'day:uvx:555:1201737600' has 47 members
Biggest   hash found 'day:uvy:131:1201737600' has 2888 fields
Biggest   zset found 'day:uvz:777:1201737600' has 1000 members

0 strings with 0 bytes (00.00% of keys, avg size 0.00)
19 lists with 5236744 items (05.78% of keys, avg size 275618.11)
50 sets with 112 members (15.20% of keys, avg size 2.24)
250 hashs with 6915 fields (75.99% of keys, avg size 27.66)
10 zsets with 1294 members (03.04% of keys, avg size 129.40) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T10:44:24.583

[redis-rdb-tools](https://github.com/sripathikrishnan/redis-rdb-tools#generate-memory-report)确实有一个内存报告，可以完全满足您的需求。它会生成一个 CSV 文件，其中包含每个键使用的内存。然后，您可以对其进行排序并找到前 x 个键。

还有一个实验性的内存分析器可以开始做你需要的事情。它尚未完成，因此没有记录。但是你可以试试 - [https://github.com/sripathikrishnan/redis-rdb-tools/tree/master/rdbtools/cli](https://github.com/sripathikrishnan/redis-rdb-tools/tree/master/rdbtools/cli)。当然，我也鼓励你做出贡献！

免责声明：我是这个工具的作者。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-03T03:10:28.067

我对 bash 脚本很陌生。我提出了这个：

```
for line in $(redis-cli keys '*' | awk '{print $1}'); do echo `redis-cli DEBUG OBJECT $line | awk '{print $5}' | sed 's/serializedlength://g'` $line; done; | sort -h 
```

这个脚本

*   列出所有键`redis-cli keys "*"`
*   获取大小`redis-cli DEBUG OBJECT`
*   根据前面加上大小的名称对脚本进行排序

这可能非常慢，因为 bash 循环遍历每个 redis 键。您有 7m 个密钥，您可能需要将密钥的输出缓存到文件中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-18T22:05:00.987

如果您有遵循这种模式“A:B”或“A:B:*”的键，我编写了一个工具来分析现有内容以及诸如命中率、获取/设置数、网络流量等内容的监视器，寿命等。输出类似于下面的输出。

[https://github.com/alexdicianu/redis_toolkit](https://github.com/alexdicianu/redis_toolkit)

```
$ ./redis-toolkit report -type memory -name NAME
+----------------------------------------+----------+-----------+----------+
|                     KEY                | NR  KEYS | SIZE (MB) | SIZE (%) |
+----------------------------------------+----------+-----------+----------+
| posts:*                                |      500 |      0.56 |     2.79 |
| post_meta:*                            |      440 |     18.48 |    92.78 |
| terms:*                                |      192 |      0.12 |     0.63 |
| options:*                              |      109 |      0.52 |     2.59 | 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-11T11:03:03.760

试试[redis-memory-analyzer](https://github.com/gamenet/redis-memory-analyzer) - 一个实时扫描 Redis 键空间并按键模式聚合内存使用统计的控制台工具。您可以在生产服务器上使用此工具而无需维护。它向您显示有关 Redis 服务中每个键模式的详细统计信息。

您还可以按所有或选定的 Redis 类型扫描 Redis 数据库，例如“string”、“hash”、“list”、“set”、“zset”。还支持匹配模式。

RMA 还尝试通过模式识别键名，例如，如果您有像“user:100”和“user:101”这样的键，应用程序会在输出中挑选出常见的模式“user:*”，这样您就可以在你的实例。

# python - 按长度将字符串拆分为字符串？

> ID：13673060
> 
> 赞同：63
> 
> 时间：2012-12-02T19:45:01.017
> 
> 标签：python

有没有办法在不知道字符串长度的情况下将一个字符长的`4*x`字符串切成4个字符串，每个字符长？`x`

例如：

```
>>>x = "qwertyui"
>>>split(x, one, two, three, four)
>>>two
'er' 
```

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-12-02T19:51:30.943

```
>>> x = "qwertyui"
>>> chunks, chunk_size = len(x), len(x)/4
>>> [ x[i:i+chunk_size] for i in range(0, chunks, chunk_size) ]
['qw', 'er', 'ty', 'ui'] 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-04-30T09:12:48.397

我尝试了 Alexanders 的回答，但在 Python3 中出现了这个错误：

> TypeError：'float' 对象不能解释为整数

这是因为 Python3 中的除法运算符返回一个浮点数。这对我有用：

```
>>> x = "qwertyui"
>>> chunks, chunk_size = len(x), len(x)//4
>>> [ x[i:i+chunk_size] for i in range(0, chunks, chunk_size) ]
['qw', 'er', 'ty', 'ui'] 
```

注意第`//`2 行末尾的 ，以确保截断为整数。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-10-05T16:55:16.180

*   :param s: str; 源字符串
*   :param w: int; 分割宽度

> 使用 textwrap 模块：
> 
> [PyDocs-textwrap](https://docs.python.org/3.6/library/textwrap.html)

```
import textwrap
def wrap(s, w):
    return textwrap.fill(s, w) 
```

：返回字符串：

> 灵感来自[亚历山大的回答](https://stackoverflow.com/a/13673133/4434405 "东西")
> 
> [PyDocs-数据结构](https://docs.python.org/3/tutorial/datastructures.html)

```
def wrap(s, w):
    return [s[i:i + w] for i in range(0, len(s), w)] 
```

*   ：返回列表：

> [受到埃里克回答的启发](https://stackoverflow.com/a/44103651/4434405)
> 
> [PyDocs 正则表达式](https://docs.python.org/3.6/library/re.html)

```
import re
def wrap(s, w):    
    sre = re.compile(rf'(.{{{w}}})')
    return [x for x in re.split(sre, s) if x] 
```

*   ：返回列表：

[完整的代码示例/替代方法](https://github.com/jerodg/hackerrank-python/blob/master/03_Strings/08_text-wrap.py)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-02-09T13:34:22.143

```
some_string="ABCDEFGHIJKLMNOPQRSTUVWXYZ"
x=3 
res=[some_string[y-x:y] for y in range(x, len(some_string)+x,x)]
print(res) 
```

会产生

```
['ABC', 'DEF', 'GHI', 'JKL', 'MNO', 'PQR', 'STU', 'VWX', 'YZ'] 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-10-08T18:32:29.613

在[拆分字符串中每隔 n 个字符？](https://stackoverflow.com/questions/9475241/split-string-every-nth-character)，“狼”给出了最简洁的答案：

```
>>> import re
>>> re.findall('..','1234567890')
['12', '34', '56', '78', '90'] 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-05-24T20:10:35.553

```
def split2len(s, n):
    def _f(s, n):
        while s:
            yield s[:n]
            s = s[n:]
    return list(_f(s, n)) 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-08-11T19:00:42.963

这是一个不需要事先知道字符串长度的单行代码：

```
from functools import partial
from StringIO import StringIO

[l for l in iter(partial(StringIO(data).read, 4), '')] 
```

如果您有文件或套接字，则不需要 StringIO 包装器：

```
[l for l in iter(partial(file_like_object.read, 4), '')] 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-05-22T02:06:36.223

有个`re`窍门：

```
In [28]: import re

In [29]: x = "qwertyui"

In [30]: [x for x in re.split(r'(\w{2})', x) if x]
Out[30]: ['qw', 'er', 'ty', 'ui'] 
```

然后是一个函数，它可能看起来像：

```
def split(string, split_len):
    # Regex: `r'.{1}'` for example works for all characters
    regex = r'(.{%s})' % split_len
    return [x for x in re.split(regex, string) if x] 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-07-22T04:58:57.937

这里有两种通用方法。可能值得添加到您自己的可重用库中。第一个要求项目是可切片的，第二个要求可与任何可迭代对象一起使用（但要求它们的构造函数接受可迭代对象）。

```
def split_bylen(item, maxlen):
    '''
    Requires item to be sliceable (with __getitem__ defined)
    '''
    return [item[ind:ind+maxlen] for ind in range(0, len(item), maxlen)]
    #You could also replace outer [ ] brackets with ( ) to use as generator.

def split_bylen_any(item, maxlen, constructor=None):
    '''
    Works with any iterables.
    Requires item's constructor to accept iterable or alternatively 
    constructor argument could be provided (otherwise use item's class)
    '''
    if constructor is None: constructor = item.__class__
    return [constructor(part) for part in zip(* ([iter(item)] * maxlen))]
    #OR: return map(constructor, zip(* ([iter(item)] * maxlen)))
    #    which would be faster if you need an iterable, not list 
```

因此，在 topicstarter 的情况下，用法是：

```
string = 'Baboons love bananas'
parts = 5
splitlen = -(-len(string) // parts) # is alternative to math.ceil(len/parts)

first_method = split_bylen(string, splitlen)
#Result :['Babo', 'ons ', 'love', ' ban', 'anas']

second_method = split_bylen_any(string, splitlen, constructor=''.join)
#Result :['Babo', 'ons ', 'love', ' ban', 'anas'] 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-10-09T14:41:10.650

```
length = 4
string = "abcdefgh"
str_dict = [ o for o in string ]
parts = [ ''.join( str_dict[ (j * length) : ( ( j + 1 ) * length ) ]   ) for j in xrange(len(string)/length  )] 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-06-07T22:16:27.577

```
# spliting a string by the length of the string

def len_split(string,sub_string):
    n,sub,str1=list(string),len(sub_string),')/^0*/-'
    for i in range(sub,len(n)+((len(n)-1)//sub),sub+1):
        n.insert(i,str1)   
    n="".join(n)
    n=n.split(str1)
    return n

x="divyansh_looking_for_intership_actively_contact_Me_here"
sub="four"
print(len_split(x,sub))

# Result-> ['divy', 'ansh', 'tiwa', 'ri_l', 'ooki', 'ng_f', 'or_i', 'nter', 'ship', '_con', 'tact', '_Me_', 'here'] 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-10-07T18:38:37.507

对于喜欢它更具可读性的家伙来说：

```
def itersplit_into_x_chunks(string,x=10): # we assume here that x is an int and > 0
    size = len(string)
    chunksize = size//x
    for pos in range(0, size, chunksize):
        yield string[pos:pos+chunksize] 
```

输出：

```
>>> list(itersplit_into_x_chunks('qwertyui',x=4))
['qw', 'er', 'ty', 'ui'] 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-03-25T22:49:18.950

我的解决方案

```
 st =' abs de fdgh  1234 556 shg shshh'
   print st

   def splitStringMax( si, limit):
    ls = si.split()
    lo=[]
    st=''
    ln=len(ls)
    if ln==1:
        return [si]
    i=0
    for l in ls:
        st+=l
        i+=1
        if i <ln:
            lk=len(ls[i])
            if (len(st))+1+lk < limit:
                st+=' '
                continue
        lo.append(st);st=''
    return lo

   ############################

   print  splitStringMax(st,7)
   # ['abs de', 'fdgh', '1234', '556', 'shg', 'shshh']
    print  splitStringMax(st,12)

   # ['abs de fdgh', '1234 556', 'shg shshh'] 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-12-01T06:49:02.403

在许多情况下都需要字符串拆分，例如您必须对给定字符串的字符进行排序，用另一个字符替换一个字符等。但是所有这些操作都可以使用以下提到的字符串拆分方法执行。

字符串拆分可以通过两种方式完成：

1.  根据拆分的长度对给定的字符串进行切片。

2.  使用 list(str) 函数将给定的字符串转换为列表，其中字符串的字符分解为列表的元素。然后进行所需的操作，并用'原始字符串的字符之间的指定字符'.join（list）将它们连接起来，以获得一个新的处理字符串。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-12-01T07:07:00.120

```
l = 'abcdefghijklmn'

def group(l,n):
    tmp = len(l)%n
    zipped = zip(*[iter(l)]*n)
    return zipped if tmp == 0 else zipped+[tuple(l[-tmp:])]

print group(l,3) 
```

# android - Textview滚动不起作用

> ID：13673067
> 
> 赞同：8
> 
> 时间：2012-12-02T19:45:48.430
> 
> 标签：android, xml, layout, scroll, textview

我想垂直向下和向上滚动文本，以防出现在 textview 中的文本比空间长。但是，我测试的以下方法不起作用。

1 -`tv1.setMovementMethod(new ScrollingMovementMethod());` 此外，在使用此方法时，对方法的调用`onFling()`停止工作。

2 -`<ScrollView>`在布局 XML 中使用。此外，使用此方法时，对`onFling()`方法的调用停止工作。

```
<ScrollView
android:id="@+id/SCROLLER_ID"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:scrollbars="vertical"
android:fillViewport="true">

    <TextView
    android:id="@+id/TEXT_STATUS_ID"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1.0"/>

</ScrollView> 
```

我在布局 XML 中的 TextView 如下。

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="2.26"
    android:background="@drawable/green"
    android:gravity="center"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-02T20:10:45.870

您不能在. `View`_ 因此，在普通布局中使用您的简单并为其添加属性。`TextView``ListView``ScrollView``TextView``android:scrollbars`

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:lines="3"
    android:scrollbars="vertical"
    android:scrollbarStyle="insideOverlay"
    android:fadeScrollbars="true"
    android:fadingEdge="vertical" /> 
```

在`Activity`侧面，您必须编写如下内容：

```
tv1.setMovementMethod(new ScrollingMovementMethod()); 
```

（基本上与您在第一点描述的相同）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T19:52:19.070

您可以尝试如下：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="fill_parent"

    android:layout_height="fill_parent"

    android:fillViewport="true" >

    <LinearLayout

        android:layout_width="fill_parent"

        android:layout_height="wrap_content"

        android:orientation="vertical" >

    <TextView
        android:id="@+id/TEXT_STATUS_ID"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1.0"/>
</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T19:47:57.937

```
<ScrollView
android:id="@+id/SCROLLER_ID"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

    <TextView
    android:id="@+id/TEXT_STATUS_ID"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

</ScrollView> 
```

# c++ - C++ 设计：子类，还是有更好的方法？

> ID：13673072
> 
> 赞同：0
> 
> 时间：2012-12-02T19:46:21.177
> 
> 标签：c++, objective-c

我有一`Cheese`堂课。在我的程序中，我处理了很多奶酪的收集，主要是`vector<Cheese>`对象。

我希望能够`eat()`收集奶酪，如下所示：

```
vector<Cheese> cheeses;
//cheeses = ...
cheeses.eat(); 
```

这个怎么做？如何向`vector<Cheese>`类添加新的成员函数？我应该只是子类化`vector<Cheese>`类，命名子类`CheeseCollection`并在那里添加成员函数，还是有更好的方法？

来自 Objective-C，我习惯了类别，这允许我向类添加函数（“方法”）。类似的东西在 C++ 中可用，还是在 C++ 中疯狂地进行子类化被认为更自然？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T19:47:42.507

在 C++ 中，您根本不会为此使用成员函数——使用自由函数：

```
void eat(std::vector<Cheese> const& cheeses) {
    // …
} 
```

这与那些 Obj-C 类别非常相似，即使语法不同（并且您没有使用成员访问）。

标准库容器类并未设计为可子类化，因此该方法将失败。你可以做的是使用组合而不是继承——即有一个`CheeseCollection`包含奶酪向量作为成员的类。这可能有一些优势，具体取决于您的整体设计。但是，总的来说，以上是最 C++ 的解决方案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-02T19:51:10.190

两者都不是——你想要的是一个算法。假设您`eat`已经知道如何吃一个 Cheese 对象，将其应用于整个集合将类似于：

```
std::for_each(cheeses.begin(), cheeses.end(), eat). 
```

与其他一些语言不同，C++ 不会盲目地坚持面向对象，即使它没有真正意义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-02T19:51:38.007

您可以做的一件事是定义您自己的使用（封装）向量的类：

```
class Cheeses
{
  vector<Cheese> v;
public:
  void eat()
  {
    v.erase();
  }

  // plus other methods which delegate to the contained vector
}; 
```

# jquery-mobile - 寻找将搜索框文本设置为“搜索等等...”的方法，该文本会像列表视图“过滤项目”一样消失

> ID：13673074
> 
> 赞同：1
> 
> 时间：2012-12-02T19:46:30.087
> 
> 标签：jquery-mobile

我有一个搜索框，我想用一些文本填充。即行为类似于列表视图的“搜索 xxxxx”：当您在框中键入时它会消失。

这对于输入类型 = 搜索框是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:50:32.600

我建议使用类似[jQuery-watermark 插件的](http://code.google.com/p/jquery-watermark/)东西，您只需将其作为脚本包含在您的页面中，然后您可以使用以下方法设置水印：

```
$('#inputId').watermark('Required information'); 
```

# jsf - 使用 HTTPS 无法直接访问受保护的 JSF 页面

> ID：13673086
> 
> 赞同：1
> 
> 时间：2012-12-02T19:47:42.383
> 
> 标签：jsf, tomcat, ssl, https

今天我开始在我的 Java EE 项目中实现 SSL。一切正常，直到我尝试使用已注销的客户直接访问受保护的区域。没有被重定向到登录页面，而是出现了一个问号。

![请求保护页面只显示一个问号而不是登录页面](../Images/172104f9411b96ab045916684a2cf0f5.png)

1.  此行为仅产生 FireFox，IE 工作正常
2.  如果没有 SSL，FireFox 也可以正常工作。

我正在使用 Tomcat 7.0 和 JSF 2.1 受保护的页面是：

1.  SubDir /admin 中的所有内容都需要角色 ADMIN 才能访问
2.  SubDir /customer 中的所有内容都需要角色 CUST 才能访问

奇怪的是，这个问号只有在访问 SubDir /customer 中的某些页面时才会显示！通过尝试访问所有其他人（包括 /admin 中的那些），登录页面将正确显示（所有页面的结构都相同）。

最后，我使用 TCP 端口 443 而不是 8443 使网站正常运行并正常运行。现在，在有人能够访问受保护的页面之前，两个浏览器都能正确显示登录页面。

所以我的问题。如果使用端口 8443，有谁知道为什么会出现这种行为？有没有办法仍然可以使用端口 8443？

您可以在下面找到 tomcats server.xml 文件。提前致谢！

```
 <?xml version="1.0" encoding="UTF-8"?>
<Server
    port="8005"
    shutdown="SHUTDOWN" >

    <Listener
        SSLEngine="on"
        className="org.apache.catalina.core.AprLifecycleListener" />

    <Listener className="org.apache.catalina.core.JasperListener" />

    <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" />

    <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />

    <Listener className="org.apache.catalina.core.ThreadLocalLeakPreventionListener" />

    <GlobalNamingResources>

        <Resource
            name="UserDatabase"
            auth="Container"
            description="User database that can be updated and saved"
            factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
            pathname="conf/tomcat-users.xml"
            type="org.apache.catalina.UserDatabase" />
    </GlobalNamingResources>

    <Service name="Catalina" >

        <Connector
            connectionTimeout="20000"
            port="8080"
            protocol="HTTP/1.1"
            redirectPort="443" />

        <Connector
            SSLEnabled="true"
            clientAuth="false"
            keystoreFile="C:\Program Files (x86)\apache-tomcat-7.0.30\conf\BookStore.keystore"
            keystorePass="myPwd"
            maxThreads="200"
            port="443"
            protocol="HTTP/1.1"
            scheme="https"
            secure="true"
            sslProtocol="TLS" />

        <Connector
            port="8009"
            protocol="AJP/1.3"
            redirectPort="443" />

        <Engine
            name="Catalina"
            defaultHost="localhost" >

            <Realm className="org.apache.catalina.realm.LockOutRealm" >

                <Realm
                    className="org.apache.catalina.realm.UserDatabaseRealm"
                    resourceName="UserDatabase" />
            </Realm>

            <Realm
                className="org.apache.catalina.realm.JDBCRealm"
                connectionURL="jdbc:mysql://localhost/bookstore?user=bookstore&amp;password=book$tore"
                driverName="org.gjt.mm.mysql.Driver"
                roleNameCol="role"
                userCredCol="pwd"
                userNameCol="eMail"
                userRoleTable="roles"
                userTable="customer" />

            <Host
                name="localhost"
                appBase="webapps"
                autoDeploy="true"
                unpackWARs="true" >

                <Valve
                    className="org.apache.catalina.valves.AccessLogValve"
                    directory="logs"
                    pattern="%h %l %u %t &quot;%r&quot; %s %b"
                    prefix="localhost_access_log."
                    suffix=".txt" />

                <Context
                    docBase="BookStore"
                    path="/BookStore"
                    reloadable="true"
                    source="org.eclipse.jst.jee.server:BookStore" />
            </Host>
        </Engine>
    </Service>

</Server> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:52:10.470

当您尝试在 https 连接上使用 http 时，会出现该问号。您看不到您正在使用的协议，因为 FF 中的默认设置隐藏了协议。

在浏览器 url 中输入*about:config并查找**browser.urlbar.trimURLs*，并将其设置为**false**。现在您将在浏览器 url 前面看到*http:// 。*切换到httpS，问号就会消失。

*编辑*：您尝试访问的网址显示在选项卡中，它是*http*而不是*https*。

# android - 如何防止我的 ListvView 中的视图被推出视图

> ID：13673090
> 
> 赞同：0
> 
> 时间：2012-12-02T19:47:59.227
> 
> 标签：android, listview

我列出了包含一些文本视图的视图。当另一个文本视图中的一个文本视图中有一个长字符串时，其中一个文本视图有时会被推到视图之外。

如何使文本视图变成椭圆形并且从不推出其他视图？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" android:padding="5dp">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >
        <TextView
            android:id="@+id/rest_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"

            android:maxLines="2"
            android:ellipsize="end"
            android:text="Name"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="right"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/rest_rating"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="1.5"
                android:singleLine="true"
                android:textAppearance="?android:attr/textAppearanceLarge" />
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/rest_type"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
         android:ellipsize="end"
            android:singleLine="true"
            android:capitalize="words"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="right"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/rest_open"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingLeft="5dp"
                android:text="Open"
                android:singleLine="true"
                android:textAppearance="?android:attr/textAppearanceSmall" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:45:56.793

我知道这很奇怪，但如果你拿出

```
 android:capitalize="words" 
```

你应该看到你想要的结果。你甚至不需要`android:ellipsize="end"`

```
 <TextView
        android:id="@+id/rest_type"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:singleLine="true" // <-- the play maker
        android:textAppearance="?android:attr/textAppearanceSmall" /> 
```

# php - 无法从应用接收 JSON 数据

> ID：13673093
> 
> 赞同：0
> 
> 时间：2012-12-02T19:48:26.577
> 
> 标签：php, android, json, http-post

似乎Android应用程序可以毫无问题地发送JSON对象但是当我收到时我得到：

“注意：未定义的索引”

发送对象的代码在这里：

```
 public void sendJson( String name1, String name2 ) throws JSONException {

    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://example.com/JSON_FOLDER/JSON2/parseData.php");
    HttpResponse response;

    JSONObject json = new JSONObject();

    try {           
            json.put("name1", name1);
            json.put("name2", name2);

            StringEntity se = new StringEntity(json.toString());
            se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
            httppost.getParams().setParameter("json", json);        // new code 

            //Execute HTTP POST request

            httppost.setEntity(se);
            response = httpclient.execute(httppost);

            if( response != null )  {
                    str =  inputStreamToString(response.getEntity().getContent()).toString();
                    Log.i("DATA", "Data send==  " + str );
            }

    } catch ( ClientProtocolException e ) {
        e.printStackTrace();
    } catch ( IOException e )   {
        e.printStackTrace();
    }

} 
```

在服务器端：

```
$json = $_POST['name1'];
$decoded = json_decode($json, TRUE); 
```

我得到了未定义的索引通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:56:55.070

编辑 - 修改我的答案：

看来您正在发送一个名为`json`“name1”和“name2”的参数作为数据。

像这样的东西应该可以工作：在 PHP 端，您需要先解码 JSON：

```
$json = json_decode($_POST['json']); 
```

然后您可以访问 name1 和 name2：

```
$name1 = $json['name1'];
$name2 = $json['name2']; 
```

如果您仍然遇到错误，我建议您打印出 $_POST 和 $_GET 对象并查看您的数据是如何发送的。然后你就会知道如何访问它。

* * *

更新：

您得到的结果`array(0) { }`意味着 PHP 没有从您的请求中获取任何参数（GET 或 POST）。您可以尝试一个不同的 android 示例，例如：

```
HttpClient client = new DefaultHttpClient();  
HttpPost post = new HttpPost("http://example.com/JSON_FOLDER/JSON2/parseData.php");   
post.setHeader("Content-type", "application/json");
post.setHeader("Accept", "application/json");

JSONObject json = new JSONObject();
json.put("name1", name1);
json.put("name2", name2);
post.setEntity(new StringEntity(json.toString(), "UTF-8"));
HttpResponse response = client.execute(post);

if( response != null )  {
    str =  inputStreamToString(response.getEntity().getContent()).toString();
    Log.i("DATA", "Data send==  " + str );
} 
```

[参考文章](https://stackoverflow.com/questions/5958182/android-http-post-with-parameters-not-working)

# clojure - 我如何依赖每个 clojure contrib 库？

> ID：13673094
> 
> 赞同：7
> 
> 时间：2012-12-02T19:48:27.403
> 
> 标签：clojure, classpath, leiningen, clojure-contrib

我曾经喜欢包含所有的 clojure.contrib，并且需要所有的库。这使得 find-doc 作为发现工具非常有用。

如今（clojure 1.4）clojure.contrib 分为许多子库。这反而破坏了我的计划，这也意味着我每次需要新库时都必须不断地重新启动 JVM。

所以我正忙着构建一个包含多行的 project.clj 文件：

```
[org.clojure/algo.generic "0.0.6"]
....
[org.clojure/data.xml "0.0.4"]
.... 
```

这样我就可以让 leiningen 将每个 clojure contrib 库放在类路径中，无论我是否需要它们。

而且我认为这将是一个巨大的痛苦，版本号等等。

我想知道是否有人有更好的方法来做同样的事情？

编辑：考虑一下，如果某处有一个包含库名称和当前版本列表的网页，我可以很容易地将其转换为项目文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T03:09:04.103

如果你只想在 REPL 中运行它，你可以使用 pomegranate（这似乎是唯一合适的用例，对吧？）。您可以让它使用 Maven Central API 查找最新版本。我认为这比维护某种依赖项项目要好，无论是生成的还是其他的。

```
(require '[cemerick.pomegranate :refer [add-dependencies]])

(add-dependencies
  :coordinates '[[clj-http "0.5.8"]]
  :repositories {"clojars" "http://clojars.org/repo"})

(require '[clj-http.client :as client])

;; contrib project names from https://github.com/clojure
(def contrib ["tools.nrepl" "tools.trace" "tools.namespace" "tools.macro"
              "test.generative" "math.numeric-tower" "core.match" "core.logic"
              "data.priority-map" "core.contracts" "tools.cli" "java.jmx"
              "java.jdbc" "java.classpath" "data.xml" "data.json" "core.unify"
              "core.incubator" "core.cache" "algo.monads" "data.generators"
              "core.memoize" "math.combinatorics" "java.data" "tools.logging"
              "data.zip" "data.csv" "algo.generic" "data.codec"
              "data.finger-tree"])

(defn add-contrib-dependencies
  "look up the latest version of every contrib project in maven central,
   and add them as dependencies using pomegranate."
  [project-names]
  (add-dependencies
   :coordinates
   (map (juxt
         (comp symbol (partial format "org.clojure/%s"))
         (fn [proj]
             (Thread/sleep 100)
             (-> "http://search.maven.org/solrsearch/select?q=%s&rows=1&wt=json"
                 (format proj)
                 (client/get {:as :json})
                 :body :response :docs first :latestVersion)))
        project-names))) 
```

现在您可以在项目名称列表中调用此函数：

```
user=> (add-contrib-dependencies contrib)
{[org.clojure/data.zip "0.1.1"] nil,
 [org.clojure/java.classpath "0.2.0"] nil,
 [org.clojure/core.cache "0.6.2"] nil, ...} 
```

更新：如前所述，我已将此答案放入库中。它可以用作 nREPL 中间件，也可以从正在运行的 REPL 会话中手动调用。该代码可以在[https://github.com/rplevy/contrib-repl](https://github.com/rplevy/contrib-repl)找到，也可以在其中找到使用说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:05:47.170

我感觉到你的痛苦。这应该会有所帮助[http://dev.clojure.org/display/community/Where+Did+Clojure.Contrib+Go](http://dev.clojure.org/display/community/Where+Did+Clojure.Contrib+Go)

# haskell - rseq/seq 的存在是否破坏了参照透明性？是否有一些替代方法没有？

> ID：13673095
> 
> 赞同：6
> 
> 时间：2012-12-02T19:48:31.027
> 
> 标签：haskell, ghc, compiler-optimization, strictness

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-02T20:31:29.807

Referential transparency is about equality statements and variable references. When you say *x = y* and your language is referentially transparent, then you can replace every occurence of *x* by *y* (modulo scope).

If you haven't specified `x = ()`, then you can't replace `x` by `()` safely, such as in your case. This is because you are wrong about the inhabitants of `()`, because in Haskell there are two of them: One is the only constructor of `()`, namely `()`. The other is the value that is never calculated. You may call it *bottom* or *undefined*:

```
x :: ()
x = x 
```

You certainly can't replace any occurrence of `x` by `()` here, because that would chance semantics. The existence of *bottom* in the language semantics allows some awkward edge cases, especially when you have a `seq` combinator, where you can even prove every monad wrong. That's why for many formal discussions we disregard the existence of *bottom*.

However, referential transparency does not suffer from that. Haskell is still referentially transparent and as such a purely functional language.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-02T19:52:33.810

Your definition of referential transparency is incorrect. Referential transparency does not mean you can replace `x :: ()` with `() :: ()` and everything stays the same; it means you can replace all occurrences of a variable with its definition and everything stays the same. `seq` and `rseq` are not in conflict with referential transparency if you use this definition.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-03T01:38:42.983

`seq` is a red herring here.

```
unitseq :: () -> a -> a
unitseq x y = case x of () -> y 
```

This has the same semantics as `seq` on unit, and requires no magic. In fact, `seq` only has something "magic" when working on things you can't pattern match on -- i.e., functions.

Replacing `undefined :: ()` with `()` has the same ill effects with `unitseq` as with the more magical `seq`.

In general, we think of values not only as "what" they are, but how *defined* they are. From this perspective, it should be clear why we can't go implementing definedness-changing transformations willy-nilly.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-02T22:19:23.360

Thanks all for the inspiring answers. After thinking about it more, I come to the following views:

# View 1: Considering terminating expressions only

If we restrict ourselves to a normalizing system, then `seq` (or `rseq` etc.) has no influence on the result of a program. It can change the amount of memory the program uses and increase the CPU time (by evaluating expressions we won't actually need), but the result is the same. So in this case, the rule `x :: () --> () :: ()` is admissible - nothing is lost, CPU time and memory can be saved.

# View 2: Curry-Howard isomorphism

Since Haskell is Turing-complete and so any type is inhabited by an infinite loop, the C-H corresponding logic system is inconsistent (as pointed out by Vitus) - anything can be proved. So actually *any rule* is admissible in such a system. This is probably the biggest problem in my original thinking.

# View 3: Expansion rules

Natural deduction rules give us reductions and expansions for different type operators. For example for `->` it's β-reduction and η-expansion, for `(,)` it is

> `fst (x, y)` --reduce--> `x` (and similarly for `snd`)
> 
> `x : (a,b)` --expand--> `(fst x, snd x)`

etc. With the presence of bottom, the reducing rules are still admissible (I believe), but the expansion rules not! In particular, for `->`:

```
rseq (undefined :: Int -> Int) = undefined 
```

but it's η-expansion

```
rseq (\x -> (undefined :: Int -> Int) x) = () 
```

or for `(,)`:

```
case undefined of (a,b) -> () 
```

but

```
case (fst undefined, snd undefined) of (a,b) -> () 
```

etc. So in the same way, the expansion rule for `()` is not admissible.

# View 4: Lazy pattern matching

Allowing `x :: ()` to expand to `() :: ()` could be viewed as a special case of forcing all pattern matching on single-constructor data types to be [lazy](https://en.wikibooks.org/wiki/Haskell/Laziness#Lazy_pattern_matching). I've never seen lazy pattern matching to be used on a multi-constructor data type, so I believe this change would allow us to get rid of the `~` lazy pattern matching symbol completely. However, it would change the semantic of the language to be more lazy (see also Daniel Fischer's comment to the question). And moreover (as described in the question) break `Strategy`.

# excel - 字符串缩短Excel vba

> ID：13673096
> 
> 赞同：0
> 
> 时间：2012-12-02T19:48:31.033
> 
> 标签：excel, vba

> **可能重复：**
> [VBA 中的子字符串](https://stackoverflow.com/questions/6052337/substring-in-vba)

我想知道如何将位于单元格中的长字符串（每个字符串超过 300 个字符）缩短为 300 个字符。
例如，假设“aaaaadd”是 302 个字符，包括“dd”。
所以结果将是“aaaaa”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T20:06:24.180

如果您只是在寻找公式（而不是 VBA），则可以使用以下`LEFT`公式：

```
=LEFT(A1, 300) 
```

这会将字符串截断为 300 个字符，如果字符串少于 300 个字符，它将只返回字符串。如果需要使用VBA，语法基本相同。例如，如果您想对 cell 执行该操作`A1`：

```
MyString = Left(Range("A1").Value, 300) 
```

这里，第一个参数`LEFT`是 cell 的值，`A1`截断的结果存储在 variable 中`MyString`。

# c# - 您如何控制运行时属性网格中可见的内容？

> ID：13673101
> 
> 赞同：9
> 
> 时间：2012-12-02T19:48:45.690
> 
> 标签：c#, winforms, propertygrid

我有一个显示列表的属性网格，例如一个类`Person`

```
[TypeConverter(typeof(ExpandableObjectConverter))]
public class Person
{
    public bool ShowHidden { get; set; }
    public string Name { get; set; }
    //[Browsable(false)]
    public string Hidden { get; set; }

    public override string ToString()
    {
        return string.Format("Person({0})", Name);
    }
} 
```

问题是我如何`Browsable()`在运行时控制属性，以便当`ShowHidden = false`行`Hidden`（下面突出显示的黄色）被省略时。

![截屏](../Images/7c5a2835bd6f33cd4c0c73c88141364d.png)

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-02T20:02:57.243

这是一个例子：

```
PropertyDescriptor descriptor=
  TypeDescriptor.GetProperties(this.GetType())["DataType"];
BrowsableAttribute attrib= 
  (BrowsableAttribute)descriptor.Attributes[typeof(BrowsableAttribute)]; 
FieldInfo isBrow = 
  attrib.GetType().GetField("browsable",BindingFlags.NonPublic | BindingFlags.Instance);
isBrow.SetValue(attrib,false); 
```

只需替换`DataType`为您的属性名称即可。请注意，所有属性都必须具有正在更改的属性（在本例中为 Browsable）。如果其中一个属性缺少该属性，则**所有**类属性都将获得新的属性设置。

取自这里的代码：[Exploring the Behavior of Property Grid](http://www.codeproject.com/Tips/48015/Exploring-the-Behaviour-of-Property-Grid)。

# android - 登录和注册屏幕

> ID：13673105
> 
> 赞同：2
> 
> 时间：2012-12-02T19:49:01.227
> 
> 标签：android

我有以下活动（想象一下 Pinterest 应用程序）：

**带有两个按钮的WellcomeActivity** - 注册并登录

**LogInActivity**你来自 WellcomeActivity

**SignUpActivity**你来自 WellcomeActivity

**MainActivity** - 您在登录或注册后来到这里。

当用户注册或登录时，我`finish()`打电话`LogInActivity`或`SignUpActivity`开始`MainActivity`。但`WellcomeActivity`仍然在堆栈中，所以当我按下后退按钮时，我再次进入`WellcomeActivity`.

启动时我无法调用`finish()`它，`LogInActivity`或者`SignUpActivity`，因为如果用户决定返回，他将退出应用程序。

现在，我如何设计 Activity 转换以具有类似 Pinterest 的逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:00:05.593

我有一个类似的应用程序。我所做的是制作一个“登录”和“注册”作为字段的共享首选项文件。当他们注册或登录时，我将这个值设为 true。

在应用程序中，当他们返回主要活动时，我会检查 onActivityResult，如果他们注册或登录，我会完成（）活动。

这样，当他们在登录或注册之前返回时，它不会关闭它。我希望你明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:01:58.397

参考[这个答案](https://stackoverflow.com/a/7511896/1627802)

在 WelcomeActivity 中，在启动 LoginActivity 或 SignupActivity 时调用 startActivityForResult() 而不是 startActivity()。然后在 WelcomeActivity 的 onActivityResult() 中，如果 resultCode 为 1，则调用 finish()。

现在，当注册登录成功时，您在登录/注册活动中设置Result(1)，它将调用WelcomeActivity 的onActivityResult()，resultCode 为1，并将完成() 它。如果登录或注册失败，则调用 setResult(0)。

同样在 setResult(1) 之后，您 startActivity() 来调用 MainActivity。

# backbone.js - 如何为所有 Backbone 模型添加默认错误处理程序？

> ID：13673109
> 
> 赞同：11
> 
> 时间：2012-12-02T19:49:23.503
> 
> 标签：backbone.js, backbone-events

## 背景：

Backbone 模型提供了一个选项来注册一个回退错误处理程序，每次调用服务器失败时都会调用该处理程序，并且没有提供特定的处理程序。

```
MyModel = new Backbone.Model.extend({
  initialize: function(option) {
    this.on("error", this.fallbackErrorHandler);
  },

  fallbackErrorHandler: function() {
    // default behavior in case of an error
  },

  foo: function() {
    this.fetch();             // fallbackErrorHandler will be called
    this.fetch({              // the inline error handler will be called
      error: function() {
        // some specific code for this error
      }
    });
  }    
}); 
```

## 我想做的事：

我希望我的应用程序中的所有主干模型都有一个回退错误处理程序。但是 - 我不想为每个模型显式添加处理程序。 ***我想定义和注册一次处理程序，并将其应用于我的应用程序中的每个主干模型***。此外，***我不想更改现有代码***，也不想更改开发人员在我的应用程序中定义模型的方式。

## 我已经尝试过的：

我添加了一个初始化程序，它在*Backbone.Model.prototype*对象上注册了一个处理程序。

```
App.Marionette.addInitializer(function() {
  Backbone.Model.prototype.on("error",function(){
     // default behavior in case of an error
  });
}); 
```

此代码有效，并且调用了我的后备错误处理程序。但是，此代码的副作用是在应用程序的任何主干模型中注册的所有错误处理程序都注册在*Backbone.Model.prototype*上而不是*Backbone.Model*上。所以显然这不是一个好的解决方案。

我还考虑定义*MyModel*扩展*Backbone.Model*并注册默认处理程序。然后，我的应用程序中的所有其他模型将扩展*MyModel*，而不是直接扩展 Backbone.Model。但是，我试图无缝地做到这一点，而不必更改现有代码，然后指示所有开发人员扩展*MyModel*而不是*Backbone.Model*。

**有没有人有这个问题的解决方案？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T20:02:08.897

Backbone 默认使用 jQuery 的 AJAX 方法调用。您可以直接连接到这个，而不是使用 Backbone：

[http://api.jquery.com/ajaxError/](http://api.jquery.com/ajaxError/)

如果这不能满足您的需求，您可以覆盖 Backbone 模型中的“fetch”方法：

```
 var originalFetch = Backbone.Model.prototype.fetch;

Backbone.Model.prototype.fetch = function(options){

  var originalError = options.error;

  options.error = function(model, error){
    if (originalError){ originalError(model, error); }

    // call your global error handler here.
    App.myGlobalErrorHandler(model, error);

  }

  originalFetch.apply(this, arguments);
}; 
```

# c# - 比较可为空的日期时间？

> ID：13673117
> 
> 赞同：39
> 
> 时间：2012-12-02T19:50:12.893
> 
> 标签：c#, c#-4.0, datetime

寻找比以下更好的方法来比较可为空的日期时间：

有什么建议么？

```
// myobject.ExpireDatetime is of DateTime?
//
if (!myobject.ExpireDateTime.IsNull() && DateTime.Compare((DateTime)myobject.ExpireDateTime, DateTime.Now.ToUniversalTime()) < 0)
{ //error! } 
```

> 编辑：抱歉混淆...myobject.ExpireDatetime 是 DateTime 类型。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-02T20:16:03.807

你的问题对我来说不是很清楚，但如果我们有

```
DateTime? ExpireDateTime;  // could be a variable or a property 
```

可以这么说

```
if (ExpireDateTime < DateTime.UtcNow)
{
  ...
} 
```

`ExpireDateTime`如果是`null`（`HasValue`为假），这将是可以的。一些没有经验的开发人员会很难理解[提升的操作符](https://stackoverflow.com/a/3370150/8930)，所以为了更清楚，你可以写

```
if (ExpireDateTime < (DateTime?)DateTime.UtcNow)
{
  ...
} 
```

它是相同的，但更易于阅读和理解。

*`.Value`当然，如果 nullable 可能为 null，则*永远不要*写。如果你这样做，你会得到一个`InvalidOperationException` *“Nullable object must have a value” 。**

 ** * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-08-31T05:41:26.300

我建议您使用以下内容：

```
int y = Nullable.Compare<DateTime>(DateTime.UtcNow, x); 

// x is the nullable date time object.
// y will be '-1' if x is greater than DateTime.UtcNow 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-11-29T09:39:59.983

编译器[提升](https://stackoverflow.com/questions/3370110/what-are-lifted-operators/3370150)变量并生成代码以检查空值。

```
> new DateTime?()
null
> DateTime.Now > null
false
> DateTime.Now < null
false

> new int?()
null
> 10 >= null
false
> 10 =< null
false
> 10 == null
false
> 10 != null
true 
```

知道了这一点，您就可以编写简单的代码。

```
// d is a DateTime? 
DateTime now = DateTime.Now;

bool after = d > now;
bool before = d < now;
bool today = d?.Date == now.Date; 
```

如果 d 为 null 一切都将为假，否则它将像正常的 DateTime 比较一样工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-02T19:53:57.817

如果 `ExpireDateTime`是， `Nullable<DateTime>`我会改为执行以下操作：

```
if (ExpireDateTime.HasValue && ExpireDateTime < DateTime.Now.ToUniversalTime())
{ 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-02T19:51:54.583

使用[`Value`](http://msdn.microsoft.com/en-us/library/ydkbatt6.aspx)可为空的属性：

```
objet.ExpireDateTime.Value 
```

* * *

```
if (!object.ExpireDateTime.IsNull() 
    && DateTime.Compare(objet.ExpireDateTime.Value, 
                        DateTime.Now.ToUniversalTime()) < 0)
{ 
} 
```*

# php - 从 MySQL 数据库创建独特的网页

> ID：13673123
> 
> 赞同：4
> 
> 时间：2012-12-02T19:50:43.713
> 
> 标签：php, mysql, database, webpage

我对 Web 开发非常陌生（我对 HTML 的经验有限）。我正在创建一个辩论网站。目前，每场辩论都存储在 MySQL 数据库中。当用户将信息提交到数据库时，我希望创建一个新页面，其中包含他们的辩论，以及评论和评分的能力。

我遇到的问题是，从我迄今为止所做的研究来看，我没有找到解决方案来为每次辩论建立一个新的网页。有人对如何将数据写入独特的网页有任何建议吗？

谢谢，乔治

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T01:51:30.810

假设您使用的是 PHP 和 MySQL。

我将保持这个非常简单，可能在一个基本示例中需要这些文件以及您希望的解释性 SQL 表（辩论、评论等）。

*   /debatelist.php | Dipslays 所有辩论都有一个创建辩论的表格
*   /辩论处理器.php | 您的“一体化”数据操作文件。
*   /debate_detail.php | 辩论索引指向的详细信息页面。

**形成辩论的表格**

```
<form action='debateprocessor.php' action='POST'>
<input type='hidden' name='action' value='create'/>
<input type='text name='debate_name'/>
/// Other inputs - debate topic, debate author, subject etc? same as above
</form> 
```

然后将表单数据发送到debateprocessor.php，我们将在其中进行清理和预处理。

$_GET['action']="create" #这告诉我们我们正在创建辩论 $_GET['debate_name']="SomeDebate"

**辩论处理器.php** - 你想把它拉进来：

```
if (mysql_real_escape_text($_GET['action'])) == 'create'){
    $debate_name = mysql_real_escape_text($_GET['debate_name']);
    //sanitize other variables as above

    //Insert debate name
    mysql_query=("INSERT INTO debates (debate_id,debate_name) VALUES ('$debate_name'");

} 
```

注意动作 if($action == 'foo'){ //do something; } 声明 - 这将允许您在一个文件中处理所有更新（评论、编辑辩论名称等）。表单中的其他操作值可能是“编辑”、“添加评论”等 - 您可以使用单独的文件来完成所有这些操作，但这允许您全部完成。您所要做的就是为每个操作添加上面的 elseifs 或其他 if 语句来修改表。

因此，显示您的辩论，您会在表格中获得类似辩论的主列表，假设您有

**辩论列表.php**

```
<?
$getDebates = mysql_query("SELECT * FROM debates";); 
$rowNum = 0;

while($row = mysql_fetch_array($getDebates))
{
    $thisDebate = $row['debate_name'];
    $thisDebateID = $row['debate_id'];;

    echo
    "
        <tr>
        <td>
           <a href='debate_detail.php?debateid=$thisDebateID'>
            $thisDebate
        </a>
        </td>

    </tr>
    ";
    $rowNum++;
} 
```

这将输出一个带有 ea 链接的辩论名称列表。PK 拉取的给定辩论的debate_detail.php 页面，辩论ID。在该文件中，您将使用类似的 SELECT 组合（仅使用 'WHERE辩论ID ='xyz'，并且可能会在辩论 ID ='zyx' =辩论_id ='zyx'上加入评论等表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:53:07.037

有一个脚本来查看请求的 URI（查询字符串是最简单的地方查看`foo.php?debate=1`→ `$_GET['debate']`）并使用它来获取一条唯一标识您想要的辩论的信息（例如，您用于主键的列的值在数据库表中）。

在数据库中查找该行，并将内容输出到页面。

（确保以一种防御 SQL 注入的方式将数据发送到数据库，并且在没有转义或清理它以防御 XSS 的情况下，不会将用户输入回显到 HTML）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T19:53:13.117

您需要使用模板引擎，例如 PHP。对于每个辩论，您传递一个不同的查询字符串，例如您可能有的辩论 id 1

```
www.example.com/debates?id=1 
```

然后，在您的 php 代码中，您可以检查此查询参数的值并使用它从数据库中提取正确的信息，从而允许您动态创建页面。

# c# - 如何在 C# 中从 WebRequest 获取 XML？

> ID：13673124
> 
> 赞同：3
> 
> 时间：2012-12-02T19:50:52.090
> 
> 标签：c#, xml, windows-8, stream, webrequest

我正在尝试使用以下代码从 URL 获取 XML 数据：

```
WebRequest webRequest = WebRequest.Create(Url);
using (WebResponse webResponse = await webRequest.GetResponseAsync())
{
    using (Stream responseStream = webResponse.GetResponseStream())
    {
        XmlDocument XmlDoc = new XmlDocument();
        XmlDoc.Load(webResponse); ////error
    }
} 
```

Visual Studio 既不接受“XMLDoc.Load()”也不接受“XMLDoc.LoadXml()”——那么，如何从 webrequest 获取 xmldoc？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:43:01.653

这应该有效：

```
string url = @"http://ws.audioscrobbler.com/2.0/?method=geo.getevents&location=" + ub.Ciudad + "&page=1&api_key=" + LAST_API_KEY; //for example
XmlDocument xDoc = await XmlDocument.LoadFromUriAsync(new Uri(url)); //this does the web request 
```

# java - 在 JOptionPane.showMessageDialog 上应用外观

> ID：13673125
> 
> 赞同：2
> 
> 时间：2012-12-02T19:51:05.500
> 
> 标签：java, swing, look-and-feel, joptionpane, substance

我正在使用带有 Substance 的 LAF（外观和感觉）。它是完美的，除了 JOptionPane.showMessageDialog。

我希望它继承 LAF 的外观，它从 Windows 获取其自定义背景，但不适用于栏（在角落，您可以看到关闭的“X”）。

LAF 是否没有为 JOptionPane 定义样式？还是可以延长它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:02:11.517

自从我使用它已经有一段时间了，但我几乎可以肯定，如果您遵循[Substance 外观和感觉文档](http://insubstantial.github.com/insubstantial/substance/docs/api/SetUseConstantThemesOnDialogs.html)中的示例，您将获得完整的 JOptionPane 样式。

在页面中搜索`JOptionPane.showMessageDialog`，您将在 INFORMATION/ERROR/WARNING/QUESTION_MESSAGE 中看到它的使用。

# asp.net - 将用户添加到数据库不起作用

> ID：13673127
> 
> 赞同：0
> 
> 时间：2012-12-02T19:51:08.863
> 
> 标签：asp.net, vb.net

我真的是 ASP.net 的新手，我目前正在尝试在网站上创建一个注册页面。我成功地将用户添加到数据库中，但我决定在代码中添加另一个功能来检查哪些用户 ID 可用。例如，如果用户删除了他们的帐户，他们的用户 ID 将再次可供使用。我试图找到最小值和最大值，并根据它是最小值还是最大值来加或减 1。我可以运行我为此编写的代码而没有错误，但用户没有添加到数据库中。谁能帮我弄清楚我的代码中缺少什么来做到这一点？

编辑 >>>>> 代码将用户添加到数据库，但它在 -1 处添加了新用户。我似乎无法看到问题出在哪里。

```
If (aDataReader2.Read() = False) Then
  aConnection1 = New OleDbConnection(aConnectionString)
  aConnection1.Open()
  aQuery = "Insert Into UserDetails "
  aQuery = aQuery & "Values ('" & userID & "','" & userFName & "','" & userLName & "','" & userEmail & "','" & userUsername & "','" & userPassword & "')"
  aCommand = New OleDbCommand(aQuery, aConnection1)
  aCommand.ExecuteNonQuery()
  aConnection1.Close()
ElseIf (min = 1) Then
  aConnection2 = New OleDbConnection(aConnectionString)
  aConnection2.Open()
  aCommand = New OleDbCommand(aQuery3, aConnection2)
  aDataReader2 = aCommand.ExecuteReader()
  userID = max + 1
  aQuery = "Insert Into UserDetails "
  aQuery = aQuery & "Values ('" & userID & "','" & userFName & "','" & userLName & "','" & userEmail & "','" & userUsername & "','" & userPassword & "')"
  aCommand = New OleDbCommand(aQuery, aConnection2)
  aCommand.ExecuteNonQuery()
  aConnection2.Close()
Else
  aConnection3 = New OleDbConnection(aConnectionString)
  aConnection3.Open()
  aCommand = New OleDbCommand(aQuery2, aConnection3)
  aDataReader2 = aCommand.ExecuteReader
  userID = min - 1
  aQuery = "Insert Into UserDetails "
  aQuery = aQuery & "Values ('" & userID & "','" & userFName & "','" & userLName & "','" & userEmail & "','" & userUsername & "','" & userPassword & "')"
  aCommand = New OleDbCommand(aQuery, aConnection3)
  aCommand.ExecuteNonQuery()
  aConnection3.Close()
  lblResults.Text = "User Account successfully created"
  btnCreateUser.Enabled = False
End If 
```

这是我用来从数据库中获取最大值和最小值的代码。我得到的值都是 0 - 当 min 应该是 1 而 max 应该是 5

```
 Dim minID As Integer
 Dim maxID As Integer
 aQuery2 = "Select Min(UserID) AS '" & [minID] & "' From UserDetails"
 aQuery3 = "Select Max(UserID) AS ' " & [maxID] & "' From UserDetails" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:42:12.593

很难说到底是什么问题，因为我们只看到了其中的一部分。最小值和最大值从何而来？

我不能给你一个解决方案，但是，我建议你更好地构建你的代码。你有很多（！）冗余代码。这使得代码难以阅读、理解、更改和测试。

将用户数据放入一个类中。这比许多单独的变量更容易处理。

```
Public Class User
    Public Property ID As Integer
    Public Property FirstName As String
    Public Property LastName As String
    Public Property EMail As String
    Public Property Username As String
    Public Property Password As String
End Class 
```

将冗余代码提取到子程序中

```
Private Sub CreateUser(ByVal u As User)
    Const InsertQuery As String = _
        "INSERT INTO UserDetails VALUES ({0},'{1}','{2}','{3}','{4}','{5}')"

    Dim query As String = String.Format(InsertQuery, u.ID, u.FirstName, u.LastName, _
                                                     u.Email, u.Username, u.Password)
    Using conn As New OleDbConnection(aConnectionString)
        conn.Open()
        Dim cmd As New OleDbCommand(query, conn)
        cmd.ExecuteNonQuery()
    End Using
End Sub 
```

然后代码变成这样

```
If Not aDataReader2.Read() Then
    CreateUser(user)
ElseIf min = 1 Then
    ...
    user.userID = max + 1
    CreateUser(user)
Else
    ...
    user.userID = min - 1
    CreateUser(user)
    lblResults.Text = "User Account successfully created"
    btnCreateUser.Enabled = False
End If 
```

现在看起来好多了。

（我的代码没有经过测试，只是给你一个想法。）

* * *

**更新**

您不能像这样读取最小值和最大值。尝试这样的事情

```
Dim min, max As Integer

Using conn As New OleDbConnection(aConnectionString)
    Dim cmd As OleDbCommand = _
        New OleDbCommand("SELECT MIN(UserID), MAX(UserID) FROM UserDetails", conn)
    conn.Open()
    Using reader As OleDbDataReader = cmd.ExecuteReader()
        reader.Read()
        If reader.IsDBNull(0) Then
            ' The table is empty
            min = 1
            max = 1
        Else
            min = reader.GetInt32(0)
            max = reader.GetInt32(1)
        End If
    End Using
End Using 
```

# c - 为什么我的字符串没有打印正确的值？

> ID：13673129
> 
> 赞同：-1
> 
> 时间：2012-12-02T19:51:11.533
> 
> 标签：c

这是我打印字符串的代码

```
char accname[MAX][MAXSTRING], transname[MAX][MAXSTRING];

printf ("Enter title for new account: ");
accname[i][i] = validatestring();
printf ("\n");

printf ("Enter title for transaction: ");
transname[i][i] = validatestring();
printf ("\n");

printf ("%s  %s", accname[i], transname[i]); 
```

我的 validatestring() 代码

```
char validatestring() {
    int keeptrying = 1, rc;
    char i[31];
    do
    {
        rc = scanf("%30[^\n]", &i);
        if (rc == 0)
        {
            printf (" **Invalid input try again: ");
            clear();
        }
        else if (getchar() != '\n')
        {
            printf (" **Title is longer than 30 characters: ");
            clear();
        }
        else
        {
            keeptrying = 0;
        }
    } while (keeptrying == 1);
    return i;
} 
```

在 accname[i] / transname[i] 的 printf 阶段，我没有得到我输入的值，我得到了奇怪的转换字符串类型，有时我得到了输入的第一个字符，但现在我得到了完全不同的东西。谁能弄清楚为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:00:15.750

你的`validatestring`功能被彻底破坏了。

首先，您声明`validatestring`为返回`char`。但是您也尝试`char *`从中返回 a （请参阅`return i`, where `i`is `char [31]`）。这甚至不应该编译。

其次，如果你打算从 中返回一个字符串`validatestring`，你必须确保你没有从它返回一个指向本地缓冲区的指针。`i`是一个本地数组。`i`无法从 中返回指向的指针`validatestring`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T19:57:01.513

是的，那是因为您正在尝试将所有内容存储在一个字符中。

```
array[i][i] 
```

这是一个角色位置，您试图在其中存储所有内容

我想你打算做的是

```
*array[i]  // It is a pointer to that location which you referring to. 
```

这会将您的字符串存储在 array[i] 中，您可以从中访问您的字符

```
 array[i][i] 
```

我希望这可以解决您的问题。此外，您的函数应该返回一个 char 指针 char*。

这应该这样做：

```
 *accname[i] = validatestring(); 
```

还将函数的返回类型更改为 char*

# javascript - html5 视频自动播放在 android 4.1 中不起作用

> ID：13673138
> 
> 赞同：1
> 
> 时间：2012-12-02T19:51:41.917
> 
> 标签：javascript, jquery, html

我被困在一个项目中，我想使用[html5 video](http://www.w3schools.com/html/html5_video.asp)自动播放视频。它在桌面浏览器上运行良好，但在 Android 4.1 默认浏览器上，它需要我“触摸”（或单击）视频元素（或播放按钮）来播放视频。

我尝试了多种方法：

*   使用[触发器](http://api.jquery.com/trigger/)
*   在页面加载时手动调用播放函数
*   使用自动播放属性

但以上都不适用于Android浏览器。

我认为一种解决方案是在页面加载时模拟点击事件，但是否可以通过编程方式模拟点击功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-06T04:12:30.240

参考[这个答案](https://stackoverflow.com/a/27952393/3518991)。

对于 Android < 4.2.2，您获得的最后一个 DOM 事件似乎是`loadeddata`. 你可能不会得到`canplaythrough`. 要自动播放，然后使用 javascript

```
var myvideo = document.getElementsByTagName('video')[0]; 
myvideo.play(); 
```

对于 Android 4.2.2+，您在本机代码中需要的只是

```
WebView.getSettings().setMediaPlaybackRequiresUserGesture(false); 
```

# c - 检查C中数组中的特定字符

> ID：13673139
> 
> 赞同：1
> 
> 时间：2012-12-02T19:51:47.843
> 
> 标签：c

我想在特定位置检查数组中的某些字符。

该数组以 $$$$ 开头，然后有八个字符，然后是另一个 $，再有八个字符，最后是 $$$$。例如`char my_array[50] = "$$$$01FF4C68$02543EFE$$$$";`

我想检查所有应该有 $ 的位置是否都有它们。

我可以将数组分成包含字符的三个部分，然后分别测试它们，但有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:02:00.910

为什么要把事情复杂化？

```
if (my_array[0] != '$'
    || my_array[1] != '$'
    || my_array[2] != '$'
    || my_array[3] != '$'
    || my_array[12] != '$'
    || my_array[21] != '$'
    || my_array[22] != '$'
    || my_array[23] != '$'
    || my_array[24] != '$')
{
    printf("Wrong!\n");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T19:55:12.353

采用`strstr()`

检查数组是否以 8 个 $ 开头：`strstr(my_array, "$$$$$$$$")`

检查数组是否以八个 $ 结尾：`strstr(my_array + 16, "$$$$$$$$")`

+16 用于移动指针，因此 my_array + 16 的开头将是 $ 应该在的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T19:53:45.533

您可能想使用[strstr](http://pubs.opengroup.org/onlinepubs/9699919799/functions/strstr.html) functinn 来查找`$$$`....

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T19:57:19.717

是的，你可能想使用**正则表达式**，请阅读[http://www.peope.net/old/regex.html](http://www.peope.net/old/regex.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-02T19:58:15.987

如果您使用 POSIX 兼容的平台，并且您的代码中即将出现一些更复杂的模式，您可以查看正则表达式，例如[PCRE](http://www.regular-expressions.info/pcre.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-02T20:01:57.617

您也可以避免使用 strstr，因为格式简单且固定；直到示例格式成立::

```
 bool ok = strlen(my_array) >= 25 /* just be sure there are at least all expected chars */ &&
           strncmp(my_array, "$$$$", 4) == 0 &&
           strncmp(my_array + 12, "$", 1) == 0 /* my_array[12] == '$' */&&
           strncmp(my_array + 21, "$$$$", 4) == 0; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-02T20:11:06.573

不使用该`string.h`库的一个长选项是，进行 3 个测试：

```
#include <stdio.h>

int firstTest( char a[] );
int secondTest( char a[] );
int thirdTest( char a[] );

int main (void)
{
    int result;
    char my_array[50] = "$$$$01FF4C68$02543EFE$$$$";
    if( ( firstTest( my_array ) == 1 ) && ( secondTest( my_array ) == 1 ) && ( thirdTest( my_array ) == 1 ) ){
        printf( "The string is valid.\n" );
        result = 1;
    }
    else{
        printf( "The string is invalid.\n" );
        result = 0;
    }

    return 0;
}

int firstTest( char a[] )
{
    int i;

    for( i = 0; i < 4; i++ ){
        if ( a[i] != '$' ){
            return 0;
            break;
        }
        return 1;
    }
}

int secondTest( char a[] )
{
    if( my_array[12] != '$' )
        return 0;
    else
        return 1;
}

int thirdTest( char a[] )
{
    int i;

    for( i = 21; i < 25; i++ ){
        if ( a[i] != '$' ){
            return 0;
            break;
        }
        return 1;
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-02T20:46:58.057

sscanf 应该做的工作

```
 char my_array[50] = "$$$$01FF4C68$02543EFE$$$$";
  int n,m;
  if( !sscanf(my_array,"$$$$%*8[0-9A-H]%n$%*8[0-9A-H]$$$$%n",&n,&m) && n==12 && m==25 )
    puts("ok");
  else
    puts("not ok"); 
```

# windows-8 - Windows 8 - 只接受数字的文本框出错

> ID：13673141
> 
> 赞同：1
> 
> 时间：2012-12-02T19:51:53.043
> 
> 标签：windows-8, textbox, numbers

这是我用 C# 编写的带有 Key Down 事件处理程序的 TextBox

```
private void TextBox_KeyDown(object sender, Windows.UI.Xaml.Input.KeyRoutedEventArgs e)
{
        //ONLY ACCEPTS NUMBERS
        char c = Convert.ToChar(e.Key);
        if (!c.Equals('0') && !c.Equals('1') && !c.Equals('2') && !c.Equals('3') && !c.Equals('4') &&
            !c.Equals('5') && !c.Equals('6') && !c.Equals('7') && !c.Equals('8') && !c.Equals('9'))
        {
            e.Handled = true;
        }
} 
```

它确实可以防止字母从 a 到 z。但是，如果我输入像 !@#$%^&*()_+ 这样的符号，它仍然会接受它们。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:02:53.427

您可以使用[Char.IsDigit](http://msdn.microsoft.com/en-us/library/7f0ddtxh.aspx)

```
e. Handled = !Char.IsDigit(c); 
```

但这在复制\粘贴的情况下对您没有多大帮助。

另请检查右侧的相关问题。例如[创建只接受数字的 WPF 文本框](https://stackoverflow.com/questions/1226128/create-wpf-textbox-that-accepts-only-numbers?rq=1)

* * *

更新

只为字母尝试

```
e.Handled = Char.IsLetter(c); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-17T18:28:12.097

没有可靠的方法来处理按键按下或按键向上事件，因为出于某种奇怪的原因 shift 4 即 $ 符号返回 4 而不是键值。

最好的解决方法是在使用之前捕获该值并检查它是否为数字，然后提醒用户。

```
var IsNumeric = new System.Text.RegularExpressions.Regex("^[0-9]*$");
        if (!IsNumeric.IsMatch(edtPort.Text))
        {
            showMessage("Port number must be number", "Input Error");
            return;
        } 
```

尝试告诉用户美元符号现在是一个数字，这绝不是理想的，而是更好的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T13:44:45.703

试试这个代码。但有时您会看到您按下的 char 并立即将其删除。不是最好的解决方案，但足够了

```
private void TextBox_OnTextChanged(object sender, TextChangedEventArgs e)
{
    var textBox = sender as TextBox;
    if (textBox == null)
        return;

    if (textBox.Text.Length == 0) return;

    var text = textBox.Text;

    int result;
    var isValid = int.TryParse(text, out result);
    if (isValid) return;

    var selectionStart = textBox.SelectionStart;
    var resultString = new string(text.Where(char.IsDigit).ToArray());
    var lengthDiff = textBox.Text.Length - resultString.Length;

    textBox.Text = resultString;
    textBox.SelectionStart = selectionStart - lengthDiff;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-20T17:18:44.077

这可能会有所帮助，这就是我使用的。

```
 private void txtBoxBA_KeyDown(object sender, KeyRoutedEventArgs e)
    {
        // only allow 0-9 and "."
        e.Handled = !((e.Key.GetHashCode() >= 48 && e.Key.GetHashCode() <= 57));

        // check if "." is already there in box.
        if (e.Key.GetHashCode() == 190)
            e.Handled = (sender as TextBox).Text.Contains(".");
    } 
```

# opengl - nVidia openGL 无法显示简单的 COLOR_INDEX 纹理

> ID：13673144
> 
> 赞同：0
> 
> 时间：2012-12-02T19:52:17.377
> 
> 标签：opengl, nvidia, texture-mapping

我有我的第一个简单的 OpenGL 程序来使用 OpenGL 显示 2D 图像。我正在使用基于索引的图像，调用`glTexImage2D(.. GL_RGB, ... GL_COLOR_IMAGE...)` 这在 ATI 卡上按预期工作。换成 nVidia 卡后，我看到一个黑色四边形而不是我的图像。鉴于它适用于 ATI，我猜代码基本上是正确的 - 但也许我错过了一个设置 - 或者卡不支持我正在做的事情（？！）

首先是安装代码（我使用的是 Qt btw，所以可能缺少一些上下文调用）：-

```
glClearColor( 0.1, 0.1, 0.25, 0); // background color

glEnable(GL_DEPTH_TEST);
glDepthFunc(GL_LEQUAL);

glPixelStorei(GL_UNPACK_ALIGNMENT, 4);      // 4-byte pixel alignment

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR ); 
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);
glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL ); 
```

这是设置纹理的代码：-

```
GLfloat Greys[256];
GLfloat Ones[256];
for( int I(0); I < 256; ++I )
{
  Greys[I] = (GLfloat)I/256;
  Ones[I] = 1.0;
}

makeCurrent();
glPixelMapfv( GL_PIXEL_MAP_I_TO_R, 256, Greys );
glPixelMapfv( GL_PIXEL_MAP_I_TO_G, 256, Greys );
glPixelMapfv( GL_PIXEL_MAP_I_TO_A, 256, Ones );

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, m_pImage->size().width(), m_pImage->size().height(), 0, GL_COLOR_INDEX, GL_UNSIGNED_BYTE, m_pImage->bits() ); 
```

这是显示代码

```
glLoadIdentity();
// Get the camera in the right place
glRotatef( 180, 1, 0, 0 );
// Apply the Pan(Offset), and Zoom
glTranslatef( m_Offset.x(), m_Offset.y(), 0);
glScalef( m_Zoom, m_Zoom, 1 );

// Display the image texture mapped to a rectangle
glColor3f( 1,1,0 );

glEnable(GL_TEXTURE_2D);
glBegin(GL_QUADS);
glTexCoord2f( 0, 0 );  glVertex3f( 0, 0, 10 );
glTexCoord2f( 1, 0 );   glVertex3f( ImSize.width(), 0, 10 );
glTexCoord2f( 1, 1 );   glVertex3f( ImSize.width(), ImSize.height(), 10 );
glTexCoord2f( 0, 1 );   glVertex3f( 0, ImSize.height(), 10 );
glEnd();
glDisable(GL_TEXTURE_2D); 
```

我还使用对 glTexImage2D 的直接 RGB - RGB 调用在单独的窗口中以全彩显示相同的图像。所以我相信尺寸是可以接受的。

如果我删除对 glTexImage2D 的调用，那么我会按预期得到一个黄色四边形。因此，我怀疑设置颜色 LUT 的调用有问题。

主板是华硕 GeForce 210 静音 Windows XP 32 位。nVidia 驱动程序 6.14.13.681 (9-23-2012)，R306.81（分支：r304_70-122）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:30:00.837

您是否测试过 OpenGL 错误代码？您可以使用以下代码：[https](https://gist.github.com/4144988) ://gist.github.com/4144988 - 关于颜色索引格式？如果驱动程序根本不支持它，我不会感到惊讶。这些天没有人使用颜色索引格式。如果要绘制调色板纹理，请将调色板上传到 1D RGB 纹理，并将颜色索引图像上传到单个通道（GL_RED 或 GL_LUMINANCE，取决于 OpenGL 版本）2D 纹理，并将该值用作调色板纹理的索引。

# xml - 如何找到计数最高的节点？

> ID：13673146
> 
> 赞同：2
> 
> 时间：2012-12-02T19:52:17.960
> 
> 标签：xml, xpath, xquery

使用 XPath 或 XQuery，我如何选择另一个节点出现次数最多的节点？

例如，我如何找到鸡蛋最多的篮子？

```
<basket name="1">
        <egg></egg>
        <egg></egg>
</basket>
<basket name="2">
        <egg></egg>
</basket>
<basket name="3">
        <egg></egg>
        <egg></egg>
        <egg></egg>
        <egg></egg>
</basket> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:11:37.683

这是一种解决方案（TIMTOWTDI）：

```
let $nodes := <xml>
  <basket name="1">
          <egg></egg>
          <egg></egg>
  </basket>
  <basket name="2">
          <egg></egg>
  </basket>
  <basket name="3">
          <egg></egg>
          <egg></egg>
          <egg></egg>
          <egg></egg>
  </basket>
</xml>
let $max := max(for $c in $nodes//basket return count($c/egg))
return $nodes/basket[count(egg) = $max] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T22:06:16.983

**这既是一个 XPath 2.0 表达式，也是一个 XQuery，用于选择想要的元素**：

```
/*/basket[egg[max(/*/basket/count(egg))]] 
```

**基于 XSLT 2.0 的验证**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:sequence select="/*/basket[egg[max(/*/basket/count(egg))]]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档**（您提供的 XML 片段，包装到单个顶部元素中以成为格式良好的 XML 文档）时：

```
<t>
    <basket name="1">
        <egg></egg>
        <egg></egg>
    </basket>
    <basket name="2">
        <egg></egg>
    </basket>
    <basket name="3">
        <egg></egg>
        <egg></egg>
        <egg></egg>
        <egg></egg>
    </basket>
</t> 
```

**计算 XPath 表达式并将计算结果复制到输出**：

```
<basket name="3">
        <egg/>
        <egg/>
        <egg/>
        <egg/>
    </basket> 
```

**请注意**：

没有“另一个节点出现次数最多的节点”这样的**东西**。

事实上，根据实际的 XML 文档，可能有许多元素包含相同的最大数量的其他元素。

**如果您只想获得一个这样的元素，请按文档顺序说第一个，然后使用**：

```
/*/basket[egg[max(/*/basket/count(egg))]][1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T20:26:38.583

```
<xml>
    <basket name="1">
        <egg></egg>
        <egg></egg>
    </basket>
    <basket name="2">
        <egg></egg>
    </basket>
    <basket name="3">
        <egg></egg>
        <egg></egg>
        <egg></egg>
        <egg></egg>
    </basket>
</xml> 
```

你可以尝试这样的 XPath

```
xml/basket[
    count(egg) > count(following-sibling::*/egg) and
    count(egg) > count(preceding-sibling::*/egg)
] 
```

或者如果您不仅要计算鸡蛋元素

```
xml/basket[
    count(child::*) > count(following-sibling::*/child::*) and
    count(child::*) > count(preceding-sibling::*/child::*)
] 
```

# qt - Qt 无法在 ui_mainwindow.h 上打开包含的文件

> ID：13673148
> 
> 赞同：2
> 
> 时间：2012-12-02T19:52:24.630
> 
> 标签：qt, include, qwidget, mainwindow

我正在 QT Creator 2.6 中制作一个项目。我正在推广一个名为 cPlotter 的 QWidget 子类，但是当我尝试编译项目时，它失败了，因为它找不到文件 cplotter.h。我发现这是因为文件“ui_mainwindow.h”会自动更新，包括括号中的文件 cplotter.h 而不是引号。

因此，ui_mainwindow.h 更新如下：

```
#include < cplotter.h > 
```

但应该是：

```
 #include “cplotter.h” 
```

因此，每次我在 GUI 上更改某些内容时，手动编辑非常烦人。

有谁知道这个的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T11:34:25.477

INCLUDEPATH += $$PWD（或其中 cplotter.h）

# json - 第三方 cookie - 从其他域读取

> ID：13673156
> 
> 赞同：3
> 
> 时间：2012-12-02T19:52:47.227
> 
> 标签：json, cookies

我正在创建第三方 cookie`<img src="http://example.com/test.php" />`

测试.php：

```
if($_GET['r']) {
    header('Content-type: image/gif');
    // echo transparent 1x1 pixel
    exit;
} else {
    setcookie('name', md5(time()), time()+60*60*24*30, '/');
    $url = 'http://example.com/test.php?r=1';
    header('Location: '.$url);
   exit;
} 
```

此代码创建第三方 cookie。有什么方法可以通过 javascript 从与 example.com 不同的域读取创建的 cookie？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:07:27.030

不能。JavaScript 只能访问当前文档的 cookie，不能访问它的任何依赖项。

如果不是这种情况，那么作者可以从您可能拥有帐户的任何网站加载图像，使用 JavaScript 读取 cookie，将其 Ajax 到他们的服务器，然后获得该站点当前登录令牌的副本。这将是一个巨大的安全漏洞。

# ruby - Ruby - 如何从像数组这样的链表中删除节点

> ID：13673158
> 
> 赞同：1
> 
> 时间：2012-12-02T19:52:54.897
> 
> 标签：ruby, arrays, linked-list

我在 Ruby 中使用数组作为类似于链表的东西。因此我必须`ary = [1,2,3]` 插入一个我做的节点`ary.insert(2,99)`导致`[1,2,99,3]`

现在的问题是：我将如何做相反的事情？我希望存在一个函数`ary.extract(2)`可以返回`99`并将我的数组保持在状态`[1,2,3]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:57:38.690

你的意思是像[delete_at](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-delete_at)？

```
1.9.3p125 :017 > ary = [1,2,3] 
 => [1, 2, 3] 
1.9.3p125 :018 > ary.insert(2,99)
 => [1, 2, 99, 3] 
1.9.3p125 :019 > ary.delete_at(2)
 => 99 
1.9.3p125 :020 > ary
 => [1, 2, 3] 
1.9.3p125 :021 > 
```

或者，如果您想按值而不是索引，则可以使用[delete](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-delete)：

```
1.9.3p125 :021 > ary = [1,2,3] 
 => [1, 2, 3] 
1.9.3p125 :022 > ary.insert(2,99)
 => [1, 2, 99, 3] 
1.9.3p125 :023 > ary.delete(99)
 => 99 
1.9.3p125 :024 > ary
 => [1, 2, 3] 
```

第二个版本的小问题：它将删除*所有*出现的值，以防有重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:55:15.447

`slice`会成功的：

```
a = [1,2,99,3]
v = a.slice! 2

p v
# => 99

p a
# => [1, 2, 3] 
```

# list - 从 Erlang 中的列表中删除重复元素

> ID：13673161
> 
> 赞同：18
> 
> 时间：2012-12-02T19:53:10.877
> 
> 标签：list, erlang

如何从 Erlang 的列表中删除重复项？

假设我有一个类似的列表：

```
[1,1,2,3,4,5,5,6] 
```

我怎样才能得到：

```
[1,2,3,4,5,6] 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-02T22:15:31.903

您可以使用`sets`，例如：

```
my_nonDuplicate_list1() ->
    List = [1,1,2,3,4,5,5,6],
    Set = sets:from_list(List),
    sets:to_list(Set). 
```

这将返回`[1,2,3,4,5]`，不再重复，但很可能未排序。

不使用的另一种可能性`sets`是：

```
my_nonDuplicate_list2() ->
    List = [1,1,2,3,4,5,5,6],
    lists:usort(List). 
```

在这种情况下，它返回`[1,2,3,4,5]`，不再重复和排序。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-03-02T20:39:36.060

对于那些希望保留列表顺序的人：

```
remove_dups([])    -> [];
remove_dups([H|T]) -> [H | [X || X <- remove_dups(T), X /= H]]. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T08:27:53.543

`Preserve the order of the elements`帮助您学习如何操作列表的可能解决方案将涉及两个功能：

```
delete_all(Item, [Item | Rest_of_list]) ->
    delete_all(Item, Rest_of_list);
delete_all(Item, [Another_item| Rest_of_list]) ->
    [另一个项目 | delete_all(Item, Rest_of_list)];
删除全部（_，[]）-> []。

删除重复项（列表）-> 删除（列表，[]）。
移除（[]，这个）-> 列表：反向（这个）；
移除（[A|Tail]，Acc）->
    删除（删除全部（A，尾巴），[A|Acc]）。

```

去测试，

```
Eshell V5.9（使用 ^G 中止）
1> mymod:remove_duplicates([1,2,3,1,2,4,1,2,1])。
[1,2,3,4]
2>

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-19T19:52:54.353

我一开始会做这样的事情来保持秩序，虽然**不推荐**。请记住，这`AddedStuff ++ Accumulator`很好，但`Accumulator ++ AddedStuff`确实很糟糕。

```
rm_dup(List) ->
    lists:foldl(
        fun(Elem, Acc) ->
            case lists:member(Elem, Acc) of
                true ->
                    Acc;
                false ->
                    Acc ++ [Elem]
            end
        end, [], List
    ). 
```

如果您想保留订单，此解决方案效率更高：

```
rm_dup(List) ->
    lists:reverse(lists:foldl(
        fun(Elem, Acc) ->
            case lists:member(Elem, Acc) of
                true ->
                    Acc;
                false ->
                    [Elem] ++ Acc
            end
        end, [], List
    )). 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-02T09:40:14.810

模块`sets`有两个可以组合并以有效方式完成工作的函数：`sets:from_list/1`返回一个包含列表所有元素的集合（定义中没有重复的元素），并`sets:to_list/1`返回一个包含集合元素的列表。这是一个使用示例：

```
4> sets:to_list(sets:from_list([1,1,2,3,4,5,5,6])).
[3,6,2,5,1,4] 
```

我们可以将函数定义为

```
nub(L) -> sets:to_list(sets:from_list(L)). 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-03T21:45:01.650

在我看来，最好的选择是使用`lists:usort()`

但是，如果您不想使用 BIF，并且希望对列表进行排序，我建议使用快速排序的版本，在此实现中，您将获得排序后的列表而没有重复值。

```
unique_sort([]) -> [];
unique_sort([Pivot|T]) ->
unique_sort ([X || X <- T, X < Pivot ) ]++
[Pivot] ++
unique_sort ([X || X <- T, X > Pivot ]). 
```

# android - 开发机器的 android 最低硬件规格 - 我可以使用笔记本进行编码吗？

> ID：13673163
> 
> 赞同：0
> 
> 时间：2012-12-02T19:53:14.333
> 
> 标签：android, vim, requirements

到目前为止，我一直在使用令人惊叹的 AID 应用程序直接在我的 Galaxy nexus 和 nexus 7 上进行开发。

但是，由于N7是果冻豆，所以无法提供日志，我觉得需要一个迷你笔记本才能使用adb logcat。

我主要担心的是只有 1gb（如果我升级的话，我会升级 2gb）和 1.5-1.83GHz atom CPU 的功能不够强大。

我可以通过不使用模拟器并直接在我的两台设备上进行测试来解决某些问题，这样可以为我节省很多。此外，我很想只使用 vim 和命令行工具而不是 eclipse，这可能会再次将我从缓慢的 PC 中拯救出来。

你们有什么感想？笔记本是不是供电不足？如果我只使用 vim 而没有模拟器怎么办？

旁注，有人真的在 vim/命令行中编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:11:53.190

> 只有 1gb 的东西（如果我升级的话，我会升级 2gb）和一个 1.5-1.83GHz atom CPU

只要您不打算运行平板电脑模拟器，就可以正常工作。有时我必须在我的华硕 EEEPC 上使用相同的 CPU 工作，到目前为止我还没有遇到任何问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:13:07.840

使用 1gb RAM 和使用 vim/命令行工具是可行的。然而，eclipse 提供了一个项目范围的视角，这在 vim 中是难以复制的（vim 高级用户可能同样高效，如果不是更多的话）。所以就内存1而言，2gb RAM就可以了。在设备上进行测试总是比模拟器好。

不过，另一件事是，具有多个模块依赖性的命令行构建对于设置和维护而言并非易事。这是因为 Google 一直在修改 build.xml 文件，经常破坏现有的构建脚本。因此，如果您精通构建脚本的内部结构并准备好使用它们，那么您应该没问题。

在没有基于 Eclipse 的断点调试支持的情况下调试 Android 应用程序也可能是一个重大问题。使用此功能可以在更短的时间内捕获一些错误。因此，如果您不想使用 Eclipse，请相应地进行计划。

Eclipse 还为编写测试用例提供了非常好的 JUnit/Robotium 支持，你不会用 vim 得到这个。

当我写下这些要点时，我认为在 2gb 笔记本中运行 Eclipse 应该是可能的（只是不要在进行开发时运行其他应用程序），因此是推荐的。

我已经广泛使用 vim 只是不用于 Android 开发。如果您愿意，也可以为 Eclipse 安装 vim 插件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T20:18:16.340

现代笔记本硬件当然可以进行软件开发；事实上，许多人（业余爱好者和专业人士）都使用笔记本作为他们的主要开发平台。

但是，使用迷你/超小型外形尺寸，您将为功能较弱的机器支付更多费用。除非您需要极高的移动性，否则我建议您使用标准笔记本电脑，并在 RAM（8+ GB）和 SSD 上多花一点钱。（那么，大型 IDE 和仿真都不会超出范围。）如果钱是个问题，你仍然可以得到看起来笨重但功能相当强大的 15 英寸或 17 英寸笔记本电脑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T20:11:44.407

我认为您的配置足以运行 Eclipse，我自己必须在我的 PC 上删除一些 Composant，因为我们有 1 台 PC 用于工作/Internet/Eclipse 和 1 台 PC 用于游戏等...，我使用 Galaxy S2 并且不使用模拟器很多次，是的，我有一些时间慢下来，但是尝试使用最小配置和没有仿真器但升级到 2 GB 的 Eclipse 我有自己的 2 GB 这里和双核 E5200

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T20:15:30.230

是的，动力不足。对于 Windows PC，我想要 4gb 的内存，不确定 Linux，但无论哪种方式，原子都非常慢。

我相信它会起作用，但它不会很有趣，我最担心磁盘速度，因为这是最让我发疯的原因。

我也会利用 ide 及其所有不错的功能

# php - 从函数调用变量并在文本字段中显示 oop php

> ID：13673165
> 
> 赞同：0
> 
> 时间：2012-12-02T19:53:20.157
> 
> 标签：php, html, oop, function, variables

我想以 html 表单（在文本字段或选择列表中）显示用户特定数据

我在 MyClass 类中有一个函数 ShowUserInformation()：

```
function ShowUserInformation()
{
    $query = "SELECT id, name, email FROM saloni WHERE id = '$_SESSION[ID_korisnika]'";
    $result = mysql_query($query);
    while($row=mysql_fetch_array($result)):
        $id= $row['id'];
        $name= $row['name'];
        $email = $row['email'];
        $address= $row['address'];
        $address2= $row['address2'];
        $address3= $row['address3'];
    endwhile;   

    return $result;
} 
```

我的问题是：如何在文本框或选择列表的另一页上显示 $name、$email、$id... 的值？

如果我以程序方式执行此操作，它会在我执行此操作时起作用：

```
<input type="text" value="<?php echo $name ?>" name="name" class="" /> 
```

但是，我如何以 oop 方式显示 $name,$email,$ID...？有没有办法直接调用它而不是将其声明为类变量然后调用它。我已经包含了文件，创建了对象...

```
$my_class = new MyClass; //create an object of class 
```

HTML - 我试过这样的东西......

```
<input type="text" value="<?php echo $my_class->ShowUserInformation($name)?>" name="name" class="" /> 
```

我是 PHP 和 oop 的新手，所以对我来说很容易:)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:07:02.993

如果您只计划返回一行，那么为什么不使用[mysql_fetch_assoc()](http://php.net/manual/en/function.mysql-fetch-assoc.php)

```
class MyClass{
    public function GetUserInformation(){
        $query = "SELECT id, name, email FROM saloni WHERE id = '$_SESSION[ID_korisnika]'";
        $result = mysql_query($query);
        $info = mysql_fetch_assoc($result);
        return $info;
    } 
}

$class = new MyClass;
$info = $class->GetUserInformation();?>

<input type="text" value="<?php echo $info['id']?>" name="id" class="" />
<input type="text" value="<?php echo $info['name']?>" name="name" class="" /> 
```

**注意：**不推荐使用 mysql_* 函数，您应该转而使用 MySQLi 或 PDO

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:04:26.893

首先，更改获取数据的函数：

```
function ShowUserInformation()
{
    // Assuming you need only one user, I have set "LIMIT" to "1"
    $query = "SELECT id, name, email, address, address2, address3 FROM saloni WHERE id = '$_SESSION[ID_korisnika]' LIMIT 1";
    $result = mysql_query($query);

    return mysql_fetch_array($result);
} 
```

现在，获取信息：

```
$my_class = new MyClass;
$userData = $my_class->ShowUserInformation();

// HTML
<input type="text" value="<?php echo $userData['name']; ?>" name="name" class="" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T20:32:10.280

请试试这个：

```
<?php  
$show_info=ShowUserInformation();  

$data = $show_info->fetchAll(PDO::FETCH_ASSOC);  
foreach($data as $row){ ?>
<input type="text" value="<?php  $row['name']; ?>" name="name" class="" />
<?php } ?> 
```

或者

```
<?php $show_info=ShowUserInformation();  
while ($row= mysql_fetch_assoc($show_info){ ?>
<input type="text" value="<?php  $row['name']; ?>" name="name" class="" />
<?php } ?> 
```

# c# - 选择多个对象时不显示属性 C# 属性网格

> ID：13673166
> 
> 赞同：1
> 
> 时间：2012-12-02T19:53:26.947
> 
> 标签：c#, .net, properties, attributes, propertygrid

我知道如何通过使用此属性来防止属性显示在属性网格中 `[Browsable(false)]`

但我想阻止仅当在属性网格中选择超过 1 个对象时才浏览此属性。

I mean that when only one object is selected in the property grid this property will be shown but when 2 or more objects are selected this property won't be browsable!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:04:29.253

注意：我自己没有做过，但是根据文档...

你有没有试过`BrowsableAttributes`，记录[在这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.propertygrid.browsableattributes%28v=vs.80%29.aspx)？在您的选择代码中，您可能会更改`propertyGrid.BrowsableAttributes`以反映它是“单独”选择还是“多重”选择，并通过相应地标记变量，您应该能够获得您正在寻找的显示。

[本帖](https://stackoverflow.com/questions/4690481/conditional-browsable-attribute)或许能帮到你！

# string - 如何计算字符串列表中的整数。哈斯克尔

> ID：13673169
> 
> 赞同：2
> 
> 时间：2012-12-02T19:53:38.770
> 
> 标签：string, list, haskell

有一个字符串列表 ["f", "1", "h", "6", "b", "7"]。

我怎样才能在这个列表中计算 Int ？

现在我有了这个算法，但它不是那么好。

```
import Data.Char
let listOfStrings = ["f", "1", "h", "6", "b", "7"]
let convertedString = "f1h6b7"
let listOfInt = map (\x -> read [x]::Int) (filter (\x -> isDigit x) convertedString)
length listOfInt
Prelude> 3 
```

此外，我无法将 listOfStrings 转换为一个字符串。这个算法甚至不能正常工作

你能帮我优化吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T20:12:37.367

1）使用`reads :: Reads Int`（这个表达式只是`reads :: String -> [(Int, String)]`伪装）来测试一个字符串是否是一个整数值的表示：

```
isNumber :: String -> Bool
isNumber s = case (reads s) :: [(Int, String)] of
    [(_, "")] -> True
    _         -> False 
```

为什么[`reads`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3areads)？因为它返回有关解析过程的附加信息，我们可以从中得出它是否成功的结论。`read :: Int`只会抛出异常。

2）然后用它过滤一个字符串列表并取它的长度：

```
intsCount :: [String] -> Int 
intsCount = length . filter isNumber 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T20:13:39.427

基本原理是

*   计算具有给定属性的列表中的项目

`Prelude`这很容易通过一些功能解决：

```
countItemsWith :: (a -> Bool) -> [a] -> Int
countItemsWith property list = length $ filter property list 
```

剩下的就是找到一个好的表达式来确定 a 是否`String`是整数的表示。我们可以编写自己的测试，但我们也可以为此重用一个`Prelude`函数，

```
isIntegerRepresentation :: String -> Bool
isIntegerRepresentation s = case reads s :: [(Integer,[Char])] of
                             [(_,"")] -> True
                             _        -> False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T20:12:12.653

`concat`连接多个列表，因此`concat listOfStrings`将导致`"f1h6b7"`. 如果你只想计算正整数，你可以尝试一些类似的东西

```
countInts (x:xs) = if isDigit x then 1 + countInts xs else countInts xs 
```

其中`(x:xs)`是具有头部元素`x`和尾部的列表的模式`xs`。（所以这将适用，`convertedString`因为它是一个字符列表，`[Char]` *但不适*用于`listOfStrings`因为它实际上`[String]`可以扩展为`[[Char]]`）。

你得到的实际输入是什么？`listOfStrings`还是`convertedString`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T20:13:47.500

您的代码可以重写为：

```
import Data.Char

let listOfStrings = ["f", "1", "h", "6", "b", "7"]
let convertedString = concat listOfStrings
let listOfInts = map digitToInt (filter isDigit convertedString)

length listOfInts
Prelude> 3 
```

要从字符串列表变为单个字符串，只需使用`concat`. Concat 接受一个列表的列表，并返回一个列表，列表中的所有元素一个接一个，并且由于字符串是`Char`s 的列表，`concat`在这种情况下，需要一个列表的列表`Char`，并返回一个列表`Char`, （又名字符串）。

过滤器从 using 简化`\x -> isDigit x`为 just `isDigit`。这是完全相同的功能。

`digitToInt`我使用而不是读取数字`\x -> read [x] :: Int`

请注意，如果您只想查找 中的位数`convertedString`，您可以执行以下操作：

```
let listOfDigits = filter isDigit convertedString

length listOfDigits
Prelude> 3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T20:26:57.673

我相信对你来说最好的答案是

```
import Data.List (foldl')
import Data.Char (isNumber)
countNumb l = foldl' (\x y -> x+1) 0 (filter isNumber l) 
```

在这里我们检查 char 是否为数字并计算它们

附言。这将适用于`['f', '1', 'h', '6', 'b', '7']`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T07:46:30.463

`Bool`我发现使用以下方法转换为 0 或 1通常很有用`fromEnum`：

```
import Data.Char

countInts = sum . map (fromEnum . isNumber) . concat 
```

# http - 不更新 document.location 的 HTTP 重定向

> ID：13673174
> 
> 赞同：0
> 
> 时间：2012-12-02T19:53:53.220
> 
> 标签：http, redirect

我们有一项服务位于类似`services.example.com/123456/*`. 我们希望在类似 的 url 上提供相同的服务`www.example.com`。原始服务由不适用于自定义域的 PaaS 提供商提供。

我们希望请求像这样：浏览器请求`www.example.com/path`，我们告诉它去`services.example.com/123456/path`，它从那里获取数据，但将响应视为来自`www.example.com/path`- 所以不会更新`document.location`或顶部的 url，并将链接视为相对于原始路径。

这是可能的，还是我们必须有一个自己的类似代理的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:53:44.707

您需要一个进行 url 重写的代理。

# java - 用逗号分隔数组列表中的字符 java

> ID：13673175
> 
> 赞同：1
> 
> 时间：2012-12-02T19:53:55.290
> 
> 标签：java, arrays, list, arraylist, char

> **可能重复：**
> [从集合/数组/列表创建逗号分隔字符串的最复杂方法？](https://stackoverflow.com/questions/205555/the-most-sophisticated-way-for-creating-comma-separated-strings-from-a-collectio)

除最后一个字符外，所有字符都应以逗号分隔。
示例输出：“猜测的先前字符：a、b、c、x”或“猜测的先前字符：a”

这是我所拥有的：

```
ArrayList<Character> charsGuessed = new ArrayList<Character>();

//takes in char guess from user
char guess=getCharacterGuess(in);

//adds char guessed to array
charsGuessed.add(guess);

int size=charsGuessed.size();
System.out.print("Previous characters guessed: ");

for(int i=0; i<size; i++)
{
   if(i<=size-1)
   {
      System.out.print(charsGuessed.get(i) + " ");
   }
   else
   {
      System.out.print("," + " " + charsGuessed.get(i));
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:59:12.980

使用`StringBuilder`更好：

```
StringBuilder builder = new StringBuilder();
for (int i = 0; i < arraySize; i++){
    builder.append(charsGuessed.get(i));
    if (i < arraySize - 1){
        builder.append(", ");
    }
}
System.out.println(builder.toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:05:30.330

[bellum 的回答](https://stackoverflow.com/a/13673232/697449)涵盖了`StringBuilder`well 的使用。如果你碰巧在使用[Guava](https://code.google.com/p/guava-libraries/)，你可以使用[`Joiner`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Joiner.html)：

```
String charsGuessedConcat = Joiner.on(", ").join(charsGuessed);
System.out.print("Previous characters guessed: " + charsGuessedConcat); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T20:04:28.793

这非常简单。基本上，您希望在列表中的每个字符之后打印/附加一个逗号，除了最后一个字符。

例子：

```
private static void printGuessedCharacters(List<Character> chars) {
    System.out.print("Characters guessed: ");

    if(chars.isEmpty()) {
        System.out.println("none.");
        return;
    }

    for(int i = 0; i < chars.size(); i++) {
        System.out.print(chars.get(i));

        if(i < chars.size() - 1) { // If it's not the last char in list.
            System.out.print(", ");
        }
    }
    System.out.println();
} 
```

* * *

附带说明一下，如果您想要一个仅包含唯一值的集合，您可以考虑使用 a`HashSet`而不是`ArrayList`. 这将防止您的程序多次打印出相同的字符。

# java - 谷歌数据存储 - 查询键值

> ID：13673180
> 
> 赞同：8
> 
> 时间：2012-12-02T19:54:26.803
> 
> 标签：java, google-app-engine, google-cloud-datastore

我有一个 EntityKind SuggestedInterest。当我用键“GrpId”和属性“suggestedint”填充它时。

现在，我需要请求的“GrpId”的“suggestedint”值

因此，我将查询编写为：

```
String findSuggestedInterest(String grpId)
{
    DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
    Filter filter = new FilterPredicate(Entity.KEY_RESERVED_PROPERTY,FilterOperator.EQUAL,grpId);
    Query q0 = new Query("SuggestedInterest").setFilter(filter);
    PreparedQuery pq0 = datastore.prepare(q0);
    Entity result = pq0.asSingleEntity();
    return result.getProperty("suggestedint").toString();       
} 
```

当我执行此代码时，我得到

```
java.lang.IllegalArgumentException: __key__ filter value must be a Key 
```

开发人员文档告诉使用 Entity.KEY_RESERVED_PROPERTY 来查询键，但我想我误解了。查询 key 的正确方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-02T20:30:34.300

你应该通过它 a`Key`而不是`String`：

```
Key grpKey = KeyFactory.createKey("SuggestedInterest", grpId) 
```

然后使用它：

```
 Filter filter = 
    new FilterPredicate(Entity.KEY_RESERVED_PROPERTY,FilterOperator.EQUAL,grpKey); 
```

# r - 无法在 R 中编译 RcppArmadillo

> ID：13673183
> 
> 赞同：6
> 
> 时间：2012-12-02T19:54:40.183
> 
> 标签：r, rcpp

我在编译 RcppArmadillo 时遇到问题。这是我尝试安装软件包时的结果：

```
 > install.packages("RcppArmadillo")
Installing package(s) into ‘/home/*****/R/i686-pc-linux-gnu-library/2.15’
(as ‘lib’ is unspecified)
trying URL 'http://cran.rstudio.com/src/contrib/RcppArmadillo_0.3.4.4.tar.gz'
Content type 'application/x-gzip' length 742125 bytes (724 Kb)
opened URL
==================================================
downloaded 724 Kb

Loading required package: survival
Loading required package: stats
Loading required package: utils
Loading required package: graphics
Loading required package: splines
Hmisc library by Frank E Harrell Jr

Type library(help='Hmisc'), ?Overview, or ?Hmisc.Overview')
to see overall documentation.

NOTE:Hmisc no longer redefines [.factor to drop unused levels when
subsetting.  To get the old behavior of Hmisc type dropUnusedLevels().

Attaching package: ‘Hmisc’

The following object(s) are masked from ‘package:survival’:

    untangle.specials

The following object(s) are masked from ‘package:base’:

    format.pval, round.POSIXt, trunc.POSIXt, units

    Welcome at Sun Dec  2 18:54:49 2012 
    * installing *source* package ‘RcppArmadillo’ ...
    ** package ‘RcppArmadillo’ successfully unpacked and MD5 sums checked
    ** libs
    g++ -I/usr/share/R/include -DNDEBUG   -I"/home/******/R/i686-pc-linux-gnu-library/2.15/Rcpp/include"  -I../inst/include -fpic  -O3 -pipe  -g  -c RcppArmadillo.cpp -o RcppArmadillo.o
    g++ -I/usr/share/R/include -DNDEBUG   -I"/home/******/R/i686-pc-linux-gnu-library/2.15/Rcpp/include"  -I../inst/include -fpic  -O3 -pipe  -g  -c fastLm.cpp -o fastLm.o
    Loading required package: survival
    Loading required package: stats
    Loading required package: utils
    Loading required package: graphics
    Loading required package: splines
    Hmisc library by Frank E Harrell Jr

    Type library(help='Hmisc'), ?Overview, or ?Hmisc.Overview')
    to see overall documentation.

    NOTE:Hmisc no longer redefines [.factor to drop unused levels when
    subsetting.  To get the old behavior of Hmisc type dropUnusedLevels().

    Attaching package: ‘Hmisc’

    The following object(s) are masked from ‘package:survival’:

        untangle.specials

    The following object(s) are masked from ‘package:base’:

        format.pval, round.POSIXt, trunc.POSIXt, units

    g++ -shared -o RcppArmadillo.so RcppArmadillo.o fastLm.o Welcome at Sun Dec 2 18:55:06 2012
-L/home/******/R/i686-pc-linux-gnu-library/2.15/Rcpp/lib -lRcpp -Wl,-rpath,/home/******/R/i686-pc-linux-gnu-library/2.15/Rcpp/lib -llapack -lblas -lgfortran -lm -lquadmath -L/usr/lib/R/lib -lR
    Loading required package: survival
    Loading required package: stats
    Loading required package: utils
    Loading required package: graphics
    Loading required package: splines
    Hmisc library by Frank E Harrell Jr

    Type library(help='Hmisc'), ?Overview, or ?Hmisc.Overview')
    to see overall documentation.

    NOTE:Hmisc no longer redefines [.factor to drop unused levels when
    subsetting.  To get the old behavior of Hmisc type dropUnusedLevels().

    Attaching package: ‘Hmisc’

    The following object(s) are masked from ‘package:survival’:

        untangle.specials

    The following object(s) are masked from ‘package:base’:

        format.pval, round.POSIXt, trunc.POSIXt, units
        g++: error: Welcome: No such file or directory
        g++: error: at: No such file or directory
        g++: error: Sun: No such file or directory
        g++: error: Dec: No such file or directory
        g++: error: 2: No such file or directory
        g++: error: 18:55:08: No such file or directory
        g++: error: 2012: No such file or directory
        make: *** [RcppArmadillo.so] Error 1
        ERROR: compilation failed for package ‘RcppArmadillo’
        * removing ‘/home/****/R/i686-pc-linux-gnu-library/2.15/RcppArmadillo’
        Warning in install.packages :
          installation of package ‘RcppArmadillo’ had non-zero exit status

        The downloaded source packages are in
            ‘/tmp/RtmpDAngtR/downloaded_packages 
```

'</p>

我在 Ubuntu 12.04 上使用 R 版本 2.15.2。首先我认为缺少一些依赖项，但我已经通过突触包管理器安装了 Armadillo (libarmadillo2 v2.4.2)，还安装了 g++ (v4.6.3)。我不熟悉 c++，所以我不知道是否需要一些额外的包。但是，安装 Rcpp 可以正常工作。

如果有人可以帮助我，我会非常高兴。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T20:29:55.657

`install.packages`并将`R CMD INSTALL`（重新）启动 R 并阅读您的`.Rprofile`. `if (interactive()) { }`因此，您应该考虑在文件中包装`.Rprofile`您只想在交互式会话（例如`library`或`require`调用）中运行的代码。

否则，您需要`--vanilla`在使用之前使用标志启动 R `install.packages()`，或者使用`R --vanilla CMD INSTALL`from bash。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:01:16.740

你发出的命令到底是什么

```
g++: error: Welcome: No such file or directory
g++: error: at: No such file or directory
g++: error: Sun: No such file or directory
g++: error: Dec: No such file or directory
g++: error: 2: No such file or directory
g++: error: 18:55:08: No such file or directory
g++: error: 2012: No such file or directory 
```

背部？

你知道如何构建一个 R 包吗？你做过`R CMD INSTALL ....`吗？我碰巧在 Ubuntu 12.* 上开发了这些包，所以我很确定这可行。

此外，我不确定您尝试阅读多少文档，但我们不建议在任何地方安装`libarmadillo`以使用[RcppArmadillo](http://dirk.eddelbuettel.com/code/rcpp.armadillo.html)。
该软件包提供了自己的一组 Armadillo 源，供其使用以及使用[RcppArmadillo](http://dirk.eddelbuettel.com/code/rcpp.armadillo.html)的其他 R 软件包。

这就是*Just Works (TM)*，因为仅 CRAN 上就有超过 20 个使用[RcppArmadillo](http://dirk.eddelbuettel.com/code/rcpp.armadillo.html)的软件包。

# java - 将组合框指定为输入

> ID：13673185
> 
> 赞同：0
> 
> 时间：2012-12-02T19:54:47.567
> 
> 标签：java, swing, jcombobox

用netbeans编写的以下代码假设将属于组合框的每个用户记录到系统中。用户名、密码和As是匹配的，但是在将组合框中的值分配为登录标准时遇到问题

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)       

{
    String inputusername = jTextField1.getText();
    String inputpassword = jPasswordField1.getText();
    String inputAs = jComboBox2.getText();
    if(inputusername.trim().length() == 0 ||
            (inputpassword.trim().length() == 0) ||
            (inputAs.trim().length() == 0)) {
        JOptionPane.showMessageDialog(this,"Error.", "Incomplete Fields", 
 JOptionPane.WARNING_MESSAGE);
    }else{

        Login l = new Login(inputusername,inputpassword,inputAs);
        jTextField3.setText(l.Log()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:38:19.157

你会使用：

`if (jComboBox.getSelectedItem.equals("name of one item in list")`

因此，如果您有一个 jComboBox 名称 planetsCombo 列出行星，并且您想为地球制定标准，它会说：

`if (planetscombo.getSelectedItem.equals("Earth")`

希望我有所帮助！

# multithreading - 多线程和文件 I/O , ThreadLocal 问题

> ID：13673195
> 
> 赞同：0
> 
> 时间：2012-12-02T19:55:40.217
> 
> 标签：multithreading, unit-testing, asp.net-mvc-4, c#-5.0

我有这个基类结构：基础：

```
public abstract class BackgroundTask
{
    protected readonly Logger Logger = LogManager.GetCurrentClassLogger();

    protected virtual void Initialize()
    {
        // initialize database access
    }

    public void Run()
    {
        Initialize();
        try
        {
            Execute();
            // insert to database or whatever
        }
        catch (Exception ex)
        {
            Logger.ErrorException(string.Format("Error proccesing task: {0}\r\n", ToString()), ex);
            Exceptions.Add(ex);
        }
        finally
        {
            TaskExecuter.Discard();
        }
    }

    protected abstract void Execute();
    public abstract override string ToString();
    public IList<Exception> Exceptions = new List<Exception>();
} 
```

任务执行者：

```
public static class TaskExecuter
{
    private static readonly ThreadLocal<IList<BackgroundTask>> TasksToExecute
        = new ThreadLocal<IList<BackgroundTask>>(() => new List<BackgroundTask>());

    public static void ExecuteLater(BackgroundTask task)
    {
        TasksToExecute.Value.Add(task);
    }

    public static void StartExecuting()
    {
        foreach (var backgroundTask in TasksToExecute.Value)
        {
            Task.Factory.StartNew(backgroundTask.Run);
        }
    }

    public static void Discard()
    {
        TasksToExecute.Value.Clear();
        TasksToExecute.Dispose();
    }
} 
```

文件任务：

```
public class FileTask : BackgroundTask
{
    protected static string BaseFolder = @"C:\ASCII\";
    private static readonly ReaderWriterLockSlim Lock = new ReaderWriterLockSlim();
    private readonly string _folder;

    private IHistoryRepository _historyRepository;

    public string Folder
    {
        get { return _folder; }
    }

    public FileTask(string folder)
    {
        _folder = string.Format("{0}{1}", BaseFolder, folder);
    }

    protected override void Initialize()
    {
        _historyRepository = new HistoryRepository();
    }

    protected override void Execute()
    {
        // todo: Get institute that are active,
        var institute = MockInstitute(); // todo: uncomment _historyRepository.FindInstituteByFolderName(Folder);

        // todo: Update institute, lastupdate - [date] | [files amount] | [phonenumbers amount]
        if (institute == null)
        {
            Logger.Warn("Not found data", Folder);
            return;
        }

        // todo: read file get encoding | type and parse it
        Task.Factory.StartNew(ReadFile);
    }

    private void ReadFile()
    {
        var list = GetFilesByFolder();
        StreamReader sr = null;
        try
        {
            Lock.EnterReadLock();
            foreach (var fi in list)
            {
                var fileName = fi.FullName;
                Logger.Info("Line: {0}:=> Content: {1}", fileName, Thread.CurrentThread.ManagedThreadId);
                sr = new StreamReader(fileName, DetectEncoding(fileName));
                string currentLine;
                while ((currentLine = sr.ReadLine()).ReturnSuccess())
                {
                    if (string.IsNullOrEmpty(currentLine)) continue;
                    Logger.Info("Line: {0}:=> Content: {1}", fileName, currentLine);
                }
            }
            Lock.ExitReadLock();
        }
        finally
        {
            if (sr != null) sr.Dispose();
            Logger.Info("Finished working" + Folder);
        }
    }

    protected IEnumerable<FileInfo> GetFilesByFolder()
    {
        return Directory.GetFiles(Folder).Select(fileName => new FileInfo(fileName));
    }

    protected Encoding DetectEncoding(string file)
    {
        using (FileStream fs = new FileStream(file, FileMode.Open, FileAccess.ReadWrite, FileShare.ReadWrite))
        {
            var cdet = new Ude.CharsetDetector();
            cdet.Feed(fs);
            cdet.DataEnd();
            return cdet.With(x => x.Charset)
                       .Return(x => Encoding.GetEncoding(cdet.Charset),
                                    Encoding.GetEncoding("windows-1255"));
        }
    }

    private Institute MockInstitute()
    {
        return new Institute
        {
            FromFolderLocation = string.Format("{0}{1}", BaseFolder, Folder)
        };
    }

    public override string ToString()
    {
        return string.Format("Folder: {0}", Folder);
    }
} 
```

当不读取文件一切正常时，会填充日志并且每件事都运行顺利，但是当我附加该`Task.Factory.StartNew(ReadFile);`方法时，我有一个异常。

例外：

```
Cannot access a disposed object.
Object name: 'The ThreadLocal object has been disposed.'. 
```

我该如何解决这个问题？我可能需要改变`LocalThread`逻辑，或者什么 - 我一直试图处理这个问题，差不多一天了。

顺便说一句：这是一个`MVC4`项目，`C# 5.0`我正在`TDD`全力以赴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:18:13.973

你不应该在`TasksToExecute.Dispose();` 那里打电话。

# android - 用于从 textview 共享文本的 Android 按钮

> ID：13673197
> 
> 赞同：1
> 
> 时间：2012-12-02T19:55:55.693
> 
> 标签：android, textview

我需要分享按钮以这种方式分享textView中的文本，我是java和android的初学者

[![解释](../Images/987dceee1451b497941e76960f7f2da8.png)](https://i.stack.imgur.com/l5sx5.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-02T19:57:14.367

上`Button Click`

```
Intent shareIntent = new Intent(Intent.ACTION_SEND);
shareIntent.setType("text/plain");
shareIntent.putExtra(Intent.EXTRA_TEXT,"Your score and Some extra text");
shareIntent.putExtra(Intent.EXTRA_SUBJECT, "The title");
startActivity(Intent.createChooser(shareIntent, "Share...")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T19:58:57.963

创建一个将在共享按钮上调用的方法并在其中添加此行

```
Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
startActivity(Intent.createChooser(sharingIntent, "Share via")); 
```

也试试这个[链接](http://mobile.tutsplus.com/tutorials/android/android-sdk-implement-a-share-intent/)。

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T19:57:55.443

看看如何使用启动 Share Via 对话框的 Intent。

看到这篇有你答案的帖子： [Android Share Via Dialog](https://stackoverflow.com/questions/3553017/android-share-via-dialog)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T19:59:44.737

这是一个完整的教程。[http://mobile.tutsplus.com/tutorials/android/android-sdk-implement-a-share-intent/](http://mobile.tutsplus.com/tutorials/android/android-sdk-implement-a-share-intent/)

# scala - 如何循环遍历集合并为集合中的每个项目重新分配新值？

> ID：13673198
> 
> 赞同：3
> 
> 时间：2012-12-02T19:56:09.547
> 
> 标签：scala

您好我想循环一组字符串并将它们从 String 类型转换为 ObjectId 类型。

我试过这样：

```
followingIds.foreach(e => e = new ObjectId(e)) 
```

但我不能做那个任务。

我也尝试使用“for”，但我不知道如何访问 Set by Index 的每个位置。

```
for (i <- 0 until following.size) {
   following[i] = new ObjectId(following[i])
} 
```

这既不工作，

谁能帮我？！？请！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-02T20:00:23.127

如果您坚持可变性，则可以使用以下内容：

```
var followingIds = Set("foo", "bar")
followingIds = followingIds.map(e => new ObjectId(e)) 
```

但是你可以用不可变的东西让你的代码更加灵活：

```
val followingIds = Set("foo", "bar")
val objectIds = followingIds.map(e => new ObjectId(e)) 
```

现在变量（值）名称非常具有描述性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:14:22.523

类似 Java-1.4？

```
val mutableSet: collection.mutable.Set[AnyRef] = collection.mutable.Set[AnyRef]("0", "1", "10", "11")
//mutableSet: scala.collection.mutable.Set[AnyRef] = Set(0, 1, 10, 11)

for (el <- mutableSet) el match { 
  case s: String  => 
    mutableSet += ObjectId(s)
    mutableSet -= s
    s
  case s => s
}

mutableSet
//res24: scala.collection.mutable.Set[AnyRef] = Set(ObjectId(0), ObjectId(11), ObjectId(10), ObjectId(1)) 
```

# dynamic - XSLT 2.0 group-by 的动态参数

> ID：13673199
> 
> 赞同：1
> 
> 时间：2012-12-02T19:56:11.653
> 
> 标签：dynamic, group-by, xslt-2.0, params

我得到了这个输入

```
<?xml version="1.0" encoding="UTF-8"?>
<result>
  <datapoint poiid="2492" period="2004" value="1240"/>
  <datapoint poiid="2492" period="2005" value="1290"/>
  <datapoint poiid="2492" period="2006" value="1280"/>
  <datapoint poiid="2492" period="2007" value="1320"/>
  <datapoint poiid="2492" period="2008" value="1330"/>
  <datapoint poiid="2492" period="2009" value="1340"/>
  <datapoint poiid="2492" period="2010" value="1340"/>
  <datapoint poiid="2492" period="2011" value="1335"/>
  <datapoint poiid="2493" period="2004" value="1120"/>
  <datapoint poiid="2493" period="2005" value="1120"/>
  <datapoint poiid="2493" period="2006" value="1100"/>
  <datapoint poiid="2493" period="2007" value="1100"/>
  <datapoint poiid="2493" period="2008" value="1100"/>
  <datapoint poiid="2493" period="2009" value="1110"/>
  <datapoint poiid="2493" period="2010" value="1105"/>
  <datapoint poiid="2493" period="2011" value="1105"/>
</result> 
```

我使用这个 xslt 2.0

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs" version="2.0">

    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="result">

        <xsl:for-each-group select="datapoint" group-by="@poiid">
            <node type="poiid" id="{@poiid}">
                <xsl:for-each select="current-group()">
                    <node type="period" id="{@period}" value="{@value}"/>
                </xsl:for-each>
            </node>

        </xsl:for-each-group>

    </xsl:template>

</xsl:stylesheet> 
```

将其转换为

```
<?xml version="1.0" encoding="UTF-8"?>
<node type="poiid" id="2492">
   <node type="period" id="2004" value="1240"/>
   <node type="period" id="2005" value="1290"/>
   <node type="period" id="2006" value="1280"/>
   <node type="period" id="2007" value="1320"/>
   <node type="period" id="2008" value="1330"/>
   <node type="period" id="2009" value="1340"/>
   <node type="period" id="2010" value="1340"/>
   <node type="period" id="2011" value="1335"/>
</node>
<node type="poiid" id="2493">
   <node type="period" id="2004" value="1120"/>
   <node type="period" id="2005" value="1120"/>
   <node type="period" id="2006" value="1100"/>
   <node type="period" id="2007" value="1100"/>
   <node type="period" id="2008" value="1100"/>
   <node type="period" id="2009" value="1110"/>
   <node type="period" id="2010" value="1105"/>
   <node type="period" id="2011" value="1105"/>
</node> 
```

工作顺利。

当我试图让它更有活力时，我就陷入了困境。现实生活中的输入对于每个数据点有 6 个属性而不是 3 个，并且用例需要动态设置分组参数的可能性。

我尝试使用参数

```
 <xsl:param name="k1" select="'poiid'"/>
    <xsl:param name="k2" select="'period'"/> 
```

但是将它们传递给 xslt 的其余部分是我无法做到的。下面的代码不起作用，但希望能澄清我在寻找什么。

```
 <xsl:template match="result">

        <xsl:for-each-group select="datapoint" group-by="@{$k1}">
            <node type="{$k1}" id="@{$k1}">
                <xsl:for-each select="current-group()">
                    <node type="{$k2}" id="@{$k2}" value="{@value}"/>
                </xsl:for-each>
            </node>

        </xsl:for-each-group>

    </xsl:template> 
```

任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:01:49.803

**这是如何做到的**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

 <xsl:param name="k1" select="'poiid'"/>
 <xsl:param name="k2" select="'period'"/>

 <xsl:template match="result">
   <xsl:for-each-group select="datapoint" group-by="@*[name()= $k1]">
     <node type="{$k1}" id="{@*[name() = $k1]}">
       <xsl:for-each select="current-group()">
         <node type="{k2}" id="{@*[name()= $k2]}" value="{@value}"/>
       </xsl:for-each>
     </node>
   </xsl:for-each-group>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<result>
    <datapoint poiid="2492" period="2004" value="1240"/>
    <datapoint poiid="2492" period="2005" value="1290"/>
    <datapoint poiid="2492" period="2006" value="1280"/>
    <datapoint poiid="2492" period="2007" value="1320"/>
    <datapoint poiid="2492" period="2008" value="1330"/>
    <datapoint poiid="2492" period="2009" value="1340"/>
    <datapoint poiid="2492" period="2010" value="1340"/>
    <datapoint poiid="2492" period="2011" value="1335"/>
    <datapoint poiid="2493" period="2004" value="1120"/>
    <datapoint poiid="2493" period="2005" value="1120"/>
    <datapoint poiid="2493" period="2006" value="1100"/>
    <datapoint poiid="2493" period="2007" value="1100"/>
    <datapoint poiid="2493" period="2008" value="1100"/>
    <datapoint poiid="2493" period="2009" value="1110"/>
    <datapoint poiid="2493" period="2010" value="1105"/>
    <datapoint poiid="2493" period="2011" value="1105"/>
</result> 
```

**产生了想要的正确结果：**

```
<node type="poiid" id="2492">
   <node type="" id="2004" value="1240"/>
   <node type="" id="2005" value="1290"/>
   <node type="" id="2006" value="1280"/>
   <node type="" id="2007" value="1320"/>
   <node type="" id="2008" value="1330"/>
   <node type="" id="2009" value="1340"/>
   <node type="" id="2010" value="1340"/>
   <node type="" id="2011" value="1335"/>
</node>
<node type="poiid" id="2493">
   <node type="" id="2004" value="1120"/>
   <node type="" id="2005" value="1120"/>
   <node type="" id="2006" value="1100"/>
   <node type="" id="2007" value="1100"/>
   <node type="" id="2008" value="1100"/>
   <node type="" id="2009" value="1110"/>
   <node type="" id="2010" value="1105"/>
   <node type="" id="2011" value="1105"/>
</node> 
```

# objective-c - 创建一个其内容出现在所有情节提要场景中的视图

> ID：13673202
> 
> 赞同：0
> 
> 时间：2012-12-02T19:56:44.100
> 
> 标签：objective-c, ios, xcode, storyboard, uilabel

我的应用程序由 2 个故事板场景组成，但它们有一个共同点，`UILabel`其值不应该随着场景的变化而改变，（就像现在一样）所以我正在考虑将这个标签移动到两个控制器上的视图， 如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:00:39.020

您只需在其视图中拥有一个带有标签的外部 ViewController。另外两个视图控制器有场景，它们的视图是外部视图控制器的子视图。

也许内部视图控制器使用导航控制器，或者任何适合您需要的东西。

# .htaccess - 如何阻止对wamp中目录的访问

> ID：13673203
> 
> 赞同：2
> 
> 时间：2012-12-02T19:56:43.180
> 
> 标签：.htaccess, webserver, wamp

我想阻止直接访问我的 wamp 服务器的 www 文件夹中的目录，以便没有人可以直接访问驻留在那里的文件。示例： www 中有一个名为“文件夹”的文件夹。该文件夹包含一个文件“page.php”和几个图像和 css 文件。此文件夹中没有索引文件。现在，当用户输入 ..../folder/ 时，用户将可以访问整个目录。但我想对用户隐藏目录列表。但是当通过任何其他页面（通过超链接）打开时 page.php 应该可以访问请帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:22:29.177

按照您的描述方式，您可能仍然希望这些项目可以访问，以便仍然可以加载引用这些文件的页面。您只是不希望 Apache 在导航到该文件夹​​时列出文件。

Apache 将这些页面称为“目录索引”。[`.htaccess`](https://httpd.apache.org/docs/current/howto/htaccess.html)您可以通过向该文件夹的文件中添加一个条目来为特定文件夹（和子文件夹）关闭它：

```
Options -indexes 
```

`Options`此处有关指令和`.htaccess`文件 的更多详细信息： [https ://httpd.apache.org/docs/current/mod/core.html#options](https://httpd.apache.org/docs/current/mod/core.html#options)

# sql-server - 这种情况下最好的数据库结构是什么？

> ID：13673208
> 
> 赞同：3
> 
> 时间：2012-12-02T19:57:14.910
> 
> 标签：sql-server, database, entity-framework, database-design, domain-model

我有一个保存房地产 MLS（多重上市服务）数据的数据库。目前，我有一个包含所有列表属性（价格、地址、平方英尺等）的表。有几种不同的房产类型（住宅、商业、出租、收入、土地等），每种房产类型共享大部分属性，但也有一些是该房产类型独有的。

我的问题是共享属性超过 250 个字段，这似乎在单个表中包含太多字段。我的想法是我可以将它们分解为 EAV（实体-属性-值）格式，但我已经阅读了很多关于此的不好的东西，并且它会使运行查询变得非常痛苦，因为可以搜索 250 个字段中的任何一个。如果我要走这条路，我实际上必须从 EAV 表中提取所有数据，按列表 ID 分组，在应用程序端合并它，然后针对内存中的对象集合运行我的查询。这似乎也不是很有效。

我正在寻找一些关于如何进行的想法或建议。也许 250+ 字段表是唯一的方法。

请注意，我使用的是 SQL Server 2012、.NET 4.5 w/Entity Framework 5、C#，并且数据通过 WCF 服务传递给 asp.net Web 应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T20:38:15.283

让我们考虑一下替代方案的优缺点：

**所有列表 + 属性的一张表：**

1.  非常宽的表 - 难以查看模型和模式定义以及表数据
2.  一个查询不需要连接即可检索列表中的所有数据
3.  需要为每个新属性更改架构 + 模型。
4.  如果您始终加载所有属性并且大多数项目具有大多数属性的值，则效率很高。
5.  根据属性的示例 LINQ 查询：

```
context.Listings.Where(l => l.PricePerMonthInUsd < 10e3 && l.SquareMeters >= 200)
    .ToList(); 
```

**一张表用于所有列表，一张表用于属性类型，一张表用于（列表 ID + 属性 IDS +）值 (EAV)：**

1.  列表很窄
2.  如果数据非常稀疏（大多数属性没有大多数项目的值），则效率很高
3.  需要从值中获取所有数据——一个额外的查询（或者一个连接，但是，这会浪费带宽——将获取每个属性值行的基本列表数据）
4.  不需要为新属性更改架构 + 模型
5.  如果您希望通过代码对属性进行类型安全访问，则需要基于属性类型表的自定义代码生成
6.  根据属性的示例 LINQ 查询：

```
var listingIds = context.AttributeValues.Where(v =>
                    v.AttributeTypeId == PricePerMonthInUsdId && v < 10e3)
                .Select(v => v.ListingId)
                .Intersection(context.AttributeVales.Where(v =>
                    v.AttributeTypeId == SquareMetersId && v.Value >= 200)
                .Select(v => v.ListingId)).ToList(); 
```

或：（比较实际数据库的性能）

```
var listingIds = context.AttributeValues.Where(v =>
                    v.AttributeTypeId == PricePerMonthInUsdId && v < 10e3)
                .Select(v => v.ListingId).ToList();

listingIds = context.AttributeVales.Where(v =>
                listingIds.Contains(v.LisingId)
                && v.AttributeTypeId == SquareMetersId
                && v.Value >= 200)
            .Select(v => v.ListingId).ToList(); 
```

进而：

```
var listings = context.Listings.Where(l => listingIds.Contains(l.ListingId)).ToList(); 
```

**妥协选项 - 一个表用于所有列表，每组属性一个表，包括值（假设您可以将属性分成组）：**

1.  多个中宽表
2.  如果每个组的数据稀疏（例如，对于没有花园的列表，花园相关属性都为空，因此您不会为它们在花园相关表中添加一行）
3.  需要一个具有多个连接的查询（连接中不会浪费带宽，因为组表是 1:0..1 与列表表，而不是 1:many）
4.  需要为新属性更改架构 + 模型
5.  使查看模式/模型更简单 - 如果您可以将属性划分为 10 个组，您将拥有 25 个包含 11 列的表，而不是列表表上的另外 250 个
6.  LINQ 查询介于上述两个示例之间。

根据您的具体统计数据（关于稀疏性）和需求/可维护性计划（例如属性类型添加/更改的频率？）考虑优缺点并做出决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:17:34.560

我可能会做什么：

我首先为 250 个字段创建一个表，其中有 ID 和 FieldName，例如：

```
price   -> 1
address -> 2
sqft    -> 3 
```

该表还将在我的代码中硬编码为枚举并用于查询。

然后在主表中我有两个字段，一个是从上表中获取的字段ID的类型，第二个是它的值，例如

```
Line1: 122(map id), 1 (for price), 100 (the actually price)
Line2: 122(map id), 2 (for address), "where is it" 
Line3: 122(map id), 3 (for sqft), 10 (sqft) 
```

这里的问题是您可能至少需要两个字段，一个用于数字，一个用于字符串。

这当然只是一个提议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:01:11.523

我会创建一个`listing`只包含共享属性的表。该表将`listingId`作为主键。它会有一个存储列表类型的列，以便您知道它是住宅列表、登陆列表等。

然后，为每个子类型创建一个额外的表。所以你会有 , 等表`residential_listing`。`land_listing`所有这些表的主键也是`listingId`. 此列也是 的外键`listing`。

当您希望对共享数据进行操作时，您可以完全从`listing`表中执行此操作。当您对特定数据感兴趣时，您将加入特定表。如果所有数据都在那里，某些查询可能能够完全在特定表上运行。

# jquery - CSS 背景图像加载检查

> ID：13673210
> 
> 赞同：0
> 
> 时间：2012-12-02T19:57:19.640
> 
> 标签：jquery, css

我正在使用[http://desandro.github.com/imagesloaded/imagesLoaded](http://desandro.github.com/imagesloaded/)插件，它非常适合检测 div 的图像何时加载：

```
$('.background').imagesLoaded(function() {
console.log('background loaded');
}); 
```

我还需要它来检查何时加载了通过 CSS 应用的背景图像，因为上面的插件似乎没有监听背景图像。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:02:34.730

这是此插件中的一个已知问题，但有一个解决方法，请阅读此页面中的 darcyclarke 评论[https://github.com/desandro/imagesloaded/issues/29](https://github.com/desandro/imagesloaded/issues/29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T20:04:24.880

看看**waitForImages**插件，它可以检测 CSS 中引用的图像的加载。

[https://github.com/alexanderdickson/waitForImages](https://github.com/alexanderdickson/waitForImages)

# matlab - Matlab设置X轴显示第一个和最后一个值

> ID：13673216
> 
> 赞同：0
> 
> 时间：2012-12-02T19:57:55.833
> 
> 标签：matlab, bar-chart

对于我的条形图，我只想在 x 轴上显示第一个和最后一个值。有没有办法在 Matlab 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:04:31.117

另一种方法是：

```
plot(...),xlim([xmin xmax]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:00:37.700

是的，使用`xtick([first last])`。

# .htaccess - 在 .htaccess 中重写 url

> ID：13673220
> 
> 赞同：0
> 
> 时间：2012-12-02T19:58:03.100
> 
> 标签：.htaccess

我想让旧网址指向新页面。我遇到了麻烦，因为旧 URL 如下所示：[http://nilandsplace.com/store/camping_eng/coghlans-campfire-cooking-forks-toaster-forks-package-of-4.html](http://nilandsplace.com/store/camping_eng/coghlans-campfire-cooking-forks-toaster-forks-package-of-4.html)。我想在从 mywebsite.com/camping_eng/some.html 到 mywebsite.com/camping/some.html 的 .ht 访问中重新设置 URL，如果“some.html”部分相同。只有 camping_eng 更改为 camping。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:37:42.323

你可能想试试这个：

```
RewriteEngine on
RewriteRule ^camping_eng/([a-zA-Z0-9-=_.]+)/?$ http://mywebsite.com/camping/$1 [L,R=301] 
```

此示例根据您的问题工作：

从`mywebsite.com/camping_eng/some.html`

“ `mywebsite.com/camping/some.html` some.html”部分是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:07:17.220

```
RewriteEngine on
RewriteBase /store
RewriteRule ^camping_eng/(.*)$ camping/$1 [QSA,L,R=301] 
```

# ios - SIGABRT Xcode？？？需要帮助

> ID：13673222
> 
> 赞同：1
> 
> 时间：2012-12-02T19:58:12.963
> 
> 标签：ios, iphone, xcode, sigabrt

我目前是一名新开发人员，遇到了这个错误；SIGABRT。我尝试过开发许多应用程序，其中很多都收到此错误。我正在为小孩开发一个声音匹配教育应用程序，他们使用 Xcode 中的一个选择器视图来匹配动物及其声音。我的代码如下：

**视图控制器.m**

```
#define componentCount 2
#define animalComponent 0
#define soundComponent 1
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize lastAction;
@synthesize matchResult;

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    NSString *actionMessage;
    NSString *matchMessage;
    int selectedAnimal;
    int selectedSound;
    int matchedSound;

    if (component==animalComponent) {
        actionMessage=[[NSString alloc]
                       initWithFormat:@"You Selected The Animal Named '%@'!",
                       [animalNames objectAtIndex:row]];

    } else {
        actionMessage=[[NSString alloc]
                       initWithFormat:@"You Selected The Animal Sound '%@'!",
                       [animalSounds objectAtIndex:row]];
    }

    selectedAnimal=[pickerView selectedRowInComponent:animalComponent];
    selectedSound=[pickerView selectedRowInComponent:soundComponent];

    matchedSound=([animalSounds count] - 1) -
    [pickerView selectedRowInComponent:soundComponent];

    if (selectedAnimal==matchedSound) {
        matchMessage=[[NSString alloc] initWithFormat:@"Yes, A '%@' Does Go '%@'!"];
        [animalNames objectAtIndex:selectedAnimal],
        [animalSounds objectAtIndex:selectedSound];
    } else {
        matchMessage=[[NSString alloc] initWithFormat:@"No, A '%@' Doesn't Go '%@'!"];
        [animalNames objectAtIndex:selectedAnimal],
        [animalSounds objectAtIndex:selectedSound];
    }

    lastAction.text=actionMessage;
    matchResult.text=matchMessage;

    [matchMessage release];
    [actionMessage release];
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    if (component==animalComponent) {
        return [animalNames objectAtIndex:row];
    } else {
        return [animalSounds objectAtIndex:row];
    }
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    if (component==animalComponent) {
        return [animalNames count];
    } else {
        return [animalSounds count];
    }
}

- (void)dealloc {
    [animalNames release];
    [animalSounds release];
    [lastAction release];
    [matchResult release];
    [super dealloc];
}

- (void)viewDidLoad {
    animalNames=[[NSArray alloc]initWithObjects:
                 @"Cat", @"Dog", @"Snake", @"Cow", @"Horse", @"Pig", @"Duck", @"Sheep", @"Bird",nil];
    animalSounds=[[NSArray alloc]initWithObjects:
                 @"Chirp", @"Baa", @"Quack", @"Oink", @"Nay", @"Moo", @"Hiss", @"Bark", @"Purr",nil];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

**视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIPickerViewDataSource, UIPickerViewDelegate> {
    NSArray *animalNames;
    NSArray *animalSounds;
    IBOutlet UILabel *lastAction;
    IBOutlet UILabel *matchResult;
}

@property (nonatomic, retain) UILabel *lastAction;
@property (nonatomic, retain) UILabel *matchResult;

@end 
```

*SIGABRT 在哪里*

```
#import <UIKit/UIKit.h>

#import "AppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
        //at end of row of code above this, there was the error message: signal SIGABRT
    }
} 
```

无论如何，为了摆脱这个 SIGABRT 错误，我绝对需要帮助。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T22:43:04.663

您必须确定导致问题的代码行，这是我们无法从代码片段中识别出来的。

您可能希望启用异常断点，因为它们通常可以准确识别导致异常的代码行。当我在开发中遇到异常时，我将简单地在“所有”异常上添加一个异常断点（请参阅[Breakpoint Navigator 帮助](http://developer.apple.com/library/ios/#recipes/xcode_help-breakpoint_navigator/articles/adding_an_exception_breakpoint.html)或下面的屏幕快照）。这样，如果我通过调试器运行程序，当它遇到异常时，它会在有问题的行停止代码，大大简化了识别问题根源的过程。它并不总是完美地工作，但它经常比其他技术更快地找到异常的来源。

![所有例外](../Images/a56a79133f72e61a205e0a85a0025221.png)

有关调试应用程序的更广泛讨论（例如，使用调试器单步执行您的代码，请参阅[Xcode 用户指南：调试您的应用程序](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/060-Debug_Your_App/debug_app.html)。如果您知道问题出在此方法中，您可能需要逐行执行[您的代码](http://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/060-Debug_Your_App/debug_app.html#//apple_ref/doc/uid/TP40010215-CH3-SW27)线，问题也就不言而喻了。

* * *

我还建议您查看Ray Wenderlich 网站上的[My App Crashed, Now What 。](http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T03:31:43.157

您的匹配消息似乎存在一些格式问题：

```
matchMessage=[[NSString alloc] initWithFormat:@"Yes, A '%@' Does Go '%@'!"];
[animalNames objectAtIndex:selectedAnimal],
[animalSounds objectAtIndex:selectedSound]; 
```

我很惊讶编译器实际上会编译它，但无论如何 - 你需要在方法调用中包含选定的字符串`stringWithFormat:`

试试下面：

```
matchMessage = [[NSString alloc] initWithFormat:@"Yes, A '%@' Does Go '%@'!", 
    [animalNames objectAtIndex:selectedAnimal],
    [animalSounds objectAtIndex:selectedSound]
]; 
```

你的编译器肯定会给你一个警告。因此，您的第一步应该始终是修复编译器警告。最好在构建设置中打开“将警告视为错误”选项。这意味着编译器对于它将接受和运行的内容非常严格——这意味着您必须修复警告。编译器发出警告真的没有任何借口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-14T06:59:25.503

在第一个调用堆栈之前阅读英文。它告诉你什么？最常见的 sigabrt 形式是在`IBOutlet`.h 文件中删除 an 并且出口连接仍然存在于情节提要中。要解决这个问题，请删除情节提要中的所有出口连接，重写`IBOutlet`s，然后重新链接它们。

# javascript - 在 Javascript 中使用 Ruby 变量（在应用程序视图中）

> ID：13673227
> 
> 赞同：4
> 
> 时间：2012-12-02T19:58:30.000
> 
> 标签：javascript, ruby-on-rails, ruby

目前，我有一个 ruby​​ 变量可通过调用的视图访问`@json`（其中包含我需要的 JSON 格式的信息）

但是，我想将其传递到脚本区域，例如

```
<script type="text/javascript" charset="utf-8">

//Want @json to be usable here

</script> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T20:00:23.683

假设您提到的脚本标记在 html erb 视图中，您可以使用它：

```
<script type="text/javascript" charset="utf-8">
var json = <%= @json || 'null' %>;
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-29T18:58:21.310

另一种方法是这样的： var json = "#{ @json || 'null' }"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T16:48:10.660

最好用引号括起来：

```
<script type="text/javascript">
  var json = "<%= @json %>";
</script> 
```

# .net - WPF 3d 中的纹理映射

> ID：13673229
> 
> 赞同：1
> 
> 时间：2012-12-02T19:58:59.213
> 
> 标签：.net, wpf, 3d

我正在努力在 wpf 中正确映射纹理。首先 3d 不是我的强项，但我有一些示例代码和下面的输出图像。我正在取一个多边形，执行三角剖分，然后尝试在输出上映射一个矩形纹理。我遇到的问题是我无法将纹理映射为平滑地跟随曲线。一个纹理贴图使用了 3dtools.dll 库，效果很好，但生成的纹理贴图在左侧产生了输出。它不会像我想要的那样倾斜。右边的结果图像是我尝试手动将纹理坐标映射到图像。我理解为什么它看起来确实如此，但我不确定如何纠正它？

```
 private void simpleButtonClick(object sender, RoutedEventArgs e)
        {
            ClearViewport();
            SetCamera();

            PathGeometry FlatPath;

            Geometry Geo = Geometry.Parse("M 0,0 L 0,10 C 4,4 6,6 10,10 V 0 C 6,-4 4,-6 0,0");
            var GeoText = FormattedText.BuildGeometry(new Point(0, 0));

            FlatPath =
                Geo.GetFlattenedPathGeometry(.01,
                                             ToleranceType.
                                                 Absolute);
            var vertices = new List<Vertex>();
            foreach (PathFigure Figure in FlatPath.Figures)
            {
                List<Point> PointList = DumpFigureToList(Figure);
                vertices.AddRange(PointList.Select(p=>new Vertex((float)p.X,(float)p.Y)));
            }

            // Write out the data set we're actually going to triangulate
            var angulator = new Triangulator();

            List<Triad> triangles = angulator.Triangulation(vertices, true);

            var Bounds = FlatPath.Bounds;

            var mesh = new MeshGeometry3D();
            var cube = new Model3DGroup();
            var Count = 0;
            foreach (var Tri in triangles)
            {
                Tri.MakeCounterClockwise(vertices);
                if (FlatPath.FillContains(new Point(Tri.circumcircleX, Tri.circumcircleY)))
                {
                    var p0 = new Point3D(vertices[Tri.a].x, vertices[Tri.a].y, 0);
                    var p1 = new Point3D(vertices[Tri.b].x, vertices[Tri.b].y, 0);
                    var p2 = new Point3D(vertices[Tri.c].x, vertices[Tri.c].y, 0);

                    mesh.Positions.Add(p0);
                    mesh.Positions.Add(p1);
                    mesh.Positions.Add(p2);
                    mesh.TriangleIndices.Add(Count);
                    Count++;
                    mesh.TriangleIndices.Add(Count);
                    Count++;
                    mesh.TriangleIndices.Add(Count);
                    Count++;
                    Vector3D normal = CalculateNormal(p0, p1, p2);
                    mesh.Normals.Add(normal);
                    mesh.Normals.Add(normal);
                    mesh.Normals.Add(normal);

                    mesh.TextureCoordinates.Add(new Point((Bounds.Left - vertices[Tri.a].x) / Bounds.Width, vertices[Tri.a].y > 0 ? 1 : 0));
                    mesh.TextureCoordinates.Add(new Point((Bounds.Left - vertices[Tri.b].x) / Bounds.Width, vertices[Tri.b].y > 0 ? 1 : 0));
                    mesh.TextureCoordinates.Add(new Point((Bounds.Left - vertices[Tri.c].x) / Bounds.Width, vertices[Tri.c].y > 0 ? 1 : 0));

                    if (wireframeCheckBox.IsChecked == true)
                    {
                        var wireframe = new ScreenSpaceLines3D();
                        wireframe.Points.Add(p0);
                        wireframe.Points.Add(p1);
                        wireframe.Points.Add(p2);
                        wireframe.Points.Add(p0);
                        wireframe.Color = Colors.LightBlue;
                        wireframe.Thickness = 2;

                        this.mainViewport.Children.Add(wireframe);
                    }
                }
            }

            //mesh.TextureCoordinates = _3DTools.MeshUtils.GeneratePlanarTextureCoordinates(mesh, new Vector3D(0, 0, 1));

            var myBrush = new ImageBrush();
            myBrush.ImageSource =
                new BitmapImage(new Uri(@"curvedown.png", UriKind.Absolute));
            Material material = new DiffuseMaterial(myBrush);
            var model = new GeometryModel3D(mesh, material);
            var group = new Model3DGroup();
            group.Children.Add(model);

            PointLight light = new PointLight(Colors.White, new Point3D(10,10,10));
            group.Children.Add(light);

            var Model = new ModelVisual3D();
            Model.Content = group;
            this.mainViewport.Children.Add(Model);

        } 
```

这是上面带有线框的输出。我正在使用注释掉的纹理坐标代码。右侧是手动代码（未注释）。 ![输出图像](../Images/2f304e7ee040d2c3b98a977a14c1037d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:05:11.723

使用您拥有的三角测量，它永远不会像您期望的那样正确弯曲。要实现这种弯曲，您必须手动生成细条纹。就像是

```
    ++++++++
    ||||||||
    ||||||||
    ++++++++

```

-- 其中每个 + 是一个顶点 -- 但不是使其笔直，而是沿着来自公共点（虚拟圆）的不同线映射它，沿着半径的特定偏移量。

在伪代码中：

```
    对于从 0 到 nStripes 的每个 i
      让角度 = 开始 + (结束-开始) * i / nStripes
      让 p1 = 点
        X = 内半径 * cos(角度)
        Y = 内半径 * sin(角度)
      让 p2 = 点
        X = 外半径 * cos(角度)
        Y = 外半径 * sin(角度)
      在 p1 处添加顶点
      在 p2 处添加顶点

```

然后成对连接先前生成的边，因此 (0,1)+(2,3) 将形成一个四边形，(2,3)+(4,5) 另一个，依此类推...

您将不得不决定哪些条纹数量足够好。永远记住，三角形内的纹理映射总是通过线性插值完成，而不是曲线，所以你不能指望曲线或梯形之类的东西神奇地看起来正确。

# c# - 不使用代码优先时的良好通用存储库模式

> ID：13673230
> 
> 赞同：2
> 
> 时间：2012-12-02T19:59:04.260
> 
> 标签：c#, .net, entity-framework, repository, repository-pattern

我试图围绕我的 ASP.NET MVC 应用程序的存储库模式和依赖注入概念。

我看到了[Repository Pattern with Entity Framework](http://dotnetspeak.com/index.php/2011/03/repository-pattern-with-entity-framework/)一文，非常喜欢代码的简单性。似乎没有那么多代码，而且都是完全通用的。也就是说，不需要像大多数人那样为数据库中的不同对象建立多个存储库。这正是我想要的。

但是，代码是先为代码编写的，我不打算使用它。

问题：

1.  相同的代码不能用于不首先使用代码的应用程序是否有充分的理由？
2.  有人可以为我不首先使用代码的应用程序推荐一种更好的方法吗？（请记住，我绝对喜欢这种通用模式。）
3.  还有其他提示可以帮助我前进吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T20:32:57.797

您可以为*任何*底层数据存储创建存储库接口。您可以像这样简单地定义一个接口：

```
public interface IRepository
{
    IQueryable<T> GetQueryable<T>();

    void Insert<T>(T item);
} 
```

然后，您可以在其后面实现一个将实现它的类。它不必是代码优先的；例如，您可以使用[`ObjectContext`](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx)从 EDMX 文件创建的文件来支持它。

这里的关键是创建正确的*抽象*。您可以使用接口轻松地做到这一点，然后在幕后以您想要的方式实现它。

因为您使用的是依赖注入，所以实现并不重要，只要您正确定义了*合约*，实现（和测试）应该很简单。如果它不起作用，或者你想要一个完全不同的数据存储，你只需告诉你的依赖注入器使用不同的实现，合同不会改变。

您创建的任何抽象都可以这样说；您可以拥有一个读取和写入数据的接口（就像您引用的文章一样），您只需将抽象拉出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T05:55:44.017

看看这个。我认为这个链接对你最有帮助

[http://www.codeproject.com/Tips/572761/Generic-repository-pattern-using-EF-with-Dependenc](http://www.codeproject.com/Tips/572761/Generic-repository-pattern-using-EF-with-Dependenc)

在此链接中，通用存储库模式与 MVC 项目中的依赖注入一起使用，而不使用代码优先方法。

# java - 如何将文本文件读入 JAVA 中的数组列表？

> ID：13673231
> 
> 赞同：-4
> 
> 时间：2012-12-02T19:59:10.030
> 
> 标签：java

我在我的 JAVA 程序硬件的一部分上需要帮助。我不明白如何将文件读入数组列表。请帮忙谢谢！

getBreadInfo - 将 bread.txt 读入一个数组列表（包含面包名称、$ 和价格），然后分配给一个数组 breadInfo[]，然后将该数组返回给 SandwichApp 以显示面包菜单。

getBread - 类似于 getBreadInfo，除了它只包含面包名称，并返回另一个数组 bread[] 供 SandwichApp 确定用户选择了哪个面包，因为用户输入了与面包相关的数字（索引 + 1），而不是面包名称。

getMapBreadPrice - 与上述两个类似，不同之处在于它返回一个哈希映射，其中包含面包名称（键）和价格（值）的对值，供 SandwichApp 计算出用户选择的面包的价格。

并且 bread.txt 文件读取

白面包~1.50

小麦面包~1.80

法式面包~2.00

有机面包~2.30

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:06:02.263

这是最简单的代码：

```
 BufferedReader reader = new BufferedReader(new FileReader("bread.txt"));
    List<String> breadsList = new ArrayList<String>();
    List<String> priceList = new ArrayList<String>();
    String line = null;
    while((line = reader.readLine())!= null){
        String[] elems = line.split("~");
        breadsList.add(elems[0]);
        priceList.add(elems[1]);
    }
    String[] breads = breadsList.toArray(new String[]{});
    String[] prices= priceList.toArray(new String[]{}); 
```

# php - 多条件稳定排序

> ID：13673240
> 
> 赞同：0
> 
> 时间：2012-12-02T19:59:51.897
> 
> 标签：php

嗨，我在按不同键对多维数组进行排序时遇到问题，例如按日期、按类别、按任何特定顺序按重量。

我不能按 mysql 按功能对这些数组进行排序，因为我必须在 mysql 输出数组（数据）上实现严格的业务逻辑。

实现业务逻辑后，我发现以下类型的数组需要排序

日期升序，类别降序，重量升序。

数组的大小为 10000 或更大。

我已经使用了 usort 功能，但是在排序元素的值相同的情况下，它无法解决固定排序的问题。

请帮忙。

```
Array
(
    [0] => Array
        (
            [categorie] => xyz
            [date] => 2012-12-08 19:30
            [weight] => 3
            [row_id] => 125812
            [searchtype] => show
            [uitgespeeld] => 0
        )

[1] => Array
    (
        [categorie] => show
        [date] => 2012-12-10 20:15
        [weight] => 3
        [row_id] => 125816
        [searchtype] => show
        [uitgespeeld] => 0
    )

[2] => Array
    (
        [categorie] => abc
        [date] => 2012-12-13 20:30
        [weight] => 3
        [row_id] => 119151
        [searchtype] => show
        [uitgespeeld] => 0
    )
   ....... 
```

)

我用于排序的代码。

```
usort($temp_group_data, array('className','cmp_weight'));
usort($temp_group_data, array('className','cmp_date'));

function cmp_weight($a, $b) {
    if (($a['weight']==$b['weight']) ) {
        return 0;
    } else if ($a['weight'] >$b['weight']) {
        return -1;
    } else {
        return 1;
    }
}

function cmp_date($a, $b) {
    if (($a['date']==$b['date']) ) {
        return 0;
    } else if (strtotime($a['date']) >strtotime($b['date'])) {
        return -1;
    } else {
        return 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:32:56.167

您必须在一个函数中执行此操作，现在第二次排序会覆盖第一次所做的更改。

```
function multicompare($a,$b){
    $criteria = array(
        'date' => 'asc',
        'category' => 'desc',
        'weight' => 'asc'
    );
    foreach($criteria as $what => $order){
        if($a[$what] == $b[$what]){
            continue;
        }
        return (($order == 'desc')?-1:1) * strcmp($a[$what], $b[$what]);
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:27:30.483

从问题的最后一部分来看，问题有两个方面：

1.  所有条件必须同时评估，而不是连续评估。

2.  如果两个值相同（即原始顺序），您需要稳定的排序以保留顺序

两个步骤合而为一；首先，您使用它们出现在原始数组中的索引来“装饰”数组：

```
foreach ($a as $key => &$item) {
    $item = array($item, $key); // add array index as secondary sort key
}

usort($a, 'mysort'); // sort it

// undecorate
foreach ($a as $key => &$item) {
    $item = $item[0]; // remove decoration from previous step
} 
```

这是多合一的排序功能：

```
function mysort($a, $b)
{
    if ($a[0]['date'] != $b[0]['date']) {
            return $a[0]['date'] < $b[0]['date'] ? -1 : 1; // ASC
    } elseif ($a[0]['category'] != $b[0]['category']) {
            return $a[0]['category'] < $b[0]['category'] ? 1 : -1; // DESC
    } elseif ($a[0]['weight'] != $b[0]['weight']) {
            return $a[0]['weight'] < $b[0]['weight'] ? -1 : 1; // ASC
    } else {
            return $a[1] < $b[1] ? -1 : 1; // ASC
    }
} 
```

# objective-c - 如何动态地在多个位置拥有相同的精灵？

> ID：13673242
> 
> 赞同：0
> 
> 时间：2012-12-02T20:00:14.407
> 
> 标签：objective-c, ios, cocos2d-iphone, sprite

如何动态地在多个位置拥有相同的精灵？我已经看到了另一个问题，但是，你只能用三个精灵来做到这一点。我想要动态数量的精灵。我的目标是，我希望它能够射出三颗或更多颗子弹，而不是只发射一颗子弹。我已经完成了所有的数学运算，但是，我需要在 for 循环中绘制三个精灵。这是我到目前为止所拥有的。

```
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch * touch = [touches anyObject];
    CGPoint pointOne = [touch locationInView:[touch view]];
    CGSize size = [[CCDirector sharedDirector] winSize];
    CGPoint position = turret.position;
    CGFloat degrees = angleBetweenLinesInDegrees(position, pointOne);
    turret.rotation = degrees;
    pointOne.y = size.height-pointOne.y;
    CCSprite *projectile = [CCSprite spriteWithFile:@"projectile.png"];
    projectile.position = turret.position;

    // Determine offset of location to projectile
    int angle = angleBetweenLinesInDegrees(position, pointOne);
    int startAngle = angle-15;

    int shots = 3;

    NSMutableArray *projectiles = [[NSMutableArray alloc] initWithCapacity:shots];

    // Ok to add now - we've double checked position
    for(int i = 0;i<shots;i++) {
        [self addChild:projectile z:1];

        int angleToShoot = angle;

        int x = size.width;
        int y = x*tan(angle);

        CGPoint realDest = ccp(x,y);

        projectile.tag = 2;
        if (paused==0 ) {
            [_projectiles addObject:projectile];
            // Move projectile to actual endpoint
            [projectile runAction:
             [CCSequence actions:
              [CCMoveTo actionWithDuration:1 position:realDest],
              [CCCallBlockN actionWithBlock:^(CCNode *node) {
                 [_projectiles removeObject:node];
                 [node removeFromParentAndCleanup:YES];
             }],
              nil]];
        }
    }
} 
```

这给了我错误：`'NSInternalInconsistencyException', reason: 'child already added. It can't be added again'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:12:58.303

您需要创建 3 个不同的精灵并将它们中的所有 3 个添加为孩子。通常做这样的事情最好使用 CCBatchNode （看看 cocos doc）。使用批处理节点，您可以在 1 个绘图调用中绘制所有子节点，唯一的约束是批处理节点的所有子节点需要在同一个 spriteSheet 上具有纹理（或者在您的情况下，如果它们具有相同的“文件名”），仅3 个弹丸，你不会有性能问题，但它是正确的设计方法，如果你需要在屏幕上放置几十个弹丸而不使用批处理节点，游戏将无法流畅运行。

回顾一下：创建一个ccbatchnode，将batchnode添加为self的子节点（我想它的ur层或主节点）创建3个精灵并将它们添加为batchnode的子节点

# matlab - 在matlab中比较两个单元格数组元素

> ID：13673244
> 
> 赞同：2
> 
> 时间：2012-12-02T20:00:17.193
> 
> 标签：matlab, cell-array

我正在尝试比较两个单元阵列，1x160 (a) 和 80x1(b)。我的单元格数组由内部有许多字符串的单元格组成。我想比较每个字符串并查看它们是否相等，然后如果它们相等，则插入新数组，否则插入 0。我找不到任何功能。我尝试了“等量”、“strfind”等。他们都给我下一条错误消息：

> 如果任何输入参数是元胞数组，则第一个必须是字符串元胞数组，第二个必须是字符数组。

这是我的代码！

```
function [inter]=Intersect2(a,b)
int=cell(0);
b2=[b;b];

for i=1:length(a)   
    if a{i,1}==b2{i,1}(1) ( or 'isequal','strfind')
       int{i}=a{i};
    else
        int{i}=0;
    end     
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T20:32:08.283

比较字符数组的方法有很多，其中之一是[`strcmp`](http://www.mathworks.com/help/matlab/ref/strcmp.html).

我们[`cellfun`](http://www.mathworks.com/help/matlab/ref/cellfun.html)也将使用它来避免循环。

```
a = {'Dude', 'I', 'am', 'a', 'moose'};
b = {'Well', 'I', 'am', 'a', 'mouse'};

index = cellfun(@strcmp, a, b); 
```

这会将 的每个元素与`a`中的相应元素进行比较`b`，返回一个逻辑数组，该数组`index`表示`1`元素何时匹配，`0`何时不匹配。

使用它来分配匹配值：

```
int = cell(1, length(a));
int(index) = a(index); 
```

> 整数 =
> 
> [] '我是一个' []

如果你愿意，你可以扩展这个概念来找到集合的交点。

# ruby-on-rails - Rails ActiveRecord 日期比较数据库不可知？

> ID：13673245
> 
> 赞同：4
> 
> 时间：2012-12-02T20:00:17.943
> 
> 标签：ruby-on-rails, postgresql, datetime, activerecord, rails-activerecord

我正在尝试找到一种与数据库无关的方法来将日期与活动记录查询进行比较。我有以下查询：

```
UserRole.where("(effective_end_date - effective_start_date) > ?", 900.seconds) 
```

这在 MySQL 上运行良好，但在 PG 上会产生错误，因为它生成的 sql 不包含“interval”语法。从控制台：

```
 ←[1m←[36mUserRole Load (2.0ms)←[0m  ←[1mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."effective_end_date" IS NULL AND ((effective_end_d
ate - effective_start_date) > '--- 900
...
')←[0m
ActiveRecord::StatementInvalid: PG::Error: ERROR:  invalid input syntax for type interval: "--- 900 
```

当我使用 to_sql I 选项运行它时，我得到：

```
irb(main):001:0> UserRole.where("effective_end_date - effective_start_date) > ?", 900.seconds).to_sql
=> "SELECT \"user_roles\".* FROM \"user_roles\"  WHERE \"user_roles\".\"effective_end_date\" IS NULL AND (effective_end_date - effective_start_date) >
'--- 900\n...\n')" 
```

所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T01:55:36.450

如果您的`effective_end_date`和`effective_start_date`列确实是日期，那么您的查询毫无意义，因为日期的最小分辨率为一天，而 900 比 86400（AKA`25*60*60`或 1 天）小很多。因此，我假设您的“日期”列实际上是日期时间（AKA 时间戳）列；如果这是真的，那么您可能想要重命名列以避免在维护期间出现混淆，`effectively_starts_at`并且`effectively_ends_at`可能与通常的 Rails 约定很好匹配。如果此假设无效，那么您应该更改列类型或停止使用 900。

回到真正的问题。ActiveRecord 使用以下方法将 Ruby 值转换为 SQL 值[`ActiveRecord::ConnectionAdapters::Quoting#quote`](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/connection_adapters/abstract/quoting.rb#L8)：

```
def quote(value, column = nil)
  # records are quoted as their primary key
  return value.quoted_id if value.respond_to?(:quoted_id)

  case value
  #...
  else
    "'#{quote_string(YAML.dump(value))}'"
  end
end 
```

因此，如果您尝试使用某个值作为占位符的值，并且没有为该类型内置任何特定处理，那么您会得到 YAML（默认值 IMO 的一个奇怪选择）。此外，`900.seconds`是一个`ActiveSupport::Duration`对象（尽管`900.seconds.class`说了些什么）并且`case value`没有分支，`ActiveSupport::Duration`因此`900.seconds`将获得 YAML 化。

PostgreSQL 适配器提供了自己的`quote`输入，[`ActiveRecord::ConnectionAdapters::PostgreSQLAdapter#quote`](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L430)但也不知道`ActiveSupport::Duration`。MySQL 适配器[`quote`](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/connection_adapters/abstract_mysql_adapter.rb#L198)也不知道`ActiveSupport::Duration`. `quote`您可以在这些方法中添加一些意义。在初始化程序中是这样的：

```
class ActiveRecord::ConnectionAdapters::PostgreSQLAdapter
    # Grab an alias for the standard quote method
    alias :std_quote :quote
    # Bludgeon some sense into things
    def quote(value, column = nil)
        return "interval '#{value.to_i} seconds'" if(value.is_a?(ActiveSupport::Duration))
        std_quote(value, column)
    end
end 
```

有了那个补丁，当你使用 PostgreSQL 时，你会得到 PostgreSQL 理解的间隔`ActiveSupport::Duration`：

```
> Model.where('a - b > ?', 900.seconds).to_sql
 => "SELECT \"models\".* FROM \"models\"  WHERE (a - b > interval '900 seconds')" 
> Model.where('a - b > ?', 11.days).to_sql
 => "SELECT \"models\".* FROM \"models\"  WHERE (a - b > interval '950400 seconds')" 
```

如果您向 MySQL 适配器添加一个类似的补丁`quote`（留给读者作为练习），则如下所示：

```
UserRole.where("(effective_end_date - effective_start_date) > ?", 900.seconds) 
```

将在 PostgreSQL 和 MySQL 中做正确的事情，您的代码不必担心它。

* * *

也就是说，在不同的数据库上开发和部署是一个非常糟糕的主意，这会让圣诞老人哭泣并为你的长袜寻找一些煤炭（可能含有砷，可能是放射性的）。所以不要那样做。

另一方面，如果您正在尝试构建与数据库无关的软件，那么您将度过一段快乐的时光！数据库可移植性在很大程度上是一个神话，与数据库无关的软件总是意味着在您的平台提供的 ORM 和数据库接口之上编写您自己的可移植层。您将不得不在您计划支持的每个数据库上详尽地测试所有内容，每个人都对 SQL 标准进行口头服务，但似乎没有人完全支持它，每个人都有自己的扩展和怪癖需要担心。您最终将编写自己的可移植层，其中包含实用方法和猴子补丁的混合。

# arrays - lisp 减少堆（数组与列表）

> ID：13673250
> 
> 赞同：1
> 
> 时间：2012-12-02T20:00:54.370
> 
> 标签：arrays, list, memory, lisp, heap-memory

我在 lisp 中制作了一个程序，它的堆增加得太快了。问题应该是两件事之一，但我不知道哪一个使堆增长得如此之快。其中一个是具有 15 个位置的列表，每个位置是一个具有 4 个字段的结构（所有字段都是小数字）另一个是 15x15 的二维数组

现在对于每个循环周期，我都在使用每个循环制作一个副本

对于结构列表：（mapcar #'copy-structure list）

对于 15x15 2d 阵列（调整阵列（make-array dims :displaced-to array) dims）

有谁知道哪一个对内存消耗最负责？在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:23:48.493

只看这一点，两者都会以相似的数量级增长堆。我怀疑您的算法对于您的应用程序来说根本就没有足够的空间效率。

（顺便说一句，`alexandria:copy-array`用于复制数组`adjust-array`。hack 不是最有效的方法。）

# android - 滚动上的 Android ListView 背景颜色更改 - colorCacheHint 未修复问题

> ID：13673252
> 
> 赞同：5
> 
> 时间：2012-12-02T20:01:09.740
> 
> 标签：android, listview, background-color

所以我通过适配器使用自定义列表视图，在我的 Nexus 7 上一切看起来都很棒，但在我的 HTC Incredible 2 上，我遇到了背景颜色发生变化的问题。这是我的带有 cacheColorHint 集的 XML 文件。我也试过#AA00000。有什么建议么？我还尝试通过 setCacheColorHint 在活动中设置它，但还没有任何效果。

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="horizontal"     
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:padding="10dp"
 android:background="#AA000000"
 android:cacheColorHint="#00000000">

 <ImageView android:id="@+id/ExhibitListIcon"
 android:contentDescription="Exhibit List Icon"
 android:layout_width="wrap_content"
 android:layout_height="fill_parent"
 android:gravity="center_vertical"
 android:layout_marginRight="15dp"
 android:layout_marginTop="5dp"
 android:layout_marginBottom="5dp" />

 <TextView android:id="@+id/ExhibitListTitle"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:gravity="center"
 android:textStyle="bold"
 android:textSize="22dp"
 android:textColor="#FFFFFF"
 android:layout_marginTop="5dp"
 android:layout_marginBottom="5dp" />

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-02T20:29:48.887

您能否尝试在声明 Listview 的 xml 中设置 cachecolorhint 而不是 LinearLayout ：

在布局文件中，使用：

```
android:cacheColorHint="#0000" 
```

或在 java 代码中，使用

```
listView.setCacheColorHint(Color.TRANSPARENT); 
```

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-06T08:56:08.173

将以下行添加到您的列表视图：

android:cacheColorHint="@android:color/transparent"

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-01T17:17:30.313

```
listView.setCacheColorHint(Color.TRANSPARENT); 
```

# python-3.x - 如何将列表转换为字典

> ID：13673255
> 
> 赞同：0
> 
> 时间：2012-12-02T20:01:21.677
> 
> 标签：python-3.x

如果我有

```
a = [['a','b','c'],['b','c','d'],['a','b','c'],['e','f','g'],['b','c','d']] 
```

如何得到

```
a = {('a','b','c'):2,('b','c','d'):2,('e','f','g'):1} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:12:41.727

你可以使用[计数器](http://docs.python.org/3/library/collections.html#collections.Counter)：

```
from collections import Counter

a = Counter(map(tuple, a)) 
```

# java - 在 Java 中从 GUI 添加数据

> ID：13673256
> 
> 赞同：1
> 
> 时间：2012-12-02T20:01:26.743
> 
> 标签：java, swing

所以我正在尝试创建一个零售 GUI。员工选择部门，输入项目名称、价格和折扣。他应该能够输入多个项目的数据，然后应该能够点击打印并且应该会出现一个 Jtable。我遇到的问题是编写代码以便能够为他输入的每个项目更新数组列表。我似乎每次都覆盖 position[0] 并且它不存储新项目。我也不知道从哪里开始使用 Jtable。我对Java相当陌生，因此非常感谢您提供的任何帮助。

```
 import java.awt.*;
   import java.awt.event.*;
   import javax.swing.*;
   import java.util.*;

  public class RetailGUI extends JFrame
   {

     // The following variables will reference the
      // custom panel objects.
      private DepartmentPanel department;     
      private ItemPanel item; 
      private PricePanel price;    
      private TitlePanel title;  // To display a greeting

      // The following variables will reference objects
      // needed to add Next and Exit buttons.
      private JPanel buttonPanel;    // To hold the buttons
      private JButton nextButton,
                      printButton,
                      exitButton;    // To exit the application

      /**
      * Constructor
       */

      public RetailGUI()
      {
        // Display a title.
         super("Retail Calculator");

         setSize(600, 250);

         // Specify an action for the close button.
         setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
         setLocationRelativeTo(null);

         // Create a BorderLayout manager for
         // the content pane.
         setLayout(new BorderLayout());

        // Create the custom panels.
         title = new TitlePanel();
         department = new DepartmentPanel();
         item = new ItemPanel();
         price = new PricePanel();

         // Call the buildButtonPanel method to
         // create the button panel.
         buildButtonPanel();

        // Add the components to the content pane.
         add(title, BorderLayout.NORTH);
         add(department, BorderLayout.WEST);
         add(item, BorderLayout.CENTER);
         add(price, BorderLayout.EAST);
         add(buttonPanel, BorderLayout.SOUTH);

         // Pack the contents of the window and display it.
         //pack();
         setVisible(true);
     }

      /**
       * The buildButtonPanel method builds the button panel.
       */

      private void buildButtonPanel()
      {
         // Create a panel for the buttons.
         buttonPanel = new JPanel();

         // Create the buttons.
         nextButton = new JButton("Next");
         printButton = new JButton("Print");
         exitButton = new JButton("Exit");

        // Register the action listeners.
         nextButton.addActionListener(new RetailGUI.NextButtonListener());
         printButton.addActionListener(new RetailGUI.PrintButtonListener());
         exitButton.addActionListener(new RetailGUI.ExitButtonListener());

         // Add the buttons to the button panel.
         buttonPanel.add(nextButton);
         buttonPanel.add(printButton);
         buttonPanel.add(exitButton);
      }

      /**
      * Private inner class that handles the event when
       * the user clicks the Next button.
       */     

      private class NextButtonListener implements ActionListener
     {
         public void actionPerformed(ActionEvent e)
         {

             String departmentName,
                    finalItem;
             float    priceField,
                      discountField,
                      newPrice;

          ArrayList   DepartmentList            = new ArrayList();
          ArrayList   ItemList                  = new ArrayList();
          ArrayList   PriceList                 = new ArrayList();
          ArrayList   DiscountList              = new ArrayList();
          ArrayList   NewPriceList              = new ArrayList();

          departmentName = department.getDepartmentName();
          finalItem = item.getItemName();
          priceField = price.getPriceField();
          discountField = price.getDiscountField();
          newPrice = priceField - (priceField * (discountField/100));

          DepartmentList.add(departmentName);

          System.out.print(DepartmentList);

           JOptionPane.showMessageDialog(null,"Department:        " + departmentName + "\n" + 
                                             "Item Name:          " + finalItem + "\n" +
                                              "Orginal Price:     $" + priceField + "\n" +
                                              "Discount:               " + discountField + "%" + "\n" +
                                              "New Price:          $" + newPrice + "\n");
        }
     } 

      private class PrintButtonListener implements ActionListener
     {
         public void actionPerformed(ActionEvent e)
         {

        }
     }      

     private class ExitButtonListener implements ActionListener
     {
        public void actionPerformed(ActionEvent e)
       {
           // Exit the application.
           System.exit(0);
        }
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:11:20.333

您已将您`ArrayList`的 s 本地声明`actionPerformed`为您的`NextButtonListener`.

这意味着每次单击按钮时，您都会创建全新的、短暂的列表，将您的项目添加到其中，然后丢弃结果（允许垃圾收集器在将来的某个时间捡起它们）。

您需要将这些列表移动到范围级别，以便应用程序的各个部分都可以看到它们（可能是类级别的字段？）。

与其使用多个数组列表（其中很容易使列表彼此不同步），不如创建某种包含与事务相关的所有信息的数据对象会更好。

假设一个`Transaction`对象，其中包含`TransactionItem`s。每个项目将包含`departmentname`, `itemName`,`originalPrice`和`discount`（新价格是一个计算字段，不需要存储它）

`Transaction`然后将包含*N* `TransactionItem` s。

每次单击时，您都将获取当前`Transaction`对象并`TransactionItem`根据用户输入的值向其中添加一个新对象。

这将允许您向 提供支持功能`Transaction`，例如交易的总价值

`JTable`当需要开发视图时，这将大大简化。

# c++ - gdbinit“没有这样的文件或目录”Eclipse c

> ID：13673262
> 
> 赞同：2
> 
> 时间：2012-12-02T20:01:53.390
> 
> 标签：c++, linux, eclipse-3.5

我正在使用 Xming 连接到我试图在 Eclipse Galileo 中调试 C++ 项目的 Linux（企业版）服务器。发生以下错误：

1.  从 ../workspace/myfile 中读取符号 ..（未找到调试符号）...完成。.gdbinit：没有这样的文件或目录将环境变量“LS_COLORS”设置为空值

（.gdbinit 在服务器上（在 root 中），我的帐户有权限）

1.  如果我尝试从终端对同一文件运行 gmake，则会收到以下错误：gmake ** No rule to make target /workspace/myfile'。停止。
    //我已经导出了路径（包括库路径），并且gmake存在。

    我的项目有 3 个子项目（proj1、proj2 和 proj 3）。为了调试 proj3 我必须构建 projs 1 和 2 。我为项目 1 和 2 创建了 make 目标，并获得了 .so 文件，我为此创建了指向 my_project/libs 文件夹中相应文件的软链接。

我的 Eclipse 调试配置如下（tab 顺序）：

主
  项目：我的项目
  构建配置：UseActive C++ 应用程序：我的项目/我的项目的
  路径 环境：服务器上库的路径（我的用户权限）
调试器 调试器：gdb/mi （选中） 在主   GDB 调试器
  处停止启动：gdb   GDB 命令行.gdbinit   GDB 命令集：标准   协议 mi

项目属性：
  Builders CDT Builder
  Scanner Configuration Builder
  C/C++ Build
  Build command gmake -k
Behavior build incremental build : all （有时我得到错误 no rule for make all）
  Clean: clean
  Discovery options:
    (Checked) Automatic discovery path
    (checked ) 报告路径检测问题
    Discovery profile GCC per project
    (checked ) Enable build output
    Compile invocation comand gcc
    Toolchain
    No toolchain
    Correct builder GNU make builder

此 Eclipse 调试配置适用于另一个帐户（在使用相同 Eclipse 的同一服务器上）。gdbinit 和 gmake 文件在服务器上并且可以工作，我不应该更新版本（这是我在网上找到的一种解决方案）。

有没有人见过这个错误？有谁知道我做错了什么？

# c# - 如何管理多标签应用程序中的代码？

> ID：13673273
> 
> 赞同：1
> 
> 时间：2012-12-02T20:02:44.943
> 
> 标签：c#, .net, version-control, tabs, controls

我正在.NET C# 中制作应用程序。这不是我的选择，但它必须是“多标签”应用程序。我有一个带有许多选项卡的选项卡控件的窗口。每个选项卡上有许多控件。现在我所有的事件处理程序和东西都在主窗口文件中。

如何管理这个程序。有没有办法将每个选项卡的内容保存在单独的文件中（可能是类）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:21:50.200

可以使用框架并引用页面或用户控件

```
 <TabControl>
        <TabItem Header="Tab1 Page">
            <Frame Source="TabPage.xaml" NavigationUIVisibility="Hidden" />
        </TabItem>
        <TabItem Header="Tab2 User Control">
            <Frame Source="UserControl1Tab.xaml" />
        </TabItem>
    </TabControl> 
```

用户控件可能更干净，但我出于习惯使用 Page。
他们都有用于事件处理程序的代码。
如果您需要传递数据，则可以在 ctor 中进行（但您不能在 XAML 中分配 Source）。

# objective-c - 如何在Objective-C中正确地从文件的开头剪切前N个字节

> ID：13673274
> 
> 赞同：0
> 
> 时间：2012-12-02T20:02:47.553
> 
> 标签：objective-c, file

```
NSString *pathOfFile = [NSString stringWithFormat:@"%@", file];
NSFileHandle *fh = [NSFileHandle fileHandleForUpdatingAtPath:pathOfFile];
[fh seekToFileOffset:30];
NSData *data = [fh readDataToEndOfFile];
[fh writeData:nil];
[[NSFileManager defaultManager] createFileAtPath:file contents:data attributes:nil]; 
```

我想剪切文件的前 30 个字节。我得到的是：

```
mbp:Debug me$ hexdump -C File1
00000000  08 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00000030  00 00 00 00 00 00 00 00  00 00 00 00 06 00 00 00  |................|
00000040  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00000070  00 00 00 00 00 00 00 00  03 00 00 00 00 00 00 00  |................|
00000080  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
000000b0  00 00 00 00 02 00 00 00  00 00 00 00 00 00 00 00  |................|
000000c0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
000000f0  01 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000100  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00000120
mbp:Debug me$ hexdump -C File1
00000000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 06 00  |................|
00000020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00000050  00 00 00 00 00 00 00 00  00 00 03 00 00 00 00 00  |................|
00000060  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00000090  00 00 00 00 00 00 02 00  00 00 00 00 00 00 00 00  |................|
000000a0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
000000d0  00 00 01 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
000000e0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00000100 
```

为什么它会因被削减而归零？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:20:07.203

总而言之，我想出了这个：

```
 NSString *pathOfFile = [NSString stringWithFormat:@"%@", file];
NSFileHandle *fh = [NSFileHandle fileHandleForUpdatingAtPath:pathOfFile];
[fh seekToFileOffset:30];
NSData *data = [fh readDataToEndOfFile];

NSRange range = NSMakeRange(30, [data length]-30);
NSData *refinedData = [data subdataWithRange:range];

[fh writeData:nil];
[[NSFileManager defaultManager] createFileAtPath:file contents:refinedData attributes:nil]; 
```

# cakephp - CakePHP 2.x 将用户模型中的用户 ID 保存到登录用户的事件模型中的事件 user_id 字段中

> ID：13673275
> 
> 赞同：0
> 
> 时间：2012-12-02T20:02:52.370
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0, cakephp-2.1, cakephp-model

大家好，我使用的是 Cakephp 2.x。我有一个事件模型（表）和一个用户模型。保存事件后，我需要将当前登录的用户 ID 保存到事件模型的 user_id 字段中。我尝试过的代码已被注释。有任何想法吗？提前致谢。

```
public function add(){
        //$this->loadModel('User');
        if ($this->request->is('post')) {
            $this->Event->create();
            //$this->request->data['Event']['user_id'] = $this->request->data['User']['id'];
            //$this->request->data['Event']['user_id'] = $this->request->data['User']['id'];
            if ($this->Event->save($this->request->data)) {
                $this->Session->setFlash(__('The event has been saved'));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The event could not be saved. Please, try again.'));
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:26:02.997

代替

```
$this->request->data['User']['id']; 
```

采用

```
$this->Auth->user('id'); 
```

# php - 仅将 magento 购物车规则应用于 4 个不同的商品

> ID：13673279
> 
> 赞同：0
> 
> 时间：2012-12-02T20:03:02.460
> 
> 标签：php, magento

我有一家商店，如果添加特定产品，我想为某些产品提供 20% 的折扣。示例：我有 8 个产品 A、B、C、D、E、F、G、H，用户选择了我只想在 A、B、D、E 上打折的所有产品。

如何使用购物车规则 magento 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:16:47.117

使用购物车价格规则，您可以使用产品的 SKU 为特定产品应用折扣

[此链接将有所帮助（特定产品可享受 X% 折扣）](http://www.magentocommerce.com/wiki/3_-_store_setup_and_management/shopping-cart-price-rule-recipes)

# graph - 核心情节 osx 不绘图

> ID：13673283
> 
> 赞同：2
> 
> 时间：2012-12-02T20:03:30.010
> 
> 标签：graph, plot, core-plot

我正在为一个学校项目编写一个简单的可可应用程序，该应用程序需要从串行端口绘制一些数据并将其绘制成一个简单的图形。我选择了 Core-Plot 作为框架来生成和显示数据图，但是我无法让它工作。

我设法绘制了轴并且程序运行良好，但没有出现数据线。我使用以下代码：

```
#import "Controller.h"
#import <CorePlot/CorePlot.h>

@implementation Controller

-(void)dealloc
{
    [plotData release];
    [graph release];
    [super dealloc];
}

-(void)awakeFromNib
{
    [super awakeFromNib];

// Create graph from theme
graph = [(CPTXYGraph *)[CPTXYGraph alloc] initWithFrame:CGRectZero];
CPTTheme *theme = [CPTTheme themeNamed:kCPTDarkGradientTheme];
[graph applyTheme:theme];
hostView.hostedGraph = graph;

// Setup scatter plot space
CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(-1) length:CPTDecimalFromDouble(10)];
plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(-1) length:CPTDecimalFromDouble(10.0)];

// Axes
// Label x axis with a fixed interval policy
CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;
CPTXYAxis *x          = axisSet.xAxis;
x.majorIntervalLength         = CPTDecimalFromString(@"1");
x.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0.0");
x.minorTicksPerInterval       = 2;

x.title         = @"Tijd (s)";
x.titleOffset   = 30.0;
x.titleLocation = CPTDecimalFromString(@"8.5");

// Label y with an automatic label policy.
CPTXYAxis *y = axisSet.yAxis;
y.labelingPolicy              = CPTAxisLabelingPolicyAutomatic;
y.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0.0");
y.minorTicksPerInterval       = 2;
y.preferredNumberOfMajorTicks = 8;
y.labelOffset                 = 10.0;

y.title         = @"Kracht (N)";
y.titleOffset   = 30.0;
y.titleLocation = CPTDecimalFromString(@"8");

// Create a plot that uses the data source method
CPTScatterPlot *dataSourceLinePlot = [[[CPTScatterPlot alloc] init] autorelease];
dataSourceLinePlot.identifier = @"Date Plot";

CPTMutableLineStyle *lineStyle = [[dataSourceLinePlot.dataLineStyle mutableCopy] autorelease];
lineStyle.lineWidth              = 3.f;
lineStyle.lineColor              = [CPTColor greenColor];
dataSourceLinePlot.dataLineStyle = lineStyle;

dataSourceLinePlot.dataSource = self;
[graph addPlot:dataSourceLinePlot];

// Add some data
NSMutableArray *contentArray = [NSMutableArray array];
for ( NSUInteger i = 0; i < 10; i++ ) {
    id x = [NSDecimalNumber numberWithDouble:i];
    id y = [NSDecimalNumber numberWithDouble:1.2];
    [contentArray addObject:[NSMutableDictionary dictionaryWithObjectsAndKeys:x, @"x", y, @"y", nil]];
    NSLog(@"waarde %@", contentArray);
}
NSLog(@"plotting");
plotData = [contentArray retain];
}

-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
{
return plotData.count;
}

@end 
```

该代码基于其中一个示例。

NSLog(@"waarde %@", contentArray); 返回一个好看的数组，包含正确的数据点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:11:06.760

尝试

```
hostView.frame = CGRectMake(0,0,self.view.frame.size.width,self.view.frame.size.height);
[self.view addSubview:hostView]; 
```

是不是因为您没有将它添加为视图而导致它没有出现？

# c# - 如何检查 C# 中是否存在移动 URL

> ID：13673285
> 
> 赞同：0
> 
> 时间：2012-12-02T20:03:34.190
> 
> 标签：c#, validation, url

我正在尝试确定网站是否有移动版本 - 就像在 m.bbc.co.uk 中一样。

将其输入浏览器可以正常工作，但是任何使用 HTTPwebrequests 检查的方法都失败了，因为您无法使用：`Http://m.bbc.co.uk`所以我看不到如何检查。

有谁知道如何为 m 发出网络请求。***网站？？

# java - 提交 FormPanel 后的提示窗口

> ID：13673292
> 
> 赞同：0
> 
> 时间：2012-12-02T20:04:32.773
> 
> 标签：java, gwt, servlets, web

我有下一个问题......当我提交表单并且我的 Post 方法结束时。表单（或不）抛出空警报窗口。我怎样才能删除这个投掷窗口？

**客户端**

```
 ....            
        final FormPanel form = new FormPanel();
        form.setAction(GWT.getModuleBaseURL()+"upload");

        form.setEncoding(FormPanel.ENCODING_MULTIPART);
        form.setMethod(FormPanel.METHOD_POST);

        VerticalPanel panel = new VerticalPanel();
        form.setWidget(panel);

        FileUpload upload = new FileUpload();
        upload.setName("uploadFormElement");
        panel.add(upload);

        fileButton.addClickHandler(new ClickHandler() {
            public void onClick(ClickEvent event) {
                form.submit();
            }
        }); 
```

**FileUploadServlet**

```
public class FileUploadServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        super.doGet(req, resp);
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {

        if (ServletFileUpload.isMultipartContent(req)) {   
            FileItemFactory factory = new DiskFileItemFactory();
            ServletFileUpload upload = new ServletFileUpload(factory);

            try {
                List<FileItem> items = upload.parseRequest(req);
                for (FileItem fileItem : items) {
                    if (fileItem.isFormField()) continue;
                    String fileName = fileItem.getName();
                    if (fileName != null) {
                        fileName = FilenameUtils.getName(fileName);
                    }
                    File uploadedFile = new File("test.txt");
                    if (uploadedFile.createNewFile()) {
                        fileItem.write(uploadedFile);
                    }

                }
            } catch (FileUploadException e) {
                e.printStackTrace();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    } 
```

也许有人知道这个警报的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T05:23:23.420

如果它是一个简单的 Javascript 警报窗口，您需要在三个地方跟踪/搜索它

步骤 - 在客户端代码中搜索警报字符串

```
1) In javascript - third party .js file . String search for `alert` in such js files

2) In third party gwt jar . 
 a) String search for Window.alert in the GWT java code
 b) String search for wnd.alert in GWT jsni code

3) In Your own source code - repeat steps "a" and "b" from Step 2 
```

如果他们正在构建一个字符串作为响应并通过其他一些机制显示它，那么它不太可能而且还搜索你的服务器端代码库。

# wordpress - Wordpress 自定义字段未保存在数据库中

> ID：13673293
> 
> 赞同：1
> 
> 时间：2012-12-02T20:04:38.487
> 
> 标签：wordpress, custom-fields

我已经运行 WordPress 网站一年多了，直到昨天才遇到问题。我正在使用自定义字段将 url 存储到每个帖子的预览图像中。我只是使用编辑帖子屏幕中的标准自定义字段表单添加它。在我将帖子保存为草稿或立即发布之前，自定义字段将被保存。但是现在突然之间，无论我如何保存帖子（另存为草稿、发布或自动保存），自定义字段都不会存储在数据库中。我确实通过检查 wp_postmeta 表确认了这一点。

我已经重新安装了 Wordpress，但它并没有改变任何事情。我还浏览了有关此主题的其他类似帖子，但没有一个解决方案有效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:23:41.360

所以在深入挖掘之后，我发现自定义字段依赖于另一个字段。仍然不确定为什么即使没有先填写另一个字段，它也不会将自定义字段存储在数据库中。但是当我这样做时它仍然有效。WordPress 有时会以神秘的方式工作。

# jquery - 使用 JQuery 的 Express 和 ajax 发布

> ID：13673296
> 
> 赞同：1
> 
> 时间：2012-12-02T20:04:56.803
> 
> 标签：jquery, ajax, node.js, express

Express 似乎没有响应我的 ajax 请求。当我在 chrome 检查器的网络选项卡中查看它时，发布请求状态似乎等待很长时间，然后失败。这是我的快速代码：

```
app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.cookieParser());
  app.use(express.session({secret: 'fasfasasasfasfa'}));
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(express.session());
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.post('/test.html', function (req,res) {
  console.log(req.body);
  res.send({ some: JSON.stringify({response:'json' })});
  res.end();
}) 
```

这是我的 jQuery 代码：

```
working = function() {
    console.log("works")
}

$.ajax({
    url:"test.html",
    data: {'name':'hello'},
    type: "POST",
    success: working
  }) 
```

成功函数永远不会被调用，并且 req.body 的控制台日志似乎也不起作用。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:21:19.217

您不能`.html`在 Express 中的路由上使用扩展，因为这使它认为它正在寻找静态资源。请改用“漂亮的 URL”。

```
// Express code...
app.post('test', function(req, res, next){
  // Do stuff to process POST request
});

// AJAX code...
$.ajax({
  url: 'test',
  ...
}); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T22:02:39.847

正如您在评论中提到的，您得到的状态代码为 0 。

[HTTP 状态码 0 是否有任何意义？](https://stackoverflow.com/questions/3825581/does-an-http-status-code-of-0-have-any-meaning)

检查以确保您的服务器可以从您正在测试的位置访问，并且您发出请求的 URL 实际上指向您要将请求发送到的服务器。

换句话说，您可能需要修复此行

```
url:"test.html", 
```

# html - Chrome中图像侧面的额外边距

> ID：13673297
> 
> 赞同：2
> 
> 时间：2012-12-02T20:04:58.707
> 
> 标签：html, google-chrome, css, webkit

```
<div>
  <img src ='image.png'  style="display: block" />
</div> 
```

在 Chrome 中，这会在图像右侧呈现 1px 的边距并将包装器 div 推出。如何去除边距？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:11:11.427

在样式属性中使用边距和内边距，如下所示：

```
<div>
  <img src ='image.png' style="display: block; margin: 0px; padding: 0px;" />
</div> 
```

除此之外，您还可以通过添加样式来移除边框`"border:0px"`。

我没试过，让我知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:20:11.177

仅使用 CSS 删除仍然会使您的网站在其他浏览器中看起来不同。最好使用 CSS 重置来在所有浏览器中获得相同的格式。

CSS像这样重置：http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-02T00:43:37.280

我也在 Safari 中看到了这种行为。尝试这个。

```
<div class="group-holder" style="display: table;">
  <img src="myimage1.gif" style="display: table-cell;" />
  <img src="myimage1.gif" style="display: table-cell;" />
  <img src="myimage1.gif" style="display: table-cell;" />
</div> 
```

这对我有用。

# css - z-index 导致在 div 内滑动

> ID：13673299
> 
> 赞同：0
> 
> 时间：2012-12-02T20:05:14.193
> 
> 标签：css, html, z-index

出于某种原因，当我为图像设置 z-index:0 时，div 显示正确，但可以在父 div 中向上/向下滑动。但是，如果我有 z-index:-100 图像就会消失，并且不再滑动。

有没有办法让 z-index:0 没有图像在父 div 内移动？我希望图像被锁定到位。谢谢！

frame_th img 是我想要锁定到位的 div。

```
.frame_th {
    width: 220px;
    margin: 0px auto;
}
.frame_th img {
    position: absolute;
    z-index: -100;
    margin: 30px 0 0px 26px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:55:39.323

尝试给出`.frame_th`一个`position: relative`和`overflow: hidden`，和`.frame_th img`一个`z-index: 0`。这应该保持图像在父 div 中正确定位，没有滑动。

# c++ - C++ 友元函数不起作用，在此上下文中为私有错误

> ID：13673300
> 
> 赞同：3
> 
> 时间：2012-12-02T20:05:15.103
> 
> 标签：c++, function, private, friend

我一直在为我的编程课程做一个练习，而我现在正在学习的特别是关于朋友函数/方法/类的练习。我遇到的问题是我的朋友功能似乎没有做它的工作；我在我的代码周围出现“[变量名] 在此上下文中是私有的”错误，我试图访问友元函数应该有权访问的变量。

这是头文件中的类定义（我删除了不必要的东西以节省空间）。

```
class Statistics {
private: // The personal data.
PersonalData person;

public:
Statistics();
Statistics(float weightKG, float heightM, char gender);
Statistics(PersonalData person);
virtual ~Statistics();

...

friend bool equalFunctionFriend(Statistics statOne, Statistics statTwo);
friend string trueOrFalseFriend(bool value);
}; 
```

这是出现错误的方法。

```
bool equalFuntionFriend(Statistics statOne, Statistics statTwo)
{
// Check the height.
if (statOne.person.heightM != statTwo.person.heightM)
    return false;

// Check the weight.
if (statOne.person.weightKG != statTwo.person.weightKG)
    return false;

// Check the gender.
if (statOne.person.gender != statTwo.person.gender)
    return false;

// If the function hasn't returned false til now then all is well.
return true;
} 
```

所以，我的问题是：我做错了什么？

编辑：问题已由 Angew 解决。似乎这只是一个错字......我很傻！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:08:44.377

我猜是`heightM`，`weightKG`并且`gender`对您的班级是私有的`PersonalData`，这就是您收到错误的原因。仅仅因为您的函数是 的朋友*，*并不`Statistics`意味着它们可以访问. 他们只能访问. 事实上，它自己甚至无法访问 的内部，所以它的朋友当然没有。*`Statistics``Statistics``Statistics``PersonalData`*

 *有几种方法可以解决这个问题。您可以将成员设为`PersonalData`public - 但这不是一个好主意，因为您会减少封装。你可以让你的函数也成为朋友`PersonalData`——你最终可能会得到一张奇怪的友谊图（比如 Facebook 的 C++ 类！）。或者您可以提供`PersonalData`一些公共接口，允许其他人查看其私有数据。

正如@Angew 在评论中指出的那样，当你`equalFuntionFriend`的朋友被命名时，你的函数就会`Statistics`被命名`equalFunctionFriend`——你有一个丢失的字母。这也会导致这个问题。*

# objective-c - iOS Objective-C：NSMutable Array 返回垃圾

> ID：13673304
> 
> 赞同：0
> 
> 时间：2012-12-02T20:05:40.543
> 
> 标签：objective-c, ios, nsmutablearray

我正在尝试采用 C 风格的向量并将其转换为 NSMutable 数组对象。

这是功能：

```
+(NSMutableArray*)arrayFromPoints:(vector<Point2f>&)points
{
    NSMutableArray* pointArray = [[NSMutableArray alloc] init];
    for (int i=0;i<points.size();i++)
    {
        Point2f point = points[i];
        JBPoint* point2 = [[JBPoint alloc]initWithX:point.x andY:point.y];
        [pointArray addObject:point2];
    }
    return pointArray;
} 
```

自定义点类：

```
 @implementation JBPoint

float _x;
float _y;

-(id) initWithX:(float)x andY:(float)y
{
    if (self=[super init])
    {
       _x = x;
       _y=y;
    }
    return self;
}

-(float)x{ return _x;}
-(float)y {return _y;}

@end 
```

测试输出：

```
for (JBPoint* pnt in array)
{
    NSLog(@"%f, %f", pnt.x, pnt.y);
} 
```

我除了它来输出数组，但每次它只给我最后一个值！有谁知道为什么？

我认为它们可能指向同一个对象，但它们具有不同的内存地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:20:49.480

所以我发现了问题所在。`float _x; float _y;`在哪里被视为类变量而不是实例变量。将课程更改为：

```
@interface JBPoint()
{
    float _x;
    float _y;
}

@end

@implementation JBPoint

-(id) initWithX:(float)x andY:(float)y
{
    if (self=[super init])
    {
       _x = x;
       _y=y;
    }
    return self;
}

-(float)x{ return _x;}
-(float)y {return _y;}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:07:53.107

如果你写

```
@property (nonatomic, readonly) float x;
@property (nonatomic, readonly) float y; 
```

在您的头文件中，您不需要声明实例变量（并且可以避免这里的问题），并且您可以删除您编写的 getter 方法，因为它们都将由编译器为您生成，并且您的自定义 init 方法将继续工作（使用最新的编译器）。

这样做是个好主意，因为：

*   更少的代码
*   您的意图很明确 - 2 个对客户端只读的变量
*   遵循语言约定

如果您使用的是旧编译器（旧版本的 Xcode），那么您还必须使用`@synthesize`如下访问器：

```
@synthesize x = _x; 
```

**一些有趣的旁白：**

使用最新的编译器，您不需要类扩展。

```
@implementation{
    float _x;
    float _y;
} 
```

也会奏效的。

如 WWDC 2012 session video 413 中所引用的，当前推荐的编写 init 方法的模式是：

```
...
self = [super init];
if (self) {
...
}
return self; 
```

# c# - 所有现有 PictureBox 控件的 .NET Windows 窗体鼠标输入效果

> ID：13673306
> 
> 赞同：2
> 
> 时间：2012-12-02T20:05:48.253
> 
> 标签：c#, windows, forms, hover, components

我是新来的，这是我在这里的第一篇文章。如果我不遵循在 SO 上创建新问题的标准，我深表歉意。

在过去的几个小时里，我一直在绞尽脑汁尝试编写一个自定义类，它允许我向现有的 PictureBox 控件添加一个新属性，允许我为我的自定义属性设置一个颜色，这将导致设置当用户悬停控件时，带有所选颜色的边框。

以下是我到目前为止编写的代码：

```
[ProvideProperty("HoverColor", typeof(PictureBox))]
public class PictureBoxHover : Component, IExtenderProvider
{
    private readonly Dictionary<IntPtr, Color> _hoverColors;
    public PictureBoxHover()
    {
        _hoverColors = new Dictionary<IntPtr, Color>();
    }
    public bool CanExtend(object extendee)
    {
        return (extendee is PictureBox);
    }
    public Color GetHoverColor(PictureBox picb)
    {
        Color color;
        if (_hoverColors.TryGetValue(picb.Handle, out color))
            return color;
        return Color.Empty;
    }
    public void SetHoverColor(PictureBox picb, Color color)
    {
        Color hoverColor;
        _hoverColors[picb.Handle] = color;
    }
} 
```

上面的代码将自定义属性“HoverColor”添加到我的解决方案中的所有现有 PictureBox 控件 - 正如我需要的那样。我现在需要做的就是当用户将鼠标悬停在控件上时，以某种方式让它使用设置的颜色在我的 PictureBoxes 周围绘制一个边框。

我不希望我的类继承 PictureBox 或 Control 类，因为这需要将我的所有 PictureBoxes 从普通的 PictureBox 更改为我的自定义 PictureBox - 这就是为什么我想“附加”这个自定义属性和功能普通的 PictureBox 控件。

任何帮助将不胜感激 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:53:05.593

也许您可以通过使用自定义用户控件而不是为图片框创建扩展属性来更简单地实现您的目标。下面是一个简单的示例：

```
public class FramedPictureBox : UserControl
{
    private readonly PictureBox _pictureBox;

    public FramedPictureBox()
    {
        const int FRAME_SIZE = 3;
        _pictureBox = new PictureBox
                          {
                              Left = FRAME_SIZE,
                              Top = FRAME_SIZE,
                              Width = Width - 2*FRAME_SIZE,
                              Height = Height - 2*FRAME_SIZE,
                              Anchor = AnchorStyles.Left | AnchorStyles.Bottom | AnchorStyles.Right | AnchorStyles.Top
                          };

        _pictureBox.MouseEnter += OnPictureBoxMouseEnter;
        _pictureBox.MouseLeave += OnPictureBoxMouseLeave;

        Controls.Add(_pictureBox);
    }

    protected override void OnLoad(EventArgs e)
    {
        var image = new Bitmap(_pictureBox.Width, _pictureBox.Height);
        var graphics = Graphics.FromImage(image);
        graphics.Clear(Color.White);

        _pictureBox.Image = image;

        base.OnLoad(e);
    }

    private void OnPictureBoxMouseEnter(object sender, EventArgs e)
    {
        BackColor = Color.Red;
    }

    private void OnPictureBoxMouseLeave(object sender, EventArgs e)
    {
        BackColor = SystemColors.Control;
    }
} 
```

# c++ - 开放世界 3d 环境的最佳地图格式

> ID：13673326
> 
> 赞同：1
> 
> 时间：2012-12-02T20:07:48.783
> 
> 标签：c++, 3d, game-engine, ogre

我正在 Ogre3D 中制作开放世界 3d 平台游戏，但我不知道应该使用哪种 3d 地图文件格式。

我想制作低多边形块状物体。可能是没有圆形边缘的矩形和其他几何图形。其中一些块将具有属性，例如可攀爬或它们可能会移动。

我想知道在不重复制作地图格式和地图编辑器的情况下制作地图的最佳方法是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:10:31.907

看看这个：[http ://www.ogre3d.org/tikiwiki/DotScene](http://www.ogre3d.org/tikiwiki/DotScene)

Ogre 3d 有它自己的 .scene 格式。您可能希望以这种格式执行此操作。

# html - 使 Inner div 与 Outer Div 具有相同的高度（PS：Outer div 具有自定义滚动条）

> ID：13673327
> 
> 赞同：1
> 
> 时间：2012-12-02T20:07:54.183
> 
> 标签：html, css

```
<div id="outer" style="position:relative; overflow:hidden; height:470px; width:900px;">
     <div id="inner" style="position:relative; width:900px; height:1000px;">
     </div>
</div> 
```

还有几点，我有一个用于内部 Div 的自定义垂直滚动条，但问题是这个滚动条不起作用，除非我给它一个我不想要的高度值，因为如果添加了更多内容，它不会显示在内部 div 中。

PS：如果没有给内部div指定高度，滚动条根本不起作用，只会显示470px高度（外部div高度）的内容。

我一直在尝试一整天来弄清楚它，但到目前为止还没有。

# java - 使用对象和字符串创建列表

> ID：13673332
> 
> 赞同：-3
> 
> 时间：2012-12-02T20:08:38.637
> 
> 标签：java

我想用对象创建列表，例如，对于每个对象，都有两个与他相关的字符串的条目。

我尝试在网上找到某种示例，也许我应该用类来解决它，但我不确定如何将对象连接到字符串。

```
<object,String,String>

Like 
Object1 String1 String10
Object2 String2 String3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:17:37.883

答案取决于你想要什么，这并不完全清楚。你可以有一个包含两个字符串的类，例如

```
class Pair {
    public String a,b;
} 
```

然后有一个`List<Pair> myList = new List<>();`

**编辑**：刚刚看到你的编辑 - 可能不想要这个，除非你更新你的类以包含对象作为一个字段，例如`public object him; public String a,b;`

或者，如果您有一个想要与每对字符串关联的现有对象，听起来您可能有，您将需要使用 a `Map`，例如`HashMap`：

```
HashMap<Him, Pair> myMap = new HashMap<>(); 
```

请参阅[HashMap 的 javadocs](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)

# javascript - 当页面刷新时，Javascript TextArea 控件自动到最后一行

> ID：13673335
> 
> 赞同：1
> 
> 时间：2012-12-02T20:09:31.453
> 
> 标签：javascript, html

[我正在为我的网页编写 JavaScript，您可以在这里](http://jntunews.com/simulators/4/omu.php)查看。此页面用于执行所有命令。例如有一个命令“ZDYE:SET,0&&98:ACT=ENA;” 当您在命令提示符中键入此内容时。它执行代码。我有一个小错误。输入代码并点击进入页面刷新并执行代码。但是光标位置正在移动到第一行。输入一组命令后，我们向下滚动查看代码。但我想在执行代码后自动向下滚动到最后一行。例如键入代码“ZDYE:SET,0&&98:ACT=ENA;” 并按 Enter。重复执行直到滚动条出现。你会明白我的问题。

为了使光标位置到最后一行，我使用了此代码。

```
// JavaScript

function moveCaretToEnd(el) {
    if (typeof el.selectionStart == "number") {
        el.selectionStart = el.selectionEnd = el.value.length;
    } else if (typeof el.createTextRange != "undefined") {
        el.focus();
        var range = el.createTextRange();
        range.collapse(false);
        range.select();
    }
}

var textarea = document.getElementById("text");
    textarea.onfocus = function() {
    moveCaretToEnd(this);

    // Work around Chrome's little problem
    textarea.onmouseup = function() {
        // Prevent further mouseup intervention
        moveCaretToEnd(this);
        textarea.onmouseup = null;
        return false;
    };
}; 
```

但是再次没有用光标位置将转到第一行。请帮我

# java - 使用 Apache POI 在 java 中获取单词的缩略图

> ID：13673337
> 
> 赞同：0
> 
> 时间：2012-12-02T20:09:32.147
> 
> 标签：java, apache-poi

我在研究一个jsf的网络共享项目。在这个项目中，用户可以上传.doc、.pdf、.ppt、..etc等文件。我想将此文档的首页显示为缩略图。经过一番谷歌搜索后，我找到了 Apache POI。有人对我的问题有什么建议吗？如何返回 word doc 第一页的缩略图？我试试这段代码。这段代码只是得到了word doc包含的第一张图片：

```
 POIFSFileSystem fs = new POIFSFileSystem(new FileInputStream("d:\\test.doc"));
        HWPFDocument doc = new HWPFDocument(fs);
        PicturesTable pt=doc.getPicturesTable();
        List<Picture> p=pt.getAllPictures();
        BufferedImage image=ImageIO.read(new ByteArrayInputStream(p.get(0).getContent()));
        ImageIO.write(image, "JPG", new File("d:\\test.jpg")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T09:42:28.413

你在做什么什么都没有。HWPFDocument 可以提取嵌入在文档中的缩略图（保存文件时，选中“添加预览”选项）。因此 HWPFDocument 只能提取具有缩略图的文档的缩略图。

甚至，要做到这一点，您必须制作：{code}

```
static byte[] process(File docFile) throws Exception {
    final HWPFDocumentCore wordDocument = AbstractWordUtils.loadDoc(docFile);
    SummaryInformation summaryInformation = wordDocument.getSummaryInformation();
    System.out.println(summaryInformation.getAuthor());
    System.out.println(summaryInformation.getApplicationName() + ":" + summaryInformation.getTitle());
    Thumbnail thumbnail = new Thumbnail(summaryInformation.getThumbnail());
    System.out.println(thumbnail.getClipboardFormat());
    System.out.println(thumbnail.getClipboardFormatTag());
    return thumbnail.getThumbnailAsWMF();
} 
```

{code} 之后，您可能必须将 WMF 文件格式转换为更常见的格式（jpeg、png...）。ImageMagick 可以提供帮助。

# javascript - 如何结合其他属性在jqgrid中设置编辑表单的位置和大小

> ID：13673340
> 
> 赞同：1
> 
> 时间：2012-12-02T20:10:08.707
> 
> 标签：javascript, jquery-ui, jqgrid, jquery-ui-dialog

如何在运行时更改的指定位置和大小处创建 jqgrid 编辑表单？编辑窗口位置应与 navGrid 中的其他编辑参数相结合。

我尝试了下面的代码，但没有出现警告框，并且编辑表单显示在默认位置。

```
var oldJqDnRstop,
  editWindowParams = { 
          left: 10,
          width: window.innerWidth-18,
          top: 5,
          height: 100
          };

if ($.jqDnR) {
    oldJqDnRstop = $.jqDnR.stop; // save original function
    $.jqDnR.stop = function (e) {
        var $dialog = $(e.target).parent(), dialogId = $dialog.attr("id"), position;
        oldJqDnRstop.call(this, e); // call original function
        if (typeof dialogId !== "string") {
            return;
        }
        if (dialogId.substr(0, 11) === "editmodgrid") {
            editWindowParams.width = $dialog.width();
            position = $dialog.position();
            editWindowParams.left = position.left;
            editWindowParams.top = position.top;
        }
    };
}

        $.extend($.jgrid.edit, {
          closeAfterAdd: true,
          recreateForm: true,
          reloadAfterSubmit: false,
          left: 10,
          dataheight: '100%',
          width: window.innerWidth-18
        });

     $grid.jqGrid("navGrid", "#grid_toppager", { edit: true }, 
      { 
       top: function() { alert(editWindowParams.top); return editWindowParams.top; },
       left: function() { return editWindowParams.left; },
       width: function() { return editWindowParams.width; },
       height: function() { return editWindowParams.height; },

            afterSubmit: function (response, postdata) { 
              if (response.responseText.charAt(0) === '{') {
                var json = $.parseJSON(response.responseText);
                return [true, '', json.Id];
                }
              alert( decodeErrorMessage(response.responseText, '', ''));
              return [false, decodeErrorMessage(response.responseText, '', ''), null];
              },

            beforeShowForm: function ($form) {
              $("#tr_Info>td:eq(1)").attr("colspan", "2"); 
              $("#tr_Info>td:eq(1)>textarea").css("width", "95%"); 
              $("#tr_Info>td:eq(0)").hide(); 
              $("#tr_Markused>td:eq(1)").attr("colspan", "2"); 
              $("#tr_Markused>td:eq(1)>textarea").css("width", "95%"); 
              $("#tr_Markused>td:eq(0)").hide(); 
              beforeShowForm_base($form);
              },

            url: '/Edit',
            closeAfterEdit: true,
            onClose: function(){ 
              $( ".ui-autocomplete-input").trigger("blur");
            } 

       } ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:25:41.380

[该演示](http://www.ok-soft-gmbh.com/jqGrid/SaveEditDialogWidthWithPosition.htm)演示了固定代码。[这是对我之前回答](https://stackoverflow.com/a/13663106/315935)的演示的修改。它使用以下代码：

```
if ($.jqDnR) {
    oldJqDnRstop = $.jqDnR.stop; // save original function
    $.jqDnR.stop = function (e) {
        var $dialog = $(e.target).parent(), dialogId = $dialog.attr("id"),
            position, $form;

        oldJqDnRstop.call(this, e); // call original function
        if (typeof dialogId === "string") {
            if (dialogId.substr(0,14) === "searchmodfbox_") {
                // save the dialog position here
                searchParams.width = $dialog.width();
                position = $dialog.position();
                searchParams.left = Math.max(0, position.left);
                searchParams.top = Math.max(0, position.top);
            } else if (dialogId.substr(0,7) === "editmod") {
                // Add or Edit form
                editParams.width = $dialog.width();
                position = $dialog.position();
                editParams.left = Math.max(0, position.left);
                editParams.top = Math.max(0, position.top);
                $form = $dialog.find("form.FormGrid");
                if ($form.length > 0) {
                    editParams.dataheight = $form.height();
                }
                editParams.height = $dialog.height();
            } else if (dialogId.substr(0,6) === "delmod") {
                // Delete form
            }
        }
    };
} 
```

# node.js - node.js util.inherits vs new

> ID：13673341
> 
> 赞同：2
> 
> 时间：2012-12-02T20:10:12.530
> 
> 标签：node.js

[在 Node.js 文档](http://nodejs.org/docs/latest/api/util.html#util_util_inherits_constructor_superconstructor)中，我们可以看到：

```
var util = require("util");
var events = require("events");

function MyStream() {
    events.EventEmitter.call(this);
}

util.inherits(MyStream, events.EventEmitter);

var stream = new MyStream(); 
```

是否与以下内容相同：

```
function MyStream2() {
}
//MyStream2 = new events.EventEmitter; WRONG. Thank you @Esailija
MyStream2.prototype = new events.EventEmitter;

var stream2 = new MyStream2(); 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T20:16:51.673

如果我们编辑您的代码以使其正常工作，那就是：

```
MyStream2.prototype = new events.EventEmitter; 
```

还是会有一些区别：

*   在您的版本中，`MyStream2.prototype.constructor === events.EventEmitter`，`inherits`，`MyStream2.prototype.constructor === MyStream2`

*   您的版本调用`events.EventEmitter`可能有副作用的构造函数，而`inherits`使用`Object.create`不调用构造函数的函数。

*   与链接原型之间的差异无关，但您的版本在调用子构造函数时不会调用父构造函数。`function MyStream2() { events.EventEmitter.call(this); }`因此，当调用子构造函数时，它仍然必须正确建立初始状态。

# gem - RVM：为新的 ruby 版本获取以前的 ruby 宝石

> ID：13673342
> 
> 赞同：1
> 
> 时间：2012-12-02T20:10:28.037
> 
> 标签：gem, rvm

我以前用[rvm](https://rvm.io/)`ruby 1.9.3-p286`安装过（设置为）。我为这个版本安装了大量的宝石（全球）。`--default`

我`ruby 1.9.3-p327`今天用 rvm 安装（并想将其设置为新的`--default`），但我现在必须以某种方式重新下载/重新安装我以前在`1.9.3-p286`.

有没有什么简单的方法可以安装`p327`我之前安装的所有 gem，`p286`而无需再次手动设置`gem install`？

**编辑：** 在[rvm 的升级页面上](https://rvm.io/rubies/upgrading/)，它提到了一些关于复制“gemsets”然后运行的内容`gem update`，但我不确定我的用例使用什么语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:02:14.027

[复制 gems](https://rvm.io/gemsets/copying/)它不需要 gemsets，如前所述。对于您的情况，它将是：

`rvm gemset copy 1.9.3-p286 1.9.3-p327`.

# javascript - 同时支持 CommonJS 和 AMD

> ID：13673346
> 
> 赞同：36
> 
> 时间：2012-12-02T20:10:46.117
> 
> 标签：javascript, amd, commonjs

有没有办法创建一个支持以下所有模块格式的javascript微库（一个没有依赖关系的库）：

*   异步模块定义
*   CommonJS
*   将库的导出公开为全局命名空间对象（无加载器）

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-25T20:02:26.710

是的，我把这个答案归功于[ded](https://github.com/ded/)和他很棒的模块：

```
(function(name, definition) {
    if (typeof module != 'undefined') module.exports = definition();
    else if (typeof define == 'function' && typeof define.amd == 'object') define(definition);
    else this[name] = definition();
}('mod', function() {
    //This is the code you would normally have inside define() or add to module.exports
    return {
        sayHi: function(name) {
            console.log('Hi ' + name + '!');
        }
    };
})); 
```

然后可以使用它：

1.  在 AMD 中（例如使用 requireJS）：

    ```
    requirejs(['mod'], function(mod) {
        mod.sayHi('Marc');
    }); 
    ```

2.  在 commonJS（例如 nodeJS）：

    ```
    var mod = require('./mod');
    mod.sayHi('Marc'); 
    ```

3.  全局（例如在 HTML 中）：

    ```
    <script src="mod.js"></script>
    <script>mod.sayHi('Marc');</script> 
    ```

这种方法需要得到更多的宣传——如果 jQuery 和 co. 开始使用它的生活会容易得多！

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-02T21:31:39.510

这是[各种交叉兼容模块格式的列表](https://github.com/umdjs/umd)。

我怀疑你要找的是他们所谓的“ [commonjsStrict.js](https://github.com/umdjs/umd/blob/master/commonjsStrict.js) ”

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-02T10:12:51.110

[uRequire](http://urequire.org)，通用模块和资源转换器正是这样做的工具。

*   它主要**将 AMD 和 CommonJS 转换**为**UMD / AMD / CommonJS / 纯脚本（不需要 AMD 加载器）**。

*   它允许声明式导出模块，并带有`noConflict()`烘焙功能。

*   它可以在构建模块时操作模块（注入/替换/删除依赖项或代码）。

*   它可以从 coffeescript、coco、Livescript、icedCoffeescript 转换，您可以在一个衬里中添加自己的转换！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T23:41:42.520

只是为了更新一点关于@marc的答案，我也对 ded 表示感谢，并对其进行了一些更新以适应最新的更新：

```
(function (name, definition, context, dependencies) {
  if (typeof context['module'] !== 'undefined' && context['module']['exports']) { if (dependencies && context['require']) { for (var i = 0; i < dependencies.length; i++) context[dependencies[i]] = context['require'](dependencies[i]); } context['module']['exports'] = definition.apply(context); }
  else if (typeof context['define'] !== 'undefined' && context['define'] === 'function' && context['define']['amd']) { define(name, (dependencies || []), definition); }
  else { context[name] = definition(); }
})('events', function () {
  // Insert code here
  return {
    sayHi: function(name) {
      console.log('Hi ' + name + '!');
    }
  };
}, (this || {})); 
```

最后的对象是对父范围或当前范围的引用，假设您有一个正在编写的包，这只是其中的一部分，那么上下文可能是一个名称空间对象，这只是一个一块馅饼。

此外，如果您希望拥有依赖项，则在您的范围之后的末尾有一个支持数组的可选参数，在这种情况下，定义参数可以利用每个依赖项作为参数。此外，为方便起见，在 node-js 平台中将需要数组中列出的依赖项。

请参阅：[https](https://gist.github.com/Nijikokun/5192472) ://gist.github.com/Nijikokun/5192472以获取真实示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T16:45:54.093

我已经解决了这个确切的问题并设法轻松支持：

*   Dojo AMD（参考 RequireJS 规范）
*   jQuery（在 $/jQuery.fn.[your_library_here] 下）
*   node.js 使用香草 require('path_to.js')
*   浏览器窗口。[your_library_here]

它使用依赖注入和 IIFE 的组合来完成工作。

见下文：

```
/*global jQuery:false, window:false */
// # A method of loading a basic library in AMD, Node.JS require(), jQuery and Javascript's plain old window namespace.
(function(exporterFunction) {
exporterFunction('cll',
    function(a,b) {
        return a+b;
    }
);
})(
    (function() { // Gets an exportFunction to normalize Node / Dojo / jQuery / window.*

        if ((typeof module != 'undefined') && (module.exports)) { // Node Module
            return function(library_name,what_was_exported) {
                module.exports = what_was_exported;
                return;
            };
        }
        if (typeof define != 'undefined' && define.hasOwnProperty('amd') && define.amd) { // Dojo AMD
            return function(library_name,what_was_exported) {
                define(function() {
                    return what_was_exported;
                });
            };
        }
        if (typeof jQuery === 'function') { // jQuery Plugin
            return function(library_name,source) {
                jQuery.fn[library_name] = source;
                return;
            };
        }
        if (typeof window != 'undefined') { // Fall down to attaching to window...
            return function(library_name,what_was_exported) {
                window[library_name] = what_was_exported;
            };
        }

    })(),
    (function() { 
        // ## Other Parameters Here
        // You could add parameters to the wrapping function, to include extra 
        // functionalilty which is dependant upon the environment... See 
        // https://github.com/forbesmyester/me_map_reduce for ideas.
        return 'this_could_be_more_arguments_to_the_main_function'; 
    })()
); 
```

公共要点可在[https://gist.github.com/forbesmyester/5293746获得](https://gist.github.com/forbesmyester/5293746)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-29T20:33:26.470

这是基于Nijikokun的回答。由于 RequireJS 不鼓励使用显式模块名称，因此在此版本中已将其省略。加载器的第二个参数描述了依赖关系。`[]`如果您不需要加载任何内容，则通过。

```
var loader = function(name, dependencies, definition) {
  if (typeof module === 'object' && module && module.exports) {
      dependencies = dependencies.map(require);
      module.exports = definition.apply(context, dependencies);
  } else if (typeof require === 'function') {
    define(dependencies, definition);
  } else {
    window[name] = definition();
  }
};

loader('app', ['jquery', 'moment'], function($, moment) {
   // do your thing
   return something;
} 
```

# python - 抛出异常，包括附加信息行

> ID：13673347
> 
> 赞同：2
> 
> 时间：2012-12-02T20:10:48.587
> 
> 标签：python

我有一些代码可以解析文件。这很简单，就像这样：

```
for line in config_file:
    line_split=line.split("|")
    pid_index = int(line_split[3])
    date_locations = [int(i) for i in line_split[2].split(",")]
    in_file = line_split[0]
    out_file = line_split[1]
    file_info.append([in_file, out_file, date_locations, pid_index]) 
```

如果发生某些事情，我希望 Python 继续打印其通常的错误消息，但我想在常规错误消息的末尾添加一行，例如：

```
except:
    print "line \"{0}\"  might have failed to parse".format(line.rstrip()) 
```

然而，上面的代码只显示了额外的信息行——常规的错误信息被覆盖了！

我尝试将以下内容添加到我的捕获中，但它会产生丑陋的输出：

```
e = sys.exc_info()
for i in e:
    print i 
```

有没有一种简单的方法让 Python 打印常规错误消息以及我选择的附加信息行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:14:21.460

我认为这里最好的选择（并且我在此编辑中删除了我的其他解决方案，因为我觉得它实际上不是一个很好的解决方案）是创建您自己的异常来描述您的问题，然后在您拥有的异常之上使用它：

```
class ParseFailureError(Exception):
    def __init__(self, line):
        self.line = line.rstrip()

    def __str__(self):
        return "line \"{0}\"  might have failed to parse".format(self.line) 
```

然后：

```
try:
    ...
except SomeException as exception:
    raise ParseFailureError(line) from exception 
```

这将产生类似的东西：

```
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
NameError: name 'x' is not defined

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<stdin>", line 4, in <module>
__main__.ParseFailureException: line "blah" might have failed to parse 
```

（我用 a`NameError`作为`SomeError`例子）

请注意，我在您的`except`行中添加了一个特定的异常 - 这总是值得做的，因为捕获任何异常都可能导致您忽略您不希望的错误。

此方法的优点是使您的代码更易于其他软件使用，因为它们可以捕获此特定异常。

异常的`from`语法告诉 Python 异常的根本原因。否则，Python 将假定新异常是在处理异常期间发生的错误。请注意，这仅在 Python 3.x 中可用，在早期版本中，您必须手动执行此操作。我建议使用[`traceback.format_exc()`](http://docs.python.org/2/library/traceback.html#traceback.format_exc)then 打印它作为异常错误消息的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T20:14:00.183

`except`抑制错误。你想抓住它来打印你的额外信息——然后让它再次回来。你这样做

```
try:
    raise ValueError("I do not like green eggs and ham")
except ValueError as e:
    print("OK, actually I do.")
    raise 
```

在 Python 2.x 中，一次只能抛出一个异常。在 Python 3 中，您可以

```
raise ValueError("OK, actually I do.") from e 
```

表示此错误是由前一个错误引起的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T20:24:19.223

您可以使用[日志记录模块](http://docs.python.org/library/logging.html)：

```
import sys
import logging
logging.basicConfig(level = logging.DEBUG)
logger = logging.getLogger(__name__)

config_file = """\
foo bar
""".splitlines()
try:
    for line in config_file:
        line_split=line.split("|")
        pid_index = int(line_split[3])
        date_locations = [int(i) for i in line_split[2].split(",")]
        in_file = line_split[0]
        out_file = line_split[1]
        file_info.append([in_file, out_file, date_locations, pid_index])
except IndexError as err:
    logger.exception('line {l!r} might have failed to parse'.format(
        l = line.rstrip()))    
    sys.exit() 
```

产量

```
ERROR:__main__:line 'foo bar' might have failed to parse
Traceback (most recent call last):
  File "/home/unutbu/pybin/test2.py", line 15, in <module>
    pid_index = int(line_split[3])
IndexError: list index out of range 
```

# c# - IEnumerable 返回 First

> ID：13673350
> 
> 赞同：3
> 
> 时间：2012-12-02T20:11:05.337
> 
> 标签：c#, linq

我有以下代码：

```
 public IEnumerable<Report> GetReport(int reportId)
    {
        var dbReport = dbContext.ReportsTbl.Where(w =>w.ID == reportId);
        return dbReport;

   } 
```

我喜欢做什么虽然我们得到第一

如果我做：

```
 public IEnumerable<Report> GetReport(int reportId)
    {
        var dbReport = dbContext.ReportsTbl.First(w =>w.ID == reportId);
        return dbReport;
   } 
```

我如何让它做 First(). 它抱怨它是 IEnumerable。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T20:12:05.967

您需要更改方法签名以仅返回单个对象而不是集合：

```
public Report GetReport(int reportId)
{
    var dbReport = dbContext.ReportsTbl.First(w =>w.ID == reportId);
    return dbReport;
} 
```

如果出于某种原因您确实想要一个仅包含您可以使用的第一个元素的集合，`.Take(1)`而不是`First`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T20:13:52.733

`First`将第一个元素作为 type 返回`Report`。由于它只是一项，因此它不会返回可枚举。

你有两个选择：

```
public Report GetReport(int reportId)
{
    var dbReport = dbContext.ReportsTbl.First(w =>w.ID == reportId);
    return dbReport;
} 
```

此示例将仅返回一份报告，而不是一堆（可枚举的）报告。

```
public IEnumerable<Report> GetReport(int reportId)
{
    var dbReport = dbContext.ReportsTbl.Where(w =>w.ID == reportId).Take(1);
    return dbReport;
} 
```

这个例子将只返回一个报告，但它会被包裹在一个可枚举的内部。您可以将其视为一组只有一个报告。

# iphone - Objective C整数第一次为0，但第二次改变

> ID：13673356
> 
> 赞同：0
> 
> 时间：2012-12-02T20:11:20.160
> 
> 标签：iphone, objective-c, ios, xcode, nsurlconnection

好的，所以我有这个程序应该通过 Web 服务器进行通信（PHP 脚本）

我有这种方法，我想为一个表获取一个随机 id。这个 NSURLconnection 的返回数据应该是表中的行数。

我第一次调用它时，它就像随机变量一样没有设置，但我第二次运行它时，它确实设置了。

变量设置：

```
@implementation ViewController {
NSMutableData *randomData;
int randomid;
} 
```

这是我的 IBaction 按钮：

```
- (IBAction)initVits:(id)sender {
[self randomID];
NSLog(@"Random ID: %d", randomid);    
} 
```

第一次输出为：Random ID: 0，第二次输出：Random ID: a valid id

随机编号：

```
- (void) randomID {

NSString *url = @"http://ivitserdk.porkhost.dk/ivitserdk.php?function=randomid";
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url]   cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:1.0];
connectionRandomID = [[NSURLConnection alloc] initWithRequest:request delegate:self];

randomData = [NSMutableData data];
[connectionRandomID start];
} 
```

连接确实完成了加载：

```
 if(connection == connectionRandomID) {
    NSString *String = [[NSString alloc] initWithData:randomData encoding:NSUTF8StringEncoding];
    NSLog(@"Return: %@", String);
    int temp = [String integerValue];
    NSLog(@"temp: %d", temp);
    randomid = (arc4random() % temp) + 1;
    NSLog(@"Random: %d", randomid);
    randomData = nil;
    connectionRandomID = nil;
 } 
```

输出适用于所有时间：返回：（表中的行数） temp：（表中的行数为 int） Random：（随机数）

就像第一次没有设置随机变量一样。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:18:14.500

[self randomID] 立即返回，因为您正在 randomID 函数内部进行异步调用。

randomid 在 didFinish 回调中设置，它在您 NSLog ivar randomid 后执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:20:24.610

您正在使用异步网络，因此`NSLog`在从服务器检索随机 ID 之前调用您的。对此有多种解决方案。

*   使用同步网络（我不推荐这个，所以我不深入探讨）
*   将`NSLog`生成 ID 时的语句或您想做的任何事情放在`connectionDidFinishLoading`方法的末尾
*   如果可能的话，我建议在设备上生成 ID（但我想你需要一个数据库的唯一键、一个 URL 或其他东西，所以这可能不适合你）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T20:18:05.393

你加了这个吗？

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
// Append the new data to receivedData.
// receivedData is an instance variable declared elsewhere.
[randomData appendData:data];
} 
```

# c - `PAGE_ALIGN` 对`unsigned int` 有什么作用？它不应该得到一个地址吗？

> ID：13673357
> 
> 赞同：0
> 
> 时间：2012-12-02T20:11:29.463
> 
> 标签：c, linux, memory, linux-kernel, framebuffer

在一些帧缓冲区配置代码中，我看到了这些行：

```
static unsigned int max_size = 0;

max_size = max(max_size, 8*(mi->xres * (mi->xres + mi->yres)));
    }

max_size = PAGE_ALIGN(max_size); 
```

`PAGE_ALIGN`对 和 有什么作用`unsigned int`？它不应该得到一个地址吗？

```
mi is `struct fb_videomode *` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:14:23.553

它将大小四舍五入到页面大小的精确倍数（通常类似于 4k，尽管取决于实现）。

在这种情况下，它不是应用于绝对地址，而是应用于大小 - 这可能会成为地址之间的差异。

# jquery - jQuery .data() 不更新 HTML5 数据属性

> ID：13673369
> 
> 赞同：4
> 
> 时间：2012-12-02T20:12:46.827
> 
> 标签：jquery, knockout.js, custom-data-attribute

我正在尝试使用 jQuery 将“ **data-bind** ”属性添加到 div，如下所示：

```
var messageViewModel = {
    data: ko.observable({   
        message: response.message, 
        sendDateFmted: response.sendDateFmted, 
        messageId: response.messageId
    })
     };

$("<div>",{
    class:"messageToAndFromOtherMember"
}).data("bind", "template: { name: 'message-template', data: data }").appendTo("#messagesToAndFromOtherMember");

ko.applyBindings(messageViewModel); 
```

KnockoutJs 需要“**数据绑定**”。但是我得到的只是这个空的div：

```
<div class="messageToAndFromOtherMember"></div> 
```

请注意，没有这样`data-bind`的属性，因此 div 保持为空......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T20:26:29.017

jQuery[`.data()`](http://api.jquery.com/data/)将值存储在内存中并使用`data-*`属性进行初始化。您可能希望通过在元素创建时设置它来坚持。

```
$("<div/>", {
  class: "messageToAndFromOtherMember",
  "data-bind": "template: { name: 'message-template', data: data }"
}).appendTo("#messageToAndFromOtherMember"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T00:29:26.440

从一般意义上讲，亚历山大的回答绝对是正确的，但我不禁注意到，在您的具体示例中，您似乎通过为每条消息创建新的绑定范围来将消息添加到代码中。如果是这种情况，我认为您错误地使用了 Knockout（如果没有，请告诉我，我将删除它）。

如果您从服务器获取新消息，并且只是尝试在页面上显示它们的列表，那么更好的结构是使用[ObservableArray](http://knockoutjs.com/documentation/observableArrays.html)，然后简单地将新消息推送到它。标准的敲除绑定会自动将新消息添加到您的 html 中，而无需创建新的绑定范围，以及为新消息创建一个完全独立的视图模型。[您可以在这个 fiddle](http://jsfiddle.net/tyrsius/F2ukz/1/)中看到这一点。

这是相当做作的 ViewModel：

```
var ViewModel = function(data) {
    var self = this;
    self.messages = ko.observableArray();
    self.newMessage = ko.observable('');
    self.addMessage = function() {
        var message = new Message({ message: self.newMessage()});
        self.newMessage('');
        self.messages.push(message);
    };
}; 
```

# sql - SQL 查询优化（嵌套子查询）

> ID：13673372
> 
> 赞同：0
> 
> 时间：2012-12-02T20:13:09.837
> 
> 标签：sql, query-optimization, subquery

我需要写一个查询：

> 找出 1980 年之前发行的电影的平均收视率与 1980 年之后发行的电影的平均收视率之间的差异。（确保计算每部电影的平均收视率，然后计算 1980 年之前和之后电影的平均收视率。不要' t 只计算 1980 年前后的总体平均评分。）

架构如下：

```
Movie ( mID, title, year, director )
English: There is a movie with 
ID number mID, a title, a release year, and a director.

Reviewer ( rID, name )
English: The reviewer with ID number rID has a certain name.

Rating ( rID, mID, stars, ratingDate )
English: The reviewer rID gave the movie mID a 
number of stars rating (1-5) on a certain ratingDate. 
```

以下是我提出的查询。结果是正确的，但绝对不是一个很好的查询：

```
 select t1.p1-t2.p2 from
    (select avg(average) as p1  from 
    (select g.mid,g.average, year from
    (select mid, avg(stars) as average from rating
    group by mid) g, movie
    where g.mid=movie.mid) j 
    where year >= 1980) t1,

    (select avg(average) as p2  from 
    (select g.mid,g.average, year from
    (select mid, avg(stars) as average from rating
    group by mid) g, movie
    where g.mid=movie.mid) j 
    where year < 1980) t2; 
```

以下是我如何得出这个查询。首先，我编写了这个子查询来检索电影 id、该电影的平均评分、电影年份：

```
 select g.mid,g.average, year from
    (select mid, avg(stars) as average from rating
    group by mid) g, movie
    where g.mid=movie.mid 
```

现在我需要使用相同的子查询来创建两个表，其中第一个表包含 1980 年之后电影的平均评分。第二个表包含 1980 年之前电影的平均评分。在顶级查询中，我减去这两个值。

问题是我在两个地方复制了相同的代码。您能否从代码重复和性能的角度帮助优化代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:28:23.507

您可以在没有这样的重复的情况下做到这一点：

```
Select
  Avg(Case When m.Year >= 1980 Then a.stars Else Null End) -
  Avg(Case When m.Year < 1980 Then a.stars Else Null End)
From (
    Select
      mid,
      avg(stars) stars
    From 
      rating
    Group By
      mid
  ) a 
    inner join
  movie m
    on m.mid = a.mid 
```

您可能希望将内部查询移动到视图或公用表表达式 (CTE)。根据您使用的 dbms，您可能需要将星号转换为十进制类型，或者您可能会以整数运算获得所有内容。

评级表的索引`(mid, stars)`将有助于性能方面。

[示例小提琴](http://sqlfiddle.com/#!2/90247/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:30:34.143

试一试并假设 SQL Server，有几件事。索引非常重要，查询的编写方式也是如此。

一些 CREATE TABLE 语句

```
create table Movie ( mID int primary key clustered, title varchar(100), year int, director varchar(100) ) 

create table Reviewer ( rID int primary key clustered, name varchar(100) ) 

create table Rating ( rID int, mID int, stars int, ratingDate datetime , primary key clustered (rID, mID) ) 
```

我已经聚集在 Movie 表中的 mID 上，并且聚集在评级表中的 rID 和 mID 字段上，不适合您的查询。

索引：SQL 需要获取电影的所有评分，因此 Rating 表的更好的聚集键是创建表 Rating ( rID int, mID int, stars int, ratingDate datetime , primary key clustered (mID, rID) )

如果您无法更改此类内容，则至少创建一个按 mID 索引并包含 stars 列的覆盖索引。

接下来，您的查询...有几种方法可以编写它 - 最好查看查询计划输出。这是编写查询的一种方式

```
with 
    MovieAverage as (
        select mID, movieAvgStars = avg(stars)
        from Rating
        group by mID
        ),

    Pre1980 as (
        select MovieAvgStars = avg(  movieAvgStars )
        from MovieAverage
            inner join Movie
                on MovieAverage.mID = Movie.mID
        where Movie.year < 1980
        ),

    IncAndPost1980 as (
        select MovieAvgStars = avg(  movieAvgStars )
        from MovieAverage
            inner join Movie 
                on MovieAverage.mID = Movie.mID
        where Movie.year >= 1980
        )

select IncAndPost1980.MovieAvgStars - Pre1980.MovieAvgStars
from IncAndPost1980 cross JOIN Pre1980 
```

可能还有其他调整方式，但没有样本数据等很难正确判断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T20:28:36.287

没有任何效率考虑，也没有考虑任何特定的 DBMS（无论如何，很少有`NATURAL`连接和 CTE）：

```
; WITH g AS
    ( SELECT mid, AVG(stars) AS average 
      FROM rating
      GROUP BY mid
    ) 
  , j AS
    ( SELECT mid, average, year 
      FROM g NATURAL JOIN movie
    )
  , t1 AS
    ( SELECT AVG(average) AS p1 
      FROM j
      WHERE year >= 1980
    )
  , t2 AS
    ( SELECT AVG(average) AS p2 
      FROM j
      WHERE year < 1980
    )
  SELECT t1.p1 - t2.p2 AS result
  FROM t1 CROSS JOIN t2 
; 
```

# c# - 如何使用 C# 和 VSTO 将特殊的未格式化纯文本粘贴到 Excel 中？

> ID：13673373
> 
> 赞同：0
> 
> 时间：2012-12-02T20:13:26.993
> 
> 标签：c#, vsto, excel-2010

很难相信这个问题没有被问过或不可能，但这就是我从网络搜索中看到的。

我想做的就是使用 VSTO 仅将未格式化的纯文本粘贴到活动单元格区域中。使用[Range.PasteSpecial](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.pastespecial%28v=office.14%29.aspx)仅提供粘贴值的选项（[除其他外](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.xlpastetype%28v=office.14%29.aspx)），但这些包括格式。真的没有使用 PasteSpecial 粘贴无格式文本的选项吗？

有没有其他人发现这样做的方法？在此应用程序中不能使用宏。

这正是我尝试过的：

```
((Excel.Range)Application.Selection).PasteSpecial(Excel.XlPasteType.xlPasteValues); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:50:19.227

奇怪的是 Excel.XlPasteType.xlPasteValues 不会为我做这件事，但我最终只是做了以下工作：

```
string textToPaste = (string)Clipboard.GetData("Text");
Clipboard.SetData("Text", textToPaste);
((Excel.Range)Application.Selection).PasteSpecial(Excel.XlPasteType.xlPasteValues); 
```

希望这对其他人有帮助！

# php - MAMP 服务器正在运行但显示“糟糕！Google Chrome 找不到 localhost:8888”

> ID：13673374
> 
> 赞同：2
> 
> 时间：2012-12-02T20:13:32.983
> 
> 标签：php, mysql, osx-snow-leopard, mamp

我正在尝试在 Snow Leopard 上运行 MAMP。服务器是绿色的并且工作正常，但是每当我使用任何浏览器时，我都会或多或少地收到来自 Chrome 的“糟糕”消息。我无法弄清楚问题是什么？

在我的 apache_error.log 我得到：

```
[Sun Dec 02 14:03:40 2012] [notice] Digest: generating secret for digest authentication ...
[Sun Dec 02 14:03:40 2012] [notice] Digest: done
[Sun Dec 02 14:03:40 2012] [notice] Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/0.9.8r DAV/2 PHP/5.4.4 configured -- resuming normal operations
[Sun Dec 02 14:14:12 2012] [notice] caught SIGTERM, shutting down
[Sun Dec 02 14:14:13 2012] [notice] Digest: generating secret for digest authentication...    
[Sun Dec 02 14:14:13 2012] [notice] Digest: done
[Sun Dec 02 14:14:13 2012] [notice] Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/0.9.8r DAV/2 PHP/5.4.4 configured -- resuming normal operations
[Sun Dec 02 14:27:55 2012] [notice] caught SIGTERM, shutting down
[Sun Dec 02 14:43:56 2012] [notice] Digest: generating secret for digest authentication ...
[Sun Dec 02 14:43:56 2012] [notice] Digest: done
[Sun Dec 02 14:43:56 2012] [notice] Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/0.9.8r DAV/2 PHP/5.4.4 configured -- resuming normal operations
[Sun Dec 02 15:04:14 2012] [notice] caught SIGTERM, shutting down
[Sun Dec 02 15:04:18 2012] [notice] Digest: generating secret for digest authentication ...
[Sun Dec 02 15:04:18 2012] [notice] Digest: done
[Sun Dec 02 15:04:18 2012] [notice] Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/0.9.8r DAV/2 PHP/5.4.4 configured -- resuming normal operations
[Sun Dec 02 15:04:24 2012] [notice] caught SIGTERM, shutting down
[Sun Dec 02 15:04:27 2012] [notice] Digest: generating secret for digest authentication ...
[Sun Dec 02 15:04:27 2012] [notice] Digest: done
[Sun Dec 02 15:04:27 2012] [notice] Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/0.9.8r DAV/2 PHP/5.4.4 configured -- resuming normal operations 
```

mysql_error_log.err 是：

```
121202 15:04:27 mysqld_safe Starting mysqld daemon with databases from /Applications/MAMP/db/mysql
121202 15:04:27 [Warning] You have forced lower_case_table_names to 0 through a command-line option, even though your file system '/Applications/MAMP/db/mysql/' is case insensitive.  This means that you can corrupt a MyISAM table by accessing it with different cases. You should consider changing lower_case_table_names to 1 or 2
121202 15:04:27 [Warning] One can only use the --user switch if running as root

121202 15:04:27 [Note] Plugin 'FEDERATED' is disabled.
121202 15:04:27 InnoDB: The InnoDB memory heap is disabled
121202 15:04:27 InnoDB: Mutexes and rw_locks use GCC atomic builtins
121202 15:04:27 InnoDB: Compressed tables use zlib 1.2.3
121202 15:04:27 InnoDB: Initializing buffer pool, size = 128.0M
121202 15:04:27 InnoDB: Completed initialization of buffer pool
121202 15:04:27 InnoDB: highest supported file format is Barracuda.
121202 15:04:27 InnoDB: 1.1.8 started; log sequence number 1595675
121202 15:04:27 [Note] Server hostname (bind-address): '0.0.0.0'; port: 8889
121202 15:04:27 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121202 15:04:27 [Note] Server socket created on IP: '0.0.0.0'.
121202 15:04:27 [Note] Event Scheduler: Loaded 0 events
121202 15:04:27 [Note] /Applications/MAMP/Library/bin/mysqld: ready for connections.
Version: '5.5.25'  socket: '/Applications/MAMP/tmp/mysql/mysql.sock'  port: 8889  Source distribution 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:30:36.203

您说您的主机文件是空的，所以听起来计算机只是不知道“本地主机”是什么。尝试添加以下内容（完全复制）：

```
127.0.0.1   localhost

255.255.255.255 broadcasthost
::1             localhost 
fe80::1%lo0 localhost 
```

然后相当 MAMP 并重新启动。看看是否有帮助。

# ruby - Ruby GraphViz DOT 错误地渲染 PNG

> ID：13673383
> 
> 赞同：1
> 
> 时间：2012-12-02T20:14:46.900
> 
> 标签：ruby, graphviz, dot

我正在制作一个小程序来为一个类渲染一些二叉树的图像。我希望程序自动为我制作一堆 .dot 和 .png 文件，但是除非我手动调用它，否则渲染 .png 的行不起作用。故障码：

```
@file_num = 0

data.each do |x|
    @tree.add(x)
    draw_frame(@tree, @filename, @file_num)
    @file_num += 1
end

(0...(data.length)).each do |x|
    `dot -Tpng #{@filename}#{x}.dot > #{x}.png`
end 
```

当我走在树上时，它会生成 .dot 文件（使用并条框方法，我最终会从文件中生成 .gif 文件）。在这里，`dot...`使用反引号调用应该会生成 png，但事实并非如此。但是，如果我在命令行中运行完全相同的代码，它就可以正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:28:49.387

请尝试以下操作：

```
`dot -Tpng #{@filename}#{x}.dot -o#{x}.png` 
```

这将 stdout 管道命令替换`>`为 dot 的普通参数，告诉它自己写入文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:30:51.380

您可能需要考虑使用[ruby​​-graphviz](http://rubygems.org/gems/ruby-graphviz) gem。

# cocoa - kCGWindowName 的值是多少？

> ID：13673384
> 
> 赞同：1
> 
> 时间：2012-12-02T20:14:53.437
> 
> 标签：cocoa, quartz-graphics

我通过基于 ffilib 的 FFI 使用 Quartz（即 Quartz 是动态加载的）。调用`CGWindowListCopyWindowInfo`返回一个`CFArray`包含窗口信息的字典。一个有趣的键是`kCGWindowName`，它可以用来获取窗口的名称。

在 C 中会包含适当的头文件，但由于我使用的是 ffilib，我需要知道`kCGWindowName`. 根据 Apple 的文档，它是`CFStringRef`.

我怎样才能获得 的价值`kCGWindowName`？

`kCGWindowName`在头文件中尝试 grepping没有给出可用的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:51:25.183

像这样的东西...

```
CFArrayRef windowsInfo = CGWindowListCopyWindowInfo(listOptions, kCGNullWindowID); 

for (CFIndex idx=0; idx<CFArrayGetCount(windowsInfo); idx++) {
    CFDictionaryRef dict = CFArrayGetValueAtIndex(windowsInfo, idx);
    CFStringRef windowName = CFDictionaryGetValue(dict, kCGWindowName);
    NSString* nsWindowName = (NSString*)windowName;
}

CFRelease(windowsInfo); 
```

# javascript - 窗口中主机和主机名之间的区别

> ID：13673389
> 
> 赞同：28
> 
> 时间：2012-12-02T20:15:39.477
> 
> 标签：javascript, jquery, dom

> **可能重复：**
> [window.location.host 和 window.location.hostname 有什么区别](https://stackoverflow.com/questions/6549117/whats-the-difference-between-window-location-host-and-window-location-hostname)

我正在`window`使用控制台查看变量，我注意到有两个不同的字段，一个是 named `host`，另一个是`hostname`. 在我检查了几个站点之后，两者的值似乎相同。它们之间有什么区别？哪个应该用于什么目的？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-02T20:24:26.070

[如定义](https://developer.mozilla.org/en-US/docs/Web/API/Location)所指定：

*   *hostname*是主机名（不带端口号或方括号）
*   *host*是主机名和端口号

因此，根据您的需要，您应该使用其中一种。大多数 HTTP 通信将在默认端口 80 上进行，因此您可以忽略它。另一方面，如果您怀疑需要考虑非标准端口设置，则还需要在源代码中包含该信息。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-02T20:17:39.950

假设我们有这个例子：

```
example.org:1111 
```

**主机名**是名称 -`example.org`

**主机**包括主机名和任何相关的端口号-`example.org:1111`

# c# - 需要使用 Linq to XML 在 Gridview 中显示所有 xml 记录。我需要可以显示 xml 数据的代码

> ID：13673394
> 
> 赞同：0
> 
> 时间：2012-12-02T20:16:06.240
> 
> 标签：c#, xml, linq

```
This is XML Document.I want to bind XML data to GridView using Linq to XML .I want data from title_rec element.There are near about 94 records.  :-
  <?xml version="1.0" encoding="UTF-8" ?>
 <dtg>
 <search_header>
 <plant_currency>
 <thru_date>
  <year>2012</year>
  <month>11</month>
  <day>15</day>
  </thru_date>
 <thru_time>
  <hour>05</hour>
  <minute>00</minute>
  <ampm>PM</ampm>
  <timezone>PST</timezone>
  </thru_time>
  </plant_currency>
 <search_date>
  <year>2012</year>
  <month>11</month>
  <day>19</day>
  </search_date>
 <search_time>
  <hour>01</hour>
  <minute>04</minute>
  <ampm>PM</ampm>
  <timezone>PST</timezone>
  </search_time>
  </search_header>
 <search_object type="PROPERTY" outcome="SUCCESS">
 <accepted_param>
 <title_param>
 <property_legal type="TITLE_BY_APN">
 <apn>
  <book>277</book>
  <page>312</page>
  <parcel>003</parcel>
  </apn>
  <QS n="XP" v="XA277}312 003" l="T" />
  </property_legal>
 <from_date>
  <year>1980</year>
  <month>05</month>
  <day>31</day>
  </from_date>
 <thru_date>
  <year>2011</year>
  <month>05</month>
  <day>31</day>
  </thru_date>
  <qualifier extended_names="YES" tt_options="SAP" />
  </title_param>
  </accepted_param>
 <search_unit type="PROPERTY" report_occurrence="01" report_count="03" outcome="SUCCESS">
 <search_param>
 <title_param>
 <property_legal type="TRACT">
 <plat type="TRACT">
 <tract>
  <number>13897</number>
  <id>1</id>
  </tract>
  </plat>
  <lot>85</lot>
 <apn>
  <book>277</book>
  <page>312</page>
  <parcel>003</parcel>
  </apn>
  <QS n="SL" v="T 13897 1$[85" l="L" />
  </property_legal>
 <from_date>
  <year>1980</year>
  <month>05</month>
  <day>31</day>
  </from_date>
 <thru_date>
  <year>2011</year>
  <month>05</month>
  <day>31</day>
  </thru_date>
  <qualifier extended_names="YES" tt_options="SAP" />
  </title_param>
  </search_param>
 <filters>
 <filter type="SORT">
 <path collate="ASCENDING">datatrace/response/search_group/search_object/search_unit/title_report/title_rec/date</path>
  </filter>
  </filters>
  <search_desc command="T" type="Tract" short="L:85 T:138971" long="Lot: 85 Tract: 138971" />
 <title_report record_count="91">
 <property_legal type="TRACT">
 <plat type="TRACT">
 <tract>
  <number>13897</number>
  <id>1</id>
  </tract>
  </plat>
  <lot>85</lot>
  <QS n="SL" v="T 13897 1$[85" l="L" />
  <message>PLAT HAS NOT BEEN VERIFIED</message>
  </property_legal>
  <section_index section_id="1" />
 <title_rec section_id="1">
 <date>
  <year>1980</year>
  <month>11</month>
  <day>03</day>
  </date>
  <seq>1</seq>
 <base>
 <base_date>
  <year>1980</year>
  <month>11</month>
  <day>03</day>
  </base_date>
 <property>
 <property_legal type="TRACT">
 <plat type="TRACT">
 <tract>
  <number>13897</number>
  <id>1</id>
  </tract>
  </plat>
  <lot>85</lot>
  <QS n="SL" v="T 13897 1$[85" l="L" />
  </property_legal>
  </property>
 <company>
  <number>08</number>
  </company>
 <order>
  <number>0052337</number>
  <tof>04</tof>
  </order>
 <inst>
  <type>SR</type>
 <recorded>
  <year>1980</year>
  <month>11</month>
  <day>03</day>
  </recorded>
 <posted>
  <year>1980</year>
  <month>11</month>
  <day>03</day>
  </posted>
  </inst>
  </base>
  </title_rec>
 <title_rec section_id="1">
 <date>
  <year>1980</year>
  <month>11</month>
  <day>10</day>
  </date>
  <seq>2</seq>
 <base>
 <base_date>
  <year>1980</year>
  <month>11</month>
  <day>10</day>
  </base_date>
 <property>
 <property_legal type="TRACT">
 <plat type="TRACT">
 <tract>
  <number>13897</number>
  <id>1</id>
  </tract>
  </plat>
  <lot>85</lot>
  <QS n="SL" v="T 13897 1$[85" l="L" />
  </property_legal>
  </property>
 <company>
  <number>08</number>
  </company>
 <order>
  <number>0052337</number>
  <tof>04</tof>
  </order>
 <inst>
  <type>SR</type>
 <recorded>
  <year>1980</year>
  <month>11</month>
  <day>10</day>
  </recorded>
 <posted>
  <year>1980</year>
  <month>11</month>
  <day>10</day>
  </posted>
  </inst>
  </base>
  </title_rec>
 <title_rec section_id="1">
 <date>
  <year>1980</year>
  <month>11</month>
  <day>13</day>
  </date>
  <seq>3</seq>
 <base>
 <base_date>
 <year>1980</year>
  <month>11</month>
 <day>13</day>
  </base_date>
 <property>
 <property_legal type="TRACT">
 <plat type="TRACT">
 <tract>
  <number>13897</number>
  <id>1</id>
  </tract>
  </plat>
  <lot>85</lot>
  <QS n="SL" v="T 13897 1$[85" l="L" />
  </property_legal>
  </property>
 <company>
  <number>08</number>
  </company>
 <order>
  <number>0052600</number>
  <tof>04</tof>
  </order>
 <inst>
  <type>SR</type>
 <recorded>
  <year>1980</year>
  <month>11</month>
  <day>13</day>
  </recorded>
 <posted>
  <year>1980</year>
  <month>11</month>
  <day>13</day>
  </posted>
  </inst>
  </base>
  </title_rec>
 <title_rec section_id="1">
 <date>
  <year>1980</year>
  <month>11</month>
  <day>25</day>
  </date>
  <seq>4</seq>
 <title_doc>
 <property>
 <property_legal type="TRACT">
<plat type="TRACT">
 <tract>
  <number>13897</number>
  <id>1</id>
  </tract>
  </plat>
  <lot>85</lot>
  <QS n="SL" v="T 13897 1$[85" l="L" />
  </property_legal>
  </property>
 <inst>
  <year>1980</year>
  <number>220434</number>
  <type>RL</type>
 <recorded>
  <year>1980</year>
  <month>11</month>
  <day>25</day>
  </recorded>
 <posted>
  <year>1980</year>
  <month>11</month>
  <day>25</day>
  </posted>
 <image provider="DATA_TREE" county_fips="065" document_id_desc="DocumentYear.DocID">
 <image_params document_type="DAILY_DOCUMENT" index_type="YEAR.DOCID" document_index_id="16">
  <description>1980.220434</description>
  </image_params>
  </image>
  <QS n="IN" v="Y1980220434" l="B" />
  </inst>
 <party_info>
 <party role="GRANTOR">
  <name>RECORD OWNER</name>
  <QS n="GN" v="RECORD OWNER" l="N" />
  </party>
  </party_info>
 <remarks>
  <len>9</len>
  <text>80 139134</text>
  </remarks>
  </title_doc>
  </title_rec>
  </title_report>
 <commentary>
 <comment>
  <text>ADJOINING PROPERTY SEARCH SUPPRESSED</text>
  </comment>
 <comment>
  <text>ALL TRACT SEARCH SUPPRESSED</text>
  </comment>
  </commentary>
  </search_unit>
  </search_object>
  </dtg> 
```

我创建了 TitleByApn 类并编写了 Linq to XML Queries 来解析 xml 数据。请在下面找到类详细信息和返回查询输出的代码。请使用此代码，或者如果您可以提供一些具有不同逻辑的其他代码也可以。

```
public class TitleByApn
{
 private string grantor;
 private string grantee;
 private string doctype;
 private string instrument;
 private string month;
 private string  day;
 private string  year;
 private string remarks;

 public string _grantor
{  get { return grantor; }
}

public string _grantee
{
 get {return grantee ;}
}

public string _month
{
 get {return month; }
}

public string _day
{
 get {return day; }
}

public string _year
{
 get { return year; }
} 

public string _doctype
{
get{ return doctype; }
}

public string  _remarks
{
get {return remarks;}
}

public string  _instrument
{
get {return instrument; }
}

public static List<TitleByApn> GetTitle()

        {

            List<TitleByApn> output = new List<TitleByApn>();
            string filepath = @"C:/Title.xml";

            //XElement xdoc = new XElement();

              XElement xdoc =   XElement.Load(filepath);

            //XElement xElement = XElement.Parse(filepath);

            //var query = from b in xdoc.Descendants("title_doc")
            //            select b.Value;

            //string query = (from b in xdoc.Descendants("title_doc")
            //                select b.Value).FirstOrDefault();

            int i = 0;
            string s1 = "";
            string inst = "";
            //string s2 = "";
            //string s3 = "";
            //string s4 = "";
            var authorList = xdoc.Descendants("title_doc").Select(x => x.Value).ToList();
            foreach (string item in authorList)
            {

                     string Month = (from o in xdoc.Descendants("title_doc").Descendants("recorded")
                                 select o.Element("month").Value).First();

                string Day = (from o in xdoc.Descendants("title_doc").Descendants("recorded")
                               select o.Element("day").Value).First();

                string Year = (from o in xdoc.Descendants("title_doc").Descendants("recorded")
                                select o.Element("year").Value).First();

                string granTor = (from o in xdoc.Descendants("title_doc").Descendants("party_info").Descendants("party")
                                   where o.Attribute("role").Value == "GRANTOR"
                                  select o.Element("name").Value).FirstOrDefault();
                ////select new Instrument()

                ////{
                ////    Grantor = (string)o.Element("name")

                ////};

                string granTee = (from o in xdoc.Descendants("title_doc").Descendants("party_info").Descendants("party")
                                   where o.Attribute("role").Value == "GRANTEE"
                                  select o.Element("name").Value).First();

                string Doctype =(from o in xdoc.Descendants("title_doc").Descendants("inst")
                                   select o.Element("type").Value).First();

                 string instNo = (from o in xdoc.Descendants("title_doc").Descendants("inst")
                                   select o.Element("number").Value).First();

                  string REmarks = (from o in xdoc.Descendants("title_doc").Descendants("remarks")
                                   select o.Element("text").Value).First();

               output.Add(new TitleByApn(granTor, granTee, Month, Day, Year,instNo, Doctype, REmarks));

                }

            return output;
             } 

}

This is the code responsible to bind the class to gridview:
GridView1.DataSource = TitleByApn.GetTitle();
            GridView1.DataBind();

I know because of FirstOrDefault() only first record is displaying in gridview.
I want code to display all the records in gridview.
Please help me ASAP.
Thanks in advance. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:40:28.363

根据您问题的内容，听起来您已经解析了 XML 并将其放入您在上面创建的类中。本教程在 Codeplex 上找到，标题为“[详细的数据绑定教程](http://www.codeproject.com/Articles/24656/A-Detailed-Data-Binding-Tutorial#introduction_apis) ”，非常详细地介绍了如何将您的类绑定到带有访问修饰符等的 DataGridView。

本质上，一旦你创建了你的 GridView，你可以添加一个 BindingSource 对象到它的数据项中，然后简单地添加你的 XML 类信息：

```
private void Form1_Load(object sender, EventArgs e)
{
 airplaneBindingSource.Add(new Airplane("Boeing 747", 800));
  airplaneBindingSource.Add(new Airplane("Airbus A380", 1023));
  airplaneBindingSource.Add(new Airplane("Cessna 162", 67));
} 
```

# mysql - MySQL5.1 带连接和计数的查询

> ID：13673395
> 
> 赞同：0
> 
> 时间：2012-12-02T20:16:12.633
> 
> 标签：mysql, join, count

我有以下查询：

```
select teams.`team_name`, count(matches.`played_team`) 
from teams 
join matches on teams.`team_number` = matches.`played_team` 
group by teams.`team_name` 
```

它用于显示球队名称、球队号码和他们参加过的比赛数量。我希望在这个查询中添加一个 WHERE 子句，它只计算 2011 年 1 月 1 日之后玩的游戏数。`matches.date`保存有关比赛日期的信息。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:19:06.897

```
select teams.`team_name`, count(matches.`played_team`) 
from teams 
join matches on teams.`team_number` = matches.`played_team`
WHERE `matches.date` > '2011-01-01' 
group by teams.`team_name` 
```

# java - Jackrabbit/JCR 2.0 中的版本控制属性

> ID：13673396
> 
> 赞同：2
> 
> 时间：2012-12-02T20:16:15.413
> 
> 标签：java, versioning, jackrabbit, jcr

我正在使用 Jackrabbit/JCR 2.0。

想象以下场景：我添加一个节点，然后我对其进行签出，编辑一些属性并进行签入。然后我再做一次。

接下来，我可以在版本历史记录中看到创建了 1.0 和 1.1 版本。我怎样才能让它总是增加 1，例如 1,2,3... 等等？

另外，如果我有 Version 类型的节点，如何访问实际的版本化节点（包含我的数据的节点）？

以及如何添加和获取其他一些与版本相关的属性，例如版本的评论或作者（签入的用户）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T07:22:34.813

您必须使用自己的版本号属性，以便您可以随意增加它（特别是如果您不是处于简单版本可控制模式）。要访问历史版本的历史和属性，您必须使用 VersionHisoty 并使用如下代码获取版本节点：

```
VersionHistory history = session.getWorkspace().getVersionManager().getVersionHistory("/my/node/path");
// To iterate over all versions
VersionIterator versions = history.getAllVersions();
while (versions.hasNext()) {
  Version version = versions.nextVersion();
}
// Obtain version per name
Version mySpecificVersion = history.getVersion("myVersion");
//Obtain version per label
Version labelisedVersion = history.getVersionByLabel("myLabel");
String myVersionPropertyValue = labelisedVersion.getFrozenNode().getProperty("myProperty").getString(); 
```

# c# - 倾斜动画无法动画

> ID：13673399
> 
> 赞同：2
> 
> 时间：2012-12-02T20:16:36.987
> 
> 标签：c#, wpf, exception, animation

我在将我的倾斜动画转换为双动画类方面取得了进展。剩下的唯一问题是当调度计时器调用动画时，会引发错误。错误如下...

> 无法为“System.Windows.Media.MatrixTransform”上的“AngleX”属性设置动画，因为该对象已密封或冻结。

我将如何克服这个错误以便动画可以工作？

```
 public static void Grass(Canvas canvas, int boundry)
    {
        foreach (var element in canvas.Children.OfType<Image>())
        {
            if (element.Name == "GrassForeground" || element.Name == "GrassBackground")
            {
                var skewGrass = new DoubleAnimation
                {
                    From = 0,
                    To = 10,
                    EasingFunction = new BackEase(),
                    AutoReverse = true
                };
                var transform = (MatrixTransform)element.RenderTransform;
                transform.BeginAnimation(SkewTransform.AngleXProperty, skewGrass);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T20:29:57.630

试试下面这个，或者你有特殊的理由使用 MatrixTransform？

```
public static void Grass(Canvas canvas, int boundry)
{
    foreach (var element in canvas.Children.OfType<Image>())
    {
        if (element.Name == "GrassForeground" || element.Name == "GrassBackground")
        {
            var skewGrass = new DoubleAnimation
            {
                Duration = new Duration(TimeSpan.FromSeconds(5)),
                From = 0,
                To = 10,
                EasingFunction = new BackEase(),
                AutoReverse = true
            };
            element.RenderTransform = new SkewTransform();
            element.RenderTransform.BeginAnimation(SkewTransform.AngleXProperty, skewGrass);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T15:42:58.850

你`element`已经有一个`RenderTransform`属性分配，但这个对象是一个**冻结** `SkewTransform`的对象。你不能改变它的 AngleX 属性，因为它已经被渲染了。

如果将 RenderTransform 属性分配给 a`new SkewTransform()`这`SkewTransform`将不会被冻结并且可以动画。

> 尽管 Freezable 类有很多应用程序，但 Windows Presentation Foundation (WPF) 中的大多数 Freezable 对象都与图形子系统相关。

这是一个完整的解释：[MSDN 上的 Freezable Objects Overview](https://msdn.microsoft.com/en-us/library/ms750509(v=vs.100).aspx)

# c# - 在xml的某个区域添加元素

> ID：13673400
> 
> 赞同：0
> 
> 时间：2012-12-02T20:16:40.887
> 
> 标签：c#, xml, winforms

我之前回答过这个问题，但我将 xml 代码的形式更改为更好一点。我是新手，但我有一个问题：以下内容是在运行时编写的。我可以添加所有需要的内容，但如果我想在 PPE/ppe/UID“A3”之前添加元素，我会迷路。以下是我所拥有的：

```
<?xml version="1.0" encoding="utf-8"?>
<Project>
  <Details>
    <details>
      ///....more specific data
    </details>
  </Details>
  <Tools />
  <Materials />
  <PPE>
    <ppe>
      <UID>A1</UID>
      <ppe1Bool>true</ppe1Bool>
      <ppe1>Test A1</ppe1>
      <ppe2Bool>true</ppe2Bool>
      <ppe2>....</ppe2>
    </ppe>
    <ppe>
      <UID>A3</UID>
      <ppe1Bool>true</ppe1Bool>
      <ppe1>Test A3</ppe1>
      <ppe2Bool>true</ppe2Bool>
      <ppe2>....</ppe2>
    </ppe>
  </PPE>
  <Video />
  <Links />
</Project> 
```

这是我需要添加的，它需要在 A3 之前

```
<?xml version="1.0" encoding="utf-8"?>
<Project>
  <Details>
    <details>
      ///....more specific data
    </details>
  </Details>
  <Tools />
  <Materials />
  <PPE>
    <ppe>
      <UID>A1</UID>
      <ppe1Bool>true</ppe1Bool>
      <ppe1>Test A1</ppe1>
      <ppe2Bool>true</ppe2Bool>
      <ppe2>....</ppe2>
    </ppe>
    //////////////////////////////
    <ppe>
      <UID>A2</UID>
      <ppe1Bool>true</ppe1Bool>
      <ppe1>New</ppe1>
      <ppe2Bool>true</ppe2Bool>
      <ppe2>....</ppe2>
    </ppe>
    /////////////////////////////
    <ppe>
      <UID>A3</UID>
      <ppe1Bool>true</ppe1Bool>
      <ppe1>Test A3</ppe1>
      <ppe2Bool>true</ppe2Bool>
      <ppe2>....</ppe2>
    </ppe>
  </PPE>
  <Video />
  <Links />
</Project> 
```

这是我的代码，我很接近但不完全：

```
 public static void insertRBRowPPE(string strSelection, string strFileName)
     {
        System.Guid desiredGuid = System.Guid.NewGuid(); //I changed this line to A1..A2..A3 for
                                                         //clarity
        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load(strFileName);
        XmlNode node = xmlDoc.SelectSingleNode("Project/PPE/ppe");
        try
        {
            XElement doc = XElement.Load(strFileName);
            foreach (XElement elm in doc.Elements("PPE"))
            {
                if (node["UID"].InnerText == strSelection)
                {
                    elm.AddBeforeSelf(new XElement("ppe", new XElement("UID", desiredGuid),
                        new XElement("ppe1Bool", ""), new XElement("ppe1", "New"), new XElement("ppe2Bool", ""),
                        new XElement("ppe2", "")));
                }
            }
            doc.Save(strFileName);

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    } 
```

所以..错误的结果是这样的：

```
 ///xml code etc...
  <Materials />
  <ppe>////////////////////here but I dont want it here
    <UID>A2</UID>
    <ppe1Bool>true</ppe1Bool>
    <ppe1>New</ppe1>
    <ppe2Bool>true</ppe2Bool>
    <ppe2>....</ppe2>
  </ppe>//////////////////////////////
  <PPE>
    <ppe>
      <UID>A1</UID>
      <ppe1Bool>true</ppe1Bool>
      <ppe1>Test A1</ppe1>
      <ppe2Bool>true</ppe2Bool>
      <ppe2>....</ppe2>
    </ppe>
    //////////////////////////////
    I want it here....
    /////////////////////////////
    <ppe>
      <UID>A3</UID>
      <ppe1Bool>true</ppe1Bool>
      <ppe1>Test A3</ppe1>
      <ppe2Bool>true</ppe2Bool>
      <ppe2>....</ppe2>
    </ppe>
  </PPE>
  <Video />
  /// xml code etc.... 
```

对那里所有的人才有什么帮助吗？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:20:37.013

调整您上一个问题的答案：

```
public static void insertRowBeforRowPPE(string strSelection, string strFileName)
{

  XElement doc=XElement.Load(strFileName);
  XElement project = doc.Element("Project");
  XElement ppe = project.Element("PPE");
  foreach(XElement elm in ppe.Elements("ppe")
  {
    if(elm.Element("UID").Value==strSelection)
      elm.AddBeforeSelf(new XElement("PPE",new XElement("UID","a2")));
      //adds PPE node having UID element with value a2 just before the required node
  }
  doc.Save(strFileName);
} 
```

请注意，您可能希望添加更多检查 - 例如，如果 XML 不包含该`Project`元素，则此代码将崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T23:36:08.797

MiMo, thanks! Simple once I see it! I commented out one line from your update and it is good. Thanks again!

```
 //Those who may be interested
            //XElement project = doc.Element("Project");
            XElement ppe = doc.Element("PPE");
            foreach(XElement elm in ppe.Elements("ppe"))
            {
                if (elm.Element("UID").Value == strSelection) 
```

# c# - 视频处理建议

> ID：13673404
> 
> 赞同：0
> 
> 时间：2012-12-02T20:17:04.167
> 
> 标签：c#, video, opencv, image-stabilization

我正在开始一个新项目，如果我将获得视频输入，我将不得不在视频中添加几个项目......一些行和实时信息。由于相机将处于摇晃的环境中，我可能还需要添加某种视频稳定功能。我计划在项目中使用 C#，因为它是我更了解的语言，所以我想知道我应该寻找哪些 API？OpenCV 很好还是有更好的选择？我是计算机视觉方面的新手，所以欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:21:15.887

OpenCV 几乎是事实上的计算机视觉库。它充满了功能，让您的生活更轻松。

关于图像稳定，[Stackoverflow 已经回答了可能的方法](https://stackoverflow.com/questions/3431434/video-stabilization-with-opencv)。大多数时候，您希望提取稳健的局部特征描述符并使用它们对连续图像帧执行[配准。](http://en.wikipedia.org/wiki/Image_registration)

# ios - 根据颜色隐藏或删除地图注释

> ID：13673407
> 
> 赞同：1
> 
> 时间：2012-12-02T20:17:26.673
> 
> 标签：ios, annotations, mapkit, mkannotation, mkannotationview

我有一张地图，上面有 3 种标准颜色的别针。这些引脚根据解析并存储到数组中的 xml 中的值进行着色。

我想添加一个带有 2 个按钮的分段控件：

按钮 1 仅显示绿色引脚。

和按钮 2 仅显示红色和紫色引脚。

我已阅读有关为每种引脚颜色添加 3 个不同的阵列并删除引脚阵列的信息，但我想保留一个阵列。如果可能的话，我将如何做到这一点。我知道如何实现分段控件，但我不知道如何打开或关闭它们。

这是我的 for 循环：创建引脚并分配 3 种颜色，效果很好。

```
//Count the array of annotations and add them dynamically to the map.
for (int i = 0; i < locationArray.count; i++) {
    myAnnotation =[[MyAnnotation alloc] init];

    NSString *latString = [[locationArray objectAtIndex:i]xmlLat];
    NSString *lonString = [[locationArray objectAtIndex:i]xmlLon];

    type = [[locationArray objectAtIndex:i]xmlType];
    imageId = [[locationArray objectAtIndex:i]xmlImageId];
    address = [[locationArray objectAtIndex:i]xmlAddress];
    email = [[locationArray objectAtIndex:i]xmlEmail];
    phone = [[locationArray objectAtIndex:i]xmlPhone];
    live = [[locationArray objectAtIndex:i]xmlLive];
    form = [[locationArray objectAtIndex:i]xmlForm];
    name = [[locationArray objectAtIndex:i]xmlName];

    //Change the 0 to Active ticket and 1 to Closed 2 to False and 3 to Not Found and 4 to Other
    if ([live isEqualToString:@"0"]) {
        live = @"Active";
    }

    else if ([live isEqualToString:@"1"]){
        live = @"Closed";
    }

    else if([live isEqualToString:@"2"]){
        live = @"False";

    }

    else if ([live isEqualToString:@"3"]){
        live = @"Not Found";

    }

    else if ([live isEqualToString:@"4"]){
        live = @"Other";
    }

    double theLatitude = [latString doubleValue];
    double theLongtitude = [lonString doubleValue];

    userLocation.latitude=theLatitude;
    userLocation.longitude=theLongtitude;

    myAnnotation.coordinate=userLocation;
    myAnnotation.title=[NSString stringWithFormat:@"%@", imageId];
    myAnnotation.subtitle=[NSString stringWithFormat:@"%@", type];

    //Setting pin colours here based on value from XML
    if ([live isEqualToString:@"Active"]){
        myAnnotation.pinColor = MKPinAnnotationColorGreen;
    }else if ([live isEqualToString:@"Closed"]){
        myAnnotation.pinColor = MKPinAnnotationColorRed;
    }
    else if ([live isEqualToString:@"Not Found"]){
        myAnnotation.pinColor = MKPinAnnotationColorPurple;
    }
        [incidentsMap addAnnotation:myAnnotation];

    } 
```

这是我的分段控制

```
-(IBAction)segmentedControl:(id)sender{

if (mapFilter.selectedSegmentIndex == 0) {
    NSLog(@"Active");
}

else if (mapFilter.selectedSegmentIndex == 1){
    NSLog(@"Closed");

//Remove Red and Purple Pins here from view when segmented control button button is    touched.........................

        }
else if (mapFilter.selectedSegmentIndex == 2){

    UIAlertView *mapSelector = [[UIAlertView alloc]initWithTitle:@"Select Map Type" message:@"Choose from 3 map views" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Default", @"Hybrid", @"Satelite", nil];
    [mapSelector show];

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:47:50.660

最简单的方法是最初以及每当过滤条件发生变化时（例如，当分段控件的值发生变化时）：

1.  从地图中删除所有注释。使用`removeAnnotations`（或`removeAnnotation`在某个循环中）。
2.  仅添加通过过滤条件的那些。您遍历`locationArray`并仅调用`addAnnotation`通过过滤器的那些。

这可能会导致一些闪烁，因为注释被删除并再次添加，但相对容易实现。

另一种选择是执行以下操作（最初和过滤器更改后）。循环`locationArray`和：

*   如果该项目通过过滤器*并且*它*尚未*在地图的`annotations`数组中，则将其添加到地图中
*   如果该项目未通过过滤器*并且*它*在*地图的`annotations`数组中，则将其从地图中删除

但是，此方法要求您的注释对象中有一些唯一属性，可用于实现“已在地图中”存在检查（不建议使用坐标）。您可能需要将该唯一属性添加到`MyAnnotation`类中。

或者，如果您保留自己的*所有*可能`MyAnnotation`对象的主数组，您可以简单地使用`containsObject`它来测试它是否在地图的`annotations`数组中。

# dom - 用户单击浏览器按钮时更改 DOM 的 Chrome 扩展

> ID：13673416
> 
> 赞同：2
> 
> 时间：2012-12-02T20:18:38.800
> 
> 标签：dom, google-chrome-extension

我正在尝试对 Chrome 进行扩展，以更改网页中名称的所有出现。（例如，如果页面有单词“that”，它会将其更改为另一个名称）。

这个想法是在用户单击浏览器按钮时进行此更改。

我的问题是它没有做出改变！我不知道我做错了什么。

这是 manifest.json：

```
{
  "name": "App Name",
  "description": "App description",
  "version": "1.0",
  "background": {
    "scripts": ["jquery.min.js", "jquery.ba-replacetext.min.js","background.js"]
  },
  "permissions": [
    "tabs", "http://*/*", "https://*/*"
  ],
  "browser_action": {
      "default_title": "App name",
      "default_icon": "icon.png"
  },
  "manifest_version": 2
} 
```

这是 background.js：

```
chrome.browserAction.onClicked.addListener(function(tab) {
    var state = document.readyState;
    var carregou = false;
    var matches = document.body.innerText.match(regex);

if (state == "interactive"|| (!carregou)){
 $("body *").replaceText( /That/gi, "" );
 var regex = /That/gi;
 matches = document.body.innerText.match(regex);
 if(matches){
    alert("Reload the page (f5)");
 }else{ 
    alert("All changes done! :D");
    carregou = true;
 }
}
}); 
```

我做了一个无需单击浏览器按钮即可更改页面的操作，并且可以正常工作。这是代码：

```
{
  "name": "App Name",
  "version": "1.0",
  "manifest_version": 2,
  "description": "App description.",
  "content_scripts": [
   {
   "matches": ["http://www.facebook.com/*"],
   "js": ["jquery.min.js","jquery.ba-replacetext.min.js", "script.js"],
   "run_at": "document_end"
   }
   ]
} 
```

脚本.js：

```
var state = document.readyState;
var carregou = false;
var matches = document.body.innerText.match(regex);
if (state == "interactive"|| (!carregou)){
 $("body *").replaceText( /That/gi, "" );
 var regex = /That/gi;
 matches = document.body.innerText.match(regex);
 if(matches){
    alert("Reload the pahe (f5)");
 }else{ 
    alert("All changes done! :D");
    carregou = true;
 }
} 
```

Chrome 版本：Windows 7 上的 23.0.1271.95 m 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:18:13.573

**情况1）**

[您的 background.js 在自己生成的 html 页面](https://developer.chrome.com/extensions/background_pages.html)世界中执行代码，正如[架构概述所解释](https://developer.chrome.com/extensions/overview.html#arch)的那样，后台页面是在扩展进程中运行的 HTML 页面。它在您的扩展程序的整个生命周期内都存在，并且一次只有一个实例处于活动状态。

因此，所有代码都试图更改`background.html`页面中所有出现的名称

您可以使用相同的代码通过[编程注入](https://developer.chrome.com/extensions/content_scripts.html#pi)来实现您的功能

**示范**

```
/* in background.html */
chrome.browserAction.onClicked.addListener(function(tab) {
  chrome.tabs.executeScript(null,
                           {code:"document.body.bgColor='red'"});
}); 
```

**案例2）**

您已经为所有 facebook URL 完全注入了脚本，`"matches": ["http://www.facebook.com/*"],`而不是[Programmatic injection](https://developer.chrome.com/extensions/content_scripts.html#pi)，所以它起作用了，不是因为manifest.json中没有[浏览器操作](https://developer.chrome.com/extensions/browserAction.html#apiReference)

```
{
  "name": "App Name",
  "version": "1.0",
  "manifest_version": 2,
  "description": "App description.",
  "content_scripts": [
   {
   "matches": ["http://www.facebook.com/*"],
   "js": ["jquery.min.js","jquery.ba-replacetext.min.js", "script.js"],
   "run_at": "document_end"
   }
   ]
} 
```

如果您需要更多信息，请与我们联系。

# java - 循环没有从java中的actionPerformed获取更新的布尔值

> ID：13673417
> 
> 赞同：0
> 
> 时间：2012-12-02T20:18:41.583
> 
> 标签：java, multithreading, awt, chat

我正在尝试使用框架在 java 中创建一个简单的聊天程序。用户可以托管服务器（通过单击服务器按钮）或作为客户端连接（使用连接按钮）。我遇到的问题是服务器按钮。我的目标是，当单击 Start server 按钮时，所有其他按钮和字段都被禁用，并且 startServer 方法应该运行。

整个程序在一个`while (!kill)`循环中，现在，它只是检查 isServer 布尔值。

```
 while (!kill)
    {
        if (isServer)
        {
            startServer();
        }
    } 
```

当 startServerButton 被按下时，isServer 在 actionPerformed 内部设置为 true。

我的问题是 startServer() 永远不会运行，因为当单击 startServerButton 时，while (!kill) 循环没有获得更新的 isServer 值。

这是我的运行方法：

```
public void run()
{   
    conversationBox.appendText("Session Start.\n");
    inputBox.requestFocus();

    while (!kill)
    {
        if (isServer)
        {
            startServer();
        }
    }       

} 
```

这是我的actionPerformed：

```
public void actionPerformed(ActionEvent e) throws NumberFormatException
{
    Object o = e.getSource();

    if (o == sendButton || o == inputBox)
    {
        if(inputBox.getText() != "")
        {
            clientSendMsg = inputBox.getText();
            inputBox.setText("");
        }
    }
    if (o == changeHost || o == hostField)
    {
        if (hostField.getText() != "" && hostField.getText() != host)
        {
            host = hostField.getText();
            conversationBox.appendText("Host changed to " + host + "\n");
        }
    }
    if (o == changePort || o == portField)
    {
        if (portField.getText() != "" && Integer.valueOf(portField.getText()) != port)
        {
            try
            {
                port = Integer.valueOf(portField.getText());
                conversationBox.appendText("Port changed to " + port + "\n");
            }
            catch(NumberFormatException up)
            {
                throw up; //blargh enter a real value
            }
        }
    }
    if (o == startServerButton)
    {
        isServer = true;
        startServerButton.enable(false);
        connectButton.enable(false);
        changeHost.enable(false);
        changePort.enable(false);
        sendButton.enable(false);
        hostField.enable(false);
        portField.enable(false);
        inputBox.enable(false);
    }
    inputBox.requestFocus();
} 
```

显然，该程序还远未完成，但这是一个不容忽视的巨大障碍，所以我认为最好在开始之前解决它。另外，应该注意的是，我`new Thread(this).start();`在对象内部有一个`Chat()`创建框架布局的对象。我不是 100% 确定这是多么有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:29:40.230

在这一行：`if (isServer)`

您`if (isServer == true)`的意思是说单击按钮时`isServer`是否设置为true？

根据我的经验`"if" statements`，应该总是有一个条件，比如`if (variable1.equals(variable2))`或`if (boolean == true)`例如。

或者问题可能出在您的 while (!kill) 循环中。在这种情况下，只需取出 if 语句，然后查看该方法是否运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:30:33.333

Java 中的 Volatile 关键字用作 Java 编译器和线程的指示符，**它们不**缓存此变量的值并始终从主内存中读取它。因此，如果您想通过实现共享读取和写入操作是原子操作的任何变量，例如在 int 或布尔变量中读取和写入，您可以将它们声明为 volatile 变量。

这是一个链接：

[关于易失性的解释](https://stackoverflow.com/questions/106591/do-you-ever-use-the-volatile-keyword-in-java)

# css - CSS：无法将按钮和输入对齐

> ID：13673419
> 
> 赞同：0
> 
> 时间：2012-12-02T20:18:52.563
> 
> 标签：css, twitter-bootstrap

在 twitter bootstrap[文档](http://twitter.github.com/bootstrap/base-css.html)中，有一种有趣的方法可以在输入旁边附加一个按钮。

只是一个示例：

```
<div class="input-append">
<input class="span2" id="appendedInputButton" type="text">
<button class="btn" type="button">Go!</button>
</div> 
```

就我而言，我正在尝试利用这个概念，但按钮稍大（一个像素）我无法弄清楚是什么原因造成的。

![在此处输入图像描述](../Images/769b4f8a34d9974b73a88e49c404a43c.png)

我创造了一个小提琴，我希望有人能指出我正确的方向。

[http://jsfiddle.net/houmie/FkEnm/2/](http://jsfiddle.net/houmie/FkEnm/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:23:05.650

我猜你的 CSS 中的其他东西会导致这个问题。您可以通过覆盖您的 CSS 来解决此问题。在课堂`line-height`上从 20 像素到 19 像素`.btn`：

```
.btn { line-height: 19px } 
```

工作[**演示**](http://jsfiddle.net/FkEnm/3/)

# asp.net - 渲染asp控件时出错

> ID：13673420
> 
> 赞同：1
> 
> 时间：2012-12-02T20:19:06.310
> 
> 标签：asp.net, .net, html, vb.net

我正在尝试将 CssClass 放入导航菜单的链接按钮。这是因为当我单击链接按钮时，它会将其类设置为活动。在这里，我在创建控件时遇到错误。

```
<div class="navigation">
<ul>
<li class="homenavBt">
<asp:LinkButton ID="LinkHome" runat="server" <% If Session("Page")="Home" Then %> CssClass="active" <% End If %> >Home</asp:LinkButton></li>
<li class="newsBt">
<asp:LinkButton ID="LinkNews" runat="server"  <% If Session("Page")="News" Then %> CssClass="active" <% End If %> >News</asp:LinkButton></li>
<li class="sportsbt">
<asp:LinkButton ID="LinkSports" runat="server"  <% If Session("Page")="Sports" Then %> CssClass="active" <% End If %> >Sports</asp:LinkButton></li>
<li class="glamournavBt">
<asp:LinkButton ID="LinkArticle" runat="server"  <% If Session("Page")="Article" Then %> CssClass="active" <% End If %> >Article</asp:LinkButton></li>
<li class="technav_bt">
<asp:LinkButton ID="LinkGallery" runat="server"  <% If Session("Page")="Gallery" Then %> CssClass="active" <% End If %>>Gallery</asp:LinkButton></li>
</ul>
</div> 
```

当我单击链接按钮时，我需要为各个页面设置会话，如下所示。

```
Protected Sub LinkNews_Click(sender As Object, e As EventArgs) Handles LinkNews.Click
        Session("Page")="News"
End Sub 
```

如果有什么不明白的请评论 谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:36:57.933

您遇到此问题的原因是您无法将内联代码放入具有 runat="server" 的控件中，除非您使用数据绑定语法：<%# ...%>，并调用 DataBind()从你的代码。

好吧，使用后面的代码（在 C# 中），您可以这样做：

```
protected void Page_Load(object sender, EventArgs e)
{
    CheckPage();
}

private void CheckPage()
{
    if (Session["Page"] as string == "News")
        LinkNews.CssClass = "active";
    else
        LinkNews.CssClass = String.Empty;
}

protected void LinkNews_Click(object sender, EventArgs e)
{
    Session["Page"] = "News";
    CheckPage();
} 
```

...在这种情况下，您不会在标记中指定 CSS 类：

```
<div class="navigation">
<ul>
<li class="homenavBt">
<asp:LinkButton ID="LinkHome" runat="server">Home</asp:LinkButton></li>
<li class="newsBt">
<asp:LinkButton ID="LinkNews" runat="server">News</asp:LinkButton></li>
<li class="sportsbt">
<asp:LinkButton ID="LinkSports" runat="server">Sports</asp:LinkButton></li>
<li class="glamournavBt">
<asp:LinkButton ID="LinkArticle" runat="server">Article</asp:LinkButton></li>
<li class="technav_bt">
<asp:LinkButton ID="LinkGallery" runat="server">Gallery</asp:LinkButton></li>
</ul>
</div> 
```

如果您想使用绑定技术，它可能看起来像这样（同样是 C#）：

```
<asp:LinkButton ID="LinkNews" runat="server" CssClass='<%# Session["Page"] as string == "News" ? "active" : "" %>'>News</asp:LinkButton> 
```

...并且您必须从代码中调用 DataBind() 而不是 CheckPage() （在我之前的示例中）。

# .net - 如何在线程之间传递图像流

> ID：13673422
> 
> 赞同：0
> 
> 时间：2012-12-02T20:19:06.180
> 
> 标签：.net, multithreading, communication

我有一个工作线程，它以大约 30/秒的速度生成图像（很像捕获网络摄像头）。

我想对这些图像进行一些处理（分析每个连续图像之间的差异）。目前，每次图像准备好时，线程都会引发一个事件。这可行，似乎还可以，但也感觉有点不稳定 - 不能保证图像将以正确的顺序处理（或者，假设处理时间太长，处理不会并行开始，从而导致丢失/ 不匹配的图像对）。

在线程之间传递顺序图像流的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:47:06.820

一种选择是 BlockingCollection。
我使用它进行一些解析，然后插入到需要按原始顺序插入的数据库中。

[BlockingCollection(Of T) 类](http://msdn.microsoft.com/en-us/library/dd267312.aspx)

# vim - 如何在 VIM 中设置条件映射（即：取决于文件的扩展名）？

> ID：13673424
> 
> 赞同：2
> 
> 时间：2012-12-02T20:19:27.120
> 
> 标签：vim, mapping, conditional

例如，**如果**文件扩展名为**.js**，如何映射`'<leader>r'`到，否则如何映射？`:!node %` ****`:!make %`****

 ***** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T20:24:47.523

尝试这个：

```
nnoremap <leader>r :!make %
autocmd FileType javascript nnoremap <leader>r :!node % 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T20:26:01.783

一般情况下，在您的`~/.vimrc`：

```
nnoremap <leader>r :!make %<cr> 
```

JavaScript 文件，位于`~/after/ftplugin/javascript.vim`：

```
nnoremap <buffer> <leader>r :!node % 
```

或使用该`makeprg`选项。见`:h makeprg`。****

# java - 在Java中检查实例的类

> ID：13673425
> 
> 赞同：1
> 
> 时间：2012-12-02T20:19:38.893
> 
> 标签：java, oop

如何查看一个类是否覆盖另一个类？

例如：说`bob`是一个`Bot`，一个覆盖抽象类的类`Unit`。我怎样才能使以下评估为真？

```
bob.getClass() == Unit.class 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T20:20:48.013

使用`instanceof`运算符：

```
if(bob instanceof Unit) {
    // ...
} 
```

* * *

请注意，一旦通过 using 确定一个对象是一个类的实例，`instanceof`就可以像这样安全地将其强制转换为该类：

```
if(bob instanceof Unit) {
    Unit bobUnit = (Unit) bob;
    bobUnit.unitMethod();
} 
```

当调用只有子类（例如`Unit`）定义的函数时，这可能是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:36:14.303

如果实现是

```
Bob implements Unit 
```

然后

```
bob.getClass().getSuperclass() 
```

将返回单位

# php - php html 不需要的空格，因为使用“\n”换行符

> ID：13673426
> 
> 赞同：-1
> 
> 时间：2012-12-02T20:19:50.007
> 
> 标签：php, html, line-breaks

看这个：

```
<?php
    echo "<p>this is my <a href='#'>\nlink1\n</a>\n, <a href='#'>\nlink2\n</a>\n, <a href='#'>\nlink3\n</a>\n and <a href='#'>\nlink4\n</a>\n!</p>\n";
?> 
```

输出：

```
this is my link1 , link2 , link3 and link4 ! 
```

代替：

```
this is my link1, link2, link3 and link4! 
```

为什么是这样？

"link1" 和 "," 或 "link4" 和 "!" 之间有多余的空格。还有一个有趣的事实是，如果在 "\n" 之后有一个空格 .. 它可以工作。

这真的扰乱了我的工作（和工作流程）。

如何避免这个错误/错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:36:12.323

观察到的行为不是错误；它与 HTML 标准中的定义完全相同。

当您的浏览器看到换行符时，它会作为空格插入。（空白被可视化为空格字符）。
如果您的浏览器看到多个（连续的）空格，它只会显示一个空格。

如果您不想为换行符显示空格，请在`echo`将字符串 -ing 到浏览器之前删除换行符：

```
echo str_replace("\n", '', "<p>this is my <a href='#'>\nlink1\n</a>\n, (...)"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:27:10.080

```
<?php
    echo "<p>this is my <a href='#'>link1</a>,\n<a href='#'>link2</a>,\n<a href='#'>link3</a> and \n<a href='#'>link4</a>!</p>";
?> 
```

那应该解决它。只需留下“\n”即可。这是一个换行符，浏览器将其“转换”为空格。

A`\n`是代码中的换行符。如果您想在浏览器中输出换行符。只是使用`<br/>`而不是`\n`

# google-chrome-extension - 是否可以在 Chrome 扩展程序中更改弹出窗口的 URL？

> ID：13673428
> 
> 赞同：1
> 
> 时间：2012-12-02T20:19:58.553
> 
> 标签：google-chrome-extension

我有一个 Chrome 扩展程序，当单击按钮时会打开一个弹出窗口：

```
"browser_action": {
    "default_popup": "popup.html"
}, 
```

加载弹出窗口后，我希望它重定向到不同的 URL，具体取决于当前活动浏览器选项卡的 URL。

我已经`window.location.href = "http://example.com/"`在弹出窗口中尝试过，但只是得到一个空白页。

我已经尝试将 URL 加载到一个 iframe 中，该 iframe 填充了整个弹出窗口 - 这很好 - 但是当新 URL 调用 window.close() 时我需要关闭弹出窗口，这似乎无法检测到它在 iframe 中。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:10:52.800

如果它是您自己创建的页面，那么您可以使用[window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)将消息从 iframe 中的页面发送到弹出窗口，告诉它关闭。
您在文件中需要的代码是...
**popup.js**

```
// change #frame to point at your iframe
var frame = document.querySelector('#frame');

window.addEventListener('message', closeWindow, false);

function closeWindow(event) {
    if(frame.src.indexOf(event.origin) === 0 && event.data == 'closeWindow') window.close();
} 
```

**iframe 中的页面**

```
window.close = function() {
    window.parent.postMessage("closeWindow", window.parent.location.href);
} 
```

要为 iframe 中的任何页面执行此操作，我想不出任何真正干净的方法，但这会做到。
有一个在所有框架中的每个 url 上运行的内容脚本，通过检查其 window.parent 的 url 来检查它是否在 iframe 中。
如果它在 iframe 中，则使用上述内容覆盖 window.close 事件。
我们想要覆盖的 window.close 函数是在页面上下文而不是内容脚本中，因此将脚本附加到页面。
这是执行此操作的代码...
**manifest.json**

```
{
  "name": "PopUp IFrame Parent Window Close",
  "description" : "http://stackoverflow.com/questions/13673428/is-it-possible-to-change-the-url-of-the-popup-window-in-a-chrome-extension",
  "version": "1.0",
  "permissions": [
    "tabs", "<all_urls>"
  ],
  "browser_action": {
      "default_title": "Test Closing IFrames parent if in popup",
      "default_icon": "icon.png",
      "default_popup": "popup.html"
  },
 "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["myscript.js"],
      "all_frames":true
    }
  ],
  "manifest_version":2
} 
```

**popup.html**

```
<html>
<head>
<script type="text/javascript" src='popup.js'></script>
</head>
<body>
<iframe id="frame" src="http://localhost/windowclose.html"></iframe>
</body>
</html> 
```

**popup.js**

```
function onLoad() {
    // change #frame to point at your iframe
    var frame = document.querySelector('#frame');

    window.addEventListener('message', closeWindow, false);

    function closeWindow(event) {
        if(frame.src.indexOf(event.origin) === 0 && event.data == 'closeWindow') window.close();
    }

}

window.addEventListener("load", onLoad) 
```

**myscript.js**

```
hijackClose = function() {
    window.close = function() {
        window.parent.postMessage("closeWindow", window.parent.location.href);
    }
}

// Executing an anonymous script
function exec(fn) {
    var script = document.createElement('script');
    script.setAttribute("type", "application/javascript");
    script.textContent = '(' + fn + ')();';
    document.documentElement.appendChild(script); // run the script
    document.documentElement.removeChild(script); // clean up
}

if(window.parent && window.parent.location.href == chrome.extension.getURL('popup.html')) {
    exec(hijackClose);
} 
```

...现在任何在弹出窗口 iframe 中调用 window.close 的页面都将关闭弹出窗口。

# facebook - 如何在脸书粉丝专页上发布图片

> ID：13673431
> 
> 赞同：0
> 
> 时间：2012-12-02T20:20:20.610
> 
> 标签：facebook, windows-phone-7, facebook-c#-sdk, image

我正在尝试开发可以拍照并将其发送到我的 Facebook 粉丝页面的应用程序。尝试了很多不同的方法来做到这一点，但充其量它只分享一条消息，如果我尝试发布一张图片，那么它会发布在我的时间线上，而不是我的粉丝页面。所以问题是：

*   如何将图片和消息上传到 Facebook 页面（如果可能）？

这是我用来发布的代码的一部分：

```
using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile(fileName, FileMode.Open, FileAccess.Read))
                {
                    WriteableBitmap LoadedPhoto = new WriteableBitmap(0,0);
                    using (MemoryStream ms = new MemoryStream())
                    {
                        LoadedPhoto.SetSource(fileStream);
                        LoadedPhoto.SaveJpeg(ms, LoadedPhoto.PixelWidth, LoadedPhoto.PixelHeight, 0, 95);
                        ms.Seek(0, 0);
                        byte[] data = new byte[ms.Length];
                        System.Diagnostics.Debug.WriteLine(LoadedPhoto.PixelWidth);
                        ms.Read(data, 0, data.Length);
                        ms.Close();
                        var fbUpl = new Facebook.FacebookMediaObject
                        {
                            FileName = fileName,
                            ContentType = "image/jpg"
                        }.SetValue(data);
                        var parameters = new Dictionary<string, object>();
                        parameters["message"] = message;
                        parameters["file"] = fbUpl;

                        fb.PostAsync("{pageID}/photos", parameters, "post");
                    }
                }
            } 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:27:53.853

确保在发布时使用[页面访问令牌](https://developers.facebook.com/docs/reference/api/page/#page_access_tokens)。这是 API 知道您要充当页面而不是登录用户的唯一方式。

# wpf - 显示登录对话框，然后显示与 Caliburn Micro 成功连接的主窗体

> ID：13673437
> 
> 赞同：0
> 
> 时间：2012-12-02T20:20:44.713
> 
> 标签：wpf, mvvm, caliburn.micro

我正在使用 Caliburn Micro 并有一个在启动时显示的登录视图模型。

我正在使用一个单独的类来处理与服务器的所有连接并向 ViewModel 提供简单的回调事件，这就是 ITransportClient。

用户输入他们的凭据，点击登录，对话框显示连接过程以及多个状态（连接、验证用户名、下载配置）。在后台，登录 ViewModel 将调用`ITransportClient.Login()`.

如果登录成功并且所有步骤都已完成，则应关闭表单并打开主窗口 ViewModel。如果凭据不正确或下载设置有问题，应显示错误并保留登录表单。

如果与服务器的连接丢失（通过 ITransportClient 事件指示），则应用程序应尝试重新连接多次，如果服务器在可配置的时间段内保持脱机状态，则应再次显示登录窗口。

1.  根据上述流程，我将如何最好地处理登录对话框和主窗口之间的切换？
2.  登录 ViewModel 如何自行关闭，我只看到has`IWindowManager`和`ShowDialog`方法？`ShowPopup``ShowWindow`
3.  将上述内容分开的最佳方法是什么，允许在 Login ViewModel 外部关闭登录窗口，并在用户注销主窗口时显示登录窗口？这应该在引导程序中完成，还是应该为此创建一个单独的 ViewModel 外壳？

我的引导程序：

```
public class SimpleInjectorBootstrapper : Caliburn.Micro.Bootstrapper
{
   private Container container;

   protected override void Configure()
   {
       this.container = new Container();
       this.container.Register<IWindowManager, WindowManager>();
       this.container.Register<IEventAggregator, EventAggregator>();
       this.container.Register<IAppViewModel, AppViewModel>();
       this.container.Register<ILoginViewModel, LoginViewModel>();
       this.container.RegisterSingle<ITransportClient, Transport.WCF.TransportClient>();
   }

   protected override object GetInstance(Type serviceType, string key)
   {
       return this.container.GetInstance(serviceType);
   }

   protected override IEnumerable<object> GetAllInstances(Type serviceType)
   {
       return this.container.GetAllInstances(serviceType);
   }

   protected override void OnStartup(object sender, System.Windows.StartupEventArgs e)
   {
       base.OnStartup(sender, e);
       var loginViewModel= this.container.GetInstance<ILoginViewModel>();
       var windowManager = this.container.GetInstance<IWindowManager>();
       windowManager.ShowWindow(loginViewModel);
   }
} 
```

我的 LoginView 模型如下：

```
public class LoginViewModel : PropertyChangedBase, ILoginViewModel
{
    private readonly ITransportClient transportClient;
    private readonly IWindowManager windowManager;
    private string connectionStatus;

    public LoginViewModel(ITransportClient transportClient, IWindowManager windowManager)
    {
        this.transportClient = transportClient;
        this.windowManager = windowManager;
        this.transportClient.ConnectionEvent += new TransportConnectionEventHandler(UpdateStatusHandler);
    }

    public void Login()
    {
        // set from view, to be done via property, implement later
        var username = "test";
        var password = "test";

        var result = this.transportClient.Login(username, password);

        // if result is ok, we should close our viewmodel, however we 
        // cant call IWindowManager.Close(this) as only show methods exist
        // perhaps this is better handled elsewhere?
    }

    public void UpdateStatusHandler(string status)
    {
        this.ConnectionStatus = status;
    }

    public string ConnectionStatus
    {
        get
        {
            return this.connectionStatus;
        }

        set
        {
            this.connectionStatus = value;
            NotifyOfPropertyChange(() => ConnectionStatus);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:18:22.273

CM通过`IWindowManager`接口提供CM能理解的窗口管理契约。实现本身是 UI 特定的东西 - 例如 Telerik 控件与 Microsoft 标准控件 = 不同。`IWindowManager`在 CM 中实现，`WindowManager`并且该管理器包含一个名为的子类`WindowConductor`，其工作是处理来自`Window`控件本身的事件并将调用传递给窗口（它是视图模型和视图容器之间的粘合剂）

看一看：

[http://caliburnmicro.codeplex.com/SourceControl/changeset/view/35f41b2f9113#src%2fCaliburn.Micro.Silverlight%2fWindowManager.cs](http://caliburnmicro.codeplex.com/SourceControl/changeset/view/35f41b2f9113#src%2fCaliburn.Micro.Silverlight%2fWindowManager.cs)

该指挥器为您管理窗口 - 如果您查看实现，您可以看到它检查某些接口的存在，`IActivate`例如`IDeactivate`和`IGuardClose`。如果您实现这些接口，您的窗口将获得更多生命周期功能。

继承 from`Screen`而不是`PropertyChangedBase`免费获得这些接口实现的一种方法，您还可以获得`IViewAware`提供自动视图缓存和获取视图引用的有用方法的实现

一旦你继承了这个类或实现了接口，你就可以通过VM调用方法来关闭窗口（例如`TryClose`）。它将负责将`WindowConductor`必要的调用传递给窗口控件，您甚至可以使用`IGuardClose`允许您取消关闭操作的接口来防止窗口关闭。

我假设您已经掌握了`Actions`CM，因为您的 VM 上似乎有登录方法。

现在这更像是一个答案中的问题 - 你需要走弹出窗口路线吗？你可以继承`Conductor<T>.Collections.OneActive`并调用`ActivateItem(yourViewModel)`（`T`可以`IScreen`）。当新项目被激活时，您的登录视图模型将自动停用，或者您可以打开登录失败的视图模型或类似的东西。虽然这不使用单独的窗口，但实现非常简单，只需将 a 绑定`ContentControl`到`ActiveItem`您的导体视图模型上

在这里查看详细信息（查看简单 MDI 部分和周边）：

[http://caliburnmicro.codeplex.com/wikipage?title=Screens%2c%20Conductors%20and%20Composition&referringTitle=Documentation](http://caliburnmicro.codeplex.com/wikipage?title=Screens%2c%20Conductors%20and%20Composition&referringTitle=Documentation)

# xcode - XCode 中的奇怪错误 - 构建问题

> ID：13673440
> 
> 赞同：0
> 
> 时间：2012-12-02T20:20:54.590
> 
> 标签：xcode

我在构建代码时总是出现错误。

这是它的屏幕截图：

[http://d.pr/i/ifpB](http://d.pr/i/ifpB)

这会是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:31:04.900

您在同一个项目中有名为 EXERCICI01 和 EXERCICI02 的源文件。其中每一个都定义了一个名为“main”的函数。您试图将它们都链接到一个目标中，这是不允许的。

# css - SVG USE 元素和 :hover 样式

> ID：13673441
> 
> 赞同：25
> 
> 时间：2012-12-02T20:20:57.700
> 
> 标签：css, svg, hover, styling

我正在尝试使用 CSS`:hover`伪类来设置标签嵌入的 SVG 元素的样式`<defs>`，`<use>`但它似乎不起作用：-/ 这是我的代码：

```
<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
 <meta http-equiv="content-type" content="application/xhtml+xml; charset=utf-8"/>
 <style type="text/css" media="screen">
        .active { fill: #0BE; }
        .active:hover { opacity: 0.8; stroke: #F0F; stroke-width: 4px; }
        .active2 #p2 { fill: #0BE; }
        .active2:hover #p2 { opacity: 0.8; stroke: #F0F; stroke-width: 4px; }
        #p2:hover { opacity: 0.8; stroke: #F0F; stroke-width: 4px; }
    </style>
</head>
<body>

<svg version="1.1" width="640" height="480"
 xmlns="http://www.w3.org/2000/svg"
 xmlns:xlink="http://www.w3.org/1999/xlink">

 <defs>
  <polygon id="p0" points="100,0 50,86.6 -50,86.6 -100,0 -50,-86.6 50,-86.6" class="active"/>
  <g id="gr1">
      <polygon id="p1" points="130,0 50,86.6 -50,86.6 -100,0 -50,-86.6 50,-86.6"/>
      <polygon id="p2" points="100,0 50,86.6 -50,86.6 -100,0 -50,-86.6 50,-86.6" class="active"/>
  </g>
 </defs>

 <g transform="translate(70,100)">
    <use xlink:href="#p0" transform="translate(40,0)"/>
    <use xlink:href="#p0" transform="translate(250,0)"/>
    <use xlink:href="#p0" transform="translate(460,0)" class="active" />
 </g>
 <g transform="translate(100,300)">
    <polygon id="style" points="110,0 50,86.6 -50,86.6 -100,0 -50,-86.6 50,-86.6" class="foo"/>
    <use xlink:href="#gr1" transform="translate( 350,2)" class="active2"/>
 </g>

</svg>

</body>
</html> 
```

我希望它以这样一种方式工作，当用户将鼠标指针放在嵌入元素上时，其具有“活动”类的内部元素将改变其样式。当我`<defs>`直接嵌入一个形状并将 CSS 类应用于`<use>`嵌入它的形状时，它会起作用。但它不适用于通过嵌入的组内的任何类或 ID `<use>`。

如何解决？

或者也许有更好的方法来做到这一点？

当用户悬停它时，我只需要更改嵌入对象内的这个特定部分，而不是整个组。这是因为该组的不同部分会应用不同的样式，并且在鼠标悬停时需要进行不同的更改。

**编辑：我想得到什么**

我想要的是一种将一个“库对象”嵌入`<defs>`到我的 SVG 文档中许多不同位置的方法。该对象的某些部分需要使用 CSS 中的自定义颜色设置样式，因为我需要在不更改库对象代码的情况下轻松自定义这些颜色。

然后，当鼠标指针位于此类“活动”对象上方时，我需要通过对其部分进行不同样式的样式来向用户发出信号：当鼠标指针悬停在可点击区域上方时，这里和那里的一些明亮轮廓可以显示可点击区域的形状。

不幸的是，我不能将样式应用于`<use>`元素的子元素，因为它们不是`<use>`DOM 中的子元素（正如其他人已经提到的那样）。我可以将一些样式应用于该部分内的元素`<defs>`，因为它们位于 DOM 中并且可以使用 CSS 选择器寻址，但它们*不能*悬停，因为它们是不可见的，因此`:hover`对它们应用伪类不起作用。如果将此类应用于 ，它也不起作用`<use>`，因为这样我就无法子选择正确的子元素（它们不是 的子元素`<use>`）。所以我没有任何钩子可以应用这些`:hover`伪类。

也许我的问题还有其他解决方案？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-02T21:48:24.823

您无法处理通过 use 引用的元素。[规格](http://www.w3.org/TR/SVG11/struct.html#UseElement)说：

> 对于支持使用 CSS 进行样式设置的用户代理，将引用元素概念性地深度克隆到非公开的 DOM 树中还会复制引用元素及其内容上由 CSS 级联（[CSS2]，第 6 章）产生的任何属性值。CSS2 选择器可以应用于原始（即引用的）元素，因为它们是正式文档结构的一部分。CSS2 选择器不能应用于（概念上）克隆的 DOM 树，因为它的内容不是正式文档结构的一部分。

尽管如此，Firefox 支持通过使用虫洞处理包含的“虚拟”元素。所有其他浏览器都没有。

如果你给引用的元素一个填充/描边值，`currentColor`然后你在悬停时更改元素的`color`属性，那么浏览器还支持更改填充或描边颜色。`<use>`像这样：

```
<svg version="1.1" width="640" height="480" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

  <style type="text/css">
    #p0 {fill:currentColor}
    #use1:hover {color:green}
    #use2:hover {color:red}
    #use3:hover {color:blue}
  </style>

  <defs>
    <polygon id="p0" points="100,0 50,86.6 -50,86.6 -100,0 -50,-86.6 50,-86.6" class="active" />
  </defs>

  <g transform="translate(70,100)">
    <use xlink:href="#p0" transform="translate(40,0)" id="use1" />
    <use xlink:href="#p0" transform="translate(250,0)" id="use2" />
    <use xlink:href="#p0" transform="translate(460,0)" id="use3" />
  </g>
</svg>
```

所有主流浏览器（FF、Chrome、IE、Safari）都支持这一点。只有 Opera 似乎不喜欢它。缺点当然是，用这种方法你只能改变一种颜色。

因此，如果只是改变颜色，另一种方法可能是使用过滤器。例如使用`<feColorMatrix>`，您可以使用颜色矩阵将一种颜色转换为另一种颜色，如下所示：

```
<svg version="1.1" width="640" height="480" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

  <style type="text/css">
    #p0 {fill: currentColor}
    #use1:hover {filter: url(#filter1)}
    #use2:hover {filter: url(#filter2)}
    #use3:hover {filter: url(#filter3)}
  </style>

  <defs>
    <g id="p0">
      <polygon points="100,0 50,86.6 -50,86.6 -100,0 -50,-86.6 50,-86.6" fill="red" />
      <rect width="50" height="70" fill="green" />
      <circle cx="-20" cy="-30" r="30" fill="blue" />
    </g>
  </defs>

  <filter id="filter1">
    <feColorMatrix type="matrix" in="SourceGraphic" values="0 1 0 0 0 
                     1 0 0 0 0 
                     0 0 1 0 0 
                     0 0 0 1 0" />
  </filter>
  <filter id="filter2">
    <feColorMatrix type="matrix" in="SourceGraphic" values="0 0 1 0 0 
                     1 0 0 0 0 
                     0 1 0 0 0 
                     0 0 0 1 0" />
  </filter>
  <filter id="filter3">
    <feColorMatrix type="matrix" in="SourceGraphic" values="0 1 0 0 0 
                     0 0 1 0 0 
                     1 0 0 0 0 
                     0 0 0 1 0" />
  </filter>

  <g transform="translate(70,100)">
    <use xlink:href="#p0" transform="translate(40,0)" id="use1" />
    <use xlink:href="#p0" transform="translate(250,0)" id="use2" />
    <use xlink:href="#p0" transform="translate(460,0)" id="use3" />
  </g>
</svg>
```

不过，Opera 仍然没有运气，这一次我对 IE9 和 Safari 也不满意。但我相信 Opera 和 Safari 应该是可能的，只是我做了一些不是 100% 正确的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T21:28:44.687

这似乎符合规范：

> 对于支持使用 CSS 进行样式设置的用户代理，将引用元素概念性地深度克隆到非公开的 DOM 树中还会复制引用元素及其内容上由 CSS 级联（[CSS2]，第 6 章）产生的任何属性值。CSS2 选择器可以应用于原始（即引用的）元素，因为它们是正式文档结构的一部分。CSS2 选择器不能应用于（概念上）克隆的 DOM 树，因为它的内容不是正式文档结构的一部分。

我尝试了一些使用 use:hover 和/或 [] 属性选择器语法的变通方法，但运气不佳，但那里可能有解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-21T16:04:34.590

也许这会有所帮助：[https ://codepen.io/AmeliaBR/post/customizable-svg-icons-css-variables](https://codepen.io/AmeliaBR/post/customizable-svg-icons-css-variables)

```
 <svg  xmlns="http://www.w3.org/2000/svg" 
     viewBox="0 0 100 100" preserveAspectRatio="xMidYMid meet"
     class="raw">
  <g id="palette">
  <path d="M5,90
           C5,45 40,-5 75,10 
           C110,25 80,95 60,95
           C50,95 50,75 30,75
           C20,75 17,95 12,95
           C10,95 5,95 5,90 Z"/>
    <g  style="fill:currentColor;">
  <path d="M30,50 
           c-10,0 -20,20 -5,15
           s15,-15 5,-15z
           "/>
  <path  d="M45,30 
           c-10,0 -15,15 -5,15
           s10,-15 5,-15z
           "/>
  <path  d="M70,20 
           c-10,0 -20,15 -5,15
           s10,-15 5,-15z
           "/>
  <path  d="M75,45 
           c-10,0 -20,15 -5,15
           s15,-15 5,-15z
           "/>
  <path  d="M65,65 
           c-10,0 -15,25 -5,20
           s10,-20 5,-20z"/>
    </g>
  </g>
</svg>
<svg class="icon-style-A">
    <use xlink:href="#palette"/>
</svg>

<svg class="icon-style-B">
    <use xlink:href="#palette"/>
</svg>

<svg class="icon-style-C">
    <use xlink:href="#palette"/>
</svg>

    svg {
  display:inline-block;
  height:100px; 
  width:100px;
  margin:10px;
  border:1px solid;
  background:#eee;
}
svg.raw {
/* Default styles for the initial SVG.
 * Because they are defined on the <svg>,
 * not the individual graphics elements, 
 * they will NOT be inherited by the <use> references.
 */
  fill:rgba(255,250,220,0.4);
  stroke: rgba(0,0,0,0.7);
  stroke-width:2;
}
svg.icon-style-A {
/* Set the fill, stroke, and color properties to be 
   inherited by the <use> element:
 */
  fill:burlywood;
  color:blueviolet;
  stroke:#222; 
  stroke-width:0.5px;
}
svg.icon-style-B {
/* Set the color properties:
 */
  fill:blanchedalmond;
  color:lavender;
  stroke:white;
  stroke-width:1px;
/* set some icon styles on the <svg> itself: */
  background:aliceblue;
  border-radius:20%;
  border:none;
  box-shadow:royalblue 0 0 2px;
}
svg.icon-style-C {
/* Set the color properties:
 */
  fill:beige;
  color:green;
  stroke:#aaa; 
  stroke-width:1.5px;
/* icon styles for the <svg> itself: */
  background:#222;
  border-radius:10%;
  border:solid gray;
} 
```

不是很灵活，但它适用于我的项目。

# javascript - 悬停菜单对其他 div 产生不同的影响

> ID：13673447
> 
> 赞同：0
> 
> 时间：2012-12-02T20:21:31.330
> 
> 标签：javascript, jquery, variables, html, hover

我在 div 中有一个菜单，其中包含 5 个元素，每个元素的宽度为 180px。我在这个 div 之外有一条线，它有一个必须移动的图像，这取决于悬停的元素。

我这样做：5个元素，ID从“#fxmenu_1”到“#fxmenu_5。我必须为悬停的id的数量声明一个变量，并在javascript（Jquery）中使用此规则移动#img：

> margin-left:180px (times #fxmenu_$i) 从 1 到 5

我几乎知道代码的所有内容，但变量 $i 在我的代码末尾不起作用，我认为必须有更好的东西来编写。像 var=$"fxmenu_$i"

这是代码示例，php 中有更多内容，但我只能向您展示。

```
 <div id="pmenu">
<ul id="bmenul">
            <li>
                <a  class="brand" id="fxmenu1_" href="/"><img src="/logomenu.png" />LOGO</a>
            </li>
              <li>
                <a  id="fxmenu_2"  href="/team" title="team">The team</a>
              </li>
              <li>
                <a  id="fxmenu_3" href="/services" title="Servicios">Services</a>
              </li>
              <li>
                <a  id="fxmenu_4" href="/projects" title="Proyectos">Projects</a>
              </li>
              <li>
                <a  id="fxmenu_5" href="/contact" title="Contacto">Contact</a>
              </li>
        </ul>
<div id="bar">
    <img id="img" src="/efect.png" />
</div>
</div> 
```

与 css 就像这个链接[http://jsfiddle.net/rzJMv/](http://jsfiddle.net/rzJMv/)

这是与 jquery 相关的，但我想在我停止悬停时恢复正常，或者如果我悬停其他元素以移动到这个新点。

```
$(document).ready(function(){
var id;
    $('#fxmenu_'+id+':not(.totalactive)').hover(function (){
        $('#img').animate({"marginTop": "-70px"},1000, function(){
            $('#img').animate({"marginLeft":+(180*id)+"px"},1000, function(){
                $('#img').animate({"marginTop": "-90px"},1000);
                });
        });
    });
}); 
```

[http://jsfiddle.net/rzJMv/1/](http://jsfiddle.net/rzJMv/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:26:30.440

必须查看更多代码才能确定，但​​通常变量在 javascript 中使用，就像这样`'margin-left:'+(180*i)+'px'`

在 php 的情况下，`'margin-left:'+(180*<?php echo $i; ?>)+'px'`

# iphone - 从 Plist 文件“加载”文本并使用它（Xcode）

> ID：13673449
> 
> 赞同：0
> 
> 时间：2012-12-02T20:21:41.470
> 
> 标签：iphone, objective-c, ios, xcode, macos

我有 4 个 UI 按钮和一个 UILabel。我想做 4 个单词（来自 plist 文件）随机显示在 4 个按钮上（一个按钮有一个单词）和一个单词显示在标签上（与按钮上的单词名称相同） . 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T23:29:13.783

假设你的 plist 被调用`words.plist`并且你有一个 4 的数组`UIButtons`

```
NSString * path = [[NSBundle mainBundle] pathForResource:@"words" ofType:@"plist"];
NSMutableArray * words = [NSMutableArray arrayWithContentsOfFile:path]; 
```

现在你有了`words`数组中所有可能的单词。此时我们需要 4 个唯一的随机索引，这基本上意味着在随机打乱后取数组的起始 4 个元素。我们将使用[此](https://stackoverflow.com/a/6153873/846273)答案中建议的[Fisher-Yates 洗牌算法。](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)

```
for (int i = words.count - 1; i > 0; --i) {
    int r = arc4random_uniform(i);
    [words exchangeObjectAtIndex:i withObjectAtIndex:r];
} 
```

现在我们有了一个随机打乱的单词数组，我们只取前 4 个元素并将它们分配给按钮。它看起来像：

```
for (int j = 0; j < buttons.count; j++) {
    UIButton * button = [buttons objectAtIndex:j];
    button.titleLabel.text = [words objectAtIndex:j];
} 
```

最后，我们为标签分配一个单词，在我们用于按钮的索引之间随机选择一个索引：

```
yourLabel.text = [words objectAtIndex:arc4random_uniform(buttons.count)]; 
```

该解决方案适用于任意数量的按钮，由于改组算法（这绝对比检查已经生成的索引更好）保证了高效，并且由于使用了随机生成没有偏差`arc4random_uniform`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T21:04:05.703

将 PLIST 文件的内容移动到一个数组中。

```
NSArray *words = [[NSArray alloc] initWithContentsOfFile:filePath]; 
```

随机找一个数。

```
int randInt = arc4random() % 10; 
```

更改`10`为 PLIST 中的总字数。

您现在可以从数组中选择随机词。

```
NSString *random = [words objectAtIndex:randInt]; 
```

你有一个随机词。找到另一个随机数（检查以确保它与前一个不同），然后从`words`数组中选择下一个单词。

# mysql - MySQL通过where子句计算多行

> ID：13673453
> 
> 赞同：1
> 
> 时间：2012-12-02T20:22:09.023
> 
> 标签：mysql

我正在写一组这样的查询：

```
SELECT count(users.id) AS `id` FROM users WHERE `vote` = 'cont6'
SELECT count(users.id) AS `id` FROM users WHERE `vote` = 'cont7'
SELECT count(users.id) AS `id` FROM users WHERE `vote` = 'cont8' 
```

我想知道如何/是否可以将其放入单个查询中？所以我得到一个类似于以下的结果集：

```
cont6 = 12
cont7 = 4
cont8 = 15 
```

非常感谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:28:01.650

```
SELECT vote, count(users.id) AS `id` FROM users GROUP BY vote 
```

# c# - 从网页启动进程时加载配置文件时出错

> ID：13673456
> 
> 赞同：1
> 
> 时间：2012-12-02T20:22:15.753
> 
> 标签：c#, configuration

我有一个用于启动进程的网页。该进程是具有配置文件的 .net 2.0 可执行文件。如果我自己运行可执行文件，我没有错误。该进程正在启动可执行文件（它正在写入日志文件，我可以看到已生成输出）。

一旦我的可执行文件尝试引用它的配置文件（但仅当它已从网页启动时），它就会引发异常（“配置系统无法初始化”），其中包含以下内容：

> System.Configuration.ConfigurationErrorsException：加载配置文件时出错：访问被拒绝。

我有点难过。如何让我的可执行文件加载配置文件？

顺便说一句，我确实检查了当前目录是否仍然是可执行文件的目录。

编辑这是我的代码：

```
 System.Diagnostics.Process p = new System.Diagnostics.Process();
        p.StartInfo.UseShellExecute = true;
        string mappedFile = Server.MapPath(@".\my.exe");
        p.StartInfo.FileName = mappedFile;
        p.StartInfo.WorkingDirectory = Server.MapPath(@".\");
        p.StartInfo.RedirectStandardOutput = false;
        string eco = COAuditBox.Text;
        DateTime now = DateTime.Now;
        string filename = eco + "_" + String.Format("{0:yyyyMMddHHmmss}", now) + ".txt";
        string redirectUrl = "reports/" + filename;
        string redirectFile = Server.MapPath(redirectUrl);
        //File.WriteAllText(redirectFile, "TEST\t\n");
        p.StartInfo.Arguments = eco + " \"" + redirectFile + "\"";
        p.Start();
        p.WaitForExit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:33:55.443

您的 Web 应用程序在哪个用户下运行？此用户可能没有访问 .config 文件的正确权限。要么给用户正确的权限，要么在不同的帐户下运行应用程序。

更新：要诊断问题，请使用[Microsoft/sysinternals 的 Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)。它允许您观看文件访问操作。您可以按进程名称和/或文件名进行过滤。这应该为您指明正确的方向。

# javascript - 延迟加载 JavaScript（3 个文件）

> ID：13673458
> 
> 赞同：0
> 
> 时间：2012-12-02T20:22:34.997
> 
> 标签：javascript

一整天我都在阅读和评论延迟加载 JavaScript 的内容，但什么也没有。我尝试使用 defer/async 属性和 deferredfunctions.js(?)。我应该用它做什么以及把它放在哪里？对不起我的无知。

这是我的代码：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
<script src="http://mysite.com/files/js/mosaic.1.0.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
jQuery(function($){     $('.fade').mosaic();});</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:29:19.510

这个问题有点太广泛了，无法正确回答。*异步*/*延迟*加载javascript代码和使用脚本加载应该有很多不同的原因。

为什么要延迟加载它？出于同样的原因，您应该将所有`<script>`标签放在 HTML 标记的最底部。`<script>`元素确实阻止了浏览器 HTML 渲染器的执行。当`<script>`遇到一个元素时，HTML 解析器将在继续之前停止并加载+评估该脚本文件。这可能会对页面加载时间产生或多或少的巨大性能影响（取决于您的 javascript 文件的数量和大小）。

这就是为什么你应该用和/或属性标记你的`<script>`元素的原因。如果浏览器理解这些属性（几乎每个现代浏览器都会这样做），它不会停止，而是异步加载和评估资源。`async``deferr`

您现在可能会说“*顺序和依赖关系怎么样*”，这将是一个有效且好的论点。如果您为允许异步加载它们的浏览器标记所有脚本，则不再保证顺序，如果脚本依赖于其他脚本的存在，这是一个大问题。*这是像requireJS*这样的第三方脚本加载器出现的地方。

# sql - Sum(Max()) 子查询

> ID：13673459
> 
> 赞同：0
> 
> 时间：2012-12-02T20:22:51.050
> 
> 标签：sql, oracle

我试图只选择求和列的 MAX 值

```
select rental.member_id,
       rental.rental_id,
       sum(rental_line.Qty) as TotalRentals
  from Rental 
 INNER JOIN rental_line 
    on rental.rental_id =rental_line.rental_id 
where MONTHS_BETWEEN(sysdate, datein)<(12)
group by rental.member_id, 
         rental.rental_id, 
         SUM(TotalRentals) =  MAX(SUM(TotalRentals)); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:47:57.207

`TotalRentals`您可以按(3) 以降序对查询的结果集进行排序，然后使用`rownum`伪列选择第一行：

```
select member_id
     , rental_id
     , TotalRentals
  from ( select rental.member_id
              , rental.rental_id
              , sum(rental_line.Qty) as TotalRentals
           from Rental 
          INNER JOIN rental_line 
             on rental.rental_id =rental_line.rental_id 
          where MONTHS_BETWEEN(sysdate, datein)<(12)
          group by rental.member_id, 
                   rental.rental_id
          order by 3 desc
      ) 
where rownum = 1 
```

# python - 如何用逗号分隔，然后用双引号括起来的部分？

> ID：13673460
> 
> 赞同：0
> 
> 时间：2012-12-02T20:22:58.187
> 
> 标签：python

我有一个文件“data.txt”，其中包含诸如

```
4, "124 Sesame, Street Lane", Chicago, IL
5, 2342 Main Street, Denver, CO
6, 124 Some Street, Los Angelos, CA 
```

我有一个 python 脚本，它逐行读取该文件并将其拆分为表单中的数据元组`(id, street address, city, state)`。该脚本用逗号分隔每一行：

```
line = file.readline()
line_tuple = line.split(',') 
```

这种方法显然是失败的，因为我有一些行的文本块被双引号包围，我想将它们视为元组中的一个整体实体，而不是两个不同的数据。

如何告诉python在用逗号分割时将双引号块处理为单个实体？

我试过先用引号分隔，然后用逗号分隔，反之亦然，但这些方法似乎并没有达到我想要做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:24:22.590

这称为“逗号分隔值”或简称“csv”。Python 有一个用于读取它的库。

如果您使用的是 Python 3，请查看：[http](http://docs.python.org/2/library/csv.html) ://docs.python.org/2/library/csv.html或[http://docs.python.org/3/library/csv.html 。](http://docs.python.org/3/library/csv.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T20:24:39.563

使用真正的[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)解析器。[蟒蛇 2](http://docs.python.org/2/library/csv.html) ,[蟒蛇 3](http://docs.python.org/3/library/csv.html)

```
# default delimiter is , and default quotechar is "
>>> import csv
>>> with open('eggs.csv', newline='') as csvfile:
...     spamreader = csv.reader(csvfile)
...     for row in spamreader:
...         print(', '.join(row))
Spam, Spam, Spam, Spam, Spam, Baked Beans
Spam, Lovely Spam, Wonderful Spam 
```

# mysql - 向 MySQL Xcode post 方法输入数据

> ID：13673465
> 
> 赞同：1
> 
> 时间：2012-12-02T20:23:17.663
> 
> 标签：mysql, ios, post

我看过他们解释这一点的例子：

文件：file.php（未显示）

文件 xcode (.m - 方法 IBAction)

```
NSString *strURL = [NSString stringWithFormat:@"http://localhost/file.php?name=%@",inputName.text];
NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];
NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];
NSLog(@"%@", strResult); 
```

但现在我需要获取 POST 方法发送的数据。为什么？也有大约 60 个字段可供输入。

所以只需要参考文件（file.php）就可以全部输入？

# ios - ios - 调用 ViewController 时标签会重复

> ID：13673467
> 
> 赞同：0
> 
> 时间：2012-12-02T20:23:42.793
> 
> 标签：ios, uinavigationcontroller, custom-cell

我有一个带有 CoreData 和自定义单元格的 TableView，它们都可以正常工作。

现在，当我选择一个单元格以编辑其内容并从中返回时，只需点击 UINavigationController 中的后退按钮，我就会发生一些奇怪的事情。

请看图片我的意思。似乎更新后的 UILabel 被放置在旧 UILabel 之上，而不是“更新”？我错过了什么？？

您会看到顶部单元格中的差异，但它发生在所有单元格中。

![前](../Images/b93795bdabf3f460f786e9e17b4a07e1.png)

![后](../Images/9cb3ac45cd5ac2b14571a1b1a648129d.png)

**编辑：添加代码**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
static NSString *cellIdentifier = @"Cell";

customCell = [_mainTableView dequeueReusableCellWithIdentifier:cellIdentifier forIndexPath:indexPath];
if (customCell == nil)
{
    customCell = [[MNCustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];

    CGRect frameTitle;
    frameTitle = CGRectMake(20, 4, 195, 21);

    CGRect frameSummary;
    frameSummary = CGRectMake(20, 25, 250, 30);

    CGRect frameDate;
    frameDate = CGRectMake(200, 4, 100, 21);

    MNotes *mnotes = [[self fetchedResultsController] objectAtIndexPath:indexPath];

    //Strings for Title and Summary
    titleString = mnotes.noteTitleString;
    summaryString = mnotes.mainNoteString;

    NSLog(@"TITLE STRING = %@", titleString);

    //Date
    SORelativeDateTransformer *relativeDateTransformer = [[SORelativeDateTransformer alloc] init];
    relativeDate = [relativeDateTransformer transformedValue:mnotes.createDate];

    customCell.noteTitle = [[UILabel alloc] initWithFrame:frameTitle];
    customCell.noteTitle.backgroundColor = [UIColor clearColor];
    customCell.noteTitle.font = [UIFont systemFontOfSize:20];
    customCell.noteTitle.userInteractionEnabled = NO;
    customCell.noteTitle.textColor = [self colorWithHexString:@"274D70"];

    customCell.noteSummary = [[UITextView alloc] initWithFrame:frameSummary];
    customCell.noteSummary.backgroundColor = [UIColor clearColor];
    customCell.noteSummary.font = [UIFont systemFontOfSize:10];
    customCell.noteSummary.userInteractionEnabled = NO;

    customCell.noteDate = [[UILabel alloc] initWithFrame:frameDate];
    customCell.noteDate.backgroundColor = [UIColor clearColor];
    customCell.noteDate.font = [UIFont systemFontOfSize:16];
    customCell.noteDate.userInteractionEnabled = NO;
    customCell.noteDate.textColor = [self colorWithHexString:@"274D70"]; //#274D70

}

customCell.noteTitle.text = titleString;
customCell.noteSummary.text = summaryString;
customCell.noteDate.text = relativeDate;

[customCell.contentView addSubview:customCell.noteTitle];
[customCell.contentView addSubview:customCell.noteSummary];
[customCell.contentView addSubview:customCell.noteDate];

 return customCell;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:40:36.427

UITableViews 通过回收单元格来工作。当表格视图向其委托请求一个单元格时，如果有一个现有的未使用的单元格，它将使用它。否则它会，分配一个新的。您应该只在分配新单元格时添加标签。如果它被回收，你只想设置现有标签的文本。

* * *

像这样：

```
 customCell.noteDate.textColor = [self colorWithHexString:@"274D70"]; //#274D70

    [customCell.contentView addSubview:customCell.noteTitle];
    [customCell.contentView addSubview:customCell.noteSummary];
    [customCell.contentView addSubview:customCell.noteDate];
    // try adding this:
    customCell.contentView.autoresizesSubviews = false;
}

customCell.noteTitle.text = titleString;
customCell.noteSummary.text = summaryString;
customCell.noteDate.text = relativeDate; 
```

注意：实例化时，单元格的内容视图大小可能为 0,0。当给定其实际大小时，它可能会调整子视图的大小。

* * *

这看起来很奇怪......你为什么不使用调用委托的 tableView ？像往常一样：

```
customCell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier forIndexPath:indexPath]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T22:27:43.550

这些东西需要在分配块之后移出。：

```
MNotes *mnotes = [[self fetchedResultsController] objectAtIndexPath:indexPath];

//Strings for Title and Summary
titleString = mnotes.noteTitleString;
summaryString = mnotes.mainNoteString;

NSLog(@"TITLE STRING = %@", titleString);

//Date
SORelativeDateTransformer *relativeDateTransformer = [[SORelativeDateTransformer alloc] init];
relativeDate = [relativeDateTransformer transformedValue:mnotes.createDate]; 
```

这些东西真的应该放在你的 UITableViewCell 子类定义中，但它现在可以保留：

```
customCell.noteTitle = [[UILabel alloc] initWithFrame:frameTitle];
customCell.noteTitle.backgroundColor = [UIColor clearColor];
customCell.noteTitle.font = [UIFont systemFontOfSize:20];
customCell.noteTitle.userInteractionEnabled = NO;
customCell.noteTitle.textColor = [self colorWithHexString:@"274D70"];

customCell.noteSummary = [[UITextView alloc] initWithFrame:frameSummary];
customCell.noteSummary.backgroundColor = [UIColor clearColor];
customCell.noteSummary.font = [UIFont systemFontOfSize:10];
customCell.noteSummary.userInteractionEnabled = NO;

customCell.noteDate = [[UILabel alloc] initWithFrame:frameDate];
customCell.noteDate.backgroundColor = [UIColor clearColor];
customCell.noteDate.font = [UIFont systemFontOfSize:16];
customCell.noteDate.userInteractionEnabled = NO;
customCell.noteDate.textColor = [self colorWithHexString:@"274D70"]; //#274D70

[customCell.contentView addSubview:customCell.noteTitle];
[customCell.contentView addSubview:customCell.noteSummary];
[customCell.contentView addSubview:customCell.noteDate]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T20:40:47.653

我怀疑是你的有问题

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

方法实现。你能把代码贴在这里。

从描述中可以明显看出，您在回收单元后正在执行 [cell addSubview:label] 。因此，每次重新加载表格的单元格时，您不仅要设置标签的文本，还要添加一个子视图，然后对其进行设置。

你应该做的是从 [tableView dequeueReusableCellWithIdentifier:@"identifier"] 中获取单元格，并且只有当单元格为 nil 时，才执行 addSubview。否则，只需设置子视图的文本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T22:31:42.937

当你为你的 UILabel 设置背景颜色时，这个问题就解决了。我把它设置为：

```
[UIColor clearColor]; 
```

这意味着我将继续看到所有以前的条目发生了什么。

所以将它设置为任何颜色，例如`[UIColor blueColor];`

# iphone - 以编程方式在iphone中将UIImage比率更改为fb封面

> ID：13673468
> 
> 赞同：1
> 
> 时间：2012-12-02T20:23:46.653
> 
> 标签：iphone, objective-c, ios, xcode, facebook

我正在从图像选择器中选择图像，然后我想将该图像的比例更改为 facebook 封面。我有一张图片，假设它的分辨率为 640 宽和 480 高，我想将其更改为 facebook 封面（851 像素宽和 315 像素高）我将如何在 iphone 中以编程方式执行此操作 检查此[链接](https://www.facebook.com/help/125379114252045/)以获取封面图片详细信息 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:12:09.523

```
 Use this Method to Resize the image according to the given content mode, taking into account the image's orientation...

- (UIImage *)resizedImageWithContentMode:(UIViewContentMode)contentMode bounds:(CGSize)bounds
                interpolationQuality:(CGInterpolationQuality)quality {

CGFloat horizontalRatio = bounds.width / self.size.width;
CGFloat verticalRatio = bounds.height / self.size.height;
CGFloat ratio;

switch (contentMode) {
    case UIViewContentModeScaleAspectFill:
        ratio = MAX(horizontalRatio, verticalRatio);
        break;

    case UIViewContentModeScaleAspectFit:
        ratio = MIN(horizontalRatio, verticalRatio);
        break;

    default:
        [NSException raise:NSInvalidArgumentException format:@"Unsupported content mode:  %d", contentMode];
}

CGSize newSize = CGSizeMake(self.size.width * ratio, self.size.height * ratio);

return [self resizedImage:newSize interpolationQuality:quality]; 
```

}

并转到此链接以获取更多详细信息，[以正确的方式调整 Uiimage 大小](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)。

# python - 使用 python，我如何连接到 WebDAV 服务器并从中下载文件？

> ID：13673470
> 
> 赞同：0
> 
> 时间：2012-12-02T20:24:03.933
> 
> 标签：python, webdav

我的学校有一个 webdav 文件服务器，其中包含我经常需要下载的文件。对于这台服务器，我有一个用户名和密码，可以用来连接到服务器，如果我转到 chrome 中的 URL，我可以很好地查看所有内容。现在我的问题是，如何使用 python 访问和登录这个 WebDAV 服务器，然后从中下载文件。如果我错过了一个非常简单的解决方案，我无法通过谷歌找到任何东西并道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T21:35:49.077

您可以使用[python-webdav-library](https://launchpad.net/python-webdav-lib)

```
from webdav import WebdavClient
url = 'https://somesite.net'
mydav = WebdavClient.CollectionStorer(url, validateResourceNames=False)
mydav.connection.addBasicAuthorization(<username>, <password>)

mydav.path = <path to file I want, ie '/a/b/c.txt'>
mydav.downloadFile(<local path ie. ~/Downloads/c.txt>) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T19:18:47.483

你不能使用：

```
#codesnippet   
import webbrowser
webbrowser.open("URL") 
```

> 将“URL”替换为存储在 Internet 服务器上的文件的网址。

# c - 指向节点指针数组的指针

> ID：13673476
> 
> 赞同：1
> 
> 时间：2012-12-02T20:24:33.823
> 
> 标签：c, pointers, struct, nodes

有了这个结构

```
typedef struct tNode_t {
    struct tNode_t **a;
} tNode; 
```

我希望能够`a`指向一个指向 5 个指向 tNodes 的指针的数组

示例主要：

```
int main()
{
    tNode t;
    tNode (*alpha)[5];
    t.a = alpha;
} 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T20:30:50.873

这定义了一个指向 tNodes 数组的指针：

```
tNode (*alpha)[5]; 
```

这定义了一个指向 tNodes 的指针数组：

```
tNode *alpha[5]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:29:10.757

在您的代码中`alpha`，并且`a`是指向非常不同的对象的指针。而且由于两者都是指针，正如您正确定义的那样，**不会发生衰减**。只有数组会衰减，所以`alpha`不能简单地衰减到另一种指针类型。

为什么它们如此不同？当您增加 a 时，它将指向下一个`struct tNode_t *`。当您增加`alpha`时，它将`struct tNode *`进一步指向 5。

# java - 需要对 Queue 和 LinkedList 实现进行一些说明

> ID：13673477
> 
> 赞同：1
> 
> 时间：2012-12-02T20:24:35.917
> 
> 标签：java

这是我的代码：

```
/*
private Queue<Card> cards = new LinkedList<Card>();

*/ 
```

我正在使用 Queue 和 LinkedList 来处理一副 Black Jack 扑克牌。

现在，我的理解是队列持有卡片，并且`LinkedList`授予访问权限，对`Queue`吗？

如果没有，有人可以给我分解一下上面的代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:26:13.013

您没有链表*和*队列。该类[`LinkedList<E>`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)实现接口[`Queue<E>`](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html)。您正在创建一个链表，但随后将其用作队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:26:48.787

> 现在，我的理解是队列持有卡片，而链表授予对队列的访问权限，对吗？

No.`Queue`是一个接口（一种抽象，一种定义合约的方式），`LinkedList`而是该接口的一个实现。换句话说，它努力履行该合同。

在这种特殊情况下[`Queue`](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html)，是一个非常严格的接口，它只公开了`LinkedList`.

现实生活中的例子：银行是一个拥有员工、财务和办公室的机构。互联网是您访问银行的一种方式，提供一些*界面*和功能。使用移动应用程序或通过电话与银行顾问交谈时，您仍在使用同一家银行，但界面不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T20:27:30.350

`Queue`是一个接口，使您可以`LinkedList`与队列的底层对象进行交互。所以你不能调用方法来获取对象`index`等等。因此，当您想要使用队列机制时，您不需要`Queue`的功能就会被削减。`LinkedList`

# android - android位图保持尺寸相同减少内存

> ID：13673484
> 
> 赞同：1
> 
> 时间：2012-12-02T20:24:52.770
> 
> 标签：android, memory, bitmap

我有一个显示大量图像的应用程序，图像的大小可以不同，直到设备的全屏尺寸。图像全部下载，我使用 imagemagick 减少图像颜色以压缩文件大小，同时保持尺寸相同，以减少下载时间。减少的色彩空间适合我的应用程序。

问题是，当我将图像加载到 android 中的位图中时，由于 android 的 ARGB_8888 位图配置，文件大小要大得多，我确实需要 ALPHA 通道。由于 ARGB_4444 已被弃用并且存在性能问题，我没有使用它。我想知道是否有任何其他方法可以减少加载位图的内存占用，同时保持尺寸与原始尺寸相同？

- - 更新 - -

在这里讨论和许多其他搜索/阅读之后，似乎没有直接的方法可以做到这一点。我可以使用 ARGB_4444 将每个像素存储为 2 个字节，而不是每个像素 4 个字节。问题是 ARGB_4444 已被弃用，出于显而易见的原因，我尽量不使用 API 的弃用部分。Android 建议使用默认的 ARGB_8888，因为我需要 alpha 我必须使用它。由于有许多应用程序不需要如此复杂的色彩空间，因此很高兴看到 ARGB_4444 或类似的东西成为受支持 API 的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T20:45:11.233

如果您不需要 alfa（透明度），您可以使用：

```
Bitmap.Config.RGB_565 
```

每个像素使用 2 个字节，而不是 4 个，将大小减少一半。

你还应该看看`BitmapFactory.Options`：

```
inSampleSize
inScaled 
```

这些值根据您的要求正确设置，可能会对位图内存要求产生非常积极的影响。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:58:48.657

[阅读我在此处](https://stackoverflow.com/a/13668362/1627802)发布的类似答案

基本上，Pre蜂窝设备需要位图回收以减少内存使用

# php - 如何使用 PHP 检查远程 HTML 更改？

> ID：13673489
> 
> 赞同：0
> 
> 时间：2012-12-02T20:26:02.967
> 
> 标签：php, html, mysql

我想使用带有某种数据库存储的 PHP 检查多个网站的 HTML 更改。除了使用 MD5 和来检查更改之外，我还想知道另一种方法。

另外，有没有什么方法可以在检测到更改时，我也可以找出到底更改了什么？

提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:33:38.960

您可以在第一次爬网时存储该页面的 Last-Modified 标头。下次抓取时，您只需再次检查 Last-Modified 标头。

如果网站不支持此标头，您可以使用 MD5。

可以使用任何 diff 包来检测更改。例如[http://www.raymondhill.net/finediff/viewdiff-ex.php](http://www.raymondhill.net/finediff/viewdiff-ex.php)

# c# - C# 实例错误

> ID：13673490
> 
> 赞同：-1
> 
> 时间：2012-12-02T20:26:06.473
> 
> 标签：c#, exception, instance

所以我有我的 Winform，其中有一个包含数据的 dgv，当单击相应的单元格时，我需要能够将该数据保存到两个单独的数组列表中。真的没问题，但我有可能是有史以来最愚蠢的错误：我需要实例化数组列表所在的类，“clsAL”，但程序仍然抛出错误，认为“对象引用未设置为对象的实例”。这是代码（忽略与此无关的任何内容，特别是如果它是西班牙语：D）

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Data.OleDb;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;

    namespace WindowsFormsApplication7
    {
        public partial class FormH : Form
        {
            clsAL cls;
        public FormH()
        {
            InitializeComponent();
        }

        private void FormH_Load(object sender, EventArgs e)
        {
            cls = new clsAL();
            OleDbCommand comm;
            OleDbConnection conn = new OleDbConnection();
            DataSet dset;
            OleDbDataAdapter adap = new OleDbDataAdapter();
            OleDbCommandBuilder cmb;
            conn.ConnectionString = "Provider = 'Microsoft.Jet.OLEDB.4.0'; Data Source = 'RoboTIC.mdb'";
            comm = new OleDbCommand("Select * From tblHistorial", conn);
            adap = new OleDbDataAdapter(comm);
            dset = new DataSet();
            adap.Fill(dset, "tblHistorial");
            dgvHistorial.DataSource = dset.Tables["tblHistorial"];
        }

        private void dgvHistorial_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {
            cls = new clsAL();
            string operacion = dgvHistorial.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString();
            cls.dir.Clear();
            cls.time.Clear();
            string aux = "";
            for (int a = 0; a > operacion.Length; a++)
            {
                aux = aux + operacion[a];
                if (aux == "a")
                {
                    cls.dir.Add("avanzar");
                }
                if (aux == "d")
                {
                    cls.dir.Add("derecha");
                }
                if (aux == "i")
                {
                    cls.dir.Add("izquierda");
                }
                if (aux == "r")
                {
                    cls.dir.Add("retroceder");
                }
                if (aux == "/")
                { 

                }
                if (aux != "a" && aux != "a" && aux != "a" && aux != "a" && aux != "/")
                {
                    cls.time.Add(Convert.ToInt32(operacion[a]+operacion[a+1]));
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:36:42.483

问题出`dir`在`clsAl`. 这是一个`NullReferenceException`. `dir`这是因为您在尝试调用它时尚未分配数组列表`Clear()`。

在构造函数中`clsAl`添加

```
 clsAl()
     {
          dir = new ArrayList();
          time = new ArrayList();
     } 
```

并且您将停止收到这些异常。

# android - android 编程使用互联网访问网站

> ID：13673494
> 
> 赞同：0
> 
> 时间：2012-12-02T20:26:13.577
> 
> 标签：android

我想访问我想从网站检索信息的网站。我已经找到了解决方案，但不幸的是这个应用程序停止了任何想法？

```
package pete.android.study; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:49:43.990

您的 Activity 名称和包错误。

在您的清单中，您的 Main Activity 被指定为`com.example.ipk.MainActivity`. 但是，您发布的活动（我假设是您想要作为主要活动的活动）是`pete.android.study.JSoupStudyActivity`.

要解决此问题，请更改

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.ipk" 
```

至

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="pete.android.study" 
```

并改变：

```
 <activity android:name=".MainActivity">
        <intent-filter>
            <category android:name="android.intent.category.LAUNCHER" >
            </category>

            <action android:name="android.intent.action.MAIN" >
            </action>
        </intent-filter>
    </activity> 
```

至

```
 <activity android:name=".JSoupStudyActivity">
        <intent-filter>
            <category android:name="android.intent.category.LAUNCHER" >
            </category>

            <action android:name="android.intent.action.MAIN" >
            </action>
        </intent-filter>
    </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:41:08.270

android OS >=3.0 不允许`Network Requests`在主`UI`线程上。

您可以使用

[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)用于此目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T20:43:08.217

我怀疑 NetworkOnMainThreadException

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。
> 
> 这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。请参阅文档设计响应性。

```
Runnable blogSearch = new Runnable() {
      public void run() {
         final String text = getBlogStats();
         JSoupStudyActivity.this.runOnUiThread(new Runnable() {
            @Override
            public void run() {
               ((TextView) findViewById(R.id.tv)).setText(text);
            }
         });
      }
   };

Thread thread = new Thread(null, blogSearch, "MyThread");
thread.start(); 
```

# json - 如何修改用 Jackson 序列化的 JSON 数组的根元素

> ID：13673495
> 
> 赞同：1
> 
> 时间：2012-12-02T20:26:15.370
> 
> 标签：json, jackson

请参阅以下代码。我需要将数据列表序列化为 JSON 数组：

FooEntity.java：

```
public class FooEntity {

String foo;
String bar;

public String getFoo() {
    return foo;
}

public void setFoo(String foo) {
    this.foo = foo;
}

public String getBar() {
    return bar;
}

public void setBar(String bar) {
    this.bar = bar;
}
} 
```

FooList.java：

```
public class FooList {
public List<FooEntity> fooList;

public FooList() {
    this.fooList = new ArrayList<FooEntity>();
}

public void add(FooEntity fooEntity) {
    this.fooList.add(fooEntity);
}

public List<FooEntity> getFooList() {
    return fooList;
}

public void setFooList(List<FooEntity> fooList) {
    this.fooList = fooList;
}
} 
```

在这里，我创建了 FooEntities 列表并将其序列化为 JSON：

```
public void fooListToJson() throws IOException {
    FooList fooList = new FooList();

    FooEntity fooEntity1 = new FooEntity();
    fooEntity1.setBar("fooEntity1 bar value");
    fooEntity1.setFoo("fooEntity1 foo value");

    FooEntity fooEntity2 = new FooEntity();
    fooEntity2.setBar("fooEntity2 bar value");
    fooEntity2.setFoo("fooEntity2 foo value");

    fooList.add(fooEntity1);
    fooList.add(fooEntity2);

    ObjectMapper mapper = new ObjectMapper();
    StringWriter stringWriter = new StringWriter();
    final JsonGenerator jsonGenerator = mapper.getJsonFactory().createJsonGenerator(stringWriter);

    mapper.writeValue(jsonGenerator, fooList);

    System.out.println(stringWriter.toString()); 
```

所以输出如下：

```
{"fooList":[{"foo":"fooEntity1 foo value","bar":"fooEntity1 bar value"},{"foo":"fooEntity2 foo value","bar":"fooEntity2 bar value"}]} 
```

这都是正确的，我这里只有一个需要。我需要更改列表的“根”元素。现在有“ **fooList** ”作为根元素——我需要改变它。

我发现很少有关于这个主题的主题和帖子，但没有什么能完全符合我的要求。该解决方案必须保留将 JSON 反序列化回相应 java 类的可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:39:45.570

[@JsonRootName](https://github.com/FasterXML/jackson-annotations/wiki/JacksonAnnotations)是否提供您所需要的？

# sql - SQL 过程可以返回一个表吗？

> ID：13673502
> 
> 赞同：10
> 
> 时间：2012-12-02T20:26:54.093
> 
> 标签：sql, oracle, procedure

Oracle SQL 过程可以返回一个表吗？我目前正在使用 a`dbms_output`来打印循环中的两个游标的输出，尽管如果它返回两列会更好看。这可能在一个程序内吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-02T21:05:49.100

PL/SQL 函数可以返回嵌套表。如果我们将嵌套表声明为 SQL 类型，我们可以使用[TABLE() 函数](http://docs.oracle.com/cd/E11882_01/appdev.112/e11822/adobjbas.htm#i472581)将其用作查询源。

这是一个类型，以及一个由它构建的嵌套表：

```
SQL> create or replace type emp_dets as object (
  2  empno number,
  3  ename varchar2(30),
  4  job varchar2(20));
  5  /

Type created.

SQL> create or replace type emp_dets_nt as table of emp_dets;
  2  /

Type created.

SQL> 
```

这是一个返回该嵌套表的函数...

```
create or replace function get_emp_dets (p_dno in emp.deptno%type)
    return emp_dets_nt
is
    return_value emp_dets_nt;
begin
    select emp_dets(empno, ename, job)
    bulk collect into return_value
    from emp
    where deptno = p_dno;
    return return_value;
end;
/ 
```

...这就是它的工作原理：

```
SQL> select * 
  2  from table(get_emp_dets(10))
  3  /

     EMPNO ENAME                          JOB
---------- ------------------------------ --------------------
      7782 CLARK                          MANAGER
      7839 KING                           PRESIDENT
      7934 MILLER                         CLERK

SQL> 
```

* * *

SQL 类型为我们提供了大量的功能，并允许我们在 PL/SQL 中构建相当复杂的 API。 [了解更多](http://docs.oracle.com/cd/E11882_01/appdev.112/e11822/toc.htm)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-12T08:09:18.710

我认为您可以为此使用 Oracle Cursor（如果您的 Oracle 版本支持它）：

```
PROCEDURE myprocedure(
    mycursor OUT SYS_REFCURSOR )
AS
BEGIN
  OPEN mycursor FOR SELECT * FROM mytable;
END;
END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T15:14:09.173

这也可能有帮助：

```
DECLARE
  TYPE t_emptbl IS TABLE OF scott.emp%rowtype;
  v_emptbl t_emptbl; 
  ret_val  t_emptbl; 
  --
  Function getEmployeeList Return t_emptbl 
  IS
  BEGIN
    SELECT * bulk collect INTO v_emptbl FROM scott.emp;
    -- Print nested table of records:
    FOR i IN 1 .. v_emptbl.COUNT LOOP
      DBMS_OUTPUT.PUT_LINE (v_emptbl(i).empno);
    END LOOP;
    RETURN v_emptbl;
  END;
  --
  BEGIN
    ret_val:= getEmployeeList;
  END;
  / 
```

# python - 双调排序，mpi4py

> ID：13673507
> 
> 赞同：3
> 
> 时间：2012-12-02T20:27:26.533
> 
> 标签：python, sorting, parallel-processing, mpi

我正在尝试实现双音排序算法。

```
Parallel Bitonic Sort Algorithm for processor Pk (for k := 0 : : : P  1)
d:= log P /* cube dimension */
sort(local  datak) /* sequential sort */
/* Bitonic Sort follows */
for i:=1 to d do
    window-id = Most Signicant (d-i) bits of Pk
    for j:=(i-1) down to 0 do
        if((window-id is even AND jth bit of Pk = 0) OR 
                   (window-id is odd AND jth bit of Pk = 1))
        then call CompareLow(j)
        else call CompareHigh(j)
        endif
    endfor
endfor 
```

资料来源：[http ://www.cs.rutgers.edu/~venugopa/parallel_summer2012/mpi_bitonic.html#expl](http://www.cs.rutgers.edu/~venugopa/parallel_summer2012/mpi_bitonic.html#expl)

不幸的是，CompareHigh 和 CompareLow 的描述充其量是不稳定的。

据我了解，CompareHigh 将从调用进程及其伙伴进程中获取数据，将两者合并，排序，并将上半部分存储在调用进程的数据中。CompareLow 也会这样做，并取下半部分。

我已经验证我的实现选择了正确的合作伙伴并在每个进程的每次迭代期间调用了正确的 CompareHigh/Low 方法，但我的输出仍然只是部分排序。我假设我的 CompareHigh/Low 实现不正确。

这是我当前输出的示例：

```
[0] [17 24 30 37]
[1] [ 92 114 147 212]
[2] [ 12  89  92 102]
[3] [172 185 202 248]
[4] [ 30  51 111 148]
[5] [148 149 158 172]
[6] [ 17  24  59 149]
[7] [160 230 247 250] 
```

这是我的 CompareHigh、CompareLow 和合并函数：

```
def CompareHigh(self, j):
    partner = self.getPartner(self.rank, j)
    print "[%d] initiating HIGH with %d" % (self.rank, partner)
    new_data = np.empty(self.data.shape, dtype='i')

    self.comm.Send(self.data, dest = partner, tag=55)
    self.comm.Recv(new_data, source = partner, tag=55)

    assert(self.data.shape == new_data.shape)
    self.data = np.split(self.merge(data, new_data), 2)[1]

def CompareLow(self, j):
    partner = self.getPartner(self.rank, j)
    print "[%d] initiating LOW with %d" % (self.rank, partner)
    new_data = np.empty(self.data.shape, dtype='i')

    self.comm.Recv(new_data, source = partner, tag=55)
    self.comm.Send(self.data, dest = partner, tag=55)

    assert(self.data.shape == new_data.shape)
    self.data = np.split(self.merge(data, new_data), 2)[0]

def merge(self, a, b):
    merged = []
    i = 0
    j = 0
    while i < a.shape[0] and j < b.shape[0]:
        if a[i] < b[j]:
            merged.append(a[i])
            i += 1
        else:
            merged.append(b[j])
            j += 1
    while i < a.shape[0]:
        merged.append(a[i])
        i += 1

    while j < a.shape[0]:
        merged.append(b[j])
        j += 1

    return np.array(merged)

def getPartner(self, rank, j):
    # Partner process is process with j_th bit of rank flipped
    j_mask = 1 << j
    partner = rank ^ j_mask
    return partner 
```

最后，这里是实际的算法循环：

```
# Generating map of bit_j for each process.
bit_j = [0 for i in range(d)]
for i in range(d):
    bit_j[i] = (rank >> i) & 1    

bs = BitonicSorter(data)
for i in range(1, d+1):

    window_id = rank >> i
    for j in reversed(range(0, i)):
        if rank == 0: print "[%d] iteration %d, %d" %(rank, i, j) 
        comm.Barrier()
        if (window_id%2 == 0 and bit_j[j] == 0) \
                    or (window_id%2 == 1 and bit_j[j] == 1):
            bs.CompareLow(j)
        else:
            bs.CompareHigh(j)
        if rank == 0: print ""
        comm.Barrier()

if rank != 0:
    comm.Send(bs.data, dest = 0, tag=55)
    comm.Barrier()

else:
    dataset[0] = bs.data
    for i in range(1, size) :
        comm.Recv(dataset[i], source = i, tag=55)
    comm.Barrier()
    for i, datai in enumerate(dataset):
        print "[%d]\t%s" % (i, str(datai))
    dataset = np.array(dataset).reshape(data_size) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:42:34.630

好烦我：

```
self.data = np.split(self.merge(data, new_data), 2) 
```

是有问题的线路。我不确定变量数据绑定到什么，但这就是问题所在。

# java - 如何从类型中获取类

> ID：13673513
> 
> 赞同：0
> 
> 时间：2012-12-02T20:28:20.303
> 
> 标签：java

> **可能重复：**
> [如何确定泛型类型的类？](https://stackoverflow.com/questions/182636/how-to-determine-the-class-of-a-generic-type)

给定这样的代码：

```
 MyClass<SomeOtherClass> = new MyClass<SomeOtherClass>();

    public class MyClass<T> implements IMyClass<T> 
    {
       public MyClass()
       {
          //I need to get class of SomeOtherClass
       }
    } 
```

在 Java 中可以做这样的事情吗？

**更新更清晰**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:28:24.763

Java 泛型实现不允许您了解给定实例的泛型类型参数。这是由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)。

太糟糕了，无法到达`SomeOtherClass.class`您的评论位置。

请注意，类型擦除不会阻止获取声明的泛型参数。例如以下实例将能够获得两个`Function`接口泛型参数：

```
class ToStringFunction implement Function<Object,String> {
...
} 
```

在您的情况下，信息在您的类实例中不可用的字段声明中可用。

# windows - 如何使用逆向工程更改呼叫

> ID：13673516
> 
> 赞同：1
> 
> 时间：2012-12-02T20:28:42.847
> 
> 标签：windows, dll, assembly, reverse-engineering, ollydbg

我有一个`test1.exe`使用示例库的示例程序`test2.dll`。

*   `test.dll`包含相同类型的`A()`功能`B()`。
*   `test1.exe`调用`A`然后退出。

在这里，我找到了对`A()`： ![test.exe 调用的行 A](../Images/59330c9fffb5dba8b2cd6870f3a4968d.png) （[http://i.stack.imgur.com/5W9Jd.jpg](https://i.stack.imgur.com/5W9Jd.jpg)）的调用

现在，如果我没记错的话，我需要`88FDFFFF`用正确的偏移量替换`B()`，但是我如何计算它以便`B()`调用它而不是`A()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T04:24:52.693

如果这是在 x86 调用相关指令中，则偏移值是通过从目标地址中减去调用之后的指令地址（= 调用指令位置 + 5 个字节）来计算的。因此，您需要将偏移量修补为地址（B）-地址（调用指令+5）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-14T15:25:12.460

如果`b`在 test1.exe 中导入，则很容易，否则您必须使用 LoadLibrary 和 GetProcAddress。

按`ctrl+N`一下看是否`b`是进口的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T18:31:40.453

我建议先学习 asm 基础知识，然后使用 HIEW hexeditor/disassembler 来更改简单的代码。

# php - PHP5.3 中的命名空间和外部库 - 原则集成

> ID：13673518
> 
> 赞同：0
> 
> 时间：2012-12-02T20:28:50.083
> 
> 标签：php, namespaces, doctrine, integration

我想将 Doctrine 集成到一个新构建的 PHP5 框架中。我正在使用命名空间。图书馆按地图组织：

*   应用程序（控制器，块，动作，...）

*   ext（外部库）

*   sys（内核和路由对象）。

现在我想整合地图分机中的教义。

在调用类中，我有：

```
namespace app\example;
use ext\Doctrine\DBAL\DriverManager;
$conn = DriverManager::getConnection($connectionParams, $config); 
```

为了完成这项工作，我需要将 Doctrine 中的每个命名空间引用更改为例如：

```
namespace ext\Doctrine\DBAL;
use ext\Doctrine\Common\EventManager; 
```

在我看来，这是一个非常不雅的解决方案。

问题：有没有办法不改变 Doctrine 命名空间？是否有更好的策略来处理外部库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:14:36.447

更好的策略是使用库提供的命名空间。改变这一点将是非常不寻常的。

我猜你的主要问题实际上是因为自动加载。请记住，命名空间和目录不必相同。

只需让你的自动加载器更聪明一点，以便在 ext.js 中寻找外部库。您可以保留一个小的名称空间注册表，您可以在那里找到。

更好的是，开始使用[composer](http://getcomposer.org/)。

# c++ - ODBC 文档清晰度

> ID：13673519
> 
> 赞同：0
> 
> 时间：2012-12-02T20:29:05.763
> 
> 标签：c++, sql, c, function, odbc

我在使用 MSDN 的某些文档时遇到问题。我正在使用 C++（或 C，更确切地说）通过 ODBC 连接到 SQL Server 实例。[请参阅本文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms710188%28v=vs.85%29.aspx)底部的代码示例。

请注意，示例中有一个名为 AllocParamBuffer() 的函数。该文档描述了它应该做什么，但没有提供任何进一步的帮助。有人可以给我一些指示（不是双关语），关于我如何为这种特殊情况复制这个函数的定义，或者更好的是，证明它可以完成？我遇到了真正的障碍，我在其他地方找不到任何帮助。

任何帮助将不胜感激。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:08:02.247

你指的是：

```
// Call a helper function to allocate a buffer in which to store the parameter
   // value in character form. The function determines the size of the buffer from
   // the SQL data type and parameter size returned by SQLDescribeParam and returns
   // a pointer to the buffer and the length of the buffer.
   AllocParamBuffer(DataType, ParamSize, &PtrArray[i], &BufferLenArray[i]); 
```

所有这一切都是用 malloc 分配一些内存（因为后来的 free 调用）来存储输入参数（PtrArray[i]），然后设置缓冲区长度 BufferLenArray[i]（即为 PtrArrayp[i] 分配的内存量）。

我们只是猜测它是如何计算要分配多少内存的，因为在这种情况下所需的内存量将根据 SQLDescribeParameter 返回的 DataType 和 ParamSize 而有所不同。猜测工作归结为所有参数都绑定为 SQL_C_CHAR 并且其中一些可能不是字符串列，例如，它们可能是日期。

您需要做的就是分配一些内存，将指针分配给 PtrArray[i] 并设置在 BufferLenArray[i] 中分配的数量。

# shell - shell脚本中if语句的语法错误

> ID：13673520
> 
> 赞同：0
> 
> 时间：2012-12-02T20:29:09.470
> 
> 标签：shell

我已经收到这个错误大约一个小时了。它说：

if：表达式语法

当我尝试运行我的 shell 脚本时。我在代码中找不到问题，所以我将所有内容缩短为这个简单的条件：

```
if [ $# -eq 0 ]
then
echo "ERROR - no arguments given"
exit 1
fi 
```

我浏览了整个互联网，这种语法似乎完美无缺。那么为什么我仍然会收到 if 表达式语法错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:37:00.100

我认为你正在使用 csh/tcsh，所以你必须写

```
if ( $# == 0 ) then
  echo "ERROR - no arguments given"
  exit 1
endif 
```

（使用 bash 你的脚本在这里运行正常）

# c# - 用于调试的 C# 动态控制台可能吗？

> ID：13673523
> 
> 赞同：1
> 
> 时间：2012-12-02T20:29:16.397
> 
> 标签：c#, debugging, console, devtools

我正在创建一个程序，我真的很想创建一个快速的开发窗口，我可以在其中输入命令。我将尝试我想说的伪代码。

```
Console
 User Types "Add player"
 Takes the string and searches a case statement which says
 Carry out these action on Form1 
```

这是否可以创建一个控制台，我可以用它来操作我的 C# Form 程序？

我需要的唯一答案是“是的，要生成一个控制台来做这个......”我可以自己解决剩下的问题。或没有”

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:32:19.527

是的你可以。创建一个控制台应用程序，添加必要的引用和表单，然后在开头显示您的主表单。使用此代码，您可以更改表单上标签的内容：

**程序.cs：**

```
static void Main( string[ ] args ) {
    var f = new Form1( );

    var t = new Thread( delegate( object form ) {
        System.Windows.Forms.Application.Run( form as Form1 );
    } );

    t.Start( f );

    while ( true )
        f.SetText( Console.ReadLine( ) );

    t.Join( );
} 
```

**Form1.cs：**

```
public partial class Form1 : Form {
    public Form1( ) {
        InitializeComponent( );
        CheckForIllegalCrossThreadCalls = false;   // Note!!
    }

    public void SetText( string text ) {
        label1.Text = text;
    }
} 
```

我不知道将 CheckForIllegalCrossThreadCalls 设置为 false 的含义。

# webgl - 如何使用 DartVectorMath 创建透视矩阵？

> ID：13673529
> 
> 赞同：3
> 
> 时间：2012-12-02T20:29:45.717
> 
> 标签：webgl, dart

我正在查看 Learning WebGL 网站并移植他们的代码。我遇到了我想用[DartVectorMath](https://github.com/johnmccutchan/DartVectorMath)库生成的一行代码：

```
var pMatrix = createPerspectiveMatrix4(45.0, canvas.width/canvas.height, 0.1, 100.0); 
```

应该`createPerspectiveMatrix4`是什么？

我尝试了各种不同的东西，这是我尝试的最后一个：

```
 var zNear = 0.1;
  var zFar = 10000;
  double yTop = Math.tan(45.0 * Math.PI / 180.0 / 2.0) * zNear;
  double xRight = canvas.width / canvas.height * yTop;
  double zDepth = zFar - zNear;

  var row1 = new vec4(zNear / xRight, 0.0, 0.0, 0.0);
  var row2 = new vec4(0.0, zNear / yTop, 0.0, 0.0);
  var row3 = new vec4(0.0, 0.0, -(zFar + zNear) / zDepth, -(2 * zNear * zFar) / zDepth);
  var row4 = new vec4(0.0, 0.0, -1.0, 0.0);

  var pMatrix = new mat4(row1, row2, row3, row4); 
```

我只是在屏幕上看不到任何渲染。

完整源码如下：

```
import 'dart:html';
import 'dart:math' as Math;
import 'package:vector_math/vector_math_browser.dart';

main() {
  var canvas = query('#back-buffer');
  WebGLRenderingContext gl = canvas.getContext('experimental-webgl');
  gl.viewport(0, 0, canvas.width, canvas.height);

  gl.clearColor(0.0, 0.0, 0.0, 1.0);
  gl.enable(WebGLRenderingContext.DEPTH_TEST);

  // VERTEX SHADER.
  var vertexShader = gl.createShader(WebGLRenderingContext.VERTEX_SHADER);
  gl.shaderSource(vertexShader, """attribute vec3 aVertexPosition;

uniform mat4 uMVMatrix;
uniform mat4 uPMatrix;

void main(void) {
    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
}""");

  gl.compileShader(vertexShader);

  // FRAGMENT SHADER.
  var fragmentShader = gl.createShader(WebGLRenderingContext.FRAGMENT_SHADER);
  gl.shaderSource(fragmentShader, """precision mediump float;

void main(void) {
    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);
}""");

  gl.compileShader(fragmentShader);

  WebGLProgram shaderProgram = gl.createProgram();
  gl.attachShader(shaderProgram, vertexShader);
  gl.attachShader(shaderProgram, fragmentShader);
  gl.linkProgram(shaderProgram);
  gl.useProgram(shaderProgram);

  int vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");
  gl.enableVertexAttribArray(vertexPositionAttribute);

  WebGLUniformLocation pMatrixUniform  = gl.getUniformLocation(shaderProgram, "uPMatrix");
  WebGLUniformLocation mvMatrixUniform  = gl.getUniformLocation(shaderProgram, "uMVMatrix");

// init buffers
  WebGLBuffer triangleVertexPositionBuffer = gl.createBuffer();
  gl.bindBuffer(WebGLRenderingContext.ARRAY_BUFFER, triangleVertexPositionBuffer);
  var vertices = [
                  0.0,  1.0,  0.0,
                  -1.0, -1.0,  0.0,
                  1.0, -1.0,  0.0
                  ];
  Float32Array floa = new Float32Array.fromList(vertices);
  gl.bufferData(WebGLRenderingContext.ARRAY_BUFFER, floa, WebGLRenderingContext.STATIC_DRAW);

  gl.enable(WebGLRenderingContext.DEPTH_TEST);

  // draw  scene
  gl.viewport(0, 0, canvas.width, canvas.height);
  gl.clearColor(1.0, 0.0, 0.0, 1.0);
  gl.clear(WebGLRenderingContext.COLOR_BUFFER_BIT | WebGLRenderingContext.DEPTH_BUFFER_BIT);

  var zNear = 0.1;
  var zFar = 10000;
  double yTop = Math.tan(45.0 * Math.PI / 180.0 / 2.0) * zNear;
  double xRight = canvas.width / canvas.height * yTop;
  double zDepth = zFar - zNear;

  var row1 = new vec4(zNear / xRight, 0.0, 0.0, 0.0);
  var row2 = new vec4(0.0, zNear / yTop, 0.0, 0.0);
  var row3 = new vec4(0.0, 0.0, -(zFar + zNear) / zDepth, -(2 * zNear * zFar) / zDepth);
  var row4 = new vec4(0.0, 0.0, -1.0, 0.0);

  var pMatrix = new mat4(row1, row2, row3, row4);

  var mvMatrix = new mat4.translation(new vec3(-1.5, 0.0, -7.0));

  gl.bindBuffer(WebGLRenderingContext.ARRAY_BUFFER, triangleVertexPositionBuffer);
  gl.vertexAttribPointer(vertexPositionAttribute, 3, WebGLRenderingContext.FLOAT, false, 0, 0);
  gl.uniformMatrix4fv(pMatrixUniform, false, pMatrix.copyAsArray());
  gl.uniformMatrix4fv(mvMatrixUniform, false, mvMatrix.copyAsArray());
  gl.drawArrays(WebGLRenderingContext.TRIANGLES, 0, 3);

} 
```

那么，如何在 DartVectorMath 中创建透视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T04:42:15.480

见`makePerspective`在`src/common/opengl.dart`.

# opengl - 使用模型视图矩阵获取全局坐标

> ID：13673533
> 
> 赞同：0
> 
> 时间：2012-12-02T20:29:51.930
> 
> 标签：opengl, graphics, 3d

假设我有一个局部坐标，我想获得全局坐标。为此，我调用 gltranslatef(...) 和 glrotatef(..)。我想将当前矩阵乘以局部坐标以获得全局坐标。是否可以以这种方式提取全局坐标？

# python - 遍历列表时递增变量计数器

> ID：13673534
> 
> 赞同：2
> 
> 时间：2012-12-02T20:29:52.880
> 
> 标签：python, python-2.7

我有一个条件，我正在检查列表中的每个元素，如果条件变为真，我想增加几个变量之一中的计数器的值。这是我的例子：

```
for el in elements:
    if sum(x, el) < 5:
        .........DO SOMETHING: Increment variable age 
```

现在，如果我想在元素中增加与该 el 相关的变量，我该怎么做。因此，例如，如果 el 是年龄，然后我想增加一个年龄变量，这将如何完成？

我可以通过编写大量 switch 语句来做到这一点，但最 Pythonic 的方式是什么。

谢谢

编辑

我要做的是每个元素都是一个城市（Long，Lat）的一组坐标，对于每个元素，我都在计算与事件的距离。我将使用geopy。

现在每个元素都是坐标而不是城市名称。我想说如果事件距离纽约坐标小于 5 公里以增加纽约变量，或者距离伦敦 5 公里以增加伦敦变量。

希望这使它更清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T20:37:23.927

这是[列表理解](http://www.youtube.com/watch?v=pShL9DCSIUw)的情况：

```
[el if sum(x, el) < 5 else el + 1 for el in elements] 
```

编辑：从您的编辑中，我不确定您所描述的内容是否与您最初所说的相符，您的编辑内容更接近于这样的内容：

```
cities = {"London": (10, 15), "New York": (20, 50)}
def find_closest_city(location):
    ...

city_count = collections.Counter([find_closest_city(el) for el in elements]) 
```

# asp.net-mvc - 强制控制器的 mvc 路由

> ID：13673539
> 
> 赞同：1
> 
> 时间：2012-12-02T20:30:28.883
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, asp.net-mvc-controller

我在我的应用程序中定义了以下两条路线。

```
 routes.MapRoute(
             "ApplicationRoutes",
             "{language}-{country}/{userid}/{controller}/{action}/{id}",
            new { language="en" , country="gb",  id = UrlParameter.Optional }
        );

        routes.MapRoute(
             "Default",
             "{language}-{country}/{controller}/{action}/{id}",
            new { language = "en", country = "gb",  id = UrlParameter.Optional }
        ); 
```

第一条路线将捕获像这样的网址

*   zh-CN/11111/目标/列表
*   zh-CN/11111/目标/编辑/2

第二条路线是默认路线，将用于这样的事情

*   英文/帐户/登录
*   ETC

我的问题是我有某些控制器，如果它们是通过 applicationRoutes 路由来的，我想强制它们被调用。

例如，我想确保使用路由数据中的用户 ID 调用目标控制器。

我知道我可以在每个控制器操作中检查用户 ID 键是否存在，并且在路由数据中具有值。但这对我来说似乎并不优雅。

我也可以更具体地了解路线并执行以下操作：

```
 routes.MapRoute(
             "ApplicationRoutes",
             "{language}-{country}/{userid}/Targets/{action}/{id}",
            new { language="en" , country="gb", controller="targets", id = UrlParameter.Optional }
        ); 
```

但这不会在不提供用户 ID 值的情况下直接停止对 en-gb/Targets/List/ 的请求。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:38:08.977

您可以为 userid 参数创建限制。

```
 routes.MapRoute(
             "ApplicationRoutes",
             "{language}-{country}/{userid}/{controller}/{action}/{id}",
              new { language="en" , country="gb",  id = UrlParameter.Optional },
              new { userid =@"\d+" }); 
```

这将确保 userid 是一个有效的整数，否则下一个路由将用于处理请求。

# android - 为什么“onOptionItemSelected（MenuItem item）”不起作用？

> ID：13673547
> 
> 赞同：0
> 
> 时间：2012-12-02T20:30:59.743
> 
> 标签：android, menu

我已经在 android 中实现了菜单，其中包含两个菜单项“编辑”和“删除”。我可以看到我的菜单项，但是当我单击其中任何一个时，什么都没有发生。这是我的实现。

```
public boolean onOptionItemSelected(MenuItem item)
     {
      switch(item.getItemId())
      {
         case R.id.edit:
             Toast.makeText(MainActivity.this, "edit clicked", 5).show();
             return true;

         case R.id.delete:
             Toast.makeText(MainActivity.this, "delete clicked", 5).show();
             return true;
         default:
             return super.onOptionsItemSelected(item);
      } //end switch
 }//end method 
```

edit 和 delete 是 menu.xml 中项目的 id。我将不胜感激任何帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:58:39.440

将方法名称更改为 onOptionsItemSelected（Option 后带有 s）。

# javascript - 从表单 javascript 传递变量值

> ID：13673549
> 
> 赞同：7
> 
> 时间：2012-12-02T20:31:25.690
> 
> 标签：javascript, html, forms

假设我有一个如下所示的 HTML 表单，并希望将文本字段中的值传递给 JS 变量。

```
<form name="testform" action="" method="?"
<input type="text" name="testfield1"/>
<input type="text" name="testfield2"/>
</form> 
```

我之前只将值传递给 PHP 中的变量。在 javascript 中执行此操作时，我需要一个方法吗？主要问题**是，它是如何完成的？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:35:50.620

这里有几个例子：

Javascript：

```
document.getElementById('name_of_input_control_id').value; 
```

jQuery：

```
$("#name_of_input_control_id").val(); 
```

基本上，您使用 Javascript/jQuery 从 DOM 中提取输入控件的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:37:48.887

在“提交”中尝试以下操作：

```
var input = $("#testfield1").val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T20:43:38.227

答案都是正确的，但是如果您不将代码放入 document.ready 函数中，您可能会遇到问题......如果您的代码块在 html 部分之上，您将找不到任何带有 id 的输入字段，因为此时它没有存在...

```
document.addEventListener('DOMContentLoaded', function() {
   var input = document.getElementById('name_of_input_control_id').value;
}, false); 
```

jQuery

```
jQuery(document).ready(function($){
    var input = $("#name_of_input_control_id").val();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T20:45:37.070

如果您只是使用 Javascript 中的文本字段，您实际上并不需要一个`method`或一个属性`action`

像这样向表单添加一个`submit`按钮和一个处理程序，`onsubmit`

```
<form name="testform" onsubmit="return processForm(this)">
    <input type="text" name="testfield1"/>
    <input type="text" name="testfield2"/>
    <input type="submit"/>
</form> 
```

然后在你的Javascript中你可以有这个`processForm`功能

```
function processForm(form) {
    var inputs = form.getElementsByTagName("input");
    // parse text field values into an object
    var textValues = {};
    for(var x = 0; x < inputs.length; x++) {
        if(inputs[x].type != "text") {
            // ignore anything which is NOT a text field
            continue;
        }

        textValues[inputs[x].name] = inputs[x].value;
    }

    // textValues['testfield1'] contains value of first input
    // textValues['testfield2'] contains value of second input

    return false;  // this causes form to NOT 'refresh' the page
} 
```

# javascript - 打印出一个 javascript 变量（不显示？）

> ID：13673553
> 
> 赞同：1
> 
> 时间：2012-12-02T20:31:51.013
> 
> 标签：javascript, jquery

我想确保 javascript 变量在将其设置为 ruby​​ 变量时获得传递给它的正确值。

```
<script type="text/javascript" charset="utf-8">

   var test = <%= @test || 'null' %>;
   document.write(test);

</script> 
```

但是，似乎没有任何输出。我试过了`document.write("somethinganything")`，但我仍然没有看到任何输出。它应该出现在网页或终端上吗？我在两者中都找不到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T20:34:22.780

`document.write`打印到网页。您应该尝试使用`console.log`打印到终端。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T20:34:54.793

除非`document.write()`脚本块位于`<body>`.

一些较旧的浏览器将不支持这一点，如果脚本块在其中`<head>`，它将不会写入任何可见的内容。

请尝试以下解决方案之一：

```
// Append a text node to the end of your body
window.onload = function() {
    var txt = document.createTextNode(test);
    document.body.appendChild(txt); 
}; 
```

或者

```
// Log the text to your javascript console
console.log(test); 
```

或者

```
// Alert the text in a popup
window.alert(test); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T20:34:29.917

你必须写`console.log("test");`

# java - 在 Java 中对文件使用基于密码的加密

> ID：13673556
> 
> 赞同：5
> 
> 时间：2012-12-02T20:32:06.763
> 
> 标签：java, encryption

我正在尝试使用 Java 中的密码将一个文件的内容加密到另一个文件中。该文件被读取到一个字节数组，加密到另一个字节数组，然后写入新文件。不幸的是，当我尝试反转加密时，输出文件被解密为垃圾。

我强烈怀疑这个问题与每次使用相同的密码时生成相同的密钥有关。我编写了一种测试方法，只要生成密钥就将密钥转储到文件中。密钥以直接和编码形式记录。前者每次都是相同的，但后者总是由于某种原因而不同。

老实说，我对加密方法知之甚少，尤其是在 Java 中。我只需要适度安全的数据，并且加密不必承受来自任何拥有大量时间和技能的人的攻击。提前感谢任何对此有建议的人。

编辑：Esailija 非常友好地指出我总是用 ENCRYPT_MODE 设置密码。我使用布尔参数更正了问题，但现在出现以下异常：

javax.crypto.IllegalBlockSizeException：使用填充密码解密时，输入长度必须是 8 的倍数

在我看来，这听起来像是没有正确使用密码。我的印象是“PBEWithMD5AndDES”会将它散列成一个 16 字节的代码，这肯定是 8 的倍数。我想知道为什么密钥生成并被很好地用于加密模式，但是在尝试时它会抱怨在完全相同的条件下解密。

```
import java.various.stuff;

/**Utility class to encrypt and decrypt files**/
public class FileEncryptor {
    //Arbitrarily selected 8-byte salt sequence:
    private static final byte[] salt = {
        (byte) 0x43, (byte) 0x76, (byte) 0x95, (byte) 0xc7,
        (byte) 0x5b, (byte) 0xd7, (byte) 0x45, (byte) 0x17 
    };

    private static Cipher makeCipher(String pass, Boolean decryptMode) throws GeneralSecurityException{

        //Use a KeyFactory to derive the corresponding key from the passphrase:
        PBEKeySpec keySpec = new PBEKeySpec(pass.toCharArray());
        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
        SecretKey key = keyFactory.generateSecret(keySpec);

        //Create parameters from the salt and an arbitrary number of iterations:
        PBEParameterSpec pbeParamSpec = new PBEParameterSpec(salt, 42);

        /*Dump the key to a file for testing: */
        FileEncryptor.keyToFile(key);

        //Set up the cipher:
        Cipher cipher = Cipher.getInstance("PBEWithMD5AndDES");

        //Set the cipher mode to decryption or encryption:
        if(decryptMode){
            cipher.init(Cipher.ENCRYPT_MODE, key, pbeParamSpec);
        } else {
            cipher.init(Cipher.DECRYPT_MODE, key, pbeParamSpec);
        }

        return cipher;
    }

    /**Encrypts one file to a second file using a key derived from a passphrase:**/
    public static void encryptFile(String fileName, String pass)
                                throws IOException, GeneralSecurityException{
        byte[] decData;
        byte[] encData;
        File inFile = new File(fileName);

        //Generate the cipher using pass:
        Cipher cipher = FileEncryptor.makeCipher(pass, false);

        //Read in the file:
        FileInputStream inStream = new FileInputStream(inFile);
        decData = new byte[(int)inFile.length()];
        inStream.read(decData);
        inStream.close();

        //Encrypt the file data:
        encData = cipher.doFinal(decData);

        //Write the encrypted data to a new file:
        FileOutputStream outStream = new FileOutputStream(new File(fileName + ".encrypted"));
        outStream.write(encData);
        outStream.close();
    }

    /**Decrypts one file to a second file using a key derived from a passphrase:**/
    public static void decryptFile(String fileName, String pass)
                            throws GeneralSecurityException, IOException{
        byte[] encData;
        byte[] decData;
        File inFile = new File(fileName);

        //Generate the cipher using pass:
        Cipher cipher = FileEncryptor.makeCipher(pass, true);

        //Read in the file:
        FileInputStream inStream = new FileInputStream(inFile);
        encData = new byte[(int)inFile.length()];
        inStream.read(encData);
        inStream.close();

        //Decrypt the file data:
        decData = cipher.doFinal(encData);

        //Write the decrypted data to a new file:
        FileOutputStream target = new FileOutputStream(new File(fileName + ".decrypted.txt"));
        target.write(decData);
        target.close();
    }

    /**Record the key to a text file for testing:**/
    private static void keyToFile(SecretKey key){
        try {
            File keyFile = new File("C:\\keyfile.txt");
            FileWriter keyStream = new FileWriter(keyFile);
            String encodedKey = "\n" + "Encoded version of key:  " + key.getEncoded().toString();
            keyStream.write(key.toString());
            keyStream.write(encodedKey);
            keyStream.close();
        } catch (IOException e) {
            System.err.println("Failure writing key to file");
            e.printStackTrace();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T20:41:52.357

您正在使用`Cipher.ENCRYPT_MODE`两者，解密和加密。您应该`Cipher.DECRYPT_MODE`用于解密文件。

这已被修复，但您的布尔值是错误的。加密应该为真，解密应该为假。我强烈建议不要使用`false/true`作为函数参数，并始终使用 enum like `Cipher.ENCRYPT`... 继续

然后你正在加密到 .encrypted 文件，但试图解密原始的纯文本文件。

然后，您没有将填充应用于加密。我很惊讶这实际上必须手动完成，但[这里解释了填充](http://www.herongyang.com/Cryptography/DES-JDK-What-Is-PKCS5Padding.html)。填充方案 PKCS5 似乎在这里被隐式使用。

这是完整的工作代码，将加密文件写入`test.txt.encrypted`，将解密文件写入`test.txt.decrypted.txt`. 注释中解释了在加密中添加填充并在解密中删除它。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.security.GeneralSecurityException;
import java.util.Arrays;
import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.PBEKeySpec;
import javax.crypto.spec.PBEParameterSpec;

public class FileEncryptor {

    public static void main( String[] args ) {

        try {
            encryptFile( "C:\\test.txt", "password" );
            decryptFile( "C:\\test.txt", "password" );
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (GeneralSecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    //Arbitrarily selected 8-byte salt sequence:
    private static final byte[] salt = {
        (byte) 0x43, (byte) 0x76, (byte) 0x95, (byte) 0xc7,
        (byte) 0x5b, (byte) 0xd7, (byte) 0x45, (byte) 0x17 
    };

    private static Cipher makeCipher(String pass, Boolean decryptMode) throws GeneralSecurityException{

        //Use a KeyFactory to derive the corresponding key from the passphrase:
        PBEKeySpec keySpec = new PBEKeySpec(pass.toCharArray());
        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
        SecretKey key = keyFactory.generateSecret(keySpec);

        //Create parameters from the salt and an arbitrary number of iterations:
        PBEParameterSpec pbeParamSpec = new PBEParameterSpec(salt, 42);

        /*Dump the key to a file for testing: */
        FileEncryptor.keyToFile(key);

        //Set up the cipher:
        Cipher cipher = Cipher.getInstance("PBEWithMD5AndDES");

        //Set the cipher mode to decryption or encryption:
        if(decryptMode){
            cipher.init(Cipher.ENCRYPT_MODE, key, pbeParamSpec);
        } else {
            cipher.init(Cipher.DECRYPT_MODE, key, pbeParamSpec);
        }

        return cipher;
    }

    /**Encrypts one file to a second file using a key derived from a passphrase:**/
    public static void encryptFile(String fileName, String pass)
                                throws IOException, GeneralSecurityException{
        byte[] decData;
        byte[] encData;
        File inFile = new File(fileName);
        //Generate the cipher using pass:
        Cipher cipher = FileEncryptor.makeCipher(pass, true);

        //Read in the file:
        FileInputStream inStream = new FileInputStream(inFile);

        int blockSize = 8;
        //Figure out how many bytes are padded
        int paddedCount = blockSize - ((int)inFile.length()  % blockSize );

        //Figure out full size including padding
        int padded = (int)inFile.length() + paddedCount;

        decData = new byte[padded];

        inStream.read(decData);

        inStream.close();

        //Write out padding bytes as per PKCS5 algorithm
        for( int i = (int)inFile.length(); i < padded; ++i ) {
            decData[i] = (byte)paddedCount;
        }

        //Encrypt the file data:
        encData = cipher.doFinal(decData);

        //Write the encrypted data to a new file:
        FileOutputStream outStream = new FileOutputStream(new File(fileName + ".encrypted"));
        outStream.write(encData);
        outStream.close();
    }

    /**Decrypts one file to a second file using a key derived from a passphrase:**/
    public static void decryptFile(String fileName, String pass)
                            throws GeneralSecurityException, IOException{
        byte[] encData;
        byte[] decData;
        File inFile = new File(fileName+ ".encrypted");

        //Generate the cipher using pass:
        Cipher cipher = FileEncryptor.makeCipher(pass, false);

        //Read in the file:
        FileInputStream inStream = new FileInputStream(inFile );
        encData = new byte[(int)inFile.length()];
        inStream.read(encData);
        inStream.close();
        //Decrypt the file data:
        decData = cipher.doFinal(encData);

        //Figure out how much padding to remove

        int padCount = (int)decData[decData.length - 1];

        //Naive check, will fail if plaintext file actually contained
        //this at the end
        //For robust check, check that padCount bytes at the end have same value
        if( padCount >= 1 && padCount <= 8 ) {
            decData = Arrays.copyOfRange( decData , 0, decData.length - padCount);
        }

        //Write the decrypted data to a new file:

        FileOutputStream target = new FileOutputStream(new File(fileName + ".decrypted.txt"));
        target.write(decData);
        target.close();
    }

    /**Record the key to a text file for testing:**/
    private static void keyToFile(SecretKey key){
        try {
            File keyFile = new File("C:\\keyfile.txt");
            FileWriter keyStream = new FileWriter(keyFile);
            String encodedKey = "\n" + "Encoded version of key:  " + key.getEncoded().toString();
            keyStream.write(key.toString());
            keyStream.write(encodedKey);
            keyStream.close();
        } catch (IOException e) {
            System.err.println("Failure writing key to file");
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-29T15:24:38.057

鉴于 Java 中的一些新功能，这些是对 @Esailija 答案的一些改进。

通过使用 CipherInputStream 和 CipherOutputStream 类，代码的长度和复杂度大大降低。

我还使用 char[] 而不是 String 作为密码。

您可以使用 System.console().readPassword("input password: ") 将密码作为 char[] 获取，这样它就永远不是字符串。

```
public static void encryptFile(String inFileName, String outFileName, char[] pass) throws IOException, GeneralSecurityException {
    Cipher cipher = PasswordProtectFile.makeCipher(pass, true);
    try (CipherOutputStream cipherOutputStream = new CipherOutputStream(new FileOutputStream(outFileName), cipher);
            BufferedInputStream bis = new BufferedInputStream(new FileInputStream(inFileName))) {
        int i;
        while ((i = bis.read()) != -1) {
            cipherOutputStream.write(i);
        }
    }
}

public static void decryptFile(String inFileName, String outFileName, char[] pass) throws GeneralSecurityException, IOException {
    Cipher cipher = PasswordProtectFile.makeCipher(pass, false);
    try (CipherInputStream cipherInputStream = new CipherInputStream(new FileInputStream(inFileName), cipher);
            BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(outFileName))) {
        int i;
        while ((i = cipherInputStream.read()) != -1) {
            bos.write(i);
        }
    }
}

private static Cipher makeCipher(char[] pass, Boolean decryptMode) throws GeneralSecurityException {

    // Use a KeyFactory to derive the corresponding key from the passphrase:
    PBEKeySpec keySpec = new PBEKeySpec(pass);
    SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
    SecretKey key = keyFactory.generateSecret(keySpec);

    // Create parameters from the salt and an arbitrary number of iterations:
    PBEParameterSpec pbeParamSpec = new PBEParameterSpec(salt, 43);

    // Set up the cipher:
    Cipher cipher = Cipher.getInstance("PBEWithMD5AndDES");

    // Set the cipher mode to decryption or encryption:
    if (decryptMode) {
        cipher.init(Cipher.ENCRYPT_MODE, key, pbeParamSpec);
    } else {
        cipher.init(Cipher.DECRYPT_MODE, key, pbeParamSpec);
    }

    return cipher;
} 
```

# jquery - 使用ajax调用填充显示表

> ID：13673559
> 
> 赞同：0
> 
> 时间：2012-12-02T20:32:18.393
> 
> 标签：jquery, ajax, displaytag

我正在使用 portlet 和 spring MVC。我想通过 ajax 调用获取项目列表并将该列表用作 display:table 属性。

我使用这个 ajax 调用：

```
jQuery.ajax({ url:'<portlet:resourceURL id="recuperarDatosAF">
 </portlet:resourceURL>', data: {idExpediente:expediente}, type: 'POST',
  datatype:'json', success: function(data) { 
      alert(data); 
  } 
```

每次用户选择组合项时都会执行此调用。每次恢复都会不同的项目列表。

我的问题是：如何用我刚刚得到的列表生成可显示的表格？

有一种方法可以更新显示：在 jsp 中使用该列表定义的表？

我定义的显示检索 requestScope 的列表，但我想用 ajax 调用检索列表。

我的显示：表：

```
 <display:table id="docentes" name="${requestScope.docentesList}"                       
                                           htmlId="resultadosDocentesListTable"
                                           pagesize="4"
                                           class="displayTagTable"
                                           uid="docente"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T05:53:52.933

**我的问题是：如何用我刚刚得到的列表生成可显示的表格？**

根据我的经验，您的列表必须包含 json 数据的 Map，例如：

```
Map productMap = new HashMap();

    productMap.put("id", "1");
    productMap.put("name", "Coca Cola");                

    List<Product> productList = new ArrayList<Product>();
    productList.add(productMap);

    jsonWriter.object()
        .key("status").value(true)                   
        .key("pList").value(productList)
        .endObject(); 
```

pList 包含产品图。

**有一种方法可以更新显示：在 jsp 中使用该列表定义的表？**

是的，在我使用firebug检查显示表标签部分后，我发现显示表标签将变为普通的html表。所以在**ajax**中：

```
success: function(data){
    if(data.status == true){
        var strHtml='';                
        for(var i=0;i<data.pList.length;i++){
        strHtml+='<tr><td>'"+data.pList[i].name+"'</td></tr>';   
        }
    jQuery("table#docentes tbody").html(strHtml);
    }                   

}, 
```

和你的**显示标签**：

```
<display:table id="docentes" pagesize="4" class="displayTagTable" uid="docente">
    <display:column escapeXml="true" title="Product Name" >
    </display:column>                                                                                 
</display:table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:41:35.780

[http://jsfiddle.net/kVdZG/](http://jsfiddle.net/kVdZG/)

从 json 数据生成表的脚本，用这段代码替换 alert(data)，这里 data.scores 是我的数据

```
var data = { "scores" : [ ["3/1/2011", 610],["4/1/2011", 610],["5/1/2011", 610],["6/1/2011", 610], ["7/1/2011", 720], ["8/1/2011", 500], ["9/1/2011", 500] ] }

$(data.scores).each(function(index, element){
         $('#scores').append('<tr><td> '+element[0]+' </td> <td> '+element[1]+' </td></tr>');       
    }) 
```

# mobile - 用于移动设计的 Svg 图标字体

> ID：13673564
> 
> 赞同：0
> 
> 时间：2012-12-02T20:32:46.970
> 
> 标签：mobile, responsive-design

我应该使用 svg 图标进行响应式移动设计吗？因为视网膜显示。我读到对于标题或标题等小图标是个好主意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:40:41.683

你是在专门谈论 iOS - 你提到视网膜？我不知道这个平台，但 Android 默认不支持 SVG。相反，您创建了一组不同大小的不同图标。

[我推荐这个阅读](http://developer.android.com/training/multiscreen/screensizes.html "我推荐这篇文章")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:43:29.117

这对这件事来说是一本很好的读物。

[http://net.tutsplus.com/tutorials/why-arent-you-using-svg/](http://net.tutsplus.com/tutorials/why-arent-you-using-svg/)

基本上，这取决于您对实现的要求。如果您只想在 iOS 上的 Safari 上使用它？前进。快速而流畅。但是，如果您希望用户能够使用其他平台，如 Android、iOS 甚至 Windows Phone 上的不同浏览器，这不是最佳选择。

# c# - 开关盒实现

> ID：13673565
> 
> 赞同：-3
> 
> 时间：2012-12-02T20:32:49.693
> 
> 标签：c#, switch-statement

我向该站点发送 Get 请求，并根据响应我必须做 smthng。

```
 HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create("http://www.site.ru/sfdcsfs/");
req.AllowAutoRedirect = false;
req.Method = "GET";
req.CookieContainer = cookies;
req.UserAgent = "Opera/9.80 (Windows 7; U; en) Presto/2.9.168 Version/11.50";
req.ContentType = "application/x-www-form-urlencoded";
res1 = (HttpWebResponse)req.GetResponse();
res1.Close();
switch (res1)
{
    case res1.Headers["XcT"]: log("[+] ok");
    case res1.Headers["Location"].Contains("alreadymember"): log("[-] alreadymember");
    default: log("[-] bad");
} 
```

但我有错误

```
Error   1   A switch expression or case label must be a bool, char, string, integral, enum, or corresponding nullable type  C:\Users\asus\documents\visual studio 2010\Projects\OdGP\OdGP\Form1.cs  195 29  OdGP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:35:08.367

switch 语句中只能使用某些类型，其中之一是字符串。
你不应该忘记 switch 语句中的 break

```
switch (res1.Headers["XcT"].ToString())
{
    case "[+] ok":
       log("[+] ok");
       break;
    default: log("[-] bad");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:03:30.227

我建议您阅读有关[switch](http://msdn.microsoft.com/en-us/library/06tc147t%28v=vs.71%29.aspx)语句的文档，因为这里有几个错误。

正如错误所说，您的 switch 表达式`res1`具有`HttpWebResponse`不允许的类型。

`case`标签必须是编译时常量，`res1.Headers["XcT"]`也不允许使用任意表达式。

不允许从标签之间跌落。所有案例标签（和`default`标签）都必须有 a `break`、 a`return`或抛出异常。此规则的例外是您可能有多个执行相同语句块的标签，如下所示：

```
int i = 0;
switch (i) 
{
  case 0:
  case 1:
   Console.WriteLine(i); break;
  default: break;
} 
```

# google-app-engine - DatastoreService 我不明白它在哪里保存数据？

> ID：13673567
> 
> 赞同：0
> 
> 时间：2012-12-02T20:32:54.837
> 
> 标签：google-app-engine

我有 Datastore 类，我使用这个类来尝试 GCM 。我不明白数据的保存位置（注册 ID），但我可以在重新启动我的 IDE（Eclipse）后检索它

谢谢朋友

```
private static final DatastoreService datastore =
    DatastoreServiceFactory.getDatastoreService();

private Datastore() {
  throw new UnsupportedOperationException();
}

/**
 * Registers a device.
 *
 * @param regId device's registration id.
 */

public static void register(String regId) {
  logger.info("Registering " + regId);
  Transaction txn = datastore.beginTransaction();
  try {
    Entity entity = findDeviceByRegId(regId);
    if (entity != null) {
      logger.fine(regId + " is already registered; ignoring.");
      return;
    }
    entity = new Entity(DEVICE_TYPE);
    entity.setProperty(DEVICE_REG_ID_PROPERTY, regId);
    datastore.put(entity);
    txn.commit();
    } finally {
    if (txn.isActive()) {
      txn.rollback();
    }
  }
}

/**
 * Gets all registered devices.
 */

public static List<String> getDevices() {
  List<String> devices;
  Transaction txn = datastore.beginTransaction();
  try {
    Query query = new Query(DEVICE_TYPE);
    Iterable<Entity> entities =
        datastore.prepare(query).asIterable(DEFAULT_FETCH_OPTIONS);
    devices = new ArrayList<String>();
    for (Entity entity : entities) {
      String device = (String) entity.getProperty(DEVICE_REG_ID_PROPERTY);
      devices.add(device);
    }
    txn.commit();
  } finally {
    if (txn.isActive()) {
      txn.rollback();
    }
  }
  return devices;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T16:50:42.140

当您在生产服务器中时，数据存储在 GAE 数据存储中，或者当您在本地开发环境中时，数据存储在本地文件中 ( [https://appengine.google.com/](https://appengine.google.com/) --> application --> Datastore Indexes)。在任何情况下，您都可以从管理控制台查看您的应用程序中存储了哪些数据。对于开发环境，您可以查看

localhost:8888/_ah/admin（来自您的浏览器）

# simulink - 用于 Xilinx Co 仿真的系统生成器配置

> ID：13673569
> 
> 赞同：1
> 
> 时间：2012-12-02T20:33:04.827
> 
> 标签：simulink, xilinx, system-generator

我正在使用 2012a 或 2011b 以及 System Generator 13.1 在 simulink 中进行协同仿真。在为要加载到 zynq fpga 的硬件构建库块时，我将系统生成器配置为“硬件 Co-Sim”，通过此步骤一切正常。但是，在仿真的simulink/pc端，我还没有找到任何关于如何配置的好资源。 **我是否正确假设它也应该设置为硬件 co-sim 而不是其他设置（HDL 网表）或类似的东西？**

目前，系统似乎可以正常加载块，但是缺少 jtag 库，不确定这是 sysgen 问题，还是软件版本问题。我的理解是 sysgen 在 2012a 仍处于测试阶段。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T09:03:35.127

是的，它应该设置为硬件协同仿真（你的板->连接类型）。当您开始模拟时，会进行板的配置。（或者您可以使用 Impact 手动对其进行编程，然后在块属性中检查“跳过配置”）。

# c# - 从目录中的文件中读取 mp3 标签

> ID：13673572
> 
> 赞同：0
> 
> 时间：2012-12-02T20:34:00.423
> 
> 标签：c#

我正在使用以下 API [https://gist.github.com/1285901](https://gist.github.com/1285901)

到目前为止我有这段代码，但是当它尝试读取标签时，它们都返回空白（我的标签是指艺术家信息等）

```
using System;
using System.IO;
using Microsoft.WindowsAPICodePack.Shell;
using Microsoft.WindowsAPICodePack;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Files();
            Console.Read();
        }
        public static void Files()
        {
            FileInfo fi = new FileInfo(@"C:\Users\santised\Desktop\music\");
            DirectoryInfo di = fi.Directory;
            FileSystemInfo[] fsi = di.GetFiles();
            foreach (FileSystemInfo info in fsi)
            {
                Console.Write(info.Name.Replace(".mp3", "") + " Tags: " + Tags(@"C:\Users\santised\Desktop\music\" + info.Name) + "\r\n");
            }
        }
        public static String Tags(String fileName)
        {
            if (File.Exists(fileName))
            {
                var file = new FileInfo(fileName);
                String returnval =  String.Join("; ", file.GetTags()); // .GetTags() is from the api on gist hub
                return returnval;
            }
            return "None;";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:25:00.687

你可以使用 taglib-sharp

从[这里下载](http://download.banshee.fm/taglib-sharp/)

然后尝试

```
var file = TagLib.File.Create(address);
              var t1 =  file.Tag.Copyright;
              var t2 =  file.Tag.Album;
              var t3 =  file.Tag.AlbumArtists;
              var t4 =  file.Tag.Title;
              var t5 =  file.Tag.Comment ;
              var t6 =  file.Tag.Composers ;
              var t7 =  file.Tag.Conductor ;
              var t8 =  file.Tag.Grouping;
              var t9 =  file.Tag.Artists ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:08:01.350

您使用的库检索归属于 Windows 中文件的标签：它不检索 MP3 元数据 (ID3) 标签。您将需要找到一个能够读取 ID3 标签的库，例如[TagLib Sharp](http://www.novell.com/products/linuxpackages/opensuse11.1/taglib-sharp.html)。

# ajax - 所有网页的通用 silverlight 对象

> ID：13673573
> 
> 赞同：1
> 
> 时间：2012-12-02T20:34:06.020
> 
> 标签：ajax, asp.net-mvc, silverlight

在我的 Web 项目中，我希望我的项目中的所有网页都通用全局 Silverlight 控件（音乐播放器）。当用户单击超链接时（想要更改 Web 应用程序中的视图），我不想用 Silverlight 控件刷新所有视图，而只刷新部分视图。有些人认为就像在[grooveshark.com](http://grooveshark.com)中一样。我认为对于我项目中的所有视图，我使用 PartialViews 并使用 ajax 加载它们（这是个好主意？也许有人有更好的主意？）但我有问题。如果我们不是从 ajax 调用操作，而是在 Web 浏览器中写入地址，我只会得到部分视图而没有共享布局。同样在使用 ajax 加载部分视图并在浏览器中单击返回后，我已经更新了浏览器中的地址，但没有更新视图（视图不渲染）。

对我来说最重要的是在我的项目中的所有页面都有全局silverlight对象，并且在更改视图期间不要重新加载silverlight控件。

任何想法如何做到这一点？

# javascript - IE 删除使用 javascript 创建的选项标签

> ID：13673577
> 
> 赞同：3
> 
> 时间：2012-12-02T20:34:26.207
> 
> 标签：javascript, internet-explorer, cross-browser, innerhtml

所以我有以下代码，它适用于我迄今为止测试过的所有浏览器，除了 IE

```
var array = eval( '(' + xmlHttp.responseText + ')' );
var html = '';

for(var key in array)
{
    html += '<option value="' + key  + '">' +array[key] + '</option>';
}
alert(html);
document.getElementById('countries').innerHTML = html; 
```

问题出在`.innerHTML`. 警报按应有的方式打印数据，但内部剥离了标签，我最终得到了连续的单词。

那么，有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T20:39:40.213

这是一个已知问题， IE不允许您`.innerHTML`在.`option``select`

您应该改为使用 DOM 方法创建元素。

```
var fragment = document.createDocumentFragment();

for(var key in array) {
    var opt = fragment.appendChild(document.createElement("option"));
    opt.value = key; 
    opt.text = array[key];
}

document.getElementById('countries').appendChild(fragment); 
```

如果`array`是一个实际的数组，则在 JavaScript 中使用`for`而不是。`for-in`

如果您需要清空第`select`一个，您可以使用`.innerHTML = ""`，或者更好地使用循环：

```
var sel = document.getElementById('countries');
while (sel.firstChild)
    sel.removeChild(firstChild);

sel.appendChild(fragment); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T20:40:52.030

```
var select = document.getElementById('countries'); // assuming this is your <select>
for (var key in array) {
    var option = document.createElement('option');
    option.value = key;
    option.text = array[key];
    select.appendChild(option);
} 
```

# php - 梨邮件功能不发送电子邮件

> ID：13673582
> 
> 赞同：1
> 
> 时间：2012-12-02T20:35:45.240
> 
> 标签：php, apache, email, pear

我对以下代码有疑问，我无法弄清楚。

我将这段代码与 VALID 值一起使用，但它不会向收件人发送任何电子邮件......

```
<?php
include("Mail.php");
/* mail setup recipients, subject etc */
$recipients = "feedback@yourdot.com";
$headers["From"] = "user@somewhere.com";
$headers["To"] = "feedback@yourdot.com";
$headers["Subject"] = "User feedback";
$mailmsg = "Hello, This is a test.";
/* SMTP server name, port, user/passwd */
$smtpinfo["host"] = "smtp.mycorp.com";
$smtpinfo["port"] = "25";
$smtpinfo["auth"] = true;
$smtpinfo["username"] = "smtpusername";
$smtpinfo["password"] = "smtpPassword";
/* Create the mail object using the Mail::factory method */
$mail_object =& Mail::factory("smtp", $smtpinfo);
/* Ok send mail */
$mail_object->send($recipients, $headers, $mailmsg);
?> 
```

谁能帮助我为什么不发送电子邮件，或者可能是什么问题？

# android - 如何处理作为 Horizo ntalScrollView 一部分的 RelativeLayout 上的 onClick

> ID：13673586
> 
> 赞同：1
> 
> 时间：2012-12-02T20:36:20.513
> 
> 标签：android, touch-event, horizontalscrollview

我在 Horizo​​ntalScrollView 中有 RelativeLayouts。当用户单击其中一个布局（或其任何子布局）时，我需要更改某个 RelativeLayout 的背景颜色并获取其 ID 以进行进一步处理。我看到这可以通过 DuplicateParentState 或 onTouchEvent 来完成。推荐哪种方式？

按照建议编辑 XML 文件后的我的 XML 文件：

```
<RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
            <youme.appyoume.com.ExDialog>

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:layout_marginTop="20dp"
                android:clickable="true"
                android:duplicateParentState="true"
                android:onClick="onClick"
                android:src="@drawable/ic_launcher" />

            <EditText
                android:id="@+id/TextView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="20dp"
                android:layout_marginTop="20dp"
                android:layout_weight="1"
                android:duplicateParentState="true"
                android:ems="10"
                android:focusable="false"
                android:focusableInTouchMode="false"
                android:inputType="textMultiLine"
                android:text="text" >

                <requestFocus />
            </EditText>
            </youme.appyoume.com.ExDialog>
        </RelativeLayout> 
```

谢谢，西蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:08:11.263

如果您想使用您在 xml 中创建的自定义类，您只需使用对象的整个根名称。因此，例如，如果您在

```
com.your.package.customButton 
```

你会写在你的xml中

```
<RelativeLayout
   ...layoutstuff config>

  <com.your.package.customButton
    ...customButton layout config/>

</RelativeLayout> 
```

如果您将相对布局子类化，您将像这样使用它

```
<youme.appyoume.com.ExDialog
    ...layout setup stuff>

    <Button
     ...button setup stuff
    />

 </youme.appyoume.com.ExDialog> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:02:15.250

您始终可以使用 setTag 和 getTag 为其分配一个标签以供将来参考，只需使用 setOn Click Listener 并将您需要发生的任何事情放在那里

# java - 在 JPanel 周围移动 JLabel

> ID：13673587
> 
> 赞同：2
> 
> 时间：2012-12-02T20:36:26.367
> 
> 标签：java, swing, drag-and-drop, jlabel

我有一个 JPanel，上面有 2 个以上的 JLable，我希望能够抓取一个标签，然后将其移动到 JPanel 上的不同位置。我怎样才能做到这一点？我唯一能找到的就是将标签从组件“A”移动到组件“B”，而不是在面板上移动它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:21:21.723

开始玩这个：

```
public class ComponentDragger extends MouseAdapter {

     private Component target;

    /**
     * {@inheritDoc}
     */
    @Override
    public void mousePressed(MouseEvent e) {
        Container container = (Container) e.getComponent();
        for (Component c : container.getComponents()) {
            if (c.getBounds().contains(e.getPoint())) {
                target = c;
                break;
            }
        }
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public void mouseDragged(MouseEvent e) {
        if (target != null) {
            target.setBounds(e.getX(), e.getY(), target.getWidth(), target.getHeight());
            e.getComponent().repaint();
            }
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public void mouseReleased(MouseEvent e) {
        target = null;
    }

    public static void main(String[] args) {
        JLabel label = new JLabel("Drag Me");
        JPanel panel = new JPanel();
        panel.add(label);
        ComponentDragger dragger = new ComponentDragger();
        panel.addMouseListener(dragger);
        panel.addMouseMotionListener(dragger);
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setSize(1024, 768);
        f.add(panel);
        f.setVisible(true);
        panel.setLayout(null);
        f.setState(Frame.MAXIMIZED_BOTH);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T21:24:19.003

这是另一个示例，其中 MouseListener 和 MouseMotionListener 位于 JLabels 本身上。为此，它需要知道鼠标在屏幕上的位置与最初按下鼠标时它在屏幕上的初始位置。

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.Random;

import javax.swing.*;
import javax.swing.border.Border;
import javax.swing.border.EmptyBorder;
import javax.swing.border.LineBorder;

public class MovingLabels {
   private static final int PREF_W = 800;
   private static final int PREF_H = 600;

   private static void createAndShowGui() {
      Random random = new Random();
      final JPanel panel = new JPanel();

      Color[] colors = {Color.red, Color.orange, Color.yellow, Color.green, Color.blue, Color.cyan};
      panel.setPreferredSize(new Dimension(PREF_W, PREF_H)); // sorry kleopatra
      panel.setLayout(null);

      MyMouseAdapter myMouseAdapter = new MyMouseAdapter();

      for (int i = 0; i < colors.length; i++) {
         Color c = colors[i];
         JLabel label = new JLabel("Label " + (i + 1));
         Border outsideBorder = new LineBorder(Color.black);
         int eb = 10;
         Border insideBorder = new EmptyBorder(eb, eb, eb, eb);
         label.setBorder(BorderFactory.createCompoundBorder(outsideBorder , insideBorder));
         label.setSize(label.getPreferredSize());
         label.setBackground(c);
         label.setOpaque(true);
         int x = random.nextInt(PREF_W - 200) + 100;
         int y = random.nextInt(PREF_H - 200) + 100;
         label.setLocation(x, y);
         label.addMouseListener(myMouseAdapter);
         label.addMouseMotionListener(myMouseAdapter);
         panel.add(label);
      }

      JFrame frame = new JFrame("MovingLabels");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(panel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class MyMouseAdapter extends MouseAdapter {

   private Point initialLoc;
   private Point initialLocOnScreen;

   @Override
   public void mousePressed(MouseEvent e) {
      Component comp = (Component)e.getSource();
      initialLoc = comp.getLocation();
      initialLocOnScreen = e.getLocationOnScreen();
   }

   @Override
   public void mouseReleased(MouseEvent e) {
      Component comp = (Component)e.getSource();
      Point locOnScreen = e.getLocationOnScreen();

      int x = locOnScreen.x - initialLocOnScreen.x + initialLoc.x;
      int y = locOnScreen.y - initialLocOnScreen.y + initialLoc.y;
      comp.setLocation(x, y);
   }

   @Override
   public void mouseDragged(MouseEvent e) {
      Component comp = (Component)e.getSource();
      Point locOnScreen = e.getLocationOnScreen();

      int x = locOnScreen.x - initialLocOnScreen.x + initialLoc.x;
      int y = locOnScreen.y - initialLocOnScreen.y + initialLoc.y;
      comp.setLocation(x, y);
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T21:30:45.737

您可能会因为标签本身而得到它。尝试观察面板的坐标。它应该工作

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-02T22:18:29.927

这是我想要的：

```
public class LayerItem extends JLabel{

    protected int lblYPt = 0;

    public LayerItem(JPanel layers){
        this.addMouseListener(new MouseAdapter(){
            @Override
             public void mousePressed(MouseEvent evt){
                 lblMousePressed(evt);
             }
        });

        this.addMouseMotionListener(new MouseAdapter(){
            @Override
            public void mouseDragged(MouseEvent evt){
                lblMouseDragged(evt);
            }
        });
    }

    public void lblMousePressed(MouseEvent evt){
        lblYPt = evt.getY();
    }

    public void lblMouseDragged(MouseEvent evt){
        Component parent = evt.getComponent().getParent();
        Point mouse = parent.getMousePosition();
        try{
            if(mouse.y - lblYPt >= 30){
                this.setBounds(0, mouse.y - lblYPt, 198, 50);
            }
        }catch(Exception e){
        }
    }
} 
```

# jquery - jQuery post 表单代码未通过无法正常工作

> ID：13673589
> 
> 赞同：0
> 
> 时间：2012-12-02T20:36:28.573
> 
> 标签：jquery, ajax, post

```
 function send_quick_pm() {
    $.post('/privmsg', {
        'username%5B%5D' : document.getElementById('quick_pm_username').value,
        subject : document.getElementById('quick_pm_subject').value,
        message : document.getElementById('quick_pm_message').value,
        folder : 'inbox',
        mode : 'post',
        post : 1
    }, function(r) {
      alert('PM is sent!');
    });
  } 
```

这就是我正在使用的代码，这是我正在使用的标记-

```
<form id="privatemessage" class="newmessage">
  <input id="quick_pm_username" placeholder="Message To:" type="text" class="usernameinput"/>
    <input id="quick_pm_subject" placeholder="Subject:" onkeypress="if (event.keyCode==13){return false}" maxlength="64" type="text" class="usernameinput"/>
      <textarea id="quick_pm_message" class="noThis" placeholder="Type your message here..." >     
      </textarea>
   </div>
 <div id="bottombuttons">
   <span class="button">
     <button onClick="send_quick_pm();" class="submitbutton uiButton uiButtonConfirm uiButtonLarge">Submit</button>
    </form>
      <button class="submitbutton cancelButton uiButton uiButtonConfirm uiButtonLarge">Cancel</button>
  </span>
 </div> 
```

标记可能是错误的，这是我编写代码使其看起来应该的唯一方法。

[http://jsfiddle.net/n9eNe/](http://jsfiddle.net/n9eNe/)

任何人都可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:51:22.130

添加`type="button"`到您的`<button>`元素。

```
<button type="button" onClick="send_quick_pm();" class="submitbutton uiButton uiButtonConfirm uiButtonLarge">Submit</button>
<button type="button" class="submitbutton cancelButton uiButton uiButtonConfirm uiButtonLarge">Cancel</button> 
```

如果不指定，则默认为`type="submit"`. 这将导致您的表单提交，进而导致页面被刷新。这将阻止您查看`send_quick_pm`函数的结果。

* * *

此外，您*确实*应该将结束表单标记 ( `</form>`) 移到末尾。正如您在此处所做的那样，重叠/交错元素不会带来任何好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:54:58.023

您可以通过添加 preventDefault 来阻止提交表单。

正如@Lee 指出的那样，修复标记！

[http://jsfiddle.net/n9eNe/4/](http://jsfiddle.net/n9eNe/4/)

```
$("#privatemessage").on("submit", function(e){
    $.post('/privmsg', {
        'username%5B%5D' : document.getElementById('quick_pm_username').value,
        subject : document.getElementById('quick_pm_subject').value,
        message : document.getElementById('quick_pm_message').value,
        folder : 'inbox',
        mode : 'post',
        post : 1},
        function(r) {
          alert('PM is sent!');
        });

    e.preventDefault();
}); 
```

# c++ - 计算给定班级的人数

> ID：13673590
> 
> 赞同：0
> 
> 时间：2012-12-02T20:36:37.253
> 
> 标签：c++

如何创建一个计算活着的人数的a，如果我有10个人，它应该计算活着的人数，在这个例子中人应该是对象，假设我在下面有`class`这样的`constructor``class man`

```
class man{

     private:
     string name;

   man(string name=""){
     cout<<"there 10 people alive"<<endl;

~man(){}
};
int main(){

} 
```

我对如何去做感到困惑，我真的需要一个简单的例子我想使用 set 和 get 方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:47:33.947

理智的版本是将您的`man`对象存储在一个集合中，例如`std::vector`. 从此`std::vector`，您可以`size`在向量上使用来获取其中包含的项目数。

否则，请使用在这种情况下没有意义的解决方案，即存储一个在 中增加而在 . 中减少的`static`变量。`constructor``destructor`

顺便说一句，你的`man`班级有一些错误，`constructor`是私人的，你缺少括号......这是你正在寻找的简单版本：

```
class man
{
private:
    std::string mName;
public:
    man(std::string name="") : mName(name)
    {
    }

    const std::string& GetName() const
    {
        return mName;
    }
};

int main(int argc, char *argv[])
{
    man Bob = man("Bob");
    man Jimmy = man("Jimmy");

    std::vector<man> men; // This will copy the man object, might want to consider using pointers
    men.push_back(Bob);
    men.push_back(Jimmy);

    std::cout << "There is " << men.size() << " men." << std::endl;

    std::cout << "Known men are:" << std::endl;
    for(std::vector<man>::const_iterator itor = men.begin(); itor != men.end(); ++itor)
    {
        std::cout << itor->GetName() << std::endl;
    }

    // You could also iterate using something like for(unsigned int i = 0; i < men.size(); ++i)
} 
```

**编辑**：

如果您要使用静态变量，让我们添加如何处理它......请参阅以下场景（我折叠了大部分括号以使其更短）

请参阅以下代码：

```
class man
{
private:
    static unsigned int sCount;
    std::string mName;
public:
    man(std::string name="") : mName(name) { ++sCount; }
    ~man() { --sCount; }
    const std::string& GetName() const { return mName; }
    static unsigned int Count() { return sCount; }
};

unsigned int man::sCount = 0;

int main(int argc, char *argv[])
{
    man Bob = man("Bob");
    man Jimmy = man("Jimmy");
    std::cout << "There is " << man::Count() << " men" << std::endl;
    std::vector<man> men; // This will copy the man object, might want to consider using pointers
    men.push_back(Bob);
    men.push_back(Jimmy);
    std::cout << "There is " << man::Count() << " men" << std::endl;
} 
```

输出将是

```
There is 2 men
There is 1 men 
```

等等……**什么？！？**我们在哪里失去了一个人？好吧，这发生在向量调整大小时，因为我们没有定义 a `copy constructor`，编译器为我们做了，但编译器不知道我们想要递增`sCount`，所以当向量调整大小时，会创建新对象，旧对象已损坏，并且`sCount`没有正确更新。

通过将我们的`man`类更改为：

```
class man
{
private:
    static unsigned int sCount;
    std::string mName;
public:
    man(std::string name="") : mName(name) { ++sCount; }
    man(const man& in_man) : mName(in_man.mName) { ++sCount; }
    ~man() { --sCount; }
    const std::string& GetName() const { return mName; }
    static unsigned int Count() { return sCount; }
}; 
```

我们现在有：

```
There is 2 men
There is 4 men 
```

但是**为什么？！？**. `man`堆栈上有 2 个对象，`Bob`并且`Jimmy`. 然后有这些对象的 2 个**副本**`std::vector<man> men`，因为向量包含“类型的对象`man`”。

如果我们将其更改为指针：

```
std::vector<man*> men; 
men.push_back(&Bob);
men.push_back(&Jimmy); 
```

我们现在有以下输出，这是我们正在寻找的：

```
There is 2 men
There is 2 men 
```

希望这可以为您解决问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:47:42.857

使用`static`类字段来计算人数。

此类变量在给定类的所有对象之间共享，因此在构造函数中增加它并在析构函数中减少将计入“人”。

# java - 在Java sql中添加多个Prepared Statements

> ID：13673595
> 
> 赞同：1
> 
> 时间：2012-12-02T20:36:58.550
> 
> 标签：java, sql, string, batch-file, prepared-statement

我有多个要同时执行的 SQL 准备语句。到目前为止，我一直在使用一个准备好的语句方法，它或多或少像这样：

```
 public PreparedStatement createWordEntry(Connection c, String word, String word2, int num) throws SQLException{
        PreparedStatement entry = c.prepareStatement("INSERT INTO table VALUES(?,?,?)");
        entry.setString(1, word);
        entry.setString(2, word2);
        entry.setInt(3,num);
        return entry;
    } 
```

最初，我尝试将它们添加到向量/数组并一次执行一个，但由于结果集和索引的复杂性，我不断收到“jdbc4.MySQLNonTransientConnectionException：语句关闭后不允许操作”

然后我考虑将所有语句添加到一个批处理中并立即执行。当然， addBatch() 需要一个字符串而不是 PreparedStatement 作为参数。当我在这个网站上搜索时，我找到了这个答案：[如何在 Java 中“优雅地”生成字符串？](https://stackoverflow.com/questions/5803600/how-to-generate-string-elegantly-in-java)这建议构建和格式化字符串以添加到批处理中，从而使代码容易受到 SQL 注入攻击。

那么，有没有替代这两种方法来一次执行多个查询呢？如果没有，以上哪个更可取，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:40:18.377

有多种`addBatch`方法。

您应该以与您相同的方式设置参数，然后使用[void addBatch()](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#addBatch%28%29)声明的`PreparedStatement`.

# php - 保护我的 php 脚本/mysql 查询免受 SQL 注入？

> ID：13673596
> 
> 赞同：-4
> 
> 时间：2012-12-02T20:36:59.260
> 
> 标签：php, mysql, sql-injection

> **可能重复：**
> [防止 SQL 注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

我刚刚意识到我用来拉取 mySQL 数据并将其显示在网站上的 php 脚本极易受到 SQL 注入攻击。使用哪些实践来防止这些攻击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:38:13.227

用来`mysqli_real_escape_string`逃避任何事情是你应该做的最少的事情。

您可能还想研究使用准备好的语句。

在这里阅读更多：http: [//php.net/manual/en/security.database.sql-injection.php](http://php.net/manual/en/security.database.sql-injection.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:04:32.063

对您帖子的所有评论都是很好的建议。我个人更喜欢通过[PHP 的 PDO](http://php.net/manual/en/book.pdo.php)使用准备好的语句。

您从用户那里获得的每个参数（无论是直接的还是间接的），您从未明确设置的变量中插入查询的每个值等，都应该使用准备好的语句插入到您的查询中。没有例外。更有经验的开发人员可以摆脱一些例外，但我建议永远不要例外。

有关示例，请参阅PHP 文档中的[PDO::prepare](http://php.net/manual/en/pdo.prepare.php)。

# c++ - 从文件中解析原始数据的最快和最有效的方法

> ID：13673598
> 
> 赞同：1
> 
> 时间：2012-12-02T20:36:59.467
> 
> 标签：c++, performance, multiplatform

我正在做一些项目，我想知道哪种方式最有效地从文件中读取大量数据（我说的是 100 行到大约 30 亿行的文件，可以多考虑）。读取后，数据将存储在结构化数据集中（`vector<entry>`其中“条目”定义结构化行）。

此文件的结构化行可能如下所示： `string int int int string string` 它也以适当的平台结尾，`EOL`并以 TAB 分隔

我希望完成的是：

1.  将文件读入内存 ( `string`) 或`vector<char>`
2.  从我的缓冲区中读取原始数据并将其格式化为我的数据集。

我需要考虑内存占用并具有快速的解析率。我已经在避免使用，`stringstream`因为它们似乎太慢了。

我还通过使用以下方法避免对我的文件进行多次 I/O 调用：

```
// open the stream
std::ifstream is(filename);

// determine the file length
is.seekg(0, ios_base::end);
std::size_t size = is.tellg();
is.seekg(0, std::ios_base::beg);

// "out" can be a std::string or vector<char>
out.reserve(size / sizeof (char));
out.resize(size / sizeof (char), 0);

// load the data
is.read((char *) &out[0], size);

// close the file
is.close(); 
```

我曾想过将这个巨大的`std::string`然后逐行循环，我会将行信息（字符串和整数部分）提取到我的数据集行中。有没有更好的方法来做到这一点？

编辑：此应用程序可以在 32 位、64 位计算机上运行，​​或者在超级计算机上运行更大的文件。

任何建议都非常受欢迎。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:49:18.330

一些随意的想法：

*   在开始时使用 vector::resize() （你这样做了）
*   一次读取大块文件数据，至少 4k，最好是 256k。将它们读入内存缓冲区，将该缓冲区解析为您的向量。
*   不要一次读取整个文件，这可能会导致不必要的交换。
*   sizeof(char) 始终为 1 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:44:21.443

虽然我不能代表具有 3 条演出线路的超级计算机，但您在台式机的内存中将无处可去。

我认为您应该首先尝试弄清楚对该数据的所有操作。您应该尝试将所有算法设计为按顺序运行。如果您需要随机访问，您将一直进行交换。这种算法设计将对您的数据模型产生很大影响。

所以不要从读取所有数据开始，仅仅因为这是一个简单的部分，而是设计整个系统时清楚地了解整个处理过程中内存中的数据。

* * *

**当您在流上一次运行**
中进行所有处理并分阶段分离数据处理（读取 - 预处理 - ... - 写入）时进行更新，您可以有效地利用多线程。

 *** * *

最后

*   无论您想在数据循环中做什么，都尽量保持循环次数最少。平均肯定你可以在读取循环中做。
*   立即制作一个您期望的大小的测试文件在大小和时间上是最坏的情况两种不同的方法

.

```
time
loop
    read line from disk
time
loop
    process line (counting words per line)
time
loop
    write data (word count) from line to disk
time 
```

相对。

```
time
loop
    read line from disk
    process line (counting words per line)
    write data (word count) from line to disk
time 
```

如果你有算法已经使用你的。否则组成一个（比如每行计算单词）。如果写入阶段不适用于您的问题，请跳过它。这个测试确实花费你不到一个小时的时间来写，但可以为你节省很多。**

# java - 如何编写一个简单的 Java 程序来找到两个数字之间的最大公约数？

> ID：13673600
> 
> 赞同：12
> 
> 时间：2012-12-02T20:37:07.167
> 
> 标签：java, loops, while-loop, greatest-common-divisor

这是问题：

“编写一个名为 gcd 的方法，它接受两个整数作为参数并返回两个数的最大公约数。两个整数 a 和 b 的最大公约数 (GCD) 是作为 a 和 b 的因子的最大整数。任意数加 1 的 GCD 为 1，任意数加 0 的 GCD 为该数。

计算两个数字的 GCD 的一种有效方法是使用 Euclid 算法，该算法说明如下：

```
GCD(A, B) = GCD(B, A % B) 
GCD(A, 0) = Absolute value of A" 
```

我真的很困惑如何解决这个问题。我只是想要一些提示和提示，说明我在迄今为止的程序中做错了什么。（我必须放入扫描仪，这是我老师的要求。）不要给我完整的代码，因为我有点想自己解决这个问题。也许只是给我一个提示，说明我如何合并您在上面看到的这个公式。（如果你想知道为什么我输入 == 0，那是因为我认为如果你有两个数字，比如 0 和 90，它们的 GCD 应该是 0 对吧？？）

此外，我的代码必须包含 while 循环......我更喜欢 if 循环......

提前致谢！:)

我目前的程序：

```
public static void main(String[] args) {
        Scanner console = new Scanner(System.in);
        int a = console.nextInt();
        int b = console.nextInt();
        gcd (a, b);
    }

    public static void gcd(int a, int b) {
        System.out.print("Type in two numbers and I will print outs its Greatest Common Divisor: ");
        int gcdNum1 = console.nextInt();
        int gcdNum2 = console.nextInt();
        while (gcdNum1 == 0) {
            gcdNum1 = 0;
        }
        while (gcdNum2 > gcdNum1) {
            int gcd = gcdNum1 % gcdNum2;
        }
        System.out.print(gcdNum1 + gcdNum2);
    }
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-02T20:49:22.293

递归方法是：

```
static int gcd(int a, int b)
{
  if(a == 0 || b == 0) return a+b; // base case
  return gcd(b,a%b);
} 
```

使用 while 循环：

```
static int gcd(int a, int b)
{
  while(a!=0 && b!=0) // until either one of them is 0
  {
     int c = b;
     b = a%b;
     a = c;
  }
  return a+b; // either one is 0, so return the non-zero value
} 
```

当我返回时`a+b`，我实际上是在返回非零数，假设其中一个为 0。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-15T18:12:27.650

您也可以通过三行方法执行此操作：

```
public static int gcd(int x, int y){
  return (y == 0) ? x : gcd(y, x % y);
} 
```

在这里，如果`y = 0`，则返回 x。否则，`gcd`使用不同的参数值再次调用该方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-13T06:51:13.543

```
public static int GCD(int x, int y) {   
    int r;
    while (y!=0) {
        r = x%y;
        x = y;
        y = r;
    }
    return x;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T04:11:48.357

```
import java.util.Scanner;

public class Main {

public static void  main(String [] args)
{
    Scanner input = new Scanner(System.in);
    System.out.println("Please enter the first integer:");
    int b = input.nextInt();
    System.out.println("Please enter the second integer:");
    int d = input.nextInt();

    System.out.println("The GCD of " + b + " and " + d + " is " +  getGcd(b,d) + ".");
}

public static int getGcd(int b, int d)
{
    int gcd = 1;

    if(b>d)
    {
        for(int i = d; i >=1; i--)
        {
            if(b%i==0 && d%i ==0)
            {
                return i;
            }
        }
    }
    else
    {
        for(int j = b; j >=1; j--)
        {
            if(b%j==0 && d% j==0)
            {
                return j;
            }
        }
    }   
    return gcd;

}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T20:51:10.633

一种方法是下面的代码：

```
 int gcd = 0;
        while (gcdNum2 !=0 && gcdNum1 != 0 ) {
        if(gcdNum1 % gcdNum2 == 0){
            gcd = gcdNum2;
        }
            int aux = gcdNum2; 
            gcdNum2 = gcdNum1 % gcdNum2;
            gcdNum1 = aux;
    } 
```

您不需要递归来执行此操作。

请注意，它说当一个数字为零时，GCD 就是不为零的数字。

```
 while (gcdNum1 == 0) {
    gcdNum1 = 0;
} 
```

您应该修改它以满足要求。

我不会告诉你如何完全修改你的代码，只会告诉你如何计算 gcd。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-11T01:49:55.523

```
private static void GCD(int a, int b) {

    int temp;
    // make a greater than b
    if (b > a) {
         temp = a;
         a = b;
         b = temp;
    }

    while (b !=0) {
        // gcd of b and a%b
        temp = a%b;
        // always make a greater than bf
        a =b;
        b =temp;

    }
    System.out.println(a);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-06T22:57:52.133

```
import java.util.Scanner;

class CalculateGCD 
{   
  public static int calGCD(int a, int b) 
  { 
   int c=0,d=0;  
   if(a>b){c=b;} 
   else{c=a;}  
   for(int i=c; i>0; i--) 
   { 
    if(((a%i)+(b%i))==0) 
    { 
     d=i; 
     break; 
    } 
   } 
   return d;  
  }  

  public static void main(String args[]) 
  { 
   Scanner sc=new Scanner(System.in); 
   System.out.println("Enter the nos whose GCD is to be calculated:"); 
   int a=sc.nextInt(); 
   int b=sc.nextInt(); 
   System.out.println(calGCD(a,b));  
  } 
 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-24T04:17:43.047

现在，我大约一周前才开始编程，所以没什么特别的，但我有这个问题并想出了这个，这对于刚开始编程的人来说可能更容易理解。它像前面的例子一样使用欧几里德的方法。

```
public class GCD {
  public static void main(String[] args){
    int x = Math.max(Integer.parseInt(args[0]),Integer.parseInt(args[1]));    
    int y = Math.min(Integer.parseInt(args[0]),Integer.parseInt(args[1]));     
    for (int r = x % y; r != 0; r = x % y){
      x = y;
      y = r;
    }
    System.out.println(y);
  }
} 
```

# ruby-on-rails - 创建需要用户提供 API 密钥的 ruby gem

> ID：13673612
> 
> 赞同：0
> 
> 时间：2012-12-02T20:39:01.197
> 
> 标签：ruby-on-rails, ruby, api, gem

我正在为需要使用用户的 API 密钥的服务构建我的第一个 ruby​​ gem，所以我想知道我应该怎么做才能让用户在安装 gem 时将自己的 API 密钥提供给它？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:23:15.823

让您的 gem 的用户将 API 密钥放入`config/yourgem_config.yml`

```
# yourgem_config.yml
api_key: 1233456 
```

从您的 gem 中，加载这个 YAML 文件，并使用`api_key`指定的那个。

当找不到配置文件或提供错误消息时，可选择回退以进行其他类型的 API 访问。

可选择让用户配置配置文件的路径。

# objective-c - 以编程方式用 UIToolbar 替换 UITabBar

> ID：13673615
> 
> 赞同：1
> 
> 时间：2012-12-02T20:39:43.103
> 
> 标签：objective-c, ios, xcode, ios6

我正在尝试编写一个选项卡式应用程序，其中每个选项卡都是一个导航控制器。该选项卡栏出现在导航控制器中的每个视图中，因为它在每个视图中被推断出来。

我想用一个带有几个按钮的工具栏替换详细视图上的这个选项卡栏。

我在该详细视图的 viewDidLoad: 方法中尝试了以下代码

```
self.navigationController.toolbarHidden = NO;
self.navigationController.toolbar.barStyle = UIBarStyleBlackTranslucent;

UIBarButtonItem *accept = [[UIBarButtonItem alloc] initWithTitle:@"Accept"
                                                               style:UIBarButtonItemStyleBordered
                                                              target:self
                                                              action:nil];

UIBarButtonItem *decline = [[UIBarButtonItem alloc] initWithTitle:@"Decline"
                                                               style:UIBarButtonItemStyleBordered
                                                              target:self
                                                               action:nil];
NSArray *items = [NSArray arrayWithObjects:accept, decline, nil];
[self.navigationController.toolbar setItems:items animated:YES];

// code suggested
[self.view addSubview:self.navigationController.toolbar]; 
```

它仍然没有出现。虽然现在隐藏选项卡栏以在显示详细视图的视图中添加以下行：-

```
theDetailTableViewController.hidesBottomBarWhenPushed = YES; 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:43:20.303

无论您从何处推送您的 detailViewController，执行此操作以在详细视图中隐藏选项卡栏：

```
DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
detailViewController.hidesBottomBarWhenPushed = YES;
[self.navigationController detailViewController animated:YES]; 
```

在您的详细视图中，只需将工具栏作为子视图添加到详细视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:52:45.637

我通常在 viewWillAppear 或 viewDidAppear 方法中放置 toolbarHidden = YES 或 NO（如果适用）。我不确定这是否是它对您不起作用的原因，但无论如何您需要在返回呈现视图时解决。

如果你不解决它，当你返回时工具栏仍然可见。

# c - 在为微控制器编译 C 程序时，编译器添加了哪些额外的汇编代码？

> ID：13673616
> 
> 赞同：1
> 
> 时间：2012-12-02T20:39:43.397
> 
> 标签：c, embedded, arm, microcontroller, disassembly

我想用 C 语言为我的 Stellaris 启动板编写一段代码，只是为了通过将库的使用保持在最低限度来打开板载 LED。令我惊讶的是，编译后的代码大小约为 800 字节。因此，为了检查编译器在编译后的代码中添加了什么，我使用反序列化器检查了汇编代码。它有很多我没有编写 C 代码的代码。我想知道这些代码的用途以及它是如何进入编译器设置的。我正在尝试了解编译器的行为方式以及编译器在幕后所做的事情。请帮我。

这是我的 C 程序：

```
#include "inc/hw_memmap.h"
#include "inc/hw_types.h"
#include "driverlib/rom.h"
#include "driverlib/sysctl.h"

#define GPIOFBASE   0x40025000
#define GPIOCLK     *((volatile unsigned long *)(0x400FE000 + 0x608))
#define FDIR        *((volatile unsigned long *)(GPIOFBASE + 0x400))
#define FDEN        *((volatile unsigned long *)(GPIOFBASE + 0x51C))
#define FDATA       *((volatile unsigned long *)(GPIOFBASE + 0x3FF))

void main(void) {

    ROM_SysCtlClockSet(SYSCTL_SYSDIV_4 | SYSCTL_USE_PLL | SYSCTL_XTAL_16MHZ | SYSCTL_OSC_MAIN);

    GPIOCLK |= (1<<5);
    FDIR    |=  0xE;
    FDEN    |=  0xE;
    FDATA   |=  0xE;

while (1);

} 
```

我使用的唯一 API 调用是使用 Onchip ROM 库设置时钟设置。请检查此 pastebin 中的 dissambly 代码：（主要：位于 0x190。）

[http://pastebin.com/wNNsBdtT](http://pastebin.com/wNNsBdtT)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T21:35:55.727

附加代码将是 CPU 初始化和 C 运行时初始化。此启动的源代码可能随您的编译器一起提供。例如在 GCC 中，它通常被称为 crt0.s

根据您的 CPU 和内存，它可能需要一些初始化来设置正确的时钟频率、内存时序等。最重要的是，C 运行时需要静态数据初始化和堆栈初始化。如果支持 C++，则需要额外的代码来调用任何静态对象的构造函数。

像 Stellaris 这样的 Cortex-M 设备旨在以最小的开销运行 C 代码，并且基本上可以从复位启动 C 代码，但是默认启动状态通常不是您想要运行应用程序的状态，例如很可能以较低且不太准确的时钟频率运行。

* * *

**添加了 2012 年 12 月 6 日**：

您的启动代码几乎肯定是由 CMSIS 提供的。CMSIS 文件夹将包含包含启动代码的 CoreSupport 和 DeviceSupport 文件夹。您可以将此代码（或其相关部分）复制到您的项目中，根据需要对其进行修改并链接它以代替提供的代码。CMSIS 经常更新，因此无论如何都有理由这样做。

您的构建日志和/或映射文件对于确定链接哪些 CMSIS 组件很有用。

# mysql - MySQL JDBC 驱动程序不适用于 GWT Eclipse 项目

> ID：13673617
> 
> 赞同：2
> 
> 时间：2012-12-02T20:39:44.363
> 
> 标签：mysql, google-app-engine, gwt, jdbc, google-cloud-sql

我的 GWT 应用程序似乎没有找到 mysql-connector-java-5.1.22-bin.jar。我使用谷歌应用引擎。

我已经在 Project->RIghtClick->Properties->Java Build Path->Libraries->mysql-connector-java-5.1.22-bin.jar 中设置了 jar。我还添加了“MySQL JDBC 驱动程序”。$CLASSPATH 也设置正确（我认为这并不重要，因为我在 Eclipse 中运行应用程序）。

我已经在命令行上测试了相同的代码，它就像一个魅力。

```
$ java -cp ~/mysql-connector-java-5.1.22/mysql-connector-java-5.1.22-bin.jar:. JDBCExample
-------- MySQL JDBC Connection Testing ------------
MySQL JDBC Driver Registered!
You made it, take control your database now! 
```

当我在 Eclipse 中运行 Web 应用程序时，我得到了这个

例外：

```
-------- MySQL JDBC Connection Testing ------------
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
ClassNotFound - Where is your MySQL JDBC Driver?com.mysql.jdbc.Driver
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:207)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at com.startupweekend.server.GreetingServiceImpl.readDB(GreetingServiceImpl.java:65)
    at com.startupweekend.server.GreetingServiceImpl.greetServer(GreetingServiceImpl.java:21) 
```

代码：

```
try {
  Class.forName("com.mysql.jdbc.Driver");
} catch (ClassNotFoundException e) {
  System.out.println("ClassNotFound - Where is your MySQL JDBC Driver?" + e.getMessage());              
  e.printStackTrace(); 
  return;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T02:56:09.370

我不完全确定，但您应该将 mysql 驱动程序放在您的 WEB-INF/lib 文件夹中，然后右键单击 -> 添加到构建路径。那应该使它起作用。

请记住，在 GAE 中您不能使用常见的关系数据库，您只能使用 Google CloudSQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T19:15:48.927

您不需要 App Engine，只需在准备好您的 war 文件时使用 GWT 编译。在任何情况下，右键单击项目文件夹 -> 属性 -> Google -> App Engine -> 取消选中“使用 Google App Engine”。确保 mysql-connector 在您的 lib 文件夹中。享受您最喜欢的关系数据库等。

干杯

# java - 完全自定义的 GUI（最好在 Java 中）

> ID：13673620
> 
> 赞同：0
> 
> 时间：2012-12-02T20:40:34.553
> 
> 标签：java, swing, user-interface, jframe

我希望按照以下方式创建一个 GUI：http: [//i.stack.imgur.com/qRFA9.jpg](http://i.stack.imgur.com/qRFA9.jpg)

没有寄宿生或标题栏。非常干净和简单。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T20:52:41.330

您可以使用 AWT 或 Swing 执行此操作[`Frame#setUndecorated(boolean)`](http://docs.oracle.com/javase/6/docs/api/java/awt/Frame.html#setUndecorated%28boolean%29)：

```
JFrame frame = new JFrame("Title");
frame.setUndecorated(true);
frame.pack();
frame.setSize(800, 600);
frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
frame.setVisible(true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T20:46:54.310

在 Java 中，您可以使用 SWT 来实现这一点，而无需涉及任何 hack。您创建一个`Shell`设置适当样式标志的位置，并且您拥有一个没有“修剪”的窗口，因为它们被称为。也许 Swing 也有类似的东西。

# prolog - prolog：列表中重复次数最多的元素

> ID：13673623
> 
> 赞同：2
> 
> 时间：2012-12-02T20:40:38.060
> 
> 标签：prolog

如何检索列表中重复次数最多的元素的任何想法。

即如下所示，

```
?- maxRepeated([1,2,7,3,6,1,2,2,3],M).
M = 2. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T22:02:30.007

我非常喜欢关系 Prolog 的力量：

```
maxRepeated(L, M) :-
    sort(L, S),
    maplist(count(L), S, C),
    keysort(C, [_-M|_Ms]).
count(L, S, I-S) :-
    aggregate(count, member(S, L), C), I is -C. 
```

测试：

```
?- maxRepeated([1,2,7,3,6,1,2,2,3],M).
M = 2. 
```

**编辑**，现在，更紧凑！

```
maxRepeated(L, M) :-
    setof(I-E, C^(aggregate(count, member(E, L), C), I is -C), [_-M|_]). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:45:55.447

该解决方案对列表进行排序，允许元素按顺序出现——一旦它们以后不再重复，就不需要维护所有元素。

您的 prolog 解释器必须具有对`msort()`维护重复条目的列表进行排序的功能。

```
maxRepeated([], []).
maxRepeated(L, E) :-
    msort(L, [H|T]),
    maxRepeated(T, H, H, 1, 0, E).

maxRepeated([], H, _, C1, C2, H) :- C1 >= C2.
maxRepeated([], _, X, C1, C2, X) :- C1 < C2.

maxRepeated([H|T], H, LastF, C1, C2, E) :-
    maxRepeated(T, H, LastF, C1 + 1, C2, E).

maxRepeated([X|T], H, LastF, C1, C2, E) :-
    (
        C1 > C2
        ->  maxRepeated(T, X, H, 1, C1, E)
        ;   maxRepeated(T, X, LastF, 1, C2, E)
    ). 
```

复杂性由使用的排序给出，通常是`O(n log n)`一次，在排序之后，列表只遍历一次，聚合元素并跟踪最频繁的元素。

问候！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T21:10:25.793

如果您知道 A [i]可以取的最大值，并且如果此 A [max]可以创建一个与 A [max]一样大的数组，那么有一种方法可以在**O(n)**时间内找到重复次数最多的元素。

```
int A[max+1]; // set all elements to 0
int S[n]; // Set S
for (i=0;i<n;i++) A[ S[i] ]++;

int m=0, num; // num is the number to be found
for (i=1;i<=max;i++)
  if (A[i] > m)
  {
    m = A[i];
    num = i;
  }
print (num) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T21:34:45.247

这是一个快速而肮脏的答案。我将问题限制在一组允许的元素上。有效，但需要详细说明。

```
maxRepeated([],_,Current,_,Current).
maxRepeated([H|T],L,Current,MaxCount,X) :-
    (
         count(L,H,N),
         N > MaxCount,
     maxRepeated(T,L,H,N,X) 
    )
    ;
    maxRepeated(T,L,Current,MaxCount,X).

count([],X,0).
count([X|T],X,Y):- count(T,X,Z), Y is 1+Z.
count([X1|T],X,Z):- X1\=X,count(T,X,Z). 
```

# vba - 在 Excel VBA 中使用 3 列集合并进行搜索

> ID：13673631
> 
> 赞同：2
> 
> 时间：2012-12-02T20:41:20.057
> 
> 标签：vba, collections, key

我正在 excel vba 中构建一个算法来搜索网络中的路径。我是编写这类问题的新手。请不要推荐替代软件。问题应该很简单。

问题描述：搜索表示弧上流的数据集合（3“列”：从、到、流）识别路径（从源开始，找到流到“到”，在“从”字段中查找“到” ，找到流向那个“to”，依此类推，直到找不到另一个“from”）从源到每个路径的结尾。

数据如下所示：

从节点到节点流

1 2 4

2 3 3

3 4 2

4 5 1

7 6 1

8 7 2

最大的障碍：

我正在使用 Collection 来保存这些数据并使用下面的代码进行设置。

Dim y As Collection Set y = New Collection y.Add Sheets("FlowDecomp_Solve").Range("fromtoflow").Value

数据被拉进来，但它看起来像这样：（尝试了图片，但我是新用户）

项目 1

第 1(1) 项

```
 Item 1 (1,1)   1

  Item 1 (1,2)   2

  Item 1 (1,3)   4 
```

所以它表明集合有 1 项而不是我的弧数。如何访问集合的 Item1(1,2) 类型地址。每个特殊值都有唯一的键吗？在代码中使用特定行后，如何搜索我的集合并删除它？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:55:12.803

经过多次试验和错误，我决定将我的原始数据设为一个数组并像这样搜索它（d 在数组的下方，a 在数组的对面）：

```
For d = LBound(arcflow(), 1) To UBound(arcflow(), 1)
    For a = LBound(arcflow(), 2) To UBound(arcflow(), 2)
        If a = 1 Then
        fromnode = arcflow(d, a)
        ElseIf a = 2 Then
        tonode = arcflow(d, a)
        ElseIf a = 3 Then
        flow = arcflow(d, a)
        'write into node-node matrix
        Sheets("FlowDecomp_Solve").Range("nodenodemtrx").Cells(fromnode, tonode).value = 1
        End If
    Next a
Next d 
```

然后为了跟踪路径，我将 from 和 to 节点添加到名为 Path 的集合中，直到它找不到另一个弧，然后我写出路径，清空集合，更新值，然后重新开始。

希望这对其他人有帮助...

# android - 我如何内部链接页面？(HTML)

> ID：13673633
> 
> 赞同：0
> 
> 时间：2012-12-02T20:41:48.847
> 
> 标签：android, html

所以我正在制作一个基于 Web 的应用程序。我把所有的代码都写下来了，但它在切换页面时会闪烁。我想，我如何将所有页面都设置为内部页面？这是我认为您如何执行内部页面的一些基本代码，但它不起作用。怎么了？

[http://pastebin.com/kSCyKKgx](http://pastebin.com/kSCyKKgx)

编辑：这是一个 Android 应用程序！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:44:06.960

您看到的“flash”是浏览器在加载和渲染新页面之前清除渲染。这个是正常的。

如果你想避免这些，你需要花时间学习如何有效地使用[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29) - 这本质上是你从服务器获取数据并在客户端渲染，所以浏览器永远不会加载新页面（避免闪光”）。

尽管在实现上述内容时有很多事情要做（例如浏览器历史记录、使页面可链接等等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:44:56.867

您看到的“闪烁”可能是您使用的是 Android 2.x 设备，也许？

如果是这样，您可以尝试将其添加到任何在您的 HEAD 部分中的主 jquery mobile 之后加载的 CSS。

```
<style type="text/css">
.ui-page {
    -webkit-backface-visibility: hidden;
}
</style> 
```

# android - 使用 CONFLICT_REPLACE 插入时出现 SQLiteException“无法提交 - 没有处于活动状态的事务”

> ID：13673635
> 
> 赞同：10
> 
> 时间：2012-12-02T20:42:06.933
> 
> 标签：android, sqlite, android-sqlite

我在更新数据库时遇到了一些问题。

这是日志：

```
12-02 16:18:57.502: D/Data Update(21218): Start updating databases
12-02 16:18:57.502: D/Data Update(21218): update size: 5
12-02 16:18:57.502: D/Data Update(21218): updating table cemeteries
12-02 14:28:51.877: I/SqliteDatabaseCpp(18826): sqlite returned: error code = 1802, msg = statement aborts at 13: [INSERT OR REPLACE  INTO cemeteries(id,name) VALUES (?,?)] , db=/data/data/de.l_one.app.shaufelv14/databases/poidatabase
12-02 14:28:51.877: E/SQLiteStatementCpp(18826): native_execute (step): errno = 2, error message = No such file or directory, handle = 0xdc0b70
12-02 14:28:51.877: I/SqliteDatabaseCpp(18826): sqlite returned: error code = 1, msg = statement aborts at 2: [COMMIT;] cannot commit - no transaction is active, db=/data/data/de.l_one.app.shaufelv14/databases/poidatabase
12-02 14:28:51.887: E/Data Update(18826): Update failed
12-02 14:28:51.887: E/Data Update(18826): android.database.sqlite.SQLiteException: cannot commit - no transaction is active
12-02 14:28:51.887: E/Data Update(18826):   at android.database.sqlite.SQLiteStatement.native_executeSql(Native Method)
12-02 14:28:51.887: E/Data Update(18826):   at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:90)
12-02 14:28:51.887: E/Data Update(18826):   at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:2006)
12-02 14:28:51.887: E/Data Update(18826):   at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1946)
12-02 14:28:51.887: E/Data Update(18826):   at android.database.sqlite.SQLiteDatabase.endTransaction(SQLiteDatabase.java:764)
12-02 14:28:51.887: E/Data Update(18826):   at android.database.sqlite.SQLiteStatement.releaseAndUnlock(SQLiteStatement.java:273)
12-02 14:28:51.887: E/Data Update(18826):   at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:115)
12-02 14:28:51.887: E/Data Update(18826):   at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1807)
12-02 14:28:51.887: E/Data Update(18826):   at de.l_one.app.shaufelv14.DataUpdater.update(DataUpdater.java:102)
12-02 14:28:51.887: E/Data Update(18826):   at de.l_one.app.shaufelv14.MainActivity$5.run(MainActivity.java:104) 
```

这是我用来插入新数据的代码：

```
int updateSize = 0;

// cvs is an ArrayList<ContentValues> array with each entry holding 
// the new values for a certain table
// I know I could use a Map but let's change one thing after another

for(ArrayList<ContentValues> list : cvs)
    updateSize += list.size();

Log.d(DEBUG_TAG, "Start updating databases");
Log.d(DEBUG_TAG, "update size: "+updateSize);

if(updateSize > 0) {

    dbHelper = ShaufelDatabaseHelper.getInstance(context);
    connection = dbHelper.getWritableDatabase();

    for(int i=0; i<cvs.length; i++) {
        String table;
        switch(i) {
            case 0: table = "cemeteries"; break;
            case 1: table = "customers"; break;
            case 2: table = "graves"; break;
            case 3: table = "orders"; break;
            case 4: table = "plants"; break;
            case 5: table = "plantevents"; break;
            case 6: table = "services"; break;
            case 7: table = "serviceevents"; break;
            default: throw new RuntimeException("wtf");
        }
        Log.d(DEBUG_TAG, "updating table "+table);

        for(ContentValues cv: cvs[i]) {
            // replace updated values, insert new ones
            connection.insertWithOnConflict(table, null, cv, SQLiteDatabase.CONFLICT_REPLACE);
        }
    }
} 
```

奇怪的是，不是每次都抛出异常。它更像是这样的：

如果您启动应用程序并登录，则更新工作。如果您随后注销并重新登录（不关闭应用程序），更新会再次发生，但这次出现异常。
如果您关闭应用程序（不仅仅是按 home，而是强制关闭 android 系统），它将再次工作，直到您注销并重新登录。
更新都包含相同的数据（我们目前正在测试这些东西）并且它由相同的代码，但它只工作了一半。

这是在 HTC Sensation 上的 Android 4.0.3 上运行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:29:24.643

`1802`is `SQLITE_IOERR_FSTAT`，当连接仍处于打开状态时删除数据库文件时会发生这种情况。

您是否在更新中进行任何类型的文件删除？

# htmlunit - 使用 HtmlUnit 设置选项按钮后页面没有更改

> ID：13673637
> 
> 赞同：0
> 
> 时间：2012-12-02T20:42:24.137
> 
> 标签：htmlunit, page-refresh

我正在使用 HtmlUnit 浏览 Web of Knowledge 网页。我正在使用下面的代码来设置一个选项按钮，以便对页面上的结果进行适当的排序。不幸的是，当我执行代码时没有任何反应。页面上的结果仍然按照与以前相同的方式进行排序。

```
HtmlSelect ssort = (HtmlSelect) pageX.getFirstByXPath("//*[@id=\'topNavBar\']/tbody/tr/td[3]/form/select");

HtmlOption optionA = ssort.getOptionByValue("LC.D;PY.D;AU.A;SO.A;VL.D;PG.A");

ssort.setSelectedAttribute(optionA, true);

ssort.click(); 
```

我调试了代码，没有错误。你知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:20:59.440

作为一般规则，像`.click()`and `.setSelectedAttribute(HTMLOption, boolean)`（参见[JavaDoc](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/html/HtmlSelect.html#setSelectedAttribute%28com.gargoylesoftware.htmlunit.html.HtmlOption,%20boolean%29 "JavaDocs")）这样的函数将返回一个`HTMLPage`在大多数情况下与当前相同的函数，但在您的情况下它将返回一个不同的`HTMLPage`. 因此，要捕获新页面，您只需将返回值分配给 a `HTMLPage`。

注意：您也可以[`getCurrentWindow()`](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/WebClient.html#getCurrentWindow%28%29%20getCurrentWindow%28%29)在`WebClient`实例上使用。

# ruby-on-rails - 从 rspec 中的帮助规范访问会话

> ID：13673639
> 
> 赞同：7
> 
> 时间：2012-12-02T20:42:31.703
> 
> 标签：ruby-on-rails, ruby, rspec, tdd

我的 ApplicationHelper 中有一个方法可以检查我的购物篮中是否有任何物品

```
module ApplicationHelper
  def has_basket_items?
    basket = Basket.find(session[:basket_id])
    basket ? !basket.basket_items.empty? : false
  end
end 
```

这是我必须测试的辅助规范：

```
require 'spec_helper'

describe ApplicationHelper do
  describe 'has_basket_items?' do
    describe 'with no basket' do

      it "should return false" do
        helper.has_basket_items?.should be_false
      end

    end
  end
end 
```

但是，当我运行测试时，我得到了

```
SystemStackError: stack level too deep
/home/user/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/testing/test_process.rb:13: 
```

通过调试，我看到正在从@request.session 在 ActionDispatch::TestProcess 中访问*会话*，而@request 为零。当我从我的请求规范访问会话时，@request 是 ActionController::TestRequest 的一个实例。

我的问题是我可以从帮助规范访问会话对象吗？如果可以，怎么做？如果我不能测试这种方法的最佳实践是什么？

***********更新****** *******

 **这取决于`include ActionDispatch::TestProcess`我的工厂。删除这个包括对问题进行排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:44:45.297

*我可以从帮助规范访问会话对象吗？*

是的。

```
module ApplicationHelper
  def has_basket_items?
    raise session.inspect
    basket = Basket.find(session[:basket_id])
    basket ? !basket.basket_items.empty? : false
  end
end

$ rspec spec/helpers/application_helper.rb

Failure/Error: helper.has_basket_items?.should be_false
  RuntimeError:
    {} 
```

会话对象在那里并返回一个空哈希。

尝试更详细地查看回溯以查找错误。 `stack level too deep`通常表示递归出错了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:04:56.133

您正在测试 has_basket_items？ApplicationHelper 中的操作，它检查篮子表中带有 basket_id 的特定篮子，因此您的测试中应该有一些篮子对象，您可以使用[Factory_Girl](https://github.com/thoughtbot/factory_girl) gem 创建它们。

她的例子：-

```
basket1 = Factory(:basket, :name => 'basket_1')
basket2 = Factory(:basket, :name => 'basket_2') 
```

[您可以从这个屏幕投射http://railscasts.com/episodes/158-factories-not-fixtures](http://railscasts.com/episodes/158-factories-not-fixtures)中获得有关如何使用 factory_girl 的更多详细信息

它将在您的测试数据库中创建一个工厂对象。所以，基本上你可以创建一些工厂对象，然后在会话中设置一个 basket_id 来检查它的存在，如下所示：

```
session[:basket_id] = basket1.id 
```

所以，你的测试应该是这样的： -

```
require 'spec_helper'

describe ApplicationHelper do
  describe 'has_basket_items?' do
    describe 'with no basket' do

      it "should return false" do
        basket1 = Factory(:basket, :name => 'basket_1')
        basket2 = Factory(:basket, :name => 'basket_2')
        session[:basket_id] = 1234 # a random basket_id 
        helper.has_basket_items?.should be_false
      end

    end
  end
end 
```

或者，您可以使用以下命令检查由 factory_girl 创建的 basket_id 是否为 be_true：

```
session[:basket_id] = basket1.id
helper.has_basket_items?.should be_true 
```**

# android - 实现 OnChangeListener 后如何更新 ListPreferences

> ID：13673640
> 
> 赞同：0
> 
> 时间：2012-12-02T20:42:38.020
> 
> 标签：android, preference

我有 PrefActivity，当用户更改列表首选项中的任何按钮时，我使用 OnChange Listener 来祝酒。但是现在我有两个问题：1-第一次用户更改选项 toast 没有显示 2-之后，当用户更改首选项时，列表的值不会更新，并且总是设置为第二个值。

这是我的代码：

```
public class PrefsActivity extends PreferenceActivity implements OnSharedPreferenceChangeListener{

private ListPreference myPreference;
@Override
 public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState); 
addPreferencesFromResource(R.xml.prefs);

SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
prefs.registerOnSharedPreferenceChangeListener(this);

}

 public void onSharedPreferenceChanged(SharedPreferences arg0, String key) {

ListPreference lp = (ListPreference) findPreference("blocktype");
 lp.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {

    @Override
    public boolean onPreferenceChange(Preference preference, Object newValue) {
        // TODO Auto-generated method stub

        Toast.makeText(PrefsActivity.this, "second", Toast.LENGTH_LONG).show();
        return false;

    }

});
}
} 
```

什么是

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T21:33:03.573

由于没有人回答我的问题，我发现问题出在哪里。

```
return false 
```

应该改为

```
return true 
```

为了更新偏好

# ruby - 如何让 Nokogiri 与 Warbler/JRuby 一起工作

> ID：13673641
> 
> 赞同：3
> 
> 时间：2012-12-02T20:42:42.613
> 
> 标签：ruby, jruby, nokogiri, warbler

我正在尝试获取使用 Nokogiri 的 Ruby 应用程序的独立 jar 文件。

我有一个看起来像这样的 Gemfile：

```
source :rubygems
gem 'nokogiri' 
```

在 bin/jartest.rb 我有这个：

```
require 'rubygems'
require 'nokogiri'
puts "Hello world" 
```

当我运行时：

```
jruby bin/jartest.rb 
```

一切都很好，但是当我跑步时

```
warble; java -jar jartest.jar 
```

我得到：

```
LoadError: no such file to load -- isorelax 
```

我找到了“[关于 Warbler 和 Nokogiri 的问题](http://www.ruby-forum.com/topic/866277)”，但我不知道在哪里可以找到这些 jar 文件，如果我能提供帮助，我真的不想将它们放在我的 lib 目录中。真的，我只是想让它工作。

```
dan$ ruby -v
ruby 1.8.7 (2010-01-10 patchlevel 249) [universal-darwin10.0]

dan$ gem list | grep nokogiri
nokogiri (1.5.5, 1.5.0, 1.4.4) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T14:47:06.177

确保您安装了 Nokogiri 的 Java 版本而不是本机版本：

```
> gem list noko 
nokogiri (1.5.0) 
> gem install nokogiri Successfully
installed nokogiri-1.5.0-java
1 gem installed 
> gem list noko 
nokogiri (1.5.0 java) 
```

# html - 移动网络，单选按钮与选择/选项

> ID：13673642
> 
> 赞同：0
> 
> 时间：2012-12-02T20:42:49.317
> 
> 标签：html, mobile, input

有点随机的问题，但这里有。

我正在重新开发一个对移动设备友好的网站，它有一个带有大量`<input />`标签的庞大表单。当我正在研究类似的网站时，我发现有些解决方案`<select><option>...`有点侵入性，单选按钮对我来说效果更好。

由于这将出现在报告中，我不认为说“最好的输入法是我喜欢的单选按钮”会以某种方式削减它。有没有人对什么是“最好”的方式有什么好的建议？或者有没有办法进行投票？

任何帮助或方向（一如既往）表示赞赏

更新：在我看来，智能手机将下拉列表转换为一组单选按钮，并在与键盘类似的弹出/对话框中向用户显示。这是个好借口吗？呵呵 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:53:15.060

这是 UI/UX 考虑因素，此外，您还必须考虑将来是否会添加更多选择/单选选项。

如果有超过 3 或 4 个选择，我会从 UI/UX 的角度选择这些元素。

移动浏览器显示任何大小的选择都没有问题，您可以找到一些 jQuery 插件来提供替代交互。

如果将来要添加更多的选择/单选选项（例如从数据库中），那么单选按钮将不是一个好的选择。没有什么比尝试从 15 个单选按钮中进行选择更有趣了。

最后，我更喜欢让浏览器控制选择并将其显示为默认设置。尝试使用第三方解决方案设置样式或替换选择可能会在跨浏览器时变得有点棘手。

希望这有助于回答您的问题。

# iphone - 最小字体大小问题

> ID：13673643
> 
> 赞同：0
> 
> 时间：2012-12-02T20:42:49.307
> 
> 标签：iphone, ios, uilabel

我已经设置了一个标签，标签中有一些文字。现在我想设置所有文本都适合标签的字体。我使用了最小字体大小，因为标签文本每天都在变化。但是突然就不行了。我做错了什么？

这是我的代码：

```
CGRect infoLabelRect = CGRectMake(10, 250, 260, 350);

UILabel *infoLabel = [[UILabel alloc] initWithFrame:infoLabelRect];
infoLabel.text = @"bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla";
infoLabel.numberOfLines = 9;
infoLabel.font = [UIFont systemFontOfSize:17];
infoLabel.minimumFontSize = 12;
infoLabel.adjustsFontSizeToFitWidth = YES;
infoLabel.textColor = [UIColor whiteColor];
infoLabel.textAlignment = NSTextAlignmentCenter;
infoLabel.backgroundColor = [UIColor clearColor];
infoLabel.shadowColor = [UIColor blackColor];
infoLabel.shadowOffset = CGSizeMake(0, 1);
[infoLabel sizeToFit]; 
```

我尝试了 rmaddy sad 但没有显示文字。

这是我的代码不起作用。有什么建议么？

```
UILabel *infoLabel = [[UILabel alloc] initWithFrame:infoLabelRect];
    NSString *text = @"bla bla bla";
    UIFont *font = nil;
    CGFloat points = 17;
    CGFloat maxHeight = infoLabel.frame.size.height;
    CGFloat textHeight;
    do {
        font = [UIFont systemFontOfSize:points];
        CGSize size = CGSizeMake(infoLabelRect.size.width, 100000);
        CGSize textSize = [text sizeWithFont:font constrainedToSize:size lineBreakMode: NSLineBreakByWordWrapping];
        textHeight = textSize.height;
        points -= 1;
    } while (textHeight > maxHeight);

    infoLabel.font = font;
    infoLabel.textColor = [UIColor whiteColor];
    infoLabel.textAlignment = NSTextAlignmentCenter;
    infoLabel.backgroundColor = [UIColor clearColor];
    infoLabel.shadowColor = [UIColor blackColor];
    infoLabel.shadowOffset = CGSizeMake(0, 1);
    [infoLabel sizeToFit];
    [contentView addSubview:infoLabel]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T21:00:11.780

的使用`minimumFontSize`只适用于一行的标签。多行或环绕标签不会尝试调整字体大小。

从文档中`minimumFontSize`：

> 此属性的默认值为 0.0。如果为标签启用字体调整，则应始终增加此值。此属性仅在 numberOfLines 属性设置为 1 时有效。

一种解决方案是利用该`NSString sizeWithFont:constrainedToSize:lineBreakMode:`方法计算字体大小需要使标签的文本适合分配的空间。

编辑：应该可以工作（未经测试，可能是拼写错误）：

```
NSString *text = @"hello";
UIFont *font = nil;
CGFloat points = 17;
CGFloat maxHeight = infoLabel.frame.size.height;
CGFloat textHeight;
do {
    font = [UIFont systemFontOfSize:points];
    CGSize size = CGSizeMake(infoLabelRect.size.width, 100000);
    CGSize textSize = [text sizeWithFont:font constrainedToSize:size lineBreakMode: NSLineBreakByWordWrapping];
    textHeight = textSize.height;
    points -= 1;
} while (textHeight > maxHeight);

infoLabel.font = font; 
```

# javascript - 使用动画和每个迭代动画

> ID：13673644
> 
> 赞同：0
> 
> 时间：2012-12-02T20:42:50.783
> 
> 标签：javascript, jquery, css, animation

**Javascript**

```
$(document).ready(function() {  
$(".container").animate({left:'120px'}, 6000).queue(function(next){
$(".child").css('display', 'none'); 
});
}); 
```

上面的脚本动画一个盒子，然后在动画完成后隐藏它。问题是我有一组相同的盒子，我想为每个盒子制作动画。我正在尝试使用 .each 让它工作，但到目前为止它根本不起作用。因此，为了再次突出我的问题**我想按时间顺序依次为一组相同的框设置动画（html-vise，第一个在顶部，然后是下一个），然后隐藏设置 css 属性的框和价值。这适用于一个盒子，但不适用于几个。我尝试使用 .each，但那里没有好消息。**

**HTML**

```
<div class="container">
<div class="child"></div>
<div class="child"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:53:19.553

```
function queue(start) 
{
    var rest = [].splice.call(arguments, 1),
    promise = $.Deferred();

   if (start) 
   {
      $.when(start()).then(function () {
      queue.apply(window, rest);
                });
   } else {
        promise.resolve();
}
    return promise;
}

function animate()
{
    queue(function () {
        return $( ".child:first" ).animate({opacity: "show"}, "slow").delay(1500);
        }, function () {
        return $( ".child:first" ).animate({opacity: "hide"}, "slow");  
        }, function () {
        return $( ".child:second" ).animate({opacity: "show"}, "slow").delay(1500);
        }, function () {
        return $( ".child:second" ).animate({opacity: "hide"}, "slow"); 
    }});    
} 
```

当你想要淡入淡出你的 div 时调用 animate

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:16:27.117

你也可以这样做！

```
<script>
$(document).ready(function() {  
$(".container").animate({left:'120px'}, 6000).queue(function(next){
var childs = $('.child'),
    i = 0;
(function() {
  $(childs[i++]).hide('slow',arguments.callee);
})();
});
});
</script> 
```

希望这可以帮到你

# .net - .NET Windows 服务重新启动服务器

> ID：13673651
> 
> 赞同：0
> 
> 时间：2012-12-02T20:43:38.303
> 
> 标签：.net, vb.net, windows-services

我开发了一个 Windows 服务，它可以按计划备份我的文件和文件夹。它执行以下任务：

1 - 读取文件夹和文件列表

2 - 压缩它们并将它们放在临时目录中（将大文件分成 50MB 块）

3 - 将临时文件夹的内容上传到 FTP

4 - 删除临时文件夹

现在临时文件夹的大小可能在 3GB 左右，服务每天运行两次。现在我的服务器随机重启（不是在服务创建或上传数据期间），我开始认为这可能是导致我的服务器重启的 I/O 问题。

在 .NET 中优化我的服务器的最佳方法是什么？我可以将 PriorityClass 设置为BelowNormal，但我认为这不会有帮助。我的 onStart 看起来像这样....

```
Protected Overrides Sub OnStart(ByVal args() As String)
    ' Add code here to start your service. This method should set things
    ' in motion so your service can do its work.
    Try
        Process.GetCurrentProcess().PriorityClass = ProcessPriorityClass.BelowNormal
        Dim s As New BackupLibraryV2.main
    Catch ex As Exception
        BackupLibraryV2.util.LogEntry("", ex.Message, DateTime.Now, DateTime.Now)
    End Try

End Sub 
```

（我应该在新线程中启动服务吗？？？）

还有其他建议可以尝试优化我的服务器以减少 CPU 密集度吗？

这是重启日志：

```
crash dump file: C:\Windows\Minidump\120212-14227-01.dmp
This was probably caused by the following module: ntoskrnl.exe (nt+0x7EFC0) 
Bugcheck code: 0x3B (0xC0000005, 0xFFFFF800019A7382, 0xFFFFF88008DFA9E0, 0x0)
Error: SYSTEM_SERVICE_EXCEPTION
file path: C:\Windows\system32\ntoskrnl.exe
product: Microsoft® Windows® Operating System
company: Microsoft Corporation
description: NT Kernel & System
Bug check description: This indicates that an exception happened while executing a routine that transitions from non-privileged code to privileged code. 
This appears to be a typical software driver bug and is not likely to be caused by a hardware problem. 
The crash took place in the Windows kernel. Possibly this problem is caused by another driver that cannot be identified at this time. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:48:10.563

崩溃不太可能是由您的应用程序代码引起的。事件日志中的声明

> 这似乎是一个典型的软件驱动程序错误

可能是正确的。

由于您的应用程序正在执行大量 IO，因此可能会在 IO 子系统驱动程序中*引发问题。*您的 IO 系统是否使用了未作为 Windows 安装的一部分提供的驱动程序，或者您是否从制造商处更新了 IO 驱动程序？如果是这样，请尝试运行旧版本的驱动程序。

> 我应该在新线程中启动服务吗？

您的 OnStart 事件处理程序应立即将控制权交还给系统。在单独的线程上进行处理。

> 我可以将 PriorityClass 设置为BelowNormal，但我认为这不会有帮助

对于这样的后台任务，BelowNormal 可能是一个合理的设置（取决于服务器还做了什么），但你是对的，它根本不应该影响服务器重启。

> 还有其他建议可以尝试优化我的服务器以减少 CPU 密集度吗？

为什么要关注 CPU 利用率？是来自ZIP操作吗？如果是这样，您可以考虑使用 7Zip。它是免费的，可以从命令行调用或从 .NET 程序链接，并让您能够设置所需的压缩级别（更高的压缩 = 更多的 CPU 和内存使用），并允许您控制用于压缩的螺纹。如果需要，它与 ZIP 兼容，并且还提供卓越的专有 .7z 压缩格式。

# heroku - 如果使用 AppHarbor/Heroku 进行部署，如何从 Github 隐藏 SQL 用户名和密码？

> ID：13673653
> 
> 赞同：1
> 
> 时间：2012-12-02T20:43:43.963
> 
> 标签：heroku, github, web-config, connection-string, appharbor

基本上，我将代码推送到 Github，然后 AppHarbor/Heroku 有一个从最新提交构建的钩子。

如果我`.gitignore`是文件本身，AppHarbor/Heroku 不能让构建的应用程序连接到数据库，因为它只能看到提交的内容。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:49:08.863

我不熟悉 AppHarbor，但是 Heroku 使用数据库连接参数公开环境变量，这样您就不必将它们放在 git 中。

# c# - Task.StartNew 在运行时持有主线程

> ID：13673657
> 
> 赞同：1
> 
> 时间：2012-12-02T20:44:51.147
> 
> 标签：c#, .net, winforms, multithreading

当这段代码运行时，我不能在我的 UI 中移动或做任何事情：

```
var a = txtLot.Text;
var b = cmbMcu.SelectedItem.ToString();
var c = cmbLocn.SelectedItem.ToString();

var itm = Task<JDEItemLotAvailability>
.Factory.StartNew(() =>
{
        btnCheck.BackColor = Color.Red;
        var ret = Dal.GetLotAvailabilityF41021(a, b, c);
        btnCheck.BackColor = Color.Transparent;
        return ret;
}
    );
lblDescriptionValue.Text = itm.Result.Description;
lblItemCodeValue.Text = itm.Result.Code;
lblQuantityValue.Text = itm.Result.AvailableQuantity.ToString(); 
```

我尝试评论对 Dal 方法的调用并改为使用 thread.sleep(5000) 但我仍然无法移动表单。

编辑：也许我使用错误的方式来取回结果？

**更新：**

在第一次回复（约翰的）之后，我尝试了这个：

```
var a = txtLot.Text;
var b = cmbMcu.SelectedItem.ToString();
var c = cmbLocn.SelectedItem.ToString();

var itm = Task<JDEItemLotAvailability>
.Factory.StartNew(() =>
{
        btnCheck.BackColor = Color.Red;
        var ret = Dal.GetLotAvailabilityF41021(a, b, c);
        btnCheck.BackColor = Color.Transparent;
        return ret;
}
    ).ContinueWith(itm =>
{
lblDescriptionValue.Text = itm.Result.Description;
lblItemCodeValue.Text = itm.Result.Code;
lblQuantityValue.Text = itm.Result.AvailableQuantity.ToString();
}); 
```

但是我当然又在弄乱用户界面了....表单冻结消失了，但是当任务完成时发生了异常

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T20:47:59.107

这里有两个问题。

首先，您的代码试图从几乎可以肯定是不同的线程（即在任务中，这可能会在线程池线程中执行）访问 UI 线程。你不应该那样做。

其次，您在这里阻塞了 UI 线程：

```
lblDescriptionValue.Text = itm.Result.Description; 
```

在任务完成之前，对该`itm.Result`属性的访问将被*阻止。*你不想这样做——这次是*在*UI 线程中——因为这会冻结你的 UI，正如你所观察到的。

如果您使用的是 C# 5 和 .NET 4.5，您可以尝试使用新的异步功能 - 这可能会让您*更*轻松地做您想做的事。

如果您不能使用 .NET 4.5（或 .NET 4 的异步目标包），您应该使用它`Task.ContinueWith`来告诉`Task`您在完成后要做什么。

编辑：我怀疑你想要类似的东西：

```
var a = txtLot.Text;
var b = cmbMcu.SelectedItem.ToString();
var c = cmbLocn.SelectedItem.ToString();

btnCheck.BackColor = Color.Red;
var task = Task.Factory.StartNew(() => Dal.GetLotAvailabilityF41021(a, b, c));
task.ContinueWith(t =>
{
    btnCheck.BackColor = Color.Transparent;
    lblDescriptionValue.Text = t.Result.Description;
    lblItemCodeValue.Text = t.Result.Code;
    lblQuantityValue.Text = t.Result.AvailableQuantity.ToString();
}, TaskScheduler.FromCurrentSynchronizationContext()); 
```

# scheme - 如何在 Racket/Scheme 中重新定义函数“范围”？

> ID：13673660
> 
> 赞同：1
> 
> 时间：2012-12-02T20:44:59.613
> 
> 标签：scheme, range, racket

我正在尝试在 Racket 中重新定义函数“范围”。

```
(define (my-range a b)
  (if (> a b)
      null
      (cons a (my-range (+ 1 a) b))))

;; Test

(my-range 2 5)

;; -> (cons 2 (cons 3 (cons 4 (cons 5 empty)))) 
```

现在我想扩展`my-range`如下：

```
(define (my-range a b step) ...) 
```

例如`(my-range 2 6 1)`-->`(list 2 3 4 5)`

第一个数字是`a`，每个连续元素是通过添加`step`到前一个元素生成的。序列在大于或等于 的元素之前停止`b`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T22:06:49.327

重申一下，Racket 库中已经存在[范围；](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket/list..rkt%29._range%29%29)如果您不必重新定义它，只需使用标准库中的那个即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T21:58:49.460

从评论中我猜你已经找到了解决方案。为了完整起见，这里是：

```
(define (my-range a b step)
  (if (>= a b)
      null
      (cons a (my-range (+ step a) b step)))) 
```

事实上，这个过程是相当普遍的，它可以用多种方式表达。正如@dyoo 所指出的，[`range`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket/list..rkt%29._range%29%29)这是一个标准程序：

```
(define (my-range a b step)
  (range a b step)) 
```

此外，就 而言[`build-list`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Flist..rkt%29._build-list%29%29)，另一个标准的 Racket 程序：

```
(define (my-range a b step)
  (build-list (ceiling (/ (- b a) step))
              (lambda (x) (+ a (* step x))))) 
```

或使用[流](http://docs.racket-lang.org/reference/sequences.html#%28def._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._in-range%29%29)：

```
(define (my-range a b step)
  (stream->list (in-range a b step))) 
```

# java - 坐标 (ArrayList)

> ID：13673668
> 
> 赞同：0
> 
> 时间：2012-12-02T20:46:12.643
> 
> 标签：java, arraylist, coordinates

使用坐标时我在格式化时遇到问题。

```
public class Coordinate {
  public int x;
  public int y;

  public Coordinate( int x, int y) {
    this.x = x;
    this.y = y;
  }
} 
```

所以，后来，当我试图找到我的兔子的位置时，我使用：

```
 Coordinate (x, y) = rabbit.get(i); 
```

这不起作用，但这确实：

```
 Coordinate z = rabbit.get(i); 
```

我想找到 x 和 y 值，所以我对如何做到这一点以及为什么 Coordinate (x, y) 不起作用感到困惑。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:55:16.993

由于您的属性 x,y`Coordinate`是`public`：

```
Coordinate z = rabbit.get(i);
int xCor = z.x; //this is your x coordinate
int yCor = z.y; //this is your y coordinate 
```

通常这些属性是`private`，您可以使用 getter/setter-Method 访问它们：

```
public class Coordinate {
  private int x;
  private int y;

  public Coordinate( int x, int y) {
    this.x = x;
    this.y = y;
  }

  public int getX(){
    return this.x;
  }

  public void setX(int newX){
    this.x = newX;
  }
  //same for Y
}

//in the main program.
    Coordinate z = rabbit.get(i);
    int yourX = z.getX() //this is your x coordinate
    int yourY = z.getY() //this is your y coordinate 
```

我假设您使用 Java，所以我添加了`Tag`, 这可以突出显示。这以相同的方式适用于其他语言。

# azure - 如何在 Windows azure 上启用 CDN

> ID：13673669
> 
> 赞同：3
> 
> 时间：2012-12-02T20:46:16.577
> 
> 标签：azure

我尝试使用免费托管帐户在 Azure 上启用 CDN。我尝试按照这些说明进行操作，然后完成第 1 部分[http://www.windowsazure.com/en-us/develop/net/common-tasks/cdn/](http://www.windowsazure.com/en-us/develop/net/common-tasks/cdn/)但现在我似乎无法找到预览门户。我不知道说明是否已更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T20:55:53.443

**带我到上一个门户**链接不再存在。为了返回旧门户，您需要单击右上角的电子邮件地址/姓名，然后选择上**一个门户**选项。回到旧门户后，您可以按照本教程的其余部分进行操作。

# python - 多维数据和绘图图例

> ID：13673670
> 
> 赞同：2
> 
> 时间：2012-12-02T20:46:39.600
> 
> 标签：python, matplotlib

我有这个情节：

```
data = {'User 1': [1,2,3], 'User 2': [5, 8, 10], 'User 3': [80, 75, 100], 'User 4': [65, 80, 45]}
characteristics = [('commits', 'r'), ('intended h', 'g'), ('actual h', 'b')]

n_bars = (len(characteristics)+1)*len(data)

fig = plt.figure(figsize=(5,5))
ax = fig.add_axes([0.15, 0.15, 0.65, 0.7])
ax.spines['right'].set_color('none')
ax.spines['top'].set_color('none')
ax.set_yticklabels(data.keys())
ax.set_yticks(np.arange(len(characteristics)/2, n_bars, len(data)))

pers_id = 0
bar_id = 0

for name, data in data.iteritems():
    for char_id, characteristic in enumerate(characteristics):
        ax.barh(bar_id, data[char_id], facecolor=characteristic[1])
        bar_id = bar_id + 1
    ax.barh(bar_id, 100, facecolor='white', linewidth=0)
    bar_id += 1
    pers_id += 1

plt.savefig('perf.png')
plt.show() 
```

![在此处输入图像描述](../Images/53682a92592216ddb530331972589bc5.png)

我仍然需要的唯一大功能是在右上角添加一个图例，其中的标签`characteristics[i][0]`和颜色来自`characteristics[i][0]`.

我将如何让这个工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:14:50.917

[pandas](http://pandas.pydata.org/)有一些数据结构和方法来处理和绘制这些数据：

```
In [89]: import pandas as pd

In [90]: df = pd.DataFrame(data).T

In [91]: df.columns = [c[0] for c in characteristics]

In [92]: df
Out[92]: 
        commits  intended h  actual h
User 1        1           2         3
User 2        5           8        10
User 3       80          75       100
User 4       65          80        45

In [93]: colors = [c[1] for c in characteristics]

In [94]: df.sort_index(ascending=False).plot(kind='barh', color=colors) 
```

![pandas_barh](../Images/8cc8c3cac31dff6c67fbf111e1eec101.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:21:20.903

```
import matplotlib.pyplot as plt
import numpy as np
import collections

data = {'User 1': [1,2,3], 'User 2': [5, 8, 10], 'User 3': [80, 75, 100],
        'User 4': [65, 80, 45]}
characteristics = [('commits', 'r'), ('intended h', 'g'), ('actual h', 'b')]

n_bars = (len(characteristics)+1)*len(data)

fig = plt.figure(figsize=(5,5))
ax = fig.add_axes([0.15, 0.15, 0.65, 0.7])
ax.spines['right'].set_color('none')
ax.spines['top'].set_color('none')
ax.set_yticklabels(data.keys())
ax.set_yticks(np.arange(len(characteristics)/2, n_bars, len(data)))

pers_id = 0
bar_id = 0

artists = collections.deque(maxlen = len(characteristics))
labels = collections.deque(maxlen = len(characteristics))
for name, data in data.iteritems():
    for char_id, characteristic in enumerate(characteristics):
        artist, = ax.barh(bar_id, data[char_id], facecolor=characteristic[1])
        artists.append(artist)
        labels.append(characteristic[0])
        bar_id = bar_id + 1
    ax.barh(bar_id, 100, facecolor='white', linewidth=0)
    bar_id += 1
    pers_id += 1

plt.legend(artists, labels, loc = 'best')
# plt.savefig('perf.png')
plt.show() 
```

产量 ![在此处输入图像描述](../Images/7bddf891e8452c8b8cf83236ebbfad0f.png)

# c - 如何打印特定长度的输出？喜欢 %d 总是 50 个空格？

> ID：13673671
> 
> 赞同：0
> 
> 时间：2012-12-02T20:46:44.343
> 
> 标签：c

所以如果我有类似的输出

```
Hello How are you         500
Halllo                    500 
```

并且那个“500”总是应该在那个特定的位置，不管它前面有什么需要放什么？

我试过添加类似的东西

```
printf ("10%d", w.e);
printf ("\t\t%d", w.e); 
```

但是像“你好，你好吗”和“你好”这样的词总是会影响它并沿着同一条线进一步移动。如何将 500 输出定位在一个位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T20:49:49.130

您需要右填充前面的单词 ie`Hello How are you`和`Halllo`. 一旦它被填充，那么`500`将始终从相同的位置开始。

您可以将字符串右填充为：

```
 printf("%-30s", "Hello How are you");
      printf("%-30s", "Halllo"); 
```

这将为字符串分配 30 个字符长度。您的号码将跟随下一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:51:58.297

您可以使用 printf 指定前导字符串应占用的最小字符数，就像格式化数值时一样。

事实上，您可以在一次调用 printf（伪代码）中打印两者：

```
format_string = "%-30s%5.0d";
leading_text = "hello";
number = 500;
printf(format_string, leading_text, number); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T20:52:28.553

像这样的东西？

```
printf("%-50s%d\n", "Hello How are you", 500);
printf("%-50s%d\n", "Halllo", 500); 
```

打印出来：

```
Hello How are you                                 500
Halllo                                            500 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T21:06:07.317

这是另一种可能更灵活的方法：

```
printf("%*d\n", 50-printf("Halllo"), 500); 
```

# linq - 使用 LINQ 获取不加入的不同项目

> ID：13673674
> 
> 赞同：2
> 
> 时间：2012-12-02T20:46:57.683
> 
> 标签：linq

我在两个表之间运行 LINQ 查询并返回不匹配的答案集时遇到问题。

```
TB_AvailableProducts
-Prod_ID
-姓名
……
TB_Purchases
-Cust_ID
-Prod_ID

```

有没有办法通过使用 1 个 LINQ 查询来获取客户尚未购买的所有不同产品，或者我是否必须进行两个单独的查询，1 个用于所有产品，1 个用于购买的产品，然后比较两者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:14:14.907

此查询将返回购买表中没有相关记录的所有产品。

```
int customerID = 1;
var query = from ap in context.TB_AvailableProducts
            join p in context.TB_Purchases.Where(x => x.Cust_ID == customerID) 
                 on ap.Prod_ID equals p.Prod_ID into g
            where !g.Any()
            select ap; 
```

`Distinct`如果您的产品表中没有重复的记录，我认为您不需要在这里。

生成的 SQL 查询将如下所示：

```
SELECT ap.Prod_ID, ap.Name
FROM TB_AvailableProducts AS ap
WHERE NOT EXISTS (SELECT 
    1 AS C1
    FROM TB_Purchases AS p
    WHERE (1 = p.Cust_ID) AND (ap.Prod_ID = p.Prod_ID)
) 
```

# android - 重新打开已经关闭

> ID：13673677
> 
> 赞同：1
> 
> 时间：2012-12-02T20:47:20.063
> 
> 标签：android, sqlite

当我在中使用`getPesoCount()`类似时：

```
Log.v("SQL", String.valueOf(getPesoCount())); 
```

我收到一个错误：

> 致命异常：主要
> java.lang.IllegalStateException：尝试重新打开已经关闭的对象：android.database.sqlite.SQLiteQuery(mSql = SELECT * FROM pesoTable)...

```
 public void addPeso(int peso, String date) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_PESO, peso); // Contact Name
        values.put(KEY_DATE, date); // Contact Phone Number

        // Inserting Row
        db.insert(TABLE_PESO, null, values);
        Log.v("SQL", String.valueOf(getPesoCount()));
        db.close(); // Closing database connection

    }

    public int getPesoCount() {
        String countQuery = "SELECT  * FROM " + TABLE_PESO;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        cursor.close();

        // return count
        return cursor.getCount();
    } 
```

如果我不使用 `getPesoCount()`，则不会发生错误。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:57:14.240

```
attempt to re-open an already-closed object: 
```

异常告诉你很多！

如果您想`cursor`进一步使用，请不要`cursor.close();`在确定不再需要它时调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:58:30.093

```
 public void addPeso(int peso, String date) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_PESO, peso); // Contact Name
        values.put(KEY_DATE, date); // Contact Phone Number

        // Inserting Row
        db.insert(TABLE_PESO, null, values);
        Log.v("SQL", String.valueOf(getPesoCount(db)));
        db.close(); // Closing database connection

    }

    public int getPesoCount(db) {
        String countQuery = "SELECT  * FROM " + TABLE_PESO;
        Cursor cursor = db.rawQuery(countQuery, null);
        int count = cursor.getCount();
        cursor.close();
        return count;
    } 
```

# android - MAP COLLECTION 是否可以使用 Android 应用程序？

> ID：13673678
> 
> 赞同：-2
> 
> 时间：2012-12-02T20:47:30.067
> 
> 标签：android

嗨，我们可以为 android 实现 Map Collections 吗？还是只是数组？我正在尝试实现一个黄页应用程序，我想知道是否可以使用地图将名称和数字作为键和值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:50:16.853

是的，您可以 - 我建议您阅读有关 java 集合的[本教程。](http://docs.oracle.com/javase/tutorial/collections/interfaces/index.html)
特别是，您有几个[地图实现](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)，例如 HashMap 和 LinkedHashMap。

# android - 用android做数据库？

> ID：13673680
> 
> 赞同：0
> 
> 时间：2012-12-02T20:47:40.323
> 
> 标签：android, database, sqlite, provider

我正在开发一个需要写入创建的数据库并稍后从中读取的 android 项目。

这个想法是让用户填写表格然后提交，它将提交到第一行的数据库表中。然后，如果他们再次点击提交，它将提交到第二行。

我已经定义了所有的活动布局，但我对如何制作数据库感到困惑。我在想也许我可以做一个内容提供商？

谁能告诉我该怎么做？我在这里看到的所有问题都跳过了婴儿步骤，这就是我需要的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:51:05.337

是的，你应该做一个内容提供者。有很多很棒的数据库制作教程——试试这个的第 8.0 节

*   [http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T20:58:56.893

由于您计划使用已定义数据库结构的预加载（创建）数据库，请参阅此链接以了解如何将预创建的数据库文件包含到您的应用程序中：

[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

然后将新数据添加到您的数据库中，请参阅此教程。您可以忽略此处的创建表部分，因为您已经准备好表结构。

[http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T20:52:37.917

谷歌有大量的 Android 开发手册[http://developer.android.com/training/basics/data-storage/databases.html](http://developer.android.com/training/basics/data-storage/databases.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T20:52:42.890

它也可以在没有内容提供者的情况下完成。

这可能会有所帮助。

[http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-02T20:55:01.063

首先，您不需要内容提供者...仅当您想将数据提供给其他应用程序时才需要内容提供者...它是其他应用程序的数据中央存储库。

现在你必须在android中使用SQLITE数据库......因为android支持sqlite数据库......下面的链接将指导你...... [http://developer.android.com/training/basics/data-storage/databases.html](http://developer.android.com/training/basics/data-storage/databases.html)

# linux - 在 Linux 上的 clock_nanosleep 之后调度。改善起床时间

> ID：13673683
> 
> 赞同：1
> 
> 时间：2012-12-02T20:47:52.407
> 
> 标签：linux, scheduling, sleep

我要求尽可能精确地保持 10 毫秒的间隔。

我使用 clock_nanosleep 和绝对时间唤醒点（每次唤醒后增加 10 毫秒）和 CLOCK_MONOTONIC 显然。

在我的桌面上，唤醒后调用的 Ubuntu 11.04 clock_gettime 显示我的程序平均晚了 1 毫秒。

现在使用 Linux 调度程序模式：

*   SCHED_IDLE，程序平均晚唤醒 2ms
*   SCHED_RR，程序唤醒平均晚 0.9 毫秒...

无论系统是空闲还是运行几个副本，结果都是相同的： dd if=/dev/zero of=/dev/null 用于 aritifical cpu 负载。

我的调度程序参数（sched 最小粒度、唤醒粒度、sched 延迟）被减少到尽可能少，但没有任何区别。

我还没有在任何其他桌面上尝试过，不确定是否可以使用带有股票 Ubuntu 和 Intel core i5 的 clock_nanosleep 获得预期的精度，或者我的系统有问题。

PS。归根结底，当使用非阻塞调用将数据传送到音频设备时，这种 clock_nanosleep 行为会导致音频播放期间的延迟增加（欠载），中继阻塞调用可以解决问题，就像使用时没有调度问题一样并在阻止呼叫后醒来。

# excel - VBA 十进制值

> ID：13673686
> 
> 赞同：1
> 
> 时间：2012-12-02T20:48:00.847
> 
> 标签：excel, vba

下面的例程将 activecell 整数替换为数字之前的数字和 = 以及右侧两列的数字，但当数字为十进制时显示错误 1004。

我该如何解决？

```
 Sub EnterEqual()
     Dim CellContent As Variant
     Dim cell As Variant

    For Each cell In Selection
        CellContent = cell.Value
        cell.ClearContents
        cell.Value = "=" & CellContent & "+" & "rc[2]"
    Next cell

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:55:09.387

```
Sub EnterEqual()
     Dim CellContent As Integer '-- not sure why you need to use variant here
     Dim cell As Range '-- this has to be a range object

    For Each cell In Selection
        CellContent = cell.Value
        cell.ClearContents
        '-- you may add this as a formula
        cell.formula = "=" & CellContent & "+" & "RC[2]"
        '-- or use the below formular1c1
        cell.FormulaR1C1 = "=" & CellContent & " + " & "RC[2]"
    Next cell
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:19:57.877

要更新单元格公式，您需要使用其中一个`.Formula`属性。从您对 bonCodigo 的评论来看，您的本地数字格式似乎`,`用于小数点，所以使用这个

```
Sub EnterEqual()
     Dim CellContent As Variant
     Dim cell As Range  ' <=== change type

    For Each cell In Selection
        CellContent = cell.Value  ' This get the result of any existing formula as a value.  
        cell.ClearContents
        cell.FormulaR1C1Local = "=" & CellContent & "+" & "rc[2]"
    Next cell
End Sub 
```

# mysql - MYSQL5.1 计算日期的查询？

> ID：13673689
> 
> 赞同：0
> 
> 时间：2012-12-02T20:48:34.317
> 
> 标签：mysql, date, count

我需要帮助的第一个查询 - 我有一个名为 Stadium 的表，其中包含有关不同体育场的信息。每天可以在某个体育场进行多场比赛。Stadium.Number 是指体育场的编号，Stadium.Date 是指比赛的日期。我需要查询每个 Stadium.Number 的列表，其中举办最多比赛的日期。如果某个体育场有两个具有相同比赛次数的日期，则它们都应显示。

例如下面的数据：

```
Stadium 1, 2012-03-19
Stadium 1, 2012-08-14
Stadium 1, 2012-08-14
Stadium 2, 2012-09-15
Stadium 2, 2012-09-15
Stadium 2, 2012-03-20
Stadium 2, 2012-03-20
Stadium 3, 2012-11-20 
```

查询应返回：

```
 Stadium.Number   Busiest Date
                     Stadium 1,       2012-08-14
                     Stadium 2,       2012-09-15    (shows this and below 
                     Stadium 2,       2012-03-20     because they both have count 2)
                     Stadium 3,       2012-11-20 
```

到目前为止，我有以下内容，但它不能按我的意愿工作：

```
SELECT Number, Date, count(Date)
FROM Stadium
group by Number,Date
order by count(Date) desc 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:50:34.147

您可能想使用：

```
 MAX(count(Date)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:14:26.597

这个丑陋的野兽（[sql fiddle](http://www.sqlfiddle.com/#!2/489dc/33)）是我能想到的第一件事。

```
select s.number, s.date, s.d
from (
    select number, date, count(date) as d
    from Stadium
    group by number, date
) s, (
    select number, date, max(d) m
    from (
        select number, date, count(date) d
        from Stadium
        group by number, date
    ) dates1
    group by number
) d2
where s.number = d2.number
and s.d = d2.m
; 
```

# c# - XtraReport 的占位符类型标签

> ID：13673690
> 
> 赞同：0
> 
> 时间：2012-12-02T20:48:42.657
> 
> 标签：c#, devexpress, xtrareport

我正在寻找一种在 XtraReport 控件中添加标签和绑定文本的方法。我可以在左上角放置标签并将数据源中的文本绑定到右中对齐。这样的控制存在吗？其他一些解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:05:51.983

既然你有

> 从数据源绑定文本

我建议您首先将数据源绑定到乐队。将数据源绑定到报表带后，只需将 XRLabel（XtraLabel 不正确）拖放到报表文档中即可。在该标签控件上，使用它的智能标记将其绑定到数据源中的表 > 字段。

附加阅读

*   [向报告提供数据](http://documentation.devexpress.com/#XtraReports/CustomDocument2594)
*   [创建数据感知报告](http://documentation.devexpress.com/#XtraReports/CustomDocument2596)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:17:41.127

您可以使用 string.Format 作为 label.text。因此，您可以在标签中设置变量 Text。

```
label.text = string.Format("Hello, {0}", myVariable); 
```

因此，将变量提供给报表的构造函数并使用它来创建动态标签。

我希望我能理解你的问题。

问候

# javascript - Jquery ajax 调用在每个请求上呈指数增长

> ID：13673711
> 
> 赞同：3
> 
> 时间：2012-12-02T20:51:15.840
> 
> 标签：javascript, jquery-ui, jquery

我使用 Jquery-ajax 调用将信息发布到页面并显示返回的信息。我遇到的问题如下：

当用户进行第一次 ajax 调用时，一切似乎都很正常。当用户没有重新加载页面并第二次发出相同的请求时，会进行 2 次 post-call 和 get-call。第三次有 4post+4get 请求。第四次 8Post/8Gets。依此类推..直到浏览器（firefox latest v.）冻结一段时间。

我是一个初级程序员，我不知道原因可能是什么。我不知道在哪里查看我的代码。前提是你们可以给我一个提示。我的其他 ajax 请求很好，只发布+获取一次。

萤火虫日志： ![这是萤火虫的截图](../Images/a0dc86f5b7b16f4a40f7b3ab7535fbd1.png)

这是我的一段代码：

```
$(document).ready(function() {
    $('#datepicker').change(function()
    {
        sendDate($('#datepicker').val());               
    });
});

    function sendDate(str)
    {
        $.ajax(
        {
            type: "POST",
            url: "manage_processor.php",
            data: { chosendate: str },
            success: function(data)
            {
                $('#printdiv').html(data);              
            }
        });     
    } 
```

希望任何人都可以对这种情况有所了解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T21:09:09.697

如果我可以大胆猜测，我怀疑返回的数据包含引用您的 javascript 文件的脚本标记。这将解释您看到的 GET 请求。每次将请求数据放入 #printdiv 时，您的脚本都会再次加载，并且相同的 javascript 处理程序将绑定到相同的事件。这可以解释每次请求后处理程序的数量增加一倍。

快速测试：放置console.log('脚本加载'); 在 manage_functions.js 的顶部。如果我是对的，它会在每次请求后记录。

# python - 在方法中具有递归的自定义类，未定义全局名称

> ID：13673714
> 
> 赞同：2
> 
> 时间：2012-12-02T20:51:26.870
> 
> 标签：python

我正在尝试实现一个使用递归所必需的方法，但每次，我都会收到`global name not defined`错误我的类看起来像这样：

```
class MyClass(object):
    def _init_(self, name=None, content=None):
        self.name = name
        self.content = content 
```

它是一个节点类，命名它只是一个文本字符串，内容是它的子节点列表（它们也是节点），初始化为`None`但是如果它们没有子节点，则构建树的构造函数会给它们一个空白列表。该类工作正常，该功能也可以，但是如果我尝试向方法添加递归，它们就不起作用，即使它们作为独立函数工作得很好，即：

```
def get_nodes(self):
    c = [] 
    c.append(self.name)
    if self.content != []:
        for a in self.content:
            c.extend(get_nodes(a))
    return c 
```

我知道这是可能的，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T20:52:49.010

你需要做`a.get_nodes()`。

还调用了初始化方法`__init__`，而不是`_init_`（两端的两个下划线）。

编辑：如果您不显示您的代码，我们无法告诉您您的代码有什么问题。这段代码对我有用：

```
class MyClass(object):
    def __init__(self, name=None, content=None):
        self.name = name
        self.content = content
    def get_nodes(self):
        c = [] 
        c.append(self.name)
        if self.content != []:
            for a in self.content:
                c.extend(a.get_nodes())
        return c

>>> n = MyClass('me', [])
>>> m = MyClass('other', [n])
>>> m.get_nodes()
['other', 'me'] 
```

如果您的代码不起作用，那么您必须解释您的代码与该代码有何不同。

# sql - 在 SQL 连接结果中查找组最大值

> ID：13673717
> 
> 赞同：1
> 
> 时间：2012-12-02T20:51:49.287
> 
> 标签：sql, postgresql, activerecord, join

> **可能重复：**
> [SQL：选择每个 GROUP BY 组中的第一行？](https://stackoverflow.com/questions/3800551/sql-select-first-row-in-each-group-by-group)

两个 SQL 表。一位参赛者有许多参赛作品：

```
Contestants     Entries
Id   Name       Id  Contestant_Id  Score
--   ----       --  -------------  -----
1    Fred       1   3              100
2    Mary       2   3              22
3    Irving     3   1              888
4    Grizelda   4   4              123
                5   1              19
                6   3              50 
```

低分获胜。需要检索按分数排序的所有参赛者的当前最佳分数：

```
Best Entries Report
Name     Entry_Id  Score
----     --------  -----
Fred     5         19
Irving   2         22
Grizelda 4         123 
```

我当然可以通过许多查询来完成这项工作。我的问题是是否有办法通过一个高效的 SQL 查询来获得结果。我几乎可以看到如何使用`GROUP BY`，但不完全是。

如果相关，环境是 Rails ActiveRecord 和 PostgreSQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:09:33.867

最简单的方法是使用排名函数：

```
select name, Entry_id, score
from (select e.*, c.name,
             row_number() over (partition by e.contestant_id order by score) as seqnum
      from entries e join
           contestants c
           on c.Contestant_id = c.id
     ) ec
where seqnum = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:11:11.773

我不熟悉 PostgreSQL，但是这些方面的东西应该可以工作：

```
SELECT c.*, s.Score
FROM Contestants c
JOIN (SELECT MIN(Score) Score, Contestant_Id FROM Entries GROUP BY Contestant_Id) s
ON c.Id=s.Contestant_Id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T21:17:22.313

解决方案之一是

```
select min(e.score),c.name,c.id from entries e
inner join contestants c on e.contestant_id = c.id
group by e.contestant_id,c.name,c.id 
```

这是示例 [http://sqlfiddle.com/#!3/9e307/27](http://sqlfiddle.com/#!3/9e307/27)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T21:18:27.307

这个简单的查询应该可以解决问题..

```
Select contestants.name as name, entries.id as entry_id,  MIN(entries.score) as score
FROM entries
JOIN contestants ON contestants.id = entries.contestant_id
GROUP BY name
ORDER BY score 
```

这会获取每个参赛者的最低分数并命令他们 ASC

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-02T23:01:09.240

这是执行此操作的特定 postgresql 方式：

```
SELECT DISTINCT ON (c.id) c.name, e.id, e.score
FROM Contestants c
JOIN Entries e ON c.id = e.Contestant_id
ORDER BY c.id, e.score 
```

有关的详细信息`DISTINCT ON`在[这里](http://www.postgresql.org/docs/current/static/sql-select.html)。

我的[SQLFiddle](http://sqlfiddle.com/#!12/23cff/2)示例。

UPD 按分数排序结果：

```
SELECT *
FROM (SELECT DISTINCT ON (c.id) c.name, e.id, e.score
      FROM Contestants c
      JOIN Entries e ON c.id = e.Contestant_id
      ORDER BY c.id, e.score) t
ORDER BY score 
```

# ajax - 需要从spring mvc控制器返回json数据

> ID：13673719
> 
> 赞同：1
> 
> 时间：2012-12-02T20:51:57.570
> 
> 标签：ajax, json, spring, jakarta-ee

我正在尝试从进行 ajax 调用的 spring mvc 控制器返回一个 Map，但我没有得到正确的响应。

我在我的配置文件中使用了 mvc 注释标记，并且还在我的库中包含了 jackson jar 文件。

我的要求是将 Map 返回到我的 Ajax 调用成功，以便我可以修改 html 中的表行。

控制器代码：

```
@RequestMapping(value="/pricingrecall.do", method=RequestMethod.POST)
    @ResponseBody
    public Map<Integer,String>  pricingUpdate(@RequestParam(value = "opp_Code", required = false) String opp_Code,
            @RequestParam(value = "ref_id", required = false) String ref_id,
            ModelMap model,
            HttpServletRequest request, HttpServletResponse response) throws SQLException, Exception{

            String User="fe0777";
        List<CrossListViewBean>updatedRow = new ArrayList<CrossListViewBean>();
        //String message="";
        logger.info(methodLocation+"|"+"Calling pricing recall ....");
        Map<String, Object> result = new HashMap<String, Object>();
        updatedRow=crossCampService.getupdatedrowListview(opp_Code, ref_id, user);
        Map<Integer,String> lbean= new HashMap<Integer,String>(); 
        lbean=crossCampService.getUpdatedDataPosition(updatedRow.get(0));
        return lbean;

    } 
```

来自阿贾克斯的电话：

```
 jQuery.ajax( {                                         
                                    url : '/Web/pricingrecall.do',
                type: "POST",
                cache : false,
                timeout : 60000,
                data : {
                    opp_Code :CampId ,
                    ref_id : index
                },
                success : function(result, textStatus, request) {
                    if(result)
                    {   
                        alert(result);
                        //jQuery(".note"+index).html(data);

                    }else
                    {
                        alert("The user session has timed out. Please log back in to the service.");
                        window.location.replace("logout.do");
                    }
                },
                error : function(request, textStatus, errorThrown) {
                    alert("The system has encountered an unexpected error or is currently unavailable. Please contact the support number above if you have any questions.");
                }
            }); 
```

在 ajax 成功中，我总是遇到错误，它被转移到错误字符串中。我如何在ajax成功中从MAP获取Json

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:44:20.103

我正在使用 flexjson 来获得正确的 json 输出。我正在使用 flexjson 附加我的示例代码。您可以将其用作参考并重组您的控制器方法以输出正确的 json。此[链接](https://stackoverflow.com/questions/12582752/how-to-serialize-mapstring-listobject-with-flexjson)将帮助您如何序列化地图。

```
@RequestMapping(value = "/{id}", headers = "Accept=application/json")
@ResponseBody
public ResponseEntity<String> findUser(@PathVariable("id") Long id) {
     User user = userService.find(id);

     HttpHeaders headers = new HttpHeaders();
     headers.add("Content-Type", "application/json; charset=utf-8");

     return new ResponseEntity<String>(user.toJson(), headers, HttpStatus.OK); 
}

@Entity
public class AppUser {
    @NotNull
    private String firstName;

    @NotNull
    private String lastName;

    //Getter Setter goes here

    public String AppUser.toJson() {
       return new JSONSerializer().exclude("*.class").serialize(this);
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T06:37:42.660

我在控制器方法上使用了 jackson-databind 和 @ResponseBody 注释，它自动将返回的数据成功转换为 json。如果您使用 maven，请将这些依赖项添加到您的 pom.xml 中（jackson.version 对我来说是 2.4.0）。

```
<dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-core</artifactId>
        <version>${jackson.version}</version>
    </dependency>
    <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-annotations</artifactId>
        <version>${jackson.version}</version>
    </dependency>
    <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-databind</artifactId>
        <version>${jackson.version}</version>
    </dependency> 
```

否则，您可以将 jar 文件添加到类路径中。

# visual-studio-lightswitch - Lightswitch 2012 菜单和功能区丢失

> ID：13673722
> 
> 赞同：0
> 
> 时间：2012-12-02T20:52:27.790
> 
> 标签：visual-studio-lightswitch

我在 Windows 7 机器上使用 Visual Studio 2012 附带的 Lightswitch，即使是简单的教程项目，顶部功能区控件和左侧菜单也不会出现。此外，在“属性”、“应用程序类型”下，我有桌面或 Web 选项，但没有应用程序服务器或 Azure 的附加控件。这是一台新的开发机器，我确认 IIS 已打开并正在运行，但可能缺少配置步骤或服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:29:26.037

感谢 Yann Duran，他是 MSDN 上 LightSwitch 论坛的版主之一。他说我在关注 2011 年的教程，需要将主题从 VS 2012 附带的新主题更改。我将 Shell 值（在 Properties、General Properties 下）更改为 Lightswitch Standard Shell，一切正常。

虽然这解决了我的问题，但它提出了一个新问题。为什么 Lightswitch 的 vanilla 教程不能使用新主题在 VS 2012 上生成一个工作应用程序？也许是另一天的问题。

# c# - 设置文件夹创建的写入权限

> ID：13673724
> 
> 赞同：1
> 
> 时间：2012-12-02T20:52:32.657
> 
> 标签：c#, asp.net, sql-server, iis

嗨，我一直在尝试正确配置 IIS 6 以提供写入权限大约 2 天，但我似乎找不到任何好的资源。我对 ASP.NET 有点陌生，直到现在我从来没有工作过与 IIS。

我要做的是将文件上传到服务器。服务器上的每个用户都将拥有自己的特殊文件夹，该文件夹将通过 C# 自动创建。现在当我尝试上传文件时，出现此错误：

> 拒绝访问路径“D:\Projects IDE\Visual Studio\MyWork\Websites\Forum\Images\avatar\userAvatars\aleczandru”

这是我为每个用户创建文件夹并保存文件的代码：

```
private void addImageToApp()
{
    string path = "~/Images/avatar/userAvatars/" + User.Identity.Name;

    createPath(path);
    if( Directory.Exists(HostingEnvironment.MapPath(path)))
    {
        try {
              UploadImage.SaveAs(HostingEnvironment.MapPath(path));
              MultiViewIndex.ActiveViewIndex = 0;
        }catch(Exception ex)
        {
               AvatarDetails.Text = ex.Message;
        }  
    }
}

private void createPath(string path)
{  
    string activeDir = HostingEnvironment.MapPath("~/Images/avatar/userAvatars");
    if( !Directory.Exists(Server.MapPath(path)) )
    {
        string newPath = Path.Combine(activeDir, User.Identity.Name);
        Directory.CreateDirectory(newPath);
    }
} 
```

我在互联网上所能找到的只是我必须通过文件夹/属性/安全/...添加写权限，虽然这一切都很好，但我不能为每个文件夹都这样做。

到目前为止，我还不确定 IIS 是否是我需要配置的，我对此有点迷茫。

我必须做什么才能在文件夹创建时自动授予文件夹写入权限？

如果有人有一篇很好的文章或教程来说明如何做到这一点，请与我分享我能找到的所有信息都是非常基本的。

**编辑**

我已将网络服务帐户添加到具有完全权限的图像文件夹中，并将应用程序的池标识设置为 NetworkService，但我仍然收到相同的错误

**编辑**

在过去的几天里，为了完成这项工作，我一直在使用 SQL-SERVER，所以我可能错误地配置了一些我理解的网络服务存储在 SQL-SERVER master.db 数据库中的东西。我似乎有两个网络服务登录可能是这个问题吗？我记得当我第一次检查它时我没有现在我有两个：

![在此处输入图像描述](../Images/00081bcf18026343300e37c570110802.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T21:52:11.013

简单地说，当您的 asp.net 应用程序运行时，您可以打开任务管理器并找到进程`w3wp`。W3wp 进程与任何其他进程一样具有用户身份（默认情况下 - 应用程序池身份 - `DefaultAppPool`（如应用程序池名称））。如果是这样，您应该为名为的用户添加写权限`DefaultAppPool`。为此，您应该在文件夹的属性窗口中打开安全选项卡，然后`change`->`add`并键入`IIS AppPool/DefaultAppPool`并选择本地计算机。

[这篇](https://stackoverflow.com/questions/5437723/iis-apppoolidentity-and-file-system-write-access-permissions)文章应该对你有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T18:55:41.913

和这个没关系`IIS`，兄弟。您需要做的就是打开您的`IIS`. 去`Application Pool`。右键单击您的网站正在运行的应用程序池。选择“高级设置”并查看针对 IDENTITY 所做的条目。将其更改为使用`NetworkService`. 这意味着您`NETWORK SERVICE`现在将在帐户下运行您的网站。

现在右键单击您的根图像文件夹，即“图像”。选择`PROPERTIES`。选择`SECURITY`。添加 user `NETWORK SERVICE`，并授予它`FULL RIGHTS`对该文件夹的权限。

现在，每当您通过代码在此“图像”文件夹下创建文件夹和文件时，它将自动从其父级继承权限，您将允许您做任何您想做的事情（添加/删除）。

我希望这回答了你的问题。如果是，请将其标记为“已回答”。

# c# - 允许按键访问项目但不需要重复检查添加的集合？

> ID：13673725
> 
> 赞同：0
> 
> 时间：2012-12-02T20:52:32.703
> 
> 标签：c#, performance, collections, dictionary

我要求的东西有点奇怪，但这是我的要求（这有点计算密集型，到目前为止我在任何地方都找不到）..

我需要`<TKey, TValue>`大约 30 件物品的集合。但是该集合用于大规模嵌套`foreach`循环，这些循环可能会严重迭代近十亿次。收集操作很简单，看起来像：

```
 Dictionary<Position, Value> _cells = new 

_cells.Clear();
_cells.Add(Position.p1, v1);
_cells.Add(Position.p2, v2);
//etc 
```

简而言之，无非是增加了大约 30 件物品并清理了收藏。此外，这些值将在某个时候从其他地方读取。我需要按键读取/检索。所以我需要一些类似于`Dictionary`. 现在，由于我试图从 CPU 中挤出每一盎司，我也在寻找一些微优化。一方面，我不需要集合在添加时检查是否存在重复项（与添加项相比，这通常会使字典变慢`List<T>`）。我知道我不会将重复项作为键传递。

由于`Add`方法会做一些检查，所以我尝试了这个：

```
_cells[Position.p1] = v1; 
_cells[Position.p2] = v2;
//etc 
```

`List<T>`但是对于大约 10k 次迭代，这仍然比这样的典型实现慢了大约 200 毫秒：

```
List<KeyValuePair<Position, Value>> _cells = new 

_cells.Add(new KeyValuePair<Position, Value>(Position.p1, v1));
_cells.Add(new KeyValuePair<Position, Value>(Position.p2, v2));
//etc 
```

现在，在完全迭代后，这可以扩展到一个明显的时间。*请注意，在上述情况下，我已按索引从列表中读取项目（这对于测试目的来说是可以的）*。对我们来说，常规的问题`List<T>`很多，主要原因是无法通过密钥访问项目。

简而言之，我的问题是：

1.  是否有一个自定义集合类可以让按键访问项目，但在添加时绕过重复检查？任何第三方开源集合都可以。

2.  或者请给我指出一个好的入门者如何从`IDictionary<TKey, TValue>`接口实现我的自定义集合类

**更新：**

我听从了 MiMo 的建议，List 还是更快。也许它与创建字典的开销有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:58:25.570

> 但这仍然比像这样的典型 List 实现慢了大约十次迭代

仅添加 30 个值的十次迭代会慢几毫秒？我不相信。除非您的散列/相等例程非常慢，否则仅添加几个值应该花费很少*的时间。*（这可能是一个真正的问题。我已经看到通过将关键选择调整为可以快速散列的东西来大幅改进代码。）

如果它*真的*需要更长的毫秒时间，我会敦促你检查你的诊断。

但总体而言它速度较慢也就不足为奇了：它正在做更多的工作。对于列表，它只*需要*检查是否需要增加缓冲区，然后写入数组元素，并增加大小。就是这样。没有散​​列，没有计算正确的桶。

> 是否有一个自定义集合类可以让按键访问项目，但在添加时绕过重复检查？

不。您要避免的工作正是使以后可以通过密钥快速访问的原因。

**但是，您何时**需要通过键执行查找？您是否经常在不查找密钥的情况下使用集合？执行键查找时集合有多大？

也许您应该建立一个键/值对列表，并且仅在您完成编写并准备开始查找时将其转换为字典。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T21:08:21.813

我的建议是从[源代码`Dictionary<TKey, TValue>`](http://reflector.webtropy.com/default.aspx/Net/Net/3@5@50727@3053/DEVDIV/depot/DevDiv/releases/whidbey/netfxsp/ndp/clr/src/BCL/System/Collections/Generic/Dictionary@cs/5/Dictionary@cs)开始并对其进行更改以针对您的具体情况进行优化。

您不必支持删除单个键/值对，这可能有助于简化代码。似乎还可以检查您可以摆脱的密钥等的有效性。

# assembly - 带有空格字符的汇编语言错误

> ID：13673727
> 
> 赞同：0
> 
> 时间：2012-12-02T20:52:37.447
> 
> 标签：assembly, x86, x86-16

一旦输入了空格字符，我的输入就很难打印出来。到目前为止，我让它显示输入的大写/小写，但是一旦我输入一个字符串，它就不会读取空格字符之后的内容。有什么建议么？

编辑：英特尔 x86 处理器和即时通讯使用 EMU8086

```
org 100h

include 'emu8086.inc'
printn "Enter string to convert" 
mov dx,20
call get_string

printn
mov bx,di
mov ah,0eh

mov al,[ds+bx]
cmp al, 41h

cmp al, 5Ah
jle ToLower1
cmp al, 61h
cmp al, 7ah
jle ToUpper1

ToLower1:
add al, 20h
int 10h
jmp stop1
ToUpper1:
sub al, 20h
int 10h
stop1:

inc bx
mov al,[ds+bx]
cmp al, 41h

cmp al, 5Ah
jle ToLower2
cmp al, 61h

cmp al, 7ah
jle ToUpper2

ToLower2:
add al, 20h
int 10h
jmp stop2
ToUpper2:
sub al, 20h
int 10h
stop2:

inc bx
mov al,[ds+bx]
cmp al, 41h

cmp al, 5Ah
jle ToLower3
cmp al, 61h

cmp al, 7ah
jle ToUpper3

ToLower3:
add al, 20h
int 10h
jmp stop3
ToUpper3:
sub al, 20h
int 10h
stop3:

inc bx
mov al,[ds+bx]
cmp al, 41h

cmp al, 5Ah
jle ToLower4
cmp al, 61h

cmp al, 7ah
jle ToUpper4

ToLower4:
add al, 20h
int 10h
jmp stop4
ToUpper4:
sub al, 20h
int 10h
stop4:

inc bx
mov al,[ds+bx]
cmp al, 41h

cmp al, 5Ah
jle ToLower5
cmp al, 61h
cmp al, 7ah
jle ToUpper5

ToLower5:
add al, 20h
int 10h
jmp stop5
ToUpper5:
sub al, 20h
int 10h
stop5:

printn
hlt
define_get_string
define_print_string
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:02:34.737

@Oded，这些寄存器是 x86，而 emu8086 意味着 8086 CPU 的模拟器。

@OP：好吧，您将 32 添加到字符代码以使其右下角？ASCII 码`space`是 32，符号的 ASCII 码`@`是 64 对吧？那应该告诉您您的比较在某处是错误的。

```
cmp al, 41h ;A
; WHAT ARE YOU MISSING HERE?
cmp al, 5Ah ;Z
jle ToLower1

cmp al, 61h ;a
; WHAT ARE YOU MISSING HERE?
cmp al, 7ah ;z
jle ToUpper1 
```

你看到错误了吗？这基本上是告诉 CPU 当前字符是否等于或小于`Z`降低。此外，如果字符等于或小于 z 则为大写。

所以你有的是：

你需要一个条件跳转之后`cmp al, 41H`和一个条件跳转之后`cmp al, 61H`

但这仍然行不通，这应该行得通：

```
cmp     al, 41H
jb      CheckForLower
cmp     al, 5AH
ja     CheckForLower
; convert to lowercase here
; Process next char

cmp     al, 61H
jb      NotValid
cmp     al, 7AH
ja      NotValid
; convert to uppercase here
; Process next char 
```

*** 编辑 *** 我们可以将所有代码压缩成 1 个循环：

```
org 100h

include 'emu8086.inc'
printn "Enter string to convert" 
    mov     dx,20
    call    get_string

printn
    mov     bx, di
    mov     ah,0eh 

    jmp     Start  

NextChar:
    inc     bx 

Start:
    mov     al, [ds+bx]   
    test    al, al
    jz      stop5      

    cmp     al, 20H    
    je      PrintChar   

    cmp     al, 41H    
    jb      CheckLower  
    cmp     al, 5AH
    ja      CheckLower
    add     al, 20H   
    int     10H
    jmp     NextChar

CheckLower:
    cmp     al, 61H
    jb      NextChar
    cmp     al, 7AH
    ja      NextChar
    sub     al, 20H           

PrintChar:
    int     10H
    jmp     NextChar 

stop5:
    printn  
    hlt
    define_get_string
    define_print_string
end 
```

# jquery - 如何在 jQuery 中添加第二个动画？

> ID：13673742
> 
> 赞同：0
> 
> 时间：2012-12-02T20:54:20.177
> 
> 标签：jquery

我正在尝试实现图像缩放效果（因为它位于溢出的容器中：隐藏，增加它的宽度并向左滑动应该可以解决问题）。

我设法让它增加它的宽度：

```
/* Zoom in images */
$('img.vectimg').load(function() {
    $(this).data('width', this.width);
}).bind('mouseenter mouseleave', function(e) {
    $(this).stop().animate({
        width: $(this).data('width') * (e.type === 'mouseenter' ?  1.2 : 1)
    });
}); 
```

但是如何添加动画以将其向左移动？我尝试附加这个 / 但它没有奏效。

```
$(this).stop().animate({
            left: $(this).position().left  + 500
        }); 
```

我是一个完整的新手，所以请不要让我难过:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:55:41.580

您可以在同一个`animate()`调用中添加多个属性。

```
$(this).stop().animate({
    width: $(this).data('width') * (e.type === 'mouseenter' ?  1.2 : 1),
    left: $(this).position().left + (e.type === 'mouseenter' ? 500 : -500)
}); 
```

阅读更多：[http ://api.jquery.com/animate/](http://api.jquery.com/animate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:58:16.850

下一个动画使用 jQuery`animate()`回调函数。

在此处查看文档[。](http://api.jquery.com/animate/)

**注意**：您必须将元素设置`position`为`relative`（在 CSS 中）才能操作左、右属性等。

# jquery - jQuery高亮/放大悬停的项目并使其他项目变暗

> ID：13673751
> 
> 赞同：0
> 
> 时间：2012-12-02T20:55:12.023
> 
> 标签：jquery, mouseover, zooming, jquery-effects, jquery-hover

嘿，我正在尽我最大的努力找到一种方法，当鼠标悬停在上面时，将其周围的其他选项变暗，并缩放（向前）鼠标当前所在的悬停项目。

我的代码可以在这里找到 >[代码链接](http://jsfiddle.net/WmwRZ/)

我有没有选择的淡入淡出的项目工作得很好......只需要帮助放大悬停的项目！

我目前用于缩放效果的代码很糟糕，根本不起作用......

```
$('.category-container').bind('mouseover',function() {
    $(this).addClass('hover').stop(true,true);
    $('.category-container').not('.hover').stop(true,true).fadeTo('fast',0.2).animate({
    width: '2em',
    height: '2em',
}, 200);

});
$('.category-container').bind('mouseout',function() {
    $('.category-container').removeClass('hover').stop(true,true).fadeTo('fast',1);
});​ 
```

任何帮助都会很棒！

**更新**

我得到了我想要的效果......如果你在没有先让列表先淡入的情况下从一个移到另一个，似乎不会淡入该项目：[新代码](http://jsfiddle.net/WmwRZ/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:18:07.493

更改`mouseover`代码中的最后一行以淡出所有元素，然后在其后面加上`fadeTo`悬停的元素。您的代码对悬停在哪个元素上感到困惑，因此最好明确使用`$(this)`：

```
$('.category-container').bind('mouseover',function() {
    $(this).addClass('hover').stop(true,true).animate({
        fontSize: '26px',
    }, 200);
    // This line changed
    $('.category-container').stop(true,true).fadeTo('fast',0.2);  
    // This line added
    $(this).fadeTo('fast',1);    
});

$('.category-container').bind('mouseleave', function() {
    $('.category-container').removeClass('hover').stop(true,true).animate({
        fontSize: '12px',
    }, 200).fadeTo('fast',1);
});
​ 
```

# firebird - DDL 创建触发器脚本失败

> ID：13673756
> 
> 赞同：0
> 
> 时间：2012-12-02T20:55:41.570
> 
> 标签：firebird, ddl, firebird2.5

创建触发器的 DDL 脚本（以下来源）失败并出现 2 个错误：

> 语句失败，SQLSTATE = 42000 动态 SQL 错误 -SQL 错误代码 = -104 - 命令行意外结束 - 第 3 行，第 44 列文件 C:\CRMDemo\Database\DDL\Trigger_Orders.sql 中第 0 行之后 语句失败，SQLSTATE = 42000动态 SQL 错误 -SQL 错误代码 = -104 -Token unknown - 第 1 行，第 1 列 -end 在文件 C:\CRMDemo\Database\DDL\Trigger_Orders.sql 中的第 14 行

（第 3 行，第 44 列看起来可能是结束括号）。我找不到有关错误 42000 或 -104 的任何信息。触发器旨在从确实存在的生成器中分配记录号。此触发器在同一脚本中的 Interbase 中正常工作。我唯一能想到的是，列大小 Integer 对于返回的值是不正确的。但是文档说该值可能会被截断，但应该适用于预期值（1）。

```
CREATE TRIGGER ORDERS_GENERATE_KEY FOR ORDERS ACTIVE BEFORE INSERT POSITION 95 AS
begin
  NEW.ORDER_NR = GEN_ID(NEW_ORDER_NUMBER, 1);
end; 
```

Firebird 是 2.5.2 版，刚刚下载。Windows 7\. 数据库应为 32 位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:19:20.773

如果您使用**isql**实用程序运行语句，请确保使用了**SET TERM**运算符：

```
SET TERM ^ ;

CREATE TRIGGER ORDERS_GENERATE_KEY FOR ORDERS 
  ACTIVE 
  BEFORE INSERT 
  POSITION 95 
AS
begin
  NEW.ORDER_NR = GEN_ID(NEW_ORDER_NUMBER, 1);
end
^

SET TERM ; ^ 
```

# .net - MVC4 样式捆绑包给出 403

> ID：13673759
> 
> 赞同：102
> 
> 时间：2012-12-02T20:55:52.373
> 
> 标签：.net, asp.net-mvc, razor, asp.net-mvc-4, bundling-and-minification

启用捆绑/缩小时，我的一些捆绑包在浏览器中似乎有一个无效的 URL（以 / 结尾），并且 IIS 给出了 403 禁止错误，就好像试图列出文件夹的内容一样。

我的捆绑包的设置方式没有区别 - 它们不是 .min.css，访问权限正确等。

* * *

## 回答 #1

> 赞同：238
> 
> 时间：2012-12-02T20:55:52.373

我的包被注册为与解决方案上的实际文件夹相对应的路径，例如`~/Content/forum`.

这在捆绑关闭时可以正常工作（正确包含捆绑！），但在启用捆绑时不行。

解决方案是将包的注册名称更改为与文件系统中存在的任何名称不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-07T20:31:03.013

在我的情况下，bundle 被指定为一个目录`@Scripts.Render("~/scripts")`，因此 IIS 不知道如何提供实际的 js 文件，我更改了 bundle 名称以表示一个 javascript 文件`@Scripts.Render("~/scripts.js")`并修复了它。我的风格包也是如此。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-26T23:56:53.913

问题是您的捆绑名称应该是命名约定

```
("bundles/css") 
```

这解决了我的问题。

# javascript - 无法将 Javascript 变量设置为 Ruby 变量值

> ID：13673764
> 
> 赞同：0
> 
> 时间：2012-12-02T20:56:44.740
> 
> 标签：javascript, ruby

我有一个 Ruby 变量：

```
@json = [{"lat":37.8690058,"lng":-122.2555342},{"lat":37.8739362,"lng":-122.2653001},{"lat":37.8701101,"lng":-122.2578559}] 
```

当我尝试：

```
<script type="text/javascript" charset="utf-8">

   var test = <%= @json %>
   console.log(test);

</script> 
```

萤火虫告诉我：

```
invalid property id
var test = [{&quot;lat&quot;:37.869005...707408,&quot;lng&quot;:-122.2545767}] 
```

如何成功设置变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T20:58:46.987

似乎您的 JSON 引号被替换为 HTML 实体。尝试使用`.html_safe`

```
var test = <%= @json.html_safe %> 
```

如果这不能解决它，请查看其他帖子，因为我不是红宝石专家，

[不要在 ruby​​ on rails 中转义 html](https://stackoverflow.com/questions/3932267/dont-escape-html-in-ruby-on-rails)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:26:31.580

假设 @json 是一个 Ruby 对象：

```
<%= javascript_tag do %>
  var test = <%= @json.to_json.html_safe %>;
<% end %> 
```

# sql - 访问由 PDO FETCH_ASSOC 生成的关联索引

> ID：13673766
> 
> 赞同：1
> 
> 时间：2012-12-02T20:56:48.567
> 
> 标签：sql, azure, pdo, fetch, associative-array

我完全承认一定对关联数组的构造有错误的理解。

以下登录脚本将使用关联数组填充 $userdata，该数组由 $username 的散列密码和从 SQL Server 数据库（具体为 Azure SQL）查询的盐组成。但是，用于创建所提供密码的哈希并与在数据库中找到的哈希密码进行比较的代码部分失败，错误表明 $userdata[password] 和 $userdata[salt] 未定义。

```
 <?php

    $username = $_POST['username'];  
    $password = $_POST['password'];

    // Connect to SQL Server
    include '../../phpconfig/connectstrings.php';

    try  
    {  
$conn = new PDO ( "sqlsrv:server = $serverstringname; Database = $databasestringname", "$usernamestringname", "$passwordstringname");  
$conn->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION, );  
    }

    catch ( PDOException $e )  
    {  
    print( "Error connecting to SQL Server." );  
    die(print_r($e));  
    }

    catch(Exception $e)  
    {  
    die(var_dump($e));  
    }

    //Query database for the hashed password and salt for the supplied username
    if(!empty($_POST)) {

        try
    {  
    $sql_select = $conn->prepare("SELECT password, salt FROM logins WHERE username = '$username'");  
    $sql_select->execute();  
    }
    catch(Exception $e)
    {
    die(var_dump($e));  
    }

    //Fetch all of the remaining rows in the result set  
    $userdata = $sql_select->fetchAll(PDO::FETCH_ASSOC);

    //check for a valid username  
    if(empty($userdata))  
    {  
    echo "User: $username was not found";  
    die;  
    }  

    //hash the queried salt and hash the supplied password  
    $hash = hash('sha256', $userdata['salt'] . hash('sha256', $password) );  

    //compare the hashed salted password supplied with that queried from database  
    if($hash = $userdata['password'])  
    {  
    echo "Welcome, $username!";  
    }  
    else  
    {  
    echo "Invalid password";  
    }  
                    }

    ?> 
```

虽然我不怀疑从 $sql_select 获取数组之外的一些代码需要一些调试，但我无法做到这一点，因为 $userdata 似乎将所有关联数组数据分配给变量的单个部分，如所示以下转储的输出：

```
 var_dump($sql_select);  
    //output = object(PDOStatement)#2 (1) { ["queryString"]=> string(61) "SELECT password, salt FROM logins WHERE username = 'mrtactics'" } 

    list($a[0], $b[1]) = $userdata;  
    var_dump($a);  
    var_dump($b);  
    //output = array(1) { [0]=> array(2) { ["password"]=> string(64) "f24704c0ce72a618cf1738894ebdd6001f4d3329802ab83bd418df66cbc46b1a" ["salt"]=> string(3) "6e0" } } array(1) { [1]=> NULL }

    var_dump($userdata["salt"]);  
    //output = NULL

    var_dump($userdata['salt']);  
    //output = NULL

    var_dump($userdata['password']);  
    //output = NULL

    foreach ($userdata as $item => $value)  
    echo "$item: $value<br>";
    //output = 0: Array

    $password = $sql_select->fetchColumn(0);  
    $salt = $sql_select->fetchColumn(1);  
    var_dump($password);  
    var_dump($salt);  
    //output = string(64) "f24704c0ce72a618cf1738894ebdd6001f4d3329802ab83bd418df66cbc46b1a" bool(false) 
```

显而易见的解决方法是查询提供的用户名的单个值并传递每个继承人各自的变量。但是，这需要对数据库进行两次必要的调用，而且我对如何构造关联数组以及如何使用存储在其中的信息一无所知。

我怀疑我要么为我试图从中检索的方法获取错误构造的对象，要么我的语法很糟糕。我确实打算继续使用 PDO 而不是 sql_* 命令。

编辑：让我们让它更简单，然后：

```
 $userdatasql = $sql_select->fetchAll(PDO::FETCH_ASSOC);
    $userdata['password']="f24704c0ce72a618cf1738894ebdd6001f4d3329802ab83bd418df66cbc46b1a";
    $userdata['salt']="6e0";
    var_dump($userdata);
    var_dump($userdatasql);
    var_dump($userdata['password']);
    var_dump($userdatasql['password']);

    //Dump of $userdata = array(2) { ["password"]=> string(64) "f24704c0ce72a618cf1738894ebdd6001f4d3329802ab83bd418df66cbc46b1a" ["salt"]=> string(3) "6e0" }
    //Dump of $userdatasql = array(1) { [0]=> array(2) { ["password"]=> string(64) "f24704c0ce72a618cf1738894ebdd6001f4d3329802ab83bd418df66cbc46b1a" ["salt"]=> string(3) "6e0" } } 
```

注意到这 2 个数组的构造不同了吗？我不知道这到底是什么意思，这就是我在这里的原因。如果我猜测 $userdatasql 数组似乎在数组中包含一个数组，因此必须对调用进行索引。

```
 //Dump of $userdata['password'] = string(64) "f24704c0ce72a618cf1738894ebdd6001f4d3329802ab83bd418df66cbc46b1a"
    //Dump of $userdatasql['password'] = NULL 
```

更多信息：

```
 echo (count($userdata));
    echo (count($userdatasql));
    //output = 2
    //output = 1
    echo (count($userdata, 1));
    echo (count($userdatasql, 1));
    //output = 2
    //output = 3 
```

这告诉我，由 PDO FETCH_ASSOC 创建的数组与手动创建的数组具有不同的结构，但包含相同的 2 条数据和相同的 2 个索引。

有了这些知识，我修改了我的转储以包含 0 索引位置，然后突然输出了预期的数据：

```
 var_dump($userdatasql['0']['password']);
    var_dump($userdatasql['0']['salt']);
    //password dump = string(64) "f24704c0ce72a618cf1738894ebdd6001f4d3329802ab83bd418df66cbc46b1a"
    //salt dump = string(3) "6e0" 
```

**这是否意味着我必须按索引引用所有 PDO FETCH ASSOC 数组？**
我不应该这么想，因为我发现没有代码示例表明这一点。
**那么，为什么我的 PDO FETCH ASSOC 阵列格式不正确？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T20:27:24.387

好吧，我有“答案”，因为我可以格式化语法以从关联数组中检索必要的信息。我不明白手动创建的关联数组和由 PDO FETCH ASSOC 创建的关联数组之间的区别，也不明白以后当我的数组比这里提出的数组复杂得多时会产生什么影响。

但是，这是“答案”：

存储在由 PDO FETCH ASSOC 创建的关联数组中的信息必须由数字索引引用 THEN 关联索引，尽管它不是数字类型的关联数组（因为这很有意义，对吧？）通过在前面包含数字索引对于关联索引，该值已正确获得。

```
 $var[0][index] //retrieves correctly
    $var[index]  //does not unless the array happened to be manually constructed 
```

在研究其他相关代码示例数小时后得出的最终答案是：

我的代码按原样执行是因为我使用的是 ->fetchAll 而不是 ->fetch。当我简单地使用 ->fetch 时，我不再需要同时引用数字索引和关联索引，并且可以像关联数组的预期那样简单地引用关联索引。

更正后的代码语法如下：

```
 <?php

    $username = $_POST['username'];
    $password = $_POST['password'];

    // Connect to SQL Server
    include '../../phpconfig/connectstrings.php';

    try
    {
    $conn = new PDO ( "sqlsrv:server = $serverstringname; Database = $databasestringname", "$usernamestringname", "$passwordstringname");
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    }

    catch ( PDOException $e )
    {
    print( "Error connecting to SQL Server." );
    die(print_r($e));
    }

    catch(Exception $e)
    {
    die(var_dump($e));
    }

    //Query database for the hashed password and the salt for the supplied username
    if(!empty($_POST)) {

    try
    {
    $sql_select = "SELECT password, salt FROM logins WHERE username = ?";
    $stmt = $conn->prepare($sql_select);
    $stmt->bindValue(1, $username);
    $stmt->execute();
    }

    catch(Exception $e)
    {
    die(var_dump($e));
    }

    //Fetch the result set into an associative array
    $userdata = $stmt->fetch(PDO::FETCH_ASSOC);

    if(empty($userdata))
    {
    echo "User: $username was not found";
    die;
    }

    //hash the queried salt with a hash of the supplied password
    $hash = hash('sha256', $userdata['salt'].hash('sha256', $password));

    //compare the hashed salted password supplied with that queried from database
    if($hash == $userdata['password'])
    {
    echo "Welcome, $username!";
    }
    else
    {
    echo "Invalid password";
    //does the user wish to register> -> header('Location: register.php');
    die;        
    }
        }

    ?> 
```

# java - 如何从 Java 应用程序运行 openssl 命令

> ID：13673767
> 
> 赞同：0
> 
> 时间：2012-12-02T20:56:49.767
> 
> 标签：java, sockets, network-programming, openssl

我使用以下代码从 Java 应用程序运行 Windows 命令。我尝试了一些 Windows 命令，例如：`ver`它适用于我的文件。我需要在应用程序中使用的命令是`openssl`. 我在 Windows 上工作，所以我下载`openssl`了 Windows。我在命令行窗口中尝试了以下命令，它工作正常。但是，当我从 Java 应用程序中尝试它时，我得到的只是完成。我没有得到输出。有人可以帮忙吗？

这是代码：

```
import java.io.*; 

public class DebianChecker 
{ 
public static void main(String args[]) 
{ 
try 
{ 
Process p=Runtime.getRuntime().exec("cmd /c openssl s_client -connect
gmail.com:443"); 
p.waitFor(); 
BufferedReader reader=new BufferedReader(new InputStreamReader(p.getInputStream())); 
String line=reader.readLine(); 
while(line!=null) 
{ 
System.out.println(line); 
line=reader.readLine(); 
} 

} 
catch(IOException e1) {} 
catch(InterruptedException e2) {} 

System.out.println("Done"); 
} 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:36:03.027

尝试删除行 p.waitFor();

waitFor() 等待进程结束。因此，当您获得 InputStream 时，该过程已经完成。

# ios - Titanium webview iframe 似乎不存储 cookie

> ID：13673768
> 
> 赞同：0
> 
> 时间：2012-12-02T20:56:58.927
> 
> 标签：ios, titanium, appcelerator

我正在使用 Appcelerators Titanium 开发一个应用程序。该应用程序包含一个 web 视图。webview 显示 i 本地页面 iframe.html，并且此 iframe 的 src 指向远程页面。

但是，这并没有像我预期的那样奏效，因为当包裹在 iframe 中时，远程页面似乎无法存储 cookie。它适用于台式机和其他设备。这似乎是 iOS 独有的问题。我需要 iframe，我需要 cookie。我能做些什么来解决这个问题？

# ruby - 逻辑回归给出不正确的结果

> ID：13673769
> 
> 赞同：8
> 
> 时间：2012-12-02T20:57:01.420
> 
> 标签：ruby, algorithm, statistics, machine-learning, regression

我正在一个网站上工作，收集人们玩过的国际象棋游戏的结果。查看玩家的评分以及他们的评分与对手评分之间的差异，我绘制了一张图表，其中的点代表胜利（绿色）、平局（蓝色）和失败（红色）。

有了这些信息，我还实现了一个逻辑回归算法来对获胜和获胜/平局的临界值进行分类。使用评级和差异作为我的两个特征，我得到一个分类器，然后在图表上绘制分类器更改其预测的边界。

我的梯度下降、成本函数和 sigmoid 函数的代码如下。

```
 def gradient_descent()
    oldJ = 0    
    newJ = J()
    alpha = 1.0     # Learning rate
    run = 0
    while (run < 100) do
      tmpTheta = Array.new
      for j in 0...numFeatures do
        sum = 0
        for i in 0...m do
          sum += ((h(training_data[:x][i]) - training_data[:y][i][0]) * training_data[:x][i][j])
        end
        tmpTheta[j] = Array.new
        tmpTheta[j][0] = theta[j, 0] - (alpha / m) * sum  # Alpha * partial derivative of J with respect to theta_j
      end
      self.theta = Matrix.rows(tmpTheta)
      oldJ = newJ
      newJ = J()
      run += 1
      if (run == 100 && (oldJ - newJ > 0.001)) then run -= 20 end   # Do 20 more if the error is still going down a fair amount.
      if (oldJ < newJ)
        alpha /= 10
      end
    end
  end

  def J()
    sum = 0
    for i in 0...m
      sum += ((training_data[:y][i][0] * Math.log(h(training_data[:x][i]))) 
          + ((1 - training_data[:y][i][0]) * Math.log(1 - h(training_data[:x][i]))))
    end
    return (-1.0 / m) * sum
  end

  def h(x)
    if (x.class != 'Matrix')    # In case it comes in as a row vector or an array
      x = Matrix.rows([x])      # [x] because if it's a row vector we want [[a, b]] to get an array whose first row is x.
    end
    x = x.transpose   # x is supposed to be a column vector, and theta^ a row vector, so theta^*x is a number.
    return g((theta.transpose * x)[0, 0])  # theta^ * x gives [[z]], so get [0, 0] of that for the number z.
  end

  def g(z)
    tmp = 1.0 / (1.0 + Math.exp(-z))   # Sigmoid function
    if (tmp == 1.0) then tmp = 0.99999 end    # These two things are here because ln(0) DNE, so we don't want to do ln(1 - 1.0) or ln(0.0)
    if (tmp == 0.0) then tmp = 0.00001 end
    return tmp
  end 
```

当我在代表我自己的国际象棋档案的数据集上对此进行测试时，我得到了令我满意的合理结果：

![12842311：正确的结果](../Images/9c2e3402c86140fd07a405fce2690432.png)

有一段时间，我很高兴。我尝试的所有示例都给出了有趣的图表。然后我尝试了一个球员，凯文曹，他的名字有超过 250 场比赛，因此有 1000 多场比赛，用于一个非常大的训练集。结果显然是不正确的：

![12905349：结果不正确](../Images/59a872f055c84306a1197f3ad9cd424d.png)

嗯，那不好。所以我的第一个想法是把初始学习率从 1.0 提高到 100.0。对于凯文来说，这得到了正确的结果：

![12905349：正确的结果](../Images/a27dac82b03b741119e662f3e673d47d.png)

不幸的是，当我在自己和较小的数据集上尝试它时，我得到了一个奇怪的现象，它只是在 0 处为其中一个预测给出了一条平线：

![12842311：结果不正确](../Images/36b7052ea78968da82c425061346f054.png)

我检查了theta，它说它是[[2.3707682771730836]，[21.22408286825226]，[-19081.906528679192]]。第三个训练变量（实际上是第二个，因为 x_0 = 1）是评分的差异，所以当差异只是最微小的正数时，逻辑回归的公式会变成负数，而 sigmoid 函数预测 y = 0。当差异只是稍微积极一点，类似地，它向上跳跃并预测 y = 1。

我将初始学习率从 100.0 降低到 1.0，并决定尝试更慢地降低它。因此，当成本函数增加时，我没有将其减少 10 倍，而是将其减少了 2 倍。

不幸的是，这根本没有改变我的结果。即使我将梯度下降的循环数从 100 增加到 1000，它仍然会一直预测错误的结果。

我仍然是逻辑回归的初学者（我刚刚完成了 coursera 上的机器学习课程，这是我第一次尝试实现我在那里学到的任何算法），所以我已经达到了直觉的程度。如果有人能帮我弄清楚这里出了什么问题，我做错了什么，以及如何解决它，我将非常感激。

编辑：我还在另一个数据集上进行了尝试，该数据集有大约 300 个数据点，再次得到一条平坦的绿线和一条正常的蓝线。两者的算法基本相同，只是 y 有一些不同的结果，因为我正在做多类分类。

编辑：由于人们已经要求它，这里是 J、Alpha 和 Theta 用于平坦线的梯度下降的每次迭代：

```
J: 1.7679949412730092  Alpha: 1.0  Theta: Matrix[[-0.004477611940298508], [0.2835820895522388], [-123.63880597014925]]
J: 0.6873432218114784  Alpha: 0.1  Theta: Matrix[[-0.008057848266678727], [-8.033992854843122], [-118.62571350649955]]
J: 2.7493579020963597  Alpha: 0.1  Theta: Matrix[[0.0035837099422764904], [10.036108977992713], [-114.29679460799208]]
J: 2.5431564907845736  Alpha: 0.01  Theta: Matrix[[0.002061352330336195], [7.255061503962862], [-113.88091708799209]]
J: 2.268221136398013  Alpha: 0.01  Theta: Matrix[[0.0008076454646645536], [4.923257856798684], [-113.43169704202194]]
J: 2.02765281325063  Alpha: 0.01  Theta: Matrix[[-0.00014755931145485107], [3.0843409102315205], [-112.95644762679805]]
J: 1.821451342237053  Alpha: 0.01  Theta: Matrix[[-0.0008639634905593289], [1.6548476959031622], [-112.46627318829059]]
J: 1.8214513720879484  Alpha: 0.01  Theta: Matrix[[-0.0013117163263802246], [0.6758826956046561], [-111.9660989569473]]
J: 1.8214513720879484  Alpha: 0.001  Theta: Matrix[[-0.0013535066248876874], [0.5834935043210742], [-111.91600392423089]]
J: 1.7870844304014568  Alpha: 0.001  Theta: Matrix[[-0.0013952969233951501], [0.49110431303749225], [-111.86590889151448]]
J: 1.7870844304014568  Alpha: 0.001  Theta: Matrix[[-0.0014341021771264934], [0.40365238581361185], [-111.81578997843985]]
J: 1.7870844304014568  Alpha: 0.001  Theta: Matrix[[-0.0014729074308578367], [0.31620045858973145], [-111.76567106536523]]
J: 1.752717488714965  Alpha: 0.001  Theta: Matrix[[-0.0015115010626209136], [0.22904945780472585], [-111.71555130580272]]
J: 1.752717488714965  Alpha: 0.001  Theta: Matrix[[-0.001544336226800018], [0.15110191314800955], [-111.66540851236988]]
J: 1.770809597429665  Alpha: 0.001  Theta: Matrix[[-0.0015771713909791226], [0.07315436849129325], [-111.61526571893704]]
J: 1.7297985323807161  Alpha: 0.0001  Theta: Matrix[[-0.00158045491336022], [0.06535960382896211], [-111.61025143962061]]
J: 1.718350722631126  Alpha: 0.0001  Theta: Matrix[[-0.0015837319880072584], [0.05757622586497872], [-111.60523715385645]]
J: 1.7183505768797593  Alpha: 0.0001  Theta: Matrix[[-0.0015867170175074515], [0.05030859963032436], [-111.60022257604714]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.0015897020324328638], [0.04304099913473299], [-111.59520799822326]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.0015926870473582369], [0.03577339863921061], [-111.59019342039937]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.00159567206228361], [0.028505798143688237], [-111.58517884257549]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.001598657077208983], [0.02123819764816586], [-111.5801642647516]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.001601642092134356], [0.013970597152643486], [-111.57514968692772]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.001604627107059729], [0.006702996657121109], [-111.57013510910383]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.0016076121219851022], [-0.0005646038384012671], [-111.56512053127994]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.0016105971369104752], [-0.007832204333923645], [-111.56010595345606]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.0016135821518358483], [-0.01509980482944602], [-111.55509137563217]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.0016165671667612213], [-0.022367405324968396], [-111.55007679780829]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.0016195521816865944], [-0.02963500582049077], [-111.5450622199844]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.0016225371966119674], [-0.03690260631601315], [-111.54004764216052]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.0016255222115373405], [-0.04417020681153553], [-111.53503306433663]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.0016285072264627136], [-0.05143780730705791], [-111.53001848651274]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.0016314922443731613], [-0.05870541239661013], [-111.52500390868587]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.0016344772622834192], [-0.06597301748587016], [-111.519989330859]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.0016374622664495802], [-0.07324060142296517], [-111.51497475304588]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.001640217664533409], [-0.08015482159935092], [-111.50996040483884]]
J: 1.7183505768793688  Alpha: 0.0001  Theta: Matrix[[-0.0016455906875599943], [-0.0937712290880118], [-111.49993184619791]]
J: 1.994702022407994  Alpha: 0.0001  Theta: Matrix[[-0.0016482771980077554], [-0.10057943119248941], [-111.49491756687851]]
J: 1.9789198631246232  Alpha: 1.0e-05  Theta: Matrix[[-0.0016485458502465615], [-0.10126025363935508], [-111.49441613894419]]
J: 1.948354991984789  Alpha: 1.0e-05  Theta: Matrix[[-0.0016490831547241735], [-0.10262189853308641], [-111.49341328307554]]
J: 1.9331013621188657  Alpha: 1.0e-05  Theta: Matrix[[-0.0016493518069629796], [-0.10330272097995208], [-111.49291185514122]]
J: 1.9178620371528292  Alpha: 1.0e-05  Theta: Matrix[[-0.0016496204592017856], [-0.10398354342681772], [-111.49241042720689]]
J: 1.902623825636303  Alpha: 1.0e-05  Theta: Matrix[[-0.0016498891114405914], [-0.10466436587368326], [-111.49190899927257]]
J: 1.8873858680247269  Alpha: 1.0e-05  Theta: Matrix[[-0.0016501577636793972], [-0.10534518832054848], [-111.49140757133824]]
J: 1.8721478527437034  Alpha: 1.0e-05  Theta: Matrix[[-0.0016504264159182024], [-0.10602601076741257], [-111.49090614340392]]
J: 1.8569098083540256  Alpha: 1.0e-05  Theta: Matrix[[-0.0016506950681570054], [-0.10670683321427255], [-111.4904047154696]]
J: 1.8416717846532462  Alpha: 1.0e-05  Theta: Matrix[[-0.0016509637203958004], [-0.10738765566111781], [-111.48990328753527]]
J: 1.8264337702403803  Alpha: 1.0e-05  Theta: Matrix[[-0.0016512323726345674], [-0.10806847810791036], [-111.48940185960095]]
J: 1.8111957469624462  Alpha: 1.0e-05  Theta: Matrix[[-0.0016515010251717409], [-0.1087493010703349], [-111.48890043166602]]
J: 1.7959577228777213  Alpha: 1.0e-05  Theta: Matrix[[-0.001651769677708553], [-0.10943012403208266], [-111.4883990037311]]
J: 1.7807196990939538  Alpha: 1.0e-05  Theta: Matrix[[-0.0016520383302440706], [-0.11011094699140556], [-111.48789757579618]]
J: 1.7654816767669712  Alpha: 1.0e-05  Theta: Matrix[[-0.0016523069827749494], [-0.11079176994204029], [-111.48739614786128]]
J: 1.7197677244765115  Alpha: 1.0e-05  Theta: Matrix[[-0.0016531129399852717], [-0.11283423807786983], [-111.4858918640573]]
J: 1.7045300185036796  Alpha: 1.0e-05  Theta: Matrix[[-0.0016533815914621833], [-0.11351505905442376], [-111.48539043612449]]
J: 1.689293134633683  Alpha: 1.0e-05  Theta: Matrix[[-0.0016536502402002386], [-0.11419587490110002], [-111.48488900819716]]
J: 1.674059195452273  Alpha: 1.0e-05  Theta: Matrix[[-0.001653918879126327], [-0.1148766723699622], [-111.48438758028945]]
J: 1.6588357959146847  Alpha: 1.0e-05  Theta: Matrix[[-0.0016541874829120791], [-0.11555740402097447], [-111.48388615245203]]
J: 1.6436500186219352  Alpha: 1.0e-05  Theta: Matrix[[-0.0016544559609891405], [-0.1162379002196091], [-111.48338472486603]]
J: 1.6285972611659707  Alpha: 1.0e-05  Theta: Matrix[[-0.001654723991174496], [-0.11691755751707966], [-111.4828832981758]]
J: 1.6139994752963014  Alpha: 1.0e-05  Theta: Matrix[[-0.0016549904481917704], [-0.11759426827073645], [-111.48238187463193]]
J: 1.600799606845299  Alpha: 1.0e-05  Theta: Matrix[[-0.0016552516449943116], [-0.11826112664220582], [-111.48188046160847]]
J: 1.5908244528084288  Alpha: 1.0e-05  Theta: Matrix[[-0.0016554977759847996], [-0.1188997667477244], [-111.48137907871664]]
J: 1.5851960976828814  Alpha: 1.0e-05  Theta: Matrix[[-0.0016557144987826046], [-0.11948332530842007], [-111.4808777546412]]
J: 1.5826817076400923  Alpha: 1.0e-05  Theta: Matrix[[-0.0016558999497352893], [-0.12000831170339445], [-111.48037649310945]]
J: 1.5816354848004566  Alpha: 1.0e-05  Theta: Matrix[[-0.0016560658987327093], [-0.12049677093659837], [-111.4798752705816]]
J: 1.581199878569286  Alpha: 1.0e-05  Theta: Matrix[[-0.0016562224426970157], [-0.12096761454376066], [-111.47937406686383]]
J: 1.5810169018926878  Alpha: 1.0e-05  Theta: Matrix[[-0.0016563748211790893], [-0.12143065620486218], [-111.47887287147701]]
J: 1.5809396242131868  Alpha: 1.0e-05  Theta: Matrix[[-0.0016565254040880424], [-0.1218903347622732], [-111.47837167968135]]
J: 1.5809069017613124  Alpha: 1.0e-05  Theta: Matrix[[-0.0016566752202995195], [-0.12234857730581448], [-111.47787048941908]]
J: 1.5808930296490606  Alpha: 1.0e-05  Theta: Matrix[[-0.001656824710233385], [-0.12280620875454971], [-111.47736929980935]]
J: 1.580887145848097  Alpha: 1.0e-05  Theta: Matrix[[-0.0016569740612930289], [-0.12326358014294572], [-111.47686811047738]]
J: 1.580884649719601  Alpha: 1.0e-05  Theta: Matrix[[-0.0016571233527736234], [-0.12372084005243131], [-111.47636692126457]]
J: 1.5808835906710963  Alpha: 1.0e-05  Theta: Matrix[[-0.0016572726175860411], [-0.12417805026085695], [-111.47586573210509]]
J: 1.5808831413239819  Alpha: 1.0e-05  Theta: Matrix[[-0.00165742186803091], [-0.12463523410670607], [-111.47536454297435]]
......... 
```

对于创建正确预测的人：

```
J: 4.330234652497978  Alpha: 1.0  Theta: Matrix[[0.12388059701492538], [211.9910447761194], [-111.13731343283582]]
J: 4.330234652497978  Alpha: 0.1  Theta: Matrix[[0.08626965671641812], [152.3222144059701], [-118.07202388059702]]
J: 4.2958677406623815  Alpha: 0.1  Theta: Matrix[[0.048658716417910856], [92.65338403582082], [-125.0067343283582]]
J: 3.333594209265678  Alpha: 0.1  Theta: Matrix[[0.011644779104478219], [33.61767533134318], [-131.44443979104477]]
J: 0.4467735852246924  Alpha: 0.1  Theta: Matrix[[-0.014623104477611202], [-11.126378913433022], [-132.24166105074627]]
J: 3.333594209265678  Alpha: 0.1  Theta: Matrix[[0.01194378805970217], [31.177094038805805], [-126.89243925671643]]
J: 3.0930257965656063  Alpha: 0.01  Theta: Matrix[[0.009436400895523079], [26.892626149850567], [-126.92472924]]
J: 2.7493567080605392  Alpha: 0.01  Theta: Matrix[[0.007257365074627634], [23.13644550388053], [-126.8386038647761]]
J: 2.508788325211366  Alpha: 0.01  Theta: Matrix[[0.005466380895523164], [19.99261048238799], [-126.62851089164178]]
J: 2.405687589704577  Alpha: 0.01  Theta: Matrix[[0.004152999104478391], [17.61296913194023], [-126.28907722179103]]
J: 2.268219942362192  Alpha: 0.01  Theta: Matrix[[0.002959017910448543], [15.415473392238736], [-125.92224111492536]]
J: 2.1307522353180164  Alpha: 0.01  Theta: Matrix[[0.002093389253732125], [13.751072827761122], [-125.48597339134326]]
J: 2.027651529662123  Alpha: 0.01  Theta: Matrix[[0.0014367116417918252], [12.436814710149182], [-125.00961691402983]]
J: 1.9589177059909308  Alpha: 0.01  Theta: Matrix[[0.0009889847761201823], [11.44908667850739], [-124.49911195194028]]
J: 1.8558169406332465  Alpha: 0.01  Theta: Matrix[[0.0006606582089560022], [10.652638055522315], [-123.97004023522386]]
J: 1.8214500586485458  Alpha: 0.01  Theta: Matrix[[0.0004218823880604789], [9.988664770447688], [-123.42914782925371]]
J: 1.8214500884994413  Alpha: 0.01  Theta: Matrix[[0.0002428068653197179], [9.416182220312082], [-122.88082274064425]]
J: 1.8214500884994413  Alpha: 0.001  Theta: Matrix[[0.00023086931308091184], [9.369775500013574], [-122.82513353589798]]
J: 1.8214500884994413  Alpha: 0.001  Theta: Matrix[[0.00021893176084210577], [9.323368779715066], [-122.7694443311517]]
J: 1.8214500884994413  Alpha: 0.001  Theta: Matrix[[0.0002069942086032997], [9.276962059416558], [-122.71375512640543]]
J: 1.8214500884994413  Alpha: 0.001  Theta: Matrix[[0.00019505665636449364], [9.23055533911805], [-122.65806592165916]]
J: 1.8214500884994413  Alpha: 0.001  Theta: Matrix[[0.00018311910412568757], [9.184148618819542], [-122.60237671691289]]
J: 1.8214500884994413  Alpha: 0.001  Theta: Matrix[[0.0001711815518868815], [9.137741898521034], [-122.54668751216661]]
J: 1.8214500884994413  Alpha: 0.001  Theta: Matrix[[0.00015924399964807544], [9.091335178222526], [-122.49099830742034]]
J: 1.8214500884994413  Alpha: 0.001  Theta: Matrix[[0.00014730641755852312], [9.04492840598372], [-122.43530910670393]]
J: 1.8677695240029366  Alpha: 0.001  Theta: Matrix[[0.0001353688354689708], [8.998521633744915], [-122.37961990598751]]
J: 1.8462563443835032  Alpha: 0.0001  Theta: Matrix[[0.0001341750742749415], [8.993880951437452], [-122.374050986289]]
J: 1.8247430163841476  Alpha: 0.0001  Theta: Matrix[[0.00013298131308164604], [8.98924026913124], [-122.3684820665904]]
J: 1.803243007740144  Alpha: 0.0001  Theta: Matrix[[0.0001317875528781551], [8.984599588510665], [-122.36291314676808]]
J: 1.7875423426167685  Alpha: 0.0001  Theta: Matrix[[0.00013059512176735966], [8.979961171334951], [-122.35734406080917]]
J: 1.7870839229503594  Alpha: 0.0001  Theta: Matrix[[0.0001296573060241053], [8.97575636413016], [-122.35174314792931]]
J: 1.7870831481868632  Alpha: 0.0001  Theta: Matrix[[0.00012876197468911015], [8.971623907872633], [-122.34613692449842]]
J: 1.7870831468153818  Alpha: 0.0001  Theta: Matrix[[0.00012786672082037553], [8.967491583540149], [-122.34053069138426]]
J: 1.7870831468129538  Alpha: 0.0001  Theta: Matrix[[0.000126971467088789], [8.963359259441226], [-122.33492445825294]]
J: 1.7870831468129498  Alpha: 0.0001  Theta: Matrix[[0.0001260762133574453], [8.959226935342718], [-122.3293182251216]]
J: 1.7870831468129498  Alpha: 0.0001  Theta: Matrix[[0.00012518095962610202], [8.95509461124421], [-122.32371199199025]]
J: 1.7870831468129498  Alpha: 0.0001  Theta: Matrix[[0.00012428570589475874], [8.950962287145702], [-122.3181057588589]]
J: 1.7870831468129498  Alpha: 0.0001  Theta: Matrix[[0.00012339045216341546], [8.946829963047193], [-122.31249952572756]]
J: 1.7870831468129498  Alpha: 0.0001  Theta: Matrix[[0.00012249519843207218], [8.942697638948685], [-122.30689329259621]]
J: 1.7870831468129498  Alpha: 0.0001  Theta: Matrix[[0.00012159994470072888], [8.938565314850177], [-122.30128705946487]]
J: 1.7870831468129498  Alpha: 0.0001  Theta: Matrix[[0.00012070469096938559], [8.934432990751668], [-122.29568082633352]]
J: 1.7870831468129498  Alpha: 0.0001  Theta: Matrix[[0.0001198094372380423], [8.93030066665316], [-122.29007459320218]]
J: 1.7870831468129498  Alpha: 0.0001  Theta: Matrix[[0.000118914183506699], [8.926168342554652], [-122.28446836007083]]
J: 1.7870831468129498  Alpha: 0.0001  Theta: Matrix[[0.00011801892977535571], [8.922036018456144], [-122.27886212693949]]
...... 
```

编辑：我注意到假设的第一次迭代总是预测 0.5，因为 theta 都是 0。但之后它总是预测 1 或 0（0.00001 或 0.99999 以避免我的代码中不存在的对数）。这对我来说似乎不对 - 太自信了 - 这可能是为什么这不起作用的关键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T03:48:04.980

关于您的实施，有几件事有点不标准。

1.  首先，逻辑回归目标通常作为最小化问题给出

    `lr(x[n],y[n])=log(1+exp(-y[n]*dot(w[n],x[n])))``y[n]`或者`1`在 哪里`-1`

    您似乎正在使用等效的最大化问题公式

    `lr(x[n],y[n])=-y[n]*log(1+exp(-dot(w[n],x[n])))+(1-y[n])*(-dot(w[n],x[n])-log(1+exp(-dot(w[n],x[n])))`

    其中`y[n]`是 0 或 1（此公式中的 y[n]=0 等效于第一个公式中的 y[n]=1）。

    因此，您应该确保在您的数据集中，您的标签是 0 或 1，而**不是**1 或 -1。

2.  接下来，LR 目标通常不除以`m`（数据集的大小）。当您将逻辑回归视为概率模型时，此比例因子不正确。

3.  最后，您的实现可能存在一些数值问题（您试图在 g 函数中更正）。Leon Bottou 的 sgd 代码 (http://leon.bottou.org/projects/sgd) 对损失函数和导数进行了一些更稳定的计算，如下所示（在 C 代码中 - 他使用了我提到的第一个 LR 公式）：

    ```
    /* logloss(a,y) = log(1+exp(-a*y)) */
    double loss(double a, double y)
    {
      double z = a * y;
      if (z > 18) {
        return exp(-z);
      }
      if (z < -18) {
        return -z;
      }
      return log(1 + exp(-z));
    }

    /*  -dloss(a,y)/da */
    double dloss(double a, double y)
    {
      double z = a * y;
      if (z > 18) {
        return y * exp(-z);
      }
      if (z < -18){
        return y;
      }
      return y / (1 + exp(z));
    } 
    ```

您还应该考虑运行一个常用的 l-bfgs 例程（我不熟悉 Ruby 实现），这样您就可以专注于正确计算目标和梯度，而不必担心学习率之类的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T20:06:48.127

一些想法：

*   我认为如果您可以显示 和 的某些迭代的值会`J()`很有帮助`alpha`。
*   您是否包含常数（偏差）作为特征？如果我没记错的话，如果你不这样做，你的（直线）线`h() == 0.5`将被迫通过零

*   您的函数`J()`看起来像是在返回**负**对数可能性（因此您希望将其**最小化**）。然而你降低了学习率`if (oldJ < newJ)`，即如果`J()`变得更大，即更糟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T19:31:45.537

## 浮点数：

尝试这个？`Equal`花车之间的比较对我来说没有多大意义。

```
def g(z)
    tmp = 1.0 / (1.0 + Math.exp(-z))   # Sigmoid function
    if (tmp >= 0.99999) then tmp = 0.99999 end    # These two things are here because ln(0) DNE, so we don't want to do ln(1 - 1.0) or ln(0.0)
    if (tmp <= 0.00001) then tmp = 0.00001 end
    return tmp
end 
```

## 特征缩放

您提到您正在使用两个功能，我假设它们是玩家自己的评分和**评分**差异。那是对的吗？

还可以考虑使用一些[特征缩放](http://en.wikipedia.org/wiki/Feature_scaling)作为数据预处理步骤，例如，

![在此处输入图像描述](../Images/2a06d8bd73f648f39393fd6e71bedcc8.png). 或者您可以通过使数据中每个特征的值具有零均值和单位方差来执行标准化方法。

## 问题：

*   图表中的蓝线和绿线有什么区别？
*   您是否尝试从非常小的学习率开始，例如 0.01 或 0.001？
*   如果您只使用固定的学习率，会有什么行为？尝试 0.001、0.01、0.1、0.5、1、10 等。请在此处发布您的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-01T14:48:37.827

我认为您需要使用特征归一化（（X-mu）/sigma）对初始数据集进行归一化，而不是使用您的学习率，然后执行您打算执行的操作。

如果没有特征归一化，梯度下降对于行为异常的大数据集会变得有问题。

# java - 获取 NullPointerException

> ID：13673775
> 
> 赞同：1
> 
> 时间：2012-12-02T20:57:27.023
> 
> 标签：java, arrays, eclipse, nullpointerexception

运行 add 方法时，我不断收到“线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常”。

```
public class SortedListOfImmutables {

private Listable[] items;

/**
 * This constructor creates an empty list by creating an internal array
 * of size 0\.  (Note that this is NOT the same thing as setting the internal
 * instance variable to null.) 
 */
public SortedListOfImmutables() {
    items = new Listable[0];
}

/**
 *  Copy constructor.  The current object will become a copy of the
 *  list that the parameter refers to.  
 *  
 *  The copy must be made in such a way that future changes to
 *  either of these two lists will not affect the other. In other words, 
 *  after this constructor runs, adding or removing things from one of 
 *  the lists must not have any effect on the other list.
 *  
 *  @param other the list that is to be copied
 */
public SortedListOfImmutables(SortedListOfImmutables other) {
    if(other != null) {
        items = new Listable[other.items.length];

        for(int index=0;index<other.items.length;index++){
            items[index] = other.items[index];
        }
    }
}

/**
 * Adds an item to the list.  This method assumes that the list is already
 * sorted in alphabetical order based on the names of the items in the list.
 * 
 * The new item will be inserted into the list in the appropriate place so
 * that the list will remain alphabetized by names.
 * 
 * In order to accommodate the new item, the internal array must be re-sized 
 * so that it is one unit larger than it was before the call to this method.
 *  
 * @param itemToAdd refers to a Listable item to be added to this list
 */
public void add(Listable itemToAdd) {
    if(itemToAdd != null) {
        SortedListOfImmutables temp = new SortedListOfImmutables();
        temp.items = new Listable[this.items.length+1];
        boolean added = false;

        if(this.items.length == 0)
            temp.items[0] = itemToAdd;

        else {
            for(int index = 0;index < this.items.length;index++) {
                if(this.items[index].getName().compareTo(itemToAdd.getName())>0)
                    temp.items[index] = items[index];
                else {
                    if(!added) {
                        temp.items[index] = itemToAdd;
                        added = true;
                    }
                    else temp.items[index+1] = this.items[index];
                }
            }
        }
        this.items = new Listable[temp.items.length];

        for(int tempIndex = 0;tempIndex < temp.items.length;tempIndex++) {
            this.items[tempIndex] = temp.items[tempIndex];
        }
    }
} 
```

Listable 是由 Menagerie 和 Animal 类实现的接口，Menagerie Objects 是动物组。显然，问题是我已经分配了 items 数组但从未分配过它的元素，所以我应该将 this.items[tempIndex] 初始化为一个新对象。但是，它可能是 Animal 或 Menagerie，我不允许使用 instanceOf() 来找出它是哪一个。此外，Animal Constructor 是私有的，所以我不能从一开始就创建一个新的动物对象。当我尝试将动物添加到 items 数组时，它会添加第一个动物就好了，但是当我尝试添加更多动物时会出现 nullpointerexception。我确信解决方案很简单，我只是想多了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:01:41.913

如果您使用参数调用您的复制构造`null`函数，那么`items`将是`null`并且您将在`add`. 当 arg 为 null 或`items`在所有情况下初始化时，从复制构造函数中抛出异常。

**编辑**您的代码效率很低。我建议使用`ArrayList`私有`items`字段。它为您完成所有动态调整大小的工作。像这样的东西应该工作：

```
public class SortedListOfImmutables {

    private List<Listable> items;

    /**
     * This constructor creates an empty list.
     */
    public SortedListOfImmutables() {
        items = new ArrayList<Listable>();
    }

    /**
     *  Copy constructor.  The current object will become a copy of the
     *  list that the parameter refers to.  
     *  
     *  The copy must be made in such a way that future changes to
     *  either of these two lists will not affect the other. In other words, 
     *  after this constructor runs, adding or removing things from one of 
     *  the lists must not have any effect on the other list.
     *  
     *  @param other the list that is to be copied
     */
    public SortedListOfImmutables(SortedListOfImmutables other) {
        items = (other == null)
            ? new ArrayList<Listable>()
            : new ArrayList<Listable>(other.items);
    }

    /**
     * Adds an item to the list. This method assumes that the list is already
     * sorted in alphabetical order based on the names of the items
     * in the list.
     * 
     * The new item will be inserted into the list in the appropriate place so
     * that the list will remain alphabetized by names.
     *
     * itemToAdd will not be added if it is null or if it equals an item
     * already in the list.
     *  
     * @param itemToAdd refers to a Listable item to be added to this list
     */
    public void add(Listable itemToAdd) {
        if (itemToAdd != null) {
            for (int i = 0; i < items.size(); ++i) {
                Listable currentItem = items.get(i);
                int comp = itemToAdd.compareTo(currentItem);
                if (comp > 0) continue;
                if (comp < 0) {
                    // do this unconditionally if you want to allow duplicates
                    items.add(i, itemToAdd);
                }
                return;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:05:36.963

> 显然，问题是我已经分配了 items 数组但从未分配过它的元素

是的。这绝对是一个可能导致空指针异常的问题；）

> 然而，它可能是动物或动物园，

问：“Animal”和“Menagerie”都是某个共同父类的孩子吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T21:06:31.880

将您的代码更改为

```
public SortedListOfImmutables(SortedListOfImmutables other)
    if(other != null) {
        items = new Listable[other.items.length];

        for(int index=0;index<other.items.length;index++){
            items[index] = other.items[index];
        }
    } else {
       items = new Listable[0];
    }
} 
```

否则你可以在你的新对象中创建一个空列表。

# .net - .NET 中的并发分析有哪些好的解决方案？

> ID：13673776
> 
> 赞同：1
> 
> 时间：2012-12-02T20:57:37.113
> 
> 标签：.net, visual-studio-2010, concurrency, profiling, profiler

您能否列举一些专门针对并发性进行调整的 .NET 性能和内存分析器？

我只知道**[VS 2010](http://blogs.msdn.com/b/profiler/archive/2010/02/25/vs2010-profiler-guidance-rules-part-1.aspx)**的内置分析器。**[dotTrace](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)**和**[ANTS 之](http://www.jetbrains.com/profiler/)**类的工具非常棒，但据我所知，它们并没有为并发应用程序提供特殊的解决方案。另一个有趣的工具是**[PerfMonitor](http://bcl.codeplex.com/wikipage?title=PerfMonitor&referringTitle=Documentation)**，但我想知道是否有更好的工具可用？

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:00:04.350

这里列出了很多：

*   [http://en.wikipedia.org/wiki/List_of_performance_analysis_tools](http://en.wikipedia.org/wiki/List_of_performance_analysis_tools)

您提到的两个：JetBrains [dotTrace](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)和 Redgate [ANTS](http://www.jetbrains.com/profiler/)肯定会在我的列表中名列前茅。

恕我直言...

# ios - 滚动视图受到影响时在屏幕上移动控件

> ID：13673780
> 
> 赞同：0
> 
> 时间：2012-12-02T20:58:12.937
> 
> 标签：ios, uibutton, scrollview, move, fixed

我正在开发一个应用程序。我有一个屏幕，上面有大约 15 个控件。按钮、UITextfields、Mapkit 和 UITextviews。文本视图位于屏幕底部。所以当我点击输入一个值时，我有一个滚动视图，可以像我想要的那样向上移动控件。现在我有 5 个控件（自定义按钮），我已经将它们放在屏幕上的特定 x、y 位置。它们被卡住了到屏幕。当我进入文本视图时，所有控件都会向上移动，但这些控件不会向上移动，因为它们被赋予了特殊的 x,y 位置。我也想让他们动起来。我该怎么做？我在想做一些数学运算，当每个控件移动时，它们也会移动某个“增量”。或者是否有任何简单的方法让滚动视图告诉选择这些“固定按钮”并将它们像任何其他控件一样向上移动。

![在此处输入图像描述](../Images/aa31222930770f361e0e1272f46a347b.png)

这张照片显示了我正在尝试做的事情。所以有 4 个 UIbuttons 附加到屏幕上。我通过制作这样的 CGRect 将它们固定在屏幕上

```
CGRectMake(20, 72, 180, 43)
CGRectMake(200, 72, 180, 43)
CGRectMake(380, 72, 180, 43)

CGRectMake(90, 380, 180, 43) 
```

粗体矩形是我通过将它们固定到这些坐标来制作的。所以我点击第二个 Uitextview 和一个委托被解雇并向上移动所有控件。这包括 3 个矩形（不是粗体）和第一个 uitextivew 向上移动。我这样做是因为键盘在我输入数据时隐藏了第二个 uitextview。但是现在 UIBUTTONS (BOLDED Rectangles) 留在屏幕上。当我隐藏键盘时，应用程序屏幕正常。我如何使粗体矩形也随着非粗体矩形向上移动。

```
 ITMToggleButtonView *aOnToggleButton = [[ITMToggleButtonView alloc] initWithFrame:CGRectMake(495, 21, 80, 43)
                                                                           andIndex:3
                                                                           andTitle:@"Add On?"
                                                                           andState:NO];
aOnToggleButton.delegate = self; 
```

...创建了另外 4 个自定义切换按钮

```
[self.scrollView addSubview:stToggleButton];
[self.scrollView addSubview:rdToggleButton];
[self.scrollView addSubview:ecToggleButton];
[self.scrollView addSubview:aOnToggleButton];
[self.scrollView addSubview:sCToggleButton]; 
```

编辑：解决方案。我添加了我自定义创建的切换按钮（粗体矩形），就像你在这里看到的那样，并将它们添加到我的滚动视图中。因此，当键盘出现时，滚动视图会向上移动，我的所有控件（粗体和非粗体）也会向上移动。这是一个简单的修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:12:54.827

解决这个问题的最简单方法是确保一起滚动的所有控件都应该是同一个子视图的子视图（在你的情况下，它听起来像一个`UIScrollView`）。因此，如果在键盘出现时移动的非粗体控件位于 a 上`UIScrollView`，那么您应该将粗体控件放在同一个子视图上，例如与`UIScrollView`其他控件相同。

不过，我认为有一些原因，您已经添加了一些控件`UIScrollView`（也许您正在以编程方式添加它们）而其他控件没有（也许您通过 Interface Builder 添加它们）。您需要解释为什么滚动视图的子视图和其他子视图不是的逻辑。与往常一样，分享有意义的代码片段会有所帮助。抽象地诊断这些问题几乎是不可能的。

底线，听起来问题不是`CGRect`您用于添加粗体控件的坐标，而是您将它们作为子视图添加到哪个视图。我们可以尝试通过滚动视图同步各种“非移动”控件的动画坐标变化，但这会有点笨拙，最好将它们全部放在同一个子视图上。

# python - 拆分字符串，在数字和字母字符之间切换

> ID：13673781
> 
> 赞同：22
> 
> 时间：2012-12-02T20:58:16.367
> 
> 标签：python

我正在解析一些标准格式类似于`10 pizzas`. 有时，数据输入正确，我们最终可能会得到`5pizzas`而不是`5 pizzas`. 在这种情况下，我想解析出比萨饼的数量。

这样做的天真方法是逐个字符检查，建立一个字符串，直到我们到达一个非数字，然后将该字符串转换为一个整数。

```
num_pizzas = ""
for character in data_input:
   if character.isdigit():
      num_pizzas += character
   else:
      break
num_pizzas = int(num_pizzas) 
```

不过，这很笨拙。有没有更简单的方法来拆分从数字转换为字母字符的字符串？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-02T21:04:34.447

您要求一种将字符串拆分为数字的方法，但在您的示例中，您真正想要的只是第一个数字，这很容易完成[`itertools.takewhile()`](http://docs.python.org/3/library/itertools.html#itertools.takewhile)：

```
>>> int("".join(itertools.takewhile(str.isdigit, "10pizzas")))
10 
```

这很有意义——我们正在做的是从字符串中取出字符，而它们是数字。这样做的好处是一旦我们到达第一个非数字字符就停止处理。

如果您也需要后面的数据，那么您正在寻找的内容[`itertools.groupby()`](http://docs.python.org/3/library/itertools.html#itertools.groupby)与简单的[列表理解](http://www.youtube.com/watch?v=pShL9DCSIUw)混合在一起：

```
>>> ["".join(x) for _, x in itertools.groupby("dfsd98sd8f68as7df56", key=str.isdigit)]
['dfsd', '98', 'sd', '8', 'f', '68', 'as', '7', 'df', '56'] 
```

如果你想制作一个巨大的数字：

```
>>> int("".join("".join(x) for is_number, x in itertools.groupby("dfsd98sd8f68as7df56", key=str.isdigit) if is_number is True))
98868756 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-02T21:04:26.707

要将字符串拆分为数字，您可以使用[`re.split`](http://docs.python.org/2/library/re.html#re.split)正则表达式`\d+`：

```
>>> import re
>>> def my_split(s):
    return filter(None, re.split(r'(\d+)', s))

>>> my_split('5pizzas')
['5', 'pizzas']
>>> my_split('foo123bar')
['foo', '123', 'bar'] 
```

要查找第一个数字，请使用[`re.search`](http://docs.python.org/2/library/re.html#re.search)：

```
>>> re.search('\d+', '5pizzas').group()
'5'
>>> re.search('\d+', 'foo123bar').group()
'123' 
```

如果您知道数字必须在字符串的开头，那么您可以使用`re.match`而不是`re.search`. 如果您想找到所有数字并丢弃其余数字，您可以使用`re.findall`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-02T21:04:04.403

正则表达式怎么样？

```
reg = re.compile(r'(?P<numbers>\d*)(?P<rest>.*)')
result = reg.search(str)
if result:
    numbers = result.group('numbers')
    rest = result.group('rest') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-21T12:41:04.267

答案添加为解决[如何将字符串按数字拆分为列表的可能方法？](https://stackoverflow.com/questions/52443783/how-to-split-a-string-into-a-list-by-digits#52443783)这就是`dupe-linked`这个问题。

您可以自己进行拆分：

*   使用临时列表来累积非数字字符
*   如果找到一个数字，将临时列表 ( `''.join()`-ed) 添加到结果列表中（仅当不为空时）并且不要忘记清除临时列表
*   重复直到处理完所有字符并且如果临时列表仍有内容，则添加它

* * *

```
text = "Ka12Tu12La"

splitted = []   # our result
tmp = []        # our temporary character collector

for c in text:
    if not c.isdigit():
        tmp.append(c)    # not a digit, add it

    elif tmp:            # c is a digit, if tmp filled, add it  
        splitted.append(''.join(tmp))
        tmp = []

if tmp:
    splitted.append(''.join(tmp))

print(splitted) 
```

输出：

```
['Ka', 'Tu', 'La'] 
```

参考：

*   [.join() 方法到底是做什么的？](https://stackoverflow.com/questions/1876191/what-exactly-does-the-join-method-do)

# c# - 从 DataGridView C# 更新 SQL 数据库

> ID：13673784
> 
> 赞同：0
> 
> 时间：2012-12-02T20:58:24.697
> 
> 标签：c#, winforms, datagridview

我有一个应用程序，它通过数据集在 dataGridView 中显示 sql 数据库的数据。我想知道是否有一种方法可以通过修改 gridViewDirectly 来更新数据库，例如将数据从数据库传递到网格，但是倒置，而不是创建一个在文本框中显示可编辑信息的新表单，然后用户更改什么他必须更改并单击更新。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:40:32.883

通过操作数据库中的数据，只需将其拖放到您的表单中，无需更多代码，该`DataGridView`功能已经具有`DataSet`和控制功能。`BindingSource``TableAdapter``BindingNavigator``DataGridView`

1.  创建数据集
2.  将表拖到数据集
3.  转到“数据源”面板
4.  将表格拖到您的表单中。
    就是这样！如您所见，“保存”和“删除”按钮`BindingNavigator`将是您使用`DataGridView`with从数据库中保存、更新和删除数据的功能`DataSet`

我为我的简短教程道歉，不是很清楚:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:11:09.790

您可以在 datagridview 中放置一个按钮列，当您按下按钮时，您可以开始编辑 dgv 单元格。

信息：[如何动态地将两个按钮添加到单个数据网格列？](https://stackoverflow.com/questions/7005036/how-can-i-add-two-buttons-to-a-single-datagrid-column-dynamically)

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewbuttoncolumn.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewbuttoncolumn.aspx)

[以编程方式定义 DataGridView 列类型](https://stackoverflow.com/questions/7781007/define-datagridview-column-type-programmatically)

如果您需要任何其他信息，请随时说

**编辑：**

你可以这样做：

```
 DataGridViewButtonColumn clbt_delet = new DataGridViewButtonColumn();
   clbt_delete.HeaderText = "DELETE"
   clbt_delete.Text = "Delete";
   clbt_delete.UseColumnTextForButtonValue = true;
   dataGridView1.Columns.Add(clbt_delete); 
```

# python - select() 和 table.select() 的区别

> ID：13673786
> 
> 赞同：5
> 
> 时间：2012-12-02T20:58:38.890
> 
> 标签：python, sqlalchemy

`select`和 和有什么区别`tablename.select()`？当我将列名传递给`table.select`喜欢时：

```
table.select(table.c.name) 
```

sql就像

```
select * from tablename where tablename.name 
```

当我将一列传递给`select`（实例方法）时：

```
select([table.c.name]) 
```

sql就像

```
select name from tablename 
```

我想要与 相同的`select`结果`table.select`。

当我阅读它的文档时，`select`它是相同的，所以它是相同的方法，但为什么它们有不同的行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T21:18:07.777

大概，`select()`你的意思是[`sqlalchemy.sql.select()`](https://docs.sqlalchemy.org/en/latest/core/selectable.html#sqlalchemy.sql.expression.select)。

该`select()`函数明确地将一组列作为它的参数，它的结果是一个独立的[`Select`实例](https://docs.sqlalchemy.org/en/latest/core/selectable.html#sqlalchemy.sql.expression.Select)。您还可以传入一个`FromClause`对象（如表或别名），它将从该对象中获取列。这在核心教程的[选择章节中有详细描述。](http://docs.sqlalchemy.org/en/latest/core/tutorial.html#selecting)

另一方面，[`.select()`表上的方法](https://docs.sqlalchemy.org/en/latest/core/selectable.html#sqlalchemy.sql.expression.FromClause.select)采用`whereclause`第一个参数，*而不是*一组列。换句话说，无论您传递给*该*方法，形成`WHERE`选择的过滤器，而不是您想要选择的列。通过为 where 子句传入一列，您将选择所有列，但过滤`WHERE [columnname]`. 过滤器不多，因为表达式并没有真正限制匹配的行。

正确使用该`table.select()`函数是传入一个选择过滤器，并打算选择所有列：

```
table.select(table.c.name != None) 
```

这将被编译为：

```
SELECT * FROM tablename WHERE tablename.name IS NOT NULL; 
```

（虽然 SQLAlchemy 知道存在哪些列，但会扩展`*`为所有`table`列名的显式列表）。

您应该坚持`select()`仅选择特定列的功能。

# javascript - 过滤对象结果的经济方法

> ID：13673788
> 
> 赞同：1
> 
> 时间：2012-12-02T20:58:40.950
> 
> 标签：javascript

我有一个 JSON 文件，我只需要检索得分最高的十个项目：

我的数据：

```
{
    "movies" : {
        "eraserhead" : {
               "full_title" : "Eraserhead",
               "votes": 50
         },
        "psycho" : {
               "full_title" : "Psycho",
               "votes" : 90  
         }
    }
} 
```

等等，等等，以获取大约 50 - 100 个列表。

我知道我可以遍历并构建一个列表，但我很好奇是否有任何处理器密集程度较低的方法可以根据该属性 ( `movies[title].votes`) 过滤这些结果。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T21:00:52.553

最简单的方法是创建一个数组，对数组进行排序并获取前 10 个元素。

```
var myArray = [];
for (var key in movies) {
    var movie = movies[key];
    movie.title = key; 
    myArray.push(movie);
}
var tenFirst = myArray.sort(function(a,b){return b.votes-a.votes}).slice(0,10); 
```

[演示（打开控制台）](http://jsfiddle.net/Xe5g8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:06:35.047

```
var a = obj.movies;
var ar=[],k;
    for(k in a){
    if(a.hasOwnProperty(k)){
        var m=a[k];
        m.title = k;
        ar.push(m);
    }
}

    var sorted = a.sort(function(a,b){return a.votes-b.votes;});
    var first10 = sorted.slice(0,10) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T21:47:47.700

排序是昂贵的。既然您说您希望它高效，请执行以下操作：

```
var result = [],
    len, o;

for (var key in data.movies) {
    o = data.movies[key];
    len = result.length
    if (!len) {
        result.push(o);
    } else if (len < 10) {
        if (o.votes < result[0].votes) {
            result.unshift(o);
        } else {
            while (len--) {
                if (o.votes > result[len].votes) {
                    result.splice(len + 1, 0, o);
                    break;
                }
            }
        }
    } else if (o.votes > result[0].votes) {
        result.shift();
        if (o.votes < result[0].votes) {
            result.unshift(o);
            continue;
        }
        len--;
        while (len--) {
            if (o.votes > result[len].votes) {
                result.splice(len + 1, 0, o);
                break;
            }
        }
    }
} 
```

[http://jsperf.com/reduce-object-of-objects-to-max-property](http://jsperf.com/reduce-object-of-objects-to-max-property)

![在此处输入图像描述](../Images/26be224e4c7c75e9f438325d863c772f.png)

# objective-c - 是否可以从 iOS 中 *any|some* llvm 生成的代码加载函数（不是由 clang 制作的）？

> ID：13673792
> 
> 赞同：1
> 
> 时间：2012-12-02T20:59:05.957
> 
> 标签：objective-c, ios, llvm, interpreter, llvm-py

如果我用 LLVM 构建一个函数，比如

```
int sum(int a, int b)
{
    return a + b;
} 
```

[使用http://www.llvmpy.org/llvmpy-doc/dev/doc/firstexample.html](http://www.llvmpy.org/llvmpy-doc/dev/doc/firstexample.html)之类的东西，是否可以从 iOS 内部使用该功能？好像是用 C/C++/Obj-c 制作的函数？

这是因为我想知道在 LLVM 上构建语言是否会自动神奇地提供免费支持 iOS 的路径（即：与嵌入 python 或类似的东西一样难）。

如果可以，怎么做？（即：从 obj-c 调用 sum）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:05:15.450

对的，这是可能的。我在 Android 上完全做到了这一点。和 iOS 足够相似，它应该在那里是可能的。只要你使用解释器来执行你的 LLVM 代码。因为 Apple Developer 协议禁止使用 JIT。

# r - 如何在不列出每个名称的情况下对列中的值求和，按 R 中的行中的名称分组？

> ID：13673793
> 
> 赞同：4
> 
> 时间：2012-12-02T20:59:23.310
> 
> 标签：r, aggregate

如何使用 R 查找物种值的总和？我有 62 个物种名称，想为栖息地中的每个物种添加基础面积。我试过了

```
aggregate(file name, species, FUN=sum, simplify=TRUE) 
```

以及对此的许多变体，但它总是说它找不到`species`（我的数据集中的列标题）。列表太长，无法添加为输入；我希望程序使用我的专栏信息。我的数据集如下所示：

```
Species      BA
sp1          0.5
sp1          0.2
sp2          0.1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T21:19:57.737

首先将数据读入数据框，然后使用聚合。

```
# You would read from the file instead.
x <- read.table(header=T, file=textConnection("Species      BA
sp1          0.5
sp1          0.2
sp2          0.1
"))

> aggregate(.~Species, data=x, FUN=sum)
  Species  BA
1     sp1 0.7
2     sp2 0.1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T02:20:46.667

这个`data.table`包非常适合这种东西。

首先，加载包并创建一些数据。

```
library(data.table)
set.seed(1)
dat <- data.table(Species = paste("s", sample(1:3, 15, replace = TRUE), sep = ""),
                  BA = rnorm(15), CA = rnorm(15), DA = rnorm(15), EA = rnorm(15),
                  key="Species")
dat
#     Species           BA          CA         DA          EA
#  1:      s1 -0.005767173  0.80418951  1.2383041 -0.79533912
#  2:      s1 -1.147657009 -0.69095384 -0.4527840 -0.17262350
#  3:      s1 -0.891921127 -0.43331032  1.1565370 -0.94064916
#  4:      s1  0.435683299 -0.64947165  0.8320471 -0.11582532
#  5:      s1 -1.237538422  0.72675075 -0.2273287 -0.81496871
#  6:      s2  2.404653389 -0.05710677 -0.2793463 -0.05487747
#  7:      s2  0.763593461  0.50360797  1.7579031  0.25014132
#  8:      s2 -0.411510833 -0.23570656 -1.0655906  0.35872890
#  9:      s2  0.252223448 -0.54288826 -1.5637821 -0.01104548
# 10:      s2  0.377395646  0.99216037 -0.3767027 -1.42509839
# 11:      s3 -0.799009249  1.08576936  0.5607461  0.61824329
# 12:      s3 -0.289461574 -1.28459935 -0.8320433 -2.22390027
# 13:      s3 -0.299215118  0.04672617 -1.1665705 -1.26361438
# 14:      s3 -0.224267885  1.15191175  0.2661374  0.24226348
# 15:      s3  0.133336361 -0.42951311  2.4413646  0.36594112 
```

注意：如果你已经有一个`data.frame`（我想你有），你可以使用`data.table(YourDataFrame, key=YourGroupingColumns)`

这是实际的聚合。`.SD`是数据列的子集。默认情况下，这是您数据中除`key`s 之外的所有列（您的分组列；在这种情况下，我们将“Species”指定为我们的键）。

```
dat[, lapply(.SD, sum), by=key(dat)]
#    Species        BA         CA        DA         EA
# 1:      s1 -2.847200 -0.2427955  2.546776 -2.8394058
# 2:      s2  3.386355  0.6600668 -1.527519 -0.8821511
# 3:      s3 -1.478617  0.5702948  1.269634 -2.2610668 
```

但是，还有一个`.SDcols`参数可让您通过名称或数字索引指定您感兴趣的列。

```
dat[, lapply(.SD, sum), by=key(dat), .SDcols = "DA"]
#    Species        DA
# 1:      s1  2.546776
# 2:      s2 -1.527519
# 3:      s3  1.269634
dat[, lapply(.SD, sum), by=key(dat), .SDcols = 2:3]
#    Species        BA         CA
# 1:      s1 -2.847200 -0.2427955
# 2:      s2  3.386355  0.6600668
# 3:      s3 -1.478617  0.5702948
# or perhaps, more easily understood.
dat[, lapply(.SD, sum), by=key(dat), .SDcols = c('BA','CA')]
#    Species        BA         CA
# 1:      s1 -2.847200 -0.2427955
# 2:      s2  3.386355  0.6600668
# 3:      s3 -1.478617  0.5702948 
```

# symfony - Symfony 2 + JMSSecurityExtraBundle：@PreAuthorize('permitAll') 不起作用

> ID：13673797
> 
> 赞同：1
> 
> 时间：2012-12-02T20:59:49.733
> 
> 标签：symfony

我有一个带有/放在防火墙后面的项目。但是，我希望我的控制器之一是“不安全的”，例如无论身份验证如何都显示其内容。但无论我做什么，捆绑包都是安全的。

我目前的做法是：

**安全性.yml**：

```
jms_security_extra:
    secure_all_services: true
    expressions: true

security:
    encoders:
        BrokernetGroup\Platea\SecurityBundle\Entity\User:
            id: brokernet_group_platea_security.crypt_encoder

    role_hierarchy:

    providers:
        db_users:
            entity:
                class: BrokernetGroup\Platea\SecurityBundle\Entity\User
                property: username

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false

        login:
            pattern:  ^/login.html$
            security: false

        protected_area:
            pattern:  ^/
            form_login:
                check_path: /login-check.do
                login_path: /login.html
            logout:
                path:   /logout.do
                target: /

    access_control: 
```

**控制器骨架**：

```
<?php
namespace BrokernetGroup\Platea\InfoBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use JMS\SecurityExtraBundle\Annotation as SE;

/**
 * Description of InfoController
 *
 * @author Gergely Polonkai
 *
 * @SE\PreAuthorize("permitAll")
 */
class InfoController
{
    /**
     * @Route("/", name="BrokernetGroupPlateaInfo_homepage", hostnamePattern="{hostname}", requirements={"hostname" = "%www_hostnames%"})
     * @Template
     */
    public function homepageAction()
    {
        return array();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:23:42.970

`anonymous: ~`在您的 security.yml 文件下方添加`protected_area:`以启用匿名令牌

# html - Chrome中表格单元格内图像侧面的额外边距

> ID：13673801
> 
> 赞同：0
> 
> 时间：2012-12-02T21:00:16.710
> 
> 标签：html, google-chrome, css, webkit

```
<div id='wrapper'>
  <div id='innerWrapper'>
     <img src ='image.png'" />
  </div>
</div>

#wrapper{
  display: table;
  border-spacing:0;
}

#innerWrapper {
  display:table-cell;
  padding:0;
  margin:0;
  border:0;
}
img {
   padding:0;
   margin:0;
   border:0;
} 
```

在 Chrome 中，这会在图像右侧呈现 1px 的边距并将 innerWrapper div 推出。如何去除边距？CSS重置没有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:05:20.383

你有没有尝试过

```
<div id='innerWrapper'><img src ='image.png'" /></div> 
```

在源代码中没有换行符？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:13:21.897

重置页面上所有 DIV 的边距：

```
div { 
    margin:0;
    padding:0;
} 
```

# jquery - jQuery 点击事件 Cookie

> ID：13673805
> 
> 赞同：1
> 
> 时间：2012-12-02T21:00:42.047
> 
> 标签：jquery, cookies

我试图让一个弹出框仅每 24 小时加载一次，但我不知道如何让 JQuery Click 事件接受/创建 cookie。我是相对论的新手。任何帮助，将不胜感激！

```
<link rel="stylesheet" href="colorbox.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="./colorbox/jquery.colorbox.js"></script>
    <script>
        $(document).ready(function(){
            $(".ajax").colorbox();
        });
    </script>
    <script>
        $(document).ready(function() { $('.ajax').click(); });
        // Create a cookie
        $.cookie('the_cookie', 'the_value');

        // Create expiring cookie, 7 days from then:
        $.cookie('the_cookie', 'the_value', { expires: 1 });

        // Read a cookie
        $.cookie('the_cookie'); // => 'the_value'
        $.cookie('not_existing'); // => null

        // EDIT
        // Attaching to a button click (jQuery 1.7+) and set cookie
        $("#ajax").on("click", function () {
            $.cookie('the_cookie', 'the_value', { expires: 1 });
        });

        // Attaching to a button click (jQuery < 1.7) and set cookie
        $("#ajax").click(function () {
            $.cookie('the_cookie', 'the_value', { expires: 1 });
        });
    </script>
</head>
<body>
    <p><a class='ajax' href="./content/ajax.html" title="Vote IG Top 100!"></a></p>
</body> 
```

这是网页：

[http://iconik-gaming.com/popup/](http://iconik-gaming.com/popup/)

感谢大家！

# ruby-on-rails - 为什么我的 JSON.parse 失败了？Ruby on Rails

> ID：13673809
> 
> 赞同：4
> 
> 时间：2012-12-02T21:01:32.007
> 
> 标签：ruby-on-rails, ruby, json, flickr, open-uri

我正在尝试将图像从 Flickr 的 API 加载到 Ruby on Rails 应用程序中，但我的 JSON.parse() 行上出现“意外令牌”。

我在这里找到了另一个响应，其中返回的 JSON 的双引号被转义了，解决方案是将 .gsub 东西添加到末尾，但我仍然遇到错误。

有谁知道问题是什么？

```
def add

@jsonresults = open("http://api.flickr.com/services/rest/?method=flickr.interestingness.getList&api_key=bb398c11934abb6d51bdd720020f6a4a&per_page=1&page=1&format=json&nojsoncallback=1").read
@images = JSON.parse(@jsonresults.to_json.gsub('\"', '"'))

end 
```

错误：

```
JSON::ParserError in ImagesController#add

757: unexpected token at '"{"photos":{"page":1, "pages":500, "perpage":1, "total":500, "photo":[{"id":"8234011021", "owner":"24066605@N07", "secret":"b4c05df8c5", "server":"8341", "farm":9, "title":"Crescent Lake", "ispublic":1, "isfriend":0, "isfamily":0}]}, "stat":"ok"}"' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T21:06:00.013

调用返回的 json 看起来不错。将您的解析更改为：

```
@images = JSON.parse(@jsonresults) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:05:01.900

[那不是有效的 JSON。](http://jsonlint.com/)外部的双引号集不属于。这是有效的版本：

```
'{"photos":{"page":1, "pages":500, "perpage":1, "total":500, "photo":[{"id":"8234011021", "owner":"24066605@N07", "secret":"b4c05df8c5", "server":"8341", "farm":9, "title":"Crescent Lake", "ispublic":1, "isfriend":0, "isfamily":0}]}, "stat":"ok"}' 
```

# ruby-on-rails - 资产管道最佳实践

> ID：13673810
> 
> 赞同：1
> 
> 时间：2012-12-02T21:01:33.203
> 
> 标签：ruby-on-rails, asset-pipeline

最佳实践是为整个应用程序提供一个清单（为所有页面加载 css/js），还是为每个控制器提供一个清单，以便它只加载需要的内容，或者......？

文档提到了仅包含特定控制器样式表的 css 的想法（例如 stylesheet_link_tag params[:controller），但假设您的常用样式为零。显然没有必要加载特定于其他 10 个控制器的样式。

所以感觉为每个控制器创建一个清单可能是要走的路吗？它通常包括一个“通用”样式表，以及控制器特定的样式表。

这里的最佳做法是什么？

# javascript - Javascript幻灯片，第一次播放时图像跳过？

> ID：13673816
> 
> 赞同：3
> 
> 时间：2012-12-02T21:02:22.143
> 
> 标签：javascript

我在 javascript 中创建了以下幻灯片。但是由于某种原因，在图像的第一张幻灯片中，第一张图像刚刚移动，第二张图像进行了“滑动”。任何帮助，将不胜感激。我已经包含注释以帮助使代码更具可读性。

```
<!DOCTYPE html>

<html>

<head>

<title></title>
<style type="text/css">
img.pic {
    position: absolute;
    height: 768px;
    width: 1024px;
}
html, body { 
    background-color:#3b3b35;
    width: 1024px;
    height: 768px;
    margin: 0;
    padding: 0;
    overflow:hidden;
}
</style>

</head> 

<body onload="startImages()">

<img class="pic" id="slide0" src="1.jpg" alt="pic1" />
<img class="pic" id="slide1" src="2.jpg" alt="pic2" />
<img class="pic" id="slide2" src="3.jpg" alt="pic3" />
<img class="pic" id="slide3" src="4.jpg" alt="pic4" />
<img class="pic" id="slide4" src="5.jpg" alt="pic5" />
<img class="pic" id="slide5" src="6.jpg" alt="pic6" />
<img class="pic" id="slide6" src="7.jpg" alt="pic7" />
<img class="pic" id="slide7" src="8.jpg" alt="pic8" />
<img class="pic" id="slide8" src="9.jpg" alt="pic9" />
<img class="pic" id="slide9" src="10.jpg" alt="pic10" />
<script type="text/javascript">
// Define the x start variable
var xstart = 0;

// Constructor for an image object:
function Image(obj, x) {
    this.object = obj;
    this.xpos = x;
}

// Image array
var Images = [];

// Sets up the images
function startImages() {
    for (var Imageamount = 0; Imageamount < 10; Imageamount++) {
        var Imgstore = document.getElementById("slide" + Imageamount);

        // Puts image in the array
        Images[Imageamount] = new Image(Imgstore, xstart);
        xstart = xstart - 1024;
    }
    // Controlls the delays
    setInterval(function () {
        var val = 0;
        var Interval = setInterval(function () {
            imSlide();
            val++;
            if (val == 16) clearInterval(Interval); // 16*64 = 1024, ie image size
        }, 30);
    }, 5000);
}

function imSlide() { // Controlls sliding
    for (var Slide = 0; Slide < Images.length; Slide++) {
        var image = Images[Slide];
        // Update + 64 to give a smooth slide. Updates 16 times so 16*64=1024

        var x = image.xpos + 64;
        // Move image from far right back to front of image stack
        if (x == 5120) {

            x = -5120;

        }
        // Store position back in array
        image.xpos = x;
        // Move the image
        image.object.style.left = x + "px";
    }
}

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:47:54.487

您的幻灯片放映在第一个间隔跳过的原因是因为您在第一次创建 Image 对象时没有设置图像的位置；您只是在设置一个名为“xpos”的变量。这会导致您的所有图像相互重叠，并在页面加载时将最后一张图像#slide9 显示在其他图像之上。

将您的 Image 对象声明修改为：

```
function Image(obj, x) {
    this.object = obj;
    this.xpos = x;
    this.object.style.left = x + "px"; //<--- this is the new part
} 
```

这是jsfiddle：http: [//jsfiddle.net/w9qQx/4/](http://jsfiddle.net/w9qQx/4/)

# javascript - flickr 轮播/幻灯片“英雄”在哪里可用？

> ID：13673819
> 
> 赞同：0
> 
> 时间：2012-12-02T21:02:44.670
> 
> 标签：javascript, yui, carousel, flickr

我在看 flickr 并注意到他们在顶部的旋转木马以及它运行得多么顺利。检查后，它显示“yui”，但我在 YUI 项目列表中的任何地方都看不到它。

[http://www.flickr.com/#yui_3_5_1_3_1354482071640_111](http://www.flickr.com/#yui_3_5_1_3_1354482071640_111)

有谁知道旋转木马的 YUI 中的哪些元素是由哪些元素制成的，以及它们在哪里可用？

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:46:10.617

以下是我根据 HTML 和缩小的 JS 源代码得出的结论。

Flickr carousel 是用很少的 YUI 代码编写的，除了[转换](http://yuilibrary.com/yui/docs/transition/)模块之外没有使用任何复杂的组件。过渡用于为旧浏览器中的动画提供回退。它非常流畅，因为它使用了 CSS 过渡，特别是使用`translate3d()`它非常适合在一个方向移动图像。

就像 Quinn 提到的那样，有 Gallery Carousel 小部件。最近我正在使用[ScrollView](http://yuilibrary.com/yui/docs/scrollview/) + [ScrollViewPaginator](http://yuilibrary.com/yui/docs/scrollview/#paginator)并在非触摸设备中禁用拖动事件。我喜欢这种方法，因为它感觉就像典型的轮播，但它还支持在触摸设备上使用手势浏览图像/页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:16:33.373

您可以使用 YUI Gallery Carousel 非常轻松地构建它[YUI Gallery Carousel](http://yuilibrary.com/gallery/show/carousel)

# android - 引用 ABS 时出现 Android SlidingMenu 错误

> ID：13673830
> 
> 赞同：4
> 
> 时间：2012-12-02T21:05:12.753
> 
> 标签：android, actionbarsherlock

我正在尝试在我的应用程序中使用 SlidingMenu (https://github.com/jfeinstein10/SlidingMenu/)。我的第一个问题是该项目正在使用 MATCH_PARENT，它不会为我编译。minSDK 设置为 5，targetSDK 为 17。我尝试将 min 更改为 8，即 MATCH_PARENT 引入时，但没有成功。

在用 FILL_PARENT 替换所有 MATCH_PARENT 后，它们都编译为 -1，项目看起来很好。然后我按照开发人员在他的 github 上的说明继续使用 ABS。不过，每当我引用 ABS 时，都会遇到很多错误，例如：

```
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values-v14\abs__styles.xml:121: error: Error retrieving parent for item: No resource found that matches the given name 'android:TextAppearance.Holo.Widget.PopupMenu.Small'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values-v11\abs__themes.xml:4: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values-v11\abs__themes.xml:6: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values-v14\abs__themes.xml:4: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values-v11\abs__themes.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values-v11\abs__themes.xml:10: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values-v14\abs__themes.xml:6: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values-v14\abs__themes.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light.DarkActionBar'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values-v14\abs__themes.xml:14: error: Error: No resource found that matches the given name: attr 'android:actionBarWidgetTheme'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values-v14\abs__themes.xml:22: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values-v14\abs__themes.xml:26: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values\abs__themes.xml:196: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values\abs__themes.xml:197: error: Error: No resource found that matches the given name: attr 'android:windowActionModeOverlay'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values\abs__themes.xml:198: error: Error: No resource found that matches the given name: attr 'android:windowCloseOnTouchOutside'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values-v14\abs__themes.xml:30: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Dialog'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values\abs__themes.xml:222: error: Error: No resource found that matches the given name: attr 'android:windowActionBar'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values\abs__themes.xml:223: error: Error: No resource found that matches the given name: attr 'android:windowActionModeOverlay'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values\abs__themes.xml:224: error: Error: No resource found that matches the given name: attr 'android:windowCloseOnTouchOutside'.
[2012-12-02 13:53:39 - LibrarySlidingMenu] C:\Users\RynoJvR\Dropbox\Android\LibraryActionBarSerlock\res\values-v14\abs__themes.xml:32: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light.Dialog'. 
```

据我所知，SlidingMenu 抛出错误是因为 ABS 中的一些 XML，这意味着 R 不会生成，我不能使用 SlidingMenu。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:03:21.787

转到属性。 ![在此处输入图像描述](../Images/d7bcd07b6c6df61870d5e60e43c63bac.png)

单击最新的目标平台（其中也有用于 mapActivity 的谷歌地图）。在这张图片中，它的 4.2 Google APIs

# ajax - 使用 Spring Security 保护对 Spring MVC REST API 的 jQuery 调用

> ID：13673835
> 
> 赞同：1
> 
> 时间：2012-12-02T21:05:28.697
> 
> 标签：ajax, json, rest, spring-mvc, spring-security

我正在使用 Spring MVC 框架开发 REST JSON API。我想为用户提供一个 HTML 应用程序，服务器和客户端之间的整个通信都是用 JSON 格式完成的。因此客户端单个 HTML 应用程序使用 jQuery 将 AJAX 调用发送到服务器。

我的大问题是找到正确的方法来集成适当的安全技术。我通过 Spring Security 阅读了很多关于基本、摘要或基于表单的身份验证的信息，但我认为这不是正确的方法。如果用户未登录并且我不想在每个请求中发送 jsessionid，我想获得 JSON 响应。

您能否告诉我如何通过执行 AJAX 请求来验证用户的正确方法或最佳实践？也许它是 OAuth 2 腿？（没有太多关于 OAuth 的线索）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:43:08.420

如果您不想在服务器端会话中存储身份验证信息（并在 cookie/url 中使用 JSESSIONID），您可以使用 BASIC 身份验证标头（在 JS 中创建）在每个 ajax 请求中发送身份验证信息。

我从来没有使用过 2-legged oauth，所以我不会对此发表评论。

编辑：错字

# jakarta-ee - 该方法不会在数据库中添加 daa

> ID：13673836
> 
> 赞同：0
> 
> 时间：2012-12-02T21:05:34.053
> 
> 标签：jakarta-ee, ejb, ejb-3.0, stateless-session-bean, session-bean

我正在编写 ejb 3.0 教程，我想在设置运行时将数据添加到数据库中，它不会指示任何错误，也不会在数据库中添加以下数据：这是会话 bean 代码：

```
public String creerCompte(CompteBancaire c) {

 try{
  em.persist(c);

  return null;

  }catch (Exception ex) {
        return ex.getLocalizedMessage();
    }
}
public static void main(String[] args) throws Exception{
GestionnaireDeCompteBancaire g=new GestionnaireDeCompteBancaire();

CompteBancaire c=new CompteBancaire("John Lennon", 150000);
g.creerCompte(c);} 
```

方法 main 只是为了尝试方法 creercompte out

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:57:01.377

它不表示任何错误，因为您捕获了它抛出的错误，将其本地化消息返回给调用者，而调用者完全忽略了返回的消息。完全删除该`catch (Exception)`块，重新运行您的代码，您可能会得到一个 NullPointerException。

会话 bean 不应该使用`new GestionnaireDeCompteBancaire()`. 它应该打包在 Java EE 应用程序中，该应用程序部署在 JBoss 或 Glassfish 等 Java EE 容器中，然后使用部署在同一容器中的 Web 应用程序或使用 Java EE 客户端应用程序调用。我认为您确实需要阅读有关 EJB（和异常处理）的书或严肃的教程。

# c# - Gzipped Ajax 请求未显示在 Safari 但 Chrome/FF 上

> ID：13673837
> 
> 赞同：1
> 
> 时间：2012-12-02T21:05:35.600
> 
> 标签：c#, javascript, ajax, safari, gzip

Gzipped ajax 请求未在 Safari 但 Chrome/FF 上解压缩，

例如，我在 Safari 和 Chrome 的 Javascript 控制台中测试了以下代码：

```
$.post("http://onlinehotel.pro/src/proxyapi.aspx",{ttype:"read",
model:"HOTEL",
find:'{"filter":[{"property":"ID","value":"7472","compare":"="}],"sort":[],"parameters":[],"limit":1,"fields":[{"name":"NAME","type":"nvarchar","caption":"Name","index":0},{"name":"REGIONID","lookupCaption":"REGION","lookupTable":"REGION","lookupPrimaryKey":"ID","caption":"Region","type":"int"},{"name":"RES_ASKCOUNTRY","type":"bit","caption":"Ask Country","index":888},{"name":"RES_ASKCITY","type":"bit","caption":"Ask City","index":890},{"name":"RES_ASKREGION","type":"bit","caption":"Ask Region","index":892},{"name":"RES_ASKADDRESS","type":"bit","caption":"Ask Address","index":894},{"name":"RES_ASKGENDER","type":"bit","caption":"Ask Gender","index":896},{"name":"RES_ASKNATIONALITY","type":"bit","caption":"Ask Nationality","index":898},{"name":"RES_USEAMEX","type":"bit","caption":"Accept Amex","index":900},{"name":"RES_USEMASTERCARD","type":"bit","caption":"Accept MasterCard","index":902},{"name":"RES_USEVISA","type":"bit","caption":"Accept Visa","index":904},{"name":"RES_NOROOMLEFTCOUNT","type":"smallint","caption":"Sell room quota","index":906},{"name":"RES_GUESTCARDHOLDER","type":"bit","caption":"Guest must cardholder?","index":908},{"name":"RES_MAXADULTCOUNT","type":"smallint","caption":"Max Adult/Room","index":910},{"name":"RES_CHDMAXAGE","type":"smallint","caption":"Max Chd Age","index":912},{"name":"RES_CHDMINAGE","type":"smallint","caption":"Min Chd Age","index":914},{"name":"CURRENCYID","lookupCaption":"NAME","lookupTable":"STDCURCODE","lookupPrimaryKey":"ID","caption":"Default Currency","type":"int"},{"name":"EhosMemberId","type":"int","caption":"EhosMemberId","index":922},{"name":"PROGDATE","type":"date","caption":"Program Date","index":924},{"name":"GANALYTICSCODE","type":"nvarchar","caption":"Analytics Profile ID","index":926},{"name":"FBPAGEURL","type":"nvarchar","caption":"Facebook Page URL","index":928},{"name":"FBAPPPASSWORD","type":"nvarchar","caption":"Application Pass","index":930},{"name":"FBAPPID","type":"nvarchar","caption":"Application ID","index":932},{"name":"WEBKEY","type":"nvarchar","caption":"Web Key","index":934},{"name":"WEB","type":"nvarchar","caption":"Web","index":936},{"name":"TIMEZONEID","lookupCaption":"NAME","lookupTable":"STDTIMEZONE","lookupPrimaryKey":"ID","caption":"Time Zone","type":"int"},{"name":"SQLUSER","type":"nvarchar","caption":"SQL User","index":940},{"name":"SQLPASS","type":"nvarchar","caption":"SQL Password","index":942},{"name":"SQLIP","type":"nvarchar","caption":"SQL IP","index":944},{"name":"SQLDB","type":"nvarchar","caption":"SQL DB","index":946},{"name":"SMTPUSER","type":"nvarchar","caption":"SMTP User","index":948},{"name":"SMTPSERVER","type":"nvarchar","caption":"SMTP Server","index":950},{"name":"SMTPPASS","type":"nvarchar","caption":"SMTP Password","index":952},{"name":"SMTPFROM","type":"nvarchar","caption":"SMTP From","index":954},{"name":"PHONE","type":"nvarchar","caption":"Phone","index":958},{"name":"NOTES","type":"nvarchar","caption":"Notes","index":960},{"name":"MINPRICE","type":"money","caption":"Min Price","index":964},{"name":"LOGOURL","type":"nvarchar","caption":"Logo URL","index":966},{"name":"LATLNG","type":"nvarchar","caption":"Coordinate","index":968},{"name":"FAX","type":"nvarchar","caption":"Fax","index":972},{"name":"EMAIL","type":"nvarchar","caption":"Email","index":974},{"name":"CONCEPTID","lookupCaption":"CONCEPTNAME","lookupTable":"HOTEL_CONCEPT","lookupPrimaryKey":"ID","caption":"Concept","type":"int"},{"name":"CATEGORYID","lookupCaption":"CATEGORYNAME","lookupTable":"HOTEL_CATEGORY","lookupPrimaryKey":"ID","caption":"Category","type":"int"},{"name":"ADDRESS","type":"nvarchar","caption":"Address","index":986},{"name":"LAST_SYNC","type":"datetime","caption":"Last Synced","index":988},{"name":"ID","type":"int","index":990}],"idProperty":"ID"}'}) 
```

在 Chrome 中的结果：

```
responseText: "ERROR: Read Permission Denied" 
```

Safari 中的结果：

```
responseText:"���`I�%&/m�{J�J��t��`$ؐ@�������iG#)�*��eVe]f@�흼��{����{����;�N'���?\fdl��J�ɞ!���?~|?"~�G���&gt;z��_�ы�/N?z����/���6/?}�����/_�=���/��~d?�������_�^'_~��ͫ߇>|��M�����M�S����ӧ��k��M��>������W��_�!0�ϥﻯ^��X~�އ_�~s�������W?y��8��ŗ�����������������N_��o�\�������}������{��ɷ����A��}�ó��}v�իW�/N~���:3 ���j����>�)J/_}����7�.��pg'��{��C�K�����~�7g'�O�|�v_o�ۿX<{������s����j��������Z���/_�&lt;~���_2ў�~���3�㷿w��Ͼ{���:�}e����/ޜ}q�S_�8���xN��J>�?л����������7/��u��� }���}ti?UX��i��g����>9�y�/�M�����=�w�� ���SE�&amp;�嫳n3ޡ�&gt;{���_
��m�zt�nso;_o_�M��;���evՀw��ɼ"ٺ[,�����{�������;�&gt;���w������9{��{�{��ݽ��=����=����?���l��:�e���2o�T_�89}�ƣ���T)������QspB�����|6ܽ���\_�4�}������c���o�{N�    �t���)~i���[��7�����ŉ��&gt;����/��裺�:������Ï~����
{3�" 
```

# java - 在 Java 代码中使用 Scala 类型别名

> ID：13673839
> 
> 赞同：9
> 
> 时间：2012-12-02T21:05:40.710
> 
> 标签：java, scala, scala-java-interop, type-alias

假设我在 scala 中定义了类型别名为

```
object Foo {
  type Bar = Option[String]
} 
```

看起来我不能像这样在 Java 代码中引用别名（它只是抱怨*找不到符号*）：

```
import Foo.*;

public class Cafebabe {
  void bar(Bar x) {
  //...
  }
} 
```

我也尝试过静态导入。

*（更具体地说，我有 java 反射代码，我无法更改它需要知道参数类型，并且我需要向它提供 Bar 别名）。*

我知道，我可以在 Scala 中创建包装器

```
class BarWrapper(value: Bar) 
```

但也许我错过了其他方式？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-02T21:58:34.200

类型别名仅对 Scala 编译器可见，并且与泛型类型一样，它们不会出现在 JVM 类文件中的任何位置。

如果您使用的是 Java，那么您将无法使用无别名类型，`Option[String]`因为*javac*无法知道`Bar`您在 Scala 代码中声明的类型别名。无论您在哪里使用`Bar`只需使用`Option[String]`（`scala.Option<String>`在 Java 中），它都应该可以正常工作。

# vba - 选择对象和用户窗体的奇怪错误

> ID：13673847
> 
> 赞同：2
> 
> 时间：2012-12-02T21:06:47.337
> 
> 标签：vba, excel

这段代码出现一个奇怪的错误。这段摘录是主要代码的开始。首先，它打开一个接受 3 个输入的表单。输入现在没有被使用，所以这不是问题。

```
Public triangle As Range
Public Height, Width, i As Integer

Sub asdf()
Set triangle = Selection
WeightsUserForm.Show
Height = triangle.Rows.Count
Width = triangle.Columns.Count
Debug.Print Height
Debug.Print Width 
```

这给了我 12 作为高度和 12 作为宽度，根据我选择的内容，这是正确的。

现在这是当您在用户表单上按 OK 时运行的子程序：

```
Private Sub OKButton_Click()
Set triangle = Selection
Height = triangle.Rows.Count
Width = triangle.Columns.Count
Debug.Print Height
Debug.Print Width 
```

这给了我 28.5 的高度和 99 的宽度。我不知道这是从哪里来的。我什至检查了我的用户窗体上的所有对象，好像它可能将其解释为我的选择（这显然是错误的，因为这些对象没有 rows 属性）。

理想情况下，如果这是真的，我想将我的初始选择保存为“公共变量”。

任何帮助表示赞赏。

编辑：进一步更新。我现在手动设置了变量三角形，即

```
triangle = Range("B3","M14") 
```

这仍然给了我同样奇怪的维度。现在我真的很难过。

2xEDIT：当我不使用变量 Height 和 Width 而只是直接引用 triangle.Rows.Count 和 triangle.Columns.Count 它给了我正确的答案。所以我现在可以正常运行我的程序了。我仍然很想知道为什么使用变量是错误的。

* * *

所以你说这条线

`Public Height,Width,i As Integer`

只是将 i 声明为整数而不指定高度和宽度的类型？如果是这样，那将是我的问题。

* * *

我重做了它，将高度和宽度都正确地声明为整数，但它仍然以同样的方式出错。但是，使用私有变量 W 和 H 定义的工作方式相同。 *耸耸肩*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:48:16.123

在字里行间阅读，我认为您的问题是`Debug.Print Height`并且`Debug.Print Width`正在打印**表单**的大小。

如果您的声明位于 a`Module`而不是`Form`类中，则会发生这种情况，因为`Height`and`Width`是适用于表单的关键字，因此优先使用本地版本。

要解决，你应该做所有这些事情（并非所有这些都是绝对必要的，但都是好的做法）：

*   `Option Explicit`在*所有*模块中使用
*   不要使用关键字作为变量名
*   将变量范围按优先顺序排列为 to `Procedure`，然后是 local `Module`，然后是 public `Module`，并且只有在有充分理由的情况下
*   使用模块名称为远程模块调用添加前缀，例如`Module1.Height`

顺便说一句，使用`Dim Height, Width, i as integer`声明声明`Height`并`Width`作为默认类型是`Variant`.

# objective-c - 检测iPhone上遥控器上一个曲目按钮上的双击

> ID：13673848
> 
> 赞同：0
> 
> 时间：2012-12-02T21:06:49.453
> 
> 标签：objective-c, ios, xcode4.5

如何检测iPhone上遥控器上一个曲目按钮上的双击？

我能够检测到应用程序视图和按钮上的双击，但无法检测到遥控器中按钮的双击（多任务栏中的上一个按钮）..

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:21:01.950

您无法检测到操作系统本身的触摸，在您的情况下是多任务栏。您只能检测应用范围内的触摸。当用户显示多任务栏时，您的应用程序会调用该 `- (void)applicationWillResignActive:(UIApplication *)application`方法

# python - Python 的 MSI 安装程序崩溃（Windows 安装程序问题）

> ID：13673850
> 
> 赞同：1
> 
> 时间：2012-12-02T21:06:54.750
> 
> 标签：python, windows, windows-xp

我的系统是 Windows XP 32 位，我安装了 Python 2.7 的工作安装。我想更新到 2.7.3 版，但不幸的是，当我启动安装程序时，它崩溃了。我可以在第一个对话框中单击下一步，选择为所有用户安装它，但在此之后，会出现一个窗口，提示 Windows 安装程序遇到问题，它将被关闭。

我也尝试过使用 Python 3.3 安装程序，但问题是一样的:-(

我试图记录操作，但我无法理解失败的原因。日志在[这里](http://pastebin.com/R9KWsAj6)。

该日志是 Python 3.3 安装的（Python 2.7 日志较长）。我看到了一些错误，但似乎安装程序通过了这些错误。我看不出有什么问题。

桑德罗

# javascript - jQuery Flot：两个 x 轴，一个数据集

> ID：13673854
> 
> 赞同：0
> 
> 时间：2012-12-02T21:07:30.377
> 
> 标签：javascript, jquery, flot

使用 Flot，是否可以在一个数据集上使用两个 x 轴？

**y** = 高度，**x1**（底部）= 时间（时间戳），**x2**（顶部）= 距离（公里）

```
data = [[timestamp, altitude, km], [...]] 
```

# ruby-on-rails - Activerecord：如何在 Belongs_to 关系中从一个对象导航到另一个对象？

> ID：13673855
> 
> 赞同：0
> 
> 时间：2012-12-02T21:07:49.883
> 
> 标签：ruby-on-rails, activerecord

User和Exercise的关系是user **has_many** exercise 而**executive belongs_to** user

```
class Exercise < ActiveRecord::Base
 belongs_to :user
 attr_accessible :act_id, :bcalor, :comment, :day, :week, :duration

 before_save :calor_burned

 private

 def calor_burned
  act = Activity.find(act_id)
  #how to find user_id?
  #User has_many weeklyweight
  #and weeklyweight belongs to a user 
  wt = (Weeklyweight.where(:week => week, :user_id => user_id).first).weight
  if(wt < 180)
    self.bcalor = ((wt * act.w160 * duration)/60)
   elsif ((wt >= 180) && (wt < 220))
    self.bcalor = ((wt * act.w200 * duration)/60)
   else
    self.bcalor = ((wt * act.w240 * duration)/60)
   end
  end 
 end 
```

如何访问帮助我访问体重的**user.id ？**

# 编辑

我正在努力

```
user = act.user 
```

我收到错误消息：“*未定义的方法 `user' for #* ”

# 编辑

这是我的用户模型

```
class User < ActiveRecord::Base

  attr_accessible :name, :provider, :uid

 # This is a class method, callable from SessionsController
 # hence the "User."
 def User.create_with_omniauth(auth) 
   user = User.new()
   user.provider = auth["provider"]
   user.uid = auth["uid"]
   user.name = auth["info"]["name"]
   user.save
   return user
  end

  has_one :userprofile
  has_many :exercises
  has_many :weeklyweights
end 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:03:43.077

Rails 将自动为您提供从练习实例导航到用户的访问器。在您的`calor_burned`方法中，您应该能够执行 user.id 或 user_id。

如果这些方法不可用，请确认 User 提到的类`has_many :exercises`，并且您是否有正确设置两个表的迁移？确认在您的数据库中，练习有一个名为“user_id”的列，它应该是用户表的外键。

# java - 从 Android Activity 启动 Java 源文件

> ID：13673856
> 
> 赞同：0
> 
> 时间：2012-12-02T21:07:56.663
> 
> 标签：java, android

我编写了一个程序，可以在 Eclipse 的控制台和 Linux 的终端窗口中工作。我现在正在将它转换为一个 Android 应用程序，并且我已经完成了 Android UI 的基本功能，直到它需要使用我编写的程序的 Java 文件中的逻辑。我所有来自 Java 文件的输入当前都来自键盘（来自扫描仪）。

我的问题是：如何转换它以使其与应用程序的用户交互一起使用？

唯一的输入将来自内置的`NumberPicker`. Java文件从main方法开始`public static void main(String[] args) {`：）

例如：

示例安卓代码：

```
public class Source1 extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.source1_layout);
        Intent intent = getIntent();
        int pickerValue = intent.getIntExtra("numEntered", 0);
} 
```

来自程序 (Test.java) 的示例 Java 代码：

```
public class Test {

    public static void main(String[] args) {

    System.out.println("Enter number: ");
    Scanner reader = new Scanner(System.in);
    int num = reader.nextInt();
    ...
    }
} 
```

如何传入类`pickerValue`的main方法`Test`（启动main方法的逻辑）？我想要`num = pickerValue;`在 main 方法中（替换`Scanner`）。这是怎么做到的？

另外，我拥有的打印语句是否会`System.out.println(...);`直接转换为 Android UI 并打印在屏幕上，还是我必须修改这些语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:02:29.037

您应该尝试将 UI 与逻辑分开。根据您实际收集输入的部分的输入提取您正在计算的部分。这样，逻辑方法（或类）可以与多种输入收集方法一起重用。

例如，Calculator 类不应具有以下方法：

```
/**
 * asks for two numbers A and B, reads them from the keyboard, and displays the result 
 * of A^B on the screen
 */
public void power() {...}

/**
 * asks for a number A, reads it from the keyboard, and displays the square root
 * of A on the screen
 */
public void squareRoot() {...} 
```

相反，它应该分为两类：

```
public class Calculator {
    /**
     * returns a^b
     */
    public double power(double a, double b) {...}

    /**
     * returns the square root of a
     */
    public double squareRoot(double a) {...}
}

public class ConsoleCalculator {
    private Calculator calculator;

    public ConsoleCalculator(Calculator calculator) {
        this.calculator = calculator;
    }

    /**
     * asks for two numbers A and B, reads them from the keyboard, uses
     * the calculator to compute A^B, and displays the result on the screen
     */
    public void power() {...}

    /**
     * asks for a number A, reads it from the keyboard, uses the calculator to
     * compute the square root of A and displays the result on the screen
     */
    public void squareRoot() {...}
} 
```

这样，很容易构建一个 AndroidCalculator，因为核心的数学逻辑被封装在一个 Calculator 类中，它不关心输入来自哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T02:17:46.740

您必须重新编写 Java 逻辑才能被 Android 框架理解。根据您的应用程序的复杂性，这可能会也可能不会容易做到。

例如，使用您发布的测试类

```
Sample Java Code from program:

public class Test {

public static void main(String[] args) {

System.out.println("Enter number: ");
Scanner reader = new Scanner(System.in);
int num = reader.nextInt();
...
}
} 
```

这很容易变成

```
public class Source1 extends Activity {

TextView number;
 EditText enterText;
 String result;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.source1_layout);

//inflate your components from XML
result = (TextView)findViewById(R.id.resultId);
enterText = (EditText)findViewById(R.id.enterTextId);

//Get the value from the user
//print it to the screen
String userWrites = enterText.getText().toString();
result.setText(userWrites);

} 
```

你似乎走在正确的轨道上。希望这可以帮助

# xcode - XCode 和 Git 共享代码的工作流程？

> ID：13673858
> 
> 赞同：1
> 
> 时间：2012-12-02T21:08:02.990
> 
> 标签：xcode, git, xib, merge-conflict-resolution

在开发 iPhone 应用程序的开发人员之间使用 git 共享代码的最佳实践/流程是什么？

每次我从命令行遵循正常的 git-fetch、git-rebase origin/master 方法时，我都会在 .xcodeproj、.xib 和 Storyboard 文件中遇到冲突。

.xib 并没有那么糟糕，因为它通常很容易修复，但是 .xcodeproj 一直在损坏，我还没有找到一种简单的方法来持续修复它。

共享项目文件和解决与 git 冲突的最佳工作流程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:25:54.043

项目文件中的冲突总是很痛苦。同样的事情发生在 .NET 开发和 Visual Studio 中。处理此问题的最佳方法是不要一次合并太多更改。您可以通过在集成分支上合并彼此的更改来做到这一点。为了保持分支干净，您不要将该分支或其他人的背部合并到您的分支。您依靠 rerere 来记住一路上的所有冲突。这是我使用的工作流程：

[http://dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

如果你真的被卡住了，你可能会看看另一边做了什么更改（你正在合并什么），检查你的项目文件版本，手动执行另一个分支对项目文件所做的事情，然后用它作为冲突的解决方案。

问题在于，当您更新项目时，IDE 正在做自己的事情。因此，有时，您需要手动使用 IDE 来模拟自己添加所有内容并将该文件用作冲突解决方案。

这是使用重型 IDE 进行开发的阴暗面。

# c++ - 静态和匿名命名空间

> ID：13673864
> 
> 赞同：11
> 
> 时间：2012-12-02T21:08:33.177
> 
> 标签：c++

> **可能重复：**
> [未命名/匿名命名空间与静态函数](https://stackoverflow.com/questions/154469/unnamed-anonymous-namespaces-vs-static-functions)

这是完全多余的，还是有理由这样做？

```
namespace {
  static void f() {
    ...
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T21:19:22.877

对我来说它看起来是多余的——要么被声明为静态的，要么在匿名命名空间中意味着它具有内部链接。

§3.5/3：

> 具有命名空间范围 (3.3.6) 的名称如果是以下名称，则具有内部链接：
> — 显式声明为静态的变量、函数或函数模板；

§3.5/4：

> [...] 未命名命名空间或在未命名命名空间中直接或间接声明的命名空间具有内部链接。[...] 具有命名空间范围但没有在上面给出内部链接的名称，如果它是
> 一个变量的名称，则它与封闭命名空间具有相同的链接；或者
> ——一个函数；或者

因此，就像现在一样，它具有内部链接，因为它被显式声明为静态。如果它没有显式声明为静态的，它将具有内部链接，因为它是在未命名的命名空间内声明的。无论哪种方式效果都一样。

请注意，我在这里专门针对一个函数进行回复——在*一些*晦涩的情况下，当您处理类型的名称（例如，类/结构/联合）时会有所不同，但我不知道适用于函数的任何此类事情。

就内部链接的真正含义而言，这是标准实际上非常直接和明确的地方之一。最好引用所有三种可能性的定义（§3.5/2）：

1.  当一个名称具有*外部链接*时，它所表示的实体可以被其他翻译单元的范围或同一翻译单元的其他范围的名称引用。
2.  当名称具有*内部链接*时，它所表示的实体可以由同一翻译单元中其他范围的名称引用。
3.  当名称*没有链接*时，它所表示的实体不能被其他范围的名称引用。

请注意，上面的斜体字与标准中的斜体字相匹配，这就是说这些句子定义了这些短语在标准其余部分中的含义的方式。

# php - Get_object_vars($worker) 不起作用，而 $object->value 起作用

> ID：13673865
> 
> 赞同：0
> 
> 时间：2012-12-02T21:08:33.993
> 
> 标签：php, object, pdo, oop

编辑：那是更多的调用代码：

```
$worker = new Worker(); // :|
$worker->addWorker($_POST);
echo 'Post vars:<br>';
var_dump($_POST);
echo 'Object Worker parameters:<br>';
echo $worker->name;
get_object_vars(serialize($worker));
echo 'create<br>';
var_dump(serialize($worker));
$_SESSION['save_confirm'] = serialize($worker); 
```

看起来像这样： var_dump 正确显示：

> array(8) { ["name"]=> string(4) "Name" ["surname"]=> string(7) "Surname" ["dob"]=> string(10) "dd/mm/yyyy " ["skills"]=> string(3) "ERN" ["postcode"]=> string(8) "Postcode" ["street"]=> string(6) "Street" ["email"]=>字符串（5）“电子邮件”[“动作”]=>字符串（6）“创建”}

虽然 get_object_vars 不起作用，但 echo $worker->name 给出了正确的值。，这个对象中有 PDO 语句，但也有：

`public function __sleep () { unset($conn); }`

编辑：类：

```
class Worker extends Core {
    public $name;
    public $surname;
    public $dob;
    public $skills;
    public $postcode;
    public $street;
    public $email;
    public $tel;
    public $erefnumber;

    // Adding worker to object
    public function addWorker(  array $postArray)
    {
          $this->name = $postArray['name'];
          $this->surname = $postArray['surname'];
          $this->dob = $postArray['dob'];
          $this->skills = $postArray['skills'];
          $this->postcode = $postArray['postcode'];
          $this->street = $postArray['street'];
          $this->email = $postArray['email'];
          $this->tel = $postArray['tel'];
          $this->erefnumber = $postArray['erefnumber'];
    }

    //Saving worker data to database, need provide group name (table name)
    public function saveWorker($group) {
        if(isset($this->conn)) {
            try
            {
                parent::__construct();
                $this->conn ->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); //catch exceptions
                $q = query('INSERT INTO :group(name, surname, dob, skills, postcode, street, email, tel, erefnumber) VALUES(
                :name,
                :surname,
                :dob,
                :skills,
                :postcode,
                :street,
                :email,
                :tel,
                :erefnumber)'); //sql query with group name
                $query = $pdo->prepare($q);
                $stmt -> bindValue(':group', $group, PDO::PARAM_STR);
                $stmt -> bindValue(':name', $name, PDO::PARAM_STR);
                $stmt -> bindValue(':surname', $surname, PDO::PARAM_STR);
                $stmt -> bindValue(':dob', $dob, PDO::PARAM_STR);
                $stmt -> bindValue(':skills', $skills, PDO::PARAM_STR);
                $stmt -> bindValue(':postcode', $postcode, PDO::PARAM_STR);
                $stmt -> bindValue(':street', $street, PDO::PARAM_STR);
                $stmt -> bindValue(':email', $email, PDO::PARAM_STR);
                $stmt -> bindValue(':tel', $tel, PDO::PARAM_STR);
                $stmt -> bindValue(':erefnumber', $erefnumber, PDO::PARAM_STR);

                $results = $query->execute();
            }
            catch(PDOException $e) 
            {
              return 'There was some error: ' . $e->getMessage();
            }
        }

        else {
        echo 'no connection  (saveWorkers)';
        }

        unset($stmt);
        return var_dump($list);
        //no exceptions

    }

class Core {
    public $conn;
    public function __construct() {
        $this->dbConnect();
    }
    public function dbConnect() {

        $host = 'localhost';
        $port = '3307';
        $username = 'modium_test';
        $password = 'test';
        $database ='modium_test';   
        try{
                $this->conn = new PDO('mysql:host='.$host.';dbname='.$database.';port='.$port, $username, $password );
                echo 'Connection successful!';
                echo var_dump($this->conn);
        }
        catch(PDOException $e){
                echo 'Error: ' . $e->getMessage();
        }   
    }

    public function __sleep () {
        unset($conn);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:10:42.073

我猜 $worker 对象的类属性是受保护的或私有的可见性。做一个

```
var_dump($worker); 
```

如果是这种情况， get_object_vars() 将无法看到它们，因为它们无法从类外部访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:25:50.097

您不是将对象传递给`get_object_vars`，而是传递一个字符串。

```
get_object_vars(serialize($worker)); 
```

应该

```
$object_vars = get_object_vars($worker); 
```

现在`var_dump($object_vars);`将显示您想要的。

# java - 在主屏幕上获取 appwidget 位置？

> ID：13673867
> 
> 赞同：2
> 
> 时间：2012-12-02T21:08:50.057
> 
> 标签：java, android, widget, rect

单击小部件图标时我开始一个活动。我想要的是将该小部件的位置发送到该活动。我已经尝试过

```
 Intent intent=new Intent(context, WidgetActivity.class);
        Bundle bundle = new Bundle();
        bundle.putString("rect", bound);  
        intent.putExtras(bundle);

        //intent.putExtra("rect", bound.toString());
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,intent, 0);
        RemoteViews views = new RemoteViews(context.getPackageName(),R.layout.pic1);

        views.setOnClickPendingIntent(R.id.wbutton1, pendingIntent);

        appWidgetManager.updateAppWidget(appWidgetId, views); 
```

在我的 onUpdate 过程中。但这会使活动崩溃。我听说该位置是使用`intent.getsourceBounds()`onReceive 中的 .Thats 来返回的吗？我尝试将绑定设置为全局变量。将其值从 onReceive 设置为`bound=intent.getsourceBounds();`这也不起作用。

所以我的问题是 1.如何`intent.getsourceBounds()`在 onUpdate 中使用小部件位置？2.如何发送到活动中？

感谢您的时间。

编辑：我设法将字符串从小部件发送到活动，如下所示：

```
 Intent intent=new Intent(context, WidgetActivity.class);
        Bundle bundle = new Bundle();
        bundle.putString("pos", "hello");
        intent.putExtras(bundle);
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        PendingIntent pendingIntent = PendingIntent.getActivity(context,0,intent,PendingIntent.FLAG_CANCEL_CURRENT); 
```

编辑 2：我发现[https://stackoverflow.com/a/5324918/1685829](https://stackoverflow.com/a/5324918/1685829)说可以使用 getSourceBounds() 来完成。谁能解释我如何在 onUpdate 中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T13:01:21.850

你不需要发送它；Android 为您完成。`getSourceBounds()`只能在活动内部使用。里面没有这个信息`onUpdate()`。

# java - Guice，扩展接口和构造函数返回类型

> ID：13673869
> 
> 赞同：1
> 
> 时间：2012-12-02T21:08:56.233
> 
> 标签：java, casting, dependency-injection, guice

接口A及其实现：

```
public interface A<K, E> {
    public void foo();
}

public abstract class AImpl<K, E> implements A<K, E> {
    public void foo(){};
} 
```

扩展接口 A 的接口 B 及其实现：

```
public interface B extends A<Integer, String> {
    public void bar();
}

public class BImpl extends AImpl<Integer, String> implements B {
    public void bar(){};
} 
```

一个抽象类 C，它被 A 注入：

```
public abstract class C<K, E> {
    A<K, E> a;

   @Inject
   public setA(A<K, E> a){
       this.a = a;
   }

   public A<K, E> getA(){
       return a;
   }
} 
```

使用 Guice：

```
bind(new TypeLiteral<A<Integer, Book>>(){}).to(BImpl.class); 
```

最后一个类，它扩展了 C 类：

```
public class D extends C<Integer, String> {
   public void fooBar(){
        this.getA().bar(); //Gets BImpl injected by Guice, and call bar():  Not working - error
        ((B) this.getA()).bar(); //Working
   }
} 
```

就像您从内联注释中看到的那样，BImpl 被正确注入并且可以使用，如果它没有其他方法，则扩展 A（接口 B 为空）。如果我在 B 中添加任何新方法，我不能在 D 中调用它而不将它转换为 B。我的主要目标是让用户可以扩展 A 并在 D 中使用此功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:15:45.243

> 如果我在 B 中添加任何新方法，我不能在 D 中调用它而不将它转换为 B。我的主要目标是让用户可以扩展 A 并在 D 中使用此功能。

如果用户需要`B`但不提供的功能`A`，他们应该声明他们*需要*`B`. 类`D`应该声明它需要什么——而不是依赖强制转换来确保它在声明之外被正确配置。

# java - openGL 在 psuedo-3d 透视图中绘制扭曲的精灵（图像）

> ID：13673876
> 
> 赞同：2
> 
> 时间：2012-12-02T21:09:35.643
> 
> 标签：java, android, opengl-es, 3d, andengine

好的，所以这将是一个非常难以解释的问题。我正在使用AndEngine（反过来，我认为是openGL）为Android制作一个非常基本的“伪3d”赛车游戏。我不相信使用 AndEngine 真的与这个问题有任何关系，因为我直接访问 openGL 函数来完成我的绘图。

无论如何，我复制粘贴了一些代码，使通常的 2d AndEngine 具有 3d 透视图（可以在[此处](http://www.andengine.org/forums/tutorials/3d-perspective-tutorial-t1790.html)找到此类教程。这很好用，我也不相信这与我的问题有太大关系, 但我并不完全理解 openGL，所以我很难说。这是 onLoadEngine （在应用程序启动时调用）的代码，它设置了具有 3d 透视图的相机：

```
this.mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT) {
    //other methods...
    private void setFrustum(GL10 pGL) {
        // set field of view to 60 degrees
        float fov_degrees = 60;
        float fov_radians = fov_degrees / 180 * (float)Math.PI;                        

        // set aspect ratio and distance of the screen
        float aspect = this.getWidth() / (this.getHeight());
        float camZ = this.getHeight()/2 / (float)Math.tan(fov_radians/2);                              

        // set projection
        GLHelper.setProjectionIdentityMatrix(pGL);
        GLU.gluPerspective(pGL, fov_degrees, aspect, camZ/10, camZ*10); 

        // set view
        GLU.gluLookAt(pGL, 0,120f, camZ, 0, 0, 0f, 0, 1, 0); // move camera back+up
        pGL.glScalef(1,-1,1); // reverse y-axis
        pGL.glTranslatef(-CAMERA_WIDTH/2,-CAMERA_HEIGHT/2,0); // origin at top left
    }
}; 
```

然后稍后在 onLoadScene （绘图发生的地方），我画了一堆我的图像，如下所示：

```
for (int n=0;n<=100;n++) {
    final int k = n;

    final Sprite line = new Sprite(0, 0,CAMERA_WIDTH,16f, [AndEngine texture holding road img]) {
    @Override
        protected void applyTranslation(GL10 pGL) {
            pGL.glTranslatef(this.mX, 120f, 15f*k); //16*k causes a sliver of a space between each segment
            pGL.glRotatef(90f, 1, 0, 0); //**MAY BE MY ISSUE**
        }           
    };
    scene.attachChild(line); //actually draws the image to the screen           
} 
```

除了一件事之外，这也很有效！它扭曲了我的图像中的狗屎。这些图像是简单的 png，都与 CAMERA_WIDTH 匹配，并且看起来都类似于： ![](../Images/282c078e4f62b33cc41bac1fb3b668eb.png)

当我在没有旋转线的情况下绘制它时，我得到了这个： ![没有旋转](../Images/e4feb956ea3e5e09989a9fde03236cc2.png)

其中有一条相当笔直的中线（这样我会很高兴），但是你可以看到道路的边缘基本上都面向它们应该面向的完全相反的方向。我想为什么不直接翻转它们呢？我以为我必须将它们围绕 x 轴旋转 180 度，但这只会使它们消失，相反，我发现 90 度有效（？？？）。无论如何，这就是我得到的：

![完成品](../Images/1b633766d7982df78a7d7a60a77f8a50.png)

是的。这就是我的问题所在 - 中间车道分隔线被扭曲为垃圾！标记道路边缘的线排列得非常好，但无论出于何种原因，它确实与那条中间线相混淆。我得到了 3d 背后的大部分数学知识，但我真的不知道该怎么做......这几乎就像图像被压缩了，因为它以如此锐利的角度观看，但我真的不知道我怎么能解决这个问题，而不是简单地把它变成一个自上而下的视图？:S

无论如何...欢迎任何想法或指导。抱歉，这是一篇冗长而复杂的帖子——当我真的不知道问题出在哪里时，这让我很难。

另外 - 值得注意的是，我几乎没有使用 openGL 或 3d 图形的经验，而且对深入了解它们的兴趣更小。我需要一个创可贴来解决这个问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:45:38.020

好的，所以我找到了解决方案！原来有一个叫做**Perspective Correct Texturing**的小问题，它基本上只是一个需要在 OpenGL 中打开的标志，以使其在使用透视图绘制图像时不会倾斜图像。

在我的相机初始化代码中，我将此行添加到方法 setFrustum(GL10 pGL)：

```
pGL.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST); 
```

这基本上解决了问题。线条和以往一样直 :) 我在另一个 stackoverflow 帖子上发现了这一点，这个答案实际上不是提问者想要的，但它恰好对我有用 :D 引导我找到答案的线程可以是在[这里](https://stackoverflow.com/questions/5424078/perspective-correction-of-texture-coordinates-in-3d)找到。

# r - 为因素的每个组合（/交互）创建单独的线性模型

> ID：13673881
> 
> 赞同：0
> 
> 时间：2012-12-02T21:10:10.980
> 
> 标签：r, plyr, linear-regression, interaction, categorical-data

我正在尝试对我的数据框进行简单的线性回归，如下所示。实际的数据集有更多的因子和更多的预测变量（x）都试图预测 y。

```
f1 f2 x y
x  a  1 3.3
x  a  2 3.2
x  a  3 3.04
x  b  1 4.5
x  b  2 4.9
x  b  3 8
y  a  1 20.1
y  a  2 20.3
y  a  3 21.9
y  b  1 101.2
y  b  2 201.8
y  b  3 332.8 
```

请注意，对于 f1 和 f2 的每种组合，趋势都会有所不同。我想要做的是为 f1 和 f2 的每个组合构建一个 lm 模型，将其存储在某种列表中，然后当我调用预测时，我应该能够使用适当的模型并根据 x 预测 y。我想我应该使用 ldply 创建一个模型列表，如下图

```
lm.model.list = ldply(x,.(f1,f2),function(x) {
 fit = lm(x$y ~ x$x)
 return(fit)
 } 
```

这给出了一个错误，

```
Error: attempt to apply non-function 
```

另外，假设我将所有内容都放入列表中，之后如何使用 predict ？

编辑：我意识到我可以将指标变量用于建模本身的因素，但我想避免这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:49:43.137

我想你想要的只是：

```
fit <- lm(y ~ x+ f1*f2, data=dfrm) 
```

这将对 f1 与 f2 的每个交互级别给出不同的预测。它只是一个模型，但可以`predict`使用 f1 和 f2 的任何所需组合来“查询”该函数的预测。您应该查看 ?formula 并花一些时间了解如何解释线性模型。

# mysql - MySQL CASE 更新多列

> ID：13673890
> 
> 赞同：27
> 
> 时间：2012-12-02T21:11:47.467
> 
> 标签：mysql, sql, case

我想使用 case 语句更新表中的多个列，但我找不到如何执行此操作（这甚至可能）。我想出了以下无效的参考查询：

```
UPDATE tablename SET
    CASE name
        WHEN 'name1' THEN col1=5,col2=''
        WHEN 'name2' THEN col1=3,col2='whatever'
        ELSE col1=0,col2=''
    END; 
```

有什么方法可以使用有效的 SQL 实现预期结果？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-02T21:16:18.250

```
UPDATE tablename
SET col1 = CASE WHEN name = 'name1' THEN 5 
                WHEN name = 'name2' THEN 3 
                ELSE 0 
           END
 , col2 = CASE WHEN name = 'name1' THEN '' 
               WHEN name = 'name2' THEN 'whatever' 
               ELSE '' 
          END
; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-02T21:16:56.860

我不知道有什么干净的方法来做你所要求的。等效的有效 SQL 更新将是：

```
UPDATE tablename SET
    col1 = CASE name WHEN 'name1' THEN 5 WHEN 'name2' THEN 3 ELSE 0 END,
    col2 = CASE name WHEN 'name1' THEN '' WHEN 'name2' THEN 'whatever' ELSE '' END; 
```

当然，这并不漂亮，需要`'name1'`多次重复相同的情况（例如），但我只是认为不可能有任何其他方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-25T23:29:59.387

如果`name`有一个唯一索引并且你的值已知存在于表中，你可以使用这个技巧：

```
INSERT INTO tablename (name, col1, col2)
VALUES ('name1', 5, '')
     , ('name2', 3, 'whatever')
ON DUPLICATE KEY UPDATE
       col1 = VALUES(col1)
     , col2 = VALUES(col2); 
```

如果有任何其他`NOT NULL`列没有默认值，则必须为它们添加虚拟值。只需将它们排除在外，`ON DUPLICATE KEY UPDATE`它们就会被忽略。

# regex - Notepad++ - 使用正则表达式将链接 html 添加到每行的开头/结尾

> ID：13673892
> 
> 赞同：0
> 
> 时间：2012-12-02T21:11:52.413
> 
> 标签：regex, notepad++

我对 RegEx 并不满意。我想要做的是在每一行（URL列表的）前面加上`<a href="`，然后在每一行结束`"></a>`

对于前置，我一直在使用正则表达式替换：^ with`<a href="`

这没问题，但是，有一些空白行会被`<a href="`添加到其中。仅当行中的字符超过 1 个时，是否可以替换每行的开头？

至于做线的尽头，我不知道。任何帮助将不胜感激——我在不同的文本文件中有大量的 url 可供编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T21:15:18.113

搜索并替换为`^(?=.)`and `(?<=.)$`。句点意味着“任何字符，不包括换行符”。与`^`and结合`$`，它将是一行的开始和结束，后面跟着一个字符（或在 的情况下在前面`$`）一个字符。此示例将其与正向前瞻和后向相结合，以确保您不会替换任何原始行，而是追加/前置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:21:02.520

您可以使用负前瞻（至少在升级到 Notepad++ 6 时）。

```
Find what: ^(?!$) 
```

对于行尾：

```
Find what: (?!^)$ 
```

以第一个为例，它在行的开头匹配（`^`），但前提`$`是在该位置不匹配 - 即如果它不是同时结束的行。

另一种方法在一个替换中进行两种替换（以及断言）：

```
Find what: ^.+$
Replacement: <a href="$0"></a> 
```

事实上，你甚至可以省略锚点，由于 的贪婪`+`，模式总是会消耗整行（但前提是至少有一个字符）：

```
Find what: .+
Replacement: <a href="$0"></a> 
```

请注意，其中任何一个都会将您的锚点包裹在仅包含空格和制表符的行周围。避免这种情况的最好方法是修改第三种模式：

```
Find what: ^[ \t]*\S[^\r\n]*
Replacement: <a href="$0"></a> 
```

从行首开始，我们使用所有空格和制表符（没有换行符）。然后我们需要一个非空格字符 ( `\S`)。然后我们尽可能多地使用非换行符。由于贪婪，不再需要`$`锚。

# r - 抑制 paste() 中的 NA

> ID：13673894
> 
> 赞同：51
> 
> 时间：2012-12-02T21:12:09.480
> 
> 标签：r, paste, na

## 关于赏金

当粘贴的字符串在同一位置包含's 时， [Ben Bolker](https://stackoverflow.com/users/190277/ben-bolker)的 -`paste2`解决方案会产生 a 。像这样，`""``NA`

```
> paste2(c("a","b", "c", NA), c("A","B", NA, NA))
[1] "a, A" "b, B" "c"    "" 
```

第四个元素是 an`""`而不是 an `NA`Like this,

```
[1] "a, A" "b, B" "c"  NA 
```

我为任何可以解决这个问题的人提供这个小赏金。

## 原始问题

我已经阅读了帮助页面`?paste`，但我不明白如何让 R ignore `NA`s。我执行以下操作，

```
foo <- LETTERS[1:4]
foo[4] <- NA
foo
[1] "A" "B" "C" NA
paste(1:4, foo, sep = ", ") 
```

并得到

```
[1] "1, A"  "2, B"  "3, C"  "4, NA" 
```

我想得到什么，

```
[1] "1, A" "2, B" "3, C" "4" 
```

我可以这样做，

```
sub(', NA$', '', paste(1:4, foo, sep = ", "))
[1] "1, A" "2, B" "3, C" "4" 
```

但这似乎是一个弯路。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-28T02:23:57.703

出于“true-NA”的目的：似乎最直接的方法是将返回的值修改`paste2`为`NA`当值是`""`

```
 paste3 <- function(...,sep=", ") {
     L <- list(...)
     L <- lapply(L,function(x) {x[is.na(x)] <- ""; x})
     ret <-gsub(paste0("(^",sep,"|",sep,"$)"),"",
                 gsub(paste0(sep,sep),sep,
                      do.call(paste,c(L,list(sep=sep)))))
     is.na(ret) <- ret==""
     ret
     }
 val<- paste3(c("a","b", "c", NA), c("A","B", NA, NA))
 val
#[1] "a, A" "b, B" "c"    NA 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2018-03-09T20:06:08.113

我知道这个问题已经有很多年了，但它仍然是`r paste na`. 我一直在寻找一个快速解决我认为是一个简单问题的方法，并且对答案的复杂性有些吃惊。我选择了不同的解决方案，并在此处发布以防其他人感兴趣。

```
bar <- apply(cbind(1:4, foo), 1, 
        function(x) paste(x[!is.na(x)], collapse = ", "))
bar
[1] "1, A" "2, B" "3, C" "4" 
```

如果不明显，这将适用于`NA`任何位置的任意数量的 s 向量。

恕我直言，与现有答案相比，它的优势在于易读性。这是一个单行的，总是很好，它不依赖于一堆正则表达式和 if/else 语句，这可能会让你的同事或未来的自己绊倒。[Erik Shitts 的回答](https://stackoverflow.com/a/13673985/3204472)大多具有这些优势，但假设只有两个向量，并且只有最后一个向量包含`NA`s。

我的解决方案不满足您编辑的要求，因为我的项目有相反的要求。[但是，您可以通过添加从42- 的答案](https://stackoverflow.com/a/15673180/3204472)借来的第二行来轻松解决此问题：

```
is.na(bar) <- bar == "" 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2019-12-23T14:12:35.547

我找到了该问题的`dplyr`/`tidyverse`解决方案，在我看来这相当优雅。

```
library(data.table)
library(tidyverse)
foo <- LETTERS[1:4] 
foo[4] <- NA 
dt <- data.table(foo, num = 1:4)
dt %>% unite(., col = "New.Col",  num, foo, na.rm=TRUE, sep = ",")
>    New.Col
  1:     1,A
  2:     2,B
  3:     3,C
  4:       4 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-12-02T22:52:35.183

跟进@ErikShilt 的回答和@agstudy 的评论的函数。它通过允许`sep`指定和处理*任何*元素（第一个、最后一个或中间）是`NA`. （如果一行中有多个值，或者在其他棘手的情况下，它可能会中断......）顺便说一下，请注意，这种情况在部分的`NA`第二段中准确描述，这表明至少 R 作者了解情况（尽管没有提供解决方案）。`Details``?paste`

```
paste2 <- function(...,sep=", ") {
    L <- list(...)
    L <- lapply(L,function(x) {x[is.na(x)] <- ""; x})
    gsub(paste0("(^",sep,"|",sep,"$)"),"",
                gsub(paste0(sep,sep),sep,
                     do.call(paste,c(L,list(sep=sep)))))
}
foo <- c(LETTERS[1:3],NA)
bar <- c(NA,2:4)
baz <- c("a",NA,"c","d")
paste2(foo,bar,baz)
# [1] "A, a"    "B, 2"    "C, 3, c" "4, d" 
```

这不处理@agstudy 的（1）合并可选`collapse`参数的建议；(2)`NA`通过添加`na.rm`参数使 -removal 成为可选（并将默认设置为`FALSE`向后`paste2`兼容`paste`）。如果想让这个更复杂（即删除多个顺序`NA`s）或更快，通过 Rcpp 用 C++ 编写它可能是有意义的（我不太了解 C++ 的字符串处理，但它可能不会太难——请参阅[将 Rcpp::CharacterVector 转换为 std::string](https://stackoverflow.com/questions/8421250/convert-rcppcharactervector-to-stdstring)并且[连接字符串在开始时无法按预期工作](https://stackoverflow.com/questions/4304662/c-concatenating-strings)......）

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-07-20T04:16:35.470

正如[Ben Bolker](https://stackoverflow.com/users/190277/ben-bolker)提到的，如果连续有多个 NA，上述方法可能会失败。我尝试了一种不同的方法，似乎可以克服这个问题。

```
paste4 <- function(x, sep = ", ") {
  x <- gsub("^\\s+|\\s+$", "", x) 
  ret <- paste(x[!is.na(x) & !(x %in% "")], collapse = sep)
  is.na(ret) <- ret == ""
  return(ret)
  } 
```

第二行去掉了连接文本和数字时引入的额外空格。上面的代码可用于使用命令连接数据帧的多个列（或行）`apply`，或者在需要时重新打包以首先将数据强制转换为数据帧。

```
EDIT 
```

经过几个小时的思考，我认为以下代码包含了上述建议，以允许指定 collapse 和 na.rm 选项。

```
paste5 <- function(..., sep = " ", collapse = NULL, na.rm = F) {
  if (na.rm == F)
    paste(..., sep = sep, collapse = collapse)
  else
    if (na.rm == T) {
      paste.na <- function(x, sep) {
        x <- gsub("^\\s+|\\s+$", "", x)
        ret <- paste(na.omit(x), collapse = sep)
        is.na(ret) <- ret == ""
        return(ret)
      }
      df <- data.frame(..., stringsAsFactors = F)
      ret <- apply(df, 1, FUN = function(x) paste.na(x, sep))

      if (is.null(collapse))
        ret
      else {
        paste.na(ret, sep = collapse)
      }
    }
} 
```

如上所述，如果需要，`na.omit(x)`可以替换`(x[!is.na(x) & !(x %in% "")`为也删除空字符串。请注意，使用带有 na.rm = T 的 collapse 返回一个没有任何“NA”的字符串，尽管可以通过将最后一行代码替换为`paste(ret, collapse = collapse)`.

```
nth <- paste0(1:12, c("st", "nd", "rd", rep("th", 9)))
mnth <- month.abb
nth[4:5] <- NA
mnth[5:6] <- NA

paste5(mnth, nth)
[1] "Jan 1st"  "Feb 2nd"  "Mar 3rd"  "Apr NA"   "NA NA"    "NA 6th"   "Jul 7th"  "Aug 8th"  "Sep 9th"  "Oct 10th" "Nov 11th" "Dec 12th"

paste5(mnth, nth, sep = ": ", collapse = "; ", na.rm = T)
[1] "Jan: 1st; Feb: 2nd; Mar: 3rd; Apr; 6th; Jul: 7th; Aug: 8th; Sep: 9th; Oct: 10th; Nov: 11th; Dec: 12th"

paste3(c("a","b", "c", NA), c("A","B", NA, NA), c(1,2,NA,4), c(5,6,7,8))
[1] "a, A, 1, 5" "b, B, 2, 6" "c, , 7"     "4, 8" 

paste5(c("a","b", "c", NA), c("A","B", NA, NA), c(1,2,NA,4), c(5,6,7,8), sep = ", ", na.rm = T)
[1] "a, A, 1, 5" "b, B, 2, 6" "c, 7"       "4, 8" 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-12-02T21:21:34.197

您可以使用`ifelse`向量化的 if-else 构造来确定值是否为 NA 并替换为空白。然后，如果后面没有任何其他字符串，您将使用 gsub 去除尾随的“，”。

```
gsub(", $", "", paste(1:4, ifelse(is.na(foo), "", foo), sep = ", ")) 
```

你的答案是正确的。没有更好的方法来做到这一点。此问题在详细信息部分的[粘贴文档](http://stat.ethz.ch/R-manual/R-devel/library/base/html/paste.html)中明确提及。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-01-14T00:20:44.803

如果使用 tidyverse 处理 df 或 tibbles，我会使用`mutate_all`or `mutate_at`with `str_replace_na`before`paste`或`unite`避免粘贴 NA。

```
library(tidyverse)
new_df <- df  %>%
mutate_all(~str_replace_na(., "")) %>%
mutate(combo_var = paste0(var1, var2, var3)) 
```

或者

```
new_df <- df  %>%
mutate_at(c('var1', 'var2'), ~str_replace_na(., "")) %>%
mutate(combo_var = paste0(var1, var2)) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-04-25T10:05:37.230

或使用 str_replace_all 粘贴后删除 NA

```
data$1 <- str_replace_all(data$1, "NA", "") 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-08-03T20:07:32.343

这可以在一行中实现。例如，

```
vec<-c("A","B",NA,"D","E")
res<-paste(vec[!is.na(vec)], collapse=',' )
print(res)
[1] "A,B,D,E" 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-09-13T15:08:31.167

乔的解决方案（[https://stackoverflow.com/a/49201394/3831096](https://stackoverflow.com/a/49201394/3831096)）的一个变体，当所有值都是 NA 时，它同时尊重`sep`和`collapse`返回 NA 是：

```
paste_missing <- function(..., sep=" ", collapse=NULL) {
  ret <-
    apply(
      X=cbind(...),
      MARGIN=1,
      FUN=function(x) {
        if (all(is.na(x))) {
          NA_character_
        } else {
          paste(x[!is.na(x)], collapse = sep)
        }
      }
    )
  if (!is.null(collapse)) {
    paste(ret, collapse=collapse)
  } else {
    ret
  }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-10-01T14:28:12.263

这是一个表现得更像粘贴的解决方案，并且比当前解决方案处理更多的边缘情况（空字符串、“NA”字符串、超过 2 个参数、使用折叠参数......）。

```
paste2 <- function(..., sep = " ", collapse = NULL, na.rm = FALSE){
  # in default case, use paste 
  if(!na.rm) return(paste(..., sep = sep, collapse = collapse))
  # cbind is convenient to recycle, it warns though so use suppressWarnings
  dots <- suppressWarnings(cbind(...))
  res <- apply(dots, 1, function(...) {
    if(all(is.na(c(...)))) return(NA)
    do.call(paste, as.list(c(na.omit(c(...)), sep = sep)))
  })
  if(is.null(collapse)) res else
   paste(na.omit(res), collapse = collapse)
}

# behaves like `paste()` by default
paste2(c("a","b", "c", NA), c("A","B", NA, NA))
#> [1] "a A"   "b B"   "c NA"  "NA NA"

# trigger desired behavior by setting `na.rm = TRUE` and `sep = ", "`
paste2(c("a","b", "c", NA), c("A","B", NA, NA), sep = ",", na.rm = TRUE)
#> [1] "a,A" "b,B" "c"   NA

# handles hedge cases
paste2(c("a","b", "c", NA, "", "",   ""),
       c("a","b", "c", NA, "", "", "NA"),
       c("A","B",  NA, NA, NA, "",   ""), 
       sep = ",", na.rm = TRUE)
#> [1] "a,a,A" "b,b,B" "c,c"   NA      ","     ",,"    ",NA," 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2019 年 10 月 1 日创建)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-02T21:20:48.177

更新@Erik Shilts 解决方案以去掉最后一个逗号：

```
x = gsub(",$", "", paste(1:4, ifelse(is.na(foo), "", foo), sep = ",")) 
```

然后为了摆脱尾随的最后一次`","` ，只需再次重复：

```
x <- gsub(",$", "", x) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-06-30T19:28:55.140

这对我有用

```
library(stringr)

foo <- LETTERS[1:4]
foo[4] <- NA
foo
# [1] "A" "B" "C" NA 

if_else(!is.na(foo),
    str_c(1:4, str_replace_na(foo, ""), sep = ", "),
    str_c(1:4, str_replace_na(foo, ""), sep = "")
    )
# [1] "1, A" "2, B" "3, C" "4" 
```

# r - R时间序列数据，每天只有工作日

> ID：13673895
> 
> 赞同：4
> 
> 时间：2012-12-02T21:12:19.107
> 
> 标签：r, date, sequence

我正在使用以下代码：

```
dates<-seq(as.Date("1991/1/4"),as.Date("2010/3/1"),"days") 
```

但是，我想只有工作日，怎么办？（假设 1991/1/4 是星期一，我想排除：1991/6/4 和 1991/7/4。每周都是这样。）

感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T21:35:44.013

这对你有用吗？（注意，它需要安装 timeDate 包）

```
# install.packages('timeDate')
require(timeDate)

# A ’timeDate’ Sequence
tS <- timeSequence(as.Date("1991/1/4"), as.Date("2010/3/1"))
tS

# Subset weekdays
tW <- tS[isWeekday(tS)]; tW
dayOfWeek(tW) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-02T21:41:33.523

您输入的日期不正确。为了使用 1991/1/4 是星期一所暗示的 YYYY/DD/MM 输入模式，您需要在 as.Date 中有一个格式字符串。

因此，假设您要排除*周末*的完整解决方案是：

```
 X <- seq( as.Date("1991/1/4", format="%Y/%m/%d"), as.Date("2010/3/1", format="%Y/%m/%d"),"days")
weekdays.X <- X[ ! weekdays(X) %in% c("Saturday", "Sunday") ]  
        # negation easier since only two cases in exclusion
        # probably do not want to print that vector to screen.
str(weekdays.X) 
```

关于您的评论，我无法复制。我得到：

```
> table(weekdays(weekdays.X) )

   Friday    Monday  Thursday   Tuesday Wednesday 
     1000      1000       999       999       999 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-08T19:50:59.457

我在查找工作日功能时遇到了这个问题，并且由于 OP 要求“工作日”而不是“工作日”，并且`timeDate`还具有该`isBizday`功能，因此该答案使用了该功能。

```
# A timeDate Sequence
date.sequence <- timeSequence(as.Date("1991-12-15"), as.Date("1992-01-15"));  # a short example period with three London holidays
date.sequence;

# holidays in the period
years.included <- unique( as.integer( format( x=date.sequence, format="%Y" ) ) );
holidays <- holidayLONDON(years.included)  #  (locale was not specified by OP in question nor in profile, so this assumes for example: holidayLONDON; also supported by timeDate are: holidayNERC, holidayNYSE, holidayTSX & holidayZURICH)

# Subset business days
business.days <- date.sequence[isBizday(date.sequence, holidays)]; 
business.days 
```

# java - 在 jTabbedPane 中向 jTextarea 添加文本

> ID：13673899
> 
> 赞同：-1
> 
> 时间：2012-12-02T21:13:02.913
> 
> 标签：java, swing, user-interface, jtextarea, jtabbedpane

我有一个桌面程序，我在 netbeans 中构建了 3 个选项卡。三个选项卡下方有 1 个文本输入字段。每个选项卡都有一个 jtextarea 组件。当我在文本输入字段中输入并按回车键时，我希望它将该文本添加到当前选定选项卡包含的文本区域中。

我一直在玩

```
jTabbedPane1.getSelectedIndex()

jTabbedPane1.getTabComponentAt() 
```

我如何使用索引将其引用回与该选项卡关联的文本区域？

大java菜鸟在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T21:31:49.933

最简单的方法是使用`JTextArea`与它们出现在`JTabbedPane`.

```
JTextArea[] textArea = new JTextArea[3];
// assign textAreas... 
```

然后，您可以使用适当的索引设置文本：

```
int index = jTabbedPane1.getSelectedIndex();
textArea[index].setText(myField.getText()); 
```

# html - CSS 将鼠标悬停在框上以更改颜色和链接

> ID：13673900
> 
> 赞同：0
> 
> 时间：2012-12-02T21:13:07.937
> 
> 标签：html, css, hover

嘿伙计们在玩 CSS。我做了一个盒子。基本上我想弄清楚的是，当人们将鼠标悬停在盒子上时，它会如何改变颜色，然后将它们链接到新标签中的另一个页面。谁能帮我？

代码到此为止。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="eng" lang="eng">
<head>

<style>
    .border
    {
        height: 150px; 
        width:  150px; 
        border: 1px solid black;  
        text-align:center; 
    }

</style>

</head>
<body>

<div class="border">
    <a href="http://www.1.com/"></a> 
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:15:55.973

变色部分使用 CSS`:hover`伪类

```
.border:hover{
   background: green;
} 
```

用于`target="_blank"`链接标签中的链接打开部分

```
<a href="http://www.1.com/" target="_blank"></a> 
```

这将根据用户的浏览器设置（您无法影响）在新选项卡或窗口中打开链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:17:30.923

不能强制在特定或新选项卡中打开链接。只能控制在同一窗口、同一框架、自定义框架、新框架或新窗口中打开链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T21:20:57.883

您可以将此悬停代码添加到样式中

```
.border:hover
{
    background-color: red;
} 
```

并将链接包装在 div 周围并使用 target="_blank"

```
<a href="http://www.1.com/" target="_blank">
<div class="border">

</div>
</a> 
```

# java - 如何在 JDBC 中创建断言？

> ID：13673901
> 
> 赞同：0
> 
> 时间：2012-12-02T21:13:17.997
> 
> 标签：java, sql, database, postgresql

我正在使用`Postgresql`并且`JDBC`我试图弄清楚如何创建一个断言。

我目前有两个关系表`A(url varchar(30))`和表`B(url varchar(30))`，我想编写一个断言，以便如果表 A 中已经存在该元素，则无法插入表 B。如何在 JDBC 中执行此操作？如果无法使用断言，我将如何让类似的事情发生？

编辑：好的，所以我读到不可能使用 postgresql 创建断言；因此，我现在的问题是，我将如何使用 Postgresql 和 JDBC 的约束来做类似的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:39:27.747

我不确定没有错字，也许'JDBM'应该是'JDBC'？

对于 MapDB（又名 JDBM4），计划实施地图修改侦听器，它可以处理类似的情况。JDBM3 中没有这样的功能。

现在我建议不要使用断言并在你的代码中检查它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T04:16:22.570

你想要的实际上是一个负外键约束，它不被直接支持。您可以使用测试条件的 PL/PgSQL`BEFORE INSERT OR UPDATE`触发器函数来实现此约束。

请参阅Pg 文档中的[PL/PgSQL 触发器过程](http://www.postgresql.org/docs/current/static/plpgsql-trigger.html)。

您可能需要使用`SERIALIZABLE`隔离模式来处理一个事务插入`B`而另一个事务插入`A`. 您将需要`serializable`9.1/9.2 中改进的隔离支持。

# php - BING TRANSLATE API 不再工作 2012

> ID：13673904
> 
> 赞同：0
> 
> 时间：2012-12-02T21:13:45.530
> 
> 标签：php, bing, translate

几个月前我一直在使用 BING TRANSLATE API，一切都很完美。

现在我需要打开旧文件并翻译一些东西，但它似乎不再工作了。

试图在 BING 网站上进行一些搜索，但它非常混乱。我也在谷歌上搜索过，但有很多过时的文章，我不知道该相信哪一个。

这是我以前完美运行的代码。

我今天注册了一个新的 API 密钥，但我认为新的 API 密钥是 base64_encode 格式。我尝试解码它，它仍然无法正常工作。当然我试过不解码。

任何人都可以提供一些指导吗？

错误：

> {"SearchResponse":{"Version":"2.2","Query":{"SearchTerms":"fish"},"Errors":[{"Code":1002,"Message":"参数值无效。 ","Parameter":"SearchRequest.AppId","Value":"ccTq4vytm9Kh/MC8ux57OSvlU9 lqDkeiJkXM3L4jVk=","HelpUrl":"http://msdn.microsoft.com/en-us/library/dd251042.aspx"} ]}}

我的代码

```
 define('BING_API','KEY_HERE_AAAAAAAAA');
function loadData($url, $ref = false) {
            $chImg = curl_init($url);
            curl_setopt($chImg, CURLOPT_RETURNTRANSFER, true);
            curl_setopt($chImg, CURLOPT_USERAGENT, "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0) Gecko/20100101 Firefox/4.0");
            if ($ref) {
                curl_setopt($chImg, CURLOPT_REFERER, $ref);
            }
            $curl_scraped_data = curl_exec($chImg);
            curl_close($chImg);
            return $curl_scraped_data;
        }

        function translate($text, $from = 'en', $to = 'fr') {
            $data = loadData('http://api.bing.net/json.aspx?AppId=' . BING_API . '&Sources=Translation&Version=2.2&Translation.SourceLanguage=' . $from . '&Translation.TargetLanguage=' . $to . '&Query=' . urlencode($text));
            $translated = json_decode($data);
            if (sizeof($translated) > 0) {
                if (isset($translated->SearchResponse->Translation->Results[0]->TranslatedTerm)) {
                    return $translated->SearchResponse->Translation->Results[0]->TranslatedTerm;
                } else {
                    return false;
                }
            } else {
                return false;
            }
        }
    echo translate('fish','en','fr'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:09:56.120

AFAIK，Bing Translator API 在某个时候停止了，尽管我现在找不到新闻稿。它在幕后使用 Microsoft Translator API。

[Microsoft Translator API 现在通过 Azure Marketplace 提供](http://datamarket.azure.com/dataset/bing/microsofttranslator)。提供有限的免费访问。

示例/代码可以在[这里](http://blogs.msdn.com/b/translation/p/gettingstarted1.aspx)找到。

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:02:15.563

API 仍然可用——它只是移到了 Windows Azure Marketplace。

每月提供 200 万个字符的免费选项。

此处的 PHP 示例：http: [//blogs.msdn.com/b/translation/p/phptranslator.aspx](http://blogs.msdn.com/b/translation/p/phptranslator.aspx)

您可以在此处查看如何获取它的凭据：http: [//blogs.msdn.com/b/translation/p/gettingstarted1.aspx](http://blogs.msdn.com/b/translation/p/gettingstarted1.aspx)

# ruby-on-rails - RoR 将 DataTables 部署到 Heroku

> ID：13673906
> 
> 赞同：0
> 
> 时间：2012-12-02T21:13:52.490
> 
> 标签：ruby-on-rails, ruby, heroku, twitter-bootstrap, datatables

网站在本地工作。发布到 heroku 时，日志中出现错误：

```
ActionView::Template::Error (couldn't find file 'dataTables/jquery.dataTables.bootstrap' 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:57:52.660

弄清楚了。本质上，我在资产组中拥有宝石。一旦我重新定位它，对 heroku 的推动就奏效了。

# java - 按字母顺序对链表进行排序时出错

> ID：13673908
> 
> 赞同：-1
> 
> 时间：2012-12-02T21:14:12.443
> 
> 标签：java, sorting

我有`LinkedList`字符串，我在其中插入了很多单词。我想按字母顺序对列表进行排序。

我在互联网上搜索并找到了，`Collections.sort(list);` 但是当我尝试它时，我得到了一个错误。这是代码：

```
import java.text.Collator;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

public class Test {
    public static void main(String[] args) {

     LinkedList<String> s=new LinkedList<String>();

        s.insert("cat");
        s.insert("apple");
        s.insert("desk");
        s.insert("bed");
        s.insert("zebra");
        s.insert("floor");

        Collections.sort(s);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:40:49.313

您还没有导入 LinkedList 并且 LinkedList 没有插入方法。尝试这个：

```
import java.util.Collections;
import java.util.LinkedList;

public class Test {
    public static void main(String[] args) {

     LinkedList<String> s=new LinkedList<String>();

        s.add("cat");
        s.add("apple");
        s.add("desk");
        s.add("bed");
        s.add("zebra");
        s.add("floor");

        Collections.sort(s);
    }
} 
```

# c - 释放静态字符串的动态数组

> ID：13673913
> 
> 赞同：0
> 
> 时间：2012-12-02T21:15:07.307
> 
> 标签：c, free, cstring, dynamic-arrays

所以我遇到了一个问题，我有一个 char*s（声明为）char** 数组，其中该数组是动态分配的（通过 calloc），但其中的 char*s 是静态的。

这对我来说很好，直到我尝试释放数组（在调整大小期间），此时我得到

```
*** glibc detected *** ./hash_table_test: free(): invalid next size (normal): 0x0891f028 *** 
```

我尝试将数组中的所有 ptrs 设置为 NULL，但随后出现错误

```
*** glibc detected *** ./hash_table_test: double free or corruption (!prev): 0x0815b028 *** 
```

以下是相关代码：

表结构：

```
struct string_hash_table {

//Array of c-strings
char** table;
//number of elements in the table
int num_elements;
//size of table
int table_size;

//Primes
int *primes;
//Current position in primes array
int primes_index;
//the size of the primes array
int primes_size;
};
//TypeDefs--------------------------------
typedef struct string_hash_table HashTable; 
```

Rehash 函数（错误来源）

```
void rehash_string(HashTable *table) {

int prev_size = table->table_size;
int i;

table->table_size = table->table_size * 2;

//create new array
char** new_table = calloc(table->table_size, sizeof(char*));
printf("new table created\n");
int index;
printf("before loop prev_size is %d\n", prev_size);
//add all elements to new_table
for (i = 0; i < prev_size; i++) {
    printf("on %d\n", i);
    index = find_spot_string(new_table, table->table_size, table->table[i]);
    printf("after find_spot_string\n");
    if (index != -1) {
        table->table[index] = table->table[i];
    }
}

//free and swap
printf("before free\n");
empty_string_array(table->table, table->table_size);
free(table->table);
table->table = new_table; 
```

HashTable 结构的初始化：

```
//Takes a HashTable and initializes it
void init_hash_table(HashTable *table) {

table->primes_index = 0;
table->num_elements = 0;
table->primes_size = 297;
table->primes = prime_list;

table->table_size = table->primes[0];
table->table = calloc(table->table_size, sizeof(char*));
} 
```

静态字符串的声明：

```
 char* temp = "hello";
add_hash_table_string(table, temp);

temp = "luck";
add_hash_table_string(table, temp);

temp = "stuck";
add_hash_table_string(table, temp);

temp = "buck";
add_hash_table_string(table, temp);

temp = "muck";
add_hash_table_string(table, temp);

temp = "much";
add_hash_table_string(table, temp); 
```

目前我只是在这里测试我的代码，除了上面的重新散列函数外，一切正常。有人有想法么？还是我应该遵循的线索？

编辑：为 add_hash_table_string 添加代码

```
void add_hash_table_string(HashTable *table, char* element) {

    //if non-null element, and element is not in the HashTable
    if (element != NULL && contains_hash_table_string(table, element) == 1) {

        //if the table is full
        if (table->table_size / 2 < table->num_elements) {

            rehash_string(table);
        }

        int index = find_spot_string(table->table, table->table_size, element);

        table->table[index] = element;
        table->num_elements++;
    }
} 
```

编辑2：

忘记准确了，错误发生在 rehash 函数中的 free(table->table) 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:21:10.780

一个可能的问题是，您使用新大小释放旧表

```
empty_string_array(table->table, table->table_size); 
```

另一个可能是

```
index = find_spot_string(new_table, table->table_size, table->table[i]);
printf("after find_spot_string\n");
if (index != -1) {
    table->table[index] = table->table[i]; 
```

如果这应该将条目复制到`new_table`，则它不是 AFAICS。当`index`大于时`prev_size`，你写超出结尾`table`。

# java - 如何将 ArrayList 限制为 15？

> ID：13673914
> 
> 赞同：0
> 
> 时间：2012-12-02T21:15:09.593
> 
> 标签：java, android, arraylist

我有 2 个数组列表。我遍历list1并将与seat_no匹配的数据存储到list2的索引中。

list1 包含：

```
|seat_no | id     |
===================
| 1      | 001    |
| 2      | 002    |
| 3      | 003    | 
| 4      | 004    |
| 7      | 005    |
| 10     | 006    |
| 11     | 007    | 
```

list2 包含：

```
|index   | id     | seat_no |
=============================
| 1      | 001    | 1       |
| 2      | 002    | 2       |
| 3      | 003    | 3       |
| 4      | 004    | 4       |
| 5      |"blank" |"blank"  |
| 6      |"blank" |"blank"  |
| 7      | 005    | 7       |
| 8      |"blank" |"blank"  |
| 9      |"blank" |"blank"  |
| 10     | 006    | 10      |
| 11     | 007    | 11      | 
```

list2 应包含的内容：其中 list2 的限制必须为 15

```
|index   | id     | seat_no |
=============================
| 1      | 001    | 1       |
| 2      | 002    | 2       |
| 3      | 003    | 3       |
| 4      | 004    | 4       |
| 5      |"blank" |"blank"  |
| 6      |"blank" |"blank"  |
| 7      | 005    | 7       |
| 8      |"blank" |"blank"  |
| 9      |"blank" |"blank"  |
| 10     | 006    | 10      |
| 11     | 007    | 11      |
| 12     |"blank" |"blank"  |
| 13     |"blank" |"blank"  |
| 14     |"blank" |"blank"  |
| 15     |"blank" |"blank"  | 
```

到目前为止，这是我的代码...请帮助我..我打算使用数组，但我不知道它现在是否适用于我的代码..

ViewGridObject.java

```
public class ViewGridObject 
{
    public String stud_id, seat_no;

    public ViewGridObject(String stud_id, String seat_no)
    {
        this.stud_id = stud_id;
        this.seat_no = seat_no;
    }
} 
```

main.java

```
ArrayList<HashMap<String, String>> to_take = new ArrayList<HashMap<String, String>>();

        try 
        {
            JSONObject jArray = new JSONObject(result);

            JSONArray stud_info = jArray.getJSONArray("stud_info");

            ca_list = new ArrayList<ViewGridObject>();

            for (int i = 0; i < stud_info.length(); i++) 
            {
                HashMap<String, String> map = new HashMap<String, String>();
                JSONObject e = stud_info.getJSONObject(i);

                map.put("id", String.valueOf(i));
                map.put("stud_id", e.getString("student_id"));
                map.put("seat_no", e.getString("seat_no"));
                to_take.add(map);

                ca_list.add(new ViewGridObject(e.getString("student_id"), e.getString("seat_no")));

            }

            List<ViewGridObject> list2 = new ArrayList<ViewGridObject>();
            int i1 = 0;
            for (ViewGridObject o : ca_list) {
                for (i1++; !o.seat_no.equals(i1 + ""); i1++) {
                    list2.add(new ViewGridObject(null, 0, i1 + ""));
                }
                list2.add(o);
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T21:21:30.577

只有在添加之前明确检查，
或者通过创建一个集成了 ArrayLIst 的新 MyArrayList 时才能限制这一点，但在 add() 中，当 size 大于 15 时不添加；在这种情况下你可以返回 false 。

我建议使用“在添加之前检查”d 方法：

```
int limit = 15;

if (list.size() < limit) {
  list.add(value);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T13:36:03.363

```
List<ViewGridObject> list2 = new ArrayList<ViewGridObject>();

for(int i=0;i<50;i++) {
    try {
            list2.add(list1.get(i));
    } catch(Exception rr) {
            list2.add(new ViewGridObject("blank","blank");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T21:22:44.313

Arraylist 在实现上是无限的。几个选项；

1.  使用数组并使用 Arrays.asList 执行 arraylist 函数
2.  实现 AbstractList 并实现 add 方法，如

    如果（大小（）> getBoundedSize（））

如果您需要更清晰的示例，请告诉我

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-08T11:41:14.310

使用 Java 8，您可以将 ArrayList 转换为 Stream 并对其进行限制：

```
List<Object> largerArray = Arrays.asList(members);
largerArray.stream()
    .limit(3)
    .forEach(member -> {
        // ...
    }); 
```

# python - 我需要从 Python 中的元组打印/返回多个元素

> ID：13673916
> 
> 赞同：2
> 
> 时间：2012-12-02T21:15:21.680
> 
> 标签：python

我有一个字符串和元组的列表。元组看起来像这样（数字，元素）：

```
s = ["element1", (3, "element2"), (2, "element3")] 
```

我需要像这样打印元组：

```
element1
element2
element2
element2
element3
element3 
```

也就是说，我需要 number*element 打印。我想出的最好的是：

```
s = ["element1", (3, "element2"), (2, "element3")]

def bb (x):
    for n in x:
        if isinstance (n, str):
           print (n)
        if isinstance (n, tuple):
            print (n[1]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T21:21:13.050

理想情况下，更改您的输入以便获得`[(1, "element1,"), ...]`，但如果这不可能：

```
import types
import itertools

s = ["element1", (3, "element2"), (2, "element3")]

print(list(itertools.chain.from_iterable((e, ) if isinstance(e, str) else itertools.repeat(e[1], e[0]) for e in s))) 
```

给我们：

```
['element1', 'element2', 'element2', 'element2', 'element3', 'element3'] 
```

我们在这里所做的是将您的元素转换为元组，如果是字符串（这样它们就不会被迭代成字符），并`itertools.repeat()`用于创建一个迭代器，如果它们是元组，则重复给定的次数。然后，我们使用`itertools.chain.from_iterable()`将这个集合集合扁平化为一个迭代器，然后将其转换为一个列表。

请注意，在 2.x 中，您需要`isinstance(e, basestring)`.

编辑：或者：

```
args = ((e, 1) if isinstance(e, str) else (e[1], e[0]) for e in s)
itertools.chain.from_iterable(itertools.starmap(itertools.repeat, args)) 
```

这是同样的事情，但在我看来可能更整洁一些。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-02T21:17:14.657

这是一个单行：

```
s = ["element1", (3, "element2"), (2, "element3")]
result = sum(([x] if type(x) != tuple else x[0]*[x[1]] for x in s), []) 
```

或扩展您现有的代码：

```
def bb(x):
    for n in x:
        if isinstance(n, str):
            print(n)
        elif isinstance(n, tuple):
            count, value = n
            for i in range(count):
                print(value) 
```

如果要返回这些值，可能需要使用生成器：

```
def bb_gen(x):
    for n in x:
        if isinstance(n, str):
            yield n
        elif isinstance(n, tuple):
            count, value = n
            for i in range(count):
                yield value

for value in bb_gen(s):
    print value 
```

# upgrade - Magento 1.4.1.1 -> 1.7 升级：外键约束失败

> ID：13673922
> 
> 赞同：2
> 
> 时间：2012-12-02T21:16:00.000
> 
> 标签：upgrade, magento-1.4, magento

似乎更新magento真的很难:)

我有 magento 1.4.1.1，我想将它更新到最新的 magento 1.4.2。

我遵循本指南： [如何将 magento 1.4 1.1 升级到 1.7.0.2](https://stackoverflow.com/questions/11662347/how-to-upgrade-magento-1-4-1-1-to-1-7-0-2)

我当然会做什么： - 禁用和清除缓存 - 清除会话 - 更新前禁用所有扩展 - 备份备份备份：D

当我从 1.4.1.1 更新到 1.4.2 时，我触发主页以进行 mysql 更改。这是问题开始的地方。

我收到此错误：

```
a:5:{i:0;s:435:"Error in file: "/var/www/vhosts/dev/docs/app/code/core/Mage/Sales/sql/sales_setup/mysql4-upgrade-1.4.0.20-1.4.0.21.php" - SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`dev`.<result 2 when explaining filename '#sql-20eb_3d66'>, CONSTRAINT `FK_PRODUCT_ORDERED_AGGREGATED_MONTHLY_PRODUCT_ID` FOREIGN KEY (`product_id`) REFERENCES `catalog_product_entity` (`entit)";i:1;s:974:"#0 /var/www/vhosts/dev/docs/app/code/core/Mage/Core/Model/Resource/Setup.php(390): Mage::exception('Mage_Core', 'Error in file: ...') 
```

我还尝试直接升级到 1.7，这会导致许多其他类似的错误。我当然可以注释掉所有导致问题的部分，但我认为这不明智:)

你知道我能做些什么来避免/修复这些错误吗？

非常感谢 ：）

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T21:40:34.787

是的，升级 Magento 几乎从来都不是一帆风顺的。

要诊断此特定问题，您必须比较类型`sales_bestsellers_aggregated_monthly`。`product_id`和`catalog_product_entity`。`entity_id`字段。

您可以在我专门针对此主题的文章中找到有关导致此问题的原因以及解决方案的更多详细信息。

In Chinese：[第 3 方扩展如何破坏您的 Magento 升级](http://www.openstream.ch/developer-blog/how-3rd-party-extensions-can-ruin-your-magento-upgrade/)

Auf Deutsch: [Wie Externe Extensions Dein Magento-Upgrade Ruinieren Können](http://de.magentoappfactory.com/blog/2012/08/27/wie-externe-extensions-dein-magento-upgrade-ruinieren-konnen-2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T18:43:01.533

我有类似的问题：

```
app\code\core\Mage\Sales\sql\sales_setup\mysql4-upgrade-1.4.0.20-1.4.0.21.php" - SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails .. 
```

但我的情况是，此键出现错误：

```
FK_PRODUCT_ORDERED_AGGREGATED_DAILY_PRODUCT_ID 
```

解决方案非常简单，我只是从表中删除条目：
sales_bestsellers_aggregated_daily
sales_bestsellers_aggregated_monthly
sales_bestsellers_aggregated_yearly
其中product_id 与catalog_product_entity 表中的entity_id 不对应。

此查询可帮助您检测无用的 product_id：

```
SELECT product_id FROM sales_bestsellers_aggregated_yearly where product_id not in  
(select entity_id from catalog_product_entity) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T12:43:37.693

如果您已经对数据库进行了备份并且可以重新启动该过程，我建议您采用另一种方式，但在这里您必须迁移到 1.5 而不是 1.6 而不是 1.7：

首先，您必须从托管服务提供商处获得 SSH 访问权限，并通过 SSH 协议连接到您的服务器。然后，

1 – 将 lib/pear 文件夹的权限更改为可写（递归）：chmod -R 777 lib/PEAR

2 – 执行此命令准备 Magento 进行升级：./pear mage-setup

执行命令后您很可能会看到以下结果： 频道“connect.magentocommerce.com/core”已初始化 从 Magento 1.4.1.x 升级到 Magento 1.4.2.0 即使您将 Magento 商店升级到 1.5，此步骤也是必要的或 1.6 版本。

3 – 执行 Magento 升级命令：./pear upgrade -f magento-core/Mage_All_Latest-stable 命令的输出将显示升级了哪些核心包：升级正常：channel://connect.magentocommerce.com/core/Interface_Adminhtml_Default- 1.4.2.0

4 – 这部分升级完成后，输入以下命令：chmod 550 ./mage ./mage mage-setup 。命令执行后会看到这样的结果： 成功添加：connect20.magentocommerce.com/community 表示Magento connect 2.0 频道已成功添加到频道列表中。

5 – 接下来，输入这个命令：./mage sync 这里你应该看到:: ... 成功添加：community/Mage_Locale_en_US-1.4.2.0

添加成功：community/Interface_Install_Default-1.4.2.0

成功添加：community/Phoenix_Moneybookers-1.2.3

成功添加：community/Mage_Downloader-1.5.0.0

添加成功：community/Lib_Google_Checkout-1.4.2.0

升级到 Magento 1.4.2.0 已完成，现在您可以继续升级到 Magento 1.5.1.0 或 1.6.0.0。在继续进行 Magento 升级的这一部分之前，查看 Magento 升级脚本将升级您的商店的版本非常重要。输入这个命令来检查这个：./mage list-upgrades 如果你会看到这个结果：

社区更新：

Mage_All_Latest：1.4.2.1 => 1.6.0.0

Lib_Js_Mage：1.4.2.0 => 1.6.0.0

Lib_Varien：1.4.2.0 => 1.6.0.0

Lib_Phpseclib：1.4.2.0 => 1.5.0.0

这意味着您的 Magento 将升级到 1.6.0.0 版本。如果这不是您需要的，您可以将升级通道更改为“稳定”并将您的 Magento 升级到版本 1.5.1.0。

6 – 输入此命令将升级通道更改为稳定：./mage config-set preferred_state stable 在此之后，“./mage list-upgrades”命令将显示以下结果：社区更新：

Mage_All_Latest：1.4.2.1 => 1.5.1.0.1

Lib_Js_Mage：1.4.2.0 => 1.5.1.0

Lib_Varien：1.4.2.0 => 1.5.1.0

Lib_Phpseclib：1.4.2.0 => 1.5.0.0

Mage_Core_Adminhtml：1.4.2.0 => 1.5.1.0

Mage_Core_Modules：1.4.2.0 => 1.5.1.0

7 – 选择频道后，您可以使用以下命令将 Magento 升级到 1.5.1.0（或 Magento 1.6.0.0）：./mage upgrade-all –force

您将在屏幕上看到升级的软件包：

… 升级包：community/Mage_Locale_en_US 1.6.0.0

升级包：community/Lib_Mage 1.6.0.0

升级包：community/Lib_ZF 1.11.1.0

升级包：community/Lib_Js_Prototype 1.7.0.0.1

升级包：community/Lib_ZF_Locale 1.11.1.0

现在升级完成了。如果一切都正确升级，您将在浏览器中看到升级的商店。在管理面板中，您可以检查商店的版本。

如果您已经安装了全新的 Magento 版本，并且您不会进行手动数据传输，因为这需要几天甚至几周的时间。您可以做些什么来将数据库直接从 1.4 移动到新的 Magento 1.7，您可以使用自动化服务。

# windows-phone-7 - 从代码分配绑定数据，而不是 xaml

> ID：13673924
> 
> 赞同：1
> 
> 时间：2012-12-02T21:16:08.403
> 
> 标签：windows-phone-7, binding, user-controls

我是 WP7 Silverlight 的新手，有一个简单的问题。

我有一个带有 DataTemplate 的 ListBox，我可以使用 Text="{Binding JobLocation}" 绑定和显示数据，效果很好。

我还有一个 UserControl，它也可以使用 Text="{Binding JobLocation}" 绑定到 JobLocation！

我的问题是，我需要在显示 JobLocation 之前对它做一些工作，所以我想将它保存到一个变量中，例如：-

```
Dim jobLocation as string ="{Binding JobLocation}"
jobLocation = // do the work on it
txtJobLocation.Text = jobLocation 
```

这将在 UserControl 代码中完成。

请帮助，真的坚持这个！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:31:12.220

解决了！

用户控件从其父控件继承数据上下文，因此只需要做

```
dim job as Database.Model.Job = DataContext

dim JobLocation as string = job.JobLocation 
```

希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:33:26.570

与其尝试从控件中获取绑定值、对其进行操作并将新值应用回控件，不如操作底层对象中的值（并让绑定框架更新控件）。如果您不希望底层对象发生更改，您可以在 ValueConverter 中执行您想要执行的工作并将其应用于您的绑定。

ValueConverter 选项仅在您所做的工作是微不足道的且具有演示性质的情况下才真正合适。否则，最好设置一个单独的对象用于绑定，并在那里完成工作。对于单独的对象，您需要考虑在源数据对象更改时更新它的机制（如果合适/需要）。

# ruby-on-rails - 链接模型的新实例，传递“调用者”ID

> ID：13673930
> 
> 赞同：0
> 
> 时间：2012-12-02T21:16:40.560
> 
> 标签：ruby-on-rails, rails-routing

我正在创建一个简单的库存应用程序，有一个列出“项目”的视图。它有包含这些行的表：

```
<tr>
<td><%= item.title %></td>
<td><%= item.desc %></td>
<td><%= item.value %></td>
<td><%= item.room.name %></td>
<td><%= item.user.username %></td>
<td>
  <%= link_to 'View', item %>
  <%= link_to 'Edit', edit_item_path(item) %>
  <%= link_to 'Delete', item, method: :delete, data: { confirm: 'Are you sure?' } %>
  <%= link_to 'Add Comment', !?????! %>
</td>
/tr> 
```

我设置了一个用于“评论”的链接模型，但不知道`'item_id'`在创建新模型时如何将其传递给它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:00:36.190

[URL 助手](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html)实际上接受对象来为关联创建路由。意思是，假设您在项目中有一条用于评论的嵌套路由，

```
resources :items do
  resources :comments
end 
```

你可以[`link_to`](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)的`new_item_comments_path(item)`。

该方法`new_item_comments_path(item)`基于`new_item_comments`路由创建一个字符串 URL，您可以输入该 URL`link_to`以创建一个 HTML`<a>`标记。

更清楚地说，在您看来，您将拥有：

```
 <%= link_to 'View', item %>
  <%= link_to 'Edit', edit_item_path(item) %>
  <%= link_to 'Delete', item, method: :delete, data: { confirm: 'Are you sure?' } %>
  <%= link_to 'Add Comment', new_item_comments_path(item) #-> (instead of ???) %> 
```

在这种情况下，`item`您传递的是对当前项目的引用，它允许 URL 助手从路由中为其创建一个 URL。

[Rails 路由指南对](http://guides.rubyonrails.org/routing.html#generating-paths-and-urls-from-code)您来说应该是一本有用的读物​​。

现在假设您的 Comment 控制器在正确的位置分配了正确的内容。你似乎已经明白了，但为了清楚起见我会解释一下（以及未来的访客）

```
class CommentsController < ApplicationController
  # GET /item/:item_id/comments/new
  def new
    @comment = Comment.new

    @item = Item.find(params[:item_id])
    @comment.item = @item
    # render
  end

  # POST /item/:item_id/comments
  def create
    @comment = Comment.new(params[:comment])

    @item = Item.find(params[:item_id])
    @comment.item = @item

    # if @comment.save blah
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:40:04.693

所有功劳都应归功于@jonallard

解决方案似乎就是路由，您需要将 url 传递给进行新评论（链接模型）的表单。

去做这个：

1.  将此（或类似的，取决于对象名称）添加到调用创建的页面：

    `<%= link_to 'Add Comment', new_item_comment_path(@item) %>`

2.  在`new`和 的`create`方法中`comments_controller`都有一行开始`@comment = Comment.new`。在该行下添加：

    `@item = Item.find(params[:item_id])`和 `@comment.item = @item`

3.  将评论模板的第一行编辑为：`<%= form_for(@comment, {:url => item_comments_path(@item)}) do |f| %>`

4.  将路线编辑为：

> 资源：项目做
> 
> ...
> 
> 资源：评论
> 
> 结尾

并阅读： http: [//guides.rubyonrails.org/routing.html#creating-paths-and-urls-from-objects](http://guides.rubyonrails.org/routing.html#creating-paths-and-urls-from-objects)！

如前所述，所有功劳归于@jonallard，他的回答和他的专业知识。

# matlab - 如何修改数据集以在matlab中制作唯一的数据集

> ID：13673931
> 
> 赞同：0
> 
> 时间：2012-12-02T21:16:45.143
> 
> 标签：matlab, unique, noise

我`M`在 MATLAB 中有一个包含`m x n`数字的矩阵。我想为重复的行添加非常小的噪音以使其独一无二，即`size(M,1) = size(unique(M,'rows'),1)`.

**编辑**：我试过这个。但这不是确定性的。

```
while size(unique(allDataUnnormalized,'rows'),1)~=size(allDataUnnormalized,1)
    [~, tmpDist] = knnsearch (allDataUnnormalized,allDataUnnormalized,'k',2);
    importantIdx = find(tmpDist(:,2)==0);

    allDataUnnormalized(importantIdx,:)=allDataUnnormalized(importantIdx,:)+rand(numel(importantIdx),NDims)*epsilon^4;
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:14:57.787

添加噪音很便宜，为什么不尝试以下方法：

```
 allDataUnnormalized = allDataUnnormalized + eps*rand(size(allDataUnnormalized)); 
```

# css - HTML 标头无法正确适配

> ID：13673933
> 
> 赞同：0
> 
> 时间：2012-12-02T21:17:05.767
> 
> 标签：css, html, web

我正在尝试在我的网站上添加标题。试了无数次，就是记不住正确的方法。当我放一张图片时，它不适合标题的大小（上面写着 Younani Flower 的矩形）。为什么会出现这个问题？我没有留下空白区域，因为图像通常覆盖页面。

网址：http: [//younani.com/finalsite/finalindex.html](http://younani.com/finalsite/finalindex.html)

CSS：

```
#header {text-align: center;
}

#container {
    width: 960px;
    margin: 0 auto;
     background-color: #FAFAFA;
     color: #003300;
     font-family: Arial, Helvetica, sans-serif; background-image:url('backgroundflower5.jpg'); background-repeat: no-repeat; background-position: center; background-size: cover;

}

#h2 {text-align: center;}

#container {
            width: 960px;
            margin: 0 auto;
        }

        #container div {
            border: 1px solid;
        }

        #header {}

#center2 {
            float: left;
            margin: 10px 0 10px 20px;
            min-width: 200px; width: 494px; border-radius:8px;
        }

#centerO {float: left;
            margin: 10px 0 10px 20px;

            min-width: 200px; font-family: "Comic Sans MS", cursive, sans-serif; background-color: #FFFFFF;
            width: 494px; border-radius:8px; text-align: left; }

        #left,
        #center,
        #right {
            float: left;
            margin: 10px 0 10px 20px;

            min-width: 200px;
        }

        #center {font-family: "Comic Sans MS", cursive, sans-serif; background-color: #FFFFFF;
            width: 494px; border-radius:8px; text-align: center;
        } 

        .clear {
            clear: both;
        }

#right2 {float: left;
            margin: 10px 0 10px 20px; border: 0px;

            min-width: 200px;}

#right { font-family: Impact, Charcoal, sans-serif; border-radius:8px; background-color: #FFFFFF;}

#left a {font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    color: #ffffff;
        display: block;
    padding: 10px 20px;
    background: -moz-linear-gradient(
        top,
        #ffffff 0%,
        #2a07ed);
    background: -webkit-gradient(
        linear, left top, left bottom, 
        from(#ffffff),
        to(#2a07ed));
    -moz-border-radius: 30px;
    -webkit-border-radius: 30px;
    border-radius: 30px;
    border: 3px solid #ffffff;
    -moz-box-shadow:
        0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(026,020,219,1);
    -webkit-box-shadow:
        0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(026,020,219,1);
    box-shadow:
        0px 3px 11px rgba(000,000,000,0.5),
        inset 0px 0px 1px rgba(026,020,219,1);
    text-shadow:
        0px -1px 0px rgba(000,000,000,0.2),
        0px 1px 0px rgba(255,255,255,0.3);
}

figure{}

#left a:link { background-color: #E6E6E6; }
#left a:visited { background-color: #E6E6E6; }
#left a:hover {border: 3px inset #333333; }

#left ul { list-style-type: none;
          margin: 0;
          padding-left: 0; }

#footer { text-align: center; font-family: Audimat;
    clear: both; width:38%;
        border-radius: 8px;
        background-color:white;
        text-align:center; margin-right:auto;
        margin-left:auto; } 
```

主页：

```
<!DOCTYPE html>

<html lang="en">

<head>

   <title>Younani Flower's</title>

   <meta charset="utf-8">

   <link rel="stylesheet" href="final.css" />
</head>

<body>
<div id="container" class="clearfix"><!-- Header -->
<div id="header">
<h1>Younani Flowers</h1>
</div>
<!-- Left Column -->
<div id="left">
<ul>
<li><a href="finalindex.html">Home</a></li>
<li><a href="gallery.html">Gallery</a></li>
<li><a href="occasions.html">Occasions</a></li>
<li><a href="aboutus.html">About Us</a></li>
<li><a href="contactus.html">Contact Us</a></li>
</ul>
</div>
<!-- Center Column -->
<div id="center">
<p><strong>In-store Specials</strong></p>
<p>Dozen Red Roses: $12.99</p>
<p>Bouquet of TEN different garden flowers: $19.99</p>
<p>Small glass vases: $9.99 <br /> Medium glass vases $14.99 <br /> Large glass vases: $19.99</p>
<p></p>
</div>
<!-- Right Column -->
<div id="right">
<p><span style="text-decoration: underline;"><strong>Birth Month Flowers<strong></strong></strong></span></p>
<p>January Carnation</p>
<p>February Iris</p>
<p>March Daffodil</p>
<p>April Daisy</p>
<p>May Lily</p>
<p>June Rose</p>
<p>July Delphinium</p>
<p>August Dahlia</p>
<p>September Aster</p>
<p>October Calendula</p>
<p>November Chrysanthe</p>
<p>December Poinsettia</p>
</div>
<!-- Footer -->
<div id="footer" class="clear">
<div class="nav"><b><a href="finalindex.html">Home</a>&nbsp;&nbsp; <a href="gallery.html">Gallery</a>&nbsp;&nbsp; <a href="occasions.html">Occasions</a>&nbsp;&nbsp; <a href="aboutus.html">About Us</a>&nbsp;&nbsp; <a href="contactus.html">Contact Us</a>&nbsp;&nbsp;</b></div>
</div>
</div>
<!-- #container -->
<p></p>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:26:35.433

如果您按如下方式添加标题背景，它应该可以工作：

```
#header {
  background-image: url(image_path);
} 
```

如果删除里面的文本，则必须指定标题的尺寸。由于块元素的宽度隐式为 100%，因此您只需指定高度。在我的浏览器中，文本的高度是 81px。

# php - 使用 cURL 在两个 PHP 请求之间共享相同的 cookie

> ID：13673934
> 
> 赞同：1
> 
> 时间：2012-12-02T21:17:11.030
> 
> 标签：php, post, cookies, curl, get

我在这里的第一篇文章...我正在处理 get/post 请求对之间的 cookie。

基于另一个问题： [使用 PHP cURL 扩展在两个网站之间共享相同的 cookie](https://stackoverflow.com/questions/2845684/share-the-same-cookie-between-two-website-using-php-curl-extension)

我的方法正确吗？

```
<?php
//set POST variables
$referer = 'http://www.correios.com.br/encomendas/prazo/';
$url = 'http://www.correios.com.br/encomendas/prazo/prazo.cfm';
$fields = array(
           'Altura' => '8',
                        'Comprimento'   => '16',
                        'Formato'   => '1',
                        'Largura'   => '15',
                        'MaoPropria'    => 'N',
                        'avisoRecebimento'  => 'N',
                        'cepDestino'    => '99999999',
                        'cepOrigem' => '99999999',
                        'data'  => '02/12/2012',
                        'dataAtual' => '02/12/2012',
                        'embalagem' => '',
                        'peso'  => '1',
                        'resposta   paginaCorreios'=> '',
                        'servico'   => '99999',
                        'valorD'    => '',
                        'valorDeclarado'=> ''   
        );

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&');

//open connection
$ch = curl_init();

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_TIMEOUT, '10');
curl_setopt($ch, CURLOPT_AUTOREFERER, true);

curl_setopt($ch, CURLOPT_COOKIEJAR, '/tmp/cookies.txt');
curl_setopt($ch, CURLOPT_COOKIEFILE, '/tmp/cookies.txt');

// Post 1
curl_setopt($ch, CURLOPT_HTTPGET, true);
curl_setopt($ch, CURLOPT_URL, $referer);

$result = trim(curl_exec($ch));
//

$ch = curl_init($url);

//Post 2
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);
curl_setopt($ch, CURLOPT_REFERER, $referer);

//execute post
$result = curl_exec($ch);
//

//close connection
curl_close($ch); 

echo($result);
?> 
```

我需要的是模仿这种行为：

```
Response Headers:
Content-Type    text/html; charset=ISO-8859-1
Date    Sun, 02 Dec 2012 20:13:08 GMT
Server  Microsoft-IIS/7.5
Set-Cookie  JSESSIONID=c6308c7edb989a54edef1b656119101c321b;path=/ CFGLOBALS=urltoken%3DCFID%23%3D33736896%26CFTOKEN%23%3D28355865%26jsessionid%23%3Dc6308c7edb989a54edef1b656119101c321b%23lastvisit%3D%7Bts%20%272012%2D12%2D02%2018%3A13%3A09%27%7D%23timecreated%3D%7Bts%20%272012%2D12%2D02%2002%3A13%3A29%27%7D%23hitcount%3D6%23cftoken%3D28355865%23cfid%3D33736896%23;expires=Tue, 25-Nov-2042 20:13:09 GMT;path=/
Transfer-Encoding   chunked

Request Headers:
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language pt-BR,pt;q=0.8,en-US;q=0.5,en;q=0.3
Connection  keep-alive
Cookie  CFID=33736896; CFTOKEN=28355865; CFGLOBALS=urltoken%3DCFID%23%3D33736896%26CFTOKEN%23%3D28355865%26jsessionid%23%3D983074629e3d7344ff534b12637b7f127163%23lastvisit%3D%7Bts%20%272012%2D12%2D02%2002%3A56%3A48%27%7D%23timecreated%3D%7Bts%20%272012%2D12%2D02%2002%3A13%3A29%27%7D%23hitcount%3D5%23cftoken%3D28355865%23cfid%3D33736896%23
Host    www.correios.com.br
User-Agent  Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:17.0) Gecko/20100101 Firefox/17.0 
```

从其他一些主题中阅读，我了解了 multi_exec: [PHP cURL multi_exec delay between requests](https://stackoverflow.com/questions/6987404/php-curl-multi-exec-delay-between-requests)

我的意思是，这项任务的正确方法是什么？

提前致谢！雷纳托

# android - 按下后退按钮时刷新列表视图 - android

> ID：13673940
> 
> 赞同：2
> 
> 时间：2012-12-02T21:17:32.650
> 
> 标签：android, listview

先生，如果我在 android 模拟器中按下后退按钮，如何刷新我的列表视图？我在activityA 上单击了一个项目，然后转到activityB 中的编辑表单。保存更新后，如果我按下后退按钮，它应该刷新列表。

这是我的活动A

```
public class CustomListView extends Activity {
final Context context = this;
public static String name;
public static String number;
int REQUEST_CODE = 0;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    GroupDb info = new GroupDb(this);
    info.open();
    ArrayList<Contact> searchResults = info.getView();

    MyCustomBaseAdapter mcba = new MyCustomBaseAdapter(CustomListView.this, searchResults);
    mcba.updateResults(searchResults);
    final ListView lv = (ListView) findViewById(R.id.srListView);
    lv.setAdapter(new MyCustomBaseAdapter(this, searchResults));

    info.close();

    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> a, View v, int position, long id) {
            // TODO Auto-generated method stub
            Object o = lv.getItemAtPosition(position);
            final Contact fullObject = (Contact)o;
            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
            alertDialogBuilder
            .setMessage("Select action")
            .setCancelable(false)
            .setPositiveButton("Edit", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    Toast.makeText(getApplicationContext(), "Edit ", Toast.LENGTH_LONG).show();
                    name = fullObject.getName();
                    number = fullObject.getPhoneNumber();
                    Intent intent = new Intent();
                    intent.setClass(CustomListView.this, EditDetails.class);

                    startActivityForResult(intent, REQUEST_CODE);

                }
              })

             .setNeutralButton("Delete", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    Toast.makeText(getApplicationContext(), "Delete ", Toast.LENGTH_LONG).show();

                }
              }) 
            .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                    dialog.cancel();
                }
            });

            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show();
        }

    });
}
public void onResume()
{  // After a pause OR at startup
super.onResume();
//Refresh your stuff here
GroupDb info = new GroupDb(this);
info.open();
ArrayList<Contact> searchResults = info.getView();

MyCustomBaseAdapter mcba = new MyCustomBaseAdapter(CustomListView.this, searchResults);
mcba.updateResults(searchResults);

info.close();
}

protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);

    if (requestCode == REQUEST_CODE) {
        GroupDb info = new GroupDb(this);
        info.open();
        ArrayList<Contact> searchResults = info.getView();

        MyCustomBaseAdapter mcba = new MyCustomBaseAdapter(CustomListView.this, searchResults);
        mcba.updateResults(searchResults);

        info.close();
    }
}
//edit or delete list when clicked
public void deleteEditOption()
{

}//end deleteEditOption()
} 
```

这是我的活动B

```
public class EditDetails extends Activity{
public String nameChanged;
public String numChanged;
public String name;
public String num;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.editdetails);
    final EditText sqlName = (EditText)findViewById(R.id.editName);
    final EditText sqlNumber = (EditText)findViewById(R.id.editNumber);
    name = CustomListView.name;
    num = CustomListView.number;
    Button bUpdate = (Button)findViewById(R.id.editUpdate);
    Button bView = (Button)findViewById(R.id.editView);
    sqlName.setText(name);
    sqlNumber.setText(num);

    bUpdate.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            nameChanged = sqlName.getText().toString();
            numChanged = sqlNumber.getText().toString();
            GroupDb info = new GroupDb(EditDetails.this);
            info.open();
            long rowid = info.getRowId(name, num);
            info.updateNameNumber(rowid+1, nameChanged, numChanged);
            Toast.makeText(getApplicationContext(), rowid+" "+nameChanged+" "+numChanged, Toast.LENGTH_LONG).show();
            ArrayList<Contact> searchResults = info.getView();
            MyCustomBaseAdapter mcba = new MyCustomBaseAdapter(EditDetails.this, searchResults);
            mcba.updateResults(searchResults);
            Toast.makeText(getApplicationContext(), "Update Successful!", Toast.LENGTH_LONG).show();
            info.close();
            }
        });
    bView.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            Intent intent = new Intent();
            intent.setClass(EditDetails.this, CustomListView.class);

            startActivityForResult(intent, 0);
            }
        });
}

} 
```

如果我在我的活动 B 中单击此 bView 按钮，它会更新列表视图。但按下后退按钮只会显示我之前未更新的列表视图。提前感谢您的帮助

编辑

```
public class MyCustomBaseAdapter extends BaseAdapter {
private static ArrayList<Contact> searchArrayList;

private LayoutInflater mInflater;

public MyCustomBaseAdapter(Context context, ArrayList<Contact> results) {
    searchArrayList = results;
    mInflater = LayoutInflater.from(context);
}

public void updateResults(ArrayList<Contact> results) {
    searchArrayList = results;
    //Triggers the list update
    notifyDataSetChanged();
}

public int getCount() {
    return searchArrayList.size();
}

public Object getItem(int position) {
    return searchArrayList.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.custom_row_view, null);
        holder = new ViewHolder();
        holder.txtName = (TextView) convertView.findViewById(R.id.name);

        holder.txtPhone = (TextView) convertView.findViewById(R.id.phone);

        holder.status = (TextView) convertView.findViewById(R.id.status);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.txtName.setText(searchArrayList.get(position).getName());

    holder.txtPhone.setText(searchArrayList.get(position).getPhoneNumber());

    holder.status.setText(searchArrayList.get(position).getStatus());

    return convertView;
}

static class ViewHolder {
    TextView txtName;
    TextView txtPhone;
    TextView status;
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T21:22:35.780

**改写**

虽然我建议自定义 CursorAdapter 以使用您的数据库。让我们用您当前的代码更改几点：

首先为 , 创建一个字段变量`mbca`（就像`name`and一样`number`）。

```
MyCustomBaseAdapter mcba; 
```

第二次更新您的初始化`mbca`方式`onCreate()`：

```
mcba = new MyCustomBaseAdapter(EditDetails.this, searchResults);
//mcba.updateResults(searchResults); this line isn't necessary here 
```

第三个小改动`onResume()`：

```
public void onResume()
{  // After a pause OR at startup
    super.onResume();
    //Refresh your stuff here
    GroupDb info = new GroupDb(this);
    info.open();
    mcba.updateResults(info.getView());
    info.close();
} 
```

这是有效的，因为`updateResults()`调用`notifyDataSetChanged()`并自动更新 ListView。

# jquery - 如何使用 text() jQuery 方法在 localStorage 上保存换行符

> ID：13673943
> 
> 赞同：1
> 
> 时间：2012-12-02T21:18:02.637
> 
> 标签：jquery, local-storage

我正在尝试使用 jQuery 做一个受 dabblet 启发的应用程序进行练习，这里是 repo：[https](https://github.com/thinkxl/docss) ://github.com/thinkxl/docss和这里的现场演示：[http ://thinkxl.github.com/docss/](http://thinkxl.github.com/docss/)

我正在使用localStorage，所以当用户加载页面时，我想调用信息

```
render: function(){
        css.text(cssDB);
        html.text(htmlDB);
        result.html(htmlDB);
    }, 
```

我使用 text() 方法，因为如果我使用 html()，HTML 字段会显示类似“something”的内容，而不是

```
<div>something</div> 
```

所以这里的一切都很酷，但是当我回忆起加载时的一切时，一切都显示在一行上，我想保留换行符。

我怎么会这样做？

# android - Android 的代码注入

> ID：13673947
> 
> 赞同：1
> 
> 时间：2012-12-02T21:18:11.010
> 
> 标签：android, orm, dexmaker

我想为 Android 编写一个 ORM 作为我的最终项目。我的第一个想法是为每个 get 和 set 注入代码。不幸的是，我发现很多帖子都说无法在 Android 中注入代码。

另一方面，我发现“Dexmaker”可以在运行时生成代码。

我的问题是：是否有可能以某种方式在 Android 中注入代码（通过“Dexmaker”或其他方式）？

如果没有怎么办？

我也想过反思，但我担心它会变慢。

提前致谢。

编辑

Simon：是的，ORM 提到了对象关系映射。我想创建一个通用框架。除了代码注入之外，我还能如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:50:11.497

您可以使用 Dexmaker 注入代码。项目站点有一个`HelloWorldMaker`生成类然后加载它的示例。

但是，您可能会发现运行时代码生成的性能并不令人满意。像[Dagger](http://square.github.com/dagger/)这样的项目通过代码生成在元编程方面取得了更好的成功。

# php - 使用 dns_get_record() 的结果

> ID：13673948
> 
> 赞同：1
> 
> 时间：2012-12-02T21:18:12.270
> 
> 标签：php, arrays, dns

我有一些代码假设要打印域的名称服务器。然而，在打印它们时，它给了我这个：

```
array(5) {
  [0]=>
  array(5) {
    ["host"]=>
    string(7) "php.net"
    ["type"]=>
    string(2) "NS"
    ["target"]=>
    string(19) "remote1.easydns.com"
    ["class"]=>
    string(2) "IN"
    ["ttl"]=>
    int(32)
  }
  [1]=>
  array(5) {
    ["host"]=>
    string(7) "php.net"
    ["type"]=>
    string(2) "NS"
    ["target"]=>
    string(19) "remote3.easydns.com"
    ["class"]=>
    string(2) "IN"
    ["ttl"]=>
    int(32)
  }
  [2]=>
  array(5) {
    ["host"]=>
    string(7) "php.net"
    ["type"]=>
    string(2) "NS"
    ["target"]=>
    string(15) "ns2.easydns.com"
    ["class"]=>
    string(2) "IN"
    ["ttl"]=>
    int(32)
  }
  [3]=>
  array(5) {
    ["host"]=>
    string(7) "php.net"
    ["type"]=>
    string(2) "NS"
    ["target"]=>
    string(15) "ns1.easydns.com"
    ["class"]=>
    string(2) "IN"
    ["ttl"]=>
    int(32)
  }
  [4]=>
  array(5) {
    ["host"]=>
    string(7) "php.net"
    ["type"]=>
    string(2) "NS"
    ["target"]=>
    string(19) "remote2.easydns.com"
    ["class"]=>
    string(2) "IN"
    ["ttl"]=>
    int(32)
  }
} 
```

我知道这是一个数组但是我只希望它打印每个名称服务器

```
remote2.easydns.com
ns1.easydns.com
ns2.easydns.com
remote1.easydns.com 
```

等等

这是我当前的代码：

```
<?php
$result = dns_get_record("php.net", DNS_NS);
echo '<pre>';
var_dump($result);
echo '</pre>';
?> 
```

Print_r 做了一个非常相似的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:19:48.380

假设您的数组具有变量名称`$array`：

```
foreach($array as $key=>$value){
    echo $value['target'].'<br>';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T21:20:06.060

`$result`是一个结果数组。遍历数组并输出`target`每个子数组的键。

```
$result = dns_get_record("php.net", DNS_NS);
foreach ($result as $record) {
    echo $record['target'], "\n";
} 
```

# c - Visual Studio 使用 Consolas 打开 cmd.exe

> ID：13673951
> 
> 赞同：1
> 
> 时间：2012-12-02T21:18:49.530
> 
> 标签：c, character-encoding, console, visual-studio-2012, cmd

我有一个用 C 语言编写的程序，它正在 Visual Studio 2012 下开发。
我的程序使用光栅字体中不可用的字符，所以我将`cmd.exe`字体更改为 Consolas，我的字符（á、é、í 等）工作。

但是，当我打开我的程序时，控制台仍然是光栅字体。我不知道我应该改变哪里才能使 Consolas 被全球接受。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T13:53:55.087

这是我从几个来源收集的一些代码。允许我使用代码页，避免使用 unicode。但是， wprintf() 等也应该工作。

到目前为止，只有 consolas 和 lucida console 可以工作。包括尝试获得类似大小。

检查包括 nFont 索引的有效性检查。这可能是不需要的，在这种情况下，您可以省略对 kernel32 例程 GetNumberOfConsoleFonts() 的未记录调用。

Hans 说它不适用于 XP，[文档](http://msdn.microsoft.com/en-us/library/ms686200%28v=vs.85%29.aspx)说最小 _WIN32_WINNT 是 0x500，其中包括 XP。还没试过。简

```
static void strcpytoW(WCHAR *dst, const char *src)
{
    WCHAR c;
    while ((c=*src++)!=0) *dst++=c;
    *dst=0;
}

/*************************************/

typedef DWORD (WINAPI *FN_NUMCONSOLEFONT)();
FN_NUMCONSOLEFONT GetNumberOfConsoleFonts;
static bool setfont(const HANDLE h, char *facename, CONSOLE_FONT_INFOEX &in,CONSOLE_FONT_INFOEX &out)
{
    in.cbSize=out.cbSize=sizeof(in);
    strcpytoW(in.FaceName,facename);
    if (!SetCurrentConsoleFontEx(h,FALSE,&in)) return false;
    HMODULE hm = ::GetModuleHandleA("KERNEL32.DLL"); 
    if (!hm) return false;
    GetNumberOfConsoleFonts = (FN_NUMCONSOLEFONT) GetProcAddress(hm, "GetNumberOfConsoleFonts");
    if (!GetNumberOfConsoleFonts) return false;
    DWORD numConsoleFonts=GetNumberOfConsoleFonts();
    if (!GetCurrentConsoleFontEx(h,FALSE,&out)) return false;
    return out.nFont>=0 && out.nFont<numConsoleFonts && _wcsicmp(in.FaceName,out.FaceName)==0;
}

/*************************************/

static char *set_console(char *facename,int page)
{
    HANDLE hStdout = GetStdHandle(STD_OUTPUT_HANDLE);
    CONSOLE_FONT_INFOEX fi={sizeof(fi),-1,{0,0},54,700},newfi;
    CONSOLE_FONT_INFO curfi;
    if (!GetCurrentConsoleFont(hStdout,FALSE,&curfi)) return NULL;
    for (fi.dwFontSize=curfi.dwFontSize;;fi.dwFontSize.Y++)
    {
        if (!setfont(hStdout,facename,fi,newfi))
        {
            facename="Lucida Console";
            if (!setfont(hStdout,facename,fi,newfi)) return NULL;
        }
        if (newfi.dwFontSize.X>=curfi.dwFontSize.X) break;
    }
    if (!SetConsoleOutputCP(page)) return NULL;
    return facename;
}

/*************************************/

int main(int argc, char *argv[])
{
    char *faceused;
    if ((faceused=set_console("Consolas",1252))!=NULL)
        printf("Console succesful, using %s\n",faceused);
    else puts("Console failed");
    puts("\x86 \x87 \xa7 \xa9 \xae \xb1 \xbc"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:26:28.410

按 Ctrl-F5 开始执行程序。在返回 VS 之前，它会显示“按任意键...”。这使您有机会单击窗口的左上角，属性并将字体也更改为光栅字体。

# sql - 使用多个键检索记录。OPENJPA

> ID：13673956
> 
> 赞同：1
> 
> 时间：2012-12-02T21:19:27.457
> 
> 标签：sql, jakarta-ee, jpa, openjpa, rpgle

在我所知道的语言上，RPG...您可以使用多个键并查找检索记录的值。

喜欢餐桌。我可以选择键 lolo 和 apple 来检索性女巫的值是 F。Howerver 我在 OPENJPA 中找不到类似这样的功能.. find() 只能使用一个键？是否有类似 find(names.class,:"LOLO","Apple") 的键是 F_NAME 和 L_NAME 的东西？

```
Names
F_NAME   L_NAME   Sex
LOLO     Apple     F

Ben      Coke      M 
```

读取jpa时，通常表有P_ID

```
P_ID     F_NAME  L_NAME  Sex
1        LOLO     Apple   F 
2        Ben      Coke    M 
```

要检索记录 lolo apple，我需要使用此代码..

```
Names name = em.find(Names.class, 1); 
```

如果给定的值为 F_NAME，您将如何知道性别？和 L_NAME？在 SQL 中，你可以说 select * from Names where F_NAME = Lolo , L_NAME = "Apple" ，它会输出

```
P_ID     F_NAME  L_NAME  Sex
1        LOLO     Apple   F 
```

从那你可以说Sex = F。就像我想知道lolo apple是男性还是女性，我会在数据库中搜索lolo apple...不是P_ID = 1。我怎么知道Lolo Apple的P_ID是什么.

希望你明白我的意思.. 谢谢。

或者也许在等式的另一部分，在 JPA 上，您如何在不知道 P_ID（主键）的情况下检索要更新的记录，就像您只知道名字和姓氏一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:02:07.863

如果您查看[OpenJPA 文档](http://openjpa.apache.org/builds/apache-openjpa-2.2.2-SNAPSHOT/docs/docbook/manual/main.html)，它定义了 JPA 查询语言 [JPQL]。那不是开始的地方吗？

* * *

**更新**

如果你想指定几个键值，为什么不像在 SQL 中那样在 JPQL 的 WHERE 子句中指定它们。

```
SELECT ...
  WHERE colX = val1 and colY = val2 and colZ = val3 
```

# c# - 计算字符串中的字符时如何删除句号

> ID：13673960
> 
> 赞同：0
> 
> 时间：2012-12-02T21:19:36.877
> 
> 标签：c#

我的任务是创建 ac# 控制台文本分析程序。该程序允许用户逐字输入句子单句号是句子的结尾双句号是打破循环并给出文本分析

我有正确计算单词和句子的程序。

我的问题是：如何更改我的代码，以便程序不会将句号计为一个字符？

以下是我到目前为止的代码

```
 case "1":

    string UserSentence="";
    string newString="";
    string UserWord;
    int SentenceCount=1;
    int WordCount=0;
    double CharCount=0;

    Console.WriteLine("You have chosen to type in your sentance(s) for analysis.\nPlease input each word then press enter.\n\nUse one full stop to end the sentence.\nUse two full stops to finish inputting sentences");
    while (true)
        {
            UserWord = Console.ReadLine();
            WordCount++;
            UserSentence = UserSentence+UserWord;

                if (UserWord == "..")
                    {
                        CharCount=CharCount-2;
                        WordCount--;
                        break;
                    }

                if (UserWord == ".")
                    {
                        CharCount=CharCount-1;
                        WordCount--;
                        SentenceCount++;
                    }
        }

    foreach (char c in UserSentence)

        {
            if (c ==' ')
            continue;
            newString += c;
        }
        CharCount = newString.Length;
        Console.WriteLine("Their are {0} characters",CharCount);
        Console.WriteLine("Their are {0} Sentences",SentenceCount);
        Console.WriteLine("Their are {0} Words",WordCount);
    break; 
```

我试图通过根据句号的数量减去 2 或 1 来纠正字符数，但是它不起作用

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:25:31.790

在这里，您只是*覆盖*了 的值`CharCount`，丢弃了您之前所做的所有减法：

```
CharCount = newString.Length; 
```

可以改为：

```
CharCount = CharCount + newString.Length; 
```

为了给出正确的结果。

还有其他选项，例如计算句子中的数量，`.`在获得长度之前将句子中的所有内容替换`.`为空字符串等等。

样式注意事项：在 C# 中，局部变量通常是 camelCase，而不是 PascalCase。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:28:20.237

您可以使用 LINQ 来计算不是空格或点的字符。

```
int characterCount = s.Count(x => x != ' ' && x != '.'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T21:30:39.613

您可以只计算不是“。”的字符。

```
CharCount = newString.Where(c => !c.Equals('.') && !c.Equals(' ')).Count(); 
```

# php - 执行多个查询时mysqli失败

> ID：13673961
> 
> 赞同：0
> 
> 时间：2012-12-02T21:19:38.023
> 
> 标签：php, mysql, mysqli

我正在尝试从 MySQL 数据库中收集一些信息并且遇到了一些问题。我可以独立执行我的两个查询中的任何一个，但是当我尝试执行它们时，我的代码都失败并出现`Call to a member function bind_param() on a non-object in /api/boxes.php on line 20`第 20 行所在的错误`$queryFacet = $db->prepare("SELECT item_name FROM kf_facet_items WHERE id IN (SELECT facet_value_id FROM kf_box_data WHERE box_id = ?)");`

这是我的代码：

```
$query = $db->prepare("SELECT DISTINCT b.id, b.ownerID, b.transactionID, b.post_date, b.description FROM kf_boxes b JOIN kf_box_data d ON b.id = d.box_id");
$query->execute();
$query->bind_result($id, $owner, $transactionID, $post_date, $description);

while ($query->fetch()) {
    $result['id'] = $id;
    $result['transaction'] = $transactionID;
    $result['post_date'] = $post_date;
    $result['description'] = $description;
    $queryFacet = $db->prepare("SELECT item_name FROM kf_facet_items WHERE id IN (SELECT facet_value_id FROM kf_box_data WHERE box_id = ?)");
    $queryFacet->bind_param('s',$id);
    $queryFacet->execute();
    $queryFacet->bind_result($item_name);
        while ($queryFacet->fetch()) {
            $facets['name'] = $item_name;
            $result['facets'] = $facets;
        }
    $output[] = $result;
} 
```

任何人对造成这种情况的原因有任何想法，更重要的是，如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:47:51.060

问题解决了。我并没有结束我的第一个声明，这让 mysqli 感到头晕目眩。在 while 语句之后添加`$query->close();`，然后为第二个查询添加一个 for 循环按预期工作。

# ruby-on-rails-3 - Rails 3.2 session id nil 直到下一个请求

> ID：13673969
> 
> 赞同：4
> 
> 时间：2012-12-02T21:20:25.363
> 
> 标签：ruby-on-rails-3, session

尝试将 rails 2 应用程序移植到 rails 3，但我遇到了一些会话问题！

在登录阶段，我似乎无法获得对会话 ID 的引用。我正在查看 request.session_options 和 session，在第二个请求之前似乎都没有分配会话 ID。

当用户登录时，我执行 session[:user_id] = user.id 将它们放入会话中。我查看了我的会话表，它肯定在那里添加了会话信息，但我希望能够将会话 ID 发送给客户端，最好是使用登录响应。

值得注意的是，在我登录并创建会话后发送的下一个请求中，request.session_options 确实有很好的数据，所以看起来事情正在发生，只是不是按照首选顺序。

用登录响应发回会话 ID 的最佳方式是什么？

编辑：我正在制作的应用程序是一个与 Rails 对话的外部程序，所以我不能真正依赖浏览器 cookie 来自动工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-07T08:36:51.893

我最近遇到了这个 - 见[http://www.gani.com.au/2013/08/force-session-creation-in-rails/](http://www.gani.com.au/2013/08/force-session-creation-in-rails/)。最后，我通过写信来强制创建会话。

```
session[:foo] = 'bar' 
```

# .net - 我可以在可移植类库中使用 OData 客户端代码吗？

> ID：13673970
> 
> 赞同：14
> 
> 时间：2012-12-02T21:20:37.893
> 
> 标签：.net, api, wcf-data-services, odata, portable-class-library

我正在尝试构建一个面向 .NET、Silverlight、Windows RT 和 Windows Phone 的[可移植类库](http://msdn.microsoft.com/en-us/library/gg597391.aspx)，充当 OData 客户端。我正在使用 Visual Studio 2012。

当我创建对我的 OData 服务器端的服务引用时，我收到以下错误消息：

> 无法添加对指定 OData 源的服务引用，因为没有为此目标框架安装 WCF 数据服务。要安装受支持的 WCF 数据服务版本，请参阅 [http://go.microsoft.com/fwlink/?LinkId=253653](http://go.microsoft.com/fwlink/?LinkId=253653)。

当我转到错误消息中列出的 URL 时，我可以在 Windows RT 库和 Windows Phone 库之间进行选择，因此这似乎不适用于可移植类库。

是否有任何秘密解决方法，或者我是否必须使用裸 HTTP 请求编写我自己的 Odata 客户端？

另外，如果我必须使用裸 HTTP 请求，是否至少有某种 API 可以在可移植类库中工作的 json 或 xml 序列化/反序列化构建？

谢谢，

阿德里安

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T10:22:27.747

实际上我有一个用于 OData (Simple.OData.Client) 的可移植类库，但还没有为它制作 NuGet 包。它是 Simple.Data OData 适配器的一部分。

I am using Simple.OData.Client PCL in the app that I plan to port to various platform including iOS and Android (using Xamarin). If you are interested to give it a try I propose one of two alternatives:

a) Clone the Simple.Data.OData repo (https://github.com/simplefx/Simple.OData), switch to "winrt" branch, build it, there you have Simple.OData.Client that is a PCL supporting most of the platforms. Wiki currently describes Simple.Data adapter syntax, so you need to check Simple.OData.Client tests (https://github.com/simplefx/Simple.OData/tree/master/Simple.OData.Client.Tests) to understand the syntax. It has supports two syntax flavors: when you format filter string yourself and when you use its fluent API. Both of them are very straightforward to use.

b) 我可以加快处理 PCL 的 NuGet 包的工作（当前上传的 NuGet 包只支持 NET4），但需要更长的时间。

如果您有兴趣，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:04:57.157

WCF DS 客户端库本身不是可移植类库的一部分，因此预计不会起作用（正如您所发现的那样）。它使用 ODataLib - Microsoft.Data.OData.dll，它没有作为可移植类库的一部分进行测试，但应该可以工作。

因此，如果您可以使用不受支持的解决方案，请随意使用它。它实际上是 OData 格式（ATOM/JSON，...）的读取器/写入器。它的源代码也可以在 codeplex 上找到，所以如果某些东西在可移植类库上下文中不能正常工作，你可以修复它（请告诉我们）。

无论如何，这个库被设计为在所有平台上尽可能接近相同，所以目标肯定是它成为可移植类库集的一部分，只是还没有实现。

# reporting-services - SSRS 2012 条件轴标签格式

> ID：13673971
> 
> 赞同：0
> 
> 时间：2012-12-02T21:20:43.953
> 
> 标签：reporting-services

我有一个结果集，它返回我的日期\时间（每小时间隔）值，这些值沿我的 x 轴绘制在折线图上，我正在格式化为小时（时间）部分。

这些时间值可以重复，例如：

09:00 10:00 14:00 15:00 18:00 09:00 10:00 12:00

我想要做的是沿着 x 轴清楚地标记相同小时部分所在的日期，所以是二级标签？

我想保持小时显示格式沿 x 轴上的标记但低于这些标记并跨越它们的日期标签。

所以我想：

* * *

2012 年 11 月 10 日 09:00 10:00 12:00 14:00 18:00 09:00 12:00 14:00 | 2012 年 11 月 11 日

我希望这对那里的人有意义，这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:44:20.067

在您的图表中，您的时间值已经有了一个类别组。为日期添加另一个类别组。

# symfony - 无法注册扩展“沙盒”，因为扩展已被初始化

> ID：13673976
> 
> 赞同：0
> 
> 时间：2012-12-02T21:21:06.837
> 
> 标签：symfony, doctrine, symfony-sonata, sonata-admin

我在安装 Sonata 项目演示时遇到问题。按照[这个](https://github.com/sonata-project/sandbox)...

我遇到以下问题：

```
Unable to register extension "sandbox" as extensions have already been initialized.

  in /var/www/nfq/sandbox/sonata-sandbox/vendor/twig/twig/lib/Twig/Environment.php line 627
at Twig_Environment->addExtension(object(Twig_Extension_Sandbox))
  in /var/www/nfq/sandbox/sonata-sandbox/app/cache/dev/appDevDebugProjectContainer.php line 7111
at appDevDebugProjectContainer->getSonata_Formatter_Twig_Env_MarkdownService()
  in /var/www/nfq/sandbox/sonata-sandbox/app/bootstrap.php.cache line 211 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:04:48.570

问题出在 Sonata Formatter 中，我也有同样的问题，所以我只是评论了从 config.yml 导入其配置的行

```
imports:
- { resource: parameters.yml }
- { resource: security.yml }
- { resource: fos_user.yml }

# Sonata Bundles
- { resource: sonata/sonata_admin.yml }
- { resource: sonata/sonata_block.yml }
- { resource: sonata/sonata_media.yml }
#- { resource: sonata/sonata_formatter.yml }
- { resource: sonata/sonata_news.yml }
- { resource: sonata/sonata_cache.yml }
- { resource: sonata/sonata_seo.yml }
- { resource: sonata/sonata_notification.yml }
- { resource: sonata/sonata_user.yml } 
```

**编辑：**

把它放在**composer.json**所需的库中：

```
"twig/twig": "1.11.1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T22:41:24.720

或者您可以按照格式化程序捆绑配置设置

```
sonata_formatter:
    formatters:
        markdown:
            service: sonata.formatter.text.markdown
            extensions: []

        text:
            service: sonata.formatter.text.text
            extensions: []

        twig:
            service: sonata.formatter.text.twigengine
            extensions: [] # Twig formatter cannot have extensions 
```

更多在奏鸣曲网站 [http://sonata-project.org/bundles/formatter/master/doc/reference/installation.html](http://sonata-project.org/bundles/formatter/master/doc/reference/installation.html)

# php - 使用用户输入保护 simplexml_load_file 文件名

> ID：13673977
> 
> 赞同：2
> 
> 时间：2012-12-02T21:21:08.580
> 
> 标签：php, simplexml

> **可能重复：**
> [在 PHP 中清理文件路径](https://stackoverflow.com/questions/1911382/sanitize-file-path-in-php)

我有一个看起来像这样的 php 脚本：

```
$search = $_REQUEST['search'];
$xml = simplexml_load_file("SOMEURL/search?q=".$search); 
```

我想知道通过更改搜索参数来阻止人们尝试加载文件或网页的正确方法是什么。

我完全了解 SQL 注入问题并知道如何处理它们，但我不确定使用用户输入保护文件位置的最佳方法。

我期待着您的回复。

### 编辑

我正在为这个问题添加更多详细信息，因为它被标记为一个没有回答我所追求的帖子的重复。

我在 Linux 机器上有一个 php 脚本，它使用 simplexml_load_file 来查询在 Windows 机器上运行的 SEARCH ENGINE Java（不是 javascript）脚本。用户可以将搜索词更改为用户希望的任何内容，因为它是搜索引擎。Windows 框上的脚本返回 XML，然后 PHP 代码将其用于显示目的。

我想确保用户不能更改 Search 参数来加载另一个 url 或文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T23:08:24.900

您将无法阻止“搜索”参数被用户/可能成为攻击者的人更改。您可以并且应该做的是将输入验证为有效值列表。如果您的列表很小且是静态的，则这可能是一个简单的数组：

```
$validSearchValues = array(
    'foo',
    'bar',
);

$search = $_REQUEST['search'];
if (! in_array($search, $validSearchValues)) {
    //anything other than foo or bar will reach this point
    echo 'invalid input';
} else {
    //only foo or bar values will reach this point
    $xml = simplexml_load_file("SOMEURL/search?q=".$search);
} 
```

对于较大的值列表，您可以将它们存储在数据库中并发出查询以检查其有效性。

这个例子是基本的。有几个框架和组件具有很好的输入验证方法，您应该研究它们（检查 Zend Framework 或 Symfony）。

# java - 在 Java 程序中硬编码文本字符串的替代做法？

> ID：13673980
> 
> 赞同：0
> 
> 时间：2012-12-02T21:21:17.620
> 
> 标签：java, string, text, hard-coding

在我的程序中，我有很多字符串和重复的字符串。有没有办法将文本字符串与源代码分开。我不想在我的程序中硬编码字符串。

在 PHP 中，我曾经有一个文件，其中包含每个字符串的列表变量。但是因为 Java 是 OOP，所以我不知道如何实现相同的想法。

我的程序是一个命令行程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:21:53.720

另一种选择是拥有属性文件（键值），就像你在 PHP 中所做的一样。

即使它是命令行程序，您仍然可以拥有属性文件。您可以将文件位置作为命令参数传递（或）将文件相对于类放置并使用相对路径来访问文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T21:29:34.343

如果您的字符串不需要由非 Java 开发人员更改，您可以简单地将它们全部放在一个单独的类中，如下所示：

```
public final class Texts {
    public static final String MYSTR1 = "str1";
    public static final String MYSTR2 = "str2";
    ...
    private Texts() {} // Prevents instantiation
} 
```

这样做会使一些维护任务更容易，例如：

*   您可以重构常量名称，以便自动更改所有用途。
*   您可以轻松找到使用每个常量的用户。
*   您可以快速发现常量的值是什么，并且可以非常快速地导航到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T21:25:01.203

使用静态类来保存你的全局变量。

```
public class Statics
{
 public static final String GLOBAL_NAME = "Stuff";
 public static final int GLOBAL_INT = 9999;
} 
```

并在您的课程中像这样访问它。

```
Statics.GLOBAL_NAME 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T21:35:12.937

如果您使用的是 Java 1.7 (SE 7)，则可以使用 java.util.Properties。[java 文档](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)提供了很好的解释。这是一个代码片段：

```
String fileName = "/path/to/file/thePropertiesFileName.properties";
FileReader reader = new FileReader(fileName);
Properties prop = new Properties();
prop.load(reader); 
```

# mysql - 如何转换 DATESUB(CURDATE(), INTERVAL X MONTH) 以显示实际月份

> ID：13673981
> 
> 赞同：0
> 
> 时间：2012-12-02T21:21:18.200
> 
> 标签：mysql

我有这个代码：

```
DATESUB(CURDATE(), INTERVAL x MONTH) 
```

其中 x 在存储过程中。但是，我不需要找到 x 个月前的日期，而是只需要找出它是哪一个月，并将其标记为正确的英文。

例如，今天的月份是 12 月。如果 x 为 2，它将返回 2012/10/02。而不是这个，我只想要十月

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:28:02.427

你会想使用[`DATE_FORMAT`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)：

```
DATE_FORMAT(DATE_SUB(CURDATE(), INTERVAL x MONTH), '%M') 
```

如果您要使用：

```
 select DATE_FORMAT(DATE_SUB(CURDATE(), INTERVAL 2 MONTH), '%M') Month 
```

它将`October`作为结果返回

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d41d8/4502)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:30:15.550

我假设你的意思是`DATE_SUB`而不是`DATESUB`？在任何情况下，该`MONTHNAME`功能都会做你想做的事。所以完整的表达式是`MONTHNAME(DATE_SUB(CURDATE(), INTERVAL x MONTH))`.

请注意，这并不总是英文名称——它将为您提供的语言取决于 mysql 服务器的当前语言环境。见[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_monthname](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_monthname)

# ruby-on-rails - 用户注册 Rails 和 Sorcery 后重定向到上一页

> ID：13673986
> 
> 赞同：0
> 
> 时间：2012-12-02T21:21:41.060
> 
> 标签：ruby-on-rails, sorcery

我有一个使用巫术进行用户身份验证的小型 Rails 3 应用程序。当未经身份验证的用户访问页面“A”时，除非他们登录或注册，否则他们将被限制查看页面的某些部分。

如果他们选择“注册”链接，他们将被带到一个单独的注册页面，成功注册后，他们将登录并重定向到主页。我需要将它们引导回“A”页。

这是我的 User.create 控制器：

```
def create
  @user = User.new(params[:user])
  if @user.save
    UserMailer.registration_notification(@user).deliver
    auto_login(@user)
    redirect_back_or_to root_url, :notice => "Registration successful!  You are now logged in."
  else
    render :action => :new
  end
end 
```

我假设这`redirect_back_or_to`就是魔法应该发生的地方，但我错过了一些东西——目前这只是重定向到主页。有没有一种简单的方法可以做到这一点？我是否需要将当前页面参数传递给控制器​​或其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:24:37.353

> 我需要将它们引导回“A”页。

也许这可以帮助？

```
redirect_to :back 
```

# emacs - 组织模式电子表格编程远程引用

> ID：13673987
> 
> 赞同：7
> 
> 时间：2012-12-02T21:21:50.600
> 
> 标签：emacs, spreadsheet, org-mode, remoteobject

我将预算保持在 org 模式，并且对它的简单性感到满意。然而，简单性失败了，因为我在许多单元格上执行公式；例如，我的年度汇总表每个月执行相同的抓取和计算公式。我最终在我的 +TBLFM 中有一条大线。如果我可以以编程方式将参数传递给公式，这将大大缩短。我正在寻找这样的东西，但工作：

```
| SEPT   |
| #ERROR |
#+TBLFM: @2$1=remote(@1,$tf) 
```

在其他地方，我有一个名为 SEPT 的表，它有一个名为“tf”的字段。如果我将“@1”替换为“SEPT”，则此函数有效，但这会导致我需要在公式中为每一列添加一个新条目。

有没有办法让这个工作，表本身可以指定要调用的远程表（例如我的示例中的 SEPT）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T08:51:11.133

是的，你不能用内置的来做到这一点，`remote`你需要使用`org-table-get-remote-range`. 希望这比artscan给出的答案更适合您的需求（我使用了他/她的示例）：

```
| testname1 | testname2 |
|-----------+-----------|
|         1 |         2 |
#+TBLFM: @2='(org-table-get-remote-range @<$0 (string ?@ ?1 ?$ ?1))

#+TBLNAME: testname1
|    1 |

#+TBLNAME: testname2
|    2 | 
```

注意`(string ?@ ?1 ?$ ?1)`: 这是必要的，因为在评估表格公式之前，所有替换都将首先完成。如果`"@1$1"`直接使用，则会触发替换机制，并被*此*表中第一个单元格的内容替换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T06:02:44.317

在不使用的情况下，有一些丑陋的黑客可以达到相同的效果`remote`：

1）它需要远程地址的命名变量

```
(setq eab/test-remote "@1$1") 
```

2) 它使用 elisp 表达式（来自 org-table.el）代替`remote(tablename,@1$1)`

```
(defun eab/test-remote (x)
  `(car (read
     (org-table-make-reference
      (org-table-get-remote-range ,x eab/test-remote)
      't 't nil)))) 
```

3）工作示例

```
| testname1 | testname2 |
|-----------+-----------|
|           |           |
#+TBLFM: @2='(eval (eab/test-remote @1))

#+TBLNAME: testname1
|    1 |

#+TBLNAME: testname2
|    2 | 
```

4) 结果

```
| testname1 | testname2 |
|-----------+-----------|
|         1 |         2 | 
```

# scala - 我可以将自定义 Scala TraversableView 的基础成员留空吗？

> ID：13673989
> 
> 赞同：3
> 
> 时间：2012-12-02T21:21:55.170
> 
> 标签：scala, scala-collections

我有一个树对象，它将延迟深度优先搜索实现为`TraversableView`.

```
import collection.TraversableView

case class Node[T](label: T, ns: Node[T]*)

case class Tree[T](root: Node[T]) extends TraversableView[T, Traversable[_]] {
    protected def underlying = null

    def foreach[U](f: (T) => U) {
        def dfs(r: Node[T]): TraversableView[T, Traversable[_]] = {
            Traversable(r.label).view ++ r.ns.flatMap(dfs(_))
        }
        dfs(root).foreach(f)
    }
} 
```

这非常简洁并且看起来很有效；但是，这种`underlying = null`方法让我很紧张，因为我不明白它的含义。（IntelliJ 为我写了那行。）我想它可能是正确的，因为在这种情况下，树没有底层的严格表示，但我不确定。

上面的代码是正确的，还是我需要做更多的事情`underlying`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:28:54.593

视图的用户将期望能够调用`force`以获得严格的集合。在您的实现中，调用`force`树（或树的任何转换，例如`tree.take(10).filter(pred)`等）将导致空指针异常。

这对你来说可能没问题 - 例如，你仍然可以使用 强制评估`toList`（尽管如果你走那条路，你应该遵循 DaoWen 评论中的建议）。

`underlying`但是，不应该使用的实际内容，所以有一个简单的解决方法——只需将其设置为适当类型的空集合：

```
protected def underlying = Vector.empty[T] 
```

现在，如果用户调用`tree.force`，他们将得到一个标签向量，静态类型为`Traversable[T]`.

# python - 使用 open 的 Python 版本问题

> ID：13673990
> 
> 赞同：0
> 
> 时间：2012-12-02T21:22:07.417
> 
> 标签：python

使用`open`. 我的脚本接受一个文件，执行一些计算并输出这些计算。

在我的机器上（运行 2.7.1）输出是正确的。在另一台机器（运行 2.4.6）上，我的输出全部为`0.00`. 最近我可以说，我的输入文件没有被打开。`open()`这些版本之间有区别吗？

这是我当前的开放方案的样子：

```
infile = open(filename, 'r') 
```

另一个问题：该`next(infile)`方法不再为我跳过第一行`2.6.4`。替换`next(infile)`会`lines = infile.readlines()[1:0]`影响性能吗？

编辑：废话另一台机器的版本是2.4.6。不知道我是怎么搞砸的。原来的帖子反映了我的错误，对不起。

Edit2：下面是我从文件中读取的代码：

```
 for lines in infile:
          # do stuff with lines
     infile.close() 
```

我猜这里有些东西可能在 2.4.6 和 2.7.1 之间有所不同

最终编辑：

解决了我自己的问题。next(infile) 由于某些奇怪的原因与 2.4.6 不兼容。我替换了它并正确运行了我的脚本。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:30:36.313

我不相信已经对`open`.

*关于你问题的后半部分，*

`lines = infile.readlines()[1:0]`总是`[]`，你可能需要的是 `lines = infile.readlines()[1:]`。

是的，`readlines`当 using 仅读取第一行时， using 将整个文件（准确地说是它的所有行）加载到内存中`next`（如果不这样做，则丢弃它`some_thing = next(f)`）。

如果您正在读取一个大文件，这可能会对性能产生影响。对于一个小文件，它不会有太大的区别。

# excel - 如何使用 VBA 更改 csv 文件中列的顺序？

> ID：13673992
> 
> 赞同：1
> 
> 时间：2012-12-02T21:22:28.267
> 
> 标签：excel, vba

我有 3 个 csv 文件，我必须合并，但在此之前我必须准备具有相同的列顺序。一切正常，除了我无法弄清楚输出文件中列的更改顺序。我可以选择我想要的列和其他跳过很好但如果我想交换一些怎么办？我认为在 fieldinfo 数组中放置正确的顺序可以解决问题，但没有。我想用 6 交换 8。

```
 Application.ScreenUpdating = False
    Workbooks.OpenText Filename:=Filenamenew, Origin:=xlWindows, StartRow _
    :=2, DataType:=xlDelimited, TextQualifier:=xlDoubleQuote, _
    ConsecutiveDelimiter:=False, Tab:=False, Semicolon:=False, Comma:=True, _
    Space:=False, Other:=False, FieldInfo:=Array(Array(1, 3), Array(2, 9), Array(3, 1), Array(4, 9), Array(5, 9), Array(8, 1), Array(7, 9), Array(6, 1))

    Set Wb = ActiveWorkbook
    Application.DisplayAlerts = False
    Wb.SaveAs Filename:=LBname, FileFormat:=FileFormatNum, _
    ReadOnlyRecommended:=False, _
    CreateBackup:=False
    Application.DisplayAlerts = True

    Wb.Close savechanges:=False 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T00:14:46.737

**最好**的方法是更改​​创建需要更改的 CSV 文件的任何内容的输出。我假设您出于某种原因无权访问它，因此这将完成工作：

```
Sub swapColumns(first As Integer, second As Integer)
    Dim wb As Workbook
    Dim ws As Worksheet

    Set wb = Workbooks.Open("C:\root\test.csv")
    Set ws = wb.Sheets(1)
    If first > second Then
        Dim i As Integer
        i = first
        first = second
        second = i
    ElseIf first = second Then
        Exit Sub
    End If
    ws.Columns(second).Cut
    ws.Columns(first).Insert Shift:=xlToRight
    ws.Columns(first + 1).Cut
    ws.Columns(second + 1).Insert Shift:=xlToRight
End Sub 
```

您可以使用现有代码调用此 Sub`swapColumns 6, 8`

# jquery - 仅选择跨度内的复选框

> ID：13673995
> 
> 赞同：1
> 
> 时间：2012-12-02T21:22:41.070
> 
> 标签：jquery, select

对于一个项目，我正在制作一份清单。这个想法是访问者只能选择一个复选框，我不使用单选按钮的原因是因为我需要复选框（清单）。

我遇到的问题是我无法弄清楚选择器。我有 1 个主要问题和 3 个子问题。所有的问题都是跨度的，所以我可以使它们独一无二，但我不记得如何正确选择它。

```
$('span .sub_antwoord').click(function() {
    $('span .sub_antwoord').each(function() {
        $(this)[0].checked = false;
    });
    $(this)[0].checked = true;
}); 
```

这是项目[http://jsfiddle.net/Ur4X9/](http://jsfiddle.net/Ur4X9/)的 jsFiddle如果单击复选框，您可以看到问题。我需要在每个问题中选择一个，ja 或 nee。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T21:26:08.257

不要尝试直接设置选中的属性。用这个：

```
// deselect all checked boxes
$('span .sub_antwoord:checked').prop('checked', false); 
```

这是一个工作小提琴：http: [//jsfiddle.net/Ur4X9/3/](http://jsfiddle.net/Ur4X9/3/)

### html

```
<input type="checkbox">
<input type="checkbox">
<input type="checkbox">
<input type="checkbox">
<input type="checkbox"> 
```

### JavaScript

```
$('input[type=checkbox]').click(function(){
    $('input[type=checkbox]:checked').prop('checked', false);
    $(this).prop('checked', true);
}); 
```

​</p>

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T21:29:25.500

这是你的想法吗？

```
$('span .sub_antwoord').click(function() {
   $(this).siblings('input').prop('checked',false); 
}); 
```

[http://jsfiddle.net/Ur4X9/4/](http://jsfiddle.net/Ur4X9/4/)

# c# - 如何在 Sphere 上引发 MouseClick 事件

> ID：13673998
> 
> 赞同：-1
> 
> 时间：2012-12-02T21:23:46.897
> 
> 标签：c#, events, geometry, vtk

当我单击球体时，我正在尝试使用 VTK 在 C# 中引发事件

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:10:25.147

首先你必须实现一个自定义的 InteractorStyle。在它里面的 OnLeftButtonDown()，你必须使用一个 Picker，然后选择器的 ->GetActor() 函数会告诉你你选择了哪个对象。如果此对象等于您要查找的对象，则您现在具有单击球体的条件，并且可以做任何您想做的事情。

（这是这种情况的外壳（它不会检查您单击了哪个对象，但显示了如何子类化 InteractorStyle 并使用 Picker）：[http ://www.vtk.org/Wiki/VTK/Examples/ Cxx/交互/拣货](http://www.vtk.org/Wiki/VTK/Examples/Cxx/Interaction/Picking)