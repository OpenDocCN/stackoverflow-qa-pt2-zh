# StackOverflow 问答 14584000-14584999

# android - Android AdMob 内存使用情况

> ID：14584002
> 
> 赞同：22
> 
> 时间：2013-01-29T13:24:59.710
> 
> 标签：android, memory, admob

我对**AdMob SDK**似乎使用了多少内存以及该内存实际位于何处感到困惑。让我解释。

我的应用程序有两种风格：免费和付费。免费版有 AdMob 广告，否则代码几乎相同（使用常见的 Android 库）。

我在 Nexus 4 (Android 4.2.1) 上运行应用程序并比较内存使用情况。我在设备设置 > 应用程序 > 运行中查看应用程序使用的系统内存。我还查看了 GC logcat 消息报告的 Dalvik 堆内存，并使用了 HPROF 文件。

当我运行付费版本时，我可以看到：

*   系统内存：约**16MB**
*   Dalvik 堆大小：约 10MB

当我运行免费版本时，我可以看到：

*   系统内存：约**29MB**
*   Dalvik 堆大小：约 11MB

换句话说，两个版本的 dalvik 堆大小相似。但实际使用的**系统内存要****高出 10MB 以上**！

在花时间学习内存分析 ( [http://www.youtube.com/watch?feature=player_embedded&v=_CruQY55HOk](http://www.youtube.com/watch?feature=player_embedded&v=_CruQY55HOk) ) 和查看 HPROF 文件以消除任何可能的泄漏之后，我只能看到一个结论：

**AdMob 使用的 10MB 额外系统内存实际上是本机内存，使用 malloc 分配，在 dalvik 堆之外！**

现在我想知道两件事：

1.  我相信由于免费版系统内存比付费版大10MB，因此在内存压力的情况下更容易被操作系统杀死。还是 Android 操作系统只考虑 Dalvik 堆来决定要杀死哪个应用程序？
2.  有没有办法调整 AdMob SDK 以选择允许分配多少内存？

非常感谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T02:20:46.357

AdMob 使用 WebView 加载广告。这是一个相当复杂的对象，它使用本地库，并且容易崩溃。AdMob SDK 非常努力地使其易于管理，但您无法真正控制它的工作方式。此外，内存使用量可能会因广告类型而异：HTML 文本与带有图像的横幅等。

因此，除非您愿意对 AdMob 进行二进制补丁（它不是开源的），否则您只需要忍受它即可。您可以主动删除和销毁`AdView`'s 以减少任何泄漏，但您无能为力。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-04T09:02:51.360

在使用 2 种不同的 AdMob 实现测试我的应用程序后，我发现通过 java 代码而不是 XML 实现它对应用程序来说更轻松。

**更新 1 号：**

您还可以添加自定义侦听器以在一段时间后销毁并重新创建，以便更好地处理它。服务器端还有一个参数告诉应用程序广告应该多久请求一个新广告，我不确定它是否在所有情况下都存在，但它适用于 DFP 帐户。

实施广告的一个很好的建议方法是：

```
new Handler(new Handler.Callback() {
@Override
public boolean handleMessage(Message msg) {
    if (!isBeingDestroyed) {
        final AdRequest adRequest = new AdRequest();
        final AdView adView = (AdView) findViewById(R.id.ad);
        adView.loadAd(adRequest);
    }
}).sendEmptyMessageDelayed(0, 1000); 
```

也不要忘记调用`adView.destroy()`onDestroy() 活动或当您不再需要它时！

上面的方式在[这里](http://1gravity.com/index.php?option=com_content&view=article&id=71:android-and-memory-leaks&catid=37:android&Itemid=59)提到了很多有用的内存释放！

* * *

**更新 No2：（***更新 No1*的改进）

对建议的处理程序方式的改进。使用这种方式，您可以避免（我希望）在发送延迟消息之前故意创建/销毁活动时可能堆叠的处理程序回调。如果您决定增加`1000`毫秒，则更有可能发生这种情况：

为处理程序创建一个字段：

```
private adHandler; 
```

在您的`onCreate`：

```
adHandler = new Handler(new Handler.Callback() {
    @Override
    public boolean handleMessage(Message msg) {
        if (!isBeingDestroyed) {
            final AdRequest adRequest = new AdRequest();
            final AdView adView = (AdView) findViewById(R.id.ad);
            adView.loadAd(adRequest);
        }
        return false;
    }
});
adHandler.sendEmptyMessageDelayed(0, 1000); 
```

在您`onDestroy`不要忘记“释放”处理程序：

```
adHandler.removeCallbacksAndMessages(null); 
```

null 删除任何回调见[doc](http://developer.android.com/reference/android/os/Handler.html#removeCallbacksAndMessages%28java.lang.Object%29)

# c# - 安装在新计算机上后如何在 C# 应用程序中包含数据库？

> ID：14584003
> 
> 赞同：0
> 
> 时间：2013-01-29T13:25:00.553
> 
> 标签：c#, .net, sql, visual-studio-2012

我制作了一个基于 C# 的应用程序，它使用 SQLCommand、SQLConnection 和 SQLAdapter（SQL 对象）以及名为“base1”的数据库。问题是，SQL 与 Visual Studio 一起安装在我的 PC 中，因此 App 将自身连接到 base1 以进行数据事务处理没有问题。

现在，我想设置这个应用程序。我想在此设置中添加“base1”，以便在新用户安装此应用程序时，应用程序可以轻松连接到 base1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:32:46.747

只需简单地使用[SQL Server CE（精简版）](http://en.wikipedia.org/wiki/SQL_Server_Compact)。这意味着您只有 db 文件 (.mdf) 和两个 dll 文件（包含 SQL Server CE 库）附加到您的应用程序。当然，那你应该使用 SqlCeConnection 而不是 SqlConnection 类等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:27:48.520

请参阅这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/dd981032(v=sql.100).aspx)，了解如何将 SQL Server 嵌入到您的应用程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:50:53.200

您可以使用 SQLITE 使您的应用程序可移植。否则，您必须将 SQlserver 安装添加到您的应用程序安装中。但是这种方法需要在新计算机上进行每次安装的配置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T13:29:27.573

根据您的需要，您可以使用每次与 VS 一起安装的 LocalDB。因此，您的计算机上将始终拥有一个作为 (localdb)/v11.0 的服务器。

[http://msdn.microsoft.com/en-us/library/hh510202.aspx](http://msdn.microsoft.com/en-us/library/hh510202.aspx)

# java - How can I get inside parentheses value in a string?

> ID：14584018
> 
> 赞同：49
> 
> 时间：2013-01-29T13:25:40.500
> 
> 标签：java, android

How can I get inside parentheses value in a string?

```
String str= "United Arab Emirates Dirham (AED)"; 
```

I need only AED text.

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-01-29T13:40:05.437

Compiles and prints "AED". Even works for multiple parenthesis:

```
import java.util.regex.*;

public class Main
{
  public static void main (String[] args)
  {
     String example = "United Arab Emirates Dirham (AED)";
     Matcher m = Pattern.compile("\\(([^)]+)\\)").matcher(example);
     while(m.find()) {
       System.out.println(m.group(1));    
     }
  }
} 
```

The regex means:

*   `\\(`: character `(`
*   `(`: start match group
*   `[`: one of these characters
*   `^`: not the following character
*   `)`: with the previous `^`, this means "every character except `)`"
*   `+`: one of more of the stuff from the `[]` set
*   `)`: stop match group
*   `\\)`: literal closing paranthesis

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-29T13:42:10.050

> i can't get idea how to split inside parentheses. Would you help highly appreciated

When you split you are using a reg-ex, therefore some chars are forbidden.

I think what you are looking for is

```
str = str.split("[\\(\\)]")[1]; 
```

This would split by parenthesis. It translates into split by `(` or `)`. you use the double `\\` to escape the paranthese which is a reserved character for regular expressions.

If you wanted to split by a `.` you would have to use `split("\\.")` to escape the dot as well.

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-01-29T13:36:04.727

This works...

```
String str = "United Arab Emirates Dirham (AED)";
String answer = str.substring(str.indexOf("(")+1,str.indexOf(")")); 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-10-03T20:34:40.320

I know this was asked over 4 years ago, but for anyone with the same/similar question that lands here (as I did), there is something even simpler than using regex:

```
String result = StringUtils.substringBetween(str, "(", ")"); 
```

In your example, `result` would be returned as "AED". I would recommend the StringUtils library for various kinds of (relatively simple) string manipulation; it handles things like null inputs automatically, which can be convenient.

Documentation for substringBetween(): [https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#substringBetween-java.lang.String-java.lang.String-java.lang.String-](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#substringBetween-java.lang.String-java.lang.String-java.lang.String-)

There are two other versions of this function, depending on whether the opening and closing delimiters are the same, and whether the delimiter(s) occur(s) in the target string multiple times.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-29T13:28:45.090

You could try:

```
String str = "United Arab Emirates Dirham (AED)";
int firstBracket = str.indexOf('(');
String contentOfBrackets = str.substring(firstBracket + 1, str.indexOf(')', firstBracket)); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-29T13:40:49.117

I can suggest two ways:

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Test {
    public static void main(String[] args){
        System.out.println(getParenthesesContent1("United Arab Emirates Dirham (AED)"));
        System.out.println(getParenthesesContent2("United Arab Emirates Dirham (AED)"));
    }

    public static String getParenthesesContent1(String str){
        return str.substring(str.indexOf('(')+1,str.indexOf(')'));
    }

    public static String getParenthesesContent2(String str){
        final Pattern pattern = Pattern.compile("^.*\\((.*)\\).*$");
        final Matcher matcher = pattern.matcher(str);
        if (matcher.matches()){
            return matcher.group(1);
        } else {
            return null;
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-29T13:30:54.220

yes, you can try different techniques like using

```
 string.indexOf("("); 
```

to get the index and the use

```
string.substring(from, to) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-29T13:32:00.993

Using regular expression:

```
String text = "United Arab Emirates Dirham (AED)";
Pattern pattern = Pattern.compile(".* \\(([A-Z]+)\\)");
Matcher matcher = pattern.matcher(text);
if (matcher.matches()) {
    System.out.println("found: " + matcher.group(1));
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-28T10:44:10.503

The answer from @Cœur is probably correct, but unfortunately it did not work for me. I had text similar to this:

```
mrewrwegsg {text in between braces} njanfjaenfjie a {text in between braces} 
```

It was way larger, but let's consider only this short part.

I used this code to get each text between bracelet and print it to the console:

```
Pattern p = Pattern.compile("\\{.*?\\}");
Matcher m = p.matcher(test);
while(m.find()) {
      System.out.println(m.group().subSequence(1, m.group().length()-1));
} 
```

It might be more complicated than @Cœur answer, but maybe there is someone like me, who can find my answer useful.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-22T23:24:46.290

The below method can split any String inside any bracket like '(. {. [, ), }, ]'.

```
public String getStringInsideChars(String original, char c){
    this.original=original;
    original = cleaning(original);
    for(int i = 0; i < original.length(); i++){
        if(original.charAt(i) == c){
            String temp = original.substring(i + 1, original.length());
            i = original.length();//end for
            for(int k = temp.length() - 1; k >= 0; k--){
                if(temp.charAt(k) == getReverseBracket(c)){
                    original = temp.substring(0, k);
                    k = -1; // end for
                }
            }
        }
    }
    return original;
}

private char getReverseBracket(char c){
    return c == '(' ? ')' :
           c == '{' ? '}' :
           c == '[' ? ']' :
           c == ')' ? '(' :
           c == '}' ? '{' :
           c == ']' ? '[' : c;
}

public String cleaning(String original) {
    this.original = original;
    return original.replaceAll(String.valueOf('\t'), "").replaceAll(System.getProperty("line.separator"), "");
} 
```

You can use it like below :

```
getStringInsideChars("{here is your string}", '{') 
```

it will return "here is your string"

# iphone - 异步网络请求半崩溃应用

> ID：14584020
> 
> 赞同：2
> 
> 时间：2013-01-29T13:25:42.163
> 
> 标签：iphone, ios, objective-c

所以每当我的 ViewController 被加载时，我都会上传到服务器。不过好像有问题。当有大量异步请求时，它可能会使应用程序半崩溃。我的意思是请求不会通过，并且没有其他请求（在另一个线程上）继续。最重要的是，键盘非常滞后（我知道很奇怪）。无论如何，考虑到其他网络请求不会因此而被发送，这是一个严重的问题。我觉得奇怪的是上传请求的数量与下载请求的数量相同（上传甚至不做任何事情，它们只是发出一个正常的 http 请求），但下载请求在任何数量下都可以正常工作。这是我的代码：

```
- (void)serverUploadAll:(myEntity *)send
{  
    NSMutableString *urlString = [[NSMutableString alloc] initWithString:ServerApiURL];
    NSString *addTargetUrl = [NSString stringWithFormat:@"/addtarget?deviceToken=%@&appVersion=%@&targetId=%@", postToServer.deviceToken, postToServer.appVersion, send.Id];
    [urlString appendString:addTargetUrl];

    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    [NSURLConnection sendAsynchronousRequest:request queue:queueTwo completionHandler:^(NSURLResponse *response, NSData *data, NSError *error){
        //NSLog(@"response=%@", response);
        //NSLog(@"data=%@", data);
        //NSLog(@"error=%@", error);
    }];

} 
```

上面的代码被称为循环数据库，当有大量调用时会出现问题，即120+。我的下载请求实际上是使用 AFNetworking 完成的，所以也许这就是它们高效工作的原因。无论如何，总而言之，为什么当多次调用上述代码时它会卡住并停止？

感谢您的帮助，非常感谢。
问候，
迈克

**更新：**因此，多亏了 runmad 的出色回答，我正在使用 AFNetworking 方法，但是，它会因这个错误而崩溃`-[AFHTTPRequestOperation _propertyForKey:]: unrecognized selector sent to instance`。我不明白为什么这不起作用，这是我的代码：

```
- (void)cycleThroughEntries
{
MyEntity *myEntity;
NSMutableArray *urlRequests;
urlRequests = [[NSMutableArray alloc] init];

for (id i in fetchedResultsController.fetchedObjects) {
    myEntity = i;
    NSMutableString *urlString = [[NSMutableString alloc] initWithString:ServerApiURL];
    NSString *addTargetUrl = [NSString stringWithFormat:@"/addtarget?deviceToken=%@&appVersion=%@&targetId=%@", postToServer.deviceToken, postToServer.appVersion, myEntity.Id];
    [urlString appendString:addTargetUrl];
    //NSLog(@"URL sent is: %@", urlString);
    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    AFHTTPRequestOperation *requestOperation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    [urlRequests addObject:requestOperation];
}

AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@""]];

[client enqueueBatchOfHTTPRequestOperationsWithRequests:urlRequests
                                        progressBlock:^(NSUInteger numberOfCompletedOperations, NSUInteger totalNumberOfOperations) {

                                            NSLog(@"%d / %d", numberOfCompletedOperations, totalNumberOfOperations);

                                        }
                                        completionBlock:^(NSArray *operations) {
                                            NSLog(@"All Done!");
                                        }];

} 
```

不完全确定出了什么问题，因此将不胜感激。谢谢。

**更新 2：**已修复。我不应该制作一个数组`AFHTTPRequestOperations`，而只是正常的`NSURLRequests`。问题解决了！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:55:35.543

您可以建立多少异步连接是有限制的——即使它们发生在后台线程上。同时进行 120 多个网络调用听起来有点疯狂，特别是如果它们包含比 GET 请求更长的上传时间。

我建议您考虑重写您需要请求/上传到服务器的内容以减少请求数量。您需要确保所有呼叫不会同时发生，并且您会推迟大多数呼叫，直到其他呼叫完成。

输入`NSOperationQueue`...

我会创建一个管理器类来处理您的所有请求。在这个类中，您创建一个`NSOperationQueue`可以继续向其添加请求的位置。[这是一个很好的教程](http://www.cimgf.com/2008/02/16/cocoa-tutorial-nsoperation-and-nsoperationqueue/)。您可以设置并发请求的数量，NSOperationQueue 将确保队列中的下一个请求等到当前正在运行的请求完成。它通过网络为您做了很多繁重的工作。

您也可以考虑查看[AFNetworking](https://github.com/AFNetworking/AFNetworking)以`NSOperationQueues`将所有网络呼叫排队，这样它们就不会同时发生。

在 AFNetworking 中，`AFHTTPClient`您可以使用以下方法，具体取决于您设置请求的方式：

```
- (void)enqueueBatchOfHTTPRequestOperationsWithRequests:(NSArray *)urlRequests
                                          progressBlock:(void (^)(NSUInteger numberOfFinishedOperations, NSUInteger totalNumberOfOperations))progressBlock
                                        completionBlock:(void (^)(NSArray *operations))completionBlock; 
```

这应该让你开始:) 祝你好运。

**更新**

如果需要，您还可以将操作添加到 AFNetworking 操作队列。如果它当前尚未运行，您只需确保启动它。这样，您就可以在不同时间从应用程序的其他部分添加其他请求。您可以随时检查是否有任何操作正在运行/在队列中，令人敬畏的是，它允许您轻松取消任何正在运行的操作。可以在[这里](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFHTTPClient.m#L183)找到。

# c# - 单个类上同一接口的多个实现的替代方案

> ID：14584027
> 
> 赞同：0
> 
> 时间：2013-01-29T13:25:59.900
> 
> 标签：c#, interface, implementation, webforms, facet

假设有一个通用的用户页面控件，它提供操作并在大多数应用程序页面上重用。常见的操作，如：保存、取消、重置、发送等。目前大约有 10 个。

特定的动作状态通常但不一定取决于页面上显示的实体及其状态。在创建新实体实例的情况下，可以显示和启用*保存*和*取消。*但是，当我们要编辑现有的*Save*、*Cancel*和*Reset*时，可能会主动显示操作。

## 动作公共控件与页面之间的通信

由于这个带有动​​作的通用控件是状态解耦的，并且不知道页面的上下文（或实体类型及其状态），我决定给它注入钩子，这样页面就可以提供通用控件将使用的动作按钮获取器.

我没有定义事件和委托，而是决定做一个通常相同场景的简化类型。我刚刚使用了`Func<bool>`属性，但它们可以很容易地转换为事件/代表。这仍然是它们目前的定义方式（*发送*操作的示例）：

```
private Func<bool> DefaultState = () => false;

private Func<bool> isSendVisible;
public Func<bool> IsSendVisible
{
    private get { return isSendVisible ?? DefaultState; }
    set { isSendVisible = value; }
}

private Func<bool> isSendEnabled;
public Func<bool> IsSendEnabled
{
    private get { return isSendEnabled ?? DefaultState; }
    set { isSendEnabled = value; }
} 
```

问题是我在接口中定义了这几个属性：

```
public interface ISendActionProvider
{
    Func<bool> IsSendVisible { set; }
    Func<bool> IsSendEnabled { set; }
} 
```

我的普通控件实现了这个接口（以及其他动作的接口），但是其他控件（甚至页面本身）可以提供相同的接口，因此可以在多个地方显示相同的按钮，并重用相同的动作状态机制。页面只需在初始化期间将其 getter 绑定到提供程序，以便操作提供程序可以适当地设置操作的状态。

## 问题

问题是，对于每一个新动作，我都必须为其添加相同的接口和实现，这会导致相当多的半重复代码。

如果我可以有一个接口并为每个操作实现它，那就太好了，这样它就可以由一个类（操作提供程序类 - 在我的例子中提供这些操作的公共控件）实现多次。这可以在 C# 中工作的唯一方法是拥有一个通用接口，然后根据需要提供尽可能多的实现。但是我没有区分泛型类型来提供多个泛型接口实现。

```
public interface IActionProvider // multiple inplementations?
{
    Func<bool> IsActionVisible { set; }
    Func<bool> IsActionEnabled { set; }
} 
```

实现的工作方式（如上所示）是每个动作都定义了其默认行为，但特定页面可以通过为特定动作提供自己的 getter 来覆盖它以提供它们的状态。

## 我必须整合我的代码有哪些可能性？

我想要的是某种可以在初始化绑定期间调用的通用属性提供程序：

```
(provider as IActionProvider<TSend>).IsActionVisible<TSend> = this.IsSendVisible; 
```

但如前所述，我没有如此区分的泛型类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:27:44.623

## 一种可能的解决方案

> ***注意**：我自己用一个我不太喜欢但可以满足要求的可能解决方案来回答这个问题。我还在等待更好的建议。*

我可以只拥有一个定义稍有不同的接口，而不是多个接口及其实现：

```
public interface IActionProvider
{
    void SetVisibleGetter(ActionType type, Func<bool> getter);
    void SetEnabledGetter(ActionType type, Func<bool> getter);
} 
```

然后实现可以使用某种字典来处理各个动作类型：

```
private IDictionary<ActionType, Func<bool>> isActionVisible = new Dictionary<ActionType, Func<bool>> {
    { ActionType.Cacel, AlwaysFalse }
    { ActionType.Send, AlwaysFalse },
    ...
};

public void SetVisibleGetter(ActionType type, Func<bool> getter)
{
    this.isActionVisible[type] = getter ?? this.isActionVisible[type];
}

... 
```

然后在需要设置动作状态的动作提供者控件中使用它，如下所示：

```
linkSend.Visible = this.isActionVisible[ActionType.Send](); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:51:12.157

您可以提供默认实现并使用继承来覆盖默认实现。

例如

```
public class SubmitActionProvider:ActionProvider
{        
    public override Func<bool>  IsActionVisible
    {
         get 
         { 
            Console.WriteLine("submit");
                  return null;
         }
    }
}

public class CancelActionProvider : ActionProvider
{
    public override Func<bool> IsActionVisible
    {
        get
        {
            Console.WriteLine("cancel");
            return null;
        }
    }
}

public class ActionProvider
{
    public virtual Func<bool> IsActionVisible { get { Console.WriteLine("Default implementation"); return null; } }
    public virtual Func<bool> IsActionEnabled { set { } }
} 
```

# android - 为什么我从下面的代码中得到这个 IOException？

> ID：14584028
> 
> 赞同：1
> 
> 时间：2013-01-29T13:26:01.860
> 
> 标签：android, file, exception, bitmap

我有我的`bitmap`和`I want to convert my bitmap to save as image in another new file by below code.`

**注意：**它在除 Galaxy S3 之外的所有设备上都能正常工作。任何人都可以帮助我使此代码在 S3 中可用。我总是在转换为新文件时得到这个 Toast。任何人都知道可能会发生什么问题。

```
Bitmap photo = (Bitmap) extras.get("data");

                selectedImagePath = String.valueOf(System.currentTimeMillis())
                        + ".jpg";

                Log.i("TAG", "new selectedImagePath before file "
                        + selectedImagePath);

                File file = new File(Environment.getExternalStorageDirectory(),
                        selectedImagePath);

                try {
                    file.createNewFile();
                    FileOutputStream fos = new FileOutputStream(file);
                    photo.compress(Bitmap.CompressFormat.PNG, 95, fos);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    Toast.makeText(this,
                            "Sorry, Camera Crashed-Please Report as Crash A.",
                            Toast.LENGTH_LONG).show();
                } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:29:20.093

存储可能未处于要写入的状态，发生这种情况的原因有很多。您应该[`getExternalStorageState`](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageState%28%29)在访问外部存储之前进行检查。即使它没有在其他设备上发生，它*也可能*发生，所以最好提防它。

如果外部存储是，并且您的问题仍然存在，您可以通过添加到您的或日志来查看`MEDIA_MOUNTED`导致异常的原因，从而更好地处理正在发生的事情。`e.getMessage()``Toast`

您似乎还使用顶级目录来存储文件。这不会导致技术问题，但最好为您的应用程序创建一个子目录并在其中存储文件。从[`getExternalStorageDirectory`](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)文档——

> 应用程序不应该直接使用这个顶级目录，以免污染用户的根命名空间。

# sql-server - 如何在 ADODB 连接中模拟另一个 Windows 登录？

> ID：14584031
> 
> 赞同：0
> 
> 时间：2013-01-29T13:26:14.043
> 
> 标签：sql-server, iis, asp-classic

如何通过 ADODB.Connection 对象使用一组指定的 Windows 凭据连接到 MS SQL Server？

例子：

```
Dim oConn  
Set oConn = CreateObject("ADODB.Connection")
Dim oRs
Set oRs = CreateObject("ADODB.Recordset")
Dim strConnection
Dim strSQL
strSQL = "SELECT * from Computer WHERE DeviceName = N'myDevice'"

oConn.Provider = "SQLOLEDB.1"
oConn.Properties("User ID") = "myDomain\myUser" 
oConn.Properties("Password") = "myPassword" 
oConn.Properties("Initial Catalog") = "myDB"
oConn.Properties("Data Source") = "mySQLServer"
oConn.Open 
```

如果我这样做，那么它会失败并出现以下错误：

```
Microsoft OLE DB Provider for SQL Server error '80040e4d' 

Login failed for user 'myDomain\myUser'. 
```

检查 SQL Server 日志显示此错误：

```
Login failed for user 'myDomain\myUser'. Reason: Could not find a login matching the name provided. [CLIENT: <IP>] 
```

帐户“myDomain\myUser”可以访问 SQL Server，因为它是在服务器上具有“sysadmin”权限的组的成员。我可以使用相同的用户名 RDP 到 SQL Server 并成功打开 Management Studio 并管理 SQL Server。

我基本上想要实现的是使用集成安全性，因为我通过 IIS 上的网页运行它，您必须使用 Active Directory 进行身份验证才能访问。身份验证部分正在工作，`Request.ServerVariables("AUTH_USER")`并将显示正确的用户名。

如果我将“用户 ID”和“密码”部分替换为，`oConn.Properties("Integrated Security") = "SSPI"`则会出现以下错误：

```
Microsoft OLE DB Provider for SQL Server error '80040e4d' 

Login failed for user 'NT AUTHORITY\ANONYMOUS LOGON'. 
```

哪个不是我提供的凭据？

我怎样才能使这项工作？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:51:32.750

有几点值得注意。如果您尝试使用 Windows 域帐户登录，那么您可能正在尝试使用受信任的连接。您需要将 IIS 配置为不允许匿名访问并打开集成 Windows 身份验证（这可能会有所不同，具体取决于您安装的 IIS 版本和操作系统）。

查看以下连接字符串，看看它们是否没有帮助（这些可能会有所不同，具体取决于您使用的数据库 - 只需 google 即可）：

使用登录的用户凭据

```
strConn = "Driver={SQLServer};Server=your_server_name;Database=your_database_name;Trusted_Connection=yes;"
Set cnt = Server.CreateObject("ADODB.Connection")
cnt.ConnectionString= strConn 
```

使用 SQL Server 用户名和密码（不是域名和密码）

```
strConn = "Driver={SQL Server};Server=mySQLServer;Database=myDB;uid=someUser;pwd=somePass"
Set cnt = Server.CreateObject("ADODB.Connection")
cnt.ConnectionString= strConn 
```

祝你好运。

# android - 我正在尝试在图像列表视图中动态显示图像预览，但每次都得到空位图

> ID：14584032
> 
> 赞同：0
> 
> 时间：2013-01-29T13:26:16.410
> 
> 标签：android, bitmap

我正在尝试在图像列表视图中动态显示图像预览，但每次都得到空位图。

```
File f1 = new File("/mnt/sdcard/DCIP/myImage.jpg");
Bitmap bitMap = BitmapFactory.decodeFile(f1.getAbsolutePath());
 /* here bitMap becomes null */
imageView.setImageBitmap(bitMap); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:30:38.217

Don't use fixed SDCard url, its not same in every Android devices.

For e.g.

```
/mnt/sdcard/
/sdcard 
```

Instead use [getExternalStorageDirectory()](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29).

For example:

```
String baseDir = Environment.getExternalStorageDirectory().getAbsolutePath(); 
```

# java - 具有许多客户端的 RMI 服务器集群

> ID：14584034
> 
> 赞同：1
> 
> 时间：2013-01-29T13:26:27.310
> 
> 标签：java, cluster-computing, rmi

我对我的系统设计有疑问。我搜索了问题，但找不到相同的情况。所以目前我的系统有 1 台服务器和多个（目前 300 多个）与 RMI 连接的客户端。由于完整性问题，我需要使该系统安全失效，因此我需要另一台服务器。我现在不知道如何为此配置我的应用程序，但是在这样做的同时我想知道我是否可以在负载平衡的情况下将服务器端集群？这两个服务器当然是不同的地方，不同的IP地址，它们也是综合机器。

例如，当客户端发出请求时，它会向更多可用的请求发出请求。

我搜索了外部解决方案，但我对这些东西很陌生。您也可以对它们提出建议吗？

我很欣赏这些回应。如果有什么不清楚的地方问，我会尽可能地清除它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:43:54.937

RMI/JRMP 不以任何形式或形式支持它，但具有合适故障转移 ORB 的 RMI/IIOP 可能。

# java - 为什么它不会在列表中编译负数

> ID：14584043
> 
> 赞同：-2
> 
> 时间：2013-01-29T13:26:35.480
> 
> 标签：java, list, set

它不断让我犯非法字符的错误。将列表的元素重新排列为升序排序，并从列表中删除所有重复值

```
 import java.util.*;

public class Excerice_11point5{
    public static void main (String [] args){
        Set<Integer> tal = new TreeSet<Integer>();
        tal.add(7);
        tal.add(4);
        tal.add(–9);
        tal.add(4);
        tal.add(15);
        tal.add(8);
        tal.add(27);
        tal.add(7);
        tal.add(11);
        tal.add(–5);
        tal.add(32);
        tal.add(–9);
        tal.add(–9);

        sortAndRemoveDuplicates(tal);

    }
    public static void sortAndRemoveDuplicates(Set<Integer> tal){
        System.out.println(tal);
    }   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:29:31.630

您确定负号 (-)*是*一个简单的破折号吗？您是否从（例如）Word 文档或 Excel 电子表格中复制/粘贴了这个并复制了一个看起来像标准连字符但不是的符号？

您可以使用[od](http://linux.about.com/library/cmd/blcmdl1_od.htm)检查文件中的内容，但也许最简单的方法是重新键入破折号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T13:29:47.510

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:29:55.683

# ruby-on-rails - Rails 3.2，处理损坏的请求体 (MultiJson::DecodeError)

> ID：14584044
> 
> 赞同：3
> 
> 时间：2013-01-29T13:26:41.657
> 
> 标签：ruby-on-rails, ruby, json, rack

我正在开发 Rails 3.2.11 应用程序（MRI 1.9.3）。
其中一部分是接收带有 JSON 序列化主体的 POST 请求的 Web 服务。
一切正常，但我希望它能够适应格式错误的请求，例如无效的 JSON。

现在，如果它接收到一个带有 - 比如说 - 缺少逗号的 JSON，它将返回一个 500 错误，并带有一个 HTML 响应，其中包含默认的 rails 错误视图（加上在 dev 中的回溯）。
我想自定义它以返回带有错误信息的 JSON 或 XML 响应。

错误是`MultiJson::DecodeError`，我知道我可以[`rescue_from`](http://guides.rubyonrails.org/action_controller_overview.html#rescue_from)在 ApplicationController 中捕获异常......但它似乎不起作用。
就像错误发生在正常请求流程**之外一样。**

这是我的代码（一旦我开始工作，我将用更多数据扩展错误消息）：

```
class ApplicationController < ActionController::Base
  #protect_from_forgery
  rescue_from MultiJson::DecodeError do |exception|
    @response = { :error => "the request body was not acceptable" }
    respond_to do |format|
        format.html { redirect_to :root, notice: "invalid params" }
        format.xml { render :xml => @response, status: 400 }
        format.json { render :json => @response, status: 400 }
    end
  end
end 
```

这是回溯：

```
MultiJson::DecodeError (795: unexpected token at '{
    "json_with_missing_comma" : {
        "foo" : "qqqqqqqqqqqqqqq"
        "bar" : "aaaaaaaaaaaaaa"
    }}'):
  json (1.7.6) lib/json/common.rb:155:in `parse'
  json (1.7.6) lib/json/common.rb:155:in `parse'
  multi_json (1.5.0) lib/multi_json/adapters/json_common.rb:7:in `load'
  multi_json (1.5.0) lib/multi_json.rb:96:in `load'
  activesupport (3.2.11) lib/active_support/json/decoding.rb:15:in `decode'
  actionpack (3.2.11) lib/action_dispatch/middleware/params_parser.rb:47:in `parse_formatted_parameters'
  actionpack (3.2.11) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/cookies.rb:341:in `call'
  activerecord (3.2.11) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `_run__1562301902235545482__call__1964551201027599208__callbacks'
  activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.11) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.11) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.11) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.11) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.11) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.11) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.11) lib/rails/engine.rb:479:in `call'
  railties (3.2.11) lib/rails/application.rb:223:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.11) lib/rails/rack/log_tailer.rb:17:in `call'
  thin (1.5.0) lib/thin/connection.rb:81:in `block in pre_process'
  thin (1.5.0) lib/thin/connection.rb:79:in `catch'
  thin (1.5.0) lib/thin/connection.rb:79:in `pre_process'
  thin (1.5.0) lib/thin/connection.rb:54:in `process'
  thin (1.5.0) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.0) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.0) lib/eventmachine.rb:187:in `run'
  thin (1.5.0) lib/thin/backends/base.rb:63:in `start'
  thin (1.5.0) lib/thin/server.rb:159:in `start'
  rack (1.4.4) lib/rack/handler/thin.rb:13:in `run'
  rack (1.4.4) lib/rack/server.rb:268:in `start'
  railties (3.2.11) lib/rails/commands/server.rb:70:in `start'
  railties (3.2.11) lib/rails/commands.rb:55:in `block in <top (required)>'
  railties (3.2.11) lib/rails/commands.rb:50:in `tap'
  railties (3.2.11) lib/rails/commands.rb:50:in `<top (required)>'
  script/rails:6:in `require'
  script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T21:59:08.383

gem：[https](https://github.com/kares/request_exception_handler) ://github.com/kares/request_exception_handler以及以下几行对我有用。

在应用程序控制器中：“rescue_from 'REXML::ParseException' do |exception| render :text => "Bad Request: XML parse exception", :status => 422 end

rescue_from 'MultiJson::DecodeError' 做 |异常| render :text => "Bad Request: JSON parse exception", :status => 422 end "

# linux - Bash 脚本日期错误

> ID：14584051
> 
> 赞同：0
> 
> 时间：2013-01-29T13:26:53.750
> 
> 标签：linux, bash, date

我正在尝试在 bash 脚本中获取旧日期，但它会引发此错误

```
"./bkc.sh: line 10: 20130122: command not found" 
```

这就像尝试将结果日期用作函数而不是将值分配给 OLDATE var。

这是我的代码：

```
OLDATE= `date -d '7 days ago' +'%Y%m%d'` 
```

谁能帮我 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:29:39.070

只需删除 OLDATE 和命令之间的空格即可。

Bash 不希望在赋值时使用空格

# sql - Oracle 范围查询

> ID：14584062
> 
> 赞同：0
> 
> 时间：2013-01-29T13:27:16.317
> 
> 标签：sql

我在这个网站上找到了这个查询（虽然稍微修改了一下），它工作正常。但是，结果集没有显示 count(*) 为 0 的范围间隔。我尝试将 NVL 函数与左关节一起使用，但无法使其工作。有任何想法吗？（见下面的查询）

谢谢

```
select
    count(*) "# PRs Created",to_char(date_created, 'yyyy-mm-dd') as "Date Created",
    to_char(date_created, 'hh24') || ':00:00 - ' || to_char(date_created + 1/24, 'hh24') || ':00:00' RANGE 
    FROM pr
    where date_created between to_date(SYSDATE - 1000)and to_date(SYSDATE)
    and 1 * to_char(date_created, 'hh24') between 0 and 24
    group by to_char(date_created, 'hh24'), to_char(date_created + 1/24, 'hh24'),to_char(date_created, 'yyyy-mm-dd')
    order by to_char(date_created, 'yyyy-mm-dd'), RANGE  desc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:21:53.613

对于不存在的间隔，您不会得到零条目，因为没有什么可以计算的。要使其正常工作，您需要外部连接到日期时间表：

```
with dates as (
  select trunc(sysdate)-1000 + (rownum-1)/24 dt
  from   dual
  connect by level <= 1000 * 24
)
select dates.dt, count(pr.date_created) from pr, dates
where  trunc(pr.date_created (+), 'hh24')= dates.dt
group  by dates.dt; 
```

该`with`子句创建一个数据“表”，其中包含从`sysdate-1000`今天开始到现在的每一小时（查询中的条件）。您需要`pr`对此进行外部连接才能查看没有条目的间隔的行`pr`。

# html - 如何使用 JSP 调用图像路径

> ID：14584066
> 
> 赞同：3
> 
> 时间：2013-01-29T13:27:38.457
> 
> 标签：html, jsp, servlets

我在 web 文件夹下有我的图像。完整路径为“web/images/logo1.jpg”。我的 jsp 页面位于 web/WEB-INF/jsp。如何正确查看我的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:07:07.143

在指定图像路径时，我们有两个选项：提供绝对路径或相对路径。假设您有一个 webapp ROOT，即所有代码都在 webapps/ROOT 中（ROOT 是 TOMCAT 中的默认 webapp，即 webapps/ROOT/first.html 中的文件可以在浏览器上使用[http://example.com:8080/first访问.html](http://example.com:8080/first.html)。）

或者，如果您有一个 webapp 示例；然后可以使用[http://example.com:8080/example/first.html访问 webapps/example/first.html](http://example.com:8080/example/first.html)

因此，假设您有以下文件 webapps/ROOT/jsp/first.jsp ；和 webapps/ROOT/images/logo1.jpg

在 logo1.jsp 中，您可以按如下方式访问 jpg：

```
<img src="/images/logo1.jpg" /> (absolute path; because it starts with a slash ; this slash is mapped to the starting directory)
<img src="../images/logo1.jpg" /> (relative path; because it DOES NOT starts with a slash ; you have to give path relative to location of your jsp ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T11:11:17.453

您已经传递了项目的相对 url，您可以使用 getContextRoot() 传递，如下所示：

/images/logo1.jpg"/>

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-01-29T13:42:10.573

为什么你的jsp在WEB-INF目录下？有点奇怪？我通常对我的 jsp 文件使用 /web/jsp 之类的东西。WEB-INF 应该专门用于 web.xml 和此类 .. 至少我是这么认为的 :)

无论如何，Web 根目录中的任何内容都可以作为 /foldername/file.ext 访问

在你的情况下，你应该能够使用

```
<img src="/images/logo1.jpg" /> 
```

# visual-studio-lightswitch - 如何将 Lightswitch 2012 应用程序部署为桌面+本地 - 用户连接字符串

> ID：14584071
> 
> 赞同：2
> 
> 时间：2013-01-29T13:27:47.410
> 
> 标签：visual-studio-lightswitch, lightswitch-2012

在 Lightswitch 中，可以在同一台计算机上使用本地数据库在桌面上发布应用程序。在 Lightswitch 2012 中，发布向导要求提供有效的用户连接字符串。在 Lightswitch 2011 中，这更容易，因为*不需要*此输入。在这种情况下，很容易测试登录以及用户和角色管理。

什么是“有效的用户连接字符串”，为什么我现在（与 LS11 相比）必须输入这个，从哪里获取有关*我*正确的用户连接字符串的信息？

提前致谢

PS：当然我已经安装了MS SQL Server 2012，但是我又重新安装了它，还有SqllocalDB。但它仍然是一样的。当我发布应用程序并尝试启动它时，它会说：“与数据库通信时出错”。
![在此处输入图像描述](../Images/6827ec3d474fd431e7b38a516f38598d.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T15:38:39.453

如果您的计算机上安装了 SQL Express，则服务器名称应为“.\SQLExpress”

如果您只安装了 LocalDB，则服务器名称应为“(LocalDB)\v11.0”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T11:49:22.243

在**Lightswitch 发布应用程序向导中**

*   在*应用程序类型*下，“客户端”选择“桌面”
*   在*应用服务器配置*下选择“区域设置”
*   在“*发布输出*”下输入将复制您的应用程序和设置的目录，例如输入“C:\MyProjectname\”并选择“创建脚本文件以安装和配置数据库”
    注意：（出于我未知的原因）“直接发布到现在的数据库”将无法正常工作
*   在*数据库连接*下单击
    “连接属性”对话框中的按钮 [...]，对于服务器名称，输入“.\SQLEXPRESS”
    ，用户连接现在可能如下所示：
    “数据源=.\SQLExpress;Integrated Security=True”
*   在*数据库连接*下还检查“创建 SQL 数据库脚本”
    并选择“创建具有以下名称的新数据库”并留下建议（项目名称）

-> 点击“发布”按钮

转到您为应用程序定义的目录（“C:\MyProjectname\”）并启动 setup.exe。
数据库“ApplicationDatabase.mdf”将在文件夹“Application Files\bin\Data”下创建。
现在您可以启动您的应用程序并测试登录以及用户和角色管理屏幕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T00:18:03.860

在 lightswitch 2012 中，当您使用发布向导时，无论应用程序类型如何，您都需要指定两个连接字符串：

1.  用户连接：应用程序将使用此连接从数据库读取和写入数据。事实上，这是与生产数据库的连接。如果您在应用程序中启用了内置安全性，则目标数据库也将包含与安全性相关的表。您必须指定一个有效的连接字符串。
2.  数据库架构：如果这是您第一次发布此应用程序，或者您有数据库更改，您希望包含在此版本中，您可以通过指定数据库连接字符串将数据库架构发布到数据库服务器服务器。Lightswitch 将为您创建或更新生产数据库。此选项不是强制性的，因为您可能已经准备好您的数据库。

这是一个链接，可以进一步阅读有关灯开关部署的信息： [分发和维护您的应用程序](http://msdn.microsoft.com/en-us/library/vstudio/ff852001.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-19T09:51:55.470

我注意到这篇文章有很多观点。

好的，因为 VS 2012 Update 2，在 Lightswitch 中我使用项目版本 3。

pv1：LS 2011
pv2：VSLS 2012
pv3：VSLS 2012-带项目升级

在项目资源管理器中右键单击您的项目，然后从菜单中选择菜单项“项目升级”

再次将您的项目 (pv3) 发布到您的桌面非常容易。

我不能用英文给出详细的描述，因为我的 VS 不是英文的，请看 Beth Massi 的 Microsoft How-To Videos。

# mysql - MySQL - 更改 myIsam 表上的索引

> ID：14584076
> 
> 赞同：0
> 
> 时间：2013-01-29T13:27:53.103
> 
> 标签：mysql

我有一个表，其中在 where 条件下使用了两列。

这是一个 MyIsam 表，两列都包含文本并使用 FULLTEXT 作为索引。

两列中的值都不是唯一的。

select 语句的工作速度很慢。

问题是：我可以简单地删除 FULLTEXT 索引并使用另一个索引吗？

使用的查询与可能一样简单：

```
SELECT * FROM tbl WHERE col1=X AND col2=y and col3=z 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:44:59.007

```
ALTER TABLE  `tableName` DROP INDEX  `indexName` ,
ADD INDEX  `indexName` (  `ColName` ) 
```

这将删除旧的“FULLTEXT”索引并添加“NOT FULTEXT”索引。

# sql - 合并默认数据和用户调整数据

> ID：14584077
> 
> 赞同：1
> 
> 时间：2013-01-29T13:27:55.357
> 
> 标签：sql, sql-server, tsql, greatest-n-per-group

我有一张桌子：

```
Type (PK)         Year (PK)    Value
Default           2000         1
Default           2001         2
UserFooAdjusted   2001         3
UserBarAdjusted   2001         4 
```

**返回不同年份的最快 SQL 查询是什么，如果有两行相同年份，则返回用户调整值？有多个用户。该查询返回一位用户的数据**。示例结果：

```
Year    Value
2000    1
2001    3 
```

我已经考虑过了，`A UNION B`但我如何始终保留 B 的副本？也许更好的解决方案是将当前表分成两个表：一个包含默认值，另一个包含用户调整的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:29:53.237

假设只有两种类型：*Default*和*UserAdjusted*，可以在 sql server中使用`Common Table Expression`and 。`Window Functions`

```
WITH recordList
AS
(
    SELECT   YEAR, VALUE,
             ROW_NUMBER() OVER (PARTITION BY  YEAR
                                ORDER BY TYPE DESC) rn
    FROM    tableName
)
SELECT  YEAR, VALUE
FROM    recordList
WHERE   rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/17ef2/3)

# ember.js - ember 路由器 v2 goBack 功能

> ID：14584078
> 
> 赞同：1
> 
> 时间：2013-01-29T13:28:02.003
> 
> 标签：ember.js

在路由器 V1 中，您可以创建一个简单的 goBack 功能，如下所示：

```
App.Router = Ember.Router.extend({
  root: Ember.Route.extend({
    index: Ember.Route.extend({
        route: '/',
        redirectsTo: 'posts'
    }),
    posts: Ember.Route.extend({
        route: '/posts',
        showPost: Ember.Route.transitionTo('post'),
        connectOutlets: function(router){
           router.get('applicationController').
               connectOutlet('posts',App.Post.find());
        }
    }),
    post: Ember.Route.extend({
        route: '/posts/:post_id',
        goBack: Ember.Route.transitionTo('posts'),
        connectOutlets: function(router, post) {
            router.get('applicationController').connectOutlet('post', post);
        }
    })
  })
}); 
```

我正在尝试在路由器 v2 中做同样的事情，并提出了以下解决方案：

```
App.ApplicationController = Ember.Controller.extend({
  currentPathDidChange: function () {
    this.set('_previousPath', this.get('_currentPath'));
    this.set('_currentPath', this.get('currentPath'));
  }.observes('currentPath')
});

App.GobackRoute = Ember.Route.extend({
  redirect: function (model) {
    var previousPath = this.controllerFor('application').get('_previousPath');

    var parts = previousPath.split(".");

    var router = this.get('router');
    if (router.hasRoute(parts[parts.length - 1])) {
        this.transitionTo(parts[parts.length - 1]);
    } else if (router.hasRoute(parts[parts.length - 2] + "." + parts[parts.length - 1])) {
        this.transitionTo(parts[parts.length - 2] + "." + parts[parts.length - 1]);
    } else {
        Ember.Logger.warn('No route for: %s', previousPath);
    }
  }
}); 
```

没有更简单的解决方案吗？

[jsFiddle](http://jsfiddle.net/DEmMM/7/)

我想重用路由、控制器等......而不会导致某种意大利面条式路由，比如

```
App.AnimalsRoute = Ember.Route.extend({
  events: {
    goBackToThis: function() {
        this.transitionTo('this');
    },
    goBackToThat: function() {
        this.transitionTo('that');
    },
    goBackToSomeThingElse: function() {
        this.transitionTo('someThingElse');
    }
  } 
}); 
```

我想为整个路由器提供 1 个回退功能！我最初的解决方案结果如下：（查找所有 goBack 路线，以及 ebed 路线的重用）

```
App.Router.map(function (match) {
    this.route('home', { path: '/' });
    this.route('logout');
    this.route('login');
    this.resource('goBack', { path: '/goback' });

    this.resource('ccpr', function () {
        this.resource('goBack', { path: '/goback' });
        this.resource('ccprPatients',  { path: '/' }, function () {
            this.route('search');
        });
        this.resource('ccprPatient', { path: '/:ccpr_patient_id' }, function () {
            this.resource('goBack', { path: '/goback' });       
            this.resource('ccprPracticeSessions', { path: '/practicesessions' }, function () {
            });
            this.resource('ccprPracticeSession', { path: '/practicesessions/:ccpr_practicesession_id' }, function () {
                this.route('info');
                this.route('anamnese');
                this.route('medication');
                this.route('trainingModel', { path: '/trainingmodel' });
                this.route('socialEvaluation', { path: '/socialevaluation' });
                this.route('medicalFollowUp', { path: '/medicalfollowup' });
                this.route('psychologicalEvaluation', { path: '/psychologicalevaluation' });
                this.route('nutritionalAdvice', { path: '/nutritionaladvice' });

                this.resource('goBack', { path: '/goback' });

                this.resource('ebedMedication', { path: '/ebedmedication/:ebed_medication_id' }, function () {
                });
                this.resource('ebedLabResult', { path: '/ebedlabresult/:ebed_labresult_id' }, function () {
                });
                this.resource('ebedDietContact', { path: '/ebeddietcontact/:ebed_dietcontact_id' }, function () {
                });
                this.resource('ebedNutritionBmi', { path: '/ebednutritionbmi/:ebed_nutritionbmi_pkid' }, function () {
                });
            });
        });
        this.resource('ccprCardioArticles', { path: "/cardioarticles" });
        this.resource('ccprCardiologists', { path: "/cardiologists" });
        this.resource('ccprInfoSession', { path: "/infosession" });
        this.resource('ccprPatientPresence', { path: "/patientpresence" });
        this.resource('ccprPresenceOverview', { path: "/presenceoverview" });
        this.resource('ccprNextNutritionalAdvices', { path: "/nextnutritionaladvices" });
    });
    this.resource('ebed', function () {
        this.resource('goBack', { path: '/goback' });
        this.resource('ebedMedications', { path: '/ebedmedications' }, function () {
        });
        this.resource('ebedMedication', { path: '/ebedmedication/:ebed_medication_id' }, function () {
        });
        this.resource('ebedLabResults', { path: '/ebedlabresults' }, function () {
        }); 
        this.resource('ebedLabResult', { path: '/ebedlabresult/:ebed_labresult_id' }, function () {
        });
        this.resource('ebedDietContacts', { path: '/ebeddietcontacts' }, function () {
        });     
        this.resource('ebedDietContact', { path: '/ebeddietcontact/:ebed_dietcontact_id' }, function () {
        });
        this.resource('ebedNutritionBmis', { path: '/ebednutritionbmis' }, function () {
        });         
        this.resource('ebedNutritionBmi', { path: '/ebednutritionbmi/:ebed_nutritionbmi_pkid' }, function () {
        }); 
    });
}); 
```

没有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:44:25.680

[更新了 JSFiddle 示例](http://jsfiddle.net/cteegarden/DEmMM/8/)

`events`您可以使用路由器中的属性在新路由器中执行相同的操作来定义操作。从[指南](http://emberjs.com/guides/templates/actions/)：

> 如果在当前控制器上找不到该操作，它将冒泡到当前路由处理程序。从那里，它将冒泡到父路由处理程序，直到它到达应用程序路由。

在您的示例中，您需要在和路由`goBack`的父级中定义操作；`animals.dog``animals.cat`

```
App.AnimalsRoute = Ember.Route.extend({
    events: {
        goBack: function() {
            this.transitionTo('index');
        }
    } }); 
```

这可以使用`{{action}}`模板中的标准助手调用。

```
<a href='#' {{action goBack}}>Go Back</a> 
```

# paint - CGmutuablePath 和 GLPaint

> ID：14584081
> 
> 赞同：0
> 
> 时间：2013-01-29T13:28:12.250
> 
> 标签：paint, bucket, eaglcontext

参考这个问题：[OpenGL ES Fill Effect](https://stackoverflow.com/questions/7812309/opengl-es-fill-effect) 我正在尝试做同样的事情，但我有自定义 UIView，它包含不同的 CGMutuablePath 并且在选定的 UIView 中只启用了绘图。

我使用了 GLPaint、PaintingView 类并将其用作自定义类，甚至可以绘制不同的路径，一切正常。除了我也需要填充这些路径。当他的用户想要使用桶油漆效果时。当我使用定义的 CG 闭合路径时，是否可以使用 EAGLContext 填充这些路径。我尝试了多种方式来用 CGContextRef 填充它，但它总是以 "Invalid context" 结束，我想它不可能在单个视图中使用 2 个不同的上下文。

任何机构都可以帮我解决这个问题吗？如何使用 EAGLContext 填充我的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:15:48.740

如果没有您的代码/应用程序的任何实际示例，这里的问题有点难以理解。但是，您似乎正在尝试填充描边路径。

首先，我不知道您为什么在这里建议两个上下文？您正在`CGMutablePaths`使用 a 进行绘图，`CGContext`但您正在尝试使用`EAGLContext`? 这是一个相当牵强的解决方案。`EAGLContext`是 OpenGL ES（通常是 3d 的东西）并且`CGContext`是 Quartz 2D。除非您有特定的理由这样做，否则我不建议在没有适当应用的情况下将两种上下文混合在一个视图中。

你说你已经尝试了一切来填补路径？这意味着您已经尝试过`CGContextEOFillPath`and `CGContextFillPath`？无论如何，这应该适用于`CGMutablePaths`：

```
// Draw your CGMutablePath

CGContextAddPath(yourcgcontext, yourcgmpath); //Adds a previously created Quartz path. 
CGContextClosePath(yourcgcontext); //Closes and terminates the current path’s subpath.
CGContextClip(yourcgcontext); Modifies the current clipping path.

// Fill a solid or a gradient or an image, that should be clipped to your path. 
```

# android - 如何擦除画布内容？

> ID：14584082
> 
> 赞同：0
> 
> 时间：2013-01-29T13:28:14.650
> 
> 标签：android, canvas

我试图让背景在 Android 2.2 中用 Canvas 绘制的一系列帧中透明。但似乎在绘制新框架时背景不会擦除旧框架。

我怎样才能抹去它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:37:37.720

```
How do I clear (or redraw) the WHOLE canvas for a new layout (= try at the game) ? 
```

只需调用 Canvas.drawColor(Color.BLACK) 或任何您想要清除 Canvas 的颜色。

```
And: how can I update just a part of the screen ? 
```

没有这种方法可以只更新“屏幕的一部分”，因为 Android 操作系统在更新屏幕时会重绘每个像素。但是，当您不清除画布上的旧图纸时，旧图纸仍然在表面上，这可能是“仅更新一部分”屏幕的一种方式。

因此，如果您想“更新屏幕的一部分”，请避免调用 Canvas.drawColor() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:44:33.190

你不能擦除画布。每次在帧之前，您都必须在其上绘制颜色。

```
Canvas.drawColor(Color.BLACK);
//draw frame 
```

这需要一点练习，但你会逐渐掌握诀窍

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-06T21:53:45.923

我用`path.reset()`它为我工作，清洁所有屏幕。

# sql - 无法检查sql数据库中的空值

> ID：14584083
> 
> 赞同：3
> 
> 时间：2013-01-29T13:28:18.787
> 
> 标签：sql, sql-server, f#

使用 F# 查询语法，我试图获取某个字段不为空的所有记录，但我似乎无法找到一种方法。

首先，我尝试了：

```
query {
    for h in dc.Table do
    where (h.SectorId <> null)
    select h
} 
```

但是出现了一个错误`The type 'Nullable<Guid>' does not have 'null' as a proper value. To create a null value for a Nullable type use 'System.Nullable()'.`因此，按照建议替换了`null`，`Nullable()`我使用了：

```
query {
    for h in dc.Table do
    where (h.SectorId <> Nullable())
    select h
} 
```

当我在 LINQPad 中使用上述查询时，它不会检索任何值，即使我知道它们存在。问题似乎出在创建的 SQL 中：

```
-- Region Parameters
DECLARE @p0 UniqueIdentifier = null
-- EndRegion
SELECT [t0].[Id], [t0].[Name], [t0].[SectorId], [t0].[Blah], [t0].[Meh], [t0].[DisplayOrder]
FROM [Table] AS [t0]
WHERE [t0].[SectorId] <> @p0 
```

当然这不会起作用，因为`NULL <> NULL`在 SQL 中总是错误的；应该读的地方`WHERE [t0].[SectorId] is not null`。如何在 F# 查询中检查 null？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T15:21:19.663

尝试

```
query {
    for h in dc.Table do
    where h.SectorId.HasValue
    select h
} 
```

# logging - 只记录特定的 Doctrine 实体动作/事件/更新

> ID：14584091
> 
> 赞同：0
> 
> 时间：2013-01-29T13:28:36.290
> 
> 标签：logging, symfony, doctrine, entity

我当前的 Symfony/Doctrine 应用程序包含 10-15 个实体，当然还有它们之间的关系。我需要实现的一个重要功能是记录特定操作。这不是我要存储的 SQL 条目。

为了更清楚地说明这一点：假设我有一个作者和一本书（具有 1..n 关系）。除了写书，作者还可以审书，当前的审稿人可以更换。

每次新审稿人接受或拒绝审阅这本书时，我都需要创建一个新的日期、时间、书籍、作者的日志条目。这些条目需要存储在数据库中。

当然，我已经开始搜索，目前[Doctrine LifeCyle 事件](http://docs.doctrine-project.org/en/2.0.x/reference/events.html)是朝着正确方向迈出的一步。我的问题是或者它是正确的解决方案。有没有更好/更快的方法来解决我的用例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:02:32.810

使用 symfony2 制作一个自定义的学说事件订阅者是非常严格的，

但如果你想要一个预先存在的解决方案，我可以将你链接到[https://github.com/KnpLabs/DoctrineBehaviors#loggable](https://github.com/KnpLabs/DoctrineBehaviors#loggable)

如果需要，我可以帮助您使用它。

# r - ggplot2 查找直方图中的计数最大值

> ID：14584093
> 
> 赞同：9
> 
> 时间：2013-01-29T13:28:42.613
> 
> 标签：r, ggplot2

我有一个简短的 R 脚本，它使用 ggplot2 绘制了一些直方图。如何根据直方图中的最大频率（加上 10%）自动设置直方图中的 ymax 限制，即

```
scale_y_continuous(limits= c(0,ymax*1.1)

plot = ggplot(data, aes(myo_activity)) +
  geom_histogram(binwidth=0.5, aes(fill=..count..))
plot + scale_x_continuous(expand = c(0,0), limits = c(30,90)) + 
  scale_y_continuous(expand = c(0,0), limits = c(0,140)) 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-29T13:51:32.860

例如`movies`，未提供用作样本数据的使用数据。

使用函数`ggplot_build()`，您可以获得包含用于绘制数据的所有元素的列表。所有数据都在列表元素中`data[[1]]`。此元素的列`count`包含直方图的值。您可以使用此列的最大值为您的绘图设置限制。

```
plot = ggplot(movies, aes(rating)) + geom_histogram(binwidth=0.5, aes(fill=..count..))
ggplot_build(plot)$data[[1]]
      fill    y count     x     ndensity       ncount      density PANEL group ymin ymax xmin xmax
1  #132B43    0     0  0.75 0.0000000000 0.0000000000 0.0000000000     1     1    0    0  0.5  1.0
2  #142E48  272   272  1.25 0.0323232323 0.0323232323 0.0092535892     1     1    0  272  1.0  1.5
3  #16314B  454   454  1.75 0.0539512775 0.0539512775 0.0154453290     1     1    0  454  1.5  2.0
4  #17344F  668   668  2.25 0.0793820559 0.0793820559 0.0227257263     1     1    0  668  2.0  2.5
5  #1B3A58 1133  1133  2.75 0.1346405229 0.1346405229 0.0385452813     1     1    0 1133  2.5  3.0

plot + scale_y_continuous(expand = c(0,0),
         limits=c(0,max(ggplot_build(plot)$data[[1]]$count)*1.1)) 
```

![在此处输入图像描述](../Images/0b3dd1d9c2eb4d264b21289bf1ab68ef.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:59:44.477

就个人而言，我发现'hist' 函数对这类计算最有用。“hist”功能非常快，可以提供您的频率计数。对于您的情况，您可以执行以下操作：

```
max(hist(data$myo_activity, breaks=seq(range_Min, range_Max, by=bin_Width), plot=FALSE)$counts) 
```

您的理论范围的底部在哪里`range_Min`（即 0），而`range_Max`您的理论范围的上限在哪里。 `bin_Width`是每个频率计数的值宽度。

该等式应该为您提供指定绘图范围所需的最大值。我相信'ggplot'函数无论如何都会调用'hist'函数，所以当我只想要数据时我更喜欢直接调用它。

# c# - 在 c#.net 中添加多次值？

> ID：14584096
> 
> 赞同：-3
> 
> 时间：2013-01-29T13:28:54.810
> 
> 标签：c#

我想在 c#.net 中添加两个以上的时间值如何？例子：

129:43:50 + 20:20:00 + 30:00:10 = 180:04:00

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:30:53.240

Maybe using [`TimeSpan.Add`](http://msdn.microsoft.com/en-us/library/system.timespan.add.aspx)? This really is an odd question though.

EDIT:

Based on your comment I suggest you take a look at [Standard TimeSpan Format Strings](http://msdn.microsoft.com/en-us/library/ee372286.aspx) and [Custom TimeSpan Format Strings](http://msdn.microsoft.com/en-gb/library/ee372287.aspx) on MSDN to see how you can format the `TimeSpan`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T13:34:17.087

如果你有`List<TimeSpan>`你可以使用 LINQ：

```
List<TimeSpan> times = new List<TimeSpan>();

TimeSpan total = times.Aggregate(new TimeSpan(), (t1, t2) => t1 + t2); 
```

然后，对于格式化使用：

```
string result = string.Format ("{0:00}:{1:00}:{2:00}", (int)total .TotalHours, total.Minutes, total.Seconds); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:30:41.483

How about the method

```
public DateTime Add(TimeSpan value) 
```

? Its fairly the first result on google.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T13:32:07.987

您将要使用[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.add.aspx)对象。您需要构造，然后将这些值相加。

# c# - 在包装字典类中实现 IEnumerable.GetEnumerator()

> ID：14584106
> 
> 赞同：0
> 
> 时间：2013-01-29T13:29:51.737
> 
> 标签：c#, dictionary, interface, ienumerable

我正在使用字典包装类，我想使用键值对遍历它，如下所示

```
private void LoadVariables(LogDictionary dic)
{
    foreach (var entry in dic)
    {
        _context.Variables[entry.Key] = entry.Value;
    }

} 
```

但是`NotImplementedException`由于我没有实现该`GetEnumerator()`方法，所以抛出了 a 。

这是我的包装类：

```
public class LogDictionary: IDictionary<String, object>
{
    DynamicTableEntity _dte;
    public LogDictionary(DynamicTableEntity dte)
    {
        _dte = dte;
    }
        bool ICollection<KeyValuePair<string, object>>.Remove(KeyValuePair<string, object> item)
    {
        throw new NotImplementedException();
    }

    IEnumerator<KeyValuePair<string, object>> IEnumerable<KeyValuePair<string, object>>.GetEnumerator()
    {
        throw new NotImplementedException();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:36:15.100

假设您在枚举期间没有包装器需要的特殊逻辑，您只需将调用转发到包含的实例：

```
public class LogDictionary: IDictionary<String, object>
{
    DynamicTableEntity _dte;
    public LogDictionary(DynamicTableEntity dte)
    {
        _dte = dte;
    }
        bool ICollection<KeyValuePair<string, object>>.Remove(KeyValuePair<string, object> item)
    {
        throw new NotImplementedException();
    }

    IEnumerator<KeyValuePair<string, object>> IEnumerable<KeyValuePair<string, object>>.GetEnumerator()
    {
        return _dte.GetEnumerator();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T13:38:54.660

您将需要在内部实现 List 或 Dictionary 来保存`LogDictionary`.

在不知道是什么的情况下，`DynamicTableEntity`我会假设它实现了`IDictionary<string,object>`。

```
public class LogDictionary: IDictionary<String, object>
{
    private IDictionary<String, object> _dte;

    public LogDictionary(DynamicTableEntity dte)
    {
        _dte = (IDictionary<String, object>)dte;
    }

    bool ICollection<KeyValuePair<string, object>>.Remove(KeyValuePair<string, object> item)
    {
        return _dte.Remove(item.Key);
    }

    IEnumerator<KeyValuePair<string, object>> IEnumerable<KeyValuePair<string, object>>.GetEnumerator()
    {
        return _dte.GetEnumerator();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:33:13.817

也许您应该从 Dictionary（而不是 IDictionary）派生并调用 base，而不是在方法中抛出异常。

# c++ - C++ - 在 VS2010 中写入特定的输出窗口窗格

> ID：14584108
> 
> 赞同：1
> 
> 时间：2013-01-29T13:29:53.790
> 
> 标签：c++, visual-studio-2010

我正在尝试写入自定义输出窗口窗格，但我能找到的用于写入输出窗口的唯一示例会自动写入调试窗格。我已经在 C# 中使用 VS 插件创建自定义窗格，并在 VS2010 启动时向其写入文本。我在一个 C++ 项目中工作，我只是想知道如何从代码中的任何位置写入我的自定义窗格。我想用尽可能少的开销来做这件事，因为我在一个更大的代码库中工作，我不想进行大量修改。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:43:36.843

Debug 窗格显示 OutputDebugString 调用的结果（直接调用或通过`Debug.WriteLine`/调用`Trace.WriteLine`）（与 SysInternals 的目的相同`dbgview.exe`）。这是 IDE 的默认行为。我认为，写入自定义窗格可能需要实现您自己的 Visual Studio 扩展。

作为一种解决方法，您可以使用`dbgview`、定义特定前缀（如 [MODULE-A]: 、[MODULE-B]: 等）并设置过滤器以突出显示特定单词的出现。请注意，只有在没有 IDE 的情况下运行程序时，dbgview 才能正常工作。

# android - android中AudioRecord.read（）中的音频数据使用什么编解码器

> ID：14584110
> 
> 赞同：2
> 
> 时间：2013-01-29T13:29:55.910
> 
> 标签：android, audio, stream, codec, audiorecord

音频数据的保存方式与[此处](https://stackoverflow.com/questions/4525206/android-audiorecord-class-process-live-mic-audio-quickly-set-up-callback-func)相同：

```
// 1\. create AudioRecord instance
// 2\. audioTrack.play();

    // 3\. in separate thread reading into buffer
    // int bytesRead = audioRecord.read(buffer, 0, bufferSize); 
    // 4\. save buffer to file
    // fio.write(buffer, 0 , bytesRead);

// 4\. audioTrack.stop(); 
```

使用什么编解码器/格式作为保存文件不能作为 WAV 文件打开，但可以使用 AudioTrack 类读取和播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:34:39.070

没有使用编解码器。它读取原始样本。如果你想保存到 .wav 文件，你应该先写一个[.wav 头文件](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)。看这个[例子](http://www.edumobile.org/android/android-development/audio-recording-in-wav-format-in-android-programming/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:44:40.420

没有使用编解码器，如果您正在寻找某种编解码器，我建议您尝试：[MediaRecorder](http://developer.android.com/guide/topics/media/audio-capture.html)

# php - PHP strtotime +1 个月增加了一个月

> ID：14584115
> 
> 赞同：23
> 
> 时间：2013-01-29T13:30:14.740
> 
> 标签：php, date, strtotime

我有一个简单的变量，它在今天增加了一个月：

```
$endOfCycle = date("Y-m", strtotime("+1 month")); 
```

今天是 2013 年 1 月，所以我希望回到 2013-02，但我得到的是 2013-03。我不知道为什么它会跳到三月。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-29T13:37:38.950

它跳到 3 月，因为今天是 1 月 29 日，加上一个月会得到 2 月 29 日，它不存在，所以它正在移动到下一个有效日期。

这也将发生在很多个月的 31 日，但在 1 月到 2 月的情况下显然更明显，因为 2 月更短。

如果您对月份中的某天不感兴趣，而只是希望它给出下个月，则应将输入日期指定为当前月份的第一天。如果您添加一个月，这将始终为您提供正确的答案。

出于同样的原因，如果你想总是得到下个月的最后一天，你应该从计算你想要的那一天之后的第一天开始，然后减去一天。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-29T13:34:08.733

这应该是

```
$endOfCycle=date('Y-m-d', strtotime("+30 days")); 
```

**`strtotime`**

期望得到一个包含美国英语日期格式的字符串，并将尝试将该格式解析为 Unix 时间戳（自 1970 年 1 月 1 日 00:00:00 UTC 以来的秒数），相对于现在给出的时间戳，或如果没有提供现在，则为当前时间。

**尽管**

**`date`**

返回根据给定格式字符串格式化的字符串，使用给定的整数时间戳或当前时间（如果没有给出时间戳）。

**请参阅手册页：**

*   [http://www.php.net/manual/en/function.strtotime.php](http://www.php.net/manual/en/function.strtotime.php)
*   [http://www.php.net/manual/en/function.date.php](http://www.php.net/manual/en/function.date.php)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-29T13:37:28.233

今天是 1 月 29 日，+1 月表示 1 月 29 日，但由于今年 2 月包含 28 天，因此与次日 3 月 1 日重叠

而是尝试

```
strtotime('next month') 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-31T12:24:01.063

您可以使用此代码获取下个月：

```
$ts = mktime(0, 0, 0, date("n") + 1, 1);
echo date("Y-m-d H:i:s", $ts);
echo date("n", $ts); 
```

假设今天是`2013-01-31 01:23:45`以上将返回：

```
2013-02-01 00:00:00
2 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-29T13:34:03.813

也许是因为它的 2013-01-29 所以 +1 个月将是 2013-02-29 不存在所以它将是 2013-03-01

你可以试试

```
date('m/d/y h:i a',(strtotime('next month',strtotime(date('m/01/y'))))); 
```

[来自http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)的评论

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-29T13:41:46.950

```
 $endOfCycle = date("Y-m", mktime(0, 0, 0, date("m", time())+1 , 15, date("m", time()))); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-01-29T13:33:13.970

试试这个：

```
$endOfCycle = date("Y-m", time()+2592000); 
```

这增加了 30 天，而不是一个月的艰难。

# javascript - 如何确保标签容器不会弄乱我的代码

> ID：14584116
> 
> 赞同：0
> 
> 时间：2013-01-29T13:30:20.500
> 
> 标签：javascript, namespaces

我正在开发一个看起来像这样的 Javascript 模块。

```
var myApp = (function(){
    private function1();
    private function2()

    return {
    publicMethod1:function(){}
    publicMethod2:function(){}
    publicMethod3:function(){}
    }
})();
myApp.publicMethod3(); 
```

我的模块可能会在标签容器中使用，我不太确定它是如何工作的，但我担心如果我的模块在全局自动执行函数中执行，如下所示：

```
(function(){

var myApp = (function(){
    private function1();
    private function2()

    return {
    publicMethod1:function(){}
    publicMethod2:function(){}
    publicMethod3:function(){}
    }
})();
myApp.publicMethod3();
})(); 
```

我不能像以前那样执行我的模块的方法，我的代码不能在里面工作。

那我在问什么？你知道标签容器是怎么工作的吗？而且，如果标签容器将我的代码包含在全局自动执行函数中，我如何更改模块的代码以使其在内部正常工作。感谢您的回答，如果您不清楚，我会尽快回答您的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:43:32.200

如果你担心你的代码在 IIFE 中定义时不再工作，那么唯一的办法就是确保你的模块是窗口对象的全局属性。

```
// append it to the window instead of using var
// this way it will always be global and not constrained to any wrapping scopes
window.myApp = (function(){
   ...
})(); 
```

请注意，将属性附加到窗口对象会很快变得非常混乱 - 尝试坚持只执行一次并将所有其他代码暴露在`myApp`对象下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:33:42.107

你的代码中有一堆语法错误，试试这个：

```
(function(){
    var myApp = (function(){
        var function1 = function(){};   // Fixed function declaration
        var function2 = function(){};

        return {
            publicMethod1:function(){}, // Added missing comma's
            publicMethod2:function(){},
            publicMethod3:function(){}
        }
    })();
    myApp.publicMethod3();
})(); 
```

JavaScript中没有`private`关键字，函数必须声明为：

```
var name = function(){/* function body here */};

// or 
function name(){/* function body here */}

// or, when declared in objects:
var someObject = {
    name: function(){/* function body here */}
} 
```

此外，对象中的项目用逗号分隔，如下所示：

```
var someObject = {
    property1: "value 1",
    property2: "value 2",
    property3: true,
    property4: 1234,
    property5: 1234   // Note: no comma after the last property.
} 
```

# assembly - self-modifying code algorithm

> ID：14584117
> 
> 赞同：4
> 
> 时间：2013-01-29T13:30:26.720
> 
> 标签：assembly, compiler-construction, polymorphism, self-modifying

some programs generates the executable code at run-time. i.e computer virus, packed binary. this makes static analysis very difficult.

aside from packing algorithms, is there any general algorithm for self-modifying code generation? or compiler support? where can I get related documentation or paper? and what is the difference between self-modifying code and polymorphic code?

I am curious.

thank you in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T14:48:20.537

正如 delnan 已经提到的，任何程序在处理器尝试运行它之前都只是数据。

要练习自修改代码，请执行以下步骤：

*   复制`notepad.exe`到`notepad_orig.exe`
*   开始`notepad_orig.exe`
*   在现在打开`notepad.exe`的记事本窗口中打开
*   输入任何你想要的
*   保存并关闭

也许是一个愚蠢的例子，但这里没有更多的事情发生。记事本采用外部数据源（您！）来更改其代码。

如果您正在寻找算法，我建议您寻找一个为应用程序提供自动更新的框架。这是我能想到的唯一一个不违法的实际例子。

在回复您的评论时，您当然可以加密应用程序的一部分，并在使用之前对其进行解密。但是，要运行应用程序，它必须以解密的形式存在于内存中，并且可以被读取。您可能只会使您的应用程序更难维护。

# ios - When will my extern variable released using ARC?

> ID：14584118
> 
> 赞同：0
> 
> 时间：2013-01-29T13:30:31.950
> 
> 标签：ios, singleton, automatic-ref-counting, extern

I have a setup where all of my singletons' live in an *extern* NSDictionary (I need it globally visible, since I make many subclasses from a base singleton object with some common features).

Everything is fine, but on an iPad 1 running iOS 5.0, when user puts the application to background (not terminates, just press the home button), this dictionary gets released (so all of my singleton services, subclasses, etc.). The more interesting, they get recreated when I switch back to the application, but "sometimes" they're not, and my application behaviour gets unpredictable.

I've put __strong before the declaration, but it results in the same. It is quiet harmful when my singletons are destroyed/created all over the time, since they are storing runtime user/application states.

It is important that I'm debuggin with *Fastest, Smallest Optimization Level* to simulate production environment.

Is there any way to prevent this behaviour? To make/mark it "really retained" somehow?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:35:58.240

只要应用程序“活着”，它们就永远不应该被释放。

如果您的应用程序完全终止（重新启动模拟器/从 iPad 关闭它），一切都会被释放，当您再次打开您的应用程序时，您将一无所有。

此外，单例的要点是您调用 getter 并检查其是否存在，如果不存在则创建它，因此如果您在某些时候没有它不应该有问题。

如果您在重新启动应用程序时需要持久数据，我建议您研究序列化和/或某种持久性

# javascript - 使用正则表达式删除引号内的引号

> ID：14584128
> 
> 赞同：2
> 
> 时间：2013-01-29T13:30:52.840
> 
> 标签：javascript, regex, json

我有一个 json 文件，它的值中有很多双引号。json文件差不多有27000条记录。

我想删除或替换值内的双引号，否则它不会被接受为一个好的 json 文件。我怎样才能做到这一点？

问题是值中有一个双引号的记录，但其中也有多个引号的记录。

除了替换或删除引号之外，还可以删除整个键和值。反正我不会用。这样做更容易吗？

以下是 json 文件中 1 条记录的示例：

```
 {
  "adlibJSON": {
    "recordList": {
      "record": [
        {
          "@attributes": {
            "priref": "4372",
            "created": "2011-12-09T23:09:57",
            "modification": "2012-08-11T17:07:51",
            "selected": "False"
          },
          "acquisition.date": [
            "1954"
          ],
          "documentation.title": [
            "A lot of text with a lot of extra double quotes like "this" and "this""
          ] ... ... 
```

问题在于键的值：`document.title`. 我有 sublime text 2，我用它来查找和替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:02:17.247

有一种方法，但为了做到这一点，您必须确保您可以对您的数据进行以下假设：

*   “documentation.title”在您的数据中只能出现一次，当它用作键时。
*   “documentation.title”引用的数组值应该只有一个元素。
*   字符“]”不应出现在值中。

然后，您将按照以下步骤操作：

```
/* find first index of "[" after "documentation.title" */
n = s.indexOf("[", s.indexOf('"documentation.title"'));

/* Find index of closing "]" */
n2 = s.indexOf("]", n);

/* Get the substring enclosed by these indexes */
x = s.substr(n+1, n2-n-1);

/* Remove every double quotes in this string and rebuild the original string with the corrected value. */
s.substr(0, n) + '["' + x.replace(/"/g, "") + '"]' + s.substr(n2+1); 
```

编辑：如果您对保留更正值本身不感兴趣，则可以将其替换为空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:59:46.507

我认为您不能，因为[它不是常规语言](https://cstheory.stackexchange.com/q/3987)。

您可能会遇到[与使用 regex 解析 HTML](https://stackoverflow.com/q/1732348/781965)类似的麻烦。

我认为你必须自己编写（或者如果你非常幸运的话）某种解析器......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:47:23.427

试试这个：

```
json.replace(/(^\s*|:\s*)"/gm, '$1[sentinel]')
    .replace(/"(,?\s*$|:)/gm, '[sentinel]$1')
    .replace(/"/g, '\\"').replace(/\[sentinel\]/g, '"'); 
```

演示在这里：http: [//jsfiddle.net/D83FD/](http://jsfiddle.net/D83FD/)

这不是一个完美的解决方案；数据的格式可能会破坏正则表达式。试试看它是否适用于更大的数据集。

本质上，我们正在查找开始引号并将它们替换为占位符值，查找结束引号并将它们替换为占位符，反斜杠转义所有剩余的引号，然后再次将占位符替换为引号。

# ios - Header path inside of framework

> ID：14584138
> 
> 赞同：0
> 
> 时间：2013-01-29T13:31:13.813
> 
> 标签：ios, frameworks, header

I'm working with making framwork project in iOS. I want to change whole project to framwork and use it in other application. I make all header files to public, but header file include other header files like this

# include "subfolder/ClassName.h"

but if I use it in other application, can't find the "subfolder/ClassName.h" maybe because of that files are in same "/Headers" folder.. How can I make it working ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:49:14.900

在项目的构建设置中，在“Header Search Paths”下添加所有头文件的直接路径，并使其递归，以防有任何子文件夹也需要包含。

# xpages - XPages save data source and new doc changes previous doc

> ID：14584141
> 
> 赞同：0
> 
> 时间：2013-01-29T13:31:30.563
> 
> 标签：xpages, xpages-ssjs

I have a document data source (create document with no parent id) bound to a panel. Within the panel I have 2 other panels. On completing the fields in panel 1 I click a link to reveal the 2nd panel and that has a save button on it. Once saved the document appears in the db correctly.

The save buttons does a dds save and then clears all fields and does a partial update on the outer panel and a partial execute on that panel too as I have other dds on the XPage outside of my main panel.

If I now create another document the previous document gets updated rather than create a new doc. I've tried different scope for the dds and other options. Not sure what to try next.

Anyone know what the problem is?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T14:26:50.473

下面是一个示例，如何通过部分刷新添加新数据源：

```
<xp:panel id="myPanel">
    <xp:this.data>
        <xp:dominoDocument var="document1"></xp:dominoDocument>
    </xp:this.data>
    <xp:br></xp:br>
    <xp:inputText id="inputText1" value="#{document1.Test}"></xp:inputText>
    <xp:br></xp:br>
    <xp:br></xp:br>
    <xp:button value="Save" id="buttonSave">
        <xp:eventHandler event="onclick" submit="true"
            refreshMode="partial" refreshId="myPanel">
            <xp:this.action>

                <xp:actionGroup>
                    <xp:saveDocument var="document1"></xp:saveDocument>
                    <xp:executeScript>
                        <xp:this.script>
                            <![CDATA[#{javascript:
                                var panel = getComponent("myPanel");
                                var ds = new com.ibm.xsp.model.domino.DominoDocumentData();
                                ds.setComponent(panel);
                                ds.setVar("document1");
                                panel.getData().clear();
                                panel.addData(ds);
                            }]]>
                        </xp:this.script>
                    </xp:executeScript>
                </xp:actionGroup>
            </xp:this.action>
        </xp:eventHandler>
    </xp:button>
</xp:panel> 
```

希望这可以帮助

斯文

**编辑：**

添加了一个*clear()*以从面板中删除所有先前定义的数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:05:11.063

这是默认行为。如果您不想重新加载整个页面，一种选择是在单击“保存”按钮时删除数据源并在 SSJS 事件中创建新文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-18T07:17:54.603

我成功使用了 Sven 的答案，但是，我不得不在服务器端 JavaScript 中添加额外的一行

```
<xp:executeScript>
    <xp:this.script>
        <![CDATA[#{javascript:
            var panel = getComponent("myPanel");
            var ds = new com.ibm.xsp.model.domino.DominoDocumentData();
            ds.setComponent(panel);
            ds.setVar("document1");
            ds.setFormName('form1');
            panel.getData().clear();
            panel.addData(ds);
            }]]>
    </xp:this.script>
</xp:executeScript> 
```

# jquery - 两种调用jquery函数的方式有什么区别？

> ID：14584142
> 
> 赞同：0
> 
> 时间：2013-01-29T13:31:31.387
> 
> 标签：jquery

`on`使用和`find`使用后调用jquery函数有什么区别`on`

```
<div class="outer">
    <span>One</span>
    <div class="inner"><button id="button">button 1</button></div>
</div>
<div class="outer">
    <span>Two</span>
    <div class="inner"><button id="button">button 2</button></div>
</div> 
```

jQuery代码是

```
$(document).ready(function(){

    $('div.outer').on('click',".inner #button",function(event){
        console.log(this);//this works
    });
    $('div.outer').find(".inner #button").on("click",function(event){
        console.log(this);//this works
    });
    $('div.outer').find(".outer span").on('click',function(event){
        console.log(this);//this not works
    });
}); 
```

这是一个简单的示例，我正在创建一个具有多个实例的 jquery 插件，因此每个按钮都单击了两次。我`jquery.off`在绑定每个函数之前使用过，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:41:18.380

**ID 必须是唯一的。**

不知道你想做什么，但根据 HTML 结构

```
$('div.outer').find(".outer span").length === 0; //true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:41:32.020

第一个是动态事件处理程序，它将事件绑定到`div.outer`的父级`#button`，但基于`#button`选择器进行过滤，这样即使在事件绑定时元素不存在，它也可以工作，即动态插入元素。

最后两个是常规事件处理程序，`find()`只是在另一个元素中找到一个元素，因此在中间的一个中它搜索`#button`within `.inner`，`.outer`并将常规事件处理程序附加到`#button`.

由于 ID 是唯一的，因此使用 find 方式确实是不必要的，`$('#button').on()`应该足够了。

在最后一个中，单击绑定到跨度，而不是按钮，因此任何单击按钮都不会触发事件，但单击跨度会。

**编辑：**

您的选择器搜索`.outer`inside `.outer`，这就是它不起作用的原因，您应该只在 .outer 内搜索一个跨度，所以这样：

```
$('div.outer').find(".outer span") 
```

应该是这样的：

```
$('div.outer').find("span") 
```

[**小提琴**](http://jsfiddle.net/F7uUF/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:48:36.573

使用 on() 您应该能够将事件侦听器附加到任何元素并指定它可以由另一个（在该元素内）触发；

在这种情况下，事件侦听器将位于 id 为“button”的元素上

```
$('#button').on('click', function(){
    console.log('if you dynamically remove #button from the page the event will be lost');
}) 
```

在这种情况下，事件侦听器将位于元素主体上：

```
$('body').on('click', '#button', function(){
    console.log('if you dynamically remove #button from the page the event will not be lost');
}) 
```

现在，关于使用 find()，我更喜欢使用 css 选择器，试试这样：

```
$('div.outer span').on('click', function(event){
    console.log('this works');
    console.log(event.currentTarget); //the element you have clicked on
}); 
```

# php - 尝试在 Codeigniter 的 MY_Controller 中设置 $data['stuff'] 时收到致命错误：无法使用 stdClass 类型的对象作为数组。为什么？

> ID：14584143
> 
> 赞同：1
> 
> 时间：2013-01-29T13:31:37.997
> 
> 标签：php, codeigniter

我正在尝试根据用户是否登录在 MY_Controller 中设置配置文件 div 框。

如果我可以在控制器中做到这一点

```
$data['name']  = $name; 
```

..那么为什么这会给我“致命错误：不能使用 stdClass 类型的对象作为数组”？

```
 if($this->session->userdata('loggedInStatus') == "TRUE"){
        $data['profileDivFirstName'] = $this->session->userdata('first_name');
        $data['profileDivPicture'] = $this->session->userdata('picture');
        $this->load->vars( $data );
    }else{
        $data['profileDivInfoFirstName'] = "Anonymous User";
        $data['profileDivInfoPicture'] = "/assets/css/img/ico-unknown-user.gif";
        $this->load->vars( $data );
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:48:58.543

您已经实例化`$data`了它是一个对象。由于您在 MY_Controller 中，因此很可能您成功了。您发布的代码并没有向我们展示太多，但是：

```
$data['name']  = $name; 
```

如果是一个对象则不起作用，`$data`因为一个对象希望您使用这种格式：

```
$data->name  = $name; 
```

这将（或无论如何应该）有效，但您应该检查您的代码以确保您没有在其他东西中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:08:04.830

该错误告诉您您正在尝试将 OBJECT（类）用作 ARRAY。这是无法做到的。

# javascript - Jasmine test runner integration with visual studio and a build process

> ID：14584144
> 
> 赞同：3
> 
> 时间：2013-01-29T13:31:41.223
> 
> 标签：javascript, visual-studio, jasmine

how do you integrate Jasmine's test runner with Visual Studio and your custom build process ? I've read an article at codebetter that shows how to achieve this task using FubuMVC and a few other components but I was wondering if you can recommend any alternatives ?

So how do you do that at your workplace ?

Many thanks, Tomek

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:32:08.170

看看 Chutzpah ( [http://chutzpah.codeplex.com/](http://chutzpah.codeplex.com/) )。它集成了用于运行 Jasmine 或 QUnit 测试的测试运行器和命令行选项。在幕后，它使用 PhantomJS（一种无头浏览器）来加载测试并运行它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-10T17:28:54.153

我知道这已经有一年了，但仅供参考，我注意到 Visual Studio 2013 中的一个新的 AngularJS SPA 模板项目 (ASP.NET) 包括 Jasmine (SpecRunner.cshtml)。AngularJS SPA 模板是 VS2013 的扩展（可以安装在 VS2012 和 VS2010 上）。所以它现在就在那里，去 VS 中的扩展和更新找到它！

# php - 使用类型提示时无法传递空参数

> ID：14584145
> 
> 赞同：218
> 
> 时间：2013-01-29T13:31:44.390
> 
> 标签：php, type-hinting

以下代码：

```
class Type {

}

function foo(Type $t) {

}

foo(null); 
```

运行时失败：

> PHP 致命错误：传递给 foo() 的参数 1 不能为空

为什么不允许像其他语言一样传递 null ？

* * *

## 回答 #1

> 赞同：411
> 
> 时间：2013-01-29T13:34:31.110

**PHP 7.1 或更新版本**（2016 年 12 月 2 日发布）

您可以`null`使用此语法显式声明一个变量

```
function foo(?Type $t) {
} 
```

这将导致

```
$this->foo(new Type()); // ok
$this->foo(null); // ok
$this->foo(); // error 
```

所以，如果你想要一个可选参数，你可以遵循约定`Type $t = null`，而如果你需要让一个参数同时接受`null`它的类型，你可以遵循上面的例子。

[你可以在这里](https://wiki.php.net/rfc/nullable_types)阅读更多。

* * *

**PHP 7.0 或更早版本**

您必须添加一个默认值，例如

```
function foo(Type $t = null) {

} 
```

这样，您可以传递一个空值。

这记录在手册中关于[类型声明](http://php.net/manual/en/functions.arguments.php#functions.arguments.type-declaration)的部分中：

> `NULL`如果参数的默认值设置为 ，则声明可以接受值`NULL`。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-11-09T08:55:05.210

从 PHP 7.1 开始，可以使用[**可空类型**](http://php.net/manual/en/migration71.new-features.php)，作为函数返回类型和参数。该类型`?T`可以具有指定 Type`T`或的值`null`。

因此，您的函数可能如下所示：

```
function foo(?Type $t)
{

} 
```

只要您可以使用 PHP 7.1，就应该优先使用这种表示法`function foo(Type $t = null)`，因为它仍然强制调用者显式指定参数的参数`$t`。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-29T13:33:42.650

尝试：

```
function foo(Type $t = null) {

} 
```

查看[PHP 函数参数](http://php.net/manual/en/functions.arguments.php)。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2021-02-27T20:24:17.203

**从 PHP 8.0**（2020 年 11 月 26 日发布）开始，您还可以使用可为[**空的联合类型**](https://www.php.net/manual/en/language.types.declarations.php#language.types.declarations.union.nullable)。

这意味着您可以传递`Type`或`null`作为参数值传递：

```
function foo(Type|null $param) {
    var_dump($param);
}

foo(new Type()); // ok : object(Type)#1
foo(null);       // ok : NULL 
```

阅读有关[联合类型](https://www.php.net/releases/8.0/en.php#union-types)的更多信息。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-01-29T13:43:34.910

正如已经提到的其他答案，这只有在您指定`null`为默认值时才有可能。

但是最干净的类型安全的面向对象解决方案是[NullObject](http://c2.com/cgi/wiki?NullObject)：

```
interface FooInterface
{
    function bar();
}
class Foo implements FooInterface
{
    public function bar()
    {
        return 'i am an object';
    }
}
class NullFoo implements FooInterface
{
    public function bar()
    {
        return 'i am null (but you still can use my interface)';
    }
} 
```

用法：

```
function bar_my_foo(FooInterface $foo)
{
    if ($foo instanceof NullFoo) {
        // special handling of null values may go here
    }
    echo $foo->bar();
}

bar_my_foo(new NullFoo); 
```

# c# - Thread.Sleep() 导致 Process.Kill() 出现问题

> ID：14584147
> 
> 赞同：1
> 
> 时间：2013-01-29T13:31:47.847
> 
> 标签：c#, process

我添加了一行代码让线程休眠 3 秒。

如果我取消注释突出显示的两行代码中的任何一个，我会得到一个错误 - 我知道它与添加睡眠有关 - 但为什么呢？

我假设`myProcess`它本身就是一个线程 - 是这个线程在睡觉吗？
我需要更改什么以使 IE 保持打开 3 秒然后关闭？

```
class MyProcess {

    public static void Main() {

        Process myProcess = new Process();
        ProcessStartInfo ps = new ProcessStartInfo();

        try {

            ps.FileName = @"IExplore.exe";
            ps.WindowStyle = ProcessWindowStyle.Normal;
            myProcess.StartInfo = ps;
            myProcess.Start();

        } catch(Exception e) {
            Console.WriteLine(e.Message);
        }

        Thread.Sleep(3000);

        //>>>>>>>>following throw an error
        //myProcess.Kill();
        //myProcess.CloseMainWindow();
        //>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

        Console.WriteLine("press [enter] to exit");
        Console.Read();
    }
} 
```

这是我收到的错误

> 无法处理请求，因为进程已退出

![在此处输入图像描述](../Images/cfd00ca4150d5fb0d1db9c67a2a2190f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:51:20.417

`InvalidOperationException`如果操作无法完成，您将收到一条消息。在您的代码中，您可能会在调用or`InvalidOperationException`之前收到进程是否已退出的信息。`myProcess.Kill();``myProcess.CloseMainWindow();`

当一个进程已经退出时，你不能杀死它。要解决此问题，请避免在线程空闲时关闭进程。您可以在执行命令之前捕获异常或检查进程是否已退出。

**例子**

```
class MyProcess
{
    public static void Main()
    {

        Process myProcess = new Process(); //Initialize a new Process of name myProcess
        ProcessStartInfo ps = new ProcessStartInfo(); //Initialize a new ProcessStartInfo of name ps

        try
        {
            ps.FileName = @"IExplore.exe"; //Set the target file name to IExplore.exe
            ps.WindowStyle = ProcessWindowStyle.Normal; //Set the window state when the process is started to Normal
            myProcess.StartInfo = ps; //Associate the properties to pass to myProcess.Start() from ps
            myProcess.Start(); //Start the process

        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message); //Write the exception message
        }

        Thread.Sleep(3000); //Stop responding for 3 seconds

        if (myProcess.HasExited) //Continue if the process has exited
        {
            //The process has exited
            //Console.WriteLine("The process has exited");
        }
        else //Continue if the process has not exited
        {
            //myProcess.CloseMainWindow(); //Close the main Window
            myProcess.Kill(); //Terminate the process
        }

        Console.WriteLine("press [enter] to exit"); //Writes press [enter] to exit
        Console.Read(); //Waits for user input
    }
} 
```

**注意**：如果您运行的是 IE8，您可能会注意到 Internet Explorer 8 已实现更改，其中多个打开的浏览器窗口或框架在所有打开的选项卡和窗口（包括用户打开的新 IE 框架窗口）中共享相同的会话 cookie。

您可以使用参数**-nomerge运行进程****IExplore.exe**以运行新的 IE8 窗口会话，并避免将您创建的新进程与之前创建的进程合并（由 IE8 创建的默认进程与其他进程合并）。因此，拥有一个可以从应用程序控制的新进程，而不是由 IE8 创建的进程。

 ****例子**

```
Process myProcess = new Process(); //Initialize a new Process of name myProcess
ProcessStartInfo ps = new ProcessStartInfo(); //Initialize a new ProcessStartInfo of name ps

try
{
    ps.FileName = @"IExplore.exe"; //Set the target file name to IExplore.exe
    ps.Arguments = "-nomerge";
    ps.WindowStyle = ProcessWindowStyle.Normal; //Set the window state when the process is started to Normal
    myProcess.StartInfo = ps; //Associate the properties to pass to myProcess.Start() from ps
    myProcess.Start(); //Start the process
}
catch (Exception e)
{
    Console.WriteLine(e.Message); //Write the exception message
}

Thread.Sleep(3000); //Stop responding for 3 seconds

if (myProcess.HasExited) //Continue if the process has exited
{
    //The process has exited
    //Console.WriteLine("The process has exited");
}
else //Continue if the process has not exited; evaluated if the process was not exited.
{
    myProcess.Kill(); //Terminate the process
} 
```

`-1`此外，如果 IE8 的进程意外终止，`1`如果它被用户终止，并且`0`如果退出将控制权传递给另一个实例，则进程退出代码将等于。

谢谢，
我希望你觉得这有帮助:)**

# algorithm - Heap sort implementation with linked list and arrays

> ID：14584149
> 
> 赞同：0
> 
> 时间：2013-01-29T13:31:50.990
> 
> 标签：algorithm, sorting, heap

Heap sort can be implemented using linked list and arrays.

What would be the ideal method of doing it-using linked list or arrays?

What is the time complexity to build heap using arrays and linked lists?Is it O(nlogn) for both?

What is the time complexity for deletion?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:52:25.880

[二叉堆](http://en.wikipedia.org/wiki/Binary_heap)

大 O 表示法的时间复杂度

```
 Average        Worst case
Space   O(n)           O(n)
Search  N/A Operation  N/A Operation
Insert  O(log n)       O(log n)
Delete  O(log n)       O(log n) 
```

因此，时间复杂度是相同的，与是否使用链表数组无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T13:45:12.523

对于数组，它是 O(nlogn)。因为你可以轻松地获取索引 i 处的元素。这个特性使得获取每个节点的父节点和左/右子节点变得容易。删除的时间复杂度为 O(lgn)。

对于链表，我认为这是一个不同的故事。这取决于您如何定义“下一个”节点。据我所知，它比使用数组更复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:48:46.337

假设实现正确，使用链表或数组的时间复杂度是相同的。

我的博客上有几个堆排序的实现。[从这里](http://programmingpraxis.com/2013/01/25/imperative-heaps/)开始使用传统的基于数组的版本，然后点击链接查看几个链表版本。

# python - 如何获取列表的常见项目数

> ID：14584159
> 
> 赞同：0
> 
> 时间：2013-01-29T13:32:23.723
> 
> 标签：python, algorithm

有一个包含许多列表的字典，例如，

```
 list_dic= {
    q1:[1,2,3,4,5]
    q2:[2,3,5]
    q3:[2,5]
    } 
```

我想获取每个列表的所有常见项目计数，例如 q1 和 q2 的常见项目计数为 3=(2,3,5)

```
q1={q2:3, q3:2}
q2={q1:3,q3:2}
q3={q1:2, q2:2} 
```

我执行此任务的代码是：

```
result = {}
for name, source_list in list_dic.items():
    for target_name, target_list in list_dic.items():
        count = 0
        for item in source_list:
            if item in target_list:
                count+=1
    result[name][target_name] = count 
```

但是这个算法效率低下，我想知道一个更好的算法来完成这个任务

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:44:18.253

我认为应该这样做：

```
import itertools
import collections

q1 = 'q1'
q2 = 'q2'
q3 = 'q3'

dic_list = {
     q1:[1,2,3,4,5],
     q2:[2,3,5],
     q3:[2,5]
     }

#sets are much more efficient for this sort of thing.  Create a dict
#of the same structure as the old one, only with `set` as values 
#instead of `list`
dic_set = {k:set(v) for k,v in dic_list.items()}

new_dic = collections.defaultdict(dict)
for k1,k2 in itertools.combinations(dic_set,2):
     #to get the count, we just need to know the size of the intersection
     #of the 2 sets.
     value = len(dic_set[k1] & dic_set[k2]) 
     new_dic[k1][k2] = value
     new_dic[k2][k1] = value

print (new_dic) 
```

如果您关注评论，事实证明这`combinations`比`permutations`：

```
import itertools
import collections

q1 = 'q1'
q2 = 'q2'
q3 = 'q3'

dic_list = {
     q1:[1,2,3,4,5],
     q2:[2,3,5],
     q3:[2,5]
     }

dic_set = {k:set(v) for k,v in dic_list.items()}

def combo_solution():
     new_dic = collections.defaultdict(dict)
     for k1,k2 in itertools.combinations(dic_set,2):
          value = len(dic_set[k1] & dic_set[k2])
          new_dic[k1][k2] = value
          new_dic[k1][k2] = value
     return new_dic

def perm_solution():
     new_dic = collections.defaultdict(dict)
     for k1, k2 in itertools.permutations(dic_set,2):
          new_dic[k1][k2] = len(dic_set[k1] & dic_set[k2])
     return new_dic

import timeit
print timeit.timeit('combo_solution()','from __main__ import combo_solution',number=100000)
print timeit.timeit('perm_solution()','from __main__ import perm_solution',number=100000) 
```

结果：

```
0.58366894722    #combinations
0.832300901413   #permutations 
```

这是因为`set.intersection`它是一个 O(min(N,M)) 操作——这很便宜，但如果你做的次数是你需要的两倍，则可以加起来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T13:48:01.300

```
from collections import defaultdict
#Create a default dict. You don;t have to handle KeyError condition
result = defaultdict(dict)
list_dic= {
    'q1':[1,2,3,4,5],
    'q2':[2,3,5],
    'q3':[2,5],
    }
#Convert the value list to set list
set_dict = {k:set(v) for k,v in list_dic.items()}
# For both way mapping, you need permutation i.e. (q1, q2) and (q2, q1)
for k1, k2 in permutations(set_dict.keys(),2):
    # Now `&` is Set Intersection. The Len will return the length of the common elements
    result[k1][k2] = len(set_dict[k1] & set_dict[k2])

result
defaultdict(<type 'dict'>, {'q1': {'q3': 2, 'q2': 3}, 'q3': {'q1': 2, 'q2': 2}, 'q2': {'q1': 3, 'q3': 2}}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:49:50.583

如果您不介意列表是否可以包含重复数字，则可以使用 set() 类型

```
>>> s1 = set([1,2,3,4,5])
>>> s2 = set([3,4,5,6,7,8])
>>> s1 & s2
{3, 4, 5} 
```

# jquery - Chrome jquery css奇怪的复选框行为

> ID：14584160
> 
> 赞同：1
> 
> 时间：2013-01-29T13:32:27.397
> 
> 标签：jquery, google-chrome, css

我想我有一个与 chrome 相关的错误，奇怪的是，它突然发生而没有更改我的代码。我制作了一个脚本，用 jquery cookie 记住选中的复选框值。这可行，但由于某种原因，css 存在问题。在 chrome 中，当我重新加载复选框时，复选框被检查错误，直到我将鼠标悬停在它们上方。我正在使用 Chrome 版本 25.0.1364.45 测试版。我怀疑标签：选择器无法正常工作之后。Safari 或 firefox 没有这种行为。

[http://jsfiddle.net/S2YVu/4/](http://jsfiddle.net/S2YVu/4/)

编辑：好的，我认为这条线出了点问题： input[type=checkbox]:checked + label:after

有人熟悉 chrome 中的 CSS3 选择器问题吗？

CSS：

```
.selectbox {
    position: relative;
    display: inline-block;
}

.selectbox input[type="checkbox"] {
    visibility: hidden;
}
.selectbox label {
    cursor: pointer;
    position: absolute;
    width: 15px;
    height: 15px;
    top: 0;
    background: #fcfff4;
    border: 1px solid #000;
    text-indent: 30px;
    white-space: nowrap;
    font-family: @serif;
    font-style: italic;
    letter-spacing: 2px;
    line-height: 17px;
}

.selectbox label:after {
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
    opacity: 0;
    content: '';
    position: absolute;
    width: 6px;
    height: 4px;
    background: transparent;
    top: 2px;
    left: 3px;
    border: 2px solid #333;
    border-top: none;
    border-right: none;
    -webkit-transform: rotate(-45deg);
    -moz-transform: rotate(-45deg);
    -o-transform: rotate(-45deg);
    -ms-transform: rotate(-45deg);
    transform: rotate(-45deg);
}

.selectbox label:hover::after {
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";
    filter: alpha(opacity=30);
    opacity: 0.5;
}

.selectbox input[type=checkbox]:checked + label:after {
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: alpha(opacity=100);
    opacity: 1;
} 
```

# c# - ASP.NET MVC 4 应用程序中的自定义身份验证

> ID：14584162
> 
> 赞同：4
> 
> 时间：2013-01-29T13:32:34.833
> 
> 标签：c#, asp.net-mvc-4

我正在将旧的 ASP.NET Web 窗体应用程序迁移到 ASP.NET MVC 4。我对 ASP.NET MVC 不是很熟悉，所以如果这是一个愚蠢的问题，我深表歉意。简而言之，我的 ASP.NET Web 窗体应用程序使用以下代码行在登录时重定向用户：

```
FormsAuthentication.RedirectFromLoginPage(username, true); 
```

我以为我可以复制并粘贴这段代码。但是，我注意到它试图将用户重定向到“default.aspx”。这个调用的 MVC 等价物是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:46:19.090

表单身份验证*通常*提供一个`returnUrl`作为查询字符串参数（这是我假设`FormsAuthentication.RedirectFromloginPage(username, true)`正在使用的）。话虽如此，向您的登录操作添加一个在 中接收的参数`returnUrl`，然后在您的登录操作中使用它。

```
[HttpPost]
public ActionResult Login(LoginViewModel model, String returnUrl)
{
    if (ModelState.IsValid)
    {
        // perform login
        if (YourFormsAuthentication.YourLoginMethod(mode.username, model.password))
        {
            //
            // Set auth cookie, log user in, etc.
            //

            // Now check for returnUrl and make sure it's present and
            // valid (not redirecting off-site)
            if (!String.IsNullOrEmpty(returnUrl) && Url.IsLocalUrl(returnUrl))
            {
                return Redirect(returnUrl);
            }
            // no returnUrl provided, direct them to default landing page
            return RedirectToRoute("Home");
        }
        else
        {
            ModelState.AddError("", "Username or password are incorrect.");
        }
    }
    return View(model);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:43:27.143

在控制器中的登录方法上添加参数字符串 returnUrl。

然后检查它是空的还是空的。如果不重定向。

```
[HttpPost]
public ActionResult LogOn(LogOnModel model, string returnUrl)
{
       // Do your login
    // if success
                if (!String.IsNullOrEmpty(returnUrl))
                {
                    return Redirect(returnUrl);
                }
} 
```

在您看来，还要传递 returnUrl（这将是 Request.Url）

```
<%: Html.ActionLink("Log On", "LogOn", "ControllerName", new { returnUrl = Request.Url }, null)%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:47:14.330

您在这里有完整的示例：[http ://www.c-sharpcorner.com/UploadFile/cd3310/using-mvc-Asp-Net-tools-create-simple-login-form/](http://www.c-sharpcorner.com/UploadFile/cd3310/using-mvc-Asp-Net-tools-create-simple-login-form/)

使用具有特定操作的控制器查看

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Login(YourModel model)
    {
        if (!ModelState.IsValid)
        {
            return View("Login", model);
        }

        return RedirectToAction("Index");
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T14:06:53.867

在 MVC 4 中，如果您创建一个新应用程序并选择 Internet 应用程序选项，该模板将为表单身份验证连接所有内容，并将设置您使用 SimpleMembership 提供程序，这使得自定义用户配置文件和添加对轻松插件 OAuth 的支持变得更加容易. 您的 web.config 中应该有以下条目。

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication> 
```

如果用户未经过身份验证或授权，这会告诉应用程序重定向到 loginUrl。然后，您只需在控制器或操作上使用[AuthorizeAttribute 。](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)如果您想使用基于角色的授权或仅在没有角色的情况下使用它，您可以将角色添加到此属性。在这里，我为 HomeController 的 Contact 操作添加了 AuthorizeAttribute。

```
 [Authorize(Roles="Admin")] 
    public ActionResult Contact()
    {
        ViewBag.Message = "Your contact page.";

        return View();
    } 
```

此操作在由 MVC 4 Internet 模板创建的默认 HomeController 上进行。用户体验将是，如果他们单击主页上的“联系人”选项卡并且他们没有登录，他们将被重定向到登录页面。一旦他们成功登录，他们将被重定向回联系人页面。因此，MVC 4 Internet 应用程序已经为您准备好了所有内容，您不必显式处理重定向。有关自定义 SimpleMembership 提供程序的更多信息，[您可以阅读此博客](http://kevin-junghans.blogspot.com/2013/01/seeding-customizing-aspnet-mvc.html)。

# javascript - 转义 \u200b（零宽度空间）和其他非法 JavaScript 字符

> ID：14584163
> 
> 赞同：2
> 
> 时间：2013-01-29T13:32:38.097
> 
> 标签：javascript, escaping

我有一组 JavaScript 对象，我引导到后端模板以在页面加载时初始化我的 Backbone.js 集合。它看起来像这样（作为 Twig 模板）：

```
<script type="text/javascript">
(function() {
    var jobCollection = new App.Collections.Item(
        {% for item in items %}
        {
            name: '{{ item.name }}',
            ...
        },
        {% endfor %}
    );
})();
</script> 
```

我遇到的问题是某些文本字段包含破坏 JavaScript 的 \u200b （零宽度空间）。

逃避这些角色的最佳方法是什么？我应该在后端转义它们（我使用带有 Twig 的 Symfony 2 来呈现初始模板）还是应该在客户端使用 JavaScript 转义它们？如何在 JavaScript 或 PHP 中转义零宽度空格字符和其他字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:30:17.270

如果字符只出现在字符串中，或​​者转义`\u200b`为文字，你应该没问题。它们仅作为标识符是非法的。即使作为标识符，如果使用下标符号 ( `obj["aaa\u200b"] = "foo"`)，您仍然可以将它们用作对象属性名称；至少在 Chrome 中，但我不确定这有多安全/兼容。

看几个似乎有效的例子：

```
var escaped = "aaa \u200b bbb";
var unescaped = "bbb ​ ccc";

console.log(escaped.charCodeAt(4));
console.log(unescaped.charCodeAt(4));

var obj = {};
obj[escaped] = "foo";
obj[unescaped] = "bar";
console.log(obj[escaped]);
console.log(obj[unescaped]);
console.log(obj["aaa \u200b bbb"]);
console.log(obj["bbb ​ ccc"]); 
```

[http://codepen.io/anon/pen/JqjEK](http://codepen.io/anon/pen/JqjEK)

您可能也对前段时间写的这个 Q/AI 感兴趣：[“Unexpected token ILLEGAL”没有明显的原因](https://stackoverflow.com/questions/12719859/syntaxerror-unexpected-token-illegal/12719860#12719860)

# c# - 如何使用 T-sql 解密 SSIS 包 XML

> ID：14584167
> 
> 赞同：0
> 
> 时间：2013-01-29T13:32:42.613
> 
> 标签：c#, sql-server, xml, encryption

当我运行这个查询

```
select  cast(cast(packagedata as varbinary(max)) as xml) as PackageData from msdb.dbo.sysssispackages 
```

我得到了 XML 文件的结果，但它被加密了 `<EncryptedData xmlns="w3.org/2001/04/xmlenc#"; Type="w3.org/2001/04/xmlenc#Element"; Salt="Gnk/DB61AQ==" IV="iYcfV0NOGy0="> <EncryptionMethod Algorithm="w3.org/2001/04/xmlenc#tripledes-cbc"; /> <CipherData> <CipherValue>/TtgJ46P9L23ZeGt67n+2OZGXoHiGWcUAWE8CdN1Z2aiF40fAg6DfBWGx62RB7Botxr‌​w+f1Jf1CtR10iMLw0iz+VIcbaPFZj5ZfCm3aDeDLbnwXdb7mIdzNtF/5EOjNph/kPz7PxcUlAOUvsLLmj‌​Gtx92EhWL6KpXufKahnRiwLuZLNc</CipherValue> </CipherData> </EncryptedData>`

有没有使用 T-SQL 进行解密的简单方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-30T18:40:57.520

There is not an easy method to decrypt SSIS package XML.

# javascript - 自动从 html 数据定义数组

> ID：14584168
> 
> 赞同：0
> 
> 时间：2013-01-29T13:32:42.960
> 
> 标签：javascript, jquery, arrays

我在自动从 HTML 数据定义数组时遇到问题。

这是我的数据：

```
<div id="events">
    <div id="blabla" data-title="Five K for charity" data-date="01/13/2013"></div>
    <div id="bleble" data-title="Dinner" data-date="01/25/2013"></div>
    <div id="Div1" data-title="Meeting with manager" data-date="01/01/2013"></div>
</div> 
```

我想定义一个这样的数组：

```
var events = [
        { Title: "Five K for charity", Date: new Date("01/13/2013") },
        { Title: "Dinner", Date: new Date("01/25/2013") },
        { Title: "Meeting with manager", Date: new Date("01/01/2013") }
    ]; 
```

我可以像这样从中获取数据：

```
$("#events > div").each(function (index) {
        console.log("{ Title: " + "\"" + $(this).data("title") + "\", " + "Date: new Date(\"" + $(this).data("date") + "\") }");
    }); 
```

但我不知道如何将它们“打印”到该数组中。有没有办法做到这一点？

我会很高兴得到任何答案:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:35:02.947

```
var events = [];

$("#events > div").each(function (index) {
    events.push({
        Title: $(this).data("title"),
        Date: new Date($(this).data("date"))
    })
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:36:25.360

您目前正在做的是将它们形成为一些脆弱的 JSON 格式。

相反，您应该直接创建一个对象文字；

```
$("#events > div").each(function (index) {
   var obj = { 
       Title: $(this).data("title"), 
       Date: new Date($(this).data("date")) 
   };
}); 
```

并且要将它放在一个数组中，您可以使用[jQuery 的`map()`](http://api.jquery.com/map)：

```
var ar = $("#events > div").map(function (index) {
   return { 
       Title: $(this).data("title"), 
       Date: new Date($(this).data("date")) 
   };
}); 
```

# spring - Spring Transactional annotation 仅导致不需要的回滚

> ID：14584169
> 
> 赞同：0
> 
> 时间：2013-01-29T13:32:44.500
> 
> 标签：spring, spring-transactions

我们使用的是 Spring 3.2.0。我们的服务类都有带有@Transactional 注释的*ServiceImpl，例如在bean vatcodeServiceTarget 上：

```
@Transactional(propagation=Propagation.REQUIRED,readOnly=true)
public VatCodeModel loadBy(String crsname, String crscode, int clientid) {
  ..
} 
```

我们用 TransactionProxyFactoryBean 包装 ServiceImpl

```
<bean id="vatcodeService" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
    <property name="transactionManager" ref="transactionManager"/>
    <property name="target" ref="vatcodeServiceTarget"/>
    <property name="transactionAttributeSource">
        <bean class="org.springframework.transaction.annotation.AnnotationTransactionAttributeSource"/>
    </property>
</bean> 
```

并将生成的 bean 注入到我们的控制器中。如果另一个 ServiceImpl 需要“vatcodeService”，我们实际上会注入“vatcodeServiceTarget”，因此事务边界被丢弃。

这种方法在 Spring 2.0 中运行良好。现在，在 Spring 3.2.0 中，我观察到以下效果：

1.  一个控制器调用另一个 ServiceImpl，事务性的
2.  其他 ServiceImpl 调用 VatcodeServiceImpl#loadBy()。没有围绕 loadBy() 调用的事务边界
3.  VatcodeServiceImpl#loadBy() 无法加载寻找的数据库行并抛出 DataNotFoundException
4.  另一个 ServiceImpl 中的事务现在被标记为仅回滚。

似乎跨越 @Transactional 边界的 RuntimeException 足以标记 tx 仅回滚，即使该特定调用实际上不是事务性的。

我是在配置错误，还是 Spring @Transactional 方面在这里表现异常？

谢谢西蒙尼德伯格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-16T10:52:46.487

为什么你认为没有交易边界？您添加了注释 - 春天添加了方面，它打开事务并将其标记为仅在运行时异常时回滚。如果您真的不想回滚此事务，您可能会抛出一些已检查的异常而不是未检查的异常，但我不明白您为什么要这样做。

# java - 登录失败：403禁止；尝试使用 Netbeans（使用 Amazon API）访问 Eucalyptus 云时

> ID：14584174
> 
> 赞同：0
> 
> 时间：2013-01-29T13:32:47.933
> 
> 标签：java, apache, amazon-web-services, eucalyptus

我想使用 Amazon AWS 访问我的桉树云。

为此，我已将 EndPoint 更改为我的 Cloud CC IP 地址（类似于 172\. 16.90.150:8773/services/Eucalyptus）

但是，它显示错误 403：禁止

谢谢你，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:25:32.010

可以将一些 AWS 客户端工具与 Eucalyptus 一起使用。我假设您使用的是 AWS Java SDK，其中一些版本可以与 Eucalyptus 一起使用。使用此客户端时，您可能会发现由于它签署请求的方式，您需要使用稍微不同的 URL，例如

```
http://172.16.90.150:8773/services/Eucalyptus/ 
```

所以带有尾随的“/”。

Eucalyptus wiki 包含一些关于[工具兼容性](https://github.com/eucalyptus/eucalyptus/wiki/AWS-compatibility)的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:47:08.590

您好，请确保您使用正确的访问密钥和密钥来访问您的 euca 云。

# c# - 如何在编辑项模板中找到控件？

> ID：14584175
> 
> 赞同：10
> 
> 时间：2013-01-29T13:32:49.347
> 
> 标签：c#, asp.net, gridview

我在表单上有一个 gridview 并有一些模板字段，其中之一是：

```
<asp:TemplateField HeaderText="Country" HeaderStyle-HorizontalAlign="Left">
    <EditItemTemplate>
        <asp:DropDownList ID="DdlCountry" runat="server" DataTextField="Country" DataValueField="Sno">
        </asp:DropDownList>
    </EditItemTemplate>
    </asp:TemplateField> 
```

现在在 RowEditing 事件中，我需要获取国家下拉列表的选定值，然后我将该值设置为 Ddlcountry.selectedvalue=value; 这样当编辑项模板的下拉列表出现时，它将显示所选值而不是下拉列表的 0 索引。但我无法获得下拉列表的值。我已经尝试过了：

```
int index = e.NewEditIndex;
DropDownList DdlCountry = GridView1.Rows[index].FindControl("DdlCountry") as DropDownList; 
```

需要帮助。谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-29T13:40:08.520

您需要`GridView`再次绑定数据才能访问`EditItemTemplate`. 所以试试这个：

```
int index = e.NewEditIndex;
DataBindGridView();  // this is a method which assigns the DataSource and calls GridView1.DataBind()
DropDownList DdlCountry = GridView1.Rows[index].FindControl("DdlCountry") as DropDownList; 
```

但相反我会使用`RowDataBound`这个，否则你正在复制代码：

```
protected void gridView1_RowDataBound(object sender, GridViewEditEventArgs e)
{
 if (e.Row.RowType == DataControlRowType.DataRow)
  {
        if ((e.Row.RowState & DataControlRowState.Edit) > 0)
        {
          DropDownList DdlCountry = (DropDownList)e.Row.FindControl("DdlCountry");
          // bind DropDown manually
          DdlCountry.DataSource = GetCountryDataSource();
          DdlCountry.DataTextField = "country_name";
          DdlCountry.DataValueField = "country_id";
          DdlCountry.DataBind();

          DataRowView dr = e.Row.DataItem as DataRowView;
          Ddlcountry.SelectedValue = value; // you can use e.Row.DataItem to get the value
        }
   }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-29T13:40:55.410

您可以尝试使用此代码 - 基于`EditIndex property`

```
var DdlCountry  = GridView1.Rows[GridView1.EditIndex].FindControl("DdlCountry") as DropDownList; 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.gridview.editindex.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.gridview.editindex.aspx)

# tortoisesvn - 使用乌龟 svn 进行分支/合并

> ID：14584176
> 
> 赞同：0
> 
> 时间：2013-01-29T13:32:53.840
> 
> 标签：tortoisesvn

我使用 tortoise svn 创建了一个分支。我切换到那个分支。现在我想拉/合并一些已推送到主干但尚未导入分支的特定修复。

我使用了按范围合并修订的选项。它运行良好，但是当我查看日志时，我发现代码仍处于分支的级别。合并后我没有看到任何区别。不知道这里出了什么问题。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:20:28.547

合并将更改应用于您的工作副本。检查日志不会显示任何内容。只有当您提交合并的更改时，您才会在日志中看到一些内容。

# wif - 将 Identity Foundation 令牌转换为 ClaimsPrincipal

> ID：14584180
> 
> 赞同：1
> 
> 时间：2013-01-29T13:32:59.463
> 
> 标签：wif, adfs

我正在开发一个控制台应用程序，作为通过 AD FS 进行身份验证的概念证明。我到目前为止的代码是

```
using System.IdentityModel.Protocols.WSTrust;
using System.IdentityModel.Tokens;
using System.IO;
using System.Linq;
using System.Security.Claims;
using System.ServiceModel;
using System.ServiceModel.Security;
using System.Xml;
using Thinktecture.IdentityModel.WSTrust;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var factory = new WSTrustChannelFactory(new WindowsWSTrustBinding(SecurityMode.TransportWithMessageCredential), new EndpointAddress("https://dcadfs.security.net/adfs/services/trust/13/windowsmixed"))
            {
                TrustVersion = TrustVersion.WSTrust13
            };

            var rst = new RequestSecurityToken
            {
                RequestType = RequestTypes.Issue,
                KeyType = KeyTypes.Bearer,
                AppliesTo = new EndpointReference("https://dcadfs.security.net/adfs/services/trust/13/windowsmixed")
            };

            var channel = factory.CreateChannel();
            var genericToken= channel.Issue(rst) as GenericXmlSecurityToken;

            if (genericToken != null)
            {
                var sh = new WindowsUserNameSecurityTokenHandler();
                //Next line errors with ID4065: Cannot read security token. Exepected elemt is username
                var token = sh.ReadToken(new XmlTextReader(new StringReader(genericToken.TokenXml.OuterXml)));
                var claimsPrincipal = new ClaimsPrincipal(sh.ValidateToken(token2).First());
            }           

        }
    }
} 
```

它在 ReadToken 上失败，出现预期的名称元素错误，我想我可能使用了错误的处理程序/初始化错误？

我也认为我错过了其他几点

1.  我绝不会向 AD FS 识别依赖方是谁。
2.  由于我没有使用服务，因此我不确定将 AppliesTo 设置为什么，因此我将其设置为 AD FS 端点。

关于其中任何一个的任何建议都会很棒。

真的很难在基于 WCF/配置的方法之外找到这样的例子。我试图在代码中得到这一切，让我更好地理解它是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:06:53.853

1 和 2 是相关的——AppliesTo 指定 ADFS 中的 RP。

返回的是 SAML 令牌 - 因此您需要使用 SamlSecurityTokenHandler 来读取令牌（而不是 WindowsUserName...）。

# extjs - 如何限制 TinyMce 中的特定字符？

> ID：14584184
> 
> 赞同：0
> 
> 时间：2013-01-29T13:33:09.867
> 
> 标签：extjs, tinymce

我在 Ext-Js 4.1 中使用 TinyMce 编辑器，我需要将用户限制为编辑器中的某些特定字符。

我试过 maskRe 但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:40:14.153

当然 maskRe 不会起作用，因为 tinymce 没有使用 textarea 而是使用 contenteditable iframe。我建议你编写一个小函数来不时清理编辑器代码或阻止他们的输入。

# validation - 仅在验证未失败时如何使用 target="_blank" 在新窗口中打开报告

> ID：14584187
> 
> 赞同：6
> 
> 时间：2013-01-29T13:33:17.270
> 
> 标签：validation, jsf, primefaces, report, new-window

我有一个需要在另一个选项卡中打开的报告，但前提是验证没有失败。在我的情况下，验证失败，并且同一页面在另一个选项卡中打开，并出现验证错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:43:52.143

Luiggi 已经回答了 POST 问题。但是，如果报告可通过 GET 请求获得，那么还有其他方法。

1.  `window.open()`中使用`oncomplete`。

    ```
     <h:form>
         ...
         <p:commandButton action="#{bean.submit}" update="@form" 
             oncomplete="if (args &amp;&amp; !args.validationFailed) window.open('reportURL')" />
     </h:form> 
    ```

2.  或者有条件地渲染一个`<h:outputScript>`with `window.open()`。

    ```
     <h:form>
         ...
         <p:commandButton action="#{bean.submit}" update="@form" />
         <h:outputScript rendered="#{facesContext.postback and not facesContext.validationFailed}">
             window.open('reportURL');
         </h:outputScript>
     </h:form> 
    ```

3.  或将 PrimeFaces`Primefaces#execute()`与`window.open()`.

    ```
     public void submit() { 
         // ...
         PrimeFaces.current().executeScript("window.open('reportURL');");
     } 
    ```

第一种方式要求在提交之前已经定义了 URL，后两种方式允许您使用像这样的动态 URL `window.open('#{bean.reportURL}')`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:56:08.180

我不知道这是否是一个明确的答案，但你可以有 2 个：1 将触发服务器验证，其他将在新页面中调用报告。这是一个开始代码：

```
<h:form id="frmSomeReport">
    <!-- your fields with validations and stuff -->

    <!-- the 1st commandLink that will trigger the validations -->
    <!-- use the oncomplete JS method to trigger the 2nd link click -->
    <p:commandLink id="lnkShowReport" value="Show report"
        oncomplete="if (args &amp;&amp; !args.validationFailed) document.getElementById('frmSomeReport:lnkRealShowReport').click()" />

    <!-- the 2nd commandLink that will trigger the report in new window -->
    <!-- this commandLink is "non visible" for users -->
    <h:commandLink id="lnkRealShowReport" style="display:none"
        immediate="true" action="#{yourBean.yourAction}" target="_blank" />

</h:form>
<!-- a component to show the validation messages -->
<p:growl /> 
```

为了检查验证阶段是否包含任何错误，请检查[如何在执行 ajax 命令时找到验证错误的指示（必需=“true”）](https://stackoverflow.com/q/9617914/1065197)

# c++ - 在具有枚举键的映射中使用整数作为键

> ID：14584200
> 
> 赞同：1
> 
> 时间：2013-01-29T13:34:08.500
> 
> 标签：c++, map, stl, enums, key

```
 enum aaa {a, b, c};

 std::map <aaa, int> container;

 container[0]; //compilation error 
```

我知道在这种情况下容器是空的，我会得到段错误，但这不是问题。枚举是算术类型，为什么会出现问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T13:36:20.430

你在这两个方面都错了。:)

An`int`不能隐式转换为 an `enum`，**需要显**式转换，并且您不会得到段错误，因为`container[0]`会在映射中对新值进行值初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:35:52.360

容器的键类型是`aaa`. 的类型`0`是`int`。`int`不能隐式转换为`aaa`，因此会出现编译器错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:35:58.847

编译器期望密钥类型为`aaa`。所以你需要写`container[a]`而不是你做什么。

# vba - 批量更改 Microsoft Word 2003 中的字母

> ID：14584207
> 
> 赞同：0
> 
> 时间：2013-01-29T13:34:25.190
> 
> 标签：vba, ms-word

我在 Microsoft Word 2003 中有一个包含大约 1000 个字母的文件夹。

这些字母的标题具有相似的布局，但内容可能不同。标题的布局是一个 2 列 2 行的表格，但第二列的单元格合并了。在标题表之前总是有两个回车。

我需要进入每个字母并删除第一列和第一单元格的内容以及第二列的内容，将其替换为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:00:32.823

您可以使用 VBA 宏遍历所有文件并将更改应用于表，例如使用以下代码：

```
Sub CleanHeader()
    Dim strDirectory As String
    Dim strFile As String

    strDirectory = "C:\tmp\"
    strFile = Dir(strDirectory & "*.doc")

    Do While strFile <> ""
        Dim oDoc As Document
        Dim oTable As Table

        Set oDoc = Documents.Open(FileName:=strDirectory & strFile)
        Set oTable = oDoc.Tables(1) ' get the correct table here
        oTable.Columns(1).Delete ' deletes an entire column
        oTable.Cell(1, 2).Range.text = "" ' empties a cell

        oDoc.Close SaveChanges:=True
        strFile = Dir
    Loop
End Sub 
```

# c# - 如何在 C# 中将多个函数作为约束参数传递？

> ID：14584210
> 
> 赞同：1
> 
> 时间：2013-01-29T13:34:36.770
> 
> 标签：c#, linq, .net-4.0, methods, delegates

对于我正在尝试学习的内容，这可能是一个措辞不当的问题，所以我将解释我正在尝试做什么。我使用以下表达式创建了以下列表：

```
var showIndexes = from item in lItems
                               where WildcardString.IsMatch(item.RecordId.ToString(), filter) ||
                                     WildcardString.IsMatch(item.Tokens.ToString(), filter) ||
                                     WildcardString.IsMatch(string.Format("{0}:{1}", item.OwnerID.SystemName, item.OwnerID.Port.ToString()), filter) ||
                                     WildcardString.IsMatch(item.ChildID.UserName, filter) ||
                                     WildcardString.IsMatch(item.TypeOfLicense.ToString(), filter) ||
                                     WildcardString.IsMatch(item.ExpiryTime.DateTime.ToLocalTime().ToString(), filter)
                               select item.RecordId.ToString(); 
```

我想将此表达式放入一个函数中，并将“where”中使用的约束作为单个参数传递。我如何实现这一目标？在处理文件属性（当您选择不同的属性枚举时）时，我已经看到使用按位 OR 的类似功能，所以我相信应该可以编写我自己的函数，该函数将一组委托作为“where”规则。

如果相关，则 WildcardString.IsMatch(string, string) 是一个布尔函数。此外，我有三个不同的函数执行完全相同的操作，但在不同的列表中，这就是为什么我想学习如何将其简化为单个函数，只需传递列表和选择规则。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:38:55.033

只需定义一个谓词：一个接受`item`并返回布尔值的函数。

假设它`item`是类型`Record`并且`filter`在范围内：

```
Func<Record, bool> predicate = r =>
    WildCardString.IsMatch(r.RecordId.ToString(), filter) ||
    WildCardString.IsMatch(...); 
```

然后，您可以将`predicate`其视为一等值（存储它，将其作为参数传递等）并`IEnumerable<Record>`使用

```
var filtered = enumerable.Where(predicate); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T13:39:25.847

那么只需将 where 部分重构为一个函数：

```
public bool MyIsMatch(MyType item, String filter)
{
    return
    WildcardString.IsMatch(item.RecordId.ToString(), filter) ||
    WildcardString.IsMatch(item.Tokens.ToString(), filter) ||
    WildcardString.IsMatch(string.Format("{0}:{1}", item.OwnerID.SystemName, item.OwnerID.Port.ToString()), filter) ||
    WildcardString.IsMatch(item.ChildID.UserName, filter) ||
    WildcardString.IsMatch(item.TypeOfLicense.ToString(), filter) ||
    WildcardString.IsMatch(item.ExpiryTime.DateTime.ToLocalTime().ToString(), filter);
} 
```

然后调用它：

```
var showIndexes = from item in lItems where MyIsMatch(item, filter) select item.ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:44:51.997

您可以创建一个带有有效值列表的 Is.Match 版本

```
public static bool IsMatch(IEnumerable<object> values, filter) {
    return values.All(v => IsMatch(v.ToString(),filter))
} 
```

在你的情况下，你会像这样使用它

```
var values = new object[]{
                    item.RecordId,
                    item.Tokens,
                    string.Format("{0}:{1}", item.OwnerID.SystemName, item.OwnerID.Port),
                    item.ChildID.UserName
                    item.TypeOfLicense
                    item.ExpiryTime.DateTime};

var showIndexes = from item in lItems
                  where WildcardString.IsMatch(values,filter)
                           select item.RecordId.ToString(); 
```

I've chose to use `IEnumerable<object>` instead of `IEnumerable<string>` to remove the `.ToString()` from each item this however does come with a sleight cost since you'll be boxing and unboxing any ValueTyped values. If it's on an identified performance critical path you should use `IEnumerable<string>` instead

# android - 获取活动背景颜色

> ID：14584213
> 
> 赞同：2
> 
> 时间：2013-01-29T13:34:42.377
> 
> 标签：android, android-layout

如何获取活动背景颜色？当我使用

```
//View activityLayout = getActivityLayout();
((PaintDrawable) activityLayout.getBackground()).getPaint().getColor(); 
```

我得到异常：ColorDrawable 不能转换为 PainrDrawable。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:38:48.260

1st 获取活动的处理程序获取使用的根布局的句柄，然后在其上设置背景颜色。根布局是您调用的任何内容`setContentView`。

```
setContentView(R.layout.main);

  // Now get a handle to any View contained 
  // within the main layout you are using
  View someView = findViewById(R.id.randomViewInMainLayout);

  // Find the root view
  View root = someView.getRootView()

  // Set the color
  root.setBackgroundColor(android.R.color.red); 
```

或者你可以在你的活动中使用它

```
getWindow().getDecorView().setBackgroundColor(Color.WHITE); 
```

# java - 不能从静态上下文中引用非静态方法

> ID：14584215
> 
> 赞同：0
> 
> 时间：2013-01-29T13:34:45.030
> 
> 标签：java, non-static

> **可能重复：**
> [在 Java 中的静态方法中调用非静态方法](https://stackoverflow.com/questions/2042813/calling-non-static-method-in-static-method-in-java)

当我尝试从我的主函数调用涉及已定义对象的方法时，我遇到了“无法从静态上下文引用非静态方法”错误。

我有三个类：Person 类、Book 类和包含主方法的第三类。

现在，我被要求在 main() 中创建四个 Person 实例，并定义一个方法“doesAnybodyWantIt(Book b)”，询问这四个人是否想要这本书。它看起来像这样：`doesAnybodyWantIt(Book b){ me.doIwantIt(b); lisa.doIwantIt(b).. with the four person-objects).`

所以我担心，javac 不知道四个 Person-objects 存在并引发错误。我知道我可以改为将方法编写为 doesAnybodyWantIt(Book b, Person a, ... )，但这不是我被问到的。

所以我的问题是：有没有办法在不将 Persons 作为参数传递给`doesAnybodyWantIt`-method 的情况下绕过这个问题？我试图`Person me = new Person(..)`在没有运气的情况下包含在构造函数方法中。

在这种类型的设置中，我想对我知道我将定义的对象做特定的事情，我如何回避错误？

我不确定我是否应该包含原始源代码；所有的方法和参数都被赋予了挪威名字，所以我担心它不会很可读。

非常感谢大家！马吕斯

感谢您的回复！你当然是对的，我必须在这个混乱的问题中包含一些代码。

```
class Error{
private Person jeg;

public void doesAnybodyWantIt(Bok b){  //This method has to be declaired withink the classm, and can only take the Bok b as a parameter. 
Bok bok = jeg.vilJegHaBoka(b);
// loops over the four persons in question. 
}

public static void main(String[] args){
Person jeg = new Person("Jeg", "java");
Person lisa = new Person("Lisa", "crime");
Person ramiz = new Person("Ramiz", "food");
Person emil = new Person("Emil", "sports");
doesAnybodyWantIt(new Bok("java"));  
}

}

class Bok{
private String kat;

Bok(String k){ //the category of the book is assigned to kat as a string. 
kat = k;
}

public String kategori(){return kat;} //returns the category.

}

class Person{
private String navn;  //name
// private Person bestevenn; non-relevant
private String bokKat; // The category of books that is at interest to the person.

Person(String navnet, String kat){   //sets the name and category of books. 
navn = navnet;
bokKat = kat;
}

private boolean mittInteressefelt(Bok b){  //Tests if the book's category is the same as my interest. 
if (bokKat.equals(b.kategori())){        //Returns true if interested. else false.
return true;
}
else{ 
return false;
}
}

public Bok vilJegHaBoka(Bok b){              //A method to decide if the book will be kept or not. Returns null if i want the book, and the book otherwise. 
if (mittInteressefelt(b) == true){  return null; }
else { return b;}

}
} 
```

一个人有一个名字和感兴趣的领域，一本书有一个类别。作业说我应该创建一个方法 vilNoenHaBoka (= doesAnybodyWantTheBook) 循环遍历 main 中创建的四个特定 Person-objects，并询问他们每个人是否想要这本书。它还指出该方法应该看起来像 public void vilNoenHaBoka(Bok b)。现在，我对提出这个明确与作业相关的问题感到非常难过，如果这不合适，请告诉我。然而，我只是想知道解决这个问题的好方法是什么——例如，我应该将 Person-objects 传递给 vilNoenHaBoka() 吗？

再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:36:59.633

我认为除了您的`main()`方法之外，您不需要任何静态上下文。相反，您应该询问每个人`Person`是否想要一本书，例如

```
List<Person> persons = ... // and populate your list
for (Person p : persons) {
   if (p.wantsBook(book)) {
      ...
   }
} 
```

OO 的关键是您*告诉对象为您做事*，而不是提取信息并自己做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:46:59.397

看起来你被要求做奇怪的事情。如果我理解你，你被要求在类中有一个静态方法，并让这个方法迭代你的 Person 对象并用它们做“某事”。Tou 也被问到静态的 doesAnybodyWantIt 只需要一本书作为参数。如果这是你被要求的（这不是一件很好的事情），我能看到的唯一选择是在类上有一个静态的 List 属性来存储你的 Persons。该静态列表应该可以从静态 dosAnybodyWantIt 方法的内部获得，这样您就可以访问您的人员，而无需在方法参数中传递他们。

# jquery - 如何在具有相同类的多个元素之间随机化 jquery 动画

> ID：14584216
> 
> 赞同：0
> 
> 时间：2013-01-29T13:34:49.413
> 
> 标签：jquery, animation

我有 10 个具有相同类“.tile”的框，并且我编写了一段 jquery 代码，它将在文档加载时运行：

HTML：

```
<li>
    <a class="tile" href="#dev">
        <div class="boximg"></div>
        <div class="boxttl">
            <span class="engttl">Develope Your Mobile</span>
            <span class="fattl">آموزش و توسعه موبایل</span>
        </div>
    </a>
</li> 
```

查询：

```
function func2($this) {
    if ($(this).find('.engttl').length)
        $this = this;

    if ($($this).attr('_to_animate') != 'true')
        return;

    $($this).find('.engttl').delay(2000).animate({marginTop:"-23px"},1100,'easeOutExpo',function(){
        var $this2 = this;
        setTimeout(function(){
            $($this2).animate({marginTop:"0"},1100,'easeOutExpo',function(){
                setTimeout(function(){ func2($this); },1500);
            });
        },1500);
    });
}
$('.tile').each(function(){
    $(this).attr('_to_animate', 'true');
    func2(this);
}); 
```

它按我的预期工作得很好，但我怎样才能随机化每个“.tile”之间的动画？使用我的代码，在文档加载后，我们会同时看到所有“.tile”的动画，但我想在不同的时间分别查看每个“.tile”的动画。如果有人知道该怎么做，我将不胜感激？..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:54:07.893

换掉你`.delay(2000)`的`.delay(Math.random() * 2000 + 1000)`

2000 和 1000 值总共延迟 1000 到 3000 毫秒。您不需要在调用中使用任何参数`random()`。

# ruby-on-rails - 如何将 Facebook 评论添加到 Rails 应用程序

> ID：14584218
> 
> 赞同：2
> 
> 时间：2013-01-29T13:35:07.657
> 
> 标签：ruby-on-rails, facebook, comments

我有一个用 ruby​​ on rails 创建的简单博客，我的模型包括帖子、类别和分类。即post通过分类属于很多类别

post.rb

```
class Post < ActiveRecord::Base
   has_many :categorizations
   has_many :categories, through: :categorizations
  attr_accessible :author, :description, :title, :photo, :category_ids    
end 
```

类别.rb

```
class Category < ActiveRecord::Base
  attr_accessible :name
  has_many :categorizations
  has_many :posts, :through => :categorizations
end 
```

分类.rb

```
class Categorization < ActiveRecord::Base
  attr_accessible :category_id, :position, :post_id
  belongs_to :post
  belongs_to :category
end 
```

**应用程序中没有用户模型**我希望能够向帖子模型添加 facebook 评论，以便访问我的应用程序的任何人都可以对任何帖子发表评论，也是一种我可以计算具有最高 facebook 评论的帖子的方法，这样我就可以利用它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:39:00.610

读[这个](http://developers.facebook.com/docs/reference/plugins/comments/)

你只需要在你的应用中包含这样的东西

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=504323752911178";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

和`Place the code for your plugin wherever you want the plugin to appear on your page.`

```
<div class="fb-comments" data-href="http://example.com" data-width="470" data-num-posts="2"></div> 
```

`data-href`你的帖子的网址在哪里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:45:50.620

你可以看看这个 gem，[https://github.com/intridea/omniauth](https://github.com/intridea/omniauth) 你可以使用这个 gem 做很多事情，你可以存储在你的数据库中。

# dynamics-crm-2011 - ms crm 2011 重新加载新窗口

> ID：14584222
> 
> 赞同：2
> 
> 时间：2013-01-29T13:35:34.367
> 
> 标签：dynamics-crm-2011

我复制了一个报价（包含所有引用的细节）并在新窗口中打开它。现在我想重新加载新窗口以重新计算新报价的总额。

如何重新加载新窗口？如果我把它放在一个窗口的 Onload 中，那么我有一个无限循环，因为窗口一直在重新加载。

这是最好的方法吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:30:49.360

它不应该一直在重新加载。除非你要求，否则不会。虽然，如果您执行保存操作，将执行重新加载以刷新帧。你的细节很稀疏，但我猜你想重新计算加载值但不存储它们。

如果您想在执行计算后直接存储值（而不是让用户单击*save*），您可以调用`save()`method. 在我看来，调用计算的正确位置`onchange()`是您将值复制到的字段。

最终，还有两种方法。首先是创建一个插件，该插件将在您检索实例并填充字段之前触发。

另一个，这只是一个猜测，将在功能区中添加一个新按钮。几个月前我们已经这样做了。除了*save&new*我们现在还有*save©*，它将当前表单保存到数据库并打开一个新表单，其中包含新关闭的表单中的预填充值。

# c# - 未启用 gzip 时的解决方法

> ID：14584223
> 
> 赞同：0
> 
> 时间：2013-01-29T13:35:49.907
> 
> 标签：c#, asp.net-mvc-3, gzip

由于各种原因，我的托管公司没有启用 gzip。我可以手动压缩 JS 和 CSS 文件，然后将它们提供给接受 gzip 文件的客户端吗？

或者，是否有任何代码片段可以在应用程序代码中即时执行 gzip 压缩？

使用 MVC3 C#，无权访问 ISS 配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:41:11.897

如果您要提供的文件是固定的，您应该可以在其他地方压缩并上传它们而不会遇到任何麻烦。

# regex - 生成正则表达式

> ID：14584226
> 
> 赞同：-1
> 
> 时间：2013-01-29T13:35:53.777
> 
> 标签：regex, numbers

任何人都可以帮我创建一个可以检查数字是否有 2 和 4 个重复数字的正则表达式，例如如何检查这个 no `5555122`。

我想通过正则表达式知道有第四个双倍的重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:48:11.033

您可以使用反向引用

```
(\d)\1{3} 
```

这将检查 4 位数字的重复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:56:00.750

**尝试这个**

```
(\d)(?:\1{3}|\1) 
```

**解释**

```
"
(           # Match the regular expression below and capture its match into backreference number 1
   \\d          # Match a single digit 0..9
)
(?:         # Match the regular expression below
               # Match either the regular expression below (attempting the next alternative only if this one fails)
      \\1          # Match the same text as most recently matched by capturing group number 1
         {3}         # Exactly 3 times
   |           # Or match regular expression number 2 below (the entire group fails if this one fails to match)
      \\1          # Match the same text as most recently matched by capturing group number 1
)
" 
```

**编辑**

里面的图案`(?:\1{3}|\1)`，需要多加注意。如果是这样`(?:\1|\1{3})`，它将与预期不符。因为，`The Regex-Directed Engine Always Returns the Leftmost Match`。

# sharepoint - Sharepoint 获取数据

> ID：14584228
> 
> 赞同：1
> 
> 时间：2013-01-29T13:35:56.757
> 
> 标签：sharepoint, sharepoint-2010

我有包含数千个数据的共享点列表。如果我在 caml 查询生成器中执行查询，则需要一秒钟来获取数据。当我尝试使用 spservice / c# 代码在 sharepoint 中获取数据时，执行该查询需要 15 秒。为什么会有这么多不同。任何人都可以建议。

我正在使用 SPService js 来获取数据。我使用的代码是：

```
var querySkill = "<Query><Where><And><Eq><FieldRef Name='User_x003a_ID' /><Value Type='Lookup'>"+rowUserId+"</Value></Eq><And><Eq><FieldRef Name='Role_x003a_ID' /><Value Type='Lookup'>"+rowRoleId+"</Value></Eq><And><Eq><FieldRef Name='Skill_x0020_Category_x003a_ID' /><Value Type='Lookup'>"+rowCategoryId+"</Value></Eq><Eq><FieldRef Name='Skill_x0020_Group_x003a_ID' /><Value Type='Lookup'>"+rowGroupId+"</Value></Eq></And></And></And></Where></Query>"
        var camlViewFieldsSkill = "<ViewFields><FieldRef Name='Fulfillment' /></ViewFields>";
        var groupPer;
        var groupArray = new Array();
        $().SPServices({
            operation: "GetListItems",
            async: false,
            listName: "User Skills",
            CAMLQuery: querySkill,
            CAMLViewFields: camlViewFieldsSkill,
            completefunc: function (xData, Status) {
                $(xData.responseXML).find("z\\:row, row").each(function () {
                  var skillId = $(this).attr("ows_ID");
                  var skillName=$(this).attr("ows_Skill").split("#")[1];
                  var fulfilment=$(this).attr("ows_Fulfillment");
                    $(subGridSkill).jqGrid('addRowData', skillId, { id: skillId, skillid: skillId, skill:skillName, skillfulfillment: fulfilment });

                });

            }
        }); 
```

即使我正在编写服务器端代码，也需要 15-20 秒来获取数据。请帮忙

问候普里亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:29:03.207

不知道为什么在 CAML 构建器中您的查询速度很快。可以加快查询速度的方法是索引您用于搜索的字段：

[http://msdn.microsoft.com/en-us/library/ff798465.aspx](http://msdn.microsoft.com/en-us/library/ff798465.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:51:19.330

这是一个[链接](http://sympmarc.com/2012/04/12/when-to-choose-spservices-vs-the-client-side-object-model-csom/)，解释了使用 SPServices 和 CSOM 之间的区别，其中还包括它们的优点和缺点。

也许 CAML 构建器使用 RESTful Web 服务，这可能会影响您的查询性能，我们都知道 javascript/jquery 存在性能问题。

您可能想尝试转换为 CSOM 并检查它是否会影响代码的性能。如果您需要示例代码块，请告诉我，我很乐意为您编写一个。

# android - 如何更改 SimpleExpandableListAdapter 中的文本颜色

> ID：14584229
> 
> 赞同：1
> 
> 时间：2013-01-29T13:35:57.147
> 
> 标签：android, expandablelistadapter

我正在使用 ExpandableListFragment 在 TabHost 片段内创建 ExpandableList

我从这里得到了 ExpandableListFragment 的代码[https://gist.github.com/1316903](https://gist.github.com/1316903)

它似乎工作正常，除了我不知道如何更改文本颜色。

我的实现看起来像这样

```
public class LocalListFragment extends ExpandableListFragment {

    private static final String NAME = "NAME";
    private static final String IS_EVEN = "IS_EVEN";

    private ArrayList<String> mGroups;
    private ArrayList<ArrayList<Song>> mChildren;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
        // Set up our adapter

        List<Map<String, String>> groupData = new ArrayList<Map<String, String>>();
        List<List<Map<String, String>>> childData = new ArrayList<List<Map<String, String>>>();
        for (int i = 0; i < 10; i++) {
            Map<String, String> curGroupMap = new HashMap<String, String>();
            groupData.add(curGroupMap);
            curGroupMap.put(NAME, "GROUP" + i);
            //curGroupMap.put(IS_EVEN, (i % 2 == 0) ? "This group is even" : "This group is odd");

            List<Map<String, String>> children = new ArrayList<Map<String, String>>();
            for (int j = 0; j < 5; j++) {
                Map<String, String> curChildMap = new HashMap<String, String>();
                children.add(curChildMap);
                curChildMap.put(IS_EVEN, "Child " + j);
            }
            childData.add(children);
        }

        mAdapter = new SimpleExpandableListAdapter(
            getActivity().getApplicationContext(),
            groupData,
            android.R.layout.simple_expandable_list_item_1,
            new String[] { NAME, IS_EVEN },
            new int[] { android.R.id.text1, android.R.id.text2 },
            childData,
            android.R.layout.simple_expandable_list_item_2,
            new String[] { NAME, IS_EVEN },
            new int[] { android.R.id.text1, android.R.id.text2 }
        );

        //TextView tv = (TextView)getActivity().findViewById(android.R.id.text1);
        //tv.setTextColor(0xffff0000);
        setListAdapter(mAdapter);

        return super.onCreateView(inflater, container, savedInstanceState);
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        Log.i("TAG", "Item selected");
    }

} 
```

我的猜测是“new int[] { android.R.id.text1, android.R.id.text2 },”行与它有很大关系，但我对此有点困惑。

有人可以帮忙吗？我需要创建新的 TextView id 并指定 textColor 吗？我试过但无法弄清楚。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T14:10:46.103

只是 orverride 列表适配器的 getview 方法：

```
mAdapter = new SimpleExpandableListAdapter(
            getActivity().getApplicationContext(),
            groupData,
            android.R.layout.simple_expandable_list_item_1,
            new String[] { NAME, IS_EVEN },
            new int[] { android.R.id.text1, android.R.id.text2 },
            childData,
            android.R.layout.simple_expandable_list_item_2,
            new String[] { NAME, IS_EVEN },
            new int[] { android.R.id.text1, android.R.id.text2 }){

                @Override
                public View getChildView(int groupPosition, int childPosition,
                        boolean isLastChild, View convertView, ViewGroup parent) {

                    TextView tv =  (TextView) super.getChildView(groupPosition, childPosition, isLastChild,convertView, parent);
                    //change background of tv here
                    return tv;
                }

                @Override
                public View getGroupView(int groupPosition, boolean isExpanded,
                        View convertView, ViewGroup parent) {
                    // TODO Auto-generated method stub
                    TextView tv = (TextView) super.getGroupView(groupPosition, isExpanded, convertView, parent);
                    //change background of tv here
                    return tv;
                }

    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:05:49.310

感谢 Anand，该语法看起来比创建新类更简洁。我不知道你可以重写方法而不必创建派生类，这是 c++ 所没有的。

但是，您的代码在 getChildView 中略有错误，它会崩溃。以下作品

```
 mAdapter = new SimpleExpandableListAdapter(
            getActivity().getApplicationContext(),
            groupData,
            android.R.layout.simple_expandable_list_item_1,
            new String[] { NAME, IS_EVEN },
            new int[] { android.R.id.text1, android.R.id.text2 },
            childData,
            android.R.layout.simple_expandable_list_item_2,
            new String[] { NAME, IS_EVEN },
            new int[] { android.R.id.text1, android.R.id.text2 }
        ) {
            @Override
            public View getChildView(int groupPosition, int childPosition, 
                    boolean isLastChild, View convertView, ViewGroup parent)
            {
                final View itemRenderer = super.getChildView(groupPosition, childPosition, isLastChild, convertView, parent);
                final TextView tv = (TextView)itemRenderer.findViewById(android.R.id.text2);
                tv.setTextColor(Color.BLACK);
                return itemRenderer;
            }

            @Override
            public  View    getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
                TextView tv = (TextView) super.getGroupView(groupPosition, isExpanded, convertView, parent);
                tv.setTextColor(Color.BLUE);
                return tv;
            }
        }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:10:25.593

我想出了一种方法

我像这样创建了 SimpleExpandableListAdapter 的派生类（或 java 所说的任何东西）

```
class MySimpleExpandableListAdapter extends SimpleExpandableListAdapter {

        public MySimpleExpandableListAdapter(Context context,
                List<? extends Map<String, ?>> groupData, int groupLayout,
                String[] groupFrom, int[] groupTo,
                List<? extends List<? extends Map<String, ?>>> childData,
                int childLayout, String[] childFrom, int[] childTo) {
            super(context, groupData, groupLayout, groupFrom, groupTo, childData,
                    childLayout, childFrom, childTo);
            // TODO Auto-generated constructor stub
        }

        @Override
        public View getChildView(int groupPosition, int childPosition, 
                boolean isLastChild, View convertView, ViewGroup parent)
        {
            final View itemRenderer = super.getChildView(groupPosition, childPosition, isLastChild, convertView, parent);
            final TextView tv2 = (TextView)itemRenderer.findViewById(android.R.id.text2);
            tv2.setTextColor(0xff0000ff);
            return itemRenderer;
        }

        @Override
        public  View    getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent){

            final View itemRenderer = super.getGroupView(groupPosition, isExpanded, convertView, parent);
            final TextView tv = (TextView)itemRenderer.findViewById(android.R.id.text1);
            tv.setTextColor(0xff00ff00);
            return itemRenderer;
         }
    } 
```

这里的关键是 getChildView 和 getGroupView 的覆盖，我猜它允许我弄乱 android.R.id.text1 和 2 资源。我怀疑这是最有效的方法，但它似乎有效。

# c# - Visual Studio 2010 在 C# 错误中填充 word 模板

> ID：14584230
> 
> 赞同：1
> 
> 时间：2013-01-29T13:35:57.457
> 
> 标签：c#, templates, ms-word

我一直在 Visual Studio 2010 中开发我的第一个应用程序，但我似乎无法找到解决此问题的方法。我正在尝试修改 Word 模板并使用我自己的自定义文本填充它。所以我使用下面的代码来做到这一点。

但是每次我尝试调试器都会停在这一行：`oWordDoc = oWord.Documents.Add(ref oTemplatePath, ref oMissing, ref oMissing, ref oMissing).`

“COMException 未处理。Word 无法读取此文档。它可能已损坏。”

我已经输入了所有必需的命名空间并添加了对 word 的引用。我正在使用 Visual Studio 2010 和 Microsoft Word 2007。

```
private void fnGenerateDoc() 
{
    Object oMissing = System.Reflection.Missing.Value;

    Object oTrue = true;
    Object oFalse = false;

    Word.Application oWord = new Word.Application();
    Word.Document oWordDoc = new Word.Document();

    oWord.Visible = true;

    Object oTemplatePath = "Test1.dot";
    oWordDoc = oWord.Documents.Add(ref oTemplatePath, ref oMissing, ref oMissing, ref oMissing);

    foreach (Word.Field myMergeField in oWordDoc.Fields)
    {
        Word.Range rngFieldCode = myMergeField.Code;
        String fieldText = rngFieldCode.Text;

        if (fieldText.StartsWith(" MERGEFIELD"))
        {

            Int32 endMerge = fieldText.IndexOf("\\");
            Int32 fieldNameLength = fieldText.Length - endMerge;
            String fieldName = fieldText.Substring(11, endMerge - 11);

            fieldName = fieldName.Trim();

            if (fieldName == "NaslovFirma")
            {
                myMergeField.Select();
                oWord.Selection.TypeText("Nesto");
            }
        } 
```

# javascript - 查找带有指定主题标签的推文并发布到网页上

> ID：14584233
> 
> 赞同：0
> 
> 时间：2013-01-29T13:36:00.513
> 
> 标签：javascript, json

我进行了一些搜索，发现了一个帖子，该帖子介绍了如何找到主题标签，由用户**gnab**发布。

> 您可以简单地获取[http://search.twitter.com/search.json?q=%23test](http://search.twitter.com/search.json?q=%23test)以获取包含 JSON 格式 #test 的推文列表，其中 %23test 是 #test URL 编码的。

找到推文后，我想将其加载到页面上。此页面将不断刷新包含此主题标签的最新推文。我才刚刚开始使用 HTML、CSS 和一些 jQuery，所以这对我来说很新。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:42:54.933

它非常简单，如果您有推特帐户登录到您的推特帐户并单击设置并检查小部件选项。根据您的意愿创建一个新的小部件配置并单击添加小部件，您将获得一段代码只需复制粘贴并将其放入 iframe 中。你不必为此伤脑筋。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:34:48.260

看看我制作的这个片段，我想它会给你带来一些想法：

[http://jsfiddle.net/TgTtV/](http://jsfiddle.net/TgTtV/)

```
lastDate = false;
setInterval(function() {

  function compareDates (argument) {
    return (new Date(argument.created_at) > lastDate);
  }

   jQuery.ajax({
      url: 'http://search.twitter.com/search.json',
      type: 'GET',
      dataType: 'jsonp',
      data: {q: encodeURIComponent('#test')},

      success: function(data, textStatus, xhr) {
          //If it's the first time running, prepend all tweets to the page
          if(!lastDate) {
            for(i in data.results) {
                $('body').prepend('<p>'+data.results[i].from_user+': '+data.results[i].text+'</p>');
            }
          } else { //Only new tweets, filtered by date are added
            var newMessages = data.results.filter(compareDates);
              //Just for test
              console.log(newMessages);
            for(i in newMessages) {
                $('body').prepend('<p>'+newMessages[i].from_user+': '+newMessages[i].text+'</p>');
            }
          }

          lastDate = new Date(data.results[0].created_at);
      }
    });

}, 10000); 
```

说明：该片段首先从您的查询中加载一堆推文（在本例中为 #test 标签），并将用户名和推文内容放在一个段落中。第一次加载后，它继续加载推文，但使用 compareDates 函数按日期过滤它们，并在页面中仅显示新推文。为了更好地理解，我建议您在打开 Firebug 的控制台的情况下测试此代码段。

# java - Documentum: Oracle database Date time difference and I_LATEST_ FLAG

> ID：14584238
> 
> 赞同：3
> 
> 时间：2013-01-29T13:36:13.197
> 
> 标签：java, oracle11g, documentum

I am not sure how to phrase technically properly.

## Introductions

We are using documentum 6.0 and oracle 11g. I have try to search documentum using DQL and it fail miserablely in terms of performance even after index and tuning.

Part of the reason is because how documentum translate -> any (cat="abc" and cat ="aaa" and cat ="ccc") for repeating values

I'm trying to find documents with cat="abc", cat ="aaa" and cat ="ccc", and it will translate into multiple exist in subqueries.

There are also other reasons like joining table and etc.

Therefore I decided to query the generated oracle table directly.

## So far the POC seems rather successful but I have a few issues

1) I realize the old version are stored in the same table and the newest record is mark by a "1" for I_LATEST_FLAG

May I know where I can find a definition of all the I_* column created by documentum?

And can I trust that "I_LATEST_FLAG"=1 is always the most current version of a document?

2) I realize the date and time provided by DQL via Documentum adminstrator is accurate but in oracle DB they are a few hours behind.

May I know is there a proper solution to this issue?

3) Anyone using the same solution as me? if so please share other issues that I should look at?

Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:15:19.677

1.  您可以在 EMC Documentum System Object Reference 中找到所有 dm* 对象及其列的定义。您可以从 EMC 的 Powerlink 站点下载它。
2.  根据对象参考指南，当此版本是***版本树中特定分支上****对象的最新版本时，i_latest_flag 是正确的。*

***   我还没有在任何系统上实现直接查询数据库的解决方案（这似乎是一个极端的解决方案，可能表明设计存在问题），所以我无法帮助你。** 

 **对于 DQL 和数据库中存储的日期时间之间的时间差，从 Documentum 6.0 及以上版本开始，数据库中存储的所有日期都以 UTC 格式存储，并且在 DQL 查询中发送的日期被认为是客户端的本地时间查询，因此有区别。搜索 Powerlink 以了解如何使用 dm_docbase_config 的 r_tz_aware 属性，您会发现 EMC 提供的非常有用的技术说明，它解释了时区功能的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:24:13.000

对于当前版本，不要与上一个版本混淆，该列是“i_has_folder”。

您可以在数据库中创建一个视图，将其注册为 DQL 中的注册表，然后在 DQL 中对其进行查询。您将通过这种方式获得相同的日期翻译。**

# php - 使用变量索引更新数组值 PHP

> ID：14584248
> 
> 赞同：0
> 
> 时间：2013-01-29T13:36:38.993
> 
> 标签：php, arrays, variables, indexing

我有以下代码：

```
$woo_options = get_option( 'woo_options' ); 
//print_r($woo_options);
$has_updated = false; 

foreach ($options as $value) {
//print_r($value);
update_option( $value['id'], $_REQUEST[ $value['id'] ] ); 
    $key = $value['id'];
    $keyconf = $_REQUEST[ $value['id'] ];

    **echo $woo_options[$key];**

    if ( isset( $woo_options[$key] ) ) {
        $woo_options[$key] = $keyconf;
        $has_updated = true;
        }
}       

if ( $has_updated == true ) {
update_option( 'woo_options', $woo_options );
} 
```

问题是如果我把**echo $woo_options[$key];** 没有任何反应，并且使用**echo $woo_options['woo_author'];** 使用正确的引号，值会显示出来......我需要它来更新数组中的值。

这是我的“print_r($woo_options);”的一部分

Array ( [woo_alt_stylesheet] => [woo_logo] => [woo_texttitle] => [woo_font_site_title] => Array ( [size] => 40 [unit] => px [face] => Droid Serif [style] => 300 [颜色] => #ffffff ) [woo_google_analytics] => [woo_feed_url] => [woo_subscribe_email] => [woo_comments] => 发布 [woo_post_content] => 摘录 [woo_author] => 假...

**注意：$key var 出现了：woo_alt_stylesheet, woo_logo, woo_texttitle...**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:38:38.853

如果你修剪你的 $key 值会发生什么？

```
$key = trim($value['id']); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T13:57:28.910

我使用函数解决了它来比较两个数组，然后更新“不同”索引......更多信息，请联系我。

# javascript - 我需要默认在组合框中显示文本“选择一个”

> ID：14584254
> 
> 赞同：0
> 
> 时间：2013-01-29T13:37:05.703
> 
> 标签：javascript, html, drop-down-menu, selection

我正在创建一个从 JSON 加载选项的组合框。它按预期加载菜单。但默认情况下，我需要在组合框中显示文本“选择一个”。我试过但找不到解决方案..你能给我建议吗，我该如何实现？

```
window.onload = function() {
    var obj = JSON.parse(str);    

    for (var i=0; i < obj.MenuParentTabs.length; i++)    {
        var option = document.createElement("option");    
        option.innerHTML = obj.MenuParentTabs[i].parentTabName;
        document.form1.fruits.appendChild(option);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:40:28.830

您需要在循环**之前**`option`使用所需的文本创建：**`for`**

 **```
var option = document.createElement("option");
option.innerHTML = "Select the one";
document.form1.fruits.appendChild(option); 
```

如果`option`不是 的第一个孩子（即 由于某种原因`select`你没有把它放在循环之前），也设置属性：`for``selected`

```
option.setAttribute("selected", "selected"); 
```

帮助OP的完整代码：

```
window.onload = function() {
    var obj = JSON.parse(str);    

    var option = document.createElement("option");
    option.innerHTML = "Select the one";
    option.setAttribute("selected", "selected");
    document.form1.fruits.appendChild(option);

    for (var i = 0; i < obj.MenuParentTabs.length; i++) {
        option = document.createElement("option");
        option.innerHTML = obj.MenuParentTabs[i].parentTabName;
        document.form1.fruits.appendChild(option);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:44:13.553

尝试在你的 for 循环之前放置这样的东西：

```
var option = document.createElement("option");    
option.innerHTML = "Select One";
document.form1.fruits.appendChild(option); 
```

对于这些恶作剧，我也强烈推荐 jQuery。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:46:48.450

这里有一个非常相似的问题和答案：

[HTML 选择：如何设置不会显示在下拉列表中的默认文本？](https://stackoverflow.com/questions/9447134/html-select-how-to-set-default-text-which-wont-be-shown-in-drop-down-list)

```
basically do this:
var option = document.createElement("option");
option.innerHTML = "Select the one";
option.setAttribute("selected", "selected");
option.setAttribute("disabled", "disabled");
document.form1.fruits.appendChild(option); 
```

我想如果你真的想要彻底，你可以添加一些在菜单出现时隐藏这个选项的东西。**

# windows-phone-7 - Windows Phone 7：提交/更新后是否可以在 WP 应用页面中进行更改？

> ID：14584255
> 
> 赞同：0
> 
> 时间：2013-01-29T13:37:10.370
> 
> 标签：windows-phone-7, updates, submission

首先，很抱歉这个“非代码问题”。但我一直在寻找几个小时没有任何解决方案......我的情况如下：

1.  我已经在 Windows Store 上提交了一个 WP7 应用程序及其所有描述和图像。该应用程序已通过认证；
2.  我已经上传了一个新的 .xap 文件（更新之前的文件）。该过程仍在认证分析中；
3.  我在上一次 .xap 文件更新中发现了一个错误。另外我想更改我的一些应用描述/图片；
4.  我的问题点：没有选项可以执行任何操作，例如更改描述和/或取消更新过程。

**所以我的问题是：提交/更新后是否可以在 WP 应用页面中进行更改？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:04:45.480

不幸的是，在 Microsoft Store 批准或拒绝之前，无法撤销提交的应用程序。

这就是为什么将应用程序发布保持在“手动发布”模式总是更好的原因。

您必须等待 MS 商店的批准或拒绝，然后重新提交应用程序。

否则，请联系支持团队。他们可能会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:13:37.963

由于应用程序已经提交，您可以将发布模式更改为手动，以便再次更新 xap 并使更新后的 xap 在商店可用

# code-first - SharePoint2013 实体框架代码优先

> ID：14584258
> 
> 赞同：2
> 
> 时间：2013-01-29T13:37:23.330
> 
> 标签：code-first, sharepoint-2013

如何在 SharePoint2013 中实现实体框架代码优先？请分享我一个演示。

# java - 如何调整物体在 2D 运动场上移动的速度？

> ID：14584259
> 
> 赞同：0
> 
> 时间：2013-01-29T13:37:24.460
> 
> 标签：java

我正在编写一个塔防游戏，我的主要组件是一个划分为 40x40 字段（类字段的对象）的网格。当游戏开始时，会为每个生成物（这是一种特殊类型的字段）找到通往最近基地的最佳路线，并将其保存在其字段中`int[] path`，该字段表示怪物必须遵循的一系列方向才能到达基地。

我创建了一个线程，该线程有一个循环，它将每个怪物向前移动 1px 并`distance`在每次传递中增加它的字段。每次怪物移动时，我也会检查它是否没有踩到场地的中心。我这样做使用：

```
if ((monster.getDistance() % FIELD_SIZE /*which is 40*/) == 0) 
```

当它返回 0 时，怪物会改变它的方向（读取从其生成字段路径到达的下一个字段的位置）。

这适用于每个敌人每次移动 1px 的情况。但我希望他们以不同的速度移动。我找到了2个解决方案：

1.  在不同的线程中移动每个敌人。它的速度越高，Thread.sleep() 的持续时间就越短。
2.  以不同的距离将它们循环移动。

我更喜欢 2\. 解决方案，但不知道如何实现它。我的问题是大多数怪物永远不会踩到场地的中心，因此永远不会改变方向。如果怪物以 0.33 的速度移动，则覆盖的距离将是：0.33、0.66、0.99 (...) 39.63 (...) 40.13。所以它永远不会达到 40。如果我使用 ceil、round 或 floor，那么它将达到 40，但多次会导致我的应用程序出现异常。所以我的问题是如何实现以浮点值作为距离的移动，并提供它每次都达到 40 的倍数但每次检查一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:52:51.790

您可以使用毕达哥拉斯定理进行碰撞检测

```
Math.sqrt(Math.pow((monster.getX() - field.getX()), 2)
 + Math.pow((monster.getY() - field.getY()), 2)) <= field.getRadius() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:45:45.837

您可以将新线程喂给怪物，然后在 run 方法中做您想做的事情。

```
public class MoveThread extends Thread{
private Monster myMonster;
public MoveThread(Monster m){
myMonster = m;
}

public void run(){
//do your stuff here
}

} 
```

# c++ - (void)变量的意义

> ID：14584266
> 
> 赞同：4
> 
> 时间：2013-01-29T13:37:45.427
> 
> 标签：c++, c, void

> **可能重复：**
> [void cast 有什么作用？](https://stackoverflow.com/questions/10767933/what-does-void-casting-do)

我刚刚浏览了一个项目，发现了这个

```
//This is in a .cpp file 
#if xxx == 5
(void)var;
#endif 
```

这是`(void)var`做什么的？这样做有什么意义。我听说这与`compilation`.

添加 c 和 cpp 标记以防这很常见。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T13:38:56.087

```
(void)var; 
```

这个声明实际上什么也没做。但有助于使编译器静音。

这样做主要是为了避免*未使用的变量*警告。

* * *

回复@vonbrand 的评论。这是有用的情况。

*   该函数在头文件中声明。但函数体已被修改，其参数之一不再使用。但是修改头文件需要测试使用这个头文件的其他代码。
*   编写了一个新函数，但稍后修改该函数时将使用当前*未设置的参数。*否则，需要在头文件和定义中修改函数原型。

例如，在 gcc 中，当`-Werror`makefile 中默认使用编译选项时，可能不希望对整个项目进行修改。`(void)var;`此外，它对任何变量都是完全无害且可移植的。所以我不明白为什么在某些情况下帮助程序员的生活更轻松是一个坏主意。

因此，摆脱未使用的变量并不总是可取的。这样做会在以后需要时需要更多的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T13:48:05.530

转换为 void 是为了避免编译器警告未使用的变量。

这也可以使用编译器的标志在全局级别上完成：-Wno-unused-variable。

# android - 我得到了小部件 ID，但我无法为每个小部件生成一个新的 ID，我该如何实现？

> ID：14584269
> 
> 赞同：0
> 
> 时间：2013-01-29T13:37:51.483
> 
> 标签：android

我需要为我拥有的当前小部件的每个实例分配一个新的小部件 ID，这样它就不会使用相同的数据更新所有实例，当触发更新服务时，我该如何实现，我有以下代码：

```
@Override
public void onEnabled(Context context) {
    super.onEnabled(context);

     context = context.getApplicationContext();     
     ComponentName name = new ComponentName(context, FullWidgetProvider.class);
     ids = AppWidgetManager.getInstance(context).getAppWidgetIds(name);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:03:05.357

用[充气机](http://developer.android.com/reference/android/view/LayoutInflater.html)

```
LayoutInflater inflater = (LayoutInflater)context.getSystemService
(Context.LAYOUT_INFLATER_SERVICE);
inflater.inflate(resourceID, rootViewGroup); 
```

# django - Django - 如何使 Django 片段可用作模板标签？

> ID：14584271
> 
> 赞同：0
> 
> 时间：2013-01-29T13:38:11.430
> 
> 标签：django, django-templates

我找到了一个 Django 片段，但我不知道如何配置它。

片段是这个：[https ://github.com/r0wb0t/markdown-urlize/blob/master/urlize.py](https://github.com/r0wb0t/markdown-urlize/blob/master/urlize.py)

文档说要安装我应该：

```
To play nicely with Django, drop urlize.py into your PYTHONPATH or projects root directory as mdx_urlize.py for Django's Markup app to properly load this as an extension. 
```

我正在使用虚拟环境。这意味着我应该把这个文件放在“myvirtualenv/lib/python2.6/site-packages”上吗？

如果我把文件放在我的 Django 项目中，我应该把文件放在“mydjangoproject/myprojectname”中吗？“myprojectname”是**init** .py 和 settings.py 所在的文件夹。如果我这样做，是否需要将此代码注册为模板标签？

给我一些线索。我迷失了这个。

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:52:52.023

它说您在模板或py​​thon代码中使用它。如果你想在模板中使用它，只需将它放在你的 templatetags 文件夹中。如果你想在 python 中编写代码，只需将它与views.py、models.py ....放在一起。

# powershell - powershell sort-object 无法按预期工作

> ID：14584273
> 
> 赞同：8
> 
> 时间：2013-01-29T13:38:23.387
> 
> 标签：powershell, powershell-2.0, powershell-3.0, quest

我尝试使用 sort-object cmdlet 按 ID 对进程进行排序：

```
Get-Process | Sort-Object -Property Id 
```

它运作良好。在我发现的任何其他示例中，排序都可以正常工作，但是当我尝试使用 Active Directory 中的员工 ID 对员工进行排序时：

```
Get-QADUser -IncludeAllProperties -SerializeValues | ? {?_.Mail} | select employeeID | sort-object -property employeeID 
```

我得到这样的东西：

```
11
1104
1105
1185
119
12
...

```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-29T13:58:57.583

Get-QADUser 将 eployeeId 作为字符串返回，因此 sort 使用字符串排序机制。要将employeeIds 排序为整数 - 只需将属性转换为这种类型：

```
Get-QADUser -IncludeAllProperties | Sort-Object { [int]$_.employeeId } | select Name, employeeid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-10T14:48:48.280

你也可以使用 {$_.employeeId -as [int]}。这不会导致 null 错误。

我用“Frode F”来解决这个问题。

# performance - VC OpenMP 嵌套并行循环奇怪的结果

> ID：14584276
> 
> 赞同：0
> 
> 时间：2013-01-29T13:38:26.343
> 
> 标签：performance, visual-c++, parallel-processing, openmp, nested-loops

VC++，测试嵌套循环的 OpenMP 并行性，但它给出了奇怪的结果：

*   没有性能提升
*   对于大循环 SUM 计算是错误的。如果只有 5 个嵌套循环，那就没问题了。

结果如下：

```
Sum=450000000000.000000 Serial time:        117376.852855
Sum=228067994200.000000 Parallel time:      117391.867931 
```

这是工作代码：

```
#include "stdafx.h"
#include <omp.h>
#include <ppl.h>

double Serial(), Parallel();

int _tmain(int argc, _TCHAR* argv[])
{
printf("Sum=%f Serial time:        %lf\n",Serial(),omp_get_wtime() );
printf("Sum=%f Parallel time:      %lf\n",Parallel(),omp_get_wtime() );

return 0;
}

double Serial()
{
double sum=0.;
int n=10;

for (int i01=0; i01<n; i01++){
for (int i02=0; i02<n; i02++){
for (int i03=0; i03<n; i03++){
for (int i04=0; i04<n; i04++){
for (int i05=0; i05<n; i05++){
for (int i06=0; i06<n; i06++){
for (int i07=0; i07<n; i07++){
for (int i08=0; i08<n; i08++){
for (int i09=0; i09<n; i09++){
for (int i10=0; i10<n; i10++){

sum+=i01+i02+i03+i04+i05+i06+i07+i08+i09+i10;

}}}}} }}}}}
return sum;
}

double Parallel()
{
double sum=0.;

#pragma omp parallel for shared(sum)
for (int i01=0; i01<10; i01++){
for (int i02=0; i02<10; i02++){
for (int i03=0; i03<10; i03++){
for (int i04=0; i04<10; i04++){
for (int i05=0; i05<10; i05++){
for (int i06=0; i06<10; i06++){
for (int i07=0; i07<10; i07++){
for (int i08=0; i08<10; i08++){
for (int i09=0; i09<10; i09++){
for (int i10=0; i10<10; i10++){

sum+=i01+i02+i03+i04+i05+i06+i07+i08+i09+i10;

}}}}} }}}}}
return sum;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:42:35.890

您已经正确猜到`sum`应该共享，但实际上它是一个归约变量，必须放在一个`reduction`子句中：

```
#pragma omp parallel for reduction(+:sum) 
```

另一种选择（较慢）是使增量原子。在这种情况下，原子操作将是一种过度杀伤，但它们在更复杂的情况下会有所帮助，当简单的归约不适用时，例如在对数组进行归约时：

```
#pragma omp atomic update
sum+=i01+i02+i03+i04+i05+i06+i07+i08+i09+i10; 
```

该`update`子句来自 OpenMP 3.1。Visual Studio 仅支持 2.0，因此它不会理解它，但你永远不会知道 - 有一天你可能想转向更好的编译器。

# mysql - 基于两个不同列的总计总和的mysql命令

> ID：14584277
> 
> 赞同：0
> 
> 时间：2013-01-29T13:38:35.817
> 
> 标签：mysql, sum, subquery, pivot

我有一个表，其中包含基于费用购买的条目。如果有三列我需要（部门、月份、总计）的结果，如下所示。

```
dept | month | total
--------------------
aaaa | octob | 8  
aaaa | octob | 4  
aaaa | novm  | 143  
bbbb | octob | 42  
bbbb | novm  | 116  
bbbb | novm  | 117  
bbbb | decm  | 5 
```

我希望看到这样的结果集：

```
dept | oct | nov | dec
----------------------
aaaa | 12 | 143  | 0
bbbb | 42 | 233  | 5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:00:58.413

不完全是您所要求的，但我将完成此操作的方式如下：

```
Select department, month, sum(total)
FROM MyTable
GROUP BY (department, month) 
```

这将返回一个结果集，如：

```
department | Month | Total
  Geology  |  Oct  |  500
  Geology  |  Nov  |  400
  Biology  |  Oct  |  250 
```

等然后您可以订购并在代码中使用以获得您想要的格式。

对于你所要求的正是这样的：

```
SELECT department, SUM(CASE WHEN Month='oct' THEN Total END) as Oct,
   SUM(CASE WHEN name='Nov' THEN Total END) as Nov
FROM MyTable
Group By (department) 
```

虽然我不完全确定这适用于 group by。

# c# - C# 获取鼠标句柄 (GetRawInputDeviceInfo)

> ID：14584280
> 
> 赞同：3
> 
> 时间：2013-01-29T13:38:49.493
> 
> 标签：c#, api

我的目标应该是一个简单的目标... 获取在我的表单上触发点击事件的鼠标的设备句柄（我有多个鼠标）。

在我的表格上，我已经修补了

```
 public bool PreFilterMessage(ref Message message) { 
```

...以确保不会错过任何子控件（这工作正常）。

在这个例程中，我调用了一个类来处理所有必要的 API 来获取设备句柄：

```
 public bool PreFilterMessage(ref Message message) {
        switch (message.Msg) {
            case 0x0201: //LButtonDown
                int HardwareID = new clsGetInputID().GetDeviceID(message);
                break;
            case 0x204: //RButtonDown
                int HardwareID2 = new clsGetInputID().GetDeviceID(message);
                break;
   } 
```

HardwareID 总是显示不同的数字，即使我用同一个鼠标单击。

我怀疑我有一些常量设置不正确，或者我编组不正确。

```
class clsGetInputID {

    [DllImport("User32.dll")]
    extern static uint GetRawInputDeviceInfo(IntPtr hDevice, uint uiCommand, IntPtr pData, ref uint pcbSize);
    [DllImport("User32.dll")]
    extern static uint GetRawInputData(IntPtr hRawInput, uint uiCommand, IntPtr pData, ref uint pcbSize, uint cbSizeHeader);

    private const int RID_INPUT = 0x10000003;

    [StructLayout(LayoutKind.Sequential)]
    internal struct BUTTONSSTR {
        [MarshalAs(UnmanagedType.U2)]
        public ushort usButtonFlags;
        [MarshalAs(UnmanagedType.U2)]
        public ushort usButtonData;
    }
    [StructLayout(LayoutKind.Sequential)]
    internal struct RAWHID {
        [MarshalAs(UnmanagedType.U4)]
        public int dwSizHid;
        [MarshalAs(UnmanagedType.U4)]
        public int dwCount;
    }
    [StructLayout(LayoutKind.Explicit)]
    internal struct RAWMOUSE {
        [MarshalAs(UnmanagedType.U2)]
        [FieldOffset(0)]
        public ushort usFlags;
        [MarshalAs(UnmanagedType.U4)]
        [FieldOffset(4)]
        public uint ulButtons;
        [FieldOffset(4)]
        public BUTTONSSTR buttonsStr;
        [MarshalAs(UnmanagedType.U4)]
        [FieldOffset(8)]
        public uint ulRawButtons;
        [FieldOffset(12)]
        public int lLastX;
        [FieldOffset(16)]
        public int lLastY;
        [MarshalAs(UnmanagedType.U4)]
        [FieldOffset(20)]
        public uint ulExtraInformation;
    }
    [StructLayout(LayoutKind.Sequential)]
    internal struct RAWKEYBOARD {
        [MarshalAs(UnmanagedType.U2)]
        public ushort MakeCode;
        [MarshalAs(UnmanagedType.U2)]
        public ushort Flags;
        [MarshalAs(UnmanagedType.U2)]
        public ushort Reserved;
        [MarshalAs(UnmanagedType.U2)]
        public ushort VKey;
        [MarshalAs(UnmanagedType.U4)]
        public uint Message;
        [MarshalAs(UnmanagedType.U4)]
        public uint ExtraInformation;
    }
    [StructLayout(LayoutKind.Explicit)]

    internal struct RAWINPUT {
        [FieldOffset(0)]
        public RAWINPUTHEADER header;
        [FieldOffset(16)]
        public RAWMOUSE mouse;
        [FieldOffset(16)]
        public RAWKEYBOARD keyboard;
        [FieldOffset(16)]
        public RAWHID hid;
    }
    [StructLayout(LayoutKind.Sequential)]
    internal struct RAWINPUTHEADER {
        [MarshalAs(UnmanagedType.U4)]
        public int dwType;
        [MarshalAs(UnmanagedType.U4)]
        public int dwSize;
        public IntPtr hDevice;
        [MarshalAs(UnmanagedType.U4)]
        public int wParam;
    }

    [StructLayout(LayoutKind.Sequential)]
    internal struct RID_DEVICE_INFO_HID {
        [MarshalAs(UnmanagedType.U4)]
        public int dwVendorId;
        [MarshalAs(UnmanagedType.U4)]
        public int dwProductId;
        [MarshalAs(UnmanagedType.U4)]
        public int dwVersionNumber;
        [MarshalAs(UnmanagedType.U2)]
        public ushort usUsagePage;
        [MarshalAs(UnmanagedType.U2)]
        public ushort usUsage;
    }
    [StructLayout(LayoutKind.Sequential)]
    internal struct RID_DEVICE_INFO_KEYBOARD {
        [MarshalAs(UnmanagedType.U4)]
        public int dwType;
        [MarshalAs(UnmanagedType.U4)]
        public int dwSubType;
        [MarshalAs(UnmanagedType.U4)]
        public int dwKeyboardMode;
        [MarshalAs(UnmanagedType.U4)]
        public int dwNumberOfFunctionKeys;
        [MarshalAs(UnmanagedType.U4)]
        public int dwNumberOfIndicators;
        [MarshalAs(UnmanagedType.U4)]
        public int dwNumberOfKeysTotal;
    }
    [StructLayout(LayoutKind.Sequential)]
    internal struct RID_DEVICE_INFO_MOUSE {
        [MarshalAs(UnmanagedType.U4)]
        public int dwId;
        [MarshalAs(UnmanagedType.U4)]
        public int dwNumberOfButtons;
        [MarshalAs(UnmanagedType.U4)]
        public int dwSampleRate;
        [MarshalAs(UnmanagedType.U4)]
        public int fHasHorizontalWheel;
    }
    [StructLayout(LayoutKind.Explicit)]
    internal struct RID_DEVICE_INFO {
        [FieldOffset(0)]
        public int cbSize;
        [FieldOffset(4)]
        public int dwType;
        [FieldOffset(8)]
        public RID_DEVICE_INFO_MOUSE mouse;
        [FieldOffset(8)]
        public RID_DEVICE_INFO_KEYBOARD keyboard;
        [FieldOffset(8)]
        public RID_DEVICE_INFO_HID hid;
    }

    public int GetDeviceID(Message message) {
        uint dwSize = 0;

        GetRawInputData(
            message.LParam,
            RID_INPUT,
            IntPtr.Zero,
            ref dwSize,
            (uint)Marshal.SizeOf(typeof(RAWINPUTHEADER))
        );

        IntPtr buffer = Marshal.AllocHGlobal((int)dwSize);

        GetRawInputData(
            message.LParam,
            RID_INPUT,
            buffer,
            ref dwSize,
            (uint)Marshal.SizeOf(typeof(RAWINPUTHEADER))
        );

        RAWINPUT raw = (RAWINPUT)Marshal.PtrToStructure(buffer, typeof(RAWINPUT));

        uint size = (uint)System.Runtime.InteropServices.Marshal.SizeOf(typeof(RID_DEVICE_INFO));

        GetRawInputDeviceInfo(raw.header.hDevice, 0x2000000b, IntPtr.Zero, ref size);
        IntPtr HardwareRawInfoPTR = Marshal.AllocHGlobal((int)size);
        GetRawInputDeviceInfo(raw.header.hDevice, 0x2000000b, HardwareRawInfoPTR, ref size);

        RID_DEVICE_INFO RawDevInfo = (RID_DEVICE_INFO)Marshal.PtrToStructure(HardwareRawInfoPTR, typeof(RID_DEVICE_INFO));

        Marshal.FreeHGlobal(buffer);

        System.Diagnostics.Debug.WriteLine(String.Format("hDevice: {0} HdHandle: {1}", raw.header.hDevice, RawDevInfo.mouse.dwId));

        return RawDevInfo.mouse.dwId;
    }

} 
```

raw.header.hDevice & RawDevInfo.mouse.dwId 总是不同的值。

谁能发现我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:32:54.553

经过反复试验，我最终解决了这个问题。

我不完全理解为什么，但由于某种原因，PreFilterMessage()（可能还有 wndProc）覆盖中的“鼠标按下”消息没有为 API 提供足够的信息来正确确定设备/硬件 ID。

相反，我将鼠标按钮检测移到类中，并对通过此过滤器的所有消息执行 API。

我还确定您必须首先针对您的表单句柄调用 RegisterRawInputDevices() 以便它侦听设备信息。

完整的工作代码...

形式：

```
public partial class frmQuizMaster : Form, IMessageFilter {
    clsGetInputID MouseHandler;

//  Initialization
    public frmQuizMaster() {
        InitializeComponent();
        Application.AddMessageFilter(this);
    }

    private void frmQuizMaster_Load(object sender, EventArgs e) {
        MouseHandler = new clsGetInputID(this.Handle);
    }

    private void frmQuizMaster_FormClosing(object sender, FormClosingEventArgs e) {
        Application.RemoveMessageFilter(this);
    }

    public bool PreFilterMessage(ref Message message) {
        int HardID = MouseHandler.GetDeviceID(message);

        if (HardID > 0) {
            System.Diagnostics.Debug.WriteLine("Device ID : " + HardID.ToString());
            //Return true here if you want to supress the mouse click
            //bear in mind that mouse down and up messages will still pass through, so you will need to filter these out and return true also.
        }

        return false;
    } 
```

clsGetInputID：

```
class clsGetInputID {
    private const int RID_INPUT = 0x10000003;
    private const int RIDEV_INPUTSINK = 0x00000100;

    [DllImport("user32.dll", SetLastError = true)]
    extern static uint GetRawInputDeviceInfo(IntPtr hDevice, uint uiCommand, IntPtr pData, ref uint pcbSize);
    [DllImport("User32.dll")]
    extern static uint GetRawInputData(IntPtr hRawInput, uint uiCommand, IntPtr pData, ref uint pcbSize, uint cbSizeHeader);
    [DllImport("User32.dll")]
    extern static bool RegisterRawInputDevices(RAWINPUTDEVICE[] pRawInputDevice, uint uiNumDevices, uint cbSize);

    [Flags()]
    public enum RawMouseFlags : ushort {
        /// <summary>Relative to the last position.</summary>
        MoveRelative = 0,
        /// <summary>Absolute positioning.</summary>
        MoveAbsolute = 1,
        /// <summary>Coordinate data is mapped to a virtual desktop.</summary>
        VirtualDesktop = 2,
        /// <summary>Attributes for the mouse have changed.</summary>
        AttributesChanged = 4
    }
    [Flags()]
    public enum RawMouseButtons : ushort {
        /// <summary>No button.</summary>
        None = 0,
        /// <summary>Left (button 1) down.</summary>
        LeftDown = 0x0001,
        /// <summary>Left (button 1) up.</summary>
        LeftUp = 0x0002,
        /// <summary>Right (button 2) down.</summary>
        RightDown = 0x0004,
        /// <summary>Right (button 2) up.</summary>
        RightUp = 0x0008,
        /// <summary>Middle (button 3) down.</summary>
        MiddleDown = 0x0010,
        /// <summary>Middle (button 3) up.</summary>
        MiddleUp = 0x0020,
        /// <summary>Button 4 down.</summary>
        Button4Down = 0x0040,
        /// <summary>Button 4 up.</summary>
        Button4Up = 0x0080,
        /// <summary>Button 5 down.</summary>
        Button5Down = 0x0100,
        /// <summary>Button 5 up.</summary>
        Button5Up = 0x0200,
        /// <summary>Mouse wheel moved.</summary>
        MouseWheel = 0x0400
    }

    [StructLayout(LayoutKind.Sequential)]
    internal struct RAWINPUTDEVICE {
        [MarshalAs(UnmanagedType.U2)]
        public ushort usUsagePage;
        [MarshalAs(UnmanagedType.U2)]
        public ushort usUsage;
        [MarshalAs(UnmanagedType.U4)]
        public int dwFlags;
        public IntPtr hwndTarget;
    }

    [StructLayout(LayoutKind.Sequential)]
    internal struct RAWHID {
        [MarshalAs(UnmanagedType.U4)]
        public int dwSizHid;
        [MarshalAs(UnmanagedType.U4)]
        public int dwCount;
    }
    [StructLayout(LayoutKind.Explicit)]
    public struct RawMouse {
        /// <summary>
        /// The mouse state.
        /// </summary>
        [FieldOffset(0)]
        public RawMouseFlags Flags;
        /// <summary>
        /// Flags for the event.
        /// </summary>
        [FieldOffset(4)]
        public RawMouseButtons ButtonFlags;
        /// <summary>
        /// If the mouse wheel is moved, this will contain the delta amount.
        /// </summary>
        [FieldOffset(6)]
        public ushort ButtonData;
        /// <summary>
        /// Raw button data.
        /// </summary>
        [FieldOffset(8)]
        public uint RawButtons;
        /// <summary>
        /// The motion in the X direction. This is signed relative motion or 
        /// absolute motion, depending on the value of usFlags. 
        /// </summary>
        [FieldOffset(12)]
        public int LastX;
        /// <summary>
        /// The motion in the Y direction. This is signed relative motion or absolute motion, 
        /// depending on the value of usFlags. 
        /// </summary>
        [FieldOffset(16)]
        public int LastY;
        /// <summary>
        /// The device-specific additional information for the event. 
        /// </summary>
        [FieldOffset(20)]
        public uint ExtraInformation;
    }
    [StructLayout(LayoutKind.Sequential)]
    internal struct RAWKEYBOARD {
        [MarshalAs(UnmanagedType.U2)]
        public ushort MakeCode;
        [MarshalAs(UnmanagedType.U2)]
        public ushort Flags;
        [MarshalAs(UnmanagedType.U2)]
        public ushort Reserved;
        [MarshalAs(UnmanagedType.U2)]
        public ushort VKey;
        [MarshalAs(UnmanagedType.U4)]
        public uint Message;
        [MarshalAs(UnmanagedType.U4)]
        public uint ExtraInformation;
    }

    public enum RawInputType {
        /// <summary>
        /// Mouse input.
        /// </summary>
        Mouse = 0,
        /// <summary>
        /// Keyboard input.
        /// </summary>
        Keyboard = 1,
        /// <summary>
        /// Another device that is not the keyboard or the mouse.
        /// </summary>
        HID = 2
    }

    [StructLayout(LayoutKind.Explicit)]
    internal struct RawInput {
        /// <summary>Header for the data.</summary>
        [FieldOffset(0)]
        public RawInputHeader Header;
        /// <summary>Mouse raw input data.</summary>
        [FieldOffset(16)]
        public RawMouse Mouse;
        /// <summary>Keyboard raw input data.</summary>
        [FieldOffset(16)]
        public RAWKEYBOARD Keyboard;
        /// <summary>HID raw input data.</summary>
        [FieldOffset(16)]
        public RAWHID Hid;
    }
    [StructLayout(LayoutKind.Sequential)]
    internal struct RawInputHeader {
        /// <summary>Type of device the input is coming from.</summary>
        public RawInputType Type;
        /// <summary>Size of the packet of data.</summary>
        public int Size;
        /// <summary>Handle to the device sending the data.</summary>
        public IntPtr Device;
        /// <summary>wParam from the window message.</summary>
        public IntPtr wParam;
    }

    public bool LockForBuzzersOnly = true;
    public List<int> BuzzerDevices = new List<int>();

    public int GetDeviceID(Message message) {
        uint dwSize = 0;

        GetRawInputData(
            message.LParam,
            RID_INPUT,
            IntPtr.Zero,
            ref dwSize,
            (uint)Marshal.SizeOf(typeof(RawInputHeader))
        );

        IntPtr buffer = Marshal.AllocHGlobal((int)dwSize);

        GetRawInputData(
            message.LParam,
            RID_INPUT,
            buffer,
            ref dwSize,
            (uint)Marshal.SizeOf(typeof(RawInputHeader))
        );

        RawInput raw = (RawInput)Marshal.PtrToStructure(buffer, typeof(RawInput));
        Marshal.FreeHGlobal(buffer);

        if (raw.Mouse.ButtonFlags == RawMouseButtons.LeftDown || raw.Mouse.ButtonFlags == RawMouseButtons.RightDown) {
            return (int)raw.Header.Device;
        } else {
            return 0;
        }
    }

    public clsGetInputID(IntPtr hwnd) {
        RAWINPUTDEVICE[] rid = new RAWINPUTDEVICE[1];

        rid[0].usUsagePage = 0x01;
        rid[0].usUsage = 0x02;
        rid[0].dwFlags = RIDEV_INPUTSINK;
        rid[0].hwndTarget = hwnd;

        if (!RegisterRawInputDevices(rid, (uint)rid.Length, (uint)Marshal.SizeOf(rid[0]))) {
            throw new ApplicationException("Failed to register raw input device(s).");
        }
    }
} 
```

# c++ - 如何使日志记录更易于维护？

> ID：14584281
> 
> 赞同：0
> 
> 时间：2013-01-29T13:38:51.900
> 
> 标签：c++, logging

* * *

假设我有一个主窗口。主窗口有一些子窗口，包括一个记录发生情况的日志窗口和一些操作用户数据的操作窗口。在操作窗口中的每一个操作之后，我都想在日志窗口中进行记录。有几种方法可以实现它。

1.  在操作窗口中放置一个指向日志窗口的指针。为此，我认为操作窗口不是那么可重用，因为它绑定到一个指针。有一天，如果我不想记录，我需要删除它。此外，这种方式可能会占用更多内存。另外，如果操作窗口是主窗口的child's childe's child...，我需要把里面的指针一一传递。

2.  将主窗口设为单例，并为其添加公共日志功能。当我需要记录时，我只需调用 MainWindow::Inheritance()->Log(theInformation)。但是如果有一天我有 2 个主窗口会发生什么。

对这个问题有什么好的建议。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:52:21.777

我认为正确的解决方案是将日志数据放入一个完全独立的类中，其目的**只是**存储和检索（以及截断、保存和...）日志信息。所有其他需要记录数据的窗口、类等都需要访问单个日志类指针。

```
logSystem->log("my friend is blue"); 
```

现在，在初始化期间 log​​System 是全局对象还是传递给每个类的对象取决于您。任何有许多“全球人是邪恶的”和“全球人是有帮助的”阵营的人来帮助你解决这个单独的问题。

然后，在您的日志记录窗口中，您只需要检索记录的数据并显示它。

```
 // Qt, C++-11 pseudo-api
foreach(String log, logMessages) {
    myListBox->append(log);
} 
```

这种方法的另一个优点是您可以打开和关闭（创建和销毁）日志窗口，并且仍然不会丢失数据本身。是的，您也可以隐藏日志窗口或其他诡计，但能够完全销毁并重新创建它似乎更干净。更不用说，通过从日志窗口中分离出日志数据，您以后可以创建两个窗口，显示两组不同的日志数据。[假设您没有使用该全局记录数据，如上所述。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:55:20.910

我通常会将记录器编写为单例。

如果你想删除你的日志功能，很容易设置一个标志（用于运行时日志控制），或者用一个虚拟类替换它（用于编译时日志控制）。

所以在最基本的情况下，你可能有：

```
Log::Get().Error("Name truncated by %u bytes", nBytes ); 
```

是的，我喜欢可变参数 printf 风格的日志记录函数，但您可能更喜欢只有一个字符串或使用 C++ 流运算符。

如果我想拥有多个日志，我会将其设为可重用类并将其实例放入另一个单例（*例如*“应用程序”类）。在那种情况下，我可能有：

```
Log::EventsLog().Info("Something exciting happened" );
Log::SystemLog().Info("Shutting down" ); 
```

当可以（将）同时调用它们时，您通常需要对日志消息进行某种形式的互斥控制。如果您通过单线程队列（如在 Windows 消息传递中）将消息传递到日志窗口，则可能不需要这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:44:15.300

我原以为应该将日志记录功能实现为独立的“单例”类...

# asp.net-mvc - 实体框架删除记录

> ID：14584289
> 
> 赞同：5
> 
> 时间：2013-01-29T13:39:12.523
> 
> 标签：asp.net-mvc, linq, entity-framework

我正在尝试从表中删除记录，但我在代码中`store`遇到了识别问题。`DeleteObject`我有参考

```
using System.Linq;
using System.Data.Entity;
using System.Data.Objects; 
```

但它仍然无法正常工作。我正在`MVC 4`使用`Visual Studio 2012`.

```
public void Delete()
{
    using (var db = new AppContext())
    {
        var query_D = (from b in db.Stores
                   where b.storeID == 1
                   select b).First();

        db.DeleteObject(query_D);
        db.SaveChanges();
    } 
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T13:55:54.063

我意识到您正在使用带有 VS2012 的 MVC 4，并且默认情况下实体框架版本是 5。

现在你的方式`delete`来自`EF4`.

下面是正确的`delete`使用方法`EF5`

```
using (var db= new AppContext(ConnectionStr))
{
    try
    {
        con.Configuration.AutoDetectChangesEnabled = false;
        var o = new Store { Id = 1 };
        db.Stores.Attach(o);
        db.Stores.Remove(o);
        db.SaveChanges();
    }
    catch (Exception ex)
    {
        throw new Exception(ex.InnerException.Message);
    }
    finally
    {
        con.Configuration.AutoDetectChangesEnabled = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-29T13:55:11.520

只需使用

```
db.Entry(query_D).State = System.Data.EntityState.Deleted; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-26T12:20:55.050

你应该试试 ：

```
db.Stores.Remove(query_D);
db.SaveChanges(); 
```

# mysql - Using dates between VB and SQL

> ID：14584292
> 
> 赞同：1
> 
> 时间：2013-01-29T13:39:13.830
> 
> 标签：mysql, database

I am building a school project which is a room booking service. I have reached the part of the programming where I need to figure out how to store bookings. I know how to pull from a database using VB and I've laid it out like that when I try to pull booking information from the database.

```
 strBookingQuery = "SELECT * FROM bookings WHERE Date = '" & InputBookingDate & "'"
    Dim Cmd As New MySqlCommand(strBookingQuery, Newconnection)
    Newconnection.ConnectionString = strServerString
    Newconnection.Open()
    reader = Cmd.ExecuteReader()
    reader.Read()

    StartPeriod = reader.GetInt16(1)
    Length = reader.GetInt16(2)
    UserID = reader.GetInt16(3)
    RoomID = reader.GetInt16(4)
    Newconnection.Close() 
```

But when it gets to StartPeriod = reader.GetInt16(1) it says Invalid attempt to access a field before calling Read(), is this because MySQL stores dates in a different way? Or something else? Any help would be greatly appreciated :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:19:08.247

您希望[GetInt16](http://msdn.microsoft.com/en-us/library/system.data.datatablereader.getint16%28v=vs.80%29.aspx)如何读取`date`?

> **Reader.GetInt16() 以 16 位有符号整数形式获取指定列的值。不执行任何转换；因此，检索到的数据必须已经是 Int16 或可强制转换为 Int16。**

鉴于 OP 确认 startPeriod 没有问题，可能的问题可能是：

[在调用 read() 之前访问字段的尝试无效](https://stackoverflow.com/questions/11089633/invalid-attempt-to-access-field-before-calling-read)

# php - joomla 从 1.5 升级到 2.5 “迁移未定义”

> ID：14584293
> 
> 赞同：2
> 
> 时间：2013-01-29T13:39:15.937
> 
> 标签：php, joomla, joomla1.5

我没有运气从 joomla 1.5 升级到 jupgrade 到 2.5 ......我已经尝试了它看起来的一切。我一直卡在解压阶段，所以我按照手动说明进行操作，并且能够绕过这些步骤。现在我被困在升级过程中得到一个迁移未定义的错误。我注意到数据库正在使用新的前缀表进行更新，但第三方组件/插件没有得到转换。这些表也是空的，因此不会发生迁移。就好像它完成了一半，然后卡在了某个东西上。

我已经尝试了这里建议的所有内容：[http ://wiki.redcomponent.com/index.php?title=jUpgrade:Troubleshooting](http://wiki.redcomponent.com/index.php?title=jUpgrade:Troubleshooting)

```
PHP Fatal error:  Uncaught exception 'Exception' with message 'Duplicate entry '62' for key 'PRIMARY' SQL=INSERT INTO `j25_users` (`id`,`name`,`username`,`email`,`password`,`usertype`,`block`,`sendEmail`,`registerDate`,`lastvisitDate`,`activation`,`params`) 
```

这是我现在遇到的错误。我仍然在用户表上迁移未定义，但随后它继续前进，然后挂断第 3 方扩展。我的问题是我已经手动进入表格并调查了 dup 但没有一个。我什至删除了用户，但仍然收到错误消息。

有什么想法我应该做什么？建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:20:39.627

根据我的经验（迁移了十几个站点），原因通常不同，只需检查错误日志即可。通常问题在于将字段添加到#__content 或另一个系统表的扩展。阅读日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:30:23.237

终于工作了——此时——遵循@wiki.redcomponent.com 的第一个解决方案，删除所有插件并**重新安装另一个版本**（从 2.5.1 到 2.5.2）

**“迁移未定义”或“[未定义][未定义]”**

可能会出现在迁移特定组件的数据时进程会卡住的情况，并且（启用“调试模式”）将显示类似于“迁移未定义”或“[未定义] [未定义]”的错误。

**一些原因和补救措施包括：** jUpgrade 请求的 migrate_xxx.php 文件不可用或无法访问

（这些文件存储在 {root}/administrator/components/com_jupgrade/includes/ 文件夹中，标记为“migrate_xxx.php”，其中“xxx”是当时正在传输的内容部分。）

> **修复：卸载并重新安装 jUpgrade（以恢复所有必需的文件）并重试。**[获取升级 2.5.2](http://redcomponent.com/free-downloads/cat_view/931-jupgrade) **

• 从中传输内容的数据库表已损坏或已被修改（jUpgrade 要求未对任何核心表本身进行任何修改，否则在处理自定义字段时迁移可能会遇到问题）

> 修复：下载并安装维护组件，例如“管理工具！” 并运行数据库完整性检查和修复。或者，可能必须使用“phpmyadmin”或类似界面手动修复数据库。正在研究具有自定义字段的数据库的解决方案，但目前必须手动迁移这些字段，或者如果它们干扰迁移，则将其删除。（当然，在任何此类操作之前都应运行备份。）

• 迁移在尝试将内容复制到已包含内容的数据库时遇到问题（来自先前的迁移，无论是否失败）。

> 修复：删除为新 Joomla 创建的所有表！在迁移期间安装并再次运行 jUpgrade。

• 处理迁移过程的 Javascript 遇到了问题

> 修复：检查插件管理器以确保所有与 javascript 库相关的系统插件，除了“MooTools 升级”插件（这是必需的）已被禁用并尝试再次运行 jUpgrade。*让我们放弃 IE 并尝试 Chrome ;-)*

[从这里](https://stackoverflow.com/questions/11620390/joomla-1-5-to-2-5-with-jupgrade-undefined-migrating-error#answer-11634574)提取

# c++ - 关于 C++ 中友元声明的内容错误基础

> ID：14584294
> 
> 赞同：0
> 
> 时间：2013-01-29T13:39:16.250
> 
> 标签：c++, class, constructor, private, friend

我只是不明白，这个朋友声明有什么问题，第一个错误消息：

```
test.cpp: In function 'int main()':
test.cpp:34:7: error: 'void steuerung::exe_testa(testa)' is private
test.cpp:48:15: error: within this context 
```

当 testa 的类声明中的构造函数被删除时，问题正在解决。但我需要一个构造函数。谁能帮帮我吗？真的很谢谢你。

```
#include <iostream>

class steuerung;
class testb;
class testa;

class testa
{
friend class steuerung;
public:

private:
double a_;
double b_;
};

class testb
{
friend class steuerung; 
public:
testb(double a, double b) : a_(a), b_(b) {}

private:
double a_;
double b_;
};

class steuerung
{
friend class testa; 
friend class testb; 
void exe_testa(testa t_) { t_.b_++; }
//template<class t> void exe(t *t_) { std::cout << t_->a_ << std::endl; }
};

int main ()
{
std::cout << "Laeuft zumindest an.." << std::endl;

testa a;

steuerung s;
s.exe_testa(a);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:53:11.750

`exe_testa`是私有的，因此只能从 的成员函数`steuerung`、作为 朋友的类的成员函数`steuerung`和 的朋友函数调用`steuerung`。`main`不是这些，所以这个电话是不合法的。

# svg - 在 Pharo 中与 SVG 交互？

> ID：14584299
> 
> 赞同：3
> 
> 时间：2013-01-29T13:39:22.990
> 
> 标签：svg, smalltalk, pharo, morphic

我想使用 Morphic 在 Pharo 中与通过[雅典加载的 SVG 进行非常基本的交互。](http://code.google.com/p/pharo/wiki/Athens)这个[例子](http://people.igalia.com/eocanha/media/wordpress/test.html)显示了我在寻找什么。我用过

```
(ASVGMorph fromFile: 'lion.svg') drawOn: Display getCanvas 
```

但是单击 SVG 会使图片消失。但是，我看到的所有示例都是使用 Web 浏览器。这可能使用雅典吗？这方面还有其他工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T08:29:10.160

那是因为你在显示画布中绘制它，每次都会刷新它......所以你失去它是很自然的......

你需要做的是：

```
(ASVGMorph fromFile: 'lion.svg') openInWorld. 
```

或者更好，你可能想把它放在一个窗口中：

```
(ASVGMorph fromFile: 'lion.svg') openInWindow. 
```

最后，您可能希望它在您创建的其他一些变形中，但调试上述解决方案中的任何一个都会向您展示如何继续:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T11:56:49.570

Yes, as Esteban pointed, to keep morph on desktop, you should add it to world, i.e. use

# openInWorld, or #openInWindow.

ASVGMorph is very basic, however, and not intended to serve all possible use cases. For more advanced uses, it is preferred to use ASVGRoot instance and draw it in own morph or compose with other drawings.

# android - 安卓上的 ChimpChat

> ID：14584306
> 
> 赞同：1
> 
> 时间：2013-01-29T13:39:33.450
> 
> 标签：android, monkeyrunner

我正在`ChimpChat`用于自动化项目。ChimpChat 实例在`JUnit`测试用例中声明。我已添加`sdklib/chimpchat/ddmlib/guava-13.0.1/jars`到`libs`文件夹中。在运行 JUnit 测试用例时，我得到以下异常。谁能帮我解决这个问题。

```
java.lang.NoClassDefFoundError: com.android.SdkConstants 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-27T16:11:48.287

为 SdkConstants 添加 common.jar 库。

# r - 使用R计算相关性时如何显示值N的数量？

> ID：14584315
> 
> 赞同：1
> 
> 时间：2013-01-29T13:39:50.440
> 
> 标签：r, correlation

要计算两个数据集之间的相关性，我们很容易使用 cor(x,y)。实际上，我想显示值的数量 N = ? 也是。谁能告诉我我们怎么能做到这一点。我很感激任何想法。编辑：根据 Paul Hiemstra，这个函数起到了作用：

```
 cor_withN = function(...) {
          cor_obj = cor.test(...)
           print(sprintf("N = %s", cor_obj$parameter + 2))
           return(data.frame(cor = cor_obj$estimate, N = cor_obj$parameter + 2))
                              }
              cor_withN(runif(100), runif(100))
                 [1] "N = 100"
                       cor   N
                cor 0.1718225 100 
```

但是我们经常希望 cor 的值与 N 分开，所以我们可以将结果写为 2 个文件（cor 文件和 N 文件）任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:55:54.140

我必须承认一个可怕的黑客，但这可以解决问题：

```
cor_withN = function(...) {
   cor_obj = cor.test(...)
   print(sprintf("N = %s", cor_obj$parameter + 2))
   return(data.frame(cor = cor_obj$estimate, N = cor_obj$parameter + 2))
 }
cor_withN(runif(100), runif(100))
[1] "N = 100"
          cor   N
cor 0.1718225 100 
```

上述函数的优点在于，`N`无论您输入哪个输入，它都会确定`cor.test`：一个`data.frame`、两个向量等。

但是当你计算相关性时，你可以从输入参数中得到 N：

```
N = length(runif(100)) 
```

# ajax - HighChart / HighStock chart.refresh 似乎无法重新加载图表

> ID：14584321
> 
> 赞同：0
> 
> 时间：2013-01-29T13:40:19.353
> 
> 标签：ajax, highcharts

嗨，伙计们，

我目前正在学习使用 HighCharts 来绘制一些数据。

在学习了在本地页面上设置之后，是时候动态地/通过 ajax 加载数据了。

图表加载良好，系列定义如下：

```
var series1=[];
var series2=[];
var series3=[]; 
```

然后我有一个按钮，它触发一个 ajax 请求，这些数组填充了数据，从 sql 数据库中提取，格式化，然后发送回网页：D（这需要一段时间）

现在 - 填充了这些数组后，我希望让 HighCharts 来绘制这些数据。

我尝试使用 chart.refresh(); 在我的 ajax 结束时，但这似乎给出了错误：

```
Uncaught TypeError: Object #<Object> has no method 'refresh' 
```

我有点难过并努力取得进展 - 非常感谢朝正确方向轻推！

编辑：

```
chart.series[0].setData(series1); 
```

是在阵列被填满后需要触发的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:58:33.357

如果没有看到您的其余代码，这是一个疯狂的猜测：您已经使用 HighCharts 选项中已经“创建”的这 3 个系列设置了图表。您正在加载页面，定义您的 HighCharts 选项（包括 3 系列 - 作为空系列），然后触发 ajax 调用以填充三个系列的数据。

但是，您实际上并没有将每个系列中的新数据推送到图表中。您只是在将 var 发送到 HighCharts 后将它们设置为新值 - `refreshing`（如果即使是有效的 HighCharts 调用）HighCharts 也不会“什么也不做”，因为它没有重新读取 3 个 var 值。

另外，请注意 chart.refresh 似乎不是有效的 HighCharts 调用。您可以尝试 - 但我[`chart.redraw`](http://api.highcharts.com/highcharts#Chart.redraw%28%29)认为这对您的情况没有帮助，因为您如何定义数据系列元素（再次，不知道，因为重要的部分 - 告诉 HighCharts 代码中有新数据没有出现） . 查看[API](http://api.highcharts.com/highcharts)以及动态分配数据的指针。

您如何更新系列值？你如何告诉图表有新数据？查看其余代码会很有帮助，因为 3 行代码`var x=[]`并没有真正用处。

这是使用 设置[系列](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/members/series-setdata/)数据的基本方法[`setData`](http://api.highcharts.com/highcharts#Series.setData%28%29)：

```
$('#button').click(function() {
    chart.series[0].setData([129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4, 29.9, 71.5, 106.4] );
}); 
```

# android - 检测设备是否被握住或放在桌子上

> ID：14584322
> 
> 赞同：1
> 
> 时间：2013-01-29T13:40:21.397
> 
> 标签：android, android-sensors

我应该使用哪些传感器来检测设备是在用户手中还是在桌子上？任何教程将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:10:31.767

您应该使用加速度计传感器。网上到处都是教程和代码示例：

[android-sdk-accelerometer-example-tutorial](http://webhole.net/2011/08/20/android-sdk-accelerometer-example-tutorial/)

[github.com/commonsguy/cw-andtutorials/tree/master/38-Sensors](https://github.com/commonsguy/cw-andtutorials/tree/master/38-Sensors)

[AndroidSensor/article.html](http://www.vogella.com/articles/AndroidSensor/article.html)

[一个安卓加速度计示例](http://xiangchen.wordpress.com/2011/12/17/an-android-accelerometer-example/)

[方向传感器](http://android-er.blogspot.it/2010/08/detect-rotation-around-x-y-z-axis-using.html)

这里有一份关于检测用户活动[的](http://www.truststc.org/education/reu/10/Papers/DasGreenPerezMurphy_Paper.pdf)好白皮书。

# c++ - 在 SLB 中绑定单例

> ID：14584324
> 
> 赞同：3
> 
> 时间：2013-01-29T13:40:28.280
> 
> 标签：c++, lua, singleton

我有单例类，我想绑定它以供 lua 使用。我正在使用 SLB（简单 Lua 活页夹）。我真的不知道该怎么做。我所有的想法都行不通。任何人？

```
void Logger::export_class_to_lua(SLB::Manager *m) {
    SLB::Class< Logger, SLB::Instance::NoCopyNoDestroy >("Logger",m)
        .set("getInstance",&Logger::getInstance)
        .set("log",&Logger::log)
        .set("info",&Logger::info)
        .set("warning",&Logger::warning)
        .set("error",&Logger::error)
        .set("fatal",&Logger::fatal);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T00:01:13.343

使用您的代码：

```
void Logger::export_class_to_lua(SLB::Manager *m) {
    SLB::Class< Logger, SLB::Instance::NoCopyNoDestroy >("Logger",m)
        //.set("getInstance",&Logger::getInstance) // OMIT THIS
        .set("log",&Logger::log)
        .set("info",&Logger::info)
        .set("warning",&Logger::warning)
        .set("error",&Logger::error)
        .set("fatal",&Logger::fatal);

    // Next we set global variable within LUA to access the Singleton
    SLB::setGlobal<Logger*>(&(*lua_State), getInstance(), "logger");
} 
```

lua_State 将是指向您创建的任何 lua_State 的指针。“logger”是您在 LUA 中用来访问 Singleton 的对象/类/变量的名称。

例如，例如；在LUA内部你会做：

```
logger:log("Logging some information.")
logger:error("An error has occured.") 
```

假设您的日志和错误函数采用 const char* 或其他东西。

# c# - 循环中的值比较，当值相等时打破循环的最佳方法？

> ID：14584326
> 
> 赞同：1
> 
> 时间：2013-01-29T13:40:33.987
> 
> 标签：c#, multithreading, algorithm, loops

假设有两个属性的飞机类；海拔和海拔变化：

```
public class Aircraft  
{
    public double Altitude { get; set; }
    public AltitudeChange { get; set; }
} 
```

海拔变化有两个性质；高度和爬升率：

```
public class AltitudeChange
{ 
    public double Altitude { get; set; }
    public double RateOfClimb { get; set; } //Negative for descent
} 
```

如果我们有一个“工作线程”根据经过的时间和爬升率更新飞机的高度，那么确保在新的高度被击中时循环停止的理想设计/实现是什么？

```
private void AltitudeThreadWork()
{
    var updated = DateTime.Now;

    while (Aircraft.Altitude != AltitudeChange.Altitude)
    {
        UpdateAltitude((DateTime.Now - updated).TotalMilliseconds);
        updated = DateTime.Now;
        Thread.Sleep(40);
    }
}

private void UpdateAltitude(double ellapsed)
{
    Aircraft.Altitude += ellapsed*(AltitudeChange.RateOfClimb/60000d);
} 
```

例如，此线程不会停止爬升过程，因为双精度数通常不会完全相等。

即使您将双精度值转换为 int，您仍然不能 100% 确定这两个值是否相等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:49:30.117

你可以通过寻找符号变化来做到这一点：

```
private void AltitudeThreadWork()
{
    bool isOrigPositive = Aircraft.Altitude - AltitudeChange.Altitude > 0;

    do
    {
        var updated = DateTime.Now;
        UpdateAltitude((DateTime.Now - updated).TotalMilliseconds);
        Thread.Sleep(40);
        bool isNowPositive = Aircraft.Altitude - AltitudeChange.Altitude > 0;
    } 
    while (isOrigPositive == isNowPositive)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:45:44.597

基本上你要确保你不会过冲。因此，与其检查是否相等，不如检查应用更改是否会使您*远离*目标高度或更接近目标高度。

您可能*还想*更改调整高度以停止超调开始的线程。例如，伪代码：

```
double potentialAltitude = currentAltitude + AltitudeChange;
if (AltitudeChange < 0) // Going down... don't go below the "floor"
{
    newAltitude = Math.Max(potentialAltitude, TargetAltitude);
}
else // Going up... don't go above the "ceiling"
{
    newAltitude = Math.Min(potentialAltitude, TargetAltitude);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:47:34.890

```
 public bool AlttudeReached(double alt1, double alt2, double rateofClimb) {
        return rateofClimb > 0 ? alt1 >= alt2 : alt2 >= alt1;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T13:45:55.657

```
private void AltitudeThreadWork()
{
    var updated = DateTime.Now;

    bool above = Aircraft.Altitude > AltitudeChange.Altitude;  // Determine if it is a climbing or a descent

    while ((Aircraft.Altitude > AltitudeChange.Altitude) == above)  // Check if it is in the same side of the plane defined by Altitude 
    // (because altitude is a continuous function, if it is on the other "side" it means it has crossed the given altitude)
    {
        UpdateAltitude((DateTime.Now - updated).TotalMilliseconds);
        updated = DateTime.Now;
        Thread.Sleep(40);
    }

    Aircraft.Altitude = AltitudeChange.Altitude;  // Altitude is reached
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T13:46:37.920

浮点数/双精度数的问题是检查相等性很困难。因此，您应该使用您认为它们“相等”的“范围”。

在 1 行中覆盖上下：

```
while(Math.Abs(Altitude - AltitudeChange.Altitude) > 0.0001) 
```

# user-interface - 使用 GUI 工具包查找？

> ID：14584328
> 
> 赞同：0
> 
> 时间：2013-01-29T13:40:41.973
> 
> 标签：user-interface

这可能是错误的地方......但由于它实际上是关于 GUI 工具包，我认为它可能适合这里。

无论如何，有一个程序（对于任何人来说，它实际上是一个名为 Morrowind 的游戏的自动改装东西）。不管怎样，它有一个漂亮干净的 GUI 布局，它适用于 Windows。基本上我试图找出使用了什么工具包。

我已经尝试联系作者，但我没有看到任何关于在任何地方提到的内容。我有没有机会以某种方式找出制作这个程序时使用了哪个工具包？

或者这是技术上的私人信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:44:52.690

如果程序在 MS-Windows 上运行，[Dependency Walker](http://dependencywalker.com/)允许您找出程序需要哪些库。所需的库可能会提示您使用了哪个 GUI 工具包。

在其他平台上，[ldd](http://en.wikipedia.org/wiki/Ldd_%28Unix%29)通常可用并为您提供类似的信息。

这仅在 GUI 工具包被动态链接时才有效。

# django - 如何让 django-simple-history 与 Tastypie 一起工作？

> ID：14584329
> 
> 赞同：5
> 
> 时间：2013-01-29T13:40:42.597
> 
> 标签：django, tastypie

我需要存储对对象所做更改的完整历史记录。我发现[django-simple-history](https://github.com/treyhunner/django-simple-history)非常吸引人，但它不适用于[django-tastypie](http://django-tastypie.readthedocs.org/en/latest/)。如果我使用 PUT（更新对象）将数据发送到 API，则对象更新正常，但历史记录未更新。如果我通过“./manage.py shell”手动更改对象，一切正常。看起来美味派正在绕过信号或其他东西。

有什么想法可以让我按预期工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:10:13.463

在没有看到您的代码的情况下，我将尝试分析解决这个问题。

查看 django-simple-history 似乎该项目确实在 post_save/post_delete 信号上创建历史对象，并使用自定义 model.Manager 子类提供对它们的访问。

在我看来，TastyPie 保存的资源是 ModelResource 而不是您的实际 Model 实例。这个代理模型知道 orm 并对其执行所有查询。

所以我认为发生的事情`simple_history/models.py`是该`contribute_to_class`方法声明`models.signals.class_prepared.connect(self.finalize, sender=cls)`但这个信号永远不会触发，因为 TastyPie 没有初始化模型的实例......

这看起来很奇怪，我不明白为什么 TastyPie 会那样做，或者我误解了什么？你为什么不尝试在 github 存储库中打开一个问题？

# restart - 清漆突然重启

> ID：14584335
> 
> 赞同：1
> 
> 时间：2013-01-29T13:40:51.710
> 
> 标签：restart, varnish

清漆是否保留崩溃/重启日志？

我目前正在监控一个清漆服务器，它似乎每周左右重新启动，当 CPU 使用率达到大约 100% 时（负载有点高 - 在 2 核机器上大约 6~7）并且 IO 等待平均需要 45% CPU 时间。

我是否缺少任何配置或预定义的行为？这是否意味着我的硬件存在瓶颈导致清漆失败？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T17:30:02.657

当孩子去世时，您应该在 syslog 中看到一条消息。它会说类似`Child exited...`. Varnish 擅长跟踪孩子，所以当它崩溃时，它会立即重新启动并记录它。

6-7 的负载似乎很高。如果您使用的是文件支持存储，我建议切换到 malloc。如果您需要更多缓存空间，请购买一个具有更多内存的盒子。使用 nuking 行为作为您的指南 ( `varnishstat -1 | grep nuke`)。如果 varnish 报告的值为 0，则您的缓存大小就足够了。

# view - EmberJs：嵌套视图

> ID：14584337
> 
> 赞同：0
> 
> 时间：2013-01-29T13:40:53.643
> 
> 标签：view, ember.js, nested, outlet

我有这个可以旋转 div 元素的视图。就像是

```
<div class="rotatable">
    <div class="front">
         {{outlet front}}
    </div>
    <div class="back">
        {{outlet back}}
    <div>
</div> 
```

现在我有了这个索引模板，其中包含其中两个可旋转元素。每个可旋转元件具有不同的正面和背面。所以它可能看起来像这样

```
<div id="index">
    {{#rotatable}}
        {{outlet front App.FrontView1}}
        {{outlet back App.BackView1}}
    {{/rotatable}}
    {{#rotatable}}
        <div>This should show up inside {{outlet front}}</div>
        {{outlet back App.BackView2}}
    {{/rotatable}}
</div> 
```

这当然行不通，但是应该怎么做呢？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:24:28.750

我想这个问题有点不清楚。无论如何，答案在这篇文章中给出

[EmberJs：如何使用 connectOutlet](https://stackoverflow.com/questions/14605384/emberjs-how-to-use-connectoutlet)

# angularjs - 在 chrome App 中使用时控制台中的 Angular UI Select2 转储错误

> ID：14584339
> 
> 赞同：3
> 
> 时间：2013-01-29T13:40:57.690
> 
> 标签：angularjs, angular-ui, jquery-select2, google-chrome-app

我正在尝试使用**AngularJS**和**Angular-UI在****chrome App**中使用以下 select2 示例。它工作正常，但不幸的是，每次单击下拉框时，我都会在 chrome 控制台中收到以下错误。 "*拒绝执行内联事件处理程序，因为它违反了以下内容安全策略指令："default-src 'self' chrome-extension-resource:"。请注意，'script-src' 未明确设置，因此 'default-src'用作后备。* ”

 *****有什么建议我该如何解决这个问题？

谢谢

*此代码在浏览器中运行良好，没有任何问题，但在 chrome 应用程序
**代码中没有：**

控制器

```
 var app = angular.module("app", ['ui']);

function Ctrl($scope) {

    $scope.contacts = [
        {
        "id": 1,
        "name": "Lucky"},
       {
        "id": 2,
        "name": "Lance"},
    {
        "id": 3,
        "name": "Troels"},
    {
        "id": 4,
        "name": "Phe"}
    ];

} 
```

看法

```
<select class="input-medium" ui-select2 ng-model="form.cont" type="text" value="" >
    <option ng-repeat="contac in all" value="{{contac.id}}">{{contac.name}}</option>               
</select> 
```

* * *

**解决了！**
感谢@AlanRodriguesSoares 的提示。我已经从 gitub ( [link] [https://raw.github.com/timoxley/select2/bug/onclick/select2.js](https://raw.github.com/timoxley/select2/bug/onclick/select2.js) ) 下载了另一个版本的 select2.js，这个问题在其中得到了修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:48:04.730

如果您查看 select2.js，内联设置了两个“onclick”事件，这是一个已知错误，请尝试删除它。select.js 第 1524 和 2232 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:33:08.560

将指令 ng-csp 添加到您的元素：

```
<html ng-app ng-csp>
... 
```

有了这个指令，AngularJS 就不会使用任何 CSP 禁止的动态 JS 代码，比如 eval 和 new Function。*****

# sql - SQL 中的切换或大小写

> ID：14584340
> 
> 赞同：0
> 
> 时间：2013-01-29T13:41:02.930
> 
> 标签：sql, case

我正在编写一个需要执行`SWITCH`字符串变量并根据值执行不同操作的存储过程，伪代码可能是：

```
CASE @my_string
WHEN 'value'
UPDATE table 1
WHEN 'Other_value'
UPDATE table 2 
```

我找不到任何以这种方式完成的开关示例，是否有可能或者我`IF/ELSE`每次都需要使用？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:48:28.243

使用`IF`将是典型的方式：

```
IF @my_string = 'value'
BEGIN
     UPDATE SomeTable
     WHERE somecondition
END
IF @my_string = 'Other_value'
BEGIN
     UPDATE SomeOtherTable
     WHERE somecondition
END 
```

# html - 当 HTML 在 PHP 变量中时在 HTML 中使用 PHP 变量

> ID：14584347
> 
> 赞同：0
> 
> 时间：2013-01-29T13:41:26.560
> 
> 标签：html, variables, php

我有一个 .php 脚本。在一个变量中我添加了一个 html，但是在那个 html 中我想从另一个变量中获取文本，我该怎么做？

这是带有 html 的变量：

```
$ai_boc   = '
<html>
<head>
  <title>Notes by Douno</title>
</head>

<body>
<div align="center">
<div style="width:600px; height:auto; border-radius:10px; background-color:#F7F1B8; background-repeat: auto; font-family:Georgia;  color:#513414;">

    <div style="height:100px; padding-top:20px; padding-left:20px; text-align:left;">
    <p style="margin-bottom:0px; font-weight:bold; font-size:xx-large;">$ai_su</p>
    <p style="margin-top:5px; font-size:x-small; font-weight:bold;">$ai_da</p>
    </div>
        <div style="height:1px; background-image: url(http://dl.dropbox.com/u/99775621/divider.jpg); display:block; position:relative;">
        </div>
    <div style="position:relative; overflow:hidden;">

        <div style="height:auto; width:375; padding-left:20px; text-align:left; position:relative; float:left;">
            <div style="width:375px;"> <p style="font-size:x-small; font-weight:bold;"><?php echo $ai_bo?></p>
            </div>
        </div>

        <div style="height:auto; width:160px; padding-left:20px; padding-right:20px; text-align:left; position:relative; float:left;">
        <p style="font-size:x-small; font-weight:bold; vertical-align:bottom;">If this email is considered spam, please contact us.</br></br>This email was send via Notes. An Android app developed by Douno.</p>
        <a href="https://play.google.com/store/apps/details?id=appinventor.ai_L_Bogaerts_95.Notes">
        <img alt="Get it on Google Play"
        src="https://developer.android.com/images/brand/en_generic_rgb_wo_45.png" />
        </a>

        </div>

    </div>
        <div style="height:1px; background-image: url(http://dl.dropbox.com/u/99775621/divider.jpg); display:block; position:relative;">
        </div>
    <div style="height:100px; width:600px; display:inline-block; position:relative;">

    </div>      

</div>
</div>
</body>
</html>
'; 
```

我找不到任何有效的解释，所以我希望这里有人可以进一步帮助我。html 还没有完成......我还要进行一些更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:43:46.683

使用字符串连接或变量扩展：

```
 $html = '<html>'.$somevar.'</html>';      // concatenation
 $html = "<html>$somevar</html>";           // expansion, only works with double quotes (") 
```

但**更好**的是使用一个[像样的模板系统](http://www.smarty.net/)来完全分离 HTML 和 PHP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T13:44:53.183

你可以使用这样的东西：

```
$test = 'test';
$html = '<h1>' . $test . '</h1>'; 
```

或者

```
$test = 'test';
echo "Hello {$test}"; 
```

另一种方式（仅在 PHP 5.3+ 中可用）：

```
 $test = 'test';
    $html = <<<EOT 
Hello $test
EOT; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:44:30.303

使用 HEREDOC .. 您可以在 Heredoc 中使用 HTML 和 PHP 变量，就像您通常会做的那样。

```
$ai_boc   = <<< EOT
<html>
<head>
  <title>Notes by Douno</title>
</head>

<body>
<div align="center">
<div style="width:600px; height:auto; border-radius:10px; background-color:#F7F1B8; background-repeat: auto; font-family:Georgia;  color:#513414;">

    <div style="height:100px; padding-top:20px; padding-left:20px; text-align:left;">
    <p style="margin-bottom:0px; font-weight:bold; font-size:xx-large;">$ai_su</p>
    <p style="margin-top:5px; font-size:x-small; font-weight:bold;">$ai_da</p>
    </div>
        <div style="height:1px; background-image: url(http://dl.dropbox.com/u/99775621/divider.jpg); display:block; position:relative;">
        </div>
    <div style="position:relative; overflow:hidden;">

        <div style="height:auto; width:375; padding-left:20px; text-align:left; position:relative; float:left;">
            <div style="width:375px;"> <p style="font-size:x-small; font-weight:bold;"><?php echo $ai_bo?></p>
            </div>
        </div>

        <div style="height:auto; width:160px; padding-left:20px; padding-right:20px; text-align:left; position:relative; float:left;">
        <p style="font-size:x-small; font-weight:bold; vertical-align:bottom;">If this email is considered spam, please contact us.</br></br>This email was send via Notes. An Android app developed by Douno.</p>
        <a href="https://play.google.com/store/apps/details?id=appinventor.ai_L_Bogaerts_95.Notes">
        <img alt="Get it on Google Play"
        src="https://developer.android.com/images/brand/en_generic_rgb_wo_45.png" />
        </a>

        </div>

    </div>
        <div style="height:1px; background-image: url(http://dl.dropbox.com/u/99775621/divider.jpg); display:block; position:relative;">
        </div>
    <div style="height:100px; width:600px; display:inline-block; position:relative;">

    </div>      

</div>
</div>
</body>
</html>
EOT; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T13:44:41.903

尝试将此添加到您的代码中 -

```
$ai_boc .= $other_var; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T13:44:56.167

你的主要引号应该是双引号，你可以说

```
$ai_boc="<html ... {$variable} ... more html"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T13:45:32.963

有几个选项。

PHP 以不同的方式理解引号（阅读此内容，应该澄清您的疑问： http: [//php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)）

最后，这是它应该如何工作的：

```
$replacement = "This is a string I want to insert into another one";
$bigger_text = "This is a bigger text. {$replacement} And the former variable has just been inserted here"; 
```

发生这种情况是因为 PHP “解析”双引号并在需要时插入变量。

为清楚起见，用大括号 {} 将插值字符串括起来也是一个好习惯，并且还允许您插值如下：

```
$interpolated = "Hello {$user[0]['name']}."; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-29T13:49:41.063

当您有一个长 html 字符串时，您可以使用`ob_start()`and `ob_get_clean()`：

```
<?php
ob_start();

$title = "My website";

?><html>
    <head>
        <title><?=$title?></title>
    </head>
    <body>
        ...
    </body>
</html><?php

$ai_boc = ob_get_clean(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-29T13:51:28.757

如果您必须在 PHP 代码中嵌入大块 HTML，那么@Kalpesh Mehta 的答案中描述的 HEREDOC 语法就是这样做的方法。

但是，这里最好的答案是使用适当的模板机制——即使它只是预定义标记的基本字符串替换。然后你可以将你的 HTML 拆分成一个单独的文件，这将比将它嵌入到 PHP 字符串中更容易使用。

So`template.html`包含您的代码，并带有标记，例如`{marker}`您想要变量的位置。

然后你的 PHP 代码看起来像这样：

```
$ai_boc = file_get_contents('template.html');
$ai_boc = str_replace('{marker}', $my_variable, $ai_boc);
print $ai_boc; 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-01-29T13:44:13.693

**示例：**

$var="测试";

```
$html="<html> $var </html>"; 
```

**或者**

```
$html="<html>". $var." </html>"; 
```

# javascript - 安装 windows8 应用程序时会触发哪个事件？我想在安装应用程序时创建 indexdb 数据库

> ID：14584349
> 
> 赞同：1
> 
> 时间：2013-01-29T13:41:40.317
> 
> 标签：javascript, html, windows-8

我只是想知道应该在哪里以及如何在我的 win8 应用程序中创建 indexdb 数据库。我不确定当应用程序首次安装在用户机器上时会触发哪个事件。

我相信 if (args.detail.kind === activation.ActivationKind.launch) 用于在每次启动应用程序时检查和执行操作，我正在寻找的是第一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:13:18.547

没有“安装时”行为。您应该检测您的第一次运行（通过在本地设置或类似设置中保存一个值），然后创建数据库。

例如，在您的激活处理程序中编写如下代码：

```
if(!window.localSettings["createdDb"]) {
    createDB();
    window.localSettings["createdDb"] = true;
} 
```

# java - 剑道数据源带来空记录

> ID：14584354
> 
> 赞同：0
> 
> 时间：2013-01-29T13:41:55.360
> 
> 标签：java, jsp, datasource, kendo-ui, kendo-grid

我试图让我的网格数据源从 URL 检索数据以及使用传输销毁和传输更新：

```
var dataSourceKGrid = new kendo.data.DataSource({
    transport: {
        read: {
            url: "/editinline/read",
            data: {
                productCat: $("#productCBox").value()
            }
        },
        destroy: {
            url: "/editinline/destroy"
        },
        update: {
            url: "/editinline/update"
        },
        schema: {
            id: "productDS",
            model: {
                fields: {
                    id: {editable: false},
                    name: {type: "string"}
                }
            }
        }
    }
}); 
```

网格：

```
<kendo:grid name="kGridProduct" pageable="true" sortable="true" scrollable="true" navigatable="true" height="300">
    <kendo:grid-editable mode="inline"/>
    <kendo:grid-columns>
        <kendo:grid-column title="Name" field="name" />
        <kendo:grid-column title="Id" field="id" />
        <kendo:grid-column title="&nbsp;" >
            <kendo:grid-column-command>
                <kendo:grid-column-commandItem name="edit" />
                <kendo:grid-column-commandItem name="destroy" />
            </kendo:grid-column-command>
        </kendo:grid-column>
    </kendo:grid-columns>
    <kendo:dataSource data="dataSourceKGrid" pageSize="5">            
    </kendo:dataSource>
</kendo:grid> 
```

我有处理请求的控制器类：

```
@RequestMapping(value = "/edit-inline/read", method = RequestMethod.GET)
    public @ResponseBody List<product> read(HttpServletRequest request) {
        return prodDAO.list(Integer.parseInt(request.getParameter("productCat")));
    } 
```

问题是网格显示为空，正好有 15 条记录，并且两个按钮都不起作用。我可以使用硬编码的值`productCat`，但它仍然会显示 15 条空记录。我也有一个疑问，我写它的方式，如果用户在 ComboBox 上选择不同的类别，网格数据会刷新还是我需要强制它？

# .net - 表达式中未定义的函数“Nz”

> ID：14584355
> 
> 赞同：9
> 
> 时间：2013-01-29T13:41:58.597
> 
> 标签：.net, sql, ms-access

我已经用谷歌搜索了这个错误，但还没有得出我为什么会收到这个错误的结论。我正在尝试用一些数据填充 DataGridView。这是我的代码。

```
Private Sub LoadGrid()
    Dim cmd As New OleDbCommand
    Dim dt As DataTable
    With cmd
        .CommandText = "project_master_query"
        .CommandType = CommandType.StoredProcedure
        .Connection = New OleDbConnection(My.Settings.cnnString)
    End With
    dt = GetData(cmd)
    dgvData.DataSource = dt
End Sub

Private Function GetData(ByVal cmd As OleDbCommand) As DataTable
    Dim dt As New DataTable
    Using cmd.Connection
        cmd.Connection.Open()
        dt.Load(cmd.ExecuteReader(CommandBehavior.CloseConnection))
    End Using
    Return dt
End Function 
```

查询存储在 Access 中的“project_master_query”。

```
 SELECT project_master.*, location_master.LocationName,
    project_currentmilestonedef.MilestoneDefID, 
    project_currentmilestonedef.MilestoneName, project_regions.RegionName,
    owner_fullname.FullName AS OwnerFullName, designer_fullname.FullName AS DesignerFullName,
    project_issuecount.HasOpenIssues, project_updated_closedate.UpdatedCloseDate, 
    project_bonusdays.BonusDays, project_bonusdays.IsGreen, project_bonusdays.IsYellow, 
    project_bonusdays.IsRed, checklist_days_perproject_defined_1.Week1, 
    checklist_days_perproject_defined_1.Week2, checklist_days_perproject_defined_1.Week3, 
    checklist_days_perproject_defined_1.Week4, project_issueduration.ProjectIssueDurationDays, 
    project_active_status.ProjectIsOpen, project_requirement_status.RequirementStatusName, 
    priority_def.PriorityShortName
    FROM project_requirement_status 
    RIGHT JOIN (project_regions 
    RIGHT JOIN (priority_def RIGHT JOIN (location_master 
    RIGHT JOIN ((((checklist_days_perproject_defined AS checklist_days_perproject_defined_1 
    RIGHT JOIN ((((((((contacts_fullname AS designer_fullname 
    RIGHT JOIN (contacts_fullname AS owner_fullname 
    RIGHT JOIN project_master ON owner_fullname.ContactID = project_master.ContactOwner) 
    ON designer_fullname.ContactID = project_master.ContactDesigner) 
    LEFT JOIN project_issuecount 
    ON project_master.ProjectID = project_issuecount.ProjectID) 
    LEFT JOIN project_currentmilestonedef 
    ON project_master.ProjectID = project_currentmilestonedef.ProjectID) 
    LEFT JOIN project_within_benchmark_week1 
    ON project_master.ProjectID = project_within_benchmark_week1.ProjectID) 
    LEFT JOIN project_within_benchmark_week2 
    ON project_master.ProjectID = project_within_benchmark_week2.ProjectID) 
    LEFT JOIN project_within_benchmark_week3 
    ON project_master.ProjectID = project_within_benchmark_week3.ProjectID) 
    LEFT JOIN project_updated_closedate 
    ON project_master.ProjectID = project_updated_closedate.ProjectID) 
    LEFT JOIN checklist_days_perproject_defined 
    ON project_master.ProjectID = checklist_days_perproject_defined.ProjectID) 
    ON checklist_days_perproject_defined_1.ProjectID = project_master.ProjectID) 
    LEFT JOIN project_issueduration 
    ON project_master.ProjectID = project_issueduration.ProjectID) 
    LEFT JOIN project_active_status 
    ON project_master.ProjectID = project_active_status.ProjectID)    
    LEFT JOIN project_bonusdays ON project_master.ProjectID = project_bonusdays.ProjectID) 
    ON location_master.LocationID = project_master.Location) 
    ON priority_def.PriorityDefID = project_master.ProjectPriority) 
    ON project_regions.RegionID = project_master.Region) 
    ON project_requirement_status.RequirementStatusID = project_master.RequirementStatus; 
```

如您所见，查询中根本没有 Nz，所以我不明白为什么会发生这种情况。一旦调用 dt.Load，就会发生错误。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-29T13:53:49.293

该`Nz`函数最有可能出现在您在众多联接之一中引用的视图/查询中。你必须仔细检查所有这些。

作为`Nz()`Access 应用程序而不是 Access 驱动程序的功能，只要您尝试从 Access 应用程序外部使用它，它就会失败。您可以将 替换为`Nz`构造`IIf(IsNull())`。

请参阅文档[`IIf`](https://support.office.com/en-us/article/IIf-Function-32436ECF-C629-48A3-9900-647539C764E3)和[`IsNull`](https://support.office.com/en-us/article/IsNull-Function-F963233B-1C1E-4B0C-8BC3-3E8C0EA67C61)

放在一起时：

`Nz(expr, [valueifnull])`

变成

`IIf(IsNull(expr), valueifnull, valueifnotnull)`

**例子**

默认：`Nz(tbl.A) => IIf(IsNull(tbl.A), '', tbl.A)`

有后备：`Nz(tbl.A, tbl.B) => IIf(IsNull(tbl.A), tbl.B, tbl.A)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-08T11:36:40.863

我创建了一个在这种情况下使用的函数。我叫它ez。

```
Public Function ez(ByVal vVal1 As Variant, Optional ByVal vVal2 As Variant = 0) As Variant
    If VBA.IsNull(vVal1) Or VBA.Len(vVal1) = 0 Then
        ez = vVal2
    Else
        ez = vVal1
    End If
End Function 
```

正如你所看到的，它比原始函数更进一步，因为它不仅考虑第二个值是否第一个为空，而且如果它为空

此外，默认返回值为 0，而 Nz 为空字符串。

# sql-server - 基本的 sql server 子查询，它如何影响性能？

> ID：14584357
> 
> 赞同：2
> 
> 时间：2013-01-29T13:42:00.557
> 
> 标签：sql-server

此 SQL 查询是否有性能损失？

> select fullname, address from (select (name + ' ' + lastname) as fullname, address from mytable) as tab

与之比较：

> select (name + ' ' + lastname) as fullname, address from mytable

也许你会想.. 为什么我要这样做，原因是因为 SQL Server 不允许在 group by 中使用别名，所以使用签名子查询我可以这样做

> select fullname, address from (select (name + ' ' + lastname) as fullname, address from mytable) as tab group by fullname

代替

> select (name + ' ' + lastname) as fullname, address from mytable group by name + ' ' + lastname

这只是一个示例，其中 alias is 和 alias 的基本连接，但连接更复杂，将其重写为 group 子句真的很难看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:48:59.223

子查询本身不太可能导致性能问题。查询计划器可能会重新排列查询，使其最终根本不是子查询。查看性能计划将揭示查询实际发生的情况。

可能是性能问题是您正在对计算值进行分组。这意味着数据库不能使用任何索引进行分组，因此它必须创建所有值然后对它们进行排序。

如果可能，您应该对计算中使用的值进行分组，例如：

```
select name + ' ' + lastname as fullname
from mytable
group by name, lastname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:09:43.157

提高性能的一种选择可能是创建一个计算列，其中包含名为 fullname 的 Persisted 关键字。

```
ALTER TABLE dbo.[yourtable] ADD
fullname AS (firstname+' '+lastname) PERSISTED
GO
--instead of SELECT firstname + ' ' + lastname, address FROM dbo.[yourtable]     
SELECT fullname, address 
FROM dbo.[yourtable] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:47:43.593

我不确定我是否完全理解您的问题，但总的来说，子查询会对性能产生负面影响，应该避免。为什么不使用[CONCAT](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)语法？

```
select CONCAT(name, ' ', lastname) as fullname, address from mytable group by CONCAT(name, ' ', lastname); 
```

根据您的情况和复杂性，您可能还想查看[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)。

# knockout.js - 淘汰赛 - 可分组数组

> ID：14584358
> 
> 赞同：1
> 
> 时间：2013-01-29T13:42:02.863
> 
> 标签：knockout.js, group-by, ko.observablearray

从教程中，我试图理解这个有前途的框架。我的问题是如何从可观察数组（过滤器）中提取一些数据？我在这里发现了一个类似的问题： [类似的问题](https://stackoverflow.com/questions/9877301/knockoutjs-observablearray-data-grouping)

但我不知道如何实现它。这是测试： [jsfiddle](http://jsfiddle.net/kiminox/gbWmm/1/)

HTML 代码：

```
<h2>Your seat reservations (<span data-bind="text: seats().length"></span>)</h2>
<h4>
Distribution by meal type:
    <table>
        <thead>
            <tr data-bind="foreach: availableMeals">
                <th><span data-bind="text: mealName"></span></th>
            </tr>
        </thead>
        <tbody>
            <tr data-bind="foreach: availableMeals">
                <td>???</td>
            </tr>
        </tbody>
    </table>
</h4>
<table>
    <thead><tr>
        <th>Passenger name</th><th>Meal</th><th>Surcharge</th><th></th>
    </tr></thead>
    <tbody data-bind="foreach: seats">
        <tr>
            <td><input data-bind="value: name" /></td>
            <td><select data-bind="options: $root.availableMeals, value: meal, optionsText: 'mealName'"></select></td>
            <td data-bind="text: formattedPrice"></td>
            <td><a href="#" data-bind="click: $root.removeSeat">Remove</a></td>
        </tr>    
    </tbody>
</table>

<button data-bind="click: addSeat, enable: seats().length < 7">Reserve another seat</button>

<h3 data-bind="visible: totalSurcharge() > 0">
    Total surcharge: $<span data-bind="text: totalSurcharge().toFixed(2)"></span>
</h3> 
```

JS代码：

```
// extend from the link to the similar question from stackoverflow:
ko.observableArray.fn.distinct = function(prop) {
    var target = this;
    target.index = {};
    target.index[prop] = ko.observable({});    
    //Group by already set up, bail out.
    if (target.index && target.index[prop]) return target;
    ko.computed(function() {
        //rebuild index
        var propIndex = {};

        ko.utils.arrayForEach(target(), function(item) {
            var key = ko.utils.unwrapObservable(item[prop]);
            if (key) {
                propIndex[key] = propIndex[key] || [];
                propIndex[key].push(item);            
            }
        });   

        target.index[prop](propIndex);
    });

    return target;
};

// Class to represent a row in the seat reservations grid
function SeatReservation(name, initialMeal) {
    var self = this;
    self.name = name;
    self.meal = ko.observable(initialMeal);

    self.formattedPrice = ko.computed(function() {
        var price = self.meal().price;
        return price ? "$" + price.toFixed(2) : "None";        
    });    
}

// Overall viewmodel for this screen, along with initial state
function ReservationsViewModel() {
    var self = this;

    // Non-editable catalog data - would come from the server
    self.availableMeals = [
        { mealName: "Standard (sandwich)", price: 0 },
        { mealName: "Premium (lobster)", price: 34.95 },
        { mealName: "Ultimate (whole zebra)", price: 290 }
    ];    

    // Editable data
    self.seats = ko.observableArray([
        new SeatReservation("Steve", self.availableMeals[0]),
        new SeatReservation("Bert", self.availableMeals[0]),
        new SeatReservation("Steve", self.availableMeals[1]),
        new SeatReservation("John", self.availableMeals[1]),
        new SeatReservation("Frank", self.availableMeals[1]),
        new SeatReservation("Evan", self.availableMeals[2])
    ]);

    // Computed data
    self.totalSurcharge = ko.computed(function() {
       var total = 0;
       for (var i = 0; i < self.seats().length; i++)
           total += self.seats()[i].meal().price;
       return total;
    });    

    // Operations
    self.addSeat = function() {
        self.seats.push(new SeatReservation("", self.availableMeals[0]));
    }
    self.removeSeat = function(seat) { self.seats.remove(seat) }
}

ko.applyBindings(new ReservationsViewModel()); 
```

我从 KO 教程开始工作：pb 是我想按膳食类型显示客户分布吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:33:50.813

开箱即用的淘汰赛不提供任何“可分组数组”。

然而，Knockout[带有一些实用功能](http://www.knockmeout.net/2011/04/utility-functions-in-knockoutjs.html)，例如：

*   `ko.utils.arrayForEach`
*   `ko.utils.arrayFilter`

它可以帮助您手动构建自己的自定义分组。

所以这里是示例`mealDistribution`实现的样子：

```
self.mealDistribution = ko.computed(function () {
        var seatCount = self.seats().length;
        var result = [];
        ko.utils.arrayForEach(self.availableMeals, function (meal) {
            var mealCount = ko.utils.arrayFilter(self.seats(), function (item) {
                return item.meal() == meal}).length;
            result.push(mealCount / seatCount);

        });
        return result;
    }); 
```

演示[JSFiddle](http://jsfiddle.net/3FHEK/1/)。

如果你想拥有一些更复杂的数组处理函数，你应该查看[Underscore.js](http://underscorejs.org/)库，它有一些非常好的函数，比如`groupBy`，`countBy`

# orm - 为什么 Doctrine 2 没有基本的验证方法来验证所有值是否符合实体属性？

> ID：14584361
> 
> 赞同：2
> 
> 时间：2013-01-29T13:42:05.123
> 
> 标签：orm, doctrine, doctrine-orm, datamapper

我是教义2的新手。

**为什么 Doctrine 2 没有基本的验证方法来验证所有值是否符合实体属性？**

我的问题旨在更多地了解教义 2 的工作原理以及为什么不说教义 2 中的问题。（主要是因为我是新手，我错过了对教义 2 设计方式的一些理解）

**例子：**

```
<?php
// entities/User.php
/**
 * @Entity @Table(name="users")
 **/
class User
{
    /**
     * @Id @GeneratedValue @Column(type="integer")
     * @var int
     **/
    protected $id;

    /**
     * @Column(type="string")
     * @var string
     **/
    protected $name;

} 
```

验证中使用构建的代码示例（不需要连接到数据库，只验证@Column（type =“integer”））教义2中不存在的基本功能：

```
$user=new User();
$user->setId('trtr');
$user->setName("goodname");
if($user->validate()){
  echo 'ok';
}
else{
  echo $user->validateError();
}

//output: id of User should be integer and not string 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T20:21:04.923

Doctrine ORM 假设您持久化的实体处于有效状态。这是持久层的唯一工作，向它添加验证是错误的。如果您的实体中包含无效数据，则您已经拥有不应保存的无效对象图。

所以请记住，如果你曾经有过类似的 API

```
$someEntity->isValid(); 
```

然后可能是错误的，因为实体应该始终有效，并且它的任何依赖项都应该在构造时设置并在 setter/getter 中处理，以便对象永远不会达到不一致的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-29T23:16:03.817

混合实体和验证并不是一个好主意，但是在实体中将此规则作为注释和验证逻辑放在分离的方面验证器类中是有意义的。

检查它是如何在 Spring 框架中完成的 - [http://www.abtosoftware.com/blog/form-validation-using-aspect-orientation-programming-aop-in-spring-framework](http://www.abtosoftware.com/blog/form-validation-using-aspect-oriented-programming-aop-in-spring-framework)

以及如何使用doctrine2和go实现它-http: [//go.aopphp.com/blog/2013/07/21/implementing-logging-aspect-with-doctrine-annotations/](http://go.aopphp.com/blog/2013/07/21/implementing-logging-aspect-with-doctrine-annotations/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T22:39:15.690

主要原因是关注点分离。由于实体是相当愚蠢的对象，对世界其他地方知之甚少，因此它们进行验证的能力一开始就受到限制。

例如，您的典型实体无法验证特定属性是否唯一。

也就是说，如果您只想进行基本验证，只需在设置器中进行。

```
<?php
class MyEntity {

    // ...

    /**
     * @ORM\Column(length="32")
     */
     protected $myProperty;

     public function setMyProperty($prop){
         if (! is_string($prop))
             throw new \InvalidArgumentException('MyEntity::setMyProperty() expects a string!';
         if (strlen($prop) > 32)
             throw new \LengthException('Argument passed to MyEntity::setMyProperty() is too long!');
         $this->myProperty = $prop;
     }

} 
```

这种方法可用于强制执行数据类型、长度等。除此之外的任何内容都最好在实体内部以外的地方处理。

# mysql - MySql varchar 排序

> ID：14584364
> 
> 赞同：1
> 
> 时间：2013-01-29T13:42:14.167
> 
> 标签：mysql, sorting, varchar

我有另一个与其他人完全相同的问题的问题。我阅读了很多关于此的论坛和内容，但找不到答案。我正在使用 LPAD，因为我得到了最接近我需要的结果，但它仍然不是我想要的。

```
ORDER BY LPAD(`my_value`, '500', '0') ASC 
```

记录现在看起来像这样：

```
Mova 16
Mova 110
Mova 125
Mova 140
Mova 180
Mova 160N 
```

但我需要按以下顺序使用它们：

```
Mova 16
Mova 110
Mova 125
Mova 140
Mova 160N
Mova 180 
```

**那么，我该如何实现呢？**

我必须注意，此表中还有其他记录，例如：

```
"GIACOMINI" R780 DN15 v/2 kampinis
"GIACOMINI" R780 DN20 v/3 kampinis
"GIACOMINI" R780 DN25 v/1 kampinis 
```

还有更多……这些也应该适合这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:05:47.620

这个怎么样？

```
SELECT   *
FROM     yourtable
ORDER BY CAST(SUBSTRING(yourcolumn,LOCATE(' ',yourcolumn)+1) AS SIGNED) ASC; 
```

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/162fe/1)

结果：

```
| YOURCOLUMN |
--------------
|    Mova 16 |
|   Mova 110 |
|   Mova 125 |
|   Mova 140 |
|  Mova 160N |
|   Mova 180 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:29:10.657

我的想法是将您的列转换为固定长度的字符串，字母数字字符和数字在块中对齐，例如

```
Input string                       | aligned string
---------------------------------------------------------------------------------------
Mova 16                            | MOVA......0000000016
Mova 110                           | MOVA......0000000110
Mova 180                           | MOVA......0000000180
Mova 160N                          | MOVA......0000000160N.........
"GIACOMINI" R780 DN15 v/2 kampinis | GIACOMINI.R.........0000000780DN........000..etc.
"GIACOMINI" R780 DN20 v/3 kampinis | GIACOMINI.R.........0000000780DN........000..etc. 
```

然后我们可以使用对齐的字符串对行进行排序，但是要获得结果，我们需要创建一个自定义函数：

```
DROP FUNCTION IF EXISTS strformat;
SET GLOBAL  log_bin_trust_function_creators=TRUE; 
DELIMITER |
CREATE FUNCTION strformat(str VARCHAR(128))
RETURNS VARCHAR(128)
BEGIN
  DECLARE i INT;
  DECLARE last INT;
  DECLARE curr INT;
  DECLARE res VARCHAR(128);
  DECLARE block VARCHAR(10);

  SET res='';
  SET block='';
  SET i=1;

  IF LENGTH(str) = 0 THEN
    RETURN NULL;
  END IF;

  WHILE i <= LENGTH(str) DO
    SET curr=IF(MID(str, i, 1) RLIKE '[A-Z,a-z]', 1,
                  IF(MID(str, i, 1) RLIKE '[0-9]', 2, 0));

    IF (block='') OR (last=curr) THEN
      SET block = CONCAT(block,
                    IF((curr=1) OR (curr=2), MID(str, i, 1), ''));
    ELSE
      IF last=2 THEN
        SET res = CONCAT(res,
                    REPEAT('0', 10 - LENGTH(block)), block);
      ELSE
        SET res = CONCAT(res,
                    block, REPEAT(' ', 10 - LENGTH(block)));
      END IF;
      SET block = IF((curr=1) OR (curr=2), MID(str, i, 1), '');
    END IF;

    SET last=curr;
    SET i = i + 1;
  END WHILE;

  IF curr=1 THEN
    SET res = CONCAT(res, block, REPEAT(' ', 10 - LENGTH(block)));
  ELSEIF curr=2 THEN
    SET res = CONCAT(res, REPEAT('0', 10 - LENGTH(block)), block);
  END IF;

  RETURN UCASE(res);
END;
|
DELIMITER ; 
```

（这里每个块必须限制为 10 个字符）。

然后，您可以通过以下方式订购：

```
ORDER BY strformat(`my_value`) 
```

# css - 为什么文本可见，但背景不可见？

> ID：14584366
> 
> 赞同：2
> 
> 时间：2013-01-29T13:42:23.100
> 
> 标签：css

我有以下标记：

```
<div class="one">Content</div>
<div class="two"></div> 
```

和以下样式表：

```
.one, .two {
    height: 20px;
}
.one {
    background-color: #f00;
}
.two {
    background-color: #0f0;
    margin-top: -10px;
} 
```

为什么文本`Content`可见，但红色背景不可见？由于给定的样式表，我希望文本也只能部分可见。

为了您的方便，我还创建了一个[jsFiddle](http://jsfiddle.net/v5LfZ/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:48:44.657

如果您希望第一个 div 的文本仅部分可见，则需要使用位置和 z-index。

```
.one, .two {
    height: 20px;
}
.one {
    background-color: #f00;
    position: relative;
    z-index: 1;
}
.two {
    background-color: #0f0;
    margin-top: -10px;
    position: relative;
    z-index: 2;
} 
```

[http://jsfiddle.net/v5LfZ/2/](http://jsfiddle.net/v5LfZ/2/)

# c++ - 哪个性能更好？std::array 还是 C 数组？

> ID：14584367
> 
> 赞同：-2
> 
> 时间：2013-01-29T13:42:24.343
> 
> 标签：c++, arrays, performance, benchmarking

我一直认为 c 数组会比 C++ 中的 std::array 更快，但我已经根据访问速度做了一些基准测试，看起来 std::array 更快。这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T13:46:17.107

答案是“视情况而定”，或者更确切地说是“没人知道”，因为这类问题总是与编译器优化、处理器架构和许多其他因素紧密相关。

我还想指出，如果您在一个系统上找到一个更好的，它可能不会反映它在不同的情况下更好 - 例如不同的编译器或不同的处理器或不同的操作系统。如果整体解决方案非常相似 [我相信他们在这种情况下]，代码生成的微小差异或处理器架构的差异可能会改变任一方向的结果。或者例如内存分配与缓存行或虚拟内存页面的对齐情况如何避免“额外工作”。

*总是*在讨论性能时，永远不要猜测，不要在互联网上询问。测量所有选项，再次测量所有选项（在其他平台上，不同的编译器选项等），然后决定哪个更好[假设代码首先对性能至关重要]。

# javascript - 使用javascript更改文本（链接）颜色onclick

> ID：14584368
> 
> 赞同：2
> 
> 时间：2013-01-29T13:42:36.183
> 
> 标签：javascript, css, function, onclick, textcolor

我不能用js改变文本的颜色。显示和隐藏 div 标签效果很好，但颜色无法更改。顺便说一句，在我的 css 文件中，这些链接没有样式。

HTML：

```
 <ul>
    <li id="web_link"><a href="#">WEB</a></li>
    <li id="design_link"><a href="#">DESIGN</a></li>
    <li id="photo_link"><a href="#">PHOTO</a></li>
    </ul>

<div id="web_proekti">
 Some elements
</div>

<div id="design_proekti">
Some elements 
</div>  

<div id="photo_proekti">
Some elements 
</div> 
```

Javascript 文件：

```
$('#web_link').click(function()
{
    $('#web_proekti').show();
    $('#design_proekti').hide();
    $('#photo_proekti').hide();
    $('#design_link').css('color','#999');
    $('#photo_link').css('color','#999');

}
);

$('#design_link').click(function()
{
    $('#design_proekti').show();
    $('#web_proekti').hide();
    $('#photo_proekti').hide();
    $('#web_link').css('color','#999');
    $('#photo_link').css('color','#999');

}
);

$('#photo_link').click(function()
{
    $('#photo_proekti').show();
    $('#design_proekti').hide();
    $('#web_proekti').hide();
    $('#design_link').css('color','#999');
    $('#web_link').css('color','#999');

}
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:44:55.243

您正在更改 的颜色`<li>`，但不是链接颜色。

要更改 的颜色`<a>`，请尝试

```
 $('#photo_link a').css('color','#999'); 
```

代替

```
 $('#photo_link').css('color','#999'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:44:29.150

您必须通过在 js 中的父 id 之后添加一个简单的标签来更改`<a>`标签本身的颜色：`a`

```
$('#web_link').click(function()
{
    $('#web_proekti').show();
    $('#design_proekti').hide();
    $('#photo_proekti').hide();
    $('#design_link a').css('color','#999');
    $('#photo_link a').css('color','#999');

}
);

$('#design_link').click(function()
{
    $('#design_proekti').show();
    $('#web_proekti').hide();
    $('#photo_proekti').hide();
    $('#web_link a').css('color','#999');
    $('#photo_link a').css('color','#999');

}
);

$('#photo_link').click(function()
{
    $('#photo_proekti').show();
    $('#design_proekti').hide();
    $('#web_proekti').hide();
    $('#design_link a').css('color','#999');
    $('#web_link a').css('color','#999');

}
); 
```

# javascript - JSON.parse 不解析 Json 字符串。使用 JavaScriptSerializer 进行序列化

> ID：14584377
> 
> 赞同：0
> 
> 时间：2013-01-29T13:43:36.303
> 
> 标签：javascript, .net, javascriptserializer

我有一个从控制器到视图的序列化字符串：

**控制器：**

```
var serialize = new JavaScriptSerializer();
return Json(new
{
data = serialize.Serialize(obj)
}, JsonRequestBehavior.AllowGet); 
```

**json字符串：**

```
[{"indiceName":"Caracter","indiciId":24,"indiceId":1,"tamanhoIndice":10,"mask":null,"indiceObr":1},

{"indiceName":"Numérico","indiciId":25,"indiceId":2,"tamanhoIndice":10,"mask":null,"indiceObr":0},

{"indiceName":"AlfaNumérico","indiciId":26,"indiceId":3,"tamanhoIndice":10,"mask":null,"indiceObr":0}] 
```

据我所知，现代浏览器应该能够使用简单的 Json.parse() 解析该字符串

**看法：**

```
success: function (data) 
         {
            $('.dinamic').remove();
            console.log(data);
            var obj2 = JSON.parse(data);
            console.log(obj2);
         } 
```

我可以在第一个 console.log 中看到该字符串，但从第二个中我什么也没得到。还有什么我应该看的，因为我读过的所有帖子都只是用一个 JSON.parse 做的简单。我正在使用最新版本的 google chrome、firefox 和 IE，所以它应该可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:50:15.813

尽管您的`success`函数未在给出的其他 AJAX 选项的上下文中显示，但我猜您正在传递`dataType`“json”选项，或者正在使用`$.getJSON`或类似的东西。

如果是这种情况，jQuery 已经在它传递给你的时候为你解析了 JSON，`success`所以你不需要（也不能）再次解析它。您可以简单地使用您的数据结构（`data[0]. indiceName`等）。

（以下代码在[http://jaaulde.com/test_bed/GuilhermeLongo/](http://jaaulde.com/test_bed/GuilhermeLongo/)实时运行）

考虑以下 PHP（存储在*json.php*中）：

```
<?php
exit('[{"indiceName":"Caracter","indiciId":24,"indiceId":1,"tamanhoIndice":10,"mask":null,"indiceObr":1},{"indiceName":"Numérico","indiciId":25,"indiceId":2,"tamanhoIndice":10,"mask":null,"indiceObr":0},{"indiceName":"AlfaNumérico","indiciId":26,"indiceId":3,"tamanhoIndice":10,"mask":null,"indiceObr":0}]'); 
```

以及以下JS：

```
<script src="http://code.jquery.com/jquery.min.js"></script>
<script>
  $.ajax({
    url: 'json.php',
    type: 'get',
    dataType: 'json',
    success: function (data) {
      console.log(data[0]);
      console.log(data[0].indiceName);
    },
    error: function () {
      throw new Error('AJAX request error occurred.');
    }
  });
</script> 
```

它导致以下输出的日志信息：

```
GET http://jaaulde.com/test_bed/GuilhermeLongo/json.php
    200 OK
    99ms    
    jquery.min.js (line 3)

Object
    {indiceName="Caracter", indiciId=24, indiceId=1, more...}/test_...eLongo/
    (line 8)

Caracter 
```

# jquery - 使用 jQuery 从 XML 获取父节点

> ID：14584378
> 
> 赞同：0
> 
> 时间：2013-01-29T13:43:36.820
> 
> 标签：jquery, xml, ajax

我有一个 XML 文件

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<childrens>
 <child id="1" value="Root Catalog" parent_id="0">
  <child id="2" value="Apparel" parent_id="1">
    <child id="3" value="Accessories" parent_id="2">
        <child id="4" value="Handbags" parent_id="3">
            <child id="5" value="Jewelry" parent_id="4"/>
        </child>
    </child>
  </child>
 </child>
</childrens> 
```

我想找到特定元素的父母

我写了这段代码

这让我所有的父母

```
$(document).ready(function(){
$.ajax({
    type: "GET",
    url: "test.xml",
    dataType: "xml",
    success: function(xml) {
        $(xml).find('child[value="test"]').parents().each(function(){
            var i = $(this).attr('value');
            alert(i);
        });
    }
});
}); 
```

我希望父母到哪里`id=2`和`value=Apparel`

如果我使用`.parents('[value="Apparel"]')`，那么它将只返回一个名称，即`Apparel`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:47:09.280

您可以为此使用[parentsUntil](http://api.jquery.com/parentsUntil/)：

```
$(xml).find('child[value="test"]').parentsUntil('[value="Apparel"]').each( ... 
```

从文档：

> 获取当前匹配元素集合中每个元素的祖先，最多但不包括选择器、DOM 节点或 jQuery 对象匹配的元素。

# ruby-on-rails - Mongoid 嵌套集帮助器与 awesome_nested_set 中的相同

> ID：14584384
> 
> 赞同：1
> 
> 时间：2013-01-29T13:43:54.723
> 
> 标签：ruby-on-rails, mongoid, acts-as-nested-set

Gem [Awesome_nested_set](https://github.com/collectiveidea/awesome_nested_set)有有用的帮助器（nested_set_options），它为选择元素提供构建树。

```
<%= f.select :parent_id, nested_set_options(Category, @category) {|i| "#{'-' * i.level} #{i.name}" } %> 
```

Gem [Mongoid_nested_set](https://github.com/thinkwell/mongoid_nested_set)是 awesome_nested_set 的一个 mongo 端口。但它没有这样的帮手。我该如何解决这个问题？

# android - 三星galaxy note中的多个裁剪意图后，android画廊应用程序停止工作

> ID：14584386
> 
> 赞同：2
> 
> 时间：2013-01-29T13:43:56.910
> 
> 标签：android, android-camera, android-gallery, galaxy, android-camera-intent

我正在运行 ICS 4.0.4 的 Galaxy Note N7000 上触发 com.android.camera.action.CROP，以捕获和裁剪图像。这适用于连续运行 5-6 次，然后 Android 的默认图库应用程序崩溃。此问题仅针对此设备，不会在任何其他设备上发生。

我不知道 Galaxy Note N7000 的 Gallery 应用程序有什么问题，如有任何帮助，我们将不胜感激。

# linux - 为什么在 Linux 上出现错误 mongod dead 但 subsys 被锁定和日志文件可用空间不足？

> ID：14584393
> 
> 赞同：68
> 
> 时间：2013-01-29T13:44:15.670
> 
> 标签：linux, mongodb, journal

我已经在 Linux CentOS 服务器上安装了**mongo-10gen mongo-10gen- server。**

我按照[**Link**](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-redhat-centos-or-fedora-linux/)的步骤进行操作。

我已将**/etc/mongod.conf**配置为 -

```
logpath=/var/log/mongo/mongod.log
port=27017
dbpath=/var/lib/mongo 
```

我在**iptables**中为 mongo 设置了端口 27017 。要启动 mongo，我使用了命令 -

```
service mongod start and
mongo 
```

它开始很好，但几天后我收到错误 -

```
Tue Jan 29 08:41:54 [initandlisten] ERROR: Insufficient free space for journal files
Tue Jan 29 08:41:54 [initandlisten] Please make at least 3379MB available in /var/lib/mongo/journal or use --smallfiles
Tue Jan 29 08:41:54 [initandlisten]
Tue Jan 29 08:41:54 [initandlisten] exception in initAndListen: 15926 Insufficient free space for journals, terminating
Tue Jan 29 08:41:54 dbexit:
Tue Jan 29 08:41:54 [initandlisten] shutdown: going to close listening sockets...
Tue Jan 29 08:41:54 [initandlisten] shutdown: going to flush diaglog...
Tue Jan 29 08:41:54 [initandlisten] shutdown: going to close sockets...
Tue Jan 29 08:41:54 [initandlisten] shutdown: waiting for fs preallocator...
Tue Jan 29 08:41:54 [initandlisten] shutdown: lock for final commit...
Tue Jan 29 08:41:54 [initandlisten] shutdown: final commit...
Tue Jan 29 08:41:54 [initandlisten] shutdown: closing all files...
Tue Jan 29 08:41:54 [initandlisten] closeAllFiles() finished
Tue Jan 29 08:41:54 [initandlisten] journalCleanup...
Tue Jan 29 08:41:54 [initandlisten] removeJournalFiles
Tue Jan 29 08:41:54 [initandlisten] shutdown: removing fs lock...
Tue Jan 29 08:41:54 dbexit: really exiting now 
```

当我执行命令时 -

```
service mongod status 
```

它给出了错误 -

```
mongod dead but subsys locked 
```

请帮我解决***mongod dead but subsys locked***和***Insufficient free space for journals, termination的问题***

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-07-13T13:10:25.367

您可以将以下内容添加到运行时提供的配置文件中`mongod --config mongod.conf`

对于 MongoDB **3.x**（最新版本）

```
storage:
   mmapv1:
      smallFiles: true 
```

对于版本**2.6+**

```
storage:
   smallFiles: true 
```

对于**2.4**及更低版本

```
smallfiles = true 
```

然后只需执行 mongod 以接受您的配置文件（这里假设配置的位置是*/etc/mongodb.conf*）：

```
mongod -f /etc/mongodb.conf 
```

**smallfiles**参数的[文档：](http://docs.mongodb.org/manual/reference/configuration-options/#storage.mmapv1.smallFiles)

```
Set to true to modify MongoDB to use a smaller default data file size. 
Specifically, smallfiles reduces the initial size for data files and
limits them to 512 megabytes. The smallfiles setting also reduces the
size of each journal files from 1 gigabyte to 128 megabytes. 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-11-09T13:11:46.760

使用以下命令启动`mongod`实例

```
mongod --dbpath /data/db --smallfiles 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-11-12T03:47:30.923

我在[http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/遵循官方指南](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/)

使用后

```
$sudo service mongod start 
```

我通过查看此日志来验证 MongoDB 是否已成功启动：

```
/var/log/mongodb/mongod.log 
```

这是我发现的问题：

```
2014-11-11T12:54:05.808-0500 [initandlisten] ERROR: Insufficient free space for journal files
2014-11-11T12:54:05.808-0500 [initandlisten] Please make at least 3379MB available in /var/lib/mongodb/journal or use --smallfiles
2014-11-11T12:54:05.808-0500 [initandlisten]
2014-11-11T12:54:05.808-0500 [initandlisten] exception in initAndListen: 15926 Insufficient free space for journals, terminating
2014-11-11T12:54:05.808-0500 [initandlisten] dbexit:
2014-11-11T12:54:05.808-0500 [initandlisten] shutdown: going to close listening sockets...
2014-11-11T12:54:05.808-0500 [initandlisten] shutdown: going to flush diaglog...
2014-11-11T12:54:05.808-0500 [initandlisten] shutdown: going to close sockets...
2014-11-11T12:54:05.808-0500 [initandlisten] shutdown: waiting for fs preallocator...
2014-11-11T12:54:05.808-0500 [initandlisten] shutdown: lock for final commit...
2014-11-11T12:54:05.808-0500 [initandlisten] shutdown: final commit...
2014-11-11T12:54:05.808-0500 [initandlisten] shutdown: closing all files...
2014-11-11T12:54:05.808-0500 [initandlisten] closeAllFiles() finished
2014-11-11T12:54:05.808-0500 [initandlisten] journalCleanup...
2014-11-11T12:54:05.808-0500 [initandlisten] removeJournalFiles
2014-11-11T12:54:05.814-0500 [initandlisten] shutdown: removing fs lock...
2014-11-11T12:54:05.814-0500 [initandlisten] dbexit: really exiting now 
```

解决方案：

在文件 /etc/mongod.conf 的末尾，我添加了这一行：

```
smallfiles = true 
```

之后，我重新启动了 mongod 服务：

```
$sudo service mongod restart 
```

然后当我去查看日志时，我意识到一切都很完美，并且问题得到了解决：

```
2014-11-11T22:32:20.544-0500 ***** SERVER RESTARTED *****
2014-11-11T22:32:20.552-0500 [initandlisten] MongoDB starting : pid=5200 port=27017 dbpath=/var/lib/mongodb 64-bit host=jaimemontoya-VirtualBox
2014-11-11T22:32:20.552-0500 [initandlisten] db version v2.6.5
2014-11-11T22:32:20.552-0500 [initandlisten] git version: e99d4fcb4279c0279796f237aa92fe3b64560bf6
2014-11-11T22:32:20.552-0500 [initandlisten] build info: Linux build8.nj1.10gen.cc 2.6.32-431.3.1.el6.x86_64 #1 SMP Fri Jan 3 21:39:27 UTC 2014 x86_64 BOOST_LIB_VERSION=1_49
2014-11-11T22:32:20.552-0500 [initandlisten] allocator: tcmalloc
2014-11-11T22:32:20.552-0500 [initandlisten] options: { config: "/etc/mongod.conf", net: { bindIp: "127.0.0.1" }, storage: { dbPath: "/var/lib/mongodb", smallFiles: true }, systemLog: { destination: "file", logAppend: true, path: "/var/log/mongodb/mongod.log" } }
2014-11-11T22:32:20.564-0500 [initandlisten] journal dir=/var/lib/mongodb/journal
2014-11-11T22:32:20.564-0500 [initandlisten] recover : no journal files present, no recovery needed
2014-11-11T22:32:20.738-0500 [initandlisten] waiting for connections on port 27017
2014-11-11T22:33:20.748-0500 [clientcursormon] mem (MB) res:36 virt:245
2014-11-11T22:33:20.748-0500 [clientcursormon]  mapped (incl journal view):64
2014-11-11T22:33:20.748-0500 [clientcursormon]  connections:0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-12T00:21:21.760

**对于任何有此问题的人，尽管有足够的空间来创建日志文件。**

我的问题：我有足够的空间来创建日志文件。Mongo 给了我一个连接失败的问题。我使用 kill 命令杀死了 mongod 进程，这反过来又给了我 subsys 问题。这对我有用：

转到`/var/lock/subsys`并删除文件`mongod`

时不时`service mongod stop`地`service mongod start`

现在启动了 mongo shell，一切似乎都运行良好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-02T15:21:30.280

第一的

```
cd /usr/local/src/mongo/bin/<br> 
```

然后

```
./mongod --dbpath /usr/local/src/mongo/data/db/ --smallfiles 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-04T05:11:12.710

只是一个笔记，这对我有帮助。虽然没有与 mongo 相关的技术问题。只是系统空间不够。清除系统的缓存对我来说很有效，mongo 又恢复了平稳运行。

```
yum clean all 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-05T10:32:19.580

**问题背景：我在不停止数据库服务**的情况下将数据库服务器从 t2.micro 升级到更大的实例。作为回报，它创建了这个锁文件并抛出了这个错误， **mongod dead but subsys locked** 在此之后我无法使用 mongo shell。

如果你有足够的**磁盘空间**。然后按照这些步骤，

1\. **sudo mongod** （如果您发现以下失败原因）

```
Failed to unlink socket file /tmp/mongodb-27017.sock Operation not permitted) 
```

2.  转到**/tmp/**目录

3.  删除**mongodb-27017.sock**文件

4.  使用**sudo service mongod restart 重启 mongod**

# php - 数组中的 IF 条件

> ID：14584395
> 
> 赞同：1
> 
> 时间：2013-01-29T13:44:24.153
> 
> 标签：php, yii

试图在 中使用`if`条件`array`，但它不起作用。我该如何解决？

代码：

```
public function behaviors()
{
    return array(
        'withRelated'=>array(
            'class'=>'ext.wr.WithRelatedBehavior',
        ),
        Yii::app()->controller->id != 'apiv1' ?
        'datetimeI18NBehavior'=>array(
            'class' => 'ext.DateTimeI18NBehavior',
        ), : false,
    );
} 
```

错误：

```
Parse error: syntax error, unexpected '=>' (T_DOUBLE_ARROW) in .../models/Users.php on line 77 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T13:52:27.277

这是解决您的问题的正确方法。

```
public function behaviors()
{
    $arr = array(
        'withRelated'=>array(
            'class'=>'ext.wr.WithRelatedBehavior',
        )        
    );
    $bool = Yii::app()->controller->id != 'apiv1' ? true : false;
    if($bool) {
        $arr['datetimeI18NBehavior'] = array(
            'class' => 'ext.DateTimeI18NBehavior',
        );
    } else {
        $arr[] = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T13:46:19.540

尝试：

```
'datetimeI18NBehavior' => ( Yii::app()->controller->id != 'apiv1' ) ? array(
    'class' => 'ext.DateTimeI18NBehavior',
) : false, 
```

其他（非常清楚）解决方案：

```
public function behaviors()
{
    $behaviors = array(
        'withRelated'=>array(
            'class'=>'ext.wr.WithRelatedBehavior',
        )
    );

    if ( Yii::app()->controller->id != 'apiv1' ) {
         $behaviors['datetimeI18NBehavior'] = array(
            'class' => 'ext.DateTimeI18NBehavior'
        );
    }

    return $behaviors;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T15:16:38.743

```
public function behaviors() {
return array(
'withRelated'=>array(
'class'=>'ext.wr.WithRelatedBehavior',
),
Yii::app()->controller->id != 'apiv1' ?
'datetimeI18NBehavior'=>array(
'class' => 'ext.DateTimeI18NBehavior',
) : false,
);
} 
```

去掉括号后面的逗号

# position - 注销再登录后如何保持对话窗口的位置和大小？

> ID：14584402
> 
> 赞同：0
> 
> 时间：2013-01-29T13:44:32.527
> 
> 标签：position, size, jquery-ui-dialog

我像这样调用一个新的对话框窗口：

```
$("#modalSeznam").load('./safe/kalkulace_seznamPotreb.php?k_polozka=<?echo $k_polozka;?>').dialog({modal:false, title:'Seznam všech potřeb', width:"auto", height:"auto"}); 
```

我需要什么：如果我要注销然后重新登录，我希望此对话框窗口在与注销前离开时相同的位置和相同的大小打开......有什么办法吗？请帮助，我会很高兴任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:48:10.490

也许您应该使用dialog() 方法的[“位置”选项？](http://api.jqueryui.com/dialog/#option-position)

# css - 有谁知道 CSS 可以在 Twitter 上这样的文本框周围放置外边框？

> ID：14584418
> 
> 赞同：3
> 
> 时间：2013-01-29T13:44:59.277
> 
> 标签：css

有谁知道像 Twitter 上的这个例子那样在文本框周围添加外边框所需的 CSS？

![推特示例](../Images/08064ca814172ed2107d1266dab74de3.png)

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T06:16:03.397

您可以考虑使用多个阴影：

```
input[type="text"]{
box-shadow: 0 2px 2px rgba(0,0,0,0.2),
            0 1px 5px rgba(0,0,0,0.2), 
            0 0 0 12px rgba(255,255,255,0.4);
} 
```

我有一个演示，它就像 twitter 的登录表单。如果你想查看，请点击[这里](http://www.w3cplus.com/demo/twitter-login-or-signup-form-with-css3.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:48:19.007

```
.classname
{
box-shadow:0 0 2px red
} 
```

使用此类或您并将 box-shadow 属性添加到现有类。您可以将 2px 增加到 5px 或 10 以获得更深的阴影

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:57:54.913

使用盒子阴影将帮助您：

```
class{
    box-shadow: horizontal vertical blur-radius spread-radius color;
    box-shadow:2px 0 3px 5px red;
} 
```

水平（-值将向左移动）（+值在右侧）
垂直（-值将向上移动）（+值在downwords上）
blur-radius：将模糊您在框周围选择的颜色
spread-radius：将颜色扩散到选择的距离

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T13:52:28.623

您可以使用[box-shadow](https://developer.mozilla.org/en-US/docs/CSS/box-shadow)属性

[http://jsfiddle.net/VXJdV/](http://jsfiddle.net/VXJdV/)

```
input {
    display: block;
    margin: 2em;
    box-shadow: 0 0 10px gray;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T13:50:23.593

```
input[type="text"],input[type="password"]{
  border: solid 1px #ccc;
  padding: 4px;
  border-radius:4px;
} 
```

您也需要覆盖其他边界半径，`-moz-`&`-webkit-`

演示：http: [//jsfiddle.net/BqpZh/](http://jsfiddle.net/BqpZh/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-29T13:54:44.257

```
.front-card .text-input:focus {
    border:1px solid #56b4ef;
    -webkit-box-shadow:inset 0 1px 3px rgba(0,0,0,.05),0 0 8px rgba(82,168,236,.6);
    -moz-box-shadow:inset 0 1px 3px rgba(0,0,0,.05),0 0 8px rgba(82,168,236,.6);
    box-shadow:inset 0 1px 3px rgba(0,0,0,.05),0 0 8px rgba(82,168,236,.6)
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-29T13:46:48.397

您可以在输入框外使用包装 div 并为其赋予背景颜色和圆角！

HTML：

```
<div class="outter"><input class="inputbox"></input></div> 
```

CSS：

```
.outter {
    margin: 20px;
    padding: 10px;
    border-radius: 15px;
    background-color: red;
    display: inline-block;
}

.inputbox {
    border-radius: 5px;
} 
```

在这里你有一个 jsfiddle：http: [//jsfiddle.net/dsBgw/](http://jsfiddle.net/dsBgw/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-29T13:46:53.287

大纲：

```
input{outline:solid 4px #ccc} 
```

（当然，另一种选择是用 div 包装输入）

# java - 如何欺骗会话 cookie 来测试会话复制

> ID：14584419
> 
> 赞同：1
> 
> 时间：2013-01-29T13:45:01.020
> 
> 标签：java, session, jboss

如何欺骗会话 cookie 来测试会话复制？

我在两个节点上使用 Jboss，我想确认如果一个节点出现故障，我的会话数据在另一个节点中。

我可以看到我的节点 1 正在设置这个 cookie。我怎样才能为节点 2 欺骗它？

```
JSESSIONID=3rsZ87MxC7EeukilWW8za7T-.node1; path=/hsr-test; domain=xxxx.xxxx.dev 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-13T20:44:13.510

这是一个较晚的回复，但由于我正在搜索此内容而添加。

这是一个简单的会话 get/put jsp 脚本

```
 <html>
    <body>

        <a href="testsession.jsp?action=put">put</a>
        <a href="testsession.jsp?action=get">get</a>
    <%
        String action = request.getParameter("action");
        if ( null != action && "put".equals(action) ) {
    %>
            <h2>Set Current Time</h2>
    <%
            System.out.println( "Putting date now" );
            session.setAttribute("current.time", new java.util.Date());
    %>
            The time is set to <%= session.getAttribute("current.time") %>
    <% } else { %>
            <h2>Get Time</h2>
    <%
            System.out.println( "Getting date now" );
    %>
            The time is <%= session.getAttribute("current.time") %>
    <% } %>

    <br>
    <br>
    server: <%=request.getServerName() %>

    <br>
    <br>
    session: <%= session.getId() %>

    </body>
    </html> 
```

如果您在命令行上，则可以在两个节点上使用它：

```
curl --cookie "JSESSIONID=ZWarGbkuDUoUuT-iOjYIATN+.2e84d3e9-3497-3e74-9604-a45f36cad465;"  http://node1/your_test_page

curl --cookie "JSESSIONID=ZWarGbkuDUoUuT-iOjYIATN+.2e84d3e9-3497-3e74-9604-a45f36cad465;"  http://node2/your_test_page 
```

您将在浏览器和两个命令行测试中看到返回的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T22:21:10.280

Late answer, but you can use Fiddler. Run Fiddler alongside your application, then enable breakpoints before requests (Rules -> Automatic Breakpoints -> Before Requests). Make a query to a server you want. It will freeze before executing the request and on the top right you can modify (spoof) the cookies by right-clicking the session ID and entering whatever values you want.

Hope this is helpful. I ran across this question by chance researching another issue.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:14:39.273

只要应用程序在集群中运行并`<distributable>`在`WEB-INF\web.xml`文件中设置，JBoss 中默认执行会话复制。

您可以通过登录到集群中每个节点的 jmx-console 并调用包MBean的方法`printCacheDetails()`来验证会话是否已被复制。会话数据应分别为节点打印。`jboss.cache``ha-partition, cache-config`

# windows - 错误 42：尝试注册不存在的 windows 函数绑定时符号未定义 _CreateWindowW@44

> ID：14584421
> 
> 赞同：0
> 
> 时间：2013-01-29T13:45:04.347
> 
> 标签：windows, d, linker-errors

我尝试编写简单的 show_window 函数，但是使用宽字符的函数，在 D 中没有任何示例，只有我能找到使用窄字符串的窗口创建并现在尝试重写它（我知道英语不好）。因此，即使正确注册 unicode winapi 绑定，我也失败了。

```
import core.runtime;
import core.sys.windows.windows;
import std.c.windows.windows;
pragma(lib, "gdi32.lib");
pragma(lib, "user32.lib");

struct WNDCLASSW { UINT style; WNDPROC lpfnWndProc; int cbClsExtra; int cbWndExtra; HINSTANCE hInstance; HICON hIcon; HCURSOR hCursor; HBRUSH hbrBackground; LPCWSTR lpszMenuName; LPCWSTR lpszClassName; }

extern(Windows) HWND CreateWindowW(LPCWSTR lpClassName, LPCWSTR lpWindowName, DWORD dwStyle, int x, int y, int nWidth, int nHeight, HWND hWndParent, HMENU hMenu, HINSTANCE hInstance, LPVOID lpParam );

extern(Windows)
int WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int iCmdShow) {
  HWND hWnd = CreateWindowW("wndClassName", 
   "window caption", WS_SYSMENU | WS_VISIBLE, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, HWND_DESKTOP, null, hInstance, null);
  return 0;
} 
```

这会产生：

```
Error 42: Symbol Undefined _CreateWindowW@44 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:18:07.153

现代版本的 Windows 不实现 CreateWindow()。它是一个古老的 winapi 函数，可追溯到 1980 年代，已被 CreateWindowEx() 取代。在 WinUser.h SDK 头文件中，CreateWindowW 是一个实际调用 CreateWindowExW()的*宏，为额外的 dwExStyle 参数传递 0。*

您必须改用 CreateWindowExW()。

# c# - 使用 Microsoft.WindowsAzure.Storage (2.0.3.0) 找不到方法

> ID：14584424
> 
> 赞同：3
> 
> 时间：2013-01-29T13:45:12.307
> 
> 标签：c#, azure-storage, azure-sdk-.net

我刚刚从[nuget](http://nuget.org/packages/WindowsAzure.Storage)升级了 Microsoft.WindowsAzure.Storage ，我在 Visual Studio 2010 中遇到了奇怪的错误。

`IncrementCountProperty`从方法调用我的方法时，`AddEntry`出现以下错误：

```
Method not found: 'Void Microsoft.WindowsAzure.Storage.Table.EntityProperty..ctor(Int64)'. 
```

（堆）

```
System.MissingMethodException: Method not found: 'Void Microsoft.WindowsAzure.Storage.Table.EntityProperty..ctor(Int64)'.
   at App.MyClass.IncrementCountProperty(Int32 companyId, String feedKey, Int64 incrementCount)
   at App.MyClass.AddEntry(Int32 companyId, String feedKey, FeedEntry entry) in C:\xxx\MyFile.cs:line 464 
```

我意识到我做错了，`IncrementCountProperty`但奇怪的是，Visual Studio 无法识别该`IncrementCountProperty`方法中的任何断点。如果我在 AddEntry 的调用行上放置一个断点，断点就可以正常工作。如果我然后按 F11 进入，我会直接得到异常。两者都在同一个类中声明

我尝试了以下方法：

*   删除所有 pdb 文件
*   删除 bin/debug 中的项目 dll
*   Ran Clean 解决方案
*   重新启动 Visual Stuido
*   重新启动我的电脑
*   在 IncrementCountProperty 方法中抛出异常只是为了确保我的代码被实际调用。并且正在抛出异常。但是没有调试器。

我还通过版本号和使用 ILDASM 工具验证了正在使用正确版本的 WindowsAzure 存储。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:58:40.150

它正在工作！

更新后`WindowsAzure.Storage 2.0.4.1`它正在工作。`2.0.4.0`自从我写下这个问题后不久，我就一直在尝试。第 26 次微软发布了第 1 版，其中引用`Microsoft.Data.OData 5.2.0`了（而不是`5.0.2`）。

我的直觉告诉我这是问题所在。

# eclipse - 如何在我的 Eclipse RCP 应用程序的多个实例之间保持首选项同步？

> ID：14584430
> 
> 赞同：2
> 
> 时间：2013-01-29T13:45:26.890
> 
> 标签：eclipse, eclipse-rcp, osgi

使用 ConfigurationScope.INSTANCE.getNode("id").sync() 将带来来自其他应用程序的更改，但它似乎没有调用我的节点和首选项更改侦听器。

有没有办法在不调用同步的情况下保持设置始终同步？似乎调用它会容易发生种族。

sync() 是否会触发节点和首选项更改侦听器而我只是没有注意到？如果没有，我怎样才能得到它或获得一些类似的功能？

# google-chrome - 在 chrome 扩展中使用 twitter 对用户进行身份验证

> ID：14584436
> 
> 赞同：2
> 
> 时间：2013-01-29T13:45:45.307
> 
> 标签：google-chrome, google-chrome-extension, twitter

我正在构建一个 chrome 扩展，要求用户使用他们的 Twitter 帐户登录。

我正在查询我的远程服务器以获取 twitter 登录链接。但我不确定以后应该如何进行。

我尝试`chrome.browserAction.setPopup`通过创建带有`<iframe>`标签的 HTML 页面来使用。但推特不允许这样做。我什至尝试过设置`window.location`，但在 chrome 中也不允许这样做（出于明显的安全原因）。

这可以实现吗？如果不是，浏览器扩展一般使用哪些其他认证技术（除了用户名：密码组合方法）？

# c# - 为什么非泛型派生类型必须为泛型基类 C# 指定类型参数

> ID：14584438
> 
> 赞同：3
> 
> 时间：2013-01-29T13:45:45.657
> 
> 标签：c#, .net, generics

在 Andrew Tolson 的 Pro C# 中，作者说当非泛型类扩展泛型基类时，派生类必须指定类型参数。

```
// Assume you have created a custom
// generic list class.
public class MyList<T>
{
  private List<T> listOfData = new List<T>();
}
// Non-generic classes must specify the type
// parameter when deriving from a
// generic base class.
public class MyStringList : MyList<string>
{} 
```

我不明白为什么这是必要的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T13:47:52.660

因为否则它不是可用的类型，因为 CLR 仍然不知道要使用哪种类型`T`。

`List<T>`是**开放**类型，因为`T`尚未被可实例化类型替代。而且您不能创建开放类型的实例。您只能在类型关闭时创建类型的实例，即当它的**所有**类型参数（包括封闭类型和基类型）都已被可实例化类型替换时。

如果您能够声明`class MyTList : MyList<T> { }`，那么您将永远无法为 指定类型`T`，因为`MyTList`不再包含该类型参数，因此您永远无法实例化`MyTList`。那不会是一个非常有用的课程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T13:48:17.510

如果您不指定类型，那么唯一的其他选择就是使派生类也成为泛型。

```
public class MyDerivedList<T> : MyList<T>
{
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-29T13:47:42.270

嗯，非泛型类没有类型参数，而泛型类有一个或多个类型参数。

如果你从泛型类继承类，不指定类型参数，你仍然有一个泛型类，即

```
public class MyList<T> : List<T> {} //MyList is still generic 
```

但

```
public class MyList : List<T> {} //invalid declaration, what is T ? 
```

所以

```
public class MyStringList : List<string> {} //specified with string 
```

或者，更一般的

```
public class MyArrayList : List<object> {} //specified with object 
```

* * *

一个更冗长的解释，主要是因为我喜欢使用“ [arity](http://en.wikipedia.org/wiki/Arity) ”这个词。

CLR 中的类可以有零个或更多的数量，这意味着它们可以指定零个或多个类型参数。但是，CLR 无法实例化具有非零参数的类，因此为了做任何有用的事情，必须将类的参数降为零。

这意味着，虽然我们可以部分指定类，例如：

```
public class IntKeyDictionary<TValue> : Dictionary<int, TValue> 
```

减少了arity，甚至声明了类似的类

```
public class ListAndAHalf<TOne, TTwo> : List<TOne> 
```

增加arity，故事必须以arity为0的类结束，比如`List<string>`，`Dictionary<int, double>`等等......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T13:48:58.303

如果不是呢？

您`MyStringList`将是通用的（因为 不会有硬编码类型`T`），但它不是根据定义，因为您构建了一个非泛型类。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-29T13:49:48.760

反过来想。如果你*没有*为你的基本类型指定类型参数，*应该* `MyList<T>`使用什么类型？它仍然是未定义的。

您可以创建一个从另一个泛型类型继承的泛型类型，然后您不必指定超类型的类型参数；您的客户可以做到。

# python - 将memoryview传递给C函数

> ID：14584439
> 
> 赞同：19
> 
> 时间：2013-01-29T13:45:47.660
> 
> 标签：python, numpy, cython

我有一个 C 函数声明如下：

```
void getIndexOfState(long *p, long C, long G, long B, long *state); 
```

现在我的 cython 包装器代码使用 numpy 数组中的缓冲区语法：

```
cpdef int getIndexOfState(self, np.ndarray[np.int_t, ndim=1, mode="c"] s):
    cdef long out
    getIndexOfState(&out, self.C, self.G, self.B, <long*> s.data)
    return out 
```

我想使用新的 memoryview 语法，我的问题是，如何在使用 memoryview 时将指针传递给数据？

我试过：

```
cpdef int getIndexOfState(self, long[:] s):
    cdef long out
    getIndexOfState(&out, self.C, self.G, self.B, s)
    return out 
```

当我尝试编译模块时，这引发了“无法将类型'long [：]'分配给'long *'”错误。在调用 C 函数之前，有什么方法可以在不将 memoryview 强制回 numpy 数组的情况下传递该指针？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-29T14:44:09.133

如果基础数据[正确连续/跨步](http://docs.cython.org/src/userguide/memoryviews.html#specifying-more-general-memory-layouts)并且内存中至少有一个元素，那么将指针传递给第一个元素（可能还有长度）就足够了：

```
getIndexOfState(&out, self.C, self.G, self.B, &s[0]) 
```

编辑：

确保“正确连续”的一种方法应该是添加“[::1]”。

```
cpdef int getIndexOfState(self, long[::1] s):
    cdef long out
    getIndexOfState(&out, self.C, self.G, self.B, &s[0])
    return out 
```

# groovy - 使用正则表达式过滤文件名

> ID：14584443
> 
> 赞同：2
> 
> 时间：2013-01-29T13:45:56.370
> 
> 标签：groovy, gradle

我想知道，如果有更简单的“类似 Gradle”的方式，如何列出目录中的文件，但只有那些匹配正则表达式的文件。目前我的解决方案看起来像这样

```
File fileList = file("${moduleDir}/target")
// pattern for maven artifact
def pattern = ~"^.*-[0-9]\\.[0-9]\\.[0-9](-SNAPSHOT)?\\.jar\$"
fileList.listFiles().each { file ->
    if (file.isFile()) {
        if (pattern.matcher(file.getName())) {
            copy {
                from file.getPath()
                into targetDir
            }
        }
    }
} 
```

我正在寻找的是完全绕过手动模式匹配。您是否知道任何可能帮助我实现这一目标的方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:38:14.523

> 我正在寻找的是完全绕过手动模式匹配

不太清楚你的意思是什么，因为你显然想匹配一个自定义模式。在任何情况下，我都会使用`Copy`任务而不是`copy`方法，并且会在复制操作“内”进行过滤。就像是：

```
task copyArtifacts(type: Copy) {       
    from(fileTree(fileList).files) { // flattening
        include {
            it.file.name ==~ "^.*-[0-9]\\.[0-9]\\.[0-9](-SNAPSHOT)?\\.jar\$"
        }
    }
    into targetDir
} 
```

PS：这些是你自己的文物吗？我问是因为一般来说，一个 Maven 工件可以使用几乎任何版本号格式。

# android - android - 组之间的间距 ExpandableListView

> ID：14584445
> 
> 赞同：0
> 
> 时间：2013-01-29T13:46:02.947
> 
> 标签：android, android-listview, expandablelistview

我有一个 ExpandableListView，我希望组行之间的空间更小。dividerHeight 已经设置为零，我不知道那些顶部/底部边距来自哪里。请看下面的截图（请忽略不小心出现的音量控制）

![在此处输入图像描述](../Images/2f9f2b9e1e7a127b56be0919286d5b6e.png)

我需要减少行之间的间距，但无法管理它。

列表显示：

```
 <ExpandableListView
    android:id="@android:id/list"
   android:listSelector="@android:color/transparent"
    android:layout_marginTop="80dp"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/header"
    android:layout_centerHorizontal="true"
    android:cacheColorHint="@android:color/transparent"
    android:smoothScrollbar="true" >
</ExpandableListView> 
```

在活动中：

```
 getExpandableListView().setGroupIndicator(null);
    getExpandableListView().setDividerHeight(0); 
```

群组 XML：

```
 <CheckedTextView 
    xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/textView1"
android:layout_width="wrap_content"
android:layout_height="65dp"

android:gravity="center_vertical"
android:text="@string/hello_world"

android:paddingLeft="20dp"
android:textColor="#FFFFFF"
android:textSize="65sp"
android:textStyle="bold" /> 
```

**更新**

grouprow 现在看起来像这样：

```
 <CheckedTextView 
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/textView1"
android:layout_width="wrap_content"
android:layout_height="match_parent"
android:text="@string/hello_world"
android:paddingLeft="20dp"
android:textColor="#FFFFFF"
android:textSize="65sp"
android:textStyle="bold" /> 
```

我启用了 listSelector 并发现行高仍然大于实际文本的高度.. 寻找解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:50:58.513

您为行数据提供固定高度，因此会导致问题。

利用

> android:layout_height="wrap_content"

反而

> android:layout_height="65dp"

第二种解决方案@

消除`android:gravity="center_vertical"`

并检查并告诉我，否则将删除我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:51:46.180

您可以在边距属性中使用负值来减少间距。在你的 CheckedTextView 中试试这个：

android:layout_marginTop="-8dp"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-14T12:13:18.680

以编程方式使用此代码

`expListView.setDividerHeight(0);`

（或）可扩展列表视图分隔线高度值为 0（xml）

`android:dividerHeight="0dp"`

# php - 使用 HTTPS 协议时如何使用 $_Files

> ID：14584448
> 
> 赞同：0
> 
> 时间：2013-01-29T13:46:10.827
> 
> 标签：php, file-upload, https

我正在尝试在服务器上上传一个文件，当我在 http 上下文中时它可以工作，但是当我在 https 上尝试它时它不起作用。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:50:36.080

确保检查要上传到的服务器是否支持 HTTPS，可能是它不监听 HTTPS 请求，或者它设置为完全不同地处理 HTTPS 请求（即，与您尝试访问的站点的 http 文档根目录）。

如果这是本地开发服务器，请确保您启用了 HTTPS，并且 HTTPS VHost 可以正常工作并使用正确的 VHost。

# javascript - JS模板方法模式中`this`的含义

> ID：14584449
> 
> 赞同：1
> 
> 时间：2013-01-29T13:46:13.880
> 
> 标签：javascript, module-pattern, template-method-pattern

为什么标记的行找不到`protectedACMember`？

```
var Module = (function (ns) {

    function AbstractClass() {
        this.protectedACMember = "abstract";

        this.abstractPublicACMethod = function (input) {
            this.methodToImplement();                   
        }
    }

    ConcreteClass.prototype = new AbstractClass();
    function ConcreteClass(){
        var privateCCMember = "private CC";

        var privateCCMethod = function(){
            alert(this.protectedACMember); // cant find protectedACMember
        }

        this.methodToImplement = function(){ 
            privateCCMethod();
            console.log('Implemented method '); 
        }

    }

    ns.ConcreteClass = ConcreteClass;   

    return ns;

})(Module || {});

//somewhere later
var cc = new Module.ConcreteClass();
cc.abstractPublicACMethod(); 
```

有模拟私人、受保护和公共成员的好模式吗？静态/非静态也是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:53:51.123

您应该像这样更改那部分代码：

```
 var self = this;
    var privateCCMethod = function(){
        alert(self.protectedACMember); // this -> self
    } 
```

这样您就可以在闭包中获得参考。

原因是“this”是一个保留字，它的值是由解释器设置的。您的 privateCCMethod 是一个匿名函数，而不是对象属性，因此如果您仅通过 privateCCMethod() 语法调用它，这将为 null。如果您希望“this”绑定到特定的东西，您可以始终使用 .call 语法，如下所示：

```
privateCCMethod.call(this) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:49:47.897

它无法找到`protectedACMember`，因为`this`当您输入函数时，关键字的含义发生了变化`privateCCMethod`。一种常见的做法是将外部存储`this`在函数内部使用：

```
function ConcreteClass(){
    var privateCCMember = "private CC";

    // store the outer this
    var that = this;
    var privateCCMethod = function(){
        alert(that.protectedACMember);
    }
    ... 
```

您其余的问题都已加载完毕，可能应该作为一个单独的问题发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:59:38.983

确保这`this`意味着您想要的另一种方法是使用`bind`. Bind 允许您确保使用特定值调用函数`this`。

大多数较新的浏览器都支持它（甚至是 IE9！），对于那些不支持的浏览器有一个解决方法。

[绑定 - MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

# wpf - 在现有类型之间创建一个 TypeConverter

> ID：14584451
> 
> 赞同：-1
> 
> 时间：2013-01-29T13:46:15.983
> 
> 标签：wpf, typeconverter

从文档看来，我只能在我创建的类上使用 TypeConverter。这是真的，还是可以创建一个 TypeConverter 以在现有框架类型上使用？具体来说，我想将布尔值 true 转换为 BlurEffect 并将 false 值转换为 null。

想法是将视图上的 Effect 属性绑定到 ViewModel 上的布尔属性，并在值为 true 时使视图模糊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:25:11.150

您无需注册 TypeConverter 即可在 Binding 中转换类型。

相反，您可以将[Binding.Converter](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx)属性设置为实现[IValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)的对象。

# .htaccess - 服务器忽略子目录 htaccess 文件，直接进入根 htaccess

> ID：14584455
> 
> 赞同：2
> 
> 时间：2013-01-29T13:46:21.170
> 
> 标签：.htaccess, codeigniter, mod-rewrite, url-rewriting, rewrite

我有一个使用 Codeigniter 和 SLIR（Smart Lencioni Image Resizer [https://github.com/lencioni/SLIR](https://github.com/lencioni/SLIR)）的应用程序。SLIR 允许您使用直观的 URI 结构调整图像大小。例如：

```
<img src="/slir/w100-h100/path/to/image.jpg"/> 
```

这将调整图像大小以适合 100px * 100px。无论出于何种原因，当我尝试查看调整大小的图像时（例如[http://a2op03.com/slir/w300-h90/images/content/franchise-opportunities-badge.png](http://a2op03.com/slir/w300-h90/images/content/franchise-opportunities-badge.png)）我收到由 Codeigniter 生成的 404 错误. 我已经验证了以下内容：

*   [http://a2op03.com/images/content/franchise-opportunities-badge.png](http://a2op03.com/images/content/franchise-opportunities-badge.png)确实存在。
*   根据主机 mod_rewrite 设置正确并正常工作。
*   GD 库（用于 SLIR）已设置并启用
*   根据 SLIR，一切都已正确设置（[http://a2op03.com/slir/install/](http://a2op03.com/slir/install/)）

Codeigniter [root] htaccess 文件如下所示：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

/slir/ 中的 htaccess 文件如下所示：

```
# Prevent other scripts from interfering with SLIR
php_value auto_prepend_file none
php_value auto_append_file none

# Pretty URLs
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [S=40]
RewriteRule . index.php [L]
</IfModule>

# Prevent viewing of the error log file in its default location
<Files slir-error-log>
Order Deny,Allow
Deny from All
</Files> 
```

我最初的怀疑是 mod_rewrite.c 没有正确设置，因此没有被 SLIR htaccess 处理并退回到将其发送到 404 的根 htaccess 上。我通过 servint.net 托管在托管 VPS 和拥有对服务器的完全访问权限的 WHM。主持人声称 mod_rerwrite 应该可以正常工作。我在另一台服务器上完美地运行了这个，但我不知道为什么它在这里不起作用。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:22:54.643

我想到了！我只需要添加

```
RewriteBase /slir/ 
```

后

```
RewriteEngine On 
```

在 SLIR 的 htaccess 文件中！

# regex - 用于匹配数字和数字范围的正则表达式

> ID：14584456
> 
> 赞同：0
> 
> 时间：2013-01-29T13:46:21.723
> 
> 标签：regex

在应用程序中，我需要验证用户输入的字符串。

一个数字或一个范围（用“-”分隔的两个数字）或逗号分隔的数字和/或范围列表以及任何数字必须介于 1 和 999999 之间。

逗号和或“-”前后允许有空格。

我认为下面的正则表达式会做到这一点。

```
(\d{1,6}\040?(,|-)?\040?){1,} 
```

这符合以下（非常好）。（`\040`在正则表达式中是空格字符）。

*   00001
*   12
*   20,21,22
*   100-200
*   1,2-9,11-12
*   20、21、22
*   100 - 200
*   1, 2 - 9, 11 - 12

但是，我也得到了匹配：

*   !!!12

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:50:30.790

你需要锚定你的正则表达式

```
^(\d{1,6}\040?(,|-)?\040?){1,}$ 
```

否则你会在“!!!12”上得到部分匹配，它只匹配最后一个数字。

[在 Regexr 上](http://regexr.com?33j13)查看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:58:55.337

```
/\d*[-]?\d*/ 
```

我已经用 perl 对此进行了测试：

```
> cat temp
00001 
12 
20,21,22 
100-200 
1,2-9,11-12 
20, 21, 22 
100-200
1, 2-9, 11-12
> perl -lne 'push @a,/\d*[-]?\d*/g;END{print "@a"}' temp
00001   12   20  21  22   100-200   1  2-9  11-12   20   21   22   100-200  1   2-9   11-12 
```

正如上面的结果所示，将所有正则表达式匹配到一个数组中，最后打印数组元素。

# ruby-on-rails - ActiveRecord：带有连接的 PostgreSQL 特定更新

> ID：14584463
> 
> 赞同：3
> 
> 时间：2013-01-29T13:46:44.550
> 
> 标签：ruby-on-rails, sql-update, inner-join, rails-activerecord

像这样的行（为了便于阅读，分成多行）：

```
ValueMapping
    .joins(:variation)
    .where(
        :mapper_id => 1,
        :variations => {:name => 'de'}
    )
    .update_all(:value => 'Beispiel') 
```

产生以下 SQL 语句：

```
UPDATE value_mappings
SET value = 'Beispiel'
WHERE value_mappings.id IN (
    SELECT value_mappings.id
    FROM
        value_mappings
        INNER JOIN variations ON variations.id = value_mappings.variation_id
    WHERE
        value_mappings.mapper_id = 1
        AND variations.name = 'de'
) 
```

但我想获得更多特定于 PostgreSQL 的请求：

```
UPDATE value_mappings
SET value = 'Beispiel'
FROM
    variations
WHERE
    variations.id = value_mappings.variation_id
    AND value_mappings.mapper_id = 1
    AND variations.name = 'de'
) 
```

ActiveRecord可以吗？

# bash - 如果是 ping 的结果

> ID：14584471
> 
> 赞同：1
> 
> 时间：2013-01-29T13:47:06.017
> 
> 标签：bash, if-statement, for-loop, ping

我基本上想要以下内容：

```
#full .co.uk/.com domain names are kept in /var/www/vhosts
for each in /var/www/vhosts
 do
  echo "Attempting to ping $each"
  ping -c 1 $each

  if [ $? comes back with an IP ]; then
   echo "The web server for $each is responding. $each points to $IPADDRESS"
   domainlist=`echo "$each points to $IPADDRESS" >> domaintoiplist.txt`
   echo ""
    else
   echo "Host $each is not reachable!"
  fi

 done 
```

我无法工作的一点是 ping 无论如何都会返回 0 的退出状态。我是否需要以下解决方案：[Ping 功能有不良结果](https://stackoverflow.com/questions/8903281/ping-function-having-undesirable-results)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:49:13.550

*   遍历 /var/www/vhosts 中的所有文件，过滤目录，仅获取名称
*   ping 域，从第一行获取 IP 地址
*   可以通过[PIPESTATUS访问 ping 的退出代码](http://tldp.org/LDP/abs/html/internalvariables.html#PIPESTATUSREF)
*   将肯定（退出代码 0）写入文件

我敢肯定，这可以做得更简单，但我不是 bash 大师 :)

```
for domain in $(ls -lA /var/www/vhosts | grep "^d" | sed -E 's/.* ([^ ]+)?$/\1/g');
do
    ip=$(ping -c 1 $domain|grep "PING" | sed -E 's/PING .* .([0-9.]+). .*/\1/g');
    if [ ${PIPESTATUS[0]} -eq 0 ];
    then 
        echo "${domain} translates to ${ip}";
        echo -e "${domain}\t${ip}" >> translation.txt;
    fi;
done 
```

我的测试文件夹

```
# ls -al /var/www/vhosts
-rw-r--r-- 1 root root    0 29\. Jan 15:45 other
-rw-r--r-- 1 root root  699 29\. Jan 16:34 translation.txt
drwxr-xr-x 2 root root 4096 29\. Jan 16:12 www.adasdasdadasdadsadadasdasdasd.com
drwxr-xr-x 2 root root 4096 29\. Jan 15:44 www.doesntexist.com
drwxr-xr-x 2 root root 4096 29\. Jan 15:44 www.google.com 
```

我的输出

```
www.doesntexist.com translates to 204.13.248.119 // uh, actually it DOES exist :)
www.google.com translates to 173.194.35.145 
```

**编辑**

如果您通过管道将一个程序输出到另一个程序，`$?`将包含接收程序的退出代码。要获取管道链中较早调用的程序的退出代码，可以使用 bash-internal 变量`$PIPESTATUS`。

我想，这是目前的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:39:10.227

全部归功于[https://stackoverflow.com/users/1032504/michel-feldheim](https://stackoverflow.com/users/1032504/michel-feldheim)

最终有效的脚本如下：

```
#!/bin/bash

# Get the IP addresses assigned to the server. This can be used later to match the domains to the servers IP addresses.
IPs=`ifconfig | grep "inet addr" | awk '{print $2;}' | cut -c 6-19 | grep -v "127.0"`

echo "=== This server's IP addresses: ==="
ifconfig | grep "inet addr" | awk '{print $2;}' | cut -c 6-19 | grep -v "127.0"
echo "=== Done. They are listed above. ==="
echo ""

#change the directory where the sites are located below
for domain in $(ls -lA /var/www/vhosts | grep "^d" | sed -E 's/.* ([^ ]+)?$/\1/g' | grep -v '.skel\|chroot\|default\|fs\|fs-passwd\|httpsdocs');
do
echo "Attempting to ping $domain"

ip=$(ping -c 1 $domain|grep "PING" | sed -E 's/PING .* .([0-9.]+). .*/\1/g' | grep -v '.skel\|chroot\|default\|fs\|fs-passwd\|httpsdocs');

  if [ ${PIPESTATUS[0]} -eq 0 ];
   then
   echo "${domain} points to ${ip}";
   #the below line doesn't output to STDOUT on purpose, it goes into the file below.
   echo -e "${domain} points to ${ip}" >> domaintoiplist.txt
   echo ""
    else
   echo "Host ${domain} is not reachable!"
   echo ""
  fi;
done

    echo "==== Done. Written a list of domains & its IP to domaintoiplist.txt in the current directory. ====" 
```

# typo3 - 用排版设置 templavoila 模板

> ID：14584472
> 
> 赞同：0
> 
> 时间：2013-01-29T13:47:07.040
> 
> 标签：typo3, typoscript, templavoila

是否可以使用打字稿设置页面的模板模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-09T08:10:21.340

我已经解决了：

```
includeLibs.lang = fileadmin/user_tvtest.php

page.1 = USER_INT
page.1.userFunc = user_tvtest->main

page.10 = USER_INT
page.10.userFunc = tx_templavoila_pi1->main_page
page.10.disableExplosivePreview = 1 
```

在 fileadmin/user_tvtest.php 中：

```
class user_tvtest
{

    function main($content, $conf)
    {

        if (is_mobile()) 
        {

            $GLOBALS['TSFE']->page['tx_templavoila_to'] = 7;
            //$GLOBALS['TSFE']->page['tx_templavoila_ds'] = 7;

        }

    }

} 
```

[http://daschmi.de/templavoila-template-domainbezogen-umschalten-gleicher-seitenbaum/](http://daschmi.de/templavoila-template-domainbezogen-umschalten-gleicher-seitenbaum/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:04:28.207

看看 TemplaVoila 是如何配置页面的：

```
page = PAGE
page.typeNum = 0
page.10 = USER
page.10.userFunc = tx_templavoila_pi1->main_page
page.shortcutIcon = {$faviconPath} 
```

他们通过 page.userFunc调用`main_page`类的函数：`tx_templavoila_pi1`

```
/**
 * Main function for rendering of Page Templates of TemplaVoila
 *
 * @param   string      Standard content input. Ignore.
 * @param   array       TypoScript array for the plugin.
 * @return  string      HTML content for the Page Template elements.
 */
function main_page($content,$conf)    {
    $this->initVars($conf);

        // Current page record which we MIGHT manipulate a little:
    $pageRecord = $GLOBALS['TSFE']->page;

        // Find DS and Template in root line IF there is no Data Structure set for the current page:
    if (!$pageRecord['tx_templavoila_ds'])  {
        foreach($GLOBALS['TSFE']->tmpl->rootLine as $pRec)  {
            if ($pageRecord['uid'] != $pRec['uid']) {
                if ($pRec['tx_templavoila_next_ds'])    {   // If there is a next-level DS:
                    $pageRecord['tx_templavoila_ds'] = $pRec['tx_templavoila_next_ds'];
                    $pageRecord['tx_templavoila_to'] = $pRec['tx_templavoila_next_to'];
                } elseif ($pRec['tx_templavoila_ds'])   {   // Otherwise try the NORMAL DS:
                    $pageRecord['tx_templavoila_ds'] = $pRec['tx_templavoila_ds'];
                    $pageRecord['tx_templavoila_to'] = $pRec['tx_templavoila_to'];
                }
            } else break;
        }
    }

        // "Show content from this page instead" support. Note: using current DS/TO!
    if ($pageRecord['content_from_pid']) {
        $ds = $pageRecord['tx_templavoila_ds'];
        $to = $pageRecord['tx_templavoila_to'];
        $pageRecord = $GLOBALS['TSFE']->sys_page->getPage($pageRecord['content_from_pid']);
        $pageRecord['tx_templavoila_ds'] = $ds;
        $pageRecord['tx_templavoila_to'] = $to;
    }

    return $this->renderElement($pageRecord, 'pages');
} 
```

此功能检查当前页面或通过根线 (TSFE) 搜索配置的页面模板。该脚本根本不检查任何 TypoScript 设置，所以我想 TemplaVoila 现在不支持。

使用将检查某些 TypoScript 设置的自定义函数扩展此类应该不会太难。

# java - 使用 SAX 解析器保留 CDATA 格式

> ID：14584475
> 
> 赞同：1
> 
> 时间：2013-01-29T13:47:08.183
> 
> 标签：java, xml, sax, saxparser, cdata

我正在尝试解析 XML 文件并在我的数据库中插入一些属性。我正在用 JAVA 开发并使用 SAX 来解析 XML 文件。

我的问题是，当我读取 CDATA 格式的属性时，我只能得到 CDATA 包含的内容。也许我不想保留 CDATA 格式？

例如下面的 XML：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <Bank>
        <Account type="saving">
            <Id>1001</Id>
            <Name><![CDATA[<Jack> <Robinson>]]></Name>
            <Amt>10000</Amt>
        </Account>
        <Account type="current">
            <Id>1002</Id>
            <Name>Sony Corporation</Name>
            <Amt>1000000</Amt>
        </Account>
    </Bank> 
```

我想得到`Name`并拥有它`<![CDATA[<Jack> <Robinson>]]>`，而不仅仅是`<Jack> <Robinson>`我得到的。

谁能帮我解决这个问题。

PS：对不起我的英语，我是法语。

此致，

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-29T14:03:32.007

就像@Quentin 问的那样，我很好奇你为什么关心标记。

您是否考虑在输出中手动附加`<![CDATA[`和`]]`使用。`StringBuffer`

# java - 是否可以防止在批处理文件中运行 2 个 java 应用程序实例？

> ID：14584480
> 
> 赞同：0
> 
> 时间：2013-01-29T13:47:16.973
> 
> 标签：java, batch-file

由于任务调度程序似乎并没有阻止我运行 2 个实例，我已经启用了不要启动新实例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:22:02.677

假设您实际上是在要求批处理解决方案而不是 Java 解决方案，并且假设您是从批处理启动 Java 程序，那么您可以执行类似这样的操作

```
tasklist /nh /fi "imagename eq java.exe" | find /i "java.exe" >nul && (
echo Java already running, not going to run again
) || (
echo Java not running, so run it
java.exe whatever
) 
```

显然，您将不得不`java.exe whatever`用您的实际命令替换。

如果这不是您要查找的内容，请添加更具体的信息/要求。

# apache - XAMPP 服务器安装问题

> ID：14584483
> 
> 赞同：0
> 
> 时间：2013-01-29T13:47:25.623
> 
> 标签：apache, installation, xampp

我附上了截图！我无法弄清楚为什么会出现这个错误！

我卸载了以前的版本，我正在尝试安装更新的版本，但是这个错误来了：

![http://ge.tt/6Ny7SqW/v/0](../Images/cda743c8f15dade1856ad5ca93b43fc1.png)

请告诉我如何解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:49:04.267

从控制面板停用 UAC，然后尝试安装 XAMPP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:54:44.907

您可以禁用用户帐户控制。 [http://www.mydigitallife.info/how-to-disable-and-turn-off-uac-in-windows-7/](http://www.mydigitallife.info/how-to-disable-and-turn-off-uac-in-windows-7/) 重启并安装 xampp。

# java - 导入静态与静态最终

> ID：14584488
> 
> 赞同：4
> 
> 时间：2013-01-29T13:47:39.043
> 
> 标签：java, performance, memory, import, constants

过去我经常在 Java 类中使用“import static”构造。最近我意识到，而不是

```
import static my.pack.A.MY_CONSTANT; 
```

您可以使用

```
import my.pack.A;

public class B {
    private static final MY_CONSTANT = A.MY_CONSTANT;
} 
```

这种方法最明显的优点是：

1.  您可以在 Eclipse 中使用重构轻松地从代码中删除所有长常量表达式`A.B.C.CONSTANT.ANOTHER_ONE.TOO_LONG`，而不会弄乱静态导入（在 Eclipse 中掌握起来并不那么快）
2.  您可以为任何表达式赋予任何名称，这在当前上下文中可能更有意义。

例如：

```
private static final PAYMENT_TYPE = PaymentType.CASH;
...
calculateSomething(amount, PAYMENT_TYPE); 
```

代替

```
import static my.pack.PaymentType.CASH
...
calculateSomething(amount, CASH); 
```

如果默认的 PaymentType 值更改为 CREDIT_CARD，这也更容易重构。

我的问题是：与静态导入相比，这种方法有什么缺点，还是可以在任何地方使用？

我现在唯一关心的是生成的编译 .class 文件，这可能与所描述的两种方法不同。因此理论上性能和内存使用可能会受到影响。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T13:51:00.677

我认为唯一的缺点是你有更多的代码，你将一个常量分配给另一个常量。除此之外应该没有区别。性能和内存无关紧要，您可能会有更多引用返回到相同的常量池条目。即使它创建了单独的常量池条目，也需要很多条目才能有所作为。

在无法重命名原始条目的情况下，能够为常量命名可能是一件非常好的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T14:00:02.853

It is mostly a matter of taste, but the official [docs](http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html) recommend using the `static` version sparingly, especially with a wildcard. The main downside of static import is that it pollutes your namespace by added all the static members to it. In your above example, it should be about what you think it more readable for your code. Resist the urge to do "import package.*" unless you really want all the `static` members of `package`.

It should not effect your compiled code -- it is merely provides a shorthand access to the same constant.

# rounding - 如何汇总进行中的编程

> ID：14584498
> 
> 赞同：3
> 
> 时间：2013-01-29T13:48:02.020
> 
> 标签：rounding, progress-4gl

我正在为 MRP 程序编写一份报告，其中包含一个我为订购数量计算的字段。如果是小数点，我需要将数字四舍五入。

例如：2.33 需要四舍五入到 3 等等。

我试过了

```
oder = round(order,0). 
```

但这只是让我得到 2.00 我需要将该数字四舍五入到下一个整数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:26:31.113

```
function roundUp returns integer ( x as decimal ):

  if x = truncate( x, 0 ) then
    return integer( x ).
   else
    return integer( truncate( x, 0 ) + 1 ).

end.

display roundUp( 2.33 ). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-15T22:59:55.337

```
x = round(n + 0.4999999999, 0) 
```

...对于 n 的负值也应该适用于所有人

*   n = -2.0000001 ... x = -2
*   n = -2.5 ... x = -2
*   n = -2.9999999999 ... x = -2

roundUp() 在所有上述 n 的负值中解析为 -1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-03T11:35:42.107

这也适用于负值。返回值有意保留为整数，您也可以将其保留为十进制。

```
function roundUp returns integer 
( 
    input in-value as DECIMAL 
):

    def var x as decimal no-undo.
    def var y as decimal no-undo.

    if in-value < 0 then
    DO:
        x = truncate(in-value,0).     
        y =  in-value - x.      
        if abs(y) <= 0.5 then 
            return INTEGER(x).
        else 
            return INTEGER(round(in-value,0)).
    END.
    ELSE 
        return INTEGER(round(in-value,0)).

end function. 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-10-13T13:02:30.247

使用以下内容：

```
DEF VAR X AS decimal.
DEF VAR Y AS integer.

update
x with frame a.

Y = X - 1.
display y.
IF (( X - Y ) < 0.5)
THEN do:
DISPLAY round(x,0) + 1.
end.
ELSE DO :
DISPLAY round(x,0).
end. 
```

# ruby-on-rails - 如何计算每条记录在 Rails 中输入了多少个数据库字段

> ID：14584501
> 
> 赞同：0
> 
> 时间：2013-01-29T13:48:06.187
> 
> 标签：ruby-on-rails, attributes

我正在尝试检索数据库完整性的简单统计信息。考虑到未输入的字段中包含“null”或“”，我想知道每条记录填写的字段总数中有多少字段。

以下是现有代码的样子：

```
<% if @products %>

  <% total_attribute_count = Product.columns.size %>

  <% @products do |product| -%>
    <p><%= platform.name %></p>
    <p>I would like to have here a number of attributes filled in, so I could calculate a percentage based on total_attribute_count</p> 
  <% end -%>

<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:04:28.880

您可以尝试以下

```
#Following line will gives you total number of columns in the table
a = Product.column_names.length  
#Following line will gives you total number of columns which are filled
b = Product.column_names.map{|a| product.send(a)}.compact.length
#Following line gives you total number of columns which are nil or null
a - b
To calculate % you can do following
(b.to_f*100/a.to_f) 
```

参考[`column_names`](http://api.rubyonrails.org/v2.3.8/classes/ActiveRecord/Base.html#M001822)

# c - 通过串行端口将 GDB 连接到 KGDB 构建内核的问题

> ID：14584504
> 
> 赞同：8
> 
> 时间：2013-01-29T13:48:09.367
> 
> 标签：c, linux, linux-kernel, kernel, kgdb

我想通过串行 ttyS0 从我的 64 位 suse 机器上调试 MIPS linux 驱动程序。使用的 gdb 在 LAN 上可以更好地用于调试应用程序，但不能通过串行方式使用 kgdb。我使用此[页面](http://kernel.org/pub/linux/kernel/people/jwessel/kdb/index.html)和其他一些页面开始调试，但没有最终结果。

我的内核是使用以下设置编译的：

```
CONFIG_MAGIC_SYSRQ=y
CONFIG_HAVE_ARCH_KGDB=y
CONFIG_KGDB=y
CONFIG_KGDB_SERIAL_CONSOLE=y
# CONFIG_KGDB_TESTS is not set
CONFIG_CMDLINE="kgdboc=ttyS0,115200" 
```

如果我运行 gdb：

```
gdb vmlinux
(gdb) set remotebaud 115200
(gdb) set debug remote 1
(gdb) target remote /dev/ttyS0 
```

我可以观察到以下输出：

输出（GDB_TERMINAL）：

```
(gdb) target remote /dev/ttyS0
Remote debugging using /dev/ttyS0
Sending packet: $qSupported:qRelocInsn+#9a...Ack
Timeout in mid-packet, retrying
Timed out.
Timed out.
Ignoring packet error, continuing...
Packet qSupported (supported-packets) is supported
warning: unrecognized item "qSupported:qRelocIns" in "qSupported" response
Sending packet: $Hg0#df...Nak
Sending packet: $Hg0#df...Ack
Packet received: Hg0
Sending packet: $?#3f...Packet instead of Ack, ignoring it
Ack
Timed out.
Timed out.
Timed out.
Ignoring packet error, continuing...
Sending packet: $Hc-1#09...Nak
Sending packet: $Hc-1#09...Ack
Reply contains invalid hex digit 36 
```

输出（远程目标）：

```
+$?#3f09n+#9a$Hg0#df+09 
```

没有更多的事情发生！！！

我也测试了 sysrq，但提到的 sysrq-option 'g' 似乎不适合！

```
echo b > /proc/sysrq-trigger 
#successfully reboot

echo g > /proc/sysrq-trigger 
#prints only the help message (SysRq : HELP : loglevel(0-9) reBoot Crash termin .....) 
```

sysrq 是否正常运行？
有什么我错过的吗？
有没有办法在我的远程设备上测试正在运行的 kgdb？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-14T19:30:59.380

我在通过串行链接使用 kgdb 运行 gdb 时遇到了很多问题。我的主机是 Intel x86 Linux 机器，目标是 ARM 32 位 Raspberry Pi 2。目标通过[USB 转 TTL 串行电缆](https://www.adafruit.com/products/954)连接。以下是关键问题及其解决方案。

## 1) 不要与or`gdb`同时使用。`screen``minicom`

在`minicom`tty 上连接后，GDB 挂起然后崩溃：

```
(gdb) target remote /dev/ttyUSB0
Ignoring packet error, continuing...
Ignoring packet error, continuing...
Ignoring packet error, continuing...
Ignoring packet error, continuing...
/build/gdb-cXfXJ3/gdb-7.11.1/gdb/thread.c:89: internal-error: inferior_thread: Assertion `tp' failed.
A problem internal to GDB has been detected, further debugging may prove unreliable.``` 
```

连接时`screen`，GDB 无法连接：

```
(gdb) tar rem /dev/ttyUSB0
/dev/ttyUSB0: Device or resource busy. 
```

## 2）损坏的数据包和超时

> 无效数据包，错误校验和，在旧数据包中间看到新数据包开始，超时

使用支持目标架构的 GDB。x86 上的默认 GDB（至少在 Ubuntu 上）不支持 arm 目标。改用`gdb-multiarch`或使用与交叉编译工具集对应的 GDB，即`arm-linux-gnueabihf-gdb`. `(gdb) set architecture`使用命令列出可用的架构。在我的案例中，该`auto`架构正确地检测了手臂目标。

## 3) 连接前必须在目标上触发 KGDB

> 远程意外回复“vMustReplyEmpty”：vMustReplyEmpty
> 
> 对偏移量查询的错误响应，qOffsets

GDB 尝试连接，但目标未处于调试模式。在连接 GDB 之前必须触发调试 sysrq。键盘快捷键对我不起作用。`echo g > /proc/sysrq-trigger`以 root 身份通过 SSH运行命令有效。

## 4) 配置波特率

> 警告：无效的波特率 115200。最大值为 38400。/dev/ttyUSB0：无效参数。

配置的波特率必须在`kgdboc`内核参数和 GDB 之间匹配。就我而言，不支持波特率 115200。按照建议将波特率设置为 38400 是必要的。使用内核 cmdline: 重新启动目标，`kgdboc=ttyAMA0,38400`然后：

```
(gdb) set remotebaud 38400
(gdb) target remote /dev/ttyUSB0
Remote debugging using /dev/ttyUSB0
0x800b4730 in kgdb_breakpoint () 
```

一旦这些问题得到解决，内核调试就会按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T13:44:15.637

我知道这是 2 年前的事了，但我只想说我的主板也有同样的问题，不幸的是它没有 LAN 接口来通过 TCP 连接使用 gdbserver。我不知道你是否能解决这个问题，但如果你的主板确实有一个 LAN 接口（或者你可以使用 USB 到以太网适配器构建一个），那么似乎可以通过它进行调试！

# r - 警告消息：在 rbindlist(allargs) 中：强制引入的 NA：data.table 中可能存在错误？

> ID：14584510
> 
> 赞同：10
> 
> 时间：2013-01-29T13:48:24.187
> 
> 标签：r, data.table

在分析一些数据时，我遇到了警告消息，我怀疑这是一个错误，因为它是一个非常简单的命令，我已经使用过很多次了。

```
Warning message:
In rbindlist(allargs) : NAs introduced by coercion 
```

我能够重现该错误。这是您应该能够重现错误的代码。

```
# unique random names for column V1
set.seed(45)
n <- sapply(1:500, function(x) {
    paste(sample(c(letters[1:26]), 10), collapse="")
})
# generate some values for V2 and V3
dt <- data.table(V1 = sample(n, 30*500, replace = TRUE), 
                 V2 = sample(1:10, 30*500, replace = TRUE), 
                 V3 = sample(50:100, 30*500, replace = TRUE))
setkey(dt, "V1")

# No warning when providing column names (and right results)
dt[, list(s = sum(V2), m = mean(V3)),by=V1]

#              V1   s        m
#   1: acgmqyuwpe 238 74.97778
#   2: adcltygwsq 204 79.94118
#   3: adftozibnh 165 75.51515
#   4: aeuowtlskr 164 75.70968
#   5: ahfoqclkpg 192 73.20000
#  ---                        
# 496: zuqegoxkpi  93 77.95000
# 497: zwpserimgf 178 72.62963
# 498: zxkpdrlcsf 154 78.04167
# 499: zxvoaeflhq 121 75.34615
# 500: zyiwcsanlm 180 76.61290

# Warning message and results with NA
dt[, list(sum(V2), mean(V3)),by=V1]

#              V1  V1       V2
#   1: acgmqyuwpe 238 74.97778
#   2: adcltygwsq 204 79.94118
#   3: adftozibnh 165 75.51515
#   4: aeuowtlskr 164 75.70968
#   5: ahfoqclkpg 192 73.20000
#  ---                        
# 496: zuqegoxkpi  NA 77.95000
# 497: zwpserimgf  NA 72.62963
# 498: zxkpdrlcsf  NA 78.04167
# 499: zxvoaeflhq  NA 75.34615
# 500: zyiwcsanlm  NA 76.61290

Warning message:
In rbindlist(allargs) : NAs introduced by coercion 
```

*   1）如果您不提供列名，似乎会发生这种情况。

*   2）即使那样，特别是当`V1`（或您在 中使用的列`by=`）有很多`unique`条目（此处为 500）并且您没有指定列名时，这似乎会发生。也就是说，当列的唯一条目*较少时，***不会**发生这种情况。例如，尝试更改from to的代码，您将不会收到任何警告。`by=``V1`*`n``sapply(1:500, ...``sapply(1:50, ...`*

 *这里发生了什么？它在带有 OS X 10.8.2 的 Macbook pro 上的 R 版本 2.15（尽管我在另一个带有 2.15.2 的 macbook pro 上对其进行了测试）。这是`sessionInfo()`.

```
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] data.table_1.8.6 reshape2_1.2.2  

loaded via a namespace (and not attached):
[1] plyr_1.8      stringr_0.6.2 tools_2.15.0 
```

刚刚转载`2.15.2`：

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] data.table_1.8.6 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T15:12:00.353

**更新：现在由 Ricardo 在 v1.8.9 中修复**

> o rbind'ing data.tables 包含重复的“”或 NA 列名现在可以工作，#2726 & #2384。感谢 Garrett See 和 Arun Srinivasan 的报道。这也影响了带有重复列名的 data.tables 的打印，因为头部和尾部在内部是 rbind-ed 的。

* * *

是的，错误。似乎在`data.table`s 的 print 方法中出现了重名。

```
ans = dt[, list(sum(V2), mean(V3)),by=V1]
head(ans)
           V1  V1       V2     # notice the duplicated V1
1: acgmqyuwpe 140 78.07692
2: adcltygwsq 191 76.93333
3: adftozibnh 153 73.82143
4: aeuowtlskr 122 73.04348
5: ahfoqclkpg 143 75.83333
6: ahtczyuipw 135 73.54167
tail(ans)
           V1  V1       V2
1: zugrnehpmq 189 72.63889
2: zuqegoxkpi 150 76.03333
3: zwpserimgf 180 74.81818
4: zxkpdrlcsf 115 72.57895
5: zxvoaeflhq 157 76.53571
6: zyiwcsanlm 145 72.79167
print(ans)
Error in rbindlist(allargs) : 
    (converted from warning) NAs introduced by coercion
rbind(head(ans),tail(ans))
Error in rbindlist(allargs) : 
    (converted from warning) NAs introduced by coercion 
```

作为一种解决方法，不要使用列名等创建`V1`data.table `V2`。

它是由于这个已知的错误引起的：

[#2384 包含重复列名的表的 rbind 未正确绑定](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=2384&group_id=240&atid=975)

我已经添加了一个链接回到这个问题。

谢谢！*

# algorithm - 图像转线算法

> ID：14584538
> 
> 赞同：0
> 
> 时间：2013-01-29T13:49:56.867
> 
> 标签：algorithm, drawing

我构建了一个用普通笔绘图的绘图仪，并编写了软件，用户可以在其中画线（x，y，x1，y1）或圆（x，y，r）。

我还设法阅读并转换然后绘制了一些单行旅行商问题的[解决方案](http://www.tsp.gatech.edu/data/ml/monalisa.html)。

我正在寻找一种算法来制作 bmp 的铅笔或阴影图并输出线条、圆圈或像素的列表。我看了半色调，它有点工作，但寻找更多的东西......。艺术的 。

我从哪里开始有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:05:06.660

您可能正在寻找的术语是“图像矢量化”：[http ://www.google.cl/search?q=image+vectorization](http://www.google.cl/search?q=image+vectorization)

# android - Android中的裁剪图像黑色背景问题

> ID：14584540
> 
> 赞同：0
> 
> 时间：2013-01-29T13:50:03.547
> 
> 标签：android, android-camera

我正在开发一个应用程序，我必须从相机和图库中获取图像，但是当我尝试裁剪图像时，我会在图像中得到一些深色背景。我正在使用此代码进行裁剪图像-

```
intent.putExtra("crop", "true");
intent.putExtra("aspectX", 0);
intent.putExtra("aspectY", 0);
intent.putExtra("outputX", 200);
intent.putExtra("outputY", 150); 
```

它工作正常，但问题是图像背后的黑暗背景。 ![裁剪后我的输出图像](../Images/2057bd1ed0e536b2b4d8616931727bac.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-04T13:18:09.283

```
// aspectX aspectY
intent.putExtra("aspectX", 2);
intent.putExtra("aspectY", 3);
//        outputX,outputY
intent.putExtra("outputX", 800);
intent.putExtra("outputY", 1200);
intent.putExtra("scale", true);
intent.putExtra("scaleUpIfNeeded", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T08:59:40.580

我像这样制作了我的 ImageView，它解决了我的问题：-

```
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="5" >

    <ImageView
        android:id="@+id/selectedpic"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal|center_vertical"
        android:layout_marginTop="30dp"
        android:scaleType="centerCrop"
        android:paddingLeft="5dp"
        android:paddingRight="5dp"
        android:background="@android:color/transparent"
        android:src="@drawable/frame_d" />
</LinearLayout> 
```

重要的标签是
`android:background="@android:color/transparent"`和 `andandroid:scaleType="centerCrop"`

我试过`intent.putExtra("scale", true);` ，但如果我们根据以前的尺寸缩放图像的一小部分，它会降低图像质量。所以我不推荐使用这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:00:44.447

这里的问题似乎是图像的新尺寸大于源，当你裁剪它时，Android 需要用一些东西“填充”这个新尺寸。

在裁剪图像之前，您可以有一些逻辑来查看是否需要在代码中裁剪图像。

或者，您可以查看[ImageCache Actions](http://drupal.org/project/imagecache_actions)库。

# textures - 纹理是“倒置的”

> ID：14584543
> 
> 赞同：2
> 
> 时间：2013-01-29T13:50:12.157
> 
> 标签：textures, blender, blender-2.61

我昨天才开始使用 Blender，所以请放轻松。我在 OS X 上使用 Blender 2.64a。

我创建了这个场景：一个平面和一张扑克牌（一个扁平的立方体）。

立方体的顶面和底面都有自己的材质和纹理（卡片面图像）。在示例渲染中，我只是复制了一张卡片，然后旋转它，以便我可以看到它的“背面”。

背面纹理是倒置的，而正面是正确的。我显然做错了什么。

我没有更改任何其他设置。

提前谢谢你，CS

![在此处输入图像描述](../Images/51cfabd038aa3be74080e42dc260a02d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:02:54.503

可能是正常的错误。要检查这一点，请进入编辑模式并启用*Normals:* / *Face*。选择所有面或顶点并重新计算它们。如果仍有法线以错误的方向突出，则需要手动翻转它们。

[查看搅拌机导出/单面多边形](https://stackoverflow.com/questions/12953308/blender-export-one-sided-polygons/12969365#12969365)的第二部分以获取更多详细信息和屏幕截图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T13:42:09.533

仔细检查您的“映射”属性是否设置正确。搅拌器中的默认视口始终显示 UV 贴图纹理，即使材质使用生成的贴图。

一个热门提示是在视口中打开 GLSL，因为这将比多重纹理更准确地显示您的材质。

# php - 具有动态字段的多个文件上传

> ID：14584546
> 
> 赞同：0
> 
> 时间：2013-01-29T13:50:26.840
> 
> 标签：php, javascript

你能建议/帮助我这个代码吗？我想将多个文件上传到服务器并将信息保存在数据库中。但是此代码仅从第一个输入字段上传一个文件。

我有动态的“上传文件”字段，如下所示：

```
 <form action="uploader.php" method="POST" enctype="multipart/form-data">
                <label>Upload</label>
                <input type="file"  name="file[]">
                <label>Description</label>
                <input type="text" id="filedesc" name="filedesc[]">
                <a href="#" onClick="addUpload('dynamicInputUpload');" >
                <img src="../../img/add.png" ></a>
        <div id="dynamicInputUpload"></div>
 <input type="submit" float= "right"  name="add" id="add" value="UPLOAD" > 
 <input type="hidden" name="pid" id="pid" value="<?php echo $pid; ?>">
 <input type="hidden" name="intnumber" id="intnumber" value="<?php echo $int; ?>">     
        </form> 
```

Bellow 是创建动态字段的 Javascript：

```
 var counterUpload = 1;
 var limit = 10;
 function addUpload(divName){
 if (counterUpload == limit)  {
      alert("You have reached the limit of adding " + counterUpload + " inputs");
 }
 else {
      var newdiv = document.createElement('div');
      newdiv.innerHTML = " <label>File " + (counterUpload + 1) + "</label><input type=\"file\" name=\"file["+counterUpload+"]\" id=\"file["+counterUpload+"]\"> <label>Description " + (counterUpload + 1) + "</label><input type=\"text\" id=\"filedesc["+counterUpload+"]\" name=\"filedesc["+counterUpload+"]\" >"
      document.getElementById(divName).appendChild(newdiv);
      counterUpload++;
 } 
```

}

问题出在uploader.php 中。我成功地只上传了一个（第一个）文件。

```
<?php
 include '../../c/config.php';
 include '../../c/opendb.php';
 // Settings
$allowedExtensions = array('jpg','gif','bmp','png', 'docx', 'doc','pdf');
$maxSize = 2097152;
$storageDir = '../uploads/';

// Result arrays
$errors = $output = array();

if (!empty($_FILES['file'])){  

  // Validation loop 
  foreach($_FILES['file']['name'] as $i=> $value){

  $fileName = $_FILES['file']['name'][$i];
  $fileSize = $_FILES['file']['size'][$i];
  $fileErr = $_FILES['file']['error'][$i];
  $fileExt = strtolower(pathinfo($fileName, PATHINFO_EXTENSION));

  // Validate extension
  if (!in_array($fileExt, $allowedExtensions)) {
    $errors[$fileName][] = "Format $fileExt in file $fileName is not accepted";
  }

  // Validate size
  if ($fileSize > $maxSize) {
    $errors[$fileName][] = "$fileName excedes the maximum file size of $maxSize bytes";
  }

  // Check errors
  if ($fileErr) {
    $errors[$fileName][] = "$fileName uploaded with error code $fileErr";
  }

}

// Handle validation errors here
if (count($errors) > 0) {
  die("Errors validating uploads: ".print_r($errors, TRUE));
}

// Create the storage directory if it doesn't exist
if (!is_dir($storageDir)) {
  if (!mkdir($storageDir, 0755, TRUE)) { 
    die("Unable to create storage directory $storageDir");
  }
}

// File move loop
foreach($_FILES['file']['name'] as $i=> $array_value){

  // Get base info
  $fileBase = basename($_FILES['file']['name'][$i]);
  $fileName = pathinfo($fileBase, PATHINFO_FILENAME);
  $fileExt = pathinfo($fileBase, PATHINFO_EXTENSION);
  $fileTmp = $_FILES['file']['tmp_name'][$i];

  // Construct destination path
  $fileDst = $storageDir.'/'.basename($_FILES['file']['name'][$i]);
  for ($j = 0; file_exists($fileDst); $j++) {
    $fileDst = "$storageDir/$fileName-$j.$fileExt";
  }

  // Move the file    
  if (move_uploaded_file($fileTmp, $fileDst)) {
    $output[$fileBase] = "Stored $fileBase OK";
     $sql=mysql_query("INSERT INTO uploaded_files (pid, file_path,file_type)
            Values ('$_POST[pid]','$fileDst','$fileExt')") 
            or die ("Unable to issue query sql: ".mysql_error());
  } else {
    $output[$fileBase] = "Failure while uploading $fileBase!";
    $errors[$fileBase][] = "Failure: Can't move uploaded file $fileBase!";
  }

}
 // Handle file move errors here
if (count($errors) > 0) {
  die("Errors moving uploaded files: ".print_r($errors, TRUE));
} } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:04:34.820

此字符串有错误：

```
$sql=mysql_query("INSERT INTO uploaded_files (pid, file_path,file_type)
Values ('$_POST[pid]','$fileDst','$fileExt')")
or die ("Unable to issue query sql: ".mysql_error()); 
```

尝试注释此字符串，您的脚本将保存所有文件。也许你没有连接到数据库。

# python - 在 django 模型中保存 time.time()

> ID：14584549
> 
> 赞同：0
> 
> 时间：2013-01-29T13:50:31.673
> 
> 标签：python, django, django-models

我想要某种时间戳来更新模型。问题是 mysql 时间戳只有 1 秒的分辨率，所以如果我将 DateTime 与 auto_add_now 一起使用，这对我来说还不够好。

我想过使用浮点字段并在每次更新时将其分配给 time.time() 。这是我使用 QuerySet.update() 进行更新的模型

```
model MyModel:
  last_update = models.FloatField(default=time.time) 
```

然后我会在任何保存之前更新 last_update （我所有的调用都通过中心位置，所以我可以在创建时明确地执行此操作），例如：

```
m = MyModel(..,last_update=time.time()) 
```

或者当我进行批量更新时，

```
m = MyModel.objects.filter(....).update(last_update_time=time.time()) 
```

这种保存浮动和订单的方法有什么问题吗？

澄清一下，我知道带有 auto_now=True 的 DateTimeField 选项，问题是这给了我 1 秒的分辨率，因为它映射到 MYSQL 中的日期时间字段，即 1 秒的分辨率（我使用的是 MYSQL 5.5）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:15:53.787

我认为您可以使用`DateField.auto_now`，并且每次保存对象时都会更新该字段。例如`last_update = models.DateTimeField(auto_now = True)`.

[您可以在此处](https://docs.djangoproject.com/en/dev/ref/models/fields/#datefield)阅读文档，因为您可以看到 Field 选项旨在准确归档您想要的内容。

您也可以覆盖该`save`方法，如您所见[，](https://docs.djangoproject.com/en/dev/ref/models/fields/#datefield)并根据需要更新该`last_update`字段。

我个人推荐第一种方法，因为它很简单，还有第三种方法使用信号，但我想这会让人感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:05:52.207

```
 from datetime import datetime

 class Model(models.Model):
    date_created = models.DateTimeField()
    date_modified = models.DateTimeField()

 def save(self):
    if self.date_created == None:
       self.date_created = datetime.now()
    self.date_modified = datetime.now()
    super(Model, self).save() 
```

# ios - NSUserDefaults 问题（变为空）

> ID：14584553
> 
> 赞同：1
> 
> 时间：2013-01-29T13:50:52.377
> 
> 标签：ios, nsuserdefaults

我们正在开发一个 iPhone 应用程序。该应用程序可在应用商店中获得。我们使用 NSUserDefaults 来存储我们的 usertoken 值。但是一些用户报告说，当应用程序长时间闲置（在后台）时，usertoken 变为空。但通常价值是越来越大。

以下是在 NSUserDefaults 中存储 usertoken 的代码。我们正在从登录页面和注册页面将值设置为 userToken。

```
[[NSUserDefaults standardUserDefaults] setObject:userToken forKey:USER_TOEKN]; 
```

在将值设置为 NSUserDefaults 后，我没有调用同步。能否请你帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:58:32.283

`[[NSUserDefaults standardUserDefaults] synchronize];`如果您的应用程序要在后台运行，您需要致电- 我的猜测是应用程序在默认设置自动同步之前空闲。从[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/doc/uid/20000318-CIHDDEGI)中：

> 由于此方法会定期自动调用，因此仅当您无法等待自动同步（例如，如果您的应用程序即将退出）或您想要更新用户默认值时才使用此方法，即使您没有进行任何更改。

至于在哪里执行此操作，请查看Application Delegate 中的[applicationWillResignActive:](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationWillResignActive%3a)和[applicationDidEnterBackground :。](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationDidEnterBackground%3a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:01:18.550

尝试这样的事情：

```
 NSUserDefaults  *udf = [NSUserDefaults standardUserDefaults];
 [udf setObject:userToken forKey:USER_TOEKN];
 [udf synchronize]; 
```

它将永久存储您的价值。

# php - Symfony2 路由资源和类型

> ID：14584556
> 
> 赞同：1
> 
> 时间：2013-01-29T13:50:55.767
> 
> 标签：php, symfony, sonata-admin

我按照本[教程](http://sonata-project.org/bundles/admin/master/doc/reference/getting_started.html)成功安装了 SonataAdminBundle。但是，我对 Symfony2 非常陌生，并且无法理解教程中的部分路由配置。

```
# app/config/routing.yml    
_sonata_admin:
    resource: .
    type: sonata_admin
    prefix: /admin 
```

1.  资源在哪里**：。**从哪里获取路线？
2.  type: **sonata_admin**是什么意思？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:58:13.293

`type`密钥允许不同的路由加载器知道哪一个支持加载这个路由资源。

只是在这里`resource: .`说它将加载所有内容。实际上，[路由加载器](https://github.com/sonata-project/SonataAdminBundle/blob/master/Route/AdminPoolLoader.php#L52)并不关心这个参数，这就是为什么你把`.`.

# iphone - 在表格视图中重新排序单元格时获取索引路径？

> ID：14584563
> 
> 赞同：0
> 
> 时间：2013-01-29T13:51:13.077
> 
> 标签：iphone, ios, objective-c, uitableview

我想更改表格视图中的单元格顺序

我正在使用以下代码

```
-(void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath  
{    
    [tableView moveRowAtIndexPath:path1 toIndexPath:path2];
} 
```

这里`path1`是用户现在选择的行的索引路径，我想找到用户删除该单元格的行的索引路径，那么我怎样才能找到 toIndexPath(path2)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:55:07.297

我认为您对该方法的用途感到困惑 - 这是 UITableViewDataSource 的回调函数，旨在通知数据模型表中的更改。从文档：

> 告诉数据源将表视图中特定位置的行移动到另一个位置。
> 
> 当用户按下 fromRow 中的重新排序控件时，UITableView 对象会将此消息发送到数据源。

这意味着您需要在这里做的是确保您的模型（通常是一个数组）重新排列以与这些更改正确同步。

希望这能给你一个好的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:57:44.950

你应该实现：

```
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
return YES;
} 
```

＆ 还：

```
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath {
 //do whatever you want after the row has been moved
} 
```

下面是一个拖放 N 的例子：

[https://github.com/coderDove/UITableView-Drag-n-Drop](https://github.com/coderDove/UITableView-Drag-n-Drop)

希望这可以帮助！！！

# firebird - Firebird 获取所有可用 id 的列表

> ID：14584564
> 
> 赞同：3
> 
> 时间：2013-01-29T13:51:21.050
> 
> 标签：firebird, firebird2.5

在一个表中，我有 id 为 2、4、5、8 的记录。如何接收值为 1、3、6、7 的列表。我试过这种方式

```
SELECT t1.id + 1
FROM table t1
WHERE NOT EXISTS (
    SELECT * 
    FROM table t2
    WHERE t2.id = t1.id + 1
) 
```

但它不能正常工作。它不会带来所有可用的职位。

没有另一张桌子可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T19:33:32.917

您可以从递归 CTE 中获取所有缺少的 ID，如下所示：

```
with recursive numbers as (
  select 1 number
    from rdb$database
  union all
  select number+1
    from rdb$database
         join numbers on numbers.number < 1024
)
select n.number
  from numbers n
 where not exists (select 1 
                     from table t
                    where t.id = n.number) 
```

我的示例中的`number < 1024`条件将查询限制为最大 1024 递归深度。之后，查询将以错误结束。如果您需要超过 1024 个连续*ID*，您可以多次运行查询来调整生成的数字的间隔，或者考虑在不同的查询中产生连续的数字而不会达到递归级别，这并不难编写。

# python - 使用python套接字编程将图像文件从服务器传输到客户端

> ID：14584566
> 
> 赞同：2
> 
> 时间：2013-01-29T13:51:29.710
> 
> 标签：python, sockets

我正在做一个项目，其中图像由我的 android 手机拍摄并存储在我的 SD 卡中的文件夹中。我正在编写一个 python 脚本，该脚本需要定期将文件夹从 SD 移动到我 PC 中的特定文件夹。手机和电脑通过移动热点连接。

我写了一个套接字程序，我的 PC 作为客户端，移动设备作为服务器。但我面临一些问题。虽然我无法移动文件夹，但我尝试从文件夹中移动图像，但我面临以下问题

*   图像以未知文件格式的形式复制。
*   我无法在服务器端迭代该过程以移动文件夹中存在的所有图像
*   在客户端，我无法将其存储在我想要的位置。我尝试在发送图像之前从服务器发送文件夹名称和文件名，但客户端没有使用我发送的文件名，而是搜索该名称的文件夹。
*   我也对发送到客户端的名称大小有疑问，如何根据从服务器发送的名称随机更改客户端的大小。

我需要有人帮助解决这个问题。

这是客户端代码

```
import socket,os
import time

client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client_socket.connect(("192.168.43.1", 5005))

size = 1024

while True:
    fln = client_socket.recv(size) # folder name
    fn = client_socket.recv(size) # file name
    fname = "E:\\Transfered\\"+fln+"\\"+fn
    fp = open(fname,'w')
    while True:
        strng = client_socket.recv(1024)
        if not strng:
            break
        fp.write(strng)
    fp.close()
    print "Data Received successfully"
    exit()
    #data = 'viewnior '+fname
    #os.system(data) 
```

我的服务器端代码

```
import os   
import sys,time 
import socket

server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server_socket.bind(("", 5005))
server_socket.listen(5)

client_socket, address = server_socket.accept()
print "Conencted to - ",address,"\n"

sb = '/mnt/sdcard/sb'

while True:
    files = os.listdir(sb)
    pages = 0;
    while (files):
    print '\nMaybe, pending work'
    for au in files:
        if (au.find('d')>-1): # searching for folder with a d
            os.chdir(sb+'/'+au)
            imgFiles = os.listdir(sb+'/'+au)
            images = [img for img in imgFiles if img.endswith('.jpg')]
            print '\n%s user done' %au
            client_socket.send(au)
            pages = 0;
            #copies all .img files in the folder from server to client
            for imgs in images:
                print imgs
                client_socket.send(imgs)
                file_name = open(imgs,'r')
                while True:
                    strng = file_name.readline(1024)
                    if not strng:
                        break
                    client_socket.send(strng)
                file_name.close()
                print "Data sent successfully"                      
                os.remove(sb+'/'+au+'/'+imgs)
                pages = pages + 1

            time.sleep(1)
            os.chdir(sb)
            os.rmdir(au)

        else:
            time.sleep(2) 
        exit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:08:04.570

The problem seems to be using `readline()` on a binary file at the server side:

```
file_name = open(imgs,'rb')
while True:
strng = file_name.readline() 
```

`readline()` reads data from file up to the next `'\n'` character. Using it on a binary file may result in reading a very long buffer! (Maybe even up to EOF). In that case, using `socket.send()` may fail to deliver the entire data, and the return value (=bytes transmitted) should be checked. The possibilities for fixing that is:

1.  using `socket.sendall()` when sending, will send the entire buffer.

or, alternatively (may use both)

2.  using `file_name.read(1024)` - which will bound the amount of data read each cycle.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T19:30:13.917

我已经修改了足够多的代码来解决我的许多问题，现在我想要解决的唯一问题是图像传输。我在客户端打开了一个 .jpg 文件并将数据写入其中。但最终文件大小仅比原始大小小 1kb。我想如果我解决这个问题，我的工作就会完成。有人可以帮我吗。

这是代码

服务器：

```
import os   
import sys,time 
import socket

server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server_socket.bind(("", 5005))
server_socket.listen(5)

client_socket, address = server_socket.accept()
print "Conencted to - ",address,"\n"

sb = '/mnt/sdcard/sb'

while True:
    files = os.listdir(sb)
    pages = 0;
    while (files):
        print '\nMaybe, pending work'
        for au in files:
            if (au.find('d')>-1):
                os.chdir(sb+'/'+au)
                imgFiles = os.listdir(sb+'/'+au)
                images = [img for img in imgFiles if img.endswith('.jpg')]
                print '\n%s user done' %au
                client_socket.send(au)

                #copies all .img files in the folder from server to client
                for imgs in images:
                    client_socket.send(imgs)
                    file_name = open(imgs,'rb')
                    while True:
                        strng = file_name.readline()
                        if not strng:
                            break
                        client_socket.send(strng)
                    file_name.close()
                    os.remove(sb+'/'+au+'/'+imgs)       
                print "Data sent successfully"                          
                time.sleep(1)
                os.chdir(sb)
                os.rmdir(au)

            else:
                time.sleep(2) 
            exit() 
```

客户：

```
import socket,os
import time

client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client_socket.connect(("192.168.43.1", 5005))

dst="E:\\Kiosk\\"

while True:
#folder name
fln = client_socket.recv(4)
os.chdir(dst);
dst = "E:\\Kiosk\\"+fln+"\\"
if not os.path.exists(dst): os.makedirs(dst)
fname = client_socket.recv(4)
os.chdir(dst)
fname = fname+'.jpg'
fp = open(fname,'wb')
# image
while True:
    strng = client_socket.recv(1024)
    if not strng:
        break
    fp.write(strng)
fp.close()
print "Data Received successfully"
exit()
#time.sleep(10)

#data = 'viewnior '+fname
#os.system(data) 
```

# html - 如何摆脱圆盘和 li 元素之间的填充？

> ID：14584569
> 
> 赞同：1
> 
> 时间：2013-01-29T13:51:39.567
> 
> 标签：html, css, html-lists

我已将 li 元素的填充设置为 0，但仍有大约 10 个像素的填充。如何缩短提供的填充量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T05:51:10.283

不想无聊:) 但在我看来，否定声明`text-intend:-5px;`是一种错误的把戏。我知道它确实会欺骗浏览器的默认样式。但基本上它只是将文本移动到父元素之外，从而产生类似于悬挂的意图。我试图找到那些浏览器继承的样式，但没有一个会在子弹/圆盘周围创建这样的填充。

我做了一些研究，发现 CSS3 有特殊的伪元素[::marker](http://www.w3.org/TR/css3-lists/#marker-pseudoelement)来解决这个问题。这个想法很棒，但不幸的是它仍然没有在任何浏览器中实现:(

Mozilla 有自己的临时技巧来更好地设计项目符号`:-moz-list-bullet`- [https://developer.mozilla.org/en-US/docs/CSS/:-moz-list-bullet](https://developer.mozilla.org/en-US/docs/CSS/:-moz-list-bullet)
没有其他供应商支持或实施过这种黑客攻击

CSS3 还为 list-style-position: [hanging](http://www.w3.org/TR/css3-lists/#hanging)提供了新值，这可能会有所帮助。但它仍然没有很好的定义。

另一种解决方案是使用伪元素`::before`（IE7 不支持）

```
li:before { 
 content:"•";  
 margin-right:1px;
} 
```

毕竟似乎没有任何兴趣或需要解决这个问题。大家开心就好`text-intend`。
公平地说，归根结底，您为什么要删除项目符号和文本之间的空格:)）我认为他们所谓的就是这种情况-意外实现

# bind - spf 谷歌配置

> ID：14584574
> 
> 赞同：1
> 
> 时间：2013-01-29T13:51:55.187
> 
> 标签：bind, ubuntu-10.04, spf

我有一个我无法解决的问题。我正在尝试设置我的 spf 绑定我有一个专用服务器 Ubuntu。

我把我的配置是这样的：

```
@ 28800 IN MX 1 ASPMX.L.GOOGLE.COM.
@ 28800 IN MX 3 ALT1.ASPMX.L.GOOGLE.COM.
@ 28800 IN MX 3 ALT2.ASPMX.L.GOOGLE.COM.
@ 28800 IN MX 5 ASPMX2.GOOGLEMAIL.COM.
@ 28800 IN MX 5 ASPMX3.GOOGLEMAIL.COM.
@ 28800 IN MX 5 ASPMX4.GOOGLEMAIL.COM.
@ 28800 IN MX 5 ASPMX5.GOOGLEMAIL.COM.

@ 28800 IN TXT v = spf1 include: _spf.google.com ~ all 
```

我从昨天到今天停止传播。今天早上在“SPF Policy Tester”网站上进行测试

但它给出了以下信息：

xxx.xx.x.xx 可以发送域的名称（已找到 SPF 策略）。

我还要求我的员工托管这个设置，包括他们在谷歌上的集群。因为据我的一位与服务器合作的熟人说，他们需要释放范围 / 32

什么是正确的设置。

拥抱每个人。

詹森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:36:36.753

这是我在绑定配置中的行：

```
@                       IN      TXT     "v=spf1 include:_spf.google.com ~all" 
```

如果您还尝试将您的专用主机作为授权发件人，您可以尝试以下方法之一

```
"v=spf1 ip4:192.168.0.1 include:_spf.google.com ~all" 
```

`192.168.0.1`你的主机地址在哪里。

```
"v=spf1 ip4:192.168.0.1/16 include:_spf.google.com ~all" 
```

where is`192.168.0.1/16`是集群的 IP 地址范围。

```
"v=spf1 a:example.com include:_spf.google.com ~all" 
```

其中 a 记录`example.com`返回所有允许的 IP 地址

# html - 在没有空格的页面上调整动态 div

> ID：14584576
> 
> 赞同：2
> 
> 时间：2013-01-29T13:52:05.540
> 
> 标签：html, css, height

我正在尝试对齐页面上包含动态内容的多个 div，因为它们的高度可能不同。

**这是我页面中div的正常设计：** ![在此处输入图像描述](../Images/0a28ba625c0e9e0d4cbcd491b4a1d490.png)

**现在，我想用 css 做一个这样的设计：**

![在此处输入图像描述](../Images/079ac9e22d2a415d85614c82b81777b1.png)

如何修改 DIV 的 css 以实现此目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:02:45.063

我会制作 3`div`代表列，然后在每列中打印/包含框。然后只需将`margin-right`您拥有的那些添加到列`div`中，当然，`float: left;`. 在你的盒子上只有`min-height`这样它们可以根据内容伸展。例如：

```
<div class = "column">
  <div class = "content-box"></div>
  <div class = "content-box"></div>
</div>
<div class = "column">
  <div class = "content-box"></div>
  <div class = "content-box"></div>
  <div class = "content-box"></div>
</div>
<div class = "column">
  <div class = "content-box"></div>
  <div class = "content-box"></div>
</div> 
```

现在，如果您希望所有这些最终都具有相同的高度，那么您将不得不使用 jQuery。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T22:30:18.293

我猜你正在寻找一个 flex box css。这是我的 jsfiddle： [jsfiddle](http://jsfiddle.net/martyk/KH3b4/4/)

```
.container {
    display: box;
    display: -webkit-box;
    display: -moz-box;
    display: -ms-box;
    box-pack: start;
    -webkit-box-pack: start;
    -moz-box-pack: start;
    -ms-box-pack: start;
    box-align: stretch;
    -webkit-box-align: stretch;
    -moz-box-align: stretch;
    -ms-box-align: stretch;
    box-orient: horizontal;
    -webkit-box-orient: horizontal;
    -moz-box-orient: horizontal;
    -ms-box-orient: horizontal;
}

.container .column {
    max-width:200px;
    display: box;
    display: -webkit-box;
    display: -moz-box;
    display: -ms-box;
    box-pack: start;
    -webkit-box-pack: start;
    -moz-box-pack: start;
    -ms-box-pack: start;
    box-flex: 1;
    -webkit-box-flex: 1;
    -moz-box-flex: 1;
    -ms-box-flex: 1;
    box-orient: vertical;
    -webkit-box-orient: vertical;
    -moz-box-orient: vertical;
    -ms-box-orient: vertical;
    box-align: stretch;
    -webkit-box-align: stretch;
    -moz-box-align: stretch;
    -ms-box-align: stretch;
}

.column .dynamic-content {
    display: box;
    display: -webkit-box;
    display: -moz-box;
    display: -ms-box;
    box-orient: vertical;
    -webkit-box-orient: vertical;
    -moz-box-orient: vertical;
    -ms-box-orient: vertical;
    box-pack: start;
    -webkit-box-pack: start;
    -moz-box-pack: start;
    -ms-box-pack: start;
    box-align: start;
    -webkit-box-align: start;
    -moz-box-align: start;
    -ms-box-align: start;
    box-flex: 1;
    -webkit-box-flex: 1;
    -moz-box-flex: 1;
    -ms-box-flex: 1;
}
.container .dynamic-content {
    box-shadow: 1px 1px 2px 1px darkgrey;
    margin: 2px;
    background: lightcyan;
} 
```

它是纯 css，没有 javascript。更改“动态内容” div，列布局将相应对齐。

这是从[我的 jsfiddle](http://jsfiddle.net/martyk/KH3b4/4/)复制并粘贴的 HTML ：

```
<div class="container">
    <div class="column">
        <div class="dynamic-content">
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
            <p>Sample Sample</p>
            <p>Sample Sample</p>
        </div>
        <div class="dynamic-content">
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum</p>
        </div>
    </div>
    <div class="column">
        <div class="dynamic-content">
            <span>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</span>
        </div>
        <div class="dynamic-content">
            <span>Lorem ipsum dolor sit amet, consectetur adipisicing elit, ...</span>
            <p>Sample Sample</p>
        </div>
    </div>
    <div class="column">
        <div class="dynamic-content">
            <span>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</span>
        </div>
        <div class="dynamic-content">
            <p><span>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum</span></p>
        </div>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T20:43:17.130

基于 Jonur 的回答，我创建了 3 列，其中包含不同高度的单元格。 [http://jsfiddle.net/z4Ygv/2/](http://jsfiddle.net/z4Ygv/2/)

列已定义并向左浮动。我为 jsfiddle 在它们上设置了一个明确的高度，但是当我在自己的浏览器中使用它时，我有 100% 的高度来占据整个页面。

```
.shortcell {
    height:30%;
    width:90%;
    background:#ff0000;
    margin: .25em .25em;
}
.column {
    width:30%;
    height:20em;
    float:left;
    border:1px solid black;
}
.longcell {
    height:45%;
    width:90%;
    background:#00ff00;
    border:1px solid black;
    margin: .5em .5em;
} 
```

这有点简单......实际上marty在jsFiddle中只为我显示了左侧的一列

# compilation - 如何防止 java 编译器中的依赖检查

> ID：14584588
> 
> 赞同：3
> 
> 时间：2013-01-29T13:52:30.953
> 
> 标签：compilation, java, javac

我试图阻止java编译器中的依赖检查，我使用命令行编译，有没有办法告诉javac编译器在编译java文件时不要检查依赖？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:22:05.667

> ...有没有办法告诉 javac 编译器在编译 java 文件时不要检查依赖项？

简单回答是不。

假设您有某个类`A`想要调用`m`由 class 定义的某个方法`B`。为了成功编译`A`，编译器需要知道它`B`是一个真正的类，它定义了方法`m`，它具有预期的参数数量和类型，它抛出了什么检查异常，以及它返回什么类型的值。没有这些信息`B`，编译器就无法编译`A`。

这会传播到项目级别。如果 project`P`中的类依赖于project 中的类`Q`，则编译器必须（至少）具有该类才能编译`P`.

简而言之，不存在这样的编译器选项，而且很难看出它是如何实现的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:10:03.577

如果您的两个项目相互依赖，那么它们实际上是一个项目，必须一起构建。如果关系是单向关系，那么您仍然需要先构建依赖项目，然后在构建第二个项目时将项目的结果放在类路径上。

大多数 IDE 都具有管理此功能的能力。在 Eclipse 中，您可以标记一个项目依赖于另一个项目，并且依赖项目的输出文件将添加到另一个项目的类路径中。通常，所有依赖项都构建并打包为 jar，并且在编译父项目时将这些 jar 文件放置到类路径中。

在不访问依赖项的情况下构建代码非常困难，不推荐使用。在某些情况下，这是可能的。Eclipse 已经构建了自己的增量 Java 编译器，因此他们不必在每次修改单个文件时重新编译整个项目。[您可以在此处](http://www.eclipse.org/jdt/core/index.php)阅读有关它的更多信息，但为了使用这样的编译器，您可能需要做很多工作。

更新以反映您的新编辑：

为了构建一个公共库，公共库不能依赖于特定平台部分中的任何类。正如 Peter Rader 所提到的，典型的做法是使用接口。例如，您的公共库可以具有接收事件的 EventListener 接口。在您的平台特定库中，您可以实现该接口并根据特定平台处理事件。由于您的公共库仅依赖于 EventListener 类而不依赖于特定的实现，因此它在编译时不需要那些特定的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:07:26.363

如果你有依赖，它们总是会被检查并给出警告，但你的类还是会被编译。

框架通常会提供一个包含接口和枚举的 api.jar。

# php - Magento：订单成功的相关产品

> ID：14584590
> 
> 赞同：0
> 
> 时间：2013-01-29T13:52:40.403
> 
> 标签：php, magento, magento-layout-xml

**期望的结果：**

在订单成功页面上，我想显示与用户购买的产品相关的产品。

**到目前为止我做了什么：**

*   包含相关产品的产品属性
*   添加`echo $this->getChildHtml('related_products_list');`在`checkout/success.phtml`
*   扩展 product_list 并设置适当集合的块（*注意：这不是重写*）

* * *

```
class Namespace_CustomersBought_Block_Product_List extends Mage_Catalog_Block_Product_List {
    protected function _construct() {
        $orderId = Mage::getSingleton('checkout/session')->getLastRealOrderId();
        // some more code to get the products I need in $relatedProducts
        $this->setCollection($relatedProducts);
    }
} 
```

*   在我`custom.xml`的以下添加（路径正确）：

    ```
    <checkout_onepage_success>
        <reference name="content">
            <block type="namespace_customersbought/product_list" name="related_products_list"
                   template="module/product/related_list.phtml" after="-">
            </block>
        </reference>
    </checkout_onepage_success> 
    ```

**它停止工作的地方**

它呈现了我添加的 div `checkout/success.phtml`，但`getChildHtml()`调用为空。

另外，我使用`Magneto Debug`- 并且布局更新包含我的 XML。

**我需要什么帮助**

我想了解为什么这不起作用。如果我替换`<checkout_onepage_success>`为`<cms_index_index>`我在主页上获得所需的块（没有`getChildHtml()`），那么为什么它们会有不同的行为？

另外 - 理想情况下我不需要修改`checkout/success.phtml`文件，它应该自动输出。

我知道我错过了一些非常简单的东西，但我不知道是什么。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:00:16.543

估计线路有问题

```
<reference name="content"> 
```

这会将您的块设置为内容块的子级。但是，您已将输出添加到`checkout/success.phtml`属于 block 的模板中`checkout.success`。我建议您将 xml 更新替换为以下内容

```
<checkout_onepage_success>
    <reference name="checkout.success">
        <block type="namespace_customersbought/product_list" name="related_products_list"
               template="module/product/related_list.phtml" after="-">
        </block>
    </reference>
</checkout_onepage_success> 
```

# joomla - 在 Joomla 的菜单模块中显示文章内容

> ID：14584591
> 
> 赞同：0
> 
> 时间：2013-01-29T13:52:41.290
> 
> 标签：joomla, joomla2.5

我是 Joomla 的新手，并被要求将非 Joomla 网站转换为使用 Joomla。

该站点的结构类似于手风琴菜单，其中页面内容显示在页面链接下方，如下所示：

点击第1条链接：

```
╔════════════════╦══════════════════════╗
║ Article 1 Link ║                      ║
║                ║ Content of article 1 ║
║ Article 2 Link ║                      ║
║ Article 3 Link ║                      ║
║ Article 4 Link ║                      ║
║ Article 5 Link ║                      ║
╚════════════════╩══════════════════════╝ 
```

点击第三条链接：

```
╔════════════════╦══════════════════════╗
║ Article 1 Link ║                      ║
║ Article 2 Link ║                      ║
║ Article 3 Link ║                      ║
║                ║ Content of article 3 ║
║ Article 4 Link ║                      ║
║ Article 5 Link ║                      ║
╚════════════════╩══════════════════════╝ 
```

是否可以在 Joomla 2.5 中执行此操作？我很难理解如何，因为您可以拥有一个菜单模块，但是您将如何在该模块中显示文章内容？

理想情况下，文章内容`<li>`与菜单项相同，因此在 html 视图中：

```
<ul>
    <li><a href="#link1">Link 1</a></li>
    <li class="current"><a href="#link2">Link 2</a>
        <div>
            <!-- ARTICLE CONTENT FOR Link 2 -->
        </div>
    </li>
    <li><a href="#link3">Link 3</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:52:13.370

components/com_contact/contact/tmpl/default.php 中有一个示例，该示例从第 50 行（给予或接受）开始，展示了如何使用内置的 JHtml 手风琴（在 Joomla 中称为 Sliders）。如果您想从 mod_menu 的副本构建一个新模块，您可以使用该代码作为示例。

不过，首先，我建议您尝试一些扩展，因为 JED 上有许多 Accordion Menus 可用。如果不出意外，您将获得有关如何最好地实施的想法。[http://extensions.joomla.org/extensions/structure-a-navigation/menu-systems/accordion-menus](http://extensions.joomla.org/extensions/structure-a-navigation/menu-systems/accordion-menus)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:40:31.193

我通过将 mod_menu 文件复制到`MYTEMPLATE/html/mod_menu/CUSTOMMENUNAME.php`

然后我将其添加到 for 循环中：

`if ($item->id == $active_id) {`

这让我可以看到当前正在查看哪个页面。在 rcarey 的大力帮助下，The Joomla！论坛，我在 mod_menu 文件的顶部添加了这个：

```
require_once JPATH_SITE.'/components/com_content/helpers/route.php';
JModelLegacy::addIncludePath(JPATH_SITE.'/components/com_content/models', 'ContentModel');

// Get an instance of the model for getting an article
$model = JModelLegacy::getInstance('Article', 'ContentModel', array('ignore_request' => true));
// Set application parameters in model
$app = JFactory::getApplication();
$appParams = $app->getParams();
$model->setState('params', $appParams); 
```

然后在 mod_menu 循环中，我所要做的就是：

`$article = $model->getItem($item->id)`

现在我可以`$article`在 mod_menu 的循环中使用。

# regex - 字符串中的正则表达式十六进制字节

> ID：14584596
> 
> 赞同：0
> 
> 时间：2013-01-29T13:53:01.190
> 
> 标签：regex, string, qt, hex, byte

我正在尝试验证 Qt 中 LineEdit 小部件的输入。我第一次使用正则表达式，所以我可以使用一些帮助。我想允许用空格分隔 1 到 32 个十六进制字节，例如这应该是有效的：

```
"0a 45 bc 78 e2 34 71 af" 
```

以下是一些无效输入的示例：

`"1 34 bc 4e"`-> 需要成对写，所以 1 必须是 01。

`"8a cb3 58 11"`-> cb3 无效。

`"56 f2 a8 69 "`-> 不允许有尾随空格。

经过一番挠头后，我想出了这个似乎有效的正则表达式：

```
"([0-9A-Fa-f]{2}[ ]){0,31}([0-9A-Fa-f]{2})" 
```

现在谈谈我的问题：

1.  您是否发现我的正则表达式有任何我的测试未能显示的问题？如果是这样，我该如何改进它？

2.  有没有更简洁的写法？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:05:19.637

我不确定您使用什么方法进行验证，但一个可能的问题是该方法在字符串中搜索与模式匹配的子字符串，而不是检查字符串是否与模式匹配。用于[`exactMatch`](http://doc.qt.digia.com/qt/qregexp.html#exactMatch)根据正则表达式验证字符串。

无论如何，添加锚点`^`更`$`安全（但在使用时不是必需`exactMatch`的）：

```
"^([0-9A-Fa-f]{2}[ ]){0,31}([0-9A-Fa-f]{2})$" 
```

由于您正在进行验证，因此您不需要捕获。而且你不需要在里面放置空间`[]`

```
"^(?:[0-9A-Fa-f]{2} ){0,31}[0-9A-Fa-f]{2}$" 
```

您可以使用方法设置区分大小写[`setCaseSensitivity`](http://doc.qt.digia.com/qt/qregexp.html#setCaseSensitivity)。如果将其设置为`Qt::CaseInsensitive`，则可以稍微缩短正则表达式：

```
"^(?:[0-9a-f]{2} ){0,31}[0-9a-f]{2}$" 
```

# javascript - 在 node.js 下使用 dojo 1.8 dojo/request 失败并出现 TypeError: Object has no method 'substring'

> ID：14584597
> 
> 赞同：1
> 
> 时间：2013-01-29T13:53:04.153
> 
> 标签：javascript, node.js, dojo

我试图让 dojo 1.8 的 dojo/request 在 OS X 10.8.2 Mac 上的 node.js v0.8.17 下工作。

我尝试了来自[dojotoolkit.org](http://dojotoolkit.org/)的两个示例，这两个示例都失败并出现相同的错误：

```
module.js:236
  var start = request.substring(0, 2);
                      ^
TypeError: Object require,dojo/request has no method 'substring'
    at Function.Module._resolveLookupPaths (module.js:236:23)
    at Function.Module._resolveFilename (module.js:328:31)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/Users/chris/src/bsn/INF/spikes/dojo_1-8/example/example.js:12:1)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12) 
```

这是基于[dojo 教程](http://dojotoolkit.org/documentation/tutorials/1.8/ajax/)的第一个示例：

```
// dojo-release-1.8.3-src is installed in the same directory as this script

dojoConfig = {
    baseUrl: ".",
    packages:[{name: 'dojo', location: 'dojo'}],
    deps:['dojo/request', 'dojo/date']
};

require('./dojo/dojo.js');

console.log("I can call dojo/date functions no problem:");
console.log("e.g. Time Zone is:" + dojo.date.getTimezoneName(new Date()));

console.log("But when I try to use dojo/request it fails:");

// Following taken from:
// http://dojotoolkit.org/documentation/tutorials/1.8/ajax/

require(["dojo/request"], function(request){
    request("helloworld.txt").then(
        function(text){
            console.log("The file's contents is: " + text);
        },
        function(error){
            console.log("An error occurred: " + error);
        }
    );
}); 
```

这是从[dojo 参考指南](https://dojotoolkit.org/reference-guide/1.8/dojo/request/node.html#id5)中摘录的第二个：

```
// dojo-release-1.8.3-src is installed in the same directory as this script

dojoConfig = {
    baseUrl: ".",
    packages:[{name: 'dojo', location: 'dojo'}],
    deps:['dojo/request', 'dojo/date']
};

require('./dojo/dojo.js');

// Following is taken from:
// https://dojotoolkit.org/reference-guide/1.8/dojo/request/node.html#id5

require(['require', 'dojo/request'], function(require, request){
  var http = require.nodeRequire('http'),
    timeout;

  var server = http.createServer(function(request, response){
    var body = '{ "foo": "bar" }';
    response.writeHead(200, {
      'Content-Length': body.length,
      'Content-Type': 'application/json'
    });
    response.write(body);
    response.end();
  });

  server.on('close', function(){
    if(timeout){ clearTimeout(timeout); }
  });

  server.on('listening', function(){
    request.get('http://localhost:8124', {
      handleAs: 'json',
      headers: { 'Range': '1-2' },
      timeout: 1000
    }).then(function(data){
      console.log(data);
      server.close();
    }, function(err){
      console.log(err);
      server.close();
    });
  });

  server.listen(8124);
}); 
```

我不明白为什么在第一个示例中对 dojo.date 的调用可以正常工作，但 dojo.require 却不行。

有任何想法吗？

谢谢

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:20:56.007

因此，多亏了[dojo-interest](http://dojotoolkit.org/community/)邮件列表上的几个线程、bpayton、Kenneth G. Franqueiro 和 kitsonk 的支持，我能够解决这个问题。

为了让 dojo/request 工作，您需要从模块中要求它，在这种情况下，我将其称为“helloworld.js”，因为它正在请求一个名为“helloworld.txt”的文档：

```
// Following taken from:
// http://dojotoolkit.org/documentation/tutorials/1.8/ajax/

require(["dojo/request"], function(request){
    request("helloworld.txt").then(
        function(text){
            console.log("The file's contents is: " + text);
        },
        function(error){
            console.log("An error occurred: " + error);
        }
    );
}); 
```

然后将此模块包含在您的 dojoConfig deps 数组中：

```
// dojo-release-1.8.3-src is installed in the same directory as this script

dojoConfig = {
    baseUrl: ".",
    packages:[{name: 'dojo', location: 'dojo'}],
    deps:['dojo/request', 'dojo/date', 'helloworld.js']
};

require('./dojo/dojo.js');

console.log("I can call dojo/date functions no problem:");
console.log("e.g. Time Zone is:" + dojo.date.getTimezoneName(new Date()));

console.log("And now when I try to use dojo/request it works:"); 
```

现在从节点运行它给了我：

```
arnosgrove:example chris$ node useRequest.js 
I can call dojo/date functions no problem:
e.g. Time Zone is:GMT
And now when I try to use dojo/request it works
The file's contents is: <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
</body></html> 
```

这是我希望看到的。

# web-services - 使用axis2为http请求标头设置内容类型的问题

> ID：14584600
> 
> 赞同：1
> 
> 时间：2013-01-29T13:53:15.077
> 
> 标签：web-services, axis2, content-type, webservice-client

我有一个访问服务（基于 Axis2）的 Web 服务客户端代码。我尝试使用以下代码更改请求标头中的内容类型。

```
ServiceClient serviceClient = stub._getServiceClient();
Options options = serviceClient.getOptions();
options.setProperty(HTTPConstants.CHUNKED, "true");
options.setProperty(Constants.Configuration.ENABLE_HTTP_CONTENT_NEGOTIATION,"true");
options.setProperty(Constants.Configuration.MESSAGE_TYPE,"text/xml"); 
```

但是上面的代码不适用于内容类型`text/xml`。但是当我使用内容类型时它可以工作。`application/xml`我无法将内容类型设置为`text/xml`。

有人可以给我一个解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:31:39.520

您的客户端可能使用错误的 SOAP 版本来格式化其请求。`text/xml`是 SOAP 1.1 内容类型。`application/soap+xml`是 SOAP 1.2 的内容类型。

[此页面](http://www.keith-chapman.org/2009/02/axis2-how-to-set-soap-version-on-client.html)说明如何更改 SOAP 版本。

```
serviceClient.getOptions().setSoapVersionURI(
              org.apache.axiom.soap.SOAP11Constants.SOAP_ENVELOPE_NAMESPACE_URI); 
```

例如，将 SOAP 版本设置为 1.1。

# wso2 - 同一 Carbon 实例上的 WSO2 ESB 和 GReg

> ID：14584602
> 
> 赞同：2
> 
> 时间：2013-01-29T13:53:24.297
> 
> 标签：wso2, wso2esb, wso2carbon, wso2greg

在通过 Feature Install 安装了 GReg 和 ESB 之后，我已经安装了 WSO2 AS。还可以。

但现在我想知道如何使用相同的 WSO2 应用程序服务器配置 GReg 和 ESB。

例如，我想按照本文的模式#2 或模式#3 配置 ESB 和 GReg，[但](http://wso2.org/library/tutorials/2010/04/sharing-registry-space-across-multiple-product-instances) 考虑到 ESB 和 GReg 安装在同一个 WSO2 AS 实例中。

那是一个正确的场景吗？或者我必须始终安装在单独的 AS 中？

问候！

奥斯卡

![在此处输入图像描述](../Images/0fa6628fc5262dba0605d08ec8b63591.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:28:38.887

当您需要跨多个服务器实例共享注册表空间时，可以使用这些模式。通用配置注册表空间用于在同一产品的多个实例之间共享配置详细信息。一个公共治理注册空间用于在平台中的多个产品之间共享元数据。

在您描述的设置中，由于 ESB 和 AS 产品安装在同一台服务器中，因此无需共享注册表空间。

只有当这些产品作为单独的服务器实例运行时，才需要共享注册表空间。

您对所描述的设置有什么特别的原因/要求吗？

问候，阿娇

# c# - 如何使用 iTextSharp 在 pdf 中更改添加图像的位置

> ID：14584603
> 
> 赞同：0
> 
> 时间：2013-01-29T13:53:26.693
> 
> 标签：c#, itextsharp

我想将图像位置更改为 pdf 的右上角作为徽标，此代码使我的图像位于左上角，并在其上写了一些文字：

```
string oldFile = @"D:\Source pdf\Source.pdf";
        string newFile = @"D:\Result pdf\Result.pdf";

        string imagepath = @"D:\Source pdf\Myiamge.jpg";
        Console.WriteLine("iText Demo");

        PdfReader reader = new PdfReader(oldFile);
        Rectangle size = reader.GetPageSizeWithRotation(1);
        Document document = new Document(size);

        FileStream fs = new FileStream(newFile, FileMode.Create, FileAccess.Write);
        PdfWriter writer = PdfWriter.GetInstance(document, fs);
        document.Open();

        iTextSharp.text.Image instanceImg = iTextSharp.text.Image.GetInstance(imagepath);
        document.Add(instanceImg);

        PdfContentByte cb = writer.DirectContent;
        BaseFont bf = BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
        cb.SetColorFill(BaseColor.DARK_GRAY);
        cb.SetFontAndSize(bf, 8);

        PdfImportedPage page = writer.GetImportedPage(reader, 1);
        cb.AddTemplate(page, 0, 0);

        document.Close();
        fs.Close();
        writer.Close();
        reader.Close(); 
```

# c# - Ajax TabContainer 在回发时间歇性消失

> ID：14584606
> 
> 赞同：1
> 
> 时间：2013-01-29T13:53:30.110
> 
> 标签：c#, javascript, jquery, asp.net, css

我正在用 C# ASP.net 开发一个 GIS Web 应用程序（映射）。

我有一个 Ajax TabContainer，其中包含几个带有表格的 TabPanel。该表包含其他内容，例如地图窗口、比例尺等（均来自 ESRI WebAdf 工具包）。

这是我的表格的精简版，没有其他内容......

```
<table id="MainTable>

<tr>
<td>
   <ajax:TabContainer runat="server" ActiveTabIndex="0" id="TabContainer"  CssClass="ajax__tab_xp">  

    <ajax:TabPanel runat="server" HeaderText="Online Mapping Service" ID="TabPanel1">

</ajax:TabPanel>

<ajax:TabPanel ID="TabPanel2" runat="server" HeaderText="Postcode">

    </ajax:TabPanel>

    <ajax:TabPanel ID="TabPanel3" runat="server" HeaderText="Coordinates">
        <ContentTemplate>                                      

  </ajax:TabPanel>

   </ajax:TabContainer> 

  </td>
  </tr>

  </table> 
```

在运行时回发时，我的 Tabcontainer 有时会消失。此问题不是特定于浏览器的。

到目前为止，我尝试过没有成功...

1.  使用 TabContainer 的相对定位设置 Z-Index
2.  包括一个 JQuery 脚本来“显示”TabContainer ...

    ```
     <script type="text/javascript" language="javascript">

        $(document).ready(function() {
        $("#TabContainer").show();

        });

       </script> 
    ```

我可以在后面的代码中包含一些 C# 吗？...

```
Public void page_Load(object sender, EventArgs e)
{
   TabContainer.show()
} 
```

相当新的编程和试图弄清楚如何“总是显示”或“总是在”TabContainer。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:13:04.330

我不确定这是否是因为您在将代码发布到此处之前已对其进行了清理，但您缺少标签。

您的 aspx 上的代码应如下所示：

```
<AjaxToolkit:TabContainer ID="TabContainer" runat="server">
    <AjaxToolkit:TabPanel ID="TabPanel1" runat="server">
        <ContentTemplate>
            Your asp/html code goes here
        </ContentTemplate>
    </AjaxToolkit:TabPanel>
 </AjaxToolkit:TabContainer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:17:09.700

好的，整理好了。AJAX 工具包没有回发客户端存在问题...

```
<script language="javascript" type="text/javascript">

        // Solution to sys.invalidoperationexception bug
        Sys.Application.initialize = function Sys$_Application$initialize() {
            if (!this._initialized && !this._initializing) {
                this._initializing = true;
                var loadMethodSet = false;
                var initializeDelegate = Function.createDelegate(this, this._doInitialize);
                if (document.addEventListener) {
                    loadMethodSet = true;
                    document.addEventListener("DOMContentLoaded", initializeDelegate, false);
                }
                if (/WebKit/i.test(navigator.userAgent)) {
                    loadMethodSet = true;
                    this._load_timer = setInterval(function() {
                        if (/loaded|complete/.test(document.readyState)) {
                            initializeDelegate();
                        }
                    }, 10);
                }
                else {
                    /*@cc_on@*/
                    /*@if (@_win32)
                    loadMethodSet = true;
                    document.write("<script id=__ie_onload defer src=BLOCKED SCRIPTvoid(0)><\/scr" + "ipt>");
                    var deferScript = document.getElementById("__ie_onload");
                    if (deferScript) {
                        deferScript.onreadystatechange = function() {
                            if (this.readyState == "complete") {
                                initializeDelegate();
                            }
                        };
                    }
                    /*@end@*/
                }

                // only if no other method will execute initializeDelegate is
                // it wired to the window's load method.
                if (!loadMethodSet) {
                    $addHandler(window, "load", initializeDelegate);
                }
            }
        }
        Sys.Application._doInitialize = function Sys$_Application$_doInitialize() {
            if (this._load_timer !== null) {
                clearInterval(this._load_timer);
                this._load_timer = null;
            }

            Sys._Application.callBaseMethod(this, 'initialize');

            var handler = this.get_events().getHandler("init");
            if (handler) {
                this.beginCreateComponents();
                handler(this, Sys.EventArgs.Empty);
                this.endCreateComponents();
            }
            this.raiseLoad();
            this._initializing = false;
        }

        Sys.Application._loadHandler = function Sys$_Application$_loadHandler() {
            if (this._loadHandlerDelegate) {
                Sys.UI.DomEvent.removeHandler(window, "load",
                  this._loadHandlerDelegate);
                this._loadHandlerDelegate = null;
            }
            this._initializing = true;
            this._doInitialize();
        }         

</script> 
```

# r - 使用 R 中的不同索赔率计算向保单持有人收取的保费

> ID：14584614
> 
> 赞同：0
> 
> 时间：2013-01-29T13:53:52.517
> 
> 标签：r, poisson

我正在使用泊松过程计算使用 8 种不同的索赔率（提出索赔的概率）向保单持有人收取的保费。使用此代码的值是：568.48 625.44 684.34 732.58 772.40 802.90 832.46 851.66 这些值与我在 Excel 中得到的正确值和理论上计算的值不同：517.4 550.26 601.14 650.96 705.86 757.4 4 796.1 任何人都可以尝试正确的 R 代码 8296 来获得这些值。 ?

```
a <- array(0:0,dim=c(21,5000)) # over time period t=21, 5000 policy holders
d<-array(1:5) 
e<-array(1:5) # five discount levels used
p<-array(1:8) # premium charged for 8 separate claim rates
z=0
e[1]=1 # discount 0%
e[2]=.8 # discount 20%
e[3]=.7 # discount 30%
e[4]=.6 # discount 40%
e[5]=.5 # discount 50%

for (l in seq(0.1,0.8,.1)){ # claim rates 0.1,0.2,0.3...0.8
  for (j in 1:20){
    for (i in 1:5000) {
      b<-min(2,rpois(1,l))
      if (b==2) {a[j+1,i]=0}     # b is the number of claims made, if 2 or more, drop down to 0% discount
      if (b==0) {a[j+1,i]=min(5,a[j,i]+1)} # if 0 claims made, go to next level of discount
      if (b==1) {a[j+1,i]=max(0,a[j,i]-1)} # if 1 claim made, drop back one discount level
    }
  }
  for (k in 1:5){
    d[k]=1000*e[k]*(length(subset(a[5,],a[5,]==k-1))/5000)
  }
  z=z+1;p[z]=sum(d)
}
p   # premium charged at each claim rate 0.1,0.2, ... , 0.8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:41:01.023

关于折扣级别，您的代码中有一个小问题。您有 5 个折扣级别，0%、20%、30%、40% 和 50%。但是，在您的循环中，您允许 6：因为您将拥有 2 个或更多索赔的人设置回 0，所以您允许 6 个级别的折扣，0、1、2、3、4、5。当您计算 d 向量时，您从 1:5 开始迭代，但实际上是从 0:4 开始迭代，因为您正在与 k-1 进行比较，这意味着您错过了最高折扣组。

有几种方法可以修复它，但最简单的是更改 if(b==0) 行

```
if (b==0) {a[j+1,i]=min(4,a[j,i]+1)} # if 0 claims made, go to next level of discount 
```

那应该这样做。

另外，从理论的角度来看，为什么你的 a-matrix 有 21 行深（意味着 21 年），但你只迭代前 5 年，然后忽略第 6 年？我会让循环转到 1:20，然后检查第 21 行，而不是第 5 行。我使用的完整代码如下：

```
a <- array(0:0,dim=c(21,5000)) # over time period t=21, 5000 policy holders
d<-array(1:5) 
e<-array(1:5) # five discount levels used
p<-array(1:8) # premium charged for 8 separate claim rates
z=0
e[1]=1 # discount 0%
e[2]=.8 # discount 20%
e[3]=.7 # discount 30%
e[4]=.6 # discount 40%
e[5]=.5 # discount 50%

for (l in seq(0.1,0.8,.1)){ # claim rates 0.1,0.2,0.3...0.8
  for (j in 1:20){
    for (i in 1:5000) {
      b<-min(2,rpois(1,l))
      if (b==2) {a[j+1,i]=0}     # b is the number of claims made, if 2 or more, drop down to 0% discount
      if (b==1) {a[j+1,i]=max(0,a[j,i]-1)} # if 1 claim made, drop back one discount level
      if (b==0) {a[j+1,i]=min(4,a[j,i]+1)} # if 0 claims made, go to next level of discount
    }
  }    
  for (k in 1:5){
    d[k]=1000*e[k]*(length(subset(a[21,],a[21,]==(k-1)))/5000)
  }
  z=z+1;p[z]=sum(d)
}
p 
```

# .net - 数据库对象可视化

> ID：14584615
> 
> 赞同：0
> 
> 时间：2013-01-29T13:53:55.823
> 
> 标签：.net, sql-server

我正在做一个爱好项目。它是一种可视化数据库对象和依赖项的工具，类似于[http://bit.ly/gmqkvW](http://bit.ly/gmqkvW)中的这个。有谁知道该工具是否使用 SVG 作为图形。我将如何在 .net 中进行类似的可视化？

最亲切的问候！

# android - 是否可以以编程方式打开 GPS 和关闭 GPS？

> ID：14584616
> 
> 赞同：-2
> 
> 时间：2013-01-29T13:53:57.023
> 
> 标签：android

> **可能重复：**
> [如何在 Android 上以编程方式启用或禁用 GPS？](https://stackoverflow.com/questions/4721449/enable-gps-programatically-like-tasker)
> [android GPS以编程方式启用](https://stackoverflow.com/questions/5139620/android-gps-enable-progrmmatically)

需要帮助以在特定时间间隔内以编程方式打开 GPS。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:57:09.767

这是可用于此的代码片段

```
 private void EnableGPS(){   

    String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);   
    if(!provider.contains("gps")){      
        final Intent poke = new Intent();  
        poke.setClassName("com.android.settings","com.android.settings.widget.SettingsAppWidgetProvider");           poke.addCategory(Intent.CATEGORY_ALTERNATIVE);   
        poke.setData(Uri.parse("3"));      
        sendBroadcast(poke);  
   }  } 
```

# javascript - 刷新后使用javascript转到表单的下一个tabindex

> ID：14584618
> 
> 赞同：0
> 
> 时间：2013-01-29T13:54:04.647
> 
> 标签：javascript, forms, tabindex

我目前正在研究一个已经建立的系统，我无法对其进行非常大的改变。每次输入/更新一个字段时，我都需要“自动保存”一个表单。为此，我将一个事件绑定到每个字段的 onblur

```
document.form.submit(); 
```

它进入处理页面，执行需要完成的操作，然后返回表单并从 mysql 检索信息以显示它。重新加载确实有一点“闪光”，但这不是问题。真正的问题是用户丢失了他们的 tabindex，因为页面本质上是重新加载的。因此，当按下选项卡时，表单会被提交并重新加载，并且选项卡会从头开始，而不是像用户期望的那样从下一个字段开始。

是否有使用javascript（无jquery）的解决方案，我可以实现它“记住”用户所在的字段并在提交表单后转到下一个字段？

谢谢你！！

# glibc - 应用程序返回 ENOSYS 38 功能未实现

> ID：14584619
> 
> 赞同：0
> 
> 时间：2013-01-29T13:54:05.037
> 
> 标签：glibc, elf

我要调用的 func1() 具有如下绑定：

```
readelf -Ws /lib/libc.so.6 | grep  func1

    592: 000d8910    40 FUNC    WEAK   DEFAULT   12 func1@@GLIBC_2.13
   1690: 000d8910    40 FUNC    WEAK   DEFAULT   12 func2@@GLIBC_2.13** 
```

这就是原因吗，因为当我`func1()`从我的应用程序调用它时它返回一个`errno =38`，即：`ENOSYS 38 /* Function not implemented */`

我可以以某种方式将`func1()`绑定设为 GLOBAL，然后从我的应用程序中调用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:33:10.880

> 这是不是这个原因

不，符号绑定就是能够调用函数（您可以调用`GLOBAL`，但不能调用`LOCAL`函数）并能够覆盖定义（您可以将多个已`WEAK`定义的函数链接到单个可执行文件中，而不会出现多重定义的链接器错误）。

一旦你可以调用该函数，它的绑定就超出了想象，它会返回它返回的任何内容。

你得到的原因`ENOSYS`很可能是你的内核太旧了。

# jquery - 在 jQuery 中切换文本？

> ID：14584623
> 
> 赞同：0
> 
> 时间：2013-01-29T13:54:30.090
> 
> 标签：jquery, text, toggle

当您单击它时，我试图使锚点更改它的文本。但不是切换它只是变得不可见并且不起作用。

这是代码：

```
$('a#button').click(function(e) {
    e.preventDefault();
    findListingBoxList.slideToggle('200');

    $(this).toggle(function() {
        $(this).html('Hide All');
    }, function() {
        $(this).html('Show All');
    });
}); 
```

HTML：

```
<a id="button" href="#"></a>
<div id="ListingBox">

        <ul id="furniture">
            <li>Beds</li>
            <li>Chairs</li>
            <li>Tables</li>
            <li>Desks</li>
            <li>Shelves</li>
            <li>Cabinet</li>
            <li>Miscellaneous</li>
        </ul>

        <ul id="games">
            <li>PC</li>
            <li>Mac</li>
            <li>XBOX 360</li>
            <li>Playstation 3</li>
            <li>Nintendo Wii</li>
            <li>PS Vita</li>
            <li>Playstation 2</li>
            <li>Playstation</li>
            <li>Super Nintendo</li>
            <li>Nintendo DS</li>
            <li>Miscellaneous</li>
        </ul>
</div> 
```

我已经用`.html`and试过了`.text`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:03:19.783

`toggle`不推荐使用 event 方法，可以使用`text`方法回调函数，注意 200ms`slideToggle`执行太快。

```
$('#button').click(function(e) {
    e.preventDefault();
    findListingBoxList.slideToggle(600);   
    $(this).text(function(i, currentText){
       return currentText === 'Show All' ? 'Hide All' : 'Show All';
    })
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:58:23.560

`.toggle() event`自 1.8 起已[弃用](http://api.jquery.com/category/deprecated/deprecated-1.8/)

HTML：

```
<a href="#" id="button" class="hide_all">Hide ALL</a>

<div id="find">
  <p>Here is some content</p>
  <p>Here is some content</p>
</div> 
```

JS：

```
var findListingBoxList = $('#find');

var labels = {
  hide: 'Hide ALL',
  show: 'Show ALL'
};

$('#button').click(function(e){

  e.preventDefault();
  if($(this).text() == labels.show) {
    $(this).text(labels.hide);
    findListingBoxList.slideDown();
  } else {
    $(this).text(labels.show);
    findListingBoxList.slideUp();
  }
}) 
```

使用 slideDown/slideUp 允许链接工作，无论其起始状态如何（您可以使用 Show ALL 或 Hide ALL 状态加载页面。）

看看这个演示：[http ://codepen.io/ByScripts/pen/mbekK](http://codepen.io/ByScripts/pen/mbekK)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T14:03:58.040

首先，请记住，您的切换事件已在最新的 jquery 中删除，并且从 v 1.8 开始已弃用。

此外，在您的代码中，您仅在第一次单击按钮后才将切换事件绑定到您的按钮。而不是你应该做这样的事情：

```
$('a#button').click(function(e) {
    e.preventDefault();
    findListingBoxList.slideToggle('200');

}).toggle(function() {
        $(this).html('Hide All');
    }, function() {
        $(this).html('Show All');
    }); 
```

最后一件事，它应该在`findListingBoxList`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T14:01:36.763

```
findListingBoxList.slideToggle(200); 
```

你必须给一个整数参数而不是一个字符串，即`'200'`

# arduino - RFID通信协议编程

> ID：14584626
> 
> 赞同：1
> 
> 时间：2013-01-29T13:54:34.937
> 
> 标签：arduino, rfid

我提出了一个[RFID](http://en.wikipedia.org/wiki/Radio-frequency_identification)协议，我想实现它。

标签必须读取、写入并需要计算[PRNG](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)、 XOR 和连接运算符。

标签和阅读器必须生成随机数。

这是协议的两个步骤的示例：

例如，标签必须执行此功能并将其发送给阅读器：

*   阅读器->标签：R1
*   Tag -> Reader: M1= PRNG( R1 || R2)，其中 R1 和 R2 分别是 reader 和 tag 生成的随机数。
*   然后阅读器将M1和随机数发送到服务器（SQL）：阅读器->服务器：R1，R2，M1

当认证成功时，标签和服务器都必须更新它们的数据。

我从哪里开始？我看过很多关于读取和写入数据到 RFID 标签的教程，但它们非常基础。

我看到了许多教程，例如微控制器（[Arduino Uno](http://en.wikipedia.org/wiki/Arduino#ArduinoUno)）执行所有计算，但我希望标签执行，而不是微控制器。

我如何开始，有一些教程吗？

# php - 使用正则表达式捕获多种格式的日期

> ID：14584627
> 
> 赞同：2
> 
> 时间：2013-01-29T13:54:35.590
> 
> 标签：php, regex, date

我正在开发一个应用程序，该应用程序会抓取本地网站以创建即将发生的事件的数据库，并且我正在尝试使用正则表达式来捕获尽可能多的日期格式。

考虑以下句子片段：

*   “2013 年 2 月 2 日星期六的研讨会的重点是 [...]”
*   “2 月 14 日丽笙酒店的情人节特惠”
*   “2 月 15 日星期五，一个特别的好莱坞主题 [...]”
*   “2月8日星期五儿童游戏研讨会”
*   “3 月 9 日至 11 日在旧 [...] 举办工艺研讨会”

我希望能够扫描这些并捕获尽可能多的日期。目前我正在以一种可能有缺陷的方式执行此操作（我不擅长正则表达式），一个接一个地通过几个正则表达式语句，就像这样

```
/([0-9]+?)(st|nd|rd|th) (of)? (Jan|Feb|Mar|etc)/i
/([0-9]+?)(st|nd|rd|th) (of)? (January|February|March|Etcetera)/i
/(Jan|Feb|Mar|etc) ([0-9]+?)(st|nd|rd|th)/i
/(January|February|March|Etcetera) ([0-9]+?)(st|nd|rd|th)/i 
```

我可以将所有这些合并到一个巨大的正则表达式语句中，但似乎在 php 中必须有一种更清洁的方式来执行此操作，也许是第三方库之类的？

编辑：上面的正则表达式可能有错误 - 它只是作为一个例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:59:02.470

我编写了一个函数，它使用以下方法从文本中提取日期[`strtotime()`](http://php.net/strtotime)：

```
function parse_date_tokens($tokens) {
  # only try to extract a date if we have 2 or more tokens
  if(!is_array($tokens) || count($tokens) < 2) return false;
  return strtotime(implode(" ", $tokens));
}

function extract_dates($text) {
  static $patterns = Array(
    '/^[0-9]+(st|nd|rd|th|)?$/i', # day
    '/^(Jan(uary)?|Feb(ruary)?|Mar(ch)?|etc)$/i', # month
    '/^20[0-9]{2}$/', # year
    '/^of$/' #words
  );
  # defines which of the above patterns aren't actually part of a date
  static $drop_patterns = Array(
    false,
    false,
    false,
    true
  );
  $tokens = Array();
  $result = Array();
  $text = str_word_count($text, 1, '0123456789'); # get all words in text

  # iterate words and search for matching patterns
  foreach($text as $word) {
    $found = false;
    foreach($patterns as $key => $pattern) {
      if(preg_match($pattern, $word)) {
        if(!$drop_patterns[$key]) {
          $tokens[] = $word;
        }
        $found = true;
        break;
      }
    }

    if(!$found) {
      $result[] = parse_date_tokens($tokens);
      $tokens = Array();
    }
  }
  $result[] = parse_date_tokens($tokens);

  return array_filter($result);
}

# test
$texts = Array(
  "The focus of the seminar, on Saturday 2nd February 2013 will be [...]",
  "Valentines Special @ The Radisson, Feb 14th",
  "On Friday the 15th of February, a special Hollywood themed [...]",
  "Symposium on Childhood Play on Friday, February 8th",
  "Hosting a craft workshop March 9th - 11th in the old [...]"
);

$dates = extract_dates(implode(" ", $texts));
echo "Dates: \n";
foreach($dates as $date) {
  echo "  " . date('d.m.Y H:i:s', $date) . "\n";
} 
```

这输出：

```
Dates: 
  02.02.2013 00:00:00
  14.02.2013 00:00:00
  15.02.2013 00:00:00
  08.02.2013 00:00:00
  09.03.2013 00:00:00 
```

这个解决方案可能并不完美，当然也有缺陷，但它是解决您问题的一个非常简单的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:39:52.410

对于这种可能很复杂的正则表达式，我倾向于将其分解为可以单独进行单元测试、维护和演进的简单部分。

我使用[REL](http://imaginatio.github.com/REL/)，一种 DSL（在 Scala 中），它允许您重新组装和重用您的正则表达式片段。这样，您可以[像这些日期匹配器](https://github.com/Imaginatio/REL/blob/64481efa05ef62b43d4bc31baff3a66b471d07ec/src/main/scala/matchers/Date.scala)和每个部分的[单元测试一样定义您的正则表达式。](https://github.com/Imaginatio/REL/blob/64481efa05ef62b43d4bc31baff3a66b471d07ec/src/test/scala/matchers/DateSpec.scala)

此外，您的单元/规范测试可以兼作您的正则表达式的文档，指示匹配的内容和不匹配的内容（这对于正则表达式往往很重要）。

在即将发布的 REL (0.3) 版本中，您将能够直接导出正则表达式，例如 PCRE（因此，PHP）风格以独立使用它……目前仅 JavaScript 和 .NET 翻译在 github 存储库中实现。使用最新的（尚未公开提交的）快照，英文字母数字日期正则表达式的 PCRE 风格是这样的：

```
/(?:(?:(?<!\d)(?<a_d1>(?>(?:(?:[23]?1)st|(?:2?2)nd|(?:2?3)rd|(?:[12]?[4-9]|[123]0)th)\b|0[1-9]|[12][0-9]|3[01]|[1-9]|[12][0-9]|3[01]))(?: ?+(?:of )?+))(?>(?<a_m1>jan(?>uary|\.)?|feb(?>ruary|r?\.?)?|mar(?>ch|\.)?|apr(?>il|\.)?|may|jun(?>e|\.)?|jul(?>y|\.)?|aug(?>ust|\.)?|sep(?>tember|t?\.?)?|oct(?>ober|\.)?|nov(?>ember|\.)?|dec(?>ember|\.)?))|(?:\b(?>(?<a_m2>jan(?>uary|\.)?|feb(?>ruary|r?\.?)?|mar(?>ch|\.)?|apr(?>il|\.)?|may|jun(?>e|\.)?|jul(?>y|\.)?|aug(?>ust|\.)?|sep(?>tember|t?\.?)?|oct(?>ober|\.)?|nov(?>ember|\.)?|dec(?>ember|\.)?)))(?:(?:(?: ?+)(?<a_d2>(?>(?:(?:[23]?1)st|(?:2?2)nd|(?:2?3)rd|(?:[12]?[4-9]|[123]0)th)\b|0[1-9]|[12][0-9]|3[01]|[1-9]|[12][0-9]|3[01]))(?!\d))?))(?:(?:,?+)(?:(?:(?: ?)(?<a_y>(?:1[7-9]|20)\d\d|'?+\d\d))(?!\d))|(?<=\b|\.))/i 
```

`fr.splayce.rel.matchers.en.Date.ALPHA`通过使用表达获得`PCREFlavor`（尚未在 GitHub 存储库中）。它只会在有月份时匹配，以字母形式（或）表示`feb`，`feb.`正`february`则`….Date.ALL`表达式也匹配数字形式，比如`2/21/2013`更复杂。

此外，这个特定的正则表达式与您的示例相匹配，但可能仍然对您的需求有所限制：

*   它不包括工作日
*   它将不匹配日期范围（仅匹配`March 9th`）
*   它与第一个年份不匹配，例如`2013, jan. 14th`

# javascript - Javascript，在网站加载之前加载进度条

> ID：14584628
> 
> 赞同：0
> 
> 时间：2013-01-29T13:54:39.683
> 
> 标签：javascript, jquery

我想为我正在制作的 GUI 网站制作一个进度条，我需要一些 javascript 代码来检测网站是否正在加载以及已加载了多少元素/图像以及网站是否已完全加载。我有用 css 制作的进度条，但我不知道如何打开/关闭 js 中的元素。

如何在 js 或使用 Jquery 中完成此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:03:43.723

实现您想要的一些解决方案是：

*   编写一个非常小的页面，除了你最喜欢的 js 框架（可能是 jQuery 吗？）和一个小代码，它使用 AJAX 动态地请求页面的其余元素，计算哪些元素通过加载事件完成或未完成。
*   对于图像，您还可以链接“加载”事件并做一个进度条来计算已加载的总图像/图像。
*   其他两个的其他组合。

# java - 如何从 mysql db 中检索图像并将其显示在内部并在 HTML 中标记？

> ID：14584630
> 
> 赞同：0
> 
> 时间：2013-01-29T13:54:43.757
> 
> 标签：java, html, jsp, servlets

如何从 mysql db 中检索图像并将其显示在 HTML 中的标签内，并且应该将 img 标签放在里面？这是我的代码：它只显示图像。它没有显示除图像以外的任何内容。

提前致谢。

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"      "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<%@ page import="java.io.*"%>
<%@ page import="java.sql.*"%>
<%@ page import="java.util.*"%>
<%@ page import="java.text.*"%>
<%@ page import="javax.servlet.*"%>
<%@ page import="javax.servlet.http.*"%>
<%@ page import="javax.servlet.http.HttpSession"%>
<%@ page language="java"%>
<%@ page session="true"%>
<%
  try{
   //PrintWriter out=response.getWriter();

  out.println("Retrieve Image Example!");
  String driverName = "com.mysql.jdbc.Driver";
  String url = "jdbc:mysql://localhost:3306/";
  String dbName = "db";
  String userName = "root";
  String password = "root";
  Connection con = null;
  Class.forName(driverName);
  con = DriverManager.getConnection(url+dbName,userName,password);
  Statement st = con.createStatement();

 %>
  <table border='1'>
 <tr>
 <td>Name:</td><td>
 </td>My Name</td>
 </tr>
 <tr>
 <td>Image:</td>
 <td width=10px;>
 <%
 PreparedStatement pre1 = con.prepareStatement("select * from image where id="+8);
 ResultSet rs1=pre1.executeQuery();
 while(rs1.next())   
 {byte[] bytearray1 = new byte[4096];  
              int size1=0;  
             InputStream sImage1;  
               sImage1 = rs1.getBinaryStream(2);  
               response.reset();  
              response.setContentType("image/jpeg");  
              response.addHeader("Content-Disposition","filename=logo.jpg");  
              while((size1=sImage1.read(bytearray1))!= -1 )  
                {  
                  response.getOutputStream().write(bytearray1,0,size1);  
                }  
              response.flushBuffer(); 
              sImage1.close();  
              rs1.close();  
           }

    out.println("Retrieved Successfully!");
  pre.close();
  con.close();  
  }
  catch (Exception e){
  out.println(e.getMessage());
  }
%>
</td></tr>
 </table>
</body>
  </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:11:24.130

图像作为单独的请求加载到加载 html 的请求中。因此，您需要：

*   建立在指定元素时使用`src`的URL 编码方案。`img`
*   将 servlet（或类似的）映射到该 URL。servlet 根据在其响应中返回该图像的 URL 的参数加载图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T06:05:03.043

我发现。

**r.jsp:-**

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
  <html>
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

  <title>Insert title here</title>
  </head>
   <body>
  <table border=2>
  <tr><th>DISPLAYING IMAGE</th></tr>
  <tr><td>hi</td></tr>
  <tr><td>
 <img src="retrieve.jsp" width=130 height=130>
 </td></tr>
 </table>
</body>
</html> 
```

**检索.jsp:-**

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
          pageEncoding="ISO-8859-1"%>
           <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"                                "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
     </head>
    <body>
     <%@ page import="java.io.*"%>
 <%@ page import="java.sql.*"%>
 <%@ page import="java.util.*"%>
  <%@ page import="java.text.*"%>
 <%@ page import="javax.servlet.*"%>
 <%@ page import="javax.servlet.http.*"%>
 <%@ page import="javax.servlet.http.HttpSession"%>
 <%@ page language="java"%>
 <%@ page session="true"%>
 <%
   try{
    //PrintWriter out=response.getWriter();

  out.println("Retrieve Image Example!");
  String driverName = "com.mysql.jdbc.Driver";
  String url = "jdbc:mysql://localhost:3306/";
  String dbName = "db";
  String userName = "root";
     String password = "root";
       Connection con = null;
       Class.forName(driverName);
      con = DriverManager.getConnection(url+dbName,userName,password);
        Statement st = con.createStatement();
     PreparedStatement pre1 = con.prepareStatement("select * from image where id="+8);
 ResultSet rs1=pre1.executeQuery();
while(rs1.next())   
 {byte[] bytearray1 = new byte[4096];  
           int size1=0;  
          InputStream sImage1;  
            sImage1 = rs1.getBinaryStream(2);  
            response.reset();  
           response.setContentType("image/jpeg");  
           response.addHeader("Content-Disposition","filename=logo.jpg");  
           while((size1=sImage1.read(bytearray1))!= -1 )  
             {  
               response.getOutputStream().write(bytearray1,0,size1);  
             }  
           response.flushBuffer(); 
          sImage1.close();  
           rs1.close();  
        }
  pre.close();
  con.close();  
  }
 catch (Exception e){
         out.println(e.getMessage());
        }
%>
  </body>
    </html> 
```

# cortex-m3 - 当两个固件使用相同的链接描述文件链接时，为什么复位向量的地址会不同？

> ID：14584631
> 
> 赞同：2
> 
> 时间：2013-01-29T13:54:43.707
> 
> 标签：cortex-m3, linker-scripts, cpputest

我有一个 Cortex-M3 芯片，我正在运行一个使用 eCos 的引导加载程序。引导加载程序在检查固件更新等后，跳转到实际应用程序所在的 ROM 上的另一个位置（BASE_ADDRESS_OF_APP + 0x19）（也使用 eCos 编译）。

现在，我不想运行普通固件，而是想运行为 Cortex-M3 目标编译的 CppUTests。因此，我能够使用 ecos glibc 编译和链接目标平台的测试，而不是实际的操作系统。但是当我使用 JTAG 将它加载到我的板上时，它不会运行。

在使用 arm-eabi-objdump 进行一些调查后，我发现 CppUTest 固件的重置向量位于 0x490 的偏移量处，而普通固件的偏移量为 0x18。我怀疑这就是为什么永远不会执行测试的原因。这个对吗？

当我将它们与相同的链接描述文件链接时，这两个固件怎么可能有不同的起始地址？

如何确保测试程序的起点与应用程序的起点相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:06:07.060

这取决于您的链接器脚本的编写方式，如果您的入口点地址未设置为链接器脚本中的静态位置，那么其他数据/代码可能会在您的入口点之前有效地放入目标文件中移动入口点的位置并确实导致问题。

我通常通过创建一个只有 1 个符号的新部分和如下跳转/分支指令来解决这个问题：

```
.section entryPointSection
b myCodeEntryPoint 
```

然后在您的链接器脚本`entryPointSection`中将引导加载程序跳转到的硬编码地址。

标签可以是普通 .text 部分中的 C 函数（或必要时的程序集标签）的`myCodeEntryPoint`名称，并且可以链接到 jmp 范围内的任何位置。它将成为您的入口点，但您并不真正关心它在哪里，因为链接器应该找到它并正确链接它。

如果您还有其他问题，请考虑发布您的链接描述文件。

# download - Solaris 10 是否有 wget 命令

> ID：14584643
> 
> 赞同：12
> 
> 时间：2013-01-29T13:55:20.203
> 
> 标签：download, wget, solaris-10

Solaris 11 有 wget 命令，就像 Linux 的一样。

Solaris 10 是否有类似 wget 或 wget 的命令？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-29T13:56:32.450

Solaris 10 中的 wget 命令有些隐蔽。

你可以在这里找到它

`/usr/sfw/bin/wget`

这是在 s10u10 上检查的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:00:26.353

我的 Solaris 系统已安装它，但我不控制我们用来安装它的映像。我看到这个：

```
$ which wget                                                                 
/usr/sfw/bin/wget

$ wget --version                                                             
GNU Wget 1.12 built on solaris2.10.

$ pkginfo -l SUNWwgetr                                                       
   PKGINST:  SUNWwgetr
      NAME:  GNU wget - utility to retrieve files from the World Wide Web (root)
  CATEGORY:  system
      ARCH:  i386
   VERSION:  11.10.0,REV=2005.01.08.01.09
   BASEDIR:  /
    VENDOR:  Sun Microsystems, Inc.
      DESC:  GNU wget - a utility to retrieve files from the World Wide Web (root components) 1.12
    PSTAMP:  sfw10-patch-x20100616081054
  INSTDATE:  Dec 13 2012 23:00
   HOTLINE:  Please contact your local service provider
    STATUS:  completely installed
     FILES:        2 installed pathnames
                   1 shared pathnames
                   1 directories
                   1 executables
                   9 blocks used (approx) 
```

# tinymce - TinyMCE 模板位置

> ID：14584645
> 
> 赞同：1
> 
> 时间：2013-01-29T13:55:24.467
> 
> 标签：tinymce

我已经搜索了文档，但无济于事。

在哪里`src`看设置？它是站点的根目录还是`tiny_mce`文件夹？

如果我的模板位于：`/tiny_mce/templates/example.html`，我会将什么作为 SRC？

```
template_templates : [
        {
                title : "Editor Details",
                src : "editor_details.htm",
                description : "Adds Editor Name and Staff ID"
        },
        {
                title : "Timestamp",
                src : "blank.htm",
                description : "Adds an editing timestamp."
        }
], 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:29:51.840

所以事实证明，该位置是相对于运行脚本的位置。

因此，如果您在根文件（本例中为 MasterPage）上调用脚本，则代码为：

```
 template_templates : [
                {
                        title : "Base Home Page",
                        src : "/tiny_mce/temp/Base.htm",
                        description : "Basic Homepage, rotate, etc.."
                }
        ], 
```

所以html文件位于`./tiny_mce/temp/`

# flash - 文本字段字体大小设置问题

> ID：14584649
> 
> 赞同：0
> 
> 时间：2013-01-29T13:55:38.897
> 
> 标签：flash, flash-cs6

![在此处输入图像描述](../Images/0e70e01329b65f608451689f2eebb734.png)

我尝试将文本字段字体大小设置为 200。当我单击文本字段时，没有问题。但我专注于文本字段，自动发生较小的问题。参考下图。

为什么会出现这个问题？我不知道如何解决。当然，当我运行程序时，没有问题。但是为什么在舞台上，字体会自动变小呢？

![在此处输入图像描述](../Images/4b7d30b0885cd09a1b92c07132a6fbd1.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:46:22.117

[Here](https://getsatisfaction.com/adobe/topics/why_the_127px_fontsize_limit) is a discussion of the problem. But as I understood it have to be fixed for flash player 10.

# sql - 检查bash脚本上的变量值是否为空

> ID：14584650
> 
> 赞同：0
> 
> 时间：2013-01-29T13:55:44.687
> 
> 标签：sql, unix, null, if-statement

我有这个脚本，它从 SQL 查询中检索参数（一个数字）并将其分配给一个变量。有两个选项 - SQL 查询找到一个值，然后脚本执行回显“账单周期编号是 $v_bc”，或者它没有找到一个值，它假设回显“未找到账单周期参数”。我的 if 条件有问题。

这就是我想出的：

```
#!/bin/bash

v_bc=`sqlplus -s /@bscsprod <<EOF
set pagesize 0
select billcycle from bc_run
where billcycle not in (50,16)
and control_group_ind is null
and billseqno=6043;
EOF`

if [ -z "$v_bc" ]; then echo no billcycle parameter found                     
else echo "the billcycle parameter is $v_bc"
fi 
```

当 billseqno=6043 时，则表示 v_bc=25，当我运行脚本时，结果为：“billcycle 参数为 25”。这就是我要做的。当我设置 billseqno=6042 时，根据上面的 SQL 查询，v_bc 将没有任何值，因此我想要它做的是 echo "no billcycle parameter found"。相反，我得到

> “账单周期参数是
> 
> > 未选择任何行”。

有什么建议么 ？

非常感谢阿萨夫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:32:05.650

您的代码正在正确检查空值 -`v_bc`只是不为空，即使使用`-s`.

您可以：

*   解析`sqplus`没有返回行时的输出，因此添加以下内容：

    `if [[ "$v_bc" == "no rows were selected" ]]; then v_bc=""; fi`

    这使用`[[ ]]`带有“”的 bash 命令`==`进行模式匹配，因此我们无需担心前导/尾随空格。这不像 dogbane 那样健壮，`SET FEEDBACK OFF`因为“没有选择行”完全有可能成为有效数据。

*   编写一个更好的查询，它总是返回数据，如下所示： [http ://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:594023455752#followup-221571500346463844](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:594023455752#followup-221571500346463844)

    诀窍是重新格式化您的查询并将选择/联合与备用查询一起使用，当您的查询为空时有条件地提供输出：

```
with data as
  (select billcycle from bc_run where [...])
select * from data 
union all
select 'NA', null from dual where not exists (select null from data); 
```

（另请参阅[什么是 Oracle 中的对偶表？](https://stackoverflow.com/questions/73751/what-is-the-dual-table-in-oracle)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:04:55.280

尝试类似的东西

```
if [ "${v_bc:-SHOULDNTHAPPEN}" = "SHOULDNTHAPPEN" ]; then
  echo no billcycle parameter found
else...... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:20:23.343

尝试在 sqlplus 中关闭反馈，以便在未选择任何行时不会得到任何输出：

```
v_bc=`sqlplus -s /@bscsprod <<EOF
SET FEEDBACK OFF
set pagesize 0
select billcycle from bc_run
where billcycle not in (50,16)
and control_group_ind is null
and billseqno=6043;
EOF` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T16:23:25.943

如果变量为空，则将值分配给变量的惯用方法是`=`在参数扩展中使用 an。换句话说，这：

```
: ${v_bc:=no billcycle paramter found} 
```

相当于：

```
test -z "$v_bc" && v_bc='no billcycle paramter found' 
```

在您的情况下，也很容易做到：

```
echo ${v_bc:-no billcycle parameter found} 
```

但是标题中提出的问题并不是您的问题。（因为问题不在于`v_bc`空字符串，而在于它是您不期望的值。）

# sql - MSSQL 导入/导出/复制 IDENTITY_INSERT 问题

> ID：14584651
> 
> 赞同：4
> 
> 时间：2013-01-29T13:55:49.693
> 
> 标签：sql, sql-server

使用 MS SQL Server Management Studio 2008。
我有一个数据库（例如 ip 10.16.17.10 并称为**db1**）和第二个数据库（例如 ip 10.16.17.25 称为**db2**）。

我正在尝试将一个**表**（及其内容）从**db1**复制到**db2**中。
我在两者上都有数据库（但在 db2 中为空）。

问题是无论我如何复制/导出/导入，无论我在**MS SQL Server Management Studio 2008**中设置什么选项，当我单击“表”->“设计”（在**db2**上）时，它总是说“**身份规范**：否”即使 db1 表也有它。

从**db1**我转到 'Tasks'->'export'->'source/db' 和 'destination/db'->'Edit Mapping'->'Enable identity Insert' 并单击它。

但没有喜悦。总是在没有它的情况下导出。**我在db2**
上从 IMPORT 尝试类似的事情。如果我使用复制，类似的事情。

 **我已经阅读了许多关于此的 STACKOVERFLOW 文章，他们都建议将 IDENTITY_INSERT 设置设置为 ON 但是当我在下面运行时：

```
SET IDENTITY_INSERT [dbo].[mytable] ON 
```

该表尚不存在或已复制而没有标识设置，因此请参阅错误：

```
does not have the identity property. Cannot perform SET operation. 
```

我已经尝试将它设置为**db2**的属性（在数据库属性下），但是当我复制/导入/导出时永远不会工作。

非常感谢这里的任何帮助，因为到目前为止，很多 StackOverflow 文章似乎都比我更轻松。

我计划对这个数据库中的另外 50 个左右的表执行此操作，因此希望找到一种不涉及为每个表运行脚本的方法。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:16:25.310

使用导出数据向导将数据从一个表复制到另一个表的过程不会复制架构的所有方面（如标识和自动增量）。如果要复制模式，请将表编写成创建语句，将名称更改为 db2，然后创建它。然后，您应该能够在启用身份插入选项的情况下运行导出/导入向导，并将其插入到复制旧表架构的新表中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T14:53:33.483

最后使用 MS SQL Management Studio 解决了这个问题。

感谢@kevin 在导入数据和导出数据方面的帮助。架构不会跨过传输，但是一旦架构启动，它们是传输数据的最佳方式。

找到使用下面的 MASS 导入/导出数据库表模式的最佳方法（将 SQL 创建脚本保存到文件）：

**任务->生成脚本->要归档的所有表->启用身份**

**在db2**上为模式运行 200kb SQL 文件。

然后运行**​​Import Data** from **db1** to **db2**。

完成，维护所有 Identity_Inserts。

感谢帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T14:03:00.443

根据[错误消息](http://www.sql-server-performance.com/2007/cannot-perform-set-operation/)，我认为您的表没有*列*`IDENTITY`。确保在执行之前`[dbo].[mytable]`确实有一个.`IDENTITY column``SET IDENTITY_INSERT`

```
SET IDENTITY_INSERT [dbo].[mytable] ON 
```

[DEMO1](http://sqlfiddle.com/#!3/ebbb0/1)（尝试在***没有标识列***时将标识设置为 ON ）

```
--Error    
'Table 'T' does not have the identity property. Cannot perform SET operation.: SET IDENTITY_INSERT T ON' 
```

[DEMO2 （当有](http://sqlfiddle.com/#!3/65e37/1)***标识列***时尝试将标识设置为ON ）

```
--No Errors 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T14:29:42.730

请按照以下步骤操作：

从 db1 我转到 'Tasks'->'export'->'source/db' 和 'destination/db'->'Edit Mapping'->'Enable identity Insert' 和 Edit SQL -> 你将能够看到查询表的结构。

在查询例如。ID int NOT NULL，执行下一步 ID int NOT NULL IDENTITY(1,1) 然后继续。

我敢打赌它会奏效。**

# c# - 对象和小数之间的转换？

> ID：14584659
> 
> 赞同：0
> 
> 时间：2013-01-29T13:56:16.563
> 
> 标签：c#, .net, type-conversion

为什么我不能将对象转换为十进制（代码如下，`record["Cost"]`等于`1 (int)`）？

我收到以下错误

***'不能拆箱记录[“成本”]'***

我将使用`TryParse`方法，但我不明白这个错误的根源是什么。

```
cost = (decimal?) record["Cost"]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T13:57:38.177

的值`record["Cost"]`是一个装箱的 int。拆箱转换仅允许您转换为*相同*的类型。（至少在广义上；有一些差异，但它们在这里无关紧要。）

您应该做的是拆箱`int`然后转换为`decimal?`：

```
cost = (decimal?) (int) record["Cost"]; 
```

或者如果`cost`已经声明为 type `decimal?`，您可以使用隐式转换：

```
cost = (int) record["Cost"]; 
```

# php - 创建一个 CSV 上传到 Mysql

> ID：14584661
> 
> 赞同：1
> 
> 时间：2013-01-29T13:56:26.247
> 
> 标签：php, mysql, csv, upload

我在 MYSQL 中有一个表，我希望我的客户可以选择上传 CSV 文件。默认情况下，我希望它添加不存在的信息，并在有信息时自动更新它。

这些是我的专栏：

```
id  customer_name   customer_name_letterhead    customer_notes  systype status  signaltype  verification    address postcode    telephone   mobile  mobiletwo   email   mainarea    installation    Contract    expiration  SPA nservice    maintenance monitoring  MS  certdate 
```

我已经知道我需要在行的标题中包含所有这些的 excel 文档。例如 A1-V1 有这些标题。

编辑：我做了这个：

```
<?PHP    if(isset($_POST['SUBMIT']))
    {
         $fname = $_FILES['sel_file']['name'];

         $chk_ext = explode(".",$fname);

         if(strtolower($chk_ext[1]) == "csv")
         {

             $filename = $_FILES['sel_file']['tmp_name'];
             $handle = fopen($filename, "r");

             while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
             {
                $sql = "INSERT into Customers(id,customer_name,customer_name_letterhead,customer_notes,systype,status,signaltype,verification,address,postcode,telephone,mobile,mobiletwo,email,mainarea    installation,Contract,expiration,SPA,nservice,maintenance,monitoring,MS,certdate) values('$data[0]','$data[1]','$data[2]''$data[3]','$data[4]','$data[5]','$data[6]','$data[7]','$data[8]','$data[9]','$data[10]','$data[11]','$data[12]','$data[13]','$data[14]','$data[15]','$data[16]','$data[17]','$data[18]','$data[19]','$data[20]','$data[21]','$data[22]','$data[23]','$data[24]')";
                mysql_query($sql) or die(mysql_error());
             }

             fclose($handle);
             echo "Successfully Imported";
         }
         else
         {
             echo "Invalid File";
         }   
    }?>
<form action='<?php echo $_SERVER["PHP_SELF"];?>' method='post'>

    Import File : <input type="file" name="sel_file" id="sel_file">
    <input type='submit' name='submit' value='submit'>

</form> 
```

单击提交后，没有任何反应。

这是我的 csv 文件的图片： ![在此处输入图像描述](../Images/eb7ccc26dedbaae8ada9fc832bbcf4f6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:48:18.340

我最终在 YouTube 上搜索了一个确实有帮助的视频。它最终给了我这个：

```
<?PHP   

if(isset($_POST['submit'])) 
{ 
    $file = $_FILES['file']['tmp_name']; 

    $handle = fopen($file,"r"); 

    while(($fileop = fgetcsv($handle,1000, ",")) !== false) 
    { 

    $customer_name             = $fileop[0]; 
    $customer_name_letterhead     = $fileop[1]; 
        $customer_notes         = $fileop[2]; 
        $systype             = $fileop[3]; 
        $status             = $fileop[4]; 
        $signaltype             = $fileop[5]; 
        $verification             = $fileop[6]; 
        $address             = $fileop[7]; 
        $postcode            = $fileop[8]; 
        $telephone             = $fileop[9]; 
        $mobile             = $fileop[10]; 
        $mobiletwo             = $fileop[11]; 
        $email                 = $fileop[12]; 
        $mainarea             = $fileop[13]; 
        $installation            = $fileop[14]; 
        $Contract             = $fileop[15]; 
        $expiration             = $fileop[16]; 
        $SPA                 = $fileop[17]; 
        $nservice            = $fileop[18]; 
        $maintenance             = $fileop[19]; 
        $monitoring             = $fileop[20]; 
        $MS                 = $fileop[21]; 
        $certdate             = $fileop[22]; 

        $sql = mysqli_query($GLOBALS["___mysqli_ston"], "INSERT INTO Customers ( 
            customer_name, 
                    customer_name_letterhead, 
                    customer_notes, 
                    systype, 
                    status, 
                    signaltype, 
                    verification, 
                    address, 
                    postcode, 
                    telephone, 
                    mobile, 
                    mobiletwo, 
                    email, 
                    mainarea, 
                    installation, 
                    Contract, 
                    expiration, 
                    SPA, 
                    nservice, 
                    maintenance, 
                    monitoring, 
                    MS, 
                    certdate 
                    ) VALUES ( 
                   '$customer_name', 
           '$customer_name_letterhead', 
           '$customer_notes', 
           '$systype', 
           '$status', 
           '$signaltype', 
           '$verification', 
           '$address', 
           '$postcode', 
           '$telephone', 
           '$mobile', 
           '$mobiletwo', 
           '$email', 
           '$mainarea', 
           '$installation', 
           '$Contract', 
           '$expiration', 
           '$SPA', 
           '$nservice', 
           '$maintenance', 
           '$monitoring', 
           '$MS', 
           '$certdate' 
                   )"); 

                      if($sql) 
                      { 

                        echo 'Uploaded '. $sql . ' entries'; 
                      }      
    } 
} 

?> 
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" enctype="multipart/form-data">  
    <input type="file" name="file"> 
    <br> 
    <input type="submit" name="submit" value="Upload CSV File">  
</form> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T14:00:13.853

自己没用过 但是你试过吗

[http://php.net/manual/en/function.str-getcsv.php](http://php.net/manual/en/function.str-getcsv.php)

您也可以尝试使用explode on \n将csv分成几行，然后根据,.

一旦你有所有的块将它推入数据库。

# wpf - 禁用父控件时启用子控件

> ID：14584662
> 
> 赞同：7
> 
> 时间：2013-01-29T13:56:30.207
> 
> 标签：wpf, button, hyperlink, disabled-control

我有一个包含超链接的按钮，如下所示：

```
<Button IsEnabled="False">
    <Hyperlink IsEnabled="True">Testing</Hyperlink>
</Button> 
```

我需要启用超链接，但是要禁用按钮。我怎样才能做到这一点？

以上只是导致两个控件都被禁用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-06-23T19:59:37.050

我通过创建一个简单的包装元素来解决这个问题，该元素打破`IsEnabled`了父级的继承链。

框架的默认强制回调检查父`IsEnabled`值并继承它。这个控件设置了一个新的强制回调，它直接返回值而不检查继承。

```
public class ResetIsEnabled : ContentControl
{
    static ResetIsEnabled()
    {
        IsEnabledProperty.OverrideMetadata(
            typeof(ResetIsEnabled),
            new UIPropertyMetadata(
                defaultValue: true,
                propertyChangedCallback: (_, __) => { },
                coerceValueCallback: (_, x) => x));
    }
} 
```

在问题的示例中，它将像这样使用：

```
<Button IsEnabled="False">
  <ResetIsEnabled>
    <!-- Child elements within ResetIsEnabled have IsEnabled set to true (the default value) -->
    <Hyperlink>Testing</Hyperlink>
  </ResetIsEnabled>
</Button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T16:26:17.450

控制`Hyperlink`有奇怪的属性`IsEnabled`。除了你提到的，即从父级的全值继承之外，还有另一个类似的。

`Hyperlink`对于已关闭 ( `IsEnabled="False"`) 的特定控件，设置 ( `IsEnabled="True"`) 不会更新`Hyperlink`属性。解决方案 - 使用相对来源`Hyperlink`（更多[信息](http://siderite.blogspot.com/2011/06/wpf-hyperlinks-and-isenabled-mystery.html)）。

为了解决您的问题，我决定这不是解决问题的标准方法。所以我创建了一个`Class`有自己的依赖属性。它有它的属性`MyIsEnabled`和`MyStyle`。正如你可能从标题中猜到的那样，第一个设置它的属性`IsEnabled`并且`MyStyle`需要指定按钮样式，模拟`IsEnabled="False"`行为。

`SimulateDisable Style`

```
<Style x:Key="SimulateDisable" TargetType="{x:Type Button}">
    <Setter Property="Opacity" Value="0.5" />
    <Setter Property="Background" Value="Gainsboro" />

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Border CornerRadius="4" BorderThickness="1" BorderBrush="DarkBlue" SnapsToDevicePixels="True">
                    <ContentPresenter x:Name="MyContentPresenter" Content="{TemplateBinding Content}" HorizontalAlignment="Center" VerticalAlignment="Center" />
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

`Button`用你的属性定义：

```
<Button Name="MyButton" local:MyClass.MyIsEnabled="False" local:MyClass.MyStyle="{StaticResource SimulateDisable}" Width="100" Height="30" Click="Button_Click">
    <Hyperlink IsEnabled="True" Click="Hyperlink_Click">Testing</Hyperlink>
</Button> 
```

`Listing of MyClass`

```
public class MyClass : DependencyObject
{
    public static readonly DependencyProperty MyIsEnabledProperty;

    public static readonly DependencyProperty MyStyleProperty;

    #region MyIsEnabled

    public static void SetMyIsEnabled(DependencyObject DepObject, bool value)
    {
        DepObject.SetValue(MyIsEnabledProperty, value);
    }

    public static bool GetMyIsEnabled(DependencyObject DepObject)
    {
        return (bool)DepObject.GetValue(MyIsEnabledProperty);
    }

    #endregion MyIsEnabled

    #region MyStyle

    public static void SetMyStyle(DependencyObject DepObject, Style value)
    {
        DepObject.SetValue(MyStyleProperty, value);
    }

    public static Style GetMyStyle(DependencyObject DepObject)
    {
        return (Style)DepObject.GetValue(MyStyleProperty);
    }

    #endregion MyStyle

    static MyClass()
    {
        MyIsEnabledProperty = DependencyProperty.RegisterAttached("MyIsEnabled",
                              typeof(bool),
                              typeof(MyClass),
                              new UIPropertyMetadata(false, OnPropertyChanged));

        MyStyleProperty = DependencyProperty.RegisterAttached("MyStyle",
                          typeof(Style),
                          typeof(MyClass),
                          new UIPropertyMetadata(OnPropertyChanged));
    }

    private static void OnPropertyChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        Button MyButton = sender as Button;
        bool MyBool = GetMyIsEnabled(MyButton);

        if (MyBool == false)
        {
            MyButton.Style = MyClass.GetMyStyle(MyButton);
        }            
    }
} 
```

加上对事件的`Hyperlink`指向`e.Handled = true`，让接下来的事件不会发生。

```
private void Hyperlink_Click(object sender, RoutedEventArgs e)
{
    MessageBox.Show("Hyperlink Click!");

    e.Handled = true;
}

private void Button_Click(object sender, RoutedEventArgs e)
{
    MessageBox.Show("Button Click! Don't show it's!");
} 
```

`Output`

![在此处输入图像描述](../Images/f589df74735f58c40df7041241c4f85e.png)

PS对不起，迟到的答案:)。

# jquery - 如何使用 jQuery 隐藏 div 然后在文档滚动时将其淡入？

> ID：14584666
> 
> 赞同：0
> 
> 时间：2013-01-29T13:56:38.087
> 
> 标签：jquery, html, scroll, hide, fade

我正在尝试在页面加载时使用 jQuery 隐藏 div，但是当您向下滚动到某个点时它会淡入。现在下面的脚本几乎可以做到这一点，我遇到的问题是 div最初在页面加载时可见，我想隐藏它......我似乎无法弄清楚如何。

```
 $(window).bind("scroll", function() {
        if ($(this).scrollTop() > 180) {
            $("#magrig").fadeIn('slow');
        }
        else {
            $("#magrig").stop().fadeOut('fast');
        }
    }); 
```

我尝试将 .hide() 添加到脚本中，但我不知道如何重新格式化它。

我最初是从这里得到的：[Fade in div after scrolling](https://stackoverflow.com/questions/11169612/fade-in-div-after-scrolling)

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:59:09.253

只使用普通的旧 CSS 怎么样，它将隐藏在 pageload 上：

```
#magrig {display:none} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:00:55.210

您可以隐藏`div`页面加载，如下所示：

```
$(document).ready(function() {
    ("#magrig").hide();
}); 
```

或者您可以直接在 CSS 中执行此操作：

```
#magrig {
    /* other CSS entries */
    display:none;
} 
```

# sql - 在 SELECT 结果中显示源表的名称

> ID：14584667
> 
> 赞同：1
> 
> 时间：2013-01-29T13:56:43.693
> 
> 标签：sql

我有一个想要改进的简单 sql 脚本：

```
SELECT * FROM [arachnode.net].[dbo].[Schemes_Discoveries]
SELECT * FROM [arachnode.net].[dbo].[Hosts]
SELECT * FROM [arachnode.net].[dbo].[Extensions_Discoveries]
SELECT * FROM [arachnode.net].[dbo].[Domains_Discoveries]
SELECT * FROM [arachnode.net].[dbo].[Domains] 
```

更多选择语句

我给出了一个预期的结果。但是我希望表的名称出现在结果中，以便我可以区分每个结果。我已经尝试过：“as some-alias-table-name”。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:25:25.593

```
SELECT *, 'Schemes_Discoveries' FROM [arachnode.net].[dbo].[Schemes_Discoveries] 
```

...可能会根据您的数据库管理器进行调整

# jsp - 通过 request.getParameter() 在第二个 Servlet 中恢复的 servlet 之间传递参数

> ID：14584671
> 
> 赞同：0
> 
> 时间：2013-01-29T13:57:12.453
> 
> 标签：jsp, servlets

在我的 jsp 中，我有一个包含以下内容的表单：

```
<form name="myForm" action="/ServletOne">
<input type="text" name="username">
<input type="password" name="password"/>
</form> 
```

在 ServletTwo 中，我有：

```
String username = request.getParameter("username");
String password = request.getParameter("password"); 
```

在 ServletOne 结束时，我需要重定向到 ServletTwo。所以我尝试了：

```
String redirectURI =  "/ServletTwo?"+ request.getQueryString();
response.sendRedirect(redirectURI); 
```

但是 request.getQueryString() 返回 null。那么，在知道 ServletOne 和 ServletTwo 不在同一个 Web 应用程序中的情况下，如何在不丢失用户名和密码参数的情况下重定向到“ServletTwo”。而且我无权修改ServletTwo的代码。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:19:41.160

您可以简单地在 servletone 中修改以下代码：

```
getServletContext().getRequestDispatcher("/ServletTwo").forward(request, response); 
```

# c# - 使用分页符打印 html 文件

> ID：14584672
> 
> 赞同：0
> 
> 时间：2013-01-29T13:57:13.573
> 
> 标签：c#, html, css, printing, printing-web-page

我正在尝试创建一个可以读取 html 文件并打印它的程序/服务。

我需要包括分页符；但不知道如何定义它们或使它们正确打印。

html 文件是我的，所以我可以向它们添加任何元素来表示分页符位置。我在想一个隐藏字段，或者在下一个元素中使用 page-break-before:always css 样式。

我应该如何处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:25:29.370

CSS是要走的路。我建议创建一个类“分页符”：

```
.page-break { page-break-before: always; } 
```

无论您将此类添加到 HTML 元素的何处，都会在该元素之前获得一个分页符（例如，在每个 h1 之前）。本教程几乎涵盖了 CSS 和打印的每个部分：http: [//coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/](http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/)

希望这可以帮助

# wcf - 如何在 wcf 4.0 的 netnamedpipe 中使用双工

> ID：14584677
> 
> 赞同：0
> 
> 时间：2013-01-29T13:57:39.147
> 
> 标签：wcf, named-pipes, duplex, servicehost

有什么方法可以将 netnamedpipe 绑定与 duplex 一起使用？我收到以下错误。

*合同需要双工，但绑定“NetNamedPipeBinding”不支持它或未正确配置以支持它。*

```
 ServiceHost host = new ServiceHost(typeof(MyService));
        NetNamedPipeBinding npb = new NetNamedPipeBinding();
        npb.MaxBufferSize = Int32.MaxValue;
        npb.MaxReceivedMessageSize = Int32.MaxValue;
        npb.OpenTimeout = new TimeSpan(200000);
        npb.CloseTimeout = new TimeSpan(200000);
        npb.SendTimeout = new TimeSpan(200000);
        npb.TransferMode = TransferMode.Streamed;

        host.AddServiceEndpoint(typeof(IMyService), npb, "net.pipe://localhost/MyService");
        host.Open();  // I am getting above error here 
```

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:02:48.163

双工通信与网络命名管道绑定一起工作。尝试删除：

```
npb.TransferMode = TransferMode.Streamed; 
```

# profiling - 合并几个 google-pprof 文件（pproc CPU profiler）

> ID：14584679
> 
> 赞同：1
> 
> 时间：2013-01-29T13:57:48.643
> 
> 标签：profiling, google-perftools, pprof

我想使用 google-perftools（gperftools 的 libprofiler.so）中的 CPU Profiler，如下所述：http: [//gperftools.googlecode.com/svn/trunk/doc/cpuprofile.html](http://gperftools.googlecode.com/svn/trunk/doc/cpuprofile.html)

在我的设置中，我想运行程序进行多次分析（最多 1500 次；每次运行都不同），然后将所有运行（或运行的某些子集）的 pprof 输出合并到单个 pprof 文件中。

我怎样才能做到这一点？

PS：我的程序几乎不使用共享库，因此只会分析单个二进制（elf）文件。

PPS：感谢 Chris，pprof 可以使用多个配置文件：

```
pprof ./program first.pprof.out second.pprof.out ... 
```

# node.js - 使用 passport.js 将本地策略连接到另一个（Facebook、Twitter、Google 等）

> ID：14584680
> 
> 赞同：7
> 
> 时间：2013-01-29T13:57:49.067
> 
> 标签：node.js, authentication, express, oauth, passport.js

我有一个 node.js 应用程序，它使用护照（使用修改后的本地护照作为登录策略）进行身份验证管理。我想允许用户使用护照策略连接他们的社交网络帐户，但是从我可以看到现有的身份验证（在请求对象上）在创建新身份验证时会被覆盖。

我应该如何处理这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T15:48:07.117

当我应该使用passport.authorize 时，我使用了passport.authenticate！

此处的文档：http: [//passportjs.org/guide/authorize/](http://passportjs.org/guide/authorize/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-29T17:04:07.013

我为此创建了一个示例，请参见[https://github.com/fpp/drywall](https://github.com/fpp/drywall)

它允许将一个或多个社交帐户与本地策略用户关联，从社交帐户创建本地策略用户，以及从这些用户添加/删除社交帐户。

目前已实现 twitter 和 github - 只需添加其他护照版本并调整代码示例以获得更多服务。

该示例使用 Node.js 0.8x、express 3.x 和主干.js - 包括来自[http://jedireza.github.com/drywall/](http://jedireza.github.com/drywall/)示例项目的一些基本用户管理。

PS 我无法获得第二条路线（对于相同的社会服务）/授权与使用护照进行身份验证，如护照文件中所述。采用

```
passReqToCallback: true 
```

而是在策略中对用户进行操作（有关更多信息，请参见示例）。

# c++ - 通过按位选择删除分支

> ID：14584681
> 
> 赞同：5
> 
> 时间：2013-01-29T13:57:52.440
> 
> 标签：c++, optimization

有人告诉我代码中的分支

```
int value = //some number;
if(value > some_other_value)
   value *= 23;
else
   value -= 5; 
```

可以通过按位掩码消除（为了启用代码的 SIMD 优化）：

```
const int Mask = (some_other_value-value)>>31;
value =      ((value * 23)&Mask)|((value-5)&~Mask); 
```

但是，我不明白这是如何工作的（即使我了解这里使用了哪些操作以及结果在二进制中的外观）。此外，这是否普遍适用？如果原始代码改为类似

```
if(value & 1 == 1)
   value *= 23;
else
   value -= 5; 
```

删除分支的代码是否仍然相同？否则，面具的目的是什么，我应该如何去创造它？这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:07:40.747

这有效：

```
const int Mask = (some_other_value-value)>>31;
value =      ((value * 23)&Mask)|((value-5)&~Mask); 
```

掩码成为`some_other_value - value`- 的符号位，类似于：

```
if (value > some_other_value) mask = -1; else mask = 0; 
```

你可以用你的第二个例子来实现同样的事情，使用：

```
mask = -(value & 1); 
```

所以，-0 = 0，-1 = 全1。

编辑：我还要记住，如果计算变得太复杂，你不会比分支版本获得任何东西，特别是如果分支是可以合理预测的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:56:05.623

这在最好的情况下是过早的优化，在最坏的情况下是反优化。

如果代码*可以*向量化，它无论如何都会使用条件移动，因为 SIMD 不知道其他任何东西。

但即使对于标量代码，现代编译器通常也会生成条件移动，因此没有分支（除非编译器认为评估两个方程的成本足够高，因此分支效率更高）。

条件移动一直是 RISC 处理器（例如 ARM）上的标准功能，甚至在 x86 上也支持了大约 17 年。在现代处理器上，条件移动将花费与正常移动完全相同的周期数，或者最多额外花费 2-3 个周期。
这显然假设条件已足够早地评估（尽管是否不依赖于该值并不重要，因为乱序执行会隐藏它），但对于任何类型的隐秘优化黑客都是如此也申请。您只是不能使用尚不存在的结果。

如果你能帮上忙，请始终编写乍一看可以理解的代码**，**而不是一些混淆的代码

```
value = (((foo<<31)&bar, ++baz) -= (foo & 7121)) + PHASE_OF_MOON; 
```

那种东西，不仅*不会更快而且可能更慢*，而且还会让审查你的代码的人感到困惑（包括你自己，从现在开始的 6-10 个月内！），是高度不可移植的，而且很可能还会产生不正确的结果你没有预料到的情况。

# c++ - 维护程序的状态

> ID：14584684
> 
> 赞同：-4
> 
> 时间：2013-01-29T13:58:04.057
> 
> 标签：c++, forms

对于大多数人来说，这可能是一个简单的问题，但我喜欢坚持下去。我想知道，大多数银行软件或者说任何商业软件在一天结束时关闭然后重新打开，这些程序如何记住前一天的所有内容？我希望我说清楚，在此先感谢您的指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:14:33.483

这不是黑魔法。

答案是保存它的数据。您可以通过将其放入数据库或写入数据文件来做到这一点。

诀窍是编写程序的方式可以很容易地保证您已经恢复了您认为已保存的状态。

一种常见的方法是使用*序列化*。这意味着您可以使用庞大的数据结构并递归调用它及其包含的对象的“保存”函数。如果您正在利用对象继承和多态性，这将非常直观。当然，您还可以编写一个“加载”函数来执行相反的操作。

您以可以读回的方式写入数据。例如，如果您想写入一个字符串，您可能首先写入它的长度，然后写入它的字符。这样，当您阅读它时，您就知道要分配多少字节。

如果您正在编写二进制文件格式，上述方法是非常标准的。事实上，这是 AVI 等基于块的格式背后的理念。

对于基于文本的，您可以选择以 XML 或 JSON 等流行格式序列化数据。但你只受到你的想象力的限制。

# qt - 当从不同的线程关闭套接字时，Qt QTcpSocket waitForReadyRead 崩溃

> ID：14584689
> 
> 赞同：0
> 
> 时间：2013-01-29T13:58:27.973
> 
> 标签：qt

*   我在单独的线程（pthread）中调用 QTcpSocket 的 waitForReadyRead 方法，
*   现在，如果从主线程关闭套接字，则应用程序在 waitForReadyRead 方法中崩溃。

我正在使用 waitForReadyRead 超时 = -1。

我也不能在我的实现中使用 qt 信号槽机制

有人可以解释一下上述实现中有什么问题吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:09:31.017

来自[QTcpThread 的 Qt 文档](http://qt-project.org/doc/qt-4.8/qtcpsocket.html)：

> 注意：该类中的所有函数都是可重入的。

这意味着从多个线程调用一个对象是不安全的（阅读[此](http://qt-project.org/doc/qt-4.8/threads-reentrancy.html#reentrant)内容以获取更多信息）。即使你让你的代码以某种方式工作，它也可能在旧版本或新版本中崩溃。

如果您真的不能使用信号/插槽，那么您可以在要关闭连接时设置一个标志，并在超时的循环中调用 waitForReadyRead。然后，您可以轮询标志并使用 waitForReadyRead 线程关闭套接字（如果已设置）。

# c++ - 模板参数定义的变量名是不合格的从属名

> ID：14584694
> 
> 赞同：-5
> 
> 时间：2013-01-29T13:58:46.200
> 
> 标签：c++, templates

在这里，我测试检查一个由“typename D”定义的var，是一个不合格的依赖名称。答案是肯定的。因为如果我把它的定义写两次：

```
template<typename D>
class A { 
   D d_field;
   D d_field;

   void func() { d_field = 1000; } 
 }

 int main()
 {
    return 0;
 } 
```

# g++ 会报重定义错误。以便它演示在模板定义中检查了“d_field”。

如果我给出一个类型“double*”来使用这个模板。模板实例化发生，func2 报错，“int can't be convert to double*”。

```
template<typename D>
class A { 
   D d_field;

   void func() { d_field = 1000; } 
 }

 int main()
 {
    A<double*> a; 
    a.func(); 
    return 0;
 } 
```

# 它证明“d_field”将在模板实例化中被检查。

另外，我改成下面这样，g++就可以编译好了。证明gcc是基于c++标准的两阶段查找工作... .

```
template<typename D>
class A { 
   D:: d_field;
   D:: d_field;

   void func() { d_field = 1000; } 
 }

 int main()
 {
    return 0;
 } 
```

# 总之，使用模板参数在模板中定义一个变量，该变量的名称是一个不合格的从属名称。

这样对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:08:23.527

不。变量的名称是本地声明的名称，因此它既不依赖也不依赖。只有编译器必须在模板之外查找的名称才能依赖或不依赖。

# c# - c#中的字符串操作问题

> ID：14584695
> 
> 赞同：0
> 
> 时间：2013-01-29T13:58:47.020
> 
> 标签：c#, string

我在 c# 中遇到字符串操作问题。请检查以下表达式：

```
public static string UNID =  ((Thread.CurrentPrincipal as ClaimsPrincipal).Identity as ClaimsIdentity)
.Claims.Single(c => c.ClaimType.Contains("nameidentifier")).Value.Substring( //issue is here 
```

我想指向子字符串函数中的值，以便在其上应用 indexOf 函数。我尝试了`this`关键字但不起作用：

```
public static string UNID =  ((Thread.CurrentPrincipal as ClaimsPrincipal).Identity as ClaimsIdentity)
.Claims.Single(c => c.ClaimType.Contains("nameidentifier")).Value.Substring(this.IndexOf('/') + 1); 
```

我知道我们可以通过将表达式分解为以下部分来做同样的事情：

```
var value = ((Thread.CurrentPrincipal as ClaimsPrincipal).Identity as ClaimsIdentity)
.Claims.Single(c => c.ClaimType.Contains("nameidentifier")).Value;

var UNID = value.Substring(value.IndexOf('/') + 1); 
```

但是，如果有任何解决方案，就像我尝试使用`this`关键字一样。然后请告诉我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:08:12.773

就我个人而言，我认为将它作为两条单独的线是最好的方法，但如果你死定在一条线上，你可以使用它`Split`。第二个参数表示您只想在第一个分隔符上进行拆分。

```
var UNID = ((Thread.CurrentPrincipal as ClaimsPrincipal).Identity as ClaimsIdentity)
    .Claims.Single(c => c.ClaimType.Contains("nameidentifier"))
    .Value.Split(new[] {'/'}, 2)[1]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T14:14:19.790

这应该有效：

```
public static string UNID =  ((Thread.CurrentPrincipal as ClaimsPrincipal).Identity as ClaimsIdentity).Claims
  .Where(c => c.ClaimType.Contains("nameidentifier"))
  .Select(c => c.Value.Substring(c.Value.IndexOf('/')+1))
  .Single(); 
```

*   首先选择请求的声明类型
*   然后将其转换为正确的值子字符串
*   并取唯一的（预期的）值

# liferay - 如何从高级用户的资产发布者中删除“添加新”按钮？

> ID：14584696
> 
> 赞同：3
> 
> 时间：2013-01-29T13:58:49.350
> 
> 标签：liferay, liferay-6

我需要从 Asset Publisher portlet 中删除 Liferay 6.1 中角色“Power User”的“Add New”按钮。我该怎么做。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:16:27.710

“添加新”按钮仅在用户有权创建 AssetPublisher 中显示的资产之一时出现。您的用户/高级用户似乎有权创建内容 - 这可以是 WebContent、博客或其他内容。例如，这通常发生在他们自己的个人站点中，默认情况下他们具有写入权限。

您可以从高级用户那里删除该权限，使用标准用户（[最近](https://www.liferay.com/web/milen.dyankov/blog/-/blogs/the-power-user-is-back)有一篇关于两者之间区别的博文），或者，如果权限没问题，只是 UI 应该消失或者用钩子覆盖 AssetPublisher UI（删除那里的按钮）或使用 portlet 的“外观/高级样式”部分中的简单 CSS 技巧（“display:none”）

# c# - DynamicData 项目中的 IQueryable

> ID：14584698
> 
> 赞同：0
> 
> 时间：2013-01-29T13:58:55.630
> 
> 标签：c#, linq, dynamic-data

我正在使用动态数据项目，并且正在尝试对 IQueryable 对象执行查询。我想执行一个查询来检查文本是否包含在我的实体的“SubjectID”字段中。

这是我的过滤器类：

```
public partial class SubjectIDFilter : System.Web.DynamicData.QueryableFilterUserControl
    {
        protected void Page_Init(object sender, EventArgs e)
        {
        }

        public override System.Linq.IQueryable GetQueryable(System.Linq.IQueryable source)
        {
            if (string.IsNullOrEmpty(this.textBox.Text))
            {
                return source;
            }

            return source;
        }

        protected void btnSearch_Click(Object sender,
                           EventArgs e)
        {
            OnFilterChanged();
        }

        public override Control FilterControl
        {
            get
            {
                return this.textBox;
            }
        }
    } 
```

代码应放在“GetQueryable”方法中。

我尝试编写“source.Where ...”，但 IDE 智能无法识别源对象上的那些 LINQ 方法（“Select, Where..”）。我不知道如何使用“Expression”对象（用于 CreateQuery 方法）编写查询。

如何对该对象执行简单的 SQL 查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:24:09.697

您应该使用[IQueryProvider.CreateQuery](http://msdn.microsoft.com/en-us/library/bb549139%28v=vs.90%29.aspx)创建表达式并返回它。下面是做你想做的代码：

```
public override IQueryable GetQueryable(IQueryable source)
{
    if (string.IsNullOrEmpty(textBox.Text))
    {
        return source;
    }

    string filterValue = textBox.Text;
    ConstantExpression value = Expression.Constant(filterValue);

    ParameterExpression parameter = Expression.Parameter(source.ElementType);
    MemberExpression property = Expression.Property(parameter, Column.Name);
    if (Nullable.GetUnderlyingType(property.Type) != null)
    {
        property = Expression.Property(property, "Value");
    }

    Expression comparison = Expression.Call(property, typeof(string).GetMethod("Contains", new [] { typeof(string) }), value);
    LambdaExpression lambda = Expression.Lambda(comparison, parameter);

    MethodCallExpression where = Expression.Call(
        typeof(Queryable),
        "Where",
        new[] { source.ElementType },
        source.Expression,
        lambda);

    return source.Provider.CreateQuery(where);
} 
```

此代码取自 Oleg 的 Sych [Understanding ASP.NET Dynamic Data: Filter Templates](http://www.olegsych.com/2010/07/understanding-aspnet-dynamic-data-filter-templates/)博客文章。它很好地了解了动态数据过滤机制的底层原理，我强烈推荐您阅读它。

# c++ - 将 QImage 转换为 YUV420P 像素格式

> ID：14584699
> 
> 赞同：2
> 
> 时间：2013-01-29T13:58:56.183
> 
> 标签：c++, qt

有没有人早点解决过这个问题？我需要简单快速的方法将 QImage::bits() 缓冲区从 RGB32 转换为 YUV420P 像素格式。你能帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T15:38:23.687

[libswscale是](http://www.ffmpeg.org/doxygen/trunk/swscale_8h.html)[ffmpeg](http://ffmpeg.org/)项目的一部分，它优化了执行色彩空间转换、缩放和过滤的例程。如果您真的想要速度，我建议您使用它，除非您无法添加额外的依赖项。我还没有实际测试过这段代码，但这里是一般的想法：

```
QImage img = ...     //your image in RGB32

//allocate output buffer.  use av_malloc to align memory.  YUV420P 
//needs 1.5 times the number of pixels (Cb and Cr only use 0.25 
//bytes per pixel on average)
char* out_buffer = (char*)av_malloc((int)ceil(img.height() * img.width() * 1.5));

//allocate ffmpeg frame structures
AVFrame* inpic = avcodec_alloc_frame();
AVFrame* outpic = avcodec_alloc_frame();

//avpicture_fill sets all of the data pointers in the AVFrame structures
//to the right places in the data buffers.  It does not copy the data so
//the QImage and out_buffer still need to live after calling these.
avpicture_fill((AVPicture*)inpic, 
               img.bits(), 
               AV_PIX_FMT_ARGB, 
               img.width(), 
               img.height());
avpicture_fill((AVPicture*)outpic, 
               out_buffer, 
               AV_PIX_FMT_YUV420P, 
               img.width(),
               img.height());

//create the conversion context.  you only need to do this once if
//you are going to do the same conversion multiple times.
SwsContext* ctx = sws_getContext(img.width(), 
                                 img.height(), 
                                 AV_PIX_FMT_ARGB, 
                                 img.width(), 
                                 img.height(), 
                                 AV_PIX_FMT_YUV420P, 
                                 SWS_BICUBIC, 
                                 NULL, NULL, NULL);

//perform the conversion
sws_scale(ctx, 
          inpic->data, 
          inpic->linesize, 
          0, 
          img.height(), 
          outpic->data, 
          outpic->linesize);

//free memory
av_free(inpic);
av_free(outpic);

//...

//free output buffer when done with it 
av_free(out_buffer); 
```

就像我说的，我没有测试过这段代码，所以它可能需要一些调整才能让它工作。

# sql - 如何计算打开的记录，在 SQL-server-2008-r2 中按小时和天分组

> ID：14584701
> 
> 赞同：1
> 
> 时间：2013-01-29T13:59:02.407
> 
> 标签：sql, sql-server, sql-server-2008-r2

我在 Microsoft SQL Server r2 中有医院病人入院数据，看起来像这样：

```
PatientID, AdmitDate,        DischargeDate
Jones.     1-jan-13 01:37\.   1-jan-13 17:45
Smith      1-jan-13 02:12\.   2-jan-13 02:14
Brooks.    4-jan-13 13:54\.   5-jan-13 06:14 
```

我想按天按小时计算医院里的病人数量（即在

```
1-jan-13 00:00\. 0
1-jan-13 01:00\. 0
1-jan-13 02:00\. 1
1-jan-13 03:00\. 2 
```

我需要在结果中包括没有患者入院的时间。

但是，我无法创建表格，因此制作一个列出所有小时和天数的参考表已经过时了。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:47:28.100

这有点混乱，包括一个临时表，其中包含您提供的测试数据，但是

```
 CREATE TABLE #HospitalPatientData (PatientId NVARCHAR(MAX), AdmitDate DATETIME, DischargeDate DATETIME)
INSERT INTO #HospitalPatientData
SELECT 'Jones.',     '1-jan-13 01:37:00.000',   '1-jan-13 17:45:00.000' UNION
SELECT 'Smith',      '1-jan-13 02:12:00.000',   '2-jan-13 02:14:00.000' UNION
SELECT 'Brooks.',    '4-jan-13 13:54:00.000',  '5-jan-13 06:14:00.000'

;WITH DayHours AS
(
    SELECT 0 DayHour
    UNION ALL
    SELECT DayHour+1
    FROM DayHours
    WHERE DayHour+1 <= 23
),
HospitalPatientData AS
(
SELECT CONVERT(nvarchar(max),AdmitDate,103) as AdmitDate ,DATEPART(hour,(AdmitDate)) as     AdmitHour, COUNT(PatientID) as CountOfPatients
FROM #HospitalPatientData
GROUP BY CONVERT(nvarchar(max),AdmitDate,103), DATEPART(hour,(AdmitDate))
),
Results AS
(
SELECT MAX(h.AdmitDate) as Date, d.DayHour
FROM HospitalPatientData h
INNER JOIN DayHours d ON d.DayHour=d.DayHour
GROUP BY AdmitDate, CountOfPatients, DayHour
)

SELECT r.*, COUNT(h.PatientId) as CountOfPatients
FROM Results r
LEFT JOIN #HospitalPatientData h ON CONVERT(nvarchar(max),AdmitDate,103)=r.Date AND     DATEPART(HOUR,h.AdmitDate)=r.DayHour
GROUP BY r.Date, r.DayHour
ORDER BY r.Date, r.DayHour

DROP TABLE #HospitalPatientData 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:09:09.310

这是一种（丑陋的）方式：

```
;WITH DayHours AS
(
    SELECT 0 DayHour
    UNION ALL
    SELECT DayHour+1
    FROM DayHours
    WHERE DayHour+1 <= 23
)
SELECT B.AdmitDate, A.DayHour, COUNT(DISTINCT PatientID) Patients
FROM DayHours A
CROSS JOIN (SELECT DISTINCT CONVERT(DATE,AdmitDate) AdmitDate
            FROM YourTable) B
LEFT JOIN YourTable C
    ON B.AdmitDate = CONVERT(DATE,C.AdmitDate)
    AND A.DayHour = DATEPART(HOUR,C.AdmitDate)
GROUP BY B.AdmitDate, A.DayHour 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T14:26:12.550

要解决此问题，您需要一个日期时间列表。以下从承认日期交叉加入到 24 小时表中获取此信息。24 小时表的计算来自`information_schema.columns`——在 SQL Server 中获取小数字序列的技巧。

其余的只是此表和小时之间的连接。此版本按小时计算患者，因此例如有人在同一时间入院和出院不计算在内。一般来说，有人在被录取后的下一个小时才会被计算在内：

```
with dh as (
     select DATEADD(hour, seqnum - 1, thedatehour ) as DateHour
     from (select distinct cast(cast(AdmitDate as DATE) as datetime) as thedatehour
           from Admission a
          ) a cross join
          (select ROW_NUMBER() over (order by (select NULL)) as seqnum
           from INFORMATION_SCHEMA.COLUMNS
          ) hours
          where hours <= 24
    )
select dh.DateHour, COUNT(*) as NumPatients
from dh join
     Admissions a
     on dh.DateHour between a.AdmitDate and a.DischargeDate
group by dh.DateHour
order by 1 
```

这也假设每天都有招生。这似乎是一个合理的假设。如果没有，日历表将是一个很大的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T14:22:44.680

这可能会让你开始：

```
BEGIN TRAN

DECLARE @pt TABLE
    (
      PatientID VARCHAR(10)
    , AdmitDate DATETIME
    , DischargeDate DATETIME
    )

INSERT  INTO @pt
        ( PatientID, AdmitDate, DischargeDate )
VALUES  ( 'Jones', '1-jan-13 01:37', '1-jan-13 17:45' ),
        ( 'Smith', '1-jan-13 02:12', '2-jan-13 02:14' )
,       ( 'Brooks', '4-jan-13 13:54', '5-jan-13 06:14' )

DECLARE @StartDate DATETIME = '20130101'
    , @FutureDays INT = 7

;
WITH    dy
          AS ( SELECT TOP (@FutureDays)
                        ROW_NUMBER() OVER ( ORDER BY name ) dy
               FROM     sys.columns c
             ) ,
        hr
          AS ( SELECT TOP 24
                        ROW_NUMBER() OVER ( ORDER BY name ) hr
               FROM     sys.columns c
             )
    SELECT  refDate, COUNT(p.PatientID) AS PtCount
    FROM    ( SELECT    DATEADD(HOUR, hr.hr - 1,
                                DATEADD(DAY, dy.dy - 1, @StartDate)) AS refDate
              FROM      dy
                        CROSS JOIN hr
            ) ref
    LEFT JOIN @pt p ON ref.refDate BETWEEN p.AdmitDate AND p.DischargeDate        
    GROUP BY refDate

ORDER BY refDate

ROLLBACK 
```

# spring - 在 webapp 中审计 JPA 实体：如何获取登录用户？

> ID：14584703
> 
> 赞同：0
> 
> 时间：2013-01-29T13:59:11.137
> 
> 标签：spring, web-applications, jpa, auditing

我对我的 JPA 实体有一个简单的审计要求：保留创建和最后修改日期和作者。作者应该是当前登录的用户。

我想在基类或 JPA 拦截器（没有额外的框架）上使用`@PrePersist`和注释来实现这个。`@PreUpdate`

但是，在这两种情况下，我都需要一种方法来访问当前登录的用户，该用户存储在 HttpSession 中。

如何从我的基实体类或 JPA 拦截器上的方法访问这些信息？

是否有任何最佳实践或任何经过测试的方法来实现这一目标？

我在想，也许添加一个网络拦截器，对于每个请求，将登录的用户对象放入全局可访问的 ThreadLocal 中（例如在 Spring 单例服务中），这样就可以从任何地方查找它......

这听起来是个好主意吗？

欢迎任何建议！

编辑：在此处找到类似的问题（仅在通过右侧的建议发布我自己的问题后才找到）：[在 JPA 实体中自动设置 createdBy 和 updatedBy](https://stackoverflow.com/questions/1865355/setting-createdby-and-updatedby-in-jpa-entities-automatically?rq=1)

结论似乎朝着 ThreadLocal 的方向发展……不过，欢迎任何反馈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:14:09.160

如果您不使用远程 (EJB) 调用，那么使用 ThreadLocal 的想法应该可行，因为大多数容器为每个处理的请求使用一个线程。放置用户和删除用户时需要小心，因为容器可能使用线程池，并且您不希望将用户对象附加到可能用于处理另一个请求的线程上。

# windows-phone-8 - Windows Phone 8 应用程序注册令牌 - 如何卸载

> ID：14584707
> 
> 赞同：1
> 
> 时间：2013-01-29T13:59:26.320
> 
> 标签：windows-phone-8, windows-phone, mdm, in-house-distribution

如果我创建一个[Application Enrollment Token](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj735576%28v=vs.105%29.aspx)，我将获得一个 aet 和 aetx 文件。aetx 文件可以通过邮件发送到手机，也可以在网络浏览器中打开并安装。但是，我无法卸载证书。手机设置或安装 aetx 期间没有选项。

除了将手机重置为出厂设置之外，有什么方法可以卸载手动安装的 AET？

AFAIK 也无法查看或获取扩展信息，例如 AET 的验证日期，除非您已通过 MDM 解决方案安装它。那么你们中有人成功手动删除了 AET 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:16:01.660

这不能手动完成！微软说：

用户通过点击手机上的 AET.aetx 文件手动注册手机以进行公司应用分发后，只要证书有效（一年），手机就会自动注册。通过此流程注册公司应用分发后，用户无法使用手机 UI 取消注册手机。

来源：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj206943%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206943%28v=vs.105%29.aspx)

但是，如果您使用 MDM Api 注册电话（如 Intune 那样），然后取消注册该电话（远程或手动），则 aet 也会被删除。

# java - 从 JavaFx 按钮关闭 JDialog

> ID：14584709
> 
> 赞同：1
> 
> 时间：2013-01-29T13:59:34.513
> 
> 标签：java, swing, javafx-2

我需要从我的 FXML 文件中定义的 JavaFx 按钮关闭我的 JDialog。我发布了由主应用程序调用的类的代码：

**ExampleWindow.java**

```
public class ExampleWindow extends JDialog 
{
@FXML
Button closeButton;

public ExampleWindow()
{
}

public void initAndShowGUI()
{
    final JFXPanel fxPanel = new JFXPanel();
    add(fxPanel);

    Platform.runLater(new Runnable()
    {
        @Override
        public void run()
        {
            AnchorPane parent = null;
            FXMLLoader fxmlLoader = new FXMLLoader();

            fxmlLoader.setRoot(this);
            try {
                parent = fxmlLoader.load(getClass().getResource("WindowControlPanel.fxml"));
            }
            catch (IOException e) {
                e.printStackTrace();
            }

            scene = new Scene(parent);
            fxPanel.setScene(scene);
        }
    });
}

public void onAction(ActionEvent ac)
{
this.dispose();
} 
```

}

方法 onAction 由 JavaFx Button 调用（在 FXML 文件上）

**窗口控制面板.fxml**

```
<AnchorPane id="AnchorPane" fx:id="windowPanel" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="50.0" prefWidth="1024.0" style="-fx-border-color: white, grey; -fx-border-width: 2, 1; -fx-border-insets: 0, 0 1 1 0" xmlns:fx="http://javafx.com/fxml" fx:controller="ExampleWindow">
<children>
<FlowPane alignment="CENTER_RIGHT" columnHalignment="CENTER" prefHeight="50.0" prefWidth="1024.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
  <children>
    <Button fx:id="closeButton" mnemonicParsing="false" onAction="#onAction" prefHeight="35.0" prefWidth="100.0" text="Close">
      <FlowPane.margin>
        <Insets bottom="5.0" left="20.0" right="20.0" top="5.0" />
      </FlowPane.margin>
    </Button>
  </children>
</FlowPane>
</children>
</AnchorPane> 
```

当我按下 closeButton 时，方法 onAction 被正确调用，但我的 JDialog 没有关闭。有任何想法吗？我哪里错了？

# c# - 在 LINQ 中使 UNION 查询更高效

> ID：14584711
> 
> 赞同：3
> 
> 时间：2013-01-29T13:59:37.710
> 
> 标签：c#, linq

我目前正在开发一个利用 EF 的项目，我想知道是否有更有效或更清洁的方法来处理我下面的内容。

在 SQL Server 中，我可以通过执行以下操作来获取我想要的数据：

```
SELECT tbl2.* FROM 
dbo.Table1 tbl
INNER JOIN dbo.Table2 tbl2 ON tbl.Column = tbls2.Colunm
WHERE tbl.Column2 IS NULL 

UNION

SELECT * FROM 
dbo.Table2
WHERE Column2 = value 
```

非常直截了当。但是在 LINQ 中，我有一些看起来像这样的东西：

```
var results1 = Repository.Select<Table>()
            .Include(t => t.Table2)
            .Where(t => t.Column == null);

var table2Results = results1.Select(t => t.Table2);
var results2 = Repository.Select<Table2>().Where(t => t.Column2 == "VALUE");

table2Results  = table2Results.Concat(results2);

return results2.ToList(); 
```

首先，包含此代码的方法的返回类型是 IEnumerable<Table2> 类型，因此首先我返回所有 Table2 关联，其中 Table1 中的列为空。然后我必须选择我的 Table2 记录，以便我有一个 IEnumerable 类型的变量。其余代码的作用相当简单。

这对我来说似乎非常健谈，而且我认为，有一种更好的方法可以实现我想要实现的目标。生成的 SQL 并不糟糕（为了便于阅读，我省略了列列表）

```
SELECT 
[UnionAll1].*
FROM  (SELECT 
[Extent2].*
FROM  [dbo].[Table1] AS [Extent1]
INNER JOIN [dbo].[Table2] AS [Extent2] ON [Extent1].[Column] = [Extent2].[Column]
WHERE [Extent1].[Column2] IS NULL
UNION ALL
SELECT 
[Extent3].*
FROM [dbo].[Table2] AS [Extent3]
WHERE VALUE = [Extent3].[Column]) AS [UnionAll1] 
```

那么有没有一种更清洁/更有效的方法来做我所描述的事情？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:27:26.900

那么，一个问题是您的结果可能不会返回与原始 SQL 查询相同的数据。`Union`将选择*不同的*值，`Union All`将选择*所有*值。首先，我认为您的代码可以像这样更清晰：

```
// Notice the lack of "Include". "Include" only states what should be returned
// *with* the original type, and is not necessary if you only need to select the
// individual property.
var firstResults = Repository.Select<Table>()
                             .Where(t => t.Column == null)
                             .Select(t => t.Table2);

var secondResults = Repository.Select<Table2>()
                              .Where(t => t.Column2 == "Value");

return firstResults.Union(secondResults); 
```

如果您知道在此查询中不可能有重复项，请`Concat`在最后一行使用（这将产生`UNION ALL`您在当前代码中看到的），原因在[此处](http://weblogs.asp.net/fbouma/archive/2009/03/04/choose-concat-over-union-if-possible.aspx)进行了更详细的描述。如果您想要类似于原始查询的内容，请继续使用`Union`上面示例中的内容。

It's important to remember that LINQ-to-Entities is not always going to be able to produce the SQL that you desire, since it has to handle so many cases in a generic fashion. The benefit of using EF is that it makes your code a lot more expressive, clearer, strongly typed, etc. so you should favor readability first. Then, if you actually *see* a performance problem when profiling, then you might want to consider alternate ways to query for the data. If you profile the two queries first, then you might not even care about the answer to this question.

# c - 算法 - 找到纯数

> ID：14584712
> 
> 赞同：1
> 
> 时间：2013-01-29T13:59:38.250
> 
> 标签：c, algorithm, optimization

> 描述：
> 
> 当且仅当 m 可以表示为素数 p (q >= 1) 的 q 次方时，正整数 m 被称为纯数。在这里你的工作很简单，对于给定的正整数 k，找到第 k 个纯数。
> 
> 输入：
> 
> 输入由多个测试用例组成。对于每个测试用例，它包含一个正整数 k (k<5,000,000)。处理到文件末尾。
> 
> 输出：
> 
> 对于每个测试用例，在一行中输出第 k 个纯数。如果答案大于 5,000,000，则输出 -1。
> 
> 样本输入：
> 
> 1
> 
> 100
> 
> 400000
> 
> 样本输出：
> 
> 2
> 
> 419
> 
> -1

原文页面：[http ://acm.whu.edu.cn/learn/problem/detail?problem_id=1092](http://acm.whu.edu.cn/learn/problem/detail?problem_id=1092)

谁能给我一些关于解决这个问题的建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:09:23.860

你已经算出了所有的纯数字，这是棘手的部分。对小于 500 万的排序，然后在结果数组中依次查找每个输入。

要进行优化，您需要有效地找到最多 500 万的所有素数（`q >= 1`问题描述中请注意：每个素数都是纯数），您需要为此使用某种筛子（Erathosthenes 筛子就可以了，查一下） .

您可能可以调整筛子以保留素数的幂，但我希望正常筛分并重新输入幂不会花费很长时间。您只需要计算素数 p 的幂，其中 p <= 的平方根500 万，即 2236，因此与找到素数相比，这应该不会花费很长时间。

用筛子找到数字后，您不再需要对它们进行排序，只需将标记的值从筛子复制到新数组中。

现在查看了您的实际代码：您的 QuickSort 例程是可疑的。它对已经排序的数据表现不佳，并且您的数组中将包含排序数字。改为尝试`qsort`，或者如果您应该自己做所有事情，那么您需要阅读快速排序的枢轴选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:32:07.267

尝试以下方法：

```
static void Main(string[] args)
{

    int max = 5000000;
    int[] dp = new int[max];
    for (int i = 2; i < max; i++)
    {
        if (dp[i] == 0)
        {
            long t = i;
            while (t < max)
            {
                dp[t] = 1;
                t *= i;
            }
            int end = max / i;
            for (int j = 2; j < end; j++)
                if (dp[i * j] == 0)
                    dp[i * j] = 2;
        }
    }

    int[] result = new int[348978];
    int pointer = 1;
    for (int i = 2; i < max; i++)
    {
        if (dp[i] == 1)
            result[pointer++] = i;
    }
} 
```

放入数组为**“1”**标记的纯数字。作为**“2”**标记的非纯（素数）数字。

对于每个输出检查数组范围，如果它在输出**结果 [index]**内，如果不是输出应该是 -1。

# c# - 找不到路径的一部分？

> ID：14584715
> 
> 赞同：4
> 
> 时间：2013-01-29T13:59:55.537
> 
> 标签：c#, .net, xml, io

我有以下代码：

```
fileinfo = new FileInfo(filePathAndName);

if (!fileinfo.Exists)
{
    using (xmlWriter = new XmlTextWriter(filePathAndName, System.Text.Encoding.UTF8))
    {
        xmlWriter.Formatting = Formatting.Indented;
        xmlWriter.WriteStartDocument();
        xmlWriter.WriteStartElement("root");
        xmlWriter.WriteStartElement("objects");
        xmlWriter.WriteEndElement();
        xmlWriter.WriteEndElement();
        xmlWriter.WriteEndDocument();
        xmlWriter.Close();
    }
} 
```

filePathAndName 将是`C:/MyApp%205/Produkter/MyApp%20Utveckling/Host/Orbit.Host.Dev/bin/ExceptionLog.xml.`

该文件夹确实存在，但该文件不存在。在这种情况下，XmlTextWriter 应该创建文件，但它会抛出`Could not find part of the path`.

这可能是我在这里忘记的非常明显的事情，请帮忙。

编辑：这就是路径的真实样子：

```
C:\MyApp 5\Produkter\MyApp Utveckling\Host\Orbit.Host.Dev\Bin 
```

这就是代码中使用的 URL 的生成方式：

```
 (new System.Uri(System.IO.Path.GetDirectoryName(Assembly.GetExecutingAssembly().CodeBase) + "\\ExceptionLog.xml")).AbsolutePath 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:14:56.467

我已经尝试过代码，`ArgumentException`由`XmlTextWriter`构造函数抛出此消息：

> 不支持 URI 格式。

考虑以下代码：

```
// Get the path to assembly directory.
// There is a lot of alternatives: http://stackoverflow.com/questions/52797/
var assemblyPath = new Uri(Assembly.GetExecutingAssembly().CodeBase).LocalPath;
var directoryPath = Path.GetDirectoryName(assemblyPath);

// Path to XML-file.
var filePath = Path.Combine(directoryPath, "ExceptionLog.xml");

using (var xmlTextWriter = new XmlTextWriter(filePath, Encoding.UTF8))
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-02T18:46:08.343

如果您正在与网络上的路径（也称为 UNC 路径）进行交互，则必须使用 Server.MapPath 将 UNC 路径或虚拟路径转换为 ​​.NET 可以理解的物理路径。因此，每当您在网络路径上打开文件、创建、更新和删除文件、打开目录和删除目录时，请使用`Server.MapPath`.

例子：

```
System.IO.Directory.CreateDirectory(Server.MapPath("\\server\path")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T14:13:39.407

试试这个 - 在 filePathAndName 之前添加 @

```
string filePathAndName = @"C:\MyApp 5\Produkter\MyApp Utveckling\Host\Orbit.Host.Dev\Bin\text.xml";

FileInfo fileinfo = new FileInfo(filePathAndName);

if (!fileinfo.Exists)
{
    using (XmlTextWriter xmlWriter = new XmlTextWriter(filePathAndName, System.Text.Encoding.UTF8))
    {
        xmlWriter.Formatting = Formatting.Indented;
        xmlWriter.WriteStartDocument();
        xmlWriter.WriteStartElement("root");
        xmlWriter.WriteStartElement("objects");
        xmlWriter.WriteEndElement();
        xmlWriter.WriteEndElement();
        xmlWriter.WriteEndDocument();
        xmlWriter.Close();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T14:16:23.623

而不是使用[`Uri.AbsolutePath`](http://msdn.microsoft.com/en-us/library/system.uri.absolutepath.aspx)你应该采取[`Path.Combine()`](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)

```
var filepath = @"C:\MyApp 5\Produkter\MyApp Utveckling\Host\Orbit.Host.Dev\Bin"
var filename = Path.Combine(filepath, "ExceptionLog.xml");

var fileInfo = new FileInfo(filename);

if(!fileInfo.Exists)
{
    //ToDo: call xml writer...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T14:17:25.297

使用 Assembly.Location 和 Path.Combine 形成您的 fileNameAndPath 变量：

```
var folder = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
var filePathAndName = Path.Combine(folder, "ExceptionLog.xml"); 
```

# python - 如何在 py2exe 脚本中包含模块依赖项

> ID：14584717
> 
> 赞同：0
> 
> 时间：2013-01-29T14:00:01.063
> 
> 标签：python

我有一个依赖于“PyDes”模块的 Windows 安装程序 my_script.exe（使用 py2exe 从 my_script.py 生成），

当我执行 my_script.exe 时，它​​会抛出一个错误说，

导入错误：pyDes 模块

如何将 pyDes 模块作为对 my_script.py 的依赖项包含在内

我正在使用 py2exe 创建 Windows 安装程序。

python setup.py py2exe

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:34:03.767

尝试添加`'includes': ['PyDes'],`到`setup.py`文件中的相关位置

```
setup(
    # ...
    options = {
        'includes': ['PyDes'],
        },
    # ...
) 
```

假设这`PyDes`是在你的`sys.path`

NB 如果`py2exe`还没有拾取`PyDes`依赖，很可能它还没有拾取任何`PyDes`依赖的东西，所以要为更多`ImportError`的做好准备！只需继续添加它们，`'include'`直到一切正常。

# php - PHP中的登录页面

> ID：14584720
> 
> 赞同：-2
> 
> 时间：2013-01-29T14:00:09.157
> 
> 标签：php, login

我在 php 中创建了一个名为 index.php 的登录页面。现在，当用户登录时，它会重定向到 mypage.php。登录工作正常。但即使没有登录，当我输入 mypage.php 的 url 时，mypage.php 也会打开。我希望用户必须登录才能看到 mypage.php，如果他在浏览器中更改了 url，则应该触发错误消息。该怎么办？

1.localhost/index.php 2.localhost/mypage.php

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:04:38.070

在 index.php 中，一旦用户成功登录，设置会话。就像`$_SESSION['login'] = true;`重定向之前一样。如果登录无效，请使用`$_SESSION['login'] = false;`不要忘记在页面顶部启动会话。`session_start();`

在 mypage.php 中，检查是否设置了该会话。如果未设置，则抛出错误，否则显示页面。

```
session_start();
if(isset($_SESSION['login']) && $_SESSION['login'] == true) {
   echo 'You are welcome'; 
} else {
   echo 'redirecting to login page';
   header('Location: index.php');
   exit;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:03:10.510

您如何存储“登录”状态？

您需要让 mypage.php 检查由 index.php 成功登录过程设置的变量。

你能把你的代码贴在这里，我可以看看

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T14:08:11.823

为了使登录正常工作，您的“安全”页面（我使用该术语是因为没有什么是真正安全的）需要有某种条件验证。换句话说，您需要有某种方法来确定用户是否已登录。

在 PHP 中执行此操作的一种简单方法是在`session`处理用户凭据时设置一个变量。例如：

当用户成功登录时，设置一个会话变量，如下所示：

```
$_SESSION['isLoggedIn'] = true; 
```

然后在 mypage.php 检查变量是否设置：

```
if(!isset($_SESSION['isLoggedIn']) || $_SESSION['isLoggedIn'] != true) {
    header("Location: index.php");
    exit;
} 
```

另请注意，如果您使用会话`session_start();`作为所有文件的第一行，则必须这样做。这允许`$_SESSION`在当前页面上读取在单独页面上设置的变量。

希望这可以帮助。

# php - Php 不会在递归 foreach 循环中中断

> ID：14584726
> 
> 赞同：6
> 
> 时间：2013-01-29T14:00:22.190
> 
> 标签：php, recursion, foreach, return, break

我有一个递归函数，如下所示。

```
public function findnodeintree($cats,$cat_id)
{       
    foreach($cats as $node)
    {                   
        if((int)$node['id'] == $cat_id)
        {       
            echo "finded";
            $finded = $node;
            break;
        }
        else
        {
            if(is_array($node) && array_key_exists('children', $node)){ 
                $this->findnodeintree($node['children'],$cat_id);
            }
        }           
    }
    return $finded;
} 
```

例如

```
$node =$this->findnodeintree($category_Array, 169); 
```

它给了我

```
"founded" 
```

遇到 PHP 错误

```
Severity: Notice

Message: Undefined variable: finded 
```

数组结构就像

```
 [0] => Array
    (
        [id] => 0
        [name] => MAIN CATEGORY
        [depth] => 0
        [lft] => 1
        [rgt] => 296
        [children] => Array
            (
                [0] => Array
                    (
                        [id] => 167
                        [name] =>  CAT 0
                        [depth] => 1
                        [lft] => 2
                        [rgt] => 17
                        [children] => Array
                            (
                                [0] => Array
                                    (
                                        [id] => 169
                                        [name] =>   CAT 1
                                        [depth] => 2
                                        [lft] => 3
                                        [rgt] => 4
                                    )

                                [1] => Array
                                    (
                                        [id] => 170
                                        [name] =>   CAT 2
                                        [depth] => 2
                                        [lft] => 5
                                        [rgt] => 10
                                        [children] => Array
                                            (
                                                [0] => Array
                                                    (
                                                        [id] => 171
                                                        [name] =>    CAT 5
                                                        [depth] => 3
                                                        [lft] => 6
                                                        [rgt] => 7
                                                    )

                                                [1] => Array
                                                    (
                                                        [id] => 172
                                                        [name] =>    CAT 3
                                                        [depth] => 3
                                                        [lft] => 8
                                                        [rgt] => 9
                                                    )

                                            )

                                    ) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T14:27:12.190

要从递归中获得正确的值，您的递归调用不能丢弃返回值。而且由于您想在命中后立即返回递归树，并实际返回匹配的节点，因此您也必须在该点中断循环。

否则，后续的递归调用会覆盖您的变量并返回错误的节点`false`、或`null`。

这应该是有效的：

```
public function findnodeintree($cats,$cat_id)
{       
    foreach($cats as $node)
    {                   
        if((int)$node['id'] == $cat_id){       
            return $node;
        }
        elseif(array_key_exists('children', $node)) {
            $r = $this->findnodeintree($node['children'], $cat_id);
            if($r !== null){
                return $r;
            }
        }           
    }
    return null;
} 
```

注意：我删除了，`is_array`因为此时`$node`必须是一个数组或在第一个分支条件下抛出错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T14:03:56.433

将您的递归行更改为：

```
 $finded = $this->findnodeintree($node['children'],$cat_id); 
```

您希望能够获得该行，如果您回忆该函数，该行必须填充您的变量，否则它将在最后发生的情况下填充，但永远不会将结果返回给您的第一次调用。

因此，`$finded`在您的第一次通话中将是空的或不存在的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:04:47.477

递归调用*findnodeintree*将通过某些循环不会“找到”任何东西，但它们仍然返回一个变量 $finded。除了因为在他们的循环中从未找到它，因此确实没有声明该变量。试试这个：

```
public function findnodeintree($cats,$cat_id)
{       
    $finded = NULL;
    foreach($cats as $node)
    {                   
        if((int)$node['id'] == $cat_id)
        {       
            echo "finded";
            $finded = $node;
            break;
        }
        else
        {
            if(is_array($node) && array_key_exists('children', $node)){ 
                $this->findnodeintree($node['children'],$cat_id);
            }
        }           
    }
    return $finded;
} 
```

# .net - 是否有任何工具可以在 Visual-Studio 中进行代码审查？

> ID：14584728
> 
> 赞同：4
> 
> 时间：2013-01-29T14:00:29.067
> 
> 标签：.net, visual-studio

您是否知道我可以添加到 Visual Studio 并在单独的位置创建一些注释等的任何工具，而无需在我进行代码审查时检查代码并稍后重新播放以完成审查?

例如，我将遍历一个方法调用链，并在某些行上添加一些注释，而无需真正编辑代码。但稍后这个工具将帮助我查看我对代码所做的注释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:17:45.343

**对于 VS 2012：**

[Visual Studio 2012 中的代码审查功能](http://blogs.msdn.com/b/mvpawardprogram/archive/2012/09/04/new-code-review-feature-in-visual-studio-2012.aspx)：Visual Studio 2012 首次包含开箱即用的代码审查流程。

[Visual Studio Premium 和 Ultimate 2012：使用代码审查来提高质量](http://channel9.msdn.com/Series/Visual-Studio-2012-Premium-and-Ultimate-Overview/Visual-Studio-Ultimate-2012-Using-Code-Review-to-Improve-Quality)

对于**其他 VS 版本**，您可以查看以下工具：

1) [Review Assistant——代码审查工具](http://www.devart.com/review-assistant/)：

轻量级同行代码审查工具，Visual Studio 插件

代码审查工具处理的自动代码检查有助于提高编码质量、磨练开发人员的技能并交付缺陷更少的软件。

2) [便签][4]：

它是一个 Visual Studio 插件，可与 IDE 无缝集成，为解决方案中的文档提供便签功能。虽然存在多种用于轻量级代码审查的方法，例如“过肩”审查、通过电子邮件和会议进行审查，但最有效的审查是通过工具进行的，以促进该过程。（编辑：网址不再有效）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:27:01.557

1.  打开 Visual Studio
2.  选择工具...选项...
3.  选择左侧的环境（选项卡）
4.  选择任务列表子项
5.  在这里（右侧）您可以创建任务列表项。
6.  创建一个名为 CREV。（代码审查）
7.  现在您可以浏览代码并添加#CREV 标签和注释。
8.  它们将出现在您的消息中。

稍后，当您进行代码审查时，任务列表项将显示在您的“消息”窗口中。您可以双击它们，它们会将您直接带到您想要讨论的代码中的位置。您可以在覆盖它们时删除评论，或者所有者可以在考虑您的代码审查建议时删除它们。

稍后您可以对这些行进行搜索/替换并相当容易地删除它们。注释根本不影响代码。它们没有被编译。

自由而轻松。 **这是一个绝妙的主意，我相信它会得到大力支持，所以不要错过。**

# sql - 在连接列上过滤

> ID：14584731
> 
> 赞同：3
> 
> 时间：2013-01-29T14:00:47.343
> 
> 标签：sql, oracle

我有这个查询

```
select name || ' ' || sure_name from users 
```

有这个结果

```
'test test'
'test1 test1'
... 
```

我需要为此查询创建一个过滤器。但我想知道创建它的最佳方法是什么。我想出了这个：

```
select name || ' ' || sure_name from users
where name || ' ' || sure_name = 'test test' 
```

但我想知道这个查询的效率如何，因为连接发生了两次（在 select 语句和 where 语句中）

**编辑**

过滤器可能看起来像

```
like '%test t' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:07:44.760

连接本身不是问题，而是对行的访问。

例如，如果您在sure_name 或name 上有索引，则最好使用单独的列进行查询。

```
select name || ' ' || sure_name from users
where name ='test' and sure_name = 'test'; 
```

但是，如果您没有任何索引，请不要打扰。性能将与您的查询大致相同。

但是，如果您添加索引

```
create index fbi_full_name on users(name || ' ' || sure_name) 
```

您的查询将执行得更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T14:08:41.243

在这种情况下，我更喜欢使用子查询来表达这一点：

```
select *
from (select (name || ' ' || sure_name) as newname
      from users
     ) t
where newname = 'test test' 
```

这样，我的`where`逻辑与变量创建逻辑更加隔离。我发现它更易于阅读和维护。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T14:03:03.783

分别测试每个字段，以便如果您有索引，`name`则`sure_name`可以更有效地使用这些索引：

```
SELECT name || ' ' || sure_name
FROM users
WHERE name = 'test'
AND sure_name = 'test' 
```

另请注意，如果名称或名称可能包含空格，那么这两个查询可能会给出不同的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T14:07:28.830

```
select *
from (
   select name || ' ' || sure_name as fullname
   from users
) 
where fullname like '%test t' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T14:13:08.467

试试这个查询：

```
select name || ' ' || sure_name 
from users
where (name || ' ' || sure_name) like '%test t' 
```

# c# - 基本类 - 嵌套类

> ID：14584733
> 
> 赞同：-1
> 
> 时间：2013-01-29T14:00:51.043
> 
> 标签：c#, class

我有这样的事情：

```
public class Ship
{
    public void PositionX_pixels_set1(float _position_x){position_x = _position_x;}

    public class Engine : Ship
    {
        public int engines() { return 5; }
        public class Piston
        {
            public int pistons(){return 5;}
        }
    }

}

void Main
{
    Ship ship = new Ship()
    int a = ship.Engine.Piston.pistons;//why this not working?
} 
```

我不知道我做错了什么。为什么“ship.Engine.Piston.pistons”不工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:01:48.540

因为`Engine`是**类**内部的`Ship`类型，以及它的**成员**。

要解决此问题，可以执行以下操作：

```
public class Ship
{
    public void PositionX_pixels_set1(float _position_x){position_x = _position_x;}

    private void Engine _myEngine = new Engine(); //DEFINE ENGINE MEMBER

    public Engine MyEngine {   //DEFINE A PROPERTY TO ACCESS THAT MEMBER
        get {
           return _myEngine;
        }
    }

    public class Engine : Ship
    {
        public int engines() { return 5; }
        private Piston _myPiston = new Piston();//DEFINE PISTON MEMBER

        public Piston MyPiston {//DEFINE A PROPERTY TO ACCESS THAT 
           get {
               return _myPiston ;
           }
        }

        public class Piston
        {
            public int pistons(){return 5;}
        }

       MEMBER
    }

} 
```

并在使用后像：

```
int a = ship.MyEngine.MyPiston.pistons 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T14:08:09.343

您必须启动子类型（嵌套类型）的对象才能访问其方法，在您的情况下，您没有创建嵌套类型的任何对象，因此您无法访问其方法。

创建 a`new Ship()`时，您没有创建任何`Engine`or `Piston`，因此您无法访问`Pistons()`不存在对象的方法。

# ios - iOS绘图图像问题

> ID：14584737
> 
> 赞同：0
> 
> 时间：2013-01-29T14:01:08.847
> 
> 标签：ios, objective-c, drawing

我正在尝试创建使用 UIScrollView 的应用程序，并且可以在每个图像的适当点上绘制不同的 jpeg 图像。它必须看起来像一个视频，例如：我有第一个 jpeg 图像（背景），并且这个图像（例如图像具有坐标：x = 0，y = 0，尺寸：宽度 = 1024，高度 = 768） ，我发送到 UIScrollView 进行展示。然后我得到另一个带有自己坐标和尺寸的 jpeg 图像（例如 x = 10，y = 10，宽度 = 100，高度 = 100），我需要在“背景”上显示这个“小”图像。我怎么能做到这一点？

或者这个问题的另一种方式。示例：我有第一张图片（免费）的 BMP 数据。如何将此 BMP 数据发送到 UIScrollView 进行显示？\

PS还有一个问题：上述哪种方式在处理和呈现数据时运行得更快？

WBR 马克西姆·塔塔尼克

# apache-camel - Camel PollEnrich 无法正常工作

> ID：14584744
> 
> 赞同：1
> 
> 时间：2013-01-29T14:01:37.687
> 
> 标签：apache-camel

使用 xslt 转换文件后，我必须附加从 ftp 下载的文件。所以我做了以下事情：

```
 from("direct:adobe_productList_incremental")
            .id("routeADOBESPtransformPI_productList")
            .log(LoggingLevel.INFO, "---------Starting file: ${body}")
            .convertBodyTo(InputStream.class)
            .to("xslt:classpath:" + xsltTransformationProductList)
            .log(LoggingLevel.INFO, "---------Transformed file: ${body}")
          .pollEnrich(ftpType+"://"+ftpUsername+"@"+ ftpUrl +":" + ftpPort + ftpPath_incrementalComplete +"?password="+ftpPassword+"&fileName="+ftpFilename_incrementalComplete+"&passiveMode=true&binary=true&delete=false",10000)
            .log(LoggingLevel.INFO, "---------After poll enrich: ${body}")
            .to("file:{{file.root}}{{file.outbox.products_list_incremental}}?fileName={{file.outbox.products_list_incremental.name}}.final"); 
```

直到轮询一切正常（转换正确完成），但在 pollEnrich 之后，当前正文被 ftp 内容覆盖（而不是按应有的方式附加）。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:45:09.330

不，它按设计工作。

默认情况下，内容将被覆盖。如果您需要追加/合并或其他什么，您需要使用自定义聚合策略，并实现执行此操作的代码逻辑。

有关ExampleAggregationStrategy ，请参阅位于[http://camel.apache.org/content-enricher.html](http://camel.apache.org/content-enricher.html)的 Camel 文档。

骆驼文档说

> 聚合策略是可选的。如果您不提供它，Camel 默认将使用从资源中获取的主体。

# python - 使用 python 脚本 (Unix) 解析 .doc (Word) 文件

> ID：14584747
> 
> 赞同：2
> 
> 时间：2013-01-29T14:01:49.497
> 
> 标签：python, ms-word

> **可能重复：**
> [从python中的MS word文件中提取文本](https://stackoverflow.com/questions/125222/extracting-text-from-ms-word-files-in-python)

我想用python中的脚本解析（为了使用表达式执行搜索）一个.doc文件。它在unix机器上运行。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:04:23.570

你可以看看这个项目：[python-docx](https://github.com/mikemaccana/python-docx)。下载完库后，就可以`python example-extracttext.py docfile.docx textfile.txt | grep some-expression`在shell中运行了。当然，您还可以在必要时在 python 代码中进行更复杂的搜索。

python-docx 的缺点是它目前只支持 ms-Word 2007/2008，如果你担心的话，我推荐[antiword](http://en.wikipedia.org/wiki/Antiword)，它支持 Microsoft Word 版本 2、6、7、97、2000、2002 和 2003。其实我已经一直在我的[vimrc](https://github.com/hzheng/vimconf)中使用它，以便能够在 VIM 编辑器中查看 ms-word 文件。虽然它不是 python 脚本，但可以很容易地从 Python 调用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T14:04:44.297

你可以使用，[PyUno](http://wiki.openoffice.org/wiki/PyUNO_samples)

样本，

```
# HelloWorld python script for the scripting framework

def HelloWorldPython( ):
    """Prints the string 'Hello World(in Python)' into the current document"""
#get the doc from the scripting context which is made available to all scripts
    model = XSCRIPTCONTEXT.getDocument()
#get the XText interface
    text = model.Text
#create an XTextRange at the end of the document
    tRange = text.End
#and set the string
    tRange.String = "Hello World (in Python)"
    return None 
```

其他，[PyUNO 示例](http://wiki.openoffice.org/wiki/PyUNO_samples)

# c# - 使用 C#/.net 将 Evernote ENML 转换为 HTML 以在 Web 视图中查看

> ID：14584748
> 
> 赞同：0
> 
> 时间：2013-01-29T14:02:01.517
> 
> 标签：c#, html, .net, offline, evernote

是否有 .net 或 C# 库可以将 ENML 注释及其相关资源转换为 html 以供查看？

这是**离线**查看使用 Evernote 同步协议从 Evernote 同步的本地笔记数据库所必需的。它包含所有笔记的原始 ENML 和附件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T06:25:00.020

我不确定 C# 是否有一个，但 Obj-C 有一个可能很容易转换。

[https://github.com/evernote/evernote-sdk-ios/commit/9c616ddd2cd7c9ea8ff034cc23e7356859f3fcde](https://github.com/evernote/evernote-sdk-ios/commit/9c616ddd2cd7c9ea8ff034cc23e7356859f3fcde)

希望有帮助。

# ruby-on-rails - 从编辑表单中的文本框单击时，semantic_form 文本会清除

> ID：14584750
> 
> 赞同：0
> 
> 时间：2013-01-29T14:02:06.667
> 
> 标签：ruby-on-rails, ruby, forms, semantics, formtastic

我正在使用 gem 'formtastic'、'2.1' 我的模型：employee.rb

```
class Employee < ActiveRecord::Base
  attr_accessible :name, :designation, :about
end 
```

我的观点（edit.html.erb）

```
<%= semantic_form_for [:admin,@employee], :html => { :multipart => true, :class =>"form" } do |f| %>
  <%= f.inputs do %>
    <%= f.input :name, :hint => "should be less then or equal to 30 characters" %>
    <%= f.input :designation %>
    <%= f.input :about, :input_html => { :rows => 5 } %>
  <% end %>

  <%= f.buttons do |button| %>
    <button class="button" type="submit">
    </button>
  <% end %>
<% end %> 
```

现在，当我尝试编辑此页面并单击文本框时，所有文本都被清除了。但我只想编辑（附加或更改数据）我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:54:23.093

嗯，这是我自己的 javascript 的问题，它在模糊上清除文本。

# java - Spring 3.0.4 未正确执行计划任务

> ID：14584751
> 
> 赞同：0
> 
> 时间：2013-01-29T14:02:07.337
> 
> 标签：java, spring

我试图让一个方法每 10 秒执行一次。但是，它只执行一次，然后再也不会执行。这是我的配置

```
 <task:scheduled-tasks>
        <task:scheduled ref="somePollerClass" method="pollMethod" cron="*/10 * * * * *"/>
    </task:scheduled-tasks> 
```

我从 spring [CronSequenceGenerator javadoc](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/scheduling/support/CronSequenceGenerator.html)页面获取了 cron 配置。我不明白为什么它不是每 10 秒执行一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:11:58.043

这是一个环境问题，我的一些文件没有更新。上述配置正常运行。

# android - 读取失败：EBADF（错误文件号）

> ID：14584755
> 
> 赞同：11
> 
> 时间：2013-01-29T14:02:19.197
> 
> 标签：android

当我尝试将外部存储的一个文件复制到文件夹数据库中时，会发生此错误：

> java.io.IOException：读取失败：EBADF（错误文件号）

此错误发生在此方法的 while 行

```
private void copiarBaseDados(InputStream input) throws IOException{
  OutputStream output = new FileOutputStream(ConfiguracoesBaseDados.BANCO_PATH + ConfiguracoesBaseDados.BANCO_NOME);
  int tamanho;
  byte[] buffer = new byte[1024];
  while ((tamanho = input.read(buffer)) > 0) 
       output.write(buffer, 0, tamanho);
  output.flush();
  output.close();
  input.close();
} 
```

知道可能是什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-29T14:12:07.713

在阅读之前检查您的输入（流）是否存在。

另请查看您是否拥有这些权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/> 
```

# selenium - Selenium IDE 和处理条件 JavaScript 弹出

> ID：14584756
> 
> 赞同：0
> 
> 时间：2013-01-29T14:02:22.027
> 
> 标签：selenium, selenium-ide

我想在 Selenium IDE 中处理一个 JavaScript 弹出窗口。我的 Selenium IDE 代码如下：

```
click   id=chk_MITS64906_ZTDLA15RT

click   id=AddDispute

select  id=cmbIssueCategory   label=Billing Support Documents Required

select  id=cmbIssue     label=Customer needs copy of Customer invoice

click   link=Submit

assertAlert     There is Open dispute on following InvoiceNumber=ZTDLA15RT for Category=Billing Support Documents Required 
```

assertalert 是我要处理的弹出窗口。视情况而定，如果有争议警报会出现，否则不会出现。

如果我在没有争议的情况下保留 assertAlert 它将失败，因为警报将不存在。那么我该如何在这两种情况下处理它。

谢谢，尼特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:39:00.987

在 Selenium IDE 中，不使用插件就无法处理条件语句。

对于您的情况，您可以选择`Flow Control`插件。 [阅读这篇文章](https://stackoverflow.com/questions/10498966/how-can-i-organize-if-else-selenium-ide)它会对你有所帮助。

# ruby-on-rails - Ruby On Rails：ActionController::RoutingError 没有路由匹配，动作显示

> ID：14584759
> 
> 赞同：0
> 
> 时间：2013-01-29T14:02:27.977
> 
> 标签：ruby-on-rails, routing

我正在使用此[示例在 Ruby on Rails 中上传文件。](https://github.com/tors/jquery-fileupload-rails-paperclip-example)

我有一些路由问题：

错误：

```
ActionController::RoutingError (No route matches {:action=>"show", :controller=>"cars", :locale=>#<Car id: 19, car_name: "bwl",, created_at: "2013-01-27 19:12:13", updated_at: "2013-01-27 19:12:13">}):
  app/models/arraydb.rb:46:in `to_jq_car' 
```

我发现问题出在 to_jq_car 函数和行中：

```
"delete_url" => car_path(self) 
```

但我不知道如何纠正它。

路线.rb：

```
resources :cars
match '/show', :to =>'car#index'

root :to => 'cars#index' 
```

汽车控制器.rb

```
class CarsController < ApplicationController

  def index
    @cars = Car.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @cars.map{|car| car.to_jq_car } }
    end
  end

  def show
    @car = Car.find(params[:id])

    respond_to do |format|
      format.html 
      format.json { render json: @car }
    end
  end

end 
```

在 car.rb 我有以下功能：

```
 def to_jq_car
    {
      "name" => (read_attribute(:arraydb_name)).split(".").first,
      "url" => car.url(:original),
      "delete_url" => car_path(self),
      "delete_type" => "DELETE",

    }
  end 
```

耙路线：

```
cars GET        (/:locale)/cars(.:format)                                  cars#index {:locale=>/en|de|es|ru|zh_cn|ar/}
POST       (/:locale)/cars(.:format)                                  cars#create {:locale=>/en|de|es|ru|zh_cn|ar/}
new_car GET        (/:locale)/cars/new(.:format)                              cars#new {:locale=>/en|de|es|ru|zh_cn|ar/}
edit_car GET        (/:locale)/cars/:id/edit(.:format)                         cars#edit {:locale=>/en|de|es|ru|zh_cn|ar/}
car GET        (/:locale)/cars/:id(.:format)                              cars#show {:locale=>/en|de|es|ru|zh_cn|ar/}
PUT        (/:locale)/cars/:id(.:format)                              cars#update {:locale=>/en|de|es|ru|zh_cn|ar/}
DELETE     (/:locale)/cars/:id(.:format)                              cars#destroy {:locale=>/en|de|es|ru|zh_cn|ar/}
show            (/:locale)/show(.:format)                                      car#index {:locale=>/en|de|es|ru|zh_cn|ar/}
root            /(:locale)(.:format)                                           cars#index {:locale=>/en|de|es|ru|zh_cn|ar/} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:52:47.833

错误原因：locale param

你有路线

```
cars#index {:locale=>/en|de|es|ru|zh_cn|ar/} 
```

所以 :locale 值必须是列表中的其中一个`en|de|es|ru|zh_cn|ar`

并且您需要找到将此参数传递给控制器​​的位置并进行更正

您可以在 ApplicationController 中使用（或者您可能已经使用）

```
def default_url_options
  {:locale => I18n.locale}
end 
```

# ipad - 带有 UIPickerView 的 UIActionSheet 什么也不显示 iPad

> ID：14584762
> 
> 赞同：1
> 
> 时间：2013-01-29T14:02:38.853
> 
> 标签：ipad, uipickerview

`dateSheet`我在获取用户人口统计信息的ActionSheet 中有一个 UIPickerview 。这是我的代码。

```
 UIPickerView *picker=[[UIPickerView alloc] initWithFrame:CGRectMake(0,125,320,216)];
    picker.tag = 1;
    picker.delegate=self;
    picker.showsSelectionIndicator=YES;
    [dateSheet addSubview:picker];
    [dateSheet showInView:self.view];
    [dateSheet setFrame:CGRectMake(0,220,320,312)]; 
```

我从这里更改了代码：

```
 UIPickerView *picker=[[UIPickerView alloc] initWithFrame:CGRectMake(0,95,320,216)];
    picker.tag = 1;
    picker.delegate=self;
    picker.showsSelectionIndicator=YES;
    [dateSheet addSubview:picker];
    [dateSheet showInView:self.view];
    [dateSheet setFrame:CGRectMake(0, 168, 320, 312)]; 
```

但无论哪种方式，现在在 iPad 模拟器上它看起来像这样

![在此处输入图像描述](../Images/47d55fb85b134cc66b05667a2acbc629.png) 这是我设置我的pickerviews数据的地方

```
-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component{
   return [pickerdata objectAtIndex:row];
} 
```

# firefox - webRTC 在 Chrome 中运行良好，而不是在 Firefox 18 上

> ID：14584763
> 
> 赞同：0
> 
> 时间：2013-01-29T14:02:43.703
> 
> 标签：firefox, webrtc

好的，奇怪的事情：不知何故，我无法使用 webRTC 让我的网络摄像头在 Firefox 18 中工作。即使我浏览到像[https://apprtc.appspot.com/](https://apprtc.appspot.com/)这样的测试页面，它在 Chrome 中也可以正常工作，但 Firefox 甚至不会要求使用我的相机。

有没有其他人遇到过类似的问题？考虑到我在每个 webRTC 页面上都体验到它，我认为在这里发布代码并不重要。

在 OSX ML 上使用 Firefox 18。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:21:51.690

事实证明，Firefox 18 还不支持将音频和视频流合并为一个流。仅单独请求音频和/或视频流可以正常工作。

# c# - Facebook / Google / Twitter 记住登录

> ID：14584766
> 
> 赞同：4
> 
> 时间：2013-01-29T14:02:53.943
> 
> 标签：c#, azure, azure-mobile-services

[按照本 azure 教程](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-users-dotnet/)中详述的步骤，通过 facebook、twitter 或 googleworks 引入身份验证，但正如页面所述，这需要用户在每次应用程序启动时登录。这并不理想。

Azure 站点详细介绍了如何通过 Live SDK 引入单点登录体验。有谁知道如何使用替代提供商（例如 Facebook）来做到这一点？是否有移动服务特定的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:12:13.580

我不熟悉这个特定平台，但一般来说，第 3 方登录通常用于一次性登录（或用于恢复该登录）

我的意思是：
1）使用第 3 方登录
2）根据从第 3 方收到的数据自动创建您自己的用户，同时存储第 3 方用户 ID
3）为您的用户保存 cookie/设备上的标识符
4）以下登录是基于on cookie/on-device identificator
如果由于某种原因丢失了用户重新登录第 3 方，并且您将收到的第 3 方 ID 与存储在您的数据库中进行比较

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:06:51.307

Azure 移动服务最近添加了对记住登录信息的提供商的单点登录支持。[http://blogs.msdn.com/b/carlosfigueira/archive/2013/02/05/enabling-single-sign-on-for-windows-8-azure-mobile-apps.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2013/02/05/enabling-single-sign-on-for-windows-8-azure-mobile-apps.aspx)上的帖子解释了如何使用该功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:11:25.967

Josh Twist 有几篇文章可能会对您有所帮助。

在这里，他介绍了如何生成身份验证令牌：[http ://www.thejoyofcode.com/Generating_your_own_ZUMO_auth_token_Day_8_.aspx](http://www.thejoyofcode.com/Generating_your_own_ZUMO_auth_token_Day_8_.aspx)

在这篇文章中，他介绍了在移动服务中设置身份验证令牌和缓存用户身份：[http ://www.thejoyofcode.com/Setting_the_auth_token_in_the_Mobile_Services_client_and_caching_the_user_rsquo_s_identity_Day_10_.aspx](http://www.thejoyofcode.com/Setting_the_auth_token_in_the_Mobile_Services_client_and_caching_the_user_rsquo_s_identity_Day_10_.aspx)

在这篇文章中，他跟进了如何处理过期令牌：[http ://thejoyofcode.com/Handling_expired_tokens_in_your_application_Day_11_.aspx](http://thejoyofcode.com/Handling_expired_tokens_in_your_application_Day_11_.aspx)

在这三个职位之间，您应该启动并运行。

# python - 在python正则表达式中循环多个模式

> ID：14584767
> 
> 赞同：1
> 
> 时间：2013-01-29T14:03:00.053
> 
> 标签：python, python-3.x

嗨，我有一个以下格式的输入文件。

```
 .....
    ......

    <TABLE COLS="3">
             <ROW>
                <R>data</R>
                <R>data</R>   
              </ROW>
              <ROW>
                <R>data</R>
                <R>data</R>
                <R>data</R>
              </ROW>
    </TABLE>
    <TABLE COLS="4">
             <ROW>
                <R>data</R>
                <R>data</R>
                <R>data</R>
                <R>data</R>
                <R>data</R>   
              </ROW>
              <ROW>
                <R>data</R>
                <R>data</R>
              </ROW>
    </TABLE> 
    .......
    .....
    .
    ... 
```

输出文件应为：

```
....
....
.
..

<table ct="3">
<ent="1">
<ent="2">
<ent="3">

         <row>
            <rvn ="1">data</rvn>
            <rvn ="2">data</rvn>  
          </row>
          <row>
            <rvn ="1">data</rvn>
            <rvn ="2">data</rvn>
            <rvn ="3">data</rvn>  
          </row>
</table>
<table ct="4">
<ent="1">
<ent="2">
<ent="3">
<ent="4">
         <row>
            <rvn ="1">data</rvn>
            <rvn ="2">data</rvn> 
            <rvn ="3">data</rvn> 
            <rvn ="4">data</rvn>
            <rvn ="5">data</rvn>
          </row>
          <row>
            <rvn ="1">data</rvn>
            <rvn ="2">data</rvn>
          </row>
</table>
...
...
... 
```

我已经编写了以下代码：当我运行此代码时，表 col 值将被最后一个表 col 值替换。而且我在增加`<rvn>`价值方面也面临问题。你们中的任何一个都可以帮我解决这个问题。

```
 import re

    def tblcnv( st, val ):
        Tcolspec = ''
        Endval = int(val) + 1
        for i in range(1, Endval):
            l = str(i)
            Tcolspec += "<colspec col='" + l + "' colwidth=''/>\n"
            Theader = re.sub(r"(?i)<table.*?>","<table ct='" + val +"'>\n" + Tcolspec + "\n", st)
        return Theader

    in_data = open("in.txt", "r")
    out_data = open("out.txt", "w")
    Rdata = in_data.read()
    Rval = Rdata.replace("\n", " ")

    Rval = re.sub("(?i)(<TABLE.*cols=\"(\d+).*?</TABLE>)", lambda m: tblcnv(m.group(1), m.group(2)), Rval)
    out_data.write(Rval) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:06:00.727

使用 HTML/XML 解析器是一种操作 HTML/XML 的更简单且不易出错的方法。

它更容易，因为解析器允许您处理更高级别的概念：标签和属性，而不是任意字符串上的正则表达式。

* * *

这是使用[lxml](http://lxml.de/)的示例：

```
import lxml.etree as ET
import itertools as IT

content = '''\
<root>
<TABLE COLS="3">
         <ROW>
            <R>data</R>
            <R>data</R>   
          </ROW>
          <ROW>
            <R>data</R>
            <R>data</R>
            <R>data</R>
          </ROW>
</TABLE>
<TABLE COLS="4">
         <ROW>
            <R>data</R>
            <R>data</R>
            <R>data</R>
            <R>data</R>
            <R>data</R>   
          </ROW>
          <ROW>
            <R>data</R>
            <R>data</R>
          </ROW>
</TABLE>
</root>
'''

root = ET.fromstring(content)
for elt in root.iter():
    elt.tag = elt.tag.lower()
    if elt.tag == 'table':
        elt.attrib['ct'] = elt.attrib['COLS']
        del elt.attrib['COLS']
        # Add <ent> tags
        for i in range(int(elt.attrib['ct']), 0, -1):
            elt.insert(0, ET.Element('ent', value=str(i)))
    # Restart count every time <row> is encountered        
    if elt.tag == 'row':
        count = IT.count(1)
    # Change <R> to <rvn>    
    if elt.tag == 'r':
        elt.tag = 'rvn'
        elt.attrib['value'] = str(next(count))
print(ET.tostring(root, pretty_print = True)) 
```

产量

```
<root>
<table ct="3">
         <ent value="1"/><ent value="2"/><ent value="3"/><row>
            <rvn value="1">data</rvn>
            <rvn value="2">data</rvn>   
          </row>
          <row>
            <rvn value="1">data</rvn>
            <rvn value="2">data</rvn>
            <rvn value="3">data</rvn>
          </row>
</table>
<table ct="4">
         <ent value="1"/><ent value="2"/><ent value="3"/><ent value="4"/><row>
            <rvn value="1">data</rvn>
            <rvn value="2">data</rvn>
            <rvn value="3">data</rvn>
            <rvn value="4">data</rvn>
            <rvn value="5">data</rvn>   
          </row>
          <row>
            <rvn value="1">data</rvn>
            <rvn value="2">data</rvn>
          </row>
</table>
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:22:37.227

这是您的工作代码...

*注意：您不应该为此使用正则表达式...解析总是更好的方法...*

```
import re

counter = None

def datacnv( st ):
    global counter
    return "<rvn=\""+ next(counter) +"\">" + st + "</rvn>\n"

def rowcnv( st ):
    global counter

    counter = iter("".join([str(x) for x in range(1,10)]))

    st = re.sub("(?i)<R>(.*?)</R>", lambda m: datacnv(m.group(1)), st)

    return "<row>\n" + st + "</row>\n"

def tblcnv( st, val ):
    Tcolspec = ''
    Endval = int(val) + 1
    for i in range(1, Endval):
        l = str(i)
        Tcolspec += "<colspec col='" + l + "' colwidth=''/>\n"
    Theader = re.sub(r"(?i)<table.*?>","\n<table ct='" + val +"'>\n" + Tcolspec + "\n", st)

    Theader = re.sub("(?i)<ROW>(.*?)</ROW>", lambda m: rowcnv(m.group(1)), Theader)

    return Theader

in_data = open("in.txt", "r")
out_data = open("out.txt", "w")
Rdata = in_data.read().lower()
in_data.close()
Rval = Rdata.replace("\n", " ")

Rval = re.sub("(?i)(<TABLE.*?cols=\"(\d+).*?</TABLE>)", lambda m: tblcnv(m.group(1), m.group(2)), Rval)
out_data.write(Rval)

out_data.close() 
```

**输出**

```
<table ct='3'>
<colspec col='1' colwidth=''/>
<colspec col='2' colwidth=''/>
<colspec col='3' colwidth=''/>

              <row>
                 <rvn="1">data</rvn>
                 <rvn="2">data</rvn>
                  </row>
               <row>
                 <rvn="1">data</rvn>
                 <rvn="2">data</rvn>
                 <rvn="3">data</rvn>
               </row>
     </table>     
<table ct='4'>
<colspec col='1' colwidth=''/>
<colspec col='2' colwidth=''/>
<colspec col='3' colwidth=''/>
<colspec col='4' colwidth=''/>

              <row>
                 <rvn="1">data</rvn>
                 <rvn="2">data</rvn>
                 <rvn="3">data</rvn>
                 <rvn="4">data</rvn>
                 <rvn="5">data</rvn>
                  </row>
               <row>
                 <rvn="1">data</rvn>
                 <rvn="2">data</rvn>
               </row>
     </table> 
```

# c# - 如何在 MBUnit 中获取测试结果

> ID：14584776
> 
> 赞同：0
> 
> 时间：2013-01-29T14:03:29.070
> 
> 标签：c#, webdriver, automated-tests, mbunit, gallio

我使用 MBUnit 和 Gallio。如果测试结果在浏览器关闭之前失败，我想截屏（我使用带有 c# 的 WebDriver）。如何在测试中获得测试结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T07:40:52.253

我提出下一个解决方案：

```
Capture.AutoEmbedScreenshot( TriggerEvent.TestFailedOrInconclusive , "Last screen" , new CaptureParameters() { Zoom = 0.4 } ); 
```

请参阅[bits-in-motion:blog](http://blog.bits-in-motion.com/search/label/release%20notes)，有不同的方法可以做到这一点。

享受 ;）

# forms - MS Access - 如何判断哪个表/查询表达式构建器从中获取其结果

> ID：14584779
> 
> 赞同：0
> 
> 时间：2013-01-29T14:03:35.217
> 
> 标签：forms, ms-access, expression

我是 MS Access 的新手，并且接手了一个设计非常糟糕的项目。

在访问中，他们创建了一个表单，该表单使用表达式生成器在表单的文本框中显示数据。

表达式构建器窗口如下

```
=[BaseCst]-[SavingPFP]-[FullVehSaving]-[sscost] 
```

我无法弄清楚，表达式是从哪个表或查询中获取数据的，因为表达式是独一无二的？如何轻松计算出数据来自哪些表以跟踪应用程序逻辑？

感谢您对“非逻辑”问题的帮助和道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:23:38.157

*   当您在`Design Mode`表单中时，单击显示`Property Sheet`。
*   单击表单的灰色背景（以选择表单本身和表单上没有特定对象）
*   在`Data`选项卡上查看记录源。

这就是这些名字的来源。他们应该被唯一命名，这就是他们不需要任何额外资格的原因。

![在此处输入图像描述](../Images/6d88965f7eb64053a78c4907e8f8a4c6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:09:17.810

我认为您需要这样的构造： [table1].[field1]

# google-chrome - 如何链接到 chrome 扩展中的选项页面？

> ID：14584781
> 
> 赞同：18
> 
> 时间：2013-01-29T14:03:49.070
> 
> 标签：google-chrome, google-chrome-extension

我有一个带有[选项页面](http://developer.chrome.com/extensions/options.html)的 chrome 扩展。选项页面可以正常工作，我可以从扩展页面访问它，但是我还希望在我的扩展弹出窗口中有一个指向它的链接。这可能吗？它似乎没有网址，但有没有办法告诉 chrome 链接到扩展选项？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-05-06T14:04:17.800

自 Chrome 42 以来的新方法：

[`chrome.runtime.openOptionsPage()`](https://developer.chrome.com/extensions/runtime#method-openOptionsPage)将打开选项，无论是使用新式嵌入选项还是旧式选项页面。

> `chrome.runtime.openOptionsPage()`将始终打开规范位置，并且具有很好的行为，例如重新聚焦打开的选项页面（如果有）。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-29T14:24:32.080

您可以让 Chrome 在新选项卡中使用以下方式打开扩展程序的选项页面：

```
chrome.tabs.create({'url': "/options.html" } ) 
```

与 HTML 非常相似，URL 被认为是相对于调用页面的，但您可以使用正斜杠来加载相对于扩展程序根的页面。

*更新：*

如果你想从内容脚本打开选项页面，你必须使用这个方法： [How do you open Chrome extension options page from a web page?](https://stackoverflow.com/questions/22946346/how-do-you-open-chrome-extension-options-page-from-a-web-page)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T10:03:27.487

您可以直接在 html 中使用相对链接：

```
<a href="options.html" target="_blank">Options</a> 
```

# java - 使用 JMS，如何获得特定目的地的最大消息大小？

> ID：14584785
> 
> 赞同：1
> 
> 时间：2013-01-29T14:03:58.107
> 
> 标签：java, jakarta-ee, jms

问题标题已完成，但让我重新表述一下：使用标准 JavaEE API，我怎样才能获得给定 JMS 目标的最大消息大小？

如果不可能，我如何从 Java 代码中获取它（也就是说，使用与特定实现相关的代码——在我的例子中是 Glassfish）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:45:48.687

最大消息大小可在应用服务器中配置，因此应该可以从服务器的运行时 MBean 访问它。

# rest - 使用自签名根 ca 保护休息服务的优缺点是什么？

> ID：14584787
> 
> 赞同：6
> 
> 时间：2013-01-29T14:04:16.907
> 
> 标签：rest, certificate, ssl-certificate, security

我们正在尝试部署 REST 服务（服务不会面向互联网）并希望使用 ssl 保护它。为此，我们需要证书，为了让事情变得更容易，我们在安装时创建了一个根 CA。

这是一个好主意吗？使用自签名证书的优缺点是什么？这是一个好习惯吗？

*我是这方面的新手，所以如果我问一些愚蠢的事情，请对我温柔！*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:33:13.587

使用自签名证书的好处是在开发时可以节省一点钱。缺点是您使编写客户端变得更加困难，或者要求用户单击“可怕的警告”。我真的建议永远不要告诉用户点击 BSW，因为它们是保护用户免受攻击者进行中间人攻击等攻击的关键部分。

看，获得一个简单的真正的单主机证书真的很便宜（每年几美元*）*。不值得尝试节省这么少的钱。当您要设置私有 CA 并关闭对所有标准 CA 的支持时，这*是值得的；*这是偏执的，但在高安全性配置中是可以接受的，在这种配置中，分发私有 CA 证书并将其安装在客户端中的痛苦是可以忍受的。但通常购买便宜的证书是最明智的……</p>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T17:34:39.233

SSL 使用加密作为“[机械优势](http://blogs.msdn.com/b/ericlippert/archive/2011/09/27/keep-it-secret-keep-it-safe.aspx)”。本质上，您通过使用受信任的根 CA 来验证服务器是服务器所说的服务器，从而确保证书的真实性。

如果您使用自签名证书，这比用户必须单击警告消息要糟糕得多——这意味着该证书没有为您提供任何保护。可以在中间情况下设置一个人，并使用他们自己的自签名证书冒充您的服务的人。因为没有验证证书本身的信任链，所以客户端无法推断它是否受到中间人的影响。

现在，您可以通过操作自己的根 CA 来恢复此处的安全性。如果您这样做，那么您需要一个受信任的安全通道将根证书传送到您的客户端计算机。不过，从好的方面来说，客户端不需要信任某些第三方 CA（如 Verisign）来验证您的服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-16T16:36:36.277

The main difference between a self-signed certificate and one issued by a CA is the trust chain. If you sign your own certificate then when you or others use it they will have to specifically trust the server you signed the certificate with. The way to do this is to add the certificate to your list of "trusted CA roots" in your browser (i.e. Firefox, or Microsoft's CAPI store for MSIE or Chrome), or your cacerts file for Java applications. Otherwise your self-signed certificate won't be trusted and you will get a "warning" or error message depending on how strict your security settings are in that environment (i.e. Java or your specific browser).

With a certificate that is signed by a CA you won't get that warning if either the CA that signed the certificate, or the CA's trusted Root (the one that signed that CA's certificate), is already in your relevant truststore (i.e. browser or cacerts file for Java). Microsoft and Oracle (for Java) are constantly updating trusted CA's and managing CRLs (Certificate Revocation Lists), for CA's or authorities that have been compromised or revoked.

Usually one of these trusted CAs (like verisign, entrust, etc.) charge $$ for signing and issuing certificates and the longer the validity period the more they charge.

A self-signed one is free and may be issued for a long period of time (though not recommended).

# ajax - 嵌套的 SelectOneMenu JSF 2.1

> ID：14584788
> 
> 赞同：1
> 
> 时间：2013-01-29T14:04:18.897
> 
> 标签：ajax, jsf-2, selectonemenu

我正在使用 JSf2.1 开发一个 Web 应用程序。我正在按照教程编写一个 selectOneMenu（下拉列表框）。

我需要有 2 个下拉框（A 和 B），但本质上调用相同的 ajax 侦听器函数，该函数将使用选项 A 和 B 进行一些计算...

那么，我们可以像这样嵌套 selectOneMenu 吗？

```
<h:form id= "ourForm">
    <h:selectOneMenu value= "#{bean.valA}"...>
       <f:selectItems ... />
        <h:selectOneMenu value= "#{bean.valB}"...>
             <f:selectItems ... />
             <f:ajax listener="#{bean.listener}" render="ourForm"/>
        </h:selectOneMenu>
    </h:selectOneMenu>
</h:form> 
```

以及 bean 侦听器方法：

```
public void Listener{

//use valA and valB

} 
```

好吧，我尝试执行上述操作，但页面显示警告：

*表单组件需要在其祖先中有一个 UIForm。建议附上必要的内容*

我通过在每个 selectOneMenu 上调用相同的侦听器来尝试不使用嵌套，但我得到相同的随机行为..即：当我选择 A 的 elem 1 保留 B 上的“prev”选择时，框 B 随机将其选择更新为默认值，反之亦然！

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:10:27.727

这是无效的语法。您需要了解 JSF 生成 HTML 代码。A`<h:selectOneMenu>`生成一个`<select><option/></select>`. 您尝试中的嵌套`<h:selectOneMenu>`将生成`<select><option/><select><option/></select></select>`完全[无效](http://validator.w3.org)的HTML（因此本质上也是完全无效的 JSF）。

您对具体的功能要求不是很清楚，但我知道您只想在父菜单的某些选择上显示子菜单？在这种情况下，请使用该`rendered`属性并将其引用到`<f:ajax render>`.

这是一个粗略的启动示例，如有必要，可以更加简化（例如，不需要`renderMenuB`属性，这取决于您没有告诉任何内容的具体功能要求）。

```
<h:selectOneMenu value="#{bean.selectedValueA}">
    <f:selectItems value="#{bean.availableValuesA}" />
    <f:ajax listener="#{bean.handleChangeA}" render="menuB" />
</h:selectOneMenu>
<h:panelGroup id="menuB">
    <h:selectOneMenu value="#{bean.selectedValueB}" rendered="#{bean.renderMenuB}">
        <f:selectItems value="#{bean.availableValuesB}" />
        <f:ajax listener="#{bean.handleChangeB}" render="ourForm" />
    </h:selectOneMenu>
</h:panelGroup> 
```

### 也可以看看：

*   [我们的`selectOneMenu`维基页面](https://stackoverflow.com/tags/selectonemenu/info)

# vb.net - .NET 分层命名约定

> ID：14584794
> 
> 赞同：2
> 
> 时间：2013-01-29T14:04:34.073
> 
> 标签：vb.net, design-patterns, naming-conventions

我了解 .NET 中的命名约定，例如对类名、方法名和实例变量使用*Pascal Case ，对方法参数使用**Camel Case*。不要使用匈牙利符号，例如在类前加上 cls 或在数据类型前加上 int 或 str 等。

我的问题是；这如何应用于不同层中的类名？有些人说使用命名空间来隔离它们，例如`com.application.dal.Person`，对于*数据访问层*人员和*业务逻辑层*`com.application.bll.Person`人员来说有，而另一些人则说简单地拥有和（不同的类名）。*`PersonDAL``PersonBLL`*

 *我想知道微软对此有何建议？我浏览了 MSDN 并没有找到答案。*

# erlang - Webmachine应用程序不断重启

> ID：14584802
> 
> 赞同：0
> 
> 时间：2013-01-29T14:05:11.410
> 
> 标签：erlang, webmachine

我有一个 webmachine 项目，它还有一个在后台运行的进程，该进程执行任务并将数据存储在 ETS 表中。

当我大约一个小时没有向应用程序发出请求时，请求需要很长时间并且ETS表中的数据已经消失。

看起来 webmachine 应用程序由于不活动而关闭。这是真的？然后有没有办法告诉它不要？

该应用程序托管在 heroku 上，并且在后台运行的更新 ETS 表的模块在 Procfile 中启动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:42:35.947

这不是 webmachine 关闭应用程序，这是 Heroku 正在关闭您的实例。使其不关闭的唯一方法是让外部服务每 10 分钟左右对您的服务器执行一次 ping 操作，或者支付大约 10 分钟的费用。保持[网络测功机运行](https://devcenter.heroku.com/articles/dynos#dyno-idling)36 美元。

# sql-server - 更新标识列以保持唯一编号

> ID：14584810
> 
> 赞同：3
> 
> 时间：2013-01-29T14:05:35.353
> 
> 标签：sql-server, sql-server-2008, tsql

我们有一个表来维护我们应用程序中特定用例的下一个可用唯一编号。我们想有一个 bigint 类型的列，它将递增并提供下一个可用数字。是否可以将此列作为标识列并自动递增同一行？

我找到了一个关于[单列（身份）表的stackoverflow用法的链接？](https://stackoverflow.com/questions/1607476/usage-of-table-with-single-column-identity)有类似的要求。但是，提到的解决方案会在表中插入一条新记录。而不是插入，我想对同一记录进行更新以跟踪下一个可用的唯一编号。

是否可以利用标识列功能，或者我需要获取当前值，显式递增并将其存储回同一列的同一行中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:16:25.950

不完全确定您要达到的目标。相信你刚刚添加了 ie

```
CREATE TABLE #Temp (rowName BIGINT IDENTITY(1,1) NOT NULL) 
```

这将创建一个包含名为 rowName 的列的表，该列自动递增一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:50:57.913

我将创建一个存储过程来启动事务，增加存储的 bigint（不是身份）并返回新值，如果出现任何问题，则回滚事务。

SP的更新部分**就像**（无法测试atm）：

```
DECLARE @RET TABLE (Value BigInt)

UPDATE Mytable
SET MyField += 1
OUTPUT inserted.MyField INTO @RET

IF (SELECT MAX(Value) FROM @RET) > 0
RETURN (SELECT MAX(Value) FROM @RET) 
```

[输出语句](http://msdn.microsoft.com/en-gb/library/ms177564.aspx)

这只会使 1 次写入表并返回新值。检查该值将返回最后发出的值。

# java - 图标的 PropertyChange 侦听器

> ID：14584812
> 
> 赞同：0
> 
> 时间：2013-01-29T14:05:50.753
> 
> 标签：java, swing, propertychangelistener

我正在尝试编写一个`PropertyChange`侦听器来检测 JButton 是否具有 ImageIcon。

`"icon"`是一个 bean 属性，但我似乎无法添加`iconListener`或等效于`PropertyChangeListener`.

真的没有特定的图标监听器吗？

来自 Oracle 教程：“只要 bean 的绑定属性的值发生更改，就会发生属性更改事件？？？符合 JavaBeans™ 规范的组件。”

```
buttonArray[a].addChangeListener("icon",new iconListener()); // doesn't work

buttonArray[a].addChangeListener("icon", new ImageIconListener()); // doesn't work 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:09:13.673

*icon*属性没什么特别的，它只是一个 ... 属性 :-) 所以你需要一个自定义的 PropertyChangeListener 并用按钮注册它

```
PropertyChangeListener myListener = new PropertyChangeListener() .... {

};
// register to be only notified if the _icon_ property changes
button.addPropertyChangeListener("icon", myListener); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T14:11:15.887

*   不是没有特定[的 Icon / ImageIcon 监听器](https://stackoverflow.com/q/14253786/714968)

*   只有它的父级`JComponent`可以从/到返回值`(Property)ChangeListener`

# javascript - 如何减少这个脚本

> ID：14584813
> 
> 赞同：0
> 
> 时间：2013-01-29T14:05:50.893
> 
> 标签：javascript, jquery

我对 Jquery 和 Javascript 很陌生，但我创建了一个脚本，它与 symfony2 中的 php 控制器通信。

我的问题是，我能做些什么来减少脚本长度——>也许有一种更聪明的方法来解决我用 switch 表达式解决的逻辑？

谢谢

```
/**
 * This function gets the current clicked buttons value and post it to the given action + returns the correct value
 */

$(document).ready(function() {
    $('button.rating-button').click(function(event) {
        event.preventDefault();
        var $element   = $(this).attr('id');
        var $rating    = $(this).attr('value');
        var $messageId = $(this).closest('ul').next('input:hidden').val();

        if(typeof $rating !== 'undefined' && $rating != null) {
            $.post(Routing.generate('rating_vote', { 'messageId': $messageId, 'ratingCode': $rating }),
            function($json) {
                $('button#'+$element).parent().find('span').text($json.numberOfRatings);

                /* check if oldRating is defined and oldRating is not the same as new rating ( prevent decrease of actual value if this is the first vote entry for the current message and the specific user ) */
                if(typeof $json.oldRating !== 'undefined' && $json.oldRating != null && ($json.oldRating != $rating) ) {
                    switch($json.oldRating) {
                        case 1:
                            $oldElement = 'rating-first';
                            break
                        case 2:
                            $oldElement = 'rating-second';
                            break;
                        case 3:
                            $oldElement = 'rating-third';
                            break;
                    }
                    $('button#'+$oldElement).parent().find('span').text(Number($('button#'+$oldElement).parent().find('span').text()) -1);
                }

            });
        }

    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:28:14.770

[你可以用这个相当简洁的概念](http://james.padolsey.com/javascript/how-to-avoid-switch-case-syndrome/)替换你的 switch case 逻辑。

```
$(function() {
    $('button.rating-button').on('click',function(event) {
        event.preventDefault();
        var $this = $(this),
            element   = $this.attr('id'),
            rating    = $this.attr('value'),
            messageId = $this.closest('ul').next('input:hidden').val();
        if(typeof rating !== 'undefined' && rating != null) {
            $.post(Routing.generate('rating_vote', { 'messageId': messageId, 'ratingCode': rating }),
                function(json) {
                    $('button#'+element).parent().find('span').text(json.numberOfRatings);
                    if(typeof json.oldRating !== 'undefined' && json.oldRating != null && (json.oldRating != rating) ) {
                        var oldElement = ({
                            1: 'rating-first',
                            2: 'rating-second',
                            3: 'rating-third'
                        })[json.oldRating];
                        $('button#'+oldElement).parent().find('span').text(Number($('button#'+oldElement).parent().find('span').text()) -1);
                    }
                }
            );
        }
    });
}); 
```

一些一般的想法：

*   使用 jQuery 时，使用 $[varname] 作为包含 jQuery 对象的变量的指示符（知道你的 php 背景，这在开始时会感觉很奇怪）
*   创建一个 jQuery-Object 在性能方面有点重，所以确保你最好只创建一次

# javascript - Facebook 页面选项卡编辑 URL - 如何在没有 signed_request 参数的情况下获取当前用户角色

> ID：14584817
> 
> 赞同：2
> 
> 时间：2013-01-29T14:06:07.133
> 
> 标签：javascript, facebook, api, web, oauth

我开发了一个 Facegbook“页面选项卡”应用程序，并在应用程序设置页面上填写了“页面选项卡编辑 URL”的 URL。

然后页面的管理员可以转到`Edit page > Update info > apps > MyApp (Go to App link)` 并将被重定向到正确的 URL，但是该请求使用没有 signed_request 的 GET 方法，并且查询字符串中的唯一参数是**fb_page_id**。

将登录用户身份验证为指定 fb_page_id 的管理员的最佳做法是什么？

# magento - 按城市计算税金

> ID：14584826
> 
> 赞同：1
> 
> 时间：2013-01-29T14:06:48.513
> 
> 标签：magento

Magento 有没有办法根据城市和邮政编码的组合而不是仅邮政编码来计算销售税？问题是，5 位邮政编码中有许多不同的税率。在某些地方，同一城市代码内甚至有不同的税率。

似乎我找不到最好的解决方案。我相信很多人都会遇到和我一样的问题。介意在这里分享解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:15:07.463

我认为一个城市可以有多个邮政编码，但一个邮政编码不能有多个城市，对吗？您可以将税率映射到 Country-State-Zipcode 应该没问题，有什么问题？

否则，您还需要扩展 Tax 模块以实现 City。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T03:20:42.037

在magento tax by city模块的帮助下，我们也可以管理基于城市的税收。 [http://www.magentocommerce.com/magento-connect/tax-by-city-1.html](http://www.magentocommerce.com/magento-connect/tax-by-city-1.html)

# java - 根据类型禁用 KeyTyped 事件

> ID：14584827
> 
> 赞同：1
> 
> 时间：2013-01-29T14:06:51.423
> 
> 标签：java, keyboard-events, keylistener

当我按下任意键时，我会收到 3 个事件：KeyPressed、KeyTyped 和 KeyReleased。对于 KeyPressed 和 KeyReleased，它知道密钥来自哪里，例如 KeyPad。但是，对于 KeyTyped 事件，它似乎失去了它来自键盘的所有知识。知道为什么吗？

这是我按键盘上的 4 键时的一些 toString：

```
java.awt.event.KeyEvent[KEY_TYPED,keyCode=0,keyText=Unknown keyCode: 0x0,keyChar='4',keyLocation=KEY_LOCATION_UNKNOWN 
```

如果 KeyPressed 和 KeyReleased 来自键盘，我可以使用它，但我需要对 KeyTyped 执行相同操作：

```
@Override
public boolean dispatchKeyEvent(KeyEvent keyEvent) {
    if (keyEvent.getKeyLocation() == KeyEvent.KEY_LOCATION_NUMPAD){
        keyEvent.consume();
        return true;
    } 
    return false;
} 
```

所以我的问题是如果它来自键盘，我如何阻止它发出 KeyTyped 事件？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:08:37.357

文档说：

> 被按下或释放的键的位置。始终为 KEY_TYPED 事件返回 KEY_LOCATION_UNKNOWN。

原因是`KEY_TYPED`事件是一种*逻辑*事件，它们只是告诉您输入了一个键，而忽略了它是如何输入的低级细节。例如：在文本编辑器中，您只是不需要知道键是如何输入的或字符是如何生成的。对于此类应用程序，尝试了解它通常被认为是一个非常糟糕的主意。

`KEY_PRESSED`并且`KEY_RELEASED`是更多的*物理*事件。例如：在游戏中，当产生释放或按下时，您可能想做不同的事情：按下>>>开始运行，释放>>>>停止运行。因此，知道使用了哪个物理键可能会很有趣，因为您对事件的细节和键盘布局更感兴趣。

# scala - 协变类型 T 出现在逆变位置

> ID：14584830
> 
> 赞同：20
> 
> 时间：2013-01-29T14:07:04.070
> 
> 标签：scala, covariance, contravariance

我知道以前有人问过这个问题，但答案要么不适用于这种情况，要么我不明白。

基本上，为什么以下（重现我的问题的简单示例）不起作用？

```
class Test[+T] {
    var list: List[T] = _
} 
```

我遇到的问题是我有一个对象，我想在其中传递`Test[Nothing]`（空`Test`）的一个实例，除非我`Test`在`T`.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-29T14:23:18.057

使测试协变`T`意味着 that`Test[A]`是`Test[Any]`any的子类型`A`。所以让我们创建一个`Test`：

```
val test_string = new Test[String] 
```

现在我们有了 a`Test[String]`并且包含`list`的​​是 type `List[String]`。

由于`Test[String]`是 的子类型`Test[Any]`，因此应允许以下内容：

```
val test_any : Test[Any] = test_string 
```

现在，我们有一个`Test[Any]`，因此`test_any.list`是 type `List[Any]`，这意味着以下内容应该是有效的：

```
test_any.list = List[Any]() 
```

这意味着我们只是将 a 分配`List[Any]`给 test_strings 列表成员，这是不允许的，因为它应该是 a `List[String]`，而不是 a `List[Any]`。这也意味着您可以在列表中添加任何内容，因为它是 type `List[Any]`。

# c - 多线程 epoll

> ID：14584833
> 
> 赞同：12
> 
> 时间：2013-01-29T14:07:10.127
> 
> 标签：c, linux, multithreading, sockets, epoll

我正在使用 epoll（边缘触发）和非阻塞套接字创建一个多线程服务器。目前我正在主线程上创建一个事件循环并等待通知并且它工作正常
我必须在两种方法之间进行选择以使其成为多线程：

1.  为每个线程创建一个事件循环并添加服务器套接字的文件描述符以查找每个线程上的通知。（这可能吗？我的意思是：epoll 线程安全吗？）
2.  创建单个事件循环并等待通知。每当收到通知时，都会产生一个线程来处理它。

如果我使用第一种方法，是否有机会让多个线程收到相同事件的通知？我该如何处理这种情况？

什么可能是最好的方法？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:25:58.863

我认为选项 1 更受欢迎，因为非阻塞 IO 的主要目的是避免创建和销毁线程的开销。

以流行的 web 服务器 nginx 为例，它创建多个进程（不是线程）来处理一个句柄上的传入事件，并在子进程中处理事件。它们都共享同一个监听套接字。它与选项 1 非常相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-20T09:12:26.630

我也在使用 编写服务器`epoll`，并且我考虑了与您附加的相同模型。

使用选项1是可以的，但是可能会造成“雷声从众”的效果，可以阅读nginx的源码找到解决方法。至于选项2，我认为最好使用线程池而不是每次都产生一个新线程。

并且您还可以使用以下型号：</p>

主线程/进程：`accept`使用阻塞 IO 的传入连接，并使用 BlockingList 将 fd 发送到其他线程或使用`PIPE`.

子线程/进程：分别创建一个实例`epoll`，并将传入的 fd 添加到 中`epoll`，然后用非阻塞 IO 处理它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T19:19:10.400

epoll 是线程安全的，一个好的解决方案是你的主进程留在 accept(2) 中，一旦你在目标线程的 epoll fd 中获得文件描述符寄存器，这意味着每个线程都有一个 epoll 队列，创建线程后，您将共享 epoll 文件描述符作为调用 pthread_create(3) 中的参数，因此当新连接到达时，您将 epoll_ctl(...EPOLL_CTL_ADD..) 使用目标线程的 epoll fd 和在接受（2）之后创建的新套接字有意义吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-22T03:27:16.817

每个线程的事件循环是最灵活的高性能你应该为每个事件循环创建一个epoll fd，不用担心epoll线程安全问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-18T06:36:52.437

epoll 是线程安全的

希望下面的代码可以帮助你

[https://github.com/jingchunzhang/56vfs/blob/master/network/vfs_so_r.c](https://github.com/jingchunzhang/56vfs/blob/master/network/vfs_so_r.c)

# delphi - 如何在 Delphi 中使用 WIC 创建无损 jpg

> ID：14584838
> 
> 赞同：2
> 
> 时间：2013-01-29T14:07:38.127
> 
> 标签：delphi, wic

我有以下代码使用默认选项从 IWICBitmapSource 创建 jpg 文件：

```
function SaveWICBitmapToJpgFile(WICFactory: IWICImagingFactory;
  WICBitmap: IWICBitmapSource; SrcRect: TRect; FileName: string): HRESULT;
var
  hr: HRESULT;
  Encoder: IWICBitmapEncoder;
  Frame: IWICBitmapFrameEncode;
  PropBag: IPropertyBag2;
  S: IWICStream;
  PixelFormatGUID: WICPixelFormatGUID;
  R: WICRect;
begin

  hr := WICFactory.CreateStream(S);

  if Succeeded(hr) then begin
    hr := S.InitializeFromFilename(PChar(FileName), GENERIC_WRITE);
  end;

  if Succeeded(hr) then begin
    hr := WICFactory.CreateEncoder(GUID_ContainerFormatJpeg, GUID_NULL,
      Encoder);
  end;

  if Succeeded(hr) then begin
    hr := Encoder.Initialize(S, WICBitmapEncoderNoCache);
  end;

  if Succeeded(hr) then begin
    hr := Encoder.CreateNewFrame(Frame, PropBag);
  end;

  if Succeeded(hr) then begin
    hr := Frame.Initialize(PropBag);
  end;

  if Succeeded(hr) then begin
    hr := Frame.SetSize(SrcRect.Width, SrcRect.Height);
  end;

  if Succeeded(hr) then begin
    PixelFormatGUID := GUID_WICPixelFormat24bppBGR;
    hr := Frame.SetPixelFormat(PixelFormatGUID);
  end;

  if Succeeded(hr) then begin
    hr := IfThen(PixelFormatGUID = GUID_WICPixelFormat24bppBGR, S_OK, E_FAIL);
  end;

  if Succeeded(hr) then begin
    R.X := SrcRect.Left;
    R.Y := SrcRect.Top;
    R.Width := SrcRect.Width;
    R.Height := SrcRect.Height;
    Frame.WriteSource(WICBitmap, @R);
  end;

  if Succeeded(hr) then begin
    hr := Frame.Commit;
  end;

  if Succeeded(hr) then begin
    hr := Encoder.Commit;
  end;

  Result := hr;

end; 
```

我想更改编解码器选项以生成无损 jpg。据我了解我在 MSDN 中阅读的内容，我必须使用 IPropertyBag2 来实现这一点。尽管不知道如何做，我尝试在 Frame 创建和 Frame 初始化之间插入这段代码：

```
var
[...]
  PropBagOptions: TPropBag2;
  V: Variant;
[...]

if Succeeded(hr) then begin
  FillChar(PropBagOptions, SizeOf(PropBagOptions), 0);
  PropBagOptions.pstrName := 'ImageQuality';
  V := 1.0;
  hr := PropBag.Write(1, @PropBagOptions, @V);
end; 
```

它不起作用：hr = 0x88982F8E (WINCODEC_ERR_PROPERTYUNEXPECTEDTYPE)。MSDN[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ee719871%28v=vs.85%29.aspx#encoderoptionsusage)说“ImageQuality”属性的类型是 VT_R4，但由于我以前从未使用过 Variant，所以我不知道如何编写。而且我什至不确定压缩是否确实是无损的。

我如何修改我的代码以使其生成质量为 1.0 的 jpg，并且它会是无损的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:34:28.150

我没有这方面的经验，但这是基于阅读您链接到的文档的最佳建议。

首先，我认为您需要指定更多的成员`PropBagOptions`：

*   `dwType`需要设置为`PROPBAG2_TYPE_DATA`。
*   `vt`需要设置为`VT_R4`。

您还需要确保变体确实是`VT_R4`. 这是一个 4 字节的实数，在 Delphi 中是 type 的变体`varSingle`。

```
V := VarAsType(1.0, varSingle); 
```

我认为应该完成它。

把它们放在一起，它看起来像这样：

```
FillChar(PropBagOptions, SizeOf(PropBagOptions), 0);
PropBagOptions.pstrName := 'ImageQuality';
PropBagOptions.dwType := PROPBAG2_TYPE_DATA;
PropBagOptions.vt := VT_R4;
V := VarAsType(1.0, varSingle);
hr := PropBag.Write(1, @PropBagOptions, @V); 
```

* * *

至于JPEG质量1.0是否无损，它不是。这里已经很好地解决了这个问题：[当质量设置为 100 时，JPEG 是否无损？](https://stackoverflow.com/questions/7982409/is-jpeg-lossless-when-quality-is-set-to-100)

# javascript - Three.js在2个粒子之间画线

> ID：14584840
> 
> 赞同：4
> 
> 时间：2013-01-29T14:07:43.323
> 
> 标签：javascript, three.js

我在画布上绘制了一堆粒子。我正在使用以下代码：

```
var geometry = new THREE.Geometry();

nodeSet.forEach(function (value, index) {

    if (value.Name.indexOf("p(") == "0") {
       particle = new THREE.Particle(protien);
    } else { particle = new THREE.Particle(material); }

    particle.ID = value.ID;
    particle.position.x = value.Xpos;// Math.random() * 2 - 1;
    particle.position.y = value.YPos; //Math.random() * 2 - 1;
    particle.position.z = Math.random() * 2 - 1;
    particle.position.normalize();
    particle.position.multiplyScalar(Math.random() * 10 + 450);
    particle.scale.x = particle.scale.y = 5;
    scene.add(particle);

    geometry.vertices.push(particle.position);
}); 
```

现在，我想根据particle.ID 绘制一条连接两个粒子的线。有人可以帮助我并指出如何做到这一点的方向吗？

# build - 如何在 sublime text 2 build 中退出进程以及如何查看当前的构建窗口？

> ID：14584842
> 
> 赞同：2
> 
> 时间：2013-01-29T14:07:45.333
> 
> 标签：build, sublimetext2

当我运行构建 ctrl-B 时，它会显示一个正在运行程序的控制台。

*   但是如果我按 esc 它关闭，我现在如何打开它？
*   如果我再次构建，我如何看到之前的构建控制台？

就我而言，我只是在启动 node.js 进程时没有构建任何东西。而且我的工作流程有问题，因为如果我构建 2 次，我会打开 2 个 node.js 进程，这很糟糕而且不起作用......

我想至少知道它是如何命名构建控制台的，只是为了研究以及如何查看所有打开的构建控制台？另外我需要退出node.js进程，我也不知道该怎么做。

**更新：** 好吧，我已经设法退出该过程，但我有一个问题，如果我运行两次构建，我仍然无法退出第一个过程......

我真正需要的是关闭最后一个进程并重新启动的东西......

谢谢

# java - 当前线程的问题

> ID：14584844
> 
> 赞同：0
> 
> 时间：2013-01-29T14:07:56.417
> 
> 标签：java, session, spring-mvc

我真的是 Spring 的新手，当我在登录后参考以下页面 JSP 安全性时，我遇到了“没有找到当前线程的会话”这个问题。到目前为止，一切正常。

这是该页面的控制器：

```
package employee.controller;

import employee.service.AdminService;
import employee.service.UserService;
import org.apache.log4j.Logger;
import org.springframework.security.access.annotation.Secured;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

import javax.annotation.Resource;

/**
 * @author serge
 *
 * Handles and retrieves the common or admin page depending on the URI template.
 * A user must be log-in first he can access these pages. Only the admin can see
 * the adminpage, however.
 */
@Controller
@RequestMapping("/main")
public class MainController {

    protected static Logger logger = Logger.getLogger("controller");

    @Resource(name = "adminService")
    private AdminService adminService;

    @Resource(name = "userService")
    private UserService userService;

    /**
     * Handles and retrieves a /WEB-INF/jsp/employee-page.jsp
     *
     * containing all employee
     *
     * @return the name of the JSP page
     */

    @Secured("ROLE_USER")
    @RequestMapping(value = "/employee-list",method = RequestMethod.GET)
    public String getEmployeeListPage(Model model) {
        logger.debug("Received request to show all employee page");

        // Retrieve all employee and attach to model
        model.addAttribute("all-employee", userService.findAllEmployee());
        return "employee-page";
    }

    /**
     * Handles and retrieves /WEB-INF/jsp/admin-page.jsp that only admins can see
     *
     * @return the name of the JSP page
     */
    @Secured("ROLE_ADMIN")
    @RequestMapping(value = "/admin", method = RequestMethod.GET)
    public String getAdminPage() {
        logger.debug("Received request to show admin page");
        return "admin-page";
    }
} 
```

这是从控制器调用的用户服务：

```
package employee.service.impl;

import employee.DAO.EmployeeInfoDAO;
import employee.model.EmployeeInfo;
import employee.service.UserService;
import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.access.annotation.Secured;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.List;

/**
 * @author serge
 * 
 * Reader level
 * 
 * Service to Retrieve info about Employees
 */

@Service("userService")
@Transactional
public class UserServiceImpl implements UserService {

    protected static Logger logger = Logger.getLogger("service");
    private EmployeeInfoDAO emplInfoDAO;

    @Autowired
    public void setEmployeeDao(EmployeeInfoDAO emplInfoDAO) {
        this.emplInfoDAO = emplInfoDAO;
    }

    /**
     * Retrieving Employee Information by id
     *
     * @return EmployeeInfo object
     */
    @Override
    @Transactional
    @Secured("ROLE_USER")
    public EmployeeInfo findEmployeeByID(Integer id) {

        logger.debug("Retrieving Employee with id= " + id);
        EmployeeInfo employeeInfo = new EmployeeInfo();
        employeeInfo.setId(id);
        emplInfoDAO.find(employeeInfo);
        return employeeInfo;
    }

    /**
     * Retrieving all Employees  
     *
     * @return List of EmployeeInfo object
     */
    @Override
    @Secured("ROLE_USER")
    @Transactional(readOnly = true)
    public List<EmployeeInfo> findAllEmployee() {

        logger.debug("Retrieving all Employee");
        return emplInfoDAO.findAll();
    }

    /**
     * Retrieving Employees by last name
     *
     * @return List of EmployeeInfo object
     */
    @Override
    @Secured("ROLE_USER")
    @Transactional(readOnly = true)
    public List<EmployeeInfo> findAllByLastName(String lastName, Object paramValue) {
        lastName = "lastName";

        logger.debug("Retrieving Employee by last name: " + paramValue);
        return emplInfoDAO.findAllByParam(lastName, paramValue);
    }

    /**
     * Retrieving Employees by first name
     *
     * @return List of EmployeeInfo object
     */
    @Override
    @Secured("ROLE_USER")
    @Transactional(readOnly = true)
    public List<EmployeeInfo> findAllByFirstName(String firstName, Object paramValue) {
        firstName = "firstName";

        logger.debug("Retrieving Employee by first name: " + paramValue);
        return emplInfoDAO.findAllByParam(firstName, paramValue);
    }
} 
```

这是自定义 DAO 支持，不确定这是否是正确的方法......：

```
package employee.DAO.impl;

import employee.DAO.DAO;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.criterion.Restrictions;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.transaction.annotation.Transactional;

import javax.annotation.Resource;
import java.io.Serializable;
import java.util.List;

public class CustomHibernateDaoSupport<T>  implements DAO<T> {
    //was extending HibernateDaoSupport

    private Class<T> clazz;
    private SessionFactory sessionFactory;

    public CustomHibernateDaoSupport(Class<T> clazz) {
        this.clazz = clazz;
    }

    @Autowired
    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    private Session getCurrentSession() {
        return sessionFactory.getCurrentSession();
    }

    @Override
    @Transactional
    public void save(T entity) {
        getCurrentSession().save(entity);
    }

    @Override
    @Transactional
    public void update(T entity) {
        getCurrentSession().update(entity);
    }

    @Override
    @Transactional
    public void delete(Serializable key) {
        Object entity = getCurrentSession().get(clazz, key);
        if (entity != null) {
            getCurrentSession().delete(entity);
        }
    }

    @Override
    @Transactional
    public T find(Serializable key) {
        return (T) getCurrentSession().get(clazz, key);
    }

    @Override
    @Transactional
    public List<T> findAll() {
        return getCurrentSession().createCriteria(clazz).list();
    }

    @Override
    @Transactional
    public List<T> findAllByParam(final String paramName, final Object paramValue) {
        return getCurrentSession().createCriteria(clazz)
                .add(Restrictions.eq(paramName, paramValue))
                .list();
    }
} 
```

当然还有配置：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.1.xsd
            http://www.springframework.org/schema/mvc 
            http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

    <!-- Activates annotations -->

    <context:annotation-config />

    <mvc:annotation-driven/>

    <!-- Scans for annotated components in base-package-->

    <context:component-scan base-package="employee" />

    <bean class="employee.service.impl.AdminServiceImpl"/>
    <bean class="employee.service.impl.UserServiceImpl"/>

    <!-- Shared Hibernate SessionFactory in a Spring application context. -->

    <bean id = "transactionManager" class = "org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name = "sessionFactory" ref = "sessionFactory" />
    </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource"/>

        <property name="annotatedClasses">
            <list>
                <value>employee.model.UserInfo</value>
                <value>employee.model.EmployeeInfo</value>
                <value>employee.model.EmployeeDiv</value>
            </list>
        </property>

        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
    </bean>

    <!-- for database, imports the properties from database.properties -->

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${jdbc.driverClassName}" />
        <property name="url" value="${jdbc.url}" />
        <property name="username" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />
    </bean>

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location" value="classpath:database.properties"/>
    </bean>
</beans> 
```

成功登录后，我调用了 /employee-list 并得到了这个而不是页面：

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.hibernate.HibernateException: No Session found for current thread
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
...

org.hibernate.HibernateException: No Session found for current thread
    org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:941)
    employee.DAO.impl.CustomHibernateDaoSupport.getCurrentSession(CustomHibernateDaoSupport.java:31)
    employee.DAO.impl.CustomHibernateDaoSupport.findAll(CustomHibernateDaoSupport.java:64)
... 
```

请帮助我理解我的错误在哪里，也许我的配置错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T13:40:17.370

对于那些将面临同样问题的人：我通过检查休眠设置解决了我的问题。现在他们是这样的：

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd ">

<!-- Activates annotations -->

<context:annotation-config/>

<!-- Scans for annotated components in base-package-->

<context:component-scan base-package="tradeManager"/>

<mvc:annotation-driven/>

<tx:annotation-driven/>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>

    <property name="annotatedClasses">
        <list>
            <value>tradeManager.model.Invoice</value>
            <value>tradeManager.model.Item</value>
            <value>tradeManager.model.User</value>
        </list>
    </property>

    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
    </property>
</bean>

<!-- for database, imports the properties from database.properties -->

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driverClassName}"/>
    <property name="url" value="${jdbc.url}"/>
    <property name="username" value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
</bean>

<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="/WEB-INF/database.properties"/>
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean> 
```

# java - 关于原始类型的 Java 约定

> ID：14584845
> 
> 赞同：-1
> 
> 时间：2013-01-29T14:08:03.270
> 
> 标签：java, boolean, conventions, primitive-types

原始类型的 Java 约定是什么？如果我正确命名，我应该记录每个原始类型吗？

```
/**
 * This is the variable that handles whether or not a person has turned on a light.
 */
private boolean toggleLight = false; 
```

在我看来，这绝对是矫枉过正，如果有人有资料来源或只是以前的知识，那将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:11:22.843

我认为这取决于你所在的团队，不同的公司甚至项目都有不同的“标准”。我个人懒得评论每个变量，尤其是变量往往是私有的。如果变量是公开的，那么我将对其进行注释，以便它出现在我的 Javadoc 中。

方法也是如此，如果它是一个私有方法，如果很明显，我不会评论，我也不会评论 setter 和 getter，只有带有逻辑的方法。

正如我所说，它通常取决于您正在编码的团队。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:16:04.973

这与原始类型无关。你自己举了一个很好的例子：这个名字`toggleLight`不是不言自明的。添加评论，更好的是，更改名称。

我喜欢的另一个例子是`float weight`——嗯，这个重量是什么单位？它甚至是质量的*重量*，还是重量的*重要性*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:12:23.113

这与java无关，它应该是公司特定的而不是程序语言特定的。如果您的团队决定记录每个变量，情况就是如此。一般来说，最好记录每个方法，特别是来自 IDE 的公共方法在使用它们时显示文档，一些公司决定也记录私有方法，如果方法很大并且名称不足以描述，这可能是特别必要的该方法的作用。

考虑文档格式很重要，因为有很多文档生成工具可以根据 XML 标签读取文档的特定模式。

# data-loss - 什么是数据泄露检测？

> ID：14584854
> 
> 赞同：-3
> 
> 时间：2013-01-29T14:08:40.953
> 
> 标签：data-loss

我被分配了一个关于数据泄漏检测的项目，但我用谷歌搜索了 n 无法理解它，我需要一个非常基本的定义。它有什么用，我如何在上面制作软件，如何检测数据泄漏，为什么数据在传输时丢失，几乎所有关于数据泄漏检测的内容......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:15:17.613

虽然这个问题跑题了...

**定义：数据泄露**

未经授权将机密信息从计算机或数据中心传输到外部世界。数据泄露可以通过简单地在脑海中记住所看到的内容，通过物理移除磁带、磁盘和报告或通过诸如数据隐藏（参见隐写术）之类的微妙手段来实现。

**定义：数据泄露保护软件**

请参见[数据丢失防护软件](http://en.wikipedia.org/wiki/Data_loss_prevention_software)

# java - 从远程应用程序使用 localhost webservice

> ID：14584857
> 
> 赞同：1
> 
> 时间：2013-01-29T14:08:47.133
> 
> 标签：java, php, rest

我使用 Netbeans 7.2.1 在 localhost 上部署了一个 RESTful java Web 服务。和 Glassfish 3.1。现在我需要从运行在远程服务器 ( [http://tsl7.csd.uoc.gr](http://tsl7.csd.uoc.gr) ) 上的 php 应用程序中使用它。不幸的是，我还没有找到访问它的成功方法。我试过这样的东西：

```
 $client = new SoapClient("127.0.0.1:8080/HelloWs/HelloWebService?wsdl"); 
  $result = $client->hello("world"); 
  echo ("result is: ".$result); 
```

还有我的公共IP（139.162 ...），但它不起作用。我还观察到：

```
 $wsdl = file_get_contents('127.0.0.1:8080/HelloWs/HelloWebService?wsdl'); 
 throw new Exception($wsdl, 1); 
```

也不起作用并返回一个空变量。我在访问 localhost 时做错了吗？你能推荐一些逐步的东西，或者任何相关的教程吗？抱歉这个菜鸟问题我对网络服务很陌生。

我将不胜感激任何详细的指导：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:52:53.407

解决了。必须将服务部署到远程服务器。显然 localhost 不允许入站连接。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:20:59.537

一种方法是通过[SSH tunneling](http://php.net/manual/en/function.ssh2-tunnel.php)。

# php - 如何在数组中查找值并更新数组以仅保留这些值

> ID：14584866
> 
> 赞同：0
> 
> 时间：2013-01-29T14:09:37.217
> 
> 标签：php, arrays, search

我有一个具有以下值的数组：

```
[oranges] => Array
    (
        [cost] => 0.56
        [quantity] => 6
    )

[pears] => Array
    (
        [cost] => 0.34
        [quantity] => 2
    ) 
```

我想执行搜索，使用 $_REQUEST 获取搜索值（我必须使用 $_REQUEST），然后更新原始数组以仅显示与搜索匹配的值。我怎样才能做到这一点？

PS：我需要能够根据项目（橙子、梨等）和/或价格和/或数量来搜索数组。

在我的搜索表单中，$_REQUEST 是一个变量，格式如下：

```
Array
(
[item] => apple
[qty] => 2
[price] => 
) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:15:35.060

你好，你可能想要更好地处理这个问题，但这样的事情会做到：

```
$array[$_REQUEST['item']] = array(
                              "cost" => $_REQUEST['price'], 
                              "quantity" => $_REQUEST['qty']
                            ); 
```

其中 $array 等于您要更改的数组。

同样，我会更好地阐述这一点并添加一些验证。（也避免使用 request 这是一个很大的安全问题）

# ruby - Ruby Require 语句和文件位置

> ID：14584867
> 
> 赞同：3
> 
> 时间：2013-01-29T14:09:42.940
> 
> 标签：ruby, require

我正在尝试`require`在 Ruby 中使用该命令。我正在使用 CodeRunner 运行我的代码。我遇到的问题是 require 语句只是使用字符串“chunky_png”。我有一个文件夹，里面装满了这段代码需要使用的库文件。我不确定 A）在哪里放置文件夹和 B）如果我需要以某种方式指向该文件夹？这是我的代码，下面是我得到的错误。我的库文件文件夹与我尝试运行的 PNGdecode.rb 文件位于同一文件夹中：

```
require 'chunky_png'

class ChunkyPNG::Image
  def at(x,y)
    ChunkyPNG::Color.to_grayscale_bytes(self[x,y]).first
  end
end

img = ChunkyPNG::Image.from_file('engine.png')

sobel_x = [[-1,0,1],
           [-2,0,2],
           [-1,0,1]]

sobel_y = [[-1,-2,-1],
           [0 , 0, 0],
           [1 , 2, 1]]

edge = ChunkyPNG::Image.new(img.width, img.height, ChunkyPNG::Color::TRANSPARENT)

for x in 1..img.width-2
  for y in 1..img.height-2
    pixel_x = (sobel_x[0][0] * img.at(x-1,y-1)) + (sobel_x[0][1] * img.at(x,y-1)) + (sobel_x[0][2] * img.at(x+1,y-1)) +
          (sobel_x[1][0] * img.at(x-1,y))   + (sobel_x[1][1] * img.at(x,y))   + (sobel_x[1][2] * img.at(x+1,y)) +
          (sobel_x[2][0] * img.at(x-1,y+1)) + (sobel_x[2][1] * img.at(x,y+1)) + (sobel_x[2][2] * img.at(x+1,y+1))

    pixel_y = (sobel_y[0][0] * img.at(x-1,y-1)) + (sobel_y[0][1] * img.at(x,y-1)) + (sobel_y[0][2] * img.at(x+1,y-1)) +
          (sobel_y[1][0] * img.at(x-1,y))   + (sobel_y[1][1] * img.at(x,y))   + (sobel_y[1][2] * img.at(x+1,y)) +
          (sobel_y[2][0] * img.at(x-1,y+1)) + (sobel_y[2][1] * img.at(x,y+1)) + (sobel_y[2][2] * img.at(x+1,y+1))

    val = Math.sqrt((pixel_x * pixel_x) + (pixel_y * pixel_y)).ceil
    edge[x,y] = ChunkyPNG::Color.grayscale(val)
  end
end
edge.save('engine_edge.png') 
```

错误：

```
PNGdecode.rb:1:in `require': no such file to load -- chunky_png (LoadError) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:32:03.383

嗯，其实[`chunky_png`](https://github.com/wvanbergen/chunky_png)就是一个[gem](http://guides.rubygems.org/what-is-a-gem/)，也就是一个库**包**。您应该通过 RubyGems ruby​​ 打包系统安装它。

**首先**，如果尚未安装[RubyGems ，请安装它。](http://rubygems.org/)*（如果您可以键入`gem`命令并显示其帮助，则转到第二步）*

**其次**，使用命令安装这个*gem ：*

```
gem install chunky_png 
```

这不仅会下载这个库，还会下载它的依赖项，以这样一种方式安装和配置它们，您可以`require 'chunky_png'`从**任何**目录执行此操作，而无需携带所有库文件。

这是在 Ruby 中安装外部库的常规方式。

***注意：**`sudo`如果您在 Ubuntu Linux 系统上并且想要在系统范围内安装 gem（适用于所有用户），您可能需要在后一个命令前面加上*

***注意 2：**如果你最终想要分发需要 gems 的 Ruby 应用程序，你最好使用[Bundler](http://gembundler.com)，这样其他人就可以自动安装你所有的依赖项，而无需解析错误消息并一个接一个地手动安装所需的 gems*

# e-commerce - Wordpress：作为产品的货运

> ID：14584869
> 
> 赞同：1
> 
> 时间：2013-01-29T14:09:42.897
> 
> 标签：e-commerce, wordpress

我在一家货运公司工作，现在我们将为客户提供在线预付运费的服务。我们正在使用 Wordpress 电子商务插件

我是一名开发人员，我正在寻找可以将其组合在一起的最佳方式。我现在想，我有两个选择：

1.  通过自定义字段扩展常规 WPEC 产品：从客户处测量（宽度、高度、长度和重量）并通过算法计算价格。我可以将 Product Variations 用于固定价格的商品（轮胎、自行车、吉他等）。然后是“快递”或“保险”等的一些复选框。我将如何在结帐时使用这些值来进行实际计算？（同时客户在结账前给出值？）

2.  制作自定义插件？做一个自定义插件会更容易更干净吗？（而不是调整别人）？

PS。我正在寻找一种让客户比开发人员更受益的方法:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:27:07.393

我认为最灵活的方法是[编写自定义运输模块](http://getshopped.org/resources/docs/get-involved/writing-a-new-shipping-module/)。然后，您可以创建具有变化的基本产品，这些产品包含您的指标，允许您预先配置某些产品类型，如自行车、轮胎、吉他，以及具有重量、长度/宽度/高度等的通用产品。您可以添加运费标准与快递模式，以及保险复选框，作为运输模块上的选项。

首先查看下面的捆绑运输模块`wp-content/plugins/wp-e-commerce/wpsc-shipping/`

# java - Servlet 和 .jsp 页面（托管在与嵌入器相同的 .jar 中）

> ID：14584871
> 
> 赞同：0
> 
> 时间：2013-01-29T14:09:59.383
> 
> 标签：java, embedded-jetty

我生成了一个包含嵌入式**Jetty 8.1.8.v20121106**的应用程序的 jar 文件，其中**jdk1.7.0_07**在 Windows 上运行。但是，当我想访问时，`index.jsp`出现以下错误：`<br />HTTP ERROR 500`

访问 /smpp/ 时出现问题。原因：

```
PWC6345: There is an error in invoking javac.  A full JDK (not just JRE) is required 
```

造成的：

```
org.apache.jasper.JasperException: PWC6345: There is an error in invoking javac.  A full JDK (not just JRE) is required
at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:92)
at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:378)
at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:119)
at org.apache.jasper.compiler.Jsr199JavaCompiler.compile(Jsr199JavaCompiler.java:208)
at org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:384)
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:453)
at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:625)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:669)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:578)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:276)
at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:103)
at org.eclipse.jetty.servlet.DefaultServlet.doGet(DefaultServlet.java:566)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:669)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:560)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
at org.eclipse.jetty.server.Server.handle(Server.java:361)
at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:485)
at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53)
at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:926)
at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:988)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:635)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
at java.lang.Thread.run(Unknown Source) 
```

***码头启动***

```
D:\Applications\AppJars>java -jar unitysmpp.jar
2013-01-29/14:25:35.008 DEBUG: util.log - Logging to org.slf4j.impl.Log4jLoggerAdapter(org.eclipse.jetty.util.log) via org.eclipse.jetty.util.log.Slf4jLog
2013-01-29/14:25:35.078 DEBUG: servlet.ServletHandler - filterNameMap={}
2013-01-29/14:25:35.078 DEBUG: servlet.ServletHandler - pathFilters=null
2013-01-29/14:25:35.079 DEBUG: servlet.ServletHandler - servletFilterMap=null
2013-01-29/14:25:35.079 DEBUG: servlet.ServletHandler - servletPathMap={/=org.eclipse.jetty.servlet.DefaultServlet-1}
2013-01-29/14:25:35.079 DEBUG: servlet.ServletHandler - servletNameMap={org.eclipse.jetty.servlet.DefaultServlet-1=org.eclipse.jetty.servlet.DefaultServlet-1}
2013-01-29/14:25:35.105 DEBUG: servlet.ServletHandler - filterNameMap={}
2013-01-29/14:25:35.105 DEBUG: servlet.ServletHandler - pathFilters=null
2013-01-29/14:25:35.105 DEBUG: servlet.ServletHandler - servletFilterMap=null
2013-01-29/14:25:35.106 DEBUG: servlet.ServletHandler - servletPathMap={*.jsp=org.apache.jasper.servlet.JspServlet-1, /=org.eclipse.jetty.servlet.DefaultServlet-
1}
2013-01-29/14:25:35.106 DEBUG: servlet.ServletHandler - servletNameMap={org.eclipse.jetty.servlet.DefaultServlet-1=org.eclipse.jetty.servlet.DefaultServlet-1, or
g.apache.jasper.servlet.JspServlet-1=org.apache.jasper.servlet.JspServlet-1}
2013-01-29/14:25:35.137 DEBUG: servlet.ServletHandler - filterNameMap={}
2013-01-29/14:25:35.138 DEBUG: servlet.ServletHandler - pathFilters=null
2013-01-29/14:25:35.138 DEBUG: servlet.ServletHandler - servletFilterMap=null
2013-01-29/14:25:35.138 DEBUG: servlet.ServletHandler - servletPathMap={*.jsp=org.apache.jasper.servlet.JspServlet-1, /HttpHandler=com.smsgh.unitysmpp.Http.Reque
stHandlers.HttpRequestProcessor-1, /=org.eclipse.jetty.servlet.DefaultServlet-1}
2013-01-29/14:25:35.139 DEBUG: servlet.ServletHandler - servletNameMap={org.eclipse.jetty.servlet.DefaultServlet-1=org.eclipse.jetty.servlet.DefaultServlet-1, or
g.apache.jasper.servlet.JspServlet-1=org.apache.jasper.servlet.JspServlet-1, com.smsgh.unitysmpp.Http.RequestHandlers.HttpRequestProcessor-1=com.smsgh.unitysmpp.
Http.RequestHandlers.HttpRequestProcessor-1}
2013-01-29/14:25:35.219 DEBUG: configuration.PropertiesConfiguration - FileName set to smpp-config.properties
2013-01-29/14:25:35.221 DEBUG: configuration.ConfigurationUtils - ConfigurationUtils.locate(): base is null, name is smpp-config.properties
2013-01-29/14:25:35.222 DEBUG: configuration.DefaultFileSystem - Could not locate file smpp-config.properties at null: no protocol: smpp-config.properties
2013-01-29/14:25:35.229 DEBUG: configuration.ConfigurationUtils - Loading configuration from the context classpath (smpp-config.properties)
2013-01-29/14:25:35.229 DEBUG: configuration.PropertiesConfiguration - Base path set to rsrc:smpp-config.properties
2013-01-29/14:25:35.299 DEBUG: component.Container - Container org.eclipse.jetty.server.Server@6f8a8b32 + SocketConnector@localhost:8080 as connector
2013-01-29/14:25:35.301 DEBUG: component.Container - Container o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/} + org.eclipse.jetty.servlet.ErrorPag
eErrorHandler@4436f0c9 as error
2013-01-29/14:25:35.302 DEBUG: component.Container - Container org.eclipse.jetty.server.handler.ContextHandlerCollection@72fa3f1b + o.e.j.w.WebAppContext{/smpp,r
src:com/smsgh/unitysmpp/Portal/} as handler
2013-01-29/14:25:35.302 DEBUG: component.Container - Container org.eclipse.jetty.server.Server@6f8a8b32 + org.eclipse.jetty.server.handler.ContextHandlerCollecti
on@72fa3f1b as handler
2013-01-29/14:25:35.302  INFO: Portal.WebStartup - Starting Jetty Web Container....
2013-01-29/14:25:35.303 DEBUG: component.AbstractLifeCycle - starting org.eclipse.jetty.server.Server@6f8a8b32
2013-01-29/14:25:35.305  INFO: server.Server - jetty-8.y.z-SNAPSHOT
2013-01-29/14:25:35.360 DEBUG: component.Container - Container org.eclipse.jetty.server.Server@6f8a8b32 + qtp890550801{8<=0<=0/254,-1} as threadpool
2013-01-29/14:25:35.360 DEBUG: component.AbstractLifeCycle - starting org.eclipse.jetty.server.handler.ContextHandlerCollection@72fa3f1b
2013-01-29/14:25:35.361 DEBUG: component.AbstractLifeCycle - starting o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/}
2013-01-29/14:25:35.394 DEBUG: webapp.WebAppContext - Thread Context classloader java.net.URLClassLoader@3238c403
2013-01-29/14:25:35.394 DEBUG: webapp.WebAppContext - preConfigure o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/} with org.eclipse.jetty.webapp.We
bInfConfiguration@240766c0
2013-01-29/14:25:35.401 DEBUG: webapp.WebInfConfiguration - Set temp dir C:\Users\superman\AppData\Local\Temp\jetty-localhost-8080-Portal-_smpp-any-
2013-01-29/14:25:35.403 DEBUG: webapp.WebAppContext - preConfigure o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/} with org.eclipse.jetty.webapp.We
bXmlConfiguration@2d9c1743
2013-01-29/14:25:35.463 DEBUG: xml.XmlParser - parse: jar:rsrc:jetty-webapp-8.1.8.v20121106.jar!/org/eclipse/jetty/webapp/webdefault.xml
2013-01-29/14:25:35.469 DEBUG: xml.XmlParser - parsing: sid=jar:rsrc:jetty-webapp-8.1.8.v20121106.jar!/org/eclipse/jetty/webapp/webdefault.xml,pid=null
2013-01-29/14:25:35.504 DEBUG: webapp.WebDescriptor - jar:rsrc:jetty-webapp-8.1.8.v20121106.jar!/org/eclipse/jetty/webapp/webdefault.xml: Calculated metadatacomp
lete = True with version=2.5
2013-01-29/14:25:35.505 DEBUG: webapp.WebAppContext - preConfigure o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/} with org.eclipse.jetty.webapp.Me
taInfConfiguration@8453227
2013-01-29/14:25:35.505 DEBUG: webapp.WebAppContext - preConfigure o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/} with org.eclipse.jetty.webapp.Fr
agmentConfiguration@76dfa2ae
2013-01-29/14:25:35.505 DEBUG: webapp.WebAppContext - preConfigure o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/} with org.eclipse.jetty.webapp.Je
ttyWebXmlConfiguration@54318a7a
2013-01-29/14:25:35.548 DEBUG: webapp.WebAppContext - configure o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/} with org.eclipse.jetty.webapp.WebIn
fConfiguration@240766c0
2013-01-29/14:25:35.549 DEBUG: webapp.WebAppContext - configure o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/} with org.eclipse.jetty.webapp.WebXm
lConfiguration@2d9c1743
2013-01-29/14:25:35.561 DEBUG: webapp.WebAppContext - configure o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/} with org.eclipse.jetty.webapp.MetaI
nfConfiguration@8453227
2013-01-29/14:25:35.561 DEBUG: webapp.WebAppContext - configure o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/} with org.eclipse.jetty.webapp.Fragm
entConfiguration@76dfa2ae
2013-01-29/14:25:35.562 DEBUG: webapp.WebAppContext - configure o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/} with org.eclipse.jetty.webapp.Jetty
WebXmlConfiguration@54318a7a
2013-01-29/14:25:35.566 DEBUG: webapp.JettyWebXmlConfiguration - Configuring web-jetty.xml
2013-01-29/14:25:35.571 DEBUG: webapp.MetaData - metadata resolve o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/}
2013-01-29/14:25:35.598 DEBUG: servlet.ServletHandler - filterNameMap={}
2013-01-29/14:25:35.599 DEBUG: servlet.ServletHandler - pathFilters=null
2013-01-29/14:25:35.599 DEBUG: servlet.ServletHandler - servletFilterMap=null
2013-01-29/14:25:35.603 DEBUG: servlet.ServletHandler - servletPathMap={*.jsp=org.apache.jasper.servlet.JspServlet-1, /HttpHandler=com.smsgh.unitysmpp.Http.Reque
stHandlers.HttpRequestProcessor-1, /=default}
2013-01-29/14:25:35.607 DEBUG: servlet.ServletHandler - servletNameMap={default=default, org.eclipse.jetty.servlet.DefaultServlet-1=org.eclipse.jetty.servlet.Def
aultServlet-1, org.apache.jasper.servlet.JspServlet-1=org.apache.jasper.servlet.JspServlet-1, com.smsgh.unitysmpp.Http.RequestHandlers.HttpRequestProcessor-1=com
.smsgh.unitysmpp.Http.RequestHandlers.HttpRequestProcessor-1}
2013-01-29/14:25:35.612 DEBUG: servlet.ServletHandler - filterNameMap={}
2013-01-29/14:25:35.615 DEBUG: servlet.ServletHandler - pathFilters=null
2013-01-29/14:25:35.620 DEBUG: servlet.ServletHandler - servletFilterMap=null
2013-01-29/14:25:35.624 DEBUG: servlet.ServletHandler - servletPathMap={*.XSP=jsp, *.JSPX=jsp, *.jspf=jsp, *.jsp=jsp, /HttpHandler=com.smsgh.unitysmpp.Http.Reque
stHandlers.HttpRequestProcessor-1, *.JSPF=jsp, *.jspx=jsp, *.xsp=jsp, /=default, *.JSP=jsp}
2013-01-29/14:25:35.628 DEBUG: servlet.ServletHandler - servletNameMap={jsp=jsp, default=default, org.eclipse.jetty.servlet.DefaultServlet-1=org.eclipse.jetty.se
rvlet.DefaultServlet-1, org.apache.jasper.servlet.JspServlet-1=org.apache.jasper.servlet.JspServlet-1, com.smsgh.unitysmpp.Http.RequestHandlers.HttpRequestProces
sor-1=com.smsgh.unitysmpp.Http.RequestHandlers.HttpRequestProcessor-1}
2013-01-29/14:25:35.647 DEBUG: component.Container - Container org.eclipse.jetty.servlet.ServletHandler@247039 + org.eclipse.jetty.servlet.DefaultServlet-1 as se
rvlet
2013-01-29/14:25:35.648 DEBUG: component.Container - Container org.eclipse.jetty.servlet.ServletHandler@247039 + org.apache.jasper.servlet.JspServlet-1 as servle
t
2013-01-29/14:25:35.648 DEBUG: component.Container - Container org.eclipse.jetty.servlet.ServletHandler@247039 + com.smsgh.unitysmpp.Http.RequestHandlers.HttpReq
uestProcessor-1 as servlet
2013-01-29/14:25:35.652 DEBUG: component.Container - Container org.eclipse.jetty.servlet.ServletHandler@247039 + default as servlet
2013-01-29/14:25:35.656 DEBUG: component.Container - Container org.eclipse.jetty.servlet.ServletHandler@247039 + jsp as servlet
2013-01-29/14:25:35.661 DEBUG: component.Container - Container org.eclipse.jetty.servlet.ServletHandler@247039 + [/]=>org.eclipse.jetty.servlet.DefaultServlet-1
as servletMapping
2013-01-29/14:25:35.665 DEBUG: component.Container - Container org.eclipse.jetty.servlet.ServletHandler@247039 + [*.jsp]=>org.apache.jasper.servlet.JspServlet-1
as servletMapping
2013-01-29/14:25:35.670 DEBUG: component.Container - Container org.eclipse.jetty.servlet.ServletHandler@247039 + [/HttpHandler]=>com.smsgh.unitysmpp.Http.Request
Handlers.HttpRequestProcessor-1 as servletMapping
2013-01-29/14:25:35.674 DEBUG: component.Container - Container org.eclipse.jetty.servlet.ServletHandler@247039 + [/]=>default as servletMapping
2013-01-29/14:25:35.678 DEBUG: component.Container - Container org.eclipse.jetty.servlet.ServletHandler@247039 + [*.jsp, *.jspf, *.jspx, *.xsp, *.JSP, *.JSPF, *.
JSPX, *.XSP]=>jsp as servletMapping
2013-01-29/14:25:35.683 DEBUG: component.Container - Container org.eclipse.jetty.security.ConstraintSecurityHandler@5843ae41 + org.eclipse.jetty.servlet.ServletH
andler@247039 as handler
2013-01-29/14:25:35.687 DEBUG: component.Container - Container org.eclipse.jetty.server.session.SessionHandler@43655aac + org.eclipse.jetty.security.ConstraintSe
curityHandler@5843ae41 as handler
2013-01-29/14:25:35.691 DEBUG: component.Container - Container org.eclipse.jetty.server.session.SessionHandler@43655aac + org.eclipse.jetty.server.session.HashSe
ssionManager@3323f4c5 as sessionManager
2013-01-29/14:25:35.695 DEBUG: component.Container - Container o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/} + org.eclipse.jetty.server.session.S
essionHandler@43655aac as handler
2013-01-29/14:25:35.700 DEBUG: component.AbstractLifeCycle - starting org.eclipse.jetty.server.session.SessionHandler@43655aac
2013-01-29/14:25:35.704 DEBUG: component.AbstractLifeCycle - starting org.eclipse.jetty.server.session.HashSessionManager@3323f4c5
2013-01-29/14:25:35.712 DEBUG: component.Container - Container org.eclipse.jetty.server.Server@6f8a8b32 + org.eclipse.jetty.server.session.HashSessionIdManager@5
2d8a522 as sessionIdManager
2013-01-29/14:25:35.713 DEBUG: component.AbstractLifeCycle - starting org.eclipse.jetty.server.session.HashSessionIdManager@52d8a522
2013-01-29/14:25:35.717 DEBUG: component.AbstractLifeCycle - STARTED org.eclipse.jetty.server.session.HashSessionIdManager@52d8a522
2013-01-29/14:25:35.722 DEBUG: component.AbstractLifeCycle - STARTED org.eclipse.jetty.server.session.HashSessionManager@3323f4c5
2013-01-29/14:25:35.725 DEBUG: component.AbstractLifeCycle - starting org.eclipse.jetty.security.ConstraintSecurityHandler@5843ae41
Null identity service, trying login service: null
Finding identity service: null
2013-01-29/14:25:35.738 DEBUG: component.AbstractLifeCycle - starting org.eclipse.jetty.servlet.ServletHandler@247039
2013-01-29/14:25:35.742 DEBUG: servlet.ServletHandler - filterNameMap={}
2013-01-29/14:25:35.746 DEBUG: servlet.ServletHandler - pathFilters=null
2013-01-29/14:25:35.750 DEBUG: servlet.ServletHandler - servletFilterMap=null
2013-01-29/14:25:35.754 DEBUG: servlet.ServletHandler - servletPathMap={*.XSP=jsp, *.JSPX=jsp, *.jspf=jsp, *.jsp=jsp, /HttpHandler=com.smsgh.unitysmpp.Http.Reque
stHandlers.HttpRequestProcessor-1, *.JSPF=jsp, *.jspx=jsp, *.xsp=jsp, /=default, *.JSP=jsp}
2013-01-29/14:25:35.759 DEBUG: servlet.ServletHandler - servletNameMap={jsp=jsp, default=default, org.eclipse.jetty.servlet.DefaultServlet-1=org.eclipse.jetty.se
rvlet.DefaultServlet-1, org.apache.jasper.servlet.JspServlet-1=org.apache.jasper.servlet.JspServlet-1, com.smsgh.unitysmpp.Http.RequestHandlers.HttpRequestProces
sor-1=com.smsgh.unitysmpp.Http.RequestHandlers.HttpRequestProcessor-1}
2013-01-29/14:25:35.763 DEBUG: handler.AbstractHandler - starting org.eclipse.jetty.servlet.ServletHandler@247039
2013-01-29/14:25:35.767 DEBUG: component.AbstractLifeCycle - STARTED org.eclipse.jetty.servlet.ServletHandler@247039
2013-01-29/14:25:35.771 DEBUG: handler.AbstractHandler - starting org.eclipse.jetty.security.ConstraintSecurityHandler@5843ae41
2013-01-29/14:25:35.775 DEBUG: component.AbstractLifeCycle - STARTED org.eclipse.jetty.security.ConstraintSecurityHandler@5843ae41
2013-01-29/14:25:35.780 DEBUG: handler.AbstractHandler - starting org.eclipse.jetty.server.session.SessionHandler@43655aac
2013-01-29/14:25:35.784 DEBUG: component.AbstractLifeCycle - STARTED org.eclipse.jetty.server.session.SessionHandler@43655aac
2013-01-29/14:25:35.788 DEBUG: handler.AbstractHandler - starting o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/}
2013-01-29/14:25:35.792 DEBUG: component.AbstractLifeCycle - starting org.eclipse.jetty.servlet.ErrorPageErrorHandler@4436f0c9
2013-01-29/14:25:35.796 DEBUG: handler.AbstractHandler - starting org.eclipse.jetty.servlet.ErrorPageErrorHandler@4436f0c9
2013-01-29/14:25:35.800 DEBUG: component.AbstractLifeCycle - STARTED org.eclipse.jetty.servlet.ErrorPageErrorHandler@4436f0c9
2013-01-29/14:25:35.806  INFO: handler.ContextHandler - started o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/}
2013-01-29/14:25:35.808  INFO: handler.ContextHandler - started o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/}
2013-01-29/14:25:35.813 DEBUG: component.AbstractLifeCycle - starting com.smsgh.unitysmpp.Http.RequestHandlers.HttpRequestProcessor-1
2013-01-29/14:25:35.816 DEBUG: servlet.Holder - Holding class com.smsgh.unitysmpp.Http.RequestHandlers.HttpRequestProcessor
2013-01-29/14:25:35.826 DEBUG: component.AbstractLifeCycle - STARTED com.smsgh.unitysmpp.Http.RequestHandlers.HttpRequestProcessor-1
2013-01-29/14:25:35.827 DEBUG: component.AbstractLifeCycle - starting jsp
2013-01-29/14:25:35.828 DEBUG: servlet.Holder - Holding class org.apache.jasper.servlet.JspServlet
2013-01-29/14:25:35.912 DEBUG: component.AbstractLifeCycle - STARTED jsp
2013-01-29/14:25:35.912 DEBUG: component.AbstractLifeCycle - starting org.apache.jasper.servlet.JspServlet-1
2013-01-29/14:25:35.913 DEBUG: servlet.Holder - Holding class org.apache.jasper.servlet.JspServlet
2013-01-29/14:25:35.917 DEBUG: component.AbstractLifeCycle - STARTED org.apache.jasper.servlet.JspServlet-1
2013-01-29/14:25:35.921 DEBUG: component.AbstractLifeCycle - starting default
2013-01-29/14:25:35.924 DEBUG: servlet.Holder - Holding class org.eclipse.jetty.servlet.DefaultServlet
2013-01-29/14:25:35.939 DEBUG: servlet.DefaultServlet - resource base = null
2013-01-29/14:25:35.939 DEBUG: component.AbstractLifeCycle - STARTED default
2013-01-29/14:25:35.940 DEBUG: component.AbstractLifeCycle - starting org.eclipse.jetty.servlet.DefaultServlet-1
2013-01-29/14:25:35.944 DEBUG: servlet.Holder - Holding class org.eclipse.jetty.servlet.DefaultServlet
2013-01-29/14:25:35.948 DEBUG: component.AbstractLifeCycle - STARTED org.eclipse.jetty.servlet.DefaultServlet-1
2013-01-29/14:25:35.953 DEBUG: webapp.WebAppContext - postConfigure o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/} with org.eclipse.jetty.webapp.W
ebInfConfiguration@240766c0
2013-01-29/14:25:35.957 DEBUG: webapp.WebAppContext - postConfigure o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/} with org.eclipse.jetty.webapp.W
ebXmlConfiguration@2d9c1743
2013-01-29/14:25:35.960 DEBUG: webapp.WebAppContext - postConfigure o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/} with org.eclipse.jetty.webapp.M
etaInfConfiguration@8453227
2013-01-29/14:25:35.965 DEBUG: webapp.WebAppContext - postConfigure o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/} with org.eclipse.jetty.webapp.F
ragmentConfiguration@76dfa2ae
2013-01-29/14:25:35.970 DEBUG: webapp.WebAppContext - postConfigure o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/} with org.eclipse.jetty.webapp.J
ettyWebXmlConfiguration@54318a7a
2013-01-29/14:25:35.974 DEBUG: component.AbstractLifeCycle - STARTED o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/}
2013-01-29/14:25:35.978 DEBUG: handler.AbstractHandler - starting org.eclipse.jetty.server.handler.ContextHandlerCollection@72fa3f1b
2013-01-29/14:25:35.981 DEBUG: component.AbstractLifeCycle - STARTED org.eclipse.jetty.server.handler.ContextHandlerCollection@72fa3f1b
2013-01-29/14:25:35.986 DEBUG: handler.AbstractHandler - starting org.eclipse.jetty.server.Server@6f8a8b32
2013-01-29/14:25:35.990 DEBUG: component.AbstractLifeCycle - starting qtp890550801{8<=0<=0/254,-1}
2013-01-29/14:25:35.997 DEBUG: component.AbstractLifeCycle - STARTED qtp890550801{8<=0<=8/254,0}
2013-01-29/14:25:35.999 DEBUG: component.AbstractLifeCycle - starting SocketConnector@localhost:8080
2013-01-29/14:25:36.008 DEBUG: component.AbstractLifeCycle - starting null/null
2013-01-29/14:25:36.018 DEBUG: component.AbstractLifeCycle - STARTED PooledBuffers [0/1024@6144,0/1024@16384,0/1024@-]/PooledBuffers [0/1024@6144,0/1024@32768,0/
1024@-]
2013-01-29/14:25:36.029  INFO: server.AbstractConnector - Started SocketConnector@localhost:8080
2013-01-29/14:25:36.030 DEBUG: component.AbstractLifeCycle - STARTED SocketConnector@localhost:8080
2013-01-29/14:25:36.031 DEBUG: component.AbstractLifeCycle - STARTED org.eclipse.jetty.server.Server@6f8a8b32
2013-01-29/14:25:36.035  INFO: Portal.WebStartup - Jetty Web Container running.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:17:24.807

你的 java_home 和 path 变量是如何定义的？他们指向 jre 还是 jdk 安装？

你能发布你的码头启动日志的开始吗？

# java - 在java中使用构造函数的问题

> ID：14584878
> 
> 赞同：0
> 
> 时间：2013-01-29T14:10:20.807
> 
> 标签：java, android, constructor

我想在类之间传递一些数据，但我无法让它工作。在线获取 NullPointerException`home.adapter.updateStatus();`

主班

```
public class HomeScreen extends Activity implements OnClickListener{
SocialAuthAdapter adapter;

    protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    adapter = new SocialAuthAdapter(new ResponseListener());
    adapter.addProvider(Provider.TWITTER, R.drawable.button_twitter);
    }
} 
```

助手类

```
 public class ResponseListener implements DialogListener {

HomeScreen home = new HomeScreen();

    public void onComplete(Bundle values) {
    home.adapter.updateStatus("update");
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:15:08.377

我建议适配器没有被初始化，这只能意味着 onCreate() 没有被调用......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:18:53.127

当第一次启动 Activity 时，只会调用一次 onCreate() 方法。当您为您的活动创建对象时，它不会被创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:15:26.510

您`HomeScreen home = new HomeScreen();`由构造函数实例化，但在 HomeScreen 类中，您`adapter`在方法中实例化`onCreate()`。您的 HomeScreen 构造函数是否调用了此方法？

如果不是，则适配器为空，因此您获得了 NPE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T14:15:52.167

你应该搬家：

```
adapter = new SocialAuthAdapter(new ResponseListener());
adapter.addProvider(Provider.TWITTER, R.drawable.button_twitter); 
```

像这样`HomeScreen`构造函数：

```
public class HomeScreen extends Activity implements OnClickListener {
    public SocialAuthAdapter adapter;

    public HomeScreen() {
        adapter = new SocialAuthAdapter(new ResponseListener());
        adapter.addProvider(Provider.TWITTER, R.drawable.button_twitter);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T14:16:35.793

在您的代码中更改此行

```
 adapter = new SocialAuthAdapter(new ResponseListener(HomeScreen.this)); 
```

助手类，

```
 public class ResponseListener implements DialogListener {
 private HomeScreen context;
 public ResponseListener(HomeScreen homescreen) {
    context = homescreen;

}

} 
```

# jboss - 在域模式下运行 jboss

> ID：14584880
> 
> 赞同：1
> 
> 时间：2013-01-29T14:10:22.430
> 
> 标签：jboss, jboss7.x, application-server

我需要在我的应用程序中实现集群机制。在执行此操作时，我在启动 jbossAS7 时遇到错误错误是::

```
=========================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: /home/chandrashekar/CHE/SoftWares/jboss-as-7.1.1.Final

  JAVA: java

  JAVA_OPTS: -Xms64m -Xmx512m -XX:MaxPermSize=256m -Djava.net.preferIPv4Stack=true -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -Djboss.domain.default.config=domain.xml -Djboss.host.default.config=host.xml

=========================================================================

19:18:52,599 INFO  [org.jboss.modules] (main) JBoss Modules version 1.1.1.GA
19:18:52,688 INFO  [org.jboss.as.process.Host Controller.status] (main) JBAS012017: Starting process 'Host Controller'
[Host Controller] 19:18:53,082 INFO  [org.jboss.modules] (main) JBoss Modules version 1.1.1.GA
[Host Controller] 19:18:53,196 INFO  [org.jboss.msc] (main) JBoss MSC version 1.0.2.GA
[Host Controller] 19:18:53,251 INFO  [org.jboss.as] (MSC service thread 1-3) JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
[Host Controller] 19:18:54,070 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) Operation ("add") failed - address: ([
[Host Controller]     ("host" => "master"),
[Host Controller]     ("interface" => "management")
[Host Controller] ]) - failure description: "JBAS014692: Invalid address ${jboss.bind.address.management:192.168.9.252 (${jboss.bind.address.management:192.168.9.252)"
[Host Controller] 19:18:54,098 INFO  [org.xnio] (MSC service thread 1-3) XNIO Version 3.0.3.GA
[Host Controller] 19:18:54,110 INFO  [org.xnio.nio] (MSC service thread 1-3) XNIO NIO Implementation Version 3.0.3.GA
[Host Controller] 19:18:54,130 INFO  [org.jboss.remoting] (MSC service thread 1-3) JBoss Remoting version 3.2.3.GA
[Host Controller] 19:18:54,327 INFO  [org.jboss.as.controller] (MSC service thread 1-4) JBAS014774: Service status report
[Host Controller] JBAS014775:    New missing/unsatisfied dependencies:
[Host Controller]       service jboss.network.management (missing) dependents: [service jboss.host.controller.server-inventory] 
[Host Controller] 
```

# 我的 host.xml 是::

```
<management>
    <security-realms>
        <security-realm name="ManagementRealm">
            <authentication>
                <properties path="mgmt-users.properties" relative-to="jboss.domain.config.dir"/>
            </authentication>
        </security-realm>
        <security-realm name="ApplicationRealm">
            <authentication>
                <properties path="application-users.properties" relative-to="jboss.domain.config.dir" />
            </authentication>
        </security-realm>
    </security-realms>
    <management-interfaces>
        <native-interface security-realm="ManagementRealm">
            <socket interface="management" port="${jboss.management.native.port:9999}"/>
        </native-interface>
        <http-interface security-realm="ManagementRealm">
            <socket interface="management" port="${jboss.management.http.port:9990}"/>
        </http-interface>
    </management-interfaces>
</management>

<domain-controller>
   <local/>
   <!-- Alternative remote domain controller configuration with a host and port -->
   <!-- <remote host="${jboss.domain.master.address}" port="${jboss.domain.master.port:9999}"/> -->
</domain-controller>

<interfaces>
    <interface name="management">
        <inet-address value="${jboss.bind.address.management:192.168.9.252"/>
    </interface>
    <interface name="public">
       <inet-address value="${jboss.bind.address:192.168.9.252}"/>
    </interface>
    <interface name="unsecure">
        <!-- Used for IIOP sockets in the standard configuration.
             To secure JacORB you need to setup SSL -->
        <inet-address value="${jboss.bind.address.unsecure:192.168.9.252}"/>
    </interface>
</interfaces>

<jvms>
   <jvm name="default">
      <heap size="64m" max-size="256m"/>
      <permgen size="256m" max-size="256m"/>
        <jvm-options>
            <option value="-server"/>
        </jvm-options>
   </jvm>
</jvms>

<servers>
    <server name="server-one" group="main-server-group">
        <!-- Remote JPDA debugging for a specific server
        <jvm name="default">
          <jvm-options>
            <option value="-Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=n"/>
          </jvm-options>
       </jvm>
       -->
    </server>
    <server name="server-two" group="main-server-group" auto-start="true">
        <!-- server-two avoids port conflicts by incrementing the ports in
             the default socket-group declared in the server-group -->
        <socket-bindings port-offset="150"/>
    </server>
    <server name="server-three" group="other-server-group" auto-start="false">
        <!-- server-three avoids port conflicts by incrementing the ports in
             the default socket-group declared in the server-group -->
        <socket-bindings port-offset="250"/>
    </server>
</servers> 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T17:01:42.220

在您的第一个界面上，您缺少尾随`}`.

你有：

```
<inet-address value="${jboss.bind.address.management:192.168.9.252"/> 
```

它应该是：

```
<inet-address value="${jboss.bind.address.management:192.168.9.252}"/> 
```

# azure - 如何为静态 HTML 后备站点配置 Windows Azure Web 角色实例

> ID：14584884
> 
> 赞同：1
> 
> 时间：2013-01-29T14:10:36.277
> 
> 标签：azure, failover, fallback

我在 Windows Azure 上托管了一个高流量网站，即 2 个大型 Web 角色实例，以确保 99.95% 的可用性。

但是，在这些实例关闭的极端情况下（可能是由于应用程序问题/压力），我将如何配置另一个 3rd Web 角色实例（这将具有静态内容 - 它是一个后备静态站点）以便它自动服务传入的请求。

请注意，当两个实例都失败时，我只需要自动重定向/激活第三个角色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:51:43.837

我会使用[Azure 流量管理器](http://msdn.microsoft.com/en-us/library/windowsazure/hh744833.aspx)和不同数据中心中的小型 Webrole 或 DynDNS 之类的服务来监视端点并提供故障转移到托管在 Azure 之外的另一个站点。

Azure 流量管理器不会重定向到非 Azure 托管站点。

# c# - 如何制定这个外键命名约定？

> ID：14584885
> 
> 赞同：2
> 
> 时间：2013-01-29T14:10:42.000
> 
> 标签：c#, fluent-nhibernate, naming-conventions, fluent-nhibernate-mapping

我正在尝试使用 Fluent NHibernate 命名约定来使我的外键遵循以下命名标准：

```
fk<table name>_<foreign table name>_<underscore delimited column list> 
```

...但是使用约定，我似乎无法获得表名。我可以做这样的事情：

```
var fkIndexConvention = ConventionBuilder.Reference.Always(x =>
    x.ForeignKey(string.Format("ix{0}_{1}", x.Class.Name, x.Property.Name))); 
```

这似乎有点接近，但我真的很想引用两个相关的表和所涉及的列。我怎样才能做到这一点？

# javascript - django-autocomplete-light 给出 javascript 错误

> ID：14584886
> 
> 赞同：0
> 
> 时间：2013-01-29T14:10:43.163
> 
> 标签：javascript, django, django-autocomplete-light

我正在使用 django-autocomplete-light 来呈现一些自动完成选项。

我在网站上有一个地方可以正常工作，但是还有另一个地方它不工作，实际上它部分工作。

自动完成选项呈现得很好，但是当用户单击其中一个时，它会抛出：

> 未捕获的类型错误：对象 [object Object] 没有方法“yourlabsWidget”

有什么区别？

在它工作的页面上，我正在渲染整个表单。在这个小部件中，我只使用成语 {{ form.field }} 中的字段。

**编辑**

来自 django-autocomplete-light 的 javascript 文件在两个页面上都加载得很好。

有人有线索吗？

**编辑 2**

```
<head>
    <script type="text/javascript" src="/static/js/jquery/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="/static/js/jquery/jquery-ui-1.9.2.custom.min.js"></script>
    <script type="text/javascript" src="/static/js/bootstrap/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/css/jquery/jquery-ui-1.9.2.custom.min.css">
    <link rel="stylesheet" type="text/css" href="/static/css/bootstrap/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/static/css/main.css">

<script type="text/javascript" src="/static/autocomplete_light/autocomplete.js"></script>
<script type="text/javascript" src="/static/autocomplete_light/widget.js"></script>
<script type="text/javascript" src="/static/autocomplete_light/addanother.js"></script>
<script type="text/javascript" src="/static/autocomplete_light/text_widget.js"></script>
<script type="text/javascript" src="/static/autocomplete_light/remote.js"></script>
<link rel="stylesheet" type="text/css" href="/static/autocomplete_light/style.css">
    <script data-main="/static/js/rotas.js/main.js" src="/static/js/require/require.js"></script>    
<script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="main" src="/static/js/rotas.js/main.js"></script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T09:50:33.650

如果 yourlabsAutocomplete 扩展被正确添加到 jquery 实例中，然后变为未定义：另一个 jquery 加载在前一个之上。

如果使用 require.js，那么：

*   不要手动加载 jquery ，通过 require.js加载 jquery**和自动完成脚本，**
*   要么不通过 require.js 加载 jquery

如果有疑问，`<script>`从生成的页面中提取标签，并使用 firebug 或 webkit 检查器检查 jquery 是否加载了两次。

django-autocomplete-light 不打算弄乱您的 jquery/javascript 策略。因此，它没有理由妨碍您 - 如果有，则意味着您的 javascript 加载*策略*有问题。

# sql - 在 oracle 中选择日期时间列时重复记录

> ID：14584888
> 
> 赞同：0
> 
> 时间：2013-01-29T14:10:47.523
> 
> 标签：sql, oracle

我有两个表，我想做这个查询：

```
SELECT table1.name, table2.date 
FROM table1 
JOIN table2 ON table1.id=table2.id 
AND table2.date >= to_date('01/28/2013', 'mm/dd/yy HH24:mi:ss') 
```

问题是 table2.date 是一个日期时间字段，您可以在同一天（假设是 01/28）有两条或多条相同 table2.id 的记录，我只想获取每个 id 的一条记录

我尝试使用 trunc 方法解决我的问题：

```
SELECT table1.name, TRUNC(table2.date)
FROM table1 
JOIN table2 ON table1.id=table2.id 
AND TRUNC(table2.date) >= to_date('01/28/2013', 'mm/dd/yy') 
```

部分有效，重复的记录不再显示，但我的问题是我需要日期时间字段的时间部分

如何在不使用 TRUNC 的情况下避免重复记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:33:02.880

`row_number()`执行此操作的规范方法是使用和子查询选择一行：

```
SELECT table1.name, t2.date 
FROM table1 JOIN
     (select t.*, ROW_NUMBER() over (partition by id order by date) as seqnum
      from table2 t
     ) t2
     ON table1.id=table2.id and seqnum = 1
WHERE table2.date >= to_date('01/28/2013', 'mm/dd/yy HH24:mi:ss') 
```

但是，您可以使用聚合做您想做的事情：

```
SELECT table1.name, min(table2.date)
FROM table1 
JOIN table2 ON table1.id=table2.id 
AND table2.date >= to_date('01/28/2013', 'mm/dd/yy HH24:mi:ss')
group by table1.name, trunc(table2.date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:16:06.133

为什么不从选择中删除 trunc 函数：

```
SELECT table1.name, table2.date
FROM table1 
JOIN table2 ON table1.id=table2.id 
AND TRUNC(table2.date) >= to_date('01/28/2013', 'mm/dd/yyyy') 
```

# hibernate - 如何使用子选择注解定义视图实体类

> ID：14584890
> 
> 赞同：2
> 
> 时间：2013-01-29T14:11:01.283
> 
> 标签：hibernate

我想定义一个只读视图实体类。这就是为什么我像下课一样写。但根据项目使用的 jars 不包含 Subselect 和 Synchronize 注释类。为了解决这个问题，我尝试用旧的罐子更换一些罐子。但是又发生了不兼容的异常。如果哪个兼容的 jar 列表包含 org.hibernate.annotations.Subselect.class，我会强烈学习

在 ADF 平台和 Weblogic 10.3 中开发使用这些休眠版本：

```
hibernate3.jar
hibernate-annotations-3.4.0.GA.jar
hibernate-commons-annotations-3.3.0.ga.jar
hibernate-entitymanager-3.4.0.GA.jar
hibernate-validator-4.1.0.Final.jar 
```

在需要使用 Subselect 注释类之前，这种组合对我来说已经足够且有用了

请帮助我提前谢谢Brgds

```
import com.arsivist.structure.BaseEntityView;

import java.util.ArrayList;
import java.util.Collection;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;
import javax.persistence.Transient;

import org.hibernate.annotations.Immutable;
import org.hibernate.annotations.Subselect;
import org.hibernate.annotations.Synchronize;

@Entity(name = "IntegrationDepartment")
@Immutable
@Subselect("SELECT * FROM DEPARTMENTVIEW")
@Synchronize("DEPARTMENTVIEW")
public class IntegrationDepartment extends BaseEntityView
{
private IntegrationDepartment dependentDepartment;
private String code;
private String name;
private int departmentLevel;
private boolean excludeDistribution;

private Collection<IntegrationDepartment> departmentList;

public IntegrationDepartment()
{
entityName = "IntegrationDepartment";
departmentList = new ArrayList<IntegrationDepartment>();
}

public IntegrationDepartment(int id, String code)
{
entityName = "IntegrationDepartment";
departmentList = new ArrayList<IntegrationDepartment>();

this.id = id;
this.code = code;
}

@Id
@Column(name = "ID")
public int getId()
{
return id;
}

public void setId(int id)
{
this.id = id;
}

public void setDependentDepartment(IntegrationDepartment dependentDepartment)
{
this.dependentDepartment = dependentDepartment;
}

@ManyToOne(targetEntity = com.roketsan.integrationmodel.entity.IntegrationDepartment.class)
@JoinColumn(name = "DEPENDENTDEPARTMENTID")
public IntegrationDepartment getDependentDepartment()
{
return dependentDepartment;
}

public void setCode(String code)
{
this.code = code;
}

@Column(name = "CODE")
public String getCode()
{
return code;
}

public void setName(String name)
{
this.name = name;
}

@Column(name = "NAME")
public String getName()
{
return name;
}

public void setDepartmentLevel(int departmentLevel)
{
this.departmentLevel = departmentLevel;
}

@Column(name = "DEPARTMENTLEVEL")
public int getDepartmentLevel()
{
return departmentLevel;
}

public void setDepartmentList(Collection<IntegrationDepartment> departmentList)
{
this.departmentList = departmentList;
}

@OneToMany(mappedBy = "dependentDepartment")
@JoinColumn(name = "DEPENDENTDEPARTMENTID")
public Collection<IntegrationDepartment> getDepartmentList()
{
return departmentList;
}

public void setExcludeDistribution(boolean excludeDistribution)
{
this.excludeDistribution = excludeDistribution;
}

@Column(name = "EXCLUDEDISTRIBUTION")
public boolean isExcludeDistribution()
{
return excludeDistribution;
}

@Override
@Transient
public int compareTo(Object object)
{
if (!(object instanceof BaseEntityView))
throw new ClassCastException();

IntegrationDepartment baseEntity = (IntegrationDepartment)object;
Integer comparableElementA = getDepartmentLevel();
Integer comparableElementB = baseEntity.getDepartmentLevel();

return comparableElementA.compareTo(comparableElementB);
}

public String toString()
{
return "" + getCode();
}
} 
```

# c - 超过最大允许大小 (80000000)

> ID：14584892
> 
> 赞同：1
> 
> 时间：2013-01-29T14:11:13.810
> 
> 标签：c, linker-errors, max

> **可能重复：**
> [链接：致命错误 LNK1248：图像大小超过最大允许大小 (80000000)](https://stackoverflow.com/questions/11211840/link-fatal-error-lnk1248-image-size-exceeds-maximum-allowable-size-80000000)

```
#define no_cust 4000
#define no_plant 50  
#define no_sup 2000  
#define No_population 100
#define Iteration 3

struct Output2{
    long double RandomZhj[No_population];
    double Population[No_population];   
    long double result;
    long double cost_sup_to_plant;
    long double velocity[No_population];        
}Zhj[no_sup][no_plant],Whj[no_sup][no_plant],Vhj_t1[no_sup][no_plant]; 
```

当我运行程序时，它显示：

> 致命错误 LNK1248：图像大小 (818D4000) 超出最大允许大小 (80000000)

我想知道如何纠正我的程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T14:14:47.600

不要像那样创建大量数组。使用动态分配（即`malloc`/`free`代替）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:15:01.893

这是一个问题。Windows 将静态代码和数据限制为 2GB，而您已经超过了这个。即使在 64 位 Windows 上，无论您有多少内存，静态（不可分配）数据的 2GB 限制仍然存在。

解决方案是将数组从以固定边界声明为可分配，然后使用 ALLOCATE 使它们成为所需的大小。如果您在 64 位系统上，这将允许您拥有更大的阵列。但如果您使用的是 32 位系统，则不能超过 2GB。

您正在尝试分配系统无法为您提供的过多静态内存。所以请让你的数组大小更小。它应该工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T14:15:46.923

结构尺寸过大。您的操作系统将静态代码和数据限制为`80000000(2 GB)`，而您在此处已超出此范围。

在您的程序中动态分配 using`malloc`而不是在构建时执行此操作。

# qt - Qt拖动调整大小小部件？

> ID：14584896
> 
> 赞同：20
> 
> 时间：2013-01-29T14:11:18.810
> 
> 标签：qt

假设我在父小部件内的垂直布局中有两个 Qt 小部件。

有没有办法在它们之间添加一个控件“边框”，这样当您单击并拖动两个宽边框之间的边框区域时，您可以更改它们所占用的父级的相对区域？

也就是说，如果您将其向上拖动，则底部小部件的大小会变大，而顶部小部件的大小会变小。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-29T14:46:28.493

您只需要[QSplitter](http://qt-project.org/doc/qt-4.8/qsplitter.html)。

如果您更喜欢在代码中创建小部件，请查看上面链接中的文档。

如果你喜欢 QtDesigner/QtCreator 中的可视化布局，你可以下载我最近的小[项目](https://github.com/NIA/statistiq)并在 QtCreator 中打开。在[`mainwindow.ui`](https://github.com/NIA/statistiq/blob/master/mainwindow.ui)里面你会发现很多 QSplitters！您可以使用上下文菜单创建它们：选择两个小部件 -> 右键单击​​ -> 布局 -> 在拆分器中垂直布局。

简而言之，用一个 QSplitter 替换您的垂直布局，并将您的两个小部件作为子级添加到其中。

# objective-c - 是否有适用于 Mac OS X 的 Box SDK 或者我必须直接使用 REST API？

> ID：14584900
> 
> 赞同：0
> 
> 时间：2013-01-29T14:11:28.320
> 
> 标签：objective-c, macos, api, sdk, box-api

我正在为跨 iOS 和 OSX 的一套应用程序添加对 Box 的支持。我选择了 Box Framework，它使 iOS 端变得简单。但是那个框架似乎不支持 Mac。有Mac版吗？很快会有吗？有没有其他选择？或者我必须直接对 REST API 进行编码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:50:52.130

不幸的是，我们目前没有适用于 OS X 的 SDK。我们将来可能会构建一个，但现在您应该直接进行 REST API 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T20:46:40.850

我有使用 REST 接口的 OS X base box.com 可可接口。

只需简单的文件和文件夹操作并登录（网络暂时只是同步界面）。我还没有向公众发布它，仍在考虑使其异步并改进它..

此外，在 Mac 上调试 REST API 时，请查看：[http ://code.google.com/p/cocoa-rest-client/](http://code.google.com/p/cocoa-rest-client/)

# mysql - mySql 存储过程的语法错误

> ID：14584901
> 
> 赞同：0
> 
> 时间：2013-01-29T14:11:31.520
> 
> 标签：mysql, sql

这是我的，代码：

```
DELIMITER $$
CREATE PROCEDURE `Get_Next_Processing_Video`
(   
    OUT out_IDVideo                   INT ,
    OUT out_YoutubeIDVideo          VARCHAR(15) 
)

BEGIN

    SELECT  NP.IDVideo INTO out_IDVideo
    FROM    next_processing AS NP
  Limit 1

    UPDATE TABLE    Video AS V 
    SET     V.SchedulingFlag = TRUE
    WHERE   IDVideo = out_IDVideo

END 
```

我不明白错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:13:16.947

错误：

*   你没有终止第一个`SELECT`语句
*   你的关键字`TABLE`后面有一个。`UPDATE`

固定代码：

```
DELIMITER $$
CREATE PROCEDURE `Get_Next_Processing_Video`
(   
    OUT out_IDVideo                   INT ,
    OUT out_YoutubeIDVideo          VARCHAR(15) 
)

BEGIN

    SELECT  NP.IDVideo INTO out_IDVideo
    FROM    next_processing AS NP
    Limit 1; 

    UPDATE  Video AS V 
    SET     V.SchedulingFlag = TRUE
    WHERE   IDVideo = out_IDVideo;

END $$
DELIMITER ; 
```

或者，您可以使用`SET`为变量分配值。

```
 SET out_IDVideo = (SELECT   NP.IDVideo 
                        FROM    next_processing AS NP
                        Limit 1); 
```

# iphone - 简单的地图应用

> ID：14584902
> 
> 赞同：-3
> 
> 时间：2013-01-29T14:11:32.437
> 
> 标签：iphone, ios, xcode, ipad

我正在尝试制作建筑物的地图应用程序。

它应该是这样工作的：用户从选择器视图中选择一个房间，按 OK，它应该在该房间所在的地图上放置一个点。

最简单的方法是什么？如何在单独的页面上制作选择器（如在警报页面中 - 您按“+”，它会显示时间选择器），然后它会在建筑物平面图的某个房间上显示点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:39:05.163

在您设置闹钟的时钟应用程序中，单击“+”会显示一个模式视图控制器。您可以分辨，因为它从底部滑到屏幕上。

您有两个不同的控制器，用于两个不同的视图。主控制器将自己设置为“+”按钮的目标，然后当它的动作被调用时，它会简单地执行以下操作：

```
[self presentViewController:theOtherController animated:YES completion:NULL]; 
```

一旦用户在该模态视图上完成了某些操作，您可以发出：

```
[self dismissViewControllerAnimated:YES completion:NULL]; 
```

在此处阅读更多相关信息。

[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)

# java - 错误签署文件 pkcs#7 和 bouncycastle java

> ID：14584903
> 
> 赞同：0
> 
> 时间：2013-01-29T14:11:44.670
> 
> 标签：java, bouncycastle, pkcs#7, pkcs#11

尝试签署文件时出现以下错误。

线程“主”org.bouncycastle.operator.OperatorCreationException 中的异常：设置异常：java.security.NoSuchAlgorithmException：没有这样的算法：org.bouncycastle.operator.jcajce.JcaDigestCalculatorProviderBuilder$1 的提供者 SunPKCS11-eToken 的 1.3.14.3.2.26。在 org.bouncycastle.cms.SignerInfoGenerator 的 org.bouncycastle.cms.SignerInfoGenerator 获取（未知来源）。（未知来源）在 org.bouncycastle.cms.SignerInfoGeneratorBuilder.createGenerator（未知来源）在 org.bouncycastle。 cms.SignerInfoGeneratorBuilder.build(Unknown Source) at org.bouncycastle.cms.jcajce.JcaSignerInfoGeneratorBuilder.build(Unknown Source) at org.bouncycastle.cms.jcajce.JcaSignerInfoGeneratorBuilder.build(Unknown Source) at testapp.Testapp.setUpProvider(Testapp. java:111) 在 testapp.Testapp。main(Testapp.java:74) 原因：java.security.NoSuchAlgorithmException：没有这样的算法：Sun.security.jca.GetInstance.getService(GetInstance.java:83) 的 sun.security.jca.GetInstance.getService(GetInstance.java:83) 的提供者 SunPKCS11-eToken 的 1.3.14.3.2.26 .security.jca.GetInstance.getInstance(GetInstance.java:202) 在 java.security.Security.getImpl(Security.java:688) 在 java.security.MessageDigest.getInstance(MessageDigest.java:233) 在 org.bouncycastle。 jcajce.ProviderJcaJceHelper.createDigest(Unknown Source) at org.bouncycastle.operator.jcajce.OperatorHelper.createDigest(Unknown Source) ... 还有 9 个 Java 结果：1java:202) at java.security.Security.getImpl(Security.java:688) at java.security.MessageDigest.getInstance(MessageDigest.java:233) at org.bouncycastle.jcajce.ProviderJcaJceHelper.createDigest(Unknown Source) at org .bouncycastle.operator.jcajce.OperatorHelper.createDigest(Unknown Source) ... 还有 9 个 Java 结果：1java:202) at java.security.Security.getImpl(Security.java:688) at java.security.MessageDigest.getInstance(MessageDigest.java:233) at org.bouncycastle.jcajce.ProviderJcaJceHelper.createDigest(Unknown Source) at org .bouncycastle.operator.jcajce.OperatorHelper.createDigest(Unknown Source) ... 还有 9 个 Java 结果：1

这是代码：

```
 InputStream cnfStream = new ByteArrayInputStream(pkcs11config.getBytes());
    Provider p = new sun.security.pkcs11.SunPKCS11(cnfStream);
    Security.addProvider(p);
    KeyStore ks = KeyStore.getInstance("PKCS11", p);
    ks.load(null, PASSWORD);
    byte[] signedData = sign(data, ks, p);

public static byte[] sign(byte[] data, KeyStore ks, Provider p) throws Exception {

    String alias = ks.aliases().nextElement();

    List certList = new ArrayList();
    CMSTypedData msg = new CMSProcessableByteArray(data); //Data to sign

    X509Certificate cert = (X509Certificate) ks.getCertificate(alias);
    certList.add(cert); //Adding the X509 Certificate

    Store certs = new JcaCertStore(certList);

    CMSSignedDataGenerator gen = new CMSSignedDataGenerator();
    //Initializing the the BC's Signer
    ContentSigner sha1Signer = new JcaContentSignerBuilder("SHA1withRSA").setProvider(p).build((PrivateKey)ks.getKey(alias, PASSWORD));

    gen.addSignerInfoGenerator(
            new JcaSignerInfoGeneratorBuilder(
            new JcaDigestCalculatorProviderBuilder().setProvider(p).build())
            .build(sha1Signer, cert));
    //adding the certificate
    gen.addCertificates(certs);
    //Getting the signed data
    CMSSignedData sigData = gen.generate(msg, false);
    return sigData.getEncoded();
} 
```

任何想法？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:53:08.900

好的，我最终自己解决了这个问题。这是工作代码：

```
 private void findProvider() {
        String driver;
        byte[] pkcs11config;
        for (int i = indiceDrivers; i < largoDrivers; i++) {
            driver = DRIVERS[i];
            File f = new File(REPO + driver);
            if (!f.exists()) {
                continue;
            }
            pkcs11config = String
                    .format("name = eToken\n library = %s%s", REPO, driver)
                    .getBytes();
            try {
                InputStream cnfStream = new ByteArrayInputStream(pkcs11config);
                provider = new sun.security.pkcs11.SunPKCS11(cnfStream);
                keyStore = KeyStore.getInstance("PKCS11", this.provider);
                Security.addProvider(provider);
                keyStore.load(null, password);
                System.out.println("OK: " + driver);
                break;
            } catch (Exception e) {
                //Solo con fines de prueba
                System.out.println("ERROR: " + driver);
            }
        }
        if (provider == null) {
            throw new RuntimeException("Los drivers del token no estan instalados.");
        } else if (provider != null && keyStore == null) {
            throw new RuntimeException("El token no esta conectado.");
        }
    }

 public void sign(File input, File output) throws Exception {
        String alias = keyStore.aliases().nextElement();
        List certList = new ArrayList();
        CMSTypedData msg = new CMSProcessableFile(input);
        X509Certificate cert = (X509Certificate) keyStore.getCertificate(alias);
        certList.add(cert);
        Store certs = new JcaCertStore(certList);
        CMSSignedDataGenerator gen = new CMSSignedDataGenerator();
        ContentSigner sha1Signer = new JcaContentSignerBuilder("SHA1withRSA").setProvider(provider).build((PrivateKey) keyStore.getKey(alias, password));
        Security.addProvider(new BouncyCastleProvider());
        gen.addSignerInfoGenerator(
                new JcaSignerInfoGeneratorBuilder(
                new JcaDigestCalculatorProviderBuilder().setProvider("BC").build())
                .build(sha1Signer, cert));
        gen.addCertificates(certs);
        CMSSignedData sigData = gen.generate(msg, true);

        FileOutputStream fileOuputStream = new FileOutputStream(output);
        fileOuputStream.write(sigData.getEncoded());
        fileOuputStream.flush();
        fileOuputStream.close();
    } 
```

# tags - cvs：将标签信息写入文件

> ID：14584904
> 
> 赞同：0
> 
> 时间：2013-01-29T14:11:46.057
> 
> 标签：tags, cvs

当我们为客户发布新版本时，我们会在 eclipse (cvs) 中使用版本号标记我们的项目。（例如 2.11.0）

是否可以将此标签（2.11.0）写入文件，以便我们的客户可以告诉我们他当前安装了哪个版本？

干杯，拉齐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:53:31.470

您可以使用[`$Name$`关键字](http://ximbiot.com/cvs/manual/cvs-1.12.13/cvs_12.html#SEC100 "CVS 关键字列表"). 如果您签出特定标签，这将扩展到标签名称。例如。

```
$Name: v2_11_0 $ 
```

顺便说一句，2.11.0 不是有效的 cvs 标签，因为它以数字开头并包含受限字符：

```
[burhan@orion cvstest]$ cvs tag 2.11.0
cvs [tag aborted]: tag `2.11.0' must start with a letter
[burhan@orion cvstest]$ cvs tag v2.11.0
cvs [tag aborted]: tag `v2.11.0' must not contain the characters `$,.:;@/' 
```

# javascript - 如何使 HTML Canvas 在其他分辨率屏幕中使用相同的鼠标位置 X & Y

> ID：14584905
> 
> 赞同：0
> 
> 时间：2013-01-29T14:11:57.060
> 
> 标签：javascript, html, canvas

我的画布游戏具有重定向到另一个菜单的 onclick 按钮。在另一个分辨率显示器中打开我的画布时，所有 X 和 Y 都发生了变化，但没有任何效果。

有没有办法阻止画布受到不同显示器的影响？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-29T14:18:14.970

使用`e.offsetX`and`e.offsetY` 获取画布上的鼠标坐标：

```
var canvas = document.getElementById("canvas"),
    c = canvas.getContext("2d");
canvas.addEventListener('click', handleClick);
canvas.addEventListener('mousemove', handleClick);

function handleClick(e) {
    e = e || window.event;
    console.log(e.offsetX, e.offsetY);
} 
```

# r - rollapply 和 xts 在新版本的 xts 中不起作用

> ID：14584911
> 
> 赞同：2
> 
> 时间：2013-01-29T14:12:20.970
> 
> 标签：r, time-series, xts, zoo

如果我运行这个简单的代码：

```
my_xts <- .xts(1:10*1,1:10)
rollapply(my_xts, list(seq(-2, 0)), sum, partial = 1) 
```

在新版本的 xts (0.9-3) 中，我得到：

```
Error in rollapply.xts(my_xts, list(seq(-2, 0)), sum, partial = 1) : 
(list) object cannot be coerced to type 'integer'
In addition: Warning message:
In rollapply.xts(my_xts, list(seq(-2, 0)), sum, partial = 1) :
partial argument is not currently supported 
```

而在旧的 xts (0.8-6) 中运行平稳。

似乎它与选项宽度有关。就像在 的小插图中一样`rollapply`，“宽度可以是一个列表，与当前时间相比被视为偏移量”。在新版本中这是不可能的。

任何解决方法？是否有可能以`rollapply`不同的方式调用，以实现旧的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:40:55.953

`rollapply.xts`直到版本 0.8-9 才注册为 S3 方法。这就是为什么这对你以前有用。由于没有 xts S3 方法，`rollapply.zoo`因此会被分派，这将返回一个 zoo 对象（不是 xts 对象）。

`rollapply.xts`目前不支持`width=list(...)`，但您可以通过在调用之前将 xts 对象转换为 zoo 对象来获得与之前相同的结果`rollapply`。

```
rollapply(as.zoo(my_xts), list(seq(-2, 0)), sum, partial = 1) 
```

# linux - 在 Linux 和 Win32 下运行的 Perl 模块

> ID：14584915
> 
> 赞同：2
> 
> 时间：2013-01-29T14:12:36.743
> 
> 标签：linux, windows, perl, multiplatform

我有一个需要在 Win32 和 Linux 操作系统中运行的 perl 模块。该模块使用 Win32::Process::List 来避免在 Win32 下与第三方应用程序的并发问题，并且在 Linux 下运行时没有等效要求。

到目前为止，我已经设法拥有同一个模块的两个副本，并为 Linux 版本注释掉了特定于 Win32 的内容——我显然对这种容易出错的方法不满意。

很明显，win 特定的东西在 Linux 中不会“进行安装”。我在我的代码中尝试了一种更柔和的方法，`require Win32::Process::List;`而不是`use Win32::Process::List;`，前者具有传递的优势`perl -c mymodule`- 但在常规使用中仍然失败。

因此我的问题是：除了维护两个不同的代码库之外，是否有更强大的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:20:42.647

怎么样使用[`if module`](https://metacpan.org/module/if)，它允许您`use`根据编译时条件访问模块。

```
use if $^O eq 'MSWin32', 'Win32::Process::List'; 
```

`$^O`内置变量给出了操作系统的名称，并且始终适用`MSWin32`于任何 Windows 系统。

# javascript - 代码作为 Opera UserJS 工作，但在 Chrome 和 Greasemonkey 用户脚本中出现“未定义”错误

> ID：14584916
> 
> 赞同：2
> 
> 时间：2013-01-29T14:12:44.890
> 
> 标签：javascript, cross-browser, greasemonkey, userscripts, userjs

我正在尝试编写一个跨浏览器用户脚本来隐藏 IMDb 的评分，并将其替换为允许用户稍后对节目/电影进行评分的链接。

在 Opera 中，这种方法已经奏效，但 Firefox 和 Chrome 都偶然发现了未定义的函数和/或变量。到目前为止，这是我的代码：

```
function hideimdbratings() {

    if (document.getElementsByClassName("star-box")[0]) {

        reenabled = document.getElementsByClassName("star-box")[0].innerHTML;

        document.getElementsByClassName("star-box")[0].innerHTML = '<a href="#" id="showvote" onclick="reenableit();">Rate!</a>';

    }
}

function reenableit() {
    document.getElementsByClassName("star-box")[0].innerHTML = reenabled;
}

window.addEventListener('load', hideimdbratings, false); 
```

第一部分工作正常，`hideimdbratings()`执行并隐藏评级。

但是，点击“Rate！”链接后，Firefox 和 Chrome 都表示`reenableit()`未定义。

试试这个：

```
onclick="document.getElementsByClassName(\"star-box\")[0].innerHTML = reenabled;" 
```

结果他们说`reenabled`没有定义。

我尝试将代码直接放入事件侦听器中：

```
window.addEventListener("load", function(e) {
// ...
}, false); 
```

以及这种定义函数的方式（对于 Firefox 使用 unsafeWindow）：

```
var window.reenableit = function() { } 
```

但是，无论我做什么，两者都`reenableit()`未定义`reenabled`。据我了解，函数和变量在 Opera 以外的浏览器中都不是全局的，但我似乎还没有找到解决方案。

我错过了什么/做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:52:37.457

我不知道如何使变量或函数成为全局变量，尽管这里有一个解决方法，应该对你很好：

```
function hideimdbratings() {
    if (document.getElementsByClassName('star-box')[0]) {

        // hide the "star-box" container
        var b = document.getElementsByClassName('star-box')[0];
        b.style.display = 'none';

        // add the "Rate!" link
        var n = document.createElement('a');
        n.setAttribute('href', 'javascript:void(0);');
        n.setAttribute('onclick', 'document.getElementsByClassName("star-box")[0].style.display = "block"; this.style.display = "none";');
        n.innerHTML = 'Rate!';
        b.parentNode.insertBefore(n, b.nextSibling);
    }
}

window.addEventListener('load', hideimdbratings, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T11:23:28.793

该代码在 Chrome 中不起作用，因为 Chrome 用户脚本在沙箱（[“孤立世界”](https://stackoverflow.com/a/10828021/331508)）中运行，并且您无法在 Chrome 中设置或使用页面范围的 javascript 对象。而且，Chrome 不完全/正确支持`unsafeWindow`.

该代码*可以*在 Firefox+Greasemonkey 中使用，但要小心使用`unsafeWindow`，但这里不建议这样做（并且对 Chrome 没有帮助）。

当需要以跨浏览器的方式与页面范围的 javascript 交互时，经典的方法是使用[*Script Injection*](https://stackoverflow.com/a/9526370/331508)。这是唯一在 Chrome 中运行良好的东西。

**但是**，最明智的做法是在没有必要的情况下根本不使用页面范围 JS。而且，对于这个问题的内容，您不需要。（提示：永远不要使用`onclick`或类似的属性！总是使用`addEventListener()`，或等效的。）

重构代码以避免离开沙箱范围，它变成：

```
function hideImdbRatings () {
    var oldStarBoxHTML;
    var starBox = document.getElementsByClassName ("star-box");
    if (starBox.length) {
        starBox             = starBox[0];
        oldStarBoxHTML      = starBox.innerHTML;
        starBox.innerHTML   = '<a href="#" id="showVote">Rate!</a>';

        document.getElementById ("showVote").addEventListener (
            "click",
            function () {
                //-- "this" is a special javascript scope.
                this.innerHTML = oldStarBoxHTML;
            }
        );
    }
}

window.addEventListener ('load', hideImdbRatings, false); 
```

**但是 2**，您会注意到到目前为止的***所有代码都破坏了 IMDB 评级小部件的交互。***这是因为它正在覆盖`innerHTML`，这会破坏小部件的事件处理程序。不要那样用`innerHTML`。

最聪明的做法是隐藏块，类似于 Geo 的答案，如下所示：

```
 function hideImdbRatings () {
    var starBox = document.getElementsByClassName ("star-box");
    if (starBox.length) {
        starBox                 = starBox[0];
        starBox.style.display   = 'none';
        var rateLink            = document.createElement ('a');
        rateLink.id             = 'showVote';
        rateLink.href           = '#';
        rateLink.textContent    = 'Rate!';

        starBox.parentNode.insertBefore (rateLink, starBox);

        document.getElementById ("showVote").addEventListener (
            "click",
            function () {
                //-- "this" is a special javascript scope.
                this.style.display      = 'none';
                starBox.style.display   = 'block';
            }
        );
    }
}

window.addEventListener ('load', hideImdbRatings, false); 
```

* * *

* * *

还有**一个额外的因素可能会阻止脚本在 Chrome 中运行。** [默认情况下，Chrome 用户脚本可能会在`load`事件发生后运行。](http://developer.chrome.com/extensions/content_scripts.html#run_at) 要解决此问题，请`@run-at document-end`在脚本[的元数据块中指定。](http://wiki.greasespot.net/Metadata_Block)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:20:47.927

啊哈！找到了。试试这个：

```
var uw = (this.unsafeWindow) ? this.unsafeWindow : window;
var b = document.getElementsByClassName('star-box')[0];
uw.reenabled = b.innerHTML;
b.innerHTML = '<a href="javascript:void(0);" onclick="document.getElementsByClassName(\'star-box\')[0].innerHTML = reenabled;">Rate!</a>'; 
```

受[这篇文章的启发](https://stackoverflow.com/questions/2303147/injecting-js-functions-into-the-page-from-a-greasemonkey-script-on-chrome)

# c++ - std::find 跨越一组 shared_ptr

> ID：14584917
> 
> 赞同：4
> 
> 时间：2013-01-29T14:12:51.970
> 
> 标签：c++, find, containers

我确定我在这里做了一些愚蠢的事情，但我看不到它。为什么以下不编译？

```
#include <algorithm>
#include <memory>
#include <vector>
#include <string>

// A class to play with.  Encapsulates a name.
class StringClass
{
public:
    StringClass(std::string const & name) : MyName(name) 
    {
    }

    std::string const & Name() const
    {
        return MyName;
    }

private:
    std::string MyName;
};

// The set of instances of "StringClass".

std::vector<std::shared_ptr<StringClass>> MyInstances;

// Function returns "true" if a class with the given name exists in the collection.
bool Exists(std::string const & name)
{
    auto i = std::find(MyInstances.begin(), MyInstances.end(), [&](std::shared_ptr<StringClass> const & instance) {
        return instance->Name() == name;
    });

    return i != MyInstances.end();
} 
```

我已经将 shared_ptr 的向量添加到了一个类中。该类有一个 Name() 属性。我要做的就是迭代向量以查找具有给定名称的类的实例。但是，它不会编译:(。

错误是：

> 1>ClCompile: 1> test.cpp 1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\algorithm(41): error C2679: binary '==' : no operator found which take a right - 'const 匿名命名空间'::)' 1> 类型的手动操作数 1> [ 1> _Ty=StringClass 1> ] 1> c:\program files (x86)\microsoft visual studio 10.0\vc\include\algorithm (74) : 参见对函数模板实例化 '_InIt std::_Find*, anonymous-namespace':: &)' 的引用 1> 使用 1> [ 1> _InIt=std::tr1::shared_ptr *, 1> _Ty=StringClass 1> ] 1> c:\svn\trunk\test\test\test.cpp(55) : 参见函数模板实例化 '_InIt std::find,`anonymous-namespace'::<lambda0>' (or there is no acceptable conversion) 1> could be 'built-in C++ operator==(std::_Bool_type, std::_Bool_type)' 1> c:\program files (x86)\microsoft visual studio 10.0\vc\include\exception(470): or 'bool std::operator ==(const std::_Exception_ptr &,const std::_Exception_ptr &)' 1> c:\program files (x86)\microsoft visual studio 10.0\vc\include\exception(475): or 'bool std::operator ==(std::_Null_type,const std::_Exception_ptr &)' 1>
> c:\program files (x86)\microsoft visual studio 10.0\vc\include\exception(481): or 'bool std::operator ==(const std::_Exception_ptr &,std::_Null_type)' 1> c:\program files (x86)\microsoft visual studio 10.0\vc\include\system_error(408): or
> 'bool std::operator ==(const std::error_code &,const std::error_condition &)' 1> c:\program files (x86)\microsoft visual studio 10.0\vc\include\system_error(416): or 'bool std::operator ==(const std::error_condition &,const std::error_code &)' 1> while trying to match the argument list '(std::tr1::shared_ptr<_Ty>, const`
> `anonymous-namespace'::<lambda0>>(_InIt,_InIt,const` `anonymous-namespace'::<lambda0>>(_InIt,_InIt,const _Ty &)' being compiled 1> with 1> [ 1> _InIt=std::_Vector_iterator<std::_Vector_val<std::tr1::shared_ptr<StringClass>,std::allocator<std::tr1::shared_ptr<StringClass>>>>, 1>
> _Myvec=std::_Vector_val<std::tr1::shared_ptr<StringClass>,std::allocator<std::tr1::shared_ptr<StringClass>>>, 1> _Ty=`匿名命名空间':: 1> ] 1> stdafx.cpp 1> 生成代码... 1> 1> 构建失败。1> 1> 经过时间 00:00:00.87 ========== 构建：0 成功，1 失败，0 最新，0 跳过 ==========

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T14:17:07.803

你想用`find_if`，没有`find`。`Find`搜索一个值，`find_if`接受一个谓词。

# networking - 将数据/字符串在线发送到连接到互联网的设备

> ID：14584918
> 
> 赞同：1
> 
> 时间：2013-01-29T14:12:53.530
> 
> 标签：networking, tcp, udp

再会，

我基本上有一台笔记本电脑连接到互联网，具有固定的 IP 地址。我需要为服务器提供一种方法，可能是通过 PHP 脚本，将数据/字符串发送到笔记本电脑并且它能够接收它。

现在，如果我在本地网络中，我可以这样做。但是如果我想从外部网络发送呢？设备是否具有可以通过任何 Internet 连接访问的特定地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:37:21.057

> 设备是否具有可以通过任何 Internet 连接访问的特定地址？

不，它不会，除非您确实为您的笔记本电脑使用了外部 IP（怀疑）。

我能想到的最简单和最快的解决方案是反过来：在您的服务器上打开 TCP 或 UDP 套接字，并使用笔记本电脑连接并从服务器请求数据。当然，它并不适用于所有场景，但在很多情况下它都有效。写更多信息（这样做的目的是什么？有什么要求和限制？）以便可以提供更具体的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:22:40.350

好的，为了更容易解释，假设： - 你的路由器的公共 IP 地址是 10.10.10.10 - 你的笔记本电脑的私有 IP 地址是 192.168.0.1 - 你想通过端口 80 进行通信（因为你提到了 PHP）

您需要做的是配置您的路由器，以便它将发往 10.10.10.10:80 的数据包转发到 192.168.0.1:80。这是最简单的 NAT 形式。

然后从其他任何有 Internet 连接的地方，您可以通过将数据包发送到 10.10.10.10:80 将数据包发送到您的笔记本电脑。

# html - 修复 HTML 结构

> ID：14584926
> 
> 赞同：1
> 
> 时间：2013-01-29T14:13:09.187
> 
> 标签：html, structure

我知道这是一个奇怪的问题，但也许你们中的一些人也遇到过同样的问题。我经营一个网站，用户可以在该网站上共享以 HTML 编写的笔记、论文和任何其他类型的文档。问题是内容结构不是很好：通常，它们不使用标题（h2、h3 等）、<ul> 和 <ol> 列表（它们将列表写为纯文本）等等。

有没有人遇到过这种问题？我该如何解决这个问题？我尝试了一些基于正则表达式的繁重解决方案，但它们不是很准确。

* * *

## 例子

> **需求**——人们准备在一定时间内以各种价格购买的商品或服务的数量，除价格保持不变外，还有其他因素。
> 
> 可能导致需求变化的因素：
> 
> 1\. 口味和偏好
> 
> 2\. 收入
> 
> 供应的非价格决定因素：
> 
> 1\. 成本和技术
> 
> 2\. 提供的其他商品和服务的价格

必须转换为：

> ## 要求
> 
> 人们准备在一定时间内以不同价格购买的商品或服务的数量，除价格保持不变外，还有其他因素。
> 
> ### 可能导致需求变化的因素
> 
> 1.  口味和偏好
> 2.  收入
> 
> ### 供应的非价格决定因素
> 
> 1.  成本和技术
> 2.  提供的其他商品和服务的价格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:36:22.810

我建议您从编辑器中禁用任何现有的 HTML 功能，并改用简单的文本区域，用户可以在其中输入带有降价格式的内容（这与他们当前正在做的非常接近）。

有许多从 Markdown 到 HTML 的转换器，适用于多种语言（参见例如这篇[Wikipedia 文章](http://en.wikipedia.org/wiki/List_of_Markdown_implementations)）。因此，您可以使用 JavaScript 实现进行实时预览（就像 Stack Overflow 一样），并在从数据库创建 HTML 视图时使用另一个服务器端解析器来转换内容。

# jboss - 工作完成时詹金斯杀死 JBoss 服务器

> ID：14584933
> 
> 赞同：6
> 
> 时间：2013-01-29T14:13:27.393
> 
> 标签：jboss, jenkins

我使用 Ant 通过 Jenkins 启动/关闭 JBoss 5 服务器。Ant java spawn 和 fork 设置为“true”，因此命令在后台执行。

詹金斯成功启动服务器，等待两分钟（詹金斯中的“睡眠”命令），然后在睡眠后出于某种奇怪的原因关闭服务器。sleep 命令是构建作业的最后一步。关机说：

```
2013-01-29 17:03:39,332 INFO  [org.jboss.bootstrap.microcontainer.ServerImpl] Runtime     shutdown hook called, forceHalt: true 
```

我用谷歌搜索并尝试了建议的 -Xrs 命令，但没有帮助。这里发生了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T14:34:04.240

Jenkins 有一个叫做*进程树杀手*的东西，它会杀死作业创建的所有进程（即使是那些以 spawn 和 fork 设置为 true 的进程）。

此行为有一些解决方法。

*   禁用进程树杀手

    `-Dhudson.util.ProcessTreeKiller.disable=true`

或者

*   设置环境。JBOSS 进程中的 var BUILD_ID=dontKillMe。

    `export BUILD_ID=dontKillMe`

您可以浏览[ProcessTreeKill](https://wiki.jenkins-ci.org/display/JENKINS/ProcessTreeKiller) wiki 文章或[jenkins JIRA](https://issues.jenkins-ci.org/browse/JENKINS-9185)以找到解决此问题的各种解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T09:20:04.340

[此](https://wiki.jenkins-ci.org/display/JENKINS/Spawning+processes+from+build)来源（评论）建议其他环境变量，显然适用于旧版本的 Jenkins。对我来说，在我开始使用 JENKINS(_SERVER)_COOKIE 之前它不起作用。

# javascript - Yii 比较规则没有修剪

> ID：14584939
> 
> 赞同：0
> 
> 时间：2013-01-29T14:13:50.090
> 
> 标签：javascript, php, validation, yii, yii-validation

我有一个字段“CompanyName”，我需要进行验证。
这就是我所拥有的：

```
public function rules() {
    return array(
        array('CompanyName', 'compare', 'compareValue' => "google", 'operator' => '!=',    'message' => Yii::t('app', 'NOT Google'), 'on' => 'submit'),
    );
} 
```

生成的JS：

```
if(value=="google") {
    messages.push("You wrote google!");
} 
```

我想要的（包括 js 端的修剪）：

```
if($.trim(value)=="google") {
    messages.push("You wrote google!");
} 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:24:55.620

查看[CFilterValidator](http://www.yiiframework.com/doc/api/1.1/CFilterValidator)。我想你正在寻找这样的东西：

```
array('CompanyName', 'filter', 'filter'=>'trim') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:10:46.623

这是我使用的解决方案，如果有人会遇到同样的问题：*它是一个仅实现客户端的自定义验证器

```
class EspecialValidator extends CValidator {

public $message;
public $compareValue;

/**
 * Validates the attribute of the object.
 * If there is any error, the error message is added to the object.
 * @param CModel the object being validated
 * @param Array the attribute being validated
 */
protected function validateAttribute($object, $attribute) {
    parent::validateAttribute($object, $attribute);
}

/**
 *  Returns the JavaScript needed for performing client-side validation
 * @param type $object
 * @param type $attribute
 */
public function clientValidateAttribute($object, $attribute) {
    $js = '
            if($.trim(value)=="' . $this->compareValue . '") {
                    messages.push("' . $this->message . '");
            }
        ';
    return $js;
}

} 
```

从规则，在以下使用它：

```
array('fieldToCheck', 'ext.validators.EspecialValidator', 'compareValue' => 'TextToCompare', 'message' => 'failure message') 
```

# javascript - vbscript MsgBox() 的 Javascript 等效函数

> ID：14584942
> 
> 赞同：2
> 
> 时间：2013-01-29T14:14:10.880
> 
> 标签：javascript, vbscript

我需要将以下函数转换为 javascript，

`MsgBox("Are you a programmer?",0,"Please answer")`

我想我可以使用`confirm("Are you a programmer?")`

但我想知道如何在那里添加按钮顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:22:25.183

Javascript 不具备 vbscript 对此功能的可定制性。是的，它是confirm()。例如，

```
var choice=confirm("pick a button");
if(choice) alert("you picked ok");
else alert("you picked cancel") 
```

您无法控制按钮在 vbscript 中所说的内容。

# c# - Visual Studio 2010 - 应用程序未通过 asp.NET 开发服务器启动，但在生产服务器上工作

> ID：14584944
> 
> 赞同：0
> 
> 时间：2013-01-29T14:14:14.083
> 
> 标签：c#, visual-studio-2010, iis

我正在用 C# 构建一个 .NET 4.0 Web 窗体应用程序。在这个应用程序上工作了大约 4-5 个月后，前几天我从 Visual Studio 2010 去“启动”应用程序并且应用程序不想启动。当尝试在本地主机和该端口上使用 telnet 进行连接时，它会连接，过了一会儿我收到错误“400 - 错误请求”。

有趣的是，当我在另一台 IIS 服务器上发布应用程序时，它工作正常，似乎问题出在 asp.NET 开发服务器上。虽然我知道我可以设置本地 IIS，但我不希望避免这样做，以避免某些可能与本地 IIS 的配置与生产环境不同有关的问题。

我检查了主机文件，重新安装了 Visual Studio 并确认应用程序在发布时可以正常工作。我还检查了该端口没有被另一个进程使用。

我还应该检查什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:25:26.617

如果应用程序无法启动，那么您能够通过端口上的 telnet 连接到它的几率为 0。（它没有运行。）

我假设应用程序可以编译，如果您可以发布它。您是否尝试过在不调试的情况下运行应用程序？CTRL + F5

# html2canvas - 如何在html2canvas中使透明颜色变为白色而不是黑色？

> ID：14584946
> 
> 赞同：20
> 
> 时间：2013-01-29T14:14:24.387
> 
> 标签：html2canvas

我正在尝试使用 html2canvas 截屏：

```
var body = document.getElementById("body")
$(body).html2canvas({onrendered: function( canvas ) {  
     var urlData = canvas.toDataURL("image/jpeg");  
}}); 
```

我身体的背景是透明的，因此由于 jpeg 的 urlData 具有黑色背景（不像浏览器中的白色）。
在这种情况下，如何解决此问题并使背景颜色变为白色？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-09-15T06:33:05.707

我修改了临时： _html2canvas.Util.isTransparent 来自

```
_html2canvas.Util.isTransparent = function(backgroundColor) {
  return (backgroundColor === "transparent" || backgroundColor === "rgba(0, 0, 0, 0)");
}; 
```

到

`_html2canvas.Util.isTransparent = function(backgroundColor) { return (backgroundColor === "transparent" || backgroundColor === "rgba(0, 0, 0, 0)" || backgroundColor === undefined); };`

之后调用带有背景参数集的 html2canvas 就足够了：

```
html2canvas(screenshot_element, {
    background :'#FFFFFF',
    onrendered: function (canvas) {
      .....
    }
  }); 
```

对我来说......将透明视为未定义的背景是有意义的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-17T17:51:04.760

试试这个

```
var body = document.getElementById("body") 
$(body).html2canvas({background:'#fff', onrendered: function( canvas ) {  
 var urlData = canvas.toDataURL("image/jpeg");  
}}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-05-30T10:57:05.517

我想说，现在更简单了（30/05/18） - 只需在 html2canvas 选项中传递 backgroundColor: null ：

```
html2canvas(
    document.querySelector("#some-id-to-export"),
    {backgroundColor: null}
).then(canvas => {$("#id-to-render-transparent-bg-img").html(canvas);}); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-08-23T01:22:40.970

[https://stackoverflow.com/a/23928038/1815624](https://stackoverflow.com/a/23928038/1815624)

> 只需将 css background-color:#ffffff 添加到您的表中即可：)
> 
> 希望这可以帮助

我将内容包装到每个所需页面的 div 中，`class="pdfpage"`然后将 css 设置为`pdfpage{background:#FFFFFF;}`

正如我所评论的那样，我需要将渲染元素的背景设置为白色并不是第一个想法，因为它已经是白色了......但实际上它是无色的......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-29T19:14:22.033

```
var body = document.getElementById("body")
$(body).html2canvas({onrendered: function( canvas ) {  
     var urlData = canvas.toDataURL("image/jpeg");  
},
background: '#fff'}); 
```

两年后，但更新的版本应该接受这样的参数。. .

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-15T10:04:07.333

不用担心，现在只需添加背景：'#FFFFFF'，它工作正常

```
 html2canvas(element, {
                       background: '#FFFFFF',
                       onrendered: function (canvas) {
                           $("#previewImage").append(canvas);
                           getCanvas = canvas;
                       }
                   }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-21T17:17:28.057

如果您需要实际的图像数据不透明，请使用带有 fillStyle 'white' 的 fillRect(0, 0, width, height)。

另一种方法是使用 getImageData 和 putImageData 并迭代抛出每个像素以检查 rgba 值并更改它们，但它很慢（可能是几毫秒）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-06T06:32:29.313

html2Canvas 和 ngxcharts 团队似乎已经关闭了这个问题上的错误，但没有提供任何解决方案。通过 css 类为 rect 设置填充属性不起作用。

这就是我最终解决它的方式，令人惊讶的是它有效：

```
 let rectElements = Array.from(document.getElementsByTagName('rect'));
  if (rectElements.length > 0) {
    rectElements.forEach(rect => {
      rect.setAttribute('fill', '#ffffff');
    });
  } 
```

# silverlight - 由于数据限制，查询的加载操作失败

> ID：14584951
> 
> 赞同：1
> 
> 时间：2013-01-29T14:14:38.820
> 
> 标签：silverlight, iis-7, entity-framework-4, wcf-ria-services

我们有一个 silverlight 应用程序，它与 RIA 服务接口以获取要在网格中显示的联系人列表，这通常可以正常工作，但是我们收到以下错误：

```
load operation failed for query x. the remote server returned an error: notfound 
```

通过跟踪我们已经确定这是由于正在传递的数据量，因为如果我们传递大约 3,800 条或更少的记录，它将起作用。我们需要从数据库中加载至少 15,000 条记录。

我在整个互联网上搜索以找到解决方案并更改了以下设置，但似乎没有任何效果。

更改的设置是：

*   在 IIS7 中，将 ASP 设置“响应缓冲限制”更改为 67108864
*   在 IIS7 中，将 ASP 设置“最大请求实体正文限制”更改为 2000000
*   在 IIS7 中，将 ASP 设置“客户端连接测试间隔”更改为 00:00:10
*   在我们的应用程序 web.config 中将“maxItemsInObjectGraph”更改为 2147483647
*   在我们的应用程序 web.config 绑定属性中，“maxReceivedMessageSize”、“maxBufferSize”和“maxBufferPoolSize”都设置为 200000000
*   在我们的应用程序 web.config readerQuotas 属性 'maxArrayLength'、'maxStringContentLength'、'maxBytesPerRead'、'maxNameTableCharCount' 都设置为 200000000

这是在带有 IIS7 并使用 .Net 4 的 Server 2008 R2 上设置的。

使用 ASP.NET 开发服务器在调试器中运行时也会发生此错误。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:13:40.003

也许您的 Web.config 中的项目数量太有限，如果这不是修复，您也可以像这样在故障中启用详细信息以获得更多详细信息。

```
<services>
  <service name="Service.Class.Full.Name"
           behaviorConfiguration="Service_Behaviour_Name" />
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="Service_Behaviour_Name">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <dataContractSerializer maxItemsInObjectGraph="65536" />
    </behavior>
 </behaviors> 
```

`Service.Class.Full.Name`需要是您完全限定的服务类名称。 `Service_Behaviour_Name`可以是任何东西，但默认看起来像完整的服务类名称，`-`而不是`.`

# c# - 如何在 Windows Store 应用程序中从 WinRT C++ 到 C# 获取带有“字节数组”的结构数组？

> ID：14584952
> 
> 赞同：6
> 
> 时间：2013-01-29T14:14:39.193
> 
> 标签：c#, windows-runtime, c++-cx, winprt

在这里，我有一个带有 C++ WinRT 组件的 C# Metro 应用程序。我需要在 WinRT 中做一些事情，比如分配照片的名称/路径，并检索照片的缩略图。

首先，我在 WinRT C++ 中编写了一个值结构并检索结构数组函数，如下所示。

```
public value struct Item
{
    String^ strName;
    String^ strPath;
};
public ref class CTestWinRT sealed
{
public:
    CTestWinRT();
    void TestOutStructArray(Platform::WriteOnlyArray<Item>^ intOutArray)
    {
        intOutArray->Data[0].strName = ref new String(L"test1.jpg");
        intOutArray->Data[0].strPath = ref new String(L"c:\\temp");
        intOutArray->Data[1].strName = ref new String(L"test2.jpg");
        intOutArray->Data[1].strPath = ref new String(L"c:\\temp");
    }
}; 
```

然后我在 C# 按钮单击中使用 TestOutStructArray 函数，如下所示。

```
 CTestWinRT myNative = new CTestWinRT();
    private void btnTestClick(object sender, RoutedEventArgs e)
    {
        Item[] items = new Item[2];
        myNative.TestOutStructArray(items);
    } 
```

该功能工作正常，项目数组可以通过调试窗口看到值是正确的。

现在，我想在值结构中添加一个字节数组，如下所示。

```
public value struct Item
{
    String^ strName;
    String^ strPath;
    uint8 byteThumbnail[8096];
}; 
```

这将导致以下编译器错误：

> 错误 C3987：“byteThumbnail”：公共成员的签名包含本机类型“无符号字符 [8096]”
> 
> 错误 C3992：“byteThumbnail”：公共成员的签名包含无效类型“无符号字符 [8096]”

我查看了有关 value struct 的 MSDN，它说 value struct 不能有 ref 类或 struct 作为成员，所以我想我不能像上面那样编写代码。

[http://msdn.microsoft.com/en-us/library/windows/apps/hh699861.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh699861.aspx)

有谁知道如何使用另一种方式来替换值结构？我需要数组里面有“字节数组”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T17:02:42.960

可以跨 ABI 传递以下[数组类型：](http://msdn.microsoft.com/en-us/library/windows/apps/hh700131.aspx)

1.  常量平台::数组^,
2.  平台::数组^*,
3.  平台::WriteOnlyArray,
4.  Platform::Array^ 的返回值。

值[结构](http://msdn.microsoft.com/en-us/library/windows/apps/hh699861.aspx)或值类只能包含基本数字类型、枚举类或 Platform::String^ 作为字段。

因此，您不能将值结构与数组一起使用。而且你不能使用 uint8[] 类型的数组。

您应该单独或使用 ref 类传递数组和结构。

# javascript - 从javascript函数返回地址位置

> ID：14584953
> 
> 赞同：0
> 
> 时间：2013-01-29T14:14:43.730
> 
> 标签：javascript, google-maps-api-3, return-value

我正在使用 google map api V3 并希望通过使用下一个函数来获取某个地址的位置：

```
function findAddress(address) {

    var geocoder = new google.maps.Geocoder();
    var addrLocation = "";

    geocoder.geocode( { 'address': address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
        addrLocation = "Location is: " + results[0].geometry.location;
    } else {
        addrLocation = "Not found"; }   
    });

    return addrLocation;
} 
```

然后我试图调用 findAddress 函数：

```
function SomeFunction(){
  alert(findAddress("New York"));
} 
```

按照我的逻辑，该警报应该返回“addrLocation”值，但它返回的是空白消息。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:16:23.140

您不能从异步调用中返回值，因为这是每小时询问一次，所以会找到一个骗子。

# javascript - 客户端无限滚动 JQuery

> ID：14584956
> 
> 赞同：2
> 
> 时间：2013-01-29T14:14:49.153
> 
> 标签：javascript, jquery, lazy-loading, infinite-scroll, ondemand

我正在尝试为我的网站制作一个 [twitter like - LazyLoad] 评论页面。我发现很多使用 PHP [用于服务器端] 的插件。

我试过：[Sausage](http://www.jqueryrain.com/?nrq68TRZ)、[Jquery4u](http://www.jquery4u.com/tutorials/jquery-infinite-scrolling-demos/)、[Infinite Ajax Scroll .. &](http://www.fieg.nl/infinite-ajax-scroll-a-jquery-plugin)[这里](http://designsuperstars.net/10-cool-infinite-scrolling-effects-that-can-enhance-your-websites-navigation/)还有很多

我使用 C#，所以我只想要一个在客户端使用静态数据的插件，以便稍后使用 Json 处理它。

有没有像这样工作的 Continuos 滚动插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:18:23.357

Masonry 允许您执行此操作，包括显示数据的奇特方式。您可以从该代码中获取加载程序

[http://masonry.desandro.com/demos/infinite-scroll.html](http://masonry.desandro.com/demos/infinite-scroll.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:29:29.223

您展示的其中一个示例可以与任何服务器端技术（包括 ASP.NET）很好地配合使用。

只需一些基本的 HTML 即可开始：

```
<div id="posts">
   <div class="item">Starting content</div>
   <div id="loadmore" style="display: none"><img src="ajax-loader.gif" alt="Loading..." /></div>
</div> 
```

还有一小段 jQuery 代码（不需要插件）：

```
$(window).scroll(function() {
    if ($(window).scrollTop() == $(document).height() - $(window).height()) {
        $("#loadmore").show();

        $.ajax({
          url: "loadmore.aspx",
          contentType: "text/html; charset=utf-8"
        ).done(function(html) {
            if (html) {
                $("#posts").append(html);
                $("#loadmore").hide();
            } else
                $("#loadmore").html("No more posts to show.");
        });
    }
}); 
```

由于 ASPX 代码呈现为 HTML，因此可以将内容附加到 #posts 包装器上。您当然需要稍微调整代码，将一些参数传递给您的 ASPX 以了解要检索多少帖子并从哪个帖子开始......但是客户端代码不再是这里的问题了。

# python - 在 python 中使用队列

> ID：14584958
> 
> 赞同：25
> 
> 时间：2013-01-29T14:14:55.973
> 
> 标签：python, python-3.x, queue

我正在尝试在 Eclipse 中运行以下命令（使用 PyDev），但我不断收到错误消息：

**q = queue.Queue(maxsize=0) NameError: global name 'queue' is not defined**

我已经检查了文档，看起来这就是它应该放置的方式。我在这里错过了什么吗？PyDev 是这样工作的吗？或在代码中遗漏了什么？感谢所有帮助。

```
from queue import *

def worker():
    while True:
        item = q.get()
        do_work(item)
        q.task_done()

def main():

    q = queue.Queue(maxsize=0)
    for i in range(num_worker_threads):
         t = Thread(target=worker)
         t.daemon = True
         t.start()

    for item in source():
        q.put(item)

    q.join()       # block until all tasks are done

main() 
```

使用：Eclipse SDK

版本：3.8.1 版本号：M20120914-1540

和 Python 3.3

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-29T14:16:02.110

你做

```
from queue import * 
```

`queue`这已经从模块中导入了所有类。将该行更改为

```
q = Queue(maxsize=0) 
```

> 小心：“*应避免通配符导入（来自 import *），因为它们使命名空间中存在哪些名称变得不清楚，从而使读者和许多自动化工具感到困惑”。*（[Python PEP-8](https://www.python.org/dev/peps/pep-0008/#id23)）

作为替代方案，可以使用：

```
from queue import Queue

q = Queue(maxsize=0) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-29T14:16:13.017

那是因为您正在使用：`from queue import *`

然后您尝试使用：

```
queue.Queue(maxsize=0) 
```

删除`queue`部分，因为`from queue import *`将所有属性导入到当前命名空间。：

```
Queue(maxsize=0) 
```

或使用`import queue`代替`from queue import *`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-13T19:21:17.877

如果你导入`from queue import *`，这意味着所有导入你的类和函数都完全编码。所以你不能写模块的名字，只是`q = Queue(maxsize=100)`. 但是，如果你想使用带有模块名称的类：`q = queue.Queue(maxsize=100)`你要编写另一个导入字符串：`import queue`，这意味着你导入所有具有所有功能的模块，而不仅仅是第一种情况下的所有功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-24T09:55:58.157

确保您的代码未`queue.py`将其重命名为其他名称。如果您的文件名是 queue.py，它将尝试在同一个文件中搜索。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2016-07-24T00:15:57.683

您可以使用 pip install kombu 安装 kombu

然后导入队列就这样

从kombu导入队列

# javascript - 在外部 javascript 文件中使用 GetGlobalResourceObject 函数

> ID：14584960
> 
> 赞同：0
> 
> 时间：2013-01-29T14:14:55.670
> 
> 标签：javascript, asp.net, globalization

我想使用 GetGlobalResourceObject() 函数访问 ASP.NET 中外部 java 脚本文件中的全局资源。请帮助做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:24:11.483

[这是关于 SO如何在我的应用程序中使用的 javascript(.js) 文件中访问 HttpContext.GetGlobalResourceObject()](https://stackoverflow.com/questions/2763013/how-i-access-httpcontext-getglobalresourceobject-in-javascript-js-file-which)的类似问题的答案 ？我希望这能够帮到你。

# mysql - 具有范围的 MySQL 查询字段

> ID：14584961
> 
> 赞同：2
> 
> 时间：2013-01-29T14:14:57.830
> 
> 标签：mysql, zipcode

我买了一个邮政编码数据库，它按如下顺序存储所有地址的街道号码：

```
1002-1004;1101-1105;1102-1104;1201-1205;1202-1204;1301-1305;1302-1304;1401-1405;1402-1404;1501-1505;1502-1504;1601-1605;1602-1604;1701-1705;1702-1704;1801-1805;1802-1804;1902-1904;1901-1905;2007;2006-2012;2011-2013;2106-2112;2107-2113;2206-2212;2207-2213;2306-2312;2307-2313;2406-2412;2407-2413;2506-2512;2507-2513;2606-2612;2607-2613;2706-2712;2707-2713;2806-2812;2807-2813;2906-2912;2907-2913;3014-3020;3015-3021;3114-3120;3115-3121;3214-3220;3215-3221;3314-3320;3315-3321;3414-3420;3415-3421 
```

这是最长的一个，它也可以是一个较短的列表，只是一个范围或只有一个数字。我试图找到一种仅使用邮政编码和街道号码来查找地址的方法。

显然，我可以用最小值/最大值拆分数据库中的每个条目，但这使得更新任务变得更大。

那么有没有办法可以通过 MySQL 查询来实现这一点？还是我必须在这里依赖 PHP（在我的情况下）？

热切期待...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:47:39.467

没有简单的本机函数来检查数值（例如 1017）是否在存储为字符串的一组范围内，如您所示。

简短的回答是，不，这种搜索不能在 MySQL 中完成。

更长的答案是，尽管不切实际，但可以执行所需的字符串操作，以提取该列表中每个范围的单个最小和最大分量。

首先，从性能的角度来看，这是不切实际的（您不想为每次搜索都做那种繁重的工作。其次，由于执行这种字符串操作需要扭曲的 SQL，这是不切实际的。

从 MySQL 性能的角度来看，执行此类搜索的更好方法是将范围列表表示为表中的单独行。

```
r_mod r_min r_max
----- ----- -----
    0  1002  1004
    1  1101  1105
    0  1102  1104
    1  1201  1205 
```

要让 MySQL 将这些范围列表中的每一个“拆分”为单独行上的一个范围，每个列表上都有一个尾随分号，您可以执行如下查询：

```
SELECT n.i
     , SUBSTRING_INDEX(SUBSTRING_INDEX(SUBSTRING_INDEX(SUBSTRING_INDEX(d.foo,';', n.i ),';',-1),'-', 1 ),'-',-1)%2 AS r_mod
     , SUBSTRING_INDEX(SUBSTRING_INDEX(SUBSTRING_INDEX(SUBSTRING_INDEX(d.foo,';', n.i ),';',-1),'-', 1 ),'-',-1)/1 AS r_min
     , SUBSTRING_INDEX(SUBSTRING_INDEX(SUBSTRING_INDEX(SUBSTRING_INDEX(d.foo,';', n.i ),';',-1),'-', 2 ),'-',-1)/1 AS r_max
  FROM (SELECT '1002-1004;1101-1105;1102-1104;1201-1205;1202-1204;1301-1305;' AS foo) d
 CROSS
  JOIN ( SELECT h.d*100+t.d*10+o.d+1 AS i
           FROM (SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 
                 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 
                 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) o
          CROSS
           JOIN (SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3
                  UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 
                  UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) t
          CROSS 
           JOIN (SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 
                  UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6
                  UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) h
       ) n
HAVING r_max > 0 
```

（请注意，对于该查询，范围列表字符串必须附加一个尾随分号，并且该查询只会提取每个列表的前 1000 个条目。）鉴于这种结构，理论上可以使用数值比较：

```
avalue MOD 2 = r_mod AND avalue BETWEEN r_min AND r_max 
```

再次回到较短的答案，将范围存储在表格中作为范围的字符串列表，对每次搜索进行这种类型的字符串操作是不切实际的。

使用带有单独行的预填充表，其中每个 r_min 和 r_max 值，可以在 MySQL 中进行搜索。

# codeigniter-2 - CI-Merchant with Sagepay

> ID：14584963
> 
> 赞同：2
> 
> 时间：2013-01-29T14:15:03.877
> 
> 标签：codeigniter-2, ci-merchant

有没有人在 CI-Merchant 中使用 SagePay Direct？到目前为止，我得到的唯一回应是：

```
Merchant_response Object
(
    [_status:protected] => failed
    [_message:protected] => 
    [_reference:protected] => 
    [_data:protected] => 
    [_redirect_url:protected] => 
    [_redirect_method:protected] => GET
    [_redirect_message:protected] => 
    [_redirect_data:protected] => 
) 
```

我以前没有使用过 SagePay，需要尽快完成这项工作。我已将我的 IP 地址添加到 SagePay 测试区域，但目前并未像在我的本地主机上那样在 https 上进行测试。

我的代码如下所示：

```
public function process_payment()
    {

        $settings = array (
            'vendor' => 'XXX',
            'test_mode' => TRUE,
            'simulator_mode' => FALSE,
        );

        $this->merchant->initialize($settings);

        //get customer details
        $this->load->library('custom_cart');
        $customer = $this->custom_cart->get_customer_invoice_info();
        $customer_name = '';
            if ( ! empty($customer['title'])) $customer_name .= $customer['title'] .' ';
        $customer_name .= $customer['forename'];
        $customer_name .= $customer['surname'];

        $customer_street = $customer['address1'];
        $customer_street2 = $customer['address2'];
            if ( ! empty($customer['address3'])) $customer_street2 .= $customer['address3'];

        //order details
        $amt = $this->custom_cart->order_total();

        $get_curr = $this->custom_cart->get_currency();
        $currencycode = $get_curr['name'];

        $shippingamt = $this->custom_cart->shipping_cost();

        $itemamt = $this->custom_cart->order_subtotal();
        $taxamt = '0';
        $invnum = $this->custom_cart->customer_order_no();

         $params = array(
            'description'=> 'Online order',
            'currency'=> $currencycode,
            'transaction_id'=> $invnum,
            'email'=> $customer['email_address'],
            'first_name'=> $customer['forename'],
            'last_name'=> $customer['surname'],
            'address1'=> $customer_street,
            'address2'=> $customer_street2,
            'city'=> $customer['town_city'],
            'postcode'=> $customer['postcode'],
            'country'=> $customer['country'],
            'region'=> $customer['county'],
            'phone'=> $customer['phone'],

            'Amount'=> $amt,
            'card_no'=> $this->input->post('creditcard'), 
            'name'=> $customer_name, 
            'card_type' => $this->input->post('creditcardtype'), 
            'exp_month'=> $this->input->post('cardmonth'),
            'exp_year' => $this->input->post('cardyear'), 
            'csc'=> $this->input->post('cardsecurecode')
        );

        $response = $this->merchant->purchase($params);

        echo '<pre>';
        print_r($response);

    } 
```

（参数的所有值都是有效的，我已经检查了正确的值是否传递给它们。供应商名称在此处被屏蔽）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:47:27.780

终于找到了问题所在 - 我今年通过了两位数，这就是它失败的地方（我忘记了我之前添加了 20 前缀的商家）！谢谢您的帮助。（如果有人有类似的问题，我会通过回显函数跟踪中每个函数的响应来追踪它）

# java - 从 Eclipse 插件中的文件读取

> ID：14584968
> 
> 赞同：5
> 
> 时间：2013-01-29T14:15:34.787
> 
> 标签：java, eclipse, eclipse-plugin

我需要从 Eclipse 中的属性文件中读取配置详细信息。我已将其置于与 我调用的类文件`config.properties`相同的级别：`plugin.xml`

```
Properties properties = new Properties();
FileInputStream file;
String path = "./config.properties";
file = new FileInputStream(path);
properties.load(file); 
```

我得到一个`file not found exception`. 有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T14:18:08.693

您是否记得将其包含在构建中？

其次，无论如何使用类加载器资源可能会更好

```
InputStream fileStream = myClass.getResourceAsStream( "/config.properties" ); 
```

此外，还有另一种在 Eclipse 中打开资源 URL 的方法

```
url = new URL("platform:/plugin/com.example.plugin/config.properties");
InputStream inputStream = url.openConnection().getInputStream(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:19:53.827

将属性文件放在项目的根目录中。这应该是`user.dir`系统属性指向的位置。构造`FileInputStream`函数在此目录中查找文件。

您可以通过输出系统属性来确认它在正确的目录中。

```
System.getProperty("user.dir"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-31T09:52:02.803

如果它是一个插件，你应该告诉它你的文件必须包含在目标中。它在 build.properties 文件中设置。打开它并查看 - 你没有在那里提到你的文件。

打开 plugin.xml，转到`build`选项卡并通过检查将您的文件包含在 binary.build 中。节省。这将正确更改 build.properties 文件。转到`build.properties`选项卡并再次查看文件 - 现在您可以看到正确包含的文件。

当然，您可以手动完成，但插件 UI 很方便，您可以确保没有任何问题行尾或空格。

对于插件中的文件的绝对寻址看[这里](https://stackoverflow.com/a/56327069/715269)

# c# - 是否可以避免在 DI 中手动创建对象？

> ID：14584972
> 
> 赞同：0
> 
> 时间：2013-01-29T14:15:40.707
> 
> 标签：c#, asp.net-mvc-4, dependency-injection, ninject, ninject.web.mvc

据我了解，DI的实现基于

**1.ISample**接口

**2.**示例：ISampleInterface

**3.** ISampleInterface 与 Sample 的配置绑定。

**4.**和构造函数注入

```
ISampleInterface _sampleInterface;

Constructor(ISampleInterface sampleInterface)
{
  _sampleInterface = sampleInterface;
} 
```

其余的事情由 DI 处理。

但如果在某些情况下，在具体的接口实现类中，可能需要“新建”初始化。那我该怎么办？

在**Sample**类中，

如果我需要申报

```
private const int _limitSize = 70;
limits = new int[_limitSize]; 
```

或在**Sample**类中。可能需要为接口方法实现编写下面的代码。

```
Dictionary<string, object[]> arr = new Dictionary<string, object[]>()
{       
    {"name", new string[1]{listName}},          
}; 
```

实际执行

```
public string ContactListsAdd(string listName)
{
    Dictionary<string, object[]> arr = new Dictionary<string, object[]>()
    {       
        {"name", new string[1]{listName}},          
    };

    return callSomePrivateMethod("contact-lists.add", arr);         
} 
```

所以我的问题是，当我们使用 DI 时手动创建对象是否正确？按照例子。或者他们有什么方法可以避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:16:25.923

手动创建对象（如数据结构或通用对象）并没有什么不好，您需要实现业务逻辑。但是，它们应该封装在您的业务逻辑实现中。您不应该手动创建的是业务组件（如存储库、服务等）

依赖注入模式在这里为您提供了一种如何实现**组件松散耦合的**方法。它将创建此类组件的责任转交给 DI 容器，因此您无需在业务逻辑中创建此类组件（即使您不倾向于使用松散耦合，当创建此类组件变得复杂）。但是，我不建议将创建您使用的所有对象的责任转移到 DI 容器中。最后组件的注册（绑定）可能变成：

```
Bind<IList<string>>().To<List<string>>();
Bind<IList<int>>().To<List<int>>();
Bind<IList<MyObject>>.To<MyObject>(); // what about constructor arguments ???
... and other mess of bindings 
```

维护这样的绑定将非常困难。如果您需要使用不同大小或不同实现的列表怎么办？你会从哪里获得一些内部类对象的构造函数参数？当然，您可以使用条件绑定，但它会变成*一大堆条件绑定。*

# highcharts - Highcharts - 在一个容器中包含多个图表

> ID：14584973
> 
> 赞同：1
> 
> 时间：2013-01-29T14:15:41.470
> 
> 标签：highcharts

我试图在论坛上搜索，但没有找到任何关于一个简单问题的信息：作为我的示例，我们如何在一个容器中包含多个 highcharts？可能吗 ？

[我的例子](http://i.stack.imgur.com/kjmGu.jpg)

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:20:49.847

你的意思是，像[这样](http://www.highcharts.com/demo/combo-multi-axes)？

您可以在同一个图表中设置所需的系列数。

但是，要使“图表网格”像您的图像一样，您必须制作 4 个 div 来存储每个图表

# drupal - Drupal hook_preprocess_HOOK

> ID：14584977
> 
> 赞同：0
> 
> 时间：2013-01-29T14:15:56.690
> 
> 标签：drupal, drupal-7, drupal-modules

在我自己的模块中，我可以成功`template_preprocess_region()`覆盖

```
 function mymodule_preprocess_region(&$vars) {
   ...
 } 
```

在[hook_preprocess_HOOK中描述](http://api.drupal.org/api/drupal/modules!system!theme.api.php/function/hook_preprocess_HOOK/7)

是否有可能根据 hook_menu() 中指定的 URl 调用 hook_preprocess_HOOK？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:39:44.053

好的，我可以用`current_path()`函数解决它。

```
function mymodule_preprocess_region(&$variables) {
   if(current_path() == "mypath") {
     unset($variables['content']);
   }
} 
```

我认为这不是最好的方法。这样我必须从 hook_menu() 复制所有路径？！有更好的想法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:56:10.243

尝试使用 drupal_match_path() [http://api.drupal.org/api/drupal/includes!path.inc/function/drupal_match_path/7](http://api.drupal.org/api/drupal/includes!path.inc/function/drupal_match_path/7)

您可以为您的路径模式创建一个设置字段。

# wpf - 双击 WPF 事件快捷方式以删除自动生成的函数和 XAML 添加的标签

> ID：14584978
> 
> 赞同：1
> 
> 时间：2013-01-29T14:16:01.160
> 
> 标签：wpf, function, shortcut, auto-generate

当我双击我的用户控件文件时，系统会自动在 .cs 文件中生成一个 UserControl_Loaded 函数，并在 XAML 中添加加载标签作为 UserControl 元素的 Loaded="UserControl_Loaded"。它还为此定义了一个eventHandler。VS中的任何快捷方式可以快速撤消此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:04:43.743

您可以在 .xaml.cs 中撤消一次，然后翻转回 .xaml 并在此处撤消一次，您将回到初始状态。快速键盘顺序是`Ctrl-Z`, `Ctrl-Tab`, `Ctrl-Z`.

# php - 查询表中的行并排除特定行（如果它们存在于另一个表中）

> ID：14584982
> 
> 赞同：0
> 
> 时间：2013-01-29T14:16:05.730
> 
> 标签：php, mysql, sql, select

我有两个不同的表，两者都有相似的列。我需要查询表 A 中的所有行，但如果表 B 中存在这些行，则必须排除表 A 中的特定行。

例子：

```
Table A
---------------------------------
item_id  |  item_name |  price
---------------------------------
  1      |   apple    |   100
---------------------------------
  2      |   banana   |   150
---------------------------------
  3      |   ginger   |   120
---------------------------------
  4      |   pear     |   150
---------------------------------
  5      |   berry    |   120
---------------------------------

Table B
---------------------------------
item_id  |  item_owner | 
---------------------------------
  1      |   Ben       |  
---------------------------------
  2      |   Damian    |  
---------------------------------
  3      |   Greg      |   
--------------------------------- 
```

根据上面的示例，如果表 B 中不存在 item_id，我需要运行查询以获取表 A 中的所有行。

此查询的结果应仅获取 2 行，它们是：

```
---------------------------------
  4      |   pear     |   150
---------------------------------
  5      |   berry    |   120
--------------------------------- 
```

很高兴得到这方面的帮助......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:17:34.937

利用`LEFT JOIN`

```
SELECT  a.*
FROM    tableA a
        LEFT JOIN tableB b
            ON a.item_id = b.item_id
WHERE b.item_id IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/7bc58/1)

为了获得更快的性能，您必须在两个表上定义一个`INDEX`on 列`item_id`以防止服务器执行`FULL TABLE SCAN`.

要全面了解联接，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:46:42.120

试试这个查询...

```
SELECT A.*
FROM   TableA A FULL OUTER JOIN TableB
       ON A.Item_id = B.Item_ID
WHERE  B.Item_ID IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:17:30.287

```
SELECT *
FROM TableA
WHERE item_id NOT IN(SELECT item_id  FROM tableb); 
```

[演示](http://www.sqlfiddle.com/#!2/20f8a/1)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T14:17:51.537

尝试这个：：

```
Select 
A.*
from
A LEFT JOIN B on (A.item_id=B.item_id)
where B.item_id is null 
```

# internet-explorer - Selenium RC - 找不到元素链接（仅在 Internet Explorer 中）

> ID：14584985
> 
> 赞同：0
> 
> 时间：2013-01-29T14:16:15.077
> 
> 标签：internet-explorer, automated-tests, element, selenium-rc

我目前正在让 IE8、9 和 10 正确地使用 Selenium RC 实现自动化。问题是它似乎找不到任何类型的链接=无论如何。我在测试运行程序中收到错误“Element link=Live Dead Assay not found”。它在线上失败：

```
try { if (selenium.isElementPresent("link=Live Dead Assay")) 
```

问题是我们测试的所有其他浏览器（Firefox、Chrome 和 Safari）都可以顺利运行。只有IE有问题。

下面是我们使用的脚本（这是通过从 Selenium IDE 导出创建的）。

只是为了让大家知道，我尝试在 selenium.isElementPresent 行前面放置暂停，但这是行不通的。我还尝试将测试运行器降低到最慢的速度，但同样没有成功。

任何帮助，将不胜感激。谢谢

## 克里斯

```
 @Test
public void clickLink() throws Exception {
    // Open nav and expand Screens
    for (int second = 0;; second++) {
        if (second >= 60) fail("timeout");
        try { if (selenium.isElementPresent("css=#browse_screens_folder_52 > ins.jstree-icon")) break; } catch (Exception e) {}
        Thread.sleep(1000);
    }

    selenium.click("css=#browse_screens_folder_52 > ins.jstree-icon");
    // Open small image (Live Dead Assay)
    for (int second = 0;; second++) {
        if (second >= 60) fail("timeout");
        try { if (selenium.isElementPresent("css=#browse_screen_568 > ins.jstree-icon")) break; } catch (Exception e) {}
        Thread.sleep(1000);
    }

    selenium.click("css=#browse_screen_568 > ins.jstree-icon");
    // 35669 Check info table present
    for (int second = 0;; second++) {
        if (second >= 60) fail("timeout");
        try { if (selenium.isElementPresent("link=Live Dead Assay")) break; } catch (Exception e) {}
        Thread.sleep(1000);
    }

    selenium.click("link=Live Dead Assay");

    } 
```

* * *

30/1/13 我应该补充一点，我们还通过 Jenkins 运行了一个 html 脚本，这也同时失败了。我们为此设置了 *iexplore。

然而，就在今天，在一位同事的本地机器上，我们从命令行运行了 htmlsuite Selenium Standalone Server。在这种情况下，我们使用了 *piiexplore，测试实际上找到了其他设置失败的元素。从那以后，我在我们的 Jenkins 工作中尝试了 *piiexplore，但这并没有奏效，并且和以前一样失败了。这可能是本地机器设置吗？或者通过 Jenkins 运行测试的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:39:31.583

它是通过使用 xpath 而不是 link=blah 来解决的。IE喜欢这个:-)

# language-agnostic - 适用于 USB 的 AutoRunnable 应用程序

> ID：14584986
> 
> 赞同：0
> 
> 时间：2013-01-29T14:16:16.737
> 
> 标签：language-agnostic, usb-drive

我想制作一个驻留在 USB 中的应用程序，一旦插入 USB，它将在其默认浏览器中打开 Google.com（它应该在所有平台 Mac、Windows、Linux 中运行）。我尝试制作 Autorun.inf 文件，但没有帮助。在这件事上我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:19:58.723

您可能希望使用驻留在同一个 USB 上的浏览​​器。在portableapps.com 上有一个便携式Chrome 版本

# python - TypeError：对非序列的迭代

> ID：14584988
> 
> 赞同：0
> 
> 时间：2013-01-29T14:16:18.333
> 
> 标签：python, xml-parsing, lxml, epub

我在这里查看了很多关于此的帖子，并在谷歌上搜索它。我使用过其他语言，但仍在学习 Python，而且我对类也不熟悉，所以我认为我只是不了解类的行为方式。

我想开发一个 epub 阅读应用程序，发现 roberto alasina 的项目称为集成，这是一个很好的起点，但它没有收集元数据，而且 epub 处理库的提取不足以用于我想做的其他一些事情. 所以我找到了防尘套，它是一个 epub 阅读课程。

我需要进一步提取它的原因是我需要处理来自应用程序多个部分的数据读取，而不仅仅是读取器本身。我计划向它添加 whoosh 以启用搜索和索引，我需要阅读章节然后索引文件。我可以在导入本书的过程中执行此操作，并且实际上并不需要用于实际索引部分的 gui。

无论如何，在 dist 夹克中我添加了日志记录，我可以看到我的方法正确地从 epub 中获取目录：

```
 def __parse_oebps(self, epub):
    '''Construct the chapter list assuming that the ePub has files in OEBPS/.'''

    # Parse the chapters
    npoints = self.__toc.findall("//{%(tocns)s}navPoint" % {'tocns': self.__namespaces['ncx']})
    for p in npoints:                   
        #rt = p.getroottree()
        #title = p.findtext("{%(tocns)s}text" % {'tocns': self.__namespaces['ncx']}) # Label text           
        title = p.find(
            '{http://www.daisy.org/z3986/2005/ncx/}navLabel').find(
                '{http://www.daisy.org/z3986/2005/ncx/}text').text
        contentfile = p.find("{%(tocns)s}content[@src]" % {'tocns':self.__namespaces['ncx']}).attrib['src'] # Contentfile name
        #if self.__has_oebps:
        #   #contentfile = "OEBPS/" + contentfile
        #   contentfile = "OEBPS/" + contentfile
        #   log.info("content file: %s", contentfile)

        #return contentfile 
        #self.chapters.append(EpubChapter(epub, p.attrib['id'], p.attrib['playOrder'], contentfile, title))
        if title and contentfile:
            log.debug("Title:        %s", title)
            log.debug("content file: %s", contentfile)
            self.chapters.append([title, contentfile])

    return self.chapters 
```

我输入了调试日志，可以很容易地看到该实例是从类中正确调用的，并且标题和内容文件在那里。这是来自 ebubtoc 类，并从 epub 类中的此方法调用：

```
 def __read_toc(self):
    '''Construct the table of contents for this epub'''
    self.__toc = EpubToc(self)
    for l, c in self.__toc:
        log.debug("Title:        %s", l)
        log.debug("content file: %s", c) 
```

现在，当此方法获取该数据时，我收到此错误：

```
 for l, c in self.__toc:
TypeError: iteration over non-sequence 
```

目前我不知道我做错了什么以及为什么这不起作用。如果这还不够，我可以发布我正在使用的其余课程。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:28:00.723

正如您所展示的，您的问题是这一行：

```
for l, c in self.__toc: 
```

但是 self.__toc 被宣布为：

```
self.__toc = EpubToc(self) 
```

底线是，您需要遍历列表，而不是对象。像这样的东西应该可以工作，您可能需要进行一些调整才能使其满足您的特定需求（例如，可能是 zip 功能）

```
for c in self.__toc.get_chapter_titles(): 
```

# c++ - 使用 memcpy 将 betweencomplex<double>* 转换为 fftw_complex*</double>

> ID：14584989
> 
> 赞同：0
> 
> 时间：2013-01-29T14:16:19.957
> 
> 标签：c++, visual-c++, fftw

> **可能重复：**
> [memcpy()，size参数的值应该是多少？](https://stackoverflow.com/questions/2681061/memcpy-what-should-the-value-of-the-size-parameter-be)

我想复制一个动态数组：

```
g  = new complex<double> [N*N]; 
```

`in`类型`fftw_complex*`：_

```
in = (fftw_complex*) fftw_alloc_complex(N*N); 
```

当我使用：

```
in= (fftw_complex*) fftw_alloc_complex(N*N);
memcpy( in , g , sizeof(g));
out = (fftw_complex*) fftw_alloc_complex(N*N);
my_plan = fftw_plan_dft_2d(N,N, in, out, FFTW_FORWARD, FFTW_ESTIMATE);
fftw_execute(my_plan);
fftw_destroy_plan(my_plan);
fftw_free(in);
fftw_free(out); 
```

我得到奇怪的结果。进出都是零。

奇怪的是，当我改用：

```
memcpy( &in , &g , sizeof(g)); 
```

我得到了完全正确的结果，但是有了这条线：

```
fftw_free(in); 
```

...不起作用。它给出“未处理的异常”错误。

# uri - 寻找已向 Windows Marketplace 注册 URI 协议的 Windows Phone 8 应用程序

> ID：14584996
> 
> 赞同：0
> 
> 时间：2013-01-29T14:16:36.727
> 
> 标签：uri, protocols, windows-phone-8, marketplace

谁能给我一个在 Windows Marketplace 中注册了 URI 协议的 Windows Phone 8 应用程序的示例？

[即开发人员在这些文档](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987%28v=vs.105%29.aspx#BKMK_URIassociations)中遵循了“注册 URI 关联” 。

我已经尝试过强制`skype:myname`但 Marketplace 告诉我没有应用程序已将自己注册为支持该协议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:47:50.163

[米其林指南](http://www.windowsphone.com/en-gb/store/app/michelin-guide/8f911ddb-a5c3-4e4a-aaea-cce3e0aabf11)已注册该`michelin:`协议。

例如`michelin://Datasheet/?id=70972`

* * *

诺基亚音乐已注册该`nokia-music:`协议。

例如`nokia-music://play/artist/?artist=deadmau5`