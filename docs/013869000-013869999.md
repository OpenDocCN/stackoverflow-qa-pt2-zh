# StackOverflow 问答 13869000-13869999

# c# - 应用程序内的主题转换器

> ID：13869001
> 
> 赞同：0
> 
> 时间：2012-12-13T21:44:04.940
> 
> 标签：c#, windows-phone-7

我想创建一个按钮，点击后在所有其他页面中更改我的应用程序的背景。前任。按钮黑色将背景更改为黑色。按钮蓝色将背景颜色更改为蓝色。有任何想法吗？实际上，我找不到任何关于改变背景的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:32:18.337

任何 WP7 应用程序中的主网格（背景）都是布局根。在您的 XAML 代码中：

```
<Grid x:Name="LayoutRoot">
</Grid> 
```

要更改背景颜色，请在 Button Click 事件中：

```
private void button1_Click(object sender, RoutedEventArgs e)
    {
        LayoutRoot.Background = new SolidColorBrush(Colors.Blue);
    } 
```

您可以使用相同格式的代码更改任何网格的背景。

# php - 要更新的mysql事件调度程序

> ID：13869009
> 
> 赞同：-1
> 
> 时间：2012-12-13T21:45:22.533
> 
> 标签：php, mysql

我对 Web 开发很陌生，对于从以下问题开始的地方有点迷茫。

基本上，我希望 mysql 事件调度程序每 30 分钟运行一次，从而将数据库中表的一列中的一百个元素复制到同一个表中的另一列（因此将后面的表更新为这些新值），然后找到最少的更新列中的一百个复制条目（整数）中的值。然后我可以将值设置为 php 脚本中的局部变量。

我到底该怎么做呢？我认为这是可能的。如果有人可以提供通用或抽象方法，我将不胜感激。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:51:24.520

要创建事件，您只需执行以下操作：

```
CREATE EVENT database.eventname
ON SCHEDULE EVERY 30 MINUTE
DO
BEGIN
# Your SQL here
END 
```

您需要确保事件调度程序也在运行。如果它正在运行，你应该在运行`SHOW PROCESSLIST`命令时看到它的线程。如果没有，您可以像这样打开它：

```
SET GLOBAL event_scheduler = ON; 
```

您还需要`event_scheduler=ON`在 my.cnf 文件中设置设置以确保它在启动时运行（我相信默认情况下在大多数系统上它是关闭的）

[有关MySQL 事件调度程序的更多详细信息，](http://dev.mysql.com/doc/refman/5.1/en/events-configuration.html)请参见此处

# javascript - 按钮单击事件触发错误的事件处理程序

> ID：13869011
> 
> 赞同：2
> 
> 时间：2012-12-13T21:45:28.097
> 
> 标签：javascript, jquery, html, button

我有一个 div 显示一些可点击的音乐标题。当您单击它时，它将显示更多详细信息。然后我在可点击的 div 中也有一个按钮。当我点击按钮时。它不会调用按钮的功能而是div的功能？有没有办法解决这个问题？谢谢！

```
$("#myComList").append("<div id="+comListID+" class=listDiv> <p class=comTitle><? echo $row["compositionTitle"] ?>(<?echo $row["year"]?>)</p><button id="+comListID+"btn class=addNewArrBtn>Add new Arrangement</button> <p class=comOri>BY <? echo $row["OrigComposer"] ?></p> </div>");
        $('#'+comListID).click(function() {
              $(this).find("li").slideToggle('slow', function() {
            });
        $("#"+comListID+"btn").click(function(){
                addNewArr(comListID);
            }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T21:51:25.957

它被称为“冒泡”。该按钮位于 div 内，因此它正在执行按钮，然后沿着链向上到达 div。在按钮函数中添加 event.stopPropagation()。

```
$("#"+comListID+"btn").click(function(event){
    event.stopPropagation();
    addNewArr(comListID);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T21:52:41.540

来自 jQuery 文档：

> 默认情况下，大多数事件会从原始事件目标冒泡到文档元素。在此过程中的每个元素处，jQuery 都会调用任何已附加的匹配事件处理程序。处理程序可以通过调用 event.stopPropagation() 来防止事件在文档树中进一步向上冒泡（从而防止这些元素上的处理程序运行）。但是，附加在当前元素上的任何其他处理程序都将运行。为了防止这种情况，请调用 event.stopImmediatePropagation()。（绑定到元素的事件处理程序的调用顺序与它们绑定的顺序相同。）

[http://api.jquery.com/on/](http://api.jquery.com/on/)

因此，您将`event.stopPropagation()`在按钮单击处理程序内部调用，以阻止 div 事件触发。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T21:55:48.277

我相信我在没有看到代码的情况下理解了您的问题。听起来问题源于点击事件冒泡或传播。以下是要尝试的代码示例和指向小提琴的链接供您测试：

```
<div id="testDiv" onclick="alert('Stop Clicking Me!');">
    <button type="button" onclick="function(e) { alert('You hit the button!'); e.stopPropagation(); }">Click Me!</button>
</div> 
```

在这个函数中，：

```
e.stopPropagation(); 
```

防止点击事件过滤到其父容器（在本例中为“testDiv”）并触发其点击事件。您可以在下面的 jsfiddle 中对其进行测试并亲自查看：

[测试小提琴](http://jsfiddle.net/5asnb/)

**编辑：**

在你的情况下：

```
$("#"+comListID+"btn").click(function(e){
    addNewArr(comListID);
    e.stopPropagation();
}); 
```

将 event 参数添加到 click 函数并阻止它传播到父级。

希望这可以帮助。

# java - 如何自动包装 JavaFX 2 ListView？

> ID：13869013
> 
> 赞同：3
> 
> 时间：2012-12-13T21:45:34.040
> 
> 标签：java, listview, javafx-2, multiline

如何在 JavaFX 2 中制作自动换行 ListView（文本太长时为多行）？我知道如果我把 a`\n`放到字符串中，它将是多行的，但内容太动态了。

或者有没有一种好方法可以在每个像素长度`\n`之后放入字符串？`xyz`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T22:15:46.300

您可以在 ListCell.graphicProperty() 中放置一个 TextArea。这通常用于在列表单元格中设置图标，但也可以轻松设置为任何 Node 子类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T21:34:29.867

这是我最终如何做到的确切代码。

```
 ListView<String> messages = new ListView<>();
    messages.relocate(10, 210);
    messages.setPrefSize(this.getPrefWidth() - 20, this.getPrefHeight() - 250);
    messages.setCellFactory(new Callback<ListView<String>, ListCell<String>>() {
        @Override
        public ListCell<String> call(ListView<String> list) {
            final ListCell cell = new ListCell() {
                private Text text;

                @Override
                public void updateItem(Object item, boolean empty) {
                    super.updateItem(item, empty);
                    if (!isEmpty()) {
                        text = new Text(item.toString());
                        text.setWrappingWidth(messages.getPrefWidth());
                        setGraphic(text);
                    }
                }
            };

            return cell;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-02T11:39:23.870

无需创建额外的控件，例如`TextArea`或`Text`。**仅此而已**就足够`setWrapText(true)`了。它将在调整大小时自动重新包装。这是我在 Kotlin 中的工作代码：`ListCell` **`setPrefWidth(50.0)`**

 **```
 datasets.setCellFactory()
    {
        object : ListCell<Dataset>()
        {
            init
            {
                isWrapText = true
                prefWidth = 50.0
            }

            override fun updateItem(item: Dataset?, empty: Boolean)
            {
                super.updateItem(item, empty)

                text = item?.toString()
            }
        }
    } 
```

顺便说一句，这就是我正确包装 CamelCase 单词的方法：

```
replace(Regex("(?<=\\p{javaLowerCase})(?=\\p{javaUpperCase})|(?<=[_.])"), "\u2028") 
```

这`\u2028`是 javaFX 尊重的 Unicode 软换行符。**

# php - 如何从此列表中访问 simplexml 元素？

> ID：13869018
> 
> 赞同：0
> 
> 时间：2012-12-13T21:46:00.320
> 
> 标签：php, simplexml

所以我有这些 simplexmlelement 对象。而且我无法让它工作如何解析特定元素。

```
SimpleXMLElement Object
(
[Generation] => SimpleXMLElement Object
    (
        [@attributes] => Array
            (
                [version] => 3.1.0-alpha3
                [timestamp] => 1355434832
            )

    )

[Options] => SimpleXMLElement Object
    (
        [@attributes] => Array
            (
                [tempFormat] => c
                [byteFormat] => auto_binary
                [refresh] => 60000
                [showPickListTemplate] => true
                [showPickListLang] => true
            )

    )

[UsedPlugins] => SimpleXMLElement Object
    (
    )

[Vitals] => SimpleXMLElement Object
    (
        [@attributes] => Array
            (
                [Hostname] => domain.tld
                [IPAddr] => 127.0.0.1
                [Kernel] => 2.6.32-11-pve (SMP) x86_64
                [Distro] => Ubuntu 12.04.1 LTS
                [Distroicon] => Ubuntu.png
                [Uptime] => 1993669.51
                [Users] => 1
                [LoadAvg] => 0.08 0.02 0.01
                [CPULoad] => 0
            )

    )

....etc...

    ) 
```

我做了这样的事情来访问主机名，例如：

```
echo $xml->Generation->Vitals[0]->Hostname; 
```

但我认为我做错了什么。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:51:32.930

它只是：

```
$xml->Vitals[0]->attributes()->Hostname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:02:35.560

我不完全确定您是否必须坚持使用 a `SimpleXml object`，但如果您不这样做，请查看`DOMDocument`and`DOMXPath`组合。我很喜欢。需要明确的是，这很难进入，但一旦你掌握了它，你就会喜欢它。

你可以这样做：

```
$doc = new DOMDocument();
$doc->load('http://www.example.com/file.xml');
$xpath = new DOMXPath($doc);
$result = $xpath->query('//Vitals');

// print them all
foreach ($result as $r){
    echo $r->getAttribute('Hostname'); //your desired value
}

// or just the first one
echo $result->item(0)->getAttribute('Hostname'); 
```

您还可以使查询稍大一点，以便立即获取属性，如下所示：`//Vitals@Hostname`这也应该有效。

有了这个开始，您可能会掌握它。

进一步阅读：

*   [http://php.net/manual/en/class.domdocument.php](http://php.net/manual/en/class.domdocument.php)
*   [http://php.net/manual/en/class.domxpath.php](http://php.net/manual/en/class.domxpath.php)
*   [http://php.net/manual/en/domxpath.query.php](http://php.net/manual/en/domxpath.query.php)
*   [http://www.tizag.com/xmlTutorial/xpathattribute.php](http://www.tizag.com/xmlTutorial/xpathattribute.php)
*   [http://www.w3schools.com/xpath/xpath_syntax.asp](http://www.w3schools.com/xpath/xpath_syntax.asp)

# objective-c - 是否可以在 iOS 听写词典中添加单词？

> ID：13869019
> 
> 赞同：4
> 
> 时间：2012-12-13T21:46:03.557
> 
> 标签：objective-c, ios, uitextview, dictation

我正在构建一个 iOS 应用程序，如果我可以为听写功能启用一些自定义单词（将文本输入 UITextView 时的听写等），除了现有的字典，那将是非常好的。

换句话说，我希望在听写文本时可以使用一些不属于 Apple 听写词典的单词。我最初认为这是不可能的，但我希望我可以与 SO 社区进行验证。

# c# - 图表中的光标线

> ID：13869024
> 
> 赞同：3
> 
> 时间：2012-12-13T21:46:32.917
> 
> 标签：c#, charts

我在 C# windows 窗体项目中使用图表控件。我想要的是让虚线跟随我的鼠标在图表上移动。我可以使线条以光标或数据点为中心；在这一点上我很灵活。我在下面包含了我正在寻找的内容的屏幕截图。
![光标上的黑色虚线](../Images/5ef9ee1dca586ad1c471bb68a4799fbd.png)

所以在这里你可以看到黑色的虚线（光标没有出现，因为它是一个屏幕抓取）。我已经有一个 mouseMove 事件，但我不确定要在该 mousemove 中包含哪些代码才能使其正常工作（现在它仅在我单击鼠标时才有效，但我认为这只是因为我启用了 CursorX.IsUserSelection）。我已经在图表创建函数中格式化了线条，但是是否有一些 CursorX.LineEnable 函数或类似的函数？我一直找不到。我知道我可以通过绘制对象来完成此操作，但我希望避免麻烦。
提前致谢！我将在下面包括我的行格式。这是在图表创建部分。

```
 chData.ChartAreas[0].CursorX.IsUserEnabled = true;
        chData.ChartAreas[0].CursorX.IsUserSelectionEnabled = true;
        chData.ChartAreas[0].CursorY.IsUserEnabled = true;
        chData.ChartAreas[0].CursorY.IsUserSelectionEnabled = true;

        chData.ChartAreas[0].CursorX.Interval = 0;
        chData.ChartAreas[0].CursorY.Interval = 0;
        chData.ChartAreas[0].AxisX.ScaleView.Zoomable = true;
        chData.ChartAreas[0].AxisY.ScaleView.Zoomable = true;

        chData.ChartAreas[0].CursorX.LineColor = Color.Black;
        chData.ChartAreas[0].CursorX.LineWidth = 1;
        chData.ChartAreas[0].CursorX.LineDashStyle = ChartDashStyle.Dot;
        chData.ChartAreas[0].CursorX.Interval = 0;
        chData.ChartAreas[0].CursorY.LineColor = Color.Black;
        chData.ChartAreas[0].CursorY.LineWidth = 1;
        chData.ChartAreas[0].CursorY.LineDashStyle = ChartDashStyle.Dot;
        chData.ChartAreas[0].CursorY.Interval = 0; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T19:03:03.323

在图表的 MouseMove 事件处理程序中，您可以执行以下操作来移动光标：

```
private void chData_MouseMove(object sender, MouseEventArgs e)
{
    Point mousePoint = new Point(e.X, e.Y);

    Chart.ChartAreas[0].CursorX.SetCursorPixelPosition(mousePoint, true);
    Chart.ChartAreas[0].CursorY.SetCursorPixelPosition(mousePoint, true);

    // ...
} 
```

这是 SetCursorPixelPosition 方法的文档：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.cursor.setcursorpixelposition.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.cursor.setcursorpixelposition.aspx)

# c# - datetimeoffset.datetime 问题？

> ID：13869029
> 
> 赞同：2
> 
> 时间：2012-12-13T21:46:51.870
> 
> 标签：c#, sql, sql-server

当我将 datetimeoffset.datetime 传递给 SQL Server 存储过程时，结果得到错误的月份和日期。

例如，当我通过 2012 年 11 月 12 日时，结果变为 2012 年 11 月 12 日。因此，12 月 11 日改为 11 月 12 日。

我能做些什么来找到问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:49:06.373

**简而言之：**这可能是因为您需要检查 C# 代码和 SQL Server 的文化设置。在欧洲和美国，日期格式完全不同。

例如：我们默认的日期格式是“mm/dd/yyyy”，而欧盟是“dd/mm/yyyy”

这是一篇直接在 C# 中解决这种文化设置的帖子 -[如何根据文化信息获取日期和时间格式？](https://stackoverflow.com/a/4353241/1437962)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:54:33.093

好的，在您的存储过程中，您必须使用强制转换或隐蔽来格式化它阅读此链接关于强制转换日期时间类型和格式 [http://msdn.microsoft.com/en-us/library/aa226054%28SQL.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa226054%28SQL.80%29.aspx)

# android - Android 2.3.3 中的泰米尔语字体

> ID：13869031
> 
> 赞同：2
> 
> 时间：2012-12-13T21:47:05.360
> 
> 标签：android, fonts, tamil

我搜索了很多，但可以找到一个很好的泰米尔语字体文件在我的 android 应用程序中使用。我认为从 Android 4.0 开始自动支持泰米尔语字体。但我还需要将我的应用程序移植到 BlackBerry PlayBook。所以我被迫使用不支持泰米尔语字体的 Android 2.3.3。我尝试了很多字体——TSCII、Unicode。到目前为止，我用过的最好的是 Microsoft 的 latha.ttf，但字母太乱了。有谁知道适用于 Android 2.3.3 的好字体？

谢谢， 卡提克

# java - DES加密/解密文件

> ID：13869034
> 
> 赞同：1
> 
> 时间：2012-12-13T21:47:18.953
> 
> 标签：java, security, base64, des

我正在编写一个程序，在其中获取一个字符串，对其进行加密，然后将其写入文件中。然后，我从文件中读取字符串，解密然后修改它。这是我的 DES 加密/解密代码：

```
/* class for crypting and decrypting a file */
class DESEncrypter
{
private Cipher encryptionCipher;
private Cipher decryptionCipher;

public DESEncrypter (SecretKey key) throws Exception
{
encryptionCipher = Cipher.getInstance("DES/ECB/PKCS5Padding");
encryptionCipher.init(Cipher.ENCRYPT_MODE, key);
decryptionCipher = Cipher.getInstance("DES/ECB/PKCS5Padding");
decryptionCipher.init(Cipher.DECRYPT_MODE, key);
}

/* write to 'out' the encryption of the information read from 'in' */
public String encrypt(String unencryptedString)
{
    String encryptedString = "";

    try {
        byte[] unencryptedByteArray = unencryptedString.getBytes("UTF8");

        byte[] encryptedBytes = this.encryptionCipher.doFinal(unencryptedByteArray);

        encryptedString = new sun.misc.BASE64Encoder().encode(encryptedBytes);

    } catch (Exception ex) {
        Logger.getLogger(DESEncrypter.class.getName()).log(Level.SEVERE, null, ex);
    }

    return encryptedString;
}

private static String bytes2String(byte[] bytes)
{

    StringBuffer stringBuffer = new StringBuffer();
    for (int i = 0; i < bytes.length; i++) 
    {
        stringBuffer.append((char) bytes[i]);
    }

    return stringBuffer.toString();
}

/* write to 'out' the information obtained by decrypting the information read from 'in' */
public String decrypt (String encryptedString) throws UnsupportedEncodingException
{
    byte[] unencryptedByteArray = new byte[4096];

    try {
        // Encode bytes to base64 to get a string
        byte[] decodedBytes = new sun.misc.BASE64Decoder().decodeBuffer(encryptedString);

       // Decrypt
       unencryptedByteArray = this.decryptionCipher.doFinal(decodedBytes);     
    } catch (Exception ex) {
        Logger.getLogger(DESEncrypter.class.getName()).log(Level.SEVERE, null, ex);
    }

    return bytes2String(unencryptedByteArray);
}
} 
```

这是我在文件中写入加密字符串的函数：

```
public void writeToFileEncrypted(String filename, String owner, String departament)
{
try 
    {
        BufferedReader br = new BufferedReader(new FileReader(new File("files_encrypted")));
        String crypt = "";
        String aux;
        while ((aux = br.readLine()) != null)
        {
            crypt += aux;
        }
        br.close();

        String info = this.server.crypt.decrypt(crypt);
        info += filename + " " + owner + " " + departament + "\n";

        /* delete the old encryption */
        File temp = new File("files_encrypted");
        temp.delete();

        String infoCrypt = this.server.crypt.encrypt(info); 

        File newFiles = new File("files_encrypted");
        if (newFiles.createNewFile() == false) 
        {
    log.severe("Failed to re-create the 'files_encrypted' file when trying to add a new file");
    return; 
        }

        BufferedWriter bw = new BufferedWriter(new FileWriter(newFiles));
        bw.write(infoCrypt);
        bw.close();
    }
    catch (Exception e)
    {
        log.warning("An exception was caught while trying to remove '" + clientName + "' from the banned list");
        e.printStackTrace();
        return;
}
} 
```

在服务器运行时，我可以从文件中修改该字符串（多次运行该函数）。问题是当我关闭服务器然后我再次打开它时，因为我收到错误：javax.crypto.BadPaddingException: Given final block not proper padded

这是我在服务器打开时从文件中读取的方式：

```
BufferedReader br = new BufferedReader(new FileReader(new File("files_encrypted")));
String crypto = new String();
String aux;
while ((aux = br.readLine()) != null)
{
    crypto += aux;
    readBytes++;
}
br.close();
System.out.println(readBytes);
info = this.crypt.decrypt(crypto); 
```

为什么我会收到这个错误？我做错了什么？我必须以其他方式将加密的字符串写入文件吗？

后期编辑：

我已经更改了从文件中读取字符串、解密、修改、加密然后将其写入文件的函数。

```
public void writeToFileEncrypted(String filename, String owner, String departament)
{
try 
    {
        File f = new File("files_encrypted");
        int nrRead = 0;
        String info = null;
        FileInputStream fis = new FileInputStream(f);
        StringBuffer sb = new StringBuffer();
        int ch;
        while ((ch = fis.read()) != -1)
        {
            sb.append((char)ch);
            nrRead++;
        }
        fis.close();

        StringBuilder sba = null;
        if (nrRead != 0)
        {
            info = this.server.crypt.decrypt(new String(sb.toString().getBytes("UTF-8"), "UTF-8"));
            sba = new StringBuilder(info);
            sba.append(filename + " " + owner + " " + departament + " ");
        }
        else
        {
            sba = new StringBuilder(filename + " " + owner + " " + departament + " ");
        }

        /* delete the old encryption */
        File temp = new File("files_encrypted");
        temp.delete();
        //System.out.println("before: " + sba.toString());
        String infoCrypt = this.server.crypt.encrypt(sba.toString()); 
        //System.out.println("after: " + infoCrypt);
        File newFiles = new File("files_encrypted");
        if (newFiles.createNewFile() == false) 
        {
    log.severe("Failed to re-create the 'files_encrypted' file when trying to add a new file");
    return; 
        }

        FileOutputStream fos = new FileOutputStream(newFiles);
        fos.write(infoCrypt.getBytes("UTF-8"));
        fos.flush();
        fos.close();
    }
    catch (Exception e)
    {
        log.warning("An exception was caught while trying to remove '" + clientName + "' from the banned list");
        e.printStackTrace();
        return;
}
} 
```

当服务器第一次打开时，我还修改了从文件中读取信息的位置：

```
FileInputStream fis = new FileInputStream(f);
StringBuffer sb = new StringBuffer();
int ch;
while ((ch = fis.read()) != -1)
{
    sb.append((char)ch);
    readBytes++;
}

fis.close();
if (readBytes != 0)
{
    System.out.println("on: " + sb.toString());
    info = this.crypt.decrypt(new String(sb.toString().getBytes("UTF-8"), "UTF-8"));                
    System.out.println("load: " + info);
}
} 
```

在带有“on:”的 System.out.println 中，我从文件中读取的内容正是我编写的加密内容，没有任何空格或换行符。如果我用 read(buffer) 读取，其中缓冲区是 byte[]，似乎会增加很多空格。

尽管我已经进行了所有这些修改，但我仍然收到错误 javax.crypto.BadPaddingException: Given final block not proper padded

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:06:56.370

你有几个问题。读取和解密过程应该与加密和写入过程对称。但

*   您使用 将您的 String 转换为 byte[] `getBytes("UTF8")`，这很好，但您不用于`new String(byte[], "UTF8")`执行反向操作。
*   您将整个字符串写入文件，包括潜在的换行符，但您逐行读取并连接每一行，从而在此过程中丢失换行符。您必须阅读已写入的每个字符。

此外，不应该依赖像 sun.misc.Base64Encoder/Decoder 这样的无证、不受支持的类。使用 Apache commons-codec 查找记录在案的 Base64 编码，保证在下一个 JDK 出现时仍然存在，并且可以在每个 JVM 上使用，包括非 Sun JVM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:07:53.513

这里有几件事。

```
private static String bytes2String(byte[] bytes) 
```

是狡猾的，你在这个方法中将一个字节转换为一个字符，所以这里没有指定字符编码。要将字节转换为字符，您应该只使用带有字节数组和编码的 String 构造函数。例如

```
 byte[] tmp = new byte[10];      
    String a = new String(tmp, "UTF-8"); 
```

小心使用 BufferedReaders + .readLine() - 这将在您读取文件时从文件中删除任何换行符，除非您将它们添加回缓冲区。虽然我不认为这是你的问题。

但我认为简化代码的最佳方法是通过 OutputStream 将编码字节直接写入文件。除非您需要通过不喜欢二进制数据的传输方式发送文件的内容，否则不需要 base64 编码。只需使用 Input/OutputStreams 将加密字节直接写入磁盘。

对稍后编辑的回应：

您仍在混淆对二进制数据（字节）和字符数据（字符串/字符）的使用。你不能做这样的事情：

```
 int ch;
    while ((ch = fis.read()) != -1)
    {
        sb.append((char)ch); 
```

输入流正在重新调整字节，一个字节不是一个字符，只是将其转换为一个会导致问题。使用加密时，加密操作的输出是二进制数据，解密操作的输入也是二进制数据。您正在加密文本的事实是您在加密发生之前和解密发生之后处理的事情。您的基本操作应遵循以下原则。

*   获取要加密的文本并将其转换为字节，使用字符串上的 .getBytes(String charsetName) 指定编码。
*   将这些字节传递到您的加密例程中
*   将结果字节直接写入磁盘

解密：

*   从文件中读取字节
*   将字节传递给您的解密例程（作为字节！不涉及字符串/文本）
*   取出输出字节并使用 new String(byte[] bytes, String charsetName) 重新构造您的字符串，指定与以前相同的编码。

您可能会发现以下（未经测试，但应该可以使用）方法很有用：

```
public byte[] readBinaryFile(File f) throws IOException
{       
    byte[] contents = new byte[(int)f.length()];
    BufferedInputStream bis = null;
    try
    {
        bis = new BufferedInputStream(new FileInputStream(f));
        DataInputStream dis = new DataInputStream(bis);
        dis.readFully(contents);
    }
    finally
    {
        if(bis != null)
        {
            bis.close();
        }
    }           
    return contents;            
}

public void writeBinaryFile(byte[] contents, File f) throws IOException
{
    BufferedOutputStream bos = null;
    try
    {
        bos = new BufferedOutputStream(new FileOutputStream(f));
        bos.write(contents);
    }
    finally
    {
        if(bos != null)
        {
            bos.close();
        }
    }           
} 
```

因此，您还需要更改接口以及加密和解密方法的内部结构，以便它们获取和返回字节数组，并放弃 base64 编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T21:59:14.500

我认为它在初始化中

SecureRandom sr = new SecureRandom();
cipher.init（Cipher.DECRYPT_MODE，desKey，sr）；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T22:02:36.097

不确定这是主要问题，但是当您从 中返回解密的字符串时`decrypt()`，您应该使用：

```
return new String(unencryptedByteArray, "UTF-8"); 
```

# php - 使用 Symfony2 重构控制器中的代码

> ID：13869035
> 
> 赞同：0
> 
> 时间：2012-12-13T21:47:20.203
> 
> 标签：php, symfony, controller

我有这两种方法（创建和更新）的代码。每次我需要更新或创建新用户时，我都需要用盐对用户密码进行编码。

```
$factory = $this->get('security.encoder_factory');
$encoder = $factory->getEncoder($entity);
$password = $encoder->encodePassword($entity->getPassword(), $entity->getSalt());
$entity->setPassword($password); 
```

为了避免代码重复，我应该怎么做？

*   在控制器中创建一个新方法`getEncondedPassword($entity) : return $encodedPassword`
*   `$encoder`使用 DI 注入as required 字段将此逻辑添加到表单
*   将此逻辑添加到模型中，并`$encoder`在实体对象的构造函数中传递。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T01:58:44.917

现在我已经改进了（我至少认为......）这个问题的答案。

我创建了一个类，它将接收来自 DI 的 $encoderFactory

```
#services.yml 
parameters:
    password_encoder.class: Beubi\SignatureBundle\Handler\PasswordEncoder
services:
    password_encoder:
            class: %password_encoder.class%
            arguments: [@security.encoder_factory] 
```

因此，我创建了一个将在 Service 容器中使用的类：

```
class PasswordEncoder
{
    protected $encoderFactory;

    public function __construct(EncoderFactory $encoderFactory)
    {
        $this->encoderFactory = $encoderFactory;
    }

    public function encodePassword($entity){
        $encoder = $this->encoderFactory->getEncoder($entity);
        return $encoder->encodePassword($entity->getPassword(), $entity->getSalt());
    }
} 
```

然后在我的控制器中：

```
$password = $this->get('password_encoder')->encodePassword($entity);
$entity->setPassword($password); 
```

这样，我的 User 对象就不知道 $factoryEncoder 或如何编码密码。 **我期待更多关于这个问题的评论......**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:22:44.800

我认为正确的选择是模型/实体方法。所以，我把我的解决方案留在这里：

```
public function hashPassword($container)
{
    $factory = $container->get('security.encoder_factory');

    $encoder = $factory->getEncoder($this);
    $password = $encoder->encodePassword($this->getPassword(), $this->getSalt());
    return $password;
} 
```

在控制器中：

```
//hash user password
$userEntity->setPassword($userEntity->hashPassword($this->container)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:37:44.073

如果您的创建和编辑相当简单且几乎相同，则可以将其组合成一个函数，该函数实际生成并验证表单。
一些代码：

```
class ProductController extends Controller
{
    /**
     * @Route("/create", name="_product_create")
     */
    public function createAction()
    {
        $product = new Product();

        return $this->productForm($product, $this->getRequest(), 'create');
    }

    /**
     * @Route("/edit/{product_id}", name="_product_edit_id")
     */
    public function editIdAction($product_id)
    {
        $entity_manager = $this->getDoctrine()->getEntityManager();
        $product_repository = $entity_manager->getRepository('VendorBundle:Product');

        $product = $product_repository->findOneBy(
            array('id' => $product_id)
        );

        return $this->productForm($product, $this->getRequest(), 'editId');
    }

    protected function productForm(Product $product, Request $request, $twig_name)
    {
        $form = $this->createForm(new ProductType(), $product);

        if ($request->getMethod() == 'POST') {
            $form->bindRequest($request);

            if ($form->isValid()) {
                // Do whatever we want before persisting/flushing

                return $this->redirect($redirect_url);
            }
        }

        $twig_params = array(

        );

        return $this->render(
            'VendorBundle:Product:' . $twig_name . '.html.twig', $twig_params
        );
    }

} 
```

这将呈现`create.html.twig`并`editId.html.twig`取决于路线。
如果`$product->getId() === null`我们正在创建一个新实体，否则我们正在编辑。

# ios - 如何从设备上删除 iOS 崩溃报告者日志？

> ID：13869038
> 
> 赞同：41
> 
> 时间：2012-12-13T21:47:37.960
> 
> 标签：ios

我在日志中收到此消息。

“不保存崩溃日志，因为我们已达到日志存储在磁盘上的限制。从 /var/mobile/Library/Logs/CrashReporter 同步或清除日志以保存新日志

我假设这指的是设备，因为我已经删除了 XCode 中的崩溃报告。

如何从设备上删除 iOS 崩溃报告者日志？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-13T21:57:19.783

断开您的设备并关闭 Xcode。

在您的开发机器上，您应该查看：

```
/Users/%username%/Library/Logs/CrashReporter/MobileDevice/%devicename% 
```

将所有报告移至废纸篓，然后将您的设备与 iTunes 同步。那应该从设备中删除日志。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-10-01T11:57:56.737

该目录`/var/mobile/Library/Logs/CrashReporter`是您 iOS 设备中的目录，而不是您的 Mac OS X/Windows 计算机中的目录。另一个答案提到的目录`~/Library/Logs/CrashReporter/MobileDevice`，可以通过使用 Xcode 设备（Xcode 中的快捷方式：`command`++ `shift`）简单地`2`删除

因此，如果您想删除 iOS 设备崩溃日志，则需要进入该目录。如果您越狱了您的 iOS 设备，您可以使用默认密码 ssh 到您的 iOS 设备`alpine`（如果您没有更改它）

```
ssh root@x.x.x.x 
```

`x.x.x.x`是您的 iOS 设备的 IP 地址。

sshed 到 iOS 设备后，现在您可以删除其中的所有文件/目录以释放一些空间：

```
cd /var/mobile/Library/Logs/CrashReporter
rm -rf * 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-04-30T18:52:57.883

通过 iTunes 同步您的设备将从您的设备中删除日志。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-03-11T16:21:05.937

删除 iOS 设备上的崩溃日志。

1.  在 Xcode 的“设备”窗口中，选择设备后，单击“查看设备日志”按钮。
2.  弹出一个模式窗口，在左侧窗格中列出所有日志，并在右侧窗格中列出选定的日志内容。
3.  单击左窗格中的顶部日志项。
4.  滚动到日志列表的底部。
5.  Shift-单击列表底部的日志项。将选择所有日志项。
6.  按删除键。
7.  出现确认对话框。
8.  在对话框中确认删除。
9.  完毕！

# android - Sencha、phonegap 或 corona 到底是如何工作的？

> ID：13869042
> 
> 赞同：-2
> 
> 时间：2012-12-13T21:47:44.840
> 
> 标签：android, ios, cordova, extjs, coronasdk

这些平台如何允许一个人为多个手机平台编写一个代码？

什么样的魔法允许在 Sencha 中使用简单的 javascript 来生成多平台应用程序？我对那里的所有解决方案持高度怀疑态度。特别是当它们是商业的并且没有人真正解释清楚引擎盖下发生了什么时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:02:35.813

因为您使用 HTML/CSS/JS 编写代码。PhoneGap 现在 Corona 实现了将您的代码 (HTML/CSS/JS) 与本机代码连接起来的本机代码，允许您调用本机功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:02:08.507

这不是简单的 Javascript。必须为每个平台的每个平台的功能分别编写 JS。这是一项复杂的工作。如果您没有使用手机的任何功能，那么该代码将不会被使用，并且您的 HTML/CSS/JS 会显示在该设备的 Web 视图中。

# c++ - 我可以将数组放在 C++ 中的数组中吗？

> ID：13869043
> 
> 赞同：3
> 
> 时间：2012-12-13T21:47:47.533
> 
> 标签：c++, arrays

我仍然很困惑。我可以这样做吗？

```
int x[y[3]] 
```

数组中的数组？

那是正确的格式吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T21:57:56.303

`int x[y[3]];`如果`y[3]`是整数常量表达式，则有效，它将声明一个`y[3]`元素数组。否则无效。

* * *

如果您正在寻找二维数组，请尝试以下操作：

```
#include <array>
std::array<std::array<int, 3>, 4> x; 
```

如果您想减轻痛苦，可以按照 Cat Plus Plus 的建议查看[Boost.MultiArray 。](http://www.boost.org/doc/libs/1_52_0/libs/multi_array/doc/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:57:47.743

即使假设`y[3]`是整数类型（否则没有意义），C++ 不支持 VLA（可变长度数组）。它们是 C99 的一部分，但不是 c++。因此，您的代码不好。

一些编译器确实支持 VLA，但仅作为扩展。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-12-13T21:49:35.057

会是这样的

```
int[,] myArray = new int[1][2];
myArray[0][1] = 1;
myArray[1][1] = 1; 
```

# c# - xml 序列化和继承类型

> ID：13869045
> 
> 赞同：0
> 
> 时间：2012-12-13T21:47:58.240
> 
> 标签：c#, serialization, xmlserializer, inherited, xmlinclude

我收到错误“{”类型 Device1 不是预期的。使用 XmlInclude 或 SoapInclude 属性指定静态未知的类型。"}"

目前我有：

```
public abstract class Device
{
   ..
} 

public class Device1 : Device
{ ... }

[Serializable()]
public class DeviceCollection : CollectionBase
{ ... }

[XmlRoot(ElementName = "Devices")]
public class XMLDevicesContainer
{
    private DeviceCollection _deviceElement = new DeviceCollection();

    /// <summary>Devices device collection xml element.</summary>
    [XmlArrayItem("Device", typeof(Device))]
    [XmlArray("Devices")]
    public DeviceCollection Devices
    {
        get
        {
            return _deviceElement;
        }
        set
        {
            _deviceElement = value;
        }
    }
} 
```

我正在做：

```
 XMLDevicesContainer devices = new XMLDevicesContainer();
        Device device = new Device1();

        device.DeviceName = "XXX";
        device.Password = "Password";

        devices.Devices.Add(device);
        Serializer.SaveAs<XMLDevicesContainer>(devices, @"c:\Devices.xml", new Type[] { typeof(Device1) }); 
```

序列化程序会：

```
 public static void Serialize<T>(T obj, XmlWriter writer, Type[] extraTypes)
    {
        XmlSerializer xs = new XmlSerializer(typeof(T), extraTypes);
        xs.Serialize(writer, obj);
    } 
```

我在序列化程序方法（xs.Serialize）的最后一行出现错误：“{”类型Device1不是预期的。使用 XmlInclude 或 SoapInclude 属性指定静态未知的类型。"}"

我试图在 Device 类上编写 XmlInclude。没有帮助。如果我换行

```
 [XmlArrayItem("Device", typeof(Device))] 
```

成为

```
 [XmlArrayItem("Device", typeof(Device1))] 
```

然后它可以工作，但我想编写多种设备类型的数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-30T15:30:28.390

您必须为希望在 XMLDevicesContainer 类上可用的每个子类添加 XmlIncludeAttribute。

```
[XmlRoot(ElementName = "Devices")]
[XMLInclude(typeof(Device1))]
[XMLInclude(typeof(Device2))]
public class XMLDevicesContainer
{
:
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T09:10:22.660

声明`XmlSerializer`如下：

```
XmlSerializer xs = new XmlSerializer(typeof(obj), extraTypes); 
```

我之前实现的 WCF Web 服务也有同样的问题。我有`(object obj)`一个参数，我声明了我的`XmlSerializer`like `new XmlSerializer(typeof(object))`，这是静态未知的。改变它来`new XmlSerializer(obj.GetType())`解决它。

# java - 解释为什么使用Hadoop书Java类示例，没有编译错误。否则，“int 不能被取消引用”。

> ID：13869053
> 
> 赞同：0
> 
> 时间：2012-12-13T21:48:31.247
> 
> 标签：java, hadoop

我正在比较 O'Reilly 的书*Hadoop: The Definitive Guide*（Tom White，第 3 版）中的示例 Java 代码和我自己重新创建/理解它的尝试。我遇到的问题如下：

书中的类编译得很好：

```
import java.io.IOException;

import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Reducer;

public class MaxTemperatureReducer
  extends Reducer<Text, IntWritable, Text, IntWritable> {

  @Override
  public void reduce(Text key, Iterable<IntWritable> values,
      Context context)
      throws IOException, InterruptedException {

    int maxValue = Integer.MIN_VALUE;
    for (IntWritable value : values) {
      maxValue = Math.max(maxValue, value.get());
    }
    context.write(key, new IntWritable(maxValue));
  }
} 
```

但是当我尝试自己测试它的一部分时，我得到“int cannot be dereferenced:”的编译错误：

```
public class TestMinValue {
    public static void main(String[] args){
        int[] values = {1,2,3,4,5};
        int maxValue = Integer.MIN_VALUE;
        for(int value : values){
            maxValue = Math.max(maxValue, value.get());
}
}
} 
```

我是 Java 新手，想了解其中的区别；为什么示例类工作，但我的片段不是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:51:38.223

`IntWritable`类型是一个类，它有一个方法`get()`。您正在使用原始类型`int`。原语在 Java 中没有方法。

# c# - ServiceStack 验证不显示消息

> ID：13869058
> 
> 赞同：3
> 
> 时间：2012-12-13T21:48:53.780
> 
> 标签：c#, servicestack

我正在使用 ServiceStack（带有新的 API）并尝试验证 DTO。刚刚创建了一些简单的代码来模拟验证，但它显然没有触发，或者至少它没有按预期显示响应中的错误。我的代码如下：

DTO：

```
[Route("/users/login")]
public class UserLogin
{
    public string Email { get; set; }
    public string Password { get; set; }
} 
```

验证器本身：

```
public class UserLoginValidator : AbstractValidator<UserLogin>
{
    public UserLoginValidator()
    {
        RuleSet(ApplyTo.Get, () =>
        {
            RuleFor(x => x.Email).NotEmpty().WithMessage("Please enter your e-mail.");
            RuleFor(x => x.Email).EmailAddress().WithMessage("Invalid e-mail.");
            RuleFor(x => x.Password).NotEmpty().WithMessage("Please enter your password.");
        });
    }
} 
```

在主机中配置验证：

```
Plugins.Add(new ValidationFeature());
container.RegisterValidators(typeof(UserLoginValidator).Assembly); 
```

和服务：

```
public class LoginService : Service
{   
    public object Get(UserLogin request)
    {
        var response = new { SessionId = Guid.NewGuid() };
        return response;
    }
} 
```

是否需要进行任何其他配置或调整才能使其正常工作？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T13:50:56.367

从[文档](https://github.com/ServiceStack/ServiceStack/wiki/Validation)

> 注意：响应 DTO 必须遵循 {Request DTO}Response 命名约定，并且必须与请求 DTO 位于相同的命名空间中！

尝试为响应创建一个类

```
public class UserLoginResponse
{
    public UserLogin Result { get; set; }
} 
```

并归还

```
public class LoginService : Service
{   
    public object Get(UserLogin request)
    {
        var response = new UserLoginResponse { Result = request };
        return response;
    }
} 
```

# java - Java cookie 在 Firefox 中被删除，但在 Google 或 IE 中没有

> ID：13869060
> 
> 赞同：1
> 
> 时间：2012-12-13T21:48:58.930
> 
> 标签：java, internet-explorer, google-chrome, spring-mvc, session-cookies

我有以下代码试图从我的浏览器中删除一些 JSESSIONID cookie。

```
String[] cookieList = "/App1/,/App2/,/App3/".split(",");

for (int i = 0; i < cookieList.length; i++) {

     String cookiePathString = cookieList[i];
     response.setContentType("text/html");
     Cookie cookieToKill = new Cookie("JSESSIONID", "No Data");
     cookieToKill.setDomain(getCookieDomainName("myDomain.com"));
     cookieToKill.setMaxAge(0);
     cookieToKill.setPath(cookiePathString);
     cookieToKill.setComment("EXPIRING COOKIE at " + System.currentTimeMillis());
     response.addCookie(cookieToKill);
} 
```

该代码在 Firefox 中运行良好，并删除了 JSESSIONID。在 Chrome 和 IE 中它没有。您需要做什么才能使 IE 和 Chrome 中的这些会话 cookie 过期？

这是在运行 Java 7 的 Tomcat 上的 Spring MVC 应用程序中运行的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:34:31.680

Cookie 完全搞砸了。

服务器的最佳实践：

1.  使用 Set-Cookie，而不是 Set-Cookie2。
2.  如果有多个 cookie，请为每个 cookie 使用单独的 Set-Cookie 标头。
3.  使用过期，而不是 Max-Age。
4.  使用日期格式：`Sun, 06 Nov 1994 08:49:37 GMT`

例如：

```
Set-Cookie: JSESSIONID=NO_DATA; Path=/App1/; Domain=myDomain.com; Expires=Thu, 01 Jan 1970 00:00:00 GMT 
```

我可以建议你做什么：

1.  cookie 值中没有空格。
2.  称呼`cookie.setVersion(0);`

如果还是不走运，忘记`Cookie`上课，试试手动设置http头

```
response.addHeader("Set-Cookie", 
    "JSESSIONID=NO_DATA; Path=/App1/; Domain=myDomain.com; Expires=Thu, 01 Jan 1970 00:00:00 GMT"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:02:26.207

[这个 SO question](https://stackoverflow.com/questions/1716555/setting-persistent-cookie-from-java-doesnt-work-in-ie)表明解决方案可能是调用`setHttpOnly(true)`.

# entity-framework - 实体框架 - edm 类型映射多个

> ID：13869066
> 
> 赞同：5
> 
> 时间：2012-12-13T21:49:25.220
> 
> 标签：entity-framework

我有一个简单的实体数据模型（使用 VS2010），我从一个包含三个不相关表的简单 SQL Server 数据库进行逆向工程。

我尝试使用以下代码将数据保存到数据库：

```
var dbOptions = new ARC_WHENTECHModel.TEMP_LANDED_WHENTECH_OPTION_POSITION();

//first map fields required for standard di processing
dbOptions.OPTION_POSITION_SOURCE_ID = webSvcOption.TDR + "_" + webSvcOption.CNTR + "_" + webSvcOption.CRV;
dbOptions.INSERTED_DT = DateTime.Now;
dbOptions.CURRENT_IND = "Y";

//now map the data we've pulled from the web service call
dbOptions.CA = webSvcOption.CA;
dbOptions.CDTP = webSvcOption.CDTP;
dbOptions.CMD = webSvcOption.CMD;
dbOptions.CNTR = webSvcOption.CNTR;
dbOptions.CPP = webSvcOption.CPP;
dbOptions.PDTP = webSvcOption.PDTP;
dbOptions.SPR = webSvcOption.SPR;
dbOptions.TDR = webSvcOption.TDR;

context.AddToTEMP_LANDED_WHENTECH_OPTION_POSITION(dbOptions);
context.SaveChanges(); 
```

但我得到以下异常：

```
An EdmType cannot be mapped to CLR classes multiple times. The EdmType 'RDLMServiceTier.TEMP_LANDED_WHENTECH_FUTURES_POSITION' is mapped more than once. 
```

在 Designer.cs 代码中的以下行 (base.AddObject)：

```
[global::System.CodeDom.Compiler.GeneratedCode("System.Data.Entity.Design.EntityClassGenerator", "4.0.0.0")]
public void AddToTEMP_LANDED_WHENTECH_OPTION_POSITION(TEMP_LANDED_WHENTECH_OPTION_POSITION tEMP_LANDED_WHENTECH_OPTION_POSITION)
{
    base.AddObject("TEMP_LANDED_WHENTECH_OPTION_POSITION", tEMP_LANDED_WHENTECH_OPTION_POSITION);
} 
```

谁能告诉我我可能做错了什么？我对实体框架没有太多经验（过去它总是“刚刚工作”）。我想下一步可​​能是反映 EF 代码，但这将非常棘手，因为我正在远程机器上进行调试，我没有很大的空间来安装额外的软件。

谢谢

抢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:59:13.637

Gert 正确回答了这个问题 - 存在另一个模型文件副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T15:30:12.153

我刚刚遇到了类似的问题，导致它的具体行是：

```
[EdmComplexTypeAttribute(NamespaceName = "MyModel", Name = "MyDuplicatedClassName")] 
```

修复重复的名称后，一切正常。

# json - 一项操作失败时的 REST 调用状态

> ID：13869076
> 
> 赞同：1
> 
> 时间：2012-12-13T21:50:22.230
> 
> 标签：json, rest, response, status

我有一个学生添加 REST api 调用。这允许候选数据以及文件附件。可以说，候选人已成功添加，但由于某种原因未上传文档。响应状态码应该是什么。

如果两者都成功，我将使用新创建的候选 JSON 对象返回 200。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:01:02.417

REST API 调用应该成功或失败。没有半途而废。

如果创建帐户不是强制上传附件，则应在单独的调用中完成。如果附件是强制性的（或者如果提供了必须上传的附件），则请求应该失败，不会创建任何用户，然后返回指示问题的 4xx 状态代码。

假设它不是强制性的，我会将其分成 2 个不同的 REST 调用。试图将过多的功能重载到一个调用中会使您的 api 变得混乱。我建议创建一个调用创建用户，第二个调用将文件关联到用户。然后您只需使用 201（为新用户创建）和 200（用于成功关联文档）响应代码。

*另一种选择：*优雅地忽略失败，创建用户，返回 201 并忍受丢失的附件:)

# android - textViewResourceId 参数是否总是必要的？

> ID：13869080
> 
> 赞同：5
> 
> 时间：2012-12-13T21:50:43.027
> 
> 标签：android, android-arrayadapter

在编写我自己的扩展**ArrayAdapter**类的适配器时，我遇到了可用的不同构造函数，我注意到它们都需要一个*textViewResourceId*参数。所以最初，我决定提供我的自定义适配器类**android.R.id.text1**：

```
MyAdapter adapter = new MyAdapter(this, R.layout.myRow, android.R.id.text1); 
```

然而，后来在我的开发过程中，我决定在我想要的地方覆盖**getView**方法

```
TextView label = (TextView) myRow.findViewById(android.R.id.text1);
label.setText("Position #" + position); 
```

效果很好。但是后来想到了这个问题：如果我正在执行如何显示行的逻辑，那么在我启动自定义适配器时是否真的有必要向构造函数提供*textViewResourceId ？*还是当您覆盖**getView**时，不再需要该参数？如果我的想法是正确的，那么在知道您无论如何都会覆盖显示行为的情况下，实例化适配器的常见做法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T22:00:29.883

如果您要覆盖`getView`，则**不需要**指定适当的`textViewResourceId`.. 您可以传入 0。`ArrayAdapter`尝试访问该 ID 的唯一时间是在`getView`.. 由于您正在覆盖`getView`并提供自己的视图`textViewResourceId`永远不会访问.. 因为超级类需要一个视图 ID。您仍然需要将视图 ID 传递给 super 调用。但是，它可以只是 0，因为它永远不会被使用

[ArrayAdapter Source 证实了这一切](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/ArrayAdapter.java#ArrayAdapter.getView%28int,android.view.View,android.view.ViewGroup%29)

如果您没有指定正确的`textViewResourceId`并且没有覆盖`getView`..假设您`getView`的`ArrayAdapter`整个视图是`TextView`.. 如果您的视图不是`TextView`.. 您最终会因 ClassCastException 崩溃..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:45:27.773

您不需要使用任何类型的内置适配器。

你可以扩展[BaseAdapter](http://developer.android.com/reference/android/widget/BaseAdapter.html)并制定你自己的规则来显示什么，保存什么类型的数据等等......

事实上，我几乎从不使用 android 开箱即用的内置适配器，因为使用 baseAdapter 非常简单。

# c# - 如何从日期列表中选择每天最晚时间的列表

> ID：13869092
> 
> 赞同：2
> 
> 时间：2012-12-13T21:51:14.630
> 
> 标签：c#, linq

这个问题可能听起来非常令人困惑，但很难描述我想要做什么。基本上，我有一个`DateTime`对象列表，我想创建一个新列表，其中包含列表中表示列表中表示的每个日期的最新时间的对象。例如，假设我有一个包含这些`DateTime`s 的列表：

*   2012 年 12 月 13 日凌晨 2:00:00
*   2012 年 12 月 13 日凌晨 4:00:00
*   2012 年 12 月 13 日晚上 8:00:00
*   2012 年 12 月 14 日下午 5:00:00
*   2012 年 12 月 14 日凌晨 3:00:00
*   2012 年 12 月 15 日上午 10:00:00

我希望我的结果列表包含以下内容：

*   2012 年 12 月 13 日晚上 8:00:00
*   2012 年 12 月 14 日下午 5:00:00
*   2012 年 12 月 15 日上午 10:00:00

我知道我可以使用 LINQ 做到这一点。我只是很难想清楚正在发生的事情。我想我必须从一个`IEnumerable<IEnumerable<DateTime>>`内部`IEnumerable`是所有具有相同日期的 s 列表中进行选择`DateTime`，然后我想通过降序对它们进行排序并选择第一个。

我很迷茫……

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T21:54:56.477

试试这个：

```
var dates = list.GroupBy(dt => dt.Date).Select(g => g.Max()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:59:03.447

你可以做这样的事情

```
var groups = dateList.GroupBy(date => date.Date)
                     .Select( grp => grp.Max( date => date.TimeOfDay)); 
```

# datetime - 一天真的是24小时吗？

> ID：13869106
> 
> 赞同：0
> 
> 时间：2012-12-13T21:52:12.463
> 
> 标签：datetime

这可能听起来很傻，但请耐心等待。我最近一直在处理间隔和日期。一个困扰我的问题：一天真的是24小时吗？从理论和实践的角度来看，我对答案很感兴趣。

让我们以今天为例，这一天从 2012 年 12 月 13 日 00:00:00 开始，根据（所有）日期时间实现，它将在 2012 年 12 月 14 日 00:00:00 结束。这是正确的，两个日期之间的差是整整 24 小时。

这样做的问题是结束日期被认为是“明天”。大多数人认为一天从 00:00:00 开始，到 23:59:59 结束。

那么，今天是开始时的封闭间隔，并且在结束时打开，例如`[start..end)`，结束非常非常接近 2012 年 12 月 14 日 00:00:00（所以不是一个完整的 24 小时）？或者它实际上是在两端关闭，它们之间有整整 24 小时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T22:07:34.547

这只能在集合成员的语言中明智而明确地解决，所以这就是我将在这里选择的策略。

一天结束，下一天从**午夜**开始。在连续时间的基础上，属于一天的时刻集合包括从当天午夜（含）到次日午夜（不含）的半开区间。在离散时间的基础上，属于某一天的一组时刻包括介于当天午夜（含）和下一个午夜（含）之前的最小可能时刻发生的时刻。

总而言之：一天“尽可能接近”到 24 小时。在极限情况下（连续时间），一天的长度逐渐接近 24 小时。显然，这个讨论忽略了闰秒和闰日。

# javascript - 在 Android 中使用 Swype

> ID：13869113
> 
> 赞同：0
> 
> 时间：2012-12-13T21:52:38.067
> 
> 标签：javascript, android, html, cordova, jquery-mobile

我正在做这个程序，想用你的手指添加滑动屏幕，我做到了，但由于某种原因，它在我的 Android 2.3.3 手机上不起作用，但在浏览器中，一切正常。你能说出什么问题吗？

这是代码

```
 <!DOCTYPE html>
<html>
<head>

  <title>jQuery Mobile test page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet"  href="http://code.jquery.com/mobile/latest/jquery.mobile.css" />
  <!-- <link rel="stylesheet"  href="jquery.mobile/jquery.mobile-1.1.0.css" />  -->
  <script src="http://code.jquery.com/jquery-1.7.1.js"></script> 
  <script type="text/javascript">
    var pageSeq = ['page1','page2','page3','page4'];
    var currentPage = 0;
    var bindSwipeEvents = function() {
        $(".ui-page").swipeleft(function() {
            console.log(pageSeq.length + ",current:"+currentPage);
            if(currentPage==pageSeq.length) { return; }
            currentPage++;
            $.mobile.changePage( $('#'+pageSeq[currentPage]), 
                             { transition: "slide", reverse:false});
        });

        $(".ui-page").swiperight(function() {
            if(currentPage==0) { return; }
            currentPage--;
            $.mobile.changePage( $('#'+pageSeq[currentPage]), 
                             { transition: "slide", reverse:true});
        });
    };

    $( '.ui-page' ).live( 'pageinit',function(event){
        bindSwipeEvents();
    });
    bindSwipeEvents();
  </script>
  <script src="http://code.jquery.com/mobile/latest/jquery.mobile.js"></script>
  <!-- <script src="jquery.mobile/jquery.mobile-1.1.0.js"></script>  -->
  <script type="text/javascript" charset="utf-8" src="js/cordova-1.6.1.js"></script> 
</head>

<body>

<div data-role="page" id="page1">
    <div data-role="header">
        <h1>Page Title</h1>
    </div><!-- /header -->

    <div data-role="content">    
        <h3> Page 1 </h3>            
    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page -->

<div data-role="page" id="page2">
    <div data-role="header">
        <a data-rel="back">Back</a>
        <h1>Page Title</h1>
    </div><!-- /header -->

    <div data-role="content">    
        <h3>Page 2</h3>
    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page -->
<div data-role="page" id="page3">
    <div data-role="header">
        <a data-rel="back">Back</a>
        <h1>Page Title</h1>
    </div><!-- /header -->

    <div data-role="content">    
        <h3>Page 3</h3>
    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page -->
<div data-role="page" id="page4">
    <div data-role="header">
        <a data-rel="back">Back</a>
        <h1>Page Title</h1>
    </div><!-- /header -->

    <div data-role="content">    
        <h3>Page 4</h3>
    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:30:28.663

在大多数 android 2.x ROM 中，多点触控事件（如滑动和捏合）在 android 浏览器中不起作用（[请参见此处](http://code.google.com/p/android/issues/detail?id=11909)）。

[但是，您可以使用此解决方法](https://github.com/Philzen/WebView-MultiTouch-Polyfill/)重新启用这些事件，从而在 android 2.x 设备上的 phonegap 应用程序中使用它们。

我已经在我的 phonegap 应用程序中使用了它，并使用[hammer.js](http://eightmedia.github.com/hammer.js/)库在android 2.2 上成功测试了它来进行事件监听。

# jquery - 简单的 JQuery .fadeIn 事件在我的浏览器上无法正常工作

> ID：13869117
> 
> 赞同：1
> 
> 时间：2012-12-13T21:52:50.153
> 
> 标签：jquery, fadein

我是 JQuery 的新手，正在尝试一些基本事件。

我在我的网站建设页面上使用了fadeIn事件（[我的网站](http://www.julianamlinder.com)

我使用的代码如下，仅适用于当前的三个选择器：

```
$(document).ready(function(){

$('#logo').fadeIn(3000);
$('#heading').delay(2000).fadeIn(3000);
$('#tagline').delay(1000).fadeIn(3000);

}); 
```

虽然我的男朋友每次刷新时都说它在他的 Chrome 浏览器中有效，但在我的浏览器中并不总是有效。有时图像出现，有时不出现。有时它工作得很好，有时却没有。

这可能是我的互联网连接吗？还是我的代码？

我是新手，所以任何帮助将不胜感激！提前致谢。

朱莉安娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:47:13.047

Most likely the images aren't done loading or simply don't load in some cases, which causes them to just appear rather than fading in because they were not visible when the fadeIn occurred. To avoid this, make sure they are first loaded by using the window load event.

```
$(window).load(function(){
  // do stuff
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T22:19:46.957

我会在这里保留这个答案，但更明显和*更*容易的非过度杀伤方法可能是**@Kevin [B](https://stackoverflow.com/questions/13869117/simple-jquery-fadein-event-not-working-correctly-on-my-browser#comment19099592_13869117)**在上面的评论中建议的方法，并使用`$(window).load()`which 等待所有页面内容被加载，而不是`$(document).ready()`仅等待要加载的 HTML DOM。

* * *

您可能想要做的是确保在尝试淡入之前已加载图像。如果在页面完成渲染并且您的 JS 运行时未加载它，它将不会显示。然后你将刷新浏览器，它会在那个时候工作。

尝试这个：

```
$(document).ready(function(){

    $("#logo img").bind("load", function () { 
        if(!$("#logo").is(":visible")) {
             $('#logo').fadeIn(3000);
        }
    });

    $('#logo').fadeIn(3000);
    $('#heading').delay(2000).fadeIn(3000);
    $('#tagline').delay(1000).fadeIn(3000);

​}); 
```

你要做的是首先说一旦图像完成加载，如果它还没有变得可见，就把它淡入。但问题是如果图像之前已经下载过，这会赢从来没有真正开过火。所以你需要在它下面有一个正常的fadein()，它也总是运行。

这样做的主要问题是您的时间将关闭，除非（可能只有 < 1 秒），除非您想暂停所有动画，直到确定加载图像。

[这是一个可以玩的小提琴](http://jsfiddle.net/digthedoug/7BJMc/)

# ios - iOS EKEvent Store 在循环中重新创建 iCloud 日历，不会保存本地。

> ID：13869118
> 
> 赞同：5
> 
> 时间：2012-12-13T21:52:59.830
> 
> 标签：ios, ekeventkit, ekeventstore

我遇到了一个奇怪的问题 EKEventStore、iCloud 和本地日历。如果启用了 iCloud，则会创建日历并将事件保存到您所期望的日历中。如果 iCloud 已关闭并且您尝试保存事件，则没有任何反应，但是设备会继续每 3-5 秒循环创建 iCloud 日历，直到重新打开 iCloud，然后所有这些日历作为副本涌入 iCloud。我使用的代码几乎与此处多次引用的代码以及 Apples Docs 中的代码完全相同。我完全不知道为什么它不起作用，而且通常关于 EKEventStore 的文档似乎很少。

//•••••••••••••••••••••••••••••••••••••••••••••• # pragma mark – 保存事件 //•••••••••••••••••••••••••••••••••••••••••• ••••</p>

```
-(void)saveEventWithDate:(NSDate *)startDate endDate:(NSDate *)endDate
{
    AppData *theData = [self theAppData];

    if([self checkIsDeviceVersionHigherThanRequiredVersion:@"6.0"]) {
        [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) { // iOS 6 Support

            if (granted){
                NSLog(@"Access Granted");
            } else {
                NSLog(@"Access Not Granted");
            }

        }];
    }

    EKEvent *event  = [EKEvent eventWithEventStore:eventStore];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    if ([eventStore calendarWithIdentifier:[defaults objectForKey:@"My Calendar"]] != nil) // Calendar Existed
    {
        event.calendar  = [eventStore calendarWithIdentifier:[defaults objectForKey:@"My Calendar"]];
        NSLog(@"Calendar Existed");

    } else { // Create Calendar

        EKSource *theSource = nil;

        for (EKSource* src in eventStore.sources) {
            if ([src.title isEqualToString:@"iCloud"]) {
                theSource = src;
                break;
            }
            if (src.sourceType == EKSourceTypeLocal && theSource==nil) {
                theSource = src;
                break;
            }
        }

        [self setupCalendarWithSource:theSource withEvent:event];
    }

    NSLog(@"Type of Event:%@",typeOfEvent);

    if ([typeOfEvent isEqualToString:@"Hello"]) {
        event.title     = [NSString stringWithFormat:@"%@ Hello",[theData.hello_info objectForKey:@"customer_name"]];
        event.location  = [NSString stringWithFormat:@"Phone #%@",[theData.hello_info objectForKey:@"customer_phone_number"]];
        event.notes     = [NSString stringWithFormat:@"Hello Issue: %@",[theData.hello_info objectForKey:@"hello_issue"]];
        NSLog(@"Hello");
    }

    event.startDate = startDate;
    event.endDate   = endDate;
    event.allDay    = NO;
    EKAlarm *alarm = [EKAlarm alarmWithRelativeOffset:-1800]; // Half Hour Before
    event.alarms = [NSArray arrayWithObject:alarm];

    [eventStore saveEvent:event span:EKSpanThisEvent error:nil];

    SAFE_PERFORM_WITH_ARG(_delegate, @selector(wasScheduled), nil);
}

-(void)setupCalendarWithSource:(EKSource *)theSource withEvent:(EKEvent *)event {

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    EKCalendar *cal;
    cal = [EKCalendar calendarWithEventStore:eventStore];
    cal.title = @"My Appointments";
    cal.source = theSource;
    [eventStore saveCalendar:cal commit:YES error:nil];
    NSLog(@"cal id = %@", cal.calendarIdentifier);
    NSString *calendar_id = cal.calendarIdentifier;
    [defaults setObject:calendar_id forKey:@"My Calendar"];
    event.calendar  = cal;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T14:09:28.473

我不确定你为什么会出现这种行为，但我认为由于禁用了 iCloud，系统无法对其进行查询，然后排队创建请求，一旦你唤醒 iCloud 就会解决（但我假设）。

无论如何，我想到的第一个解决方案是以这种方式检查 iCloud 是否处于活动状态

```
EKSource *defaultSource = [eventStore defaultCalendarForNewEvents].source;

if (defaultSource.sourceType == EKSourceTypeCalDAV)
    NSLog(@"iCloud Enable");
else
    NSLog(@"iCloud Disable"); 
```

完成后，您可以将事件正确保存到默认源，然后保持 2 个日历（本地日历和云日历）彼此同步...

仍然会提示重新激活 iCloud 添加所有本地日历。

另请参阅此处的第二个答案[在 iOS 设备上访问以编程方式创建的日历](https://stackoverflow.com/questions/9932430/accessing-programmatically-created-calendar-on-ios-device)（这是我的想法；））

我希望我是有帮助的。

编辑：也许没有必要创建第二个日历...尝试将日历的来源从 EKSourceTypeCalDAV 更改为 EKSourceTypeLocal ...不要忘记使用提交“YES”保存日历

EDIT2：好的，刚刚测试...

替换这个：

```
} else { // Create Calendar

    EKSource *theSource = nil;

    for (EKSource* src in eventStore.sources) {
        if ([src.title isEqualToString:@"iCloud"]) {
            theSource = src;
            break;
        }
        if (src.sourceType == EKSourceTypeLocal && theSource==nil) {
            theSource = src;
            break;
        }
    }

    [self setupCalendarWithSource:theSource withEvent:event];
} 
```

有了这个 ...

```
} else { // Create Calendar

    EKSource *theSource = [eventStore defaultCalendarForNewEvents].source;

    [self setupCalendarWithSource:theSource withEvent:event];
} 
```

这样，您将在正确的源中创建日历（如果用户停用 iCloud 和 CalDAV 则为本地）

然后：

1）当用户选择停用 iCloud 时，应将日历留在 iphone 上（而不是删除），以便您在本地源中拥有云日历

2) 当用户选择激活 iCloud 时，会将他的本地日历与云端合并，然后就可以了！！

我希望这有帮助

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-03T20:50:13.533

如果您想要一种防弹方法来查找 iCloud 日历并在 iCloud 被禁用的情况下恢复到本地日历，请使用下面的代码。我已经包含了一些可能会有所帮助的评论：

```
for (EKSource *source in eventStore.sources) {  //Check for iCloud
    if (source.sourceType == EKSourceTypeCalDAV && [source.title isEqualToString:@"iCloud"]) {

        NSLog(@"Found iCloud Service.");  //Found iCloud

        if([source calendarsForEntityType:EKEntityTypeEvent].count>0){     //Check to see if Calendar is enabled on iCloud

            NSLog(@"iCloud Calendar is Enabled."); //Calendar is Enabled

            if([self saveEventCalendarWithSource:source]){
                return YES;
            }

        }else{

            NSLog(@"iCloud Calendar is Disabled."); //Calendar is Disabled

        }
    }
}

//If we are here it means that we did not find iCloud Source with iCloud Name. Now trying any CalDAV type to see if we can find it

for (EKSource *source in self.reminderStore.sources) {  //Check for iCloud
    if (source.sourceType == EKSourceTypeCalDAV) {

        [self logData:@"Trying to save calendar in EKSourceTypeCalDAV Service."];

        if([self saveEventCalendarWithSource:source]){
            return YES;
        }

    }
}

//If we are here it means that we did not find iCloud and that means iCloud is not turned on. Use Local service now.

for (EKSource *source in self.reminderStore.sources) {  //Look for Local Source
    if (source.sourceType == EKSourceTypeLocal){  //Found Local Source
        NSLog(@"Found Local Source.");

        if([self saveEventCalendarWithSource:source]){
            return YES;
        }

    }
} 
```

这是保存日历的代码：

```
- (Boolean) saveEventCalendarWithSource:(EKSource *)source{

EKCalendar *Calendar = nil;

MyCalendar = [EKCalendar calendarForEntityType:EKEntityTypeEvent eventStore:eventStore];

MyCalendar.title = @"XXX";
MyCalendar.CGColor = [UIColor blueColor].CGColor;

MyCalendar.source = source;

NSError *err;
if([eventStore saveCalendar:MyCalendar commit:YES error:&err]){

    if(MyCalendar.calendarIdentifier == nil){

        NSLog(@"Could not save Calendar: %@",err);

        return FALSE;
    }

    NSLog(@"Calendar Created. Here's the identifier %@",[MyCalendar calendarIdentifier]);

    return TRUE;
}

NSLog(@"Could not create calendar! Reason:%@",err.description);

return FALSE; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:18:38.640

你的帖子很有帮助，我正在努力解决完全相同的错误。谢谢 ！

我只是做了一些小的修改，因为使用 defaultCalendarForNewEvents 源的解决方案并非在所有情况下都有效：某些源不允许您在其中创建新日历。

我只是检查了 icloud 源中的日历数量。如果计数为零，则日历同步关闭，我采用本地来源：

```
EKSource* localSource = nil;
EKSource* iCloudSource = nil;
for (EKSource* source in _eventStore.sources){
    if (source.sourceType == EKSourceTypeLocal){
        localSource = source;
    }else if(source.sourceType == EKSourceTypeCalDAV && [source.title isEqualToString:@"iCloud"]){
        iCloudSource = source;
    }
}

if (iCloudSource && [iCloudSource.calendars count] != 0) {
    calendar.source = iCloudSource;
}else{
    calendar.source = localSource;
} 
```

# php - 使用 php 启动远程 MySQL 服务器

> ID：13869126
> 
> 赞同：2
> 
> 时间：2012-12-13T21:53:20.853
> 
> 标签：php, mysql, apache, centos

我目前使用托管 MySQL 的 VPS 来帮助减少我的主服务器的负载。有时，由于接收到的流量过多，SQL 服务器会崩溃。

我想要一个可以启动远程服务器的小型 PHP 脚本。我已经有了一种检测 SQL 服务器何时不可用的方法，我只需要一种执行`/etc/init.d/mysql start`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:55:05.793

看看[rexec 命令](http://linux.about.com/library/cmd/blcmdl1_rexec.htm)

# python - PYTHON - 添加到列表中

> ID：13869132
> 
> 赞同：0
> 
> 时间：2012-12-13T21:53:36.160
> 
> 标签：python

我能写什么将用户输入（raw_input / input）添加到已经存在的列表中？此外，这将不得不继续下去。例如，如果用户将一项添加到列表中，它会询问他们是否要添加另一项。如果答案是肯定的，那么它将在列表中添加另一个项目。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:08:04.687

```
mylist = []
while 1:
    mylist.append(raw_input(': '))
    if raw_input('Add another? (Y/n): ')[0].lower() == 'n':
        break 
```

更短：

```
mylist = []
while 1:
    mylist.append(raw_input(': '))
    if mylist[-1] == '': break 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:01:44.303

制作一个空列表。然后开始一个无限循环，您可以在其中读取用户输入并附加到列表中。中断取决于另一个用户输入（“是”或“否”）。

# jquery - 设置查询参数并在选中复选框时重新加载页面

> ID：13869135
> 
> 赞同：0
> 
> 时间：2012-12-13T21:53:43.720
> 
> 标签：jquery, ruby, ajax, twitter-bootstrap, sinatra

我的主页上有一组复选框（目前不执行任何操作）：

```
 <ul class="nav nav-list">
      <li class="nav-header">Questions</li>
      <li><label class="checkbox"> <input type="checkbox"> All </label></li>
      <li><label class="checkbox"> <input type="checkbox"> Funny </label></li>
      <li><label class="checkbox"> <input type="checkbox"> Popular </label></li>
      <li><label class="checkbox"> <input type="checkbox"> Helpful </label></li>
    </ul> 
```

我现在写了一个简单的后端，它支持如下 URL：[http](http://myhomepage.com?funny=1&popular=1) ://myhomepage.com?funny=1&popular=1来显示既有趣又流行的问题，例如。每个选项都有一个查询参数。服务器检查查询参数并返回`@questions`具有适当集合的更新变量。视图遍历`@questions`并一一显示它们。

这是我的目标：当用户选择复选框（例如有趣和流行）时，我希望主页调用服务器（AJAX？）以更新页面上显示的一组问题以匹配用户的选择（理想情况下在加载内容时显示微调器）。我可以使用 jQuery 或其他任何东西。

我该怎么做呢？对于后端，我使用 Sinatra / Ruby，UI 使用 Bootstrap，我可以使用 jQuery 或您推荐的任何其他东西 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:17:53.000

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
</head>
<body>
<ul class="nav nav-list">
      <li class="nav-header">Questions</li>
      <li><label class="checkbox"> <input type="checkbox"> All </label></li>
      <li><label class="checkbox"> <input type="checkbox"> Funny </label></li>
      <li><label class="checkbox"> <input type="checkbox"> Popular </label></li>
      <li><label class="checkbox"> <input type="checkbox"> Helpful </label></li>
    </ul>

    <div id="result"></div>

<script>

$(function(){
var Url;
$("input[type='checkbox']").click(function(){
    Url = 'http://myhomepage.com?';
    $.each($("input[type='checkbox']"),function(){

    if(this.checked)
    {
        var html = $.trim($(this).parent().html().replace('<input type="checkbox"> ',''));
        Url = Url + html + "=1&";
    }

    });
    console.log(Url);
    $.ajax({
      url: Url,
      success: function(data) {
        $('#result').html(data);
         alert('Load was performed.');
      }
    });

});

});
</script>
</body>
</html> 
```

# r - do.call 构建和执行 data.table 命令

> ID：13869144
> 
> 赞同：2
> 
> 时间：2012-12-13T21:54:15.337
> 
> 标签：r, data.table, plyr

我有一个小的`data.table`代表每个测试单元格的一条记录（AB 测试结果），并且我想添加更多列来比较每个测试单元格，与其他测试单元格进行比较。换句话说，我要添加的列数将取决于所讨论的 AB 测试中有多少测试单元格。

我的`data.table`样子：

```
Group   Delta     SD.diff
Control     0           0
Cell1 0.00200 0.001096139
Cell2 0.00196 0.001095797
Cell3 0.00210 0.001096992
Cell4 0.00160 0.001092716 
```

我想添加以下列（这里的数字是垃圾）：

```
Group v.Cell1    v.Cell2   v.Cell3   v.Cell4
Control  0.45       0.41      0.45      0.41 
Cell1    0.50       0.58      0.48      0.66
Cell2    0.58       0.50      0.58      0.48
Cell3    0.48       0.58      0.50      0.70
Cell4    0.66       0.48      0.70      0.50 
```

我确信这`do.call`是要走的路，但我不知道如何将一个 do.call 嵌入到另一个内部以生成脚本......而且我不知道如何执行脚本（总共 20 行） . 我目前最接近的是：

```
a <- do.call("paste",c("test.1.results <- mutate(test.1.results, P.Better.",list(unlist(test.1.results[,Group]))," = pnorm(Delta, test.1.results['",list(unlist(test.1.results[,Group])),"'][,Delta], SD.diff,lower.tail=TRUE))", sep="")) 
```

这会产生 5 个脚本行，例如：

```
test.1.results <- mutate(test.1.results, P.Better.Cell2 = pnorm(Delta, test.1.results['Cell2'][,Delta], SD.diff,lower.tail=TRUE)) 
```

它仅将一个测试单元的结果与自身进行比较.. 0.50 的结果（由于偶然性而导致的差异）。没有什么用，因为我需要将每个测试相互比较。

不知道该去哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T22:38:37.527

**更新：在[v1.8.11](https://r-forge.r-project.org/R/?group_id=240)中，现在实现了[FR #2077](https://r-forge.r-project.org/tracker/?func=detail&atid=978&aid=2077&group_id=240)`set()` -现在可以通过引用添加列，. 来自[新闻](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable)：**

> `set()`现在可以通过引用添加新列。例如，`set(DT, i=3:5, j="bla", 5L)`等价于`DT[3:5, bla := 5L]`。这是`FR #2077`。添加了测试。

* * *

像这样的任务通常使用`set()`. 为了演示，这里是您在问题中的翻译（未经测试）。但我意识到你想要的东西与你发布的不同（我不太明白，很快）。

```
for (i in paste0("Cell",1:4))
  set(DT,                   # the data.table to update/add column by reference
    i=NULL,                 # no row subset, NULL is default anyway
    j=paste("P.Better.",i), # column name or position. must be name when adding
    value = pnorm(DT$Delta, DT[i][,Delta], DT$SD.diff, lower.tail=TRUE) 
```

请注意，您只能添加新列的子集，其余部分将填充 NA。与`:=`和`set`。

# c++ - 在 C++11 中查找运算符的规则

> ID：13869150
> 
> 赞同：15
> 
> 时间：2012-12-13T21:54:47.203
> 
> 标签：c++, c++11

[N3337](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)，“工作草案，C++ 编程语言标准”，在第 13.3.1.2 节中给出了以下示例，p。10：

```
struct A { };
void operator + (A, A);
struct B {
  void operator + (B);
  void f ();
};
A a;
void B::f() {
  operator+ (a,a);   // error: global operator hidden by member
  a + a;             // OK: calls global operator+
} 
```

但是，这只是一个注释：

> 注意：表达式中运算符的查找规则与函数调用中运算符函数名的查找规则不同，如下例所示：

我的问题是，标准中的什么地方说这是必须发生的事情，而不是仅仅用一个例子来说明？

据我所知，根据第 13.3.1.2 条，p。2、运算符表达式转换为运算符函数调用。那么为什么以及如何在上面的示例中有所不同呢？

## 编辑：

调查问题后，我认为我可能忽略了 p。3 和 p.6 在同一条款中共同声明，在查找运算符时，全局候选者和成员候选者被同等考虑（因此，如注释所述，查找规则不同）。但是，我对这个主题的调查是由这个例子引起的，它以与 GCC 4.8 和 Clang 相同的方式编译：

```
struct X {};  struct Y {};

void operator+(X, X) { }
void operator+(X, Y) { }

void test() {
  void operator+(X, X);
  X x; Y y;

  x + x;  // OK
  x + y;  // OK

  operator+(x, y);  // error
  operator+(x, x);  // OK
} 
```

为什么直接调用操作符函数时块作用域声明会出现阴影，而通过运算符表达式调用时则没有？

以下是来自 GCC 的错误：

```
operators-main-ss.cpp: In function ‘void test()’:
operators-main-ss.cpp:13:17: error: could not convert ‘y’ from ‘Y’ to ‘X’
   operator+(x, y);  // error
                 ^ 
```

这里来自 Clang：

```
operators-main-ss.cpp:13:16: error: no viable conversion from 'Y' to 'X'
  operator+(x, y);  // error
               ^
operators-main-ss.cpp:1:8: note: candidate constructor (the implicit copy constructor) not viable: no
      known conversion from 'Y' to 'const X &' for 1st argument;
struct X {};  struct Y {};
       ^
operators-main-ss.cpp:7:22: note: passing argument to parameter here
  void operator+(X, X);
                     ^ 
```

编译器是否正确让块声明在一种情况下隐藏全局名称而不是另一种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T01:53:31.823

你原来的问题：

你的结论是正确的。

`operator+(a, a);`是一个简单的函数调用，因此编译器以标准顺序搜索潜在的匹配项，找到成员函数并且不再查找。成员函数不匹配且表达式格式错误。

`a + a;`使用 13.3.1.2 p3 中定义的一组略有不同的规则。首先，一组可能的重载由`A::operator+(a)`. 然后从标准的非限定查找生成可能的重载列表，但忽略成员函数。然后创建一个内置运算符列表。然后使用这 3 个列表来决定最佳匹配。通常，不合格的查找会在第一步之后停止，如果它找到了一些东西，这就是为什么它在通常会失败的地方工作的原因。

问题第 2 部分：

理论上这应该是一样的。没有涉及的成员函数和内置运算符是无关紧要的，因此它们都应该导致标准的非限定查找。我在标准中找不到任何建议它们应该以任何方式不同的东西。除了“它们存在”之外，我在标准中没有看到太多提及块作用域函数声明。毕竟，它们大多只是 C 的遗物。我也没有看到标准中的任何具体规则以一种或另一种方式说明这是否应该有效。该标准确实非常强烈地建议`x + y`并且`operator+(x, y)`应该两者都工作或都失败，因为它们都使用相同的方法进行名称查找。

我还没有找到嵌套函数声明的有效用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T03:01:20.200

> 编译器是否正确让块声明在一种情况下隐藏全局名称而不是另一种情况？

我得出的结论是两个编译器都是错误的。我相信`x + y;`也应该失败。13.3.1.2p3 明确指出：

> 非成员候选集是在表达式上下文中根据非限定函数调用 (3.4.2) 中名称查找的通常规则在表达式上下文中非限定查找的结果，除了忽略所有成员函数。

`x + y;`因此，`operator+(x, y);`您的示例之间应该没有区别。[Commeau online](http://www.comeaucomputing.com/tryitout/)使用代码产生以下错误：

```
"ComeauTest.c", line 11: error: no operator "+" matches these operands
            operand types are: X + Y
    x + y;  // OK
      ^
"ComeauTest.c", line 13: error: no suitable user-defined conversion from "Y"
 to "X"
          exists
    operator+(x, y);  // error 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-05T14:13:32.933

关于你的问题第 2 部分

这是标准 c++11 关于 ADL $3.4.2 的引用：

> 令 X 为由非限定查找 (3.4.1) 生成的查找集，让 Y 为由参数相关查找生成的查找集（定义如下）。如果 X 包含
> 
> *   类成员的声明，或
> *   不是 using 声明的块范围函数声明，或
> *   既不是函数也不是函数模板的声明
> 
> 那么 Y 为空。
> 
> ...

看来，这回答了你的问题

# objective-c - 在 UIViewController 的视图属性访问器中懒惰地实例化 nib

> ID：13869151
> 
> 赞同：0
> 
> 时间：2012-12-13T21:54:47.590
> 
> 标签：objective-c, ios, uiviewcontroller, nib

在我目前正在处理的应用程序中，有一种情况是我有 2 个屏幕用于显示一组数据：一个是列表，一个是地图。每个屏幕都有自己的视图控制器。默认屏幕是列表视图，因此首先加载视图控制器。但是另一个地图屏幕视图控制器也被加载和设置（因为它封装了列表屏幕视图控制器使用的一些与地理地图相关的数据），即使地图屏幕尚不可见。

但是，我不希望在用户切换到该屏幕之前加载和初始化地图屏幕视图控制器的 nib 和视图。

`view`如下代码所示，在地图屏幕视图控制器中覆盖属性访问器并延迟加载/实例化笔尖有什么问题吗？（`view`在地图屏幕即将显示之前，不会访问该属性，就在地图屏幕视图控制器的`viewDidLoad`方法被调用之前。）我已经测试过它运行良好，但我从未见过它这样做过。

```
- (UIView *)view {
    if (!_view) {
        UINib *nib = [UINib nibWithNibName:@"MyNibName" bundle:nil];
        [nib instantiateWithOwner:self options:nil];
    }
    return _view;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:14:29.117

想出了一个更好的答案。

我正在使用的代码实际上并不是我自己的，而且我没有注意到地图屏幕的视图控制器实际上不是 的子类`UIViewController`，它只是子类化`NSObject`（并添加了自己的`view`属性）。

通过将地图屏幕的视图控制器更改为实际继承自`UIViewController`，然后使用 的指定初始化程序`initWithNibName:bundle:`，nib**默认**在访问属性时延迟加载/实例化`view`- 就像我正在做的那样。

所以，我的问题的答案是：**使用系统框架**，你甚至不会遇到这些问题！:) 但我的代码似乎与实际的最佳实践模式一致；[请在此处查看 Apple 的指南和建议](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html)。

# php - 如何使用 PHP 从 MySQL 查询中输出具有行跨度的表

> ID：13869153
> 
> 赞同：4
> 
> 时间：2012-12-13T21:54:55.377
> 
> 标签：php, html, mysql

我在格式化表格时遇到问题。我从查询中得到了一组与此类似的行：

```
5   23   d
5   23   d
5   23   t
5   24   d
5   24   t
4   23   d
4   23   t 
```

现在，我想将它们显示在一个表中，但将相似的数据分组，如下所示：

```
 d
5   23   d
         t
    24   d
         t
4   23   d
         t 
```

因此，`<td>`对于 5 将是`<td rowspan='5'>`或前 23 将是`<td rowspan='3'>`。我怎样才能做到这一点？

我想过制作一个多维数组，为每个行跨度存储一个数字，但是原始的行集更长，所以我在某个地方迷路了，我想有一个更简单的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:08:26.733

您可以按列值对查询结果进行分组。例如：

```
$grouped=array();
foreach($rows as $r)
  $grouped[ $r[0] ][ $r[1] ][]=$r[2]; 
```

# c# - 应该将同一个连接注入多个存储库还是在每个调用的方法中打开一个新连接？

> ID：13869155
> 
> 赞同：3
> 
> 时间：2012-12-13T21:55:02.780
> 
> 标签：c#, asp.net, ado.net

我有一个视图，需要从我系统中的多个存储库中填充信息。

```
var employee = employeeRepository.GetEmployeeById(20);
var notes = notesRepository.GetNotes(); 
```

我正在使用 ADO.NET 进行数据访问。每个存储库都应该将连接作为参数吗？

```
using(var connection = dbFactory.GetConnection())
{    
    var employeeRepository = new EmployeeRepository(connection);
    var notesRepository = new NotesRepository(connection);
} 
```

或者，每个 Get 方法是否应该在方法内打开和关闭连接？我已经定时执行，并且使用传递的单个连接更快。不是一吨。我更关心现在有正确的方法。

另外，保持打开和关闭连接对数据库有什么影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:59:14.937

ADO.NET 使用 a[`connection pooling`](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)来提高性能（对于 SQL 服务器来说确实如此，请查看您的数据库提供程序文档是否支持连接池）。因此，当您创建一个新的 SqlConnection 时，您实际上并没有打开与数据库的物理连接。您只是从连接池中绘制现有连接。当您在现有连接上调用 .Dispose 时，您实际上并没有关闭与数据库的物理连接。您只是将此连接返回到连接池，以便可以重用它。

因此，每当您想向数据库发送查询时，您都可以安全地编写以下代码：

```
using (var conn = new SqlConnection(ConnectionString))
using (var cmd = conn.CreateCOmmand())
{
    // no, you are not opening a real connection here, you are just drawing one from the pool
    conn.Open();
    cmd.CommandText = "SELECT ....";
    using (var reader = cmd.ExecuteReader())
    {
        while (reader.Read())
        {
            // ...
        }
    }
} // No, you are not closing the connection here, you are simply returning it to the pool 
```

所以基本上，如果您的 ADO.NET 提供程序支持连接池（通常所有受尊重的提供程序都应该支持），您就不需要存储对 SQL 连接的任何引用。只需调用构造函数并传递连接字符串。因此，连接字符串就是您所需要的。

备注：连接池是按 AppDomain 和每个连接字符串完成的。这意味着如果您有 2 个不同的连接字符串连接到同一个数据库，并且您将这 2 个连接字符串传递给不同的 SQL 连接实例，您将获得每个连接字符串的连接池（即 2 个池）。

# javascript - YouTube html5 播放列表在 IE9 中不起作用

> ID：13869158
> 
> 赞同：1
> 
> 时间：2012-12-13T21:55:08.830
> 
> 标签：javascript, html, youtube, embed, playlists

我正在为 youtube 视频创建自定义 html5 播放器。我基于 YouTube iframe API (https://developers.google.com/youtube/iframe_api_reference) 中的示例。只要我在网络服务器上查看它，所有用于暂停/播放/停止的 javascript 控件在 Chrome/FF/IE9 中都可以正常工作，但播放列表中的上一个视频/播放列表控件中的下一个视频仅适用于 Chrome 和 FF。在 IE 中，我收到“此视频当前不可用”（播放列表中的第一个视频仍然可以正常播放）。如果我尝试使用其 ID (loadVideoById) 切换到特定视频，也会发生这种情况。

我可以在视频顶部的信息栏中看到，在我单击“播放列表中的下一个视频”后，它会循环播放所有视频的名称 - 我假设它尝试播放每个视频并失败。

如果我尝试单独播放播放列表中的任何一个视频，它工作正常。

当我通过控制台/警报/无论如何返回播放列表中所有视频的数组时，预期的一切都在那里。下面的代码：

```
<!doctype html>
<html>
    <head>
        <title>custom youtube player</title>
    </head>
    <body>
        <div id="player"></div>
        <br/>
        <a onclick="player.playVideo();" href="#">play</a>
        <br/>
        <a onclick="player.pauseVideo();" href="#">pause</a>
        <br/>
        <a onclick="player.stopVideo();" href="#">stop</a>
        <br/>
        <a id="playPrev" onclick="player.previousVideo();" href="#">previous video in playlist</a>
        <br/>
        <a id="playNext" onclick="player.nextVideo();" href="#">next video in playlist</a>
        <script type="text/javascript">
            var tag = document.createElement('script');
            tag.src = "//www.youtube.com/iframe_api";
            var firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
            var player;
            function onYouTubeIframeAPIReady() {
                player = new YT.Player('player', {
                    height: '390',
                    width: '640',
                    playerVars: { 'showinfo': 1, 'controls': 1},
                    videoId: 'ZrG0WsDuriM',
                    events: {
                        'onReady': onPlayerReady
                    }
                });
            }
            function onPlayerReady(event) {
                event.target.playVideo();
                event.target.loadPlaylist({listType: 'playlist', list: 'PL8D3EFFBB747B9769', suggestedQuality: 'small'});
            }
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:55:36.953

对于发现这个问题的任何人来说，这个问题显然是 YouTube 方面的一个错误，并且似乎已经得到解决。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T22:59:04.247

您还应该使用 CDATA 包装您的 javascript 代码

```
<![CDATA[
// js goes here
]]> 
```

# visual-studio-2010 - 在 VS 中调试

> ID：13869160
> 
> 赞同：0
> 
> 时间：2012-12-13T21:55:18.753
> 
> 标签：visual-studio-2010, visual-studio-debugging

最近我在调试 ASP.NET 应用程序时注意到一些奇怪的行为。当我按 F10 时，有时它不会转到下一个代码行，而是保持不变，直到您按 2-3 次。有时它会转到上一行。它只发生在一个用于此应用程序的库中，我可以像往常一样调试所有其他代码。这是某种错误吗？可以修复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:36:15.830

这不是 Visual Studio 调试器中的错误，而可能是调用多线程代码导致的标准行为。

# mongodb - MongoDB/CouchDB 用于存储文件 + 复制？

> ID：13869162
> 
> 赞同：3
> 
> 时间：2012-12-13T21:55:31.033
> 
> 标签：mongodb, couchdb, database, nosql

如果我想存储大量文件 + 复制数据库，什么 NoSql 数据库最适合这种工作？

我正在测试 MongoDB 和 CouchDB，这些 DB 非常好用且易于使用。如果可能的话，我会使用其中之一来存储文件。现在我看到了 Mongo 和 Couch 之间的区别，但我无法解释哪个更适合存储文件。如果我说的是存储文件，我指的是 10-50MB 的文件，但也可能是 50-500MB 的文件——也许还有很多更新。

我在这里找到了一张不错的桌子：

![在此处输入图像描述](../Images/06db0a476a565749d6351d4b7117fb69.png)

[http://weblogs.asp.net/britchie/archive/2010/08/17/document-databases-compared-mongodb-couchdb-and-ravendb.aspx](http://weblogs.asp.net/britchie/archive/2010/08/17/document-databases-compared-mongodb-couchdb-and-ravendb.aspx)

仍然不确定哪些属性最适合文件存储和复制。但也许我应该选择另一个 NoSql DB？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T23:36:22.903

该表已过时：

*   主从复制已被弃用，有利于初学者的副本集，并且那里的一致性也是错误的。您将需要完全重新阅读 MongoDB 文档中的这一部分。
*   Map/Reduce 只是 JavaScript，没有其​​他的。
*   我不知道该表的附件是什么意思，但 GridFS 是内置在驱动程序中的存储标准，有助于更轻松地在 MongoDB 中存储大文件。此方法也支持元数据。
*   MongoDB 在 2.2 版上，所以它之前提到的任何版本现在都已过时（即分片和单服务器持久性）。

我对用于存储文件的 CouchDBs 界面没有个人经验，但是如果两者之间几乎没有任何区别，我不会感到惊讶。我认为这部分太主观了，我们无法回答，您只需要选择哪个更适合您。

实际上可以构建多区域的 MongoDB 集群（S3 存储桶没有也不能在没有工作的情况下复制），并通过 MongoDB 将世界特定地区访问最多的文件复制到这些集群。

我的意思是我有时发现的主要结果是 MongoDB 可以像 S3 和 Cloudfront 放在一起，这很棒，因为您拥有冗余存储和分发数据的能力。

但是，据说 S3 在这里是非常有效的选择，我会认真尝试一下，您可能不会在内容网络中寻找与我相同的东西。

文件的数据库存储并非没有严重的缺点，但是速度在这里不应该是一个大问题，因为您应该从没有 Cloudfront 前端的 S3 获得与从 MongoDB 获得的速度相同的速度（记住 S3 是一个冗余存储网络，而不是 CDN）。

如果您要使用 S3，您将在数据库中存储一行，该行指向该文件并包含有关它的元数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T23:07:40.960

Dustin Sallings（Couchbase 的创始人之一，spymemcached 的创建者和 memcached 的核心贡献者）和 Marty Schoch 有一个名为 CBFS 的项目，它使用 Couchbase 和 Go。

它是具有冗余和复制功能的***无限节点文件存储。***基本上你自己的 S3 支持许多不同的硬件和大小。它使用 REST HTTP PUT/GET/DELETE 等，非常好用。非常快，非常强大。

**Github 上的 CBFS**：[https ://github.com/couchbaselabs/cbfs](https://github.com/couchbaselabs/cbfs)

**协议**：[https ://github.com/couchbaselabs/cbfs/wiki/Protocol](https://github.com/couchbaselabs/cbfs/wiki/Protocol)

**博文**：http : [//dustin.github.com/2012/09/27/cbfs.html](http://dustin.github.com/2012/09/27/cbfs.html)

**多样化的硬件**： https: [//plus.google.com/105229686595945792364/posts/9joBgjEt5PB](https://plus.google.com/105229686595945792364/posts/9joBgjEt5PB)

**其他酷视觉效果**：

[http://www.youtube.com/watch?v=GiFMVfrNma8](http://www.youtube.com/watch?v=GiFMVfrNma8)

[http://www.youtube.com/watch?v=033iKVvrmcQ](http://www.youtube.com/watch?v=033iKVvrmcQ)

如果您有任何问题，请与我联系，我可以联系您。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T23:10:12.820

您是否考虑过将 Amazon S3 作为一种选择？它高度可用，经过验证并具有冗余存储等......

CouchDB，尽管我个人非常喜欢它，因为它与 node.js 配合得非常好，但如果你不想浪费太多磁盘空间，你需要定期压缩它。在您的情况下，如果您要对相同的文档进行大量更新，那可能是一个问题。

我无法对 MongoDB 发表评论，因为我没有使用过它，但同样，如果文件存储是您主要关心的问题，那么看看 S3 和类似的东西，因为它们完全专注于文件存储。

您可以将两者结合起来，将元数据存储在 NoSql 或 Sql 数据存储中，将实际文件存储在单独的文件存储中，但保持这两个存储同步和复制可能会很棘手。

# haskell - Wxhaskell - wxcore 由于构建阶段而失败（g++ 错误）

> ID：13869165
> 
> 赞同：1
> 
> 时间：2012-12-13T21:55:38.380
> 
> 标签：haskell, build, wxwidgets, cabal-install, wxhaskell

我正在尝试构建 wxhaskell，似乎有很多麻烦，我可以弄清楚在某些情况下该怎么做，但我现在卡住了。

我正在使用 wxwidgets-2.8 / wxhaskell-0.11.1.2，出现的错误是：

```
g++: error: unrecognized command line option ‘-Wl’
g++: error: unrecognized command line option ‘--soname=/home/ming/.cabal/lib/libwxc-gtk2.8.12-0.11.1.2.so’
make: *** [dist/wxc/libwxc-gtk2.8.12-0.11.1.2.so] Fehler 1
cabal: Error: some packages failed to install:
wxcore-0.11.1.2 failed during the building phase. The exception was:
ExitFailure 2 
```

有谁知道如何解决这个问题？提前致谢。

编辑：完整的 g++ 命令在这里：

[http://pastebin.com/TbrQhWEY](http://pastebin.com/TbrQhWEY)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:13:01.013

您的 g++ 调用具有`-Wl --soname=<something>`. 它应该是`-Wl,--soname=<something>`

看[这里](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)。

# python - 在 python 中为谷歌应用引擎网站创建系统属性集合的最佳方法是什么？

> ID：13869169
> 
> 赞同：0
> 
> 时间：2012-12-13T21:55:51.783
> 
> 标签：python, google-app-engine

我正在尝试创建一些自定义系统属性，可以在网站的管理部分进行更改。在探索一些选项时，我意识到我可能过于像在 C# 中那样尝试做一些事情，而不是接受 Python 编程模式。

我使用自定义键和单个属性（值）创建了一个实体（系统属性）。然后，我创建了一个 SystemProperties 类，其中包含一堆“静态属性”，这些“静态属性”代表存储在数据存储中的系统属性。当我引用或更新其中一个系统属性时，我想使用这个 SystemProperties 类，但是，我想我可能会以错误的方式处理这个问题。有人对如何使用 python 在 Google App Engine 上有效管理系统属性有很好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:35:36.173

我们使用[gae-init](http://gae-init.appspot.com/)来引导我们所有的项目。您可以清楚地了解我们如何处理配置部分下的系统属性以及许多其他出色的自动化构建部署缩小等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:22:07.337

这取决于属性的类型。我使用模块 appengine_config,py（钩子）和 app.yaml（环境变量：os.environ）来存储属性而不使用数据存储。但是这个设置需要你的应用程序的新部署来更新属性，或者你必须构建一个模块重新加载功能。

另请参阅 Python 模块配置：[https ://developers.google.com/appengine/docs/python/tools/appengineconfig](https://developers.google.com/appengine/docs/python/tools/appengineconfig)

# php - 如何使用 if define('DB_HOST','localhost')

> ID：13869170
> 
> 赞同：1
> 
> 时间：2012-12-13T21:56:00.430
> 
> 标签：php, mysql, mysqli

过去我使用过 smt，例如：

```
$con = mysql_connect("localhost", "root", "root") or
die("Could not connect: " . mysql_error());

mysql_select_db("xxx"); 
```

但是现在，我注意到每个人都开始像这样使用 smt：

```
if (!defined('DB_HOST')) define('DB_HOST','localhost');
if (!defined('DB_USER')) define('DB_USER','root');
if (!defined('DB_PASS')) define('DB_PASS','root');
if (!defined('DB_NAME')) define('DB_NAME','xxx'); 
```

它们的用法有什么不同？例如回显、过滤..

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T22:07:04.217

好吧，他们都没有错，这是你的选择。我认为第二种选择更像是一种好的做法。但我的声明只有在您在一个文件和`require_once`其他文件中定义时才有效。例子：

`db_config.php`：

```
if (!defined('DB_HOST')) define('DB_HOST','localhost');
if (!defined('DB_USER')) define('DB_USER','root');
if (!defined('DB_PASS')) define('DB_PASS','root');
if (!defined('DB_NAME')) define('DB_NAME','xxx'); 
```

`query.php`：

```
require_once db_config.php;
$con = mysql_connect(DB_HOST, DB_USER, DB_NAME) or
die("Could not connect: " . mysql_error());
mysql_select_db("xxx"); 
```

但为什么？想象一下，您想更改您的数据库名称、用户或密码。如果您`mysql_connect("localhost", "root", "root")`每次需要时都有代码，那么计划的更改将使您经历大量的重新编码。但是，如果您像第二种选择那样在一个地方定义它们，您就不必重写很多文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:59:00.967

如果您在多个地方有连接（设计不佳）使用常量，您将有一个地方可以编辑连接配置，而无需遍历所有代码并找到打开连接的所有位置。

所以你的连接代码看起来像：

```
$con = mysql_connect(DB_HOST, DB_USER, DB_PASS) or
die("Could not connect: " . mysql_error());

mysql_select_db(DB_NAME); 
```

# touchscreen - 触摸屏：当手指滑入元素时注册触摸事件

> ID：13869172
> 
> 赞同：1
> 
> 时间：2012-12-13T21:56:12.547
> 
> 标签：touchscreen, touch-event

我想在用户触摸某个“按钮”元素时注册。例如，可以通过轻敲它或将手指放在其上或将手指放在元素外然后滑入其中。这个元素需要比实际的表单按钮更敏感。

我用 touchstart 注册了前两个：

```
$("id=button]").live('touchstart', function() {...}) 
```

但似乎没有任何迹象表明滑入元素的运动。我试过touchmove和touchenter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T07:08:30.637

我最终没有监听特定元素上的事件，而是监听整个身体上的触摸事件，然后检查触摸坐标是否在元素的坐标内。

# python - Numpy：查找范围内元素的索引

> ID：13869173
> 
> 赞同：112
> 
> 时间：2012-12-13T21:56:38.710
> 
> 标签：python, numpy

我有一个 numpy 数字数组，例如，

```
a = np.array([1, 3, 5, 6, 9, 10, 14, 15, 56]) 
```

我想找到特定范围内元素的所有索引。例如，如果范围是 (6, 10)，则答案应该是 (3, 4, 5)。是否有内置功能可以做到这一点？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-12-13T22:01:04.937

您可以使用`np.where`来获取索引并`np.logical_and`设置两个条件：

```
import numpy as np
a = np.array([1, 3, 5, 6, 9, 10, 14, 15, 56])

np.where(np.logical_and(a>=6, a<=10))
# returns (array([3, 4, 5]),) 
```

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2012-12-14T02:55:05.097

正如@deinonychusaur 的回复，但更紧凑：

```
In [7]: np.where((a >= 6) & (a <=10))
Out[7]: (array([3, 4, 5]),) 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-12-13T23:59:29.840

我想我会添加这个，因为`a`在你给出的例子中是排序的：

```
import numpy as np
a = [1, 3, 5, 6, 9, 10, 14, 15, 56] 
start = np.searchsorted(a, 6, 'left')
end = np.searchsorted(a, 10, 'right')
rng = np.arange(start, end)
rng
# array([3, 4, 5]) 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2020-03-30T11:41:11.917

# 答案摘要

为了了解什么是最佳答案，我们可以使用不同的解决方案进行一些计时。不幸的是，这个问题没有很好地提出，所以有不同问题的答案，在这里我试图指出同一个问题的答案。给定数组：

```
a = np.array([1, 3, 5, 6, 9, 10, 14, 15, 56]) 
```

答案应该是某个范围内的元素的**索引，我们假设包括在内，在本例中为 6 和 10。**

```
answer = (3, 4, 5) 
```

对应值 6、9、10。

要测试最佳答案，我们可以使用此代码。

```
import timeit
setup = """
import numpy as np
import numexpr as ne

a = np.array([1, 3, 5, 6, 9, 10, 14, 15, 56])
# or test it with an array of the similar size
# a = np.random.rand(100)*23 # change the number to the an estimate of your array size.

# we define the left and right limit
ll = 6
rl = 10

def sorted_slice(a,l,r):
    start = np.searchsorted(a, l, 'left')
    end = np.searchsorted(a, r, 'right')
    return np.arange(start,end)
"""

functions = ['sorted_slice(a,ll,rl)', # works only for sorted values
'np.where(np.logical_and(a>=ll, a<=rl))[0]',
'np.where((a >= ll) & (a <=rl))[0]',
'np.where((a>=ll)*(a<=rl))[0]',
'np.where(np.vectorize(lambda x: ll <= x <= rl)(a))[0]',
'np.argwhere((a>=ll) & (a<=rl)).T[0]', # we traspose for getting a single row
'np.where(ne.evaluate("(ll <= a) & (a <= rl)"))[0]',]

functions2 = [
   'a[np.logical_and(a>=ll, a<=rl)]',
   'a[(a>=ll) & (a<=rl)]',
   'a[(a>=ll)*(a<=rl)]',
   'a[np.vectorize(lambda x: ll <= x <= rl)(a)]',
   'a[ne.evaluate("(ll <= a) & (a <= rl)")]',
]

rdict = {}
for i in functions:
    rdict[i] = timeit.timeit(i,setup=setup,number=1000)
    print("%s -> %s s" %(i,rdict[i]))

print("Sorted:")
for w in sorted(rdict, key=rdict.get):
    print(w, rdict[w]) 
```

## 结果

正如@EZLearner 所指出的，在下图中报告了一个小数组（在顶部是最快的解决方案）的结果，它们可能会因数组的大小而异。`sorted slice`对于较大的数组可能会更快，但它需要对数组进行排序，对于具有超过 10 M 条目的数组`ne.evaluate`可能是一种选择。因此，使用与您的大小相同的数组执行此测试总是更好： [![在此处输入图像描述](../Images/8a2bc920eb21d4da911796ed7f4c745f.png)](https://i.stack.imgur.com/kDrV6.png)

如果您想要提取值而不是索引，则可以使用 functions2 执行测试，但结果几乎相同。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2017-03-31T13:09:25.747

```
a = np.array([1,2,3,4,5,6,7,8,9])
b = a[(a>2) & (a<8)] 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-06-12T11:17:15.037

此代码段返回两个值之间的 numpy 数组中的所有数字：

```
a = np.array([1, 3, 5, 6, 9, 10, 14, 15, 56] )
a[(a>6)*(a<10)] 
```

它的工作原理如下：(a>6) 返回一个带有 True (1) 和 False (0) 的 numpy 数组，(a<10) 也是如此。通过将这两者相乘，您将得到一个数组，如果两个语句都为 True（因为 1x1 = 1）或 False（因为 0x0 = 0 和 1x0 = 0），则该数组为 True。

a[...] 部分返回数组 a 的所有值，其中括号之间的数组返回 True 语句。

当然，您可以通过说例如

```
...*(1-a<10) 
```

这类似于“and Not”语句。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-02-27T16:39:25.910

另一种方法是：

```
np.vectorize(lambda x: 6 <= x <= 10)(a) 
```

返回：

```
array([False, False, False,  True,  True,  True, False, False, False]) 
```

它有时对屏蔽时间序列、向量等很有用。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-05-30T20:22:26.943

```
a = np.array([1, 3, 5, 6, 9, 10, 14, 15, 56])
np.argwhere((a>=6) & (a<=10)) 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-03-18T15:19:07.710

想要将[numexpr](https://github.com/pydata/numexpr)添加到组合中：

```
import numpy as np
import numexpr as ne

a = np.array([1, 3, 5, 6, 9, 10, 14, 15, 56])  

np.where(ne.evaluate("(6 <= a) & (a <= 10)"))[0]
# array([3, 4, 5], dtype=int64) 
```

只有数百万的大型数组才有意义......或者如果你达到内存限制。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-03-07T11:05:10.817

这可能不是最漂亮的，但适用于任何维度

```
a = np.array([[-1,2], [1,5], [6,7], [5,2], [3,4], [0, 0], [-1,-1]])
ranges = (0,4), (0,4) 

def conditionRange(X : np.ndarray, ranges : list) -> np.ndarray:
    idx = set()
    for column, r in enumerate(ranges):
        tmp = np.where(np.logical_and(X[:, column] >= r[0], X[:, column] <= r[1]))[0]
        if idx:
            idx = idx & set(tmp)
        else:
            idx = set(tmp)
    idx = np.array(list(idx))
    return X[idx, :]

b = conditionRange(a, ranges)
print(b) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-08T06:27:13.147

```
s=[52, 33, 70, 39, 57, 59, 7, 2, 46, 69, 11, 74, 58, 60, 63, 43, 75, 92, 65, 19, 1, 79, 22, 38, 26, 3, 66, 88, 9, 15, 28, 44, 67, 87, 21, 49, 85, 32, 89, 77, 47, 93, 35, 12, 73, 76, 50, 45, 5, 29, 97, 94, 95, 56, 48, 71, 54, 55, 51, 23, 84, 80, 62, 30, 13, 34]

dic={}

for i in range(0,len(s),10):
    dic[i,i+10]=list(filter(lambda x:((x>=i)&(x<i+10)),s))
print(dic)

for keys,values in dic.items():
    print(keys)
    print(values) 
```

输出：

```
(0, 10)
[7, 2, 1, 3, 9, 5]
(20, 30)
[22, 26, 28, 21, 29, 23]
(30, 40)
[33, 39, 38, 32, 35, 30, 34]
(10, 20)
[11, 19, 15, 12, 13]
(40, 50)
[46, 43, 44, 49, 47, 45, 48]
(60, 70)
[69, 60, 63, 65, 66, 67, 62]
(50, 60)
[52, 57, 59, 58, 50, 56, 54, 55, 51] 
```

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2017-04-10T02:06:05.483

您可以使用`np.clip()`来实现相同的目的：

```
a = [1, 3, 5, 6, 9, 10, 14, 15, 56]  
np.clip(a,6,10) 
```

但是，它分别保存小于和大于 6 和 10 的值。

# html - 带有ajax的HTML5历史popstate，直接链接不起作用

> ID：13869174
> 
> 赞同：0
> 
> 时间：2012-12-13T21:56:44.857
> 
> 标签：html, jquery, html5-history

这个Demo我要点击前进到`content`（index.php?id=id）点击回到`subject`（index.php）。

Q1。(index.php?id=id) 直接链接`content`页面不可用，它会显示 (index.php) `subject`，为什么？

Q2。第二次点击后退（前进>后退>前进>后退）然后url将停止更改，为什么？(Safari 5) 更新：使用`window.onpopstate`url 工作正常。不会得到这个错误。

任何建议将不胜感激。

```
$(window).bind('popstate', function(){
    $.ajax({
        url:location.pathname,
        success: function(data){
            $('.container').html(data);
        }
    });
}); 
```

演示

```
$('.subject').click(function(){
    $.ajax({
        url: 'index.php?id=' + $(this).attr('rel'),
            success: function(data){
                $('.container').html(data);
            }
    });
    var pageurl;
    pageurl = 'index.php?id=' + $(this).attr('rel');
    if(pageurl != window.location){
        window.history.pushState({path: pageurl}, "", pageurl);
    }
    return false;
}); 
```

索引.php

```
<div class="container">
    <?php
        if($_GET['id']){
           ...
            print"<div class="content"></div>";
        }
        else{
           ...
           print"<div class="subject" rel="id"></div>"
        }
    ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:39:06.067

您只需要使用 ajax 获取页面内容（即您的场景的主题）并将其显示在您的页面容器中。考虑一下您是否在“index.php”中并点击了一个主题……所以您的 url 更改为“index.php?id=7”。现在您正在单击返回.. 在“popstate”事件中，“location.pathname”给出了“http://host/index.php”。就是这样，使用ajax从'location.pathname'中获取数据并显示它。

```
$(window).bind('popstate', function(){
    $.ajax({
        url:location.pathname,
        success: function(data){
            $('.content').html(data);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:21:57.363

popstate 事件处理程序将接收一个*事件*对象，其中包含您传递给 pushState的*状态。*可以通过`event.state`Here's the [event interface definition](http://www.w3.org/html/wg/drafts/html/master/single-page.html#popstateevent)访问它。这是一些演示代码来说明这个概念。

```
window.addEventListener("popstate", function(event) {
if( event.state !== null )    
    alert('Browser back button was clicked, state returned ' + JSON.stringify( event.state ) ); 
}; 
```

# c++ - 遍历 boost mapped_region/memory-mapped 文件？

> ID：13869176
> 
> 赞同：0
> 
> 时间：2012-12-13T21:57:01.800
> 
> 标签：c++, boost

我有以下代码将文件加载到 boost mapped_region 中：

```
file_mapping fm(FilePath, read_only);
mapped_region region(fm, read_only);
char * const data = static_cast<char *>(region.get_address()); 
```

*   我将如何逐个字符地遍历获得的数据？
*   有什么办法可以修改上面的代码，所以我不使用`char*`指针，而是使用静态字符数组`char c[x]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:53:10.080

```
file_mapping fm(FilePath, read_only);
mapped_region region(fm, read_only);
char * const data = reinterpret_cast<char*>(region.get_address());

// Iterate through the data obtained, character (c) by character.
for(std::size_t n = 0; n < region.get_size(); ++n)
{
      char c = data[n];
} 
```

# jquery - 使用 jquery 或 javascript删除后图像

> ID：13869179
> 
> 赞同：5
> 
> 时间：2012-12-13T21:57:11.910
> 
> 标签：jquery

我有...

```
<td align="right" vAlign="top">
<img src="test/test.gif" width="1" height="4" border="0"><br />
Number<font color="#CC0000">*</font>:
</td><td></td><td> 
```

我如何摆脱`<br />`与 jquery 的挂起？我在这里尝试了很多例子，但没有任何效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T21:58:40.337

你试过这个吗？

```
$("img").next("br").remove(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T21:59:09.807

假设你想删除所有`<br>`跟随`<img>`你可以使用这个：

```
$('img + br').remove() 
```

如果您希望它仅适用于 a 中的那些`<td>`：

```
$('td > img + br').remove() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T21:59:01.253

我建议：

```
$('img + br').remove(); 
```

[在 Chromium 22/Ubuntu 12.10 中，这似乎是使用JS Perf comparison](http://jsperf.com/test-of-next-method-versus-adjacent-sibling)`next()`方法的两倍。

参考：

*   [CSS 相邻兄弟组合器](http://www.w3.org/TR/selectors/#adjacent-sibling-combinators)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-13T19:16:43.483

真的没有理由在这里使用 JavaScript，因为它可以很容易地用 CSS 完成：

```
img + br {display:none;} 
```

;-)

# svg - 在 d3.js 中的 svg 地图上标记位置

> ID：13869181
> 
> 赞同：0
> 
> 时间：2012-12-13T21:57:21.613
> 
> 标签：svg, maps, d3.js, geojson

我正在使用 d3.js wiki 中的这个示例。

[http://bl.ocks.org/2206590](http://bl.ocks.org/2206590)

从那里，我有一张地图，我想知道如何在上面标记一个位置。

如何在此地图上的坐标位置绘制一个小圆圈 `[40.717079,-74.009628]`。

以下是示例的源代码：

```
var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

svg.append("rect")
    .attr("class", "background")
    .attr("width", width)
    .attr("height", height)
    .on("click", click);

var g = svg.append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")
  .append("g")
    .attr("id", "states");

var projection = d3.geo.albersUsa()
    .scale(width)
    .translate([0, 0]);

var path = d3.geo.path()
    .projection(projection);

d3.json("readme.json", function(json) {
  g.selectAll("path")
      .data(json.features)
    .enter().append("path")
      .attr("d", path);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:54:42.320

好的，这可能不是正确的答案，但这就是我所做的：

```
var width = 1060,
    height = 600,
    centered;

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

svg.append("rect")
    .attr("class", "background")
    .attr("width", width)
    .attr("height", height)
    .on("click", click);

var g = svg.append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")
  .append("g")
    .attr("id", "states");

var projection = d3.geo.albersUsa()
    .scale(width)
    .translate([0, 100]);

var path = d3.geo.path()
    .projection(projection);

    setInterval(function(){
        draw();
    },1000);

function draw(){

  d3.json("readme.json", function(json) {
    g.selectAll("path")
    .data(json.features)
    .enter()
    .append("path")
    .attr("d", path)
    .on("click", click);

    var latitude = 35 + Math.floor(Math.random()*8);
    var longitude =  -1 * (83 + Math.floor(Math.random()*35));
    var coordinates = projection([longitude, latitude]);
    g.append('svg:circle')
    .attr('cx', coordinates[0])
    .attr('cy', coordinates[1])
    .attr('r', 2)
    .attr('stroke','red')
    .attr('fill','red');      
  });
} 
```

该代码有效，但我怀疑我在每次渲染新坐标时都重新绘制整个地图做错了事。

# powershell - 如何从 powershell 获取默认网关？

> ID：13869182
> 
> 赞同：7
> 
> 时间：2012-12-13T21:57:20.770
> 
> 标签：powershell

如果一台计算机有多个网关，如何使用 PowerShell 确定哪个是默认网关？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-13T22:26:46.187

如果您使用的是 PowerShell v3，则可以使用`Get-NetIPConfiguration`例如：

```
Get-NetIPConfiguration | Foreach IPv4DefaultGateway 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-03-03T18:43:40.890

我认为这将更加跨平台：

```
 Get-NetRoute |
    where {$_.DestinationPrefix -eq '0.0.0.0/0'} |
    select { $_.NextHop } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-13T23:52:00.597

您需要知道使用了多个网关中的哪一个？如果是这样。据我记得，当多个网关可用时，使用具有最低指标（“成本”基于链路速度）的网关。为此，请运行以下命令：

```
Get-WmiObject -Class Win32_IP4RouteTable |
  where { $_.destination -eq '0.0.0.0' -and $_.mask -eq '0.0.0.0'} |
  Sort-Object metric1 | select nexthop, metric1, interfaceindex 
```

如果有多个默认网关具有相同的成本，我认为它是使用网​​络适配器的绑定顺序决定的。我知道的唯一方法是使用 GUI 和注册表。要包含绑定顺序，您可以保存脚本的输出，从 Win32_networkadapterconfiguration 获取 settingsid（使用 interfaceindex 识别），并读取注册表项 HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\Tcpip\Linkage\Bind。该键列出了它看起来的绑定顺序，而您从 win32_networkadapterconfiguration 获得的 settingsid 是它们用来识别设备的 GUID。然后使用它们在 Bind reg.key 中的顺序对具有相同度量的网关进行排序，您就会得到答案。

解释于：[Technet Social - NIC 适配器绑定](http://social.technet.microsoft.com/Forums/sr-Latn-CS/ITCG/thread/764fee15-9e22-4a46-b284-9f63f774a5e4)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-14T19:57:31.427

我发现它如下列出了所有活动网关，如果我错了，请纠正我

```
(Get-wmiObject Win32_networkAdapterConfiguration | ?{$_.IPEnabled}).DefaultIPGateway 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-13T22:13:36.767

使用 WMI 查询来提取您要查找的数据。下面是一个相当简单的示例，用于为第一行变量中指定的设备提取默认网关。这将查询设备的网络适配器并将找到的信息（对于每个适配器）显示到控制台窗口 - 拉取适配器索引、适配器描述和默认网关

扩展它以处理多个设备或基于通过输入文件提供的列表进行处理应该不需要太多。

```
$computer = $env:计算机名

Get-WmiObject win32_networkAdapterConfiguration -ComputerName $computer |
选择索引、描述、默认ipgateway |
格式表-AutoSize

```

# facebook-graph-api - 如何查看包含用户填写的“消息”参数的总 Stream.Publish / Feed Dialog 帖子？

> ID：13869190
> 
> 赞同：1
> 
> 时间：2012-12-13T21:57:57.650
> 
> 标签：facebook-graph-api, facebook-fql, analytics, facebook-insights

我可以为我的应用使用 Insights FQL 表或 Open Graph 端点来检查：

*   带有附加用户消息的 Feed Stories、Open Graph 的发布数量
*   “”的展示次数
*   来自“”的推荐数

这将有助于了解有多少用户选择利用此功能以及它对点击率的影响，但我不确定它是否可用。

# c++ - 编译时类型转换检查（constexpr 和用户定义的文字）

> ID：13869193
> 
> 赞同：7
> 
> 时间：2012-12-13T21:58:12.033
> 
> 标签：c++, c++11, constexpr

**更新：我在下面发布了我自己的答案，** 这里有一个更长的版本：http: [//scrupulousabstractions.tumblr.com/post/38460349771/c-11-type-safe-use-of-integer-user-defined-文字](http://scrupulousabstractions.tumblr.com/post/38460349771/c-11-type-safe-use-of-integer-user-defined-literals)

**问题：**

我制作了一个简单的`constexpr`用户定义文字`_X`，将值作为 unsigned long long 获取（这就是数字用户定义文字的工作方式：[http](http://en.cppreference.com/w/cpp/language/user_literal) ://en.cppreference.com/w/cpp/language/user_literal ），然后我制作确保该值适合带符号的 long long。

这一切都很好（太大的值会导致编译错误），但只有当我明确创建一个变量时

```
constexpr auto a= 150_X; 
```

相反，如果我写一些典型的东西，比如

```
cout << 150_X << endl;; 
```

测试不在编译时执行。

*   如果将 constexpr 函数分配给 constexpr 变量，它们是否仅在编译时执行？（我在标准中找不到）

*   是否有可能实现`_X`我正在寻找的安全行为？

完整示例：

```
#include<iostream>
#include<stdexcept>

inline constexpr long long testConv(unsigned long long v) {
  return (v > 100 ) ? throw std::exception() : v; 
} // will eventually use actual limit from numeric_limits

inline constexpr long long operator "" _X(unsigned long long f) { 
  return testConv(f) ;
}

int main(){
  constexpr auto a= 5_X;
  std::cout << a << std::endl;
  std::cout << 200_X << std::endl;  // This bad literal is accepted at compile time
  constexpr auto c=250_X;           // This bad literal is not accepted at compile time
  std::cout << c << std::endl;
} 
```

哦，供参考：我用的是gcc4.7.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:33:25.400

***自我回答：*** 我找到了一个完整的解决方案，灵感来自我的问题的评论和其他答案，以及其他问题，例如[https://stackoverflow.com/a/13384317/1149664](https://stackoverflow.com/a/13384317/1149664)。

解决方案是使用用户定义文字的模板形式并手动将数字相加，将基于已解析数字的和乘以 10。

我在这里写了这个自我回答的详细版本：http: [//scrupulousabstractions.tumblr.com/post/38460349771/c-11-type-safe-use-of-integer-user-defined-literals](http://scrupulousabstractions.tumblr.com/post/38460349771/c-11-type-safe-use-of-integer-user-defined-literals)

```
template<char... Chars>
int operator"" _steps(){
  return {litparser<0,Chars...>::value};
} 
```

Litparser 是一个小模板元程序，它将字符列表作为参数，从 Chars 参数包保存的输入字符扩展而来。

```
typedef unsigned long long ULL;

// Delcare the litparser 
template<ULL Sum, char... Chars> struct litparser;

// Specialize on the case where there's at least one character left:
template<ULL Sum, char Head, char... Rest>
struct litparser<Sum, Head, Rest...> {
// parse a digit. recurse with new sum and ramaining digits
  static const ULL value = litparser<
    (Head <'0' || Head >'9') ? throw std::exception() : 
    Sum*10 + Head-'0' , Rest...>::value;
};

// When 'Rest' finally is empty, we reach this terminating case
template<ULL Sum>  struct litparser<Sum> {
  static const ULL value = Sum;
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T22:06:11.987

`constexpr`函数*可以*在编译时执行；也就是说，它们有*资格*在常量表达式中使用。如果它们没有在常量表达式中使用，那么在编译时执行它们是没有意义的，尽管我认为这是允许的。

由于您不允许将参数声明为`constexpr`（第 7.1.5/1 节）[1]，我认为没有任何方法可以`operator "" _X(unsigned long long)`在编译时强制评估，但您可以使用`template<char...> operator "" _X()`

如果`constexpr`在常量表达式中调用函数，则参数将是常量表达式（如果不是，则调用不是常量表达式）。但是，您不能通过将*参数*声明为来*强制*调用为常量表达式，因为您不允许将参数声明为，请参阅标准参考。*`constexpr``constexpr`*

 ** * *

[注 1]：感谢 @LightnessRacesInOrbit 搜索标准以证明第二段中的主张是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T22:56:00.157

constexpr 函数不需要在编译时执行。但是你的目标是可以实现的。为了更好地理解这个问题，以及一个如何创建一个总是在编译时评估的迭代的例子，我推荐[这篇文章](http://akrzemi1.wordpress.com/2012/10/23/user-defined-literals-part-ii/)。*

# .net - 如果我正在引导我的安装，我是否必须显示 .NET EULA

> ID：13869197
> 
> 赞同：5
> 
> 时间：2012-12-13T21:58:25.733
> 
> 标签：.net, wix, licensing, installation, .net-client-profile

我正在使用带有 BootstraperApplication 的 Wix 3.6，如果在用户计算机上未检测到它将安装 .NET 4.0 客户端配置文件。我想静默安装 .NET，并且只在我的托管 UI 中显示进度。

我的安装程序上有一个复选框，用户必须同意我的应用程序 EULA，但还没有找到下拉 .NET EULA 或将其包含在我的安装程序中的方法。我注意到 ClickOnce 项目找到了一种引导 .NET 4.0 安装的方法，但这破坏了我想要的 UI 流程。

是否必须先让用户同意 .NET 许可证，然后才能使用我的应用程序引导安装它？如果我这样做了，如果我检测到我需要安装它，有没有办法可以动态获取 .NET 许可证？我会从哪里把它拉下来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T04:44:57.417

不，您不需要显示 .NET EULA。您只需要拥有 .NET SDK（随 Visual Studio 获得）的有效许可证。如果您需要显示 EULA，dotnetfx.exe 将没有静默安装选项。

.NET 可再发行组件的 EULA 在这里：http: [//msdn.microsoft.com/en-us/library/ms994405.aspx](http://msdn.microsoft.com/en-us/library/ms994405.aspx)并没有提到必须显示 .NET EULA。

# c++ - 模板参数推导未按预期工作

> ID：13869198
> 
> 赞同：1
> 
> 时间：2012-12-13T21:58:30.710
> 
> 标签：c++, template-meta-programming

为什么以下打印“Generic”而不是“const A &”？我推测 a`dynamic_cast<>`会成功调用第一个`f`，但事实并非如此。为什么是这样？

```
struct A {}; struct B : A {};

template <const A &>  void f()  { std::cout << "const A &"; }
template <typename T> void f(T) { std::cout << "Generic";   }

int main() {

   B b;

   f(dynamic_cast<const A &>(b)); // "Generic"

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T22:01:44.407

第一个`f()`不接受参数，只留下`f(T)`作为匹配项。

# version-control - TFS 2010 突然认为所有变更集都需要再次合并

> ID：13869201
> 
> 赞同：1
> 
> 时间：2012-12-13T21:58:54.930
> 
> 标签：version-control, tfs, branching-and-merging

我们有标准的基本 TFS 2010 分支设置 - Dev <-> Main <-> Release。

在过去的几个月里，我们已经多次在链上上下合并，没有任何问题。

几周前，我们合并了 Main -> Release 并部署了一个新版本的软件。据我们所知，合并没有问题，Release 中的新版本似乎很好。

今天我们正准备合并另一组从 Main 到 Release 的更改，当我们打开窗口查看可合并的更改集时 - 令人惊讶的是，TFS 从应用程序开始列出了所有更改！

我们是否可以做一些常见/愚蠢的事情，以便 TFS 认为 Release 分支不再是最新的，或者需要将所有变更集从 Main 重新合并到 Release？

该问题并非特定于任何开发人员的机器。

同样奇怪的是我可以在 Release 分支上查看历史记录，而且我看到所有的变更集都很好——所以我知道 Release 很好。

从 Main 到 Release 的变化中唯一不同寻常的是解决方案和项目文件的变化，我们升级到 Visual Studio 2012 并将目标框架更改为 4.5。然而，当我们通过这些更改从 Dev 转到 Main 时，并没有引起任何类似的问题。它只是更新了修改后的 sln、proj 等文件。

有没有人遇到过这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:40:53.877

看来这是由先前已删除的“复活”文件（以及使用相同名称创建的另一个文件）引起的。

[参考](https://stackoverflow.com/questions/9118265/team-foundation-server-previously-merged-changesets-reappear-in-merge-wizard)

# html - 忽略父 CSS 以更改子背景

> ID：13869202
> 
> 赞同：-1
> 
> 时间：2012-12-13T21:58:58.667
> 
> 标签：html, css

我已经创建了两个表父表及其子表，我想为两者使用不同的 CSS，但问题是子表也在加载父表的 css，我希望我的子表应该有白色背景，我尝试`inline styling`了子表`#ID`，，`.Class`子表的明智样式，但我无法将背景设置为白色，因为我可以使用我的 css 更改其字体大小，请告诉我有没有办法让子表使用它自己的派生 css？

在下图中 ABC 是父表，在弹出框内有一个标题`Top events`是子表：

![图片帮助](../Images/3ccc573aea35b96df3848b4f35a94ed4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T22:22:39.120

试试这个：

CSS

```
.parent-table {
  /* styling for the parent table */
}
.parent-table .child-table {
  /* styling for the child table */
} 
```

HTML

```
<table class="parent-table">
  <tr><td><table class="child-table">...</table>...</td></tr>
  ...
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:10:03.430

您是否尝试过使用`!important`子类的属性？这将覆盖为该属性分配的任何先前样式，并允许您找出样式是否存在问题或类的顺序。

注意：作为最佳实践，请避免`!important`在任何地方添加，仅在绝对必要时使用。在这种情况下，您可以在 css 声明中将子类放在父类之后。使用`!important`可以帮助您确定您的课程在风格上是否正确但顺序错误。然后，尝试在父母之后订购您孩子的 CSS 课程，这样就不再需要重要的东西了。 [在这里阅读更多...](http://www.electrictoolbox.com/using-important-css/)

我认为@Jacqui 下面的回答也应该解决这个问题。

# load - tsung 集群问题：无法启动 tsugn 集群

> ID：13869209
> 
> 赞同：1
> 
> 时间：2012-12-13T21:59:23.983
> 
> 标签：load, erlang, load-testing, tsung

我问这个问题是因为我尝试了这里已经发布的其他解决方案。我有一个 Tsung 集群，我正在尝试使用 EC2 实例进行设置。

EC2 盒子的安全组已经打开了 0-65335 端口。

Master box：可以在 /etc/ssh/ssh_config cluster box 中以 root "StrictHostKeyChecking no" 的身份 ssh 进入客户端 box，tsungcluster1 在 /etc/hosts 文件中，其 ipaddress。

Tsung xml 文件设置为：

`<client host="tester0" weight="8" maxusers="10000" cpu="4"/>`

运行 Tsung 会导致：

`Can't start newbeam on host 'XXXXX (reason: timeout) ! Aborting!`

同样，尝试：

`slave:start(tester0,root,"-setcookie mycookie").`

结果是`{error,timeout}`

就像我说的那样，我已经尝试过之前发布的解决方案，但没有一个奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:00:27.617

问题在于控制器和从机之间的 ssh 通信，您可以查看[http://tsung.erlang-projects.org/user_manual.html#htoc82](http://tsung.erlang-projects.org/user_manual.html#htoc82)它解释了您遇到的问题。

# c# - 命名空间在构建时变得不可用

> ID：13869215
> 
> 赞同：0
> 
> 时间：2012-12-13T21:59:48.790
> 
> 标签：c#, visual-studio-2010

> **可能重复：**
> [Visual Studio 2010 突然看不到命名空间？](https://stackoverflow.com/questions/4880685/visual-studio-2010-suddenly-cant-see-namespace)

我正在从 project1 添加对 project2 的引用。他们在同一个解决方案中。此时我可以从 project1 中访问 project2 的命名空间。但是，一旦我构建了解决方案或 project1，project2 命名空间在 project1 中不再可用。我已经重新启动了 VS2010，但这并没有帮助。

关于导致此问题的原因以及如何解决的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:47:37.587

For this to work, I had to change the console app from '.NET Framework 4 Client Profile' to '.NET Framework 4'.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:01:24.183

在您添加对“project2”的引用之后，您确实添加了一个“使用 project2；” 陈述？

# ios - 在测试工具中运行 Titanium iOS 模块时缺少框架

> ID：13869216
> 
> 赞同：1
> 
> 时间：2012-12-13T21:59:55.880
> 
> 标签：ios, frameworks, module, titanium

我有构建 iOS 模块工作的[示例代码- 它绘制了一个红色正方形。](https://wiki.appcelerator.org/display/guides/iOS+Module+Development+Guide)我在 XCode 中为我的模块添加了一个框架，并且 build.py 仍然成功。但是，当我使用“titanium run”运行模块测试工具时，构建失败并且日志文件显示消息“ld: framework not found MyFramework”

模块如何成功构建但不能在模块测试工具中工作，我怎样才能让它在两个地方都工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:19:46.627

当模块测试工具运行时，框架是链接的，因此无论框架情况如何， build.py 都可以成功。

这里的问题是我需要指定 MyFramework 所在的本地文件夹，如下所示：

OTHER_LDFLAGS=$(inherited) -F"${HOME}/Documents/test/module/" -framework MyFramework

# jquery - 如果已经打字，请禁用打字机功能

> ID：13869222
> 
> 赞同：1
> 
> 时间：2012-12-13T22:00:29.710
> 
> 标签：jquery, jquery-effects

我有一个模拟打字机效果的 jQuery 函数，我在`.mouseup()`处理函数上调用它。

现在，如果用户非常快地释放`.mouseup()`2 次，则打字机效果加倍并键入如下内容：“ttyyppeewwrriitteerr eeffffeecctt”。

很高兴知道何时完成键入并在键入时禁用鼠标交互。

这是我的 jQuery 函数：( [http://jsfiddle.net/MARm2/1/](http://jsfiddle.net/MARm2/1/) )

```
//Typewriter Effect
$.fn.Typewriter = function(opts){
    var $this = this,
        defaults = { animDelay: 50 },
        settings = $.extend(defaults, opts);
    $.each(settings.text, function(i, letter){
        setTimeout(function(){
            $this.html($this.html() + (letter!='\n'?letter:'<br />'));
        }, settings.animDelay * i);
    });
} 
```

这是`.mouseup()`处理函数：

```
$('#game_howto').mouseup(function(e) {
    $('#game_howto_slide1').Typewriter({
        animDelay: 50,
        text: 'Typewriter effect'
    });
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:10:08.673

使用忙碌标志

```
var Typewriter = (function(){
    var busy=false;
    return function(opts){
        if(busy){
           ...       // nothing
        }
        else{
           busy = true;
           ...       // something
           busy = false
        }

    }
})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T22:21:39.283

您可以在键入时使用 data 属性标记元素，并在完成后取消标记。您修改后的代码：

```
$.fn.Typewriter = function(opts){
    var $this = this,
        defaults = { animDelay: 50 },
        settings = $.extend(defaults, opts);

    $this.data('typing', true); // we are typing!

    $.each(settings.text, function(i, letter){
        setTimeout(function(){
            $this.html($this.html() + (letter!='\n'?letter:'<br />'));

            if (i == settings.text.length  - 1) {
                $this.data('typing', null); // this is the last letter, we are done typing!
            }
        }, settings.animDelay * i);
    });
}

$('#game_howto').mouseup(function(e) {
    if (!$('#game_howto_slide1').data('typing')) { // only run if not typing
        $('#game_howto_slide1').Typewriter({
           animDelay: 50,
            text: 'Typewriter effect'
        });
    }
}); 
```

# grails - 如何在 Grails 中进行此查询？

> ID：13869225
> 
> 赞同：0
> 
> 时间：2012-12-13T22:00:41.863
> 
> 标签：grails, hql, grails-orm

我有两个域类：

```
class User {
    String nickname
} 
```

和

```
class Episodes {
    String name
    User sentBy
} 
```

我想对谁发送了更多剧集进行排名。

所以我做了这个查询，并给了我想要的结果。

```
SELECT user.nickname, count(episodes.id) total
FROM user
JOIN episodes on user.id = episodes.sent_by
GROUP BY user.nickname
ORDER BY total DESC 
```

在我的控制器中运行此查询的最佳方式是什么？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T06:44:11.813

我会为此使用 HQL：

```
def results = User.executeQuery(
   'SELECT e.sentBy.nickname, count(e) as total ' +
   'FROM Episodes e ' +
   'GROUP BY e.sentBy.nickname ' +
   'ORDER BY total desc') 
```

结果将是 Object[] 数组的列表，第一个元素是昵称，第二个是计数，例如

```
for (Object[] row in results) {
   println "User ${row[0]} has ${row[1]} episodes" 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T09:16:44.370

关于您的担忧，有一个已回答的问题：

[在 Grails 标准中使用 groupProperty 和 countDistinct](https://stackoverflow.com/questions/3720060/using-groupproperty-and-countdistinct-in-grails-criteria)

# assembly - 读取奇数地址，半个字？

> ID：13869228
> 
> 赞同：3
> 
> 时间：2012-12-13T22:00:50.600
> 
> 标签：assembly, cross-platform, endianness, cpu-architecture, word-size

众所周知，许多 CPU 架构（ARM、PPC）不能读取奇数地址，但如果强制也会产生异常，还有一些可以，但速度稍慢。(x86)

但是是否有任何 CPU 只能处理完整的 32 位（甚至更大！）字？即它不能寻址 16 位字？也许是amd64？

我正在尝试编写一个可移植但快速的 C malloc 类分配器，并希望正确对齐我的内存访问。目前我的目标是 ARM、i386 和 amd64，我可以查找这些特性，但我认为保持警惕会很好。

我想提出我的问题的具体方法是；

是否有 CPU 从地址 0x2 读取 16 位（假设为了论证，通常 0 附近的地址范围是有效的，我知道有些 CPU 不使用第一页）会产生总线错误，其中 CPU =任何 MIPS、ARM、x86、amd64、68k、88000、SH、OpenRISC、Sparc、PPC、Cell/SPE？

（顺便说一下，我是从 C 程序员的角度来看这整件事。所以我假设 C 编译器给了我所有正常的 C 类型，比如 char、uint32_t 等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:22:48.997

一些早期的 IBM Power 处理器只能在项目大小边界上读/写，但会使用陷阱（异常）处理程序处理未对齐的数据。（而且我认为甚至有一个早期版本会说“OK”并默默地给你对齐单词的内容，忽略你地址的低位。）

可以肯定的是，旧的 IBM 7000 系列机器只能在 36 位边界（字长）上读/写一个完整的字，因为没有比这更精细的地址概念了。但我相信他们有读/写低/高半字操作。

HP 2100 系列处理器 IIRC 只有字（16 位）地址，但可以进行字节索引。但是，该索引仅被解释为字节操作的字节索引——否则它是一个单词索引。

但是，就对齐 malloc 而言，您通常应该在缓存行边界上对齐。否则很难防止缓存抖动是 MP 环境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T23:24:34.650

Cell 的 SPE 只有 16 字节的四字加载/存储，并且必须在 16 字节边界上对齐。

如果您需要以更精细的粒度进行处理，则必须读取-修改-写入，并使用位掩码仅更新数据的相关部分。

显然，在 C/C++ 中，编译器会对此提供帮助，并且指令集中支持生成和使用掩码。

对于从地址“2”读取 16 位的示例，您必须从地址“0”读取 128 位并屏蔽所需的位。如果您想将 16 位写入地址“2”，则需要先读取所有 128 位，然后更新相应的 16 位，然后将全部写回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:28:26.933

如果您可以寻址 16 位数量，那么您肯定可以读取 16 位对齐数量。我想您可能假设您将拥有一个字节可寻址的地址空间。您可能不会，因此建议谨慎。可以肯定的是，某些架构（特别是嵌入式架构）可能不是字节可寻址的，甚至不是 16 位可寻址的——尽管我不知道具体的（和当前的）示例。

这真的重要吗？如果您碰巧有一台可字寻址的机器，具有 32 位*可寻址*字长，那么您实际上永远不可能只寻址 16 位。不过要小心 sizeof。

您询问了 amd64 (x86-64)。它对内存对齐访问没有限制，但您可能会因未对齐访问而丢失周期。请记住，未对齐的访问永远不会是可移植的。

更新：什么是对齐地址？

T 类型的对齐地址是 sizeof(T) 的倍数的任何地址，其中 sizeof(T) 是值占用的可寻址单元的数量。例如，如果您在字节可寻址空间中有 32 位字长，则对齐的地址至少是 4 的每倍数。但是，如果机器可按 16 位单元寻址，那么每个地址都是 4 的倍数2 将是 32 位数量的对齐地址。

如果你读的是 16 位的量，有三种情况：

1.  字节寻址：奇数地址可能未对齐。架构可以自由地将这些视为对齐，但也没有。
2.  可寻址单元为 16 位：所有地址都针对 16 位数量对齐。
3.  可寻址单元更大：您实际上没有 16 位数量。它们默默地变大了。

更新 2：是否有 CPU 从地址 0x2 读取 16 位（假设地址范围有效）会产生总线错误？

永远不可能有这样的 CPU，除非可寻址单元低于 8 位。原因是地址0x2的对齐是2个可寻址单元。如果可寻址单元是 8 位，则它是 16 位对齐的。

此外，16 位的意图排除了可寻址单元大小的奇怪值。如果 16 位值是体系结构的实数，则可寻址单元必须是 16 倍。所以它只能是 1、2、4、8 或 16 位。如果它恰好更高，则对齐很容易满足。

由于寻址少于 8 位的架构不值得麻烦，您几乎可以保证地址 0x2 将是 16 位数量的对齐地址。

# android - 如何对齐表格布局中的按钮？

> ID：13869229
> 
> 赞同：1
> 
> 时间：2012-12-13T22:00:54.490
> 
> 标签：android, alignment, tablelayout, android-tablelayout

我有 2 列，有 10 个按钮，名称稍长，我不知道如何对齐它们.. 这是我的代码.. 所以请如果有人知道如何使它变直？我有 2 列，有 10 个按钮，名称稍长，我不知道如何对齐它们.. 这是我的代码.. 所以请如果有人知道如何使它变直？

```
`<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/futuratheme"
android:gravity="center"
android:paddingBottom="25dip" >

<TableRow android:id="@+id/tableRow1" >

    <Button
        android:id="@+id/bPapir"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dip"
        android:layout_marginRight="5dip"
        android:layout_weight="50"
        android:text="@string/papir" />

    <Button
        android:id="@+id/bInformaticki"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_marginRight="15dip"
        android:layout_weight="50"
        android:text="@string/informaticki" />
</TableRow>

<TableRow android:id="@+id/tableRow5" >

    <Button
        android:id="@+id/bUredski"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dip"
        android:layout_marginRight="5dip"
        android:layout_weight="50"
        android:text="@string/uredski" />

    <Button
        android:id="@+id/bPisaci"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_marginRight="15dip"
        android:layout_weight="50"
        android:text="@string/pisaci_pribor" />
</TableRow>

<TableRow android:id="@+id/tableRow4" >

    <Button
        android:id="@+id/bOdlaganje"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dip"
        android:layout_marginRight="5dip"
        android:layout_weight="50"
        android:text="@string/odlaganje" />

    <Button
        android:id="@+id/bPrezentacija"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_marginRight="15dip"
        android:layout_weight="50"
        android:text="@string/prezentacija" />
</TableRow>

<TableRow android:id="@+id/tableRow3" >

    <Button
        android:id="@+id/button5"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dip"
        android:layout_marginRight="5dip"
        android:layout_weight="50"
        android:text="Button" />

    <Button
        android:id="@+id/button6"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_marginRight="15dip"
        android:layout_weight="50"
        android:text="Button" />
</TableRow>

<TableRow android:id="@+id/tableRow2" >

    <Button
        android:id="@+id/button3"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dip"
        android:layout_marginRight="5dip"
        android:layout_weight="50"
        android:text="Button" />

    <Button
        android:id="@+id/button4"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_marginRight="15dip"
        android:layout_weight="50"
        android:text="Button" />
</TableRow> 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:39:24.640

将此应用于每个表格行

```
android:layout_width="fill_parent" 
android:layout_height="wrap_content". 
```

你也可能想添加

```
android:gravity="aGravityType" 
```

（例如“left|center”、“right|center”）到您的按钮，这样它将对齐文本。

# javascript - 从另一个变量创建 JavaScript 变量名

> ID：13869230
> 
> 赞同：0
> 
> 时间：2012-12-13T22:00:56.903
> 
> 标签：javascript, variables, object, reference

我有这个对象

```
function paymentPlan(name, price, days, active){
        this.name=name;
        this.price=price;
        this.days=days;
        this.active=active;
    }

    var plan_1 = new paymentPlan("unlimited", 0, -1, -1);
    var plan_2 = new paymentPlan("starter", 100, 7, 2); 
```

我需要通过从另一个变量构建变量实例来选择一个对象实例，本质上是将数字添加到引用的末尾

例如，如果我需要在选择时打印出 plan_2 的名称，我需要像这样构建参考

```
var plan_id = 2;

alert( plan_+plan_id.name ); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:03:47.323

您最好的方法是将计划存储在`array`.

```
var plans = [];
plans.push(new paymentPlan("unlimited", 0, -1, -1));
plans.push(new paymentPlan("starter", 100, 7, 2));

var plan_id = 1;
alert(plans[plan_id].name); // "starter" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:02:53.930

如果全局定义变量，则可以使用`window`对象：

```
window["plan_" + plan_id].name; 
```

但是，您可以始终在本地定义的对象中初始化变量，例如：

```
var plans = {
    plan_1 : new paymentPlan("unlimited", 0, -1, -1),
    plan_2 : new paymentPlan("starter", 100, 7, 2)
};

plans["plan_" + plan_id].name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:04:02.643

使用父对象

```
var plans = {};
var plan_1 = new paymentPlan("unlimited", 0, -1, -1);
plans["plan_1"] = plan_1;
alert( plans["plan_"+plan_id.name] ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T22:04:15.670

尝试使用`eval()`.

```
alert(eval('plan_'+plan_id+'.name')); 
```

# android - 创建自定义 android rom

> ID：13869237
> 
> 赞同：0
> 
> 时间：2012-12-13T22:01:22.957
> 
> 标签：android

我们正在为一家医院开发一款医疗安卓应用程序。然而，客户询问是否有办法阻止用户（护士）使用安卓手机的其他功能，除了我们将给他的应用程序。这有可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:06:25.500

除了滚动您自己的 ROM，您还可以将您的应用程序设为主屏幕并捕获所有按钮按下等，隐藏通知栏并通常阻止设备的其余功能。

但是，这将是一种 Android 反模式，我建议不要这样做。就个人而言，我永远不会为任何试图对我的工作施加如此严格限制的人工作。

# java - 如何“杀死”执行者的线程？

> ID：13869240
> 
> 赞同：0
> 
> 时间：2012-12-13T22:01:36.160
> 
> 标签：java, multithreading, memory-leaks

我有一个 tomcat webapp，我在其中使用 java 执行器来执行一些可运行文件。

首先，我从我的执行程序实例中分配执行程序服务，如下所示：

```
executorService = Executors.newFixedThreadPool(nThreads, new MyThreadFactory(threadFactoryName)) 
```

然后，我使用执行器服务启动任务：

```
executorService.execute(new MyRunnable); 
```

然后，它似乎工作。但我的问题是，我正在追逐某种泄漏，在运行服务器一段时间后出现此错误：

```
Caused by: java.lang.OutOfMemoryError: unable to create new native thread
at java.lang.Thread.start0(Native Method)
at java.lang.Thread.start(Thread.java:640)
at java.util.concurrent.ThreadPoolExecutor.addIfUnderCorePoolSize(ThreadPoolExecutor.java:703)
at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:652)
at something.server.ThreadExecutor.execute(MyRunnable.java:91) 
```

我在 tomcat 实例上使用了 java VisualVM 来跟踪线程分配。我看到当我调用“newFixedThreadPool”时，我看到了“nThreads”新线程。但是在他们的工作完成后，我看到线程的状态是“等待”。

这正常吗？我不相信，我知道可运行对象完成了他们的工作，但执行程序服务从不释放线程。我能做些什么来释放它们，还是我完全超出了范围？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:15:09.493

`ExecutorService`我认为您正在为每个请求或类似的东西实例化一个新的。

您应该只实例化一个`ExecutorService`并重用它，或者`shutdown()`在完成提交任务后调用该服务。该`shutdown`函数将等待任务完成，然后释放线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T22:13:32.537

> 这正常吗？我不相信，我知道可运行对象完成了他们的工作，但执行程序服务从不释放线程。

是的，这很正常。实际上，这种行为是可取的，因为创建新线程是一项昂贵的操作。池线程（或至少“核心”池线程）将继续存在，直到执行器关闭。

> 我能做些什么来释放它们，还是我完全超出了范围？

您应该能够将线程池配置为具有更小的“核心”线程池和/或更小的 keepAlive 时间。有关详细信息，请参阅[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html)。

* * *

> [M] 我的问题是，我正在追逐某种泄漏，在运行服务器一段时间后出现此错误：

OOME 不一定表示泄漏。这可能表明您没有为尝试创建的线程数留下足够的非堆内存。（或者换句话说，你的线程池太大了。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T22:15:02.737

您正在实例化一个*固定*的线程池。在您通过调用or`ExecutorService`终止自身之前，不会释放线程。`ExecutorService``ExecutorService.shutdown()``ExecutorService.shutdownNow()`

# html - 根据查询将特定行加粗

> ID：13869241
> 
> 赞同：1
> 
> 时间：2012-12-13T22:01:38.573
> 
> 标签：html, ruby, redmine

我有一个 .html.erb 文件，用于在网站上显示表单。( `Redmine`)

我需要将**特定**行加粗。当 tracker == Anomaly 时，该行必须为粗体。

![redmine 样本](../Images/db60fccaabc2818665b2405cb6ed2800.png)

```
<% if query.columns == Anomaly>
  make the text bold 
```

但我认为我的逻辑错误。我怎样才能实现我的想法？

我知道以下代码中处理了哪些 ruby​​ 行。但我不知道如何根据查询使行加粗。 **当前代码**

```
<style>
.bolding {font-weight: bold;}
</style>

<tr id="issue-<%= issue.id %>" class="bolding hascontextmenu 
<%= cycle('odd', 'even') %> 

<%= issue.css_classes %> <%= level > 0 ? "idnt idnt-#{level}" : nil %>">

<td class="checkbox hide-when-print"><%= check_box_tag("ids[]", issue.id, false, :id => nil) %></td>

<td class="id"><%= link_to issue.id, :controller => 'issues', :action => 'show', :id => issue %></td>

<% query.columns.each do |column| %><%= content_tag 'td', column_content(column, issue), :class => column.css_classes %><% end %>

</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:33:31.767

***如果您清楚地表达您的问题并提供所有相关细节**，您可以避免所有的混淆。正如@iain 提到的，`query`它不是来自 Rails，而是来自 Redmine。**您应该在问题中提到您使用 Redmine**。*

也就是说，它看起来像`query`与此类一起使用/来自[此类](https://github.com/asoltys/redmine/blob/master/app/helpers/queries_helper.rb)。

每个`column`in`query.columns`都有一个`name`属性和一个`value()`方法*（除其他外）*。

您可以检查集合中`column`的`query.columns`其中一个具有`value` `"Anomoly"`和`name` `"Tracker"`的。

```
query.columns.any? { |c| c.name.downcase == "tracker" && c.value(issue) == "Anomoly" } 
```

您需要获取 this 的返回值，以便有条件地将`bolding`类应用于您的表格行。

```
<%= apply_bolding = query.columns.any? { |c| c.name.downcase == "tracker" && c.value(issue) == "Anomoly" } %>
<tr id="issue-<%= issue.id %>" class="<%= apply_bolding ? "bolding" : nil %> hascontextmenu <%= cycle('odd', 'even') %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:45:39.110

这是正确的方法

```
<tr id="issue-<%= issue.id %>" class="hascontextmenu <%= cycle('odd', 'even') %> <%= issue.css_classes %> <%= level > 0 ? "idnt idnt-#{level}" : nil %>" 
  <% if issue.tracker_id == 12 %> style="font-weight:bold" <% end %>
>

    <td class="checkbox hide-when-print"><%= check_box_tag("ids[]", issue.id, false, :id => nil) %></td>
    <td class="id"><%= link_to issue.id, :controller => 'issues', :action => 'show', :id => issue %></td>
        <% query.columns.each do |column| %><%= content_tag 'td', column_content(column, issue), :class => column.css_classes %><% end %>

</tr> 
```

# javascript - Internet Explorer 10 中屏幕上的触摸次数

> ID：13869247
> 
> 赞同：2
> 
> 时间：2012-12-13T22:02:01.477
> 
> 标签：javascript, internet-explorer-10

我正在查看 IE10 的开发人员参考（[http://msdn.microsoft.com/en-us/library/ie/hh673549(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh673549%28v=vs.85%29.aspx)），我基本上是想弄清楚如何touch在IE10中工作。

我一直无法找到是否有一个属性可以告诉您屏幕上有多少次触摸。我基本上是在寻找可以检查的某种 JavaScript 属性。

您似乎能够做到这一点的唯一方法是捕获 MSPointerDown 和 MSPointerUp 事件，并根据 pointerId 计算您拥有的唯一指针的数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:46:50.553

您可以查看您列出的上述文档的以下部分... [http://msdn.microsoft.com/en-us/library/ie/hh673557(v=vs.85).aspx#maxtouchpoints](http://msdn.microsoft.com/en-us/library/ie/hh673557(v=vs.85).aspx#maxtouchpoints)

```
// To test for touch capable hardware 
if(navigator.msMaxTouchPoints) { ... }

// To test for multi-touch capable hardware
if(navigator.msMaxTouchPoints && navigator.msMaxTouchPoints > 1) { ... }

// To get the maximum number of points the hardware supports
var touchPoints = navigator.msMaxTouchPoints; 
```

# asp.net-mvc-4 - 在 Web 应用程序上调用 Process.Start 是线程安全的吗？

> ID：13869249
> 
> 赞同：1
> 
> 时间：2012-12-13T22:02:03.337
> 
> 标签：asp.net-mvc-4, thread-safety, wkhtmltopdf

今天我一直在 web 应用程序中使用 wkhtmltopdf.exe，我想知道是否应该使用锁（或单例模式）以便以`Process.Start`线程安全的方式调用。

我担心的是多个用户会在调用上述 exe 文件的页面上同时执行 GET。据我了解，每个请求都是在自己的线程上创建的，这是否意味着调用 exe 文件（带有`Process.Start`）在 Web 应用程序中是线程安全的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:08:02.033

`Process.Start`与线程安全无关。这是一个线程安全的调用——你可以从任意多的线程中调用任意多次。随之而来的问题是您依赖外部流程来完成这项工作。在密集使用的 Web 应用程序中生成多个进程并不是一个好主意，因为您将消耗越来越多的资源。因此，如果您的站点没有大负载，这可能会很好，但如果您希望开始扩展，则不建议这样做。

是的，我知道以可靠且高性能的方式将 HTML 转换为 PDF，不涉及生成过程并且对最终结果感到满意需要花钱。但是 Web 应用程序的可扩展性通常是有代价的。

# c# - 需要双冲吗？

> ID：13869251
> 
> 赞同：6
> 
> 时间：2012-12-13T22:02:07.747
> 
> 标签：c#, stream, flush, streamwriter

`Stream`冲洗 a后是否需要冲洗 a `StreamWriter`？

```
public static async Task WriteStringAsync(this Stream stream, string messageString)
{
        var encoding = new UTF8Encoding(false); //no BOM
        using (var streamWriter = new StreamWriter(stream, encoding))
        {
            await streamWriter.WriteAsync(messageString);
            await streamWriter.FlushAsync();
        }
        await stream.FlushAsync(); //is this necessary?
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:09:38.610

没必要，`StreamWriter.Flush`and`StreamWriter.FlushAsync`方法在`Stream.Flush`内部调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T22:14:36.123

根据 MSDN 文档，这可以被原谅为“只是确保”......

StreamWriter.Flush():

> 清除当前写入器的所有缓冲区，并导致将任何缓冲数据写入基础流。

Stream.Flush():

> 在派生类中重写时，清除此流的所有缓冲区并导致将任何缓冲数据写入底层设备。

...但是，仔细查看 TypeDescriptor 中的代码会发现 StreamWriter.Flush()（我假设它的异步对应 FlushAsync）是调用主函数的重载，传递两个布尔参数，指示 StreamWriter 刷新Stream 和 Unicode 编码器也是如此。因此，对 StreamWriter.FlushAsync() 的一次调用，再加上`await`确保异步操作完全发生的关键字应该没问题。

# android - 在离开活动之前清除变量，因为当我回去时没有它们的最后一个值

> ID：13869253
> 
> 赞同：0
> 
> 时间：2012-12-13T22:02:09.290
> 
> 标签：android, android-activity

我的应用程序有 3 个活动 A、B 和 C

经典的方式是：从 A 到 B 到 A (startActivityForResult(intent) 到 C (startActivity(intent))

在 C 上，我可以返回到 A (startActivity(intent))，但是当我再次在 C 上进行时（总是以相同的方式 A > B > A > C），其中一个变量仍然具有我退出时的值活动 C 最后一次。

其实很多状态都记住了，但是我想全部清除

该变量是一个初始化为 0 并在活动期间递增的整数。但它保留了它拥有的最后一个值，这会导致崩溃。我可以在带着 Intent 去 A 之前将他的值设为 0，但我认为这不是最好的方法。

在退出之前我该怎么做才能清除 C ？

对不起，我的英语很差，很难解释我的问题......

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:27:01.557

在活动 C 中，覆盖 onNewIntent() 方法，然后使用它重新初始化您的变量。每当新意图将活动的现有实例带到前台时，都会调用 onNewIntent() 方法，就像您的应用程序中的情况一样。

编辑：您可能需要将活动 C 设为 singleTop 活动才能使其正常工作。

# java - 从具有不同编码的文件中读取带有 RandomAccessFile 的字符串

> ID：13869263
> 
> 赞同：1
> 
> 时间：2012-12-13T22:02:43.533
> 
> 标签：java, file, encoding, randomaccessfile

我有一个编码为 1250 的大文件。行只是一个接一个的波兰语：

```
zając
dzieło
kiepsko
etc 
```

我需要以一种非常快速的方式从这个文件中随机选择 10 行唯一的行。我这样做了，但是当我打印这些单词时，它们的编码错误 [zaj?c, dzie?o, kiepsko...]，我需要 UTF8。所以我改变了我的代码来从文件中读取字节而不仅仅是读取行，所以我的努力​​最终得到了这个代码：

```
public List<String> getRandomWordsFromDictionary(int number) {
    List<String> randomWords = new ArrayList<String>();
    File file = new File("file.txt");
    try {
        RandomAccessFile raf = new RandomAccessFile(file, "r");

        for(int i = 0; i < number; i++) {
            Random random = new Random();
            int startPosition;
            String word;
            do {
                startPosition = random.nextInt((int)raf.length());
                raf.seek(startPosition);
                raf.readLine();
                word = grabWordFromDictionary(raf);
            } while(checkProbability(word));
            System.out.println("Word: " + word);
            randomWords.add(word);
        }
    } catch (IOException ioe) {
        logger.error(ioe.getMessage(), ioe);
    }
    return randomWords;
}

private String grabWordFromDictionary(RandomAccessFile raf) throws IOException {
    byte[] wordInBytes = new byte[15];
    int counter = 0;
    byte wordByte;
    char wordChar;
    String convertedWord;
    boolean stop = true;
    do {
        wordByte = raf.readByte();
        wordChar = (char)wordByte;
        if(wordChar == '\n' || wordChar == '\r' || wordChar == -1) {
            stop = false;
        } else {
            wordInBytes[counter] = wordByte;
            counter++;
        }           
    } while(stop);
    if(wordInBytes.length > 0) {
        convertedWord = new String(wordInBytes, "UTF8");
        return convertedWord;
    } else {
        return null;
    }
}

private boolean checkProbability(String word) {
    if(word.length() > MAX_LENGTH_LINE) {
        return true;
    } else {
        double randomDouble = new Random().nextDouble();
        double probability = (double) MIN_LENGTH_LINE / word.length();
        return probability <= randomDouble;         
    }
} 
```

但有些不对劲。你能看看这段代码并帮助我吗？也许您看到了一些明显的错误，但对我来说并不明显？我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:04:39.303

您的文件在 1250 中，因此您需要在 1250 中解码它，而不是 UTF-8。不过，您可以在解码过程后将其保存为 UTF-8。

```
Charset w1250 = Charset.forName("Windows-1250");
convertedWord = new String(wordInBytes, w1250); 
```

# scala - Scala 2.10 - 编译器错误？

> ID：13869266
> 
> 赞同：4
> 
> 时间：2012-12-13T22:03:04.753
> 
> 标签：scala

这是编译器错误吗？

```
class A(val pf: PartialFunction[Int, Int])
class B extends A({
  case 5 => 3
  case _ => 2
})

println(new B)

java.lang.VerifyError: (class: Main$$anon$1$B, method: <init> signature: (LMain$$anon$1;)V) Expecting to find object/array on stack 
```

我正在使用 Scala 2.10 RC3 和 Java 7u9

编辑：忘记了我的代码末尾的“新 B”。没有那个错误不会发生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:35:18.397

这是一个看起来非常相似的[问题](https://issues.scala-lang.org/browse/SI-5812)，包括 As 和 Bs。我通常保存 As for type params，这就是我知道我不是用 Java 编码的方式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T01:41:24.527

升级到 Scala-2.10-RC3 - 它在这里工作！

**编辑**

```
class B extends A (new PartialFunction[Int, Int]{
  def apply(v: Int) = v match {
    case 3 => 4
    case _ => 0
  }
  def isDefinedAt(v: Int) = true 
}) 
```

# php - 为什么变量的默认值在第一次迭代中保持不变，即使在 PHP 循环中使用了 ++ 运算符？

> ID：13869269
> 
> 赞同：0
> 
> 时间：2012-12-13T22:03:09.213
> 
> 标签：php, loops, do-while

假设我有以下代码：

```
<?php           
    $i = 1;
    $user_login = "some_name";

    do {
        $user_login_tmp = $user_login . "_" . ($i++);
        echo $user_login_tmp . "\n";
    } while ($i<10);
?> 
```

正如在这个[演示](http://codepad.org/C0sP0NuV)中看到的（可点击！），第一个`echo`回声`some_name_1`.
这对我来说似乎有点奇怪，因为那里`$i++`有。
为什么第一个输出不是`..._2`？我错过了什么吗？

我尝试在 do-while 循环的 PHP 手册页中寻找答案，但在那里找不到我的答案...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:05:17.353

`$i++`执行后增量，它返回变量，然后加一。

> [http://php.net/manual/en/language.operators.increment.php](http://php.net/manual/en/language.operators.increment.php)

您描述的行为可以通过使用 pre-increment: 来实现`++$i`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T22:04:47.083

`$i++`是*后*增量。这意味着增量发生在取值之后。您可以`++$i`用于*预*增量，其中增量发生在取值之前。

通常，大多数程序员更喜欢使用前增量，除非需要后增量。它们往往会稍微便宜一些，因为只需要一个值。使用预增量，您必须在进行增量时保留旧值，这使得它稍微贵一些。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T22:04:39.643

与`$i++`，`++`在获得 的值之后发生`$i`。相反，`++$i`首先递增，然后“返回”新值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-13T22:08:55.027

`$i++`后增量，这意味着：`return $i and then increments $i by one.`

`..._2`如果您将代码更改为[（新演示）](http://codepad.org/Nl4RZa9f)，演示的输出将开始`(++$i)`

查看有关递增运算符的 PHP.net 页面：

[http://php.net/manual/en/language.operators.increment.php](http://php.net/manual/en/language.operators.increment.php)

```
++$a    Pre-increment   Increments $a by one, then returns $a.

$a++    Post-increment  Returns $a, then increments $a by one.

--$a    Pre-decrement   Decrements $a by one, then returns $a.

$a--    Post-decrement  Returns $a, then decrements $a by one. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-13T22:04:48.017

$i++ 正在使用后运算符。在 $i 被连接之后，它会被评估。

# pagination - 显示来自 Instagram 的一系列图像

> ID：13869273
> 
> 赞同：1
> 
> 时间：2012-12-13T22:03:19.290
> 
> 标签：pagination, instagram

如何从 Instagram 显示我们的图片，比如每页 10 张？

就目前而言，我认为无法仅检索有关我们需要的图像的信息，而不是检索所有图像的完整列表（带有`https://api.instagram.com/v1/users/self/feed?access_token=ACCESS-TOKEN`）。

因此，每次显示带有图像的页面时，我们都需要从 Instagram 下载完整的图像列表，这似乎很慢。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:01:32.520

将返回的 URL 存储在数据库中 - 然后您可以定期检查新图像并进行相应更新。现在，从数据库中显示您想要的图像 - 这样您就可以完全控制要显示的图像和数量，并且比通过 API 快得多...

# java - 使用 LOAD DATA INFILE 时如何有选择地更新表中的列？

> ID：13869278
> 
> 赞同：0
> 
> 时间：2012-12-13T22:03:39.627
> 
> 标签：java, mysql

我正在尝试通过从 Java 进程调用 MySQL 的 LOAD DATA INFILE 将数据从文本文件加载到 MySQL 表中。该文件可以包含当前日期和前几天的一些数据。该表还可以包含以前日期的数据。问题是文件中先前日期的某些列可能已更改。但我不想更新所有这些列，而只想更新某些列的最新值。

示例，表格

```
+----+-------------+------+------+------+
| 编号 | 报告日期 | val1 | val2 | val3 |
+----+-------------+------+------+------+  
| 1 | 2012-12-01 | 10 | 1 | 1 |  
| 2 | 2012-12-02 | 20 | 2 | 2 |
| 3 | 2012-12-03 | 30 | 3 | 3 |
+----+-------------+------+------+------+

```

输入文件中的数据：

```
1|2012-12-01|10|1|1
2|2012-12-02|40|4|4
3|2012-12-03|40|4|4
4|2012-12-04|40|4|4
5|2012-12-05|50|5|5

```

加载后的表格应如下所示

```
mysql> 从 load_infile_tests 中选择 *；
+----+-------------+------+------+------+
| 编号 | 报告日期 | val1 | val2 | val3 |
+----+-------------+------+------+------+
| 1 | 2012-12-01 | 10 | 1 | 1 |
| 2 | 2012-12-02 | 40 | 4 | 2 |
| 3 | 2012-12-03 | 40 | 4 | 3 |
| 4 | 2012-12-04 | 40 | 4 | 4 |
| 5 | 2012-12-05 | 50 | 5 | 5 |
+----+-------------+------+------+------+
5 行一组（0.00 秒）

```

请注意，列 val3 值不会更新。我也需要对大文件执行此操作，有些文件可能大于 300Megs 或更多，因此它需要是一个可扩展的解决方案。

谢谢，阿尼鲁达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:05:57.650

It would be good to use LOAD DATA INFILE with REPLACE option, but in this case records will be dropped and added again, so old `val3` values will be lost.

Try to load data into temporary table, then update your table from temp. table using [INSERT ... SELECT](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)/[UPDATE](http://dev.mysql.com/doc/refman/5.1/en/update.html) or [INSERT ... ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html) statements.

# python - 如何在 CentOs 中将 uWsgi 作为服务运行？

> ID：13869286
> 
> 赞同：4
> 
> 时间：2012-12-13T22:04:18.240
> 
> 标签：python, uwsgi

我很着急，我可以找到如何做到这一点，但我需要一些帮助才能在不浪费太多时间的情况下实现这一目标。目前，我为运行 uWsgi 实例和我的 ini 文件所做的只是：

```
uwsgi --ini /home/myonlinesite/uwsgi.ini --pidfile /var/run/uwsgi_serv.pid 
```

然后停止：

```
uwsgi --stop  /var/run/uwsgi_serv.pid. 
```

顺便说一句，我在 /etc/init.d/uwsgi 的 uwsgi 初始化文件中有这段代码。因此，当我运行 /etc/init.d/uwsgi start 时，它会执行 ini 配置文件，而当我执行 /etc/init.d/uwsgi stop 时，它会停止 uwsgi 进程 ID。

问题是，当我启动 uWsgi 服务时，它正常运行并记录每个 http 请求、任何调试打印等，但是当我关闭运行 Vps 的 putty 时，它会杀死所有 uWsgi 进程并退出显示该站点.

我不知道我是否必须只触摸 pid 文件，或者我需要做什么让 uWsgi 进程执行并且我可以关闭 putty。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-04T10:59:16.247

如果您在命令行中设置参数，请将标志添加`-d file.log`到您的命令（`-d`代表守护进程）：

```
uwsgi --ini /home/myonlinesite/uwsgi.ini --pidfile /var/run/uwsgi_serv.pid -d file.log 
```

如果要在配置文件中设置参数，请在配置中添加以下行：

```
daemonize = /absolute/path/to/file.log 
```

在这两种情况下，uWsgi 都将在后台运行并将所有内容记录在 file.log 中。鉴于这些选项，没有必要使用 nohup 等人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T22:25:02.090

使用`nohup`启动 uWsgi 进程应该可以解决您注销时进程停止的问题。

[一个教程](http://www.cyberciti.biz/tips/nohup-execute-commands-after-you-exit-from-a-shell-prompt.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T04:35:00.440

务必添加

守护进程 = 日志文件

到你的配置

# java - 摆动流布局属性

> ID：13869287
> 
> 赞同：0
> 
> 时间：2012-12-13T22:04:20.710
> 
> 标签：java, swing, layout-manager, flowlayout

我一直在玩卡片布局演示：

[http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/layout/CardLayoutDemoProject/src/layout/CardLayoutDemo.java](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/layout/CardLayoutDemoProject/src/layout/CardLayoutDemo.java)

我想构建一个这样的 gui，但我在流布局上苦苦挣扎，我找到了其他属性来帮助根据需要来空间，但我无法让它们与这个例子一起工作。有人可以告诉我如何将以下属性应用于演示中的流布局：

```
public FlowLayout(int alignment, int horizontalGap, int verticalGap) 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T23:22:09.703

有时，您只需要尝试...

![在此处输入图像描述](../Images/12946578643d4c96904754c24ed6b001.png)

```
public class TestFlow {

    public static void main(String[] args) {
        new TestFlow();
    }

    public TestFlow() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setLayout(new GridLayout(0, 1));
            add(createPane(FlowLayout.LEFT, 5, 5));
            add(createPane(FlowLayout.CENTER, 15, 15));
            add(createPane(FlowLayout.RIGHT, 20, 20));
            add(createPane(FlowLayout.LEADING, 0, 0));
            add(createPane(FlowLayout.TRAILING, 5, 5));
        }

        protected JPanel createPane(int alignment, int hGap, int vGap) {

            JPanel panel = new JPanel(new FlowLayout(alignment, hGap, vGap));
            panel.setBorder(new LineBorder(Color.GRAY));
            panel.add(new JLabel("Left"));
            panel.add(new JLabel("Middle"));
            panel.add(new JLabel("Right"));

            return panel;

        }

    }

} 
```

# java - 关于 @MatrixVariable 注解 ins Spring 3.2 的一些信息

> ID：13869288
> 
> 赞同：5
> 
> 时间：2012-12-13T22:04:23.127
> 
> 标签：java, spring, spring-mvc, annotations, spring-annotations

今天我正在研究可从 STS 仪表板下载的 Spring MVC 展示

**对于Spring 3.2版本引入的新注解@MatrixVariable**，以及URI路径中Matrix变量的使用，我有些疑惑。

在我的 home.jsp 视图中，我有以下链接：

```
<a id="matrixVar" class="textLink" href="<c:url value="/data/matrixvars;foo=bar/simple" />">Matrix variable</a> 
```

在这里阅读有关**@MatrixVariable**注释的官方文档：http: [//static.springsource.org/spring-framework/docs/3.2.0.M2/reference/html/mvc.html#mvc-ann-matrix-variables](http://static.springsource.org/spring-framework/docs/3.2.0.M2/reference/html/mvc.html#mvc-ann-matrix-variables)

我已经了解以下内容：

1) 矩阵变量是一对 2) 我可以将这些变量放在任何 URI 路径段中

所以我对之前的链接有些疑惑：

1.  **单击上一个链接时调用的 URI 是什么？**

    是 /spring-mvc-showcase/data/matrixvars/simple 吗？！？！（使用 spring-mvc-showcase 只是应用程序名称）

2.  **如果我将“foo”矩阵变量放在其他位置，它会无动于衷吗？**

例如，如果我以这种方式放置“foo”变量：

“/data;foo=bar/matrixvars/simple”

或以这种方式：

“/data/matrixvars/simple;foo=bar”

有同样的意思吗？

好的，现在这是处理通过单击链接生成的 HTTP 请求的控制器方法：

```
@RequestMapping(value="{path}/simple", method=RequestMethod.GET)
public @ResponseBody String withMatrixVariable(@PathVariable String path, @MatrixVariable String foo) {
    return "Obtained matrix variable 'foo=" + foo + "' from path segment '" + path + "'";
} 
```

此方法使用 URI 模板模式来加入 URI 的特定位置。

因此，如果我的 URI 是**data/matrixvars/simple**并且因为我的整个类都由**@RequestMapping("/data")**注释注释并且我的控制器方法由以下注释：**@RequestMapping(value="{path}/simple", method= RequestMethod.GET)**这意味着以下的事情？

路径 URI 模板变量与第二个 URI 位置相关（在当前 URI 中是 matrixvars），因此此方法也可以处理 URI，例如：

```
/spring-mvc-showcase/data/SOMETHING/simple 
```

这样对吗？

非常感谢你

安德烈亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T21:22:54.840

答案：

**单击 [ `/data/matrixvars;foo=bar/simple`] 链接时调用的 URI 是什么？**

*   从浏览器的角度来看，URI 与给定的完全相同。
*   在 Spring MVC 中，它是`/data/matrixvars/simple`；实际的矩阵变量从 URI 中“消失”，因为矩阵变量被认为是 URI 的可选组件。

**如果我将“foo”矩阵变量放在其他位置，它会无动于衷吗？**

*   **没有**。矩阵变量与它们在路径中的位置相关联。如果您将它们移动到不同的路径位置，那么它们会改变它们的含义。

**...所以这个方法也可以处理类似 URI** `/spring-mvc-showcase/data/SOMETHING/simple`

*   正确，`foo`定义的 MatrixVariable 支持类似`/spring-mvc-showcase/data/SOMETHING;foo=bar/simple`

# android - 消费者关闭输入通道或发生错误。事件=0x8

> ID：13869289
> 
> 赞同：9
> 
> 时间：2012-12-13T22:04:35.653
> 
> 标签：android

```
01-03 11:28:47.499: ERROR/InputDispatcher(164): channel '4085fe50 com.bce.tip/com.bce.tip.core.MenuActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
01-03 11:28:47.499: ERROR/InputDispatcher(164): channel '4085fe50 com.bce.tip/com.bce.tip.core.MenuActivity (server)' ~ Channel is unrecoverably broken and will be disposed!` 
```

当我单击 Imageview 动作调用但我将此 onclick 调用到另一个图层类

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-29T23:52:02.897

几分钟前发生在我身上，我找到了原因！这是导致它的代码：

```
 Canvas pattern = new Canvas();
    Bitmap bitmapPattern = Bitmap.createBitmap(pattern.getWidth(),canvas.getHeight(),Bitmap.Config.ARGB_8888);      
    pattern.setBitmap(bitmapPattern);
    pattern.drawLine(0, 0, 1, 1, paintStroke);  
    paintFill.setShader(new BitmapShader(bitmapPattern, TileMode.REPEAT, TileMode.REPEAT)); 
```

原因是：“pattern.getWidth(),canvas.getHeight()”，这些参数可能是无限的，我还没有在画布上定义任何东西！将其更改为数字我可以摆脱该错误！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T13:02:14.590

已解决：1）如果您在单线程中一次运行多个进程，则基本上此错误会发生几次。这就像一个死锁的情况。所以任何计划任务都在那里使它同步特定的负担对象。2) 在 MainThread 上发生 Burden 时杀死未使用的进程。

# php - 将表单发布到 SQL 数据库

> ID：13869293
> 
> 赞同：0
> 
> 时间：2012-12-13T22:04:43.730
> 
> 标签：php, sql, forms

无论我选择什么选项，名为 Forte ID 的第一个字段都会发布值 0。这是我的两个文件：

Index.php(表格)

```
</head>
<h1> Customer Service Log Form </h1>
<form method="post" action="insert.php"> 
<table width="625" border="0">
  <tr>
<td> Forte ID:</td>
<td><select id="ForteID" name="ForteID">    
                <option value="0">Select Your ID</option>   
                <option value="as7326">as7326</option>
                <option value="aw8743">aw8743</option>
                <option value="bj0920">bj0920</option> 
                <option value="bs1441">bs1441</option> 
                <option value="dk7017">dk7017</option> 
                <option value="dl7686">dl7686</option> 
                <option value="dm2940">dm2940</option> 
                <option value="jn2468">jn2468</option> 
                <option value="jw9598">jw9598</option> 
                <option value="kp4945">kp4945</option> 
                <option value="nl2589">nl2589</option> 
                <option value="rp7021">rp7021</option> 
                <option value="sh1346">sh1346</option>                 
    </select></td>
  </tr>
  <tr>
<td> Disposition</td>
<td><select id="disposition" name="disposition">                    
                <option value="0">Select a Disposition</option>
                <option value="Save">Save</option>
                <option value="Sale">Sale</option>
                <option value="LOC">LOC</option>
                <option value="Backout">Backout</option> 
                <option value="Revision">Revision</option> 
                <option value="Revision">Revision/Save</option> 
    </select> 
</td>
  </tr> 
</table>
<hr />
 <br />
 <table width="400" border="0">
  <tr>
<td>App Number:</td>
<td></td>
<td><input name="appnumber" type="text" required="required"></td>
  </tr>
  <tr>
<td>Finance Number:</td>
<td></td>
<td><input type="text" name = "Finance_Num"></td>
  </tr>
  <tr>
<td>Phone Number:</td>
<td></td>
<td><input type="text" name = "Phone_Num"></td>
  </tr>
  <tr>
<td># of Payments Collected:</td>
<td></td>
<td><input type="text" name = "num_payments"></td>
  </tr>
  <tr>
<td>ACH/CC</td>
<td></td>
<td><select id="ForteID" name="ForteID">    
                <option value="0">Select Payment</option>   
                <option value="ach">Checking</option>
                <option value="cc">Credit Card</option>                
    </select></td>
  </tr>
  <tr>
<td>Date:</td>
<td></td>
<td><input name = "date" type="text" id="datepicker" autocomplete="off" required="required"></td>
  </tr>
</table>
 <br /> 
 Notes: 
 <br />
 <textarea name="notes" id="notes" cols="45" rows="5"></textarea>
  </fieldset>
 <hr />       
<input type="Submit" name="formSubmit" value="Submit"> 
<input type="Reset" name="formReset" value="Reset"> 
<input type="button" value="View Logs" onClick="window.location.href='logs.php';">
 </form> 
</head> 
```

Insert.php（用于将表单中的数据插入 SQL Server 数据库的 PHP 文件）：

```
$serverName = 'Server\SQLEXPRESS';
$connectionInfo = array('Database'=>'database', 'UID'=>'username', 'PWD'=>'password');
$connection = sqlsrv_connect($serverName, $connectionInfo);
if( $connection === false )
{
 echo "Connection could not be established.\n";
 die( print_r( sqlsrv_errors(), true));
}
$tsql = "INSERT INTO logs(ForteID, disposition, appnumber, Finance_Num, num_payments, ach_cc, date, notes, Phone_Num) VALUES (?,?,?,?,?,?,?,?,?)";
$parameters = array( $_POST[ForteID], $_POST[disposition], $_POST[appnumber], $_POST[Finance_Num], $_POST[num_payments], $_POST[ach_cc], $_POST[date], $_POST[notes], $_POST[Phone_Num]);
$stmt = sqlsrv_query($connection, $tsql, $parameters);
if( $stmt === false ){
echo "Statement could not be executed.\n";
 die( print_r( sqlsrv_errors(), true));
} else {
echo "Rows affected: ".sqlsrv_rows_affected( $stmt )."\n";
} 
```

无论在 index.php 字段 Forte ID 中选择了哪个选项，它都会发布一个值 0。这有什么问题。在我添加一个名为电话号码的字段之前，它正在工作。但没有意义为什么会搞砸选择。

如果我需要澄清任何事情，请告诉我，并提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:09:55.083

您必须使用名为 ForteID 的字段

```
<select id="ForteID" name="ForteID">    
<option value="0">Select Payment</option>   
<option value="ach">Checking</option>
<option value="cc">Credit Card</option> 
```

是第二个

# java - 复选框数据表选定行

> ID：13869307
> 
> 赞同：0
> 
> 时间：2012-12-13T22:05:17.993
> 
> 标签：java, checkbox, datatable, primefaces

我有复选框数据表，第一列是复选框，第二列和其他输出文本，但最后一列是输入文本（密码）和此列`disabled="false"`，现在我想如果单击复选框，此列更改`disabled="true"`，我该如何解决？

```
<h:body>

        <p:dataTable var="car" value="#{regularityController.stlist}" paginator="true" rows="10"  rowKey="#{car.g_student_no}"
                     selection="#{regularityController.select}" >  

        <f:facet name="header">  
            Telebeleri secin  
        </f:facet>  

            <p:column  selectionMode="multiple" style="width:18px" />  

        <p:column headerText="Name">  
           <h:outputText value="#{car.s_name}" />   
        </p:column>  

        <p:column headerText="Surname" >  
           <h:outputText value="#{car.s_surname}  " />  
        </p:column>  
        <p:column headerText="Father Name">

           <h:outputText value="#{car.s_fname}  " />

        </p:column>   

        <p:column headerText="Father Name">

            <p:password disabled="#" value="#{car.s_pass }"/> 

        </p:column>   

        <f:facet name="footer">  
            <p:commandButton value="ddd" action="#{regularityController.saveStudent()}"/>  
        </f:facet>  
    </p:dataTable>  
    </h:body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:50:55.613

您是否尝试过使用 javascript：添加到复选框

```
 onclick="document.getElementById('#{p:component('id')}').disabled=true" 
```

添加`id`到`password`

# c# - WinRT DownloadOperation 在下载完成或下载 1MB 之前不会返回任何内容

> ID：13869308
> 
> 赞同：2
> 
> 时间：2012-12-13T22:05:18.027
> 
> 标签：c#, .net, microsoft-metro, windows-runtime, windows-store-apps

我正在使用 WinRT BackgroundDownloader 创建一个 DownloadOperation，然后等待它回调到目前为止下载的进度和数据。我的问题是，除非下载完成或恰好下载了 1MB 的数据，否则不会调用回调。我想在那之前得到一份进度报告。

有没有其他人遇到过这个问题，有没有人有解决方案？我觉得某处可能有一个设置来更改下载进度报告的粒度，但我在任何地方都找不到它。

这是一个代码示例：

```
using System;
using System.Diagnostics;
using Windows.Networking.BackgroundTransfer;
using Windows.Storage; 
```

...

```
var downloader = new BackgroundDownloader();
var storageFile = await KnownFolders.PicturesLibrary.CreateFileAsync("puppy.jpg", CreationCollisionOption.ReplaceExisting);
var downloadUri = new Uri("http://www.wallbest.com/wallpapers/2560x1600/puppy-eyes-beagle-www.wallbest.com.jpg");
var downloadOperation = downloader.CreateDownload(downloadUri, storageFile);
var progress = new Progress<DownloadOperation>(operation => Debug.WriteLine(operation.Progress.BytesReceived));
await downloadOperation.StartAsync().AsTask(progress); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-18T07:31:24.983

是的，这就是实际行为：“ *WinRT DownloadOperation 在下载完成或下载 1MB 之前不会返回任何内容*”。
此类**用于在后台下载大文件**。对于下载小于 1MB 的对象，您应该使用**HttpClient**使用异步下载。

# ruby-on-rails - 为什么我会在控制台中看到一些记录，但在我的应用程序中看不到相同的记录？

> ID：13869311
> 
> 赞同：0
> 
> 时间：2012-12-13T22:05:40.473
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的应用程序中，当我去时，`localhost:3000/users/3`我得到一个

```
ActiveRecord::RecordNotFound at /users/3 
```

但是，当我进入控制台并`u = User.find(3)`看到以下内容时：

```
> u = User.find(3)
  User Load (31.6ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 3]]
 => #<User id: 3, email: "abc3@test.com", encrypted_password: "$2a$10$x9iFcz1kooaQD1P9zFl/jOqwjC9veK6cCEP6zF/mtTMr...", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 0, current_sign_in_at: nil, last_sign_in_at: nil, current_sign_in_ip: nil, last_sign_in_ip: nil, created_at: "2012-12-13 19:27:34", updated_at: "2012-12-13 19:27:34", name: "Third User"> 
```

即使我没有指定任何不同的数据库，它是否有可能是从不同的数据库中提取的？

对于它的价值，一切都很好，直到我想重置我的数据库并重新运行我的`seeds.rb`......所以我最近做了：

`rake db:reset`这正是我想要做的，那就是：

```
$ rake db:reset
-- create_table("roles", {:force=>true})
   -> 0.0857s
-- add_index("roles", ["name", "resource_type", "resource_id"], {:name=>"index_roles_on_name_and_resource_type_and_resource_id"})
   -> 0.0028s
-- add_index("roles", ["name"], {:name=>"index_roles_on_name"})
   -> 0.0028s
-- create_table("users", {:force=>true})
   -> 0.0899s
-- add_index("users", ["email"], {:name=>"index_users_on_email", :unique=>true})
   -> 0.0045s
-- add_index("users", ["reset_password_token"], {:name=>"index_users_on_reset_password_token", :unique=>true})
   -> 0.0061s
-- create_table("users_roles", {:id=>false, :force=>true})
   -> 0.0663s
-- add_index("users_roles", ["user_id", "role_id"], {:name=>"index_users_roles_on_user_id_and_role_id"})
   -> 0.0088s
-- initialize_schema_migrations_table()
   -> 0.0136s
-- assume_migrated_upto_version(20121210211049, ["/my_app/db/migrate"])
   -> 0.0358s
CREATING ROLES
SETTING UP DEFAULT USER LOGIN
New user created: First User
New user created: Second User
New user created: Third User
New user created: Fourth User 
```

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:12:12.537

您需要重新启动您的应用程序。

重置后，旧数据库被删除，并创建了一个新数据库。您的应用需要重新启动以匹配新的数据库、缓存等；）

# windows-phone-7 - Windows Phone 中的旋转手势

> ID：13869313
> 
> 赞同：-1
> 
> 时间：2012-12-13T22:05:45.260
> 
> 标签：windows-phone-7, image-rotation

我想在我的 Windows Phone 应用程序中捕获对象的旋转手势，并为对象设置动画以显示它已旋转。

我看到 WP7 默认不给出这个手势，我在 Toolkit 中也得到了同样的结果。谁能帮我开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:26:49.687

您可以尝试使用 Windows Phone 的多点触控行为。该工具包可在此处获得：

[http://multitouch.codeplex.com/](http://multitouch.codeplex.com/)

这些链接可能会帮助您更好地理解它：

[http://www.windowsphonegeek.com/tips/gestures-in-wp7-the-basic](http://www.windowsphonegeek.com/tips/gestures-in-wp7-the-basic)

[http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Silverlight-Programming-MultiTouch-and-Manipulation.aspx](http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Silverlight-Programming-MultiTouch-and-Manipulation.aspx)

# javascript - 增加任意位置固定

> ID：13869315
> 
> 赞同：0
> 
> 时间：2012-12-13T22:05:59.803
> 
> 标签：javascript, css, css-position

如何使用 javascript 增加每个位置：在页面中固定多个像素？

例如：我有一个包含几个固定位置元素的网页，我使用 javascript 在顶部插入了一个工具栏。现在工具栏占据了 40px 的空间，所有的固定元素都被定位在 40px 之外。

我需要一些可以在引入工具栏的同时触发的 javascript，它将所有固定位置增加 40 像素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:09:09.783

您可以通过修改 JS 中的样式属性来设置元素的顶部或底部 CSS 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:10:26.840

我想你必须做这样的事情：

```
var elems = document.all || document.getElementsByTagName("*");
// I know document.all isn't ideal, but it saves a function call if it's there ;)
var l = elems.length, i, stl;
window.getComputedStyle = window.getComputedStyle || function(e) {return e.currentStyle};
for( i=0; i<l; i++) {
  stl = window.getComputedStyle(elems[i]);
  if( stl.position === "fixed") {
    elems[i].style.marginTop = ((parseInt(stl.marginTop,10) || 0) + 40) + "px";
  }
} 
```

使用`margin-top`as`top`是为了允许像`top:50%`. 当然，`margin-top`也可以是百分比，这将是一个问题，但频率较低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:11:47.180

您可以为每个固定元素提供一个公共类，然后针对所有这些：

```
<div class="fixed">
    some fixed element
</div> 
```

js（jquery方法）：

```
$('.fixed').each(function(){
    $(this).css('top', $(this).css('top') + 40 + 'px'); 
}); 
```

如果不使用 jquery，请参阅 aurel 的答案

# objective-c - UITableView 中的多个部分

> ID：13869317
> 
> 赞同：0
> 
> 时间：2012-12-13T22:06:11.457
> 
> 标签：objective-c, uitableview, nsfetchedresultscontroller

实际上我只使用了**一个部分**。我按日期对存储在核心数据中的数据进行排序。

我想要**两个部分**（*最新*和*历史*）。在我的第一部分“最新”中，我想输入我的最新日期，而在另一部分“*历史*”中，我想输入按日期排序的其他日期。

我的表是可编辑的，我正在使用 NSFetchedResultsController。

这是我的**numberOfRowsInSection**示例代码：

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc]init];
    [fetchRequest setEntity:[NSEntityDescription entityForName:@"Info"
                                    inManagedObjectContext:self.managedObjectContext]];

    // Define how we want our entities to be sorted
    NSSortDescriptor* sortDescriptor = [[[NSSortDescriptor alloc]
                                    initWithKey:@"date" ascending:NO] autorelease];
    NSArray* sortDescriptors = [[[NSArray alloc] initWithObjects:sortDescriptor, nil] autorelease];

    [fetchRequest setSortDescriptors:sortDescriptors];

    NSString *lower = [mxData.name lowercaseString];
    NSPredicate *predicate = [NSPredicate predicateWithFormat: @"(name = %@)", lower];

    [fetchRequest setPredicate:predicate];

    NSError *errorTotal = nil;
    NSArray *results = [self.managedObjectContext executeFetchRequest:fetchRequest error:&errorTotal];

    if (errorTotal) {
        NSLog(@"fetch board error. error:%@", errorTotal);
    }

    return [results count];

    [fetchRequest release];
    [results release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:18:56.400

您需要修改您指定的“ ”对象以为[“](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDataSource/numberOfSectionsInTableView%3a) [”](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDataSource/numberOfSectionsInTableView%3a)方法`UITableViewDataSource`返回“2” 。[`numberOfSectionsInTableView:`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDataSource/numberOfSectionsInTableView%3a)

[然后你需要在你的" `tableView:cellForRowAtIndexPath:`"](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDataSource/tableView%3acellForRowAtIndexPath%3a)方法中返回正确的东西，这取决于索引路径中指定的部分。

如果你想要一个可选的章节标题（例如“历史”或“最新”），你也可以通过返回一个章节标题数组[`sectionIndexTitlesForTableView:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDataSource/sectionIndexTitlesForTableView%3a)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:21:06.453

实施`- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView`

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 2;
} 
```

这样，tableviewController 就知道要创建多少个部分。如果您不实现此方法，它将创建默认的节数，即 1。

> 这个方法被要求数据源返回表格视图中的节数。
> 
> 默认值为 1。

完整的方法描述可以在[这里找到](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006941-CH3-SW9)

### 更新：

当 tableview 询问您要为某个索引路径显示哪个单元格时，您可以为单元格提供正确的数据。假设您有 2 个包含最新和历史行标题的 NSArray，您可以执行以下操作：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //create cell
    static NSString *CellIdentifier = @"MyCellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(indexPath.section == 0){
        //set title for latest
        NSString *title = [[self latestTitles] objectAtIndex:indexPath.row];
        [[cell textLabel] setText:title];
    }else{
        //set title for history
        NSString *title = [[self historyTitles] objectAtIndex:indexPath.row];
        [[cell textLabel] setText:title];
    }

    //Update: add NSLog here to check if the cell is not nil..
    NSLog(@"cell = %@", cell);

    return cell;
} 
```

# c++ - GCC 关于隐式取消引用的警告

> ID：13869318
> 
> 赞同：12
> 
> 时间：2012-12-13T22:06:13.860
> 
> 标签：c++, gcc, gcc-warning

我刚刚在 GCC 中遇到了以下警告：

```
warning: implicit dereference will not access object of type ‘volatile util::Yield’ in statement [enabled by default] 
```

在编译此代码时：

```
volatile util::Yield y1;
util::Yield y2;
y1 += y2; // <--- Warning triggered here. 
```

不幸的是，我不太明白 GCC 试图告诉我什么......

Yield 类声明如下：

```
class Yield {
public:
    Yield();

    Yield &operator+=(Yield const &other);
    Yield &operator+=(Yield const volatile &other);
    Yield volatile &operator+=(Yield const &other) volatile;
    Yield volatile &operator+=(Yield const volatile &other) volatile;

    // Other operators snipped...
}; 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T22:31:57.120

来自 GCC 手册，[第 6.1 节 - 何时访问易失性对象？](http://gcc.gnu.org/onlinedocs/gcc-4.0.4/gcc/Volatiles.html)

> *当使用对 volatile 的引用时，G++ 不会将等效表达式视为对 volatile 的访问，而是发出警告，指出没有访问 volatile。这样做的基本原理是，否则很难确定发生易失性访问的位置，并且不可能忽略返回易失性引用的函数的返回值。同样，如果您希望强制读取，请将引用转换为右值。*

The warning stems from the fact that the += operator returns a *reference* to a volatile object, and that the expression 'y1 += y2' ignores that return value. The compiler is letting you know that the reference will not actually be dereferenced (i.e. the volatile value will not be read).

# android - 缩放的 ModelMatrix 与漫射照明相混淆

> ID：13869325
> 
> 赞同：1
> 
> 时间：2012-12-13T22:06:26.763
> 
> 标签：android, opengl-es, opengl-es-2.0

所以，我有一个希望简单的问题：

我有一个简单的立方体，我`Matrix.ScaleM`用来缩放模型视图并压缩立方体（这是有原因的，相信我）。

这项工作，立方体缩小了。但是，我的片段着色器不再正确地将漫反射光源应用到立方体的顶部和底部。阴影代码如下。

```
precision mediump float;        
uniform vec3 u_LightPos;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

varying vec3 v_Position;
varying vec4 v_Color;
varying vec3 v_Normal;          // Interpolated normal for this fragment.
varying vec2 v_TexCoordinate;   // Interpolated texture coordinate per fragment.

// The entry point for our fragment shader.
void main()                         
{                              

        float distance = length(u_LightPos - v_Position);

// Get a lighting direction vector from the light to the vertex.
vec3 lightVector = normalize(u_LightPos - v_Position);                  

    // Calculate the dot product of the light vector and vertex normal. If the normal and light vector are
// pointing in the same direction then it will get max illumination.
float diffuse = max(dot(v_Normal, lightVector), 0.0);                                                                                 
mediump float emptyness = 0.0;
mediump float half_emptyness = 0.1;
// Add attenuation. 
diffuse = diffuse * (1.0 / (1.0 + (0.10 * distance)));

// Add ambient lighting
diffuse = diffuse + 0.3;  
vec4 textColor1 = texture2D(u_Texture, v_TexCoordinate);
vec4 textColor2 = texture2D(u_Texture2, v_TexCoordinate);

// Multiply the color by the diffuse illumination level and texture value to get final output color.

if(textColor2.w == emptyness){
    diffuse = diffuse * (1.0 / (1.0 + (0.10 * distance)));
    gl_FragColor = ( diffuse * textColor1 );//v_Color *

    gl_FragColor.a = 1.0;
} else{
    diffuse = diffuse * (1.0 / (1.0 + (0.75 * distance)));
    gl_FragColor = ( diffuse * textColor1 );//v_Color *
    gl_FragColor.a = 0.0;
}

} 
```

那么，有什么想法吗？

而且我知道颜色有点……奇怪。那是完全不同的原因。

编辑：根据要求，顶点着色器：

```
uniform mat4 u_MVPMatrix;
uniform mat4 u_MVMatrix;
attribute vec4 a_Position;
attribute vec4 a_Color;
attribute vec3 a_Normal;
attribute vec2 a_TexCoordinate;

varying vec3 v_Position;        // This will be passed into the fragment shader.
varying vec4 v_Color;           // This will be passed into the fragment shader.
varying vec3 v_Normal;          // This will be passed into the fragment shader.
varying vec2 v_TexCoordinate;   // This will be passed into the fragment shader.

// The entry point for our vertex shader.
void main()
{
// Transform the vertex into eye space.
v_Position = vec3(u_MVMatrix * a_Position);

// Pass through the color.
v_Color = a_Color;

// Pass through the texture coordinate.
v_TexCoordinate = a_TexCoordinate;

// Transform the normal's orientation into eye space.
v_Normal = vec3(u_MVMatrix * vec4(a_Normal, 0.0));
float halfer = 2.0;

// gl_Position is a special variable used to store the final position.
// Multiply the vertex by the matrix to get the final point in normalized screen coordinates.
gl_Position = u_MVPMatrix * a_Position;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:24:43.837

你需要一个像这样的倒置转置矩阵：

着色器：

```
uniform mat4 u_IT_MVMatrix;
...
v_Normal = vec3(u_IT_MVMatrix * vec4(a_Normal, 0.0)); 
```

在您的 Java 代码中，您可以从常规 MV 矩阵创建矩阵，如下所示：

```
invertM(tempMatrix, 0, modelViewMatrix, 0);
transposeM(it_modelViewMatrix, 0, tempMatrix, 0); 
```

然后，您只需要将其作为制服传递到着色器中。

# javascript - 无法确定异步 Facebook 登录使用哪个 JS 回调

> ID：13869326
> 
> 赞同：1
> 
> 时间：2012-12-13T22:06:36.027
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我正在尝试允许使用 javascript 进行异步 facebook 登录。我正在使用每个人都使用的相同代码：

```
window.fbAsyncInit = function() {
  FB.init({
    appId      : 'XXX',
    channelUrl : '//' + host + '/channel.html',
    status     : true,
    cookie     : true,
    xfbml      : true
  });

  FB.Event.subscribe('auth.login', function(response) {
    // ajax call to find or create account
  });
} 
```

但是，仅当您之前未登录 Facebook 时才会触发回调。

auth.authResponseChange 事件用作登录按钮回调，但它也会在每次页面加载时触发。如果按钮没有被实际点击，这不是很有用。

我真正需要的是*当且仅当*单击登录按钮时触发的回调。

**编辑：**

如果我让我的网站的“退出”按钮将您从 Facebook 中注销，那么一切都是一致的，但这太烦人了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:01:02.703

问与答：[Facebook登录按钮回调函数](https://stackoverflow.com/questions/10883187/facebook-login-button-callback-function)

简短的回答：简化。在图像按钮上使用回调而不是一些花哨的 .fb-login 元素 + 订阅事件。

# javascript - 在菜单项中使用 tab 键

> ID：13869327
> 
> 赞同：0
> 
> 时间：2012-12-13T22:06:43.477
> 
> 标签：javascript, html

我有一个菜单控件，它呈现如下的最终输出。这个菜单是基于 javascript 函数打开的。使用 tab 键我可以进入这个元素，然后按 enter，然后按 tab 键进入，然后循环选项。问题是，在到达结束元素后，再次按下选项卡会使第一个选项突出显示，而不是转到页面的下一个元素。有人可以指导我如何实现这一目标。

```
<menu id="zz4_FeatureMenuTemplate1" largeiconmode="true">
        <ie:menuitem id="zz5_MenuItem_CreateDocLib" menugroupid="200" description="Create a place to store and share documents." text="New Document Library" onmenuclick="if (LaunchCreateHandler('DocLib')) { GoToPage('\u002fview\u002f_layouts/new.aspx?FeatureId={00bfea71-e717-4e80-aa17-d0c71b360101}&amp;ListTemplate=101') }" iconsrc="/_layouts/images/NewDocLibHH.png" type="option"></ie:menuitem>
        <ie:menuitem id="zz6_MenuItem_CreateSite" menugroupid="200" description="Create a site for a team or project." text="New Site" onmenuclick="if (LaunchCreateHandler('Site')) { STSNavigate('\u002fview\u002f_layouts/newsbweb.aspx') }" iconsrc="/_layouts/images/newweb32.png" type="option"></ie:menuitem>
        <ie:menuitem id="zz7_MenuItem_Create" menugroupid="200" description="Create other types of pages, lists, libraries, and sites." text="More Options..." onmenuclick="if (LaunchCreateHandler('All')) { STSNavigate('\u002fview\u002f_layouts/create.aspx') }" type="option"></ie:menuitem>

        <ie:menuitem id="zz8_MenuItem_ViewAllSiteContents" menugroupid="300" description="View all libraries and lists in this site." text="View All Site Content" onmenuclick="STSNavigate2(event,'/view/_layouts/viewlsts.aspx');" iconsrc="/_layouts/images/allcontent32.png" type="option"></ie:menuitem>
        <ie:menuitem id="zz9_MenuItem_SitePermissions" menugroupid="300" description="Give people access to this site." text="Site Permissions" onmenuclick="STSNavigate2(event,'/view/_layouts/user.aspx');" iconsrc="/_layouts/images/Permissions32.png" type="option"></ie:menuitem>
        <ie:menuitem id="zz10_MenuItem_Settings" menugroupid="300" description="Access all settings for this site." text="Site Settings" onmenuclick="STSNavigate2(event,'/view/_layouts/settings.aspx');" iconsrc="/_layouts/images/settingsIcon.png" type="option"></ie:menuitem>
    </menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:54:10.607

Tab 是 html 中那些很难使用的棘手键之一。

我使用/见过的最能证明问题的解决方案是`input/a/button`从文档中检索所有标签。将它们存储在一个数组中，当用户按下选项卡按钮时捕获该事件，然后将焦点放在数组中的适当元素上。

这是一些粗略的代码：

```
var elements_array = document.getElementsByTagName("*");
for(var i = elements_array.length; i--){
    if( elements_array[i].indexOf("input") < 0 || elements_array[i].indexOf("a") < 0 || elements_array[i].indexOf("button") < 0){
        elements_array[i].pop();
    }
}

function tab_key(e){
    if(e.keyCode == 9){
        var curr_focus = find_current_focus;
        for(var = elements_array.length; i--){
            if(elements_array[i] == curr_focus){
                var new_focus = elements_array[i+1];
                new_focus.focus();
                break;  
            }        
        }
    }
}

function find_current_focus(){
    return document.activeElement;
} 
```

使用该函数返回活动元素而不是仅将当前焦点设置到数组中的下一个元素的原因是，即使您的用户单击了与`input/a/button`他们在页。

# sugarcrm - SugarCRM 更改模块图标

> ID：13869331
> 
> 赞同：0
> 
> 时间：2012-12-13T22:06:59.290
> 
> 标签：sugarcrm

所以我要更改我的自定义模块的图标。我的模块是文件类型的，我希望图标是销售类型的。但是，我需要模块为文件类型才能拥有上传文件字段。

因此，我尝试将 custom/themes/default/images/ 中自定义模块的所有文件替换为自定义销售模块中的文件，但这没有奏效。

我也尝试编辑 menu.php 文件，但它不存在所以我不能。

我正在使用 Sugar 6.5.5 CE 版。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:46:23.387

好的，所以我认为问题是它需要快速修复和重建。

# c# - Request.Files[""] 继续返回 null

> ID：13869334
> 
> 赞同：0
> 
> 时间：2012-12-13T22:07:04.733
> 
> 标签：c#, html, asp.net-mvc, uploadify

使用 uploadify 自动提交用户文件，在我的控制器方法 Request.Files["Name"] 中不断返回 null 但 request.form 不为 null，当我设置断点并调试它时，我可以在 request.form 中看到该文件. 我错过了什么吗？我正在 mvc2 上对此进行测试，但我计划在 mvc4 上使用它。

```
<link href="../../Content/uploadify.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script src="../../Scripts/jquery.uploadify.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        $('#file_upload').uploadify({
            'swf': '/Content/uploadify.swf',
            'uploader': '/Home/UploadFile',
            'auto': true

            // Your options here
        });
    });
</script>
 </head>
   <body>           
   <%--<% using (Html.BeginForm("UploadFile", "Home", FormMethod.Post,
 new { enctype = "multipart/form-data" }))
 { %>--%>
  <input type="file" name="file_upload" id="file_upload" style="margin-bottom: 0px" />

 <%-- <% } %>--%> 
```

控制器方法：

```
 [HttpPost]
    public ActionResult UploadFile(HttpPostedFileBase file)
    {           
        var theFile = Request.Files["file_upload"];
        return Json("Success", JsonRequestBehavior.AllowGet);
    } 
```

如果我添加一个提交按钮然后提交它会起作用。我需要自动，但没有提交按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:14:36.710

IIRC`Uploadify`用作`fileData`参数。所以：

```
var theFile = Request.Files["fileData"]; 
```

甚至更好：

```
[HttpPost]
public ActionResult UploadFile(HttpPostedFileBase fileData)
{          
    // The fileData parameter should normally contain the uploaded file
    // so you don't need to be looking for it in Request.Files
    return Json("Success", JsonRequestBehavior.AllowGet);
} 
```

当然，如果您对这个名称不满意，您可以随时使用该[`fileObjName`](http://www.uploadify.com/documentation/uploadify/fileobjname/)设置对其进行自定义。

# html - 当浏览器达到一定大小时如何折叠div，（调整窗口大小时忽略包装器div？）

> ID：13869335
> 
> 赞同：1
> 
> 时间：2012-12-13T22:07:06.950
> 
> 标签：html, css

我有像这样的html：

```
<div id="container">
   <div id="content">
      <!-- whole site here -->
   </div>
</div>

#container {
  width: 1280px;
  background-image: url(/image);
}

#content {
  width: 890px;
} 
```

**有谁知道一种方法，以便当浏览器窗口调整到小于 1280 像素时，它不会启动水平滚动条，直到达到内容宽度（890 像素）？** 我已经为此绞尽脑汁好几个小时了。我听说过各种负边距技巧，尝试了几次都无济于事。主要问题是，我什至不知道这叫什么，所以很难搜索。有人能指出我正确的方向吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:11:04.673

你有没有尝试过：

```
@media all and (max-width: 1280px) {
    #container { width: 100%; }
} 
```

以上所做的，就是`#container`在屏幕宽度小于 1280 像素时，调整屏幕的宽度。

由于`#content`仍然具有固定宽度，滚动条应该在 890 像素处开始。

希望能解决它。

如果你还没有听说过媒体查询，谷歌它们，你可以用它们做一些很酷的事情。

# iphone - 为什么在我的 UIDocument 自动保存后调用 loadFromContents？

> ID：13869336
> 
> 赞同：2
> 
> 时间：2012-12-13T22:07:13.077
> 
> 标签：iphone, ios, icloud, uidocument

我有一个 iOS 应用程序，它实现了 UIDocument 的自定义子类，该子类将文件包装器封装在数据包、存档对象和图像上。我最初将实现转换为 UIDocument 以获得 iCloud 支持，但它太不可靠了，所以我拔出了 iCloud 部分，只使用带有本地存储的 UIDocument。

当用户修改数据时，我将 updateChangeCount: 发送到 UIDocument 实例，它会定期在后台自动保存。我只在应用程序进入后台时关闭文档。我发现在调用 UIDocument 的 contentsForType 方法的自动保存之后，还会调用 loadFromContents。我在逻辑上不理解这一点，它也导致我的界面出现问题。

我认为 loadFromContents 只有在打开文档或在另一台设备上修改了 iCloud 文档时才会被调用。因此，当我的文档在后台自动保存时，它也会重新加载，这会导致 UI 更新，这有时会丢弃尚未保存的正在进行的新工作。我可以忽略 UI 中的重新加载，但我的模型数据与 UI 对象不同仍然存在一些问题。

那么我做错了什么导致这种行为？我希望保存而不是启动 loadFromContents 或了解如何处理该行为。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:50:44.840

我发现这种行为在某种程度上是由于一些 @synchronized 调用我包装了 contentsForType 和 writeContents: 初始实现的方法，以防止在关闭具有未保存更改的文档时崩溃。我收到两个几乎同时调用 contentsForType 导致错误的访问错误。

我找到了一种更简洁的方法来防止这些崩溃，方法是在关闭文档之前设置 updateChangeCount:UIDocumentChangeCleared。

# asp.net-mvc - MVC 4 + 实体框架 5 + 存储过程

> ID：13869338
> 
> 赞同：0
> 
> 时间：2012-12-13T22:07:18.787
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, entity-framework-5

> 我现在正在自学 MVC4（多年来一直在做网络表单），我很沮丧 - 但不是 MVC，它非常好。实体框架是……嗯

我正在使用VS2010。

问题

我们有一个真实的数据库，你知道用外键之类的东西标准化。但是我为 Entity Framework 找到的每个示例都是直接指向表格的，但是我们很少有一个直接的表格拉出侧填充下拉列表等。我们所有的前端调用都命中了一个存储过程（多么古老的学校！*脏话已删除*）

我喜欢 MVC 的模型架构，您可以在其中定义来自数据源的数据的属性 - 显示名称、范围、数据类型。等等。所以我绝对想保留这个。

Entity Framework 和 MVC 不想在这个场景中发挥出色。我创建了我的 edmx 文件（仅限 SP），为 SP 导入了我的函数，一切都很好……直到现在。

无法从 edmx/designer 创建控制器 - 输入控制器名称，选择使用 EF 读取的 MVC 控制器，选择作为功能名称_结果的模型类，并为上下文选择 ...实体名称。FAIL 无法检索元数据

好的，所以现在我尝试 EF 5.x DbContext Generator，更新文件名和繁荣我有一个模型和上下文 - 太棒了，现在我可以做很酷的 MVC 的东西，让我们重建网站......哦，恐怖 - 一切都有之前已经定义了。

我尝试在不同的文件夹中生成 edmx 和/或在 DBContext 生成器之后将其删除，但仍然无法创建 Controller。

```
'blah' is not part of the specified 'Context' class, and the 'Context' class could not be modifed to add a 'DbSet' property to it. (For example, the 'Context' class might be in a compiled assembly.) 
```

如果我手动添加 DBSet，我将无法检索元数据 - 我假设这是因为它无法连接到数据库。我不知道在哪里告诉它使用 web.config 中的连接字符串。- 如果这是问题

我的 MVC 对更光明未来的希望已经死去。

我错过了什么？

我没有嫁给 EF，所以如果有更好的方法来访问数据库（无需从头开始编写所有代码），我会在这里倾听。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:06:45.347

实体框架严重依赖约定。需要一点时间来适应。例如对于连接字符串...如果实体框架没有找到与您的 DBcontext 类同名的连接字符串，它只会创建一个（我认为它默认使用项目名称作为数据库名称）。如果此数据库不存在，它将在本地创建为 sql express DB。这会导致您报告的错误类型。

如果您想为实体框架定义连接字符串，您只需在 web.config 中提供一个连接字符串。再次约定......连接字符串的名称应与您的 DBContext 类相同，实体框架只会找到它。

```
<connectionStrings>
      <add name="MyDbContextClassName" connectionString="..." />
</connectionStrings> 
```

在架构方面，恕我直言 ORM 无疑是新应用程序开发的方式。它使数据进出数据库变得更加容易。也就是说，如果您习惯于通过存储过程访问所有内容并直接查询数据库，那么这是一个**巨大的范式转变。**不要放弃它。一开始它会让你感到沮丧，就像学习任何新技术一样，但最终还是值得的。

我过去曾使用实体框架和 nHibernate 进行 ORM。我喜欢实体框架的一点是，如果您使用代码优先迁移，大多数真正烦人、乏味且容易出错的列映射都会为您自动生成（再次使用约定）。有时您最终仍需要进行一些映射，但这种情况非常罕见。如果您已经有一个数据库，那么可能会少一些，因为您的列名可能并不总是与实体框架约定相匹配。无论如何...这是我书中的一大优点，也是为什么我会坚决支持 EF 而不是 nHibernate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T10:01:39.003

我在您的 App.config 文件中检查您的

```
<connectionStrings> 
```

检查您的存储过程是否已添加到模型上下文文件中

```
YouDBModel.Context.tt
   > YourBDModel.Context.cs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T16:49:21.850

如果您已经有一个数据库，那么您不需要 EF 5.X DbContext Generator 和存储过程。在您的项目中创建一个文件夹或在您的解决方案中为您的数据访问创建一个新项目。在该文件夹/项目中添加一个 edmx 文件并使用向导将其配置到现有数据库。在这个阶段，您可以拉入您的存储过程。

如果您打开 edmx 文件，您可以转到模型资源管理器选项卡并管理导入的函数（存储的过程）及其返回类型。

一旦你有了它，在你的控制器中，你可以只使用你的 EF 实体的实例，而不是使用 DbContext 的实例。因此，如果您将 edmx 称为“MyDbAccess”，您应该能够使用 MyDbAccessEntities，这将允许您访问存储过程。

# c++ - CIDR 表示法中 ipv4 地址的正则表达式

> ID：13869340
> 
> 赞同：1
> 
> 时间：2012-12-13T22:07:24.497
> 
> 标签：c++, c, token, lex, flex-lexer

我正在使用下面的正则表达式来匹配 CIDR 表示法中的 ipv4 地址。

```
[ \t]*(((2(5[0-5]|[0-4][0-9])|[01]?[0-9][0-9]?)\.){3}(2(5[0-5]|[0-4][0-9])|[01]?[0-9][0-9]?)(/(3[012]|[12]?[0-9])))[ \t]* 
```

我已经使用 [http://regexpal.com/][1] 测试了上述内容

它似乎与以下示例匹配`192.168.5.10/24`

但是，当我在 flex 中使用相同的示例时，它会显示“无法识别的规则”。flex 是否存在一些限制，因为它不支持所有功能？上面的正则表达式似乎很基本，没有使用任何扩展功能。有人能指出为什么 flex 不能识别规则。

这是一个简短的自包含示例，演示了该问题

```
IPV4ADDRESS [ \t]*(((2(5[0-5]|[0-4][0-9])|[01]?[0-9][0-9]?)\.){3}(2(5[0-5]|[0-4][0-9])|[01]?[0-9][0-9]?)(/(3[012]|[12]?[0-9])))[ \t]*
SPACE [ \t]

%x S_rule S_dst_ip

%%

%{
    BEGIN S_rule;
%}

<S_rule>(dst-ip){SPACE}   {
           BEGIN(S_dst_ip);
        }

<S_dst_ip>\{{IPV4ADDRESS}\}  {
       printf("\n\nMATCH [%s]\n\n", yytext);
       BEGIN S_rule;
     }

. { ECHO; }

%%

int main(void)
{
    while (yylex() != 0)
        ;
    return(0);
}

int yywrap(void)
{
    return 1;
} 
```

当我尝试做 flex test.l 它给出“无法识别的规则”错误。我想匹配

```
dst-ip { 192.168.10.5/10 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:27:59.730

模式中的“ `/`”`IPV4ADDRESS`需要转义（“ `\/`”）。

模式中未转义的“ `/`”`flex`是[尾随上下文](http://westes.github.io/flex/manual/Patterns.html#index-trailing-context_002c-in-patterns)运算符。

# javascript - 使用 requirejs 创建完全独立的上下文堆栈

> ID：13869343
> 
> 赞同：1
> 
> 时间：2012-12-13T22:07:36.713
> 
> 标签：javascript, node.js, requirejs

我有一个现有的网站，它使用 requirejs 来完成从加载 jQuery 和 Backbone 等库到定义 Backbone 视图、模型等的所有内容。我正在尝试使用 node.js 在服务器端呈现它，因此需要一个完全独立的每个请求的上下文堆栈。

Requirejs 的多版本支持几乎满足了我的需求。它允许为未来的加载声明一个特殊的上下文。var context1 = require.config({context: "abc123"}); 然后允许： context1(['item'], function(item){}); 'item' 将被单独加载，即使它已经被加载。不幸的是，我需要所需的项目也能够要求和定义隔离到该上下文堆栈中的项目。

Requirejs 几乎有这个特性集与内部的 takeGlobalQueue 函数。不幸的是，这个函数期望获取自最近一次调用以来定义的所有项目，因此可以获取在不同上下文堆栈上定义的项目。

我需要的是一种让requirejs给我一个真正独立的define/require实例的方法，它通过未来的调用来保持这种分离。

我不想重写我的整个站点以不使用 requirejs 和/或需要一些插件来处理我所有的 requirejs 调用。我应该为此破解 r.js 源代码吗？这是否违反 AMD 规范？

更新 1：在 nodejs 上说我使用 domino/jsdom 创建了一个窗口上下文。然后，我将 jQuery/zepto 和 Backbone 的副本附加到该窗口，以便 Backbone.View.make 在该窗口中创建一个元素。然后我可以加载我的实际应用程序堆栈，然后该堆栈继承 backone 的那个副本，这样一切都“正常工作”，就好像它在浏览器中一样。无需破解 jquery/backbone 源代码。但是我需要一个单独的 Backbone 副本，指向一个单独的窗口来处理不同的同时请求，这意味着我的视图/模型等的单独上下文堆栈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:23:00.097

我没有足够的上下文来回答这个问题，如何分段加载，但听起来与这个问题相似，所以那里可能有一些提示：

[如何在 node express 网络服务器中使用 requirejs、jquery 和 d3](https://stackoverflow.com/questions/13850130/how-to-use-requirejs-jquery-and-d3-in-a-node-express-webserver)

不确定，但在新的 vm 上下文中运行代码也可能是解决方案的一部分：

[http://nodejs.org/api/vm.html#vm_vm_runinnewcontext_code_sandbox_filename](http://nodejs.org/api/vm.html#vm_vm_runinnewcontext_code_sandbox_filename)

# ios - Titanium iOS 模块构建成功但在测试工具中中断？

> ID：13869352
> 
> 赞同：1
> 
> 时间：2012-12-13T22:08:12.703
> 
> 标签：ios, module, titanium, i386

我有一个使用 Titanium mobilesdk 2.1.4.GA 构建的 iOS 模块，它依赖于一些框架。build.py 命令成功，但是当我尝试在模块测试工具中运行模块时，出现此错误：

架构 i386 的未定义符号：“_OBJC_CLASS_$_MyNewViewController”，引用自：libmy.module.a(MyModuleView.o) ld 中的 objc-class-ref：未找到架构 i386 的符号

如果我不使用我添加的代码，该模块会很好用。

如何为测试工具构建我的课程的正确版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:10:10.863

这是因为我需要在目标的构建阶段将我的类的文件添加到“复制标题”和“编译源”。要修复，请单击左侧的项目名称，单击列表中的目标和“构建阶段”选项卡。然后将类的头文件和实现文件添加到“Copy Headers”和“Compile Sources”。

# java - 如何使用局部变量注释进行 Wicket 授权？

> ID：13869355
> 
> 赞同：2
> 
> 时间：2012-12-13T22:08:26.390
> 
> 标签：java, annotations, wicket, wicket-1.5

我正在`IAuthorizationStrategy`为 Wicket 1.5.x 滚动我自己我已经为页面设置了类型注释以与`isInstantiationAuthorized()`. 它运作良好，我也想使用注释`isActionAuthorized()`。理想情况下，我希望能够注释局部变量，然后检查我的 AuthStrategy 中的注释。从我读过的内容来看，局部变量注释不是这样工作的。

是否有任何已知的解决方法，也许是某种编译时注释处理以将带注释的局部变量转换为“匿名”子类，并将注释作为类型注释？

作为记录，我尝试使用的注释如下所示：

```
@Retention(RetentionPolicy.Runtime)
@Target(ElementType.Type, ElementType.LOCAL_VARIABLE)
public @interface AdminOnly
{
  int isVisible() default 0;
  int isEnabled() default 1;
} 
```

**更新**

因此，基于@Xavi López'es 的回答，我希望做的事情并不完全可能。不过，带注释的 LocalVariables*应该*在编译时可用。[有什么方法可以让我使用它们作为对Wicket 示例](http://www.wicket-library.com/wicket-examples/authorization/wicket/bookmarkable/org.apache.wicket.examples.authorization.pages.PanelsPage)或优秀的 Apache Wicket Cookbook 中可用的元数据代码示例进行样板化的捷径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:30:39.110

前段时间，我在 Wicket 1.3.x 上遇到过类似的问题，但没有找到任何方法通过注释来实现这一点。[正如 JLS ( 9.6.3.2\. @Retention](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.6.3.2) )中所解释的那样，在运行时不能保留对局部变量的注释：

> 局部变量声明上的注释永远不会保留在二进制表示中。

在这个相关问题中：[如何创建处理局部变量的注释处理器？](https://stackoverflow.com/q/3285652/851811)他们谈到了[LAPT-javac](http://www.cs.rice.edu/~mgricken/research/laptjavac/)`javac` ，这是一个允许这样做的补丁版本。在他们的网站上有一个指向[Type Annotations Specification (JSR 308)](http://types.cs.washington.edu/jsr308/specification/java-annotation-design.html)的链接，它有望解决这个主题（[JDK 8](http://jdk8.java.net/type-annotations/)？）。

我最终定义了一个带有相关功能代码的普通旧接口：

```
public interface RestrictedComponent {
    Integer getFunction();
} 
```

这种方法的主要问题是不可能使特定类的即时匿名子类实现其他接口（例如`Component c = new TextField() implements AdminOnly { }`），但您始终可以定义仅在类`Component`中实现的扩展：`RestrictedComponent`

```
public abstract class RestrictedTextField extends TextField implements RestrictedComponent { } 
```

最后，我最终实现了一个`RestrictedContainer`子类化`WebMarkupContainer`并将每个安全组件放入其中，并`<wicket:container>`在标记中使用 a 对其进行建模。

```
public class RestrictedContainer extends WebMarkupContainer implements RestrictedComponent {
    private final Integer function;
    public RestrictedContainer(String id, IModel model, final Integer function) {
        super(id, model);
        this.function = function;
    }
    public RestrictedContainer(String id, final Integer funcionalitat) {
        super(id);
        this.function = function;
    }
    public Integer getFunction() {
        return function;
    }
} 
```

然后在 Authorization Strategy 中检查`component instanceof RestrictedComponent`并返回`true`或`false`取决于用户对相关功能的权限。

# php - PHP中的复杂数组比较

> ID：13869356
> 
> 赞同：-1
> 
> 时间：2012-12-13T22:08:27.737
> 
> 标签：php, arrays

我正在编写一个 PHP 测验应用程序，并且在评分机制方面遇到了一些问题。具体来说，我有 2 个数组进行比较以确定答案是否正确。

我想验证一个数组的所有值是否都在另一个数组中找到。例如，如果正确答案

```
Array
(
    [0] => Proprietary user community
    [1] => Surveys
    [2] => Voice
    [3] => Online chat
    [4] => Web
    [5] => Email
    [6] => Social media
) 
```

用户提供的答案是：

```
Array
(
    [0] => Surveys
    [4] => Online chat
    [6] => Email
) 
```

系统返回不正确，因为没有提供所有正确的值。同样，如果用户提供的答案如下所示：

```
Array
(
    [0] => Proprietary user community
    [1] => Surveys
    [2] => Voice
    [3] => Online chat
    [4] => Web
    [5] => Email
    [6] => Social media
    [7] => Phone
    [8] => Live chat
) 
```

如果提供了其他答案，答案将是正确的。

有任何想法吗？我一直在考虑使用`array_intersect()`，但必须有一个更优雅的解决方案。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:13:48.797

只需将数组相交并比较大小即可。

```
$answer_key = array(/* your answer key here */);
$user_answers = array(/* user answers here */);

$intersection = array_intersect($answer_key, $user_answers);

if (count($answer_key) === count($intersection)) {
    // winner, winner, chicken dinner
} else {
    // fail
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:10:43.237

使用 array_intersect() 有什么问题？

```
<?php
$arr1 = array("a" => "green", "red");
$arr2 = array("b" => "green", "yellow", "red");

$result = count(array_intersect($array1, $array2)) === count(arr1.count);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:12:41.463

数组差异会更好：

[http://php.net/manual/en/function.array-diff.php](http://php.net/manual/en/function.array-diff.php)

```
if (empty(array_diff($correctArray, $userAnswers))) {
    // correct
} else {
    // incorrect
} 
```

# ruby-on-rails - 为什么我在当前项目中看到对另一个项目的 gemset 的引用？

> ID：13869357
> 
> 赞同：0
> 
> 时间：2012-12-13T22:08:28.747
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rvm, gemset

我最近创建了一个新的 Rails 项目，我相信我在生成应用程序之前为它创建了一个 gemset。

但是当我遇到错误时，我会收到这样的消息：

```
File /.rvm/gems/ruby-1.9.3-p194@project_1/gems/activerecord-3.2.8/lib/active_record/relation/finder_methods.rb 
```

即使我在`project_2`. 所以理论上应该是`ruby-1.9.3-p194@project_2`而不是`project_1`。

这可能是什么原因造成的，我该如何解决？

谢谢。

PS我正在使用RVM。

**编辑1：**

我跑了`rvm gemset list`，这是输出：

```
project_2$ rvm gemset list

gemsets for ruby-1.9.3-p194 (found in /Users/marcamillion/.rvm/gems/ruby-1.9.3-p194)
   project_1
=> project_2
   project_3 
```

**编辑2：**

在为该项目创建文件后，我只是`gem install rails`在我的目录中运行，然后验证它确实专门为该项目使用了 gemset。但是，当我再次生成错误时，我仍然在.`project_2``.rvmrc``project_1`

**编辑3：**

的输出`rvm current`：

```
$ rvm current
ruby-1.9.3-p194@project_2 
```

**编辑4：**

虽然，当我在与我看到`rvm current`的相同终端窗口中运行时：`rails s`

```
$ rvm current
ruby-1.9.3-p194@project_1 
```

那么，我现在和将来如何在所有终端窗口中设置 gemset？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:15:54.803

您需要告诉 RVM 使用哪个 gemset。尝试这个：

```
rvm gemset use project_2 
```

如果可行，那么您可能希望`.rvmrc`在 project_2 的根目录中创建一个文件，以便在您进入目录时自动切换到该 gemset：

```
cd /path/to/project_2
rvm --rvmrc --create 1.9.3@project_2 
```

这将创建一个`.rvmrc`in `/path/to/project_2`。 `cd`退出目录并重新进入，它会提示您询问您是否信任该`.rvmrc`文件。默认情况下，它只会在第一次询问您。

**编辑：**

需要注意的是，在创建新的 时`.rvmrc`，您需要`cd`在所有打开的终端会话（包括`rails s`和`rails console`）中退出项目目录。否则，应用程序将继续使用来自`project_1`.

# c++ - 使用 Shobjidl.h 的 Microsoft SDK 出现奇怪错误

> ID：13869358
> 
> 赞同：1
> 
> 时间：2012-12-13T22:08:33.997
> 
> 标签：c++, windows

我想在cpp中检索当前用户文档文件夹的文件夹，所以我使用`SHGetFolderPath`并包含`Shobjidl.h`.

结果我的代码无法编译并生成以下输出：

```
1>C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\shobjidl.h(8994): error C2143: syntax error : missing ')' before 'constant'
1>C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\shobjidl.h(8994): error C2143: syntax error : missing ';' before 'constant'
1>C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\shobjidl.h(8994): error C2059: syntax error : ')'
1>C:\Program Files\Microsoft SDKs\Windows\v7.0A\include\shobjidl.h(8994): error C2238: unexpected token(s) preceding ';' 
```

这些错误背后的代码是：

```
 virtual HRESULT STDMETHODCALLTYPE GetInt32( 
            /* [in] */ __RPC__in REFPROPERTYKEY key,
            /* [out] */ __RPC__out int *pi) = 0; // <- this line produces compile error 
```

怎么了？提前致谢。

我正在使用 Win 7，VS2010 Express。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T22:13:50.650

`Shlobj.h`根据[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762181%28v=vs.85%29.aspx)，您需要为该函数包含的头文件不是`Shobjidl.h`. 我猜这`Shobjidl.h`可能是一个内部头文件，而不是直接包含在内 - 它可能取决于之前已经包含的其他头文件，这将修复您看到的错误。

# typescript - TypeScript：如何实现多方法

> ID：13869359
> 
> 赞同：1
> 
> 时间：2012-12-13T22:08:34.673
> 
> 标签：typescript

我有：

```
interface Intfff
{
     csv: {
       (url: string);
       parsess(lol: string);      
   };
}

class Class implements Intfff
{
    csv(url: string) {

    }
}

var obj: Intfff = new Class();
obj.csv('sdfsdf');
obj.csv.parsess('sdf'); 
```

如何实现方法 csv.parsess() ？翻译器 typeScript 上的错误 Class: missing property 'parsess' from type ...

帮我理解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:02:04.817

您无法使用类方法来填充该接口。`any`在将其添加到对象之前，您必须将函数定义为 type并添加缺少的成员。

```
interface Intfff
{
    csv: {
        (url: string);
        parsess(lol: string);      
    };
}

class Test implements Intfff {
    public csv : { (url: string); parsess(lol: string); };

    constructor() {
        var csv : any = function (url: string) {
            // ...
        };
        csv.parsess = function (lol: string) {
            // ...
        };
        this.csv = csv;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T22:20:18.190

为什么不试试这个呢？

```
interface Intfff
{
    csv(url: string): Intfff;
    parsess(lol:string):string;
}

class TestClass implements Intfff
{
    csv(url: string) {  
        return this;
    }
    parsess(lol: string) {
        return "Hello";
    }
}

var obj: Intfff = new TestClass();
obj.csv('sdfsdf').parsess('sdf'); 
```

# java - 将源的子文件复制到Java中的目标

> ID：13869366
> 
> 赞同：2
> 
> 时间：2012-12-13T22:09:26.010
> 
> 标签：java, file, copy, directory, copying

我正在尝试制作一个复制目录子项的程序，但我无法标记所有特定名称，因为它们在每个文件夹中都不同。这是我的代码，但如果源是“C:\src”并且输出是“C:\dst”，它将创建文件夹“C:\dst\src(children files)”，但我想制作“C:\dst（子文件）”。任何人都可以帮忙吗？

```
public static void copy(File source, File destination) throws IOException {
    if (source == null) {
        throw new NullPointerException("Null Source");
    }
    if (destination == null) {
        throw new NullPointerException("Null Destination");
    }
    if (source.isDirectory()) {
        copyDirectory(source, destination);
    } else {
        copyFile(source, destination);
    }
}
//converts to location
public static void copyDirectory(File source, File destination) throws IOException {
    copyDirectory(source, destination, null);
}

public static void copyDirectory(File source, File destination, FileFilter filter) throws IOException {
    File nextDirectory = new File(destination, source.getName());
    if (!nextDirectory.exists() && !nextDirectory.mkdirs()) {// create the directory if necessary...
        Object[] filler = {nextDirectory.getAbsolutePath()};
        String message = "Dir Copy Failed";
        throw new IOException(message);
    }
    File[] files = source.listFiles();
    for (int n = 0; n < files.length; ++n) {// and then all the items below the directory...
        if (filter == null || filter.accept(files[n])) {
            if (files[n].isDirectory()) {
                copyDirectory(files[n], nextDirectory, filter);
            } else {
                copyFile(files[n], nextDirectory);
            }
        }
    }
}

public static void copyFile(File source, File destination) throws IOException {
    // what we really want to do is create a file with the same name in that dir
    if (destination.isDirectory()) {
        destination = new File(destination, source.getName());
    }
    FileInputStream input = new FileInputStream(source);
    copyFile(input, destination);
}

public static void copyFile(InputStream input, File destination) throws IOException {
    OutputStream output = null;
    try {
        output = new FileOutputStream(destination);
        byte[] buffer = new byte[1024];
        int bytesRead = input.read(buffer);
        while (bytesRead >= 0) {
            output.write(buffer, 0, bytesRead);
            bytesRead = input.read(buffer);
        }
    } catch (Exception e) {
        //
    } finally {
        input.close();
        output.close();
    }
    input = null;
    output = null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:19:22.743

代替

```
if (source.isDirectory()) {
    copyDirectory(source, destination);
} else {
    copyFile(source, destination);
} 
```

经过

```
if (source.isDirectory()) {
    for (File child : source.listFiles()) {
        if (child.isDirectory()) {
            copyDirectory(child, destination);
        } else {
            copyFile(child, destination);
        }
    }
} else {
    copyFile(source, destination);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:14:02.043

您可以使用 commons-io 库在一行中完成所有操作：

```
FileUtils.copyDirectory(src, dest); 
```

见： [http ://commons.apache.org/io/api-1.4/org/apache/commons/io/FileUtils.html#copyDirectory%28java.io.File,%20java.io.File%29](http://commons.apache.org/io/api-1.4/org/apache/commons/io/FileUtils.html#copyDirectory%28java.io.File,%20java.io.File%29)

jar 文件： http: [//mvnrepository.com/artifact/commons-io/commons-io/2.4](http://mvnrepository.com/artifact/commons-io/commons-io/2.4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:14:05.770

使用 getParentFile() 获取父目录：

```
if (source.isDirectory()) {
    copyDirectory(source, destination.getParentFile());
} else {
    copyFile(source, destination.getParentFile());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-11T12:09:02.503

试试这个。将文件夹中的整个文件从源复制到目标。

```
import java.io.*;

public class copydir
{
public static void main(String args[])
{
    File srcFolder = new File("E://Paresh/programs/test");
    File destFolder = new File("D://paresh");

    if(!srcFolder.exists())
    {

          System.out.println("Directory does not exist.");
           //just exit
         System.exit(0);
    }
    else{

           try{
                copyDirectory(srcFolder,destFolder);
                      }
           catch(IOException e)
            {
                    e.printStackTrace();
                    //error, just exit
                        System.exit(0);
                }
        }
    System.out.println("Done");
}

public static void copyDirectory(File src , File target) throws IOException 
{
    if (src.isDirectory()) 
    {
            if (!target.exists()) 
        {
                target.mkdir();
            }

            String[] children = src.list();
            for (int i=0; i<children.length; i++) 
        {
                 copyDirectory(new File(src, children[i]),new File(target, children[i]));
            }
    }
    // if Directory exists then only files copy
    else 
    {

        InputStream in = new FileInputStream(src);
        OutputStream out = new FileOutputStream(target);

        // Copy the bits from instream to outstream
        byte[] buf = new byte[1024];
        int len;
        while ((len = in.read(buf)) > 0) 
        {
                    out.write(buf, 0, len);
        }
        in.close();
        out.close();
        }
   }    

} 
```

# prolog - Prolog 中的统一

> ID：13869371
> 
> 赞同：2
> 
> 时间：2012-12-13T22:09:51.060
> 
> 标签：prolog, unification

这是过去考试中关于 Prolog 统一的问题。我们应该说它们是否统一，然后是实例化。

```
f(a,g(b,a)) and f(X,g(Y,X)) 
```

这统一了 a = X, g(b,a) = g(Y,X) 并且非常简单

```
f(g(Y),h(c,d)) and f(X,h(W,d)) 
```

我不认为这是因为 g(Y) =/ X 而统一，尽管 h(c,d) 确实与 h(W,d) 统一。虽然有可能 X = g(Y) 因为大写 X 一直查找直到找到解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:29:33.617

是的，它确实统一了，它这样做是因为这`g(Y)`是一个需要评估的术语，以及`a`- 在您指出的第一个示例中。

您可以在 prolog 解释器中检查评估：

```
?- f(g(Y),h(c,d)) = f(X,h(W,d)).
X = g(Y),
W = c. 
```

统一过程以深度优先的方式工作，统一成员并返回每个可用的答案，直到无法进行进一步的组合。

这意味着调用**统一方法**`f(g(Y),h(c,d)) = f(X,h(W,d))`，找出可用的匹配项：`g(Y) = X, h(c, d) = h(W, d)`。

然后，在 上执行统一`g(Y) = X`，因为没有进一步可能的归约，所以返回`X = g(Y)`。

然后，在 match 上调用相同的方法`h(c, d) = h(W, d)`，这给了你`c = W`，并且没有其他匹配，因此，在`W = c`。

统一后返回答案，通常`false`在无法匹配/进一步匹配时返回。

正如 CapelliC 所指出的`Y`，在统一过程之后，变量 仍然是未绑定的。统一是在未绑定的变量上执行的，这意味着：

*   `h(c, d) = h(W, d)`return的统一`h(_) = h(_)`，这允许统一继续，因为`h`是一个术语，而不是一个未绑定的 var；

*   的统一`d = d`是术语的匹配，并不形成归属——或约束力；

*   统一`c = W`形成一个属性，并且变量`W`绑定到术语`c`，因为它之前没有绑定 - 否则将执行比较；

*   的统一`X = g(Y)`只是将未绑定的变量绑定`X`到 term `g(Y)`，并且`g(Y)`是具有未绑定变量的术语，因为没有可用的统一`g(Y)`。

问候！

# windows - 缺少添加/删除程序条目

> ID：13869372
> 
> 赞同：1
> 
> 时间：2012-12-13T22:09:51.263
> 
> 标签：windows, installation, registry, nsis

我有 NSI 脚本和编译安装程序，其中包含以下代码：

```
WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${NAME}" "DisplayName" "${NAME}"
WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${NAME}" "InstallLocation" "$\"$INSTDIR$\""
WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${NAME}" "UninstallString " "$\"$INSTDIR\uninstall.exe$\""
WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${NAME}" "Publisher" "${COMPANY}"
WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${NAME}" "URLInfoAbout" "${WEBSITE}"
WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${NAME}" "DisplayVersion" "3.0.0"
WriteRegDWORD HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${NAME}" "NoModify" "1"
WriteRegDWORD HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${NAME}" "NoRepair" "1"
WriteRegDWORD HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${NAME}" "EstimatedSize" "400" 
```

这将编译并在安装时创建所有密钥。我可以在 RegEdit 中看到它们。但它们没有显示在添加/删除程序列表中。无论我删除或添加什么参数。

我尝试创建具有完全相同值的新键，并且它确实显示在列表中。两个密钥的权限完全相同。

**编辑：**

这不适用于 Windows Vista 和 7，包括 x64 和 x86。文件没有数字签名。路径包含空间，但它被封装在双括号中。键名又名 ${NAME} 包含两个空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:31:42.230

这是由于“UninstallString”名称后面有一个意外空格，因此 Windows 无法将其识别为正确的条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:59:22.787

如果您在 64b 操作系统上安装 32b 应用程序，也许它可能有助于切换到注册表的 32b 部分（`Wow6432Node`在创建密钥之前位于下面的分支？

```
SetRegView 32
WriteRegStr HKLM [...] 
```

您的密钥将在`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\your_name`

# regex - regexp 匹配捕获和 exp_send

> ID：13869383
> 
> 赞同：1
> 
> 时间：2012-12-13T22:10:31.507
> 
> 标签：regex, expect

目前我有一个脚本，它从下面的菜单响应中提取行#号，其中包含我对“SalVhugoV3”感兴趣的 SNMP 用户。

这是蓝色的菜单响应

选择一个 SNMP 用户：1）cmssnmp 2）atlas 3）SalVhugoV3 输入选项（1-3）：

脚本的这个工作部分查找包含“SalVhugoV3”的字符串并去掉选项#3，因为这是它正在寻找的用户的选项。然后发送“3”作为“输入选择”提示的 snmpuserChoice。

# 从列表/菜单中选择 V3 用户，grep $V3USER 并发送它的号码

```
 expect -re ".*\\(.*\\):" {
    append rawOut $expect_out(buffer)
    regexp { .*(([0-9])\) [puts $V3USER].*) } $expect_out(buffer) cmdOut snmpUser snmpUserChoice
    exp_send -- "$snmpUserChoice\r"
} 
```

我正在尝试做同样的事情，但使用此扩展响应，因为您可以看到在这种情况下我正在寻找的用户的选项是选项“5”，因为它在字符串末尾包含“SalVhugoV3”。我相信这是需要改变“ regexp { . *(([0-9])) [放置$V3USER]。*) } “但我不知道如何修改它以获取选项“5”编号，以便可以通过“exp_send”发送。

选择要删除的 SNMP 连接： 1) 与 NMS 的连接：主机 135.9.60.143，端口 162，用户 cmssnmp 2) 与 SAL 的连接：主机 135.9.158.252，端口 162，用户 cmssnmp 3) 与 SAL 的连接：主机 135.9.158.236，端口 162，用户 cmssnmp 4）连接到 NMS：主机 135.105.6.67，端口 162，用户图集 5）连接到 SAL：主机 135.60.25.147，端口 162，用户 SalVhugoV3 输入选项（1-5）：

# 从列表/菜单中选择 V3 用户，grep $V3USER 并发送它的号码

```
 expect -re ".*\\(.*\\):" {
    append rawOut $expect_out(buffer)
    regexp { .*(([0-9])\) [puts $V3USER].*) } $expect_out(buffer) cmdOut snmpUser snmpUserChoice
    exp_send -- "$snmpUserChoice\r"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:57:16.567

```
regexp "((\[0-9\])\\)\[^\\)\]*$V3USER)" $expect_out(buffer) cmdOut snmpUser snmpUserChoice 
```

对于 V3USER=atlas，它将给出：

> snmpUser='4) 连接 NMS：主机 135.105.6.67，端口 162，用户图集'
> 
> snmpUserChoice='4'

为了更好的可读性和避免转义：

```
set gen_expr {([0-9])\)[^\)]*}
set spec_expr "($choice_expr$V3USER)"
regexp $spec_expr $expect_out(buffer) cmdOut snmpUser snmpUserChoice 
```

顺便说一句：术语`{ ... [puts $V3USER] }`让我感到困惑。大括号中没有转义，因此这只是被解释为正则表达式的一部分，因此需要字符'p'、'u'、't'、's'、''、$'等之一...

# android - 底部栏上未显示溢出操作栏项目

> ID：13869388
> 
> 赞同：0
> 
> 时间：2012-12-13T22:10:46.437
> 
> 标签：android, layout, menu, android-actionbar

我正在尝试将项目添加到 android 的底部操作栏。根据我在 Google dev 上阅读的内容，我已将以下内容放入我的清单中。

```
 android:uiOptions="splitActionBarWhenNarrow" 
```

我有一个布局文件如下：

```
<item
    android:id="@+id/menu_settings"
    android:orderInCategory="100"
    android:showAsAction="ifRoom"
    android:title="@string/menu_settings"
    android:visible="true"/>

<item
    android:id="@+id/activityhomemen"
    android:orderInCategory="100"
    android:showAsAction="always"
    android:title="@string/activityhomemen"
    android:visible="true"/>

<item
    android:id="@+id/activity1men"
    android:orderInCategory="100"
    android:showAsAction="always"
    android:title="@string/activity1men"
    android:visible="true"/>
<item
    android:id="@+id/activity2men"
    android:orderInCategory="100"
    android:showAsAction="always"
    android:title="@string/activity2men"
    android:visible="true"/>

<item
    android:id="@+id/activity3men"
    android:orderInCategory="100"
    android:showAsAction="always"
    android:title="@string/activity3men"
    android:visible="true"/>

<item
    android:id="@+id/activity4men"
    android:orderInCategory="100"
    android:showAsAction="always"
    android:title="@string/activity4men"
    android:visible="true"/>

<item
    android:id="@+id/activity5men"
    android:orderInCategory="100"
    android:showAsAction="always"
    android:title="@string/activity5men"
    android:visible="true"/>

<item
    android:id="@+id/activity9men"
    android:orderInCategory="100"
    android:showAsAction="ifRoom"
    android:title="@string/activity5men"
    android:visible="true"/>

<item
    android:id="@+id/activity6men"
    android:orderInCategory="100"
    android:showAsAction="ifRoom"
    android:title="@string/activity5men"
    android:visible="true"/>

<item
    android:id="@+id/activity7men"
    android:orderInCategory="100"
    android:showAsAction="ifRoom"
    android:title="@string/activity5men"
    android:visible="true"/>

<item
    android:id="@+id/activity8men"
    android:orderInCategory="100"
    android:showAsAction="ifRoom"
    android:title="@string/activity5men"
    android:visible="true"/>

<item
    android:id="@+id/activity9men"
    android:orderInCategory="100"
    android:showAsAction="ifRoom"
    android:title="@string/activity5men"
    android:visible="true"/> 
```

当我在模拟器上运行应用程序时，我可以看到菜单的前 5 项。当我单击溢出按钮时，我会看到剩余的项目。由于我在清单中插入的内容，它们是否应该不会出现在底栏上？...

任何帮助深表感谢。

下面是模拟器的屏幕。如您所见，溢出包含项目并且底部没有显示栏...

![在此处输入图像描述](../Images/d865da7a1480bb0a10f59be2809a1699.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-13T22:30:25.723

如果您想始终在底部显示这些项目。除了操作栏之外，您还可以使用选项卡小部件。它看起来像 4.0+ 上的操作栏。

[http://developer.android.com/reference/android/widget/TabWidget.html](http://developer.android.com/reference/android/widget/TabWidget.html)

更新：

[http://developer.android.com/reference/android/support/v13/app/FragmentTabHost.html](http://developer.android.com/reference/android/support/v13/app/FragmentTabHost.html) - 这是这个类，有助于添加片段导航

# drupal-7 - Drupal 7 如何防止多个表单提交（服务器端）

> ID：13869391
> 
> 赞同：3
> 
> 时间：2012-12-13T22:10:57.580
> 
> 标签：drupal-7

这是我正在测试的工作模块代码：

```
/**
 * @file myform.module
 */

 /**
 * Implements hook_menu().
 */
 function myform_menu() {
   $items['myform'] = array(
     'title' => 'myform',
     'page callback' => 'drupal_get_form',
     'page arguments' => array('myform'),
     'access callback' => true,
     'type' => MENU_NORMAL_ITEM
   );
   return $items;
 }

 /**
 * Form
 */
 function myform() {
   $form['Value'] = array(
     '#title' => t('Value'),
     '#type' => 'textfield',
     '#description' => t('You may not enter the same value twice. (unless you hit enter really fast).'),
     '#required' => true,
   );
   $form['submit'] = array(
     '#type' => 'submit',
     '#value' => t('Submit')
   );
   return $form;
 }

 /**
 * Validate
 */
 function myform_validate($form, &$form_state) {
   if (isset($form_state['values']['Value']) && trim($form_state['values']['Value'])!=''){
     // prevent duplicates
     db_set_active('test');
     $r = db_query("SELECT id FROM test WHERE value = '".$form_state['values']['Value']."'");
     $n = $r->rowCount();
     if ($n) {
       form_set_error('Value', t('This value has already been submitted.'));
     }
     db_set_active();
   }
 }

 /**
 * Submit
 */
 function myform_submit($form, &$form_state) {

   for ($i=0; $i<=10000000; $i++) {
     // do nothing
   }

   db_set_active('test');
   db_insert('test')->fields(array('value'=>$form_state['values']['Value']))->execute();
   db_set_active();
 } 
```

验证钩子可以防止插入重复值，除非我非常快地按下回车键或提交按钮，在这种情况下，相同的值会被多次插入数据库。

如何防止插入重复值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T06:20:16.997

如果您的意思是用户不小心多次单击提交按钮，那么您应该查看[隐藏提交按钮](http://drupal.org/project/hide_submit)模块。您可以在模块的 INFO 文件中将其定义为依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-19T16:09:10.813

我遇到了完全相同的问题，并设法使用Drupal的[锁定机制来解决它](https://api.drupal.org/api/drupal/includes!lock.inc/group/lock/7)

在我使用的验证功能中：

```
function mymodule_custom_form_validate($form, &$form_state){
  if (lock_acquire('your_custom_lock_name')) {
    // long operations here
  } else {
    form_set_error("", t("You submitted this form already."));
  }
} 
```

在提交功能中我释放了锁：

```
function mymodule_custom_form_submit($form, &$form_state){
  // submit code
  lock_release('your_custom_lock_name');
} 
```

# sql - 与特定时间范围内的事件的关系划分

> ID：13869395
> 
> 赞同：0
> 
> 时间：2012-12-13T22:11:09.683
> 
> 标签：sql, sql-server, sql-server-2008, tsql

[我在这里](http://sqlfiddle.com/#!3/754ed)有我的表 (cte) 定义和结果集

CTE 可能看起来很奇怪，但它已经过测试并以我发现的最有效的方式返回正确的结果。**下面的查询将找到同时**服用两种或多种药物的人员 ID（patid）的数量。目前，该查询只返回服用两种药物的人的 patID，但不能同时返回两种药物。服用这两种药物是由一种`fillDate`药物中的一种在另一种药物之前下降来表示的`scriptEndDate`。所以 ![在此处输入图像描述](../Images/c7980f54f9bb8c1a74b20c4227108701.png)

您可以在这个部分结果集中看到，在第 18 行，`scriptFillDate`它`2009-07-19`位于第 2 行中相同 patID 的`fillDate`和之间`scriptEndDate`。我需要添加什么约束才能过滤这些不需要的结果？

```
--PatientDrugList is a CTE because eventually parameters might be passed to it
--to alter the selection population
;with PatientDrugList(patid, filldate, scriptEndDate,drugName,strength)
as
(
    select rx.patid,rx.fillDate,rx.scriptEndDate,rx.drugName,rx.strength
        from rx
),
--the row constructor here will eventually be parameters for a stored procedure
DrugList (drugName)
as
(
    select x.drugName
        from (values ('concerta'),('fentanyl'))
        as x(drugName)
        where x.drugName is not null
)

    --the row number here is so that I can find the largest date range
    --(the largest datediff means the person was on a given drug for a larger
    --amount of time.  obviously not a optimal solution
     --celko inspired relational division!
     select distinct row_number() over(partition by pd.patid, drugname order by datediff(day,pd.fillDate,pd.scriptEndDate)desc)  as rn
     ,pd.patid
    ,pd.drugname
    ,pd.fillDate
    ,pd.scriptEndDate
    from PatientDrugList as pd
    where not exists
    (select * from DrugList 
    where not exists
    (select * from PatientDrugList as pd2
    where(pd.patid=pd2.patid)
    and (pd2.drugName = DrugList.drugName)))
    and exists 
    (select * 
        from DrugList
        where DrugList.drugName=pd.drugName
    )
    group by pd.patid, pd.drugName,pd.filldate,pd.scriptEndDate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:22:55.633

将原始查询包装到 CTE 中，或者更好的是，为了性能、查询计划和结果的稳定性，将其存储到临时表中。

下面的查询（假设 CTE 选项）将为您提供两种药物同时服用的重叠时间。

```
;with tmp as (
   .. your query producing the columns shown ..
)
select *
  from tmp a
  join tmp b on a.patid = b.patid and a.drugname <> b.drugname
 where a.filldate < b.scriptenddate
   and b.filldate < a.scriptenddate; 
```

# ios - iOS 使用新的 youtube API 嵌入 UIWebView 更改

> ID：13869402
> 
> 赞同：2
> 
> 时间：2012-12-13T22:11:39.863
> 
> 标签：ios, uiwebview, youtube-api

我开始注意到 youtube 视频加载到 UIWebViews 的方式发生了变化，我想知道这是否是我们将来应该期待的行为和/或我们是否可以复制以前的功能。

对比截图： ![加载到 webview 中的 Youtube 视频](../Images/88b06fa366a8dda9ede57b89c9086a8f.png)

右边旧，左边新。添加的 youtube 按钮允许用户离开 youtube 视频并进入 youtube 网络界面。我希望能够阻止用户离开正在播放的视频。

我目前在 UIWebView 上使用这样的类别：

```
- (void)loadYouTubeEmbed:(NSString *)videoId
{    
    NSString* searchQuery = [NSString stringWithFormat:@"http://www.youtube.com/embed/%@?showinfo=0&loop=1&modestbranding=1&controls=0",videoId];

    searchQuery = [searchQuery stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding];

    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:searchQuery]];
    [self loadRequest:request];
} 
```

我注意到我的查询将尊重moderatebranding=1 或showinfo=0 但不能同时尊重两者。随着 youtube 重新设计的推出，这种情况会发生变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:20:42.250

当 Youtube 视频被加载并被`webView:shouldStartLoadWithRequest:navigationType:`点击时，您应该能够过滤掉该链接，使其不会继续。

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    if ([[[request URL] absoluteString] isEqualToString:@"<URL String Youtube spits out when video selected>"]) {
        NSLog(@"Blocking YouTube...");
        return NO;
    } else {
        NSLog(@"Link is fine, continue...");
        return YES;
    }
} 
```

# ruby-on-rails - rails 中的简单状态 - state_machine

> ID：13869409
> 
> 赞同：0
> 
> 时间：2012-12-13T22:12:04.207
> 
> 标签：ruby-on-rails, ruby, state-machine, states

我正在寻找一种简单的方法来改变 Rails 中模型的状态的建议。例如，我希望用户能够通过下拉或比率按钮将他们的工作更改为以下之一：

工作状态

1.  投标（初始状态）
2.  进行中
3.  完全的

有没有一种简单的方法可以在 Rails 中编写它，或者是否有推荐的 gem？没有转换，用户应该能够以不特定的顺序从一种状态更改为其他两种状态中的任何一种。

我查看了 state_machine ，对于这样的事情似乎有点沉重。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:18:38.947

这将花费你 9 美元，但 Ryan Bates 不久前就这个主题做了一个截屏视频：[http](http://railscasts.com/episodes/392-a-tour-of-state-machines) ://railscasts.com/episodes/392-a-tour-of-state-machines 。

很值得一看。

# c# - 我在哪里可以放置图像文件以便程序可以自动找到它？

> ID：13869412
> 
> 赞同：-1
> 
> 时间：2012-12-13T22:12:15.643
> 
> 标签：c#, image

目前我正在尝试这样做，以便我可以从程序中访问图像“staticmap.bmp”，以便我可以将程序传输到另一台计算机并且仍然可以访问图像。我已经尝试将文件传输到程序文件中，但它没有在 Visual Studio 选项卡中显示为存在，也许我将它移动到错误的位置？是那个还是我正确地调用它？

有谁知道图片文件必须在哪里才能被调用？

这是代码，

```
Image image = Image.FromFile("staticmap.bmp"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:16:16.347

如果您只想像这样打开文件：

```
Image image = Image.FromFile("staticmap.bmp"); 
```

然后 staticmap.bmp 只需要与可执行文件位于同一文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:15:22.130

将其作为嵌入式资源添加到应用程序中。一个简单的谷歌搜索将找到一个教程来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T22:35:50.200

在解决方案资源管理器中右键单击图像，选择“属性”。将“构建操作”设置为“内容”，将“复制到输出目录”设置为“始终复制”，以确保在构建时将映像复制到与可执行文件相同的目录。

或者，在解决方案资源管理器中右键单击项目，选择“属性”，转到“资源”选项卡，按“添加资源”按钮右侧的小箭头，选择“添加现有文件”并选择要用作资源的图像。然后你可以像这样使用它：

```
Image image = Properties.Resources.staticmap; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T22:16:19.750

您需要添加一个资源 - 右键单击​​项目、属性、资源。

见[msdn 文档](http://msdn.microsoft.com/en-us/library/7k989cfy%28v=vs.80%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T22:27:05.873

应用程序可以像这样确定它是从哪个目录启动的

```
string dir = System.IO.Path.GetDirectoryName(
    System.Windows.Forms.Application.ExecutablePath
); 
```

另一种方法是（如果您没有对 WinForms 的引用）：

```
string dir = System.IO.Path.GetDirectoryName(
    System.Reflection.Assembly.GetEntryAssembly().Location
); 
```

如果图像位于`Images`应用程序目录中的子目录中

```
Image image = Image.FromFile(System.IO.Path.Combine(dir, @"Images\staticmap.bmp")); 
```

# javascript - 将元素附加到 d3.js 中的现有元素

> ID：13869414
> 
> 赞同：5
> 
> 时间：2012-12-13T22:12:22.663
> 
> 标签：javascript, jquery, svg, d3.js

我正在尝试使用 d3.js 创建一个随时间绘制值的实时条形图

我就是这样做的。

```
var dataset = [ 5, 10, 15, 20, 25 ];
var w = 1800;
var h = 500;
var barPadding = 1;

setInterval(function(){
    dataset.push(Math.floor(Math.random()*51));
    draw();
},1000);

function draw(){

    d3.select("svg").remove();
    var svg = d3.select("body")
            .append("svg")
        .attr("width", w)
        .attr("height", h);

    svg.selectAll("rect").data(dataset)
        .enter()
        .append("rect")
        .attr("x", function(d, i){return 12*i;})
        .attr("y", function(d){return h -d*4; })
        .attr("width", 11)
        .attr("height", function(d) { return d * 4; })
        .attr("fill", "teal")
        .attr("fill", function(d) { return "rgb(0, 0, " + (d * 10) + ")";});
} 
```

问题是每次将新值添加到数据数组时，我都会重新绘制整个图形。

每次将新值添加到数组时，如何将条形附加到已绘制的条形图上，而不是每次都重新绘制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T05:47:30.683

你已经接近了，停止重绘`svg`元素。如果您只需要添加新元素，那么这就是您的绘图函数在调用时应该执行的操作。

```
var dataset = [ 5, 10, 15, 20, 25 ];
var w = 1800;
var h = 300;
var barPadding = 1;

var container = d3.select("body").append("svg").attr("width", w).attr("height", h).append("g");

setInterval(function(){
    dataset.push(Math.floor(Math.random()*51));
    draw();
},1000);

function draw(){

    container.selectAll("rect").data(dataset).enter().append("rect")
        .attr("x", function(d, i){return 12*i;})
        .attr("y", function(d){return h -d*4; })
        .attr("width", 11)
        .attr("height", function(d) { return d * 4; })
        .attr("fill", "teal")
        .attr("fill", function(d) { return "rgb(0, 0, " + (d * 10) + ")";});
}​ 
```

[http://jsfiddle.net/Wexcode/LYqfU/](http://jsfiddle.net/Wexcode/LYqfU/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T23:56:44.297

不确定你在寻找什么样的效果，但看看[这个 fiddle](http://jsfiddle.net/mccannf/aXFBs/8/)。

以下`redraw`函数将继续添加到条形图中，因此它将继续向右增长：

```
function redraw() {
     var rect = svg.selectAll("rect")
         .data(dataset);

     rect.enter().insert("rect", "line")
         .attr("x", function(d, i) { return 12*(i+1); })
         .attr("y", function(d) { return h -d*4 })
         .attr("width", 11)
         .attr("height", function(d) { return d * 4; })
         .attr("fill", "teal")
         .attr("fill", function(d) { return "rgb(0, 0, " + (d * 10) + ")";})

     rect.transition()
         .duration(800)
         .attr("x", function(d, i) { return 12*i; });

} 
```

借自[mbostock 教程](http://mbostock.github.com/d3/tutorial/bar-2.html)。

# objective-c - 使用保存的用户名和密码以编程方式登录网站

> ID：13869418
> 
> 赞同：4
> 
> 时间：2012-12-13T22:12:41.557
> 
> 标签：objective-c, ios, forms, uiwebview

我正在制作的应用程序的功能之一是将用户登录到我们的 Campus Portal 网站。为方便使用，用户可以在应用程序中输入用户名和密码一次，并将保存以供以后所有登录使用。当用户点击一个按钮时，会自动发送登录信息，网站会以`UIWebView`.

假设用户名和密码分别存储在一个`NSString`. 我怎样才能使用这些数据以编程方式登录到[这个网站](https://ic.ridgefield.org/campus/portal/ridgefield.jsp)`UIWebView`并在一个页面中显示它？

我对张贴和表格知之甚少，因此不胜感激。

像[这样](https://stackoverflow.com/questions/9711246/ios-objective-c-uiwebview-autofill-and-execute?lq=1)的Stackoverflow 答案会有帮助吗？

这是我的代码的外壳

```
- (IBAction)btnGo:(id)sender {
    username = usernameField.text;
    password = passwordField.text;
    if (saveSwitch.isOn) {
        //Save data if the user wants
        AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
        usernameSaved = username;
        passwordSaved = password;
        [appDelegate.listOfPortalCredentials replaceObjectAtIndex:0 withObject:usernameSaved];
        [appDelegate.listOfPortalCredentials replaceObjectAtIndex:1 withObject:passwordSaved];
    }
    //Insert username and password to web form, log in to portal
    //This is where I need help
} 
```

**编辑：**

感谢 Karthik，我能够使用 Firebug 找到 HTTP Post。它给了我：

```
appName=ridgefield&portalUrl=portal%2Fridgefield.jsp%3F%26rID%3D0.18423783694092&username=<username>&password=<password>&B1=Log+In&url=portal%2Fmain.xsl%3FrID%3D0.6845596700302482&lang=en 
```

其中 和 代表真实的用户名和密码。我相信这是我需要的。使用这个，我怎样才能在一个中显示登录页面`UIWebView`？我只需要在`UIWebView`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T04:57:18.103

使用 UIWebView，并使用用户名和密码对[https://ic.ridgefield.org/campus/verify.jsp](https://ic.ridgefield.org/campus/verify.jsp)进行http POST 。

要了解它是如何工作的，请在 Firefox 浏览器上安装 Firebug，然后转到 firebug 上的“网络”选项卡，然后打开您的网站并输入一些用户名/密码。

您应该使用代码模仿该动作。（我总是从服务器收到无效的用户名或密码响应，因为我没有帐户，我尝试了一些随机的，并且由于网站上没有注册，我无法验证这一点）

```
UIWebView* webView = [[UIWebView alloc] initWithFrame:self.view.frame];
[self.view addSubview:webView];

NSString* username = @"";
NSString* password = @"";

NSURL* url = [NSURL URLWithString:@"https://ic.ridgefield.org/campus/verify.jsp"];

NSString* body = [NSString stringWithFormat:@"appName=ridgefield&username=%@&password=%@", username, password];
NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:30];
request.HTTPMethod = @"POST";
request.HTTPBody = [body dataUsingEncoding:NSStringEncodingConversionAllowLossy];

[webView loadRequest:request]; 
```

# select - Angular.js - 使用 AJAX 加载的级联选择

> ID：13869425
> 
> 赞同：0
> 
> 时间：2012-12-13T22:12:57.313
> 
> 标签：select, angularjs

我有两个选择：一个是国家，另一个是地区。国家选择是静态填写的，但地区选择必须根据当前国家通过 POST 请求填写。

我已经创建了一个使用相应 JSON 响应国家/地区参数的服务器方法，编写了将数据加载到选择中的代码，但是当我将此代码放入手表时，它无法正常工作：

```
.....................
]).factory('helperService', [
'$http', '$log', function($http, console) {
  var checkDiscount, getRegions;
  getRegions = function(countryCode) {
    return $http({
      method: 'POST',
      url: '/api/regions/',
      data: {
        country_code: countryCode
    }
  });
};

.....................
]).controller('orderController', [
.....................
$scope.$watch('billing_country', function(value) {
  helperService.getRegions($scope.country).success(function(result) {
    $scope.regions = result;
    return $scope.order.billing_state = $scope.regions[0];
  });
  return $scope.country = value;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:45:51.880

您的调用`factory`必须返回一个对象，目前它根本没有返回任何东西。

将其更改为以下内容：

```
.factory('helperService', ['$http', '$log', function($http, console) {

  var checkDiscount;

  var service = {
    getRegions: function(countryCode) {
      return $http({ method: 'POST',
                     url: '/api/regions/', 
                     data: { country_code: countryCode }
      });
    }
  };

  return service;
}])/****/ 
```

然后你的电话`helperService.getRegions`就会奏效。

# stripe-payments - 被拒绝后如何重新启用 Stripe 按钮？

> ID：13869426
> 
> 赞同：1
> 
> 时间：2012-12-13T22:12:59.267
> 
> 标签：stripe-payments

你可以在这里找到一个例子：[https ://stripe.com/docs/button](https://stripe.com/docs/button)

使用`4000 000 0000 0002`和提交将导致按钮被禁用。

我正在使用 AJAX 并发布令牌（以及其他表单元素）。如果有人输入被拒绝的信用卡号，我如何在不重新加载页面的情况下重新启用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:29:57.310

Stripe 将他们的按钮更新为 V2，现在称为 Checkout。您现在可以添加自己的按钮并拥有更多控制权。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-01T19:02:58.803

您可以更新按钮的`disabled`属性。例如，使用 jQuery：

```
$('#payButton').attr('disabled', false) 
```

这将重新启用按钮以接受您客户的付款信息。

# string - Sitecore + Lucene 搜索 FieldQuery 和空字符串

> ID：13869427
> 
> 赞同：4
> 
> 时间：2012-12-13T22:13:04.540
> 
> 标签：string, lucene, indexing, sitecore, field

我正在使用 FieldQuery 对象创建一个 Sitecore.Ecommerce.Search.Query。然后，我使用 LuceneQueryBuilder 类将 Sitecore 查询转换为 Lucene.Net.Search.Query。除了我试图在空字符串上匹配的字段外，查询的所有内容都可以正常工作。

所以......这有效：

`new FieldQuery(FieldName, "1", MatchVariant.NotEquals)`

但这不会：

`new FieldQuery(FieldName, string.Empty, MatchVariant.NotEquals)`

我也通过 Sitecore.Ecommerce 程序集和 Lucene.Net 程序集进行了反映，但我没有发现任何明显的问题。但是，当我查看在 Lucene 查询中创建和使用的 Term 时，它看起来像这样：

-字段名称：

我认为这是不正确的......但也许它是正确的，我只是没有正确的字段索引设置......我不确定是否诚实。

任何帮助是极大的赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T22:55:22.993

Lucene 并不真正支持搜索空值/空值。毕竟，它没有任何索引可以找到。Lucene 使用[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)，这使得某些类型的查询（包括纯否定查询和空值搜索）变得困难甚至不可能。

如果您需要搜索某些字段为空的文档，您应该在可以搜索的字段中存储一个默认值（例如“NULL”）。

也就是说，您可以创建

```
new RangeQuery(FieldName, null, null, true, true); 
```

它构造了一个具有开放上限和下限的范围查询，因此它匹配任何具有值的内容。

这不是一个好方法，但也不是只用否定进行查询。

# php - PHP中最有效的文本压缩

> ID：13869429
> 
> 赞同：1
> 
> 时间：2012-12-13T22:13:19.503
> 
> 标签：php, text, compression

我正在开发一个将存储大量文本文件作为备份的项目。我希望它以某种方式压缩。这时候我正在使用 gzdeflate 来压缩文件。PHP中有没有更有效的文本压缩算法？不涉及图像等。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:17:50.483

如果“有效”是指尺寸大小，那么[`bzcompress()`](http://php.net/manual/en/function.bzcompress.php)通常会击败 gzdeflate。

# .net - response.write 的 88 字节限制？

> ID：13869430
> 
> 赞同：0
> 
> 时间：2012-12-13T22:13:25.440
> 
> 标签：.net, wcf, csv, response.write, contenttype

我正在尝试从 wcf 服务提供一个 csv 文件，作为字符串响应。

它看起来像这样：

```
HttpContext.Current.Response.AddHeader("Content-disposition", "attachment; filename=ImportErrors.csv");
HttpContext.Current.Response.ContentType = "text/csv";
HttpContext.Current.Response.Write(myCsvContent); 
```

响应 StatusCode 设置为 (int)HttpStatusCode.OK (200)

它可以工作，但我只得到 88 个字节的 csv，其余部分被截断（未显示）。

关于在哪里看的任何建议？我在 web.config 中没有看到任何设置限制的自定义条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:57:54.957

一定要打电话

```
HttpContext.Current.Response.Flush();
HttpContext.ApplicationInstance.CompleteRequest(); 
```

这将关闭流并刷新其余内容。

**编辑：** 查看[此链接](https://stackoverflow.com/questions/1087777/is-response-end-considered-harmful)。看来我原来的资料有点过时了……我在“MVC Land”里呆了这么久都忘记了这个模式！

# c++ - char数组的创建会导致静态内存？

> ID：13869435
> 
> 赞同：1
> 
> 时间：2012-12-13T22:13:41.257
> 
> 标签：c++, memory-management, static, stack

对于以下代码，我想知道堆栈中是否只创建了一个数组，或者是否在静态中也创建了一个数组。我只是对从字符串创建数组感到困惑。

```
char str[] = "White"; 
```

我假设这会在堆栈中创建一个名为 str 的指针，该指针指向`"White\0"`静态内存中具有以下内容的数组。这是正确的假设吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T22:18:20.723

没有。

`"White"`是某个静态内存中的数组`char[6]`。（或魔法之地，没有具体说明，完全不相关）。`"White"`请注意，它可能与代码中其他地方的另一个静态数组相同，也可能不同。

`char str[] = "White";``char[6]`在堆栈上创建一个名为 的新本地数组`str`，并将字符从静态数组*复制*到本地数组。不涉及任何指针。

请注意，这几乎是唯一可以复制数组的情况。在大多数情况下，数组不会像这样复制。

如果你想要一个指向魔法静态数组的指针，只需使用`const char* str = "White";`

[Phonetagger](https://stackoverflow.com/users/1245420/phonetagger)指出，如果代码行不在函数中，`str`则不在堆栈上，但也在神奇的静态内存中，但复制仍然（至少理论上）发生在该翻译单元中的代码开始执行之前。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T22:16:31.043

错误的。你所描述的是当你写时会发生什么：

```
const char * str = "White"; 
```

反而，

```
char str[] = "White"; 
```

*在堆栈上*创建一个数组（大到足以容纳该字符串），并使用该文本对其进行初始化。“常规”字符串文字和`char`数组的初始化语法是不相关的东西。

（至于实现，通常编译器发出的代码看起来像

```
char str[SIZE_OF_THE_STRING];
strcpy(str, "White"); 
```

但这是特定于实现的细节）

# ruby-on-rails - Ruby，限制每个请求使用 Find 模块返回的文件数

> ID：13869436
> 
> 赞同：0
> 
> 时间：2012-12-13T22:13:44.820
> 
> 标签：ruby-on-rails, ruby, file

我有一个调用 find_photos 方法的控制器，向它传递一个查询字符串（文件名）

```
class BrandingPhoto < ActiveRecord::Base

  def self.find_photos(query)
    require "find"

    found_photos = []

    Find.find("u_photos/photo_browse/photos/") do |img_path|
        # break off just the filename from full path
        img = img_path.split('/').last

        if query.blank? || query.empty?
        # if query is blank, they submitted the form with browse all- return all photos
            found_photos << img
        else
        # otherwise see if the file includes their query and return it
            found_photos << img if img.include?(query)
        end
    end

    found_photos.empty? ? "no results found" : found_photos
  end
end 
```

这只是搜索一个满是照片的目录——没有表支持它。

理想情况下，我希望能够将 find_photos 返回的结果数量限制在 10-15 左右，然后根据需要获取接下来的 10-15 个结果。

我在想执行此操作的代码可能涉及循环 10 次并获取这些文件 - 将最后一个文件名存储在变量中或作为参数，然后将该变量发送回方法，告诉它继续搜索文件名。

这假定文件每次都以相同的顺序循环，并且没有更简单的方法可以完成此操作。

如果有任何建议，我很想听听他们/看一些你如何实现这一点的例子。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:17:35.593

对于这个问题，首先想到的是在你退出循环后减少数组。虽然这不适用于大量文件另一种解决方案可能是为数组的大小添加一个中断，即。`break if found_photos.length > 10`循环内

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:46:10.463

做你想做的事并不难，但你需要考虑如何处理在页面加载之间添加或删除的条目、带有 UTF-8 或 Unicode 字符的文件名以及嵌入/父目录。

这是您所说的基础的老式代码：

```
require 'erb'
require 'sinatra'

get '/list_photos' do

  dir    = params[ :dir    ]
  offset = params[ :offset ].to_i
  num    = params[ :num    ].to_i

  files = Dir.entries(dir).reject{ |fn| fn[/^\./] || File.directory?(File.join(dir, fn)) }
  total_files = files.size

  prev_a = next_a = ''

  if (offset > 0)
    prev_a = "<a href='/list_photos?dir=#{ dir }&num=#{ num }&offset=#{ [ 0, offset - num ].max }'>&lt;&lt; Previous</a>"
  end

  if (offset < total_files)
    next_a = "<a href='/list_photos?dir=#{ dir }&num=#{ num }&offset=#{ [ total_files, offset + num ].min }'>Next &gt;&gt;</a>"
  end

  files_to_display = files[offset, num]

  template = ERB.new <<EOF
<html>
  <head></head>
  <body>
    <table>
    <% files_to_display.each do |f| %>
      <tr><td><%= f %></td></tr>
    <% end %>
    </table>
    <%= prev_a %> | <%= total_files %> files | <%= next_a %>
  </body>
</html>
EOF

  content_type 'text/html'
  template.result(binding)

end 
```

它是一个小型 Sinatra 服务器，因此将其另存为`test.rb`并使用以下命令从命令行运行：

```
ruby test.rb 
```

在浏览器中，使用如下 URL 连接到正在运行的 Sinatra 服务器：

```
http://hostname:4567/list_photos?dir=/path/to/image/files&num=10&offset=0 
```

我使用 Sinatra 是为了方便，但例程的核心是你想要的基础。如何将其转换为 Rails 术语留给读者练习。

# delphi - FireMonkey TransitionEffect 不考虑纵横比

> ID：13869437
> 
> 赞同：3
> 
> 时间：2012-12-13T22:13:46.687
> 
> 标签：delphi, animation, transition, firemonkey

我正在尝试使用一个小型 FireMonkey 应用程序来浏览图像，并且我正在使用 TBlurTransitionEffect 从一个图像过渡到下一个图像。但我唯一的问题是效果似乎不尊重我使用它的 TImage 控件的纵横比。我的 TImage 具有 iwFit 的环绕模式，但过渡的行为就像设置为 iwStretch 一样。

该应用程序基本上是一个表单，其中包含一个填充有图像文件名的 TListBox 和一个附加了 TBlurTransitionEffect 的 TImage（其中一个 TFloatAnimation 作用于其进度属性）。代码如下所示

```
procedure TForm4.FloatAnimation1Finish(Sender: TObject);
begin
  Image1.Bitmap.Assign(BlurTransitionEffect1.Target);
end;

procedure TForm4.ListBox1Change(Sender: TObject);
begin
  BlurTransitionEffect1.Target.LoadFromFile(PicPath + ListBox1.Selected.Text);
  FloatAnimation1.Start;
end; 
```

我想知道这是否是一个简单的解决方案，我怀疑我将不得不为图像添加白色边框以使它们与 TImage 具有相同的纵横比。

# gnuplot - gnuplot：如何增加图表的宽度

> ID：13869439
> 
> 赞同：12
> 
> 时间：2012-12-13T22:13:48.250
> 
> 标签：gnuplot

我正在使用“gnuplot”绘制带点的折线图：

```
set style data linespoints
set xlabel "number"

set ylabel "Dollars"
set yrange [0:250] 
```

如何增加图表的宽度，以便当我有更多的“x”时，我希望我的图表更多的是矩形而不是正方形？

我怎样才能增加我的'y轴'的间隔？现在，它只是为我的 y 轴上的每 50 个标记绘制一个标记？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T23:08:17.523

听起来您希望您的输出根据正在绘制的数据动态调整大小。这是一个执行此操作的脚本：

```
#!/usr/bin/env gnuplot

# don't make any output just yet
set terminal unknown

# plot the data file to get information on ranges
plot 'data.dat' title 'My Moneys'

# span of data in x and y
xspan = GPVAL_DATA_X_MAX - GPVAL_DATA_X_MIN
yspan = GPVAL_DATA_Y_MAX - GPVAL_DATA_Y_MIN

# define the values in x and y you want to be one 'equivalent:'
# that is, xequiv units in x and yequiv units in y will make a square plot
xequiv = 100 
yequiv = 250 

# aspect ratio of plot
ar = yspan/xspan * xequiv/yequiv

# dimension of plot in x and y (pixels)
# for constant height make ydim constant
ydim = 200 
xdim = 200/ar

# set the y tic interval
set ytics 100 

# set the x and y ranges
set xrange [GPVAL_DATA_X_MIN:GPVAL_DATA_X_MAX]
set yrange [GPVAL_DATA_Y_MIN:GPVAL_DATA_Y_MAX]

# set the labels
set title 'Dollars in buckets'
set xlabel 'number'
set ylabel 'Dollars'

set terminal png size xdim,ydim
set output 'test.png'
set size ratio ar

set style data linespoints

replot 
```

对于这些示例数据：

```
0 50
50 150 
100 400 
150 500 
200 300 
```

我得到以下情节：

![在此处输入图像描述](../Images/93f0d333b79f3b3b8178beca73dc4089.png)

它应该是正方形的（我将 x 中的 100 个单位定义为 y 中的 250 个单位，并且数据跨越范围 [(0,200),(50,500)]）。如果我添加另一个数据点 (400,300)，输出文件会更宽，正如预期的那样：

![在此处输入图像描述](../Images/753e315ad7b7659b4b87c03dc3b998a3.png)

要回答您的其他问题，您可以设置 y tic 增量：

```
set ytics <INCREMENT> 
```

上面的脚本给出了一个例子。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-14T01:32:28.813

为了在此处添加讨论`set size ratio ...`，您还可以设置绘图的纵横比。

以下是摘录`help set size`：

> `ratio`导致尝试在和`gnuplot`指定的绘图部分内创建纵横比为（y 轴长度与 x 轴长度之比）的图形。`<xscale>``<yscale>`
> 
> 负值的含义是不同的。如果 =-1，gnuplot 会尝试设置比例，以使单位在 x 和 y 轴上具有相同的长度（例如，适用于地理数据）。如果 =-2，则 y 上的单位的长度是 x 上的单位的两倍，依此类推。

为此，您可能需要将输出驱动程序设置为合理的大小：

```
set term png size 800,400 #800 pixels by 400 pixels 
```

或者：

```
set term post size 8,4 #8 inches by 4 inches 
```

这完全取决于终端，因此查找终端的帮助以查看它使用的单位等是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:18:07.057

设置 xrange[:]

设置 yrange[:]

使用这 2 个命令来定义图形的“大小”；）

# c++ - 烟花opengl

> ID：13869440
> 
> 赞同：4
> 
> 时间：2012-12-13T22:13:48.717
> 
> 标签：c++, opengl

我正在尝试使用 OpenGL 创建一个烟花（我必须在位置（0,0,0）中放置 100 个粒子）

```
Particle *p[100];

void Build()
{

    for (int i = 1; i <= 100; i++)
    {

    p[i]->pos.x = 0.0;
    p[i]->pos.y = 1.0;
    p[i]->pos.z = 5.0;

    p[i]=AddParticle(*p[i]);

    }
} 
```

但我收到以下错误：

ass.exe 中 0x771b15de 处的未处理异常：0xC0000005：访问冲突写入位置 0x00000000。

这是代码的其余部分：

```
class Particle
{
    public:

Vector3 pos;        // current position
Vector3 vel;        // velocity
Vector3 restPos;    // rest (initial) position
Vector3 oldPos;     // previous position

Vector3 acc;        // acceleration

Particle()
{
    oldPos = restPos = pos = Vector3(0, 0, 0);
    Init();
}

Particle(float x, float y, float z)
{
    oldPos = restPos = pos = Vector3(x, y, z);
    Init();
}

Particle(const Vector3 & _p)
{
    oldPos = restPos = pos = _p;
    Init();
}

void Init()
{
    acc = Vector3(0, 0, 0);
    vel = Vector3(0, 0, 0);
}

void Update(const float & time_step)
{
    Verlet(time_step);
}

// integration step with Verlet
void Verlet(const float & time_step)
{
    Vector3  temp = pos;

    pos += vel * time_step + acc * time_step * time_step ;
    vel = (temp - oldPos) / time_step;

    oldPos = temp;
}       
};

# endif // _PARTICLE__

using namespace std;

class ParticleSystem 
{
vector<Particle>   _particles;      // the particles

Vector3     m_vGravity;             // gravity force applied to the particles system
float       m_fTimeStep;            // time step

Vector3 attractor;

public:

ParticleSystem()
{
    m_vGravity = Vector3(0, -9.81f, 0);
    m_fTimeStep = TIME_STEP;    

    attractor = Vector3(0, 0, 0);
}

void Reset()
{
    _particles.clear();
}

// accessing the fields

void SetGravity(Vector3 g)  {       m_vGravity = g;}

void SetTimeStep(float ts)  {       m_fTimeStep = ts;}

// adding a particle
Particle* AddParticle(Particle _p)
{
    _particles.push_back(_p);

    return &(_particles.back());
}

void Build()
{

    for (int i = 1; i <= 100; i++)
    {

    Particle p;
    p.pos.x = 0.0;
    p.pos.y = 1.0;
    p.pos.z = 5.0;

    p[i]=AddParticle(p);

    }
}

void Draw()
{
    // draw round points
    glPointSize(4.f);
    glEnable(GL_POINT_SMOOTH);
    glAlphaFunc(GL_GREATER,0.5f); 
    glEnable(GL_ALPHA_TEST); 
    glEnable(GL_BLEND);
    glDisable(GL_TEXTURE_2D);
    glDisable(GL_LIGHTING);

    // draws the particles
    glBegin(GL_POINTS);

    glColor3f(1.f, 0.f, 0.f);
    vector<Particle>::iterator pIt;
    for(pIt = _particles.begin(); pIt != _particles.end(); pIt++) 
    {
        Vector3& pos = pIt->pos;
        glVertex3f(pos.x, pos.y, pos.z);
    }

    glEnd();    

    glEnable(GL_LIGHTING);

}

#endif // __PARTICLE_SYSTEM__ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T22:15:18.640

您已经声明了一个指向粒子的指针数组，但实际上并没有分配它们中的任何一个。

（正如其他人指出的那样，数组的索引为 0，而不是 1 - 所以你的循环无论如何都是 1）

目前尚不完全清楚这应该如何工作，因为您似乎正在填充一个粒子结构，您将其传递给 AddParticle()，它返回一个指向粒子的指针，您将其放回您已经尝试过的数组中来参考。

查看您的代码，您可能只需要以下内容：

```
void Build()
{
    for (int i = 1; i <= 100; i++)
    {
        AddParticle(Particle(0.f, 1.f, 5.f));
    }
} 
```

由于粒子类负责粒子，因此不需要数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:20:24.220

我认为这是因为数组从 0 到 99...而不是 1 到 100 。

将 for 语句更改为`for (int i = 0; i < 100; i++)`并记住数组以 0 开头

我也想我知道你想做什么..试试这个代码：

```
void Build()
{
 Particle p[100];
for (int i = 0; i < 100; i++)
 {
   p[i].pos.x = 0.0;
   p[i].pos.y = 1.0;
   p[i].pos.z = 5.0;

   AddParticle(p[i]);

 }
} 
```

# c# - TcpClient 超时与 NetworkStream 超时

> ID：13869445
> 
> 赞同：4
> 
> 时间：2012-12-13T22:14:10.607
> 
> 标签：c#, timeout, tcpclient, networkstream

在以下通用场景中：

```
System.Net.Sockets.TcpClient TC = SomeHowObtained;
System.Net.Sockets.NetworkStream NS = TC.GetStream(); 
```

据我所知，有 3 次超时：

```
NS.ReadTimeout // 1
TC.SendTimeout // 2
TC.ReceiveTimeout // 3
NS.WriteTimeout // 4 
```

(1) = (3) 和 (2) = (4) 是行为意义上的吗？该文档没有给出提示。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T22:23:44.957

对，就是那样 ！

如果你看一下 NetworkStream 类中 ReadTimeout 和 WriteTimeout 属性的实现，你会发现它们只是围绕 Socket ReceiveTimeout 和 SendTimeout 属性的包装器（而 TcpClient ReceiveTimeout 和 SendTimeout 属性是围绕同名 Socket 属性的包装器） .

这意味着最终您将通过 NS 和 TC 对象获取或设置 Socket 的 ReceiveTimeout 和 SendTimeout 属性，无论如何。

简而言之 ：

```
NS.ReadTimeout == TC.ReceiveTimeout == Socket.ReceiveTimeout
MS.WriteTimeout == TC.SendTimeout == Socket.SendTimeout 
```

# mysql - 需要帮助了解 MySQL PACK_KEYS

> ID：13869446
> 
> 赞同：1
> 
> 时间：2012-12-13T22:14:17.943
> 
> 标签：mysql, compression, key, bigint

我正在使用 BIGINT 来保存一个从 1 开始递增的 id 号。在一个表中，这将是主键，当然，它是唯一的；在其他表中，它将是一个外键。我试图弄清楚如果我设置 PACK_KEYS，这个密钥是否会被“打包”，因为会有很多前导零。

我很难理解[表创建](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)中 PACK_KEYS 表选项的 MySQL 文档。以下是文档中的相关引用：

> 在打包二进制数字键时，MySQL 使用前缀压缩：
> 
> *   每个键都需要一个额外的字节来表示前一个键的多少字节与下一个键相同。
>     
>     
> *   指向行的指针以高字节优先顺序存储在键之后，以提高压缩率。
>     
>     
> 
> 这意味着如果您***在两个连续的行上有许多相等的键，那么所有随后的“相同”键通常只占用两个字节（包括指向该行的指针）***。将此与以下键采用 storage_size_for_key + pointer_size（指针大小通常为 4）的普通情况进行比较。相反，只有当您有许多相同的数字时，您才能从前缀压缩中获得显着的好处。如果所有键都完全不同，则每个键多使用一个字节，如果该键不是可以具有 NULL 值的键。（在这种情况下，打包的密钥长度存储在用于标记密钥是否为 NULL 的相同字节中。）

他们让我迷失了“***在两个连续的行上有许多相等的键，所有后面的“相同”键通常只占用两个字节（包括指向行的指针）*** ”。有人可以根据我要完成的工作为我解释上述文档吗？例如，对于主键，不会有任何“相等的键”——连续两行、连续三行、100 个不连续的行......或者他们正在驾驶的任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:46:29.410

Chances are you do not need PACK_KEYS. I see you are using BIGINT for your PK. How many rows are you looking at having in this table eventually?? What kind of data are you storing? How do you intend to retrieve/report on it and how often?? These are things I would consider first before using this feature.

If I read that documentation correctly, it's basically stating that if you have two consecutive records with long PKs say:

PK-x: 1002350025789001 PK-y: 1002350025789002

With PACK_KEYS, PK-y now becomes something like "[pointer to PK-x]2"

It's basically a way of saying PK-2 is the same as PK-1 except for the last number which is 2... without having to rewrite/store the same refix/preceding numbers.

The gains from this are most likely only realized when you are dealing with very long PKs and will mostly be gains in storage/memory, however I would imagine there's a cost to overall performance which may or may not be noticeable depending on how much access load that table gets.

May not be worth it... I've never used this feature, and I've built some pretty heavy apps on MySQL.

hope this helps.

Good Luck

# c++ - 垃圾收集 - 响应性

> ID：13869450
> 
> 赞同：0
> 
> 时间：2012-12-13T22:14:27.583
> 
> 标签：c++, c, garbage-collection

一周前，我的教授谈到了垃圾收集及其响应能力。基本上他说，如果你使用垃圾收集，在代码执行之前总会有一个非常小的延迟。

现在您可以说用户不会识别延迟，因为它非常小。

我正在为我的期末学士考试开发一个游戏引擎，我目前正在决定为我的引擎选择哪种脚本语言。

* * *

现在我有以下情况。假设您使用第一人称相机创建游戏。我们还假设游戏逻辑是用带有垃圾收集的语言编写的。

**这难道不意味着用户会遇到比玩游戏逻辑用没有垃圾收集的语言编写的游戏更多的输入延迟吗？**

现在输入延迟很难预测，因为有很多系统会产生延迟。

例如`input -> gamecode executing -> graphics rendering -> rendering on the screen`。

**如果我使用带有 gc 的语言与没有 gc 的语言，我将有多少延迟可以大致预测吗？** `<1ms, <10ms <100ms`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:42:11.163

关于 GC 唯一“可怕”的事情是（1）它可能会“感觉”更慢，因为它一次清理了许多对象，而不是像你做的那样随着代码的进展而费心地一个一个地去做使用手动内存管理，并且 (2) 它是不确定的，这使得它有些不可预测（但不像听起来那么可怕）。

除了 GC 发生在特定时刻之外，它不会使您的代码“不断”变慢。事实上，我想说的是，当它不在 GC 中时，程序会变得更快一些，因为在 GC 之外，它不会像在非 GC 语言中那样（并且应该）清理对象，而内存管理机制GC 后面通常意味着分配比非 GC 语言快一点。

# php - CodeIgniter $this->input->post() 数组

> ID：13869458
> 
> 赞同：0
> 
> 时间：2012-12-13T22:14:51.573
> 
> 标签：php, codeigniter

我很好奇为什么当我 print_r($this->input->post()) 时，它会打印一个数组，然后在它之后有 1。这是它打印的内容：

```
Array ( [username] => lilmousiee [birthdate] => 1992-04-26 [gender] => 1 [password] => 66lah66lab [password2] => 66lah66lab [pin] => 2323 [pin2] => 2323 [email] => mouseywings@live.com [email2] => mouseywings@live.com [region] => 1 [dtype] => air [dname] => Mattyco [dgender] => 1 [terms] => [recaptcha_challenge_field] => 03AHJ_VutHNI6hK3M_trpE-n4Qr9V5wWSH10p8hmQjrYVLeWf65ylIDva5XdH78uGED5KCsMx8tp3FHZ6p1xTllyrdSP7nEbnSILQ9CDqrxoD2pit5o9T9Cowy06_O6XLLM22fvH_5ICqoYrmI-o-P8dGCal0fNKuSohgvFU03FmgbhuYTDjJ_xUA [recaptcha_response_field] => asdfsadf [submit] => Register [search] => [type] => usersitems ) 1 
```

为什么在数组之后打印“1”？我什至没有输入...并且在注册按钮之后没有输入字段的值为 1...“搜索”和“类型”键到底是什么？

我的 HTML 的最后一部分：

```
 <legend>Terms of Use</legend>
    <div id="terms">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris vitae turpis ut sem tristique luctus. Sed tincidunt consequat tristique. Mauris laoreet vestibulum aliquam. Ut enim tortor, aliquet at faucibus sed, venenatis eget tellus. Praesent velit nisl, bibendum a dignissim nec, hendrerit non lacus. Fusce dapibus pharetra molestie. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris vitae turpis ut sem tristique luctus. Sed tincidunt consequat tristique. Mauris laoreet vestibulum aliquam. Ut enim tortor, aliquet at faucibus sed, venenatis eget tellus. Praesent velit nisl, bibendum a dignissim nec, hendrerit non lacus. Fusce dapibus pharetra molestie. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris vitae turpis ut sem tristique luctus. Sed tincidunt consequat tristique. Mauris laoreet vestibulum aliquam. Ut enim tortor, aliquet at faucibus sed, venenatis eget tellus. Praesent velit nisl, bibendum a dignissim nec, hendrerit non lacus. Fusce dapibus pharetra molestie. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris vitae turpis ut sem tristique luctus. Sed tincidunt consequat tristique. Mauris laoreet vestibulum aliquam. Ut enim tortor, aliquet at faucibus sed, venenatis eget tellus. Praesent velit nisl, bibendum a dignissim nec, hendrerit non lacus. Fusce dapibus pharetra molestie. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.</p>
    </div>
    <?php echo form_checkbox(array('name' => 'terms')); ?> Accept Terms of Use
    <div class="row clearfix">
        <?php
          echo recaptcha_get_html($public_key);
        ?>
    </div>
</fieldset>
<?php echo print_r($array); ?>

<div class="row clearfix"><?php echo form_submit('submit', 'Register'); ?></div>
<? echo form_close(); ?> 
```

我只是无法将 $this->input->post() 数组传递给验证函数。这是我的库文件夹中的 MY_Form_validation.php：

```
class MY_Form_validation extends CI_Form_validation {
    private $post;

    public function __construct($params = array()) {
        foreach($params as $param) {
        parent::__construct($param['config']);
$this->post = $param['post'];
        }

    }
} 
```

是否有理由将“1”打印为 $this->post 值...何时应该保存数组的键和值？这就是我传递参数的方式：

```
$this->load->library('MY_Form_validation', array('config' => '', 'post' => $this->input->post())); 
```

但是当我输入 print_r($this->post) 时，它只打印“1”..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:37:52.580

这是因为`$this->input->post()`是一个对象，而不是字符串或数组。它打印出 1 因为该对象存在并且具有属性。如果它不存在或为空，它将打印 0。它只是布尔返回值的数字表示。

正如有人提到的那样，如果这样做，`var_dump($this->input->post())`您将不会出现“1”字符。

要获取字段的值，请在括号中指定字段名称：

```
$recaptcha_data = $this->input->post('recaptcha_challenge_field'); 
```

另一个澄清；您可以`$this->input->post()`像这样使用 ' 的返回值：

```
if ($this->input->post()) 
{
    // do stuff if post array exists
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-07T06:26:32.717

这是因为你用过

```
<?php echo print_r($array); ?> 
```

print_r() 将打印数组并返回 1。Echo 将在打印您可以使用的数组后显示此 1

```
<?php print_r($array); ?> 
```

# android - 如何链接到特定的偏好组

> ID：13869460
> 
> 赞同：1
> 
> 时间：2012-12-13T22:14:59.033
> 
> 标签：android, sharedpreferences, android-preferences, preferenceactivity

**背景：**
我有一个带有 3 个偏好组的preference.xml，分别称为 GroupA、GroupB 和 GroupC，每个组都有许多项目。我可以开始我的选项意图，它显示了我的 3 个组，单击每个组会给出子项。这工作得很好。

当我从我的主要活动开始偏好意图时，我可以传递一些额外的信息，如下所示。

```
Intent intent = new Intent(this, Options.class);
intent.putExtra("pg","GroupB");
startActivity(intent); 
```

在 Options 类的 onCreate 例程中，读取额外的信息，如下所示：

```
String sPrefGroup = intent.getStringExtra("scr"); 
```

**问题：**
如何指示 Options 类显示选定的 PreferenceGroup，而不是从 Preferences XML 的根目录开始

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:47:50.907

简单的解决方案是制作一个名为preferences_groupb.xml 的preferences.xml 文件的副本，它只包含我想要显示的首选项

然后在 Options.class 我使用类似于以下的代码：

```
Intent intent = getIntent(); 
String sPrefGroup = intent.getStringExtra("pgGroupB");
if (TextUtils.isEmpty(sPrefGroup))
    addPreferencesFromResource(R.xml.preference);
else
    addPreferencesFromResource(R.xml.preference_favorites); 
```

# android - 在列表视图中显示来自外部链接的图像

> ID：13869467
> 
> 赞同：0
> 
> 时间：2012-12-13T22:15:38.697
> 
> 标签：android, listview, imageview

我看过一个关于如何在列表视图中显示 textview 和 imageview 的示例。这些图像文件位于可绘制文件中。

```
public View getView(int position, View convertView, ViewGroup parent) {   

                if(convertView==null){   
                    convertView=LayoutInflater.from(mContext).inflate(R.layout.item, null);   
                    ItemViewCache viewCache=new ItemViewCache();   
                    viewCache.mTextView=(TextView)convertView.findViewById(R.id.text); 
                    viewCache.mTextView1=(TextView)convertView.findViewById(R.id.text1);
                    viewCache.mImageView=(ImageView)convertView.findViewById(R.id.image);   
                    convertView.setTag(viewCache);   
                }   
                ItemViewCache cache=(ItemViewCache)convertView.getTag();   

                cache.mTextView.setText(texts[position]);  
                cache.mTextView1.setText(texts1[position]);
                cache.mImageView.setImageResource(images[position]);
                return convertView;   
            }   
        }   
                    private static class ItemViewCache{   
            public TextView mTextView;  
            public TextView mTextView1;
            public ImageView mImageView;   
        }   

        private  String[] texts=new String[]{"one","two","three"}; 
        private  String[] texts1=new String[]{"wether","tuan","background"};
        private int[] images=new int[]{R.drawable.img1,R.drawable.img2,R.drawable.img3}; 
```

但我所拥有的是这些图片的外部 url 链接：

```
private String[] images=new String[]{"http://ia.media-imdb.com/images/M/MV5BMjMyOTM4MDMxNV5BMl5BanBnXkFtZTcwNjIyNzExOA@@._V1._SX54_CR0,0,54,74_.jpg",
                "http://i.media-imdb.com/images/SF1f0a42ee1aa08d477a576fbbf7562eed/realm/feature.gif",
                "http://ia.media-imdb.com/images/M/MV5BMzk3MTE5MDU5NV5BMl5BanBnXkFtZTYwMjY3NTY3._V1._SX54_CR0,0,54,74_.jpg"}; 
```

我应该使用什么方法来显示这些图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:31:56.950

[您可以使用来自How to load an ImageView by URL in Android? 的](https://stackoverflow.com/questions/2471935/how-to-load-an-imageview-by-url-in-android)steve 代码加载图像？

现在你有两个选择：

1) 使用自定义列表视图（在其中创建一个 xml 文件，显示图像视图、文本视图以及列表中每一行所需的其他项目）

2) 使用仅包含一个 TextView 的标准列表视图（它有一个 CompoundDrawable，它允许您将图像定位到文本的左/右/上/下）

1) 自定义列表视图

为您的行布局创建一个 xml 资源，其中包含一个 textview 和一个 imageview（可能还有其他项目），然后将其显示在您的列表视图中，调用 ImageView 上的 setImageBitmap。有关创建自定义列表视图的详细信息，请参阅[http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/上的教程](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)

2) 标准列表视图

在默认 textview 上调用 setCompoundDrawableWithIntrinsicBounds 为您的图像设置适当的 Drawable。要将您的位图转换为可绘制对象，请参阅[如何在 android 中将位图转换为可绘制对象？](https://stackoverflow.com/questions/2415619/how-to-convert-a-bitmap-to-drawable-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:41:45.483

谷歌有一个很好的例子（包括代码）如何显示来自网络的图像：

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

# netty - 关于netty中的UDP服务器设置

> ID：13869469
> 
> 赞同：1
> 
> 时间：2012-12-13T22:15:52.493
> 
> 标签：netty

现在我正在实现 UDP 服务器来使用 netty 库收集 sflow 数据报。

这是我对 udp 服务器的设置。

```
ChannelFactory factory = new NioDatagramChannelFactory(this.threadPool.getScheduledExecutor());
    ConnectionlessBootstrap bootstrap = new ConnectionlessBootstrap(factory);
    bootstrap.setPipelineFactory(new ChannelPipelineFactory(){
        public ChannelPipeline getPipeline(){
            ChannelPipeline lChannelPipeline = Channels.pipeline();
            lChannelPipeline.addLast("sflowmessagedecoder", new SflowMessageDecoder());
            lChannelPipeline.addLast("handler", new SflowCollectorHandler());

            return lChannelPipeline;
        }
    });

    bootstrap.setOption("receiveBufferSize", 65536);
    bootstrap.bind(new InetSocketAddress(port)); 
```

问题是当我收到一个sflow数据报（大约1300字节长，可以使用wireshark检查）时，netty只读取大约700字节，这可以通过channelbuffer的大小来检查，来自channelbuffer的数据报。

但是，我使用 java.net.* 库，如 DatagramSocket.class 和 DatagramPacket.class，它正确接收 sflow 数据报（大约 1300 字节）。

有人可以帮助我吗？因此，我无法正确解析 sflow 数据报。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:55:20.770

我有同样的问题，尝试使用 Oio 而不是 Nio！（只需将“nio”更改为“oio”，将“Nio”更改为“Oio”。

[http://lists.jboss.org/pipermail/netty-users/2009-June/000891.html](http://lists.jboss.org/pipermail/netty-users/2009-June/000891.html)

现在它正在工作;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:25:45.010

我还没有测试过，但试一试，可能对你有用。

```
org.jboss.netty.channel.FixedReceiveBufferSizePredictorFactory bufferSizePredictor = new FixedReceiveBufferSizePredictorFactory(1300);// or whatever size you require.
serverBootstrap.setOption("receiveBufferSizePredictorFactory",
            bufferSizePredictor); 
```

一旦你设置了这个预测器工厂，它*可能会*有所帮助。

# java - 使用 jersey 时混合使用 jackson core 注解和 jaxb 注解

> ID：13869471
> 
> 赞同：0
> 
> 时间：2012-12-13T22:15:57.910
> 
> 标签：java, json, jaxb, jersey, jackson

我在 jaxb 带注释的类中有一个方法，当且仅当它使用 jersey 1.16 编组为 JSON 时，我想编组一个值 - 它在下面使用 jackson 1.9。我希望使用来自 jaxb 的 @XmlTransient 和来自 jackson 的 @JsonProperty 以如下方式完成此操作：

```
@XmlRootElement
public class SomeClass {  

  // Other XmlElement annotated methods

  @XmlTransient
  @JsonProperty(value="type")
  public String getType(){
      return this.type;
  }

} 
```

...但它似乎根本没有编组。没有遇到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:13:01.177

1.  我需要切换 Jersey 以使用使用 Jackson 的 POJOMappingFeature。
2.  我需要不包含 XmlTransient，否则看起来该元素被忽略了。在某些情况下，我相信 getType 可能仍会在 XML 中被序列化，但是，我在我的实际课程中使用了 propOrder，并且因为 XmlElement 没有在 getType 上声明，所以这不是问题。对于可能出现问题的其他情况，我认为您需要使用 jsonGetType 之类的东西，以确保默认情况下不会对其进行序列化。

# hibernate - 具有空值的多对一单向行未显示

> ID：13869473
> 
> 赞同：0
> 
> 时间：2012-12-13T22:16:18.157
> 
> 标签：hibernate, jakarta-ee, jpa

我有两张桌子

`TableA`，`TableB` 在 hbm.xml 中定义多对一关系

例子：

表A

因为单向关系（仅`TableA`到`TableB`）没有`TableB` `hbm.xml`与相关的条目`TableA`

现在的问题是，`TableA`可能有空**值**，`columnIDFromTableA`当我查询时`TableA`，这些行也应该显示除了来自 TableB 的匹配行之外，但它不起作用。

我的查询是：

```
select column1, column2, tableA.tableB.someColumn from TableA tableA left outer join tableA.tableB as tabB where column1  Like '%someval%' 
```

上面的查询返回零行。

一旦我从查询中删除与 tableB 相关的列（在本例中为 tableA.tableB.someColumn），我就会得到预期的结果

```
select column1, column2 from TableA tableA left outer join tableA.tableB as tabB where column1  Like '%someval%' 
```

以上查询返回预期结果。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:26:18.253

当你这样做

```
tableA.tableB.someColumn 
```

，您在表之间创建一个隐式内部连接。

您已经在表之间建立了左外连接：

```
from TableA tableA left outer join tableA.tableB as tabB 
```

所以你只需要使用你分配给这个左连接实体的别名：

```
select column1, column2, tabB.someColumn 
from TableA tableA 
left outer join tableA.tableB as tabB 
where column1  Like '%someval%' 
```

旁注：如果您系统地使用别名，您的查询将更具可读性：

```
select tableA.column1, tableA.column2, tableB.someColumn 
from TableA tableA 
left outer join tableA.tableB as tableB 
where tableA.column1 like '%someval%' 
```

# mysql - 有什么方法可以检查 MySQL 触发器中的查询是否返回空集？

> ID：13869475
> 
> 赞同：1
> 
> 时间：2012-12-13T22:16:20.807
> 
> 标签：mysql, triggers

将行插入表 A 后，我需要触发器将其中的一些值插入到另一个表 B 中，但前提是表 B 尚未包含具有这种值组合的行。所以这就是我想出的：

```
CREATE TRIGGER upd_manufactorer_in_category AFTER INSERT ON product
FOR EACH ROW 
BEGIN
  DECLARE id_category INT; 
  DECLARE id_manufacturer INT;
  DECLARE id_category_test INT; 

  SET id_category=NEW.id_category;
  SET id_manufacturer=NEW.id_manufacturer;

  SET id_category_test=(SELECT 'id_category'
                FROM category_has_manufacturer
                WHERE 'id_category'=id_category
                AND 'id_manufacturer'=id_manufacturer);

  IF id_category_test IS NULL
  THEN
    INSERT INTO category_has_manufacturer
    SET category_has_manufacturer.id_category = id_category, 
    category_has_manufacturer.id_manufacturer = id_manufacturer;
  END IF;
END 
```

它有效，它将行插入表中。但它不检查它之前是否存在，所以我有很多重复。当然我可以用 DISTICT 查询这个，但这不是我想要在这里实现的。我想要一个只有唯一 (id_category, id_manufacturer) 对的表。有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:30:34.630

你可以做的两件事都会有所帮助。

首先按照 Devart 的建议向表中添加唯一索引/键。

第二件事是，这是一个很好的地方，您可以使用右连接和左连接来获取不存在的数据。我将向您展示该理论，然后您可以将其应用于您的答案作为练习。

**步骤1：**

创建一个名为 test 的数据库。

**第2步：**

在新创建的测试数据库中运行以下两个创建表脚本：

```
CREATE  TABLE `test`.`category_has_manufacturer_A` 
(
      `id_category` INT NOT NULL ,
      `id_manufacturer` INT NOT NULL ,
       PRIMARY KEY (
                     `id_category`, 
                     `id_manufacturer`
                   ) 
);

CREATE  TABLE `test`.`category_has_manufacturer_B` 
(
      `id_category` INT NOT NULL ,
      `id_manufacturer` INT NOT NULL ,
       PRIMARY KEY (
                     `id_category`, 
                     `id_manufacturer`
                   ) 
); 
```

对，所以我们两个表有一个共同的列，我们可以加入。

**第 3 步**：

向 category_has_manufacturer_a 表添加一些数据

```
INSERT INTO `test`.`category_has_manufacturer_a`
(
  `id_category`,
  `id_manufacturer`
)
VALUES
(
    1,
    1
); 
```

很酷，所以*表 A*有一些我们想要添加到*表 B中的数据。*

**第4步：**

让我们对这两个表进行内部连接，然后查看运行以下查询的结果。

```
SELECT
   A.`id_category` AS A_ID_CATEGORY,
   A.`id_manufacturer` AS A_ID_MANAFACTURER,
   B.`id_category` AS B_ID_CATEGORY,
   B.`id_manufacturer` AS B_ID_MANAFACTURER
FROM category_has_manufacturer_a A  
INNER JOIN  category_has_manufacturer_b B
     ON A.`id_category` =B.`id_category`
     AND A.`id_manufacturer`=B.`id_manufacturer` 
```

太好了，因此没有返回数据，因为*表 A*和*表 B*中的行之间没有直接匹配，这是因为内部连接只返回与 JOIN 条件匹配的行。

**第 5 步：**

OUTER JOINS 的力量显露出来。即使它们不匹配，OUTER 连接也会返回数据。在这种情况下，我们将对*表 A*和*表 B*执行 LEFT OUTER JOIN 。由于*表 A*是**LEFT**表，我们要求返回*表 A*中的所有数据，即使它们与*表 B*中的任何内容都不匹配。运行以下查询。

```
SELECT
   A.`id_category` AS A_ID_CATEGORY,
   A.`id_manufacturer` AS A_ID_MANAFACTURER,
   B.`id_category` AS B_ID_CATEGORY,
   B.`id_manufacturer` AS B_ID_MANAFACTURER
FROM category_has_manufacturer_a A  
LEFT OUTER JOIN  category_has_manufacturer_b B
     ON A.`id_category` =B.`id_category`
     AND A.`id_manufacturer`=B.`id_manufacturer` 
```

这将返回一个如下所示的记录集：

```
A_ID_CATEGORY|A_ID_MANAFACTURER|B_ID_CATEGORY|B_ID_MANAFACTURER|
            1|                1|             |                 | 
```

该结果清楚地表明，*表 A*中的行与*表 B*中的行不匹配。

**第 6 步：**

现在我们可以使用步骤 5 中的 SELECT 语句创建一个 INSERT 语句来插入这些不存在的行。运行以下查询：

```
 INSERT INTO category_has_manufacturer_b
 SELECT
   A.`id_category` AS A_ID_CATEGORY,
   A.`id_manufacturer` AS A_ID_MANAFACTURER

 FROM category_has_manufacturer_a A  
 LEFT OUTER JOIN  category_has_manufacturer_b B
     ON A.`id_category` =B.`id_category`
     AND A.`id_manufacturer`=B.`id_manufacturer` 
```

让我们检查插入运行以下查询的内容：

```
SELECT
 `category_has_manufacturer_b`.`id_category`,
 `category_has_manufacturer_b`.`id_manufacturer`
FROM `test`.`category_has_manufacturer_b`; 
```

您将看到一个结果集，其中*表 A*中的行现在插入到*表 B*中。

**第 7 步：**

在这里，我们添加最后一点和部分，我们确保只将新行从*表 A*添加到*表 B*。首先让我们添加更多数据。运行以下查询：

```
INSERT INTO `test`.`category_has_manufacturer_a`
(
   `id_category`,
   `id_manufacturer`
)
VALUES
(
    1,

    2
); 
```

现在再次使用左连接运行查询：

```
SELECT
   A.`id_category` AS A_ID_CATEGORY,
   A.`id_manufacturer` AS A_ID_MANAFACTURER,
   B.`id_category` AS B_ID_CATEGORY,
   B.`id_manufacturer` AS B_ID_MANAFACTURER
FROM category_has_manufacturer_a A  
LEFT OUTER JOIN  category_has_manufacturer_b B
     ON A.`id_category` =B.`id_category`
     AND A.`id_manufacturer`=B.`id_manufacturer` 
```

您将看到一个结果集，其中包含两个表中匹配的行和表 a 中的新行。如果您现在运行插入，您将插入两行并且有主键冲突或者在您的情况下是重复行。

如果您将上面的查询更改为以下内容并运行它：

```
 SELECT
   A.`id_category` AS A_ID_CATEGORY,
   A.`id_manufacturer` AS A_ID_MANAFACTURER,
   B.`id_category` AS B_ID_CATEGORY,
   B.`id_manufacturer` AS B_ID_MANAFACTURER
FROM category_has_manufacturer_a A  
LEFT OUTER JOIN  category_has_manufacturer_b B
     ON A.`id_category` =B.`id_category`
     AND A.`id_manufacturer`=B.`id_manufacturer`
WHERE B.`id_category` IS NULL AND  B.`id_manufacturer` IS NULL 
```

记录集将仅包含*表 A*中的新记录。

将插入语句更改为：

```
INSERT INTO category_has_manufacturer_b
SELECT
   A.`id_category` AS A_ID_CATEGORY,
   A.`id_manufacturer` AS A_ID_MANAFACTURER,
   B.`id_category` AS B_ID_CATEGORY,
   B.`id_manufacturer` AS B_ID_MANAFACTURER
FROM category_has_manufacturer_a A  
LEFT OUTER JOIN  category_has_manufacturer_b B
     ON A.`id_category` =B.`id_category`
     AND A.`id_manufacturer`=B.`id_manufacturer`
WHERE B.`id_category` IS NULL AND  B.`id_manufacturer` IS NULL 
```

当您运行此 INSERT 时，它只会将*表 A*中的新行插入到*表 B*中。

摘要： LEFT 和 RIGHT JOIN 语句可用于对两张表进行比较，并仅返回一张中的新行。如果行是新的，则在尝试从一个表添加到另一个表时，这是一项很棒的技术。它将同时在一行和多行上工作，并且由于它是基于设置的（SQL 擅长于此），因此速度非常快。

我希望您了解正在发生的事情并可以将其应用到您的触发器中。

**提示：** *在触发器中，您可以访问新表，您可以加入该表以确定新行。*

玩得开心！

# c# - 生成正确的 CSV 文件

> ID：13869477
> 
> 赞同：1
> 
> 时间：2012-12-13T22:16:26.320
> 
> 标签：c#, asp.net, csv

我在以编程方式生成正确的 CSV 文件时遇到问题，该文件随后由用户下载并在我的 ASP.NET 项目中的 excel 中打开。Excel 似乎可以正确打开文件，但是当我转到“另存为”时，它默认为 Unicode 文本。我知道 CSV 基本上是一个文本文件，但是如果您尝试在 Excel 中创建一个 CSV，保存，然后保存，因为它将默认保存为 CSV 类型。因此，我相信一些额外的东西会与文件一起保存。我已确保 HTTP 标头上下文类型设置为“text/csv”，因此我确信响应对用户来说是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:26:20.687

我们在我工作的地方生成了很多 CSV，我已经注意到了很多。您的文件很有可能很好。

CSV 的问题在于它没有由任何标准定义，因此每个应用程序对其的解释都略有不同。Excel 可能会为任何不是其首选格式的 CSV 文件执行此操作。

也许 Excel 期望 CSV 是 ASCII，并且您在文件中有一个 UTF BOM，这使得它决定制表符分隔的“Unicode 文本”更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:32:58.517

这应该有效：

```
protected void btnDownload_Click(object sender, EventArgs e)
{
    Response.AddHeader("Content-Disposition", "attachment;filename=myfilename.csv");
    Response.ContentType = "text/csv";
    Response.Write("1;computer;1000");
    Response.End();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:22:30.283

您是否查看了文件的二进制转储以确保正在下载的文件与您在本地查看的文件相同？可能使用了不同的行终止符（例如 ），这可能导致 Excel 容错地读入并显示它，但默认将其保存为 unicode 文本。

在 Linux（或 cygwin）系统上，使用“od -a -x”将告诉您文件是如何组成的。

# javascript - 如何将 ADO DataTable 后面的代码（在页面加载时可用）返回到 javascript？

> ID：13869478
> 
> 赞同：1
> 
> 时间：2012-12-13T22:16:26.800
> 
> 标签：javascript, asp.net, datatable, code-behind

在页面加载时，我有可用的 DataTable 结果，我需要将其传回 javascript 进行处理。

我有哪些选择？

1.  使用隐藏字段将数据传回。不确定如何准确，可能会将其转换为 xml/json，然后以这种方式从 javascript 访问它。好像很痛。这种方法没有额外的往返行程。
2.  使用 webmethod/webservice 直接从 javascipt 发出调用，然后取回 DataTable，但是这需要额外的往返，因为我已经在页面加载时提供了 DataTable。
3.  也可以使用可从 .aspx 页面使用的[ASP.NET 内联表达式（即 <% 语法）访问代码中的对象。](http://support.microsoft.com/kb/976112)这种方法没有额外的往返行程。
4.  将 DataTable 转换为 json/xml，然后使用 ASP 的 ClientScript.RegisterStartupScript 使其在其中作为从函数或其他东西返回的字符串可用。听起来很hacky。
5.  将 DataTable/DataSet（或任何实现 IEnumerable 接口的对象）绑定到 ASP 数据控件，例如 DataGrid、DataList、Repeater 等……然后通过一些 CSS 隐藏控件：`#datacontrol {display: none;}`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:25:25.803

如果它只是数组，请参考[this](http://www.codeproject.com/Articles/92600/How-to-pass-ASP-NET-server-side-array-to-client-si)。

如果是自定义对象，IMO 最好通过调用服务器方法。ajax 请求并将它们加载到 javascript 对象中并处理数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T00:32:50.777

正如您已经推理过的那样，您可以通过多种方式来做到这一点。每当我需要这样做时，我都会使用 clientscript.registerclientscriptblock 方法将我的数据写入一个 javascript 变量，然后在页面中使用 javascript 来访问该变量并执行其余的解析。 [例如看这个](http://www.codeproject.com/Articles/19484/Register-Client-script-in-ASP-NET)

您只需使用字符串生成器或您选择的任何内容来调暗包含表值的 javascript 数组并将其传递给页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:37:07.053

我在我的一个 asp.net 应用程序中有同样的要求。我所做的是，我通过使用自定义分隔符（如 :: ;）从 Page_Load() 上的 DataTable 创建了一个字符串变量。等用于行分隔符和列分隔符。然后使用 CSS {display: none;} 将字符串设置为隐藏字段或文本框文本

之后，您可以在 javascript $(document).ready() 块或 javascript pageLoad function() 中获取隐藏字段或 TextBox 的值，如果您希望在每次完整/部分回发时执行它。

获取值并将其解码，就像您在代码隐藏中将 DataTable 编码到字符串中一样，并根据需要对其进行处理。

希望能帮助到你 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T18:16:45.953

在尝试了上述几个选项之后，我发现**#3**（[ASP.NET 内联表达式](http://support.microsoft.com/kb/976112)）是访问 ADO 查询结果（如 DataTable 或 DataSet）的最佳选择，因为它实现最快并且没有额外的回合由于在页面构建期间解决了内联表达式而导致的行程。

我尝试**了#5**（将数据绑定到数据控件，然后将其隐藏），但速度明显较慢，而且我很难找到可以公开 DataTable/DataSet 的所有功能的控件。您可以将记录绑定到一些数据控件，但我发现在转换为转发器控件等时，DataSet/DataTable 附带的许多“好东西”都会丢失。如果您使用功能更全面的 ASP 控件之一来获取更多这些功能，那么您会失去性能，因为这些控件用于读/写和呈现内容以供显示。访问数据并不像我期望的那样简单，因为它在后面的代码中。

我想到了**#4**（通过 ASP 的 ClientScript.RegisterStartupScript 传递数据），但不想序列化/反序列化我需要公开和工作的每个对象，尽管它会出现任何问题。这似乎不是正确的方法。我想这对于更简单的对象会很好。

并且**＃1**（将数据序列化到隐藏字段）与上面的＃4（通过ASP的ClientScript.RegisterStartupScript传递数据）的概念几乎相同，所以我也没有打扰那个。

另一种（第二好的）可能性是做**#2**（使用 webmethod/webservice）正如@Sundeep 和@ron_tornambe 所指出的。但是，此选项为页面请求添加了额外的往返行程，并且由于上述方案已准备好在页面加载时使用 DataTable/DataSet，因此对我来说不是最佳选择。如果不是这样，我会说它等于我的第一选择 #3（ASP.NET 内联表达式），因为您将获得完整的功能对象。

# java - Jackson：使用嵌套对象在对象上序列化为 JSON，将子字段合并到拥有的类中

> ID：13869481
> 
> 赞同：6
> 
> 时间：2012-12-13T22:16:49.050
> 
> 标签：java, json, serialization, jackson

假设我有如下所示的 Java 类：

```
public class A {
    public String name;
    public B b;
}

public class B {
    public int foo;
    public String bar;
} 
```

我想将一个实例序列`A`化为 JSON。我将使用**[杰克逊](http://jackson.codehaus.org/)**`ObjectMapper`的课程：

```
A a = new A(...);
String json = new ObjectMapper().writeValueAsString(a); 
```

使用此代码，我的 JSON 将如下所示：

```
{
    "name": "MyExample",
    "b": {
        "foo": 1,
        "bar": "something"
    }
} 
```

相反，我想注释我的 Java 类，以便生成的 JSON 看起来像这样：

```
{
    "name", "MyExample",
    "foo": 1,
    "bar": "something"
} 
```

*有任何想法吗？*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T22:19:59.933

就个人而言，我认为您最好将结构映射到结构，而不是进行额外的转换。

但是，如果您确实想按照计划进行，只需使用 Jackson 2.x，并`@JsonUnwrapped`在 property 上添加注释`b`。这应该够了吧。

# java - 使用 QShell 停止 AS400 上的守护线程

> ID：13869486
> 
> 赞同：1
> 
> 时间：2012-12-13T22:17:16.307
> 
> 标签：java, daemon, ibm-midrange

我有一个以 comman 开头的 java 程序，`java -jar MyProgram.jar`我可以使用该命令停止 java 程序`java -jar MyProgram.jar stop`。我在同一个 shell 中运行命令时遇到问题，因为之前的程序正在运行，是否有另一种方法可以打开另一个 QShell 或在同一个 shell 中运行另一个命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:51:35.990

Qsh 不支持作业控制，每个会话只能打开一个。

最简单的方法是打开另一个绿屏会话并在其中运行第二个 qsh

请注意，键入 SysReq-2 也会停止当前程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T12:32:18.513

守护程序可能旨在成为长期运行的后台服务。因此，您通常会提交它以在某个批处理子系统中运行。您通常会在另一个会话中对其使用 ENDJOB。

有关他们希望您的作业在此特定系统上运行的位置的详细信息，请咨询您的系统管理员。有多种选择，测试可能与他们希望它在生产中运行的方式不同。

# php - 基于数据库条目的不同按钮

> ID：13869491
> 
> 赞同：0
> 
> 时间：2012-12-13T22:17:50.923
> 
> 标签：php, mysql, sql, if-statement

我正在这个网站上工作，我想要一个“添加到收藏夹”按钮，如果您已经按下“添加到收藏夹”，它应该显示“从收藏夹中删除”

如果它在 SQL 数据库中，它不会显示“添加到收藏夹”，但只会显示“从收藏夹中删除”。

我认为这与我的“其他”代码有关。

这是我的代码：

```
$tbl_name="favorit";
$usrname=$_SESSION['UserIN'];

mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$sql="SELECT * FROM $tbl_name WHERE email='$usrname' AND type='drink'";
$result=mysql_query($sql);

while($rows=mysql_fetch_array($result)){

$isadmin=$rows['typeid'];

if($isadmin===$idno){
echo '<a class="btn" href="../includes/sletfavoritdrink.php?drink='.$idno.'">Fjern fra favorit</a>';

} else {

echo '<a class="btn" href="../includes/favoritdrink.php?drink='.$idno.'">Tilføj til favorit</a>';

}} 
```

提前致谢！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:34:32.447

由于您的 if() 语句位于迭代结果集的 while() 循环内，因此当没有要迭代的结果集时，这两个条件都不会运行。因此，如果用户没有最喜欢的饮料，那么查询将返回一个空结果集，并且 while 循环永远不会运行一次迭代。

您实际上是在这样做：

```
foreach row in the set {
    if condition then
        branch 1
    else
        branch 2
} 
```

但是集合中什么都没有，所以 if() 永远不会运行。你可以这样做：

```
$result = mysql_query($sql);
if (mysql_num_rows($result)) {
    // user has a favorite, show "remove" button
} else {
    // user doesn't have a favorite, show "add" button
} 
```

另请注意，不推荐使用 mysql_* 函数。您应该使用 mysqli 或 PDO。

# javascript - 持续访问 Google Calendar API

> ID：13869494
> 
> 赞同：2
> 
> 时间：2012-12-13T22:17:53.353
> 
> 标签：javascript, node.js, google-api, google-calendar-api

如何请求访问用户的日历*一次*，然后查询事件而无需再次请求访问？只要不被撤销，是否有可以授予连续访问权限的访问密钥？

我目前在运行[express](http://expressjs.com/) + [mongodb](http://www.mongodb.org/)的 nodejs 应用程序中使用[google-calendar](https://github.com/berryboy/google-calendar)模块。

下面的示例显示了用于发出 OAuth 请求并重定向回应用程序的部分代码。这很好用。不过，我想要的是一旦我有权访问，就能够随时查询用户的事件。这将在一个预订应用程序中使用，一旦用户注册了他们的公共谷歌日历，其他人就可以看到他们的可用性。

我查看了[Google Calendar API](https://developers.google.com/google-apps/calendar/)文档，但无法弄清楚我需要的持续访问需要什么。

**配置**：

```
var GoogleCalendar = require('google-calendar');
var google_calendar = new GoogleCalendar.GoogleCalendar(config.google.clientId, config.google.clientSecret, 'http://localhost:3000/authentication'); 
```

**显示路线**：

```
app.get('/display', function(req, res) {

    // redirect user to Google Authentication
    var access_token = req.session.access_token;
    if(!access_token) {
            req.session.authReturn = req.url;
            return res.redirect('/authentication');
    }

    google_calendar.listCalendarList(access_token, function(err, calendarList) {
            // do something with the calendar events...
    }

    ... 
```

**验证路由**：

```
app.all('/authentication', function(req, res){

    // Redirect the user to Google's authentication form 
    if(!req.query.code){

        google_calendar.getGoogleAuthorizeTokenURL(function(err, redirectUrl) {
            if(err) return res.send(500,err);
            return res.redirect(redirectUrl);
        });
    }
    // Get access_token from the code
    else {
        google_calendar.getGoogleAccessToken(req.query, function(err, access_token, refresh_token) {

            if(err) return res.send(500,err);

            req.session.access_token = access_token;
            req.session.refresh_token = refresh_token;

            return res.redirect(req.session.authReturn);
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:43:42.397

使用 Oauth 2.0 离线访问参数。详情请见：

[https://developers.google.com/accounts/docs/OAuth2WebServer#offline](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)

# outlook - 时事通讯的前景有问题

> ID：13869495
> 
> 赞同：0
> 
> 时间：2012-12-13T22:18:05.170
> 
> 标签：outlook, newsletter, spacing

我在 Outlook 中存在额外间距的问题，您可以在附加的图像上看到我以红色突出显示。我在这张图片中使用了 p

代码用于此图像

```
<p style=" width:125; height:125; margin:0px; padding:0px 10px 0px 10px; float:right; line-height:125px; "><img src="http://hmsdesignz.com/newsletter/6of6/images/icon.jpg" alt="" width="125" height="125" hspace="0" vspace="0" border="0" align="right"  style="display:block;"/></p> 
```

![在此处输入图像描述](../Images/57e7c89c42ec09940bca860f90db4e9d.png)！

请告诉我如何删除这个额外的间距

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:07:52.030

需要更多代码来查看它如何与周围的 html 交互。

您正在使用`<p>`标签，我会避免这样做。图像本身应位于表格单元格中。

像这样的东西：

```
<table width="600" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
    <td width="500" height="70" bgcolor="#959595">
your sign-off text here
    </td>
    <td width="100" height="70"  bgcolor="#757575">
<img src=""... style="display:block;">
    </td>
  </tr>
  <tr>
    <td width="600" height="70" colspan="2" bgcolor="#252525">
footer
    </td>
  </tr>
</table> 
```

# objective-c - NSMutableOrderedSet 的意外行为

> ID：13869497
> 
> 赞同：2
> 
> 时间：2012-12-13T22:18:08.757
> 
> 标签：objective-c, nsset

使用 NSMutableOrderedSet，我得到了意想不到的行为。

我在索引 0 处设置了一个对象。在下一次调用中，我读出了索引 0 处的对象。为什么我返回的指针与我刚刚插入的指针不一样？

```
- (void)setRecentObject:(SomeObject *)recentObject
{
    // self.activeQueue is a viable instance of NSMutableOrderedSet

    [[self activeTileQueue] insertObject:recentObject atIndex:0];
    SomeObject *whatIJustInserted = [[self activeTileQueue] objectAtIndex:0];

    DebugLog(@"set url at zero: %@, and read back url at zero: %@",[recentObject someDescription], [whatIJustInserted someDescription]);

} 
```

在我看来，在此方法结束时，recentObject 应该 == whatIJustInsereted——然而，在我的日志记录语句中以及在设置断点后评估指针时，对象都是 SomeObject 的不同实例。关于 NSMutableOrderedSet，我有什么不明白的地方吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T00:44:11.333

这没有按预期运行的原因是接收器 activeTileQueue（NSMutableOrderedSet 实例）已经包含该成员。

虽然我特别寻求使用集合而不是数组，因为我不希望插入任何对象的重复项，但我对在这种情况下如何进行插入的假设是不正确的。我假设如果该集合已经包含我试图插入的成员，而不是重新插入，该成员将重新定位到在 -insertObjectAtIndex 中传递的索引。这是不正确的。

如果接收器已经包含该成员，则不会重新插入或重新排序。简而言之，什么也没有发生。为了获得最初想要的行为，我必须删除原始成员并重新插入它，或者在 NSMutableOrdered 集合上使用另一种方法来重新定位/交换集合内的索引，例如：

```
NSIndexSet *replacementSet = [NSIndexSet indexSetWithIndex:[[self activeTileQueue] indexOfObject:recentObject]];
[[self activeTileQueue] moveObjectsAtIndexes:replacementSet toIndex:0]; 
```

# javascript - TypeScript requirejs 加载外部模块的问题

> ID：13869498
> 
> 赞同：3
> 
> 时间：2012-12-13T22:18:10.347
> 
> 标签：javascript, requirejs, typescript

我对 game.ts 文件编译成的 game.js 代码有问题：

```
var GameObjects = require("./GameObjects") 
```

我已经将我的页面 index.html js 导入设置为：

```
<script language="javascript" src="javascripts/require.js" type="text/javascript"> </script>
<script language="javascript" src="javascripts/jquery-1.8.2.min.js" type="text/javascript"> </script>
<script language="javascript" src="ts/GameObjects.js" type="text/javascript"> </script>
<script language="javascript" src="ts/game.js" type="text/javascript"> </script> 
```

这是chrome中的错误：

```
Uncaught ReferenceError: exports is not defined GameObjects.js:82
Uncaught Error: Module name "GameObjects" has not been loaded yet for context: _. Use require([]) http://requirejs.org/docs/errors.html#notloaded 
```

有什么想法的朋友吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:25:23.040

我不确定手动编辑 JavaScript 文件的想法从何而来。如果您使用`--module amd`标志编译 TypeScript，则不需要编辑 JavaScript 文件，因为`import`语句将被转换为`require`语句。

您在页面上需要的唯一脚本标记是：

```
<script src="javascripts/require.js" data-main="ts/game.js"></script> 
```

一旦 require.js 被加载，它就会加载 game.js，每当它遇到一个`require`语句（这是你`import`在 TypeScript 文件中的语句）时，它就会加载那个脚本，然后执行代码。

`import`您可以通过在 TypeScript 文件中添加语句来加载 jQuery 和 GameObjects 以及任何其他模块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T00:14:14.047

`data-main`您的 require.js`script`标记中没有属性。请仔细阅读[RequireJS 文档](http://requirejs.org/docs/start.html)。

简而言之：您应该`ts/GameObjects.js`从顶级`require`调用加载，您将其放入`data-main`属性中指定的文件中。例如（来自文档）：

```
<!DOCTYPE html>
<html>
    <head>
        <title>My Sample Project</title>
        <!-- data-main attribute tells require.js to load
             javascripts/main.js after require.js loads. -->
        <script data-main="javascripts/main" src="javascripts/require.js"></script>
    </head>
    <body>
        <h1>My Sample Project</h1>
    </body>
</html> 
```

然后在`javascripts/main.js`（实际上，您可以随意调用它，只要它与您放入的内容相匹配`data-main`），调用`require`并加载您的模块，然后对它们做任何您想做的事情：

```
require(["ts/GameObjects.js", "ts/game.js"], function(GameObjects, Game) {
  ... use 'GameObjects' and 'Game' here ...
}); 
```

请记住，`ts/GameObjects.js`您`ts/game.js`需要将代码包装在`define()`调用中，以便将它们解释为模块。

希望有帮助。

# extjs - EXTJS 关闭一个窗口

> ID：13869499
> 
> 赞同：10
> 
> 时间：2012-12-13T22:18:12.267
> 
> 标签：extjs, extjs4, extjs4.1

我有一个窗口。我在使用位于窗口右上角的默认关闭按钮时遇到了一些问题。因此，我正在考虑禁用该关闭按钮并添加一个关闭按钮，以便当用户单击时将禁用/删除窗口。删除/关闭窗口的代码是什么。

Window定义如下；

```
Ext.define('MyApp.view.MyWin', {
    extend: 'Ext.window.Window',
    alias: 'widget.mywin',
...... 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-13T22:55:06.747

只是`close()`。

工作[示例](http://jsfiddle.net/87DgZ/)：

```
new Ext.window.Window({
    title: 'A window',
    closable: false, // hides the normal close button
    width: 300,
    height: 300,
    bbar: [
        {
            text: 'Close',
            handler: function () { this.up('window').close(); }
        }
    ],
    autoShow: true
}); 
```

# c# - Microsoft.DirectX.AudioVideoPlayback 程序不工作

> ID：13869502
> 
> 赞同：0
> 
> 时间：2012-12-13T22:18:32.733
> 
> 标签：c#, .net, audio, video, directx

我正在尝试编写一个简单的程序，我将在另一个程序中使用它来使用 Microsoft.DirectX.AudioVideoPlayback.dll 文件播放音频和视频文件。我有下面列出的代码，因为它不必非常复杂。我遇到的问题是......好吧，该程序什么都不做。甚至主窗口都没有出现，我不知道为什么。我正在使用 .Net 4.0，DirectX DLL 版本说它是 1.0.2902.0。我尝试将音频和视频文件的初始化移动到不同的地方（具体是加载事件和按钮按下事件）。在按钮按下事件中，表单加载，但只要我按下按钮，程序就会挂起。没有错误或任何东西。有人知道这里发生了什么吗？如果有人对播放音频和视频文件有更好的想法，我'

```
using Microsoft.DirectX.AudioVideoPlayback;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace MediaPlayer
{
    public partial class Player : Form
    {
        Audio derp;
        Video herp;        
        public Player()
        {
            InitializeComponent();
            this.derp = new Audio("<Audio File Name>");
            this.herp = new Video("<Video File Name>");
            this.herp.Owner = this.panel1;            
        }
        private void btnPlayPauseStop_Click(object sender, EventArgs e){            
            switch(((Button)sender).Text){
                case "Play":
                    if (!herp.Playing)
                        herp.Play();
                    break;
                case "Pause":
                    if (!herp.Paused)
                        herp.Pause();
                    break;
                case "Stop":
                    if (!herp.Stopped)
                        herp.Stop();
                    break;
            }
        }
        private void Player_Load(object sender, EventArgs e)
        {            

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T12:54:04.927

我一直在使用它来制作我自己的“Media Player Classic”克隆

请务必在 32 位模式下调试：项目菜单 --> {项目} 属性 ... --> 构建 --> 平台目标 = x86

对于视频，我不加载音频（它会自动完成）。所以不要同时使用两者，只使用需要的一个（视频或音频）

接下来是确保面板可见且大到可以看到（检查“new Video(...)”之后的大小）

# android - 协助为应用选择云服务器

> ID：13869505
> 
> 赞同：0
> 
> 时间：2012-12-13T22:18:55.730
> 
> 标签：android, .net, ios, cloud

我正在制作一个需要与另一台移动设备通信文本和图像（总计 < 100 kb / 传输）的应用程序。由于我是软件开发的新手，我正在寻求帮助来选择一种在线服务，该服务使我能够托管服务器并实现设备之间的数据交换。因此，这需要存储设备 ID 和 IP，能够搜索在线数据库以找到设备并促进它们之间的信息交换。（Q1。我的方法正确吗？）

根据我的互联网搜索，我意识到我可以选择使用 Amazon 的 EC2、MS Windows Azure、Amazon Web Services、IBM SmartCloud Services、Engine Yard、Google App Engine Heroku、Force.com、Skytap、VMware、Rackspace Cloud、GoGrid 、Enlight 云和惠普云服务。

Q2。我浏览了他们的网站，我意识到他们提供了各种各样的产品。我不明白如何将我的要求与他们提供的内容相匹配。请建议什么服务适用于我的情况。

Q3。根据您的经验，哪种服务最可靠、最经济？

我的朋友将使用 .NET 对服务器进行编程。因此，请相应地建议一项服务。

注意：我是开发软件的新手，我正在寻求指导，以便了解我可以使用什么。如果您指出我的方向，我将很乐意挖掘更多信息。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:11:02.147

对于设备之间的同步和处理这种类型的数据，我个人可以向您推荐[Parse](http://www.parse.com)，它集成在 Android、iOS、OSX、Web 等中，有非常好的文档和示例。

# c# - 根据 objectClass 过滤 DirectoryEntry 对象

> ID：13869507
> 
> 赞同：0
> 
> 时间：2012-12-13T22:18:56.020
> 
> 标签：c#, active-directory, treeview, directoryentry

我使用 WPF TreeView 元素创建了一个 Active Directory 对象浏览器，但我只想将 OU 添加到我的树中。我觉得我已经很接近了，这是迄今为止我的 Item.Expanded 事件处理程序的代码。这一切都有效，但它添加了每个对象，而我想过滤掉非 OU 对象：

```
 private void item_Expanded(object sender, RoutedEventArgs e)
    {
        TreeViewItem item = (TreeViewItem)e.OriginalSource;
        item.Items.Clear();

        DirectoryEntry de;
        if (item.Tag is Domain)
        {
            Domain dom = (Domain)item.Tag;
            de = dom.GetDirectoryEntry();
        }
        else
        {
            de = (DirectoryEntry)item.Tag;
        }

        try
        {
            foreach (DirectoryEntry dirEntry in de.Children)
            {
                TreeViewItem newItem = new TreeViewItem();
                newItem.Tag = dirEntry;
                newItem.Header = dirEntry.Name;
                newItem.Items.Add("*");
            }
        }

        catch (Exception ex)
        {
            //Exception!
            textBox.Text = ex.ToString();
        }
    } 
```

我有类似的东西

```
if (dirEntry.Properties["objectClass"].Value.ToString() == "organizationalUnit") 
```

但这不起作用（objectClass 是一个值数组，因此与字符串比较不起作用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:14:27.957

更一般的方法是使用`DirectorySearcher`：

```
DirectorySearcher ds = new DirectorySearcher(de);
ds.Filter = "(objectClass=organizationalUnit)";
ds.SearchScope = SearchScope.OneLevel;
foreach (SearchResult sr in ds.FindAll())
{
    DirectoryEntry dirEntry = sr.GetDirectoryEntry();
    //your code here
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T22:43:20.553

```
if (dirEntry.Properties["objectClass"].Contains("organizationalUnit")) 
```

得到了我想要的。希望这对其他人有帮助！

# javascript - 如何设计/构建大型模块化移动 Web 应用程序？

> ID：13869508
> 
> 赞同：3
> 
> 时间：2012-12-13T22:19:00.503
> 
> 标签：javascript, mobile, module

## 背景

我需要创建一个可能非常大的**HTML/JS 移动网络应用程序**，该应用程序将作为移动网站交付，并在本地使用**Phonegap**。我目前正在努力确定组织应用程序本身的最佳方式。

基本计划是有许多**模块**，每个模块都侧重于不同的兴趣主题。其中一些模块非常基础（例如，公告/新闻），而另一些则非常复杂（例如，运动：团队球员、赛程表、视频等）。将有一个适用于大多数页面的**侧抽屉式导航**，因此用户可以快速导航到不同的模块。需要有在模块内进行**深度链接的能力。**这些模块将由各种开发人员和供应商创建。

## 单页应用

我看到的大多数**移动解决方案都涉及****Single Pages**，在这种情况下，这对我来说似乎是个坏主意，因为可能会占用大量内存。似乎很难协调模块之间的哈希导航和模块内部分之间的哈希导航。模块开发必须在考虑**应用程序框架**的情况下完成，并限制供应商和开发人员完成工作的方式。另一方面，事情并没有那么频繁地被加载，并且一切都可以轻松地相互通信。

## 多页应用

使用**多个页面**，似乎每个模块都可以使用供应商熟悉的任何技术轻松创建（并且可以快速且廉价地完成）。它会减少内存使用，但也会消除模块通信的能力（我不知道目前我们需要的功能）。我可以看到制作一个每个模块都将用于共同处理各种事件（如记录错误、导航等）的**javascript库。**模块之间的每个应用导航都将是一个新的页面调用，重置**DOM**。如果愿意，每个模块都可以使用单页设计。

# 请帮帮我

那么，对于应该如何设计这样的东西，是否有任何共同的或新的知识？我渴望开始工作，但不想重写可能已经存在的东西。我的推理有什么明显的缺陷吗？我很想听听任何有洞察力的人的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:46:43.363

您的第一步是确定这些要求。

如果您是为自己或您自己的公司这样做，那么请确定这些模块（合作）如何运作。

如果你是为你的雇主做这件事，那么那里的*人*应该知道他们想看到什么，否则，你将如何建造它？

支持多个页面、打开和关闭模块且没有通信的解决方案将需要与负责同时维护多个小部件的框架不同的东西，后者可能通过系统调用或服务进行通信，也可能不通信。

没有办法解决这个问题——为模块构建服务/沙盒/等比将每个模块都视为页面更改（或使它们成为文字页面更改）需要更多的工作。

当你弄清楚你想让你的程序做什么时，开始构建你希望其他人拥有的 API 的想法。
你是要为他们提供一个 API 来构建 UI 组件，还是要让他们随心所欲？

就个人而言，我会避免每个模块更改只是替换 iFrames 的情况，然后最终用户可以在那里做他们想做的任何事情。
同样，我会避免您允许模块创建者在非沙盒环境中运行他们想要的任何情况......对于您的最终用户（或者您，在英国法院）来说，结果很糟糕。但这还不是问题。

首先关心的是*你的平台做什么*。

然后弄清楚你的后端通信会是什么样子，你要为模块创建者提供什么接口，以及你将如何从你的一端获取数据（基于 http 的 API、REST 或无论如何... ...但是如果您还没有的话，请好好解决）。

然后，当你知道你的平台应该做什么，并且你有一个可以很好地服务于各种任务的后端时，弄清楚你要为内容创建者提供什么服务，制作他们的小部件，并上传/从您的服务和沙箱等下载数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:29:13.500

老实说，如果您正在考虑构建任何您认为将是大容量和高复杂性的应用程序，您真的应该考虑进行原生开发，或者至少使用 Appcelerator 之类的东西，将应用程序“编译”为原生代码更好的性能。如果您打算让任意数量的开发人员构建他们自己的 javascript 组件，这些组件可能会或可能不会很好地管理有限的系统资源，那么很快就会遇到应用程序性能问题。

另一方面，如果您只是为了概念验证，并且不介意在获得足够的复杂性时可能不得不大幅重构您的应用程序架构，那么您可能只想简单地使用 Web 应用程序方法.

确实，您还需要考虑与前端架构一样多或更多的后端服务架构。这确实是您在尝试集成其他开发人员的产品时会遇到问题的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:45:46.257

几年前我有一个类似的架构问题需要解决。它不是移动的，但也不是完全基于网络的。目标应用程序是网站和桌面应用程序的混合体，未来有可能成为移动应用程序。

有趣的是，之前有两次尝试创建一个可以在各种情况下使用的框架。问题以及两次尝试都失败的原因是开发人员将其视为用户体验问题空间。他们使用几种不同的技术来接近它，但几个月后就陷入了困境，因为他们事先做出了假设，并在他们的裤子座位上进行了这个项目。

我的方法是完全避开所有 UI 讨论，并专注于可以从任何角度接近的后端架构。为此，我创建了一个具有双向数据传输的 Web 服务，并最终为数学模型提供服务。使用不同技术从各种来源访问该服务：Flash、Unity、Google Earth 插件，最后，从提供良好 HTML 的不相关 Web 架构访问。

我对你的建议是，不要把注意力集中在前端映射上，而要让你的后端正确。一旦你有了一个数据结构，你就可以向外构建，内存管理、单体应用程序与否等几个问题，即一页与多页，几乎都会自行解决。努力创建一个有很多好的接口的优秀 API，你就不会陷入“很多厨师”的坑。另一方面，给一群分散的开发人员足够的绳索，你将永远找不到所有的结在哪里！

最终是否通过基于 HTML5 的技术（例如 Sencha Touch、jQuery Mobile 或 Phonegap）采用原生 API 的决定是一个福音派黑洞，将在未来数月和数年内上演。在某些情况下，原生应用程序可能更加流畅和快速，但资源投资是应该考虑的。另一方面，JavaScript 开发人员潜伏在各个角落，而且并不短缺。

# java - jBullet - 6DOFConstraint 剧烈振荡

> ID：13869512
> 
> 赞同：1
> 
> 时间：2012-12-13T22:19:14.363
> 
> 标签：java, physics-engine, bulletphysics, bullet, jbullet

我制作了一个简单的多循环蛇身。我在每个身体之间有一个**6DOFConstraint**，角度是通过增加/减少旋转的上限和下限来控制的，从而改变角度。

绕水平轴旋转效果很好，但是当绕**垂直轴旋转时，一旦达到大约****1.05rads**的角度，两个物体就会剧烈振动。

 **屏幕截图可以在这里找到，其中的描述更详细地介绍了我所做的事情：

[http://www.youtube.com/watch?v=OQu-YyxLvbw](http://www.youtube.com/watch?v=OQu-YyxLvbw)

以下屏幕截图显示了蛇的“头部”在约束仍然存在的情况下线性分离，以尝试消除发生碰撞问题的可能性：

[http://www.youtube.com/watch?v=6wso6HDjqXA](http://www.youtube.com/watch?v=6wso6HDjqXA)

我尝试了以下技术来解决问题，但都没有奏效：

*   将恢复（弹性）设置为非常低——同样的情况
*   将线性阻尼和角度阻尼都设置为 0
    到 1 之间的值范围——同样的情况
*   将角度设置为从大于 1.05 开始 - 发生同样的情况。
*   继续增加超过 1.05 的角度，看看是否平静下来——相反的情况会发生，它会变得更加猛烈。
*   试穿单关节——同样的情况
*   检查深度渗透 - 不存在
*   线性分离两个物体以排除碰撞问题，但保持关节相同——同样发生。
*   将蛇（除了头部以外的所有部分的质量 = 0f）漂浮在地面上以消除地面相互作用 - 也会发生同样的情况
*   在锁定位置关闭重力 - 行为延迟到 1.43rads
*   增加蛇的大小（比例），因为众所周知，jBullet 在较小的项目上存在渲染问题——没有变化。
*   尝试将身体更改为胶囊形状 - 没有变化**

# powershell - PowerShell IE9 ComObject 在导航到网页后具有所有空属性

> ID：13869518
> 
> 赞同：4
> 
> 时间：2012-12-13T22:20:03.973
> 
> 标签：powershell, internet-explorer-9

我有一个 PowerShell 脚本，它导航到我们 Intranet 上的（可能）经典 ASP 页面，以停止在我们的服务器上运行的 Windows 服务，作为该服务部署过程的一部分（并在部署新文件后重新启动它）。它运行良好，直到我们最近升级到 IE9。这是脚本。

```
# Open service page in IE
$ie = new-object -comobject InternetExplorer.Application
$ie.visible = $true
$ie.navigate($serviceUrl)
while($ie.busy) { start-sleep 1 }

# Stop service
$ie.Document.getElementById("dropDownActionList").value = "Stop"
$ie.Document.getElementById("buttonTakeAction").click()
while($ie.busy) { start-sleep 1 } 
```

现在，当我运行脚本时，它成功启动了 IE，但抛出以下错误：

```
You cannot call a method on a null-valued expression.
At C:\Projects\ABC\Scripts\Deploy.ps1:85 char:28
+ $ie.Document.getElementById <<<< ("dropDownActionList").value = "Stop"
    + CategoryInfo          : InvalidOperation: (getElementById:String) [], RuntimeException
    + FullyQualifiedErrorId : InvokeMethodOnNull 
```

当我在 PowerShell 中进行调查时，我发现如果我创建 IE ComObject，它首先具有有效的属性，但是一旦我导航到服务控制页面，所有属性都是空的（几乎就像 ComObject 消失了一样？ ）。例如，之前`HWND`属性有一个有效值，但现在它是 null（`$ie.hwnd -eq $null`返回 true）。当我导航到该页面时，PowerShell 中没有显示错误。

我查看了一些[类似的](https://stackoverflow.com/questions/12733143/powershell-system-comobject-document-property-no-longer-works-under-ie-9) [问题](https://stackoverflow.com/questions/6065359/powershell-ie9-and-getelementbyid)，但第一个问题与我的情况不符（在我的情况下该`Document`属性为 null），而对于后一个问题，IE9 默认为 Intranet 站点的兼容模式。我保存了 ASP 页面并通过[w3c 验证器](http://validator.w3.org/)运行它，它抛出了一些错误（尽管与我试图处理的元素无关）。不幸的是，我无法解决这些问题。其他网站似乎没有这个问题。对问题可能是什么有任何怀疑以及有关解决方法的建议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T06:51:45.467

我刚刚完成了这个……有点。在我关闭 IE 中的保护模式之前，我看到了相同的行为。这似乎与从一个安全区域提交到下一个安全区域有关。所以.. 假设您的原始页面位于 Internet 区域中，并且启用了保护模式，您提交到受信任区域或 Intranet 或其他任何地方的页面，看起来 COM 上下文丢失了。大概是故意的。我将尝试修复这些区域，并保持保护模式开启。

希望这可以帮助。

编辑：如果您在提升模式下运行 powershell（以管理员身份运行），这也不是问题

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-25T12:44:45.113

另外：http: [//msdn.microsoft.com/en-us/library/bb625962.aspx](http://msdn.microsoft.com/en-us/library/bb625962.aspx)

这个问题是由 Internet Explorer 8 以来的完整性级别引起的。这也是应用程序以管理员身份运行良好的原因。

由于 IE-8 在“低完整性”模式下运行，因此无法从脚本中自动执行 IE。这是因为脚本以属于“中等完整性”模式的用户身份运行。安全设计是这样的，它可以发送从中等到低完整性的指令，但不能接收从低到中等完整性的数据。

**更新：**这是一个工作示例，如何在不更改任何设置的情况下执行此操作。它取回丢失的 com-Object。

```
 function ConnectIExplorer() {
    param($HWND)

    $objShellApp = New-Object -ComObject Shell.Application 
    try {
      $EA = $ErrorActionPreference; $ErrorActionPreference = 'Stop'
      $objNewIE = $objShellApp.Windows() | ?{$_.HWND -eq $HWND}
      $objNewIE.Visible = $true
    } catch {
      #it may happen, that the Shell.Application does not find the window in a timely-manner, therefore quick-sleep and try again
      Write-Host "Waiting for page to be loaded ..." 
      Start-Sleep -Milliseconds 500
      try {
        $objNewIE = $objShellApp.Windows() | ?{$_.HWND -eq $HWND}
        $objNewIE.Visible = $true
      } catch {
        Write-Host "Could not retreive the -com Object InternetExplorer. Aborting." -ForegroundColor Red
        $objNewIE = $null
      }     
    } finally { 
      $ErrorActionPreference = $EA
      $objShellApp = $null
    }
    return $objNewIE
  } 

$HWND = ($objIE = New-Object -ComObject InternetExplorer.Application).HWND
$objIE.Navigate("https://www.google.com")
$objIE = ConnectIExplorer -HWND $HWND 
```

# php - echo 中的 php 代码...如何管理它？

> ID：13869525
> 
> 赞同：0
> 
> 时间：2012-12-13T22:20:51.097
> 
> 标签：php, html, mysql

我正在尝试执行以下操作。这不起作用。但是我怎样才能让它工作呢？我想用一个 php 循环填充一个表。

```
echo "<table>";
echo    "<thead>";
echo        "<tr>";
echo            "<th scope=\"col\"> Column1 </th>";
echo            "<th scope=\"col\"> Column2 </th>";
echo            "<th scope=\"col\"> Column3 </th>";
echo        "</tr>";
echo    "</thead>";
echo    <tbody>
echo        <tr>
echo            <?php while($row = MySQL_fetch_array($result)) { ?>
echo                <?php $link = $row['mirlyn'];?>
echo                <td><?php echo(htmlentities($row['data1'])); ?></td>
echo                <td><?php echo(htmlentities($row['data2'])); ?></td>
echo                <td><?php echo(htmlentities($row['data3'])); ?></td>
echo            <?php}?>
echo        </tr>               
echo    </tbody>
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T22:22:41.460

拆分 php 并像往常一样编写 HTML。当你需要在 PHP 中输​​出一些东西时，打开一个标签并做你需要做的事情

IE

```
<table>
    <tr><?php echo $something ?></tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:24:29.457

使用下面的代码它应该工作！

```
 <table>
        <thead>
            <tr>
                <th scope="col"> Column1 </th>
                <th scope="col"> Column2 </th>
                <th scope="col"> Column3 </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <?php while ($row = MySQL_fetch_array($result)): ?> 
                    <?php $link = $row['mirlyn']; ?>
                    <td><?php echo(htmlentities($row['data1'])); ?></td>
                    <td><?php echo(htmlentities($row['data2'])); ?></td>
                    <td><?php echo(htmlentities($row['data3'])); ?></td>
                <?php endwhile; ?>
            </tr>               
        </tbody>
    </table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:24:36.457

如果您想构建一个稍后回显的 HTML 字符串，您可以使用这样的[字符串连接](http://php.net/manual/en/language.operators.string.php)-

```
$html = '<table>';

while($row = MySQL_fetch_array($result)){
  $html .= '<tr>';
  $html .= '<td>' . $someData . '</td>';
  $html .= '</tr>';
}

$html .= '</table>';
echo $html; 
```

您只需要将最终字符串回显一次，但每次迭代另一个结果时，您只需将其附加到字符串的末尾即可。在 PHP 中，字符串连接是用点字符完成的。

```
stringOne.stringTwo 
```

会给你

```
stringOnestringTwo 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-13T22:22:36.007

您可以使用串联来执行此操作：

```
echo "               <td>" . htmlentities($row['data1']) . "</td>"; 
```

或者，您主要输出 HTML 并仅在必要时放入 PHP。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-13T22:23:24.570

这是一个示例数据库查询表

```
$accounts = $currentMember->retrieve_all_accounts(); //Same error in instructor source file as I had in last assignment. 

    /* Loop through Accounts */
    while($account = mysqli_fetch_assoc($accounts)) {
        // Retrieve Balance
        $bankaccount = new Bankaccount($account['BankAccountID']);
        $bankaccount->connection = $conn;
        $balance = mysqli_fetch_assoc($bankaccount->retrieve_current_balance());

        echo '<tr>' . "\n";
        echo "\t" . '<td class="account_number">' . $account['BankAccountID'] . '</td>' . "\n";
        echo "\t" . '<td class="account_balance">$' . number_format($balance['CurrentBalance'], 2) . '</td>' . "\n";
        echo '</tr>' . "\n";
    } 
```

# url - “file://”路径是 URL 吗？

> ID：13869526
> 
> 赞同：8
> 
> 时间：2012-12-13T22:20:52.053
> 
> 标签：url, path, uri

我有时会看到人们将文件系统路径（POSIX/Windows）称为 URI 和 URL。我不是文件系统爱好者，但我还没有找到与我对 URL 格式的理解相冲突的文件系统路径。也就是说，当然，假设它包含方案名称（例如 file://localhost/path/to/file.txt）。

文件系统路径绝对是 URI——我的意思是，不是——所以每个将文件系统路径称为 URI 的人都在安全区域内。但是称它们为 URL 是否安全？

如果 URL 是由单个（非过时的）RFC 定义的，而不是由六个专门的 RFC 组成，我就不必问这个问题了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T01:12:00.727

`file`是一个[注册的 URI 方案](http://www.iana.org/assignments/uri-schemes.html)（用于“主机特定的文件名”）。

它链接到[RFC 1738](http://www.rfc-editor.org/rfc/rfc1738.txt)，称为“统一资源定位器 (URL)”，`file`其中[指定](https://www.rfc-editor.org/rfc/rfc1738#section-3.10)：

> `file`URL 采用以下形式：
> 
> ```
> file://<host>/<path> 
> ```

所以是的，`file`URI 就是 URL。

然而，从 URI 到 URL、URN 和“其他”（如`data`）的细分无论如何都没有用。FWIW，[WHATWG URL 规范](http://url.spec.whatwg.org/#goals)试图对所有类型的 URI 的术语“URL”进行标准化（即使是那些今天不是 URL 的，遵循 RFC）。W3C 说明“ [URI、URL 和 URN：澄清和建议 1.0”](http://www.w3.org/TR/2001/NOTE-uri-clarification-20010921/#uri-partitioning)试图总结有关术语的混淆：

> 涵盖 URI 架构、语法、注册等的文档主体（RFC 等）跨越了古典时期和当代时期。精通 URI 事务的人倾向于以似乎可以互换的方式使用“URL”和“URI”。在这些专家中，这不是问题。但在整个互联网社区中，确实如此。人们不相信 URI 和 URL 在他们（显然）执行的文档中表示相同的含义。[…]

# c++ - 如何将字符串数组从 C 和 Fortran 传递到 Fortran？

> ID：13869528
> 
> 赞同：5
> 
> 时间：2012-12-13T22:20:54.300
> 
> 标签：c++, c, fortran, fortran-iso-c-binding

我正在尝试将字符串数组从 C 传递到 Fortran 子例程，以及从 Fortran 传递到同一个 Fortran 子例程。我已经成功地从 C 和 Fortran 传递了单个字符串（即一维字符数组）。但是，我遇到了字符串数组的问题。我在 Fortran 端使用 ISO C 绑定，理想情况下我希望这在调用端尽可能无缝。

我已经阅读了一些相关的问题和答案。有些（即[this](https://stackoverflow.com/a/4084190/692970)和[this](https://stackoverflow.com/a/10164862/692970)）只是“使用 ISO C”而没有进一步的细节，这没有多大帮助。[这个答案](https://stackoverflow.com/a/8208960/692970)非常有帮助（对[不同问题的](https://stackoverflow.com/a/5609853/692970)类似答案），但仅适用于单个字符串，其中似乎 c_null_char 在单个 Fortran 字符串中被识别。如果没有两个单独的例程，我无法弄清楚如何处理数组案例。

我目前拥有的是一个 C 例程，我想从以下位置传递字符串数组 ( `string`)：

```
#include <iostream>

extern "C" void print_hi_array(char input_string[][255]);

using namespace std;

int main() {

  char string[3][255] = {"asdf","ghji","zxcv"};   
  print_hi_array(string);

  return 0;
} 
```

并且，一个类似的 Fortran 例程：

```
program main
  implicit none
  call print_hi_array( (/"asdf", "ghji", "zxcv"/) )
end program 
```

到目前为止，这是我为接收端所拥有的：

```
subroutine print_hi_array(input_string) bind(C)
  use iso_c_binding, only: C_CHAR, c_null_char

  implicit none

  character (kind=c_char, len=1), dimension (3,255), intent (in) :: input_string
  character (len=255), dimension (3) :: regular_string
  character (len=255) :: dummy_string
  integer :: i,j,k

  write (*,*) input_string

  do j = 1 , 3
    dummy_string(:) = c_null_char
    k = 1
    do i = 1 + (j-1)*255, j*255,1
      if (input_string(i) .ne.  c_null_char) then
        write (*,*) "i ",i,j, input_string(i)
        dummy_string(k:k) = input_string(i)
      endif
    k = k +1
    enddo
    regular_string(j) = dummy_string
  enddo

  write (*,*) regular_string

end subroutine print_hi_array 
```

这适用于 C 函数；我得到这个输出：

```
 asdfghjizxcv
 j=           1
 i            1           1 a
 i            2           1 s
 i            3           1 d
 i            4           1 f
 j=           2
 i          256           2 g
 i          257           2 h
 i          258           2 j
 i          259           2 i
 j=           3
 i          511           3 z
 i          512           3 x
 i          513           3 c
 i          514           3 v
 asdf   ghji   zxcv 
```

但是，当它通过 Fortran 完成时，我会胡说八道：

```
asdfghjizxcv@O,B�@(P,B�]B]6(P,B�@ ....... 
```

这种方法似乎没有`c_null_char`。

**那么，如何编写一个 Fortran 子例程来接收来自 C 和 Fortran 的字符串数组？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T22:43:34.893

如果声明的字符串比其存储的文本长，则 Fortran 使用空格填充字符串的其余部分。它不是零分隔的，声明的长度存储在隐藏变量中。它不包含 c null char，因此您正在读取一些垃圾（缓冲区溢出）。当 tlit 打印带有 \000 的字符串时，Fortran 应该打印的内容是标准未定义的，并且取决于实现。

特别是，您还将一个维度为 3 的 character(4) 数组传递给一个需要更多数据的子例程（255 个字符，尽管我不知道索引顺序）。只传递了指针，所以我认为它无法检查。

可以通过这种方式在数组构造函数中定义字符串的长度：

```
[character(255) :: "a","ab","abc"] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T14:28:18.870

我实际上看到了两种方法来做到这一点。或者，您使用 C 编写一个循环并将字符串一个接一个地传递给 Fortran，就像您之前所做的那样。或者，如果您想要传递整个数组*并且*想要使用相同的例程处理 Fortran 和 C 数组，则必须制作 C 字符串数组的适当副本。下面是一个有效但没有经过太多测试的示例：

```
extern "C" void print_array_c(int nstring, char input_string[][255]);

using namespace std;

int main() {

  char string[3][255] = {"asdf","ghji","zxcv"};    
  print_array_c(3, string);

  return 0;
} 
```

请注意，我还传递了字符串的数量，以便该示例可以处理各种大小的数组。（然而，假设字符串的长度为 255 个字符。）在 Fortran 大小上，需要一个例程来将其转换为 Fortran 字符串。一种可能的可视化可能是：

```
module arrayprint_module
  use, intrinsic :: iso_c_binding
  implicit none

  integer, parameter :: STRLEN = 255

contains

  !> The printing routine, works with Fortran character arrays only.
  subroutine print_array(strings)
    character(len=STRLEN), intent(in) :: strings(:)

    integer :: ii

    do ii = 1, size(strings)
      write(*,*) ii, strings(ii)
    end do

  end subroutine print_array

  !> Converts C string array to Fortran string array and invokes print_array.
  subroutine print_array_c(nstring, cptr) bind(C)
    integer(c_int), value :: nstring
    type(c_ptr), intent(in), value :: cptr

    character(kind=c_char), pointer :: fptr(:,:)
    character(STRLEN), allocatable :: fstrings(:)
    integer :: ii, lenstr

    call c_f_pointer(cptr, fptr, [ STRLEN, nstring ])
    allocate(fstrings(nstring))
    do ii = 1, nstring
      lenstr = cstrlen(fptr(:,ii))
      fstrings(ii) = transfer(fptr(1:lenstr,ii), fstrings(ii))
    end do
    call print_array(fstrings)

  end subroutine print_array_c

  !> Calculates the length of a C string.
  function cstrlen(carray) result(res)
    character(kind=c_char), intent(in) :: carray(:)
    integer :: res

    integer :: ii

    do ii = 1, size(carray)
      if (carray(ii) == c_null_char) then
        res = ii - 1
        return
      end if
    end do
    res = ii

  end function cstrlen

end module arrayprint_module 
```

请注意，您从 C 传递的数组必须是连续的才能正常工作，并且我假设字符 (kind=c_char) 与通常应该兼容的 fortran 字符类型兼容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T15:21:12.153

我想出的一种方法是修改调用 Fortran 例程以*也*使用 ISO C 绑定：

```
program main

  use iso_c_binding, only: C_CHAR
  implicit none
  character (kind=c_char, len=255), dimension (3) :: input_string

  input_string = (/ "asdf", "ghji", "zxcv" /)

  call print_hi_array(input_string)

end program 
```

# django - Django render_to_response 显示原始文本

> ID：13869530
> 
> 赞同：1
> 
> 时间：2012-12-13T22:20:57.563
> 
> 标签：django

我是 Django 新手，我正在尝试创建一个简单的 html 框架来验证一切是否正常。一切正常（服务器正在运行并加载文件），但是当我输入 HTML 代码时，它显示为原始文本，而不是正确呈现。

我的views.py如下

```
def home(request):
        return render_to_response('index.html')
```

我的'index.html'如下

```
<!DOCTYPE html >

    <html>
        <head>
        <meta charset="UTF-8">
            <title> awesome </title>
        </head>
        <body>

        </body>
    </html>
```

我应该怎么做才能让它正确渲染？（仅显示“真棒”）

编辑就这个问题而言，错误在于我将原始代码保存为 html。当我选择此选项时，它添加了代码以使 html 呈现它看起来像原始输入。

故事的寓意：确保您在文本编辑器中进行编辑并手动更改扩展名

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T06:33:20.873

1）去除<title>标签中的空格

2）并在您的 urls.py 文件中添加波纹管代码，无需映射视图，您也可以从 url 呈现 html 页面

```
 (r'^home/$', 'django.views.generic.simple.direct_to_template',
        {'template': 'index.html'}), 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T22:44:57.120

几个问题。。

1：标签内的空格是什么？

`< title >`是无效的。它必须是`<title>Foo</title>`这就是你看到“html”的原因。

2：即使标题标签写得正确，标题标签也不会呈现，所以你会得到一个空白页。如果你想显示“awesome”——你需要把它写在body标签里面。

```
<body>awesome</body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T22:33:44.680

您需要做的第一件事是创建一个“基础”模板，以便其他模板可以从中扩展。您通常会调用它，`base.html`但您可以使用您想要的名称。您还需要创建`blocks`扩展模板可以使用：

**base.html**

```
<!DOCTYPE html >

<html>
    <head>
    <meta charset="UTF-8">
        < title > awesome < /title >
    </head>
    <body>
    {% block content %}{% endblock %}
    </body>
</html> 
```

`base.html`然后，你必须从你的扩展`index.html`并使用`content`我们创建的块：

**索引.html**

```
{% extends "base.html" %}

{% block content %}
{% endblock %} 
```

此时，`index.html`将完全一样，`base.html`因为您没有在`content`块内显示任何内容。使用如下数据更新您的视图：

**视图.py**

```
def home(request):
    data = {'name': 'YourName', 'age': 25}

    return render_to_response('index.html', data) 
```

现在，再次更新您的`index.html`：

**索引.html**

```
{% extends "base.html"%}

{% block content %}
    <p>My name is {{ name }}</p>
    <p>I'm {{ age }} years old</p>
{% endblock %} 
```

不要忘记阅读精美[教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/)。

# javascript - 从 KineticJS 库调用我的函数之一时未定义的 Firebug 参考错误

> ID：13869532
> 
> 赞同：0
> 
> 时间：2012-12-13T22:21:07.370
> 
> 标签：javascript, html5-canvas, kineticjs

我正在使用 KineticJS 库将一些图像绘制到画布上，并使它们可拖动。我已经下载了该库的副本，以便可以对其进行一两次微调，以便将其与我正在制作的画布游戏一起使用。

我改变的 KineticJS 库中的函数是

```
drawHit: function(){} 
```

最初，该函数如下所示：

```
drawHit: function() {
    this.hitCanvas.clear();
    Kinetic.Container.prototype.drawHit.call(this);
}, 
```

但是我添加了几个对我编写的函数的调用：

```
drawHit: function() {
    this.hitCanvas.clear();
    drawGameElements();
    drawDescriptionBoxes(imageObj);
    Kinetic.Container.prototype.drawHit.call(this);
}, 
```

我这样做的原因是因为事先在画布周围拖放图像时，当检测到点击时画布将被完全清除，并且只会重绘图像 - 我还显示了其他一些东西每次移动图像时重新绘制画布时我想保留在那里的画布。（这些东西是由我添加到这个函数的两个函数调用绘制的）

但是，当我现在在浏览器中查看我的页面时，我收到了 Firebug 控制台错误：

```
ReferenceError: drawDescriptionBoxes is not defined

drawDescriptionBoxes(imageObj); 
```

在线上

```
drawDescriptionBoxes(imageObj); 
```

（我已将其添加到函数中）

函数“drawDescriptionBoxes”在名为“drawdescriptionboxes.js”的文件中定义，代码如下：

```
function drawDescriptionBoxes(imageObj){
/*  CanvasRenderingContext2D.prototype.drawDescriptionArea = function(x, y, width, height, radius, stroke){
        if(typeof stroke == "undefined" ){
            stroke = true;
        }
        if(typeof radius === "undefined"){
            radius = 5;
        }
        this.beginPath();
        this.moveTo(x + radius, y);
        this.lineTo(x + width - radius, y);
        this.quadraticCurveTo(x + width, y, x + width, y + radius);
        this.lineTo(x + width, y + height - radius);
        this.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
        this.lineTo(x + radius, y + height);
        this.quadraticCurveTo(x, y + height, x, y + height - radius);
        this.lineTo(x, y + radius);
        this.quadraticCurveTo(x, y, x + radius, y);
        this.closePath();
        if(stroke){
            context.stroke();
        }
    } */
    var assetsDescriptionBoxImage = new Kinetic.Image({
        image: imageObj,
        width: 120,
        height: 70,
        x: 70,
        y: 400
        draggable: false
    });

    var liabilitiesDescriptionBoxImage = new Kinetic.Image({
        image: imageObj,
        width: 120,
        height: 70,
        x: 300,
        y: 400
        draggable: false
    });

    var incomeDescriptionBoxImage = new Kinetic.Image({
        image: imageObj,
        width: 120,
        height: 70,
        x: 540,
        y: 400
        draggable: false
    });

    var expenditureDescriptionBoxImage = new Kinetic.Image({
        image: imageObj,
        width: 120,
        height: 70,
        x: 750,
        y: 400
        draggable: false
    });

} 
```

我从

```
window.onload = function(){} 
```

在我的 index.html 页面中

```
drawdescriptionboxes(); 
```

我还有另外几个函数也以完全相同的方式在这里被调用，它们没有问题。

有人知道为什么我会收到此参考错误吗？

**编辑**

我还收到一个语法错误：在 drawDescriptionBoxes.js 第 30 行的属性列表后缺少 }：

```
function drawDescriptionBoxes(imageObj){
/*  CanvasRenderingContext2D.prototype.drawDescriptionArea = function(x, y, width, height, radius, stroke){
        if(typeof stroke == "undefined" ){
            stroke = true;
        }
        if(typeof radius === "undefined"){
            radius = 5;
        }
        this.beginPath();
        this.moveTo(x + radius, y);
        this.lineTo(x + width - radius, y);
        this.quadraticCurveTo(x + width, y, x + width, y + radius);
        this.lineTo(x + width, y + height - radius);
        this.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
        this.lineTo(x + radius, y + height);
        this.quadraticCurveTo(x, y + height, x, y + height - radius);
        this.lineTo(x, y + radius);
        this.quadraticCurveTo(x, y, x + radius, y);
        this.closePath();
        if(stroke){
            context.stroke();
        }
    } */
    var assetsDescriptionBoxImage = new Kinetic.Image({
        image: imageObj,
        width: 120,
        height: 70,
        x: 70,
        y: 400
        draggable: false
    });

    var liabilitiesDescriptionBoxImage = new Kinetic.Image({
        image: imageObj,
        width: 120,
        height: 70,
        x: 300,
        y: 400
        draggable: false
    });

    var incomeDescriptionBoxImage = new Kinetic.Image({
        image: imageObj,
        width: 120,
        height: 70,
        x: 540,
        y: 400
        draggable: false
    });

    var expenditureDescriptionBoxImage = new Kinetic.Image({
        image: imageObj,
        width: 120,
        height: 70,
        x: 750,
        y: 400
        draggable: false
    });

    context.drawImage(sources[34], 70, 400, 120, 70);
    context.drawImage(sources[35], 300, 400, 120, 70);
    context.drawImage(sources[36], 540, 400, 120, 70);
    context.drawImage(sources[37], 750, 400, 120, 70);

} 
```

第 30 行是以下行：

```
draggable: false 
```

在

```
var assetsDescriptionBoxImage = new Kinetic.Image({
        image: imageObj,
        width: 120,
        height: 70,
        x: 70,
        y: 400
        draggable: false
    }); 
```

所以我不知道这是否会导致另一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:26:22.730

`developer tools`在 Chrome 或firefox 中使用`firebug`(F12) 在脚本中设置断点并逐步执行函数调用，并确保在调用之前包含并调用您的库（函数已定义）。

`drawdescriptionboxes`你应该在第一次调用之前尝试复制/粘贴你的函数定义，一旦它工作正常，你应该把它放在函数定义在函数调用之前被调用的地方。

# c# - 如何在表格中执行简单的多选 ASP.NET MVC4

> ID：13869533
> 
> 赞同：0
> 
> 时间：2012-12-13T22:21:20.927
> 
> 标签：c#, javascript, asp.net-mvc, entity-framework

这是我的看法：

```
@model Affiliate

<div class="box paint color_16">
<div class="title">
    <h4><i class="icon-tasks"></i><span>@Model.CompanyName's Commissions</span> </h4>
</div>
<div class="content top ">
    <div class="subtitle">
        @Html.ActionLink("Void", "DeleteInvoice", new { commList = "??", affId = Model.Id }, new { @class = "btn" })
        @Html.ActionLink("Create Invoice", "CreateInvoice", new { commList = "??", affId = Model.Id }, new { @class = "btn" })
        @Html.ActionLink("Pay", "PayInvoice", new { commList = "??", affId = Model.Id }, new { @class = "btn" })
    </div>

    <table class="table table-striped table-hover">
        <tr>
            <h3>Commissions</h3>
        </tr>
        <tr>
            <td></td>
            <td>Amount</td>
            <td>Status</td>
            <td>Action</td>
        </tr>
        @foreach (var item in Model.Commissions)
        {
            <tr>
                @if (item.Status == ViewBag.PaymentStatus || ViewBag.PaymentStatus == "All")
                {
                    <td>@Html.CheckBox("commId", new { value = item.Id })</td>
                    <td>@Html.DisplayFor(x => item.PayoutAmount)</td>
                    <td>@Html.DisplayFor(x => item.Status)</td>
                }
            </tr>
        }
    </table>
</div> 
```

我想要做的是当我点击顶部的操作链接时，从表中获取所有已检查的项目，并将该 id 列表传递给控制器​​逻辑。我假设视图模型可能是解决方案，如下所示：

```
 public Affiliate affilite { get; set; }
 public List<int> selectedItems { get; set; }
 etc. 
```

但是如何将选定的项目放入该 VM selectedItems 容器中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:40:46.400

根据您的评论，您似乎不是在寻找最“正确”的答案，而只是一个快速而肮脏的“我将如何做”的答案。如果您只想传递列表，则可以像这样设置控制器操作：

```
public ActionResult MyAction(int[] id)
{
    ...
} 
```

或者，您似乎表明它是强类型到具有包含 List 的属性的视图模型（我会缩短属性的名称，您会在一秒钟内看到原因）。

在 javascript 中，最简单的做法是使用 jQuery 在您的超链接上绑定一个单击事件，该事件会获取已检查项目的列表并将其附加到查询字符串中。

```
$("#myLink").click(function()
{
    var url = "site.com/action?";
    var ids = $(".table").find("input:checked");

    ids.each(function()
    {
        url += "id=" + $(this).val() + "&"
    });

    window.location = url;
}); 
```

基本上，您想创建一个长查询字符串，其中操作参数的名称一遍又一遍地重复，它标识一个数组。它看起来像这样（id 用于 MyAction 中的 int[] id）：

```
id=15&id=20&id=25&id=30&.... 
```

然后在构建查询字符串后，将用户重定向到该 url。然后 MVC 应该能够将其绑定到一个数组，并且一切就绪。

无论如何，这基本上就是这个想法；我编写的语法和 javascript 可能有问题，所以不要复制我的代码并期望它按原样工作 - 我是在脑海中写下的。如果您的操作绑定到视图模型，则需要将查询字符串中的参数设置为模型属性的名称：

```
selectedids=1&selectedids=2&selectedids=3... 
```

或者，如果数组是对象的属性，它是模型的属性......

```
model.selectedids=1&model.selectedids=2&model.selectedids=3... 
```

你只需要玩弄它一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:35:04.443

在表单标签内使用 html 检查（您也可以使用帮助程序）并将模型发布到发布操作。MVC 会自动序列化模型

# jquery - jQuery - 将排序的内容附加到 div 在 IE9 和 Safari 中不起作用

> ID：13869534
> 
> 赞同：1
> 
> 时间：2012-12-13T22:21:24.633
> 
> 标签：jquery, internet-explorer, sorting, random, safari

使用 jQuery 1.5.2，我给一个 div 的孩子一个随机的位置，代码在 Firefox、Chrome 和 Opera 中有效，但在 IE7-9 和 Safari 中无效。怎么了？

第二个问题，当页面被多次刷新时，随机模式不是很随机，有时相同的数字会停留在第一位等。有什么提示可以增加脚本的随机性吗？

PD：jQuery 小提琴是 1.6.4

[http://jsfiddle.net/6cqtP/](http://jsfiddle.net/6cqtP/)

**脚本**

```
jQuery(document).ready(function() {
              jQuery('#postscript-top-inner').each(function(){
            var parent = jQuery(this);
            var content = parent.find('.block-nodeblock');

            content.sort(function(a){
                  var new_position = parseInt( Math.random()*4 );
                  return( new_position );
            })
            .appendTo(parent);       

      });
}); 
```

**HTML**

```
<div id="postscript-top-inner">
 <div class="block-nodeblock">
1
 </div>
  <div class="block-nodeblock">
2
 </div>
  <div class="block-nodeblock">
3
 </div>
  <div class="block-nodeblock">
4
 </div>
  <div class="block-nodeblock">
5
 </div>
  <div class="block-nodeblock">
6
 </div>
  <div class="block-nodeblock">
7
 </div>
  <div class="block-nodeblock">
8
 </div>
  <div class="block-nodeblock">
9
 </div>
  <div class="block-nodeblock">
10
 </div>
  <div class="block-nodeblock">
11
 </div>
  <div class="block-nodeblock">
12
 </div>
  <div class="block-nodeblock">
13
 </div>
  <div class="block-nodeblock">
14
 </div>
  <div class="block-nodeblock">
15
 </div>
  <div class="block-nodeblock">
16
 </div>

</div> 
```

**CSS**

```
#postscript-top-inner{width: 460px; margin:0 auto}
.block-nodeblock{width:50px; padding:25px 0; background: gray; margin:0 10px 10px 0; text-align:center; float: left} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:44:22.913

你可以`compareFunction`用

```
function() {
    return 0.5 - Math.random();
} 
```

* * *

[Array.sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)函数通过传递的`compareFunction(a, b)`. 这工作如下

> 如果 compareFunction(a, b) 小于 0，则将 a 排序到比 b 低的索引。
> 
> 如果 compareFunction(a, b) 返回 0，则 a 和 b 保持不变，但对所有不同元素进行排序。
> 
> 如果 compareFunction(a, b) 大于 0，则将 b 排序到比 a 低的索引。

您的比较函数总是返回值`>= 0`。它说`A >= B` *和* `B >= A`。根据随机值，它主要发生在`A > B`. 因此，这是不可能的`B >= A`。由于这个悖论，一些[Array.sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)的浏览器实现根本不对数组进行排序。

为了进一步提高随机性，您可以实现[Fisher-Yates 算法](https://stackoverflow.com/a/2450976/344480)。

# grid - Kendo UI Grid：页面上是否可以有多个网格而不会发生元素 ID 冲突？

> ID：13869535
> 
> 赞同：4
> 
> 时间：2012-12-13T22:21:36.230
> 
> 标签：grid, kendo-ui

页面上是否可以有多个 Kendo UI 网格？编辑：网格必须同时可见。

对于我过去尝试过的一些 jQuery 网格，页面上不可能有多个网格实例，因为网格分配给其子 DOM 元素的 ID 没有以网格 ID 为前缀；页面上有多个网格会创建两个或多个具有相同 ID 的 DOM 元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:37:24.330

是的，我已经在我的项目中实现了这个，没有你提到的问题。我在一页中有 3 个网格。

更新：基本小部件元素具有您自己分配的任何 ID。至于子元素，它们不使用 ID，而是使用数据属性。我还没有在我拥有的整个网格中看到一个 ID。这是一个表格标题在我的一个网格中的外观示例：

```
<thead class="k-reorderable" data-role="reorderable">
<tr>
<th class="k-header" data-title="Service name" data-field="Name" role="columnheader" data-role="sortable">
<a class="k-link" href="#">Service name</a>
</th>
<th class="k-header" data-title="Lasting time" data-field="LastingTime" role="columnheader" data-role="sortable">
<a class="k-link" href="#">Lasting time</a>
</th>
<th class="k-header" data-title="Price" data-field="Price" role="columnheader" data-role="sortable">
<a class="k-link" href="#">Price</a>
</th>
</tr>
</thead> 
```

数据行使用 UID 来区分自己，这是另一个示例：

```
<tr class="k-alt" role="row" data-uid="f2cd4f59-8492-4616-8fc6-5d65ec466437">
<td role="gridcell">Test</td>
<td role="gridcell">01:00:00</td>
<td role="gridcell">500</td>
</tr> 
```

我建议您只需查看[http://demos.kendoui.c​​om](http://demos.kendoui.com/) / 上的示例并检查网格生成的 html 以了解更多详细信息。

我认为您不应该真正通过 DOM 直接访问特定的子元素。我建议坚持使用小部件 API，这就是它存在的原因。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:20:12.713

哦耶！我们的页面实际上有数百个。

但更准确地说，我们按需加载其中的大部分。首先看一下 Kendo TabControl，这真的很容易。

这是通过具有动态分配名称的部分加载它们的许多方法中的“一种”。我们甚至有一个使用 GUID 的案例。

```
@using Kendo.Mvc.UI
@model PeopleViewModel
@{
    Layout = null;
}
@(Html.Kendo().Grid<PersonQualificationModel>()
    .Name("QualificationEditGrid_" + Model.PersonId)
    .HtmlAttributes(new { style = "clear: both;" })
... 
```

如果您允许编辑。如果您尝试在多个具有相同类型数据的网格中同时进行编辑，则会发生冲突。在此示例中，如果您尝试同时在不同的网格中编辑两个限定条件，则会导致问题。

编辑：

如果您知道您将拥有 N 个具有相同数据类型的网格，您可以创建 N 个模型并唯一地命名它们的属性，并在每个网格上使用每个不同的模型。这将在一定程度上解决您的碰撞问题。这甚至可能不是您要问的。

# java - 尽管有 550MB 堆，但加载 100MB 文件时出现 OutOfMemoryError

> ID：13869537
> 
> 赞同：4
> 
> 时间：2012-12-13T22:21:42.187
> 
> 标签：java, memory, out-of-memory, heap-memory

以下问题：

1.  我开始我开发的程序（-Xmx550M）
2.  我加载了一个 90 MB 的文件

这个加载是下图中已用堆的峰值。此后，堆大小从 130 MB 增加到 500 MB，尽管只需要 110 MB。

好吧，没问题，烦人，但是还可以。但是，如果我现在启动一个保存过程（大约需要 100 MB），Java VM 会因 java.lang.OutOfMemoryError: Java heap space 异常而崩溃。

![堆大小和已用堆 (-Xmx550M)](../Images/599146b6327f80b1cad03ed94bc0715c.png)

如果我以 750 MB 的堆大小启动应用程序，它可以正常工作。您会看到短暂的峰值，并且工作正常： ![堆大小和已用堆 (-Xmx750M)](../Images/bbd19090ea4cf94884ab6885d96bbf5c.png)

现在我的问题是：为什么我会得到一个 550 MB 堆大小的 OutOfMemoryError？该应用程序只需要 400 MB（在最高峰）！

我不知道如何解决这个问题:(

请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:00:57.033

数据被采样。就在它失败之前它正在使用 400 MB，然后一段时间后它尝试使用更多内存，例如 600 MB，但这没有显示，因为在下一个样本被采集时，OOME 已经发生，你的使用率现在要低得多.

简而言之，您的程序可以比您在图中看到的更快地使用内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:51:21.187

如果你加载 100Mb 的文件，并不意味着这个文件在内存中使用的结构占用了 100M。例如，如果您有 String，那么它的长度也有 4 个字节的开销。

# asp.net-web-api - 为什么即使未在 WebAPI 中定义我的消息处理程序仍在运行？

> ID：13869541
> 
> 赞同：2
> 
> 时间：2012-12-13T22:21:59.763
> 
> 标签：asp.net-web-api

我的配置中有以下设置：

```
routes.MapHttpRoute("NoAuthRequiredApi", "api/auth/", new { id = RouteParameter.Optional } );
routes.MapHttpRoute("DefaultApi", "api/{controller}/{id}", new { id = RouteParameter.Optional }, null, new WebApiAuthenticationHandler()); 
```

**如果我在api/auth**的 url 上发布任何内容，消息处理程序仍会运行并检查 Auth-Token 标头。发生这种情况有什么原因吗？WebApi 路由的配置有什么我应该改变的吗？在向身份验证控制器发出请求时，我显然不希望标头上有任何身份验证令牌，因为那时我正在尝试检索令牌以在其他控制器上使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:18:32.213

您的最顶层路线永远不会被匹配，因为没有指示需要哪个控制器。添加控制器名称作为默认值。（如果不需要，则删除可选的 ID）。

所以：

```
routes.MapHttpRoute(
        name: "NoAuthRequiredApi",
        routeTemplate: "api/auth/",
        defaults: new { Controller = "Auth" }
    ); 
```

# java - Sonatype Nexus 获取最新的 jar-with-dependencies

> ID：13869543
> 
> 赞同：2
> 
> 时间：2012-12-13T22:22:02.443
> 
> 标签：java, maven, jar, nexus

尝试下载具有依赖项的快照 jar 时遇到了一些障碍。通常，Nexus 的 REST API 会为您将“SNAPSHOT”扩展为正确的日期时间戳 - 但是，如果下载具有依赖关系的 jar，则文本会`-jar-with-dependencies`跟随由`SNAPSHOT`. 我不清楚如何将这种不寻常的名称情况传达给 Nexus 的 REST API - 有没有人遇到/解决过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:38:08.247

查看 Nexus 中的神器，发现它的坐标包括一个

```
<classifier>jar-with-dependencies</classifier> 
```

场地。瞧，这正确地卡入了 REST API：http: [//yourdomain.com :8081/nexus/nexus-rrb-plugin/default/docs/index.html](http://yourdomain.com:8081/nexus/nexus-rrb-plugin/default/docs/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:48:29.520

您必须指定分类器参数。版本号之后和扩展之前的那个位总是分类器。分类器是第 4 个 maven 坐标，用于区分各种“附加”工件。附加的工件是 maven 项目构建的主要工件以外的任何东西，通常是 jar 文件。

最常见的例子是：

```
myArtifact-1.0.0.jar
myArtifact-1.0.0-sources.jar 
```

在第二个 jar 中可以找到 java 的源文件。在您的情况下，`jar-with-dependencies`是构建具有所有依赖项的 jar 的 maven 程序集的名称。

# c++ - C++ 程序已停止工作

> ID：13869558
> 
> 赞同：0
> 
> 时间：2012-12-13T22:23:03.637
> 
> 标签：c++, pointers, artificial-intelligence, chatbot

我正在制作一个非常简单的程序，只是一个小聊天机器人 AI 之类的东西，而且我有一些代码，当然是 c++ 用于该程序。我没有收到任何错误，但是当我运行它时会出现一个窗口，说 program.exe 已停止工作，就像它停止响应一样。我的代码是：

```
#include<iostream>
#include<string.h>
#include<cmath>
#include<vector>
#include<ctime>
#include<conio.h>
#include<algorithm>
#include<cstdlib>
using namespace std;

struct strarray{
   char* array[];
};

struct keyword{
   string keywords;
   string responses[];       
};

keyword * dictionary = new keyword[2];
keyword defaultr;

keyword getMatch(string key);
string sconvert(string con);
void init();
string getResp(keyword key);

bool cont=true;

int main(int argc, char* argv[]){
   string input;
   while(cont){
            getline(cin,input);
            cout << getResp(getMatch(input));
            getch();
            getch();
   }
}

string sconvert(string con){
   con.erase(remove_if(con.begin(), con.end(), ::isspace), con.end());
   con.erase(remove_if(con.begin(), con.end(), ::ispunct), con.end());
   return con;
}

void init(){
   srand(time(NULL));
   dictionary[0].keywords="hello";
   dictionary[0].responses[0]="Hello, how have you been?";
   dictionary[0].responses[1]="Hello, have you missed me?";
   dictionary[0].responses[2]="Hey, how's it going?";
   defaultr.responses[0]="That's interesting, tell me more.";
   defaultr.responses[1]="Please, tell me more.";
}

keyword getMatch(string key){
    for(int i=0; i<sizeof(dictionary); i++){
            if(key==dictionary[i].keywords){return dictionary[i];}
    }
    return defaultr;
}

string getResp(keyword key){
   return key.responses[rand() % sizeof(key)];
} 
```

当我运行它时，它会正常打开，但是当我输入一些内容后，它会“停止工作”。有人可以告诉我我需要改变什么，为什么会受到赞赏。

有指针问题吗？还是有什么`rand`？我真的很困惑，希望能得到一些关于如何改进这个程序以便它真正起作用的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:44:06.740

`sizeof(dictionary)`将给出`sizeof(keyword*)`, 可能`4`或`8`, 因此您将遍历字典数组的末尾并终止。

最简单的解决方法：定义一个常量来存储数组长度。

```
const dictionarySize = 2; 
```

并始终使用它。

您还需要更改`struct keyword`为：

```
struct keyword{
   string keywords;
   string responses[3];       
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:37:12.513

首先你有一个无限循环，所以程序应该永远工作..我看了一眼代码，使用 rand() % sizeof(key) 是错误的，响应不是预先确定的，所以你要么将它设置为特定的例如值

```
struct keyword {
    string keywords;
    string responses[2];       
};
rand() % sizeof(key.responses) 
```

或者你让你的结构像这样

```
struct keyword {
    string keywords;
    vector<string> responses;      
};
rand() % key.responses.size()
//After setting the responses by push_back for example 
```

还有其他方法，但这更安全，不需要内存管理......

# php - 符号链接目录

> ID：13869559
> 
> 赞同：0
> 
> 时间：2012-12-13T22:23:12.933
> 
> 标签：php, download, symlink

我可以在我的符号链接上获得眼球吗？

我正在尝试从一个目录下载文件，而该文件实际上存在于另一个目录中。

我有实际的文件和单独的子目录中的符号链接，但两者都位于公共 html 中（两者都可以通过网络访问）。

我已经通过直接访问文件验证了我的（共享 Linux）服务器上的文件和文件位置。

正在创建链接（我使用了 readlink、is_link 和 linkinfo），当我 FTP 进入时我可以看到它。

我相信我可能只是对目录结构有误解。

我把文件放在这里：./testdownload/

我把符号链接放在这里：./testDelivery/

```
<?php
$fileName = "testfiledownload.zip";//Name of File
$fileRepository = "./testdownload/";//Where the actual file lives
$downloadDirectory = "./testDelivery/";//Where the symlink lives
unlink($downloadDirectory . $fileName);  // Deletes any previously exsisting symlink (required)
symlink($fileRepository . $fileName, $downloadDirectory . $fileName); 
$checkLink = ($downloadDirectory . $fileName);
if (is_link($checkLink))
{
    echo ("<br>Symlink reads: " .readlink($checkLink) . "<br>");
    echo ("<br>LinkeInfo reads: " . linkinfo($checkLink));
}
?>
<p><a href="<?php echo ("/testDelivery/" . $fileName); ?>"</a>SymLink</p>
<p><a href="<?php echo ("/testdownload/" . $fileName); ?>"</a>regular link</p> 
```

一切对我来说都是正确的......但链接不起作用。帮助？

最终，我会将源数据放在公共区域之外……这只是为了测试。

（我试图找到一个更好的下载解决方案，而不是分块出因连接不良而失败的 fread。（200-400MB 文件））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:30:11.407

我的问题（似乎）没有提供符号链接的绝对路径。

我已将下面的绝对路径添加到上面的相同代码中，以提供工作副本：

```
<?php
$absolutepath = ( $_SERVER['DOCUMENT_ROOT']);
$fileName = "testfiledownload.zip";//Name of File
$fileRepository = "/testdownload/";//Where the actual file lives
$downloadDirectory = "/testDelivery/";//Where the symlink lives
unlink($absolutepath .$downloadDirectory . $fileName);  // Deletes any previously exsisting symlink (required)
symlink($absolutepath . $fileRepository . $fileName, $absolutepath. $downloadDirectory . $fileName); 
$checkLink = ($absolutepath . $downloadDirectory . $fileName);
if (is_link($checkLink))
{
    echo ("<br>Symlink reads: " .readlink($checkLink) . "<br>");
    echo ("<br>LinkeInfo reads: " . linkinfo($checkLink));
}
?>
<p><a href="<?php echo ("/testDelivery/" . $fileName); ?>"</a>SymLink</p>
<p><a href="<?php echo ("/testdownload/" . $fileName); ?>"</a>regular link</p> 
```

这篇原始帖子是重复的（尽管我直到现在才看到它） [为 PHP 文件创建一个有效的符号链接](https://stackoverflow.com/questions/11112344/create-a-valid-symlink-for-php-file) （但是，为该问题给出的大多数答案都是错误的——但原始发帖人发现了它，并且它起作用了对我来说也是）

# ios - 未调用表视图控制器代码

> ID：13869564
> 
> 赞同：0
> 
> 时间：2012-12-13T22:23:40.250
> 
> 标签：ios, xcode, ios6, xcode4.5

我有一个带有 Web 视图和表视图的应用程序。Web 视图工作正常，但表视图在显示时似乎没有调用`TableViewController.h`代码。我想我错过了某个地方的链接步骤，但我似乎无法弄清楚。

澄清一下，我最初将项目设置为单视图应用程序，但后来手动添加了导航控制器和表视图。

在我手动将表格视图添加到情节提要后，我创建了`TableViewController.h`和`TableViewController.m`，但我不知道如何将代码链接到情节提要中的表格视图。

有人可以解释我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:30:44.587

将您在情节提要中使用的控制器的类设置为`TableViewController`

![在此处输入图像描述](../Images/bf951be018a673aa9d19f6b1e56a26f2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:26:30.217

两种情况：

首先，**如果您将 tableview 添加到标准`UIViewController`**（即，您将 table view 拖到 Interface Builder 中的空白标准视图控制器，并且您的视图控制器的 .h 指定它是 的子类`UIViewController`），那么您必须指定手动设置表格视图的“数据源”和“委托”属性。因此，您应该确保为您的表格视图配置“数据源”和“委托”以引用您的视图控制器。您可以在任一 Interface Builder 中执行此操作（通过选择 tableview，转到最右侧面板中的“Connections Inspector”，然后确保您已指定数据源和委托的出口）：

![在此处输入图像描述](../Images/dc0ec0bca7c6e5d7f9401f417f2aa83b.png)

或在您的子类代码中设置[`dataSource`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableView/dataSource)和[`delegate`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableView/delegate)属性：`UIViewController``viewDidLoad`

```
self.tableView.dataSource = self;
self.tableView.delegate = self; 
```

在这种情况下，您还希望确保也`IBOutlet`为您的 tableview 创建了一个。

* * *

或者，**如果您使用了 a`UITableViewController`**（即您删除了空白视图控制器并将您自己的表视图控制器添加到 Interface Builder 的情节提要中，并确保您的视图控制器是 的子类`UITableViewController`，而不是`UIViewController`），请参阅[Moxy 的答案](https://stackoverflow.com/a/13869645/1271826)。

# c - 使用 AVX 的有符号/无符号整数的最小值

> ID：13869574
> 
> 赞同：0
> 
> 时间：2012-12-13T22:24:37.830
> 
> 标签：c, sse, avx

我正在查看 AVX 指令指南，虽然有 32 位整数值的加载、存储和置换操作，但其他操作（例如确定最小值或最大值）或随机操作仅适用于浮点数和双精度数。

因此，如果我想将这些操作用于 32 位整数，我是否需要将其类型转换为浮点数，然后再将其类型转换回来，或者是否还有其他一些我遗漏的指令？

此外，如果我想在 32 位整数上使用它，洗牌掩码是否与浮点数一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:26:49.043

32B 向量的大部分整数运算都在 AVX2 扩展中（不是最初的 AVX 扩展，它几乎完全是浮点运算）。英特尔最新的[AVX 编程参考](http://software.intel.com/sites/default/files/m/f/7/c/36945)具有完整的详细信息；您可能还想查看英特尔宣布一些细节的[博客文章。](http://software.intel.com/en-us/blogs/2011/06/13/haswell-new-instruction-descriptions-now-available)

不幸的是，您不能使用浮点最小或最大操作来模拟整数数据上的这些操作，因为当解释为浮点数据时，大量整数映射到 NaN 值，并且 NaN 比较的语义不做什么您需要进行整数比较（您还需要处理浮点编码是符号大小的事实，因此负值的顺序是“反转的”，并且 +0 和 -0 比较相等）。

# configuration - 如何定义用于 ZSH 提示的自定义颜色？

> ID：13869575
> 
> 赞同：6
> 
> 时间：2012-12-13T22:24:46.350
> 
> 标签：configuration, zsh, prompt, zshrc

我在配置我的 zsh 提示时遇到了一些困难。具体来说，我希望字体具有由十六进制代码定义的颜色：#87afdf

目前，我已将提示设置如下：

```
PROMPT='%B[%d] 
➞  %b' 
```

我尝试通过以下方式添加颜色：

```
autoload -U colors && colors

PROMPT='%{$fg[#87afdf]%}%B[%d]
➞  %b%{$reset_color%}' 
```

但这只会给我以下胡言乱语：

```
$fg[#87afdf][/Users/gregory]
➞  $reset_color 
```

任何关于如何进行的想法将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2018-04-10T11:03:41.990

您必须使用 256 色调色板。您可以使用以下命令查看 ZSH 中 256 种颜色中每种颜色的数值：

```
for code in {000..255}; do print -P -- "$code: %F{$code}Color%f"; done 
```

bash 也一样：

```
for code in {0..255}; do echo -e "\e[38;05;${code}m $code: Color"; done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T23:13:10.070

除非您使用非常不寻常的终端，否则您不能只使用您想要的任何颜色组合。标准终端仅限于（最多）[256 色调色板](http://www.pixelbeat.org/docs/terminal_colours/)。

zsh 附带的`colors`功能只是允许按名称引用旧的 16 色调色板中的颜色，它无助于使用该范围之外的颜色。

有一个[简单的脚本](https://github.com/sykora/etc/blob/master/zsh/functions/spectrum/)可用，它将设置`$FG`和`$BG`数组以提供一种按数字使用 256 色调色板中的颜色的方法，但无需处理终端处理这些所需的转义序列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-17T11:10:49.040

# Oh-My-Zsh 用户的解决方案

## 如何打印可用颜色

如前所述，您必须使用 256 色调色板。查看可用颜色的最简单方法是使用以下命令（因为 ZSH 在下面使用光谱）：

```
spectrum_ls 
```

它将打印所有可用的颜色

[![在此处输入图像描述](../Images/59f46a08b1fb17f51c73327ad5bc91d6.png)](https://i.stack.imgur.com/C17BK.png)

**...**

[![在此处输入图像描述](../Images/96bde31138d6c48c030bfcda29299d82.png)](https://i.stack.imgur.com/PMYCc.png)

## 如何在 Oh-my-zsh 主题中使用颜色

要在您的主题中使用颜色，您必须编写它`$FG[<0-255>]`，例如`$FG[172]`
**大写可能很重要，因为`$fg[172]`在我的控制台上不起作用！**

## 可能的问题

您的终端可能只支持 8 种颜色而不是 256 种颜色。如果是这样，您将不会在执行后看到所有颜色`spectrum_ls`。
在这种情况下，您必须将终端配置为支持 256 色。

## 资源

[https://dev.to/yujinyuz/custom-colors-in-oh-my-zsh-themes-4h13](https://dev.to/yujinyuz/custom-colors-in-oh-my-zsh-themes-4h13)

# google-apps-script - 替换 Google Doc 表格中的文本以进行表单合并

> ID：13869576
> 
> 赞同：3
> 
> 时间：2012-12-13T22:24:58.043
> 
> 标签：google-apps-script

我正在尝试通过填写表格来制作自动报告。脚本从电子表格的最后一行读出数据。然后将报告制作为 Google Doc。本文档中的一些标签显示了项目应该在哪里。`%meterx%`是为米。

这些可以是图像或文本。对于普通段落，这适用于 type = 段落的第一个循环。但它会跳过表格。我需要`%meterx%`用图像替换表格单元格中的 ，就像我对段落所做的那样，但我被困在代码中以查看表格。

我看到了一些替换文本的方法，但这似乎是用图像替换它的唯一方法。

```
 var totalElements = doc.getNumChildren();
  var el=[]
  for( var j = 0; j < totalElements; ++j ) {
  var element = doc.getChild(j);
  var type = element.getType();

   if (type =='PARAGRAPH'){
      el[j]=element.getText()

      if(el[j]=='%meter3%'){element.removeFromParent();
      var newimage = UrlFetchApp.fetch('http://chart.googleapis.com/chart?chf=bg,s,67676700&chs=280x150&cht=gm&chds=0,10&chd=t:'+row[4]+'&chdlp=b').getBlob();   
      doc.insertImage(j, newimage); 

   if (type =='TABLE'){
      var tablerows=element.getNumRows();
      Logger.log(tablerows);
      for ( var i = 0; i < tablerows; ++i ) {
        var tablerow = element.getRow(0)
        Logger.log(tablerow);   // <--- gives TableRow
      }  /// STUCK !! :) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T04:31:47.477

A`TableRow`包含子元素，类型为`TableCell`，其中也包含子元素。`PARAGRAPH`如果它们是空白或包含文本，则它们是类型。

您可以使用`TableCell`with访问文本`getText()`，但最好先确认单元格包含文本。

下面的代码处理`PARAGRAPH`和`TABLE`元素类型，对于表格，它探索`TABLECELL`元素。我不知道你在用你的数组做什么`el[]`，所以我把它省略了，还注释掉了图像替换代码——相反，我只是记录表的结构和内容以供说明。要完成您的目标，您应该使用与`PARAGRAPH`.

注意：我使用了一些此处未详细说明的辅助函数，它们应该是不言自明的，`getFileByName_()`并且`elementTypeToText_()`.

```
function Q13869576() {
  var folder = "StackOverflow";
  var docname = "Q13869576.gdoc";
  var docId = getFileByName_(folder, docname).getId();

  var doc = DocumentApp.openById(docId);
  var docBody = doc.getActiveSection();

  var totalElements = doc.getNumChildren();
  var el=[]
  for( var j = 0; j < totalElements; ++j ) {
    var element = doc.getChild(j);
    var type = element.getType();

    switch (type) {
      case DocumentApp.ElementType.PARAGRAPH:
        el[j]=element.getText()

        if(el[j]=='%meter3%'){
          Logger.log( "Found tag in paragraph" );
//          element.removeFromParent();
//          var newimage = UrlFetchApp.fetch('http://chart.googleapis.com/chart?chf=bg,s,67676700&chs=280x150&cht=gm&chds=0,10&chd=t:'+row[4]+'&chdlp=b').getBlob();   
//          doc.insertImage(j, newimage);
        }
        break;

      case DocumentApp.ElementType.TABLE:
        var tablerows=element.getNumRows();
        Logger.log(tablerows);
        for ( var row = 0; row < tablerows; ++row ) {
          var tablerow = element.getRow(row)
          for ( var cell=0; cell < tablerow.getNumCells(); ++cell) {
            Logger.log( "Table Row("+row+") Cell ("+cell+")");
            Logger.log(
                  elementTypeToText_(tablerow.getChild(cell).getType())
                  +" with child type "
                  +elementTypeToText_(tablerow.getChild(cell).getChild(0).getType()));
            var celltext = tablerow.getChild(cell).getText();
            Logger.log( "Text is ("+celltext+")" );
          }
        }
        break;
    }
  }
} 
```

这是来自示例文档的日志摘录，其中包含一个带有`%meter3%`标签的单元格的表格：

```
...
Table Row(1) Cell (2)
TABLE_CELL with child type PARAGRAPH
Text is (%meter3%)
... 
```

# php - 无法将 php 日期与 mysql 日期进行比较

> ID：13869578
> 
> 赞同：0
> 
> 时间：2012-12-13T22:25:02.640
> 
> 标签：php, mysql, date, comparison, string-comparison

陷入了一个复杂或愚蠢的问题。我从 mysql 获取查询，然后尝试将日期列与我格式化为相同格式的 PHP 数据进行比较，即“Ymd”它总是导致不匹配，尽管我看到有一个匹配..它得到正确的结果集。

```
<?php

date_default_timezone_set('America/Los_Angeles'); // set timezone to our timezone
$constantTime = time(); // get value of time in constant
$appDate = date("Y-m-d", $constantTime); //that defines php time variable - 
$queryDate = "SELECT * FROM date WHERE date='$appDate'";
$resultDate = mysql_query($queryDate) or die("Sorry Website Under Maintainence");
$recordDate = mysql_fetch_array($resulDate);
if ($appDate == date("Y-m-d", strtotime($recordDate['date']))) {
    echo "MATCH    ";
    $dateID = $recordDate['dateID'];
} else {
    mysql_query("insert into date(date) values('$appDate')")or die("Database write error1");
    $resultDate = mysql_query($queryDate) or die("Sorry Website Under Maintainence");
    $recordDate = mysql_fetch_array($resultDate);
    echo "NO MATCH ";
    $dateID = $recordDate['dateID'];
} 
```

这总是触发else，我尝试了===而不是==，我尝试了strcmp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-14T00:28:23.767

当我假设您正在比较日期时间字段时，您有两种可能性：

**迄今为止的演员阵容：**

```
$queryDate = "SELECT * FROM your_table WHERE date(your_date_field) = date('$appDate')"; 
```

[http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date)

或者

**将您的日期格式修改为与 ISO 兼容：**

```
$appDate = date("Y-m-d H:i:s", $constantTime); //it defines date in format 2015-03-14 15:00:00
$queryDate = "SELECT * FROM your_table WHERE your_date_field='$appDate'"; 
```

另请参阅[此问题](https://stackoverflow.com/questions/13507642/mysql-date-comparison-with-date-format)

# clojure - Clojure 新手 - 命名空间问题

> ID：13869581
> 
> 赞同：4
> 
> 时间：2012-12-13T22:25:12.073
> 
> 标签：clojure

我正在学习 Clojure，到目前为止，我无法理解这个小难题，我敢肯定它是非常基础的。

我有这个文件：

```
(ns cloapp.core
  (:gen-class))

(defn -main
  "I don't do a whole lot ... yet."
  [& args]
  (println "Hello, World!")
  (println "Well Hi there, im a string !")
  (println "Why wont this work !")
  (myFunc "Hiya"))

(defn myFunc [aVar]
    (println aVar)) 
```

如果我尝试运行它，

```
lein run 
```

它抱怨说，

```
Caused by: java.lang.RuntimeException: Unable to resolve symbol: myFunc in this context 
```

但是，如果我从 main 中删除对 myFunc 的调用并执行，

```
lein repl
cloapp.core=> (myFunc "Hiya !")
Hiya !
nil
cloapp.core=> 
```

然后我可以调用它。为什么是这样 ？我假设它与命名空间有关，但阅读它我无法解决。

一个

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T22:32:52.060

myFunc 符号尚未定义，因此 main 找不到它。如果您将 myFunc 的定义移到 main 之上，那么它将起作用。

# ruby - Ruby openssl lib - 为什么 AES-256-CBC 解密会在没有正确 IV 的情况下提供可读数据？

> ID：13869585
> 
> 赞同：2
> 
> 时间：2012-12-13T22:25:31.617
> 
> 标签：ruby, openssl, aes

给定以下脚本

```
require "openssl"
require "securerandom"

key = SecureRandom.random_bytes(32)
iv = SecureRandom.random_bytes(16)

aes = OpenSSL::Cipher::Cipher.new("AES-256-CBC")
aes.encrypt
aes.key = key
aes.iv = iv

crypted = aes.update("a"*50)+aes.final

aes = OpenSSL::Cipher::Cipher.new("AES-256-CBC")
aes.decrypt
aes.key = key
aes.iv = iv

puts aes.update(crypted)+aes.final

aes = OpenSSL::Cipher::Cipher.new("AES-256-CBC")
aes.decrypt
aes.key = key

puts aes.update(crypted)+aes.final 
```

我得到以下输出（例如）：

```
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
���y��f{�K~:y��aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa 
```

我是否需要自己执行这些 CBC 风格的 XOR 操作、块大小处理等？我找不到任何不简单地调用更新函数并传递应该解密的字符串的示例。我已经尝试将 .dup 添加到所有字符串分配以防止就地编辑问题。这里发生了什么？

环境：ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-linux]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T00:29:04.757

IV 的目的是通过分析包含相同数据的多条消息来防止发现密钥。如果您有密钥，它不会掩盖信息。如果没有正确的 IV，密文的第一个块将不正确，但正如您所发现的，后续块将正确解密。IV 保护密钥，而不是数据。

如果您通过 openssl 命令行工具执行类似的加密，您会得到相同的结果（这里我将加密密文中嵌入的 8 字节 IV 替换为 8 个空格字符）：

```
echo "Ruby openssl lib - Why does AES-256-CBC decrypting gives readable data without the correct IV?" | \
openssl enc -aes-256-cbc -salt -pass pass:password | \
perl -pi -e "s/^(.{8})(.{8})/\1        /" | \
openssl enc -d -aes-256-cbc -salt -pass pass:password

▒▒▒▒▒▒t▒8q▒g] -▒▒▒▒▒▒7<s AES-256-CBC decrypting gives readable data without the correct IV? 
```

# sql - PGError：错误：列“recipes.id”必须出现在 GROUP BY 子句中或在聚合函数中使用

> ID：13869586
> 
> 赞同：0
> 
> 时间：2012-12-13T22:25:32.303
> 
> 标签：sql, ruby-on-rails-3, postgresql, heroku

我的数据库中有这个 SQL 查询，这导致 heroku 上的 PostgreSQL 出现问题，导致页面无法加载，并在 heroku 日志中出现上述错误。我正在使用 postgreSQL 9.1.6，所以以前的错误显然已经修复

```
def self.top_countries
joins(:recipes).
  select('countries.*, count(*) AS recipes_count').
  group('countries.id').
  order('recipes_count DESC') 
```

结尾

我不确定如何重构它以使其正常工作。有人可以建议吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:27:13.847

```
def self.top_countries
joins(:recipes).
  select('countries.id, count(*) AS recipes_count').
  group('countries.id').
  order('recipes_count DESC') 
```

这会生成 SQL

```
select countries.id, count(*) AS recipes_count
  from countries
  join recipes on countries.id = recipes.country_id
 group by countries.id
 order by recipes_count 
```

您会注意到 SELECT 中只有 2 列。
不是 Heroku 专家，我怀疑您可以通过明确列出您需要从国家/地区获得的所有列并按完整列列表分组来使其工作，即

```
def self.top_countries
joins(:recipes).
  select('countries.id, countries.name, countries.other, count(*) AS recipes_count').
  group('countries.id, countries.name, countries.other').
  order('recipes_count DESC') 
```

可能有一种更简洁的方法可以将原始答案（顶部）与另一个连接加入到`top_countries`on`countries.id`以获取`group by`.

# javascript - 将自定义类添加到 wysihtml5 文本编辑器

> ID：13869587
> 
> 赞同：6
> 
> 时间：2012-12-13T22:25:43.037
> 
> 标签：javascript, html, wysiwyg, wysihtml5

我希望能够添加一个按钮来添加我自己的自定义类。我在任何地方的文档中都没有看到这一点，但似乎是一个常见的要求。

例如。

突出显示“一些文本”并按下按钮“自定义类”将添加

`<p class="wysiwyg-custom-class">Some Text</p`>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T00:04:30.170

定义新命令，我的示例基于[ForeColor](https://github.com/xing/wysihtml5/blob/master/src/commands/foreColor.js)：

```
(function(wysihtml5) {

  wysihtml5.commands.setClass = {
    exec: function(composer, command, element_class) {
        element_class=element_class.split(/:/);
        element=element_class[0];
        newclass=element_class[1];
      var REG_EXP = new RegExp(newclass,'g');
    //register custom class
      wysihtml5ParserRules['classes'][newclass]=1;

      return wysihtml5.commands.formatInline.exec(composer, command, element, newclass, REG_EXP);
    },

    state: function(composer, command, element_class) {
        element_class=element_class.split(/:/);
        element=element_class[0];
        newclass=element_class[1];
        var REG_EXP = new RegExp(newclass,'g');
      return wysihtml5.commands.formatInline.state(composer, command, element, newclass, REG_EXP);
    }
  };
})(wysihtml5); 
```

用法：

HTML：

```
<div id="uxToolbar">
   <button data-wysihtml5-command="setClass" data-wysihtml5-command-value="span:my-wysihtml5-custom-class" type="button" title="View HTML" tabindex="-1" class="btn btn-mini">
       My class
   </button>
</div> 
```

如您所见，价值来自两个部分：`element:class`

[演示](http://jsfiddle.net/oceog/nkkek/)

# php - 如何获得一周的第二天？

> ID：13869588
> 
> 赞同：4
> 
> 时间：2012-12-13T22:25:49.483
> 
> 标签：php, date

就像今天是星期四，那么我想使用 php date() 函数显示星期五。例如，下面的代码将显示当前月份但该月的第二天。有效。`<?php echo date("M "), date("d")+1 ?>`

所以我试图通过这个`<?php echo date("l")+1, date("d")+1 ?>`，它愚弄了我:(。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T22:27:21.513

看看[`strtotime`](http://php.net/manual/en/function.strtotime.php)。此外，`l`当使用[`date`](http://php.net/manual/en/function.date.php).

像下面这样的东西应该做你想做的事：

```
date('l', strtotime('+1 day')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:32:40.243

以下表达式为您提供第二天：

```
date('l', time()+3600*24) 
```

# xml - WiX XmlConfig：用于在 XmlConfig 中嵌套 XmlConfig

> ID：13869589
> 
> 赞同：6
> 
> 时间：2012-12-13T22:25:58.857
> 
> 标签：xml, wix, wix3.6, wix-extension

将一个元素嵌套在另一个元素中的目的和/或收获是什么**（除了增加创建/删除属性的可读性）**？ 我所指的示例（我使用的是**WiX 3.6**）：`XmlConfig``XmlConfig`

 **```
<util:XmlConfig ...>
    <util:XmlConfig ... />
</util:XmlConfig> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-14T11:51:01.103

简短的回答：嵌套元素选项的**唯一**目的`<util:XmlConfig>`是能够以更易读的方式向新创建的元素添加/删除属性。所以，这基本上是你的假设。

考虑以下初始 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<cars>
  <car name="ford" type="minivan"/>
  <car name="toyota" type="sedan"/>
  <motos>
    <moto name="honda" model="shadow" type="cruiser" />
  </motos>
</cars> 
```

为了向其中添加另一个`<moto>`，可以使用以下 WiX 片段：

```
<util:XmlConfig Id="elem1" Action="create" ElementPath="cars/motos" File="$(var.XmlFilePath)" Node="element" On="install" Name="moto">
  <util:XmlConfig Id="elem11" ElementId="elem1" Name="name" Value="yamaha" File="$(var.XmlFilePath)" />
  <util:XmlConfig Id="elem12" ElementId="elem1" Name="type" Value="chopper" File="$(var.XmlFilePath)" />
</util:XmlConfig> 
```

因此，XML 文件最终如下：

```
<?xml version="1.0" encoding="utf-8"?>
<cars>
  <car name="ford" type="minivan"/>
  <car name="toyota" type="sedan"/>
  <motos>
    <moto name="honda" model="shadow" type="cruiser" />
    <moto name="yamaha" type="chopper" />
  </motos>
</cars> 
```

这里需要注意几点：

*   该`Action`属性不能在内部`XmlConfig`元素中定义，这是合乎逻辑的 - 它与父元素之一相同
*   `Node`也不能定义属性，因为只允许使用属性
*   奇怪的是你`File`每次都必须指定属性——这似乎是一个设计问题
*   该`ElementId`属性应该指向您要添加属性的父元素，这也很奇怪，因为它也可以从嵌套代码中“猜测”出来

无论如何，如果您确实想创建 XML 子树结构，那么最终在生成的 XML 中作为嵌套元素的元素是由`XmlConfig`放置在同一级别的元素组成的。因此，以下代码段：

```
<util:XmlConfig Id="elem1" Action="create" ElementPath="cars/motos" File="$(var.XmlFilePath)" Node="element" On="install" Name="moto" Sequence="1">
  <util:XmlConfig Id="elem11" ElementId="elem1" Name="name" Value="yamaha" File="$(var.XmlFilePath)" />
  <util:XmlConfig Id="elem12" ElementId="elem1" Name="type" Value="chopper" File="$(var.XmlFilePath)" />
</util:XmlConfig>
<util:XmlConfig Id="elem2" Action="create" ElementPath="cars/motos/moto[\[]@name='yamaha'[\]]" File="$(var.XmlFilePath)" Node="element" On="install" Name="extra" Sequence="2">
  <util:XmlConfig Id="elem21" ElementId="elem2" File="$(var.XmlFilePath)" Name="bags" Value="leather" />
</util:XmlConfig> 
```

将按如下方式转换 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<cars>
  <car name="ford" type="minivan"/>
  <car name="toyota" type="sedan"/>
  <motos>
    <moto name="honda" model="shadow" type="cruiser"/>
    <moto name="yamaha" type="chopper">
      <extra bags="leather"/>
    </moto>
  </motos>
</cars> 
```

请注意以下事项：

*   元素放置在`XmlConfig`同一级别，尽管它们会在生成的 XML 中产生嵌套元素
*   属性很重要，以防您向`Sequence`元素添加属性或子元素，该元素也正在创建中

希望这现在更有意义。很抱歉最初给出的错误答案。**

# artificial-intelligence - NetLogo dynamic Manhattan distance

> ID：13869599
> 
> 赞同：0
> 
> 时间：2012-12-13T22:26:53.433
> 
> 标签：artificial-intelligence, netlogo

I am trying to implement some form of AI into my Net Logo game.

I am planning on calculating the Manhattan distance from a zombie turtle to a human turtle.

So far I have managed to calculate the Manhattan distance from the two and draw the path and also move the zombie agent along the calculated path towards the human turtle.

The problem I am facing now is that the human agents location is going to be controlled by the user. The Manhattan distance uses a while loop and doesn't break out of the loop until the it has reached the human agent. I would like the zombie agent to move one step towards the human agent and then let the human agent move.

Code so far [Net Logo Game](http://pastebin.com/vLPG3wJ4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:59:50.043

I am not sure what you are trying to do in your `plot-manhattan-distance` procedure. It seems like a complicated approach to something that should be relatively simple, but maybe I misunderstood your purpose. Here is how I would approach the whole problem:

```
globals [
  zombie
  human
]

to setup
  clear-all
  ask n-of 2 patches [ sprout 1 ]
  set human turtle 0
  ask human [ set shape "person" ]
  set zombie turtle 1
  ask zombie [ pen-down ]
end

to go
  ask human [ flee zombie ]
  ask zombie [ pursue human ]
end

to pursue [ target ]
  face target
  set heading first sort-by [abs (?1 - heading) < abs (?2 - heading)] [0 90 180 270]
  fd 1
end

to flee [ pursuer ]
  face pursuer
  rt 180
  fd 0.5
end 
```

The meat is in the `pursue` procedure. Since the zombie cannot predict where the human is going to go, it is just trying to move in its general direction. It starts by facing the human directly (with the handy NetLogo [`face`](http://ccl.northwestern.edu/netlogo/docs/dictionary.html#face) primitive). But since it is presumably only allowed to move in one of the four cardinal directions, it must choose the one that is the most desirable, i.e.: the one that is the least different from its current (ideal) heading. This is what the `sort-by [abs (?1 - heading) < abs (?2 - heading)] [0 90 180 270]` expression does: it sorts the list of directions by comparing their absolute difference with the current heading. The first item of this sorted list will be the one with the smallest difference, and thus, the one that the zombie needs to use.

In the current implementation, the human just tries to move away from the zombie, but you could easily replace that with player control code.

# javascript - GAE频道api解析onmessage

> ID：13869601
> 
> 赞同：2
> 
> 时间：2012-12-13T22:26:59.243
> 
> 标签：javascript, jquery, xml, google-app-engine, channel-api

我正在用 gae 构建一个应用程序，并使用通道 api。

```
String message ="<data><title>newMessage</title><message>Hello</message></data>"; 
channelService.sendMessage(new ChannelMessage(user,message)); 
```

这个字符串是从 java servlet 发送的，在前端我想用 jquery 解析它。这就是我所做的，但它不起作用。

```
function onSocketMessage(message) {

     var xml = $.parseXML(message.data),
     $xml = $( xml ),
     $title = $xml.find('title');

    if($title == "newMessage"){

           alert($xml.find('message'));
    }
} 
```

这是实际上可以正常工作的javascript代码。

```
var messageXML = ((new DOMParser()).parseFromString(message.data, "text/xml"));
    var title = messageXML.documentElement.getElementsByTagName("title")[0].firstChild.nodeValue;
    if(title == "newMessage"){
        alert(messageXML.documentElement.getElementsByTagName("message")[0].firstChild.nodeValue);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-16T11:37:40.187

```
function onSocketMessage(message) {

    var xml = $.parseXML(message.data),
    $xml = $( xml ),
    $title = $xml.find('title');

    if($title.text() == "newMessage"){
        alert($xml.find('message'));
    }
} 
```

你应该给`.text()`，我猜你在这一行错过了`if($title.text() == "newMessage")`。

# sql - 多列约束问题

> ID：13869606
> 
> 赞同：0
> 
> 时间：2012-12-13T22:27:04.070
> 
> 标签：sql, sql-server

我正在尝试编写一个约束，说明每个 ID，只能有一个值为 X 的行。

这可能没有多大意义，所以让我举个例子：

假设我在一个表中有 3 行和 2 列，每一行都有相同的 ID（第 1 列），但第二列有不同的值，其中两个是相同的，第三个是唯一的。如何确保唯一值保持唯一？

这是我一直在使用的约束：

```
ADD CONSTRAINT myConstraint UNIQUE (col1, col2); 
```

我认为我可以将 col2 设为 NULL 并有重复项，然后在我唯一的时候使用 NOT NULL（因为我只关心单个值是否唯一）。这不起作用的原因是由于某种原因我的约束不允许重复的 NULLS，几乎就像它知道如何比较 NULL...

理想情况下我想说

```
ADD CONSTRAINT myConstraint UNIQUE (col1, col2 = 'REQUESTED'); 
```

但这样的东西不存在。

我研究了`CHECK`约束，但我不知道如何告诉它使用检查约束来做到这一点。

基本上我想获取传入的 ID 并确保没有其他相同的 ID 具有 column2 值`REQUESTED`。

对不起，如果这没有多大意义，我正在尽力解释这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:57:53.220

您可以使用过滤索引： http: [//msdn.microsoft.com/en-us/library/cc280372 (v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/cc280372(v=sql.100).aspx)

```
CREATE UNIQUE NONCLUSTERED INDEX [test_idx] ON [dbo].[test] ([col1], [col2])
WHERE ([col2] IS NOT NULL) 
```

它是唯一索引，因此它不允许您为给定 ID(col1) 插入重复的 col2 值并用作您想要的约束。在您的情况下，您也可以使用`col2 = 'REQUESTED'`过滤器。

# javafx-2 - 无法让 LineChartBuilder 编译

> ID：13869610
> 
> 赞同：1
> 
> 时间：2012-12-13T22:27:22.660
> 
> 标签：javafx-2

我正在创建一个使用 JavaFX 2.2 并遇到问题的应用程序。我正在尝试使用 a `LineChartBuilder`，如下所示：

```
LineChart<Number, Number> chart = LineChartBuilder.<Number, Number>
        create()
        .XAxis(NumberAxisBuilder.create().label("X axis").build())
        .YAxis(NumberAxisBuilder.create().label("Y axis").build())
        .build(); 
```

但是，我收到以下编译器错误：

```
java: reference to create is ambiguous, both method create() in 
javafx.scene.layout.RegionBuilder and method <X,Y>create() in 
javafx.scene.chart.LineChartBuilder match 
```

和

```
java: cannot find symbol
  symbol:   method XAxis(javafx.scene.chart.NumberAxis)
  location: class javafx.scene.layout.RegionBuilder<capture#1 of ?> 
```

我知道第一个错误意味着`LineChartBuilder`来自`RegionBuilder`并且都定义了一个`create()`方法，第二个意味着它假设该方法来自`RegionBuilder`并且因此找不到该`XAxis`方法。我什至试过铸造它，

```
LineChart<Number, Number> chart = 
        ((LineChartBuilder<Number, Number, ?>) 
        LineChartBuilder.<Number, Number>create()).... 
```

但我得到相同的编译器错误。

我的问题是，这是一个错误`LineChartBuilder`还是我用错了？也许甚至有解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:59:02.023

您确定您使用的是 JavaFX 2.2 而不是 JDK8 预发行版吗？

JDK8 将在为 JavaFX 2.2 编码的构建器中遇到这些问题：请参阅[RT-24272](http://javafx-jira.kenai.com/browse/RT-24272)。

解决方法是使用`new LineChart(xaxis, yaxis)`. 另请参阅有关此问题的[Oracle 论坛主题](https://forums.oracle.com/forums/thread.jspa?threadID=2471869)帖子。

# javascript - JSON.parse 期望 ',' 或 '}' 知道吗？两者都不起作用

> ID：13869612
> 
> 赞同：4
> 
> 时间：2012-12-13T22:27:46.120
> 
> 标签：javascript, json

JSON.parse 和 eval 函数都出错。[我使用http://jsonlint.com/](http://jsonlint.com/)验证了 JSON，知道该怎么做吗？

```
<script type="text/javascript"> 

var obj = JSON.parse('{ "defaults": { "recordtext": "View", "emptyrecords": "No records to view", "loadtext": "Loading...", "pgtext": "Page" }, "search": { "caption": "Search...", "Find": "Find", "Reset": "Reset", "odata": [ "equal", "not equal", "less", "less or equal", "greater", "greater or equal", "begins with", "does not begin with", "is in", "is not in", "ends with", "does not end with", "contains", "does not contain" ], "groupOps": [ { "op": "AND", "text": "all" }, { "op": "OR", "text": "any" } ], "matchText": " match", "rulesText": " rules" }, "edit": { "addCaption": "Add Record", "editCaption": "Edit Record", "bSubmit": "Submit", "bCancel": "Cancel", "bClose": "Close", "saveData": "Data has been changed! Save changes?", "bYes": "Yes", "bNo": "No", "bExit": "Cancel", "msg": { "required": "Field is required", "number": "Please, enter valid number", "minValue": "value must be greater than or equal to ", "maxValue": "value must be less than or equal to", "email": "is not a valid e-mail", "integer": "Please, enter valid integer value", "date": "Please, enter valid date value", "url": "is not a valid URL. Prefix required (\"http://\" or \"https://\")", "nodefined": " is not defined!", "novalue": " return value is required!", "customarray": "Custom function should return array!", "customfcheck": "Custom function should be present in case of custom checking!" } }, "view": { "caption": "View Record", "bClose": "Close" }, "del": { "caption": "Delete", "msg": "Delete selected record(s)?", "bSubmit": "Delete", "bCancel": "Cancel" }, "nav": { "edittext": "", "edittitle": "Edit selected row", "addtext": "", "addtitle": "Add new row", "deltext": "", "deltitle": "Delete selected row", "searchtext": "", "searchtitle": "Find records", "refreshtext": "", "refreshtitle": "Reload Grid", "alertcap": "Warning", "alerttext": "Please, select row", "viewtext": "", "viewtitle": "View selected row" }, "col": { "caption": "Select columns", "bSubmit": "Ok", "bCancel": "Cancel" }, "errors": { "errcap": "Error", "nourl": "No url is set", "norecords": "No records to process", "model": "Length of colNames <> colModel!" }, "formatter": { "integer": { "thousandsSeparator": " ", "defaultValue": "0" }, "number": { "decimalSeparator": ".", "thousandsSeparator": " ", "decimalPlaces": 2, "defaultValue": "0.00" }, "currency": { "decimalSeparator": ".", "thousandsSeparator": " ", "decimalPlaces": 2, "prefix": "", "suffix": "", "defaultValue": "0.00" }, "date": { "dayNames": [ "Sun", "Mon", "Tue", "Wed", "Thr", "Fri", "Sat", "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" ], "monthNames": [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ], "AmPm": [ "am", "pm", "AM", "PM" ], "srcformat": "Y-m-d", "newformat": "m/d/Y", "masks": { "ISO8601Long": "Y-m-d H:i:s", "ISO8601Short": "Y-m-d", "ShortDate": "n/j/Y", "LongDate": "l, F d, Y", "FullDateTime": "l, F d, Y g:i:s A", "MonthDay": "F d", "ShortTime": "g:i A", "LongTime": "g:i:s A", "SortableDateTime": "Y-m-d\\TH:i:s", "UniversalSortableDateTime": "Y-m-d H:i:sO", "YearMonth": "F, Y" }, "reformatAfterEdit": false }, "baseLinkUrl": "", "showAction": "", "target": "", "checkbox": { "disabled": true }, "idName": "id" }, "emptyrecords": "test" }');
var obj2 = eval ( '(' + '{ "defaults": { "recordtext": "View", "emptyrecords": "No records to view", "loadtext": "Loading...", "pgtext": "Page" }, "search": { "caption": "Search...", "Find": "Find", "Reset": "Reset", "odata": [ "equal", "not equal", "less", "less or equal", "greater", "greater or equal", "begins with", "does not begin with", "is in", "is not in", "ends with", "does not end with", "contains", "does not contain" ], "groupOps": [ { "op": "AND", "text": "all" }, { "op": "OR", "text": "any" } ], "matchText": " match", "rulesText": " rules" }, "edit": { "addCaption": "Add Record", "editCaption": "Edit Record", "bSubmit": "Submit", "bCancel": "Cancel", "bClose": "Close", "saveData": "Data has been changed! Save changes?", "bYes": "Yes", "bNo": "No", "bExit": "Cancel", "msg": { "required": "Field is required", "number": "Please, enter valid number", "minValue": "value must be greater than or equal to ", "maxValue": "value must be less than or equal to", "email": "is not a valid e-mail", "integer": "Please, enter valid integer value", "date": "Please, enter valid date value", "url": "is not a valid URL. Prefix required (\"http://\" or \"https://\")", "nodefined": " is not defined!", "novalue": " return value is required!", "customarray": "Custom function should return array!", "customfcheck": "Custom function should be present in case of custom checking!" } }, "view": { "caption": "View Record", "bClose": "Close" }, "del": { "caption": "Delete", "msg": "Delete selected record(s)?", "bSubmit": "Delete", "bCancel": "Cancel" }, "nav": { "edittext": "", "edittitle": "Edit selected row", "addtext": "", "addtitle": "Add new row", "deltext": "", "deltitle": "Delete selected row", "searchtext": "", "searchtitle": "Find records", "refreshtext": "", "refreshtitle": "Reload Grid", "alertcap": "Warning", "alerttext": "Please, select row", "viewtext": "", "viewtitle": "View selected row" }, "col": { "caption": "Select columns", "bSubmit": "Ok", "bCancel": "Cancel" }, "errors": { "errcap": "Error", "nourl": "No url is set", "norecords": "No records to process", "model": "Length of colNames <> colModel!" }, "formatter": { "integer": { "thousandsSeparator": " ", "defaultValue": "0" }, "number": { "decimalSeparator": ".", "thousandsSeparator": " ", "decimalPlaces": 2, "defaultValue": "0.00" }, "currency": { "decimalSeparator": ".", "thousandsSeparator": " ", "decimalPlaces": 2, "prefix": "", "suffix": "", "defaultValue": "0.00" }, "date": { "dayNames": [ "Sun", "Mon", "Tue", "Wed", "Thr", "Fri", "Sat", "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" ], "monthNames": [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ], "AmPm": [ "am", "pm", "AM", "PM" ], "srcformat": "Y-m-d", "newformat": "m/d/Y", "masks": { "ISO8601Long": "Y-m-d H:i:s", "ISO8601Short": "Y-m-d", "ShortDate": "n/j/Y", "LongDate": "l, F d, Y", "FullDateTime": "l, F d, Y g:i:s A", "MonthDay": "F d", "ShortTime": "g:i A", "LongTime": "g:i:s A", "SortableDateTime": "Y-m-d\\TH:i:s", "UniversalSortableDateTime": "Y-m-d H:i:sO", "YearMonth": "F, Y" }, "reformatAfterEdit": false }, "baseLinkUrl": "", "showAction": "", "target": "", "checkbox": { "disabled": true }, "idName": "id" }, "emptyrecords": "test" }' + ')');

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:49:49.490

您没有正确转义引号，您需要另一个反斜杠；

这是错误的；

```
JSON.parse('{ "fails" : "\"http://\" or \"https://\"" }') 
```

应该是这样的；

```
JSON.parse('{ "passes" : "\\"http://\\" or \\"https://\\"" }') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T23:04:35.400

当某些东西是有效的 JSON 时，它基本上意味着你可以这样写：

```
var xx = <that-thing-you-validated>; 
```

但是，`JSON.parse()`需要一个 JSON 格式的字符串，这是不一样的。观察：

```
var yy = {text: "hello \"world\""};
console.log(JSON.stringify(yy));
// output: "{"text":"hello \"world\""}" 
```

好的，让我们复制/粘贴它，并将外部双引号替换为单引号（因为我们不想转义内部的双引号）。

```
console.log('{"text":"hello \"world\""}');
// output: {"text":"hello "world""} 
```

哇，反斜杠怎么了？！**要在 JavaScript 中创建包含反斜杠的字符串文字，也需要对其进行转义**：

```
console.log('{"text":"hello \\"world\\""}');
// output: {"text":"hello \"world\""} 
```

它现在有效吗？

```
JSON.parse('{"text":"hello \\"world\\""}');
// output: Object 
```

是的！:)

# javascript - 使用 Javascript 动态更改 img 标签的 onemouseover 属性将其变为空

> ID：13869617
> 
> 赞同：-2
> 
> 时间：2012-12-13T22:28:04.843
> 
> 标签：javascript, null, image, onmouseover

我想创建一个具有四种不同状态的 img：State 1 over State 1 out State 2 over State 2 out

每个状态都是不同的图像，用户可以通过单击图像在状态 1 和 2 之间切换。为此，我在单击图像时更改了 src 以及 img 元素的 onmouseover 和 onmouseout 属性。但是，当属性已更改时，它们将变为空且不执行任何操作。如何动态更改这些属性？

这是我正在使用的代码：

```
<!DOCTYPE html>
<html>
<head>
<script>
function change()
{ 
document.getElementById('image').src="http://youtube.thegoblin.net/layoutFix/hideplaylist.png";
document.getElementById('image').onmouseover="this.src='http://youtube.thegoblin.net/layoutFix/hideplaylistDark.png'";
document.getElementById('image').onmouseout="this.src='http://youtube.thegoblin.net/layoutFix/hideplaylist.png'";
}
</script>
</head>

<body>
<img id="image" src="http://youtube.thegoblin.net/layoutFix/showplaylist.png" onmouseover="this.src='http://youtube.thegoblin.net/layoutFix/showplaylistDark.png'" onmouseout="this.src='http://youtube.thegoblin.net/layoutFix/showplaylist.png'" onClick="change()">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:47:07.197

You need to use 2 variables to save toggle stat:

```
var img = document.getElementById("image");
var toggleover  = false;
var toogleClick = false;

img.addEventListener('click',function(){
    toogleClick = !toogleClick;
    changeImg();
},false);

img.addEventListener('mouseover',function(){
    toggleover = true;
    changeImg();
},false);
img.addEventListener('mouseout',function(){
    toggleover = false;
    changeImg();
},false);

(function changeImg(){
if(toogleClick)  
    img.src = toggleover ? "url-1-2.jpg" : "url-1-1.jpg";
else
    img.src = toggleover ? "url-2-2.jpg" : "url-2-1.jpg";
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:40:35.947

如果我很好地理解了您的问题，您需要增加一个变量并检查它是奇数还是偶数，然后根据您的需要进行不同的处理。

# html - 在 CSS 属性中将图标字体设置为背景

> ID：13869618
> 
> 赞同：21
> 
> 时间：2012-12-13T22:28:14.450
> 
> 标签：html, css, wordpress, icons

我要做的就是用图标字体而不是图标图像替换 CSS 中的背景图像。我无法完成它。这是 CSS 属性：

```
.social-networks .twitter{background:url(../images/social/twitter.png);} 
```

这是 PHP 中的代码：

```
<ul class="social-networks">
    <?php if (my_option('twitter_link')): ?>
        <li>
            <a href="<?php echo my_option('twitter_link'); ?>"  class="twitter">twitter</a>
        </li>
    <?php endif; ?> 
```

我插入incon字体的方式是`<span class="icon">A</span>`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-13T22:49:36.353

你可以尝试这样的事情：**[FIDDLE](http://jsfiddle.net/Dim13i/9Hazh/)**

假设你有你的 DIV：

```
<div class="test"></div> 
```

您可以像这样创建您的 css 样式：

```
.test {
    width: 100px;
    height: 100px;
    border: 2px solid lightblue;
}

.test:before {
    content: "H";
    width: 100%;
    height: 100%;
    font-size: 5.0em;
    text-align: center;
    display: block;
    line-height: 100px;
}​ 
```

在属性中，`content`您选择您的“字母”，然后您可以更改`font-size`、`font-weight`、`color`等...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T22:34:14.380

css中有一个content属性：

```
.icon-rocket:after {
   content: "{Symbol for rocket}";
} 
```

[http://www.w3schools.com/cssref/pr_gen_content.asp](http://www.w3schools.com/cssref/pr_gen_content.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-26T06:44:48.960

使用导航文本而不是背景 img。

```
$(".slider").owlCarousel({
    navigation : true,
    slideSpeed : 500,
    singleItem:true,
    navigationText:['<i class="fa fa-chevron-left" aria-hidden="true"></i>', '<i class="fa fa-chevron-right" aria-hidden="true"></i>']
}); 
```

并为字体真棒图标设置 css 属性。这是图标的普通CSS。

```
.owl-button{
   position:relative;
}
.owl-prev {
   position:absolute;
   top:0;
   left:47%;
   font-size: 30px;
}
.owl-next {
    position:absolute;
    top:0;
    right:47%;
    font-size: 30px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-29T10:33:25.627

我想出了一些有趣的东西，imo：CSS`element()`函数。目前它[仅在 Firefox 中有效](http://caniuse.com/#search=css%20el)（因此请确保您在该浏览器的末尾打开链接的示例）。

这是HTML：

```
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
  rel="stylesheet">

<div class="bg-patterns">
  <i class="material-icons" id="icon">pets</i>
</div>

<div class="with-icon-bg">
   Hi! I'm paragraph with background made from ordinary HTML element! And BTW - I'm a pets lover. 
</div> 
```

...和带有注释的 CSS：

```
.material-icons {
  /* icon font */
  font-family: 'Material Icons'; 
  color: #ddd;
}

/* this is a wrapper for elements you want to use
as backgrounds, should not be visible on page */
.bg-patterns {
  margin-left: -90000cm; 
}

.with-icon-bg {
  /* all magic happens here */
  background: -moz-element(#icon);

  /* other irrelevant styling */
  font-size: 25px;
  width: 228px;
  margin: 0 auto;
  padding: 30px;
  border: 3px dashed #ddd;
  font-family: sans-serif;
  color: #444;
  text-align: center;
} 
```

最后 - 有一个[工作示例](https://jsfiddle.net/mxo51qu9/2/)（jsFiddle）。

# c# - 将浮点数作为字节存储到大数组中，而不是 new byte[]

> ID：13869620
> 
> 赞同：0
> 
> 时间：2012-12-13T22:28:21.550
> 
> 标签：c#, file, serialization

我需要序列化一堆`float`s 并在必要时转换为小端。我知道`BitConverter.GetBytes(float)`，但我宁愿避免在 GC 堆上分配大量的 4 字节小数组。如何转换为`byte[]`具有偏移索引的现有大数组？我想要类似的东西：

```
float[] theFloats; // filled up somewhere
byte[] theBytes = new byte[theFloats.Length * 4];

int offset = 0;
for (int i = 0; i < numFloats; ++i)
{
    MagicClass.CopyFloatToBytes(theFloats[i], theBytes, offset);
    offset += 4;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:29:45.613

您可以`MemoryStream`在数组周围创建一个，然后创建一个`BinaryWriter`并将浮点数写入它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:52:39.407

为什么不直接使用[BitConverter.GetBytes](http://msdn.microsoft.com/en-us/library/yhwsaf3w.aspx)？

你也可以这样做`[StructLayout(LayoutKind.Explicit)]`

```
[StructLayout(LayoutKind.Explicit)]
public struct Convert32BitType
{
    [FieldOffset(0)]
    public int Int32Value;
    [FieldOffset(0)]
    public float FloatValue;
}

// Example:
var tmp = new Convert32BitType();
tmp.FloatValue = 1.1;
int ival = tmp.Int32Value;
byte b1 = (byte)(ival >> 24);
byte b2 = (byte)(ival >> 16);
byte b3 = (byte)(ival >> 8);
byte b4 = (byte)(ival >> 0); 
```

另一种可能性是使用`fixed`关键字并转换指针，但这需要不安全的代码。

# c# - ASP.NET 解决方案的本机程序集绑定失败

> ID：13869621
> 
> 赞同：13
> 
> 时间：2012-12-13T22:28:23.477
> 
> 标签：c#, asp.net, clr

**注意：**这个问题的主要目的是**理解/**解释CLR 的程序集绑定行为。一旦确定了原因，解决方案应该是显而易见的。请知道我了解我的设置不是最优的（nativedll 未签名和版本控制等），但我再次只想调查 CLR 的绑定行为。

我正在尝试在我的 asp.net 解决方案中使用本机（非 COM、C++）dll。我将避免命名 dll，因为我认为它会将主题转移到错误的方向。

本机 dll 来自博客站点，没有太多信息。我没有任何关于原生 dll 的信息，比如编译它的架构、它是什么文化和版本等。使用提供的包装器，我可以在控制台应用程序中正确使用 dll。它可以工作，即使我们必须使用**部分程序集名称**进行绑定。本机程序集的包装器具有 DLL 导入，例如`[DllImport("nativedll.dll")] public static extern void someMethod([Out] BE_VERSION pbeVersion);`

我已经阅读了大量有关 CLR 程序集绑定的信息，包括：

> [运行时如何定位](http://msdn.microsoft.com/en-us/library/yx7xezcf%28v=vs.100%29.aspx)
> [程序集 程序集加载的最佳实践](http://msdn.microsoft.com/en-us/library/dd153782.aspx)

根据我的理解，我们应该能够加载程序集，但不能。我收到程序集绑定错误。

**设置**

我调用本机 dll 的帮助程序库（编译为 MSIL（任何 CPU））是**强命名的，并且在 GAC 中。**. 我在 IIS 上的 Win 7 x64 位机器上运行我的 asp.net 应用程序，而不是 Visual Studio 开发服务器。**nativedll 未签名且未经过 GAC。**

**问题**
总结是，当我将本机 dll 放在 windows 目录中时，(c:\Windows) 解决方案工作正常。在任何其他情况下，我都会遇到程序集绑定错误。

**问题**
1\. 我想知道为什么将程序集放在 windows 目录中时会被绑定？2\. 错误是什么意思：ERR: Error extracting manifest import from file (hr = 0x80131018)？（看场景一、场景六）
3、为什么调用Assembly.Load*()方法会失败？（场景 3、4、5）

**我的测试**

**方案 1 的结果：**

```
**Setup**
Calling Assembly: GACed.
Native Assembly: Included in project; Build Action: None; Copy To Output Directory: Copy Always.

**Description:** 
Logged into the site, home page open. Did not navigate to the page with native call.

**Result:** 
    Binding Error
    *** Assembly Binder Log Entry  (12/13/2012 @ 11:28:23 AM) ***

        The operation failed.
        Bind result: hr = 0x80131018\. No description available.

        Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
        Running under executable  C:\Windows\SysWOW64\inetsrv\w3wp.exe
        --- A detailed error log follows. 

        === Pre-bind state information ===
        LOG: User = NT AUTHORITY\SYSTEM
        LOG: DisplayName = nativedll
         (Partial)
        WRN: Partial binding information was supplied for an assembly:
        WRN: Assembly Name: nativedll | Domain ID: 2
        WRN: A partial bind occurs when only part of the assembly display name is provided.
        WRN: This might result in the binder loading an incorrect assembly.
        WRN: It is recommended to provide a fully specified textual identity for the assembly,
        WRN: that consists of the simple name, version, culture, and public key token.
        WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.
        LOG: Appbase = file:///C:/WebUI/
        LOG: Initial PrivatePath = C:\WebUI\bin
        LOG: Dynamic Base = C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\webui\69d9ded4
        LOG: Cache Base = C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\webui\69d9ded4
        LOG: AppName = ca4be085
        Calling assembly : (Unknown).
        ===
        LOG: This bind starts in default load context.
        LOG: Using application configuration file: C:\WebUI\web.config
        LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet.config
        LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
        LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
        LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/webui/69d9ded4/ca4be085/nativedll.DLL.
        LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/webui/69d9ded4/ca4be085/nativedll/nativedll.DLL.
        LOG: Attempting download of new URL file:///C:/WebUI/bin/nativedll.DLL.
        LOG: Assembly download was successful. Attempting setup of file: C:\WebUI\bin\nativedll.dll
        LOG: Entering download cache setup phase.
        ERR: Error extracting manifest import from file (hr = 0x80131018).
        ERR: Setup failed with hr = 0x80131018.
        ERR: Failed to complete setup of assembly (hr = 0x80131018). Probing terminated. 
```

* * *

**场景二：**

```
**Setup**
Scenario 1 + Just copy the nativedll to C:\Windows folder. No reset of anytype. 

**Description**
Navigate to the page calling native.

Result: 
Success. Native Functionality is invoked. No binding failure. 
```

* * *

**场景 3：**

```
**Setup**
Calling Assembly: GACed.
Native Assembly: Build Action: None; Copy To Output Directory: Copy Always.

Description: 
    Breakpoint at the point of native function call, use immediate window to execute the following code:

        var pat = pat = Path.Combine(AppDomain.CurrentDomain.RelativeSearchPath, "nativedll.dll");
        var a = Assembly.LoadFrom(pat);

    **Result**
    Exception raised:

    System.BadImageFormatException was unhandled
      HResult=-2146234344
      Message=Could not load file or assembly 'file:///C:\WebUI\bin\nativedll.dll' or one of its dependencies. The module was expected to contain an assembly manifest.
      Source=mscorlib
      FileName=file:///C:\WebUI\bin\nativedll.dll
      FusionLog=Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
        Running under executable  C:\Windows\SysWOW64\inetsrv\w3wp.exe
        --- A detailed error log follows. 

        === Pre-bind state information ===
        LOG: User = NT AUTHORITY\SYSTEM
        LOG: Where-ref bind. Location = C:\WebUI\bin\nativedll.dll
        LOG: Appbase = file:///C:/WebUI/
        LOG: Initial PrivatePath = C:\WebUI\bin
        Calling assembly : (Unknown).
        ===
        LOG: This bind starts in LoadFrom load context.
        WRN: Native image will not be probed in LoadFrom context. Native image will only be probed in default load context, like with Assembly.Load().
        LOG: Using application configuration file: C:\WebUI\web.config
        LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet.config
        LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
        LOG: Attempting download of new URL file:///C:/WebUI/bin/nativedll.dll.
        ERR: Failed to complete setup of assembly (hr = 0x80131018). Probing terminated.

          StackTrace:
               at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
               at System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
               at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
               at System.Reflection.RuntimeAssembly.InternalLoadFrom(String assemblyFile, Evidence securityEvidence, Byte[] hashValue, AssemblyHashAlgorithm hashAlgorithm, Boolean forIntrospection, Boolean suppressSecurityChecks, StackCrawlMark& stackMark)
               at System.Reflection.Assembly.LoadFrom(String assemblyFile)
          InnerException: 
```

* * *

**场景四：**

```
**Setup**
    Calling Assembly: GACed.
    Native Assembly: Build Action: None; Copy To Output Directory: Copy Always.

**Description** 
    Breakpoint at the point of native function call, use immediate window to execute the following code:

    var pat = pat = Path.Combine(AppDomain.CurrentDomain.RelativeSearchPath, "nativedll.dll");
    var a = Assembly.Load(pat);

**Result**
    Exception raised:

        System.IO.FileLoadException was unhandled
          HResult=-2146234297
          Message=Could not load file or assembly 'C:\\WebUI\\bin\\nativedll.dll' or one of its dependencies. The given assembly name or codebase was invalid. (Exception from HRESULT: 0x80131047)
          Source=mscorlib
          FileName=C:\\WebUI\\bin\\nativedll.dll
          FusionLog=""
          StackTrace:
               at System.Reflection.AssemblyName.nInit(RuntimeAssembly& assembly, Boolean forIntrospection, Boolean raiseResolveEvent)
               at System.Reflection.RuntimeAssembly.CreateAssemblyName(String assemblyString, Boolean forIntrospection, RuntimeAssembly& assemblyFromResolveEvent)
               at System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean forIntrospection)
               at System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection)
               at System.Reflection.Assembly.Load(String assemblyString)
          InnerException: 
```

* * *

**场景 5：**

```
**Setup**
Calling Assembly: GACed.
Native Assembly: Build Action: None; Copy To Output Directory: Copy Always.

**Description: **
    Breakpoint at the point of native function call, use immediate window to execute the following code:

    var pat = pat = Path.Combine(AppDomain.CurrentDomain.RelativeSearchPath, "nativedll.dll");
    var a = Assembly.LoadFile(pat);

    **Result**
    Exception raised:

        System.BadImageFormatException was unhandled
          HResult=-2146234344
          Message=The module was expected to contain an assembly manifest. (Exception from HRESULT: 0x80131018)
          Source=mscorlib
          StackTrace:
               at System.Reflection.RuntimeAssembly.nLoadFile(String path, Evidence evidence)
               at System.Reflection.Assembly.LoadFile(String path)
          InnerException: 
```

* * *

**场景 6：**

```
**Setup**
Calling Assembly: GACed.
Native Assembly: Excluded from project. Manually copied into the bin folder prior to execution.

**Description: **
    Logged into the site, home page open. Did not navigate to the page with native call.

    **Result**
    Binding Error: (Output: Assembly Binding Log Viewer)

        Assembly Binder Log Entry  (12/13/2012 @ 2:19:13 PM)

        The operation failed.
        Bind result: hr = 0x80131018\. No description available.

        Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
        Running under executable  C:\Windows\SysWOW64\inetsrv\w3wp.exe
        --- A detailed error log follows. 

        === Pre-bind state information ===
        LOG: User = NT AUTHORITY\SYSTEM
        LOG: DisplayName = nativedll
         (Partial)
        WRN: Partial binding information was supplied for an assembly:
        WRN: Assembly Name: nativedll | Domain ID: 2
        WRN: A partial bind occurs when only part of the assembly display name is provided.
        WRN: This might result in the binder loading an incorrect assembly.
        WRN: It is recommended to provide a fully specified textual identity for the assembly,
        WRN: that consists of the simple name, version, culture, and public key token.
        WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.
        LOG: Appbase = file:///C:/Web/WebUI/
        LOG: Initial PrivatePath = C:\WebUI\bin
        LOG: Dynamic Base = C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\webui\69d9ded4
        LOG: Cache Base = C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\webui\69d9ded4
        LOG: AppName = ca4be085
        Calling assembly : (Unknown).
        ===
        LOG: This bind starts in default load context.
        LOG: Using application configuration file: C:\WebUI\web.config
        LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet.config
        LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
        LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
        LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/webui/69d9ded4/ca4be085/nativedll.DLL.
        LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/webui/69d9ded4/ca4be085/nativedll/nativedll.DLL.
        LOG: Attempting download of new URL file:///C:/WebUI/bin/nativedll.DLL.
        LOG: Assembly download was successful. Attempting setup of file: C:\\WebUI\bin\nativedll.dll
        LOG: Entering download cache setup phase.
        ERR: Error extracting manifest import from file (hr = 0x80131018).
        ERR: Setup failed with hr = 0x80131018.
        ERR: Failed to complete setup of assembly (hr = 0x80131018). Probing terminated. 
```

* * *

**场景 7：**

```
**Setup**
Scenario 6 + Just copy the nativedll to C:\Windows folder. No reset of anytype. 

**Description**
Navigate to the page calling native.

Result: 
Success. Native Functionality is invoked. No binding failure. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-23T16:56:05.803

据我所知，并有相当多的假设......

/bin 文件夹中的 .NET 程序集在网站启动时由 ASP.NET 自动加载，但不会加载任何本机 win32 DLL。

DLLImport 失败，因为 DllImport 是相对于 w3wp.exe 进程而不是相对于网站项目完成的。AppPool 可以在许多网站之间共享，因此您网站的 /bin 文件夹不能成为 w3wp.exe 进程的 CurrentDirectory，即使这样做不存在安全问题。

因此，要查找 DLL，IIS 首先在“w3wp.exe”所在的文件夹中查找，然后检查 Windows 系统文件夹。

理论上，您应该能够使用 LoadLibrary() 和 GetProcAddress() 从特定文件夹加载 DLL。

顺便说一句，如果您在网站项目中定义的类中使用 DllImport()，您可能需要将 ASP.NET 的默认编译模式更改为“安全”。要允许使用不安全的代码，您可以更新 web.config 文件：

```
<system.codedom>
    <compilers>
       <compiler ... compilerOptions="/unsafe" >
    </compilers>
</system.codedom> 
```

# java - JWS - 在 jar 中获取资源和资源管理

> ID：13869624
> 
> 赞同：3
> 
> 时间：2012-12-13T22:28:39.030
> 
> 标签：java, deployment, resources, embedded-resource, java-web-start

![这就是我的文件结构的样子](../Images/757c64130186c3b81dca8cc43dc8c770.png)

我这样称呼我的形象：

```
ImageIO.read(this.getClass().getResource("../res/image1.gif")); 
```

当我从命令行运行它时，`java -jar "testWebStartRes.jar"`我的图像会加载。当我将它部署为 GlassFish 服务器上的 Web 启动应用程序时，从 JNLP 启动它时找不到图像。

堆栈跟踪：

```
 Detected from bootclasspath: C:\\Program Files\\Java\\jdk1.7.0\\jre\\lib\\deploy.jar
java.lang.IllegalArgumentException: input == null!
    at javax.imageio.ImageIO.read(ImageIO.java:1388)
    at main.Main.setAppIcon(Main.java:42)
    at main.Main.<init>(Main.java:19)
    at main.Main$1.run(Main.java:34)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Null Image 
```

**编辑：**使问题更容易理解。Andrew Thompson 解决了如何使用单独的 jar 部署 web start 应用程序。

# javascript - node.setAttribute('attName',null) 返回类型不匹配

> ID：13869626
> 
> 赞同：3
> 
> 时间：2012-12-13T22:28:54.327
> 
> 标签：javascript, xml, dom, setattribute

以下代码在 IE9 中返回类型不匹配错误。

```
 node.setAttribute('attributeName',null); 
```

但

```
 node.setAttribute('attributeName',undefined) doesn't give an error. 
```

这也很好：

```
 node.setAttribute('attributeName','null'); 
```

知道为什么会发生这种情况以及修复它的好方法。

一种解决方案是检查，

```
 if (attributeVal === null){
      attributeVal = 'null';
 },  
 node.setAttribute('attributeName',attributeVal); 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:38:57.633

如果您尝试删除属性，请不要使用`setAttribute(name, null)`，请使用`removeAttribute(name)`。

我不确定您为什么要设置虚假值，我假设您要么想要设置某些东西，要么要删除该属性。所以像：

```
attributeVal ? 
    node.setAttribute(attributeName, attributeVal) : 
    node.removeAttribute(attributeName); 
```

# javascript - 无法使用“-”破折号访问 JSON 属性

> ID：13869627
> 
> 赞同：163
> 
> 时间：2012-12-13T22:28:56.800
> 
> 标签：javascript, json

当字符串具有破折号字符时，我无法从 json 对象中检索值：

```
{
"profile-id":1234, "user_id":6789
} 
```

如果我尝试引用`jsonObj.profile-id`它返回的解析`ReferenceError: "id" is not defined`但 jsonObj.user_id 将返回 6789

我没有办法修改由外部 api 调用返回的值，并试图解析返回的字符串以删除破折号会破坏 url 等，这些也是传递的。帮助？

* * *

## 回答 #1

> 赞同：346
> 
> 时间：2012-12-13T22:31:07.300

`jsonObj.profile-id`是减法表达式（即`jsonObj.profile - id`）。

要访问包含不能出现在标识符中的字符的键，请使用方括号：

```
jsonObj["profile-id"] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-01T14:48:29.567

除了[这个答案](https://stackoverflow.com/a/13869651)，请注意，在 Node.js 中，如果您使用数组语法访问 JSON，`[]`所有嵌套的 JSON 键都应遵循该语法

这是错误的方式

```
json.first.second.third['comment'] 
```

并且会给你“未定义”的错误。

这是正确的方法

```
json['first']['second']['third']['comment'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-21T11:05:57.040

对于ansible，并使用连字符，这对我有用：

```
 - name: free-ud-ssd-space-in-percent
      debug:
        var: clusterInfo.json.content["free-ud-ssd-space-in-percent"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-05T10:14:43.863

对于任何尝试将公认的解决方案应用于 HomeAssistant 值模板的人，如果您嵌套在双精度中，则必须使用单引号：

```
value_template: "{{ value_json['internet-computer'].usd }}" 
```

# python - 检查 4 个字符串是否有重复项

> ID：13869628
> 
> 赞同：2
> 
> 时间：2012-12-13T22:28:58.203
> 
> 标签：python, python-2.7

s1, s2, s3, s4 有一个字符串作为内容

我想做这样的事情

```
if one or more is the same s1, s2, s3 or s4:
    print error
else
    print s1, s2, s3, s4 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T22:30:47.457

您可以使用一组：

```
if len(set([s1, s2, s3, s4])) != 4:
    pass # not all unique 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T22:31:17.020

如果您尝试检查所有字符串是否不同：

```
4 == len(set([s1, s2, s3, s4])) 
```

# android - 使用活动组，如何在不同的 tabhost 中切换到更深层次的活动

> ID：13869629
> 
> 赞同：0
> 
> 时间：2012-12-13T22:28:58.820
> 
> 标签：android, android-intent, android-tabhost, flags, activitygroup

如果我要再次重写它，我将使用片段，但我使用以下设置：

*   Tabhost 中的 Activity 由 ActivityGroups 管理
*   我有 TabA、TabB 和 TabC
*   默认情况下，主要活动是 TabB 所以这是登陆页面
*   当 TabB 启动时，它会查看 sharedpreference 以查看是否设置了变量
*   如果设置了变量，那么用户会看到主登陆屏幕
*   如果没有设置变量，则路由到TabC下的一个子Activity即TabC -> Activity2--TabC下有两个Activity，Activity 1 -> Activity2

我的问题是如何在 tabhost TabC 中显示 Activity2，但是在 TabC 突出显示的位置并且用户在从 Activity2 中选择后退按钮之前不会显示 Activity1。

这可能是一个简单的答案，但我想我已经看代码太久了！

感谢您的帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:51:03.437

我不确定你想要什么。可能这个答案会对你有所帮助。尝试在 activity2 的 oncreate 方法和 finish() activity2 中调用您的 activity1。如果你想从活动 2 切换到活动 1

# c# - 弦宽测量方法不准确

> ID：13869630
> 
> 赞同：0
> 
> 时间：2012-12-13T22:29:01.853
> 
> 标签：c#, .net, wpf, string

我正在尝试将我的 RichTextBox.PageWidth 的大小限制为每行 60 个字符（固定宽度字体）。基本上我测量字符串，然后将 PageWidth 设置为测量的量。

当我使用它时，我的测量值相差 2 个字符。（最后 2 个字符换行到下一行。）

任何人都知道如何获取我的 RichTextBox 的字符串宽度，而无需实际将该文本放入 RichTextBox

**字符串测量方法**（取自[此处](http://smellegantcode.wordpress.com/2008/07/03/glyphrun-and-so-forth/)）：

```
private static double GetStringWidth(string text, 
                                     FontFamily fontFamily, 
                                     double fontSize)
{
    Typeface typeface = new Typeface(fontFamily, 
                                     FontStyles.Normal, 
                                     FontWeights.Normal, 
                                     FontStretches.Normal);

    GlyphTypeface glyphTypeface;
    if (!typeface.TryGetGlyphTypeface(out glyphTypeface))
        throw new InvalidOperationException("No glyph typeface found");

    double size = fontSize;

    ushort[] glyphIndexes = new ushort[text.Length];
    double[] advanceWidths = new double[text.Length];

    double totalWidth = 0;

    for (int n = 0; n < text.Length; n++)
    {
        ushort glyphIndex = glyphTypeface.CharacterToGlyphMap[text[n]];
        glyphIndexes[n] = glyphIndex;

        double width = glyphTypeface.AdvanceWidths[glyphIndex] * size;
        advanceWidths[n] = width;

        totalWidth += width;
    }

    return totalWidth;
} 
```

**使用上述方法：**

```
var strToMeasure="012345678901234567890123456789012345678901234567890123456789";
richTextBox.FontFamily = new FontFamily("Courier New");
var fontFamily = richTextBox.FontFamily;
var fontSize = richTextBox.FontSize;

var measuredWidth = GetStringWidth(strToMeasure, fontFamily, fontSize);

richTextBox.Document.PageWidth = measuredWidth;
richTextBox.Document.MaxPageWidth = measuredWidth;
richTextBox.Document.MinPageWidth = measuredWidth; 
```

**更新：**
进一步的测试表明它一直关闭 2 个字符（4 个字符或 100 个字符）。这让我相信 RichTextBox 正在填充一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:17:32.057

RichTextBox 可能会出于自己的布局目的而消耗其一些水平宽度，从而导致您的计算总是有点短。这个 stackOverflow 问题的答案应该可以帮助您解决问题。

[根据等宽字体的大小设置 WPF RichTextBox 的宽度和高度](https://stackoverflow.com/questions/2569191/setting-wpf-richtextbox-width-and-height-according-to-the-size-of-a-monospace-fo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:32:29.513

我使用这种方法，它可能不是最好的，但它非常准确。

```
 private double MeasureText(string text, FontFamily font, double fontsize)
    {
        var mesureLabel = new TextBlock(); 
        mesureLabel.FontFamily = font;
        mesureLabel.FontSize = fontsize; 
        mesureLabel.Text = text; 
        mesureLabel.Padding = new Thickness(0); 
        mesureLabel.Margin = new Thickness(0); 
        mesureLabel.Width = double.NaN; 
        mesureLabel.Measure(new Size(Double.PositiveInfinity, Double.PositiveInfinity)); 
        mesureLabel.Arrange(new Rect(mesureLabel.DesiredSize));
        return mesureLabel.ActualWidth;
    } 
```

用法：

```
 double length = MeasureText("hello", FontFamily, FontSize); 
```

# xcode - XCode：重启我的应用程序以便我可以更快地调试的最快方法是什么？

> ID：13869633
> 
> 赞同：2
> 
> 时间：2012-12-13T22:29:12.493
> 
> 标签：xcode, debugging, ios-simulator, restart

假设我正在调试并且不小心超出了我想要进入的功能。目前，我通过 xcode (apple+R) 再次重新运行该应用程序，并且必须等待该应用程序再次加载。有更快的方法吗？我查看了停止命令（apple+。）但是当我从模拟器再次加载应用程序时，我的断点不会触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:35:52.320

重新启动可能是你最好的选择，但如果你在到达你想要的那个时盲目地点击“下一步”，听起来你可能只是设置了太多的断点。尝试关闭前面的一些断点（尤其是循环中的断点）。

如果断点在循环中，并且您真的只在某些条件下关心它（为什么要跳过它？），请尝试将其设置为仅在需要时停止的条件断点。查看[此问题](https://stackoverflow.com/questions/988621/how-to-set-a-conditional-breakpoint-in-xcode-based-on-an-object-string-property)的答案以获取有关如何执行此操作的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:59:30.417

好的，所以我从这个问题中理解的是：你在一个函数中有一些断点......你从 xcode 运行应用程序......它没有进入那个函数......然后你去模拟器并从那里运行它并且断点没有触发。

如果这是您对问题的看法..您的问题是，当您从不在调试模式下运行的模拟器中的图标运行应用程序时，它会在发布模式下运行（有一些细微差别）。调试模式仅当它直接从 xcode 启动时才有效（所以当然你的断点没有触发）。

至于加载速度..你不能做任何事情，它尽可能快地加载。我个人只在实际设备上构建和运行..根据我的经验，从我点击运行到应用程序完全加载需要 2~4 秒。话虽这么说，我注意到如果你有一个启动画面（Default.png），加载需要 1~2 秒，所以我所做的只是从项目中删除 Default.png，从设备中删除应用程序，重新启动设备，重新启动xcode，每次都不会加载屏幕。它可能看起来并不多 ..per build 但在几周的开发过程中，它的广告长达几分钟。另外..不要忘记在发布 Default.png 时添加它...我忘记了一次并且应用程序被拒绝了 :)

# iphone - MKMapView 离屏注释图像不正确

> ID：13869635
> 
> 赞同：1
> 
> 时间：2012-12-13T22:29:30.660
> 
> 标签：iphone, ios6, mkmapview, mkannotationview

我有一张地图，我在其中添加了几个注释，如下所示：

```
 for (Users *user in mapUsers){

        double userlat = [user.llat doubleValue];
        double userLong = [user.llong doubleValue];

        CLLocationCoordinate2D userCoord = {.latitude =  userlat, .longitude =  userLong};

        MapAnnotationViewController *addAnnotation = [[MapAnnotationViewController alloc] initWithCoordinate:userCoord];

        NSString *userName = user.username;
        NSString *relationship = user.relationship;

        [addAnnotation setTitle:userName];
        [addAnnotation setRelationshipParam:relationship];

        [self.mainMapView addAnnotation:addAnnotation];
    } 
```

使用此委托方法代码：

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    static NSString *identifier = @"AnnotationIdentifier";

if ([annotation isKindOfClass:[MapAnnotationViewController class]]) {

    MKAnnotationView *annView = (MKAnnotationView *)[self.mainMapView dequeueReusableAnnotationViewWithIdentifier:identifier];
    if (!annView) {
        annView = [[MKAnnotationView alloc] initWithAnnotation:annotation
                                                          reuseIdentifier:identifier];
    }
    MapAnnotationViewController *sac = (MapAnnotationViewController *)annView.annotation;

    if ([sac.relationshipParam isEqualToString:@"paramA"])
    {
        annView.image = [UIImage imageNamed:@"image1.png"];
    }
    else if ([sac.relationshipParam isEqualToString:@"paramB"])
    {
        annView.image = [UIImage imageNamed:@"image2.png"];
    }
    else if ([sac.relationshipParam isEqualToString:@"paramC"])
    {
        annView.image = [UIImage imageNamed:@"image3.png"];
    }

    return annView;
}
else {
    return nil;
} 
```

这一切都适用于地图的原始加载。但是，当我选择注释（其自定义代码太长而无法发布但包含放大）时，之前绘制的注释图像已更改图标。在该过程中不会重新绘制地图并且不会重新添加注释。当我在地图上向后捏时，图像是不同的（它们将错误的关系参数与错误的 image1-3.png 匹配。

谁能想到为什么会发生这种情况，或者要寻找什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T22:59:12.517

可能会返回一个注释视图，该`dequeueReusableAnnotationViewWithIdentifier`视图用于与当前`annotation`参数不同的注释。

如果`dequeueReusableAnnotationViewWithIdentifier`成功（即您正在使用以前使用的注释视图），则必须更新其`annotation`属性以确保视图与当前`annotation`的属性匹配。

所以尝试改变这部分：

```
MKAnnotationView *annView = (MKAnnotationView *)[self.mainMapView dequeueReusableAnnotationViewWithIdentifier:identifier];
if (!annView) {
    annView = [[MKAnnotationView alloc] initWithAnnotation:annotation
                                                      reuseIdentifier:identifier];
}
MapAnnotationViewController *sac = (MapAnnotationViewController *)annView.annotation; 
```

到：

```
MKAnnotationView *annView = (MKAnnotationView *)[self.mainMapView dequeueReusableAnnotationViewWithIdentifier:identifier];
if (!annView) {
    annView = [[MKAnnotationView alloc] initWithAnnotation:annotation
                                                      reuseIdentifier:identifier];
}
else {
    annView.annotation = annotation; // <-- add this
}

MapAnnotationViewController *sac = (MapAnnotationViewController *)annView.annotation; 
```

另一个潜在问题（不会导致问题中的问题）是视图的属性仅在是三个值之一 `image`时才设置。`relationshipParam`

如果不知何故`relationshipParam`不是这三个编码值之一*并且*视图已出队，则图像将基于其他一些注释的`relationshipParam`.

因此，您应该在设置部分添加一个`else`部分`image`并将其设置为一些默认图像，以防万一：

```
...
else if ([sac.relationshipParam isEqualToString:@"paramC"])
{
    annView.image = [UIImage imageNamed:@"image3.png"];
}
else
{
    annView.image = [UIImage imageNamed:@"UnknownRelationship.png"];
} 
```

# ruby-on-rails - 无法连接到有效的 github 存储库

> ID：13869638
> 
> 赞同：1
> 
> 时间：2012-12-13T22:29:45.333
> 
> 标签：ruby-on-rails, github, rubymine

我拥有对其他人拥有的私有存储库的读/写访问权限，但 RubyMine 无法连接到 Git URL。工作流程：

```
Open RubyMine
Click on "Check out from source control"
Select Git
Enter URL, click "Test", and Test fails 
```

我正在使用 OSX Lion，并且我的 Github 凭据已经保存。我尝试在 github.com 的“探索”选项卡上连接到其他几个 github URL，但没有遇到任何问题。建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:59:01.767

我可以通过遵循 GitHub 上的教程生成 SSH 密钥来解决这个问题。在添加新密钥之前，我还删除了帐户中的所有现有密钥。在 RubyMine 对话框中，我将 ssh 链接粘贴到我的存储库而不是 HTTP 链接。希望这对其他人有帮助。

[https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:35:57.480

我建议在[RubyMine bugtracker](http://youtrack.jetbrains.com)中创建一个问题并在其中附加日志文件（Help -> Reveal Log in Finder）。也许这是 RubyMine 通过 HTTP 支持 Git 的一个错误。

同时，作为一种解决方法，您可以使用 SSH，如[user1836351](https://stackoverflow.com/a/13870022/72788)所建议的那样。

`~/.netrc`另一种解决方法是在文件中指定您的凭据。文件内容示例：

```
machine github.com
login yourname
password yourpassword 
```

# sql - 在 SQL 中按日期过滤

> ID：13869640
> 
> 赞同：31
> 
> 时间：2012-12-13T22:30:00.943
> 
> 标签：sql, sql-server, tsql

我的表中有一个日期列（DateTime），我正在尝试创建一个 WHERE 子句，`WHERE dates BETWEEN 12-11-2012 and 12-13-2012`

日期列的样本值 = 2012-05-24 00:38:40.260

我想说的是 MM-DD-YYYY 和 MM-DD-YYYY 之间的日期。

我试着做

```
WHERE dates BETWEEN ((convert(nvarchar(10), dates,110) = '2012-12-12') AND (convert(nvarchar(10), dates,110) = '2012-12-12')) 
```

但似乎不起作用。“= 附近的语法不正确

请帮忙

编辑：

感谢您提供各种选项和描述。让它与@RichardTheKiwi 的选项一起使用。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-13T22:31:54.027

如果您的`dates`列不包含时间信息，您可以逃脱：

```
WHERE dates BETWEEN '20121211' and '20121213' 
```

但是，鉴于您的`dates`专栏实际上是日期时间，您想要这个

```
WHERE dates >= '20121211'
  AND dates < '20121214'  -- i.e. 00:00 of the next day 
```

SQL Server 2008 及更高版本保留[SARGability](http://en.wikipedia.org/wiki/Sargable)（使用索引以获得良好性能的能力）的另一个选项是：

```
WHERE CAST(dates as date) BETWEEN '20121211' and '20121213' 
```

*注意：**始终**使用 ISO-8601 格式 YYYYMMDD 和 SQL Server 以获得明确的日期文字。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-13T22:36:07.373

```
WHERE dates BETWEEN (convert(datetime, '2012-12-12',110) AND (convert(datetime, '2012-12-12',110)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T22:36:12.963

好吧，您正在尝试将 Date 与 Nvarchar 进行比较，这是错误的。应该

```
Where dates between date1 And date2
-- both date1 & date2 should be date/datetime 
```

如果是 date1,date2 字符串；服务器将在过滤之前将它们转换为日期类型。

# c# - 使用正则表达式从字符串中获取带标签的单词

> ID：13869642
> 
> 赞同：6
> 
> 时间：2012-12-13T22:30:09.903
> 
> 标签：c#, regex

好吧，正如标题所说...我想抓取一个在字符串中带有标签的特定单词。

示例： *这是一个**#**包含主题标签的字符串！*

我想从字符串中挑选出单词**contains**作为新字符串。

我可以想象这是一个非常简单的问题，但我真的无法让它发挥作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T22:33:50.543

您希望这种模式有多好？理论上只是：

```
"(?<=#)\w+" 
```

会做的。

编辑，以获得更多答案的完整性：

```
string text = "This is a string that #contains a hashtag!";
var regex = new Regex(@"(?<=#)\w+");
var matches = regex.Matches(text);

foreach(Match m in matches) {
    Console.WriteLine(m.Value);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T22:37:22.597

```
string input = "this is a string that #contains a hashtag!";
var tags = Regex.Matches(input, @"#(\w+)").Cast<Match>()
                .Select(m => m.Groups[1].Value)
                .ToList(); 
```

# ruby-on-rails - 如何在 Rails 中创建指向对象的 json 视图的链接？

> ID：13869647
> 
> 赞同：0
> 
> 时间：2012-12-13T22:30:46.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我需要在下面的代码中更改什么以使其链接到呈现为 json 的视图？

```
<%= link_to 'JSON Link', @mymodel %> 
```

所以我想生成以下网址

```
http://localhost:3000/mymodels/1.json 
```

代替

```
http://localhost:3000/mymodels/1 
```

（这些网址都按预期工作。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T22:35:53.523

为此，您必须指定格式：

```
<%= link_to 'JSON Link', your_model_path(@mymodel, :format => 'json') %> 
```

URL 辅助方法可以通过运行来检索：

```
rake routes 
```

第一列是辅助方法的名称，您应该在其上附加`_path`或`_url`，后者将生成一个绝对 URL。

更多信息参见[Rails 路由指南](http://guides.rubyonrails.org/routing.html)

# sql-server - SQL Server 2005 登录、安全、角色和权限备份

> ID：13869649
> 
> 赞同：0
> 
> 时间：2012-12-13T22:30:51.027
> 
> 标签：sql-server, tsql

我们的非生产服务器会定期从生产中更新信息。这样做的方法是对生产进行完整备份，然后将其还原到非生产 SQL Server。这具有覆盖用户的所有权限的不良影响。

我一直在尝试找到一种方法以脚本的形式将这些权限从数据库中提取出来。这样当数据库刷新时，我可以针对新刷新的数据库运行脚本并恢复权限。

我试图在 sys.database_principals 和 sys.database_permissions 中查找数据，但是我的 SQL-fu 不足以使这些数据变为可用的东西。

获取这些数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:51:52.107

K. Brian Kelley 在[SQLServerCentral](http://www.sqlservercentral.com/blogs/brian_kelley/2009/08/28/quick-2005-2008-script-to-export-permissions/)有一个非常好的脚本。

您还可以尝试此页面右侧的一些“相关”链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T21:01:11.027

这是另一个工作安静相似但支持列级别权限的方法。输出有效，但必须针对更复杂的数据库进行改进。所以，只是给你的想法：

```
SELECT 'GRANT ' + database_permissions.permission_name + ' ON ' +
    CASE database_permissions.class_desc
        WHEN 'SCHEMA' THEN schema_name(major_id)
        WHEN 'OBJECT_OR_COLUMN' THEN
            CASE WHEN minor_id = 0 THEN object_name(major_id) COLLATE Latin1_General_CI_AS_KS_WS
            ELSE (SELECT object_name(object_id) + ' ('+ name + ')'
                  FROM sys.columns 
                  WHERE object_id = database_permissions.major_id 
                  AND column_id = database_permissions.minor_id) end
        ELSE 'other' 
    END + 
    ' TO ' + database_principals.name COLLATE Latin1_General_CI_AS_KS_WS
FROM sys.database_permissions
JOIN sys.database_principals
ON database_permissions.grantee_principal_id = database_principals.principal_id
LEFT JOIN sys.objects -- consider schemas
ON objects.object_id = database_permissions.major_id
WHERE database_permissions.major_id > 0
AND permission_name in ('SELECT','INSERT','UPDATE','DELETE') 
```

# ruby-on-rails - 由于 libv8，Git 无法推送 Heroku Master

> ID：13869650
> 
> 赞同：7
> 
> 时间：2012-12-13T22:31:01.027
> 
> 标签：ruby-on-rails, ruby, rubygems

当我运行 git push heroku master 时出现此错误，ruby 赛车安装正常，libv8 也是如此

```
doom@linux:~/rails_projects/first_app$ git push heroku master
Counting objects: 68, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (55/55), done.
Writing objects: 100% (68/68), 26.16 KiB, done.
Total 68 (delta 6), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.2.2
   Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
   Fetching gem metadata from https://rubygems.org/.........
   Fetching gem metadata from https://rubygems.org/..
   Installing rake (10.0.2)
   Installing i18n (0.6.1)
   Installing multi_json (1.5.0)
   Installing activesupport (3.2.9)
   Installing builder (3.0.4)
   Installing activemodel (3.2.9)
   Installing erubis (2.7.0)
   Installing journey (1.0.4)
   Installing rack (1.4.1)
   Installing rack-cache (1.2)
   Installing rack-test (0.6.2)
   Installing hike (1.2.1)
   Installing tilt (1.3.3)
   Installing sprockets (2.2.2)
   Installing actionpack (3.2.9)
   Installing mime-types (1.19)
   Installing polyglot (0.3.3)
   Installing treetop (1.4.12)
   Installing mail (2.4.4)
   Installing actionmailer (3.2.9)
   Installing arel (3.0.2)
   Installing tzinfo (0.3.35)
   Installing activerecord (3.2.9)
   Installing activeresource (3.2.9)
   Installing coffee-script-source (1.4.0)
   Installing execjs (1.4.0)
   Installing coffee-script (2.2.0)
   Installing rack-ssl (1.3.2)
   Installing json (1.7.5) with native extensions
   Installing rdoc (3.12)
   Installing thor (0.16.0)
   Installing railties (3.2.9)
   Installing coffee-rails (3.2.2)
   Installing jquery-rails (2.0.2)
   Using bundler (1.2.2)
   Installing rails (3.2.9)
   Installing ref (1.0.2)
   Installing sass (3.2.3)
   Installing sass-rails (3.2.5)
   Installing therubyracer (0.11.0) with native extensions
   Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
   /usr/local/bin/ruby extconf.rb
   checking for main() in -lpthread... yes
   checking for v8.h... no
   *** extconf.rb failed ***
   Could not create Makefile due to some reason, probably lack of
   necessary libraries and/or headers.  Check the mkmf.log file for more
   details.  You may need configuration options.
   Provided configuration options:
   --with-opt-dir
   --without-opt-dir
   --with-opt-include
   --without-opt-include=${opt-dir}/include
   --with-opt-lib
   --without-opt-lib=${opt-dir}/lib
   --with-make-prog
   --without-make-prog
   --srcdir=.
   --curdir
   --ruby=/usr/local/bin/ruby
   --with-pthreadlib
   --without-pthreadlib
   --enable-debug
   --disable-debug
   --with-v8-dir
   --without-v8-dir
   --with-v8-include
   --without-v8-include=${v8-dir}/include
   --with-v8-lib
   --without-v8-lib=${v8-dir}/lib
   /tmp/build_201rmwb3smm2n/vendor/bundle/ruby/1.9.1/gems/therubyracer-0.11.0/ext/v8/build.rb:42:in `build_with_system_libv8': unable to locate libv8\. Please see output for details (RuntimeError)
   from extconf.rb:22:in `<main>'
   The Ruby Racer requires libv8 ~> 3.11.8
   to be present on your system in order to compile
   and link, but it could not be found.
   In order to resolve this, you will either need to manually
   install an appropriate libv8 and make sure that this
   build process can find it. If you install it into the
   standard system path, then it should just be picked up
   automatically. Otherwise, you'll have to pass some extra
   flags to the build process as a hint.
   If you don't want to bother with all that, there is a
   rubygem that will do all this for you. You can add
   following line to your Gemfile:
   gem 'libv8', '~> 3.11.8'
   We hope that helps, and we apologize, but now we have
   to push the eject button on this install.
   thanks,
   The Mgmt.
   Gem files will remain installed in /tmp/build_201rmwb3smm2n/vendor/bundle/ruby/1.9.1/gems/therubyracer-0.11.0 for inspection.
   Results logged to /tmp/build_201rmwb3smm2n/vendor/bundle/ruby/1.9.1/gems/therubyracer-0.11.0/ext/v8/gem_make.out
   An error occurred while installing therubyracer (0.11.0), and Bundler cannot continue.
   Make sure that `gem install therubyracer -v '0.11.0'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

 To git@heroku.com:still-tundra-4364.git
 ! [remote rejected] master -> master (pre-receive hook declined)
    error: failed to push some refs to 'git@heroku.com:still-tundra-4364.git' 
```

这是我的 Gemfile

```
 source 'https://rubygems.org'

    gem 'rails', '3.2.9'

    group :development do
    gem 'sqlite3', '1.3.5'
    gem 'libv8', '~> 3.11.8'
    #gem 'libv8', '~> 3.11.8'  # Update version number as needed
    gem "execjs", "~> 1.4.0"
    gem 'therubyracer', '~> 0.11.0beta5'
    end

    # Gems used only for assets and not required
    # in production environments by default.
    group :assets do
    gem 'sass-rails',   '3.2.5'
    gem 'coffee-rails', '3.2.2'
    #gem 'libv8', '~> 3.11.8'

    gem 'uglifier', '1.2.3'
    end

    gem 'jquery-rails', '2.0.2'

    group :production do
    gem 'pg', '0.12.2'
    end 
```

还有我的 Gemlock 文件

```
GEM
remote: https://rubygems.org/
specs:
actionmailer (3.2.9)
  actionpack (= 3.2.9)
  mail (~> 2.4.4)
actionpack (3.2.9)
  activemodel (= 3.2.9)
  activesupport (= 3.2.9)
  builder (~> 3.0.0)
  erubis (~> 2.7.0)
  journey (~> 1.0.4)
  rack (~> 1.4.0)
  rack-cache (~> 1.2)
  rack-test (~> 0.6.1)
  sprockets (~> 2.2.1)
activemodel (3.2.9)
  activesupport (= 3.2.9)
  builder (~> 3.0.0)
activerecord (3.2.9)
  activemodel (= 3.2.9)
  activesupport (= 3.2.9)
  arel (~> 3.0.2)
  tzinfo (~> 0.3.29)
activeresource (3.2.9)
  activemodel (= 3.2.9)
  activesupport (= 3.2.9)
activesupport (3.2.9)
  i18n (~> 0.6)
  multi_json (~> 1.0)
arel (3.0.2)
builder (3.0.4)
coffee-rails (3.2.2)
  coffee-script (>= 2.2.0)
  railties (~> 3.2.0)
coffee-script (2.2.0)
  coffee-script-source
  execjs
coffee-script-source (1.4.0)
erubis (2.7.0)
execjs (1.4.0)
  multi_json (~> 1.0)
hike (1.2.1)
i18n (0.6.1)
journey (1.0.4)
jquery-rails (2.0.2)
  railties (>= 3.2.0, < 5.0)
  thor (~> 0.14)
json (1.7.5)
libv8 (3.11.8.4)
mail (2.4.4)
  i18n (>= 0.4.0)
  mime-types (~> 1.16)
  treetop (~> 1.4.8)
mime-types (1.19)
multi_json (1.5.0)
pg (0.12.2)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
  rack (>= 0.4)
rack-ssl (1.3.2)
  rack
rack-test (0.6.2)
  rack (>= 1.0)
rails (3.2.9)
  actionmailer (= 3.2.9)
  actionpack (= 3.2.9)
  activerecord (= 3.2.9)
  activeresource (= 3.2.9)
  activesupport (= 3.2.9)
  bundler (~> 1.0)
  railties (= 3.2.9)
railties (3.2.9)
  actionpack (= 3.2.9)
  activesupport (= 3.2.9)
  rack-ssl (~> 1.3.2)
  rake (>= 0.8.7)
  rdoc (~> 3.4)
  thor (>= 0.14.6, < 2.0)
rake (10.0.2)
rdoc (3.12)
  json (~> 1.4)
ref (1.0.2)
sass (3.2.3)
sass-rails (3.2.5)
  railties (~> 3.2.0)
  sass (>= 3.1.10)
  tilt (~> 1.3)
sprockets (2.2.2)
  hike (~> 1.2)
  multi_json (~> 1.0)
  rack (~> 1.0)
  tilt (~> 1.1, != 1.3.0)
sqlite3 (1.3.5)
therubyracer (0.11.0)
  ref
thor (0.16.0)
tilt (1.3.3)
treetop (1.4.12)
  polyglot
  polyglot (>= 0.3.1)
tzinfo (0.3.35)
uglifier (1.2.3)
  execjs (>= 0.3.0)
  multi_json (>= 1.0.2)

PLATFORMS
ruby

DEPENDENCIES
coffee-rails (= 3.2.2)
execjs (~> 1.4.0)
jquery-rails (= 2.0.2)
libv8 (~> 3.11.8)
pg (= 0.12.2)
rails (= 3.2.9)
sass-rails (= 3.2.5)
sqlite3 (= 1.3.5)
therubyracer (~> 0.11.0beta5)
uglifier (= 1.2.3) 
```

所以现在似乎有一个已知的问题，我知道没有解决办法

[https://github.com/cowboyd/therubyracer/issues/215](https://github.com/cowboyd/therubyracer/issues/215)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T13:21:35.067

我遇到了同样的问题并尝试了其中一个建议（使用已知的工作`therubyracer`）：

```
# Gemfile
gem 'therubyracer', '0.10.2', :platforms => :ruby 
```

而已。我可以再次部署到 Heroku。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-20T05:50:05.377

您不需要包括 therubyracer et.al。不再。

来自：[https ://devcenter.heroku.com/articles/rails-asset-pipeline](https://devcenter.heroku.com/articles/rails-asset-pipeline)

> 红宝石赛车
> 
> 如果您之前使用的是 therubyracer 或 therubyracer-heroku，则不再需要这些 gem，并且强烈建议您不要使用这些 gem，因为这些 gem 会占用大量内存。

# c# - .NET 图形库，用于在浏览器中显示图像（pdf、.docx 和任何其他格式的图像）

> ID：13869654
> 
> 赞同：1
> 
> 时间：2012-12-13T22:31:14.807
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-4

我正在开发一个 ASP .NET MVC 应用程序，用户可以在其中将文件上传到存储库。这些文件可以是 pdf、doc、任何类型的图像等。

当用户选择要导入的文件时，我想在浏览器中显示该文件，以便他们可以在上传之前查看其内容。

我知道我可以使用某种 IFrame 来显示 pdf，但我正在寻找一些特定的类或 .net 库来实现此功能。

我只需要一个北方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:32:43.750

很棒的遮阳篷...只是想分享我的研究结果，我发现了一个很好的基于客户端的解决方案，由 Mozilla 实验室支持。这是一个基于 HTML5 和 Javascript 的框架，不需要本地代码。

这里是项目网站： [https ://github.com/mozilla/pdf.js](https://github.com/mozilla/pdf.js)

这就是你的能力： http: [//mozilla.github.com/pdf.js/web/viewer.html](http://mozilla.github.com/pdf.js/web/viewer.html)

最后一个很棒的视频解释了一切如何运作 [http://www.youtube.com/watch?v=Iv15UY-4Fg8&noredirect=1](http://www.youtube.com/watch?v=Iv15UY-4Fg8&noredirect=1)

保留我的问题，我们将在服务器上将所有可能的文件转换为 PDF，然后使用此框架呈现此 PDF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:45:46.687

这是一个极其困难的问题。有一些图书馆可以提供帮助。例如，PDF 文件可能会使用[ghostscript](http://www.ghostscript.com/)呈现为图像。Word 和 Excel 文件可以转换为 PDF 或带有许多库的图像。他们中没有一个，AFAIK，非常擅长它，所以我不能推荐一个。

您可以自动化 MSO 以执行到 PDF 的转换，但这对于服务器代码来说绝对不安全。另一种可能性是将源文档转换为 SWF 文件（如[flexpaper](http://flexpaper.devaldi.com)）并在 Flash 中显示。那里有一些很棒的库，但它会限制您支持的客户端。Sharepoint 也支持提供其中一些功能。其他人使用[OpenOffice 来转换](https://stackoverflow.com/questions/355447/openoffice-command-line-pdf-creation)MSO 文档，但质量也有所下降。

我不能真正建议任何具体的方向，因为它高度依赖于您/您的公司愿意花费的费用和预期的结果。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T00:03:49.520

您可以尝试依赖 Windows 和资源管理器缩略图，就像[这里](https://stackoverflow.com/questions/6918586/windows-api-code-pack-thumbnail-gives-preview-thumb-of-pdf-but-not-word-or-excel)一样，但是您必须确保：

1.  您可以以最复杂的方式滥用服务器（安装东西，从 ASP.NET 与 shell 对话）

2.  您在服务器上为要预览的每种类型都安装了缩略图提供程序。我想从你可以在资源管理器中看到缩略图的那一刻起，你就准备好了。因此，对于 pdf，您可能需要安装 Adob​​e 的 PDF Reader。

3.  Docx 文件保存时应检查缩略图（见[链接](https://stackoverflow.com/questions/6918586/windows-api-code-pack-thumbnail-gives-preview-thumb-of-pdf-but-not-word-or-excel)）。似乎没有其他简单、免费的方法可以将 docx 转换为缩略图。我遇到的“最佳”解决方案是以某种方式再次自动保存它，并确保选中缩略图选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T00:34:14.617

我不想说这是不可能的，但它不能通过有限的努力来完成。

您要求的是基于浏览器的解决方案，因为您希望用户能够在上传**之前“查看”文档。**

因此，您不能使用服务器端解决方案，这本质上是通过引用“.Net 库”来询问的。

.Net 库依赖于已安装的 .Net 版本，该版本并不存在于所有存在图形浏览器的操作系统的所有版本中。

接下来，浏览器安全性的最新更改不允许在输入字段中读取所选文件的完整客户端文件名。

您必须依靠 HTML5 及其 FileReader 来访问文件的字节流，但即便如此，您也只能从图像文件中检索图像。（[见样本](http://www.script-tutorials.com/pure-html5-file-upload/)）

由于浏览器和平台支持，不包括 Flash、ActiveX、Java 中基于浏览器的解决方案，这使得 JavaScript 成为唯一“合理”的解决方案：您需要为每种支持的格式提供一个库，以便将文件转换为图像浏览器支持的图像格式，或提取文件的文本（+图像）表示。

# c - 如何检查C中是否为空数组

> ID：13869656
> 
> 赞同：10
> 
> 时间：2012-12-13T22:31:16.613
> 
> 标签：c, arrays

我在 C 中有以下代码：

```
int i = 0;
char delims[] = " \n";
char *result = NULL;
char * results[10];
result = strtok( cmdStr, delims );
while( result != NULL )
{
     results[i] = result;
     i++;
     result = strtok(NULL, " \n");
}

if(!results[1])
{
    printf("Please insert the second parameter...\n");
}
else
{
    ...
} 
```

`else`即使`results[1]`为空，它也总是执行条件。

我试过`results[1] == NULL`但没有成功。

如何检查它是否为空？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-13T22:32:54.847

初始化`results`数组，使所有元素为`NULL`：

```
char* results[10] = { NULL }; 
```

在发布的代码中，元素是未初始化的，并将保存随机值。

此外，防止超出`results`数组的范围：

```
while (i < 10 && result)
{
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-13T22:42:27.613

C 中不存在“空数组”或“空元素”之类的东西。数组始终包含固定的预定数量的元素，并且每个元素始终包含一些值。

引入“空”元素概念的唯一方法是自己实现它。您必须决定将*保留*哪个元素值用作“空值”。然后你必须用这个值初始化你的数组元素。稍后，您会将元素与“空”值进行比较，以查看它们是否......好吧，是空的。

在您的情况下，有问题的数组由指针组成。在这种情况下，选择空指针值作为指定“空”元素的保留值显然是一个不错的选择。将结果数组声明为

```
char * results[10] = { 0 }; // or `= { NULL };` 
```

稍后将元素检查为

```
if (results[i] == NULL) // or `if (!results[i])`
  /* Empty element */ 
```

# azure - 未找到领域（ACS、ADDS、AD FS）

> ID：13869657
> 
> 赞同：0
> 
> 时间：2012-12-13T22:31:18.237
> 
> 标签：azure, active-directory, acs, adfs, federated-identity

我正在玩 azure 免费试用版并遵循本教程 (http://haishibai.blogspot.de/2012/11/complete-walkthrough-setting-up-adfs-20.html)，标题为“设置 ADFS 2.0 服务器在 Windows Azure IaaS 上并将其配置为 Windows Azure ACS 中的身份提供程序”。

在启动 MVC Web 应用程序时，我在浏览器中遇到以下情况：

> 处理您的请求时发生错误。HTTP 错误代码：400 消息：ACS20000：处理 WS-Federation 登录请求时出错。内部消息：ACS50001：未找到具有领域“https://ACS-NAMESPACE.accesscontrol.windows.net/”的依赖方。跟踪 ID：64827ce0-71d2-49bf-996c-aadf23779fc7 时间戳：2012-12-13 22:17:12Z

其中 ACS-NAMESPACE 是我的 ACS 命名空间的名称。

我可以说我正确地遵循了教程中给出的步骤，因为我经历了几次。但是，我无法弄清楚我的领域规范有什么问题。

注意：当我在 ACS 而不是 ADFS 中将 google 或 windows live 配置为身份提供者时，一切正常。

谢谢，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:30:12.217

如果在 ACS 上未找到该领域，则可能使用 powershell 将其错误地配置为 WAAD 管理服务上的 ServicePrincipal。

请检查以下内容并确保您正在配置正确的 ACS 命名空间（而不是 WAAD 租户名称）：

通过使用查看它是否正确列出

> 获取 MsolServicePrincipal

要创建另一个使用以下 cmds：

> $replyUrl = New-MsolServicePrincipalAddresses -Address " [https://ACSNAMESPACE.accesscontrol.windows.net/](https://ACSNAMESPACE.accesscontrol.windows.net/) " New-MsolServicePrincipal -ServicePrincipalNames @(" [https://ACSNAMESPACE.accesscontrol.windows](https://ACSNAMESPACE.accesscontrol.windows) .net/") -DisplayName "ACSNAMESPACE 命名空间" -地址 $replyUrl

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T01:38:08.397

该领域应该是您的 MVC Web 应用程序的 URL，而不是 ACS URL - 有关说明，请参见[http://msdn.microsoft.com/en-us/library/windowsazure/gg185906.aspx#BKMK_1](http://msdn.microsoft.com/en-us/library/windowsazure/gg185906.aspx#BKMK_1)。

# asp.net - 定位多个动态控件

> ID：13869661
> 
> 赞同：1
> 
> 时间：2012-12-13T22:31:32.793
> 
> 标签：asp.net, vb.net, webforms, position

我正在向我的网络表单添加多个动态控件，我知道如何定位单个控件，但是如何定位多个控件。例如，我有一个下拉列表，用户可以在其中选择要添加到 Web 表单的控件数量，然后我根据选择创建控件数量，例如 5 个下拉列表，我可以将它们一个接一个地放置。

下面是一个用绝对位置创建的。

```
Protected Sub Button1_Click(sender As Object, e As EventArgs)  Handles Button1.Click
        For i As Integer = 0 To ddlFieldNames.SelectedIndex

            Dim combo As New RadComboBox()
            combo.Style("Position") = "Absolute"
            combo.Style("Top") = "10px"
            combo.Style("Left") = "200px"
            Me.Panel1.Controls.Add(combo)
            combo.ID = "combo" + i.ToString()
            combo.DataSource = Me.odsField
            combo.DataTextField = "FieldNames"
            combo.DataValueField = "FieldNames"
            combo.DataBind()
        Next

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:54:11.890

尝试将 Panel1 样式保持为相对，然后组合框将根据面板坐标获得绝对定位。

另外，不要在代码中分配 css 属性，而是创建一个 css 类并分配它，这样您就可以在不编译代码的情况下更改定位。

您是否还尝试将组合框放在 div 中，它会自动为每个组合框引入新行。

# asp.net-mvc - Asp.net MVC 上传音频文件

> ID：13869666
> 
> 赞同：0
> 
> 时间：2012-12-13T22:31:46.813
> 
> 标签：asp.net-mvc, audio

好的，所以我有一个 Web 应用程序，我正在尝试设置它以允许用户通过 httpPost 上传音频文件。我遇到的问题是我使用的函数将文件作为 HttpPostedFileBase 接收。当我调试时，我可以将文件格式视为音频格式，但似乎无法转换它。我使用 MemoryStream 对图像做了类似的事情，但我不知道音频格式是否有类似的东西。这是我在客户端上传文件的内容。

```
@using (Html.BeginForm("Index", "Image", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <input type="file" name="file" />
    <input type="submit" value ="ok" />
} 
```

在服务器端我有这个。

```
[HttpPost]
        public ActionResult Index(HttpPostedFileBase file)
        {            
            return View();
        } 
```

现在我想要完成的是将该变量文件转换为我可以在某种播放器中使用的 mp3 格式。我故意避免使用存储此文件的文件系统，它将通过数据库作为一个整体存储，因此我无法使用路径。我正在尝试直接播放文件。我研究过的想法是将 cshtml 上的输入类型从“文件”更改为其他可能有效的方法，或者找到一种方法来转换 HttpPostedFileBase 也可以。任何方向表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:46:58.383

你加了吗？

在添加下

如果问题仍然存在，请检查此 [http://weblogs.asp.net/jalpeshpvadgama/archive/2012/04/20/file-upload-in-asp-net-mvc3.aspx](http://weblogs.asp.net/jalpeshpvadgama/archive/2012/04/20/file-upload-in-asp-net-mvc3.aspx)

[如何在 ac# mvc.net 应用程序控制器中处理使用 PhoneGap 上传的音频文件？](https://stackoverflow.com/questions/7486725/how-to-handle-an-audio-file-uploaded-using-phonegap-in-a-c-sharp-mvc-net-applica)

# javascript - 更改其他文本框文本时更改文本框的文本

> ID：13869670
> 
> 赞同：3
> 
> 时间：2012-12-13T22:31:57.160
> 
> 标签：javascript, jquery

我有两个输入类型 = 文本。文本框的文本由自定义日期选择器模块填充。当第一个文本框的文本更改时，我想更改第二个文本框的内容。

```
<input type = "text" id = "one"> 
<br>
<input type = "text" id = "two">
<br>
<button onclick="myFunction()">Click me</button> 
```

Javascript

```
function myFunction()
{
    document.getElementById('two').value = 'hello';
} 
```

在这里，我刚刚模拟了按钮单击时文本框“二”的变化，但实际上它是由其他一些方法改变的。当文本框“二”的值发生更改时，我想更改文本框“一”的文本。当文本被显式更改时，诸如 onchange 和 keyup 之类的事件将不起作用。每隔 1 秒检查两个文本框的值是否相等对我来说也不是一个选项。

纯 Javascript 或 jQuery 都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:03:09.830

下面是一个使用 jQuery 的例子：

实时取景：http: [//jsbin.com/aqiyaz/1/](http://jsbin.com/aqiyaz/1/)

代码：http: [//jsbin.com/aqiyaz/1/edit](http://jsbin.com/aqiyaz/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:51:52.700

我的解决方案建立在两个 javascript 函数上，如下所示：

```
function myFunction()
{
    ob = document.getElementById('two')
        ob.value = 'hello';
    ob.focus();
    ob.blur();

}
function sync(){
   document.getElementById('one').value = document.getElementById('two').value 
} 
```

这是HTML：

```
<input type = "text" id = "one"> 
<br>
<input type = "text" id = "two" onblur="sync()">
<br>
<button onclick="myFunction()">Click me</button>​ 
```

以下是一个演示：http: [//jsfiddle.net/saidbakr/hD6Sx/](http://jsfiddle.net/saidbakr/hD6Sx/)

# java - 为什么 log4j 不记录到我使用 log4j.xml 文件配置的文件？

> ID：13869674
> 
> 赞同：1
> 
> 时间：2012-12-13T22:32:17.340
> 
> 标签：java, tomcat, log4j

我在各种环境中都遇到过这种情况，但从未找到一致的解释。我听说过关于 Tomcat 容器“混乱”的评论，其中可能有不同的日志记录实现，然后我的应用程序或类加载器不知道要使用哪种配置。

这是日志记录工作一次，然后在一个小时后没有记录，log4j.xml 文件没有更改时的那些令人抓狂的场景之一。我的 log4j.xml 文件位于 /src 目录的根目录中，因此它被部署到 /WEB-INF/classes 目录的根目录。我正在使用 Java 6、Tomcat 6，它是一个 GWT 2.3 应用程序，在 Windows 7 机器上的 Eclipse Helios 内部运行。

对于它的价值，这里是 log4j.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd" >
<log4j:configuration>
    <appender name="stdout" class="org.apache.log4j.ConsoleAppender">
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{ABSOLUTE}
      %5p %c{1}:%L - %m%n"/>
        </layout>
    </appender>
    <appender name="fileAppender" class="org.apache.log4j.DailyRollingFileAppender">
        <param name="File" value="${catalina.home}/logs/log4j.log"/>
        <param name="DatePattern" value="'.'yyyy-MM-dd"/>
        <param name="Append" value="true"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d
                %-5p  [%c{1}] %m %n" />
        </layout>
    </appender>
    <root>
        <priority value="debug"></priority>
        <appender-ref ref="fileAppender"/>
    </root>
</log4j:configuration> 
```

这是我在课堂上获取记录器的方法

```
protected static Logger m_logger = Logger.getLogger(RemoteLoggingServiceImpl.class); 
```

然后实际登录我只是做

```
m_logger.debug("my log message"); 
```

使用上面的代码，它不会写入 logj4.log 文件。

然后我尝试了以下操作，将其记录到 log4j.log 文件，但没有像我预期的那样记录到 otherFile.log 文件。这是更新的 log4j.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd" >
<log4j:configuration>
    <appender name="stdout" class="org.apache.log4j.ConsoleAppender">
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{ABSOLUTE}
      %5p %c{1}:%L - %m%n"/>
        </layout>
    </appender>
    <appender name="fileAppender" class="org.apache.log4j.DailyRollingFileAppender">
        <param name="File" value="${catalina.home}/logs/log4j.log"/>
        <param name="DatePattern" value="'.'yyyy-MM-dd"/>
        <param name="Append" value="true"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d
                %-5p  [%c{1}] %m %n" />
        </layout>
    </appender>
    <appender name="otherFileAppender" class="org.apache.log4j.DailyRollingFileAppender">
        <param name="File" value="${catalina.home}/logs/otherFile.log"/>
        <param name="DatePattern" value="'.'yyyy-MM-dd"/>
        <param name="Append" value="true"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d
                %-5p  [%c{1}] %m %n" />
        </layout>
    </appender>
    <root>
        <priority value="debug"></priority>
        <appender-ref ref="fileAppender"/>
    </root>
    <logger name="com.mypackage.myLoggingClass">
        <level value="debug"/>
        <appender-ref ref="otherfileAppender"/>
    </logger>
</log4j:configuration> 
```

我用这个来创建这个记录器：

```
protected static Logger m_logger = Logger.getLogger("com.mypackage.myLoggingClass"); 
```

谁能解释为什么它在第一种情况下根本不记录，和/或为什么在第二种情况下它记录到 log4j.log 而不是 otherFile.log？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:08:01.147

首先，您没有列出您使用的 Log4j 版本，所以我假设您使用的是相对较新的 Log4j 版本。

在您提供的第一个示例代码块中：

```
 <root>
        <priority value="debug"></priority>
        <appender-ref ref="fileAppender"/>
    </root> 
```

您尚未修改根附加程序的日志记录级别。根据 [log4j 2.x 文档](http://logging.apache.org/log4j/2.x/manual/configuration.html#AutomaticConfiguration)

```
    如果不存在配置文件，则 logback 将默认为
    DefaultConfiguration 将设置一个最小的日志记录环境
    由附加到根记录器的 ConsoleAppender 组成。输出
    将使用设置为模式的 PatternLayout 进行格式化
    “%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n”。

    请注意，默认情况下，根记录器分配给 Level.ERROR。

```

为了将记录器输出到第一个示例中的文件，您需要将根记录器更改为：

```
 <root level="debug">
        <appender-ref ref="fileAppender"/>
    </root> 
```

调试日志不起作用的一个很好的指标是，由于默认日志级别设置为“错误”，因此您也不会在控制台上看到任何输出。我总是喜欢在我的记录器上有一个控制台附加程序，这样我就可以看到我的应用程序实际上正在记录。

```
 <appender-ref ref="Console"/> 
```

在第二个示例中，根记录器不会记录到文件中，原因与第一个示例完全相同。但是，您设法正确设置了“com.mypackage.myLoggingClass”记录器，这就是当您使用基于“com.mypackage.myLoggingClass”类的记录器时您的应用程序具有调试输出的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:26:33.653

据我所知，您的所有原始假设都是正确的，并且应该打印日志，所以在这种情况下我要检查一些事情：

*   检查您的类路径，您是否导入了其他导致冲突的日志库 jar（slf4j、common-logging 等）？
*   检查您的导入，它真的是 org.apache.log4j.*，而不是其他日志库
*   检查[gwt logging guide](https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging)，它是否与 log4j 冲突？
*   检查 log4j.log 上的文件系统锁定，是否有任何其他进程锁定它导致写入失败？
*   检查你的war/ear 文件，log4j.xml 真的放在WEB-INF/classes 上吗？
*   检查 ${catalina.home} 确实解析到您想要的路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T04:51:12.837

您的 JRE 使用一个名为的文件`logging.properties`来设置处理程序和日志级别以及一些其他设置，以便在所有 Java 命令之间全局共享。
很多时候它看到默认是，您可以尝试像下面这样`handlers= java.util.logging.ConsoleHandler`附加。`java.util.logging.FileHandler`

```
handlers= java.util.logging.FileHandler, java.util.logging.ConsoleHandler 
```

还尝试将文件格式化程序设置为 SimpleFormatter 而不是 XML 格式化程序

```
java.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter 
```

# php - 如何使用 php 在字符串中逐字打印 \n

> ID：13869676
> 
> 赞同：0
> 
> 时间：2012-12-13T22:32:20.733
> 
> 标签：php, string, parsing, newline

我需要在`\n`里面打印`this.value.split`

```
$rows .= "<textarea onkeyup='this.rows = (this.value.split(\"\n\").length||1);' ... 
```

我把代码剪短了，这样更容易阅读。

PHP 将其解析为一个新行。我怎样才能重写这个字符串，以便它实际打印`\n`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T22:34:14.020

两种方式：

```
echo "\\n"; //escape it

echo '\n'; //use single quotes 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T22:34:08.757

你需要反斜杠你的反斜杠：

```
\\n 
```

或者，您可以使用单引号来分隔字符串，但这意味着您必须转义所有文字单引号。

这是一个演示： http: [//phpfiddle.org/main/code/s7g-ra9](http://phpfiddle.org/main/code/s7g-ra9)

# tsql - Multi-Table Selfjoins - 有没有好的方法来做到这一点？

> ID：13869685
> 
> 赞同：0
> 
> 时间：2012-12-13T22:33:00.947
> 
> 标签：tsql, sql-server-2005, self-join

我试图使用这个查询从数据库中提取一些信息，

```
SELECT dbo.AfterHoursParameterSetup.Customer_id
, dbo.tblCustomer.Company
, dbo.tblDevices.device_id
, dbo.AfterHoursParameterSetup.DeviceMasterID
, dbo.tblDriverType.DriverType
, dbo.tblGroups.GroupName
, dbo.AfterHoursParameterSetup.ReportBy
, dbo.AfterHoursParameterSetup.TripTimeFilter
, dbo.AfterHoursParameterSetup.chkWeekEndTravel
, dbo.AfterHoursParameterSetup.WeekdayStart
, dbo.AfterHoursParameterSetup.WeekDayEnd
, dbo.AfterHoursParameterSetup.WeekEndFrom
, dbo.AfterHoursParameterSetup.WeekEndTo
, dbo.AfterHoursParameterSetup.ReportType
FROM dbo.AfterHoursParameterSetup
FULL JOIN dbo.tblCustomer
ON dbo.AfterHoursParameterSetup.Customer_id = dbo.tblCustomer.Customer_id
FULL JOIN dbo.tblDriverType
ON dbo.AfterHoursParameterSetup.DeviceMasterID = dbo.tblDriverType.DriverType_id
FULL JOIN dbo.tblGroups
ON dbo.AfterHoursParameterSetup.DeviceMasterID = dbo.tblGroups.Group_id
FULL JOIN dbo.tblDevices
ON dbo.AfterHoursParameterSetup.DeviceMasterID = dbo.tblDevices.device_id
ORDER BY dbo.AfterHoursParameterSetup.Customer_id ASC 
```

有没有另一种方法来构造这个查询，以便我可以消除 NULL 值？dbo.AfterHoursParameterSetup.DeviceMasterID 将所有内容链接在一起，但该列使用来自三个不同表的值，因此在没有匹配值的情况下，它会为不存在匹配连接值的所有其他选定列返回 NULL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:02:27.963

如果我理解你的问题，你想要表格的交集。如果是这样，用户内部加入。

```
SELECT dbo.AfterHoursParameterSetup.Customer_id
    , dbo.tblCustomer.Company
    , dbo.tblDevices.device_id
    , dbo.AfterHoursParameterSetup.DeviceMasterID
    , dbo.tblDriverType.DriverType
    , dbo.tblGroups.GroupName
    , dbo.AfterHoursParameterSetup.ReportBy
    , dbo.AfterHoursParameterSetup.TripTimeFilter
    , dbo.AfterHoursParameterSetup.chkWeekEndTravel
    , dbo.AfterHoursParameterSetup.WeekdayStart
    , dbo.AfterHoursParameterSetup.WeekDayEnd
    , dbo.AfterHoursParameterSetup.WeekEndFrom
    , dbo.AfterHoursParameterSetup.WeekEndTo
    , dbo.AfterHoursParameterSetup.ReportType
FROM dbo.AfterHoursParameterSetup 
    INNER JOIN dbo.tblCustomer ON dbo.AfterHoursParameterSetup.Customer_id = dbo.tblCustomer.Customer_id
    INNER JOIN dbo.tblDriverType ON dbo.AfterHoursParameterSetup.DeviceMasterID = dbo.tblDriverType.DriverType_id
    INNER JOIN dbo.tblGroups ON dbo.AfterHoursParameterSetup.DeviceMasterID = dbo.tblGroups.Group_id
    INNER JOIN dbo.tblDevices ON dbo.AfterHoursParameterSetup.DeviceMasterID = dbo.tblDevices.device_id
ORDER BY dbo.AfterHoursParameterSetup.Customer_id ASC 
```

# websphere - Websphere 上涉及 CXF 的类加载问题，父级最后没有帮助

> ID：13869686
> 
> 赞同：2
> 
> 时间：2012-12-13T22:33:14.783
> 
> 标签：websphere, cxf, nosuchmethoderror

我的问题涉及 CXF 和 wsdl4j_1.6.2.jar 与某些东西碰撞，大概是 axis-wsdl4j.jar。

我已阅读：[我的 Apache CXF 客户端有什么问题？](https://stackoverflow.com/questions/6066054/whats-wrong-with-my-apache-cxf-client)

我的项目不包括战争中的axis-wsdl4j.jar。我还要求我们的管理员将 Websphere 切换到 Parent Last。我仍然得到这个：

> [12/13/12 16:01:28:378 CST] 0000001b ServletWrappe E SRVE0068E：在 servlet 的服务方法之一中抛出未捕获的异常：CXFServlet。抛出异常： java.lang.RuntimeException: org.apache.cxf.interceptor.Fault: javax/wsdl/xml/WSDLReader.readWSDL(Ljavax/wsdl/xml/WSDLLocator;Lorg/w3c/dom/Element;) Ljavax/wsdl /定义; 在 org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:116) 在 org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:322) 在 org.apache.cxf.transport.ChainInitiationObserver.onMessage (ChainInitiationObserver.java:122) 在 org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:211) 在 org.apache.cxf.transport.servlet。267) 在 com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214) 在 com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113) 在 com .ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165) 在 com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217) 在 com.ibm.io.async.AsyncChannelFuture $1.run(AsyncChannelFuture.java:205) at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1473) 原因：org.apache.cxf.interceptor.Fault：javax/wsdl/xml/ WSDLReader.readWSDL(Ljavax/wsdl/xml/WSDLLocator;Lorg/w3c/dom/Element;)Ljavax/wsdl/Definition; 在 org.apache.cxf.service.invoker.AbstractInvoker。createFault(AbstractInvoker.java:162) at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:128) at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:167) at org .apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:94) at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58) at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage( ServiceInvokerInterceptor.java:94) at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262) ... 26 更多原因：java.lang.NoSuchMethodError: javax/wsdl/xml/WSDLReader.readWSDL(Ljavax /wsdl/xml/WSDLLocator;Lorg/w3c/dom/Element;)Ljavax/wsdl/Definition; 在 org.apache.cxf.wsdl11.WSDLManagerImpl.loadDefinition(WSDLManagerImpl.

项目由 Maven 构建，仅通过 Continuum 部署到 Websphere；并且所有设置都通过请求更改。应用程序在本地 Tomcat 上完美运行。

编辑：这最终通过以下方式修复：

1.  将 wsdl4j.jar 复制到 /usr/WebSphere/AppServer/appLibs/APPNAME 目录。
2.  以前的 Chmod 775。
3.  在 websphere 管理控制台中，环境（左侧）、共享库，并定义一个容器范围的共享库，上面的名称为 APPNAME。
4.  将 jar 添加到共享库的类路径中。
5.  服务器（左侧）、APPNAME java、进程管理、类加载器，并确保“首先使用应用程序类加载器加载类”
6.  单击类加载器并将共享库分配给它。
7.  重启服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:42:10.343

我认为您需要禁用 Jax ws 引擎

尝试如下设置 JVM 属性

```
com.ibm.websphere.webservices.DisableIBMJAXWSEngine=true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:59:41.627

这就是我要做的。

在 WAS 运行时打开详细类加载并查看包含 WSDLReader 的 JAR。

根据详细的类加载，检查这是否是您希望在运行时（开始时）使用的 JAR。

高温高压

# c# - 如何在 WebView 中使用 InvokeScript 处理 JS 事件

> ID：13869690
> 
> 赞同：0
> 
> 时间：2012-12-13T22:33:33.507
> 
> 标签：c#, javascript, windows-8, webview, winrt-xaml

为了让 C# 从 WebView 中提取信息或对事件做出反应，我们使用 InvokeScript。但是，InvokeScript 似乎没有属性附加到事件。怎么了？

```
private void WebView_LoadCompleted(object sender, NavigationEventArgs e)
{
    var _WebView = sender as WebView;
    _WebView.AllowedScriptNotifyUris = WebView.AnyScriptNotifyUri;
    _WebView.AllowedScriptNotifyUris.Add(e.Uri);

    // test1 fires immediately
    _WebView.InvokeScript("execScript", new[] { "window.external.notify('test1'); " });

    // test2 never fires
    _WebView.InvokeScript("execScript", new[] { "document.addEventListener = function (e) { window.external.notify('test2'); }" });

    // test3 never fires
    _WebView.InvokeScript("execScript", new[] { "function x(e) { window.external.notify('test3'); } document.addEventListener('onmousedown', x);" });

}

private void WebView_ScriptNotify(object sender, NotifyEventArgs e)
{
    // listen for external.notify event
    System.Diagnostics.Debugger.Break();
} 
```

# java - 努力将数组值传递给方法

> ID：13869692
> 
> 赞同：0
> 
> 时间：2012-12-13T22:33:47.377
> 
> 标签：java, arrays, methods

我正在努力将数组值从一种方法获取到另一种方法而不重复该方法（该方法使用 getScannerInput 获得评委分数（我们必须在我的大学使用它而不是其他选项：-/）。

我的程序如下；

```
public class mark4

{

static int SIZE = 10; // Define array size
static int classMarks[] = new int [SIZE]; // Initialise array classMarks[]
static double max = 0; 
static double min = 0;
static double total = 0;
static double averagescore = 0;
static int pass = 0;

 public static int[] getMarks()
{
    int[] classMarks = new int [SIZE];

    for(int i = 0; i< classMarks.length; i++) // Start input loop to obtain marks
    {
        classMarks[i] = getScannerInput.anInt("Please enter students mark: ");
    }

        System.out.print("\nThe marks for this class are; "); // Output initial line to be completed with students marks

    for(int i=0; i<classMarks.length; i++) // Start output loop to output students marks
    {
        System.out.print(classMarks[i] + ", "); // Output marks separated by a comma and a space

    }

    return classMarks;
}

public static double averagescore(){

    for(int i=0; i<classMarks.length; i++) // Start loop to calculate total of all marks.
    {
        total = classMarks[i] + total; // Calculate total of array by traversing and adding to 'total' variable each time
        averagescore = total / classMarks.length; // Divide array total by array length to find average

    } // end average loop

        return averagescore;    

}

public static double min(){

    min = classMarks[0]; // Set min to first value of array to compare to rest

    for(int i=0; i<classMarks.length; i++) // Start loop to calculate minimum and maximum scores
    {
            if(classMarks[i] < min) // Compare values on each iteration, if value is less than current 'min' value, replace min with new value
                    min = classMarks[i];

    } // end minloop

    return min;
}

public static double max(){

    max = classMarks[0]; // Set max to first value of array to compare to rest

    for(int i=0; i<classMarks.length; i++) // Start loop to calculate minimum and maximum scores
    {
        if(classMarks[i]>max) // Compare values on each iteration, if value is greater than current 'max' value, repalce max with new value
                    max = classMarks[i];

    } // end max loop

    return max;
}

public static int pass(){

    for(int i=0; i<classMarks.length; i++) // Start loop to calculate how many students passed with a mark of 8 or higher
    {
            if( classMarks[i] >= 8 ) // Compare the current score in each iteration to 8 to see if it is more than or equal to the pass mark

                    pass++; // If current value is greater than or equal to pass mark, add one to pass counter.

    } // end pass loop

    return pass;
}

public static void main (String args[])
{

    int[] classMarks = getMarks();
    double averagescore = averagescore();
    double min = min();
    double max = max();
    int pass = pass();

                System.out.print("\nThe number of students who passed the exam is " + pass);
                System.out.printf("\nThe class average correct to 1 decimal place is: %4.1f", averagescore); // Output average score to 1 decimal place
                System.out.printf("\nThe lowest mark obtained in this class was: %3.1f", min); // Output lowest score to one decimal place (in case of half marks...)
                System.out.printf("\nThe highest mark obtained in this class was: %3.1f", max); // Output highest score to one decimal place (in case of half marks...)

} // end main

} // end class 
```

程序编译正确，但我得到的结果都是 0 或 0.0，这表明这些方法在 getScores() 方法期间没有采用数字输入。

如果我尝试在使用的方法中定义 classMarks[] 的结果；

```
int[] classMarks = getMarks(); 
```

它重复整个 getScores() 方法，并在每次遇到 main 方法时再次询问结果。

我知道这可能是一个相当简单的答案，但我们不得不在评估中将其作为一个问题来做，但我错过了关于方法和数组的讲座，而且我在一些次要元素上有点挣扎。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T22:40:11.630

你宣布这个，我相信这是你打算使用的，

```
static int classMarks[] = new int [SIZE]; 
```

但是，在 getMarks() 中，您声明了一个新的：

```
int[] classMarks = new int [SIZE]; 
```

这将在该方法的范围内使用。

要么，您应该使用类范围变量，而不是声明将覆盖它的其他变量（即，删除上面显示的第二个声明），或者您的 min、max 等方法应该采用一个 int[] 参数，并且您可以将 getMarks() 返回的数组传递给他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:38:42.693

在您的主要方法中，您声明了 classMarks，它隐藏了您在类级别拥有的静态 classMarks。您还在 getMarks 方法中声明*了另一个*classMarks 数组，因此您的扫描仪永远不会读入共享的 classMarks 数组，只会读入 getMarks 中的本地数组，然后将其返回并放置在 main 中的本地 classMarks 变量中，但永远不会进入类中所有其他方法引用的静态变量。

# django - Django 翻译总是以英文呈现

> ID：13869693
> 
> 赞同：1
> 
> 时间：2012-12-13T22:33:47.740
> 
> 标签：django, translation

在尝试了我能找到的关于这个主题的所有建议之后，我的翻译仍然无法正常工作。

/settings.py 文件

```
# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

LOCALE_PATHS = (
    '/Users/samb/Projects/transtest/locale'
)

# Custom Languages
ugettext = lambda s: s

LANGUAGES = (
    ('de', ugettext('German')),
    ('en', ugettext('English')),
    ('fr', ugettext('French')),
    ('fr-CA', ugettext('French Canadian')),
)

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not        
# to load the internationalization machinery.
USE_I18N = True                                                                  

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.locale.LocaleMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
) 
```

视图.py

```
from django.shortcuts import render_to_response
from django.template import RequestContext

def trans(request):
    return render_to_response('index.html', context_instance=RequestContext(request)) 
```

我的模板文件（index.html）

```
{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
{% get_available_languages as LANGUAGES %}
<html>
    <head>
        <title>translations</title>
    </head>
    <body>
        {% for l in LANGUAGES %}
            {{ l }}<br />
        {% endfor %}
        {{ LANGUAGE_CODE }}<br />
        {% trans "Welcome to my site" %}
    </body>
</html> 
```

po 文件（已编译）位于 /Users/samb/Projects/transtest/locale/fr/LC_MESSAGES

```
#: transtest/templates/index.html:13
msgid "Welcome to my site"
msgstr "Please work" 
```

我永远无法让“欢迎来到我的网站”工作。我的模板中的 LANGUAGES 和 LANGUAGE_CODE 变量都在工作（除非我'Accept_language：fr_CA'）。

在阅读了关于这个主题的所有其他帖子后，仍然遇到同样的问题，我觉得我一定犯了一个愚蠢的错误，或者完全错过了一个重要的步骤。有什么想法吗？

更新：这就是我测试翻译的方式：

```
telnet localhost 8000
Connected to localhost.
Escape character is '^]'.
GET /
Accept_language: fr
<html>
    <head>
        <title>Translations</title>
    </head>
    <body>

            (&#39;de&#39;, u&#39;Allemand&#39;)<br />

            (&#39;en&#39;, u&#39;Anglais&#39;)<br />

            (&#39;fr&#39;, u&#39;Fran\xe7ais&#39;)<br />

            (&#39;fr-CA&#39;, u&#39;French Canadian&#39;)<br />

        fr<br />
        Welcome to my site
    </body>
</html>
Connection closed by foreign host. 
```

我注意到语言正在被翻译，但“欢迎来到我的网站”却没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:45:25.020

文档[在这里](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#how-django-discovers-language-preference)说 LocaleMiddleware ...

> ... 应该在 SessionMiddleware 之后，因为 LocaleMiddleware 使用会话数据。它应该出现在 CommonMiddleware 之前，因为 CommonMiddleware 需要一种激活的语言来解析请求的 URL。

当您在定义`MIDDLEWARE_CLASSES`.

# opengl-es - 使用 LibGDX 的 OpenGL ES 上下文丢失

> ID：13869701
> 
> 赞同：1
> 
> 时间：2012-12-13T22:34:11.040
> 
> 标签：opengl-es, libgdx, textures, loss, openglcontext

我正在使用 LibGDX 开发一个应用程序，并且我正在解决用户离开应用程序并返回应用程序时因上下文丢失而导致的一些各种问题。一般来说，这不是什么大问题，但在整个应用程序的使用过程中，我偶尔会在应用程序本身中构建自定义纹理，以便在几个不同的区域使用。

当用户返回应用程序时，绝对必须保留这些纹理，但我不确定这样做的最佳方法是什么。那么，简单地说，保存不能简单地在需要时重新加载的纹理的正确方法是什么？

# c# - 如何配置 Fitnesse 以测试 DAL？

> ID：13869710
> 
> 赞同：1
> 
> 时间：2012-12-13T22:34:27.797
> 
> 标签：c#, tdd, fitnesse, fitsharp

我正在尝试使用 Fitnesse 和 FitSharp 在我的 Web 应用程序的 DAL 中测试方法。我在阅读 app.config 时遇到问题。

得到错误：

```
System.Reflection.TargetInvocationException: 
Exception has been thrown by the target of an invocation. ---> System.Reflection.TargetInvocationException: 
Exception has been thrown by the target of an invocation. ---> System.NullReferenceException: 
Object reference not set to an instance of an object. 
at ...DAL.get_ConnectionString() 
```

这是在吸气剂

```
get{
  var result = ConfigurationManager.ConnectionStrings["CN1"].ConnectionString;
  if (String.IsNullOrEmpty(result)) 
        throw new NoNullAllowedException("Connection string does not exist");
  return result;
} 
```

> 为什么 ConfigurationManager 没有初始化？
> 
> 如何配置 Fitnesse 以测试 DAL？
> 
> 感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:40:55.703

我相信您需要[让 Fit Sharp 了解您的 App.config 文件](http://fitsharp.github.com/FitSharp/AppConfigFile.html)：

```
c:\program files\fitsharp\runner -a c:\mypath\myapp.exe.config
   -c c:\myfolder\mysuite.config.xml
   -r fit.Runner.FolderRunner,c:\program files\fitsharp\fit.dll 
```

# c# - 从 C# 启动 SharePoint 命令行管理程序 (PowerShell)

> ID：13869711
> 
> 赞同：3
> 
> 时间：2012-12-13T22:34:30.947
> 
> 标签：c#, sharepoint, powershell

我正在尝试从 C# 代码以编程方式启动 SharePoint 命令行管理程序，并且当我从“开始”菜单中选择它时，我得到了不同的行为。我尝试以两种不同的方式执行此操作，但结果相同：

尝试#1：

```
var startInfo = new ProcessStartInfo();
startInfo.UseShellExecute = true;
startInfo.Verb = "runas";
startInfo.FileName = "C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\PowerShell.exe";
startInfo.Arguments = "-NoExit \"  & 'C:\\Program Files\\Common Files\\Microsoft Shared\\Web Server Extensions\\14\\CONFIG\\POWERSHELL\\Registration\\sharepoint.ps1' \"";
Process.Start(startInfo); 
```

尝试#2：

```
var startInfo = new ProcessStartInfo();
startInfo.UseShellExecute = true;
startInfo.Verb = "runas";
startInfo.FileName = "C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\\Microsoft SharePoint 2010 Products\\SharePoint 2010 Management Shell.lnk";
Process.Start(startInfo); 
```

这两种方法都会启动 PowerShell 窗口并显示以下错误消息：

> 文件 C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\CO NFIG\POWERSHELL\Registration\SharePoint.ps1 无法加载，因为此系统上禁用了脚本的执行。有关更多详细信息，请参阅“get-help about_signing”。在 line:1 char:3 + & <<<< ' C:\Program Files\Common Files\Microsoft Shared\Web Server Extensio ns\14\CONFIG\POWERSHELL\Registration\sharepoint.ps1 ' + CategoryInfo : NotSpecified: (: ) [], PSSecurityException + FullyQualifiedErrorId : RuntimeException

当我从开始菜单启动它时，它工作得很好。关于为什么这行为不同的任何想法？在尝试 #1 中，我运行与链接相同的可执行文件和参数。在尝试 #2 中，我试图运行链接本身。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:37:53.423

此问题通常是由 x86 和 x64 PowerShell 引起的，它们都需要将 ExecutionPolicy 设置为其他内容，而不是`Restricted`为了运行脚本。也许您的 PowerShell 控制台是 x64，而您的 C# 程序正在以 x86 运行，反之亦然。无论哪种方式，向 PowerShell 传递一个附加参数`-ExecutionPolicy ByPass`以跳过此特定问题。

# c# - 检查 XML 文件中是否存在元素

> ID：13869712
> 
> 赞同：1
> 
> 时间：2012-12-13T22:34:40.510
> 
> 标签：c#, xml

我需要检查 XML 文件中的元素是否存在。在这里搜索之后，我尝试了一个来自我在这里找到的非常相似的问题的代码，所以代码看起来像这样（它使用 foreach 循环，因此它检查组机场中的每个机场）：

```
string icao = airport.Attributes.GetNamedItem("icao").Value;
            if(airports.SelectSingleNode("/vEsup/airports/airport/" + icao + "/departures")==null)
            {
                MessageBox.Show("I exist!");
            } 
```

请注意，消息框仅用于测试，我发现它是检查代码是否正常工作的最简单方法。但是，我发现无论我输入什么路径，它总是显示消息框，无论它是否存在于 XML 文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:42:23.620

您也可以使用 Linq 查询特定的 xml 节点和属性。这是类似示例的链接：http: [//www.codearsenal.net/2012/07/c-sharp-load-xml-using-xlinq.html](http://www.codearsenal.net/2012/07/c-sharp-load-xml-using-xlinq.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:41:10.480

“显示消息框是否存在于 XML 文件中。” 当您检查节点是否不存在于 XML 时，这似乎是不正确的`if (a.SelectSingleNode(...)==null)`。

您很可能需要为节点正确指定命名空间。（需要示例 XML 来提供更好的建议）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:45:42.420

在你的'if'块中，你不是在检查字符串是否为空吗？

我的猜测 - 我在这里可能是错的 - 你的意思是：

```
 string icao = airport.Attributes.GetNamedItem("icao").Value;
        if(airports.SelectSingleNode("/vEsup/airports/airport/" + icao + "/departures")!=null)
        {
            return true;
        }
MessageBox.Show("I exist!"); 
```

# python - 使用 Tkinter 和 Python 提升图像

> ID：13869716
> 
> 赞同：3
> 
> 时间：2012-12-13T22:34:58.677
> 
> 标签：python, image, stack, tkinter, layer

我有几张图像，我想以不同的顺序分层，而不是它们的创建顺序。我正在将 Python 与 Tkinter 一起使用，并且想知道是否有人可以帮助我。我创建图像的顺序是：

```
#Using Tkinter
image1 = PhotoImage(file = "imageA.gif")
image2 = PhotoImage(file = "imageB.gif")
image3 = PhotoImage(file = "imageC.gif")
A = canvas.create_image(X,Y,image=image1)
B = canvas.create_image(X,Y,image=image2)
C = canvas.create_image(X,Y,image=image3) 
```

我创建图像的顺序无法更改，因此目前 C 位于 B 之上，而 B 位于 A 之上。

有没有办法改变顺序 - 不改变我创建它们的顺序 - 使 B 在 C 之上，并且都在 A 之上？也许有某种属性，例如 B.Ontopof(C) ？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T22:44:37.437

```
canvas.tag_raise(item) 
```

至少我认为...

# node.js - 如何使用 socket.io 检测空闲时间？

> ID：13869718
> 
> 赞同：5
> 
> 时间：2012-12-13T22:35:14.200
> 
> 标签：node.js, session, socket.io

我一直在阅读有关使用[**net**](http://nodejs.org/api/net.html#net_socket_settimeout_timeout_callback) [module的](http://nodejs.org/api/net.html#net_socket_settimeout_timeout_callback)[套接字超时方法的](http://nodejs.org/api/net.html#net_socket_settimeout_timeout_callback)**信息。但我想知道**socket.io**模块中是否有类似的机制来检测用户的不活动（例如，通过套接字 10 分钟不活动）以在服务器端对该会话执行一些操作或将此事件通知给其他用户。**

 **先感谢您。**

# java - Eclipse 格式化程序：如何在我的方法中对齐代码

> ID：13869723
> 
> 赞同：6
> 
> 时间：2012-12-13T22:35:59.083
> 
> 标签：java, eclipse, formatter

ctrl+shift+F 适用于 public class 中的内容。但是格式在方法内部不起作用，请参阅 = 符号未对齐。为什么？我怎样才能让它工作？

```
public class myClass extends ActivityInstrumentationTestCase2 {
    public static boolean       myVar                            = true;
    private static final String TARGET_PACKAGE_ID                = "com.xxxx.test";
    private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME = "com.xxxx.test";
    private static Class        launcherActivityClass;

...
...
private String getOnScreeninfoByType() {
        ArrayList<TextView> textViews = new ArrayList<TextView>();
        ArrayList<Button> listButtons = new ArrayList<Button>();
        ArrayList<ToggleButton> listToggleButtons = new ArrayList<ToggleButton>();
        ArrayList<EditText> listEditTexts = new ArrayList<EditText>();
        ArrayList<CheckBox> listCheckBoxes = new ArrayList<CheckBox>();
        ArrayList<RadioButton> listRadioButtons = new ArrayList<RadioButton>();
        ArrayList<ImageButton> listImageButtons = new ArrayList<ImageButton>();
        ArrayList<ImageView> listImageViews = new ArrayList<ImageView>();
        ArrayList<ProgressBar> listProgressBars = new ArrayList<ProgressBar>();
...

    } 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T22:44:02.070

中有一个选项`Align Fields in Columns`。`Preferences > Java > Code Style > Formatter > Edit > Indentation`如果选中此选项，则类中的字段将如您所见对齐。但是，我找不到任何选项`Align Local Variables`或类似的东西。似乎没有选项可以对齐列中的局部变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:45:13.713

它们没有对齐，因为它们不应该对齐！
类中的特殊对齐可能是由创建该项目的人设置的特殊非标准格式规则引起的。在 Code Formatter（或类似）下的 Eclipse 中查看项目设置

# android - 为什么在添加新的小部件实例时为所有小部件实例调用 AppWidgetProvider.onUpdate？

> ID：13869730
> 
> 赞同：0
> 
> 时间：2012-12-13T22:36:35.413
> 
> 标签：android, android-widget, android-appwidget

我注意到，每当我将同一个 AppWidget 的新实例添加到主屏幕`AppWidgetProvider`时 `onUpdate`，**都会**使用`appWidgetIds`.

参考[文献](http://developer.android.com/reference/android/appwidget/AppWidgetManager.html#ACTION_APPWIDGET_UPDATE)明确指出：

> EXTRA_APPWIDGET_IDS 要更新的 appWidgetId。这可能是为此提供程序创建的所有 AppWidget，或者只是一个子集。系统尝试为尽可能少的 AppWidget 实例发送更新。

这种行为是故意的吗？

有没有办法强制`onUpdate`只使用适当的 id 被调用？

有没有办法将受影响的实例与其他实例区分开来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:31:29.423

创建小部件有两个选项：第一个选项是不使用配置活动，然后所有小部件的行为相似，它们都可以立即更新而无需区分。第二个是使用配置活动。在那里，您可以通过以下方式获取刚刚从调用的配置活动创建的小部件 ID：

```
Intent intent = getIntent();
Bundle extras = intent.getExtras();
int appWidgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID); 
```

您可以将这个小部件 ID 保存在 sqlite 中，例如在配置步骤时定义的关于这个小部件的其他信息。

所以对于你的问题：

> 这种行为是故意的吗？

我认为答案是 - '是的'。`onUpdate`因为在没有配置步骤的情况下创建的小部件应该表现相似，并且`updatePeriodMillis`在`AppWidgetProviderInfo`.

> 有没有办法强制仅使用适当的 id 调用 onUpdate？

不[，从文档](http://developer.android.com/guide/topics/appwidgets/index.html#AppWidgetProvider)中我可以了解到这样的选项不存在。

> 有没有办法将受影响的实例与其他实例区分开来？

是的，您可以决定何时更新哪个确切的小部件。您可以通过`onRecieve`在小部件提供程序类中使用来实现此目的：

*   使用配置活动并保留每个小部件 ID。或者将挂起的意图设置为小部件中的 onClick 事件，并将此意图中的小部件 id 传递给活动，然后将其持久化。这个想法 - 保存小部件 id，以便以后能够在它们之间有所不同。
*   从您的应用程序（活动、服务、警报管理器..）发送带有您要更新的小部件 ID 的广播。
*   `onRecieve`将捕获广播，将获取小部件 ID，然后您可以在小部件提供程序类中使用具体小部件。

# php - 如何检测远程网站是否使用 Flash？

> ID：13869731
> 
> 赞同：1
> 
> 时间：2012-12-13T22:36:47.487
> 
> 标签：php, flash, curl, header

我正在尝试编写一个工具来检测远程网站是否使用 php 使用 flash。到目前为止，我已经编写了一个脚本来检测是否存在嵌入或对象，这表明它有可能被安装，但是一些站点加密了他们的代码，因此使这个函数变得无用。

```
include_once('simple_html_dom.php');
$flashTotalCount    = 0;
function file_get_contents_curl($url){

        $ch = curl_init();  
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);    
        $data = curl_exec($ch);
        curl_close($ch);    
        return $data;
    }

    $html = file_get_contents_curl($url);
    $doc = new DOMDocument();
    @$doc->loadHTML($html); 

foreach($html->find('embed') as $pageEmbed){
$flashTotalCount++;
}

foreach($html->find('object') as $pageObject){
$flashTotalCount++;
}

if($flashTotalCount == 0){  
echo "NO FLASH";    
}   
else{   
echo "FLASH";
} 
```

有没有人知道一种方法来检查网站是否使用 Flash，或者如果可能的话，获取正在使用 Flash 的标题信​​息等。

任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:43:33.520

据我了解，flash可以通过javascript加载。所以你应该执行网页。为此，您必须使用这样的工具： http: [//seleniumhq.org/docs/02_selenium_ide.html#the-waitfor-commands-in-ajax-applications](http://seleniumhq.org/docs/02_selenium_ide.html#the-waitfor-commands-in-ajax-applications)

我不认为它可以从 php 中使用。

# iphone - 如何将短屏幕制作为弹出菜单？

> ID：13869732
> 
> 赞同：1
> 
> 时间：2012-12-13T22:37:01.303
> 
> 标签：iphone, objective-c

我附上了从 Skype 应用程序截取的示例屏幕截图。如何复制弹出菜单？

![http://i.stack.imgur.com/zJVPW.png](../Images/a1ba4fe98d3b820056ee5a499376bb1f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T22:41:31.520

这是[UIActionSheet](http://developer.apple.com/library/ios/documentation/uikit/reference/UIActionSheet_Class/)的一个实例。[这](http://mobile.tutsplus.com/tutorials/iphone/uiactionsheet_uiactionsheetdelegate/)是有关如何使用它的教程。

# sybase - Sybase TSQL：即使结果为空，也存在报告阳性

> ID：13869739
> 
> 赞同：0
> 
> 时间：2012-12-13T22:37:35.343
> 
> 标签：sybase

当我随机选择的两个未来日期之间没有数据时，我不希望函数`exists`报告正面（即返回 true，因此打印“有交易”）

```
if exists(select min(dt_txn) from SOME_TRADE where dt_txn > '1 Mar 2013' and dt_txn < '8 Mar 2013' 
begin
print 'There is trade'
end 
```

如果我只是单独运行 select 语句，它将返回 null。

在这种情况下存在的正确使用方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:33:09.740

试试这个方法：

```
if exists(select 1 from SOME_TRADE where dt_txn > '1 Mar 2013' and dt_txn < '8 Mar 2013') 
begin
print 'There is trade'
end 
```

# c# - SignalR 的浏览器兼容性如何？

> ID：13869745
> 
> 赞同：25
> 
> 时间：2012-12-13T22:37:57.107
> 
> 标签：c#, asp.net, asp.net-mvc, signalr, browser-support

我在网上找到的最多的是 SignalR FAQ，其中指出 SignalR 在 IE6/7 中不起作用。但是，出于法律原因，我需要向客户提供支持的浏览器列表。SignalR 是否有这样的经过测试的浏览器列表？

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-30T12:56:55.037

看起来微软已经发布了一些兼容性数据：

[ASP.NET 上的 SignalR：支持的平台](http://www.asp.net/signalr/overview/getting-started/supported-platforms)

**来自文章：**

SignalR 可用于各种 Web 浏览器，但通常仅支持最新的两个版本。

在浏览器中使用 SignalR 的应用程序必须使用 jQuery 版本 1.6.4 或主要更高版本（例如 1.7.2、1.8.2 或 1.9.1）。

SignalR 可用于以下浏览器：

*   Microsoft Internet Explorer 版本 8、9 和 10。支持现代、桌面和移动版本。
*   Mozilla Firefox：当前版本 - 1，Windows 和 Mac 版本。
*   Google Chrome：当前版本 - 1，Windows 和 Mac 版本。
*   Safari：当前版本 - 1，Mac 和 iOS 版本。
*   Opera：当前版本 - 1，仅限 Windows。
*   安卓浏览器

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T06:27:12.733

以下是支持 Websockets 的浏览器列表：[http](http://caniuse.com/websockets) ://caniuse.com/websockets请注意，唯一支持 Websockets 的 Internet Explorer 版本是 10 版。

如果 SignalR 失败，将退回到应该适用于早期 IE 的其他方法之一。（例如，它适用于我的 IE 9）：

> SignalR 使用回退到[长轮询机制](http://www.hanselman.com/blog/YourUsersDontCareIfYouUseWebSockets.aspx)将浏览器连接到服务器。在初始协商请求之后，将依次尝试以下传输，直到可以建立成功的连接：
> 
> WebSockets（如果服务器和浏览器都表示它们可以支持 websockets）服务器发送事件，又名 EventSource（如果浏览器支持服务器发送事件，基本上是除了 Internet Explorer 之外的所有浏览器） Forever Frame（仅适用于 Internet Explorer）Ajax 长轮询

[https://github.com/SignalR/SignalR/wiki/Faq](https://github.com/SignalR/SignalR/wiki/Faq)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-14T08:10:10.930

还没有，不过我们正在努力。

更新： [http ://www.asp.net/signalr/overview/signalr-20/getting-started-with-signalr-20/supported-platforms](http://www.asp.net/signalr/overview/signalr-20/getting-started-with-signalr-20/supported-platforms)

# c# - C# 控制台应用程序 - 必应地图 - 如何保存输出

> ID：13869749
> 
> 赞同：0
> 
> 时间：2012-12-13T22:38:22.320
> 
> 标签：c#, console-application, bing-maps, bitmapimage, writeablebitmap

我可以从 Bing Maps 获取 URI，但是当我尝试保存生成的文件（例如，.jpg）时，它是空的（例如，1 x 1 大小）。我已经让它在带有事件处理的 WPF 应用程序中正常工作，但是如何使用控制台应用程序来做到这一点？

这是适用于 WPF 的代码，但相同的代码在控制台应用程序中失败 - 我认为这一定是因为文件保存在事件处理程序中，并且（据我所知）您不能在控制台应用程序中执行此操作。

```
public void vSaveBitmapImage(string sURI, // created with Bing Maps GeocodeServices
  string sLocFname)
{
  // save file name so event handler knows it
  this.sFname = sLocFname;

  try
  {
    BitmapImage bmpImage = new BitmapImage(new Uri(sURI, UriKind.RelativeOrAbsolute));
    // setup event handler - file is saved just fine here
    bmpImage.DownloadCompleted += vImage_DownloadCompleted;
  }
  catch (SystemException sex)
  {
    string s = sex.Message;
  }
}

/// <summary>
/// handle the event that an image download has completed
/// </summary>
private void vImage_DownloadCompleted(object sender,
  EventArgs e)
{
  try
  {
    JpegBitmapEncoder encoder = new JpegBitmapEncoder();

    encoder.Frames.Add(BitmapFrame.Create((BitmapImage)sender));

    using (var filestream = new FileStream(this.sFname, FileMode.Create))
      encoder.Save(filestream);
  }
  catch (SystemException sex)
  {
    string s = sex.Message;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:20:57.297

对于控制台应用程序，同步下载和保存文件可能更简单，例如使用[WebClient.DownloadFile()](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadfile.aspx)。

```
var client = new WebClient();
client.DownloadFile( sURI, sLocFname ); 
```

我不确定您的基于事件的代码出了什么问题。

我的第一个猜测是应用程序退出 Main() 并在后台下载完成之前退出。在这种情况下，您可能需要阻塞主线程，直到您的`vImage_DownloadCompleted`事件完成。

# jakarta-ee - 如何部署 Web 应用程序？

> ID：13869756
> 
> 赞同：0
> 
> 时间：2012-12-13T22:38:49.823
> 
> 标签：jakarta-ee, tomcat, jetty, java-ee-6

根据文档中的快速入门部分，somewar.war 文件位于默认配置中，部署为 localhost:8080/somewar/。

据此[，](http://explodingjava.blogspot.de/2010/05/servlet-30-annotations.html)我所要做的就是：

```
package de.swt1321.servlet;

import java.io.OutputStream;
import java.io.IOException;

import javax.servlet.annotation.WebServlet;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet(urlPatterns={"/","/index.html"}, loadOnStartup=1)
public class ServletTest extends HttpServlet {
    private static final java.nio.charset.Charset UTF8 = java.nio.charset.Charset.forName("UTF8");

    @Override
    protected void doGet(HttpServletRequest req,
                          HttpServletResponse res) throws ServletException, IOException
    {
        byte[] HTML = "<html><head><title>Hello World!</title></head><body><h1>IT WORKED!</h1></body></html>".getBytes(UTF8);
        res.setStatus(HttpServletResponse.SC_OK);
        res.setHeader("content-type","text/html;charset=utf8");
        res.setIntHeader("content-length",HTML.length);
        OutputStream os = res.getOutputStream();
        os.write(HTML);
        os.flush();
    }
} 
```

除了他方便地从“创建类”到“部署项目”。这就是我卡住的地方——显然我做错了什么。我正在使用 buildr 将整个东西打包成一场战争，最终得到这样的结果：

```
ServletTest.war:
META-INF -> MANIFEST.MF
WEB-INF -> 
  classes -> 
          de ->
             swt1321 ->
                  servlet->
                      ServletTest.class
  lib -> javaee-web-api-6.0.jar 
```

将其放入 webapps 文件夹中，我希望从我的响应中获取 html。相反，我得到一个页面，其中包含两个名为 META-INF 和 WEB-INF 的链接，它们指向 404 个页面。

恐怕我错过了我应该在这里做的事情，不幸的是，我在网上能找到的只是代码片段，这些代码片段直接跳转到“现在然后将整个东西打包为一个 Web 应用程序......”并且码头文档似乎假设我已经知道 Web 应用程序的外观（并且似乎主要关注各种配置选项，如果我真的要让该死的东西首先工作，我实际上可能会胡说八道）。

我应该怎么做才能让它工作？

**编辑**

更改了标题，因为虽然我最初使用 Jetty 9 进行了测试，但它也不适用于 Tomcat 7，基本上存在相同的问题 - 显然应用程序已被识别（显示在管理器中）但 servlet 似乎不起作用（如果它正在被使用）。在这一点上我很沮丧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:42:45.497

jetty-8 和 jetty-9 支持 servlet 3.0，但您必须确保在 start.ini 中启用注释扫描，编辑该文件，将“注释”添加到 OPTIONS 行并取消注释 jetty-annotations.xml 行

你似乎在你的战争中缺少一个 web.xml 文件

我们似乎对这个问题有相当多的了解，所以我会看到默认情况下启用注释，尽管它们使启动时间比需要的长得多，因为大多数人不理会它们，所以为什么要惩罚每个人.. .我们会考虑一下。

[编辑] imo，如果您刚开始，最好学习注释背后的细节，例如如何在 web.xml 中配置 servlet ...注释只是 servlet-api 之上的一点魔法

# c#-4.0 - 处理文件未找到异常？

> ID：13869757
> 
> 赞同：1
> 
> 时间：2012-12-13T22:38:50.477
> 
> 标签：c#-4.0

我编写此代码以清空一些我经常删除的文件，例如 Windows 中的临时文件。几个朋友可能希望使用相同的应用程序，而我正在研究处理未找到文件异常的最佳方法。

如何最好地处理这个问题以供多个用户使用？

```
public void Deletefiles()
    {
        try
        {                
            string[] DirectoryList = Directory.GetDirectories("C:\\Users\\user\\Desktop\\1");
            string[] FileList = Directory.GetFiles("C:\\Users\\user\\Desktop\\1");

            foreach (string x in DirectoryList)
            {
                Directory.Delete(x, true);
                FoldersCounter++;
            }

            foreach (string y in FileList)
            {
                File.Delete(y);
                FilesCounter++;
            }

            MessageBox.Show("Done...\nFiles deleted - " + FileList.Length + "\nDirectories deleted - " + DirectoryList.Length + "\n" + FilesCounter + "\n", "message", MessageBoxButtons.OK, MessageBoxIcon.Information);
            }

        catch (Exception z)
        {
            if (z.Message.Contains("NotFound"))
            {
                MessageBox.Show("File Not Found");
            }
            else
            {
                throw (z);
            }
            //throw new FileNotFoundException();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:50:56.757

尽可能少地修改你的代码，你可以简单地将你的`Delete`调用包装在一个 try/catch 中：

```
foreach (string x in DirectoryList)
{
    try {
        Directory.Delete(x, true);
    }
    catch (DirectoryNotFoundException e)
    {
        // do something, or not...
    }
    FoldersCounter++;
}

foreach (string y in FileList)
{
    try
    {
        File.Delete(y);
    }
    catch (FileNotFoundException e)
    {
        // do something, or not...
    }
    FilesCounter++;
} 
```

删除顶级 try/catch 并让`foreach`语句循环通过 -- `try`ing 和`catch`ing 任何异常。

您不一定需要提醒用户找不到文件。它存在它将被删除，因此它不存在的事实并不会真正影响程序的结果。

这不是对资源最友好的方法，但它是一个足够简单的应用程序，不会引起问题。

# vb.net - 如何从 JSON 中确定属性类型

> ID：13869762
> 
> 赞同：0
> 
> 时间：2012-12-13T22:39:40.337
> 
> 标签：vb.net, rest, types, json.net

我有一个 JSON 对象传递到我的 REST API 中。我使用特定 API 继承的通用 API 控制器。使用 JSON.NET，我试图确定 JSON 数据的基本类型（字符串、整数、布尔值等）。这是一个例子：

```
Public Overridable Function PostValue(<FromBody()> record As JObject)
    For Each thing As KeyValuePair(Of String, JToken) In record
        MsgBox(thing.Key & ": " & thing.Value.ToString & " (" & thing.Value.Type & ")")
    Next

    'do other stuff and return some other stuff...
End Function 
```

不幸的是，这只是`string`作为所有 JSON 值的类型返回。有没有从字符串值解析 JSON 数据成员的基本类型的好方法？

### 更新

我知道 JSON 作为 Javascript 始终是无类型的——而且我知道当 JSON 数据被传递时，它总是作为 JSON 字符串（因此是 typed `string`）。我想我想知道 JSON.NET（或任何其他库）是否有办法动态确定存储在这个 JSON 字符串中的数据的基本类型。例如（注意：我知道`parseType`不存在）：

```
Json.ParseType("1")     ' --> String
Json.ParseType(1)       ' --> Integer
Json.ParseType("True")  ' --> String
Json.ParseType(True)    ' --> Boolean
Json.ParseType([1,2,3]) ' --> Array
'etc... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:51:10.033

这在很大程度上是由于两个因素。首先，您要序列化数据，而不是结构（类型）。其次，Javascript（以及 JSON）是无类型的。[例如。警报（1.0 == '1.0'）；将导致 true)。

为了保留类型信息，您需要序列化类型信息，并在反序列化方面对其进行处理。

例子：

```
{
  __type__id: 'Int32',
  __type__name: 'String',
  id: 5,
  name: 'Joe'
} 
```

我会避免试图猜测类型。仅仅因为您可以将`id`属性值转换为 Int32（通过猜测）并不意味着下一个对象的 id 值将是 Int32。您还必须注意包含字符串格式的数字数据的值。例如，国际电话号码：011334998723 - 如果要将其转换为整数类型，则会丢失前导零并完全改变数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T22:48:25.383

json 值始终是字符串。您可以尝试将 json 字符串解析为变量以确定类型

# javascript - 提交表单时如何使用javascript显示隐藏的div？

> ID：13869765
> 
> 赞同：3
> 
> 时间：2012-12-13T22:39:50.647
> 
> 标签：javascript, html

我对 jquery 不是很熟悉，但我试图获得一个简单的动画 gif 来显示何时提交表单。单击“提交”上传图像时，我想显示 gif，以便用户知道该图像正在上传。提交按钮有一个 id="submit" 和一个 onClick="return confirm('message')"

我有包含 gif 的 div 代码：

```
<div id="loading" style="display:none">

    <img src="images/hand_timer2.gif" alt="loading" />

</div> 
```

这是隐藏的。如果我删除样式，它会显示。很公平。但是，当我尝试使用以下 javascript 显示它时，它不会显示：

```
<script type="text/javascript">

    $(function(){
        $('#submit').click(function(){
        $('#loading').show();

        }); 
    }); 
```

我有

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"    
type="text/javascript"></script> 
```

在一个单独的 PHP 头文件中。据我所知，它是对 jquery 库的唯一引用，但我确实有其他所有工作的 javascript 代码。我就是不能让这个工作。谁能指出我做错了什么以及为什么在单击提交时我无法让 div 显示 gif？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:49:35.807

我相信问题可能是你的内联`onClick="return confirm('message')"`阻止点击事件到达你的点击事件侦听器附加 jQuery - 但不确定。无论如何，我不会在提交按钮上监听点击事件，而是在表单上监听提交事件，该事件将在表单实际提交时触发（通常可以通过单击提交以外的其他方式发布表单按钮 - 例如通过 Enter 键）。

```
$('#idOfYourForm').on("submit", function () {
    $('#loading').show();
}); 
```

**边注：**

您没有在加载 div 上正确关闭样式属性（注意`>`是蓝色的）：

```
<div id="loading" style="display:none> 
```

# php - Doctrine2 选择没有关联对象的实体对象

> ID：13869766
> 
> 赞同：0
> 
> 时间：2012-12-13T22:39:58.943
> 
> 标签：php, doctrine-orm

我似乎无法弄清楚这一点，尽管它应该是相当简单的事情。

我有图像实体和文章实体。许多文章可以使用相同的图像，但每篇文章只能有一个图像，因此它们被映射为 OneToMany<->ManyToOne。

**现在，我只**需要选择没有任何相关文章的图像。我该怎么做呢？

我试过：

```
$repository->createQueryBuilder('i')
->select('i')
->where('count(i.articles) = NULL'); 
```

但它不起作用。我怎样才能做到这一点？

# 更新

我在 Type 类中使用它，并试图创建仅包含未使用实体的实体字段，如果相关，这里是完整的功能代码：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('images', 'entity', array(
                'class' => 'BloggerBlogBundle:Image',
                'query_builder' =>
                    function(EntityRepository $er)
                    {
                        return $er->createQueryBuilder('i')->.........here goes query creation

                                                    },
            )
        )
        ;
} 
```

如果需要，这里也是关联：

图像类：

```
/**
 * @ORM\OneToMany(targetEntity="Blog", mappedBy="image")
 */
protected $articles; 
```

博客类：

```
/**
 * @ORM\ManyToOne(targetEntity="Image", inversedBy="articles")
 */
protected $image; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T01:52:53.417

试试这个：

```
$qb->createQueryBuilder();
->select('i');
->from('BloggerBlogBundle:Image', 'i')
->leftJoin('i.articles', 'a')
->where('a is NULL'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T01:50:40.080

您不应该在那里使用该`count()`功能，并且`... = NULL`需要更改为`... is NULL`以便 Doctrine 完成其工作。

全部的：

```
$repository->createQueryBuilder('i')
    ->select('i')
    ->where('i.articles is NULL'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-26T17:14:48.163

接受的答案不再有效 - 您必须添加`.id`到 where 表达式：

```
$qb->createQueryBuilder();
 ->select('i');
 ->from('BloggerBlogBundle:Image', 'i')
 ->leftJoin('i.articles', 'a')
 ->where('a.id is NULL'); 
```

取自 [https://stackoverflow.com/a/30034662/1358376](https://stackoverflow.com/a/30034662/1358376)

# spring - Spring MVC中的数组@ModelAttribute扩展

> ID：13869769
> 
> 赞同：2
> 
> 时间：2012-12-13T22:40:07.943
> 
> 标签：spring, spring-mvc, modelattribute

*编辑：我可能必须使用列表，但同样的原则适用。

我正在尝试使用 @ModelAttribute 注释将数组绑定到表单。用数组的内容填充表（数组中的每个元素对应于表中的一行）。数组可以填充数据，也可以在绑定时为空。用户可以向表中添加行（这应该向数组中添加元素）。

我的问题是，如果在传入之前已经定义了元素，如何将元素添加到数组中？提交表单时会自动发生这种情况吗？

```
<body>
    <h1>Members</h1>
        <form:form action="configure" modelAttribute="members" method="post" id="member-form">
            <table id="member-table" class="table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="member-table-body">
                    <c:forEach items="${members}" var="member" varStatus="i" begin="0" >
                        <tr class="member">    
                            <td><form:input path="members[${i.index}].name" id="name${i.index}" /></td>
                            <td><a href="#" class="remove">Remove</a></td>
                        </tr>
                    </c:forEach>
                </tbody>
            </table>
            <input type="submit" value="Save" id="submit" />
            <a href="#" id="add">Add Member</a>
            <a href="?f=">Reset List</a>
        </form:form>   
</body> 
```

__

```
$(document).ready(function(){
$('#add').click(function(e) {
    e.preventDefault();
    //Add a member

    //Get the number of rows that are in the table
    var memberTable = $('#member-table-body');
    var numRows = memberTable.children('tr').length

    //Add row to the table.
    // memberTable.innerHTML(

    return false;
});
$('.remove').on('click', function(e) {
                e.preventDefault();
                $(this).parent().parent().remove();
                return false;
}); 
```

});​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:29:13.400

您需要创建一个包装列表的模型类并在控制器中使用此模型。

就像是：

```
package net.viralpatel.spring3.form;

import java.util.List;

public class ContactForm {

    private List<Contact> contacts;

    public List<Contact> getContacts() {
        return contacts;
    }

    public void setContacts(List<Contact> contacts) {
        this.contacts = contacts;
    }
} 
```

然后在 JSP 中使用它作为：

```
<c:forEach items="${contactForm.contacts}" var="contact" varStatus="status">
    <tr>
        <td align="center">${status.count}</td>
        <td><input name="contacts[${status.index}].firstname" value="${contact.firstname}"/></td>
        <td><input name="contacts[${status.index}].lastname" value="${contact.lastname}"/></td>
        <td><input name="contacts[${status.index}].email" value="${contact.email}"/></td>
        <td><input name="contacts[${status.index}].phone" value="${contact.phone}"/></td>
    </tr>
</c:forEach> 
```

请参阅本教程：[Spring MVC：使用 Bean 列表提交多行表单](http://viralpatel.net/blogs/spring-mvc-multi-row-submit-java-list/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:34:13.030

这不能由 Spring 自动为您完成。实际上，您在这里没有任何约束力。您正在使用 JSTL EL 迭代数组并将其设置为文本字段。理想情况下，如何处理这个问题是您需要将整个表准备为 json 字符串并提交到后端，在那里解析并了解已添加/删除/更新了多少。您可以有一个隐藏列来维护此状态并在后端进行标识。我不认为数组会在前端自动扩展。这是我的 2 美分。

# php - Facebook 集成 - 您是否需要一个单独的页面来与自定义对象进行交互，或者页面上是否有多个对象？

> ID：13869773
> 
> 赞同：1
> 
> 时间：2012-12-13T22:40:17.837
> 
> 标签：php, javascript, facebook

我第一次使用 Facebook 集成。

从文档看来，自定义对象必须为每个对象提供一个单独的页面，因为您必须在页面头部包含该对象的元标记。

这是否意味着我不能在一个页面上拥有多个自定义对象？

我能否以某种方式在单个页面上列出多个自定义对象并能够通过自定义操作与它们进行交互？

使用文档使用的示例 .. 是否可以在单个页面上有 20 个食谱并让用户说“我正在烹饪食谱 A、B 和 C”，并让每个选择触发一个帖子到他的墙上?

我希望简单地将对象 ID 附加到页面上的项目，并使用 AJAX 传递它们以触发操作.. 但后来我读到了元标记，我现在想不出该怎么做。似乎您必须将用户发送到每个项目的谨慎页面。这是真的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:25:18.507

每个对象都需要具有该对象的不同 URL，如果对象具有本身是对象的属性，则那些“属性”对象需要带有元数据的 URL，但您仍将针对“主”URL 发布操作，并且'property' 对象 URL 将由 facebook 解析并抓取元数据

如果您还没有阅读此文档以获取更多详细信息：[https ://developers.facebook.com/docs/technical-guides/opengraph/defining-an-object/](https://developers.facebook.com/docs/technical-guides/opengraph/defining-an-object/)

# php - 用 mktime() 显示明天的日期；

> ID：13869774
> 
> 赞同：0
> 
> 时间：2012-12-13T22:40:23.097
> 
> 标签：php

我真的很确定显示明天的日期格式 dd.mm.yyyy 吗？

```
$now_date2 = mktime('23','59','00',date("n"),date("j")+1,date("Y")); 
```

这有什么问题？

任何帮助谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:42:59.087

你的意思是这样的：

```
<?php echo date('d.m.Y', strtotime(' +1 day')); ?> 
```

您想显示明天的日期，但您正在为变量分配时间戳。如果你想将明天的时间戳分配给一个变量，你可以这样做：

```
$now_date2 = strtotime('+1 day'); 
```

或者正如杰克在他的评论中所说：

```
$now_date2 = strtotime('tomorrow'); 
```

然后您可以根据需要显示如下：

```
echo date('d.m.Y', $now_date2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:51:37.897

$now_date2 不会采用 dd.mm.yyyy 格式，它实际上是从 1970 年 1 月 1 日开始的秒数，时区偏移，所以对我来说通常是 1969 年 12 月 31 日，因为我的 gmt -6 为 0。这个数字被称为 unix 时间戳。为了把它变成你会明白的东西，你需要使用 date() 并提供你制作的时间戳，就像这样：

`date("d.m.Y", mktime('23','59','00',date("n"),date("j")+1,date("Y")));`

会产生 dd.mm.yyyy，但如果你去[php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)，它会给你所有你可以为第一个参数输入的格式。上面有人给出的答案比您尝试做的要简单得多：

```
date('d.m.Y', strtotime(' +1 day')); 
```

strtotime 将尝试将英语转换为时间戳，然后一旦你有了时间戳，你就可以使用 date 来做任何你想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:54:54.633

查看以下内容：http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php) http://php.net/manual/en/function.mktime.php

如果要格式化日期，请使用 date(" *format* ") 其中*format*可以是日期手册中列出的参数的任意组合（即 dd.mm.yyyy 将是`date("d.m.Y")`）。

如果您尝试将特定时间格式化为该格式（而不仅仅是当前时间），那么您可以使用创建一个 unix 时间戳`mktime()`并将其传递给`date()`函数。

示例：`date("d.m.Y", mktime(0, 0, 0, 12, 13, 2012))`--> 13.12.2012

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T22:42:22.643

您需要格式化它创建的时间戳。

```
$now_date2 = date('d.m.Y', mktime('23','59','00',date("n"),date("j")+1,date("Y"))); 
```

# xml - 从外部提供者调用数据但无法显示所需数据

> ID：13869777
> 
> 赞同：1
> 
> 时间：2012-12-13T22:40:35.953
> 
> 标签：xml, actionscript-3, flash, provider

我被困住了。我正在调用一个提供体育赔率数据（目前为 NBA 编码）的外部 ASP，我通过舞台上的动态文本字段显示这些数据。我能够获得当前日期以及显示哪个“团队与团队”的意愿。在“团队对团队”下方，我希望显示“点数分布”和“总点数”。我现在很困惑如何从文档中调用我想要的两种数据，所以只显示这两种数据。下面是我的 XML，下面是 Flash AS3 代码。任何帮助将不胜感激，谢谢！（希望我的解释有帮助）

我无法附上屏幕截图，但基本上，当它运行时，文本字段现在看起来像这样：

12 月 13 日队对队队队队队队队队队的比赛

我希望它显示的内容：

12 月 13 日的比赛 球队对阵球队（分差）（总分）球队对阵球队（分差）（总分）球队对阵球队（分差）（总分）

//<<<<<<<<<<<<<<(XML)

```
<?xml version="1.0" encoding="UTF-8"?>
<livefeedlines leagues="nba" periods="0" scores="N" popindex="Y" fromminutes="5" begindate="null" enddate="null" store="DEPOSIT">
    <paramstr generator="ASP" generated="2012-12-12T15:45:32-08:00">'', '', '''nba''', '', '0', 'Y', 'B', 'N', 'Y', 5, -1, '', null, null, 'date asc', 0, 'DEPOSIT'</paramstr>
    <game id="48037935" sporttype="Basketball" league="NBA" gamedate="2012-12-12T16:05:00-08:00" gamedow="4" status="O" team1rotnum="701" team1name="Brooklyn Nets" team1pitcher="" team2rotnum="702" team2name="Toronto Raptors" team2pitcher="" ontv="N" channel="" order="5">
        <line periodnum="0" perioddesc="Game" periodwagercutoff="2012-12-12T16:10:00-08:00" store="DEPOSIT" favoredteam="Brooklyn Nets">
            <spread points="-7" team1adj="-110" team2adj="-110" puckline="" circled="N"/>
            <total points="185" team1adj="-110" team2adj="-110" circled="N"/>
            <money team1line="-325" team2line="265" drawline="0" circled="N"/>
            <popularity index="5"/>
        </line>
    </game>
    <game id="48037936" sporttype="Basketball" league="NBA" gamedate="2012-12-12T16:05:00-08:00" gamedow="4" status="O" team1rotnum="703" team1name="Atlanta Hawks" team1pitcher="" team2rotnum="704" team2name="Orlando Magic" team2pitcher="" ontv="N" channel="" order="5">
        <line periodnum="0" perioddesc="Game" periodwagercutoff="2012-12-12T16:10:00-08:00" store="DEPOSIT" favoredteam="Atlanta Hawks">
            <spread points="-5" team1adj="-110" team2adj="-110" puckline="" circled="N"/>
            <total points="189.5" team1adj="-110" team2adj="-110" circled="N"/>
            <money team1line="-200" team2line="170" drawline="0" circled="N"/>
            <popularity index="4"/>
        </line>
    </game>
    <game id="48037937" sporttype="Basketball" league="NBA" gamedate="2012-12-12T16:05:00-08:00" gamedow="4" status="O" team1rotnum="705" team1name="Cleveland Cavaliers" team1pitcher="" team2rotnum="706" team2name="Indiana Pacers" team2pitcher="" ontv="N" channel="" order="5">
        <line periodnum="0" perioddesc="Game" periodwagercutoff="2012-12-12T16:10:00-08:00" store="DEPOSIT" favoredteam="Indiana Pacers">
            <spread points="-7.5" team1adj="-110" team2adj="-110" puckline="" circled="N"/>
            <total points="189" team1adj="-110" team2adj="-110" circled="N"/>
            <money team1line="290" team2line="-350" drawline="0" circled="N"/>
            <popularity index="6"/>
        </line>
    </game>
    <game id="48037938" sporttype="Basketball" league="NBA" gamedate="2012-12-12T16:35:00-08:00" gamedow="4" status="O" team1rotnum="707" team1name="Chicago Bulls" team1pitcher="" team2rotnum="708" team2name="Philadelphia 76ers" team2pitcher="" ontv="N" channel="" order="5">
        <line periodnum="0" perioddesc="Game" periodwagercutoff="2012-12-12T16:40:00-08:00" store="DEPOSIT" favoredteam="Philadelphia 76ers">
            <spread points="-2" team1adj="-110" team2adj="-110" puckline="" circled="N"/>
            <total points="180.5" team1adj="-110" team2adj="-110" circled="N"/>
            <money team1line="113" team2line="-133" drawline="0" circled="N"/>
            <popularity index="9"/>
        </line>
    </game>
    <game id="48037939" sporttype="Basketball" league="NBA" gamedate="2012-12-12T16:35:00-08:00" gamedow="4" status="O" team1rotnum="709" team1name="Los Angeles Clippers" team1pitcher="" team2rotnum="710" team2name="Charlotte Bobcats" team2pitcher="" ontv="N" channel="" order="5">
        <line periodnum="0" perioddesc="Game" periodwagercutoff="2012-12-12T16:40:00-08:00" store="DEPOSIT" favoredteam="Los Angeles Clippers">
            <spread points="-8" team1adj="-110" team2adj="-110" puckline="" circled="N"/>
            <total points="200.5" team1adj="-110" team2adj="-110" circled="N"/>
            <money team1line="-400" team2line="320" drawline="0" circled="N"/>
            <popularity index="3"/>
        </line>
    </game>
    <game id="48037940" sporttype="Basketball" league="NBA" gamedate="2012-12-12T16:35:00-08:00" gamedow="4" status="O" team1rotnum="711" team1name="Golden State Warriors" team1pitcher="" team2rotnum="712" team2name="Miami Heat" team2pitcher="" ontv="N" channel="" order="5">
        <line periodnum="0" perioddesc="Game" periodwagercutoff="2012-12-12T16:40:00-08:00" store="DEPOSIT" favoredteam="Miami Heat">
            <spread points="-8" team1adj="-110" team2adj="-110" puckline="" circled="N"/>
            <total points="205" team1adj="-110" team2adj="-110" circled="N"/>
            <money team1line="310" team2line="-380" drawline="0" circled="N"/>
            <popularity index="1"/>
        </line>
    </game>
    <game id="48037941" sporttype="Basketball" league="NBA" gamedate="2012-12-12T17:05:00-08:00" gamedow="4" status="O" team1rotnum="713" team1name="Denver Nuggets" team1pitcher="" team2rotnum="714" team2name="Minnesota Timberwolves" team2pitcher="" ontv="N" channel="" order="5">
        <line periodnum="0" perioddesc="Game" periodwagercutoff="2012-12-12T17:10:00-08:00" store="DEPOSIT" favoredteam="Minnesota Timberwolves">
            <spread points="-4" team1adj="-110" team2adj="-110" puckline="" circled="N"/>
            <total points="200" team1adj="-110" team2adj="-110" circled="N"/>
            <money team1line="151" team2line="-171" drawline="0" circled="N"/>
            <popularity index="12"/>
        </line>
    </game>
    <game id="48037942" sporttype="Basketball" league="NBA" gamedate="2012-12-12T17:05:00-08:00" gamedow="4" status="O" team1rotnum="715" team1name="Sacramento Kings" team1pitcher="" team2rotnum="716" team2name="Milwaukee Bucks" team2pitcher="" ontv="N" channel="" order="5">
        <line periodnum="0" perioddesc="Game" periodwagercutoff="2012-12-12T17:10:00-08:00" store="DEPOSIT" favoredteam="Milwaukee Bucks">
            <spread points="-8" team1adj="-110" team2adj="-110" puckline="" circled="N"/>
            <total points="198" team1adj="-110" team2adj="-110" circled="N"/>
            <money team1line="290" team2line="-350" drawline="0" circled="N"/>
            <popularity index="13"/>
        </line>
    </game>
    <game id="48037943" sporttype="Basketball" league="NBA" gamedate="2012-12-12T17:05:00-08:00" gamedow="4" status="O" team1rotnum="717" team1name="New Orleans Hornets" team1pitcher="" team2rotnum="718" team2name="Oklahoma City Thunder" team2pitcher="" ontv="N" channel="" order="5">
        <line periodnum="0" perioddesc="Game" periodwagercutoff="2012-12-12T17:10:00-08:00" store="DEPOSIT" favoredteam="Oklahoma City Thunder">
            <spread points="-14.5" team1adj="-110" team2adj="-110" puckline="" circled="N"/>
            <total points="195.5" team1adj="-110" team2adj="-110" circled="N"/>
            <money team1line="1400" team2line="-2400" drawline="0" circled="N"/>
            <popularity index="8"/>
        </line>
    </game>
    <game id="48037944" sporttype="Basketball" league="NBA" gamedate="2012-12-12T17:05:00-08:00" gamedow="4" status="O" team1rotnum="719" team1name="Dallas Mavericks" team1pitcher="" team2rotnum="720" team2name="Boston Celtics" team2pitcher="" ontv="Y" channel="ESPN" order="5">
        <line periodnum="0" perioddesc="Game" periodwagercutoff="2012-12-12T17:10:00-08:00" store="DEPOSIT" favoredteam="Boston Celtics">
            <spread points="-6" team1adj="-110" team2adj="-110" puckline="" circled="N"/>
            <total points="197.5" team1adj="-110" team2adj="-110" circled="N"/>
            <money team1line="200" team2line="-240" drawline="0" circled="N"/>
            <teamtotals team1points="94.5" team1adj1="-115" team1adj2="-115" team2points="100.5" team2adj1="-115" team2adj2="-115" circled="N"/>
            <popularity index="7"/>
        </line>
    </game>
    <game id="48037945" sporttype="Basketball" league="NBA" gamedate="2012-12-12T17:05:00-08:00" gamedow="4" status="O" team1rotnum="721" team1name="Washington Wizards" team1pitcher="" team2rotnum="722" team2name="Houston Rockets" team2pitcher="" ontv="N" channel="" order="5">
        <line periodnum="0" perioddesc="Game" periodwagercutoff="2012-12-12T17:10:00-08:00" store="DEPOSIT" favoredteam="Houston Rockets">
            <spread points="-10.5" team1adj="-110" team2adj="-110" puckline="" circled="N"/>
            <total points="206" team1adj="-110" team2adj="-110" circled="N"/>
            <money team1line="525" team2line="-750" drawline="0" circled="N"/>
            <popularity index="11"/>
        </line>
    </game>
    <game id="48037946" sporttype="Basketball" league="NBA" gamedate="2012-12-12T18:05:00-08:00" gamedow="4" status="O" team1rotnum="723" team1name="Memphis Grizzlies" team1pitcher="" team2rotnum="724" team2name="Phoenix Suns" team2pitcher="" ontv="N" channel="" order="5">
        <line periodnum="0" perioddesc="Game" periodwagercutoff="2012-12-12T18:10:00-08:00" store="DEPOSIT" favoredteam="Memphis Grizzlies">
            <spread points="-6.5" team1adj="-110" team2adj="-110" puckline="" circled="N"/>
            <total points="196" team1adj="-110" team2adj="-110" circled="N"/>
            <money team1line="-260" team2line="220" drawline="0" circled="N"/>
            <popularity index="10"/>
        </line>
    </game>
    <game id="48037947" sporttype="Basketball" league="NBA" gamedate="2012-12-12T19:35:00-08:00" gamedow="4" status="O" team1rotnum="725" team1name="San Antonio Spurs" team1pitcher="" team2rotnum="726" team2name="Utah Jazz" team2pitcher="" ontv="Y" channel="ESPN" order="5">
        <line periodnum="0" perioddesc="Game" periodwagercutoff="2012-12-12T19:40:00-08:00" store="DEPOSIT" favoredteam="San Antonio Spurs">
            <spread points="-3.5" team1adj="-110" team2adj="-110" puckline="" circled="N"/>
            <total points="209.5" team1adj="-110" team2adj="-110" circled="N"/>
            <money team1line="-165" team2line="145" drawline="0" circled="N"/>
            <teamtotals team1points="106.5" team1adj1="-115" team1adj2="-115" team2points="103" team2adj1="-115" team2adj2="-115" circled="N"/>
            <popularity index="2"/>
        </line>
    </game>
</livefeedlines> 
```

//<<<<<<<<<<<<<<<<<（闪存AS3代码）

```
import flash.net.URLRequest;
import flash.net.URLLoader;
import flash.events.Event;
import flash.text.TextFormat;
import flash.text.TextField;

// http://feeds.justbet.cx/xml/getLiveFeedLines.asp?fromminutes=5&periods=0&scores=N&popindex=Y&leagues=nba
var tf:TextFormat = new TextFormat();
//var url:String = "sports.xml";
var url:String = "http://feeds.justbet.cx/xml/getLiveFeedLines.asp?fromminutes=5&periods=0&scores=N&popindex=Y&leagues=nba";
var request:URLRequest = new URLRequest(url);
var urlLoader:URLLoader = new URLLoader();
var xDoc:XMLDocument = new XMLDocument();
var statsArray:Array = new Array();
var team1:Array = new Array();
var team2:Array = new Array();

//statsArrary.length = 0;  // removes ALL data from the array

tf.tabStops = [180, 240];

urlLoader.addEventListener(Event.COMPLETE, completeLoader);
urlLoader.load(request);

function completeLoader(e:Event): void {
    xDoc.ignoreWhite = true;
    var ldr:URLLoader = e.currentTarget as URLLoader;
    var xmlDP:XML = new XML(ldr.data);
    xDoc.parseXML(xmlDP.toXMLString());
    statsArray = xDoc.childNodes[0].childNodes;

    // trace("xml= " + xmlDP.game[0].@team1name);
    var maxLine:Number = statsArray.length - 1;
    for(var i:Number = 0; i < maxLine; i++) {
        team1[i] = xmlDP.game[i].@team1name;
        team2[i] = xmlDP.game[i].@team2name;
    }

    bindStats();
}

function bindStats() {
    txtGames.tabEnabled = true;
    txtGames.defaultTextFormat = tf;
    txtGames.text = "Games for Dec. 13\n\n";
    for(var i:uint = 0; i < team1.length; i++) {
        txtGames.appendText(team1[i] + "\t vs. \t" + team2[i] + "\n");  //Displayed info
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:13:58.967

```
import flash.net.URLRequest;
import flash.net.URLLoader;
import flash.events.Event;
import flash.text.TextFormat;
import flash.text.TextField;

// http://feeds.justbet.cx/xml/getLiveFeedLines.asp?fromminutes=5&periods=0&scores=N&popindex=Y&leagues=nba
var tf:TextFormat = new TextFormat();
var url:String = "sports.xml";
//var url:String = "http://feeds.justbet.cx/xml/getLiveFeedLines.asp?fromminutes=5&periods=0&scores=N&popindex=Y&leagues=nba";
var request:URLRequest = new URLRequest(url);
var urlLoader:URLLoader = new URLLoader();
var xDoc:XMLDocument = new XMLDocument();
var statsArray:Array = new Array();
var allData:Array = new Array();

//statsArrary.length = 0;  // removes ALL data from the array

tf.tabStops = [180, 240];

urlLoader.addEventListener(Event.COMPLETE, completeLoader);
urlLoader.load(request);

function completeLoader(e:Event): void {
    xDoc.ignoreWhite = true;
    var ldr:URLLoader = e.currentTarget as URLLoader;
    var xmlDP:XML = new XML(ldr.data);
    xDoc.parseXML(xmlDP.toXMLString());
    statsArray = xDoc.childNodes[0].childNodes;

    // trace("xml= " + xmlDP.game[0].@team1name);
    var maxLine:Number = statsArray.length - 1;
    for(var i:Number = 0; i < maxLine; i++) {
        allData[i] = {
            team1_name: xmlDP.game[i].@team1name,
            team2_name: xmlDP.game[i].@team2name,
            spread: xmlDP.game[i].line.spread.@points,
            total: xmlDP.game[i].line.total.@points         
        }
    }

    bindStats();
}

function bindStats() {
    txtGames.tabEnabled = true;
    txtGames.defaultTextFormat = tf;
    txtGames.text = "Games for Dec. 13\n\n";
    for(var i:uint = 0; i < allData.length; i++) {
        txtGames.appendText(allData[i].team1_name
                            + "\t vs. \t"
                            + allData[i].team2_name
                            + " (spread "
                            + allData[i].spread
                            + ") ( total "
                            + allData[i].total
                            + ")\n");  //Displayed info
    }

} 
```

Enjoy!

1.  Many arrays such `team1`, `team2` etc combined into one array `allData` of Objects contained complete info of one game

2.  Getting data from XML with Flash abilities ( [http://www.nbilyk.com/e4x-example](http://www.nbilyk.com/e4x-example) )

# ruby - Ruby：根据整数数组对对象数组进行排序

> ID：13869780
> 
> 赞同：4
> 
> 时间：2012-12-13T22:40:43.920
> 
> 标签：ruby, arrays, sorting

这看起来相当简单，之前应该问过，但我在 Stack Overflow 上找到的所有内容似乎都不起作用。我有一个包含 4 个对象的数组，我想按特定顺序重新排序。所以，它看起来像这样：

```
array = [Obj1, Obj2, Obj3, Obj4] 
```

我有另一个整数数组，代表所需的索引顺序：

```
desired_order = [2,3,0,1] 
```

所以我想在`array`正确订购后看到的是：

```
array = [Obj3, Obj4, Obj1, Obj2] 
```

我已经想出`sort_by`了要使用的方法，但我似乎无法想出正确的语法。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T22:52:29.940

[Array#values_at](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-values_at)完全符合您的需要：

```
array.values_at(*desired_order) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T22:42:33.610

```
desired_order.map{|i| array[i]} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T22:43:22.230

如果您已经有索引，那么您可以将它们映射到对象：

```
array = %w[obj1 obj2 obj3 obj4]
desired_order = [2,3,0,1]

desired_order.map{|idx| array[idx]} # => ["obj3", "obj4", "obj1", "obj2"] 
```

# php - PHP：动态加载插件/模块列表

> ID：13869781
> 
> 赞同：0
> 
> 时间：2012-12-13T22:40:54.793
> 
> 标签：php, oop, plugins

在我的项目中，我正在处理数据并处理结果。有一个抽象类，如下所示：

```
class AbstractInterpreter
{
    public function interprete( $data )
    {
        throw new Exception('Abstract Parent, nothing implemented here');
    }
} 
```

然后有各种不同的实现`AbstractInterpreter`：

```
class FooInterpreter extends AbstractInterpreter
{
    public function interprete( $data )
    {
        return "resultFoo";
    }
}
class BarInterpreter extends AbstractInterpreter
{
    public function interprete( $data )
    {
        return "resultBar";
    }
} 
```

我的调用代码创建解释器并收集结果：

```
//this is the data we're working with
$data = "AnyData";

//create the interpreters
$interpreters = array();
$foo = new FooInterpreter();
$bar = new BarInterpreter();
$interpreters[] = $foo;
$interpreters[] = $bar;

//collect the results
$results = array();
foreach ($interpreters as $currentInterpreter)
{
    $results[] = $currentInterpreter->interprete($data);
} 
```

我目前正在创建越来越多的解释器，代码变得混乱......对于每个解释器，我需要添加一个特定的`include_once(..)`，我必须实例化它并将其放入`$interpreters`.

**现在，最后问我的问题：**
*是否可以自动包含和实例化特定目录中的所有解释器并将它们放入`$interpreters`?*

在其他语言中，这将是某种插件概念：
我创建不同的实现`AbstractInterpreter`，将它们放在特定的子目录中，软件会自动使用它们。一旦完成，我就不必修改加载解释器的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:55:54.657

我不知道这是否可能自动，但您可以编写几行代码来获得相同的结果。

```
function includeInterpreters($path) {

    $interpreters=array();

    if ($dh = opendir($path)) {
        while (($file = readdir($dh)) !== false) {

            include_once($path.$file);
            $fileNameParts=explode('.', $file);
            $interpreters[]=new $fileNameParts[0];

        }
        closedir($dh);
    }

    return $interpreters;
}

$interpreters= includeInterpreters('/path/plugins'); 
```

将您的类文件命名为 InterpreterName.php 并放入同一目录，例如 plugings

是的，这看起来很乱。

# wix - 在 UI 上显示 ADDLOCAL 属性的值

> ID：13869783
> 
> 赞同：2
> 
> 时间：2012-12-13T22:41:04.303
> 
> 标签：wix, windows-installer, wix3.5

使用 WiX，我想显示在 MSI 安装结束时安装的功能列表。使用完整 UI 模式时，用户将使用功能树选择要安装的功能。查看日志，ADDLOCAL 属性已适当更新，并在日志中显示为以逗号分隔的功能列表。但是，当我尝试在 UI 上显示此值时，它显示为空白。如果我尝试通过命令提示符以完整 UI 模式启动 MSI 并为 ADDLOCAL 传递一个值，该值是 UI 上显示的值，即使用户通过功能树修改了功能选择。如何在对话框中向用户显示安装了哪些功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:26:57.337

将以下行添加到您的 wix 源代码中：

```
<SetProperty Id="FEATURELIST" Value="[ADDLOCAL]" After="CostFinalize"/> 
```

并使用`FEATURELIST`属性来获取所有已安装功能的列表。

就是这样。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-09T03:50:43.547

属性区分大小写确保使用像这样的大写 ADDLOCAL 希望这会有所帮助！

# php - 对用户提交的数据进行加盐和哈希处理

> ID：13869784
> 
> 赞同：0
> 
> 时间：2012-12-13T22:41:06.227
> 
> 标签：php, html, salt

> **可能重复：**
> [PHP 密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

我有：

```
$insert_query = 'insert into '.$this->tablename.'(
        name,
        email,
        username,
        password,
        confirmcode
        )
        values
        (
        "' . $this->SanitizeForSQL($formvars['name']) . '",
        "' . $this->SanitizeForSQL($formvars['email']) . '",
        "' . $this->SanitizeForSQL($formvars['username']) . '",
        "' . md5($formvars['password']) . '",
        "' . $confirmcode . '"
        )'; 
```

我想加盐并正确地 sha256 散列密码而不是使用 md5，我该如何正确加盐？将salt pass保存在php文件中是否足够安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:45:04.603

您可以通过创建一个随机数并对其进行加密来正确地对其进行加盐。我之前做过的一个登录系统实际上是通过 MD5 加密了密码，然后生成了一个介于 100,000 和 999,999 之间的随机数，并将其添加到加密密码的末尾。之后，整个字符串再次通过 MD5 加密。也许真的有点矫枉过正，但它确实完成了工作。

[您可以在此处阅读有关密码加盐、散列和加密的更多信息。](http://crackstation.net/hashing-security.htm)

# iphone - 如何将用户发送到 App Store 以安装应用程序，或从网站发送到带有变量的应用程序？

> ID：13869791
> 
> 赞同：5
> 
> 时间：2012-12-13T22:41:58.733
> 
> 标签：iphone, ios, ipad, ios6

我正在从网站上寻找一种方法，以确定设备上是否安装了 Apple App。这可能是一种将用户发送到 App Store 并从那里转发到相关应用程序的链接形式，或者是一种检测方法，当检测到应用程序丢失时提示用户安装该应用程序。我正在寻找的关键是没有错误消息（如果可能的话），但更重要的是，如果用户确实安装了该应用程序，则不会提示用户安装该应用程序。

普遍接受的解决方案（[Is it possible to register a http+domain-based URL Scheme for iPhone apps, like YouTube and Maps?](https://stackoverflow.com/questions/1108693/is-it-possible-to-register-a-httpdomain-based-url-scheme-for-iphone-apps-like/1109200)）自IOS 6发布以来或在iPhone/iPad/iPod Touch的Chrome上不起作用。

任何有关此问题的帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:46:32.630

You can use a [Custom URL Scheme](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html) to achieve that.

On the javascript side (web) you can use the javascript example presented on the following Q&A (answer by Ievgen): [Determine if an app exists and launch that app on iOS](https://stackoverflow.com/questions/5746289/determine-if-an-app-exists-and-launch-that-app-on-ios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T19:39:54.017

这是您需要在服务器上托管并链接到电子邮件、社交媒体等的页面的具体示例。只需替换为您的应用程序的 URI 和您的 App Store 链接。请注意，iframe 适用于更多浏览器。

```
<!DOCTYPE html>
<html>
    <body>
        <script type="text/javascript">
            window.onload = function() {
                // Deep link to your app goes here
                document.getElementById("l").src = "my_app://";

                setTimeout(function() {
                    // Link to the App Store should go here -- only fires if deep link fails                
                    window.location = "https://itunes.apple.com/us/app/my.app/id123456789?ls=1&mt=8";
                }, 500);
            };
        </script>
        <iframe id="l" width="1" height="1" style="visibility:hidden"></iframe>
    </body>
</html> 
```

因此，如果用户安装了您的应用程序，则带有 URI 的链接将成功，并且您将存在浏览器，然后才能触发重定向到 App Store 的脚本。如果用户没有您的应用程序，则重定向成功（在简短的丑陋错误消息之后）。

还有第二种可能性（**避免错误消息**）首先依赖于 cookie，而 javascript 重定向仅作为后备。这是逻辑：

当没有应用程序的用户第一次点击指向您应用程序的链接时，他或她会被直接重定向到 App Store。这是通过指向您的应用程序的链接来实现的，该链接实际上是您的服务器上使用重定向动态生成的页面。您创建一个 cookie 并在您的后端记录 IP 地址、操作系统、操作系统版本等的“数字指纹”。

当用户安装并打开应用程序时，您会收集另一个“数字指纹”并将其发送到您的后端。现在您的后端知道该链接已安装在对与您的应用关联的链接的任何后续访问中，您的服务器会根据随请求发送的 cookie 确保动态生成的重定向页面指向应用，而不是应用商店。

这避免了丑陋的重定向，但涉及大量工作。我在[Branch](https://branch.io)工作，我们在那里构建了它，并将它提供给任何想要使用它的开发人员。如果您对从头开始构建它有任何疑问，请随时与我们联系。

# java - 可视化 sqlite 数据库 schemaspy

> ID：13869792
> 
> 赞同：5
> 
> 时间：2012-12-13T22:42:03.057
> 
> 标签：java, sqlite, graph, schema

我正在尝试可视化 sqlite 数据库。有几个页面在讨论这个问题，但这些解决方案都没有对我有用[可视化数据库模式](https://stackoverflow.com/questions/433071/good-tool-to-visualise-database-schema)或[使用 sqlfairy](http://nsaunders.wordpress.com/2009/01/11/easy-visualisation-of-database-schemas-using-sqlfairy/)或[SchemaDisplay](http://www.sqlalchemy.org/trac/wiki/UsageRecipes/SchemaDisplay)轻松可视化的好工具。似乎问题出在 SQLite.JDBCDriver 上。这是关于[java 和 sqlite](https://stackoverflow.com/questions/41233/java-and-sqlite?rq=1)的讨论，但我无法弄清楚。我所做的是将 sqlite-jdbc-3.7.2.jar 重命名为 sqlite.jar 希望这会有所帮助，但你可以看到运气不好。

```
[pista@HP-PC schemaspy]$ ls -l
total 7084
drwxrwxr-x  3 pista pista    4096 Dec 12 22:34 javasqlite
drwxrwxr-x  2 pista pista    4096 Dec 12 22:05 lib
drwxrwxr-x 14 pista pista    4096 Dec 12 22:15 mendeley
drwxrwxr-x  2 pista pista    4096 Dec 12 22:13 out
drwxrwxr-x  2 pista pista    4096 Dec 12 22:05 properties
-rw-rw-r--  1 pista pista    2655 Feb 22  2009 README.TXT
-rw-rw-r--  1 pista pista  248945 Aug 16  2010 schemaSpy_5.0.0.jar
-rw-rw-r--  1 pista pista  161441 Dec 12 22:04 schemaSpyGUI20090302.zip
-rw-rw-r--  1 pista pista      26 Nov  4  2007 schemaSpyGUI.bat
-rw-rw-r--  1 pista pista  102299 Mar  2  2009 schemaSpyGUI.jar
-rw-rw-r--  1 pista pista      86 Nov 18  2007 schemaSpyGUI.sh
-rw-rw-r--  1 pista pista  284954 Dec 12 22:25 sqlite-dll-win32-x86-3070701.zip
-rw-rw-r--  1 pista pista 3201128 Dec 12 22:28 sqlite.jar
-rw-rw-r--  1 pista pista 3201128 Aug 27  2010 sqlite-jdbc-3.7.2.jar
drwxrwxr-x  3 pista pista    4096 Dec 12 22:05 src
drwxrwxr-x  2 pista pista    4096 Dec 12 22:31 xerial
drwxrwxr-x  7 pista pista    4096 Dec 12 22:31 xerial-sqlite-jdbc-e0fd4e05a97e
[pista@HP-PC schemaspy]$ java -jar schemaSpy_5.0.0.jar -t sqlite -u pista -o out/ -db mendeley/wakatana@gmail.com@www.mendeley.com.sqlite 
Using database properties:
  [schemaSpy_5.0.0.jar]/net/sourceforge/schemaspy/dbTypes/sqlite.properties
java.lang.ClassNotFoundException: SQLite.JDBCDriver

Failed to load driver 'SQLite.JDBCDriver'from: [file:/home/pista/schemaspy/sqlite.jar]

Use the -dp option to specify the location of the database
drivers for your database (usually in a .jar or .zip/.Z). 
```

我做错了什么，这是好方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-04T15:21:06.363

我能够让 sqlite 使用 schemaspy 命令行工具。我使用了来自以下位置的 sqlite jdbc 驱动程序：

[https://bitbucket.org/xerial/sqlite-jdbc](https://bitbucket.org/xerial/sqlite-jdbc)

我的 sqlite.properties 文件如下所示：

```
description=SQLite
connectionSpec=jdbc:sqlite:<db>
db=database name
driver=org.sqlite.JDBC
#you may need to put the full path to the driver depending on your setup
driverPath=sqlite-jdbc-3.7.15-M1.jar
selectTablesSql=.tables 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:28:29.760

JDBC 驱动程序类是 org.sqlite.JDBC，而不是 SQLite.JDBCDriver。

我建议您尝试[使用 SchemaCrawler for SQLite](http://schemacrawler.sourceforge.net/bundled.html)，这是一个免费的开源数据库文档工具。用于 SQLite 下载的 SchemaCrawler 与更高版本的 SQLite JDBC 驱动程序 3.7.8 捆绑在一起，不需要额外重命名 jar。

Sualeh Fatehi，SchemaCrawler

# c# - 在运行时填充泛型集合

> ID：13869796
> 
> 赞同：0
> 
> 时间：2012-12-13T22:42:11.913
> 
> 标签：c#, generics, collections

我正在尝试编写一个工具，我需要使用反射创建和返回 DLL 中给定的类的对象。DLL 可能包含许多类，并且类可能有许多变量，包括基元、泛型、集合和其他类的对象。

我在填充集合时遇到了特别的麻烦，因为我事先不知道它将是哪种集合（无论是 List、Dictionary、HashSet 还是其他任何东西）。我编写了代码来获取集合的参数，并编写了代码来创建一些随机对象以插入到集合中；但我被困在实际的插入过程本身。

这是我到目前为止所拥有的：

```
if (fieldType.IsGenericType)
{
    Type[] typeArgs = fieldType.GetGenericArguments(); // Get the arguments, for eg, List<String> will return String as argument
    object genericObj;

    /* Check if it has generic type definition or specific type definition then create the object */
    if (fieldType.IsGenericTypeDefinition)
    {
        Type constructGeneric = fieldType.MakeGenericType(typeArgs);
        genericObj = Activator.CreateInstance(constructGeneric);
    }
    else
    {
        genericObj = Activator.CreateInstance(fieldType);
    }
    //populate genericObj with 7 key-val pair --> in case of List<String> I want to populate the List with 7 Strings, in case of Dictionary<int,string> I want 7 <int, string> pairs
    for (int i = 0; i < 7; i++)
    {
        Object[] oArr = new Object[typeArgs.Length];
        int ctr = 0;
        foreach (Type ta in typeArgs)
        {
            if (ta.IsPrimitive || Type.GetTypeCode(ta) == TypeCode.String)
            {
                Random rnd = new Random();
                var buffer = new byte[sizeof(Int64)];
                rnd.NextBytes(buffer);
                switch (Type.GetTypeCode(ta))
                {
                    case TypeCode.Boolean:
                        oArr[ctr] = (rnd.Next(100) % 2 == 0);
                        break;
                    case TypeCode.Byte:
                        oArr[ctr] = buffer[0];
                        break;
                    case TypeCode.SByte:
                        oArr[ctr] = (sbyte)buffer[0];
                        break;
                    case TypeCode.Char:
                        oArr[ctr] = Convert.ToInt32(Math.Floor(26 * rnd.NextDouble() + 65));
                        break;
                    case TypeCode.Decimal:
                        oArr[ctr] = NextDecimal(rnd);
                        break;
                    case TypeCode.Double:
                        oArr[ctr] = rnd.NextDouble() * rnd.Next(Int32.MaxValue);
                        break;
                    case TypeCode.Single:
                        var buf = new byte[sizeof(Single)];
                        rnd.NextBytes(buf);
                        oArr[ctr] = BitConverter.ToSingle(buffer, 0);
                        break;
                    case TypeCode.Int32:
                        oArr[ctr] = rnd.Next(Int32.MinValue, Int32.MaxValue);
                        break;
                    case TypeCode.UInt32:
                        oArr[ctr] = rnd.Next(Int32.MaxValue) + (rnd.Next(100) % 2) * rnd.Next(Int32.MaxValue);
                        break;
                    case TypeCode.Int64:
                        oArr[ctr] = BitConverter.ToInt64(buffer, 0);
                        break;
                    case TypeCode.UInt64:
                        oArr[ctr] = BitConverter.ToUInt64(buffer, 0);
                        break;
                    case TypeCode.Int16:
                        oArr[ctr] = rnd.Next(Int16.MaxValue);
                        break;
                    case TypeCode.UInt16:
                        oArr[ctr] = rnd.Next(Int16.MaxValue) + (rnd.Next(100) % 2) * rnd.Next(Int16.MaxValue);
                        break;
                    case TypeCode.String:
                        oArr[ctr] = RandomString(rnd.Next(100));
                        break;
                    default:
                        oArr[ctr] = 0;
                        break;
                }
            }
            else
            {
                oArr[ctr] = getInstance(dllFile, ta.Name);
            }
            ctr++;
            if(genericObj.GetType().GetGenericTypeDefinition().ToString() == "ICollection") {
                // This is where I am stuck -- HOW TO INSERT??
            }
        }
    }
    //setvalue
    f.SetValue(obj, genericObj);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:58:31.517

像任何其他集合一样.. 调用`Add`对象上的方法（或者它可能是 Items 属性的 Add 方法）

# sql - 高级 LINQ 更新语句

> ID：13869797
> 
> 赞同：1
> 
> 时间：2012-12-13T22:42:18.937
> 
> 标签：sql, vb.net, linq, sql-server-2008

我有一个`Price_old`类似的数据库：

```
Date --- Hour --- Price
_____________________________
Jan 1 --- 1 --- $3.0    
Jan 1 --- 2 --- $3.1    
Jan 1 --- 3 --- $3.3    
Jan 1 --- 4 --- $3.15    
Jan 2 --- 1 --- $2.95    
Jan 2 --- 2 --- $3.2    
Jan 2 --- 3 --- $3.05 
```

然后我拥有的是一个具有相同结构的电子表格，我将读入数据表，我将调用新的`Price_New`数据表，请注意 price new 可能与 Price_Old 的日期/小时不同

所以，我最终得到了 2 个数据表`Price_Old`， 和`Price_New`，我需要做的是`Price_old`使用 中的新价格进行更新`Price_New`，然后将这些新价格提交到数据库中。

我对 LINQ 有点陌生（大约 30 分钟的经验），如果有人能给我一两个关于这是否在 LINQ 中执行以及最好的方法是什么的指针，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:50:42.787

如果您使用的是 linq-to-sql 之类的东西，它`DataContext`实际上是执行更新的对象，而不是 Linq 本身。

据我所知，您有三个选择：

1) 使用`DataContext`对象将修改后的`Price_Old`对象添加到`DataContext`. 然而，正如[Terry Aney 所指出](http://www.aneyfamily.com/terryandann/post/2008/04/batch-updates-and-deletes-with-linq-to-sql.aspx)的，这种方法存在一些严重的性能开销问题。

2）如果`PRICE_NEW`是另一张表，您可以使用`UpdateBatch`类似于 Terry Aney 介绍的方法（请参阅上面的链接），但不幸的是，我还没有找到一种变体，允许您为每个表指定包含新值的现有数据列表独特的行。但如果有，生成的 SQL 将如下所示：

```
UPDATE
    PRICE_OLD
SET
    PRICE =
    (
        SELECT
            PRICE
        FROM
            PRICE_NEW
        WHERE
            PRICE_OLD.DATE=PRICE_NEW.DATE
            AND PRICE_OLD.HOUR = PRICE_NEW.HOUR
    )
WHERE
    EXISTS
    (
        SELECT
            PRICE
        FROM
            PRICE_NEW
        WHERE
            PRICE_OLD.DATE=PRICE_NEW.DATE
            AND PRICE_OLD.HOUR = PRICE_NEW.HOUR
    ) 
```

当你开始做这样的事情时，你也可以将这个 SQL 包装在一个存储过程中，然后你可以添加到你`DataContext`的代码中并调用它。并不是说弄清楚如何操作表达式树不会很有趣。不幸的是，即使这样也不允许您做您想做的事情：操作某种数据表中的数据，然后神奇地将更新应用到数据库。这让我

3) 如果您要生成一个尊重您对`DataTable`.`UPDATE``CASE`

```
UPDATE
    PRICE_OLD
SET
    PRICE = CASE WHEN ID =1 THEN 3 WHEN ID = 2 THEN 3.1...
WHERE
    ID IN
    (
        1, 2, ...
    ) 
```

您在哪里构造一个字符串，动态传入从您读取的值`DataTable`（当然，所有这些都是通过参数化实现的）。如您所见，这看起来很糟糕，并且可能会产生一些负面的相关性能开销。为了解决这个问题，我实施了一个三阶段的方法：

一个。创建一个与 my 具有相同架构的临时表`DataTable`。

湾。用于`SqlBulkCopy`将 复制`DataTable`到该临时表。

C。使用我在上面 #2 中提到的 SQL 字符串，替换`PRICE_NEW`为您的临时表的名称。这可以正确更新您的表格，而无需任何参数化。

这可能涉及一些字符串操作，但好处是基于集合的更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:46:08.167

从它的名字来看，LINQ = Language-Integrated Query——它的意思是读取数据。您不能使用 LINQ 查询直接执行数据库更新。有一个[DataContext](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx)类，它使数据库更新成为可能——它运行在 LINQ 之上。

看看这个：[LINQ 简介](http://msdn.microsoft.com/en-us/library/bb397897.aspx)。

还有这个：[演练：简单对象模型和查询（C#）](http://msdn.microsoft.com/en-us/library/bb386940.aspx)

# c# - 可以分配为图钉的名称属性的限制是什么？

> ID：13869801
> 
> 赞同：0
> 
> 时间：2012-12-13T22:42:24.617
> 
> 标签：c#, bing-maps, pushpin

由于 Name 属性是一个字符串，我认为您可以为其分配任何字符串值；另一方面，以编程方式执行此操作：

```
Pushpin rupertTPupkin@att.net = new Pushpin(); 
```

...由于@符号而不起作用，所以...可以分配给Pushpin的Name属性的限制是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-17T14:38:06.420

变量名中不能有“@”符号。在 C# 中，变量名称可以是任何字母数字值，只要第一个字符不是数字即可。您也可以使用下划线。变量名中不能使用其他字符。“@”在涉及 c# 中的变量时具有特殊含义，可以作为变量名的前缀放置。完成此操作后，“@”符号允许使用关键字作为标识符，这在与其他编程语言交互时很有用。字符 @ 实际上不是标识符的一部分，因此标识符在其他语言中可能被视为普通标识符，没有前缀。带有@前缀的标识符称为逐字标识符

# mysql - 意外的字符串转换为十六进制

> ID：13869807
> 
> 赞同：0
> 
> 时间：2012-12-13T22:43:01.217
> 
> 标签：mysql, sql, string, view, hex

我有一个公式设置，它采用小数，即 a 基数 10`3.6 three hours and point 6 minutes`并将小数位转换为基数 60 `36 minutes`。然后它使用上限将分钟四舍五入到最接近的 15 分钟增量，因此它总是四舍五入`36 to 45 minutes`。然后它将小时部分与分钟部分连接起来，并在它们之间放置一个字符串冒号。这个 sql 在视图中执行。

现在在视图中，它以十六进制值而不是字符串值的形式出现`8:30 turns into 0x383A333020483A4D`。但在选择查询中，它是正确的连接字符串格式。到底是怎么回事？

```
CONCAT((((CEILING(((60 * ((agent_logins.hours_worked) % 1)) / 15)) * 15) / 60) + ((agent_logins.hours_worked) - ((agent_logins.hours_worked) % 1))) - (((CEILING(((60 * ((agent_logins.hours_worked) % 1)) / 15)) * 15) / 60) + ((agent_logins.hours_worked) - ((agent_logins.hours_worked) % 1))) % 1, ':', (((CEILING(((60 * ((agent_logins.hours_worked) % 1)) / 15)) * 15) / 60) + ((agent_logins.hours_worked) - ((agent_logins.hours_worked) % 1))) % 1 * 60) as hours_worked 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:43:36.013

如下所述[`CONCAT()`](http://dev.mysql.com/doc/en/string-functions.html#function_concat)：

> 如果参数包含任何二进制字符串，则结果为二进制字符串。一个数字参数被转换成它的等效字符串形式。从 MySQL 5.5.3 开始，这是一个非二进制字符串。5.5.3之前是二进制字符串；为避免这种情况并生成非二进制字符串，您可以使用显式类型转换，如下例所示：
> 
> ```
> SELECT CONCAT(CAST(***int_col*** AS CHAR), ***char_col***);
> ```

您必须使用 5.5.3 之前的 MySQL 版本，因此将数字参数`CONCAT()`转换为二进制字符串（导致整体二进制字符串）。您的客户端以十六进制形式向您显示二进制列，这是一种合理的行为。

正如文档所说（以及[@SofianeM's answer](https://stackoverflow.com/a/13870314)[`CONVERT()`](http://dev.mysql.com/doc/en/cast-functions.html#function_convert)中所建议的），您可以通过使用or显式转换回非二进制字符串来克服这个问题[`CAST()`](http://dev.mysql.com/doc/en/cast-functions.html#function_cast)。

但是，为什么不简单地使用[`SEC_TO_TIME()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_sec-to-time)？

```
SELECT SEC_TO_TIME(CEILING(4 * hours_worked) * 900)
FROM   agent_logins 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/d41d8/4998/0)上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:56:50.110

该十六进制表示的前四个字节似乎代表了您预期的字符串值的 ASCII 编码`'8:30'`。接下来的四个字节出现在 ASCII 编码中，表示`' H:M'`.

```
0x38 = '8'
0x3A = ':'
0x33 = '3'
0x30 = '0'
0x20 = ' '
0x48 = 'H'
0x3A = ':'
0x4D = 'M' 
```

* * *

这并不能真正回答您提出的问题，但是...

为什么不使用 MySQL 内置函数来进行这种类型的格式化？（一种可能的解释是您需要使用的“持续时间”值超出了 MySQL`TIME`数据类型允许的限制，即 -838:59:59 到 838:59:59。）

否则，您可以使用更简单的表达式将时间四舍五入到最接近的 15 分钟边界，并将其格式化为小时：分钟的字符串表示形式

```
TIME_FORMAT(SEC_TO_TIME(CEILING( agent_login.hours_worked *4)*900),'%k:%i') 
```

## [SQL小提琴在这里](http://sqlfiddle.com/#!2/220d8/3)

* * *

完全不清楚为什么使用视图作为行源的 SELECT 语句会返回八个字符，而 SELECT 生成的字符串应该只有四个字符，或者为什么客户端会选择显示十六进制表示。（八个字节恰好是 a 的长度`BIGINT`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:23:04.720

`Convert(exp, type)`解决了这个问题。[转换](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)。

# c++ - 混合共享/静态库时静态成员的多个副本

> ID：13869809
> 
> 赞同：4
> 
> 时间：2012-12-13T22:43:08.603
> 
> 标签：c++, visual-c++, inheritance, shared-libraries

情况：

我有：

```
class Platform {

public:
   Platform() { count++; cout << getCount();}
   static int getCount() { return count; }

private:
   static int count;

} 
```

它被创建为静态库。

考虑做一个动态库扩展

```
class __declspec(dllimport/dllexport) DerivedPlatform : public Platform {

} 
```

是的，我知道我是从非 dll 接口类派生的。

Per：[静态字段是继承的吗？](https://stackoverflow.com/questions/998247/are-static-members-inherited-c)，应该只有一个 count 实例。

这是棘手的部分，实际上我最终得到了两个不同的 count 副本（即使 count 被声明为静态）。即，在加载 dll 并调用 registerPlatforms() 时，它会增加一个不同的计数对象：

```
int main() {

   Platform::count = 0;
   Platform A; // increases count by 1, cout shows 1

   loadPlugin(); // loads the shared library DerivedPlatform
   DerivedPlatform D; // increases count by 1 again, cout shows 2

   cout << Platform::getCount(); // shows 1 !!!!!!

} 
```

我不知道如何解决这个问题，即。如何确保只有一个静态变量存在。显然 DLL 有它们自己的静态变量堆——所以为什么会发生这种情况是有道理的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T23:32:13.057

是的，当您将静态库链接到可执行文件和 DLL 时，就会发生这种情况。在链接时他们都不知道对方，所以他们都得到了一份副本。对于通常不会伤害任何东西的代码本身，但对于静态变量，它可能是一个真正的麻烦。

您需要重新构建您的解决方案，以便静态库位于 DLL 中，而不是现有的或全新的第三个。或者消除所有静态变量。

# javascript - 当没有属性值时，为什么 jQuery 不删除类或样式的属性名称？

> ID：13869810
> 
> 赞同：0
> 
> 时间：2012-12-13T22:43:11.347
> 
> 标签：javascript, jquery

当没有属性值时，为什么 jQuery 不删除类或样式的属性名称？

例如，`$('<div>').addClass('foo').removeClass('foo')`返回`[<div class>​&lt;/div>​]`而不是`[<div>​&lt;/div>​]`

我的猜测是性能，但也许还有其他原因。

这是jQuery实现：

[https://github.com/jquery/jquery/blob/master/src/attributes.js#L88](https://github.com/jquery/jquery/blob/master/src/attributes.js#L88)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:51:08.693

比较（来自 Chrome 23）：

```
> $('<div>').addClass('foo').removeClass('foo').attr('class')
"" 
```

和：

```
> $('<div>').attr('class')
undefined 
```

在前一种情况下，元素仍然有一个`class`属性，但它没有值。

在后一种情况下，元素根本没有`class`属性。

发生的事情是 jQuery 使用简单的字符串操作来删除类，如果结果字符串为空，那么这就是使用的 - 它永远不会`class`完全删除属性。

在 Chrome 中，即使是 DOM3`classList`函数也会留下一个空`class`属性 - 调用`el.classList.add('foo')`后跟`el.classList.remove('foo')`will（在没有任何其他类的情况下）会给您留下一个空的`class`.

# jquery-ui - 带有 Backbone 和 Marionette 的 Jquery UI 对话框

> ID：13869815
> 
> 赞同：2
> 
> 时间：2012-12-13T22:43:26.957
> 
> 标签：jquery-ui, jquery, backbone.js, marionette

我正在寻找一种在 Backbone 和/或 Backbone.Marionette 的上下文中使用 jquery 对话框的干净方法。

[当用户单击“注册”或“登录”时，我想要在我的其他网站](http://www.discretefx.com)上拥有的确切功能。这是我自己建立的一个网站，但那是我刚学习 jquery 的时候，代码非常像意大利面条，有很多 DOM 操作并没有太多结构。我将 3 个单独的 jQuery 对话框加载到内存中，并使用“打开”和“关闭”来操作它们。

现在，我正在使用 Backbone 和 Marionette 构建一个新站点，并且想要相同的功能，但具有更好的结构和更少的意大利面条代码。我想只将一个 jQuery 对话框加载到内存中，其中包含 Marionette.Region，然后根据单击的链接（“登录”、“注册”或“忘记密码”）切换区域内的视图：

在 _Layout.cshtml 中：

```
<div id="dialog">
            <div id="viewContainer"></div>
        </div> 
```

在 BackboneApp.js 中：

```
App.Regions.ModalRegion = Backbone.Marionette.Region.extend({

    el: '#dialog',
    constructor: function () {
        _.bindAll(this);
        Backbone.Marionette.Region.prototype.constructor.apply(this, arguments);
        this.on("show", this.showModal, this);
    },
    getEl: function (selector) {
        var $el = $(selector);
        return $el;
    },
    showModal: function (view) {
        view.on("close", this.hideModal, this);
        this.$el.dialog(view.dialogOptions);
        this.$el.dialog('open');
    },
    hideModal: function () {
        this.$el.dialog('close');
    }
});

App.Views.LoginView = Backbone.View.extend({
    initialize: function () {
        _.bindAll(this, 'render');
    },
    el: '#viewContainer',
    render: function () {
        $(this.el).load("/Account/Login", function () { });
        return this;
    }
});

var loginOptions = $.extend({}, defaultOptions, {
    title: "Log in",
    buttons: {
        "Log in": function () {
            //LOGIN POST
            Application.modal.close();
        }
    }
});

//Marionette Application
var Application = new Backbone.Marionette.Application();

Application.addRegions({
    modal: App.Regions.ModalRegion
});

Application.addInitializer(function (startOptions) {

    $('#loginLink').live('click', function () {
        var loginView = new App.Views.LoginView();
        Application.modal.show(loginView);
    });

});
Application.start(); 
```

我有这个问题：

1.  视图的渲染方法被调用了两次。
2.  第一次加载对话框时，您可以看到它被扔到 DOM 中，然后对话框打开动画运行。
3.  随后加载对话框时，根本不会出现对话框动画
4.  Application.modal.close() 不会触发 hideModal()
5.  不是问题，但是如何将每个视图的特定 dialogOptions 附加到视图？（将在 showModal 中引用）

是的，那里有很多问题，但我确信它们是相关的。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:16:45.457

这篇文章有点老了，所以它使用的是过时版本的木偶......但这些想法仍然有效： http: [//lostechies.com/derickbailey/2012/04/17/managing-a-modal-dialog-with-骨干和木偶/](http://lostechies.com/derickbailey/2012/04/17/managing-a-modal-dialog-with-backbone-and-marionette/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T10:56:37.450

我过去不得不使用的一种方法来让骨干/木偶与 iLightBox 很好地配合使用，如下所示：

```
onShow: function(){
    var self = this;
    $.iLightBox([
    {
        URL: '#competition',
        type: 'inline',
        options: {
            onRender: function(){
                console.log($('.ilightbox-container #competition'));
                self.$el = $(".ilightbox-container #competition");
                self.delegateEvents(self.events);
            }
        }
    }
    ]);
} 
```

这将更`itemview`改为在渲染时使用新创建的模式对话框，然后绑定事件。

# git - Git 推送到一个远程存储库，该存储库部署到多个其他远程存储库

> ID：13869816
> 
> 赞同：3
> 
> 时间：2012-12-13T22:43:26.713
> 
> 标签：git

我们正在学习 Git，并且只想推送到我们的主 Git 服务器（git.example.com）。必须部署（基于 repo）到其他服务器，例如我们的开发网络服务器 (dev.example.com) 和 Redmine (redmine.example.com) 项目管理服务器。

我们知道这可以通过以下的小配置来完成：`.git/config`在工作站上，例如：

```
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = https://git.example.com/testing.git
    # Development server only needs to serve the files.
    url = https://dev.example.com/testing.git
    # Redmine must be a bare one.
    url = https://redmine.example.com/testing.git 
```

我们对上述解决方案的看法。首先，这会消耗额外的带宽/上传。其次，我们不喜欢必须在客户端配置：`.git/config`. 无论如何至少在 git.example.com 上配置它？

对于任何有同样问题的人来说，这个网站确实帮助了我们很多：[使用 git 进行网站维护，专业的方式](http://www.ellipsix.net/blog/2010/08/website-maintenance-with-git-the-pro-way.html "使用 git 维护网站，专业的方式")。您可以在该页面底部找到的小片段：

> 根据您的需要，您可能需要稍微调整此过程。假设您只想将更改从 git.example.com 上的裸存储库推送到登台服务器，而不是直接从您的家用计算机。您可以通过将 remote.staging.push 配置选项更改为 read `refs/remotes/origin/master:refs/heads/master`而不是 `refs/heads/master:refs/heads/master`. 如果您有多个开发人员需要能够推送到登台服务器，这可能会很有用。

我们并不完全理解这种可能的解决方案。但听起来它可以解决我们的问题。我们也在通读 Git 文档，并会及时通知你们。

非常感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:43:51.943

您可以使用服务器端挂钩脚本来执行此操作。在这种情况下，您需要添加到 post-receive 挂钩，一旦更新被接受并应用到服务器存储库并且一切都完成，该挂钩就会运行。我使用这个钩子通过将所有补丁重新应用到另一个 repo 来将 git-tfs 存储库镜像到具有更多历史记录的适当 git 存储库。出于您的目的，仅调用`git push --mirror`每个目标可能就足够了。或者您可以在服务器上运行一个 cron 作业以定期执行相同的操作。

示例 post-receive-email 钩子脚本显示了将目标存储库存储为配置变量并在继续之前检查存储库是否处于合理状态是多么有趣。钩子脚本的任何输出都可以显示给推送用户，如果由于任何原因导致失败，这会有所帮助。

`git push --mirror mirror1; git push --mirror redmine`最简单的就是在我认为的服务器挂钩/接收后脚本中添加一些行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T23:54:02.927

我们仍在努力改进我们的目标。看起来这个页面会帮助我们：[http ://sitaramc.github.com/gitolite/mirroring.html](http://sitaramc.github.com/gitolite/mirroring.html)

# asp.net - 物理路径、根路径、虚拟路径、相对虚拟路径、应用程序路径和绝对路径的区别？

> ID：13869817
> 
> 赞同：18
> 
> 时间：2012-12-13T22:43:27.563
> 
> 标签：asp.net, .net, asp.net-3.5

我在理解 .Net 中可用资源的各种路径有什么不同时有些困惑。

我只猜物理路径是资源的操作系统目录路径。我很困惑，事件无法告诉我基本上需要使用什么路径。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-07-29T04:49:19.127

关于 ASP.NET 应用程序，我认为它是这样的：

**物理路径：**使用驱动器/目录/文件的操作系统路径，其中实际应用程序并没有真正使用此路径，但如果使用了，它将使用虚拟路径进行映射。物理路径是操作系统定位资源的方式，即：`c:\\inetpub\wwwroot\aspnetapp`实际的应用程序只关心相对于其根目录的路径。

**根路径：**这将是您的 aspnetapp 根目录中的 URI 或 URL，或者`~/Home/Index`具有正确的路由配置（不要与 Unix 根目录命名约定混淆）。`http://www.yardpenalty.com`就 OS/NOS 而言，实际上可能是此示例的物理路径的位置。

**虚拟路径或相对虚拟路径：**应用程序从其 Web 服务器识别或识别的路径。

例如，在 IIS（或 OWIN）中，您可能在文件夹中有一个图像资源目录，`c:\\inetpub\ftp\images`但开发人员将这个文件夹映射到应用程序，就像这样`~\Images`......。因此，可以将其视为创建一个相对路径的能力，这些资源可以由您的应用程序及其用户在物理上位于其他地方时识别。

我想，当开发人员希望在单个域下提供一个或多个项目的外观时，在根应用程序下使用虚拟路径将有助于开发。

**绝对路径：**资源的完整路径。假设您有一个链接可以将您带到这样的特定路线： `<a href="http://www.yardpenalty.com/home/about"> About</a>`. 如果此链接位于布局或母版页中，则相对路径`<a href="~/home/about">About</a>`会更清晰。在某些情况下，您需要对绝对路径进行硬编码，但使用相对路径通常更明智，尤其是在开发涉及迁移时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-17T06:21:55.650

当前工作目录的相对路径 - 有时您可以找到这样格式的路径描述，`./Directory/Filename.Ext`这意味着该路径是相对于当前应用程序工作目录指定的。

# java - 使用 JXLS 导入 Excel：是否可以按顺序而不是名称指定工作表？

> ID：13869823
> 
> 赞同：0
> 
> 时间：2012-12-13T22:43:37.050
> 
> 标签：java, excel, import, jxls

我正在使用 JXLS XLSReader 读取 Microsoft Excel 文件。

这是我的配置文件的副本：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<workbook>
  <worksheet name="staff_acme">
    <loop startRow="1" endRow="1" items="VECIDataHolder" var="vdh" varType="gov.noaa.nsd.model.data.dataholders.VECIDataHolder">
      <section startRow="1" endRow="1">
        <mapping row="1" col="0">vdh.person_id</mapping>
        <mapping row="1" col="1">vdh.fullname</mapping>
        <mapping row="1" col="2">vdh.noaa_email_address</mapping>
        <mapping row="1" col="3">vdh.emergency_email_address</mapping>
        <mapping row="1" col="4">vdh.emergency_cell</mapping>
        <mapping row="1" col="5">vdh.emergency_sms</mapping>
      </section>
      <loopbreakcondition>
        <rowcheck offset="0">
          <cellcheck offset="0"/>
        </rowcheck>
      </loopbreakcondition>
    </loop>
  </worksheet>
</workbook> 
```

我的用户一直在更改工作表的名称，这让 JXLS 错过了它。

有没有办法告诉 JXLS 只阅读第一张纸，而无论它的名字是什么，都只阅读第一张纸？我在 Google 上找不到任何东西，但如果您可以，请随时发布链接

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T11:49:17.980

从 jxls 页面：

> 从 1.0.2 版开始，jxls-reader 支持按索引映射工作表。如果您不知道工作表的名称，这会很方便。

只需使用

```
<worksheet idx="0"> 
```

代替

```
<worksheet name="sheetName"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:53:01.837

我联系了开发商。他说这个功能还不存在。他会考虑把它放在未来的版本中。

作为一种解决方法，他建议使用 POI API 阅读工作簿以找出工作表名称。然后使用适当的工作表名称更新内存中的 XML 配置，并将其提供给 ReaderBuilder 或在没有 XML 但使用 API 调用的情况下构建配置。

HTH 其他人在这个问题上谷歌搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-03T09:01:27.953

正如coberty所指出的，您可以使用

```
<worksheet idx="0"> 
```

但为了完整起见：我遇到了类似的问题，但我需要在运行时指定工作表名称（用户从用户选择的 Excel 文件的工作表列表中选择，通过 Apache POI 读取工作表名称）。我通过使用网站上的 JXLS 阅读器示例并稍作更改来完成此操作：

代替：

```
 final XLSReader reader = ReaderBuilder.buildFromXML(xmlInputStream); 
```

我使用 Apache Digester setSubstitutor 使用此方法的副本，稍作更改（不幸的是，ReaderBuilder 不允许将替代器作为参数传递......）：

```
 final XLSReader reader = buildFromXML(xmlInputStream, sheetName);

  ...

  public static XLSReader buildFromXML(final InputStream xmlStream, final String sheetName)
         throws IOException, SAXException {

      final Digester digester = new Digester();

      // hier geschieht die Substituierung des Tabellenblattnamens -
      // der Rest der Methode entspricht dem Original
      substituteSheetName(sheetName, digester);

      digester.setValidating(false);
      digester.addObjectCreate("workbook", "org.jxls.reader.XLSReaderImpl");
      digester.addObjectCreate("workbook/worksheet", "org.jxls.reader.XLSSheetReaderImpl");
      digester.addSetProperties("workbook/worksheet", "name", "sheetName");
      digester.addSetProperties("workbook/worksheet", "idx", "sheetIdx");
      digester.addSetNext("workbook/worksheet", "addSheetReader");
      digester.addObjectCreate("*/loop", "org.jxls.reader.XLSForEachBlockReaderImpl");
      digester.addSetProperties("*/loop");
      digester.addSetNext("*/loop", "addBlockReader");
      digester.addObjectCreate("*/section", "org.jxls.reader.SimpleBlockReaderImpl");
      digester.addSetProperties("*/section");
      digester.addSetNext("*/section", "addBlockReader");
      digester.addObjectCreate("*/mapping", "org.jxls.reader.BeanCellMapping");
      digester.addSetProperties("*/mapping");
      digester.addCallMethod("*/mapping", "setFullPropertyName", 1);
      digester.addCallParam("*/mapping", 0);
      digester.addSetNext("*/mapping", "addMapping");
      digester.addObjectCreate("*/loop/loopbreakcondition", "org.jxls.reader.SimpleSectionCheck");
      digester.addSetNext("*/loop/loopbreakcondition", "setLoopBreakCondition");
      digester.addObjectCreate("*/loopbreakcondition/rowcheck", "org.jxls.reader.OffsetRowCheckImpl");
      digester.addSetProperties("*/loopbreakcondition/rowcheck");
      digester.addSetNext("*/loopbreakcondition/rowcheck", "addRowCheck");
      digester.addObjectCreate("*/rowcheck/cellcheck", "org.jxls.reader.OffsetCellCheckImpl");
      digester.addSetProperties("*/rowcheck/cellcheck");
      digester.addCallMethod("*/rowcheck/cellcheck", "setValue", 1);
      digester.addCallParam("*/rowcheck/cellcheck", 0);
      digester.addSetNext("*/rowcheck/cellcheck", "addCellCheck");
      return (XLSReader) digester.parse(xmlStream);
   }

   private static void substituteSheetName(final String sheetName, final Digester digester) {
      // set up the variables the input xml can reference
      final Map<String, Object> vars = new HashMap<String, Object>();
      vars.put("sheetName", sheetName);

      // map ${varname} to the entries in the var map
      final MultiVariableExpander expander = new MultiVariableExpander();
      expander.addSource("$", vars);

      // allow expansion in both xml attributes and element text
      final Substitutor substitutor = new VariableSubstitutor(expander);

      digester.setSubstitutor(substitutor);
   } 
```

现在我可以在 JXLS Reader XML 配置中使用变量 sheetName：

```
 <worksheet name="${sheetName}"> 
```

# c# - 如何将图像更改为图片框的大小？

> ID：13869824
> 
> 赞同：3
> 
> 时间：2012-12-13T22:43:37.707
> 
> 标签：c#, image

正如标题所说，我不明白为什么图像没有改变大小。任何人都可以看到吗？

```
{
            OpenFileDialog dlg = new OpenFileDialog();
            dlg.Title = "Open bitmap or jpeg.";
            //dlg.Filter = "jpg files (*.jpg);*.jpg;*.* | bmp files (*.bmp); *.bmp";
            if (dlg.ShowDialog() == DialogResult.OK)
            {
                this.pictureBoxMap1.Image = new Bitmap(dlg.OpenFile());
                Image newImage = this.pictureBoxMap1.Image;
                pictureBoxMap1.Height = newImage.Height;
                pictureBoxMap1.Width = newImage.Width;
            }
            dlg.Dispose(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T22:48:09.443

```
 OpenFileDialog fd = new OpenFileDialog();
        DialogResult r = fd.ShowDialog();
        if (r == System.Windows.Forms.DialogResult.OK)
        {
            pictureBoxMap1.Image = Bitmap.FromFile(fd.FileName);
            pictureBoxMap1.SizeMode = PictureBoxSizeMode.StretchImage;
            pictureBoxMap1.Refresh();
       } 
```

试试这个。

# google-api - Google 文档中的反向地理编码

> ID：13869828
> 
> 赞同：1
> 
> 时间：2012-12-13T22:44:06.177
> 
> 标签：google-api, reverse-geocoding, geocode

我正在尝试从 Google 电子表格中的地理编码位置（即：51.5665，-1.2410）获取国家和城市。我找到了一个代码，可以从一个国家的城市获取纬度和经度，但我无法将其更改为使用反向功能。

```
function onOpen() {
    // Add the Geocode menu
    SpreadsheetApp.getActiveSpreadsheet().addMenu("Geocoder", [{
        name: "Geocode addresses",
        functionName: 'geocode'
    }]);
}

function geocode() {
    // Get the current spreadsheet, sheet, range and selected addresses
    var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
    var sheet = SpreadsheetApp.getActiveSheet();
    var range = SpreadsheetApp.getActiveRange();
    var addresses = range.getValues();

    // Determine the first row and column to geocode
    var row = range.getRow();
    var column = range.getColumn();

    // Set default destination columns
    var destination = new Array();
    destination[0] = column + 1;
    destination[1] = column + 2;

    // Prompt for latitude and longitude columns
    var response = Browser.inputBox("Coordinate Columns",
        "Please specify which columns should contain the latitude " +
        "and longitude values [ie. 'C,D', 'A,F', etc]. Leave blank to " +
        "insert new columns.",
        Browser.Buttons.OK_CANCEL);
    if (response == 'cancel') return;
    if (response == '')
        sheet.insertColumnsAfter(column, 2);
    else {
        var coord_columns = response.split(',');
        destination[0] = sheet.getRange(coord_columns[0] + '1').getColumn();
        destination[1] = sheet.getRange(coord_columns[1] + '1').getColumn();
    }

    // Initialize the geocoder and set loading status
    var geocoder = Maps.newGeocoder();
    var count = range.getHeight();
    spreadsheet.toast(count + " addresses are currently being geocoded. " +
                      "Please wait.", "Loading...", -1);

    // Iterate through addresses and geocode
    for (i in addresses) {
        var location = geocoder.geocode(
            addresses[i]).results[0].geometry.location;
        sheet.getRange(row, destination[0]).setValue(location.lat);
        sheet.getRange(row++, destination[1]).setValue(location.lng);
        Utilities.sleep(200);
    }

    // Remove loading status
    spreadsheet.toast("Geocoding is now complete.", "Finished", -1);
} 
```

更准确地说，我想找到一个脚本，它采用纬度和经度，并在一列中返回城市，在另一列中返回国家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-05T12:16:34.717

您需要使用此功能（如下）而不是此功能：

> var location = geocoder.geocode(addresses[i]).results[0].geometry.location;

**reverseGeocode（纬度，经度）**

获取给定地理点的大致地址。

```
 // Gets the address of a point in Times Square.
     var response = Maps.newGeocoder().reverseGeocode(40.758577, -73.984464);
     for (var i = 0; i < response.results.length; i++) {
       var result = response.results[i];
       Logger.log('%s: %s, %s', result.formatted_address, result.geometry.location.lat,
         result.geometry.location.lng);
     }
```

[https://developers.google.com/apps-script/reference/maps/geocoder#reverseGeocode(Number,Number)](https://developers.google.com/apps-script/reference/maps/geocoder#reverseGeocode(Number,Number))

# ruby - 如何在Ruby的时间戳中获取月份作为字符串

> ID：13869830
> 
> 赞同：0
> 
> 时间：2012-12-13T22:44:26.653
> 
> 标签：ruby, timestamp

我需要获取以下时间戳格式：“2012 年 12 月 13 日 2:29:44 PM PST”

```
time_stamp = Time.now
time = time_stamp.strftime("%m %d, %Y %H:%M:%S %p PST")
time # => "12 13, 2012 14:29:44 PM PST" 
```

如何让月份字符串代替整数，并将小时数更正为 2 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:49:47.243

你真的应该先尝试谷歌搜索。我在 ruby​​ 日期格式的第一个结果下找到了这个：

[http://www.dzone.com/snippets/date-time-format-ruby](http://www.dzone.com/snippets/date-time-format-ruby)

```
time = time_stamp.strftime("%B %d, %Y %I:%M:%S %p %Z")

 => "December 13, 2012 02:49:18 PM PST" 
```

此外，您应该`%Z`代替 PST 以确保您处于正确的时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:52:25.743

看看这里的文档[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-i-strftime](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-i-strftime)

12 小时使用`%l`和每月使用`%B`

```
time_stamp = Time.now
time = time_stamp.strftime("%B %d, %Y %l:%M:%S %p PST")
时间 # =>“太平洋标准时间 2012 年 12 月 13 日下午 2:29:44”

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:52:39.423

您正在寻找的网站是：[http ://www.foragoodstrftime.com/](http://www.foragoodstrftime.com/)

它包含您可以传递给的所有选项，`strftime`并且您可以轻松构建自己的选项。

# c - Scanf 一次请求两个字符串

> ID：13869834
> 
> 赞同：4
> 
> 时间：2012-12-13T22:44:46.017
> 
> 标签：c, string, scanf, printf

在这段代码中，scanf 请求了两次，我不确定是什么原因导致它这样做。

```
int t;
for(t = 0;t<5;t++)
{
    //scanf requests twice for some reason
    scanf("%s ",input);
    fprintf(fp,"%s ", input);
    printf("%d Word(s)\n", (t+2));
} 
```

输出是（引号中的单词由用户输入）

```
"hello"
"world"
1 Word(s)
"how"
2 Word(s)
"are"
3 Word(s)
"you"
4 Word(s)
"lostword"
5 Word(s) 
```

和

```
"hello world how are you " 
```

将归还给我并保存到文件中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T22:50:00.753

删除 scanf 中的空格。

改变：

```
scanf("%s ",input); 
```

至：

```
scanf("%s",input); 
```

由于空间的原因，scanf 会不断跳过空白字符，直到它读取到不是空白的内容（在读取一个字符串之后`%s`）。

# javascript - 在保存的 DOM 上使用 jQuery 作为命令行

> ID：13869838
> 
> 赞同：0
> 
> 时间：2012-12-13T22:45:02.883
> 
> 标签：javascript, jquery

这是我想做的事情，

```
web_page = fetch("http://www.google.com")
console.log($(web_page).find("body")) 
```

通过一个简单的命令行。所以简而言之，保存一个网页，然后使用 jQuery 查询该页面。

有没有这样的工具可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:50:39.927

尝试 phantomjs ，一个无头 webkit 解决方案

[http://phantomjs.org/](http://phantomjs.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:52:54.213

如果您愿意在浏览器中执行此操作，请尝试使用 YQL 或您自己的代理来解决跨域 ajax 问题，通过 ajax 获取远程页面，然后遍历响应。

F.ex 使用类似[https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/](https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/)

你可以做

```
$.get('http://google.com', function(html) {
    console.log( $(html).find('body') );
});​​​​​​​​​​​​​​ 
```

演示：http: [//jsfiddle.net/uc7vt/](http://jsfiddle.net/uc7vt/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:05:48.940

如果你熟悉 Node.js， `npm install jquery`

# login - 在 2012 年 12 月 10 日的 FB DNS 问题之后，单个帐户在一台计算机上失败，但在其他计算机上工作

> ID：13869847
> 
> 赞同：-1
> 
> 时间：2012-12-13T22:45:41.360
> 
> 标签：login, facebook-login

我的一个朋友在从她的计算机访问她的 Facebook 帐户时遇到问题。这个问题从 2012 年 12 月 10 日下午开始出现，当时 Facebook 遇到 DNS 问题，导致用户无法访问他们的帐户或只能看到他们的新闻源等的部分更新。

我朋友的问题仍然存在，但这只发生在她家用电脑上的她账户上。她的主页出现，但没有新闻源项目，她的时间线页面仅显示标题照片和个人资料照片，但没有时间线故事或图片。

我试图将问题与 Facebook、她的互联网连接、她的浏览器或她的计算机隔离开来，但结果相互矛盾，如下所述。

(1) 可以在其他电脑上成功开通HER fb账户；她的主页和时间线页面正常显示。

(2) MY账号在她的电脑上可以打开，我的页面正常显示，但是她的页面在她的电脑上打不开。

(3) 她的帐户将通过她家的互联网 wifi 连接在我的笔记本电脑上打开，这也很好。

(4) 我尝试通过安装几个不同的浏览器以及清除浏览器缓存、临时文件、cookie 和历史记录来解决问题，但这未能解决在 HER 计算机上使用 HER 帐户的问题。

我错过了什么？该问题似乎仅与她的计算机上的帐户有关。Facebook 是否需要以 cookie 等方式在她的计算机上查看任何可能已损坏的内容，可能是由于上述 Facebook DNS 问题？如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:16:07.113

Facebook 和 Frontier 网络存在 DNS 冲突。我的已经进进出出 4 天了……有时下降 8 小时，然后上升 10 分钟，然后又下降。

在这里阅读：

[http://www.pcmag.com/article2/0,2817,2413060,00.asp](http://www.pcmag.com/article2/0,2817,2413060,00.asp)

# ruby-on-rails-3 - Rails 3 - 如何访问belong_to/has_many 关系中的父属性？

> ID：13869848
> 
> 赞同：0
> 
> 时间：2012-12-13T22:45:44.137
> 
> 标签：ruby-on-rails-3, activerecord, model, associations, belongs-to

我在 Rails 3 模型中有一个简单的问题：以下是我拥有的模型：

```
 class Order < ActiveRecord::Base
      attr_accessible :customer :date #blahblah..
      has_many :items
      accepts_nested_attributes_for :items

  class Item < ActiveRecord::Base
      belongs_to :order 
```

那么我怎样才能`@item.customer`在我的程序中达到呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:39:41.827

通过`order`协会本身。

```
@item.order.customer 
```

如果您想有一种方便的方法来`customer`直接从`Item`对象访问，那么您将不得不编写一些自定义访问器方法。

```
class Item < ActiveRecord::Base

  ...

  def customer
    self.order.customer
  end

  def customer=(new_customer)
    self.order.customer = (new_customer)
  end
end 
```

# kendo-ui - 使用 web listview 实现无限滚动

> ID：13869850
> 
> 赞同：5
> 
> 时间：2012-12-13T22:45:49.710
> 
> 标签：kendo-ui

我知道列表视图的网络版本没有像移动版本那样开箱即用的无限滚动功能。我仍然需要在我的解决方案中实现这一点，我不确定从哪里开始。我拥有的所有想法都需要我再次重新加载所有数据。所以可以说我加载了 25 行。你到达滚动点，它又加载了 25 个，我实现它的方式是重新加载前 25 个，然后再添加 25 个。这当然会随着你走得越慢而变慢所以这不是一个选择有没有人成功地完成了这样的事情？有没有好的开源无限滚动解决方案可用？任何提示/信息/代码将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:55:01.610

此功能在网络中的剑道网格中可用（请参阅剑道网站中的虚拟滚动示例）。使用带有虚拟滚动的网格并修改显示模板看起来像 listview 怎么样？

虚拟滚动网格的示例代码是：

```
 $("#yourList").kendoGrid({
        dataSource: {
            type: "json",                
            pageSize: 25,
            transport: {
                read: {
                    cache: false,
                    url: "controller/actionmethod",
                    type: "post",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json"
                }
            }
        },

        height: 150,
        width: 50,
        pageable: true,
        //selectable: "multiple",
        scrollable: {
            virtual: true
        },

        columns: [ { field: "col1", title: "col1" }]

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:55:28.733

我最终想出了一个解决方案。带有网格的虚拟滚动不是我想要的。我放弃了 listview 并使用了数据源和普通的 kendo 模板渲染。

这是它的工作原理......我的数据有一个父 div。我将一个事件附加到我的数据源更改事件中，一旦读取了新的数据页面，父 div 就会附加一个子 div，在其中呈现新的数据页面。到目前为止，这对我来说完美无缺。

所以我的 DOM 看起来像这样。

```
<div id="EndlesslyScrollabledata" >
    <div id="DataPage1">
       .....
   </div>
    <div id="DataPage2">
       .....
   </div>
</div>
<button> Load more data </button> 
```

每次单击加载更多数据都会将数据源移动到下一页，附加下一个“DataPage”并使用附加的“DataPage”内的数据呈现模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-02T09:44:39.090

我找到了一个使用 dataBinging 事件来模拟这种行为的解决方案：

MVC 代码：

```
@(Html.Kendo().ListView<your.custom.Class>()
    .Name("searchResults")
    .TagName("div")
    .ClientTemplateId("tptSearchResult")
    .DataSource(source =>
    {
        source.Read(read =>
        {
            read.Action("Search", "ControllerName").Data("searchResults_AdditionalData");
        });

    })
) 
```

如果要将搜索参数或其他内容发送到搜索服务，则应使用“AdditionalData”方法。

Javascript代码：

```
function Search(page) {
    currentPage = page;
    if(page == 1) {
        searchResults = [];
    }

    $("#searchResults").data("kendoListView").dataSource.read();
}

function searchResults_AdditionalData(ev) {
    return {
        code: $("#txtSearchCode").val(),
        pageNumber: currentPage,
        pageSize: pageSize
    };
}

var currentPage = 1;
var pageSize = 20;
var searchResults = [];
$(document).ready(function () {

    $("#searchResults").data("kendoListView").bind("dataBinding", function(ev) {

        if(searchResults.length != (currentPage * pageSize)) {
            if(!!ev && !!ev.items && ev.items.length == pageSize) {
                $("#btnLoadMoreData").show();
            } else {
                $("#btnLoadMoreData").hide();
            }

            searchResults = $.merge(searchResults, ev.items);
            this.dataSource.data(searchResults);
            this.dataSource.sync();
        }

    });
}); 
```

只剩下一件事：同步后滚动到列表中第一个添加的元素。

# xpath - 使用 xpath 的 Web.config 转换对于 spring 资源 uri 失败

> ID：13869852
> 
> 赞同：0
> 
> 时间：2012-12-13T22:45:55.617
> 
> 标签：xpath, web-config, transformation, xdt-transform

我的 vs2010 web.config 文件中有以下部分。我需要在调试环境中的每个资源 uri 中将 /bin/ 替换为 /bin/config/ 。我尝试在 web.debug.config 中使用 xdt:transformation 和定位器，并且 web.release.config 中不需要任何转换更改，可以保持不变。

```
 <context>
        <resource uri="~/bin/file1.config.xml" />
        <resource uri="~/bin/file2.config.xml" />
        <resource uri="~/bin/file3.config.xml" />
    </context> 
```

我尝试了几种不同的方法，但在 web.debug.config 中没有任何效果。这是我所拥有的不起作用。请帮忙。

```
 <resource uri="~/bin/Config/file1.config.xml" xdt:Transform="Replace" xdt:Locator="Condition(//resource[@uri='~/bin/file1.config.xml']) "/>
        <resource uri="~/bin/Config/file2.config.xml" xdt:Transform="Replace" xdt:Locator="Condition(//resource[@uri='~/bin/file2.config.xml']) "/>
        <resource uri="~/bin/Config/file3.config.xml" xdt:Transform="Replace" xdt:Locator="Condition(//resource[@uri='~/bin/file3.config.xml']) "/> 
```

**更新：**我需要能够通过 Visual Studio IDE 调试我的网站来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:22:14.167

1）首先能够在Visual Studio中运行转换调试，发布配置文件发现这个StackOverflow线程[VS 2010 Web.config转换进行调试](https://stackoverflow.com/questions/2990384/vs-2010-web-config-transformations-for-debugging?rq=1)

[http://ledtalks.posterous.com/webconfig-transformations-when-debugging#!/](http://ledtalks.posterous.com/webconfig-transformations-when-debugging#!/)

2) 实际转换对我有用，将 "xdt:Locator=" **Condition** (..." 更改为 "xdt:Locator=" **XPath** (..."

# mysql - 将结构化数据转换为 RDBMS 中的表

> ID：13869856
> 
> 赞同：0
> 
> 时间：2012-12-13T22:46:11.250
> 
> 标签：mysql, sql, database, database-design, rdbms

我有以下结构，我想将其转换为表（ RDBMS ）。

```
1)
Structure(
      // 1st entry
      "HK"
      Structure(
      "Aggressive Price", 100
      "Passive Price",    90,
      "Quantity", 1000
      "Tick Ladder", [ [ 0.1, 1 ],
                       [ 0.2, 2 ],
                       [ 0.3, 3 ] 
                     ]
      ),                  
     //2nd entry
     "JP",
      Structure(
      "Aggressive Price", 100
      "Passive Price",    90,
      "Quantity", 1000
      "Tick Ladder", [ [ 0.1, 1 ],
                       [ 0.2, 2 ],
                       [ 0.3, 3 ] 
                     ],
      Aggressive limits, Structure( "ABC", 10, "SCD", 20 )
      )         
)         

2)
Structure(
      // 1st entry
      "Algo1"
      Structure(
      "Aggressive Price", 100
      "Passive Price",    90,
      "Quantity", 1000
      "Tick Ladder", [ [ 0.1, 1 ],
                       [ 0.2, 2 ],
                       [ 0.3, 3 ] 
                     ]
      ),                  
     //Second entry
     "JP",
      Structure(
      "Aggressive Price", 100
      "Passive Price",    90,
      "Quantity", 1000
      "Tick Ladder", [ [ 0.1, 1 ],
                       [ 0.2, 2 ],
                       [ 0.3, 3 ] 
                     ],
      Aggressive limits, Structure( "ABC", 10, "SCD", 20 )
      )         
)         

Structure(
      // 1st entry
      "Algo2"
      Structure(
      "Aggressive Price", 100
      "Passive Price",    90,
      "Quantity", 1000
      "Tick Ladder", [ [ 0.1, 1 ],
                       [ 0.2, 2 ],
                       [ 0.3, 3 ] 
                     ]
      ),                  
     //Second entry
     "JP",
      Structure(
      "Aggressive Price", 100
      "Passive Price",    90,
      "Quantity", 1000
      "Tick Ladder", [ [ 0.1, 1 ],
                       [ 0.2, 2 ],
                       [ 0.3, 3 ] 
                     ],
      Aggressive limits, Structure( "ABC", 10, "SCD", 20 )
      )         
) 
```

1) -- 包含国家“HK”和“JP”的参数。

2) -- 包含“Algo1”和“Algo2”的相同参数。参数的值可以变化。将其表示为关系模式的最佳方式是什么。

我正在考虑的解决方案

1) 带有激进价格、被动价格、数量、刻度阶梯的“参数”表

2）引用表参数的表“国家”

3) 引用表参数的表“算法”

4) 一个表“梯形图”，用于存储将由“参数”数组引用的梯形图值。

如何为引用“参数”等的“国家”表生成唯一键？

还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:45:11.120

这样的事情是不是很离谱？

```
create table countries (country_code char(2) primary key,
                        country longtext);

create table algos (pk char(40) primary key,
                    country_code_fk char(2),
                    aggressive_price decimal(8,2),
                    passive_price decimal(8,2),
                    quantity int,
                    tick_ladder enum);

create table aggressive_limits (algo_fk char(40),
                                field_0 char(3),
                                field_1 int,
                                field_2 char(3),
                                field_3 int); 
```

# android - 可以在后台接收触摸屏事件吗？

> ID：13869857
> 
> 赞同：0
> 
> 时间：2012-12-13T22:46:13.557
> 
> 标签：android

> **可能重复：**
> [在后台服务中获取坐标触摸屏](https://stackoverflow.com/questions/3540076/get-co-ordinates-touch-screen-in-a-background-service)

我正在试验一个可访问性项目——是否可以在后台检测触摸屏事件，例如来自服务？假设我正在使用唤醒锁来让我的服务在后台保持活跃。

这只是一个概念验证，所以我现在不必担心电池。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:51:40.203

我认为您尝试执行的操作听起来类似于[在后台服务中获取坐标触摸屏](https://stackoverflow.com/questions/3540076/get-co-ordinates-touch-screen-in-a-background-service)

我也不知道从服务接收事件的任何方法，但是将事件转发到您的服务的建议听起来是可行的（只要您正在编写客户将自己使用的所有应用程序）

（曾经有一个使用 TYPE_SYSTEM_ALERT 的解决方案，但在 Android 4 中已关闭）

# visual-studio - 在 VS2012 输出窗口中滚动到末尾

> ID：13869858
> 
> 赞同：23
> 
> 时间：2012-12-13T22:46:14.323
> 
> 标签：visual-studio, visual-studio-2012

当应用程序运行时，我会收到大量信息写入输出窗口（这很好），并且此窗口会自动滚动到末尾，以便您始终看到写入的最新消息。

如果输出窗口中出现有趣的内容，我选择它以暂停自动滚动以进一步分析该消息。

完成后，我想恢复自动滚动功能。如何再次打开自动滚动？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-16T08:17:29.273

要重新启用自动滚动，只需在输出窗口中点击`CTRL`+ `END`。

# ios - PAN gesture ending not triggering 'touches ended' with a C4View Subclass? (C4)

> ID：13869863
> 
> 赞同：4
> 
> 时间：2012-12-13T22:46:53.873
> 
> 标签：ios, c4

So I'm using the [C4](http://www.c4ios.com) coding framework for IOS and I've encountered something I can't quite figure out.

I'm using two examples for the [C4 github](https://github.com/C4Code) account together - the testScrollView and WalkCycle examples.

I have a C4View subclass called Walker which uses the WalkCycle example as a the template for a small animated character. This character is placed into a scrollable view created from the testScrollView example. He's got a pan gesture added so that the user can drag him to the top of the screen, and watch him fall and splat on the bottom.

Only problem is I can't get any kind of method called when the pan gesture is ended, not from the -(void)touchesEnded command and not from others I've tried.

Some links to similar problems that haven't helped me but might help someone else work this out:

*   [Detecting Pan Gesture End](https://stackoverflow.com/questions/6467638/detecting-pan-gesture-end)
*   [Number of touches in PAN gesture is not working](https://stackoverflow.com/questions/12038108/number-of-touches-in-pan-gesture-state-ended-is-not-getting-in-ios)
*   [UIViewController not responding properly to gestures...](https://stackoverflow.com/questions/1162868/uiviewcontroller-not-responding-to-touches)

My totally uneducated and baseless hunch is that it has something to do with the walker being a child of C4View, as I didn't have this problem recognizing touchesEnded with c4shapes and images.

I'm not really sure what to post for code, but here are the relevant bits from Walker.m;

```
-(void)setup {
walkA = [C4Image animatedImageWithNames:@[@"beaviswalk1.tiff",
         @"beaviswalk2.tiff",
         @"beaviswalk3.tiff",
         @"beaviswalk4.tiff",
         @"beaviswalk5.tiff",
         @"beaviswalk6.tiff",
         @"beaviswalk7.tiff",
         @"beaviswalk8.tiff",
         @"beaviswalk9.tiff",
         ]];
[self addImage:walkA];
currentImage = walkA;
[walkA play];

mover = [C4Timer automaticTimerWithInterval:0.05f target:self method:@"walking" repeats:YES];

[self addGesture:TAP name:@"tapGesture" action:@"trip"];
[self addGesture:PAN name:@"panGesture" action:@"move:"];} 
```

and touchesEnded:

```
-(void)touchesEnded {
C4Log(@"touches Ended");
} 
```

and looking at Walker.h I just realized something strange;

```
#import "C4View.h"

@interface Walker : C4Image
-(id)initWithFrame:(CGRect)frame;
-(void)play;
-(void)switchWalkCycle;
-(void)trip;
-(void)bleed;
-(void)walking;
-(void)touchesEnded;
-(void)noTouching;
@end 
```

I changed the @interface to C4Image at some point, at the time it seemed to effect nothing and allowed me to have TAP and PAN gestures that worked. Until now....Changing it back to a C4View eliminates support for all gestures. I imagine the problem is there?

Apologies if there is a simple solution but I'm quite lost in trying to fix this.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T08:26:20.537

`move:`您添加到 Walker 的 PAN 手势的方法实际上是在引用内置于类中的方法（`C4Control`即所有可视对象）。

要确定手势何时释放，您可以重写该方法以添加一个条件来检查手势的状态何时结束。

为此，您首先将 C4 对象子类化（这里我使用 C4Shape，但您可以使用 C4Image）。

标题将如下所示：

```
#import "C4Shape.h"
@interface MyShape : C4Shape
@end 
```

该实现将有一个被覆盖的`move:`方法，如下所示：

```
#import "MyShape.h"
@implementation MyShape

-(void)move:(id)sender {
    [super move:sender];
    UIPanGestureRecognizer *panGesture = (UIPanGestureRecognizer *)sender;
    if(panGesture.state == UIGestureRecognizerStateEnded) {
        [self methodToRunWhenPanGestureEnds];
    }
}

-(void)methodToRunWhenPanGestureEnds {
    C4Log(@"the pan gesture ended");
}

@end 
```

...最后，在您的工作区中，您可以像往常一样创建对象并为其添加手势。

```
#import "C4WorkSpace.h"
#import "MyShape.h"
@implementation C4WorkSpace
-(void)setup {
    MyShape *s = [[MyShape alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    [s rect:s.frame];
    [s addGesture:PAN name:@"pan" action:@"move:"];
    [self.canvas addShape:s];
}
@end 
```

您可以从此处获取 C4 项目的副本，该项目显示如何执行此操作：[https ://github.com/C4Code/PanGestureEnded](https://github.com/C4Code/PanGestureEnded)

* * *

至于您遇到的 C4View 问题，您是对的……目前您不会在 C4Views 上使用手势。您可以将常规 UIGestureRecognizers 添加到 C4Views，但该方法`[object addGesture:name:action:]`将不起作用，因为我们尚未为 C4View 类实现此功能（但它已经在我们的待办事项列表中）。

# html - Simple css class selector issue

> ID：13869864
> 
> 赞同：-1
> 
> 时间：2012-12-13T22:46:56.837
> 
> 标签：html, css

I am having a problem with a simple first of type css issue

I have

```
<div class='test'>
   <div>test 1</div>  
   <div>test 2</div>  

</div>

<div class='test'>
   <div>test 3</div>  
   <div>test 4</div>  
</div>

<div class='test'>
   <div>test 5</div>  
   <div>test 6</div>  
</div> 
```

I want the first test div showing background red and the rest are blue.

I have

```
.test{
  background-color: blue;
  margin: 15px;
  border-top: dashed 1px grey;
}

.test:first-of-type{
  background-color: red;
  border-top:0;
} 
```

but all my `divs` are showing blue. Am I doing something wrong here? Thanks for the help!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:57:06.347

只需复制粘贴上面的脚本，它就可以在这里正常工作。

[http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_first-of-type](http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_first-of-type)

可能浏览器有问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:01:36.057

它适用于我的 ie9 和小提琴中的 ff。

我的猜测是您使用的浏览器不支持 css3。我建议只在第一个类上放置另一个类，以便向后兼容。

这是它的兼容性： [http ://reference.sitepoint.com/css/pseudoclass-firstoftype](http://reference.sitepoint.com/css/pseudoclass-firstoftype)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T22:59:27.013

发布的代码有效，并且[对`:first-of-type`选择器](https://developer.mozilla.org/en-US/docs/CSS/%3afirst-of-type)的支持很广泛。也许您在 IE 8 或更早版本上进行测试？或者也许在 IE 9 上但在[Quirks 模式下](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)？或者，可能有一些`div`在`div`元素之前。如果这没有帮助，请发布完整的文档并确定用于测试的浏览器。

# regular-language - Do the languages of 0-turn PDA's coincide with the regular languages?

> ID：13869865
> 
> 赞同：3
> 
> 时间：2012-12-13T22:46:58.493
> 
> 标签：regular-language, pushdown-automaton

A PDA ([Pushdown Automaton](http://en.wikipedia.org/wiki/Pushdown_automaton)) is said to be k-turn if, for any string w in its language, turn the direction of its stack at most for k times. Also it is well-known that the language L is linear iff accepted by a 1-turn PDA. Now, is it true that the regular languages are the languages which are accepted by a 0-turn PDA?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T06:09:46.987

**是**的，
您可以将有限自动机视为一种 `0-turn PDA`从不使用堆栈的自动机。

如果堆栈在自动机的两个连续描述中分别上升和下降，则称 PDA 执行转弯。并且对于每种正则语言 a`PDA`都可以构造，我们`PDS`在字符串接受结束时清空。

此外，正则语言是[乔姆斯基分类](https://math.stackexchange.com/questions/252454/in-context-of-chomskhy-classification-of-formal-languages)中线性语言的子集（右线性或左线性）。

# php - Currently selected combobox in php

> ID：13869869
> 
> 赞同：0
> 
> 时间：2012-12-13T22:47:12.670
> 
> 标签：php, javascript, mysql

I have a javascript related question. I have a form with multiple comboboxes being generated while loading:

```
<select id="email_adrs" class="input-medium">
<option>-Ontvanger-</option>
<?php while ($veri = mysql_fetch_array($verwijzer)) { ?>
   <option value="<?php echo $veri['email'];?>"><?php echo $veri['aanvrager']; ?></option>
<?php 
   }
?>
</select> 
```

When the submit button is clicked, the following code is executed:

```
<input onclick="sendmail('<?php echo $plist['patient_id']; ?>');" class="submit-green" type="submit" value="Versturen"   name="form_submit" /> 
```

The sendmail function is defined as:

```
function sendmail(pid)
{
    var email = document.getElementById('email_adrs').value;
    var xmlhttp1=new XMLHttpRequest();
    xmlhttp1.onreadystatechange=function()
    {
        if(xmlhttp1.readyState==4 && xmlhttp1.status==200)
        {
            MailNotification();
        }
    }
    xmlhttp1.open('GET','html2pdf/examples/email.php?id='+pid+'&email='+email,true);
    xmlhttp1.send();
} 
```

The problem I am facing is that if I restrict myself to the first record generated, the email is sent. If I select any other record and its corresponding combobox, I get the notification that the mail is sent, however while troubleshooting I found out that there is no value being passed for the email address. It appears to me that the code is not able to detect which combobox was selected.

Please help!

Regards,

Babu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:03:24.707

您应该将输入更改为

```
<input onclick="sendmail(this, '<?php echo $plist['patient_id']; ?>');" class="submit-green" type="submit" value="Versturen"   name="form_submit" /> 
```

和你的功能

```
function sendmail(clickedElement, pid)
{
    var formElem = clickedElement.parentElement; // (1)
    var selectElem = formElem.getElementsByTagName("select")[0]; // (2)
    var email = selectElem.value;

    /*
      [Ajax call here]
    */
} 
```

`.parentElement`(1)：根据您的布局，您必须申请尽可能多的表格才能到达表格。
(2)：如果您有超过 1 个`select`元素，请使用数组的适当索引。

如果您使用的是 JQuery，那么您可以使用

```
var email = $(clickedElement).closest("form").find("#email_adrs").val(); 
```

# c++ - Visual studio: Copying content during build, regardless of cpp changes

> ID：13869870
> 
> 赞同：3
> 
> 时间：2012-12-13T22:47:22.763
> 
> 标签：c++, visual-studio, visual-c++, msbuild

I'm working on a game engine that stores content (audio files, config files, textures, etc.) in a Content subfolder in the project. Master files live in $(ProjectDir)/Content, and need to get copied to the individual target directories ("Debug/Content" and "Release/Content") whenever the master files are changed.

I'm using a post-build event that works pretty well:

XCOPY "$(ProjectDir)Content" "$(TargetDir)Content" /I /D /E /C /Y

Unfortunately it only works if a build & link happens - i.e. I have to "touch" some .cpp file to trigger it, otherwise VS never executes the post-build XCOPY command.

Is there a way to get it to always run a command on Build(F6) or Run(F5)? Or a better way to handle content files in the project maybe? Hoping to be able to tweak Content files quickly then run the game to preview.

This is in Visual Studio 2012 professional.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T23:32:44.753

*编辑：我的答案的前一个版本在技术上是正确的，但设置起来不像这个那么容易。*

打开您的 .vcxproj 文件并在底部附近包含以下行：

```
<Target Name="CopyContent" AfterTargets="Build">
  <ItemGroup>
    <ContentFiles Include="ContentFiles/*.png" />
  </ItemGroup>
  <Copy DestinationFolder="Debug/Content/"
        SkipUnchangedFiles="True"
        SourceFiles="@(ContentFiles)"
        UseHardlinksIfPossible="True" />
</Target> 
```

这将复制任何更改的文件，而不管您的其他源文件的状态如何（即，即使您不必编译任何代码，MSBuild 仍将确保您的内容文件是最新的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T01:38:08.960

好的！找到了解决方案 - 使用一些晦涩的 MSBuild 语法。基于 moswald 的回答和一些在线研究。

```
<Target Name="CopyContent" AfterTargets="Build">
  <ItemGroup>
    <DeployFileGroup 
      Include="**\*.json;**\*.png;**\*.wav;**\*.mp3;" />
  </ItemGroup>
  <Copy SourceFiles="@(DeployFileGroup)" 
    DestinationFiles="@(DeployFileGroup->'$(TargetDir)%(RecursiveDir)\%(Filename)%(Extension)')" 
    SkipUnchangedFiles="True" UseHardlinksIfPossible="True"/>
</Target> 
```

# c++ - Is This a Good Design Choice?

> ID：13869875
> 
> 赞同：1
> 
> 时间：2012-12-13T22:47:40.320
> 
> 标签：c++, templates, void-pointers

I'm writing a program in OpenGL, and there's going to be custom events that are going to happen, ex. when a player hits an obstacle or takes a step. What I want to do is:

Have a singleton class named something like "EventBroadcaster." The broadcaster will get fed events from around the program. Then, when it receives an event, it will send it to all the listeners ("EventListener" objects) with a void* containing a struct which holds the event's information. The EventListener objects can then use their own custom callback function to handle the different types of events. Now, I want to avoid using void* if it all possible, so...

...question is, how can I do this with a template interface?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:30:56.573

如果您只想避免因为使用 void 指针而丢弃类型信息，则可能需要查看[boost::any](http://www.boost.org/doc/libs/1_52_0/doc/html/any/s02.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:47:12.883

将所有内容都转换为 void* 然后返回很容易出错。看看[boost::signals](http://www.boost.org/doc/libs/1_52_0/doc/html/signals.html)或[其他](http://sigslot.sourceforge.net)一些信号/槽库。它可能会帮助您避免丢弃类型信息。

一个类可以公开一个槽然后调用它。例如，可能有一个像`void PlayerMovedTo( Point position )`. 其他类可以连接到该插槽，并在发送信号时收到通知。

这是信号/插槽机制一般如何工作的粗略草图：

```
class Game {
public:
  Signal<void (float, float)> PlayerMovedTo;

  void update() {
    if ( downKeyPressed ) {
       y += 10;
       PlayerMovedTo( x, y ); // Tell everyone about it
    }
  }
};

class Mine {
public:
  Mine() {
    // There can be many mines, all connected to the one signal.
    game.PlayerMovedTo.connect( this, &Mine::playerMoved );
  }

  void playerMoved( float x, float y ) {
    if ( distance( this->x, this->y, x, y ) < 10 ) {
      boom();
    }
  }
}; 
```

# redis - Recoverable PUB/SUB with redis

> ID：13869876
> 
> 赞同：6
> 
> 时间：2012-12-13T22:47:51.177
> 
> 标签：redis

I am building a PUB/SUB system backed by Redis.

I have one publisher and tons of subscribers. The subscribers are not that reliable, they can lose connection at any time and need to be able to "recover" from a lost connection.

There is a twist though, I would like my backlog capped at some number, meaning that a faulty subscriber should be able to recover *only* up to N messages.

The trivial solution is:

1.  Publisher publishes message X
2.  X is pushed onto a list `RPUSH list message`
3.  Message is encoded to include its index in the list
4.  Message is published to consumers (with the index embedded) `PUBLISH channel encoded`

If a consumer needs to re-establish:

1.  It asks the redis for all the values in the list after the index it has and executes a `PSUBSCRIBE` atomically

* * *

Up to here we are all good.

My big question is, what if I want the backlog list to be capped at N items?

Is there any way I can keep an ever increasing index AND a capped backlog in the list?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T23:07:28.810

这个怎么样？要发布消息，请执行

```
LPUSH list message
LTRIM list 0 N
INCR global_index
PUBLISH channel global_index 
```

当通过 pub/sub 接收消息并启动时，客户端需要将其最新索引（也可以保存在 redis 或其他地方）与 global_index 进行比较，并从列表中读取 min(global_index - my_index, N) 消息赶上（基本上`LRANGE list 0 (global_index - my_index)`）。

# codeigniter - How can i grab the last 10 entries from my database and display them in my view with the last entry starting first?

> ID：13869878
> 
> 赞同：0
> 
> 时间：2012-12-13T22:47:54.513
> 
> 标签：codeigniter, blogs

Im am currently working on a blog that displays text below the text box as soon as you post an entry. At the moment my page displays the first 10 entries from the database base with the oldest starting first. How can i make the latest 10 entries display with the latest blog displaying first?

Here is my controller:

```
class Blog extends CI_Controller {

public function _construct()
{
    parent::__construct();
    $this->load->model("Blogmodel"); 
    $this->load->model("profiles");

}

public function index()
{

    $username = $this->session->userdata('username');

    $id = $this->session->userdata('id');

    $viewData['username'] = $username;

    $this->load->model('Blogmodel');

    if($this->input->post('act') =='create_post')
    {
        $this->Blogmodel->insert_entry();

    }

    $viewData['blogs'] = $this->Blogmodel->get_last_ten_entries();

    $this->load->view('shared/header');  
    $this->load->view('blog/blogtitle', $viewData);
    $this->load->view('shared/nav');
    $this->load->helper('form');// Load the form helper.

    // Lets set the stuff that will be getting pushed forward...
    $data = array();
    $data['form_open']=form_open();
    $data['form_title'] = form_input(array('name' => 'title'));
    $data['form_text'] = form_textarea(array('name' => 'text'));
    $data['form_hidden'] = form_hidden('act','create_post');
    $data['form_submit'] = form_submit('submit','Make Post');

    $this->load->view('blog/post', $data);
    $this->load->view('blog/blogview');

       $this->load->view('shared/footer');
    }

   } 
```

Here is my model:

```
class Blogmodel extends CI_Model
 {

 function Blogmodel()
  {
    parent::__construct();
  } 

public function get_last_ten_entries()// this is the function that grabs the entries from my blogs database
{
    $query = $this->db->get('blogs', 10);
    return $query->result();

    }
public function insert_entry()
{
    $this->title = $this->input->post('title');
    $this->body = $this->input->post('text');
    $this->username = $this->session->userdata('username'); 
    $this->date = date("Y-m-d");

    $this->db->insert('blogs', $this);

} 
```

}

View:

```
 <?foreach($blogs AS $viewData)
 {
$id = $viewData->id;
$title = $viewData->title;
$body = $viewData->body;
$username = $viewData->username;
$date = $viewData->date;

?>

   <b> <?=$title?></b>
    <p><?=$body?></p>

      <p>posted by:<?=$username?></p>
      <p>date: <?=$date?></p>

<hr>

  <?
   }
   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:04:30.877

只需按 id 字段排序您的结果（如果您的表中有一个）

```
public function get_last_ten_entries()
{
     $this->db->order_by('id', 'DESC');    
     $query = $this->db->get('blogs', 10);
    return $query->result();

 } 
```

或在数据库中添加行时添加时间戳，然后对该列的结果进行排序。

```
public function insert_entry()
{
    $this->timestamp = time();
    $this->title = $this->input->post('title');
    $this->body = $this->input->post('text');
    $this->username = $this->session->userdata('username'); 
    $this->date = date("Y-m-d");

    $this->db->insert('blogs', $this);   
}

public function get_last_ten_entries()
{
    $this->db->order_by('timestamp', 'DESC');    
    $query = $this->db->get('blogs', 10);
    return $query->result();        
} 
```

# bash - storing passed arguments in separate variables -shell scripting

> ID：13869879
> 
> 赞同：9
> 
> 时间：2012-12-13T22:47:58.160
> 
> 标签：bash, shell, argument-passing

In my script "script.sh" , I want to store 1st and 2nd argument to some variable and then store the rest to another separate variable. What command I must use to implement this task? Note that the number of arguments that is passed to a script will vary.

When I run the command in console

```
./script.sh abc def ghi jkl mn o p qrs xxx   #It can have any number of arguments 
```

In this case, I want my script to store "abc" and "def" in one variable. "ghi jkl mn o p qrs xxx" should be stored in another variable.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-13T22:51:16.290

如果您只想连接参数：

```
#!/bin/sh

first_two="$1 $2"  # Store the first two arguments
shift              # Discard the first argument
shift              # Discard the 2nd argument
remainder="$*"     # Store the remaining arguments 
```

请注意，这会破坏原始位置参数，并且无法可靠地重建它们。如果需要，还需要做更多的工作：

```
#!/bin/sh

first_two="$1 $2"  # Store the first two arguments
a="$1"; b="$2"     # Store the first two argument separately
shift              # Discard the first argument
shift              # Discard the 2nd argument
remainder="$*"     # Store the remaining arguments
set "$a" "$b" "$@" # Restore the positional arguments 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T22:57:47.477

切片`$@`数组。

```
var1=("${@:1:2}")
var2=("${@:3}") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-11T20:23:50.253

将所有参数存储在表中

```
 vars=("$@")

  echo "${vars[10]}" 
```

# java - java email connect method

> ID：13869882
> 
> 赞同：0
> 
> 时间：2012-12-13T22:48:13.750
> 
> 标签：java, jakarta-mail

I am using the same code that is in here : [How can I send an email by Java application using GMail, Yahoo, or Hotmail?](https://stackoverflow.com/questions/46663/how-do-you-send-email-from-a-java-app-using-gmail) for sending an email. Its calling the `transport.connect(...)` and never coming out of that method call. This is happening only when I am in my company network. When I run the same program from a different network its working fine.

I tried to do run it using both wired and wireless connection, but it didn't actually make any difference.

Any reason why it is not coming out of the `transport.connect` method...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:51:23.237

您的公司网络有一个防火墙，该防火墙会阻止您在代码中指定的端口上连接到 Gmail。

# c# - 将 SMTP 电子邮件添加到 DirectoryEntery 的 proxyAddresses

> ID：13869885
> 
> 赞同：0
> 
> 时间：2012-12-13T22:48:18.180
> 
> 标签：c#, properties, directoryservices

```
DirectoryEntry toFix = new DirectoryEntry(groupPath, privilegedUserName, privilegedPassword, AuthenticationTypes.Secure); 
```

有没有办法将“SMTP:bleh@myemail.com”添加到现有的 toFix.Properties["proxyAddresses"] 列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:01:16.057

查看此 MSDN 主题：[设置具有多个值的属性](http://msdn.microsoft.com/en-US/library/ms180863%28v=vs.80%29.aspx)。以下是上面链接中的一些代码示例。

下面的代码示例演示如何使用 AddRange 方法。

```
DirectoryEntry ent = new DirectoryEntry("LDAP://Fabrikam/CN=My Username,CN=Users,DC=Fabrikam,DC=com");
ent.Properties["otherTelephone"].AddRange(new object[] {"(425) 523 1462","(523) 125 6321"});
ent.CommitChanges(); 
```

下面的代码示例演示如何使用 Insert 方法。

```
DirectoryEntry ent = new DirectoryEntry("LDAP://Fabrikam/CN=My Username,CN=Users,DC=Fabrikam,DC=com");
ent.Properties["otherTelephone"].Insert(2, "525 623 5423");
ent.CommitChanges(); 
```

下面的代码示例演示如何使用数组为多值属性设置值。

```
DirectoryEntry ent = new DirectoryEntry("LDAP://Fabrikam/CN=My Username,CN=Users,DC=Fabrikam,DC=com");
ent.Properties["otherTelephone"][0] = "425 263 6234";
ent.CommitChanges(); 
```

# c++ - Cast invalid int value to enum

> ID：13869886
> 
> 赞同：6
> 
> 时间：2012-12-13T22:48:21.547
> 
> 标签：c++, enums

Say I have

```
enum Foo { Foo0, Foo1, Foo2 }; 
```

Note that no explicitly declared Foo constant has the value 3 (they are 0, 1, and 2).

Does the following invoke undefined behavior?

```
Foo yay = (Foo) 3; 
```

Note expecially that `3` might fit into the internal representation of `Foo`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T23:08:21.207

它的定义很好。为了表示值`0`、`1`和`2`，类型`Foo`必须至少有两位，这也足以表示`3`。

# asp.net - CORS、ASP.NET Web API、剑道用户界面

> ID：13869893
> 
> 赞同：-2
> 
> 时间：2012-12-13T22:48:51.690
> 
> 标签：asp.net, asp.net-web-api, kendo-ui

我有以下情况：

*   一个 ASP.NET Web API 项目（托管在 localhost:8081），它调用我的 BLL 来实现业务逻辑
*   一个 ASP.NET MVC4 项目（托管在 localhost:8080），它将形成我的 Web 层
*   未来计划为移动等添加项目
*   [我按照本文](http://blogs.msdn.com/b/carlosfigueira/archive/2012/02/20/implementing-cors-support-in-asp-net-web-apis.aspx)中定义的步骤设置 CORS 结构以允许跨域 ajax 请求

我有一个 API 服务可以从数据库中返回“somelist”。

*   **当我通过 Fiddler 做一个简单的请求时，我得到了服务器的正确响应**

要求：

```
 POST http://localhost:8081/api/orgs/getsomelist HTTP/1.1
    User-Agent: Fiddler
    Content-type: application/json
    Host: localhost:8081
    Content-Length: 158

    {"token": "sometoken","kValues": { "userId": "1.0" }} 
```

回复：

```
 HTTP/1.1 200 OK
    Cache-Control: no-cache
    Pragma: no-cache
    Content-Type: application/json; charset=utf-8
    Expires: -1
    Server: Microsoft-IIS/8.0
    X-AspNet-Version: 4.0.30319
    X-SourceFiles: =?UTF-8?B?WjpcRG9jdW1lbnRzXGNvZGVcSnNyZWVcSnNyZWVcSnNyZWUuQXBpXGFwaVxvcmdzXGdldG15b3Jncw==?=
    X-Powered-By: ASP.NET
    Date: Thu, 13 Dec 2012 22:15:34 GMT
    Content-Length: 315

    {successful JSON response} 
```

*   **当我通过 Web 应用程序（在 localhost:8080 上）使用简单的 ajax POST 调用执行相同操作时，Fiddler 显示 2 个请求，1 个返回 200 成功，另一个返回 500 个内部服务器**

```
 Code:
    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8;",
        crossDomain: true,
        url: "@urlToConnect",
        withCredentials: true,
        dataType: "json",
        data: JSON.stringify({token: "sometoken",kValues: { userId: "1.0" }})
    }); 
```

第一个请求：由于某种原因，它显示 OPTIONS 调用而不是 POST

```
 OPTIONS http://localhost:8081/api/orgs/getsomelist HTTP/1.1
    Host: localhost:8081
    Connection: keep-alive
    Access-Control-Request-Method: POST
    Origin: http://localhost:8080
    User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
    Access-Control-Request-Headers: origin, content-type, accept
    Accept: */*
    Referer: http://localhost:8080/
    Accept-Encoding: gzip,deflate,sdch
    Accept-Language: en-US,en;q=0.8
    Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

第一个回应：

```
 HTTP/1.1 200 OK
    Cache-Control: no-cache
    Pragma: no-cache
    Expires: -1
    Server: Microsoft-IIS/8.0
    Access-Control-Allow-Origin: http://localhost:8080
    Access-Control-Allow-Methods: POST
    Access-Control-Allow-Headers: origin, content-type, accept
    X-AspNet-Version: 4.0.30319
    X-SourceFiles: =?UTF-8?B?WjpcRG9jdW1lbnRzXGNvZGVcSnNyZWVcSnNyZWVcSnNyZWUuQXBpXGFwaVxvcmdzXGdldG15b3Jncw==?=
    X-Powered-By: ASP.NET
    Date: Thu, 13 Dec 2012 22:15:16 GMT
    Content-Length: 0 
```

第二个要求：

```
 POST http://localhost:8081/api/orgs/getsomelist HTTP/1.1
    Host: localhost:8081
    Connection: keep-alive
    Content-Length: 127
    Origin: http://localhost:8080
    User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
    Content-Type: application/json; charset=UTF-8;
    Accept: application/json, text/javascript, */*; q=0.01
    Referer: http://localhost:8080/
    Accept-Encoding: gzip,deflate,sdch
    Accept-Language: en-US,en;q=0.8
    Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

    {"token": "sometoken","kValues": { "userId": "1.0" }} 
```

第二个响应：我的 Web API 方法无法正确获取 POSTed JSON 数据。在上面的示例 1 中直接在 Fiddler 上发布时，我没有得到具有相同数据的异常

```
 HTTP/1.1 500 Internal Server Error
    Cache-Control: no-cache
    Pragma: no-cache
    Content-Type: application/json; charset=utf-8
    Expires: -1
    Server: Microsoft-IIS/8.0
    Access-Control-Allow-Origin: http://localhost:8080
    X-AspNet-Version: 4.0.30319
    X-SourceFiles: =?UTF-8?B?WjpcRG9jdW1lbnRzXGNvZGVcSnNyZWVcSnNyZWVcSnNyZWUuQXBpXGFwaVxvcmdzXGdldG15b3Jncw==?=
    X-Powered-By: ASP.NET
    Date: Thu, 13 Dec 2012 22:15:16 GMT
    Content-Length: 906

    {"Message":"An error has occurred.","ExceptionMessage":"some .NET exception"} 
```

*   **当我使用 kendoui 数据源做同样的事情时，我得到了同样的 2 个错误，但是我对提琴手的请求显示垃圾数据，而不是我发送的 JSON**

```
 Code:
    dataSource: new kendo.data.DataSource({
            transport: {
                read: {
                    type: "POST",
                    contentType: "application/json; charset=utf-8;",
                    crossDomain:true,
                    url: "@urlToConnect",
                    withCredentials: true,
                    dataType: "json",
                    data: JSON.stringify({token: "sometoken",kValues: { userId: "1.0" }})
                }
            },
            schema: {
                data: "data",
                type: "json",
                total: "count"
            } 
```

请求：JSON.stringify 发送奇怪的数据

```
 POST http://localhost:8081/orgs/somelist HTTP/1.1
    Host: localhost:8081
    Connection: keep-alive
    Content-Length: 705
    Cache-Control: max-age=0
    Origin: http://localhost:8080
    User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
    Content-Type: application/json; charset=UTF-8;
    Accept: application/json, text/javascript, */*; q=0.01
    Referer: http://localhost:8080/
    Accept-Encoding: gzip,deflate,sdch
    Accept-Language: en-US,en;q=0.8
    Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

    0=%7B&1=%22&2=t&3=o&4=k&5=e&6=n&7=%22&8=%3A&9=%22&10=1&11=F&12=V&13=R&14=A&15=I&16=1&17=E&18=b&19=7&20=%2F&21=%2F&22=M&23=7&24=U&25=A&26=Y&27=h&28=q&29=9&30=i&31=R&32=Z&33=U&34=%2F&35=Y&36=j&37=l&38=o&39=0&40=Q&41=5&42=Z&43=g&44=A&45=H&46=8&47=4&48=%2F&49=5&50=b&51=E&52=g&53=Z&54=F&55=M&56=%2B&57=p&58=Q&59=j&60=0&61=x&62=4&63=w&64=Z&65=6&66=W&67=c&68=T&69=M&70=u&71=Q&72=n&73=K&74=3&75=P&76=x&77=e&78=T&79=C&80=%2F&81=0&82=K&83=K&84=W&85=1&86=w&87=o&88=5&89=2&90=%2B&91=d&92=V&93=R&94=v&95=A&96=%3D&97=%3D&98=%22&99=%2C&100=%22&101=k&102=V&103=a&104=l&105=u&106=e&107=s&108=%22&109=%3A&110=%7B&111=%22&112=u&113=s&114=e&115=r&116=I&117=d&118=%22&119=%3A&120=%22&121=1&122=.&123=0&124=%22&125=%7D&126=%7D 
```

我不确定为什么当我直接或从 kendoui 数据源进行 ajax 调用时设置不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:53:45.993

您发布的方法是否为数据获取字符串？您是否尝试过仅使用 javascript 对象作为数据？

此外，您首先看到的选项请求是因为您正在发出跨域请求。它发送选项“飞行前”检查以获取 Access-Control-Allow-Origin 以查看是否允许发送 POST。如果您的 localhost:8080 不在 Access-Control-Allow-Origin 中，那么它甚至不会发送 POST。Anglin 写了一篇关于使用 kendo 启用跨域调用的精彩文章。他使用 odata，但有些原则适用。 [http://www.kendoui.c​​om/blogs/teamblog/posts/11-08-23/cross-domain_queries_to_odata_services_with_jquery.aspx](http://www.kendoui.com/blogs/teamblog/posts/11-08-23/cross-domain_queries_to_odata_services_with_jquery.aspx)

# xml - 在 as3 错误中将 XMLList 转换为字符串数组

> ID：13869896
> 
> 赞同：-1
> 
> 时间：2012-12-13T22:48:58.130
> 
> 标签：xml, arrays, actionscript-3, xmllist

我正在尝试将 XMLList 转换为 as3 代码中的字符串数组。这是 XMLList（行）：

```
<data>
   <conversation id="1" name="blah" key="area1" emptyState="false" background="null" alpha=".1">
    <scene numOfLines = "3">
      <lines>
          <line>This is a test for area1</line>
          <line>Hodor!</line>
          <line>The man who passes the sentence should swing the sword</line>
      </lines>
      <ll>bear</ll>
      <lr>shalev</lr>
      <rl>sarah</rl>
      <rr>taryn</rr>
    </scene>
  </conversation>
</data> 
```

这是我用来转换它的 as3 代码：

```
for each (var line:String in data.lines.line){
            conversationLine.push(line);
} 
```

然而，输出不是出现在 xml 中的文本（例如，这是对 area1 的测试），它只是行号。所以对于上面的代码，它将打印 0、1、2。

谁能帮我这个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:02:56.320

您正在迭代的元素是`XML`对象，因此您应该将迭代器转换为`XML`.

例子：

```
for each (var line:XML in data.lines.line){
    conversationLine.push(line.text());
} 
```

# operating-system - 普通 PC 有 RTOS 吗？

> ID：13869897
> 
> 赞同：2
> 
> 时间：2012-12-13T22:49:13.737
> 
> 标签：operating-system, rtos

是否有可以在普通 PC 上运行的 RTOS？

正常是指配备英特尔 i3 处理器和 4 GB RAM 的笔记本电脑。

如果不存在这样的系统，是否有可能制作一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:53:17.643

看看[QNX](http://www.qnx.com)。（填充文本以获取至少 30 个字符。）

# postgresql - 在 PostgreSQL 中使用 htmlentities 存储的字段，我如何搜索（sql 选择）特殊字符，例如，<而不进行 < 搜索？

> ID：13869904
> 
> 赞同：1
> 
> 时间：2012-12-13T22:49:40.660
> 
> 标签：postgresql

假设我有一种情况，用户可以在文本框中发布代码并将其存储在所有特殊字符都存储为 htmlentities 的表中。

如何在表中搜索字符“<”而不搜索其等效的 html 实体？postgresql 是否有内置功能？

感谢您的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:22:25.677

我不太确定我明白你真正想要什么。但是，如果您想知道如何有效地搜索包含 < 字符的表中的行**，****您**可以像这样*在表达式上*创建索引：

 ***```
CREATE INDEX index_name ON table (position('<' in column)); 
```

然后，您可以通过执行以下操作搜索其所需列包含该模式的行：

```
SELECT * FROM table WHERE position('<' in column) > 0; 
```

当然，我假设您的表中的大多数行都不会包含这样的模式，否则这个索引不会有太大用处。

**注意：**如果您使用 PostgreSQL >= 9.1，您还可以借助**pg_trgm**
模块 创建索引。这也将使您能够仅使用一个索引进行其他文本搜索，并且在您需要这些索引时可能会更有用。

 **```
CREATE INDEX index_name ON table USING gist (column gist_trgm_ops); 
```

然后你可以像这样搜索你的行：

```
SELECT * FROM table WHERE column LIKE '%<%'; 
```

有关更多信息，请查看官方文档中的[pg_trgm](http://www.postgresql.org/docs/9.1/static/pgtrgm.html)。*****

# iphone - Xcode 本地化更新

> ID：13869913
> 
> 赞同：7
> 
> 时间：2012-12-13T22:50:02.157
> 
> 标签：iphone, objective-c, ios, xcode, localization

因此，我使用 Use Base Internationalization 在 Xcode 中本地化了一个故事板。

我进去翻译了字符串文件中的所有字符串。耶。那花了很长时间。

现在我在故事板的基础文件中添加了一个新元素。它里面有一个标签，里面有一个我需要国际化的字符串。我保存了它，构建了它，等等。但是在我漂亮的字符串文件中找不到这个新元素。

请不要告诉我我现在必须手动添加我的所有元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-19T16:18:18.253

在 IB 的检查器中手动查找对象 ID（在类部分下）。自己手动编写这些新元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-06T16:19:13.547

我这样解决了这个问题。

1.  一一取消选中本地化实用程序面板的复选框。

2.  Xcode 会问，你想删除 Main.storyboard 的英文（语言）本地化吗？

3.  对话框中有另一个复选框，不要选中它

4.  单击删除。

5.  再次选择您的故事板，并重新检查每种语言

6.  Xcode 会说文件已经存在

7.  选择替换文件

8.  Xcode 会自动从您更新的 UI 中重新生成字符串文件并替换您的文件。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T00:29:43.990

我发现在单独的电子表格中跟踪所有字符串更容易，然后从那里自动为每种语言生成 .strings 文件。

您仍然需要在 2 个位置（在 xcode 和电子表格中）跟踪翻译键，但至少每次要添加一些字符串时，您不必编辑或合并所有 Localizable.strings 文件。

在此处查看带有 VBA 宏的示例 Excel 电子表格：http: [//members.home.nl/bas.de.reuver/files/multilanguage.zip](http://members.home.nl/bas.de.reuver/files/multilanguage.zip)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-10T17:09:47.947

在等待 Xcode 6 和他的新[本地化功能](https://developer.apple.com/library/prerelease/ios/documentation/MacOSX/Conceptual/BPInternational/LocalizingYourApp/LocalizingYourApp.html)（我希望能解决这个 l10n 更新的痛点）的同时，我们理论上可以自动化这些步骤（从未尝试过）

*   生成新的字符串[`find`/`xargs genstrings`和`ibtool`](https://developer.apple.com/library/prerelease/ios/documentation/MacOSX/Conceptual/BPInternational/MaintaingYourOwnStringsFiles/MaintaingYourOwnStringsFiles.html)
*   [diff](http://unixhelp.ed.ac.uk/CGI/man-cgi?diff) ,[修补](http://unixhelp.ed.ac.uk/CGI/man-cgi?patch)每个文件的两个版本
*   删除不需要的文件

这个[要点脚本](https://gist.github.com/ole/5007019)（不容易发音：）似乎也很有用（再次尚未测试）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T23:25:26.023

[Xcode 发行说明](https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/_index.html)说：

> 要将字符串文件与用户界面文档中的新内容重新同步，请使用 ibtool 命令的 --generate-stings-file 选项来生成新的字符串文件。然后，手动将新文件合并到现有的本地化字符串中。

这很蹩脚，但你去吧。您可以使用 FileMerge 之类的工具来帮助您解决差异。（我们有一组脚本可以读取字符串文件并以这种方式合并它们；编写这样的东西并不难。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-03T16:02:31.763

我找到了另一种蹩脚的解决方案，但它比 Xcode 发行说明中的​​解决方案更蹩脚；勾选本地化语言关闭，从磁盘中删除文件，然后再次勾选。这将重新创建`.strings`文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-06T09:25:07.000

您也可以考虑将翻译保存在一个干净的 XML 文件中，并让这个 Maven 插件在每次构建期间生成您的字符串文件：[https ://github.com/hoereth/i18n-maven-plugin](https://github.com/hoereth/i18n-maven-plugin)

# jquery - 如何使用一个 jQuery 函数更改两个独立元素内的文本？

> ID：13869918
> 
> 赞同：1
> 
> 时间：2012-12-13T22:50:31.547
> 
> 标签：jquery, html, web-applications, jquery-selectors, functional-programming

我正在为带有缩略图的图片库编写一个 jQuery 函数。网页顶部有一个 div，它将显示点击缩略图的放大版本以及标题和描述。

单击缩略图时，标题会按我的预期更改，但描述仍然是默认值（由 HTML 定义）。

缩略图位于无序列表中，如下所示：

```
<ul class=thumblist id=thumblist>
<li><a title="thumb1" description="this is the first pic"></a></li>
<li><a title="thumb2" description="this is the second pic"></a></li>
</ul> 
```

这是jQuery函数：

```
 $('.thumblist a').click(function() {
    $("#title").text(this.title);
    $("#description").text(this.description);         
  }); 
```

我可以做些什么来修复我的标记并实现我正在寻找的功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T22:52:48.597

你想要的[`attr`功能](http://api.jquery.com/attr)：

```
$('.thumblist a').click(function() {
  var $this = $(this);
  $("#title").text($this.attr("title")); // Or `this.title`, see below
  $("#description").text($this.attr("description"));         
}); 
```

它工作一半的原因是它`title`是一个有效的 HTML 属性，它在 DOM 元素实例上具有[反射属性](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-18446827)，所以`this.title`给了你那个属性；但`description`不是，所以没有反射`description`属性。使用`attr`go 并查找实际的属性值。

理想情况下，将[`data-*`属性](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)`description`用于未由任何标准定义的临时属性（如您的）。

# javascript - 使用javascript从外部文件写入HTML标签

> ID：13869931
> 
> 赞同：0
> 
> 时间：2012-12-13T22:51:25.080
> 
> 标签：javascript, html

我是 HTML、CSS 和 Javascript 的新手。我有一组 HTML 链接，每个链接代表一封电子邮件。单击链接后，我希望电子邮件显示在 div 中（在

标签）。电子邮件的内容位于单独的文本文件中。我有大约 40 个链接。例如，一个链接是：

```
 <a class="emailrefs" href="#" onclick="emailDisplay('164611092012')">11 September 2012 16:46</a> 
```

我的 Javascript 是：

```
 <script>
    function emailDisplay(date)
    {
        if (date==164611092012)
            {
                document.getElementById("content").innerHTML="This worked";
            } 
    }
    </script> 
```

在 if 循环中，我想要从外部文本文件读取的代码，并写入

在我的页面上的 div 中标记。

我希望这一切都有意义。正如我所说，我是全新的，一周前开始学习并且非常努力地学习！

谢谢！

中产阶级人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:07:04.230

您可能想研究 jQuery 以进行文件操作和读取，因为 JavaScript 除了 XML 之外并没有真正做很多文件处理： $(".content").load("file.html");

# visual-studio - Sublime Text 2 是否具有类似于 Visual Studio 的区域代码的能力？

> ID：13869932
> 
> 赞同：27
> 
> 时间：2012-12-13T22:51:26.637
> 
> 标签：visual-studio, sublimetext2, minimize, region, folding

在 Visual Studio 中，您可以使用区域最小化大量代码；它们基本上只是围绕代码并将其最小化在窗口中。

Sublime 有类似的功能吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-14T02:11:12.340

默认情况下，您可以选择一些代码转到`Edit > Code Folding > Fold.`有大量的插件利用代码折叠 api 获得更多选项。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-13T23:07:11.343

官方网站上有一个“请求功能”的[请求](http://sublimetext.userecho.com/topic/19281-syntax-code-folding/)。

但显然：

> 仅供参考，Jon 表示这在编辑器控件的当前实现中是不可能的。看来我们要等到 V3 了。

Jon 是 Sublime Text 2 背后的程序员。

可能有一种方法可以通过创建一个查找标记并删除标记之间的代码区域的插件来伪造它，但它可能看起来不太好。使用当前的 API，这可能是您最好的选择！

顺便说一句，Sublime Text 中有**一些**代码折叠，如果你将鼠标悬停在行号旁边，当你可以折叠/展开时，你会看到一些箭头出现。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-08T16:08:39.520

我最终使用了自定义注释标签，缩进比我想要折叠的代码少一级。**它看起来不是最好的，尽管它达到了它的目的**。

```
class Foobar {
    // ...some code

// <fold
    function foo() {
    }
    function bar() {
    }
// </fold

    // more code...
} 
```

这（目前）折叠为：

```
class Foobar {
    // ...some code

// <fold[...]
// </fold

    // more code...
} 
```

对此有本机 ST2 支持会很好。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-07-13T15:20:05.403

[这](https://github.com/jamalsenouci/sublimetext-syntaxfold)看起来是您正在寻找的东西。您可以为每种语言定义#region 和#endregion 标签，或为所有语言定义通用标签。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-10-22T09:10:42.220

如果你痴迷于意图，这个解决方案可能会让你感到不舒服，但在这里，曾几何时，我一直在编写一个半复杂的 jQuery 插件，我有常量、变量、私有和公共函数部分以及像这样的折叠;

```
;(function($, undefined, window) {...

/* Consts */

    var FOO = "BAR";

/* Variables */

    var m_Foo = "bar";

/* Functions */

    /* Public Functions */

        function foo() {...}

        function bar() {...}

    /* Private Functions */

        function _foo() {...}

        function _bar() {...}

})(jQuery, window); 
```

正如你所看到的，这一切都与意图有关。部分可以折叠；`Consts`, `Variables`, `Functions`. 还有里面的`Functions`部分，`Public Functions`而且`Private Functions`都是可以折叠的。

您还可以使用一行注释 (//) 来命名您的折叠。所以下面的想法很简单；ST2 认为更多意图的行属于它们上方的第一个意图较少的注释，例如 C/C++ 编译器如何将括号作为自己的唯一代码块处理。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-02T05:11:49.943

要**折叠**代码，请选择代码并按

`ctrl`+ `shift`+`[`

要**展开**代码，请将光标放在那里并按

`ctrl`+ `shift`+`]`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-04T18:01:28.047

我认为和我一样，OP 已经开始欣赏 VS 中一个鲜为人知的功能，称为**[区域](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2012/b6xkz944(v=vs.110))**，许多等同于代码折叠，但功能更强大及更高，Dio Phung 提供了我想要的答案，我怀疑OP想要，但他没有分享作为答案，所以就在这里。

Sublime Text 中提供的“代码折叠”之间的区别在于，它基于代码/编译器语法，而“区域”和这个插件的作用，允许你无限更多的自由，尽管它或多或少取决于您开始使用的代码（深度嵌套或适当模块化）。

> 如果你使用的是 Sublime Text 3，这里有一个插件可以做到： [github.com/jamalsenouci/sublimetext-syntaxfold](https://github.com/jamalsenouci/sublimetext-syntaxfold) – Dio Phung

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-07-05T07:35:49.543

在支持 3 种评论类型的语言（例如 PHP）中，我使用区域标签评论，如其他答案所示。这也有助于跟踪正在做的事情

```
# default options
    $a = 3;
    $b = 'bob';

$old_code = 1;

# bugfix #130
    $result = magic_function($data);
    fix_stuff($result);

$old_code = $result; 
```

否则使用三斜杠`///`等`//#`。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2017-12-15T15:51:14.647

在崇高的文本中，它的工作原理是这样的，它遮住要折叠的线条并按下（Control + Shift +？）

我有最新版本的 sublimetext。

# c++ - Boost::thread 互斥问题：尝试锁定，访问冲突

> ID：13869941
> 
> 赞同：3
> 
> 时间：2012-12-13T22:51:57.670
> 
> 标签：c++, access-violation, boost-thread, boost-mutex

我目前正在学习如何使用 c++ 进行多线程，为此我使用 boost::thread。我将它用于一个简单的游戏引擎，运行三个线程。

其中两个线程正在读取和写入相同的变量，这些变量存储在我称为 PrimitiveObjects 的东西中，基本上是球、盘子、盒子等。

但我不能真正让它工作，我认为问题是两个线程试图同时访问相同的内存位置，我试图使用互斥锁来避免这种情况，但现在我没有运气，这行得通有时，但如果我发送垃圾邮件，我最终会遇到这个例外：

```
First-chance exception at 0x00cbfef9 in TTTTT.exe: 0xC0000005: Access violation reading location 0xdddddded.
Unhandled exception at 0x77d315de in TTTTT.exe: 0xC0000005: Access violation reading location 0xdddddded. 
```

这些是我为此使用的对象内部的函数，调试器也将异常归咎于它们。

```
int PrimitiveObj::setPos(glm::vec3 in){
 boost::try_mutex::scoped_try_lock lock(myMutex);
  if ( lock)
  {
    position = in;
    return 1;
  }
  return 0;
}

glm::vec3 PrimitiveObj::getPos(){
 boost::try_mutex::scoped_try_lock lock(myMutex);
  if ( lock)
  {
   glm::vec3 curPos = position;
    return curPos;       
  }
  return glm::vec3(0,0,0);
} 
```

这是我用来生成每个原始对象的函数。（更新）

```
void generatePrimitive(){
PrimitiveObj *obj = new PrimitiveObj();
 obj->generate();
obj->setPos(getPlayerPos()+getEye()*4.0f);
prims.push_back(std::shared_ptr<PrimitiveObj>(obj));
} 
```

![打印屏幕](../Images/ab6eef8d5f5edd3cbc44caa1152d54b5.png)

有任何想法吗？编辑：新函数（2），myMutex 现在是对象私有的。添加了我用来生成原始对象的函数。

![错误](../Images/7d0fa387285d420a09d7df30b300c1ce.png)

编辑：

这是堆栈指向的代码，它在物理线程中运行：

```
nr = getNumberOfPrimitives();

        double currentTime = glfwGetTime();
float deltaTime = float(currentTime - lastTime);
for(int r = 0; r < nr; r++) {

     prop = getPrimitive(r);
    glm::vec3 pos = prop->getPos()+glm::vec3(0,1.0f*Meter/deltaTime,0);

    prop->setPos(pos);

} 
```

其他相关代码：

```
int getNumberOfPrimitives(){
return prims.size();
}

PrimitiveObj * getPrimitive(int input) {
return prims[input];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:01:19.737

第一个想法是`PrimitiveObj`你正在调用的你是未初始化的，如下所示：

```
PrimitiveObj* myObject;
myObject->getPos(); 
```

您遇到的异常很可能是您访问了一个未初始化的指针变量（设置为 0xdddddddd 以便开发人员将其识别为未初始化）并访问其上偏移 0x10（=16）字节的成员。

如果您在从不同线程同时读取和写入同一对象时访问诸如 std:vector 之类的对象，也可能发生访问异常，但该位置通常是一个看起来更随机的数字，以零开头并且可以被 4 整除（例如 0x004da358)。

为什么会这样？调试代码通常使用一些可识别的随机数（0xdddddddd、0xbaadfood、0xfefefefe 等）初始化内存。它们是随机的，因为如果变量总是相同的，例如总是初始化为 0，这可能会导致开发人员错过一些变量未初始化并且代码将在发布时停止工作的事实。它们很容易识别，因此我们一眼就能看出该数字来自未初始化的内存。

以前有效的指针指向堆地址空间，它通常从一个较低的数字开始并向上计数。如果在堆上分配了多个对象，在正常操作中，每个对象都是对齐的，在可被 4、8、16 等除的内存地址上。对象的成员也在 4 字节边界上对齐，这就是导致访问冲突的原因通过访问以前有效的内存通常位于以零开头且可被 4 整除的地址上。

请记住，这些是经验法则，可以而且应该用来为您指明正确的方向，但它们并不是硬性规定。此外，它们指的是调试环境。发布环境有非常不同的规则来猜测哪个访问冲突是由什么引起的。

# asp.net - 了解 ASP.NET MVC 防伪保护

> ID：13869942
> 
> 赞同：3
> 
> 时间：2012-12-13T22:52:16.477
> 
> 标签：asp.net, .net, asp.net-mvc-3, security

在我所有表单的基本 MVC 项目中，我见证了特定用户会话的*所有*`@Html.AntiForgeryToken()`表单的令牌（cookie）值始终相同。这是为什么？我部分理解这一点（否则会有很多问题，例如后退按钮）。但是为什么不使用“salt”使其不同的形式有所不同：

 *> “此方法已弃用。请改用 AntiForgeryToken() 方法。要指定要嵌入到令牌中的自定义数据，请使用静态 AntiForgeryConfig.AdditionalDataProvider 属性。”

为什么它这么大（在我的示例中为 207 个字节，用户身份名称为 7 个字符）？标准会话 id 短得多 (41)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T23:12:46.250

它只需要对用户会话唯一的原因是由于针对 CSRF 漏洞的利用如何工作；

本质上，CSRF 依赖于恶意用户提前设置的表单值。恶意用户只能设置表单值，通常作为 GET 参数；他们无法获取/读取合法表单上可能存在的值，并且他们无法可靠地猜测任何用户的 207 长度代码。

一个例外是如果存在 XSS 漏洞，恶意用户可以通过某种方式获取此“实时”信息。但是由于存在 XSS 漏洞，无论如何都没有必要使用 CSRF。

因此，只要每个用户会话都有其独特的价值，恶意用户实际上就不可能提前制作适当的表单提交。*

# animation - TabSet SmartGwt 的动画

> ID：13869943
> 
> 赞同：0
> 
> 时间：2012-12-13T22:52:18.043
> 
> 标签：animation, tabs, smartgwt

我正在尝试在 SmartGwt 选项卡的 TabSet 中添加动画，以获得[类似于](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwTabLayoutPanel)GWT 方法的效果：tabPanel.setAnimationDuration(1000);

但它什么也没做，这是代码：

```
 final TabSet topTabSet = new TabSet();
    topTabSet.setAnimateMoveTime(1000);
    topTabSet.setTabBarPosition(Side.TOP);
    topTabSet.setWidth(400);
    topTabSet.setHeight(200);

    Tab tTab1 = new Tab("Blue", "pieces/16/pawn_blue.png");
    Img tImg1 = new Img("pieces/48/pawn_blue.png", 48, 48);
    tTab1.setPane(tImg1);

    Tab tTab2 = new Tab("Green", "pieces/16/pawn_green.png");
    Img tImg2 = new Img("pieces/48/pawn_green.png", 48, 48);
    tTab2.setPane(tImg2); 
```

TabSet 上没有任何动画效果。

我希望你能帮助我使它工作。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:52:52.317

据我了解，它`setAnimateMove`是继承自的，`Canvas`因此它将用于动画整个标签集从一个地方到另一个地方的位置变化。在 Gwt TabLayoutPanel fromversion 2.3 的情况下，该方法`setAnimationDuration`不是继承自`ResizeComposite`，它设置选项卡之间动画转换的持续时间。因此，您可能必须使用选择事件为选项卡的内容设置动画。

# c# - NHibernate 具有级联删除的多集合失败

> ID：13869948
> 
> 赞同：8
> 
> 时间：2012-12-13T22:52:45.970
> 
> 标签：c#, nhibernate, orm, fluent-nhibernate, nhibernate-cascade

目标：
创建一个父子关系，这样对父子列表的修改将传播到所有子节点，并让 NHibernate 完成繁重的工作。父子关系将`Has-Many`在自引用表上。

问题：
删除父（根）对象的任何尝试都会导致异常，而不是删除子对象的预期行为。

我正在使用的东西的版本：
Microsoft SQL Server Management Studio 版本 10.0.4064.0
FluentNHibernate 版本 1.3
NHibernate 版本 3.2.0.4

下面是我用来复制此行为的一组当前类对象和表结构。

* * *

```
// Entity
class Task
{
    ID { get; set; }    
    public virtual IList<Task> Children { get; set; }
    public virtual byte[] Version { get; protected set; }
    public virtual bool IsNew() { return ID <= 0; }

    public Task()
    {
        this.Children = new System.Collections.Generic.List<Task>();
    }
    // Other properties excluded for brevity
} 
```

* * *

```
// Map
class TaskMap : ClassMap<Task>
{
    TaskMap()
    {
        Table("Task");

        Id(x => x.ID, "ID")
            .GeneratedBy.HiLo(
                "NH_HiLo", "NextHigh", "100",
                string.Format("TableName =     '{0}'", "Task"));

        HasMany<Task>(x => x.Children) 
            .KeyColumn("ParentTaskID")
            .Cascade.AllDeleteOrphan();

        // Other properties omitted for brevity

         Version(x => x.Version)
            .Not.Nullable()
            .Generated.Always()
            .Column("Version")
            .CustomSqlType("timestamp");
    }
} 
```

* * *

```
// Repository Delete Method:
public virtual void Delete(Task value)
{
    // CurrentSession is an ISession object that is currently open
    using (var transaction = CurrentSession.BeginTransaction())
    {
        try
        {
            CurrentSession.Delete(value);
            transaction.Commit();
        }
        catch (Exception)
        {
            transaction.Rollback();
            throw;
        }
    }
} 
```

* * *

```
// Test Case using NUnit.Framework and FluentNHibernate.Testing:
[TestFixtureSetUp]
public void SetUpFixture()
{
    _repository = new Repository();
}

[Test]
public void MappingTest()
{
    var task = new Task(); // Omitted assigning other properties for brevity

    var entity = new Task(); // Omitted assigning other properties for brevity
    entity.Children.Add(task);

    _entity = new PersistenceSpecification<Task>(_repository.CurrentSession)
        .VerifyTheMappings(entity);
}                       

[TearDown]
public void TearDown()
{
    if (_entity != null && !_entity.IsNew())
    {
        _repository.Delete(_entity);
        _entity = null;
    }
} 
```

* * *

```
--Table Script:
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Task](
    [ID] [bigint] NOT NULL,
    [ParentTaskID] [bigint] NULL, -- Notice it DOES HAVE a NULLable FK     reference.
    [Version] [timestamp] NOT NULL,
    CONSTRAINT [PK_MyTable] PRIMARY KEY CLUSTERED(
        [ID] ASC
    ) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF,
        IGNORE_DUP_KEY = OFF,     ALLOW_ROW_LOCKS  = ON,
        ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER TABLE [dbo].[Task]  WITH CHECK ADD  CONSTRAINT [FK_TasksChild_TasksParent]
    FOREIGN KEY([ParentTaskID])
    REFERENCES [dbo].[Task] ([ID]) -- Notice the self table reference for child objects
GO
ALTER TABLE [dbo].[Task] CHECK CONSTRAINT [FK_TasksChild_TasksParent]
GO 
```

* * *

使用上面的表和类，将级联更改为这些选项并在测试的拆卸期间执行指定的，这些就是结果。

* * *

使用 Cascade.AllDeleteOrphan:
只需在父对象上调用 delete 我得到这个异常：

```
NHibernate.StaleObjectStateException was unhandled by user code
Message=Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [Task#1015859]
Source=NHibernate
EntityName=Entities.Task
StackTrace:
   at NHibernate.Persister.Entity.AbstractEntityPersister.Check(Int32 rows, Object id, Int32 tableNumber, IExpectation expectation, IDbCommand statement) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Persister\Entity\AbstractEntityPersister.cs:line 2178
   at NHibernate.Persister.Entity.AbstractEntityPersister.Delete(Object id, Object version, Int32 j, Object obj, SqlCommandInfo sql, ISessionImplementor session, Object[] loadedState) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Persister\Entity\AbstractEntityPersister.cs:line 2912
   at NHibernate.Persister.Entity.AbstractEntityPersister.Delete(Object id, Object version, Object obj, ISessionImplementor session) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Persister\Entity\AbstractEntityPersister.cs:line 3095
   at NHibernate.Action.EntityDeleteAction.Execute() in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Action\EntityDeleteAction.cs:line 70
   at NHibernate.Engine.ActionQueue.Execute(IExecutable executable) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\ActionQueue.cs:line 136
   at NHibernate.Engine.ActionQueue.ExecuteActions(IList list) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\ActionQueue.cs:line 126
   at NHibernate.Engine.ActionQueue.ExecuteActions() in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\ActionQueue.cs:line 174
   at NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\AbstractFlushingEventListener.cs:line 249
   at NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\DefaultFlushEventListener.cs:line 19
   at NHibernate.Impl.SessionImpl.Flush() in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Impl\SessionImpl.cs:line 1489
   at NHibernate.Transaction.AdoTransaction.Commit() in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Transaction\AdoTransaction.cs:line 190
   at Repositories.Repository.Delete(Task value) in ..\Repositories\Repository.cs:line 22
   at TaskTest.TearDown() in ..\Tests\TaskTest.cs:line 76 
```

* * *

在遍历每个孩子之后，递归地挖掘这些孩子的孩子并尝试从下往上删除每个孩子：

```
NHibernate.ObjectDeletedException was unhandled by user code
Message=deleted object would be re-saved by cascade (remove deleted object from associations)[Task#1016061]
Source=NHibernate
EntityName=Entities.Task
StackTrace:
   at NHibernate.Impl.SessionImpl.ForceFlush(EntityEntry entityEntry) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Impl\SessionImpl.cs:line 914
   at NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.EntityIsTransient(SaveOrUpdateEvent event) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\DefaultSaveOrUpdateEventListener.cs:line 140
   at NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.PerformSaveOrUpdate(SaveOrUpdateEvent event) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\DefaultSaveOrUpdateEventListener.cs:line 76
   at NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.OnSaveOrUpdate(SaveOrUpdateEvent event) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\DefaultSaveOrUpdateEventListener.cs:line 53
   at NHibernate.Impl.SessionImpl.FireSaveOrUpdate(SaveOrUpdateEvent event) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Impl\SessionImpl.cs:line 2662
   at NHibernate.Impl.SessionImpl.SaveOrUpdate(String entityName, Object obj) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Impl\SessionImpl.cs:line 549
   at NHibernate.Engine.CascadingAction.SaveUpdateCascadingAction.Cascade(IEventSource session, Object child, String entityName, Object anything, Boolean isCascadeDeleteEnabled) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\CascadingAction.cs:line 249
   at NHibernate.Engine.Cascade.CascadeToOne(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\Cascade.cs:line 216
   at NHibernate.Engine.Cascade.CascadeAssociation(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\Cascade.cs:line 181
   at NHibernate.Engine.Cascade.CascadeProperty(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\Cascade.cs:line 148
   at NHibernate.Engine.Cascade.CascadeCollectionElements(Object parent, Object child, CollectionType collectionType, CascadeStyle style, IType elemType, Object anything, Boolean isCascadeDeleteEnabled) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\Cascade.cs:line 240
   at NHibernate.Engine.Cascade.CascadeCollection(Object parent, Object child, CascadeStyle style, Object anything, CollectionType type) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\Cascade.cs:line 201
   at NHibernate.Engine.Cascade.CascadeAssociation(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\Cascade.cs:line 185
   at NHibernate.Engine.Cascade.CascadeProperty(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\Cascade.cs:line 148
   at NHibernate.Engine.Cascade.CascadeOn(IEntityPersister persister, Object parent, Object     anything) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\Cascade.cs:line 126
   at NHibernate.Event.Default.AbstractFlushingEventListener.CascadeOnFlush(IEventSource session, IEntityPersister persister, Object key, Object anything) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\AbstractFlushingEventListener.cs:line 207
   at NHibernate.Event.Default.AbstractFlushingEventListener.PrepareEntityFlushes(IEventSource session) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\AbstractFlushingEventListener.cs:line 197
   at NHibernate.Event.Default.AbstractFlushingEventListener.FlushEverythingToExecutions(FlushEvent event) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\AbstractFlushingEventListener.cs:line 48
   at NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\DefaultFlushEventListener.cs:line 18
   at NHibernate.Impl.SessionImpl.Flush() in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Impl\SessionImpl.cs:line 1489
   at NHibernate.Transaction.AdoTransaction.Commit() in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Transaction\AdoTransaction.cs:line 190
   at Repositories.Repository.Delete(Task value) in ..\Repositories\Repository.cs:line 22
   at Repositories.Repository.Delete(Task value) in ..\Repositories\Repository.cs:line 25
   at Repositories.Repository.Delete(Task value) in ..\Repositories\Repository.cs:line 25
   at Tests.TaskTest.TearDown() in ..\Tests\TaskTest.cs:line 76 
```

* * *

在遍历孩子之后，清除他们的每组孩子，然后保存/删除父母我得到这个异常：

```
NHibernate.StaleObjectStateException was unhandled by user code
Message=Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [Task#1015960]
Source=NHibernate
EntityName=Entities.Task
StackTrace:
   at NHibernate.Persister.Entity.AbstractEntityPersister.Check(Int32 rows, Object id, Int32 tableNumber, IExpectation expectation, IDbCommand statement) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Persister\Entity\AbstractEntityPersister.cs:line 2178
   at NHibernate.Persister.Entity.AbstractEntityPersister.Delete(Object id, Object version, Int32 j, Object obj, SqlCommandInfo sql, ISessionImplementor session, Object[] loadedState) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Persister\Entity\AbstractEntityPersister.cs:line 2912
   at NHibernate.Persister.Entity.AbstractEntityPersister.Delete(Object id, Object version, Object obj, ISessionImplementor session) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Persister\Entity\AbstractEntityPersister.cs:line 3095
   at NHibernate.Action.EntityDeleteAction.Execute() in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Action\EntityDeleteAction.cs:line 70
   at NHibernate.Engine.ActionQueue.Execute(IExecutable executable) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\ActionQueue.cs:line 136
   at NHibernate.Engine.ActionQueue.ExecuteActions(IList list) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\ActionQueue.cs:line 126
   at NHibernate.Engine.ActionQueue.ExecuteActions() in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Engine\ActionQueue.cs:line 174
   at NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\AbstractFlushingEventListener.cs:line 249
   at NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event) in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Event\Default\DefaultFlushEventListener.cs:line 19
   at NHibernate.Impl.SessionImpl.Flush() in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Impl\SessionImpl.cs:line 1489
   at NHibernate.Transaction.AdoTransaction.Commit() in d:\CSharp\NH\NH\nhibernate\src\NHibernate\Transaction\AdoTransaction.cs:line 190
   at Repositories.Repository.Delete(Task value) in ..\Repositories\Repository.cs:line 22
   at TaskTest.TearDown() in ..\Tests\TaskTest.cs:line 76 
```

* * *

使用 Cascade.All，只需在父对象上调用 delete，我就会得到这个异常：
与 Cascade.AllDeleteOrphan 相同

在遍历每个孩子之后，递归地挖掘这些孩子的孩子并尝试自下而上删除每个孩子：
与 Cascade.AllDeleteOrphan 相同

遍历孩子，清除他们的每组孩子，然后保存/删除父我得到这个异常：
没有例外：父母被正确删除但现在我有我不想要的孤立对象！

* * *

我浏览了许多博客/stackoverflow 问题/资源文档，但还没有真正看到这个问题的解决方案。
以下是我已经挖掘的一些链接：

*   [如何使用 FluentNHibernate 删除引用的对象（旧的“删除的对象将被级联重新保存”）](https://stackoverflow.com/questions/7586501/how-to-delete-a-referenced-object-using-fluentnhibernate-ye-olde-deleted-objec)
*   [级联错误：删除的对象将被级联重新保存](https://stackoverflow.com/questions/7954593/error-in-cascade-deleted-object-would-be-re-saved-by-cascade)
*   [使用自动映射器使用级联删除设置 Fluent NHibernate 一对多](https://stackoverflow.com/questions/7893334/setting-up-fluent-nhibernate-one-to-many-with-cascading-deletes-using-the-automa)
*   [键多对一和键属性关联：nhibernate 不会从集合中删除项目](https://stackoverflow.com/questions/1541660/key-many-to-one-and-key-property-association-nhibernate-wont-delete-items-from)
*   [https://nhibernate.jira.com/browse/NH-1050](https://nhibernate.jira.com/browse/NH-1050)
    （注意我有空 FK）
*   [行被另一个事务更新或删除（或未保存的值映射不正确）](https://stackoverflow.com/questions/8645694/row-was-updated-or-deleted-by-another-transaction-or-unsaved-value-mapping-was)
    （注意我使用时间戳乐观版本控制）
*   [https://forum.hibernate.org/viewtopic.php?t=933496（ernst_pluess](https://forum.hibernate.org/viewtopic.php?t=933496)
    关于 cascade=all 的评论引发了关于使用 HiLo 的警告标志，但是 HiLo 是生成还是分配？因为从技术上讲，NHibernate 生成它然后分配它.. .)
*   [在 NHibernate 中删除子记录的异常](https://stackoverflow.com/questions/2382550/exception-deleting-child-records-in-nhibernate)
    （看起来我必须手动删除所有子对象，这消除了级联的目的！！）

* * *

许多帖子都提到了反转关系，但设置 .inverse 并让孩子拥有这种关系完全不是这里的目标！

我不知道我错过了什么，但希望这是我忽略的非常容易解决的问题。任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T06:04:37.110

你**没有**错过任何东西。它是您的映射的组合：a）子级没有映射的父级，b）子级已版本化，c）集合未设置为反向（因为它不能由没有映射父级的子级管理）d）最后，大多数可能是由于一个错误。

发生的情况是，使用版本控制，任何 INSERT 或 UPDATE 语句后跟 SELECT... 以获取`timestamp`DB 服务器生成的最新信息。但这在一种情况下不会发生：

1.  集合父级已插入
2.  *从数据库中选择的父版本*
3.  插入的孩子
4.  *从数据库中选择的子版本*
5.  子更新（无反转）以引用父
    *   *-- 无 - 未选择子版本...*

因为关系更新后的子版本不同，所以刚刚在 DB 中增加的版本......稍后会抛出 StaleException。

您能做的最好的事情是将映射扩展为有一个 Parent... 并使其反转

# php - 在 PHP 创建的 iCalendar 文件中共享 Google 日历的设置

> ID：13869953
> 
> 赞同：1
> 
> 时间：2012-12-13T22:52:53.223
> 
> 标签：php, google-calendar-api, icalendar

我有一个 PHP 脚本，它制作了一个包含事件的 VCALENDAR 文件。一切都很好，Google 日历会从 URL 读取它，或者如果我手动插入它。

问题是，只有我能看到。我希望每个人都可以查看日历。如何通过编辑 VCALENDAR 文件来实现这一点？因此，将议程选项（任何人都可以）设置为查看所有活动详细信息。现在它被设置为（当其他人添加它时）任何人都可以：什么都不看。

提前致谢！

巴斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:19:15.647

你是否包含了一个类组件？

```
CLASS:PUBLIC 
```

维基百科有更多关于[iCalendar 格式](http://en.wikipedia.org/wiki/ICalendar#Events_.28VEVENT.29)的信息。

# antlr - 跳过匹配的词法元素或标记的部分

> ID：13869958
> 
> 赞同：2
> 
> 时间：2012-12-13T22:53:32.233
> 
> 标签：antlr, antlr3

我想匹配一个“{NUM}”，然后让词法分析器规则返回“NUM”。所以，我试过了

```
NUM : ('{' { skip(); })  'NUM'  ('}' { skip(); }); 
```

但是，这似乎跳过了所有内容并在比赛中返回空。是否可以跳过词法分析器匹配的部分内容？

蚂蚁3.4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T23:03:39.973

在规则中的任何地方调用`skip()`都会从词法分析器中删除整个标记，而不仅仅是某些字符。

你可以做的是：

```
NUM
 : '{NUM}' {setText("NUM");}
 ; 
```

或者，如果`NUM`是可变的，请执行以下操作：

```
NUM
 : '{' 'A'..'Z'+ '}' {setText($text.substring(1, $text.length() - 1));}
 ; 
```

从令牌中删除第一个和最后一个字符。

## 编辑

> *smartnut007 写道：*
> 
> *是否有等效的方法来为 Tokens 执行此操作？*

如果您的意思是如何更改解析器规则中的标记文本，请尝试以下操作：

```
parser_rule
 : LEXER_RULE {$LEXER_RULE.setText("new-text");}
 ;

LEXER_RULE 
 : 'old-text'
 ; 
```

# sql - SQLServer 子查询单元作为列

> ID：13869959
> 
> 赞同：3
> 
> 时间：2012-12-13T22:53:46.677
> 
> 标签：sql, sql-server

我正在尝试将子查询作为具有条件的列。

我从 SQL Server 得到的错误是：

**子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。**

我正在选择更多列，但这是给 ma 一个错误的主要查询：

```
SELECT ItemNo, Channel, Brand, TotalUnits,
       (SELECT TotalUnits FROM Table1 WHERE Locked = 1) As LockedUnits
FROM Table1 
```

*编辑：锁定是 0 或 1 值*

理想情况下，查询会返回这个（LockedUnits 始终是 TotalUnits 的子集）：

```
ItemNO   Channel   Brand    TotalUnits    LockedUnits
1        5         Adidas   100           80
2        7         Nike     500           360 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T23:07:23.277

看起来您要做的只是`TotalUnits`获取`Locked = 1`. 如果是这种情况，你最好使用`case`：

```
SELECT ItemNo, Channel, Brand, TotalUnits,
       case when Locked = 1 then TotalUnits else null end As LockedUnits
FROM Table1 
```

您可以使用子选择来执行此操作，但您需要将子选择连接到主查询。假设`ItemNo`是唯一的，它看起来像这样：

```
SELECT ItemNo, Channel, Brand, TotalUnits,
       (SELECT TotalUnits FROM Table1 t2 WHERE Locked = 1
        WHERE t1.itemno = t2.itemno) As LockedUnits
FROM Table1 t1 
```

当然，为了获得已经在你返回的行中的值，两次点击一个表是很愚蠢的。

* * *

评论响应：您更喜欢子选择的唯一情况是您从不同表或同一表中的不同行获取数据。而且，即便如此，我更喜欢将表放在 where 子句中，并正常将其加入主表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:56:59.927

尝试将 SELECT sum(TotalUnits) 放入子查询中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T22:59:24.293

您必须将子查询限制为单个结果，否则无法在结果集列中返回。您需要通过 SUM(TotalUnits)、SELECT TOP 1 或 SELECT DISTINCT 将结果缩小到单个记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T23:03:28.913

```
SELECT ItemNo, Channel, Brand, TotalUnits,
   (SELECT sum(TotalUnits) FROM Table1 WHERE Locked = 1) As LockedUnits
FROM Table1
group by ItemNo, Channel, Brand, TotalUnits 
```

# haskell - 为什么haskell解释器给我这个解析错误？

> ID：13869965
> 
> 赞同：1
> 
> 时间：2012-12-13T22:54:34.407
> 
> 标签：haskell, pattern-matching, parse-error

在 Richard Bird 的书“Introduction to Functional Programming Using Haskell”第二版中做练习。在以下代码的最后一行中，我收到错误：

> ```
> "Parse error in pattern (n `times` Succ m) 
> ```

请注意，在 的定义中接受了相同的模式（m 和 n 互换）`times`。为什么我会收到此错误？

```
 data Nat = Zero | Succ Nat
    deriving (Eq, Ord, Show)

    plus :: Nat -> Nat -> Nat
    m `plus` Zero = m
    m `plus` Succ n = Succ (m `plus` n)

    m `times` Zero = Zero
    m `times` Succ n = (m `times` n) `plus` m

    divide :: Nat -> Nat -> Nat
    Zero `divide` m = Zero
    (n `times` Succ m) `divide` n = Succ m 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T22:58:17.117

你得到一个解析错误

```
(n `times` Succ m) `divide` n = Succ m 
```

因为定义函数的参数必须是模式，即

*   通配符`_`
*   变量标识符`foo`
*   构造函数应用程序（一个值构造函数应用于其数量要求的多个模式）
*   带标签的模式`F{field1 = value1, ..., fieldN = valueN}`（如果构造函数`F`是使用命名字段语法定义的）
*   一个字面量`1`，`"foo"`
*   否定字面量`-1`
*   元组模式，`(1,2)`
*   列表模式`[1,2]`
*   带括号的模式`(pat)`，哪里`pat`是模式
*   一个惰性模式, ,模式`~pat`在哪里`pat`

而且这里的第一个参数不是模式，而是非构造函数的函数应用。

模式允许解构值，但普通函数应用程序不允许。对于您的问题，如果您有

```
12 `divide` 4 
```

- 调用函数时可用的只是值，而不是获取方式 - 您尝试的函数定义将要求编译器考虑该值以检查它是否可以以给定的形式编写。

该行中的另一个问题是您使用了`n`两次标识符，但任何变量标识符在模式匹配中只能出现一次。

> 请注意，相同的模式（与`m`和`n`互换）在 的定义中被接受`times`。

在定义中

```
m `times` Succ n = (m `times` n) `plus` m 
```

该函数`times`是为某些类型的参数定义的。整个左侧不是一个模式，我们有两个模式`m`- 一个匹配每个参数并将其绑定到名称的变量模式`m`- 和`Succ n`（包含嵌套变量模式`n`）。

定义的左侧由定义的名称 ( `times`) 和两个参数模式组成。

在 的定义中`divide`，需要相同的结构、要定义的名称以及参数的两种模式。

```
(n `times` Succ m) `divide` n = Succ m 
```

因此，当解析器遇到左括号时，它需要一个带括号的模式。但它发现

```
 n          `times`            Succ m
pattern infix-function-application pattern 
```

那的表达式树的顶部节点是`times`，它不是构造函数。因此，括号之间的部分不能被解析为模式。

# python - numpy.genfromtxt 与 datetime.strptime 转换器

> ID：13869966
> 
> 赞同：7
> 
> 时间：2012-12-13T22:54:36.823
> 
> 标签：python, numpy, ipython

[我有与此要点](https://gist.github.com/4280658)中看到的数据相似的数据，我正在尝试使用 numpy.xml 提取数据。我对python相当陌生，所以我尝试使用以下代码

```
import numpy as np
from datetime import datetime

convertfunc = lambda x: datetime.strptime(x, '%H:%M:%S:.%f')
col_headers = ["Mass", "Thermocouple", "T O2 Sensor",\
               "Igniter", "Lamps", "O2", "Time"]
data = np.genfromtxt(files[1], skip_header=22,\
                     names=col_headers,\
                     converters={"Time": convertfunc}) 
```

从要点中可以看出，有 22 行标题材料。在 Ipython 中，当我“运行”以下代码时，我收到一个以以下内容结尾的错误：

```
TypeError: float() argument must be a string or a number 
```

完整的 ipython 错误跟踪可以在[这里](https://gist.github.com/4280768)看到。

我可以使用像 usecols=range(0,6) 这样的 genfromtxt 参数很好地提取六列数字数据，但是当我尝试使用转换器尝试处理最后一列时，我感到很困惑。任何和所有的意见将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T03:23:22.710

发生这种情况是因为`np.genfromtxt`试图创建一个浮点数组，该数组失败是因为`convertfunc`返回了一个不能转换为浮点数的日期时间对象。最简单的解决方案是将参数传递`dtype='object'`给`np.genfromtxt`，确保创建对象数组并防止转换为浮点数。但是，这意味着其他列将保存为字符串。要将它们正确保存为浮点数，您需要指定`dtype`每个浮点数以获取[结构化数组](http://docs.scipy.org/doc/numpy/user/basics.rec.html)。在这里，我将它们全部设置为双精度，除了最后一列，这将是一个对象 dtype：

```
dd = [(a, 'd') for a in col_headers[:-1]] + [(col_headers[-1], 'object')]
data = np.genfromtxt(files[1], skip_header=22, dtype=dd, 
                     names=col_headers, converters={'Time': convertfunc}) 
```

这将为您提供一个结构化数组，您可以使用您提供的名称访问该数组：

```
In [74]: data['Mass']
Out[74]: array([ 0.262 ,  0.2618,  0.2616,  0.2614])
In [75]: data['Time']
Out[75]: array([1900-01-01 15:49:24.546000, 1900-01-01 15:49:25.171000,
                1900-01-01 15:49:25.405000, 1900-01-01 15:49:25.624000], 
                dtype=object) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T01:27:51.817

您可以使用熊猫 read_table：

```
 import pandas as pd
    frame=pd.read_table('/tmp/gist', header=None, skiprows=22,delimiter='\s+') 
```

为我工作。您需要单独处理标题，因为它们是可变数量的空间分隔。

# android - 白屏 webview 到 imageview

> ID：13869967
> 
> 赞同：0
> 
> 时间：2012-12-13T22:54:43.167
> 
> 标签：android

我的目标是在 imageView 中显示一些带有图像的 html。所以我创建了一个 webview，我在位图中转换了这个 webview，并用位图设置了这个 imageview，但是我有一个白屏。我检查了位图不为空。

你知道为什么我有一个白屏吗？也许有更好的方法来做到这一点..？

ImageViewActivity.java

```
public class ImageViewActivity extends Activity {

private WebView webView;
ImageView imageView;
 Bitmap bmp;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_image_view);

    webView = (WebView) findViewById(R.id.webView1);
    imageView = (ImageView) findViewById(R.id.imageView1);

    webView.getSettings().setJavaScriptEnabled(true);
    String customHtml = "<div style=\"background-image:url(pic_10.jpg);height:100%;background-repeat:no-repeat;\"><div style=\"position: absolute; bottom: 0; width: 100%\"> 
```

HBase 管理手册

www.amazon.com

";

```
 webView.loadDataWithBaseURL("file:///android_asset/", customHtml ,
     "text/html", "utf-8", null);

     webView.setWillNotCacheDrawing(false);
     webView.destroyDrawingCache();
     webView.setDrawingCacheEnabled(true);
     webView.measure(MeasureSpec.makeMeasureSpec(480,
     MeasureSpec.EXACTLY),
     MeasureSpec.makeMeasureSpec(800, MeasureSpec.EXACTLY));
     webView.layout(0, 0, webView.getMeasuredWidth(),
     webView.getMeasuredHeight());
     webView.buildDrawingCache(true);
     bmp = Bitmap.createBitmap(webView.getDrawingCache());
     webView.destroyDrawingCache();     
     imageView.setImageBitmap(bmp);

}

} 
```

activity_image_view.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />
 <WebView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:background="#ABABAB"
    android:visibility="gone"
/>
</LinearLayout> 
```

更新字符串 html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:56:53.053

我正在用我在这里给你的答案测试你的应用程序[刷新活动/ImageView？](https://stackoverflow.com/questions/13871026/refresh-activity-imageview?lq=1). 无黑屏（显示 Hbase 管理书）。您的清单文件中是否具有网络权限：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

再一次，您的自定义 Html 代码也搞砸了。您应该查看 html 字符串。
那就是你的问题所在。

# c# - 如何将 AutoFixture 自定义应用于从基类继承的任何内容？

> ID：13869968
> 
> 赞同：7
> 
> 时间：2012-12-13T22:54:46.807
> 
> 标签：c#, unit-testing, autofixture

为了干掉我的单元测试，我尝试使用 AutoFixture 作为 IoC 容器来实例化我的被测系统 (SUT)，在这种特殊情况下是 ASP.NET MVC `Controller`。因此，我想自定义 AutoFixture 以创建没有自动属性的控制器。

我尝试为 . 添加自定义`ControllerBase`，但它似乎不适用于`ControllerBase`.

```
fixture.Customize<ControllerBase>(c => c.OmitAutoProperties()); 
```

这是我希望能够编写的测试示例：

```
 [Theory, AutoFixtureData]
    public void ControllerTest(AccountController controller) {
        Assert.Equal(default(UrlHelper), controller.Url);
    } 
```

当然，如果我为项目中的每个特定控制器手动添加一个自定义项，它就会起作用，但谁愿意这样做呢？有没有更好的办法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T08:50:18.447

以下自定义通过了上述测试，并按照您的要求进行

```
public class MvcCostumization : ICustomization
{
    public void Customize(IFixture fixture)
    {
        fixture.Customizations.Add(
            new FilteringSpecimenBuilder(
                new MethodInvoker(new ModestConstructorQuery()),
                new ControllerSpecification()));
    }

    private class ControllerSpecification : IRequestSpecification
    {
        public bool IsSatisfiedBy(object request)
        {
            var t = request as Type;
            if (t == null)
                return false;

            return typeof(ControllerBase).IsAssignableFrom(t);
        }
    }
} 
```

但是，这会禁用*所有 MVC 控制器的所有*属性，包括`User`、`HttpContext`、`ModelState`、`Request`、`Response`等。您可能在单元测试中需要这些属性，所以您确定要这样做吗？

我将是第一个同意 MVC`Controller`基类是一个巨大的 SRP 违规的人，但它是一个给我们的类，所以我们无能为力，只能尽力利用它。

通常，您只需要稍微扭转一下 AutoFixture 即可自动填充大部分属性。

在 MVC 3 项目中，这与[AutoMoq 扩展](http://blog.ploeh.dk/2010/08/19/AutoFixtureAsAnAutomockingContainer.aspx)相结合，足以创建控制器实例：

```
fixture.Customize<ModelBindingContext>(c => c
    .Without(x => x.Model)
    .Without(x => x.ModelType));
fixture.Inject(CultureInfo.CurrentCulture); 
```

# jquery - JQuery 选择器：使用“包含：”选择具有特定类和“href”属性的元素

> ID：13869970
> 
> 赞同：1
> 
> 时间：2012-12-13T22:55:00.123
> 
> 标签：jquery, jquery-ui, contains

我需要修改以下代码（工作正常）：

```
if ($("#cartable-items .cart-trigger[href='AC^ATZ^A10^4200']")) {

alert('Found it!');

} 
```

要像这样使用“包含：”选择器：

```
if ($("#cartable-items .cart-trigger[href:contains('ATZ^A10')]")) {

alert('Found it!');

} 
```

这可能吗？

谢谢！

杰森

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:56:12.163

是的..使用 *= （属性包含单词选择器） - 您可以在此处阅读有关选择器的更多信息[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

```
$("#cartable-items .cart-trigger[href*='ATZ^A10']") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-13T20:30:27.003

这种方法也行得通。在这里，锚标签有一些带有`href`标签的类，也有`data-open`属性：

```
$('.topnav-utility-item-link[href*="/VFLogonFormHopUp"][data-open]') 
```

# c++ - 如何从 UI 线程类 Run() 函数在对话框编辑框中显示字符串

> ID：13869971
> 
> 赞同：0
> 
> 时间：2012-12-13T22:55:04.150
> 
> 标签：c++, visual-studio, ui-thread

我有一个基于对话框的应用程序。默认情况下，Visual Studio 创建了一个 App 和一个 Dlg 类。我在对话框中添加了按钮、编辑框等。当用户单击我的对话框上的 START 按钮时，它会运行 5 分钟的自动测试，并在编辑框中提供文本更新和进度。现在这很好用，我希望用户能够在自动测试运行时单击对话框中的其他按钮和复选框。为了做到这一点，我使用名为 CMyThread 的类向导创建了一个 UI 线程类。在 CMyThread 中，我将按下 START 按钮时执行的代码移至 CMyThread 中的 Run() 函数。我计划在单击 START 按钮时调用 CMyThread Run() 函数。在运行 5 分钟的自动化测试时，我仍然希望在对话框编辑框中获得进度和更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:25:18.987

它是通过让 MyThread 类发送要由对话框的消息循环处理的消息来完成的。

SO上还有其他类似的问题，有有用的答案。 [如何通知 CDialog 对象有关来自另一个线程的已完成任务？](https://stackoverflow.com/questions/5497674/how-to-inform-a-cdialog-object-about-a-finished-task-from-another-thread)

这是一篇带有示例代码的文章[http://forums.codeguru.com/showthread.php?312454-MFC-Thread-How-to-access-UI-elements-from-a-thread-in-MFC](http://forums.codeguru.com/showthread.php?312454-MFC-Thread-How-to-access-UI-elements-from-a-thread-in-MFC)

# javascript - Onclick/onchange 互相取消

> ID：13869973
> 
> 赞同：1
> 
> 时间：2012-12-13T22:55:09.233
> 
> 标签：javascript, forms, function, onclick, onchange

所以我有一个表单，它的一个字段调用一个 JavaScript 函数来对其他一些字段内容进行一些更改。

像这样：

```
<form>
   <select onchange="montarconselho(distrito,'concelho');" id="distrito">

    other selects here...

   <input onclick="return submitform()" type="submit"id="inserir"/>
<form 
```

现在我遇到的问题是，如果我离开该 onclick 函数调用，则 select 上的 onchange 函数将停止工作。

如果我从按钮中删除 onclick 调用，则选择上的 onchange 开始工作！

他们每个人的功能彼此无关，所以我不知道发生了什么。

给回复的人点赞！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:40:33.903

我对同样的问题有轻微的变化。我的 onchange 是在文本输入上。我更改了输入值，但将焦点留在了该输入中。然后我用鼠标点击一个按钮（或点击一个访问键），它应该触发一个 onclick。

在我的情况下，onchange 运行，但 onclick 在调用处理程序之前永远不会触发或停止。

onchange 启动一个简短的 ajax 进程。

如果我在单击按钮之前退出输入，则两个事件都可以正常工作。就好像浏览器取消注册 onclick 事件侦听器，直到 onchange 完成。

……

啊哈！写这篇文章让我发现了这个狡猾的陷阱。我的 onchange 处理程序首先在运行时禁用所有表单输入。呃。

这成为您问题的答案的可能性似乎很小，但它表明您有时必须查看代码以发现错误是多么困难。你可以试着整理一下你的代码：';' 在 submitform() 之后，id= 之前的空格，连续两个打开的表单标签？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:18:31.420

验证您的代码是这样编写的：

HTML：

```
<form action="/echo/json/">
  <select onchange="montarconselho(distrito,'concelho');" id="distrito">
   <option value"0">0</option>
   <option value"1">1</option>
   <option value"2">2</option>
  </select>    

 <input onclick="return submitform()" type="submit" id="inserir"/>
</form>​ 
```

JS：

```
var montarconselho​ = function (a,b) {
    alert ('select change');
} 
```

如果这不起作用，请尝试发布您的“真实”代码片段

# c++ - boost::spirit::qi 输出重复解析

> ID：13869978
> 
> 赞同：5
> 
> 时间：2012-12-13T22:55:37.457
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

我有一个使用 Boost::Spirit 的非常简单的解析器：

```
rule<std::string::iterator, std::string()> zeroTo255 = (string("25") >> char_('0', '5'))
    | (char_('2') >> char_('0', '4') >> digit)
    | (char_('1') >> repeat[2](digit))
    | (char_('1', '9') >> digit) | digit; 
```

当我尝试解析

```
std::string o{"1"};
std::string s;
parse(o.begin(), o.end(), zeroTo255, s);
std::cout << o << ": " << s << std::endl; 
```

我有作为输出

```
1: 111 
```

我显然做错了什么，但是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T08:40:42.800

`qi::hold`正如@Andrzej 正确提到的那样，这是一种方法

我想我有一些可能会有所帮助的观察结果以及更好的解决方案。

* * *

关键是，Spirit 不会通过设计要求对属性进行“临时”存储。事实上，它不能真正假设属性是可复制的。这就是这里的原因（想象将所有内容解析为单个 std::vector<> 并为每个解析器步骤进行复制？）。

在更本质的层面上，在我看来，这里倒退的不是属性处理，而是解析器表达式本身：***它没有说明意图，并且在处理数字表示时会产生各种复杂性***......真的不应该。

我的看法是

```
rule<std::string::iterator, std::string()> zeroTo255, alternatively;

alternatively %= raw [ uint_ [ _pass = (_1 <= 255) ] ]; 
```

你看：你让 Spirit 解析一个数字，实际上只是验证范围，这是你首先想要做的。

让我印象深刻的第二件事是，规则公开了一个`std::string`属性，而不是`unsigned char`例如为什么会这样？

假设这是一个有意识的设计决定，您可以通过明智地使用

*   负前瞻 ( `!parser`) - 不影响属性
*   正向前瞻 ( `&parser`) - 不影响属性
*   熟悉`qi::as_string`, `qi::raw`,`qi::lexeme`和`qi::no_skip`
*   语义动作（不要依赖*自动规则*）

*以下是对原始规则的*最小更改：

```
zeroTo255 = raw [ 
          ("25" >> char_("0-5"))
        | ('2' >> char_("0-4") >> digit)
        | ('1' >> digit >> digit)
        | (char_("1-9") >> digit) 
        | digit
    ]; 
```

这与使用 _hold_ing 属性值的代码具有大致相同的效果，`qi::hold`但没有性能缺陷。

希望这可以帮助。

**[完整示例：在http://liveworkspace.org/code/4v4CQW$0](http://liveworkspace.org/code/4v4CQW%240)**上直播：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>

namespace qi = boost::spirit::qi;

int main()
{
    using namespace qi;
    rule<std::string::iterator, std::string()> zeroTo255, alternatively;

    zeroTo255 = raw [ 
              ("25" >> char_("0-5"))
            | ('2' >> char_("0-4") >> digit)
            | ('1' >> digit >> digit)
            | (char_("1-9") >> digit) 
            | digit
        ];

    alternatively %= raw [ uint_ [ _pass = (_1 <= 255) ] ];

    for (auto& input : std::vector<std::string> { "255", "249", "178", "30", "4" })
    {
        std::string output;
        std::cout << "zeroTo255:\t" << std::boolalpha 
                  << parse(std::begin(input), std::end(input), zeroTo255, output) 
                  << ": " << output << std::endl;

        output.clear();
        std::cout << "alternatively:\t" << std::boolalpha 
                  << parse(std::begin(input), std::end(input), alternatively, output) 
                  << ": " << output << std::endl;
    }

} 
```

输出

```
zeroTo255:      true: 255
alternatively:  true: 255
zeroTo255:      true: 249
alternatively:  true: 249
zeroTo255:      true: 178
alternatively:  true: 178
zeroTo255:      true: 30
alternatively:  true: 30
zeroTo255:      true: 4
alternatively:  true: 4 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T23:05:25.747

我曾经遇到过类似的问题。这是 Spirit 中替代运算符的特殊工作方式。如果您使用附加指令“hold”，您的示例应该可以工作。

```
rule<std::string::iterator, std::string()> zeroTo255 
= hold[string("25") >> char_('0', '5')]
| hold[char_('2') >> char_('0', '4') >> digit]
| hold[char_('1') >> repeat[2](digit)]
| hold[char_('1', '9') >> digit] | digit; 
```

有关此行为的详细信息，请参阅[此线程](http://comments.gmane.org/gmane.comp.parsers.spirit.general/20428)。

# haskell - 在终端打印菜单并选择一个选项，如何？

> ID：13869979
> 
> 赞同：1
> 
> 时间：2012-12-13T22:55:42.137
> 
> 标签：haskell, command-line, io, buffering

> **可能重复：**
> [使用 putStr 和 getLine 的错误 IO 操作顺序](https://stackoverflow.com/questions/2500459/wrong-io-actions-order-using-putstr-and-getline)

我是一个haskell初学者。

我正在尝试制作一个通过终端显示菜单并要求用户引入选项的程序。这是代码：

```
main :: IO ()
main = do
    putStrLn "0    <- quit"
    putStrLn "1    <- Hello"
    putStr "Choose an option: "
    c <- getChar
    case c of
        '0' -> return ()
        '1' -> putChar '\n' >> putStrLn "Hello World" >> main 
```

当我在 ghci 解释器中使用这个模块时，一切都像它应该做的那样工作。但如果我编译这个：

> ghc你好.hs

并在终端中运行它，它在要求引入字符之前不显示“选择一个选项：”行。我认为这可能是由于 haskell 懒惰的性质造成的，我不知道如何解决它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:01:23.543

这不是因为懒惰，只是缓冲。使用`putStrLn`代替，`putStr`它会工作。

请参阅[使用 putStr 和 getLine 的错误 IO 操作顺序](https://stackoverflow.com/questions/2500459/wrong-io-actions-order-using-putstr-and-getline)

# postgis - 如何在postgis中创建一个以米为单位的圆圈？

> ID：13869980
> 
> 赞同：7
> 
> 时间：2012-12-13T22:55:45.957
> 
> 标签：postgis, geometry, srid

我想问如何用`radius=4km`. 我已经尝试过该`ST_Buffer`功能，但它会创建一个更大的圆圈。（我通过将多边形插入新的 kml 文件来查看创建的圆。）

这就是我正在尝试的。

```
INSERT INTO camera(geom_circle) VALUES(geometry(ST_Buffer(georgaphy(ST_GeomFromText('POINT(21.304116745663165 38.68607570952619)')), 4000))) 
```

圆的中心是一个 lon lat 点，但我不知道它`SRID`，因为我已经从 kml 文件中导入了它。`SRID`为了转换几何形状等，我需要吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-14T04:56:12.720

KML 文件始终为 lat/long 并使用 SRID=4326。如果您使用`geography`. 地理是在纬度/经度数据上混合 4 公里公制度量的好方法……太好了，你试过了！

试试这个语句来修复强制转换，并使用参数化点构造函数：

```
SELECT ST_Buffer(ST_MakePoint(21.304116745663165, 38.68607570952619)::geography, 4000); 
```

如果您需要将其转换回几何体，`::geometry`请在末尾添加一个转换。

* * *

# 更新准确性

上一个答案在内部将几何图形（通常）重新投影到该点适合的 UTM 区域（参见[ST_Buffer](http://www.postgis.net/docs/ST_Buffer.html)）。如果该点位于两个 UTM 边界的边缘，这可能会导致轻微的失真。大多数人不会关心这些错误的大小，但通常会是几米。但是，如果您需要亚毫米精度，请考虑构建动态[方位角等距投影](https://en.wikipedia.org/wiki/Azimuthal_equidistant_projection)。这需要 PostGIS 2.3 [`ST_Transform`](https://postgis.net/docs/ST_Transform.html)，并且改编自[另一个答案](https://gis.stackexchange.com/a/289923)：

```
CREATE OR REPLACE FUNCTION geodesic_buffer(geom geometry, dist double precision,
                                           num_seg_quarter_circle integer)
  RETURNS geometry AS $$
  SELECT ST_Transform(
    ST_Buffer(ST_Point(0, 0), $2, $3),
      ('+proj=aeqd +x_0=0 +y_0=0 +lat_0='
       || ST_Y(ST_Centroid($1))::text || ' +lon_0=' || ST_X(ST_Centroid($1))::text),
      ST_SRID($1))
  $$ LANGUAGE sql IMMUTABLE STRICT COST 100;
CREATE OR REPLACE FUNCTION geodesic_buffer(geom geometry, dist double precision)
  RETURNS geometry AS 'SELECT geodesic_buffer($1, $2, 8)'
  LANGUAGE sql IMMUTABLE STRICT COST 100;
-- Optional warppers for geography type
CREATE OR REPLACE FUNCTION geodesic_buffer(geog geography, dist double precision)
  RETURNS geography AS 'SELECT geodesic_buffer($1::geometry, $2)::geography'
LANGUAGE sql IMMUTABLE STRICT COST 100;
CREATE OR REPLACE FUNCTION geodesic_buffer(geog geography, dist double precision,
                                           num_seg_quarter_circle integer)
  RETURNS geography AS 'SELECT geodesic_buffer($1::geometry, $2, $3)::geography'
  LANGUAGE sql IMMUTABLE STRICT COST 100; 
```

运行其中一个功能的简单示例是：

```
SELECT geodesic_buffer(ST_MakePoint(21.304116745663165, 38.68607570952619)::geography, 4000); 
```

为了比较到每个缓冲点的距离，这里是每个[测地线](https://en.wikipedia.org/wiki/Geodesics_on_an_ellipsoid)的长度（旋转椭圆体上的最短路径，即 WGS84）。首先这个函数：

```
SELECT count(*), min(buff_dist), avg(buff_dist), max(buff_dist)
FROM (
  SELECT ST_Distance((ST_DumpPoints(geodesic_buffer(poi, dist)::geometry)).geom, poi) AS buff_dist
  FROM (SELECT ST_MakePoint(21.304116745663165, 38.68607570952619)::geography AS poi, 4000 AS dist) AS f
) AS f;

 count |      min       |       avg       |      max
-------+----------------+-----------------+----------------
    33 | 3999.999999953 | 3999.9999999743 | 4000.000000001 
```

将此与 ST_Buffer （答案的第一部分）进行比较，这表明它偏离了大约 1.56 m：

```
SELECT count(*), min(buff_dist), avg(buff_dist), max(buff_dist)
FROM (
  SELECT ST_Distance((ST_DumpPoints(ST_Buffer(poi, dist)::geometry)).geom, poi) AS buff_dist
  FROM (SELECT ST_MakePoint(21.304116745663165, 38.68607570952619)::geography AS poi, 4000 AS dist) AS f
) AS f;

 count |      min       |       avg        |      max
-------+----------------+------------------+----------------
    33 | 4001.560675049 | 4001.56585986067 | 4001.571105793 
```

# css - CSS背景位置不起作用

> ID：13869986
> 
> 赞同：1
> 
> 时间：2012-12-13T22:56:01.723
> 
> 标签：css, background-image, background-position

我这里有这个代码...

```
.madactive{background: url(/graphics/madarrow.jpg) no-repeat center top 20px !important;} 
```

但是图像不再出现，我检查了元素并且css被划掉了......

我想要做的是在我的背景图像上放置一个顶部。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T23:01:16.237

您的声明值中有太多参数。根据您的具体需求，以下任一方法都可以使用：

```
.madactive{background: url(/graphics/madarrow.jpg) no-repeat center top !important;} 
```

或者

```
.madactive{background: url(/graphics/madarrow.jpg) no-repeat center 20px !important;} 
```

# php - Mysql 数据库没有更新

> ID：13869987
> 
> 赞同：0
> 
> 时间：2012-12-13T22:56:09.730
> 
> 标签：php, mysql, database, sql-update

好的，所以我游戏上的用户有一个页面。其他用户可以在页面上发表评论。我制作了一个脚本，用户可以将其设置为人们可以在他们的墙上发表评论或者它是否被禁用的地方。如果我手动更改数据库，它可以工作，但我用单选按钮设置它并且它没有更新。这是表格。

```
<form action="settings" method="post">
Comments: <br />
Enabled:  
<input type="radio" name="change_wall" id="change_wall" value="no" checked="checked" />
<br />
Disabled: 
<input type="radio" name="change_wall" id="change_wall" value="yes" />
<br />
<input type="submit" value="Change" />
</form> 
```

下面是数据库更新的SQL。

```
 <?php
    if ( isset ( $_POST['change_wall'] ) )
        {
        $change_wall = mysql_real_escape_string($_POST['change_wall']); 
        if ($cash >= 5000) {
        $sql = "UPDATE users SET disable_wall='".$change_wall."' , cash=(cash - 5000) WHERE id='".$id."'";
        $res = mysql_query($sql);
            echo  
            '<table width="800" align="center" class="SettingsTable">
              <tr>
                <td>You sucessfully changed your comment settings!</td>
              </tr>
            </table>
            <br />';
        }
        else  {
            echo 
            '<table width="800" align="center" class="SettingsTable">
              <tr>
                <td>You don\'t have enough cash to change your comment settings!</td>
              </tr>
            </table>
            <br />'; 
        }
        }
?> 
```

这是用户页面的编码，用于显示他们的评论或如果它被禁用。

```
 <?php 
      if ($disable_wall = 0) { 
        include 'users_wall.php';
      }
      elseif ($disable_wall = 1) {
          echo 
          '<table width="800" align="center" class="DisabledWall">
          <tr>
            <td>' . $userp['name'] . '\'s ' . 'Comments Disabled!</td>
          </tr>
        </table>';
      }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:11:25.550

因为您需要一个布尔（是/否）响应，所以您可以简单地将它们设置为 0 或 1，以确保安全。
要回答您的问题，请执行

```
 $sql = "UPDATE users SET disable_wall='1' , cash=(cash - 5000); 

```

并禁用墙

```
 $sql = "UPDATE users SET disable_wall='0' , cash=(cash - 5000); 

```

更好的是，为它使用一个布尔列。

此外，确保**$id**是一个有效值，并且当前在表中至少有一行。

更重要的是，使用 PDO 或 MySQLi；MySQL 扩展已被弃用。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:09:11.160

首先，确保执行了 sql 查询 - $cash 确实 >= 5000 并且 $id 变量包含正确的值

那么，表字段'disable_wall'有什么类型呢？varchar 还是枚举？不是整数？

如果上面的说明没有帮助，请在脚本的最后一行之后输入：

```
die("error: ".mysql_error()); 
```

提交表格并观察，更新表格时发生了什么错误

# facebook - Facebook 移动应用程序识别已安装用户

> ID：13869988
> 
> 赞同：0
> 
> 时间：2012-12-13T22:56:11.310
> 
> 标签：facebook

我有一个 Facebook 应用程序，它可以安装在用户页面上，然后他们的客户可以与他们进行预订。因此，应用程序需要知道谁在他们的主页上安装了该应用程序，而不是当前使用它的人。

我可以使用 signed_request 和 Page Id 在 Web 应用程序上执行此操作。但移动 Facebook 应用程序不提供签名请求。有没有其他方法可以识别已安装的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:36:51.483

不，为了获取用户的信息，您需要他们[登录](https://developers.facebook.com/docs/concepts/login/)应用程序并授予您查看他们数据的权限；您在其他地方使用的解决方法`signed_request`不适用，因为这是特定于页面选项卡应用程序的，并且只会为您提供“喜欢”状态，而不是用户 ID

# c# - WPF 文本块闪烁

> ID：13869991
> 
> 赞同：2
> 
> 时间：2012-12-13T22:56:14.540
> 
> 标签：c#, wpf, animation, textblock

我有一个应用程序需要根据依赖对象使按钮文本闪烁/闪烁（下面的示例 XAML 使用复选框的 IsChecked）。我尝试了许多在 Google 搜索中看到的不同技巧，但均无济于事。

下面是我为此目的创建的示例 XAML 代码，我肯定缺少一些东西。有人可以帮忙吗？

==========================

```
<Window x:Class="WpfTestBed.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="414" Width="751">

    <Window.Resources>
        <Style x:Key="SB_BaseGradientButton" TargetType="Button">
            <Style.Resources>
                <Color x:Key="StartColor">Gray</Color>
                <Color x:Key="EndColor">White</Color>

                <SolidColorBrush x:Key="PressedForegroundColor" Color="Black"/>
            </Style.Resources>
            <Setter Property="Margin" Value="2,2,2,2" />
            <Setter Property="Foreground" Value="Black" />
            <Setter Property="FontSize" Value="14" />
        </Style>

        <Storyboard x:Key="FlashBlockTextStoryBoard">
            <ObjectAnimationUsingKeyFrames RepeatBehavior="Forever" Storyboard.TargetName="txtButtonFace" Storyboard.TargetProperty="(UIElement.Visibility)">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.5" Value="{x:Static Visibility.Hidden}" />
                <DiscreteObjectKeyFrame KeyTime="0:0:1"   Value="{x:Static Visibility.Visible}" />
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>

        <Style BasedOn="{StaticResource {x:Type TextBlock}}" x:Key="FlashTextBlock" TargetType="TextBlock">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=checkBox1.IsChecked}" Value="True">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard Name="storyboard" Storyboard="{StaticResource FlashBlockTextStoryBoard}" />
                    </DataTrigger.EnterActions>
                    <DataTrigger.ExitActions>
                        <StopStoryboard BeginStoryboardName="storyboard" />
                    </DataTrigger.ExitActions>
                </DataTrigger>
            </Style.Triggers>
        </Style>

    </Window.Resources>

    <Grid Margin="10,10,10,10" >
        <Grid.RowDefinitions>
            <RowDefinition Height="40*"/>
            <RowDefinition Height="12*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="12*" MaxWidth="210"/>
            <ColumnDefinition Width="20*"/>
        </Grid.ColumnDefinitions>

        <Button Grid.Column="1" MaxHeight="70" MaxWidth="150" 
                FontSize="16" Style="{StaticResource SB_BaseGradientButton}" Margin="320,0,29,12" Grid.Row="1">
            <TextBlock Name="txtButtonFace" TextAlignment="Center" Text="This Is Test" 
                               Style="{StaticResource FlashTextBlock}">
            </TextBlock>
        </Button>
        <CheckBox Content="Make button flash" Grid.Column="1" Height="16" HorizontalAlignment="Left" Margin="44,24,0,0"
                  Name="checkBox1" VerticalAlignment="Top" Grid.Row="1" />
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:37:35.690

两件事，它将起作用：

*   您的绑定语法错误。它一定要是

    ```
    Binding="{Binding Path=IsChecked, ElementName=checkBox1}" 
    ```

*   并`Storyboard.TargetName="txtButtonFace"`从您的中删除，`Storyboard`因为您不能`TargetName`在 a 中使用 a `Style`。

# jquery - 将功能简化为一个

> ID：13869992
> 
> 赞同：0
> 
> 时间：2012-12-13T22:56:21.087
> 
> 标签：jquery

我有一个带有三个按钮的块，每个按钮加载不同的内容。如何将这三个几乎相同的功能缩短为一个功能？

```
$('#mega_online').click(function() {

        $("#contentjq_more").empty().html('<center><img src="http://site.com/image.gif" /></center>');
        $("#contentjq").load("http://site.com/online.php?more=" + $morenum + "&movies=1");
        $("#contentjq_more").empty().html('');
    $morenum = $morenum+20;
        $("#contentjq").show();

});

$('#mega_files').click(function() {
    $morenum = 0;
        $("#contentjq_more").empty().html('<center><img src="http://site.com/image.gif" /></center>');
        $("#contentjq").load("http://site.com/files.php?more=" + $morenum + "&movies=1");
        $("#contentjq_more").empty().html('');
    $morenum = $morenum+20;
        $("#contentjq").show();
});

$('#mega_music').click(function() {
    $morenum = 0;
        $("#contentjq_more").empty().html('<center><img src="http://site.com/image.gif" /></center>');
        $("#contentjq").load("http://site.com/music.php?more=" + $morenum + "&movies=1");
        $("#contentjq_more").empty().html('');
    $morenum = $morenum+20;
        $("#contentjq").show();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:01:12.077

我认为它们几乎相同，您可以简单地将其放在一个函数中并找到页面名称为`pageName = this.id.split('_')[1]`.

```
function myFunc() {
        var pageName = this.id.split('_')[1];
        $("#contentjq_more").empty().html('<center><img src="http://site.com/image.gif" /></center>');
        $("#contentjq").load("http://site.com/" + pageName + "?more=" + $morenum + "&movies=1");
        $("#contentjq_more").empty().html('');
    $morenum = $morenum+20;
        $("#contentjq").show();

} 
```

然后你可以

```
$('#mega_online, #mega_files, #mega_music').click(function () {
    myFunc.call(this);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:03:16.990

你可以：

```
function DoClick(page)
{
    $("#contentjq_more").empty().html('<center><img src="http://site.com/image.gif" /></center>');
    $("#contentjq").load("http://site.com/" + page + ".php?more=" + $morenum + "&movies=1");
    $("#contentjq_more").empty().html('');
    $morenum = $morenum+20;
    $("#contentjq").show();
}

$('#mega_online, #mega_online, #mega_music').click(function() {
    DoClick($(this).attr('id').split('_')[1]);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:06:03.080

你可以把它变成一个函数：

```
function doWork($type) {
        $morenum = 0;
        $("#contentjq_more").empty().html('<center><img src="http://site.com/image.gif" /></center>');
        $("#contentjq").load("http://site.com/" + $type + ".php?more=" + $morenum + "&movies=1");
        $("#contentjq_more").empty().html('');
        $morenum = $morenum+20;
        $("#contentjq").show();
         }

$('#mega_music').click(function() { 
doWork('music');
});

$('#mega_files').click(function() { 
doWork('files');
});

$('#mega_online').click(function() {
doWork('online');
}); 
```

# eclipse - 如何配置 Eclipse 使其能够处理大量项目和代码？

> ID：13869993
> 
> 赞同：0
> 
> 时间：2012-12-13T22:56:23.063
> 
> 标签：eclipse, memory, build-automation, out-of-memory, code-analysis

我有很多项目为我服务于不同的目的。我使用多个工作区，所以我只将相关项目导入每个工作区，Eclipse 的最大内存大多在 1.2-1.6gb 之内。

我最近下载了[CodePro](https://developers.google.com/java-dev-tools/download-codepro)插件，想对所有项目进行进度分析，看看它们是如何结合在一起的。

在尝试它并将所有项目导入 Eclipse Indigo 时，在构建工作区时 Eclipse 变得无响应，我必须从 Windows“任务管理器”中终止它。

经过短暂的调查，我了解到当 Eclipse 使用的内存达到 ~1.95gb 时会发生这种情况，如任务管理器中所注意到的。

那么我想要完成什么：

我想在 CodePro 插件中运行计划的操作并分析所有内容。有 5.2mb 的代码跨 178 个项目。

我有哪些选择？

在此先感谢，亚当。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:14:48.523

您可以增加 Eclipse 使用的最大堆大小以避免 OutOfMemoryError。有关详细信息，请参见[此处](http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F)。

我唯一的等效经验是使用 Eclipse Memory Analyzer 插件来查看堆转储。我经常使用 6GB 堆运行 Eclipse，尽管在使用这么多内存时分析可能​​需要一些时间。

# html - HTML 是否支持特殊字符（例如，重音字符）的替代文本？

> ID：13869994
> 
> 赞同：2
> 
> 时间：2012-12-13T22:56:25.387
> 
> 标签：html, html-entities

我设想的 HTML 支持可能如下所示：

<span alt="Antonin Dvorak">安东ín Dvořák</span>

如果浏览器无法呈现任何特殊字符，它可能会退回到纯 ASCII“alt”文本。另一个好处可能是搜索“cafe”将匹配“café”（我的浏览器不匹配，至少目前不匹配）。

有没有办法实现这样的事情，或者我只是对一个不存在的问题感到偏执？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:09:15.647

不，HTML 中没有这样的标记。最接近的是`title`属性，它通常在鼠标悬停时显示为工具提示（在某些情况下由语音合成器说出）。但它是一个乏味的武器，一个实现很差的特性；如果您想要类似的东西，请改用 CSS 工具提示。它并不是真正的替代品，而是“咨询标题”。

您可以做的最好的事情是做出合理的努力，确保您使用的字符能够正确显示，这要归功于使用合适的字体。例如，这通常不是捷克字母的问题，因为它们通常出现在网页通常使用的字体中，例如 Arial、Verdana、Georgia。但是，如果您使用可下载字体，或者使用支持更有限的字符，则可能会出现问题。一般的想法是使用一个`font-family`列表，其中仅包含具有页面上使用的所有字符的字体，并使用这样一个列表，几乎所有计算机都具有至少一个字体系列。更多内容：[在 HTML 中使用特殊字符的指南](http://www.cs.tut.fi/~jkorpela/html/characters.html)。

# php - Symfony 创建进程错误

> ID：13869995
> 
> 赞同：0
> 
> 时间：2012-12-13T22:56:33.463
> 
> 标签：php, symfony, symfony-2.1, phpstorm

我今天开始使用 Symfony，我想使用 CLI。所以我已经安装了 PHPstorm。遵循所有指示。添加了最新的 php 5.4

现在当我尝试运行时：

```
> $ php app/console generate:bundle --namespace=Acme/HelloBundle --format=yml 
```

无法运行程序“$”（在目录“E:\wamp\www\Symfony”中）：CreateProcess error=2，系统找不到指定的地图

有想法该怎么解决这个吗？

**编辑**

```
> php app/console generate:bundle --namespace=Acme/HelloBundle --format=yml
Cannot run program "php" (in directory "E:\wamp\www\Symfony"): CreateProcess error=2, Het systeem kan het opgegeven bestand niet vinden

> php.exe app/console generate:bundle --namespace=Acme/HelloBundle --format=yml
Cannot run program "php.exe" (in directory "E:\wamp\www\Symfony"): CreateProcess error=2, Het systeem kan het opgegeven bestand niet vinden 
```

我尝试了答案，但似乎没有任何改变！这是更大的事情吗？

**编辑 2 已解决**

```
> c:\full\path\to\your\php.exe app/console generate:bundle --namespace=Acme/HelloBundle --format=yml 
```

那篇文章救了我的命，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T22:59:27.263

```
> php app/console generate:bundle --namespace=Acme/HelloBundle --format=yml 
```

因为那里 $ 通常意味着您的终端邀请。并且您尝试使用其余字符串作为参数来运行命令“$”。

```
> c:\full\path\to\your\php.exe app/console generate:bundle --namespace=Acme/HelloBundle --format=yml 
```

或将 php 的路径添加到 `%PATH%`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:04:27.900

`$`只是一个标记，表明这是在控制台中运行的。如果你在 Windows 上运行它，你应该这样做：

```
php.exe app/console generate:bundle --namespace=Acme/HelloBundle --format=yml 
```

要使 php 在 CLI 中工作，您需要将其二进制文件（php.exe 所在的位置）的路径添加到 PATH。

# django - django memcached 设置位置列表有元组吗？

> ID：13869998
> 
> 赞同：2
> 
> 时间：2012-12-13T22:56:56.117
> 
> 标签：django, memcached, setting

刚刚在其中一个项目 setting.py 中看到了这个配置

```
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',
        'KEY_PREFIX' : 'projectabc:',
        'LOCATION': [
                ('10.1.1.1:11211', 1),
                ('10.1.1.2:11211', 1),
                ('10.1.1.3:11211', 1),
                ('10.1.1.4:11211', 1),
        ],
    }
} 
```

只是好奇为什么里面有元组`LOCATION`？元组中的“1”是做什么用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:36:34.160

在 python-memcached 中，`location`最终被发送到这个函数。似乎存在重量参数是多余的（但有帮助的提醒）。

```
def set_servers(self, servers):
    """
    Set the pool of servers used by this client.

    @param servers: an array of servers.
    Servers can be passed in two forms:
        1\. Strings of the form C{"host:port"}, which implies a default weight of 1.
        2\. Tuples of the form C{("host:port", weight)}, where C{weight} is
        an integer weight value.
    """ 
```