# StackOverflow 问答 15213000-15213999

# shopify - 如何创建将在没有 asyncLoad 包装器的情况下使用的 shopify ScriptTag？

> ID：15213001
> 
> 赞同：0
> 
> 时间：2013-03-04T23:17:03.380
> 
> 标签：shopify

Shopify 确实将通过[ScriptTag](http://api.shopify.com/scripttag.html) API 添加的所有脚本包装到特殊的 asyncLoad 函数中。虽然在许多情况下这很有意义，但仍然存在需要将脚本标记直接插入标题的情况。

例如，如果没有其他方法来插入脚本标签， [Optimizely](http://apps.shopify.com/optimizely)就不会那么顺利地工作，即他们的脚本以某种方式独立出现在店面中，即没有 asyncLoad 功能。

**我该怎么做？**

一种选择是解析然后发回当前主题，但它看起来很奇怪而且不太可靠，根据我的研究，[Optimizely](http://apps.shopify.com/optimizely)确实知道另一种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:20:54.593

我能够与 Optimizely 取得联系，这是他们的回复：

> 我们实际上与 Shopify 合作，默认情况下以这种方式将我们的代码段添加到页面中。我认为没有一种简单的方法可以解决异步限制。

这是 Shopify 的回复：

> 不幸的是，这是一次性的 hack-y 修复，而不是我们目前愿意再次做的事情。

因此，目前解决异步限制的唯一可靠方法是**指示用户将脚本放入当前主题**中，就像其他应用程序所做的那样。

# python-3.x - 在 python 3.2 上安装 pybrain

> ID：15213003
> 
> 赞同：9
> 
> 时间：2013-03-04T23:17:30.990
> 
> 标签：python-3.x, pybrain

我正在尝试在 python 3.2 上安装 pybrain。它在这里说：[https](https://github.com/pybrain/pybrain/pull/85) ://github.com/pybrain/pybrain/pull/85它应该可以工作。然而它不适合我。

我试过了：

$export PYTHONPATH=$PYTHONPATH:'/home/luis/Documents/pybrain/' [https://github.com/pybrain/pybrain/pull/85](https://github.com/pybrain/pybrain/pull/85)

这适用于 python 2.7。

有人让它工作吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T10:50:54.813

经过数小时的“这到底是什么？！”我安装了它。首先，建议的安装程序没有针对 Python3 进行更新，所以我安装了 Distribute。安装后，我可以`python setup.py install`在我未保存 pybrain 的目录中使用它。它给出了很多错误。所以我找到[了这篇文章](http://habrahabr.ru/post/148597/)（上帝保佑谷歌翻译）并在 pybrain 目录上使用了 2to3。在我尝试再次安装它之后，它给出了一个错误，`from string import split`所以我编辑了文件并删除了该行（实际上不需要它）并再次尝试。这次没有发生错误，我能够毫无问题地导入 pybrain。在 utility.py 中再次出现同样的问题`from string import split`，所以也编辑该行。

我也使用 2to3 将示例转换为 python3。benchmarkplots.py 似乎有效。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-23T23:38:04.097

更新：pybrain 现在支持 python3
如果遇到问题，这里是如何安装

点安装[https://github.com/pybrain/pybrain/archive/0.3.3.zip](https://github.com/pybrain/pybrain/archive/0.3.3.zip)

或者只是获取最新的 github pybrain 版本。

# c# - 下拉列表组合值

> ID：15213007
> 
> 赞同：-2
> 
> 时间：2013-03-04T23:17:44.290
> 
> 标签：c#, .net, asp.net-mvc, entity-framework

是否可以组合来自实体的下拉列表值。

假设我有一个姓氏和名字的人员类

我试过这样做：

```
ViewBag.uservalues = new SelectList(db.Persons, "ID", "FirstName" + " " + "LastName"); 
```

但这会吐出一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:24:19.380

您对`SelectList`构造函数的调用

```
new SelectList(db.Persons,"ID", "FirstName"+" " + "LastName"); 
```

使用[此重载](http://msdn.microsoft.com/en-us/library/dd505286%28v=vs.108%29.aspx)，它需要您绑定到的公共字段或属性的名称`ViewModel`，并且您的 ViewModel 中可能没有名为“FirstName LastName”的字段或属性。

`ViewModel`向您的类添加一个连接两个字段的属性（调用它`FirstAndLastName`），并在调用中按名称指定该属性`SelectList`。

```
new SelectList(db.Persons,"ID", "FirstAndLastName"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:26:08.547

由于实体框架创建了部分类，因此您应该在具有要使用的派生属性的同一命名空间中创建另一个部分类。

如果实体框架创建了一个类：

```
public partial class Person
{
    public String FirstName {get;set;}
    public String LastName{get;set;}
    public Int32 ID{get;set;}
} 
```

创建一个新的部分类

```
public partial class Person
{
    public String FullName {get{ return this.FirstName + " " + this.LastName}}
} 
```

并将其存储在项目中某个位置的另一个文件夹中（但具有相同的命名空间）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T23:29:21.993

```
var query = from c in db.Persons
            select new { id = c.ID,Names = c.FirstName + " " + c.LastName };

ViewBag.personid = new SelectList(query, "ID", "Names"); 
```

# matlab - MATLAB：将多边形写入 kml 文件

> ID：15213009
> 
> 赞同：1
> 
> 时间：2013-03-04T23:18:00.410
> 
> 标签：matlab, kml

如何使用 kmlwrite 函数将地理空间多边形写入 .kml 文件？

在生成 poligons'vertives 并定义它们的面之后，我用函数 patch 绘制了多边形：

```
pp = patch('Faces',faces,'Vertices',vertices); 
```

然后我定义了颜色：

```
set(pp,'FaceColor','flat',...
       'FaceVertexCData',cdata,...
       'CDataMapping','direct',...
       'EdgeAlpha',.4,'EdgeColor','b') 
```

得到以下 Matlab 图：

![在此处输入图像描述](../Images/a27d650d3fadd1850887d4c6c73eee36.png)

现在，我想用谷歌地球来可视化这些多边形，但我不知道怎么做。

我试过这个功能

> 公里写

但我只能将多边形的顶点坐标传递给它，生成一个包含所有点且没有多边形的 kml 文件，如下所示：

![在此处输入图像描述](../Images/c63a6feabd6f6e4ff69b157b3f4cad20.png)

您能告诉我如何存储包含多边形及其颜色的 kml 文件吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:04:29.113

我在 MATLAB [KML ToolBox](https://www.mathworks.com/matlabcentral/fileexchange/34694-kml-toolbox-v2-3)中找到了我的问题的解决方案（特别是在 k.poly3 函数中）。

感谢作者[拉斐尔·奥利维拉](https://www.mathworks.com/matlabcentral/fileexchange/authors/115634)。

# java - 日期到字符串不正确

> ID：15213011
> 
> 赞同：1
> 
> 时间：2013-03-04T23:18:20.483
> 
> 标签：java, android

可能会有简单而快速的答案，但我仍然无法找出为什么是

```
Date date = new Date(60000); //one min.
SimpleDateFormat dateFormat = new SimpleDateFormat("HH:mm:ss");
String dateStr = dateFormat.format(date); 
```

dateStr - 01:01:00 还有一小时。时区？没有它我该如何设置？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T23:25:45.897

`Date`代表一个特定的时刻，而不是持续时间。`new Date(60000)`不会创造“一分钟”。请参阅该[构造函数的文档](http://developer.android.com/reference/java/util/Date.html#Date%28long%29)：

> 使用指定的毫秒值初始化此 Date 实例。该值是自 1970 年 1 月 1 日 GMT 以来的毫秒数。

如果您想要“从现在开始一分钟”，您可能希望使用`Calendar`该类，特别是该[`add`](http://developer.android.com/reference/java/util/Calendar.html#add%28int,%20int%29)方法。

**更新：**

[`DateUtils`](http://developer.android.com/reference/android/text/format/DateUtils.html)有一些您可能会觉得有用的有用方法。如果您想要 HH:mm:ss 格式的经过时间，您可以尝试[`DateUtils.formatElapsedTime`](http://developer.android.com/reference/android/text/format/DateUtils.html#formatElapsedTime%28long%29). 就像是：

```
String dateStr = DateUtils.formatElapsedTime(60); 
```

请注意，60 以秒为单位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:38:54.517

`java.util.Date`指定一分钟的三种方法：

**1\. 使用** `SimpleDateFormat.setTimeZone(TimeZone.getTimeZone("UTC"))` **shahtapa[说](https://stackoverflow.com/a/12667316/938111)：**

```
Date date = new Date(60*1000); //one min.    
SimpleDateFormat dateFormat = new SimpleDateFormat("HH:mm:ss");
dateFormat.setTimeZone(TimeZone.getTimeZone("UTC"));
String dateStr = dateFormat.format(date);
System.out.println("Result = " + dateStr);  //Result should be 00:01:00 
```

**2\. 使用** `java.util.Calendar` **as [kabuko](https://stackoverflow.com/a/15213091/938111)说：**

```
Calendar calendar = Calendar.getInstance();
calendar.clear();
calendar.set(Calendar.MINUTE,1); //one min.
Date date = calendar.getTime();
SimpleDateFormat dateFormat = new SimpleDateFormat("HH:mm:ss");
String dateStr = dateFormat.format(date);
System.out.println("Result = " + dateStr);  //Result should be 00:01:00 
```

`calendar.set()`也可以使用其他语句：

```
calendar.set(Calendar.MILLISECOND,60*1000);  //one min.
calendar.set(1970,0,1,0,1,0);                //one min. 
```

****3.正如****[西蒙尼克森](https://stackoverflow.com/a/6059239/938111)****所说，****使用这些**`setTimeZone` **和** `Calendar` **想法并强制** `Calendar` **使用** ***UTC 时区：*****

 **```
Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone("UTC"));
calendar.clear();
calendar.set(Calendar.MINUTE,1); //one min.
Date date = calendar.getTime();
SimpleDateFormat dateFormat = new SimpleDateFormat("HH:mm:ss");
dateFormat.setTimeZone(TimeZone.getTimeZone("UTC"));
String dateStr = dateFormat.format(date);
System.out.println("Result = " + dateStr);  //Result should be 00:01:00 
```

**注意：**
我有一个类似的问题：`1970-01-01`在我的情况下，日期是`-3 600 000`毫秒（迟到 1 小时）
`java.util.Date(70,0,1).getTime() -> -3600000`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T00:43:09.637

我建议使用 TimeUnit

“TimeUnit 表示给定粒度单位的持续时间，并提供跨单位转换的实用方法，并在这些单位中执行计时和延迟操作。TimeUnit 不维护时间信息，而仅帮助组织和使用可能的时间表示在不同的上下文中单独维护。纳秒定义为千分之一微秒，微秒定义为千分之一毫秒，毫秒定义为千分之一秒，一分钟定义为六十秒，一小时定义为六十分钟，以及一天二十四小时。”

[http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html)

```
Date date = new Date();  // getting actual date
date = new Date (d.getTime() + TimeUnit.MINUTES.toMillis(1)); // adding one minute to the date 
```**

# c++ - 在没有数据的管道上打开 ifstream 而不会阻塞

> ID：15213013
> 
> 赞同：6
> 
> 时间：2013-03-04T23:18:29.137
> 
> 标签：c++, named-pipes, fstream, ifstream

我正在尝试使用 ifstream 打开一个命名管道，该管道最终将写入数据。

```
std::cout << "Opening " << name << std::endl;
std::ifstream manual_shutdown_file(name.c_str());
std::cout << "Opened " << name << std::endl; 
```

当我运行程序时，它会阻塞在`ifstream`构造函数中。我看到控制台打印了“Opening name”，但没有出现打开的语句。

我知道我正在连接到管道，因为如果我执行

```
$ echo foo > name 
```

从 shell 中，然后构造函数返回并打印 Opened 语句。即使我不想立即尝试读取它，在管道中包含数据之前是否无法打开管道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:35:09.213

调用`open`管道的读取端将阻塞，直到打开写入端。

您可以使用该`O_NONBLOCK`标志打开管道的文件描述符，但没有标准方法可以使用 fd `std::ifstream`，[请参见此处。](https://stackoverflow.com/questions/2746168/how-to-construct-a-c-fstream-from-a-posix-file-descriptor "看这里。")

根据您的要求猜测，我会说一个打开 fd 并提供轮询信号接口的小类将适合，例如：

```
namespace blah
{
class signal_t
{
private:
   int fd;

   // note: define sensible copy/move semantics
   signal_t(const signal_t&) = delete;
   signal_t& operator=(const signal_t&) = delete;
public:
   signal_t(const char* named_pipe);   // open fd, set O_NONBLOCK

   void notify() const;                // write 1 byte to fd as signal
   bool poll() const;                  // attempt to read from fd, return true if signalled.

   ~signal_t();                        // close fd
};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-06T01:27:37.510

由于通过块打开输入管道`ifstream`直到有人写信，你总是可以让`ifstream`块。然后从另一个线程解除阻塞，创建你自己的`ofstream`到同一个管道，然后立即关闭`ofstream`. 这将解除阻止`ifstream`并用 标记它`eof`。与弄乱文件句柄的平台特定控件相比，这更容易且更不容易出错。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-03-10T23:58:03.213

实际上，您可以`std::ifstream`在命名管道上打开 a 而不会阻塞写入器，但是您必须设置标志，就好像您也要写入流一样。

尝试`std::ifstream pipe_stream(filename, std::ifstream::in | std::ifstream::out)`，或`stream.open(filename, std::ifstream::in | std::ifstream::out)`。

# php - 在同一页面上输出表单的内容以供公众查看

> ID：15213020
> 
> 赞同：0
> 
> 时间：2013-03-04T23:18:57.040
> 
> 标签：php, javascript, forms, post

我正在尝试构建一个只有下拉选项的简单表单，例如

```
<select>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="opel">Opel</option>
  <option value="audi">Audi</option>
</select> 
```

我所需要的只是当用户选择其中一个选项时，该选项将自动提交（无需单击提交）并发布在同一页面上以供公开显示。不同用户的选择也应该是可见的，并且只是附加到以前用户的选择中。

例如：第一个用户选择沃尔沃，然后页面将显示

```
Volvo 
```

当第二个用户选择奥迪时，页面现在会将他的结果附加到前一个用户的结果中

```
Audi, Volvo 
```

因此，每个访问者都会看到前一个用户选择的内容。

等等。用户显示的选择数量应该有一个限制，比如 100 个，超过这个限制，原始选择将被截断。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:34:38.910

像这样尝试..在数据库中创建表，并在那里存储用户的选择。并在每次提交时将选择插入到该表中。当您显示页面时，请从您的表中选择按插入日期递减排序的限制，并在打印或查询之前按该选择过滤您的数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T23:32:38.620

你应该可以设置

```
 onchange() 
```

选择标签中的事件到提交​​（指向同一页面），然后使用传递的参数，您可以确定提交是否通过。

# r - 如何使用生成它的 R 调用自动为绘图命名？

> ID：15213021
> 
> 赞同：7
> 
> 时间：2013-03-04T23:18:58.827
> 
> 标签：r

R 的绘图非常适合数据探索，因为它通常具有非常智能的默认值。例如，当使用公式绘图时，绘图轴的标签来自公式。换句话说，以下两个调用产生相同的输出：

```
plot(x~y)
plot(x~y, xlab="x", ylab="y") 
```

有没有办法获得类似的“智能自动标题”？

例如，我想打电话

```
plot(x~y, main=<something>) 
```

并产生与调用相同的输出

```
plot(x~y, main="plot(x~y)") 
```

`<something>`插入使用某种内省的调用的位置。

通过某种标准机制或外部包在 R 中是否有这样做的工具？

编辑：一个建议是将公式指定为字符串，并将其作为参数提供给`formula()`调用以及`main`. 这很有用，但它遗漏了可能影响绘图的参数，例如使用数据子集。详细一点，我想

```
x<-c(1,2,3)
y<-c(1,2,3)
z<-c(0,0,1)
d<-data.frame(x,y,z)
plot(x~y, subset(d, z==0), main=<something>) 
```

达到同样的效果

```
plot(x~y, subset(d, z==0), main="plot(x~y, subset(d, z==0))") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T23:55:07.120

我认为如果不写一个薄包装就可以做到这一点`plot()`。原因是 R 在调用函数的评估框架中评估“提供的参数”，其中无法访问当前的函数调用（[详见此处](http://cran.r-project.org/doc/manuals/r-release/R-lang.html#Argument-evaluation)）。

相比之下，“默认参数”是在函数的评估框架中评估的，从那里*可以*进行自省。以下是几种可能性（只是您希望“myPlot”或“plot”出现在标题中不同：

```
## Function that reports actual call to itself (i.e. 'myPlot()') in plot title.
myPlot <- function(x,...) {
    cl <- deparse(sys.call())
    plot(x, main=cl, ...)
}

## Function that 'lies' and says that plot() (rather than myPlot2()) called it.
myPlot2 <- function(x,...) {
    cl <- sys.call()
    cl[[1]] <- as.symbol("plot")
    cl <- deparse(cl)
    plot(x, main=cl, ...)
}

## Try them out
x <- 1:10
y <- 1:10
par(mfcol=c(1,2))
myPlot(x,y)
myPlot2(y~x) 
```

这是一个更通用的解决方案：

```
plotCaller <- function(plotCall, ...) {
    main <- deparse(substitute(plotCall))
    main <- paste(main, collapse="\n")
    eval(as.call(c(as.list(substitute(plotCall)), main=main, ...)))
}

## Try _it_ out

plotCaller(hist(rnorm(9999), breaks=100, col="red"))

library(lattice)
plotCaller(xyplot(rnorm(10)~1:10, pch=16))

## plotCaller will also pass through additional arguments, so they take effect
## without being displayed
plotCaller(xyplot(rnorm(10)~1:10), pch=16) 
```

如果它们变得太长（默认为 60 个字符），deparse 将尝试中断已解析的行。当它这样做时，它会返回一个字符串向量。plot 方法假定 'main' 是单个字符串，因此该行`main <- paste(main, collapse='\n')`通过连接 deparse 返回的所有字符串来处理此问题，并使用`\n`.

这是一个必要的示例：

```
plotCaller(hist(rnorm(9999), breaks=100, col="red", xlab="a rather long label",
    ylab="yet another long label")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T00:08:30.703

您可能正在考虑`match.call`. 然而，这只在函数内部调用时才真正起作用，而不是作为参数传入。您可以创建将调用的包装函数，`match.call`然后将其他所有内容传递给`plot`或使用替代来捕获调用，然后在评估之前使用调用对其进行修改：

```
x <- runif(25)
y <- rnorm(25, x, .1)

myplot <- function(...) {
    tmp <- match.call()
    plot(..., main=deparse(tmp))
}

myplot( y~x )
myplot( y~x, xlim=c(-.25,1.25) )

## or

myplot2 <- function(FUN) {
    tmp1 <- substitute(FUN)
    tmp2 <- deparse(tmp1)
    tmp3 <- as.list(tmp1)
    tmp4 <- as.call(c(tmp3, main=tmp2))
    eval(tmp4)
}

myplot2( plot(y~x) )
myplot2( plot(y~x, xlim=c(-.25,1.25) ) ) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T23:23:58.333

当然有！给你：

```
x = rnorm(100)
y = sin(x)

something = "y~x"

plot(formula(something),main=something) 
```

![在此处输入图像描述](../Images/3571af2125a837562e5c2b81871d0129.png)

# ajax - 数据表未在 jsf 中使用 ajax 调用呈现

> ID：15213031
> 
> 赞同：2
> 
> 时间：2013-03-04T23:20:00.757
> 
> 标签：ajax, jsf-2, datatable

我有一个数据表，需要在使用每行中的 ajax 命令时刷新。

```
<div class="authorSection">
    <h:dataTable id="author-table" var="author" value="#{authorPOCBean.getauthors()}">
        <h:column>
            <f:facet name="header">
                <h:outputText value="Org Short Name" />
            </f:facet>
            <h:outputText id="authorOrganizationShortName" value="#author.orgShortName}" />
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:outputText value="Organization Name" />
            </f:facet>
            <h:outputText id="authorOrganizationName" value="#{author.orgName}" />
        </h:column>
        <h:column>                
            <f:facet name="header">
                <h:outputText value="Location" />                
            </f:facet>
            <h:outputText id="authorLocation" value="#{author.orgLocation}" />
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:outputText value="author Type" />
            </f:facet>
            <h:outputText id="authorType" value="#{author.authorName}" />
        </h:column>
        <h:column>
            <h:form id="deleteauthorForm">
                <h:commandLink action="#{authorPOCBean.deleteauthor(author)}" value="Delete">                    
                    <f:ajax render=":author-table"/>
                </h:commandLink>
            </h:form>
            <h:form id="setInitialauthorForm">
                <h:commandLink action="#{authorPOCBean.makeInitialauthor(author)}" value="Make Initial"/>                
            </h:form>
        </h:column>
    </h:dataTable>
</div> 
```

当使用删除功能时，它似乎保持表不变，或者可能用旧数据呈现它？我现在将其设置为被调用方法所做的第一件事是更改内部数组然后更改数据库内容，但它仍然使用旧数据。

我的代码有明显问题吗？

我查看了以下链接并尝试了建议，但没有新结果。事实上，如果我用表格包围表格，表格将无法正确构建。

[JSF- <f:ajax> 无法呈现数据表](https://stackoverflow.com/questions/6534296/jsf-fajax-cant-render-datatable)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:16:11.213

请注意，您已将 Delete Button 和 Make initial Buttons 放置在单独的表单中，而 DataTable 组件则放置在表单之外。

尝试从表格的开头开始使用一个表格。（即）您的表格组件和两个按钮应包含在同一个表单中

对于 Ajaxical 刷新，以下内容应该适合您。

```
 <f:ajax render="@form"/> 
```

如果由于其他原因您不能使用单个表单并需要多个表单，请参考这个问题 [如何在多表单页面中保留表单数据](https://stackoverflow.com/questions/10589907/how-to-retain-form-data-in-a-multi-form-page)

# scala - Akka中的硬重启指令？

> ID：15213032
> 
> 赞同：6
> 
> 时间：2013-03-04T23:20:13.510
> 
> 标签：scala, akka, actor

是否有一种优雅的方式来硬重启演员 - 即清除邮箱以及内部状态？

我知道这可以通过调用`context.stop`并重新初始化`DeathWatch / Terminated`消息来完成，但这有点笨拙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T18:19:06.240

不，清除邮箱正是终止参与者所做的事情。如果你在没有终止语义的情况下尝试这样做，你怎么能确定你清除了所有东西？新消息可能随时出现。

所以，要硬重启你

*   `Stop`从主管策略返回指令
*   然后在收到该演员的`Terminated`消息后创建一个新孩子。

# javascript - 用另一个按钮打开输入信息的提示框？

> ID：15213033
> 
> 赞同：0
> 
> 时间：2013-03-04T23:20:24.827
> 
> 标签：javascript, prompt, window.open, document.write

我的编码有问题

我正在尝试有一个提示框，要求输入姓名电话和地址。

输入所有信息后，将单击一个按钮并显示输入的所有信息。

到目前为止，这是我的代码：

```
 function openNewName()
    {
    var nm=prompt("Name");
    var ph=prompt("Phone Number")
    var add=prompt("Address")
    }

    function openNewNameInfo()
    {
    myWindow=window.open('','','width=300,height=150,top=200,left=500');
    myWindow.document.write(nm + ph + add);
    } 
```

所以我需要这部分的帮助：myWindow.document.write(nm + ph + add);

请我需要帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:27:43.803

你会这样做：

```
function openNewName() {
    var nm = prompt("Name");
    var ph = prompt("Phone Number");
    var add = prompt("Address");
    if (add) openNewNameInfo(nm, ph, add); //you could check for more values here
}

function openNewNameInfo(nm, ph, add) {
    myWindow = window.open('', '', 'width=300,height=150,top=200,left=500');
    myWindow.document.write("name : " +nm + "<br>Phone : "+ ph + "<br>Adress : " + add);
}

openNewName(); 
```

[**小提琴**](http://jsfiddle.net/adeneo/6j6HE/1/)

# delphi - “var”在字段声明上有什么区别？

> ID：15213038
> 
> 赞同：9
> 
> 时间：2013-03-04T23:21:24.273
> 
> 标签：delphi, syntax

`S`以下和的声明有什么区别`F`？

```
type
  TMyClass = class(TObject)
  private
    S: String;
  private var
    F: String;
  end; 
```

我问的原因是因为我可以使用与（不添加关键字）`S`相同的方式。`F``var`

他们的待遇不同吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T23:27:19.420

完全没有区别。根据[文档](http://docwiki.embarcadero.com/RADStudio/XE3/en/Fields)：

> var 关键字是可选的。但是，如果不使用它，则所有字段声明都必须出现在任何属性或方法声明之前。在任何属性或方法声明之后，var 可用于引入任何额外的字段声明。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-04T23:28:29.513

它们都是具有相同可见性的字段。

`var`当您在其他声明之后（如常量、内部类型甚至在方法和属性之后）声明字段时，有时需要该关键字。

例如：

```
type
  TMyClass = class
  private
    FSomeField: string; //<--- this is a field, here you don't need the var clause
    const
      SOME_CONSTANT = 1;
      OTHER_CONSTANT = 2;  
    var //<---- here you need the var clause to start declaring fields
      FSomeOtherField: string; 
  end; 
```

`var`第二种情况下需要该`FSomeOtherField`字段（支持嵌套类型或常量。

# c#-3.0 - 解析制表符分隔文件检测第一行值是否为空/制表符

> ID：15213039
> 
> 赞同：1
> 
> 时间：2013-03-04T23:21:25.147
> 
> 标签：c#-3.0

大家好，我需要解析一些文件以加载到 DataSet 中，但我遇到了第一行值有时为空白的问题，因此当我解析数据时，添加到列中的行已关闭，因为该行没有值[路线代码]。

示例 数据列位于第一行（制表符分隔） 数据行位于以下行（制表符分隔）
RouteCode City EmailAddress FirstName
NULL MyCity My-Email MyFirstName

我所看到的是所有列都添加得很好，但是没有检测到添加第一个选项卡值的每一行，因此它会移动列（希望我是有道理的）所以在这种情况下，城市数据位于 RouteCode 列和最后一个列以某种方式获取第一行值（选项卡）。

```
class TextToDataSet
{
    public TextToDataSet()
    { }

    /// <summary>
    /// Converts a given delimited file into a dataset. 
    /// Assumes that the first line    
    /// of the text file contains the column names.
    /// </summary>
    /// <param name="File">The name of the file to open</param>    
    /// <param name="TableName">The name of the 
    /// Table to be made within the DataSet returned</param>
    /// <param name="delimiter">The string to delimit by</param>
    /// <returns></returns>  
    public static DataSet Convert(string File,
     string TableName, string delimiter)
    {
        //The DataSet to Return
        DataSet result = new DataSet();

        //Open the file in a stream reader.
        using (StreamReader s = new StreamReader(File))
        {
            //Split the first line into the columns       
            string[] columns = s.ReadLine().Split(delimiter.ToCharArray());
            //Add the new DataTable to the RecordSet
            result.Tables.Add(TableName);
            //Cycle the colums, adding those that don't exist yet 
            //and sequencing the one that do.
            foreach (string col in columns)
            {
                bool added = false;
                string next = "";
                int i = 0;
                while (!added)
                {
                    //Build the column name and remove any unwanted characters.
                    string columnname = col + next;
                    columnname = columnname.Replace("#", "");
                    columnname = columnname.Replace("'", "");
                    columnname = columnname.Replace("&", "");
                    //See if the column already exists
                    if (!result.Tables[TableName].Columns.Contains(columnname))
                    {
                        //if it doesn't then we add it here and mark it as added
                        result.Tables[TableName].Columns.Add(columnname);
                        added = true;
                    }
                    else
                    {
                        //if it did exist then we increment the sequencer and try again.
                        i++;
                        next = "_" + i;
                    }
                }
            }
            //Read the rest of the data in the file.        
            string AllData = s.ReadToEnd();
            //Split off each row at the Carriage Return/Line Feed
            //Default line ending in most windows exports.  
            //You may have to edit this to match your particular file.
            //This will work for Excel, Access, etc. default exports.
            string[] rows = AllData.Split("\n".ToCharArray());
            //Now add each row to the DataSet        
            foreach (string r in rows)
            {

                //Split the row at the delimiter.
                string[] items = r.Split(delimiter.ToCharArray());
                //Add the item
                result.Tables[TableName].Rows.Add(items);
            }
        }

        //Return the imported data.        
        return result;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:28:25.933

如果文件中的任何地方都不应该有任何丢失的条目（即选项卡之间应该总是有一些东西），那么你可以使用：

```
string[] columns = s.ReadLine().Split(delimiter.ToCharArray(), StringSplitOptions.RemoveEmptyEntries); 
```

然后检查这`columns`不是一个空数组。如果是则读取下一行并进行处理：

```
while (columns.Length == 0)
{
    // Row is empty so read the next line out of the file
    columns = s.ReadLine().Split(delimiter.ToCharArray(), StringSplitOptions.RemoveEmptyEntries);
} 
```

这将确保您的数据始终以填充行开头。但是，如果列表下方有一个空条目，它将崩溃。

如果可能有空条目，那么您可能必须检查所有列是否为空：

```
while (columns.All(c => string.IsNullOrEmpty(c)))
{
    // Row is empty so read the next line out of the file
    columns = s.ReadLine().Split(delimiter.ToCharArray());
} 
```

# php - 正则表达式用字符串替换格式模板，以便结果是格式化的字符串

> ID：15213040
> 
> 赞同：3
> 
> 时间：2013-03-04T23:21:30.190
> 
> 标签：php, c++, regex, templates, string-formatting

基本上我有以下几点：

*   输入字符串（例如 ABCDEFGHI）
*   输入模板（例如 XXX-XXX-XXX）

我想看到的输出是`ABC-DEF-GHI`

我想它会像`"XXX-XXX-XXX".replace("regex", "ABCDEFGHI");`

问题是模板是动态的。它可能是`XXX-XXX-XXX`or`XX-XXXX-XXX`或任何其他可以包含任何特殊字符的组合，但要匹配的字符始终是`X`。

模板的长度或组数不受特殊字符分隔的限制。ie`XX-X-X`和`XXX-XXX-XXX-XXX-X`都是有效的模板，只要 X 的数量与输入字符的数量相同。

到目前为止，我有这个：`"/^([^a-zA-Z0-9]*X){9}[a-zA-Z0-9]*$/"`它将验证我的模板。

任何人都可以对此有所了解吗？有没有办法用字符串中的一个字符替换模板中的一个匹配字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:50:43.333

基本上你需要将你的简单模板转换成 REGEX，你可以用 REGEX 做到这一点：

I.**创建替换**：

*   搜索正则表达式`^X+(\W)X+(\W)X+$`替换为`\\1\1\\2\2\\3`
*   这将在这里转换`XXX-XXX-XXX`为`\1-\2-\3` [解释演示](http://regex101.com/r/hZ6yT9)

二、**创建匹配**：（两步）

1.  创建三个组：

    *   搜索正则表达式`^(X+)\W(X+)\W(X+)$`替换为`(\1)(\2)(\3)`
    *   这将在这里转换`XXX-XXX-XXX`为`(XXX)(XXX)(XXX)` [解释演示](http://regex101.com/r/fW6mJ3)
2.  将`X`'s 替换为点（`.`作为单个字符匹配），通过上述操作

    *   这将在这里转换`(XXX)(XXX)(XXX)`为`(...)(...)(...)` [解释演示](http://regex101.com/r/oQ3fI6)

现在您可以将新的匹配字符串`(...)(...)(...)`和新的替换字符串`\1-\2-\3`与输入字符串一起使用，`ABCDEFGHI`并在此处获得`ABC-DEF-GHI` [解释演示](http://regex101.com/r/yT5gZ6)

**注意：**我假设您的模板会将输入字符串分成 3 个部分，中间有 2 个*（可变）*特殊字符

## 更新：

如果模板有可变部分，您必须提前创建*匹配*和*替换*模式：
使用正则表达式：**计算**`\W`模板中的部分，然后创建匹配和替换模式。

# java - 在 playn 中更改 VECTOR_OUTLINE 颜色

> ID：15213043
> 
> 赞同：0
> 
> 时间：2013-03-04T23:21:56.643
> 
> 标签：java, playn, tripleplay

我正在尝试使用三重播放在 playn 中创建一个带有黑色轮廓的标签。此代码创建一个标签：

```
new Label("Label").addStyles(
    Style.COLOR.is(Color.white.getRGB()), 
    Style.OUTLINE_WIDTH.is(5f),
    Style.TEXT_EFFECT.is(TextEffect.VECTOR_OUTLINE)
) 
```

但我不知道如何更改轮廓颜色。唯一的样式设置`VECTOR_OUTLINE`似乎`OUTLINE_WIDTH`是`OUTLINE_CAP`和`OUTLINE_JOIN`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:04:05.317

用于`Style.HIGHLIGHT`指定轮廓颜色。

# c# - 在 C# 中的位图图像上写入文本

> ID：15213044
> 
> 赞同：3
> 
> 时间：2013-03-04T23:22:02.637
> 
> 标签：c#, .net, image

好吧，我尝试用 C# 在图像上写，我的代码是：

```
public string WriteOnImage(Bitmap Image, string NameImage, string TextFileName)

    {
        string Message = "OK";
        try
        {
            Bitmap bitMapImage = new Bitmap(Image);

            using (Graphics graphImage = Graphics.FromImage(Image))

            {

                graphImage.SmoothingMode = SmoothingMode.AntiAlias;

                string line;

                // Read the file and display it line by line.
                StreamReader file = new StreamReader(Resources.C_PATH_DESTINO_IMG + TextFileName);
                while ((line = file.ReadLine()) != null)
                {
                    graphImage.DrawString(line, new Font("Courier New", 15, FontStyle.Bold), SystemBrushes.WindowText, new Point(0, 0));
                    HttpContext.Current.Response.ContentType = "image/jpeg";
                    bitMapImage.Save(Resources.C_PATH_DESTINO_IMG + NameImage, ImageFormat.Jpeg);
                    graphImage.Dispose();
                    bitMapImage.Dispose();
                }

                file.Close();
            }
            return Message;
        }
        catch (Exception ex)
        {
            EventLogWrite("Error: " + ex.Message);
            return Message = ex.Message;
        }
    } 
```

此方法不起作用，因为没有在图像上写字，请帮助我。

PD：对不起，我的英语很糟糕，但我是拉丁裔 jeje，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T23:46:27.817

看起来您正在绘制错误的位图

```
 Bitmap bitMapImage = new Bitmap(Image);
 using (Graphics graphImage = Graphics.FromImage(Image)) 
```

应该

```
 Bitmap bitMapImage = new Bitmap(Image);
 using (Graphics graphImage = Graphics.FromImage(bitMapImage)) 
```

# asp.net - Kendo UI Mobile - 嵌套的远程视图 问题

> ID：15213045
> 
> 赞同：1
> 
> 时间：2013-03-04T23:22:02.933
> 
> 标签：asp.net, html, kendo-ui

有没有一种模式或我可以做些什么来正确加载远程 asp.net 视图？我的索引页面基本上如下所示：

索引页面可以正常使用`new kendo.mobile.Application(document.forms[0])`：

```
<form runat="server">
    <div data-role="view" id="indexPageInitialView"> ... </div>

    <div data-role="view" id="indexPageOtherView"> ... </div>
</form> 
```

远程查看页面问题：

```
<form runat="server">
    <div data-role="view" id="remoteView1"> ... </div>

    <div data-role="view" id="remoteView2"> ... </div>
</form> 
```

我知道 Kendo 加载的远程视图可以是 body 标签中的 [最多] 后代，所以我想我在这里被逼到了一个角落。

**更新** 当我尝试简单地加载用表单标记包围的远程视图时，我收到此错误：

```
Uncaught TypeError: Cannot call method 'getAttribute' of undefined kendo.all.min.js:9
kendo.initWidget kendo.all.min.js:9
w.extend._createView kendo.all.min.js:31
w.extend._createRemoteView kendo.all.min.js:31
(anonymous function) kendo.all.min.js:31
l jquery.min.js:2
c.fireWith jquery.min.js:2
T jquery.min.js:2
r 
```

如果我将表单标签嵌套在远程视图中，它可以工作，但是，这不是一个可行的解决方案。

**更新 2** 这是我的情况的更完整示例。

索引.aspx：

```
<!DOCTYPE html>

<html lang="en">
    <head>
        <title>Index</title>
    </head>

    <body>
        <form runat="server">
            <div id="indexPageInitialView" data-role="view">
                <div data-role="content">
                    <a href="remote.aspx" data-role="button">Load remote view</a>
                </div>
            </div>
        </form>

    <script src="jquery.min.js"></script>
    <script src="kendo.all.min.js"></script>

    <script>
        var app =  new kendo.mobile.Application(document.forms[0]);
    </script>
    </body>
</html> 
```

远程.aspx：

```
<!DOCTYPE html>

<html lang="en">
    <head>
        <title>Remote</title>
    </head>

    <body>
        <form runat="server">
            <div id="remoteView1" data-role="view">
                <div data-role="content">
                    <h1>Hi I am a remote view</h1>
                </div>
            </div>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:41:25.783

Kendo 将仅加载在远程视图中找到的第一个视图。因此，如果您正确调用远程视图，则应该加载**remoteView1 。**如果这不是您正在寻找的答案，请在 JSFiddle 中发布完整代码并附上更多描述。

# google-maps-sdk-ios - 添加按钮以查看由 markerInfoWindow 委托方法返回的视图

> ID：15213049
> 
> 赞同：12
> 
> 时间：2013-03-04T23:22:27.863
> 
> 标签：google-maps-sdk-ios

我目前正在通过将委托设置为 self 并使用以下代码，使用 google maps ios SDK 创建并返回自定义视图。

```
#pragma mark - GMSMapViewDelegate
-(UIView*)mapView:(GMSMapView *)mapView markerInfoWindow:(id<GMSMarker>)marker {
    int popupWidth = 200;
    int contentWidth = 180;
    int contentPad = 10;
    int popupHeight = 140;
    int popupBottomPadding = 16;
    int popupContentHeight = popupHeight - popupBottomPadding;
    int buttonHeight = 30;

    UIView *outerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, popupWidth, popupHeight)];

    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, popupWidth, popupContentHeight)];
    [view setBackgroundColor:[UIColor whiteColor]];

    UILabel *titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(contentPad, 0, contentWidth, 22)];
    [titleLabel setFont:[UIFont systemFontOfSize:17.0]];
    titleLabel.text = [marker title];

    UILabel *descriptionLabel = [[UILabel alloc] initWithFrame:CGRectMake(contentPad, 24, contentWidth, 20)];
    [descriptionLabel setFont:[UIFont systemFontOfSize:11.0]];
    descriptionLabel.text = [marker snippet];

    [view addSubview:titleLabel];
    [view addSubview:descriptionLabel];

    UIButton *directionButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    directionButton.frame = CGRectMake(contentPad, 45, contentWidth, buttonHeight);
    [directionButton setTitle:@"Directions" forState:UIControlStateNormal];
    [directionButton addTarget:self action:@selector(directionsPressed) forControlEvents:UIControlEventTouchDown];

    UIButton *viewLocationButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [viewLocationButton addTarget:self action:@selector(viewLocationPressed) forControlEvents:UIControlEventTouchUpInside];
    [viewLocationButton setTitle:@"View Location" forState:UIControlStateNormal];
    viewLocationButton.frame = CGRectMake(contentPad, 80, contentWidth, buttonHeight);

    // handle bottom dealio
    UIImage *bottomImage = [UIImage imageNamed:@"map-pointer-bottom"];
    UIImageView *bottomView = [[UIImageView alloc] initWithFrame:CGRectMake((popupWidth / 2) - (bottomImage.size.width / 2), (popupContentHeight), bottomImage.size.width, bottomImage.size.height)];
    [bottomView setImage:bottomImage];

    [outerView addSubview:view];
    [outerView addSubview:bottomView];
    [outerView addSubview:directionButton];
    [outerView addSubview:viewLocationButton];

    ListItem *li = (ListItem*)[marker userData];
    self.currentItem = li;
    NSLog(@"List Item %@ - %@", li.type, li.typeid);

    return outerView;
}

-(void)directionsPressed {
    NSLog(@"Directions Pressed");
}

-(void)viewLocationPressed {
    NSLog(@"Location View Pressed");
}

- (void)mapView:(GMSMapView *)mapView didTapInfoWindowOfMarker:(id<GMSMarker>)marker {
    NSLog(@"Tap Captured");
} 
```

当我点击自定义视图时，didTapWindowOfMarker 被触发，但按钮的目标方法都没有被触发。

为什么会这样？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-07T20:31:32.473

可能，正如 Google Maps Android API 文档中正式提到的那样，以下有关*infowindows*的限制也适用于 Google Maps iOS SDK：

信息窗口不是实时视图，而是将视图呈现为地图上的图像。因此，您在视图上设置的任何侦听器都将被忽略，并且您无法区分视图各个部分的点击事件。建议您不要在自定义信息窗口中放置交互式组件（例如按钮、复选框或文本输入）。

所以基本上点击信息窗口的任何部分只会触发“ **didTapWindowOfMarker** ”

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-11-18T15:43:58.190

**Swift 3.0 解决方案**

```
 //empty the default infowindow
        func mapView(_ mapView: GMSMapView, markerInfoWindow marker: GMSMarker) -> UIView? {
            return UIView()
        }

        // reset custom infowindow whenever marker is tapped
        func mapView(_ mapView: GMSMapView, didTap marker: GMSMarker) -> Bool {

            customInfoView.removeFromSuperview()
        //    customInfoView.button.addTarget(self, action: #selector(buttonTapped(_:)), for: .touchUpInside)
            self.view.addSubview(customInfoView)

            // Remember to return false
            // so marker event is still handled by delegate
            return false
        }

        // let the custom infowindow follows the camera
        func mapView(_ mapView: GMSMapView, didChange position: GMSCameraPosition) {
            if (locationMarker != nil){
                let location = locationMarker.position
                customInfoView.center = mapView.projection.point(for: location)
            }
        }

        // take care of the close event
        func mapView(_ mapView: GMSMapView, didTapAt coordinate: CLLocationCoordinate2D) {
            customInfoView.removeFromSuperview()
        } 
```

[![我已经像这样添加了 customInfoWindow](../Images/b71398c1615f3bc51ce86fa36a3f6714.png)](https://i.stack.imgur.com/On7eO.png)

并在具有 mapView 的同一控制器中制作此视图（customInfoWindow）的出口。

感谢这个开发人员[自定义和交互式googlemaps（IOS SDK）信息窗口，我从这个链接中得到了这个想法](http://kevinxh.github.io/swift/custom-and-interactive-googlemaps-ios-sdk-infowindow.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-18T04:55:21.960

我有一个 UView，我正在向视图添加一个委托，以便 UIButton 调用一个选择器。对于谷歌地图，我打电话时什么都不做

```
- (void) mapView:(GMSMapView *)mapView didTapInfoWindowOfMarker:(GMSMarker *)marker; 
```

但是，我将我的 infowindow（我的自定义视图）委托设置为 self，并在我按下链接到选择器的按钮时调用我的所有操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-29T17:32:20.393

**更新：**

这是我用来检测添加到我的 infoWindows 中的按钮的点击代码。我创建了一个带有 2 个假按钮的自定义 infoWindow（它们实际上可以被图像替换，因为它们不会触发任何操作），并且我在 infoWindow 上添加了一个带有 2 个真实按钮的完全透明的覆盖层。这些按钮将触发动作。

我使用一些委托方法或 KVC 以便在移动 infoWindow 本身时移动覆盖。

```
- (UIView *)mapView:(GMSMapView *)mapView markerInfoWindow:(GMSMarker *)marker {
    [self.actionOverlayCalloutView removeFromSuperview];
    UIView *calloutView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, infoWindowWidth, infoWindowHeight)];

    float offset = anchorSize * M_SQRT2;
    CGAffineTransform rotateBy45Degrees = CGAffineTransformMakeRotation(M_PI_4);
    UIView *arrow = [[UIView alloc] initWithFrame:CGRectMake((infoWindowWidth - anchorSize)/2.0, infoWindowHeight - offset, anchorSize, anchorSize)];
    arrow.transform = rotateBy45Degrees;
    arrow.backgroundColor = [UIColor lightGrayColor];
    [calloutView addSubview:arrow];

    UIView *contentView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, infoWindowWidth, infoWindowHeight - offset/2)];
    [contentView setBackgroundColor:[UIColor whiteColor]];

    contentView.layer.cornerRadius = 5;
    contentView.layer.masksToBounds = YES;

    contentView.layer.borderColor = [UIColor lightGrayColor].CGColor;
    contentView.layer.borderWidth = 1.0f;

    self.actionOverlayCalloutView =
    [NSKeyedUnarchiver unarchiveObjectWithData:[NSKeyedArchiver archivedDataWithRootObject:contentView]]; //hack to copy a view...
    self.actionOverlayCalloutView.backgroundColor = [UIColor lightGrayColorWithAlpha:0.5];
    self.actionOverlayCalloutView.layer.cornerRadius = 5;
    NSMutableArray *falseButtons = [NSMutableArray array];
    NSMutableArray *actionButtons = [NSMutableArray array];
    PointMapItem *pointAnnotation = marker.userData;
    if ([pointAnnotation canPerformSend]) {
        UIButton *button = [[UIButton alloc] init];
        [button setImage:[UIImage imageNamed:@"imageButton1.png"] forState:UIControlStateNormal];
        [falseButtons addObject:button];
        UIButton *activableButton = [[UIButton alloc] init];
        [activableButton addTarget:self action:@selector(onButton1Clicked) forControlEvents:UIControlEventTouchUpInside];
        [actionButtons addObject:activableButton];
    }
    if ([pointAnnotation canPerformShowDetails]) {
        UIButton *button = [[UIButton alloc] init];
        [button setImage:[UIImage imageNamed:@"imageButton1.png"] forState:UIControlStateNormal];
        [falseButtons addObject:button];
        UIButton *activableButton = [[UIButton alloc] init];
        [activableButton addTarget:self action:@selector(onButton2Clicked) forControlEvents:UIControlEventTouchUpInside];
        [actionButtons addObject:activableButton];
    }
    int buttonWidth = contentView.frame.size.width / [falseButtons count];
    int currentOffset = 0;
    for (int i=0; i<falseButtons.count; i++) {
        UIButton *falseButton = [falseButtons objectAtIndex:i];
        UIButton *activableButton = [actionButtons objectAtIndex:i];
        [falseButton setFrame:CGRectMake(currentOffset, 0, buttonWidth, contentView.frame.size.height)];
        currentOffset += buttonWidth;
        activableButton.frame = falseButton.frame;
        [activableButton setTitle:@"" forState:UIControlStateNormal];
        [self.actionOverlayCalloutView addSubview:activableButton];
        [contentView addSubview:falseButton];
    }
    [calloutView addSubview:contentView];

    CLLocationCoordinate2D anchor = [self.mapView.selectedMarker position];
    CGPoint point = [self.mapView.projection pointForCoordinate:anchor];
    point.y -= self.mapView.selectedMarker.icon.size.height + offset/2 + (infoWindowHeight - offset/2)/2;
    self.actionOverlayCalloutView.center = point;

    [self.mapView addSubview:self.actionOverlayCalloutView];
    return calloutView;
}

- (void)mapView:(GMSMapView *)pMapView didChangeCameraPosition:(GMSCameraPosition *)position {
    if (pMapView.selectedMarker != nil && self.actionOverlayCalloutView.superview) {
        CLLocationCoordinate2D anchor = [self.mapView.selectedMarker position];
        CGPoint point = [self.mapView.projection pointForCoordinate:anchor];
        float offset = anchorSize * M_SQRT2;
        point.y -= self.mapView.selectedMarker.icon.size.height + offset/2 + (infoWindowHeight - offset/2)/2;
        self.actionOverlayCalloutView.center = point;
    } else {
        [self.actionOverlayCalloutView removeFromSuperview];
    }
}

- (void)mapView:(GMSMapView *)mapView didTapAtCoordinate:(CLLocationCoordinate2D)coordinate {
    [self.actionOverlayCalloutView removeFromSuperview];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if ([keyPath isEqualToString:@"mapView.selectedMarker"]) {
        if (!self.mapView.selectedMarker) {
            [self.actionOverlayCalloutView removeFromSuperview];
        }
    }
}

- (void)onButton2Clicked {
    //your code
    self.mapView.selectedMarker = nil;
}

- (void)onButton1Clicked {
    // your code;
    self.mapView.selectedMarker = nil;
} 
```

**以前的帖子：**

看看这个线程，特别是#9，应该会有所帮助 [https://code.google.com/p/gmaps-api-issues/issues/detail?id=4961](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4961)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-11-24T06:13:57.060

1) 创建一个要在 infoWindow 中显示的子视图。

2）设置子视图的框架等于infoWindow视图的框架。

```
 [subView setFrame:infoview.frame];
  subView =  [[[NSBundle mainBundle] loadNibNamed:@"viewName" owner:self options:nil] objectAtIndex:0];
  [self.mapview addSubview:subView]; 
```

# java - Mojo 开发 - 处理多模块项目中未解决的依赖关系

> ID：15213052
> 
> 赞同：4
> 
> 时间：2013-03-04T23:22:42.460
> 
> 标签：java, maven, mojo

我有一个用@requiresDependencyResolution 测试注释的魔力。

它适用于具有单层嵌套的多模块项目，但用户报告了如下结构的问题。

```
 -- my_project
    |
    -- pom.xml
    -- submodule1
       |
       -- pom.xml
    -- submodule2
       |
       -- pom.xml
       -- submodule21
         |
         -- pom.xml
       -- submodule22
         |
         -- pom.xml 
```

如果 submodule21 依赖于 submodule1 maven 报告

> 无法在项目 submodule21 上执行目标：无法解析项目 org.my:submodule21:jar:1.0-SNAPSHOT 的依赖项：找不到工件 org.my:submodule1:jar:1.0-SNAPSHOT

删除 requiresDependencyResolution=test 注释可以防止此问题，但我无法访问运行 mojo 所需的信息。

从 github 上的surefire 代码的简要扫描来看，它看起来也使用 requiresDependencyResolution=test 但能够毫无问题地针对该项目运行。

[https://github.com/apache/maven-surefire/blob/master/maven-surefire-plugin/src/main/java/org/apache/maven/plugin/surefire/SurefirePlugin.java](https://github.com/apache/maven-surefire/blob/master/maven-surefire-plugin/src/main/java/org/apache/maven/plugin/surefire/SurefirePlugin.java)

[https://github.com/apache/maven-surefire/blob/master/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/AbstractSurefireMojo.java](https://github.com/apache/maven-surefire/blob/master/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/AbstractSurefireMojo.java)

与我自己的代码唯一明显的区别是它使用 java 注释而不是旧式 javadoc 注释。

万无一失的魔力是如何实现这一目标的？

我的代码是

[http://code.google.com/p/pitestrunner/source/browse/pitest-maven/src/main/java/org/pitest/maven/PitMojo.java](http://code.google.com/p/pitestrunner/source/browse/pitest-maven/src/main/java/org/pitest/maven/PitMojo.java)

示例项目显示问题

[http://code.google.com/p/pitestrunner/issues/detail?id=71](http://code.google.com/p/pitestrunner/issues/detail?id=71)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T18:57:46.397

为了其他遇到此问题的人的利益-我最终解决了这个问题。插件没有问题。

Surefire 和我自己的插件之间的区别只是它们的运行方式。Surefire 被绑定到测试阶段，我自己的插件是通过直接调用目标来运行的。当我将插件绑定到验证阶段时，一切都会毫无问题地解决。

# blogger - 为什么博主将我的新页面链接到主页？

> ID：15213053
> 
> 赞同：0
> 
> 时间：2013-03-04T23:22:45.993
> 
> 标签：blogger

这是我博客的链接：[点我](http://bmcc-ptk.blogspot.com/)

我不是这个博客的所有者，这是我第一次使用 Blogger 我所做的只是创建一个新页面并抛出一些我从网站上复制的代码

如果您注意到，Gallery 和 Home 在默认情况下都突出显示，并且它们都指向同一个目录。当我尝试从我的页面预览画廊时，它显示得很好。

问题不在于复制的代码，因为无论代码中有什么，只要我尝试创建页面，就会发生这种情况。

我在网站的源代码中发现了问题，但我不知道如何编辑它。

```
<ul>
<li class='selected'><a href='http://bmcc-ptk.blogspot.com/'>Home</a></li>
<li><a href='http://bmcc-ptk.blogspot.com/p/events-and-announcements.html'>Announcements</a></li>
<li><a href='http://bmcc-ptk.blogspot.com/p/minutes.html'>Minutes</a></li>
<li><a href='http://bmcc-ptk.blogspot.com/p/contact_09.html'>Contacts and Useful Links</a></li>
<li><a href='http://bmcc-ptk.blogspot.com/p/survey.html'>Survey</a></li>
<li class='selected'><a href='http://bmcc-ptk.blogspot.com/'>Gallery</a></li>
</ul> 
```

非常感谢您提供的任何建议或想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:58:47.847

登录博客

点击你的沼泽名称

去布局

你应该看到一个名为“pages”的方块，点击edit ...。

如果上述解决方案不起作用。

然后转到博客然后转到“页面”选项卡“（在帖子下方）并尝试编辑

如果您无法获得我写的内容，请回复我，我将通过图片向您展示。

# ios - Facebook auth.extendssoaccesstoken 错误代码 10

> ID：15213057
> 
> 赞同：5
> 
> 时间：2013-03-04T23:23:03.343
> 
> 标签：ios, facebook, facebook-ios-sdk

在我们的 Facebook 应用程序开发人员见解中，我们看到方法 auth.extendssoaccesstoken 的日常错误，错误代码为 10，“应用程序没有此操作的权限”。我们使用最新的 SDK，几乎完全实现了当前的 iOS 集成指南。在 Google、SO 和 Facebook 开发人员中搜索错误和/或与扩展令牌有关的任何内容均未提供任何结果。我应该在 Facebook 应用上启用什么功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T22:28:04.973

在进一步调查 Facebook SDK 源之后，我相信我有一个可靠的领先优势。

1.  我们的一些（不是全部）用户收到此错误
2.  之前的行为`auth.extendSSOAccessToken`取决于应用程序接收到用户的“offline_access”权限。
3.  facebook-ios-sdk 在其代码的任何地方都不会触及“offline_access”权限。
4.  扩展访问令牌的应用程序“没有权限”表明该方法仍然依赖于应用程序获得“offline_access”权限。唯一的变化是这现在默默地发生了。

结论：在许多不同的身份验证方法之一中，应用程序没有被授予“offline_access”权限。iOS SDK 尝试通过以下方式进行身份验证：

1.  iOS 集成 Facebook 对话框
2.  iOS Facebook App“快速应用切换”
3.  通过 Safari 登录
4.  Facebook SDK UIView 登录对话框

4 似乎已经过时且不太可能，我们得到约 17% 的错误率，这将其缩小到 1 或 3，因为 2 肯定仍然被广泛使用。

待进一步分析后更新。

**更新 1** 使用 Facebook 的见解和我们的 git 历史记录，我相信当用户使用 iOS6 集成 Facebook 对话框（方法 1）进行身份验证时会出现问题。得出结论是因为在 iOS6 发布后 Facebook Developer Insights 上出现了错误，我们发布了使用 SDK 3.1 的应用程序版本

测试后会更新

# ruby-on-rails - 简单的 Rails 3 查询不加载数据

> ID：15213058
> 
> 赞同：0
> 
> 时间：2013-03-04T23:23:03.947
> 
> 标签：ruby-on-rails

我遇到了一个问题，即没有从数据库返回记录。没有错误被抛出，但也许我错过了一些简单的东西。我将用于开发、测试和生产的数据库 yml 设置为相同的内容，只是为了确保我的目标是有问题的数据库。

直接从数据库中查询返回 3 个机构。

**模型-机构.rb**

```
class Institution < ActiveRecord::Base
  # attr_accessible :title, :body
  has_many :childinstitutions, :class_name => "Institution",
      :foreign_key => "parentinstitution_id"
  belongs_to :parentinstitution, :class_name => "Institution"

  def self.search(term)
    if term
      Institution.where('institutionname LIKE ?', :term).all
    else
      Institution.all
    end
  end
end 
```

**控制器 - 机构_controller.rb**

```
class InstitutionsController < ApplicationController
  def index
    @institutions = Institution.search(params[:term])

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @institutions }
    end
  end

  def show
    @institution = Institution.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @institution }
    end
  end

  def new
    @institution = Institution.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @institution }
    end
  end
end 
```

**查看 - 机构/index.html.erb**

```
<h1>Listing Institutions</h1>

<table>
  <tr>
    <th>Id</th>
    <th><% @institutions.length %> records</th>
  </tr>

<% for institution in @institutions %>
  <tr>
    <td><% institution.id %></td>
    <td></td>
  </tr>
<% end %>
</table>

<br /> 
```

**结果** A 非常大的**Listing Institutions**和Id 记录在下一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:24:43.323

我现在已经这样做了几次，如果有人遇到类似的问题，我的问题必须处理**View 部分**。这里是 RTFM 的一个严重案例。要显示到屏幕的引用字段应具有 <%= 而不是 <%。

**更新视图**

```
<h1>Listing Institutions</h1>

<table>
  <tr>
    <th>Id</th>
    <th></th>
    <th><%= @institutions.length %> records</th>
  </tr>

<% for institution in @institutions %>
  <tr>
    <td><%= institution.id %></td>
  </tr>
<% end %>
</table>

<br /> 
```

# c++ - 将临时 std::string 传递给 boost::regex_match

> ID：15213062
> 
> 赞同：2
> 
> 时间：2013-03-04T23:23:42.963
> 
> 标签：c++, regex, boost

我想将一串整数对解析为数字。我使用这段代码：

```
#include <iostream>
#include <boost/regex.hpp>

int main()
{
    boost::regex reg( "(\\d+):(\\d+)" );

    std::string test = "1:2 3:4 5:6";

    boost::sregex_token_iterator end;
    for( boost::sregex_token_iterator i( test.begin(), test.end(), reg ); i != end; ++i ) {
        boost::smatch what;
        if( boost::regex_match( i->str(), what, reg ) )
            std::cout << "found: \"" << what[1].str() << "\":\"" << what[2].str() << "\"" << std::endl;
    }

    return 0;
} 
```

预期输出：

```
found: "1":"2"
found: "3":"4"
found: "5":"6" 
```

我用 gcc 4.7.2 编译的 boost 1.52 得到了什么：

```
found: "2":"2"
found: "4":"4"
found: "6":"6" 
```

提升 1.52 铿锵 3.2：

```
found: "":"2"
found: "":"4"
found: "":"6" 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T01:38:02.900

感谢弗雷泽的提示，一种可能的解决方案是：

```
for( boost::sregex_token_iterator i( test.begin(), test.end(), reg ); i != end; ++i ) {
    boost::smatch what;
    const std::string &str = i->str(); 
    if( boost::regex_match( str, what, reg ) )
       std::cout << "found: \"" << what[1].str() << "\":\"" << what[2].str() << "\"" << std::endl;
} 
```

所以问题来自 i->str() 调用 boost::sub_match 方法的事实：

```
basic_string<value_type> str()const; 
```

它按值返回 std::string 。因此，传递给 regex_match 和 boost::smatch 对象的临时性 std::string 实际上会记住原始字符串中的位置，这实际上在 boost::regex_match 完成后被销毁。类似的问题可以这样重现：

```
std::string function();
boost::smatch what;
if( boost::regex_match( function(), what, reg ) ) ... 
```

或者我相信这样的代码也很容易受到攻击：

```
boost::smatch what;
if( boost::regex_match( std::string( "abc" ), what, reg ) ) ... 
```

我不确定如何在编译时防止这种情况，是否应该将其视为错误。std::regex_match 似乎具有相同的签名，那里存在这个问题吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T23:50:45.487

我不知道 Boost 现在有什么细节，但我认为它不会影响这一点。我也不知道为什么在调用 之后你会得到时髦的结果`regex_match`，但这不是必需的；`token_iterator`已经完成了那场比赛，所以你只需要

```
std::cout << (*i)[1].str() << ':' << (*i)[2].str() << std::endl; 
```

或者，如果您愿意：

```
std::cout << i->str(1) << ':' << i->str(2) << std::endl; 
```

请注意，这是 C++11。它也应该适用于 Boost，但我还没有尝试过。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T00:24:02.750

我不确定 Boost.Regex 的实现细节，但似乎将循环`sregex_token_iterator`内的取消引用复制`for`到临时`std::string`解决了这个问题：

```
std::string copied( i->str() );
boost::smatch what;
if( boost::regex_match( copied, what, reg ) ) {
    std::cout << "found: \"" << what[1].str() << "\":\"" << what[2].str() << "\"" << std::endl;
} 
```

希望对 Boost.Regex 有更好了解的人可以给出更好的答案。

# objective-c - 如果数字大于但小于

> ID：15213063
> 
> 赞同：-5
> 
> 时间：2013-03-04T23:23:43.803
> 
> 标签：objective-c

我有一个 NSTimer，我想检测我的计时器是否大于但小于特定数字..

```
if (MainInt is between 10-25) {
    NSLog(@"level1");
} 
```

我试过类似的东西

```
if (MainInt <= 25 && MainInt >= 10) {
    NSLog(@"level1");
} 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-03-04T23:26:45.133

在最坏的情况下，您可以使用 2 个 if 语句：

```
if (MainInt < 25) {
   if(MainInt > 10){
       NSLog(@"level1");
    }
} 
```

这样您就可以确定错误不是来自您的 IF 语句

# mysql - MyISAM 与 InnoDB 简单更新性能对比

> ID：15213064
> 
> 赞同：0
> 
> 时间：2013-03-04T23:23:50.033
> 
> 标签：mysql

我有以下查询：

`UPDATE `users` SET `time-spent-online` = `time-spent-online` + 10 WHERE `id` = 1`

MyISAM 表执行哪个：

`1 row affected. ( Query took 0.0008 sec )`

对于`InnoDB`表执行：

`1 row affected. ( Query took 0.0174 sec )`

InnoDB 这么慢是正常的吗？我应该改用 MyISAM 吗？我害怕 MyISAM 的表锁定。如果我有 1000 个用户，并且每 10 秒为每个在线用户执行一次此查询会怎样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:29:20.003

InnoDB 不应该比 MyIsam 慢很多。尝试进行更多更新并计算查询所用的平均时间。只有一个查询的时间不是那么准确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:35:13.727

关于我对 MyISAM 和 InnoDB 的了解：

MyISAM 是一个不支持事务的引擎，不对数据强制执行任何类型的参照完整性，也不允许使用事务（这使得 MyISAM 可以非常快速地存储数据，但由您决定是否保留参照完整性*手工*清洁）。InnoDB 确实支持事务和引用完整性，但代价是它（有点）比 MyISAM 慢。

简单的问题：

1.  您需要参照完整性吗？
2.  你需要使用交易吗？（回滚）

如果您对前面的任何问题的回答都是肯定的，那么 InnoDB 就是您要走的路。

# java - Java JUnit 参数化错误

> ID：15213068
> 
> 赞同：13
> 
> 时间：2013-03-04T23:24:05.773
> 
> 标签：java, unit-testing, junit, parameterized

我正在创建一个基于 JRE 6 的 Java 应用程序。我使用 JUnit 4 来生成参数化测试。我收到此错误：

```
注解@Parameterized.Parameters 必须定义属性值
```

在包含注释的行上：

```
@Parameterized.Parameters 
```

以下是我认为与此问题相关的代码：

```
import static org.junit.Assert.assertEquals;

import java.util.Arrays;
import java.util.Collection;

import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;

import calc.CalculatorException;
import calc.ScientificCalculator;

@RunWith(Parameterized.class)
public class ScientificCalculatorTest extends BasicCalculatorTest{

    /** Provides an interface to the scientific features of the calculator under test */
    private ScientificCalculator sciCalc;
    private double a, b;

    @Before
    @Override
    public void setUp() throws Exception {
        sciCalc = new ScientificCalculator();
        //Make sure that the basic functionality of the extended calculator
        //hasn't been broken.
        theCalc = sciCalc;
    }

    /**
     * Constructor. Is executed on each test and sets the test values to each pair in the data sets.
     * @param nr1 the first number in the tested pair.
     * @param nr2 the second number in the tested pair.
     */
    public ScientificCalculatorTest(double nr1, double nr2){
        a = nr1;
        b = nr2;
    }

    @Parameterized.Parameters
    public static Collection<Object[]> testGenerator() {
        return Arrays.asList(new Object[][] {
                //General integer values | -/+ combinations
                {  -100,  -100},
                {  -100,   100},
                {   100,  -100},
                {   100,   100}
        });
    } 
```

我设法找到了一些相关的问题，例如[this](https://stackoverflow.com/questions/7594582/annotation-attributes-with-type-parameters)。可悲的是，在我的情况下，他们没有帮助。

我尝试过但没有奏效的方法：

*   从类声明中删除“扩展 BasicCalculatorTest”

*   添加使用 @Test 注解的测试函数

*   导入 org.junit.runners.Parameterized 并使用 @Parameters 而不是 @Parameterized.Parameters

我需要提一下，我在另一个项目中使用了非常相似的实现（最值得注意的是注释和 testGenerator()），没有任何问题。该实现遵循在线可用的教程，例如[this](http://isagoksu.com/2009/development/agile-development/test-driven-development/using-junit-parameterized-annotation/)、[this](http://www.mkyong.com/unittest/junit-4-tutorial-6-parameterized-test/)和[this](https://blogs.oracle.com/jacobc/entry/parameterized_unit_tests_with_junit)。

非常感谢任何有关解决此错误的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:58:29.333

尝试这个：

```
import java.util.Arrays;
import java.util.Collection;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import org.junit.runners.Parameterized.Parameters;
public class So15213068 {
    public static class BaseTestCase {
        @Test public void test() {
            System.out.println("base class test");
        }
    }
    @RunWith(Parameterized.class) public static class TestCase extends BaseTestCase {
        public TestCase(Double nr1,Double nr2) {
            //super(nr1,nr2);
            this.nr1=nr1;
            this.nr2=nr2;
        }
        @Test public void test2() {
            System.out.println("subclass test "+nr1+" "+nr2);
        }
        @Parameters public static Collection<Object[]> testGenerator() {
            return Arrays.asList(new Object[][]{{-100.,-100.},{-100.,100.},{100.,-100.},{100.,100.}});
        }
        double nr1,nr2;
    }
} 
```

输出：

```
subclass test -100.0 -100.0
base class test
subclass test -100.0 100.0
base class test
subclass test 100.0 -100.0
base class test
subclass test 100.0 100.0
base class test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T09:48:54.293

我认为您错过了以下导入。

```
import org.junit.runners.Parameterized.Parameters; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T14:38:14.193

一定是因为你扩展了 BaseTestCase。我复制了您的代码，而没有从测试正确运行的基类扩展。

尝试在您的设置中调用 super.setUp()

例如

```
@Before
@Override
public void setUp() throws Exception {
    super.setUp();
    sciCalc = new ScientificCalculator();
    //Make sure that the basic functionality of the extended calculator
    //hasn't been broken.
    theCalc = sciCalc;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-11-18T12:14:20.753

我遇到了同样的问题，我正在从一个测试超类扩展我的测试，该测试超类有一个用 @org.junit.Before 注释的 init() 方法。
我在子类中实现了一个测试并运行它，到目前为止一切都很好。
然后我想使用参数化的注释来重复测试不同的值，所以我使用@ParameterizedTest 和@ValueSource 并运行测试但它没有工作，因为晚餐类中的初始化方法没有执行。
我覆盖了子类中的 init() 方法并调用了 super.init() 但它不起作用。
一个可行的解决方案是在子类的测试开始时调用 super.init() 。
我认为这是一个兼容性问题，因为每次我在同一个测试类中混合 JUnit4 和 JUnit5 注释时都会发生错误。

# c++ - C++ 中 std::is_trivially_copy_constructible 中的琐碎操作是什么

> ID：15213073
> 
> 赞同：16
> 
> 时间：2013-03-04T23:24:20.233
> 
> 标签：c++, c++11, typetraits

[以下是cppreference.com上 std::is_copy_constructible (1) 和](http://cppreference.com)[std::is_trivially_copy_constructible](http://en.cppreference.com/w/cpp/types/is_copy_constructible) (2)文档的摘录：

> 1) 检查一个类型是否是 CopyConstructible，即是否具有可访问的显式或隐式复制构造函数。如果满足要求，则提供等于 true 的成员常量值，否则为 false。
> 
> 2) 同(1)，但复制构造函数表达式不调用任何不平凡的操作。

那么这里认为什么是微不足道的操作呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-04T23:36:07.483

正如我[之前](https://stackoverflow.com/a/7189821/46642)所说：

> 那么，所有这些琐碎和不平凡的事情是什么？
> 
> > 类 X 的复制/移动构造函数是微不足道的，如果它不是用户提供的，并且如果
> > 
> > — X 类没有虚函数 (10.3) 和虚基类 (10.1)，并且
> > 
> > — 选择复制/移动每个直接基类子对象的构造函数是微不足道的，并且
> > 
> > — 对于 X 的每个类类型（或其数组）的非静态数据成员，选择复制/移动该成员的构造函数是微不足道的；
> > 
> > 否则复制/移动构造函数是不平凡的。
> 
> 基本上，这意味着如果不是用户提供的，复制或移动构造函数是微不足道的，该类中没有任何虚拟内容，并且该属性对类的所有成员和基类递归地保持。

# objective-c - iPad 应用程序中的单点登录 - 目标 c

> ID：15213075
> 
> 赞同：0
> 
> 时间：2013-03-04T23:24:26.973
> 
> 标签：objective-c, ipad, single-sign-on

我想通过在我们正在开发的 iPad 应用程序之一中使用我们组织中可用的活动目录来实现单点登录。它应该类似于我们在 Web 应用程序中所做的单点登录。我们在 iPad 中使用 VPN 连接连接到组织的 Intranet。有没有一种方法可以在 iPad 应用程序中验证和授权连接到组织的活动目录？对此的任何建议都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T07:43:23.470

这可能有助于在目标 C 中实现相同的目标。

[EWS - 如何为自动发现传递凭据 - ios、可可](https://stackoverflow.com/questions/18766985/ews-how-to-pass-credentials-for-autodiscover-ios-cocoa)

希望这可以帮助你..

# github - 如何判断 GitHub 拉取请求是否已发布？

> ID：15213081
> 
> 赞同：10
> 
> 时间：2013-03-04T23:24:43.597
> 
> 标签：github

在搜索问题时遇到拉取请求是很常见的。但是有一段时间让我感到困惑的是如何（可靠地）确定该拉取请求是否/何时发布。任何人都知道一个简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-24T08:29:49.500

我也经常有这个需求。我正在这样做：

*   从 github 上的 pull request 中的最新提交中获取 id
*   在本地克隆存储库
*   跑`git tag --contains [commit_id]`

但是如果github提供了一个更简单的方法那就太好了！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-03-24T19:36:48.730

在合并拉取请求的页面上，向下滚动直到找到合并提交。它看起来像这样： [![在拉取请求历史记录中合并提交。](../Images/e7cec6a96de80010685d2d0ad19a6cb3.png)](https://i.stack.imgur.com/r8mbJ.png)

单击提交 ID 以到达提交的页面。在此页面的顶部，您可以找到包含此提交的存储库中的哪些标签*！:) 它看起来像这样： [![提交页面的顶部框。](../Images/41f659c33c05530aa4962d15ec53e3ee.png)](https://i.stack.imgur.com/UFVe7.png)

* 这可能仅适用于实际 GitHub 版本的标签，我不确定这两者之间的分离程度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T05:37:18.223

没有标准化的方法。许多组织良好的项目为此目的使用标签（即[https://github.com/mitsuhiko/flask/tags](https://github.com/mitsuhiko/flask/tags)），它指定哪个提交对应于哪个版本

# c++ - c++直方图bin排序

> ID：15213082
> 
> 赞同：2
> 
> 时间：2013-03-04T23:24:58.893
> 
> 标签：c++, histogram, bin

我正在编写一个函数来克隆 Excel 中数据分析加载项的直方图功能。基本上，提供了样本数据的输入，然后还提供了 bin 范围。bin 范围必须单调增加，在我的情况下，需要具体为 [0 20 40 60 80 100]。如果样本大于下限（左边缘）且小于或等于上限（右边缘），Excell 会计算样本是否落入 bin 范围。

我在下面编写了 bin 排序算法，它为 data0 提供了不正确的输出（非常接近），但为 data1 和 data2 提供了正确的输出。在这种情况下，正确意味着该算法的输出与 Excell 生成的表中的输出完全匹配，其中样本数与 bin 相邻。任何帮助表示赞赏！

```
#include <iostream>

int main(int argc, char **agv)
{
    const int SAMPLE_COUNT      = 21;
    const int BIN_COUNT         = 6;
    int binranges[BIN_COUNT]    = {0, 20, 40, 60, 80, 100};
    int bins[BIN_COUNT]         = {0, 0, 0, 0, 0, 0};

    int data0[SAMPLE_COUNT] =  {4,82,49,17,89,73,93,86,74,36,74,55,81,61,88,94,72,65,35,25,79};
    // for data0 excell's bins read:
    // 0    0
    // 20   2
    // 40   3
    // 60   2
    // 80   7
    // 100  7
    //
    // instead output of bins is: 203277

    int data1[SAMPLE_COUNT] = {88,83,0,0,95,86,0,94,92,77,94,73,93,90,50,95,93,83,0,95,91};
    //for data1 excell and this algorithm both yield:
    // 0    4
    // 20   0
    // 40   0
    // 60   1
    // 80   2
    // 100  14  (correct)

    int data2[SAMPLE_COUNT] = {58,48,75,68,85,78,74,83,83,75,67,58,75,58,84,68,57,88,55,79,72};
    //for data2 excell and this algorithm both yield:
    // 0    0
    // 20   0
    // 40   0
    // 60   6
    // 80   10
    // 100  5   (correct)

    for (unsigned int binNum = 1; binNum < BIN_COUNT; ++binNum)
    {
        const int leftEdge = binranges[binNum - 1];
        const int rightEdge = binranges[binNum];

        for (unsigned int sampleNum = 0; sampleNum < SAMPLE_COUNT; ++sampleNum)
        {
            const int sample = data0[sampleNum];

            if (binNum == 1)
            {
                if (sample >= leftEdge && sample <= rightEdge)
                    bins[binNum - 1]++;
            }
            else if (sample > leftEdge && sample <= rightEdge)
            {
                bins[binNum]++;
            }
        }
    }

    for (int i = 0; i < BIN_COUNT; ++i)
        std::cout << bins[i] << " " << std::flush;

    std::cout << std::endl << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T23:39:22.283

假设边缘总是按递增顺序排列，您只需要：

```
 unsigned int bin;
    for (unsigned int sampleNum = 0; sampleNum < SAMPLE_COUNT; ++sampleNum)
    {
           const int sample = data0[sampleNum];
           bin = BIN_COUNT;
           for (unsigned int binNum = 0; binNum < BIN_COUNT; ++binNum)  {
                 const int rightEdge = binranges[binNum];
                 if (sample <= rightEdge) {
                    bin = binNum;
                    break;
                }
           }
           bins[bin]++;
      } 
```

虽然，要使此代码正常工作，您需要为等于或低于第一条边 ( `0`) 的值再添加一个 bin。

合理的是，如果你有 n 个分隔符，那么你就有 n+1 个间隔。

# javascript - 滑块需要多次单击才能滚动

> ID：15213087
> 
> 赞同：0
> 
> 时间：2013-03-04T23:25:22.107
> 
> 标签：javascript, jquery

我在使用[BJQS](http://basic-slider.com/)滑块时遇到了一些问题。似乎初始化没有正确进行。在滑块开始滚动之前需要单击几下。谁能确定我做错了什么？或者这是插件中的错误？

**HTML**

```
<div id="dialog">
    <ul class="bjqs">
        <li class="slide">One</li>
        <li class="slide">Two</li>
        <li class="slide">Three</li>
        <li class="slide">Four</li>
        <li class="slide">Five</li>
        <li class="slide">Six</li>
        <li class="slide">Seven</li>
    </ul>
</div> 
```

**JS**

```
$(function(){    
$('#dialog').bjqs({
        'showmarkers':false,
        'responsive':true,
        'randomstart':true,
        'automatic':false
});
}); 
```

这是[jsfiddle](http://jsfiddle.net/XJH9X/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:57:58.417

问题是当滑块初始化时所有的幻灯片都是可见的。

查看更新的小提琴：http: [//jsfiddle.net/XJH9X/4/](http://jsfiddle.net/XJH9X/4/)

这意味着看起来需要点击几下才能开始，但实际情况是其中一张幻灯片显示在其他幻灯片之上。

快速修复 - 只需将幻灯片默认设置为隐藏，滑块将负责显示正确的幻灯片：

```
.slide{
    background:#ccc;
    height:300px;
    width:400px;
    display: none;
} 
```

# node.js - 根据数组元素查找对象，只返回匹配的数组元素？

> ID：15213089
> 
> 赞同：6
> 
> 时间：2013-03-04T23:25:38.530
> 
> 标签：node.js, mongodb, mongoose

我在猫鼬中有一个 Person 对象，并且该 person 对象有多个东西（每个东西都有一个唯一的 ID）。

```
person1 = {
  things[{id: 1, name: 'one'},{id:2, name: 'two'}]
}
person2 = {
  things[{id: 3, name: 'three'},{id:4, name: 'four'}]
} 
```

然后查询：

```
Person.findOne({'things.id': 2},{'things.$': 1}, function(err, person) { ... 
```

这很好用，但我正在搜索所有 Person 对象（可能有很多）。在这种情况下，我知道我需要的人的 id 和“事物”的一些唯一 id。通过 id 获取 Person 可能要快得多：

```
Person.findById(personId, function(err, person) { ... 
```

然后遍历所有内容以找到正确的内容：

```
var thing
person.things.forEach(function(t) {
  if (t.id == thingId) {
    thing = t;
  }
}); 
```

我想知道是否有更好的方法。IE 我可以通过 id 查询 Person 集合以获取一个 Person 然后过滤掉我正在寻找的东西（没有丑陋的循环）吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-05T02:34:07.517

您可以在单个查询中包含两个 id 术语，并且单个元素投影仍然有效：

```
Person.findOne({_id: personId, 'things.id': 2}, {'things.$': 1}, 
    function(err, person) { ... 
```

# python - 如何使用 python 提取推送到标准输出的数据？

> ID：15213090
> 
> 赞同：0
> 
> 时间：2013-03-04T23:25:40.390
> 
> 标签：python, linux, stdout, angstrom-linux

我正在尝试编写一些脚本，但是我拥有的实用程序之一将一个值返回到标准输出，我想将它分配给一个变量。

实用程序 (candump) 不断运行，仅在接收数据时打印到标准输出。

```
import threading
from subprocess import call
import time

class ThreadClass(threading.Thread):
  def run(self):
    call(["candump","can0"])

t = ThreadClass()
t.start()
time.sleep(1)
call(["cansend", "can0", "-i", "0x601", "0x40", "0xF6", "0x60", "0x01", "0x00", "0x00", "0x00", "0x00"]) 
```

它返回以下值，我想在我的 python 脚本中使用它们：

```
<0x601> [8] 40 f6 60 01 00 00 00 00
<0x581> [8] 4b f6 60 01 96 08 00 00 
```

关于 candump 的文档（将数据转储到标准输出的内容）[很少](http://git.pengutronix.de/?p=tools/canutils.git;a=blob;f=man/candump.8;h=cd11f8906500705716d0733c1b411253125e5511;hb=HEAD)

有没有办法可以利用标准输出并抓取数据？

对不起，如果这非常明显......一点一点地学习 Linux。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:28:53.337

如果您不期待大量的输出或不介意一次阅读它，您可以使用`subprocess.check_output`：

```
>>> import subprocess
>>> print subprocess.check_output(['ls', '/etc'])
adjtime
adobe
anacrontab
apparmor.d
arch-release
ati
at-spi2
avahi
axelrc
bash.bash_logout 
```

如果您确实需要逐行阅读，请查看以下问题：[read subprocess stdout line by line](https://stackoverflow.com/questions/2804543/read-subprocess-stdout-line-by-line)

# asp.net-mvc-4 - “enableSimpleMembership”=“true”的等效 web.config 配置是什么：

> ID：15213093
> 
> 赞同：3
> 
> 时间：2013-03-04T23:25:55.947
> 
> 标签：asp.net-mvc-4, web-config, roleprovider, simplemembership

Web.Config 中成员资格和角色提供程序的等效配置是什么：

```
<appSettings>
  <add key="enableSimpleMembership" value="true" />
</appSettings> 
```

在 ASP.NET MVC 4 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T23:25:55.947

web.config 的等效配置为：

```
<appSettings>
  <add key="enableSimpleMembership" value="false" /><!-- false is default if key is not present -->
</appSettings>
<connectionStrings>
  <add name="DefaultConnection" connectionString="..." providerName="System.Data.SqlClient" />
</connectionStrings>
<system.web>
  <membership defaultProvider="SimpleMembershipProvider">
    <providers>
      <add name="SimpleMembershipProvider" type="WebMatrix.WebData.SimpleMembershipProvider" />
    </providers>
  </membership>
  <roleManager defaultProvider="SimpleRoleProvider" enabled="true">
    <providers>
      <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider" />
    </providers>
  </roleManager>
</system.web> 
```

# android - 带有声音的Android按钮创建中的内存错误

> ID：15213095
> 
> 赞同：0
> 
> 时间：2013-03-04T23:25:58.533
> 
> 标签：android, media-player

我现在正在制作一个应用程序，它根据我按下的按钮播放声音，问题是我有 100 个按钮和 100 种不同的声音，过了一会儿它会破坏内存并崩溃给我 (-19,0) 错误是我的代码，你能告诉我如何避免这种情况吗？谢谢

```
 package com.example.buttonsdemo;

    import android.media.MediaPlayer;
    import android.os.Bundle;
    import android.app.Activity;
    import android.support.v4.widget.SimpleCursorAdapter.ViewBinder;
    import android.util.Log;
    import android.view.Menu;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.Toast;

    public class MainActivity extends Activity implements View.OnClickListener{

        //Creating Sound arrays 
        MediaPlayer[] mediaplayer = new MediaPlayer[200];
        int i = 0;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            //Creating Button Array
            Button button[] = new Button [200]; 
            mediaplayer[1]= MediaPlayer.create(this,R.raw.alistar);
            mediaplayer[0]= MediaPlayer.create(this,R.raw.akali);

            button[i].setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    switch(v.getId())
                    {

                case R.id.akali:
                                        i=0;
                    break;
                case R.id.alistar:
                    i=1;
                    break;
                            }
mediaplayer[1].start(); 
                }
            } );

    }

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        }

    } 
```

编辑：我试图让它更通用，所以我只调用 1 .start();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:45:12.153

首先，您可能应该使用 Android`ListView`作为您的点击目标，而不是一个巨大`Array`的点击目标`Buttons`。这将为您节省大量内存。其次，您应该使用诸如 soundPool 之类的东西，而不是使用大量的 MediaPlayers。如果该路线对您来说没有吸引力，您需要为每次点击创建一个 MediaPlayer，然后将其丢弃。沿着这些思路的一个简单解决方案如下所示：

主类：

```
class MyActivity {
  private MediaPlayer mMediaPlayer;
  private HashMap<Integer, Integer> soundMap;
  private ListView mListView;
  private ArrayAdapter<Integer> mAdapter;

  @Override
  onCreate(Bundle savedInstanceState) {
    mAdapter = new MySimpleSoundAdapter();

    int[] sounds = {R.raw.alistar, R.raw.alkili, /*...*/ };

    mListView = findViewById(R.id.listView);
    mListView.setAdapter(new ArrayAdapter<Integer>(this, R.layout.textview, sounds));
    mListView.setOnItemClickListener(new OnItemClickListener() {
      @Override
      void onItemClick (AdapterView<?> parent, View view, int position, long id) {
        MediaPlayer mp = 
            MediaPlayer.create(MyActivity.this, (int) mAdapter.getItem(position);
        mp.start(); 
      }
    });
  }
} 
```

# c# - 在 MVC 4 中搜索并在同一视图中重复

> ID：15213098
> 
> 赞同：0
> 
> 时间：2013-03-04T23:26:06.793
> 
> 标签：c#, asp.net-mvc-4

我正在尝试在主索引视图中放置一个搜索栏，以便我可以搜索特定的客户。我会搜索一个名字，它工作正常，但如果我再次尝试搜索，我会得到..

> **“/”应用程序中的服务器错误。**无法找到该资源。
> 
> > 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> > 
> > 请求的 URL：/Client/Client/Index

我希望能够重复搜索并返回主索引。

**控制器类**

```
public class ClientController : Controller
{
    private VolumeV2Context db = new VolumeV2Context();

    //
    // GET: /Client/

    public ActionResult Index(string SearchParam)
    {
        if (SearchParam == null)
        {
              //just load the main index 
            return View(db.Clients.Take(25).ToList());
        }
        else
        {
             //search for the client name
            var clients = db.Clients.Where(c => c.FirstName.Contains(SearchParam) || c.LastName.Contains(SearchParam)).Take(10).ToList();
            return View(clients);

        }
    } 
```

**索引视图** 我在这里也为每个客户逐行使用局部视图。我以为这会让我更容易

```
@model IEnumerable<VolumeV2.Models.Clients>

@{  
ViewBag.Title = "Index";

}

<h2>Index</h2>

<form action="Client/Index" method="get" >
<input type="text" name="SearchParam" />
<input type="submit" value="Search" />
<table class="client" id ="results">
<tr>
    <th>
        @Html.DisplayNameFor(model => model.FirstName)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.LastName)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.PhoneNumber)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.Email)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.EmailList)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.HairType)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.Description)
    </th>
    <th></th>
</tr>

   @foreach( var item in Model){

 @Html.Partial("SearchedClients",item)

}
           </table>
</form> 
```

**局部视图**

```
@model VolumeV2.Models.Clients

<tr >
    <td>
        @Html.DisplayFor(model => model.FirstName)
    </td>
    <td>
        @Html.DisplayFor(model => model.LastName)
    </td>
    <td>
        @Html.DisplayFor(model => model.PhoneNumber)
    </td>
    <td>
        @Html.DisplayFor(model => model.Email)
    </td>
    <td>
        @Html.DisplayFor(model => model.EmailList)
    </td>
    <td>
        @Html.DisplayFor(model => model.HairType)
    </td>
    <td>
        @Html.DisplayFor(model => model.Description)
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { id = Model.Id }) |
        @Html.ActionLink("Details", "Details", new { id = Model.Id }) |
        @Html.ActionLink("Delete", "Delete", new { id = Model.Id }) |
        @Html.ActionLink("Address", "GetAddress", new { id = Model.Id })

    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:02:37.813

将表单操作从“/Client/Index”更改为“../Client/Index”

# php - PHP Mysqli - 参数绑定和 escape_string？

> ID：15213102
> 
> 赞同：1
> 
> 时间：2013-03-04T23:26:44.630
> 
> 标签：php, mysql, sql, security

为了数据库安全，我是否需要在准备好的语句和输入中的 mysql_real_escape_string() 中同时执行绑定参数？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:47:20.807

不，参数化查询本身就很好。只要您将所有变量数据保留在参数中，与查询分开传递，就可以在没有任何转义/反义处理的情况下获取它们。

一般来说，您不应该在输入阶段进行全面转义 - 在您实际将值注入到一个值之前，您不知道需要哪种转义（SQL，HTML，JS，...）那些字符串上下文。对所有输入数据应用各种转义只会导致输入处理混乱和不一致。

# perl - Perl 异常而不是返回值

> ID：15213104
> 
> 赞同：7
> 
> 时间：2013-03-04T23:27:02.810
> 
> 标签：perl, exception, exception-handling

在一些 perl 脚本中，我发现自己在编写如下内容：

```
open(...) or die $!;
print ... or die $!; 
```

等等

我想避免`or die ...`在每一个可能的例外结束时重复自己说的话。

有没有办法强制`open()`等函数在出错时抛出异常，而不仅仅是错误的返回值？然后我可以一口气捕获所有可能的异常。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T23:29:49.607

是的。它存在一个使这些指令因错误而死的模块，它被称为`autodie`. 在脚本的开头添加它。

```
use autodie;

## It dies.
open my $fh, '<', 'nonfile.txt'; 
```

# python - Google App Engine：（Python）数据存储事务和幂等性

> ID：15213106
> 
> 赞同：0
> 
> 时间：2013-03-04T23:27:11.390
> 
> 标签：python, google-app-engine, transactions

我需要一些帮助来理解交易和幂等性。

> 注意：如果您的应用在提交事务时收到异常，并不总是意味着事务失败。在事务已提交并最终将成功应用的情况下，您可能会收到 Timeout、TransactionFailedError 或 InternalError 异常。尽可能使您的数据存储事务具有幂等性，这样如果您重复事务，最终结果将是相同的。

我有一个游戏，当发生特殊情况时，玩家会收到一封电子邮件。有一个错误是玩家有时会收到 2 封（或更多）电子邮件。我相信这是因为我在交易内部处理游戏规则，但在外部发送电子邮件。

一些伪代码：

```
def game_update(orders_from_player):
  emails_to_send = db.run_in_transaction(process_player_orders, orders_from_player)
  for e in emails_to_send:
    send_email(e) 
```

是不是这样说，在交易冲突时，我应该期望再次发送电子邮件列表？

是*整个请求*重复，还是只是对事务过程的调用。（在本例中为 process_player_orders）

我很困惑。

# java - guava 中的@Subscribe 注解可以包装吗？

> ID：15213108
> 
> 赞同：2
> 
> 时间：2013-03-04T23:27:18.453
> 
> 标签：java, guava

我在我的一个项目中使用 Google 的 Guava EventBus，我想知道是否有办法包装 @Subscribe 注释，这样我就可以依赖工作包中的另一个类，而不是导入 guava 事件总线包。

我在网上找到了这个，这似乎与我正在寻找的东西相同。想知道是否有人可以提供第二个意见。

> 如果一个类需要订阅一条消息，它的一些方法必须使用订阅注解进行注解。我可以将 EventBus 包装在我自己的自定义包装器中，但这并不能解决订阅注释问题。我想要在我的代码中耦合较少的东西。
> 
> [http://www.lexicalscope.com/blog/2012/02/13/guava-eventbus-experiences/](http://www.lexicalscope.com/blog/2012/02/13/guava-eventbus-experiences/)

# php - 没有 mysqli 或 PDO 的 PHP 准备语句

> ID：15213110
> 
> 赞同：2
> 
> 时间：2013-03-04T23:27:33.933
> 
> 标签：php, mysql

是否可以使用PHP中已弃用的[mysql](http://www.php.net/manual/en/intro.mysql.php)扩展来使用准备好的语句？我有一台不会很快获得 mysqli 或 PDO 的服务器，需要对用户提供的文本进行 RLIKE 查找。mysql_real_escape_string() 将被使用，但我担心它会不够。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:11:16.567

这是一个 PHP 脚本，使用已弃用的 mysql API，演示了使用 PREPARE 和 EXECUTE。我用 PHP 5.3.15 和 MySQL 5.5.29 对此进行了测试，它对我有用。但是，我不推荐它。

```
<?php

$x = 3;
$y = 4;

mysql_connect('localhost', 'root', 'xxxx') or die(mysql_error());
mysql_select_db('test');

mysql_query("SET @sql = 'SELECT SQRT(POW(?,2) + POW(?,2)) AS hypotenuse'");
mysql_query("PREPARE stmt FROM @sql");
mysql_query("SET @x = $x"); // SQL injection!
mysql_query("SET @y = $y"); // SQL injection!
$result = mysql_query("EXECUTE stmt USING @x, @y");
while ($row = mysql_fetch_assoc($result)) {
  print $row["hypotenuse"] . "\n";
}

mysql_close(); 
```

正如我在评论中指出的那样，这种方式错过了准备查询的要点，因为您必须将可能不受信任的内容插入到您的 SET 语句中。

你真的应该修复你的 PHP 安装并启用 mysqli 或 PDO_mysql 扩展，这样你就可以使用真正的 API 级别的准备和执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:31:34.933

看看这个： [http ://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)

您可以使用手动参数绑定准备好的语句的 SQL 语法。

# android - ListAdapter / convertView 和新线程来获取图像

> ID：15213113
> 
> 赞同：0
> 
> 时间：2013-03-04T23:27:52.760
> 
> 标签：android, android-listview, android-imageview, android-image, android-adapter

我有一个`ListView`，其中包含有关歌曲的信息。另外我想在`ListView`.

因此我写了一个适配器。这个适配器的主要内容是以下`getView()`方法：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    final Map dataSet = mData.get(position);
    View v = convertView;
    ViewHolder holder;
    if (convertView == null) {
        v = mInflater.inflate(mResource, parent, false);
        holder = new ViewHolder();
        holder.artist = (TextView) v.findViewById(R.id.artist);
        holder.imageView = (ImageView) v.findViewById(R.id.imageListView);
        holder.title = (ScrollingTextView) v.findViewById(R.id.title);
        holder.time = (TextView) v.findViewById(R.id.time);
        v.setTag(holder);
    } else {
        holder = (ViewHolder) v.getTag();
    }
    holder.artist.setText((CharSequence) dataSet.get("artist"));
    holder.title.setText((CharSequence) dataSet.get("title"));
    holder.time.setText((CharSequence) dataSet.get("time"));

    GetImg gi = new GetImg(v, mContext);
    gi.start();

    return v;
} 
```

您可以看到，我使用 a`ViewHolder`以获得更好的性能。在`GetImg`扩展 的类中`Thread`，我正在下载图像并将 设置`Bitmap`为`ImageView`.

现在我收到以下问题。有时，多个子视图中会`ListView`获得相同的图像。为什么？

当我不使用`convertView`时，一切正常，但不如使用`convertView`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:46:40.680

我认为你不应该创建新线程来下载里面的图像`getView()`。通过这种方式管理线程非常困难。相反，您可以尝试以下方法：

*   使用[内容提供者](http://developer.android.com/guide/topics/providers/content-providers.html)来管理图像。
*   使用[`CursorAdapter`](http://developer.android.com/reference/android/widget/CursorAdapter.html)with[`LoaderManager`](http://developer.android.com/reference/android/app/LoaderManager.html)代表`ListView`.

*例如*，当用户滚动到新项目时，您查询图像。在内容提供者中，如果图像是新的，则创建新线程以下载它们。完成后，您进行“假”插入以让加载程序重新加载数据并将图像分配给视图。

笔记：

*   确保正确管理线程。会有数百个项目，当用户滚动列表时，您可能会创建太多线程。
*   考虑为`ListView`. 您可以在*[Android-SDK]/samples/android-xxx/ApiDemos/src/com/example/android/apis/view/List13.java*查看示例（或在模拟器中，打开应用*API Demos > Views > Lists > 13.慢速适配器*）。

要查看完整的示例（只是一个*没有*源代码的应用程序），您可以尝试[这个](https://play.google.com/store/apps/details?id=com.haibison.android.apps.files). 我正在使用上述技术和“慢速适配器”来显示图像和视频的缩略图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:44:39.460

您只是从数据集中为艺术家、标题和时间设置不同的值。对于您的图像视图，您必须与持有人进行相同的操作。假设您的 ListView 中的每个视图都有一个带有唯一图像的数据集，您还需要为您的 ImageView 添加**setImageDrawable**方法。就像是 ：

```
holder.imageView.setImageDrawable(//access your dataSet for images from here //); 
```

# android - 如何为每三个按钮创建一个新的 LinearLayout？

> ID：15213115
> 
> 赞同：0
> 
> 时间：2013-03-04T23:27:55.280
> 
> 标签：android, android-layout

我想为创建的`LinearLayout`每三个按钮创建一个新按钮。我想要的是订购号码，如下所示：

```
1   2   3
4   5   6
7   8   9 
```

要做到这一点。我需要创建一个新`LinearLayout`的 as `HORIZONTAL`。但是如何创建一个新`LinearLayout`的循环呢？

```
for (int i=1:i<=9:i++) {
    Button b = new Button(this);
    b.setText(""+i);
    // I need to do something here and put my general layout
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:29:25.097

我建议改用[GridView](https://developer.android.com/reference/android/widget/GridView.html)。它将更可靠地使用更少的代码创建一个平衡的 3x3 网格。

* * *

**另外**
但是由于您显然受限于 LinearLayouts 尝试：

```
LinearLayout outer = new LinearLayout(this);
outer.setOrientation(LinearLayout.VERTICAL);
LinearLayout inner;
for(int i = 0; i < 9; i++) {
    if(i % 3 == 0) {
        inner = new LinearLayout(this);
        outer.addView(inner);
    }

    // Create your Buttons and add them to inner
}
setContentView(outer); 
```

# c# - 它是指向不可访问标签的可访问 goto 的唯一情况吗？

> ID：15213116
> 
> 赞同：1
> 
> 时间：2013-03-04T23:28:01.043
> 
> 标签：c#, unreachable-code

灵感来自问题

*   [什么是语句的不可到达终点（unreachable endpoint）？](https://stackoverflow.com/questions/15168072/what-is-a-non-reachable-end-pointunreachable-endpoint-of-a-statement)

在我问这个问题之前，我读过：

*   [C# 谜题：指向不可达标签的可达 goto](https://stackoverflow.com/questions/1167666/c-sharp-puzzle-reachable-goto-pointing-to-an-unreachable-label)
*   [为什么这个“最终”执行？](https://stackoverflow.com/questions/1141502/why-does-this-finally-execute/1141513)

问题的挑战是

> 编写一个程序，该程序具有可访问的 goto 语句，但相应的标记语句不可访问 - Eric Lippert

一个可行的答案是

```
 // the 3 lines are not important but declare variable for afterwards use
    var whateverException=new Exception("whatever exception");
    var whateverAction=default(Action);
    whateverAction=() => whateverAction(); 
```

```
 try {
        goto whateverLabel; // (1) the goto is reachable
    }
    finally {
        throw whateverException; // (3) because finally hijacks
    }

whateverLabel: // (2) but the label is not really reached
    whateverAction(); 
```

我想知道在单线程程序中，**是否只有**一个可访问的 goto 指向不可访问的标签？下面的代码是否也被认为是一个可行的答案？

```
here:
    int d=0, n=1/d;
    goto here; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T06:48:50.447

-blocked技巧`finally`实际上`goto`是获得针对不可达标签的可达 goto 的唯一方法。

# ruby - 如何检查 redis 端口和实例 sidekiq 连接到什么？

> ID：15213122
> 
> 赞同：5
> 
> 时间：2013-03-04T23:28:46.243
> 
> 标签：ruby, redis, sidekiq

我正在使用 sidekiq 和 redis。我正在尝试找出并调试一些问题，但为此，我想知道 sidekiq 连接到什么 URL。我知道我可以在我设置服务器和客户端的文件中检查它，但是有没有我可以使用 ala 的函数来`Resque.redis`显示 redis 实例 sidekiq 连接到什么？

提前致谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-05T00:34:33.513

URL 信息显示在 Web UI 的底部。或者您可以使用以下代码片段：

```
Sidekiq.redis { |c| p c.client.location } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-08T21:03:24.823

使用最新版本的 Sidekiq，您需要使用：

`Sidekiq.redis { |conn| p conn.connection[:location] }`

如果您想获取包含更多信息的哈希：

`Sidekiq.redis { |conn| p conn.connection }`

# jquery - AJAX 语法的差异：$.ajax 与 $.post

> ID：15213123
> 
> 赞同：0
> 
> 时间：2013-03-04T23:28:49.620
> 
> 标签：jquery, ajax

所以我看到 AJAX 语法有两种不同的方式。似乎在这里的板上，每个人都使用这样的格式：

```
$.ajax({
type: 'POST',
url: 'mm.php',
data: { color: color},
success: function (res) {

},
error: function (jqXHR) {

} 
```

但我的文字使用

```
$.post('mm.php', data, processResponse); 
```

有什么区别吗？什么是首选？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:31:00.617

这是一个简写的 Ajax 函数，相当于：

```
$.ajax({
  type: "POST",
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

[http://api.jquery.com/jQuery.post/]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T23:41:35.927

使用此表格是否有助于理解：

```
$.ajax({
    type: 'POST',
    url: 'mm.php',
    data: { color: color},
    success: processResponse,
    error: function (jqXHR) {
    }
}); 
```

*   基本上`.post`是长版的简写`.ajax`

编辑评论：

```
var color = "red";
var mydata = {color: color};

$.ajax({
    type: 'POST',
    url: 'mm.php',
    data: mydata,
    success: processResponse,
    error: function (jqXHR) {
    }
}); 
```

# voip - 星号中的呼出问题

> ID：15213126
> 
> 赞同：0
> 
> 时间：2013-03-04T23:29:03.960
> 
> 标签：voip, asterisk, telephony, sip-server

我打电话有问题

我有 vicidial CE 1.1

我有以下错误

```
 -- Remote UNIX connection
-- Executing AGI("SIP/sou101-0996c9e0", "agi://127.0.0.1:4577/call_log") in new stack
-- AGI Script agi://127.0.0.1:4577/call_log completed, returning 0
-- Executing Dial("SIP/sou101-0996c9e0", "sip/12127773456@netmax|55|o") in new stack
-- Called 12127773456@netmax
Mar  4 14:23:46 NOTICE[2312]: chan_sip.c:2040 auto_congest: Auto-congesting SIP/netmax-  0997de68
-- SIP/netmax-0997de68 is circuit-busy
 == Everyone is busy/congested at this time (1:0/1/0)
-- Executing Hangup("SIP/sou101-0996c9e0", "") in new stack
== Spawn extension (default, 912127773456, 3) exited non-zero on 'SIP/sou101-0996c9e0'
-- Executing DeadAGI("SIP/sou101-0996c9e0", "agi://127.0.0.1:4577/call_log") in new  stack
-- AGI Script agi://127.0.0.1:4577/call_log completed, returning 0
-- Executing DeadAGI("SIP/sou101-0996c9e0", "agi://127.0.0.1:4577/VD_hangup--HVcauses--  PRI-----NODEBUG-----16-----CONGESTION----------)") in new stack
-- AGI Script agi://127.0.0.1:4577/VD_hangup--HVcauses--PRI-----NODEBUG-----16-----  CONGESTION----------) completed, returning 0 
```

和这样的问题...

```
 == Manager 'sendcron' logged off from 127.0.0.1
-- Executing AGI("SIP/sou101-099366c8", "agi://127.0.0.1:4577/call_log") in new stack
-- AGI Script agi://127.0.0.1:4577/call_log completed, returning 0
-- Executing Dial("SIP/sou101-099366c8", "sip/12127773456@voip|55|o") in new stack
-- Called 12127773456@voip
 Mar  4 14:24:10 WARNING[2312]: chan_sip.c:9894 handle_response_invite: Forbidden - wrong  password on authentication for INVITE to '"sou101" <sip:20011@64.79.82.245>;tag=as532e4da7'
-- SIP/voip-09969dc0 is circuit-busy
== Everyone is busy/congested at this time (1:0/1/0)
-- Executing Hangup("SIP/sou101-099366c8", "") in new stack
== Spawn extension (default, 812127773456, 3) exited non-zero on 'SIP/sou101-099366c8'
-- Executing DeadAGI("SIP/sou101-099366c8", "agi://127.0.0.1:4577/call_log") in new  stack
-- AGI Script agi://127.0.0.1:4577/call_log completed, returning 0
-- Executing DeadAGI("SIP/sou101-099366c8", "agi://127.0.0.1:4577/VD_hangup--HVcauses-- PRI-----NODEBUG-----21-----CONGESTION----------)") in new stack
-- AGI Script agi://127.0.0.1:4577/VD_hangup--HVcauses--PRI-----NODEBUG-----21-----CONGESTION----------) completed, returning 0 
```

我看到了 ***WARNING[4638]: chan_sip.c:9894 handle_response_invite: Forbidden - INVITE to '"adm201" ;tag=as0913dc74'* 的身份验证密码错误**

我没有找到任何出路..请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:02:46.793

很可能您的主干设置不正确。要获得更多信息，您可以考虑做

```
asterisk -r
sip set debug peer voip 
```

# bash - 阶乘计算的变量乘法

> ID：15213127
> 
> 赞同：42
> 
> 时间：2013-03-04T23:29:04.470
> 
> 标签：bash, multiplication, factorial

我正在制作一个脚本来计算给定数字的阶乘，但是我在乘法方面遇到了一些问题。

注意：阶乘由下式给出：`9!=9*8*7*6*5*4*3*2*1`

这是我的代码：

```
#!/bin/bash

echo "Insert an Integer"

read input

if ! [[ "$input" =~ ^[0-9]+$ ]] ; then
   exec >&2; echo "Error: You didn't enter an integer"; exit 1
fi

function factorial
{
while [ "$input" != 1 ];
do
    result=$(($result * $input))
    input=$(($input-1))
done
}
factorial
echo "The Factorial of " $input "is" $result 
```

它不断给我各种不同乘法技术的错误：/

目前的输出是：

> ```
> joaomartinsrei@joaomartinsrei ~/Área de Trabalho/Shell $ 
> ./factorial.sh
> Insert an Integer
> 3
> ./factorial.sh: line 15: * 3: syntax error: operand expected (error token is "* 3")
> The factorial of 3 is 
> ```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-04T23:32:14.153

主要问题是您从不初始化`result`(to `1`)，因此：

```
result=$(($result * $input)) 
```

相当于：

```
result=$(( * $input)) 
```

这不是一个有效的算术表达式。

# cakephp - 请帮助我处理我的 CakePHP 模型关系

> ID：15213129
> 
> 赞同：1
> 
> 时间：2013-03-04T23:29:12.260
> 
> 标签：cakephp, cakephp-2.3

我无法理解 CakePHP 中的模型关联。我以前没有使用过 OOP 或 MVC，我发现它有点棘手。

这是我所拥有的：

```
Clubs 
```

系统上的用户是“俱乐部”。俱乐部有多个字段，包括主要联系人 - clubs.club_primary_contact_id

```
Teams 
```

俱乐部可以有一支或多支球队与之相关联。与俱乐部一样，球队也有一个主要联系人——teams.team_primary_contact_id。团队也有一个类型并链接到一个类型表 - teams.type_id。通过teams.club_id链接到俱乐部

```
Contacts 
```

俱乐部可以有一个或多个与之关联的联系人。通过contacts.club_id链接到俱乐部

```
Types 
```

types.id 和 types.type_name

我希望能够访问 clubs/view/x 并显示一个显示以下内容的页面：

*   俱乐部主要联系人姓名/电子邮件
*   所有俱乐部联系人
*   所有俱乐部球队，包括球队主要联系人姓名/电子邮件

TeamsController 的添加/编辑/删除功能运行良好 - 即我可以调用联系人和类型列表并将它们显示在视图表单的选择框中。

不过，我无法从 Club 模型中整齐地访问所有这些内容。

我在这里有什么协会？这是我目前在我的模型课程中所拥有的。

**应用程序/模型/Club.php**

```
public $hasMany = array(
    'Team' => array(
        'className' => 'Team',
        'foreignKey' => 'club_id'
    ),
    'Contact' => array(
        'className' => 'Contact',
        'foreignKey' => 'club_id',
        'order' => 'contact_name DESC'
        )
);

public $belongsTo = array (
    'ClubPrimaryContact' => array(
        'className' => 'Contact'
    )
); 
```

**应用程序/模型/团队.php**

```
public $belongsTo = array (
    'TeamPrimaryContact' => array(
        'className' => 'Contact'
    ),
    'Club',
    'Type'
); 
```

**应用程序/模型/联系人.php**

```
public $hasManyAndBelongsTo = array(
    'Team' =>
        array(
            'className' => 'Team'
        )
); 
```

**应用程序/模型/Type.php**

```
public $belongsTo = array (
    'Team' => array(
        'className' => 'Team'
    )
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:29:20.223

遵守约定在这里会有所帮助。

如果您希望俱乐部属于某个联系人 - 给它一个contact_id 并在俱乐部模型中将belongs_to 关系设置为Contact。您需要为该关系赋予与 Has_Many 关系别名不同的别名 - 例如：

```
public $belongsTo = array(
        'Leader' => array(
            'className'    => 'Contact'
        )
    ); 
```

同样，对于 Teams，为具有别名的领导者定义一个 contains_to 和一个 contact_id，并为联系人定义一个常规的 has_many 关系。

然后在查询时 - 您需要将递归设置得足够高以获取所有结果，或者一旦您开始工作，使用可包含的行为优化您的查询。

然后按正常查询 & 使用`debug()`查看返回的数组结构

# c# - 下拉列表插入 NULL

> ID：15213130
> 
> 赞同：0
> 
> 时间：2013-03-04T23:29:14.727
> 
> 标签：c#, c#-4.0, razor, asp.net-mvc-4

我在这里搜索了很多并找到类似的东西来制作下拉列表

这是我的控制器：这会将我的数据传递给 dropDownList...

```
public ActionResult Create()
{
    var dba = new WHFMDBContext();
    var query = dba.Categories.Select(c => new { c.Id, c.Name });
    ViewBag.Id = new SelectList(query.AsEnumerable(), "Id", "Name", 3);
    return View();
}

[HttpPost]
        [InitializeSimpleMembership]
        public ActionResult Create(Profits profits)
        {
            var user = db.UserProfiles.FirstOrDefault(x => x.UserId == WebSecurity.CurrentUserId);
            var profit = new Profits
            {
               Value= profits.Value,
               Description = profits.Description,
               DateInput =profits.DateInput,
               CategoryName =profits.CategoryName,// ???
                User = user,

            };
            db.Profits.Add(profit);
            db.SaveChanges();
            return RedirectToAction("Index");
        } 
```

我的观点 ：

```
@model WebHFM.Models.Profits

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Profits</legend>

        <div class="editor-field">
           @Html.DropDownList("Id", (SelectList) ViewBag.Id, "--Select One--") 
            </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.CategoryName.Id)
            @Html.ValidationMessageFor(model => model.CategoryName.Id)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Value)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Value)
            @Html.ValidationMessageFor(model => model.Value)
        </div>... 
```

这个插入数据到数据库但是 CategoryName_Id 是 NULL 我错过了什么？和 CategoryName =profits.CategoryName 这是利润中类别的外键 `public Categories CategoryName { get; set; }`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T23:40:44.267

在您的 ID 上调用 .ToString()

```
model.CategoryMenu = db.Categories.Select(c => new SelectListItem {
                                                    Text = c.Name,
                                                    Value = c.Id.ToString(),
                                                   }
                                          ); 
```

# javascript - 让 jQuery 将宽度设置为百分比而不是像素

> ID：15213132
> 
> 赞同：6
> 
> 时间：2013-03-04T23:29:17.943
> 
> 标签：javascript, jquery, html, css

[我在 jsFiddle 上](http://jsfiddle.net/darbybrown/8JnGw/3/)设置了一个示例，jQuery 当前将宽度设置为固定像素宽度。因此，当浏览器宽度减小时，条会从屏幕右侧消失。我的问题是如何让 jQuery 将宽度设置为百分比？

```
<div class="bars">
    <div class="meter">
        <span style="width: 88%"></span>
    </div>
    <div class="meter">
        <span style="width: 62%"></span>
    </div>
</div> 
```

```
$(".meter > span").each(function() {
    $(this)
        .data("origWidth", $(this).width())
        .width(0)
        .animate({
            width: $(this).data("origWidth")
        }, 3600);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T23:35:36.237

```
$(".meter > span").each(function() {
   $(this).data("origWidth", ($(this).width() / $(this).parent().width()) * 100)
          .width(0)
          .animate({ width: $(this).data("origWidth") + "%" }, 3600);
}); 
```

[**小提琴**](http://jsfiddle.net/adeneo/8JnGw/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T23:38:44.517

您必须首先计算这两个宽度之间的相对百分比，如下所示：

```
var relativePercentage = ($(this).width()/$(this).parent('div').width())*100; 
```

然后你可以把它设置为目标宽度，记得加上`%`数字（或者它会得到 中的值`px`），像这样：

```
$(this)
    .data("origWidth", $(this).width())
    .width(0)
    .animate({
        width: relativePercentage + '%'
    }, 3600); 
```

**[工作演示](http://jsbin.com/emekiv/1)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T23:45:27.480

这就是你所需要的：

`**[LIVE DEMO](http://jsfiddle.net/8JnGw/5/)**`

```
$(".meter > span").each(function() {
    $(this).animate({ width: $(this).data("width")+"%" }, 3600);
}); 
```

这个 HTML：

```
<span data-width="88"></span> 
```

并在 CSS 中将宽度设置为`0%`;

调整窗口大小，您`SPAN`的 s 将保持`%`宽度。

# c++ - 简单的 QSsl 客户端/服务器：无法在非普通连接上开始握手

> ID：15213139
> 
> 赞同：0
> 
> 时间：2013-03-04T23:29:29.323
> 
> 标签：c++, qt, ssl, client-server, qsslsocket

我尝试在 QtNetwork 中的客户端和服务器之间创建一个简单的 ssl 连接。

但我有一个问题。首先我运行服务器。然后我运行客户端。当我第一次运行客户端时没有任何反应，但是当我第二次运行它时，我得到了`QSslSocket::startServerEncryption: cannot start handshake on non-plain connection`. 我不知道如何解决它。

这是服务器：

```
//server.h

#ifndef SERVER_H
#define SERVER_H

#include <QtNetwork>
#include <QObject>
#include <QTcpServer>
#include <QTcpSocket>
#include <QSslSocket>

class Server: public QTcpServer
{
    Q_OBJECT

public:
    Server(QObject * parent = 0);
    void incomingConnection(int handle);
    ~Server();

public slots:
    void startRead();

private:
    QSslSocket* socket;
};

#endif // SERVER_H 
```

服务器源文件：

```
//server.cpp

#include "server.h"
#include <iostream>
#include <QByteArray>
#include <QSslCertificate>
#include <QSslKey>
using namespace std;

Server::Server(QObject* parent) :
    QTcpServer(parent)
{
    socket = new QSslSocket;

    connect(socket, SIGNAL(encrypted()),
            this, SLOT(startRead()));

    listen(QHostAddress::Any, 8889);
}

void Server::startRead()
{
    char buffer[1024] = { 0 };
    socket->read(buffer, socket->bytesAvailable());
    cout << buffer << endl;
    socket->close();
}

void Server::incomingConnection(int socketDescriptor)
{
    if (socket->setSocketDescriptor(socketDescriptor))
    {
        connect(socket, SIGNAL(encrypted()),
                this, SLOT(startRead()));

        QByteArray key;
        QByteArray cert;

        QFile file_key("/path_to_key/rsakey");

        if(file_key.open(QIODevice::ReadOnly))
        {
            key = file_key.readAll();
            file_key.close();
        }
        else
        {
            qDebug() << file_key.errorString();
        }

        QFile file_cert("/path_to_certificate/mycert.pem");
        if(file_cert.open(QIODevice::ReadOnly))
        {
            cert = file_cert.readAll();
            file_cert.close();
        }
        else
        {
            qDebug() << file_cert.errorString();
        }

        QSslKey ssl_key(key, QSsl::Rsa);
        QSslCertificate ssl_cert(cert);

        socket->setPrivateKey(ssl_key);
        socket->setLocalCertificate(ssl_cert);

        QSslConfiguration cfg = socket->sslConfiguration();
        cfg.caCertificates();

        socket->startServerEncryption();
    }
}

Server::~Server()
{
    delete socket;
} 
```

服务器主文件：

```
//server main

#include "server.h"
#include <QCoreApplication>

int main(int argc, char** argv)
{
    QCoreApplication app(argc, argv);

    Server server;

    return app.exec();
} 
```

这是客户端：

```
//client.h
#ifndef CLIENT_H
#define CLIENT_H

#include <QtNetwork>
#include <QObject>
#include <QString>
#include <QSslSocket>

class Client: public QObject
{
    Q_OBJECT

public:
    Client(QObject* parent = 0);
    ~Client();
    void start(QString address, quint16 port);

public slots:
    void startTransfer();

private:
    QSslSocket client;
};

#endif // CLIENT_H 
```

客户端源文件：

```
// client.cpp

#include "client.h"
#include <QDebug>

Client::Client(QObject* parent) :
    QObject(parent)
{
    connect(&client, SIGNAL(encrypted()),
            this, SLOT(startTransfer()));
}

Client::~Client()
{
    client.close();
}

void Client::start(QString address, quint16 port)
{
    client.connectToHostEncrypted(address, port);
}

void Client::startTransfer()
{
    qDebug() << "startTransfer()";
    client.write("Hello, world", 13);
} 
```

客户端主文件：

```
//client main

#include "client.h"
#include <QCoreApplication>

int main(int argc, char** argv)
{
    QCoreApplication app(argc, argv);

    Client client;
    client.start("127.0.0.1", 8889);

    return app.exec();
} 
```

任何人都可以告诉我缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-07T18:19:35.273

这里的问题是 QSslSocket 不能被重用（我打开了一个关于这个[QTBUG-59348](https://bugreports.qt.io/browse/QTBUG-59348)的错误），所以一旦你第二次调用 setSocketDescriptor （一旦一个新的连接出现），内部模式就处于加密状态。

您的代码还有一个问题，即即使可以重用 QSslSocket，您也会在构造函数中创建一个套接字，因此您一次只能接受一个连接。相反，您必须在 incommingConnection 中创建一个新的 QSslSocket，如果您有 QTcpServer 的实现，您不需要调用 nextPendingConnection()，如果您这样做，您将获得两个指向同一个 FD 的对象，一个 QTcpSocket 和一个 QSsqSocket 创建由你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T16:04:34.027

您应该尝试从 nextPendingConnection 获取套接字描述符并设置 QSslsocket 的套接字描述符

首先：您必须将 QTcpServer::newConnection 的信号与自制插槽连接（例如 newConnectionRecognized）

二：用QTcpServer::nextPendingConnection()->socketDescriptor的socket描述符设置QSslSocket的socketDescriptor

```
constructor:
{
server = new QTcpServer;
...
server->listen(QHostAddress::Any,1234)
...
connect(server,SIGNAL(newConnection()),this,SLOT(newConnectionRecognized()));
...
}

void SslServer::newConnectionRecognized()
{
incomingConnection(server->nextPendingConnection()->socketDescriptor());
...
}

void SslServer::incomingConnection(int socket_descriptor)
{

   socket = new QSslSocket(this);

   ...

   if (!socket->setSocketDescriptor(socket_descriptor))
   {
      qWarning("! Couldn't set socket descriptor");
      delete socket;
      return;
   }

  ...
} 
```

我希望它有帮助...

# python - 如何在 Python 中进行非线性复根查找

> ID：15213141
> 
> 赞同：7
> 
> 时间：2013-03-04T23:29:44.557
> 
> 标签：python, scipy, mathematical-optimization

我想对以下非线性方程进行根搜索，我在 Python 中进行，但它不起作用。我的代码在下面

```
from pylab import *
import scipy
import scipy.optimize

def z1(x,y):
    temp=1+1j+x+2*y;
    return temp

def z2(x,y):
    temp=-1j-2*x+sqrt(3)*y;
    return temp

def func(x):
    temp=[z1(x[0],x[1])-1.0/(1-1.0/(z2(x[0],x[1]))),1-2.0/(z2(x[0],x[1])-4.0/z1(x[0],x[1]))]
    return temp

result=scipy.optimize.fsolve(func,[1+1j,1+1j])

print result 
```

当我运行它时，它显示错误：

---> 30 结果=scipy.optimize.fsolve(func,[1+1j,1+1j])

C:\Python27\lib\site-packages\scipy\optimize\minpack.py in fsolve(func, x0, args, fprime, full_output, col_deriv, xtol, maxfev, band, epsfcn, factor, diag)

```
123             maxfev = 200*(n + 1)

124         retval = _minpack._hybrd(func, x0, args, full_output, xtol, 
```

--> 125 maxfev、ml、mu、epsfcn、因子、诊断）

```
126     else:

127         _check_func('fsolve', 'fprime', Dfun, x0, args, n, (n,n)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T00:28:09.530

`fsolve`从 R^n -> R 中找到函数的零点。类似[`root`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.root.html#scipy.optimize.root)的函数从 R^n -> R^m 中找到函数的零点。

看起来你正试图从 C^2 -> C^2 中找到函数的零点，据我所知 scipy.optimize 不直接支持 - 但你可以尝试从 R^4 编写一个函数-> R^4 然后使用`root`. 例如，类似于以下内容：

```
def func_as_reals(x):
    r1, c1, r2, c2 = x
    a, b = func([complex(r1, c1), complex(r2, c2)])
    return [a.real, a.imag, b.real, b.imag] 
```

应该可以工作，尽管直接在实数上执行它可能会快得多，而不是反复包装成复数和展开。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-19T18:29:33.253

你可以试试 mpmath 的 findroot( [sympy](http://docs.sympy.org/0.7.0/modules/mpmath/calculus/optimization.html) )：

```
from mpmath import findroot

#Your code here

ans = findroot([z1,z2],(0,0))
print(ans) 
```

回报：

```
[(-0.302169479251962 - 0.651084739625981j)]
[(-0.348915260374019 - 0.174457630187009j)] 
```

这是您系统的解决方案。
Mpmath 是一个多精度库，因此它的例程通常较慢，但您可以尝试一下！

# php - for循环导致无限加载等待

> ID：15213143
> 
> 赞同：0
> 
> 时间：2013-03-04T23:29:51.470
> 
> 标签：php, xml, xml-parsing, simplexml, infinite-loop

我正在编写一个 PHP 脚本，其中包含以下`for`循环：

```
for($x=count($content->data->parameters[0]->weather->children());$content->data->weather->{"weather-conditions"}[$x]['weather-type']==NULL;--$x){
    echo $x."\n";
} 
```

其中 $content 是 SimpleXMLElement 的一个实例，它解析 XML 如下：

```
<dwml xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0" xsi:noNamespaceSchemaLocation="http://graphical.weather.gov/xml/DWMLgen/schema/DWML.xsd">
<data>
<parameters applicable-location="point1">
<location>
<weather time-layout="k-p3h-n41-3">
<name>Weather Type, Coverage, and Intensity</name>
<weather-conditions>
<value coverage="slight chance" intensity="light" weather-type="snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="slight chance" intensity="light" weather-type="snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="chance" intensity="light" weather-type="snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="likely" intensity="light" weather-type="snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="definitely" intensity="light" weather-type="snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="definitely" intensity="light" weather-type="snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="definitely" intensity="moderate" weather-type="snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
<value coverage="areas" intensity="none" additive="and" weather-type="blowing snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="definitely" intensity="moderate" weather-type="snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
<value coverage="areas" intensity="none" additive="and" weather-type="blowing snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="definitely" intensity="moderate" weather-type="snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
<value coverage="areas" intensity="none" additive="and" weather-type="blowing snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="definitely" intensity="moderate" weather-type="snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
<value coverage="areas" intensity="none" additive="and" weather-type="blowing snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="chance" intensity="light" weather-type="snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
<value coverage="areas" intensity="none" additive="and" weather-type="blowing snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="chance" intensity="light" weather-type="snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
<value coverage="areas" intensity="none" additive="and" weather-type="blowing snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="slight chance" intensity="light" weather-type="snow showers" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="slight chance" intensity="light" weather-type="snow showers" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="slight chance" intensity="light" weather-type="snow showers" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="slight chance" intensity="light" weather-type="snow showers" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions/>
<weather-conditions/>
<weather-conditions/>
<weather-conditions/>
<weather-conditions/>
<weather-conditions/>
<weather-conditions/>
<weather-conditions/>
<weather-conditions/>
<weather-conditions/>
<weather-conditions/>
<weather-conditions/>
<weather-conditions/>
<weather-conditions/>
<weather-conditions>
<value coverage="slight chance" intensity="light" weather-type="rain" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="slight chance" intensity="light" weather-type="rain" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="slight chance" intensity="light" weather-type="rain" qualifier="none">
<visibility xsi:nil="true"/>
</value>
<value coverage="slight chance" intensity="light" additive="and" weather-type="snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="slight chance" intensity="light" weather-type="rain" qualifier="none">
<visibility xsi:nil="true"/>
</value>
<value coverage="slight chance" intensity="light" additive="and" weather-type="snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="slight chance" intensity="light" weather-type="rain" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="slight chance" intensity="light" weather-type="rain" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="chance" intensity="light" weather-type="rain" qualifier="none">
<visibility xsi:nil="true"/>
</value>
<value coverage="chance" intensity="light" additive="and" weather-type="snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="chance" intensity="light" weather-type="rain" qualifier="none">
<visibility xsi:nil="true"/>
</value>
<value coverage="chance" intensity="light" additive="and" weather-type="snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="chance" intensity="light" weather-type="rain" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="chance" intensity="light" weather-type="rain" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
<weather-conditions>
<value coverage="chance" intensity="light" weather-type="rain" qualifier="none">
<visibility xsi:nil="true"/>
</value>
<value coverage="chance" intensity="light" additive="and" weather-type="snow" qualifier="none">
<visibility xsi:nil="true"/>
</value>
</weather-conditions>
</weather>
</parameters>
</data>
</dwml> 
```

编辑：解析此文件后，这就是`var_dump($content->data->parameters[0]->weather);`产生的结果：

```
object(SimpleXMLElement)#4 (3) {
  ["@attributes"]=>
  array(1) {
    ["time-layout"]=>
    string(11) "k-p3h-n41-3"
  }
  ["name"]=>
  string(37) "Weather Type, Coverage, and Intensity"
  ["weather-conditions"]=>
  array(41) {
    [0]=>
    object(SimpleXMLElement)#2 (1) {
      ["value"]=>
      object(SimpleXMLElement)#45 (2) {
        ["@attributes"]=>
        array(4) {
          ["coverage"]=>
          string(13) "slight chance"
          ["intensity"]=>
          string(5) "light"
          ["weather-type"]=>
          string(4) "snow"
          ["qualifier"]=>
          string(4) "none"
        }
        ["visibility"]=>
        object(SimpleXMLElement)#46 (0) {
        }
      }
    }
    [1]=>
    object(SimpleXMLElement)#5 (1) {
      ["value"]=>
      object(SimpleXMLElement)#45 (2) {
        ["@attributes"]=>
        array(4) {
          ["coverage"]=>
          string(13) "slight chance"
          ["intensity"]=>
          string(5) "light"
          ["weather-type"]=>
          string(4) "snow"
          ["qualifier"]=>
          string(4) "none"
        }
        ["visibility"]=>
        object(SimpleXMLElement)#46 (0) {
        }
      }
    }
    [2]=>
    object(SimpleXMLElement)#6 (1) {
      ["value"]=>
      object(SimpleXMLElement)#45 (2) {
        ["@attributes"]=>
        array(4) {
          ["coverage"]=>
          string(6) "chance"
          ["intensity"]=>
          string(5) "light"
          ["weather-type"]=>
          string(4) "snow"
          ["qualifier"]=>
          string(4) "none"
        }
        ["visibility"]=>
        object(SimpleXMLElement)#46 (0) {
        }
      }
    }
    [3]=>
    object(SimpleXMLElement)#7 (1) {
      ["value"]=>
      object(SimpleXMLElement)#45 (2) {
        ["@attributes"]=>
        array(4) {
          ["coverage"]=>
          string(6) "likely"
          ["intensity"]=>
          string(5) "light"
          ["weather-type"]=>
          string(4) "snow"
          ["qualifier"]=>
          string(4) "none"
        }
        ["visibility"]=>
        object(SimpleXMLElement)#46 (0) {
        }
      }
    }
    [4]=>
    object(SimpleXMLElement)#8 (1) {
      ["value"]=>
      object(SimpleXMLElement)#45 (2) {
        ["@attributes"]=>
        array(4) {
          ["coverage"]=>
          string(10) "definitely"
          ["intensity"]=>
          string(5) "light"
          ["weather-type"]=>
          string(4) "snow"
          ["qualifier"]=>
          string(4) "none"
        }
        ["visibility"]=>
        object(SimpleXMLElement)#46 (0) {
        }
      }
    }
    [5]=>
    object(SimpleXMLElement)#9 (1) {
      ["value"]=>
      object(SimpleXMLElement)#45 (2) {
        ["@attributes"]=>
        array(4) {
          ["coverage"]=>
          string(10) "definitely"
          ["intensity"]=>
          string(5) "light"
          ["weather-type"]=>
          string(4) "snow"
          ["qualifier"]=>
          string(4) "none"
        }
        ["visibility"]=>
        object(SimpleXMLElement)#46 (0) {
        }
      }
    }
    [6]=>
    object(SimpleXMLElement)#10 (1) {
      ["value"]=>
      array(2) {
        [0]=>
        object(SimpleXMLElement)#45 (2) {
          ["@attributes"]=>
          array(4) {
            ["coverage"]=>
            string(10) "definitely"
            ["intensity"]=>
            string(8) "moderate"
            ["weather-type"]=>
            string(4) "snow"
            ["qualifier"]=>
            string(4) "none"
          }
          ["visibility"]=>
          object(SimpleXMLElement)#47 (0) {
          }
        }
        [1]=>
        object(SimpleXMLElement)#46 (2) {
          ["@attributes"]=>
          array(5) {
            ["coverage"]=>
            string(5) "areas"
            ["intensity"]=>
            string(4) "none"
            ["additive"]=>
            string(3) "and"
            ["weather-type"]=>
            string(12) "blowing snow"
            ["qualifier"]=>
            string(4) "none"
          }
          ["visibility"]=>
          object(SimpleXMLElement)#47 (0) {
          }
        }
      }
    }
    [7]=>
    object(SimpleXMLElement)#11 (1) {
      ["value"]=>
      array(2) {
        [0]=>
        object(SimpleXMLElement)#46 (2) {
          ["@attributes"]=>
          array(4) {
            ["coverage"]=>
            string(10) "definitely"
            ["intensity"]=>
            string(8) "moderate"
            ["weather-type"]=>
            string(4) "snow"
            ["qualifier"]=>
            string(4) "none"
          }
          ["visibility"]=>
          object(SimpleXMLElement)#47 (0) {
          }
        }
        [1]=>
        object(SimpleXMLElement)#45 (2) {
          ["@attributes"]=>
          array(5) {
            ["coverage"]=>
            string(5) "areas"
            ["intensity"]=>
            string(4) "none"
            ["additive"]=>
            string(3) "and"
            ["weather-type"]=>
            string(12) "blowing snow"
            ["qualifier"]=>
            string(4) "none"
          }
          ["visibility"]=>
          object(SimpleXMLElement)#47 (0) {
          }
        }
      }
    }
    [8]=>
    object(SimpleXMLElement)#12 (1) {
      ["value"]=>
      array(2) {
        [0]=>
        object(SimpleXMLElement)#45 (2) {
          ["@attributes"]=>
          array(4) {
            ["coverage"]=>
            string(10) "definitely"
            ["intensity"]=>
            string(8) "moderate"
            ["weather-type"]=>
            string(4) "snow"
            ["qualifier"]=>
            string(4) "none"
          }
          ["visibility"]=>
          object(SimpleXMLElement)#47 (0) {
          }
        }
        [1]=>
        object(SimpleXMLElement)#46 (2) {
          ["@attributes"]=>
          array(5) {
            ["coverage"]=>
            string(5) "areas"
            ["intensity"]=>
            string(4) "none"
            ["additive"]=>
            string(3) "and"
            ["weather-type"]=>
            string(12) "blowing snow"
            ["qualifier"]=>
            string(4) "none"
          }
          ["visibility"]=>
          object(SimpleXMLElement)#47 (0) {
          }
        }
      }
    }
    [9]=>
    object(SimpleXMLElement)#13 (1) {
      ["value"]=>
      array(2) {
        [0]=>
        object(SimpleXMLElement)#46 (2) {
          ["@attributes"]=>
          array(4) {
            ["coverage"]=>
            string(10) "definitely"
            ["intensity"]=>
            string(8) "moderate"
            ["weather-type"]=>
            string(4) "snow"
            ["qualifier"]=>
            string(4) "none"
          }
          ["visibility"]=>
          object(SimpleXMLElement)#47 (0) {
          }
        }
        [1]=>
        object(SimpleXMLElement)#45 (2) {
          ["@attributes"]=>
          array(5) {
            ["coverage"]=>
            string(5) "areas"
            ["intensity"]=>
            string(4) "none"
            ["additive"]=>
            string(3) "and"
            ["weather-type"]=>
            string(12) "blowing snow"
            ["qualifier"]=>
            string(4) "none"
          }
          ["visibility"]=>
          object(SimpleXMLElement)#47 (0) {
          }
        }
      }
    }
    [10]=>
    object(SimpleXMLElement)#14 (1) {
      ["value"]=>
      array(2) {
        [0]=>
        object(SimpleXMLElement)#45 (2) {
          ["@attributes"]=>
          array(4) {
            ["coverage"]=>
            string(6) "chance"
            ["intensity"]=>
            string(5) "light"
            ["weather-type"]=>
            string(4) "snow"
            ["qualifier"]=>
            string(4) "none"
          }
          ["visibility"]=>
          object(SimpleXMLElement)#47 (0) {
          }
        }
        [1]=>
        object(SimpleXMLElement)#46 (2) {
          ["@attributes"]=>
          array(5) {
            ["coverage"]=>
            string(5) "areas"
            ["intensity"]=>
            string(4) "none"
            ["additive"]=>
            string(3) "and"
            ["weather-type"]=>
            string(12) "blowing snow"
            ["qualifier"]=>
            string(4) "none"
          }
          ["visibility"]=>
          object(SimpleXMLElement)#47 (0) {
          }
        }
      }
    }
...//More in here, trivial.
    [40]=>
    object(SimpleXMLElement)#44 (1) {
      ["value"]=>
      array(2) {
        [0]=>
        object(SimpleXMLElement)#45 (2) {
          ["@attributes"]=>
          array(4) {
            ["coverage"]=>
            string(6) "chance"
            ["intensity"]=>
            string(5) "light"
            ["weather-type"]=>
            string(4) "rain"
            ["qualifier"]=>
            string(4) "none"
          }
          ["visibility"]=>
          object(SimpleXMLElement)#47 (0) {
          }
        }
        [1]=>
        object(SimpleXMLElement)#46 (2) {
          ["@attributes"]=>
          array(5) {
            ["coverage"]=>
            string(6) "chance"
            ["intensity"]=>
            string(5) "light"
            ["additive"]=>
            string(3) "and"
            ["weather-type"]=>
            string(4) "snow"
            ["qualifier"]=>
            string(4) "none"
          }
          ["visibility"]=>
          object(SimpleXMLElement)#47 (0) {
          }
        }
      }
    }
  }
} 
```

由于最后的元素有时会是空的，我想要最新的非空天气项目，我将 x 设置为天气数组中最后一个项目的索引，并尝试向后工作，但页面没有加载，并且错误日志中没有任何内容。编辑：我已将方法更改为此，以使其更易于理解：

```
for($x=0; $content->data->parameters[0]->weather->{"weather-conditions"}[count($content->data->parameters[0]->weather->children())-$x]['weather-type']==NULL; $x++){
    echo $x."\n";
} 
```

**编辑**：如果不清楚，我需要通过子数组向后递归，而不是向前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:15:15.557

我可以在您的问题中找到一些不同的问题：

**XML 无效。**请在提问时提供工作数据，此处`<location>`元素已打开且从未关闭。我的其余答案的前提条件是 this start-tag has been *removed*。

**没有阻止无限循环。**低于 0是没有意义的，`$x`但你不检查它。您*应该*添加这样的检查，这样您就不会仅仅因为您在中断决策逻辑的另一部分犯了一些错误而创建了一个无限循环：

```
for (
    $x = count($content->data->parameters[0]->weather->children());
    $x >= 0 && $content->data->weather->{"weather-conditions"}[$x]['weather-type'] == NULL;
    --$x
) {
    echo $x . "\n";
} 
```

使用（固定的）示例数据，现在将从 42 计数到 0，但不低于 0。至少无限循环已被删除。清除这些技术问题后，您可以专注于问题域：

> 由于最后的元素有时会为空，我想要最新的非空天气项目

好吧，您的实际示例 XML 不包含*任何*空`<weather>`元素（即`<weather>`没有任何子元素的元素。所以不清楚您在问什么。

但是，它包含空 `<weather-conditions/>`元素，因此作为其余答案的先决条件，我取而代之。

XML 没有特定的顺序 - 至少不是设计使然 - 正如您的示例 XML 所示，空`<weather-conditions/>`元素更多地位于文档的中间而不是末尾。您真正想要的是所有 `<weather-conditions>`包含子元素的元素（此处`<value>`）。您最好使用 xpath 查询来做到这一点。

因此，您首先查询所有*具有* `<value>`子元素的元素，然后获取最后一个元素（按文档顺序）。所以我们开始：

```
list($lastCondition) = $content->xpath('
    (
        /*/data/parameters/weather/weather-conditions[value]
    )[position() = last()]
'); 
```

然后该变量`$lastCondition`包含最后一个非空元素，这里是基于您的示例 XML 的 XML 输出：

```
<weather-conditions>
                    <value coverage="chance" intensity="light" weather-type="rain" qualifier="none">
                        <visibility xsi:nil="true"/>
                    </value>
                    <value coverage="chance" intensity="light" additive="and" weather-type="snow" qualifier="none">
                        <visibility xsi:nil="true"/>
                    </value>
                </weather-conditions> 
```

如您所见，您的问题有很多不清楚的地方，这使得回答变得更加困难。最后，我希望这仍然有帮助。

使用的方法是[`SimpleXMLElement::xpath()`](http://php.net/SimpleXMLElement.xpath)，Xpath 1.0（由该方法使用）在 W3C 站点[XML Path Language (XPath) Version 1.0](http://www.w3.org/TR/xpath/)上指定，Stackoverflow 本身包含很多示例，所以最好先在这里搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:20:18.690

事实证明，我在层次结构中跳过了几个级别，这就是为什么检查字符串是否为 NULL 的条件总是返回 TRUE（因此是无限循环）。最终代码：

```
for($x=count($content->data->parameters[0]->weather->children()); $x>0; $x--){
    if($content->data->parameters[0]->weather->{"weather-conditions"}[$x]!=NULL){
        return $content->data->parameters[0]->weather->{"weather-conditions"}[$x][0]->value['weather-type'];
    }
} 
```

# html - Joomla 和带有 target="_blank" 的锚链接

> ID：15213148
> 
> 赞同：1
> 
> 时间：2013-03-04T23:30:22.310
> 
> 标签：html, joomla, module, anchor

使用自定义 HTML 模块并具有以下代码：

```
<h2><a href="mailto:info@studev.net" target="_blank">info@studev.net</a></h2> 
```

但是保存模块后，呈现的代码变为：

```
<h2>
<script type="text/javascript">
<!--
var prefix = '&#109;a' + 'i&#108;' + '&#116;o';
var path = 'hr' + 'ef' + '=';
var addy61999 = '&#105;nf&#111;' + '&#64;';
addy61999 = addy61999 + 'st&#117;d&#101;v' + '&#46;' + 'n&#101;t';
var addy_text61999 = '&#105;nf&#111;' + '&#64;' + 'st&#117;d&#101;v' + '&#46;' + 'n&#101;t';
document.write('<a ' + path + '\'' + prefix + ':' + addy61999 + '\'>');
document.write(addy_text61999);
document.write('<\/a>');
//-->\n </script><a href="mailto:info@studev.net" style="">info@studev.net</a><script type="text/javascript">
<!--
document.write('<span style=\'display: none;\'>');
//-->
</script><span style="display: none;">This email address is being protected from spambots. You need JavaScript enabled to view it.
<script type="text/javascript">
<!--
document.write('</');
document.write('span>');
//-->
</script></span></h2> 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:45:31.647

它是 joomla 中用于保护电子邮件的“内容 - 电子邮件伪装”插件。该插件以这种方式更改每封电子邮件（使用 js）。如果你愿意，你可以禁用这个插件。但是如果你在页面的源代码中发现了这样的带有js的代码，那是正常的。/libraries/joomla/html/html/email.php - '电子邮件隐藏'的规则

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:04:09.117

对于任何其他尝试将属性添加到由电子邮件伪装插件过滤的锚点的人，您可以在页面加载后使用这段 jQuery 添加您自己的属性：

HTML 示例：

```
<h2 id="contactUsEmail"><a href="mailto:info@studev.net" target="_blank">info@studev.net</a></h2> 
```

您不能将 ID 放入锚标记中，因为插件会在呈现页面时将其删除，因此请使用父标记，然后使用“>”来标识子元素，在本例中为锚标记，如下所示：

```
jQuery(document).ready(function(){
    $("#contactUsEmail > a").attr("target","_blank");
}); 
```

这个 target="_blank" 到锚链接，页面加载后，但仍然启用电子邮件隐藏插件

# windows - 在 Windows 平台上连接 Node.js 和 Oracle

> ID：15213149
> 
> 赞同：2
> 
> 时间：2013-03-04T23:30:25.590
> 
> 标签：windows, oracle, node.js

我有 oracle 11g，我正在运行 Windows 7。我已经设置了 node.js，它与 MongoDB 和其他东西完美配合。我有几个工具要为我的团队构建，我想利用这个机会学习 Node.js。但问题是数据库是oracle，我厌倦了试图让它工作，厌倦了我创建了一个stackoverflow帐户。我确实阅读了许多发布的问题，但没有找到如何在 Windows 上正确设置的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:02:48.230

您是否尝试过允许您连接到 Oracle DB 的节点包。这里有一些 ：

1.  oracle [npm 页面](https://npmjs.org/package/oracle)和[Github](https://github.com/nearinfinity/node-oracle)
2.  db-oracle [npm 页面](https://npmjs.org/package/db-oracle)和[Github](https://github.com/mariano/node-db-oracle)

要安装，请执行此操作

```
npm install oracle //or
npm install db-oracle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T19:49:37.017

[由于依赖于 unix“pthread.h”库， db-oracle](https://npmjs.org/package/db-oracle)在 Windows 上不起作用。

据报道， [oracle](https://npmjs.org/package/oracle)库现在可以在 Windows 上运行，但需要安装合适的 C++ 编译器（例如，VisualStudio）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T17:20:50.433

刚刚发布了一个新的 Oracle 提供的节点模块。看看：[https ://github.com/oracle/node-oracledb/](https://github.com/oracle/node-oracledb/)

这是 Oracle 的公告： [https ://blogs.oracle.com/opal/entry/introducing_node_oracledb_a_node](https://blogs.oracle.com/opal/entry/introducing_node_oracledb_a_node)

在公告中，他们声称很快就会使其与 Windows 兼容。

# php - Mandrill 电子邮件附件文件路径

> ID：15213151
> 
> 赞同：15
> 
> 时间：2013-03-04T23:30:44.647
> 
> 标签：php, email, cakephp, email-attachments, mandrill

我正在尝试向使用 mandrill api 通过 php 包装器发送的电子邮件添加一些附件。我尝试了许多不同的方法来尝试成功附加文件，但无济于事。我正在使用 cakephp 2.x，但我认为这在这种情况下没有任何特殊意义（也许它确实如此？！）。我正在使用 mandrill 在[https://bitbucket.org/mailchimp/mandrill-api-php维护的 php 包装器](https://bitbucket.org/mailchimp/mandrill-api-php)

这是代码：

```
$mandrill = new Mandrill(Configure::read('Site.mandrill_key'));
    $params = array(
        'html' => '
            <p>Hi '.$user['User']['name'].',</p>
            <p>tIt is that time of the year again.<br />
            <a href="http://my-site.com/members/renewal">Please login to the website members area and upload your renewal requirements</a>.</p>
            <p>Kind regards.</p>',
        "text" => null,
        "from_email" => Configure::read('Site.email'),
        "from_name" => Configure::read('Site.title'),
        "subject" => "Renewal Pending",
        "to" => array(array('email' => $user['User']['email'])),
        "track_opens" => true,
        "track_clicks" => true,
        "auto_text" => true,
        "attachments" => array(
            array(
                'path' => WWW_ROOT.'files/downloads/renewals',
                'type' => "application/pdf",
                'name' => 'document.pdf',
            )
        )
    );

    $mandrill->messages->send($params, true);

} 
```

这表明附件已添加到电子邮件中，并且是 pdf，但尚未附加实际的 pdf。我还尝试将路径直接添加到文件中，如下所示：

```
"attachments" => array(
            array(
                'type' => "application/pdf",
                'name' => WWW_ROOT.'files/downloads/renewals/document.pdf',
            ) 
```

我已经用谷歌搜索并阅读了我能找到的每一篇文章，但找不到任何关于我应该如何指定山魈正确附加附件的路径的具体参考资料。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-06T11:16:49.563

好的。感谢凯特琳的意见。处理此问题的 PHP 方法是获取文件，然后对其进行 base64_encode：

```
$attachment = file_get_contents(WWW_ROOT.'files/downloads/file.pdf');
$attachment_encoded = base64_encode($attachment); 
```

然后在 mandrill 数组的附件部分中传递：

```
"attachments" => array(
        array(
            'content' => $attachment_encoded,
            'type' => "application/pdf",
            'name' => 'file.pdf',
        ) 
```

太简单！再次感谢凯特琳！

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-05T14:47:59.090

看起来您正在传递一个名为 的参数`path`，但 Mandrill API 不采用附件文件的路径。如果您使用 send 或 send-template 调用，附件应该是具有三个键的关联数组（散列）：类型、名称和内容。

content 参数应该是作为 Base64 编码字符串的文件内容，因此您需要获取文件内容，而不是路径，对它们进行 Base64 编码，然后将它们传递给名为`content`而不是`path`.

您可以在此处的 Mandrill API 文档中查看参数的完整详细信息，包括附件：[https ://mandrillapp.com/api/docs/messages.html#method=send](https://mandrillapp.com/api/docs/messages.html#method=send)

# java - 标签在使用“wmname LG3D”时意外打开 Libreoffice 交互

> ID：15213155
> 
> 赞同：0
> 
> 时间：2013-03-04T23:31:24.057
> 
> 标签：java, awesome-wm

使用时`wmname LG3D`（修复 Java 应用显示真棒），在 Libreoffice 中点击“文件”会导致意外行为：相反的显示切换标签以匹配 Libreoffice

（例如，Libreoffice 在标签 5 中打开，显示 2 ...点击显示 2 上的 libreoffice-->“文件”会导致显示 1 从标签 1 捕捉到标签 5 ...然后当显示 2 Libreoffice“文件”向左释放时显示标签（有时）会恢复到 1）。

咬合有点“震耳欲聋”……（对不起，无法抗拒）感谢您的任何建议。

在 ubuntu 服务器中使用 2 个带有 nvidia-current 的显示器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T22:20:11.370

查看相关的错误报告（此页面链接到更多内容）：[https ://awesome.naquadah.org/bugs/index.php?do=details&task_id=852](https://awesome.naquadah.org/bugs/index.php?do=details&task_id=852)

# android - 在 Eclipse 中添加亚马逊广告 API 时出现问题

> ID：15213158
> 
> 赞同：0
> 
> 时间：2013-03-04T23:31:42.963
> 
> 标签：android, eclipse, amazon

晚上好，

我正在尝试在我的 Android 应用程序中使用亚马逊的新广告服务，遵循他们的指导方针让我到目前为止，但我无法摆脱一个错误......

有错误的代码是

```
// Programmatically create the AmazonAdLayout       
        this.adView = new AdLayout(this, AdLayout.AdSize.AD_SIZE_320x50);
        LinearLayout layout = (LinearLayout) findViewById(R.id.mainLayout);

            // If you declared AdLayout in your xml you would instead
            // replace the 3 lines above with the following line
            // this.adView = (AdLayout) findViewById( R.id.adview );

            this.adView.loadAd(new AdTargetingOptions()); // async task to retrieve an ad 
```

错误在线

LinearLayout 布局 = (LinearLayout) findViewById(R.id.mainLayout);

'mainLayout 无法解析或不是字段'

我想不明白？有 Eclipse 知识的人可以帮忙吗？:)

# c++ - How can I hide method declaration in C++?

> ID：15213159
> 
> 赞同：1
> 
> 时间：2013-03-04T23:31:42.800
> 
> 标签：c++

I'm currently using gcc 4.4.6 to compile my C++ program. I noticed that function declarations are visible in the compiled code (with O2 flag) by running the code in Valgrind. That means the program can potentially be easily reverse engineered by running in a debugger.

Is there an easy way to hide them? I understand that it's not going to stop someone who's determined, I just don't want people to reverse engineer it in 5 minutes.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T23:35:41.630

1.  `man strip` - [GNU Binutils](http://www.gnu.org/software/binutils/)

2.  `gcc` has an option `-fvisibility=hidden`, it will make to not produce symbols for anything except exported ones.

3.  Use `-O3`, but use caution.

# javascript - 来自对象的正则表达式

> ID：15213162
> 
> 赞同：1
> 
> 时间：2013-03-04T23:32:09.290
> 
> 标签：javascript, jquery, regex

我正在尝试在 JavaScript 中验证表单，将所有正则表达式存储在一个对象中，但是当我调用任何正则表达式时，它都不起作用

```
;(function() {

         var Rules = {
            "nick"     : '/^[0-9a-zA-Z_]{5,20}$/'
          , "password" : '/^.*(?=.{8,})(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).*$/'
          , "email"    : '/^[_a-z0-9.-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/'
          , "name"     : '/^[a-zA-Z -]+$/'
          , "date"     : '/^[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}$/'
          , "country"  : '/^[a-zA-Z]+$/'
        };

        $('.validation-required').click(function(e){
          $(e.target).blur(function(){
            if( e.target.value( Rules [ e.target.name ] ) ) {
              console.log('true');
            }
            else {
              console.log('false');
            }
            $(e.target).unbind('blur');
          });
        });
      })(); 
```

所以，总是返回`"false"`；我试过这样的事情：

```
if( e.target.value( new RegExp ( Rules [ e.target.name ] ) ) ) ... 
```

或者

```
if( e.target.value( Rules [ e.target.name ].toString() ) ) ... 
```

或者

```
if ( Rules [ e.target.name ].test( e.target.value ) ) ... 
```

在这种情况下，控制台会抛出错误：

```
(...) has no methd test 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T23:34:11.783

您拥有的条目`Rules`是字符串，而不是正则表达式文字，因为它们被引用了。改为这样做：

```
var Rules = {
    "nick": /^[0-9a-zA-Z_]{5,20}$/
    ... 
```

另外，我不确定是否`if (e.target.value(Rules[e.target.name]))`完全正确......应该更像是什么`if (Rules[e.target.name].test(e.target.value))`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:36:31.957

您的最后一个示例显示为`if (...).test`，这是一个语法错误。

# c++ - Const 正确性 - 如何在 C++ 中访问向量的元素？

> ID：15213166
> 
> 赞同：1
> 
> 时间：2013-03-04T23:32:28.647
> 
> 标签：c++, vector, constants

我有一个整数向量向量，并且这些向量具有唯一的长度。我想分配一个索引 - 一个整数 i 给整数。例如，如果向量 V 包含 2 个向量，第一个向量 V.at(0) 的长度为 2，第二个向量 V.at(1) 的长度为 4，则索引 3 将对应于第二个向量，V.at(1).at(0)。

我遇到了我怀疑与 const 正确性有关的错误。我该如何解决？

```
Class A{
...
}

   A func(int i) const {
    int j = 0;
    int sum = 0;
    int u = 0;

    // stop when pass by the j-th vector which i is found
    while (sum < i){
        sum = sum + V.at(j).size();
        ++j;
    }

    // return the position
    u = V.at(j).at(i-sum);
    return A(std::make_pair<j, u>);   
  } 
```

错误信息：

```
error: the value of 'j' is not usable in a constant expression
     return A(std::make_pair<j, u>);   
                                      ^
note: 'int j' is not const
     int j = 0;
               ^
error: the value of 'u' is not usable in a constant expression
     return A(std::make_pair<j, u>);   
                                         ^
                                         ^
note: 'int uid' is not const
     int u = V.at(j).at(i-sum); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T23:38:48.177

应该是括号，而不是尖括号：

```
return A(std::make_pair(j, u)); 
```

尖括号用于模板参数，只能是类型和常量。这就是编译器抱怨变量不是常量的原因。

# ruby - While loop not exiting after condition met (Ruby)

> ID：15213168
> 
> 赞同：0
> 
> 时间：2013-03-04T23:32:31.280
> 
> 标签：ruby

I'm not a skillful programmer by any means, but everyone's got to start somewhere. I've been trying to make a (very) basic maze-type in ruby, but I'm having difficulty with the while loop not exiting.

Room layout is an upside down t:

```
 5
 2
103
 4

```

Going north twice from the center should change @loc to 5, say "End", and exit the loop:

```
elsif @loc == 2
@loc = 5
puts "End" 
```

But it returns to the beginning of the while loop, stranding the player.

EDIT: there's some confusion about the code, so I'm removing the block and pointing you to [http://pastebin.com/EFWVBAhn](http://pastebin.com/EFWVBAhn)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:51:24.230

The line

```
while @loc != 5 
```

is accessing a variable which is not being changed. The changes are happening to `cmd.loc`, which is not the same variable. That line needs to be

```
while cmd.loc != 5 
```

in order to access the variable.

Also you need to quote your strings (e.g. `if command == west` should be `if command == "west"`); otherwise you're telling Ruby to compare to a variable called `west`, which doesn't exist, rather than the string "west".

# python - list 无缘无故变成了元组。错误还是我太粗心了？

> ID：15213170
> 
> 赞同：4
> 
> 时间：2013-03-04T23:32:51.063
> 
> 标签：python, python-2.7

我现在处于两难境地。这段代码看起来有效，但无论我尝试更改其语法多少次，它仍然给我相同的结果。

基本上，我的问题是，即使我创建了一个列表嵌套列表 nxn 矩阵，当我尝试为特定行中的条目分配值时，我得到一个 TypeError 即

```
TypeError: 'tuple' object does not support item assignment 
```

我正在使用 Python 2.7。我认为这是我的错，而不是 Python 的错误。我需要澄清。请尝试该代码并告诉我它是否适用于您的 com，如果不能，请说明问题，如果可以的话。提前致谢。

这是代码

```
import sys

class Matrix:
    def __init__(self, n):
    """create n x n matrix"""
        self.matrix = [[0 for i in range(n)] for i in range(n)]
        self.n = n

    def SetRow(self, i, x):
    """convert all entries in ith row to x"""
        for entry in range(self.n):
            self.matrix[i][entry] = x

    def SetCol(self, j, x):
    """convert all entries in jth column to x"""
        self.matrix = zip(*self.matrix)
        self.SetRow(j, x)
        self.matrix = zip(*self.matrix)

    def QueryRow(self, i):
    """print the sum of the ith row"""
        print sum(self.matrix[i])

    def QueryCol(self, j):
    """print the sum of the jth column"""
        self.matrix = zip(*self.matrix)
        x = sum(matrix[j])
        self.matrix = zip(*self.matrix)
        print x

mat = Matrix(256) # create 256 x 256 matrix

with open(sys.argv[1]) as file: # pass each line of file
    for line in file:
        ls = line.split(' ')
        if len(ls) == 2:
            query, a = ls
            eval('mat.%s(%s)' %(query, a))
        if len(ls) == 3:
            query, a, b = ls
            eval('mat.%s(%s, %s)' % (query, a, b)) 
```

文件创建者脚本在这里：

```
file = open('newfile', 'w')
file.write("""SetCol 32 20
SetRow 15 7
SetRow 16 31
QueryCol 32
SetCol 2 14
QueryRow 10
SetCol 14 0
QueryRow 15
SetRow 10 1
QueryCol 2""")
file.close() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T23:36:06.057

`zip()`返回元组：

```
>>> zip([1, 2], [3, 4])
[(1, 3), (2, 4)] 
```

将它们映射回列表：

```
self.matrix = map(list, zip(*self.matrix)) 
```

# matlab - 我的模型在 libsvm 工具箱 matlab 中预测所有正类到负类

> ID：15213175
> 
> 赞同：3
> 
> 时间：2013-03-04T23:33:24.353
> 
> 标签：matlab, libsvm, classification

我在 Matlab 中使用 libsvm 工具箱创建了一个分类器。它将所有正类数据分类为负类，反之亦然。我在进行交叉验证时得到了很好的结果，但是在测试一些数据时，我发现分类器的工作方式错误。我似乎无法弄清楚问题出在哪里。

任何人都可以在这件事上帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T18:30:08.763

当第一个训练示例的（二进制）标签为 -1 时，这是 libsvm 先前版本的“功能”。最简单的解决方案是获取最新版本（> 3.17）。

有关详细信息，请参见此处：[http ://www.csie.ntu.edu.tw/~cjlin/libsvm/faq.html#f430](http://www.csie.ntu.edu.tw/~cjlin/libsvm/faq.html#f430)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:28:41.217

假设您有 500 个训练实例。250 将是正数，其他为负数。现在在测试集中，与正例具有相同特征的实例将被预测为正例。但是，当您向 LIBSVM 提供测试标签（您必须提供测试标签以便 LIBSVM 可以计算准确性，它们显然不会用于预测算法）时，您已经提供了完全相反的标签（错误地）。所以你有一种感觉，你预测的标签已经完全相反了。因为对于二元分类问题，即使是随机分类器也有 50% 的准确率。

# javascript - 如何创建一个新窗口

> ID：15213179
> 
> 赞同：1
> 
> 时间：2013-03-04T23:33:51.330
> 
> 标签：javascript, window, tidesdk

我需要根据用户的操作创建一个新的顶级窗口或子窗口，并且我正在使用 javascript 来了解已采取的操作。我为此使用了 Ti.UI.createWindow() 并且我已经尝试了它的所有可能变体，即 null、发送 url、发送选项对象，但我无法从其中任何一个获得结果。谁能告诉我如何创建一个新的顶级窗口和一个子窗口，我知道这听起来很傻，但我无法让它工作。我在 Windows 7 上使用 Tide SDK 1.3.1 beta

PS：Ti.UI.currentWindow 工作正常，我可以使用 set 方法更改宽度和高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:56:50.030

我发现要创建一个新的子窗口，我们需要在调用 createWindow() 之后使用“open()”方法。

例子： `Ti.UI.createWindow("app://example.html").open();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:01:51.770

`Ti.UI.createWindow`是要走的路。你还需要实际“显示”一个创建的窗口，让它显示出来，也许你忘了这样做？

例子：

```
var new_window = Ti.UI.createWindow("example.html");
new_window.show(); 
```

# c# - 使用 NodaTime 将无效（跳过的）日期时间值转换为 UTC

> ID：15213182
> 
> 赞同：6
> 
> 时间：2013-03-04T23:34:00.090
> 
> 标签：c#, datetime, timezone, dst, nodatime

我想要完成的是将 DateTime（从假定为 EST/EDT 的字符串解析）转换为 UTC。我使用 NodaTime 是因为我需要使用 Olson 时区。

使用 NodaTime 的 ZoneLocalMappingResolver 将无效（跳过）的 DateTime 转换为 UTC 不会转换输入的分钟和秒部分，因为我已将 CustomResolver 配置为在间隙后返回间隔的开始。NodaTime 似乎没有等效的[TimeZoneInfo.IsInvalidTime](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.isinvalidtime%28v=vs.100%29.aspx)。

如何使用 NodaTime 将跳过的日期时间值转换为 UTC 并匹配下面 Utils 类中的 GetUtc() 方法的结果？（Utils.GetUtc 方法使用 System.TimeZoneInfo 而不是 NodaTime）

这是测试用例：

```
[TestMethod]
public void Test_Invalid_Date()
{
    var ts = new DateTime(2013, 3, 10, 2, 15, 45);

    // Convert to UTC using System.TimeZoneInfo
    var utc = Utils.GetUtc(ts).ToString(Utils.Format);

    // Convert to UTC using NodaTime (Tzdb/Olson dataabase)
    var utcNodaTime = Utils.GetUtcTz(ts).ToString(Utils.Format);

    Assert.AreEqual(utc, utcNodaTime);
} 
```

这就是我得到的：

Assert.AreEqual 失败。预期：<2013-03-10 07:15:45.000000>。实际：<2013-03-10 07:00:00.000000>。

这是 Utils 类（也在[github 上](https://github.com/ashtewari/DateTimeExperiments)）：

```
using System;

using NodaTime;
using NodaTime.TimeZones;

/// <summary>
/// Functions to Convert To and From UTC
/// </summary>
public class Utils
{
    /// <summary>
    /// The date format for display/compare
    /// </summary>
    public const string Format = "yyyy-MM-dd HH:mm:ss.ffffff";

    /// <summary>
    /// The eastern U.S. time zone
    /// </summary>
    private static readonly NodaTime.DateTimeZone BclEast = NodaTime.DateTimeZoneProviders.Bcl.GetZoneOrNull("Eastern Standard Time");

    private static readonly TimeZoneInfo EasternTimeZone = TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time");

    private static readonly NodaTime.DateTimeZone TzEast = NodaTime.DateTimeZoneProviders.Tzdb.GetZoneOrNull("America/New_York");

    private static readonly ZoneLocalMappingResolver CustomResolver = Resolvers.CreateMappingResolver(Resolvers.ReturnLater, Resolvers.ReturnStartOfIntervalAfter);

    public static DateTime GetUtc(DateTime ts)
    {
        return TimeZoneInfo.ConvertTimeToUtc(EasternTimeZone.IsInvalidTime(ts) ? ts.AddHours(1.0) : ts, EasternTimeZone);
    }

    public static DateTime GetUtcTz(DateTime ts)
    {
        var local = LocalDateTime.FromDateTime(ts);
        var zdt = TzEast.ResolveLocal(local, CustomResolver);
        return zdt.ToDateTimeUtc();            
    }

    public static DateTime GetUtcBcl(DateTime ts)
    {
        var local = LocalDateTime.FromDateTime(ts);
        var zdt = BclEast.ResolveLocal(local, CustomResolver);
        return zdt.ToDateTimeUtc();
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T04:30:58.130

> NodaTime 似乎没有等效的 TimeZoneInfo.IsInvalidTime。

好吧，您可以使用[`DateTimeZone.MapLocal`](http://nodatime.org/1.3.x/api/?topic=html/M_NodaTime_DateTimeZone_MapLocal.htm). 这为您提供了有关本地到 UTC 映射的所有信息：无论它是明确的、不明确的还是无效的。

或者，使用`ResolveLocal`您自己的自定义[`SkippedTimeResolver`](http://nodatime.org/1.3.x/api/?topic=html/T_NodaTime_TimeZones_SkippedTimeResolver.htm)委托。

例如，进行此更改会使您的代码对我有用：

```
private static readonly ZoneLocalMappingResolver CustomResolver = 
    Resolvers.CreateMappingResolver(Resolvers.ReturnLater, AddGap);

// SkippedTimeResolver which adds the length of the gap to the
// local date and time.
private static ZonedDateTime AddGap(LocalDateTime localDateTime,
                                    DateTimeZone zone,
                                    ZoneInterval intervalBefore,
                                    ZoneInterval intervalAfter)        
{
    long afterMillis = intervalAfter.WallOffset.Milliseconds;
    long beforeMillis = intervalBefore.WallOffset.Milliseconds;
    Period gap = Period.FromMilliseconds(afterMillis - beforeMillis);
    return zone.AtStrictly(localDateTime + gap);
} 
```

（当然，还有其他等效的方法。）

我个人建议尽量避免转换，`DateTime`除非你真的必须这样做——我会在野田时间尽可能多地做。

# javascript - 返回一个新对象的jQuery插件

> ID：15213184
> 
> 赞同：0
> 
> 时间：2013-03-04T23:34:09.867
> 
> 标签：javascript, jquery, object, jquery-plugins

我正在创建我的第一个 jQuery 插件并希望创建 jQuery 对象，但希望能够控制刚刚创建的对象...

我正在按照此处推荐的格式构建我的插件：http: [//docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

这是我的测试代码：

```
(function($){

    var $this = $(this);

    var methods = {
        init : function( options ) {

        //  methods.createDiv();

            $this = $('<div>TEST CONTENT</div>')
                .attr({ 'id':'test' })
                .css({'color':'white','backgroundColor': 'red'})
                .appendTo("body");

            setTimeout(function(){
                    methods.green();
                },
                3000
            );
            return $this;
         },

        green : function( ) {
            $this.css({'backgroundColor': 'green'});
        },
        blue : function( ) {
            $this.css({'backgroundColor': 'blue'});
        }
    };

    $.fn.myPlugin = function( method ) {
        if ( methods[method] ) {
            return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if ( typeof method === 'object' || ! method ) {
            return methods.init.apply( this, arguments );
        } else {
            $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
        }
    };

})( jQuery );

$(document).ready(function () { 
    var myTest = $.fn.myPlugin();
    myTest.blue();
}); 
```

最终，我希望能够使用 myTest 变量控制新创建的 div，但它不起作用。我敢肯定我遗漏了一些明显的部分和我正在犯的错误，但这就是我在这里发帖的原因。这是我的第一个插件，所以如果有人可以帮助我启动并运行这个测试代码，我将不胜感激。目前，萤火虫报告：“TypeError：myTest.blue 不是函数”

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-04T23:49:20.463

调用您的方法：

```
myTest.myPlugin("blue"); 
```

这是一个演示：http: [//jsfiddle.net/5p2Ba/](http://jsfiddle.net/5p2Ba/)

`blue`这里不是 jQuery 对象的方法。您只是`methods`使用闭包将对象绑定到模块中。

# asp.net - ASP.Net 中“useLegacyV2RuntimeActivationPolicy”的默认值是否与 MSDN 文档相反？

> ID：15213188
> 
> 赞同：2
> 
> 时间：2013-03-04T23:34:23.860
> 
> 标签：asp.net, .net-4.0

根据微软的文档，**false**是“useLegacyV2RuntimeActivationPolicy”配置的默认值：

[http://msdn.microsoft.com/en-us/library/bbx34a2h.aspx](http://msdn.microsoft.com/en-us/library/bbx34a2h.aspx)

> 使用 .NET Framework 4 及更高版本的默认激活策略，即允许旧运行时激活技术将 CLR 版本 1.1 或 2.0 加载到进程中。设置此值可防止混合模式程序集加载到 .NET Framework 4 或更高版本中，除非它们是使用 .NET Framework 4 或更高版本构建的。此值**[false]**是默认值。

桌面应用程序以及自动或手动添加到项目中的任何配置文件似乎就是这种情况。默认情况下它没有设置为**true**也是有道理的，因为微软试图保持 .Net 4.0 无影响

引用： http: [//www.marklio.com/marklio/PermaLink,guid,ecc34c3c-be44-4422-86b7-900900e451f9.aspx](http://www.marklio.com/marklio/PermaLink,guid,ecc34c3c-be44-4422-86b7-900900e451f9.aspx)）。

我希望这同样适用于 Web 应用程序，但似乎并非如此。web.config 看起来像预期的那样，但 aspnet.config 文件（即位于 Microsoft.NET 目录中的全局设置文件）实际上将此值设置为**true**。

有谁知道这个决定背后的理由？也就是说，决定阻止 ASP.Net 的进程内 SxS。

我非常感谢对此的任何见解。（特别是在最后一天把我的头撞到墙上之后。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:46:51.763

[我的回答是从运行时团队成员的角度与合作伙伴一起帮助理解进程内 SxS 将如何塑造他们的产品]

使 .NET Framework 进程内 SxS 兼容是一项相当大的工作，涉及通过 mscoree 更新大量内部调用（显式或隐式，如 COM 激活模式）。团队必须选择从场景角度和成本角度都有意义的默认设置。作为一个已经对选择使用哪个运行时来托管站点具有丰富支持的托管平台，ASP.net 选择留在单一运行时世界。桌面应用程序通过灵活组合不同技术（第 3 方扩展、插件等）而受益，并受益于新运行时版本的高兼容性 in-proc SxS 模式，这使得 in-proc SxS 的缺点并不那么糟糕（如果它不好，你总是可以选择回到单个运行时）。对于网站，

对于许多团队来说，最有用的选择框架是“当我们发现自己处于意外的进程内 SxS 场景中时，我们想要什么行为”。对于 ASP.net，答案是，我们希望尽可能保持高性能和可扩展性，而这一决定在此版本中释放了我们更多的资源来专注于 ASP.net 的重大改进，这一事实是锦上添花。

# jquery - jQuery图像/正文

> ID：15213189
> 
> 赞同：1
> 
> 时间：2013-03-04T23:34:36.197
> 
> 标签：jquery

我目前使用：

为我的身体负重

```
<script>
$(document).ready(function()
{
$('body').hide().fadeIn('8000');
});
</script> 
```

但是我需要一些帮助来创建以下内容：

5 秒内容显示后加载显示图像的正文

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:43:55.940

[http://codepen.io/anon/pen/qzIgn](http://codepen.io/anon/pen/qzIgn)

HTML

```
<div id="foo"></div> 
```

CSS

```
#foo {
  background-color:red;
  display:none;
  height:100px;
  width:100px;
} 
```

JS

```
$(document).ready(function(){
  $('#foo').hide('fast').delay(1000).fadeIn(1000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:16:14.483

我想你想在其他内容显示 5 秒后显示你的图像。

检查这个[http://jsfiddle.net/JygpU/4/](http://jsfiddle.net/JygpU/4/)

**HTML**

```
<div id="wrapper">
    <p>Text</p>
    <p>Text</p>
    <p>Text</p>
    <img src="http://3.bp.blogspot.com/-ncHQiyIktlk/Td3Jd-dHnAI/AAAAAAAAA4Q/BVUcrd2ow9A/s1600/hello.jpg" alt="img1" width="200"/>
</div> 
```

**jQuery**

```
jQuery(document).ready(function($){    
    $("#wrapper > :not(img)").hide().fadeIn(8000);
    $("#wrapper > img").hide().fadeIn(20000);
}); 
```

在此示例中，我在 8000 毫秒后显示文本，在 20000 毫秒后显示图像。

# c++ - Excel 公式计算

> ID：15213191
> 
> 赞同：1
> 
> 时间：2013-03-04T23:34:44.723
> 
> 标签：c++, ios, c, libxl

我正在尝试在我的 iOS 应用程序中添加电子表格编辑功能。我正在使用 gridview 来显示（与问题无关）并且我正在使用[LibXL](http://libxl.com/)将数据加载到视图中。这部分工作得很好，但我无法在修改单元格后计算公式。

看来，当我用 LibXL 编写公式时，它并**没有**计算新值，只是设置公式值（一个字符串）。因此，当我尝试从该单元格读取数值时，它仍设置为最后计算的数字（来自 excel）。

同样，如果我创建带有数字的单元格和一个公式单元格来对它们求和，那么`0`在 Excel 中打开它之前，它永远不会被实际计算出来，它会读取一个数字值。

我希望 LibXL 是解决我的问题的灵丹妙药，但现在我只使用公式字符串值 (ie `"SUM(A1:b2)"`) 和最后一个计算值。

如果 LibXL 只是简单地**DID**计算值并且我完全错了，我会喜欢它，但我看不到任何其他说明的文档。如果不是这种情况，是否有任何 Obj-C、C 或 C++ 库可用于匹配 Excel 公式语法并计算这些值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:39:15.593

只需添加我之前的评论作为答案：

Dave Delong 的 DDMathParser 可以选择添加自定义函数，请在此处查看：http: [//github.com/davedelong/DDMathParser](http://github.com/davedelong/DDMathParser)

# php - 向我的 opencart 产品添加自定义选项

> ID：15213193
> 
> 赞同：0
> 
> 时间：2013-03-04T23:35:02.213
> 
> 标签：php, opencart

好吧，我开发了一个开放式购物车网站，现在我想要一些带有产品信息的自定义选项

例如，我想买一些冰淇淋。

自定义选项可以说是 3 种不同的口味。

香草/草莓/巧克力

为此，每种口味都有单独的选择。可以说我想买香草然后我必须买一个锥形。如果我想买草莓，那么我必须买一个酒吧，如果我想买巧克力，那么我必须买一个杯子。

与购买 Dreamweaver 相同。如果我购买专业级别的 Dreamweaver，那么我必须指定有多少用户等等，并且还必须购买许可证。和那个一样。

我没有在管理面板中找到任何添加此类功能的选项。我发现的唯一功能是添加属性。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:07:56.773

如果您在谈论依赖选项，那么这不是 OpenCart 的功能。默认情况下，选项彼此不知道，因此 If `Option X = 1`,`Option Y`不会根据该选择而变化，反之亦然。有一个[可用的扩展（商业）](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=5214)可以满足您的需求

# algorithm - 算法 - 尝试平衡团队技能水平，同时拥有相同数量的玩家

> ID：15213195
> 
> 赞同：1
> 
> 时间：2013-03-04T23:35:07.767
> 
> 标签：algorithm, math, balance

我有 3 支球队，他们有 2 名球员、3 名球员和 7 名球员。有18名球员坐在场边等待分配。

每个玩家都有自己的技能水平，这意味着 1 级不会击败 10 级。

我想将球队平衡到每队 10 名球员。我想尽量让所有 3 支球队的技术水平相同。但是我不想删除已经在一个团队中的球员。

但我不确定我将如何做到这一点。我也不确定是否有一个简单的答案，或者计算成本是否很高。

技能水平是我已经拥有的数字。所有球队都有相同数量的球员。这意味着技能水平是唯一变化的数字。

一个例子是。第 1 队有 3 名球员，总水平为 4。第 2 队有 6 名球员，总水平为 8。第 3 队有 8 名球员，总水平为 9。

我有 13 名球员需要分配，所以每支球队有 10 名球员。我想尝试匹配总技能水平。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:25:08.370

在这里不可能给出一个可靠的答案，因为真正重要的是排名方案有多准确，以及它是否满足一些逻辑属性。

可加性：如果排名是完美的，那么它可能在某种意义上是可加的。我的想法来自桥牌，但任何可以让玩家排名并可以组队的任务都适用。因此，如果 10 级和 1 级玩家组队时，对于由 5 级和 6 级玩家组成的组合来说，这将是一个很好的匹配。（根据我的阅读，从对数意义上来说，桥梁排名可能更准确。）

协同作用：在一个团队中，一些人一起工作是否比其他人更好？同样，这是一个排名问题，因为您与一个人的排名可能比与其他人的排名更好。这里经常有协同作用。以避免桥牌为例，我想到的是高尔夫。把两个人放在一个高尔夫球场上，如果一个人是经常说话的人，而另一个人需要沉默来集中注意力，那么从逻辑上讲，他们会一起打得很差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T04:46:48.233

这对我来说就像您试图将（多）组数字（“技能水平”）划分为大小相等的块（“团队”），以便平均值（“总技能水平”）接近相等尽可能。

为了解决这个问题，我将首先计算平均技能水平，即技能水平的总和除以玩家数量，称为这个数字`s`。如果有`m`队伍总数，每个队伍都有`k`队员，给出队员总数`m*k`，那么每个队伍的目标技能水平是`k*s`。

由于您的团队已经部分填满，因此您遇到的问题基于您的示例

> 我有 3 支球队，他们有 2 名球员、3 名球员和 7 名球员。有18名球员坐在场边等待分配。

如下：

*   A 队，以目前的技术水平`a`，需要 8 名球员，这样`p1 + ... + p8 + a = 10*s`
*   B 队，以目前的技术水平`b`，需要 7 名队员，这样`q1 + ... + q7 + b = 10*s`
*   C 队，以目前的技术水平`c`，需要 3 名队员，这样`r1 + r2 + r3 + c = 10*s`

对于蛮力解决方案，首先找到 C 队的球员，然后使用剩余的球员为 A 队和 B 队求解。

对于更聪明的解决方案，您需要意识到这实际上是一个[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)，并使用一种众所周知的算法来解决这个问题。我推荐链接文章中描述的动态编程解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T01:55:45.333

一个实用的方法会给你一个很好的答案，就是将排名最高的球员分配给排名最低的球队，直到所有球员都被分配，你可以通过对球队球员的排名求和来计算球队的排名。

# jquery - 无法让ajax调用webmethod

> ID：15213201
> 
> 赞同：0
> 
> 时间：2013-03-04T23:35:17.510
> 
> 标签：jquery, asp.net, ajax, webmethod

我似乎无法让这个 ajax 调用工作。我有这块javascipt：

```
function exportCSV(e) {
    var data = document.getElementById("mainTable").innerHTML;
    $.ajax({
        url: "Handlers/Handler.ashx/saveToCsv",
        type: "POST",
        contentType: 'application/json; charset=utf-8',
       //data: data,
       success: function (msg) {
       alert("Success");
              alert(msg);
       },
       error: function (msg) {
              alert("failed ");
       }
    });
} 
```

然后我有一个 handler.cs 文件，我试图调用这个方法：

```
[WebMethod]
        public static string void saveToCsv()
        {
            StringBuilder sb = new StringBuilder();
            //yet to implement rest
            return "hello";
        } 
```

但是我似乎无法弄清楚为什么它一直失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T08:17:29.943

链接中可能有问题：

> 处理程序/Handler.ashx/saveToCsv

尝试使用完整路径来检查这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:14:49.913

确保您在 web 方法之前在 web 服务中添加了以下行

```
[System.Web.Script.Services.ScriptService] 
```

# c - C：搜索数组并返回多个值

> ID：15213209
> 
> 赞同：0
> 
> 时间：2013-03-04T23:35:54.083
> 
> 标签：c, arrays, search

我正在研究我教科书中关于二维数组的样本。它具有以下示例，允许用户输入一个值，然后它搜索数组并返回包含该值的元素的位置，或者如果该值不存在则提醒他们。

我想知道，如果多个元素包含用户的价值怎么办？在代码中，我添加了一些循环来初始化二维数组，并且多个元素包含相同的值。我将如何设置搜索以返回多个包含搜索值的元素？

```
#include <stdio.h>

int main() {

int iTwoD[3][3];
int iFoundAt[2] = {0};
int x, y;
int iFound, iValue = 0;

//initialize the 2-d array
for ( x = 0; x<=2; x++) {

  for (y=0;y<=2;y++)
    iTwoD[x][y] = (x+y);
} //end outer loop

//print the 2-d array
for (x=0; x<=2; x++){

  for (y=0;y<=2;y++)
    printf("iTwoD[%d][%d] = %d\n", x, y, iTwoD[x][y]);

}//end outer loop

//Get the user's value to search for
printf("\nEnter your search value: ");
scanf("%d", &iValue);

//Search the 2-d array for user's value
for (x = 0; x<=2; x++) {
  for (y = 0; y<=2; y++) {
    if ( iTwoD[x][y] == iValue) {
      iFound = 1;
      iFoundAt[0] = x;
      iFoundAt[1] = y;
      break;
    } //end if
  } //end inner loop
} //end outer loop

if (iFound ==1)
  printf("\nFound value in iTwoD[%d][%d]\n", iFoundAt[0], iFoundAt[1]);
else
  printf("\nValue not found\n");

return 0;
} //end main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:41:54.330

```
if ( iTwoD[x][y] == iValue)
{
   arrayOfResults[i][0]=resultx;
   arrayOfResults[i++][1]=resulty;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T23:42:51.430

您需要增加您`iFoundAt`的容量才能容纳多个 (x,y) 的单个元组。此外，您需要`break`从搜索中删除 ，因为尽管找到了值，您仍需要搜索整个矩阵。

# android - 更新 Android 应用（无需访问 Google Play 商店）

> ID：15213211
> 
> 赞同：62
> 
> 时间：2013-03-04T23:35:56.073
> 
> 标签：android, google-play-services, google-play-core

我编写了该应用程序的 Beta 版。它将可以通过网络下载（我不会将其发布到 Play 市场）。当新版本发布时，是否可以在不访问 Play Market 的情况下更新此应用程序？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-03-04T23:50:10.423

绝对地。但是，您需要构建一种机制，让您的应用程序调用服务器，找出是否有更新版本的应用程序，如果有，将其拉下并安装。一旦您确定确实需要拉下更新，您可以使用类似于此 AsyncTask 的内容来执行此操作：

```
protected String doInBackground(String... sUrl) {
    String path = "/sdcard/YourApp.apk";
    try {
        URL url = new URL(sUrl[0]);
        URLConnection connection = url.openConnection();
        connection.connect();

        int fileLength = connection.getContentLength();

        // download the file
        InputStream input = new BufferedInputStream(url.openStream());
        OutputStream output = new FileOutputStream(path);

        byte data[] = new byte[1024];
        long total = 0;
        int count;
        while ((count = input.read(data)) != -1) {
            total += count;
            publishProgress((int) (total * 100 / fileLength));
            output.write(data, 0, count);
        }

        output.flush();
        output.close();
        input.close();
    } catch (Exception e) {
        Log.e("YourApp", "Well that didn't work out so well...");
        Log.e("YourApp", e.getMessage());
    }
    return path;
}

// begin the installation by opening the resulting file
@Override
protected void onPostExecute(String path) {
    Intent i = new Intent();
    i.setAction(Intent.ACTION_VIEW);
    i.setDataAndType(Uri.fromFile(new File(path)), "application/vnd.android.package-archive" );
    Log.d("Lofting", "About to install new .apk");
    this.context.startActivity(i);
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-04T23:53:19.467

是的，这是可能的，这大致是你可以做的：

1.  获取当前应用程序版本代码

    ```
    PackageInfo packageInfo = getPackageManager().getPackageInfo(context.getPackageName(), 0);
    int curVersionCode = packageInfo.versionCode; 
    ```

2.  有一个服务器托管*apk*文件并创建一个简单的纯文件，其中仅包含一个整数，表示最新的应用程序版本代码。

3.  当应用程序启动时（或当您想要检查更新时），从服务器检索最新的版本代码（即通过 HTTP 请求）并将其与当前应用程序版本进行比较。

4.  如果有新版本，请下载*apk*并安装（将为用户提示一个对话框）。

### 编辑：

您可以为此使用@Blumer 的代码。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-25T23:02:39.890

这是可能的，但请记住，用户必须在其设置中启用“允许安装非市场应用程序/未知来源”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-19T11:00:41.343

[仅供参考，我刚刚在http://blog.vivekpanyam.com/evolve-seamless-deploy-android-apps-to-users/?hn](http://blog.vivekpanyam.com/evolve-seamlessly-deploy-android-apps-to-users/?hn)读到了这个

> Evolve 是一个供 Android 开发人员使用的库，可让他们部署新版本的应用程序，而无需通过 Google Play 或要求用户下载更新。它通过使用反射和动态字节码生成来“欺骗”Android 运行新代码。

虽然它是 alpha 版，但它似乎可以通过很多箍来实现。我怀疑它是否值得，除了恶意软件..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-06T14:16:39.317

[**应用内更新的官方支持/库 Google Play 核心**](https://developer.android.com/guide/playcore/in-app-updates)

*   应用内更新是一项**Play Core 库**功能，可提示活跃用户更新您的应用。运行 Android 5.0（API 级别 21）或更高版本的设备支持应用内更新功能，并且需要您的应用使用[Play Core 库](https://developer.android.com/guide/playcore)版本 1.5.0 或更高版本。此外，仅 Android 移动设备、Android 平板电脑和 Chrome OS 设备支持应用内更新。

以下是更新流程的类型

1.  [灵活更新](https://developer.android.com/guide/playcore/in-app-updates#flexible)（示例屏幕）

[![在此处输入图像描述](../Images/3032e16f3b01f936378380a311a42c05.png)](https://i.stack.imgur.com/6Nt46.png)

2.  [即时更新](https://developer.android.com/guide/playcore/in-app-updates#immediate)（示例屏幕）

[![在此处输入图像描述](../Images/9deb7ab30abe6abfc860158b1f6d9bab.png)](https://i.stack.imgur.com/1mCs7.png)

[参考：-有关此主题的更多信息](https://developer.android.com/guide/playcore/in-app-updates)

# javascript - 通过网络浏览器访问 GPU

> ID：15213216
> 
> 赞同：14
> 
> 时间：2013-03-04T23:36:19.993
> 
> 标签：javascript, 3d, gpu, famo.us

我今天早些时候（在 TechCrunch.com 上）遇到了这个概念证明，并对他们如何设法完成最终结果感到震惊和好奇。他们表示他们不使用 webGL 或任何插件，但他们能够直接与 GPU 交互并使用 Javascript 以高达 60 fps 的速度渲染 3D 视觉效果。有什么想法可以做到这一点，或者如何在不使用插件的情况下从 Javascript 访问 GPU？

网站地址是：[famo.us](http://famo.us)

ps：尝试使用箭头键将方向转移到远处！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-04T23:46:24.117

他们使用标准的`HTML5`Javascript API 来实现这一点。

`requestAnimationFrame`我在他们的代码中看到了几个引用。这种方法允许使用兼容浏览器的人显示更流畅和优化的动画，其*帧速率*远高于`setInterval`基于动画所允许的帧速率。这当然是通过使用 GPU 和可用的硬件背景来实现的。

无法使用任何 Javascript 例程直接访问 GPU 或所有其他硬件组件。相反，浏览器会根据调用的 JS 指令和执行上下文，*尽可能*使用 GPU来优化一些特定的处理、演算和渲染。

**编辑**

为了将来的参考，我最近发现（在最初的答案之后 7 年）最近在 2020 年创建了一项新计划 -[用于 Web 社区组的 W3C GPU来做到这一点。](https://github.com/gpuweb/gpuweb)它描述如下。

> Web 社区组中 GPU 的使命是提供 Web 平台与本地系统平台中存在的现代 3D 图形和计算能力之间的接口。目标是设计一个新的 Web API，以高性能、强大和安全的方式公开这些现代技术。它应该与现有的平台 API 一起使用，例如 Microsoft 的 Direct3D 12、Apple 的 Metal 和 Khronos Group 的 Vulkan。该 API 还将向 Web 公开当今 GPU 中可用的通用计算工具，并研究着色器语言以生成跨平台解决方案。

从长远来看，这一举措可能允许开发人员从所有 Web 浏览器直接与 GPU 进行交互。[您可以在此处](https://github.com/gpuweb/gpuweb/wiki/Implementation-Status)跟踪Github 上的[WebGPU API 规范](https://gpuweb.github.io/gpuweb/)的实施状态。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-03T11:04:04.037

关于famo.us：他们确实分析了Webkit渲染管道的瓶颈，然后在构建页面时找到了绕过它们的方法。基本上：DOM树的构建，Render树的构建，Render Tree的Layout都被绕过了。看看[这篇文章](http://www.forbes.com/sites/anthonykosner/2012/11/10/famo-us-cracks-the-secret-of-high-performance-apps-by-tapping-another-dimension/2/)以获得完整的解释。

![在此处输入图像描述](../Images/cf77a3b86b5e28d6428e84655c9d4dce.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T00:00:20.873

他们正在使用 CSS 3D 变换。Web 浏览器越来越多地使用硬件加速来做这些 CSS3 的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-28T02:35:15.107

我认为 webGL glsl.js 库可能对此有好处，尽管我没有看到基准... [https://github.com/gre/glsl.js/](https://github.com/gre/glsl.js/)

这种方法似乎也是可行的；

基本上以我们喜欢的方式使用gpu，使用硬件优化功能（稍微看看“blas”），你不想写这些！奇怪的是，人们似乎仍在使用旧的 fortran blas.... 有一些东西通过 llvm 编译，然后使用 emscripten 将其转换为 javascript。 [将 Emscripten 与 Fortran 一起使用：LAPACK 绑定](https://stackoverflow.com/questions/21990243/use-emscripten-with-fortran-lapack-binding)

emscripten 方式似乎是最通用的，我正要检查它，但它看起来像一座山，而且这个话题似乎有点像在呼吁武装，emscripten 只有在你破解它时才适用于 fortran（请参阅来自第二个链接）。我认为我们正在寻找的是对 javascript 的 blas 支持，这无论如何都不是一个已解决的问题，对于我们中的一些人来说，这非常令人沮丧！希望有人有我们找不到的这些 blas 库的链接……如果我对这个问题不太了解，请告诉我，js 对我来说是新的。

此外，建议 html5 已充分“优化”以使用硬件，我们怎么能相信这一点！？我们需要 gpu 优化的 blas（基本线性代数子程序），例如点积。

我想也许这些旧的fortran blas arnt实际上对于现代gpu来说是正确的？node-cuda 似乎很可能是我发现的最好的东西......

# c# - 没有锁的线程安全

> ID：15213218
> 
> 赞同：3
> 
> 时间：2013-03-04T23:36:26.910
> 
> 标签：c#, multithreading, image-processing

我的成像库中有以下代码，它利用处理器列表动态操作由`HttpModule`.

目前，每个处理器只创建一个实例以降低内存开销，并且每个处理器都具有可写属性，有助于确定处理每个匹配的查询字符串参数并存储要处理的解析值的顺序。

如您所见，我目前正在将方法功能包装在一个`lock`语句中，以防止不同的线程`HttpModule`覆盖处理器属性，尽管我知道这可能会成为瓶颈。我想知道的是：是否有一种设计模式或方法可以使我的处理器在没有锁的情况下成为线程安全的？

```
public static ImageFactory AutoProcess(this ImageFactory factory)
{
    if (factory.ShouldProcess)
    {
        // TODO: This is going to be a bottleneck for speed. Find a faster way.
        lock (SyncLock)
        {
            // Get a list of all graphics processors that 
            // have parsed and matched the querystring.
            List<IGraphicsProcessor> list =
              ImageProcessorConfig.Instance.GraphicsProcessors
              .Where(x => x.MatchRegexIndex(factory.QueryString) != int.MaxValue)
              .OrderBy(y => y.SortOrder)
              .ToList();

            // Loop through and process the image.
            foreach (IGraphicsProcessor graphicsProcessor in list)
            {
                factory.Image = graphicsProcessor.ProcessImage(factory);
            }
        }
    }

    return factory;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:46:07.090

您可能对生产者消费者队列感兴趣。通常，您会接收事件（生产者）并将它们排队到（消费者）的`HttpModule`一个或多个实例。`IGraphicsProcessor`

这是规范的、最简单的生产者/消费者队列实现：[http ://www.albahari.com/threading/part4.aspx#_Wait_Pulse_Producer_Consumer_Queue](http://www.albahari.com/threading/part4.aspx#_Wait_Pulse_Producer_Consumer_Queue)

如果您打算消除锁定，您应该使用无锁队列实现来体验生产者/消费者队列，例如`System.Collections.Concurrent.ConcurrentQueue<T>`在 .NET 4.0 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T23:47:13.450

要么你需要通过没有多个处理器来降低内存压力（然后你需要至少允许一个给定的处理器来完成它当前的工作），或者你需要完全并发。

除非有明确的理由不这样做，否则我将允许每个图像处理器有多个实例。确保处理器尽可能早地释放对其正在操作的数据的引用，以使 GC 以最佳方式运行。这具有简单的优点，以及对 CPU 内核的良好利用。

如果有明确的理由只允许每个处理器的一个实例，您可以通过避免当前的情况来改进您的代码，即在*所有*处理器完成工作之前锁定。相反，一旦当前项目完成，您可以有一种机制来请求您需要处理下一个项目的每个处理器。@anthony 建议使用生产者/消费者模式似乎是一个可靠的解决方案。请记住，使用这种方法，您仍然会成为每个过滤器吞吐量的瓶颈，并且您可能无法最佳地利用所有 CPU 内核。

# macos - 如何在 Objective-C 中的 plist 上读取和写入数据？（不是 iOS，OS X 的常规 Cocoa）

> ID：15213220
> 
> 赞同：2
> 
> 时间：2013-03-04T23:36:33.370
> 
> 标签：macos, cocoa

我正在尝试学习如何在 OS X 上使用可可从 plist 文件中读取和写入数据。

我环顾四周，但我看到了很多 iOS 示例；我假设即使 2 个 cocoa 框架大致相同，与 iOS 相比，您在 OS X 上以不同的方式执行此操作。

有没有什么地方可以获得关于如何在 Cocoa 中从 plist 读取和写入数据的教程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T23:45:19.370

您以完全相同的方式进行操作（减去获取实际文件，但据我所知，这不是要问的问题）。

如果您想读取您使用的 plist 文件，`[NSArray arrayWithContentsOfURL:]`或者`[NSArray arrayWithContentsOfFile:]`或相应的方法`NSDictionary`

如果您正在写入 plist，您只需使用`[NSArray/NSDictionary writeToFile:atomically:]`

编辑以添加来自 Catfish_Man 评论的信息：

以上适用于根对象是数组或字典的 plist。对于其他根对象，请查看[NSPropertyListSerialization](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPropertyListSerialization_Class/Reference/Reference.html)

# php - 事件列表日历系统

> ID：15213223
> 
> 赞同：-1
> 
> 时间：2013-03-04T23:36:52.587
> 
> 标签：php, events, calendar

我正在寻找一个甚至开始这个问题的地方。我正在寻找一个代码或一个起点，在那里我可以动态地拥有一个事件日历。我希望它一次显示 3 个月、本月、下个月和下个月。我可以使用日期函数来做到这一点。我遇到的问题是正确的年份何时到来。所以在 12 月，它显示 2013 年 12 月、2014 年 1 月、2014 年 2 月。我可以让它在 2013 年 1 月重新启动。然后我还需要一个区域来显示事件从数据库中提取的。谁能帮我开始？或指引我去某个地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:41:27.947

我不确定你到底需要什么。

如果你需要一个活动日历，一个简单的谷歌搜索 php 日历脚本会让你有很多起点。

如果您正在寻找一种在一年内循环滚动日历的方法，我建议您采用以下方法之一。

根据特定日历代码的设置方式，您可以从种子日期中减去一年。例如...

在呈现任何月份之前，请检查年份并减去。

```
$currentStartOfNextMonthSeed = '2014-01-01';
$date = strtotime($currentStartOfNextYearSeed . ' -1 year'); 
```

或者只是使用正则表达式将年份更改为当前年份。

由于您没有提供具体示例，因此无法给出具体答案。但你确实要求一个起点，希望这会有所帮助。

祝你好运

蒂姆

Tim@mpact-media.com

# php - php：与 HTTP 标头的行为不一致

> ID：15213225
> 
> 赞同：0
> 
> 时间：2013-03-04T23:36:59.700
> 
> 标签：php, url, http-headers, http-status-code-404, httpresponse

我正在测试同一域上的大量链接，以查看它们是否存在。我正在使用以下代码：

```
function get_http_response_code($url)
{
    $headers = get_headers($url);
    return substr($headers[0], 9, 3);
}

function getURLs()
{
    foreach($allResults as $result)
    {
    $tempURL = 'http://www.doma.in/foo/'.$result.'/bar';
    if(get_http_response_code($tempURL) != "404" && get_http_response_code($tempURL) != "500")
    {
        $URLs[] = $tempURL;
    }
    else
    {
        echo $tempURL.' could not be reached<br />';
    }
    return $URLs;
}
$URLs = getURLs(); 
```

问题是，在确实存在的数百个中，该`$URLs`数组包含不存在的 URL (404)；有时是两个，有时是四个，但每次都会产生 HTTP/1.0 404 Not Found 错误。为什么会有这样的差异？我应该设置超时吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:45:31.377

正如我从您的代码中了解到的那样，问题出在变量错误`$url` 尝试这个。

```
...
foreach($allResults as $result)
{
    $tempURL = 'http://www.doma.in/foo/'.$result['url'].'/bar';
... 
```

`$url`变成`$result`

# java - 扩展 ArrayList 并在构造函数中引用反序列化的对象

> ID：15213226
> 
> 赞同：0
> 
> 时间：2013-03-04T23:37:10.880
> 
> 标签：java, this

我有一个名为 Library 的类，它扩展了 ArrayList。我这样做是因为（我认为）Library 类和 ArrayList 之间存在真正的 is-a 关系——Library 只是书籍的集合，加上一些方法。

其中一种方法是 load()，它反序列化保存的库对象。我的问题是：如何使反序列化的对象成为库的“活动”实例？我想在库的构造函数中做类似的事情`this = load()`，因为`load()`返回一个库对象。`cannot assign a value to final variable this`但是，当我尝试执行此操作时出现编译器错误。用于此目的的正确语法是什么？

```
public class Library extends ArrayList<Book> implements Serializable{

public Library(){
    load();
}
...

Library load() throws IOException, ClassNotFoundException {
    File f = new File (System.getProperty("user.home")+"\\Documents\\CardCat\\library.ser");   
    ObjectInputStream ois = new ObjectInputStream (new FileInputStream (f));   
    Library lib = (Library)ois.readObject();
    System.out.println("ran load sucessfully");
    return lib;
} 
```

编辑：似乎普遍的共识是这是错误的方法，我应该创建一个不扩展 ArrayList 但具有 ArrayList 实例变量的库类。这实际上是我大约一个小时前的结构，但我认为扩展 ArrayList 可能会更简单一些。我这样做的主要理由是 ArrayList 是 Library 类的唯一变量，我经常从其他类中引用 ArrayList ，每次我这样做时我都必须调用`library.libList`，所以我认为能够简单地引用`library`会更简单。回首往事，并考虑到您的意见，这似乎是一个相当微不足道的好处，但代价是对性能的重大影响。

尽管我想更好地了解这些成本是什么，但我是否正确理解了您的想法？我（显然，我敢肯定）仍在学习和尝试各种事物，并且非常感谢任何有助于我识别失败实验的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:43:08.430

您[不能`this`按设计](https://stackoverflow.com/questions/7979623/why-is-assignment-to-this-not-allowed-in-java)覆盖。

需要考虑的一些事项：

*   为什么库是 ArrayList？是否有任何情况下您需要将您的库分配给 ArrayList？图书馆是否有任何理由*必须*是列表并由数组支持？实施`Collection`可能是合理的，但会迫使您实施在您的设计中可能没有意义的方法。
*   如果库不是 ArrayList，那么您可以使用[composition](https://en.wikipedia.org/wiki/Object_composition)，无论如何它更容易使用。只要有一个成员变量，它是一个 ArrayList（或任何类型的集合）。
*   对于反序列化，您通常使用静态函数或工厂，而不是构造函数。请参阅其他答案以了解如何执行此操作。

* * *

为了用代码澄清我在下面的评论，这里有一个将书籍添加为实例变量的示例，然后创建从外部访问它们所需的任何方法：

```
class Library {
    private final Collection<Book> books = new ArrayList<Book>();

    public void addBook(Book book) {
        this.books.add(book);
    }

    public Collection<Book> getAllBooks() {
        ...
    }

    public Book getBookByTitle(String title) {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T23:40:32.727

你可以这样做：

```
public Library(){
    addAll(load());
} 
```

正如其他人所说，这样做并不是最好的设计实践，但也许你正在做一些我们不知道的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T23:39:51.510

您应该进行加载*而不是*创建`Library`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T23:39:54.580

正确的做法是让方法 thar 返回`load`一个`static`全新的实例：

```
class Library {
  static Library load(Stream in) 
} 
```

# r - 获取存储在单个列中的连续日期之间的时间

> ID：15213228
> 
> 赞同：1
> 
> 时间：2013-03-04T23:37:28.080
> 
> 标签：r, time-series

我试图弄清楚当事件存储为数据框中的一列日期时如何获取连续事件之间的时间。

```
sampledf=structure(list(cust = c(1L, 1L, 1L, 1L), date = structure(c(9862, 
9879, 10075, 10207), class = "Date")), .Names = c("cust", "date"
), row.names = c(NA, -4L), class = "data.frame") 
```

我可以得到答案

```
as.numeric(rev(rev(difftime(c(sampledf$date[-1],0),sampledf$date))[-1]))
# [1]  17 196 132 
```

但它真的很丑。除其他外，我只知道如何排除向量中的第一项，但不知道最后一项，所以我必须两次 rev() 才能删除最后一个值。

有没有更好的办法？

顺便说一句，我将使用 ddply 对每个客户 ID 的更大数据集执行此操作，因此该解决方案需要使用 ddply。

```
library(plyr)
ddply(sampledf, 
              c("cust"), 
              summarize,
              daysBetween = as.numeric(rev(rev(difftime(c(date[-1],0),date))[-1]))
) 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T23:38:51.290

你在找这个吗？

```
as.numeric(diff(sampledf$date))
# [1]  17 196 132 
```

要删除最后一个元素，请使用`head`：

```
head(as.numeric(diff(sampledf$date)), -1)
# [1]  17 196

require(plyr)
ddply(sampledf, .(cust), summarise, daysBetween = as.numeric(diff(date)))

#   cust daysBetween
# 1    1          17
# 2    1         196
# 3    1         132 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T23:40:05.713

你可以只使用`diff`.

```
as.numeric(diff(sampledf$date)) 
```

要省略最后一个元素，您可以执行以下操作：

```
[-length(vec)] #where `vec` is your vector 
```

在这种情况下，我认为您不需要保留任何内容，因为`diff`已经缩短了一个元素：

```
test <- ddply(sampledf, 
      c("cust"), 
      summarize,
      daysBetween = as.numeric(diff(sampledf$date)
))
test
#  cust daysBetween
#1    1          17
#2    1         196
#3    1         132 
```

# ruby-on-rails - Rails 多态关系不隐式传播

> ID：15213229
> 
> 赞同：2
> 
> 时间：2013-03-04T23:37:28.133
> 
> 标签：ruby-on-rails, ruby, capybara, rails-activerecord

我有以下两个课程

```
 class Car < Vehicle
   has_one :steering_wheel, as: :attached
 end

 class SteeringWheel < ActiveRecord::Base
   belongs_to :attached

   has_many :components
   has_one :rim, class_name: 'Components', order: 'id DESC'
   attr_accessible :components
 end

 class Component < ActiveRecord::Base
    include SpecificationFileService::Client

    attr_accessible :created_by
    belongs_to :steering_wheel 
 end 
```

然后在我的规格中：

```
context "given an attachment", :js do
  before do
    @car = create(:car, make: "honda")
    @steering_wheel = SteeringWheel.create(attached: @car)
    @steering_wheel.save
    @car.save
    @car.reload
  end
  specify "test the setup", :js do
    puts @car.steering_wheel
  end
end 
```

哪个打印：`nil`

我发现解决此问题的一种方法是在汽车上显式设置转向轮，如下所示：

```
 @car.steering_wheel = @steering_wheel 
```

就在`save`.

编辑：

正如下面评论中所建议的，我尝试添加 polymorphic: true，但这并没有解决问题。此外，我还充实了上面的 SteeringWheel 模型

我的问题是为什么，以及如何将其隐式添加到回调链中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:50:05.483

就像评论中提到的@abraham-p 一样，您需要将`belongs_to`关系声明为：

```
belongs_to :attached, polymorphic: true 
```

否则它将尝试查找`Attached`模型，并确保在您的`SteeringWheel`模型中包含这些字段：

```
attached_type
attached_id 
```

其余的由 Rails 解决:)

# php - 设计一个 PHP API 包装器

> ID：15213233
> 
> 赞同：2
> 
> 时间：2013-03-04T23:37:41.060
> 
> 标签：php, frameworks, wrapper

我想知道在一个 PHP 框架中实现两个 similair API 的好方法是什么？

我的想法是这样的：

*   /vendors/wrapperA.php - 扩展父级，实现 API **(A)**
*   /vendors/wrapperB.php - 扩展父级，实现 API **(B)**
*   Parent.php -**唯一直接引用**以使用 API 包装器的脚本
*   $config[] 数组用于 Parent.php 中的配置
*   index.php - 一个实现且**仅引用 Parent.php的网站**

假设 API 有很多方法，但我们只实现了两个简单的 API 调用：

*   connect() - 创建到服务的连接。
*   put() - 如果成功返回一个“putID”。

由于 API **(A)**和 API **(B)**不同，这就是包装器通过抽象这两种方法来实现其实用程序的方式。

现在，我的观点是：

*   在 PHP 中实现这一点的好方法是什么？
*   connect() 语句需要验证是否存在有效连接。
*   put() 语句需要返回一个 ID
*   我们不想暴露 put 方法中的差异，它只需要根据我们是否正确配置 API 身份验证来工作（无论是什么情况 - 通过密钥或其他方式）

IE

就像是

```
<?php $parent = new Parent();
$parent->connect(); //connect to one or both API's.
$parent->put('foo'); //push foo to the API
?> 
```

目前，我的所有代码都在 Parent.php 中。

在 Parent.php 中包含所有代码的问题

1.  代码蔓延
2.  如果我添加第三个 API，则缺少模块化插件。
3.  代码混乱 - 哪个 API 是哪个？

**编辑：根据 Marin 的回答设计的解决方案**

```
<?php 

/*** Interface ***/

interface API_Wrapper {
    function connect();
    function put($file);
} 

/*** API Wrappers ***/
class API_A_Wrapper implements API_Wrapper {
    function connect() {}
    function put($file) { print 'putting to API A.'; }
}

class API_B_Wrapper implements API_Wrapper {
    function connect() {}
    function put($file) { print 'putting to API B.'; }
}

/*** Factory ***/
class Factory {
  public static function create($type){ 
    switch ($type) {
      case "API_A" : 
        $obj = new API_A_Wrapper(); 
      break;
      case "API_B" :
        $obj = new API_B_Wrapper();  
      break;
    }
    return $obj;
   } 

} 

/*** Usage ***/

$wrapperA = Factory::create("API_A");
$wrapperA->put('foo');

$wrapperB = Factory::create("API_B");
$wrapperB->put('foo'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:49:20.840

将接口与关系一起使用，并在需要时单独调用：

```
interface Interface {
    function somefunction();
}

class Wrapper1 implements Relation {
    public function connect() {
        return;
    }
}

class Wrapper2 {
    public function action(Interface $s) {
        $textData = $s->query();
        return;
    }
}

$p = new Wrapper1();

$i = new Wrapper2();
$i->action($p); 
```

使用工厂作为关系：

```
function __autoload($class)
{
    include_once($class . '.php');
}

class DBfactory
{
    public static $pDB;

    public static function factory($szType = "")
    {
    if(!is_object(self::$pDB))
    {
        switch($szType)
        {
            case 'mysql':
                self::$pDB = new DBmysql;
                break;
            case 'mssql':
                self::$pDB = new DBmssql;
                break;
            default:
                self::$pDB = new DBmysql;
                break;
        }
    }
    return self::$pDB;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:32:57.010

你需要的是依赖注入。您有 2 个类 - 您称它们为包装器 - 每个类都涵盖不同的 API，但必须符合相同的接口。在您的网站中，您希望交替使用任一类，实际上是使用任何底层 API 而不会影响代码库的其余部分，因此是通用`Parent`接口。

但是，在某些时候，您的代码将不得不决定使用哪个包装器，如果您想包含新的`Parent`实现，您担心必须手动将这些新包装器包含在您的代码库中。

这个问题通过依赖注入来解决。这个想法是有一个专用的对象 - 一个工厂 - 封装可用包装器的所有细节，并且任何需要此刻包装器的代码都可以向该工厂询问它。显然，您的代码只需要处理`Parent`接口的工厂和实例。

至于工厂如何决定实例化哪个包装器是您的选择。许多人使用包含哪个类必须与代码的哪个部分一起使用的配置文件。这可以通过使用与包装器客户端关联的 id（即使用它们的代码）来实现，并且客户端在请求包装器时会给工厂这个 id。然后，工厂只需查找 id 并提供一个 ad-hoc 实例。

# php - onclick 将 1 添加到计数器 + 存储到服务器

> ID：15213236
> 
> 赞同：2
> 
> 时间：2013-03-04T23:38:37.797
> 
> 标签：php, javascript, jquery, button, onclick

我希望在我的网站上使用计数器，因此当有人单击某些按钮时，它会向计数器添加 +1。我想要它，这样当您刷新页面时，数字保持不变，而当不同的用户单击该按钮时，它只会向计数器添加 +1。

这可能吗？我对 Javascript 和 Jquery 还很陌生，所以如果你能解释清楚，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:54:57.607

## 使用 AJAX 和 PHP 与服务器上的文件进行通信：

（将此代码保存在文件中`index.php`，您就可以开始了！）

可能有一种更简单的方法，但我将向您展示如何使用**AJAX**（n* *o page refresh* *）和**PHP**来实现，这将允许您使用 JS 中的计数器值做任何您想做的事情。

提供的 PHP 不是世界上最安全的，但可能足以满足您的需求。`counter.txt`如果您的服务器文件夹中没有文件（与 index.php 文件的路径相同），它将自动创建一个名为的文件。

通过单击任何`button`元素（您可以更改 jQuery 选择器），AJAX get 将从文件中读取存储在文件中的当前值，然后发送一个递增的计数器值。

```
<?php
$file = 'counter.txt';
// CREATE FILE
if(!file_exists($file)){
    $create = fopen($file, 'w') or die("Could not create the counter database.");
    file_put_contents( $file , '0' );
    fclose($create);
}
// WRITE FILE
if( isset($_POST['count']) ){
    $msg = htmlentities(strip_tags($_POST['count']), ENT_QUOTES);
    file_put_contents($file, $msg);
}
?>

<!DOCTYPE html>
<html>

<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<meta charset=utf-8 />
<title>Flat-File db counter with PHP and AJAX by roXon</title>
</head>
<body>

<button>click me</button> 
<button>click me too!</button> 
refresh the page , the counter should be memorized from our auto-generated database file! ;)
<br><b></b>

<script>
    function addCount( newCounterValue ){
        $.ajax( {
            type: "POST",
            data: {count : newCounterValue},
            cache: false,
                    async: false,
            success: function() {
                $('b').append('<br>Succesfully sent: '+ newCounterValue);
            }
        });
    }
    $(function(){
        $('button').click(function(){       
            $.get('counter.txt', function(data) {
                // READ
                var counter = parseInt(data, 10) || 0;
                $('b').html('Retrieved counter from database = '+ data);
                // SEND
                addCount( ++counter ); // send preIncremented COUNTER
            });     
        });
    });
</script>

</body>
</html> 
```

* * *

客户端解决方案（**其他用户将无法使用！**）将使用 HTML5`localStorage`

`**[LIVE DEMO](http://jsbin.com/axeyaq/2/edit)**`

```
var counter = localStorage.getItem('counter') || 0;

$('button').click(function(){
     localStorage.setItem('counter', ++counter);
     alert(counter);
}); 
```

**注意**这只是客户端。您可以查看 PHP 如何动态创建文件并将该值发送到该文件中。单击时，我建议您使用 AJAX 联系该文件并在使用 PHP 更新它之前读取当前值。

# windows - 检测全屏模式切换，无需每秒手动检查

> ID：15213241
> 
> 赞同：0
> 
> 时间：2013-03-04T23:39:00.227
> 
> 标签：windows, winapi, window-messages

我有一个最上面的窗口。我需要它位于任何其他最顶层窗口的最顶层，但不覆盖任何全屏窗口：特别是：{Windows Media Player, Youtube flash player, RDP}

有一个持续检查的解决方案：

*   我检查的每 YYY 毫秒（在同一显示器上）是否存在另一个尺寸等于屏幕尺寸的最顶层窗口。
*   如果是这样：使我的窗口非最顶层，否则使其成为最顶层。

但我正在寻找另一种资源消耗较少的解决方案，它不会执行数十次系统调用并每秒遍历整个最顶层窗口树。

我可以处理任何 WM_

我可以将钩子注入一个进程。

问题：

如何检测同一桌面上的全屏窗口？

如何使用传入的 WM_(s) 或除连续检查以外的任何技术检测全屏模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:31:00.837

签出[`SetWindowsHookEx()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)以设置 CBT 挂钩 (WH_CBT)。特别是，当窗口被移动或调整大小时，[`CBTProc()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644977%28v=vs.85%29.aspx)您会收到通知。`WHCBT_MOVESIZE`

# bash - 按关键字过滤日志文件并为输出着色

> ID：15213243
> 
> 赞同：1
> 
> 时间：2013-03-04T23:39:27.707
> 
> 标签：bash, shell, unix, text, sed

我编写了一个 bash 脚本，它使用 sed 创建一个命令，该命令按关键字过滤文本，然后为输出着色。我做了很多试验和错误，并在谷歌上搜索技术。我知道这可以改进。有人可以提供建议吗？

我也希望能够像 tail 一样使用它 - 实时过滤和着色尾巴输出。有什么想法吗？

提前致谢！

```
function multigrep(){

#THIS WORKS - Recreate this, using input parameters
#sed -En '/(App)|(Spe)/p' ./flashlog.txt;

filename="/Users/stevewarren/Library/Preferences/Macromedia/Flash\ Player/Logs/flashlog.txt";
paramString="";

for element in "$@"
    do
        #echo $element;
        paramString="$paramString($element)|";
    done

#TRIM FINAL | OFF PARAMSTRING
paramString=${paramString:0:${#paramString}-1};

#CREATE SED EXPRESSION - '/($1)|($2)|(...)/p'
paramString="'/$paramString/p'";

#CREATE SED FUNCTION, CALL ON FILE
paramString="sed -En $paramString ./flashlog.txt"

echo $paramString;
echo "${txtbld}$(tput setaf 7)" > ./flashlog_output.txt;
eval $paramString >> ./flashlog_output.txt;
echo >> ./flashlog_output.txt;
#cat ./flashlog_output.txt;

cat ./flashlog_output.txt | while read LINE
do

    [[  $1 && ${1-x} ]] && 
        if grep -q $1 <<<$LINE; then
            echo "$(tput setaf 3)$LINE"
        fi

    [[  $2 && ${2-x} ]] && 
        if grep -q $2 <<<$LINE; then
            echo "$(tput setaf 7)$LINE"
        fi

    [[  $3 && ${3-x} ]] && 
        if grep -q $3 <<<$LINE; then
            echo "$(tput setaf 6)$LINE"
        fi

done 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T23:43:25.770

你知道[彩尾](http://www.console-colors.de/index.php?n=ColorizerTools.ColorTail)吗？我也在用它。您可以使用配置文件中的正则表达式配置着色。输出将如下所示：（是的！:)

![在此处输入图像描述](../Images/d3d52b71d1070940bb59da3a6ade842c.png)

# c# - SQL 查询到 LINQ 转换（LEFT JOIN 和 NULL 值）

> ID：15213244
> 
> 赞同：0
> 
> 时间：2013-03-04T23:39:28.763
> 
> 标签：c#

我正在尝试将 SQL 查询“翻译”为 LINQ，但直到现在都没有成功。

这是我的 SQL 查询，它返回一个结果，其中包含多个具有空值的列（正确输出）：

```
SELECT patient.idPatient, removed, fat.status AS FATstatus, fad.status AS FADstatus,
fa.status AS FAstatus, fdv.status AS FDVstatus, ffu.status AS FFUstatus, fmbct.status
AS FMBCTstatus, fnt.status AS FNTstatus, fs.status AS FSstatus, ftd.status AS FTDstatus  
FROM patient 
LEFT JOIN FormAdjuvantTreatment fat ON patient.idPatient = fat.idPatient
LEFT JOIN FormAdvancedDisease fad ON patient.idPatient = fad.idPatient
LEFT JOIN FormAnamnesis fa ON patient.idPatient = fa.idPatient
LEFT JOIN FormDemoVariables fdv ON patient.idPatient = fdv.idPatient
LEFT JOIN FormFollowUp ffu ON patient.idPatient = ffu.idPatient
LEFT JOIN FormMBCTreatment fmbct ON patient.idPatient = fmbct.idPatient
LEFT JOIN FormNeoadjuvantTreatment fnt ON patient.idPatient = fnt.idPatient
LEFT JOIN FormSurgery fs ON patient.idPatient = fs.idPatient
LEFT JOIN FormTumorDisease ftd ON patient.idPatient = ftd.idPatient
WHERE patient.idResearcher = '01-01'; 
```

这是我翻译的 LINQ 查询。我没有返回任何结果（输出不正确）：

```
var query = (from u in db.Patients.DefaultIfEmpty()
join fat in db.FormAdjuvantTreatments on u.idPatient equals fat.idPatient
join fad in db.FormAdvancedDiseases on u.idPatient equals fad.idPatient
join fa in db.FormAnamnesis on u.idPatient equals fa.idPatient
join fdv in db.FormDemoVariables on u.idPatient equals fdv.idPatient
join ffu in db.FormFollowUps on u.idPatient equals ffu.idPatient
join fmbct in db.FormMBCTreatments on u.idPatient equals fmbct.idPatient
join fnt in db.FormNeoadjuvantTreatments on u.idPatient equals fnt.idPatient
join fs in db.FormSurgeries on u.idPatient equals fs.idPatient
join ftd in db.FormTumorDiseases on u.idPatient equals ftd.idPatient
where u.idResearcher == idResearcher
select new
{
   u.idPatient,
   u.removed,
   FormAdjuvantTreatment = (fat.status == null ? "NULL" : fat.status),
   FormAdvancedDisease = (fad.status == null ? "NULL" : fad.status),
   FormAnamnesi = (fa.status == null ? "NULL" : fa.status),
   FormDemoVariable = (fdv.status == null ? "NULL" : fdv.status),
   FormFollowUp = (ffu.status == null ? "NULL" : ffu.status),
   FormMBCTreatment = (fmbct.status == null ? "NULL" : fmbct.status),
   FormNeoadjuvantTreatment = (fnt.status == null ? "NULL" : fnt.status),
   FormSurgery = (fs.status == null ? "NULL" : fs.status),
   FormTumorDisease = (ftd.status == null ? "NULL" : ftd.status),
}).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:29:13.053

感谢@lazyberezovsky 和@Pieter-Geerkens 我已经解决了我的问题。

SQL查询（左内连接）：

```
SELECT patient.idPatient, removed, fat.status AS FATstatus
FROM patient 
LEFT JOIN FormAdjuvantTreatment fat ON patient.idPatient = fat.idPatient
WHERE patient.idResearcher = '01-01'; 
```

正确翻译的 LINQ 查询（左内连接）：

```
var query = (from u in db.Patients.DefaultIfEmpty()
join fat in db.FormAdjuvantTreatments on u.idPatient equals fat.idPatient into JoinedPatientFAT
from fat in JoinedPatientFAT.DefaultIfEmpty()
where u.idResearcher == idResearcher
select new
{
u.idPatient,
u.removed,
FormAdjuvantTreatment = fat.status ?? "NULL"
}
).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:12:34.433

此 MSDN 链接演示了如何[在 LINQ 中编写 LEFT OUTER JOINS](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)代码：

# c# - LINQ2SQL Any()，不存在问题

> ID：15213247
> 
> 赞同：1
> 
> 时间：2013-03-04T23:39:49.620
> 
> 标签：c#, sql, sql-server, linq, linq-to-sql

在按条件从数据库中获取行时，我的 linq2sql 出现问题，`select n rows from table1 where table2 doesn't contain any rows by condition table1.id != table2.accId and table1.action != "action_constant"`我的 c# 中有这样的代码：

```
query = (from accsArray in db.Accs
         where accsArray.Valid == 1 &&
               !String.IsNullOrEmpty(accsArray.Password) && 
               accsArray.vip_rec == 0 || accsArray.data_col == null &&
               !db.Reaktors.Any(rk => rk.Action == action &&
                                      rk.Account_id == accsArray.id)

         select new DbAcc
         {
             id = accsArray.id,
             Login = accsArray.Login,
             Password = accsArray.Password,
             System = accsArray.System,
             //FriendsCount = Convert.ToInt32(accsArray.Friends_count)
         }).Take(count).OrderBy(acc => acc.id); 
```

`!db.Reaktors.Any(rk => rk.Action == action && rk.Account_id == accsArray.id)`这不起作用，在寻找我干净的 sql 代码时，我看到了这个：

```
SELECT [t2].[id], [t2].[Login], [t2].[System], [t2].[Password]
FROM (SELECT TOP (50) [t0].[id], [t0].[Login], [t0].[System], [t0].[Password]
      FROM [Collider].[dbo].[Accs] AS [t0]
      WHERE (([t0].[Valid] = 1)
             AND ([t0].[Password] <> '')
             AND ([t0].[Login] <> '')
             AND ([t0].[data_col] = 0))
         OR (([t0].[data_col] IS NULL)
             AND (NOT (EXISTS(SELECT NULL AS [EMPTY]
                              FROM [dbo].[Reaktor] AS [t1]
                              WHERE [t1].[Actionself] = '_take_acc_dc'
                                AND ([t1].[Account_id] = [t0].[id])))))) AS [t2]
ORDER BY [t2].[id] 
```

我`SELECT NULL AS [EMPTY] FROM [dbo].[Reaktor]`特别害怕，`NULL AS [EMPTY]`所以我认为这就是它无法正常工作的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:50:59.923

解决方案是正确放置括号并订购条件。良好的工作代码将如下所示：

```
query = (from accsArray in db.Accs
         where !db.Reaktors.Any(rk => (rk.Actionself == action 
                                       && rk.Account_id == accsArray.id)) 
               && accsArray.Valid == 1 
               && accsArray.Password != String.Empty 
               && accsArray.Login != String.Empty 
               && accsArray.data_col == 0
         select new DbAcc
         {
             id = accsArray.id,
             Login = accsArray.Login,
             Password = accsArray.Password,
             System = accsArray.System,
         }).Take(count).OrderBy(acc => acc.id); 
```

# arrays - rails 3 postgres 数组支持

> ID：15213251
> 
> 赞同：3
> 
> 时间：2013-03-04T23:40:03.630
> 
> 标签：arrays, ruby-on-rails-3, postgresql

我在 postgres 中有一个查询，它在其中一列中返回一个 postgres 数组：

```
SELECT e.context->'device' AS device, count(e.data->'model_name') AS members, ARRAY_AGG(e.data->'model_name') AS models
  FROM entity AS e
  WHERE e.data->'type'='chassis' GROUP BY e.context->'device', e.data->'model_name'; 
```

有没有`serialize`可以用来映射 rails 3 模型的 gem 或语句，以便我可以`models`直接用作 ruby​​ 数组？

我知道我可以在控制器中循环它，但这似乎不是很干燥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-05T07:55:32.930

如果有人发现这个并且像我一样希望添加对 Rails 3.2 应用程序的支持，我找到了[1.0 版本的 postgres_ext gem](https://github.com/DockYard/postgres_ext/tree/v1.0.0)。

1.0 版本依赖于 ActiveRecord 3.2。

更高的主要版本用于 Rails 4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T21:08:29.720

只是为了解决这个问题：最后我升级到了 rails4。它对数组和哈希都有很好的支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T08:43:57.557

我能找到的最接近的是[activerecord-postgres-array](https://rubygems.org/gems/activerecord-postgres-array)。目前尚不清楚它的维护情况如何，但总的来说实际代码并不太复杂或不稳定，因此我希望使用它是合理的。

我说这是在 DD::Pg 获得对 Pg 数组的直接支持之前在 Perl 中手动处理这些的人。代码简单且相对不变，因此过去有许多版本的事实表明这就是开始的地方。

# php - 保存数据时出现数据库错误

> ID：15213256
> 
> 赞同：0
> 
> 时间：2013-03-04T23:40:39.547
> 
> 标签：php, mysql, sql

我正在尝试将数据保存到数据库；我正在使用的查询是

```
$sql_query = 'UPDATE ' . 'config' . ' SET current_email = "' . $_POST["an email_data"] . '"'; 
```

在这种情况下爆发到

```
UPDATE config SET current_email = 'email address' 
```

我不断收到mysql错误`1054, unknown column 'current_email' in 'field_list'`

我尝试重新输入查询和数据库字段无济于事。他的专栏确实存在。

我有 5.4.3 版的 mySql。我以前从未遇到过这个问题，而且我束手无策。我已经死在水里三天了。我将不胜感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T23:46:56.300

在第一行中，您对 SQL 字符串使用双引号： SET current_email = **"** '

这将呈现为：

`UPDATE config SET current_email = "email address"`

相反，请尝试单引号：

`UPDATE config SET current_email = 'email address'`

见： [http ://dev.mysql.com/doc/refman/5.1/en/string-literals.html](http://dev.mysql.com/doc/refman/5.1/en/string-literals.html)

> 如果启用了 ANSI_QUOTES SQL 模式，则字符串文字只能在单引号内引用，因为在双引号内引用的字符串被解释为标识符。

# java - 调色板在java中交换一个BufferedImage

> ID：15213259
> 
> 赞同：0
> 
> 时间：2013-03-04T23:41:03.130
> 
> 标签：java, image-processing, image-manipulation

我需要为我正在开发的游戏的角色精灵进行调色板交换，因此如果多个玩家选择相同的角色，它们将具有不同的颜色。我已将所有精灵存储在 BufferedImages 中，并希望动态更改调色板。

例如，我想将任何红色像素更改为蓝色，将任何黑色像素更改为橙色，将任何黄色像素更改为粉红色。我需要交换大约 25 种颜色。

我已经做了一些研究，看起来我将不得不创建某种 ColorModel 并从该模型创建一个新的 BufferedImage？我不知道如何创建 ColorModel，所以如果有这方面的教程，那将非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-11T13:58:41.920

以下代码通过构造一个共享原始栅格数据的新 BufferedImage 来交换调色板。所以它运行很快，不会占用太多内存。

```
static BufferedImage switchPalette(BufferedImage bi,
        IndexColorModel icm) {
    WritableRaster wr = bi.getRaster();
    boolean bAlphaPremultiplied = bi.isAlphaPremultiplied();
    return new BufferedImage(icm, wr, bAlphaPremultiplied, new Hashtable());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:12:01.230

如果速度无关紧要，我会选择最愚蠢的解决方案：只需手动交换颜色。

[您可以使用BufferedImage.getRGB(...)](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html#getRGB%28int,%20int%29)获取所有像素值。然后检查颜色是否在您的列表中并相应地替换它。稍后您可以使用 setRGB 保存新颜色。

这是一个例子：

```
import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.HashMap;

import javax.imageio.ImageIO;

public class Equ{
    public static void main(String[] args) throws IOException {
        BufferedImage img = new BufferedImage( 20, 20, BufferedImage.TYPE_INT_ARGB );
        Graphics2D g = img.createGraphics();
        g.setColor( Color.white ); 
        g.fillRect( 0, 0, 20, 20 ); 
        g.setColor( Color.black ); 
        g.fillRect( 5, 5, 10, 10 ); 

        Color[] mapping = new Color[]{
            Color.black, Color.white, // replace black with white 
            Color.white, Color.green // and white with green
        };

        ImageIO.write( img, "png", new File( "original.png" ) ); 
        swapColors( img, mapping );     
        ImageIO.write( img, "png", new File( "swapped.png" ) ); 
    }

    public static void swapColors( BufferedImage img, Color ... mapping ){
        int[] pixels = img.getRGB( 0, 0, img.getWidth(), img.getHeight(), null, 0, img.getWidth() );
        HashMap<Integer, Integer> map = new HashMap<Integer, Integer>(); 
        for( int i = 0; i < mapping.length/2; i++ ){
            map.put( mapping[2*i].getRGB(), mapping[2*i+1].getRGB() ); 
        }

        for( int i = 0; i < pixels.length; i++ ){
            if( map.containsKey( pixels[i] ) )
                pixels[i] = map.get( pixels[i] ); 
        }

        img.setRGB( 0, 0, img.getWidth(), img.getHeight(), pixels, 0, img.getWidth() );  
    }
} 
```

# r - 如何将我建立的模型拟合到另一个数据集并获得残差？

> ID：15213260
> 
> 赞同：4
> 
> 时间：2013-03-04T23:41:07.220
> 
> 标签：r, statistics

我将混合模型拟合到数据 A，如下所示：

```
model <- lme(Y~1+X1+X2+X3, random=~1|Class, method="ML", data=A) 
```

接下来，我想看看模型如何拟合数据 B 并获得估计的残差。R中是否有我可以用来执行此操作的函数？

（我尝试了以下方法，但得到了所有新系数。）

```
model <- lme(Y~1+X1+X2+X3, random=~1|Class, method="ML", data=B) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T00:39:49.373

您在第二次尝试中获得新系数的原因`data=B`是该函数`lme`使用您提供的公式返回适合您的数据集的模型，并将该模型存储在`model`您选择的变量中。

要获取有关模型的更多信息，您可以键入`summary(model_name)`. 该`nlme`库包含一个名为的方法`predict.lme`，该方法允许您根据拟合模型进行预测。您可以键入`predict(my_model)`以使用原始数据集获取预测，或`predict(my_model, some_other_data)`如上所述键入以使用该模型但使用不同的数据集生成预测。

在您的情况下，要获得残差，您只需从观察值中减去预测值。所以使用`predict(my_model,some_other_data) - some_other_data$dependent_var`，或在你的情况下`predict(model,B) - B$Y`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T00:55:09.003

*您的模型：*

> 模型 <- lme(Y~1+X1+X2+X3, random=~1|Class, method="ML", data=A)

*基于您的模型的 2 个预测：*

> pred1=predict(model,newdata=A,type='response')
> pred2=predict(model,newdata=B,type='response')

*错过：计算误报百分比的函数，截止设置为 0.5。
（预测为真，但实际上这些观察结果并不积极）*

> 错过=函数（值，预测）{sum（（（预测> 0.5）* 1）！=值）/长度（值）}
> 
> 错过（A，pred1）
> 错过（B，pred2）

# objective-c - 如何遍历 NSCache 键

> ID：15213261
> 
> 赞同：9
> 
> 时间：2013-03-04T23:41:14.990
> 
> 标签：objective-c, nscache

我需要制作一个像 NSCache 这样的字典，它对于保存 cahce 是线程安全的。但是，有时，我需要刷新缓存的内容。NSCache 不提供迭代其键的方法。这里有什么替代方案？NSMutableDictionary 与同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-09-10T12:39:25.417

NSCache 没有这样的 API。因此，您应该使用 NSMutaleDictionary 或 NSMapTable 实现自己的缓存。主要思想是跟踪添加对象的顺序并在超出 countLimit 时删除较旧的对象。这可以使用一些有序结构来按添加顺序存储键，例如 NSMutableArray。此外，您应该跟踪内存警告并清理缓存。

为了线程安全，您可以使用任何您喜欢的锁（@synchronized、NSLock 等）。而且您绝对应该从可变存储的副本中获取 keyEnumerator 和 objectEnumerator 。

您可以查看具有遍历键和对象的能力的线程安全实现：[VSCache](https://github.com/ViacheslavSoroka/VSCache)

# java - JPanel 没有显示我的图形

> ID：15213262
> 
> 赞同：1
> 
> 时间：2013-03-04T23:41:22.087
> 
> 标签：java, swing, graphics, jpanel, paintcomponent

我在绘制 JPanel 时遇到问题。这是我目前正在做的事情。我知道该图像是有效的，因为我已将其写入此类的文件并获得了我想要绘制的确切图像，但是当我尝试将其绘制到 JPanel 时，它似乎立即被删除了。我试过谷歌，但已经干了。有任何想法吗？

```
import java.awt.Graphics;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.io.ByteArrayOutputStream;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;

import utilities.Log;

public class Signature extends JFrame {

    /**
     *
     */
    private static final long serialVersionUID = 8908413895953622794L;
    private JPanel contentPane;
    private JPanel panel;
    private BufferedImage image;

    /**
     * Create the frame.
     */
    private Signature() {
        setResizable(false);

        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        setBounds(100, 100, 631, 338);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(null);

        JLabel lblDateSigned = new JLabel("Date Signed:");
        lblDateSigned.setBounds(48, 248, 91, 14);
        contentPane.add(lblDateSigned);

        JLabel lblDateGoesHere = new JLabel("date goes here");
        lblDateGoesHere.setBounds(48, 262, 83, 14);
        contentPane.add(lblDateGoesHere);

        JButton btnClose = new JButton("Close");
        btnClose.addMouseListener(new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent e) {
                dispose();
            }
        });
        btnClose.setBounds(521, 258, 89, 23);
        contentPane.add(btnClose);
        panel = new JPanel() {
            private static final long serialVersionUID = -7148070953904995529L;

            @Override
            public void paintComponent(Graphics g) {
                super.paintComponent(g);
                if (image != null) {
                    Graphics gc = this.getGraphics();
                    // gc.setColor(Color.WHITE);
                    gc.drawImage(image, 0, 0, null);

                }

            }

            @Override
            public void repaint() {
                super.repaint();
                if (image != null) {
                    Graphics gc = this.getGraphics();
                    // gc.setColor(Color.WHITE);
                    gc.drawImage(image, 0, 0, null);
                    // gc.dispose();
                }
            }

        };

        panel.setBounds(10, 11, 600, 200);
        contentPane.add(panel);

    }

    public byte[] getImageByteArray() {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        byte[] imageInBytes = null;
        try {
            ImageIO.write(image, "jpg", baos);
            baos.flush();
            imageInBytes = baos.toByteArray();
            baos.close();
        } catch (IOException e) {
            Log.showMessage("Error processing signature: " + e.toString());
        }
        return imageInBytes;
    }

    public void setVisible() {
        setVisible(true);
        panel.repaint();
    }

    public Signature(BufferedImage image) {
        this();
        this.image = image;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T23:43:10.170

建议：

*   不要以这种方式在组件上调用 getGraphics()，因为获取的 Graphics 实例不会持久存在。为什么不在您的paintComponent 方法中使用JVM 提供的Graphics 对象呢？
*   不要将 MouseListeners 添加到 JButtons。这就是 ActionListener 的用途。
*   不要使用 null 布局和 setBounds，因为这会使您的程序非常不灵活并且难以更新和升级。
*   而是继续阅读并使用布局管理器。
*   不要`repaint()`像你正在做的那样覆盖。偶尔覆盖它是可以的，但不要像你试图做的那样做更多的绘图。
*   请阅读 Swing 教程，因为所有这些以及更多内容都在那里得到了很好的解释。

# java - 使用 .equals() 比较两个对象的变量

> ID：15213267
> 
> 赞同：-1
> 
> 时间：2013-03-04T23:41:37.160
> 
> 标签：java, object, equals

我需要搜索对象集合并找到哪个对象包含与我读入的字符串匹配的“名称”变量。下面是每个学生对象的样子：

```
public Student(String name, String class)
{
    this.name = name;
    this.class = class;
} 
```

我还在`.equals()`员工类中写了这个方法来做我的对象比较。

```
public boolean equals(Student student)
{
    return this.name.equals(student.name); 
} 
```

在我的主要课程中，我将学生的姓名转换为一个`Student`对象，并使用该`.equals()`方法将其与其他每个学生进行比较。

```
public static void loadStudentProjects(ArrayList students)
Student currentStudent;
String studentName = "name";

  while (count < students.size())
  {
    currentStudent = Students.create(studentName); 
 //The Student object is initialized as (name, null)

System.out.println(currentStudent.equals(students.get(count)));
count++; 
```

即使我知道第一次比较应该显示名称匹配，此代码也会为每次比较返回 false。有人告诉我，我需要将要比较的字符串名称转换为对象并使用`.equals()`方法，但我找不到让它工作的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T23:45:07.093

您正在*重载*equals 方法，而不是覆盖它。它应该看起来更像

```
public boolean equals(Object o) {
    ...
} 
```

* * *

在您的情况下，要检查任意对象`o`是否等于`this`学生，您需要

1.  检查这`o`确实是一个`Student`实例。
2.  假设*1*为真，检查`o`并`this`获得名称。

所以你可以尝试一些类似的东西

```
(o instanceof Student) && name.equals(((Student) o).name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:50:30.820

而不是`equals`我建议您使用`compareTo`（或`compareToIgnoreCase`）：

```
public int compareTo(Student s) {
    return this.name.compareTo(s.name);
} 
```

`compareTo``0` 如果字符串相等，则返回一个与`0`任何其他情况不同的数字。

要与`Student`对象进行比较，您可以使用以下内容：

```
public void aMethod(ArrayList students) {
    Student aStudent;
    int count;
    count = 0;

    aStudent = newStudent("name", "class") // Construct the Student object with the appropriate parameters
    for (Student s : students) {
        if s.compareTo(aStudent) == 0 {
            // Do something
        }
    }
} 
```

希望这可以帮助你

# ruby-on-rails - rvm pkg 安装 openssl

> ID：15213268
> 
> 赞同：1
> 
> 时间：2013-03-04T23:41:48.580
> 
> 标签：ruby-on-rails, gcc, rvm

我试图安装 openssl 但是当它说：

> 需要重新安装所有红宝石：
> 
> ```
> rvm reinstall all --force 
> ```

```
rvm reinstall ruby-2.0.0-p0 --with-gcc=gcc-4.7 --with-openssl-dir=$rvm_path/usr 
```

在我运行上面的行之后，我得到你请求使用 'gcc-4.7' 构建，但它不在你的路径中。我已经安装了 xcode，我认为已经安装了 gcc。

任何人都知道这个问题的任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:08:35.287

正如你在评论中所说，你跑了`which gcc-4.7`，它什么也没返回。这证实了 RVM 告诉您的内容，`gcc-4.7`不在您的`$PATH`. 如果您知道您`gcc-4.7`的计算机上某处存在二进制文件，请将其目录路径添加到`$PATH`

```
export PATH=$PATH:/path/to/the/binrary 
```

否则，既然你说`which gcc`确实返回`/usr/bin/gcc`，你也可以

*   运行时省略该`--with-gcc`选项`rvm reinstall ...`
*   指定`gcc`您在with或**_**`$PATH``--with-gcc=gcc``--with-gcc=/usr/bin/gcc`

# android - 有没有办法以 dpi 获得屏幕尺寸

> ID：15213270
> 
> 赞同：2
> 
> 时间：2013-03-04T23:41:54.883
> 
> 标签：android, measurement, android-screen

我正在使用这个：

```
int wi=getWindowManager().getDefaultDisplay().getWidth(); 
```

以像素为单位获取屏幕大小。有没有办法让屏幕尺寸在`dpi`？？？

我这样做是为了根据屏幕尺寸选择不同的布局。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T23:44:33.287

> 有没有办法以 dpi 获得 escreen 大小？？？

`DisplayMetrics`可以告诉你屏幕大小（以像素为单位），加上屏幕密度。从那里，您可以计算屏幕尺寸`dp`。

> 我这样做是为了根据屏幕尺寸选择不同的布局。

如果您将布局放置在正确的目录中（例如，、、），这将由资源框架自动为您`res/layout-large/`处理`res/layout-sw600dp/`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-20T18:32:32.437

您必须创建度量对象并执行以下操作

```
 public class LocalUtil extends Application {
private static Context context1;
private static DisplayMetrics  metrics;
public static void setContext(Context context)
{

        context1=context;
        metrics=context1.getResources().getDisplayMetrics();
}
public static float getDensity()
{
    return metrics.density;
}
public static int getScreenWidth()
{
    return metrics.widthPixels;
}
public static int getScreenHeight()
{
    return metrics.heightPixels;
}
public static float getScreenWidthInDpi()
{
    return metrics.widthPixels/metrics.density;
}
public static float getScreenHeightInDpi()
{
    return metrics.heightPixels/metrics.density;
} 
```

并且每个您想使用此方法的人都可以使用 setcontext 方法设置上下文并根据您的目的调用最佳方法，例如此代码此代码是主要活动的 oncreateView：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    LocalUtil.setContext(getApplicationContext());
    LocalUtil.getScreenWidthInDpi();
    //or call  each method you want
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T00:15:43.653

这是一种以像素为单位计算屏幕宽度和高度的方法。

```
int widthPixels = getWindowManager().getDefaultDisplay().getWidth();
int heightPixels = getWindowManager().getDefaultDisplay().getHeight();

float scale = getApplicationContext().getResources().getDisplayMetrics().density;

int width = (int) (widthPixels - 0.5f)/scale; //width of screen in dpi
int height = (int) (heightPixels - 0.5f)/scale; //height of screen in dpi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T23:44:54.410

“以 dpi 为单位的屏幕尺寸”是一个毫无意义的陈述。你只是想*获得*显示器的DPI吗？

其次，*不要这样做*。

说真的，停下。不要这样做。

按预期使用布局文件夹。如果您需要 HDPI 的不同布局，请将您的自定义布局放入`layout-hdpi`.

也就是说，如果您只需要密度：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindow().getDisplayMetrics(metrics);
int dpi = metrics.densityDpi; 
```

# c - 合并排序的分段错误

> ID：15213271
> 
> 赞同：0
> 
> 时间：2013-03-04T23:41:58.150
> 
> 标签：c

在一段时间没有碰过它之后，我最近又开始重温我的 C 了。因此，我首先尝试实现合并排序，但是在查看了这些行大约一个小时后，我无法确定出了什么问题。

```
int main(int argc,char** argv){
    printf("test\n");
    int x;
    int input[] = {1,2,3};
        int start=0;
        int end=2;
    for (x=0;x<5;x++){
        //printf("%i\n",x);
    }
    printf("Run mergeSort in main \n");
    mergeSort(input,start,end);

}

void mergeSort(int input[], int start, int end){
    printf("Running merge %i %i",start,end);
    int middle = (start + end)/2;
    if (start < end){
        mergeSort(input,start,middle);
        mergeSort(input,middle+1,end);
        merge(input,start,middle,end);
    }
} 
```

当我运行这个程序时，第一行“test”将打印然后“Run merge sort in main”但是

```
printf("Running merge %i %i",start,end); 
```

没有被执行，这让我感到困惑。我找不到任何内存分配问题，或者我可能遗漏了一些非常明显的东西。

请注意，合并功能已在侧面实现，但那部分代码与此问题没有直接关系，因此我没有包含它。

编辑剩余代码：

```
void merge(int input[],int start, int middle, int end){
    int save_start = start;
    int temp[end-start+1];
    int index = 0;
    printf("Start merge");
    while (start<=middle || middle+1<=end){
        if (input[start]<input[middle]){
            temp[index] = input[start];
            start++;
        } else {
            temp[index] = input[middle];
            middle++;
        } 
        index++;
    }
    while  (start<=middle){
        temp[index] = input[start];
        start++;
    }

    while (middle+1<=end){
        temp[index] = input[middle];
        middle++;
    }

    int i=0;
    int a;
    for (a=save_start;i<index;a++,i++){
        input[a]=temp[i];
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:43:42.523

您的输出很可能已被缓冲，只是在等待打印。将 a 添加`\n`到该字符串或调用`fflush(stdout)`.

就您的分段错误而言，您没有向我们展示足够的代码。使用调试器获取回溯，您可能会发现更多信息。

编辑：您的`merge`函数中有一些数组索引错误。请注意，您在第一个循环期间*移动到*中间 - 这对循环条件有什么影响？提示：你需要停在*实际*`start`的中间位置，一旦超过那个点就不要继续前进。

编辑2：你也有一些错误。

编辑 3：你`||`应该是`&&`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:35:41.023

我相信你的错误在这里：`while (start<=middle || middle+1<=end)`。

`start<=middle || middle+1<=end`当其中一项或多项为真时为真：`start<=middle`或者`middle+1<=end`，导致您的代码在该循环中超出数组的范围进行读写。

`start<=middle && middle+1<=end`当所有这些都为真时为真：`start<=middle`并且`middle+1<=end`，当循环可能读取和写入超出数组范围时，会导致循环中断。

你可能的意思是`while (start<=middle && middle+1<=end)`。

# android - WebView 覆盖的 SlidingDrawer 内容

> ID：15213273
> 
> 赞同：0
> 
> 时间：2013-03-04T23:42:26.860
> 
> 标签：android, xamarin.android, android-webview, slidingdrawer

我有一个 WebView 和一个 SlidingDrawer，当 openend 在 WebView 上打开时，或者至少是这样的想法。滑动抽屉句柄和内容显示在 WebView 的上方和下方，但不在 WebView 的顶部，这意味着 WebView 的内容是可见的，而不是 SlidingDrawer 的内容。

```
<RelativeLayout xmlns:d1p1="http://schemas.android.com/apk/res/android"
    d1p1:minWidth="25px"
    d1p1:minHeight="25px"
    d1p1:layout_width="fill_parent"
    d1p1:layout_height="fill_parent"
    d1p1:id="@+id/relativeLayout2"
    d1p1:paddingTop="10dp"
    d1p1:paddingRight="10dp"
    d1p1:paddingLeft="10dp">
    <RelativeLayout
        d1p1:minWidth="25px"
        d1p1:minHeight="25px"
        d1p1:id="@+id/relativeLayout1"
        d1p1:layout_width="wrap_content"
        d1p1:layout_height="wrap_content"
        d1p1:layout_alignParentTop="true">
        <LinearLayout
            d1p1:orientation="vertical"
            d1p1:minWidth="25px"
            d1p1:minHeight="25px"
            d1p1:layout_width="wrap_content"
            d1p1:layout_height="wrap_content"
            d1p1:id="@+id/linearLayout1"
            d1p1:layout_alignParentRight="true">
            <TextView
                d1p1:text="Time Remaining"
                d1p1:textAppearance="?android:attr/textAppearanceSmall"
                d1p1:id="@+id/studentQuestionZoneQuestionContent_textView_timeRemainingLabel"
                d1p1:typeface="normal"
                d1p1:textSize="22sp"
                d1p1:textColor="#ff000000"
                d1p1:layout_width="fill_parent"
                d1p1:layout_height="wrap_content" />
            <LinearLayout
                d1p1:orientation="horizontal"
                d1p1:minWidth="25px"
                d1p1:minHeight="25px"
                d1p1:layout_width="fill_parent"
                d1p1:layout_height="wrap_content"
                d1p1:id="@+id/linearLayout2"
                d1p1:gravity="center_horizontal">
                <TextView
                    d1p1:text="XXX"
                    d1p1:textAppearance="?android:attr/textAppearanceSmall"
                    d1p1:id="@+id/studentQuestionZoneQuestionContent_textView_timeValue"
                    d1p1:typeface="normal"
                    d1p1:textSize="25sp"
                    d1p1:textColor="#ff000000"
                    d1p1:layout_width="wrap_content"
                    d1p1:layout_height="fill_parent"
                    d1p1:gravity="bottom" />
                <TextView
                    d1p1:text="Seconds"
                    d1p1:textAppearance="?android:attr/textAppearanceSmall"
                    d1p1:id="@+id/studentQuestionZoneQuestionContent_textView_timeValueUnits"
                    d1p1:layout_width="wrap_content"
                    d1p1:layout_height="fill_parent"
                    d1p1:typeface="normal"
                    d1p1:textSize="19sp"
                    d1p1:textColor="#ff000000"
                    d1p1:gravity="bottom"
                    d1p1:paddingLeft="10dp" />
            </LinearLayout>
        </LinearLayout>
        <TextView
            d1p1:text="Question Description"
            d1p1:textAppearance="?android:attr/textAppearanceLarge"
            d1p1:layout_width="wrap_content"
            d1p1:layout_height="wrap_content"
            d1p1:id="@+id/studentQuestionZoneQuestionContent_textView_questionDescription"
            d1p1:layout_centerInParent="true"
            d1p1:typeface="normal"
            d1p1:textSize="25sp"
            d1p1:textColor="#ff000000" />
    </RelativeLayout>
    <SlidingDrawer
        d1p1:content="@+id/content"
        d1p1:handle="@+id/handle"
        d1p1:minWidth="25px"
        d1p1:minHeight="25px"
        d1p1:layout_width="fill_parent"
        d1p1:layout_height="fill_parent"
        d1p1:id="@+id/slidingDrawer1"
        d1p1:layout_alignParentBottom="true"
        d1p1:layout_centerHorizontal="true"
        d1p1:background="#00000000">
        <Button
            d1p1:id="@+id/handle"
            d1p1:layout_width="wrap_content"
            d1p1:layout_height="wrap_content"
            d1p1:text="Scratchpad"
            d1p1:background="@drawable/button_question_zone_scratch_pad_without_annotation" />
        <LinearLayout
            d1p1:id="@+id/content"
            d1p1:layout_width="match_parent"
            d1p1:layout_height="match_parent"
            d1p1:minWidth="25px"
            d1p1:minHeight="25px">
            <SurfaceView
                d1p1:layout_width="fill_parent"
                d1p1:layout_height="fill_parent"
                d1p1:id="@+id/surfaceView1"
                d1p1:background="#ffffffff" />
        </LinearLayout>
    </SlidingDrawer>
    <Button
        d1p1:text="Scratchpad"
        d1p1:id="@+id/studentQuestionZoneQuestionContent_button_scratchpad"
        d1p1:background="@drawable/button_question_zone_scratch_pad_without_annotation"
        d1p1:typeface="normal"
        d1p1:textSize="22sp"
        d1p1:textStyle="bold"
        d1p1:textColor="#ff666666"
        d1p1:layout_width="wrap_content"
        d1p1:layout_height="wrap_content"
        d1p1:layout_alignParentBottom="true"
        d1p1:layout_centerHorizontal="true"
        d1p1:paddingLeft="50dp"
        d1p1:paddingRight="10dp"
        d1p1:visibility="invisible" />
    <WebView
        d1p1:id="@+id/studentQuestionZoneQuestionContent_webView_content"
        d1p1:layout_below="@id/relativeLayout1"
        d1p1:layout_above="@id/studentQuestionZoneQuestionContent_button_scratchpad"
        d1p1:layout_width="fill_parent"
        d1p1:layout_height="fill_parent" />
    <ProgressBar
        style="@android:style/Widget.Holo.ProgressBar.Large"
        d1p1:layout_width="wrap_content"
        d1p1:layout_height="wrap_content"
        d1p1:id="@+id/studentQuestionZoneQuestionContent_progress_loadingContent"
        d1p1:layout_below="@id/relativeLayout1"
        d1p1:layout_above="@id/studentQuestionZoneQuestionContent_button_scratchpad"
        d1p1:layout_centerHorizontal="true" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:51:02.743

重新排列布局文件，使`SlidingDrawer`代码出现在代码下方`WebView`。小部件的 z-index 由其在文件中的位置决定。文件下方的小部件具有更高的 z-index。

你也可以使用`View.bringToFront()`.

# php - 密码保护 resque-web

> ID：15213282
> 
> 赞同：1
> 
> 时间：2013-03-04T23:43:18.733
> 
> 标签：php, ruby-on-rails, ruby, resque, php-resque

我正在`php-resque`使用 PHP 运行并已安装`resque-web`以使用管理界面。

**问题：**您如何使用密码保护`resque-web`页面？我不熟悉 Ruby/Rails/Sinatra，所以不需要太多知识的解决方案将是完美的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:44:13.303

您可以使用`Resque::Auth::Basic`-- 只需在 config.ru 中指定类似的内容：

```
map "/resque" do
  use Rack::Auth::Basic do |username, password|
    [username, password] == ['admin', 'admin']
    end
  run Resque::Server.new
end 
```

## 笔记 ：

`/resque`是我想挂载 resque-web 的路径，但你可以选择自己的。

还有其他方法可以做到，但这是基本方法。

希望这个

**编辑**

哦，你的意思是你根本没有 Sinatra 应用程序？出色地。那会很痛苦。然后，您可以使用 2 种方法：

a) 定义一个 config.ru 文件并在其中编写上面的代码并执行以下操作：`rackup config.ru -p 3001`并通过 web-server 重定向（代理传递）`/resque`到该 URL

b）我建议你在网络服务器本身上应用你的 BASIC AUTH（我知道 nginx 有它检查[这个](http://wiki.nginx.org/HttpAuthBasicModule)确保 Apache 或 Lighthttpd 也有相同的）

我希望现在它是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:25:12.467

使用密码保护网页或目录的最简单方法是使用 .htaccess/.htpasswd 文件。

要创建这些文件，您可以使用这样的在线生成[器](http://tools.dynamicdrive.com/password/)

# javascript - 地图在 IE9 中缩小 svg

> ID：15213288
> 
> 赞同：2
> 
> 时间：2013-03-04T23:43:42.977
> 
> 标签：javascript, html, css, d3.js

我有一张地图，每当我放大地图时，地图都会变大（缩放工作正常），但地图超出了 SVG 的边缘，因此覆盖了我网页的其他功能。这只发生在 IE9 中。在 chrome 中，每当我放大地图时，地图总是停留在 SVG 内部。有没有其他人遇到过这个问题并提出解决问题的方法？我想将地图保留在 SVG 中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:05:26.880

这是 IE9 中的一个错误。IE9 不尊重默认的 SVG 溢出模式，它必须被隐藏。

`style = "overflow:hidden"`例如，如果您在最外层的 SVG 元素或周围`<DIV>`元素中手动设置 ，则可以更正此行为

```
<div style = "overflow:hidden"> <svg> ... </svg> </div> 
```

在 JavaScript 中

```
divElement.setAttribute("style", "overflow:hidden"); 
```

另请参阅[此处](https://stackoverflow.com/questions/5971320/svg-image-is-not-cropped-in-ie9)和[此处](https://stackoverflow.com/questions/5642815/svg-draws-outside-canvas-boundary-in-internet-explorer-9)。

# scheme - 两个关联列表方案

> ID：15213294
> 
> 赞同：-1
> 
> 时间：2013-03-04T23:44:06.977
> 
> 标签：scheme, racket

假设我有两个函数返回关联列表，其中一个给出每个人拥有的瓶子总数，另一个给出他们获得瓶子所需的天数。如何通过取两个列表的平均值来组合列表？给定

```
(define (lookup k alst)
  (cond [(empty? alst)
         empty]
        [(equal? k (first (first alst)))
         (second (first alst))]
        [else 
         (lookup k (rest alst))])) 
```

和

```
(define (put k v alst)
  (cond [(empty? alst)
         (list (list k v))]
        [(equal? k (first (first alst)))
         (cons (list k v) (rest alst))]
        [else
         (cons (first alst) 
               (put k v (rest alst)))])) 
```

所以说函数`(total-bottles lst)`返回 `'((bob 10) (tim 30) (sally 25))`和

`(days-taken lst)`会回来 `'((bob 2) (tim 3) (sally 5))`

我将如何创建一个函数来组合平均每天瓶数函数的列表，该函数将返回平均每天收集的瓶子数量以返回此结果？ `(average lst)` `'((bob 5) (tim 10) (sally 5))`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:30:15.137

如果按照您的建议，列表的顺序相同并且包含完全相同的人，那么我建议您查看[HtDP 的第 17.2 节](http://www.htdp.org/2003-09-26/Book/curriculum-Z-H-1.html#node_toc_node_sec_17.2)，“同时处理两个列表”的案例 2。它有一堆正是这种类型的问题。

如果这不是与课程相关的问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T01:02:01.870

如果两个列表包含相同的人且顺序相同，请按照@JhonClements 的建议进行操作，并查看 HtDP 中的配方。为了给你一个想法，这里是解决方案的一般结构，填空：

```
(define (average l1 l2)
  (if <???>                   ; if one of the lists is null
      <???>                   ; return null
      (cons (list             ; else cons a new 2-element list, its first element
             <???>            ; is the name in the current position in either list
             (/ <???> <???>)) ; and calculate the average between current elements
            (average <???> <???>)))) ; finally, advance recursion over both lists 
```

请注意，为了确定其中一个列表是否为空*以及*选择人名，您使用哪个列表并不重要 - 因为我们假设列表具有相同的长度和相同的人，在同一个职位。但是，为了计算平均值，您需要考虑*每个*列表中的当前元素。完成后，不要忘记测试您的解决方案：

```
(average (total-bottles lst)
         (days-taken lst))

=> '((bob 5) (tim 10) (sally 5)) 
```

# c++ - 如何在 c++ 中使用 mmap 将整数数组正确写入文件

> ID：15213298
> 
> 赞同：0
> 
> 时间：2013-03-04T23:44:17.527
> 
> 标签：c++, file, io, mmap

我目前正在尝试使用 mmap 将整数从数组写入 .txt 文件。但是，我面临一个无法解决的意外问题。首先，这是我试图将整数数组写入文件的代码。

```
bool writeFileFromArrayByMemoryMap( int *&arrayToWriteInto, int size, char *output_file_name){ 
    int sizeForOutputFile = size * sizeof(int);
    int openedFile = open(output_file_name, O_RDWR | O_CREAT); //openning the file with the read&write permission
    lseek (openedFile, sizeForOutputFile-1, SEEK_SET);
    write (openedFile, "", 1);

    int *memoryBuffer = (int *)mmap(NULL, sizeForOutputFile, PROT_READ | PROT_WRITE, MAP_SHARED, openedFile, 0); //creating a memory mapping

    int currentIndex = 0; //the current index to put currentIntegerToPutArray to the array
    int *currentByte = memoryBuffer;
    while(currentIndex < size) {

        sprintf((char *)currentByte, "%d\n", arrayToWriteInto[currentIndex]);
        currentByte++;
        currentIndex++;
    }
    close(openedFile); //closing the file
    munmap(memoryBuffer, sizeForOutputFile); //remove the maping*/
return true;} 
```

数组和文件的路径由调用者传递，目前大小为100。实际上，我要写入的文件大小比 100*sizeof(int) 大得多，但为了测试我只是把它变小了。尽管如此，我还是无法正确地写出整数。输出文件正确写入了一些结果，但过了一会儿它没有进入新行，然后它写入所有整数而不用新行分隔它们。这样做的原因可能在哪里？据我所知，我正确设置了文件的大小，但似乎问题可能与错误地使用文件的字节有关。

**编辑：**我还发现，如果程序试图写入一个大于 999 的值，那么它就会崩溃。如果数组中充满了小于 1000 的值，那么正确写入是没有问题的。为什么它不能正确写入大于 999 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:59:53.447

在阅读了更多之后，我认为一个核心问题是 sprintf 中的 %d\n。

%d 写入可变数量的字节。例如，1\n 产生 2 个字节。315\n 产生 4。1024\n 产生 5。您的循环增量 (currentByte++) 假设每次写入四个字节。事实并非如此。

你可能想要这样的东西。

```
char *pc = (char*)memoryBuffer
for(int i=0;i<size;++i) {
    pc+=sprintf(pc, "%d\n", arrayToWriteInto[i]);
} 
```

但是，您的变量名称 arrayToWriteInto 非常具有误导性。该代码似乎只能从中读取。arrayToWriteInto 是源还是目标？

# android - 使用 Scrollview 和 tablelayout 的片段布局限制

> ID：15213310
> 
> 赞同：0
> 
> 时间：2013-03-04T23:45:08.563
> 
> 标签：android, layout, fragment

我是 android dev 的初学者，我在以下问题上苦苦挣扎。我想创建一个带有以编程方式创建的表格布局的片段。我首先从一个 Activity 而不是我这样做的片段开始：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    View view = getLayoutInflater().inflate(R.layout.activity_testtable, null,false);
    fillLayout(view);       
    setContentView(view);
}

protected void fillLayout(View rootView) {

    TableLayout tl;
    TableRow    tr;
    TextView    tv;
    int i = 0;  

    tl = (TableLayout) rootView.findViewById(R.id.time_range);

    for (i = 0 ; i < 10  ; i++ ) { 
        tv = new CellWorkshopTable(this);
        tv.setText("11h00 - 14h40" );
        tr = new TableRow (this);
        tr.addView(tv);    
        tl.addView(tr); 
    }

    [...]

} 
```

它工作得很好，表格是按照我想要的方式创建的，在 2 轴上滚动等等。然后我想把它设置成一个片段，所以我在我的片段中做了以下操作：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View aView = inflater.inflate(R.layout.activity_testtable, container, false);   
    fillLayout(aView);  
    return aView;
} 
```

因此，当我提交片段时，什么都没有出现，logcat 中没有错误，没有崩溃，似乎一切都在那里，但没有显示任何内容。

这是布局，目的是要有完整的结构，只需添加 tableRow 和单元格（它们是 textviews）：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/time_table"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:scrollbars="vertical"
android:padding="0dp"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="0dp" >

    <TableLayout
        android:id="@+id/time_range"
        android:layout_width="wrap_content"
        android:layout_height="match_parent" >
    </TableLayout>

    <HorizontalScrollView
        android:id="@+id/horizontalScrollView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:orientation="vertical"
            android:padding="0dp" >

            <TableLayout
                android:id="@+id/header_rooms"
                android:layout_width="wrap_content"
                android:layout_height="match_parent" >
            </TableLayout>

            <TableLayout
                android:id="@+id/time_table_content"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >
            </TableLayout>
        </LinearLayout>
    </HorizontalScrollView>
</LinearLayout>
</ScrollView> 
```

所以在写这个问题的时候**我试图通过删除Horizo​​ntalScrollView和他的孩子来简化布局，然后在第一个tablelayout中添加的TableRows然后显示**

删除 Horizo​​ntalScrollView 但保留 TableLayout+id/header_rooms 和 TableLayout+id/time_table_content，使 header_rooms 工作和 time_table_content KO。

那么片段是否有布局数量限制，我该如何规避呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:27:30.710

事实上，通过清理我的布局中所有不必要的元素，它就会按预期工作。

所以片段似乎对布局元素组合更加“严格”。

# c++ - 构造函数重载

> ID：15213312
> 
> 赞同：0
> 
> 时间：2013-03-04T23:45:22.960
> 
> 标签：c++, oop

我有以下继承：

Size_(基类) ---->Size2_ -------> Size3_

当我调用构造函数时：

```
Size3_<int> a(2,2,1);
Size3_<int> b(3,3,1);
Size3_<double> c(1,1,0);

Size3_<double> out=(Size3_<double>(b-a))
CPPUNIT_ASSERT(out==c); 
```

我收到以下编译器问题（g++）：

```
SteerableTests.cpp: In member function ‘void SteerableTests::testsize3()’:
SteerableTests.cpp:22:34: error: call of overloaded ‘Size3_(Size3_<int>)’ is ambiguous
SteerableTests.cpp:22:34: note: candidates are:
Size3.h:107:2: note: Size3_<Tp>::Size3_(const cv::Size_<_Tp>&) [with Tp = double]
Size3.h:105:2: note: Size3_<Tp>::Size3_(const Size2_<Tp>&) [with Tp = double]
Size3.h:100:2: note: Size3_<Tp>::Size3_(const Size3_<Tp>&) [with Tp = double, Size3_<Tp> = Size3_<double>] 
```

因此继承的对象也被视为基础对象。如何告诉g ++编译器选择继承阶段最低的？在 Visual Studio 中，它可以工作。

P/S：这里是构造函数列表：

```
Size3_(const Size3_& sz);
Size3_(const Size2_<Tp>& sz2);
Size3_(const Size_<Tp> & cvsz); 
```

# ssis - 如何在 SSIS 包中为平面文件中的所有行添加一个常量前缀？

> ID：15213317
> 
> 赞同：0
> 
> 时间：2013-03-04T23:45:41.337
> 
> 标签：ssis

我有一个带有*`Execute Process Task`*控制流选项卡的 SSIS 包。我*`notepad.exe`*在任务中调用以读取文本文件。我正在尝试替换**`\r\n`**为，**`\r\n\test`**以便将文本测试作为所有行的第一列的前缀。Thie 不会产生正确的结果。

### 文本文件数据：

```
Line 1{CR}{LF}
Line 2{CR}{LF}
Line 3 
```

### 预期输出：

```
TestLine 1{CR}{LF}
TestLine 2{CR}{LF}
TestLine 3 
```

我无法使用*notepad.exe*使用*Execute Process Task*来实现此输出。如何使用*Execute Process Task*实现此输出？SSIS 中是否还有其他任务可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:14:24.743

### 执行流程任务：

*执行流程任务*不适合您尝试执行的任务。您可以`Script Task`读取文件内容并在行前加上您选择的文本，或者您可以使用*`Data Flow Task`*来通过配置实现相同的目的，而无需任何编码。

### SSIS 2012 包说明了一个示例：

下面使用 SSIS 2012 创建的包说明了如何读取文本文件的内容，然后在每行前面加上一个文本短语，以将输出写入不同的平面文件。

假设您需要读取一个名为的文件，该文件*`Products.txt`*具有以下信息，每行以回车符和换行符结尾*`{CR}{LF}`*

![源文件](../Images/8eb7cbff1649dc6abe425b07eed9d85b.png)

创建一个名为*`SO_15213317.dtsx`*. 此示例使用 SQL Server Data Tools (SSDT) 2012 创建包，但此示例中的逻辑适用于较旧的 SSIS 版本 2005 至 2008 R2。

将 a 拖放*`Data Flow Task`*到“*控制流*”选项卡上。右键单击包底部的*Connection Manager**`New Flat File Connection...`*选项卡，然后单击。此连接管理器将用于读取源文件。

![SSIS 包](../Images/ddda61c164861befdb008cfca0ad4b37.png)

在平面文件连接管理器编辑器上，执行以下步骤：

*   将名称设置为*`FILE_Products`*
*   将描述设置为*`Read the products information from flat file.`*
*   浏览到文件所在的位置并选择文件。
*   其余属性将根据文件中的数据继承。
*   *`Column names in the first data row`*如果文件中有列标题，请选中该框
*   点击*`Columns`*页面。

![平面文件连接管理器编辑器 - 常规](../Images/e05ef5c2e9031bc86bfb6477ae892433.png)

*将“列*”选项卡保留为默认设置，然后单击*`Advanced`*“页面”。

![平面文件连接管理器编辑器 - 列](../Images/adb8c89e3ac19322e75a5ed61e29e2a4.png)

高级页面会根据标题信息自动配置列名，SSIS 也会对数据类型做出很好的猜测。在这种情况下，它决定列数据类型是字符串。

![平面文件连接管理器编辑器 - 高级](../Images/ed5de7e1c10da50350cf34dc89166f98.png)

单击“*预览*”选项卡以简单地查看文件数据。单击确定关闭平面文件连接管理器编辑器。

![平面文件连接管理器编辑器 - 预览](../Images/ba9cfd75cf186f439c92238ead262a0d.png)

双击控制流选项卡上的*数据流任务*以切换到*数据流*选项卡。在 Data Flow Task 上，拖放 a*`Flat File Source`*以读取源文件。如下所示配置*平面文件源。*

![平面文件源编辑器 - 连接管理器](../Images/80b863ddabf217abdd654fe95811504b.png)

列将自动配置。单击确定关闭平面文件源编辑器。

![平面文件源编辑器 - 列](../Images/73c696d19704835baee080e16a733077.png)

要在所有行上为文本添加前缀**`Test`**，您需要使用*`Derived Column Transformation`*. 在平面文件源之后拖放一个*派生列转换。*将*平面文件源*连接到*派生列转换*。您可以添加新列或替换现有列。该示例使用以下表达式添加一个新列。此表达式将文本 Test 作为列的传入值的前缀*`ProductName`*，然后将它们类型转换为长度为 54 个字符的 SSIS 数据类型 DT_WSTR。

```
(DT_WSTR,54)("Test" + ProductName) 
```

![派生列转换](../Images/1334df082f7455e48a9c5f34e2a7c492.png)

拖放 a*`Flat File Destination`*以将输出写入另一个文本文件。在*Flat File Destination Editor*上，单击**`New...`**按钮为目标文件创建一个新的 Flat File Connection Manager。

![平面文件目标编辑器 - 连接管理器](../Images/346872827df310f9d3f74a22cc82223f.png)

**`Delimited`**在*`Flat File Format`*对话框中选择并单击确定。

![平面文件格式](../Images/94f16530a1b914e537c04e7e7d937776.png)

在平面文件连接管理器编辑器上，执行以下步骤：

*   将名称设置为*`FILE_NewProducts`*
*   将描述设置为*`Write the data to the new product flat file..`*
*   浏览到应保存文件的位置并为文件命名。
*   根据要求配置其余属性。
*   *`Column names in the first data row`*如果您需要将列标题写入文件，请选中该框
*   点击*`Columns`*页面。

![平面文件连接管理器 - 常规](../Images/1fa36403116aeb620e0af4b41f84a7c5.png)

使用行和列分隔符配置列页面。

![平面文件连接管理器 - 列](../Images/95d37c2a468a30d613ff5e29de2caa3f.png)

在“*高级*”页面，单击列**`ProductName`**列，然后单击*`Delete`*。您可以随意命名该列。

![平面文件连接管理器 - 高级](../Images/3e1ccd7a7df6bb7fcf749c040c176c9a.png)

只有该列*`NewProductName`*将保留在目标连接管理器上。单击确定。

![平面文件连接管理器 - 高级](../Images/0295a210f5ed5c72834ae5cc3d6ae17b.png)

在*Flat File Destination Editor*上，确保选择正确的平面文件连接管理器。

![文件文件目标编辑器 - 连接管理器](../Images/eb98075a15829d8cfd032caa9d316145.png)

单击“*映射*”页面以配置列映射以写入数据。

![文件文件目标编辑器 - 列](../Images/fadb1c147488de7bb959e4e1162e08c7.png)

配置数据流任务后，包应如下所示。

![数据流任务](../Images/9b379f6acf4e6d26d8f1d0c9f79defec.png)

执行包读取源文件并生成带有文本前缀的新输出文件。

![包执行](../Images/e8739cafee8c50f00ea367a82f0f42da.png)

新生成的文件`NewProducts.txt`将包含前缀文本短语**`Test`**

![输出文件](../Images/15b65fbda0abecde9e189c23d5b879da.png)

### 其他选项：

有多种不同的方式来读取文件，您也可以使用*`Script Task`*. 但是，此处的示例说明了读取 SSIS 包中的文本文件的适当方法。这应该让您了解如何设计处理平面文件或分隔文件的 SSIS 包。

# mysql - MYSQL 显示结果，即使一张表的计数为 0

> ID：15213320
> 
> 赞同：0
> 
> 时间：2013-03-04T23:46:06.697
> 
> 标签：mysql, sql, count

例如，如果计数为 0，我试图让计数显示为 0

目前的结果：

```
Extension    Calls
1234         1
1345         2 
```

但我希望它显示：

```
Extension    Calls
1234         1
1245         0
1345         2

SELECT c.Extension,count(c.Extension),0 as Calls 
from call c
where c.callType=3 
and (c.StartTime between TIMESTAMP(CURDATE(),'06:30:00') and TIMESTAMP(CURDATE(),'07:00:00'))
group by c.Extension 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:53:10.690

联合中的第一个查询已经在具有给定时间的呼叫并在给定时间发生的扩展即将到来的问题中可用。第二个查询只是对调用次数为零的查询的否定。

```
 SELECT c.Extension,count(c.Extension) as Calls 
        from call c
        where c.callType=3 
        and (c.StartTime between TIMESTAMP(CURDATE(),'06:30:00') and TIMESTAMP(CURDATE(),'07:00:00'))
        group by c.Extension
    union
        SELECT c.Extension,0 as Calls 
        from call c
        where (c.callType=3 
            and (c.StartTime between TIMESTAMP(CURDATE(),'06:30:00') and TIMESTAMP(CURDATE(),'07:00:00'))) = false
        group by c.Extension
    order by Extension 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:01:47.023

```
SELECT
    A.Extension,
    IFNULL(B.ExtensionCount,0) Calls
FROM
(
    SELECT DISTINCT Extension
    FROM call WHERE callType=3 AND
    StartTime BETWEEN TIMESTAMP(CURDATE(),'06:30:00')
    AND TIMESTAMP(CURDATE(),'07:00:00')
) A
LEFT JOIN
(
    SELECT Extension,COUNT(1) ExtensionCount
    FROM call WHERE callType=3 AND
    StartTime BETWEEN TIMESTAMP(CURDATE(),'06:30:00')
    AND TIMESTAMP(CURDATE(),'07:00:00')
    GROUP BY Extension
) B
USING (Extension); 
```

请确保您有这些索引

```
ALTER TABLE call ADD INDEX
callType_StartTime_Extension_ndx (callType,StartTime,Extension);
ALTER TABLE call ADD INDEX Extension_ndx (Extension); 
```

这样，查询不会从表中读取。它将从索引中读取所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T00:02:56.280

您可以使用条件聚合来做到这一点：

```
SELECT c.Extension,
       sum(case when c.callType=3 and
                     c.StartTime between TIMESTAMP(CURDATE(),'06:30:00') and TIMESTAMP(CURDATE(),'07:00:00')
                then 1
                else 0
           end) as calls
from call c
group by c.Extension 
```

# c# - 来自外部类 c# 的隐式输入

> ID：15213324
> 
> 赞同：0
> 
> 时间：2013-03-04T23:46:31.910
> 
> 标签：c#, generics, types

如何让所需的代码在下面工作：

```
class Program {
        static void Main(string[] args) {

            List<string> strings = new List<string>(); 
            List<int> ints = new List<int>(); 
            List<char> chars = new List<char>(); 

            Results results = new Results(); 
            Type resultingType = results.ResultingType;

            if (resultingType == typeof(string)) {
            strings= results.strings; 
            }
            if (resultingType == typeof(int)) {
                ints= results.ints; 
            }
            if (resultingType == typeof(char)) {
                chars = results.chars; 
            }

            //Desired 
            List<resultingType> resultingtypelist = results.ResultsList; // but not allowed 

        }            

    }

    public class Results {

        public List<string> strings = new List<string>() { "aaa", "bbb", "ccc" };
        public List<int> ints = new List<int>() {1, 2, 3, } ;
        public List<char> chars = new List<char>() {'a', 'b', 'c' };

        public Type ResultingType {
            get { return typeof(int) ;} //hardcoded demo 

        }

        //Desired --with accessibility of Lists set to private 
        public List<ResultingType> ResultsList {

            get {

                if (ResultingType == typeof(string)) {
                    return strings;
                }
                if (ResultingType == typeof(int)) {
                    return ints; //hardcoded demo 
                }
                if (ResultingType == typeof(char)) {
                    return chars;
                }
            }
        }
    } 
```

产生的错误是“'TestTyping.Results.ResultingType'是一个'属性'，但像'类型'一样使用”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:50:36.663

如果我理解你想要做什么，你将无法`ResultsList`在编译时知道数据类型，所以泛型是不可能的。你必须做这样的事情：

```
public IList ResultsList 
{
    get 
    {
        if (ResultingType == typeof(string)) 
        {
            return strings;
        }
        if (ResultingType == typeof(int)) 
        {
            return ints; //hardcoded demo 
        }
        if (ResultingType == typeof(char)) 
        {
            return chars;
        }

        // not one of the above types
        return null;
    }
} 
```

# c# - 从 id 转换静态只读属性

> ID：15213327
> 
> 赞同：1
> 
> 时间：2013-03-04T23:46:41.177
> 
> 标签：c#, static-members

我有以下课程：

```
public sealed class TaskType
{
    private readonly String name;
    private readonly int value;

    public static readonly TaskType BUG = new TaskType(1, "Bug");
    public static readonly TaskType ISSUE = new TaskType(2, "Issue");
    public static readonly TaskType FEATURE = new TaskType(3, "Feature");
    //more here

    private TaskType(int value, String name)
    {
        this.name = name;
        this.value = value;
    }

    public override string ToString()
    {
        return name;
    }
} 
```

如何从一个值中转换 TaskType：

```
int i = 1;
String name = (TaskType)i.ToString(); // this is where i am stuck! 
```

我知道我必须使用反射来遍历属性，但这对我不起作用。

例如，我曾尝试使用此功能，但这不起作用：

```
private TaskType getTaskType(int id)
{
    PropertyInfo[] properties = typeof(TaskType).GetProperties(BindingFlags.Public | BindingFlags.Static);

    foreach (PropertyInfo property in properties)
    {
        TaskType t = (TaskType)property.GetValue(null, null);
        if (t.ToValue() == id)
            return t;
    }

    return null;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T23:56:27.287

为什么不直接使用 Enum 类型？

```
public enum Task {
  Bug,
  Issue,
  Feature
} 
```

然后你可以从一个 int 中转换它。

```
int i = 1;
Task myTask = (Task)i; 
```

您也可以从字符串名称中获取它。

```
string s = "Bug";
Task bugType = Enum.Parse(typeof(Task), s); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T01:12:45.350

问题是您正在尝试获取属性，但您的`TaskType`对象是字段：

```
public static TaskType GetTaskType(int id)
{
    FieldInfo[] fields = typeof(TaskType).GetFields(BindingFlags.Public | BindingFlags.Static);

    foreach (FieldInfo field in fields)
    {
        TaskType t = (TaskType)field.GetValue(null);
        if (t.value == id)
        {
            return t;
        }
    }

    return null;
} 
```

使用 LINQ，这可以是一行代码：

```
public static TaskType GetTaskType(int id)
{
    return typeof(TaskType)
        .GetFields(BindingFlags.Public | BindingFlags.Static)
        .Select(f => (f.GetValue(null) as TaskType))
        .FirstOrDefault(t => t != null && t.value == id);
}

public static TaskType GetTaskType(string name)
{
    return typeof(TaskType)
        .GetFields(BindingFlags.Public | BindingFlags.Static)
        .Select(f => (f.GetValue(null) as TaskType))
        .FirstOrDefault(
            t => t != null &&
            t.name.Equals(name, StringComparison.InvariantCultureIgnoreCase));
} 
```

但是，正如其他人已经提到的那样，`enum`可能会容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T00:01:44.763

如果你真的坚持那个类定义并且不能使用像枚举这样的东西，那么这里是工作代码，它通过反射获得名称：

```
int id = 1;
Type type = typeof(TaskType);
BindingFlags privateInstance = BindingFlags.NonPublic | BindingFlags.Instance;
var name = type
    .GetFields(BindingFlags.Public | BindingFlags.Static)
    .Select(p => p.GetValue(null))
    .Cast<TaskType>()
    .Where(t => (int)type.GetField("value", privateInstance).GetValue(t) == id)
    .Select(t => (string)type.GetField("name", privateInstance).GetValue(t))
    .FirstOrDefault();

// Output: Bug 
```

# database - 可以将带有单词 NULL 的字符串解释为 NULL 值吗？

> ID：15213328
> 
> 赞同：3
> 
> 时间：2013-03-04T23:46:41.703
> 
> 标签：database, string, null

寻找数据库插入或更新中错误的解释，我被告知问题是客户名称，例如：**“BOB NULL-Creations”**。

我所读到的关于 NULL 的内容不允许我如此轻易地接受这种解释。

但是我以前对其他事情有过误解。

字符串“NULL”是否有可能在它是字符串的一部分的情况下被解释为 NULL 值？

**更多信息** 数据最终在 iPad 上查看，所以我被告知 iPad 反序列化时的 NULL 中断

我想更好地理解，如果有人有与这种可能性相关的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-29T23:31:16.650

不，字符串`'NULL'`或`"NULL"`永远不能被误认为是 NULL。所有编程语言都将读取`'NULL'`或`"NULL"`作为一系列字符。

# ios - 通用应用程序 - 主详细信息

> ID：15213331
> 
> 赞同：0
> 
> 时间：2013-03-04T23:46:58.007
> 
> 标签：ios, xcode, tableview

我有点困惑，希望有人能为我澄清。当我创建一个 Universal Master Detail 应用程序时，我注意到 tableview 方法 didSelectRowAtIndexPath 只处理 iPad 选择。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
    NSManagedObject *object = [[self fetchedResultsController] objectAtIndexPath:indexPath];
    self.detailViewController.detailItem = object;
}
} 
```

有人可以告诉我在哪里处理 iPhone 表格视图选择。

在此先感谢，蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:49:14.253

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) { 
```

正在检查并仅为 Ipad 添加数据，您还需要检查 iphone 或删除此检查，以便它适用于所有设备

如果您想检查 iPhone，请使用以下方法之一

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) 
```

或者

```
if ([[UIDevice currentDevice] userInterfaceIdiom] ==UIUserInterfaceIdiomPhone) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T23:53:17.490

谢谢大家的建议。事实证明，我在创建通用应用程序时选择了 Core Data，但是，我没有正确使用 Core Data。我现在已经利用了 Core Data，一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T23:54:56.713

你在使用故事板吗？如果是这样，那么 tableView:didSelectRowAtIndexPath: 正在通过标识符为 @"showDetail" 的 segue 进行处理。

因此，表视图委托方法不需要任何内容​​。

如果您关闭情节提要，那么您会得到以下信息：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSManagedObject *object = [[self fetchedResultsController] objectAtIndexPath:indexPath];
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        if (!self.detailViewController) {
            self.detailViewController = [[OCDDetailViewController alloc] initWithNibName:@"OCDDetailViewController_iPhone" bundle:nil];
        }
        self.detailViewController.detailItem = object;
        [self.navigationController pushViewController:self.detailViewController animated:YES];
    } else {
        self.detailViewController.detailItem = object;
    }
} 
```

它处理 iPhone 和 iPad 的情况。

# asp.net-mvc - 具有嵌套视图模型和淘汰赛的 ASP.NET MVC

> ID：15213332
> 
> 赞同：6
> 
> 时间：2013-03-04T23:47:03.463
> 
> 标签：asp.net-mvc, knockout.js, viewmodel, knockout-2.0, asp.net-mvc-viewmodel

无法理解如何为以下 ASP.NET MVC 4**嵌套**视图模型实现淘汰赛：

```
public class MyProfile
{
  public string Name { get; set; }

  public IList<VM1>   List1    { get; set; }
  public IList<VM2>   List2    { get; set; }
  ....
  public IList<VM10>  List10    { get; set; }
}
// example of VM view model
public class VM1
{
   IList<Label> Labels { get; set; }
   IList<Contact1> Contact1 { get; set; }
} 
```

在视图中，我接受这样的模型：

```
@model MyProfile

@using (Html.BeginForm("Index", "Profile", FormMethod.Post, new { id = "profileEditorForm" }))
{

  @Html.ValidationSummary(false)
    <fieldset>
  <legend>User's data</legend>
  <label for="name">Name:</label>
  <input type="text" id="name" name="name" class="required" data-bind="value: Name"/>
    </fieldset>

 @Html.EditorFor(m => @Model.List1, "List1") @* Editpr model for List1*@
 @Html.EditorFor(m => @Model.List2, "List2")
 .....
 @Html.EditorFor(m => @Model.List10, "List10")

 <p>
   <input type="submit" value="Save" data-bind="enable: (List1().length > 0) && (List2().length > 0) && ...(List10().length > 0)" />
<a href="/">Cancel</a>
 </p>
} 
```

EditorTemplate`List1`看起来像这样，其中包含多个问题：

```
@model IList<FiveW.ViewModels.List1>

<fieldset>

  <table>
    <tbody data-bind="foreach: Contact1">
      <tr>
        <td>
          <label>Email:</label></td>
        <td>
          @* How do you put combobox here with labels here?
          How do you tie selected label to selected property on your Contact1 object *@
          @*<select data-bind="options: Labels, optionsText: 'LabelName', value: selectedLabel, optionsCaption: 'Choose...'"></select></td>
        <td>
          <input type="text" data-bind="value: Name, uniqueName: true" class="required" /></td>
        <td>
          <a href="#" data-bind="click: function() { viewModel.removeContact1(this); }">Delete</a></td>
      </tr>
    </tbody>
  </table>

  <button data-bind="click: addContact1">Add Contact1</button>

</fieldset> 
```

**编辑**

除了验证逻辑之外，VM1 到 VM10 是相同的，所以我必须使它们成为不同的类（不幸的是，因为它在模型和视图中重复了很多次）。

客户端 - 这就是我要问的问题：我需要从包含嵌套列表的 ASP MVC 模型中传递，并将它们呈现在客户端上并进行剔除（我发现它在动态列表方面做得最好）。它类似于 gmail 联系人 - 你有家庭/工作/移动/传真电话 - 所以一个列表是电话的标签（它是什么电话）并且应该显示为组合框，另一个是可以增加的电话动态列表根据用户点击。

**结束编辑**

1.  我不明白如何从这个嵌套模型创建一个淘汰视图模型，显然 Name 应该是它的一部分，但其余的是列表，它们也包含列表。

2.  如何映射它？

3.  如何处理它（一个进入下拉列表，这将是另一个列表的标签，它的长度是可变的——这里使用敲除的唯一原因）。？

4.  填写完成后，如何将它们组合在一起并运回控制器操作？

5.  当标签是名称标签的下拉列表（或组合框）时如何编写该编辑器模型（例如：[label]home/work [name]email、[label]mobile/home/car [name]phone）

如果它是带有`IList`内部的简单类 - 就像[这里](https://stackoverflow.com/questions/11881191/how-to-post-a-viewmodel-back-instead-of-the-model-mvc-using-knockout)一样。问题是列表中有列表，Knockout 要求一切都是可观察的，不知道如何在 java 脚本中表达这种嵌套模型。

请帮忙。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:30:19.287

我不会使用映射。我会像这样声明 ViewModel 客户端：

```
//I'm asuming the properties for Label and Contact, this is just for example purposes
function LabelViewModel(){
    var self = this;
    self.LabelName = ko.observable();
}
function Contact(){
    var self = this;
    self.Name = ko.observable();
    self.LastName = ko.observable();
}

//This is the definition for the List. I believe it shouldn't matter that the class names are different as long as the structure is the same
function ListViewModel(){
    var self = this;
    self.Labels = ko.observableArray();
    self.Contacts = ko.observableArray();
}

function MainViewModel(){
    var self = this;
    self.Name = ko.observable();
    self.List1 = ko.observableArray();
    //....
    self.List10 = ko.observableArray();
}

$(document).ready(function(){
    var viewModel = new MainViewModel(@Html.Raw(JsonConvert.SerializeObject(Model)));
    ko.applyBindings(viewModel);
}); 
```

然后，在提交时，我会尝试从 jquery 提交，而不是直接进行 http 发布：

```
var viewModelJs = ko.toJS(ko.utils.unwrapObservable(viewModel));
var parameters = JSON.stringify({vm: viewModelJs});

$.ajax('http://yourControllerUrlHere', {
    data: parameters,
    type: "POST",
    contentType: "application/json",
    dataType: "json",
    success: function (result) {
        console.log('Submitted ok');
    },
    error: function (error) {
        console.log(error);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:10:18.017

不得不改写问题以挑出我遇到的问题，而不是像这里一样提出一般性问题。

非常感谢您为回答所做的努力，不幸的是，我发现如果您没有正确地提出您的问题，您将分别得到常见（非特定）的回答。所以这是我的坏事。

由于很多人对我提出的问题感兴趣（前 3 小时内有 5 次投票），所以我在这里问了同样的问题，强调了我遇到的具体问题并得到了正确的答案，让我的淘汰赛再次被淘汰.

[带有组合框的 Knockout 可变长度列表的 ASP.NET - 如何绑定？](https://stackoverflow.com/questions/15259807/asp-net-with-knockout-variable-length-list-with-combobox-how-to-bind/15260141#comment21559145_15260141)

希望这对某人有所帮助，因为它帮助了我并再次感谢！

# javascript - 尝试使用 jQuery 独立显示/隐藏多个列表

> ID：15213333
> 
> 赞同：0
> 
> 时间：2013-03-04T23:47:12.473
> 
> 标签：javascript, jquery

我有一个网页，默认情况下我试图隐藏额外的信息。这些额外的位采用项目列表的形式，我希望用户能够通过单击 JavaScript 链接来显示或隐藏这些项目。

最初，我使用了这段代码：http: [//jsfiddle.net/4Yk39/2/](http://jsfiddle.net/4Yk39/2/)

```
 jQuery(document).ready(function() {
   jQuery('.bhlink').click(function(){
     jQuery('ul.billhistory').slideToggle();
   });
 }); 
```

...它工作得很好，除了单击页面上的任何 JavaScript 链接会导致*所有*列表出现或消失，这不是我想要的。我只希望 JavaScript 链接正下方的列表在单击时滑出。换句话说，我需要列表独立出现或消失。

我现在正在使用的代码（来自另一个 StackOverflow 问题的答案）在这里：http: [//jsfiddle.net/smZct/](http://jsfiddle.net/smZct/)

```
$(document).ready(function () {
$(".billhistory").slideUp();
$(".bhlink").click(function() {
    var billhistory = $(this).closest("p").find(".billhistory");
        var txt = billhistory.is(':visible') ? 'Click to view' : 'Click to hide';
        $(this).text(txt);
        billhistory.stop(true, true).slideToggle("slow");
    });
}); 
```

据我所知，一切都已正确设置，但是当我单击链接以显示列表时，链接更改为“隐藏”，但列表实际上并未出现。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:51:15.133

```
jQuery(document).ready(function($) {
    $('.bhlink').on('click', function () {
        $(this).text(function (i, txt) {
            return txt.indexOf('view') != -1 ? 'Click to hide' : 'Click to view';
        }).closest('p').next('.billhistory').slideToggle();
    });
}); 
```

[**小提琴**](http://jsfiddle.net/adeneo/smZct/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T23:51:33.620

您需要使用 next 而不是 find 文本块：

```
var billhistory = $(this).closest("p").next(".billhistory"); 
```

# python - 使用 python dom minidom 创建没有序言的 xml 文件

> ID：15213336
> 
> 赞同：2
> 
> 时间：2013-03-04T23:47:52.193
> 
> 标签：python, xml, dom, minidom

我用 Python 的 dom minidom 库创建了一个 xml 文件。但是我想创建没有序言的 xml 文件`<?xml version="1.0"?>`。我用`doc.writexml()`请你能给我一些线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:58:46.773

你不能直接这样做。但是有两种 hacky 方法可以做到这一点。

首先，剥离它并不难。例如：

```
xml = x.toxml()
with open('foo.xml', 'w') as f:
    f.write(xml.partition('>')[2]) 
```

或者，如果您不想在内存中生成整个字符串，您可以编写一个文件包装器来吞下 prolog：

```
class SkipFirstWriter(object):
    def __init__(self, f):
        self.f = f
        self.firstline = True
    def write(self, buf):
        if self.firstline:
            if '>' in buf:
                self.f.write(buf.partition('>')[2])
                self.firstline = False
        else:
            self.f.write(buf)
with open('foo.xml', 'w') as f:
    skipper = SkipFirstWriter(f)
    x.writexml(skipper) 
```

显然，吞下“直到第一个`>`”是检测 XML prolog 的一种有点笨拙的方法……但它确实有效。在现实生活中的代码中，我可能会添加一条注释来解释这有效，以及为什么，但要使用它。

或者，您可以依靠 document-without-prolog 是文档的第一个子项这一事实，并执行以下操作：

```
with open('foo.xml', 'w') as f:
    x.firstChild.writexml(f) 
```

# git - Git 说我领先 2 次提交

> ID：15213338
> 
> 赞同：4
> 
> 时间：2013-03-04T23:48:21.567
> 
> 标签：git, gitignore

我在 Github 上有一个 git repo，在我的 Web 服务器上有一个 git repo。每当我`git pull origin master`在 Github 上获取更新时，它都会说`Your branch is ahead of 'origin/master' by 6 commits.`有趣的是，每次我从 Github 拉出新的更改时，数字都会增加 2！我也必须每次都“合并”。

这是在我更新了我的网络服务器上的 .gitignore 并删除了两个我忽略的文件之后开始的。我更新了 .gitignore 并删除了我的 Github 存储库中的两个文件。

Git大师，为什么会这样？我该如何纠正？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T23:53:20.957

发生这种情况是因为您不断创建远程不存在的本地合并提交。的默认行为`git pull`是合并新的更改，你一直这样做，但你从来没有推动你的合并。您的历史记录可能如下所示：

```
 o - [master]
                   /|
[origin/master] - o o
                  |/|
                  o o
                  |/|
                  o o
                  |/|
                  o o
                  |/|
                  o o
                  |/
                  o
                  |
                  o 
```

查看所有这些合并提交？每次运行时，`git pull`您都会创建一个新的。

这里的解决方案是弄清楚你想如何处理你拥有的本地提交。当您说您更新了服务器和 github 存储库时，您是否独立更新了它们？如果是这样，您创建了两个表示相同更改的不同提交。在这种情况下，您可以`git reset origin/master`摆脱本地合并。

另一方面，如果您的本地提交实际上并不代表 github 存储库中的内容，那么您需要决定是保留它还是删除它。如果您想摆脱它，请使用相同的`git reset origin/master`. 如果你想保留它，你可能想把`git rebase origin/master`它拉到你的历史记录的顶端，然后把它推到服务器上。

# php - 在字符串中获取字符串 - php

> ID：15213340
> 
> 赞同：0
> 
> 时间：2013-03-04T23:48:45.880
> 
> 标签：php, regex, string, numbers

我有一个字符串：

```
[gallery ids="2282,2301,2302,2304,2283,2303,2285,459,1263,469,471,1262,1261,472,608,467,607,606,466,460"] 
```

会`ids`有所不同，但我如何（在 PHP 中）获取值？

正则表达式不是我的强项，但我想我们可以检查直接在单词后面的引号内的所有内容`ids`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T23:51:08.697

正则表达式：`preg_match_all(/\d+/,$string,$matches);`

在这里解释演示：[http ://regex101.com/r/fE4fE6](http://regex101.com/r/fE4fE6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T23:59:04.693

我认为一个更简单的解决方案，而不是使用`preg_match`，是简单地`explode`将字符串`"`用作分隔符，其中 ids 将是第二个元素（索引`1`）。

```
$string = '[gallery ids="2282,2301,2302,2304,2283,2303,2285,459,1263,469,471,1262,1261,472,608,467,607,606,466,460"]';

$array = explode('"', $string);

$ids = explode(',', $array[1]); 
```

这在 PHP 5.4 中可以非常优雅，其中添加了函数数组取消引用：

```
$string = '[gallery ids="2282,2301,2302,2304,2283,2303,2285,459,1263,469,471,1262,1261,472,608,467,607,606,466,460"]';

$ids = explode(',', explode('"', $string)[1]); 
```

这样做的好处`preg_match`是，值是什么并不重要——它们可以是数字、字母或其他符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T23:54:17.450

如果你想要一个非正则表达式的解决方案，你可以这样做：

```
$str = ...;

$start = strpos($str, '"') + 1; // find opening quotation mark
$end = strpos($str, '"', $start); // find closing   ''     ''

$ids = explode(",", substr($str, $start, $end - $start)); 
```

# flash - 在 IE9 上工作的 mediaelement.js 闪存回退的工作示例

> ID：15213345
> 
> 赞同：1
> 
> 时间：2013-03-04T23:49:34.563
> 
> 标签：flash, internet-explorer-9, mediaelement.js, mediaelement, fallback

我基本上无法让 mediaelement.js 在 IE9 上运行（显然，甚至 mediaelement.js 的主页似乎也无法做到这一点）。一位朋友告诉我要考虑强制 IE9 回退到 Flash，所以我希望找到示例。这种努力既徒劳又徒劳。因此，任何显示这一点的示例站点/页面都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:43:56.447

有点hacky，并且不会根据您页面上的内容起作用，但您可以执行添加以下元标记之类的操作：

```
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

这将迫使 IE 使用 IE8 标准进行渲染，因此使用 Flash。我知道有更好的方法，但是如果您遇到问题，总比没有好，并且不会影响其他浏览器。

您还可以检查视频/音频的压缩，因为并非所有 .mp4/.mp3 都是一样的。我曾经遇到过无法在 IE9 中播放的问题，而重新编码的视频可以解决问题。

# ruby-on-rails-3 - has_one 关系的嵌套表单属性

> ID：15213346
> 
> 赞同：0
> 
> 时间：2013-03-04T23:49:34.673
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

我已经搜索了 SO 和互联网很长一段时间，但一直无法弄清楚这一点。我有一个模型项目，它总是有一个 TimerSetting。不涉及连接表。

在新的项目表单中，我尝试使用嵌套属性来创建 TimerSetting 记录。想不通这部分。

模型中的相关代码：

项目模型：

```
class Project < ActiveRecord::Base
    attr_accessible :timer_setting_id

    has_one :timer_setting
    accepts_nested_attributes_for :timer_setting
end 
```

定时器设置模型：

```
class TimerSetting < ActiveRecord::Base
    attr_accessible :rounding_method, :round_to

    belongs_to :project
end 
```

在项目控制器中：

```
def new
    @project.new
    @project.build_timer_setting
end 
```

在视图中：

```
<%= form_for @project, {remote: true, format: 'json'} do |f| %>
    ... other stuff ...
    <%= f.fields_for :timer_setting do |ts| %>
      Rounding Method <%= ts.check_box :rounding_method %>
      Round To <%= ts.text_field :round_to %>
    <% end %>
<% end %> 
```

当我调用渲染表单（项目/新）的路线时，rails 说：`unknown attribute: project_id`. 如果我在项目控制器中注释掉该行

```
#@project.build_timer_setting 
```

它会呈现表单，但`f.fields_for :timer_setting`不会输出块中的字段。

任何建议/帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:56:00.300

您的 TimerSetting 需要一个 project_id。您的项目不需要 timer_settings_id，因为 rails 会通过 TimerSetting 模型的 project_id 找到它。

# networking - 理论上估计网络往返时间

> ID：15213349
> 
> 赞同：1
> 
> 时间：2013-03-04T23:50:08.293
> 
> 标签：networking

如何在理论上调查美国和中国等2个国家之间的网络往返ping时间？（当然不使用 ping 和 traceroute 等工具）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:42:45.187

如果您是通过互联网完成这一切......那么就无法估计延迟，因为您不知道流量在哪里或如何被遍历。

但是，如果您正在考虑租用一条私人线路……那么是的，这是可能的。大公司一直在这样做。

例子; 直线上，中国距洛杉矶 10,000 公里。

现在，考虑到光以大约 200,000 公里/秒的速度通过光纤传播，从洛杉矶到中国的单程需要 50 毫秒……往返 100 毫秒。

因此，如果使用直接路径，理论上 100 毫秒是您在洛杉矶和中国之间可以达到的禁食时间。

从[http://www.cablemap.info/](http://www.cablemap.info/)可以看出，没有任何直接路径。但是，如果您知道您的流量正在走哪条路线，则可以计算出足够接近的估计值。

# mysql - 如何检查mysql行中是否有值？

> ID：15213351
> 
> 赞同：1
> 
> 时间：2013-03-04T23:50:14.787
> 
> 标签：mysql, vb.net, image

对不起我的英语不好

我想问如何检查行中是否有值？

提前致谢 ：）

```
Private Sub uploadpic()

    Dim SQLCmd As New MySqlCommand("SELECT Picture FROM Student_information WHERE S_I_D = ('" & ListView1.Items(ListView1.FocusedItem.Index).SubItems(0).Text & "') ", dbcon)

    dbcon.Open()

    *Dim pictureData As Byte() = DirectCast(SQLCmd.ExecuteScalar(), Byte())*

    dbcon.Close()

    Dim picture As Image = Nothing

    'Create a stream in memory containing the bytes that comprise the image.

    Using stream As New IO.MemoryStream(pictureData)
        'Read the stream and create an Image object from the data.
        PictureBox4.Image = Image.FromStream(stream)
    End Using

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:56:40.883

[**`SQLCmd.ExecuteScalar()`**](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlcommand.html#connector-net-examples-mysqlcommand-executescalar)如果结果集为空，将返回空引用。因此，您可以检查该值以了解该行中是否存在值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:39:50.603

试试这个

```
Dim sql As string("SELECT Picture FROM Student_information WHERE S_I_D = ('{0}')",ListView1.Items(ListView1.FocusedItem.Index).SubItems(0).Text)
    tbl = GetRecords(sql)
        If tbl.Rows.Count > 0 Then
            'Code to execute
        Else
        exit sub 'or msgbox "record not found"
        End If 

Public Function GetRecords(ByVal sql As String) As DataTable
    Return GetRecordsExtracted(sql)
End Function

Private Function GetRecordsExtracted(ByVal sql As String) As DataTable
    Dim da As New SqlClient.SqlDataAdapter
    tbl = New DataTable
    da = New SqlClient.SqlDataAdapter(sql, dbcon.Open)
    da.Fill(tbl)
    Return tbl
End Function 
```

# c# - 实际的事件处理代码在哪里？

> ID：15213352
> 
> 赞同：1
> 
> 时间：2013-03-04T23:50:16.967
> 
> 标签：c#, delegates, event-handling, compact-framework, windows-ce

我已经用谷歌的眼光和愚蠢的头脑试图弄清楚这段代码实际上应该完成什么。

在某些情况下，使用 true 的 bool arg 调用以下内容（如此处所示），其他时候为 false：

```
InitializeBackgroundThread_PDALoginTerminate(true); 
```

InitializeBackgroundThread_PDALoginTerminate() 方法连接或断开事件处理程序，似乎：

```
private void InitializeBackgroundThread_PDALoginTerminate( bool add )
{
    try
    {
        if ( add ) 
            pc.PDALoginTerminate += new PendingCommands.PDALoginTerminateEventHandler( DeinitLoginDialogs );
        else
            pc.PDALoginTerminate -= new PendingCommands.PDALoginTerminateEventHandler( DeinitLoginDialogs ); 
```

. . .

...这是 PendingCommands.PDALoginTerminateEventHandler() 指向的代码：

```
public   delegate  void  PDALoginTerminateEventHandler();
public   event           PDALoginTerminateEventHandler PDALoginTerminate;
public   void          OnPDALoginTerminate()
{
    if (PDALoginTerminate != null)
        PDALoginTerminate();
} 
```

我看不出这里发生了什么，如果真的发生了什么；似乎代码只是在追逐自己的尾巴，或者是一个大雁追逐/循环引用；右键单击 PDALoginTerminate() 将我带到它上面的行。

我错过了什么（除了，希望是暂时的，还有一点我的理智）？

注意：这是一个 .NET 1.1 项目。

## 更新

我喜欢简化的想法，但如果我这样做：

```
pc.PDALoginTerminate += DeinitLoginDialogs; 
```

...我得到，“*方法 'PDAClient.frmCentral.DeinitLoginDialogs()' 引用不带括号*”

...如果我这样做：

```
pc.PDALoginTerminate += DeinitLoginDialogs(); 
```

我得到，“*不能隐式地将类型'void'转换为'PendingCommands.PDALoginTerminateEventHandler'* ”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T23:54:49.073

这是处理程序：

```
DeinitLoginDialogs 
```

您将返回*引发*事件的方法，但处理程序在此处已分配（或未分配）：

```
if ( add ) 
    pc.PDALoginTerminate += new PendingCommands.PDALoginTerminateEventHandler( DeinitLoginDialogs );
else
    pc.PDALoginTerminate -= new PendingCommands.PDALoginTerminateEventHandler( DeinitLoginDialogs ); 
```

注意`PDALoginTerminateEventHandler`构造函数的参数。值得注意的是，转换可以隐式执行，即这种肮脏：

```
pc.PDALoginTerminate += new PendingCommands.PDALoginTerminateEventHandler( DeinitLoginDialogs ); 
```

变成...

```
pc.PDALoginTerminate += DeinitLoginDialogs; 
```

耶。不幸的是，长名称不利于此处的可读性。他们也伤害了我的头。

# c++ - 我简单的“if”语句没有执行代码中的操作

> ID：15213356
> 
> 赞同：-4
> 
> 时间：2013-03-04T23:50:42.553
> 
> 标签：c++

在这个小代码部分，我从用户那里收集输入数据。如果给定的第一个输入是“0”，则它不接受更多信息，如果它不是“0”，则提示输入其余数据。

```
class Molecule {

char structure[10];
char name[20];
double weight;

public:

Molecule();
bool read();
void display() const;

};

bool Molecule::read() {

cout << "Enter structure : ";
cin >> structure;

if (structure != "0") {
cout << "Enter name : ";
cin >> name;
cout << "Enter weight : ";
cin >> weight;
}
} 
```

这应该说，如果结构不为0，则提示输入其余信息。但是当我运行它时，即使我输入 0，它也会显示另一个 cout 和 cin。为什么它没有做它应该做的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T23:52:38.633

问题是您正在尝试对字符串值进行比较，但实际上是在对指针值进行比较。您需要使用类似的函数`strcmp`来获取值比较语义

```
if (strcmp(structure, "0") != 0) {
  ...
} 
```

您编写的原始代码有效地执行以下操作

```
int left = structure;
int right = "0";
if (left != right) { 
  ...
} 
```

我已经掩盖了那里的一些细节（包括架构），但本质上这就是您的原始样本正在做的事情。C/C++ 并没有真正的字符串值的概念。它对字符串文字以及如何将它们转换为`char`数组的理解有限，但对值的理解方式却没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:00:21.207

扩展我的评论

采用

```
#include <string>

...

std::string structure;

...
structure="foo";
....
if(structure == "foo")
{
   ...
} 
```

# c# - Outlook 加载项防止创建重复文件夹

> ID：15213360
> 
> 赞同：1
> 
> 时间：2013-03-04T23:51:03.650
> 
> 标签：c#, outlook, vsto

我有一个 Outlook 加载项，它在启动时会尝试在“发件箱”文件夹下创建一个子文件夹（如果该子文件夹尚不存在）。当我在两台不同的计算机上安装加载项时会出现此问题。在一台计算机上安装并运行加载项后，如果我在另一台计算机上安装并打开 Outlook，加载项会立即发现不存在此类子文件夹，因为 Outlook 尚未完成与本地数据存储的同步服务器。它现在创建一个新的重复子文件夹，在 Outlook 同步后，我最终拥有两个同名的子文件夹。防止这种情况的最佳方法是什么？目前我正在考虑以下方法之一：

*   以某种方式创建一个仅限本地的子文件夹，使其不与服务器同步。不同计算机上的每次安装都会有一个单独的子文件夹。这对于我的加载项来说可以正常工作。这可能吗？

*   检查服务器端以查看是否已创建子文件夹，如果是，则不执行任何操作。但是，我不知道如何通过 C# 使用 OOM 执行此检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:00:20.907

无法在缓存存储中创建仅本地文件夹，但您始终可以将 PST 存储添加到配置文件并将您的数据存储在那里。

您可以使用 Extended MAPI 或 Redemption 在联机模式下打开父文件夹，但如果您的 cod 运行时没有连接，您会怎么做？

# javascript - 父 div 可滚动，子 div 不可滚动？

> ID：15213362
> 
> 赞同：1
> 
> 时间：2013-03-04T23:51:08.767
> 
> 标签：javascript, jquery, html, css, scroll

是否可以让父 div 可滚动（溢出：自动），但子 div 不可滚动？不，我不能使用“位置：固定”，因为它将它固定到视口。**我需要将子 div 修复为父 div。**

代码示例：

```
#pagecontainer {
    overflow:auto;
    width:1000px;
    height:450px;
}
#pagecontainer>div{   /*each of the pages*/
    margin-top:50px;
    padding-left:50px;
    padding-right:50px;
    position:relative;
}
.unscrollable{
    position:absolute;
    width: 250px;
}
.scrollable{
    margin-left:300px;
    float:left;
} 
```

HTML

```
<div id="pagecontainer">

    <div id="page1">

        <div class="unscrollable"> <!--UNSCROLLABLE-->
            <a href="#page1" class="link">Link 1</a>
            <p>
            <a href="#page2" class="link">Link 2</a>
            <p>
            <a href="#page3" class="link">Link 3</a>
            <p>
            <a href="#page4" class="link">Link 4</a>
            <p>
        </div>

        <div class="scrollable"> <!--SCROLLABLE-->
            content content content
        </div>

    </div>

    <div id="page2">

        <div class="unscrollable"> <!--UNSCROLLABLE-->
            <a href="#page1" class="link">Link 1</a>
            <p>
            <a href="#page2" class="link">Link 2</a>
            <p>
            <a href="#page3" class="link">Link 3</a>
            <p>
            <a href="#page4" class="link">Link 4</a>
            <p>
        </div>

        <div class="scrollable"> <!--SCROLLABLE-->
            content content content
        </div>

    </div>

</div> 
```

我不能只制作子 div `.scrollable` `overflow:auto`（这确实会修复`.unscrollable`），因为由于 50px 的边距，滚动条将有 50px 的间隙，并且它只会相对于 .scrollable 滚动。我需要滚动条打开`#pagecontainer`，或者`#page1`/`#page2`也可以。

我也不能放在`.unscrollable`外面`#pageX`。我需要将代码组织起来，`.unscrollable`是每一页的一个部分。如果我放在`.unscrollable`外面`#pageX`，那么我需要为每个页面创建一个不可滚动的ID，即`#unscrollable1` `#unscrollable2`，然后在我想显示该页面时调用( `#page1`, ).fadeIn()，而不是简单的( ).fadeIn()。这将变得令人难以置信的混乱。**所以底线是 div 的结构不能改变**。`#unscrollable1``#page1`

 **我需要的是一些 javascript/jQuery 函数，它可以`.unscrollable`固定`#pagecontainer`或`#page1`/`#page2`覆盖任何 css，例如 ( `.unscrollable`).fixTo( `#pagecontainer`)（如果存在）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:39:55.143

要将 child 固定到 parent `div`，请尝试`position: relative`在 parent`div`和`position: fixed`child 上使用`div`。

然后，您对子项`div`（`top`、`bottom`​​、、`left`和`right`）所做的所有定位都将相对于父项`div`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:36:21.333

我创建了一个 jsfiddle，展示了一种可能的解决方案。 [http://jsfiddle.net/SF7nr/](http://jsfiddle.net/SF7nr/)

我删除了可滚动的浮动并设置了 a`max-height`和 an`overflow: auto;`来激活滚动。

出于布局原因，我还为页面本身设置了最小高度。一探究竟。**

# ios - UITableView SectionIndexTitlesForTableView 不拆分？

> ID：15213368
> 
> 赞同：0
> 
> 时间：2013-03-04T23:51:29.173
> 
> 标签：ios, objective-c, uitableview

请在这里需要一些帮助，Section IndexTitles 没有拆分？它看起来像图像：

![在此处输入图像描述](../Images/15bfbf3a2447d06c95848d5970c57fef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:55:55.603

问题出在`numberOfRowsInSection:`. 您需要有一个数组数组的数据结构。外部数组的每个部分都应该有一个条目。内部数组将包含该部分的行。

然后它会像：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSArray *rowData = listData[section];

    return rowData.count;
} 
```

当然你需要更新其他的表视图数据源方法来处理这个更新的数据结构。

# c# - 有没有办法在 Windows 窗体的 WebBrowser 中键入内容？

> ID：15213373
> 
> 赞同：0
> 
> 时间：2013-03-04T23:52:14.460
> 
> 标签：c#, winforms, webbrowser-control

我的 Windows 表单中有一个 webBrowser ( `System.Windows.Forms.WebBrowser`)，并且我已将 url 属性设置为“ [http://www.google.com](http://www.google.com) ”，当我运行该解决方案时，它会在我的表单中显示 google。

我的问题是，你能以编程方式在搜索框中写东西吗？

我可以访问 webBrowser 中的 DOM 元素吗？我可以修改它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:09:47.777

您可以使用 WebBrowser 控件的 Document 属性来执行此操作，这样的东西应该可以工作（未经测试）

```
if (webBrowser1.Document == null) return;
var input = webBrowser1.Document.GetElementById("gbqfq")
input.SetAttribute("value","search for foobar"); 
```

希望这可以帮助！

# batch-file - 批量循环循环 %x% 次

> ID：15213375
> 
> 赞同：8
> 
> 时间：2013-03-04T23:52:23.937
> 
> 标签：batch-file

好的，假设我有一个变量，我们称它为 x。我有这个循环：

```
for %%i in (%x%) do (
  REM --Code goes here--
) 
```

现在，假设 x 等于 10，该循环将执行一次。如果我希望它循环 10 次，我可以这样做：

```
for %%i in (1 2 3 4 5 6 7 8 9 10) do (
  REM --Code goes here--
) 
```

但是假设 x 等于 105，我该怎么做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T23:59:22.173

有关该选项，请参阅[`for /?`](http://technet.microsoft.com/en-us/library/cc754900%28v=ws.10%29.aspx)文档。`/L`

```
for /L %%A in (1,1,%x%) do (
    REM --Code goes here--
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-21T04:42:46.773

如果您对`for`语句不熟悉，我建议您学习它们

除了这里之外，这是我在没有`for`声明的情况下循环 x 次的方法。

```
echo off
SETLOCAL EnableDelayedExpansion
set /p "x= times to loop:"
goto loop

:loop
echo %x%
set /a "x=!x!-1"
if "%x%" LEQ "0" (goto getout)
goto loop

:getout
cls
echo you escaped!
pause 
```

# c++ - CGI 程序在调试模式下运行

> ID：15213376
> 
> 赞同：1
> 
> 时间：2013-03-04T23:52:27.683
> 
> 标签：c++, apache, gdb

我们有一个 C++ CGI 应用程序，它服务于一些 Web 请求。我试图在调试模式下运行相同的分析目的。我采用的方法是用 gdb 调用它：

按照第一步 - 我重命名我的实际 CGI 应用程序并使用相同的名称放置我自己的程序

在该程序中，我尝试使用 GDB 在调试模式下调用实际的 CCGI 应用程序：

```
const char* argv[] = ["gdb -p <pid> -batch -ex bt 2>/dev/null", NULL];

execve("./myprog", (char**)argv, NULL); 
```

问题是由于 myrog 是一个 CGI 应用程序，它从 STDIN 获取输入。

如何在我的程序中捕获输入并将其传递给实际的 CGI 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-17T08:03:44.890

我这样做了：在 cgi main 中，我添加了代码来查找现有文件，例如 /var/tmp/flag。虽然存在，但我在一个循环中运行。有足够的时间通过 gdb 附加到 cgi 进程。之后我删除 /var/tmp/flag ，从现在开始我可以调试我的 cgi 代码。

```
bool file_exists(const char *filename)
{
   ifstream ifile(filename);
   return ifile;
}

int cgiMain()
{

 while (file_exists ("/var/tmp/flag"))
     sleep (1);
 ...
 your code 
```

# javascript - 8个字后超长循环卡在javascript中

> ID：15213385
> 
> 赞同：0
> 
> 时间：2013-03-04T23:53:24.123
> 
> 标签：javascript, arrays, loops, for-loop, multidimensional-array

好的，所以我有这段代码需要很长时间才能编译。当它碰到它中断的循环时。我怎样才能解决这个问题？？

[http://jsfiddle.net/HTzUt/2/](http://jsfiddle.net/HTzUt/2/)

提前致谢。

```
for (var i = 0; i < splitAT.length; i++)
{
    if ( splitAT[i] !== prev )
    {
        splitAT.push(splitAT[i]);
        wordCount.push(1);
    } 
    else 
    {
        wordCount[wordCount.length-1]++;
    }
    prev = splitAT[i];
 }

return [splitAT, wordCount];

document.write('[' + result[0] + ']<br>[' + result[1] + ']') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:57:06.423

```
for (var i = 0; i < splitAT.length; i++)
{
    if ( splitAT[i] !== prev )
    {
        splitAT.push(splitAT[i]);
... 
```

您正在（可能）增加您正在迭代的数组的长度。 `push`将向数组添加一个额外的项目并增加长度。这将导致循环运行很长时间或可能永远运行，具体取决于数据的结构

# javascript - 在某些 WordPress 页面上包含 JavaScript 的最佳实践

> ID：15213386
> 
> 赞同：0
> 
> 时间：2013-03-04T23:53:24.223
> 
> 标签：javascript, wordpress

我需要在我的 WordPress 网站的某些特定页面上包含一个 JavaScript 文件。我目前处理的方式是，我将所有页面作为特定父页面的父级，并包括具有指定父级的页面上的 JavaScript。

这行得通，但似乎有点笨拙。有没有更好的方法在基本上任意的页面集上包含 JavaScript 文件？

这是我目前正在使用的，让您了解我在寻找什么：

```
function include_crm_wp_funcs(){
  global $post;
  if( get_the_title($post->post_parent) == 'My Parent Page' ){
    require_once 'myJavaScript.js';
  }
}
add_action('wp_enqueue_scripts','include_crm_wp_funcs'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:59:21.533

```
function include_crm_wp_funcs(){
  global $post;
  if( get_the_title($post->post_parent) == 'My Parent Page' ){
     wp_register_script( 'js_name', get_template_directory_uri() . 'PATH TO YOUR JS FILE' );
     wp_enqueue_script( 'js_name' );
  }
}
add_action('wp_enqueue_scripts','include_crm_wp_funcs'); 
```

您需要将 javascript 文件放在主题目录中并使用[wp_register_script()](http://codex.wordpress.org/Function_Reference/wp_register_script)和[wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)调用它。

# c# - DataTable load() 约束错误

> ID：15213387
> 
> 赞同：6
> 
> 时间：2013-03-04T23:53:30.543
> 
> 标签：c#, .net, database, oracle, datatable

我在下面编写了一个方法，使用反射在 .NET 应用程序中加载几个强类型数据表。如果我按以下方式运行，一切正常 - 包括没有抛出异常。但是，如果我改用注释部分（保持其他所有内容相同），那么我会得到**Failed to enable constraints**错误描述here: [enter link description here](https://stackoverflow.com/questions/7026566/failed-to-enable-constraints-one-or-more-rows-contain-values-violating-non-null)。

如果我查看错误数组中的内容，它总是如下：

```
"Column 'AEDelegateName' does not allow DBNull.Value." 
```

错误的 ItemArray 将类似于：

```
[0] = {}
[1] = "Some Value" 
```

这让我感到惊讶，因为我只希望脚本中有 1 列选择 1 列，而不是像上面指出的那样选择 2 列。我也认为这与问题很接近，因为其中一个似乎为空。

我的脚本不返回 null，我可以快速直观地确认它，并在我使用的查询中说出**NOT NULL之类的内容。**

```
private void GetData(string query, Component tableAdapter)
{
    OracleCommand command = new OracleCommand();
    command.Connection = conn;
    command.CommandText = query;
    command.CommandType = CommandType.Text;
    command.CommandTimeout = 3000;
    OracleDataReader reader = command.ExecuteReader(CommandBehavior.SingleResult);
    MethodInfo[] methods = tableAdapter.GetType().GetMethods();
    MethodInfo getDataMethod = tableAdapter.GetType().GetMethod("GetData");
    DataTable table = (DataTable)getDataMethod.Invoke(tableAdapter, null);
    Type[] paramTypes = new Type[] { table.GetType() };
    MethodInfo updateMethod = tableAdapter.GetType().GetMethod("Update", paramTypes);
    foreach (DataRow row in table.Rows)
    {
        row.Delete();
    }
    //try
    //{
    //    if (reader.HasRows)
    //    {
    //        table.Load(reader, LoadOption.OverwriteChanges, FillErrorHandler);
    //    }
    //}
    //catch (Exception e)
    //{
    //    DataRow[] errors = table.GetErrors();
    //}
    while (reader.Read())
    {
        try
        {
            List<object> newRow = new List<object>();
            for (int i = 0; i < reader.FieldCount; ++i)
            {
                object currentValue = reader.GetValue(i);
                Debug.WriteLine("Value: "+currentValue);
                newRow.Add(currentValue);
            }
            table.Rows.Add(newRow.ToArray());
        }
        catch (ConstraintException e)
        {
            DataRow[] errors = table.GetErrors();
        }
    }            
    updateMethod.Invoke(tableAdapter, new object[]{table});
    reader.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:03:03.353

根据[DataTable.Load Method (IDataReader, LoadOption)](http://msdn.microsoft.com/en-us/library/4e06d41f%28v=vs.100%29.aspx)的文档，我怀疑您可能会遇到下面摘录中描述的行为。您是否检查过查询返回的列数与 DataTable 上的列数？查询返回的列名是否与 DataTable 中所需的列名匹配？

> **条件：**模式兼容，但加载的结果集模式包含的列数少于 DataTable。
> 
> **行为：** 如果缺少的列定义了默认值或列的数据类型可以为空，则 Load 方法允许添加行，用默认值或空值替换缺失的列。如果不能使用默认值或 null，则 Load 方法会引发异常。如果没有提供特定的默认值，则 Load 方法使用空值作为隐含的默认值。

您在 while 循环中的代码可能正在工作，因为它没有尝试匹配架构。它只是按位置填充值，只要类型兼容、不违反约束并且数组包含的项目不超过行的列数，它就会成功。

# php - 根据两列检查重复项

> ID：15213388
> 
> 赞同：0
> 
> 时间：2013-03-04T23:53:35.223
> 
> 标签：php, sql-server

所以我有一个员工表如下：

```
empid | companyid | empnum | ...
  1   |     1     |    1   | ...
  2   |     1     |    2   | ...
  3   |     1     |    3   | ...
  4   |     2     |    1   | ...
  5   |     2     |    2   | ... 
```

表上的每个员工条目都有一个由 MSSQL 自动生成的唯一 ID (empid)。我有一个 PHP 应用程序，它以 CSV 文件作为输入，并带有员工的“主列表”。但是，该 CSV 文件仅具有“empnum”向右的列（它不包含 companyid，或者显然是employeeid）。companyid 在我遍历 CSV 文件的每一行时添加。CSV*应该*只包含尚未在数据库中的员工，但不能保证，因此我需要在插入之前检查以确保员工不存在。验证方法是确保对于这个特定的 companyid（假设我们为 companyid = 1 插入），表中还没有匹配的 empnum。因此，如果我有一个包含这些数据的 CSV 文件，它将是有效的：

```
empnum, ...
4, ... 
```

但是，如果我有一个包含此数据的 CSV 文件，它将无效：

```
empnum, ...
3, ... 
```

由于 3 已经作为 companyid=1 的 empnum 存在，因此 ENTIRE 导入应该会失败。在 PHP 应用程序中，我有：

```
try {
   db->beginTransaction();
   while (($data = fgetcsv($handle, 5000, ",")) !== FALSE) {
      //SQL TO INSERT ROW   
   }
   db->commit();
} catch (PDO Exception) {
   db->rollBack();
} 
```

我应该使用什么 SQL 来插入行，以便如果该 companyid 已经存在 empnum 会导致异常？我需要进行哪些数据库更改？我最初的想法是：

选项 1 - 插入临时表，然后运行一个选择查询，将两个表连接到 companyid/empnum 中的匹配值上，如果它返回行 > 0，则抛出异常。PRO：只有 1 个选择。CON：所有内容都插入临时表然后转储到真实表如果它通过选择=如果失败则浪费大量时间

选项2-根据当前行执行选择语句，如果返回行> 0，则抛出异常，否则插入到真实表中。PRO：一旦发生故障，您就可以立即发现它们，这样您就可以节省自己的时间。缺点：您的查询现在增加了 (2x-1)，因此如果您成功，您将有很多额外的开销！

所以我的问题是： - 最好的选择是什么（1、2 或完全不同的东西）？- 我可以让MSSQL在插入时抛出异常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:05:10.420

选项 1 是加载数据的“标准”方式（当然在我的世界中）。您的临时表实际上称为“暂存”表。这将比逐行检查（查找 RBAR）快得多。

事实上，总是花费最多时间的是一行一行地做事。

泥图性能比较：

选项1：

1.  将您的初始插入逐行插入表中（慢）
2.  使用单个 SELECT 查询捕获表之间的重复项（快速）
3.  如果成功，将 staging 复制到实时表中（快速）

选项 2：

1.  逐行从 CSV 中加载数据（中）
2.  在执行此操作时，通过每次选择捕获逐行重复（慢）

不清楚的是，当您在选项 2 中找到重复项时您会怎么做？您要回滚所有其他记录还是要通知用户并继续？

# c# - TextBox 格式化，我知道这已经被讨论过了 我找不到自定义格式化的答案

> ID：15213390
> 
> 赞同：0
> 
> 时间：2013-03-04T23:53:50.230
> 
> 标签：c#, windows-8, textbox, microsoft-metro, currency

是否可以在格式为 {0:C} 的文本框中键入 100 之类的数字并输出为 $1.00？除了数字之外也只有文本框吗？我找到了这个链接，但它并没有给出我正在寻找的[XAML Metro Numeric only TextBox](http://blog.evanrosebrook.com/2012/09/xaml-metro-style-numeric-only-currency.html)。这可能是不可能的。问题是，通过上面的链接，当我输入 350 时，它会将其转换为 $350.00，并且由于它只是一个数字，我不能输入小数点，我希望一个只有小数点的数字 3.5 为 $3.50

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:01:10.127

您链接到的示例可以让您完成 95% 的工作。您可以更改代码以允许小数位，如下所示：

```
if (!(key >= '0' && key <= '9') && (key != '.')) 
```

或者，您可以将全部金额除以 100，将 350 变为 3.5。

```
if(Decimal.TryParse(textBox.Text.Trim(), NumberStyles.Number | NumberStyles.AllowCurrencySymbol, CultureInfo.CurrentUICulture, out value))
        {
            value = value / 100;
            textBox.Text = string.Format("{0:C}", value);
        } 
```

开发支持、设计支持和更多的好处：http: [//bit.ly/winappsupport](http://bit.ly/winappsupport)

# c++ - 将基类模板的“this”类型转换为其派生类

> ID：15213391
> 
> 赞同：3
> 
> 时间：2013-03-04T23:54:04.767
> 
> 标签：c++, casting

我的代码的简化版本如下所示：

```
template <class T>
struct Base
{
    void SayHello( T* aDerived )
    {
    }

    void SaySomething()
    {
        SayHello( this ); // This is where the error happens
    }
};

struct Derived : public Base< Derived >
{
};

int main(int argc, const char * argv[])
{
    Derived iDerived;
    iDerived.SaySomething();
} 
```

并且它不会在`SayHello( this )`出现此错误消息的行上编译：

```
Cannot initialize a parameter of type 'Derived *'
with an rvalue of type 'Base<Derived> *' 
```

现在编译器抱怨这一点是有道理的，尽管在我看来有点愚蠢，如果我删除这一行它不会抱怨：

```
iDerived.SaySomething(); 
```

无论如何，可以通过执行显式类型转换来解决问题，如下所示：

```
SayHello( (T*)this ); 
```

`Base`问题是我的实际代码以许多这些类型转换结束，在我看来，只包含允许它自动转换到其模板类（`T`）的东西似乎是合理的。

是`operator=`我追求的吗？有人可以提供一个代码示例来说明这是如何完成的吗？[这个问题](https://stackoverflow.com/questions/5275175/using-the-type-conversion-operator)表明我可以做类似的事情：

演员表总是介于`this`和之间`T*`。

```
operator T*()
{
    return (T*)this;
} 
```

但错误仍然存​​在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T23:56:18.790

> 尽管在我看来有些愚蠢，但如果我删除此行并不会抱怨 [...]

不，这并不愚蠢，这就是模板的工作方式。如果你从不调用它，类模板的成员函数将永远不会被实例化。因此，在实例化它们时会产生的编译错误不会出现。

> 这个问题可以通过做一个明确的类型转换来解决，就像这样 [...]

我更喜欢一个`static_cast<>`：

```
SayHello( static_cast<T*>(this) ); 
```

您的函数接收到的`this`指针`SaySomething()`是 type `Base<Derived>`，但您知道（通过设计）指向的对象实际上是 type `Derived`。因此，执行静态转换是安全的。

> 在我看来，只在 Base 中包含一些允许将其自动类型转换为其模板类 (T) 的东西似乎是合理的。

在这种情况下，多次转换指针并没有错。这就是 CRTP（您正在使用的设计模式）强制您执行的操作。如果您对此感到困扰，只需定义一个`get_this()`为您执行强制转换的函数：

```
template <class T>
struct Base
{
    void SayHello( T* aDerived )
    {
    }

    void SaySomething()
    {
        SayHello( get_this() );
    }

private:

    // Version returning a non-const pointer
    T* get_this() { return static_cast<T*>(this); }

    // Version returning a const pointer
    T const* get_this() const { return static_cast<T const*>(this); }

}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T00:06:18.017

您可以添加一个辅助函数，将`this`向下转换返回到派生类型

```
template <class T>
struct Base
{
    void SayHello( T* aDerived )
    {
    }

    void SaySomething()
    {
        SayHello( derived_this() );
    }

private:
    T* derived_this()
    {
        return static_cast<T*>(this);
    } 
```

您可能还需要`const`重载：

```
 const T* derived_this() const
    {
        return static_cast<const T*>(this);
    } 
```

您*可以*添加一个隐式转换运算符，但我不推荐它：

```
 operator T*() { return static_cast<T*>(this); } 
```

隐式转换削弱了类型系统并且可能成为错误的来源，我认为像这样的显式函数`derived_this()`更清晰、更安全。

# flash - 错误 #2025：提供的 DisplayObject 必须是调用者的子对象

> ID：15213397
> 
> 赞同：0
> 
> 时间：2013-03-04T23:54:25.580
> 
> 标签：flash, runtime-error, removechild

我刚开始为班级制作一个非常简单的视频游戏，并且我有一个随机得分点生成器。此功能运行良好，没有任何问题，但是当我发布游戏并使用 Flashy Player 播放时，它会显示错误消息

> 错误 #2025：提供的 DisplayObject 必须是调用者的子对象。

由于程序在警报提示之外工作，所以我一直在关闭它，但我需要删除它。

```
function spawnscore()
{
    i = 0
    while (i == 0)
    {
        var pointy = Math.random()*640
        var pointx = Math.random()*747

        var pointcirc:warning = new warning();
        addChild(pointcirc);
        pointappearmusic.play();
        setTimeout(removepoint, 1500);
        pointcirc.addEventListener(MouseEvent.MOUSE_OVER, scoreclicked);

        function scoreclicked()
        {
            pointsound10.play();
            removeChild(pointcirc);
            score += 10;
            removeEventListener(MouseEvent.MOUSE_OVER, scoreclicked);
        }

        function removepoint()
        {
            // I'm pretty sure this is the problem
            removeChild(pointcirc);
        }

        pointcirc.x = pointx;
        pointcirc.y = pointy;
        break;
    }

    return;
} 
```

我很确定我的问题出在 removepoint 函数中，但我不知道该怎么做。

编辑：突出显示错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:08:53.787

该错误意味着您尝试`DisplayObject`从容器中删除 a 实际上不是该容器的子容器，因此看起来正在发生的事情是`scoreclicked()`运行并删除`pointcirc`，然后`removepoint`尝试再次删除它。

您只需要检查是否`pointcirc`已在 `removepoint()`. 有很多不同的方法可以做到这一点：您可以设置一个`pointRemoved`变量，或者`pointcirc = null`在它被删除后设置并检查它。您也可以直接使用 进行检查[`DisplayObjectContainer.contains()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#contains%28%29)，或者只查看是否[`pointcirc.parent`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#parent)存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:48:26.517

由于错误是无害的，您可以使用 try/catch 忽略它：

```
try
{
    removeChild(pointcirc);
}
catch(e:Error){} 
```

我应该警告你，如果这`while`实际上是循环而不是`break`最后的 ing，你可能不会得到你期望的行为。

`pointcirc`in`removepoint`仅指返回`pointcirc`时的最后一个值`spawnscore`。那将是最后一个循环之后的值，这意味着每次`removepoint`调用时，它都试图删除最后一个`pointcirc`。

您可以通过将循环中的代码放入闭包中来避免此问题：

```
function spawnscore()
{
    i = 0
    while (i == 0)
    {
        var pointy = Math.random()*640
        var pointx = Math.random()*747

        (function(pointcirc:warning)
        {
            var pointcirc:warning = new warning();
            addChild(pointcirc);
            pointappearmusic.play();

            var timeoutId:int = setTimeout(removepoint, 1500);

            pointcirc.addEventListener(MouseEvent.MOUSE_OVER, scoreclicked);

            function scoreclicked()
            {
                pointsound10.play();
                removeChild(pointcirc);
                score += 10;
                removeEventListener(MouseEvent.MOUSE_OVER, scoreclicked);
            }

            function removepoint()
            {
                clearTimeout(timeoutId);
                removeChild(pointcirc);
            }
        })(pointcirc);

        pointcirc.x = pointx;
        pointcirc.y = pointy;
        break;
    }

    return;
} 
```

请参阅[http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/)

# python - 是否有 MCR-ALS 算法的 python 实现

> ID：15213398
> 
> 赞同：2
> 
> 时间：2013-03-04T23:54:27.967
> 
> 标签：python, scikit-learn, least-squares

多元曲线分辨率-交替最小二乘法 (MCR-ALS) 是一种流行的化学计量学方法，用于解决未知未解决混合物中的多组分响应。我想在 python 程序中使用这个方法。但我在 scikit-learn 包中找不到这个。这个包里有什么等价物吗？或者我在哪里可以在 python 中找到这个方法的实现？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:02:27.023

据我所知（主要来自 Google/PyPI/AS/邮件列表搜索），没有纯 Python 实现，也没有 Python 绑定的外部实现。

但是，您始终可以编写自己的绑定到外部实现。

[CRAN](http://cran.r-project.org)有一个名为[ALS](http://cran.r-project.org/web/packages/ALS/index.html)的 R 实现，看起来它可能符合要求。您可以使用[RPy](http://rpy.sourceforge.net)从 Python 绑定到 R 代码。我先试试这个。

我还发现了一些打包为 DLL（可能带有 C 头文件）的代码、用 C 编写的部分示例实现以及各种其他类似的东西。我没有找到任何我可以构建和使用的东西，但也许你可以。当然，有多种方法可以从 Python 绑定到本机代码——<a href="http://docs.python.org/2/library/ctypes.html" rel="nofollow">ctypes、[Cython](http://www.cython.org)等.（如果本机代码是用 Fortran 编写的，请使用[F2py](http://www.scipy.org/F2py)而不是从头开始编写所有内容。）

还有一个[MATLAB](http://www.ub.edu/mcr/web_mcr/mcrals.html)实现——事实上，大多数搜索链接似乎都在那里。您不能直接绑定到 MATLAB 代码，但您可以驱动 MATLAB 的脚本引擎，例如，使用[PyMat](http://pymat.sourceforge.net)应该可以工作。

还有一些看起来像 Java 实现的死链接。如果您可以使用 Jython 而不是 CPython，则很容易与之交互。（对于 .NET 和 IronPython 也是如此。）

# html - 使用 next/prev 进行站点导航

> ID：15213400
> 
> 赞同：0
> 
> 时间：2013-03-04T23:54:30.827
> 
> 标签：html, hyperlink

谷歌给我的印象是“link rel=next”类型的链接用于多部分文档 - 其中一个文档分布在多个页面上。如果我将 rel=next 链接放在我网站的所有页面上，以便使用支持这些链接的浏览器（例如 lynx）轻松浏览网站，我是否会破坏任何内容或违背公认的用法？（在网络的早期，当页面末尾导航到“下一个”页面时按空格键，大概是根据 rel=next 链接。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:16:31.687

下一个链接关系表明链接上下文是系列的一部分......所以你违反了惯例，但我不确定是否会破坏任何东西。如果服务设置为使用您的文档，并且他们使用它，那么完全。它也可能会影响 seo，如果谷歌发现它们不正常，但我必须猜测。您可以在此处阅读有关链接关系的所有信息：[http ://www.iana.org/assignments/link-relations/link-relations.xml](http://www.iana.org/assignments/link-relations/link-relations.xml)

# c# - 从文本文件中提取数据

> ID：15213401
> 
> 赞同：-3
> 
> 时间：2013-03-04T23:54:35.547
> 
> 标签：c#, text-files

我有一个这样开头的文本文件：

> ```
> [Details]
> Version=100
> Switch=340
> Video=800
> Date=20100912
> Length=00:49:34.2
> Days=1
> hours=20 
> ```

有没有办法可以检查该`[Details]`部分中的每一行，然后执行类似的操作？

```
if(line == "version")
{
   // read the int 100
} 
```

文本文件中还有其他我不感兴趣的文本。我只需要找到那个`[Details]`部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:58:30.067

```
 using (StreamReader sr = new StreamReader(path)) 
        {
            while (sr.Peek() >= 0) 
            {
                var keyPair =  sr.ReadLine();
                var key = keyPair.Split('=')[0];
                var value = keyPair.Split('=')[1];
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:02:15.850

您可以使用`File.ReadAllLines`查找行，然后从那里`Version`解析`int`

```
foreach (var line in File.ReadAllLines("file").Where(line => line.StartsWith("Version")))
{
    int value = 0;
    if (int.TryParse(line.Replace("Version=","").Trim(), out value))
    {
        // do somthing with value
    }
} 
```

或者如果文件只包含 1 行版本

```
string version = File.ReadAllLines("file").FirstOrDefault(line => line.StartsWith("Version="));

int value = 0;
if (int.TryParse(version.Replace("Version=", "").Trim(), out value))
{
    // do somthing with value
} 
```

# wordpress - 链接/ Wordpress中的元框

> ID：15213408
> 
> 赞同：0
> 
> 时间：2013-03-04T23:55:28.823
> 
> 标签：wordpress, hyperlink, bookmarks

有没有办法在添加到链接时保存元框值？这是我的代码：

```
<?php
/*
Plugin Name: Link Date
Plugin URI: http://
Description: Adds links date field.
Version: None
Author: Auth
Author URI: http://
*/

add_action( 'add_meta_boxes', 'link_date_add' );
function link_date_add()
{
    add_meta_box( 'link-date-meta-box', 'Link Date', 'link_date', 'link', 'normal', 'high'     );
    }

function link_date( $post )
{
    $values = get_post_custom( $post->ID );
    $date = isset( $values['link_date_text'] ) ? esc_attr( $values['link_date_text'][0] ) : '';
    wp_nonce_field( 'my_link_date_nonce', 'link_date_nonce' );
    var_dump($post);
    ?>
<p>
    <label for="link_date_text">Link Date</label>
    <input type="text" name="link_date_text" id="link_date_text" value="<?php echo $date; ?>" />
</p>

<?php
}

add_action( 'save_post', 'link_date_save' );
function link_date_save( $post_id )
{
    if( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) return;

    if( !isset( $_POST['link_date_nonce'] ) || !wp_verify_nonce( $_POST['link_date_nonce'], 'my_link_date_nonce' ) ) return;

    if( !current_user_can( 'edit_post' ) ) return;

    $allowed = array(
        'a' => array(
        'href' => array() // and those anchords can only have href attribute
    )
);

if( isset( $_POST['link_date_text'] ) )
    update_post_meta( $post_id, 'link_date_text', wp_kses( $_POST['link_date_text'], $allowed ) );

}

?> 
```

当帖子类型更改为“帖子”时，此代码有效，但由于某种原因，它不会将数据保存为“链接”类型的帖子。

当帖子类型设置为“帖子”时，我从该字段中保存了一些数据，然后将代码中的帖子类型更新为“链接”，并另外更新了数据库（wp_postmeta），将 id 替换为链接的 id。然后此数据显示在链接的元框中，但机器人仍然能够更新此元框的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:25:42.997

答案是使用`add_action('edit_link','save_data')`而`add_option('name_of_option')`不是在`add_post_meta`此处查看完整结果[MetaBox Links](https://gist.github.com/davidchase/df9adeb1e03b88691899)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:48:01.213

经过一些实验，我想出了如何将来自链接管理器中自定义元框的数据作为发布元键/值（wp_postmeta）保存到数据库中。如果有人需要，这是一个工作示例：

```
action( 'add_meta_boxes', 'add_link_date' );
function add_link_date()
{
    add_meta_box( 'link-date-meta-box', 'Link Date', 'link_date', 'link', 'normal', 'high' );
}

function link_date( $link )
{
    $values = get_post_custom( $link->link_id );
    $date = isset( $values['link_date'] ) ? esc_attr( $values['link_date'][0] ) : '';
    wp_nonce_field( plugin_basename( __FILE__ ), 'link_date_nonce' );
?>
<p>
    <label for="link_date_text">Link Date</label>
    <input type="text" name="link_date_text" id="link_date_text" value="<?php echo $date; ?>" />
</p>

<?php
}

add_action( 'edit_link', 'myplugin_save_postdata' );

function myplugin_save_postdata( ) {
    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE )
        return;

    if ( !isset( $_POST['link_date_nonce'] ) || !wp_verify_nonce( $_POST['link_date_nonce'], plugin_basename( __FILE__ ) ) )
        return;

    $link_id = $_POST['link_id'];
    $linkDate = sanitize_text_field( $_POST['link_date_text'] );

    add_post_meta( $link_id, 'link_date', $linkDate, true ) or
    update_post_meta( $link_id, 'link_date', $linkDate );
} 
```

# asp.net - aspx web 资源的问题

> ID：15213411
> 
> 赞同：0
> 
> 时间：2013-03-04T23:55:52.570
> 
> 标签：asp.net, webresource.axd

**我如何让 WEBRESOURCE 在我在同一页面中有 CSS 和 C# 代码的情况下工作。**. *CSS 块中的 webresource 显示未声明“WebResource”。由于其保护级别，它可能无法访问。*

我已经添加`[assembly: WebResource("Common.AdResources.tick.png", "image/png")]`到程序集中，并且 png 文件的构建操作设置为嵌入资源

* * *

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<style type="text/css">

    .selling_points_title_row 
    {
        font-weight:bold;
        font-family:arial;
        font-size:14px;
        width: 250px;
    }

    .bui, .con { color: #636B3B; }
    .veh { color: #D4541D; }  

    .selling_points_header_row 
    {
        background-image: url('<%= WebResource("Common.AdResources.tick.png")%>');
        background-repeat: no-repeat;
        font-weight:bold;
        font-family:arial;
        font-size:14px;
        width: 250px;
        padding-left: 30px;
    }

    .selling_points_content_row 
    {        
        font-family:trebuchet ms;
        font-size:12px;
        color: #333333;
        width: 250px;
        padding-left: 30px;
    }

    hr { color: #cccccc; }
</style>

    <script type="text/VB" runat="server">

        Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

            Select Case Session("type")
                Case Is = "V"
                    vPoints.Visible = True
                Case Is = "B"
                    bPoints.Visible = True
                Case Is = "C"
                    cPoints.Visible = True
                Case Else
                    'Don't show anything
            End Select
        End Sub

    </script>
</head>
<body>

<asp:Panel id="vPoints" runat="server" visible="False">
<asp:Panel id="bPoints" runat="server" visible="False">
<asp:Panel id="cPoints" runat="server" visible="False"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:23:23.957

您需要从页面代码中调用`ClientScriptManager.GetWebResourceUrl()`.

查看 MSDN 了解更多信息：http: [//msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.getwebresourceurl](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.getwebresourceurl)

# iphone - Facebook SDK：用于发布流的 FBLoginView

> ID：15213412
> 
> 赞同：3
> 
> 时间：2013-03-04T23:55:54.890
> 
> 标签：iphone, objective-c, facebook, loginview

下面的代码尝试在单击 fbloginview 时允许用户的读取权限后重新授权发布权限。

```
#pragma mark FBLoginViewDelegate Method
- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView user:(id<FBGraphUser>)user {
    NSLog(@"User info fetched %@ %@", user.name, user.id);

    [Global FBUser:user.first_name lastname:user.last_name fid:user.id];

    if ([[FBSession activeSession] isOpen])
    {
        //[[FBSession activeSession] closeAndClearTokenInformation];

        [[FBSession activeSession] reauthorizeWithPublishPermissions:[[[NSArray alloc] initWithObjects:@"publish_stream", nil] autorelease]
         defaultAudience:FBSessionDefaultAudienceEveryone
         completionHandler:^(FBSession* session, NSError* error)
         {
             if ([delegate respondsToSelector:@selector(SignUpAlertViewWasDone:)])
                 [delegate SignUpAlertViewWasDone:self];

             [self removeFromSuperview];
         }
         ];
    } 
```

它在这里给了我这个错误：

**异常'com.facebook.sdk:InvalidOperationException'，原因：'FBSession：重新授权无效，而先前的重新授权调用尚未完成。'**

是否有可以检测到上一次重新授权调用何时完成的功能？

我尝试使用 openWithPublishPermission 但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T01:26:20.817

尝试异步调用它

```
- (void)loginViewFetchedUserInfo:(FBLoginView *)loginView user:(id<FBGraphUser>)user {

    if ([[FBSession activeSession] isOpen])
    {
        dispatch_async(dispatch_get_current_queue(), ^{
            [[FBSession activeSession] reauthorizeWithPublishPermissions:[[[NSArray alloc] initWithObjects:@"publish_stream", nil] autorelease]
                                                         defaultAudience:FBSessionDefaultAudienceEveryone
                                                       completionHandler:^(FBSession* session, NSError* error)
             {
                 if ([delegate respondsToSelector:@selector(SignUpAlertViewWasDone:)])
                     [delegate SignUpAlertViewWasDone:self];

                 [self removeFromSuperview];
             }];
         };
    }
} 
```

# javascript - HTML5 视频标签中的提示点

> ID：15213414
> 
> 赞同：7
> 
> 时间：2013-03-04T23:56:06.170
> 
> 标签：javascript, html, video

我需要 HTML5 视频播放器的提示点。我找到[了 Cuepoint.js](http://cuepoint.org/)，除了这只是用于字幕之类的东西。当击中提示点时，我需要更改文本以外的其他内容。

我有点自己制定了提示点逻辑，但我觉得它没有达到应有的效率。我现在正在处理一小部分时间，这没什么大不了的。恐怕当我进入数百个时，它可能会导致一些性能问题。

这就是我想出的，而且非常准确：

```
function timeUpdate(event)
{
    var times = [3,8,13,19,25];
    currentTime = player.currentTime();
    $.each(times,function(key, value)
    {
        if (currentTime >= times[key] && currentTime <= times[key] + 0.3)
        {
            currentIndex++;
            loadAssets(currentIndex);
        }   
    });
} 
```

`times`数组只是一个例子。有没有更有效的方法来做到这一点，还是差不多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-12T23:52:39.223

Ronnie，你不需要遍历那个数组。如果项目是有序的，只需检查第一个，然后将 currentIndex 加一。

```
function timeUpdate(event)
{
    var times = [3,8,13,19,25];
    currentTime = player.currentTime();

    if (currentTime >= times[currentIndex])
    {
        currentIndex++;
        loadAssets(currentIndex);
    }   
} 
```

# php - PHP CodeIgniter Ion Auth 创建一个新组

> ID：15213418
> 
> 赞同：0
> 
> 时间：2013-03-04T23:56:28.870
> 
> 标签：php, codeigniter, ion-auth, codeigniter-helpers

我正在建立一个网站，并且是 Codeigniter 和 Ion Auth 的新手。我的网站由三层用户组成：普通用户、版主和管理员。我了解 is_admin 和 is_logged in，但不知道如何为我的版主创建新组。

理想情况下，我想使用这样的东西来保护我的版主页面：

```
if (!$this->ion_auth->in_group('moderator'))
{
    //redirect them to the home page because they must be an administrator to view this
    redirect($this->config->item('base_url'), 'refresh');
} 
```

如何为我的版主创建一个新的用户组？这是我需要在我的数据库中做的事情吗？我在文档中看到了代码，但不确定在哪里/如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:21:19.623

您可以手动将组添加到`groups`数据库的表中 - 我想这对您来说最简单，因为您可能只需要执行一次 - 或者您可以使用`create_group()`库中内置的方法：

```
 $this->ion_auth->create_group('moderator', 'This is the moderators group'); 
```

然后，您将能够按照您的建议检查您的用户。

# javascript - ASP.NET ConfirmButtonExtender 有条件的

> ID：15213420
> 
> 赞同：0
> 
> 时间：2013-03-04T23:56:43.253
> 
> 标签：javascript, asp.net, ajax, button, confirmbuttonextender

我的页面上有一个按钮（使用 ajax ConfirmButtonExtender）。

如果用户在页面上选择了超过 100 万行数据（这是在代码隐藏中计算的），当他们点击按钮时，会弹出消息询问他们是否要批量导出选择（即是或取消）。

所以基本上，有两种可能的情况。

1) 100 万行以下的选择。单击按钮时根本不显示弹出确认消息 - 只需在代码隐藏页面中运行一些代码。（即绕过 ConfirmButtonExtender 消息）。

2) 选择超过 100 万行。将出现一条弹出消息，要求用户确认他们是否要批量导出选择。用户将选择是或取消。

我的问题是 - ConfirmButtonExtender 的确认消息是否可能是有条件的（基于代码隐藏中的一些计算）？

我该如何实现这一目标？请记住，当用户第一次点击按钮时，一些代码首先需要在代码隐藏上运行以计算选择的数量，然后决定是否提示弹出消息。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T09:24:06.310

如果我理解正确，我将跳过该查询以计算数据行。但是为了在正确的条件下触发 Confirm Button Extender，您可以简单地使用以下代码：

```
if (condition == true)
{
    ScriptManager.RegisterStartupScript(Page, this.GetType(), "notify", "function pageLoad(){$find('YourConfirmButtonExtenderID')._displayConfirmDialog();}", true);
}
else
{
    //do nothing
} 
```

希望它对你有所帮助。

# haskell - 如何使用 Haskell 类型重载方法

> ID：15213421
> 
> 赞同：3
> 
> 时间：2013-03-04T23:56:43.237
> 
> 标签：haskell

我正在做一个小项目，我正在尝试学习 Haskell 并编写一个程序来帮助计划学生的日程安排。我有以下类型：

```
data Course =
    { id :: Int, title :: String }
    deriving (Eq, Show)

data Req = Single Course
    | Any [Req]
    | All [Req]
    deriving Show 
```

现在我想写一个方法：

```
satisfies :: [Course] -> Req -> Bool 
```

但我无法弄清楚我应该如何使用有关 Req 的信息来重载函数。我应该如何进行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:22:37.483

首先，一些错别字：

```
data Course = Course { 
   id :: Int, 
   title :: String 
   } deriving (Eq, Show) 
```

请注意添加了数据构造函数名称（“Course”）以及从“derives”更改为“deriving”。

```
data Req = Single Course
    | Any [Req]
    | All [Req]
    deriving Show 
```

同样在这里。

```
satisfies :: [Course] -> Req -> Bool 
```

将类型从 [Courses] 更改为 [Course]。

```
course1 = Course 1 "One"
course2 = Course 2 "Two"
course3 = Course 3 "Three"
course4 = Course 4 "Four"
course5 = Course 5 "Five"

req1 = Single course2
req2 = Any [Single course2, Single course3, Single course5]
req3 = All [Single course1, Single course2]
req4 = Any [req2, req3]
req5 = All [req4, req1] 
```

一些测试数据。

```
satisfies cs (Single c) = c `elem` cs 
```

匹配单一课程要求。另外两个很简单，因为它们所做的大部分工作已经在 Prelude 中定义，你可以像英语一样阅读它们：

```
satisfies cs (Single c) = c `elem` cs
satisfies cs (Any reqs) = any (satisfies cs) reqs
satisfies cs (All reqs) = all (satisfies cs) reqs 
```

以下是您朋友的类型签名`any`和`all`：

```
any :: (a -> Bool) -> [a] -> Bool
all :: (a -> Bool) -> [a] -> Bool 
```

它们都采用布尔函数并为列表的每个成员测试它。由于我们有一个需求列表和一个测试函数（它`satisfies`递归地使用并部分应用于被免除的课程），我们可以直接使用它们。

让我们测试一下：

```
*TestSO15213421> satisfies [course1] req1
False
*TestSO15213421> satisfies [course2] req1
True
*TestSO15213421> satisfies [course1, course2] req1
True
*TestSO15213421> satisfies [course1, course2] req1
True
*TestSO15213421> satisfies [course1, course2] req3
True
*TestSO15213421> satisfies [course1, course3] req3
False
*TestSO15213421> satisfies [course1, course3] req2
True
*TestSO15213421> satisfies [course4] req2
False
*TestSO15213421> satisfies [course4] req5
False
*TestSO15213421> satisfies [course5] req2
True
*TestSO15213421> satisfies [course4] req4
False
*TestSO15213421> satisfies [course2] req4
True
*TestSO15213421> satisfies [course2, course3] req4
True
*TestSO15213421> satisfies [course5, course3] req4
True
*TestSO15213421> satisfies [course5, course3] req5
False 
```

一切如预期。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T00:22:48.060

好的，所以我假设您想要的是接受 a `Req`，然后根据它决定给定的列表是否`Courses`满足它。

其次，我会进行 1 次更改以减少痛苦，

```
Req = ... Any [Courses] | All [Courses] ... 
```

而不是`[Req]`s 因为真的，有任意嵌套的需求对于这个函数来说有点奇怪和奇怪。

为此，我们将进行一些模式匹配：

```
satisfies :: [Courses] -> Req -> Bool
satisfies courses (Single course) = undefined
satisfies courses (Any reqs)      = undefined
satisfies courses (All reqs)      = undefined 
```

好的，现在我们已经解决了 3 个问题。

首先，我们如何检查列表是否包含元素？我会让你弄清楚如何做到这一点，假设你找出一个函数`elem`然后

```
satisfies courses (Single course) = course `elem` courses 
```

其次，我们如何检查两个列表是否完全相交？假设函数是`inter`

```
satisfies courses (Any reqs)      = courses `inter` reqs 
```

最后，我们如何检查一个列表是否包含另一个？叫它`contains`

```
satisfies courses (All reqs0)      = courses `contains` reqs 
```

现在这是处理 ADT 的一种非常常见的方法。将它们分开并逐案分析。

# xml - DTD - 有没有办法要求具有特定值的属性存在？

> ID：15213422
> 
> 赞同：2
> 
> 时间：2013-03-04T23:56:47.157
> 
> 标签：xml, dtd

我想做这样的事情：

```
<div type="foobar"></div> 
```

用外行的话来说，我想要求文档有一个 foobar 类型的元素。更具体地说，我想要求属性值对类型**和**“foobar”唯一存在。

我意识到我可以做类似的事情：

```
<!ATTLIST div type CDATA #REQUIRED> 
```

但这并没有像我想要的那样限制价值。

或者

```
<!ATTLIST div type CDATA #FIXED "foobar"> 
```

要求属性为特定值。这接近我想要的，但我希望其他值成为可能。我只想确保存在**一个**属性/值对的定义。有没有办法用 XML DTD 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:54:45.660

您可以使用枚举：

```
<!ATTLIST div
          type (foobar) #REQUIRED> 
```

通过将它们添加到枚举中，其他值是可能的。

例如，以下声明要求元素`type`上的属性具有 value或.`div``foobar``barfoo`

```
<!ATTLIST div
          type (foobar|barfoo) #REQUIRED> 
```

[有关详细信息，请参阅http://www.w3.org/TR/REC-xml/#sec-attribute-types](http://www.w3.org/TR/REC-xml/#sec-attribute-types)中的“枚举属性类型” 。

# html - div内容容器在内容结束之前切断？

> ID：15213423
> 
> 赞同：0
> 
> 时间：2013-03-04T23:56:56.870
> 
> 标签：html, css, height, overflow

所以有一个 div 基本上是页面的主要内容，但它不会延伸到它内部内容的底部。我尝试了很多不同的东西，但不确定我是否有错误的 CSS 属性组合以使其正确显示。有人请提供解释。下面是html和css。

```
 <html>
<head>
    <title></title>
    <style type="text/css">
    body{
font-family: 'Raleway', sans-serif;
height:100%;
position:relative;
background:url("../image/la_woodlands.jpg");
background-repeat:no-repeat;
background-size:100% 100%;
background-attachment: fixed;
overflow-x:hidden;
}

.main_content_wrapper{
position:relative;
}

.content_container{
position:relative;
left:50%;
top:0;
margin-left:-480px;
width:920px;
padding:30px 20px;
height:100%;
display:block;
background:rgba(41,41,41,.8);
}

.content_section_header{
position:relative;
top:20px;
}

    </style>
</head>
<body>

    <div class="main_content_wrapper">
 <div class="content_container">

  <h1 class="align_center"></h1>

  <div class="content_section_header">
  <h1 class="align_center times">Catalog</h1>
  <div class="catalog_navigation">
  <ul>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
  </ul>
  </div>
 </div>

 <h1>fjebgrewgre</h1>
  <h1>fjebgrewgre</h1>
   <h1>fjebgrewgre</h1>
    <h1>fjebgrewgre</h1>
     <h1>fjebgrewgre</h1>
      <h1>fjebgrewgre</h1>
       <h1>fjebgrewgre</h1>
        <h1>fjebgrewgre</h1>
         <h1>fjebgrewgre</h1>
          <h1>fjebgrewgre</h1>
           <h1>fjebgrewgre</h1>
            <h1>fjebgrewgre</h1>
             <h1>fjebgrewgre</h1>
              <h1>fjebgrewgre</h1>

</div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:51:01.550

背景是否适合内容？

![在此处输入图像描述](../Images/01b385231d6dfffbd788498aff4d1800.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:57:05.413

尝试使用`float` `.content_container`，以便如果您添加内容，高度`.content_container`将自动调整

```
.content_container{
float:left;
position:relative;
left:50%;
top:0;
margin-left:-480px;
width:920px;
padding:30px 20px;
display:block;
background:rgba(255,255,255,.9) no-repeat;
} 
```

如果我错了， 这里的示例[演示就是你想要实现的纠正我](http://jsfiddle.net/jhunlio/tjfNU/3/)
*注意：添加更多`h1`标签以显示效果*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:01:48.533

您应该添加以下代码：

```
html, body {
     height: 100%;
     min-height: 100%;
}

.content_container {
   min-height: 100%;
} 
```

[**演示**](http://jsfiddle.net/hwvMK/)

我也改变了：

```
.content_container {
    left:50%;
    top:0;
    margin-left:-480px;
} 
```

至：

```
.content_container {
   margin: 0 auto;
} 
```

因为它的代码更简洁。

# python - 如何从我在 Google App Engine SDK 上运行的 Python 应用程序访问本地 MySQL 实例？

> ID：15213428
> 
> 赞同：1
> 
> 时间：2013-03-04T23:57:19.903
> 
> 标签：python, mysql, google-app-engine, mysql-python

最近，我正在浏览 Google Developers Academy 网站上的“将 Python App Engine 与 Google Cloud SQL 一起使用”教程。但是，我偶然发现了练习“使用本地 MySQL 实例构建应用程序”的第一部分。我无法将示例代码 (main.py) 连接到我的本地 MySQL 实例。想知道是否有人找到了解决此问题的方法。

如果您能与我分享您如何设置 MySQL、配置它以便 GAE 的沙箱能够访问 MySQL-python 连接器，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:48:11.443

我设法为一个项目做了一段时间。程序如下（适用于 Windows）：

1.  在安装过程中安装 mysql 服务器 [MYSQL](http://dev.mysql.com/downloads/installer/)记下用户名和密码，Instance 的名称应该类似于 MySQL55 <-- 取决于您安装的版本
2.  下载并安装 mysql python 连接器[MYSQL Python Connector](http://sourceforge.net/projects/mysql-python/)
3.  确保 Mysql 服务器正在运行
4.  在您的应用程序中插入以下导入行：

    ```
    from google.appengine.api import rdbms 
    ```

5\. 我所做的是创建一个返回数据连接的函数，如下所示：

```
def conn_to_db():
return rdbms.connect(instance='MySQL55', database='Your_db_name_here', user='root', password='whatever_password_you_chose') 
```

然后查询数据库：

```
conn = conn_to_db()
cursor = conn.cursor()
cursor.execute('SELECT * FROM foo where foos = %s', (bar))
for row in cursor.fetchall():
    var1 = row[0]
    var2 = row[1]
conn.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:14:39.693

由于我是 GAE、Python、MySQL 和使用 GAE 在 Mac OS X 上开发的新手，我确实花了一段时间才弄清楚如何让示例应用程序正常工作。既然我找到了解决方案，我想在这里分享它，这样您就可以按照我的步骤在您的本地 GAE SDK 环境中使用本地 MySQL 实例启动并运行示例应用程序。

就个人而言，我发现这非常有用和方便，因为对于开发人员来说，在将 GAE 应用程序部署到 Google App Engine PaaS 上之前，在他们自己的机器上使用本地 MySQL 实例开发他们的 GAE 应用程序是很自然的。

说得够多了，下面是我想分享的过程：

1.  从 mysql.com 社区站点安装 MySQL dmg（我的版本是 mysql-5.5.30-osx10.6-x86_64.dmg）

2.  修改您的 ~/.profile 以添加这些环境变量（添加这些行） export PATH=/usr/local/mysql/bin:$PATH （或您安装的任何 MySQL 版本） export DYLD_LIBRARY_PATH=/usr/local/mysql /lib/

3.  如果您还没有这样做，请从 Apple 的 AppStore 安装 Xcode。然后确保您还从首选项“下载”部分安装了“命令行工具”。这一步是必要的，因为它将安装一个 gcc 编译器（位于我的文件系统：/usr/llvm-gcc-4.2/bin/llvm-gcc-4.2）以在下面的第 4 步中构建 MySQL-python 连接器。

4.  然后运行“sudo easy_install MySQL-python”（这样您就可以将应用程序连接到 Mac 上的本地 MySQL 实例）

5.  由于适用于 Python 的 Google App Engine SDK 是沙箱环境，因此您需要在此文件 /usr/local/bin/dev_appserver.py 中添加“import MySQLdb”，以将 GAE 的沙箱环境桥接到本地 MySQL 实例。您需要在“main.py”文件的 [示例代码][2] 中进行以下更改。在您可以正确运行示例代码之前如下所示：

    *   在“import”部分添加“import MySQLdb”语句。
    *   将“CLOUDSQL_INSTANCE = ''”语句替换为“CLOUDSQL_INSTANCE = 'localhost'”。
    *   由于 MySQLdb 包是与 MySQL 的 DB API v2.0 兼容接口，因此需要重写“get_connection()”函数。MySQLdb的“connect()”函数不理解参数：“instance”、“database”和“password”。要使用 MySQLdb 包访问本地 MySQL 实例，您需要重写“get_connection”函数，如下所示：

        ```
         def get_connection():
        return MySQLdb.connect(host=CLOUDSQL_INSTANCE, db=DATABASE_NAME,
        user=USER_NAME, passwd=PASSWORD, charset='utf8') 
        ```

6.  完成上述所有步骤后，您现在可以通过执行以下命令启动示例应用程序：“dev_appserver.py”。在您的应用程序目录中。

7.  如果您使用默认的 8080 端口，您可以将浏览器指向`http://localhost:8080`.

8.  享受并玩得开心。

# c# - 如何更改最后一个编辑文件的人

> ID：15213433
> 
> 赞同：0
> 
> 时间：2013-03-04T23:58:05.647
> 
> 标签：c#, .net, file, edit

有没有办法改变最后一个编辑文件的人？我可以让最后一个用户使用此代码对其进行编辑...

```
string FileLocation = @"C:\test.txt";
FileInfo droppedFile = new FileInfo(FileLocation);
FileSecurity fileSecurity = droppedFile.GetAccessControl();
IdentityReference identityReference = fileSecurity.GetOwner(typeof(NTAccount));
string userName = identityReference.Value;
Console.WriteLine(userName); 
```

...但我该如何改变它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:05:06.717

您不能使用编码更改文件的使用数据。这样，安全规则将毫无用处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:14:50.523

这样做需要欺骗操作系统并绕过其安全机制，我认为这是不可能的。

# php - php生成的有序列表不起作用

> ID：15213435
> 
> 赞同：-1
> 
> 时间：2013-03-04T23:58:30.860
> 
> 标签：php, html, list, html-lists

```
<ol>
    <?php foreach ($articles as $article) { //start of the loop
        ?> //interruption to allow html to be passed rather than echoed
           <h3><li>
           <a href="article.php?id=<?php echo $article['article_id']; ?>"><?php echo $article['article_title']; ?></a>
           <small> &nbsp; postat la     
               <?php 
                   echo date('d.m.Y', $article['article_timestamp']);
               ?>
           </small>
          </li></h3>
         <?php //'starting' php again to close the loop
    } ?> //closing loop and coming back to html to allow closing the </ol>
</ol> 
```

但我仍然不知道为什么我没有从订购的数据库中获取元素。

我得到的看起来像：

“1。” Lorem Ipsum postat la 28.02.2013

“1。” 一些文本 postat la 28.02.2013（我在它们周围加上引号，因为 stackoverflow 它似乎默认自动递增）

代替

1.  Lorem Ipsum postat la 28.02.2013
2.  一些文本 postat la 28.02.2013

尽管 Chrome 按应有的方式显示（1 和 2）Opera 和 Internet Explorer 为每个条目显示 1。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T00:03:48.527

拿走`H3`标签，你会没事的！

你不应该`LI`用除`UL`or以外的任何东西来包装你的标签`OL`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:08:14.170

问题出在您`<h3>`之前打开的标签`<li>`中，列表的架构是

```
<ol>
  <li>...</li>
</ol> 
```

将您的 html 更改为

```
...
<ol>
    <li><h3>...</h3></li>
</ol>
... 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-03-05T00:01:42.903

是不是因为`<ol> tag`try`ul`而取而代之。- 使用`<?php foreach ($articles as $i = >$article)`和展示`<?= $i ?>`

# functional-programming - 安装了 ocamlfind (findlib)，但在 Mac 中永远找不到任何额外的包

> ID：15213437
> 
> 赞同：4
> 
> 时间：2013-03-04T23:58:37.493
> 
> 标签：functional-programming, ocaml, opam

刚买了一台新的 Mac，Mountain Lion，我希望设置所有与 ocaml 相关的东西。

我使用了以下命令：

```
opam switch 4.00.1

opam install findlib

opam install batteries 
```

全部安装成功，没有错误。

**但我不能使用`batteries`,`bisect`等。总是说`package can't be found`.**

**任何的想法？**

我应该设置任何`path`东西吗？

* * *

编辑：

有关更多信息，我按照以下步骤操作：

```
1\. install homebrew

    http://mxcl.github.com/homebrew/

    ruby -e "$(curl -fsSL https://raw.github.com/mxcl/homebrew/go)"

2\. Emacs for Mac OS X

    http://emacsformacosx.com/

3\. Install tuareg-mode

    http://forge.ocamlcore.org/forum/forum.php?forum_id=808

    http://marmalade-repo.org/
    Add to your .emacs: (require 'package) (in home directory)

    (add-to-list 'package-archives 
        '("marmalade" .
          "http://marmalade-repo.org/packages/"))
    (package-initialize)

    M-x eval-buffer to evaluate it, and then do M-x package-refresh-contents to load in the package listing.\

    ** m-x list-packages **

    select tuareg package

    click install

4\. Install OCaml, OPam, rlwrap

    make sure XCode command line tool is installed: 
        http://stackoverflow.com/questions/10921690/on-apple-osx-lion-make-not-in-path

    brew install ocaml

    brew install opam

    opam init

    brew install rlwrap

5\. Install batteries-included (ocamlfind will be installed automatically)

    http://stackoverflow.com/questions/14947667/cant-load-batteries-using-findlib-in-ocaml-toplevel

    opam switch 4.00.1

    opam install batteries

    http://stackoverflow.com/questions/14751914/opam-package-not-running/14752071#14752071

    http://stackoverflow.com/questions/14840236/ocaml-batteries-installation

    https://github.com/ocaml-batteries-team/batteries-included/blob/master/ocamlinit

    Put the following in ~/.ocamlinit

    #use "topfind";;
    Toploop.use_silently
             Format.err_formatter (Filename.concat (Findlib.package_directory
             "batteries") "battop.ml");; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T00:10:37.810

你有运行“魔法”命令来设置你的环境变量吗？

```
eval `opam config env` 
```

# javascript - 使用 JavaScript 和 Require.JS 选择 jQuery 1.9 或 2.0

> ID：15213439
> 
> 赞同：10
> 
> 时间：2013-03-04T23:58:48.880
> 
> 标签：javascript, jquery, cross-browser, requirejs

jQuery 2.0 越来越成熟：[http ://blog.jquery.com/2013/03/01/jquery-2-0-beta-2-released/](http://blog.jquery.com/2013/03/01/jquery-2-0-beta-2-released/)

jQuery 2.0 打破了与旧浏览器的兼容性，因此必须知道何时继续使用 jQuery 1.9。推荐的做法是使用 IE 的条件注释：

```
<!--[if lt IE 9]>
    <script src="jquery-1.9.1.js"></script>
<![endif]-->
<!--[if gte IE 9]><!-->
    <script src="jquery-2.0.0b2.js"></script>
<!--<![endif]--> 
```

*   当前的 Web 开发最佳实践建议我们应该避免浏览器嗅探或用户代理字符串解析，但这不就是条件注释吗？

*   jQuery 2.0 是否只会破坏与旧 Internet Explorer 的兼容性？还是有其他浏览器会在 2.0 中变得更糟？

*   如果这不仅仅影响 Internet Explorer（这是条件注释唯一起作用的地方），那么我们应该使用什么策略来选择最好的 jQuery？

*   JavaScript 环境中是否存在全局可访问的值/对象/函数/等，其存在可用于表示与 jQuery 2.0 的兼容性（例如功能检测）？

## 主要问题

我的项目目前使用 Require.JS 来模块化我的代码。我的代码当前仅在遇到需要它的第一部分时才加载 jQuery。

**使用 Require.JS 加载正确版本的 jQuery 的最佳方法是什么？**

我目前正在考虑：

*   在加载 Require.JS 之前使用 IE 条件注释，然后手动“定义”jQuery

*   在设置Require.JS路径的代码中使用JS功能检测（在任何需要的jQuery之前）将路径设置为1.9或2.0（我的首选方法）

*   无论如何总是使用1.9（最安全和最无聊的方法）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T18:48:11.647

Adaptation of niaccurshi's answer to AMD spec.

```
// Do this before your first use of jQuery.

var pathToJQuery
if('querySelector' in document
    && 'localStorage' in window
    && 'addEventListener' in window) {
    pathToJQuery = '//cdn/jQuery2.0'
} else {
    pathToJQuery = '//cdn/jQuery1.9'
}

require.configure({'paths':{
    'jquery': pathToJQuery
}})

require(['jquery'], function($){ /* you get the one you need here */ }) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T00:07:24.553

实际上有一个更优雅的解决方案，它被用于`BBC`他们的响应式新闻网站。

它本质上检测被认为是 的浏览器`new`，因此将与 兼容`jQuery 2.0+`，因此将其他所有内容都保留为`old`浏览器。您也许可以使用 复制此`Require.js`内容，但事实是您不需要...

```
if(querySelector in document
    && localStorage in window
    && addEventListener in window) {
    //Add jQuery 2.0+
} else {
    //Add jQuery 1.9.0+
}

//This is intended to be a flag that can be checked against to see if the jQuery library has been loaded into the browser.
var jQueryVersion = 0;
function jQueryRunning(ver) {
    //This could be "true", or could be a version number, it's largely down to your own system needs!
    jQueryVersion = ver;
} 
```

**来源：** [链接](http://responsivenews.co.uk/post/18948466399/cutting-the-mustard)

您应该为 的每个脚本添加一个回调函数，该函数使用等于其版本号的参数进行`jQuery`调用，这可以帮助您决定进一步运行的函数，并有利于让您知道何时 jQuery 代码`jQueryRunning`已嵌入`(just in case the connection is slow and it takes a while to download)`。

如果使用`Require.js`它可能不是您要关心的事情！

我说这是一个优雅的解决方案，因为你是对的，问题不仅在于旧版本`IE`，还在于旧版本`Firefox (before 3.5)`和旧移动浏览器（如果它们甚至处理 javascript！）

# java - Play 1.2.4 + CRUD 模块：生成散列密码

> ID：15213440
> 
> 赞同：0
> 
> 时间：2013-03-04T23:58:49.567
> 
> 标签：java, jpa, hash, playframework, crud

我有一个 user.java 类

```
@javax.persistence.Entity
@Table(name="users")
public class User extends Model implements RoleHolder {

   public User(String email, String password, String firstName, String lastName, Status status, List<UserRole> roles){
    this.email = email;
    this.password = Crypto.passwordHash(password+email);
    this.firstName = firstName;
    this.lastName = lastName;
    this.status = status; 
    this.roles = roles;
} 
```

还有一个users.java

```
public class Users extends CRUD { 
```

}

但是，当我创建一个用户时，它会在数据库中存储一个明文密码，而不是一个加盐和散列的密码？任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:47:35.257

您应该从控制器类中的 CRUD 类重写`create()`和方法。`save()``Users`

也许解决方案看起来像这样：

```
@CRUD.For(User.class)
public class Users extends CRUD {
   /**
    * Re-implement Create (C) method
    * @throws Exception
    */
   public static void create() throws Exception {
      // Get model type
      ObjectType type = ObjectType.get(getControllerClass());
      notFoundIfNull(type); // render not found error if framework can't determine model type
      Constructor<?> constructor = type.entityClass.getDeclaredConstructor();
      constructor.setAccessible(true);

      // Create new instance of model
      User object = (User) constructor.newInstance();
      // Bind all parameter value from submitted form
      Binder.bindBean(params.getRootParamNode(), "object", object);
      // Hash the password
      object.password = Crypto.passwordHash(object.email + object.password);

      // Check validity of model
      validation.valid(object);
      if (validation.hasErrors()) {
         renderArgs.put("error", play.i18n.Messages.get("crud.hasErrors"));
         try {
            render(request.controller.replace(".", "/") + "/blank.html", type, object);
         } catch (TemplateNotFoundException e) {
            render("CRUD/blank.html", type, object);
         }
      }
      object._save(); // Finally, save the model
      flash.success(play.i18n.Messages.get("crud.created", type.modelName));
      if (params.get("_save") != null) {
         redirect(request.controller + ".list");
      }
      if (params.get("_saveAndAddAnother") != null) {
         redirect(request.controller + ".blank");
      }
      redirect(request.controller + ".show", object._key());
   }

   /**
    * Re-implement Update (U) mehod
    * @param id
    * @throws Exception
    */
   public static void save(String id) throws Exception {
      // Get model type
      ObjectType type = ObjectType.get(getControllerClass());
      notFoundIfNull(type); // render not found error if framework can't determine model type

      // Find the model to be updated
      User object = (User) type.findById(id);
      notFoundIfNull(object); // render not found error if framework can't determine model record
      // Bind all parameter value from submitted form
      Binder.bindBean(params.getRootParamNode(), "object", object);
      // Hash the password
      object.password = Crypto.passwordHash(object.email + object.password);

      // Check validity of model
      validation.valid(object);
      if (validation.hasErrors()) {
         renderArgs.put("error", play.i18n.Messages.get("crud.hasErrors"));
         try {
            render(request.controller.replace(".", "/") + "/show.html", type, object);
         } catch (TemplateNotFoundException e) {
            render("CRUD/show.html", type, object);
         }
      }
      object._save(); // Finally, save changes
      flash.success(play.i18n.Messages.get("crud.saved", type.modelName));
      if (params.get("_save") != null) {
         redirect(request.controller + ".list");
      }
      redirect(request.controller + ".show", object._key());
   }
} 
```

# macos - NSUserDefaults 是否安全地处理自动终止？

> ID：15213448
> 
> 赞同：5
> 
> 时间：2013-03-04T23:59:35.243
> 
> 标签：macos, nsuserdefaults

苹果的文件说

> **NSUserDefaults 暂时禁用突然终止**，以防止在设置默认值和将包含该默认值的首选项文件写入磁盘的时间之间进程终止。

它是否也为自动终止执行此操作，或者`synchronize`当我怀疑可能发生自动终止时（例如，当应用程序被隐藏时），我必须手动执行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:03:19.290

它不需要专门为自动终止做任何事情。原因是自动终止的行为与 ⌘Q 没有什么不同（即`-[NSApp terminate:]`，如果未启用突然终止，则调用它），并且`NSUserDefaults`已经很好地处理了 ⌘Q。

[Apple 的 2011 年 WWDC 演示文稿关于自动终止](https://developer.apple.com/videos/wwdc/2011/#resume-and-automatic-termination-in-lion)（需要注册，从 34:00 左右开始）有更多信息。

# wpf - 如何在 WPF DataGrid SelectedCellsChanged 中获取单元格模板数据上下文？

> ID：15213449
> 
> 赞同：0
> 
> 时间：2013-03-04T23:59:36.400
> 
> 标签：wpf, datagrid, wpf-controls, datagridcell

我想在单元格选择期间更新单元格数据上下文模型中的一些字段。

WPF 数据网格包含事件**SelectedCellsChanged**但我找不到任何数据上下文属性。是否可以从当前事件中获取单元格数据上下文？

```
private void OnSelectedCellChanged(object sender, SelectedCellsChangedEventArgs e)
        {
            var firstCell=e.AddedCells.FirstOrDefault();
            //How can i get cell datacontext?

        }

<DataGrid SelectionUnit="CellOrRowHeader" 
    x:Name="grid"
        SelectedCellsChanged="OnSelectedCellChanged"
        ItemsSource="{Binding Items}" ... 
```

Ps 是否可以从 SelectedCellsChanged 上的单元格模板中获得控制权？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T16:14:23.370

只要确保您调试的不是网格“新行”，因为 datacontext 为空！:)

```
foreach (var item in e.AddedCells)
{
    var column = item.Column as FocusableDataGridTemplateColumn;
    if (column != null)
    {
        var presenter=item.Column.GetCellContent(item.Item);
        presenter.DataContext;
    }
} 
```

# magento - 更新默认客户地址的国家/地区

> ID：15213450
> 
> 赞同：1
> 
> 时间：2013-03-04T23:59:37.457
> 
> 标签：magento

任何人都有用于更新客户默认送货 + 账单地址的示例脚本？我需要遍历所有客户，并将国家/地区设置为默认的“美国”，以防他们没有指定国家/地区。

我尝试了以下，没有运气。有什么想法吗？

```
$customers = Mage::getResourceModel('customer/customer_collection');

foreach ($customers as $customer) {

    // customer object
    $customer = Mage::getModel('customer/customer')->load($customer->getId());
    $address = Mage::getModel('customer/address');

    if ($default_shipping_id = $customer->getDefaultShipping()) {
         $address->load($default_shipping_id);
    } else {
         $address
            ->setCustomerId($customer->getId())
            ->setIsDefaultShipping('1')
            ->setSaveInAddressBook('1')
         ;
         $address_arr = $address->getData();

         // country
         if ( !isset($address_arr['country_id']) ) {

            $address->setCountryId('United States');

            try {
                $address->save();
                fwrite(STDOUT, '++ COUNTRY UPDATED FOR ' . $customer->getId() . "\n");
            } catch(Exception $e) {
                error_log(json_encode($e->getMessage()));
            }

         }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:20:12.287

它在您的代码中是一个错字

这条线必须是

```
 $address->setCountryId('US'); 
```

代替

```
 $address->setCountryId('United States'); 
```

您应该使用国家 ID 而不是名称，而美国的国家 ID 是 US.. 所以使用它并正确设置它。

# string - 使用PHP从字符串中删除最后一个数字？

> ID：15213452
> 
> 赞同：4
> 
> 时间：2013-03-04T23:59:43.683
> 
> 标签：string, numbers

我想从这个字符串中删除最后一个数字，包括破折号：

> 你好世界093

结果应该是：

> 你好世界

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T00:12:39.083

[http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)

`mixed preg_replace ( mixed $pattern , mixed $replacement , mixed $subject [, int $limit = -1 [, int &$count ]] );`

在你的情况下，它应该是这样的：

```
$subject = 'hello-world-093' ;
$subject_stripped = preg_replace ( '/-[0-9]*$/' , '' , $subject); 
```

上述模式将删除`-`字符串末尾的和所有数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:02:24.703

[http://php.net/manual/en/function.strrpos.php](http://php.net/manual/en/function.strrpos.php)

*strrpos — 查找字符串中最后一次出现的子字符串的位置*

`strrpos`对字符进行操作，您`-`就知道结果将是`-`字符串中 a 的最后一个位置。

[现在，您可以通过使用http://www.php.net/manual/en/function.substr.php](http://www.php.net/manual/en/function.substr.php)并提供您的位置作为长度来仅获取字符串的第一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T00:24:27.507

这是另一种方式。我提供这不是最好的方法，而只是另一种剥猫皮的方法。我认为重要的是要了解有很多方法可以解决问题并进行探索。通过学习从不同角度解决问题，您将学到很多东西。

祝你好运，希望这会有帮助，

蒂姆·杜马斯

Tim@mpact-media.com

```
<?php 
$pattern = "/^(.*)-[0-9]*$/";
$string = "hello-world-093";
preg_match($pattern, $string, $matches);
print_r($matches);
?> 
```

# jquery - jQuery 如何计算回调变量值？

> ID：15213458
> 
> 赞同：0
> 
> 时间：2013-03-05T00:00:31.673
> 
> 标签：jquery, callback, formula

jQuery 总是在 url 的末尾附加 2 个 GET 变量，如下所示：

```
callback=jQuery172010710813803598285_1362438925287&_=1362438934989 
```

但是他们如何计算这些数字呢？我发现最后 2 个数字的前 10 个符号是当前时间戳，但我无法弄清楚最后 3 个数字代表什么。或者第一部分是如何创建的。有谁知道这个？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:43:47.870

通过使用一些尝试提供尽可能多的随机和唯一数字的功能。诸如`uniqid()`（[Link](http://phpjs.org/functions/uniqid/)）功能之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:01:14.517

它是使用这个创建的：

```
jsonpCallback: function() {
    var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( ajax_nonce++ ) );
    this[ callback ] = true;
    return callback;
} 
```

首先，它会尝试使用以前使用过的回调（如果存在）。如果没有，那么它使用`jQuery.expando`（在初始化 jQuery 时计算出的位置和`"jQuery" + ( core_version + Math.random() ).replace( /\D/g, "" )`位置`+ "_" + ( ajax_nonce++ )`。这确保了一个唯一的回调名称，无论您发送请求的速度有多快。`ajax_nonce``$.now()`

考虑到这一点，我可以假设您使用的是 jQuery 1.7.2 并且需要更新，:p

# arrays - 在R中将矩阵组合成一个数组

> ID：15213463
> 
> 赞同：35
> 
> 时间：2013-03-05T00:00:59.313
> 
> 标签：arrays, r, matrix

如果我创建了多个矩阵，如何将它们组合成一个数组？我有 8 个矩阵，每个矩阵有 200 行和 200 列，我需要将它们组合成一个 dim = 200,200,8 的数组。所以我希望我的每个矩阵都是我数组的一部分。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-05T00:17:53.100

您可以使用包中的`abind`功能`abind`：

```
library(abind)
newarray <- abind( mat1, mat2, mat3, mat4, along=3 )

## or if mats are in a list (a good idea)

newarray <- abind( matlist, along=3 ) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-05T00:03:24.737

这是两个的例子。您可以轻松地将其扩展到八个

```
# create two matricies with however many rows and columns
x <- matrix( 1:9 , 3 , 3 )
y <- matrix( 10:18 , 3 , 3 )
# look at your starting data
x
y

# store both inside an array, with the same first two dimensions,
# but now with a third dimension equal to the number of matricies
# that you are combining
z <- array( c( x , y ) , dim = c( 3 , 3 , 2 ) )

# result
z 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-04-06T02:14:02.373

简短的版本是您可以使用以下函数将一组矩阵简化为数组`simplify2array`：

```
simplify2array(list(x,y)) 
```

下面是我之前的回答，展示了如何使用`sapply`'`simplify=`参数执行此操作，因为*'simplify2array()' 是当 'simplify' 不为假时从 'sapply()' 调用的实用程序*- 请参阅`?sapply`帮助文件。

这是一个类似于`abind`-ing 的版本，但没有使用任何额外的包。将所有内容收集到 a 中`list`，然后使用`sapply`' 选项到`simplify=`a 中`"array"`，对列表的每个部分都没有执行任何操作（`identity`只返回对象并等效于`function(x) x`）：

```
sapply(list(x,y), identity, simplify="array")
# similarly to save a couple of keystrokes, the following is usually identical
sapply(list(x,y), I, simplify="array")

#, , 1
#
#     [,1] [,2] [,3]
#[1,]    1    4    7
#[2,]    2    5    8
#[3,]    3    6    9
#
#, , 2
#
#     [,1] [,2] [,3]
#[1,]   10   13   16
#[2,]   11   14   17
#[3,]   12   15   18 
```

如果您想保留新数组中每个原始矩阵的名称作为标识符，请尝试：

```
sapply(mget(c("x","y")), identity, simplify="array") 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-23T04:15:02.503

这取决于您是否要将它们组合为列优先或行优先。这类似于使用`cbind`和`rbind`将向量组合成矩阵。因为 R 以列优先顺序存储矩阵，所以这是最容易完成的：

```
matrices <- list(
  matrix( 1:9 , 3 , 3 ),
  matrix( 10:18 , 3 , 3 )
);

#it is assumed all matrices in the list have equal dimensions
array1 <- array(
  data = do.call(cbind, matrices), 
  dim = c(dim(matrices[[1]]), length(matrices))
); 
```

新维度（在本例中为 2）将成为第 3 个维度。从 print 方法的输出来看，这看起来很准确，因为它按最后一个维度拆分了 print：

```
> print(array1)
, , 1

     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9

, , 2

     [,1] [,2] [,3]
[1,]   10   13   16
[2,]   11   14   17
[3,]   12   15   18 
```

但是，有时您可能需要将它们按第一个维度组合，例如：

```
array2 <- array (
  data = do.call(rbind, lapply(matrices, as.vector)), 
  dim = c(length(matrices), dim(matrices[[1]]))
);

print(array2[1,,])

     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9 
```

例如，假设您要将这些矩阵分配给具有列的数据框；每行一个矩阵。然后第一个维度，也就是`nrow`必须在数组和数据框中匹配：

```
 mydf <- data.frame(foo = 1:2, row.names=c("first", "second"))
 mydf$bar <- array1
  Error in `$<-.data.frame`(`*tmp*`, "bar", value = 1:18) : 
    replacement has 3 rows, data has 2

 mydf$bar <- array2
 mydf$bar 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-06T12:05:27.017

```
library('abind')
abind(m1, m2, m3, along = 2.5)
abind(m1, m2, m3, along = 3)

m4 <- list(m1, m2, m3)
abind(m4, along = 3) 

       along        input = matrix + matrix                       output 
----------------------------------------------------------------------------
        0         split columns and row bind them                 array
        0.5       same as 0                                       array
        1         combine matrices into one matrix by rowwise     matrix
        1.5       split columns and column bind them              array
        2         combine matrices into one matrix by columnwise  matrix
        2.5       Form an array with matrices                     array
        3         Same as 2.5                                     array 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T00:08:40.220

这个怎么样：

```
combmat <- array(dim=c(200,200,8), data=cbind(matrix1,matrix2,...,matrix8) ) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-08T22:47:52.183

相关：[如何在 R 中堆叠多个矩阵](https://stackoverflow.com/questions/19060280/how-to-stack-multiple-matrices-in-r)

到目前为止，所有解决方案的问题在于，当矩阵（不是`data.frame`s - 为此`dplyr`并且`data.table`工作正常）没有相同的行和列顺序时，bind 会将不相关的值相互堆叠。

如果您想检查并考虑每个维度中的名称，请查看[`narray`](https://github.com/mschubert/narray)：

[![在此处输入图像描述](../Images/a3a942e77ef7361fcb3e6feb4fbac3f0.png)](https://i.stack.imgur.com/IxE4Q.png)

（免责声明：我写了这个包）

# visual-studio-2012 - 带有 MP4 视频的 Visual Studio Express 2012 桌面

> ID：15213465
> 
> 赞同：1
> 
> 时间：2013-03-05T00:01:10.270
> 
> 标签：visual-studio-2012, desktop-application, mp4

我想构建一个播放 MP4 视频文件的桌面应用程序。我下载了 Visual Studio Express 2012 桌面版，并打算用 C# 对其进行编码。但是，在我开始走这条路之前，我想确保它甚至可以在使用 Visual Studio Express 构建的应用程序中播放 MP4 视频文件。如果 VS 不支持 MP4 文件，是否可以将桌面应用程序与一些可以播放 MP4 文件的第三方播放器（例如 VLC 或 QuickTime）链接？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:08:19.093

Visual Studio Express 本身不会限制您播放 MP4 文件的能力。Visual Studio 的 express 和 non-express SKU 之间的主要区别仅仅是它们支持的程序编辑功能集（更多项目、扩展等......）。

MP4 文件的播放是由库或操作系统提供的功能。如果该库存在，Visual Studio 不会阻止您使用它。我实际上不知道 Windows 是否这样做，但我的假设是确实如此。

# javascript - 如何在 JavaScript 中为键/值对创建动态键？

> ID：15213466
> 
> 赞同：0
> 
> 时间：2013-03-05T00:01:27.347
> 
> 标签：javascript, jquery

刚才我的代码是：

```
data = {'field_name':"some value",'name':$(this).val()}; 
```

但是，我想更改名称键，使其是动态的，例如：

```
var name = $(this).attr('id');
data = {'field_name':"some value",name:$(this).val()}; 
```

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:03:38.863

为此，请使用索引器语法

```
var data = { 'field_name': "some value" };
data[name] = $(this).val(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T00:04:29.370

jQuery 不是必需的：

```
data = {'field_name':"some value"};
data[this.id] = this.value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T00:04:15.873

这应该可以解决问题：

```
var val = data.name;
delete data.name;
data[name] = val; //name is the identifier here 
```

# c# - 如何在没有关联表的情况下存储多个枚举？

> ID：15213467
> 
> 赞同：0
> 
> 时间：2013-03-05T00:01:30.423
> 
> 标签：c#, nhibernate, enums

我想在 NHibernate 中存储一组，可能使用或`enums`以分隔格式存储。我想把它做平，也就是说，没有关联的表（这对我的情况来说太过分了）。`|``,`

现在，我可以毫无问题地使用`enum`并存储一个选择（即下拉或单选按钮）：

```
public enum Test
{
    Choice1, Choice2, Choice3
}

public virtual Test? TestRadioButtons { get; set } 
```

如果用户选择`Choice1`，NHibernate 将把它保存在数据库中。但是，如果我想要多个选择的选项，使用`Test`上面的枚举，例如复选框列表，我没有运气：

```
public virtual List<Test> TestCheckBoxList { get; set; } 
```

或者

```
public virtual List<string> TestCheckBoxList { get; set; } 
```

会抛出错误（我得到一个“表不存在”的错误，前者，Generic.List vs. generic.icollection 或后者的一些变体）。如果用户从复选框列表中选择“Choice1”和“Choice2”，则只保存“Choice1”。同样，对于我的情况，创建单独的表是多余的。

是否不可能在 NHibernate 中将多个枚举存储为某种分隔列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:06:25.120

您将需要使用[Flag enum](https://stackoverflow.com/a/8480/298754)，并将组合值作为单个值存储到数据库中。有关示例和说明，请参[见此答案。](https://stackoverflow.com/a/704435/298754)

这将使人类更难阅读，因为我们大多数人不会自动将数字转换为等效的位序列。但是，它应该使转换在您的代码中自动发生。

# java - 圆阵列问题

> ID：15213468
> 
> 赞同：-2
> 
> 时间：2013-03-05T00:01:35.503
> 
> 标签：java, arrays, circular-buffer

我现在被困在一种方法上。我需要编写一个方法，`public boolean equals(CircularArray <T> m)`该方法测试两个实现为循环数组的 FIFO 队列是否具有相同顺序的相同元素。例如，假设`c`和`d`都是`CircularArray<Integer>`具有以下数据字段的类型：

```
c.elements = [null,null,7,11,7,4,null]       d.elements[7,4,null,7,11]
c.start = 2                                  d.start = 3
c.end = 6                                    d.end = 2 
```

然后`c.equals(d)`应该返回`true`，因为从概念上讲，它们都是带有元素的队列的实现`7,11,7,4`。

我编写了一个方法，它应该创建两个新数组，其中包含以正确顺序排列的元素，而没有空元素。我遇到的问题是，虽然我认为它在概念上是正确的，但我遇到了错误。附上我的方法和整个程序。

整个程序：

```
// FIFO Queue implemented as circular array.
//  end field points after last element. Thus end==start for empty array.

public class CircularArray<T> {
private T[] elements;
int start;
int end;

public CircularArray(T[] elts) {
    elements = elts;
    start = 0;
    end = 0;
}

public boolean empty() { return end == start; }

public boolean full() {
   return ((start == 0 && end == elements.length-1) || end == start-1);
}

public void add(T x) {
    if (!full()) {
      elements[end] = x;
      end++;
      if (end == elements.length) end=0;
    }
 }

 public T first() { return elements[start]; }

 public T pop() {
     if (!empty()) {
        T x = elements[start];
        start = start + 1;
        if (start == elements.length) start = 0;
        return x;
     }
     else return null;
  }

 public String toString() {
    String S = "[";
    for (int i = start; i != end; ) {
      S = S + elements[i].toString() + " ";
      i++;
      if (i == elements.length) i = 0;
    }
    return S + "]";
  }

  public static void main(String[] args) {
  CircularArray<Integer> Q = new CircularArray<Integer>(new Integer[8]);
      Q.add(null);
      Q.add(null);
      Q.add(7);
      Q.add(11);
      Q.add(7);
      Q.add(4);
      Q.add(null);
      Q.start = 2;
      Q.end = 6;

      CircularArray<Integer> F = new CircularArray<Integer>(new Integer[5]);
      F.add(7);
      F.add(4);
      F.add(null);
      F.add(7);
      F.add(11);
      F.start = 3;
      F.end = 2;

      System.out.println(Q.equals(F));
}
} 
```

我的方法：

```
 public boolean equals(CircularArray<T> m)
 {
     int a = 0;
     int b = 0; 

     T[] elements1;
     T[] elements2;

     for(int i = start; i  != end;)
     {
         elements1[a] = elements[i];
         a++;
         if(i==elements.length) i=0;
     }
     for(int i = m.start; i != m.end;)
     {
         elements2[b] = elements[i];
         b++;
         if(i==m.elements.length) i=0;
     }
     for(int i = 0; i <= elements.length;)
     {
         if(elements1[i] == elements2[i])
         {
             return true;
         }
         else
         {
             return false;
         }
     }

     return true;
 } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-05T00:23:40.117

你的数组声明：

```
T[] elements1;
T[] elements2; 
```

似乎没有指定数组长度。您可以像这样初始化它们（编辑：这很hacky，最好不要使用原始数组）：

```
T[] elements1 = (T[]) new Object[m.elements.length];
T[] elements2 = (T[]) new Object[m.elements.length]; 
```

（元素目前是私有的，您可能希望使用 getter 公开它的长度属性）。

# ios - 自定义 UICollectionViewFlowLayout 问题

> ID：15213474
> 
> 赞同：2
> 
> 时间：2013-03-05T00:01:49.077
> 
> 标签：ios, uitableview, uicollectionview, autolayout, uicollectionviewcell

我有一个带有子类 UICollectionViewFlow 布局的集合视图。我想要的效果是旋转（透视，圆形 y 轴）和运动缩放。我的集合视图设置为分页模式，水平滚动，每个单元格都有全屏，即它们的框架等于集合视图的边界。每个单元格内部都有一个表格视图。

问题是我的行为很奇怪。当前在屏幕上的单元格内的表格很好。当我平移到另一个单元格时，问题就出现了。单元格内的表格似乎完全错误！它只填满了单元格的一半，即使单元格要大得多。在界面构建器中，我将表格设置为将其边缘粘贴到其超级视图（单元格）边缘（自动布局）。

一段时间后，我发现 [cell layoutsubviews] 仅在视图实例化后被调用一次。由于我在下面的代码中直接设置 UICollectionViewLayoutAttributes 与旋转，表视图是否可以在考虑初始旋转的情况下进行布局（超级视图的框架由于严重的透视旋转而缩小）并且因为 [cell layoutsubiews] 永远不会再次调用它只是保持这种方式？

第二个奇怪的地方是布局的回调没有意义。collectionView:didEndDisplayingCell:forItemAtIndexPath: 例如，告诉我索引路径处的视图已停止显示，甚至在它出现在屏幕上之前！

有人可以尝试这种布局，也许可以告诉我我做错了什么？

```
-(BOOL)shouldInvalidateLayoutForBoundsChange:(CGRect)newBounds
{
    return YES;
}
-(NSArray*)layoutAttributesForElementsInRect:(CGRect)rect
{
    NSArray* array = [super layoutAttributesForElementsInRect:rect];

    CGRect visibleRect;
    visibleRect.origin = self.collectionView.contentOffset;
    visibleRect.size = self.collectionView.bounds.size;

    for (UICollectionViewLayoutAttributes* attributes in array)
    {
        if (CGRectIntersectsRect(visibleRect, attributes.frame) &&
            ABS(CGRectGetMidX(visibleRect) - attributes.center.x) <= self.collectionView.frame.size.width)
        {
            CGFloat distance = CGRectGetMidX(visibleRect) - attributes.center.x;
            CGFloat absoluteDistance = ABS(distance);

            CGFloat angle = [self normalizeFromMin:0
                                           fromMax:self.collectionView.frame.size.width
                                             toMin:0
                                             toMax:90
                                             value:absoluteDistance];

            CGFloat scale = [self normalizeFromMin:0
                                           fromMax:self.collectionView.frame.size.width
                                             toMin:0.7
                                             toMax:1
                                             value:absoluteDistance];

            CATransform3D transform = CATransform3DIdentity;
            transform.m34 = 1.0 / -1800;
            if(distance > 0)
            {
                transform = CATransform3DRotate(transform, radians(angle), 0.0, 1.0, 0.0);
            }
            else
            {
                transform = CATransform3DRotate(transform, -radians(angle), 0.0, 1.0, 0.0);
            }

            transform = CATransform3DScale(transform, 1.0 - scale, 1.0 - scale, 0.0);
            attributes.transform3D = transform;
            attributes.alpha = 1.0;

            if(distance == 0)
            {
                attributes.zIndex = 1;
                attributes.transform3D = CATransform3DIdentity;
            }
            else
            {
                attributes.zIndex = 0;
            }
        }
    }

    return array;
}

-(CGFloat)normalizeFromMin:(CGFloat)fromMin
                   fromMax:(CGFloat)fromMax
                     toMin:(CGFloat)toMin
                     toMax:(CGFloat)toMax
                     value:(CGFloat)toNormalize
{
    CGFloat toBeDivided = toMin + (toNormalize - fromMin) * (toMax - toMin);
    CGFloat result = toBeDivided / (fromMax - fromMin);
    return result;
} 
```

编辑：

添加

```
attributes.frame = attributes.frame 
```

就宽度而言，似乎有点帮助，但里面的表格似乎没有正确布局。看起来大小是正确的，但是在旋转时，单元格只是夹住了表格，但表格本身看起来很奇怪，就像没有应用旋转一样，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:05:23.717

部分修复：

```
- (void)scrollViewDidScroll:(UIScrollView *)aScrollView
{
    CGRect visibleRect;
    visibleRect.origin = self.collectionView.contentOffset;
    visibleRect.size = self.collectionView.bounds.size;    
    NSArray *paths = [self.collectionView indexPathsForVisibleItems];
    [paths enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        UICollectionViewCell *cell =b[self.collectionView cellForItemAtIndexPath:obj];
        [cell.contentView.subviews[0] setFrame:cell.contentView.bounds];
    }];
} 
```

如果我将我的控制器设置为该方法的集合视图的委托，它似乎确实有效，但我希望自动布局能够启动并为我做这件事。[cell.contentView setNeedsLayout] / [cell.contentView layoutIfNeeded] 不起作用。

# rdf - 使用 Jena API 构建删除资源的方法

> ID：15213476
> 
> 赞同：2
> 
> 时间：2013-03-05T00:02:06.380
> 
> 标签：rdf, jena, ontology

我创建了一种删除资源的方法 - 我希望下面的代码是正确的......但它只删除了一个语句。

```
public void deleteResource(String resourceName) {
    OntResource resource = om.getOntResource(ns + resourceName);    

    Statement rstm = om.createStatement(resource,null,(RDFNode)null);
    om.remove(rstm);
    return;     
} 
```

如何删除资源的所有语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:52:59.073

你大部分时间都在那里：

```
public static void deleteResource(Model model, Resource resource) {
    // remove statements where resource is subject
    model.removeAll(resource, null, (RDFNode) null);
    // remove statements where resource is object
    model.removeAll(null, null, resource);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:08:46.590

这已经在 API 中：[OntResource.remove()](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/OntResource.html#remove%28%29)

# node.js - passport.deserializeUser 为每个 HTTP 请求执行 DB（续集）命令

> ID：15213484
> 
> 赞同：11
> 
> 时间：2013-03-05T00:03:04.767
> 
> 标签：node.js, sequelize.js, passport.js

我使用 sequelize 作为 ORM 和 passport.js (passport-local) 进行身份验证。我注意到每个 HTTP 请求都会产生一个单独的数据库命令。我开始研究 deserializeUser() 函数。

加载单个页面时，这是我得到的：

> 执行： SELECT * FROM `Users`WHERE `Users`。`id`=1 限制 1；
> 
> **一遍一遍又一遍！**
> 
> 获取 / 200 12ms - 780
> 
> 执行： SELECT * FROM `Users`WHERE `Users`。`id`=1 限制 1；
> 
> 执行： SELECT * FROM `Users`WHERE `Users`。`id`=1 限制 1；
> 
> **一遍一遍又一遍！**
> 
> 获取 /js/ui.js 304 4ms
> 
> **一遍一遍又一遍！**
> 
> 获取 /stylesheets/main.css 304 6ms
> 
> 执行： SELECT * FROM `Users`WHERE `Users`。`id`=1 限制 1；
> 
> **一遍一遍又一遍！**
> 
> 获取 /images/logo.jpg 304 3ms

下面是 passport.deserializeUser 的外观：

```
passport.deserializeUser(function(id, done) {
    User.find(id).success(function(user) {
        console.log('Over and over and over!');
        done(null, user);
    }).error(function(err) {
        done(err, null);
    });
}); 
```

我请求的页面是：

```
index: function(req, res) {
    res.render('index', {
        title: "Welcome to EKIPLE!",
        currentUser: req.user
    });
} 
```

deserializeUser 是否应该为请求的每个图像、html、css 文件运行？如果是这样，有没有办法减少对数据库的请求数量？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-05T07:50:06.480

这是中间件顺序不正确的典型结果。您应该（或等效的）在 Passport 中间件*之前*`app.use`处理静态资源（通常是`express.static`或`connect.static`）的中间件。其他处理不需要通过 Passport 运行的请求的中间件也是如此。*`app.use`*

 *这样，对静态资源的请求永远不会碰到 Passport 中间件，因此不会导致那些不必要的数据库请求。*

# java - 如何在 JSP 页面中显示 Java 日历对象

> ID：15213487
> 
> 赞同：0
> 
> 时间：2013-03-05T00:03:18.950
> 
> 标签：java, spring, jsp

我有一个带有 Calendar (java.util.Calendar) 属性的类，我试图在 JSP 页面中显示时间和日期，但出现此错误：

> org.apache.jasper.JasperException：java.lang.IllegalArgumentException：非法模式字符“b”。

JSP：

```
<c:forEach items="${reports}" var="report" >
    <tr>
        <td><c:out value="${report.vehicleId}"/></td>
        <td><c:out value="${report.vehicleName}"/> </td>
        <td><fmt:formatDate value="${report.endTimeAndDate.time}  pattern="both" /></td>
        <td><c:out value="${report.endTimeAndDate.time}" pattern="both"/> </td>
    </tr>
</c:forEach> 
```

Java 控制器类：

```
@RequestMapping(value="/searchreports")
public ModelAndView SearchReports (...parameters) {     
    Map<String, Object> map = new HashMap<String, Object>();
    List<Report> reports = reportService.SearchReports(vehicleName, start,end);;

    map.put("reports", reports);
    return new ModelAndView("reportsview", map);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:08:39.527

您应该指定日期模式，即`pattern="yyyy-MM-dd"`。您也可以阅读以下内容：[http](http://www.tutorialspoint.com/jsp/jstl_format_formatdate_tag.htm) ://www.tutorialspoint.com/jsp/jstl_format_formatdate_tag.htm （`"Both"`是属性值`type`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:11:51.983

为什么要指定`pattern='both'`两次？此外，您需要一个有效的[SimpleDateFormat](http://download.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)格式，但事实`both`并非如此。

# jquery - .ajax，成功选项中有什么？

> ID：15213495
> 
> 赞同：1
> 
> 时间：2013-03-05T00:03:54.283
> 
> 标签：jquery, ajax, asp.net-mvc

我正在构建一个 MVC，并且正在尝试我的第一个 ajax 调用。它所做的只是向控制器 Action Method 发送一个 int，它将一些数据保存到 DB，然后返回一个“成功保存”的视图。我知道 action 方法有效，因为我有一个 ActionLink 用 Get 发送 id，一切都很好。现在我需要将其切换为 Post，而 ActionLinks 不做 Post。所以我正在尝试ajax。

这是我的ajax：

```
 $(document).ready(function () {
    $("#button-save").click(function () {
        var applicantId = $("#PersonModel_ApplicantID").val();

        $.ajax({
            url: '<%: Url.Action("SaveRecord") %>',
            data: { 'id': applicantId },
            type: "post"
        });
    });
}); 
```

我知道它的这部分工作，但我需要有一个“成功”选项，因为现在“成功保存”页面没有显示。我看过一些不同的教程，老实说，成功的事情让我感到困惑。操作方法已全部设置为传递所需的消息：

```
 }
        else
        {
            return View("Error_RecordExists");
        }

        return View(model); 
```

所以我想知道是否有办法告诉ajax（一旦它发送了ID，就让开，或者别的什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:08:28.537

成功部分是在 Ajax 成功完成时调用的函数。它将有许多东西作为参数通过 jQuery 传入，包括响应。

函数的定义是...

```
Function( PlainObject data, String textStatus, jqXHR jqXHR ) 
```

所以你会做...

```
$.ajax({
    ...
    success: function(data, textStatus, jqXHR) {
        $("#SomeResultDiv").html(data); //Put the response in the div with Id "SomeResultDiv"
    }
}); 
```

该`data`对象包含作为字符串的响应。

这`textStatus`是不言自明的。请求的 Http 状态的文本描述。

`jqXHR`是 jQuery XmlHttpRequest 对象 - 它是每个浏览器中使用的 XmlHttpRequests 的包装器。它提供了诸如标头、http 响应代码等信息...有关更多信息，请参阅文档。

如果您不想这样，可以从列表末尾省略参数

```
 success: function(data) {...} 
```

是完全有效的。

请注意，您可以使用`$.json()`而不是`$.ajax()`调用返回 Json 对象的 Web 方法。当您的服务器不知道格式化时，这些非常方便。例如，您有一个服务器，它只将统计数据报告为 JSON 对象。您的 Javascript 可以加载该数据，然后根据需要创建 divs/graphs/etc。为您提供漂亮干净的服务器端代码、关注点分离（数据与格式）以及许多其他优点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:04:43.120

下面是一个使用 webmethod 的简单邮件发送代码示例

```
[System.Web.Services.WebMethod]
public static int SendMail(string Name, string FromEmail, string Body)
{
    StringBuilder sbBody = new StringBuilder();
    string ToEmail = "goldramesh.cool@gmail.com";
    sbBody.Append(Name + ",");
    sbBody.Append("<br/>");
    sbBody.Append("<br/>");
    sbBody.Append(Body);
    Contact contact = new Contact();
    //string script = "alert('Message sent successfully');window.location ='Contact.aspx';";
    System.Net.Mail.MailMessage eMail = new System.Net.Mail.MailMessage();
    eMail.From = new System.Net.Mail.MailAddress(FromEmail);
    eMail.To.Add(ToEmail);
    eMail.Subject = "Contact from  " + FromEmail;
    eMail.IsBodyHtml = true;
    eMail.Body = Body;
    SmtpClient SMTP = new SmtpClient();
    SMTP.Send(eMail);
    eMail.Dispose();
    contact.Clear();
    return 1;
} 
```

Ajax 编码是

```
var pageUrl = 'Contact.aspx';
        $.ajax({
            url: pageUrl + '/SendMail',
            type: "POST",
            data: '{Name: "' + Name + '",FromEmail: "' + FromEmail + '",Body: "' + Body + '"}',
            dataType: "json",
            contentType: "application/json",
            **success: function (data) {// Success 
                if (data.d == 1) {//Check success code** 
                    $("input[type=button]").val("Send Mail");
                    alert("Mail successfully sent");                     
                }
            }
        }); 
```

我的网络方法是返回 1。所以我检查了 data.d==1

你可以看到我的示例方式......

# iphone - 检测 iPhone 上是否连接了蓝牙设备

> ID：15213497
> 
> 赞同：1
> 
> 时间：2013-03-05T00:03:58.183
> 
> 标签：iphone, xcode, bluetooth

有没有办法检查蓝牙设备是否连接。我正在开发一个同时具有蓝牙和非蓝牙硬件的应用程序，如果蓝牙未连接，我想隐藏一个选项卡。

问题是蓝牙连接并开始流式传输，然后设备进行身份验证，如果用户在身份验证完成之前打开应用程序，那么我的蓝牙选项卡不会显示，用户必须关闭应用程序然后重新打开它。我知道这似乎是一个小烦恼，但我只是好奇是否可以检测蓝牙的状态（连接或断开连接）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:19:00.843

您可以在[CoreBlueTooth 框架中检查 CBCentralManager 类](http://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html)

# bash - 如何在 Bash 中生成数学序列？

> ID：15213503
> 
> 赞同：0
> 
> 时间：2013-03-05T00:05:20.383
> 
> 标签：bash, math, sequence

我正在尝试编写一段代码来显示如下内容：

1

1 51

1 51 101

1 51 101 151

...

```
z1=1

for i in {1..4}
do 
j="$(($i + 1))"
z$j="$((z$i)) $((1 + $((i*50))))"
echo -e "\nz$j"
done 
```

然而，这就是我最终的结果：

```
z1=1: command not found
z2=1 51: command not found
z2
z3=0 101: command not found
z3
z4=0 151: command not found
z4 
```

z2 很好，但以下都不是。

如果我写`echo -e "\"$((z$j))""`，我最终会为每个循环得到 0 而不是 z 的东西。

我找不到我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T00:12:28.793

您可以使用`seq`来生成序列：

```
for i in {1..10} ; do
    seq -s ' ' 1 50 $((1+i*50))
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:08:49.157

您的错误是您无法就地计算变量名称。

sh 命令`myVar=myVal`评估值（右侧）但不评估左侧。将你的临时变量名放入一个变量中，然后`${!myVarName}`用来提取它。

```
varName="z$i"
${!varName}="whatever" 
```

不要忘记保存您的 oldVarName 以备下次使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T00:16:59.473

awk 可以接受吗？

```
kent$  awk -vr=10 'BEGIN{for(i=1;i<=r;i++){s=(i==1)?i:s" "(i-1)*50+1; print s}}'                                                                                            
1
1 51
1 51 101
1 51 101 151
1 51 101 151 201
1 51 101 151 201 251
1 51 101 151 201 251 301
1 51 101 151 201 251 301 351
1 51 101 151 201 251 301 351 401
1 51 101 151 201 251 301 351 401 451 
```

# c++ - 从缓冲区读取记录

> ID：15213504
> 
> 赞同：0
> 
> 时间：2013-03-05T00:05:50.773
> 
> 标签：c++, file, bufferedinputstream

我有一个巨大的文件要阅读。我有一个 IO 线程，它从磁盘读取数据（4mb）并存储在 6 个元素（每个 4mb）的循环数组中。我有另一个线程从循环缓冲区中读取数据以将数据转换为一些记录。

问题是我可以拥有跨越 2 个不同缓冲区的记录（即，说记录可以从第一个缓冲区的末尾开始并延伸到下一个缓冲区的开头）

我该如何处理这种情况？

你能指出一些示例实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:51:22.647

当一条记录跨越两个缓冲区时，从缓冲区读取的函数应该从下一个缓冲区读取。

更准确地说，创建一个从缓冲区中的数据组装记录的函数。如果数据指针在记录完成之前到达缓冲区的末尾，则将数据指针设置为下一个缓冲区的开头。

嗯，看起来这可以更通用地应用。通过读取数据指针来构建项目。在访问数据指针之前，检查缓冲区的结尾。如果指针超过缓冲区的末尾，则将其设置为下一个缓冲区的开头。这个概念与缓冲 I/O 非常相似。嗯，也许您可​​以修改 iostreams 或创建自己的，这将从您的缓冲区而不是 cin 或文件中获取数据。看`std::istringstream`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:11:06.493

你应该把你的记录阅读过程分成几个步骤：

1.  将缓冲区链转换为输入流
2.  解析输入流以产生记录

您可以使用标准类来实现托马斯所说的第一步，或者实现自己的解决方案。一个简单的解决方案可能看起来像这样（假设记录的大小固定）

```
class BufferReader{
...
public :
   // this function will read data from buffers. 
   // size of readed data is arbitrary and does not depend on buffer size
   // it will return -1 when eof reached, readed size in other case 
   int readData(char *data, int length);
...
} 
```

然后你可以解析你的记录：

```
int size = /* size of the record */;
BufferReader br(/* some construction parameters here */)
char data[size];
while(br.readData(data, size) == size){
   // parse your data to fill your record
... 
```

# objective-c - UiButton 在 IB 中创建并使用两次或更多次更改图像

> ID：15213505
> 
> 赞同：0
> 
> 时间：2013-03-05T00:06:09.667
> 
> 标签：objective-c, uiview, uibutton, uiimage

我有一个在 IB 中创建的按钮

有一段时间我在屏幕上输出这个按钮

然后当我点击它时，我隐藏它

```
[UIView animateWithDuration:0.2f
                      delay:0
                    options:UIViewAnimationOptionCurveEaseInOut
                 animations:^
 {

     self.checkYESButton.alpha = 0.0f;

 }
                 completion:^(BOOL finished)
 {

     self.checkYESButton.hidden = YES;

 }]; 
```

}

然后我想再次拍摄并更改图像，但没有任何反应

```
self.checkYESButton.hidden = NO;

[_checkYESButton setImage:[UIImage imageNamed:@"checkYESLeft.png"] forState:UIControlStateNormal];

self.checkYESButton.alpha = 1;
self.checkYESButton.frame =  CGRectMake( -100, 185, 106, 90);

    [UIView animateWithDuration:0.15f
                           delay:1
                         options:UIViewAnimationOptionCurveEaseInOut
                      animations:^
      {
          self.checkYESButton.center =  CGPointMake(176, 185);   
      }
                      completion:^(BOOL finished)
      {
      } 
```

同理我带了一个之前早没用过的按钮，按钮显示正常

**更新**

```
 self.checkYESButton.hidden = NO;

    [_checkYESButton setImage:[UIImage imageNamed:@"checkYESLeft.png"] forState:UIControlStateNormal];

    self.checkYESButton.alpha = 1;
    self.checkYESButton.frame =  CGRectMake( -100, 185, 106, 90);

        [UIView animateWithDuration:0.15f
                               delay:1
                             options:UIViewAnimationOptionCurveEaseInOut
                          animations:^
          {
              self.checkYESButton.center =  CGPointMake(176, 185);

              // code is below decide this situation (only in this line)
              self.checkYESButton = [UIButton buttonWithType:UIButtonTypeCustom]; 
          }
                          completion:^(BOOL finished)
          {
          } 
```

# git - Git合并2个版本没有共同祖先

> ID：15213509
> 
> 赞同：2
> 
> 时间：2013-03-05T00:06:32.830
> 
> 标签：git, mercurial, merge

我的源代码在一个 mercurial 存储库中，而主分支已从 mercurial 移动到 git 存储库。当前的 git master 分支头和我的 mercurial 版本有冲突。git master 是作为一个新的 repo 创建的，而不是从原始的 mercurial repo 派生的。如何将我的修改与主分支的修改合并？

如果我从 master 创建一个新分支，用我的 mercurial 源覆盖源并将其与 master 合并，git 不会检测到冲突（我想是因为我们没有共同的祖先版本）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:20:48.197

我不认为它会。如果您*从 master*创建一个新分支，那么您*实际上*有一个共同的祖先，而这个共同的祖先实际上就是 master 本身。这意味着合并结果实际上是您的新分支，因为它是来自 master 的快进。

如果您要创建一个没有历史记录（或与 master 没有关系）的新分支，那么您将得到您期望的合并冲突。您可以创建一个新的孤立分支：

```
git checkout --orphan new_branch 
```

然后*从*mercurial 复制您的源代码，您将能够与 master 合并。两个分支之间不相同的任何文件都将被标记为冲突。

# variables - 如何在 gnu-assembler 中获取小节填充

> ID：15213515
> 
> 赞同：2
> 
> 时间：2013-03-05T00:08:04.237
> 
> 标签：variables, assembly, linker, gnu-assembler, msp430

我在 TI MCU (msp430) 上使用 gnu 汇编器，想在汇编中定义混合对齐的变量；有些是字节对齐的，有些则必须是字（16 位）对齐的。我还需要将一些变量保留为汇编语言模块的私有变量，而其他变量则是通用的（全局变量）。所以，我希望我们 .lcomm 作为默认值，然后在适当的时候使用 .global 覆盖它。

但即使在应用了字节对齐指令之后，在链接 GCC 编译程序期间我也会遇到对齐错误：

ssegLED.c:200：危险重定位：未对齐的地址

而那行只是试图访问应该是字对齐的数据：

如果（旋钮）{ ... }

在导致问题的汇编语言模块中，我试图将数据有效地打包到内存中；所以我想使用小节将类似类型的数据分组在一起，这样就不会在不同对齐的数据之间形成漏洞。例如：我想要在默认小节 (0) 中的所有字对齐数据，但未对齐的数据，我想要在小节 1 中。

这是用于定义四个变量的程序集/.s 代码：击键、正交、键状态和旋钮。前三个是字节对齐的，最后一个是字对齐的。

```
.section    .bss    ;; doesn't matter if .bss or .section .bss -- same err.
.subsection 1
.balign     1 ;; can add a  ,0 -- but it changes nothing

.global     keystroke
.type       keystroke,@object
.size       keystroke,1 ;; Tried with and without this line, no change...
.lcomm      keystroke,1

.lcomm      quadrature,1
.lcomm      keystate,1  

.section    .bss
.subsection 0
.balign     2 ;; tried adding ,0 -- but it fixes nothing

.global     knob  ;; Present knob value
.type       knob, @object
.size       knob, 2     ;; doesn't affect error whether commented out/not
.lcomm      knob, 2 
```

现在，我正在做两件事来防止错位问题；根据 GNU AS 手册，第 0 小节应该放在第 1 小节之前的内存中；因此第 0 节自动开始单词对齐作为默认节；其次，我明确地使用了 .balign 指令。

但它不起作用......并且更改为 .b2align 并不能解决它，等等。

我*可以*通过将另一个字节对齐变量显式添加到第 1 小节变量 keystroke、quadature 和 keystate 来消除错误；使整个小节以单词边界结束；但是由于违规小节的数字较小（0），因此小节（1）的对齐应该没有任何效果....

其次，如果我将所有 .lcomm 更改为 .comm 错误也会消失；但我不知道为什么。

这是怎么回事？我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:41:51.403

`.lcomm`将您的符号隐式放入`.bss`部分（第 0 小节），无论当前部分或小节是什么。因此，您的符号只是按照它们在源中出现的顺序，这就是为什么`knob`在单字节变量之后。这也是为什么`.balign`没有区别，因为这适用于当前（子）部分。

尝试`.fill`改用。根据我的测试，这似乎有效。

# c# - 使用键值参数将 JSON 对象传递给 ASP.NET MVC 控制器方法

> ID：15213527
> 
> 赞同：0
> 
> 时间：2013-03-05T00:09:39.693
> 
> 标签：c#, jquery, asp.net-mvc, json

我想知道是否可以将 JSON 数据传递到使用 KeyValuePair 类型作为参数的 ASP.NET MVC 控制器方法中。我在控制器方法中的 stopper 变量上有一个断点。当我调试时，我有以下 x 和 y 值：

x = 0

y = 空

如何让 keyValuePair 变量从 JSON 对象中正确填充？

```
<script type="text/javascript">
 $(document).ready(function () {
    $.ajax({
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        type: 'POST',
        url: '@Url.Action("KeyValuePairTest", "Home")',
        data: JSON.stringify({
            keyValuePair: {
                Key: 1,
                Value: 'some text'
            }
        })
    });  
 });
</script>

using System.Collections.Generic;
using System.Web.Mvc;

namespace MvcApplication1.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            return View();
        }

        public void KeyValuePairTest(KeyValuePair<int, string> keyValuePair)
        {
            var x = keyValuePair.Key;
            var y = keyValuePair.Value;
            var stopper = "stop";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:22:15.550

使用自定义模型绑定器。当您使用自定义模型绑定器时，您将可以访问表单集合，您可以在其中读取发布到控制器操作的原始数据。获得数据后，您可以将其映射到任何数据结构，包括键值对。请看下面的帖子

[使用动态 .aspx 页面 ASP.NET MVC 3 将数据持久化回 ViewModel](https://stackoverflow.com/questions/14841976/persisting-data-back-to-viewmodel-with-a-dynamic-aspx-page-asp-net-mvc-3/14843889#14843889)

# java - 在 JFrame 中向下移动一个矩形

> ID：15213528
> 
> 赞同：0
> 
> 时间：2013-03-05T00:09:41.217
> 
> 标签：java, swing, graphics2d

我正在尝试编写一个程序来将矩形向下移动到 JFrame，任何人都可以解释为什么这不起作用？

```
public class DrawingComponent extends JLabel {

public static int x = 0;

public void paintComponent(Graphics g){
    Graphics2D g2 = (Graphics2D) g;
    Rectangle rect = new Rectangle(50,x,50,50);
    g2.draw(rect);
    x = x+100;
}
}

public class GameL {

javax.swing.JFrame frame = new javax.swing.JFrame();

public static void main(String[] args) {
        GameL tetris = new GameL();
        tetris.start();     
}

public void start(){
    //setup frame
    frame.setSize(800,600);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

    TimerEH timereh = new TimerEH();
    Timer timer = new Timer(5000,timereh);
    timer.start();          
}

class TimerEH implements ActionListener{        
    public void actionPerformed(ActionEvent e){
        DrawingComponent dc = new DrawingComponent();
        frame.add(dc);
    }       
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T00:14:55.690

您正在创建一个新的`DrawingComponent`并将其添加到每个滴答周期的框架中。这是很多`DrawComponent`s

虽然可以通过移动组件来为组件设置动画，但您需要提供更多信息来说明为什么要这样做。首选方法是使用类似 a 的东西`JPanel`，将其添加到使用 a 的框架中`BorderLayout`并覆盖面板`paintComponent`方法。

尝试“移动”组件的问题是组件有一个定义的空间，它们可以在其中渲染，从代码的外观来看，标签的大小可能为 0x0，根本没有太多空间可以绘制...

**更新了示例**

因此，下面的示例演示了使用布局管理器在组件范围内绘制矩形，该布局管理器将尝试将组件的大小调整为可用的可用空间。

它还向用户展示了`getPreferredSize`向布局管理器提供有用的尺寸提示。

![在此处输入图像描述](../Images/d505f4cedb0f24e3f62de3ac8c0d92db.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class CreppyRectangle {

    public static void main(String[] args) {
        new CreppyRectangle();
    }

    public CreppyRectangle() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridLayout(0, 6));
                frame.add(new TestPane(Color.RED));
                frame.add(new TestPane(Color.GREEN));
                frame.add(new TestPane(Color.BLUE));
                frame.add(new TestPane(Color.ORANGE));
                frame.add(new TestPane(Color.PINK));
                frame.add(new TestPane(Color.MAGENTA));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private int yPos;
        private int size = 25 + (int)Math.round(Math.random() * 50);
        private int yDelta = 5 + (int)Math.round(Math.random() * 10);

        public TestPane(Color foreground) {
            setForeground(foreground);
            Timer timer = new Timer(40, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    yPos += yDelta;
                    if (yPos < 0) {
                        yPos = 0;
                        yDelta *= -1;
                        System.out.println(yDelta);
                    } else if (yPos + size > getHeight()) {
                        yPos = getHeight() - size;
                        yDelta *= -1;
                    }
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(50, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setColor(getForeground());
            g2d.drawRect(0, yPos, getWidth() - 1, size);
            g2d.dispose();
        }
    }

} 
```

# java - CDI Producer 导致 stackoverflow

> ID：15213529
> 
> 赞同：1
> 
> 时间：2013-03-05T00:09:41.843
> 
> 标签：java, jsf, jakarta-ee, cdi

我想创建一个生产者来动态选择我的 Interface Hello 的实现。

```
public interface Hello extends Serializable{

     public String sayHello();
} 
```

你好Impls：

```
public class HelloBanned implements Hello{

    @Override
    public String sayHello() {
        return "Get out!!!";
    }  
}

public class HelloCoolGuy implements Hello{

   @Override
   public String sayHello() {
       return "Welcome";
   }   
} 
```

我的 sessionBean，我想要生产者方法：

```
public class UsuarioHandler implements Serializable{

    @Inject
    private Usuario usuario;
    @Inject
    @Preferred
    Hello hello;
    @EJB
    UsuarioBeanLocal userEJB;

    public String login(){
        usuario.setId(2L);
        return userEJB.efetuarLogin(usuario);
    }
    @Produces
    @Preferred
    public Hello getHello(@New HelloBanned ban,
                      @New HelloCoolGuy cool){
        if (usuario.isBannedFlag()){
            return ban;
        }
        return cool;
    }
} 
```

此代码在 StackOverFlow 上产生。我找不到可能导致它的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:58:16.157

在 CDI 生产者中支持注入。由于您的类`UsuarioHandler`既是生产者又是注入目标，因此堆栈溢出是预期的结果。想一想：

1.  After`UsuarioHandler`被实例化为托管bean，`@Preferred Hello hello`需要注入。
2.  `@Preferred Hello hello`然后实例化需求的生产者，也是你的`UsuarioHandler`.
3.  `@Preferred Hello hello`但是生产者本身也需要注入的实例。
4.  所以另一个生产者被实例化，等等。

由于您的解决方案`UsuarioHandler`是`@Default`，容器不会代理它，因此每次需要时创建一个新实例，作为生产者或托管 bean。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:35:46.350

使您的生产者方法“getHello”静态（甚至可以是私有的）并将 Usuario 作为参数传递。

```
@Produces
@Preferred
private static  Hello getHello(@New HelloBanned ban,
                      @New HelloCoolGuy cool, Usuario usuario){
    if (usuario.isBannedFlag()){
       return ban;
    }
    return cool;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:59:06.907

我发现 CDI 在项目中不起作用的最常见问题是缺少 CDI 的 XML bean 描述符这一事实。将 beans.xml 添加到您的 META-INF/beans.xml 或 WEB-INF/beans.xml

描述符可以为空，如下所示：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">
</beans> 
```

要了解有关 beans.xml 文件的更多信息，请参阅此链接：[http ://www.seamframework.org/Documentation/WhatIsBeansxmlAndWhyDoINeedIt](http://www.seamframework.org/Documentation/WhatIsBeansxmlAndWhyDoINeedIt)

如果这不是问题，请粘贴到您的堆栈跟踪中，以便我们查看您遇到的错误是什么。

# mysql - 如何解决三向多态关联？

> ID：15213530
> 
> 赞同：5
> 
> 时间：2013-03-05T00:09:43.237
> 
> 标签：mysql, normalization, polymorphic-associations

首先让我说我正在使用 MySQL（不是事务性的）并且这是无法更改的。此外，为了简洁明了，我在这里简化了表格。

在此示例中，“课程”由其内部属性和具有其自身属性“读数”的外部属性组成。“阅读”有它自己的关键依赖属性和三个不同的外部属性（阅读源）。

我想避免这里出现的多态关联，但我无法理解它。在此示例中，表“Reading”中的“sourceId”将包含来自“ExternalURL”、“InternalURL”和“Book”三个表之一的 id。此外，字段“polytable”将包含上述“id”来自的表名。

有人可以花点时间解释一下如何解决这个维护的 RI，还是为了提高效率而应该保留它？

感谢您的时间和考虑，

蒂姆

```
 -------------
                      | ExternalURL |
                       -------------
                      | id          |
                      | badlink     |
                      | url         |
                      |             |
                      |             |
                       -------------
                            |
                            |
                            |
                           / \
 ------------          -------------          -------------
| Lesson     |-------<| Reading     |>-------| InternalURL |
 ------------          -------------          -------------
| id         |        | id          |        | id          |
| label      |        | lessonId    |        | url         |
| summary    |        | sourceId    |        |             |
| lessonOrder|        | polytable   |        |             |
| active     |        | label       |        |             |
 ------------          -------------          -------------
                            \ /
                             |
                             |
                       ------------  
                      | Book       |
                       ------------ 
                      | id         |
                      | label      |
                      | summary    |
                      | lessonOrder|
                      | active     |
                       ------------ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T00:21:45.923

您至少有几个选项可以保留 RI：

1.  在 中添加几个可为空的 FK 列`Reading`，每个读取类型一个。其中只有一个应该是非空的。

    ```
    CREATE TABLE Reading (
      id INT AUTO_INCREMENT PRIMARY KEY,
      lessonId INT NOT NULL,
      bookId INT NULL,
      externalUrlId INT NULL,
      internalUrlId INT NULL,
      FOREIGN KEY (bookId) REFERENCES Book(id),
      FOREIGN KEY (externalUrlId) REFERENCES ExternalUrl(id),
      FOREIGN KEY (internalUrlId) REFERENCES InternalUrl(id)
    ); 
    ```

    强制其中一个外键列不为空是[触发器](https://dev.mysql.com/doc/refman/5.5/en/triggers.html)的任务，否则您必须在应用程序代码中执行此操作。但至少你可以定义外键。

2.  添加一个超级表`Readable`，它是其他每个特定可读类型的父级。

    ```
    CREATE TABLE Readable (
      id INT AUTO_INCREMENT PRIMARY KEY,
      readable_type CHAR(1) NOT NULL,
      UNIQUE KEY (id, readable_type)
    );

    CREATE TABLE Book (
      id INT PRIMARY KEY, -- not AUTO_INCREMENT
      readable_type CHAR(1) NOT NULL, -- must be 'B'
      FOREIGN KEY (id, readable_type) REFERENCES Readable(id, readable_type)
    );

    ... similar tables for ExternalUrl and InternalUrl... 
    ```

    然后让 Reading 也参考 Readable。

    ```
    CREATE TABLE Reading (
      id INT AUTO_INCREMENT PRIMARY KEY,
      lessonId INT NOT NULL,
      sourceId INT NOT NULL,
      FOREIGN KEY (sourceId) REFERENCES Readable(id)
    ); 
    ```

    我在回答[为什么在多态关联中不能有外键？](https://stackoverflow.com/questions/922184/why-can-you-not-have-a-foreign-key-in-a-polymorphic-association/922341#922341).

# ruby - debian 上的 eventmachine 无法通过 ruby gems 安装

> ID：15213533
> 
> 赞同：1
> 
> 时间：2013-03-05T00:10:00.203
> 
> 标签：ruby, gem, debian, diskspace

在过去的 5 个小时里，这一直让我感到沮丧。我似乎无法让 eventmachine 在我的 debian 机器上运行。

这里输出：

```
$ gem install thin
Building native extensions.  This could take a while...
ERROR:  Error installing thin:
    ERROR: Failed to build gem native extension.

        /home/eventhub/.rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb
checking for rb_trap_immediate in ruby.h,rubysig.h... no
checking for rb_thread_blocking_region()... yes
checking for inotify_init() in sys/inotify.h... yes
checking for writev() in sys/uio.h... yes
checking for rb_wait_for_single_fd()... yes
checking for rb_enable_interrupt()... yes
checking for rb_time_new()... yes
checking for sys/event.h... no
checking for epoll_create() in sys/epoll.h... yes
creating Makefile

make
compiling kb.cpp
cc1plus: warning: command line option "-Wdeclaration-after-statement" is valid for C/ObjC but not for C++
cc1plus: warning: command line option "-Wimplicit-function-declaration" is valid for C/ObjC but not for C++
In file included from project.h:149,
                 from kb.cpp:20:
binder.h:35: warning: type qualifiers ignored on function return type
In file included from project.h:150,
                 from kb.cpp:20:
em.h:84: warning: type qualifiers ignored on function return type
em.h:85: warning: type qualifiers ignored on function return type
em.h:86: warning: type qualifiers ignored on function return type
em.h:88: warning: type qualifiers ignored on function return type
em.h:89: warning: type qualifiers ignored on function return type
em.h:90: warning: type qualifiers ignored on function return type
em.h:91: warning: type qualifiers ignored on function return type
em.h:93: warning: type qualifiers ignored on function return type
em.h:99: warning: type qualifiers ignored on function return type
em.h:116: warning: type qualifiers ignored on function return type
em.h:125: warning: type qualifiers ignored on function return type
In file included from project.h:154,
                 from kb.cpp:20:
eventmachine.h:46: warning: type qualifiers ignored on function return type
eventmachine.h:47: warning: type qualifiers ignored on function return type
eventmachine.h:48: warning: type qualifiers ignored on function return type
eventmachine.h:50: warning: type qualifiers ignored on function return type
eventmachine.h:65: warning: type qualifiers ignored on function return type
eventmachine.h:66: warning: type qualifiers ignored on function return type
eventmachine.h:67: warning: type qualifiers ignored on function return type
eventmachine.h:68: warning: type qualifiers ignored on function return type
In file included from project.h:154,
                 from kb.cpp:20:
eventmachine.h:103: warning: type qualifiers ignored on function return type
eventmachine.h:105: warning: type qualifiers ignored on function return type
eventmachine.h:108: warning: type qualifiers ignored on function return type
compiling rubymain.cpp
cc1plus: warning: command line option "-Wdeclaration-after-statement" is valid for C/ObjC but not for C++
cc1plus: warning: command line option "-Wimplicit-function-declaration" is valid for C/ObjC but not for C++
In file included from project.h:149,
                 from rubymain.cpp:20:
binder.h:35: warning: type qualifiers ignored on function return type
In file included from project.h:150,
                 from rubymain.cpp:20:
em.h:84: warning: type qualifiers ignored on function return type
em.h:85: warning: type qualifiers ignored on function return type
em.h:86: warning: type qualifiers ignored on function return type
em.h:88: warning: type qualifiers ignored on function return type
em.h:89: warning: type qualifiers ignored on function return type
em.h:90: warning: type qualifiers ignored on function return type
em.h:91: warning: type qualifiers ignored on function return type
em.h:93: warning: type qualifiers ignored on function return type
em.h:99: warning: type qualifiers ignored on function return type
em.h:116: warning: type qualifiers ignored on function return type
em.h:125: warning: type qualifiers ignored on function return type
In file included from project.h:154,
                 from rubymain.cpp:20:
eventmachine.h:46: warning: type qualifiers ignored on function return type
eventmachine.h:47: warning: type qualifiers ignored on function return type
eventmachine.h:48: warning: type qualifiers ignored on function return type
eventmachine.h:50: warning: type qualifiers ignored on function return type
eventmachine.h:65: warning: type qualifiers ignored on function return type
eventmachine.h:66: warning: type qualifiers ignored on function return type
eventmachine.h:67: warning: type qualifiers ignored on function return type
eventmachine.h:68: warning: type qualifiers ignored on function return type
In file included from project.h:154,
                 from rubymain.cpp:20:
eventmachine.h:103: warning: type qualifiers ignored on function return type
eventmachine.h:105: warning: type qualifiers ignored on function return type
eventmachine.h:108: warning: type qualifiers ignored on function return type
compiling ssl.cpp
cc1plus: warning: command line option "-Wdeclaration-after-statement" is valid for C/ObjC but not for C++
cc1plus: warning: command line option "-Wimplicit-function-declaration" is valid for C/ObjC but not for C++
In file included from project.h:149,
                 from ssl.cpp:23:
binder.h:35: warning: type qualifiers ignored on function return type
In file included from project.h:150,
                 from ssl.cpp:23:
em.h:84: warning: type qualifiers ignored on function return type
em.h:85: warning: type qualifiers ignored on function return type
em.h:86: warning: type qualifiers ignored on function return type
em.h:88: warning: type qualifiers ignored on function return type
em.h:89: warning: type qualifiers ignored on function return type
em.h:90: warning: type qualifiers ignored on function return type
em.h:91: warning: type qualifiers ignored on function return type
em.h:93: warning: type qualifiers ignored on function return type
em.h:99: warning: type qualifiers ignored on function return type
em.h:116: warning: type qualifiers ignored on function return type
em.h:125: warning: type qualifiers ignored on function return type
In file included from project.h:154,
                 from ssl.cpp:23:
eventmachine.h:46: warning: type qualifiers ignored on function return type
eventmachine.h:47: warning: type qualifiers ignored on function return type
eventmachine.h:48: warning: type qualifiers ignored on function return type
eventmachine.h:50: warning: type qualifiers ignored on function return type
eventmachine.h:65: warning: type qualifiers ignored on function return type
eventmachine.h:66: warning: type qualifiers ignored on function return type
eventmachine.h:67: warning: type qualifiers ignored on function return type
eventmachine.h:68: warning: type qualifiers ignored on function return type
In file included from project.h:154,
                 from ssl.cpp:23:
eventmachine.h:103: warning: type qualifiers ignored on function return type
eventmachine.h:105: warning: type qualifiers ignored on function return type
eventmachine.h:108: warning: type qualifiers ignored on function return type
compiling cmain.cpp
cc1plus: warning: command line option "-Wdeclaration-after-statement" is valid for C/ObjC but not for C++
cc1plus: warning: command line option "-Wimplicit-function-declaration" is valid for C/ObjC but not for C++
In file included from project.h:149,
                 from cmain.cpp:20:
binder.h:35: warning: type qualifiers ignored on function return type
In file included from project.h:150,
                 from cmain.cpp:20:
em.h:84: warning: type qualifiers ignored on function return type
em.h:85: warning: type qualifiers ignored on function return type
em.h:86: warning: type qualifiers ignored on function return type
em.h:88: warning: type qualifiers ignored on function return type
em.h:89: warning: type qualifiers ignored on function return type
em.h:90: warning: type qualifiers ignored on function return type
em.h:91: warning: type qualifiers ignored on function return type
em.h:93: warning: type qualifiers ignored on function return type
em.h:99: warning: type qualifiers ignored on function return type
em.h:116: warning: type qualifiers ignored on function return type
em.h:125: warning: type qualifiers ignored on function return type
In file included from project.h:154,
                 from cmain.cpp:20:
eventmachine.h:46: warning: type qualifiers ignored on function return type
eventmachine.h:47: warning: type qualifiers ignored on function return type
eventmachine.h:48: warning: type qualifiers ignored on function return type
eventmachine.h:50: warning: type qualifiers ignored on function return type
eventmachine.h:65: warning: type qualifiers ignored on function return type
eventmachine.h:66: warning: type qualifiers ignored on function return type
eventmachine.h:67: warning: type qualifiers ignored on function return type
eventmachine.h:68: warning: type qualifiers ignored on function return type
In file included from project.h:154,
                 from cmain.cpp:20:
eventmachine.h:103: warning: type qualifiers ignored on function return type
eventmachine.h:105: warning: type qualifiers ignored on function return type
eventmachine.h:108: warning: type qualifiers ignored on function return type
cmain.cpp:96: warning: type qualifiers ignored on function return type
cmain.cpp:107: warning: type qualifiers ignored on function return type
cmain.cpp:117: warning: type qualifiers ignored on function return type
cmain.cpp:127: warning: type qualifiers ignored on function return type
cmain.cpp:269: warning: type qualifiers ignored on function return type
cmain.cpp:279: warning: type qualifiers ignored on function return type
cmain.cpp:289: warning: type qualifiers ignored on function return type
cmain.cpp:299: warning: type qualifiers ignored on function return type
cmain.cpp:309: warning: type qualifiers ignored on function return type
cmain.cpp:329: warning: type qualifiers ignored on function return type
cmain.cpp:678: warning: type qualifiers ignored on function return type
compiling em.cpp
cc1plus: warning: command line option "-Wdeclaration-after-statement" is valid for C/ObjC but not for C++
cc1plus: warning: command line option "-Wimplicit-function-declaration" is valid for C/ObjC but not for C++
In file included from project.h:149,
                 from em.cpp:23:
binder.h:35: warning: type qualifiers ignored on function return type
In file included from project.h:150,
                 from em.cpp:23:
em.h:84: warning: type qualifiers ignored on function return type
em.h:85: warning: type qualifiers ignored on function return type
em.h:86: warning: type qualifiers ignored on function return type
em.h:88: warning: type qualifiers ignored on function return type
em.h:89: warning: type qualifiers ignored on function return type
em.h:90: warning: type qualifiers ignored on function return type
em.h:91: warning: type qualifiers ignored on function return type
em.h:93: warning: type qualifiers ignored on function return type
em.h:99: warning: type qualifiers ignored on function return type
em.h:116: warning: type qualifiers ignored on function return type
em.h:125: warning: type qualifiers ignored on function return type
In file included from project.h:154,
                 from em.cpp:23:
eventmachine.h:46: warning: type qualifiers ignored on function return type
eventmachine.h:47: warning: type qualifiers ignored on function return type
eventmachine.h:48: warning: type qualifiers ignored on function return type
eventmachine.h:50: warning: type qualifiers ignored on function return type
eventmachine.h:65: warning: type qualifiers ignored on function return type
eventmachine.h:66: warning: type qualifiers ignored on function return type
eventmachine.h:67: warning: type qualifiers ignored on function return type
eventmachine.h:68: warning: type qualifiers ignored on function return type
In file included from project.h:154,
                 from em.cpp:23:
eventmachine.h:103: warning: type qualifiers ignored on function return type
eventmachine.h:105: warning: type qualifiers ignored on function return type
eventmachine.h:108: warning: type qualifiers ignored on function return type
em.cpp: In member function 'bool EventMachine_t::_RunEpollOnce()':
em.cpp:578: warning: 'int rb_thread_select(int, fd_set*, fd_set*, fd_set*, timeval*)' is deprecated (declared at /home/eventhub/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby/intern.h:379)
em.cpp:578: warning: 'int rb_thread_select(int, fd_set*, fd_set*, fd_set*, timeval*)' is deprecated (declared at /home/eventhub/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby/intern.h:379)
em.cpp: In member function 'bool EventMachine_t::_RunSelectOnce()':
em.cpp:974: warning: 'int rb_thread_select(int, fd_set*, fd_set*, fd_set*, timeval*)' is deprecated (declared at /home/eventhub/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby/intern.h:379)
em.cpp:974: warning: 'int rb_thread_select(int, fd_set*, fd_set*, fd_set*, timeval*)' is deprecated (declared at /home/eventhub/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby/intern.h:379)
em.cpp: At global scope:
em.cpp:1057: warning: type qualifiers ignored on function return type
em.cpp:1079: warning: type qualifiers ignored on function return type
em.cpp:1265: warning: type qualifiers ignored on function return type
em.cpp:1338: warning: type qualifiers ignored on function return type
em.cpp:1510: warning: type qualifiers ignored on function return type
em.cpp:1593: warning: type qualifiers ignored on function return type
em.cpp:1856: warning: type qualifiers ignored on function return type
em.cpp:1982: warning: type qualifiers ignored on function return type
em.cpp:2046: warning: type qualifiers ignored on function return type
em.cpp:2070: warning: type qualifiers ignored on function return type
em.cpp:2142: warning: type qualifiers ignored on function return type
em.cpp:2361: fatal error: error writing to /tmp/ccdlOK0T.s: No space left on device
compilation terminated.
make: *** [em.o] Error 1

Gem files will remain installed in /home/eventhub/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.1 for inspection.
Results logged to /home/eventhub/.rvm/gems/ruby-1.9.3-p125/gems/eventmachine-1.0.1/ext/gem_make.out 
```

有什么想法吗？我阅读了很多不同的方法来解决这个问题，但都没有奏效。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T11:04:45.307

我认为通过查看您提供的日志，您的磁盘空间不足。

```
em.cpp:2361: fatal error: error writing to /tmp/ccdlOK0T.s: No space left on device
compilation terminated.
make: *** [em.o] Error 1 
```

尝试使用`df`命令行检查分区“/”上的可用空间

# android - 单击按钮时播放声音不会开始

> ID：15213534
> 
> 赞同：0
> 
> 时间：2013-03-05T00:10:03.463
> 
> 标签：android, android-mediaplayer, android-event

我正在尝试制作一个在单击按钮时播放声音的应用程序，并且我有 100 多个声音和 100 多个按钮。我已经创建了按钮，现在将其映射到要播放的声音。另一件事是，当点击次数超过“x”次时会`mediaplayer`崩溃。关于如何解决这个问题的任何想法？

注意：代码不想像现在这样执行，我真的不明白为什么。

```
package com.example.buttonsdemo;

import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.support.v4.widget.SimpleCursorAdapter.ViewBinder;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity implements View.OnClickListener {

    // Creating Sound arrays
    int i = 0;
    MediaPlayer[] mediaplayer = new MediaPlayer[120];

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        for (int z = 0; z < 121; z++) {
            mediaplayer[z] = null;
        }

        // Creating Button Array
        Button button[] = new Button[120];
        for (int x = 0; x < 121; x++) {
            button[x] = null;
            button[x].setOnClickListener(this);
        }

        // Creating Media player array

        mediaplayer[1] = MediaPlayer.create(this, R.raw.alistar);
        mediaplayer[0] = MediaPlayer.create(this, R.raw.akali);

        button[i].setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                switch (v.getId()) {
                case R.id.akali:
                    i = 0;
                    break;
                case R.id.alistar:
                    i = 1;
                    break;
                }
                mediaplayer[i].start();
            }
        });
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
    }
} 
```

日志猫：

```
03-05 01:10:34.674: E/AndroidRuntime(1541): FATAL EXCEPTION: main
03-05 01:10:34.674: E/AndroidRuntime(1541): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.buttonsdemo/com.example.buttonsdemo.MainActivity}: java.lang.ArrayIndexOutOfBoundsException: length=120; index=120
03-05 01:10:34.674: E/AndroidRuntime(1541):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-05 01:10:34.674: E/AndroidRuntime(1541):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-05 01:10:34.674: E/AndroidRuntime(1541):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-05 01:10:34.674: E/AndroidRuntime(1541):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-05 01:10:34.674: E/AndroidRuntime(1541):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 01:10:34.674: E/AndroidRuntime(1541):     at android.os.Looper.loop(Looper.java:137)
03-05 01:10:34.674: E/AndroidRuntime(1541):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-05 01:10:34.674: E/AndroidRuntime(1541):     at java.lang.reflect.Method.invokeNative(Native Method)
03-05 01:10:34.674: E/AndroidRuntime(1541):     at java.lang.reflect.Method.invoke(Method.java:511)
03-05 01:10:34.674: E/AndroidRuntime(1541):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-05 01:10:34.674: E/AndroidRuntime(1541):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-05 01:10:34.674: E/AndroidRuntime(1541):     at dalvik.system.NativeStart.main(Native Method)
03-05 01:10:34.674: E/AndroidRuntime(1541): Caused by: java.lang.ArrayIndexOutOfBoundsException: length=120; index=120
03-05 01:10:34.674: E/AndroidRuntime(1541):     at com.example.buttonsdemo.MainActivity.onCreate(MainActivity.java:28)
03-05 01:10:34.674: E/AndroidRuntime(1541):     at android.app.Activity.performCreate(Activity.java:5104)
03-05 01:10:34.674: E/AndroidRuntime(1541):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-05 01:10:34.674: E/AndroidRuntime(1541):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-05 01:10:34.674: E/AndroidRuntime(1541):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:14:14.990

您初始化了数组。但是您缺少对其内容的初始化。

在你的循环中，你需要放

```
button[x]= new Button(this);
button[x].setOnClickListener(this); 
```

您还在初始化变量`i`之前使用它。

但现在我想了想，你真正需要做的是复习你的`MediaPlayer`文档。您真的不需要（也不想）拥有一个包含 120 个 MediaPlayer 对象的数组。从[文档](http://developer.android.com/reference/android/media/MediaPlayer.html#create%28android.content.Context,%20int%29)中：

> 完成 MediaPlayer 后，您应该调用 release() 来释放资源。如果不释放，过多的 MediaPlayer 实例将导致异常。

您的最新版本有几个错误。第一个错误：

```
for (int z = 0; z < 121; z++) {
        mediaplayer[z] = null;
    } 
```

由于您的数组有 120 个元素，因此您的条件需要是

```
 for (int z = 0; z < 120; z++) {
        mediaplayer[z] = null;
    } 
```

第二个错误：您将按钮数组元素设置为 null 然后您尝试访问它们

```
for(int x=0;x<120;x++){
   button[x]=new Button(this);
   button[x].setOnClickListener(this);
} 
```

# ruby-on-rails-3 - 如何有条件地更改 default_url_options？

> ID：15213539
> 
> 赞同：0
> 
> 时间：2013-03-05T00:10:43.293
> 
> 标签：ruby-on-rails-3, facebook

因为我在 Facebook 的 Iframe 中运行 rails 应用程序，所以我无法使用 Rails Session 变量。通过执行以下操作，我能够成功更改我的 url 以将会话详细信息作为参数包含在我的所有 url 链接中：

源代码：[default_url_options 和 rails 3](https://stackoverflow.com/questions/6100954/default-url-options-and-rails-3)

```
class ApplicationController < ActionController::Base

  #each url should pass the signed_request hash in params
  def default_url_options(options = {})
    if 2 == 3
     { :parsed_signed_request => @parsed_signed_request}
    end
  end
end 
```

但是，我的问题是 - 我如何有条件地更改我的默认 URL 以仅影响某些操作和视图。当前设置会导致未通过 @parsed_signed_request 变量的视图出现错误。

我的错误如下所示：`undefined method ``reverse_merge`` for nil:NilClass`

必须有一种方法可以仅对单个操作执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T19:09:29.680

如果 2 不等于 3，我认为您想返回一个空哈希。

# wpf - 实时应用程序的 MVVM 设计

> ID：15213542
> 
> 赞同：3
> 
> 时间：2013-03-05T00:11:09.600
> 
> 标签：wpf, silverlight, mvvm

问题很简单：基本上我的视图应该显示来自 WCF 服务的数据。数据异步更新的频率很高，所以当服务器端的数据发生变化时，应该相应地更新GUI。

View 显示了很多数据，所以基本上它绑定了 ViewModel 中公开的 50/60 字段。

模型部分基本上是一个 POCO 对象，其中包含 GUI 中显示的 50/60 字段。是的，ViewModel 将 Model 对象暴露给 View。（请注意，模型对象实现了 INotifyPropertyChanged，以便在属性值更改时通知视图。）

现在，我编写了一个与 WCF 服务交互的“DataService”层，它负责根据 WCF 服务返回的数据更新模型。当数据在服务器端更新时，WCF 服务出于性能原因仅将更改的字段集返回给客户端。

因此，在 DataService 中有一个事件处理程序来管理 wcf 服务更新，如下所示：

```
void OnServiceUpdated(UpdateArgs args)
{
  foreach(Field field in args.ChangedFields)
  {
      if(field.Key == "BetName") _modelBet.BetName = field.Value;
      else if(field.Key == "BetUser") _modelBet.BetUser = field.Value;
      [...]
      //the same for 50 fields...
  }
} 
```

现在需要这个更新模型的可怕代码，因为我们只想更新模型中没有在服务器端更改的字段。（注意 wcf 服务 API 不能更改）。

我的问题是：为了提高“OnServiceUpdated”处理程序的性能，您有什么建议？

在此先感谢，约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:18:23.150

你说“**数据异步更新的频率很高”**

据我了解，您不希望对 UI 产生频繁的影响。因此，您可以使用调度程序计时器进行延迟通知。它适用于 UI 线程，与其他计时器不同。

[http://msdn.microsoft.com/tr-tr/library/system.windows.threading.dispatchertimer.aspx](http://msdn.microsoft.com/tr-tr/library/system.windows.threading.dispatchertimer.aspx) 这是 SO 用户[https://stackoverflow.com/a/15044392/413032](https://stackoverflow.com/a/15044392/413032)的回答。

如果您使用 MVVM，那么如果我是您，我将**args.ChangedFields**名称和我的 ViewModel 属性名称设置为相等。因此，通过**反射**或使用**自动映射器**，我可以将属性值传输到 viewModel 属性。

您还可以在所有属性设置后生成事件并更新 UI。

提供这个；

据我了解，您使用**绑定**，因此绑定具有模式和**updatesourcetrigger**选项，因此您可以显式更新源。

[http://msdn.microsoft.com/en-us/library/cc278072(v=vs.95).aspx#updating_the_data_source](http://msdn.microsoft.com/en-us/library/cc278072(v=vs.95).aspx#updating_the_data_source) [http://msdn.microsoft.com/en-us/library/system.windows.data。更新源触发器.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.updatesourcetrigger.aspx)

希望给你一个方法。

# dojo - Dojo 构建配置文件没有 dojo 层 (>1.7)

> ID：15213543
> 
> 赞同：4
> 
> 时间：2013-03-05T00:11:10.647
> 
> 标签：dojo, dojo-build

我有一个构建两层的 dojo 构建配置文件——一层是 dojo/dojo 层，另一层用于我的应用程序文件。

这一切都很好，并产生了两个“大”文件（main.js 和 dojo.js），其中包含所有必需的代码。

但是，我真的不想在构建应用程序时一直构建“dojo/dojo”层，这需要很长时间（>100 秒），并且由于该层并没有真正发生巨大变化，我不想要继续建造它。

问题是，即使只有一层“app/main”，构建仍在创建所有 dojo/dijit/dojox 文件并且仍然需要很长时间（我知道我不需要这些文件，但它仍在解析/优化/压缩...所有这些文件）。

有没有办法避免这种情况？我只想要一个简单的小型应用程序文件。

这是我的个人资料：

```
var profile = (function () {
    var dojoDeps = ['dojo/dom', 'dojo/i18n', 'dojo/domReady', 'dojo/parser'];
    var dojoxDeps = ['dojox/grid/DataGrid', 'dojox/data/JsonRestStore'];
    var dijitDeps = ['dijit/form/Form', 'dijit/form/ValidationTextBox', 'dijit/form/Button',
             'dijit/layout/BorderContainer'];

    var allDojoDeps = [].concat(dojoDeps, dojoxDeps, dijitDeps);
    var appDeps = ['app/main', 'app/run'];

    return {
    basePath: '../../../../dojo/dojo-src',
    releaseDir: "../../target/dojo-compiled",
    releaseName: "",
    action: 'release',

    cssOptimize: 'comments',
    mini: true,
    optimize: 'closure',
    layerOptimize: 'closure',

    stripConsole: 'normal',
    selectorEngine: 'lite',

    layers: {
        'dojo/dojo': {
        include: allDojoDeps,
        boot: true
        },
        'app/main': {
        include: appDeps,
        exclude: allDojoDeps
        }
    },

    staticHasFeatures: {
        'dojo-trace-api': 0,
        'dojo-log-api': 0,
        'dojo-publish-privates': 0,
        'dojo-sync-loader': 0,
        'dojo-test-sniff': 0
    },

    packages: [
        {
        name: "dojo",
        location: "dojo"
        },
        {
        name: "dijit",
        location: "dijit"
        },
        {
        name: "dojox",
        location: "dojox"
        },
        {
        name: "app",
        depsScan:false,
        location: "../../src/main/webapp/app"
        }
    ]
    };

})();

Packages.com.google.javascript.jscomp.Compiler.setLoggingLevel(Packages.java.util.logging.Level.WARNING); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T03:54:40.210

`optimize: "closure"`将导致为发布中的所有文件运行优化器。该`layerOptimize`选项控制层的优化，因此您可以设置`optimize: ""`停止优化非层文件，您应该会发现您的构建运行得更快。

# php - .php 文件在 Chrome 中显示代码

> ID：15213551
> 
> 赞同：5
> 
> 时间：2013-03-05T00:12:04.067
> 
> 标签：php, html, login, dreamweaver

我有一个从以下[站点](http://www.html-form-guide.com/php-form/php-registration-form.html)检索到的注册页面。我下载了源代码并提取了文件，找到了`login.php`. 我在加载它的 Adob​​e Dreamweaver CS3 中打开它并且不显示任何代码，但是当我在 Chrome 中单击预览时，Chrome 会显示整个文件代码，如下所示。当我在 iExplore 中单击预览时，它的作用相同。我做错了什么还是我的笔记本电脑上没有什么东西？我没有为网页添加其余代码，因为当我将 php 代码剪掉并在页面显示时对其进行测试时，我觉得它很无礼。就在我插入 PHP 代码的时候。PHP 之后是 Dreamweaver 在新 HTML 或 PHP 文件开头放置的普通代码。

```
<?PHP
require_once("./include/membersite_config.php");

if(isset($_POST['submitted']))
{
   if($fgmembersite->Login())
   {
    $fgmembersite->RedirectToURL("login-home.php");
   }
}

   ?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T00:14:54.413

要在您的计算机上显示 PHP，您需要设置本地 PHP 服务器。没有它，就没有 PHP 引擎可以解释和解析您的代码以将其转换为浏览器的 HTML。

如果您没有在本地安装 PHP 服务器，那么您需要通过 FTP 将文件上传到安装了 PHP 的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:19:55.500

PHP 文件必须由 Web 服务器解释（您可以使用 XAMPP，它是适用于 Windows 的流行服务器集，包括 Apache HTTP 服务器、MySQL 数据库服务器和 Apache 的 PHP 扩展）。

服务器执行 PHP 代码并通过 http 协议将脚本输出/结果发送到 Web 浏览器。

通过文件系统打开该文件是个坏主意，因为如果 PHP 文件没有被 Web 服务器使用 PHP 处理，它将被读取为纯文本。

看起来，你不明白 PHP 是如何工作的。**你需要阅读一些关于网络基础的书籍。**

最终您可以访问[http://thenewboston.org](http://thenewboston.org)或[http://phpacademy.org](http://phpacademy.org) - 他们有非常好的教育视频。

另一个要考虑的建议：

在我个人看来，Dreamwaver 是学习 PHP 的非常糟糕的工具。出于学习目的，我建议使用 Notepad++ 或其他一些 IDE（可能是 NetBeans PHP 版本）。它将帮助您了解更多。

[如何在dreamweaver cs5中调试php代码？](https://stackoverflow.com/questions/7063454/how-to-debug-php-code-in-dreamweaver-cs5)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T00:20:35.677

您需要一个带有 PHP 解释器的本地 Web 服务器来解析 PHP 代码。有几个可供选择。我个人使用 WAMP。安装后，将您的 php 文件放在 wamps www 文件夹中，然后在浏览器中使用`http://127.0.0.1/yourphpfilename.php`

它应该显示 php 输出而不是代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T00:18:59.870

要执行该类型的文件，您必须拥有 Apache（Web 服务器）+ PHP（解释器）。它将通过使用 XAMPP 之类的东西来解决（你可以用谷歌搜索它。）

# android - 用户按 Enter 后解析 EditText

> ID：15213555
> 
> 赞同：0
> 
> 时间：2013-03-05T00:12:55.197
> 
> 标签：android, android-edittext, android-softkeyboard

我有一个很容易解决的问题，但我在互联网上看不到任何教程来帮助我。因为这个问题非常基本，所以我认为我没有使用正确的关键字进行搜索。

我的问题是我`EditText`用一个方法解析一个并使用这个方法来提供图形的值：

```
public int getSetPoint(){
    int setPointRequest = Integer.parseInt(txtSetPoint.getText().toString());
    if (setPointRequest > 90 && setPointRequest < 120);
        return setPointRequest;
    // ...
} 
```

我只想在用户按下键盘`setPointRequest()`之间`91`和之后的值时解析值。当提示用户输入值时，键盘上已仅显示数字。`119``Enter`

目前，用户输入的所有值（即使他没有点击）`Enter`都已注册在图表上。

谢谢你的帮助！数学

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:14:34.063

```
public int getSetPoint(){
  int setPointRequest = Integer.parseInt(txtSetPoint.getText().toString());
  if(setPointRequest>90 && setPointRequest<120) //notice the lack of ;
    return setPointRequest;

  return -1;
} 
```

处理回车键：

```
txtSetPoint.setOnEditorActionListener ( new OnEditorActionListener() {
  @Override
  public boolean onEditorAction(TextView v, int actionId, KeyEvent event)
  {
    if (actionId == EditorInfo.IME_NULL)
      getSetPoint();
    return true;
  }
}); 
```

您的第一个问题是 . 之后的分号`if`。删除它。

第二个问题是，在你解决了这个问题之后，你会得到一个编译时错误，因为你需要一个默认的 return 语句（可以保证在你的 if 没有的情况下执行）。我用过`-1`，你可以根据自己的需要定制。为了避免出现任何奇怪的错误，我还将解析放在 a`try/catch`中，但这取决于您。

另外，命名不好，`getSetPoint()`从名字上看不太清楚，但返回类型和缺少参数确实给人一个粗略的印象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:29:10.540

结合 A--C 所说的，我们为您的 EditText 使用 setOnKeyListener ，这样它只会在用户按下回车键时获取文本。

```
public int getSetPoint(){
  int setPointRequest = Integer.parseInt(txtSetPoint.getText().toString());
  if(setPointRequest>90 && setPointRequest<120)
    {return setPointRequest;}

  else {return -1;}
}

txtSetPoint.setOnKeyListener(new OnKeyListener(){ //this method waits for the enter key to be hit

@Override
public boolean onKey(View arg0, int arg1, KeyEvent arg2) {

    switch(arg1)
    {
          case KeyEvent.KEYCODE_ENTER:
               getSetPoint(); //when enter key is hit, call the getSetPoint method
               return true;
          default: 
               return false;

    }

   }
}); 
```

# php - 致命错误：在第 20 行的 C:\wamp\www\sideProjects\loginTut\db.php 中的非对象上调用成员函数 prepare()

> ID：15213557
> 
> 赞同：-4
> 
> 时间：2013-03-05T00:13:05.440
> 
> 标签：php, mysql, pdo

嗨，我已经检查了对这个问题的其他回复，但由于某种原因我无法解决问题。这是我正在尝试创建的登录系统，但我不断收到致命错误：调用非成员函数 prepare() -object in ...根据错误，问题出在db.php文件中。这里是..

```
<?php
require "config.php";

function DBconnect($config) {
    try {
        $conn = new PDO('mysql:host=localhost;dbname=' . $config['database'],
                        $config['username'],
                        $config['password']);

        $conn->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

        return $conn;
    } catch(Exception $e) {
        echo $e->getmessage();
    }
}

function query($query, $bindings, $conn) {
    $stmt = $conn->prepare($query);
    $stmt->execute($bindings);

    return $stmt;
} 
```

这是用于创建登录页面的 index.php 文件。

```
<?php

// include the necessary files
require "db.php";
require "functions.php";
include "index.view.php";

// Allow sessions to be passed so we can see if the user is logged in
session_start();

//conect to the database so we can check, edit or ,data to our users table
DBconnect($config);

// if the user has submitted the form
if( $_SERVER["REQUEST_METHOD"] === "POST") {
    global $conn;
    //protect the posted value then store them to variables
    $username = protect($_POST["username"]);
    $password = protect($_POST["password"]);

    //Check if the username or password boxes were not filled in
    if ( !$username || !$password ){
        // if not display an error message.
        echo "You need to fill in a username and password!";
    }else
        // if correct continue cheking

        //select all the rows where the username and password match

        query(  "SELECT * FROM users WHERE username = :username",
            array("username" => $username),
            $conn);
        $num = ( $stmt->rowcount() ); 

        //check if there was not a match
        if( $num == 0) {
            //if not display an error message
            echo "The username you entered does not exist!";
        }else{
            //if there was a mactch continue chekcing

            //select all rows where the username and password match the ones submitted by the user
            query( "SELECT * FROM users WHERE username =:username && password = :pasword",
                    array("username" => $username, "password" => $password ),
                    $conn);
            $num = ( $stmt->rowcount() );   

            //check if there was not a match
            if( $num == 0) {
                //if not display error message
                echo "Username and password do not mactch";
            }else {
                //if there was continue checking

                //split all the fields from the correct row into an associative array
                $row = $stmt->fetch(PDO::FETCH_ASSOC);
                //check to see if the user has not activated their account
                if($row["active"] != 1) {
                    //if not display an error message
                    echo "You hav not yet activated your account!";
                }else {
                    //if so then log them in

                    // set the login session storing their id. We use this to
                    // see if they are logged in or not.
                    $_SESSION["uid"] = $row["id"];
                    //show message confirming that they are loggd in
                    echo "You have succesfully logged in!";
                    //update the online field to 50 seconds in the future
                    $time = date("u")+50;
                    query( "UPDATE users SET online = :time WHERE id = :id",
                            array("time" => $time, "id" => $_SESSION["uid"]),  
                            $conn);
                    //redirect them to the usersonline page
                    header("Location: usersOnline.php");
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:17:22.390

您忘记为`$conn`的返回值分配一个值`DBConnect()`，例如

这

```
DBconnect($config); 
```

应该

```
$conn = DBConnect($config); 
```

您也不需要`global $conn`在脚本中使用，因为它会在范围内。

我还建议不要从`PDO`构造函数中捕获异常。你怎么知道出了什么问题？`echo`-ing 异常消息不处理错误。

还有一件事，放在`session_start()`脚本的顶部或至少在`include`语句的上方。如果其中任何一个向浏览器输出数据，您将收到旧的*“标头已发送”*错误。

### 更新

现在我已经仔细研究了您的问题，为什么要将`PDO`方法包装在用户函数中，例如`query()`？您没有在此处添加任何内容，那么为什么不直接使用该`PDO`对象呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:16:19.580

您必须将全局 $conn 放在 DBConnect 函数中

```
function DBconnect($config) {
    global $conn;
    //...
} 
```

或将 DBConnect 的返回值分配给`$conn`

# c# - 在 Visual Studio 2012 中对源代码编辑\保存运行批处理文件

> ID：15213558
> 
> 赞同：1
> 
> 时间：2013-03-05T00:13:14.630
> 
> 标签：c#, build, visual-studio-2012

我想要完成的是每次我在 Visual Studio 中编辑和保存源文件时运行自定义批处理或 exe。它不必在每个文件上都运行，我真的只有 12 个 .cs 文件我想要这样做。如果能够使用刚刚保存的文件的参数启动一个新的批处理\exe，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T00:57:31.370

在 Visual Studio 2012 中，您可以按如下方式制作一个加载项，该加载项将捕获 Save 事件并运行您的批处理文件

文件 > 新项目

选择可扩展性 选择 V​​isual Studio 加载项

在 Connect.cs 中：

```
public void OnConnection(object application, ext_ConnectMode connectMode, 
                         object addInInst, ref Array custom)
{
    _applicationObject = (DTE2)application;
    _addInInstance = (AddIn)addInInst;

    if (_de == null)
    {
        _de = _applicationObject.Events.get_DocumentEvents(null);
    }
    //Handle document saved event
    if (_deSavedEvent == null)
    {
        _deSavedEvent = new _dispDocumentEvents_DocumentSavedEventHandler(
                                               DocumentEvents_DocumentSaved);
        _de.DocumentSaved += _deSavedEvent;
    }
}

private static DocumentEvents _de = null;
private static _dispDocumentEvents_DocumentSavedEventHandler _deSavedEvent =null;

private void DocumentEvents_DocumentSaved(EnvDTE.Document document)
{
    System.Windows.Forms.MessageBox.Show("Replace this with code to run .bat");
} 
```

代码示例取自[http://www.grebulon.com/software/stripem.php](http://www.grebulon.com/software/stripem.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:36:20.443

最好的办法是在 VS 的工具菜单下创建一个自定义快捷方式，然后它将在其中运行。

> 添加自定义快捷键
> 
> 1.  在工具菜单上，选择选项，打开环境文件夹，然后选择键盘。
>     
>     
> 2.  在键盘页面上选择键盘映射方案。
>     
>     
> 3.  在显示包含的命令文本框中，键入与命令相关的关键字以在列表框中找到所需的命令。例如，如果要创建打开新解决方案的快捷方式，您可以在此文本框中键入“解决方案”。
>     
>     
> 4.  在滚动列表框中，选择您希望快捷方式执行的命令。
>     
>     
> 5.  在使用新快捷方式下拉列表中，选择要在其中使用快捷方式的环境。如果您希望快捷方式适用于所有上下文，请选择全局。
>     
>     
> 6.  将光标放在按下快捷键文本框中，然后按住非文本键或非文本键组合（例如 Alt、Ctrl 或 Shift）并键入您选择的文本键。
>     
>     
> 7.  选择分配。

或者，当然，您可以添加一个构建事件，该事件将在项目构建中执行文件。

# javascript - 在 if 语句中查找不正确的特定参数？

> ID：15213559
> 
> 赞同：0
> 
> 时间：2013-03-05T00:13:14.930
> 
> 标签：javascript, jquery, html, if-statement

假设我正在制作一个注册表单。现在我希望它突出显示四个字段中的空白字段。现在我可以只做一堆 if-else 语句，但这需要很长时间。

假设我有以下代码：

Javascript：

```
if($firstname === "" || $lastname==="" || $email ==="" && $phone === ""){
        //What goes here?
    } 
```

我想在括号内的信息中找出其中哪些（$firstname、$lastname 等）是正确的，然后允许它更改该特定变量的 css，以便我可以照亮输入字段以显示它的信息尚未输入。

现有代码：http: [//jsfiddle.net/EVkge/](http://jsfiddle.net/EVkge/)

```
Click on JSFiddle to see code 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T00:26:11.887

您过于复杂了，只需使用`addClass()`匿名函数：

```
$('input').addClass(function () {
    return this.value == '' ? 'empty' : '';
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/EVkge/2/)。

显然，将`empty`类名更改为您希望拥有的任何类名；正如您可能已经猜到的那样，`''`以下`:`是一个空字符串，如果`this.value`不等于（之前的评估）*将*返回。`''``?`

如评论中所述，如果能够在相关`input`元素变为非空时删除添加的类，那就更好了；考虑到这一点，一个简单的方法应该是显而易见的：

```
$('input:button').click(function () {
    $('input').each(function () {
        var that = $(this),
            val = that.val();
        if (val === '') {
            that.addClass('empty');
        } else {
            that.removeClass('empty');
        }
    });
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/EVkge/4/)。

其次，一种更简洁的方法，等效于上述方法：

```
$('input:button').click(function () {
    $('input').each(function(){
        $(this)[this.value == '' ? 'addClass' : 'removeClass']('empty');
    });
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/EVkge/3/)。

这利用了这样一个事实，即可以使用符号形式`Object.propertyName`和访问对象的方法`Object['propertyName']`，还可以使用在这些方括号中运行条件（三元）运算符来确定是否应该使用`addClass()`or方法来处理下面括号中提供的类名。`removeClass()``empty`

参考：

*   [`addClass()`](http://api.jquery.com/addClass/).
*   [`removeClass()`](http://api.jquery.com/removeClass/).
*   [三元/条件运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:43:55.517

您可以遍历字段并检查每个字段是否为空，如上所述添加一个类。

```
$('input:button').click(function () {
    $('input[type="text"]').each(function (indx) {
        var $currentField = $(this);
        if( $currentField.val() == '' ) {
            $currentField.addClass('empty');
        } else {
            $currentField.removeClass('empty');
        }
    });
}); 
```

我还为您添加了一些额外的功能：http: [//jsfiddle.net/jeffpowrs/Wzj8M/1/](http://jsfiddle.net/jeffpowrs/Wzj8M/1/)

# c# - 为什么 Java 中的字符串比较 (CompareTo) 比 C# 中更快？

> ID：15213562
> 
> 赞同：24
> 
> 时间：2013-03-05T00:13:20.870
> 
> 标签：c#, java, performance

# 编辑3：

使用

```
StringComparer comparer1 = StringComparer.Ordinal; 
```

代替

```
IComparable v
IComparable w
comparer1.Compare(v, w) 
```

解决了运行时问题。

* * *

我在 Java 和 C# 中对排序算法（例如 Quicksort、Mergesort）做了一些基准测试。

我使用 Java 7 和 .NET Framework 4.5 来实现和执行我的算法。它表明所有算法都可以使用 Java 实现更好的运行时。

快速排序的一些示例运行时：

**C＃**

1.  n=1000000 4433 毫秒
2.  n=2000000 10047 毫秒

**爪哇**

1.  n=1000000 1311 毫秒
2.  n=2000000 3164 毫秒

然后我使用分析工具进行了测量：C# 使用 75% 的运行时进行字符串比较（即 CompareTo），而 Java 仅使用 2% 的运行时进行比较。

为什么字符串比较在 C# 中如此昂贵，而在 Java 中则不然？

编辑：我还测试了 C# 排序函数 Arrays.sort(INPUT) 对于 n=1000000 它可以达到大约 3000 毫秒，所以我不认为代码是问题所在。但无论如何：

这是快速排序的代码：

```
public class Quicksort {

public static void sort(IComparable[] a) {
    sort(a, 0, a.Length - 1);
}

private static void sort(IComparable[] a, int lo, int hi) { 
    if (hi <= lo) return;
    int j = partition(a, lo, hi);
    sort(a, lo, j-1);
    sort(a, j+1, hi);
}

private static int partition(IComparable[] a, int lo, int hi) {
    int i = lo;
    int j = hi + 1;
    IComparable v = a[lo];
    while (true) { 

        while (less(a[++i], v))
            if (i == hi) break;

        while (less(v, a[--j]))
            if (j == lo) break; 

        if (i >= j) break;

        exch(a, i, j);
    }

    exch(a, lo, j);

    return j;
}

public static IComparable select(IComparable[] a, int k) {
    if (k < 0 || k >= a.Length) {
        throw new Exception("Selected element out of bounds");
    }
    Rnd.Shuffle(a);
    int lo = 0, hi = a.Length - 1;
    while (hi > lo) {
        int i = partition(a, lo, hi);
        if      (i > k) hi = i - 1;
        else if (i < k) lo = i + 1;
        else return a[i];
    }
    return a[lo];
}

private static bool less(IComparable v, IComparable w) {
    return (v.CompareTo(w) < 0);
}

private static void exch(Object[] a, int i, int j) {
    Object swap = a[i];
    a[i] = a[j];
    a[j] = swap;
}

} 
```

然后按如下方式测量快速排序：

```
Stopwatch.Restart();
Quicksort.sort(stringArray);
Stopwatch.Stop(); 
```

EDIT2：有人想看 Java 版本。完全一样，我只是使用 Comparable 而不是 IComparable 和 Array.length 而不是 Array.Length

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-05T00:50:34.920

> 所以我认为代码不是问题

我不敢苟同。在这两种情况下，您都没有比较相同的事物。诚然，您*还*没有向我们展示如何生成字符串等，这并没有帮助，但是 Java 和 .NET 执行不同的默认字符串比较。

从Java的[`String.compareTo`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#compareTo%28java.lang.String%29)：

> 按字典顺序比较两个字符串。

而来自.NET的[`String.CompareTo`](http://msdn.microsoft.com/en-gb/library/35f0x18w.aspx)：

> 此方法使用当前区域性执行单词（区分大小写和区域性）比较。

毫不奇怪，这比进行纯粹的字典比较慢。

当仅将 .NET 与自身进行比较时，很容易看出这一点......

```
using System;
using System.Diagnostics;
using System.Text;

class Test
{
    static void Main()
    {
        string[] source = GenerateRandomStrings();
        string[] workingSpace = new string[source.Length];

        CopyAndSort(source, workingSpace);
        Stopwatch sw = Stopwatch.StartNew();
        for (int i = 0; i < 1000; i++)
        {
            CopyAndSort(source, workingSpace);
        }
        sw.Stop();
        Console.WriteLine("Elapsed time: {0}ms", 
                          (long) sw.Elapsed.TotalMilliseconds);
    }

    static string[] GenerateRandomStrings()
    {
        Random rng = new Random();
        string[] ret = new string[10000];
        for (int i = 0; i < ret.Length; i++)
        {
            ret[i] = GenerateRandomString(rng);
        }
        return ret;
    }

    static string GenerateRandomString(Random rng)
    {
        char[] chars = new char[30];
        for (int i = 0; i < chars.Length; i++)
        {
            chars[i] = (char) rng.Next('A', 'z' + 1);
        }
        return new string(chars);
    }

    static void CopyAndSort(string[] original, string[] workingSpace)
    {
        Array.Copy(original, 0, workingSpace, 0, original.Length);
        Array.Sort(workingSpace);
        // Array.Sort(workingSpace, StringComparer.Ordinal);
    }
} 
```

自己尝试一下，`CopyAndSort`根据您是否指定序数字符串比较器来改变方法。使用序数比较器*要*快得多，至少在我的盒子上。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-05T00:27:16.853

我不是 100% 确定，但我认为在 C# 中，.Net 平台默认情况下可能会执行一些扩展检查，例如正确跳过注释或空白 unicode 字符，而 Java 默认情况下可能不会执行这些检查。我认为 Java 的运行时执行更简单的 byte-2-byte 比较，但我在这里可能非常错误，因为我已经很长时间没有接触到在 Java 中使用编码的细节了，所以这纯粹是猜测。

另一件事：这两个平台之间的默认比较行为可能存在一些差异。如果您只使用默认值，没有任何精确设置，我猜您只是隐含地要求不同的行为。

至少在.Net 中有很多字符串比较选项。可能发生的情况是，您只是采用了看起来相似的函数，但实际上与 Java 进行了不同的比较。您是否尝试过详细的重载，例如[http://msdn.microsoft.com/en-us/library/cc190416.aspx](http://msdn.microsoft.com/en-us/library/cc190416.aspx)？请注意，这是一种`static`使用方式略有不同的方法：

```
var result1 = "mom".CompareTo("dad");
var result2 = string.Compare("mom", "dad", ...); 
```

请调查ComparisonOptions 和/或CultureInfo 设置，并调整它们以使整体行为尽可能地匹配Java 的行为。此外，如果有更多重载，您可能也必须在 Java 端选择不同的重载。

此外，另一个区别可能有点棘手，您正在测试的 CompareTo 方法是`IComparable<T>`接口的实现，旨在交叉比较实现此接口的各种对象，而静态`Compare`方法旨在仅比较字符串。它们可以简单地针对不同的事物进行优化。如果它们之间会有任何性能差异，我敢打赌静态`Compare`对于字符串与字符串的比较来说更快。

# coding-style - 如何在 4 个空格中编辑但在 2 个空格中保存？

> ID：15213564
> 
> 赞同：2
> 
> 时间：2013-03-05T00:13:29.510
> 
> 标签：coding-style, notepad++, indentation, code-formatting

我想与一位开发人员合作。他的代码都是用2个空格作为缩进写的。

*我讨厌用两列缩进编辑代码的前景。*

我的编码风格是制表符，但这与我无关，我想要的是 4 列，而且我从不关心个人项目中制表符与空格的战争，但现在我不仅要阅读，还要在 2 个空格中书写。

我说的是常规 PHP/JS 文件，我选择的编辑器是 Notepad++，但如果有一个允许我执行以下操作的编辑器，我会切换到这个项目：

*   编辑并打开带有 2 个缩进空格的代码文件，就好像它们有 4 个空格或一个制表符一样。
*   以 2 个空格的缩进保存此类文件。

同样，这里的重点是**我想要 4 列，他想要 2，而且他不使用制表符。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:39:08.253

我想你可能会对 Notepad++ 的 NPPAutoIndent 插件感到满意。它允许您自定义缩进，允许您选择多少个制表符或空格来自动缩进。您还可以很好地利用 TextFX 插件，它主要处理间距。

这并不完全是您想要实现的目标，但至少这将解决编码习惯的问题。使用此解决方案，您只需要学习将您的眼睛调整为 2 空间代码。我环顾四周，找不到更符合您需求的东西。

您也可以考虑使用 Eclipse IDE 并查看一些插件。它从一开始就高度可配置，许多插件添加了更多自定义选项。

# php - 无法以注册用户身份登录（php 和 mysql）

> ID：15213565
> 
> 赞同：0
> 
> 时间：2013-03-05T00:13:30.157
> 
> 标签：php, mysql, database, login, registration

我正在尝试做一个登录和注册脚本。我已经完成了大部分工作；但是，在我注册用户后，我无法以该用户身份登录。也就是说，注册用户无法登录。任何帮助将不胜感激！:)

这是与特定问题相关的代码：

```
$login = login ($username, $password);
        if ($login === false) {
         $errors [] = 'That username/password combination is incorrect';
        } else {
           $_SESSION ['user_id'] = $login;
           header ('Location: index.php');
           exit (); 
    }       

function  login ($username, $password) {
   $user_id = user_id_from_username ($username);

   $username = sanitize ($username);
   $password = md5($password);

return (mysql_result(mysql_query("SELECT COUNT(user_id) FROM users WHERE username =     '$username' AND password = '$password'"), 0) == 1) ? $user_id : false;
} 
```

我之前像这样（下）写了上面的查询。以这种方式编写它允许我登录，但“字面上”使用任何密码。

```
function login ($username, $password){ 
  $user_id = user_id_from_username ($username);

  $username = sanitize ($username); 
  $password = sanitize ($password); 

  $query1 = mysql_query("SELECT COUNT(user_id) FROM users WHERE username =     '$username'"); 

 $query2 =  mysql_query("SELECT COUNT(user_id) FROM users WHERE password = '$password'"); 

 return  (mysql_result($query1, 0) == 1) ? $user_id : false; 
 return (mysql_result($query2, 0) == 1) ? $user_id : false; 
```

也就是说，我将查询分为两部分，但注意到密码查询完全无关紧要（即使我“注释掉”了它）。

PS。我知道我应该使用 PDO 或 Mysqli 而不是 mysql 查询，而且 md5 并不那么安全。为了这个谜，请忽略这些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:40:02.433

您确实应该以彻底处理查询结果的方式分解您的数据库查询操作。练习这样做。它将为您节省大量调试数据库查询问题的时间。

此外，这里不需要两次查询数据库（我假设这是您对`user_id_from_username()`函数调用所做的事情。只需完全摆脱它并设计您的查询以一次获取您需要的所有信息。

最后，您真的应该养成明确指定数据库连接的习惯。在这种情况下，我将数据库连接传递给函数。

把它们放在一起，你最终会得到这样的东西：

```
function  login ($username, $password, $db_conn) {
    $username = sanitize ($username);
    $password = md5($password);

    $query = "SELECT user_id FROM users WHERE username = '$username' AND password = '$password'";
    $result = mysql_query($query, $db_conn);

    if (false === $result) { // the query failed
        throw new Exception('Database failed with message: ' . mysql_error());
    }

    $rows = mysql_num_rows($result);
    if (0 === $rows) { // no record found
        return false;
    } else if ($rows > 1) { // too many records found.. really your DB indexes should disallow this
        return false;
    }

    $user_id = mysql_result($result, 0 , 'user_id');
    return $user_id;
} 
```

当然，您已经提到您知道您应该使用 mysqli 或 PDO。我不能强烈地敦促你开始使用其中之一，因为 mysql 已被弃用，你会发现你必须尽快开始学习其中之一，所以你不妨现在开始。

# c# - SQL 服务器从各个状态生成总状态数

> ID：15213575
> 
> 赞同：0
> 
> 时间：2013-03-05T00:14:15.143
> 
> 标签：c#, sql, sql-server, numbers, states

这是我的问题：

我有未知数量的随机事件，每个事件都与一个状态编号相关联。现在我想要一个整体状态编号来描述随机事件分配的组合。例如，如果只有 2 个随机事件 V1 和 V2，每个都有 2 个可能的状态，那么下面是我的预期映射，大 V 是我预期的整体状态数。

```
V v1 v2

1 1  1

2 2  1

3 1  2

4 1  2 
```

我的 sql 查询草稿是：

```
select t1.v1, t2.v2 from table1 as t1
  cross join table2 as t2 
```

现在我想要从 t1.v1 和 t2.v2 生成的大 V。我知道数学算法，但不知道 SQL 代码。对于 2 个随机变量，数学算法将是 V = v1 + Max(v1)*(v2-1)。我的问题可能需要解决有超过 2 个随机变量的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:26:05.410

为此，您可以使用子查询或窗口函数。我认为子查询可能更清楚：

```
select v1 + maxv1*(v2 - 1) as V, t1.v1, t2.v2
from table1 t1 cross join
     table2 t2 cross join
     (select max(v1) as maxv1 from t1) maxt 
```

顺便说一句，您可以在 SQL 中很容易地分配一个序列号：

```
select row_number() over (order by v2, v1) as V, v1, v2
from table1 t1 cross join
     table2 t2 
```

# nsstring - NSString 和数学？

> ID：15213584
> 
> 赞同：0
> 
> 时间：2013-03-05T00:15:01.177
> 
> 标签：nsstring, uilabel, string-formatting, nsnumber, primitive

我是 Xcode 的新手。因此，我尝试制作一个应用程序，但实际上我卡在了某个地方，实际上我知道在哪里：D 我无法编写数学代码，我不了解它们的基本原理，请大家告诉我如何正确编写代码；

我想要 ;

dsonuc = 男孩文本 * 男孩文本 / 公斤文本

有我的代码（我不能只写一个简单的乘法代码）

浮动 dsonuc = dboy * 2; Idealkilo.text = [NSString stringWithFormat:@" Kutle Endesiniz %f",dsonuc];

有人可以告诉我我的错误是什么吗？

感谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:27:10.050

正确的。Objective C 中的数字（如 int、float 等基元）需要用 NSNumber 包装。

用这个：

```
NSNumber* dsonuc1= [NSNumber numberWithFloat:dsonuc];
idealkilo.text = [NSString stringWithFormat:@" Kutle Endesiniz %f",dsonuc1]; 
```

另请参阅此链接：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/Reference/Reference.html)

希望这可以帮助。

# ruby-on-rails - 通过后台作业插入/更新数据库，同时最大限度地减少读取影响

> ID：15213586
> 
> 赞同：3
> 
> 时间：2013-03-05T00:15:36.977
> 
> 标签：ruby-on-rails, database, postgresql, queue, sidekiq

我在 PostgreSQL 服务器上运行大量后台任务，使用 Sidekiq 从外部源更新记录。但是每当我从后台进程开始写作时，我的`SELECTs`痛苦和网络应用程序变得缓慢。

避免阻塞读取的最佳策略是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T02:31:45.163

您可以使用终端命令“renice”

```
renice -p 1337 -n 5 
```

这会将 id 为 1337 的进程的优先级更改为新的优先级 5。进程规模从 -20 工作到 20，其中 -20 是最高优先级，20 是最低优先级。

[http://manpages.ubuntu.com/manpages/precise/en/man1/renice.1posix.html](http://manpages.ubuntu.com/manpages/precise/en/man1/renice.1posix.html)

# android - SQLite中的日期时间排序

> ID：15213590
> 
> 赞同：2
> 
> 时间：2013-03-05T00:16:34.727
> 
> 标签：android, sqlite, date

所以我有一个看似不那么聪明的问题，但这里有，

```
10:00pm to 11:00pm 
```

以上述格式从服务器返回日期时间。

我希望能够对其进行排序，但使用`ORDER BY ASC`似乎不起作用。它适用于 iPhone，但不适用于 Android。

是因为 SQLite 数据库版本吗？

我如何对时间进行排序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T08:21:41.320

您显示的不是日期时间，而是时间间隔。

该值是一个字符串，字符串按字典顺序进行比较。为确保您的字符串正确排序，所有字段必须始终具有相同的长度（如果不是，`9:00`将在;*之后* 排序）。此外，/后缀在一天的第一个小时没有正确排序；请改用普通的 24 小时格式。`10:00``09:00``AM``PM`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:31:09.147

也许是因为 SQLite，但尝试以秒为单位存储时间，如果你对 sec 进行排序，它将起作用。EX 1:05 = 65 秒。编辑：如果您想在视图中显示时间，只需将其转换回 h:m:s 我认为这对您来说是最简单的方法；)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T11:51:12.623

您可以使用**时间戳**对日期进行排序：例如：“yy MM dd hh:mm a”//在您的情况下为 hh:mma

将您的时间转换为简单的日期格式，如下所示：

```
DateFormat simpleDateFordate = new SimpleDateFormat("yy MM dd");
        Calendar calender = Calendar.getInstance();
        String date = simpleDateFordate.format(calender.getTime());
        System.out.println("date>>>>" + date);
        String time = "10:00pm";
        String stringDate = date + " " + time;

        DateFormat dateFormatdatewithTime = new SimpleDateFormat(
                "yy MM dd hh:mma");
        Date dateinMili;
        try {
            dateinMili = dateFormatdatewithTime.parse(stringDate);
            String dateFinal = dateFormatdatewithTime.format(dateinMili.getTime());
            System.out.println("Final Date time>>>>"+dateFinal);
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

将 Mili Seconds 存储到您的数据库中，或者您可以简单地将 dateinSimpleFormat Date 存储到您的数据库中。

毕竟，您可以通过简单的查询直接对其进行排序，例如：SELECT * From Table_Name ORDER BY Column_Date ASC

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T05:12:03.663

您可以做一件事，在存储到数据库之前将日期转换为 milis。然后你可以从中得到排序列表。然后在获得排序结果后，您可以再次将它们转换为日期。

对于转换，您可以使用 SimpleDateFormat 类。示例代码可以在[文档](http://developer.android.com/reference/java/text/SimpleDateFormat.html)中找到，或者您可以在那里看到很多示例

# php - 如何验证引用服务器。($_SERVER["HTTP_REFERER"])

> ID：15213594
> 
> 赞同：0
> 
> 时间：2013-03-05T00:17:01.663
> 
> 标签：php, flash, security, networking, google-nativeclient

当这些服务器通过我们的测试时，我的客户的站点会按 IP 向他们的客户提供证书。此认证仅适用于经过测试的 IP。因此，我们需要成为提供证书的人，以便我们可以验证显示我们证书的站点是否确实经过了我们的测试。因此，当客户的用户单击证书的链接时，他们可以相信该站点确实经过了我们的测试（该站点没有由未经我们测试但声称是的另一台服务器提供服务） .

用户通过如下所示的链接被定向到我们的网站：

siteB.com/certificate.php?companyid=1234&serverid=4321

流程简化：

*   用户在站点 A
*   用户单击指向我的站点（站点 B）的链接以查看站点 A 的证书。
*   我的站点，站点 B 需要验证它确实是站点 A，它正在尝试显示站点 A 获得的证书。

最初，我认为 $_SERVER 变量可能有一个值来指示引用服务器是谁，但我收到的发布问题的答案表明，虽然该信息存储在 $_SERVER["HTTP_REFERER"] 中，但它不是'不可靠（插件或用户可能会修改此值）。

由于我不能依赖它，我需要另一种方法来验证引用服务器是他们声称的那个人。我考虑使用一次性使用令牌，但随后有效的服务器可以简单地将令牌循环到客户拥有的其他服务器（尚未经过测试），并且客户可以通过这种方式声称他们的任意数量的服务器都经过认证我们只需支付一次测试的费用（以及损坏证书的完整性）。

我想知道这个问题是否不可能制定一个万无一失的解决方案，并且可以做的最好的事情是混淆不受控制的端点（客户的服务器）发布密钥以表明它们是证书的方式是为了（例如，一个鬼鬼祟祟的客户必须阅读一些混乱的 javascript，或者反汇编一个封闭源代码的客户端程序以欺骗系统）。

到目前为止，我的想法是这样的（这很糟糕）：

* * *

我需要制作一个闭源程序来运行客户端，可能是通过[本地客户端](https://developers.google.com/native-client/overview)，该客户端将在单击客户网站（站点 A）上的证书链接时启动，这将首先在我的站点（站点 B )，然后打开与站点 A 的服务器、站点 B 的服务器和用户的 3 路通信线路，其中站点 B 将验证站点 A 是他们所说的那个人，然后将证书或证书返回给用户一条错误消息说明为什么无法加载证书（例如连接超时）。

站点 B 上向用户 NaCl 程序开放流的脚本将[使用 curl](https://stackoverflow.com/questions/1369760/php-curl-retrieving-server-ip-address)获取站点 A 的服务器的 IP 地址并进行验证。

* * *

对我来说，这是一个非常粗糙的解决方案（如果它甚至是一个解决方案），虽然大多数用户不会关心查看某人的证书，但让关心的用户经历了一些麻烦（安装和运行 NaCl 程序）只是看证书简直是疯了。

这感觉有点像一个愚蠢的问题，但是将其作为闪存运行会与运行 NaCl 程序一样安全/不安全吗？

当然，有更好的方法来做这一切......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:41:31.907

您最好的选择是信任 REFERER 或使用 ORIGIN 标头（您需要设置一个 AJAX 脚本，该脚本可以放入站点以使用 ORIGIN）。

您的服务器接收到的任何内容都可以很容易地被*客户端*计算机欺骗，但不会被他们正在访问的*服务器*（未经客户端同意）欺骗。由于您的服务似乎是为客户服务的，因此他们没有理由伪造凭据。您可能会遇到某些插件和代理的潜在问题，但您的警告消息可以解释这一点。

没有闭源客户端代码之类的东西。任何人都可以简单地反编译它或模拟运行时，因此您不会获得额外的安全性。

公钥/私钥也不起作用（您的站点生成要编码的东西，有问题的服务器必须使用其私钥对其进行编码，客户端使用公钥对其进行检查）。它们仍然容易受到相同问题的影响：虚假站点可以将请求连同完美复制的标头一起转发到真实站点进行处理。

要记住的事情：

*   AJAX 允许*客户端*和/或*服务器*修改标头，但现代浏览器保证的 ORIGIN 标头除外（但可以通过一些工作由*客户端更改）*
*   任何标准的 URL 请求都有浏览器生成的所有标头，因此可以信任它们（只能由*客户端*更改）
*   发送到客户端计算机的任何代码或秘密（即使已编译、混淆或其他）都应视为公开的。
*   任何不是来自浏览器的请求都可以在各个方面被伪造，除了 IP 地址（甚至可以被代理）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:36:08.340

我的想法.. 如果可能，让证书颁发服务器创建一个 cookie，该 cookie`hash`基于该引用服务器的名称和`salt`基于以动态但可预测的方式生成的另一组标准，例如使用用户的 IP 地址加上星期几，可能会输入小时数或当前分钟数（标准上的时间太短会导致一些误报身份验证失败，所以要小心）。然后，当用户到达您的站点时，读取 cookie 的哈希值并将其与根据`$_SERVER[“HTTP_REFERER”]`和预先建立的标准生成的哈希值进行比较。这样做的缺点是，如果引用服务器想成为鸡巴，他们可以发布安全算法。

另一个可能更安全的选择是创建一个 JavaScript 应用程序，您将其提供给引用服务器，该服务器向您的服务器发送`AJAX`调用，然后您的服务器根据我上面提到的相同类型的标准返回一个哈希值。然后，引用服务器会根据您`AJAX`返回的哈希设置 cookie，当它们访问您的站点时，它会以与我之前提到的相同的方式进行检查。但由于所有处理都发生在您的服务器上，因此它是完全安全的。听起来是个很酷的项目，祝你好运。

# bash - 使用 sed 从没有前缀或后缀的主机名变量中提取域

> ID：15213599
> 
> 赞同：2
> 
> 时间：2013-03-05T00:17:36.390
> 
> 标签：bash, subdomain, regex-negation

我一直在搞砸这个几个小时，似乎无法让它工作。如果我有 www 或 ftp.somedomain.net.nz 或只是 somedomain.com 并且我想从模式中提取 somedomain 以通过将主机名回显到 sed 来设置为变量，我该怎么做？

例如：

```
var="echo $HOSTNAME | sed 's/someregex to fit all$//'" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T00:38:58.690

你真的需要使用 sed 吗？

```
HOSTNAME="${HOSTNAME#*.}"
HOSTNAME="${HOSTNAME%%.*}" 
```

请注意，这和其他一些解决方案不会与类似的东西相处，`www.news.google.com`但如果你测试类似的东西，你可以这样做：

```
HOSTNAME="${HOSTNAME#*.}"
HOSTNAME="${HOSTNAME#*.}"
HOSTNAME="${HOSTNAME%%.*}" 
```

有效的方法仅取决于您输入的格式有多好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:26:14.787

如果您知道可以尝试的前缀（“ftp.”、“www.”或什么都没有）：

```
var=$(sed -E 's/^((ftp|www)\.)?([^.]*)\..*/\3/' <<< "$HOSTNAME") 
```

`sed ... <<< $VARIABLE`优先使用`echo $VARIABLE | sed ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T00:21:40.167

双引号不运行命令。使用反引号，或者更好的是，使用`$(...)`：

```
var=`sed 's/[^.]*\.\([^.]*\)\..*/\1/' <<< "$HOSTNAME"`
var=$( sed 's/[^.]*\.\([^.]*\)\..*/\1/' <<< "$HOSTNAME" ) 
```

您可能必须调整正则表达式才能获得域。你想要地址的哪一部分？这些例子相当不清楚。如果只想去掉 www 或者 ftp，可以使用参数扩展：

```
var=${HOSTNAME#www.}
var=${var#ftp.}
var=${var%%.*} 
```

# php - 如何在页面中显示错误消息日志

> ID：15213604
> 
> 赞同：0
> 
> 时间：2013-03-05T00:18:01.257
> 
> 标签：php, mysql

如果在尝试登录时用户名与数据库中的正确密码不匹配，我将尝试显示错误消息。如果用户名和密码正确但不知道是什么，我可以使页面正常工作就错误消息而言，我的代码有问题。

```
if ($Password != Password($User_Name))
{
    showForm("Invalid User Name or Password. Please Try Again");
    exit();
}
else {
    include "index.php";
    exit();
} 
```

现在，在这段代码下方，就在 HTML 之前，另一个程序员编写了以下函数：

```
function showForm($formMessage='Invalid User Name And Password. Please Try Again.') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:20:27.157

只需尝试更新您的函数以显示消息以使您的代码正常工作。由于您在调用函数时传递参数`showForm("Invalid User Name or Password. Please Try Again");`，因此您应该在函数中正确接受它并处理它。

```
function showForm($formMessage){
echo $formMessage;
} 
```

在您的代码`function showForm($formMessage='Invalid User Name And Password. Please Try Again.')`中，您正在为参数设置默认值，以防没有传递参数。但是你在哪里呼应了 的价值`$formMessage`？

我上面包含的函数显示了消息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T00:24:54.147

对于高级错误处理，您可以使用 try{} catch(){} 构造（例外）

# unix - 如果结果中的每个项目都是目录或文件，如何从 UNIX 中的“ls”输出中检查

> ID：15213607
> 
> 赞同：1
> 
> 时间：2013-03-05T00:18:18.167
> 
> 标签：unix

如果结果中的每个项目都是目录或文件，如何从 UNIX 中的“ls”输出中检查

我有成千上万的文件和文件夹。所有创建错误，例如

```
HHYY
KKJH
JGGF 
```

问题是在某些情况下，项目应该是实际文件而不是文件夹。

例子

```
HHYY
KKJH.txt
JGGF 
```

所以我现在需要将所有实际文件移动到一个新位置，我正在尝试识别文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:21:12.880

```
for file in *
do
  if [ -f "$file" ]
  then ...
  fi
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:16:08.393

`ls -l`有一些以下类型的输出。

```
drwxr-xr-x 2 root root 4096 oct 9 2011 xml 
```

在上面的行中，第一个字符“d”表示它是一个目录。如果第一个字符是“l”，则表示它是一个符号链接。

希望这可以帮助。

# testing - 在子包中测试 Play 2.0 控制器

> ID：15213608
> 
> 赞同：0
> 
> 时间：2013-03-05T00:18:30.167
> 
> 标签：testing, playframework-2.0

再次使用 Play！，现在使用 2.0.3-RC2，我遇到了一个测试问题。

我有一个应用程序，其中一些控制器打包在控制器包下，例如：

```
package controllers.AdminApp;

class SomeController extends Controller {
    public void index() {
        /...
} 
```

根据[http://www.playframework.com/documentation/2.1.0/JavaFunctionalTest](http://www.playframework.com/documentation/2.1.0/JavaFunctionalTest)中的文档，我希望对此控制器进行测试，例如：

```
Result result = callAction(controllers.routes.ref.AdminApp.SomeController.index()); 
```

但不起作用，因为没有 SomeController 作为 controllers.routes.ref.AdminApp 的成员，只有 ReverseAdminApp_SomeController 并且不能从那里调用 index() 方法。

您有在子包中测试 Play 2.0 Java 控制器的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:27:16.853

升级到 2.1.0 并意识到 IntelliJ 并没有帮助我找出问题所在。

```
Result result = callAction(controllers.adminApp.routes.ref.Application.index()); 
```

# java - 使用什么：代替布尔变量或用于真/假识别的空值

> ID：15213609
> 
> 赞同：0
> 
> 时间：2013-03-05T00:18:35.163
> 
> 标签：java

这个问题很简单。

```
Object obj;

obj = new Object();

if(obj!=null) {
    // this means my object is *set*
} 
```

另一个

```
Object obj;
Boolean objSet = false;

obj = new Object();
objSet = true;

if(objSet) {
    // this means my object is *set*
} 
```

哪个更*正确*。我听说数据库和某些方法会以不同的方式起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T00:22:48.473

“正确”不是首选词。如果它编译并做了它应该做的，那就是正确的。

作为有用的问题，我最好使用更直接的检查。添加布尔变量以避免执行`== null`检查意味着额外的（最小开销）、更多的行、难以阅读并且可能引入错误。

如果条件足够复杂以至于您需要明确它，则添加布尔变量（vg.，如果您必须检查一组条件中的所有/任何一个是否满足）。

顺便说一句，由于您正在使用`Boolean`而不是，因此如果您编码不好`boolean`，您就会引入 null 本身的可能性。`objSet`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T00:24:08.740

两者都不*正确*：

*   从行为语义的角度来看，它们做同样的事情……假设它们被正确实现。

*   从性能的角度来看，这种差异在整个应用程序的上下文中*可能可以忽略不计。*

*   从空间使用的角度来看，差异*可能*可以忽略不计......除非`obj`和`objSet`是字段，并且您有很多相关类的实例。

*   从稳健性的角度来看（例如避免意外的 NPE），没有质量上的差异。如果您忘记进行测试，无论哪种情况，您都可以获得 NPE。（我猜如果您更改示例以包含更改的内容`obj`，那么带有单独标志的版本会更复杂，因此更难正确。但是如果您将逻辑封装在 setter 方法中，那么您只需要正确一次 ...）

所以真的，归结为哪个版本的代码更具可读性。这是主观的......所以“更正确”并没有进入它。大多数有经验的程序员可能会认出这个习惯用法并更喜欢第一个版本。

# javascript - jquery 面包屑跟踪示例或教程？

> ID：15213612
> 
> 赞同：0
> 
> 时间：2013-03-05T00:18:45.717
> 
> 标签：javascript, jquery, breadcrumbs

我想用 jquery 制作面包屑路径，因为我的网站有嵌套页面？如果我想将面包屑动态添加到网页，我不知道面包屑以及它是如何工作的？任何帮助或教程链接都会有所帮助

例如：我有主页和产品页面，而且每个产品都有其特定页面，所以当我转到产品页面时，我的面包屑应该显示类似

> 首页 / 产品 / 当前页面

我希望它动态添加到用户导航的每个页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:30:54.647

首先，[维基百科](http://en.wikipedia.org/wiki/Breadcrumb_%28navigation%29)对面包屑有很好的解释。

我推荐[jBreadCrumb——](http://www.comparenetworks.com/developers/jqueryplugins/jbreadcrumb.html)它是一个 jQuery 面包屑插件。这里[还有一些](http://www.webdeveloperjuice.com/2011/07/17/7-jquery-breadcrumbs-to-enhance-your-website-navigation/)jQuery 面包屑插件的列表。

希望这些有所帮助。

# php - 如何获取存储在设备上的 GCM ID

> ID：15213613
> 
> 赞同：0
> 
> 时间：2013-03-05T00:18:46.937
> 
> 标签：php, android, google-cloud-messaging

我正在为 Android 开发一个应用程序，我需要获取存储在设备上的 GCM RegID（注册已经完成）并发送到我的 sql 服务器。如何获取存储的 Reg ID？

Tks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:41:09.270

`GCMRegistrar.getRegistrationId(this);`来自您`Activity`或其他人的电话`Context`。如果它返回空字符串，则您没有注册 ID。如果它返回一个非空字符串，那就是注册 ID。

请注意，这也会`GCMIntentService`在其`onRegistered()`回调方法中传递给您。

# python - 如何最好地终止 python 线程？

> ID：15213616
> 
> 赞同：3
> 
> 时间：2013-03-05T00:18:59.773
> 
> 标签：python, subprocess

在下面的代码中，我创建了一个线程，它打开了一个名为 candump 的函数。Candump 监控输入通道并在数据进入时将值返回到标准输出。

我想要做的是控制它何时终止（即，cansend 后的固定时间）。在查看文档之后，似乎 join 可能是正确的方法？

我不确定。有什么想法吗？

```
import threading
from subprocess import call, Popen,PIPE
import time

delay=1

class ThreadClass(threading.Thread):
  def run(self):
    start=time.time()
    proc=Popen(["candump","can0"],stdout=PIPE)
    while True:
        line=proc.stdout.readline()
        if line !='':
            print line

t = ThreadClass()
t.start()
time.sleep(.1)
call(["cansend", "can0", "-i", "0x601", "0x40", "0xF6", "0x60", "0x01", "0x00", "0x00", "0x00", "0x00"])
time.sleep(0.01)
#right here is where I want to kill the ThreadClass thread 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:22:36.780

```
import subprocess as sub
import threading

class RunCmd(threading.Thread):
    def __init__(self, cmd, timeout):
        threading.Thread.__init__(self)
        self.cmd = cmd
        self.timeout = timeout

    def run(self):
        self.p = sub.Popen(self.cmd)
        self.p.wait()

    def Run(self):
        self.start()
        self.join(self.timeout)

        if self.is_alive():
            self.p.terminate()
            self.join()

RunCmd(["./someProg", "arg1"], 60).Run() 
```

* * *

引用自：[Python：超时时终止或终止子进程](https://stackoverflow.com/questions/4158502/python-kill-or-terminate-subprocess-when-timeout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:40:19.407

它可能不是终止线程的最佳方法，但[这个答案](https://stackoverflow.com/a/14488766/216356)提供了一种终止线程的方法。请注意，您可能还需要实现一种方法，使线程在其代码的关键部分无法被杀死。

# javascript - 有没有办法使用与我的 JSON 中不同的属性名称？

> ID：15213617
> 
> 赞同：4
> 
> 时间：2013-03-05T00:19:03.660
> 
> 标签：javascript, model-view-controller, ember.js, javascript-framework, ember-data

我有以下 JSON（简单示例）：

```
{
  id:        101,
  firstName: "John",
  surname:   "Doe"
} 
```

但我希望我的模型使用`lastName`而不是`surname`. 像这样的东西，也许：

```
App.Person = DS.Model.extend({
  firstName: DS.attr('string'),
  lastName:  DS.attr('string', { key: 'surname' })
}); 
```

我可以发誓我在某个地方看到了一些东西，展示了如何做到这一点，但是对于我的生活，找不到它。我在 ember-data 源中也没有发现任何明显的东西。

我已经尝试在属性选项中设置`key`, `name`, `id`, `alias`, 和`map`，但似乎没有一个可以解决问题。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T00:44:22.503

您应该能够通过[REST Adapter](http://emberjs.com/guides/models/the-rest-adapter/)做到这一点。该文档包括一个在带[下划线的属性名称下映射“](http://emberjs.com/guides/models/the-rest-adapter/#toc_underscored-attribute-names)*不规则键*”的示例：

> 不规则的键可以映射到适配器上。如果 JSON 的键为`lastNameOfPerson`，并且所需的属性名称为`lastName`，则通知适配器：
> 
> ```
> App.Person = DS.Model.extend({
>   lastName: DS.attr('string')
> });
> DS.RESTAdapter.map('App.Person', {
>   lastName: { key: 'lastNameOfPerson' }
> }); 
> ```

在你的情况下：

```
DS.RESTAdapter.map('App.Person', {
    lastName: { key: 'surname' }
}); 
```

还可能值得注意的是，Ember 期望 JSON 具有`first_name`而模型具有`firstName`. 因此，这可能还需要明确*调整*。

# topshelf - Topshelf 安装命令不返回

> ID：15213618
> 
> 赞同：1
> 
> 时间：2013-03-05T00:19:03.723
> 
> 标签：topshelf

我正在使用 Topshelf v3.1 将我的控制台应用程序安装为 Windows 服务。我通过命令行安装我的控制台，例如： myconsole install

除了命令似乎永远不会完成之外，一切似乎都很好，我的意思是通常一旦执行命令，命令行控制台将返回您可以再次键入另一个命令的状态。不知何故，topshelf 命令在最后一点停止，所以我必须 Control + C 来终止该命令。

我的代码如下：

```
class Program
    {
        static void Main(string[] args)
        {
            //HostFactory.Run(x =>
            //{
            //    x.Service<DummyService>(s =>
            //    {
            //        s.ConstructUsing(name => new DummyService());
            //        s.WhenStarted(tc => { });
            //        s.WhenStopped(tc => { });
            //    });

            //    x.RunAsLocalSystem();
            //    x.SetDescription("DummyService1");
            //    x.SetDisplayName("DummyService2");
            //    x.SetServiceName("DummyService3");
            //    x.StartAutomatically();
            //});
            var service = new DummyService();
            service.Run();            
        }
} 
```

不知何故，如果我取消注释掉上面注释掉的块并注释掉 Main 方法中的最后两行。然后我再次运行该命令，它神奇地起作用。

PS： DummyService.Run 方法只是包装了注释代码块。本质上，它们是相同的。

有任何想法吗？

干杯，Ld

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T22:31:26.540

Topshelf 用于运行服务。这是预期的行为。当 Windows 服务正常运行时，该服务需要连续运行（直到发送停止命令）。在命令行中，您需要按 CTRL+C 来发出服务结束的信号。

如果您只想运行一个命令，Topshelf 是错误的方法。Topshelf 允许您将服务作为命令行正常运行，作为调试服务的简便方法。

# c++ - 给定两种瓷砖类型，如何随机生成网格样式的岛屿地图？

> ID：15213619
> 
> 赞同：2
> 
> 时间：2013-03-05T00:19:17.467
> 
> 标签：c++

我需要编写一个算法，以便为 100 x 100 网格中的每个正方形分配一个瓷砖类型（一个用于水，一个用于陆地），我希望它生成一个“岛”。一些随机的东西，但是所有的陆地都在一起，所有的水都在边界上。有任何想法吗？

我听说过“柏林噪音”，但我不知道如何实现它来给出我想要的结果。我觉得我的情况对于如此复杂的算法来说可能太基础了。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:01:18.363

我玩的 Roguelike 游戏叫做 Brogue，它使用元胞自动机规则来生成湖泊和洞穴，而这样的规则可以用来制作岛屿，因为它们以令人满意的斑点方式生成，看起来很凝结，但不是过于圆形/方形。

在这里阅读：http: [//brogue.wikia.com/wiki/Level_Generation#Lakes](http://brogue.wikia.com/wiki/Level_Generation#Lakes)

样本：

*使用与关卡一样大的缓冲区，并以 55% 的活动元素和 45% 的死元素作为种子。规则 B5678/S45678 进行了 5 次迭代：*

*如果我死了并且有 5-8 个活着的邻居，我就会活过来。*

*如果我还活着并且有 4 到 8 个活着的邻居，我还活着，否则我就死了。*

*在此之后，每个水平/垂直连接的活动元素的“blob”都被计算在内，并且小于lakeMaxWidth 和lakeMaxHeight 的最大blob 被保留。如果没有比 4x4 大且小于此的 blob，则重新启动元胞自动机。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T00:42:18.277

我们称之为地图的宽度`w`、高度`h`和中心点`C`。`C`是一个二维向量`(w / 2, h / 2)`。

随着您离 越来越远`C`，水的概率应该会增加，最好有某种截止点。

让我们称当前正在评估的点`P`，它也是一个二维向量`(x, y)`，其中`x`和`y`是坐标。

`P - C = D`给了我们一个新的向量`D`，它的长度是从中心到被评估点的距离。

作为第一个实现，假设当 的长度（或大小）`D`大于`w - 20`我们放下水瓦时。

现在我们建立我们的网格。遍历每个图块，并计算`D`. `if D > (w - 20)`，我们将瓷砖标记为水，否则我们将其标记为土地。

这给了我们一个“完美”的圆形岛。

* * *

让我们介绍一些随机性。我们将条件修改为`if D > ((w - 20) + randint(4))`（其中`randint(x)`返回一个随机整数，从 0 到 x）。现在我们得到了一些崎岖的海岸线。

在这种情况下，我们可能会得到小的孤立地块。它可以解决，但不是这么简单的条件，[Thomas Matthews 的想法](https://stackoverflow.com/a/15213822/12183)在这种情况下会更好。

该岛仍将是相当圆形的，但它的崎岖程度取决于您`randint`在该条件下喂食的食物。如果`randint(someval)`产生大于 20 的值，我们可能在边界处根本得不到任何水，所以要注意这种情况。

* * *

如果我们想要某种方形岛，我们将需要检查我们与边界的距离。这也很容易，例如查看我们是否在左边框的 4 个图块内：`P.x < 5`或在右边框的 10 个图块内`P.x > w - 5`。

* * *

关于柏林噪音和无耻插件。在业余时间，我正在研究一个生成晶格噪声的库（Perlin 是一种晶格噪声。）您可以随意使用代码，或者如果您也想[在这里](https://github.com/skurmedel/latticenoise/tree/master/src)查看它。它绝不是完整的，我敢肯定那里有错误，但它会产生分形噪音。

Perlin 噪声具有许多理想的特性，但可能需要一些额外的处理（通常是简单的数学运算）来塑造它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T00:42:29.120

我建议将网格设置为所有水。在地球上，水比陆地多。

接下来，选择一个随机点。将其分配为土地。
对于新岛的每一侧，您可以生成一个随机数来确定相对于第一个方格的下一个方格，即土地所在的方位。您还可以添加一些权重和规则，这样您的岛上就不会出现“湖泊”并且土地会接触土地。

在网上搜索“地形编辑器”。模拟城市游戏有一些地形编辑器，也允许从山脉到湖泊的深度。

# matlab - Matlab：结构数组的字段名称无效

> ID：15213620
> 
> 赞同：0
> 
> 时间：2013-03-05T00:19:17.957
> 
> 标签：matlab

基本上，我的程序应该接受投票，通过选民 id 的名称保存，直到输入秘密 id，此时它将显示 id。它必须保存为结构数组。这是我到目前为止所得到的：

```
secretid = 123456789;
currid = 0;
while currid ~= secretid
  currid = input('Enter your id:');
  if currid == secretid
    votedata
    break
  else
    strcurrid = num2str(currid);
    vote = input('Enter your vote:', 's');
    votedata = struct(strcurrid, vote);
  end
end 
```

根据 Matlab 的说法，字段名称无效 - 它必须保存为字符串，但我不明白，我将 currid 转换为字符串，不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T02:26:42.747

来自[Matlab 的结构参考页：](http://www.mathworks.com/help/matlab/ref/struct.html)

field - 字段名称

细绳

字段名称，指定为字符串。有效的字段名称**以字母开头**，并且可以包含字母、数字和下划线。字段名称的最大长度是 namelengthmax 函数返回的值。

我建议在您的 id 开头添加一个虚拟字母，或者仅使用：

```
strcurrid = ['id', num2str(currid)]; 
```

# html - 刚刚开始掌握 CSS。有人能告诉我为什么我的内容 div 稍微突出了右边吗？

> ID：15213621
> 
> 赞同：2
> 
> 时间：2013-03-05T00:19:36.007
> 
> 标签：html, css

链接在这里。

[http://jsfiddle.net/8X4UE/](http://jsfiddle.net/8X4UE/)

```
<html>

<head>
    <link rel="stylesheet" type="text/css" href="stylesheet.css">
    <title>Project One</title>
</head>

<body>
    <div class="header">
        <p>#Project One</p>
    </div>

    <ul class="nav">
            <li><a href="#">Home</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">FAQs</a></li>
            <li><a href="#">Contact Us</a></li>
            <li><a href="#">Forum</a></li>

    </ul>
    <div class="content">
        <p>Content goes here!</p>
    </div>
</body>

</html> 
```

CSS：

```
/* The CSS */

body {
    margin: 0 20%;
    background-color: #333333;
}

.header{

    width: 100%;
    float: left;
    margin: 0;
    padding: 0;
    background-color: #336699;

}

.header p{
    margin-left: 1em;
    font-family: Verdana;
    font-size: 1.2em;
    color: #e2e2e2;
}

.nav{
    width: 100%;
    float: left;
    margin: 0 0 0 0;
    padding: 0;
    list-style: none;
    background-color: #f2f2f2;
    border-bottom: 1px solid #ccc;
    border-top: 1px solid #ccc;
}

.nav li{
    float: left;
}

.nav li a{
    display: block;
    padding: 8px 15px;
    text-decoration: none;
    font-weight: bold;
    color: #069;
    border-right: 1px solid #ccc;
}

.nav li a:hover{
    color: #c00;
    background-color: #fff;
}

.content {
    display: block;
    width: 100%;
    background-color: #FFFFCC;
    margin: 0;
    border: 1px solid #ccc;
    clear: both;
} 
```

我不明白为什么它只是像那样冒出来。似乎如果我删除填充/浮动它几乎可以对其进行排序，但随后会在所有三个部分留下黄色边框。

到目前为止，如果您也有任何关于我的编码的一般性建议，我想请教您。我想尽快把坏习惯扼杀在萌芽状态。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T00:22:11.230

删除`width:100%`.

当你给出一个`100%`宽度时，你必须考虑到边框也有一个宽度，所以`100% width + 1 pixel left border + 1 pixel right border = the right pipping`

## CSS3 的盒子尺寸

就像前面提到的，为 div 设置 100% 的宽度，意味着给它实际上是父级的 100% 宽度，而不考虑这个 div 可能有边框或填充。

因此，如果父级的宽度为 200px，子级的宽度为 100%，padding 为 5px，边框为 1px，则 div 的最终宽度将是：

```
200px + 1px + 1px + 5px + 5px = 212 px. 
```

为避免这种情况，CSS3 引入了一个名为**box-sizing**的新属性。

使用 box-sizing，div 将具有 100% 的宽度，同时包含边框的宽度和任何填充。

```
box-sizing:border-box;
-moz-box-sizing:border-box;
-webkit-box-sizing:border-box; 
```

现在 div 的宽度正好是 200 像素，包括内边距和边框宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:21:23.860

内容显示在右侧，因为`borders`算作“内容”。

你的问题在这里：

```
.content {
    display: block;
    width: 100%;
    background-color: #FFFFCC;
    margin: 0;
    border: 1px solid #ccc;
    clear: both;
} 
```

如果你把它换成

```
.content {
    ...
    border: 0px solid #ccc;
    ...
} 
```

然后它不戳。正如另一个答案所提到的，删除宽度也可以解决问题（这正是您想要的）。

# ruby-on-rails - 设计 rspec 测试

> ID：15213634
> 
> 赞同：0
> 
> 时间：2013-03-05T00:21:15.840
> 
> 标签：ruby-on-rails, rspec

为什么这个测试没有通过？我使用设计进行身份验证。

用户.rb

```
 validates :username, presence: true, :length => { :minimum => 2 } 
```

user_spec.rb

```
require 'spec_helper'

describe User do

  before do
    @user = User.new(username: "Example User", email: "user@example.com",
                     password: "foobar", password_confirmation: "foobar")
  end

  describe "name" do
    before { @user.username="test" }
    it { should be_valid }
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:13:06.553

您必须在 RSpec 中指定一个主题来调用“它”。例如，您可以添加

主题{@user}

在你的'before do'块之后。

以后一定要复制错误信息，让每个人都知道在哪里看！

# bash - “搜索和抓取”sh脚本的优化

> ID：15213641
> 
> 赞同：1
> 
> 时间：2013-03-05T00:22:01.120
> 
> 标签：bash, loops

这是一个曾经运行良好的脚本，但现在我正在处理大量的 inode（大约 400K），它似乎会产生一些 I/O 缓慢。该脚本读取定义文件“def”，它是标识符列表，并且对于“dir”目录中的每个 400K 文件，如果在前 4 行中找到一个标识符，它会将整个文件内容附加到“def”特定文件的结尾。

```
#!/bin/sh
for def in *.def
do
        touch $def.out
        for file in $dir/*
        do
                if head -4 $file | grep -q -f  $def
                then
                        cat $file >> $def.out
                fi
        done
done 
```

我怎样才能让它更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:31:26.453

Perl 解决方案。它应该比你的脚本快得多，因为

1.  它从每个 .def 文件创建一个正则表达式。它不会多次读取每个 .def 文件。
2.  它用于`opendir`读取目录内容。它比做 glob 快得多`*`，但作为惩罚，文件没有排序。要比较您和我的脚本的输出，您必须使用

    ```
    diff <(sort $def.out) <(sort $def-new.out) 
    ```

    您可以将 替换为`opendir`a`glob`以获得完全相同的输出。它减慢了脚本，但它仍然比旧脚本快得多。

脚本在这里：

```
#!/usr/bin/perl
use warnings;
use strict;

my $dir = 'd';              # Enter your dir here.

my @regexen;
my @defs = glob '*.def';
for my $def (@defs) {
    open my $DEF,   '<', $def           or die "$def: $!";
    open my $TOUCH, '>', "$def-new.out" or die "$def-new.out: $!";
    my $regex = q();
    while (<$DEF>) {
        chomp;
        $regex .= "$_|"
    }
    substr $regex, -1, 1, q();
    push @regexen, qr/$regex/;
}

# If you want the same order, uncomment the following 2 lines and comment the next 2 ones.
#
# for my $file (glob "$dir/*") {
#     $file =~ s%.*/%%;

opendir my $DIR, $dir or die "$dir: $!";
while (my $file = readdir $DIR) {
    next unless -f "$dir/$file";

    my %matching_files;
    open my $FH, '<', "$dir/$file" or die "$dir/$file: $!";
    while (my $line = <$FH>) {
        last if $. > 4;
        my @matches = map $line =~ /$_/ ? 1 : 0, @regexen;
        $matching_files{$_}++ for grep $matches[$_], 0 .. $#defs;
    }

    for my $i (keys %matching_files) {
        open my $OUT, '>>', "$defs[$i]-new.out" or die "$defs[$i]-new.out: $!";
        open my $IN,  '<',  "$dir/$file"        or die "$dir/$file: $!";
        print $OUT $_ while <$IN>;
        close $OUT;
    }
} 
```

## 更新

现在可以多次获取文件。不是创建一个巨大的正则表达式，而是创建一个正则表达式数组，并将它们逐个匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:43:05.657

我发现当我在单个文件夹中有超过 10,000 个文件时，我开始看到一些性能问题。发生这种情况时，即使是`ls`命令也可能需要几秒钟才能返回。

您的脚本似乎天生就是 IO 繁重的。它正在查看大量文件并创建或附加到大量文件。如果不更改脚本的运行方式，我看不出有什么可以改进的。

如果可以，请将其中一些数据移入数据库。与文件系统相比，数据库可以更容易地调整到这种数据规模。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T12:21:43.493

可以节省很多分叉；循环中保存的一个 fork 使整个脚本总共有 400K 的 fork。这就是我要做的。

不要触摸每个 *.def，而是大块触摸它们：

```
find . -name '*.def' | sed 's/\(.*\)/\1.out/' | xargs touch 
```

（如果您的发现支持它，请使用`find . -maxdepth 1`...）

而不是两个命令管道，而是在一个命令中执行：

```
if awk "NR <= 4 && /$def/ { exit 0 } NR==5 { exit 1 }" $file; then 
```

（不过，如果 $def 不包含元字符，请检查它。点应该没问题。）

# php - 嵌套的 foreach 循环

> ID：15213645
> 
> 赞同：2
> 
> 时间：2013-03-05T00:22:31.463
> 
> 标签：php, arrays, foreach

我有一个看起来像这样的数组

```
$foreacharray = array(
    "model" => array ("samsung", "sony", "philips", "acer", "hp"),
    "qty" => array("3", "7", "5", "1", "8"),
); 
```

我正在尝试为每个模型绘制徽标，为其数量绘制徽标，因此三星 = 3、索尼 = 7 等等将绘制 3 个索尼徽标和 7 个三星徽标。

我想出了这样的东西

```
foreach ($foreacharray["model"] as $model)
{
    foreach($foreacharray["qty"] as $qty)
    {
        echo $model;
        echo '<br>';
    }
} 
```

但当然，所有这些都是针对每个数组条目，回显名称，所以我最终会打印 5 个三星，打印 5 个索尼等。

如何使它使用 qty 数组的值而不是条目数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:30:59.010

为什么不通过使用函数来简化它`array_combine`呢？

[http://www.php.net/manual/en/function.array-combine.php](http://www.php.net/manual/en/function.array-combine.php)

例子;

```
$newArray = array_combine($foreacharray[0], $foreacharray[1]);
var_dump($newArray);
// will output
array (
     "samsung" => 3,
     "sony" => 7,
     "philips" => 5,
     "acer" => 1, 
     "hp" => 8,
) 
```

然后您可以轻松获取所有值或像这样显示它们......

```
foreach($newArray as $key => $val) {
    echo $key . ' has a quantity of ' . $val . '.';
} 
```

希望这会让事情变得更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:35:50.113

如果您首先控制了数组的生成，那么您最好只生成一个以模型为键、数量为值的数组，而不是生成 2 个单独的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T00:25:45.000

假设模型是唯一的，您可以[`array_combine`](http://php.net/array_combine)使用模型作为键和数量作为值：

```
$combined = array_combine($foreacharray['model'], $foreacharray['qty']);

foreach($combined as $model => $qty) {
    # …
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T00:27:09.973

我认为您正在尝试这样做：

```
for( $i = 0, $e = count( $foreacharray["model"] ); $i < $e; ++ $i ) {
    echo $foreacharray["model"][$i] . ' = ' . $foreacharray["qty"][$i] . '<br />';
} 
```

基本上，一个循环引用同一索引处的两个数组。

如果您愿意，也可以使用 foreach，如下所示：

```
foreach( $foreacharray["model"] as $key => $model ) {
    echo $model . ' = ' . $foreacharray["qty"][$key] . '<br />';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T00:31:14.257

使用数组来迭代数组索引，例如：

```
for (i=0; i<count($foreacharray["model"]); i++)
{
    $model = $foreacharray["model"][i];
    $qty = $foreacharray["qty"][i];
    echo "$model: $qty";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T00:32:23.597

```
// #1 using one for keys, another for values:
foreach(array_combine($foreacharray['model'],$foreacharray['qty']) as $model => $nr){
        var_dump($model,$nr);
}
// #2 map them with null:
foreach(array_map(null,$foreacharray['model'],$foreacharray['qty']) as $data){
        var_dump($data);
}
// #3 iterators!
$iterator = new MultipleIterator();
$iterator->attachIterator(new ArrayIterator($foreacharray['model']));
$iterator->attachIterator(new ArrayIterator($foreacharray['qty']));
foreach($iterator as $data){
        var_dump($data);
} 
```

但最好确实从源头上改变这一点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T00:43:47.997

你`$foreacharray["qty"]`有 5 个元素，因为当你循环这个时`foreach`，它会打印所有`$foreacharray["model"]`元素 5 次。您的代码如何工作，如何编写。

# php - mysqli 扩展丢失-phpMyAdmin 错误

> ID：15213650
> 
> 赞同：0
> 
> 时间：2013-03-05T00:23:11.673
> 
> 标签：php, mysql, apache, phpmyadmin, mysqli

我相信很多人现在已经看到了这个错误。 *“缺少 mysqli 扩展。请检查您的 PHP 配置。”*

我已尝试卸载所有内容并继续遇到相同的问题。我已经阅读了许多试图修复它的文章，并且一直遇到同样的问题！

这是我得到的：

视窗 7 专业版 64

mysql 5.6

阿帕奇 2.2.22

PHP 5.3.22

我还应该提到我正在尝试将它安装在硬盘上的单独分区上，驱动器标记为 F:。

是的，我检查了 mysqli 是否未注释。

是的，我检查了 .dll 是否在 \ext 文件夹中。

是的，我已经重新启动了服务、我的计算机并重新安装了所有内容。

我正在努力使这件事发挥作用。如果我不能让这些一起工作，还有其他使用 mySQL 创建 Web 服务器的想法吗？我想尽快解决这个问题。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T11:09:49.130

关于我之前有过这个错误，这就是我纠正它的方式

我下载了 PHP 5.0 然后安装到我的电脑中

当打开 phpMyAdmin 导致 php 错误它以某种方式与我的 php.ini 文件发生冲突

但是当我卸载它时，我的 wampserver 在我重新启动服务后恢复了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-28T19:50:58.717

对于 ubuntu 16 操作系统尝试运行

```
php -m 
```

如果运行此命令后未显示 mysqli，则安装 mysqli

适用于 PHP 7.0 版本

```
sudo apt-get install php7.0-mysqli 
```

对于 PHP 5 版本

```
sudo apt-get install php5-mysqli 
```

# java - 有没有办法在 OSGI 中以与我们在 spring 中类似的方式实现多租户？

> ID：15213652
> 
> 赞同：2
> 
> 时间：2013-03-05T00:23:18.793
> 
> 标签：java, spring, osgi, multi-tenant

我店里有人想出了一个巧妙的方法来使用 spring 框架实现多租户。他们基本上使用常用服务创建了一个主要的父应用程序上下文，然后为每个新租户创建了一个带有特定于租户 bean 的子上下文。它运作良好，我们可以即时启动新租户。

现在我们对使用 OSGI 有硬性要求，而这种模式正在崩溃。我们尝试了几种不同的方法，要么它们不起作用，要么我们需要关闭 VM 以添加新租户以添加新声明的服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:34:11.717

创建一个父 OSGi 框架，然后为每个租户创建一个单独的 OSGi 框架。使用系统捆绑包将共享服务从父框架导出到租户框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T20:33:51.317

您可以使用 OSGi 蓝图很容易地做到这一点。

您可能知道 Blueprint 是 Spring Dynamic Modules 的继承者......所以，很明显，Blueprint 上下文和 Spring 上下文之间有很多相似之处。

这是 OSGi 蓝图的指南：

[http://www.javabeat.net/2011/11/blueprint-and-service-dynamism-in-osgi/](http://www.javabeat.net/2011/11/blueprint-and-service-dynamism-in-osgi/)

我建议您创建一个代表您的父 Spring 上下文的“父”包，然后为每个租户安装一个新包，该包使用父包导出的 OSGi 服务。

由于捆绑包可以随时动态安装和卸载，因此您应该能够获得比单独使用 Spring 更好的动态性。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T07:28:13.707

不幸的是，没有标准的方法来做到这一点。

多框架方法（也必须自己实现）的替代方法是引入一个“上下文”对象（如 Spring 应用程序上下文），该对象实现了`getService`一种基于某些租户特定过滤器配置获取适当 OSGi 服务的方法。

我们[在 Gyrex 中做了类似的事情](http://wiki.eclipse.org/Gyrex/Context_Runtime)。但同样，它是一个自定义解决方案（尽管是开源的），而不是 OSGi 标准。

# oracle - 在 Oracle SOA Suite 中配置服务质量 (QOS) 属性、限制和重新交付

> ID：15213653
> 
> 赞同：1
> 
> 时间：2013-03-05T00:23:19.723
> 
> 标签：oracle, soa, throttling, qos

我的团队广泛使用 Oracle SOA Suite 在不同系统之间编排和集成业务流程。

在负载高峰期，我们担心我们集成的合作伙伴平台会过载。我们正在研究**限制向外部端点发出的请求的**选项。

我在 Oracle 的网站上找到了以下文章，它展示了如何在一些名为“ ***Java CAPS*** ”的工具中执行此操作：

*   [CAPS：配置服务质量 (QOS) 属性、限制和重新传递](http://docs.oracle.com/cd/E21454_01/html/821-2608/cnfg_bpel-qos-properties_r.html)

这似乎是我需要的确切功能。不幸的是，在 Oracle SOA Suite 11g 中找到这个特性时，我一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T23:34:33.560

节流通常由**ESB**实现。请查看以下链接，了解如何在 OSB 中启用节流：

*   [服务节流](http://oracle4servicebus.blogspot.com/p/service-throttling.html)
*   [OSB 11g - 节流](http://soawork.blogspot.com/2013/01/throttling-in-osb.html)

关于 CAPS，我从未使用过它，但它看起来只是另一个 BPEL Proces 编辑器。如果您想在 BPEL 级别启用限制，您也可以使用例如 jDeveloper，它应该允许您设置与 CAPS 相同的参数集。

# debugging - 使 gdb 在启动时自动执行命令

> ID：15213654
> 
> 赞同：7
> 
> 时间：2013-03-05T00:23:31.753
> 
> 标签：debugging, gdb

我总是需要输入：

```
handle SIGPIPE nostop noprint pass 
```

有没有办法让它永久化或配置 gdb 让它在它的设置中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-06T08:45:01.507

创建一个文件 ~/.gdbinit 包含：

```
handle SIGPIPE nostop noprint pass 
```

该文件的内容只是标准的 gdb 命令，每次启动 gdb 时都会执行。

也可以有项目特定的 .gdbinit 文件。想象一下您的项目目录是：`/home/user/my-project/`这是您在调试项目时启动 gdb 的地方。首先将此行添加到您的 ~/.gdbinit：

```
add-auto-load-safe-path /home/user/my-project/.gdbinit 
```

然后创建一个文件`/home/user/my-project/.gdbinit`，将特定于该项目的任何 gdb 命令放入这个新`.gdbinit`文件中，每次在项目目录中启动 gdb 时都会执行这些命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:27:34.277

GDB 将在每次启动时运行 ~/.gdbrc 文件中的所有命令，因此您可以将句柄命令放在它们中，以便在每次启动 gdb 时自动执行它。

# c# - 使用正则表达式的字符类和否定

> ID：15213656
> 
> 赞同：5
> 
> 时间：2013-03-05T00:23:53.030
> 
> 标签：c#, regex

我想知道 Regex 是否有任何方法可以接受与给定字符集相关的字符，同时否定其他几个字符？

例如，考虑我想要接受`\w`除 letter`e`和 digit之外的所有字符、数字和下划线 () 的情况`1`。有没有一种快速的方法可以做到这一点？理想情况下，我会喜欢类似于 的东西`^[\w^e1]$`，尽管我知道这个特定的东西行不通。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T00:32:28.140

您可以通过[字符类减法](http://msdn.microsoft.com/en-us/library/20bw873z.aspx#CharacterClassSubtraction)来实现这一点：

> [base_group - [excluded_group]]

使用这种格式，该模式`^[\w-[e1]]$`可用于匹配除字母`e`和数字之外的所有字母数字字符`1`。

```
string[] inputs = 
{
    "a", "b", "c", "_", "2", "3",
    " ", "1", "e"   // false cases
};
string pattern = @"^[\w-[e1]]$";
foreach (var input in inputs)
{
    Console.WriteLine("{0}: {1}", Regex.IsMatch(input, pattern), input);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:39:39.390

比 Ahmad 的解决方案更*便携*但不太简洁的方法是只定义一个排除`e`and的字符类`1`。

```
[a-df-zA-DF-Z02-9] 
```

应该按预期工作。

# jquery - 无法从 jquery 模式对话框中的 p:commandLink 更新 jsf 组件

> ID：15213661
> 
> 赞同：0
> 
> 时间：2013-03-05T00:24:17.603
> 
> 标签：jquery, jsf, primefaces, modal-dialog, commandlink

我正在使用 jQuery 模态对话框中的 jsf p:commandLink。它调用 actionListener 但不能更新组件。如果我使用页面中集成的同一个按钮，它就可以正常工作。有什么想法我应该检查什么以及如何找到问题？

```
<p:commandLink id="connectComp" value="connect" styleClass="iconConnect"
               actionListener="#{comprecommend.connectCompetence}"
               update="compRecommendGrowl :changableActivitiesRegion :RecommendedCompetencesPanel"
               oncomplete="$('#accessCompetenceHereBallon .ballonMessage').trigger('pulsate');">
    <f:param name="compUri" value="#{compIterator.uri}" />
</p:commandLink> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:10:20.437

在删除包含组件中的 h:body 元素后，我解决了这个问题。我意识到生成的 html 页面的结构包含多个正文标记，这可能导致模态对话框附加到随机正文标记。

# php - PHP 为什么“isset()”和“empty()”不能按预期工作

> ID：15213665
> 
> 赞同：-1
> 
> 时间：2013-03-05T00:25:06.657
> 
> 标签：php

我有以下 if 语句，

```
if (isset($_POST['projectName']) && !empty($_POST['projectName'])) 
```

当页面第一次加载时，在事件点击提交按钮之前，页面通过 if 语句并返回 false，这是我的意图，但只有在有人点击提交按钮之后。

我怎样才能改变它，以便它只在有人点击提交后才通过这个 if 语句？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:26:33.520

```
if(isset($_POST['submit'])){
    if (isset($_POST['projectName']) && !empty($_POST['projectName'])) {
        // ..
    }
} 
```

确保您的表单有一个名为 submit 的提交按钮

```
<input type="submit" name="submit" value="submit"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:34:45.543

如果您不想在没有发布任何内容的情况下评估该声明，您可以这样做：

```
if ('POST' !== $_SERVER['REQUEST_METHOD']) { // this is not a POST
    // do something
} else {
    // logic for handling posts
    if(!empty($_POST['projectName']))  {
        //  blah blah blah
    }
} 
```

或者

```
if (empty($_POST)) { // this is not a POST
    // do something
} else {
    // logic for handling posts
    if(!empty($_POST['projectName']))  {
        //  blah blah blah
    }
} 
```

# iphone - 随机访问 NSArray，但不会在对象上丢失或加倍

> ID：15213668
> 
> 赞同：1
> 
> 时间：2013-03-05T00:25:21.070
> 
> 标签：iphone, ios, nsarray, arc4random

首先对问题标题感到抱歉，很难用几句话来回答这个问题。

基本上我有一个由单词中的字母填充的 NS 数组。然后随机显示字母，用户必须找到正确的字母来组成单词。目前我正在使用与此类似的代码：

```
int length = [arrayForCount count];
int randomindex = arc4random() % length; 
```

这确实实现了我想要的，但是因为它是随机的，每次调用它都会产生相同的 int，这反过来会产生例如两个字母 e，但不会产生数组中的另一个字母。

我也试过

```
randIdx = random() % [arrayForRound count]; 
```

有人可以帮我找到一种方法来随机显示数组中的值，但不会丢失或加倍一些字母吗？

如果需要更多信息，请告诉我，感谢您的帮助。吨

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T00:31:20.807

正如我在评论中提到的，将原始数组的对象复制到一个可变数组并将其改组为：

```
NSUInteger count = [array count]; //array is the mutable copy of original array
for (NSUInteger i = 0; i < count; ++i) {
    NSInteger elements = count - i;
    NSInteger n = (arc4random() % elements) + i;
    [array exchangeObjectAtIndex:i withObjectAtIndex:n];
} 
```

现在您可以`array`一个接一个地访问对象，它将是独一无二的。您也不会错过任何物品。

# c# - for 循环的这个输出是如何工作的？

> ID：15213669
> 
> 赞同：2
> 
> 时间：2013-03-05T00:25:26.023
> 
> 标签：c#, for-loop

嘿伙计们，我有考试测试我 for 循环的输出。但我似乎不明白这个输出是如何变成 11 的？

```
public void button1_Click(object sender, EventArgs e)
{
        int i;
        for (i = 1; i <= 10; i += 2)
        {
        }
        MessageBox.Show("The number is " + i);
    }
} 
```

之前我以为它代表1+3+5+7+9，但答案不是11。谁能帮我解释一下输出是怎么变成11的？这根本没有任何意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T00:28:15.743

完全不清楚您的期望是什么，但看看会发生什么：

*   `i`从1开始。1小于等于10，所以进入循环体
    *   循环体什么都不做
    *   在循环体结束时，`i`递增 2
*   `i`现在的值为 3。3 小于或等于 10，所以它进入循环体
    *   循环体什么都不做
    *   在循环体结束时，`i`递增 2
*   `i`现在有值 5。5 小于等于 10，所以它进入循环体
    *   循环体什么都不做
    *   在循环体结束时，`i`递增 2
*   `i`现在有值 7。7 小于等于 10，所以它进入循环体
    *   循环体什么都不做
    *   在循环体结束时，`i`递增 2
*   `i`现在有值 9。9 小于等于 10，所以它进入循环体
    *   循环体什么都不做
    *   在循环体结束时，`i`递增 2
*   `i`现在的值为 11。11*不*小于或等于 10，因此循环终止
*   的值`1`被打印出来 - 它仍然是 11

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T00:27:37.723

循环的最后一次迭代是 when `i = 9`。循环终止`i += 2`，它将给你`i = 11`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T00:37:25.797

本质上，由于循环遍历结果的方式，您的循环无法终止。

你的价值`i = 1`。

问题是你放了`i += 2`.

这会导致问题的原因是因为它会像这样遍历您的所有值：

*   `i = 1``i <= 10`：循环失败将继续。
*   `i = 3`：因为您`i <= 10`仍然不符合条件而失败，循环仍然迭代。
*   `i = 5`: 因`i <= 10`未满足而失败，循环继续。
*   `i = 7`: 因`i <= 10`未满足而失败，循环将继续。
*   `i = 9`: 失败，因为您`i <= 10`仍然不符合您的标准。

由于最后一次迭代失败，它实际上又运行了一次。如果您尝试让循环运行一定次数，则必须使用更简洁的数学表示来正确迭代。它不会`i <= 10`在所需的次数内平衡，因此会导致额外的一次迭代。

但这就是为什么它是 11，因为你的最后一个值不符合条件。

现在，如果您希望循环进行五次，您需要这样的东西：

```
int i;
for(i = 1, i <= 5, i +=1 ); 
```

你也可以像这样完成它：

```
int i;
for(i = 5, i <= 20, i += 5); 
```

我不确定这是否是您使用不同数字的最初目标，但希望这会有所帮助。我可能会添加错误，但希望这会为您指明正确的方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T00:34:44.030

如果将消息框*放在*循环内：

```
int i;
for (i = 1; i <= 10; i += 2)
{
  MessageBox.Show("The number is " + i);
} 
```

那么你会得到五个消息框，其值为 1、3、5、7 和 9。

由于消息框在循环之后，您会得到一个消息框，其中包含变量在循环之后的值，即 11。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T00:28:06.527

`for`循环从 开始，`i`一直`1`加到`2`，当大于`i`时停止。这是第一次发生在，所以循环退出并静止。`i``10``i == 11``i``11`

# ios - 如何比较不区分大小写的 NSRange ？

> ID：15213671
> 
> 赞同：2
> 
> 时间：2013-03-05T00:25:36.543
> 
> 标签：ios, objective-c, compare, nsrange

我写了一个在通讯录中搜索人的方法，我希望该方法能够找到“john bigs”，即使我调用该方法`[someAdressBook searchName:@"joh"];`。

我的方法适用于全名，但我在部分名称中遇到问题，这是我的代码：

```
-(NSMutableArray *) searchName:(NSString *) someName{

    NSRange range;

    NSMutableArray *results = [[NSMutableArray alloc] init];

    for (AddressCards *addressCard in book)
    {
        if (someName != nil && [someName caseInsensitiveCompare:addressCard.name] == NSOrderedSame)
            [results addObject:addressCard.name];

        else {
            range = [addressCard.name rangeOfString:someName];
            if (range.location != NSNotFound)
            [results addObject:addressCard.name];
        }
    }

    NSLog(@"%@", results);

    return results;
} 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T00:31:41.243

您可以使用 -[NSString rangeOfString:options:] 以不区分大小写的方式进行搜索，因此您可以一步完成：

```
for (AddressCards *addressCard in book)
{
    if ([addressCard.name rangeOfString:someName options:NSCaseInsensitiveSearch].location != NSNotFound)
    {
        [results addObject:addressCard.name];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:42:01.077

您可以像这样使用 NSPredicate：

```
-(NSMutableArray *) searchName:(NSString *) someName {
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY addressCard.name CONTAINS[c] %@", someName];
    return [NSMutableArray arrayWithArray:[book filteredArrayUsingPredicate:predicate]];
} 
```

这里的诀窍是*[c]*。这相当于不区分大小写。

请注意，我假设这**本书**是*NSArray*类型，如果它是*NSMutableArray*，则使用谓词将过滤“原始”数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T00:31:27.170

你可以用这个

```
BOOL containsName = [[addressCard.name lowercaseString] containsSubstring: [someName lowercaseString]];
if(containsName)
    [results addObject:addressCard.name]; 
```

# c# - 获取复选框绑定值

> ID：15213684
> 
> 赞同：0
> 
> 时间：2013-03-05T00:26:57.550
> 
> 标签：c#, .net, wpf

我有一个弹出窗口，用户可以根据需要多次打开和关闭。在窗口上有 4 个复选框，其中包含已绑定的选中值。这个想法是，如果用户取消选中一个框然后关闭窗口，下次打开它时它仍然会被取消选中。当窗口打开时，如果有任何未选中的复选框，我需要做一些工作。我的问题是，当在 WindowLoadedEvent 的代码隐藏中时，我尝试获取复选框值以查看是否需要先做一些工作。每次窗口加载时，每个复选框的所有 isChecked 值都是错误的，即使窗口显示它们都已被选中。

我不知道如何获得我正在寻找的价值我正在使用.net 4.0；

```
 <StackPanel x:Name="panelVisibilities">
                                <CheckBox x:Name="crossCorrelationViewCheck"                                 
                                          IsChecked="{Binding Path=Processor.CrossCorrelation.IsCrossCorrelationVisible}"
                                          Click="GraphVisibilityClickEvent"
                                          HorizontalAlignment="Left"/>
    ...etc

private void WindowLoadedEvent(object sender, RoutedEventArgs e)
        {
    IEnumerable<CheckBox> elements = this.panelVisibilities.Children.OfType<CheckBox>().ToList();            

                foreach (CheckBox uiElement in elements)
                {

                    bool isChecked = uiElement.DataContext;

                    if (isChecked == false)
                    {
                        //do work
                    }
                }
    } 
```

编辑：解释它的更好方法可能是我有一个 checkbox.IsChecked 绑定到模型，但我想在显示窗口时从后面的 xaml 代码检查它的状态。

任何帮助，将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:55:33.407

我认为您的代码中可能存在两个问题。

第一：`bool isChecked = uiElement.DataContext;`真的有用吗？ `uiElement`是一个复选框，并且`uiElement.DataContext`是`null`. 您可以使用`uiElement.IsChecked.Value`来获取值。

`Processor.CrossCorrelation.IsCrossCorrelationVisible`第二：必须在发生之前设置属性`WindowLoadedEvent`。您可以检查您的内部代码。

# objective-c - 为什么我的布尔函数在 Xcode 中不起作用

> ID：15213703
> 
> 赞同：1
> 
> 时间：2013-03-05T00:28:44.047
> 
> 标签：objective-c

基本上我试图让 nslog 在控制台中打开和关闭。但我似乎无法让它正常运行。作品很棒，`NSUserDefaults`但`NSLog`根本没有出现。

**视图控制器 1 .h**

```
@property (nonatomic, weak) IBOutlet UISwitch *cameraSwitch; 
```

**视图控制器 1.m**

```
- (void)cameraEnabled
{
    if (cameraSwitch.isOn)
    { 
    }
    else
    {       
    }
} 
```

**视图控制器 2.h**

```
 viewcontroller1 *myVC;
 @property (nonatomic, retain) IBOutlet viewcontroller *myVC; 
```

**视图控制器 2.m**

```
- (void)viewDidLoad
{
    UISwitch *onOffSwitch = [[UISwitch alloc] init];
    /* If it is the first time were are running this code, we will get nil from
       NSUserDefaults, and we'll turn the switch off.
       After the user has set the switch, it will store the value in NSUserDefaults
       and we can remember what to set it to the next time viewDidLoad is called.
    */
    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"SwitchKey"]) {
        [onOffSwitch setOn:YES animated:NO];
    } else {
        [onOffSwitch setOn:NO animated:NO];
    }

    [self.myVC.cameraSwitch addTarget:self action:@selector(openswitch) forControlEvents:UIControlEventValueChanged];
}

- (void)openswitch
{ 
    if (self.myVC.cameraSwitch.isOn)
    {
        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"SwitchKey"];
        NSLog(@"on");  
    }
    else
    {
        [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"SwitchKey"];
         NSLog(@"off"); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:03:59.320

您已经使用 IBOutlet 设置了 cameraSwitch，然后在 viewDidLoad: 中初始化了一个 newSwith。如果您在 xib 中正确连接了 IBOutlet。您需要进行以下更改

```
- (void)viewDidLoad
{
    //No need to initialize switch again
    //UISwitch *onOffSwitch = [[UISwitch alloc] init];
    /* If it is the first time were are running this code, we will get nil from
       NSUserDefaults, and we'll turn the switch off.
       After the user has set the switch, it will store the value in NSUserDefaults
       and we can remember what to set it to the next time viewDidLoad is called.
    */

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    BOOL switchState = [defaults boolForKey:@"SwitchKey"];
    [self.cameraSwitch setOn:switchState animated:NO];

    [self.cameraSwitch addTarget:self action:@selector(openswitch) forControlEvents:UIControlEventValueChanged];
}

- (void)openswitch
{ 

    BOOL switchState = self.cameraSwitch.isOn;
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setBool:switchState forKey:@"SwitchKey"];
    [defaults synchronize];

    NSLog(@"Camera Swith State : %@",switchState?@"ON":@"OFF");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:08:14.387

看起来 UISwitch (cameraSwitch) 是通过界面设计器和代码 (onOffSwitch) 添加的。尝试使用任何一种机制让您的代码正常工作。使用根据 Switch 打印 NSLog 消息的代码添加 UISwitch 的示例

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    UISwitch *onOffSwitch = [[UISwitch alloc] init];
    /* If it is the first time were are running this code, we will get nil from
     NSUserDefaults, and we'll turn the switch off.
     After the user has set the switch, it will store the value in NSUserDefaults
     and we can remember what to set it to the next time viewDidLoad is called.
     */
    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"SwitchKey"]) {
        [onOffSwitch setOn:YES animated:NO];
    } else {
        [onOffSwitch setOn:NO animated:NO];
    }
    [onOffSwitch addTarget:self action:@selector(openswitch:) forControlEvents:UIControlEventValueChanged];
    [self.view addSubview:onOffSwitch];

}

-(IBAction)openswitch:(id)sender
{
    UISwitch *onOffSwitch = (UISwitch *) sender;
    if (onOffSwitch.isOn)
    {
        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"SwitchKey"];
        NSLog(@"on");
    }
    else
    {
        [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"SwitchKey"];
        NSLog(@"off");
    }
} 
```

希望这可以帮助。

# git - Netbeans 使用远程服务器 Git 工作副本

> ID：15213706
> 
> 赞同：0
> 
> 时间：2013-03-05T00:29:31.830
> 
> 标签：git, netbeans

我需要知道是否有一种方法可以使用 Netbeans 管理托管在 Dev Server 中的远程 git 工作副本，而没有项目的本地副本，因此使用本地 netbeans 管理 Dev 中托管的 git 工作副本项目的所有提交服务器。

任何建议都会对我有用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:21:47.703

假设远程服务器使用一些 Unix 或 Linux 变体，您可以使用[SSHFS](https://www.google.com/search?&q=sshfs)将远程目录挂载到本地文件系统上的目录。在大多数情况下，它与本地计算机上的任何其他目录都无法区分。在 Ubuntu 中，您甚至不必使用命令行；打开文件浏览器，然后转到文件菜单，然后选择“连接到服务器”，然后选择“SSH”，填写服务器名称、要挂载的文件夹和凭据（如果需要），一切顺利.

# c# - 正则表达式用匹配索引替换字符

> ID：15213714
> 
> 赞同：6
> 
> 时间：2013-03-05T00:30:20.323
> 
> 标签：c#, regex, replace

我需要接受这个字符串：

```
book_id = ? and author_id = ? and publisher_id = ? 
```

并把它变成这个字符串：

```
book_id = @p1 and author_id = @p2 and publisher_id = @p3 
```

使用此代码：

```
Regex.Replace(input, @"(\?)", "@p **(index of group)**"); 
```

给我组索引的替换模式是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T00:59:21.140

您可以使用带有 a 的方法[`Regex.Replace`以及](http://msdn.microsoft.com/en-us/library/cft8645c.aspx)`MatchEvaluator`一个计数器变量：

```
string input = "book_id = ? and author_id = ? and publisher_id = ?";
string pattern = @"\?";
int count = 1;
string result = Regex.Replace(input, pattern, m => "@p" + count++); 
```

该`m =>`部分是`MatchEvaluator`. 在这种情况下，不需要使用`Match`(which is `m`); 我们只想返回连接的结果并增加计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:59:29.173

如果你想要一个单行解决方案，你可以做类似的事情，但对于大字符串可能会很慢，因为它必须找到“？”的计数。每场比赛

```
 var result = Regex.Replace(input, @"\?", m => "@p" + input.Take(m.Index).Count(c => c == '?')); 
```

退货`"book_id = @p0 and author_id = @p1 and publisher_id = @p2"`

这是我可以看到在不声明外部变量的情况下获取索引的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T03:52:41.410

我使用 StringBuilder 的解决方案还不错，但不是最快也不是最优雅的:(

```
var count = 1;
var sb = new StringBuilder(input);
for (int i = 0; i < sb.Length; i++)
{
    if (sb[j] == '?')
    {
        sb.Remove(i, 1);
        sb.Insert(i, "@p" + (count++));
        i += 3;
    }
}
result = sb.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-13T11:12:18.023

我想我可能有什么...

这个想法是首先将每个索引放在您想要索引的每个位置：

```
Ñ123456Ñ 
```

对于此示例，总共有 6 个项目要索引，因此它是由 Ñ （或查找文本中其他任何地方没有的其他字符）包围的所有数字，最多 6 个。

然后你手动制作第一个Ñ1Ñ，这样正则表达式就有一个起点。这样，算法可以找到最后一个索引并使用它来确定下一个索引：

**寻找：** `(Ñ)([0-9])(Ñ)(([^Ñ]|\r?\n)*?)(Ñ)([0-9]*)\2([0-9])([0-9]*)(Ñ)`

**代替：** `$1$2$3$4$6$8$10`

**文本示例：**

```
Ñ1Ñ
Ñ123456Ñ
Ñ123456Ñ
Ñ123456Ñ
Ñ123456Ñ
Ñ123456Ñ 
```

> 更换一次后：

```
Ñ1Ñ
Ñ2Ñ
Ñ123456Ñ
Ñ123456Ñ
Ñ123456Ñ
Ñ123456Ñ 
```

> 再次更换后：

```
Ñ1Ñ
Ñ2Ñ
Ñ3Ñ
Ñ123456Ñ
Ñ123456Ñ
Ñ123456Ñ 
```

“全部替换”功能对此不起作用，因为它必须一一查找和替换，但我认为它可以完成工作。

然后你只需要删除所有临时的Ñ字符就可以了。

*免责声明：*解决“中间”文本中的换行符的部分`\r?\n`- 是为与 Atom 编辑器一起工作的，因此可能需要针对其他情况进行一些调整。我相信它实际上可以完全删除，因为它包含在 中`[^Ñ]`，但我不确定它是否适用于其他系统。

* * *

**对于多于一位的索引：**

**寻找：** `(Ñ)([0-9]{2})(Ñ)(([^Ñ]|\r?\n)*?)(Ñ)([0-9][0-9])*\2([0-9]{2})([0-9][0-9])*(Ñ)`

**代替：** `$1$2$3$4$6$8$10`

**文本示例：**

```
Ñ01Ñ
Ñ0102030405060708091011121314151617Ñ
Ñ0102030405060708091011121314151617Ñ
Ñ0102030405060708091011121314151617Ñ
... 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-05T00:49:07.290

未经测试：

```
int n, i=1; while( (n=input.IndexOf("?")) != -1) { input = input.Substring(0,n-1) + "@p" + (++i) + input.Substring(n+1); } 
```

一条较长的线，但并非完全不合理。

# c++ - VC++ 与 G++，cout

> ID：15213715
> 
> 赞同：0
> 
> 时间：2013-03-05T00:30:35.533
> 
> 标签：c++, visual-c++, compilation, g++

如果您在 VC++ 中编译此代码，我有一个关于 VC++ 的问题：

```
#include "stdafx.h"
#include <stdlib.h>
//#include <stdio.h>
#include <iostream>
#include <Windows.h>

TCHAR lpBuffer[MAX_PATH];

int _tmain(int argc, _TCHAR* argv[])
{
    DWORD dwBufferLength = 0;
    if(!(dwBufferLength = GetWindowsDirectory(lpBuffer, MAX_PATH)))
        std::cout << "Last error : "<< GetLastError() << std::endl;
    else{
        std::cout << lpBuffer << std::endl;
        /*for(DWORD i = 0; i < dwBufferLength; i++)
            printf("%c", lpBuffer);*/
        std::cout << std::endl;
    }

    system("PAUSE");
    return 0;
} 
```

我只看到“C”，如果我用 g++ 编译它，我会看到“C:\Windows”有什么问题？当然我应该删除g ++下的第一行“#include“stdafx”:)

并将“_tmain”更改为“main”^__^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:40:43.600

修改代码后：

```
#include <iostream>
#include <Windows.h>

int main() {
    char lpBuffer[MAX_PATH];
    DWORD dwBufferLength = 0;

    if(!(dwBufferLength = GetWindowsDirectory(lpBuffer, MAX_PATH)))
        std::cout << "Last error : "<< GetLastError() << std::endl;
    else
        std::cout << lpBuffer << "\n";
    return 0;
} 
```

我使用 VC++ (2012) 和 gcc 4.7.2 (MinGW) 得到相同的结果（“C:\windows”）。

# javascript - 无法创建变量参数迭代器和装饰器类（高级）

> ID：15213723
> 
> 赞同：0
> 
> 时间：2013-03-05T00:31:00.917
> 
> 标签：javascript, iterator, decorator

我有一个 Javascript 类，它接收一个对象作为参数：

```
function convertible(args){
  var self = this;
  $.extend(self, {
    /* many functions that manipulate data */
  });
} 
```

通常，这个类被一个具有这种结构的对象调用

```
var result = new convertible({
  'x':[{'a':[/*...*/],'c':'asdf'}/*...*/],
  'y':[{'a':[/*...*/],'c':10}/*...*/],
  'z':[{'a':[/*...*/],'c':255},{'a':[],'c':255}/*...*/]
}); 
```

其中，该对象中的属性数量在每个请求中都是可变的，并且其内容`c`和内容`a`是未知的。有时，里面`a`会有一些特殊的对象，需要转换，比如：

```
var result = new convertible({
  'z':[{'a':[0, {'PF':/*string to be eval'led*/}],'c':255}]
}); 
```

递归地执行它，以“处理”所有参数，有时在 Webkit 中会导致 RangeError 最大调用堆栈达到错误，因此，`for..in`我不是使用循环手动迭代，而是尝试与装饰器模式一起构思一个辅助迭代器类，所以当我这样做`args.get(0)`或`args.foreach(function(){})`我得到“转换”的 PF 对象（这是一个被 eval 引导的内联函数）时。问题是，有时`a`部分是这样的（为了更清晰的可视化而缩进）：

```
var result = new convertible({
  'z':[
    { 
      'a':[
        [{'PF':/*string to be eval'led*/}],
        {'PF':{/*another object that MIGHT have PF inside*/}}
      ]
    }
  ]
}); 
```

由于生成代码的动态特性，它会导致`PF`变量出现一些“不一致”。当类型为 'PR' 时，它`z`是`a`. 像这样：

```
var result = new convertible({
  'z':[
    { 
      'a':[
        {
          'PR': {
            'z': [
              {'a': [/*...*/], 'c': 0}
            ]
          }
        }
      ]
    }
  ]
}); 
```

我的脑袋短路了，已经在尝试构思这个迭代器/装饰器类了。

# php - 发送欢迎电子邮件 PHP

> ID：15213724
> 
> 赞同：0
> 
> 时间：2013-03-05T00:31:09.127
> 
> 标签：php, mysql, email

目前我有一个简单的 PHP 脚本，它接受用户的电子邮件地址并将其写入 MySQL 数据库。下面的代码一切正常。

我如何才能添加一个功能，通过电子邮件向新订户提供一些信息到他们提供的地址？

```
<?php
require_once 'login.php'; // database information

$db_server = mysql_connect($db_hostname, $db_username, $db_password)
    or die("Unable to connect to MySQL: " . mysql_error());

mysql_select_db($db_database)
  or die("Unable to select database: " . mysql_error());

$email = $_POST['email'];

$sql="INSERT INTO users (email)
VALUES ('$email')";

$result = mysql_query($sql);

if($result){
header('Location: ../thankyou.php');
}
else {
echo "ERROR";
}

mysql_close();
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T03:43:23.240

回答你的问题，应该是这样的

```
email($new_subscribers_email_address,"topic goes here","message goes here"); 
```

顺便说一句，您不应该使用 mysql_ ，并且 mysql_ 将很快从 php 中删除。改用 PDO 或 MySQLi ..

另请注意，您在这里有一个 SQL 注入漏洞

```
$sql="INSERT INTO users (email) VALUES ('$email')"; 
```

解决方案： mysql_real_escape_string ，如

```
$sql="INSERT INTO users (email) VALUES ('".mysql_real_escape_string($email)."')"; 
```

# cakephp - 在模型中结合 $hasOne 和 $hasAndBelongsToMany - 这可能/合法吗？

> ID：15213732
> 
> 赞同：0
> 
> 时间：2013-03-05T00:31:34.473
> 
> 标签：cakephp

我正在使用 cakephp 2.3.0。我在手册中搜索了很长时间，也搜索了 google/stackoverflow。

我对 cakephp 还有些陌生。我一直在努力让 $hasAndBelongsToMany（多对多）工作，而且我确实做到了......哇哦。但是，使用相同的模型，我无法让以下场景正常工作。

我有活动和用户模型。一个活动可以有很多用户。一个用户可以有很多活动。但是，我想在我的网页上的表格中的一行中显示活动列表以及活动的所有者。

活动表包括以下列等：

*   ID
*   姓名
*   地位
*   owner_fk（Users.id 的外键）

用户表包括以下列等：

*   ID
*   用户名
*   密码
*   角色

我的 SQL 看起来像：

```
select usr.username, actv.name 
from users usr, activities actv
where usr.users_id = actv.owner_fk 
```

**活动模型**（用户模型有类似的代码）：

```
class Activity extends AppModel {   
    var $name = 'Activity';

    public $hasAndBelongsToMany = array(
    'User' =>
        array(
            'className'              => 'User',
            'joinTable'              => 'activities_users',
            'foreignKey'             => 'activities_id',
            'associationForeignKey'  => 'users_id',
            'unique'                 => false,
            'conditions'             => '',
            'fields'                 => '',
            'order'                  => '',
            'limit'                  => '',
            'offset'                 => '',
            'finderQuery'            => '',
            'deleteQuery'            => '',
            'insertQuery'            => ''
        )
    ); 
```

我不确定 CakePHP 是否允许在同一模型中混合/匹配，例如...在同一模型中具有 $hasOne 和 $hasAndBelongsToMany。可能有一种简单的方法可以实现我想要做的事情，和/或最佳实践。我已经尝试了一些，但到目前为止还没有运气。

我想在我的控制器的下面的代码中做一些事情，但条件是我上面的 SQL 中的 where 子句。

```
$this->set('results', $this->Activity->find('all')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:16:10.337

从用户模型方向来看，这会更容易。实际上，您是在要求 Cake 获取该用户拥有的所有用户详细信息和活动详细信息。

所以你会有更多类似的东西：

```
$this->set('primary_user_with_activity', $this->Activity->User->find('all')); 
```

根据 Cake 的约定，owner_fk 字段应该是 user_id - 并且应该设置 Activity 模型与用户的 belongs_to 关系来定义所有者。

然后设置 User 模型有一个 has_one 关系来匹配活动模型中的 belongs_to

如果你想添加 has_and_belongs_to_many 关系，你可以这样做 - 给它一个不同于 belongs_to 关系的别名。

```
 public $hasAndBelongsToMany = array(
        'People' => array(
            'className' => 'User',
        )
    ); 
```

更多细节在这里： [http ://book.cakephp.org/2.0/en/models/associations-linking-models-together.html](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)

确实需要一些时间来适应，但遵循约定确实很有帮助。

# numpy - numpy中对数直方图的线性回归

> ID：15213733
> 
> 赞同：3
> 
> 时间：2013-03-05T00:31:38.827
> 
> 标签：numpy, histogram, linear-regression

我有一个分布（用 numpy.histogram 绘制）在对数轴上绘制时似乎是线性的。我想计算并在此直方图上绘制线性回归，以找出线性回归的参数以及 r 平方。

我尝试了不同的方法（对 numpy.histogram 返回的值使用 polyfit），环顾四周，虽然这可能是一个非常常见的问题，但我似乎找不到一个简单的方法来做到这一点。有没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:35:25.483

你能在值的日志中加入一条线吗？

```
log y = a log x + b (fit a and b)
=> y = x^a e^b 
```

# ios - ios facebook loginUI 是空白的？

> ID：15213736
> 
> 赞同：0
> 
> 时间：2013-03-05T00:31:50.667
> 
> 标签：ios, facebook

我正在使用最新的 facebook SDK 为 IOS 开发应用程序。

关键是允许用户将消息和图像一起发布到他们的墙上。

我正在使用 FBSession.openActiveSessionWithReadPermission 建立连接，之后应用程序假设使用 FBNativeDialogs 发布。但我不太确定为什么我一直得到这个结果：http: [//img90.imageshack.us/img90/4623/screenshot2013030510421.png](http://img90.imageshack.us/img90/4623/screenshot2013030510421.png)

登录 UI 应该会询问我的权限，不是吗？相反，它只显示一个空白页。openActiveSession 的completionHandler 也没有被调用，表明loginUI 没有返回到我的应用程序。

我对facebook集成相当陌生，请帮助我。

我正在使用以下代码建立连接，捆绑 ID 和应用 ID 已保存到 facebook 应用控制台：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    [FBSession openActiveSessionWithReadPermissions:nil
                                   allowLoginUI:YES
                              completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                  [self sessionStateChanged:session state:state error:error];
                              }];

} 
```

这一步会导致上面显示的空白登录 UI，并且没有调用 completionHandler。

我还有其他步骤来获得发布权限并使用本机对话框发布消息，但由于我无法通过此步骤，我认为没有必要包含它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:38:27.200

检查了facebook设置，结果我什至没有登录，这么长时间我只是以为我登录了，这让我很痛苦......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:49:37.577

在 Facebook 教程中 openActiveSessionWithReadPermissions:allowLoginUI:completionHandler: 在 openSession 方法的 appDelegate 中被调用，该方法由登录按钮触发。您从 viewDidLoad 中的视图控制器调用它。它确实应该由按钮触发，而不是视图加载。您是否尝试过类似的方法：

```
- (IBAction)performLogin:(id)sender{

SCAppDelegate* appDelegate = [UIApplication sharedApplication].delegate;
[appDelegate openSession]; 
```

使用 openActiveSessionWithReadPermissions：在代表 openSession 方法中实现？此外，您可能想发布更多代码。

# c# - Moq 中的何时条件方法

> ID：15213739
> 
> 赞同：0
> 
> 时间：2013-03-05T00:32:05.050
> 
> 标签：c#, unit-testing, mocking, nunit, moq

我试图弄清楚如何使用 When 方法供我使用。

```
When(Func<bool> condition); 
```

此处的另一篇文章有​​一个使用 When 方法的示例

```
var mockedService = new Mock<IFormatProvider>();

mockedService.When(() => DateTime.Now.Hour < 12).Setup(x => x.GetFormat(typeof(string))).Returns(null); 
```

我想要做的是我有一个名为 x 的变量。我想使用 When 方法，因此它仅在 X 不为 Null 时执行操作。

例如

```
 mockedService.When(()=> !null x).Returns(x)
      or
      mockedService.When(condition => x).Returns(x); 
```

以上两行代码都不起作用，语法不正确。知道如何正确编写它。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T00:43:45.453

您必须设置方法返回：

```
mockedService.When(() => null != x)
     .Setup(s => s.GetFormat(It.IsAny<Type>()))
     .Returns(x); 
```

另一种方式：

```
mockedService
     .Setup(s => s.GetFormat(It.Is<Type>(t => x != null)))
     .Returns(x); 
```

# ios - ios中的instanceViewControllerWithIdentifier崩溃

> ID：15213740
> 
> 赞同：1
> 
> 时间：2013-03-05T00:32:12.390
> 
> 标签：ios, uitableview

我在 iOS 中做一个项目，主要项目是一个标签栏应用程序，其中两个标签有一个导航控制器、一个 UItableview 和一个详细视图。当单击单元格以转到详细视图时，会出现此问题。我的应用程序崩溃。这就是我所做的：

1.  我把 UITableView
2.  我将表格嵌入到导航控制器中
3.  我创建详细视图
4.  我手动创建segues
5.  我命名segues
6.  我将 Storyboard ID 添加到每个视图控制器。

然后在我的 UItableViewController 中添加代码以从 sqlite 数据库加载数据。我把下一个代码转到详细视图：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    DetailView * newVC = [self.storyboard instantiateViewControllerWithIdentifier:@"DetailView"];
    [self.navigationController pushViewController:DetailView animated:YES];

} 
```

这是错误：由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[UITableViewController loadView] 加载了“tzk-6A-7EG-view-Jev-6n-BAZ”笔尖，但没有获得 UITableView。

我还应该做什么？也许我错过了一些代码，我对 iOS 很陌生，这是我的第一个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:47:26.703

确保您输入的名称正确。我将遵循的步骤

1.  添加一个 UIViewController/UITableviewcontroller
2.  用导航控制器嵌入它
3.  添加一个tableview（连接数据源并委托和出口它存在）
4.  添加storyboardId
5.  复制粘贴该名称并将其添加到实现推送的代码中

从模拟器构建中删除应用程序并再次运行。

# javascript - Angularjs dbl-click 在 chrome 中工作，但不是 firefox

> ID：15213744
> 
> 赞同：0
> 
> 时间：2013-03-05T00:32:44.347
> 
> 标签：javascript, firefox, cross-browser, angularjs

好的，所以我不确定从哪里开始。

在我的控制器中，我有这样的功能：

```
 $scope.newEle = function(e){
      if(! angular.element(e.srcElement).hasClass('existing')){
        var width = (window.innerWidth-700)/2;
        if($scope.items[0]){
          $scope.e = jQuery.extend({}, $scope.items[0]); 
        }else{
          $scope.e = {}; 
        }
      }
    }; 
```

这个函数在一个巨大的 div 上。div 中的项目位于不同的位置。

当您双击 div 内的项目（或 div 本身内的空白区域）时，如果它具有“现有”类，则它不应该做任何事情，但如果该项目没有类 - 该功能应该继续。

这适用于chrome，但不适用于firefox。

工作示例是[http://engine404prod.herokuapp.com](http://engine404prod.herokuapp.com)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:59:09.077

只是为了完整起见，Elliot 链接到的 SO 帖子指出应该使用以下代码：

```
var target = event.target || event.srcElement; 
```

这将适用于所有浏览器。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:54:50.393

供将来参考 - srcElement 在 FF 中不起作用。感谢@mclurmorin 的帮助 -[我怎样才能让 event.srcElement 在 Firefox 中工作，这是什么意思？](https://stackoverflow.com/questions/5301643/how-can-i-make-event-srcelement-work-in-firefox-and-what-does-it-mean)

# javascript - HTML JavaScript 按钮不工作，以及一个莫名其妙的错误

> ID：15213745
> 
> 赞同：-2
> 
> 时间：2013-03-05T00:32:44.530
> 
> 标签：javascript, html

每个人。

我目前正在构建一个 Javascript HTML 页面。但是我无法让按钮工作，我不知道为什么。Javascript 部分中还有一个“预期的”；“”错误。我已经评论了错误发生的位置。

这是页面代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script language="javascript" type="text/javascript">
// <![CDATA[

        function btnClear_onclick() {
            fdegrees.focus();
            fdegrees.value = "";
            cdegrees.value = "";
        }

        function checkNumber(theTextBox) {
            //check the text box for a value, if none alert user that there is a invalid entry
            //the 'isNaN' checks to see if there is a number entered in the text box, and returns a boolean value
            //as needed. (false is invalid, and true is valid)
            //the 'isNaN' stands for 'is Not a Number'
            if (theTextBox.value == "" || isNaN(theTextBox.value) || theTextBox.value.toFixed(1)) {
                alert("Invalid Value in Text Box");
                theTextBox.select();
                return false;
            }
            //continue on with the calculations if valid using the btn Event.
            else
                return true;
        }

        function btnCompute_onclick(theForm) {

            if (checkNumber(theForm.fdegrees)) {
                num1 = parseInt(theForm.fdegrees.value);
                answer = (num1 - 32) * 5 / 9;
                theForm.cdegrees.value = answer;
                }
            else if (checkNumber(theForm.cdegrees)) {//error happens here on the square bracket
                num2 = parseInt(theForm.cdegrees.value);
                answer = num2 * 9 / 5 + 32;
                theForm.fdegrees.value = answer;
                }

        }

// ]]>
    </script>
</head>
<body>

    <p style="text-align: center">
        Fahrenheit/Celsius Converter</p>
    <p style="text-align: left; margin-left: 280px">
        Degrees Fahrenheit:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <input id="fdegrees" type="text" /></p>
    <p style="text-align: left; margin-left: 280px">
        Degrees Celsius:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <input id="cdegrees" type="text" /></p>
    <p style="text-align: left; margin-left: 280px">
        <input id="btnCompute" type="button" value="Compute" onclick="btnCompute_onclick(this.form)" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <input id="btnClear" type="button" value="Clear" onclick="btnClear_onclick(this.form)" /></p>

</body>
</html> 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:37:09.313

`else`关键字不使用语句：

`if(...) { } else { }`

该行应该是`else if`：

`else if(checkNumber(theForm.cdegrees)) {...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:46:59.487

1.  你没有`<form>`所以不能用`this.form`。在您的输入周围添加`<form>`标签。
2.  您的表单输入需要`name`由`Form`元素访问的属性
3.  您应该将`theForm`作为参数添加到您的`btnClear_onclick()`函数并通过它访问输入
4.  `Input.value`返回一个字符串。字符串没有方法`toFixed()`。这是一种方法`Number`

这是一个工作示例 - [http://jsfiddle.net/3x86T/1/](http://jsfiddle.net/3x86T/1/)

# github - 在 Cygwin 中使用 Git

> ID：15213748
> 
> 赞同：3
> 
> 时间：2013-03-05T00:33:16.737
> 
> 标签：github, cygwin

我正在尝试将 GitHub 与运行 Cygwin 的 Windows 7 计算机结合使用。当我使用 git for windows 附带的“Powershell.exe”时，我设法让 GitHub 正常工作。但是，当我在 Cygwin 时，我无法让它工作。问题似乎与身份验证有关，因为每次我尝试克隆、推送或拉取时，我都会得到`Permission denied (publickey).`.

非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:52:30.430

尝试使用 Cygwin 生成一个新的！

# java - Spring @RequestBody 和默认值

> ID：15213752
> 
> 赞同：4
> 
> 时间：2013-03-05T00:33:32.223
> 
> 标签：java, spring, spring-mvc

当接收到作为 @ResponseBody 参数的详细信息时，Spring 创建一个正确类型的新对象（例如`public void createUser(@RequestBody User user)`。我将数据作为 JSON 发送到服务器，Spring 按照指定创建新的用户对象。

我的问题是，无论如何让 Spring 忽略我拥有的自动生成的字段（如 createDate 等）。因此，例如，如果我只传入`{"username":"sam"}`而不是其他任何内容，我想要一个用户对象，它只填充了用户名字段，而没有其他字段（即使那是无效的）。

我问这个的原因是因为我的用户从另一个我无法触及的对象继承了一些默认的自动生成属性，并且我需要一个对象，除了来自请求的字段之外，所有字段都为空。**更新：**然后我可以将新创建​​的对象与 JpaRepository 中的对象合并（忽略空值）。

谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:02:53.010

如果返回 User 对象，默认情况下会自动包含所有字段，您无法更改它。但是您可以只返回一个填充了 uername 的 HashMap。

```
@ResponseBody public Map createUser(@RequestBody User user) {
    ...
    Map userCreated = new HashMap();
    userCreated.put("username", user.getUsername());
    return userCreated;
} 
```

换句话说，您可以定义并创建一个新的 UserForm 对象来执行您期望返回的操作，如下所示。

```
public class UserForm{

    private String username;

    public UserForm(User user){
        this.username = user.getUsername();
    }

    public void setUsername(String username){
        this.username = username;
    }

    public String getUsername(){
        return this.username;    
    }
}

@ResponseBody public UserForm createUser(@RequestBody User user) {
    ...

    return new UserForm( user );
} 
```

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:38:42.663

它确实有办法做到这一点。例如：`@initBinder or convertService`，但它会更复杂，而且我也不知道执行该代码的确切实现。虽然最简单的方法是创建一个新类，可以称为：`TmpUser`并且只有1个字段：userName，您使用该类来接受请求数据，并将数据复制到用户，然后它就可以满足您的要求。你可以`Spring utils. BeanUtils.copyProperties()`用来做副本。

# ruby-on-rails - 简化用于格式化电话号码的代码

> ID：15213753
> 
> 赞同：2
> 
> 时间：2013-03-05T00:33:39.417
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想要完成的是获取一个字符串，然后解析它，所以它只是数字。然后在显示它时，我将使用 number_to_phone 并且它们都是相同的。

到目前为止，我在我的模型中定义了这个：

```
 def parse_phone_nums
    self.main_phone = self.main_phone.gsub(/[.\-()\W]/, '') if self.main_phone
    self.alt_phone = self.alt_phone.gsub(/[.\-()\W]/, '') if self.alt_phone
    self.main_phone = "925" + self.main_phone if self.main_phone.length == 7
    self.alt_phone = "925" + self.alt_phone if self.alt_phone.length == 7
  end 
```

并在我的控制器中调用它来创建和更新操作。我觉得这里好像有很多重复，并且想知道如何将代码减少到尽可能 DRY。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:48:21.763

许多可能的解决方案，大致：

```
def clean_up_phone(num)
  return unless num
  num = num.gsub(/[.\-()\W]/, '')
  num.length == 7 ? "925#{num}" : num
end 
```

有多种方法可以使用此方法，包括自动设置、回调期间等。

我不确定正则表达式是您真正想要的，人们为电话号码输入了很多东西。您可能希望在验证之前对其进行更多处理，然后再添加区号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:55:00.410

我会选择这样的东西，因为它允许将来扩展（另一个区号？检测用户提交的区号等）并且易于测试。

而且由于很容易忘记用户可能使用的字符的匹配器，因此我将使用不同的方法从给定的字符串中提取数字。

```
def parse_phone_nums
  self.main_phone = parse_phone_number(self.main_phone) if self.main_phone
  self.alt_phone  = parse_phone_number(self.alt_phone)  if self.alt_phone
end

private

def parse_phone_number(string)
  number = extract_number(string)
  prefix_area_code(number)
end

def extract_number(string)
  characters = string.split("")
  characters.reduce("") { |memo, char| "#{memo}#{char}" if numeric?(char) }
end

def prefix_area_code(number)
  prefix = number.length == 7 ? "925" : ""
  "#{prefix}#{number}"
end

def numeric?(string)
  Float(string) != nil rescue false
end 
```

理想情况下，我会将所有这些`private`方法提取到一个自己的类中，比如 PhoneNumberParser。

如果您认为`def_phone_nums`不够 DRY，或者您有更多电话号码，则应该可以：

```
def parse_phone_nums
  phones = %w[main alt]
  phones.each do |phone|
    current = self.send("#{phone}_phone")
    next unless current

    parsed = parse_phone_number(current)
    self.send("#{phone}_phone=", parsed)
  end
end 
```

# php - 预期的 CodeIgniter 会话行为？

> ID：15213757
> 
> 赞同：-1
> 
> 时间：2013-03-05T00:34:40.660
> 
> 标签：php, codeigniter

我有一个会话，我正在为会话使用数据库。我在会话中使用 userdata 来存储用户名和“登录”标志。我正在自动加载会话库，所以我不必显式加载它。

我在控制器中使用它来检查“登录”和视图，以显示用户名，这导致 CI​​_Session 被加载两次并导致会话被破坏。两次 CI_Session 加载它都尝试更新会话和数据库，第一次成功，第二次失败并破坏了会话。

我相信我违反了控制器和视图之间的分离，我通过仅使用控制器中的会话库并将带有用户名的变量传递给视图来解决了这个问题。

但我的问题是：我所做的分析是否正确？我是否违反了控制器和视图之间的分离，只要我不再这样做我应该没问题，或者这可能会在其他情况下再次发生？

**注意：我试图仔细问这个问题，我正在寻找技术答案而不是意见，我不希望这成为关于这个与那个等的讨论。**

根据要求添加代码：

来自控制器 Admin.php 的片段

```
class Admin extends CI_Controller {
  function __construct() {
    parent::__construct();
    $this->load->model('users');
    $this->id = $this->session->userdata('id');
    $this->authorized = array('waccess' => $this->users->authorizedUser($this->id, 'waccess'),
                              'ceditor' => $this->users->authorizedUser($this->id, 'ceditor'),
                              'uadmin' => $this->users->authorizedUser($this->id, 'uadmin'),
                              'forms' => $this->users->authorizedUser($this->id, 'forms'));

  }
  public function index() {
    log_message('debug', 'Admin->index');
    $this->load->view('framework', array(
      'head' => $this->load->view('head', array('title' => 'Administrator', 'stylesheet' => 'admin.css', 'javascript' => 'jquery-ui-1.8.16.custom.min.js'), true),
      'header' => $this->load->view('headerAdmin', array('active' => 'Home', 'authorized' => $this->authorized), true),
      'body' => $this->load->view('adminHome', '', true),
      'midBody' => $this->load->view('blankMid', '', true),
      'footer' => $this->load->view('footer', '', true)
    ));
  } 
```

查看 adminHome.php 的片段

```
<div id="main">
  <div class="content">
    <h1>Employee Interface</h1>
<? if(!$this->session->userdata('loggedin')): ?>
....
<? else: ?>
    <p>Welcome <?=$this->session->userdata('fname')?> <?=$this->session->userdata('lname')?></p>
<? endif; ?>
    <p>Use the menu above to select the various employee and administrative options available to you</p>
  </div>
</div> 
```

我添加了很多调试代码，但没有对 CodeIgniter 代码进行其他更改以查看发生了什么，以下是生成的日志条目：

```
DEBUG - 2013-03-04 19:54:31 --> Config Class Initialized
DEBUG - 2013-03-04 19:54:31 --> Hooks Class Initialized
DEBUG - 2013-03-04 19:54:31 --> Utf8 Class Initialized
DEBUG - 2013-03-04 19:54:31 --> UTF-8 Support Enabled
DEBUG - 2013-03-04 19:54:31 --> URI Class Initialized
DEBUG - 2013-03-04 19:54:31 --> Router Class Initialized
DEBUG - 2013-03-04 19:54:31 --> Output Class Initialized
DEBUG - 2013-03-04 19:54:31 --> Security Class Initialized
DEBUG - 2013-03-04 19:54:31 --> Input Class Initialized
DEBUG - 2013-03-04 19:54:31 --> Global POST and COOKIE data sanitized
DEBUG - 2013-03-04 19:54:31 --> Language Class Initialized
DEBUG - 2013-03-04 19:54:31 --> Loader Class Initialized
DEBUG - 2013-03-04 19:54:31 --> Helper loaded: url_helper
DEBUG - 2013-03-04 19:54:31 --> loading: session
DEBUG - 2013-03-04 19:54:31 --> Session Class Initialized
DEBUG - 2013-03-04 19:54:31 --> Helper loaded: string_helper
DEBUG - 2013-03-04 19:54:31 --> Database Driver Class Initialized
DEBUG - 2013-03-04 19:54:31 --> Session using database
DEBUG - 2013-03-04 19:54:31 --> Session matching on [session_id]: b791b771c776ca4166a73424315d1110
DEBUG - 2013-03-04 19:54:31 --> Session matching on [user_agent]: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22
DEBUG - 2013-03-04 19:54:31 --> Session Updating
DEBUG - 2013-03-04 19:54:31 --> Session Data: [session_id] => b791b771c776ca4166a73424315d1110
DEBUG - 2013-03-04 19:54:31 --> Session Data: [ip_address] => 184.4.66.94
DEBUG - 2013-03-04 19:54:31 --> Session Data: [user_agent] => Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22
DEBUG - 2013-03-04 19:54:31 --> Session Data: [last_activity] => 1362444838
DEBUG - 2013-03-04 19:54:31 --> Session Data: [user_data] => 
DEBUG - 2013-03-04 19:54:31 --> Session Data: [id] => 15
DEBUG - 2013-03-04 19:54:31 --> Session Data: [fname] => Test
DEBUG - 2013-03-04 19:54:31 --> Session Data: [lname] => Test
DEBUG - 2013-03-04 19:54:31 --> Session Data: [email] => t
DEBUG - 2013-03-04 19:54:31 --> Session Data: [loggedin] => 1
DEBUG - 2013-03-04 19:54:31 --> Session Update Completed
DEBUG - 2013-03-04 19:54:31 --> Session Data: [session_id] => 7875df72dc94ca7bd149debe69865a2e
DEBUG - 2013-03-04 19:54:31 --> Session Data: [ip_address] => 184.4.66.94
DEBUG - 2013-03-04 19:54:31 --> Session Data: [user_agent] => Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22
DEBUG - 2013-03-04 19:54:31 --> Session Data: [last_activity] => 1362444871
DEBUG - 2013-03-04 19:54:31 --> Session Data: [user_data] => 
DEBUG - 2013-03-04 19:54:31 --> Session Data: [id] => 15
DEBUG - 2013-03-04 19:54:31 --> Session Data: [fname] => Test
DEBUG - 2013-03-04 19:54:31 --> Session Data: [lname] => Test
DEBUG - 2013-03-04 19:54:31 --> Session Data: [email] => t
DEBUG - 2013-03-04 19:54:31 --> Session Data: [loggedin] => 1
DEBUG - 2013-03-04 19:54:31 --> Session routines successfully run
DEBUG - 2013-03-04 19:54:31 --> Controller Class Initialized
DEBUG - 2013-03-04 19:54:31 --> Model Class Initialized
DEBUG - 2013-03-04 19:54:31 --> loading: session
DEBUG - 2013-03-04 19:54:31 --> Session Class Initialized
DEBUG - 2013-03-04 19:54:31 --> Database Driver Class Initialized
DEBUG - 2013-03-04 19:54:31 --> Session using database
DEBUG - 2013-03-04 19:54:31 --> Session matching on [session_id]: b791b771c776ca4166a73424315d1110
DEBUG - 2013-03-04 19:54:31 --> Session matching on [user_agent]: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22
DEBUG - 2013-03-04 19:54:31 --> Session not found, destroying instance
DEBUG - 2013-03-04 19:54:31 --> Session routines successfully run
DEBUG - 2013-03-04 19:54:31 --> Controller Class Initialized
DEBUG - 2013-03-04 19:54:31 --> Admin->index
DEBUG - 2013-03-04 19:54:31 --> File loaded: application/views/head.php
DEBUG - 2013-03-04 19:54:31 --> File loaded: application/views/headerAdmin.php
DEBUG - 2013-03-04 19:54:31 --> File loaded: application/views/adminHome.php
DEBUG - 2013-03-04 19:54:31 --> File loaded: application/views/blankMid.php
DEBUG - 2013-03-04 19:54:31 --> File loaded: application/views/footer.php
DEBUG - 2013-03-04 19:54:31 --> File loaded: application/views/framework.php
DEBUG - 2013-03-04 19:54:31 --> Final output sent to browser
DEBUG - 2013-03-04 19:54:31 --> Total execution time: 0.0793 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:34:05.523

尝试更改配置设置：

```
$config['sess_match_useragent'] = FALSE; 
```

我的猜测是您的视图中有某种代码或其他脚本或浏览器插件会弄乱用户代理检查。这会导致会话匹配不匹配，导致结果`Session not found, destroying instance`如您所见，从而导致您的错误。

当然，此更改的结果是会话安全性降低，因此如果安全性是一个大问题，您当然可以进一步研究导致问题的原因。

您可以在其他帖子中找到信息...

Googlechrome 框架是原因（默认情况下是 Bootstrap 模板的一部分）： [更改页面时在 IE 10 中销毁 Codeigniter 会话](https://stackoverflow.com/questions/14528928/codeigniter-sessions-being-destroyed-in-ie-10-when-changing-pages)

FirePHP 扩展是原因： [http ://blog.tiger-workshop.com/firephp-firefox-extension-causing-codeigniter-session-lost/](http://blog.tiger-workshop.com/firephp-firefox-extension-causing-codeigniter-session-lost/)

# amazon-ec2 - ElasticSearch 消失/崩溃——找不到日志文件或任何其他信息

> ID：15213764
> 
> 赞同：16
> 
> 时间：2013-03-05T00:35:21.393
> 
> 标签：amazon-ec2, elasticsearch

我在我的 EC2 服务器上运行 ElasticSearch。我无法理解 ElasticSearch 的日志记录/调试。

有时，服务会在运行好几天后消失（我预计它会崩溃）。例如：

```
# curl -XGET http://localhost:9200/
curl: (7) couldn't connect to host 
```

根据[这个 ElasticSearch page](http://www.elasticsearch.org/guide/reference/setup/configuration.html)，我希望我的日志可以在`/var/log/elasticsearch`......但是......

```
# ls /var/data/elasticsearch
ls: /var/data/elasticsearch: No such file or directory 
```

我没有`/config/logging.yml`以任何方式更改文件。ElasticSearch 以 root 身份运行，因此权限应该没有问题。

我错过了什么？

* * *

根据 imotov 的回复，我在`/root/elasticsearch/elasticsearch-0.20.5/logs`……找到了我的日志文件，但正如他所预测的那样，它们非常无用。

我检查了我的 Java 版本：

```
java version "1.6.0_14"
Java(TM) SE Runtime Environment (build 1.6.0_14-b08)
Java HotSpot(TM) 64-Bit Server VM (build 14.0-b16, mixed mode) 
```

看起来这是一个非常旧的版本，我正在努力升级它。

我还查看了我的内存图

![在此处输入图像描述](../Images/fd649e2167845b8f67f11056561ed916.png)

我们可以看到在 ES 死亡之前有一个奇怪的峰值。我试图在这里找到源头。唯一的其他进程应该是节点；它们的上限分别为 4Gb 和 1.2Gb（如您所见，一旦 ES 死亡并且只剩下节点，RAM 就会下降到 1.2Gb）。因此，要么 ElasticSearch 超过了 4Gb，要么其他原因导致内存激增......

FWIW，我正在使用 m1.large 实例（8GB RAM）。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-05T04:12:03.950

如果您运行相对较新版本的 elasticsearch，您应该能够通过运行以下命令找到日志文件的位置

```
curl -s "localhost:9200/_nodes/_local/settings?pretty=true" | fgrep path.logs 
```

但是如果 elasticsearch 突然消失，你很可能在这些日志中找不到任何东西。如果您运行的是较旧版本的 java（一岁或以上），您的 java 进程很可能崩溃。发生这种情况时，JVM 通常会**`hs_err_pidXXXX.log`** 在您的硬盘驱动器上留下命名的文件（通常在`/tmp/`Linux 上。看看您是否可以找到任何文件并尝试将 Java 升级到最新版本。

elasticsearch突然消失的第二个可能原因是oom-killer。当系统内存不足时，它会启动并杀死最大的进程（在您的情况下为 elasticsearch）。检查 syslog 和 kern.log 大约在 elasticsearch 上次消失的时间。如果您看到这样的消息

```
Out of memory: Kill process 1234 (java) score 567 or sacrifice child 
```

您可能需要减少 elasticsearch 堆大小以将更多内存留给操作系统或升级到更大的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-19T18:43:30.240

我遇到了同样的麻烦：

*   更新的 JAVA 没有帮助
*   从 openJDK 迁移到 oracle 没有任何改变
*   内存消耗终于OK了
*   任何地方都没有错误消息，只是 JVM 随机崩溃

我的解决方案是删除 sigar lib ：

```
cd    
sudo mv /usr/share/elasticsearch/lib/sigar .
sudo service elasticsearch restart 
```

既然，一切都很顺利，唯一的影响是：我失去了 CPU 监控。ElasticSearch 1.5.1 在带有 Ubuntu 14.04 (OpenVZ) 的 VPS 上运行。

更新 1：我仍然需要使用 elasticsearch 1.5.2 删除 sigar lib

更新 2：要弄清楚，在启动 elasticsearch 时添加这些选项：

-XX:HeapDumpPath=./java_pid.hprof

堆转储的目录或文件名的路径。可管理。

-XX:-HeapDumpOnOutOfMemoryError

抛出 java.lang.OutOfMemoryError 时将堆转储到文件。

将有助于调试

# ruby-on-rails - 使用formtastic如何在自定义类中包装标签输出？

> ID：15213765
> 
> 赞同：2
> 
> 时间：2013-03-05T00:35:24.903
> 
> 标签：ruby-on-rails, formtastic

现在我正在输出 3 个带有 formtastic 的单选按钮。

```
<label for="exercise_log_entries_attributes_0_difficulty_medium">
 <input checked="checked" class="custom radio" data-placeholder="Difficulty" id="exercise_log_entries_attributes_0_difficulty_medium" name="exercise[log_entries_attributes][0][difficulty]" type="radio" value="Medium">
 Medium
</label> 
```

我想将“中等”包装在自定义类中。我怎样才能做到这一点？

想出了答案：

必须使用`member_label`：

```
member_label: Proc.new {|a| "<span class='custom radio'>#{a}</span>".html_safe} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:02:26.807

弄清楚了：

```
member_label: Proc.new {|a| "<span class='custom radio'>#{a}</span>".html_safe} 
```

# django - Django /admin/ 页面未显示

> ID：15213767
> 
> 赞同：5
> 
> 时间：2013-03-05T00:35:30.760
> 
> 标签：django, admin

我正在尝试遵循“[编写你的第一个 Django 应用程序，第 2 部分](https://docs.djangoproject.com/en/dev/intro/tutorial02/)”，但我似乎碰壁了。

当我的服务器运行时，URL`domain:8000/admin/`返回与 完全相同的内容`domain:8000/`，而不是向我显示管理站点。

什么会导致这个问题，我需要做些什么来确保我的 /admin/ URL 加载管理站点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T04:31:40.553

首先：在您的 INSTALLED_APPS 元组中，您必须在 settings.py 中启用：`'django.contrib.admin'`。

第二：您必须`python manage.py syncdb`在启用 Django 管理应用程序后运行。

最后：要正确设置您的管理员，请确保您的 urls.py 看起来像这样：

```
from django.conf.urls.defaults import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',

    #YOUR URLS GO HERE 

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

# jquery-ui - 如何关闭 jqGrid 的列突出显示（悬停时）？

> ID：15213770
> 
> 赞同：2
> 
> 时间：2013-03-05T00:35:47.883
> 
> 标签：jquery-ui, jqgrid

问题的标题很好地总结了它（有点）。如果启用了 jQuery 主题，如何删除 jqGrid 中列的悬停效果以及鼠标悬停的手？

通过编辑与 jqGrid 关联的 css，此更改不得影响可能在同一页面上或系统范围内的其他网格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:35:07.193

[我在这里](https://stackoverflow.com/a/7999036/315935)回答了同样的问题，但是因为这个问题是包含多个问题的“累积”问题，所以很难在 stackoverflow 上找到。

jqGrid 使用[jQuery.hover](http://api.jquery.com/hover/)绑定`mouseenter`到作为列标题`mouseleave`的`<th>`元素（参见代码[行](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.base.js#L2278)）。因此，只需在创建网格后取消绑定事件即可。为此，可以使用如下代码

```
$($("#gridId")[0].grid.hDiv).find(".ui-jqgrid-labels th.ui-th-column")
    .unbind("mouseenter")
    .unbind("mouseleave"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:58:14.070

CSS 类 `.ui-jqgrid .ui-jqgrid-bdiv .ui-state-hover`，您可以覆盖它们或删除有问题的部分。

如果您只想将此更改应用于一个网格，您可以

```
#GridName .ui-state-hover {..... 
```

# c++ - std::rethrow_exception 因嵌套线程而失败

> ID：15213772
> 
> 赞同：7
> 
> 时间：2013-03-05T00:36:01.630
> 
> 标签：c++, multithreading, exception, c++11, visual-studio-2012

我有一个程序需要将异常从任何未捕获的线程传播到主线程，以便它可以向用户提供有关它失败的原因并安全关闭的信息。我的`InterThreadException`处理程序似乎工作，但只有当抛出异常的线程由主线程直接产生时。

处理程序在所有情况下`InterTheadException`都被正确调用，通过将异常指针传递给它来发出异常传播的信号，并且主线程接收到它已收到新异常的通知，但`std::rethrow_exception`对异常指针的调用只是失败了并且似乎什么都不做。我已经测试过从这两个不同的线程中抛出完全相同的异常，无论我抛出什么问题似乎都仍然存在。

我怀疑我对应该如何使用异常指针有一个基本的误解，但我不确定。

这是我的`InterThreadExceptionHandler`.

```
class InterThreadExceptionHandler : NonCopyable
{
public:
    InterThreadExceptionHandler();
    ~InterThreadExceptionHandler();

    //
    // Sends an exception into this handler, informing it that 
    //this exception has been caught
    // and may be propagated to another thread
    //
    void sendException(std::exception_ptr exception);

    //
    // Freezes the calling thread until an exception has been sent,
    //then rethrows said exception
    //
    void waitForException();

private:
    std::vector<std::exception_ptr> sentExceptions; 
    std::mutex sentExceptionsMutex;

    Semaphore sentExceptionsCounter;
};

InterThreadExceptionHandler::InterThreadExceptionHandler()
{
}
InterThreadExceptionHandler::~InterThreadExceptionHandler()
{
}

void InterThreadExceptionHandler::sendException(std::exception_ptr exception)
{
    ScopedLock lock(this->sentExceptionsMutex);
    this->sentExceptions.push_back(exception);
    this->sentExceptionsCounter.give();
}

void InterThreadExceptionHandler::waitForException()
{
    this->sentExceptionsCounter.take();
    ScopedLock lock(this->sentExceptionsMutex);

    assert( this->sentExceptions.size() > 0 );

    std::exception_ptr e = this->sentExceptions[0];
    this->sentExceptions.erase(this->sentExceptions.begin());
    if (e == std::exception_ptr())
    {
        throw std::exception("Invalid exception propagated!");
    }
    std::rethrow_exception(e);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:25:00.490

抱歉，这不是您问题的直接答案，但无论如何它可能会有所帮助。

如果我通过捕获异常、检查返回码等方式检测到线程中的运行时错误，我会让该线程冻结整个进程。我还将让它关闭 ftracing（dtrace 的 Linux 克隆），以便保留我可以获得的任何跟踪日志，以解决问题。恐怕我不知道 Windows 等价物是什么。然后我可以附加一个调试器并环顾四周看看发生了什么，甚至可能更正一个值并继续执行。

它在已部署的代码中不是那么有用，但在开发过程中非常有用。对问题的看法很好，因为一切都“按原样”存在，没有堆栈展开，其他线程没有太多机会到达任何地方，等等。这可以使故障识别更容易。对于已部署的代码，我可能会引发核心转储（我倾向于在 unixy 上运行）。显然，如果需要进行某种程度的清理，那就不好了。

# html - 样式不适用于列表

> ID：15213774
> 
> 赞同：0
> 
> 时间：2013-03-05T00:36:14.607
> 
> 标签：html, css

我有以下结构的html：

```
<div class="property-desc clearfix">
        <div class="left">
            <ul class="prop-iconlist">
                <li class="pdf"><a href="#">Milk</a></li>
                <li class="text"><a href="#">Eggs</a></li>
                <li class="htm"><a href="#">Cheese</a></li>
                <li class="doc"><a href="#">Vegetables</a></li>
                <li class="text"><a href="#">Fruit</a></li>
            </ul>
        </div>
    </div> 
```

我正在尝试将样式应用于列表项中的 a 标签：

```
.prop-iconlist li a {
text-decoration: none;
font-size: 12px;
color: 
#676767;
} 
```

但不知何故，a of property-desc .left 的样式似乎适用于它。

```
.property-desc .left a {
font-weight: bold;
color: 
#5473ba;
padding: 0;
margin: 0;
font-weight: 12px;
text-decoration: none;
} 
```

我如何将我想要的样式应用于列表项中的 a？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T07:17:39.640

`.prop-iconlist li a`, 这个选择器不如`.property-desc .left a`. 结果，第一个选择器不起作用。

要解决此问题，您可以使第一个选择器比最后一个选择器更具体，或者使最后一个选择器比第一个选择器更不具体。无论哪种方式都可以正常工作。

`.left .prop-iconlist li a`（比 更具体的第一个选择器`.property-desc .left a`，所以它会起作用）

`.left a`（最后一个选择器不如`.prop-iconlist li a`，所以这个选择器不起作用，第一个选择器会起作用）

您可以在 google 上搜索 css-selector-specificity 并了解有关此主题的更多信息。要检查哪个选择器更具体，您可以访问此站点（[http://specificity.keegan.st/](http://specificity.keegan.st/)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T00:38:25.430

`.property-desc .left a`比 更具体`.prop-iconlist li a`。最好的方法可能是`.property-desc .left a`减少具体，或将其更改为`.property-desc .left > a`，或其他东西。这取决于实际情况。

如果该规则绝对不能被推理，您总是可以制作一个（喘气）特殊情况来覆盖被覆盖的：

```
.property-desc .prop-iconlist li a {
    /* Repeat some things here */
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T00:40:31.933

您需要阅读选择器特异性。在确定应用哪些样式规则时，基本上不同类型的选择器具有更高的权重。在这种情况下，类选择器比元素选择器具有更高的权重，因此使用 2 个类选择器的第二个规则会覆盖只有 1 个的第一个规则。

[http://www.w3.org/TR/CSS2/cascade.html#specificity](http://www.w3.org/TR/CSS2/cascade.html#specificity)

# ios - 在带有动画的 UITableView 中的 2 个 UITableviewCells 之间添加 UITableViewCells

> ID：15213778
> 
> 赞同：6
> 
> 时间：2013-03-05T00:36:27.617
> 
> 标签：ios, uiview, uitableview

现在，我正在制作一个`UITableView`涉及`UITableView Cells`左右滑动的 iPad 应用程序，我有一个`NSNotification`基础系统，可以让`UITableViewController`知道何时发生幻灯片。我需要`UITableViewCell`在移动的单元格下方和移动单元格下方的单元格上方显示一个。我想做一个清晰的应用程序中看到的折叠动画，但没有`pinch gesture`（即自动折叠）。我找到了这个名为[MPFoldTransition](https://github.com/mpospese/MPFoldTransition)的库。但是，它不支持`UITableView`. 我还研究了`pinch gesture`本[教程中的](http://www.raywenderlich.com/22174/how-to-make-a-gesture-driven-to-do-list-app-part-33)，但是本教程并没有告诉我如何自动为动画制作动画，因为它需要用户进行捏合手势。我浏览了网络，似乎找不到任何东西。我将不胜感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T15:55:50.823

`MPFoldTransition`使用's 完全可以做到这一点`transitionFromView: toView:...`。我创建了一个示例项目，如果您愿意，我可以链接到该项目，但这一切都归结为：

```
- (void)addNewTableCellToIndexPath:(NSIndexPath *)indexPath {
    // Add the new object to the datasource and reload the row
    [dataSourceArray insertObject:@"New" atIndex:indexPath.row];

    [self.tableView beginUpdates];
    [self.tableView insertRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationNone];
    [self.tableView endUpdates];

    //setup temporary cell
    UITableViewCell *fromCell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];
    [fromCell setBackgroundColor:[[self.tableView cellForRowAtIndexPath:indexPath] backgroundColor]];
    //setup cell to animate to
    UITableViewCell *toCell = [self.tableView cellForRowAtIndexPath:indexPath];
    [toCell.textLabel setText:dataSourceArray[indexPath.row]];

    //add fold animation to the cells create above
    [MPFoldTransition transitionFromView:fromCell
                                  toView:toCell
                                duration:0.4
                                   style:MPFoldStyleUnfold
                        transitionAction:MPTransitionActionNone
                              completion:^(BOOL finished) {
                                  [self.tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationNone];
                              }];
} 
```

About 是一个将索引路径作为参数的函数。将您希望添加带有折叠过渡的单元格的索引路径发送给它，它将在表格上创建一个空白临时单元格以进行折叠，同时将其余单元格向下移动。它并不完美，主要是因为我还没有找到一种方法来改变`UITableViewRowAnimation`'s 的持续时间以与折叠持续时间*完美匹配。*

无论哪种方式，这应该足以让你继续前进。希望这可以帮助！

# r - 如何将多个色标放入一个绘图R

> ID：15213779
> 
> 赞同：1
> 
> 时间：2013-03-05T00:36:42.513
> 
> 标签：r, colors, ggplot2

我有三个数据系列，它们由以下组成：

*   X（浮动）
*   Y（浮点数）
*   S（浮动）
*   类（离散值）

所有三个数据系列共享相同的 X 坐标，但每个其他组件都与其他数据系列不同。通过为我的三个数据系列（R 中的库 ggpplot2）中的每一个使用一个 geom_point()，我想根据具体的颜色标度绘制每个数据系列，`S`如下所示：

```
ggplot(data, aes(x=X)) + geom_point(aes(y=Y, colour=S, shape=Class)) 
```

如果我只使用一个数据系列，这将有效。问题是，如果我使用它们自己的和定义三个`geom_points()`指定的值，它们都具有相同的色标，这在情节上有点令人困惑。`Y``S`

因为我已经在使用形状来区分`Class`es，所以我真的很喜欢为我的每个数据系列使用具有自己颜色渐变的特定颜色。

比如说：

*   数据系列 1 从深蓝色到浅蓝色
*   数据系列 2 从深红色到浅红色
*   数据系列 3 从深黄色到浅黄色

我环顾四周，但没有找到任何满足我需求的东西。一些评论说使用 ggplot2 每个图不可能有超过一个色标......是真的吗？

如果有人已经想出这种有或没有 ggplot2 的情节，我将不胜感激他或她的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:24:13.997

在`ggplot`你真的只能`alpha`用于你所要求的。我整理了一些数据：

```
df1 <- data.frame(X=rnorm(16), Y=rnorm(16), S=rep(1:4,times=4), Class=rep(LETTERS[1:4], each=4))
df2 <- data.frame(X=rnorm(16), Y=rnorm(16), S=rep(1:4,times=4), Class=rep(LETTERS[1:4], each=4))
df3 <- data.frame(X=rnorm(16), Y=rnorm(16), S=rep(1:4,times=4), Class=rep(LETTERS[1:4], each=4))

ggplot(df1, aes(x)) + geom_point(aes(y=Y, colour=S, shape=Class))
df1$id <- 1
df2$id <- 2
df3$id <- 3
df.list <- list(df1, df2, df3)
df.all <- ldply(df.list, rbind)

ggplot(df.all, aes(X, Y)) + geom_point(aes(colour=as.factor(id), shape=Class, alpha=S)) 
```

不知道这是否符合您的要求...

# ember.js - 在 localStorage 中同步模型并在 ember.js 中远程同步？

> ID：15213784
> 
> 赞同：5
> 
> 时间：2013-03-05T00:37:53.077
> 
> 标签：ember.js

我们目前正在为即将到来的项目尝试在 Backbone、Ember 和 Angular 之间做出决定。我们真正希望这个应用程序拥有的一件事是应用程序能够在离线时将信息保存到 localStorage，并在它可以再次连接时与服务器同步。[我们在 Backbone ( https://github.com/lucian1900/Backbone.dualStorage](https://github.com/lucian1900/Backbone.dualStorage) )中找到了一些可以让我们做到这一点的东西。这是在 Ember 中做过的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-23T19:59:10.193

我认为[ember-data-sync](https://github.com/panayi/ember-data-sync)项目完全按照要求执行，但它似乎已经死了，并且没有更新为与最新的 Ember 版本一起使用。:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:40:51.810

我自己也一直在考虑这个问题，但我不确定现在是否可以这样做。ember-data 团队的目标绝对是在未来实现这一目标。

理论上，它应该很简单，在检测到稳定的网络连接后，将模型的适配器从 LocalStorageAdapter 切换到 RESTAdapter（或类似的）。

你可以看看这个`DS.Store.adapterForType`方法——Igor 在[他在 Ember Camp 的演讲中](http://www.youtube.com/watch?v=V8nnE948zxk)提到了这种用例（我相信接近视频的结尾）：

# php - 在 jquery mobile 中使用包含文件作为参数

> ID：15213785
> 
> 赞同：0
> 
> 时间：2013-03-05T00:38:01.420
> 
> 标签：php, jquery, mobile, include

问候和问候stackoverflow公民...

问题：在 jquery mobile 中使用包含文件作为“data-theme”参数是多余的还是有任何目的？

例如：

而不是使用：

```
<div data theme="c"></div> 
```

使用这个：

```
<div <?php include('inc/data-theme-file-path-here.php');?> ></div> 
```

?

我宁愿在一个文件中更改此参数，而不是在多个文件中的其他任何地方更改此参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:42:55.517

将主题指定类附加到一个父对象并相应地调整您的 CSS 可能会更干净。然后，您只需将它放在生成的 HTML 中的一个地方，而不是很多地方。

例子：

```
<body class="themec">
<div class="theme-item"></div>
<div class="theme-item"></div>
<div class="theme-item"></div>
<div class="theme-item"></div>
</body> 
```

CSS：

```
.themec .theme-item { css items here} 
```

然后，如果您想更改主题名称，只需在 HTML 中的一处进行更改，这将导致所有主题项选择不同的 CSS。如果使用得当，CSS 样式中的继承可以是一个非常强大和简化的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:41:53.613

jQuery 是客户端并基于源代码，PHP 是服务器端。如果您想使用 PHP 为这种情况动态生成源代码，那么您将获得更多的权力。它不会一点点改变 jQuery Mobile 的功能。实际上只有您可以确定它是否适合您的应用程序，或者在应用程序可维护性方面是否最有意义。

# ravendb - 如何正确构建 Map/Reduce 以按小时计算文档？

> ID：15213786
> 
> 赞同：0
> 
> 时间：2013-03-05T00:38:06.670
> 
> 标签：ravendb

我正在尝试构建一个地图/减少来计算给定小时内的文档数量。

我正在尝试的代码是这个

```
public class Syslog_DocumentCountByHour : AbstractMultiMapIndexCreationTask<Syslog_DocumentCountByHour.ReduceResult> {

    public class ReduceResult {
        public string Source { get; set; }
        public DateTime Day { get; set; }
        public DateTime Hour { get; set; }
        public int Count { get; set; }
    }

    public Syslog_DocumentCountByHour() {
        AddMap<SysLog>(docs => from doc in docs
                               select new {
                                   Source = "CountByHour",
                                   Day = doc.UtcDateTime.Day.ToString(),
                                   Hour = doc.UtcDateTime.Hour.ToString(),
                                   Count = 1
                               });

        Reduce = results => from result in results
                            group result by new { result.Hour }
                                into g
                                select new {g.Key.Hour, Count = g.Sum(x => x.Count) };
    }
} 
```

但是 Raven 抛出了一个错误

> System.InvalidOperationException：无法理解查询
> 
> ```
> "$type": "System.InvalidOperationException, mscorlib",
> "ClassName": "System.InvalidOperationException",
> "Message": "Url: \"/indexes/Syslog/DocumentCountByHour\"\r\n\r\nSystem.InvalidOperationException: Could not understand query: \r\ndocs.SysLogs.Select(doc => new {\r\n    Source = \"CountByHour\",\r\n    Day = doc.UTC Date / Time.Day.ToString(),\r\n    Hour = doc.UTC Date / Time.Hour.ToString(),\r\n    Count = 1\r\n}) ---> System.InvalidOperationException: Could not understand query: \r\n[DomRegion FileName=, Begin=(3, 18), End=(-1, -1)]: Error - Unexpected symbol `Date'\r\n[DomRegion FileName=, Begin=(4, 19), End=(-1, -1)]: Error - Unexpected symbol `Date'\r\n   at Raven.Database.Linq.QueryParsingUtils.GetVariableDeclarationForLinqMethods(String query, Boolean requiresSelectNewAnonymousType) in c:\\Builds\\RavenDB-Stable\\Raven.Database\\Linq\\QueryParsingUtils.cs:line 152\r\n   --- End of inner exception stack trace ---\r\n   at Raven.Database.Linq.QueryParsingUtils.GetVariableDeclarationForLinqMethods(String query, Boolean requiresSelectNewAnonymousType) in c:\\Builds\\RavenDB-Stable\\Raven.Database\\Linq\\QueryParsingUtils.cs:line 196\r\n   at Raven.Database.Linq.DynamicViewCompiler.TransformMapDefinitionFromLinqMethodSyntax(String query, String& entityName) in c:\\Builds\\RavenDB-Stable\\Raven.Database\\Linq\\DynamicViewCompiler.cs:line 404\r\n   at Raven.Database.Linq.DynamicViewCompiler.HandleMapFunction(ConstructorDeclaration ctor, String map) in c:\\Builds\\RavenDB-Stable\\Raven.Database\\Linq\\DynamicViewCompiler.cs:line 169\r\n   at Raven.Database.Linq.DynamicViewCompiler.TransformQueryToClass() in c:\\Builds\\RavenDB-Stable\\Raven.Database\\Linq\\DynamicViewCompiler.cs:line 132\r\n   at Raven.Database.Linq.DynamicViewCompiler.GenerateInstance() in c:\\Builds\\RavenDB-Stable\\Raven.Database\\Linq\\DynamicViewCompiler.cs:line 556\r\n   at Raven.Database.Storage.IndexDefinitionStorage.AddAndCompileIndex(IndexDefinition indexDefinition) in c:\\Builds\\RavenDB-Stable\\Raven.Database\\Storage\\IndexDefinitionStorage.cs:line 153\r\n   at Raven.Database.Storage.IndexDefinitionStorage.CreateAndPersistIndex(IndexDefinition indexDefinition) in c:\\Builds\\RavenDB-Stable\\Raven.Database\\Storage\\IndexDefinitionStorage.cs:line 138\r\n   at Raven.Database.DocumentDatabase.PutIndex(String name, IndexDefinition definition) in c:\\Builds\\RavenDB-Stable\\Raven.Database\\DocumentDatabase.cs:line 1070\r\n   at Raven.Database.Server.Responders.Index.Put(IHttpContext context, String index) in c:\\Builds\\RavenDB-Stable\\Raven.Database\\Server\\Responders\\Index.cs:line 83\r\n   at Raven.Database.Server.HttpServer.DispatchRequest(IHttpContext ctx) in c:\\Builds\\RavenDB-Stable\\Raven.Database\\Server\\HttpServer.cs:line 856\r\n   at Raven.Database.Server.HttpServer.HandleActualRequest(IHttpContext ctx) in c:\\Builds\\RavenDB-Stable\\Raven.Database\\Server\\HttpServer.cs:line 601\r\n", 
> ```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:16:30.507

我可以确认这里的失败是`PropertyName`使用`JsonPropertyAttribute`

改变

```
 [JsonProperty(PropertyName = "UTC Date/Time")]
    public DateTime UtcDateTime { get; set; } 
```

至

```
 public DateTime UtcDateTime { get; set; } 
```

已停止抛出错误。显然 RavenDB 不喜欢空格。

# python - 通过正则表达式匹配引用者

> ID：15213792
> 
> 赞同：0
> 
> 时间：2013-03-05T00:38:51.640
> 
> 标签：python, regex, django

如果视图具有特定的基本引用，我想设置一个简单的通知。

假设我登陆`http://myapp.com/page/`并来自`http://myapp.com/other/page/1`. 这是我的伪代码示例，基本上，如果我来自任何页面/XI 想要设置通知。

我在想它可能有点像`^r^myapp.com/other/page/$`，但我不太熟悉如何在 python 中使用正则表达式。

```
from django.http import HttpRequest
def someview(request): 
     notify = False
     ... # other stuff not important to question
     req = HttpRequest()
     test = req.META['HTTP_REFERER'] like "http://myapp.com/other/page*"
     # where * denotes matching anything past that point and the test returns T/F
     if test:
        notify = True

    return # doesn't matter here 
```

这可能更像是“我如何在这种情况下使用正则表达式”，而不是专门的 django 问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:47:05.297

你可以用这样的东西：

```
import re
referrer = "http://myapp.com/other/page/aaa"
m = re.match("^http://myapp.com/other/page/(.*)", referrer)
if m:
    print m.group(1) 
```

# binary - 二进制补码和二进制数示例

> ID：15213794
> 
> 赞同：-4
> 
> 时间：2013-03-05T00:39:01.247
> 
> 标签：binary, twos-complement

所以让我直截了当，刚开始学习两个人的恭维等，

反正我得到一个二进制数 10101011 是 171

我被告知要找到这个数字的 8 位 1 和 2 的恭维...

我分别放了84和85...

这是正确的，有人可以验证这一点吗，我使用了一种显而易见的方法，将二进制反转为一个，并在最不重要的位上加一个来获得两个的恭维。

提前感谢您的任何澄清，

辛

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T00:47:27.137

二进制补码和二进制补码是表示负数的系统。你的号码是一个正数。

反码：翻转所有位；用 0 替换 1，用 1 替换 0。

例如，考虑数字 -32。-32 的反码是 32 的二进制值，所有位都被翻转：

```
 32 == 00100000
-32 == 11011111 
```

二进制补码：与二进制补码相同，加1。

```
 32 == 00100000
-32 == 11100000 
```

# java - 在JAVA中使用正则表达式替换重复的字母

> ID：15213800
> 
> 赞同：3
> 
> 时间：2013-03-05T00:40:26.317
> 
> 标签：java, regex

假设我有一个像这样的字符串：

```
 String s = "hellllooooo howwwwwww areeeeeee youuuuuuu"; 
```

我想丢弃重复的字母并想得到：

```
 "helloo howw aree youu" 
```

我已经使用 :: 完成了匹配

```
 matches(".*([a-z])\\1{3,}.*" 
```

但是我怎样才能将 helloooooooo 替换为 helloo 和其他？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T00:59:49.933

以下任何一项都会产生您想要的结果：

```
s = s.replaceAll("([a-z])\\1+", "$1$1");

s = s.replaceAll("(([a-z])\\2)\\2*", "$1"); 
```

# maven-3 - Maven 中的 PluginVersionResolutionException

> ID：15213801
> 
> 赞同：0
> 
> 时间：2013-03-05T00:40:27.277
> 
> 标签：maven-3, maven-plugin, maven-release-plugin, maven-compiler-plugin

在我以前的系统中 C:\Users\abc 更改为 C:\Users\xyz 现在问题在使用“mvn clean install”运行 maven 时出现异常为**LocalRepositoryNotAccessibleException**，它采用以前的路径“C:\Users\abc”但它不在我的系统 bcz 中，我已经更改为“C:\Users\xyz”。并且 .m2 文件夹不在我的 C:\Users\xyz 路径中，所以我在 settings.xml localrepository 位置中明确指定为“C :\Users\xyz.m2\repository" 现在 .m2 localrepository 创建了上面的问题解决了。但现在我面临的另一个问题是我运行命令“mvn clean install”它显示“ **PluginVersionResolutionException** ”但它正确识别 C:\Users\ xyz 但显示此异常。我正确检查了我指定的文件中的插件版本。**请给我解决方案并解释为什么它会这样？**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T08:57:05.283

这意味着您在 pom 中定义了插件依赖项，而没有指定插件的版本。由于您没有指定错误消息，我给您一个示例，让您修复自己的错误。

这是一个例子：

1/我想我执行maven命令> mvn intall -X

2/ 在控制台中我有以下错误：

```
[ERROR] Error resolving version for plugin 'org.codehaus.mojo:findbugs-maven-plugin' from the repositories ...
org.apache.maven.plugin.version.PluginVersionResolutionException: Error resolving version for plugin 'org.codehaus.mojo:findbugs-maven-plugin' from the repositories ... 
```

3/ 错误似乎位于“findbugs-maven-plugin”依赖项中

4/ 我去我的 pom.xml 文件，我搜索插件的依赖，我会发现我没有指定插件的版本。所以我添加它，它会得到解决

像这样 ：

```
<plugin>
   <groupId>org.codehaus.mojo</groupId>
   <artifactId>findbugs-maven-plugin</artifactId>
   <version>2.5.3</version> ==> I add this line to fix the pb
</plugin> 
```

# java - JAVA 解析 CSV 文件

> ID：15213808
> 
> 赞同：-3
> 
> 时间：2013-03-05T00:40:59.903
> 
> 标签：java, parsing, csv

我最近刚刚通过各种示例和教程来处理解析 XML 的练习——我已经了解了 JSoup、DOM、StAX，也许还有其他。

我现在想分支到打开和读取 csv（逗号分隔文件）并搜索特定数据。

一个简短的 Internet 搜索显示类似于 XML 练习 - 有很多选项。

你推荐什么技术（在 JAVA 世界中）打开、阅读、搜索 csv 文件？

我想我还想包括编写一个 csv 文件。

感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:45:25.840

我可以推荐你[opencsv](http://opencsv.sourceforge.net/)库，它是简单易用的 csv 文件解析器。您可以在 opencsv 站点的常见问题解答中找到[如何阅读](http://opencsv.sourceforge.net/#how-to-read)和[编写](http://opencsv.sourceforge.net/#can-I-write)示例。

# python - 在 Django 包中包含 Django 项目特定对象

> ID：15213809
> 
> 赞同：0
> 
> 时间：2013-03-05T00:41:06.587
> 
> 标签：python, django, python-module

我正在开发一个带有通用组件的网络应用程序，并决定将这些通用组件（一些视图、模板、逻辑）打包在一个 Django 包中。

现在的问题是：我想根据项目从包中访问我的特定 Django 项目的变量。在这种特定情况下：

我的 Django 包有一个管理面板。一个定制的管理面板，允许我管理算法列表。但是，这些算法会发生变化。在一个特定的 Django 项目中，我可能有 3 个算法，在另一个项目中我可能有 5 个。

Django 包中的管理面板允许我编辑自定义算法组件，例如权重、测试用例等。

现在我的问题是，在 Django 视图中，在包中，我想访问 Django 项目的算法以显示它们。作为列表，用于选择/编辑/删除，还可以详细查看和编辑它们。

现在我的问题是，很明显，我不能在 Django 包中包含 Django 项目中的某些内容，否则它将成为依赖项。并且算法在每个特定项目中都是不同且独特的。

所以，简而言之，问题是如何通过项目使用的包访问 Django 项目的特定数据，而不使包依赖于任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:03:16.830

好的，所以经过更多调查后，我找到了一个可能的解决方案。在等待答案时将其留在这里以供参考。

我没有将包 URL 作为模块加载，而是使用自定义函数将 Django 项目的变量传递给包 URL，因此也传递给视图。

所以在项目 urls.py 中，而不是：

```
url(r'^package/$', include('package.urls')) 
```

我用

```
url(r'^package/$', obtain_package_urls(custom_content)) 
```

其中 gain_package_urls() 是包中的一个函数：

```
def obtain_package_urls(custom_content):
    urlpatterns = patterns('',
        url(r'^url1$', view1, {'custom_content': custom_content},
        url(r'^url2$', view2, {'custom_content': custom_content},
    )
    return (urlpatterns, None, None) 
```

目标是使用这个函数，而不是包含 Django 的静态 URL-view 映射的 include 函数，该函数返回一个动态 URL-view 映射以及视图中包含的自定义内容。

因此，就我最终做的算法而言，这是有效的：

```
#Django project settings.py
obtain_algorithm_list():
    return Algorithm.objects.all()

#Django project urls.py
from project.settings import obtain_algorithm_list

urlpatterns = ...
    ...
    url(r'^package/$', obtain_package_urls(obtain_algorithm_list())
    ...

#In the package urls.py
urlpatterns = ...
    url(r'^view1/$', view1, {'algorithms': algorithms},
    ...

#And then in each package view
def view(request, algorithms=[]):
    ...
    use_for_something(algorithms) 
```

# git - 我应该如何将更改从一个提交移动到另一个？

> ID：15213814
> 
> 赞同：29
> 
> 时间：2013-03-05T00:41:48.717
> 
> 标签：git

我在同一个分支上有两个提交，一个接一个。我在第一次提交中添加了对文件 A 的更改，然后对其他文件进行了一些更改，然后进行了另一次提交。现在我希望对文件 A 的更改在第二次提交而不是第一次提交。最优雅的方式是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-01-31T20:28:19.043

我写了一个脚本来实现这个目的。[你可以在这里](https://github.com/MikhailGolubtsov/git-mv-changes)结帐。

使用脚本将很简单：

```
mv-changes HEAD~ HEAD fileA 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-03-04T14:30:21.803

我知道这是一个老问题，但我有完全相同的要求，我只是想出了解决此问题的最佳方法：您需要使用交互式 rebase 并为要从中移动更改的两个提交选择“编辑”和到。

例如，假设您有 3 个提交：

```
$ git log -3 --oneline
97e9d62 Commit C, editing file2.txt
34b066b Commit B, creating file2.txt + editing file1.txt
73ff1bb Commit A, creating file1.txt 
```

现在，如果您希望提交 B 仅包含 file2.txt 创建而不包含应该在提交 C 中的 file1.txt 版本，`git rebase -i`将显示以下内容：

```
pick 73ff1bb Commit A, creating file1.txt
pick 34b066b Commit B, creating file2.txt + editing file1.txt
pick 97e9d62 Commit C, editing file2.txt

# ... 
```

如果我将 Commit B 和 Commit C 的“pick”替换为“edit”或“e”并关闭我的编辑器，git 将在第二次提交时停止并让我修改我的更改：

```
pick 73ff1bb Commit A, creating file1.txt
edit 34b066b Commit B, creating file2.txt + editing file1.txt
edit 97e9d62 Commit C, editing file2.txt 
```

```
Stopped at 34b066b... Commit B, creating file2.txt + editing file1.txt
You can amend the commit now, with

    git commit --amend

Once you are satisfied with your changes, run

    git rebase --continue

$ vi file1.txt    # edit of file1.txt to remove the updated line
$ git commit --amend file1.txt
$ git rebase --continue

# -- git continues rebasing and stops on the Commit C to edit it

$ vi file1.txt   # edit of file1.txt to put the removed line
$ git commit --amend file1.txt
$ git rebase --continue 
```

就是这样。

注意将您从第一次提交中删除的行保存在第二个提交中。它可以在剪贴板、文本文件等中。我想它也应该可以依赖，`git stash`但如果它是一个简单的更改，那么将它保存在剪贴板中会更容易。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-05T00:51:50.560

如果它们是小提交，并且提交在 git 中应该总是很小，那么最简单的方法是 `git reset HEAD^^`然后再做一次。请注意，对此的任何解决方案都涉及重写历史记录，如果您已经将这些提交推送到某个地方，除非您知道自己在做什么，否则您不应该这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-18T01:52:38.040

这个问题的另一种解决方案

*   在两次提交之前找到提交（可能这是主分支）
*   运行`git rebase -i <commit before commits to be reordered>`（`git rebase -i master`大多数情况下）
*   在文本编辑器中，交换提交的顺序（对于 vim，`ddp`在应该向下移动的行上使用顺序）
*   保存，退出，然后让 git rebase 完成剩下的工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T02:28:08.360

在您刚刚创建了这些提交的可能不太可能发生的事件中，使用 撤消第二次提交，`git reset HEAD^`然后使用 将更改添加到第一次提交`git commit --amend`。

如果您已经继续前进并且提交是在过去的某个时间点，那么变基是您最好的选择。在不知道您的确切情况的情况下，引用可以很好地解释它的参考资料可能是最好的。

在第一个和第二个事件中，Pro Git 书籍关于重写历史的部分很好地解释了这些选项 - 何时应该使用它们以及何时应该谨慎使用。

[6.4 Git 工具——重写历史](http://git-scm.com/book/en/Git-Tools-Rewriting-History)

# math - Mathematica 8：从笛卡尔坐标转换为球坐标

> ID：15213818
> 
> 赞同：3
> 
> 时间：2013-03-05T00:42:09.680
> 
> 标签：math, wolfram-mathematica, data-conversion

我刚开始使用 Mathematica，遇到了一个问题。我想更优雅地解决。我有`{x,y,z}`表格中的测量数据，并希望将这些数据转换为球坐标。我知道如何使用简单的功能来做到这一点。但是代码变得丑陋。我想要类似的东西：

```
v={x,y,z}
TranformSpherical[v] 
```

我查看了文档，只找到了版本 9 的内容，我使用的是 8，但在我尝试时它不起作用。此外，我还没有在其他任何地方找到明确的解决方案。希望这里有人知道一个简单的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:26:29.373

在版本 9

```
CoordinateTransformData["Cartesian" -> "Spherical", "Mapping", {x, y, z}] 
```

给你 {Sqrt[x^2 + y^2 + z^2], ArcTan[z, Sqrt[x^2 + y^2]], ArcTan[x, y]}

用 {x,y,z} 表示三个球坐标

```
CoordinateTransform["Cartesian" -> "Spherical", {x, y, z}] 
```

会给你同样的东西，但也可以用于转换。如果你有一个笛卡尔坐标列表 {{x0,y0,z0},{x1,y1,z1},...}，你可以像这样应用 CoordinateTransform

```
cartesianList = RandomReal[{0, 1}, {4, 3}];

CoordinateTransform["Cartesian" -> "Spherical", #] & /@ cartesianList 
```

在早期版本中

```
<< Calculus`VectorAnalysis`

SetCoordinates[Spherical] 
```

在 mathworld.wolfram.com 网站页面上有一个用于球坐标的笔记本。接近开头是您正在做的事情的一个例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T01:09:03.323

这些方程式[在 Wikipedia 上给出](http://en.wikipedia.org/wiki/Spherical_coordinates#Cartesian_coordinates)，是简单的函数评估。是什么阻止你简单地计算它们，它是如何变得丑陋的？

![在此处输入图像描述](../Images/ad77b19ac4c1fbaa5ddba675d664f20f.png)

![在此处输入图像描述](../Images/02cfe0062147db7b37d2729f42ab2050.png)

![在此处输入图像描述](../Images/c8d9d52a895a685fc761612a47da1791.png)

确保`ArcTan[x, y]`在计算四象限反正切的 Mathematica 中使用。有关详细信息，请参阅[有关 atan2 的文章](http://en.wikipedia.org/wiki/Atan2)。

# java - Infinity 和 NaN 之间的差异（不是数字）

> ID：15213819
> 
> 赞同：5
> 
> 时间：2013-03-05T00:42:16.440
> 
> 标签：java

java什么时候打印Infinity，什么时候打印NaN？

为什么 1.0/0.0 是无穷大，但 ((1.0/0.0) - (1.0/0.0)) NaN 和 0.0f/0.0f 是 NaN？

这两者有什么区别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T00:44:31.363

因为 Java 遵循已知的数学事实。1.0 / 0.0 是[无穷大](http://en.wikipedia.org/wiki/Infinity#Computing)，但其他是[不确定的形式](http://en.wikipedia.org/wiki/Indeterminate_form#List_of_indeterminate_forms)，Java 表示为`NaN`（不是数字）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T00:52:03.570

Java 只是遵循[IEEE 754](http://en.wikipedia.org/wiki/IEEE_floating_point)规范，这与当今大多数浮点硬件是一致的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T00:44:21.927

1.00/0 是无穷大，但无穷减无穷不是一个数字。

# java - BasicScrollBarUI：标签而不是按钮 - 无法滚动

> ID：15213821
> 
> 赞同：0
> 
> 时间：2013-03-05T00:42:20.890
> 
> 标签：java, swing, custom-component, listeners, jscrollbar

我制作了一个自定义的 BasicScrollBarUI。我已经用 JLabels 替换了 incrButton / decrButton。

因此我不得不重写 InstallListeners()，将监听器添加到 incr/decrLabel 而不是 JButtons。

```
 //TODO
    protected void installListeners() {
    trackListener = createTrackListener();
    buttonListenerCustom = createArrowButtonListenerCustom();
    modelListener = createModelListener();
    propertyChangeListener = createPropertyChangeListener();

    scrollbar.addMouseListener(trackListener);
    scrollbar.addMouseMotionListener(trackListener);
    scrollbar.getModel().addChangeListener(modelListener);
    scrollbar.addPropertyChangeListener(propertyChangeListener);
    //      scrollbar.addFocusListener(getHandler());

    if (incrLabel != null) {
        incrLabel.addMouseListener(buttonListenerCustom);
        System.out.println("OK gemacht");
    }
    if (decrLabel != null) {
        decrLabel.addMouseListener(buttonListenerCustom);
    }

    scrollListener = createScrollListener();
    scrollTimer = new Timer(scrollSpeedThrottle, scrollListener);
    scrollTimer.setInitialDelay(300); // default InitialDelay?
} 
```

因此我不得不重写 ArrowButtonListener，对标签做出反应。

```
protected class ArrowButtonListenerCustom extends MouseAdapter {

    boolean handledEvent;

    public void mousePressed(MouseEvent e) {
        if (!scrollbar.isEnabled()) {
            return;
        }
        // not an unmodified left mouse button
        // if(e.getModifiers() != InputEvent.BUTTON1_MASK) {return; }
        if (!SwingUtilities.isLeftMouseButton(e)) {
            return;
        }

        int direction;
        if (e.getSource() == incrLabel) {
            direction = 1;
            incrLabel.setIcon(new ImageIcon(increaseButtonPressedImage));
        } else {
            direction = -1;
            decrLabel.setIcon(new ImageIcon(decreaseButtonPressedImage));
        }

        scrollByUnit(direction);
        scrollTimer.stop();
        scrollListener.setDirection(direction);
        scrollListener.setScrollByBlock(false);
        scrollTimer.start();

        handledEvent = true;
        if (!scrollbar.hasFocus() && scrollbar.isRequestFocusEnabled()) {
            scrollbar.requestFocus();
        }
    }

    public void mouseReleased(MouseEvent e) {
        scrollTimer.stop();
        handledEvent = false;
        scrollbar.setValueIsAdjusting(false);
        incrLabel.setIcon(new ImageIcon(increaseButtonImage));
        decrLabel.setIcon(new ImageIcon(decreaseButtonImage));
    }
} 
```

当然 createArrowButtonListenerCustom() 返回一个新的 ArrowButtonListenerCustom 实例。

现在我的问题：

当我单击 incr/decrLabel 时，列表正确滚动，但 ScrollBar 的拇指没有移动（或者更好的是：拇指没有重新绘制。如果我将鼠标移到拇指上，它会在右侧重新绘制地方）。当我使用 MouseWheel 滚动时，我遇到了同样的问题。

我不明白，为什么这不起作用。谢谢你的帮助！

# java - Java中的算术错误

> ID：15213830
> 
> 赞同：0
> 
> 时间：2013-03-05T00:43:31.553
> 
> 标签：java

我最近开始学习 Java，我现在正在尝试解决一些 Eulerproject 问题。

任务是：**数字 600851475143 的最大素因数是多少？**

我能够创建此代码，但出现错误：

代码

```
package exercises;
import java.util.ArrayList;

public class Euler3 {

    // Main code
    public static void main(String[] args) {

        System.out.println( getPrimeFactors(15) );
    }

    // Code for breaking a number to prime factors
    public static ArrayList getPrimeFactors(int n){

        ArrayList factors = new ArrayList();

        int d = 2;

        while(n > 1 ){
            while(n%d == 0 ){
                factors.add(d);
                n /= d;
            }
            d +=d;
        }

        return factors;
    }

} 
```

错误：

```
Exception in thread "main" java.lang.ArithmeticException: / by zero
    at exercises.Euler3.getPrimeFactors(Euler3.java:22)
    at exercises.Euler3.main(Euler3.java:9) 
```

我究竟做错了什么？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T00:50:08.107

对于一个非常幼稚的解决方案，请尝试将行更改`d += d`为`d += 1`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T00:54:15.047

你`d`的溢出来了，我打印在`n`里面：`d``while (n > 1)`

```
 15 2
    15 4
    15 8
    15 16
    15 32
    15 64
    15 128
    15 256
    15 512
    15 1024
    15 2048
    15 4096
    15 8192
    15 16384
    15 32768
    15 65536
    15 131072
    15 262144
    15 524288
    15 1048576
    15 2097152
    15 4194304
    15 8388608
    15 16777216
    15 33554432
    15 67108864
    15 134217728
    15 268435456
    15 536870912
    15 1073741824
    15 -2147483648
    15 0 
```

我认为解决方案是`d++`，不是`d+=d`——现在你只检查两个的幂，而不是所有连续的整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T00:52:20.030

问题是您的 d`Integer.Max`超出限制并溢出。

# mysql - 将用户名和密码安全地存储在 mysql 中，其中 php 脚本需要以明文形式发布字段

> ID：15213835
> 
> 赞同：0
> 
> 时间：2013-03-05T00:43:49.810
> 
> 标签：mysql, passwords, encryption

我正在创建一个 cron 作业，它运行一个 php 脚本，该脚本将使用 curl 登录到外部网站并抓取页面以提取数据。

现在我的问题是我需要将凭据存储在数据库中，如何安全地存储它。问题是 curl 脚本需要以明文形式发布用户名和密码。

该服务类似于 Mint.com 所做的，即使用用户凭据提取帐单信息。

任何意见，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:52:26.910

数据可以加密（参见[openssl_encrypt](http://www.php.net/manual/function.openssl-encrypt.php)中的示例），然后在需要时在 php 脚本中解密，并将未加密的数据作为连接到 curl 调用的字符串传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:04:38.807

如果外部系统不提供替代的（非基于密码的）身份验证方法（与支持 OAuth 的 facebook 不同），那么您就没有好的选择。您的应用程序将始终要求输入密码 - 有点尴尬且不兼容自动化。如果这还不够好，那么 DB+app 必须一起知道密码，所以任何可以访问两者的人也会知道密码。您唯一能做的就是确保仅访问其中一个是不够的：为应用程序创建一个密钥，并将其对数据库管理员隐藏（将其放在源中）。将其用作加密密码的密钥（您可能希望使用此密钥 + 一些不变的用户特定数据 [例如 userID] 来构建实际的加密密钥，以改进对密钥的保护）。因此，您可以将加密的密码存储在数据库中。虽然有很多隐私问题。一个人的密码不应该被其他任何人发现，但这里情况并非如此。如果数据库在网络服务器上，管理员将看到加密密码和密钥 - 失败。该应用程序将无限制地访问密码，因此其开发人员也将拥有该密码（例如，他们可以隐藏代码片段以发送电子邮件）。

# php - 跟踪用户在“每周高分”数据库中排名高于 X 位的次数

> ID：15213840
> 
> 赞同：0
> 
> 时间：2013-03-05T00:44:07.737
> 
> 标签：php, mysql, database

我的应用程序有`VIEW`另一个表，其中显示了上一个日历周所有记录的高分的列表。每周，我想在该列表前 X 的每个用户的行中增加一个值，以表明他们在过去的几周内一直在前 X 中。由于我只使用日期过滤器并且每周都不会触发某种服务器端“事件”，因此我不确定每周注册此信息的最有效方法。

我能想到的一种方法是在每次用户登录时简单地运行某种“检查”，并且每个日历周第一个登录的用户肩负着告诉服务器增加最后 X 名用户的负担星期。虽然这对我来说似乎有点做作，但我很乐意在获得足够的 Internet 批准的情况下这样做。

我使用的主要语言是 MySQL 和 PHP，以防万一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:37:34.397

您应该考虑运行 cron 作业。您可以在每次用户登录时运行检查，但这确实不理想，尤其是在您的系统要扩大规模的情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T01:37:40.770

您可以编写一个更新脚本 1) 检查上次运行的时间，如果是本周，则中止。2) 更新上次运行的时间戳。3) 处理前一周。现在您可以使用您的操作系统来安排这个脚本（或者通过使用 php 运行它，或者通过使用例如 wget 来“下载”页面）。例如，在 linux 上，您通常会使用 cron，而在 windows 上使用任务调度程序。这比使用第一个用户要好得多，因为这可能导致难以确保处理不能运行两次（并行）的竞争条件。

# arrays - 带有循环的 Mips 程序集中的数组

> ID：15213850
> 
> 赞同：0
> 
> 时间：2013-03-05T00:45:23.017
> 
> 标签：arrays, loops, assembly, mips

我的代码有问题。我正在创建一个程序，它将读取一个字符串，将其保存到一个数组中，然后输出每个字母在字符串中使用的次数。目前，我只是将字符串输出到屏幕时遇到问题。输出字符串但循环永远不会退出， $t2 值可能永远不会设置为值？

```
.data
intro: .asciiz "Andrew Lofgren, Letter Checker Program" 
question: .asciiz "\nPlease enter a string for evaluation: "
alphabet: .ascii "ABCDEFGHIJKLMONOPQRSTUVWXYZ"
results: .space 104
string: .space 1024

.text 

main:
jal setup
jal analyze
#jal results

li  $v0, 10
syscall 

setup:
li  $v0, 4  # outputing name and program information
la  $a0, intro
syscall

li  $v0, 4  # asksing for string input
la  $a0, question
syscall 

li  $v0, 8
la  $a0, string
li  $a1, 1024
syscall

jr  $ra     # return

analyze: 
la  $t0, string # taking string and saving into a tmp
move    $t2, $t0    # backup of orignal address
find:   
beq $t1, 0, print
addi    $t0, $t0, 1
j find

print:  
blt $t0, $t2, end   #PROBLEM HERE
li  $v0, 11
lb  $a0, 0($t0)
syscall
addi    $t0, $t0, 1
j print
end:
jr  $ra 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T01:23:26.010

`$t0`永远不会小于`$t2`，因为在保持不变的情况下`$t0`不断增加。`$t2`为了解决这个问题，您需要第三个寄存器，比如`$t7`，它存储字符串的最终索引。要计算最后一个索引，只需将字符串的基地址添加到您定义为 1024 的长度。一旦`$t0`不再小于 1024 + 字符串，则字符串中没有字符，因此我们分支到`end:`. 这是在下面的代码段中完成并进一步解释的。

```
print:
    li      $t7 , 1024            # Load total byte length of the string
    add     $t7 , $t7 , $t2     # add it to the base address to get the end
    slt     $t6 , $t0 , $t7     # check to see if cur index < end
    beq     $t6 , $0 , end     # if we hit the end, branch to end

... 
```

有关 MIPS 说明的更多信息，[请访问此页面](http://www.mrc.uidaho.edu/mrc/people/jff/digital/MIPSir.html)。

# c# - 如何在 C# 中实现 BN_num_bytes() （和 BN_num_bits() ）？

> ID：15213853
> 
> 赞同：14
> 
> 时间：2013-03-05T00:46:19.047
> 
> 标签：c#, c++, .net, openssl, biginteger

我正在[将此行从 C++ 移植到 C#，](https://github.com/bitcoin/bitcoin/blob/master/src/bignum.h#L310)而且我不是经验丰富的 C++ 程序员：

```
 unsigned int nSize = BN_num_bytes(this); 
```

在 .NET 中，我[使用 System.Numerics.BigInteger](https://bitcoin.stackexchange.com/q/8100/1878)

```
 BigInteger num = originalBigNumber;
 byte[] numAsBytes = num.ToByteArray();
 uint compactBitsRepresentation = 0;
 uint size2 = (uint)numAsBytes.Length; 
```

我认为它们在内部的操作方式存在根本差异，因为如果 BigInt 等于[，源的单元测试结果](https://bitcoin.stackexchange.com/a/8046/1878)不匹配：

*   0
*   任何负数
*   0x00123456

我对`BN_num_bytes`（*编辑：评论刚刚告诉我它是 BN_num_bits 的宏）一无所知*。

**问题**

你会验证这些关于代码的猜测吗：

*   我需要移植`BN_num_bytes`一个宏`((BN_num_bits(bn)+7)/8)`（谢谢@WhozCraig）

*   我需要端口`BN_num_bits`是`floor(log2(w))+1`

那么，如果存在不计算前导字节和尾随字节的可能性，那么在大/小端机器上会发生什么？有关系吗？

基于[Security.StackExchange 上的这些答案，](https://security.stackexchange.com/a/31979/396)并且我的应用程序不是性能关键，我可以使用 .NET 中的默认实现，而不使用可能已经实现类似解决方法的备用库。

* * *

编辑：到目前为止，我的实现看起来像这样，但我不确定评论中提到的“LookupTable”是什么。

```
 private static int BN_num_bytes(byte[] numAsBytes)
    {
        int bits = BN_num_bits(numAsBytes);
        return (bits + 7) / 8; 
    }

    private static int BN_num_bits(byte[] numAsBytes)
    {
        var log2 = Math.Log(numAsBytes.Length, 2);
        var floor = Math.Floor(log2);
        return (uint)floor + 1;
    } 
```

* * *

编辑2：

经过一番搜索，[我发现：](https://groups.google.com/forum/?fromgroups=#!topic/mailing.unix.openssh-dev/DDGOu6w9_7c)

> BN_num_bits 不返回给定 bignum 的有效位数，而是返回最高有效 1 位的位置，不一定是同一件事

虽然我仍然不知道它的来源是什么......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T19:58:48.790

BN_num_bits的[手册页](http://www.openssl.org/docs/crypto/BN_num_bytes.html)（OpenSSL 项目）说“基本上，除了零，它返回`floor(log2(w))+1`.”。所以这些是.Net 的`BN_num_bytes`和函数的正确实现。`BN_num_bits``BigInteger`

```
public static int BN_num_bytes(BigInteger number) {
    if (number == 0) {
        return 0;
    }
    return 1 + (int)Math.Floor(BigInteger.Log(BigInteger.Abs(number), 2)) / 8;
}

public static int BN_num_bits(BigInteger number) {
    if (number == 0) {
        return 0;
    }
    return 1 + (int)Math.Floor(BigInteger.Log(BigInteger.Abs(number), 2));
} 
```

为了方便起见，您可能应该将它们更改为扩展方法。

您应该了解，这些函数测量表达给定整数所需的最小位/字节数。`int`声明为( ) 的变量`System.Int32`占用 4 个字节的内存，但您只需要 1 个字节（或 3 位）来表示整数 7。这是 BN_num_bytes 和 BN_num_bits 计算的 - 具体数字所需的最小存储大小。

[您可以在官方 OpenSSL 存储库](http://git.openssl.org/gitweb/?p=openssl.git;a=blob_plain;f=crypto/bn/bn_lib.c;hb=HEAD)中找到函数的原始实现的源代码。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-09T19:30:42.140

将评论中的 WhozCraig 与解释 BN_num_bits 的链接结合起来：

[http://www.openssl.org/docs/crypto/BN_num_bytes.html](http://www.openssl.org/docs/crypto/BN_num_bytes.html)

你最终会得到这样的东西，它应该告诉你大量的字节：

```
public static int NumberOfBytes(BigInteger bigInt)
{
    if (bigInt == 0)
    {
        return 0; //you need to check what BN_num_bits actually does here as not clear from docs, probably returns 0
    }

    return (int)Math.Ceiling(BigInteger.Log(bigInt + 1, 2) + 7) / 8;
} 
```

# php - SQL 数据库中的 AJAX PHP 数组

> ID：15213863
> 
> 赞同：0
> 
> 时间：2013-03-05T00:47:11.697
> 
> 标签：php, ajax, json

[*我知道 MYSQL 已被贬低。我现在只是将它用作学习工具。]

更新的问题：

我更新了我的问题以使 lil 更有意义......

假设我想将输出数组（PHP 文件中的 json 数据）添加到 div id rvotes，如何在我的 HTML 页面上显示它？

JavaScript

```
<script>
$(document).ready(function () {
$('.answer').click(function (e) {
var color = $(this).attr("data-color");
$.ajax({
type: 'POST',
url: 'mm.php',
data: { color: color},
dataType: 'json',
cache: false,
success: function(showVotes) {
$('#rvotes').html(row[0]);
},
error: function (jqXHR) {

}

})
})
});
</script> 
```

PHP

```
function showVotes()
{
 $sql = "SELECT * FROM mms";
 $result = mysql_query($sql) or die(mysql_error());
 $showresult = mysql_query("SELECT * from mms") or die("Invalid query: " . mysql_error());
 $response = array();
 while($row = mysql_fetch_assoc($showresult)) 
 $results[] = $row; 
 echo json_encode($results);
} 
```

添加我的 HTML 代码

```
<div id="wrapper">

<div id="red" data-color="red" class="answer">
<a href="#"><img src="images/red.jpg" width="100%" /></a>
</div>

<div id="blue" data-color="blue" class="answer">
<a href="#"><img src="images/blue.jpg" width="100%" /></a>
</div>

<div id="green" data-color="green" class="answer">
<a href="#"><img src="images/green.jpg" width="100%" /></a>
</div>

<div id=rvotes>
TEST
</div>

<div id=bvotes>
TEST
</div> 
```

如何在我的 HTML 页面上显示数组的输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T00:59:17.060

我认为这与这个问题相似。

[从 php 数组中获取数据 - AJAX - jQuery](https://stackoverflow.com/questions/6395720/get-data-from-php-array-ajax-jquery)

您无法访问 php 数组，因为它在您的 ajax 中。您需要首先将其表示为 JSON，方法是将您的 php 数组传递给 json_encode() 函数并回显它。

```
echo json_encode($results); 
```

它将作为参数传递给您的 ajax 回调。

在你成功的ajax回调中，

```
success: function(showVotes) {
$('#rvotes').html(showVotes[0]);
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:01:49.163

就个人而言，我会让我的 php 像这样吐出预渲染的 html：

```
 $sql = "SELECT * FROM mms";
 $result = mysql_query($sql) or die(mysql_error());
    //I cleaned up redundant queries here...
    //echo top border
   echo "<table border='1'>
   <tr>
   <th>Color</th>
   <th>Votes</th>
   </tr>";
 while($row = mysql_fetch_assoc($showresult)) 
while($row = mysql_fetch_assoc($showresult)
  {
  echo "<tr>";
  echo "<td>" . stripslashes($row['color']) . "</td>";
  echo "<td>" . stripslashes($row['votes']) . "</td>";
  echo "</tr>";
  } 
```

在它吐出 html 之后，只需执行以下操作：

```
<script>
$(document).ready(function () {
$('.answer').click(function (e) {
var color = $(this).attr("data-color");
$.ajax({
type: 'POST',
url: 'mm.php',
data: { color: color},
success: function (showVotes) {
$("#votes").html(showVotes); //this edits the text inside the div to be whatever your php spits out
},
error: function (jqXHR) {
}

})
})
});
</script>
<div id="votes></div> 
```

# javascript - Javascript 和 HTML 表单 - 用一个表单创建两个函数

> ID：15213866
> 
> 赞同：0
> 
> 时间：2013-03-05T00:47:24.167
> 
> 标签：javascript, function

你能帮忙吗？我现在有一个表格，它采用框 1、2 和 3 中的内容并将它们相乘并给出答案。我有一个单独的函数和表格减去框 4-11（从代码中可以看出）。我需要帮助的是创建一个可以采用第二个函数并从第一个函数中减去它的函数。

如果有助于解释我在做什么，第一个函数会计算总收入。第二次计算负费用，但现在我不知道如何从总费用中减去费用？

基本上 - 我有回答 A 的功能（总）。我有答案 B（费用）的功能。但是如何从 A 中减去 B？

任何帮助都会很棒！

```
<script language="javascript" type="text/javascript">
function runGross(grossForm) {

var field1 = Number(grossForm.box1.value);

var field2 = Number(grossForm.box2.value);

var field3 = Number(grossForm.box3.value);

grossForm.total.value = '$' + field1*field2*field3;

}

function runTotal(totalForm) {

var field4 = Number(totalForm.box4.value);

var field5 = Number(totalForm.box5.value);

var field6 = Number(totalForm.box6.value);

var field7 = Number(totalForm.box7.value);

var field8 = Number(totalForm.box8.value);

var field9 = Number(totalForm.box9.value);

var field10 = Number(totalForm.box10.value);

var field11 = Number(totalForm.box11.value);

totalForm.total.value = field4-field5-field6-field7-field8-field9-field10-field11;

}

</script>

<h1>How Much Can You Make as Counselor in Private Practice?</h1>
<h2><span style="color: #339966;">Adding the Total Gross Revenue</span></h2>
Use an average of cash clients and various payers. Remember, that insurance pays a little more for first appointments, and couples counseling / family therapy.

<form><span style="color: #339966;"><strong>Revenue Per Session</strong></span>: <input type="text" name="box1" size="10" maxlength="20" placeholder="Avg 50-150" />
<br/><br/>
30-35 sessions a week is traditionally fulltime. Some clinicians work more, some work less.
<br/>
<span style="color: #339966;"><strong>Sessions Per Week:</strong></span><input type="text" name="box2" size="10" maxlength="20" placeholder="Avg. 30-35"/>
<br/>
<br/>
Recommended: 48 weeks per year. That allows for 4 weeks off per year.
<br/>
<span style="color: #339966;"><strong>Weeks Per Year</strong>:</span> <input type="text" name="box3" size="10" maxlength="20" placeholder="Avg. 48-50" />
<br/>
<br/>
<strong><span style="color: #339966;">Your Total Gross Revenue:</span> </strong>

<input onclick="runGross(this.form)" type="button" value="Calculate My Gross Revenue" />
<input type="text" name="total" size="10" maxlength="20" />

</form>

<h2><span style="color: #ff0000;">Subtracting the Expenses</span></h2>
Remember to include heat, electric, water, and Internet (if applicable).

<form><span style="color: #ff0000;"><strong>Rent & Utilities (per year):</strong></span> <input type="text" name="box4" size="10" maxlength="20" />
<br/>
<br/>
Some providers in private practice spend around 7% of revenue. Others spend 0%.
<br/>
<span style="color: #ff0000;"><strong>Marketing:</strong></span><input type="text" name="box5" size="10" maxlength="20" />
<br/>
<br/>
Will you hire a billing company (calculate 5% of revenue)? Accept credit cards (calculate 2% of revenue)?
<br/>
<span style="color: #ff0000;"><strong>Medical Billing</strong>:</span> <input type="text" name="box6" size="10" maxlength="20" />
<br/>
<br/>
These can be under $300 a year if you’re frugal, or thousands if you plan to attend conferences. 
<br/>
<span style="color: #ff0000;"><strong>CEUs and Association Fees:</strong></span> <input type="text" name="box7" size="10" maxlength="20" />
<br/>
<br/>
Professional Liability insurance is approx $150-$350 a year.
<br/>
<span style="color: #ff0000;"><strong>Insurance:</strong></span> <input type="text" name="box8" size="10" maxlength="20" />
<br/>
<br/>
For a solo-practice, can be around $2500 a year.
<br/>
<span style="color: #ff0000;"><strong>Office Expenses:</strong></span> <input type="text" name="box9" size="10" maxlength="20" />
<br/>
<br/>

Approx $500 a year for Legal Expenses.
<br/>
<span style="color: #ff0000;"><strong>Accounting and Legal:</strong></span> <input type="text" name="box10" size="10" maxlength="20" />
<br/>
<br/>
Estimate another $1500 for the unexpected!
<br/>
<span style="color: #ff0000;"><strong>Misc. Expenses:</strong></span> <input type="text" name="box11" size="11" maxlength="20" />
<br/>
<br/>

<strong><span style="color: #339966;">Your Total Pre-Tax (Pre-Tax):</span> </strong>

<strong></strong><input onclick="runTotal(this.form)" type="button" value="Calculate My Total" />
<input type="text" name="total" size="20" maxlength="20" />

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:04:50.980

我认为如果你的函数有返回值，它会起作用，如下所示：

```
var runGross = function (grossForm)
{
    //contents here

    return grossForm.total.value;
} 
```

和

```
var runTotal = function (totalForm)
{
    //contents here

    return totalForm.total.value;
} 
```

那么如果你想要另一个函数来找到差异：

```
var findProfit = function (runGross, runTotal)
{
    return runGross - runTotal;
} 
```

# doctrine-orm - ZF2 + Doctrine 2：Cli 工具已拒绝访问

> ID：15213867
> 
> 赞同：2
> 
> 时间：2013-03-05T00:47:26.183
> 
> 标签：doctrine-orm, zend-framework2

我有一个带有 Doctrine 2 的 ZF2 2.1.3 应用程序。

我使用作曲家安装：

```
 "zendframework/zendframework": "2.*"
    ,"doctrine/doctrine-orm-module":       "dev-master" 
```

A 创建一个`config/autoload/database.local.php`包含以下内容的文件：

```
return array(
    'doctrine' => array(
        'connection' => array(
            // Default connection name
            'orm_default' => array(
            'driverClass' => 'Doctrine\DBAL\Driver\PDOMySql\Driver',
                'params' => array(
                    'host'     => 'localhost',
                    'port'     => '3306',
                    'dbname'   => 'zf2-experimental',
                    'user'     => 'root',
                    'password' => '',
                ),
            ),
        ),
    ),
); 
```

我在模块 ( )`Bar`下创建我的实体并像这样配置它：`Foo``src/Business/Entity/Bar.php``module.config.php`

```
'doctrine' => array(
    'driver' => array(
        __NAMESPACE__ . '_driver' => array(
            'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
            'cache' => 'array',
            'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Business/Entity'),
        ),
        'orm_default' => array(
            'drivers' => array(
                __NAMESPACE__ . '\Business\Entity' => __NAMESPACE__ . '_driver',
            ),
        ),
    ),
), 
```

好的！正是[山姆在这里说](http://samminds.com/2012/07/install-doctrine-2-for-zend-framework-2/)的！

然后我创建一个简单的`Foo`实体并运行学说 cli 工具：

```
c:\wamp\www\zf2-Experimental>.\vendor\bin\doctrine-module.bat orm:validate-schema
    [Mapping]  OK - The mapping files are correct.

      [PDOException]
      SQLSTATE[28000] [1045] Access denied for user 'username'@'localhost' (using password: YES)

    orm:validate-schema
c:\wamp\www\zf2-Experimental> 
```

看起来 cli 工具可以在我的`config/autoload/database.local.php`!

在应用程序索引上，我测试了我的配置：

```
$config = $this->getServiceLocator()->get('config');
\Zend\Debug\Debug::dump($config['doctrine']['connection']['orm_default']); 
```

这又回来了：

```
array (size=4)
  'configuration' => string 'orm_default' (length=11)
  'eventmanager' => string 'orm_default' (length=11)
  'params' => 
    array (size=5)
      'host' => string 'localhost' (length=9)
      'port' => string '3306' (length=4)
      'user' => string 'root' (length=4)
      'password' => string '' (length=0)
      'dbname' => string 'zf2-experimental' (length=16)
  'driverClass' => string 'Doctrine\DBAL\Driver\PDOMySql\Driver' (length=36) 
```

有人可以请帮助我吗？:) 谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:21:32.147

好吧，我浪费了很多时间试图解决这个问题，最终做到了。

我忘了说我使用的是 ZF1 环境特定的配置风格！你可以[在这里](http://blog.evan.pro/environment-specific-configuration-in-zend-framework-2)看到！

我以以下结构创建我的数据库配置文件（我之前没有提到这一点，因为我认为它不会干扰这个问题）：

```
'module_listener_options' => array(
    'config_glob_paths'    => array(
        'config/autoload/{,*.}{global,local}.php',
        // Here! My config path is config/autoload/app_env/development/
        'config/autoload/app_env/' . (getenv('APPLICATION_ENV') ?: 'production') . '{,*.}.local.php',
    ), 
```

所以，我的数据库配置实际上在`config/autoload/app_env/development/database.local.php`！

当我将文件复制粘贴到`config/autoload/database.local.php`我的 CLI 工具时！

但为什么？为什么 Cli 工具无法在另一个目录中查找配置文件？有办法处理子文件夹吗？

谢谢您的帮助！

# jquery - 让多个选择框打开相同的模式对话框

> ID：15213871
> 
> 赞同：4
> 
> 时间：2013-03-05T00:47:50.167
> 
> 标签：jquery, jquery-ui

我有一个允许用户将用户添加到联系人列表的表单。我有多个选择框允许用户选择要添加的用户，但我也希望用户能够添加不在列表中的人。因此，选择新用户时，我希望使用表单弹出模态对话框以创建用户。无论使用哪个框，都应该显示相同的表单。因此，我给了它们所有相同的类名，并且我正在使用以下代码来检测新的用户选项。

```
$(function()
{
    $( ".select-user" ).change(function()
    {
        alert("List Changed");
            if ($(this).val() == 'new')
            {
                $( "#dialog-form" ).dialog( "open" );
                updateTips("* indicates a mandatory field.");
            }
    });
}); 
```

但是，只有第一个框会触发此事件。第一个选择是这样定义的：

```
<select id ="select-user" class = "select-user" name="foo"> 
```

其他的盒子都是一样的，它们开始隐藏起来。

```
<select style="visibility:hidden" class="select-user" id="select-user-$index" name="bar"> 
```

它们通过以下代码可见：

```
document.getElementById('select-user-$index').style.visibility = "visible"; 
```

我已经确认 .change 事件除了第一次选择之外根本不会触发。关于事件的触发方式，我有什么遗漏吗？

编辑：正如我在 isherwood 的回答中所说，在 jsfiddle 中隔离选择框的代码提供了预期的行为。因此，有关该页面的更多信息。两个选择都是由（几乎）相同的 php 生成的。我复制并粘贴了大部分内容，但只是添加了几行来隐藏其他框并更改了 ID。

两个选择都采用相同的形式。第一个在 table 内，而其他的被扔到 .

前两个之后的每个选择框都是通过 javascript 添加的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:19:36.033

[http://jsfiddle.net/tLYDB/2/](http://jsfiddle.net/tLYDB/2/)

```
$(function () {
    $(".select-user").each(function () {
        $(this).change(function () {
            alert("List Changed");

            if ($(this).val() == 'new') {
                $("#dialog-form").dialog("open");
                updateTips("* indicates a mandatory field.");
            }
        });
    });
}); 
```

# c - UDP 端口访问

> ID：15213878
> 
> 赞同：0
> 
> 时间：2013-03-05T00:48:41.507
> 
> 标签：c, udp

我有一个 C 语言的小型服务器程序，它向客户端打印一条消息。该程序使用 UDP 端口进行通信。

我的问题是：有没有一种方法或应用程序可以让我从我的 Windows 机器测试我的程序的功能。例如，如果我输入一些命令，我​​可以在我的计算机上看到我的程序的响应。

远程登录 xx.xx.xx.xx。PortNum，我相信 telnet wpuld 不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:18:46.267

不知道任何现有的工具。我假设您的服务器收到来自客户端的消息并发送回响应消息。如果这是正确的，创建一个发送消息（sendto()）然后调用 recvfrom() 的基本客户端程序（在我的平台上默认是阻塞模式），然后打印收到的响应消息。这对我很有效。没有时间寻找示例（在 linux 上），但我想您应该能够从网络上使用示例 udp 客户端用于 Windows。如果您希望我的客户端程序作为模板，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:24:11.603

我想你可能想使用 netcat；如果它安装在您的机器上，它通常由“nc”执行

netcat 可以连接或监听 tcp 或 udp 端口​​；-u 是 udp。

nc -u host port # 连接到一个 udp 端口

nc -u -l 127.0.0.1 1026 # 在 udp 模式下监听 1026 端口。

等等

# android - FragmentActivity：正确的片段实例化

> ID：15213882
> 
> 赞同：1
> 
> 时间：2013-03-05T00:49:33.757
> 
> 标签：android, android-fragments, android-orientation

我有 a`FragmentActivity`和两个`Fragment`s，比如说`FrgMaster`(a `ListFragment`) 和`FrgDetail`。我有两个布局 XML 文件：一个包含一个`FrameLayout`（用于纵向模式），一个包含两个`FrameLayout`s（用于横向）。我想实例化我的片段，`FragmentActivity`所以`onCreate()`我有类似的东西：

```
if (savedInstanceState == null) {
    final FrgMaster fragment = new FrgMaster();
    // Add the fragment to the FrameLayout
    this.getSupportFragmentManager()
            .beginTransaction()
            .add(R.id.frame_for_master, fragment, FrgMaster.MY_TAG)
            .commit();
} 
```

我浏览列表并单击位置。现在，当我改变方向时，上面的代码不起作用，因为`savedInstanceState`is not `null`; 因此片段不会添加到布局中。如果我删除`if`条件，我最终会得到多个片段，一个用于每个方向变化的片段，堆叠在一起。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:04:07.493

不清楚您是否在布局文件中包含指向片段的链接。如果你是，那么你根本不需要 beginTransacton().add(x).commit() 部分。

假设您没有在 XML 中添加片段，而仅在代码中添加片段，您可能会将代码更改为以下内容：

```
FragmentManager manager = this.getSupportFragmentManager();
FrmMaster fragment = manager.findFragmentById(FrgMaster.MY_TAG);
if (fragment == null)
{
    manager
        .beginTransaction()
        .add(R.id.frame_for_master, fragment, FrgMaster.MY_TAG)
        .commit();
} 
```

编辑：更改语法以遵循 OP 的风格

# c# - 如何以编程方式将域服务端点添加到 web.config

> ID：15213883
> 
> 赞同：0
> 
> 时间：2013-03-05T00:49:33.970
> 
> 标签：c#, xml, wcf-ria-services, configurationmanager, configurationsection

我需要通过 C# 以编程方式操作站点的 web.config 的帮助。有问题的站点托管了一个 Silverlight 5 应用程序，该应用程序通过 WCF RIA 服务与服务器运行时通信。

我正在编写的代码是用于测试 WCF Ria 服务堆栈的自动化构建-部署-测试场景的引导加载程序的一部分。问题在于，为了正确测试服务，单元测试代码需要能够通过新`soap`端点与 Ria 服务进行通信。

为了有效地完成这项工作，站点需要`Microsoft.ServiceModel.DomainServices.Hosting`在其 bin 文件夹中的 dll 副本，以及`soap`使域服务配置部分如下所示的新端点：

```
<system.serviceModel>
    <domainServices>
        <endpoints>
            <add name="OData" .../>
            ***<add name="Soap" type="Microsoft.ServiceModel.DomainServices.Hosting.SoapXmlEndpointFactory, Microsoft.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>***
        </endpoints>
    </domainServices>
</system.serviceModel> 
```

虽然我相信我可以通过 C# `xml`api 修改 web.config，但我想知道是否有另一种方法可以通过 ConfigurationManager 进行修改？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-05T01:41:20.237

我会将配置操作作为构建脚本的一部分。

我目前在我的项目中使用[YDeliver](https://github.com/manojlds/ydeliver)作为构建/部署框架，因为它运行在 Powershell 之上，所以我在 posh 中使用[xml api操作 XML。](http://www.codeproject.com/Articles/61900/PowerShell-and-XML)

# asp.net-mvc - 当我使用 Ajax 更新面板时，是否需要在那一刻设置所有事件？

> ID：15213885
> 
> 赞同：1
> 
> 时间：2013-03-05T00:49:59.127
> 
> 标签：asp.net-mvc, jquery, asp.net-mvc-4

我将展示一些我的代码。在我看来，我有一个 HTMLForm，我想将它与 Ajax 一起使用。

查看以下代码进行提交。

```
var editQuestionFormSubmit = function () {
    $.ajax({
        url: this.action,
        type: this.method,
        data: $(this).serialize(),
        success: function (result) {
            $('#target2').html(result);
            //$("#editQuestionForm").submit(editQuestionFormSubmit);
        }
    });
    return false;
};

var editQuestion = function () {
    $.ajax({
        url: this.href,
        type: "get",
        success: function (result) {
            $("#target2").html = result;
            $("#editQuestionForm").submit(editQuestionFormSubmit);
        }
    });
    return false;
}; 
```

该`editQuestion`功能是用户第一次单击超链接时，结果包含一个表单，这就是我将其设置为提交事件的原因。

现在，当用户发布帖子时，让我们假设它没有经过验证，所以我再次显示相同的表单，但使用当前模型

```
 public ActionResult EditQuestion(QuestionTemplate qt)
    {
        if (ModelState.IsValid)
        {
           ....
           return ...
        }

        return PartialView("_EditQuestion", qt);
    } 
```

因此，最后一个代码我返回相同的表单，但显示要验证的错误，并且我必须再次注册提交事件处理程序。我是在做一个好方法还是有更好的方法不在每个回调中注册每个事件处理程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:28:30.857

达夫，

在`submit`事件的情况下，不能将处理委托给祖先元素，因为事件不会冒泡。这否定了您处理由动态添加的元素引起的事件的首选方法。

因此，使用您的验证方法，`submit`每次替换表单时都必须附加事件处理程序。

但是，您应该能够避免这样做的需要，方法是仅替换表单的*内容*(its )，在文档中`.html()`保留一个原始的硬编码元素。`<form>`

# visual-c++ - 从 Visual C++ 中的文本框输入中解析字符串

> ID：15213888
> 
> 赞同：0
> 
> 时间：2013-03-05T00:50:15.327
> 
> 标签：visual-c++

这是我的问题，如何从 Visual C++ 中的文本框输入解析字符串。我有这样的项目，我的投入需要一年。无论是否是闰年，该程序都会在标签中给出结果。我擅长 C++/CLI，但 Visual 有点不同。请在这里真的需要帮助。

这是部分代码：

```
 String ^ year;
      year = textBox1->Text;

     // The code for parsing will be put here

      bool isLeapYear = ((year % 4 == 0) && (year % 100 != 0) || (year % 400 == 0));

             if (isLeapYear)
             {
                label1->Text="Is a leap year";
             } else
                label1->Text="Is not a leap year";
             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:59:43.617

查看 .NET [System.Convert](http://msdn.microsoft.com/en-us/library/system.convert.aspx)类以从一种类型转换为另一种类型。

# visual-studio-2012 - ironpython winform 键盘轮询

> ID：15213891
> 
> 赞同：1
> 
> 时间：2013-03-05T00:50:36.640
> 
> 标签：visual-studio-2012, keyboard, ironpython

我正在使用 ironpython 制作一个 winform 应用程序。我需要能够不断地轮询键盘以获取用户输入。我已经尝试了一些事情，但无法让任何工作。我在 Visual Studio 2012 工作。有没有办法进行这个键盘轮询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T00:08:08.170

人们会期望使用 System.Windows.Input 中的 .net 键盘类和方法。但是，当我尝试导入该命名空间时，我只发现 ICommand 已实现。我在 IronPython 2.7.4 上。

```
import clr
clr.AddReference('System.Windows')
import System.Windows.Input as Input

dir(Input) 
```

可悲的是，这只会产生：

```
['ICommand'] 
```

所以我想在 IronPython 中做到这一点的方法是查找 Python 的输入处理:(

# javascript - 实施 通过 d3 的工具提示 container

> ID：15213898
> 
> 赞同：4
> 
> 时间：2013-03-05T00:51:06.017
> 
> 标签：javascript, internet-explorer-8, d3.js, raphael

一般来说，我对 D3、svg 和 javascript 比较陌生，所以请多多包涵：]

我一直在尝试使用 D3 创建绘图和图形。我使用 D3 创建了一个小图，并一直试图使其与 IE8 兼容。这是我的图表或多或少工作构建的链接。

[http://jsfiddle.net/kingernest/YDQR4/1/](http://jsfiddle.net/kingernest/YDQR4/1/)

经过一番研究，我很快意识到，在 IE8 上运行 D3 的唯一方法就是将其他 API 与 D3 结合使用。幸运的是，我发现有人已经在一个名为“r2d3”的项目中投入了一些工作，据我了解，该项目使用 raphael 在 IE8 窗口上绘制画布，而不是使用 SVG（IE8 显然不支持）。

我已经能够在屏幕上绘制项目，这是成功的一半。但是，我遇到了很多问题，尤其是我的工具提示。我的工具提示被编写为一个 DIV 容器，它在数据圈悬停时浮动并更改位置/不透明度。这似乎在其他浏览器中工作正常，但使用 r2d3，我无法让它工作。我怀疑这是因为我在（在#main div 中）之外创建了 div 工具提示。但是，我尝试将工具提示放置在 SVG 容器内，但无济于事。然后我做了更多的研究，发现我必须在标签内包装一个 div 容器，但经过一些实验后，我仍然无法让工具提示在 IE 中正常工作。我试图将 SVG 组 () 包装起来，并改变了这个对象的位置，

在这一点上，我有点卡住了，想知道是否有人对我如何能够成功实现工具提示有任何建议。我还注意到，在我的函数中使用 d3.select(this) 尝试选择特定数据点（在本例中为圆形）时，在尝试访问或修改该项目的属性时似乎会出现许多问题，但我认为这完全是另一个问题。

任何帮助是极大的赞赏！

我当前如何创建工具提示的示例：

```
 //Create tooltip element
 var tooltip = d3.select("#main")
     .append("div")
         .attr("class", "tooltip")
     .style("position", "absolute")
     .style("z-index", "10")
     .style("opacity", 0);

function mousemove()
{    //Move tooltip to mouse location
    return tooltip.style("top", (event.pageY-10)+"px").style("left",(event.pageX+10)+"px");                            
}

//Mouseover function for circles, displays shortened tooltip and causes other circles to become opaque
function mouseover()
{
    var myCircle = d3.select(this);

    d3.select(this).attr("class", "dataCircleSelected");    //Color circle green

    tooltip.html(    //Populate tooltip text
        "Username: " + d3.select(this).attr("username") + "<br/>" +
        "Session ID: " + d3.select(this).attr("sessionid") + "<br/>" + 
        "Impact CPU: " + d3.select(this).attr("impact")            
    )
    .transition()
    .duration(250)
    .style("opacity", .7);

    //After 1000ms, make other circle opaque
    svg.selectAll("circle")
    .filter(function(d, i){    //return every other circle
        return !d.compare(myCircle[0][0].__data__);
    })
    .transition().delay(1000)
    .style("opacity", .2);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:22:47.743

您是否尝试过在（写而不是）中显式使用`foreignObjects` **和**使用 xhtml 命名空间作为 html 标记，如下所述：[SVG 中的 HTML 元素未显示](https://stackoverflow.com/questions/15148481/html-element-inside-svg-not-displayed/15153990#15153990)？`foreignObject``xhtml:div``div`

这将为工具提示定义提供类似的东西

```
var tooltip = d3.select("#main").append("foreignObject")
     .append("xhtml:div")
         .attr("类", "工具提示")
     .style("位置", "绝对")
     .style("z-index", "10")
     .style("不透明度", 0);

```

# java - 如何确定一个类是否已被应用程序加载器加载

> ID：15213900
> 
> 赞同：0
> 
> 时间：2013-03-05T00:51:15.153
> 
> 标签：java, jvm

我首先检索了类的加载器，然后

sun.misc.Launcher.AppClassLoader 的加载器实例

但 Eclipse 抱怨 sun.misc.Launcher.AppClassLoader 类型不可见。

任何想法？

# java - 创建一个跟随触摸/鼠标输入的点，但与另一个固定点保持固定距离

> ID：15213906
> 
> 赞同：0
> 
> 时间：2013-03-05T00:51:50.760
> 
> 标签：java, math, libgdx

我想在屏幕中间创建一个固定点，当用户在屏幕上触摸和拖动时，它应该创建另一个点，该点将跟随用户输入，但始终与另一个固定点保持固定距离。我可以很容易地做到这一点，以便游戏告诉我第二个点何时在那个确切的距离上，同时拖动它。

```
public boolean touchDown(InputEvent event, float x, float y, int pointer, int button) {
    setPosition(a, b);
    return true;
} 
```

所以基本上我想知道如何正确设置a（x坐标）和b（y坐标）。此外，我不确定这是否更像是一个数学问题，或者 libgdx（或 java）是否有任何我可以使用的漂亮东西？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:03:06.400

对于 Libgdx 特定的支持，我知道的并不多。也就是说，我认为您可以使用[`Vector2`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/math/Vector2.html)然后对其进行归一化（[`Vector2.nor()`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/math/Vector2.html#nor%28%29)），然后将其乘以您的“固定距离”（[`Vector2d.mul()`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/math/Vector2.html#mul%28float%29)）

```
private final Vector2 perimiterPoint = new Vector2();
private float centerX = ...;
private float centerY = ...;
private float radius = ...; // The "fixed distance" radius of your circle.

public boolean touchDown(InputEvent event, float x, float y, int pointer, int button) {
    perimiterPoint.set(x - centerX, y - centerY).nor().mul(circleRadius)
    setPosition(perimiterPoint.x, perimiterPoint.y);
    return true;
} 
```

# asp.net - HttpServerUtility.Transfer 与 Server.Transfer？

> ID：15213909
> 
> 赞同：0
> 
> 时间：2013-03-05T00:52:19.263
> 
> 标签：asp.net, server.transfer, httpserverutility

[HttpServerUtility.Transfer](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.transfer%28v=vs.100%29.aspx)和[Server.Transer](http://msdn.microsoft.com/en-us/library/ms525800%28v=vs.90%29.aspx)有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T01:01:25.733

他们是一样的。具有该`Transfer`方法的类的名称是，但可以通过该属性从多个对象中获得`HttpServerUtility`的实例。`HttpServerUtility``Server`

例如，`Page`该类有一个`Server`属性，因此当您在网页的方法中时，您可以使用`Server.Transfer`来调用该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T00:55:15.523

`Server.Transfer`是 ASP Classic 中的一种 VBScript 方法。

`HttpServerUtility.Transfer`是做同样事情的 ASP.Net 方法。

# javascript - 为您的 HTML5 应用程序创建键盘快捷键？

> ID：15213912
> 
> 赞同：6
> 
> 时间：2013-03-05T00:52:29.417
> 
> 标签：javascript, jquery, html, events, keyboard-shortcuts

如何为 HTML5 应用程序创建键盘快捷键？使用键事件不起作用，因为某些浏览器已经为内置功能定义了大部分输入，例如另存为...，（这对于交互式应用程序无用）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T01:05:20.880

好吧，那个对我有用：（Chrome中的CTRL-S）

```
$(document).keydown(function(evt){
    if (evt.keyCode==83 && (evt.ctrlKey)){
        evt.preventDefault();
        alert('worked');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T03:10:56.207

试试看。

[http://www.openjs.com/scripts/events/keyboard_shortcuts/#add_docs](http://www.openjs.com/scripts/events/keyboard_shortcuts/#add_docs)

添加快捷方式的示例

```
shortcut.add("Ctrl+B",function() {
alert("Bold");}); 
```

删除快捷方式的示例

```
shortcut.remove("Ctrl+B"); 
```

# sendmail - 使用 Zend_Mail 时如何更改默认邮件发件人（别名/通过）？即删除gmail中的“via”

> ID：15213915
> 
> 赞同：0
> 
> 时间：2013-03-05T00:52:48.633
> 
> 标签：sendmail, php, zend-mail

当我使用 Zend Mail 使用以下代码发送电子邮件时：

```
 $to = array("email1@gmail.com","email2@hotmail.com","email3@yahoo.com");        
    $msg = file_get_contents("email.html");             
    $mail = new Zend_Mail ( "UTF-8" );
    $mail->setMessageId ( "MyMsg__" . md5 ( microtime () ) );
    $mail->addHeader ( "Content-Type", "text/html; charset=UTF-8" );
    $mail->setBodyHtml ( $msg  );
    $mail->setSubject ( "News Letter Test" );       
    $mail->setReplyTo('newsletter@mydomain.com', 'Some Name');
    $mail->addHeader('MIME-Version', '1.0');
    $mail->addHeader('Content-Transfer-Encoding', '8bit');
    $mail->addHeader('X-Mailer:', 'PHP/'.phpversion());
    $mail->setFrom ('newsletter@mydomain.com', 'Some Name');
    foreach($to as $ml){
        $mail->addTo ( $ml );       
    }
    $mail->send ( $transport ); 
```

我在gmail中得到这个：

**newsletter@mydomain.com 通过 u4552323.onlinehome-server.com**

如何删除这部分：**通过 u4552323.onlinehome-server.com**

请注意，我有完全的 root 访问权限，这是一个专用服务器，如果问题出在 send_mail 配置或主机中，我该如何更改这部分**u4552323.onlinehome-server.com**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:08:49.410

[当邮件通过另一个域发送时](http://support.google.com/mail/bin/answer.py?hl=en&answer=1311182)，Google 会在 Gmail 中显示“通过”信息。在您的情况下，邮件来自域中的地址`mydomain.com`，但邮件服务器位于`onlinehome-server.com`域中。

您可以通过域的 SMTP 服务器发送邮件来避免这种情况`mydomain.com`（假设您的托管服务提供商不会阻止此类流量）。如果可以控制服务器的 DNS 和邮件服务器配置`onlinehome-server.com`，您还可以配置 SPF 和 DKIM，如 Google 文档中所述（但这可能不是一个选项，具体取决于您的托管环境）。

# c# - 如何使用匿名 LINQ 结果填充 DataTable

> ID：15213919
> 
> 赞同：5
> 
> 时间：2013-03-05T00:53:06.720
> 
> 标签：c#, asp.net, linq, data-binding, ado.net

我有以下 LINQ 查询：

```
var timesheets = from timesheet in entities.Timesheets
    join timesheetTask in entities.Timesheet_Task on timesheet.Id equals timesheetTask.Timesheet_Id
    join task in entities.Tasks on timesheetTask.Task_Id equals task.Id
    join project in entities.Projects on task.Project_Id equals project.Id
    join department in entities.Departments on project.Department_Id equals department.Id
    where timesheet.Employee_Id == employeeId
    select new
    {
       date = timesheet.Date,
       taskName = task.Name,
       projectName = project.Name,
       projectDesc = project.Description,
       departmentName = department.Name,
       taskEstimatedHours = task.Estimated_Hours,
       timesheetHours = timesheetTask.Hours
    }; 
```

如何将这些结果放入 DataTable 中，然后我可以将其绑定到 DataGridView 控件？

这就是我目前正在做的事情：

```
 table.Columns.Add("date");
    table.Columns.Add("taskName");
    table.Columns.Add("projectName");
    table.Columns.Add("projectDesc");
    table.Columns.Add("departmentName");
    table.Columns.Add("taskEstimatedHours");
    table.Columns.Add("timesheetHours");

    foreach (var item in timesheets)
    {
        table.Rows.Add(item.date, item.taskName, item.projectName,
            item.projectDesc, item.departmentName, item.taskEstimatedHours,
            item.timesheetHours);
    }
} 
```

**更新：**这是我更新的代码：

```
DataTable table = new DataTable();

using (PTMS_DataEntities entities = new PTMS_DataEntities())
{
    var timesheets = from timesheet in entities.Timesheets
                     join timesheetTask in entities.Timesheet_Task on timesheet.Id equals timesheetTask.Timesheet_Id
                     join task in entities.Tasks on timesheetTask.Task_Id equals task.Id
                     join project in entities.Projects on task.Project_Id equals project.Id
                     join department in entities.Departments on project.Department_Id equals department.Id
                     where timesheet.Employee_Id == employeeId
                     select new
                     {
                         date = timesheet.Date,
                         taskName = task.Name,
                         projectName = project.Name,
                         projectDesc = project.Description,
                         departmentName = department.Name,
                         taskEstimatedHours = task.Estimated_Hours,
                         timesheetHours = timesheetTask.Hours
                     };

    table.Columns.Add("date", typeof(DateTime));
    table.Columns.Add("taskName", typeof(string));
    table.Columns.Add("projectName", typeof(string));
    table.Columns.Add("projectDesc", typeof(string));
    table.Columns.Add("departmentName", typeof(string));
    table.Columns.Add("taskEstimatedHours", typeof(int));
    table.Columns.Add("timesheetHours", typeof(int));

    List<DataRow> list = new List<DataRow>();
    foreach (var item in timesheets)
    {
        //table.Rows.Add(item.date, item.taskName, item.projectName,
        //    item.projectDesc, item.departmentName, item.taskEstimatedHours,
        //    item.timesheetHours);

        var row = table.NewRow();

        row.SetField<DateTime>("date", item.date);
        row.SetField<string>("taskName", item.taskName);
        row.SetField<string>("projectName", item.projectName);
        row.SetField<string>("projectDesc", item.projectDesc);
        row.SetField<string>("departmentName", item.departmentName);
        row.SetField<int>("taskEstimatedHours", item.taskEstimatedHours);
        row.SetField<int>("timesheetHours", item.timesheetHours);

        list.Add(row);
    }

    table = list.CopyToDataTable();
} 
```

这是我在 SSMS 中测试的 SQL 查询（应该相当于 LINQ 查询）：

```
SELECT dbo.Department.Name, dbo.Task.Name AS Expr1, dbo.Task.Estimated_Hours, dbo.Timesheet.Date, dbo.Project.Name AS Expr2, dbo.Project.Description, 
                  dbo.Timesheet_Task.Date AS Expr3
FROM     dbo.Department INNER JOIN
                  dbo.Project ON dbo.Department.Id = dbo.Project.Department_Id INNER JOIN
                  dbo.Task ON dbo.Project.Id = dbo.Task.Project_Id INNER JOIN
                  dbo.Timesheet_Task ON dbo.Task.Id = dbo.Timesheet_Task.Task_Id INNER JOIN
                  dbo.Timesheet ON dbo.Timesheet_Task.Timesheet_Id = dbo.Timesheet.Id 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T01:05:12.907

如果你真的想填充 DataTable：

```
// your query
var timesheets = ...

// design table first
DataTable table = new DataTable();
table.Columns.Add(new DataColumn
    {
        ColumnName = "TaskName",
        DataType = typeof(String);
    });
...

List<DataRow> list = new List<DataRow>();
foreach (var t in timesheets)
{
    var row = table.NewRow();
    row.SetField<string>("TaskName", t.taskName); // extension method from System.Data.DataSetExtensions.dll
    ...

    list.Add(row);
}

DataTable table = list.CopyToDataTable(); // extension method too 
```

* * *

或者更多的LINQ方式：

```
timesheets
    .Select(t =>
        {
            var row = table.NewRow();
            ...
            return row;
        })
    .CopyToDataTable(); 
```

* * *

或使用相同的查询语法。实现一个方法：

```
static DataRow NewRow(DataRow row, string taskName, ....)
{
    ...
} 
```

然后查询自己：

```
(from ...
 where ...
 select NewRow(table.NewRow(), task.Name, ...)
).CopyToDataTable(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T00:53:46.103

打电话`.ToList()`。
结果`List<T>`也可以绑定到 DataGridView，并且比 DataTable 更易于使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-27T17:02:43.413

为此，我正在使用[FastMember](https://code.google.com/p/fast-member/)。它使用[IL 而不是反射](http://blog.marcgravell.com/2012/01/playing-with-your-member.html)（更快）自动迭代所有属性和字段值。来自网站的代码示例：

```
IEnumerable<SomeType> data = ...
var table = new DataTable();
using(var reader = ObjectReader.Create(data))
{
    table.Load(reader);
} 
```

# ios6 - 奇怪的 Xcode 4.6 相关错误

> ID：15213922
> 
> 赞同：0
> 
> 时间：2013-03-05T00:53:33.237
> 
> 标签：ios6, xcode4.6

我们得到的错误是这样的：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[_CDSnapshot_Widget_ unlockObjectStore]: unrecognized selector sent to instance 0x1c5a4350' 
```

有时向 Widget 类发送该选择器，有时是 __NSCFString，有时崩溃是这样的：

```
[NSManagedObjectContext unlockObjectStore]: message sent to deallocated instance 0x1ec658c0 
```

我想我已经缩小了问题发生的范围，但我不知道为什么这段代码会导致它。这是我们的数据访问类的示例结构：

```
// DataController.m
static NSPersistentStoreCoordinator     *_persistentStoreCoordinator;
static NSManagedObjectModel             *_managedObjectModel;
static NSManagedObjectContext           *_mainManagedObjectContext;

@implementation DataController
- (NSManagedObjectContext *) privateManagedObjectContext {
    return [DataController buildManagedObjectContextForConcurrencyType:NSPrivateQueueConcurrencyType];
}

- (NSManagedObjectContext *) defaultManagedObjectContext {
    return [self managedObjectContextForConcurrencyType: self.defaultConcurrencyType];
}

- (NSManagedObjectContext *) managedObjectContextForConcurrencyType: (NSManagedObjectContextConcurrencyType) type {
    if (type == NSMainQueueConcurrencyType)
        return [self mainManagedObjectContext];
    else if (type == NSPrivateQueueConcurrencyType)
        return [self privateManagedObjectContext];

    return nil;
}

// calling _dataController.defaultManagedObjectContext from within the Widgets class
// essentially calls this method for a new context using NSPrivateQueueConcurrencyType as 
// the type parameter
+ (NSManagedObjectContext *) buildManagedObjectContextForConcurrencyType: (NSManagedObjectContextConcurrencyType) type {
    NSManagedObjectContext *context = [[NSManagedObjectContext alloc] initWithConcurrencyType: type];
    [context setUndoManager: nil];
    [context setMergePolicy: NSMergeByPropertyObjectTrumpMergePolicy];
    [context setPersistentStoreCoordinator: _persistentStoreCoordinator];
    return context;
}

@end 
```

和我们的小部件类

```
// Widgets.m
static DataController *_dataController;

@implementation Widgets
+ (void) initialize {
    _dataController = [[DataController alloc] init];
}

+ (NSArray *)certainWidgets {
    return [self certainWidgetsInManagedObjectContext:_dataController.defaultManagedObjectContext];
}

+ (NSArray *) certainWidgetsInManagedObjectContext: (NSManagedObjectContext *) context {
    // boiler plate CoreData fetching code
}
@end 
```

这是用于获取小部件的代码示例

```
dispatch_async(dispatch_get_global_queue(0, 0), ^{
    for (Widget *w in [Widgets certainWidgets]) {
        if ([w.isValid intValue]) {
            // do something extraoridarily fantastic with the widget
        }
    }
}); 
```

这只发生在 Xcode 4.6，发布模式（不在调试中）。我们在 Xcode 4.6 发行说明中没有看到任何可以让我们了解正在发生的事情的线索。

我怀疑这个问题与我们如何构建数据访问类 (DataController) 以及我们使用类方法来处理 Widgets 类中的所有数据访问这一事实有关。我怀疑的原因是，当我们从 Widgets 类中删除类方法并使其成为实例方法时，去掉 +initialize 方法，并为 Widgets 类的每个实例设置一个 NSManagedObjectContext ，问题似乎就解决了离开。

澄清一下，我想我已经解决了这个问题，但是在我理解为什么上述更改可以解决它之前，我不愿意推出修复程序。看起来存在某种我们没有注意到的内存问题或糟糕的编程范式。任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:57:09.943

原来这是一个与 CLang 优化相关的错误。我们发现其他一些人遇到了同样的问题。关闭所有优化似乎可以解决问题。

对我们来说，它发生在创建静态数据管理实例、产生新线程并使用该静态实例创建托管对象上下文时。

我们的解决办法是重新思考我们的数据管理范式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-20T10:49:05.007

如果您在您的应用程序上使用此屏幕，或者它出现多次并在第二次崩溃，则请检查您在此屏幕上的内存管理。当您在内存中保存多个屏幕副本时，可能会出现这种情况。例如，检查通知中心删除观察者。

# java - Maven，包不存在

> ID：15213923
> 
> 赞同：17
> 
> 时间：2013-03-05T00:53:34.380
> 
> 标签：java, maven, intellij-idea

我有一个模块，其 pom 文件是：

```
<groupId>com.mycompany.Common</groupId>
<artifactId>common</artifactId>
<packaging>pom</packaging>
<version>1.0-SNAPSHOT</version>
<name>common module</name> 
```

在那个工件（'common'）中，我有一个名为 com.mycompany.common.objects 的包。在消费包中，我的 pom 文件是：

```
 <dependency>
            <groupId>com.mycompany.Common</groupId>
            <artifactId>common</artifactId>
            <version>1.0-SNAPSHOT</version>
            <type>pom</type>
 </dependency> 
```

当我运行 mvn install 它总是抱怨：包 com.mycompany.common.objects 不存在。

我尝试在错误所在的类中显式导入：

```
import com.mycompany.common.objects 
```

没运气。我在 IDE（IntelliJ）和命令行中都试过了。任何的想法？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T01:14:21.873

从您的示例中，我们看不到任何包含`com.mycompany.common.objects`您正在使用的包的工件。

您正在将依赖项 com.mycompany.Common:common 添加为 POM（并且您也将 com.mycompany.Common:common 的打包声明为 POM）。如果它实际上是一个包含您需要使用的包的 JAR 工件，`packaging`则从 POM 和依赖项中删除 （这意味着，使用默认的 JAR）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-05-18T19:20:50.857

对于遇到此问题且不熟悉 java 的任何人，请确保所述包存在于您的本地存储库中。Maven 有一个本地存储库`~/.m2`，其中安装了包以供本地访问，因此即使您的依赖包被正确声明为依赖项`pom.xml`并且已编译并存在于您的项目中，如果它不存在于本地存储库中，`mvn compile`则会触发`"package does not exist"`错误。

要解决这个问题：

在缺少的包文件夹中，执行：

`mvn install //--> this will package and install your missing package in the local repo`

然后在您要编译的项目中：

`mvn compile // --> now that the missing package is in the local repo it should work`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-08-09T14:53:07.517

使用 IntellijIDEA 时，生成的文件可能会导致此问题。写作

```
mvn idea:idea 
```

在 IntellijIDEA Maven 控制台上重置这些文件对我有用。另请参阅： [IntelliJ 中的包不存在错误](https://stackoverflow.com/questions/20137020/package-doesnt-exist-error-in-intellij)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T01:34:31.487

请纠正我，如果我错了。我知道*common*是一个*POM*，它定义了几个依赖于其他模块使用的意图。[导入依赖项](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Importing_Dependencies)可能满足您的要求。

例如

```
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>com.mycompany.Common</groupId>
            <artifactId>common</artifactId>
            <version>1.0-SNAPSHOT</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement> 
```

我希望这可能会有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-19T07:34:17.417

我最近遇到了同样的问题。我项目中的所有内容都使用依赖项等正确设置。我尝试删除 /target 目录但没有任何效果。

最后，我通过从依赖项目中删除模块依赖关系然后读取依赖关系来解决它。不确定后台发生了什么，但必须对类路径进行某种刷新。也许问题是由于 Maven 设置造成的。

希望它可以帮助从搜索引擎找到这个问题的人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-02T16:15:14.193

不确定是否存在文件损坏或什么，但在确认正确的 pom 配置后，我能够通过从本地 m2 存储库中删除 jar 来解决此问题，当我运行测试时强制 Maven 再次下载它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-06T14:42:08.543

对我来说，问题出在我的 pom.xml 中的**sourceDirectory**和**testSourceDirectory**节点上。我正在使用

```
<sourceDirectory>${basedir}/src/test</sourceDirectory>
<testSourceDirectory>${basedir}/test</testSourceDirectory> 
```

并将其更改为

```
<sourceDirectory>../src/test/java</sourceDirectory>
<testSourceDirectory>../src/test/java</testSourceDirectory> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-05-05T21:06:27.993

您需要将 maven-plugin 添加到（每个）子模块中（用于编译主和测试源）

```
 <plugins>
        <plugin>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-maven-plugin</artifactId>
        </plugin>
     <plugins> 
```

然后将插件管理添加到父 pom 中，用于集中插件配置（版本...）

```
 <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
         </pluginManagement> 
```

然后你可以将你的依赖添加到依赖模块 pom

```
<dependency>
        <groupId>com.mycompany.Common</groupId>
        <artifactId>common</artifactId>
        <version>1.0-SNAPSHOT</version>
        <type>pom</type>
</dependency> 
```

[http://www.jouvinio.net/wiki/index.php/Projet_Maven_multi-modules](http://www.jouvinio.net/wiki/index.php/Projet_Maven_multi-modules)

# c# - 使用 NAudio 提高波形文件的音量

> ID：15213925
> 
> 赞同：0
> 
> 时间：2013-03-05T00:53:38.197
> 
> 标签：c#, html5-audio, naudio

我是音频菜鸟

我希望通过将数据作为字符串传递来在 html 页面中嵌入音频，例如 < Audio src="data:audio/wav;base64,AA....." /> 这样做可行，但我需要提高音量。我尝试使用 NAudio，但它似乎做了一些转换并且不再播放。这是我用来提高音量的代码：

```
public string ConvertToString(Stream audioStream)
{
audioStream.Seek(0,SeekOrigin.Begin);
byte[] bytes = new byte[audioStream.Length];
audioStream.Read(bytes,0,(int)audioStream.Length);
audioStream.Seek(0,SeekOrigin.Begin);
return Convert.ToBase64String(bytes);
}

var fReader = new WaveFileReader(strm);
var chan32 = new WaveChannel32(fReader,50.0F,0F);
var ouputString = "data:audio/wav;base64," + ConvertToString(chan32); 
```

但是当我将 outputString 放入音频标签时，它无法播放。NAudio 做了什么类型的转换，我怎样才能让它给我音频流，以便我可以序列化它并且浏览器将能够播放它？或者另一个建议：如果 NAudio 成为重量级的东西，比如提高音量这样简单的事情，对我来说什么是更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:33:43.447

我不是在网页中嵌入 WAV 文件的专家（老实说，这似乎不是一个好主意 - WAV 是向网页传递声音的最低效的方式之一），但我希望整个 WAV 文件，包括标题需要编码。您只是在写出示例数据。因此，使用 NAudio，您需要使用 WaveFileWriter 写入 MemoryStream 或临时文件来创建可写入页面的音量调整 WAV 文件。

您的代码还有两个额外的问题。一是你已经使用了 32 位浮点，使得 WAV 文件格式更加低效（原始文件的大小增加了一倍）。在创建 WAV 文件之前，您需要使用 Wave32To16Stream 返回到 16 位。第二个是您将每个样本乘以 50。这几乎肯定会严重扭曲信号。放大 WAV 文件时很容易发生削波，这取决于原始录音中有多少动态余量。通常[动态范围压缩](http://en.wikipedia.org/wiki/Dynamic_range_compression)是比简单地增加音量更好的选择。

# python - 将 GEO 数据库与普通数据库分离

> ID：15213926
> 
> 赞同：1
> 
> 时间：2013-03-05T00:53:43.600
> 
> 标签：python, django, postgresql, postgis, geo

目前我有2个数据库

1.  主要（默认）数据库，包含用户、帖子等所有内容（这个在 PostgreSQL wie psycopg2 上运行）
2.  辅助（地理）数据库，仅包含地理数据（这个在 postgis 1.5 上运行）

Django 和 PG 不支持跨数据库关系是有充分理由的，我已经知道了，但是我将我的数据库分开了，因为我担心地理数据库针对地理数据进行了优化，如果我将所有数据混合在一个数据库中，那么整个性能会受此影响，而且我什至不知道我是否可以在一个数据库地理和普通数据中拥有所有内容。但我想将主要（1）数据库中的数据与辅助（2）数据库相关联。

这种方法是合理的还是完全错误的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:36:21.783

如果您关心性能，很明显数据需要在一个数据库中。

空间并不特殊，它只是另一种数据类型。我不明白为什么启用 PostGIS 会损害数据库的性能。但是，使用主数据库的副本对此进行测试并没有什么坏处，尤其是对于生产环境。

如果您担心启用 PostGIS 会向“公共”模式添加数百个功能，您可以创建一个“postgis”模式并将扩展名放在那里。[请参阅这些详细信息](http://www.postgresonline.com/journal/archives/248-Moving-PostGIS-to-another-schema-with-Extensions.html)。但是，我不确定 geodjango 将如何应对这种设置。

# c++ - C++：作为成员的抽象类

> ID：15213928
> 
> 赞同：6
> 
> 时间：2013-03-05T00:53:57.727
> 
> 标签：c++, coding-style, polymorphism, abstract-class

我有一个关于风格的问题。我有一个类（在我的例子中是一个选项），它取决于外生对象的值（利率）。我的目标是为外生对象 (Rate) 创建一个抽象基类，以便我可以构造变体，例如 SimulatedRate 或 ConstantRate，它们将在我的依赖类 Option 中工作。

但是，我在 C++ 中发现，因为我显然无法实例化抽象基类，所以我必须存储对基类的指针或引用。我担心的是，当实例化的外生对象超出依赖类之外的范围时，我的依赖类将指向垃圾。

有没有一种合理的方法可以在 C++ 中利用多态性来解决这个问题？

我当前的代码：

```
class Dependent 
{
public:
    Dependent(const Exogenous& exo) : exo_(exo) {}
    double getSomething() const { exo_.interfaceMethod(); }
private:
    Exogenous& exo_;
}

class Exogenous
{
public:
    virtual double interfaceMethod() const=0;
}

class ExogenousVariationA
{
public:
    virtual double interfaceMethod() const { return resultA; }
}

class ExogenousVariationB
{
public:
    virtual double interfaceMethod() const { return resultB; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T01:00:20.200

你的担心是有道理的。由于您将客户端传入的对象存储到引用中，因此您相信该客户端会在您需要时保持对象的活动状态。这很容易导致问题。当然，如果您使用原始指针来动态分配对象，情况也是如此。如果客户`delete`在您完成对象之前对其进行了处理，那么您又遇到了问题。

解决方案是强制客户端在对象的整个生命周期内赋予您某种责任。这样做的方法是请求一个智能指针。根据您的问题，您可能需要`std::unique_ptr`或`std::shared_ptr`。如果您想从客户那里获得所有权，请使用前者，如果您想与他们分享所有权，请使用后者。假设您选择`std::unique_ptr`，然后将您的`Dependent`类定义为：

```
class Dependent 
{
public:
    Dependent(std::unique_ptr<Exogenous> exo) : exo_(std::move(exo)) {}
    double getSomething() const { exo_->interfaceMethod(); }
private:
    std::unique_ptr<Exogenous> exo_;
} 
```

客户会像这样使用它：

```
std::unique_ptr<Exogenous> ptr(new ExogenousVariationA());
Dependent dep(std::move(ptr)); 
```

现在，当您的客户将对象传递`std::unique_ptr`给您时，他们将授予您对象的所有权。该对象仅在*您* `std::unique_ptr`被销毁时才会被销毁（这将是您`Dependent`被销毁时，因为它是成员）。

或者，如果您采取 a`std::shared_ptr`那么一旦客户和您`std::shared_ptr`的 s 都被销毁，该对象将被销毁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T02:07:55.137

sftrabbit 有一些很好的建议，我想补充一下：

*   您可以在抽象基类中创建一个`virtual` `clone()`方法（它不是*虚拟*基类 - 这完全是另外一回事）；该方法将在派生的利率类中实现，返回一个指向新的独立利率对象的指针，该对象可以由 Option 拥有；如果对象包含在您使用时更改的数据（例如来自计算或缓存），这将特别有用
*   你可能不想要这个，但是使用 std/boost 共享指针，也可以要求一个指向共享对象的弱指针......这样你就可以测试对象的“所有者”是否（不包括你）已经完成了它并触发了它的破坏

另外，要使用运行时多态性，您的`ExogenousVariationA`和 ~`B`类必须实际派生自`Exogenous`，并且您希望多态分派的方法必须是`virtual`. 看起来像这样：

```
class Exogenous
{
public:
    virtual double interfaceMethod() const=0;
}

class ExogenousVariationA : public Exogenous
{
public:
    double interfaceMethod() const { return resultA; }
} 
```

# java - 为什么是'headlines.add(xpp.nextText());' 给我一个错误？

> ID：15213929
> 
> 赞同：0
> 
> 时间：2013-03-05T00:53:58.430
> 
> 标签：java, android, eclipse, methods, boolean

我是使用 java 编程的新手。

只是想弄清楚为什么我的代码不起作用。

```
boolean insideItem = false;
int eventType = xpp.getEventType();
while (eventType != XmlPullParser.END_DOCUMENT){
    if (eventType == XmlPullParser.START_TAG){
        if (xpp.getName().equalsIgnoreCase("item")){
            insideItem = true;      
} else if (xpp.getName().equalsIgnoreCase("title")) {
    if (insideItem)
        headlines.add(xpp.nextText());
} else if (xpp.getName().equalsIgnoreCase("link")) {
    if (insideItem)
        links.add(xpp.nextText());**boolean insideItem = false;
int eventType = xpp.getEventType();
while (eventType != XmlPullParser.END_DOCUMENT){
    if (eventType == XmlPullParser.START_TAG){
        if (xpp.getName().equalsIgnoreCase("item")){
            insideItem = true;      
} else if (xpp.getName().equalsIgnoreCase("title")) {
    if (insideItem)
        headlines.add(xpp.nextText());
} else if (xpp.getName().equalsIgnoreCase("link")) {
    if (insideItem)
        links.add(xpp.nextText()); 
```

它给了我以下错误：

List 类型中的方法 add(capture#3-of ?) 不适用于参数 (String)

知道如何解决这个问题吗？有人可以向我解释为什么它不起作用吗？

编辑：

继承人整个 listActivity 代码：

```
public class Main_Menu extends ListActivity {

List<?> headlines;
List<?> links;

@SuppressWarnings("rawtypes")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main__menu);

headlines = new ArrayList();
links = new ArrayList();

try{
URL url = new URL ("http://feeds.ign.com/ign/all");

XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
factory.setNamespaceAware(false);
XmlPullParser xpp = factory.newPullParser();

xpp.setInput(getInputStream(url), "UTF_8");

boolean insideItem = false;
int eventType = xpp.getEventType();
while (eventType != XmlPullParser.END_DOCUMENT){
    if (eventType == XmlPullParser.START_TAG){
        if (xpp.getName().equalsIgnoreCase("item")){
            insideItem = true;      
} else if (xpp.getName().equalsIgnoreCase("title")) {
    if (insideItem)
        headlines.add(xpp.nextText());
} else if (xpp.getName().equalsIgnoreCase("link")) {
    if (insideItem)
        links.add(xpp.nextText());
    }
}else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){
    insideItem=false;
}

    eventType = xpp.next();

}   

} catch (MalformedURLException e) {
e.printStackTrace();
} catch (XmlPullParserException e) {
e.printStackTrace();
} catch (IOException e) {
e.printStackTrace();
}

@SuppressWarnings("unchecked")
ArrayAdapter adapter = new ArrayAdapter(this,
    android.R.layout.simple_list_item_1, headlines);

setListAdapter(adapter);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:58:02.247

如果没有看到列表的初始化很难说，但我猜你需要改变：

```
List links = new ArrayList(); 
```

到：

```
List<String> = new ArrayList<String>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:01:44.383

问：这是什么：`**boolean insideItem = false;`？？？

这是 XmlPullParser 的文档：

> * [http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)
> 
> 如果当前事件是 START_TAG 则如果下一个元素是 TEXT 则返回元素内容，或者如果下一个事件是 END_TAG 则返回空字符串，否则抛出异常。

我怀疑您只是在提取一个并非碰巧是文本元素的元素。

查看链接上的示例代码，并考虑相应地重组您的代码。

恕我直言...

# parse-platform - 如何使用 parse.com 返回包含关系数据的哈希？

> ID：15213930
> 
> 赞同：1
> 
> 时间：2013-03-05T00:54:06.527
> 
> 标签：parse-platform

我有一个 Post 类，我想获取与之相关的产品。我想编写一个查询来获取所有帖子以及与之关联的产品。下面是我希望哈希看起来像什么的粗略想法。

**Schema:**
Post - objectId, title
PostItem - post(pointer), product(pointer)
Product - objectId, title, price

**输出我想要** {'results': [{'objectId':'blah', 'title':'The Post', 'products': [{'objectId':'14', 'title':'First product', 'price':'20' }, {'objectId':'26', 'title':'第二个产品', 'price':'55' }] }, {'objectId':'blah2', 'title' :'第二篇文章', [{'objectId':'38', 'title':'Some product', 'price':'54' }, {'objectId':'26', 'title':'Another Product ', '价格':'88'}] }] }

这可以在一个查询中完成吗？我将如何使用 curl 和 parse.com 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-06T23:36:11.397

您需要`include`在指针旁边使用 key 选项。自从您发布以来已经将近一年了，我假设您已经弄清楚了，但是潜伏者可以在[此处](https://www.parse.com/docs/js_guide#queries-relational)阅读有关此内容的更多信息（在 Javascript 中） 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T00:30:00.140

如果这是多对多关系，请使用 Parse 关系。

# linux - 什么是“struct file_operations”参数？

> ID：15213932
> 
> 赞同：9
> 
> 时间：2013-03-04T16:51:44.233
> 
> 标签：linux, linux-kernel, driver, linux-device-driver

我正在实现一个 Linux 字符设备驱动程序。

linux/fs.h 头文件列出了没有参数名称的 file_operations。

例如

```
struct file_operations {
    struct module *owner;
    loff_t (*llseek) (struct file *, loff_t, int);
    ssize_t (*read) (struct file *, char __user *, size_t, loff_t *);
    ssize_t (*write) (struct file *, const char __user *, size_t, loff_t *);
    ssize_t (*aio_read) (struct kiocb *, const struct iovec *, unsigned long, loff_t);
    ssize_t (*aio_write) (struct kiocb *, const struct iovec *, unsigned long, loff_t);
    int (*readdir) (struct file *, void *, filldir_t);
    unsigned int (*poll) (struct file *, struct poll_table_struct *);
    long (*unlocked_ioctl) (struct file *, unsigned int, unsigned long);
    long (*compat_ioctl) (struct file *, unsigned int, unsigned long);
    int (*mmap) (struct file *, struct vm_area_struct *);
    int (*open) (struct inode *, struct file *);
    int (*flush) (struct file *, fl_owner_t id);
    int (*release) (struct inode *, struct file *);
    int (*fsync) (struct file *, loff_t, loff_t, int datasync);
    int (*aio_fsync) (struct kiocb *, int datasync);
    int (*fasync) (int, struct file *, int);
    int (*lock) (struct file *, int, struct file_lock *);
    ssize_t (*sendpage) (struct file *, struct page *, int, size_t, loff_t *, int);
    unsigned long (*get_unmapped_area)(struct file *, unsigned long, unsigned long, unsigned long, unsigned long);
    int (*check_flags)(int);
    int (*flock) (struct file *, int, struct file_lock *);
    ssize_t (*splice_write)(struct pipe_inode_info *, struct file *, loff_t *, size_t, unsigned int);
    ssize_t (*splice_read)(struct file *, loff_t *, struct pipe_inode_info *, size_t, unsigned int);
    int (*setlease)(struct file *, long, struct file_lock **);
    long (*fallocate)(struct file *file, int mode, loff_t offset,
              loff_t len);
}; 
```

告诉我每个参数是什么的文档在哪里？有些是显而易见的，但有些不是。如果可以的话，我更喜欢参考官方文档，但我就是找不到。

例如

```
int (*fsync) (struct file *, loff_t, loff_t, int datasync); 
```

有两个 loff_t 参数。我怎么知道他们在做什么？

我一直在谷歌搜索和阅读设备驱动程序书，但我找不到任何解释这些论点的文件。与编写 LDD3 时相比，一些论点也发生了变化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T17:11:17.197

LDD3 书对于理解大局仍然非常有用，但对细节没有帮助（它适用于内核 2.6.10，同时我们正在向 3.9 进军）。kernelnewbies[驱动程序页面](http://kernelnewbies.org/Drivers)可能是最新、最全面的资源。对于日常更改，[LWN](http://lwn.net)会定期对 API 更改进行评论，并针对新功能发布更长的概述。[H-online](http://www.h-online.com)提供一系列文章，详细介绍从内核版本到内核版本的变化，以及讨论和补丁的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T12:56:31.440

不久前我不得不实现我的第一个 linux 驱动程序。到目前为止，我认为你能做的最好的事情就是下载你正在开发的版本的内核源代码。在内核源代码树中有一个名为 /Documentation 的目录。我将从那里开始，最后我检查了这是内核的“官方文档”。

话虽如此，一旦您拥有了源代码，没有比阅读代码并查看其用途更好的文档了。对于这样的事情，我会查看 /drivers/fs/ 并找到一个使用该结构的示例，看看他们是如何使用它的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-11T14:42:22.663

[现在在Documentation/filesystems/vfs.rst](https://github.com/torvalds/linux/blob/v5.7/Documentation/filesystems/vfs.rst)也有一些最小的树内文档呈现在：[https://www.kernel.org/doc/html/latest/filesystems/locking.html#file-operations](https://www.kernel.org/doc/html/latest/filesystems/locking.html#file-operations)但它没有t真的说任何从签名中不明显的东西。他们应该把这些东西放在 Doxygen 评论上。

我还在以下位置维护了几个可运行的示例：[https](https://github.com/cirosantilli/linux-kernel-module-cheat/tree/9be19ae1cf3f3f346a5bc25f4a4d1e1cbac23cb3#file-operations) ://github.com/cirosantilli/linux-kernel-module-cheat/tree/9be19ae1cf3f3f346a5bc25f4a4d1e1cbac23cb3#file-operations可能会感兴趣。

# php - 保护 PHP 免受 MySQL 注入

> ID：15213936
> 
> 赞同：-5
> 
> 时间：2013-03-05T00:54:28.807
> 
> 标签：php, mysql, pdo, sql-injection

我是一个 PHP 新手，当我阅读 MySQL 注入和保护我的脚本时，我想我会在这里发布我到目前为止所拥有的内容。

下面是我当前的（工作，但不好的做法）代码。有人可以提供我的弱点，我能做些什么来解决？

```
<?php
require_once 'login.php'; //database information

$db_server = mysql_connect($db_hostname, $db_username, $db_password)
    or die("Unable to connect to MySQL: " . mysql_error());

mysql_select_db($db_database)
  or die("Unable to select database: " . mysql_error());

$email = $_POST['email'];

$sql="INSERT INTO users (email)
VALUES ('$email')";

$result = mysql_query($sql);

if($result){
header('Location: ../thankyou.php');
}
else {
echo "ERROR";
}

mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:07:28.200

正如您自己所说的菜鸟一样，没有时间像现在这样养成一些好习惯:)

```
$email = $_POST['email'];
$sql="INSERT INTO users (email) VALUES ('$email')"; 
```

是一个教科书式的[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)漏洞示例，这段代码迟早会[咬你一口。](http://xkcd.com/327/)原因是您信任收到的变量，并将其交给 SQL 引擎。想象一下如果有人进入会发生什么

`'); drop table users; --`

作为他们的电子邮件地址...

与其设计各种复杂的方案来清理输入，有一种铁定的技术可以使您的代码免受注入攻击：准备好的语句。由于您不应该开始开发 php 提供的已弃用的 mysql_ 调用，您应该切换到 PDO 或 mysqli_。我建议 PDO，它支持准备好的语句。更多关于准备好的陈述[在这里](http://php.net/manual/en/pdo.prepared-statements.php)。使用 PDO 和准备好的语句，您的示例将如下所示：

```
$stmt = $dbh->prepare("INSERT INTO users (email) VALUES (:email)");
$stmt->bindParam(':email', $email);
$stmt->execute(); 
```

您将拥有可以与 MySQL 以外的其他数据库系统一起使用并且不受注入攻击的未来证明代码。

# jquery - 我应该为 jQuery 滑块使用精灵吗？

> ID：15213943
> 
> 赞同：2
> 
> 时间：2013-03-05T00:55:09.040
> 
> 标签：jquery, html, css, performance, css-sprites

我知道使用 sprite 可以节省 HTTP 请求，因此可以加快页面加载速度。

这与 jQuery 滑块有什么关系？jQuery 滑块是在页面加载时加载所有图像还是根据需要加载它们？是否可以/推荐为 jQuery 滑块使用精灵？

如果有人想知道，我使用的滑块是： [https ://github.com/maelstrom/SecretSource](https://github.com/maelstrom/SecretSource)

基本的 HTML：

```
 <div id="banner-fade" class="responsive-container img-polaroid">
                <ul class="slideshow">
                  <li><img src="img/slider/image1.jpg" alt=""></li>
                  <li><img src="img/slider/image2.jpg" alt=""></li>
                  <li><img src="img/slider/image3.jpg" alt=""></li>
                </ul>
             </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:59:55.143

它与 jQuery Sliders 无关，您的 HTML 中的所有图像都将被获取。因此，如果您使用精灵，您将对三个图像发出一个请求，而不是三个单独的请求。是否可以？是的。受到推崇的？可能，您是否想最小化 HTTP 请求并让 HTML 稍微难一些，因为您现在必须定位图像？

请务必记住，通过制作精灵，您不能并行下载单独的图像。

最后，没有人可以告诉你总是以一种方式去做，你需要权衡利弊。在这种情况下，我会将这三个图像放入一个 sprite 中以保存网络连接，但其他人可能更喜欢并行下载的好处。

# java - 如何使用java从数据库中检索日期

> ID：15213947
> 
> 赞同：0
> 
> 时间：2013-03-05T00:55:18.007
> 
> 标签：java, sql, datetime

我需要从数据库中检索日期和时间。我的代码正确地检索了日期和时间，但是当我使用`toString()`它时，它会在时间的末尾添加一个“.0”。我怎样才能避免这种情况？

IE：数据库上的日期是`2013-03-05 11:05:25`

当我检索它并尝试将其转换为字符串时，它变为`2013-03-05 11:05:25.0`

```
 r.getTimestamp("mydate").toString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T00:57:28.643

根本不要将数据库上的值视为*字符串*值。把它想象成一个时间点。（我假设它确实*是*一个`TIMESTAMP`领域或类似的东西。）

如果您想以特定方式对其进行格式化，请执行此操作 - 但 2013-03-05 11:05:25 与2013-03-05 11:05:25.0*的时间点*相同......它只是使用不同的字符串表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T01:42:25.690

使用[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)以您想要的任何方式显示日期

```
String output = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss").format(r.getTimestamp("mydate")); 
```

这应该显示你的追求。

**编辑：**

您已经说过您的方法没有将对象作为时间戳或日期返回，您需要先将其转换为日期格式才能使用`SimpleDateFormat`：

```
DateFormat sdf = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
String in = r.getTimestamp("mydate"));
Date d = sdf.parse(in); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T01:01:46.693

如果您想实际删除“.0”，您可以这样做。其中“s”是带有额外 2 个字符的字符串对象。

```
s = s.substring(0, s.length() - 2); 
```

# ruby - 在 Ruby 中验证 S3 对象的权限

> ID：15213948
> 
> 赞同：4
> 
> 时间：2013-03-05T00:55:26.700
> 
> 标签：ruby, permissions, amazon-s3, acl

我正在使用[aws-sdk for Ruby](https://github.com/aws/aws-sdk-ruby)来管理 S3 上的对象。我可以通过设置授予公共读取权限

```
object.acl = :public_read 
```

有没有办法在这样做之前确定是否已经授予对象公共读取权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:42:48.677

Ruby aws-sdk 的文档很差，我也无法找到它。下面是我创建的一个函数，用于检查文件是否具有读取权限。根据您的需要修改它：

```
 def check_if_public_read(object)
    object.acl.grants.each do |grant|
      begin
        if(grant.grantee.uri == "http://acs.amazonaws.com/groups/global/AllUsers")
          return true if ([:read, :full_control].include?(grant.permission.name))
        end
      rescue
      end
    end
    return false
  end 
```

其中 object 是任何 S3 对象：

```
 AWS.config(
    :access_key_id     => "access key",
    :secret_access_key => "secret key"
  )
  s3 = AWS::S3.new

file = s3.buckets["my_bucket"].objects["path/to/file.png"]

check_if_public_read(file) => true 
```

请注意，我在查看对象和 aws-sdk 源代码时发现了这一点，并且 uri 参数可能会随着时间而改变。这现在有效，适用于 aws-sdk gem 版本 1.3.5。

# php - 如何从 joomla 2.5 的数据库中选择数组组件

> ID：15213949
> 
> 赞同：0
> 
> 时间：2013-03-05T00:55:31.350
> 
> 标签：php, database, joomla

当我从 joomla 2.5 的数据库内容中检索多列时，我遇到了 joomla 的问题，其中列是“id”、“introtext”、“id”。我得到的输出如下

```
Array([0] => Array([id]=>1 [introtext]=> lorent ipsum [catid]=> 8) [1] => Array([id]=>2 [introtext]=> lorent ipsum [catid]=>9)) 
```

我想用php分别获取id、introtext、catid。请帮助我...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:14:47.223

```
foreach($data as $d){
  echo "id: ".$d['id'];
  echo "introtext: ".$d['introtext'];
  echo "catid: ".$d['catid'];
} 
```

# java - 在eclipse中将类文件添加到java包

> ID：15213951
> 
> 赞同：1
> 
> 时间：2013-03-05T00:55:43.017
> 
> 标签：java, eclipse, classpath, packages, black-box-testing

我有三个我应该进行黑盒测试的 .class 文件。它们位于名为`one.two.three`. 我很难访问它们。我在eclipse中启动了一个新的java项目并创建了一个同名的包。然后我继续将三个 .class 文件添加到`bin/one/two/three`. 如果我尝试使用类 Eclipse 找不到它们并且我得到编译器错误。我正在使用适当的包头。非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:19:07.653

假设`bin/`是您在 Eclipse 项目设置中的输出文件夹。简单地将类文件放到下面`bin/one/two/three`是行不通的，因为 eclipse 要么删除它们（在干净的构建上），要么忽略这些额外的工件。正如@Ray Tayek 所说的那样 - 将它们保存在不同的目录中并编辑项目类路径并将其添加为类文件夹。这应该有效。

# theory - 两种不同字母的语言的交集是什么？

> ID：15213955
> 
> 赞同：2
> 
> 时间：2013-03-05T00:56:02.997
> 
> 标签：theory, regular-language, dfa, formal-languages

我对此进行了一些谷歌搜索，但没有任何真正确定的弹出。

假设我有两种语言 A 和 B。

A = { w 是 {a,b,c}* 的子集，因此 w 的倒数第二个字符是 b }

B = { w 是 {b,d}* 的子集，因此最后一个字符是 b }

如何定义这一点？我认为字母表将是两者的结合，使其成为 {a,b,c,d} 但除此之外，我不知道如何对此进行 DFA。

如果有人能对此有所了解，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:09:03.133

从集合论的角度来看，每种语言只是一些字母 Σ [1]和 Σ [2]上的一组字符串。如果您将两种语言相交，则结果集中唯一可能出现在结果集中的字符串是由 Σ [1] ∩ Σ [2]中的字符组成的字符串，因为不在该集中的任何字符都必须纯粹属于一组中的字符串。

至于如何为此构建 DFA - 我建议从回答这个问题开始 - 给定字母 Σ 上的任何常规语言 L，您将如何修改该 DFA 以具有语言 Σ ∪ { x }，其中 x ∉ Σ？一种方法是在 Σ ∪ { x } 中的所有字符上添加一个新的“死状态”并转换到自身，然后添加从 DFA 中的每个状态到字符 { x 上的死状态的转换}。然后，您可以使用它来将 Σ [1]和 Σ [2]上的原始语言的 DFA 转换为具有字母 Σ [1] ∪ Σ [2]。完成此操作后，您可以使用与两个 DFA 相交的普通算法来计算它们的交集，从而为两种语言的交集返回一个 DFA。

希望这可以帮助！

# c - C“参数的类型为'struct file *'”

> ID：15213958
> 
> 赞同：0
> 
> 时间：2013-03-05T00:56:31.540
> 
> 标签：c, ubuntu

我在使用 C 概念时遇到问题。我会提前做好准备，这是我的“编程专题：Linux 和 C”课程作业的一部分。我正在尝试创建将特定字符串写入文件的函数（它是一个会计程序，函数写入页眉和页脚），但出现错误。

我的代码：

```
#include <stdio.h>

void writeToFile(FILE dataOut, char content[])
{
    fprintf(dataOut, content);
}

void main()
{
    FILE *dataOut;
    dataOut = fopen("testWrite.txt", "w");
    writeToFile(dataOut, "Leave no bars un-foo'd.");
} 
```

我尝试编译时收到的错误消息：

```
testWrite.c: In function ‘writeToFile’:
testWrite.c:5:2: error: incompatible type for argument 1 of ‘fprintf’
In file included from testWrite.c:1:0:
/usr/include/stdio.h:357:12: note: expected ‘struct FILE * __restrict__’ but 
argument is of type ‘FILE’
testWrite.c: In function ‘main’:
testWrite.c:12:2: error: incompatible type for argument 1 of ‘writeToFile’
testWrite.c:3:6: note: expected ‘FILE’ but argument is of type ‘struct FILE *’ 
```

我不知道如何解决这个问题。我已经尝试过一点操作指针，但它并没有改变错误信息。这段代码是我希望我的代码做的一个孤立的例子；如果您想查看实际代码，请告诉我。这似乎是一种更清晰的方式来表达我正在处理的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T00:58:55.240

更改您的函数接受指针而不是结构本身：

```
void writeToFile(FILE * dataOut, char content[]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T01:00:17.557

这里的问题是您试图将指针传递给期望非指针值的参数。的第一个参数`writeToFile`是`FILE`，但参数`dataOut`是类型`FILE*`。为了完成这项工作，您需要使它们都成为指针值

```
void writeToFile(FILE* dataOut, char content[]) 
```

# javascript - 跳过 JQuery 中的前 N 个元素

> ID：15213961
> 
> 赞同：23
> 
> 时间：2013-03-05T00:57:12.927
> 
> 标签：javascript, jquery

我想知道，如何跳过 JQuery 中的前 N ​​个元素。像这样的东西：

```
<div id="test">
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <div>4</div>
    ...
</div>

$('#test > div').skip(2) 
```

应该返回

```
<div>3</div>
<div>4</div>
... 
```

我知道我可以只使用`:not(:first-child):not(:first-child + div)...`选择器 N 次，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-05T00:58:24.390

jQuery 有一个[gt 选择器](http://api.jquery.com/gt-selector/)。（比...更棒）。

```
$('#test > div:gt(1)') 
```

或者你可以使用[切片功能](http://api.jquery.com/slice/)

```
$('#test > div').slice(2) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-05T01:01:02.230

使用[.slice()](http://api.jquery.com/slice/)函数，它会根据其索引为您提供元素的子集。

```
$('#test > div').slice( 2 ) 
```

*参考：* [http ://api.jquery.com/slice/](http://api.jquery.com/slice/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T01:02:57.587

我认为您正在寻找`:gt`选择器：[http](http://api.jquery.com/gt-selector/) ://api.jquery.com/gt-selector/ 请注意，您从这里开始计数。

尝试：

```
$('#test > div:gt(1)') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-05T20:24:56.370

跳过第一个 - 示例：

```
$("#spaccordion li:gt(0)").addClass("collapsed"); 
```

`<li>`除第一个项目外，所有项目都将具有“折叠”类

# hosts - 我在 Mac OS X 10.8 下的 hosts 文件为空

> ID：15213962
> 
> 赞同：1
> 
> 时间：2013-03-05T00:57:28.510
> 
> 标签：hosts

我刚刚通过终端打开了我的主机文件，我上次打开它时一定不小心擦掉了它！有没有人有标准的文件内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:07:45.723

我的看起来像这样：

```
##
# Host Database
#
# localhost is used to configure the loopback interface
# when the system is booting.  Do not change this entry.
##
127.0.0.1       localhost
255.255.255.255 broadcasthost
::1             localhost
fe80::1%lo0     localhost 
```

# jquery - 使用 jquery 添加/删除类

> ID：15213964
> 
> 赞同：-1
> 
> 时间：2013-03-05T00:57:31.873
> 
> 标签：jquery, class, addclass, removeclass

我正在尝试更改网页的字体大小。我指定了三种尺寸：

*   小的
*   中等的
*   大的

根据用户点击的内容，html 字体大小应该成为他选择的大小。

`#small`, `#med`,`#large`是三个段落元素。

`medium`, `small`,`large`是 CSS 的三个类。

我的代码是：

```
enter code here

<script>
                $(document).ready(function(){
                    $("#small").click(function(){
                        if($("p").hasClass('large'))
                        {
                         $("p").removeClass("large").addClass("small");
                        }
                        else
                        {
                            $("p").removeClass("medium").addClass("small");
                        }
                        });
                    $("#med").click(function(){
                        if($("p").hasClass('small'))
                        {
                            $("p").removeClass("small").addClass("medium");

                        }
                        else
                        {
                            $("p").removeClass("large").addClass("medium");
                        }

                    });

                    $("#large").click(function(){
                        if($("p").hasClass('small'))
                        {
                            $("p").removeClass("small").addClass("large");
                        }
                        else
                        {
                            $("p").removeClass("medium").addClass("large");
                        }

                    });

                });
            </script> 
```

我认为它的工作并不完美。因此，如果有人能指出我哪里出错了，那将会有很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:10:31.313

你有点冗长，每次点击都不需要任何决定，你总是必须删除其他两个类中的任何一个，然后从你按下的按钮中添加一个

```
$(document).ready(function(){
    $("#small").click(function(){
        $("p").removeClass("medium").removeClass("large").addClass("small");
    });
    $("#med").click(function(){
        $("p").removeClass("small").removeClass("large").addClass("medium");
    });
    $("#large").click(function(){
        $("p").removeClass("small").removeClass("medium").addClass("large");
    });
}); 
```

您可以通过使用`id`类似以下内容的变量来进一步“压缩”它（请注意，可点击元素是“#med”，类是“medium”，因此需要额外的工作）

```
$(document).ready(function(){
    $("#small,#med,#large").click(function(this){
        $("p").removeClass().addClass($(this).attr("id"));
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:14:53.160

更紧凑的方法是将类组合如下：

```
$(document).ready(function(){
    $("#small").click(function(){
        $("p").removeClass("medium large").addClass("small");
    });
    $("#med").click(function(){
        $("p").removeClass("small large").addClass("medium");
    });

    $("#large").click(function(){
        $("p").removeClass("small medium").addClass("large");
    });
}); 
```

# php - CakePHP 提交表单：链接与发布方法

> ID：15213965
> 
> 赞同：1
> 
> 时间：2013-03-05T00:57:53.063
> 
> 标签：php, html, cakephp

我想获得一些关于使用`link`vs `post`form 方法类型的意见。例如，如果我有一个`searches`在 URL 处查找产品的控制器`/searches/products`，则有两种方法可以使其工作。

使用该`link`方法，我可以从`$this->params['url']`数组中获取数据。有了`post`，我可以让他们`$this->params['form']`使用隐藏的表单元素。这是假设我没有使用 CakePHP Form Helper。使用该`post`方法，搜索字符串可以作为操作的参数，所以这似乎是可行的方法，但是您何时会`link`在提交数据时使用该方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:19:03.837

如果它实际上是一个搜索，我几乎总是会使用 URL 方法。它允许人们为他们的结果添加书签。

# maven - 部署具有多个配置文件依赖项的 Maven 工件

> ID：15213969
> 
> 赞同：0
> 
> 时间：2013-03-05T00:58:24.633
> 
> 标签：maven, maven-dependency-plugin, maven-deploy-plugin, maven-profiles

我们对 Maven 比较陌生，现在面临一个问题。

我们有一个 Maven 项目 (projectA)，它的 JAR 是其他几个项目的依赖项。其他一些项目是一些自定义 Web 容器，而另一些则不是，因此在自定义 Web 容器的情况下提供了一些 projectA 的依赖 jar，但在其他项目的情况下应该是运行时范围。在自定义 Web 容器的情况下，我们目前使用排除列表来过滤掉提供的 jar。

我们想知道使用 Maven 配置文件是否会更好。我们知道如何创建具有不同依赖项的配置文件（实际上相同的依赖项不同范围），并且在两个配置文件中，构建的 projectA jar 按位是相同的。但是我们不知道的是，当我们将项目部署/发布到一个 maven 仓库的 jar 工件时，pom.xml 应该是什么样子？对于这些 Web 容器项目，pom.xml 不应包含提供的 jar，但对于其他项目，pom.xml 应包含这些 jar。

我们可以为每个配置文件中的 jar 使用不同的名称，并使用不同的 pom.xml 部署每个 jar，但由于这些 jar 在位方面是相同的，这似乎不是一个完美的解决方案。所以我们认为必须有更好的解决方案来解决这个问题，只是我们不知道，因为我们对 Maven 比较陌生。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:20:25.827

POM 就是 POM。您似乎在谈论在引用“A”的其他项目中管理传递依赖项。您在 Maven 中的选择相当有限：

*   您可以使用排除项来删除您不想要的传递依赖项。
*   您可以将“A”中的依赖项声明为“已提供”，但这只有在 A 的目标环境中实际提供了该 jar 时才真正正确。它主要用于 Java EE api 依赖项，如 servlet-api，由容器提供，禁止包含在 WAR 文件中。
*   您可以将依赖项声明为可选，这就是人们说“提供”时通常的意思，并手动将这些依赖项包含在需要它们的地方。

我个人会选择“可选”路线，因为每个项目的工作都是引入它需要的依赖项，如果在使用“A”时某些东西是可选的，它只是意味着使用“A”的东西必须明确选择是否他们将使用其中的可选部分。当构建具有多个不同用例的工件时，这往往是最合适的。

要在这方面获得更多帮助，您还可以使用[maven enforcer 插件](http://maven.apache.org/enforcer/maven-enforcer-plugin/)来禁止构建中的某些依赖项，这样您就不会意外获得您不想要的 jar。

# asp.net - ASP.Net 查询字符串超时

> ID：15213971
> 
> 赞同：2
> 
> 时间：2013-03-05T00:58:49.337
> 
> 标签：asp.net, query-string

有没有办法让 ASP.Net 查询字符串像会话超时一样超时？这样做有什么意义吗？我的上级似乎认为强制查询字符串超时，即使它已经加密，也会提高安全性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:30:59.803

您可以尝试在 url 中包含会话 ID。

`<sessionState cookieless="true" />`

将让您的应用程序将会话 ID 放在每个 url 中。例如。 `http://yourserver/folder/(session ID here)/default.aspx`或者`http://myapp/kfh73245y32fgdgfoe7tgdsofdgb8rt/profile.aspx?profileId=334`

这意味着 url 仅对具有该会话 ID 的会话有效。

[http://msdn.microsoft.com/en-us/library/aa479314.aspx](http://msdn.microsoft.com/en-us/library/aa479314.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:07:34.913

不是我知道的，我也不认为这样做有任何意义。

更好的方法是使用 SSL，因为它会加密包括 QueryString 在内的流量。

# java - 在java中将多个项目添加到已经初始化的arraylist

> ID：15213974
> 
> 赞同：81
> 
> 时间：2013-03-05T00:58:56.933
> 
> 标签：java, arraylist, collections

我正在谷歌搜索，似乎找不到语法。`arraylist`根据用户设置，我的填充可能会有所不同，因此我已对其进行了初始化

```
ArrayList<Integer> arList = new ArrayList<Integer>(); 
```

现在我想添加数百个整数而不用一一做`arList.add(55);`

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-03-05T01:00:35.850

如果您有另一个列表，其中包含您想要添加的所有项目，您可以这样做`arList.addAll(otherList)`。或者，如果您总是将相同的元素添加到列表中，则可以创建一个新列表，该列表已初始化为包含所有值并使用该`addAll()`方法，例如

```
Integer[] otherList = new Integer[] {1, 2, 3, 4, 5};
arList.addAll(Arrays.asList(otherList)); 
```

或者，如果您不想创建那个不必要的数组：

```
arList.addAll(Arrays.asList(1, 2, 3, 4, 5)); 
```

否则，您将不得不有某种循环将值单独添加到列表中。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-03-05T01:10:13.360

这些整数的“来源”是什么？如果您需要在源代码中硬编码，您可以这样做

```
arList.addAll(Arrays.asList(1,1,2,3,5,8,13,21)); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-06-10T20:06:32.667

[`Collections.addAll`](https://docs.oracle.com/javase/9/docs/api/java/util/Collections.html#addAll-java.util.Collection-T...-)是一个可变参数方法，它允许我们在单个语句中将任意数量的项目添加到集合中：

```
List<Integer> list = new ArrayList<>();
Collections.addAll(list, 1, 2, 3, 4, 5); 
```

它还可以用于将数组元素添加到集合中：

```
Integer[] arr = ...;
Collections.addAll(list, arr); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-29T14:30:16.470

如果您希望避免使用多行代码以节省空间，那么这种语法可能会很有用：

```
 java.util.ArrayList lisFieldNames = new ArrayList() {
            {
                add("value1"); 
                add("value2");
            }
        }; 
```

删除新行，您可以将其压缩为：

```
 java.util.ArrayList lisFieldNames = new ArrayList() {
            {
                add("value1"); add("value2"); (...);
            }
        }; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-15T00:58:27.847

[Java 9](https://docs.oracle.com/javase/9/docs/api/java/util/List.html#of-E...-) + 现在允许这样做：

```
List<Integer> arList = List.of(1,2,3,4,5); 
```

该列表将是[不可变](https://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html)的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-21T07:04:38.193

以科特林方式；

```
val arList = ArrayList<String>()
arList.addAll(listOf(1,2,3,4,5)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-15T06:56:39.893

如果您需要添加很多整数，那么使用 for 循环可能是最简单的。例如，将 28 天添加到 daysInFebruary 数组。

```
ArrayList<Integer> daysInFebruary = new ArrayList<>();

for(int i = 1; i <= 28; i++) {
    daysInFebruary.add(i);
} 
```

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2013-09-27T00:47:35.607

我相信上面的答案是不正确的，用多个值初始化的正确方法是......

```
int[] otherList ={1,2,3,4,5}; 
```

所以正确初始化的完整答案看起来像这样

```
int[] otherList ={1,2,3,4,5};
arList.addAll(Arrays.asList(otherList)); 
```

# .net - Glyphicons 在开发中显示良好，但在 IIS 中托管时却没有

> ID：15213975
> 
> 赞同：5
> 
> 时间：2013-03-05T00:58:59.487
> 
> 标签：.net, asp.net-mvc, iis, file-permissions, glyphicons

在开发过程中，我可以很好地查看我的图标，但是在使用 Visual Studio 的构建部署包创建部署包并将其托管在我的本地（同一台 PC）IIS7.5 服务器上之后，图标不显示。我只是为所有这些人得到一个空白框

我检查了路径，图像在那里。

我四处搜索，发现有人遇到了同样的问题，但他在 apache 上托管他的 web 项目，所以他所做的就是将他的所有文件和文件夹 chmod 到 777。

我在 IIS7.5 中做了同样的事情，我授予了我的文件夹读/写访问权限，但它们仍然没有出现。我通过 Handler Mappings > Content View > Edit Permissions 做到了这一点。为了确定，我为所有用户提供了对 glyphicons.png 完全控制的文件夹。

仍然没有任何显示。还有什么要检查的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-09T04:23:37.747

我一直在寻找相同的答案，对我来说，当我将链接直接放到网站时工作。

尝试使用[http://glyphicons.getbootstrap.com/](http://glyphicons.getbootstrap.com/)提供的链接，或者将它们放在您的 _Layout 页面中：

*   `<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">`

*   `<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>`

*   `<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet">`

### 以下是类似情况的其他一些相关链接：

*   [Font Awesome 不起作用，图标显示为正方形](https://stackoverflow.com/questions/14366158/font-awesome-not-working-in-chrome)

*   [http://www.seankilleen.com/2012/12/how-to-quickly-update-mvc4-project-with.html](http://www.seankilleen.com/2012/12/how-to-quickly-update-mvc4-project-with.html)

*   [MVC4 中的 Bootstrap 和 font-awesome](https://stackoverflow.com/questions/17351511/bootstrap-and-font-awesome-in-mvc4)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-26T16:30:55.307

仅供参考，此[其他 StackOverflow 答案](https://stackoverflow.com/questions/14894935/why-font-awesome-works-on-localhost-but-not-on-web)中建议的此方法通过将 .eot、.ttf 和 .woff 文件上的构建操作设置为“内容”而不是默认值“无”来解决问题。这样做解决了我的问题。

# php - 为 PHP 全局变量赋值以发出警报

> ID：15213976
> 
> 赞同：1
> 
> 时间：2013-03-05T00:59:01.917
> 
> 标签：php, html, variables, alert, global

我正在开发一个非常基本的随机名称生成器。生成器运行良好，由 HTML 表单提交按钮调用。现在，如果用户想要保存姓名，我将有第二个按钮，它将调用 PHP 邮件操作以通过电子邮件发送姓名。在添加邮件功能之前，我只是尝试将变量存储在某处，以便我可以提醒它并验证我是否可以控制它。在下面的代码中，$field2 是由 $id_num 定位的名称，它等于 $search_str。然后我尝试将 $field2 分配给全局变量 $nameContainer：

```
<body>
<?
$nameContainer = "Mary";
?>

<? 
function loadName() {
global $nameContainer;
if(!empty($_POST['act'])) {
    $lineNum = rand(1, 5189);
    $search_str = $lineNum; 
    $lines = file('names_girls_5189_origin.csv'); 
    foreach($lines as $line){ 
        list($id_num, $field2, $field3, $field4)=explode(",",$line); 
        $nameContainer = ($id_num == $search_str) ? "$field2" : "";
        echo ($id_num == $search_str) ? 
            "<table style= 'height: 100%;'>
            <tr style='width: 100%; height= '200px';'>
            </tr>
            <center><span class='myText' style='color: white; font-size: 48px;'>$field2</span>
            <span style='color: #E8C8D5; font-size: 36px'>Smith</span><br/>
            <span class='myText' style='color: #2E7B4D; font-size: 24px;'>Origin: $field3</span><br/>
            <span class='myText' style='color: #2E7B4D; font-size: 24px;'>Meaning: $field4</span></center>
            </table>" : ""; 
    }
}
}
loadName();

?>

<script type="text/javascript">
function alertName() {
    alert("<? getName(); ?>");
}
</script>

<?
function getName() {
global $nameContainer;
echo $nameContainer;
}
?>

<center><form action="index.php" method="post">
<input type="hidden" name="act" value="run" />
<p><input type="submit" value="New" /></p>
</form>
</center>

<center><button onclick="alertName()">Alert</button></center>

</body> 
```

看来我的问题源于 $nameContainer = ($id_num == $search_str) ？"$field2" : ""; 因为 $nameContainer = $field2; 有效，但分配 csv 中的最后一个名称，而不是与搜索字符串匹配的名称。我意识到我可能在这里缺少一些基本逻辑，因此感谢您的帮助！

更新（示例 csv）：

```
ID,Name,Origin,Meaning
1,Aaliyah,"Arabic, Hebrew","high exalted, to ascend"
2,Akala,Aboriginal,A parrot.
3,Alba,Aboriginal,A sand hill. Also see Albina.
5188,Zelma,,A divine helmet. From the name Anselma. Also see Salima.
5189,Zola,,Life.` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:26:08.103

在我看来，您正在使用随机`$search_str`选择一条线（`$lines`数组的一个元素）。您应该为此使用[array_rand ：](http://php.net/manual/en/function.array-rand.php)

```
function loadName() {
global $nameContainer;
if(!empty($_POST['act'])) {
    list($id_num, $field2, $field3, $field4)=explode(",",array_rand(file('names_girls_5189_origin.csv'))); 
    $nameContainer = $field2;
    echo "<table style= 'height: 100%;'>...</table>" : ""; 
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:23:08.980

我认为，您需要检查是否`$nameContainer`有内容并打破循环：

```
$nameContainer = ($id_num == $search_str) ? "$field2" : "";
if(!empty($nameContainer)){
    break;
} 
```

但是，要使其正常工作，您需要`$nameContainer`使用空字符串进行初始化：

```
$nameContainer = ""; 
```

# jquery - jquery datables - ASP.NET 复选框不止一次触发

> ID：15213980
> 
> 赞同：1
> 
> 时间：2013-03-05T00:59:26.150
> 
> 标签：jquery, asp.net, jquery-datatables

我有一个 CompositeDataBoundControl，其中一列中有一个 CheckBox。CheckBox 使用 OnCheckboxChanged 处理程序设置为 AutoPostBack=True。现在，在复选框更改后，我将我的数据库值相应地更新为 true/false。这一切都很好。

现在我添加了带有分页功能的jquery [datatables.net插件，一次显示 10 条记录。](http://www.datatables.net/)当我更新第一页上的复选框时，一切正常。然后，如果我移至第二页并选择一个复选框，它会更新该记录，但随后会在我更改 page1 上的复选框时开始触发 OnCheckBoxChanged 处理程序。在所有这些时间里，它都会重置这些复选框。

-> 在代码隐藏的任何地方都没有其他显式处理程序声明，这是 C#，所以没有 Handles 子句问题。-> 有人[在这里](https://stackoverflow.com/questions/379571/clicking-checkbox-causes-oncheckedchanged-to-fire-twice/482882#482882)说它可能是数据绑定，但问题仅在于使用数据表时。所以不确定是不是这样，但我正在调查它。

**编辑**在此处查看 [示例](http://msonweb.azurewebsites.net/datatablesgridtest.aspx)。

重现问题的步骤： 1）在第 1 页上选择几个复选框。复选框将回发并更新消息。

2) 现在转到第 2 页并选择一个复选框。chbx 将回发，网格将移至 page1。请注意您在 page1 中选择的 chbx 丢失了选择。如果您移至第 2 页，您将看到所做的选择仍然存在。

**编辑**似乎[这是问题](http://datatables.net/forums/discussion/3099/x&page=1)。现在发现实施起来几乎没有困难。需要帮助。

我不确定发生了什么。有人有类似的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T23:08:38.473

问题是数据表没有回发隐藏的行。所以我需要将它们添加回我的表，如以下链接中所述：http: [//datatables.net/forums/discussion/3099/x&page=1](http://datatables.net/forums/discussion/3099/x&page=1)

尽管与 ASP.NET ScriptManager/UpdatePanel 一起使用时，我必须在 beginRequest 之前将它们添加回来，如此处所述：

[如何在 ASP.NET 异步回发之前禁用或删除不必要的表单元素？](https://stackoverflow.com/questions/3983539/how-do-i-disable-or-remove-unnecessary-form-elements-before-an-asp-net-asynchron/4028915#4028915)

一旦我在我的示例项目中实现它，我将添加一些代码。这是我实现的代码：

```
//code-behind Page_Load
ScriptManager.RegisterOnSubmitStatement(this, this.GetType(), "beforePostback", "beforePostback()");

// JS code
var table;
$(function(){
    table = $(".mygrid").dataTable();
});

function beforePostback() {
    //table is the object that holds the dataTable 
    if(table!='undefined' && $(".mygrid thead").length>0){
         hiddenRows = table.fnGetHiddenNodes();
                $('table.mygrid tbody').append(hiddenRows);
     }
} 
```

# css - 移动浏览器不允许滚动

> ID：15213983
> 
> 赞同：0
> 
> 时间：2013-03-05T00:59:43.753
> 
> 标签：css, mobile

我刚刚用我的安卓手机测试了我的新网站，我无法在页面上的任何地方滚动。在 Firefox、opera、ie 和 chrome 桌面浏览器上，我会在需要时进行垂直滚动。在我的 html，body css 规则中，我有 overflow-y 滚动；宽度不应滚动。我可能在这里遗漏了一些简单的东西，但我从未在我做过的任何其他网站上遇到过这种情况。

这是我的网站CSS：

```
@charset "utf-8";
/* CSS Document */
#body{

    min-width: 900px;
    width: 75%;
    background-size: cover;
    background-image: url(../graphics/back2.jpg);   
    position: relative;
    margin: 40px auto;
    padding: 10px;
    border-style: groove;
    border-width: 5px;
    border-color: #000; 
    background-repeat: repeat-y;    
}
a:link, a:visited, a:active{
    text-decoration: none;
    color: inherit;

}
a:hover{
    color: #FFF;
    text-decoration: underline; 
}
html, body{
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow-y: scroll; 
    background-image: url(../graphics/craig-smith-background.jpg);
    line-height: 25px;
}

h1{
    font-size: 36px;
    font-family: "Times New Roman", Times, serif;
    color: #000;
    margin: 10px;
}
 h2{
    font-size: 30px;
    font-family:"Times New Roman", Times, serif;
    margin-left: 30px;
    color: #333;
    font-weight: 700;
    margin: 20px;
}
h3{
    font-size: 24px;    
    margin: 10px;
}

p{
    font-size: 20px;
    font-family: "Times New Roman", Times, serif;
    color: #FFF;
    text-indent: 1.5em;
    margin-left: 1.5em;
}
#quote{
    margin-left: 30px;
    font-style: italic;
    font-family: lucida;
    font-size: 18px;
    border-style: inset;
    border-color: #333;
    border-width: 2px;
    height: 80px;
}

#header{
    width: auto;
    margin: 0 auto;
    position: relative;
    text-align: center;

}

#nav{
    position: absolute;
    z-index: 1;
    left: 25%;

    top: 150px;
    }
.picture{
    display: inline-block;
    position: relative;
    margin: 0 auto;
    border-style: groove;
    border-width: 5px;
    border-color: #999; 
}

.clear-left{
    clear: left;
    position: relative;

}

.clear-right{
    clear: right;
    position: relative;
}

.clear-all{
    clear: both;
    position: relative;
}

#left-col{
    width: 25%;
    min-width: 300px;
    position: relative; 
    float: left;
    text-wrap: normal;
    overflow: hidden;
    margin-bottom: 10px;
    margin-top: 10px;
    text-align: right;
}

#right-col{
    min-height: 500px;
    min-width: 500px;
    width: 65%;
    text-align: left;
    float: right;
    border-style: groove;
    border-width: 5px;
    border-color: #CCC;
    margin-bottom: 10px;
    margin-top: 10px;
    text-wrap: normal;
    text-indent: 10px;

}
#footer{
    width: 85%;
    height: 40px;
    background-color: #999;
    text-align: center;
    margin: 10px auto;
    padding: 0px;
    padding-bottom: 10px;
    border-style: groove;
    border-width: 2px;
    border-color: #999;
}

#project-description h1{
        text-align: center;
        font-size: 36px;
}

.project-description h2{
    color: #333;
    font-weight: bold;  
}

.project-description{
    border-style: inset;
    border-width: 3px;
    border-color: #333;
    margin: 10px;
    padding: 5px;

}

.project-description p{
    margin-left: 70px;  
    text-indent: 0;
}
table{
    border-spacing: 0;
    border-collapse: collapse;

}
td, th, tr{
    padding: 0; 
    line-height: 20px;
} 
```

这是现场网站的链接[。](http://www.craig-smith.comlu.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:22:05.527

您不需要为 body 和 html 标签指定`overflow-y: scroll;`样式。这导致双滚动条在移动浏览器中失败。您甚至不需要指定它，因为它是默认行为。您可能只想在 body 标签上设置`overflow-y: scroll;`and 。`overflow-x: hidden;`

# c - 浮点和双输出

> ID：15213993
> 
> 赞同：0
> 
> 时间：2013-03-05T01:00:54.263
> 
> 标签：c, floating-point

请解释不同情况下的输出

```
#include<stdio.h>
int main()
{
    float a=5.9; //a=0.9
    if (a==5.9)
        printf("Equal");
    else if (a<5.9)
        printf("Less than");
    else
        printf("Greater than");
    return 0;
} 
```

当 a 为 5.9 时，输出为“大于”，当 a 为 0.9 时，输出为“小于”。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:19:51.047

在 C 中，文字“5.9”具有类型`double`，并由常见编译器转换为 5.9000000000000003552713678800500929355621337890625，因为它们使用二进制 IEEE-754 浮点数，并且该数字是可表示为`double`最接近 5.9 的值。`float`您的代码使用该值初始化 a 。这需要将 a 转换`double`为 a `float`，结果是 5.900000095367431640625，因为这`float`是最接近该值的`double`值。显然，后者大于前者，这就是为什么你的输出是“大于”的原因。

使用 .9，文字“.9”将转换为`double`0.90000000000000002220446049250313080847263336181640625。然后将`double`其转换为`float`0.89999997615814208984375，这显然小于`double`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T01:08:31.280

您的变量是浮点数，但常量是双精度数。由于该值无法精确存储，因此 ti 将作为浮点数和双精度值以不同的方式存储。如果您使用相同的数据类型，您将获得所需的结果

[http://codepad.org/1q5mwFGd](http://codepad.org/1q5mwFGd)

[http://codepad.org/Q4lOQnG8](http://codepad.org/Q4lOQnG8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T01:16:33.243

由于十进制二进制转换，0.9 表示为 2^-1 的幂的总和：

0.9 - (0.5 + 0.25 + 0.125) = 0.025

但 0.025 不是 2^-1 的精确幂。因此，您需要在比较中以相同的精度表示这两个数字。由于 float 和 double 具有不同的精度，因此它们比较不相等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T01:06:35.863

浮点数本质上是不精确的。如需快速介绍，您可以在此处阅读一些内容。 [http://floating-point-gui.de/errors/comparison/](http://floating-point-gui.de/errors/comparison/)

有关有效比较策略的一些建议，请参阅这篇文章。 [浮动和双重比较最有效的方法是什么？](https://stackoverflow.com/questions/17333/most-effective-way-for-float-and-double-comparison)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T01:09:21.770

这是因为在内部，浮点数以二进制形式存储，5.9 不能完全表示为 5.9。看看下面类似的问答：[为什么一个 C 浮点类型在输出上会修改 125.1 的实际输入为 125.099998？](https://stackoverflow.com/questions/6532502/why-does-a-c-floating-point-type-modify-the-actual-input-of-125-1-to-125-099998?rq=1)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T01:10:32.917

比较浮点数时最好避免使用“==”。

这是因为某些值无法在不损失精度的情况下正确存储。

所以最好说：

```
if( fabs(a-5.9) < .0001 ) {
    // 'EQUAL' or at least near enough!
} 
```

我知道这需要更多的计算，但它会按照您期望的方式运行。