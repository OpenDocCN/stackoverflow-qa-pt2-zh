# StackOverflow 问答 15734000-15734999

# maven - 声纳 + 多模块 Maven 项目

> ID：15734007
> 
> 赞同：0
> 
> 时间：2013-03-31T20:12:54.157
> 
> 标签：maven, jenkins, sonarqube, jenkins-plugins, cobertura

我从我的 Jenkins 工作中调用 Sonar 我注意到我的域模块中的类的覆盖率都显示为具有 0% 的测试覆盖率，即使这些域正在用于具有高测试覆盖率的其他模块中。我在 Sonar 中使用 cobertura 来测量覆盖范围

任何人都可以提供有关如何让 Sonar/Cobertura 识别域模块中类的测试覆盖率的任何见解

谢谢达米安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:06:52.383

默认情况下，Sonar 计算单元测试覆盖率。因此，如果您的域类没有在定义它们的模块中进行单元测试，那么您没有获得这些的单元测试覆盖率是正常的。

您可以查看如何在 Sonar 中添加集成测试覆盖率：请参阅[https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/combined%20ut-it/combined-ut-它-多模块-maven-jacoco](https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/combined%20ut-it/combined-ut-it-multimodule-maven-jacoco)

但是最好为您的域类进行“真正的”单元测试，以便在隔离的上下文中测试它们的逻辑。

**编辑**
[指向 sonar-exmaple-multiple-modules 的链接](https://github.com/SonarSource/sonar-examples/blob/master/projects/multi-module/sonar-runner/java-sonar-runner-modules-different-structures/sonar-project.properties)

# ruby-on-rails - 在每个 rails 服务器重新启动时运行一次且仅运行一次的代码

> ID：15734013
> 
> 赞同：0
> 
> 时间：2013-03-31T20:13:06.233
> 
> 标签：ruby-on-rails, multithreading

我的申请是2折。首先，它运行一个线程来读取 Arduino 输出以获取数据并将它们存储在我的模型中。它永远这样做，因为 Arduino 永远在感知数据。其次，主 Web 应用程序分析数据并绘制精美的图表。

当我启动 rails 服务器时，我希望读取线程只运行一次。

我当前的实现是在我的应用程序的主控制器中使用一个线程（因为我需要模型来存储数据）。每次我刷新页面时，都会创建一个新线程。这不是我想要的，因为对 Arduino 的并发访问会产生错误的读数。

我想这是一个非常经典的问题，但我看不出用 Rails 获得这种行为的方法是什么。我一直在寻找和谷歌搜索一个星期，但我仍然卡住了。

提前致谢。皮埃尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:27:41.537

错误的工作工具。有点儿。您不希望 rails 应用程序监控 Arduino 输出，rails 并不适合这样的事情。最好有一个单独的专用应用程序读取 Arduino 输出，然后将信息保存到数据库中。

Arduino 输出 ---> 应用程序解析输出 ---> DB ---> Rails App

这样，您的 Web 应用程序可以专注于 Web，而不会在工作之间被撕裂。

一个有趣的方法是让解析应用程序成为一个 ruby​​ 应用程序，并在本例中使用 Rails 之外的 Active Record。虽然我从未这样做过，但人们已经在纯 Ruby 应用程序中的类似设置中使用过 Active Record。这是一个老例子。

[http://blog.aizatto.com/2007/05/21/activerecord-without-rails/](http://blog.aizatto.com/2007/05/21/activerecord-without-rails/)

这样，当您重新部署 Rails 应用程序时，仍然可以收集数据。它还创建了一个防火墙，因此如果您的 Rails 应用程序爆炸或出现故障，数据收集将不受影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T20:40:52.740

同意@rovermicrover，您应该考虑将与 arduino 交互的任务与 Web 应用程序分开。

为此，我建议您为该作品创建一个 rake 任务。[然后，您可以考虑通过foreman](https://github.com/ddollar/foreman)管理该 rake 任务的启动/停止/重新启动。这是一个很好的干净方式，你也可以很容易地进行 capistrano 集成。

# c++ - 错误：将 'operator<<' 声明为非函数|

> ID：15734020
> 
> 赞同：4
> 
> 时间：2013-03-31T20:13:39.703
> 
> 标签：c++

我很难重载 << 运算符。我正在做一个家庭作业，我只能修改代码的某些部分。在你问之前，我坚持使用结构而不是类。以下是受影响代码的部分：

调用函数是：

```
/*
 * Write a CSV report listing each course and its enrollment.
 */
void generateReport (ostream& reportFile,
             int numCourses,
             Course* courses)
{
  for (int i = 0; i < numCourses; ++i)
    {
        //courses is an array of "Course" structs
        reportFile << courses[i] << endl;
    }
} 
```

这是.h文件：

```
#ifndef COURSE_H
#define COURSE_H

#include <iostream>
#include <string>

struct Course {
    std::string name;
    int maxEnrollment;
    int enrollment;

    Course();
    Course(std::string cName);

    std::ostream& operator << (ostream &out, const Course &c);
};

#endif 
```

这是 .cpp 文件：

```
#include "course.h"

using namespace std;

Course::Course()
{
    name = "";
    maxEnrollment = 0;
    enrollment = 0;
}

Course::Course(string cName)
{
    name = cName;
    maxEnrollment = 0;
    enrollment = 0;
}

// send course to file
ostream& Course::operator << (ostream &out, const Course &c)
{
    out << c.name << "," << c.enrollment << endl;
    return out;
} 
```

这是我不断收到的错误消息：

错误：将 'operator<<' 声明为非函数|

我已经在互联网上搜索了几个小时，并尝试了很多不同的方法来解决这个问题，但都没有成功。请帮忙！！

我根据建议尝试了几种不同的方法来解决这个问题。以下是我尝试过的两种方法，但均无效： 方法 1：

```
#ifndef COURSE_H
#define COURSE_H

#include <iostream>
#include <string>

struct Course {
    std::string name;
    int maxEnrollment;
    int enrollment;

    Course();
    Course(std::string cName);

};

//Moved this outside the struct
std::ostream& operator << (ostream &out, const Course &c);

#endif 
```

方法二（也改失败错误）：

```
#include "course.h"

using namespace std;

Course::Course()
{
    name = "";
    maxEnrollment = 0;
    enrollment = 0;
}

Course::Course(string cName)
{
    name = cName;
    maxEnrollment = 0;
    enrollment = 0;
}

std::ostream& operator << (ostream &out, const Course &c);

// send course to file
ostream& Course::operator << (ostream &out, const Course &c)
{
    out << c.name << "," << c.enrollment << endl;
    return out;
} 
```

重新编辑----------------------------------- --------- 经过一些评论和帮助，这是我当前的代码：

在 .h 文件中：

```
#ifndef COURSE_H
#define COURSE_H

#include <iostream>
#include <string>

struct Course {
    std::string name;
    int maxEnrollment;
    int enrollment;

    Course();
    Course(std::string cName);

    std::ostream& operator << (std::ostream &out, const Course &c);
};

#endif 
```

在 .cpp 文件中：

```
#include "course.h"

using namespace std;

Course::Course()
{
    name = "";
    maxEnrollment = 0;
    enrollment = 0;
}

Course::Course(string cName)
{
    name = cName;
    maxEnrollment = 0;
    enrollment = 0;
}

// send course to file
ostream& operator << (ostream &out, const Course &c)
{
    out << c.name << "," << c.enrollment << endl;
    return out;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T20:16:28.107

**您忘记在参数中包含`<ostream>`和命名空间说明符`std::`，这会导致您的错误。**

如果您想了解下一个错误，请继续阅读：

```
std::ostream& operator << (std::ostream &out, const Course &c); 
```

这意味着您定义了一个运算符，该运算符应该在`Course`左侧 ( `*this`) 的当前实例上工作，因为它被定义为成员。这将导致运算符具有一个左侧和两个右侧，这是不可能的。

您需要将运算符定义为非成员函数，因为左侧应该是 an`ostream&`而不是`Course&`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T20:15:04.580

```
std::ostream& operator << (std::ostream &out, const Course &c); 
```

应该

```
friend std::ostream& operator << (std::ostream &out, const Course &c); 
```

和

```
std::ostream& Course::operator << (std::ostream &out, const Course &c)   // Not a member of Course
{ 
```

应该

```
std::ostream& operator << (std::ostream &out, const Course &c)
{ 
```

由于它不是`Course`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T20:17:11.720

`std::ostream& operator << (ostream &out, const Course &c);`在`Course`声明中，必须声明为`friend`，否则不能带两个参数。

另外，第一个参数必须是`std::ostream&`而不仅仅是`ostream&`

# jquery - jquery hovercard 加载较晚，因此显示一个空的 hovercard

> ID：15734025
> 
> 赞同：0
> 
> 时间：2013-03-31T20:14:03.410
> 
> 标签：jquery, jquery-hover

我已经实现了一个悬停卡。它完美地显示了 %90 的时间。但有时它会显示一个空的悬停卡，我认为它无法加载。顺便说一句，我有一个 Web 服务，如果您悬停一个 TAG，就会调用它，它会显示悬停卡片。

如何确保它加载然后显示悬停卡或如何放置“加载”直到它加载并显示数据

这是我的代码

```
$('.hovercard_tag').hover(function () {
            var span_text = $(this).text();
            var result = '';
            pos = $(this).offset();
            $.ajax({
                url: 'http://xxx/HoverCard_WebService.aspx?q=' + encodeURIComponent(span_text),
                type: 'GET',
                dataType: 'json',

                beforeSend: function () {
                    $(".hovercard").prepend('<p class="loading-text">Yükleniyor...</p>');
                },
                success: function (data) {
                    $(".hovercard").empty();
                    $.each(data, function (index, value) {
                        result += '<div style=\'border-bottom:1px solid #31B1CE;\'><b>' + span_text + '</b><div style=\'display: block;margin: 4px;font-size:4px;line-height: 4px;\'></div></div>';
                        result += '<div style=\'display: block;margin: 4px;font-size:4px;line-height: 4px;\'></div>';
                        result += value.description;
                        result += '<br /><br />';

                        var image_source = 'images/hover_card_plus_icon.png';
                        if (value.followed != '0')
                            image_source = 'images/ok_icon.png';

                        result += '<div style=\'float:left;\'><img id=\'img_category_follow\' value=\'' + value.id + '\' src=\'' + image_source + '\' class=\'cat_takibe_al\' style=\'cursor:pointer;\' /></div><div style=\'float:right;padding-top:-10px\'>' + value.count + ' kişi takip ediyor</div><div style=\'clear:both\'></div>';

                    });
                },
                complete: function () {
                    //$('.loading-text').remove();
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:19:47.443

```
$('#selector').ajaxStart(function(){
    // Show your image here when ajax request begins
});

$('#selector').ajaxComplete(function(){
    //Show what you actually want to show after your ajax request is completed.
}); 
```

# java - 减少 FFT 的处理时间

> ID：15734029
> 
> 赞同：2
> 
> 时间：2013-03-31T20:14:14.003
> 
> 标签：java, android, performance, fft

我目前正在为 Android 开发 Java。我尝试实现 FFT 以实现一种频率查看器。

实际上我能够做到，但显示根本不流畅。我添加了一些跟踪以检查代码每个部分的处理时间，事实是 FFT 需要大约 300 毫秒才能应用于我的复杂数组，它拥有 4096 个元素。而且我需要它花费不到 100 毫秒，因为我的线程（显示频率）每 100 毫秒刷新一次。我减少了初始数组，以便 FFT 结果只拥有 1028 个元素，并且它可以工作，但结果已被弃用。

有人有想法吗？

我使用了可以在 Internet 上找到的默认 fft.java 和 Complex.java 类。

有关信息，我计算 FFT 的代码如下：

```
int bytesPerSample = 2;
Complex[] x = new Complex[bufferSize/2] ;

for (int index = 0 ; index < bufferReadResult - bytesPerSample + 1; index += bytesPerSample)
{
// 16BITS = 2BYTES

    float asFloat = Float.intBitsToFloat(asInt);

    double sample = 0;
    for (int b = 0; b < bytesPerSample; b++) {
        int v = buffer[index + b];
        if (b < bytesPerSample - 1 || bytesPerSample == 1) {
                v &= 0xFF;
        }
                        sample += v << (b * 8);
     }

    double sample32 = 100 * (sample / 32768.0); // don't know the use of this compute...
    x[index/bytesPerSample] = new Complex(sample32, 0);
}

    Complex[] tx = new Complex[1024]; // size = 2048 

///// reduction of the size of the signal in order to improve the fft traitment time
for (int i = 0; i < x.length/4; i++)
{

    tx[i] = new Complex(x[i*4].re(), 0);

 }

// Signal retrieval thanks to the FFT
fftRes = FFT.fft(tx); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T05:25:23.300

我不了解 Java，但是您在输入数据和复杂值数组之间进行转换的方式似乎非常复杂。您正在构建两个复杂数据数组，其中只需要一个。

此外，它闻起来像您的复杂实部和虚部值是双倍的。这远远超出了您的需求，无论如何，ARM 在双算术方面的速度非常慢。是否有基于单精度浮点数的复杂类？

第三，您通过用零填充复数的虚部来对真实数据执行复数 fft。虽然结果是正确的，但它的工作量是直接的两倍（除非程序足够聪明，可以发现这一点，我对此表示怀疑）。如果可能的话，对您的数据执行真正的 fft 并节省一半的时间。

然后正如西蒙所说，整个问题就是避免垃圾收集和内存分配。

此外，您的 FFT 似乎没有准备步骤。这意味着例程 FFT.fft() 每次都在计算复指数。FFT 计算中最长的部分是计算复指数，这是一种耻辱，因为对于任何给定的 FFT 长度，指数都是常数。它们根本不依赖于您的输入数据。在实时世界中，我们使用 FFT 例程，我们在程序开始时计算一次指数，然后实际的 fft 本身将该 const 数组作为其输入之一。不知道你的 FFT 类是否可以做类似的事情。

如果你最终会使用 FFTW 之类的东西，那么你将不得不习惯于从 Java 调用 C 代码。还要确保您获得的版本支持（我认为）NEON、ARM 对 SSE、AVX 和 Altivec 的回答。值得仔细阅读他们的发行说明来检查。此外，我强烈怀疑 FFTW 只有在您要求它对单精度浮点数而不是双精度浮点数执行 FFT 时才能显着提高速度。

谷歌运气！

- 编辑 -

我的意思当然是“祝你好运”。快给我一个真正的键盘，这些触摸屏的不可靠......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:37:14.890

First, thanks for all your answers. I followed them and made two test :

*   first one, I replace the double used in my Complex class by float. The result is just a bit better, but not enough.

*   then I've rewroten the fft method in order not to use Complex anymore, but a two-dimensional float array instead. For each row of this array, the first column contains the real part, and the second one the imaginary part. I also changed my code in order to instanciate the float array only once, on the onCreate method.

And the result... is worst !! Now it takes a little bit more than 500ms instead of 300ms. I don't know what to do now.

You can find below the initial fft fonction, and then the one I've re-wroten. Thanks for your help.

```
// compute the FFT of x[], assuming its length is a power of 2
public static Complex[] fft(Complex[] x) {
    int N = x.length;

    // base case
    if (N == 1) return new Complex[] { x[0] };

    // radix 2 Cooley-Tukey FFT
    if (N % 2 != 0) { throw new RuntimeException("N is not a power of 2 : " + N); }

    // fft of even terms
    Complex[] even = new Complex[N/2];
    for (int k = 0; k < N/2; k++) {
        even[k] = x[2*k];
    }
    Complex[] q = fft(even);

    // fft of odd terms
    Complex[] odd  = even;  // reuse the array
    for (int k = 0; k < N/2; k++) {
        odd[k] = x[2*k + 1];
    }
    Complex[] r = fft(odd);

    // combine
    Complex[] y = new Complex[N];
    for (int k = 0; k < N/2; k++) {
        double kth = -2 * k * Math.PI / N;
        Complex wk = new Complex(Math.cos(kth), Math.sin(kth));
        y[k]       = q[k].plus(wk.times(r[k]));
        y[k + N/2] = q[k].minus(wk.times(r[k]));
    }

    return y;
}

public static float[][] fftf(float[][] x) {
    /**
     *  x[][0] = real part
     *  x[][1] = imaginary part
     */

    int N = x.length;

    // base case
    if (N == 1) return new float[][] { x[0] };

    // radix 2 Cooley-Tukey FFT
    if (N % 2 != 0) { throw new RuntimeException("N is not a power of 2 : " + N); }

    // fft of even terms
    float[][] even = new float[N/2][2];
    for (int k = 0; k < N/2; k++) {
        even[k] = x[2*k];
    }
    float[][] q = fftf(even);

    // fft of odd terms
    float[][] odd  = even;  // reuse the array
    for (int k = 0; k < N/2; k++) {
        odd[k] = x[2*k + 1];
    }
    float[][] r = fftf(odd);

    // combine
    float[][] y = new float[N][2];
    double kth, wkcos, wksin    ;
    for (int k = 0; k < N/2; k++) {
        kth = -2 * k * Math.PI / N;
        //Complex wk = new Complex(Math.cos(kth), Math.sin(kth));
        wkcos = Math.cos(kth)   ;   // real part
        wksin = Math.sin(kth)   ;   // imaginary part

        //  y[k]       = q[k].plus(wk.times(r[k]));
        y[k][0] = (float) (q[k][0] + wkcos * r[k][0] - wksin * r[k][1]);
        y[k][1] = (float) (q[k][1] + wkcos * r[k][1] + wksin * r[k][0]);

        //  y[k + N/2] = q[k].minus(wk.times(r[k]));
        y[k + N/2][0] = (float) (q[k][0] - (wkcos * r[k][0] - wksin * r[k][1]));
        y[k + N/2][1] = (float) (q[k][1] - (wkcos * r[k][1] + wksin * r[k][0]));
    }

    return y;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T22:31:24.223

其实我想我不明白一切。

*   首先，关于 Math.cos 和 Math.sin ：你希望我如何不每次都计算它？你的意思是我应该只实例化整个值一次（例如将它存储在一个数组中）并将它们用于每个计算？
*   其次，关于N % 2，确实不是很有用，我可以在函数调用之前进行测试。
*   第三，关于西蒙的建议：我把他说的和你说的混在一起了，这就是为什么我用二维float[][]代替了Complex。如果这不是他的建议，那是什么？
*   至少，我不是 FFT 专家，那么制作“真正的 FFT”是什么意思？你的意思是我的虚部没用？如果是这样，我不确定，因为稍后在我的代码中，我计算每个频率的幅度，所以 sqrt(real[i]*real[i] + imag[i]*imag[i])。而且我认为我的虚部不等于零...

谢谢 ！

# javascript - 为什么经过身份验证的 CORS 请求的预检 OPTIONS 请求在 Chrome 中有效，但在 Firefox 中无效？

> ID：15734031
> 
> 赞同：69
> 
> 时间：2013-03-31T20:14:42.697
> 
> 标签：javascript, ajax, cors

我正在编写一个 JavaScript 客户端，以包含在 3rd 方网站上（想想 Facebook Like 按钮）。它需要从需要基本 HTTP 身份验证的 API 中检索信息。简化的设置如下所示：

第三方网站在其页面上包含此代码段：

```
<script 
async="true"
id="web-dev-widget"
data-public-key="pUbl1c_ap1k3y"
src="http://web.dev/widget.js">
</script> 
```

**widget.js**调用 API：

```
var el = document.getElementById('web-dev-widget'),
    user = 'token',
    pass = el.getAttribute('data-public-key'),
    url = 'https://api.dev/',
    httpRequest = new XMLHttpRequest(),
    handler = function() {
      if (httpRequest.readyState === 4) {
        if (httpRequest.status === 200) {
          console.log(httpRequest.responseText);
        } else {
          console.log('There was a problem with the request.', httpRequest);
        }
      }
    };

httpRequest.open('GET', url, true, user, pass);
httpRequest.onreadystatechange = handler;
httpRequest.withCredentials = true;
httpRequest.send(); 
```

API 已配置为使用适当的标头进行响应：

```
Header set Access-Control-Allow-Credentials: true
Header set Access-Control-Allow-Methods: "GET, OPTIONS"
Header set Access-Control-Allow-Headers: "origin, authorization, accept"
SetEnvIf Origin "http(s)?://(.+?\.[a-z]{3})$" AccessControlAllowOrigin=$0
Header set Access-Control-Allow-Origin %{AccessControlAllowOrigin}e env=AccessControlAllowOrigin 
```

请注意，`Access-Control-Allow-Origin`设置为 ，`Origin`而不是使用通配符，因为我正在发送凭据请求 ( `withCredentials`)。

现在一切就绪，可以发出异步跨域身份验证请求，并且在 OS X 10.8.2 上的 Chrome 25 中运行良好。在开发工具中，我可以在`OPTIONS`请求之前看到请求的网络请求`GET`，并且响应按预期返回。

在 Firefox 19 中进行测试时，Firebug 中没有出现对 API 的网络请求，并且在控制台中记录了此错误：`NS_ERROR_DOM_BAD_URI: Access to restricted URI denied`

经过一番挖掘，根据评论，我发现[Gecko不允许用户名和密码直接在跨站点URI](https://stackoverflow.com/questions/11255173/firefox-wont-send-cross-origin-resource-sharing-pre-flight)中。我假设这是使用可选的用户和密码参数，`open()`所以我尝试了另一种进行身份验证请求的方法，即对凭据进行 Base64 编码并发送授权标头：

```
// Base64 from http://www.webtoolkit.info/javascript-base64.html
auth = "Basic " + Base64.encode(user + ":" + pass);

...
// after open() and before send()
httpRequest.setRequestHeader('Authorization', auth); 
```

这会导致对导致 Google 搜索`401 Unauthorized`的请求的响应，`OPTIONS`例如“为什么这在 Chrome 而不是 Firefox 中有效！？” 那时我知道我有麻烦了。

为什么*它*适用于 Chrome 而不是 Firefox？如何获得`OPTIONS`一致发送和响应的请求？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2013-03-31T20:14:42.697

**为什么*它*适用于 Chrome 而不是 Firefox？**

CORS 预检请求的[W3 规范](https://fetch.spec.whatwg.org/#cors-protocol-and-credentials)明确指出应排除用户凭据。[Chrome](https://code.google.com/p/chromium/issues/detail?id=139566)和[WebKit](https://bugs.webkit.org/show_bug.cgi?id=92755)中存在一个错误，即`OPTIONS`返回 401 状态的请求仍会发送后续请求。

[Firefox有一个相关的错误文件，该错误以指向](https://bugzilla.mozilla.org/show_bug.cgi?id=778548)[W3 公共 webapps 邮件列表](http://lists.w3.org/Archives/Public/public-webapps/2012JulSep/0252.html)的链接结尾，要求更改 CORS 规范，以允许在`OPTIONS`请求中发送身份验证标头，以使 IIS 用户受益。基本上，他们正在等待这些服务器被淘汰。

**如何获得`OPTIONS`一致发送和响应的请求？**

只需让服务器（本例中为 API）响应`OPTIONS`请求而不需要身份验证。

[Kinvey](http://www.kinvey.com/blog/60/kinvey-adds-cross-origin-resource-sharing-cors)在这方面做得很好，同时还链接到[Twitter API 的一个问题，该问题](https://code.google.com/p/twitter-api/issues/detail?id=2273)概述了这个确切场景的 catch-22 问题，有趣的是，在任何浏览器问题提交前几周。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-05-18T17:28:54.823

这是一篇旧帖子，但也许这可以帮助人们完成 CORS 问题。要完成基本授权问题，您应该避免在服务器中对 OPTIONS 请求进行授权。这是一个 Apache 配置示例。只需在您的 VirtualHost 或 Location 中添加类似的内容。

```
<LimitExcept OPTIONS>
    AuthType Basic
    AuthName <AUTH_NAME>
    Require valid-user
    AuthUserFile <FILE_PATH>
</LimitExcept> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-15T11:31:08.637

这对我来说很特别。我正在发送一个名为“SESSIONHASH”的标头。Chrome 和 Opera 没问题，但 Firefox 也希望在“Access-Control-Allow-Headers”列表中使用此标头。否则，Firefox 将抛出 CORS 错误。

# java - JTree 单元格编辑器根据操作系统接收鼠标点击的方式不同

> ID：15734033
> 
> 赞同：2
> 
> 时间：2013-03-31T20:14:43.400
> 
> 标签：java, macos, swing, listener, jtree

我创建了一个树单元渲染器/编辑器框架，虽然它确实有点 hacky，但它在 Windows 和 Linux 上完美运行。下图说明了一个示例设置。

![在此处输入图像描述](https://i.imgur.com/C9ISdJj.jpg)

目标是，如果用户单击**图像**（数字）1 或 2，则应用程序响应该单击但不选择树行。如果用户单击**文本**一或二，应用程序会响应该单击并*选择*树行。我实现这一点的方式再次有点骇人听闻。基本上，当用户单击树行时，会显示编辑器组件（看起来与渲染器组件相同），并且编辑器组件有一个鼠标侦听器，可以确定用户在行中单击的位置。

这在 Windows/Linux 上工作的事实依赖于我一直认为依赖的东西似乎很脆弱。基本上，如果您单次单击该行，则单击 (a) 会调出编辑器并 (b) 激活编辑器组件上的鼠标侦听器。这就是我想要的方式！但是，当您尝试在 Mac OSX（10.6.2 如果重要）上运行该应用程序时，上述脆弱的假设不再适用。任何时候你想与树交互，你必须点击两次（一次激活编辑器，再次激活鼠标监听器）。

下面的 SSCCE 可以重现该行为。当然，如果您没有 OSX，则无法重现**不良**行为，但也许您仍然可以推荐一种更聪明的方法来实现我的目标。`sysout`当您单击树的各个部分时，观察控制台中指示正在发生的事情的消息。

哦，SSCCE 引用了这两个图像：

![图 1](https://i.imgur.com/HtHJkfI.png) ![图像 2](https://i.imgur.com/w5jAp5c.png)

```
package TreeTest;

import java.awt.Color;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.net.URL;
import java.util.EventObject;
import javax.imageio.ImageIO;
import javax.swing.BoxLayout;
import javax.swing.ImageIcon;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTree;
import javax.swing.UIManager;
import javax.swing.border.EmptyBorder;
import javax.swing.border.LineBorder;
import javax.swing.event.CellEditorListener;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.event.TreeSelectionListener;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.TreeCellEditor;
import javax.swing.tree.TreeCellRenderer;
import javax.swing.tree.TreeNode;
import javax.swing.tree.TreePath;
import javax.swing.tree.TreeSelectionModel;

@SuppressWarnings("serial")
public class TreeTest extends JComponent {

    private JFrame frame;
    private DefaultTreeModel treeModel;
    private DefaultMutableTreeNode root;
    private JTree tree;

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(
                UIManager.getSystemLookAndFeelClassName());
        } catch (Throwable e) {
            e.printStackTrace();
        }
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    TreeTest window = new TreeTest();
                    window.frame.setVisible(true);
                    window.frame.requestFocusInWindow();
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public TreeTest() {
        initialize();
    }

    private void initialize() {
        frame = new JFrame("Tree Test");
        frame.setBounds(400, 400, 250, 150);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        root = new DefaultMutableTreeNode("root");
        treeModel = new DefaultTreeModel(root);
        tree = new JTree(treeModel);
        tree.setEditable(true);
        tree.getSelectionModel().setSelectionMode(
            TreeSelectionModel.SINGLE_TREE_SELECTION);
        tree.setRootVisible(false);
        tree.setShowsRootHandles(false);
        tree.setCellRenderer(new TreeRenderer());
        tree.setCellEditor(new TreeEditor());
        tree.putClientProperty("JTree.lineStyle", "None");
        tree.setBackground(Color.white);

        treeModel.insertNodeInto(new DefaultMutableTreeNode("two"), root, 0);
        treeModel.insertNodeInto(new DefaultMutableTreeNode("one"), root, 0);

        TreeNode[] nodes = treeModel.getPathToRoot(root);
        tree.expandPath(new TreePath(nodes));
        tree.addTreeSelectionListener(new TreeSelectionListener() {
            @Override
            public void valueChanged(TreeSelectionEvent e) {
                System.out.println("SELECTION CHANGED!");
            }
        });

        frame.getContentPane().add(tree);
    }

    public class TreeComponent extends JPanel {

        public TreeComponent(JLabel numIcon, JLabel numText) {
            this.setLayout(new BoxLayout(this, BoxLayout.X_AXIS));
            this.add(numIcon);
            this.add(numText);
        }
    }

    public class TreeRenderer implements TreeCellRenderer {

        private ImageIcon oneIcon;
        private ImageIcon twoIcon;

        public TreeRenderer() {
            try {
                oneIcon = new ImageIcon(ImageIO.read(
                    new URL("http://i.imgur.com/HtHJkfI.png")));
                twoIcon = new ImageIcon(ImageIO.read(
                    new URL("http://i.imgur.com/w5jAp5c.png")));
            } catch (Exception e) {
                e.printStackTrace();
            }

        }

        @Override
        public Component getTreeCellRendererComponent(JTree tree, Object value,
            boolean selected, boolean expanded, boolean leaf, int row,
            boolean hasFocus) {
            JLabel numIcon = new JLabel();
            numIcon.setAlignmentX(JLabel.CENTER_ALIGNMENT);
            numIcon.setAlignmentY(JLabel.CENTER_ALIGNMENT);
            numIcon.setBorder(new EmptyBorder(0, 0, 0, 4));

            JLabel numText = new JLabel();

            TreeComponent comp = new TreeComponent(numIcon, numText);

            String str = (String) ((DefaultMutableTreeNode) value).getUserObject();
            if (str.equals("one")) {
                numIcon.setIcon(oneIcon);
                numText.setText("one");
            } else if (str.equals("two")) {
                numIcon.setIcon(twoIcon);
                numText.setText("two");
            }

            numText.setOpaque(true);
            if (selected) {
                numText.setBackground(new Color(209, 230, 255));
                numText.setBorder(new LineBorder(
                    new Color(132, 172, 221), 1, false));
            } else {
                numText.setBackground(Color.white);
                numText.setBorder(new LineBorder(Color.white, 1, false));
            }
            comp.setFocusable(false);
            comp.setBackground(Color.white);
            return comp;
        }
    }

    public class TreeEditor implements TreeCellEditor {

        private TreeRenderer rend;
        private TreeComponent editorComponent;
        private JTree tree;
        private DefaultTreeModel treeModel;
        private DefaultMutableTreeNode node;
        private String str;

        public TreeEditor() {
            rend = new TreeRenderer();
        }

        @Override
        public Component getTreeCellEditorComponent(
            final JTree tree, final Object value, boolean isSelected,
            boolean expanded, boolean leaf, int row) {
            this.tree = tree;
            treeModel = (DefaultTreeModel) tree.getModel();
            node = (DefaultMutableTreeNode) value;
            Object userObject = node.getUserObject();
            this.str = (String) userObject;

            TreeNode[] nodes = treeModel.getPathToRoot(node);
            final TreePath path = new TreePath(nodes);

            editorComponent = (TreeComponent) rend.getTreeCellRendererComponent(
                tree, value, isSelected, expanded, leaf, row, false);
            editorComponent.addMouseListener(new MouseAdapter() {
                public void mousePressed(MouseEvent e) {
                    TreeEditor.this.stopCellEditing();
                    int x = e.getX();
                    if (x >= 0 && x <= 16) {
                        System.out.println(
                            "you clicked the image for row " + str);
                    } else if (x > 16) {
                        System.out.println(
                            "you clicked the text for row " + str);
                        tree.setSelectionPath(path);
                    }
                }
            });
            return editorComponent;
        }

        @Override
        public boolean isCellEditable(EventObject anEvent) {
            return true;
        }

        @Override
        public boolean shouldSelectCell(EventObject anEvent) {
            return false;
        }

        @Override
        public boolean stopCellEditing() {
            tree.cancelEditing();
            return false;
        }

        @Override
        public Object getCellEditorValue() {
            return null;
        }

        @Override
        public void cancelCellEditing() {
        }

        @Override
        public void addCellEditorListener(CellEditorListener l) {
        }

        @Override
        public void removeCellEditorListener(CellEditorListener l) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T06:39:07.450

我不确定我是否理解这个要求，但下面的示例添加了一个方便的键绑定，并且可以使用[此处显示的任](https://stackoverflow.com/q/15625424/230513)*一单击*方法。[正如kleopatra](https://stackoverflow.com/a/15637927/230513)所建议的那样，我选择了 override ，但要遵守她关于可用性的警告。`canEditImmediately()`

![树图像](https://i.stack.imgur.com/fZJUv.png)

```
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.event.KeyEvent;
import java.awt.event.MouseEvent;
import java.net.URL;
import java.util.EventObject;
import javax.imageio.ImageIO;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeCellEditor;
import javax.swing.tree.DefaultTreeCellRenderer;

/**
 * @see https://stackoverflow.com/a/15738813/230513
 * @see https://stackoverflow.com/q/15625424/230513
 */
public class Test {

    private static Icon one;
    private static Icon two;

    private void display() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JTree tree = new JTree();
        for (int i = 0; i < tree.getRowCount(); i++) {
            tree.expandRow(i);
        }
        final TreeRenderer renderer = new TreeRenderer();
        tree.setCellRenderer(renderer);
        tree.setCellEditor(new TreeEditor(tree, renderer));
        tree.setEditable(true);
        tree.getInputMap().put(
            KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "startEditing");
        f.add(new JScrollPane(tree));
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    private static class TreeRenderer extends DefaultTreeCellRenderer {

        @Override
        public Component getTreeCellRendererComponent(JTree tree, Object value,
            boolean sel, boolean exp, boolean leaf, int row, boolean hasFocus) {
            DefaultMutableTreeNode node = (DefaultMutableTreeNode) value;
            String s = node.getUserObject().toString();
            if ("colors".equals(s)) {
                setOpenIcon(one);
                setClosedIcon(one);
            } else if ("sports".equals(s)) {
                setOpenIcon(two);
                setClosedIcon(two);
            } else {
                setOpenIcon(getDefaultOpenIcon());
                setClosedIcon(getDefaultClosedIcon());
            }
            super.getTreeCellRendererComponent(
                tree, value, sel, exp, leaf, row, hasFocus);
            return this;
        }
    }

    private static class TreeEditor extends DefaultTreeCellEditor {

        public TreeEditor(JTree tree, DefaultTreeCellRenderer renderer) {
            super(tree, renderer);
        }

        @Override
        public Component getTreeCellEditorComponent(JTree tree, Object value,
            boolean isSelected, boolean exp, boolean leaf, int row) {
            Component c = super.getTreeCellEditorComponent(
                tree, value, isSelected, exp, leaf, row);
            DefaultMutableTreeNode node = (DefaultMutableTreeNode) value;
            String s = node.getUserObject().toString();
            if ("colors".equals(s)) {
                editingIcon = one;
            } else if ("sports".equals(s)) {
                editingIcon = two;
            }
            return c;
        }

        @Override
        protected boolean canEditImmediately(EventObject event) {
            if ((event instanceof MouseEvent)
                && SwingUtilities.isLeftMouseButton((MouseEvent) event)) {
                MouseEvent me = (MouseEvent) event;

                return ((me.getClickCount() >= 1)
                    && inHitRegion(me.getX(), me.getY()));
            }
            return (event == null);
        }
    }

    public static void main(String[] args) throws Exception {
        one = new ImageIcon(ImageIO.read(
            new URL("http://i.imgur.com/HtHJkfI.png")));
        two = new ImageIcon(ImageIO.read(
            new URL("http://i.imgur.com/w5jAp5c.png")));
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test().display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T10:22:53.970

快速概述如何实现复杂的单元格编辑器。假设是编辑器的所有交互式元素确实编辑了节点的 userObject 的属性——就像 OP 的完整代码中的情况一样。

合作者

*   具有多个属性的模拟数据对象
*   具有多个子级的渲染器，每个子级绑定到数据对象的一个​​属性
*   使用渲染组件的“实时”实例的编辑器，即根据需要添加侦听器以遵守编辑器的合同

一些代码（显然*不能*用于实际使用，只是为了得到这个想法:)

```
public static class ViewProvider extends AbstractCellEditor 
    implements TreeCellEditor, TreeCellRenderer {

    private JCheckBox firstBox;
    private JButton colorButton;
    private JComponent nodePanel;
    private JButton nameButton;

    private Data data;
    private boolean ignore;

    public ViewProvider(boolean asEditor) {
        initComponents();
        if (asEditor)
          installListeners();
    }

    protected void initComponents() {
        nodePanel = new JPanel();
        nodePanel.setOpaque(false);
        firstBox = new JCheckBox();
        colorButton = new JButton();
        // if we need something clickable use something ... clickable :-)
        nameButton = new JButton();
        nameButton.setContentAreaFilled(false);
        nameButton.setOpaque(true);
        nameButton.setBorderPainted(false);
        nameButton.setMargin(new Insets(0, 0, 0, 0));
        nodePanel.add(firstBox);
        nodePanel.add(colorButton);
        nodePanel.add(nameButton);
    }

    protected void installListeners() {
        ActionListener cancel = new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                cancelCellEditing();
            }

        };
        nameButton.addActionListener(cancel);
        ActionListener stop = new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                stopCellEditing();
            }

        };
        firstBox.addActionListener(stop);
        // Note: code for using a button to trigger opening a dialog
        // is in the tutorial, should replace this
        colorButton.addActionListener(stop);
    }

    @Override
    public Component getTreeCellRendererComponent(JTree tree, Object value,
            boolean selected, boolean expanded, boolean leaf, int row,
            boolean hasFocus) {
        Data data = (Data) ((DefaultMutableTreeNode) value).getUserObject();
        firstBox.setSelected(data.isVisible);
        colorButton.setBackground(data.color);
        nameButton.setText(data.name);
        nameButton.setBackground(selected ? Color.YELLOW : tree.getBackground());
        nameButton.setFont(tree.getFont());
        return nodePanel;
    }

    @Override
    public Component getTreeCellEditorComponent(JTree tree, Object value,
            boolean isSelected, boolean expanded, boolean leaf, int row) {
        // copy to not fiddle with the original
        data = new Data((Data) ((DefaultMutableTreeNode) value).getUserObject());
        ignore = true;
        getTreeCellRendererComponent(tree, value, isSelected, expanded, leaf, row, false);
        ignore = false;
        return nodePanel;
    }

    @Override
    public Object getCellEditorValue() {
        return data;
    }

    @Override
    public boolean shouldSelectCell(EventObject anEvent) {
        // at this point the editing component is added to the tree
        // and the mouse coordinates still in tree coordinates
        if (anEvent instanceof MouseEvent) {
            MouseEvent me = (MouseEvent) anEvent;
            Point loc = SwingUtilities.convertPoint(me.getComponent(), 
                    me.getPoint(), nodePanel);
            return loc.x >= nameButton.getX();
        }
        return false;
    }

    @Override
    public boolean stopCellEditing() {
        if (ignore) return false;
        // real-world data will have setters
        data.isVisible = firstBox.isSelected();
        return super.stopCellEditing();
    }

    @Override
    public void cancelCellEditing() {
        if (ignore) return;
        data = null;
        super.cancelCellEditing();
    }

}

// simple Data - obviously not for production 
public static class Data {
    boolean isVisible;
    Color color;
    String name;

    public Data(boolean isVisible, Color color,
            String name) {
        this.isVisible = isVisible;
        this.color = color;
        this.name = name;
    }

    /**
     * A copy constructor to allow editors to manipulate its
     * properties without changing the original.
     * 
     * @param original
     */
    public Data(Data original) {
        this.isVisible = original.isVisible;
        this.color = original.color;
        this.name = original.name;
    }
}

// usage:
DefaultMutableTreeNode root = new DefaultMutableTreeNode(
    new Data(true, Color.RED, "someName"));
root.add(new DefaultMutableTreeNode(new Data(true, Color.GREEN, "other")));
root.add(new DefaultMutableTreeNode(new Data(false, Color.BLUE, "whatagain")));
root.add(new DefaultMutableTreeNode(new Data(false, Color.YELLOW, "dummy")));

JTree tree = new JTree(root);
tree.setCellRenderer(new ViewProvider(false));
tree.setCellEditor(new ViewProvider(true));
tree.setEditable(true); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T22:09:25.067

我想出了一些可以创建我想要的行为并且根本不使用 a`TreeCellEditor`的东西。相反，树是不可编辑的，并且使用`JTree`已`processMouseEvent`覆盖的自定义扩展来实例化。我在[这里](https://stackoverflow.com/a/3157215/912935)得到了这个想法。

它似乎工作得很好，但它仍然有点hacky（它会执行一个计算循环来确定树单元的开始位置，因为这可能会因缩进而异）。此外，我几乎禁用`mouseClicked`并`mouseReleased`键入事件，并且正在控制`JTreeMod`唯一的`mousePressed`事件。不确定这是否会在以后咬我或者是不好的做法，但我不喜欢我的自定义代码在所有事件中连续运行 3 次。我还无法在非 Windows 操作系统上进行测试。

这是单击后的控制台输出，串联（1）图像一（2）文本一（3）图像二（4）文本二。同样，这完美地实现了我想要的行为。

```
you clicked the image for row 1\. this was detected, but no selection will happen!
you clicked the text for row 1\. this was detected, and selection WILL happen!
SELECTION CHANGED!
you clicked the image for row 2\. this was detected, but no selection will happen!
you clicked the text for row 2\. this was detected, and selection WILL happen!
SELECTION CHANGED! 
```

这是新的 SSCCE：

```
package TreeTest;

import java.awt.Color;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.event.MouseEvent;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.BoxLayout;
import javax.swing.ImageIcon;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTree;
import javax.swing.UIManager;
import javax.swing.border.EmptyBorder;
import javax.swing.border.LineBorder;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.event.TreeSelectionListener;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.TreeCellRenderer;
import javax.swing.tree.TreeNode;
import javax.swing.tree.TreePath;
import javax.swing.tree.TreeSelectionModel;

@SuppressWarnings("serial")
public class TreeTest2 extends JComponent {

    private JFrame frame;
    private DefaultTreeModel treeModel;
    private DefaultMutableTreeNode root;
    private JTreeMod tree;

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(
                UIManager.getSystemLookAndFeelClassName());
        } catch (Throwable e) {
            e.printStackTrace();
        }
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    TreeTest2 window = new TreeTest2();
                    window.frame.setVisible(true);
                    window.frame.requestFocusInWindow();
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public TreeTest2() {
        initialize();
    }

    private void initialize() {
        frame = new JFrame("Tree Test");
        frame.setBounds(400, 400, 250, 150);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        root = new DefaultMutableTreeNode("root");
        treeModel = new DefaultTreeModel(root);
        tree = new JTreeMod(treeModel);
        tree.setEditable(false);
        tree.getSelectionModel().setSelectionMode(
            TreeSelectionModel.SINGLE_TREE_SELECTION);
        tree.setRootVisible(false);
        tree.setShowsRootHandles(true);
        tree.setCellRenderer(new TreeRenderer());
        tree.putClientProperty("JTree.lineStyle", "None");
        tree.setBackground(Color.white);

        DefaultMutableTreeNode one = new DefaultMutableTreeNode("one");
        DefaultMutableTreeNode two = new DefaultMutableTreeNode("two");

        treeModel.insertNodeInto(one, root, 0);
        treeModel.insertNodeInto(two, one, 0);

        TreeNode[] nodes = treeModel.getPathToRoot(root);
        tree.expandPath(new TreePath(nodes));
        nodes = treeModel.getPathToRoot(one);
        tree.expandPath(new TreePath(nodes));
        tree.addTreeSelectionListener(new TreeSelectionListener() {
            @Override
            public void valueChanged(TreeSelectionEvent e) {
                System.out.println("SELECTION CHANGED!");
            }
        });

        frame.getContentPane().add(tree);
    }

    public class TreeRenderer implements TreeCellRenderer {

        private ImageIcon oneIcon;
        private ImageIcon twoIcon;

        public TreeRenderer() {
            try {
                oneIcon = new ImageIcon(ImageIO.read(
                        new URL("http://i.imgur.com/HtHJkfI.png")));
                twoIcon = new ImageIcon(ImageIO.read(
                        new URL("http://i.imgur.com/w5jAp5c.png")));
            } catch (Exception e) {
                e.printStackTrace();
            }

        }

        @Override
        public Component getTreeCellRendererComponent(JTree tree, Object value,
            boolean selected, boolean expanded, boolean leaf, int row,
            boolean hasFocus) {
            JLabel numIcon = new JLabel();
            numIcon.setAlignmentX(JLabel.CENTER_ALIGNMENT);
            numIcon.setAlignmentY(JLabel.CENTER_ALIGNMENT);
            numIcon.setBorder(new EmptyBorder(0, 0, 0, 4));

            JLabel numText = new JLabel();

            JPanel comp = new JPanel();
            comp.setLayout(new BoxLayout(comp, BoxLayout.X_AXIS));
            comp.add(numIcon);
            comp.add(numText);

            String str = (String) ((DefaultMutableTreeNode) value).getUserObject();
            if (str.equals("one")) {
                numIcon.setIcon(oneIcon);
                numText.setText("one");
            } else if (str.equals("two")) {
                numIcon.setIcon(twoIcon);
                numText.setText("two");
            }

            numText.setOpaque(true);
            if (selected) {
                numText.setBackground(new Color(209, 230, 255));
                numText.setBorder(new LineBorder(
                    new Color(132, 172, 221), 1, false));
            } else {
                numText.setBackground(Color.white);
                numText.setBorder(new LineBorder(Color.white, 1, false));
            }
            comp.setFocusable(false);
            comp.setBackground(Color.white);
            return comp;
        }
    }

    public class JTreeMod extends JTree {
        public JTreeMod(DefaultTreeModel treeModel) {
            super(treeModel);
        }

        @Override
        protected void processMouseEvent(MouseEvent e) {
            int type = e.getID();
            if (type == MouseEvent.MOUSE_CLICKED || type == MouseEvent.MOUSE_RELEASED) {
                // do nothing
            } else if (type == MouseEvent.MOUSE_PRESSED) {
                int x = e.getX();
                int y = e.getY();

                int row = this.getRowForLocation(x, y);
                if (row == -1) {
                    super.processMouseEvent(e);
                    return;
                }

                int xOffset = x;
                int row1 = row;
                while (row1 == row) {
                    xOffset--;
                    row1 = this.getRowForLocation(xOffset, y);
                }
                xOffset++;

                if (x - xOffset <= 16) {
                    System.out.println("you clicked the image for row " + (row + 1) +
                            ". this was detected, but no selection will happen!");
                    return;
                } else {
                    System.out.println("you clicked the text for row " + (row + 1) + 
                            ". this was detected, and selection WILL happen!");
                    super.processMouseEvent(e);
                }
            } else {
                super.processMouseEvent(e);
            }
        }
    }
} 
```

# c++ - 从 C++ 中的向量生成随机数

> ID：15734035
> 
> 赞同：0
> 
> 时间：2013-03-31T20:14:49.347
> 
> 标签：c++, vector, srand

在我尝试在一个我必须做的更大的程序中实现它之前，我正在测试如何做到这一点，并且出现了问题。此代码工作正常，但它继续只给出向量中的第一个数字。到底出了什么问题？

```
#include <iostream>
#include <string>
#include <vector>
#include "stdlib.h"
#include "time.h"

using namespace std;

int main()
{
    int randomNumber;
    int length;
    int i = 0;
    vector<int> x;
    x.push_back(12);
    x.push_back(1);
    x.push_back(6);
    x.push_back(34);
    x.push_back(23);

    srand(time(0));
    length = sizeof(x.capacity() - 1) / sizeof(int);

    while(i < 10){
        randomNumber = x[rand() % length];
        cout << randomNumber << endl;
        i++;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T20:18:42.443

这个调用是不对的：

`length = sizeof(x.capacity() - 1) / sizeof(int);`

您应该改为使用`x.size()`来获取向量的大小。

你在上面的行中所做的是 - 计算它的大小`x.capacity() - 1`是一个整数，然后将它除以一个整数的大小。因此长度始终为 1，因此`rand()%length`始终为 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T20:19:33.073

您计算`length`向量的方式是错误的：

```
length = sizeof(x.capacity() - 1) / sizeof(int); 
```

因为*返回当前为向量分配的存储空间的大小，以元素表示*，因此在您的示例中等于。[`capacity()`](http://www.cplusplus.com/reference/vector/vector/capacity/) *`length``1`*

 *您应该[`size()`](http://www.cplusplus.com/reference/vector/vector/size/)改用：

```
length = x.size(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T20:18:57.727

我认为您只想使用`x.size()`, 而不是`length`：

```
randomNumber = x[rand() % x.size()]; 
```*

# sql-server - Microsoft SQL Server 连接在带分隔符的一列中获取第二个表选项

> ID：15734037
> 
> 赞同：0
> 
> 时间：2013-03-31T20:14:56.473
> 
> 标签：sql-server, tsql

我有一张叫桌子`Products`和一张叫的桌子`Colors`。

两个表中都有一个 FK `productId`。

`Color`表如下所示：

```
colorId | productId | color
---------------------------
1       | 10        | Red
2       | 10        | Yellow
3       | 10        | Green 
```

我如何进行连接以`productId = 10`使用逗号分隔符在单行中获取与所有颜色相关联的所有颜色？

我的意思是结果应该是这样的：

```
prodId | ProdName  | Colors 
-----------------------------
10     |Man t-Short|Red, Green,Yellow 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:18:26.147

您可以使用`FOR XML PATH`将值连接到单个列中：

```
select distinct p.prodid, p.prodname,
  STUFF((SELECT distinct ', ' + c.color
         from Colors c
         where p.prodId = c.productid
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,2,'') colors
from products p; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/65991/2)。

或者您可以`CROSS APPLY`使用`FOR XML PATH`：

```
select p.prodid, 
  p.prodname,
  left(colors, len(colors)-1) colors
from products p
cross apply
(
  select c.color + ', '
  from colors c
  where p.prodid = c.productid
  for xml path('')
) c (colors); 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/65991/7)

# iphone - 在游戏中暂停，UICustomalertview / UIView

> ID：15734038
> 
> 赞同：0
> 
> 时间：2013-03-31T20:14:58.737
> 
> 标签：iphone, objective-c, customization, uialertview

我正在实现一个游戏，现在我正在实现暂停功能。但我看到了一些不同的方法来做到这一点。我做了很多研究，有这样的教程：[教程](http://joris.kluivers.nl/blog/2009/04/23/subclass-uialertview-to-create-a-custom-alert/)

但是我已经看到您的应用程序真的可能会被这种警报拒绝：

> UIAlertView 的 Apple 文档说：
> 
> 此类的视图层次结构是私有的，不得修改。

其他方法可能是（如我所见）实现 UIView。但是 UIalertviews 的优点是暂停功能已经实现，我不知道如何在不使用的情况下执行暂停所有动画等的相同功能：

```
sleep(INFINITY); 
```

实现暂停菜单和功能以获得这样的结果的最佳方法是什么（这是我抽屉里的一张图片）：

![我朋友的暂停功能](https://i.stack.imgur.com/IMVCF.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:26:21.983

你可能需要：

1.  isPaused 用于暂停模式指示器
2.  弹出屏幕

您应该在主游戏循环中拥有的第一件事是 BOOL isPaused 指示器，因此游戏知道它何时处于暂停模式。通过执行适当的操作，将暂停模式视为任何其他模式。停止该过程并不是很好，因为可能必须完成其他操作。

其次，弹出屏幕可能是具有所需透明度的全屏图形，或者更好：以编程方式制作具有 50% 透明度的黑色图像，因此您可以使背景变暗并在视图堆栈顶部显示警报视图。

关于设计的一点题外话，你应该分为两部分：

*   仅控制游戏参数的 UI
*   控制游戏动作的游戏循环

将实际游戏循环与控件分开是很好的。像这个警报视图这样的控件应该只操纵显示参数，而不是调用任何其他操作（可能是 CPU 昂贵的）。当游戏根据状态参数显示图形时，游戏循环应该一直运行。

# javascript - 只有 CSS 的模态窗口

> ID：15734040
> 
> 赞同：0
> 
> 时间：2013-03-31T20:15:05.897
> 
> 标签：javascript, css, popup, modal-dialog

这可能吗，还是我必须使用 JavaScript 将模态高度设置为身体高度？例如：

```
$('.modal').height($('body').height()) 
```

我不能使用这个 CSS：

```
.modal{
  position: relative;
  height: 100%;
} 
```

因为模态父级高度是根据其他子级计算的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:49:03.110

您可以使用上面列出的 CSS，但使用绝对定位。

```
.modal {
    position: absolute;
    height: 100%;
    width: 50%;
    top: 0;
    left: 0;
} 
```

请记住，元素将相对于其第一个定位的祖先进行定位。

因此，如果您希望它相对于浏览器的左上角定位，请确保模态元素没有嵌套在页面其他位置的另一个定位元素内。

# c# - IEnumerable 的返回类型问题

> ID：15734042
> 
> 赞同：0
> 
> 时间：2013-03-31T20:15:08.087
> 
> 标签：c#, linq, types, ienumerable

我正在研究 linq 方法，似乎无法获得与方法签名匹配的返回类型。任何指导将不胜感激。

谢谢！

```
private static IEnumerable<KeyValuePair<string, string>> RunQuery(XDocument doc)
{
    var data = from b in doc.Descendants("Company")
               where b.Attribute("name").Value == "CompanyA"
               from y in b.Descendants("Shirt")
               from z in y.Descendants("Size")
               select new
               {
                   color = y.Attribute("id").Value,
                   price = z.Value
               };

    return data;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T20:17:03.683

您必须创建 KeyValuePairs。

```
...
select new KeyValuePair(y.Attribute("id").Value, z.Value) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T20:27:59.067

您可以使您的查询更加排序。注意我已经删除了`from y in b.Descendants("Shirt")`，因为`Descendants`解析整个 xml 节点，包括它的所有后代，直到最低级别。此查询将返回`Dictionary<string, string>`，它实现`IEnumerable<KeyValuePair<string, string>>`，因此您不需要更改方法签名，但我强烈建议这样做，因为客户端将无法访问具有恒定时间的字典元素

```
return doc.Descendants("Company")
          .Where(node => node.Attribute("name").Value == "CompanyA")
          .Descendants("Size")
          .ToDictionary(node => node.Attribute("id").Value,
                        node => node.Value); 
```

# spring-security - 春天。登录失败后填充 j_username

> ID：15734047
> 
> 赞同：1
> 
> 时间：2013-03-31T20:15:24.737
> 
> 标签：spring-security

我正在我的应用程序中实现身份验证功能。当凭据无效时，我想在同一个登录页面上移动，但填充了 j_username 文本字段。但我认为没有办法做到这一点。

我的登录.jsp：

```
<html>
<head> <!-- connecting javascripts and styles --> </head>
<body>
<c:set var="base" value="/myProject" /> 

    <form:form commandName="loginUser" method="POST" action="${base}/j_spring_security_check">
        <h3 align="center"><spring:message code="login.header" /></h3>
        <table>
            <tr>
                <td align="right"><spring:message code="login.label.login" /></td>
                <td><input type="text" name="j_username" /></td>
                <td><div id="j_username" class="errors"><span id="j_username_stub"/><form:errors path="login" /></div></td>
            </tr>
            <tr>
                <td align="right"><spring:message code="login.label.password" /></td>
                <td><input type="password" name="j_password" /></td>
                <td><div id="j_password" class="errors"><span id="j_password_stub"/></div></td>
            </tr>
            <tr>
                <td align="right"><spring:message code="login.label.rememberme" /></td>
                <td><input type="checkbox" name="_spring_security_remember_me" /></td>
            </tr>
            <tr>
                <td align="right"><input type="submit" value="<spring:message code="login.button.login" />" /></td>

            </tr>
        </table>
    </form:form>
</html> 
```

我的spring-security.xml：

```
 <security:http pattern="/static/**" security="none" />

    <security:http use-expressions="true" authentication-manager-ref="authenticationManager">
        <security:http-basic />
        <security:intercept-url pattern="/jsp/login*" access="permitAll" />
        <security:intercept-url pattern="/jsp/admin/**" access="isAuthenticated()" />
        <security:form-login
                login-page="/"
                default-target-url="/jsp/admin/admin.jsp"
                authentication-failure-url="/loginFailed"/>
        <security:logout logout-url="/logout" invalidate-session="true" delete-cookies="true" logout-success-url="/" />
        <security:anonymous username="guest" granted-authority="ROLE_ANONYMOUS"/>
        <security:remember-me key="sparkBitAuthToken" token-validity-seconds="864000" />
    </security:http>

    <security:authentication-manager alias="authenticationManager">
        <security:authentication-provider user-service-ref="userDetailsService">
            <security:password-encoder ref="encoder"/>
        </security:authentication-provider>
    </security:authentication-manager>

    <bean id="encoder" class="org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder"/> <!-- bCrypt encoder -->

    <bean id="userDetailsService" class="com.myproject.web.authentication.SparkBitUserDetailsService" /> 
```

我的登录控制器：

```
@Controller
@RequestMapping("/")
public class LoginController {

    @RequestMapping
    public String getLoginPage() {
        return "login";
    }

    @RequestMapping(value= "/loginFailed")
    public String getLoginPageOnError(Model model, @ModelAttribute("loginUser") LoginUserBean entity, BindingResult result, HttpServletRequest request) {
        result.rejectValue("login", "error.login.credentials", "Invalid credentials ...");
        return "login";
    }
    } 
```

在我的控制器中，我没有填写表格的数据

此外，在不加载 JavaScript 的情况下，我在无效凭据页面刷新时陷入困境。有什么问题？

谢谢指教

# 3d - 在孩子中反转父母的旋转，所以孩子在世界上看起来没有旋转

> ID：15734049
> 
> 赞同：6
> 
> 时间：2013-03-31T20:15:37.413
> 
> 标签：3d, coffeescript, three.js, webgl

在 THREE.js 场景中，我有一个旋转的父对象。这个父级的子级应该在位置上锁定到父级的旋转，但他们自己的旋转需要独立，而不是从父级继承。

一个简单的例子是让孩子们总是面对镜头。

我的尝试是“反转”子代中父代的轮换。那是：

```
# render loop
render = ->
  requestAnimationFrame(render)

  # Rotate the parent
  @parent.rotation.x += 0.01
  @parent.rotation.z += 0.02

  # Attempt to invert rotation of the parent, and fail :(
  for child in @children
    child.rotation.x = -@parent.rotation.x
    child.rotation.z = -@parent.rotation.z 
```

这种天真的尝试的结果就在这里。黄色的小平面是灰色立方体的子级，它们以我没想到的方式旋转……

[http://jsfiddle.net/b6jgS/](http://jsfiddle.net/b6jgS/)

我想要的是那些平面始终是完美的正方形，随着立方体的旋转而移动，但它们的旋转锁定到世界，而不是父级。

那么我将如何撤消父级在子级中的轮换？我在这里错过了什么疯狂的数学？

*我知道我可以在这个例子中使用点精灵，但我最终会考虑到更复杂的需求，点精灵就不会这样做。所以我需要想办法用一个真正的 3D 对象来做这件事。*

* * *

**编辑：**这*确实*适用于每个轴。如果父母只在 X 上旋转，我可以在孩子的 X 旋转上反转它，就像我想要的那样。只有 Z 相同。但是，如果我开始改变然后反转 X 和 Z，它就会变得松散。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T22:02:48.863

总有诀窍。:-)

您希望父对象的子对象的位置相对于父对象，但其旋转与父对象无关。

最简单的方法是将虚拟 Object3D 对象作为父对象的子对象，然后将子对象（而不是父对象）添加到*场景*中，并让子对象从虚拟对象中获取其世界位置。

```
parent                 scene
   |                     |
   --- object_1          --- child_1
   |                     |
   --- object_2          --- child_2 
```

`child_1.position`从`object_1`的世界位置设置：

```
child.position.setFromMatrixPosition( parent.children[ idx ].matrixWorld ) 
```

作为替代方案，`THREE.Gyroscope`您可以使用一个，但它的计算量更大。

# java - 模拟函数指针

> ID：15734052
> 
> 赞同：3
> 
> 时间：2013-03-31T20:15:44.513
> 
> 标签：java, callback

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T21:02:38.930

> 在这种情况下如何进行回调？由于它的复杂性和丑陋，我更愿意避免[这种解决方案。](https://stackoverflow.com/questions/1073358/function-pointers-in-java/1073427#1073427)即使它是最不痛苦的，我也不知道如何在这里实现它。

由于 Java 中没有函数指针，因此您必须改用通用接口。然后，您的函数必须是该接口的实现。是否要为那些实现类 (ie `class F1 extends Function { … }`) 或匿名类 ( ie ) 使用名称取决于您`new Function { … }`。您是否在该类中编写实现，或者让类实现调用您现有的静态函数之一也取决于您。

举一个例子，匿名类直接包含实现：

```
public class Integrals 
{

    public interface Function {
        double eval(double x);
    }

    public static final Function f1 = new Function() {
      public double eval(double x) {
        return x*5+Math.sin(x);
      }
    };

    public static final Function f2 = new Function() {
      public double eval(double x) {
        return Math.pow(x*f1.eval(-x),x);
      }
    };

    public static double TrapezoidalIntegration(double a,double b,int n,Function f)
    {
        // … using f.eval(x) to compute values 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T20:29:41.137

# php - 对 PDO 返回的数组重复值

> ID：15734053
> 
> 赞同：4
> 
> 时间：2013-03-31T20:15:53.040
> 
> 标签：php, mysql, pdo

我使用 PDO 连接到 MySQL 数据库并获取所有数据。当我打印出数组时，值会重复。如何解决？谢谢

连接到数据库：

```
$db = new PDO("mysql:host=localhost:3306;dbname=$dbName", $user, $pass,
            array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"));
        $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

获取数据并打印结果：

```
$result = $db->query("select UserBirthday, UserAddress, UserZipCode, UserPhone, UserFirstName, 
                UserLastName, UserPassword, UserSecurityQuestion
                from USER_PROFILE
                where UserID=$userID;")->fetchAll();

    print_r($result); 
```

它打印出来的内容：

```
Array ( [UserBirthday] => 1999-01-01 [0] => 1999-01-01 
[UserAddress] => 1 Infinite Loop Seattle [1] => 1 Infinite Loop Seattle 
[UserZipCode] => 98125 [2] => 98125 
[UserPhone] => 2068874596 [3] => 2068874596 
[UserFirstName] => abc [4] => abc 
[UserLastName] => cdf [5] => cdf 
[UserPassword] => 5271593ca406362d7a2701e331408ab77d5b5b88 [6] => 5271593ca406362d7a2701e331408ab77d5b5b88 [UserSecurityQuestion] => null [7] => null) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T20:17:20.737

默认情况下，PDO 将按名称和索引获取列。

使用`PDO::FETCH_ASSOC`fetch 模式仅按名称获取：

```
$result = $db->query("select UserBirthday, UserAddress, UserZipCode, UserPhone, UserFirstName, 
            UserLastName, UserPassword, UserSecurityQuestion
            from USER_PROFILE
            where UserID=$userID;")->fetchAll(PDO::FETCH_ASSOC); 
```

另请查看替代[获取模式](http://www.php.net/manual/en/pdostatement.fetch.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:20:22.870

正确的方式

```
$dsn = "mysql:host=localhost;dbname=$dbName;charset=utf8";
$opt = array(
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
);
$db  = new PDO($dsn,$user, $pass, $opt);

$stm = $db->prepare("select * FROM USER_PROFILE where UserID=?");
$stm->execute(array($userID));
$data = $stm->fetch(); 
print_r($data); 
```

# java - OS X 上的 Java 7 只在控制台中显示

> ID：15734054
> 
> 赞同：3
> 
> 时间：2013-03-31T20:16:19.950
> 
> 标签：java, macos

好的，我从[http://java.com](http://java.com)完成了在我的 Macbook 上安装 Java 7 的步骤，安装后我运行了常见问题小程序，以验证运行的版本表明 1.7.0_17 应该是我正在运行的版本。Java 控制台指示相同，但​​看起来两者都只是向我显示正在运行的插件版本。当我运行时：

```
jave 版本

```

从终端上它仍然显示 1.6。

```
java版本“1.6.0_37”
Java(TM) SE 运行时环境 (build 1.6.0_37-b06-434-11M3909)
Java HotSpot(TM) 64 位服务器 VM（内部版本 20.12-b01-434，混合模式）

```

当我检查 JavaVirtualMachines 文件夹时，它只显示 1.6，而从根目录中的查找在任何地方都没有显示 1.7。我显然是 os x 的新手，需要一些关于我所缺少的指导。我需要安装 7 jdk 并将其设置为所有新开发人员的默认设置。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T02:19:40.907

固定的。java.com 是获取 JDK 的错误地方。（我应该注意到了！）改为这里。

[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

# dart - 从命令行 Dart 获取 HTTP 响应的最简单方法是什么？

> ID：15734057
> 
> 赞同：6
> 
> 时间：2013-03-31T20:16:24.617
> 
> 标签：dart

我正在 Dart 中编写命令行脚本。访问（和 GET）HTTP 资源的最简单方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T20:16:24.617

使用[http 包](http://pub.dartlang.org/packages/http)可以轻松地通过命令行访问 HTTP 资源。虽然核心`dart:io`库具有 HTTP 客户端的原语（请参阅[HttpClient](http://api.dartlang.org/docs/releases/latest/dart_io/HttpClient.html)），但 http 包使 GET、POST 等更容易。

首先，将 http 添加到您的 pubspec 的依赖项中：

```
name: sample_app
description: My sample app.
dependencies:
  http: any 
```

安装软件包。在命令行或通过 Dart 编辑器运行它：

```
pub install 
```

导入包：

```
// inside your app
import 'package:http/http.dart' as http; 
```

发出 GET 请求。该`get()`函数返回一个`Future`.

```
http.get('http://example.com/hugs').then((response) => print(response.body)); 
```

从使用的函数返回 Future 是最佳实践`get()`：

```
Future getAndParse(String uri) {
  return http.get('http://example.com/hugs')
      .then((response) => JSON.parse(response.body));
} 
```

不幸的是，我找不到任何正式的文档。所以我不得不查看代码（确实有很好的评论）：[https ://code.google.com/p/dart/source/browse/trunk/dart/pkg/http/lib/http.dart](https://code.google.com/p/dart/source/browse/trunk/dart/pkg/http/lib/http.dart)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:26:44.900

这是我能找到的最短的代码

```
curl -sL -w "%{http_code} %{url_effective}\\n" "URL" -o /dev/null 
```

在这里，-s 使 curl 的进度输出静音，-L 像以前一样遵循所有重定向，-w 使用自定义格式打印报告，-o 将 curl 的 HTML 输出重定向到 /dev/null。

如果您想更多地自定义输出，以下是其他可用的特殊变量：

*   url_effective
*   http_code
*   http_connect
*   time_total
*   time_namelookup
*   time_connect
*   time_pretransfer
*   time_redirect
*   time_starttransfer
*   大小下载
*   大小上传
*   size_header
*   size_request
*   speed_download
*   speed_upload
*   内容类型
*   连接数
*   重定向次数
*   ftp_entry_path

# objective-c - iOS：自定义单元 lldb 内存访问错误

> ID：15734061
> 
> 赞同：0
> 
> 时间：2013-03-31T20:16:41.523
> 
> 标签：objective-c, xcode, memory-management, lldb

仍然无法访问要加载到自定义单元格中的变量。我有一个名为 InSeasonCell 的 xib、.h、.m。我有一个 IBOutlet InSeasonCell *_cell; 在 rootviewcontroller 的 .h 中。访问我的 productAtIndex 值时出现 lldb 错误。任何帮助都会很棒。有人告诉我阅读 Table View Programming Guide。

我创造

```
_dataController = [[InSeasonProductDataController alloc] init]; 
```

这是 rootviewcontroller 中的 init，但传递给另一个对象，该对象用 Product 对象填充它。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"InSeasonCell";

    InSeasonCell *cell = (InSeasonCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        [[NSBundle mainBundle] loadNibNamed:CellIdentifier owner:self options:nil];
        cell = _cell;
        _cell = nil;
    }
    if(_dataController!=nil){
        Product *productAtIndex = [_dataController objectInListAtIndex:indexPath.row];
        // Configure the cell...
            cell.name.text = productAtIndex.name;
            cell.week.text = productAtIndex.week;
            cell.image.image = productAtIndex.image;
    }

    return cell;
} 
```

我查看了我的代码，发现我正在将一个类中创建的对象传递给另一个类。例如：

```
-(id)initWithDataController:(InSeasonProductDataController *)dataController spinner:      (UIActivityIndicatorView *)spinner{
       if(self = [super init]){
           _dataController = [dataController retain];
           _spinner = [spinner retain];
       }
       return self;
} 
```

_dataController 稍后在此方法中使用 Product 对象填充并被释放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:35:32.450

要解决此错误，您需要在 xib 文件中单击单元原型，然后在属性检查 > 标识符中插入与 .m 文件中相同的名称（我写下“单元”）：

在方法中：

*   (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { .... Cell = [tableView dequeueReusableCellWithIdentifier:@"cell"]; Cell = [[MainCustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:44:48.787

我想到了。我的 Product 对象初始化了变量，我必须为传入的每个变量复制一份。这消除了 lldb 错误。

# vb.net - 检查活动窗口句柄是否为密码框

> ID：15734062
> 
> 赞同：0
> 
> 时间：2013-03-31T20:16:52.553
> 
> 标签：vb.net, winforms, passwords, pinvoke

我想检查活动窗口句柄是否是密码框。

这个函数返回给我活动窗口的活动控制句柄：

```
Imports System.Runtime.InteropServices
Public Class FormMain
    Inherits Form

    Private Declare Function GetForegroundWindow Lib "user32.dll" () As IntPtr

    Private Declare Function GetWindowThreadProcessId Lib "user32.dll" (ByVal hWnd As IntPtr, ByVal ProcessId As IntPtr) As IntPtr

    Private Declare Function AttachThreadInput Lib "user32.dll" (ByVal idAttach As IntPtr, ByVal idAttachTo As IntPtr, ByVal fAttach As Boolean) As IntPtr

    Private Declare Function GetFocus Lib "user32.dll" () As IntPtr

    Public Sub New()
        MyBase.New
        InitializeComponent
    End Sub

    Private Sub timerUpdate_Tick(ByVal sender As Object, ByVal e As EventArgs)
        labelHandle.Text = ("hWnd: " + FocusedControlInActiveWindow.ToString)
    End Sub

    Private Function FocusedControlInActiveWindow() As IntPtr
        Dim activeWindowHandle As IntPtr = GetForegroundWindow
        Dim activeWindowThread As IntPtr = GetWindowThreadProcessId(activeWindowHandle, IntPtr.Zero)
        Dim thisWindowThread As IntPtr = GetWindowThreadProcessId(Me.Handle, IntPtr.Zero)
        AttachThreadInput(activeWindowThread, thisWindowThread, true)
        Dim focusedControlHandle As IntPtr = GetFocus
        AttachThreadInput(activeWindowThread, thisWindowThread, false)
        Return focusedControlHandle
    End Function
End Class 
```

现在我想做类似的事情：

```
if FocusedControlInActiveWindow() <> intptr.zero then
dim IsPass as boolean = isPassword(FocusedControlInActiveWindow())
if IsPass then
msgbox("yes")
else
msgbox ("no")
end if
end if 
```

如何检查活动窗口文本中的焦点控件是否是`passwordcahr`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T06:12:50.570

如果要检查 Windows 编辑控件是否具有[ES_PASSWORD 样式](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775464.aspx)，请执行以下操作：

```
Public Shared Function HasPasswordStyle(ByVal hWnd As IntPtr) As Boolean
    Return ((GetWindowLong(hWnd, GWL_STYLE) And ES_PASSWORD) <> 0)
End Function

<DllImport("user32.dll")> _
Private Shared Function GetWindowLong(ByVal hWnd As IntPtr, ByVal nIndex As Integer) As Integer
End Function

Private Const ES_PASSWORD As Integer = 32
Private Const GWL_STYLE As Integer = -16 
```

# ruby-on-rails - Rails：覆盖表单生成器的按钮方法？

> ID：15734064
> 
> 赞同：1
> 
> 时间：2013-03-31T20:17:09.543
> 
> 标签：ruby-on-rails, form-for

当我在 form_for 中使用 Form Builder 生成一个按钮（使用 f.button）时，它会生成一个标题为“”的按钮。我想要做的是为这个标题添加一个前缀：“MyPrefix”。所以基本上我需要做的就是覆盖按钮方法（[https://github.com/rails/rails/blob/488699166c3558963fa82d4689a35f8c3fd93f47/actionpack/lib/action_view/helpers/form_helper.rb#L1402](https://github.com/rails/rails/blob/488699166c3558963fa82d4689a35f8c3fd93f47/actionpack/lib/action_view/helpers/form_helper.rb#L1402)）。但是我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:22:57.563

您可以使用[自定义表单构建器](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html)来执行此操作（在该页面上搜索“自定义表单构建器”）。

代码大致如下所示（您必须决定前缀的确切位置）：

```
class PrefixedFormBuilder < ActionView::Helpers::FormBuilder
   def button(value=nil)
      super(value, :title => 'MyPrefix')
   end
end 
```

在 ApplicationHelper 中使用自定义助手：

```
def prefixed_form_for(record, *args, &block)
   options = args.extract_options!
   options.merge!(:builder => PrefixedFormBuilder)
   form_for(record, *(args + [options]), &block)
end 
```

然后使用：

```
prefixed_form_for(@model) do |f| 
```

在你看来。

# java - 关闭应用程序后，在计时器中（在 runOnUiThread 中）显示 Dialog 导致应用程序崩溃。

> ID：15734071
> 
> 赞同：1
> 
> 时间：2013-03-31T20:17:37.033
> 
> 标签：java, android, timer, dialog

我正在制作一个小游戏，其中我必须每秒检查一个值是否为零。当它为零时，游戏应该停止并显示一个对话框。从现在开始，在重新安装应用程序之前，游戏永远不会运行。

所以，我有一个带有 timertask 的计时器，它执行 runOnUiThread。

定时器：

```
private void update(){
    Timer timer = new Timer();
    timer.schedule(new TimerTask(){

        @Override
        public void run() {

            onChange();             
        }   

    },0,(1000* getResources().getInteger(R.integer.remove_speed_inSecond)));
} 
```

runOnUiThread ：（此时使用 try/catch 捕获异常，但我想修复而不是忽略它。）

```
private void onChange(){

    runOnUiThread(new Runnable() {
        @Override
        public void run() {
            try{
                checkupifexpire();
            }
            catch (Exception ex) {
            }
        }
      });
} 
```

我显示对话框的方法：

```
private void checkupifexpire() {
    if(eat == 0 || drink == 0 || wash == 0 || care == 0){
        dialog = new Dialog(this, android.R.style.Theme_Black_NoTitleBar_Fullscreen);
        dialog.setOnCancelListener(new DialogInterface.OnCancelListener()
        {
            @Override
            public void onCancel(DialogInterface dialog)
            {

                GameEngine.this.finish();
            }
        });
        dialog.setContentView(R.layout.activity_rip);
        dialog.show();
    }
} 
```

总是当我按下后退按钮或只是主页按钮时应用程序崩溃。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T20:41:50.723

所以，logcat 告诉我们，在 GameEngine.java 的第 306 行，在方法 checkupifexpire 中崩溃了，看起来就是该`dialog.show()`行。

我不是 100% 确定，但从你所说的来看，在我看来，当按下返回或主页时，应用程序将失去其 UI 线程。这意味着它`checkuponexpire`不能做它所做的事情。

为了解决您的崩溃问题，有三个明显的选择：

1.  您可以`onPause`在您的主要活动中使用来捕捉应用程序何时失去屏幕。此时，您需要停止计时器，或者将其切换为使用 Toast 来传达信息。

2.  仅在中使用 Toast`checkuponexpire`

3.  决定当按下返回键或主键时游戏结束并取消计时器。

要真正获得对话框，更改用于创建对话框的上下文也可能会有所帮助。尽管应该谨慎使用它，但它可能`getApplicationContext()`正是您需要的（可能`this.getApplicationContext()`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:34:16.227

感谢 Neil Townsend 和 WELLCZECH。:) 我的问题是生命周期。

大多数情况下，我让应用程序在 onCreat() 中运行并且没有 onStart() 方法。只是不知道这些方法和它们一样重要。

我也不需要显示对话框。相反，我只需要开始一项新活动并取消旧活动。

# android - Android 上的本地 HTTPS 服务器 - 使用 dh 文件

> ID：15734073
> 
> 赞同：1
> 
> 时间：2013-03-31T20:17:53.737
> 
> 标签：android, linux, https, openssl, boost-asio

我使用 OpenSSL 与我的本地 HTTPS 服务器建立安全连接。服务器非常简单，因为我基本上使用了[Boost Asio 示例](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/example/ssl/server.cpp)，但只改进了一点。

[该解决方案适用于使用 OpenSSL-Win32 的 Win7 64b 和此处](http://slproweb.com/download/Win32OpenSSL-1_0_1e.exe)下载的安装程序随附的证书。

我已将解决方案移植到 Android 上。Android OpenSSL 端口来自[这里](https://github.com/aluvalasuman/OpenSSL1.0.1cForAndroid)。

在调用 use_tmp_dh_file 方法之前一切正常：

```
_context.use_tmp_dh_file("/sdcard/Download/PEM/dh512.pem"); 
```

它总是以`Fatal signal 11 (SIGSEGV) at 0x00000014 (code=1)`错误结束。

我使用证书`server.pem`和`dh512.pem`来自 Android OpenSSL 端口的 /apps 文件夹。

有人知道出了什么问题吗？

**编辑：**

使用 dh 文件不是强制性的，没有它也可以工作，但我只是更进一步，因为现在开始握手时它会失败：

```
boost::system::error_code error;
socket.handshake(boost::asio::ssl::stream_base::server, error); 
```

`socket`实例在哪里：

```
typedef boost::asio::ssl::stream<boost::asio::ip::tcp::socket> sslSocket; 
```

它最终会出现与上述相同的错误。这似乎是一个 Android OpenSSL-Boost ASIO 问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:23:42.603

这个特定问题的答案简短而简单，但很难找到。实现我的 HTTPS 服务器的本机库也干扰了使用 OpenSSL 的其他本机库。

# c++ - rand() 给出的值仍然相同

> ID：15734075
> 
> 赞同：3
> 
> 时间：2013-03-31T20:18:05.423
> 
> 标签：c++, random

我通过做一个简单的基于控制台的测验应用程序来练习时注意到了这一点。当我使用`rand()`它时，它会连续多次给我相同的值。数字范围越小，问题越大。

例如

```
for (i=0; i<10; i++) {
    x = rand() % 20 + 1;
    cout << x << ", ";
} 
```

会给我`1, 1, 1, 2, 1, 1, 1, 1, 14,`- 肯定太多了，对吧？我通常从无到4个奇数（其余的都一样，也可以`11, 11, 11, 4, 11 ...`）

难道我做错了什么？还是`rand()`不是我想的那么随机？
（或者这只是我不知道的 C#/Java 的一些习惯？它也经常发生在我身上……）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T20:27:49.417

如果我多次运行该代码，我会得到不同的输出。当然，不像我想要的那样多样化，但似乎不是确定性的（虽然它当然是，因为`rand()`只给出伪随机数......）。

但是，您处理数字的方式不会给您提供 [1,20] 上的均匀分布，我猜这就是您所期望的。实现这一点相当复杂，但绝不是不可能的。例如，请查看[cplusplus.com上的](http://www.cplusplus.com/reference/random/uniform_real_distribution/)[文档`<random>`](http://www.cplusplus.com/reference/random/uniform_real_distribution/)- 在底部有一个展示程序，可以在 [0,1) 上生成均匀分布。要使其达到 [1,20)，您只需将输入参数更改为生成器 - 它可以在您喜欢的任何范围内为您提供均匀分布。

我做了一个快速测试，并调用`rand()`了一百万次。正如您在下面的输出中看到的那样，即使在非常大的样本量下，分布中也存在一些不均匀性。随着样本数量趋于无穷大，这条线（可能）会变平，使用类似的东西`rand() % 20 + 1`会给你一个需要*很*长时间才能完成的分布。如果您采用其他方法（如上面的示例），即使对于非常小的样本量，您也更有可能实现均匀分布。

![100 万次调用 rand()](https://i.stack.imgur.com/Q8c2X.png)

**编辑：**
我看到其他几个人在使用`srand()`之前发布了关于使用随机数生成器播种的信息。这是一个很好的建议，但在这种情况下它不会解决您的问题。我再说一遍：**在这种情况下，播种不是问题。**

种子主要用于控制程序输出的可重复性。如果你用一个常数值（例如 0）为你的随机数播种，程序每次都会给出相同的输出，这对于测试一切是否正常工作很有用。通过使用非恒定值（当前时间是一个流行的选择）播种，您可以确保结果在程序的不同运行之间有所不同。

根据 C++ 标准，根本不调用`srand()`与调用相同。`srand(1)`因此，每次运行程序都会得到相同的结果，但每次运行都会得到一系列完全有效的伪随机数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T21:14:40.197

听起来你正在打*模偏差*。

通过使用将随机数缩放到一个范围`%`并不是一个好主意。如果您将其减小到 2 的幂的范围，这几乎是可以接受的，但仍然很差。它主要受较小位的影响，这些较小的位在许多算法（`rand()`尤其是）中通常不太随机，并且它以非均匀的方式收缩到较小的范围，因为您减少到的范围不会平均划分您的随机范围数发生器。要减小范围，您应该使用除法和循环，如下所示：

```
// generate a number from 0 to range-1
int divisor = MAX_RAND/(range+1);
int result;
do
{
    result = rand()/divisor;
} while (result >= range); 
```

这并不像看起来那么低效，因为循环几乎总是只通过一次。此外，如果您打算将生成器用于接近的数字，`MAX_RAND`您将需要一个更复杂的方程式`divisor`，我无法立即记住。

此外，`rand()`它是一个非常差的随机数生成器，如果您关心结果的质量，请考虑使用 Mersenne Twister 之类的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T20:24:44.293

您需要先调用`srand()`并给它时间参数以获得更好的伪随机值。

例子：

```
#include <iostream>
#include <string>
#include <vector>
#include "stdlib.h"
#include "time.h"

using namespace std;

int main()
{
    srand(time(0));
    int x,i;
    for (i=0; i<10; i++) {
        x = rand() % 20 + 1;
        cout << x << ", ";
    }
    system("pause");
    return 0;
} 
```

如果您不希望任何生成的数字重复并且内存不是问题，您可以使用一个`vector`整数，随机打乱它，然后获取前 N 个整数的值。

例子：

```
#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

int main()
{
    //Get 5 random numbers between 1 and 20
    vector<int> v;
    for(int i=1; i<=20; i++)
        v.push_back(i);
    random_shuffle(v.begin(),v.end());
    for(int i=0; i<5; i++)
        cout << v[i] << endl;
    system("pause");
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T20:23:19.227

可能的问题是您每次都使用相同的“随机”数字，并且任何`int`mod 1 都是零。换句话说`(myInt % 1 == 0`) 总是正确的。而不是`%1`，使用`% theBiggestNumberDesired`.

此外，将随机数播种为`srand`. 使用常量种子来验证您是否获得了良好的结果。然后更换种子以确保您仍然获得良好的结果。然后使用像时钟这样更随机的种子来进一步吸奶。使用随机种子释放。

# zend-framework - 在 Zend Framework 中为 Web 服务使用 Zend_Rest_Controller

> ID：15734077
> 
> 赞同：0
> 
> 时间：2013-03-31T20:18:15.697
> 
> 标签：zend-framework, zend-rest

当我从 Zend_Rest_Controller 扩展一个类时，实现了 5 个抽象方法（index、get、put、delete、post），用于 CRUD。

我的项目结构是

```
 -application
     - config
     - controllers       // used for our web controllers
     - emails
     - forms
     - views
     -Bootstrap.php
-library
  -CustomLibrary // Libraries for our project
  -Frontend
   -Action.php //this is extends Zend_Action_Controller and I added some customize code 
```

我想为我的应用程序创建一个 Web 服务，以便在我们的 Android 应用程序上使用它，我想返回 Android 应用程序 JSON 对象和参数。我研究并询问了stackoverflow，我发现Rest Controller是使用它的方式。我的问题：在这种情况下使用 Zend_Rest_Controller 是否正确？
- 如果是，我不能写更多的动作，我只使用抽象的动作，我需要的不仅仅是那些动作，比如（registerAction()、getAllNewsAction() 等......）还是我应该为此使用更多的类？

如果否，使用什么？以及将这些 api 类放在哪里（在同一个控制器文件夹中或将其放在 Library 文件夹中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:42:08.600

如果您使用 RESTful 架构，您总是有以下 GET-、POST-、PUT-、DELETE-操作之一。在 ZF2 中，这意味着您在 Controller-Class 中实现了以下操作：indexAction (GET-Request)、getAction (GET-Request)、postAction (POST-Request)

您需要的其他方法是通过您传递给上述请求的参数来控制的。看看这个教程：[http ://www.techchorus.net/create-restful-applications-using-zend-framework](http://www.techchorus.net/create-restful-applications-using-zend-framework)

# python - 如何在源代码中查看 numpy 的当前版本？

> ID：15734078
> 
> 赞同：1
> 
> 时间：2013-03-31T20:18:18.223
> 
> 标签：python, numpy

我想安装 nump 1.8 开发版。我在哪里可以找到源代码以及如何在安装前检查它的正确版本。

[我在这里https://github.com/numpy/numpy](https://github.com/numpy/numpy)找不到 Githbu 存储库中的版本号

我正在尝试在 Windows 上安装 1.8 开发版，但我不知道哪个源是正确的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:20:14.183

```
import numpy
print numpy.__version__ 
```

可能是这样？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T20:24:55.730

在构建期间，版本被替换为`version.py`from `setup.py`：

[https://github.com/numpy/numpy/blob/master/setup.py](https://github.com/numpy/numpy/blob/master/setup.py)：

```
MAJOR               = 1
MINOR               = 8
MICRO               = 0

VERSION             = '%d.%d.%d' % (MAJOR, MINOR, MICRO) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T20:25:04.853

[setup.py](https://github.com/numpy/numpy/blob/master/setup.py)包含：

```
MAJOR               = 1
MINOR               = 8
MICRO               = 0
ISRELEASED          = False
VERSION             = '%d.%d.%d' % (MAJOR, MINOR, MICRO) 
```

因此，该来源适用于`1.8.0`（加上可能的补丁，如果每次提交都没有更新）。

如果您使用其中一个[标签](https://github.com/numpy/numpy/tags)，则可以确保您获得了特定版本的完全正确的源代码。

# emacs - 仅在行模式下突出显示当前行（不在字符模式下）

> ID：15734085
> 
> 赞同：1
> 
> 时间：2013-03-31T20:18:51.483
> 
> 标签：emacs

在 ansi-term 中工作时，如何让 emacs 仅在我在时突出显示当前行`line mode`？（而不是在`char mode`？）。

我目前在每个缓冲区中都`(global-hl-line-mode t)`激活了（我想要的）。`hl-line-mode`我只想在`char run mode`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T23:40:00.200

分两步就可以达到你想要的效果。首先，`(global-hl-line-mode t)`在您的`.emacs`文件中替换为以下行：

```
(add-hook 'after-change-major-mode-hook
          '(lambda () (hl-line-mode (if (equal major-mode 'term-mode) 0 1)))) 
```

这基本上与创建全局次要模式相同，因为每次缓冲区的主要模式更改时`hl-line-mode`它都会打开。`hl-line-mode`但`hl-line-mode`如果缓冲区的新主要模式是`term-mode`. 这种方式，`hl-line-mode`默认情况下是禁用的`ansi-term`。

但是，您确实想在您在`line-mode`（但不是在`char run mode`）时打开它。为此，请将以下几行添加到您的`.emacs`文件中：

```
(defadvice term-line-mode (after enable-hl-line-in-term-line-mode)
  (hl-line-mode 1))

(defadvice term-char-mode (after disable-hl-line-in-term-char-mode)
  (hl-line-mode 0)) 
```

根据您使用的 Emacs 版本，您可能会在使用上述代码的 minibuffer 中遇到奇怪的行为：每次使用 minibuffer 时，整行或部分行都可能会突出显示。要解决此问题，还将以下行添加到您的 .emacs 文件中：

```
(add-hook 'minibuffer-setup-hook '(lambda () (hl-line-mode 0))) 
```

* * *

[`hl-line-mode`这种方法在何时打开或关闭方面为您提供了相当大的灵活性。例如，如果您想要`hl-line-mode`关闭其他主要模式，您可以将`(equal major-mode 'term-mode)`上述代码的部分替换为：]

```
(member major-mode '(term-mode other-mode1 other-mode2)) 
```

您要禁用`other-modeN`的主要模式的名称在哪里。`hl-line-mode`当然，您不仅限于两个这样的名称。

# multithreading - 使 JavaMail 快速

> ID：15734086
> 
> 赞同：0
> 
> 时间：2013-03-31T20:18:56.397
> 
> 标签：multithreading, asynchronous, smtp, jakarta-mail, restlet

我正在尝试将电子邮件通知功能添加到我的 Restlet 服务器。我今天刚从 Stackoverflow 了解到 Java Mail 是同步的。

所以有两个明显的选择： 1\. 使用非常快的 SMTP 服务器 2\. 使其成为 Asnyc

好吧，同步调用 SMTP 服务器总是会引入更多延迟。而且由于我只是使用 Java SE，所以没有花哨的 EE 东西。我正在考虑的是初始化一个用于发送邮件的新线程，但是，当我真正想将邮件服务器的响应发送到 Web 客户端以确认邮件正在由邮件服务器处理时，事情变得更加复杂，因为我必须等待线程得到响应。

现在有点困惑，任何人都可以就我如何使用 Java SE 提供建议吗？

服务器：Ubuntu 服务器 12.04

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:31:56.230

Java SE 提供并发功能，用于将工作委派到单独的线程中，请参阅[java 教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html)

# javascript - 如何使用 JSON.stringify() 发布多个数组？

> ID：15734091
> 
> 赞同：0
> 
> 时间：2013-03-31T20:19:26.400
> 
> 标签：javascript, ajax, asp.net-mvc-3

我正在尝试使用 Ajax 发布多个数组到我的控制器。首先我有一个这样的模型：

```
 public class EnrollmentOptionsVM
     {

   public virtual string OptionID{ set;get;}
   public virtual string UserChoice { set;get;}
   public virtual string TchOptionID { set; get; }
   public virtual string TeacherChoice { set; get; }

    } 
```

然后我的脚本：

```
 <script type="text/javascript">

      var $checkboxes = $('input[type="checkbox"]');
      var $strInstructors = $('input[name="instructorString"]');
      $(document).ready(function () {
            $('#saveBtn').click(function () {

                var teacherOptions = [];
          var options = [];
          $.each($checkboxes, function () {
              if ($(this).is(':checked')) {
                  var item = { "UserChoice": "checked", "OptionID": "YouCanSetIDHere" };
              }
              else {
                  var item = { "UserChoice": "unchecked", "OptionID": "YouCanSetIDHere" };
              }
              options.push(item);
          })
          $.each($strInstructors, function () {
              if ($(this).is(':selected')) {
                  var tchItem = { "TeacherChoice": "checked", "TchOptionID": "SetTchIDHere" };
              }
              else {
                  var tchItem = { "TeacherChoice": "unchecked", "TchOptionID": "SetTchIDHere" };
              }
              options.push(tchItem);
          })
          $.ajax({ type:
'POST', url: '@Url.Action("EnrollmentRefresh", "Student")',
              contentType: 'application/json',
              data: JSON.stringify({firstArray:options, secondArray:teacherOptions})
          }).done(function (html) {

          });

      });
      });

        </script> 
```

在我的控制器中，这是动作签名：

```
 [HttpPost]
    public ActionResult EnrollmentRefresh(List<EnrollmentOptionsVM> checkedOptions)
    {} 
```

当我只发送这样的选项时：data: JSON.stringify(options)… 它可以工作，但是当我尝试像上面的代码一样发送多个数组时，它在控制器中返回 null。如何使用 JSON.stringify() 发布多个数组？

更新 1

```
 <script type="text/javascript">

      var $checkboxes = $('input[type="checkbox"]');
      var $strInstructors = $('input[name="instructorString"]');
      $(document).ready(function () {
            $('#saveBtn').click(function () {

                var teacherOptions = [];
          var options = [];
          $.each($checkboxes, function () {
              if ($(this).is(':checked')) {
                  var item = { "UserChoice": "checked", "OptionID": "YouCanSetIDHere" };
              }
              else {
                  var item = { "UserChoice": "unchecked", "OptionID": "YouCanSetIDHere" };
              }
              options.push(item);
          })
          $.each($strInstructors, function () {
              if ($(this).is(':selected')) {
                  var tchItem = { "TeacherChoice": "checked", "TchOptionID": "SetTchIDHere" };
              }
              else {
                  var tchItem = { "TeacherChoice": "unchecked", "TchOptionID": "SetTchIDHere" };
              }
              teacherOptions.push(tchItem);
          })
          $.ajax({ type:
 'POST', url: '@Url.Action("EnrollmentRefresh", "Student")',
              contentType: 'application/json',
              data: JSON.stringify({checkedOptions:options,selectedTeacher:teacherOptions})

          }).done(function (html) {

          });

      });
      });

        </script> 
```

在控制器中：

```
 [HttpPost]
         public ActionResult EnrollmentRefresh( List<EnrollmentOptionsVM> checkedOptions,   List<TeacherOptionMV> selectedTeachers)
    {} 
```

两个 ViewModels public class TeacherOptionMV {

```
 public virtual string TchOptionID { set; get; }
    public virtual string TeacherChoice { set; get; }
} 
```

和

```
 public class EnrollmentOptionsVM
         {

       public virtual string OptionID{ set;get;}
        public virtual string UserChoice { set;get;}

       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:28:46.943

您没有发布多个数组`{firstArray:options, secondArray:teacherOptions}`。您正在发布具有两个属性的单个对象：`firstArray`和`secondArray`. 您的控制器旨在仅获取一组`EnrollmentOptionsVM`. 我想，最好的办法是改变`EnrollmentRefresh`方法以将一些带有字段`firstArray`和`secondArray`（或类似的东西）的对象作为参数。

# windows-8 - 当我当前的访问令牌过期时，如何以不可见的方式获取新的 Facebook 访问令牌？（Windows 8 应用程序 C#）

> ID：15734097
> 
> 赞同：2
> 
> 时间：2013-03-31T20:19:47.793
> 
> 标签：windows-8, facebook-c#-sdk, windows-store-apps, facebook-access-token

在我的应用程序中（遵循各种文档），用户可以通过专用登录页面登录到 facebook。由此，给出访问令牌并保存它。问题是以这种方式获取令牌（使用`await WebAuthenticationBroker.AuthenticateAsync(WebAuthenticationOptions.None, loginUri, new Uri(redirectUri));`，这似乎会自动显示来自 facebook 的登录屏幕，老实说我不知道​​它是如何出现的......）意味着用户*必须*再次输入他们的用户名和密码。

我不希望出现这种情况，因为我认为如果用户登录过一次，他们就不需要一次又一次地输入他们的详细信息。但是，无论我尝试了什么，我似乎都可以获得一个新的访问令牌，而无需再次通过此登录屏幕。

我已经尝试过使用该方法的`FacebookClient.Get()`方法，但它只是在此版本的 SDK 中不存在。我不知道用什么来代替它，或者我需要发送什么到 Facebook 来获得回复。

到目前为止，这是我第一次必须登录的内容（几乎是文档上的内容）

```
string redirectUrl = "https://www.facebook.com/connect/login_success.html";
            try
            {
                var loginUrl = fb.GetLoginUrl(new
                {
                    client_id = FacebookHandler.FacebookAppId,
                    redirect_uri = redirectUrl,
                    scope = FacebookHandler.Permissions,
                    display = "touch",
                    response_type = "token"
                });

                Uri endUri = new Uri(redirectUrl);

                WebAuthenticationResult webAuthRes = await WebAuthenticationBroker.AuthenticateAsync(WebAuthenticationOptions.None, loginUrl, endUri);

                if (webAuthRes.ResponseStatus == WebAuthenticationStatus.Success)
                {
                    var callbackUri = new Uri(webAuthRes.ResponseData.ToString());
                    var facebookOAuthResult = fb.ParseOAuthCallbackUrl(callbackUri);
                    var accessToken = facebookOAuthResult.AccessToken;
                    if (String.IsNullOrEmpty(accessToken))
                    {
                        // User is not logged in, they may have canceled the login
                    }
                    else
                    {
                        // User is logged in and token was returned
                        FacebookHandler.AccessToken = accessToken;
                        LoginSucceeded();
                    }
                }

                else if (webAuthRes.ResponseStatus == WebAuthenticationStatus.ErrorHttp)
                {
                    Debug.WriteLine("Error: " + "HTTP Error returned by AuthenticateAsync() : " + webAuthRes.ResponseErrorDetail.ToString());
                }
                else
                {
                    Debug.WriteLine("Error: " + "Error returned by AuthenticateAsync() : " + webAuthRes.ResponseStatus.ToString());
                }
            }
            catch (Exception ex)
            {
                //
                // Bad Parameter, SSL/TLS Errors and Network Unavailable errors are to be handled here.
                //
                Debug.WriteLine(ex);

                throw ex;
            } 
```

在应用程序的连续启动中，在用户第一次输入他们的详细信息后，可以使用保存的访问令牌，但它很快就会过期，这会抛出一个`FacebookOAuthException`. 这是我试图隐形获取新访问令牌的地方，但它不起作用。

```
 try
        {
            await fb.PostTaskAsync(url, argList);
        }

        catch (FacebookOAuthException exc)
        {
            Debug.WriteLine(exc.Message);
            ValidateLoginUrl(GetLoginUrl());
            //Problem is with the ValidateLoginUrl(), which would get an access token from the login url
        } 
```

我尝试过的其中一件事是使用`TryParseOAuthCallbackUrl()`, 在我可以通过使用获得的 loginUrl 上`FacebookClient.GetLoginUrl()`（这是成功的），但是当我尝试解析它时，它只会出现一个`InvalidOperationException`，否则没有解释。

我必须做什么才能获得新的访问令牌而无需用户再次登录？我有我的应用程序 ID 和密码，我可能会从初始登录中保存用户 ID 以供以后使用（？）。有任何帮助吗？

# sql - SQL 特定顺序

> ID：15734098
> 
> 赞同：1
> 
> 时间：2013-03-31T20:19:50.683
> 
> 标签：sql, postgresql

给定以下查询：

```
SELECT DISTINCT n.iswinner, i.name 
  FROM nominees n, institutions i
  WHERE n.iid = i.iid and n.filmname = '127 Hours' 
  ORDER BY name 
```

我得到输出：

```
iswinner    name

NULL    academy awards
NULL    baftas
NULL    critics' choice awards
NULL    golden globes
NULL    screen actors guild
NULL    writers guild of america 
```

我试图弄清楚是否可以以更具体的方式订购此输出。我正在寻找的顺序是首先列出“学院奖”，然后是“金球奖”，然后是名称中带有“公会”的任何内容，最后按字母顺序列出其他任何内容。因此，我正在寻找的输出更像是这样的：

```
iswinner    name

NULL    academy awards
NULL    golden globes
NULL    screen actors guild
NULL    writers guild of america
NULL    bafta
NULL    critics' choice awards 
```

有没有办法做这样的事情？我相信我应该使用 CASE 之类的东西，但我似乎无法找出正确的语法。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T20:24:07.590

```
order by
        case 
        when name = 'academy awards' then 1
        when name = 'golden globes' then 2
        when name like  '%guild%' then 3
        else 4
        end
,       name 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T20:28:03.710

是的，有一种方法可以做这样的事情，就像你想的那样，你可以用 CASE 语句来做到这一点。像下面这样的东西应该可以解决问题：

```
SELECT
    DISTINCT n.iswinner,
    i.name,
    CASE
        WHEN i.name = 'academy awards' THEN 1
        WHEN i.name = 'golden globes' THEN 2
        WHEN i.name like '%guild%' THEN 3
        ELSE 4
    END AS Order
FROM nominees n, institutions i
WHERE n.iid = i.iid and n.filmname = '127 Hours'
ORDER BY
    Order,
    i.name 
```

所以，给你更多关于这里正在做的事情的信息。在 ORDER 子句中，我们按 CASE 语句排序。基本上，根据 i.name 字段是什么，我们分配一个整数来排序。学院奖​​被分配 1，金球奖被分配 2，任何包含“公会”的东西被分配 3，其他任何东西被分配 4。所以我们首先按此 CASE 语句（它给出了您想要的特定顺序）排序，然后按name 字段将满足您按名称订购其他任何东西的第二个要求（我们之前在 CASE 语句中为订购指定了值 4）。

我希望这对你有意义。

使用 GROUP BY 而不是 DISTINCT 的相同查询：

```
SELECT
    n.iswinner,
    i.name
FROM nominees n, institutions i
WHERE n.iid = i.iid and n.filmname = '127 Hours'
GROUP BY 
    n.iswinner,
    i.isname
ORDER BY
    CASE
        WHEN i.name = 'academy awards' THEN 1
        WHEN i.name = 'golden globes' THEN 2
        WHEN i.name like '%guild%' THEN 3
        ELSE 4
    END,
    i.name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T23:07:34.493

不需要`case`条款。[SQL小提琴](http://www.sqlfiddle.com/#!12/fac70/1)

```
select *
from (
    select distinct n.iswinner, i.name
    from nominees n, institutions i
    where n.iid = i.iid and n.filmname = '127 Hours'
) s
order by
    name != 'academy awards',
    name != 'golden globes',
    name not like '%guild%',
    name 
```

`false`之前的订单`true`

# mongodb - Mongodb 用于存储相关性

> ID：15734099
> 
> 赞同：0
> 
> 时间：2013-03-31T20:20:12.293
> 
> 标签：mongodb

我希望我的用户能够存储他们创建的对象之间的相关性。例如，有一个“主题”集合，其中包含两个对象：“地球”和“自然”。之后，我想让我的用户存储 0.8 的相关性/映射，以表明这些主题密切相关。

如果我将其存储在一个名为“Correlations”的集合中，作为具有两个主题 ID 和相关性的对象，这可能会导致主题²/2 数量的相关对象。这是存储它的唯一方法，还是您会以不同的方式解决这个问题？

谢谢！

# iphone - 我想在块执行后返回值

> ID：15734102
> 
> 赞同：2
> 
> 时间：2013-03-31T20:20:14.213
> 
> 标签：iphone, ios, facebook-graph-api, facebook-ios-sdk

```
- (NSString *) BBB {
    __block NSString *returnValue;

    NSDictionary *queryParameters = @{ @"q" : @"SELECT uid FROM user WHERE uid = me()"};
    [FBRequestConnection startWithGraphPath:@"fql" parameters:queryParameters HTTPMethod:@"GET" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
        returnValue = result[@"data"][0][@"uid"];
        NSLog(@"inside block -> %@", returnValue);
    }];

    return returnValue;
} 
```

我想返回正确的值，但`FBRequestConnection`它是一个异步请求。那是`returnValue`is (null) 的 make 值，因为它是在执行 FBRequestConnection 的 completionBlock 之前返回的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:42:53.040

如果您需要将该值返回给特定方法，一个简单的解决方案可能是将依赖该值的代码移动到其他方法。您也可以考虑设置一个等待指示器。在这种情况下，用户将知道操作正在运行。

```
- (void)BBB {    

    __weak SelfType weakSelf = self; // to prevent possible memory leaks if you use ARC

    NSDictionary *queryParameters = @{ @"q" : @"SELECT uid FROM user WHERE uid = me()"};
    [FBRequestConnection startWithGraphPath:@"fql" parameters:queryParameters HTTPMethod:@"GET" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
        returnValue = result[@"data"][0][@"uid"];
        NSLog(@"inside block -> %@", returnValue);

        __strong SelfType safeSelf = weakSelf;
        if(safeSelf) {
            // notify that the operation is finished
            [safeSelf DDDWithReturnValue:returnValue];
        }
    }];
} 
```

我提供的代码在 ARC 下工作。如果您的代码未启用 ARC，请使用

```
__block SelfType weakSelf = self; // for non-ARC code 
```

# jquery - jQuery UI 工具提示不支持 html 内容

> ID：15734105
> 
> 赞同：87
> 
> 时间：2013-03-31T20:20:17.480
> 
> 标签：jquery, html, jquery-ui, jquery-ui-tooltip

今天，我用 jQuery 1.9.1 升级了我所有的 jQuery 插件。我开始使用带有 jquery.ui.1.10.2 的 jQueryUI 工具提示。一切都很好。但是当我在内容中使用 HTML 标记时（在`title`我应用工具提示的元素的属性中），我注意到不支持 HTML。

这是我的工具提示的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/lD9WE.jpg)

如何使 HTML 内容与 1.10.2 中的 jQueryUI 工具提示一起使用？

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2013-03-31T20:53:37.447

**编辑**：由于事实证明这是一个流行的答案，我添加了[@crush](https://stackoverflow.com/questions/15734105/jquery-ui-tooltip-does-not-support-html-content/15734408#comment25965477_15734408)在下面的评论中提到的免责声明。如果您使用此解决[*方法，请注意您正在为 XSS 漏洞敞开大门*](http://bugs.jqueryui.com/ticket/9019#comment:2)。仅当您*知道自己在做什么*并且可以确定**属性**中的 HTML 内容时才使用此解决方案。

* * *

最简单的方法是为`content`覆盖默认行为的选项提供一个函数：

```
$(function () {
      $(document).tooltip({
          content: function () {
              return $(this).prop('title');
          }
      });
  }); 
```

**示例：http:** [//jsfiddle.net/Aa5nK/12/](http://jsfiddle.net/Aa5nK/12/)

另一种选择是用您自己的更改`content`选项的工具提示小部件覆盖：

```
$.widget("ui.tooltip", $.ui.tooltip, {
    options: {
        content: function () {
            return $(this).prop('title');
        }
    }
}); 
```

现在，每次调用`.tooltip`，都会返回 HTML 内容。

**示例：http:** [//jsfiddle.net/Aa5nK/14/](http://jsfiddle.net/Aa5nK/14/)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-05-20T04:13:54.423

而不是这个：

```
$(document).tooltip({
    content: function () {
        return $(this).prop('title');
    }
}); 
```

使用它以获得更好的性能

```
$(selector).tooltip({
    content: function () {
        return this.getAttribute("title");
    },
}); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-04-13T16:08:32.923

我用自定义数据标签解决了这个问题，因为无论如何都需要一个标题属性。

```
$("[data-tooltip]").each(function(i, e) {
    var tag = $(e);
    if (tag.is("[title]") === false) {
        tag.attr("title", "");
    }
});

$(document).tooltip({
    items: "[data-tooltip]",
    content: function () {
        return $(this).attr("data-tooltip");
    }
}); 
```

像这样，它符合 html 标准，并且工具提示仅针对想要的标签显示。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-02-24T12:00:50.727

您也可以通过使用 CSS 样式完全不使用 jQueryUI 来实现这一点。请参阅下面的片段：

```
div#Tooltip_Text_container {
  max-width: 25em;
  height: auto;
  display: inline;
  position: relative;
}

div#Tooltip_Text_container a {
  text-decoration: none;
  color: black;
  cursor: default;
  font-weight: normal;
}

div#Tooltip_Text_container a span.tooltips {
  visibility: hidden;
  opacity: 0;
  transition: visibility 0s linear 0.2s, opacity 0.2s linear;
  position: absolute;
  left: 10px;
  top: 18px;
  width: 30em;
  border: 1px solid #404040;
  padding: 0.2em 0.5em;
  cursor: default;
  line-height: 140%;
  font-size: 12px;
  font-family: 'Segoe UI';
  -moz-border-radius: 3px;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  -moz-box-shadow: 7px 7px 5px -5px #666;
  -webkit-box-shadow: 7px 7px 5px -5px #666;
  box-shadow: 7px 7px 5px -5px #666;
  background: #E4E5F0  repeat-x;
}

div#Tooltip_Text_container:hover a span.tooltips {
  visibility: visible;
  opacity: 1;
  transition-delay: 0.2s;
}

div#Tooltip_Text_container img {
  left: -10px;
}

div#Tooltip_Text_container:hover a span.tooltips {
  visibility: visible;
  opacity: 1;
  transition-delay: 0.2s;
}
```

```
<div id="Tooltip_Text_container">
  <span><b>Tooltip headline</b></span>
  <a href="#">
    <span class="tooltips">
        <b>This is&nbsp;</b> a tooltip<br/>
        <b>This is&nbsp;</b> another tooltip<br/>
    </span>
  </a>
  <br/>Move the mousepointer to the tooltip headline above. 
</div>
```

第一个跨度用于显示文本，第二个跨度用于隐藏文本，当您将鼠标悬停在其上时会显示。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-30T12:31:56.267

要扩展上面@Andrew Whitaker 的答案，您可以将工具提示转换为标题标签中的 html 实体，以避免将原始 html 直接放在您的属性中：

```
$('div').tooltip({
    content: function () {
        return $(this).prop('title');
    }
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<div class="tooltip" title="&lt;div&gt;check out these kool &lt;i&gt;italics&lt;/i&gt; and this &lt;span style=&quot;color:red&quot;&gt;red text&lt;/span&gt;&lt;/div&gt;">Hover Here</div>
```

通常，工具提示无论如何都存储在 php 变量中，因此您只需要：

```
<div title="<?php echo htmlentities($tooltip); ?>">Hover Here</div> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-09T12:15:06.047

来自[http://bugs.jqueryui.com/ticket/9019](http://bugs.jqueryui.com/ticket/9019)

> 将 HTML 放在 title 属性中不是有效的 HTML，我们现在将其转义以防止 XSS 漏洞（参见[#8861](http://bugs.jqueryui.com/ticket/8861)）。
> 
> 如果您的工具提示中需要 HTML，请使用内容选项 - [http://api.jqueryui.com/tooltip/#option-content](http://api.jqueryui.com/tooltip/#option-content)。

尝试使用javascript设置html工具提示，见下文

```
$( ".selector" ).tooltip({
   content: "Here is your HTML"
}); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-17T23:41:56.820

为了避免在 title 属性中放置 HTML 标签，另一种解决方案是使用 markdown。例如，您可以使用 [br] 表示换行符，然后在内容函数中执行简单的替换。

在标题属性中：

```
"Sample Line 1[br][br]Sample Line 2" 
```

在您的**内容功能**中：

```
content: function () {
    return $(this).attr('title').replace(/\[br\]/g,"<br />");
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-07-13T03:34:53.007

另一种解决方案是抓取`title`标签内的文本，然后使用`.html()`jQuery 的方法来构造工具提示的内容。

```
$(function() {
  $(document).tooltip({
    position: {
      using: function(position, feedback) {
        $(this).css(position);
        var txt = $(this).text();
        $(this).html(txt);
        $("<div>")
          .addClass("arrow")
          .addClass(feedback.vertical)
          .addClass(feedback.horizontal)
          .appendTo(this);
      }
    }
  });
}); 
```

**示例：http:** [//jsfiddle.net/hamzeen/0qwxfgjo/](http://jsfiddle.net/hamzeen/0qwxfgjo/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-08-06T12:16:31.770

```
$(function () {
         $.widget("ui.tooltip", $.ui.tooltip, {
             options: {
                 content: function () {
                     return $(this).prop('title');
                 }
             }
         });

         $('[rel=tooltip]').tooltip({
             position: {
                 my: "center bottom-20",
                 at: "center top",
                 using: function (position, feedback) {
                     $(this).css(position);
                     $("<div>")
                         .addClass("arrow")
                         .addClass(feedback.vertical)
                         .addClass(feedback.horizontal)
                         .appendTo(this);
                 }
             }
         });
     }); 
```

感谢上面的帖子和解决方案。

我已经稍微更新了代码。希望这可以帮助你。

[http://jsfiddle.net/pragneshkaria/Qv6L2/49/](http://jsfiddle.net/pragneshkaria/Qv6L2/49/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-01-15T09:45:05.843

只要我们使用 jQuery (> v1.8)，我们就可以使用 $.parseHTML() 解析传入的字符串。

```
$('.tooltip').tooltip({
    content: function () {
        var tooltipContent = $('<div />').html( $.parseHTML( $(this).attr('title') ) );
        return tooltipContent;
    },
}); 
```

我们将解析传入字符串的属性以查找不愉快的内容，然后将其转换回 jQuery 可读的 HTML。这样做的美妙之处在于，当它到达解析器时，字符串已经连接起来，所以如果有人试图将脚本标签拆分成单独的字符串并不重要。如果您无法使用 jQuery 的工具提示，这似乎是一个可靠的解决方案。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-03-16T02:28:32.940

您可以修改源代码 'jquery-ui.js' ，找到这个用于检索目标元素的标题属性内容的默认函数。

```
var tooltip = $.widget( "ui.tooltip", {
version: "1.11.4",
options: {
    content: function() {
        // support: IE<9, Opera in jQuery <1.7
        // .text() can't accept undefined, so coerce to a string
        var title = $( this ).attr( "title" ) || "";
        // Escape title, since we're going from an attribute to raw HTML
        return $( "<a>" ).text( title ).html();
    }, 
```

将其更改为

```
var tooltip = $.widget( "ui.tooltip", {
version: "1.11.4",
options: {
    content: function() {
        // support: IE<9, Opera in jQuery <1.7
        // .text() can't accept undefined, so coerce to a string
        if($(this).attr('ignoreHtml')==='false'){
            return $(this).prop("title");
        }
        var title = $( this ).attr( "title" ) || "";
        // Escape title, since we're going from an attribute to raw HTML
        return $( "<a>" ).text( title ).html();
    }, 
```

因此，每当您想显示 html 提示时，只需在目标 html 元素上添加一个属性 ignoreHtml='false'；像这样 `<td title="<b>display content</b><br/>other" ignoreHtml='false'>display content</td>`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-09-05T08:06:27.673

上述解决方案都不适合我。这个对我有用：

```
$(document).ready(function()
{
    $('body').tooltip({
        selector: '[data-toggle="tooltip"]',
        html: true
     });
}); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-03-11T11:00:51.430

html标记

类“.why”的工具提示控件和类“.customTolltip”的工具提示内容区

```
$(function () {
                $('.why').attr('title', function () {
                    return $(this).next('.customTolltip').remove().html();
                });
                $(document).tooltip();
            }); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-08-04T09:57:17.410

在保持 HTML 的其余部分被转义的同时，替换`\n`或转义就可以了：`<br/>`

```
$(document).tooltip({
    content: function() {
        var title = $(this).attr("title") || "";
        return $("<a>").text(title).html().replace(/&lt;br *\/?&gt;/, "<br/>");
    },
}); 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2013-10-27T13:03:31.973

将 html = true 添加到工具提示选项

```
$({selector}).tooltip({html: true}); 
```

**更新**
*它与 jQuery ui 工具提示属性无关 - 在引导 ui 工具提示中是正确的 - 我的错！*

# jquery - Ajax-填充下拉列表以在上一个下拉列表没有更改但选择了一个选项时触发

> ID：15734107
> 
> 赞同：0
> 
> 时间：2013-03-31T20:20:24.100
> 
> 标签：jquery, ajax, drop-down-menu

我有 3 个下拉列表：第一个是从服务器填充的，第二个是根据第一个的更改通过 ajax 填充的，第三个也是根据第二个的更改通过 ajax 填充的。

这是第二个或第三个下拉 ajax 的代码：

```
$("select[name='myId']").change(function() {
$.ajax({
    type: "POST",
    url: "ajax/getList",
    data: "id="+$("select[name='myId']").val(),
    dataType: 'json',
    success: function(data){
        $("select[name='nextId']").empty();
        $.each(data, function() { //Filling each option
            if(this.isSelected == 1) $("select[name='nextId']").append($("<option />").val(this.id).text(this.name).attr("selected","selected"));
            else $("select[name='nextId']").append($("<option />").val(this.id).text(this.name));
        });
    }
});
});
$("select[name='myId']").change(); 
```

如您所见，我传递了一个“isSelected”参数，该参数预先选择了用户在之前提交的表单中选择的值。问题是，当预填充下拉列表时，它不会触发更改事件，因此下一个下拉列表根本不会通过 ajax 填充。

如果先前的下拉列表值发生更改（如当前所做的那样），但如果先前的下拉列表不为空并且选择了一个值，并且当前要填充的下拉列表为空，我如何触发我的 ajax？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:03:02.983

尝试在成功函数中添加它，就在`$.each()`：

```
if ( $("select[name='nextId'] option:selected").length ) {
    // an option is pre-selected
    // check if third dropdown is empty
    if ( $("select[name='nextNextId'] option").length == 0 ) {
        // third dropdown is empty
        // populate it by triggering change handler on second dropdown
        $("select[name='nextId']").change();
    }
} 
```

这假设第三个下拉列表称为 nextNextId。

# c# - 无法反序列化 JSON

> ID：15734108
> 
> 赞同：0
> 
> 时间：2013-03-31T20:20:37.043
> 
> 标签：c#, json

我有一个 JSON 字符串（根据验证器）是有效的 JSON，我一直试图将其解析为 c# 中的对象。

示例字符串：

```
{"asks":[["49999.99000","20.00000000"],["900.00000","4.00000000"],["100.00000","5.00000000"]],"bids":[["5.40000","15.06500000"],["5.53675","0.50000000"],["5.00000","6.00000000"]]} 
```

我曾尝试使用[http://json2csharp.com/](http://json2csharp.com/)它建议这个类（它确实有效）：

```
public class RootObject
{
    public List<List<string>> asks { get; set; }
    public List<List<string>> bids { get; set; }
} 
```

但是我想像`List<Ask> asks { get; set; }`. 我尝试了以下方法：

```
public class Orderbook
{
    public List<Ask> asks { get; set; }
    public List<Bid> bids { get; set; }
}

public class Ask
{
    public double amount { get; set; }
    public double price { get; set; }
}

public class Bid
{
    public double amount { get; set; }
    public double price { get; set; }
} 
```

但这会失败，因为*类型'namespace.Ask'不支持数组的反序列化。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:29:43.983

不需要`Ask`和`Bid`类

```
var orderBook = JsonConvert.DeserializeObject<Orderbook>(json); //Json.Net
//OR
var orderBook = new JavaScriptSerializer().Deserialize<Orderbook>(json);  //JavaScriptSerializer

public class Orderbook
{
    public List<List<string>> asks { get; set; }
    public List<List<string>> bids { get; set; }
} 
```

顺便说一句：值是字符串（`"49999.99000"`）不是双精度

**编辑**

`asks`并且`bids`是*数组数组*，因此将它们转换为具体类的数组（在反序列化期间）需要很多技巧（如果可能的话）。你为什么不简单地迭代`orderBook`以形成你想要的？

```
var asks = orderBook.asks.Select(a => 
                      new Ask { 
                          amount = double.Parse(a[0],CultureInfo.InvariantCulture), 
                          price = double.Parse(a[1],CultureInfo.InvariantCulture)
                      }).ToList(); 
```

# objective-c - iPhone上的FGallery问题

> ID：15734109
> 
> 赞同：2
> 
> 时间：2013-03-31T20:20:37.030
> 
> 标签：objective-c, fgallery

我正在尝试实现 FGallery 以在网格视图中显示图像。但我面临一个问题，我在下面解释：

1.  当我尝试使用以下方法加载图像时，它可以工作，

    NSString *string1 = @"user/name/Library/ApplicationSupport/../Documents/image1.jpg"; NSArray *array = [[NSArray alloc]initWithObjects: string1,nil];

    上述方法完全有效，没有我们的错误。

2.  但是当我尝试使用以下方法加载图像时，我只得到空白图像，

    NSString *string1 = (NSString *) [[self.allImagePath valueForKey@"image_Path"] objectAtIndex:0]; NSArray *array = [[NSArray alloc]initWithObjects: string1, nil];

    上述方法在网格视图和缩略图视图中加载空白图像。请指导我解决问题。

# jquery - 使用 jquery malsup 提交带有输入文件的表单仅在 IE 中不起作用

> ID：15734112
> 
> 赞同：0
> 
> 时间：2013-03-31T20:21:11.440
> 
> 标签：jquery, jquery-forms-plugin

```
 // triggering input:file click via <a> tag click

    $('.upload_company_logo').on('click', function(e){
        e.preventDefault();
        $('#addCompanyLogo input:file').click();
    });

    // main submit event

    $('#addCompanyLogo').submit(function() {
        $(this).unbind('submit').ajaxSubmit({    
            iframe: true,
            url : _ROOT + 'users/upload_company_logo',
            success: function (responseText, statusText) {   
                var response = $.parseJSON(responseText);
                if(statusText == 'success') {
                    var response = $.parseJSON(responseText);
                    $('.the_company_logo').attr('src', _ROOT + 'image/company_logo/' + response.tmp_name + '?t=' + (new Date()).getTime())
                } 
            }                         
        });
        return false;
    });

    // submitting form
    $('#addCompanyLogo input:file').on('change', function() {
       $('#addCompanyLogo').submit();
    }); 
```

我尝试了上面**通过 Ajax 上传图像**的代码，它在所有浏览器中都可以正常工作，除了 IE，在 IE 中它显示错误`Access is Denied`。

值得一提的是，这里的表单`form#addCompanyLogo`是隐藏的，我通过点击标签触发了`input:file`更改事件。`<a>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T06:44:53.893

IE 不支持通过 onchange 提交带有文件上传的表单。这是一个“安全”功能。只需更改为直接点击触发即可：）

# ruby-on-rails - 在保存到数据库之前编辑数据

> ID：15734114
> 
> 赞同：0
> 
> 时间：2013-03-31T20:21:15.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我有一个`bookmark`带有`:url`属性的模型。我需要它以正确的格式保存在数据库中：带`http://`或`https://`前缀。

所以，在`bookmarks_controller`我采取`before_filter`了`create`行动：

```
class BookmarksController < ApplicationController
  before_filter :standardise_urls, only: :create
.
.
.
def create
    @bookmark = current_user.bookmarks.build(params[:bookmark])
    if @bookmark.save
      flash[:success] = "Bookmark created!"
      redirect_to root_url
    else
      render 'static_pages/home'
    end
  end
.
.
.
private

  def standardise_urls
    if params[:bookmark][:url] != /https?:\/\/[a-zA-Z0-9\-\.]+\.[a-z]+/
      params[:bookmark][:url] = "http://#{params[:bookmark][:url]}"
    end
  end
end 
```

但它不起作用。我希望它`http://`在用户添加它们时为没有它的链接添加前缀。但它继续为所有创建的链接添加前缀。

我认为错误在于重复`params[:bookmark][:url]`，但我不明白如何解决它。

另外，在控制器中添加这个过滤器是否正确？也许它必须在模型级别？或者最好在生成视图时动态添加前缀，所以我必须把它放在那里？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:29:53.733

我认为您的逻辑问题在于您正在测试正则表达式的相等性，而不是进行实际的正则表达式测试（=~ 或！~）。

我建议在您的书签模型中执行此操作。测试起来会更容易，而且模型似乎有责任知道什么是有效的 URL。您可以通过覆盖 Active Record 自动生成的 url setter 方法来做到这一点：

```
class Bookmark < ActiveRecord::Base
  def url=(link)
    unless link =~ /https?:\/\/[a-zA-Z0-9\-\.]+\.[a-z]+/
      link = "http://#{link}"
    end

    super
  end
end 
```

# list - 替换 sicstus prolog 中的列表元素

> ID：15734115
> 
> 赞同：1
> 
> 时间：2013-03-31T20:21:31.790
> 
> 标签：list, replace, prolog, prolog-dif

我正在编写一个 Prolog 谓词，它接受参数（A1，A2，L1，L2），如果 L1 中所有出现的 A1 都已更改为 L2 中的 A2，则成功。

IE：

```
| ?- replace(a, b, [a], X).
X = [b] 
```

这是我写的：

```
replace(Orig,_,[Other],[Other]) :- Other \== Orig.
replace(Orig,Repl,[Orig],[Repl]).
replace(Orig,Repl,[Other|T1],[Other|T2]) :- Other \== Orig, replace(Orig,Repl,T1,T2).
replace(Orig,Repl,[Orig|T1],[Repl|T2]) :- replace(Orig,Repl,T1,T2). 
```

现在，这可行，但似乎有点不雅。有没有更优雅的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:56:05.670

SICStus Prolog 具有这样的特性`dif/2`，因此您可以以纯粹的方式定义关系，如下所示：

```
replacement(A, B, X, Y) :-
   ( A = X, B = Y
   ; dif(A,X), X = Y
   ).

maplist_replacement([], [], _, _).
maplist_replacement([X|Xs], [Y|Ys], A, B) :-
   replacement(A, B, X, Y),
   maplist_replacement(Xs, Ys, A, B). 
```

```
| ?- maplist_replacement([1,2,3],Ys, 1,x)。
Ys = [x,2,3] ？;
不
| ?- maplist_replacement([X,Y],[X,Y],A,B)。
B = A，
X = A，
Y = A ? ;
B = A，
X = A，
序言：dif__int(A,Y) ？;
B = A，
Y = A，
序言：dif__int(A,X) ？;
序言：dif__int（A，X），
序言：dif__int(A,Y) ？;
不

```

最后一个查询对应的问题是：什么必须`A`和`B`看起来像这样才能使两个元素列表保持不变？有四个答案：

1.  `A`, `B`, `X`, 和`Y`都是一样的。

2.  `A`, `B`, 和`X`是相同的，并且`Y`是不同的。

3.  `A`, `B`, 和`Y`是相同的，并且`X`是不同的。

4.  `X`并且`Y`都不同于`A`。

在较新版本的 SICStus 中，`maplist/3`位于库中，但定义并不完全单调。有关将谓词应用于列表元素的`maplist/3`Prolog[映射过程](https://stackoverflow.com/questions/6682987/prolog-map-procedure-that-applies-predicate-to-list-elements/6683502#6683502)的定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T20:41:28.947

关于什么：

```
replace(A, B, X, Y) :- ( X == A -> Y = B ; Y = X ). 
```

例子：

```
?- maplist(replace(1,x), [1,2,3], Ls).
Ls = [x, 2, 3]. 
```

如果您愿意，很容易将`maplist/3`调用展开为递归谓词。

# python - django 上没有名为 my_unique_try_Xymotech 的模块错误

> ID：15734121
> 
> 赞同：0
> 
> 时间：2013-03-31T20:22:08.570
> 
> 标签：python, django, django-models

我在其中启动了一个项目和一个应用程序：

```
django-admin.py startproject blog
cd blog
python manage.py startapp my_unique_try_Xymostech 
```

在文件`blog/url.py`中`urlpatterns`：

```
(r'^my_unique_try_Xymostech/$', 'blog.my_unique_try_Xymostech.views.my_unique_try_Xymostech'), 
```

在文件中`my_unique_try_Xymostech/views.py`：

```
def my_unique_try_Xymostech(request):
    print "bla bla" 
```

但是在运行服务器（`http://127.0.0.1:8000/admin/`）时出现错误：

```
No module named my_unique_try_Xymostech 
```

*   做手术时我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:32:28.917

由于 url.py 已经在应用程序中，您提到了 blog/url.py，我认为您不需要`blog`in`'blog.my_unique_try_Xymostech.views.my_unique_try_Xymostech'`

你试一试

```
(r'^my_unique_try_Xymostech/$', 'my_unique_try_Xymostech.views.my_unique_try_Xymostech'), 
```

我刚才没有通过创建 django 应用来验证，但可能就是这样。

我通常将我的 django 应用程序添加到 python 路径，所以如果你这样做，这样的事情不会成为问题，我认为。

# python - 如何使用 Python 在特定的逗号上进行拆分

> ID：15734123
> 
> 赞同：1
> 
> 时间：2013-03-31T20:22:37.653
> 
> 标签：python

我有一个这样的txt文件：

```
"Adler; David L. (San Jose, CA)", 
"Albert; Richard D. (San Ramon, CA)", "Albert; Richard D. (San Ramon, CA) , Reyna; David L. (San Ramon, CA)", 
"Amano; Masaharu (Ibaraki, JP )" 
```

这是一个包含人名和（他们的城市+他们的州）的文件。

现在我将不得不一一分开每条记录。

像这样：

```
Adler; David L. (San Jose, CA)

Albert; Richard D. (San Ramon, CA)

Albert; Richard D. (San Ramon, CA)

Reyna; David L. (San Ramon, CA)

Amano; Masaharu (Ibaraki, JP ) 
```

我怎么能意识到这一点？我不熟悉 re 所以我们怎么能用 re 例如解决这个问题？也就是说，我们将把单词除以以下索引，就像两种逗号一样：

1.

```
"Adler; David L. (San Jose, CA)", 
  "Albert; Richard D. (San Ramon, CA)" 
```

进入：

```
Adler; David L. (San Jose, CA)

Albert; Richard D. (San Ramon, CA) 
```

2.`Albert; Richard D. (San Ramon, CA) , Reyna; David L. (San Ramon, CA)`

进入：

```
Albert; Richard D. (San Ramon, CA)

Reyna; David L. (San Ramon, CA) 
```

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:16:09.827

正则表达式对此很有用。

```
txt='"Adler; David L. (San Jose, CA)", "Albert; Richard D. (San Ramon, CA)", "Albert; Richard D. (San Ramon, CA) , Reyna; David L. (San Ramon, CA)", "Amano; Masaharu (Ibaraki, JP )"'
import re
for s in re.findall(r'[^\s",(][^",(]*\([^)]*\)', txt):
    print s 
```

印刷

```
Adler; David L. (San Jose, CA)
Albert; Richard D. (San Ramon, CA)
Albert; Richard D. (San Ramon, CA)
Reyna; David L. (San Ramon, CA)
Amano; Masaharu (Ibaraki, JP ) 
```

在正则表达式中：

*   `[^\s",(]`除空格、引号、逗号或左括号外的一个字符
*   `[^",(]*`除引号、逗号或左括号之外的零个或多个字符
*   `\(`左括号（必须用 \ 转义，因为它在正则表达式中有特殊含义）
*   `[^)]*`除右括号外的零个或多个字符
*   `\)`右括号

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T20:40:42.130

使用[CSV 模块](http://docs.python.org/2/library/csv.html?highlight=csv#csv)并将逗号指定为分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T20:31:52.083

如果您确定您的文件不会包含任何与安全相关的内容，您可以这样做

```
exec("l = ["+text+"]")
print i for i in l 
```

或者，对于正则表达式：

```
import re
res = re.findall("([A-Za-z]*?; [A-Za-z]+?( [A-Za-z]\.)?) \(([A-Za-z ]*?, [A-Z]*?)\)", text)
for i in res:
    name = i[0]
    if len(res) == 2: citystate = i[1]
    else: citystate = i[2]
    print name, citystate 
```

只要城市和州的“）”之前没有结尾“”，那应该可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T20:37:47.663

1.  从文本文件中去掉引号。
2.  使用“，”将字符串拆分为列表
3.  [从http://docs.python.org/2/library/re.html](http://docs.python.org/2/library/re.html)学习和使用正则表达式，提取每个列表元素的名称和位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-26T19:18:25.630

如果你不限于`python`那么我建议`awk`是完美的：

```
$ awk '{$1=$1}1' FPAT="[[:alpha:]]+;[^)]+)" OFS="\n" file
Adler; David L. (San Jose, CA)
Albert; Richard D. (San Ramon, CA)
Albert; Richard D. (San Ramon, CA)
Reyna; David L. (San Ramon, CA)
Amano; Masaharu (Ibaraki, JP ) 
```

`FPAT`用于设置场模式，在这种情况下场模式是

```
[[:alpha:]]+     # One or more alphabetic character
;                # Followed by a literal semi-colon
[^)]+            # Followed by one or more none ) characters 
)                # Followed by a ) 
```

`OFS`用于设置输出字段分隔符，这里我们使用换行符。

注意：这需要`GNU awk`.

# serial-port - 为什么不像 I2C、SPI 那样使用 4B5B？

> ID：15734126
> 
> 赞同：-1
> 
> 时间：2013-03-31T20:22:51.390
> 
> 标签：serial-port, arduino, i2c

我正在向我的朋友解释 I2C/SPI 串行协议时，他提到有一种方法可以使用 4B5B 协议的一根线在两个设备之间发送数据。如果这是真的，为什么 4B5B 不习惯，比如说，在 arduino 和外围设备之间发送数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:40:02.433

这是一个不太有用的答案：我认为它不属于 Arduino 平台的主要原因是它没有在构建 Arduino 的大多数芯片上实现：

*   Arduino [Nano](http://arduino.cc/en/Main/ArduinoBoardNano)和[Uno](http://arduino.cc/en/Main/ArduinoBoardUno)基于[ATmega168](http://www.atmel.com/devices/atmega168.aspx) / [ATmega328](http://www.atmel.com/devices/atmega328.aspx)。168 和 328 都没有[4B5B](http://en.wikipedia.org/wiki/4B5B)和[Dallas 1-wire](http://en.wikipedia.org/wiki/1-Wire)协议支持。
*   Arduino [Due](http://arduino.cc/en/Main/ArduinoBoardDue)使用[ATSAM3x8e](http://www.atmel.com/devices/sam3x8e.aspx)。它同样缺乏对单线协议的支持
*   Arduino [Lenonardo](http://arduino.cc/en/Main/ArduinoBoardLeonardo)使用不同的 AVR 架构芯片 ATmega32u4，但故事相同。

最后，问题可能应该交给 Atmel 而不是 Arduino 设计师。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T20:44:22.673

简短的回答是 4B5B 不是您可以使用的协议，而 I2C 和 SPI 是。

I2C 和 SPI 符合 OSI 网络 1 级和 2 级规范，涵盖设备之间连接的物理电气规范以及连接的设备如何使用连接进行通信。4B5B 只是一种位编码方案，仅涉及如何在 5 位信号中表示 4 位数据，以确保生成的信号具有足够的自动时钟内容。4B5B 不是“协议”或 1 级或 2 级网络规范，这意味着如果您尝试“使用 4B5B”连接两个设备，您仍然会有太多未指定的细节，无法实际创建连接可以交换数据。

# html - 通过css修改不同的列表

> ID：15734129
> 
> 赞同：0
> 
> 时间：2013-03-31T20:22:55.967
> 
> 标签：html, css

我的 HTML 文件是：

```
asdfasdf
<ul>
    <li id="differentstyle">Car</li>
    <li>Car1</li>
    <li>Travel</li>
</ul> 
```

我的 CSS 样式是：

```
#differentstyle ul li {
    padding-bottom: 50px;
} 
```

但这种风格并没有修改“汽车”（第一个）。我做错什么了吗？这应该有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:25:19.203

它没有任何样式，因为`#differentstyle ul li`选择了一个`<li/>`inside a `<ul/>`inside `#differentstyle`，但没​​有 `<ul/>`inside your `#differentstyle`。采用

```
ul li {
    padding-bottom: 50px;
} 
```

相反，如果您想为所有`<li/>`元素设置样式。或使用

```
#differentstyle {
    padding-bottom: 50px;
} 
```

如果您只想设计第一个样式`<li/>`。或者，如果它真的只是第一个您想要不同样式的样式并且您只想将样式应用于特定列表，请将您的 html 更改为

```
<ul id="yourClass">
    <li>Car</li>
    <li>Car1</li>
    <li>Travel</li>
</ul> 
```

并使用这个 css：

```
#yourClass > li {
    padding-bottom: 50px;
}

#yourClass > li:first-child {
    padding-bottom: 100px; /* different style for the first item */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T20:27:33.847

`#differentstyle ul li`: 意思是，`li`里面`ul`里面，里面`#differentstyle`没有`li`里面。`ul``#differentstyle`

所以只需使用：

```
#differentstyle {
    padding-bottom: 50px;
} 
```

更多信息：[CSS 选择器](http://www.w3.org/TR/CSS2/selector.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T20:27:05.930

您的选择器`#differentstyle ul li {`的意思是“匹配一个 li，它是一个 ul 的后代，它是一个 id 为'不同样式'的元素的后代”。如果你想定位第一个 li，只需使用`#differentstyle { ... }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T20:38:42.193

我觉得你身高有问题。和一些代码问题，`margin-bottom: 50px;`而不是`padding-bottom`

所以删除你的所有代码。只需尝试添加以下代码

```
<ul>
    <li id="differentstyle">Car</li>
    <li>Car1</li>
    <li>Travel</li>
</ul> 
```

CSS：

```
ul 
{
    height:160px;//Its not a important 
}

ul li 
{
    margin-bottom: 50px;
} 
```

请参阅此[输出设计](http://jsbin.com/oqeteh/6/edit)

# php - 将时间转换为字符串

> ID：15734131
> 
> 赞同：0
> 
> 时间：2013-03-31T20:23:04.100
> 
> 标签：php, string, datetime

伙计们，我被困住了，我正在尝试使用我自己的格式将字符串转换为日期时间：

```
<?php
require('qs_connection.php');
require('qs_functions.php');

$sDay = $_POST['sDay']; 
$sMonth = $_POST['sMonth'];
$sYear = $_POST['sYear'];
$sHour = $_POST['sHour'];
$sMin = $_POST['sMin'];

$eDay = $_POST['eDay'];
$eMonth = $_POST['eMonth'];
$eYear = $_POST['eYear'];
$eHour =  $_POST['eHour'];
$eMin = $_POST['eMin'];

function num($n){
    $n=$n;
    if ($n<9){
        $n="0"."$n";
    }
    else{
        $n=$n;
    }
    return $n;
}
    function month($mt){
    switch($mt){
        case "Jan":
            return "01";
        case "Feb":
            return "02";
        case "Mar":
            return "03";
        case "Apr":
            return "04";
        case "May":
            return "05";
        case "Jun":
            return "06";
        case "Jul":
            return "07";
        case "Aug":
            return "08";
        case "Sep":
            return "09";
        case "Oct":
            return "10";
        case "Nov":
            return "11";
        case "Dec":
            return "12";
        break;
    }
}
    $startDate = $sYear."-".month($sMonth)."-".num($sDay)." ".num($sHour).":".num($sMin).":00";
    $endDate = $eYear."-".month($eMonth)."-".num($eDay)." ".num($eHour).":".num($eMin).":00";

    $startDate = date_create_from_format("Y-m-d H:i:s", $startDate);
    $endDate = date_create_from_format("Y-m-d H:i:s", $endDate);
    $today = date("Y-m-d H:i:s");

    if(($today >($endDate || $startDate)) || ($endDate < ($startDate || $toady))){
        echo "Can not save";
    }
    else{
        $result = mysql_query("Select votetimeid From votetime ORDER BY votetimeid DESC LIMIT 1");
            while ($db_field = mysql_fetch_assoc($result)){
                $id = $db_field['votetimeid'];
            }
            $id+=1;

    echo "Start: $startDate <br>Today: $today <br>End: $endDate";

    }
?> 
```

我收到此错误：

```
Catchable fatal error: Object of class DateTime could not be converted 
to string in     C:\wamp\www\mvote\admin\settime.php on line 80 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:28:12.450

而不是

```
echo "Start: $startDate <br>Today: $today <br>End: $endDate"; 
```

尝试

```
echo "Start: {$startDate->format('Y-m-d H:i')} <br>Today: $today <br>End: {$endDate->format('Y-m-d H:i')}"; 
```

或类似的东西。文档：[http ://www.php.net/manual/en/datetime.format.php](http://www.php.net/manual/en/datetime.format.php)

另外，请注意`$toady`错字。

您似乎对布尔运算的工作方式有误解。if 语句应如下所示：

```
if($today > $endDate || $today > $startDate || $endDate < $startDate || $endDate < $today) { 
```

# c++ - 任何 STL 数据结构，如 pair 提供三个项目（类型）而不是两个？

> ID：15734136
> 
> 赞同：18
> 
> 时间：2013-03-31T20:23:37.637
> 
> 标签：c++, data-structures, c++11, std-pair

**问题一：**

我正在使用 C++ 11，我正在学习。我意识到我可以用两对来做到这一点：

```
pair<pair<<#class _T1#>, <#class _T2#>>, <#class _T3#>> 
```

这是最好的方法吗？

**问题2：**

如果我不需要不同的类型，那么两个项目的类型相同，使用pair是否浪费，那我应该使用什么？三个项目？（又是同一类型）

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-31T20:25:47.510

使用[`std::tuple`](http://en.cppreference.com/w/cpp/utility/tuple)：

```
std::tuple<_T1, _T2, _T3> 
```

请注意，`std::tuple`s 支持存储在其中的任意数量的类型。此外，要访问元素，你不能做 nice `pair.first`/ `pair.second`，你必须使用语法`std::get<n>(tuple)`，`n`你想要检索的元素在哪里。

# python - 提取柱状数据需要帮助

> ID：15734139
> 
> 赞同：1
> 
> 时间：2013-03-31T20:24:02.433
> 
> 标签：python

我编写了如下代码，通过拆分提取所有表格数据。现在我想
通过删除表格中间的文本来提取最后一列（值）数据。

```
 import re
    f_read = open('filename','r')
    f_write=open('filename','w')
    str='CEN/4'
    for line in f_read:    
        m=re.search(str,line)
        if m:
           for line in f_read:      # loop over the rows
                if not line.strip():
                  continue
           line = line.split(' ',1)   # parse the columns
           print line
           f_write.writelines(line) 
```

表看起来像这样，后跟每列中的值。现在我想删除文本并提取值。

```
 S T R E S S E S   I N   Q U A D R I L A T E R A L   E L E M E N T S   ( Q U A D 4 )        OPTION = BILIN  

ELEMENT              FIBER            STRESSES IN ELEMENT COORD SYSTEM         PRINCIPAL STRESSES (ZERO SHEAR)               
  ID      GRID-ID   DISTANCE        NORMAL-X      NORMAL-Y      SHEAR-XY      ANGLE        MAJOR         MINOR       VON MISES 

  121      3423      342             4545          45435        4345           42353     3456456       67658          3435 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T01:49:37.373

如果我理解了您的问题，那么您的代码有几处问题。值得注意的是，您不能以所示方式读取和写入同一文件。使情况复杂化的是，存在嵌套`for`循环，它们都从同一个输入文件中读取行。

这是一个修改后的版本，它通过写入单独的输出文件并在单循环的控制下做所有事情来避免这些问题`for`。我还复制了输入文件中的数据行并更改了上面的所有数字，因此它们以 a 开头，`9`因此将有不止一行数据用于测试目的。

```
import re

with open('filename','r') as f_read, open('filename2','w') as f_write:
    for line in (line.strip() for line in f_read):
        if re.search(r'^\d+', line):  # line starts with a number?
            columnar_data = ' '.join(line.split())
            print columnar_data
            f_write.write(columnar_data+'\n') 
```

输出文件内容（`filename2`）：

```
121 3423 342 4545 45435 4345 42353 3456456 67658 3435
921 9423 942 9545 95435 9345 92353 9456456 97658 9435 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:50:01.460

我不太清楚你想做什么。但是，如果您只想从该文件的最后一行读取数据，则可以执行以下操作：

```
def read_last_line(file_path):
    f = open(file_path, 'r')
    lines = f.readlines()
    f.close()
    last_line = lines[-1].split()
    return last_line 
```

请注意，这`lines[-1]`是获取数组中最后一个元素的快速方法。在这种情况下，该数组是一个数组，其中每个元素都是文件中的一行。我认为这可能是您正在寻找的重要技巧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:00:24.090

在这种情况下，我认为在实际情况中很可能有很多行包含值（一个用于许多元素 ID 中的每一个）。要仅输出所有值，我建议如下：

```
import re
f_read = open('quad4.txt','r')
f_write=open('quad4.out','w')
str = 'GRID-ID'
for line in f_read: 
    m=re.search(str,line)
    if m:
        break

for line in f_read:   # loop over the rows
    line = line.strip()
    if line:
        vallist = line.split()   # parse the columns
        print (vallist)
        f_write.write("%s\n" % "\t".join(vallist) 
```

这会读取文件，直到找到包含“GRID-ID”的行，然后开始拆分任何非空行并将其写入制表符分隔的列中。这使得进一步的处理变得容易。或者，在上面代码的倒数第三行，这些值以方便的形式拆分`vallist`为进一步处理。请注意，`vallist`值仍然是字符串，因此如果要对它们进行计算，则需要先将它们转换为`int`or`float`值。

# c++ - 依赖成员初始化，当无法重新排序时

> ID：15734147
> 
> 赞同：0
> 
> 时间：2013-03-31T20:24:45.747
> 
> 标签：c++, pointers, initialization

```
#include <iostream>
class BarParent
{
    public:
        int x;
        virtual void fuz() = 0;
};

class BarChild : public BarParent
{
    public: 
        BarChild(int new_x){x = new_x;}
        virtual void fuz(){}
};

class FooParent
{
    public:
        BarParent* p_barPar;
        FooParent (BarChild* new_p_bar)
        {
            p_barPar = new_p_bar;
            std::cout << p_barPar->x << std::endl;
        }
};

class FooChild: public FooParent
{
    public:
        BarChild barChild;
        FooChild(int new_x):FooParent(&barChild), barChild(new_x){}
};
int main()
{   
    FooChild foo(60);

    BarChild bar(99);
    FooParent fooP(&bar);
} 
```

输出：

```
-548726160 
99 
```

我理解为什么我得到这个结果（未定义的行为），`barChild`在它被初始化之前被使用。我的问题是处理这个问题的“权利”是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:43:14.210

这是需要修复*设计*而不是*代码的情况。*

通过您自己的设计：

*   A`BarChild`必须在 之前构造`FooParent`。
*   A`FooParent`必须在 a 之前构造`FooChild`。
*   A`FooChild`必须在 a 之前构造`BarChild`。

当您想要两者`FooParent`并`FooChild`引用同一个 Bar 对象时 - 正如您在代码中尝试的那样 - 设计父类来管理它。

一个示例解决方案：

```
 FooParent (BarChild* new_p_bar)
    {
        if ( new_p_bar == NULL )
           new_p_bar = new BarChild;

        p_barPar = new_p_bar;
        std::cout << p_barPar->x << std::endl;
    } 
```

在这里，`FooChild`不需要它自己的这个对象的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:30:40.973

尊重初始化的顺序。

您可以在 BarParent 中创建一个函数来设置指针 p_barPar。在 FooChild 的构造函数中调用该函数。

是否有任何理由不能让 barChild（在 FooChild 中）也成为指针？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T20:49:16.070

我认为您将不得不找到另一个示例：这个示例是错误的，因为未强制执行 RAIII 原则：`FooParent`将指针保存在它无法控制的值上。这个设置失败的一个有趣的例子是[切片问题](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T21:16:17.830

快速而肮脏的解决方案：

```
class FooChild: private BarChild, public FooParent
{
public:
        FooChild(int new_x): BarChild(new_x), FooParent(this) {}
}; 
```

# php - 我失去了与 PHP 的会话

> ID：15734148
> 
> 赞同：0
> 
> 时间：2013-03-31T20:24:52.107
> 
> 标签：php, session

我正在处理的项目有问题。我正在尝试使用 PHP + Sessions 编写一个简单的登录系统。但是我失去了我的会话，我真的不知道为什么，代码：

索引.php

```
<?php
session_start();

if(!isset($_SESSION['logedin'] == True)){
    <form action = "login.php" method = "post" id="login-form" class = "login-form">
        <input type = "text" name = "username" maxlength = "100"/>
        <input type = "password" maxlength = "50" name = "password"/>

        <button type="submit">Sign in</button>
    </form>
}else{
   echo "Loged in.";
}
?> 
```

登录.php

```
<?php
    session_start();

    $username = $_POST['username'];
    $password = $_POST['password'];

    if(!isset($_SESSION['logedin'] == True)){
        if($username == 'username' && $password == 'password'){
                    $_SESSION['logedin'] = True;
                    header("index.php"); // Loged in
        }
    }
?> 
```

真正的代码不是这个，因为放在这里太长了，但这是一个关于代码的简单简历......我迷失了，因为如果我打开一个会话到 index.php，它可以工作，但是如果我离开我的页面（在这种情况下，通过表单登录.php），当我回到索引时，会话就消失了......

我得说我不使用任何框架或其他东西，它是一种简单的形式，全部使用 PHP 完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:27:59.397

您在第一行的括号将是一个问题：

```
if(!isset($_SESSION['logedin'] == True)){ 
```

改成：

```
if(!isset($_SESSION['logedin'])) { 
```

你为什么在这种情况下做双重否定？与其做`!isset == true`，不如做`isset == false`。这可能会给您的代码添加混乱，并且您的代码越直观（和简单）越好。

在您的 login.php 中，您也有该行：

```
if(!isset($_SESSION['logedin'] == True)){ 
```

你基本上是在说`isset(true) == false`which 应该总是返回 false。因为`$_SESSION['logedin'] == true`是真的。`if (isset($_SESSION['logedin']))`如果您已登录，请将其更改为 true。

让我们进一步分解这个条件，看看你在做什么

```
if (false == isset(
 $_SESSION['loged'] == true  // will be true if you're logged in
 )  // isset will return true, but you're expecting a false
) 
```

你的 isset 总是会返回 true。$_SESSION['logedin'] == true 是否返回 true 或 false 它将是“isset”。只有返回值为 null 或 var 不存在时，Isset 才会返回 false。“False”是一个值并且存在。那有意义吗？对不起，如果这令人困惑。基本上，不要在你的 isset 中使用条件！:)。使用 isset 作为条件的一部分，但不要将它们传递给 isset 参数。

# facebook - Facebook 说我的 Facebook 页面无效，它是

> ID：15734152
> 
> 赞同：1
> 
> 时间：2013-03-31T20:25:13.070
> 
> 标签：facebook

当我尝试将 Like Box 添加到我的博客时，我不断收到此消息：

该`href`参数必须引用有效的 Facebook 页面，但“ [http://www.facebook.com/OneBrownGirl](http://www.facebook.com/OneBrownGirl) ”不是有效的 Facebook 页面。

既然我知道我的页面是有效的，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T20:29:17.663

这不是 Facebook 页面。这是您的 Facebook 个人资料。您可以在此处创建 Facebook 页面：http: [//www.facebook.com/pages/create/](http://www.facebook.com/pages/create/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T06:49:57.667

来自 Facebook Like Box 社交插件页面：“Like Box 是一个社交插件，使 Facebook 页面所有者能够从他们自己的网站上吸引和获得喜欢。”

Like Box 适用于 Facebook 页面。如果您在 Like Box 社交插件预览页面上输入 URL 值，并且该 URL 不呈现 Like Box，那么实现 Like Box 社交插件的 WordPress 插件将没有什么不同。

Facebook 有单独的个人资料徽章，其他 WordPress 插件可能支持这些徽章。[http://www.linkyiwu.com/](http://www.linkyiwu.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-05T13:29:23.570

只需转到您创建的 facebook 页面，然后单击设置，在页面的最底部您将看到 facebook 页面 ID。选择页面的任何 iD 并将其粘贴到

# java - Java Hadoop Mapper 如何发送多个值

> ID：15734154
> 
> 赞同：9
> 
> 时间：2013-03-31T20:25:37.700
> 
> 标签：java, hadoop, mapper

我的映射器需要发送以下元组：

```
<custID,prodID,rate> 
```

我想将 custID 作为键发送到 reducer，并将 prodID 和 rate 作为值一起发送，因为它们是 reduce 阶段所需要的。这样做的最佳方法是什么？

```
public void map(Object key, Text value, Context context) 
        throws IOException, InterruptedException {

    String[] col = value.toString().split(",");
    custID.set(col[0]);
    data.set(col[1] + "," + col[2]);
    context.write(custID, data);
}

public void reduce(Text key, Iterable<Text> values, Context context)
        throws IOException, InterruptedException {

    for (Text val : values) {
        String[] temp = val.toString().split(",");
        Text rate = new Text(temp[1]);
        result.set(rate);
        context.write(key, result);
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-08-23T07:04:59.373

最好的方法是编写 CustomWritables

这是双重价值。您可以将其更改为 Text 或 String

```
import java.io.DataInput;
import java.io.DataOutput;
import java.io.IOException;
import org.apache.hadoop.io.Writable;

/**
 * @author Unmesha SreeVeni U.B
 *
 */
public class TwovalueWritable implements Writable {
    private double first;
    private double second;

    public  TwovalueWritable() {
        set(first, second);
    }
    public  TwovalueWritable(double first, double second) {
        set(first, second);
    }
    public void set(double first, double second) {
        this.first = first;
        this.second = second;
    }
    public double getFirst() {
        return first;
    }
    public double getSecond() {
        return second;
    }
    @Override
    public void write(DataOutput out) throws IOException {
        out.writeDouble(first);
        out.writeDouble(second);
    }
    @Override
    public void readFields(DataInput in) throws IOException {
        first = in.readDouble();
        second = in.readDouble();
    }

    /* (non-Javadoc)
     * @see java.lang.Object#hashCode()
     */
    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        long temp;
        temp = Double.doubleToLongBits(first);
        result = prime * result + (int) (temp ^ (temp >>> 32));
        temp = Double.doubleToLongBits(second);
        result = prime * result + (int) (temp ^ (temp >>> 32));
        return result;
    }
    /* (non-Javadoc)
     * @see java.lang.Object#equals(java.lang.Object)
     */
    @Override
    public boolean equals(Object obj) {
        if (this == obj) {
            return true;
        }
        if (obj == null) {
            return false;
        }
        if (!(obj instanceof TwovalueWritable)) {
            return false;
        }
        TwovalueWritable other = (TwovalueWritable) obj;
        if (Double.doubleToLongBits(first) != Double
                .doubleToLongBits(other.first)) {
            return false;
        }
        if (Double.doubleToLongBits(second) != Double
                .doubleToLongBits(other.second)) {
            return false;
        }
        return true;
    }
    @Override
    public String toString() {
        return first + "," + second;
    }
} 
```

从映射器中，您可以将其发射为

```
context.write(key,new TwovalueWritable(prodID,rate)); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T20:50:38.967

我能想到的最简单的方法就是将它们合并成一个字符串：

```
output.collect(custID, prodID + "," + rate); 
```

然后，如果备份在减速器上，则拆分。

如果您从映射器中发布更多代码，也许我们可以举一个更好的例子。

更新：也就是说，您要求*最好*的方法。最正确的方法可能是创建一个单独的类分组`prodID`并`rate`一起发送。

# regex - Perl 正则表达式脚本和命令行不同

> ID：15734159
> 
> 赞同：3
> 
> 时间：2013-03-31T20:26:26.017
> 
> 标签：regex, perl, command-line

所以我试图从日志行中删除嵌入的 \n 而不从命令行中删除每个日志行的 \n 。我已经尝试过这些，它们都将 \n 全部更改为 ~。

```
 cat test1.txt | perl -n -e 's{\n(?!2013)}{~}mg;print' > test1a.fix
    perl -n -e 's{\n(?!2013)}{~}mg;print' test1.txt > test1b.fix 
```

都忽略了背后的负面目光。

test1.txt 包含

```
 2013-03-01 12:23:59,1
    line2
        line3
    2013-03-01 12:23:59,4 
```

包含 test1a.fix 和 test1b.fix

```
 2013-03-01 12:23:59,1~line2~    line3~2013-03-01 12:23:59,4 
```

但我想出了使用这个脚本的正则表达式。

```
 #!/usr/bin/perl
    use warnings;
    use strict;

    sub test {
        my ($str, $expect) = @_;
        my $mod = $str;
        $mod =~ s{\n(?!2013)}{~}mg;
        print "Expecting '$expect' got '$mod' - ";
        print $mod eq $expect ? "passed\n" : "failed\n";
    }

    test("2013-03-01 12:23:59,line1
    line2
        line3
    2013-03-01 12:23:59,line4", "2013-03-01 12:23:59,line1~line2~    line3
    2013-03-01 12:23:59,line4"); 
```

它会产生与我想要的匹配的以下输出。

```
 sfager@linux-sz05:~/logs> ./regex_test.pl 
    Expecting '2013-03-01 12:23:59,line1~line2~    line3
    2013-03-01 12:23:59,line4' got '2013-03-01 12:23:59,line1~line2~    line3
    2013-03-01 12:23:59,line4' - passed
    sfager001@linux-sz05:~/logs> 
```

谁能解释为什么这些工作方式不同以及如何在命令行上完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T20:59:28.333

`perl -n`一次处理一行文件。当它读取一行时，换行符位于字符串的末尾，而不是您的正则表达式所期望的开头。您应该使用`^`来匹配行的开头而不是`\n`.

在函数版本中，您一次处理整个多行字符串。在这种情况下，换行符位于字符串的中间，它们与正则表达式匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T21:13:24.293

您的命令行程序一次只能看到一个“输入记录”（又名行）。通过踩下输入记录分隔符变量 $/，我能够让您的示例正常工作。

```
perl -n -e '$/=undef; s{\n(?!2013)}{~}mg;print' test1.txt > test1c.fix 
```

这将每个“行”重新定义为整个输入，并且实际上让它更像您的脚本一样工作。

```
cat test1c.fix
2013-03-01 12:23:59,1~line2~    line3
2013-03-01 12:23:59,4~ 
```

# visual-studio - '指定条件 "$(PackageAsSingleFile)" 计算结果为 "" 而不是布尔值？

> ID：15734166
> 
> 赞同：158
> 
> 时间：2013-03-31T20:27:08.800
> 
> 标签：visual-studio, visual-studio-2012, msbuild

在“公共网络”中预览时，我的 PC 上的 Visual Studio 2012 收到以下错误消息。我需要重新启动 VS 以消除错误消息。

> 由于异常“指定条件“$(PackageAsSingleFile)”评估为“”而不是布尔值，调用构建失败。C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets'

是什么导致了错误？

* * *

## 回答 #1

> 赞同：216
> 
> 时间：2013-04-01T20:04:24.503

我不确定是什么原因造成的，但重新启动 VS 2012 为我修复了它。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-06-14T04:35:06.540

重新启动 VS 通常会有所帮助，但如果没有 - 请尝试删除`.user`和`.suo`文件，按照以下建议：[https ://stackoverflow.com/a/16223645/913845](https://stackoverflow.com/a/16223645/913845)

这并不总是有效，但是如果您跳过“预览部署”，则失败的可能性较小。

可能它是整个类**评估为“”而不是布尔值的解决方案。**Visual Studio 问题。MS 的 VS 团队也有什么需要注意的吗？

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-07-22T09:44:13.250

对于这种类型的部署问题，我发现了一个非常奇怪（并且有效）的解决方法，如果您尝试关闭和打开 VS 却没有运气，请尝试在发布过程之前关闭所有打开的文档。奇怪吧？:)

因此针对此类问题的完整修复指南如下所示：

1.  尝试“清洁”然后重建
2.  如果仍未发布，请尝试再次关闭并重新打开您的项目
3.  还是没有运气？尝试关闭 VisualStudio，但这次删除所有 *.user 和 *.suo 文件，然后再次打开您的解决方案并试一试。
4.  最后，如果所有这些步骤都不起作用，请尝试我的最新技巧，关闭所有打开的文档并尝试一下

让我知道这是否对您有所帮助:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-30T10:23:55.257

当您的解决方案中引用的文件丢失时，也会引发该错误的一种常见情况是。

因此，从解决方案中排除那些将解决它。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-04-10T08:54:44.180

您需要以“管理员身份”运行 Visual Studio。指定的路径需要管理权限才能写入。

# iphone - 在应用程序的下一个操作之前完成请求操作

> ID：15734171
> 
> 赞同：0
> 
> 时间：2013-03-31T20:27:26.050
> 
> 标签：iphone, ios, objective-c

我正在从我的数据库中获取一些数据并将其保存到我创建的对象中（称为“ManejadorMateria”）。然后，我希望能够在下一个视图控制器的表格视图中显示这些数据；问题是请求操作需要在前一个视图控制器的prepareforsegue方法上进行，在我需要的数据保存在对象ManejadorMateria上之前调用了表格视图的方法cellForRowAtIndexPath。

在触发 cellForRowAtIndexPath 方法之前，我该怎么做才能获取该数据？

为了向数据库发出请求，我使用以下代码：

```
-(void)commandWithParams:(NSMutableDictionary*)params onCompletion     (JSONResponseBlock)completionBlock
{
NSMutableURLRequest *apiRequest =
[self multipartFormRequestWithMethod:@"POST"
                                path:kAPIPath
                          parameters:params
           constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {

           }];

AFJSONRequestOperation* operation = [[AFJSONRequestOperation alloc] initWithRequest:   apiRequest];
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    //success!
    completionBlock(responseObject);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    //failure :(
    completionBlock([NSDictionary dictionaryWithObject:[error localizedDescription]   forKey:@"error"]);
}];

[operation start];
} 
```

为了获取我需要的数据，我使用以下代码：

```
- (void)cargarMateriasDeCarrera:(NSString *)carrera{

Materias = [[NSMutableArray alloc] init];
Manejador = [[ManejadorMateria alloc] init];

NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"getMaterias", @"command",
                               carrera, @"carrera",
                               nil];

[[API sharedInstance] commandWithParams:params
                           onCompletion:^(NSDictionary *json) {
                               //handle the response
                               NSDictionary* res = [json objectForKey:@"result"];
                               Materia *materiafuente = [[Materia alloc]init];

                               for (id r in res) {
                                   materiafuente.Nombre = [NSString      stringWithFormat:@"%@",[r objectForKey:@"nombre"]];
                                   materiafuente.Codigo = [NSString stringWithFormat:@"%@",[r objectForKey:@"codigo"]];
                                   materiafuente.Descripcion = [NSString stringWithFormat:@"%@",[r objectForKey:@"descripcion"]];
                                   materiafuente.GradoDificultad = [r objectForKey:@"grado"];
                                   [Materias addObject:materiafuente];

                               }
                               [Manejador setMasterMateriasTodas:Materias];

                                }];

} 
```

最后在同一个视图控制器上的 prepareforsegue 上，我有：

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

usuario.Carrera = [carreras objectAtIndex:self.tableView.indexPathForSelectedRow.row];
TablaMateriasViewController3 *tbvc3 = [segue destinationViewController];
tbvc3.usuario = usuario;

NSString *command = @"registraCarrera";
NSMutableDictionary *params =[NSMutableDictionary dictionaryWithObjectsAndKeys:
                              command, @"command",
                              usuario.Carnet, @"carnet",
                              usuario.Carrera, @"carrera",
                              nil];

[[API sharedInstance] commandWithParams:params
                           onCompletion:^(NSDictionary *json) {
                           }];
[self cargarMateriasDeCarrera:usuario.Carrera];
tbvc3.Manejador = Manejador;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:32:52.730

> 在触发 cellForRowAtIndexPath 方法之前，我该怎么做才能获取该数据。

iOS 是事件驱动的。你不能依赖事物的顺序。你不知道什么时候`cellForRowAtIndexPath`会被调用。所以，当`cellForRowAtIndexPath`被调用时，要么你有数据，要么你没有。如果你不这样做，那么你提供一个填充物，或者什么都不提供。如果你这样做，那么你提供数据。

如果您知道您有数据并且希望*再次*`cellForRowAtIndexPath`被调用，则调用或相关方法之一（例如）。例如，当您获得一行的数据时，您可以在您的完成方法中调用它。*`reloadData``reload...``reloadRowsAtIndexPaths:withRowAnimation:`*

 *在我的书中，我举了一个示例，其中必须下载单元格每一行的图像。起初，每个图像都丢失了。但是当表格视图请求时`cellForRowAtIndexPath`，图像丢失，我们开始下载该图像。当它到达时，我们刷新该行，然后`cellForRowAtIndexPath`再次调用 so，现在我们*确实*有了图像，所以我们提供了图像，它出现在表中：

[http://www.aeth.com/iOSBook/ch37.html#_http_requests](http://www.apeth.com/iOSBook/ch37.html#_http_requests)

完整的可下载示例项目：

[https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/ch37p920downloader/p754p772downloader](https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/ch37p920downloader/p754p772downloader)

您可能可以采用相同的策略。*

# mysql - 连接多个表并产生多条记录

> ID：15734177
> 
> 赞同：1
> 
> 时间：2013-03-31T20:27:52.487
> 
> 标签：mysql

我有 3 张包含信息的表格。

表 1：订单

```
+---------+----------------+------------+--------- ------+
| 订单号 | 订购日期 | 社区 | 状态 |
+-------------------------------------------------- ------+
 1 | 2013 年 3 月 1 日 | S1 | 得到正式认可的
 2 | 2013 年 3 月 5 日 | S2 | 不合格
 3 | 2013 年 3 月 7 日 | Z1 | 得到正式认可的
+-------------------------------------------------- ------+

```

表 2：订购文章

```
+-------------------------------------------------- -----------------+
|订单项| 订单号 | ArtikelID | 单价 | 已交付 |
+-------------------------------------------------- -----------------+
| 1 | 1 | 20 | 5 | 是的
| 2 | 1 | 20 | 5 | 是的
| 3 | 2 | 21 | 10 | 是的
| 4 | 3 | 30 | 50 | 是的
+-------------------------------------------------- ------------------+

```

表3：用户

```
+-------------------------------------------------- ----+
| 用户名 | 用户名 | 社区 | 部门 |
+-------------------------------------------------- ----+
| 1 | 用户1 | S1 | 小号
| 2 | 用户2 | S2 | 小号
| 3 | 用户3 | Z1 | Z
+-------------------------------------------------- ----+

```

我需要一个给出以下输出的 MySQL 查询：

```
+----------------------------------------+
| 部门 | 物品总价
+----------------------------------------+
| 小号 | 20                   
| Z | 50                   
+----------------------------------------+

```

我尝试了 JOIN、SUM、GROUP BY 但没有结果。我遇到的问题是一个订单给出了多篇文章。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:42:52.963

尝试这个

```
 select Department  , sum(UnitPrice) as TotalPriceOfArtikels 
    from users u
    inner join Orders o
    on o.Community = u.Community
    inner join OrderArtickles oa
    on oa.OrderId = o.OrderId
    group by Department 
```

[**在这里演示**](http://sqlfiddle.com/#!2/e4a10/2)

输出：

```
 Department  TotalPriceOfArtikels
        S             20
        Z             50 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:42:10.183

像这样的东西：

```
select us.Department,
sum ( art.UnitPrice ) as TotalPriceOfArtikels
from user us
 left join orders ors
on ( us.Community = ors.Community)
 left join OrderArtickles art
on ( ors.OrderID = art.OrderID)
group by us.Department 
```

------------------已编辑------------------------

我在我的mysql中复制了你的表的相同值和结构，结果很好，它给了我：

```
Department  TotalPriceOfArtikels
    S             20
    Z             50 
```

也许您想检查一个条件，例如 if Deliver = yes 或 status = aprobed??....使用此查询，结果与您发布的结果相同；）

萨卢多斯 ;)

# java - BluetoothServerSocket 不从 accept() 返回

> ID：15734187
> 
> 赞同：3
> 
> 时间：2013-03-31T20:28:29.837
> 
> 标签：java, android, sockets, bluetooth, serversocket

我正在尝试为学校的一个项目构建一个小蓝牙-Android-App。

我对 Android 很陌生（从 2 天起就拿到了我的手机）。两周以来，我一直在笔记本电脑上使用 android 编程进行试验。安装了一个带有 Android x86 (eeepc) 的 VirtualBox，这样我就可以使用`BluetoothAdapter`笔记本电脑了。模拟器不支持蓝牙，速度很慢。那是关于项目...

问题/问题：蓝牙连接有 2 个设备 - 一个正在连接，一个正在监听。监听设备有一个`BluetoothServerSocket`, 循环`accept()`方法直到`accept()`返回一个`BluetoothSocket`. 在我的情况下，该`accept()`方法没有返回，所以我被卡住了，应用程序冻结并出现黑屏，要求 mit 停止应用程序或只是等待。当我将超时传递给`accept()`-->超时后`accept(10000)`我得到一个`IOException`。

听音装置：

```
private class AcceptThread extends Thread {

    private BluetoothSocket tSocket;
    private BluetoothServerSocket bss = null;

    public void run() {
        try {
            Log.d(TAG, "erzeuge ServerSocket");
            bss = BluetoothAdapter.getDefaultAdapter().listenUsingInsecureRfcommWithServiceRecord("BluetoothChatInsecure", MainActivity.BT_UUID);
            Log.d(TAG, "ServerSocket OK");
        } catch (IOException e) {
            e.printStackTrace();
            Log.e(TAG, "Fehler Serversocket");
        }

        while (true)  {

            Log.d(TAG, "Versuche zu akzeptieren");
            try {
                Log.d(TAG, "Akzeptieren Anfang");
                tSocket = bss.accept(10000);
                //this line is never reached
                Log.d(TAG, "Akzeptieren Ende");

                if (tSocket != null){
                    //Hier wollen wir hin!
                    Log.d(TAG, "Verbindung akzeptiert");
                    ConnectedThread conThread = new ConnectedThread(tSocket);
                    conThread.run();
                    bss.close();
                    break;
                } else {
                    Log.e(TAG, "Fehler, keine Verbindung");
                }
            } catch (IOException e) {
                Log.e(TAG, "IOException währent accept-loop");
                //this exception is triggered every 10 sec, when the accept(10000) times out
                e.printStackTrace();
            }   
        }
        Log.i(TAG, "Acceptthread hat fertig");          
    }

} 
```

连接装置：

```
try {
    socket = device.createInsecureRfcommSocketToServiceRecord(MainActivity.BT_UUID);

    outstr = socket.getOutputStream();
    instr = socket.getInputStream();

    ois = new ObjectInputStream(instr);
    oos = new ObjectOutputStream(outstr);

} catch (IOException e) {
    e.printStackTrace();
} 
```

我在 stackoverflow 和其他一些论坛上阅读了很多关于这个主题的主题，但我没有找到解决问题的方法。对不起我的英语，但我不是母语人士。

谢谢你的帮助！

编辑：

我忘了写，我用 2 台设备测试了这个应用程序。我的笔记本电脑确实接受循环，而我使用手机并尝试连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:48:19.763

这只是正常行为：`accept()`将“等待”（阻塞）直到从另一个设备建立连接。然后它返回代表该连接的套接字以进行进一步的数据传输。

如您所见，超时是通过`IOException`. 的约定`accept()`是它永远不会返回`null`但始终是一个有效的套接字，或者失败并抛出异常。

因此，thejh 说您应该有一个专用线程来等待`accept()`.
当`accept()`返回一个新的套接字时，您可能希望生成另一个线程来处理该套接字上的进一步通信，同时`accept()`线程循环以等待下一个连接。

注意：您不能通过 关闭在 IO 中阻塞的线程（如`accept()`）`Thread.interrupt()`，但您必须关闭`ServerSocket`来自另一个线程的线程`IOException`才能“唤醒”被阻塞的线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-04T11:21:32.933

在显示的代码中，您似乎没有`socket.connect()`从客户端调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-01T07:40:51.157

我已经面临这个问题几天了。
最后，我意识到了原因：我在服务器中创建了两次接受传入连接的线程。因此，虽然只是第二次调用了 accept() 方法，但 ServerSocket 被多次创建。
这导致服务器不接受任何连接！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T13:09:10.380

今天我继续做项目。从连接设备连接（）失败后，我得到了 IOException。现在，在运行应用程序之前将它们配对后，我管理这些设备以拥有一个套接字。

编辑：accept() 现在返回一个套接字，但是当用 isConnected() 询问时它没有连接。连接设备的插座已连接。

# mysql - MySQL - 如何获取重复项的相邻字段的总和

> ID：15734189
> 
> 赞同：1
> 
> 时间：2013-03-31T20:28:40.460
> 
> 标签：mysql, duplicates, sum

我想得到每个披萨的总分。因此，例如，焦糖洋葱应该有 12 分，早餐应该有 5 分。

SQLFIDDLE[链接在这里。](http://sqlfiddle.com/#!2/edf32/1/0)这是 MySQL 查询：

```
选择 Pizza_table.name、results_table.first_pick_points 作为积分
从结果表，比萨表
WHERE results_table.first_pick = Pizza_table.id
联盟
选择 Pizza_table.name、results_table.second_pick_points
从结果表，比萨表
WHERE results_table.second_pick = Pizza_table.id
联盟
选择 Pizza_table.name、results_table.third_pick_points
从结果表，比萨表
WHERE results_table.third_pick = Pizza_table.id
联盟
选择 Pizza_table.name，results_table.fourth_pick_points
从结果表，比萨表
WHERE results_table.fourth_pick = Pizza_table.id
联盟
选择 Pizza_table.name、results_table.fifth_pick_points
从结果表，比萨表
WHERE results_table.fifth_pick = Pizza_table.id

```

这些是当前的结果：

```
名称点
焦糖洋葱 5
布法罗翼 5
焦糖洋葱 5
BM² 4
自卫队 4
查科 4
早餐 3
查科 3
芝士面包 3
卡林 2
焦糖洋葱 2
鸡肉培根牧场 2
布法罗翼 1
早餐 1
早餐 1

```

这是我想要返回的：

```
名称点
焦糖洋葱 12
查科 7
布法罗翼 6
早餐 5
BM² 4
自卫队 4
芝士面包 3
卡林 2
鸡肉培根牧场 2

```

如何达到我想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:33:27.643

您将需要使用聚合，但似乎您需要更改查询以`UNION ALL`在每个查询之间使用：

```
select name, sum(points) Total
from
(
  SELECT pizza_table.name, results_table.first_pick_points as points
  FROM results_table
  INNER JOIN pizza_table
    ON results_table.first_pick = pizza_table.id
  UNION ALL
  SELECT pizza_table.name, results_table.second_pick_points
  FROM results_table
  INNER JOIN pizza_table
    ON results_table.second_pick = pizza_table.id
  UNION ALL
  SELECT pizza_table.name, results_table.third_pick_points
  FROM results_table
  INNER JOIN pizza_table
    ON results_table.third_pick = pizza_table.id
  UNION ALL
  SELECT pizza_table.name, results_table.fourth_pick_points
  FROM results_table
  INNER JOIN pizza_table
    ON results_table.fourth_pick = pizza_table.id
  UNION ALL
  SELECT pizza_table.name, results_table.fifth_pick_points
  FROM results_table
  INNER JOIN pizza_table
    ON results_table.fifth_pick = pizza_table.id
) d
group by name
order by total desc 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/882e3/155)。

请注意，我还调整了您的查询以使用 ANSI JOIN 语法 ( `INNER JOIN`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:33:27.073

// 一个简单的 group by 应该做你想做的事：

```
SELECT name, SUM(points) AS points
FROM   table_name
GROUP BY name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T20:34:34.210

您应该在结尾处使用`UNION ALL`with`Group by`子句 - 还添加了`SUM`

工作小提琴：[http ://sqlfiddle.com/#!2/882e3/156](http://sqlfiddle.com/#!2/882e3/156)

```
Select name, SUM(points) From(
SELECT pizza_table.name, results_table.first_pick_points as points
FROM results_table, pizza_table
WHERE results_table.first_pick = pizza_table.id
UNION ALL
SELECT pizza_table.name, results_table.second_pick_points
FROM results_table, pizza_table
WHERE results_table.second_pick = pizza_table.id
UNION ALL
SELECT pizza_table.name, results_table.third_pick_points
FROM results_table, pizza_table
WHERE results_table.third_pick = pizza_table.id
UNION All
SELECT pizza_table.name, results_table.fourth_pick_points
FROM results_table, pizza_table
WHERE results_table.fourth_pick = pizza_table.id
UNION All
SELECT pizza_table.name, results_table.fifth_pick_points
FROM results_table, pizza_table
WHERE results_table.fifth_pick = pizza_table.id) x
Group by name 
```

# php - 不同组架构设置中具有不同角色的用户

> ID：15734191
> 
> 赞同：0
> 
> 时间：2013-03-31T20:29:00.557
> 
> 标签：php, mysql, database, schema, laravel

我即将在 Laravel (4) 中编写一个小游戏社区的代码，并且在弄清楚如何设置数据库表时遇到了一些麻烦。这是它应该如何工作的：

```
Users table:
John
Lisa
Stewie

Groups table:
Team red
Team blue
Team green

Roles table:
Superadmin
Admin
Moderator
Demigod

Permissions table: (describing what permissions each role has)
Superadmin (Total control of everything, will only be me and maybe a buddy with this role.)
Admin (create delete edit forums etc + everything a moderator does)
Moderator (delete forum posts, ban users)
Demigod (some other permissions) 
```

一个用户，比如 Stewie，可以在一个或多个团队中。但他在每支球队中扮演着不同的角色。Stewie - 红队 - 管理员 Stewie - 蓝队 - 版主 + 半神

我想知道如何以一种聪明的方式进行设置？首先想到的是 user_group 数据透视表。但是我如何将其与特定于组 + 用户的角色联系起来？我应该做某种三向数据透视表，还是可以用其他方式设计一个不同的表格设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:33:44.143

你需要一张`membership`像

```
Membership:
- membership_id
- user_id
- group_id 
```

还有一个角色表：

```
Roles:
- membership_id
- role_id 
```

# mysql - 多对多关系。映射错误？

> ID：15734208
> 
> 赞同：0
> 
> 时间：2013-03-31T20:31:09.837
> 
> 标签：mysql, many-to-many, eclipselink, relation

我有一个many2many关系的问题。我使用**MySQL**和**EclipseLink JPA 2**。我已经阅读了很多，但无法弄清楚为什么 Join Table 永远不会更新！我在项目中有更多Many2many Relation，它们运行良好，但无法解决这个问题。任何人都可以告诉我错误是什么。？？？

```
Expediente.java

@JoinTable(name = "expediente_tiene_partepolicial", joinColumns = {
@JoinColumn(name = "PK_IdDelicuente", referencedColumnName = "PK_IdDelicuente")},      inverseJoinColumns = { @JoinColumn(name = "PK_CodParte", referencedColumnName = "PK_CodParte")})
@ManyToMany
private List<PartePolicial> partePolicialList;

PartePolcial.java

@ManyToMany(mappedBy = "partePolicialList")
private List<Expediente> expedienteList; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:45:28.717

确保你正在增加关系的双方。

# python - 简单的 Python UDP 服务器：从 localhost 以外的客户端接收数据包时遇到问题

> ID：15734219
> 
> 赞同：12
> 
> 时间：2013-03-31T20:32:42.107
> 
> 标签：python

因此，我尝试使用的非常简单的代码在这里：[http ://wiki.python.org/moin/UdpCommunication](http://wiki.python.org/moin/UdpCommunication)

（也在这里）：发送：

```
import socket
UDP_IP = "127.0.0.1"
UDP_PORT = 5005
MESSAGE = "Hello, World!"

print "UDP target IP:", UDP_IP
print "UDP target port:", UDP_PORT
print "message:", MESSAGE

sock = socket.socket(socket.AF_INET, # Internet
                 socket.SOCK_DGRAM) # UDP
sock.sendto(MESSAGE, (UDP_IP, UDP_PORT)) 
```

接收：

```
import socket

UDP_IP = "127.0.0.1"
UDP_PORT = 5005

sock = socket.socket(socket.AF_INET, # Internet
                 socket.SOCK_DGRAM) # UDP
sock.bind((UDP_IP, UDP_PORT))

while True:
    data, addr = sock.recvfrom(1024) # buffer size is 1024 bytes
    print "received message:", data 
```

当我在我的计算机上运行这两个应用程序时，代码运行良好。我将发送代码放在我的笔记本电脑上：

```
UDP_IP="IP address for my computer" 
```

其他一切都是一样的。然而，什么也没有发生。我做错了什么？我使用了wireshark并确定正在发送和接收数据包；但是，python 程序没有收到数据包。我很困惑。

任何帮助深表感谢。提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-31T20:36:06.717

尝试绑定到接收端的所有本地接口：

```
sock.bind(("", UDP_PORT)) # could also use "0.0.0.0" 
```

请注意，在接收 UDP 数据包时，操作系统的行为在绑定方面并不完全合乎逻辑（也不是一致的），尤其是对于多播流量。这是你得到的行为：

Linux：绑定到特定 IP 将*过滤*传入的 UDP 数据包，只有针对该特定 IP 的数据包才能通过过滤器。这意味着，例如，当绑定到 IP 192.168.1.100 时，将*不会接收由 IP 192.168.1.100 的接口接收的多播 UDP 数据包。*在 Linux 上，普通绑定不绑定到接口。为此使用 setsockopt(SO_BINDTODEVICE)。绑定到 0.0.0.0（或 Python 上的“”）将始终接收机器在所有接口上接收到的所有 UDP 数据包，而不管目标 IP 是什么，因此这通常是 Linux 上最有用的选项。

Windows：绑定到特定 IP 将绑定到属于该 IP 的接口，就像在 Linux 上的 setsockopt(SO_BINDTODEVICE) 一样。传入的 UDP 数据包不会被此 IP 过滤，因此即使绑定到具体 IP，也可以接收多播流量。（这可能是我第一次觉得 Windows 的行为比 Linux 的行为更一致。）

Python 不会*为*套接字抽象出这些操作系统特定的差异（就像在其他领域所做的那样）。只要您没有明确的理由不这样做，我建议始终绑定到 0.0.0.0。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-23T18:16:10.773

> 最终发现了我的问题，它非常复杂且高度本地化，

我有一个非常相似的问题发生在我身上。我意识到您已经解决了这个问题，但是我认为分享我如何为我解决这个问题会很好。

我发现的问题与我的防火墙设置有关。我发现数据包被 Windows 防火墙阻止了。

我也使用过 Wireshark，它显示正在发送和接收数据包。需要注意的是，Wireshark 抓取数据包的级别比 Python 应用程序低得多。

通过在同一台 PC 上的一个端口上使用侦听器和在另一个端口上的客户端在本地运行我的代码，防火墙不会阻止数据包。当我转向与外部机器交互时，防火墙规则开始发挥作用，阻止传入的数据包。

更改防火墙策略解决了这个问题。更改防火墙以使其发挥作用有多种方法和固有的安全风险，因此我将把这部分留给 IT 专业人员。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T08:43:04.827

确保在尝试执行 `recvfrom`调用时服务器端口已打开。如果套接字读取的目标端口已关闭，那么我们会收到此错误。

我得到了同样的错误并通过阅读这个链接修复了 - [http://www.linuxsa.org.au/mailing-list/2001-04/668.html](http://www.linuxsa.org.au/mailing-list/2001-04/668.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-18T13:54:07.903

因此，如果我想发送消息并接收响应，那么代码会是什么样子？像这样？

```
import socket
UDP_IP = "127.0.0.1"
UDP_PORT = 5005
MESSAGE = "Hello, World!"

sock = socket.socket(socket.AF_INET, # Internet
                 socket.SOCK_DGRAM) # UDP
sock.sendto(MESSAGE, (UDP_IP, UDP_PORT))

sock.bind((UDP_IP, UDP_PORT))

while True:
    data, addr = sock.recvfrom(1024) # buffer size is 1024 bytes
    print "received message:", data 
```

# python - 我得到：“对象不支持项目分配”填充字典时

> ID：15734220
> 
> 赞同：2
> 
> 时间：2013-03-31T20:32:52.167
> 
> 标签：python, csv, dictionary, variable-assignment

我是 Python 和编程的新手，目前正在编写一个脚本，该脚本最终将根据新教的比率在美国地图上为县着色。我遇到了一个让我目瞪口呆的问题，我似乎找不到任何答案。

此代码读取具有以下格式的 csv 文件：

```
2060;6,018888889
2068;169,77
etc... 
```

其中第一项是fips代码，第二项是费率。我想将这些分配给一个字典，以后我可以用它在县地图上着色。以下代码旨在实现这一目标：

```
#populate dictionary with fips and rate from csv file
evanrate = {}

with open(r'C:\Users\Jeroen\documents\hacker1\evanrate.csv') as evanrate:
        parsereader = csv.reader(evanrate, delimiter = ';')
    for row in parsereader:
        fips = row[0]
        rate = float(row[1].replace(',', '.'))

        evanrate[fips] = rate 
```

但是，当我尝试使用代码“evanrate[fips] = rate”填写字典时，出现错误：

```
Traceback (most recent call last):
   File "C:\Users\Jeroen\Documents\hacker1\evanrate.py", line 16, in <module>
    evanrate['fips'] = rate
   TypeError: '_io.TextIOWrapper' object does not support item assignment 
```

我正在使用 Python 3.3 和 Windows 7。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T20:34:39.327

```
# this is a dict 
#   ↓
evanrate = {}                                                # this isn't  --.
                                                             #     ↓         |
with open(r'C:\Users\Jeroen\documents\hacker1\evanrate.csv') as evanrate:  # |
        parsereader = csv.reader(evanrate, delimiter = ';')                # |
    for row in parsereader:                                                # |
        fips = row[0]                                                      # |
        rate = float(row[1].replace(',', '.'))                             # /
        #   ↓---------------------------------------------------------------/
        evanrate[fips] = rate 
```

重命名您的字典或文件。

# c# - IRegistrationConvention 结构映射 TorDependency

> ID：15734222
> 
> 赞同：2
> 
> 时间：2013-03-31T20:32:53.640
> 
> 标签：c#, dependency-injection, structuremap

我需要在扫描仪的 Tor 中发送一个自定义实例。听到是我的代码：

```
public class RunnableScanner : IRegistrationConvention
    {
        private readonly List<Module> modules; 
        public RunnableScanner()
        {
            var config = RegisterModulesConfig.GetConfig();
            modules = config.Modules.ToList();
        }

        public void Process(Type type, Registry registry)
        {
            if (!type.IsAbstract && typeof(IRunnable).IsAssignableFrom(type))
            {
                var module = modules.SingleOrDefault(c => c.Name == type.Name);
                if (module != null)
                {
                    registry.For(typeof (IRunnable)).Use(type).Named(type.Name).CtorDependency<Scheduler>("scheduler")
                    .IsNamedInstance(module.Scheduler + "Scheduler");
                }
            }
        }
    } 
```

该行：

```
registry.For(typeof (IRunnable)).Use(type).Named(type.Name).CtorDependency<Scheduler>("scheduler")             .IsNamedInstance(module.Scheduler + "Scheduler"); 
```

我需要为调度程序（“间隔”属性）设置一个值。

我确实试过这个：

```
var sch = ObjectFactory.GetNamedInstance<Scheduler>(module.Scheduler + "Scheduler");
                    sch.Interval = module.Interval;
                    registry.For(typeof (IRunnable)).Use(type).Named(type.Name).CtorDependency<Scheduler>("scheduler").Is(sch); 
```

但这不起作用，因为我无法在注册表中使用 ObjectFactory。

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:05:33.970

我不是结构图专家，所以也许这不是最好/最优雅/有效的解决方案。

但是以下使用 a 的注册`LambdaInstance`似乎有效

```
registry.For(typeof (IRunnable)).Use(type).Named(type.Name)
        .CtorDependency<Scheduler>("scheduler")
        .Is(new LambdaInstance<Scheduler>(c =>
          {
              var sch = c.GetInstance<Scheduler>(module.Scheduler + "Scheduler");
              sch.Interval = module.Interval;
              return sch;
          })
    ); 
```

# java - Java枚举和具有私有构造函数的类之间有什么区别？

> ID：15734225
> 
> 赞同：63
> 
> 时间：2013-03-31T20:33:26.367
> 
> 标签：java, enums, enumeration

我试图了解 Java 枚举的真正工作原理，我得出的结论是，它与一个普通的 Java 类非常相似，它的构造函数被声明为私有。

我刚刚得出这个结论，它不是基于太多思考，但我想知道我是否错过了什么。

所以下面是一个简单的 Java 枚举和一个等效的 Java 类的实现。

```
public enum Direction {
    ENUM_UP(0, -1),
    ENUM_DOWN(0, 1),
    ENUM_RIGHT(1, 0),
    ENUM_LEFT(-1, 0);

    private int x;
    private int y;

    private Direction(int x, int y){
        this.x = x;
        this.y = y;
    }
    public int getEnumX(){
        return x;
    }
    public int getEnumY(){
        return y;
    }
} 
```

上面和下面的代码在含义上有什么区别？

```
public class Direction{
    public static final Direction UP = new Direction(0, -1) ;
    public static final Direction DOWN = new Direction(0, 1) ;
    public static final Direction LEFT = new Direction(-1, 0) ;
    public static final Direction RIGHT = new Direction(1, 0) ;

    private int x ;
    private int y ;

    private Direction(int x, int y){
        this.x = x ;
        this.y = y ;
    }
    public int getX(){
        return x;
    }
    public int getY(){
        return y;
    }
} 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-31T21:04:04.747

差异：

1.  枚举扩展`java.lang.Enum`并获得了它所有的[优点](http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html)：
    1.  通过正确的序列化实现自动单例行为
    2.  枚举值的自动人类可读`.toString`方法，无需复制您的枚举名称
    3.  `.name`和`.ordinal`特殊用途的方法
    4.  可用于基于位集的高性能`EnumSet`和`EnumMap`类
2.  枚举由语言特别处理：
    1.  枚举使用一种特殊的语法来简化实例的创建，而无需编写数十个`public static final`字段
    2.  枚举可以在`switch`语句中使用
    3.  枚举不能在枚举列表之外实例化，除非使用反射
    4.  枚举不能扩展到枚举列表之外
3.  Java 自动将额外的东西编译到枚举中：
    1.  `public static (Enum)[] values();`
    2.  `public static (Enum) valueOf(java.lang.String);`
    3.  `private static final (Enum)[] $VALUES;`（`values()`返回这个的克隆）

其中大部分都可以用适当设计的类来模拟，但`Enum`只是让创建一个具有这组特别理想属性的类变得非常容易。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-31T20:58:16.063

回答这个问题：本质上，这两种方法之间没有区别。但是， enum 构造为您提供了一些额外的支持方法，例如`values()`,`valueOf()`等，您必须使用 class-with-private-constructor 方法自己编写这些方法。

但是，是的，我喜欢 Java 枚举与 Java 中的任何其他类一样，它们可以有字段、行为等。但对我来说，枚举与普通类的区别在于枚举是类/类型，其实例/成员是预定的。与可以从中创建任意数量实例的通常类不同，枚举仅将创建限制为已知实例。是的，正如您所说明的，您也可以使用具有私有构造函数的类来执行此操作，但枚举只是让这更直观。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-31T20:40:46.833

看看[这个 blogpage](http://boyns.blogspot.nl/2008/03/java-15-explained-enum.html)，它描述了 Java`enum`是如何编译成字节码的。您会看到与您的第二个代码示例相比有一个小的添加，它是一个`Direction`名为的对象数组`VALUES`。该数组包含您的枚举的所有可能值，因此您将无法做到

```
new Direction(2, 2) 
```

（例如使用反射），然后将其用作有效值`Direction`。

另外，正如@Eng.Fouad 正确解释的那样，您没有`values()`,`valueOf()`和`ordinal()`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-31T21:03:34.240

正如人们指出的那样，您输了`values()`，`valueOf()`并且`ordinal()`。您可以使用 a`Map`和 a的组合相当轻松地复制此行为`List`。

```
public class Direction {

    public static final Direction UP = build("UP", 0, -1);
    public static final Direction DOWN = build("DOWN", 0, 1);
    public static final Direction LEFT = build("LEFT", -1, 0);
    public static final Direction RIGHT = build("RIGHT", 1, 0);
    private static final Map<String, Direction> VALUES_MAP = new LinkedHashMap<>();
    private static final List<Direction> VALUES_LIST = new ArrayList<>();
    private final int x;
    private final int y;
    private final String name;

    public Direction(int x, int y, String name) {
        this.x = x;
        this.y = y;
        this.name = name;
    }

    private static Direction build(final String name, final int x, final int y) {
        final Direction direction = new Direction(x, y, name);
        VALUES_MAP.put(name, direction);
        VALUES_LIST.add(direction);
        return direction;
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }

    public static Direction[] values() {
        return VALUES_LIST.toArray(new Direction[VALUES_LIST.size()]);
    }

    public static Direction valueOf(final String direction) {
        if (direction == null) {
            throw new NullPointerException();
        }
        final Direction dir = VALUES_MAP.get(direction);
        if (dir == null) {
            throw new IllegalArgumentException();
        }
        return dir;
    }

    public int ordinal() {
        return VALUES_LIST.indexOf(this);
    }

    @Override
    public int hashCode() {
        int hash = 7;
        hash = 29 * hash + name.hashCode();
        return hash;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final Direction other = (Direction) obj;
        return name.equals(other.name);
    }

    @Override
    public String toString() {
        return name;
    }
} 
```

如你看到的; 代码很快变得非常笨拙。

我不确定是否有办法`switch`用这个类复制一条语句；所以你会失去它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T20:52:17.363

主要区别在于每个`enum`类都隐式扩展`Enum<E extends Enum<E>>`类。这导致：

1.  `enum`对象有这样的方法`name()`和`ordinal()`
2.  `enum`对象有特殊`toString()`的`hashCode()`,`equals()`和`compareTo()`实现
3.  `enum`对象适合`switch`操作员。

上述所有内容均不适用于您的`Direction`课程版本。这就是“意义”的区别。

# .net - 如何在 vb.net 中的图像中创建“洞”

> ID：15734226
> 
> 赞同：1
> 
> 时间：2013-03-31T20:33:26.407
> 
> 标签：.net, vb.net, image, graphics, gdi+

我正在尝试使用代码在我的图像中创建一个洞，例如[http://i1293.photobucket.com/albums/b595/electrogeekguy/fogofwardemo_zps6a6108c8.png](http://i1293.photobucket.com/albums/b595/electrogeekguy/fogofwardemo_zps6a6108c8.png)

这样当我绘制图像时，您可以通过孔看到下面的内容。

下面是我的代码，它在中间创建一个透明的渐变到边缘的纯黑色，但它将我的渐变与底层的黑色混合在一起。

vb.net 或 c# 代码可以帮助我。

我的计划是删除上面图片中的圆圈，然后应用渐变。

```
Private Function FogOfWarUpdate() As Image
    Dim FogOfWarBitmap As Bitmap = New Bitmap(FogOfWarOldImage)
    Dim FogOfWarGraphics As Graphics = Graphics.FromImage(FogOfWarBitmap)
    Dim FogOfWarGraphicsPath As New System.Drawing.Drawing2D.GraphicsPath
    FogOfWarGraphicsPath.AddEllipse(2048, 1024, 500, 500)
    Dim FogOfWarPathGradientBrush As New System.Drawing.Drawing2D.PathGradientBrush(FogOfWarGraphicsPath)
    FogOfWarPathGradientBrush.CenterPoint = New PointF(2048 + 250, 1024 + 250)
    FogOfWarPathGradientBrush.CenterColor = Color.FromArgb(0, Color.Black)
    FogOfWarPathGradientBrush.SurroundColors = New Color() {Color.FromArgb(128, Color.Black)}
    FogOfWarGraphics.FillPath(FogOfWarPathGradientBrush, FogOfWarGraphicsPath)

    'FogOfWarGraphics.DrawEllipse(Pens.BlueViolet, 100, 100, 200, 200)
    FogOfWarPathGradientBrush.Dispose()
    FogOfWarGraphicsPath.Dispose()
    FogOfWarGraphics.Dispose()

    Return FogOfWarBitmap

End Function 
```

# css - CSS 站点导航菜单在 IE7 和 IE8 上消失

> ID：15734229
> 
> 赞同：-1
> 
> 时间：2013-03-31T20:33:34.137
> 
> 标签：css, internet-explorer-8, internet-explorer-7

有人能解释一下为什么这个菜单在 IE7 和 8 上消失了吗？它在 Chrome、Firefox、Opera 和 Safari 上运行良好。IE7 上的页面宽度也发生了变化，中间的 3 列区域变成了 2 列区域。[这是网站链接](http://www.wecare.eu.com/wecare/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:53:43.017

浏览您的网站和 style.css

看起来好像第 187 行是问题所在

你有这个：

```
li#menu-item-29 a, ul#mainmenu-menu li.menu-item-29 a:hover {
    background-image: url("http://wecare.eu.com/images/btnHome.gif");
} 
```

在这里删除 :hover 伪类，只留下**一个**{ ...

而关于中心部分的 3 列中断是因为 IE7 不支持 box-sizing CSS3 属性。因此，您已将每列的宽度设置为 33.3% + 左右填充 15px。在较新的浏览器上，它会导致 box-sizing:border-box 以不同的方式计算盒子大小。

解决方案是为 IE7 和 8 样式表创建条件语句并以不同方式计算宽度。我的建议是这样设置的：

```
width: 29.333%
padding: 0 2% 20px 
```

希望能帮助到你。

# html - nil:NilClass 创建表单的未定义方法“map”

> ID：15734231
> 
> 赞同：1
> 
> 时间：2013-03-31T20:33:44.640
> 
> 标签：html, ruby-on-rails, ruby, map, undefined

我正在尝试为学生创建一个注册，以便能够注册他们可用的部分。但是，当我实际点击创建注册按钮时，我不断收到此错误。当我检查实时外壳时，它说@student == nil 意味着它没有被正确创建？我对如何解决这个问题感到困惑

```
<!---REGISTRATION CONTROLLER-->

def new
    @registration = Registration.new
    @student = Student.find(params[:student_id])
    @info = Section.for_rank(@student.rank).for_age(@student.age).map{|s| ["Name: #{Event.find_by_id(s.event.id).name}, 
        Ranks: #{ s.max_rank == nil ? "#{Student::RANKS[s.min_rank-1][0]} and up" : "#{Student::RANKS[s.min_rank-1][0]} - #{Student::RANKS[s.max_rank-1][0]}"},
        Ages: #{ s.max_age == nil ? "#{s.min_age} and up" : "#{s.min_age} - #{s.max_age}" }", s.id] }
end

def create
    @registration = Registration.new(params[:registration])
    if @registration.save
        redirect_to @registration, :notice => "Successful"
    else
        render :action => 'new'
    end
end

<!----MY REGISTRATION FORM -->

<div class="field">
<%= f.hidden_field :student_id, :value => @registration.student_id %> 
```

```
<div class = "field">
<%= f.select :section_id, options_for_select(@info)%> 
```

```
<div class="actions">
<%= f.submit nil, :class => 'btn btn-mini'  %></th> 
```

```
<!--- MY STUDENT SHOW THAT CALLS THE REGISTRATION -->

<%= link_to 'Register ', new_registration_path(:student_id => @student.id), :class => 'btn btn-mini'  %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:58:38.383

I don't know what the answer to your particular question is, but there is a problem with this method - it's defining presentation in the controller, which is not the controller's responsibility.

Whatever you're trying to do in the `map` block, it's a huge mess. If something goes wrong in there, and I can all but guarantee that it eventually will, it will be unnecessarily difficult to debug. It looks complicated enough that you should probably make a few presenter classes to handle the select options generation, so all you would need to do is something like this:

```
SectionSelectOptions.new(@student).to_options 
```

The `SectionSelectOptions` class might be something like this:

```
class SectionSelectOptions
  attr_reader :student

  def initialize(student)
    raise ArgumentError unless student
    @student = student
  end

  def to_options
    sections.map {|section| SectionOption.new(section, student).to_option }
  end

  private

  def sections
    Section.for_rank(student.rank).for_age(student.age)
  end

end 
```

And the `SectionOption` class:

```
class SectionOption
  attr_reader :section, :student
  def initialize(section, student)
    @section = section
    @student = student
  end

  def to_option
    ["#{name}, #{ranks}, #{ages}", section.id]
  end

  private

  def name
    "Name: #{section.event.name}"
  end

  def ranks
    "..." # I'll let you refactor whatever is going on here
  end

  def ages
    "..."
  end
end 
```

Granted, it's longer than the single line of code that's creating the issue for you, but this has several advantages:

1.  It splits every step into it's own method, so when you're interface changes, you have one place to change it (e.g., it the lookup for sections changes, you just change the `sections` method)

2.  It's testable, either through the public interface or through individual methods

3.  It's easier to debug. You'll now know exactly what's going on when something goes wrong, because your errors will tell you which method to look at.

# client-server - 尝试使用 Boost Asio 创建远程服务器-客户端

> ID：15734233
> 
> 赞同：0
> 
> 时间：2013-03-31T20:33:48.657
> 
> 标签：client-server, boost-asio

我想从 Windows 上运行的应用程序访问一组值/数据。我对这一切都很陌生（具有基本的编程经验），所以现在我发现使用 Boost Asio 应该对我有帮助。我查看了网站上的教程，但它们没有帮助，因为 - 我很难理解代码并且很难想象它的实际作用。

我基本上“应该”做的-

*   在 Windows 机器上编写一个从应用程序获取数据的“服务器”程序（尽管我仍然不清楚我首先是***如何***获取这些数据的，所以我的问题似乎大多是多余的。）
*   在运行 Ubuntu 的单独机器上编写“客户端”程序。客户端程序从服务器获取数据并（现在）显示这些值。这些值基本上是一组位置和旋转（我认为更多细节在这里并不重要）并且必须显示。

我查看了[此处](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/examples.html)给出的示例，但没有描述（正确的）或解释它们实际上做了什么（就像我说的，我很新，所以我需要一些外部帮助才能正确理解所有这些）

我上面写的显然可能不是最好的方法，如果有人可以提出一些更简单/不太复杂的方法，那么我也会感激并进一步研究。

我有一种强烈的感觉，这个问题会被关闭，因为它可能不符合“规定”，但任何人都可以解释/帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:48:19.320

根据您想要做的事情，制作一个成熟的应用程序服务器可能有点矫枉过正。
如果这个“来自在 Windows 上运行的应用程序的值/数据集”可以放在一个文件中，您可以使用 FTP 或 SMB 或 HTTP 或...等共享其目录。

在 linux 端，您可以挂载该目录并像使用本地文件一样使用该文件。

您不需要任何编程技能。

* * *

如果您需要更多按需实时方法，您可以在 Windows 机器上使用网络服务器。如果您请求页面（与请求网页相同），它可以运行脚本（甚至启动应用程序）以使用数据构建文本文件或 JSON/XML 字符串并将其发送回。

这是 webservers 101，有很多教程。程序员不必担心套接字之类的东西：它被抽象出来了。

* * *

为了更好地回答您有关如何从 Windows 应用程序获取数据的问题，我们需要了解有关该应用程序的更多信息。

* * *

关于 Boost::asio：恕我直言，将其视为网络的包装器，具有事件驱动编程的可选功能。懂基本编程的人都可以学，但是上手并不容易，需要一些时间。

# javascript - SyntaxError: Unexpected token / ... Blueimp jQuery 文件上传

> ID：15734235
> 
> 赞同：2
> 
> 时间：2013-03-31T20:34:01.567
> 
> 标签：javascript, json, laravel, blueimp, jquery-file-upload

我在本地机器（mac osx 默认服务器）上设置了这个多文件上传插件（[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)）。一切正常，当我上传图片时，我收到了这个回复

```
[{
"name":"subaru-wrx-poster-i3(1).jpg",      
"size":142583,"type":"image\/jpeg",
"url":"http:\/\/shipwatchpointe.dev\/bundles\/jupload\/uploads\/files\/52\/subaru-wrx-poster-i3%20%281%29.jpg",
"thumbnail_url":"http:\/\/shipwatchpointe.dev\/bundles\/jupload\/uploads\/thumbnails\/52\/subaru-wrx-poster-i3%20%281%29.jpg",
"delete_url":"http:\/\/shipwatchpointe.dev\/upload\/upload\/?file=subaru-wrx-poster-i3%20%281%29.jpg&_method=DELETE",
"delete_type":"POST"
}] 
```

但是，我刚刚推送到 EC2 实例上的暂存区域，现在我收到了此响应

```
// 
```

前端有一个错误，上面写着......

```
SyntaxError: Unexpected token / 
```

我在我能想到的任何地方都扔了一堆骰子，但我没有到达它们并且仍然得到相同的响应。EC2 实例正在运行 Ubuntu 12.10，我确保在 /etc/mime.types 中存在 application/json json，但由于某种原因，它看起来仍在尝试将其呈现为 html 并向我抛出该错误。在我的本地服务器上不存在的暂存服务器上可能存在什么问题？我可以粘贴我的代码，但我怀疑有很多片段可能会导致问题。

**编辑** 这是我本地服务器上的响应标头（工作正常）

```
Accept-Ranges:bytes
Connection:Keep-Alive
Content-Length:1532
Content-Type:image/png
Date:Wed, 03 Apr 2013 18:13:47 GMT
ETag:"30d598-5fc-4d978d09b8a80"
Keep-Alive:timeout=5, max=100
Last-Modified:Wed, 03 Apr 2013 18:13:46 GMT
Server:Apache/2.2.22 (Unix) DAV/2 PHP/5.3.15 with Suhosin-Patch mod_ssl/2.2.22      
   OpenSSL/0.9.8r 
```

这是我的登台服务器上的响应标头（不工作）

```
Connection:Keep-Alive
Content-Encoding:gzip
Content-Length:23
Content-Type:text/html
Date:Wed, 03 Apr 2013 18:07:24 GMT
Keep-Alive:timeout=5, max=100
Server:Apache/2.2.22 (Ubuntu)
Vary:Accept-Encoding
X-Powered-By:PHP/5.3.10-1ubuntu3.6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:42:19.540

[https://github.com/blueimp/jQuery-File-Upload/wiki/Setup](https://github.com/blueimp/jQuery-File-Upload/wiki/Setup)

> 在 PHP 网站上使用 jQuery File Upload（UI 版） 提供的示例实现开箱即用，只需一步即可将其添加到基于 PHP 的网站：
> 
> 下载插件存档，解压缩并将提取的文件夹（您可以重命名）上传到您的服务器。访问上传​​的目录 - 你应该会看到与演示相同的文件上传界面，允许您将文件上传到您的网站。
> 
> 如果上传文件不起作用，请确保 php/files 和 php/thumbnails 目录权限允许您的服务器写入访问权限。

你确定你对 "php/files" 和 "php/thumbnails" 有正确的权限吗？

这些是我能找到的唯一安装说明。您只是将文件复制到服务器还是使用自己的实现？有时从最简单的示例开始会有所帮助，然后再添加内容以排除一些更明显的问题。

如果您更改了代码，这将有助于查看您的更改，那里可能存在导致问题的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T06:27:16.097

此处读取文件可能存在问题。检查/Grep 你的登台服务器是否有任何在奇怪的地方有双斜杠的源文件`//`（比如 PHP 文件的开头）。

它可能会运行到该文件中，错误地打印那些斜线并结束输出。

如果是这种情况，服务器很可能看不到 BlueImp 代码，因此所有那些与上传完全无关的简单输出标头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T23:02:03.807

您的内容类型在本地与网络服务器上看起来不同。看起来它可能是配置不正确的 Web 服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:25:40.490

你的上传文件夹有写权限吗？

# ember.js - 从 API 调用中剥离的前导字符

> ID：15734236
> 
> 赞同：4
> 
> 时间：2013-03-31T20:34:22.193
> 
> 标签：ember.js, ember-data

我正在尝试设置 REST 模型，但遇到一个让我完全困惑的问题：生成的 API 调用似乎删除了模型的第一个字母，因此无法检索数据（出现 404 错误）。

我首先设置商店：

```
App.Store = DS.Store.extend({
    revision: 11,
    adapter: DS.RESTAdapter.reopen({
        namespace: 'api/admin'
    })
}); 
```

然后我设置了一个模型（在 REST 服务上称为“dbx_tables”：

```
App.dbxTable = DS.Model.extend({
    name: "string",
    db_column: "string"
}); 
```

然后是路线：

```
App.DbxRoute = Ember.Route.extend({
    model: function() {
        return App.dbxTable.find();
    }
}); 
```

我已经打开了转换的记录：

```
App = Ember.Application.create({
    LOG_TRANSITIONS: true
}); 
```

所以当我启动应用程序时，它首先转换到“关于”页面，然后我点击到“dbx”视图（我不知道为什么它说，`dbx.index`而不仅仅是`dbx`）：

```
DEBUG: ------------------------------- ember-1.0.0-rc.1.js:339
DEBUG: Ember.VERSION : 1.0.0-rc.1      ember-1.0.0-rc.1.js:339
DEBUG: Handlebars.VERSION : 1.0.0-rc.3 ember-1.0.0-rc.1.js:339
DEBUG: jQuery.VERSION : 1.9.1          ember-1.0.0-rc.1.js:339
DEBUG: ------------------------------- ember-1.0.0-rc.1.js:339
Transitioned into 'about'              ember-1.0.0-rc.1.js:339
Transitioned into 'dbx.index'          ember-1.0.0-rc.1.js:339
GET http://lifegadget-local/api/admin/bx_tables 404 (Not Found) jquery-1.9.1.js:8526 
```

注意`bx_tables`API 调用中的引用。前导的“d”是如何被删除的？我也不确定为什么它使电话多元化，尽管这很容易符合惯例，所以并不真正担心这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-12T02:37:42.633

我遇到过同样的问题。我的问题是：

```
this.get('store').findAll('user'); 
```

需要改为：

```
this.get('store').findAll('User'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:38:35.517

好的，看起来我犯了一个“约定错误”，并且模型缺少大写是导致问题的原因。所以通过切换`App.dbxTable`到`App.DbxTable`我现在已经解决了这个问题。

# c++ - 无法转换 'std::string {aka std::basic_string }' 到 'char' 作为回报

> ID：15734238
> 
> 赞同：2
> 
> 时间：2013-03-31T20:34:33.253
> 
> 标签：c++, string, append

我在函数外返回字符串时遇到问题。之前是否应该进行某种转换？

我正在使用公共`const int val_int[ ]`和`const char* val_rom[ ]`外部课程。

在课堂上：

```
private:
    char* roman;

public:
    char arab2rzym(int arabic) throw (RzymArabException){
        if( arabic < 0){
            throw RzymArabException(arabic + " is too small");
        }
        else if(arabic > 3999){
            throw new RzymArabException(arabic + " is too big");
        }
        std::string roman;

        for(int i=12; i>=0; i--){
            while(arabic>=val_int[i]){
                roman.append(val_int[i]);
                arabic-=val_int[i];
            }
        }
        return roman;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:38:36.017

从逻辑上讲，char 类似于`'a'`or `'1'`，而字符串则为`"a11a"`. 如果您希望它起作用，您希望它做什么？对应的字符`"a11a"`是什么？那么，一个字符对应一个字符数组呢？

要回答这个问题 - 您会收到错误，因为您无法将字符串转换为字符。你如何修复它完全取决于你想要完成什么——很可能你不想返回 a `char`，而是 a `string`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T20:48:42.903

您是否可以将方法的签名更改为：

```
std::string arab2rzym(int arabic) 
```

如果是这样，您可以使用实际需要的字符串。

无论如何，我建议您查看[std::string reference](http://www.cplusplus.com/reference/string/string/)，尤其是[operator[]](http://www.cplusplus.com/reference/string/string/operator%5B%5D/)和 method `c_str()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T20:47:21.113

我认为您应该将方法的签名更改为：

```
std::string arab2rzym(int arabic) 
```

另外，您正在使用您的方法中的 std::string 定义来隐藏私有 char *roman 类变量，我不知道这是否是这里的意图？

顺便说一句，在 C++ 中声明方法抛出哪些异常通常不是一个好主意，就好像您稍后修改代码以抛出不同的异常，而忘记更新“抛出”声明，然后它会调用默认的意外异常处理程序，该处理程序终止程序。一种约定是在方法定义的末尾编写 throws 声明，然后将其注释掉。这样，使用你的方法的人就知道它抛出了什么，但是如果你忘记用声明更新定义，你的程序就不会失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T20:59:26.000

如果您坚持返回字符，有两种解决方案可以做到这一点

首先，声明一个私有的 std::string 变量并通过 c_str 返回它

```
private :
   std::string roman;

char const* arab2rzym(int arabic){
        if( arabic < 0){                
            throw RzymArabException(std::to_string(arabic) + " is too small");
        }
        else if(arabic > 3999){
            throw new RzymArabException(std::to_string(arabic) + " is too big");
        }        

        roman.clear();
        for(int i=12; i>=0; i--){
            while(arabic>=val_int[i]){
                roman.append(val_int[i]);
                arabic-=val_int[i];
            }
        }
        return roman.c_str();

    } 
```

二、将roman声明为静态变量

```
 char const* arab2rzym(int arabic){
    if( arabic < 0){
        throw RzymArabException(std::to_string(arabic) + " is too small");
    }
    else if(arabic > 3999){
        throw new RzymArabException(std::to_string(arabic) + " is too big");
    }
    static std::string roman;
    roman.clear();

    for(int i=12; i>=0; i--){
        while(arabic>=val_int[i]){
            roman.append(val_int[i]);
            arabic-=val_int[i];
        }
    }
    return roman.c_str();

} 
```

最后要提的是，我不认为 RzymArabException(arabic + " is too big"); 可以做你想做的事，你应该在做之前将阿拉伯语转换为字符串

如果你的编译器支持 c++11

```
RzymArabException(std::to_string(arabic) + " is too big"); 
```

如果不

```
RzymArabException((char)(((int)'0')+arabic) + std::string("is too big")); 
```

更好地使用 reinterpret_cast 来转换它

# django - 部署服务器上的静态文件有问题

> ID：15734241
> 
> 赞同：0
> 
> 时间：2013-03-31T20:34:55.053
> 
> 标签：django, apache, .htaccess, web-applications, fastcgi

我似乎无法弄清楚如何让我的 Django 应用程序访问我的静态文件，因为我的应用程序位于我的部署服务器上并且**调试模式已关闭**。

我曾经`python manage.py collectstatic`将所有静态文件收集到我的应用程序之外的目录中，然后将此行添加到我的 .htaccess 中：

```
Alias /static /home1/textbop6/public_html/beta/static 
```

这是我的 settings.py 中的相关代码：

```
STATIC_ROOT = '/home1/textbop6/public_html/beta/static'
STATIC_URL = '/static/'
STATICFILES_DIRS = (
    forwardslash(os.path.join(PROJECT_DIR, 'static')),
) 
```

我不断收到内部服务器错误。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:54:28.027

我想到了。我只需要将我的静态内容移到服务器上我的项目文件夹之外。我最终只是把它放在了根目录中，所以我不需要在我的 .htaccess 中包含那条额外的行（别名...）。

# java - 返回 json 中的 URL 而不是 ArrayList

> ID：15734242
> 
> 赞同：1
> 
> 时间：2013-03-31T20:35:03.160
> 
> 标签：java, json, rest, jersey

我想在 JSON 响应中返回 URL 引用，而不是在 Java 中返回结果 ArrayList。

我知道这是可能的，但我真的忘记了注释（以及库）来做到这一点。我在 Google 上查看了[jackson docs](http://jackson.codehaus.org/)、[jersey docs](http://jersey.java.net/)和繁琐的搜索，但均未成功。

我有这个示例类：

```
@Entity
public class User implements Serializable {

    @Id
    private String uuid;

    //@JsonMissingAnnotation
    private List<Products> products; 
```

我想回来：

```
 "User": {
        "uuid": "1234",
        "products": "http://mydomain/api/users/1234/products" 
    } 
```

我不想返回一个完整的数组列表（这可能是不必要的），我想返回该数组的 URL，并且必须检索产品列表，将 GET 发送到此链接。

我认为这是[Apigee](http://apigee.com/about/api-best-practices)的最佳实践。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T19:20:48.993

我在泽西的[文档](https://jersey.java.net/nonav/documentation/latest/user-guide.html#d4e1196)中找到了答案：

```
@Ref(value="users/${user.uuid}/products",
  condition="${user.products}")
URI productsRef; 
```

这会根据我的需要为列表创建一个 URI，并从 JSON 解析中隐藏列表。

这将产生以下 JSON：

```
"User": {
        "uuid": "1234",
        "productsRef": "http://mydomain/api/users/1234/products" 
    } 
```

.

# java - 如何在jepp中使用python模块？

> ID：15734259
> 
> 赞同：0
> 
> 时间：2013-03-31T20:37:24.733
> 
> 标签：java, python, jepp

我想在我的 python 代码中使用 python 模块。但我认为jepp无法正确处理它。

**例如：**

```
>>>from  sklearn  import  linear_model    
>>>clf  =  linear_model.LinearRegression()    
>>>clf.fit  ([[0,  0],  [1,  1],  [2,  2]],  [0,  1,  2])    
>>>LinearRegression(copy_X=True, fit_intercept=True, normalize=False)    
>>>clf.coef_    
>>>array([ 0.5,  0.5]) 
```

Jepp 似乎在第一行之后永远运行：没有错误消息或异常（我从 eclipse 中使用 jep.eval("script") 调用这些行），但是如果我从 python 解释器“手动”运行它，则代码可以工作。

**如果我以这种方式使用它也不起作用：**

```
>>>import sklearn
>>>clf  =  sklearn.linear_model.LinearRegression()
>>>...same as above... 
```

> 在这种情况下，我收到以下错误消息：“严重：空
> 
> jep.JepException: jep.JepException: : 'module' 对象有
> 
> 没有属性'linear_model'
> 
> 在 jep.Jep.eval(Jep.java:294)
> 
> 在 Main.executeScript（Main.java:72）
> 
> 在 Main.main(Main.java:36)
> 
> 引起：jep.JepException: : 'module' 对象没有
> 
> 属性“线性模型”
> 
> 在 jep.Jep.eval（本机方法）
> 
> 在 jep.Jep.eval(Jep.java:278)
> 
> ……还有 2 个”

**我唯一的模块工作版本是：**

> > > 将 numpy 导入为 np
> > > 
> > > beta = np.array([1, 0.1, 10])

**所以我需要一个解决方案**

*   使用代码：'module.submodule.function'
*   使用导入：'import module.submodule' 并使用代码：'submodule.function'

是否可以？

我在 Ubuntu 12.04 上使用 python 2.7.2 和 jep 2.4。我从 Eclipse 调用上面的代码，在其中设置了这些环境变量：

*   LD_PRELOAD /usr/lib/libpython2.7.so
*   LD_LIBRARY_PATH /usr/local/lib/python2.7/dist-packages/

我知道有更新版本的 jepp 但对我来说很难配置 2.4。太，所以如果没有必要，我不会安装更新的。（因为这对我来说很耗时。我不得不用ucs4编译一个全新的python解释器，将安装的python包从dist-packages复制到site-packages，设置环境变量等等。）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:09:03.273

还有另一个名为 pyro4 的 sourceforge 项目。它可以处理 python 模块，例如：numpy、sklearn……也许它更好，因为它目前正在开发中。（最后一个 jepp 版本于 2010 年发布）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-05T20:34:26.910

查看[https://github.com/mrj0/jep](https://github.com/mrj0/jep)，这就是 JEP 现在所在的位置。而且好像最近更新了。根据该站点，它现在适用于 Python 版本 >= 2.6。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-12T21:52:48.550

我不能代表 JEP 的早期版本，但我能够从 JEP 3.7.1 命令行运行您的脚本。它使用 Python 3.6.5。我也可以在 Java 8 中运行等价物。

C:>jep ....python\python36\Lib\site-packages\jep\console.py"

```
 No readline available. History will not be available.

               For Windows use pyreadline and get it from the official git
               repo on github:
               https://github.com/pyreadline/pyreadline

               Do NOT use the version on pypi.python.org, and therefore
               Do NOT use the version installed by pip.  It is out of date
               and doesn't work with Jep! 
```

`>>>`from sklearn import linear_model <-- JEP 需要几秒钟来处理导入
`>>>`clf = linear_model.LinearRegression()
`>>>`clf.fit ([[0, 0], [1, 1], [2, 2]], [0 , 1, 2])
LinearRegression(copy_X=True, fit_intercept=True, n_jobs=1, normalize=False) <-- JEP 返回
`>>>`clf.fit ([[0, 0], [1, 1], [2, 2 ]], [0, 1, 2])
LinearRegression(copy_X=True, fit_intercept=True, n_jobs=1, normalize=False) <-- JEP 返回
`>>>`clf.coef_array
([0.5, 0.5]) <-- JEP 返回
`>>>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T22:19:03.387

我今天找到了这个[链接](http://weka.wikispaces.com/Using+WEKA+via+Jepp)。

它说：“Jepp 似乎无法导入第三方库，如 scipy、numpy 或 wx（不过可以导入纯 Python 模块）。”

有人可以证实这一点吗？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-07-10T17:16:06.717

Balazs，它确实会导入 3rd-party 库。可以做一个`Jep.eval('import sklearn')`声明。

# c# - 我可以将 C# 输出通过管道传输到 PHP 吗？

> ID：15734260
> 
> 赞同：4
> 
> 时间：2013-03-31T20:37:25.990
> 
> 标签：c#, php, connection

我正在寻找一种在我的 .php 页面中使用我的 C# 程序的方法。我可以想象两种方式：

1.  在服务器中运行 c# .exe，并读取 .php 文件中的输出。
2.  直接在服务器上运行 c# .exe。

而且我不知道是否有可能。如果是这样，如何？

ps：目前我正在使用一个 C# 类，它可以为土耳其语单词产生足够的内容，称为[TurkceEkler](https://code.google.com/p/turkceekler/)。我想要做的是使用它来为我的网站（MySQL）数据库的用户名产生足够的内容，并以某种方式将它传递给我的 php 脚本。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T20:59:35.743

如果您可以将 c# 应用程序作为命令行实用程序运行，则可以使用 exec 函数调用它

```
Exec('myturkishapp.exe -f myfile', $output) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:25:51.597

对于这个特定的示例，看起来 c# 应用程序只有几百行源代码，我可能会建议直接转换为 PHP，因为没有其他方法可以为您提供相同的性能。但是，一般方法（如果您希望扩展）是让服务器运行 c# 应用程序并返回结果。如果您手边没有 Windows 服务器，您可以查看可以在 Apache 上本地运行的 mod_mono：

[http://www.mono-project.com/Mod_mono](http://www.mono-project.com/Mod_mono)

# c++ - 从 Qt 应用程序启动外部程序

> ID：15734261
> 
> 赞同：2
> 
> 时间：2013-03-31T20:37:27.367
> 
> 标签：c++, linux, qt

我正在尝试运行一个程序，让它在 ubuntu 12.04 中启动一个外部 linux 程序。该命令在输入终端窗口时有效，但在 QT 4.8 中将其放入单击按钮对象时似乎无法使其工作。

这是在终端窗口中键入时有效的代码。（它访问网络摄像头并使用覆盖）。我想要做的是每当按下按钮时，它都会拍摄网络摄像头的照片并使用日期和时间作为文件名保存图像）

```
gst-launch-0.10 v4l2src ! video/x-raw-yuv, width=640, height=480  ! timeoverlay halignment=right valignment=bottom shaded-background=true ! clockoverlay halignment=left valignment=bottom text="M/D/Y:" shaded-background=true time-format="%m/%d/%Y %H:%M:%S" ! autovideosink 
```

我正在关注文档 **HOWTO: Start an external program from a Qt application**
[http://www.qtforum.org/article/3079/howto-start-an-external-program-from-a-qt-application.html](http://www.qtforum.org/article/3079/howto-start-an-external-program-from-a-qt-application.html)

但是当我将代码添加到 QT 中的按钮时

```
void runprg2::on_pushButton_clicked()
{
    commandAndParameters<<"gst-launch-0.10 v4l2src ! video/x-raw-yuv, width=640, height=480  ! timeoverlay halignment=right valignment=bottom shaded-background=true ! clockoverlay halignment=left valignment=bottom text="M/D/Y:" shaded-background=true time-format="%m/%d/%Y %H:%M:%S" ! autovideosink";
} 
```

它不编译，我得到错误。本教程正确吗？

查看错误

```
../test3/main.cpp: In function 'int main(int, char**)':
../test3/main.cpp:23:26: error: expected primary-expression before '<<' token
../test3/main.cpp:28:48: error: no matching function for call to 'QProcess::QProcess(QStringList&)'
../test3/main.cpp:28:48: note: candidates are:
/usr/include/qt4/QtCore/qprocess.h:228:5: note: QProcess::QProcess(const QProcess&)
/usr/include/qt4/QtCore/qprocess.h:228:5: note:   no known conversion for argument 1 from 'QStringList' to 'const QProcess&'
/usr/include/qt4/QtCore/qprocess.h:133:14: note: QProcess::QProcess(QObject*)
/usr/include/qt4/QtCore/qprocess.h:133:14: note:   no known conversion for argument 1 from 'QStringList' to 'QObject*'
../test3/main.cpp:31:25: error: no matching function for call to 'QProcess::start()'
../test3/main.cpp:31:25: note: candidates are:
/usr/include/qt4/QtCore/qprocess.h:136:10: note: void QProcess::start(const QString&, const QStringList&, QIODevice::OpenMode)
/usr/include/qt4/QtCore/qprocess.h:136:10: note:   candidate expects 3 arguments, 0 provided
/usr/include/qt4/QtCore/qprocess.h:137:10: note: void QProcess::start(const QString&, QIODevice::OpenMode)
/usr/include/qt4/QtCore/qprocess.h:137:10: note:   candidate expects 2 arguments, 0 provided
make: *** [main.o] Error 1 
```

我不认为发布所有代码是正确的礼仪，所以我只是发布了错误和我遇到问题的按钮代码。我应该发布所有代码吗？

如果这有帮助，这是 main.cpp

```
#include <QtGui/QApplication>
#include "mainwindow.h"
#include <qapplication.h>
#include <qprocess.h>
#include <qstringlist.h>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();

    // Set up the command line which starts the external program as QStringList.
        QStringList commandAndParameters;

        /* Fill in the following things:
         * - Name of program to execute.
         * - Every option needed by the program.
         * Attention: be aware of any strange options you pass to the program, e.g.
         * IP addresses. Quoting these options will usually help.
         */
       // commandAndParameters<<"konqueror"
                         <<"file:/home/thomas";

        /* Create a QProcess instance. It does not matter if it is created on the stack or
         * on the heap. - Ahem, I tested it on Linux only. :-)
         */
        QProcess myProcess(commandAndParameters);

        // Start the QProcess instance.
        myProcess.start();

        /* O.k., everything is fine now, leave the Qt application. The external program
         * will continue running.
         */
        return 0;

    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T21:25:02.153

一些东西：

1.  使用指针创建进程：

    QProcess *process = new QProcess(command, parameters);

2.  `QString`对命令使用 a ，`QStringList`对参数使用 a：

    QString command = "gst-launch-0.10"; QStringList 参数；参数 << "param1" << "param2" << "param3";

3.  启动进程*正常*或*分离*：

    进程->开始（）；进程->startDetached();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T20:55:14.690

你必须有一个命令和一个参数列表，所以它应该类似于

```
commandAndParameters << "gst-launch-0.10" << "v4l2src ! ..." 
```

并且`commandAndParameters`必须在您使用它的地方定义为 QStringList。从您的源代码中，不清楚您在哪里定义变量以及在哪里使用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T20:41:34.633

您粘贴的代码和粘贴的错误似乎不匹配。

# node.js - 通过 cPanel 安装 Node.js

> ID：15734262
> 
> 赞同：0
> 
> 时间：2013-03-31T20:37:29.210
> 
> 标签：node.js, socket.io, cpanel

（我是 Node.js 和 Socket.io 的新手）

我的网站托管在服务器上，我想实现访问者之间的实时通信。例如：聊天

我看过很多关于如何安装 Node.js 并将其与 Socket.io 一起使用的教程，但它们都仅指 localhost。

如何让 Node.js 在我的服务器上运行？我可以通过 cPanel 来完成吗？有没有像终端（我使用的是 Mac）这样的工具来安装它并让它运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:42:37.927

您的主机必须支持 node.js/VPS 服务器。现在已经不多了。最著名的是 nodejitsu、heroku 和[http://aws.amazon.com/ec2/](http://aws.amazon.com/ec2/)

# jquery - 将最后一个选项卡添加到可排序的选项卡式列表

> ID：15734263
> 
> 赞同：2
> 
> 时间：2013-03-31T20:37:29.313
> 
> 标签：jquery, jquery-ui, twitter-bootstrap, knockout.js, knockout-sortable

我正在使用 twitter bootstrap、knockout、knockout-sortable 和 JQuery UI（也是 haml，但与问题无关）。我显示一个选项卡列表，如下所示。它添加了一个带有按钮的最终选项卡。

```
%ul.nav.nav-tabs
  /ko foreach: pages
  %li
    %span{ "data-bind" => "text: name()" }
  / /ko
  %li
    %button.btn
      %i.icon-plus 
```

我正在尝试使选项卡可排序（通过拖动），但我遇到了按钮问题：

```
%ul.nav.nav-tabs{ "data-bind" => "sortable: pages" }
  %li
    %span{ "data-bind" => "text: name()" }
  /%li
  /  %button.btn
  /    %i.icon-plus 
```

我不能使用`/ko sortable: pages`，因为它不起作用（`The binding 'sortable' cannot be used with virtual elements`）。如何使用可排序实现相同的效果（最后一个选项卡是按钮）？虽然无法移动最后一个选项卡/按钮。

答案可能不必是添加一个选项卡，它可能是添加一个出现在选项卡末尾的元素。

**更新：**

JSFiddle：http: [//jsfiddle.net/pbNvz/6/](http://jsfiddle.net/pbNvz/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:20:55.927

[自定义绑定](http://knockoutjs.com/documentation/custom-bindings.html)可以为您完成这项工作，这是更新后的小提琴：

[http://jsbin.com/edopuh/3/edit](http://jsbin.com/edopuh/3/edit)

要从可排序元素中排除任何特定的 li 元素，您可以使用jquery ui 可排序插件的[items](http://api.jqueryui.com/sortable/#option-items)选项，它接受 jquery 选择器。

**更新**

为了在移动项目后做某事，您可以使用可排序的 jquery ui 的[更新事件](http://api.jqueryui.com/sortable/#event-update)。检查这个更新的小提琴，在移动项目后在这个小提琴中你会得到警报：

[更新小提琴](http://jsbin.com/edopuh/8/edit)

# javascript - 如何重写网址以删除问号

> ID：15734265
> 
> 赞同：3
> 
> 时间：2013-03-31T20:37:38.820
> 
> 标签：javascript, php, url, url-rewriting

我有一个查询字符串，它会更改页面的内容，具体取决于用户在 url 中问号后输入的内容。

```
http://mysite.subdomain.com/?3 
```

将加载分配给 ID 3 的内容

```
http://mysite.subdomain.com/?34 
```

加载分配给 34 的内容。

我需要在我的 .htaccess 文件中输入什么，以便当用户访问

```
http://mysite.subdomain.com/1234 
```

它加载如果用户输入将加载的内容

```
http://mysite.subdomain.com/?1234 
```

本质上我想清理 url 并删除问号。谢谢。（我意识到这是一个基本问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:40:16.627

## 无 htaccess

由于您的 javascript 已经处理了 URL 部分，因此您不需要 htaccess。javascript 获取查询字符串，例如`?OdfgzaBv2qY`，删除问号并将剩余`OdfgzaBv2qY`的作为 ID 放入 iFrame。

由于 javascript 正在使用`window.location.search`脚本，因此希望在 URL 中的问号之后设置变量。所以 www.mysite.com/?3 会起作用，但是当您访问 www.mysite.com/3 时它不会，因为它`window.location.search`仍然是空的。

htaccess 没有解决方案的原因是因为 htaccess 正在服务器端处理，而 javascript 正在客户端处理。即使 htaccess 正在工作，并且您被重定向到`index.html?3`javascript，仍然会看到 www.mysite.com/3 URL 而不是最终请求。所以基本上：服务器知道变量在后台设置为 ?3，但 javascript 看到用户看到的内容：没有问号的友好 URL。

## 编辑 - 你可以试试这个：

```
<script type="text/javascript"> 
  //GET DATA FROM URL ...http://www.mysite.com/YOUTUBE_ID 
  var DATA = window.location.pathname.replace("/", ""); 

  window.onload = function() { 
    var YouTube = document.getElementById('YouTube'); 
    YouTube.src = "http://www.youtube.com/embed/" + DATA; 
  }; 
</script> 
```

window.location.pathname 应该采用`/3`并替换`/`. 而 window.location.search`?3`参与其中并替换`?`

## 如果有人需要启动 htaccess

一个基本的 .htaccess 文件是：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /

RewriteRule ^([0-9]+)$ index.php?id=$1 [L]
</IfModule> 
```

当然 index.php?id=1 应该替换为您用来执行请求的任何页面。

一个简短的解释：

*   规则以 ^ 开头，然后在基本 URL 后面查找数值，因此如果您有[http://www.domain.com/42](http://www.domain.com/42)，则规则在最后一个 / 之后开始
*   $ 定义规则正则表达式的结尾。
*   index.php?id=$1 是必须加载的 URL（其中 $1 是参数 1: `([0-9]+)`）
*   [L] 是一个标志“Last”，表示 htaccess 不应该寻找其他适用的规则

请注意，这不适用于[http://www.domain.com/49/](http://www.domain.com/49/) .. 因为末尾的斜线不匹配。这可以通过以下方式完成：

```
RewriteRule ^([0-9]+)/$ $1 [L,R=301]
RewriteRule ^([0-9]+)$ index.php?id=$1 [L] 
```

这首先查看是否有斜杠，如果有则重定向到“无斜杠”url（R=301：重定向 301 = 永久重定向），然后匹配第二条规则并执行请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:39:52.250

试试这个

```
RewriteRule ^([a-zA-Z0-9\-]+)$ index.php?id=$1 [QSA,L,NC] 
```

# jquery - 为什么这个 jQuery 选择器没有选择第 n 列中的所有单元格？

> ID：15734269
> 
> 赞同：2
> 
> 时间：2013-03-31T20:38:11.693
> 
> 标签：jquery

HTML：

```
<table id="table">
    <thead>

    </thead>
    <tbody>
        <tr>
            <td>5</td>
            <td>9</td>
        </tr>
        <tr>
            <td>3</td>
            <td>7</td>
        </tr>
    </tbody>
</table> 
```

jQuery 选择器：

```
$('#table td:nth-child(1)') 
```

返回：

```
<td>5</td> 
```

为什么它不返回`<td>5</td>`AND `<td>3</td>`？我想要整个`nth`（这里是第一个）专栏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:40:12.107

# [*jsFiddle*](http://jsfiddle.net/mohammadAdil/8kcLZ/1/)

```
$('#table td:nth-child(1)').each(function(){
    // <td>5</td> AND <td>3</td>
}); 
```

这只是为了显示选择器返回的元素

你所做的绝对正确，`$('#table td:nth-child(1)')` [请参见此处](http://jsfiddle.net/mohammadAdil/8kcLZ/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:40:53.083

[确实如此。](http://jsfiddle.net/DprSg/)

```
alert($('#table td:nth-child(1)').size()); 
```

所以......也许测试你的代码？：/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:06:30.860

这行得通。对于第一个孩子，我推荐`:first-child`

```
$('#table tr').each(function(){
    $('td:nth-child(1)', this).css( 'color', 'red' )
}); 
```

# arrays - Scilab 自动删除零元素

> ID：15734273
> 
> 赞同：0
> 
> 时间：2013-03-31T20:38:32.107
> 
> 标签：arrays, matrix, zero, scilab

如何避免在数组末尾删除零元素？例如我有一个矩阵（数组）[1,0,1,1,1,0]。当我在函数中找到这个数组作为返回值时，它需要返回我写的内容，但它返回 1 0 1 1 1。如何避免那种自动删除零元素的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:51:51.857

以下示例有效。

```
function [array] = returnCompleteArray()
    array  = [1,0,1,1,1,0];
endfunction

a = returnCompleteArray();

disp(a); 
```

您如何在函数中分配数组？你能提供你的代码吗？

# ruby-on-rails - ruby 方法文件或 file_create 方法返回并且什么都不做

> ID：15734277
> 
> 赞同：-2
> 
> 时间：2013-03-31T20:39:06.340
> 
> 标签：ruby-on-rails, ruby

在我的 Rails 应用程序和 Rails 控制台中，我输入了。

2.0.0p0 :045 > file 'file.txt', %q{contents = ['test']} 它返回这个。

Rake::FileTask foobar.txt => []

我也打字

file_create 'tesfile.txt' 并返回

Rake::FileCreationTask testfile.txt => []

然后我在终端上输入 ls 并且不知道为什么没有创建文件 text.txt 或 testfile.txt 。

我还创建了一个文件 ruby​​test.rb 文件 'file.txt', %q{contents = ['test']} 和 file_create 'tesfile.txt' 然后

输入 rails r ruby​​test.rb 并没有返回任何内容。我在终端上看不到 file.txt 或 testfile.txt

我运行 rails 3.2.12 和 ruby​​ 2.0.0p0

我到处搜索，但仍然很难过。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:47:59.720

试试这个：

```
File.open("file.txt", "w") do |fh|
  fh.puts "test"
end 
```

我认为您无意中偶然发现了 rake[文件](http://rake.rubyforge.org/doc/rakefile_rdoc.html)（滚动到“文件任务”）方法，这不是您想要的。

还要记住`rake`,`rails`和`ruby`都是不同的东西。:) `rake`是`make`用 ruby​​ 编写的克隆 - 通常在您不会使用`rake`.

# php - 随机化文件名

> ID：15734278
> 
> 赞同：-2
> 
> 时间：2013-03-31T20:39:13.577
> 
> 标签：php

**我环顾四周，但在这个话题上找不到任何对我有帮助的东西。**

我正在为我的网站“ [http://uploadifi.com](http://uploadifi.com) ”使用来自 W3SCHOOLS 的 PHP 上传代码的修改版本，但遇到了一个小问题；很多使用它的人都有 macbook，所以当他们截取屏幕截图时，它会将其命名为“图片 1”等等。但是，为了阻止他们重命名文件，他们是否可以随机命名或添加日期？我知道你可以使用 Time() 但我不记得你是怎么做到的。

任何帮助表示感谢，我的代码如下供您查看：

```
<?php
//8 Bits= 1 Byte
//1024 Bytes= 1KB
//1024 KB=1 M8
//1024 MB=1GB
//1024 GB=1TB
$allowedExts = array("gif", "jpeg", "jpg", "PNG", "png","rar","zip");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif") // .gif
|| ($_FILES["file"]["type"] == "image/jpeg") // .jpeg
|| ($_FILES["file"]["type"] == "image/jpg") // .jpg
|| ($_FILES["file"]["type"] == "image/jpg") // .jpg
|| ($_FILES["file"]["type"] == "image/PNG") // .PNG
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "application/x-rar-compressed")
|| ($_FILES["file"]["type"] == "application/zip"))
&& ($_FILES["file"]["size"] < 5242880) //Max size 5MB
&& in_array($extension, $allowedExts))
{
if ($_FILES["file"]["error"] > 0)
{
echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
}
else
{
echo "Upload: " . $_FILES["file"]["name"] . "<br>";
//echo "Type: " . $_FILES["file"]["type"] . "<br>";//Not Needed For Now
echo "Size: " . ($_FILES["file"]["size"] / 1024) . " KB (Do<b> " . ($_FILES["file"]       ["size"] / 1024) . " / 1024</b> **CLOSE BUT NOT ACCURATE**)<br>";

if (file_exists("files/" . $_FILES["file"]["name"]))
  {
  echo $_FILES["file"]["name"] . " already exists. Please change file name and try again. ";
  }
else
  {
  $sanitizedFilename = str_replace(" ","_",$_FILES["file"]["name"]);
  move_uploaded_file($_FILES["file"]["tmp_name"],
  "files/" . $sanitizedFilename);
  echo "Stored in: " . "<a href=\ffiles/" . $sanitizedFilename . "> ". $_FILES["file"]       ["name"] ." </a>";
  echo "<br><b>If the above link does not work; please make sure your uploaded<br>file does not have any spaces in the name.<br> IE 'Hello There' make sure it is 'hellothere'.</b>";
  }
}
}
else
{
echo "Invalid file";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:44:06.853

您可能应该将文件信息存储在数据库中，并使用自动递增的 ID 作为文件名，因为它是唯一的。这具有更好的可维护性的额外好处。您可能还想实现访问控制。以合理的方式执行此操作非常需要数据库。

此外，通过扩展名检查文件类型也不安全。查看文件信息[API](http://www.php.net/manual/en/ref.fileinfo.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:45:58.937

您可以在文件名中使用日期：

```
$sanitizedFilename .= '_'.date('YmdHis'); 
```

甚至使用[microtime](http://www.php.net/manual/en/function.microtime.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T20:46:13.027

我想您的目的是拥有一个唯一的文件名。

最好的方法是使用上传文件的 MD5 哈希。

请在此处找到更多信息：http: [//php.net/manual/en/function.md5-file.php](http://php.net/manual/en/function.md5-file.php)

现在您检查文件是否存在，将取决于实际图像是否已经存在，而不是图像名称是否已经存在。

# arrays - 使用 fwrite() 从指针写入

> ID：15734281
> 
> 赞同：0
> 
> 时间：2013-03-31T20:39:29.323
> 
> 标签：arrays, pointers, sizeof, fwrite, strtok

这个问题被问了很多，但特别是关于包含指针的结构，并没有完全帮助我的情况。我想要做的是 strtok() 第一个也是唯一一个基于“|”的命令行参数 特点。例如，它将类似于：“ls -l | grep ^d | wc -l”。完成后，我想将我标记的项目写入 LOGFILE。这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <string.h>
#include <unistd.h>
#include <errno.h>
#include <signal.h>
void main(void)
{
FILE *logfp =  fopen("LOGFILE", "w");   
char * commands; 
char * container[4];
char commandLine[] = ("test|test2|test3|test4\n");
int i = 0;  
commands = strtok(commandLine, "|");
while(commands != NULL) 
{       
    container[i] = commands; 
    printf("Being stored in container: %s\n", container[i]);    
    i++;  
    commands = strtok(NULL, "|");
}   
printf("This is the size of the container: %d\n", (int)sizeof(container));  
fwrite(container,1,sizeof(container),logfp);
fclose(logfp); 
```

}

指针上的 sizeof() 也返回 8 而不是 char 的正确数量，所以这是另一个问题。除此之外，日志文件中充满了我猜测的指针指向的内存地址。我想将标记化的字符串写入 LOGFILE。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T03:06:55.583

正如您所说，使用 sizeof(container) 只会为您提供指针的大小。无论它指向什么，这将是 8。如果您想获得 char (1) 的大小，可以使用 sizeof(*container) 取消引用指针。但是，这仍然不是您想要的。

您的方法的问题在于，为了一次 fwrite() 所有字符串，它们需要按顺序存储在内存中，而它们不是。唯一按顺序存储的是容器数组中的 char*s。这些指针指向实际的字符串数据，它们都位于完全不同的内存位置。

话虽这么说，解决方案很简单：只需 fwrite() 一次一个字符串。

```
while(commands != NULL) 
{       
    container[i] = commands;
    printf("Being stored in container: %s\n", container[i]);

    //Write one string, using strlen() to calculate the length
    fwrite(container[i], 1, strlen(container[i]), logfp);

    i++;  
    commands = strtok(NULL, "|");
} 
```

但请记住，这些字符串将全部混合在一起。除非您在它们之间显式添加空格或换行符，否则该文件将看起来像“testtest2test3test4”。

# php - 通过反射访问 SplObjectStorage 数据

> ID：15734282
> 
> 赞同：4
> 
> 时间：2013-03-31T20:39:34.650
> 
> 标签：php, reflection, spl

`SplObjectStorage`是否可以使用反射或其他方法访问数据？当我使用`print_r`它时，我可以看到有一个私有属性`$storage`，其中包含一个包含所有数据的数组，但我无法以任何方式使用反射访问它。是否有其他可能的解决方案来获取数据而不用迭代集合`foreach`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T13:41:22.630

无法`$storage`通过反射访问该属性，因为*它不存在*。

当您在类上调用`print_r`（或`var_dump`）时看到的是*调试信息*。此信息是通过[`get_debug_info`](http://lxr.php.net/xref/PHP_5_5/ext/spl/spl_observer.c#spl_object_storage_debug_info)类的内部处理程序提供的。此处理程序允许内部类在不定义实际属性的情况下显示有意义的调试信息。

一个与切线相关的问题显示以下代码段：

```
$r = new ReflectionClass('DateTime');
var_dump($r->hasProperty("timezone")); 
```

上面的代码将告诉您该类没有`timezone`属性，即使您可以访问对象的`timezone`属性`DateTime`。原因是该属性未*声明*，它仅通过内部[`get_properties`](http://lxr.php.net/xref/PHP_5_5/ext/date/php_date.c#date_object_get_properties)处理程序提供。再一次，这是一个不被设计为直接访问的属性，它只存在于 a) 提供有意义的调试输出和 b) 指定当对象被序列化时应该序列化的内容。

总而言之：反思内部类的“属性”通常不会奏效，因为这些属性通常实际上并不存在。

# android - Android WebView - 是否可以拦截 target="_blank" 链接

> ID：15734296
> 
> 赞同：1
> 
> 时间：2013-03-31T20:41:08.720
> 
> 标签：android, android-webview

只有在设置了 target="_blank" 的情况下，我才能让我的 WebView 拦截链接？

我知道 shouldOverrideUrlLoading() 方法，但是如果链接设置了 target="_blank" ，那并没有给我信息。问题是，仅凭 url 我无法区分链接，我想拦截。我需要知道是否设置了 target="_blank"。

有办法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T10:23:15.213

我也想看到一个检查的解决方案`target="_blank"`，但我认为，这是不可能的（除非可能有一些讨厌的 JavaScript 注入黑客）

将额外的参数（例如`?oib=1`）附加到 URL 并签入要简单得多`shouldOverrideUrlLoading`：

```
public boolean shouldOverrideUrlLoading(WebView view, String url) {
    if (url.contains("oib=1")) {
        view.getContext().startActivity(
                new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
        return true;
    } else {
        return false;
    }
} 
```

为此，您当然需要控制链接。如果你有很多这样的链接，你可以编写一个 JavaScript 函数来为你工作：

```
jQuery('a[target="_blank"]').attr('href', function(i, h) { 
    return h + (h.indexOf('?') != -1 ? '&oib=1' : '?oib=1');
}); 
```

# java - EDT 特定方法和其他内容

> ID：15734302
> 
> 赞同：0
> 
> 时间：2013-03-31T20:41:41.597
> 
> 标签：java, swing, event-dispatch-thread

我对了解摇摆和 EDT 的探索再次继续……

由于 EDT 是唯一的 EDT，我现在想知道哪些方法、构造函数和任何其他东西应该在 EDT 中完成。我知道一般规则，几乎所有创建或与 Swing 组件交互的代码都必须在事件调度线程上运行，但这是非常普遍的。也有人说任何非线程安全的摇摆代码都应该在 EDT 上执行。但我仍然无法分辨哪些方法是线程安全的，哪些不是。

我的问题是，是否有最终将在 EDT 上排队的命令列表？（我这么说是因为您不必从 EDT 调用 repaint()，但它会在它上面执行，而且永远不会少）。

如果我知道我的方法将在哪里执行（并且我可以估计相对于其余代码的时间），我可以编写更有效和更易于理解的代码。

到目前为止，我的大部分 EDT 工作都是在黑暗中进行的，因此编写了错误的代码，然后，当我无法弄清楚时，通常会惹恼这里的人。

那么是否有一个列表，也许是我错过的 Javadocs 中的某些内容？也许一些更具体的规则（例如，如果方法的名称中有一个“e”，它必须在特定的 EDT 类型上执行）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:27:58.953

*   没有什么复杂、奇怪或神秘的东西，EDT 一直存在，直到所有事件都完成，

*   如果 EDT 中的所有事件都已完成，则 SwingUtilities.isEventDispatchThread() 总是返回 false

*   注意鼠标和键事件可以为 EDT 生成一个新事件（一些 JComponents 在内部对这些事件做出反应，在 API 中实现的通知器向 EDT 触发一个新事件，然后 EDT 是活动的，例如容器中的 JButton 并且没有来自 ButtonModel 的焦点触发事件，对 Java6 有效，在 Win7 和更高版本中永远不会），是否添加了 XxxListener 无关紧要，必须在没有的情况下进行测试

*   invokeLater() 使用 Thread.sleep(int) 在所有情况下都存活 EDT，不包括冻结

*   Thread.sleep(int) 可能导致在 sleep() 期间丢失所有事件，或者 Swing GUI 仅在 Mouse_Hover_Over 上刷新

编辑

*   在 Java7 中可以创建[SecondaryLoop](http://docs.oracle.com/javase/7/docs/api/java/awt/SecondaryLoop.html)，但我错过了这个接口的真正原因，因为所有事件仍然必须在 EDT 上完成，可以在 Java1.4 中创建与 Java7 相同的多线程

*   在 Java7 中，一些线程安全的方法与 WinXP 上的 Java6 的 MetalLookAndFeel 相比不是线程安全的

# solr - SolrEntityProcessor 只为子实体调用一次

> ID：15734308
> 
> 赞同：2
> 
> 时间：2013-03-31T20:42:41.650
> 
> 标签：solr, dataimporthandler

我正在使用 Solr 4.2，并且试图将[SolrEntityProcessor](http://wiki.apache.org/solr/DataImportHandler#SolrEntityProcessor)称为**sub-entity**。到目前为止，仅对 Solr 进行了一次调用，并且对单个文档进行了索引，而忽略了所有其他文档。这*应该*是可能的，但它似乎不起作用......有什么想法吗？

代码剪辑师：

```
<document>
  <entity dataSource="psql" name="user" query="SELECT * FROM users";>
    <field column="id" name="user_id" />

    <entity name="liked_items" processor="SolrEntityProcessor" url="http://localhost:8983/solr/items" query="user_liking_this:${user.id}" rows="1000" fl="item_id" >
      <field column="item_id" name="item_id" />
    </entity>

  </entity>
</document> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:47:12.130

我刚刚在[这个 Solr JIRA 问题](https://issues.apache.org/jira/browse/SOLR-3336)中找到了答案。经过测试并按预期工作！

解决方案是使用`SolrEntityProcessor` [附加到问题](https://issues.apache.org/jira/secure/attachment/12526721/SolrEntityProcessor.java)的修补程序，而不是 DataImportHandler JAR 中包含的修补程序。

请注意，**任何 Solr 版本（包括 4.3.0（可能更高））都需要它**- 尽管问题状态和评论说什么，补丁似乎不包含在任何现有版本中。

# python - 使用 print 时，如何为我的对象提供更有用的字符串表示？

> ID：15734315
> 
> 赞同：0
> 
> 时间：2013-03-31T20:43:17.610
> 
> 标签：python, class, printing, dictionary

我正在制作一个名为 makeTrigger 的函数，它需要一个 in 变量并更新一个字典，但我遇到的问题是我试图访问 dict 中的一个 obj，而我用 str() 得到了这个：

```
<ps6.SubjectTrigger object at 0x101d36fd0> and <ps6.TitleTrigger object at 0x101dbc0d0> 
```

是什么让它打印这个：

```
SubjectTrigger('world') and TitleTrigger('Intel') 
```

我应该用什么来正确打印它。这是我要访问的字典：

```
{'t1': SubjectTrigger('world'), 't2': TitleTrigger('Intel'), 't3': PhraseTrigger('New York City')} 
```

我正在尝试访问 t1 和 t2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:36:06.650

这个问题肯定是重复的。
–––––––</p>

要更改对象的表示，您必须在对象的类定义中创建一个方法

```
class MyClass:

    def __repr__(self):
        return "Hello ,this is a test" 
```

这

```
__repr__ 
```

方法返回一个字符串，打印函数将使用该字符串来表示对象，因此如果您创建一个 MyClass 对象然后打印它，输出将是

你好，这是一个测试

注意：
这个方法没有实现 str(MyClass()) ；为此，您必须创建另一种方法

```
__str__ 
```

# c++ - 在 MS VS 中禁用 #DEN 后缀

> ID：15734316
> 
> 赞同：0
> 
> 时间：2013-03-31T20:43:23.190
> 
> 标签：c++, visual-studio-2008

我在我的代码中使用一些小（双）数字，我需要在调试期间查看 GUI 中的所有有效数字。手动打印时，我可以在终端窗口中看到它们：

```
printf("%*.16e ",value); 
```

输出：

```
1.1743571567901844e-309 
```

但是，在使用 MS Visual Studio 2008 进行调试期间，使用 GUI 将鼠标悬停在变量名称上（或在监视列表中查看），添加的 #DEN 后缀会阻碍查看最低有效位：

```
1.174357156790e-309#DEN 
```

有没有办法禁用它，或者我是否坚持为所有内容编写 printf 语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:47:05.053

我不确定这是否可行，但您可以尝试在 Watch 或 QuickWatch 窗口中使用`e`、`f`或`g` [格式说明符之一。](http://msdn.microsoft.com/en-us/library/75w45ekt%28v=vs.80%29.aspx)例如，尝试在 Watch 窗口的一行中输入以下内容：

```
value,f 
```

但是，这绝对不适用于将鼠标悬停在源代码中的变量上。

# mysql - 无法正确形成 MySQL 查询（或子查询）

> ID：15734317
> 
> 赞同：0
> 
> 时间：2013-03-31T20:43:29.527
> 
> 标签：mysql

我有一个似乎无法正确执行的 SQL 查询。表不是很复杂。我拥有的字段是名称和 2 个 FacebookUserID。我正在进行推荐比赛。第一个 FbookUId 是参加比赛的人的 ID，推荐 ID 是推荐他们的用户的 ID。我想选择每个主要的 fbookUID 并计算该人负责的推荐次数。这是我尝试过的查询：

我进行了更新：这是我创建的一些简单示例数据：

```
INSERT INTO facebookContest
(name, FacebookID, FacebookReferalID)
VALUES
('Joe', '10', '1'),
('Sam', '20', '5'),
('Mary', '30', '20'),
('Jim', '40', '20'),
('Mike', '50', '100'),
('Bob', '60', '100'); 
```

我的查询：

```
SELECT name, FacebookID, COUNT(FacebookReferalID) FROM facebookContest GROUP BY FacebookReferalID 
```

这是我的查询结果，这显然是不正确的：

```
NAME    FACEBOOKID  COUNT(FACEBOOKREFERALID)
Joe 10  1
Sam 20  1
Mary    30  2
Mike    50  2 
```

Mary 和 Mike 没有任何推荐人，但每人获得 2 人的信用。我想在我的查询中返回每个唯一的 Facebook ID。6 个中只有 4 个被退回。

```
SELECT *, COUNT (FacebookReferalID) FROM facebookContest GROUP BY FacebookID 
```

我想我可能需要一个子查询，但我不是一个 SQL 专家来把它放在一起。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:55:58.917

我认为您的查询没有任何问题：[http ://sqlfiddle.com/#!2/327b7/4/0](http://sqlfiddle.com/#!2/327b7/4/0)

这不正是您需要的吗？

# android - Android - 一次从网络获取位置

> ID：15734318
> 
> 赞同：0
> 
> 时间：2013-03-31T20:43:30.183
> 
> 标签：android, gps, location

我有点卡在这里..基本上我正在尝试获取用户的邮政编码位置。我有从 GPS 坐标获取 ZIP 的代码，但我似乎无法获取任何坐标。这是我到目前为止的代码 -

```
Log.d(TAG, "Zip is going to be autoset");
new Thread() {
    public void run() {
        LocationManager locationManager;
        String provider;
        // Get the location manager
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        // Define the criteria how to select the locatioin provider -> use
        // default
        LocationListener locListener = new LocationListener() {
            @Override
            public void onStatusChanged(String provider, int status, Bundle extras) {
            }
            @Override
            public void onProviderEnabled(String provider) {
            }
            @Override
            public void onProviderDisabled(String provider) {
            }
            @Override
            public void onLocationChanged(Location location) {
            }
        };

        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locListener);
        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_COARSE);
        criteria.setAltitudeRequired(false);//true if required
        criteria.setBearingRequired(false);//true if required
        criteria.setCostAllowed(false);
        criteria.setPowerRequirement(Criteria.POWER_LOW);
        provider = locationManager.getBestProvider(criteria, true);//search for enabled provider
        //locationManager.requestSingleUpdate(criteria, locListener, null);
        Location location= locationManager.getLastKnownLocation(provider);
        Log.d(TAG,"Lat - " + (location.getLatitude()) + " long - " + (location.getLongitude()));
        latitude = (location.getLatitude());
        longitude = (location.getLongitude());
        Log.d(TAG, "Passing this link https://maps.googleapis.com/maps/api/geocode/xml?latlng="+latitude+","+longitude+"&sensor=true");
        locationManager.removeUpdates(locListener);
        try {
        //Log.d(TAG, "Trying to access "+ "https://maps.googleapis.com/maps/api/geocode/xml?latlng="+location.getLatitude()+","+location.getLongitude()+"&sensor=true"
            //Log.d(TAG, "Trying to access "+ "https://maps.googleapis.com/maps/api/geocode/xml?latlng=40.714224,-73.961452&sensor=true");
            URL url = new URL("https://maps.googleapis.com/maps/api/geocode/xml?latlng="+latitude+","+longitude+"&sensor=true");
            InputStream stream = url.openStream();
            BufferedInputStream buf = new BufferedInputStream(stream);
            StringBuilder sb = new StringBuilder();
            while (true){
                int data = buf.read();
                if (data==-1){
                    break;
                }else{
                    sb.append((char)data);
                }
            }
            int zipEnd = sb.indexOf("</short_name><type>postal_code");
            Log.d(TAG,"ZIP is "+sb.substring(zipEnd-6, zipEnd));
            ZipCode = Integer.parseInt(sb.substring(zipEnd-6, zipEnd));
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}.run(); 
```

我收到的最新错误说我无法在尚未调用 looper.prepare 的线程内创建处理程序。

我只需要一次粗略的位置更新（网络位置将是完美的），这样我就可以从中获取邮政编码。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:51:01.497

研究使用[地理编码器](http://developer.android.com/reference/android/location/Geocoder.html#getFromLocation%28double,%20double,%20int%29)

创建地址列表，然后使用[getPostalCode()](http://developer.android.com/reference/android/location/Address.html#getPostalCode%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T00:00:20.083

而不是`new Thread()` 换成新的`Thread(new Runnable()`

```
new Thread(new Runnable()
{   

    @Override
    public void run()
    {
        Looper.prepare();

        // The rest of your code in between 
        // LocationManager locationManager;
        // and 
        // catch (IOException e) {
        // e.printStackTrace();
        // }

        Looper.loop();
    }
}).start(); 
```

# javascript - 如何检查数组索引是否存在？

> ID：15734320
> 
> 赞同：22
> 
> 时间：2013-03-31T20:44:01.657
> 
> 标签：javascript

我正在尝试通过以下方式（仅举例）检查 TypeScript 中是否存在数组索引：

```
var someArray = [];

// Fill the array with data

if ("index" in someArray) {
   // Do something
} 
```

但是，我收到以下编译错误：

> in 运算符要求左操作数为 Any 类型或 String 原始类型，右操作数为 Any 类型或对象类型

有谁知道这是为什么？据我所知，我正在尝试做的事情对 JS 来说是完全合法的。

谢谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-31T20:52:24.230

正如评论所指出的，您正在混合数组和对象。数组可以通过数字索引访问，而对象可以通过字符串键访问。例子：

```
var someObject = {"someKey":"Some value in object"};

if ("someKey" in someObject) {
    //do stuff with someObject["someKey"]
}

var someArray = ["Some entry in array"];

if (someArray.indexOf("Some entry in array") > -1) {
    //do stuff with array
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-31T20:51:32.607

**[jsFiddle 演示](http://jsfiddle.net/c9VEp/)**

像这样使用`hasOwnProperty`：

```
var a = [];
if( a.hasOwnProperty("index") ){
 /* do something */  
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-01T15:46:20.147

您还可以使用 findindex 方法：

```
var someArray = [];

if( someArray.findIndex(x => x === "index") >= 0) {
    // foud someArray element equals to "index"
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-01T13:35:16.583

一行验证。最简单的方法。

```
if(!!currentData[index]){
  // do something
} 
```

输出

```
var testArray = ["a","b","c"]

testArray[5]; //output => undefined
testArray[1]; //output => "b"

!!testArray[5]; //output => false
!!testArray[1]; //output => true 
```

# regex - 正则表达式可选匹配行首/行尾

> ID：15734322
> 
> 赞同：3
> 
> 时间：2013-03-31T20:44:18.867
> 
> 标签：regex

如何选择匹配正则表达式中行的开头`^`或结尾？`$`

例如：

`/(?<=[\s\^])/`不匹配以空格字符或行首开头。

我的问题是在 PHP 中匹配以下内容。

```
$str = '**bold** **bold** **bold**';
echo preg_replace('/(?<=\s|^)\*\*(.+?)\*\*(?=\s|$)/', '<strong>\\1</strong>', $str); 
```

我的边缘情况在字符串的开头和结尾都是粗体，没有被匹配。我在其他变体中遇到的一些边缘情况是在字符串内匹配、匹配星号链以及无数其他问题。

```
echo preg_replace('/(?<=^|\s|\>)[\*]{2,}(?=[^\s\*])(.+?)(?<=[^\s\*])[\*]{2,}(?=\s|\<|$)/', '<strong>\\1</strong>', $str); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T20:53:10.813

如果您坚持在**空白字符**或**行**首之后进行匹配，请使用[交替](http://www.regular-expressions.info/alternation.html)（而不是[字符类](http://www.regular-expressions.info/charclass.html)）。假设您的正则表达式风格支持后[向断言](http://www.regular-expressions.info/lookaround.html)中的交替。

```
/(?<=\s|^)\w+/m 
```

但可能您正在寻找一个[单词边界](http://www.regular-expressions.info/wordboundaries.html), `\b`。它们匹配单词的开头或结尾（确切地说是从单词字符变为非单词字符或相反）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:45:29.440

只需卸下锚。如果没有锚，正则表达式将匹配您正在搜索的字符串中的任何位置。

# java - 比较法违反其一般合同重叠条件

> ID：15734324
> 
> 赞同：0
> 
> 时间：2013-03-31T20:44:29.360
> 
> 标签：java

我陷入了java抱怨比较方法错误的异常。

规则如下：我定义了一个名为 match 的类。想象一下搜索 2 个序列以找到相同的子字符串。如果存在 2 个相同的子字符串，则称其为匹配项。分数是子字符串的长度，seq1/2 开始/结束标记 2 个子字符串的开始和结束位置。目标是选择最长的子字符串匹配。如果两场比赛得分相同，我将选择两个序列中较早开始的一场比赛。否则，我通过使它们彼此相等来忽略其余部分。

这是错误的代码：

```
public class CompareMatch implements Comparator<match>{
    @Override
    public int compare(match o1, match o2) {
    if(o1.score>o2.score)   return -1;
    if ((o1.score==o2.score)&&((o1.seq1start<o2.seq1start)&&(o1.seq2start<o2.seq2start))) 
        return -1;
    if((o1.score==o2.score)&&!((o1.seq1start<o2.seq1start)&&(o1.seq2start<o2.seq2start)))
        return 0;
    return 1;
    }
} 
```

匹配类也定义如下：

```
public class match {
    public int seq1start;
    public int seq1end;
    public int seq2start;
    public int seq2end;
    public int score;
    } 
```

有人可以帮我找出比较逻辑的哪一部分是错误的吗？我一定是重叠了其中一个条件。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:57:28.643

像这样重写它怎么样？这种方式应该更清楚——首先比较重要的组件，然后比较不重要的组件。

另外，我认为，为了使函数遵守合同，你需要有一个传递排序条件，我认为你的想法不是那样的。

试试这个：

```
// first compare scores
if (o1.score>o2.score) return -1; /* higher score for o1 -> o1 */
if (o1.score<o2.score) return 1; /* higher score for o2 -> o2 */

// scores are equal, go on with the position
if (o1.seq1start+o1.seq2start < o2.seq1start+o2.seq2start) return -1; /* o1 is farther left */
if (o1.seq1start+o1.seq2start > o2.seq1start+o2.seq2start) return 1; /* o2 is farther left */

// they're equally good
return 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:00:26.270

您的代码违反了以下[API](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)规则：

> 实现者必须确保所有 x 和 y 的 sgn(compare(x, y)) == -sgn(compare(y, x))

如果 compare(a,b) 在此处返回 -1：

```
if ((o1.score==o2.score) &&((o1.seq1start<o2.seq1start)&&(o1.seq2start<o2.seq2start))) 
    return -1; 
```

然后 compare(b,a) 将在此处返回 0：

```
if((o1.score==o2.score)&&!((o1.seq1start<o2.seq1start)&&(o1.seq2start<o2.seq2start)))
    return 0; 
```

这是违反规则的。

# html - 将一个图像垂直和水平居中在另一个图像下方 CSS

> ID：15734325
> 
> 赞同：0
> 
> 时间：2013-03-31T20:44:30.247
> 
> 标签：html, css

使用以下 css/html 我在屏幕上显示了我的徽标死点。

```
img.alignmiddle {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    margin: auto;
} 
```

HTML：

```
<a href="http://www.abc.com/home"><img class="alignmiddle" src="abc.png"></a> 
```

我现在想在主图像下方添加两个 img 按钮（登录和注册）。我希望这两个图像并排出现，在主图像下方居中。有人可以帮我写代码吗？

例如

```
 M A I N    I M A G E

                               Login   Register 
```

希望这是有道理的，感谢你们都是忙碌的人，非常感谢任何帮助！

伊基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:49:44.083

将它们包裹在 a`<div/>`或其他内容中：

```
<div id="buttons">
    <a href="#login">Login</a>
    <a href="#trg">Register</a>
</div> 
```

然后使用这个CSS：

```
#buttons {
    wdth: 200px; /* change to whatever fits */
    margin: 0 auto; /* with a given width this centers a display:block element */
} 
```

如果您想将整个事物水平**和**垂直居中，我会执行以下操作：

首先，将所有内容包装在一个`<div/>`：

```
<body>
    <div>
        <div id="home">
            <a href="#">
                <img src="logo.png"/>
            </a>
        </div>
        <div id="buttons">
            <a href="#" id="login">Login</a>
            <a href="#" id="register">Register</a>
        </div>
    </div>
</body> 
```

现在，我假设您知道按钮的比例。例如，我的徽标是 200x100 像素，我的按钮是 145x90 像素，`margin`两者之间有 10 像素。现在，我的包装器具有最大宽度和高度：

```
body > div {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 300px; /* 145 + 10 + 145 */
    height: 200px; /* 100 + 10 + 90 */
    margin-top: -100px;
    margin-left: -150px; /* width * -0.5 */
} 
```

然后，我在每一行周围使用了另一个包装器。如果你绝对确定比例不会改变，你可以不用，但对于这个例子，我认为你需要更加灵活。首先，我们使两个内部包装器水平居中：

```
body > div > div {
    margin: 0 auto;
} 
```

这仅适用于给定的`width`。所以给他们一个大小：

```
#home {
    width: 200px;
    height: 100px;
    margin-bottom: 10px;
}

#buttons {
    width: 300px;
    height: 90px;
} 
```

这是基本的。你现在有一个外包装，它使整个东西在两个方向上居中，内包装水平居中，尽管它们的宽度。例如：如果您的按钮只有 120x90 像素，请将 of 更正`width`为`#buttons`120 + 10 (margin) + 120 = `250px`。

其余的很简单：

```
#login, #register {
    float: left;
    width: 145px;
    height: 90px;
}

#login {
    margin-right: 10px;
} 
```

这是一个将所有东西聚集在一起的[小提琴。](http://jsfiddle.net/2BVMj/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:52:46.050

像这样？

[http://jsfiddle.net/VqmeG/](http://jsfiddle.net/VqmeG/)

基本上它只是

```
text-align: center 
```

# java - 如何从 Java 发送带有自定义字段的推送通知？

> ID：15734328
> 
> 赞同：5
> 
> 时间：2013-03-31T20:44:43.393
> 
> 标签：java, ios, notifications, push, coronasdk

我正在尝试从 Java 服务器向我们基于 Corona 的移动客户端发送推送通知。我想在通话中有自定义字段。

我正在使用以下（javapns 库）

```
String rawJSON = "{\"aps\": {\"badge\": 10,\"alert\": \"test\",\"sound\": \"cat.caf\"},\"custom\":{\"id\":8}}";
PushNotificationPayload payload = PushNotificationPayload.fromJSON(rawJSON); 
```

这是我在上面发送的 json：

```
{
   "aps":{
      "badge":10,
      "alert":"test",
      "sound":"cat.caf"
   },
   "custom":{
      "id":8
   }
} 
```

由于某种原因，它没有到达自定义字段。

任何人都可以帮我举一个需要发送的json的例子吗？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:57:36.773

你可以使用

```
PushNotificationPayload payload = PushNotificationPayload.complex();

payload.addAlert("Hello World!");
payload.addCustomDictionary("mykey1", "My Value 1");
payload.addCustomDictionary("mykey2", 2); 
```

完全按照[javapns的指示](https://code.google.com/p/javapns/wiki/PushNotificationAdvanced)

# java - 带 LWJGL 的黑屏

> ID：15734329
> 
> 赞同：0
> 
> 时间：2013-03-31T20:45:27.053
> 
> 标签：java, opengl, lwjgl

我想试试 LWJGL。我使用了 LWJGL-Wiki 中的教程，但我的代码仍然会产生黑屏。

```
import static org.lwjgl.opengl.GL11.*;
import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;

public class SimpleOGLRenderer {

public void start() {

    try {
        Display.setDisplayMode(new DisplayMode(800, 600));
        Display.setTitle("Sandbox");
        Display.create();
    } catch (LWJGLException e) {
        e.printStackTrace();
        System.exit(0);
    }

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0.0f, 800f, 600f, 0.0f, -1.0f, 1.0f);
    glMatrixMode(GL_MODELVIEW);

    while (!Display.isCloseRequested()) {
        glClear(GL_COLOR_BUFFER_BIT);

        glBegin(GL_QUADS);
            glVertex2i(400, 400);
            glVertex2i(500, 400);
            glVertex2i(500, 500);
            glVertex2i(400, 500);
        glEnd();

        glBegin(GL_LINES);
            glVertex2i(100, 100);
            glVertex2i(200, 200);               
        glEnd();

        Display.update();
        Display.sync(60);
    }

    Display.destroy();

}

public static void main(String[] args) {
    SimpleOGLRenderer s = new SimpleOGLRenderer();
    s.start();
}

} 
```

运行设置中的调试器

```
 -Dorg.lwjgl.util.Debug=true 
```

节目

```
 [LWJGL] Initial mode: 1920 x 1200 x 32 @60Hz
 [LWJGL] MemoryUtil Accessor: AccessorUnsafe 
```

我不知道出了什么问题，所有改变颜色（[LWJGL - 黑屏](https://stackoverflow.com/questions/4702304/lwjgl-black-screen)）清除屏幕（[LWJGL OpenGL 黑屏](https://stackoverflow.com/questions/14367803/lwjgl-opengl-black-screen)）的提示都不起作用。

我使用戴尔 Insipron 1720 和 GeForece 8600M GT、Windows 7、64 位和 DirectX v11。

你能找到我的bug吗？

# php - 为 mysql/php 菜单创建链接

> ID：15734331
> 
> 赞同：0
> 
> 时间：2013-03-31T20:45:33.007
> 
> 标签：php

因为我是 php 新手，所以我需要一些网页菜单的帮助，这些网页菜单存储在 MySQL 数据库中，然后用 php 调用到页面。我的 PHP 与数据库的连接运行良好，菜单看起来应该是这样，但我不知道如何从菜单链接到页面。示例：当菜单被填充时，它会给我主页，关于，画廊问题是如何让它们链接到特定页面，如 about.php？这是代码：

```
<?php
include('testconnect.php');
//calling menu from database
$query_sql = "SELECT * FROM meni";
$item_query = mysql_query($query_sql) or die(mysql_error());
$rsitem = mysql_fetch_assoc($item_query);
?>
<! DOCTYPE html>
<html>
<head><title></title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<link rel="stylesheet" href="style2.css" type="text/css" />

</head>
<body>
<nav>
<ul>
 <?php
 do {
 ?>
 <li><a href="menutest.php?meni_ID=<?php echo $rsitem['meni_ID']; ?>"><?php echo      $rsitem['item']; ?></a></li>
<?php    
}while ($rsitem = mysql_fetch_assoc($item_query));
?>
</ul>
</nav>
</body>
</html> 
```

我把那个 menutest.php 放在链接中只是为了看看它是否有效。MySql 数据库有两个字段 meni_ID 是整数和项目 vhich 是 varchar。任何形式的帮助都会很好。甚至是其他类似帖子的示例。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:51:36.213

```
<?php
include('testconnect.php');
//calling menu from database
$query_sql = "SELECT * FROM meni";
$item_query = mysql_query($query_sql) or die(mysql_error());
while($rsitem = mysql_fetch_array($item_query)) { ?>

<! DOCTYPE html>
<html>
<head><title></title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<link rel="stylesheet" href="style2.css" type="text/css" />

</head>
<body>
<nav>
<ul>

 <li><a href="menutest.php?meni_ID=<?php echo $rsitem['meni_ID']; ?>"><?php echo   $rsitem['item']; ?></a></li>

 <?php } ?>
</ul>
</nav>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:53:44.600

您可以通过在变量的帮助下将变量从一个页面传递到另一个页面（about.php）来实现`GET`。参考[这个](https://stackoverflow.com/questions/871858/php-pass-variable-to-next-page)。

您也可以通过会话变量将数组（由菜单和页面链接组成）传递到另一个页面（比如 about.php）来实现。

```
<?php
// begin the session
session_start();
 // populate the array with menus or populate the array with the item that you want to pass to next(say about.php) page
$my_array=array('home','about','gallery');

// put the array in a session variable
$_SESSION['mymenu']=$my_array;

?> 
```

在**about.php**页面中

```
<?php
// begin the session
session_start();

// loop through the session array with foreach
foreach($_SESSION['mymenu'] as $key=>$value)
    {
    // and print the menu
    echo $value.' <br />';
    }
?> 
```

UPD：我修改了你的代码。

```
<?php
session_start();
include('testconnect.php');
//calling menu from database
$query_sql = "SELECT * FROM meni";
$item_query = mysql_query($query_sql) or die(mysql_error());
$rsitem = mysql_fetch_assoc($item_query);
?>
<! DOCTYPE html>
<html>
<head><title></title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<link rel="stylesheet" href="style2.css" type="text/css" />

</head>
<body>
<nav>
<ul>
 <?php
$idx=0;
 do {
 ?>
 <li><a href="menutest.php?meni_ID=<?php echo $rsitem['meni_ID']; ?>"><?php echo      $rsitem['item']; ?></a></li>
<?php  
$meni_ID_ARR[$idx]= $rsitem['meni_ID'];
$item_ARR[$idx]=$rsitem['item'];
$idx++;
}while ($rsitem = mysql_fetch_assoc($item_query));
// put the array in a session variable
$_SESSION['meni_ID_ARR_SESS']=$meni_ID_ARR;
$_SESSION['item_ARR_SESS']=$item_ARR;
?>
</ul>
</nav>
</body>
</html> 
```

-

```
/*printing menu in about.php page*/
<?php
session_start();
?>
<?
    if(isset($_SESSION['meni_ID_ARR_SESS']) && isset($_SESSION['item_ARR_SESS']))
    {
        $meniIDS=$_SESSION['meni_ID_ARR_SESS'];
        $meniITEM=$_SESSION['item_ARR_SESS'];
        for($idx=0;$idx<count($_SESSION['meni_ID_ARR_SESS']);$idx++)
        {
            echo  '<li><a href="menutest.php?meni_ID='.$meniIDS[$idx].' ">' .$meniITEM[$idx].'</a></li>';
        }
    }
    else
    {
        echo "Session not set!";
        exit;
    }

?> 
```

# ruby-on-rails - Ruby on Rails：如何使用 Twitter 搜索 API 从 next_page 获取推文？我的since_id 和max_id 应该是什么？

> ID：15734333
> 
> 赞同：0
> 
> 时间：2013-03-31T20:45:38.320
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, twitter

这是我的代码。我正在尝试使用`@second_results`. 但它似乎只是复制从@first_results 收到的任何内容。

```
search = TwitterManualSearch.new

@first_results = search.first_query(:tag => params[:search]).results

@second_results = search.second_query(:tag => params[:search], :since_id =>  @first_results.results.last.id, :max_id => @first_results.max_id).results 
```

供您参考，我写了一些方法来减轻呼叫，我在这里使用 twitter gem - [https://github.com/sferik/twitter](https://github.com/sferik/twitter)

我知道我在做一些根本错误的事情，但它是什么？

更新：给你一个简短、粗略和快速的想法，这就是我使用代码返回结果的方式（不包括我所有的方法）

为了获得第一批结果，我做

```
@first_results = Twitter.search("#tag", :count => 30, :result_type => "recent")

@first_results.results.map do |status|
  "#{status.from_user}: #{status.text}"
end 
```

然后稍后获得更多结果

```
 @second_results = search.second_query("#tag", :count => 30, :result_type => "recent", :since_id =>  @first_results.results.last.id, :max_id => @first_results.max_id).results

@second_results.map do |status|
  "#{status.from_user}: #{status.text}"
end 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:58:35.080

如果您在控制器中执行此操作，您最终会从 twitter 返回“To many API Calls”错误。您将需要创建一个 rake 任务，以不超过其速率限制的方式提取所有需要的推文。

[https://dev.twitter.com/docs/rate-limiting/1.1](https://dev.twitter.com/docs/rate-limiting/1.1)

我猜你所看到的可能是超出了他们的限制的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:38:20.873

阅读此[https://dev.twitter.com/docs/working-with-timelines](https://dev.twitter.com/docs/working-with-timelines)。你在做什么并没有区分第一个实例变量和第二个实例变量。相反，只需确保对第一个变量调用进行计数，并将`max_id`第二个调用的 id 与第一个实例变量调用的最后一个 id 匹配。像这样的东西

```
@second_results = search.second_query(:tag => params[:search], :max_id => @first_results.results.last.id).results 
```

你应该没事。虽然要注意裁员。

# objective-c - 无法使用 void 类型的右值初始化 NSEvent* 类型的参数

> ID：15734336
> 
> 赞同：1
> 
> 时间：2013-03-31T20:46:12.713
> 
> 标签：objective-c

你好。我正在尝试监视用户在可可应用程序中按下的键。

我使用了这段代码：

```
 // this code works!
 CGEventMask keyboardMaskKeyDown = CGEventMaskBit(kCGEventKeyDown);

 keyboardEventresult = [NSEvent addGlobalMonitorForEventsMatchingMask:keyboardMaskKeyDown handler:^(NSEvent *keyboardEvent)
 {
      keyboardEventresult = keyboardEvent;
      _currentKeystr = [NSString stringWithFormat:@"%c",[[keyboardEvent characters]characterAtIndex:0]];
      NSLog(@"Pressed key: %@",_currentKeystr);
      [hiddentextfield setStringValue:[NSString stringWithFormat:@"%@",_currentKeystr]];
  }]; 
```

但问题是当我改变时：

```
 addGlobalMonitorForEventsMatchingMask 
```

到

```
 addLocalMonitorForEventsMatchingMask 
```

我收到一条错误消息`Cannot initialize a parameter of type NSEvent *(^)(NSEvent *_strong) with an rvalue of type void(^)(NSEvent *_strong)`

[在这里](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/MonitoringEvents/MonitoringEvents.html)你可以看到苹果正在做类似的事情

```
 _eventMonitor = [NSEvent addLocalMonitorForEventsMatchingMask:

        (NSLeftMouseDownMask | NSRightMouseDownMask | NSOtherMouseDownMask | NSKeyDownMask)

        handler:^(NSEvent *incomingEvent) 
```

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:50:41.743

错误消息告诉您您传递的参数类型错误。它是期待的`NSEvent *(^)(NSEvent *_strong)`（一个带有一个类型参数`NSEvent*`并返回的块`NSEvent*`），但您传递的是一个`void(^)(NSEvent *_strong)`（一个带有一个类型参数`NSEvent*`并返回的块`void`。注意块的返回类型的差异 - 它们必须完全匹配。

要解决此问题，请让您的块返回一个`NSEvent*`. 根据[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/clm/NSEvent/addLocalMonitorForEventsMatchingMask%3ahandler%3a)，您需要“返回未修改的事件，创建并返回一个新的 NSEvent 对象，或者返回 nil 以停止事件的调度”。因此，在块的末尾添加一条`return <something>;`语句，其中`<something>`是相同事件、新事件或`nil`.

# python - 如何在 Windows 上安装 numpy 1.8 dev？

> ID：15734338
> 
> 赞同：1
> 
> 时间：2013-03-31T20:46:45.283
> 
> 标签：python, windows, numpy, installation

我正在尝试在 Windows 上安装 numpy 1.8 dev。我找不到任何二进制文件，只有 1.7.1。有谁知道在哪里下载？

或者，我也尝试自己构建 numpy。我从 Github 下载了最新的源代码并运行`python setup.py install`，但出现错误`RuntimeError: Broken toolchain: cannot link a simple C program`。这是一些输出。我安装了带有 32x 和 64x 编译器以及 MinGW 32x 的 VS 2008。

```
C:\numpy-master\numpy\distutils\system_info.py:1429: UserWarning:
    Lapack (http://www.netlib.org/lapack/) sources not found.
    Directories to search for the sources can be specified in the
    numpy/distutils/site.cfg file (section [lapack_src]) or by setting
    the LAPACK_SRC environment variable.
  warnings.warn(LapackSrcNotFoundError.__doc__)
  NOT AVAILABLE

running build
running config_cc
unifing config_cc, config, build_clib, build_ext, build commands --compiler opt
ons
running config_fc
unifing config_fc, config, build_clib, build_ext, build commands --fcompiler op
ions
running build_src
build_src
building py_modules sources
building library "npymath" sources
customize GnuFCompiler
Could not locate executable g77
Could not locate executable f77
customize IntelVisualFCompiler
Could not locate executable ifort
Could not locate executable ifl
customize AbsoftFCompiler
Could not locate executable f90
customize CompaqVisualFCompiler
Could not locate executable DF
customize IntelItaniumVisualFCompiler
Could not locate executable efl
customize Gnu95FCompiler
Found executable C:\Python27\Scripts\gfortran.exe
Found executable C:\Python27\Scripts\gfortran.exe
customize Gnu95FCompiler
customize Gnu95FCompiler using config
C compiler: gcc -O2 -Wall -Wstrict-prototypes

compile options: '-DNPY_MINGW_USE_CUSTOM_MSVCR -D__MSVCRT_VERSION__=0x0900 -Inu
py\core\src\private -Inumpy\core\src -Inumpy\core -Inumpy\core\src\npymath -Inu
py\core\src\multiarray -Inumpy\core\src\umath -Inumpy\core\src\npysort -Inumpy\
ore\include -IC:\Python27\include -IC:\Python27\PC -c'
gcc -O2 -Wall -Wstrict-prototypes -DNPY_MINGW_USE_CUSTOM_MSVCR -D__MSVCRT_VERSI
N__=0x0900 -Inumpy\core\src\private -Inumpy\core\src -Inumpy\core -Inumpy\core\
rc\npymath -Inumpy\core\src\multiarray -Inumpy\core\src\umath -Inumpy\core\src\
pysort -Inumpy\core\include -IC:\Python27\include -IC:\Python27\PC -c _configte
t.c -o _configtest.o
Found executable C:\Python27\Scripts\gcc.exe
g++ _configtest.o -lmsvcr90 -o _configtest.exe
Found executable C:\Python27\Scripts\g++.exe
c:/python27/egg-info/mingw/usr/bin/../lib/gcc/i686-w64-mingw32/4.5.2/../../../.
/i686-w64-mingw32/bin/ld.exe: cannot find -lmsvcr90
collect2: ld returned 1 exit status
failure.
removing: _configtest.exe.manifest _configtest.c _configtest.o
Traceback (most recent call last):
  File "setup.py", line 216, in <module>
    setup_package()
  File "setup.py", line 209, in setup_package
    configuration=configuration )
  File "C:\numpy-master\numpy\distutils\core.py", line 169, in setup
    return old_setup(**new_attr)
  File "C:\Python27\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\numpy-master\numpy\distutils\command\build.py", line 39, in run
    old_build.run(self)
  File "C:\Python27\lib\distutils\command\build.py", line 127, in run
    self.run_command(cmd_name)
  File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command
    self.distribution.run_command(command)
  File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
    cmd_obj.run()
  File "C:\numpy-master\numpy\distutils\command\build_src.py", line 153, in run
    self.build_sources()
  File "C:\numpy-master\numpy\distutils\command\build_src.py", line 164, in bui
d_sources
    self.build_library_sources(*libname_info)
  File "C:\numpy-master\numpy\distutils\command\build_src.py", line 299, in bui
d_library_sources
    sources = self.generate_sources(sources, (lib_name, build_info))
  File "C:\numpy-master\numpy\distutils\command\build_src.py", line 386, in gen
rate_sources
    source = func(extension, build_dir)
  File "numpy\core\setup.py", line 646, in get_mathlib_info
    raise RuntimeError("Broken toolchain: cannot link a simple C program")
RuntimeError: Broken toolchain: cannot link a simple C program

C:\numpy-master>python setup.py install
Running from numpy source directory.
non-existing path in 'numpy\\distutils': 'site.cfg'
F2PY Version 2
numpy\core\setup_common.py:88: MismatchCAPIWarning: API mismatch detected, the
 API version numbers have to be updated. Current C api version is 8, with check
um f4362353e2d72f889fda0128aa015037, but recorded checksum for C API version 8
n codegen_dir/cversions.txt is 17321775fc884de0b1eda478cd61c74b. If functions w
re added in the C API, you have to update C_API_VERSION  in numpy\core\setup_co
mon.pyc.
  MismatchCAPIWarning)
blas_opt_info:
blas_mkl_info:
  libraries mkl,vml,guide not found in ['C:\\Python27\\lib', 'C:\\', 'C:\\Pytho
27\\libs']
  NOT AVAILABLE

atlas_blas_threads_info:
Setting PTATLAS=ATLAS
  libraries ptf77blas,ptcblas,atlas not found in ['C:\\Python27\\lib', 'C:\\',
C:\\Python27\\libs']
  NOT AVAILABLE

atlas_blas_info:
  libraries f77blas,cblas,atlas not found in ['C:\\Python27\\lib', 'C:\\', 'C:\
Python27\\libs']
  NOT AVAILABLE

C:\numpy-master\numpy\distutils\system_info.py:1501: UserWarning:
    Atlas (http://math-atlas.sourceforge.net/) libraries not found.
    Directories to search for the libraries can be specified in the
    numpy/distutils/site.cfg file (section [atlas]) or by setting
    the ATLAS environment variable.
  warnings.warn(AtlasNotFoundError.__doc__)
blas_info:
  libraries blas not found in ['C:\\Python27\\lib', 'C:\\', 'C:\\Python27\\libs
]
  NOT AVAILABLE

C:\numpy-master\numpy\distutils\system_info.py:1510: UserWarning:
    Blas (http://www.netlib.org/blas/) libraries not found.
    Directories to search for the libraries can be specified in the
    numpy/distutils/site.cfg file (section [blas]) or by setting
    the BLAS environment variable.
  warnings.warn(BlasNotFoundError.__doc__)
blas_src_info:
  NOT AVAILABLE

C:\numpy-master\numpy\distutils\system_info.py:1513: UserWarning:
    Blas (http://www.netlib.org/blas/) sources not found.
    Directories to search for the sources can be specified in the
    numpy/distutils/site.cfg file (section [blas_src]) or by setting
    the BLAS_SRC environment variable.
  warnings.warn(BlasSrcNotFoundError.__doc__)
  NOT AVAILABLE

non-existing path in 'numpy\\lib': 'benchmarks'
lapack_opt_info:
lapack_mkl_info:
mkl_info:
  libraries mkl,vml,guide not found in ['C:\\Python27\\lib', 'C:\\', 'C:\\Pytho
27\\libs']
  NOT AVAILABLE

  NOT AVAILABLE

atlas_threads_info:
Setting PTATLAS=ATLAS
  libraries ptf77blas,ptcblas,atlas not found in C:\Python27\lib
  libraries lapack_atlas not found in C:\Python27\lib
  libraries ptf77blas,ptcblas,atlas not found in C:\
  libraries lapack_atlas not found in C:\
  libraries ptf77blas,ptcblas,atlas not found in C:\Python27\libs
  libraries lapack_atlas not found in C:\Python27\libs
numpy.distutils.system_info.atlas_threads_info
  NOT AVAILABLE

atlas_info:
  libraries f77blas,cblas,atlas not found in C:\Python27\lib
  libraries lapack_atlas not found in C:\Python27\lib
  libraries f77blas,cblas,atlas not found in C:\
  libraries lapack_atlas not found in C:\
  libraries f77blas,cblas,atlas not found in C:\Python27\libs
  libraries lapack_atlas not found in C:\Python27\libs
numpy.distutils.system_info.atlas_info
  NOT AVAILABLE

C:\numpy-master\numpy\distutils\system_info.py:1415: UserWarning:
    Atlas (http://math-atlas.sourceforge.net/) libraries not found.
    Directories to search for the libraries can be specified in the
    numpy/distutils/site.cfg file (section [atlas]) or by setting
    the ATLAS environment variable.
  warnings.warn(AtlasNotFoundError.__doc__)
lapack_info:
  libraries lapack not found in ['C:\\Python27\\lib', 'C:\\', 'C:\\Python27\\li
s']
  NOT AVAILABLE

C:\numpy-master\numpy\distutils\system_info.py:1426: UserWarning:
    Lapack (http://www.netlib.org/lapack/) libraries not found.
    Directories to search for the libraries can be specified in the
    numpy/distutils/site.cfg file (section [lapack]) or by setting
    the LAPACK environment variable.
  warnings.warn(LapackNotFoundError.__doc__)
lapack_src_info:
  NOT AVAILABLE

C:\numpy-master\numpy\distutils\system_info.py:1429: UserWarning:
    Lapack (http://www.netlib.org/lapack/) sources not found.
    Directories to search for the sources can be specified in the
    numpy/distutils/site.cfg file (section [lapack_src]) or by setting
    the LAPACK_SRC environment variable.
  warnings.warn(LapackSrcNotFoundError.__doc__)
  NOT AVAILABLE

running install
running build
running config_cc
unifing config_cc, config, build_clib, build_ext, build commands --compiler opt
ons
running config_fc
unifing config_fc, config, build_clib, build_ext, build commands --fcompiler op
ions
running build_src
build_src
building py_modules sources
building library "npymath" sources
customize GnuFCompiler
Could not locate executable g77
Could not locate executable f77
customize IntelVisualFCompiler
Could not locate executable ifort
Could not locate executable ifl
customize AbsoftFCompiler
Could not locate executable f90
customize CompaqVisualFCompiler
Could not locate executable DF
customize IntelItaniumVisualFCompiler
Could not locate executable efl
customize Gnu95FCompiler
Found executable C:\Python27\Scripts\gfortran.exe
Found executable C:\Python27\Scripts\gfortran.exe
customize Gnu95FCompiler
customize Gnu95FCompiler using config
C compiler: gcc -O2 -Wall -Wstrict-prototypes

    compile options: '-DNPY_MINGW_USE_CUSTOM_MSVCR -D__MSVCRT_VERSION__=0x0900 -Inu
    py\core\src\private -Inumpy\core\src -Inumpy\core -Inumpy\core\src\npymath -Inu
    py\core\src\multiarray -Inumpy\core\src\umath -Inumpy\core\src\npysort -Inumpy\
    ore\include -IC:\Python27\include -IC:\Python27\PC -c'
    gcc -O2 -Wall -Wstrict-prototypes -DNPY_MINGW_USE_CUSTOM_MSVCR -D__MSVCRT_VERSI
    N__=0x0900 -Inumpy\core\src\private -Inumpy\core\src -Inumpy\core -Inumpy\core\
    rc\npymath -Inumpy\core\src\multiarray -Inumpy\core\src\umath -Inumpy\core\src\
    pysort -Inumpy\core\include -IC:\Python27\include -IC:\Python27\PC -c _configte
    t.c -o _configtest.o
    Found executable C:\Python27\Scripts\gcc.exe
    g++ _configtest.o -lmsvcr90 -o _configtest.exe
    Found executable C:\Python27\Scripts\g++.exe
    c:/python27/egg-info/mingw/usr/bin/../lib/gcc/i686-w64-mingw32/4.5.2/../../../.
    /i686-w64-mingw32/bin/ld.exe: cannot find -lmsvcr90
    collect2: ld returned 1 exit status
    failure.
    removing: _configtest.exe.manifest _configtest.c _configtest.o
    Traceback (most recent call last):
      File "setup.py", line 216, in <module>
        setup_package()
      File "setup.py", line 209, in setup_package
        configuration=configuration )
      File "C:\numpy-master\numpy\distutils\core.py", line 169, in setup
        return old_setup(**new_attr)
      File "C:\Python27\lib\distutils\core.py", line 152, in setup
        dist.run_commands()
      File "C:\Python27\lib\distutils\dist.py", line 953, in run_commands
        self.run_command(cmd)
      File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
        cmd_obj.run()
      File "C:\numpy-master\numpy\distutils\command\install.py", line 57, in run
        r = old_install.run(self)
      File "C:\Python27\lib\distutils\command\install.py", line 563, in run
        self.run_command('build')
      File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command
        self.distribution.run_command(command)
      File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
        cmd_obj.run()
      File "C:\numpy-master\numpy\distutils\command\build.py", line 39, in run
        old_build.run(self)
      File "C:\Python27\lib\distutils\command\build.py", line 127, in run
        self.run_command(cmd_name)
      File "C:\Python27\lib\distutils\cmd.py", line 326, in run_command
        self.distribution.run_command(command)
      File "C:\Python27\lib\distutils\dist.py", line 972, in run_command
        cmd_obj.run()
      File "C:\numpy-master\numpy\distutils\command\build_src.py", line 153, in run
        self.build_sources()
      File "C:\numpy-master\numpy\distutils\command\build_src.py", line 164, in bui
    d_sources
        self.build_library_sources(*libname_info)
      File "C:\numpy-master\numpy\distutils\command\build_src.py", line 299, in bui
    d_library_sources
        sources = self.generate_sources(sources, (lib_name, build_info))
      File "C:\numpy-master\numpy\distutils\command\build_src.py", line 386, in gen
    rate_sources
        source = func(extension, build_dir)
      File "numpy\core\setup.py", line 646, in get_mathlib_info
        raise RuntimeError("Broken toolchain: cannot link a simple C program")
    RuntimeError: Broken toolchain: cannot link a simple C program 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:28:01.643

我已经解决了。

首先确保您已安装 Visual Studio 2008 和可能的 MinGW。然后您需要安装[http://software.intel.com/en-us/intel-mkl](http://software.intel.com/en-us/intel-mkl)然后需要`site.cfg`在您的源代码中的 numpy/distutils/ 下创建一个文件。添加到它

```
[mkl]
include_dirs = C:\Program Files (x86)\Intel\Composer XE 2013\mkl\include
library_dirs = C:\Program Files (x86)\Intel\Composer XE 2013\mkl\lib\ia32
mkl_libs = mkl_ia32, mkl_c_dll, libguide40
lapack_libs = mkl_lapack 
```

然后去你的 python 安装到 C:\Python27\Lib\distutils\distutils.cfg 确保它是空的！并且没有这样的东西

```
[build]
compiler=mingw32 
```

这将抛弃您的安装程序。您可以将 C:\MinGW\bin 添加到路径中，但不确定是否需要这样做。最后，回到你的 numpy 源目录并运行`python setup.py install`. 应该编译没有错误。

# c# - WPF 将列表框绑定到数据集

> ID：15734345
> 
> 赞同：0
> 
> 时间：2013-03-31T20:47:55.507
> 
> 标签：c#, wpf, listbox, dataset

我正在尝试让数据集显示在`ListBox`. 这是我到目前为止所得到的：

`XAML`

```
<Window x:Class="FilterDemo.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:FilterDemo" 
    Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded_1" >
<Window.Resources>
    <local:FilterDemoBackEndDataSet x:Key="FilterDemoBackEndDataSet"/>
    <CollectionViewSource x:Key="cLIENTSViewSource" Source="{Binding CLIENTS, Source={StaticResource FilterDemoBackEndDataSet}}"/>
</Window.Resources>

<Grid>
    <StackPanel Grid.Column="1" Background="#c4d9f9" >
        <DockPanel HorizontalAlignment="Left" Height="20" Width="220"  Margin="10,5,5,5">
            <TextBox Name="txtSearch" Height="20" Width="160" DockPanel.Dock="Left"  />
            <Button Name="cmdFilter" Height="20" Width="20"  Background="Black" DockPanel.Dock="Right"/>
        </DockPanel>

        <ListBox Name="lstAccountNo"  Height="550"  Width="200" HorizontalAlignment="Left" DisplayMemberPath="AccountNo" ItemsSource="{Binding}"
                             Margin="10,5,5,5" SelectedItem="{Binding AccountNo}" IsSynchronizedWithCurrentItem="True" />
    </StackPanel>
</Grid> 
```

`Code behind`

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace FilterDemo
{
  /// <summary>
  /// Interaction logic for MainWindow.xaml
  /// </summary>
  public partial class MainWindow : Window
  {
      public MainWindow()
      {
          InitializeComponent();
      }

      private void Window_Loaded_1(object sender, RoutedEventArgs e)
      {
          FilterDemo.FilterDemoBackEndDataSet FilterDemoBackEndDataSet = ((FilterDemo.FilterDemoBackEndDataSet)(this.FindResource("FilterDemoBackEndDataSet")));
          // Load data into the table CLIENTS. You can modify this code as needed.
          FilterDemo.FilterDemoBackEndDataSetTableAdapters.CLIENTSTableAdapter FilterDemoBackEndDataSetCLIENTSTableAdapter = new FilterDemo.FilterDemoBackEndDataSetTableAdapters.CLIENTSTableAdapter();
          FilterDemoBackEndDataSetCLIENTSTableAdapter.Fill(FilterDemoBackEndDataSet.CLIENTS);
          System.Windows.Data.CollectionViewSource cLIENTSViewSource = ((System.Windows.Data.CollectionViewSource)(this.FindResource("cLIENTSViewSource")));
          cLIENTSViewSource.View.MoveCurrentToFirst();
      }
  }
} 
```

我有一个名为的数据集`FilterDemoBackEnd`、一个名为的表`Clients`和一个名为的字段`AccountNo`。当我运行上面的代码时，窗口打开但没有显示任何项目。

请不要回答带有线程链接的答案，因为我已经搜索了互联网试图解决这个问题。

XAML 很难。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:03:03.583

通过将数据网格拖到主窗口然后将其删除来对其进行排序。我不确定这有什么帮助，但它起到了作用。

# python - 将列表传递给数组

> ID：15734351
> 
> 赞同：0
> 
> 时间：2013-03-31T20:48:32.447
> 
> 标签：python, numpy

假设我有一个索引列表，它们是`index= np.array([4,2,3,1])`. 我有一个二维数组`blah`，想提取`blah`using的行`blah[index,:]`。我知道你可以在 R 中做到这一点，但是你如何在 python/numpy 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:53:19.890

```
In [24]: index = np.array([4,2,3,1])

In [25]: blah = np.array([[1], [2], [3], [4], [5]])

In [26]: blah[index]
Out[26]:
array([[5],
       [3],
       [4],
       [2]]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:07:49.917

如果您想使用二维数组“blah”执行此操作，您可以执行以下操作：

```
index= np.array([4,2,3,1])
blah=np.array([[1,2,3,4,5], [6,7,8,9,10]])
matrix=[]
for i in range(len(blah)):
    matrix.append(blah[i][index])

print np.array(matrix) 
```

结果：

```
[[ 5  3  4  2]
 [10  8  9  7]] 
```

# netty - 如何将 Netty 3.6 迁移到 Netty 4.0 以获取服务器分块响应？

> ID：15734356
> 
> 赞同：2
> 
> 时间：2013-03-31T20:49:05.657
> 
> 标签：netty

我一直在寻找如何将使用分块响应的 netty 3.x 服务器升级到 4.0。在 3.6.X 中，我使用`DefaultHttpChunk`and`DefaultHttpChunkTrailer`类来做到这一点，但我不太清楚如何映射到 4.0 中的新类。`HttpResponse`让我相信这两种实现`DefaultHttpResponse`可以充当分块部分，但我看不到等效的，`DefaultHttpChunkTrailer`所以我可以设置预告片。

有人可以指出我正确的方向吗？关于 4.0 何时完成代码并发布是否有一个粗略的想法？

谢谢，森希尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:43:59.210

现在是这样的：

HttpChunk -> HttpContent

LastHttpChunk -> LastHttpContent

HttpResponse / HttpRequest 仅包含标头等，但没有内容。

# php - insertBefore 以错误的方式将对象添加到 xml

> ID：15734361
> 
> 赞同：0
> 
> 时间：2013-03-31T20:49:36.580
> 
> 标签：php, xml, dom, xml-parsing

基本上，当我尝试使用 php 将 RSS 提要中的多个项目添加到 XML 文件时，insertBefore 类会以错误的方式添加最新的项目（即，我希望它从最旧的开始将它们添加到文件的顶部到最新，而是将它们从最新到最旧添加）我该如何解决这个问题？（抱歉措辞糟糕）这是我的代码：

```
$dom = new DOMDocument;
$dom->formatOutput = true;
$dom->preserveWhiteSpace = false;

$dom->load(myfile);

$channel = $dom->getElementsByTagName('channel');

foreach ($channel as $channels) {

$item1 = $dom->createElement('item');
$item2 = $dom->createElement('item');
$item3 = $dom->createElement('item');

$title1 = $dom->createElement('title', $t1);
$title2 = $dom->createElement('title', $t2);
$title3 = $dom->createElement('title', $t3);

$content1 = $dom->createElement('media:content'); 
$conatt1 = $dom->createAttribute('url');

$content2 = $dom->createElement('media:content'); 
$conatt2 = $dom->createAttribute('url');

$content3 = $dom->createElement('media:content'); 
$conatt3 = $dom->createAttribute('url');

$conatt1->value = $u1;
$conatt2->value = $u2;
$conatt3->value = $u3;

$channels->insertBefore($item1, $channels->firstChild);  
$channels->insertBefore($item2, $channels->firstChild);  
$channels->insertBefore($item3, $channels->firstChild);  

$item1->appendChild($title1); 
$item2->appendChild($title2); 
$item3->appendChild($title3); 

$item1->appendChild($content1); 
$item2->appendChild($content2); 
$item3->appendChild($content3); 

$content1->appendChild($conatt1);
$content2->appendChild($conatt2);
$content3->appendChild($conatt3);

} 
```

以及它生成的 XML=

```
<channel>
 <item>
  <title>item3</title>
  <media:content url="url3"/>
 </item>
 <item>
  <title>item2</title>
  <media:content url="url2"/>
 </item>
 <item>
  <title>item1</title>
  <media:content url="url"/>
 </item>

//rest of the RSS 
</channel> 
```

但我想要它，所以它添加了这样的项目：

```
<channel>
 <item>
  <title>item1</title>
  <media:content url="url1"/>
 </item>
 <item>
  <title>item2</title>
  <media:content url="url2"/>
 </item>
 <item>
  <title>item3</title>
  <media:content url="url3"/>
 </item>

//rest of the RSS 
</channel> 
```

任何建议（再次，对于糟糕的解释感到抱歉）

## 编辑

这是我的其他代码，我该怎么做呢？

```
$fom = new DOMDocument;
$fom->formatOutput = true;
$fom->preserveWhiteSpace = false;

$fom->load("file");
$channel = $fom->getElementsByTagName('channel');

foreach ($channel as $channels) {

$item1 = $fom->createElement('item');
$title1 = $fom->createElement('title', $titles[$i]);

$content1 = $fom->createElement('media:content'); 
$conatt1 = $fom->createAttribute('url');

$conatt1->value = $links[$i];

$channels->insertBefore($item1, $channels->firstChild);
$item1->appendChild($title1); 
$item1->appendChild($content1);  
$content1->appendChild($conatt1);

$fom->formatOutput = true;
$fom->preserveWhiteSpace = false;
$fom->save("file");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:26:39.363

首先你做

```
$channels->insertBefore($item1, $channels->firstChild); 
```

在这个电话之后，`$item1`已经成为第一个孩子`$channels`。因此，当你在下一行时

```
$channels->insertBefore($item2, $channels->firstChild); 
```

`$item2`它在之前插入`$item1`。

相反，您应该将返回的第一个值缓存`$channels->firstChild`在一个变量中，然后`insertBefore`：

```
$insertPoint = $channels->firstChild;
$channels->insertBefore($item1, $insertPoint);
$channels->insertBefore($item2, $insertPoint);
$channels->insertBefore($item3, $insertPoint); 
```

Now`$insertPoint`始终是`$channels`您开始插入新项目之前的第一个子元素。

# objective-c - 生成没有连续重复的随机数

> ID：15734366
> 
> 赞同：8
> 
> 时间：2013-03-31T20:49:50.317
> 
> 标签：objective-c, random

如何以不连续两次生成相同数字的方式生成 0 - 4 的随机整数？例如，如果 3 是第一次生成的数字，那么 0,1,2,4 将是第二次随机生成的可能数字。如果第二次生成 2，那么 0,1,3,4 将是第三次随机生成的可能数字，依此类推。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T21:06:04.820

```
int oldrand = <prior random number>;
int adder = randomNumberGenerator() % 4;
int newrand = (oldrand + adder + 1) % 5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:17:03.620

```
uint32_t myRandomNumber(uint32_t upperBound, uint32_t avoid) {
    if (avoid < upperBound) {
        --upperBound;
    }
    uint32_t number = arc4random_uniform(upperBound);
    if (number >= avoid) {
        ++number;
    }
    return number;
} 
```

第一次这样称呼它：

```
uint32_t number = myRandomNumber(5, 5); 
```

第一次之后这样称呼它：

```
number = myRandomNumber(5, number); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T22:04:03.613

它可以使用 2 个数组生成；1是排序的，另一个是通过采用随机对象形式创建的，如下所示

```
-(NSMutableArray *)generateRandomNumbersFrom:(int) a to:(int)b
{

    NSMutableArray * numbersWillBeChosen=[NSMutableArray new];
    NSMutableArray * randomList=[NSMutableArray new];
    //add the numbers that will create your ramdom list in order
    for(int k=0;k<=(b-a);k++)
    {
        [numbersWillBeChosen addObject:@(a+k)];
    }

    //create random list
    for (int p=(b-a)+1; p>0; p--) {

        int rand= arc4random()%p;

        [randomList addObject:[numbersWillBeChosen objectAtIndex:rand]];

        [numbersWillBeChosen removeObjectAtIndex:rand];

    }

    NSLog(@"%@",randomList);

return randomList;
    } 
```

你可以打电话询问你的情况

```
randList=[self generateRandomNumbersFrom:0 to:4]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-09T05:24:01.200

我尝试了 Hot Lick 的答案，它最终为我生成了重复项（或超出范围的数字）。但它启发了我想出一个对我有用的解决方案。

我的代码是 C#，但您可以修改它以满足您的需要。

```
//Returns a random number not same as previous random number. ie. no 2 consec random
public static int NonConsecRandom(int max, int? lastNum=null)
{
    if (lastNum == null)
        return Random.Range(0, max);

    int last = (int)lastNum;            
    return Random.Range(last + 1, last + max) % max;
} 
```

**解释：**

如果先前没有生成数字，则第一个块仅返回一个随机数。

第二部分从“其他数字”生成一个随机数。

例如，如果我的“最大值”为 5，则可能的随机数为：0、1、2、3、4

假设我的最后一个数字是 2，现在我想要 [3, 4, 0, 1] 之间的随机数

所以我在last+1和last+max之间生成一个随机数。即在3（含）和7（不含）之间

[3、4、5、6]

用最大值（即 5）修改这些数字中的任何一个，您将获得所需范围内的随机数： [3 , 4, 0, 1]

# c++ - 错误 C2059：将 c 源文件添加到项目时出现语法错误：'}'

> ID：15734367
> 
> 赞同：2
> 
> 时间：2013-03-31T20:49:59.627
> 
> 标签：c++, c, cocos2d-x

我正在 Visual Studio Express 中为 Windows Phone 8 编写 C++ 应用程序。

我正在尝试使用 flite，这是一个用 c 编写的文本到语音库，到目前为止，我已经添加了它的源文件和头文件，并且我已经在所有单独的 c 文件上将使用预编译头文件的选项设置为 no，但是源文件仍然无法编译，而是编译器抱怨（很多次）：

```
 error C2059: syntax error : '.'
 error C2059: syntax error : '}' 
```

它在 flite 源代码中抱怨此代码的这些问题：

```
DEF_STATIC_CONST_VAL_STRING(ffeature_default_val,"0"); 
```

DEF_STATIC_CONST_VAL_STRING 的定义为：

```
#define DEF_CONST_VAL_STRING(N,S) const cst_val N = {{.a={.type=CST_VAL_TYPE_STRING,.ref_count=-1,.v={.vval= (void *)S}}}} 
```

在这里你可以看到“。” 和编译器抱怨的“}”。无论如何我都没有修改 c 源代码，它是为 iOS 和 Android 项目构建的，所以我假设我还没有掌握如何在视觉表达中包含 C 文件。附带说明一下，在 Visual Express 中，.c 文件旁边的图标是“++”：/

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T20:54:04.777

这个语法：

```
struct MyStruct someObject = {.foo = bar, .baz = quux}; 
```

被称为*指定初始化器*。它仅在 C 的 C99 方言中有效——在 C89 和所有版本的 C++ 中无效。Microsoft Visual Studio 的 C 编译器不符合 C99，因此它无法编译该代码。您必须将代码转换为使用 C89 或 C++，或者使用支持 C99 的不同编译器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T20:52:26.623

C++ 不支持C99 初始化样式（*指定的初始化程序），请参阅*[此处](https://stackoverflow.com/questions/4900739/why-are-designated-initializers-not-implemented-in-g)或[此处](https://stackoverflow.com/questions/855996/c-equivalent-to-designated-initializers)。换句话说，`{ .blah = 42 };`在 C++ 中是非法的。

您可以做的是为这个库创建一个 C 包装器，该文件将在 C 中编译，但这些函数将可用于 C++ 代码。请注意，msvc 编译器不支持 C99。

# rest - 如何使 ASP.NET Web API 正确响应 403 或 401？

> ID：15734374
> 
> 赞同：18
> 
> 时间：2013-03-31T20:50:41.580
> 
> 标签：rest, http, authentication, asp.net-web-api, authorization

我正在使用 ASP.NET Web API。而且我确实喜欢添加属性以指定对 API 控制器的访问级别的能力，如下所示：

```
[Authorize]
public IEnumerable<Activity> Get() 
```

到目前为止一切都很好，但是当我使用角色时，这个概念就崩溃了。

```
[Authorize(Roles = "Manager")]
public IEnumerable<Activity> Get() 
```

我的用户可能已经登录系统一段时间了，然后在某个时候他们点击了一个对他们“禁止”的资源。用户尝试再次登录是没有意义的。由于他们的合法帐户无权访问该 URL。但目前他们得到的是 401（未经授权）而不是 403（禁止），就好像他们使用错误的帐户登录一样。但是用户只有一个账户，并不意味着用户要申请属于其他人的账户。

有没有其他人处理过这个问题？有谁知道如何解决这一问题？我非常愿意编写代码来解决这个问题，但我目前不知道从哪里开始。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-05-08T19:19:19.843

阅读 Parv 的建议，我创建了以下名为**[WebApiAuthorize]**的自定义过滤器。

关键是 HandleUnauthorizedRequest() 方法。当代码在此方法中执行时，这是因为用户“出于某种原因”未经授权......所以现在我们只需确定“为什么”......然后：

1.  调用默认行为的基本方法（返回 401）.... 或....
2.  用 403 返回我们自己的响应。

如您所见，它在适当的时候返回 403（经过身份验证，但未授权）。

```
public class WebApiAuthorizeAttribute : AuthorizeAttribute
{
    protected override void HandleUnauthorizedRequest(HttpActionContext ctx)
    {
        if (!ctx.RequestContext.Principal.Identity.IsAuthenticated)
            base.HandleUnauthorizedRequest(ctx);
        else
        {
            // Authenticated, but not AUTHORIZED.  Return 403 instead!
            ctx.Response = new HttpResponseMessage(System.Net.HttpStatusCode.Forbidden);
        }
    }
} 
```

要使用，只需将自定义过滤器扔到控制器或像这样的操作上......

```
[WebApiAuthorize(Roles = "YourRoleA,YourRoleB")]
public class AdminController : ApiController
{
    public List<Admin> GetAdmins()
    {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:23:17.490

我做了一些研究，并为我编写了一个解决方案。我在 System.Web.Mvc 和 System.Web.Http 中发现了两个不同的 Authorize 属性。第一个适用于常规 MVC4 应用程序，第二个适用于用于 Web 服务的 MVC4 的 WebAPI 部分，包括 RESTful 接口。所以我用了第二个。

我决定查看 codeplex 上的[Authorize Attribute Source](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/7724375bcb597f43a184111a4f03711a3fa7d9d7#src/System.Web.Http/AuthorizeAttribute.cs)代码。我发现了这个：

```
 protected virtual bool IsAuthorized(HttpActionContext actionContext)
    {
        if (actionContext == null)
        {
            throw Error.ArgumentNull("actionContext");
        }

        IPrincipal user = Thread.CurrentPrincipal;
        if (user == null || !user.Identity.IsAuthenticated)
        {
            return false;
        }

        if (_usersSplit.Length > 0 && !_usersSplit.Contains(user.Identity.Name, StringComparer.OrdinalIgnoreCase))
        {
            return false;
        }

        if (_rolesSplit.Length > 0 && !_rolesSplit.Any(user.IsInRole))
        {
            return false;
        }

        return true;
    } 
```

很容易看出身份验证和访问是如何混为一谈的，因为它们都具有返回 false 的相同效果。

这是我写的一个[新的 AuthorizeAttribute](https://gist.github.com/arthernan/5293014)，当用户或角色不匹配时返回 403。这样您就可以避免获得本机登录窗口。它包括以下代码。

```
 if (!IsAuthorized(actionContext))
        {
            HandleUnauthorizedRequest(actionContext);
        }

        if (!IsAllowed(actionContext))
        {
            HandleForbiddenRequest(actionContext);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T20:56:12.823

您可以做的是进行自定义`Authorize attribute`，然后处理 `AuthorizeCore`，`OnAuthorizationFailed`在后者中，您可以发送您喜欢的任何响应

看看[这里](http://www.tsjensen.com/blog/post/2010/10/16/ASPNET+MVC+Custom+Authorize+Attribute+With+Roles+Parser.aspx)

# php - 使用提交按钮的 PHP 满意度调查

> ID：15734376
> 
> 赞同：0
> 
> 时间：2013-03-31T20:50:46.903
> 
> 标签：php, forms, submit

我正在开发一个用于响应帮助请求的自动化系统，我希望能够弄清楚使用它的客户在哪里对他们得到的响应感到满意。

程序应该通过下方是/否提交按钮询问他们“您对您的回复感到满意的地方”，当用户提交时，它应该将它们转发到指定页面并调用 sendDebugMessage 函数（向我们发送电子邮件）

这是我为此编写的代码，但它只是重定向到一个空白页面：

```
<?php
    if (isset($_POST['Yes'])) {
        ?>
            sendDebugMessage("A user WAS happy with their response!");
            <META http-equiv="refresh" content="0; URL=http://example.com">
        <?php
    } elseif (isset($_POST['No'])) {
        sendDebugMessage("A user was NOT happy with their response!");

        ?>
            <META http-equiv="refresh" content="0; URL=http://example.com">
        <?php
    } else {
        ?>
            Where you happy with this response?
            <form action="" method="post">
                <input type="submit" value="Yes" name="Yes" />
                <input type="submit" value="No" name="No"/>
            </form>
            <br />

        <?php
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:14:11.590

从您的表单中删除 action 属性以查看是否有帮助，这是有效的 html5，对于 html4 也更好，以避免出现空操作属性的浏览器问题。

此外，请确保您测试您的条件 - if(isset($_POST... 是否为真，方法是用简单的消息替换括号内的代码，即：回显“表单已提交！”。

*编辑我*假设您的 sendDebugMessage() 函数是一个 javascript 函数。在这种情况下，您需要将其放在脚本标签 ->`<script type="text/javascript"></script>`中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:56:39.117

你没有解释存在的问题，但我想你永远不会得到“不”。

当您在一个表单中发送两个提交按钮时，两者都将被提交。所以把它们分开

```
<form action="" method="post">
  <input type="submit" value="No" name="No"/>
</form>

<form action="" method="post">
  <input type="submit" value="Yes" name="Yes" />
</form> 
```

得到不同的答案。

试着`print_r($_POST);`看看你是否得到任何 Post vars。

**我认为更好的解决方案：**

使用 GET 链接，例如

```
<a href="index.php?answer=yes">yes</a>
<a href="index.php?answer=no">no</a> 
```

`$_GET[answer]`并通过变量读取它们。所以在 index.php 你会读到你的变量

```
<?
  if($_GET[answer] == 'yes'){
    //action for yes
  }
  elseif($_GET[answer] == 'no'){
    //action for no
  }
?> 
```

更好的工作方法是通过 javascript 来完成。

# c - C 和 OpenCV 内存泄漏

> ID：15734377
> 
> 赞同：1
> 
> 时间：2013-03-31T20:50:50.293
> 
> 标签：c, opencv, memory-leaks

我有内存泄漏的问题。在这个简单的程序中：

```
#include <stdlib.h>
#include <stdio.h>
#include "opencv2/core/core.hpp"
#include "opencv2/highgui/highgui.hpp"

int main() {
    CvMat *src;
    src = cvLoadImageM("p1.jpg", CV_LOAD_IMAGE_GRAYSCALE);
    cvSaveImage("p2.bmp", src, 0);  
    cvReleaseMat(&src);
    return 0;
} 
```

根据 valgrind，有 7 个泄漏：

```
==10478== HEAP SUMMARY:
==10478==     in use at exit: 10,464 bytes in 7 blocks
==10478==   total heap usage: 154 allocs, 147 frees, 2,908,450 bytes allocated
==10478== 
==10478== LEAK SUMMARY:
==10478==    definitely lost: 0 bytes in 0 blocks
==10478==    indirectly lost: 0 bytes in 0 blocks
==10478==      possibly lost: 0 bytes in 0 blocks
==10478==    still reachable: 10,464 bytes in 7 blocks
==10478==         suppressed: 0 bytes in 0 blocks
==10478== Rerun with --leak-check=full to see details of leaked memory
==10478== 
==10478== For counts of detected and suppressed errors, rerun with: -v
==10478== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 2 from 2) 
```

谁能告诉我如何正确释放内存？感谢您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:22:22.590

@user4815162342 可能是对的。虽然我建议您迁移到新`C++` `OpenCv` `cv::Mat`的，通过它可以自动进行内存管理。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-19T07:10:37.773

我已经多次看到这种泄漏。检查您发送的内容上方的详细错误。它可能是 pixman 库。

# c# - LINQ 和对象引用的问题

> ID：15734379
> 
> 赞同：4
> 
> 时间：2013-03-31T20:51:00.853
> 
> 标签：c#, linq, collections

我一直在尝试按照以下方式进行工作，这是一个完整的代码示例，可以在 Visual Studio 中运行，它演示了我正在谈论的场景。这里的一切都按预期工作，当我更改播放器的 IsReady 值时，附加到事件的 lambda 被触发并且 if (to) 评估为 true。但是 Console.WriteLine 永远不会被命中，因为 ConcurrentBag 中播放器的 IsReady 值似乎没有更新。

```
class Program
{
    public static ConcurrentBag<Player> Players { get; set; }
    static void Main(string[] args)
    {
        Players = new ConcurrentBag<Player>();
        Player player = new Player() { Id = "123" };
        Players.Add(player);
        player.IsReady.ValueChanged += (from, to) =>
        {
            if (to)
            {
                if (Players.All(p => p.IsReady.Value))
                {
                    Console.WriteLine("It worked");
                }
            }
        };

        LookupPlayerById("123").IsReady.Value = true;
    }

    public static Player LookupPlayerById(string clientId)
    {
        var player = Players.FirstOrDefault(x => x.Id == clientId);
        return player;
    }
}

public class Player
{
    public string Id { get; set; }
    public MonitoredValue<bool> IsReady { get; set; }

    public Player()
    {
        IsReady = new MonitoredValue<bool>(false);
    }
}

public class MonitoredValue<T>
{
    public delegate void ValueChangedHandler(T from, T to);
    public event ValueChangedHandler ValueChanged;

    private T m_Value;
    public T Value
    {
        get { return m_Value; }
        set
        {
            if (ValueChanged != null) // if invocation list is not empty, fire the event
            {
                ValueChanged(m_Value, value);
            }
            m_Value = value;
        }
    }

    public MonitoredValue() { }

    public MonitoredValue(T initialValue)
    {
        m_Value = initialValue;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T20:59:06.757

问题是您首先通知您的听众，然后实际更改该值。将您的属性定义更改为下面给出的代码：

（`delegate {}`如果默认事件实现，现在我不需要在每次调用之前检查 null）

```
public event ValueChangedHandler ValueChanged = delegate {};

public T Value
{
    get { return m_Value; }
    set
    {
        //first change
        m_Value = value;

        //now notify
        ValueChanged(m_Value, value);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:58:59.090

由于它是一个引用类型，Player 将被 FirstOrDefault 返回的对象引用，除非它是一个默认值，在这种情况下你没有得到匹配。

演示示例：

```
 public static void Main()
    {
        ConcurrentBag<ClassA> test = new ConcurrentBag<ClassA>();
        var hurp = new ClassA();
        hurp.number = 3;
        test.Add(hurp);

        var derp = test.FirstOrDefault();
        derp.number = 4;

        Console.Write(test.FirstOrDefault().number);
        Console.WriteLine(derp.number);
        Console.ReadLine();
    } 
```

印刷： `44`

# php - 1小时后如何跟踪用户离开，删除目录中的文件夹？

> ID：15734381
> 
> 赞同：-1
> 
> 时间：2013-03-31T20:51:03.650
> 
> 标签：php, jquery, workflow

以下是我网站流程的一部分，我有一些问题，感谢任何建议。

**用户访问页面**>
如果之前没有访问过 (isset session[id])，
1\. 在 session[id] 中提供一个临时 id 存储。
2\. 在服务器中创建一个名为 session[id] 的文件夹。

**用户完成活动后，然后离开页面。**
1\. 1小时后，删除目录中的文件夹。

**Q1**。用户离开后，有时文件夹会成功删除，但有时不会，为什么？
1小时后如何设置删除文件夹？

在（Mamp localhost, Safari, Firefox）不同情况下测试： 1\. 点击窗口关闭按钮 2\. 直接退出浏览器程序 3\. 同一窗口转发到其他网站。4.切断网络信号。（Mamp 本地主机，Safari，火狐）

```
window.onbeforeunload = confirmExit;
function confirmExit(){         
    $.ajax({
        type: "POST",
        url: "index.php",
        data: 'remove_session='+'remove_session', // trigger php remove folder and row in table
        success: function(html){
        }
});
}; 
```

**Q2**。有没有更好的方法检测用户之前来过？用户不在网站上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:41:55.010

不确定您的网站是如何设置的或您实际存储的内容，但您可能只保留数据客户端（cookie/本地存储）？

如果您只想清理旧文件夹，请尝试为您的用户会话添加时间戳，并每小时清理一次自 x 时间以来未访问的所有文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T10:59:12.053

> 用户离开后，有时文件夹会成功删除，但有时不会？？为什么？以及如何避免这种情况发生？

（*这不像你已经解释了这个概念是如何实现的，但我假设你没有使用 cronjob*）

发生这种情况是因为，要运行您的脚本，您的服务器需要发出请求。这意味着如果用户离开并且之后没有发出任何请求，那么您将无法删除该文件夹（*尚未*）。

要解决此问题，您很可能需要[Cron 作业](http://www.thegeekstuff.com/2011/07/php-cron-job/)。您可以在 Google 和此处找到大量教程和信息。

> 有没有更好的方法检测用户之前来过？

您当前的系统使用不能完全信任的会话作为危险的用户输入组的一部分（会话通过 cookie 实现）。但是您需要某种跟踪；我想到的选项是：

*   将客人信息存储在数据库中（IP、MAC 等）
*   创建登录系统（存储上次登录时间戳）

然后，一旦你有了最后一次访问时间戳，我想你就可以弄清楚了。

> 用户不在网站上？

这是一个非常受讨论的话题。您可以轻松找到大量 StackOverflow 问题。

简短的故事是：如果您可以使用 Javascript，那么您可以获得相当不错的精度（低至约 5 秒的跨度，不鼓励更少），如果您不这样做，那么您将设置分钟数（我们称之为X) 之后用户被定义为*AFK* /*Offline*（大部分时间为 10-15 分钟）。

基本思想如下（Javascript 的超时函数，否则按请求）：

*   将用户向服务器发出的最后一次请求的时间戳存储到`last_seen`
*   需要时获取`last_seen`并将其与`time()`.
*   如果差异 < X（其中 X 是上面定义的时间），则用户打开，否则关闭

*注意：以 Javascript 为例，如果您将超时功能设置为每 5 秒发送一次请求，您可以轻松地检查 X = 10 秒的时间（精度约为 10 秒）。*

# jquery - 使用 jQuery 从选择中发布所有选项

> ID：15734382
> 
> 赞同：0
> 
> 时间：2013-03-31T20:51:12.400
> 
> 标签：jquery

我试图在一个选择中发布我的所有选项，到目前为止我只发布一个值。我应该添加什么来发布我的表单中的所有选项？

这是我到目前为止得到的代码

```
 $('.add_button').click(function () {
    $('.valj_grupp_email option:selected').each(function () {
        $("<option/>").
        val($(this).val()).
        text($(this).text()).
        appendTo(".valda_grupper_email");
    //-------------------Here I need help to select all my options in .valda_grupper_email_form-------------------------//  
            $.post(
            'mail_visa_kunder.php',
            $('.valda_grupper_email_form').serialize(),
            function(data){
            $("#testar3").html(data)
            }   
        );
        return false;
    //--------------------------------------------//

    });
}); 
```

表格示例：

```
<form class="valda_grupper_email_form" method="post">
   <select>
      <option value="1">test1</option>
      <option value="2">test2</option>
      <option value="3">test3</option>
   </select>
</form> 
```

我应该补充一点，我需要保留我的 html 代码。因为如果我想从我的选择列表中删除某些内容。

删除代码：

```
$('.delete_button').click(function () {
    $('.valda_grupper_email option:selected').each(function () {
        $(this).remove();
        $.post(
            'mail_visa_kunder.php',
            $('.valda_grupper_email_form').serialize(),
            function(data){
            $("#testar3").html(data)
            }   
        );
        return false; 
    });
}); 
```

我的应用程序的图片让您更容易理解。

![在此处输入图像描述](https://i.stack.imgur.com/EqlHi.png)

编辑：

```
$('.add_button').click(function () {
        var data = '';
        $('#valda_grupper_email option').each(function(){
            data += 'valda_grupper_email=' + $(this).val() + '&';
        });

        $.post(
            'mail_visa_kunder.php',
             data,
             function(data){
                $("#testar3").html(data)
             }   
         );
        return false;
    });
}); 
```

Edit2：它仍然只发布一个值，但现在我不需要选择它。接近解决方案:)

```
var emails =  '';
$('.add_button').click(function () {
    $('.valj_grupp_email option:selected').each(function () {
        $("<option/>").
        val($(this).val()).
        text($(this).text()).
        appendTo(".valda_grupper_email");

        $('.valda_grupper_email option').each(function(){
            emails += 'valda_grupper_email=' + $(this).val() + '&';
        });
        $.post(
            'mail_visa_kunder.php',
            emails,
            function(data){
            $("#testar3").html(data)
            }   
        );
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:56:59.657

我认为最简单的解决方案是将`selected`属性添加到每个选择并`multiple`在他们的选择上设置属性：

```
 $("<option/>")
      .val($(this).val())
      .text($(this).text())
      .attr('selected', true)
      .appendTo("#valda_grupper_email"); 
```

和

```
<form class="valda_grupper_email_form" method="post">
   <select id="valda_grupper_email" name="valda_grupper_email" multiple="multiple">
      <option value="1">test1</option>
      <option value="2">test2</option>
      <option value="3">test3</option>
   </select>
</form> 
```

在上面的代码中，我将类 'valda_grupper_email' 更改为 ID，因为我假设选择是唯一的，并且最好使用 ID 来定位唯一元素。

如果您不想更改标记而只更改 ajax 调用的方式，您可以这样做：

```
var emails =  '';
$('#valda_grupper_email option').each(function(){
    emails += 'valda_grupper_email[]=' + $(this).val() + '&';
});

$.post(
    'mail_visa_kunder.php',
     emails,
     function(data){
        $("#testar3").html(data)
     }   
 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:03:22.727

# [*jsFiddle*](http://jsfiddle.net/mohammadAdil/6QMKn/)

```
var all_options = [];

$("#valda_grupper_email option").each(function()
{
    all_options.push(this.value);
});

var myJsonString = JSON.stringify(all_options); 
```

现在您可以在 jquery 中发送 json 字符串`POST`

# java - 变换形状

> ID：15734388
> 
> 赞同：4
> 
> 时间：2013-03-31T20:51:56.290
> 
> 标签：java, transformation, shape

我有两点想以特定方式连接 - 请参阅第一张图片。我知道所有四个点的坐标。然后我需要将整个形状移动到坐标 [0, 0] 并旋转它，所以主要的两个点都在 x 轴上（见第二张图）。接下来，我只需要在**x 轴上**“挤压”形状，以便最后一个点具有坐标 [0, 1]（参见最后一张图片）。

![问题说明](https://i.stack.imgur.com/g2O2G.png)

我的问题是 - 如何在 Java 中有效地计算中间两点的坐标，而不需要手动分析数学？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T21:06:37.443

[java.awt.geom.AffineTransform](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/AffineTransform.html)可能是一个启动点。

该程序应用 3 个转换（以相反的顺序）：

```
import java.awt.geom.AffineTransform;

public class TransRotScal {

   public static void main( String[] args ) {
      double theta = Math.atan2( -15.0, 40.0 );
      AffineTransform trans = new AffineTransform(); // Identity
      trans.scale( 1/43.0, 1.0 );
      trans.rotate( theta );
      trans.translate( -10, -20 );
      double[] in = {
         10, 20,
         10, 30,
         50, 30,
         50, 35
      };
      double[] out = new double[in.length];
      trans.transform( in, 0, out, 0, in.length/2 );
      for( int ptNdx = 0; ptNdx < out.length; ptNdx += 2 ) {
         System.out.printf( "{%7.4f, %7.4f }\n", out[ptNdx], out[ptNdx+1]);
      }
   }
} 
```

输出：

```
{ 0,0000,  0,0000 }
{ 0,0817,  9,3633 }
{ 0,9527, -4,6816 }
{ 0,9935,  0,0000 } 
```

为了给出这个答案，我写了一个小程序，但我希望有一个更简单的程序，为此我发布了这个问题：[Affine transforms for graph, not for text and labels](https://stackoverflow.com/questions/15742563/affine-transforms-for-graph-not-for-text-and-labels)。

# c# - C#MVC。如何将新项目用作单独的区域？

> ID：15734390
> 
> 赞同：2
> 
> 时间：2013-03-31T20:51:58.410
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-areas

我是 C# 和 MVC 架构的新手。但我正在努力学习，并希望能走上正轨。我正在构建的应用程序将需要一个前端和管理区域。两者都有不同的界面并被不同的人使用，所以我认为分离它的最好方法是为每个项目创建一个单独的项目，使用单独的控制器和视图，所有这些都共享相同的模型。

但是，我似乎无法将项目注册为单独的区域。nopCommerce 为他们的管理控制面板执行此操作，我尝试查看代码但找不到差异。

在我的新“管理员”项目中，我有一个带有以下代码的区域注册文件：

```
using System.Web.Mvc;

namespace cmsApp.Areas.Admin
{
public class AdminAreaRegistration : AreaRegistration
{
    public override string AreaName
    {
        get
        {
            return "Admin";
        }
    }

    public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "Admin_default",
            "cmsAdmin/{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", area = "Admin", id = UrlParameter.Optional },
            new[] { "cmsApp.cmsAdmin.Controllers" }
        );
    }
}
} 
```

我将不胜感激有关此问题的任何进一步信息..

我已经包含了我正在处理的源代码，如果有人愿意查看完整代码：[https ://dl.dropbox.com/u/3901723/cmsApp.rar](https://dl.dropbox.com/u/3901723/cmsApp.rar)

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:57:11.143

如果您已绑定并确定要拥有单独的项目，那么您可以使用 Portable Areas，它是 MVC Contrib 项目的一部分。

[http://mvccontrib.codeplex.com/](http://mvccontrib.codeplex.com/)

但是，您不需要为了拥有不同的 UI 而拥有单独的项目。默认情况下，区域有自己的视图和共享视图区域，并使用单独的母版页。因此，您可以使用正常区域并仍然保持两种不同的外观和感觉、不同的代码以及其他任何内容。

使用单独项目的唯一原因是：

1.  你有不同的人在为每个人工作，并希望让他们在物理上分开以便于开发。
2.  您想让便携式区域成为“插件”之类的东西，在我看来并非如此。
3.  您希望将这些区域与主应用程序分开部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:56:48.450

您的命名空间看起来不对。

```
context.MapRoute(
    "Admin_default",
    "cmsAdmin/{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", area = "Admin", id = UrlParameter.Optional },
    new[] { "cmsApp.Areas.Admin.Controllers" }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T20:56:54.230

也许您在 global.asax 中缺少 RegisterAllAreas() ？

# cocos2d-iphone - 为什么 Cocos2D 更新仅在从子级向父级的 CCSpriteBatchNode 添加精灵时触发

> ID：15734399
> 
> 赞同：2
> 
> 时间：2013-03-31T20:52:40.277
> 
> 标签：cocos2d-iphone, ccspritebatchnode

我不明白为什么会发生以下情况，我希望这里的人能解释一下。

我有一个 GameLayer (CCLayer) 类和一个 Food (CCNode) 类。

在 Gamelayer 类中，我创建了一堆具有 sprite 作为属性的食物对象。我想将这些精灵添加到 CCSpriteBatchNode。

```
spriteBatch = [CCSpriteBatchNode batchNodeWithFile:@"bol.png"];
[self addChild:spriteBatch]; 
for (int i = 0; i < 1000; i++) {

   Food * tempfood = [Food foodWithParentNode:self];

   [spriteBatch addChild:[tempfood mySprite]];

   [self addChild:tempfood];

 } 
```

当我使用上面的代码时，精灵都显示在屏幕上，但不会移动。（他们应该是因为我在食品类中安排了更新（见下文），并且在此更新中食品对象的位置发生了变化）

```
-(id)initWithParentNode:(CCNode *)parentNode{

if((self = [super init]))
{
    mySprite = [CCSprite spriteWithFile:@"bol.png"];

    CGSize screenSize = [[CCDirector sharedDirector] winSize];

    [[self mySprite] setPosition:CGPointMake(screenSize.width/2, screenSize.height/2)];

    [self scheduleUpdate];

}

return self;
}
-(void) update:(ccTime)delta
{
  ... DO SOME position calculations ...

 [[self mySprite] setPosition:CGPointMake(newX, newY)];
} 
```

但是，如果我将添加精灵到批次的代码从游戏类移动到食物类，那么改变位置的更新确实有效并且食物在屏幕上移动。但为什么？

所以这给出了：

```
-(id)initWithParentNode:(CCNode *)parentNode{

if((self = [super init]))
{
    mySprite = [CCSprite spriteWithFile:@"bol.png"];

    CGSize screenSize = [[CCDirector sharedDirector] winSize];

    [[self mySprite] setPosition:CGPointMake(screenSize.width/2, screenSize.height/2)];

    [[ (GameLayer*) parentNode spriteBatch] addChild:mySprite];

    [self scheduleUpdate];

}

return self;
} 
```

我真的看不出打电话之间的区别

```
[[ (GameLayer*) parentNode spriteBatch] addChild:mySprite]; 
```

来自食品类或：

```
[spriteBatch addChild:[tempfood mySprite]]; 
```

来自“父”GameLayer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T15:32:03.233

鲁本，mySprite 是具有保留属性的属性吗？Food 类可能会丢失此属性的内存引用...

在初始化时，尝试使用 self.mySprite 设置 mySprite，以保留它。

在 .m 或 .h 上，输入：

```
@property (nonatomic, retain) CCSprite *mySprite 
```

在初始化时，使用：

```
self.mySprite = [CCSprite spriteWithFile:@"bol.png"]; 
```

# xcode - gcd 块中的 100% 内存泄漏

> ID：15734400
> 
> 赞同：2
> 
> 时间：2013-03-31T20:52:42.680
> 
> 标签：xcode, cocoa, memory-leaks, instruments, grand-central-dispatch

我有一个启用弧的项目，它具有 PersonModel 类：

```
// .h
@interface PersonModel : NSObject

@property (strong, nonatomic) NSString *photoUrl;
@property (strong, nonatomic) UIImage *photo;
@property (strong, nonatomic) NSString *fio;

@end

// .m
@implementation PersonModel

@synthesize photoUrl;
@synthesize photo = _photo;
@synthesize fio;

- (UIImage *)photo
{
    if (_photo == nil && self.photoUrl) {
        _photo = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:self.photoUrl]]];
    }

    return _photo;
}

@end 
```

photo getter 使用 gcd 调用：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{

    UIImage *cellImage = model.photo;

}); 
```

在线的

```
_photo = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:self.photoUrl]]]; 
```

Instruments 显示 100% 内存泄漏。据我所知，arc 不适用于除主线程之外的线程。那么有没有办法解决这个问题呢？

# r - SVGAnnotation 为 R 热图中的每个值创建工具提示

> ID：15734407
> 
> 赞同：3
> 
> 时间：2013-03-31T20:53:31.487
> 
> 标签：r, svg, heatmap

我想在 R 中创建一个我想在网站上使用的热图。我偶然发现了 SVGAnnotation 包，它似乎非常适合在 R 中处理 SVG 图形以使其更具交互性。首先，我计划为热图中的每个单元格添加工具提示 - 如果用户将鼠标悬停在单元格上，则应该弹出该单元格的值。但是，我现在与 SVGAnnotation 斗争了 3 个多小时，阅读并尝试了一些东西，但我无法让它工作。

我将不胜感激有关 SVGAnnotation 工具提示功能的任何帮助。但我也非常感谢 SVGAnnotation 的替代品为我的 R SVG 热图添加一些活动。

所以，到目前为止我得到的看起来像这样：

```
 library(SVGAnnotation)
    data(mtcars)
    cars <- as.matrix(mtcars)

    map <- svgPlot(heatmap(cars))

    addToolTips(map, ...)   # problem

    saveXML(map, "cars.svg") 
```

我猜我的问题是 addToolTips 函数本身。直观地说，我会简单地插入数据矩阵，即 ，`cars`但这不起作用并且 R 卡住了（它正在计算，但没有返回任何东西，我等了 50 分钟）

编辑：经过更多的在线研究，我找到了我想要实现的一个很好的例子：http: [//online.wsj.com/article/SB125993225142676615.html#articleTabs=interactive](http://online.wsj.com/article/SB125993225142676615.html#articleTabs=interactive)

这张热图看起来非常棒，交互功能（工具提示）也很好用。我想知道他们是怎么做到的。对我来说，看起来图形是在 R 中使用 ggplot 包完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T04:33:35.053

如果您仍然有兴趣将工具提示添加到热图，我编写了一个命令行工具，它可以完全做到这一点。它在 Windows/Linux/MacOS 终端中运行。作为输入，您需要的只是作为 svg 文件的热图和用作输入以将热图创建为 csv 或其他文本文件的数据表/矩阵。

# python - 使用 re 拆分字符串并将包含在撇号内的子字符串组合在一起

> ID：15734413
> 
> 赞同：1
> 
> 时间：2013-03-31T20:54:14.030
> 
> 标签：python, string, split

```
out = ("First Name,Last Name,Street Address,City,State,Zip Code",",") 
```

我正在尝试使用 re 将字符串拆分为以下内容：

```
['First Name', 'Last Name', 'Street Address', 'City', 'State', 'Zip Code'] 
```

我的输出是：

```
['First', 'Name', 'Last', 'Name', 'Street', 'Address', 'City', 'State', 'Zip', 'Code'] 
```

如何拆分字符串并将撇号内包含的任何子字符串组合在一起。

我使用 re 的经验很少，所以任何帮助都会很棒。谢谢。

我的代码：

```
import re

def split_string(source, splitlist):

    """

    :param source:
    :param splitlist:
    """
    splitlist= re.findall("[\w]+|[*]",source)

    return splitlist 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:57:23.017

您可以`str.split()`在这里简单地使用：

```
In [41]: out = ("First Name,Last Name,Street Address,City,State,Zip Code",",")

In [42]: for x in out:
   ....:     if x.replace(",",""):      #check if the string is not empty
   ....:         print x.split(",")
   ....:         
['First Name', 'Last Name', 'Street Address', 'City', 'State', 'Zip Code'] 
```

使用`re.split()`：

```
In [10]: strs='First Name,Last Name,Street Address,City,State,Zip Code'

In [11]: re.split(r',',strs)
Out[11]: ['First Name', 'Last Name', 'Street Address', 'City', 'State', 'Zip Code'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T20:57:08.770

也许你应该只使用`out.split(",")`而不是重新？除非是为了特定的运动...

# playframework - Play Framework 的帮助是如何实现的？

> ID：15734414
> 
> 赞同：2
> 
> 时间：2013-03-31T20:54:32.077
> 
> 标签：playframework, chm

[我是Play Framework 使用](http://www.playframework.com/documentation/2.1.0/Home)的网络帮助的忠实粉丝。原因如下：

*   很容易从同一个地方获取任何版本的文档（一直回到 1.0）
*   所有文档都有相同的样式（1.0 文档看起来和 2.1.0 文档一样好）
*   易于阅读的 URL（没有许多其他网络帮助系统似乎使用的 iframe 废话）

我目前正在`.chm`为我的应用程序文档使用 good old。我正在构建一个`.chm`网站转换器，以便我可以将文档放到网上。

在我走得太远之前，有人知道 Play Framework 网络帮助系统是如何实现的吗？是否可以在某处下载源代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:24:00.037

我认为他们使用降价，[这里是帮助来源](https://github.com/playframework/Play20/tree/master/documentation/manual)

我不知道 Play 的文档系统详细信息，无论如何，为我自己的应用程序实现类似的东西大约需要 2 个小时，使用类似于 StackOverflow (javascript) 上使用的这个“编辑器”。

您可以使用 Java 的示例[markdownj](http://search.maven.org/#artifactdetails%7Corg.markdownj%7Cmarkdownj%7C0.3.0-1.0.2b4%7Cjar) lib 和[Pagedown](https://code.google.com/p/pagedown/)作为编辑器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T07:43:13.043

这个过程很简单。他们的文档靠近 Git 中的源代码，因此他们可以从 Git（标记、合并/冲突）中受益。

它是用 Markdown 编写的，因此使用简单的文本编辑器很容易编写。[然后使用Pegdown 库](https://github.com/sirthias/pegdown)将其转换为 HTML 文件。

对于这个过程的一个例子，你可以看看这个项目：[https ://github.com/ndeverge/play2-docs-renderer](https://github.com/ndeverge/play2-docs-renderer)

它将 Markdown 文件从 Github 存储库动态转换为 HTML 文件。你可以在这里看到结果：http: [//play2-docs-snapshot.herokuapp.com/](http://play2-docs-snapshot.herokuapp.com/)

# variables - 具有可变上限的 For 循环

> ID：15734415
> 
> 赞同：3
> 
> 时间：2013-03-31T20:54:46.527
> 
> 标签：variables, for-loop, wolfram-mathematica

我想在 Mathematica 9 中编写一个带有可变上限的 for 循环。所以，而不是

```
 j = 0;
  For[n = 1, n <= 3, n++, j = j + n];
  j
  (*6*) 
```

我想做

```
 N = 3;
  j = 0;
  For[n = 1, n <= N, n++, j = j + n];
  j
  n
  (*
  0
  1
  *) 
```

. 但是，如图所示，这根本不会给出正确的结果。从值来看`n`，循环体根本没有被评估。

我已经查看了有关 for 循环和更一般的循环和控制结构的 Mathematica 文档（并且还进行了一些 DuckDuckGo 搜索），但我仍然缺少一些基本的东西。它是什么？

为了完整起见，我应该注意我的最终目标是将它放在一个函数中：

```
foo[N] =
 Module[{j = 0},
   For[n = 1, n <= N, n++, j = j + n;];
   j]
foo[3] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:00:13.550

您的代码显示了几个常见的新用户问题。例如：

*   `N`是保留字
*   你不应该用大写字母开始你的标识符
*   该函数`foo[]`应使用 SetDelayed ( `:=`) 定义，而不是 Set ( `=`)
*   您需要`_`在函数定义参数中使用模式 ( )
*   `For[]`在 Mathematica 中，一般应避免循环和迭代

我认为您可以仔细阅读[这篇文章](https://mathematica.stackexchange.com/questions/18393/what-are-the-most-common-pitfalls-awaiting-new-users)的所有答案，以更好地掌握 Mathematica。

无论如何，您的代码可能会被重写为

```
foo[k_] := Module[{j = 0}, For[n = 1, n <= k, n++, j = j + n]; j]
foo[3]
(*6*) 
```

但这是可怕的 Mathematica 编码。
以下是 Mathematica 中更好的方法：

```
foo[j_ , k_] := Fold[Plus, j, Range@k]
foo[j_ , k_] := j + Total@Range@k
foo[j_ , k_] := j + Tr@Range@k 
```

# java - 如何从 java 启动 cmd.exe？

> ID：15734416
> 
> 赞同：2
> 
> 时间：2013-03-31T20:54:56.990
> 
> 标签：java, process, cmd

在 .net 中，如果我想打开一个新的命令行窗口，我可以写。

```
 System.Diagnostics.Process.Start("cmd.exe"); 
```

然而，在 java 中，下面的代码什么也不做：

```
 new java.lang.ProcessBuilder("cmd.exe").start();
    java.lang.Runtime.getRuntime().exec("cmd.exe"); 
```

没有创建新窗口，也没有进程出现在任务管理器中。

现在，如果我试图打开的应用程序是“notepad.exe”，那么 java 会很好地打开它。

这是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T21:02:30.130

```
Runtime.getRuntime().exec(new String[]{"cmd.exe","/c","start"}); 
```

要[了解有关 start](http://www.computerhope.com/starthlp.htm)的更多信息，请`help start`在命令提示符下键入。

# c++ - C++中的字符串，字符比较

> ID：15734417
> 
> 赞同：0
> 
> 时间：2013-03-31T20:55:06.987
> 
> 标签：c++, string, char, ascii, string-comparison

*你好！我正在制作程序，用户输入一个句子，程序打印出一个句子中有多少个字母（大写和非大写）。我做了一个程序，但它打印出奇怪的结果。请尽快提供帮助。:)

```
include <iostream>
include <string>
using namespace std;

int main()
  {
string Sent;

 cout << "Enter a sentence !"<<endl;
 cin>>Sent;

    for(int a=0;a<Sent.length();a++){

        if (96<int(Sent[a])<123 || 64<int(Sent[a])<91){
           cout << "this is letter"<< endl;
        }else{
            cout << "this is not letter"<< endl;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T20:59:38.837

首先你会得到一个而且只有一个词。`cin >> Sent`不会提取整行。你必须使用[`getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)才能做到这一点。

其次，你应该使用[`isspace`](http://en.cppreference.com/w/cpp/string/byte/isspace)or[`isalpha`](http://en.cppreference.com/w/cpp/string/byte/isalpha)来检查字符是否为空格/字母数字符号。

第三，`a < b < c`本质上与 相同`(a < b) < c`，这根本不是您的意思 ( `a < b && b < c`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:01:38.347

您可以使用 std::alpha 执行以下操作：

```
#include <iostream>
#include <string>
#include <cctype> 
using namespace std;

int main()
{
   string Sent;

    cout << "Enter a sentence !"<<endl;
    //cin >> Sent;
    std::getline (std::cin,Sent);
    int count = 0;

     for(int a=0;a<Sent.length();a++){
        if (isalpha(Sent[a])
        {
          count ++;
         }
      }
      cout << "total number of chars " << count <<endl;

  } 
```

如果您的输入包含空格，则使用它`getline`比使用更好。`cin>>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:00:09.353

```
if (96 < Sent[a] && Sent[a]<123 || 64 < Sent[a] && Sent[a]<91) 
```

这就是你想要的，因为：

```
96<int(Sent[a])<123 
```

将评估`96<int(Sent[a]),`为 bool，然后将其（即 0 或 1）与 123 进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T21:00:37.373

这条线

`if (96<int(Sent[a])<123 || 64<int(Sent[a])<91)`

一定是这样的

`if ((96<int(Sent[a]) && int(Sent[a])<123) || (64<int(Sent[a]) && int(Sent[a])<91))`

但我建议使用头文件`isalpha()`中定义的函数。`cctype`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T20:58:18.707

```
if (96<int(Sent[a])<123 || 64<int(Sent[a])<91){ 
```

这是错误的。您无法使用此表示法进行比较。你必须这样做：

```
if( Sent[a] > 96 && Sent[a] < 122 || .... 
```

# java - Java Sax Parser 只返回标签的一行

> ID：15734418
> 
> 赞同：1
> 
> 时间：2013-03-31T20:55:08.037
> 
> 标签：java, xml, rss, saxparser, rss-reader

我正在尝试解析 xml 中的描述标签，但它只输出一行：

```
description: <img src=http://www.ovations365.com/sites/ovations365.com/images/event/441705771/sparkswebsite_medium.jpg alt="SPARKS: Understanding Energy"> 
```

这只是 CDATA 中文本的一小部分，我正在尝试输出多个项目的描述。为什么我不能得到整个 CDATA？

XML 位于： http: [//feeds.feedburner.com/Events-Ovations365](http://feeds.feedburner.com/Events-Ovations365)

```
package com.example.ovations_proj;

import java.util.ArrayList;
import java.util.List;
import java.util.StringTokenizer;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

import com.example.ovations_proj.RssItem;

public class RssParseHandler extends DefaultHandler {

    private List<RssItem> rssItems;

    // Used to reference item while parsing
    private RssItem currentItem;

    // Parsing title indicator
    private boolean parsingTitle; 
    // Parsing link indicator
    private boolean parsingLink; 
    private boolean parsingDes;

    public RssParseHandler() {
        rssItems = new ArrayList<RssItem>();
    }

    public List<RssItem> getItems() {
        return rssItems;
    }

    @Override
    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
        System.out.println("Start Element :" + qName);
        if ("item".equals(qName)) { //item
            currentItem = new RssItem();
        } else if ("title".equals(qName)) { //title
            parsingTitle = true;
        } else if ("link".equals(qName)) { //link
            parsingLink = true;
        }else if ("description".equals(qName) ) { //description
            parsingDes = true;
        }

    }

    @Override
    public void endElement(String uri, String localName, String qName) throws SAXException {
        System.out.println("End Element :" + qName);
        if ("item".equals(qName)) {
            rssItems.add(currentItem);//item
            currentItem = null;         
        } else if ("title".equals(qName)) {//title
            parsingTitle = false;
        } else if ("link".equals(qName)) {//link
            parsingLink = false;
        } else if ("description".equals(qName) ) {  //description

            parsingDes = false;         
        }
    }

    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
        if (parsingTitle) {
            if (currentItem != null){
                currentItem.setTitle(new String(ch, start, length));                
            }
        } else if (parsingLink) { 
            if (currentItem != null) {
                currentItem.setLink(new String(ch, start, length));
                parsingLink = false;
            }
        } else if (parsingDes) {       
            if (currentItem != null) {                      
                currentItem.setDes(new String(ch, start, length));
                System.out.println("description:  "  + currentItem.getDes());
                parsingDes = false;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:35:56.573

似乎这些`<![CDATA[...]]>`部分中的字符数据是在多个块中发送的，即在对该`characters`方法的多次调用中。

该[方法的](http://docs.oracle.com/javase/6/docs/api/org/xml/sax/ContentHandler.html#characters%28char%5b%5d,%20int,%20int%29)[ContentHandler 文档`characters`](http://docs.oracle.com/javase/6/docs/api/org/xml/sax/ContentHandler.html#characters%28char%5b%5d,%20int,%20int%29)提到 SAX 解析器可以自由地执行此操作：

> SAX 解析器可以在单个块中返回所有连续的字符数据，或者它们可以将其分成几个块[....]

因此，您需要调整`characters`方法以处理对同一块连续字符数据的多次调用。

# wpf - 在不是中继器类型的控件中，我可以在哪里使用 DataTemplate？

> ID：15734421
> 
> 赞同：1
> 
> 时间：2013-03-31T20:55:33.667
> 
> 标签：wpf, xaml, datatemplate

好的，我知道这有点奇怪，但我正在尝试创建一个数据驱动面板，该面板根据我在对象上拥有的 DataTemplate 成员重新配置自身。现在，我通过使用绑定到 1 个虚假项目的虚拟列表的 ItemsControl 来完成此操作，以便获得数据模板的单个实例。必须在 ItemsControl 中执行此操作似乎很愚蠢，但如果不尝试针对项目列表执行此操作，我想不出任何会使用我的 DataTemplate 的东西。有人知道吗？

为了清楚起见，假设我有一个 Widget 类：

```
public class Widget
{
   public string Name { get; set; }
   public DataTemplate MyTemplate { get; set; }

   public List<object> DummyList = new List<object> { new object(); } 
} 
```

和 Xaml 类似：

```
<ItemsControl ItemsSource={Binding DummyList} ItemTemplate={Binding MyTemplate}/> 
```

然后，我可以创建一组小部件，并根据对象的状态使用正确的数据模板填充每个小部件。

无论如何，正如我所说，这行得通......如果有人知道的话，我只想找到一个比使用 ItemsControl 更优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:04:11.120

```
<ContentPresenter ContentTemplate="{Binding MyTemplate}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:09:08.943

如果您`ContentTemplate="{Binding template}"`的控件（您希望动态修改其内容 - 例如 Button inside 等）是`ContentControl`. 我发现这经常被“忽略”，因为它不是立即可见或直观的，但可以节省您添加额外的“内容”。

或者您可以使用`ContentControl`- 或已建议的演示者。

# ajax - 实现ajax推送

> ID：15734422
> 
> 赞同：2
> 
> 时间：2013-03-31T20:55:37.400
> 
> 标签：ajax, web, push

这是一个非常普遍的问题。我打算编写一个简单的 SNS，它支持客户端发送单词（如 twitter 和 facebook）。而且，如果有人的推特有回复，我希望网页快速跳出一个提示。在这种情况下，我不想使用轮询方法。我在互联网上搜索，发现 AJAX Push 是实现它的好方法，我发现了 APE 或 Comet 之类的东西。我在我的 Mac 上使用 LAMP（apache 服务器）架构作为本地主机。我需要将服务器更改为支持 ajax 推送的服务器吗？或者我可以在 apache 上实现 ajax 推送。我真的很困惑。

# actionscript-3 - 为什么我不能在 actionscript 3 中 addChild()？

> ID：15734426
> 
> 赞同：0
> 
> 时间：2013-03-31T20:56:15.637
> 
> 标签：actionscript-3

可能是一个非常简单的问题，但我一直在尝试解决这个问题......

我正在尝试在舞台上添加一个孩子来代表游戏得分，如下所示：

```
var gameScoreField:TextField = new TextField();
var gameScore:int = 0;

public function Game()
{
    // add score
    gameScoreField.text = "Score: " + gameScore;
    gameScoreField.embedFonts = true;
    var format:TextFormat = new TextFormat();
    format.font = "Tahoma";
    gameScoreField.setTextFormat(format);
    addChild(gameScoreField);
} 
```

但是当我运行游戏时，它并没有显示在舞台上。我没有错误，也没有警告。

为什么是这样？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:38:30.430

*公众礼貌将其从未答复的列表中删除。如果他们愿意，欢迎提问者或回答者发布他们自己的答案，而不是接受这个答案。*

**提问者需要嵌入 Tahoma 字体，或设置`embedFonts`为`false`.**

# wpf - 通过 DataTemplate 显示不同的 UserControl 实例

> ID：15734428
> 
> 赞同：0
> 
> 时间：2013-03-31T20:56:27.543
> 
> 标签：wpf, mvvm, datatemplate

```
<UserControl x:Name="AView" .... />
public class AViewModel { .. }

<UserControl x:Name="ParentView">
  <UserControl.Resources>
    <DataTemplate DataType={x:Type vm:AViewModel}>
      <vw:AView />
    </DataTemplate>
  </UserControl.Resources>

  <Grid.ColumnDefinitions>
    <ColumnDefinition />
    <ColumnDefinition />
  </Grid.ColumnDefinitions>

  <ContentControl Content="{Binding PropertyA}" />
  <ContentControl Content="{Binding PropertyB}" Grid.Column="1" />
</UserControl

public class ParentViewModel
{
    public AViewModel PropertyA {get;set;}
    public AViewModel PropertyB {get;set;}
} 
```

PropertyA 和 PropertyB 持有对不同 AViewModel 实例的引用。

问：如何在绑定到 PropertyA 和 PropertyB 的 ContentControl 中显示**不同**的 AView 实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:52:50.183

您发布的 XAML 将`AView`在每个`ContentControl`.

# css - 如何为绝对定位的 div 添加底部边距？

> ID：15734429
> 
> 赞同：1
> 
> 时间：2013-03-31T20:56:35.000
> 
> 标签：css, margin, css-position

我的网页左侧有一个 div，它根据其内容扩展到不同的高度。有时它的内部内容会导致 div 扩展到页面底部。但是，我希望在底部有一个边距，所以它实际上并没有到达页面的底部。如何添加必要的保证金？我尝试添加`margin-bottom:50px`到`.wrap`，但没有奏效。

HTML：

```
<div class="wrap">Contents</div> 
```

CSS：

```
.wrap {
    position:absolute;
    top:40px;
    min-width:220px;
    left:0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:03:23.907

I had `overflow:hidden;` in the class `wrap`. That was the problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:09:32.877

用于`bottom:50px;`.wrap div。您定位了 div，因此您可以按左、右、上、下设置位置。它总是从底部向上 50px。

```
.wrap {
position:absolute;
top:40px;
min-width:220px;
left:0;
bottom: 50px;
} 
```

# python - 是否可以通过累积计划任务来使工作人员死锁？

> ID：15734433
> 
> 赞同：3
> 
> 时间：2013-03-31T20:56:45.073
> 
> 标签：python, celery, django-celery, worker

通过代码：

```
@celery.task()
def some_recursive_task():
    # Do some stuff and schedule it to run again later
    # Note that the next run is not scheduled in a fixed basis, like crontabs
    # but based on history of some object
    # Actual task is found here: 
    # https://github.com/rafaelsierra/cheddar/blob/master/src/feeds/tasks.py#L39
    # Then it call himself again
    countdown = bla.get_countdown()
    some_recursive_task.apply_async(countdown=countdown) 
```

此任务将在接下来的 10 分钟和 12 小时内运行，但此任务还调用另一个现在应该运行的任务，[一个用于下载](https://github.com/rafaelsierra/cheddar/blob/master/src/feeds/tasks.py#L17)内容，另一个[用于解析它](https://github.com/rafaelsierra/cheddar/blob/master/src/feeds/tasks.py#L30)。

问题是数据库上的每条记录都会调用主函数，假设有几百个任务正在运行，但是考虑到这些任务平均每隔几个小时运行一次，任务的数量并不是什么大问题。

当我尝试使用单个工作人员运行它时，问题就开始了，当我启动工作人员时，我把它运行所有队列并设置 8 个并发工作人员，然后它开始开始确认任务，但似乎不管任务设置在多远的将来，工作人员将获得它并等待其预定的运行，这意味着该工作人员在此之前被锁定。

我知道我可以将另外两个函数拆分为不同的队列，我已经这样做了，但我担心工作人员会确认任务提前 12 小时运行，而不会在 30 分钟内运行它应该运行的任务。

工作人员不应该在时间之前忽略计划任务并运行那些没有时间就延迟的任务吗？

我不认为或不知道如何[定期任务](http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html)是一种解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T07:47:01.683

见那里的第 5 点和第 6[点](http://docs.celeryproject.org/en/latest/internals/reference/celery.worker.consumer.html#id1)。请记住，这与任务的论点`countdown`没有什么不同。`eta`

简而言之，你是对的。单个工作人员（或任何数量的工作人员）不应阻塞**计划**的（`eta`或`countdown`）任务。

你怎么知道工人被锁了？**计划**任务从队列中预取，但在执行之前不会被确认。

另外，请记住，所有**计划**任务都保存在 RAM 中，直到它们被执行。您希望它们尽可能轻。据我了解，**计划**任务不会传递大块数据，可能只有一些*URI*，所以这应该不是问题。

您粘贴的链接返回 404。您确定`cheddar`不是私有存储库吗？

# c - C中的顺序合并排序

> ID：15734435
> 
> 赞同：3
> 
> 时间：2013-03-31T20:56:49.000
> 
> 标签：c, merge, mergesort

我正在尝试重新编写递归合并排序，例如

```
void MergeSort(int* data, int size){
  int half=size/2;
  if (size > 1) {
    MergeSort(data, half);
    MergeSort(data+half, half);
    Merge(data, size);
  }
} 
```

其中

```
void Merge(int* data, int size){
  int cnt;
  int cntLow=0;
  int half=size/2;
  int cntHigh=half;
  int* sorted;

  sorted = (int*) malloc(size*sizeof(int));

  for (cnt=0; cnt<size; cnt++){
    if (cntLow == half) 
      sorted[cnt] = data[cntHigh++];
    else if (cntHigh == size)
      sorted[cnt] = data[cntLow++];
    else if (data[cntLow] <= data[cntHigh])
      sorted[cnt] = data[cntLow++];
    else
      sorted[cnt] = data[cntHigh++];
  }

  for (cnt=0; cnt<size; cnt++)
    data[cnt] = sorted[cnt];

  free(sorted);
} 
```

到非递归调用。所以我写了这个函数

```
void MergeSort_NonRecursive(int* data, int size){
    int i;
    int j;

    for (i=size; i>0; i=i/2){
        for (j=0; j<i; j++){
            Merge(data + j*size/i, size/i);
        }
    }
} 
```

这显然适用于大小为 $2^n$ 的序列。但是，当我以不同于 $2^n$ 的大小序列运行它时，它的排序不正确，所以在某些时候`MergeSort_NonRecursive`，我的代码一定是错误的。

那么我在哪里做错了（在`MergeSort_NonRecursive`）？（另外，我需要使用该`Merge`功能）。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T20:58:54.980

由于 size 是一个 int，因此 size/2 会截断您的商。

例如，如果 size=4，size/2 = 2。如果 size=5，size/2 = 2。如果 size=6，size/2 = 3。

因此，对于 5 的大小，您希望第一次 MergeSort 递归调用对 size/2 个元素（即前 3 个）的运算符进行操作，第二次调用对剩余的 2 个元素进行操作。

你可以说例如

```
int half = size/2; //size = 5: half = 2
int rest = size - half; //rest = 3 
```

所以：

```
void MergeSort(int* data, int size){
  int half=size/2;
  int rest = size-half;
  if (size > 1) {
    MergeSort(data, half);
    MergeSort(data+half, rest); //changed this line
    Merge(data, size);
  }
} 
```

# 编辑：

看起来你在我发布之后稍微改变了这个问题。总体思路仍然成立：当您将一个 int 除以另一个 int 时，商将被截断。

在 your`MergeSort_NonRecursive`中，您将`int`s 划分为多个位置，例如`i=i/2`, `j*size/i`, `size/i`。注意你会得到的值。

# ios - 发送邮件 TableView NSArray

> ID：15734440
> 
> 赞同：1
> 
> 时间：2013-03-31T20:57:08.920
> 
> 标签：ios, objective-c, uitableview, mfmailcomposeviewcontroller

这是我的 NSObject 代码；

任务.h

```
#import <Foundation/Foundation.h>

@interface Task : NSObject

@property (nonatomic,strong) NSString *name;
@property (nonatomic,assign) BOOL done;

-(id)initWithName:(NSString *)name done:(BOOL)done;

@end 
```

任务.m

```
#import "Task.h"

@implementation Task

@synthesize name = _name;
@synthesize done = _done;

-(id)initWithName:(NSString *)name done:(BOOL)done {
    self = [super init];

    if (self) {
        self.name = name;
        self.done = done;
    }
    return self;
} 
```

这是我的发送邮件代码

```
Task *task = [[Task alloc]init];
        MFMailComposeViewController *sendmail = [[MFMailComposeViewController alloc]init];
        [sendmail setMailComposeDelegate:self];
        NSString *message = [_tasks addObject:task]; // Error is here.
        [sendmail setMessageBody:message isHTML:NO];
        [sendmail setSubject:@"Test"];
        [self presentViewController:sendmail animated:YES completion:nil]; 
```

我不知道，该怎么做。我只想用邮件发送列表。我的错误在哪里？我该如何解决这个问题？

* * *

任务列表视图控制器.m

```
@synthesize tasks = _tasks; 
```

* * *

我正在从任务表视图转移。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *NotDoneCellIdentifier = @"NotDoneTaskCell";
    static NSString *DoneCellIdentifier = @"DoneTaskCell";

    Task *currentTask = [self.tasks objectAtIndex:indexPath.row];

    NSString *cellIdentifier = currentTask.done ? DoneCellIdentifier : NotDoneCellIdentifier;

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier forIndexPath:indexPath];

    // Configure the cell...
    cell.textLabel.text = currentTask.name;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:19:31.493

我不知道你的代码到底出了什么问题，因为你没有提供错误，而且我对 Objective-C 还不是很精通。

我怀疑这是因为您引用了“_tasks”，我没有看到用于创建该类的其他代码。

```
NSString *message = [_tasks addObject:task]; 
```

另一个问题是您使用任务作为数组的输入对象，但它可能不包含任何内容。

你可能不想要这样的东西：

```
 Task *task = [[Task alloc] initWithName:@"Task 1"];
 NSString *message = [[NSString alloc] initWithFormat:@"Task name is %@", task.name]; 
```

另外我猜你还没有发布你的完整代码。

您还忘记在头文件中包含正确的应用内邮件框架：

```
#import <MessageUI/MFMailComposeViewController.h> 
```

不要忘记将框架也添加到您的项目中！

顺便说一句，您可以使用 删除这两行`synthesize`，编译器现在会自动执行此操作。不错吧？

# java - 从未选中的复选框中获取价值

> ID：15734441
> 
> 赞同：2
> 
> 时间：2013-03-31T20:57:16.497
> 
> 标签：java, html, forms, checkbox, playframework

我需要使用 Play 框架获取未选中复选框的值。如果我选中复选框，我可以获得值。

我的html如下

```
 <input type="checkbox" name="correctAnswer" value="true"> 
```

这就是我在控制器中获取数据的方式，这给了我一个只有选中框的数组

```
 String[] segaMega = request().body().asFormUrlEncoded().get("correctAnswer"); 
```

我曾尝试在复选框技巧之前执行隐藏字段，但效果不佳。play有什么可以帮助我的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:54:51.167

As per your comment, you really need to have both the checked values and the full list of values on server side. The best bet would have a hidden field in the form which will hold the values of your checkboxes concatenated by a separator. In this example, I'll use a pipe (`|`).

```
<script type="text/javascript">
    function beforeSubmitQuestion() {
        var hidden = document.getElementById("hidChxValues");
        hidden.value = "";
        var checkboxes = document.getElementsByName("correctAnswer");
        for(var i = 0; i < checkboxes.length; i++) {
            hidden.value += checkboxes[i].value + "|";
        }
        return false;
    };
</script>

<form id="yourForm" onsubmit="beforeSubmitQuestion(); ">
    <input type="hidden" id="hidChxValues" />

    <input type="checkbox" name="correctAnswer" value="true" /> Valid
    <br />
    <input type="checkbox" name="correctAnswer" value="false" /> Invalid
    <br />
    <input type="submit" />
</form> 
```

I've made a test in jsfiddle: [http://jsfiddle.net/tdDbg/](http://jsfiddle.net/tdDbg/) with the exception that I use a `type="text"` instead of `type="hidden"` in order to see the concatenated values and added `return false;` at the end of `onsubmit` to avoid form submission to the server (that will return in an error).

The server side code can be handled using Play or another technology, even plain Servlets.

# html - 带有标题和前 3 列固定的可滚动表

> ID：15734444
> 
> 赞同：0
> 
> 时间：2013-03-31T20:57:30.703
> 
> 标签：html, css, html-table

我有一个带有固定标题的表格，但标题和正文没有正确对齐。列数超过 25。如果我删除`"display:block"`，标题不固定。

这是我的代码

```
 <table width="100%" style="font-size:13px" id="data" cellpadding="4" cellspacing="5" border="2" class="scrollTable">
            <thead style="background:#e2e2e2" align="center" class="fixedHeader">
                <tr>
                    <th>Header 1</th>
                    <th>Header 2</th>
                    <th>Header 3</th>
                    <th>Header 4</th>
                    <th>Header 5</th>
                    <th>Header 6</th>
                    <th>Header 7</th>
                    <th>Header 8</th>
                    <th>Header 9</th>
                    <th>Header 10</th>
                    <th>Header 11</th>
                    <th>Header 12</th>
                    <th>Header 13</th>
                    <th>Header 14</th>
                    <th>Header 15</th>
                    <th>Header 16</th>
                    <th>Header 17</th>
                    <th>Header 18</th>
                    <th>Header 19</th>
                    <th>Header 20</th>
                    <th>Header 21</th>
                    <th>Header 22</th>
                    <th>Header 23</th>
                    <th>Header 24</th>
                    <th>Header 25</th>
                    <th>Header 26</th>
                    <th>Header 27</th>
                    <th>Header 28</th>
                    <th>Header 29</th>
                </tr>
            </thead>
            <tbody style="background:#f2f2f2;" align="center"   class="scrollContent">
               <tr>
                    <td>Data 1</td>
                    <td>Data 2</td>
                    <td>Data 3</td>
                    <td>Data 4</td>
                    <td>Data 5</td>
                    <td>Data 6</td>
                    <td>Data 7</td>
                    <td>Data 8</td>
                    <td>Data 9</td>
                    <td>Data 10</td>
                    <td>Data 11</td>
                    <td>Data 12</td>
                    <td>Data 13</td>
                    <td>Data 14</td>
                    <td>Data 15</td>
                    <td>Data 16</td>
                    <td>Data 17</td>
                    <td>Data 18</td>
                    <td>Data 19</td>
                    <td>Data 20</td>
                    <td>Data 21</td>
                    <td>Data 22</td>
                    <td>Data 23</td>
                    <td>Data 24</td>
                    <td>Data 25</td>
                    <td>Data 26</td>
                    <td>Data 27</td>
                    <td>Data 28</td>
                    <td>Data 29</td>
               </tr>
                                <tr>
                    <td>Data 1</td>
                    <td>Data 2</td>
                    <td>Data 3</td>
                    <td>Data 4</td>
                    <td>Data 5</td>
                    <td>Data 6</td>
                    <td>Data 7</td>
                    <td>Data 8</td>
                    <td>Data 9</td>
                    <td>Data 10</td>
                    <td>Data 11</td>
                    <td>Data 12</td>
                    <td>Data 13</td>
                    <td>Data 14</td>
                    <td>Data 15</td>
                    <td>Data 16</td>
                    <td>Data 17</td>
                    <td>Data 18</td>
                    <td>Data 19</td>
                    <td>Data 20</td>
                    <td>Data 21</td>
                    <td>Data 22</td>
                    <td>Data 23</td>
                    <td>Data 24</td>
                    <td>Data 25</td>
                    <td>Data 26</td>
                    <td>Data 27</td>
                    <td>Data 28</td>
                    <td>Data 29</td>
               </tr>
                                 <tr>
                    <td>Data 1</td>
                    <td>Data 2</td>
                    <td>Data 3</td>
                    <td>Data 4</td>
                    <td>Data 5</td>
                    <td>Data 6</td>
                    <td>Data 7</td>
                    <td>Data 8</td>
                    <td>Data 9</td>
                    <td>Data 10</td>
                    <td>Data 11</td>
                    <td>Data 12</td>
                    <td>Data 13</td>
                    <td>Data 14</td>
                    <td>Data 15</td>
                    <td>Data 16</td>
                    <td>Data 17</td>
                    <td>Data 18</td>
                    <td>Data 19</td>
                    <td>Data 20</td>
                    <td>Data 21</td>
                    <td>Data 22</td>
                    <td>Data 23</td>
                    <td>Data 24</td>
                    <td>Data 25</td>
                    <td>Data 26</td>
                    <td>Data 27</td>
                    <td>Data 28</td>
                    <td>Data 29</td>
               </tr>
                               <tr>
                    <td>Data 1</td>
                    <td>Data 2</td>
                    <td>Data 3</td>
                    <td>Data 4</td>
                    <td>Data 5</td>
                    <td>Data 6</td>
                    <td>Data 7</td>
                    <td>Data 8</td>
                    <td>Data 9</td>
                    <td>Data 10</td>
                    <td>Data 11</td>
                    <td>Data 12</td>
                    <td>Data 13</td>
                    <td>Data 14</td>
                    <td>Data 15</td>
                    <td>Data 16</td>
                    <td>Data 17</td>
                    <td>Data 18</td>
                    <td>Data 19</td>
                    <td>Data 20</td>
                    <td>Data 21</td>
                    <td>Data 22</td>
                    <td>Data 23</td>
                    <td>Data 24</td>
                    <td>Data 25</td>
                    <td>Data 26</td>
                    <td>Data 27</td>
                    <td>Data 28</td>
                    <td>Data 29</td>
               </tr>
                                <tr>
                    <td>Data 1</td>
                    <td>Data 2</td>
                    <td>Data 3</td>
                    <td>Data 4</td>
                    <td>Data 5</td>
                    <td>Data 6</td>
                    <td>Data 7</td>
                    <td>Data 8</td>
                    <td>Data 9</td>
                    <td>Data 10</td>
                    <td>Data 11</td>
                    <td>Data 12</td>
                    <td>Data 13</td>
                    <td>Data 14</td>
                    <td>Data 15</td>
                    <td>Data 16</td>
                    <td>Data 17</td>
                    <td>Data 18</td>
                    <td>Data 19</td>
                    <td>Data 20</td>
                    <td>Data 21</td>
                    <td>Data 22</td>
                    <td>Data 23</td>
                    <td>Data 24</td>
                    <td>Data 25</td>
                    <td>Data 26</td>
                    <td>Data 27</td>
                    <td>Data 28</td>
                    <td>Data 29</td>
               </tr>
                               <tr>
                    <td>Data 1</td>
                    <td>Data 2</td>
                    <td>Data 3</td>
                    <td>Data 4</td>
                    <td>Data 5</td>
                    <td>Data 6</td>
                    <td>Data 7</td>
                    <td>Data 8</td>
                    <td>Data 9</td>
                    <td>Data 10</td>
                    <td>Data 11</td>
                    <td>Data 12</td>
                    <td>Data 13</td>
                    <td>Data 14</td>
                    <td>Data 15</td>
                    <td>Data 16</td>
                    <td>Data 17</td>
                    <td>Data 18</td>
                    <td>Data 19</td>
                    <td>Data 20</td>
                    <td>Data 21</td>
                    <td>Data 22</td>
                    <td>Data 23</td>
                    <td>Data 24</td>
                    <td>Data 25</td>
                    <td>Data 26</td>
                    <td>Data 27</td>
                    <td>Data 28</td>
                    <td>Data 29</td>
               </tr>
                                <tr>
                    <td>Data 1</td>
                    <td>Data 2</td>
                    <td>Data 3</td>
                    <td>Data 4</td>
                    <td>Data 5</td>
                    <td>Data 6</td>
                    <td>Data 7</td>
                    <td>Data 8</td>
                    <td>Data 9</td>
                    <td>Data 10</td>
                    <td>Data 11</td>
                    <td>Data 12</td>
                    <td>Data 13</td>
                    <td>Data 14</td>
                    <td>Data 15</td>
                    <td>Data 16</td>
                    <td>Data 17</td>
                    <td>Data 18</td>
                    <td>Data 19</td>
                    <td>Data 20</td>
                    <td>Data 21</td>
                    <td>Data 22</td>
                    <td>Data 23</td>
                    <td>Data 24</td>
                    <td>Data 25</td>
                    <td>Data 26</td>
                    <td>Data 27</td>
                    <td>Data 28</td>
                    <td>Data 29</td>
               </tr>
                               <tr>
                    <td>Data 1</td>
                    <td>Data 2</td>
                    <td>Data 3</td>
                    <td>Data 4</td>
                    <td>Data 5</td>
                    <td>Data 6</td>
                    <td>Data 7</td>
                    <td>Data 8</td>
                    <td>Data 9</td>
                    <td>Data 10</td>
                    <td>Data 11</td>
                    <td>Data 12</td>
                    <td>Data 13</td>
                    <td>Data 14</td>
                    <td>Data 15</td>
                    <td>Data 16</td>
                    <td>Data 17</td>
                    <td>Data 18</td>
                    <td>Data 19</td>
                    <td>Data 20</td>
                    <td>Data 21</td>
                    <td>Data 22</td>
                    <td>Data 23</td>
                    <td>Data 24</td>
                    <td>Data 25</td>
                    <td>Data 26</td>
                    <td>Data 27</td>
                    <td>Data 28</td>
                    <td>Data 29</td>
               </tr>
                               <tr>
                    <td>Data 1</td>
                    <td>Data 2</td>
                    <td>Data 3</td>
                    <td>Data 4</td>
                    <td>Data 5</td>
                    <td>Data 6</td>
                    <td>Data 7</td>
                    <td>Data 8</td>
                    <td>Data 9</td>
                    <td>Data 10</td>
                    <td>Data 11</td>
                    <td>Data 12</td>
                    <td>Data 13</td>
                    <td>Data 14</td>
                    <td>Data 15</td>
                    <td>Data 16</td>
                    <td>Data 17</td>
                    <td>Data 18</td>
                    <td>Data 19</td>
                    <td>Data 20</td>
                    <td>Data 21</td>
                    <td>Data 22</td>
                    <td>Data 23</td>
                    <td>Data 24</td>
                    <td>Data 25</td>
                    <td>Data 26</td>
                    <td>Data 27</td>
                    <td>Data 28</td>
                    <td>Data 29</td>
               </tr>
                                 <tr>
                    <td>Data 1</td>
                    <td>Data 2</td>
                    <td>Data 3</td>
                    <td>Data 4</td>
                    <td>Data 5</td>
                    <td>Data 6</td>
                    <td>Data 7</td>
                    <td>Data 8</td>
                    <td>Data 9</td>
                    <td>Data 10</td>
                    <td>Data 11</td>
                    <td>Data 12</td>
                    <td>Data 13</td>
                    <td>Data 14</td>
                    <td>Data 15</td>
                    <td>Data 16</td>
                    <td>Data 17</td>
                    <td>Data 18</td>
                    <td>Data 19</td>
                    <td>Data 20</td>
                    <td>Data 21</td>
                    <td>Data 22</td>
                    <td>Data 23</td>
                    <td>Data 24</td>
                    <td>Data 25</td>
                    <td>Data 26</td>
                    <td>Data 27</td>
                    <td>Data 28</td>
                    <td>Data 29</td>
               </tr>
                                <tr>
                    <td>Data 1</td>
                    <td>Data 2</td>
                    <td>Data 3</td>
                    <td>Data 4</td>
                    <td>Data 5</td>
                    <td>Data 6</td>
                    <td>Data 7</td>
                    <td>Data 8</td>
                    <td>Data 9</td>
                    <td>Data 10</td>
                    <td>Data 11</td>
                    <td>Data 12</td>
                    <td>Data 13</td>
                    <td>Data 14</td>
                    <td>Data 15</td>
                    <td>Data 16</td>
                    <td>Data 17</td>
                    <td>Data 18</td>
                    <td>Data 19</td>
                    <td>Data 20</td>
                    <td>Data 21</td>
                    <td>Data 22</td>
                    <td>Data 23</td>
                    <td>Data 24</td>
                    <td>Data 25</td>
                    <td>Data 26</td>
                    <td>Data 27</td>
                    <td>Data 28</td>
                    <td>Data 29</td>
               </tr>
                                   <tr>
                    <td>Data 1</td>
                    <td>Data 2</td>
                    <td>Data 3</td>
                    <td>Data 4</td>
                    <td>Data 5</td>
                    <td>Data 6</td>
                    <td>Data 7</td>
                    <td>Data 8</td>
                    <td>Data 9</td>
                    <td>Data 10</td>
                    <td>Data 11</td>
                    <td>Data 12</td>
                    <td>Data 13</td>
                    <td>Data 14</td>
                    <td>Data 15</td>
                    <td>Data 16</td>
                    <td>Data 17</td>
                    <td>Data 18</td>
                    <td>Data 19</td>
                    <td>Data 20</td>
                    <td>Data 21</td>
                    <td>Data 22</td>
                    <td>Data 23</td>
                    <td>Data 24</td>
                    <td>Data 25</td>
                    <td>Data 26</td>
                    <td>Data 27</td>
                    <td>Data 28</td>
                    <td>Data 29</td>
               </tr>
                              <tr>
                    <td>Data 1</td>
                    <td>Data 2</td>
                    <td>Data 3</td>
                    <td>Data 4</td>
                    <td>Data 5</td>
                    <td>Data 6</td>
                    <td>Data 7</td>
                    <td>Data 8</td>
                    <td>Data 9</td>
                    <td>Data 10</td>
                    <td>Data 11</td>
                    <td>Data 12</td>
                    <td>Data 13</td>
                    <td>Data 14</td>
                    <td>Data 15</td>
                    <td>Data 16</td>
                    <td>Data 17</td>
                    <td>Data 18</td>
                    <td>Data 19</td>
                    <td>Data 20</td>
                    <td>Data 21</td>
                    <td>Data 22</td>
                    <td>Data 23</td>
                    <td>Data 24</td>
                    <td>Data 25</td>
                    <td>Data 26</td>
                    <td>Data 27</td>
                    <td>Data 28</td>
                    <td>Data 29</td>
               </tr>                   
            </tbody>
        </table> 
```

这段代码对应的css在这里

```
 div.tableContainer {
clear: both;
height: 360px;
overflow: auto;
width: 1024px
    }    

     /* define width of table. Add 16px to width for scrollbar.           */

    html>body div.tableContainer table {
width: 1024px
     }

    html>body thead.fixedHeader tr {
display: block
     }

    thead.fixedHeader th {
background: #C96;
border-left: 1px solid #EB8;
border-right: 1px solid #B74;
border-top: 1px solid #EB8;
font-weight: normal;
padding: 4px 3px;
text-align: center
    }
    thead.fixedHeader {
color: #000;
display: block;
text-decoration: none;
width: 100%;
}
    html>body tbody.scrollContent {
display: block;
height: 262px;
overflow: auto;
width:100%;
    }
    tbody.scrollContent td, tbody.scrollContent tr.normalRow td {
background: #FFF;
border-bottom: none;
border-left: none;
border-right: 1px solid #CCC;
border-top: 1px solid #DDD;
padding: 2px 3px 3px 4px
    }
    tbody.scrollContent tr.alternateRow td {
background: #EEE;
border-bottom: none;
border-left: none;
border-right: 1px solid #CCC;
border-top: 1px solid #DDD;
padding: 2px 3px 3px 4px
    }
   html>body thead.fixedHeader th {
width: 60px
    }
    html>body thead.fixedHeader th + th {
width: 140px
    }
    html>body thead.fixedHeader th + th + th {
width: 360px
    }

    html>body tbody.scrollContent td {
width: 60px
    }
    html>body tbody.scrollContent td + td {
width: 140px
    }
    html>body tbody.scrollContent td + td + td {
width: 360px
    } 
```

我需要固定表的前 3 列和表头，其余列可滚动。帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:17:24.237

我已将您的代码放在 jsfiddle 上以获得更好的可见性：http: [//jsfiddle.net/](http://jsfiddle.net/)

如果我理解正确，您将必须使用至少两个表。

```
<table>
    <tr class="fixed">
        <th>column 1, row 1</th>
        <th>column 1, row 2</th>
    </tr>

    <tr class="fixed">
        <td>column 2, row 1</td>
        <td>column 2, row 2</td>
    </tr>

    <tr class="fixed">
        <td>column 3, row 1</td>
        <td>column 3, row 2</td>
    </tr>

    <tr class="fixed">
        <td>column 4, row 1</td>
        <td>column 4, row 2</td>
    </tr>

    <tr>
        <td colspan="2">
            <table class="scrollable">
                <tr>
                    [rest of what you would have put in your main table]
                </tr>
            </table>
        </td>
    </tr>
</table> 
```

要使标题和标题后的前三列具有粘性，您必须使用 javascript（例如使用 jquery）执行以下两个步骤：

1.  将具有“固定”类的所有内容复制到一个新的 DOM 元素中，该元素看起来与网站上的原始内容完全相同
2.  每当用户滚动时，检查标题是否开始移出屏幕，然后使之前制作的内容可见并将其附加到屏幕顶部。

乍一看，这似乎很多，但这并不是魔术。以下是帮助您入门的其他资源：

让一些东西粘在页面顶部：

```
.element {position: fixed; top: 0;} 
```

*   [jquery clone() -> 将您网站的内容放入一个新的 DOM 元素中](http://api.jquery.com/clone/)
*   [jquery scroll() -> 检查用户是否滚动然后采取行动](http://api.jquery.com/scroll/)

其他的，我敢肯定，你可以找出来！祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:24:50.570

我想我找到了你的问题。您的一些 CSS 破坏了内容单元格的大小，您需要通过`padding-right: 17px;`在标题行添加一些来调整滚动条的大小。

这是一个 jsFiddle：http: [//jsfiddle.net/X6Ck5/](http://jsfiddle.net/X6Ck5/)

# javascript - 如何在javascript中减去2个字符以获得ascii的差异

> ID：15734445
> 
> 赞同：14
> 
> 时间：2013-03-31T20:57:41.797
> 
> 标签：javascript, char

`alert('g' - 'a')`正在返回不是数字。（“南”）。

`ascii`但我希望得到as `alert(103-97)`=>之间的区别`alert(6)`。因此`6`被输出。

在 C 中`int i = 'g' - 'a'`，, 将给出`i = 6`.

如何在javascript中实现2个字符的减法？（很容易，如下所示）

`alert("g".charCodeAt(0) - "a".charCodeAt(0))`正在给 6。

应用：我在国际象棋程序中使用它。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-31T20:59:28.183

做你想做的唯一可行的方法是你已经建议的方式：

```
alert('g'.charCodeAt(0) - 'a'.charCodeAt(0)); 
```

如您所知，这将在每种情况下从字符串的第 0 个元素中检索 ASCII 字符代码，并从第一个元素中减去第二个元素。

不幸的是，这是检索给定字符的 ASCII 代码的唯一方法，尽管使用函数会更简单一些，尽管考虑到`charCodeAt()`解决方案的简洁性/简单性并不是那么简单。

参考：

*   [`String.charCodeAt()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charCodeAt).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T21:00:21.097

JavaScript 不将字符视为数字；它们是单字符串。所以减法运算符将计算`Number('g') - Number('a')`。

你应该这样做`'g'.charCodeAt(0) - 'a'.charCodeAt(0)`（没有更好的方法，但你可以将它包装在一个函数中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:06:02.837

您可以自己编写一个自定义函数。像这样的东西：

```
function asciiDif(a,b) {
    return a.charCodeAt(0) - b.charCodeAt(0);
} 
```

接着：

```
alert(asciiDif('g','a')); 
```

# c# - 如何使用多个索引进行 ToLookup()？

> ID：15734454
> 
> 赞同：5
> 
> 时间：2013-03-31T20:58:51.927
> 
> 标签：c#, .net, linq, lambda, lookup

考虑到下面 C# 控制台应用程序的代码，使用

我应该如何修改它以替换该行：

```
foreach (Product product in productsByCategory[category]) 
```

通过代码行

```
foreach (Product product in productsByCategory[category][Id]) 
```

?

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace myQuestion
{
  class Program
  {
    static void Main(string[] args)
    {
      var products = new List<Product>
      {
        new Product { Id = 1, Category = "Garden", Value = 15.0 },
        new Product { Id = 1, Category = "Garden", Value = 40.0 },
        new Product { Id = 3, Category = "Garden", Value = 210.3 },
        new Product { Id = 4, Category = "Pets", Value = 2.1 },
        new Product { Id = 5, Category = "Electronics", Value = 19.95 },
        new Product { Id = 6, Category = "Pets", Value = 21.25 },
        new Product { Id = 7, Category = "Pets", Value = 5.50 },
        new Product { Id = 8, Category = "Garden", Value = 13.0 },
        new Product { Id = 9, Category = "Automotive", Value = 10.0 },
        new Product { Id = 10, Category = "Electronics", Value = 250.0 }
      };

      ILookup<string, Product> productsByCategory = 
              products.ToLookup( p => p.Category);
      string category = "Garden";
      int Id = 1;
      foreach (Product product in productsByCategory[category])
      {
        Console.WriteLine("\t" + product);
      }

      Console.ReadLine();
    }
  }

  public sealed class Product
  {
    public int Id { get; set; }
    public string Category { get; set; }
    public double Value { get; set; }
    public override string ToString()
    {
      return string.Format("[{0}: {1} - {2}]", Id, Category, Value);
    }
  }
} 
```

**更新：**
这是一个人为的示例，旨在学习 C# [ToLookup Method](http://msdn.microsoft.com/en-us/library/bb353368.aspx)的概念。

作为参考，我在阅读[了大卫安德烈斯对问题“查找的意义何在？”的回答后提出了这个问题。](https://stackoverflow.com/a/1403504/2031316)：

```
"A Lookup will map to potentially several values.  

Lookup["Smith"]["John"] will be a collection of size one billion." 
```

我想重现。

还是我理解错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T21:06:01.837

不确定我是否正确理解您的需求，但您为什么不能这样做：

```
foreach (Product product in productsByCategory[category].Where(x=> x.Id == Id)) 
```

或者使用匿名对象：

```
var productsByCategory = products.ToLookup(p => new { p.Category, p.Id });
string category = "Groceries";
int Id = 1;
foreach (Product product in productsByCategory[new {Category = category, Id= Id}])
{
    Console.WriteLine("\t" + product);
} 
```

这是非常相似的问题，[Servy提供了额外的解决方案](https://stackoverflow.com/a/10803833/1193333)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-06T16:45:46.340

我偶然发现了这个问题，阅读了“关闭它，因为我已经确认这是*不可能*的”，并对该主题进行了大量研究。我能得到的最接近的是：

[![努力查找查找](https://i.stack.imgur.com/ig9eJ.png)](https://i.stack.imgur.com/ig9eJ.png)

事实证明这是无法做到的，因为：

1.  type 没有构造函数，`Lookup<T, T>`只能使用`.ToLookup()`LINQ 扩展函数，
2.  所述函数没有`resultSelector`(like `.GroupBy()`does) 的重载，因此总是只返回`IGrouping<TKey, TElement>`。

即使查找的结果只是一个元素（另一个`Lookup`），也不可能省略第一个`IGrouping`。因此，在每次调用 "parent" 之后都需要调用`.Single()`(or `.First()`or `.ToList()[0]`or ) ，这是......臭而绝望的。`.ElementAt(0)``Lookup`

# 但

访问元素的相同语法可以通过嵌套来实现`Dictionary<T, T>`：

[![用字典搞定](https://i.stack.imgur.com/nS6Sh.png)](https://i.stack.imgur.com/nS6Sh.png)

LINQPad C# 代码[在这里](http://share.linqpad.net/wnp8ah.linq)上传。

# c++ - 调整动态字符串数组的大小

> ID：15734465
> 
> 赞同：1
> 
> 时间：2013-03-31T20:59:35.913
> 
> 标签：c++, arrays, resize

我正在尝试调整动态分配的字符串数组的大小；这是代码！

```
void resize_array() {
    size_t newSize = hash_array_length + 100;
    string* newArr = new string[newSize];

    fill_n(hash_array,newSize,"0"); //fills arrays with zeros

    memcpy( newArr, hash_array, hash_array_length * sizeof(string) );

    hash_array_length = newSize;
    delete [] hash_array;
    hash_array = newArr;
} 
```

不幸的是，它不起作用并给出了分段错误。知道为什么吗？这基本上是一个线性探测哈希表，其中元素被插入到任何有 0 的地方，因此我使用 fill_n 用 0 填充新创建的数组。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T21:15:14.990

```
memcpy( newArr, hash_array, hash_array_length * sizeof(string) ); 
```

这一行非常危险，std::string 不是普通的旧数据类型，您无法确保 memcpy 可以正确初始化它，它可能会导致未定义的行为，这是 c++（或编程）中最讨厌的行为之一。

此外，在 C++ 中创建动态字符串数组有更好、更安全（在大多数情况下）的解决方案，只需使用向量

```
//create a dynamic string array with newSize and initialize them with "0"
//in your case, I don't think you need to initialize it with "0"
std::vector<std::string> newArr(newSize, "0"); 
```

如果 hash_array 的类型与 newArr(std::vector) 相同，那么复制的方式就很简单了。

C++98

```
std::copy(hash_array.begin(), hash_array.end(), newArr.begin()); 
```

c++11

```
std::copy(std::begin(hash_array), std::end(hash_array), std::begin(newArr)); 
```

不如把c++当成一门新语言，它有太多和c不同的地方。此外，还有很多不错的免费 IDE，比如 code::blocks 和 QtCreator devc++ 是一个几乎死掉的项目。

如果您是 C++ 新手，C++ Primer 5 是一本不错的入门书籍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:19:00.783

如果`string`实际上是`std::string`（并且可能即使不是），那么这将崩溃。您正在创建一个新的字符串数组，将旧的字符串类复制到顶部，然后释放旧的字符串。但是，如果字符串类包含指向已分配内存的内部指针，这将导致双重释放，因为您所做的只是复制内部指针 - 而不是进行新的内存分配。

这样想；假设您有以下课程：

```
class foo
{
    char* bar;

    foo() { bar = malloc(100); }
    ~foo() { free(bar);
};

foo* ptr1 = new foo;
foo* ptr2 = new foo;
memcpy(ptr2, ptr1, sizeof(foo*));
delete ptr1; 
```

此时，`ptr2->bar`指向相同的内存`ptr1->bar`，但`ptr1`它持有的内存已被释放

最好的解决方案是使用 a`std::vector`因为它会自动处理大小调整，您根本不需要担心复制数组。但是，如果您想坚持当前的方法，则需要将`memcpy`调用更改为以下内容：

```
for (int i = 0; i < hash_array_length; ++i)
{
    newArr[i] = hash_array[i];
} 
```

这将调用类的复制构造函数并对其内容进行适当的复制，而不是仅仅复制内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:23:06.740

我怀疑罪魁祸首是`memcpy`电话。`string`是通过指针管理 char 数组的复杂类型（就像您现在所做的那样）。通常复制字符串是使用赋值运算符完成的，对于字符串也复制它自己的数组。但是 memcpy 只是逐字节地复制指针，而 delete[] 也删除了由字符串管理的数组。现在另一个字符串使用已删除的字符串数组，即 BAAAD。

您可以使用 std::copy 代替 memcpy，或者更好的是使用 std::vector，它可以解决大多数动态内存处理问题。

# iphone - 如何将没有 .xcodeproj 文件的现有 iPhone 应用程序导入 Xcode

> ID：15734468
> 
> 赞同：3
> 
> 时间：2013-03-31T20:59:48.053
> 
> 标签：iphone, xcode, import, recreate

我有一个想要导入 XCode 的现有 iPhone 应用程序（由同事在以前版本的 XCode 上制作）。我有文件 FirstViewController.h、.m 和 .xib 文件以及所有已重命名的其他视图的文件。我还有支持文件，例如正在使用的 sqlite 数据库、图像、AppDelegate 文件等。但是，我得到的所有这些文件都没有 .xcodeproj 文件。考虑到所有这些文件，我一直在尝试重新创建应用程序，但没有成功。谁能给我任何关于我应该如何尝试重新创建这个应用程序的提示或方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T21:27:35.803

如果您绝对无法获得原始 Xcode 项目文件，我建议您通过标准的新建项目向导创建一个新项目，然后将现有文件导入新项目。这将至少涉及：

*   启动 Xcode（最新可用版本）
*   通过选择文件菜单 > 新建 > 项目来创建一个新项目
*   选择与您的应用程序最相似的 iOS 应用程序项目模板
*   按照向导的其余步骤创建您的项目
*   有了新项目后，导入现有文件：
    *   对于每种类型的文件，在左侧边栏中的 Project Navigator 中右键单击其中一个文件组，然后选择“Add Files to ...”，然后按照提示导入文件
*   根据需要使用 Product > Build 和 Product > Run 调整您的代码以正确构建。

[iOS 应用程序编程指南](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/Introduction/Introduction.html)可能会回答很多关于如何布局应用程序结构、设置构建设置等的一般问题。代码签名和部署目标是您需要配置的两个重要的项目特定设置，它们可以使用项目设置编辑器在项目导航器中选择最顶行（其中显示您的项目名称）来完成。这应该有希望让你开始。

# clojure - 自动运行几个 vim 命令和击键

> ID：15734470
> 
> 赞同：3
> 
> 时间：2013-03-31T20:59:53.857
> 
> 标签：clojure, vim

我想在 vim 中自动运行几个命令，即通过键入`:repl`. 命令是：

```
:ConqueTerm lein repl
<Esc>
:set syntax=clojure
<i> 
```

如何定义执行上述操作的自定义 vim 函数（命令）？

关于以上：

*   `clojure`- Clojure 编程语言（由[vim-clojure-static提供的语法](https://github.com/guns/vim-clojure-static)
*   [`ConqueTerm`](http://www.vim.org/scripts/script.php?script_id=2771)- 在你的 vim 缓冲区中交互式运行 shell 的 vim 插件
*   `lein`- [Leiningen](https://github.com/technomancy/leiningen)，一个 Clojure 构建工具

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:32:42.363

您可以只创建一个函数，然后将命令放入该函数中：

```
fun! LeinCMD()
    execute 'ConqueTerm lein repl'
    execute 'set syntax=clojure'
    execute 'normal! i'
endf
command! Repl call LeinCMD() 
```

您可以获取上述代码，然后键入`:Repl`并`Enter`测试它是否适合您。

**编辑**

**@Zyx**的评论非常好。我只是将它们放在答案中，以便读者将来不会错过有价值的信息。

1.  你不需要`:execute`在这里打电话。
2.  `:normal!`i 没用，要从函数启动插入模式有 :startinsert 和 :call feedkeys()，应该首选前者。// 注意：`:normal! i`这里“有效”是因为 :`startinsert`由 . 运行`:ConqueTerm`。即由于 Conque 的编写方式，您根本不需要`:startinsert`，但如果它还没有，`:normal! i`将继续做任何有用的事情。

刚刚提到：使用 : 这样会更好，`command -bar`这样你就不需要`:execute`用管道符号链接你的命令（尝试`Repl | echo "Here"`使用和不使用 -bar 作为 的第二个参数`:command`）。我认为这是默认选项，不知道为什么 Bram 喜欢在许多地方设置不好的默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:05:04.640

你有没有尝试过？

```
function custom_function ()
  execute 'ConqueTerm lein repl'
  execute 'set syntax=clojure'
  return custom_function
endfunction 
```

我不知道这段代码是否有效，因为我没有测试过

# c++ - 主要之后的c ++类声明？

> ID：15734472
> 
> 赞同：4
> 
> 时间：2013-03-31T21:00:05.290
> 
> 标签：c++, declaration

```
#include "stdafx.h"
using namespace System;

class Calculater; // how to tell the compiler that the class is down there? 

int main(array<System::String ^> ^args)
{
    ::Calculater *calculater = new Calculater();

    return 0;
}

class Calculater
{
public:
    Calculater()
    {
    }
    ~Calculater()
    {
    }

}; 
```

我在 main 之后声明了类，我如何告诉编译器我的类是什么？我试过
类Calculator；在 main 之前，但它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T21:02:41.880

你不能按照你写的方式去做。编译器必须能够看到类的定义才能使用它。您需要将类放在`main`函数之前，或者最好放在包含的单独头文件中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-31T21:07:08.973

您可以在预先声明后获得指向计算器的指针。问题在于构造函数 ( `new Calculator()`)，此时尚未定义。你可以这样做：

主要之前：

```
class Calculator { // defines the class in advance
public:
    Calculator(); // defines the constructor in advance
    ~Calculator(); // defines the destructor in advance
}; 
```

主线之后：

```
Calculator::Calculator(){ // now implement the constructor
}
Calculator::~Calculator(){ // and destructor
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T21:04:13.880

将类定义放在 main 之前：

```
#include "stdafx.h"
using namespace System;

class Calculater
{
public:
    Calculater()
    {
    }
    ~Calculater()
    {
    }

};

int main(array<System::String ^> ^args)
{
    Calculater *calculater = new Calculater();

    return 0;
} 
```

# javascript - 使用Javascript从文件中查询SQLite数据库

> ID：15734475
> 
> 赞同：0
> 
> 时间：2013-03-31T21:00:10.183
> 
> 标签：javascript, sqlite, iphone-web-app

我正在使用离线数据库浏览器构建一个 Web 应用程序。我有一个 .db3 文件，但无法直接使用 sql.js 或 html5sql.js 打开它。我需要什么样的装载机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:14:06.773

我不认为有打开 db3 文件的跨浏览器方式。可能是移动 Safari 有一个窍门，但我不是这方面的专家。

您可以使用所谓的[Web SQL 数据库在 Mobile Safari 中创建类似的数据库](http://www.w3.org/TR/webdatabase/)。您必须重新创建表结构并重新插入数据，但之后您可以针对本地数据库触发非常常规的 SQL 查询。

请注意，Web SQL 规范[已被放弃](http://caniuse.com/#feat=sql-storage)，取而代之的是[更简单的本地数据库标准](http://www.w3.org/TR/IndexedDB/)。但它适用于当前的移动 Safari 版本，这可能足以满足您的需求。

# android - 如何将选定的图像保存在数据库中

> ID：15734478
> 
> 赞同：0
> 
> 时间：2013-03-31T21:00:24.457
> 
> 标签：android

android 我如何将这些选定的图像保存在数据库中？[http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple/](http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple/) 谁能告诉我如何将这些图像保存在数据库中？ ??

```
 public class AndroidCustomGalleryActivity extends Activity {
private int count;
private Bitmap[] thumbnails;
private boolean[] thumbnailsselection;
private String[] arrPath;
private ImageAdapter imageAdapter;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final String[] columns = { MediaStore.Images.Media.DATA,  
 MediaStore.Images.Media._ID };
    final String orderBy = MediaStore.Images.Media._ID;
    Cursor imagecursor = managedQuery(
            MediaStore.Images.Media.EXTERNAL_CONTENT_URI, columns, null,
            null, orderBy);
    int image_column_index = imagecursor.getColumnIndex(MediaStore.Images.Media._ID);
    this.count = imagecursor.getCount();
    this.thumbnails = new Bitmap[this.count];
    this.arrPath = new String[this.count];
    this.thumbnailsselection = new boolean[this.count];
    for (int i = 0; i < this.count; i++) {
        imagecursor.moveToPosition(i);
        int id = imagecursor.getInt(image_column_index);
        int dataColumnIndex = imagecursor.getColumnIndex(MediaStore.Images.Media.DATA);
        thumbnails[i] = MediaStore.Images.Thumbnails.getThumbnail(
                getApplicationContext().getContentResolver(), id,
                MediaStore.Images.Thumbnails.MICRO_KIND, null);
        arrPath[i]= imagecursor.getString(dataColumnIndex);
    }
    GridView imagegrid = (GridView) findViewById(R.id.PhoneImageGrid);
    imageAdapter = new ImageAdapter();
    imagegrid.setAdapter(imageAdapter);
    imagecursor.close();

    final Button selectBtn = (Button) findViewById(R.id.selectBtn);
    selectBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            final int len = thumbnailsselection.length;
            int cnt = 0;
            String selectImages = "";
            for (int i =0; i<len; i++)
            {
                if (thumbnailsselection[i]){
                    cnt++;
                    selectImages = selectImages + arrPath[i] + "|";
                }
            }
            if (cnt == 0){
                Toast.makeText(getApplicationContext(),
                        "Please select at least one image",
                        Toast.LENGTH_LONG).show();
            } else {
                Toast.makeText(getApplicationContext(),
                        "You've selected Total " + cnt + " image(s).",
                        Toast.LENGTH_LONG).show();
                Log.d("SelectedImages", selectImages);
            }
        }
    });
}

public class ImageAdapter extends BaseAdapter {
    private LayoutInflater mInflater;

    public ImageAdapter() {
        mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public int getCount() {
        return count;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = mInflater.inflate(
                    R.layout.galleryitem, null);
            holder.imageview = (ImageView) convertView.findViewById(R.id.thumbImage);
            holder.checkbox = (CheckBox) convertView.findViewById(R.id.itemCheckBox);

            convertView.setTag(holder);
        }
        else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.checkbox.setId(position);
        holder.imageview.setId(position);
        holder.checkbox.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                CheckBox cb = (CheckBox) v;
                int id = cb.getId();
                if (thumbnailsselection[id]){
                    cb.setChecked(false);
                    thumbnailsselection[id] = false;
                } else {
                    cb.setChecked(true);
                    thumbnailsselection[id] = true;
                }
            }
        });
        holder.imageview.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                int id = v.getId();
                Intent intent = new Intent();
                intent.setAction(Intent.ACTION_VIEW);
                intent.setDataAndType(Uri.parse("file://" + arrPath[id]), "image/*");
                startActivity(intent);
            }
        });
        holder.imageview.setImageBitmap(thumbnails[position]);
        holder.checkbox.setChecked(thumbnailsselection[position]);
        holder.id = position;
        return convertView;
    }
  }
class ViewHolder {
    ImageView imageview;
    CheckBox checkbox;
    int id;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T21:14:48.523

不保存图像，只需将图像路径保存在数据库中即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T10:35:33.927

最简单的方法：

1-不保存图片，只需将图片路径保存在数据库中为字符串值即可。

2-将图像转换为位图并将其保存在数据库中。

我更喜欢第一种解决方案。

# java - Java keylisteners 不做任何事情，但程序仍在运行

> ID：15734484
> 
> 赞同：0
> 
> 时间：2013-03-31T21:01:01.813
> 
> 标签：java, swing, jframe, keylistener

按键监听器应该上下移动块，但是当按键（w，s）被按下或按住时，它们什么也不做。这是代码（我省略了与问题无关的其他类）

感谢您的时间

```
import java.awt.event.KeyEvent;
import javax.swing.*;
import java.awt.event.*;

public class Test extends JFrame
{
    private static final long serialVersionUID = 1L;
    JFrame f = new JFrame();

    public void Draw()
    {
        Handler handle = new Handler();
        f.addKeyListener(handle);
        f.setFocusable(true);
        f.requestFocusInWindow();
    }

    public static void main(String[] args)
    {
        JFrame f = new JFrame();
        f.setSize(400, 250);
        f.setVisible(true);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    class Handler extends JFrame implements KeyListener
    {
        private static final long serialVersionUID = 1L;

        public void keyTyped(KeyEvent e)
        {
        }

        @Override
        public void keyPressed(KeyEvent e)
        {
            if ((e.getKeyCode() == KeyEvent.VK_S))
            {
                System.out.println("testw");
            }
            if ((e.getKeyCode() == KeyEvent.VK_W))
            {
            }

        }

        @Override
        public void keyReleased(KeyEvent e)
        {
            if ((e.getKeyCode() == KeyEvent.VK_UP))
            {
            }
            if ((e.getKeyCode() == KeyEvent.VK_DOWN))
            {
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T21:05:15.763

*   [JFrame](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)（[所有顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)）默认情况下从不对[KeyListener 中的 KeyEvent](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)做出反应，因此无法添加`KeyListener`到`JFrame`，请改用[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

*   您可以将[KeyListener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)添加到[JPanel (JPanel.setFocusable(true))](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)，但`KeyBindings`在这种情况下也可以使用

*   `KeyListener``Keys Shortcuts`同时是三个或更多`KeyPressed`的正确听众

*   [基于@HFOE代码的KeyBindings代码示例](https://stackoverflow.com/questions/7940173/how-do-i-use-keyeventdispatcher/7940227#7940227)

# entity-framework - 如果我知道我只会使用 EF，是否有理由将存储库模式与实体框架一起使用？

> ID：15734485
> 
> 赞同：19
> 
> 时间：2013-03-31T21:01:07.230
> 
> 标签：entity-framework, repository-pattern

通过阅读各种书籍和文章，我似乎经常发现建议的存储库模式的用法。如果您需要能够将数据层从一个交换到另一个，我明白这一点，但我的问题是，如果我 100% 确定我*不会*使用任何其他技术进行数据访问，是否有任何理由使用上述模式？

我发现自己最怀疑的事情是，我并没有真正看到这个额外的抽象层在这种情况下可以带来什么。根据我的经验，具有流畅的 linq-to-entities 功能的 EF 应该足以满足我的所有需求。

最常见的情况似乎是使用 FindAll、Find、Add 和 Delete 等方法启动存储库，所有这些方法都可以通过 EF 直接访问（因此无需重复代码）。

那么我只是错过了一些重要的观点，还是当您需要支持多种不同的数据访问技术时，存储库更多？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-31T21:08:40.267

他们对这个问题有很多意见，但是在将存储库用于 2 个项目之后，我再也没有尝试过。

对于所有这些没有明显好处的情况，数百种方法太痛苦了（我几乎永远不会将 EF 换成另一个 ORM）。

最好的建议是尝试一下，这样您就可以对采取哪条路线提出明智的意见。

[这里](http://ayende.com/blog/3955/repository-is-the-new-singleton)有一些反对意见

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-31T21:22:16.887

我认为你的方向是正确的。两年前，我在一些项目中使用了存储库模式后，我问过自己同样的问题。我得出的结论是，将您的 ORM 隐藏在您的 ORM 之上实现的存储库后面只会给您带来不必要的工作。除了实现无意义的 FindAll、Find、Add ... 方法之外，您还会失去 ORM 为您提供的一些性能优化可能性。或者至少应用其中一些方法会变得相当困难。

因此，如果您不打算在项目的生命周期内切换 ORM，我认为应用存储库模式没有任何好处。

因此，与其为将来可以轻松切换 ORM 的情况做准备，我建议提前做更多调查，明智地选择 ORM，坚持使用并远离存储库模式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-02T23:59:55.280

我不像以前那样热衷于存储库模式，但我仍然发现它在以下场景中很有用（假设交换 ORM 不是其中之一）：

*   单元测试（假设您宁愿模拟或存根而不是使用 Sqlite 或访问真正的数据库）
*   能够在开发过程中通过以内存中的 IEnumerable 作为其支持源的存储库来存根数据访问。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-14T11:27:17.447

人们没有意识到 EF 已经是一个存储库和工作单元。

存储库已经成为一种反模式，因为它的使用标准从一开始就没有得到满足。永远不要使用设计模式，因为它*很酷*或时髦，或者试图建立你的简历，事实上这应该是所有设计模式的标准规则。

如果您的应用程序是

*   非常大（烤宽面条层）
*   长寿（10年左右）
*   有超过 5 名开发人员并行工作
*   有地理上分开的开发人员
*   需要大量维护
*   多种数据访问基础设施

一个很好的迹象是，从 EF5 升级到 EF6 时需要您敲每个人的门。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-05T19:11:13.890

我实际上*不同意*EF 是“存储库模式”的*正确示例。*它是一个*类型化的数据访问层*和一个*公开的 LINQ 实现*。

请注意，如果完全认可 EF 为“业务领域”，则上述内容不成立；但是，我将 EF 与 Schema First 一起使用 - 和它一样糟糕 - 在 Schema First 中，EF*不是*严格的业务领域。“*正确*”一词用于强化这一观点——根据您自己的观点/设计进行调整。

在我的书中，*正确的存储库模式暴露了**相关*操作的聚合根。也就是说，实现细节（EF）尽可能地保存*在存储库中。*也就是说，存储库负责将*相关*域对象映射到底层模型。

这是与 Microsoft 如何定义[存储库模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)的协议- 请注意，*业务实体*映射到数据源。（因此，我对 EF 履行这个角色的根本分歧：EF*只有*在从 Code First 设计时才有机会理智地映射业务实体。）

我发现的最好的总结/文章是[存储库模式，](http://blog.gauffin.org/2013/01/repository-pattern-done-right/)由 Gauffin 完成。虽然他从比我更极端的角度来处理存储库模式，但这里有一些关键点可以解释为什么 EF 会简单地通过 Active Record / ORM 模式流血。

以下是一些精选的摘录，强调了为什么我*不*认为 EF 是存储库模式的正确实现。

> 存储库模式是一种抽象。*它的目的是降低复杂性并使其余代码持久无知。作为奖励，它允许您编写单元测试而不是集成测试。*问题是许多开发人员未能理解模式的目的 - 并创建存储库 [即。EF] 将持久性特定信息泄露给调用者
> 
> ..
> 
> *使用存储库并不是为了能够切换持久性技术*（即更改数据库或使用 Web 服务等）。存储库模式确实允许您这样做，但这不是主要目的。
> 
> ..
> 
> 当人们谈论存储库模式和单元测试时，他们并不是说该模式允许您对数据访问层使用单元测试。如果您在业务逻辑中使用 ORM/LINQ，您将永远无法确定测试失败的原因。
> 
> ..
> 
> 请注意，存储库模式仅在您拥有首先使用代码映射的 POCO 时才有用。否则，您只会使用实体破坏抽象。[也就是说，只有 EF Code First 甚至可以尝试满足这个要求。]
> 
> ..
> 
> 构建正确的存储库实现非常容易。事实上，您只需要遵循一条规则：*在您需要之前不要将任何内容添加到存储库类中*

如果您*确实*使用 EF 作为存储库 - 我相信它仍然是一个类型化的 DAL，尽管它会流血 - 请不要试图将它隐藏在“更通用”的模式中 - 存储库模式*与类型统一无关*，它是关于公开特定上下文的聚合根以及对此类的操作。

请参阅[存储库模式解决了哪些具体问题？](https://stackoverflow.com/questions/13180501/what-specific-issue-does-the-repository-pattern-solve/13189143#13189143)也是。

* * *

虽然我*反对*EF 是一个*正确*的存储库模式——它是 Active Record 模式——但我不是一个存储库纯粹主义者。也就是说，在某些情况下，我会在*特定情况下*流血 EF（或 L2S）实体；我接受这是*技术债务*。只需了解打破此类存储库/域边界的成本即可。

# javascript - 根据 Jquery/Javascript 中的表单提交重定向页面？

> ID：15734486
> 
> 赞同：0
> 
> 时间：2013-03-31T21:01:14.790
> 
> 标签：javascript, jquery, html, forms, redirect

我正在处理一个页面，该页面应该根据用户在表单中输入的内容进行重定向，但我似乎无法弄清楚。Javascript 新手，渴望学习！

这是html：

```
<body>
<div id="header">
    <div id="navcontainer">
        <ul>
            <li> <a href="#item1">Home</a> </li>
            <li> <a href="#item2">Scents</a> </li>
            <li> <a href="#item3">About</a> </li>
            <li> <a href="#item4">Contact</a> </li>
        </ul>
    </div>  
</div>
<div id="content">
        <p>Hi, how are you feeling today?</p>
        <form> <input id="feels" type="text" name="feeling" size="35" onchange="checkfeels(#feels.value);"> 
        <input type="submit" value="submit" >
        </form>
</div> 
```

到目前为止，我拥有的 Javascript：

```
function checkfeels(myFeels) {
        switch (myFeels) 
        {
        case "good":
            document.location.href = 'scents.html';
            break
        case "bad":
            alert(2);
            document.location.href = 'scents2.html';
        default: 
            alert("whatever");
        }
    } 
```

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T22:00:08.780

放在

```
return checkfeels(this.elements.feeling.value) 
```

以 onsubmit 属性的形式。

当前情况下的“感觉”是输入字段的名称。<input type="text" name="feeling"> 在你的代码中。

并添加

```
return false; 
```

到 checkfeels 函数的末尾以防止默认操作（将表单提交到服务器）。

此外，您可以将整个表单传递给函数，例如：

```
return checkfeels(this) 
```

并且已经在 checkfeels 功能中与整个表格一起工作。

```
function checkfeels(form) {
   var feeling = form.elements.feeling.value;
   var otherField = form.elements.otherField.value;

   // code with your logic here

   return false; // prevent default action
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:08:22.430

输入以下代码：

```
checkfeels($('#feels').val());
return false; 
```

以 onsubmit 属性的形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:13:59.207

您无法使用 #feels.value 获取用户键入的内容（您似乎在 jQuery 语法和 javascript 之间犯了一个错误）。

你可以在纯 javascript 中做到这一点：

```
function checkfeels() {
    var myFeels = document.getElementById('feels').value;
    switch (myFeels) {
        case "good":
            document.location.href = 'scents.html';
            break
        case "bad":
            alert(2);
            document.location.href = 'scents2.html';
        default: 
            alert("whatever");
    }
} 
```

您将获得用户输入的内容：

```
document.getElementById('feels').value
```

而且您不需要为函数提供任何参数。

如果您使用 jQuery，您可以通过以下方式获取值：

```
$('#feels').val();
```

# c++ - 为什么这个 imapclient g++ 编译会出错

> ID：15734489
> 
> 赞同：0
> 
> 时间：2013-03-31T21:02:07.377
> 
> 标签：c++, g++, imap

我是一名初级 Java 编码员，我决定进入 C++ 编码。在阅读了基础知识（类似于 Java）之后，决定尝试阅读其他人的代码。我找到了以下 imap 邮件客户端的代码，但是当尝试使用 g++ (gcc 4.6.3) 编译它时，它显示了一些似乎与使用的命名空间的范围有关的错误。这里的错误在哪里，或者我应该“搜索”什么样的错误？，因为我在那里找不到答案。

这是代码的链接，因为我不确定许可问题（比如我是否应该引用作者的话）：

[imap_email_client](http://www.codeproject.com/Tips/531592/Simple-IMAP-CLIENT)

在此先感谢您的所有帮助，并对我可能犯的所有论坛规则误解表示歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:12:32.110

您引用的代码不是任何**C++**代码，而是用称为**C#**的语言编写的代码。

另一方面`g++`，它只是一个 C++ 编译器。这意味着它不知道任何 C#，也不会编译任何 C# 代码。

您将需要一个 C# 编译器来编译您引用的代码。由于 Mono（请参阅：[http](http://www.mono-project.com/Main_Page) ://www.mono-project.com/Main_Page ）附带一个 C# 编译器`gmcs`，如果您能够使用它进行编译，您可能想尝试一下

```
gmcs name-of-your-source-file 
```

如果它安装在您的系统上。

在我的系统上，我能够用它编译引用的源代码。

# php - 浮动“下一个”到主要段落文本的帖子/页面文本（标注）

> ID：15734493
> 
> 赞同：-1
> 
> 时间：2013-03-31T21:02:46.617
> 
> 标签：php, css, wordpress, wordpress-theming

**我正在尝试做的事情：**

我想创建可以“浮动”其他文本的文本；我相信*标注*是术语。由于我是 CSS 新手，我不知道从哪里开始。如果有人可以将我踢向正确的方向，我相信我可以进一步探索（并尽职尽责地在此处记录）。

![我试图想象我正在尝试做的事情](https://i.stack.imgur.com/tEeXk.png)

**额外的想法：**

1.  我希望“突出显示文本”仍然是帖子/页面叙述流程的一部分（没有任何内容被困在内容之外）。
2.  我什至不知道这是 CSS 还是 PHP 的东西。
3.  因为我一直在尝试通过子主题做所有事情，所以我什至没有研究过插件。这是明智的吗？
4.  示例博客文章在**[这里](http://longgame.org/2011/08/parasites-and-agency/)**。

非常感谢，提前，任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:32:21.890

为了让我如何解释您的请求，您需要在您的 H5 标签中添加以下内容：

*   浮动它（左或右）
*   指定宽度
*   指定填充，以便“环绕它”的项目不会触及它

    h5 {浮动：左；宽度：100px；填充：0 20px 20px 0；/* 简写：上、右、下、左 */ }

*（试图制作一张图片来展示这一点，但显然我的代表不够高，无法提供那么多帮助；）*

但是，当您浮动内容时，会将它们从文档的垂直流中取出，因此根据使用方式，您可能需要调查诸如“clearfix”之类的内容，或者如果您需要尊重标注的高度，则清除浮动内容。（*就像如果文本不打算绕过标注，您的标注可能会与您的页脚重叠或类似的奇怪东西。*）

如果您提供更多信息，我可以进一步详细说明修复。在您的示例帖子中，什么是呼吁？

# javascript - YUI Lang.sub 函数的 jQuery 等效项

> ID：15734495
> 
> 赞同：1
> 
> 时间：2013-03-31T21:02:58.847
> 
> 标签：javascript, jquery, yui, handlebars.js, parse-platform

我正在学习使用 Parse API，并找到了使用 handlebars.js 进行模板的本[教程。](http://net.tutsplus.com/tutorials/javascript-ajax/getting-started-with-parse/)由于我对 jQuery 很熟悉并且没有 YUI 的经验，所以我试图简单地用 jQuery 重写上面的教程。

但我被困在以下部分：

```
var content = Y.Lang.sub(Y.one('#todo-items-template').getHTML(), {
                        content: item.get('content'),
                        id: item.id,
                        isComplete: item.get('isComplete')
                    }); 
```

其中、、`content`和`id`是`isComplete`Parse 网上商店中的字段。

现在，我的问题是：上面的[Lang.sub](http://yuilibrary.com/yui/docs/api/classes/Lang.html#method_sub) YUI 函数的 jQuery 等价物是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:16:18.533

这是非常基础的内容，可以根据您的需求进行调整或扩展：

```
$.sub = function(str, obj) {
  return str.replace(/\{([^}]+)\}/g, function(_, m) {
    return obj[m];
  });
};

console.log($.sub('Hello {foo}', { foo: 'World' }));
//=> Hello World 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:47:16.493

我建议拉入 Handlebars JS 存储库；这是一个非常流行的解决方案并且非常强大。由于它很受欢迎，因此学习如何使用它可能是一个好主意，因为您将来可能会再次遇到它。

此处列出了其他模板框架：http: [//microjs.com/#templating](http://microjs.com/#templating)

# xampp - 本地主机不再正常工作

> ID：15734508
> 
> 赞同：2
> 
> 时间：2013-03-31T21:04:29.293
> 
> 标签：xampp, localhost

我刚刚使用 Xampp 建立了一个网站，效果很好。我刚刚将我的网站（我过去通过更新到实时服务器来开发）转移到本地主机，但它根本无法正常工作。

图像未显示，页面未正确刷新。

我不得不将 CSS 图像更改为，`/folder/x`而不是 just `x`，我猜我可以理解，但为什么我的 HTML 图像突然不起作用？

其中一个页面，路径甚至是绝对的，但是即使页面保存在本地文件夹中，它也不会更新。

是什么赋予了？我所做的不同之处是在 MySQL 中为 root 用户添加了一个密码，并在某些`mod_rewrite`s 上尝试（但失败了），我将其删除。

它指向图像`localhost/`而不是`localhost/folder`，即使添加`folder/x`也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:45:57.813

尝试查看 Apache[访问日志](http://httpd.apache.org/docs/2.2/logs.html)，看看是否可以找到对路径错误的图像的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:32:02.747

您可能忘记转换链接或犯了错误。请记住，/images/x.png 意味着它试图从根目录而不是从您的站点所在的当前文件夹中查找文件夹图像。尝试使用 ./images/x.png 代替。

也许您可以从您的网站上发布一个示例？

# background - 如何防止绝对位置 里面 改变它的宽度？

> ID：15734509
> 
> 赞同：0
> 
> 时间：2013-03-31T21:04:30.530
> 
> 标签：background, html-lists, absolute

我正在努力达到[这个效果](http://i50.tinypic.com/301j961.png)。

假设我们有这样的结构：

```
<ul id="menu">
    <li><a href="#">Guides</a>
        <ul>
            <li><a href="#">Getting Started</a></li>
            <li><a href="#">Characters</a></li>
            <li><a href="#">Epics</a></li>
            <li><a href="#">Road Map</a></li>
        </ul>
    </li>
    <li><a href="#">Skills</a></li>
    <li><a href="#">Equipments</a></li>
</ul> 
```

这个简化的CSS：

```
ul#menu {
    display:inline-block;
    list-style-type:none;
    padding:0;
    height:30px; /* So the ul#menu's height isn't changed by the ul#menu>li>ul */
    overflow:visible; /* So the ul#menu>li>ul is visible on ul#menu>li:hover */
    background: #e69646;
    box-shadow:0 2px 3px 0 #666;
}

ul#menu>li>ul {
    list-style-type:none;
    padding:0;
    position:absolute;
    background:inherit; /*  */
    box-shadow:inherit;
} 
```

问题是在绝对定位上使用 ul#menu>li>ul 会使其失去背景渐变和阴影。`background:inherit`并`box-shadow:inherit`产生[这个结果](http://jsfiddle.net/bh6L5/)。

有没有办法达到预期的结果？

提前谢谢你们：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T11:30:21.867

这就是我会做的方式 - [http://jsfiddle.net/bh6L5/3/](http://jsfiddle.net/bh6L5/3/)

```
<ul id="menu">
    <li><a href="#">Guides</a>
        <ul>
            <li><a href="#">Getting Started</a></li>
            <li><a href="#">Characters</a></li>
            <li><a href="#">Epics</a></li>
            <li><a href="#">Road Map</a></li>
            <div id="fake">Guides</div>
        </ul>
    </li>
    <li><a href="guides.html">Skills</a></li>
    <li><a href="guides.html">Equipments</a></li>
</ul> 
```

然后将此添加到您的CSS

```
#fake {
    position:absolute;
    width:45px;
    height:31px;
    padding:0 10px;
    background: #e69646; 
    z-index:999;
    top: -31px;
    left:0px; 
    border-top-left-radius:5px;
    border-top-right-radius:5px;
    -webkit-border-radius-topleft:5px;
    -webkit-border-radius-topright:5px;
    -moz-border-radius-topleft:5px;
    -moz-border-radius-topright:5px;
} 
```

# html - 发布 HTML 负载

> ID：15734517
> 
> 赞同：0
> 
> 时间：2013-03-31T21:05:21.643
> 
> 标签：html, forms, post, onload

在加载时发布 HTML 表单的最佳方式是什么？这是我目前正在尝试的：

```
<?php  
 if ($Autopost == "1");
 {
   <body onLoad="mail.submit()">
   <form method="POST" name="mail" class="adjacent" action="./Script/addmaillist.php">
   <input type="hidden" name="email" value="<?php echo $email; ?>">
   <input type="hidden" name="genre" value="<?php echo $genre; ?>">
   </form>
 }
?> 
```

我只想知道这是否是一个好方法，是否有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:10:31.897

您不需要任何服务器端代码即可在加载时提交。此外，您的代码看起来并不安静。那是在php中吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:22:34.513

您的代码中有一些小的语法错误：

```
<?php  
if ($Autopost == "1")
{ ?>
   <body onLoad="mail.submit()">
   <form method="POST" name="mail" class="adjacent" action="./Script/addmaillist.php">
   <input type="hidden" name="email" value="<?php echo $email; ?>" />
   <input type="hidden" name="genre" value="<?php echo $genre; ?>" />
   </form>
<?php
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:26:09.177

我同意 Kolink 的观点，似乎没有必要将信息发送到客户端然后再发送回服务器，但假设您出于某种原因需要这样做，您可以使用 Javascript 和 jQuery 通过`$(document).ready()`事件发布表单，该事件触发并运行页面加载时的内容。因此，您将拥有带有 id="mail" 的表单，并且在您的脚本中，您可以拥有：

```
$(document).ready(function() {
    $("#mail").submit();
} 
```

# mongoid - 按嵌套属性排序，Mongoid

> ID：15734519
> 
> 赞同：0
> 
> 时间：2013-03-31T21:05:35.910
> 
> 标签：mongoid

我有一个具有此架构的模型：

```
class Treatment
  include Mongoid::Document

  field :value, type: Money # money-rails gem
end 
```

该值字段被保存到数据库中`value: {"cents"=>313, "currency_iso"=>"EUR"}`

我想找到所有治疗方法并按`cents`价值对其进行排序。

现在这就是我的做法：

`Treatment.collection.find().sort({value: { :cents => 1 }})`

这是使用轻便摩托车驱动程序。我怎样才能使用普通的 Mongoid 来做到这一点？

编辑1。

```
 [6] pry(main)> Treatment.all.only(:value).asc('value.cents').entries
  => [#<Treatment _id: 515854c2a1d24ccb1f000005, value: {"cents"=>2849, "currency_iso"=>"EUR"}>,
   #<Treatment _id: 515854c2a1d24ccb1f000006, value: {"cents"=>313, "currency_iso"=>"EUR"}>,
   #<Treatment _id: 515854c2a1d24ccb1f00000f, value: {"cents"=>1214, "currency_iso"=>"EUR"}>,
   #<Treatment _id: 515854c2a1d24ccb1f000010, value: {"cents"=>1795, "currency_iso"=>"EUR"}>,
   #<Treatment _id: 515854c2a1d24ccb1f000011, value: {"cents"=>105, "currency_iso"=>"EUR"}>,
   #<Treatment _id: 515854c2a1d24ccb1f000012, value: {"cents"=>2547, "currency_iso"=>"EUR"}> 
```

编辑2。

mongodb：稳定的 2.4.1-x86_64 mongoid (3.1.2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:16:58.607

使用点语法：

```
Treatment.all.asc('value.cents') 
```

**编辑：** 完整示例：

```
require 'mongoid'
Mongoid.load!("mongoid.yml", :development)

class Treatment
  include Mongoid::Document
  field :value, type: Hash
end

Treatment.delete_all

15.times do
  Treatment.create(value: {cents: rand(3000), currency_iso: "EUR" })
end
p Treatment.all.only(:value).asc('value.cents').map{|t| t.value["cents"] } 
```

# android - 运行临时循环的 Android 代码

> ID：15734520
> 
> 赞同：-1
> 
> 时间：2013-03-31T21:05:49.200
> 
> 标签：android, while-loop, lifecycle, android-anr-dialog

我想制作一个 android 应用程序，它将完成它的启动，然后运行一个 while 循环，直到用户完成某个任务。然后代码将运行另一个函数以确保用户已正确完成任务。我该怎么办。我尝试将 while 循环放在 onCreate、onStart 和 onResume 中，并且在所有 while 循环中永远运行而不让 GUI 被绘制，因此使任务无法完成（有时我也会收到 ANR 消息）。我应该将 while 循环放在哪里，以便它在该活动开始后立即运行并且不会干扰启动？

谢谢，

安德鲁吉斯17

编辑 3-31-13 2:45 PST：

所以我接受了 RyPope 的建议并创建了一个新线程，并从主线程调用了一个函数，但它不喜欢那样。这是我的所有代码：

` 公共类 MainActivity 扩展 Activity {

```
public EditText pass1, pass2, pass3, pass4;
public int current = 1;
public boolean enteringCode = true;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    pass1 = (EditText) findViewById(R.id.pass1);
    pass2 = (EditText) findViewById(R.id.pass2);
    pass3 = (EditText) findViewById(R.id.pass3);
    pass4 = (EditText) findViewById(R.id.pass4);

    new Thread(new Runnable() {
        public void run() {
            checkInputs();
        }
    }).start();
}

public void checkInputs() {
    while(enteringCode) {
        if(pass1.getText().toString().length() > 0) {
            current = 2;
        }
        if(pass2.getText().toString().length() > 0) {
            current = 3;
        }
        if(pass3.getText().toString().length() > 0) {
            current = 4;
        }
        if(pass4.getText().toString().length() > 0) {
            enteringCode = false;
            System.out.println(Integer.parseInt(pass1.getText().toString() + pass2.getText().toString() + pass3.getText().toString() + pass4.getText().toString()));
            authenticateCode(Integer.parseInt(pass1.getText().toString() + pass2.getText().toString() + pass3.getText().toString() + pass4.getText().toString()));
        }
        if(current == 1) {
            pass1.requestFocus();
        }
        if(current == 2) {
            pass2.requestFocus();
        }
        if(current == 3) {
            pass3.requestFocus();
        }
        if(current == 4) {
            pass4.requestFocus();
        }
    }
}

public void authenticateCode(int code) {

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

} ` 所以当它运行并且视图尝试请求焦点时它崩溃并且我得到以下 logcat 输出：

`03-31 14:46:54.803: E/AndroidRuntime(10922): FATAL EXCEPTION: Thread-4197 03-31 14:46:54.803: E/AndroidRuntime(10922): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 03-31 14:46:54.803: E/AndroidRuntime(10922): at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4062) 03-31 14:46:54.803: E/AndroidRuntime(10922): at android.view.ViewRootImpl.invalidateChild(ViewRootImpl.java:730) 03-31 14:46:54.803: E/AndroidRuntime(10922): at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:779) 03-31 14:46:54.803: E/AndroidRuntime(10922): at android.view.ViewGroup.invalidateChild(ViewGroup.java:4005) 03-31 14:46:54.803: E/AndroidRuntime(10922): at android.view.View.invalidate(View.java:8605) 03-31 14:46:54.803: E/AndroidRuntime(10922): at android.view.View.onFocusChanged(View.java:3884) 03-31 14:46:54.803: E/AndroidRuntime(10922): at android.widget.TextView.onFocusChanged(TextView.java:8281) 03-31 14:46:54.803: E/AndroidRuntime(10922): at android.view.View.unFocus(View.java:3814) 03-31 14:46:54.803: E/AndroidRuntime(10922): at android.view.ViewGroup.requestChildFocus(ViewGroup.java:530) 03-31 14:46:54.803: E/AndroidRuntime(10922): at android.view.View.handleFocusGainInternal(View.java:3706) 03-31 14:46:54.803: E/AndroidRuntime(10922): at android.view.View.requestFocus(View.java:5402) 03-31 14:46:54.803: E/AndroidRuntime(10922): at android.view.View.requestFocus(View.java:5352) 03-31 14:46:54.803: E/AndroidRuntime(10922): at android.view.View.requestFocus(View.java:5330) 03-31 14:46:54.803: E/AndroidRuntime(10922): at com.thirteenbit.driveSafe.MainActivity.checkInputs(MainActivity.java:51) 03-31 14:46:54.803: E/AndroidRuntime(10922): at com.thirteenbit.driveSafe.MainActivity$1.run(MainActivity.java:26) 03-31 14:46:54.803: E/AndroidRuntime(10922): at java.lang.Thread.run(Thread.java:856)`

有人有解决这个困境的办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:14:29.523

可能最好创建一个新[线程](http://developer.android.com/guide/components/processes-and-threads.html)，以便启动不会挂在循环中。在 onCreate 中试试这个：

```
new Thread(new Runnable() {
    public void run() {
        while(true)
        {

        }
    }
}).start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:15:50.230

我认为你的概念是有缺陷的。您可能并不真正希望循环运行。您希望在用户完成任务后发生一些事情。您应该使用在用户完成任务后激活的侦听器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:16:00.183

当你想让一些代码循环运行时，你必须在新线程上运行它，因为在主（UI）线程上执行此操作时，你的应用程序无法更新 UI，因为你一直使用主线程。所以尝试制作新的[线程](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html)或[计时器](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)（更好）。

我希望这对你有帮助。

# xcode - 如何将我的 .m 文件更改为 .mm 文件？

> ID：15734521
> 
> 赞同：3
> 
> 时间：2013-03-31T21:05:52.440
> 
> 标签：xcode, file, error-handling, cocos2d-iphone, lexical

如何将我的 .m 文件更改为 .mm 文件？

我收到错误消息：找不到 cassert 文件

我研究并发现我需要将我的文件更改为.mm？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T21:11:24.743

如果您在 XCode 中，您可以简单地在 Project Navigator 中选择文件，选择它后，稍等片刻，再次单击它，文件名将自动选择。然后您可以将文件名更改为“.mm”

# c++ - 屏幕上的客户端矩形坐标

> ID：15734528
> 
> 赞同：7
> 
> 时间：2013-03-31T21:06:32.180
> 
> 标签：c++, winapi, plugins, browser

如何获取窗口客户区相对于屏幕的坐标？

我考虑过使用`GetClientRect`and `ClientToScreen`。另外，在浏览器窗口中是什么`ClientRect`？只有`HTML`显示文档的矩形，或者它包括浏览器栏和弹出菜单，可能会缩小`HTML`文档的尺寸？

我试过这个：

```
HWND hWnd;
RECT rc;
if (GetClientRect(hWnd, &rc)) // get client coords 
{
    MapWindowPoints(hWnd, NULL, reinterpret_cast<POINT*>(&rc), 2); // converts rect rc points
    return rc.top;
} 
```

但可悲的是，浏览器的客户矩形包括所有弹出的浏览器菜单和栏，因此不能用于检测浏览器 HTML 文档空间的准确坐标。如果有人对如何完成提出建议，将很乐意尝试。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-31T21:11:06.310

是的，您可以使用以下`ClientToScreen`功能执行此操作：

```
RECT rc;
GetClientRect(hWnd, &rc); // get client coords
ClientToScreen(hWnd, reinterpret_cast<POINT*>(&rc.left)); // convert top-left
ClientToScreen(hWnd, reinterpret_cast<POINT*>(&rc.right)); // convert bottom-right 
```

浏览器中的“客户端”矩形是什么取决于浏览器的实现。您可以使用 Spy++ 自己发现这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-29T09:24:28.663

要将窗口的客户矩形转换为屏幕坐标，请调用[MapWindowPoints](https://msdn.microsoft.com/en-us/library/dd145046.aspx)函数。它实现了特殊处理以始终返回一个 valid `RECT`，即使在涉及[从右到左布局的](https://msdn.microsoft.com/en-us/library/ms632599.aspx#layout_mirroring)窗口的场景中使用时也是如此：

> 如果*hWndFrom*或*hWndTo*（或两者）是镜像窗口（即具有`WS_EX_LAYOUTRTL`扩展样式）并且恰好两个点在*lpPoints*中传递，`MapWindowPoints`则将这两个点解释为 a[`RECT`](https://msdn.microsoft.com/en-us/library/dd162897.aspx)并可能自动交换该矩形的左右字段以确保左不大于右。

相反，在这两点上调用[ClientToScreen](https://msdn.microsoft.com/en-us/library/dd183434.aspx)无法考虑 RTL 布局，并且可能会产生无效的`RECT`. 它未能遵守[矩形坐标](https://msdn.microsoft.com/en-us/library/dd162900.aspx)不变量之一：

> 矩形右侧的坐标值必须大于其左侧的坐标值。同样，底部的坐标值必须大于顶部的坐标值。

在屏幕坐标中返回窗口的客户矩形的可靠函数如下所示：

```
RECT client_rect_in_screen_space(HWND const hWnd) {
    RECT rc{ 0 };
    if (!::GetClientRect(hWnd, &rc)) {
        auto const err_val{ ::GetLastError() };
        throw std::system_error(err_val, std::system_category());
    }

    ::SetLastError(ERROR_SUCCESS);
    if(::MapWindowPoints(hWnd, nullptr, reinterpret_cast<POINT*>(&rc), 2) == 0) {
        auto const err_val{ ::GetLastError() };
        if (err_val != ERROR_SUCCESS) {
            throw std::system_error(err_val, std::system_category());
        }
    }

    return rc;
} 
```

* * *

问题更新要求一个不同的、不相关的问题。系统中没有内置 API，可让您查询 Web 浏览器的显示区域以获取其 HTML 内容。最有希望的解决方案是使用[UI 自动化](https://msdn.microsoft.com/en-us/library/windows/desktop/ee684009.aspx)。然而，这个问题过于宽泛，无法在此处提供更详细的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-26T09:52:35.303

正如 评论的[`Raymond Chen`](https://stackoverflow.com/users/902497/raymond-chen)那样，这样做的首选方式应该类似于以下内容：

```
inline POINT get_client_window_position(const HWND window_handle)
{
    RECT rectangle;

    GetClientRect(window_handle, static_cast<LPRECT>(&rectangle));
    MapWindowPoints(window_handle, nullptr, reinterpret_cast<LPPOINT>(& rectangle), 2);

    const POINT coordinates = {rectangle.left, rectangle.top};

    return coordinates;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-19T23:41:27.923

```
POINT origin;
origin.x = 0;
origin.y = 0;
ClientToScreen(hWnd, &origin); 
```

现在`origin`，在屏幕坐标中，客户区的左上角。

要将 (x,y) 从客户区坐标转换为屏幕坐标，请添加`origin`. 做相反的事情，减去。

# c# - 平均数据表列 - 指定的转换无效

> ID：15734532
> 
> 赞同：0
> 
> 时间：2013-03-31T21:06:48.630
> 
> 标签：c#, linq, datatable, average

我正在尝试使用此策略对数据表中第五列之后的每一列中的值进行平均

```
List<double> mylist = new List<double>();
        for (int col = 5; col < GridData.Columns.Count; col++)
        {
            double avg = GridData.AsEnumerable()
                .Where(x => x[GridData.Columns[col]] != DBNull.Value)
             .Average(x => x.Field<double>(GridData.Columns[col]));
            mylist.Add(avg);
        } 
```

已根据我在[此 stackoverflow 问题](https://stackoverflow.com/questions/6864261/conditionally-average-a-column-of-data-in-a-datatable)中找到的内容进行了修改。

每次我运行它时，它都会给我一个“指定的演员表无效”错误 -`.Average(x => x.Field<double>(GridData.Columns[col]));`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:38:12.000

最简单的解决方案只是解析 DataTable 字段中的字符串，但您必须确保可以解析该值。检查这个：

```
List<double> mylist = new List<double>();
for (int col = 5; col < GridData.Columns.Count; col++)
{
       double avg = GridData.AsEnumerable()
            .Where(x => x[col] != DBNull.Value)
            .Average(x => double.Parse(x[col].ToString()));
                mylist.Add(avg);
} 
```

甚至更好地使用`TryParse`

```
List<double> mylist = new List<double>();
for (int col = 0; col < GridData.Columns.Count; col++)
{
       double a;
       double avg = GridData.AsEnumerable()
             .Where(x => x[col] != DBNull.Value)
             .Average(x => double.TryParse(x[col].ToString(), out a) ? a:0.0);
                   mylist.Add(avg);
} 
```

第三个，最安全但有冗余解析：

```
for (int col = 0; col < GridData.Columns.Count; col++)
            {
                double a;
                double avg = GridData.AsEnumerable()
                    .Where(x => x[col] != DBNull.Value && double.TryParse(x[col].ToString(), out a))
                    .Average(x => double.Parse(x[col].ToString()));
                mylist.Add(avg);
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:09:53.497

根据您的评论，错误：

```
System.Data.Datarow does not contain a defintion for Field 
```

建议通用扩展方法[`Field`](http://msdn.microsoft.com/en-us/library/bb383067.aspx)：

```
public static T Field<T>(this DataRow row, DataColumn column) 
```

没有找到。您是否引用了带有扩展方法的程序集`DataRow`？

```
System.Data.DataSetExtensions.dll 
```

你可能应该`using`为它添加一个：

```
using System.Data.DataSetExtensions; 
```

# asp.net-mvc-3 - ViewModel 中的 MVC3 IPagedList

> ID：15734536
> 
> 赞同：1
> 
> 时间：2013-03-31T21:07:17.953
> 
> 标签：asp.net-mvc-3, pagedlist

我想有一个页面，在页面顶部有一个表格，可以在系统中输入电影，在页面底部，我希望有一个表格来显示库存中的所有电影。我收到一条错误消息：值不能小于 1。参数名称：页面大小。

我有一个当前看起来像这样的视图模型：

```
public class InventoryViewModel
{
    public Inventory Inventory { get; set; }
    public IPagedList<Inventory> InventoryList { get; set; }
} 
```

在我的控制器中，我有：

```
public ActionResult Index(int? page)
    {
        ViewBag.MoviesList = new SelectList(inventoryRepository.Movies, "MovieId", "Title");

        InventoryViewModel vm = new InventoryViewModel
        {
            Inventory = new Inventory(),
            InventoryList = inventoryRepository.GetInventory.ToPagedList(page.HasValue ? page.Value - 1 : 0, defaultPageSize)
        };
        return View(vm);
    } 
```

在我看来，我有：

```
<div class="well">
<h4>Enter Movie in System:</h4>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true, "Movie was not entered in system. Please correct the errors and try again.")
    <div>
        <div class="input-prepend">
            <span class="add-on"><i class="icon-film"></i></span>
            @Html.DropDownListFor(m => m.Inventory.MoviesId, (SelectList)ViewBag.MoviesList)
            @Html.ValidationMessageFor(m => m.Inventory)
        </div>      

        <div class="input-prepend">
            <span class="add-on"><i class="icon-calendar"></i></span>
            @Html.TextBox("Quantity")
        </div>
        <p><button class="btn btn-primary" type="submit" value="Submit">Submit</button></p>
        @Html.ValidationSummary()
    </div>
}
</div>

<div>
    <h3>Current Inventory:</h3>
</div>
<table class="table table-bordered table-hover">
    <thead>
        <tr>
            <th style="width: 15%;">Checkout Number</th>
            <th style="width: 15%;">Title</th>
            <th style="width: 23%;">Availability</th>
            <th style="width: 17%;"></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var vm in Model.InventoryList.OrderBy(m => m.CheckoutNum))
        {
            <tr>
                <td>@vm.CheckoutNum</td>
                <td>@vm.Movies.Title</td>
                <td>@vm.isAvail</td>
                <td>

                </td>
            </tr>
        }
    </tbody>
    <tfoot>
       <tr>
          <td colspan="4">
                @Html.Pager(Model.InventoryList.PageSize, Model.InventoryList.PageNumber, Model.InventoryList.TotalItemCount).Options(o => o
                    .DisplayTemplate("BootstrapPagination").RouteValues(new { q = ViewBag.Query, area = "" } )
                    .AlwaysAddFirstPageNumber().MaxNrOfPages(5))
          </td>
        </tr>
    </tfoot>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:43:16.420

我想到了。我在错误的构造函数中设置了 defaultPageSize，因此变量从未被设置，导致页面大小为 0。

```
 int defaultPageSize;
    private IInventoryRepository inventoryRepository;

    public InventoryController()
    {
        this.inventoryRepository = new InventoryRepository(new MovieContext());
        this.defaultPageSize = Convert.ToInt32(System.Configuration.ConfigurationManager.AppSettings["defaultPageSize"]);
    }

    public InventoryController(IInventoryRepository inventoryRepository)
    {
        this.inventoryRepository = inventoryRepository;
        this.defaultPageSize = Convert.ToInt32(System.Configuration.ConfigurationManager.AppSettings["defaultPageSize"]);
    } 
```

# sockets - 分布式系统中的中间件是什么？

> ID：15734537
> 
> 赞同：3
> 
> 时间：2013-03-31T21:07:19.793
> 
> 标签：sockets, network-programming, middleware, distributed-system

我现在正在上分布式系统的课程，但我无法掌握中间件的概念。我知道它是一个软件层，在应用程序和网络上的实际通信之间提供了一定程度的抽象，但我需要具体的例子。我知道 CORBA 和 Java RMI 是中间件的例子，但这些对我来说真的没有意义。

当我用 Java 编写一个通过 DatagramSockets() 进行通信的客户端-服务器程序时，是那个中间件吗？如果是这样，为什么不呢？Java DatagramSocket() 方法提供了从我的应用程序到网络上实际通信的一定程度的抽象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T07:21:56.233

到目前为止，我同意评论者的观点——这并不是一个明确的术语。

但是，我能想到的最适用于您的问题的是消息队列，例如[0MQ](http://www.zeromq.org/)或[RabbitMQ](http://www.rabbitmq.com/)。它们提供了与网络交互的不同方式，这些方式比直接使用 TCP 或 UDP 更加抽象。它们都鼓励使用可应用于大多数分布式系统问题的“网络模式”。

*   0MQ 提供了关于客户端和服务器开始顺序的灵活性，使用多个协议（线程之间/进程之间/通过 TCP/通过 UDP/...）发送消息，并处理网络断开连接。

*   RabbitMQ（我对此知之甚少）提供了持久化到磁盘的集中式消息队列，并允许您网络上的客户端只知道相关队列在哪里（而不是该队列的所有生产者/消费者在哪里）。

# c++ - C++ 内存扫描

> ID：15734542
> 
> 赞同：1
> 
> 时间：2013-03-31T21:07:40.183
> 
> 标签：c++, memory

我有一个应用程序需要扫描内存中的某些数据类型。为了获得一些基准测试，我启动了这个程序：

```
long count = 0;

MEMORY_BASIC_INFORMATION meminfo;
unsigned char *addr = 0;

HANDLE hProc = GetCurrentProcess();

while (true){

    if ( VirtualQueryEx( hProc, addr, &meminfo, sizeof( meminfo ) ) == 0 ){

        break;

    }

    if ( ( meminfo.State & MEM_COMMIT ) && ( meminfo.Protect & WRITABLE ) ){

        addr = (unsigned char*)meminfo.BaseAddress + meminfo.RegionSize;

        count++;

        printf("%d",count);

    }

}

printf("%ld\n",count); 
```

该程序不起作用，它在第一个内存块处阻塞/崩溃。从概念上讲，它也失败了，理想情况下，我需要指向当前流程中所有变量的指针，这样我就可以检查它们是否与我有任何相关性。我已经用谷歌搜索了一段时间，但无济于事，如果有人能把我推向正确的方向，那就太好了。

我知道首先这样做通常是一个坏主意，我只是想知道如果我需要这样做会如何完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-19T22:22:12.677

`WRITEABLE`（在第二个`if`块）不是内存保护常量之一。你的意思是`PAGE_READWRITE`？您可以在[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366786%28v=vs.85%29.aspx)找到完整的选项列表。

内存访问权限很棘手。该功能的其余部分虽然有效。这是可行的，尽管只有在单步执行时才能查看 addr：

```
#include <Windows.h>
using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    long count = 0;
    MEMORY_BASIC_INFORMATION meminfo;
    unsigned char *addr = 0;
    HANDLE hProc = GetCurrentProcess();
    while (true)
    {
        if (VirtualQueryEx(hProc, addr, &meminfo, sizeof(meminfo)) == 0)
        {
            // TODO GetLastError
            break;
        }

        // if ((meminfo.State & MEM_COMMIT) && (meminfo.Protect & PAGE_READWRITE))
        {
            addr = (unsigned char*) meminfo.BaseAddress + meminfo.RegionSize;
            count++;
            printf("%d", count);
        }
    }

    printf("%ld\n", count);
} 
```

# css - 使用 HTML data-attribute 设置 CSS background-image url

> ID：15734546
> 
> 赞同：89
> 
> 时间：2013-03-31T21:08:01.473
> 
> 标签：css, background-image, custom-data-attribute

我计划为朋友构建一个自定义照片库，并且我确切地知道我将如何生成 HTML，但是我遇到了 CSS 的一个小问题。
（如果可能的话，我宁愿不要让页面样式依赖 jQuery）

* * *

我的问题是：在 CSS
`Data-Attribute`中的 HTML
`Background-image`

* * *

我正在为我的 html 缩略图使用这种格式：
`<div class="thumb" data-image-src="images/img.jpg"></div>`

我假设 CSS 应该是这样的：

```
.thumb {
    width:150px;
    height:150px;
    background-position:center center;
    overflow:hidden;
    border:1px solid black;

    background-image: attr(data-image-src);/*This is the question piece*/
} 
```

* * *

我的目标是`data-image-src`从`div.thumb`我的 HTML 文件中获取，并将其用于我的 CSS 文件中的每个`div.thumb`（s）`background-image`源。

这是一个 Codepen Pen，以便获得我正在寻找的动态示例：http:
[//codepen.io/thestevekelzer/pen/rEDJv](http://codepen.io/thestevekelzer/pen/rEDJv)

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-08-25T17:52:49.407

您最终将能够使用

```
background-image: attr(data-image-src url); 
```

但据我所知，这还没有在任何地方实施。在上面，`url`是一个可选的“类型或单位”参数`attr()`。请参阅[https://drafts.c​​sswg.org/css-values/#attr-notation](https://drafts.csswg.org/css-values/#attr-notation)。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2019-04-02T12:43:31.117

如果你想只保留 HTML 和 CSS，你可以使用 CSS 变量。请记住，[IE 不支持 css 变量](https://caniuse.com/#search=css%20variable)。

```
<div class="thumb" style="--background: url('images/img.jpg')"></div> 
```

```
.thumb {
    background-image: var(--background);
} 
```

[代码笔： https](https://codepen.io/bruce13/pen/bJdoZW) ://codepen.io/bruce13/pen/bJdoZW

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-05-28T16:23:42.137

将内容与风格混为一谈并不是最佳做法，但解决方案可能是

```
<div class="thumb" style="background-image: url('images/img.jpg')"></div> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-05-29T20:45:30.857

为此，您将需要一点 JavaScript：

```
var list = document.getElementsByClassName('thumb');

for (var i = 0; i < list.length; i++) {
  var src = list[i].getAttribute('data-image-src');
  list[i].style.backgroundImage="url('" + src + "')";
} 
```

将其包装在`<script>`标签之前底部的`</body>`标签中，或者包装在页面加载后调用的函数中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-10T15:15:36.317

使用一些 Sass 怎么样？这是我为实现类似目标所做的工作（尽管请注意，您必须为每个数据属性创建一个 Sass 列表）。

```
/*
  Iterate over list and use "data-social" to put in the appropriate background-image.
*/
$social: "fb", "twitter", "youtube";

@each $i in $social {
  [data-social="#{$i}"] {
    background: url('#{$image-path}/icons/#{$i}.svg') no-repeat 0 0;
    background-size: cover; // Only seems to work if placed below background property
  }
} 
```

本质上，您列出了所有数据属性值。然后使用 Sass @each 遍历并选择 HTML 中的所有数据属性。然后，引入迭代器变量并使其与文件名匹配。

无论如何，正如我所说，您必须列出所有值，然后确保您的文件名包含列表中的值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-16T12:49:35.910

HTML

```
<div class="thumb" data-image-src="img/image.png"> 
```

jQuery

```
$( ".thumb" ).each(function() {
  var attr = $(this).attr('data-image-src');

  if (typeof attr !== typeof undefined && attr !== false) {
      $(this).css('background', 'url('+attr+')');
  }

}); 
```

[JSFiddle](https://jsfiddle.net/5fjacdam/)上的演示

你也可以用 JavaScript 做到这一点。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-16T05:57:31.343

对于像我这样想要一个愚蠢答案的人

类似于如何按照 1、2、3 的步骤进行操作

这就是我所做的

首先创建 HTML 标记

```
<div class="thumb" data-image-src="images/img.jpg"></div> 
```

然后在结束正文标记之前，添加此脚本

我在下面的代码中包含了结尾主体作为示例

复制时要小心

```
<script>
var list = document.getElementsByClassName('thumb');

for (var i = 0; i < list.length; i++) {
  var src = list[i].getAttribute('data-image-src');
  list[i].style.backgroundImage="url('" + src + "')";
}
</script>

</body> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-03T07:22:24.033

这是使用 jQuery 的简单示例，我们可以将图像放在背景中

```
$('*[data-background-image]').each(function() {
    $(this).css({
        'background-image': 'url(' + $(this).data('background-image') + ')'
    });
});
```

```
div{
  height:200px;
  width:100% ;
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<div data-background-image="https://via.placeholder.com/500"> </div>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-15T16:44:04.727

**代码**

```
<div id="borderLoader"  data-height="230px" data-color="lightgrey" data- 
width="230px" data-image="https://fiverr- res.cloudinary.com/t_profile_thumb,q_auto,f_auto/attachments/profile/photo/a54f24b2ab6f377ea269863cbf556c12-619447411516923848661/913d6cc9-3d3c-4884-ac6e-4c2d58ee4d6a.jpg">

</div> 
```

**JS代码**

```
var dataValue, dataSet,key;
dataValue = document.getElementById('borderLoader');
//data set contains all the dataset that you are to style the shape;
dataSet ={ 
   "height":dataValue.dataset.height,
   "width":dataValue.dataset.width,
   "color":dataValue.dataset.color,
   "imageBg":dataValue.dataset.image
};

dataValue.style.height = dataSet.height;
dataValue.style.width = dataSet.width;
dataValue.style.background = "#f3f3f3 url("+dataSet.imageBg+") no-repeat 
center"; 
```

# regex - 如何将此正则表达式转换为接受 mm-dd-yyyy 格式？

> ID：15734549
> 
> 赞同：2
> 
> 时间：2013-03-31T21:08:46.033
> 
> 标签：regex

到目前为止，这是我的正则表达式

`/^((((0?[1-9]|[12]\d|3[01])[\-\/](0?[13578]|1[02])[\-\/]((1[6-9]|[2-9]\d)?\d{2}))|((0?[1-9]|[12]\d|30)[\-\/](0?[13456789]|1[012])[\-\/]((1[6-9]|[2-9]\d)?\d{2}))|((0?[1-9]|1\d|2[0-8])[\-\/]0?2[\-\/]((1[6-9]|[2-9]\d)?\d{2}))|(29[\-\/]0?2[\-\/]((1[6-9]|[2-9]\d)?(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00)|00)))|(((0[1-9]|[12]\d|3[01])(0[13578]|1[02])((1[6-9]|[2-9]\d)?\d{2}))|((0[1-9]|[12]\d|30)(0[13456789]|1[012])((1[6-9]|[2-9]\d)?\d{2}))|((0[1-9]|1\d|2[0-8])02((1[6-9]|[2-9]\d)?\d{2}))|(2902((1[6-9]|[2-9]\d)?(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00)|00))))$/i`

它可以完美地进行日期验证，包括闰年，但它接受的格式是 dd-mm-yyyy，我想要 mm-dd-yyyy。它还接受我不想要的年份的两位数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T21:10:53.297

[从示例开发复杂正则表达式的最简单方法是使用http://txt2re.com](http://txt2re.com)上的正则表达式生成器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T21:45:46.947

// 您可以投反对票或将其标记为“不是答案”，但我无法抗拒发布此...

天哪，你为什么这么讨厌自己？

正则表达式是一个强大而有用的工具，但它并不能解决这个世界上的所有问题。我一遍又一遍地看到解析日期的尝试——尊重闰年，或使用正则表达式解析 XML/HTML。

这是*错误*的。

您的正则表达式不可读且不可维护（您已通过此问题证明了这一点）。构建这样*的怪物正则表达式*作为练习可能会很好，但您甚至不应该考虑在生产环境中使用它。

原因是（仅举几例！）：

*   正确性：您不确定这是否有效。您将花费数小时来分析和测试它。

*   性能：这样大小的正则表达式*可能*需要很长时间才能执行。

*   错误输出：正则表达式只为您提供“匹配/不匹配”结果。您没有机会告诉用户他输入的日期在*语法上是无效*的还是*今年不存在 2 月 29 日*。

**学会为特定目的选择合适的工具**。不存在通用的“我可以做所有事情”的工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T21:38:31.863

哇。我真的怀疑一个正则表达式是去这里的方式......但是，让我们尝试一下。

首先重新格式化正则表达式以使其更具可读性。如您所见，它由许多替代方案组成。添加评论：

```
/^
 (
  (
   ((0?[1-9]|[12]\d|3[01])-/-/)    # dd-/-/
   |
   ((0?[1-9]|[12]\d|30)-/-/)       # dd-/-/ (uh, this seems redundant?)
   |
   ((0?[1-9]|1\d|2[0-8])[-/]0?2-/) # dd-/-/ (february)
   |
   (29[-/]0?2-/)
  )
  |
  (
   (
    (0[1-9]|[12]\d|3[01])     # day
    (0[13578]|1[02])          # month
    ((1[6-9]|[2-9]\d)?\d{2})  # year
   )
   |
   (
    (0[1-9]|[12]\d|30)        # day
    (0[13456789]|1[012])      # month
    ((1[6-9]|[2-9]\d)?\d{2})  # year
   )
   |
   (
    (0[1-9]|1\d|2[0-8])       # day
    02                        # month
    ((1[6-9]|[2-9]\d)?\d{2})  # year
   )
   |
   (
    2902                      # day and month
    (                         # year in which there's a 29-02-xxxx
     (1[6-9]|[2-9]\d)?
     (0[48]|[2468][048]|[13579][26])
     |
     ((16|[2468][048]|[3579][26])00)
     |
     00
    )
   )
  )
 )
$/i 
```

接下来，重新排序正则表达式以将其从 ddmmyyyy 更改为 mmddyyyy：

```
/^
 (
  (
   (-/(0?[1-9]|[12]\d|3[01])-/)    # -/dd-/
   |
   (-/(0?[1-9]|[12]\d|30)-/)       # -/dd-/ (uh, this seems redundant?)
   |
   ([-/]0?2(0?[1-9]|1\d|2[0-8])-/) # -/dd-/ (february) (I don't really get this one...)
   |
   ([-/]0?229-/) # really confused... what kind of date format is this?
  )
  |
  (
   (
    (0[13578]|1[02])          # month
    (0[1-9]|[12]\d|3[01])     # day
    ((1[6-9]|[2-9]\d)?\d{2})  # year
   )
   |
   (
    (0[13456789]|1[012])      # month
    (0[1-9]|[12]\d|30)        # day
    ((1[6-9]|[2-9]\d)?\d{2})  # year
   )
   |
   (
    02                        # month
    (0[1-9]|1\d|2[0-8])       # day
    ((1[6-9]|[2-9]\d)?\d{2})  # year
   )
   |
   (
    0229                      # day and month
    (                         # year in which there's a 29-02-xxxx
     (1[6-9]|[2-9]\d)?
     (0[48]|[2468][048]|[13579][26])
     |
     ((16|[2468][048]|[3579][26])00)
     |
     00
    )
   )
  )
 )
$/i 
```

请注意，我对包含的日期格式感到非常困惑，`-/`因此可能无法正确重写它们。

然后将其放入您的代码中。如果您不希望有人死于致命剂量的不可读的正则表达式，请保留注释（如果您的编程语言允许这样做）。

# asp.net-mvc - 具有英国日期值的 jQueryUI DatePicker 和 MVC4

> ID：15734550
> 
> 赞同：1
> 
> 时间：2013-03-31T21:08:50.653
> 
> 标签：asp.net-mvc, jquery-ui, datepicker, jquery-ui-datepicker

好的，我知道[这个问题已经被问过](https://stackoverflow.com/questions/9503663/mvc3-datepicker-uk-date)，被[问](https://stackoverflow.com/questions/2427504/jquery-ui-datepicker-date-format-issue-with-initial-value)过，被[问](https://stackoverflow.com/questions/8138539/jquery-datepicker-will-not-post-with-uk-date-string)过，但我错过了一些东西，似乎无法弄清楚，因为尽管当我尝试提交诸如 13/04/ 之类的日期时，日期选择器看起来是正确的2013 年验证开始并说

> [Date Due] 字段必须是日期

我有一个日期编辑器模板

```
@model DateTime?

@Html.TextBox("", (Model.HasValue ? 
       Model.Value.ToShortDateString() : 
       string.Empty), new { @class = "datepicker" }) 
```

视图模型

```
[DataType(DataType.Date)]
[DisplayFormat(DataFormatString = "{0:dd MMM yyyy}")]
[DisplayName("Date Due")]
public DateTime? DueDate { get; set; } 
```

和 jQuery

```
$(document).ready(function () {
    $(function () {
        $(".datepicker").datepicker({ dateFormat: 'dd/mm/yy' });
    });
}); 
```

当我输入 css 类为 的字段时会弹出日期选择器`datepicker`，我可以在日期选择器中选择一个日期，例如 2013 年 4 月 13 日，该值显示在文本框中，但提交时验证失败。

我在哪里错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:20:21.050

以下[链接](http://forums.asp.net/t/1857087.aspx/1?DateTime+DisplayFormat+seems+to+have+no+effect+MVC4+Razor+)有帮助吗？这意味着`DisplayFormatAttribute`您仅用于显示日期，并且不会自动应用于设置 ViewModel 属性，除非您指定`ApplyFormatInEditMode`. MVCx 不是很好，所以只是猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:20:25.010

验证的问题是 jQuery Validate 不理解文化。

对于日期，它只调用 javascript:`new Date( value )`对（某些）英国日期失败。

因此，您需要将全球化添加到客户端验证器 - 请参阅我对这个问题的回答：

[根据 MVC 中的文化的 DateTime 格式](https://stackoverflow.com/questions/15044132/datetime-format-according-to-the-culture-in-mvc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:45:05.433

对于我的问题的答案，我不能得到任何功劳；但对我有用的解决方案是[MVC DateTime validation - UK Date format 的公认答案，](https://stackoverflow.com/a/14081487/96505)并且是

> 为日期重载不显眼的 JavaScript 验证方法

一旦我将链接的帖子放入我的脚本文件中，链接的帖子就有对我有用的脚本。

我不确定这是否是必需的，因为正如@Nicholas Butler 所说

> jQuery Validate 不了解文化。

或者如果是因为我习惯`[DisplayFormat(DataFormatString = "{0: dd MMM yyyy}")]`将日期显示为 2013 年 4 月 20 日，而不是[指出的 20/04/2013](https://stackoverflow.com/a/12109078/96505)

> {0:dd/mm/yyyy} 应该是 {0:dd/MM/yyyy} 因为 mm 表示分钟，而不是月份：

所以可能是日期格式之间的差异导致了我的问题

# wordpress - 我的 WordPress 自定义模板可以在插件文件夹中还是仅在主题文件夹中？

> ID：15734551
> 
> 赞同：1
> 
> 时间：2013-03-31T21:08:53.127
> 
> 标签：wordpress, custom-post-type

我正在开发的 WordPress 主题有一个集成的自定义帖子类型，称为“相册”，它使用了一些自定义模板（archive-albums.php、content-albums.php 等）。为了可移植性，我想要做的是将此功能与模板文件一起转移到插件中。

我成功地从functions.php传输了CPT代码，但是当我尝试将模板文件从主题文件夹移动到插件文件夹时，事情就崩溃了。我觉得以某种方式注册模板应该很简单，以便 WordPress 知道加载它们。

我的 WordPress 自定义模板可以在插件文件夹中还是仅在主题文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:28:07.420

事情正在分崩离析，因为当您移动这些文件时，您违反了 WP 的本机模板层次结构。您需要明确声明这些文件的位置。以存档为例，您可以在 functions.php 中添加类似这样的内容（告诉 WP 到别处查看）：

```
add_filter('template_include', 'include_album_template', 1);
function include_album_template($template_path) {
if(get_post_type() == 'albums') {
    if(!is_single()) {
        $theme_file = 'path-to-your-plugin-directory';
        $template_path = $theme_file; 
    }
}
return $template_path;
} 
```

显然你会使用你自己的路径，我写的很仓促，所以你可能想要重构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-01T18:01:37.320

我有同样的问题。我已经在使用`add_filter ('template_include', ...)`的问题是我需要指定一个要返回的文件，在这种情况下，`index.php`. 这引发了主题没有像通过主题文件夹安装一样完全运行的问题，因为我需要让 WP 选择适当的文件进行渲染，而无需我的任何条件逻辑。因此，如果它是一个帖子，它将选择`single.php`等等。此方法引发的另一个问题是在`header.php`调用中`get_header ();`忽略本地文件`header.php`并加载默认主题安装文件。

# php - 我可以使用 phpQuery 找到完全匹配吗？

> ID：15734552
> 
> 赞同：3
> 
> 时间：2013-03-31T21:08:59.297
> 
> 标签：php, jquery, phpquery

我使用 phpQuery 制作了一个脚本。该脚本查找包含特定字符串的 td：

```
$match = $dom->find('td:contains("'.$clubname.'")'); 
```

到现在为止效果很好。因为一个俱乐部名称是例如奥地利 Lustenau，而第二个俱乐部名称是 Lustenau。它将选择两个俱乐部，但它应该只选择 Lustenau（第二个结果），所以我需要找到一个包含完全匹配的 td。

我知道 phpQuery 正在使用 jQuery 选择器，但不是全部。有没有办法使用 phpQuery 找到完全匹配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:01:04.200

更新：有可能，请参阅@pguardiario 的答案

* * *

*原始答案。（至少另一种选择）：*

不，不幸的是，使用 phpQuery 是不可能的。但可以使用**XPath**轻松完成。

想象一下，您必须遵循 HTML：

```
$html = <<<EOF
<html>
  <head><title>test</title></head>
  <body>
    <table>
      <tr>
        <td>Hello</td>
        <td>Hello World</td>
      </tr>
    </table>
  </body>
</html>
EOF; 
```

使用以下代码查找与 DOMXPath 的完全匹配：

```
// create empty document 
$document = new DOMDocument();

// load html
$document->loadHTML($html);

// create xpath selector
$selector = new DOMXPath($document);

// selects all td node which's content is 'Hello'
$results = $selector->query('//td[text()="Hello"]');

// output the results 
foreach($results as $node) {
    $node->nodeValue . PHP_EOL;
} 
```

* * *

但是，如果您真的需要 phpQuery 解决方案，请使用以下内容：

```
require_once 'phpQuery/phpQuery.php';

// the search string
$needle = 'Hello';

// create phpQuery document
$document = phpQuery::newDocument($html);

// get matches as you suggested
$matches = $document->find('td:contains("' . $needle . '")');

// empty array for final results
$results = array();

// iterate through matches and check if the search string
// is the same as the node value
foreach($matches as $node) {
    if($node->nodeValue === $needle) {
        // put to results
        $results []= $node;
    }
}

// output results
foreach($results as $result) {
    echo $node->nodeValue . '<br/>';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T06:52:40.180

它可以用过滤器完成，但它并不漂亮：

```
$dom->find('td')->filter(function($i, $node){return 'foo' == $node->nodeValue;}); 
```

但是，两者都不是在 css 和 xpath 之间来回切换

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T21:48:15.903

我没有 phpQuery 的经验，但 jQuery 会是这样的：

```
var clubname = 'whatever';
var $match = $("td").map(function(index, domElement) {
    return ($(domElement).text() === clubname) ? domElement : null;
}); 
```

phpQuery 文档表明它`->map()`是可用的，并且它以与 jQuery 相同的方式接受回调函数。

我相信您将能够执行到 phpQuery 的翻译。

**编辑**

这是我基于 5 分钟阅读的尝试 - 可能是垃圾，但这里有：

```
$match = $dom->find("td")->map(function($index, $domElement) {
    return (pq($domElement)->text() == $clubname) ? $domElement : null;
}); 
```

**编辑 2**

这是[jQuery 版本的演示](http://jsfiddle.net/Fhm8K/)。

[如果 phpQuery 按照其文档](http://code.google.com/p/phpquery/)中所说的进行，那么（从 javascript 正确翻译）它应该以相同的方式匹配所需的元素。

**编辑 3**

[在对phpQuery 回调系统](http://code.google.com/p/phpquery/wiki/Callbacks)进行了更多阅读之后，以下代码更有可能工作：

```
function textFilter($i, $el, $text) {
    return (pq($el)->text() == $text) ? $el : null;
}};
$match = $dom->find("td")->map('textFilter', new CallbackParam, new CallbackParam, $clubname); 
```

请注意，`->map()`它优于`->filter()`支持`->map()`更简单的方法来定义参数“位置”（参见参考页面中的示例 2）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-08T09:26:37.823

我知道这个问题很老，但我已经根据[hek2mgl的回答编写了一个函数](https://stackoverflow.com/users/171318/hek2mgl)

```
<?php

// phpQuery contains function

/**
* phpQuery contains method, this will be able to locate nodes
* relative to the NEEDLE
* @param string element_pattern
* @param string needle
* @return array
*/
function contains($element_pattern, $needle) {

    $needle = (string) $needle;
    $needle = trim($needle);

    $element_haystack_pattern = "{$element_pattern}:contains({$needle})";
    $element_haystack_pattern = (string) $element_haystack_pattern;

    $findResults = $this->find($element_haystack_pattern);

    $possibleResults = array();

    if($findResults && !empty($findResults)) {
        foreach($findResults as $nodeIndex => $node) {
            if($node->nodeValue !== $needle) {
                continue;
            }
            $possibleResults[$nodeIndex] = $node;
        }
    }

    return $possibleResults;

}

?> 
```

用法

```
<?php

$nodes = $document->contains("td.myClass", $clubname);

?> 
```

# javascript - bootstrap.js 模态按钮在每个先前打开的模态中触发一次单击

> ID：15734556
> 
> 赞同：0
> 
> 时间：2013-03-31T21:09:36.683
> 
> 标签：javascript, events, backbone.js, twitter-bootstrap, modal-dialog

我正在尝试使用引导模式打开一个模式窗口来编辑主干模型。一切似乎都很顺利，直到我第二次尝试同样的事情。单击模态按钮后，每个先前打开的模态我都会收到一个事件（之前的模态是否使用关闭/取消按钮关闭无关紧要）。

此行为与此问题中所示的相同：[https](https://github.com/twitter/bootstrap/issues/6828) ://github.com/twitter/bootstrap/issues/6828但我无法将解决方案外推到我的代码中。

这是我第一次使用引导和主干的方法，我想我误解了一些东西。我正在展示一张包含国家/地区的表格。每行都以 2 个按钮（编辑和删除）结束。当您单击其中一个按钮时，（单个）国家/地区视图会捕获事件，将模式包含在 dom 树中并显示它（事件“click .editar”）：

```
 var PaisModelView = Backbone.View.extend({

    tagName: 'tr',
    template: null,
    editarPaisView: null,
    editarPaisTemplate: null,

    // Eventos
    events: {
        'click .editar' : 'editar'
    },

    // Inicializar
    initialize: function(options) {
        this.model = options.model;
        this.template = options.template;
        this.editarPaisTemplate = options.editarPaisTemplate;
        this.model.bind("change", this.render, this);
        this.model.bind("destroy", this.close, this);
    },

    // Renderizar
    render: function(item) {
        if ($('#editarPais') != null) {
            $('#editarPais').modal('hide');
        }
        $(this.el).html(this.template(this.model.toJSON()));
        return this;
    },

editar: function(item) {
    item.preventDefault();
            // creates the view
    this.editarPaisView = new EditarPaisView({
        editarPaisTemplate : this.editarPaisTemplate, 
        pais : this.model
    });
            // creates the modal window
    $("#body").append(this.editarPaisView.render().el);
            // opens the modal window
    $('#editarPais').modal('show');
},

    close:function () {
        alert('Not implemented');
    }
}); 
```

我对国家模型版本表格使用单独的视图：

```
var EditarPaisView = Backbone.View.extend({
    // Elemento html
    el: $('#mensajes'),
    template: null,
    pais: null,

    // Eventos
    events: {
        'click .confirmarEditar' : 'modificar',
    },

    initialize: function(options) {
        this.template = options.editarPaisTemplate;
        this.pais = options.pais;
    },
    render: function() {
        $(this.el).html(this.template({pais:this.pais}));       
        return this;
    },

    modificar: function(item){
        item.preventDefault();

        var nombrePaisEditado = document.getElementById("nombrePais").value;
        var codigoPaisEditado = document.getElementById("codigoPais").value;
        var valorPaisEditado = document.getElementById("valorPais").value;      

        this.pais.save({
                nombrePais: nombrePaisEditado,
                codigoPais: codigoPaisEditado,
                valorPais: valorPaisEditado
            },{
                success: function(){
                    console.log('Actualizado el país');
                },
                error: function() {
                    alert('Se ha producido un error durante la actualización del país');
                },
                wait: true,
                async: true
            });
    }
}); 
```

因此，当您单击模态中类“confirmarEditar”的按钮时，将保存国家模型。

每个视图的 html 代码都在一个单独的模板文件中。这个是针对国家模式的：

```
<td><%= nombrePais %></td>
<td style="text-align: center;"><%= codigoPais %></td>
<td style="text-align: right;"><%= valorPais %></td>
<td style="text-align: center;">
    <a href="#editarPais" role="button" class="btn btn-mini editar" id="editar_<%=idPais%>"><i class="icon-edit"></i>Editar</a>
</td>
<td style="text-align: center;">
    <a href="#eliminarPais" role="button" class="btn btn-mini eliminar" id="eliminar_<%=idPais%>"
            data-toggle="modal"><i class="icon-trash"></i>Eliminar</a>
</td> 
```

而这个为国模版形式：

```
<div id="editarPais" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="editarPaisLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="eliminarPaisLabel">Editar País</h3>
  </div>
  <div class="modal-body">
    <input type="hidden" id="idPais" value="<%= pais.get('idPais') %>">
    <p>                                 
        Nombre: <input type="text" id="nombrePais" maxlength="64" value="<%= pais.get('nombrePais') %>"/> <br>
        Código: <input type="text" id="codigoPais" maxlength="2" value="<%= pais.get('codigoPais') %>"/> <br>
        Valor:  <input type="text" id="valorPais" value="<%= pais.get('valorPais') %>"/> <br>       
    </p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Cancelar</button>
    <button class="btn btn-primary confirmarEditar">Editar</button>
  </div>
</div> 
```

最后，这些是我正在使用的相关库：

```
<script src="${contextPath}/static/lib/jquery-1.7.1.js"></script>
<script src="${contextPath}/static/lib/underscore.js"></script>
<script src="${contextPath}/static/lib/backbone-0.9.2.js"></script>
<script src="${contextPath}/static/lib/bootstrap.js"></script> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:13:23.220

我认为这可能就像不重新创建模态 div 一样简单。尝试这个：

```
editar: function(item) {
    item.preventDefault();
    // creates the view
    this.editarPaisView = new EditarPaisView({
        editarPaisTemplate : this.editarPaisTemplate, 
        pais : this.model
    });

    // creates or updates the modal window
    if ($('#editarPais').length > 0) {
        $("#editarPais").replaceWith(this.editarPaisView.render().el);
    } else {
        $("#body").append(this.editarPaisView.render().el);
    }

    // opens the modal window
    $('#editarPais').modal('show');
}, 
```

# jquery - jQuery UI 自动完成返回“Request-URI Too Large”

> ID：15734557
> 
> 赞同：4
> 
> 时间：2013-03-31T21:09:44.010
> 
> 标签：jquery, jquery-ui-autocomplete

我正在尝试使用[jQuery.autocomplete](http://jqueryui.com/autocomplete/#custom-data)而不使用回调。我的 JSON 数据源存储在 JS 变量中。这样做的目的是避免发球。

但是当我尝试使用自动完成时，我不断收到错误消息

> 请求 URI 太大

这是我的代码：

```
// This list is much longer
country_data_source =   [{"id":"AF","name":"Afghanistan"},{"id":"AL","name":"Albania"},{"id":"DZ","name":"Algeria"},{"id":"AS","name":"American Samoa"},{"id":"AD","name":"Andorra"},{"id":"AO","name":"Angola"}]

jQuery( "#country" ).autocomplete({
  minLength: 0,
  source: country_data_source
 }); 
```

由于浏览器限制，jQuery 是否仍在使用 POST/GET 从而给我这个错误？

**注意：**如果我只使用上面的简短列表，自动完成完全没有响应。
甚至尝试过`$.getJSON(country_data_source)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T21:41:25.297

自动完成可能无法将您的数组理解为本地源，因为它不是由对象组成，每个对象都由“标签”和“值”属性组成。在您的情况下，您提供的 id 和名称不是它所期望的。您必须转换此数组的对象，或者您可能只提供将用作标签的字符串数组。因为 jQuery UI Autocomplete 没有在你的数组中找到它正在搜索的内容，所以它切换到下一个解释：一个 url。

# php - 在没有找到其他控制器后，使用 codeigniter 中默认控制器上的段转到配置文件？

> ID：15734558
> 
> 赞同：0
> 
> 时间：2013-03-31T21:09:49.353
> 
> 标签：php, codeigniter, routing, controller, segments

有谁知道是否可以在默认控制器上使用段？

例如，如果我想访问我网站上的配置文件，它将是 site.com/profileName，我知道您会使用它来访问其他控制器，但我希望它能够正常工作，以便如果 codeigniter 无法访问任何控制器在段中输入，然后我希望它从 MySQL 表中查找匹配的配置文件名称，然后访问正确的配置文件页面，如果找不到匹配项，则该页面将不存在，任何人都知道我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:22:23.440

您最好的选择是更改 404 错误的位置，并从那里捕获内容以显示 404 错误或显示个人资料页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T05:57:58.377

你在这里需要的是`routes`

打开你的`application/config/routes.php`

你可以这样`(:any)`设置

```
$route['(:any)'] = 'controller/method/$1'; 
```

在这里你可以使用通配符`any`。如果输入任何内容，它将定向到您希望将其重定向的控制器，并`$1`保存您输入的段的值。

然后在你的方法上只做通常的查询，如果存在或不做你想做的事。

# emacs - 自定义 emacs 24 ELPA 工作位置

> ID：15734560
> 
> 赞同：3
> 
> 时间：2013-03-31T21:09:56.543
> 
> 标签：emacs, customization, elpa

如何更改默认安装的软件包位置？

我想构建独立的 emacs 发行版。我可以放在网络文件夹或 USB 记忆棒上的东西，在安装了 emacs 的任意系统上解压，使用提供的设置并且不会与系统上的原始 emacs 设置混淆。这就像展示了 emacs 对我的伙伴们的能力。

我在 init.el 中重新定义了 load-path 等，但未能自定义 elpa 工作位置。我搜索了 emacs 自文档信息系统，没有找到关于包系统的元文件位置和安装包路径的文档。显然我不能保留默认值，而且我不知道要修改哪些变量或要设置哪些挂钩。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:54:30.230

`package-user-dir`是你想要的变量。从文档：

> package-user-dir 是在 `package.el' 中定义的变量。它的值为“~/.emacs.d/elpa”
> 
> 当用作文件局部变量时，此变量具有潜在风险。
> 
> 文档：包含用户的 Emacs Lisp 包的目录。目录名称应该是绝对的。除了这个目录，Emacs 还在 `package-directory-list' 中寻找系统范围的包。

（我发现这个使用`M-x apropos-variable`并搜索“包”）。

# c++ - C++ 继承同类型签名的成员函数（shadowing）

> ID：15734562
> 
> 赞同：2
> 
> 时间：2013-03-31T21:10:27.947
> 
> 标签：c++

```
 // Shadowing

 #include <iostream>
 using namespace std;
 const int MNAME = 30;
 const int M  = 13;

 class Person {   // Base Class
     char person[MNAME+1];
   public:
     void set(const char* n);
     void display(ostream&) const;
   protected:
     const char* name() const;
 };

 void Person::set(const char* n) {
     strncpy(person, n, MNAME);
     person[MNAME] = '\0';
 }

 void Person::display(ostream& os) const {
     os << person << ' ';
 }

 const char* Person::name() const { return person; }

 class Student : public Person { // Derived
     int no;
     char grade[M+1];
   public:
     Student();
     Student(int, const char*);
     void display(ostream&) const;
 };

 Student::Student() {
     no = 0;
     grade[0] = '\0';
 }

 Student::Student(int n, const char* g) {
     // see p.61 for validation logic
     no = n;
     strcpy(grade, g);
 }

 void Student::display(ostream& os) const {
     os << name() << ' '
        << no << << ' ' << grade << endl;
 }

 int main() {
     Person person;
     Student student(975, "ABBAD");

     student.set("Harry");
     student.display(cout); // Harry 975 ABBAD

     person.set("Jane Doe");
     person.display(cout); // Jane Doe
 } 
```

> 对 display() 的第一次调用（在学生上）调用 display() 的学生版本。对 display() 的第二次调用（在 person 上）调用 display() 的 Person 版本。display() 的派生版本在学生对象上隐藏了基础版本。基本版本在 person 对象上执行。

我不明白什么是阴影。我意识到这两个类都定义了相同的显示函数，显然如果你调用 student.display 和 person.display 它会相应地调用它们。那么这是什么意思：

> display() 的派生版本在学生对象上隐藏了基础版本。基本版本在 person 对象上执行。

我不明白阴影。

来源：[https](https://scs.senecac.on.ca/~btp200/pages/content/dfunc.html) ://scs.senecac.on.ca/~btp200/pages/content/dfunc.html 继承 - 派生类的函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:17:52.857

你的`Student`类继承自`Person`. 这意味着，除其他外，`Student`对象由定义的所有内部`Student`和定义的所有内部组成`Person`- 因为这个问题`Student`可以被视为包含`Person`. 这意味着`Student`object 包含两个版本的`display`方法 - 一个来自基类，一个来自派生类。Shadowing 是指`display`从派生对象调用时，会调用派生类版本，而基类版本被它“遮蔽”而不被调用。`Student`您可以通过使用基类前缀显式指定它来从内部调用影子版本： `Person::display`。通常，将被调用的函数是范围内最接近的函数 - 对于`Derived`它是作用域的对象`Derived`和驻留在外部作用域（例如基础）中的函数被隐藏起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:18:03.873

这意味着您很可能错过了一个`virtual`.

例如，您的 Person 类可能应该如下所示：

```
 class Person {   // Base Class
     char person[MNAME+1];
   public:
     void set(const char* n);
     virtual void display(ostream&) const;
   protected:
     const char* name() const;
 }; 
```

现在，如果您有以下代码：

```
Person* student = new Student(975, "ABBAD")
student->set("Harry");
student->display(cout); 
```

您的输出将是“Harry”而不是“Harry 975 ABBAD\n”。正如icepack 所说，您收到消息的原因是因为 Student 类中的 display 方法“遮蔽”了 Person 类中的 display 方法，并且由于您没有声明该方法 virtual，编译器假定遮蔽是偶然的. 如果这不是偶然的，那么您应该将该方法声明为虚拟的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:35:37.110

试试这个小实验。定义以下函数：

```
void person_display(Person &p){
    p.display(cout);
} 
```

然后`main`调用它`person`和`student`。

```
int main(){
   // [...]
   person_display(person);
   person_display(student);

} 
```

您将看到在这两种情况下，`Person::display`都会调用该方法。阴影是由于在一个类中重新定义其祖先类的方法而发生的一种现象。它遮蔽了之前的定义，只要将实例视为子类，但一旦将其视为祖先，遮蔽就消失了。

这与`virtual`方法形成对比，其中调用的方法始终是在真实实例类中定义的方法，即。在上述实验中，您会看到该`Student`方法被调用，即使它被视为简单的`Person`.

# scala - 如何过滤具有取决于多个元素的条件的列表

> ID：15734566
> 
> 赞同：2
> 
> 时间：2013-03-31T21:10:48.553
> 
> 标签：scala, functional-programming

给定一个列表`L`，我想保留一个元素`L(i)`，如果它至少存在一个值`j > i`是`L(j)`的倍数`L(i)`，否则`L(i)`应该被丢弃。

通过命令式编程范式来做到这一点非常简单，但我想使用函数式编程来做到这一点。

可以使用该`filter`方法吗？如果是这样，如何写条件（即`filter`函数的参数）？否则，我能做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T21:17:51.490

例如：

```
val l = (1 to 100)
l.tails.collect { case (head +: tail) if tail.exists(_ % head == 0) => head } .toList 
```

`tail`产生一个迭代器，它在每一步中返回输入减去一个元素，例如

```
(1 to 10).tails.foreach(println) 
```

给

```
Vector(1, 2, 3, 4)
Vector(2, 3, 4)
Vector(3, 4)
Vector(4)
Vector() 
```

您可以将这些“尾部”视为要对其应用过滤器的头部元素和用于确定是否保留头部的尾部。

该`collect`方法在这里很有用，因为它需要一个偏函数，因此您只需要指定实际保留值的情况——比如`filter`——，同时它的作用就像 a`map`通过让你指定过滤后的值的方式被收集。

所以我们可以匹配至少有一个头部元素和一个任意大小的尾部的尾部，然后看看在那个尾部是否存在一个元素是头部的倍数。我在这里为匹配情况使用了一个*守卫*，所以匹配是一个双重过滤器。首先，尾部必须是非空的，其次必须有多个。倍数意味着模数为零。如果大小写匹配，则返回已验证的 head 元素。

最后，由于没有特定的类型注释，`collect`只会返回另一个迭代器，我们将结果转换为带有`toList`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T23:22:15.327

一个更“明确”的 - 如果 tail 有多个 head，则在 case 中累积元素：

```
(1 to 10).tails.foldLeft(List[Int]())((acc, tl) => tl match {
  case h +: t if (t.exists(_ % h == 0)) => h :: acc
  case _ => acc
}).reverse 
```

# php - 从 ID 获取信息

> ID：15734572
> 
> 赞同：0
> 
> 时间：2013-03-31T21:11:49.530
> 
> 标签：php, domdocument

首先，我是 PHP 的新手，所以如果这是一个愚蠢的问题，我很抱歉，其次，如果这个标题不正确，我很抱歉。

现在，我要做的是为我玩的游戏创建一个叠加层。我的叠加代码运行良好，现在我正在处理我的 HTML 文件，该文件从网站获取信息并输出。网站上的代码如下所示：

```
<span id="example1">Information I want</span>
<span id="example2">More Info I want</span>
...
<span id="example3">And some more</span> 
```

现在我要做的是创建一个 PHP 脚本，该脚本进入并按名称查找元素，并在这些跨度标签中为我提供信息。到目前为止，这是我尝试过的，但是它不起作用（不足为奇）：

```
//Some HTML here
<?php
$doc = new DomDocument;
$doc->validateOnParse = true;
$doc->Load('www.website.com');

echo "Example1: " . $doc->getElementById('example1') . "\n";
?>
//More HTML 
```

老实说，我不知道我在做什么。如果有人可以向我展示如何正确执行此操作的示例，或者为我指出正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:20:38.183

您的代码似乎是正确的，但是您缺少一些东西。

首先，您的`load`电话实际上是在寻找一个名为“www.website.com”的文件。如果是远程文件，则必须包含`http://`前缀。

然后，您试图回显节点本身，而您想要它的值（即它的内容）。
试试`$doc->getElementById("example1")->nodeValue`吧。

那应该这样做。您可能需要添加`libxml_use_internal_errors(true);`，以便源文件中的任何错误都不会因 PHP 错误而破坏您的页面。另外，我建议使用`loadHTMLFile`而不是`load`，因为这对格式错误的文档更宽松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:22:13.167

打开和关闭标签之间的文本是一个文本节点。

写吧`$doc->getElementById('example1')->nodeValue`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T21:23:41.893

您可以使用 getElementById：

$a = $doc->getElementById("example1"); var_dump($a); 所以你会看到你想要回显或放什么，或者什么。

您还可以将所有名称 i HTML as example[] end 然后 foreach 示例数组，因此您只需一行代码即可从示例数组中按 id 获取元素

# list - 从列表初始化代数数据类型

> ID：15734573
> 
> 赞同：9
> 
> 时间：2013-03-31T21:11:55.147
> 
> 标签：list, haskell, algebraic-data-types

我是一个相当新的 Haskell 程序员，我正在尝试弄清楚如何将一些值转换为代数数据类型。

我有一个记录数据类型：

```
data OrbitElements = OrbitElements { epoch :: Double,
                                     ecc :: Double,
                                     distPeri :: Double,
                                     incl :: Double,
                                     longAscNode :: Double,
                                     argPeri :: Double,
                                     timePeri :: Double,
                                     meanMotion :: Double,
                                     meanAnomaly :: Double,
                                     trueAnomaly :: Double,
                                     semiMajorAxis :: Double,
                                     distApo :: Double,
                                     period :: Double
                                   } 
```

我正在从一个文本文件中提取一些信息，这些信息最终出现在一个 Doubles 列表中。有没有一种简单的方法可以用列表初始化这种数据类型？我可以单独调用每个设置器，但是当我已经拥有列表中的所有值时，这似乎非常低效。

```
let d = [2456382.5,6.786842103348031e-3,0.7184187640759256,3.394660181513041,76.64395338801751,55.2296201483587,2456457.141012543,1.602144936476915,240.4142797010899,239.7408018186761,0.7233278761603762,0.7282369882448266,224.6987721295883]
let o = OrbitElements
let epoch o = d !! 0
let ecc o = d !! 1
-- and so on 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-31T21:30:42.380

最直接的方法是手动完成：

```
fromList :: [Double] -> Maybe OrbitElements
fromList [ _epoch
         , _ecc
         , _distPeri
         , _incl
         , _longAscNode
         , _argPeri
         , _timePeri
         , _meanMotion
         , _meanAnomaly
         , _trueAnomaly
         , _semiMajorAxis
         , _distApo
         , _period
         ]
    = Just $ OrbitElements
          _epoch
          _ecc
          _distPeri
          _incl
          _longAscNode
          _argPeri
          _timePeri
          _meanMotion
          _meanAnomaly
          _trueAnomaly
          _semiMajorAxis
          _distApo
          _period
fromList _ = Nothing 
```

但是，有一种更性感的方法，即逐个元素地解析它们，这样更不容易出错，并且更能描述我们正在尝试做的事情：

首先我们定义两个解析器，其中一个从列表中请求一个新元素（如果列表为空则失败），第二个解析器匹配列表的末尾（如果列表不为空则失败）：

```
import Control.Applicative
import Control.Monad
import Control.Monad.Trans.State

getElem :: StateT [Double] Maybe Double
getElem = do
    s <- get
    case s of
        []   -> mzero
        x:xs -> do
            put xs
            return x

endOfList :: StateT [Double] Maybe ()
endOfList = do
    s <- get
    case s of
        [] -> return ()
        _  -> mzero 
```

现在我们可以`fromList`在 Applicative 样式中定义：

```
fromList' :: [Double] -> Maybe OrbitElements
fromList' = evalStateT $ OrbitElements
    <$> getElem
    <*> getElem
    <*> getElem
    <*> getElem
    <*> getElem
    <*> getElem
    <*> getElem
    <*> getElem
    <*> getElem
    <*> getElem
    <*> getElem
    <*> getElem
    <*> getElem
    <*  endOfList 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-31T23:22:33.663

一个有点丑陋的解决方案...... :-o

让你的类型派生`Read`：

```
data OrbitElements = OrbitElements { ... }
                         deriving (Read) 
```

然后你可以`fromList`定义

```
fromList :: [Double] -> OrbitElements
fromList ds = read $ "OrbitElement " ++ (concat $ Data.List.intersperse " " $ map show ds) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-31T21:26:40.300

您错过了 Haskell 是静态类型的事实。不，Haskell 没有任何这样的结构。

让我们假设该语言有一些方法可以从列表中填充构造函数值。以下是一些需要思考的问题：

*   如果列表包含的项目比要求的多或少，会发生什么？
*   您将如何初始化其字段未统一键入的记录？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-31T21:27:51.930

代数数据类型旨在一次全部初始化，而不是像您正在做的那样一次初始化一个字段。正确的方法是：

```
let d = ...
let o = OrbitElements {epoch = d !! 0
                       ecc = d !! 1,
                       distPeri = d !! 2,
                       incl = d !! 3,
                       longAscNode = d !! 4,
                       argPeri = d !! 5,
                       timePeri = d !! 6,
                       meanMotion = d !! 7,
                       meanAnomaly = d !! 8,
                       trueAnomaly = d !! 9,
                       semiMajorAxis = d !! 10,
                       distApo = d !! 11,
                       period = d !! 12} 
```

请注意，您这样做的方式实际上并没有在`o`. `let epoch o = d !! 0`定义了一个名为的函数，该函数将`epoch`其定义`epoch`为字段（您应该始终在启用警告的情况下进行编译，以便编译器能够捕捉到这样的事情），并且这个新函数接受任何值`o`（不仅仅是`OrbitElements`先前定义的值）并返回`d !! 0`而不做任何事情完全没有`o`。如果您真的想设置或更改 的`epoch`字段`o`，正确的方法是`let o' = o {epoch = d !! 0}`，它返回一个更改`OrbitElements`了其`epoch`字段的新对象。

# php - 如何让 C++ 应用程序从 PHP 接收数据？

> ID：15734574
> 
> 赞同：2
> 
> 时间：2013-03-31T21:12:01.127
> 
> 标签：php, c++, xml

我在 C++ 上开发了一个应用程序。我想将我的网站连接到 C++ 软件。

我希望网站向 C++ 应用程序发送字符串或图像；然后在 C++ 接收到字符串/图像后，它将对其进行处理并将输出返回给网站。

我的问题是如何让网站（托管在我的本地服务器上）向也托管在我的 PC 上的 C++ 应用程序发送直接消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:16:21.090

可以使用套接字来实现与系统无关的进程间通信。在您的 C++ 应用程序中侦听客户端并使用[PHPs 套接字 API](http://www.php.net/manual/en/book.sockets.php)连接到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:21:15.303

一个选项可能是在您的 C++ 程序中开发一个小型 HTTP 服务器。在 HTTP 部分中查看[此内容。](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/examples.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T21:22:32.043

如果这是在一台 Windows 机器上，那么命名管道可能对您有用。如果 C++ 应用程序与服务器应用程序位于同一物理服务器中，则命名管道是很好的解决方案。在这种情况下，操作系统只会为您在进程之间移动内存，因此它可能非常快。 [看这里](http://msdn.microsoft.com/en-us/library/aa365781%28v=VS.85%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T21:23:32.187

如果您可以让您的应用程序充当 Web 服务器或 CGI 应用程序。那么你需要做的就是：

```
 file_get_contents('http://localhost/path/to/c/exe?parameter=param'); 
  //You could use curl as well, I used file_get_contents for simplicity 
```

您也可以使用套接字。

第三种选择是使用反引号从 php 执行您的 c++ exe：

```
$result=`myapp.exe`; 
```

# ruby-on-rails-3 - 在 XML rails 上显示操作

> ID：15734576
> 
> 赞同：0
> 
> 时间：2013-03-31T21:12:06.323
> 
> 标签：ruby-on-rails-3, xml-parsing, instance-variables

在 Rails 中，我通常会将记录保存到模型中，然后如果我想显示单个记录，我会通过其 id 找到该记录，如下所示

```
 def show
 @post = Post.find(params[:id])
 end 
```

然后在我看来，我可以像这样显示该记录中的一个属性

```
<%= @post.title %> 
```

我想要实现的是显示从 XML 文档返回的数据的各个实例，所以如果 xml 文档是这样的

```
<entry>
 <id>xxx</id>
 <updated>xxx</updated> 
 <category  scheme="xxx"  term="xxx"/>
 <title type="text">xxx</title>
 <link rel="xxx" type="xxx"    href="xxx"/> 
 <link rel="xxx0gmail.com/b6ea0e8ddbc4e5"/>     
 <link rel="xx" type="xxx" href="xxx"/> <link rel="xx" type="axx" href="xxx"/> 
 <gd:email rel="xxx" address="xxx" primary="xx"/> 
</entry> 
```

如果我点击“查看联系人”的链接，我怎么能有一个动作，我怎么能显示那个特定的记录？

目前我像这样查看所有返回的记录

```
<% @mycontacts.each do |c| %>
<p> Name: <%= c.xpath('xmlns:title').text %>  Email: <%= c.xpath('gd:email/@address').text %> <%= link_to "Update Contact" %></p> 
<% end %> 
```

由 Nokogiri 解析

```
doc = Nokogiri::XML.parse(open(url))
doc.xpath('//xmlns:feed/xmlns:entry[xmlns:title[node()]]') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:31:03.670

你可以通过使用更多的 xpath 来做到这一点。

```
doc.xpath("//entry[id='xxx']") 
```

这将返回具有该特定 ID 的所有条目（在本例中为 xxx）

您可以通过将信息传递给 link_to 方法在 url 中“嵌入”信息

```
<%= link_to "show entry", :id => "xxx" %> 
```

它只会在参数哈希中

```
params[:id]
=> 'xxx' 
```

# file-io - 文件程序的建议，要求最大的数字

> ID：15734582
> 
> 赞同：-1
> 
> 时间：2013-03-31T21:12:57.217
> 
> 标签：file-io, python-3.x

这一次的任务涉及使用文件。“假设一个包含一系列整数的文件名为 numbers.dat 并且存在于计算机磁盘上。设计一个程序来确定文件中存储的最大数字。讲师告诉我们不要使用基于数组的实现，并包含一个变量计算从文件中读取的项目数并在显示文件中找到的最大值后输出此计数。我在不使用基于数组的实现的情况下如何获得最大值时遇到了麻烦。这是我到目前为止的内容：

```
 def main():
        n = 1
        largest = None

        num_input = int(input("How many numbers do " + "you have to input? "))

        numbers_file = open('numbers.dat', 'w')

        for count in range(1, num_input + 1):
            number = float(input('Enter the number #' + str(count) + ': '))

        if largest is None or n > largest:
            largest = n
        print('The largest value inputted is: ', largest)
        numbers_file.close()   
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:20:05.233

想象一下，你有一张纸，上面有数百个数字。只用你的大脑和眼睛，阅读这些数字并找到最大的一个。

你会怎么做？

现在，你将如何告诉计算机以同样的方式进行操作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:24:29.460

使用变量来存储当前数字并假设它是最大的。当您浏览文件时，将存储的数字与文件中的当前数字进行比较，如果文件中的数字更大，则将其存储在变量中，否则继续读取文件。重复此操作，直到到达文件末尾。

```
 largest = 0;
 count = 0
 while ((num =input.readline()) != EOF) {
      count++;
      if (largest < num) {
           largest = num;
      }
   } 
```

# android - 基于位置的增强现实安卓应用

> ID：15734587
> 
> 赞同：3
> 
> 时间：2013-03-31T21:14:00.323
> 
> 标签：android, augmented-reality

我正在开发基于实时位置的增强现实 android 应用程序。这是一个简单的概念：我的应用程序应该显示我周围的一些地方。我对此进行了深入研究，但仍然遇到问题。我有我的 GPS 坐标和目标地点的 GPS 坐标。

我的问题是：如何检索手机摄像头正在查看的内容（例如建筑物）？解决此类问题的合乎逻辑的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-01-16T07:49:54.713

增强现实将真实坐标系转换为相机坐标系。在 AR Location-based 中，真实坐标是地理坐标系。我们将 GPS 坐标（纬度、经度、海拔）转换为导航坐标（东、北、上），然后将导航坐标转换为相机坐标并显示在相机视图上。

我只是为你创建了演示： [https ://github.com/dat-ng/ar-location-based-android](https://github.com/dat-ng/ar-location-based-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-24T09:50:48.373

首先检查设备中传感器的可用性。如果设备支持 TYPE_ROTATION_VECTOR，则为相同注册一个传感器侦听器，否则检查 TYPE_MAGNETIC_FIELD 和 TYPE_ACCELEROMETER。

```
SensorManager mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
rSensor = mSensorManager.getDefaultSensor(Sensor.TYPE_ROTATION_VECTOR);
if (rSensor == null) {
    mSensor = mSensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);
    aSensor = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
} 
```

然后在 onSensorChanged 函数中，您应该计算方位角。

```
 if (rSensor == null) {
    switch (event.sensor.getType()) {
        case Sensor.TYPE_MAGNETIC_FIELD:
            magnetic = event.values.clone();
            break;
        case Sensor.TYPE_ACCELEROMETER:
            accelerometer = event.values.clone();
            break;
    }

    if (magnetic != null && accelerometer != null) {
        Rot = new float[9];
        I = new float[9];
        SensorManager.getRotationMatrix(Rot, I, accelerometer, magnetic);

        float[] outR = new float[9];
        SensorManager.remapCoordinateSystem(Rot, SensorManager.AXIS_X,
                SensorManager.AXIS_Z, outR);
        SensorManager.getOrientation(outR, values);

        azimuth = values[0];
        magnetic = null;
        accelerometer = null;
    }
} else {
    SensorManager.getRotationMatrixFromVector(mRotationMatrix, event.values);
    SensorManager.getOrientation(mRotationMatrix, mValues);

    azimuth = Math.toDegrees(mValues[0]));
    }
} 
```

您可以使用此方位角在 cameraview 中绘制位置

```
 double angle = bearing(myLatitude, myLongitude, dLatitude, dLongitude) - azimuth;
double xAxis, yAxis;

if(angle < 0)
    angle = (angle+360)%360;

xAxis = Math.sin(Math.toRadians(angle)) * dist;
yAxis = Math.sqrt(Math.pow(dist, 2) - Math.pow(xAxis, 2));

if (angle > 90 && angle < 270)
    yAxis *= -1;

double xAxisPosition = angle * (screenWidth / 90d);

xAxis = xAxisPosition - spotImageWidth/2;
float x, y;
if (angle <= 45)
    x = (float) ((screenWidth / 2) + xAxis);

else if (angle >= 315)
    x = (float) ((screenWidth / 2) - ((screenWidth*4) - xAxis));

else
    x = (float) (float)(screenWidth*9);

y = (float)(((screenHeight - 300) - (i * 100)));

protected static double bearing(double lat1, double lon1, double lat2, double lon2) {
    double longDiff = Math.toRadians(lon2 - lon1);
    double la1 = Math.toRadians(lat1);
    double la2 = Math.toRadians(lat2);
    double y = Math.sin(longDiff) * Math.cos(la2);
    double x = Math.cos(la1) * Math.sin(la2) - Math.sin(la1) * Math.cos(la2) * Math.cos(longDiff);

    double result = Math.toDegrees(Math.atan2(y, x));
    return (result+360.0d)%360.0d;
} 
```

x, y 将给出目标位置的坐标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:19:45.607

您需要的第一步是使用传感器获取后置摄像头的方向。[您可以在http://developer.android.com/reference/android/hardware/SensorManager.html](http://developer.android.com/reference/android/hardware/SensorManager.html)阅读有关传感器的更多信息。
完成传感器编码后，请返回并提出下一个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T07:54:26.157

试试 DroidAR SDK [https://github.com/bitstars/droidar](https://github.com/bitstars/droidar)。这是一个适用于 Android 的 AR SDK。你的大部分问题都应该用它来解决。还有视频手册。如果您的项目只需要一些东西，您也可以查看代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-19T09:21:29.237

这个问题有两个方向，设备和目标。

设备方位角如下图：

![方位角](https://i.stack.imgur.com/EKOvx.jpg)

这些信息可以由传感器收集。但是，如果设备的方向不固定，您应该这样做`SensorManager.remapCoordinateSystem`

目标方位角如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/AJKfW.jpg)

这可能是我在互联网上能找到的最好的数字。获得设备位置后，可以通过以下方式计算目标位置：

```
azi = Math.abs(Math.toDegrees(Math.atan((tlon-lon)/(tlat-lat)))); 
```

where`tlat`和`tlon`表示目标 gps 位置，lat 和 lon 是设备位置。这个等式的值在 -90 到 +90 之间，这不是方位角的真正含义。因此，应该添加 3 个额外的代码。

```
 if((tlon-lon)>0&&(tlat-lat)<0){
        azi = 180 - azi;
    }
    if((tlon-lon)<0&&(tlat-lat)<0){
        azi = 180 + azi;
    }
    if((tlon-lon)<0&&(tlat-lat)>0){
        azi = 360 - azi;
    } 
```

完成这些之后，就很容易检测目标是否在您的视线范围内。

希望这些有所帮助。

# javascript - jquery删除类，无论位置

> ID：15734593
> 
> 赞同：-3
> 
> 时间：2013-03-31T21:14:44.693
> 
> 标签：javascript, jquery, class, split

需要专门抓除一个以外的任何身体课程。通常，我会使用`.split()`，但班级的位置可能会改变。处理这个问题的最佳方法是什么？

HTML：

```
<body class="one two test"> || <body class="test three four"> 
```

JavaScript：

```
bod.attr('class').split('test')[0] || bod.attr('class').split('test')[1] 
```

谢谢！

* * *

更新：

我无法删除`test`课程。停止对合法问题投反对票。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T21:15:57.917

只需将其类属性更改为您想要保留的一个类。

```
bod.attr('class', 'test') 
```

除非您还需要所有其他类的名称...

```
var otherClasses = bod.attr('class').split('test'); // either 1 or 2 element array (assuming your class name only shows up once)
bod.attr('class', 'test'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:31:07.367

你总是可以使用正则表达式：

```
var classes = document.body.className.replace(/\btest\b/g, '').split(/\s+/); 
```

然后“类”将是一个类值的数组，但它不会在列表中包含“测试”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:39:34.577

如果您尝试检索指定类以外的类列表，则应首先构建类列表：

```
var classes = $('body').attr('class').split(' '); 
```

...然后删除你不想要的：

```
classes.splice(classes.indexOf('test'), 1) 
```

jsFiddle在这里：http: [//jsfiddle.net/7bk78/](http://jsfiddle.net/7bk78/)

# c++ - 将多个方法从头文件“.h”文件移动到实现“.cpp”文件的最简单方法

> ID：15734596
> 
> 赞同：5
> 
> 时间：2013-03-31T21:14:59.447
> 
> 标签：c++, automated-refactoring

我经常通过将所有内容保存在*.h*头文件中来开始开发 C++ 类。在某些时候，我想将大多数方法从头文件移到实现*.cpp*文件中。

进行此类移动的最简单/自动化的方法是什么？有谁知道脚本或工具？

我正在使用 Eclipse Juno CDT，它具有[切换函数定义](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.cdt.doc.user/tasks/cdt_t_toggle.htm)重构功能。但是，此功能一次只执行 1 个功能，并且每个功能需要两个完整的功能亮点和两个快捷键。此外，它的速度明显很慢，如果它可以一次执行一堆功能，这将不是什么大问题。

# php - 使用 require 调用函数，但变量和数组未定义

> ID：15734597
> 
> 赞同：0
> 
> 时间：2013-03-31T21:15:02.187
> 
> 标签：php, arrays, variables, scope, require

为什么用 require 调用时看不到我的变量？

**函数.php**

```
<?php
function paginator(){

    $links  = array("index.php", "services.php", "content.php","contact_us.php" );
    $trimslug = substr(strrchr($_SERVER['PHP_SELF'], "/"), 1); 

        foreach ($links as $key => $value) {
            if ($value == $trimslug ) {
                $GLOBALS['$page'] = $key;
            }
        }
    $page = $GLOBALS['$page'];
    $next = $page+1;
    $previous = $page-1;
}

?> 
```

**内容.php**

```
<?php
session_start();
require './functions.php';
paginator();
?>

<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pagination</title>
</head>
<body>

<h2>Now on Page : <?php echo $page?></h2>

<a href="<?php echo $links[$next] ?>" >Next</a>
<br><br><br>

<a href="<?php  echo $links[$previous]?>" >Previous</a>
<br>

</body>
</html> 
```

我希望能够在使用 require 函数时看到我的变量，因为这段代码将出现在每一页上。这可能是一个非常难以理解的概念，但我真的希望有人能正确地说明这个概念。

这似乎有效，谢谢大家。

```
<?php

    $links  = array("index.php", "services.php", "content.php","contact_us.php" );
    $trimslug = substr(strrchr($_SERVER['PHP_SELF'], "/"), 1); 
    $page = null;

    function paginator(){
    global $links,$trimslug,$next,$previous,$page;

        foreach ($links as $key => $value) {
        if ($value == $trimslug ) {
            // $GLOBALS['$page'] = $key;
            $page = $key;
        }
    }
$next = $page+1;
$previous = $page-1;
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:20:00.123

这是因为变量是在函数 paginator() 的范围内定义的；

如果您希望它们在 content.php 范围内可访问，请像这样声明它们：

```
global $variable = 'value'; 
```

或者，只需在 function.php 中声明它们而不需要该函数，它是 content.php 中的后续调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:20:58.197

PHP 中的变量仅限于函数的范围，除非通过参数调用或添加到全局数组中。

全局数组是不好的做法，只是说。

您总是可以将变量放入私有类并根据需要调用它，尽管这对初学者来说非常棘手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:22:12.453

paginator 里面的变量只在函数的作用域内，不在php文件中。如果您想在该函数之外访问它们，只需将这些变量移到该函数之外。例如

```
$page=null;
$links=...
function paginator(){
...
} 
```

# c++ - 如何使用 C++11 线程类在单独的线程中执行类成员函数？

> ID：15734598
> 
> 赞同：17
> 
> 时间：2013-03-31T21:15:04.510
> 
> 标签：c++, c++11, clang, xcode4.6

我正在尝试使用 C++11 的`std::thread`类来运行类的成员函数以并行执行。

头文件的代码类似于：

```
class SomeClass {
    vector<int> classVector;
    void threadFunction(bool arg1, bool arg2);
public:
    void otherFunction();
}; 
```

cpp 文件类似于：

```
void SomeClass::threadFunction(bool arg1, bool arg2) {
    //thread task
}

void SomeClass::otherFunction() {
    thread t1(&SomeClass::threadFunction, arg1, arg2, *this);
    t1.join();
} 
```

我在 Mac OS X 10.8.3 下使用 Xcode 4.6.1。我使用的编译器是 Xcode 附带的 Apple LLVM 4.2。

上面的代码不起作用。编译器错误说`"Attempted to use deleted function"`。

在线程创建行上，它显示以下按摩。

```
In instantiation of function template specialization 'std::__1::thread::thread<void (SomeClass::*)(bool, bool), bool &, bool &, FETD2DSolver &, void>' requested here 
```

我是 C++11 和线程类的新手。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-31T21:16:46.250

实例应该是第二个参数，如下所示：

```
std::thread t1(&SomeClass::threadFunction, *this, arg1, arg2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-24T12:24:56.813

我仍然对上述答案有疑问（我认为它抱怨它无法复制智能指针？），所以用 lambda 重新表述：

```
void SomeClass::otherFunction() {
  thread t1([this,arg1,arg2](){ threadFunction(arg1,arg2); });
  t1.detach();
} 
```

然后它编译并运行良好。AFAIK，这同样有效，而且我个人觉得它更具可读性。

（注意：我也改变`join()`了，`detach()`正如我所期望的那样。）

# android - Android Honeycomb 及更高版本的不同菜单图标

> ID：15734602
> 
> 赞同：2
> 
> 时间：2013-03-31T21:15:43.480
> 
> 标签：android, android-resources, android-drawable

在我的应用程序中，我使用轻量级操作栏，在其中放置菜单项的图标。因此，这些图标是黑色的，但在 Android Gingerbread（及更低版本）中，菜单以黑色背景显示。在这种情况下，我需要使用白色版本的图标。我在中放置了白色图标，在中放置了`res/drawable`黑色图标`res/drawable-v11`：

```
└── res
    ├── drawable
    │   ├── ic_action_auth.png
    │   ├── ic_action_refresh.png
    │   └── ic_action_web.png
    └── drawable-v11
        ├── ic_action_auth.png
        ├── ic_action_refresh.png
        └── ic_action_web.png 
```

在果冻豆模拟器中运行我的应用程序，图标正确显示为黑色（`drawable-v11`如预期的那样使用）。**但是在姜饼模拟器中，图标也显示为黑色，我不明白为什么。**我不知道我可以给你更多的细节。这是我创建的菜单之一，资源的单一版本`res/menu/menu.xml`：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@id/action_refresh"
        android:icon="@drawable/ic_action_refresh"
        android:orderInCategory="100"
        android:showAsAction="always"
        android:title="@string/action_refresh"/>
    <item
        android:id="@+id/action_auth"
        android:icon="@drawable/ic_action_auth"
        android:orderInCategory="101"
        android:showAsAction="always"
        android:title="@string/auth"
        android:titleCondensed="@string/auth_condensed">
    </item>

</menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:35:50.057

尝试制作另一个可绘制文件夹：`res/drawable-hdpi-v11`

另一种选择是使用 ActionBarSherlock，这样您的应用程序就可以在旧版本的 Android 上使用 ActionBar。这就是我个人推荐的。

# c++ - 在 std::map 中为 std::array 分配多个值

> ID：15734611
> 
> 赞同：5
> 
> 时间：2013-03-31T21:16:41.763
> 
> 标签：c++, map, c++11, stl

使用 std::array 时，我可以一次赋值：

```
std::array<int, 3> a2 = {1, 2, 3}; 
```

但是当上面的数组组合成一个地图时，我不知道最好的方法：

```
using namespace std;
map <string, array<int, 3>> myMap;

//I'm doing it like below now...

array<int, 3> tempArray = {1,2,3}; // can I save this line somehow?
myMap[myString] = tempArray; 
```

如果这实际上是正确的方法，也请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T21:56:37.580

虽然使用`insert`如其他答案所示更有效，但您也可以使用

```
myMap["foo"] = {{1,2,3}}; 
```

如果简洁的代码对您更重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T21:42:26.087

您可以像这样保存一行（虽然字符不多）：

```
myMap.insert(std::make_pair(myString,array<int,3>{{1,2,3}})); 
```

顺便说一句，根据 GCC 4.7.2，您在初始化程序周围缺少一对大括号`tempArray`

`myString`但是，如果它碰巧已经存在，这不会修改映射值。

如果并且当您有一个具有[std::map::emplace](http://en.cppreference.com/w/cpp/container/map/emplace)的库时，您可以保存更多字符。

# android - 如何知道以前的活动是否来自我的应用程序？

> ID：15734613
> 
> 赞同：3
> 
> 时间：2013-03-31T21:16:48.327
> 
> 标签：android, android-activity

我如何知道`Activity`我之前从导航到当前是否`Activity`属于我的应用程序？意思是最后一个屏幕是我的应用程序的一部分/写在我的清单文件中还是主屏幕或呼叫屏幕？

有没有办法知道不通过传递信息`Intent`？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-21T18:14:11.607

我没有足够的声誉来评论答案，但由于某种原因，我能够回答问题。我认为情况会相反：S（我是新来的）

为了捎带[Pragnani](https://stackoverflow.com/users/1727092/pragnani)的回答，我也在寻找以前的活动而不是当前的活动。回答[Alexander Malakhov](https://stackoverflow.com/users/264047/alexander-malakhov)的评论：

> topActivity 始终来自当前包（如果它不是服务等）。如果不是这种情况，你有一个例子吗？即 top RunningTask(0).topActivity 为您提供当前活动，而不是以前的活动。——</p>

只需更改：

```
String packageName = am.getRunningTasks(1).get(0).topActivity.getPackageName();
String className = am.getRunningTasks(1).get(0).topActivity.getClassName(); 
```

至

```
String packageName = am.getRunningTasks(2).get(1).topActivity.getPackageName();
String className = am.getRunningTasks(2).get(1).topActivity.getClassName(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T01:17:22.540

尝试这个

我认为您可以通过检查应用程序的包名称和您在此处导航的活动的包名称来检查这一点

我们可以从Activity Stack中获取包名previous activity

```
ActivityManager am = (ActivityManager) context.getSystemService(Activity.ACTIVITY_SERVICE); 
```

在这里你会得到你的包名，

```
String packageName = am.getRunningTasks(1).get(0).topActivity.getPackageName();

String className = am.getRunningTasks(1).get(0).topActivity.getClassName(); 
```

然后像这样获取您当前的包名称

```
String currentpackage = getApplicationContext().getPackageName(); 
```

检查两个包是否相同

IE

```
 if(packageName.equals(currentpackage))
       {
        Toast.makeText(context,"Same Application package",1).show();
       } 
```

它使用清单中的权限

```
<uses-permission android:name="android.permission.GET_TASKS" /> 
```

我希望这能帮到您

# spring - Tomcat 部署因 Spring 和 CXF servlet 而失败

> ID：15734622
> 
> 赞同：1
> 
> 时间：2013-03-31T21:18:18.197
> 
> 标签：spring, tomcat, cxf

我正在尝试运行包含 Spring 安全性的示例，但我从`web.xml`. 现在看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/cxf.xml</param-value>
    </context-param>
    <listener>
        <listener-class>
                org.springframework.web.context.ContextLoaderListener
            </listener-class>
    </listener>
    <servlet>
        <display-name>CXF Servlet</display-name>
        <servlet-name>CXFServlet</servlet-name>
        <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>
        <!-- 
            <init-param><param-name>contextConfigLocation</param-name><param-value>
                    WEB-INF/cxf.xml
                    WEB-INF/applicationContext-security.xml
                </param-value></init-param>
    -->
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>fsmsc</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>spring.profiles.active</param-name>
            <param-value>test-profile</param-value>
        </init-param>
        <load-on-startup>2</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>/static/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>CXFServlet</servlet-name>
        <url-pattern>/cxf/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>fsmsc</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping> 
```

部署时，我收到此错误：

> > **严重：向 org.springframework.web.context.ContextLoaderListener java.lang.NoClassDefFoundError 类的侦听器实例发送上下文初始化事件的异常：org/codehaus/jettison/mapped/TypeConverter** 在 java.lang.Class.getDeclaredConstructors0(Native Method) 在 java.lang.Class.privateGetDeclaredConstructors(Class.java:2398) 在 java.lang.Class.getDeclaredConstructors(Class.java:1838) 在 org.springframework.beans.factory .annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:229) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:962) at org.springframework.beans.factory.support.AbstractAutowireableCapableBeanFactory.create .java:935) 在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485) 在 org.springframework.beans.factory.support.AbstractBeanFactory 的 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) $1.getObject(AbstractBeanFactory.java:294) 在 org.springframework。 beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) 在 org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) 在 org.springframework.beans.factory.support.AbstractBeanFactory。 getBean(AbstractBeanFactory.java:193) 在 org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585) 在 org.springframework.context.support.AbstractApplicationContext。finishBeanFactoryInitialization(AbstractApplicationContext.java:913) at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464) at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385) at org.springframework .web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284) 在 org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111) 在 org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java :4887) 在 org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) 在 org.apache.catalina.core.org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5381)。ContainerBase.addChildInternal(ContainerBase.java:901) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633) at org .apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:977) at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1655) at java.util.concurrent.Executors$RunnableAdapter.call (Executors.java:439) 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) 在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 在 java.util.concurrent。 ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918) 在 java.lang.Thread.run(Thread.java:662）引起：java.lang.ClassNotFoundException：org.apache.catalina.loader.WebappClassLoader.loadClass（WebappClassLoader.java:1713）的org.codehaus.jettison.mapped.TypeConverter在org.apache.catalina.loader.WebappClassLoader。 loadClass(WebappClassLoader.java:1558) ... 32 更多

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:35:02.430

NoClassDefFoundError 意味着您的类路径中没有该类（org/codehaus/jettison/mapped/TypeConverter）。该类包含在 jettison jar 中，它是 CXF 的依赖项。

要解决您的问题，请检查 war 文件或您的项目依赖项是否已抛弃。

更多：看起来像在 cxf-rt-rs-extension-providers pom.xml 上使用提供的范围声明了 jettison。这意味着您必须手动将 jettison 依赖项直接添加到您的 pom.xml。我检查了最新版本的 CXF：2.7.3。

# java - Android 应用程序中的 Admob 错误

> ID：15734624
> 
> 赞同：0
> 
> 时间：2013-03-31T21:18:26.553
> 
> 标签：java, android, admob

我在我的应用程序中使用了 admob，但我不断收到以下错误。请记住，我是 android 开发的初学者。

**更新了错误的东西 - 不知道我做了什么**

```
<?xml version="1.0" encoding="utf-8"?> <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent" android:background="@drawable/backgroundtowers" android:orientation="vertical" android:scrollbars="vertical" android:weightSum="1" > <LinearLayout android:id="@+id/MainActivity" android:layout_width="match_parent" android:layout_height="100dp" android:layout_alignParentBottom="true" > </LinearLayout> </RelativeLayout>
<ScrollView android:id="@+id/ScrlView" android:layout_width="fill_parent" android:layout_height="fill_parent" >

<LinearLayout android:id="@+id/MainActivity" android:layout_width="match_parent" android:layout_height="100dp" android:layout_alignParentBottom="true" > </LinearLayout>

          <LinearLayout
      android:id="@+id/layoutForScroll"
      android:layout_width="match_parent"
      android:layout_height="100dp"
      android:orientation="vertical" >
<LinearLayout
     android:id="@+id/MainActivity"
      android:layout_width="match_parent"
      android:layout_height="100dp"></LinearLayout>

     <TextView
         android:id="@+id/header"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_marginTop="23dp"
         android:gravity="center"
         android:text="Welcome To Ride Count"
         android:textAppearance="?android:attr/textAppearanceLarge"
         android:textColor="#1E90FF"
         android:textStyle="bold" >
</TextView>

        <RelativeLayout
            android:id="@+id/layoutTextViews_one"
            android:layout_width="280dp"
            android:layout_height="100dp"
            android:layout_gravity="center"
            android:layout_marginTop="10dp"
            android:background="@drawable/smallbox1" >

     <TextView
         android:id="@+id/txtCountLabel_one"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_alignParentLeft="true"
         android:layout_marginTop="24dp"
         android:gravity="center"
         android:text="Rides Ridden:"
         android:textColor="#1E90FF"
         android:textStyle="bold" >
</TextView>

    <TextView android:textStyle="bold" android:gravity="center" android:text="0000" android:layout_height="wrap_content"
      android:layout_width="match_parent" android:id="@+id/sum"
       android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#000000"  android:layout_marginTop="45dp"></TextView>

   </RelativeLayout>

        <TextView
            android:id="@+id/txtFact"
            android:layout_width="280dp"
            android:layout_height="180dp"
            android:layout_gravity="center"
            android:layout_marginTop="23dp"
            android:background="@drawable/factbox"
            android:gravity="center"
            android:text="Tap For Fact"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000"
            android:textStyle="bold" />

   </LinearLayout>
   </ScrollView>

</LinearLayout> 
```

[这是我想要的布局。](https://encrypted-tbn1.gstatic.com/images?q=tbn%3aANd9GcT2PXfKOf1uWkFsnz8KnhsJJKaObKGk_mCJA-Dnr6gNC7icdCkwog)

**错误：**

```
03-31 22:15:57.851: E/Ads(612): Not enough space to show ad! Wants: <480, 75>, Has: <480, 0> 
```

**代码主页：**

```
public class HomeActivity extends Activity implements OnClickListener
{
    private TextView sumLabel, factLabel;
    TextView refresh;
    private TextView fact;
    private int sum = 0;
    private SharedPreferences settings;
    private RandomFact facts = new RandomFact();
    private AdView adView;

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home);
        //get label from activity
        sumLabel = (TextView)findViewById(R.id.sum);
        factLabel = (TextView)findViewById(R.id.txtFact);

        refresh = (TextView)findViewById(R.id.sum);
        refresh.setFocusable(true);
        refresh.setOnClickListener(this);
        fact = (TextView)findViewById(R.id.txtFact);
        fact.setOnClickListener(this);
        //set the sum value
        refreshCounter();
        // Create the adView
        adView = new AdView(this, AdSize.BANNER, "ID");

        // Lookup your LinearLayout assuming it's been given
        // the attribute android:id="@+id/mainLayout"
        LinearLayout layout = (LinearLayout)findViewById(R.id.MainActivity);

        // Add the adView to it
        layout.addView(adView);

        // Create an ad request. Check logcat output for the hashed device ID to
        // get test ads on a physical device.
        AdRequest adRequest = new AdRequest();
        adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
        // Start loading the ad in the background.
        adView.loadAd(adRequest);

    }
    /** Called before the activity is destroyed. */
    @Override
    public void onDestroy() {
      // Destroy the AdView.
      if (adView != null) {
        adView.destroy();
      }

      super.onDestroy();
    }

    @Override
    public void onClick(View v) 
    {
        if(v == refresh)
        {
            refreshCounter();   //refresh the individual counters sum
        }
        else if(v == fact)
        {
            factLabel.setText(facts.getAnAnswer());
        }
    }
    //update the  value
    private void refreshCounter()
    {
        sum = 0;
        //get counters value for page one
        settings = getSharedPreferences(CounterOneActivity.PREFS_NAME, 0);
        sum += settings.getInt("counter1", 0);
        sum += settings.getInt("counter2", 0);
        sum += settings.getInt("counter3", 0);
        sum += settings.getInt("counter4", 0);
        sum += settings.getInt("counter5", 0);
        sum += settings.getInt("counter6", 0);
        sum += settings.getInt("counter7", 0);
        sum += settings.getInt("counter8", 0);
        sum += settings.getInt("counter9", 0);
        sum += settings.getInt("counter10", 0);
        sum += settings.getInt("counter11", 0);
        sum += settings.getInt("counter12", 0);
        sum += settings.getInt("counter13", 0);
        sum += settings.getInt("counter14", 0);
        sum += settings.getInt("counter15", 0);
        sum += settings.getInt("counter16", 0);
        sum += settings.getInt("counter17", 0);
        sum += settings.getInt("counter18", 0);
        sum += settings.getInt("counter19", 0);
        sum += settings.getInt("counter20", 0);
        sum += settings.getInt("counter21", 0);
        sum += settings.getInt("counter22", 0);
        sum += settings.getInt("counter23", 0);
        sum += settings.getInt("counter24", 0);
        sum += settings.getInt("counter25", 0);

        //get counters value for page two
        settings = getSharedPreferences(CounterTwoActivity.PREFS_NAME, 0);
        sum += settings.getInt("counter1", 0);
        sum += settings.getInt("counter2", 0);
        sum += settings.getInt("counter3", 0);
        sum += settings.getInt("counter4", 0);
        sum += settings.getInt("counter5", 0);
        sum += settings.getInt("counter6", 0);
        sum += settings.getInt("counter7", 0);
        sum += settings.getInt("counter8", 0);
        sum += settings.getInt("counter9", 0);
        sum += settings.getInt("counter10", 0);
        sum += settings.getInt("counter11", 0);
        sum += settings.getInt("counter12", 0);
        sum += settings.getInt("counter13", 0);
        sum += settings.getInt("counter14", 0);
        sum += settings.getInt("counter15", 0);
        sum += settings.getInt("counter16", 0);
        sum += settings.getInt("counter17", 0);
        sum += settings.getInt("counter18", 0);
        sum += settings.getInt("counter19", 0);
        sum += settings.getInt("counter20", 0);
        sum += settings.getInt("counter21", 0);
        sum += settings.getInt("counter22", 0);
        sum += settings.getInt("counter23", 0);
        sum += settings.getInt("counter24", 0);
        sum += settings.getInt("counter25", 0);
        sum += settings.getInt("counter25", 0);
        sum += settings.getInt("counter26", 0);
        sum += settings.getInt("counter27", 0);
        sum += settings.getInt("counter28", 0);
        sum += settings.getInt("counter29", 0);
        sum += settings.getInt("counter30", 0);
        sum += settings.getInt("counter31", 0);
        sum += settings.getInt("counter32", 0);
        sum += settings.getInt("counter33", 0);
        sum += settings.getInt("counter34", 0);
        sum += settings.getInt("counter35", 0);

        //get counters value for page three
        settings = getSharedPreferences(CounterThreeActivity.PREFS_NAME, 0);
        sum += settings.getInt("counter1", 0);
        sum += settings.getInt("counter2", 0);
        sum += settings.getInt("counter3", 0);
        sum += settings.getInt("counter4", 0);
        sum += settings.getInt("counter5", 0);
        sum += settings.getInt("counter6", 0);
        sum += settings.getInt("counter7", 0);
        sum += settings.getInt("counter8", 0);
        sum += settings.getInt("counter9", 0);
        sum += settings.getInt("counter10", 0);
        sum += settings.getInt("counter11", 0);
        sum += settings.getInt("counter12", 0);
        sum += settings.getInt("counter13", 0);
        sum += settings.getInt("counter14", 0);
        sum += settings.getInt("counter15", 0);
        sum += settings.getInt("counter16", 0);
        sum += settings.getInt("counter17", 0);
        sum += settings.getInt("counter18", 0);
        sum += settings.getInt("counter19", 0);
        sum += settings.getInt("counter20", 0);
        sum += settings.getInt("counter21", 0);
        sum += settings.getInt("counter22", 0);
        sum += settings.getInt("counter23", 0);
        sum += settings.getInt("counter24", 0);
        sum += settings.getInt("counter25", 0);
        sum += settings.getInt("counter25", 0);
        sum += settings.getInt("counter26", 0);
        sum += settings.getInt("counter27", 0);
        sum += settings.getInt("counter28", 0);
        sum += settings.getInt("counter29", 0);
        //get counters value for page four
        settings = getSharedPreferences(CounterFourActivity.PREFS_NAME, 0);
        sum += settings.getInt("counter1", 0);
        sum += settings.getInt("counter2", 0);
        sum += settings.getInt("counter3", 0);
        //set the counter
        sumLabel.setText(String.format("%05d", sum));
    }
} 
```

**广告底部 xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ad_catalog_layout"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <TextView android:id="@+id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/banner_bottom" />
    <TextView android:id="@+id/status"
        android:layout_width="match_parent"
        android:layout_height="0px"
        android:layout_weight="1"
        android:text="" />

    <com.google.ads.AdView
        xmlns:googleads="http://schemas.android.com/apk/lib/com.google.ads"
        android:id="@+id/ad"
        android:layout_width="fill_parent"
        android:layout_height="60dp"
        googleads:adSize="IAB_MRECT"
        googleads:adUnitId="@string/admob_id" />

</LinearLayout> 
```

主页 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/MainActivity"
    android:background="@drawable/backgroundtowers"
    android:orientation="vertical"
    android:scrollbars="vertical"
    android:weightSum="1" >

      <ScrollView android:id="@+id/ScrlView" android:layout_width="fill_parent" android:layout_height="fill_parent" >

  <LinearLayout
      android:id="@+id/layoutForScroll"
      android:layout_width="match_parent"
      android:layout_height="100dp"
      android:orientation="vertical" >

     <TextView
         android:id="@+id/header"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_marginTop="23dp"
         android:gravity="center"
         android:text="Welcome To Ride Count"
         android:textAppearance="?android:attr/textAppearanceLarge"
         android:textColor="#1E90FF"
         android:textStyle="bold" >
</TextView>

        <RelativeLayout
            android:id="@+id/layoutTextViews_one"
            android:layout_width="280dp"
            android:layout_height="100dp"
            android:layout_gravity="center"
            android:layout_marginTop="10dp"
            android:background="@drawable/smallbox1" >

     <TextView
         android:id="@+id/txtCountLabel_one"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_alignParentLeft="true"
         android:layout_marginTop="24dp"
         android:gravity="center"
         android:text="Rides Ridden:"
         android:textColor="#1E90FF"
         android:textStyle="bold" >
</TextView>

    <TextView android:textStyle="bold" android:gravity="center" android:text="0000" android:layout_height="wrap_content"
      android:layout_width="match_parent" android:id="@+id/sum"
       android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#000000"  android:layout_marginTop="45dp"></TextView>

   </RelativeLayout>

        <TextView
            android:id="@+id/txtFact"
            android:layout_width="280dp"
            android:layout_height="180dp"
            android:layout_gravity="center"
            android:layout_marginTop="23dp"
            android:background="@drawable/factbox"
            android:gravity="center"
            android:text="Tap For Fact"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000"
            android:textStyle="bold" />

   </LinearLayout>
   </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:30:27.083

这意味着当 Admob 尝试添加他们的广告视图时，他们找不到空间。

您添加`scrollView`，`android:layout_width="fill_parent" android:layout_height="fill_parent"`这意味着您的所有父布局都被此滚动视图覆盖

尝试添加`LinearLayout`你的父母`LinearLayout`

试试这个

```
`
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/backgroundtowers"
    android:orientation="vertical"
    android:scrollbars="vertical"
    android:weightSum="1" >

      <ScrollView android:id="@+id/ScrlView" android:layout_width="fill_parent" android:layout_height="fill_parent" >

  <LinearLayout
      android:id="@+id/layoutForScroll"
      android:layout_width="match_parent"
      android:layout_height="100dp"
      android:orientation="vertical" >
<LinearLayout
     android:id="@+id/MainActivity"
      android:layout_width="match_parent"
      android:layout_height="100dp"></LinearLayout>

     <TextView
         android:id="@+id/header"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_marginTop="23dp"
         android:gravity="center"
         android:text="Welcome To Ride Count"
         android:textAppearance="?android:attr/textAppearanceLarge"
         android:textColor="#1E90FF"
         android:textStyle="bold" >
</TextView>

        <RelativeLayout
            android:id="@+id/layoutTextViews_one"
            android:layout_width="280dp"
            android:layout_height="100dp"
            android:layout_gravity="center"
            android:layout_marginTop="10dp"
            android:background="@drawable/smallbox1" >

     <TextView
         android:id="@+id/txtCountLabel_one"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_alignParentLeft="true"
         android:layout_marginTop="24dp"
         android:gravity="center"
         android:text="Rides Ridden:"
         android:textColor="#1E90FF"
         android:textStyle="bold" >
</TextView>

    <TextView android:textStyle="bold" android:gravity="center" android:text="0000" android:layout_height="wrap_content"
      android:layout_width="match_parent" android:id="@+id/sum"
       android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#000000"  android:layout_marginTop="45dp"></TextView>

   </RelativeLayout>

        <TextView
            android:id="@+id/txtFact"
            android:layout_width="280dp"
            android:layout_height="180dp"
            android:layout_gravity="center"
            android:layout_marginTop="23dp"
            android:background="@drawable/factbox"
            android:gravity="center"
            android:text="Tap For Fact"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000"
            android:textStyle="bold" />

   </LinearLayout>
   </ScrollView>

</LinearLayout>` 
```

新版面

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/backgroundtowers"
    android:orientation="vertical"
    android:scrollbars="vertical"
    android:weightSum="1" >

      <ScrollView
          android:id="@+id/ScrlView"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:layout_above="@+id/MainActivity"
          android:layout_marginBottom="20dp" >

  <LinearLayout
      android:id="@+id/layoutForScroll"
      android:layout_width="match_parent"
      android:layout_height="100dp"
      android:orientation="vertical" >

     <TextView
         android:id="@+id/header"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_marginTop="23dp"
         android:gravity="center"
         android:text="Welcome To Ride Count"
         android:textAppearance="?android:attr/textAppearanceLarge"
         android:textColor="#1E90FF"
         android:textStyle="bold" >
</TextView>

        <RelativeLayout
            android:id="@+id/layoutTextViews_one"
            android:layout_width="280dp"
            android:layout_height="100dp"
            android:layout_gravity="center"
            android:layout_marginTop="10dp"
            android:background="@drawable/smallbox1" >

     <TextView
         android:id="@+id/txtCountLabel_one"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_alignParentLeft="true"
         android:layout_marginTop="24dp"
         android:gravity="center"
         android:text="Rides Ridden:"
         android:textColor="#1E90FF"
         android:textStyle="bold" >
</TextView>

    <TextView android:textStyle="bold" android:gravity="center" android:text="0000" android:layout_height="wrap_content"
      android:layout_width="match_parent" android:id="@+id/sum"
       android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="#000000"  android:layout_marginTop="45dp"></TextView>

   </RelativeLayout>

        <TextView
            android:id="@+id/txtFact"
            android:layout_width="280dp"
            android:layout_height="180dp"
            android:layout_gravity="center"
            android:layout_marginTop="23dp"
            android:background="@drawable/factbox"
            android:gravity="center"
            android:text="Tap For Fact"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000"
            android:textStyle="bold" />

   </LinearLayout>
   </ScrollView>

        <LinearLayout
            android:id="@+id/MainActivity"
            android:layout_width="match_parent"
            android:layout_height="100dp"
            android:layout_alignParentBottom="true"
            android:layout_marginTop="20dp" >

</LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:20:50.690

尝试将保存广告视图的 LinearLayout 更改为 wrap_content 的高度。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ad_catalog_layout"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent" > 
```

到

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ad_catalog_layout"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" > 
```

# linux - 网络上所有机器的主机名发现

> ID：15734627
> 
> 赞同：5
> 
> 时间：2013-03-31T21:18:55.740
> 
> 标签：linux, networking, mpi, hostname

**问题**：我正在为分布式 CPU/GPU 模拟器开发图形前端。由于此模拟器使用 MPI，它需要一个主机文件，详细说明网络上使用的所有计算机的主机名，以便它知道要在哪些机器上分发。由于我的应用程序的最终用户不是计算机科学家（甚至可能不是很懂计算机），我不能指望他们知道/找到他们网络/集群上每台计算机的主机名。我想以编程方式执行此主机名发现，以便在应用程序启动时，用户可以看到可用的机器，并从中选择他们想要运行的主机。如果可能的话，我希望这个解决方案是跨平台的，但由于模拟器当前包含一些 linux 依赖项，我可以处理仅 Linux 的解决方案。

**到目前为止我所尝试**的：我尝试使用 nmap 包来发现网络上的主机，其命令包括`nmap -sP <ip address range>`使用该本地网络的 ip 地址范围。但是，它只转储主机的 IP 地址（而不是主机名），**我不确定如何将这些 IP 地址转换为 ssh 主机名**（因为 MPI 使用 ssh 进行主机发现）。此外，我使用了类似的方法，通过 ping 提供广播地址，它返回几乎相同的结果。

我为这个问题的广泛性和缺乏显示的代码道歉，但我对网络探测/编程不是很有经验，我什至不知道从哪里开始。我尝试用谷歌搜索，但找不到合适的选项（可能是因为我缺乏经验导致我使用不正确的术语导致不正确的结果）我的背景主要是图形和用户界面编程，所以这有点超出我的舒适区.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T09:25:54.743

SSH 不关心它是否有主机名或 IP 地址来连接（不确定这是否适用于特定于主机的配置）。大多数 MPI 实现也不在乎，例如在 Open MPI 连接中，URI 地址都是数字的，所以带有 IP 的主机文件就可以了。另一方面，HTTP 服务器很关心虚拟主机，其中许多不同的站点解析到相同的 IP 地址，但通过`Host`HTTP 标头为服务器提供了实际的主机名。

不请自来的建议：通过 ping 查找主机很好，但不能保证您找到了运行 SSH 的机器。您最好扫描打开端口 22 并接受 TCP 连接的系统：

```
$ nmap -oX -sT -p22 <ip range> 
```

`-oX`生成易于解析的 XML 输出。`-oG`也是自动解析扫描结果的一种很好的格式。运行 SSH 并不一定意味着用户能够登录系统 - 例如，它可能是网络路由器或其他可远程管理的设备。还必须注意只显示用户无需提供密码即可登录的机器，例如使用 RSA/DSA 公钥，否则启动 MPI 作业将是一项非常乏味的任务。您可以使用以下内容测试找到的每个主机：

```
$ ssh -2 -o "PreferredAuthentications=gssapi-with-mic,hostbased,publickey" \
      <host> hostname 
```

该命令基本上排除了所有交互式身份验证方法。如果连接成功，它将输出远程机器的主机名。否则，您将收到来自 SSH 客户端的权限被拒绝错误和非零退出代码。

# c - 获取 C 程序的平均运行时间

> ID：15734629
> 
> 赞同：0
> 
> 时间：2013-03-31T21:19:02.230
> 
> 标签：c, runtime

我正在尝试测量在二进制文件中读取和写入未对齐位与对齐位的速度差异。我想知道是否有一个实用程序我可以使用（除了`time`一遍又一遍地运行并编写我自己的）来采样程序的平均运行时间（我正在运行基于 Linux 的操作系统）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:29:48.407

> 一遍`time`又一遍地写我自己的

没关系。您可以以两种方式执行读/写一万次并计算平均时间。

如果你真的想使用一个库，你可以试试[Google Perftools](http://code.google.com/p/gperftools/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:43:08.833

把它放在头文件中：

```
#ifndef TIMER_H
#define TIMER_H

#include <stdlib>
#include <sys/time.h>

typedef unsigned long long timestamp_t;

static timestamp_t

get_timestamp ()
{
  struct timeval now;
  gettimeofday (&now, NULL);
  return  now.tv_usec + (timestamp_t)now.tv_sec * 1000000;
}
#endif 
```

将头文件包含到您将使用的任何 .c 文件中，然后执行以下操作：

```
#define N 10000
int main()
{
    int i;
    double avg;
    timestamp_t start, end;

    start = get_timestamp();
    for(i = 0; i < N; i++)
        foo();
    end = get_timestamp();
    avg = (end - start) / (double)N;

    printf("%f", avg);
    return 0;
} 
```

基本上，这会调用您尝试测量 N 次性能的任何函数，在这种情况下，N 是定义的常数（不一定是）。它在 for 循环之前和 for 循环之后需要一个时间戳，然后计算函数执行所用的平均时间。get_timestamp() 函数返回微秒数，因此如果您需要毫秒，请除以 1000，秒 - 除以 1000000 等。

# css - div内的中心数字

> ID：15734631
> 
> 赞同：0
> 
> 时间：2013-03-31T21:19:15.780
> 
> 标签：css, html

我正在尝试使一些数字居中。目前该数字分为两列，我希望它们在三列之内。但是每次我尝试增加宽度时，所有的数字都会变得有趣，或者稍微向左移动。任何帮助将不胜感激。视觉辅助如下：http: [//jsfiddle.net/QcLLC/](http://jsfiddle.net/QcLLC/)

HTML：

```
 <section class="main">

            <div class="grid clearfix masonry" id="grid" style="position: relative; height: 1820px;">
                <figure style="position: absolute; top: 0px; left: 0px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/4.jpg"><figcaption style="position: absolute; width: 100%;"><a href="http://drbl.in/fWMT">Fall 7 Times Stand Up 8</a> by Erika Mackley</figcaption></figure>
                <figure style="position: absolute; top: 0px; left: 416.34375px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/7.jpg"><figcaption><a href="http://drbl.in/fLBG">Unashamed Optimism of Ambition</a> by Erika Mackley</figcaption></figure>
                <figure style="position: absolute; top: 260px; left: 416.34375px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/1.jpg"><figcaption style="position: absolute; width: 100%;"><a href="http://drbl.in/fWMM">Stay Hungry. Stay Foolish.</a> by Erika Mackley</figcaption></figure>
                <figure style="position: absolute; top: 650px; left: 0px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/3.jpg"><figcaption><a href="http://drbl.in/fWPV">Wild Hearts Cannot Be Tamed</a> by Erika Mackley</figcaption></figure>
                <figure style="position: absolute; top: 910px; left: 0px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/5.jpg"><figcaption><a href="http://drbl.in/fGhI">2012 Detroit Tigers</a> by Erika Mackley</figcaption></figure>
                <figure style="position: absolute; top: 910px; left: 416.34375px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/6.jpg"><figcaption><a href="http://drbl.in/fKCf">Bad Hair Day</a> by Erika Mackley</figcaption></figure>
                <figure style="position: absolute; top: 1170px; left: 0px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/2.jpg"><figcaption><a href="http://drbl.in/fQdt">Work Hard. Stay Humble.</a> by Erika Mackley</figcaption></figure>
                <figure style="position: absolute; top: 1170px; left: 416.34375px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/8.jpg"><figcaption><a href="http://drbl.in/fPEY">Everyone Deserves To Be Adored</a> by Erika Mackley</figcaption></figure>
                <figure style="position: absolute; top: 1430px; left: 0px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/9.jpg"><figcaption><a href="http://drbl.in/fWwG">Sarah William's Quote</a> by Erika Mackley</figcaption></figure>
            </div>

        </section>

    </div><!-- /container --> 
```

CSS：

```
 .grid {
                margin: 30px auto;
            }

            .grid figure {
                display: block;
                float: left;
                margin: 0 1% 10px 1%;
                cursor: pointer;
                overflow: hidden;
            }

            .grid figure img {
                display: block;
            }

            .grid figure figcaption {
                position: absolute;
                font-size: 16px;
                font-weight: 400;
                left: auto;
                width: 100%;
                height: 60px;
                bottom: -60px;
                padding: 20px;
                color: #ddd;
                background: #18bcbc;
                -webkit-font-smoothing: antialiased;
                -webkit-transition: bottom 0.2s ease;
                -moz-transition: bottom 0.2s ease-in-out;
                -ms-transition: bottom 0.2s ease-in-out;
                -o-transition: bottom 0.2s ease-in-out;
                transition: bottom 0.2s ease-in-out;
            }

            .grid figure figcaption a {
                color: #fff;
            }

            .grid figure figcaption a:hover {
                color: #ffd468;
            }

            .grid figure:hover figcaption {
                bottom: 0px;
            }

            html { height: 100%; }

            *,
            *:after,
            *:before {
                -webkit-box-sizing: border-box;
                -moz-box-sizing: border-box;
                box-sizing: border-box;
                padding: 0;
                margin: 0;
            }

            .clearfix:before,
            .clearfix:after {
                content: " ";
                display: table;
            }

            .clearfix:after {
                clear: both;
            }

            .clearfix {
                *zoom: 1;
            }

            body {

                background: #ffe19a url(../images/noisebg.png);
                font-weight: 300;
                font-size: 14px;
                color: #333;
                overflow: scroll;
                overflow-x: hidden;
            }

            a {
                color: #555;
                text-decoration: none;
            }

            .container {
                width: 100%;
                position: relative;
            }

            .main,
            .container {
                width: 100%;
                max-width: 1275px;
                margin: 0 auto;
                position: relative;
                padding: 0 0 5px 0px
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:44:12.823

我不确定我是否完全掌握了情况。标签的内联样式与`<figure>`它们的 CSS 规则相矛盾，因为将绝对定位的元素向左浮动是没有意义的。

[请参阅http://jsfiddle.net/kDCM6/](http://jsfiddle.net/kDCM6/)中的小提琴，其中删除了所有内联样式，并为`<figure>`s 指定了宽度以生成三列布局。内部的图像也已给出`max-height: 100%`，以便它们与父级自动缩放`<figure>`。

当然，这个小提琴确实具有您原始设计的不错布局，但要实现这一点，您必须首先查看这些绝对左侧和顶部偏移量是如何生成的，并将其更改为三列布局。

编辑：看来您正在使用砌体（[http://masonry.desandro.com](http://masonry.desandro.com)）。如果是这样，您可以在调用 Masonry 时指定 columnWidth。似乎您可以自动将列宽指定为容器宽度的一部分，如下所示：

```
$('#container').masonry({
  // set columnWidth a fraction of the container width
  columnWidth: function( containerWidth ) {
    return containerWidth / 3;
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:52:05.277

如何更改绝对定位以制作 3 网格布局的示例。[http://jsfiddle.net/JDq6C/3/](http://jsfiddle.net/JDq6C/3/)

```
<style>
  .grid {
                margin: 30px auto;
            }

            .grid figure {
                display: block;
                float: left;
                margin: 0 1% 10px 1%;
                cursor: pointer;
                overflow: hidden;
            }

            .grid figure img {
                display: block;
            }

            .grid figure figcaption {
                position: absolute;
                font-size: 16px;
                font-weight: 400;
                left: auto;
                width: 100%;
                height: 60px;
                bottom: -60px;
                padding: 20px;
                color: #ddd;
                background: #18bcbc;
                -webkit-font-smoothing: antialiased;
                -webkit-transition: bottom 0.2s ease;
                -moz-transition: bottom 0.2s ease-in-out;
                -ms-transition: bottom 0.2s ease-in-out;
                -o-transition: bottom 0.2s ease-in-out;
                transition: bottom 0.2s ease-in-out;
            }

            .grid figure figcaption a {
                color: #fff;
            }

            .grid figure figcaption a:hover {
                color: #ffd468;
            }

            .grid figure:hover figcaption {
                bottom: 0px;
            }

            html { height: 100%; }

            *,
            *:after,
            *:before {
                -webkit-box-sizing: border-box;
                -moz-box-sizing: border-box;
                box-sizing: border-box;
                padding: 0;
                margin: 0;
            }

            .clearfix:before,
            .clearfix:after {
                content: " ";
                display: table;
            }

            .clearfix:after {
                clear: both;
            }

            .clearfix {
                *zoom: 1;
            }

            body {

                background: #ffe19a url(../images/noisebg.png);
                font-weight: 300;
                font-size: 14px;
                color: #333;
                overflow: scroll;
                overflow-x: hidden;
            }

            a {
                color: #555;
                text-decoration: none;
            }

            .container {
                width: 100%;
                position: relative;
            }

            .main,
            .container {
                width: 100%;
                max-width: 1275px;
                margin: 0 auto;
                position: relative;
                padding: 0 0 5px 0px
            }
</style>

<section class="main">

            <div class="grid clearfix masonry" id="grid" style="position: relative; height: 1820px;width: 1240px;">
                <figure style="position: absolute; top: 0px; left: 0px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/4.jpg"><figcaption style="position: absolute; width: 100%;"><a href="http://drbl.in/fWMT">Fall 7 Times Stand Up 8</a> by Erika Mackley</figcaption></figure>
                <figure style="position: absolute; top: 0px; left: 416.34375px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/7.jpg"><figcaption><a href="http://drbl.in/fLBG">Unashamed Optimism of Ambition</a> by Erika Mackley</figcaption></figure>
                <figure style="position: absolute; top: 0px; left: 831px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/1.jpg"><figcaption style="position: absolute; width: 100%;"><a href="http://drbl.in/fWMM">Stay Hungry. Stay Foolish.</a> by Erika Mackley</figcaption></figure>
                <figure style="position: absolute; top: 266px; left: 413.34375px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/3.jpg"><figcaption><a href="http://drbl.in/fWPV">Wild Hearts Cannot Be Tamed</a> by Erika Mackley</figcaption></figure>
                <figure style="position: absolute; top: 654px; left: 0px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/5.jpg"><figcaption><a href="http://drbl.in/fGhI">2012 Detroit Tigers</a> by Erika Mackley</figcaption></figure>
                <figure style="position: absolute; top: 531px; left: 416.34375px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/6.jpg"><figcaption><a href="http://drbl.in/fKCf">Bad Hair Day</a> by Erika Mackley</figcaption></figure>
                <figure style="position: absolute; top: 655px; left: 831px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/2.jpg"><figcaption><a href="http://drbl.in/fQdt">Work Hard. Stay Humble.</a> by Erika Mackley</figcaption></figure>
                <figure style="position: absolute; top: 794px; left: 416.34375px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/8.jpg"><figcaption><a href="http://drbl.in/fPEY">Everyone Deserves To Be Adored</a> by Erika Mackley</figcaption></figure>
                <figure style="position: absolute; top: 917px; left: 0px;" class="masonry-brick"><img src="http://tympanus.net/Development/StickyCaptionsConcept/images/9.jpg"><figcaption><a href="http://drbl.in/fWwG">Sarah William's Quote</a> by Erika Mackley</figcaption></figure>
            </div>

        </section>

    <!-- /container --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:36:15.940

`.grid`只需为: I used指定一个宽度`width: 820px`，可以根据内容进行调整。小提琴：http: [//jsfiddle.net/QcLLC/1/](http://jsfiddle.net/QcLLC/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T04:26:55.303

我相信我已经使用 CSS3 列和固定宽度在您的`section.main`.

我故意避免绝对定位并将所有样式移到样式表中。我还重新排列了你的数字，以匹配它们在你的小提琴上的视觉顺序。

我什至没有看你提供的 CSS。这有点令人困惑，我专注于为您提供一个干净的 3 列布局。

我在 CodePen 创建了一个示例，但我使用了“无前缀”选项，因此您要么必须自己计算供应商前缀，要么也使用[无前缀](http://leaverou.github.io/prefixfree/)

[http://codepen.io/Ghodmode/pen/vbFGt](http://codepen.io/Ghodmode/pen/vbFGt)

需要注意的一件事是，我必须修复部分的宽度和图形的宽度，以防止它裁剪图像。

### HTML

```
<section class="main">
  <div class="grid clearfix masonry" id="grid">
    <figure class="masonry-brick">
      <img src="http://tympanus.net/Development/StickyCaptionsConcept/images/4.jpg">
      <figcaption>
        <a href="http://drbl.in/fWMT">Fall 7 Times Stand Up 8</a> by Erika Mackley</figcaption>
    </figure>
    <figure class="masonry-brick">
      <img src="http://tympanus.net/Development/StickyCaptionsConcept/images/3.jpg">
      <figcaption>
        <a href="http://drbl.in/fWPV">Wild Hearts Cannot Be Tamed</a> by Erika Mackley
      </figcaption>
    </figure>
    <figure class="masonry-brick">
      <img src="http://tympanus.net/Development/StickyCaptionsConcept/images/5.jpg">
      <figcaption>
        <a href="http://drbl.in/fGhI">2012 Detroit Tigers</a> by Erika Mackley
      </figcaption>
    </figure>
    <figure class="masonry-brick">
      <img src="http://tympanus.net/Development/StickyCaptionsConcept/images/2.jpg">
      <figcaption>
        <a href="http://drbl.in/fQdt">Work Hard. Stay Humble.</a> by Erika Mackley
      </figcaption>
    </figure>
    <figure class="masonry-brick">
      <img src="http://tympanus.net/Development/StickyCaptionsConcept/images/9.jpg">
      <figcaption>
        <a href="http://drbl.in/fWwG">Sarah William's Quote</a> by Erika Mackley
      </figcaption>
    </figure>
    <figure class="masonry-brick">
      <img src="http://tympanus.net/Development/StickyCaptionsConcept/images/7.jpg">
      <figcaption>
        <a href="http://drbl.in/fLBG">Unashamed Optimism of Ambition</a> by Erika Mackley
      </figcaption>
    </figure>
    <figure class="masonry-brick">
      <img src="http://tympanus.net/Development/StickyCaptionsConcept/images/1.jpg">
      <figcaption>
        <a href="http://drbl.in/fWMM">Stay Hungry. Stay Foolish.</a> by Erika Mackley
      </figcaption>
    </figure>
    <figure class="masonry-brick">
      <img src="http://tympanus.net/Development/StickyCaptionsConcept/images/6.jpg">
      <figcaption>
        <a href="http://drbl.in/fKCf">Bad Hair Day</a> by Erika Mackley
      </figcaption>
    </figure>
    <figure class="masonry-brick">
      <img src="http://tympanus.net/Development/StickyCaptionsConcept/images/8.jpg">
      <figcaption>
        <a href="http://drbl.in/fPEY">Everyone Deserves To Be Adored</a> by Erika Mackley
      </figcaption>
    </figure>
  </div>
</section> 
```

### CSS

```
body {
  margin: 0;
}

figure {
  position: relative;
  margin: 1em;
  padding: 0;
}

figure img {
  width: 20em;
}

section.main {
  column-count: 3;
  padding: 1em;
  column-gap: 1em;
  width: 66em;
}
figure:nth-of-type(4n+1) {
  margin-top: 0;
}

figure:nth-of-type(0n+4) {
  column-break-inside: avoid;
} 
```

# c# - 我应该如何在 c# > 4.0 中运行后台线程

> ID：15734632
> 
> 赞同：1
> 
> 时间：2013-03-31T21:19:16.873
> 
> 标签：c#, async-await

我主要是重用旧时代的代码片段：

```
 public void Start()
        {
            renewalThread = new Thread(() =>
            {

                while (!disposed)
                {
                    Thread.Sleep(TimeSpan.FromSeconds(10));

                    try
                    {

                        if (LogUpdated != null)
                            update();
                    }
                    catch (Exception ex)
                    {

                    }
                }

            });
            renewalThread.Start();
        } 
```

考虑新的 async/await 东西，有没有更优雅的方法来做到这一点？解决方案的主要区别是什么

```
Task.run( () =>
{
await Task.delay(10000);

update code
}, __.LongRunning); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T21:26:41.850

使用 a`Timer`代替：

```
 aTimer = new System.Timers.Timer(10000);

    aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

    aTimer.Enabled = true;

private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
// do something here.
// if this method could take longer than the intervale, disable the
// timer at the start and re-enable at the end.
} 
```

有了`Timer`你不必开始一个新的线程。 `Thread.Sleep`强制你使用一个等待的线程。如果您想每 x 秒执行一次操作，这`System.Threading.Timer`就是设计的目的，它将采用线程池线程并在调用事件时使用该线程，并且该线程仅在事件期间使用 - 与`Sleep`. `Sleep`不准确 - 它可能少于您要求的时间或更多。它在 10 秒内偏离那么多的可能性为零；但这仍然不准确。使用`thread.Sleep`意味着您不能同时执行两个事件——如果您的`Timer`事件处理程序花费的时间比间隔时间长，它将一次运行两个处理程序。A`Timer`更容易停止——你只需调用`Stop`或`Dispose`。与`Thread.Sleep`你必须使用`Thread.Abort`- 并且有数据损坏的风险（即您必须编写以`Thread.Sleep`取消线程不会损坏数据的方式调用的代码）。如果您需要在事件中对 UI 线程执行某些操作，请使用`Forms.Timer`并且您不必处理编组回 UI 线程（例如`Control.BeginInvoke`）。

我可以继续说下去，但我想你明白了。有关更多详细信息，请参阅[http://bit.ly/IhxHSk](http://bit.ly/IhxHSk)

# php - 如何使用javascript在动态表中添加动态下拉选择

> ID：15734636
> 
> 赞同：2
> 
> 时间：2013-03-31T21:19:51.233
> 
> 标签：php, javascript, drop-down-menu, combobox, innerhtml

如何使用javascript在动态表中添加动态下拉选择，但我想在`cell6.innerHTML=`而不是使用这个选择`input type="text"`？

```
<script type="text/javascript">
var i = 0;
function changeIt(){
i++;
var table=document.getElementById("itemdetail");
var row=table.insertRow();
var cell4=row.insertCell();
var cell3=row.insertCell();
var cell1=row.insertCell();
var cell7=row.insertCell();
var cell5=row.insertCell();
var cell6=row.insertCell();

cell6.innerHTML="<input style='width:104px' 
type='text' readonly='readonly' name='itemcode[]' id='itemcode"+i+"' />";

cell5.innerHTML="<input  type='text' 
name='particulars[]' id='particulars"+i+"'/>";

cell7.innerHTML="<textarea class='textarea5' 
name='description[]' id='description"+i+"'></textarea>";

cell1.innerHTML="<input style='width:69px' 
type='text' name='qty[]' id='qty_"+i+"' onfocus='return B("+i+");' />";

cell3.innerHTML="<input style='width:50px'
type='text' name='rates[]' id='rates_"+i+"'/>";

cell4.innerHTML="<input style='width:80px' type='text'
readonly='readonly' name='amt[]'  id='amt_"+i+"'
onfocus='return B("+i+");' onMouseOver='return B("+i+");' />";
}
</script> 
```

**我想用这个选择`cell6.innerHTML=`代替`input type="text"`？**

```
<select class="select10" name="itemcode[]" id="itemcode" 
style="width:150px;"  onChange="getComboB(this)">
<option value="0"><--Select--> </option>
<?php 
$query=mysql_query("SELECT * from products order by id");
while($row=mysql_fetch_assoc($query))
{
$val2=$row['itemcode'];
?>
<option  value="<?=$val2;?>" <? if ($_GET['itemcode']  == $val2) 
{ echo "selected='selected'"; }?>>
<?=$row['itemcode'];?>
</option>
<?php }?>
</select> 
```

现在我添加了这段代码而不是`input type text`on`cell6.innerHTML=`但问题是`new table row is not displaying?`

```
cell6.innerHTML= '
<select class="select10" name="itemcode[]" id="itemcode" 
style="width:150px;"  onChange="getComboB(this)">
<option value="0"><--Select--> </option>
<?php 
$query=mysql_query("SELECT * from products order by id");
while($row=mysql_fetch_assoc($query))
{
$val2=$row["itemcode"];
?>
<option  value="<?=$val2;?>" <? if ($_GET['itemcode']  == $val2) 
{ echo "selected=\"selected\""; }?>>
<?=$row["itemcode"];?>
</option>
<?php }?>
</select>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:21:31.463

您尝试使用 Jquery。

如果 cell6 是一个 id，

```
document.getElementById("cell").innerHTML+=" your code" 
```

正是这个：

```
document.getElementById("cell").innerHTML+="<select class="select10" name="itemcode[]" id="itemcode" 
style="width:150px;"  onChange="getComboB(this)">
<option value="0"><--Select--> </option>
<?php 
$query=mysql_query("SELECT * from products order by id");
while($row=mysql_fetch_assoc($query))
{
$val2=$row["itemcode"];
?>
<option  value="<?=$val2;?>" <? if ($_GET["itemcode"]  == $val2) 
{ echo "selected=\"selected\""; }?>>
<?=$row["itemcode"];?>
</option>
<?php }?>
</select>';" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:36:04.723

尝试这个：

```
cell6.innerHTML= '
<select class="select10" name="itemcode[]" id="itemcode" 
style="width:150px;"  onChange="getComboB(this)">
<option value="0"><--Select--> </option>
<?php 
$query=mysql_query("SELECT * from products order by id");
while($row=mysql_fetch_assoc($query))
{
$val2=$row["itemcode"];
?>
<option  value="<?=$val2;?>" <? if ($_GET["itemcode"]  == $val2) 
{ echo "selected=\"selected\""; }?>>
<?=$row["itemcode"];?>
</option>
<?php }?>
</select>'; 
```

但是将数据直接获取到视图中并不是一个好主意（如果您使用的是 MVC 编程）。取而代之的是，您应该从模型中获取控制器中的数据，然后将其传递给视图。

注意 js 字符串中的双引号。你必须在 js 的开头和结尾只有 2 个单引号。

# jquery - jQuery - 新的（生成的）对象上的自己的插件/函数绑定

> ID：15734638
> 
> 赞同：0
> 
> 时间：2013-03-31T21:19:57.467
> 
> 标签：jquery

我是 jQuery 初学者，我想创建一个颜色选择器插件。
我所做的一切工作正常，但有一个问题。

对于我网页中的所有静态内容，插件可以正常工作

```
$(document).ready(function() {
    $('.col').colorPicker();
}); 
```

但是如果也有新的通过 jQuery 生成的“.col”对象，我必须再次运行“$('.col').colorPicker()”，在这些项目上绑定一个 ColorPicker 对象。

是否有可能在不运行“$.colorPicker()”命令的情况下使用插件本身即时执行此操作？

前段时间我记得我用“this ['live']（'click'，fn）”做了这个，但这不再起作用了..

* * *

编辑：

我现在没有插件的代码，但我可以给你另一个例子，我的插件的基本结构..

```
(function ($) {

    function valueReplacer(element) {
        this.element = element;
    } 

    valueReplacer.prototype = {
        // set a new value
        setValue : function() {
            this.element.val('new value');
        }
    }

    // call method of colorPicker instance
    function setValue() {
        $.data(this, "colorPicker").setValue();
    }

    $.fn.valueReplacer = function() {

        return this.each(function() {
            // prevent multiple instances
            if(!$.data(this, "valueReplacer")) {
                $.data(this, "valueReplacer", new valueReplacer($(this)));
            }   
        }); 

    }
})(jQuery); 
```

.. 这个示例插件现在应该做的所有事情，就是在点击它时将输入 ( `$(input).valueReplacer()`) 的值设置为“新值”。

但是我应该在哪里以及如何设置`.on`, 以便在`setValue()`单击使用 valueReplacer 对象实例化的元素时调用该方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:31:50.630

正如 marko 提到的 live() 现在可以写成 $(document).on('action', 'selector', callback)

这意味着如果您单击文档，并且您单击的位置与选择器匹配，则会触发回调。查看 jQuery on() 文档以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:23:23.350

从 1.7 版本开始，不推荐使用 .live()。你使用的是什么 jQuery 版本？

如果要在将动态添加的元素上附加侦听器，请尝试使用 jQuery [.on()方法。](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:26:02.520

在**现代浏览器**中，您可以使用该[`MutationObserver`](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)对象来观察`DOM`更改并检测您感兴趣的新元素是否已添加到`DOM`.

`document`另一种选择是直接在而不是每个单独的`.col`元素上收听事件。您可以将`selector`as 作为第二个参数传递给 jQuery`on`函数，该函数将自动过滤事件以确保仅在`.col`单击元素时调用您的处理程序。通过这样做，您将处理`.col`在插件初始化后添加的元素的点击，而无需重新初始化它。

```
$(document).on('click', '.col', function () {
    //console.log('.col clicked!');
}); 
```

对于您添加的插件，我对如何使用上述方法构建事物有一个想法。检查一下那个小提琴-> [http://jsfiddle.net/Xy6WB/3/](http://jsfiddle.net/Xy6WB/3/)

```
(function ($) {
    var initialized = false,
        methods = {
            setValue: function (value) {
                this.innerHTML = value;
            }
        },
        slice = Array.prototype.slice;

    $.fn.valueReplacer = function(method) {
        var args = slice.call(arguments, 1);

        if (!initialized) {
            //when a plugin element is clicked, invoke the function in the
            //context of that element
            $(document).on('click', '.value-replacer-plugin', function (e) {
                methods.setValue.call(this, 'another value');
            });
        }

        //the plugin will automatically handle any element with
        //the value-replacer-plugin class, so here just add the class
        //to the element
        if (this.length) {
            this.each(function() {
                $(this).addClass('value-replacer-plugin');

                if (method) {
                    methods[method].apply(this, args);
                }
            });
        }

        return this;
    }
})(jQuery); 
```

# java - Java，项目对象的链接列表。如何引用当前项目？

> ID：15734652
> 
> 赞同：0
> 
> 时间：2013-03-31T21:21:04.270
> 
> 标签：java, abstract

我有一个包含 Item 对象链接列表的类。我希望这个类以某种方式保存“当前”项目，以便我可以在程序的其他部分引用它。最好的方法是在我的类中创建一个 Item 对象并在我希望设置它时将其设置为等于“当前”Item？

像这样：

```
for(int i = 0; i < [LinkedListofItems].length(); i++)
    {Item currentItem = [LinkedListofItems].getAt(i); break;} 
```

然后，如果我想将 Items 属性设置为等于其他属性，我会覆盖 = 运算符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:31:38.913

您必须在 LinkedList 上实现一个迭代器。

```
Iterator listIterator = LinkedListOfItems.iterator();
//Use iterator here to access a particular list element by calling .next()
Item itemToStore = listIterator.next(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:34:13.197

一些东西：

A）根据您的代码示例和您的要求，他们似乎在说两件不同的事情。首先，如果您需要经常迭代并且**不**从所述列表中添加和删除很多内容，我建议您使用 ArrayList。

B）我也不确定你为什么要从你的例子中迭代。如果您有需要为 I 设置的 Item，您可以使用 elementAt() 方法。

C）此外，您必须实现一个迭代器来遍历列表。

```
Iterator linkedListIt = LinkedList.iterator(); 
```

现在您可以查看您需要的内容，并在需要时使用 LinkedList.next() 获取当前对象；

# java - 如何避免堆栈溢出错误

> ID：15734657
> 
> 赞同：2
> 
> 时间：2013-03-31T21:21:34.300
> 
> 标签：java, recurrence

我有一个可以定义为这样的程序

```
reset() {
   //sets all variables to initial values
   //clears all arrays
   method1();
}

method1 (){
    //doSomeStuff;
    method2();
}

method2(){
    //doStuff
    method3();
}

method3(){
    //doStuff
    if (jobDone) reset(); //here the cycle closes
    else method2();
} 
```

所有这些方法的计算量都很大。根据输入数据和结果，程序可能只执行几个周期并引发“堆栈溢出”错误。

我已经更改了 VM 标志 -Xss ( `-Xss8M`) 但这并不能真正解决问题。

有没有办法让它几乎无限地工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T22:58:06.947

**Luiggi Mendoza 之前提到的解决方案：[如何避免堆栈溢出错误](https://stackoverflow.com/questions/15734657/how-to-avoid-stack-overflow-error?noredirect=1#comment22355674_15734657)**

当你调用reset时，它调用method1，它调用method2，它调用method3，它调用reset或method2都导致递归无限循环。

你可能想要：

```
if (jobDone) return; // here the cycle realy closes 
```

代替

```
if (jobDone) reset(); //here the do _not_ close 
```

如果你真的想要你的代码无限循环，这不会因为reset或methodi的方法调用而导致SO：

```
// assuming jobDone is actually a method, you might need this variable
boolean startReset = true;
while (true) {
        if (startReset) {
            //sets all variables to initial values
            //clears all arrays

            //doSomeStuff from method1;
        }
        //doStuff from method2

        //doStuff
        startReset = jobDone;
    }
} 
```

# objective-c - 为什么 init 不是类方法？

> ID：15734661
> 
> 赞同：1
> 
> 时间：2013-03-31T21:21:54.010
> 
> 标签：objective-c, cocoa, foundation

为什么`init`方法不是类方法？我的意思是`init`' 方法体以`-`. 据我所知，以实例方法开头`-`的方法，但显然我们想创建一个实例。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T21:26:57.610

`init`不是用于*创建*实例；这是`alloc`的工作（并且`alloc` *是*一个类方法）。

`init`用于*设置*创建的实例。它需要访问新实例的 ivars，并且*必须*是实例方法。

# objective-c - 如何将图像设置为 NSButton 以与按钮一起调整大小？

> ID：15734663
> 
> 赞同：2
> 
> 时间：2013-03-31T21:22:02.673
> 
> 标签：objective-c, image, macos, cocoa, nsbutton

我有一个图像（3width x 15height，第一个和最后一个像素在角上是圆角的），我想创建一个使用这个图像的按钮（按钮的高度始终相同，15px，但宽度会改变）不管它有多大，有点像`UIEdgeInsets`在 iOS 上。
我尝试使用`[[button cell] setImageScaling:NSImageScaleAxesIndependently];`，但图像失真并失去质量。
我怎样才能在 OSX 上做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:44:43.477

您可能可以创建一个自定义子类，并在单元格的方法中`NSButtonCell`使用 Application Kit 的[NSDrawThreePartImage()](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Miscellaneous/AppKit_Functions/Reference/reference.html#//apple_ref/c/func/NSDrawThreePartImage)函数。[`drawInteriorWithFrame:inView:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/occ/instm/NSCell/drawInteriorWithFrame%3ainView%3a)

有关如何使用的更多信息`NSDrawThreePartImage()`，请参阅[Cocoa 绘图指南：使用图像绘制可调整大小的纹理](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaDrawingGuide/Images/Images.html#//apple_ref/doc/uid/TP40003290-CH208-SW35)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T00:23:21.987

如果可以在图形界面 > 属性检查 > 按钮部分背景中进行设置

# java - 如何将此输出素数作为因子而不是所有因子？

> ID：15734674
> 
> 赞同：0
> 
> 时间：2013-03-31T21:22:41.050
> 
> 标签：java

我只需要将因子输出为素数。

```
public static void main(String[] args) {

    Scanner keyboard = new Scanner(System.in);
    System.out.println("Enter a number:");
    int theNum = keyboard.nextInt();

    int i;

    System.out.println("\nThe prime factors of " + theNum + " are:");
    for(i=1; i <= theNum/2; i++)

        if(theNum % i == 0)
    {

    System.out.print(i + " ");

    }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:54:17.413

You basically just need to check for prime numbers

Some prime-number check function I copied from [here](http://www.mkyong.com/java/how-to-determine-a-prime-number-in-java/):

```
boolean isPrime(int n) {
    //check if n is a multiple of 2
    if (n%2==0) return false;
    //if not, then just check the odds
    for(int i=3;i*i<=n;i+=2) {
        if(n%i==0)
            return false;
    }
    return true;
} 
```

Then just add the `isPrime(i)` check:

```
public static void main(String[] args) {
    Scanner keyboard = new Scanner(System.in);
    System.out.println("Enter a number:");
    int theNum = keyboard.nextInt();

    System.out.println("\nThe prime factors of " + theNum + " are:");

    for(int i = 1; i <= theNum / 2; i++)
      if (theNum % i == 0 && isPrime(i))
        System.out.print(i + " ");
} 
```

[Test](http://ideone.com/tnqrDS).

# asp.net-mvc - PartialView 呈现为新页面，而不是呈现在主视图上

> ID：15734675
> 
> 赞同：1
> 
> 时间：2013-03-31T21:22:45.133
> 
> 标签：asp.net-mvc, razor

我正在尝试创建一组级联下拉列表，我的主视图由一组两个部分视图组成：

```
@model  WebUI.Controllers.IndexViewModel
<script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>

<table cellpadding="0" cellspacing="4" border="0">
<tr>
    <td>Category </td>
    <td> :</td>
    <td>@Html.Partial("ParentsUserControl", Model)</td>
</tr>
<tr>
    <td>Sub - Category </td>
    <td> :</td>
    <td><div id="Children">@Html.Partial("ParentChildrenUserControl", Model)</div></td>
</tr>

</table> 
```

每个局部视图都有一个带有下拉列表的 AJAX 表单：

```
@model WebUI.Controllers.IndexViewModel

@using (Ajax.BeginForm("SelectParent", "Ticket", new AjaxOptions { UpdateTargetId = "Children" }))
{ 
@Html.DropDownListFor(
        m => m.SelectedParenId,
        new SelectList(Model.AvailableParents, "EstablishmentId", "Name"),
       string.Empty
    )
}

<script type="text/javascript">
$('#SelectedParenId').change(function () {
    $(this).parents('form').submit();
});
</script> 
```

问题是，只要我单击第一个列表中的一个项目，就会使用第二个局部视图呈现一个新页面，**我怎样才能让它在主视图内呈现局部视图而不生成新页面？， UpdateTargetId 指的是什么？**

以及**如何将用户选择的值发送回控制器？我创建的只是一张桌子，我应该把这张桌子放在一个表格里吗？**

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T09:21:02.890

你能检查一下 web.cnfig 文件中是否添加了以下键

```
<add key="UnobtrusiveJavaScriptEnabled" value="true"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T09:23:15.007

是的，如果您将表格放在表单中，框架将自动将您的所有模型值存储在模型包装器中。这称为模型绑定，您可以直接在控制器操作中使用它。

# symfony - 如何使用 Symfony 测试客户端检索流式响应（例如下载文件）

> ID：15734677
> 
> 赞同：18
> 
> 时间：2013-03-31T21:23:02.147
> 
> 标签：symfony, streaming, symfony-2.1, functional-testing

我正在用 Symfony2 编写功能测试。

我有一个控制器，它调用一个`getImage()`流式传输图像文件的函数，如下所示：

```
public function getImage($filePath)
    $response = new StreamedResponse();
    $response->headers->set('Content-Type', 'image/png');

    $response->setCallback(function () use ($filePath) {
        $bytes = @readfile(filePath);
        if ($bytes === false || $bytes <= 0)
            throw new NotFoundHttpException();
    });

    return $response;
} 
```

在功能测试中，我尝试使用[Symfony 测试客户端](http://symfony.com/doc/master/book/testing.html#working-with-the-test-client)请求内容，如下所示：

```
$client = static::createClient();
$client->request('GET', $url);
$content = $client->getResponse()->getContent(); 
```

问题是它`$content`是空的，我猜是因为响应是在客户端收到 HTTP 标头后立即生成的，而无需等待数据流被传递。

有没有办法在仍然使用`$client->request()`（甚至某些其他功能）将请求发送到服务器的同时捕获流响应的内容？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-08-16T16:14:55.443

*sendContent*（而不是*getContent* ）的返回值是您设置的回调。*getContent*实际上只是在 Symfony2 中返回*false*

使用*sendContent*您可以启用输出缓冲区并将内容分配给您的测试，如下所示：

```
$client = static::createClient();
$client->request('GET', $url);

// Enable the output buffer
ob_start();
// Send the response to the output buffer
$client->getResponse()->sendContent();
// Get the contents of the output buffer
$content = ob_get_contents();
// Clean the output buffer and end it
ob_end_clean(); 
```

[您可以在此处](http://www.php.net/manual/ref.outcontrol.php)阅读有关输出缓冲区的更多信息

StreamResponse 的 API 在[这里](http://api.symfony.com/2.3/Symfony/Component/HttpFoundation/StreamedResponse.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-26T10:12:54.500

对我来说不是那样工作的。相反，我在发出请求之前使用了 ob_start()，在请求之后我使用了 $content = ob_get_clean() 并对该内容进行了断言。

在测试中：

```
 // Enable the output buffer
    ob_start();
    $this->client->request(
        'GET',
        '$url',
        array(),
        array(),
        array('CONTENT_TYPE' => 'application/json')
    );
    // Get the output buffer and clean it
    $content = ob_get_clean();
    $this->assertEquals('my response content', $content); 
```

也许这是因为我的回复是一个 csv 文件。

在控制器中：

```
 $response->headers->set('Content-Type', 'text/csv; charset=utf-8'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-24T16:33:24.147

当前的最佳答案在一段时间内对我来说效果很好，但由于某种原因它不再适用了。响应被解析为 DOM 爬虫，二进制数据丢失。

我可以通过使用内部响应来解决这个问题。这是我的更改 [1] 的 git 补丁：

```
-        ob_start();
         $this->request('GET', $uri);
-        $responseData = ob_get_clean();
+        $responseData = self::$client->getInternalResponse()->getContent(); 
```

我希望这可以帮助某人。

[1]：您只需要访问客户端，这是一个 `Symfony\Bundle\FrameworkBundle\KernelBrowser`

# javascript - 随机 div 类顺序

> ID：15734688
> 
> 赞同：0
> 
> 时间：2013-03-31T21:23:31.963
> 
> 标签：javascript, jquery, class, html, random

正如许多人所建议的那样，我接受了他们的建议并修改了我的问题。我拿出了很多代码，现在只显示了最低限度。希望这足以和清楚地重新打开我的问题。

我有以下小提琴：http: [//jsfiddle.net/mauricederegt/vNpYe/5/](http://jsfiddle.net/mauricederegt/vNpYe/5/)

使用以下 HTML：

```
<div id="main" tabindex="1">
            <div class="tile tile1" block-id="1" style-id="1" style="left:0px; top:0px"></div>
            <div class="tile tile3" block-id="2" style-id="2" style="left:100px; top:0px"></div>
            <div class="tile tile1" block-id="3" style-id="1" style="left:200px; top:0px"></div>
            <div class="tile tile2" block-id="4" style-id="2" style="left:350px; top:0px"></div>
            <div class="tile tile2" block-id="5" style-id="2" style="left:0px; top:100px"></div>
            <div class="tile tile1" block-id="6" style-id="1" style="left:100px; top:100px"></div>
</div> 
```

我正在尝试将 div 类的顺序随机化。所以只是`class`part: `class="tile tile1"`， div 的所有其他项目都应该保持原样。

示例：随机化后的代码可能如下所示（注意只有`class`被打乱了）：

```
<div id="main" tabindex="1">
                <div class="tile tile3" block-id="1" style-id="1" style="left:0px; top:0px"></div>
                <div class="tile tile2" block-id="2" style-id="2" style="left:100px; top:0px"></div>
                <div class="tile tile1" block-id="3" style-id="1" style="left:200px; top:0px"></div>
                <div class="tile tile2" block-id="4" style-id="2" style="left:350px; top:0px"></div>
                <div class="tile tile1" block-id="5" style-id="2" style="left:0px; top:100px"></div>
                <div class="tile tile1" block-id="6" style-id="1" style="left:100px; top:100px"></div>
    </div> 
```

​如何让 div 的类以随机顺序显示？

希望这个问题现在更清楚了。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T23:33:25.973

首先，您需要一个 tile 类的数组。

```
var tiles = [],
tile_re = /tile(\d+)/;

$('.tile').each(function(i) {
    tiles[i] = this.className.match(tile_re)[0];
}); 
```

然后，您需要对类数组进行洗牌：

```
function shuffle(a)
{
  var t;

  for (var i = a.length - 1; i > 0; --i) {
    var p = Math.floor(Math.random() * (i + 1));
    if (p !== i) {
      t = a[i];
      a[i] = a[p];
      a[p] = t;
    }
  }
}

shuffle(tiles); 
```

最后，将结果合并回来：

```
$('.tile').each(function(i) {
  this.className = 'tile ' + tiles[i];
}); 
```

# html - 网站标题更改为什么不在 Facebook 上工作？

> ID：15734690
> 
> 赞同：0
> 
> 时间：2013-03-31T21:23:44.993
> 
> 标签：html, facebook, title

我想在我的 facebook 状态上分享我的网站。但是当我写 www.site.com 时，它会向我显示当我添加到我的网站到主机时我写的标题。但是当我写 www.site.com/index.html 时，一切都很好，它显示了我的网站标题。我该如何解决？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:37:11.153

Facebook 从您放置在您的 og 元标记中获取相关数据以显示

例如，如果你想设置一个你想让 Facebook 显示的标题，你可以添加：

```
<meta property="og:title" content="My Website Title!" /> 
```

也不要忘记添加这个：

```
<meta property="fb:app_id" content="1234567890" /> 
```

对于内容，您可以放置​​您的应用程序的 facebook_id 或 facebook_id。它将授予您访问洞察力和更多信息的权限。

干杯

# scope - 调用在书签中创建的函数

> ID：15734691
> 
> 赞同：5
> 
> 时间：2013-03-31T21:23:48.067
> 
> 标签：scope, bookmarklet, javascript

我正在尝试编写一个书签，它将 JSONP 调用添加到这样的页面中：

```
javascript:(function(){
var myFunction = (window.function(data){alert('my function is firing with arg' + data)});
var j = 'http://localhost/jsonscript.js';
var s = document.createElement('script');
s.src = j;
document.getElementsByTagName('head')[0].appendChild(s);
})(); 
```

附加到页面中的脚本 src 包含

```
myFunction('foo'); 
```

但是当我单击小书签时出现错误——myFunction 未定义。如何在我的书签范围之外“导出”该功能，以便从附加的脚本标签调用时它可以工作？

**编辑**：我发现我可以用原始 JavaScript 打包脚本元素的 innerHTML。这有效，但很丑陋。我仍然想找出更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T21:27:39.870

在窗口对象上定义函数：

```
window.myFunction = ... 
```

对于 JSONP 请求，您通常需要某种类型的计数器来增加，即：

```
var counter = 1;
var myFuncName = "myFunction" + counter;
var j = 'http://localhost/jsonscript.js?callback=' + myFuncName;
window[myFuncName] = function (data) {...};

// remove function after timeout expires
setTimeout(function () { delete window[myFuncName] }, 5000); 
```

# html5-audio - 使用 GetUserMedia 捕获麦克风

> ID：15734693
> 
> 赞同：1
> 
> 时间：2013-03-31T21:24:08.857
> 
> 标签：html5-audio, microphone, getusermedia

我正在使用 GetUserMedia 通过 Chrome 上的麦克风捕获用户输入（音频），但问题是现在我想从独立麦克风（不是本地内置 pc）捕获输入。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:32:11.547

尝试更改系统设置中的默认输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:36:10.947

我想目前 Chrome 只允许通过内置麦克风捕获音频输入。

# c# - 如何以编程方式从 system.webServer/modules 中删除元素

> ID：15734696
> 
> 赞同：1
> 
> 时间：2013-03-31T21:24:24.733
> 
> 标签：c#, web-config

我正在尝试在 c# 中以编程方式从 system.webServer/modules 部分中删除“删除”标签

web.config 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <modules>
            <remove name="XXX" />
            <add name="XXX" type="XXX, XXXX, Version=1.0.0.0, Culture=neutral, PublicKeyToken=5dff614f906107a2" />
        </modules>
    </system.webServer>    

</configuration> 
```

# php - 选择选项不是href，而是#id

> ID：15734698
> 
> 赞同：0
> 
> 时间：2013-03-31T21:24:30.793
> 
> 标签：php, jquery

我有一个选择框，选项值的构建方式类似。

```
<option value="#/page/<?=$count;?>" id="selector-page-<?=$count;?>">Page <?=$count-1;?> to <?=$count;?></option> 
```

在选择选项时需要将 #/page 值附加到 url，而不刷新页面。

在 href 上完美运行，但无法通过选项选择附加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:27:22.490

为什么不只`window.location.hash = '#/page';`在单击选项时使用？

给一个 CSS`class`或`id`你的`select`，然后你可以做这样的事情：

```
$('select#YOUR_SELECT_ID').change(function(){
   window.location.hash = $(this).val();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T21:29:07.497

Bind a function to whenever the select changes, the value will be updated, and you can set that as the location hash :

```
$('#your_select_id').on('change', function() {
    window.location.hash = this.value;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T21:29:36.093

# [jsFiddle](http://jsfiddle.net/mohammadAdil/X9L6Y/1/show/)

```
$("#selectId").on('change',function(){
  window.location.hash = $(this).val();
}); 
```

# c - 在 C 中，为什么多个声明对全局变量有效，但对局部变量无效？

> ID：15734699
> 
> 赞同：10
> 
> 时间：2013-03-31T21:24:36.467
> 
> 标签：c

在下面的代码中，为什么多个声明（和一个定义）对全局变量有效`x`，但对函数`y`内部的局部变量无效`main()`？它显示以下 2 个错误：

> 1) 重新声明 'y' 没有链接
> 
> 2) 之前的 'y' 声明在这里

为什么它显示局部变量而不是全局变量的错误？不仅是我的书，而且来自这个论坛的以下 2 个链接清楚地表明我们可以多次声明一个变量（尽管只定义一次）。

[链接1 链接](https://stackoverflow.com/questions/1433204/what-are-extern-variables-in-c) [2](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)

请注意解释第一个错误“没有链接的'y'的重新声明”的“没有链接”部分是什么意思？什么联系以及与谁联系？局部变量将链接到哪里？

```
 #include<stdio.h>

    int x;
    int x;
    int x=303;

    int main(void)
    {

      int y;
      int y;
      int y=776;   //Works fine if above 2 declarations are removed!!

      printf("The value of x is %d,and of y is %d",x,y);

    } 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-31T21:34:17.603

在 C 和 C++ 中，`int y;` **函数**内既是声明又是定义。

在 C 中，`int x;`在**文件范围内**（在任何函数之外）是声明和**暂定定义**。允许多个暂定定义；只允许一个**定义**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-31T21:34:32.317

这是 C99 标准第 6.2.2 节第 2 部分中定义的方式：

> 在构成整个程序的一组翻译单元和库中，具有外部链接的特定标识符的每个声明都表示相同的对象或函数。在一个翻译单元中，带有内部链接的标识符的每个声明都表示相同的对象或函数。没有链接的标识符的每个声明都表示一个唯一的实体。

“全局”变量`x`具有外部链接，因此它们表示同一个对象。`y`另一方面，局部变量没有链接，因此存在冲突。

参考文献：[C99 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-31T21:57:28.077

对于外部变量，任何不是初始化的声明都是暂定定义。这些本身不会创建任何存储，因此允许多个存储。以你为例：

```
int x;      // tentative def
int x;      // and again -- ok
int x=303;  // definition -- ok
int x=303;  // multiple definition -- error 
```

如果在文件末尾只有暂定定义，则变量定义一次，并设置为 0。

这意味着如果您链接到另一个也具有 的暂定定义的文件，`x`根据标准，您将遇到错误。但是，大多数编译器/链接器始终允许这样做，并且在标准中将其定义为扩展。

对于局部变量，由于范围规则，每个声明都是一个定义。但是，这是允许的：

```
void func(void)
{
   int y = 0;
   {
      int y = 1;   // a completely different y
   }
} 
```

# authentication - 如何使用 Clojure Friend 库将当前用户会话绑定到动态变量？

> ID：15734700
> 
> 赞同：2
> 
> 时间：2013-03-31T21:24:50.560
> 
> 标签：authentication, clojure

我正在使用 Clojure 的[Friend Authentication Library](https://github.com/cemerick/friend)将 HTTP 基本身份验证添加到我的 webapp。

我在一个模块中有一组数据库访问函数，`db.clj`它抽象出当前用户，因此我可以调用诸如`(db/get-item ...)`检索当前用户的项目之类的方法，而无需显式指定用户。我通过定义一个名为`*username*`. 这使我可以轻松地在 REPL 中为不同用户测试数据库访问功能，然后 webapp 代码可以`*username*`在调用 db 函数时重新绑定到会话用户。

我需要`*username*`为当前会话绑定到用户，以便每当`db.clj`从 Web 服务器请求访问函数时，`*username*`var 设置正确。

我可以从中获取会话用户名，`((friend/current-authentication) :username)`但我不知道在哪里可以将其连接到网络服务器代码中。我有一个简单的中间件：

```
(defn wrap-username [app]
  (fn [req]
    (binding [*username* (friend/current-authentication :username)]
      (app req)))) 
```

但无论我从哪里调用这个中间件，`current-authentication`总是返回`nil`.

我试图了解朋友身份验证代码的工作原理，以确定进行绑定的正确位置，但到目前为止我还没有弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:02:17.963

我猜你调用的方式`current-authentication`不正确，因为文档说你需要将当前请求传递给这个函数，所以它应该是这样的：

```
(binding [*username* ((friend/current-authentication req) :username)] ... 
```

还要确保在您的用户名中间件之前应用朋友中间件。

# windows-installer - 使用 cx-freeze 创建一个添加快捷方式到桌面的 msi

> ID：15734703
> 
> 赞同：17
> 
> 时间：2013-03-31T21:25:20.847
> 
> 标签：windows-installer, cx-freeze

我正在使用 cx-freeze 为 Python 应用程序创建 MSI 安装程序。如何从桌面安装指向应用程序的链接？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-01T01:15:03.597

要创建应用程序的快捷方式，请将**shortCutName**和**shortcutDir**选项提供给可执行文件。**shortcutDir**可以命名任何系统[文件夹属性](https://docs.microsoft.com/en-us/windows/win32/msi/property-reference#system-folder-properties)（感谢 Aaron）。例如：

```
from cx_Freeze import *

setup(
    executables = [
        Executable(
            "MyApp.py",
            shortcutName="DTI Playlist",
            shortcutDir="DesktopFolder",
            )
        ]
    ) 
```

您还可以将项目添加到 MSI 快捷方式表。这使您可以创建多个快捷方式并设置工作目录（快捷方式的“开始”设置）。

```
from cx_Freeze import *

# http://msdn.microsoft.com/en-us/library/windows/desktop/aa371847(v=vs.85).aspx
shortcut_table = [
    ("DesktopShortcut",        # Shortcut
     "DesktopFolder",          # Directory_
     "DTI Playlist",           # Name
     "TARGETDIR",              # Component_
     "[TARGETDIR]playlist.exe",# Target
     None,                     # Arguments
     None,                     # Description
     None,                     # Hotkey
     None,                     # Icon
     None,                     # IconIndex
     None,                     # ShowCmd
     'TARGETDIR'               # WkDir
     )
    ]

# Now create the table dictionary
msi_data = {"Shortcut": shortcut_table}

# Change some default MSI options and specify the use of the above defined tables
bdist_msi_options = {'data': msi_data}

setup(
    options = {
        "bdist_msi": bdist_msi_options,
    },
    executables = [
        Executable(
            "MyApp.py",
            )
        ]
    ) 
```

# html - Firefox 在 Aptana 中看不到 CSS/HTM 链接

> ID：15734710
> 
> 赞同：0
> 
> 时间：2013-03-31T21:26:22.597
> 
> 标签：html, css, firefox, hyperlink, preview

当我尝试在 Aptana 中查看时，为什么 Firefox 看不到 HTML 和 CSS 之间的链接？我已经清空了 Firefox 中的缓存，检查了文件是否在同一个文件夹中，双重和三重检查了代码结构和 html 页面标题中的位置，并尝试将 Safari 作为预览浏览器。我正在本地驱动器上工作。Firefox 和 Safari 可以很好地查看和阅读 html 页面，但没有一个 CSS 样式属性是“级联的”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:42:00.937

听起来令人沮丧，但总有一个解决方案（我猜），

首先，css文件的链接是否正确？

其次，链接是否在标题内？将文件放在正文中可能会影响结果。

第三，在firefox中加载页面，在页面上右击选择查看页面源。找到指向您的 css 文件的链接并从那里检查绝对路径（单击它并查看您的 css 文件是否确实存在）。

可能语法错误，尝试在样式表链接中使用 href="./style.css"。

希望这可以帮助

# grid - 集群 vs 网格 vs 云

> ID：15734713
> 
> 赞同：8
> 
> 时间：2013-03-31T21:26:49.377
> 
> 标签：grid, cloud, cluster-computing

有两个问题：

1）集群和网格有什么区别 2）什么是云

我不是在寻找概念定义，我通过谷歌搜索找到了很多，但问题是我仍然不明白。所以我相信我寻求的答案是不同的。从我可以在网上重新搜索的内容来看，我开始认为许多试图解释这一点的文章作者要么自己不够深入地理解这一点，要么无法为像我这样的普通人解释他们的知识（这是非常常见的问题）技术人员）。

只是让你知道我的水平：我是一名计算机程序员，.NET 和 LAMP，我可以在 Linux 和 Windows 上做基本的管理员，我有 Hyper-V 的实践经验，现在正在研究 Xen 和 XCP 来设置测试基于两台计算机的云，用于学习目的。

下面的信息您不必阅读，这只是我目前对集群、网格和云的理解，它只是为了支持我的两个问题，因为我认为这将有助于了解我现在脑子里有什么样的混乱以及我的答案是什么我正在寻找。

谢谢你。

* * *

我的陈述中用作参考的两台计算机是“A”和“B”

A 规格：2 核英特尔 CPU，8GB 内存，500GB 磁盘

“B”规格：2 核英特尔 cpu，8GB 内存，500gb 磁盘，

* * *

现在我想从集群、网格和云的角度来看看 A 和 B 角色。

Grid和Cloud之间的共同定义

1）集群或网格是连接在一起的两台或多台计算机，在硬件层面上，它们通过网卡连接起来，在软件层面上，它使用某种程序实现消息传递接口，以便在节点之间发送命令。

2) 集群或网格不结合节点之间的 CPU 功率或内存，这意味着在此模拟中，在 A 上运行的 FireFox 浏览器仍然只有一个 2 核 cpu、8GB 内存和 500gb 可用。

网格和云的区别：

1）集群仅提供故障转移部分，如果A节点在FireFox运行时发生故障，集群软件将在节点B上重新启动FireFox进程。

2) 然而，只要考虑到 MPI 对软件进行编码，Grid 就能够同时在多个节点上并行运行软件。它还可以按需在任何节点上午餐任何软件（即使它不是为 MPI 编写的）

3) Grid 还能够将不同类型的节点、Linux Server、Windows XP、Xbox 和 Playstation 组合成一个 Grid。

云定义：

1）云根本不是一个技术术语，它只是一个简短的方便的词来描述无限资源的计算机，它也可以称为超级计算机，野兽，海洋或宇宙，但有人先说“云”，然后在这里我们是。

2）云可以基于网格或集群

3）从技术角度来看，Cloud是一种将硬件资源合二为一的软件，也就是说，如果我在Grid或Cluster上安装Cloud软件，那么它将A和B合二为一，我会得到一个像这样的Cloud：4核CPU，16gb内存和 1000GB 磁盘。

编辑：2013.04.02 item 3) 完全是胡说八道，云不会将来自许多节点的资源组合成一个巨大的资源，因此在这种情况下将没有 4 核 CPU、16gb 内存和 1000gb 云。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-06T14:58:35.373

网格计算旨在将大量工作负载分配给许多参与的网格成员——通过每个成员上的软件，每个成员都希望听到计算或数据的请求，并用它来回复整个难题的一小部分。必须专门为这种解决问题的方法编写应用程序。它可能是异构的，因为重要的不是操作系统，而是等待听到解决问题请求的软件。

集群的期望是它可以在任何成员节点上运行相同的可执行映像——任何节点都可以执行该代码——这正是其对同质性要求的驱动因素。您可以编写集群感知代码，将工作负载分布在整个集群中，但是您必须再次编写代码以感知集群，以便利用集群的冗余特性。由于大多数应用程序供应商不编写集群感知代码，因此简单的冗余特性是集群部署中常用的全部，但这并不限制架构。集群可以并且确实共享它们的资源，并且可以同时协作完成任务。

云，正如它通常定义的那样，准确地说，两者都不是，但它也不排除它们。云计算假定能够在不了解应用程序的底层操作系统甚至控制该操作系统的情况下部署应用程序，并能够扩展或减少该应用程序可用的处理和内存占用，而无需破坏和重新创建该应用程序环境——所有这些都是在足够的隔离下完成的，应用程序不会知道或无法知道其他应用程序可能安装或运行在它的共享基础架构上，除非两个应用程序管理器都批准了访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:21:21.450

我想在此问题作为副本关闭之前回答我的问题，因为我相信找到关于集群、网格和云的正确信息会非常令人沮丧，我认为这篇文章可以为许多人节省时间。如果有人想挑战它，请这样做，否则我会在 1 周内将其标记为答案。

1) 有很多不同，实际上没有，这取决于技术背景，但通常您可以连接多个节点并将其称为 Grid 或者您可以将其称为 Cluster。我会说网格是一个具有扩展功能的集群，例如连接异构节点的能力。Grid 和 Cluster 都可以作为横向扩展平台同样出色。从网络工程师和程序员的角度来看，如果 Grid 连接异构节点，实现或编码的差异将非常大。

2）现在第一个问题实际上是第二个问题的前奏，我相信马特乔伊斯在这篇文章中回答得最好： [https ://stackoverflow.com/a/15286488/2230126](https://stackoverflow.com/a/15286488/2230126)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-29T17:18:11.817

我会试一试。自公元 2002 年以来，我一直在收集和保存我的笔记、脚本和程序。这是我多年来的陈述的印章和粘贴。这是一个大脑友好的记忆列表：

1.  网格是硬件和硬件规格。

    一个。您插入路由器或交换机并通过互联网（也称为 ICANN）设置 IP 地址和顶级域。

    湾。这就像 OSI 级别 1、2 和 3。

2.  集群是内核（软件环 0 或 1，如果它是虚拟类型的事情）。

    一个。内核被配置（编译）以运行可以处理会话、权限和帐户身份验证的网络堆栈。

    湾。您通常通过 TCP/IP 设置端口到端口的通信（如在 OSI 模型中）。

    C。您设置`iptables`、`pf`、 arp 和其他操作系统级别的应用程序或共享对象。

    d。您可以设置 ssh、kerberos、ldap 或其他一些 PKI 数据库和协议套接字组合。

    e. 这就像 OSI 级别 4、5 和 6。

3.  云是用户空间应用程序。

    一个。应用程序进程与集群内的其他应用程序进程通信。

    湾。您设置进程级别的权限（通过文件、cgroup 和/或用户组）。

    C。您设置 mysql、redis、riak、Message Brokers、hadoop、apache、nginx、cron、java、haskell、erlang 等。

    d。这就像 OSI 7 级。

云漂浮在从网格中生长出来的集群上。并且实际上在视觉上认为，天空中的云，树中的簇，地面上的网格。我们中的大多数创意类型（制造所有这些技术）都是视觉思想家，可以用数学数据和代码来支持它。所以总是看看你是否能回答这个谜题，并将技术传真与我们在地球上的物理领域联系起来。

**介绍**

*Grid、Cluster 和 Cloud 是三个不同的词，标志着它们在历史上的特定时间*。它们的定义具有交叉的特征，并且它们在现代是可以互换的。您只需要知道何时应用正确或相关的词。例如，我正在与一些年长的 MD（医生）交谈，他们想知道云是什么。所以我告诉他们，云是你通过互联网租用的计算机集群。而宾果游戏，他们在 10 秒内得到了这个想法。

我将在按时间顺序的散文中使用一点历史。

**网格**

*术语网格首先用于表示一种在陆地景观或空间中重复出现的资源*。该术语在电报分发过程中经常使用，其中中继器必须放置在每 N 个半径（半径的复数）的杆上以放大信号。另一个例子是托马斯爱迪生和尼古拉特斯拉竞争性地开始在地球周围传播的电网。*计算机变得非常流行，它们很快在整个网格中扩展，以取代人工电报（和电话）操作员。* *网格现在是一堆可以连接和终止通信通道的计算机。*网格是一种计算机基础设施，其功能是为了一个目标，即运行汇编（或二进制）代码。

**簇**

DARPA（或 ARPA，即美国军方）预见到计算机的力量并实际见证了计算机赢得战争（图灵的机器）。DARPA *开始委托大学和学院利用 Grid 进行多路复用通信方法（使用波特和协议）。*大学和学院开始制定协议，以分离他们希望通过网格执行的不同任务并以计算机为目标。这开始了现代互联网。*在实验室建立了内部测试集群来模拟电网。*集群非常适合编排。可以将作业细分到集群中的所有或部分从属服务器上。军方利用学院和大学的调查结果并将该软件应用于网格。集群有一些陷阱：

1.  *必须是相同（或几乎相同）的硬件*
2.  *必须有相同的操作系统*

规则很严格，因为所有指令集都必须以相同的方式通过 CPU。集群通常具有主从类型关系。一个集群通常一次运行一个 unic（或 unix）`job`。*集群有作业调度器。*然后集群变得更加复杂，因为硬件制造商开始制作并行芯片架构（在冯诺依曼拱门之上）。集群变得更加强大。集群继承了更多的复杂性，人们正在做更多创造性的事情。集群现在可以做不同的工作、任务、流程、异步流程、同步流程以及更多有趣的事情。一个盒子（或计算机节点）可以运行更多的工作。现在网格可以用于多种用途。集群上的软件更新速度比实际网格要快。集群在校园本地部署。集群开始取代网格，因为您可以直接生成一个性能优于（国家）网格的面向公众的堆栈。

*我的经验*

我在 1990 年代末和 2000 年代上大学，*集群是多台计算机作为一台虚拟计算机工作的物理实验室的词。集群用于测试。*一旦您的软件在集群上运行，您就可以`mv`（移动）它到生产级网格。然后我见证了网络蠕虫和计算机病毒控制僵尸计算机。这些僵尸群可以作为一个巨大的虚拟集群来运行命令。好吧，程序员开始 DIY（自己动手）协议和软件，如 bit-torrent 和 Napster。因此，跨入未来，*测试集群软件开始被 Solaris jails、FreeBSD jails、Linux 容器、QEMU、hyper-visors、VMWare、VirtualBox、Vagrant 和 Docker 所取代*。

**云**

云是一个营销术语，用于涵盖不同网格的硬件和这些集群的软件。*云是一个无处不在的大词，用于宣传、推广和宣传所有集群技术以获取金钱收益。*云也是一种将所有这些技术包装在一个单一词中的努力。云允许多租户进程共享一个巨大的网格。*云通过细分消费者共享和支付的电力、CPU、RAM、磁盘、电力和宽带来最大限度地提高效率。副作用是那些消费者订阅和/或付费率开始产生利润。云还允许多个用户安装多个操作系统，这些操作系统都在软件中运行多个进程。*所以现在我们有了 IaaS、PaaS 和 SasS 等首字母缩略词。*云可以取代曾经非常难以获得资金和引导的启动成本。*Cloud 是模拟测试您的软件和为您的企业建立消费者基础的绝佳解决方案。

从另一个角度来看，云会触发非程序员的大脑以某种方式思考。例如，人力资源部门可以理解和隔离呈现在他们面前的内容。

因此，如果您有钱，那么您可以购买您的云体验份额并获得轻松的支持。但是，如果您有技能、时间、快速的专业知识以及在托管位置安装自己的服务器的能力，那么就这样做，因为从长远来看它更便宜。

这就是我对 Grid vs Cluster vs Cloud 的叙述。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-18T21:20:45.963

我认为这个[链接](http://www.dba-oracle.com/real_application_clusters_rac_grid/grid_vs_clusters.htm)很好地比较了集群和网格。

据我所知，集群有一些例外。YARN（雅虎！）尝试处理多租户和分布式调度。Corona（Facebook）也有分布式调度。

# c++ - 为什么操作系统分配的内存超出了小型可执行文件所需的内存？

> ID：15734715
> 
> 赞同：0
> 
> 时间：2013-03-31T21:26:50.797
> 
> 标签：c++, c, memory, memory-management

好的，所以我编写了这个最小的 C 代码并在发布模式下将其编译为可执行文件

```
1.void main()
2.{ for(;;); } //this is here to make the app hang. 
```

可执行文件本身大小为 6kb，我没有包含任何标题。即使整个exe文件被复制到内存中，显然它不应该占用超过7 kb，但是操作系统分配了320 kb，这是为什么呢？我正在使用窗户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:33:17.037

看起来你很困惑并混合了各种各样的概念。让我试着解释一下：

*   该程序很明显是一个无限循环，它解释了为什么它没有结束（或者你所说的“挂起”）。
*   编译器/链接器仍然需要为你的操作系统编写一个有效的可执行文件，这涉及到一堆头文件和东西，很容易消耗 6kb。
*   目前主流操作系统中的 320kb 似乎几乎没有，主要是操作系统开销。在不知道什么操作系统的情况下很难说更多。

我强烈建议您反汇编您的代码。另一种选择是使用您的编译器选项来优化可执行文件大小。我认为底线是您期望由于您的程序没有做任何有用的事情，它的大小应该为零，这是一个不合理的期望。

# python - 关闭 SQLObject 连接

> ID：15734718
> 
> 赞同：0
> 
> 时间：2013-03-31T21:27:08.327
> 
> 标签：python, sqlobject

是否可以在打开 SQLObject 连接后手动关闭它？我试图在使用数据库文件后删除它，但似乎与数据库文件的打开连接阻止了我这样做。

例如：

```
from sqlobject import *
import os

# Create and open connection to a database file.
sqlhub.processConnection = connectionForURI('sqlite:path_to_db')
SomeObject.createTable()

# ...

# Delete database when finished.
os.remove('path_to_db') 
```

给出以下错误：

```
WindowsError: [Error 32] The process cannot access the file because 
              it is being used by another process: 'path_to_db' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T23:26:59.747

似乎只是调用`.close()`数据库连接似乎可以解决问题：

```
from sqlobject import *
import os

# Create and open connection to a database file.
sqlhub.processConnection = connectionForURI('sqlite:path_to_db')

#do something with connection
pass

#close connection
sqlhub.processConnection.close()

#delete database
os.remove(path_to_db) 
```

[我只能在这里](http://www.sqlobject.org/SQLObject.html)找到一点关于该`close`方法的信息，但可以公平地说，您可以像对待任何其他对象一样对待它。不过我没有太多经验，在解释器中，您仍然可以在分配后立即删除数据库，而无需关闭它，所以谁知道。`file``sqlobject``processConnection`

# ios - ios Event Kit 使用我自己的通知

> ID：15734732
> 
> 赞同：0
> 
> 时间：2013-03-31T21:28:28.603
> 
> 标签：ios, push-notification, eventkit

使用 Apple 的[EventKit.framework](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EventKitFrameworkRef/_index.html)，通知只能来自日历应用程序和提醒应用程序。有什么方法可以制作我自己的通知但使用 Apple 的日历数据库？我的意思是通知将来自我自己的应用程序...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:33:41.843

您可以使用 EventKit 在内置日历数据库中注册事件，但使用[iOS 本地通知](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)来实际安排通知，以便它来自您的应用程序。

但除此之外，没有办法将您的应用程序设置为在显示标准 EventKit 存储的事件通知时打开。

# c++ - 如何静态和动态链接库 C/C++

> ID：15734736
> 
> 赞同：-1
> 
> 时间：2013-03-31T21:29:17.007
> 
> 标签：c++, c

我刚学完 c 和 c++，我发现自己爱上了这两种中级语言。所以我决定做一个涉及两种语言的项目。但是在将 .lib 和 .dll 文件链接到可执行文件时，我遇到了麻烦。我知道在使用 Visual Studio 时，我们只使用 #pragma 注释 (lib, libname) 。但是我们如何使用 g++ 将 tokenizer.lib 链接到 main.cpp？我在 Windows 上工作。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:36:02.453

如果您询问 g++，那么您将使用 -L 和 -l 钩子。例如：

```
g++ -o prog main.cpp -L/usr/local/lib/ -llibname 
```

后面`-L`的内容是您的 .lib 文件所在的路径。如果在几个不同的目录中找到它们，您可以使用分号 (;) 分隔 . 之后的目录`-L`。

# c# - C# 代理服务器无法正常工作

> ID：15734738
> 
> 赞同：1
> 
> 时间：2013-03-31T21:29:41.663
> 
> 标签：c#, sockets, .net-3.5, proxy

我正在使用套接字在 .NET 中的代理服务器上工作，并且我发现了对代码执行非常感兴趣的时刻：

1.  当我逐步调试代码时 - 代理服务器工作正常
2.  当我在没有调试的情况下启动代理服务器时 - 我在浏览器中出现错误。

我真的不知道为什么它像我上面描述的那样工作。也许，有人已经解决了这个问题？

这是我的代理服务器的代码：

```
using System;
using System.Collections.Generic;
using System.Net;
using System.Net.Sockets;
using System.Text;
using System.Threading;

namespace Statistiks.Lib
{
    internal class NetworkMonitor
    {
        private readonly IList<string> _denied;
        private readonly Socket _srvSocket;
        private readonly Thread _srvThread;

        public NetworkMonitor(int port, IList<string> deniedList)
        {
            _denied = deniedList;
            _srvSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream,
                                    ProtocolType.Tcp);
            _srvSocket.Bind(new IPEndPoint(IPAddress.Loopback, port));
            _srvThread = new Thread(ProxyServerThread);
            _srvThread.Start(_srvSocket);
        }

        private void ProxyServerThread(object obj)
        {
            var srv = obj as Socket;
            srv.Listen(1024);
            while (true)
            {
                Socket clientSocket = srv.Accept();
                ThreadPool.QueueUserWorkItem(cSocket =>
                    {
                        var client = cSocket as Socket;
                        if (client.Available <= 0)
                        {
                            client.Shutdown(SocketShutdown.Both);
                            client.Close();
                            return;
                        }
                        var recieveBuf = new byte[client.Available];
                        client.Receive(recieveBuf, SocketFlags.None);
                        var ni = new NetworkInfo();
                        try
                        {
                            ni.Url = new Uri(Encoding.ASCII.GetString(recieveBuf)
                                                     .Split(new[] {"\r\n"}, StringSplitOptions.RemoveEmptyEntries)[0]
                                                 .Split(' ')[1]);
                        }
                        catch (ArgumentOutOfRangeException)
                        {
                            client.Shutdown(SocketShutdown.Both);
                            client.Close();
                            return;
                        }
                        var forwardedSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream,
                                                         ProtocolType.Tcp);
                        forwardedSocket.Connect(Dns.GetHostAddresses(ni.Url.Host)[0], ni.Url.Port);
                        forwardedSocket.Send(recieveBuf, SocketFlags.None);
                        recieveBuf = new byte[forwardedSocket.Available];
                        forwardedSocket.Receive(recieveBuf, SocketFlags.None);
                        client.Send(recieveBuf, SocketFlags.None);
                        forwardedSocket.Shutdown(SocketShutdown.Both);
                        forwardedSocket.Disconnect(false);
                        client.Shutdown(SocketShutdown.Both);
                        client.Disconnect(false);
                        forwardedSocket.Close();
                        client.Close();
                    }, clientSocket);
            }
        }
    }

    internal struct NetworkInfo
    {
        internal Uri Url;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:36:44.833

调试器下的不同结果可能是因为您的所有数据都适合套接字缓冲区，并且调试的额外延迟允许所有数据在调用`Receive`.

然而，在正常执行下，情况并非如此。数据将以数据包的形式到达，为了知道数据的结尾在哪里，您必须解析您的 HTTP 请求。Socket 的属性只表示此时缓冲区*中有*`Available`多少数据，而不是整个消息的长度。虽然使用原始套接字绝对可以读取，但使用 a 更容易：*`NetworkStream`*

 *```
IEnumerable<string> ReadRequestHeaders(Socket s)
{
    using (var stream = new NetworkStream(s, false))
    using (var reader = new StreamReader(stream))
    {
        while (true)
        {
            var line = reader.ReadLine();
            if (line == "")
                break;

            yield return line;
        }
    }
} 
```

HTTP 消息的其余部分也是如此——为了正确转发它，您必须知道它在哪里结束，这意味着理解 Content-Length 或 Transfer-Encoding 字段并进行相应的解析。*

# c# - 数组错误错误“无效的等级说明符：预期的'，'或']”

> ID：15734739
> 
> 赞同：0
> 
> 时间：2013-03-31T21:29:48.300
> 
> 标签：c#, visual-studio-2012, compiler-errors

我正在做我的作业。我被分配创建一个井字游戏应用程序，我已经完成了，但是有一个小错误，我认为我忽略了一些东西，但我无法弄清楚，需要一些新的眼睛来检查它，因为我我想我看它太久了，错过了一个大概念。

```
 Random r = new Random();//Creates the number generator.
        int [][] numbers = new int [3][3]; //creates a 3x3 integer grid.
        for (int i = 0; i< numbers.Length; i++){
        for (int j=0;j<numbers[i].Length;j++){
        numbers[i][j] = r.Next(2);//Traverses the array and inputs a number between 0 and 1 here. 
```

} }

```
 Console.WriteLine("%d|%d|%d\n",numbers[0][0],numbers[0][1],numbers[0][2]);

        Console.WriteLine("------");
        Console.WriteLine("%d|%d|%d\n",numbers[1][0],numbers[1][1],numbers[1][2]);

        Console.WriteLine("------");
        Console.WriteLine("%d|%d|%d\n",numbers[2][0],numbers[2][1],numbers[2][2]); 
```

错误在第二行。也许我做了 int [][] numbers = new int [][]; 格式不对？请帮我找出问题所在。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:39:31.007

声明数组时试试这个：

```
int [,] numbers = new int[3,3]; 
```

您还需要更改对数组的访问权限：

```
numbers[i,j] = r.Next(2); 
```

要迭代数组，您可以使用`numbers.GetLength(index)`method 而不是`numbers.Length`and `numbers[i].Length`。

在你的情况下，它会是这样的：

```
for (int i = 0; i < numbers.GetLength(0); i++)
{
    for (int j = 0; j < numbers.GetLength(1); j++)
    {
        ... 
```

编辑：如果你真的想保留你的数组数组（也称为锯齿数组），你可以像这样初始化它：

```
 int[][] numbers = new int[3][] 
                   {   
                       new int[3],
                       new int[3],
                       new int[3]
                   }; 
```

# php - IOS 推送通知：发送此有效负载时未收到任何推送

> ID：15734742
> 
> 赞同：0
> 
> 时间：2013-03-31T21:29:51.737
> 
> 标签：php, iphone, ios

当我尝试发送以下有效负载以在 iphone 上生成推送通知时，我收到一条成功消息，但没有收到任何推送通知。

我想知道这个有效载荷的格式是否有效？

```
{
    "aps": {
        "alert": "green commented on your post: 'push post for tim'. Comment is: hey hi!",
        "sound": "default"
    },
    "type": "comment",
    "post": {
        "post_id": "168",
        "post_title": "push post for tim",
        "post_content": "testing push",
        "post_status": "1",
        "is_favorite": "0",
        "post_comment_count": "9",
        "username": "test1",
        "category": "uncategorized",
        "relevancy": "0%",
        "creator_num": "85",
        "type": "Manual",
        "lat": "0.000000",
        "lon": "0.000000",
        "auto_end_date": "0000-00-00",
        "access": "Private",
        "post_image": "http://thepost.com/admin/uploads/thumb/post_default.jpg",
        "post_comments": "9"
    }
} 
```

当我仅发送此有效负载时，推送正在工作：

```
{
    "aps": {
        "alert": "green commented on your post: 'push post for tim'. Comment is: hey hi!",
        "sound": "default"
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:46:37.653

通知有效负载的最大大小为 256 字节。APNS 将拒绝任何超过限制的通知。您的有效负载是 567 字节，这就是您没有看到通知通过的原因。

来源：http: [//developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)

# vb.net - 无限循环/重复脚本？

> ID：15734743
> 
> 赞同：0
> 
> 时间：2013-03-31T21:29:58.097
> 
> 标签：vb.net, loops, browser, refresh

我在 Visual Basic 中有一个脚本，我似乎无法让它重复/循环。我希望脚本在单击给定变量后重复，然后刷新页面。然后页面刷新并且刻度为 0，但我希望脚本再次重复（无限）。这是我正在处理的脚本：

```
Private Sub Timer1_Tick(ByVal sender As System.Object,
                        ByVal e As System.EventArgs) Handles Timer1.Tick
  If Not number_of_ticks > 100 Then
    number_of_ticks += 1
    WebBrowser1.Document.GetElementById("claimIt").InvokeMember("Click")
  Else
    'number_of_ticks has exceed the maximum amount of allowed ticks
    Timer1.Enabled = False
    WebBrowser1.Refresh()
    number_of_ticks = 0
  End If
End Sub 
```

但是当我尝试做一个循环时，它不起作用，程序变得无响应：

```
Private Sub Timer1_Tick(ByVal sender As System.Object,
                        ByVal e As System.EventArgs) Handles Timer1.Tick
  Do
    If Not number_of_ticks > 100 Then
      number_of_ticks += 1
      WebBrowser1.Document.GetElementById("claimIt").InvokeMember("Click")
    Else
      'number_of_ticks has exceed the maximum amount of allowed ticks
      Timer1.Enabled = False
      WebBrowser1.Refresh()
      number_of_ticks = 0
    End If
  Loop
End Sub 
```

我不知道为什么会发生这种情况，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:06:41.403

你`Do-Loop`会导致程序永远卡住。也许您应该在您的方法中重新启用计时器：

```
Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    If Not number_of_ticks > 100 And Not WebBrowser1.IsBusy Then
        number_of_ticks += 1
        WebBrowser1.Document.GetElementById("claimIt").InvokeMember("Click")
    Else
        'number_of_ticks has exceed the maximum amount of allowed ticks
        Timer1.Enabled = False
        WebBrowser1.Refresh()
        number_of_ticks = 0

        ' re-enable the timer to repeat again
        Timer1.Enabled = True
    End If
End Sub 
```

# ruby-on-rails - 如何避免在视图/显示中嵌入 javascript

> ID：15734748
> 
> 赞同：1
> 
> 时间：2013-03-31T21:30:36.203
> 
> 标签：ruby-on-rails, backbone.js

我有一个 Rails 应用程序，它使用 javascript (Backbone) 在每个用户个人资料页面 /views/users/show.html.erb 上显示用户特定数据。我通过将 <%= @user.id %> 作为数据参数传递给 Backbone 的 fetch 函数来做到这一点，但是，我知道如何将 <%= @user.id %> 放入 Backbone 的 fetch 函数的唯一方法是嵌入每个views/users/show.html.erb 页面中的javascript，因此允许Backbone 为每个views/users/show.html.erb 页面加载不同的用户特定信息。虽然这可行，但它似乎是错误的做法，因为我已经读过我不应该像这样嵌入 javascript。此外，我将不得不做很多事情，因为我希望显示很多不同类型的数据，比你在下面看到的要多。所以 show.html.erb 页面将充满 javascript 以使应用程序按我希望的方式运行。

问题：我如何才能将@user.id 放入 Backbone 的每个用户显示页面的 fetch 函数中，而无需像我所做的那样嵌入 javascript。在评论中，有人建议我使用 app/assets/javascripts/user.js，但我不知道如何将 <%= @user.id %> 放入该文件。@user.id 在 show.html.erb 中很容易获得

```
<script type='text/javascript'> 
    $(document).ready(function() {

       app.collections.awardCollection.fetch({ data: $.param({ user_id: <%= @user.id %> }) }).complete(function(){ 
      app.views.awardCollection = new app.Views.awardCollection({ collection : app.collections.awardCollection});
       app.views.awardCollection.render() 
    });
           });
  </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:44:50.187

我看到 Luís Ramalho 和 Gon 的评论是一个不错的选择，但我建议使用以下方法：

1.  如果变量 from 不会更改，请在 app/assets/javascripts 中的 .js.erb 文件下使用 <%= %> 打印它（请注意，它将被缓存，直到您重新启动应用程序）
2.  如果您需要服务器变量，最好的方法是使用 Ajax
3.  您可以在 app/assets/javascripts 上的 .js 文件上定义函数并从视图中调用这些函数
4.  如果您真的不希望视图中有任何 Javascript 代码，您可以在 app/assets/javascripts 上的 .js 上创建函数（对应于视图，用于排序），并使用事件和/或将变量存储在 hidden字段（甚至使用 HTML5 中的 data 属性）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T23:34:21.790

为了了解视图的工作原理，您可以根据需要向视图添加任意数量的扩展，并且它们将由正确的库解析。

如果你创建一个像

```
my_view.haml.erb 
```

它将首先用 ruby​​ (erb) 解析，然后用 haml 解析，并以 html 页面结束。

您可以为 js 创建许多视图，通常您希望在执行 ajax 时将其存档，这样您就可以结束 js 视图，例如：

```
my_view.js.erb 
```

首先将解析 ruby​​（所有 <% %> 标记），以纯文本结尾，然后服务器将提供 .js 文件。但这通常是 ajax 的常见任务。

如果你必须渲染一个 html 页面，你想在其中放置一些 js 并且你需要一些 ruby​​ 代码，我通常做的是将数据放在带有隐藏 div 的 html 内容中。

您可以放入任何视图（如果您希望它在全球范围内可用，甚至在您的布局中），例如：

```
<div id="user_id" style="display: none;"><%= @user.id %></div> 
```

然后在 js（或咖啡脚本或其他）上，您可以检查该 div 的内容：

```
<script type="text/javascript">
  var user_id = $("#user_id").html();
</div> 
```

当您想为您的 js 文件调试或创建测试时，这非常有用，因为它是纯 js 并且不会引发语法错误。

# ios - 如何将 Slider 值设置为计时器的 NSTimeInterval：iOS

> ID：15734753
> 
> 赞同：0
> 
> 时间：2013-03-31T21:31:04.990
> 
> 标签：ios, timer, uislider

我喜欢用 UISlider 设置定时器的间隔。我已经将值和值作为字符串，现在我必须将值分配给计时器。有人可以帮帮我吗？

```
slidervaluefortimer = [NSString stringWithFormat:@"%f",slider.value]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T01:54:08.457

您只需使用 slider.value 作为此方法的参数：

```
NSTimer *aTimer = [NSTimer scheduledTimerWithTimeInterval:slider.value target:self selector:@selector(myMethod:) userInfo:nil repeats:NO]; 
```

# c# - 设置动态创建控件的位置

> ID：15734754
> 
> 赞同：0
> 
> 时间：2013-03-31T21:31:06.393
> 
> 标签：c#

我使用代码动态创建了一个图像控件。我可以设置这个控件的高度和宽度，但我似乎无法控制它的位置。如何更改此控件的位置？

编辑：这是一个 WPF 应用程序，SI 是一个画布。基本上，同时有超过 1 张图像可用。这是一个类似于图像处理应用程序的应用程序，因此需要图像出现的特定位置。希望这能消除混乱。

```
var webimage = new BitmapImage(new Uri("C:\\Class16\\Images\\DSC_0000.jpg"));
            var imageControl = new Image();
            imageControl.Source = webimage;
            imageControl.Width =(XC[3] - XC[0]);
            imageControl.Height = (YC[1] - YC[0]);
            SI.Children.Add(imageControl); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:39:19.673

如果在 XAML 中声明了元素，则可以使用相同的属性来控制它。如果您告诉我们您正在尝试做的具体事情以及上下文（例如，什么类型是`SI`，一次可以看到多个图像），也许我们可以为您提供详细信息。

有时设置这些属性的方法并不直观 - 例如，如果您需要设置 a `Canvas.Left`，则需要使用如下代码：

```
Canvas.SetLeft(imageControl, 50); 
```

# python - numpy/python 中是否有“freq”函数？

> ID：15734756
> 
> 赞同：5
> 
> 时间：2013-03-31T21:31:20.657
> 
> 标签：python, numpy

假设你有：

```
arr = np.array([1,2,1,3,3,4]) 
```

是否有返回最频繁元素的内置函数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-31T21:32:15.093

是的，Python 的[*collections.Counter*](http://docs.python.org/2.7/library/collections.html#counter-objects)直接支持查找最频繁的元素：

```
>>> from collections import Counter

>>> Counter('abracadbra').most_common(2)
[('a', 4), ('r', 2)]

>>> Counter([1,2,1,3,3,4]).most_common(2)
[(1, 2), (3, 2)] 
```

使用*numpy*，您可能希望从[histogram() 函数](http://docs.scipy.org/doc/numpy/reference/generated/numpy.histogram.html#numpy-histogram)或[bincount() 函数](http://docs.scipy.org/doc/numpy/reference/generated/numpy.bincount.html)开始。

使用*scipy ，您可以使用*[mstats.mode](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.mstats.mode.html#scipy-stats-mstats-mode)搜索模态元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T21:48:16.400

该`pandas`模块在这里也可能有所帮助。`pandas`是一个简洁的python数据分析包，也支持这个问题。

```
import pandas as pd 
arr = np.array([1,2,1,3,3,4])
arr_df = pd.Series(arr) 
value_counts = arr_df.value_counts()
most_frequent = value_counts.max() 
```

这返回

```
> most_frequent 
2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T22:12:31.257

这适用于任何类型，无论是否为整数，并且返回始终是一个 numpy 数组：

```
def most_common(a, n=1) :
    if a.dtype.kind not in 'bui':
        items, _ = np.unique(a, return_inverse=True)
    else:
        items, _ = None, a
    counts = np.bincount(_)
    idx = np.argsort(counts)[::-1][:n]
    return idx.astype(a.dtype) if items is None else items[idx]

>>> a = np.fromiter('abracadabra', dtype='S1')
>>> most_common(a, 2)
array(['a', 'r'], 
      dtype='|S1')
>>> a = np.random.randint(10, size=100)
>>> a
array([0, 0, 0, 9, 3, 9, 1, 2, 6, 3, 0, 4, 3, 2, 4, 7, 2, 8, 8, 2, 9, 7, 0,
       3, 5, 2, 5, 0, 4, 2, 4, 7, 8, 5, 4, 0, 1, 6, 1, 0, 2, 0, 5, 1, 3, 8,
       8, 6, 3, 5, 4, 3, 3, 5, 0, 7, 3, 0, 2, 5, 4, 2, 4, 2, 8, 1, 4, 4, 7,
       4, 4, 3, 7, 4, 0, 1, 0, 8, 8, 1, 1, 2, 1, 4, 2, 5, 1, 0, 7, 2, 0, 0,
       0, 8, 9, 9, 8, 1, 3, 8])
>>> most_common(a, 5)
array([0, 4, 2, 8, 3]) 
```

# javascript - 参数 ... 不是函数，未定义

> ID：15734757
> 
> 赞同：15
> 
> 时间：2013-03-31T21:31:32.413
> 
> 标签：javascript, angularjs

我正在使用 AngularJS，但收到一条错误消息：`Argument 'Controller' is not a function, got undefined`这是[JSFiddle](http://jsfiddle.net/mrcactu5/eRamD/17/)和 HTML 代码：

```
<h2>Hata's Tree-Like Set</h2>
<div ng-app ng-init="N=3;" ng-controller="Controller">
<input type="range" min="1" max="10" step="1" ng-model="N">  
<div class="tree"></div>
</div 
```

然后我`Controller`在 JavaScript 中定义了这个函数，由于某种原因它没有注册。

```
function Controller($scope){
$scope.$watch("N", function(){  ... });} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-07T23:26:31.493

我有完全相同的错误：`argument 'HelloCtrl' is not a function`，未定义。

原来我的`hello.js`文件中有语法错误...数组定义中缺少逗号，在`HelloCtrl()`.

我添加了逗号，然后一切都开始工作了！

希望这可以帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-28T11:50:29.043

我有同样的错误......参数'RadioController'不是一个函数......

我在 HTML 中引用了错误的控制器。我有

```
data-ng-controller="RadioController" 
```

应该是什么时候

```
 data-ng-controller="Radio.RadioController" 
```

（'Radio' 是控制器所在的模块）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-31T22:13:31.893

在您的小提琴选项中，您选择执行您的 javastipt `onLoad`。使用该`onLoad`选项，您的 javascript 将添加到`window.onLoad`函数中：

```
 window.onload=function(){
       function Controller($scope){
          ...
       }
    } 
```

因此 Angular 无法访问您的代码，因为它位于闭包中。

使用该`no wrap`选项，您的代码将直接添加到页面中，并且可以通过 angular 访问：[JSFiddle](http://jsfiddle.net/bcaudan/eRamD/29/)。

您可以浏览源代码以查看其工作原理。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-31T21:35:01.333

您可以定义一个控制器并在一个步骤中注册它：

```
angular.module('myModule').controller('MyCtrl', function($scope) {
  $scope.$watch ....
}); 
```

如果您希望代码在缩小后正常工作，则必须明确指定对 $scope 的依赖：

```
angular.module('myModule').controller('MyCtrl', ['$scope', function(s) { 
  // you can now name the $scope argument whatever you want
  ...
}]); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-08-04T01:26:09.290

我也很难过。我的问题的原因是我有一个不支持新`as`别名的旧版本的 Angular。

确保您拥有支持`as`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-05T13:06:41.413

您是否正确配置了 $controllerProvider ？

从[文档](https://docs.angularjs.org/api/ng/directive/ngController)中：

> 使用当前 $controllerProvider 注册的构造函数的名称或在当前范围内计算为构造函数的表达式。
> 
> 控制器实例可以通过指定 ng-controller="as propertyName" 发布到范围属性中。
> 
> 如果当前 $controllerProvider 配置为使用全局变量（通过**$controllerProvider.allowGlobals()**），这也可能是全局可访问的构造函数的名称（不推荐）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-23T13:16:50.147

Well, I succeeded in solving this error by downgrading to legacy angular JS (1.2.27).

The same syntax (you have used above) for defining controller and angular JS (1.3.2) is the combination which caused this error.

With angular (1.3.2), following syntax worked for me.

```
var app = angular.module('dummyApp', []);

app.controller('helloController', function($scope){
    <write statements here>
}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-11-24T11:06:15.330

无需降级到旧版本。您可以同时使用**as**方法或**angular.module**方法。

加载文件的顺序也必须正确。

（**如果您很难记住加载文件的顺序，请考虑 require js**）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-26T15:31:24.287

我不得不重新排序脚本标签。我把控制器放在高于它所依赖的另一个控制器上。

花了我几个小时，希望这对其他人有帮助

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-05T12:58:42.793

我遇到了这个错误 - 我以我的控制器的名义弄错了案例。

它被注册为 CallbacksController... 我花了五分钟的时间发誓发现大小写差异（提示 - 在我的情况下大写 B！）。

# linear-gradients - 使用 css 背景的渐变线 - 在 ie 7 和 8 中不起作用

> ID：15734758
> 
> 赞同：0
> 
> 时间：2013-03-31T21:31:37.623
> 
> 标签：linear-gradients, css

我想出了以下 css，它创建了一个 100% x 1 高线 - 基本上是一个带有样式的复制 hr。末端逐渐变为中心的灰色。在最新的 chrome、ff、opera、ie10 和 ie9 上完美运行。对于 ie7 和 ie8，它根本没有显示任何内容。我到底做错了什么？

```
<!DOCTYPE html>
<!--[if lte IE 8 ]> <html class="ie8" lang="en-US"> <![endif]-->
<!--[if IE 9 ]> <html class="ie9" lang="en-US"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en-US"> <!--<![endif]--> 
```

并仅使用“”来显示该行。

```
.g-line{
height:1px;
width:100%;
display:block;
background: rgb(222,222,222); /* Old browsers */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjE1JSIgc3RvcC1jb2xvcj0iI2RlZGVkZSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9Ijg1JSIgc3RvcC1jb2xvcj0iI2RlZGVkZSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(left,  rgba(255,255,255,0) 0%, rgba(222,222,222,1) 15%, rgba(222,222,222,1) 85%, rgba(255,255,255,0) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(255,255,255,0)), color-stop(15%,rgba(222,222,222,1)), color-stop(85%,rgba(222,222,222,1)), color-stop(100%,rgba(255,255,255,0))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(left,  rgba(255,255,255,0) 0%,rgba(222,222,222,1) 15%,rgba(222,222,222,1) 85%,rgba(255,255,255,0) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(left,  rgba(255,255,255,0) 0%,rgba(222,222,222,1) 15%,rgba(222,222,222,1) 85%,rgba(255,255,255,0) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(left,  rgba(255,255,255,0) 0%,rgba(222,222,222,1) 15%,rgba(222,222,222,1) 85%,rgba(255,255,255,0) 100%); /* IE10+ */
background: linear-gradient(to right,  rgba(255,255,255,0) 0%,rgba(222,222,222,1) 15%,rgba(222,222,222,1) 85%,rgba(255,255,255,0) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#00ffffff',GradientType=1 ); /* IE6-8 */
}

.ie9 .g-line{
filter:none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:40:44.300

`background: rgb(222,222,222);`在 IE7-8 中无效。使用十六进制等效项`#DEDEDE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:49:38.953

我已经研究了很多方法并得出了这个结论……对于 ie7 和 ie8，我将使用：

```
filter: progid:DXImageTransform.Microsoft.gradient(
  startColorstr='#00dedede',
  endColorstr='#dedede',
  GradientType=1
); 
```

和

```
filter: progid:DXImageTransform.Microsoft.gradient(
  startColorstr='#dedede',
  endColorstr='#00dedede',
  GradientType=1
); 
```

`00`代表`0` `opacity`级别。当然，使用这种方法，我将不得不制作左右线并将它们组合起来，因此`div`当前是额外的一个，另外一侧是一些额外的 css，但这将照顾所有浏览器并且看起来和现在一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T00:00:46.350

ie7 不支持数据uri。ie8 有一些区别，最大的是它们不能> 32kb。此处的文档：http: [//msdn.microsoft.com/en-us/library/cc848897](http://msdn.microsoft.com/en-us/library/cc848897(VS.85).aspx) (VS.85).aspx您必须实现 mhtml 才能让数据 uri 在 ie7 中工作。您可以在此处阅读有关它的更多信息并查看演示：http: [//jonraasch.com/blog/css-data-uris-in-all-browsers](http://jonraasch.com/blog/css-data-uris-in-all-browsers)
但临时，实现此目标的一种超级简单的方法是提供服务ie8 及以下版本的 png 或 gif。您已经在提供 < IE8 样式，如果您将其更改为小于或等于，您可以简单地替换该类的背景样式，如下所示：

```
.ie8andbelow .g-line{background:url("image-for-ie8-and-below.png")}
```

# php - 快速在 PHP 中比较单维数组和多维数组的方法

> ID：15734766
> 
> 赞同：0
> 
> 时间：2013-03-31T21:32:07.530
> 
> 标签：php, arrays, multidimensional-array

我有一个像这样的多维数组：

```
Array (
[0] => Array
    (
        [time] => 1364685993
        [memberid] => 131
    )

[1] => Array
    (
        [time] => 1364685994
        [memberid] => 133
    )
[2] => Array
    (
        [time] => 1364685995
        [memberid] => 141
    )
) 
```

和这样的一维数组：

```
Array (
  [0] => 131
  [1] => 141
  [2] => 191
  [3] => 205
) 
```

现在我想从不包含普通数组中的 memberid 值的多维数组中删除所有子数组？

在这种情况下，只有 Subaray[1] 会从多维数组中删除，因为它的“memberid”键值 (133) 不会显示在普通数组中。这些数组实际上非常大，所以我不确定最快的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T21:39:34.670

```
$normalArray = array_flip($normalArray);

$multiDimArray = array_filter($multiDimArray, function ($elem) use ($normalArray) {
    return isset($normalArray[$elem['memberid']]);
}); 
```

恰好需要两次迭代，每个数组一次。使用的键查找`$normalArray[$elem['memberId']]`速度非常快。由于数组的功能性质和副本，可能会有一些内存开销，使用传统循环，`unset`如果这是一个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T21:39:23.817

首先，我将翻转`$nomal`数组以在数组中获得恒定的查找时间，如下所示：

```
$normal = array_flip( $normal); 
```

然后，您只需要`$multidimensional_array`通过`$normal`简单的查找来过滤数组：

```
$filtered = array_filter( $multidimensional_array, function( $el) use( $normal) {
    return isset( $normal[ $el['member_id'] ]);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T21:38:50.503

目前无法访问开发资源进行测试，但这应该可以。

```
foreach($members as $member => $property) {
    if (!in_array($property['member_id'], $id_array)) {
        unset($members[$member]);
    }
} 
```

`$id_array`是您在问题中提出的一维矩阵（数组）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T21:57:32.123

您可能希望在数据库查询本身中使用一维数组，而不是在事后过滤数据库结果。

我们不知道您正在使用的查询是什么样的，但是按照这些方式可以做到这一点：

```
// The ids from the file
$use_ids = array(131, 141, 191, 205);

// Create a list for the IN clause
$ids = '(' . implode(',', $use_ids) . ')';

// Create the query
$query = <<< SQL
    SELECT time, memberid
    FROM some_table
    WHERE ...
        AND memberid IN {$ids}
    ORDER BY time
SQL;

// Execute the query, etc. 
```

让 SQL 处理尽可能多的内容过滤总是一个好主意。

# date - JQGrid 日期格式化程序未正确应用本地时间偏移：Grails

> ID：15734768
> 
> 赞同：0
> 
> 时间：2013-03-31T21:32:09.223
> 
> 标签：date, grails, jqgrid, formatting, timezone

我在数据库（MySql）中有一个简单的表，其中包含标准日期格式的日期。我在 grails 中进行了一个简单的选择，并将输出呈现为 JSON 格式以供 jqgrid 获取。

在 jqgrid 我有以下单元格定义：

```
{name : 'processedDate',width:110,formatter:'date', formatoptions: {srcformat: 'Y-m-dTH:i:sZ',newformat:'d/m/Y H:i'}} 
```

我希望在屏幕上看到的日期是 **31/03/2013 22:06**，这是我从另一个 grails gsp 函数获得的 mysqlworkbench 中显示的日期

```
<g:formatDate format="dd/MM/yyyy  HH:mm" date="${emailAudit.pollDate}"/> 
```

但 jqgrid 单元格显示 **31/03/2013 21:06**

我今天才注意到这一点，因为我们已经进入夏令时，所以已经过了一个小时。

来自 grails 控制器的 JSON 日期是 **2013-03-31T21:06:45Z** （似乎又错过了时间，但是当注销时，它显然是由 grails 以某种方式转换的）。

现在，由于在 gsp formatdate 函数中，它正在应用本地偏移量，这似乎是 mysqlworkbench 的情况。

在 grails 中创建 JSON 以手动应用偏移量时的解决方案是什么，如果是，那么最好的方法是什么，或者 JQGrid 中的格式化选项中是否有我遗漏的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:56:34.120

使用其他人的类似解决方案对其进行排序（显然来自stackoverflow）。我刚刚在引导程序中创建了一个对象编组器来处理日期。它很脏，感觉不是 100%，但它可以工作（并且在我的代码中涵盖了 JSON 区域的所有日期）并且现在必须这样做。欢迎任何其他建议，我相信有比这更好的方法。

```
import grails.converters.JSON;

class BootStrap {
    def init = { servletContext ->

        JSON.registerObjectMarshaller(Date) {
            TimeZone tz = TimeZone.getDefault();
            def dateFormat = 'yyyy/MM/dd HH:mm'
            return it?.format(dateFormat,tz)
        } 
```

# c++ - 定义的常量在视觉工作室中表现得很奇怪

> ID：15734772
> 
> 赞同：0
> 
> 时间：2013-03-31T21:32:34.997
> 
> 标签：c++, windows, visual-studio-2012, visual-c++-2012

我正在使用 Visual Studio 2012 Professional 制作我的第一个 windows/directx 程序。在我的程序的顶部，我有这个：

```
3: #define SCREEN_HEIGHT 500;
4: #define SCREEN_WIDTH  400; 
```

在我决定使用常量之前，它工作得非常好：

```
49: //set size but not coordinates. we'll do that when we create the window
50: RECT clientArea = {0, 0, 500, 400};
51: //x-coordinates, y-coordinates, height, width
52: 
53: //Makes the previous struct have the values for the client area not the window
54: AdjustWindowRect(&clientArea, WS_OVERLAPPEDWINDOW, FALSE);
55: //address of previously defined RECT, window style, do we have a menu?
56: 
57: //create the window and store the handle
58: windowHandle = CreateWindowEx(NULL,
59:                              "WindowClass1",                        //name of window class
60:                              "My First Windowed Program",           //title of window
61:                              WS_OVERLAPPEDWINDOW,                   //window style
62:                              400,                                   //x-position
63:                              200,                                   //y-position
64:                              clientArea.right - clientArea.left,    //width
65:                              clientArea.bottom - clientArea.top,    //height
66:                              NULL,                                  //No parent
67:                              NULL,                                  //We dont have any menu's
68:                              whichInstance,                         //instance handle
69:                              NULL);                                 //we only have one window
70: 
71: //display the window
72: ShowWindow(windowHandle, howToShowTheWindow);
73: //struct with window information, defined by windows in WinMain. 
```

但是当我改变这一行时：

```
50: RECT clientArea = {0, 0, SCREEN_HEIGHT, SCREEN_WIDTH}; 
```

它给了我大约三十个不同的错误。我很确定只有前几个是相关的，其余的是因为这些代码行没有正常工作..

```
1>c:\users\kenneth\documents\visual studio 2012\projects\my first directx program\my first directx program\my first dirextx program.cpp(50): error C2143: syntax error : missing '}' before ';'
1>c:\users\kenneth\documents\visual studio 2012\projects\my first directx program\my first directx program\my first dirextx program.cpp(50): error C2143: syntax error : missing ';' before ','
1>c:\users\kenneth\documents\visual studio 2012\projects\my first directx program\my first directx program\my first dirextx program.cpp(54): error C2065: 'clientArea' : undeclared identifier
1>c:\users\kenneth\documents\visual studio 2012\projects\my first directx program\my first directx program\my first dirextx program.cpp(54): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\kenneth\documents\visual studio 2012\projects\my first directx program\my first directx program\my first dirextx program.cpp(54): error C2365: 'AdjustWindowRect' : redefinition; previous definition was 'function' 
```

如果我正确理解定义的常量，预处理器会在任何编译完成之前简单地将它们换成它们的值，所以这非常令人困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T21:33:48.947

删除分号：

```
#define SCREEN_HEIGHT 500
#define SCREEN_WIDTH  400 
```

将宏视为更多的“复制和粘贴”操作。`500;`等被复制并粘贴到like中`RECT clientArea = {0, 0, 500;, 400;};`

另外，为什么要固定屏幕尺寸？它使将来更改代码变得更加困难。我会声明一个类并在构造函数中指定屏幕大小：

```
class BasicWindow
{
    BasicWindow(std::size_t width, std::size_t height)
    : WndWidth_(width), WndHeight_(height){};
private:
    std::size_t WndWidth_;
    std::size_t WndHeight_;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T21:36:21.620

语法问题是多余的分号，应该是

```
#define SCREEN_HEIGHT 500
#define SCREEN_WIDTH  400 
```

但**不要那样做**。

宏是邪恶的。您冒着无意的、不受欢迎的文本替换的风险。好吧，你已经有了，但更糟。

相反，定义常量，如下所示：

```
int const screen_height = 500;
int const screen_width  = 400; 
```

该`#define`方法适用于 1970 年代的 C，截至 2013 年，它有点过时（而且有风险，而且令人眼花缭乱）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T21:35:37.853

那是因为你没有声明**变量**，而是`macros`. 因此，它在语法上用您所说的替换符号。并且您包含`;`在符号中，因此语法不正确。用。。。来代替：

```
#define SCREEN_HEIGHT 500
#define SCREEN_WIDTH  400 
```

这是一个为什么你应该避免使用宏的例子。首选`const`变量，因为它们没有任何这样的副作用：它们不会导致语法更改，而宏实际上会在将代码发送到编译器之前对其进行修改。

也就是说，无论预处理器在哪里看到您在代码中定义的符号，它都会用您所说的完全替换该符号（就像您`replace`在文件中手动完成了操作一样）。这发生在编译器甚至看到代码之前。因此，当您使用宏时，您可能会收到神秘的消息，因为编译器会看到与您面前的代码不同的代码。

另一方面，宏对于避免样板代码非常有用。但你真的必须知道你在做什么。在这里，您绝对应该使用`const`变量，因为不需要语法糖。

# sql - 如何正确使用 INSERT OR REPLACE？

> ID：15734777
> 
> 赞同：0
> 
> 时间：2013-03-31T21:32:57.360
> 
> 标签：sql, qml

这就是我得到的：

```
CREATE TABLE IF NOT EXISTS Settings (sitem TEXT, ccolor TEXT, ncolor TEXT)
CREATE UNIQUE INDEX IF NOT EXISTS sindex ON Settings (sitem, ccolor, ncolor) 
```

但是当我尝试插入一个值然后运行它替换它时：

```
INSERT OR REPLACE INTO Settings (sitem) VALUES ("something")
INSERT OR REPLACE INTO Settings (sitem) VALUES ("something else") 
```

这是我在`sitem`专栏中得到的：

```
 sitem
---------------
something
something else 
```

它不会取代它，即使它是唯一的，也只是创造另一个价值，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:58:18.133

The sitem field is part of the primary key and so is used to identify the row to do the replace on. You can't update the row in the way you want because the database can't tell that you want to replace the first record with the second one, so it does an insert instead.

# android - Android 用户界面，如解锁模式 Android

> ID：15734778
> 
> 赞同：0
> 
> 时间：2013-03-31T21:33:02.373
> 
> 标签：android, user-interface, user-input, custom-view

我想制作一个类似于绘图/游戏应用程序的东西来练习用户交互。

但我希望它能够工作并且看起来像 android 的安全“解锁模式”。我的意思是我想画圆圈，当用户通过画一条线或者只是标记圆圈来与它们交互时……但这是主要思想。

我一直试图找出如何实现它，但我找不到它。

我认为会创建一个自定义视图添加圆圈等等，但现在确定这是否正确。也许与 Drawable ？我已经尝试过使用按钮，但是降神会我想按下它并且不要释放屏幕，因为 onClick 事件没有被触发。

同样，如果是自定义视图，我可以将其与 Fragment 一起使用吗？

如果你能指出我正确的方向会很棒，我已经搜索了这样的例子，但我找不到任何例子，所以如果你能指出一个例子，我会很感激或确认创建自定义视图是要走的路，为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:44:09.600

如果您正在寻找模式解锁，您可以从开发文档中找到[选择锁定模式。](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.3_r1/com/android/settings/ChooseLockPattern.java/)

[如果您正在寻找新的滑块式解锁 (ICS)，您可以在此处](https://stackoverflow.com/questions/11807047/algorithm-of-the-joystick-on-the-touchable-screen)找到一些相关信息。

希望有帮助。

# java - 使用 JSTL 迭代 Hashmap/ArrayList

> ID：15734779
> 
> 赞同：0
> 
> 时间：2013-03-31T21:33:05.723
> 
> 标签：java, arraylist, hashmap, jstl

我有以下数组：

```
List<HashMap<String, String>> array = new ArrayList<HashMap<String, String>>();

[{name=BIRTH_DATE}, {catVal=07.11.2011}, {catStat=162}, {catVal=30.04.2011}, {catStat=108}, {CatVal=26.01.2011}] 
```

我想使用 JSTL 在名称、catVal 和 CatStat 之间进行选择。我尝试了以下方法，但它不起作用。我怎样才能得到钥匙？

```
<table border="1">
<c:forEach items="${xml}" var="map">
    <tr>
        <c:choose>
            <c:when test="${map.key =='name'}">
                <td>${map.name}</td> 
            </c:when>
            <c:when test="${map.key == 'catVal'}">
                <td>${map.catVal}</td> 
            </c:when>
            <c:when test="${map.key == 'catStat'}">
                <td>${map.catStat}</td> 
            </c:when>
        </c:choose>

    </tr>
</c:forEach> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:43:10.487

假设您`${xml}`包含`array`请求/会话的属性：

*   您正在尝试直接读取`Map`s 的条目。您应该开始从列表中读取`Map`s 的元素。
*   从[如何使用 JSTL 在 HashMap 中迭代 ArrayList？](https://stackoverflow.com/q/2117557/1065197)，您使用错误的语法来访问地图的当前条目值。您应该`entry.value`在代码中使用：

    ```
    <table border="1">
        <c:forEach items="${xml}" var="itemMap">
            <c:forEach items="${itemMap}" var="mapEntry">
            <tr>
                <td>
                    <c:choose>
                        <c:when test="${mapEntry.key == 'name'}">
                            <c:out value="Name:" />
                        </c:when>
                        <c:when test="${mapEntry.key == 'catVal'}">
                            <c:out value="Cat value:" />
                        </c:when>
                        <c:when test="${mapEntry.key == 'catStat'}">
                            <c:out value="Cat status:" /> 
                        </c:when>
                    </c:choose>
                </td>
                <td>
                    ${mapEntry.value}
                </td>
            </tr>
            </c:forEach>
        </c:forEach>
    </table> 
    ```

# ruby-on-rails - 如何为rails 3.2.12中的实例方法定义一个只读的单例方法？

> ID：15734786
> 
> 赞同：2
> 
> 时间：2013-03-31T21:33:50.103
> 
> 标签：ruby-on-rails, ruby, singleton

在我们的 rails 3.2.12 应用程序中，我们希望将一个只读方法注入到 an 的方法中，`instance`以将列标记为`readonly`或不标记。理想情况下，我们可以为应用程序中的每`readonly`一个的所有方法定义一个通用方法。`instance``model`

例如，`@project`是`Project model`. 中有一个`phone#`。方法注入后，我们可以在运行时`@project`评估（真或假）。`@project.phone.readonly`如果应用程序中有另一个模型，`customer`我们可以`@customer.name.readonly`假设`@customer`是`instance`.`customer`

我们在这里感到`singleton class`并且`define_method`可能会有所帮助。但我们不太了解它们将如何工作。有人可以阐明这个问题吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:06:28.457

[http://apidock.com/ruby/Object/define_singleton_method](http://apidock.com/ruby/Object/define_singleton_method)阅读此

但我认为这是个坏主意，因为您的某些属性（电话、姓名等）可能是不可变或冻结对象之一，因此会导致 TypeError

例子

```
 1.9.3p125 :001 > number = 5.34
     => 5.34 
    1.9.3p125 :002 > def number.readonly?
    1.9.3p125 :003?>   true
    1.9.3p125 :004?>   end
    TypeError: can't define singleton method "readonly?" for Float 
```

我建议你考虑下一个界面

```
@project.readonly?(:name) 
```

还要检查这个 [http://apidock.com/rails/ActiveRecord/ReadonlyAttributes/ClassMethods/attr_readonly](http://apidock.com/rails/ActiveRecord/ReadonlyAttributes/ClassMethods/attr_readonly) [https://github.com/rails/rails/blob/master/activerecord/lib/active_record/readonly_attributes](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/readonly_attributes)。

它允许您在初始化程序中执行类似的操作

```
class  ActiveRecord::Base
  def attr_readonly?(attr_name)
     self.class.readonly_attributes.include(attr_name)
  end
end 
```

进而

```
 class Phone < ActiveRecord::Base
   attr_readonly :phone
 end 
```

如果不需要 attr_readonly 功能，即不允许在创建对象后更改只读属性，您可以像这样创建自己的模块，但使用另一个 class_attribute 变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T01:50:25.067

@user938363 如果您需要定义一次方法*并*从任何*实例*调用它，那么您应该在*Class*中定义方法，而不是在单例实例中。

```
class Float
  def readonly?
    true
  end
end

n = 1.234
n.readonly? # => true 
```

# r - 从 mgcv 中的 vis.gam 更改等高线图中的单位

> ID：15734789
> 
> 赞同：1
> 
> 时间：2013-03-31T21:34:07.837
> 
> 标签：r, graphics, mgcv

我正在使用变量的对数拟合模型，并且我想根据转换后的变量来呈现我的结果。这是一个简单的例子：

```
library(mgcv)
N = seq(from=1,to=10,by=.01)
a = N^2
b = 1/N
y = log(a*b*runif(length(N)))
mod = gam(y~te(a,b))
vis.gam(mod, plot.type="contour") 
```

我想生成相同的图表，但基于 exp(y) 而不是 y。

任何想法如何做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:58:53.107

正如经常发生的那样，我在提出问题后立即想到了解决方案。

只需键入`vis.gam`并获取功能。将其复制/粘贴到脚本文件中。这是一个长函数。中途某处：

```
fv <- predict.gam(x, newdata = newd, se.fit = TRUE, type = type)
fv$fit = exp(fv$fit)   #INSERT THIS LINE HERE WITH WHATEVER FUNCTION YOU WANT TO MODIFY THE FITTED VALUES BY
z <- fv$fit 
```

然后把函数名改成“mod.vis.gam”什么的，像任何函数一样使用。效果很好。请注意，SE 不受影响。

# c# - WPF MVVM 在您键入时更改文本框大小

> ID：15734800
> 
> 赞同：0
> 
> 时间：2013-03-31T21:34:34.183
> 
> 标签：c#, .net, wpf, xaml, mvvm

我有一个 TextBox，随着它的内容增长，我希望它增长，随着它的内容缩小，我希望它的高度和宽度都缩小。这可以通过挂钩到 TextBox 中的 TextChanged 事件来轻松实现，这意味着代码隐藏，这是我们在 MVVM 中应该避免的事情。所以问题是我们如何在 MVVM 中做到这一点？我们显然必须使用命令（实现 ICommand 接口的类），同时我们不能将命令挂钩到事件。

一种选择是使用 System.Windows.Interactivity。我以前用过它，它非常简洁，但实际上有些人可能反对它，因为它更多地使用 Silverlight 库。

还有其他选择吗？

一个更简单的 XAML。请注意，我希望窗口改变它的大小，因为 TextBox 占据了整个窗口：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid HorizontalAlignment="Stretch">
        <TextBox Width="Auto">            
        </TextBox>
    </Grid>
</Window> 
```

这是我的 XAML：

```
<Window x:Class="SleekNoteUI.Views.SleekNoteView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    <Window.Template>
        <ControlTemplate>
            <Border...>
                <Grid>
                    <Grid Grid.Row="1" x:Name="noteGrid">
                        <TextBox Grid.Row="0"
                                 Text="{Binding SomeText...}"
                                 Background="{Binding...}">
            </TextBox>
        </Grid>
        </Grid>
    </Border>
    </ControlTemplate>
</Window.Template>
</Window> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T01:30:18.270

文本框随着文本的变化缩小/增长：

```
<TextBox HorizontalAlignment="Left" Width="Auto" MinWidth="10"/> 
```

*   仅限 XAML 的解决方案。
*   后面没有代码，
*   没有`System.Windows.Interactivity`。
*   并且不要将与大小相关的东西放在它们不属于的 ViewModel 中。

然后再次：

*   MVVM 并不是要避免代码落后。这是关于将 UI 从业务/应用程序逻辑和数据中分离出来。
*   System.Windows.Interactivity 与 Silverlight 一样多的 WPF，所以我不知道“某些人”在说什么，但它的使用是完全有效的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:35:24.943

通过简单地将 Width 属性设置为“Auto”，您就可以实现这一点。

```
<TextBox Width="Auto" /> 
```

谢谢，拉梅什

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T22:05:19.230

using System.Windows.Interactivity create a Behavior. This is the best way of encapsulating code that otherwise would endup in a code-behind

# wpf - 相同视图模型的 Windows 应用商店和 WPF 应用程序设计器的不同行为

> ID：15734803
> 
> 赞同：0
> 
> 时间：2013-03-31T21:35:21.747
> 
> 标签：wpf, xaml, winrt-xaml, designer

我正在使用 MVVP 模式在 Windows Store（又名 Metro）和 WPF 应用程序之间共享大部分代码。其中一个控件的可见性由视图模型成员的状态控制：

```
Visibility="{Binding Path=IsServiceSelected, 
            Mode=TwoWay, 
            Converter={StaticResource BoolToVisibility}}" 
```

属性“IsServiceSelected”在数据上下文后面的视图模型上定义。我有一个假的视图模型，其中包含一些仅供设计师使用的数据。此假模型中的属性 IsServiceSelected 被评估为“true”（此属性没有成员字段，它是根据其他数据计算的）。这适用于 WPF 应用程序，我看到控件的可见性是可见的。但对于 Windows 应用商店应用程序，控件的可见性始终在设计时折叠，仅在运行时对其进行正确评估。

**如果我使用ConverterParameter=True**扩展 XAML 定义，则会显示控件，因此显然“IsServiceSelected”的值未正确评估。但奇怪的是，我为我的模型、视图模型和特定的假视图模型共享相同的代码（在可移植类库中），因此它应该在不同平台上被评估为相同的值。但事实并非如此。

**更新**误报，问题出在我的代码上。固定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:06:27.273

不同的行为可能是由转换器引起的，因为设置`ConverterParameter=True`使它也可以在 Windows 应用商店应用程序中工作。您显然不能在 WPF 和 Windows Store 应用程序中使用相同的转换器，因为它们必须实现不同的接口。

比较两种实现，您应该能够发现差异。对于 Windows 应用商店应用程序实施，特别检查方法`parameter`参数的`Convert`使用方式。将其设置为`true`似乎会更改返回值。

# c++ - 我输出中的这条 D3D11 INFO 行是什么意思？

> ID：15734820
> 
> 赞同：0
> 
> 时间：2013-03-31T21:36:59.637
> 
> 标签：c++, visual-studio-2012, directx-11

当我关闭我的 win32 DirectX 应用程序时，我的 Visual Studio 输出中出现以下行：

```
D3D11 INFO: Destroy ID3D11ClassLinkage: Name="unnamed", Addr=0x00893E04 [ STATE_CREATION INFO #2097295: DESTROY_CLASSLINKAGE] 
```

这是什么意思？可以避免这种输出吗？应该是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:54:27.033

它是 Direct3D 的 SDK 调试层的一个功能。

有关更多信息，请参阅[此](http://blogs.msdn.com/b/chuckw/archive/2010/04/15/object-naming.aspx)博客文章。

# zend-framework2 - 无法在 ZF2 Skeleton Application 中安装 ZfcUser / ZfcBase

> ID：15734821
> 
> 赞同：0
> 
> 时间：2013-03-31T21:37:00.637
> 
> 标签：zend-framework2, zfcuser

我无法将 ZfcUser / ZfcBase 模块安装到 ZF2 骨架应用程序中。（Ubuntu 12.10 服务器、Apache、PHP5.4.6）

1）下载并解压ZF2骨架应用程序

2) 下载 ZF2 库并解压到 /vendor/ZF2

此时，骨架应用程序工作正常。

3) 下载 ZfcBase 和 ZfcUser 并将其解压缩到 /vendor/ 中（例如，我有 /vendor/ZfcXxxx/Module.php）

4) 编辑 config/application.config.php 以包含两个新模块

```
<?php
return array(
    // This should be an array of module namespaces used in the application.
    'modules' => array(
        'Application',
        'ZfcBase',
        'ZfcUser',
    ), 
```

我现在得到

```
Fatal error:  Uncaught exception 'Zend\ModuleManager\Exception\RuntimeException' with message 'Module (ZfcBase) could not be initialized.' in /home/ubuntu/zf2-skel/vendor/ZF2/library/Zend/ModuleManager/ModuleManager.php:144
Stack trace:
#0 /home/ubuntu/zf2-skel/vendor/ZF2/library/Zend/ModuleManager/ModuleManager.php(85): Zend\ModuleManager\ModuleManager->loadModule('ZfcBase')
#1 [internal function]: Zend\ModuleManager\ModuleManager->onLoadModules(Object(Zend\ModuleManager\ModuleEvent))
#2 /home/ubuntu/zf2-skel/vendor/ZF2/library/Zend/EventManager/EventManager.php(464): call_user_func(Array, Object(Zend\ModuleManager\ModuleEvent))
#3 /home/ubuntu/zf2-skel/vendor/ZF2/library/Zend/EventManager/EventManager.php(208): Zend\EventManager\EventManager->triggerListeners('loadModules', Object(Zend\ModuleManager\ModuleEvent), NULL)
#4 /home/ubuntu/zf2-skel/vendor/ZF2/library/Zend/ModuleManager/ModuleManager.php(104): Zend\EventManager\EventManager->trigger('loadModules', Object(Zend\ModuleManager\ModuleManager), Object(Zend\ModuleMan in /home/ubuntu/zf2-skel/vendor/ZF2/library/Zend/ModuleManager/ModuleManager.php on line 144 
```

大概我错过了一些自动加载配置......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:50:44.837

使用 composer.phar 非常有用。

```
php composer.phar self-update
php composer.phar install 
```

无论如何检查您的“autoload_classmap.php”并验证 ZfcBase 的添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:45:25.797

我没有使用作曲家（出于各种原因）。这个缺少的配置告诉应用程序加载模块的 autoload_classmap.php 文件就是这样。

```
Zend\Loader\AutoloaderFactory::factory([
    'Zend\Loader\StandardAutoloader' => [
        'autoregister_zf' => true
    ],
    'Zend\Loader\ClassMapAutoloader' => [
        __DIR__ . '/../vendor/ZfcBase/autoload_classmap.php',
        __DIR__ . '/../vendor/ZfcUser/autoload_classmap.php',
    ],
]); 
```

# codeigniter - 如何在 codeigniter-php 中打印对象数组？

> ID：15734822
> 
> 赞同：0
> 
> 时间：2013-03-31T21:37:04.803
> 
> 标签：codeigniter

我在codeigniter中获取数组时遇到问题

```
$data['one']=$this->db->query($sql1);
$data['tho']=$this->db->query($sql2);
$data['three']=$this->db->query($sql3); 
```

我正在尝试执行以下代码我收到错误

```
Fatal error: Call to a member function result() on a non-object in 
```

如果我这样做，`var_dump($data['one']);`我会显示以下内容：

```
Array
(
 [0] => stdClass Object
 (
  [date] => 2013-09-28
 )
 [1] => stdClass Object
 (
  [date] => 1970-01-01
 )
 [2] => stdClass Object
 (
  [date] => 2013-09-28
 ) 
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:42:08.143

您可以（在控制器中）为每个数组执行类似的操作：

```
 foreach ($data['one']->result() as $row)
  {
        echo $row->date; //or whatever the query returns
  } 
```

如果你想在视图上打印它，你可以这样做：

```
 foreach ($one->result() as $row)
  {
        echo $row->date; //or whatever the query returns
  } 
```

在官方文档中查看更多关于查询的[信息](http://ellislab.com/codeigniter/user-guide/database/examples.html)

# c# - 在 UserControl 内部不满足导入

> ID：15734826
> 
> 赞同：0
> 
> 时间：2013-03-31T21:37:21.650
> 
> 标签：c#, .net, wpf, prism, mef

我在我的项目中使用 MEF 和特别是 IEventAggregator 在我的类之间发送信号，但是我对 IEventAggregator 的 Import 不满意并且值仍然为 NULL ？我错过了什么吗？您可以从 UserControls 中的 MEF 导入吗？

```
 public partial class MyControl : UserControl 
    {
        public MyControl()
        {
           InitializeComponent();  
        }

        [Import]
        public IEventAggregator EventAggregator { get; set; }

        public void SomeMethod()
        {
           EventAggregator.GetEvent<ErrorMessage>.Subscribe(SomeOtherMethod);
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:12:23.753

您可以在 a 上声明导入`UserControl`，但必须满足这些导入。如果 WPF 正在创建您的`UserControl`（例如通过 a `DataTemplate`），那么您的导入将不会被解析，因为 WPF 没有对 MEF 的任何内在支持。您需要做的是通过您的实例获取您的`MyControl`实例`CompositionContainer`，或者在创建实例后调用[`SatisfyImportsOnce`](http://msdn.microsoft.com/en-us/library/dd779466.aspx)您的实例`UserControl`。

# xml - 使用 ColdFusion 和 CFFeed 的 rss 提要中的图像

> ID：15734840
> 
> 赞同：1
> 
> 时间：2013-03-31T21:39:04.020
> 
> 标签：xml, coldfusion, cdata, coldfusion-8, cffeed

我有一个脚本，它生成一个带有 ColdFusion 及其`CFFeed`标签的 xml 文件。除了图像，它工作得很好。我知道您必须使用封装图像`CDATA`才能显示它。我不确定我是否设置正确，因为图像没有显示在我的 Google 阅读器/Feedly 提要中。这是代码：

```
<cfquery datasource="data" name="queryT">
SELECT *
FROM qTable
WHERE ... 
ORDER BY...
</cfquery> 

<cfset RssStruct                = StructNew() />
<cfset RssStruct.link           = "https://www.url.com" />
<cfset RssStruct.title          = "sitename" />
<cfset RssStruct.description    = "url Blog" />
<cfset RssStruct.image.url      = 'https://www.url.com/assets/img/ns.png' />
<cfset RssStruct.image.title    = 'Site Name' />
<cfset RssStruct.image.link     = 'https://www.url.com' />
<cfset RssStruct.pubDate        = Now() />
<cfset RssStruct.version        = "rss_2.0" />
<cfset RssStruct.item           = ArrayNew(1) />
<cfset threadlist               = "">
<cfset index                    = 1>

<cfloop query="queryT">
    <cfif listcontains( threadlist , '#id#' ) eq 0>
        <cfset threadlist = ListAppend(threadlist, '#id#')>
             <!--- Here let's clean up and ensure that all values are XML Compliant --->
            <cfset RssStruct.item[index]                    = StructNew() />
            <cfset RssStruct.item[index].guid               = structNew() />
            <cfset RssStruct.item[index].guid.isPermaLink   ="YES" />
            <cfset RssStruct.item[index].guid.value         = 'https://www.url.com/page.cfm?itemid=#queryT.id#' />
            <cfset RssStruct.item[index].pubDate            = createDate(year(Posted), month(Posted), day(Posted)) />
            <cfset RssStruct.item[index].title              = xmlFormat(#title#) />
            <cfset RssStruct.item[index].Body               = xmlFormat(#Body#) />
            <cfset RssStruct.item[index].description        = StructNew() />
            <cfset RssStruct.item[index].description.value  = '<![CDATA[ <img src="https://www.url.com/assets/Photos/photo/#id#.jpg"> #body#  ]]>' />
            <cfset RssStruct.item[index].link               = 'https://www.url.com/page.cfm?item=#queryT.id#' /><br>
        <cfset index = index + 1>
    </cfif>
</cfloop>

<!--- Generate the feed and save it to a file and variable. --->

<cffeed action="create" name="#RssStruct#" overwrite="true" xmlVar="myXML" outputFile = "Feed.xml"  />` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:34:47.043

看起来您已经为`<description>`项目下的元素创建了一个结构。您是否尝试过简单地将代码放入其中`<description>`？

而不是这个：

```
 <cfset RssStruct.item[index].description        = StructNew() />
        <cfset RssStruct.item[index].description.value  = '<![CDATA[ <img src="https://www.url.com/assets/Photos/photo/#id#.jpg"> #body#  ]]>' /> 
```

试试这个：

```
 <cfset RssStruct.item[index].description  = '<![CDATA[ <img src="https://www.url.com/assets/Photos/photo/#id#.jpg"> #body#  ]]>' /> 
```

您是否尝试过使用该`<enclosure>`项目的元素？

> **定义和使用**
> 
> 该元素允许媒体文件包含在项目中。
> 
> **属性**
> 
> 长度 - 必需。定义媒体文件的长度（以字节为单位）
> 
> 类型 - 必需。定义媒体文件的类型
> 
> 网址 - 必需。定义媒体文件的 URL

一个示例类似于（您需要确定图像的大小（以字节为单位））：

```
<enclosure url="https://www.url.com/assets/Photos/photo/#id#.jpg" length="#ImageLength#" type="image/jpeg" /> 
```

# c# - C#正则表达式搜索这个值

> ID：15734841
> 
> 赞同：-8
> 
> 时间：2013-03-31T21:39:10.237
> 
> 标签：c#

如何得到这个字符串文本的数字？

字符串字符串值 = "[3=000][98=000][299=000][120=000][012=000][92=000][93=000][04=000]";

```
 string pattern = "([)([0-2][0-9][0-9])(=)";
        Regex rgx = new Regex(pattern, RegexOptions.IgnoreCase);
        MatchCollection matches = rgx.Matches(stringvalue);
        if (matches.Count > 0)
        {
            Console.WriteLine("=== Sonuç ===");
            foreach (Match match in matches)
                Console.WriteLine("value={0}", match.Value.Replace("[", "").Replace("=", ""));
        }
        else
        {
            Console.WriteLine("bulunamdı");
        } 
```

是另一个 vay 字符串模式 = "([)([0-2][0-9][0-9])(=)"; 这是模式（不可替换）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:45:10.323

`\[(\d+)=\d+\]`

您要查找的号码将在每场比赛的第一组中：

```
var input = "[03=000][98=000][999=000][120=000][01=000][92=000][93=000][1004=000]";
var regex = @"\[(\d+)=\d+\]";

var matches = Regex.Matches(input, regex);

foreach (Match m in matches)
{
    Console.WriteLine(m.Groups[1].Value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:46:50.663

我有时发现正则表达式有点讨厌。您可以考虑使用简单的字符串处理而不是匹配正则表达式。这肯定会为您的输入完成工作。

```
string val  = "[03=000][98=000][999=000][120=000][01=000][92=000][93=000][1004=000]";

string[] numbers = val.Split(new []{ '[', ']', '=' }, StringSplitOptions.RemoveEmptyEntries)
                      .Where((v, i) => i % 2 == 0)
                      .ToArray();

Console.WriteLine(string.Join(Environment.NewLine, numbers)); 
```

印刷：

```
03
98
999
120
01
92
93
1004 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-31T21:43:05.143

如果我没听错的话，你是说底部都是一串？如果是这样，则不需要正则表达式（尽管您可以使用它），但我只会使用子字符串，因为您似乎希望它们分开。

即字符串str03 = ThatString.Substring(1,2);

str03 将等于“03”

# ios - -[UIImage resizableImageWithCapInsets] 拉伸错误

> ID：15734844
> 
> 赞同：1
> 
> 时间：2013-03-31T21:39:24.943
> 
> 标签：ios, objective-c, uiimage, uiedgeinsets

所以，我有一个`.png`尺寸为 (640, 960) 像素的图像。我正在尝试从中创建一个可调整大小的图像`.png`，以便垂直拉伸该图像并适合 iPhone 5 的（640、1096）像素视图。

我正在使用 加载图像`+[UIImage imageNamed:]`，效果很好。然后我通过`-[UIImage resizableImageWithCapInsets:]`使用 (480, 320, 479, 320) 插图创建一个可调整大小的图像。

然后我将图像设置为`UIImageView`. 在 iPhone 4 和 4S 上它看起来很棒（呃）。在 iPhone 5 上，它似乎只是将整个图像垂直拉伸到 1096 像素，完全忽略了大写插图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:18:54.657

事实证明，当您使用 (640, 960) 像素图像时，它需要是`@2x.png`.

此外，@bill-williams 项目非常有帮助：[https ://github.com/asmallteapot/ImageStretchDemo](https://github.com/asmallteapot/ImageStretchDemo)

# c# - 如何通过按键访问文本框？

> ID：15734846
> 
> 赞同：-1
> 
> 时间：2013-03-31T21:39:34.147
> 
> 标签：c#, winforms

所以我在一个**c#**项目（winforms）中工作，所以我的项目中有很多文本框，我想要当我按下 key 时`up`，一个特定的文本框可以说`textbox1`增加他的值，我已经使用了该事件`OnKeyUp`，但是我有一个问题很多文本框，所以我必须单击它`TextBox1`才能开始操作，所以如果有人有任何想法，我将不胜感激。

这是我的代码：

```
//Action speed up
private void TxBoxKeyUp_KeyUp(object sender, KeyEventArgs e)
{
    TxBoxKeyUp.Text = (speed+=5).ToString();
    LbSpeed.Text = TxBoxKeyUp.Text;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:42:13.907

如果要为表单上的每个控件处理 KeyUp 事件，则可以将[Form.KeyPreview](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.keypreview.aspx)属性设置为 True。然后为您的表单添加一个 KeyUp 事件处理程序，并在此事件中更新您的文本框的内容

```
private void Form1_KeyUp(object sender, KeyEventArgs e)
{
    TxBoxKeyUp.Text = (speed+=5).ToString();
    LbSpeed.Text = TxBoxKeyUp.Text;
} 
```

如果您的意图是在事件触发时捕获每个 KeyUp 任何控件是焦点控件，则此方法可以正常工作。如果仅当控件聚焦为 TextBox 时才需要获取键，则解决方案会更复杂。您需要一种[类似于此问题中解释的方法](https://stackoverflow.com/questions/2899338/know-who-got-the-focus-in-a-lost-focus-event)来获取当前的焦点控件，然后检查它是否是文本框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:58:00.847

You can define your textboxes as a array and then use delegate.

lets assume you have a single keyup event **TxBoxKeyUp_KeyUp** and a array of textboxes **txtarr**

```
foreach (TextBox txt in txtarr)
    txt.KeyUp += new KeyEventHandler(TxBoxKeyUp_KeyUp); 
```

So you can handle all the textboxes keyup event with a single function.

# devexpress - aspxgridview 标题过滤器从列内容中多选

> ID：15734849
> 
> 赞同：2
> 
> 时间：2013-03-31T21:39:37.640
> 
> 标签：devexpress, aspxgridview

我在我的项目中使用 aspxgridview，并且我有一个语言列，如上所示。每行代表一个产品。第一个产品有 2 种语言，第二个有 4 种语言，第三个有 3 种语言......在产品表中，我在单个单元格中为每个产品记录语言，例如 ,2,3,4，（这些 ara 语言表 ID），我正在展示它们在上面的网格中，使用语言代码并用破折号分隔它们...我无法找到此问题的多项选择...我的意思是我想从多选下拉列表中搜索 TK 和 TH 语言代码使用的产品..

![www.yazilimakademi.com/1.jpg](https://i.stack.imgur.com/nRl4Y.jpg)

当我选择 TK 和 TH

![在此处输入图像描述](https://i.stack.imgur.com/CSlOZ.jpg)

没有数据显示...

![在此处输入图像描述](https://i.stack.imgur.com/e62re.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:44:08.630

默认情况下，它只返回您选择的第一个项目。您将需要编写一些代码来包含所选的每个项目以及用于分隔值的字符。[我在这里](http://www.devexpress.com/Support/Center/p/E2203.aspx)找到了一个很好的例子

# c++ - c++ 对结构使用排序时遇到问题

> ID：15734850
> 
> 赞同：0
> 
> 时间：2013-03-31T21:39:38.693
> 
> 标签：c++, arrays, sorting, struct

我有一个结构，用户可以定义哪些字符串值放在哪里。我试过按字母顺序排序，但对我在网上找到的研究没有运气。我希望如果有人能看到我哪里出错了

正在使用的库：iostream、字符串、fstream 和算法

```
struct House
{
    int room_num;               
    string person;      
};

struct compare_by_word
{
    bool operator()(const House& lhs, const House& rhs)
    {
        return lhs.person < rhs.person;
    }
}; 
```

顺便说一句，我在使用 Visual Studios 2010 时遇到了错误

```
 void asc_order()
    {
        sort(data.begin(), data.end(), compare_by_word());
//for loop will be displayed here to show table
    } 
```

我得到的错误：

错误：标识符数据未定义

struct compare_by_word 错误：不允许类型名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T21:42:24.720

您将**类型**作为比较器传递。您需要将**对象**作为`compare_by_word`比较器传递给`sort`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:43:27.087

您需要传递`compare_by_word`. 这是通过调用其构造函数来完成的：

```
std::sort(data.begin(), data.end(), compare_by_word());
//                                  ^^^^^^^^^^^^^^^^^ 
```

[***现场演示***](http://liveworkspace.org/code/4yc7Hy$3228)

我还看到您没有使用任何引入带有`begin`or`end`方法的对象的头文件进行编译。这些通常用于向量和其他动态容器。所以我认为你应该尝试传递地址范围作为可行的替代方案：

```
std::size_t len = sizeof(data)/sizeof(*data);

std::sort(data, data + len, compare_by_word()); 
```

[***现场演示***](http://liveworkspace.org/code/4yc7Hy$3238)

或者，如果你在 C++11 中编译，你可以传递一个[lambda](https://stackoverflow.com/questions/.../what-is-a-lambda-expression-in-c11)回调来代替显式仿函数，并使用[`begin`](http://en.cppreference.com/w/cpp/iterator/begin)和[`end`](http://en.cppreference.com/w/cpp/iterator/end)库函数而不是地址范围：

```
using std::begin;
using std::end;

std::sort(begin(data), end(data), [] (House const& lhs, House const& rhs)
{
    return lhs.person < rhs.person;
}); 
```

[***现场演示***](http://liveworkspace.org/code/4yc7Hy$3239)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:45:41.237

另一种选择是

```
struct compare_by_word
{
    bool operator()(const House& lhs, const House& rhs)
    {
        return lhs.person < rhs.person;
    }
} compare_by_word;  // Here. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T21:50:49.883

**排序**语句中有错误。将其替换为：

```
sort(&data[0],&data[5],compare_by_word()); 
```

**[IDEONE 演示](http://ideone.com/LabS0o)**

# .htaccess - .htaccess 重定向（如果包含子字符串）

> ID：15734853
> 
> 赞同：0
> 
> 时间：2013-03-31T21:39:44.213
> 
> 标签：.htaccess

我需要创建一个 .htaccess 文件：

如果 url 包含“chat.swf”，则重定向到“chat.php”

我试过了

```
RewriteCond %{REQUEST_URI} chat\.swf
RewriteRule .* chat.php [R=301,L] 
```

但是好像不太好

任何的想法 ？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:43:25.097

试试这个

```
RewriteEngine On

RewriteRule ^.*\chat.swf$ /chat.php [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T05:38:22.777

清除浏览器缓存并重新启动，然后尝试以下规则：

```
RewriteEngine On
RewriteBase /
RewriteRule chat\.swf /chat.php [R=301,L,NC] 
```

如果由于某种原因这不起作用，请在您的问题中发布完整的 .htaccess 。

# sql - 创建 SQL 数据库

> ID：15734854
> 
> 赞同：0
> 
> 时间：2013-03-31T21:39:44.177
> 
> 标签：sql, database, azure, visual-studio-2012

我正在关注本教程[http://blogs.msdn.com/b/jmeier/archive/2010/03/24/how-to-use-asp-net-forms-auth-with-sql-server.aspx](http://blogs.msdn.com/b/jmeier/archive/2010/03/24/how-to-use-asp-net-forms-auth-with-sql-server.aspx)和我我被困在第 6 步，我必须设置会员数据库。我打开了 aspnet_regsql 向导，但设置失败，出现以下错误：

System.Web.HttpException (0x80004005)：无法连接到 SQL Server 数据库。

有谁知道我能做什么？我是 SQL 的初学者，我不确定我是否安装了正确的程序，尽管我的 PC 上似乎有一个 SQLExpress 实例。

我在本教程中使用 Windows 8 和 Visual Studio Express 2012 for Web。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:45:11.937

您需要更改连接字符串以指向您的机器。

由于您使用的是 express，因此很可能如下所示。

```
connectionString="Initial Catalog=aspnetdb;Data Source=localhost\sqlexpress;Integrated Security=SSPI" 
```

不是我已经替换`MyServerName`为`localhost\sqlexpress`

# eclipse - Eclipse 奇怪地对待包名

> ID：15734856
> 
> 赞同：1
> 
> 时间：2013-03-31T21:39:54.570
> 
> 标签：eclipse, packages

每当我尝试导出 .jar 文件时，就会出现我最初的问题。Eclipse 会说其中两个类缺少构建路径。我决定删除文件所在的包是一个不错的主意，但现在每次我尝试重新创建包时，它的行为都很奇怪。我会告诉它制作包“com.gmail.developnickmaster21.FancyClan”，而是制作一个名称为“com.gmail.developnickmaster21”的包和一个名称为“FancyClan”的文件夹。我怎样才能解决这个问题？

![Eclipse 如何制作包](https://i.stack.imgur.com/lVWpL.png)

仅供参考：我有两个外部 jar 文件副本，因为包含工作区的闪存驱动器在我的家庭和学校计算机上显示为不同的驱动器。

# assembly - 如何“删除” SSE 寄存器末尾的字节？

> ID：15734862
> 
> 赞同：3
> 
> 时间：2013-03-31T21:41:10.990
> 
> 标签：assembly, x86-64, sse, att

对于 uni 分配，我需要编写一个函数来计算汇编中字符串（由指针和索引定义）中的空格数。有一个使用要求`pcmpeqb`（即使用 SSE 寄存器），以及使用`popcnt`和的提示`pmovmskb`。我的基本方法是处理 16 字节块中的字符串，将每个块加载到其中`%xmm8`并将其与`%xmm9`初始化为包含 16 个空格的块进行比较。但是，我需要以某种方式特别处理最后一块。

我的第一个想法是使用旋转指令删除字符串末尾的垃圾。（保证字符串在结束后分配了一些额外的空间以防止段错误，但那里的数据可能不应该用于比较。）我偶然发现，`PSRLDQ`但它似乎不接受非直接参数。（或者至少拒绝了我扔给它的东西。）所以我的问题是：我怎样才能删除 SSE 寄存器的最后 X 个字节，而不会将它的一半归零，或者逐个字地这样做？（据我了解，它们上的大多数可用操作都可以。）

我的代码（模样板）目前看起来像这样 - 有问题的位在标签之后`_last:`：

```
 # === Arguments ===
    # %rdi - char *input
    # %rsi - size_t count
    # === Temporaries ===
    # %rdx - how many chars to process in final run
    # %rcx - how many characters were "read" already
    # %r8 - pop count of last iteration
    # %r9
    # %r11
    # === SSE Temporaries ===
    # %xmm8 - the chunk of the string being processed
    # %xmm9 - 16 spaces

    xor %rcx, %rcx
    xor %rax, %rax
    movdqu _spaces(%rip), %xmm9

_loop:
    # set %rdx to number of characters left to process
    mov %rsi, %rdx
    sub %rcx, %rdx

    # we've reached the end of the string
    cmp %rdx, %rsi
    jge _end

    movdqu (%rdi, %rcx), %xmm8 # load chunk of string to process
    add $16, %rcx

    # less than 16 characters to process
    cmp $16, %rdx
    jg _last

_compare: #compare %xmm8 with spaces and add count of spaces to %eax
    pcmpeqb %xmm9, %xmm8
    pmovmskb %xmm8, %r8d
    popcntl %r8d, %r8d
    add %r8d, %eax
    jmp _loop

_last: # last part of string, less than 16 chars
    sub $16, %rdx
    neg %rdx
    # I need to delete possible garbage after the last chars
    psrldq %edx, %xmm8 
    jmp _compare

_end:
    ret 
```

（那里的控制流可能仍然有问题，但我稍后会处理。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T23:23:11.377

不要试图“删除” SSE 寄存器中的额外字节。相反，在您比较并执行 PMOVMSKB 之后，只需屏蔽掉生成的掩码中与额外字节相对应的位。这是矢量化中非常标准的方法；而不是跳过箍来获取您想要的数据，处理所有内容，然后清理您以后不想要的位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T22:06:34.800

我认为最简单的解决方案是使用 SSE 寄存器中的所有 16 个字符，但屏蔽`pmovmskb`. 请注意，像您一样使用 16 字节加载是不安全的，因为您可能会进入无法访问的页面。

# ruby-on-rails - ActiveRecord::关系代码显示而不是预期数据

> ID：15734865
> 
> 赞同：4
> 
> 时间：2013-03-31T21:41:42.533
> 
> 标签：ruby-on-rails, activerecord, controller, associations, nested-attributes

我试图在我的主页上显示评论列表，同时显示每条评论的评分。

我想要每个评论附加的不同评级的逗号分隔列表（基于关联的 review_id）；评分是 -5 到 5 的整数。我在加载页面时得到的只是：

```
Review 1\. #<ActiveRecord::Relation:0x007f9879749a50>
Review 2\. #<ActiveRecord::Relation:0x007f9879749a50>
Review 3\. #<ActiveRecord::Relation:0x007f9879749a50>
Review 4\. #<ActiveRecord::Relation:0x007f9879749a50>
Review 5\. #<ActiveRecord::Relation:0x007f9879749a50> 
```

当我想看到这个时：

```
Review 1\. 1, 5, 2, -3
Review 2\. 2, -1
Review 3\. 1, 1, 4, 5
Review 4\. -5, -2, -3
Review 5\. 1, 1, 3, 2, 1, 5, 3, 2 
```

用户模型：

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :ratings_attributes, :reviews_attributes

  has_many :reviews, dependent: :destroy
  has_many :ratings, :through => :reviews, dependent: :destroy
  accepts_nested_attributes_for :ratings, allow_destroy: true
  accepts_nested_attributes_for :reviews, allow_destroy: true
end 
```

审查模型：

```
class Review < ActiveRecord::Base
  attr_accessible :content, :priority, :ratings_attributes
  belongs_to :user
  has_many :ratings
end 
```

评级模型：

```
class Rating < ActiveRecord::Base
  attr_accessible :rating_count, :review_id, :timestamp, :user_id

  belongs_to :user
  belongs_to :review
end 
```

家庭控制器：

```
class HomeController < ApplicationController

  def index
    @reviews = current_user.reviews.order("position")
    @ratings = Rating.where(params[:review_id])
    @ratings_list = Rating.find(:all)
  end 
```

index.html.erb

```
<h1>Listing reviews</h1>
<p id="notice"><%= notice %></p>
<br />
  <div class="span12">

<ul id="reviews" data-update-url="<%= sort_reviews_url %>">
    <% @reviews.each do |review| %>
        <%= content_tag_for :li, review do %>
            <span class="handle">[drag]</span>
            <%= link_to h(review.content), review %>

            <!-- this is where i want a comma separated list of the different ratings attached to each review; ratings are integers of -5 to 5\. -->
            <%= @ratings %>

        <% end %>
    <% end %>
</ul>

<br />
  </div>
<!-- for debugging that i'm actually getting through to the ratings data -->
<%= @ratings_list %>
<br />

<%= link_to 'New Review', new_review_path %> 
```

对于我的生活，我无法弄清楚我是在控制器中还是在 html 中做错了什么。

每条评论旁边显示的都是这样的：

```
#<ActiveRecord::Relation:0x007f987a9d7618> 
```

提前谢谢……如果你在乎的话，我在外面工作，一只虫子飞到我的鼻子上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T21:46:07.983

您可能正在渲染实际的评论对象，而不是它们的字符串表示形式。像这样的东西应该在视图中起作用：

```
<%= @ratings.map { |rating| rating.rating_count }.join(", ") %> 
```

这会将您的评分集合转换为 rating_counts 的集合，然后用逗号将它们连接起来。

不过，我无法帮助解决鼻子上的虫子:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T01:38:40.393

查询在 Rails 中延迟执行。所以当你做这样的事情时，`Object.where(...)`它会返回关系对象（就像你看到的那样）。它只会在您实际使用它时执行（即循环或调用`.all`（尽管我相信`.all`rails 4 中的变化略有变化））。要获得逗号分隔的列表，您只需要做`<%= @ratings.map(&:rating_count).join(', ') %>`.

# java - 获取jar的内包路径

> ID：15734866
> 
> 赞同：0
> 
> 时间：2013-03-31T21:41:58.360
> 
> 标签：java

在我的 java 程序中，我有一个名为 resources 的包，我在其中保留了一个 log.ascii 文件，我在其中保存了一些详细信息。为此，我使用了该方法

`.class.getResource("/resources")`当我在 Eclipse 上测试它时一切正常，但是当我构建 jar 时它找不到路径。你知道如何克服这个问题吗？感谢您的时间

```
 private static String retrieveSelectedWorkspace() throws FileNotFoundException{

    String temp[];      
    String str=Gui.class.getResource("/resources").toString();

    temp=str.split("/",2);

    FileReader fr = null;
        fr = new FileReader(temp[1]+"/log.ascii");

    Scanner scanner = new Scanner(fr);

    while(scanner.hasNextLine())            
        return scanner.nextLine().toString();

    return null;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:56:13.900

`getResource`返回一个`URL`. 不要`toString`用它做一些丑陋的字符串连接。构建 JAR 后，URL 不是文件系统 URL。在 Eclipse 中开发并从那里运行时，您仍然有可以使用的文件。

当然，您不能写入 JAR 中的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T22:01:16.630

我认为您的代码可以改用[Class.getResourceAsStream()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)（`/resources/log.ascii`需要打包在 jar 中或类路径上的其他位置）。

```
private static String retrieveSelectedWorkspace() throws FileNotFoundException {
    InputStream in = Gui.class.getResourceAsStream("/resources/log.ascii");
    Scanner scanner = new Scanner(in);
    while(scanner.hasNextLine())            
        return scanner.nextLine().toString();
    return null;
} 
```

但是对于您的实际问题，您绝对可以从 jar 中获取文件夹资源，只要该文件夹包含在 jar 中即可。

测试.java：

```
class Test {
    public static void main(String[] args) {
        System.out.println(Test.class.getResource("/text.txt"));
        System.out.println(Test.class.getResource("/folder"));
    }
} 
```

命令行。创建一个文件和一个文件夹。然后尝试从`.class`文件运行代码和从文件运行代码`.jar`。

```
C:\Temp>echo text > text.txt

C:\Temp>md folder

C:\Temp>javac Test.java

C:\Temp>java Test
file:/C:/Temp/text.txt
file:/C:/Temp/folder 
```

创建罐子：

```
C:\Temp>jar cvf test.jar Test.class text.txt folder
added manifest
adding: Test.class(in = 530) (out= 347)(deflated 34%)
adding: text.txt(in = 7) (out= 9)(deflated -28%)
adding: folder/(in = 0) (out= 0)(stored 0%) 
```

从罐子里运行：

```
C:\Temp>java -classpath test.jar Test
jar:file:/C:/Temp/test.jar!/text.txt
jar:file:/C:/Temp/test.jar!/folder 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:55:42.880

尝试

```
getClass().getClassLoader().getResource("/resources"))) 
```

您也可以在一行中完成整个操作：

```
new Scanner(new InputStreamReader(getClass().getClassLoader().getResourceAsStream("/resources/log.ascii"))).useDelimiter("\\A").next() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T22:00:44.023

当您在 Eclipse 上运行时，log.ascii 是文件系统上的一个文件，但是当您打包到一个 jar 中时，log.ascii 是一个类似 zip 文件的条目。这就是为什么你没有完成它。

您可以创建一个临时文件或在系统属性[java.io.tmpdir](https://stackoverflow.com/questions/487590/best-practice-for-using-java-system-properties)指定的临时目录上创建文件以使其工作。

# java - 使用按钮切换选项卡以通过输入选项卡编号转到另一个选项卡？

> ID：15734868
> 
> 赞同：0
> 
> 时间：2013-03-31T21:42:01.417
> 
> 标签：java, android, search, tabs

我总共有 1000 多个标签/页面可供查看。我希望能够通过在 EditText 中输入一个数字来查看任何选项卡/页面，并且在单击 Button 时它应该跳转到指定的选项卡。例如，如果我在第 1 页，如果我输入“600”并点击搜索（按钮），我应该能够查看该特定页面并确保 600 旁边的页面应该是 601、601 ......以及之前600 应该是 599, 598....

```
public class MainActivity extends FragmentActivity {
SectionsPagerAdapter mSectionsPagerAdapter;
ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

public class SectionsPagerAdapter extends FragmentPagerAdapter {
    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    public Fragment getItem(int position) {
        switch(position){
        case 0:

        case 1: 
            Ang100s.Ang1 ang1 = new Ang100s.Ang1();
            return ang1;

        case 2: 
            Ang100s.Ang2 ang2 = new Ang100s.Ang2();
            return ang2;
        case 3: 
            Ang100s.Ang3 ang4 = new Ang100s.Ang3();
            return ang4;
        }
        Help help = new Help();
        return help;
    }
    @Override
    public int getCount() {
        return 1430;
    }
    @Override
    public CharSequence getPageTitle(int position) {
        Locale l = Locale.getDefault();
        for(int i = 1;i < 1430; i++){
            if(position == i){
                return "Ang " + position;
            }
        }
        return null;
    }
}

public static class Help extends Fragment {
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View rootView = inflater.inflate(R.layout.fragment_main_dummy,
                container, false);
        final Button search = (Button) rootView.findViewById(R.id.clicktosearch);
        final EditText number = (EditText)rootView.findViewById(R.id.number);
        search.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                if(number.getText().toString().equals("1")){

                }
            }
        });
        return rootView;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:49:13.810

使用 ViewPager，您可以使用`setCurrentItem(int)`并传递您想要显示的项目的索引。此外，您的 FragmentPagerAdapter 需要能够为从零到的任何索引生成一个项目`getCount()`- 目前它没有。

# c# - 在 WP7 中拦截 MediaPlayerLauncher 的 URL

> ID：15734875
> 
> 赞同：1
> 
> 时间：2013-03-31T21:42:42.573
> 
> 标签：c#, windows-phone-7, webbrowser-control, windows-phone

我目前正在研究一个`WebBrowser`控件。当点击某些视频链接时，会`MediaPlayerLauncher`自动打开播放视频。现在，如果我想拦截`MediaPlayerLauncher`并获取 mp4 文件的 URL 以对视频执行其他操作（添加到批处理播放列表/或下载）。

我怎样才能做到这一点？

我已经尝试打印事件的`e.Uri.ToString()`内部`webBrowser_Navigating()`，并且在启动期间没有调用它`MediaPlayerLauncher`。

谢谢。

# python - 如何使用 CreateView 并在表单中包含新 ForeignKey 模型的字段？

> ID：15734876
> 
> 赞同：1
> 
> 时间：2013-03-31T21:42:45.410
> 
> 标签：python, django, django-crispy-forms

默认情况下，CreateView/UpdateView 只包含一个用于选择已经存在的 ForeignKey 相关对象的下拉列表。

使用 django-crispy-forms，我如何拥有一个 CreateView 或 UpdateView，它不仅包括我的模型的字段，还包括用于创建通过 ForeignKey 相关的新模型的字段？

使用 CreateView/UpdateView 并使用常规 FBV 会更好吗？如果是这样，我会怎么做？

我在快速学习 Django 方面没有太大问题，但要围绕视图/表单/模型的交互方式进行思考并非易事。

```
class Property(models.Model):
    name = models.CharField(max_length=128)
    address = models.ForeignKey(PostalAddress, blank=True, null=True)

class PostalAddress(models.Model):
    street_address = models.CharField(max_length=500)
    city = models.CharField(max_length=500)
    state = USStateField()
    zip_code = models.CharField(max_length=10)

class PropertyUpdateView(UpdateView):
    model = Property

class PropertyCreateView(CreateView):
    model = Property 
```

我一直在尝试添加`form_class = PropertyForm`到 CreateView/UpdateView，并使用类似的东西：

```
class PropertyForm(ModelForm):

    def __init__(self, *args, **kwargs):
        self.helper = FormHelper()
        self.helper.form_id = 'id-propertyForm'
        self.helper.form_method = 'post'

        self.helper.layout = Layout(
            Fieldset(
                'Edit Property',
                'name',
            ),
            ButtonHolder(
                Submit('submit', 'Submit')
            )
        )

        super(PropertyForm, self).__init__(*args, **kwargs)

    class Meta:
        model = Property 
```

...但我不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T14:51:49.953

我已经围绕我在评论中链接到的[博客文章建立了一个答案。](http://blog.yourlabs.org/post/20001556462/howto-javascript-popup-form-returning-value-for-select)

我首先找到了一种合乎逻辑的方法来在我的表单中包含“添加新”链接，我决定的解决方案是为我想要具有该功能的表单小部件提供模板。我的表格如下所示：

```
# core/forms.py
class IntranetForm(ModelForm):
    def __init__(self, *args, **kwargs):
        super(IntranetForm, self).__init__(*args, **kwargs)
        self.helper = FormHelper(self)
        self.helper.form_class = 'form-horizontal'

# app/forms.py
class ComplaintForm(IntranetForm):
    def __init__(self, *args, **kwargs):
        super(ComplaintForm, self).__init__(*args, **kwargs)
        self.helper.layout = Layout(
            Field(
                'case',
                css_class='input-xlarge',
                template='complaints/related_case.html',
            ),
            Field('date_received', css_class = 'input-xlarge'),
            Field('stage', css_class = 'input-xlarge'),
            Field('tags', css_class = 'input-xlarge'),
            Field('team', css_class = 'input-xlarge'),
            Field('handler', css_class = 'input-xlarge'),
            Field('status', css_class = 'input-xlarge'),
            FormActions(
                Submit(
                    'save_changes',
                    'Save changes',
                    css_class = "btn-primary"
                ),
                Button(
                    'cancel',
                    'Cancel',
                    onclick = 'history.go(-1);'
                ),
            ),
        )

    class Meta:
        model = Complaint
        fields = (
            'case',
            'date_received',
            'stage',
            'tags',
            'team',
            'handler',
            'status',
        ) 
```

请注意在第一个字段中添加了一个模板参数。该模板如下所示：

```
<div id="div_id_case" class="control-group">
<label for="id_case" class="control-label ">Case</label>
<div class="controls">
<select class="input-xlarge select" id="id_case" name="case"></select>
&nbsp;<a href="{% url 'add_case' %}" id="add_id_case" class="add-another btn btn-success" onclick="return showAddAnotherPopup(this);">Add new</a>
</div>
</div> 
```

当 django 渲染我的`case_form.html`模板时，上面的 html 被插入为相关的表单字段。完整`complaint_form.html`模板包含调用案例表单的 javascript 代码。该模板如下所示：

```
{% extends 'complaints/base_complaint.html' %}
{% load crispy_forms_tags %}

{% block extra_headers %}
{{ form.media }}
{% endblock %}

{% block title %}Register complaint{% endblock %}

{% block heading %}Register complaint{% endblock %}

{% block content %}
{% crispy form %}
<script>
$(document).ready(function() {
    $( '.add-another' ).click(function(e) {
        e.preventDefault(  );
        showAddAnotherPopup( $( this ) );
    });
});

/* Credit: django.contrib.admin (BSD) */

function showAddAnotherPopup(triggeringLink) {
    /*

    Pause here with Firebug's script debugger.

    */
    var name = triggeringLink.attr( 'id' ).replace(/^add_/, '');
    name = id_to_windowname(name);
    href = triggeringLink.attr( 'href' );

    if (href.indexOf('?') == -1) {
        href += '?popup=1';
    } else {
        href += '&popup=1';
    }

    href += '&winName=' + name;

    var win = window.open(href, name, 'height=800,width=800,resizable=yes,scrollbars=yes');
    win.focus();

    return false;
}

function dismissAddAnotherPopup(win, newId, newRepr) {
    // newId and newRepr are expected to have previously been escaped by
    newId = html_unescape(newId);
    newRepr = html_unescape(newRepr);
    var name = windowname_to_id(win.name);
    var elem = document.getElementById(name);

    if (elem) {
        if (elem.nodeName == 'SELECT') {
            var o = new Option(newRepr, newId);
            elem.options[elem.options.length] = o;
            o.selected = true;
        }
    } else {
        console.log("Could not get input id for win " + name);
    }

    win.close();
}

function html_unescape(text) {
 // Unescape a string that was escaped using django.utils.html.escape.
    text = text.replace(/</g, '');
    text = text.replace(/"/g, '"');
    text = text.replace(/'/g, "'");
    text = text.replace(/&/g, '&');
    return text;
}

// IE doesn't accept periods or dashes in the window name, but the element IDs
// we use to generate popup window names may contain them, therefore we map them
// to allowed characters in a reversible way so that we can locate the correct
// element when the popup window is dismissed.
function id_to_windowname(text) {
    text = text.replace(/\./g, '__dot__');
    text = text.replace(/\-/g, '__dash__');
    text = text.replace(/\[/g, '__braceleft__');
    text = text.replace(/\]/g, '__braceright__');
    return text;
} 

function windowname_to_id(text) {
    return text;
}
</script>
{% endblock %} 
```

那里的 javascript 完全是从我链接到的博客条目中复制/粘贴的，它`CaseCreateView`在弹出窗口中调用 my ，其中包括我们已经查看过的表单。现在您需要该表单将返回值传递给您的原始页面。

我通过在案例**详细信息**页面中包含以下脚本来做到这一点。这意味着当我的表单重定向到保存时的详细信息页面时，我的表单将在调用脚本之前正确保存。详细模板如下所示：

```
{% extends 'complaints/base_complaint.html' %}

{% block content %}
<script>
$(document).ready(function() {
    opener.dismissAddAnotherPopup( window, "{{ case.pk }}", "{{ case }}" );
});
</script>
{% endblock %} 
```

这会在页面呈现后立即关闭。这对您来说可能并不理想，但您可以通过例如覆盖表单在保存时重定向到的页面并将其用作上述脚本的便利存储来更改该行为，但仅此而已。注意它是如何传回 case 主键和它的 unicode 表示的？这些现在将填充`<option>`原始表单中的选定字段，您就完成了。

# jquery - Bootstrap Typeahead - 在输入模糊上运行更新程序功能？

> ID：15734878
> 
> 赞同：2
> 
> 时间：2013-03-31T21:42:54.303
> 
> 标签：jquery, twitter-bootstrap, input, blur, typeahead.js

我已将 typeahead 附加到一系列输入框。当从预先输入列表中选择项目时，我还使用更新器函数将关联值添加到隐藏输入。我当前的代码如下。

**HTML：**

```
<div id="iwrapper" class="currentIng">
    <input type="hidden" name="ingredientId[]">
    <input type="text" name="ingredient[]" id="ingredient11" class="ingLeft ingName" autocomplete="off">
</div> 
```

**Javascript：**

```
$(function() {
var labels, mapped;
   $('.ingName').typeahead({
       source: function(query, process) {
           labels = [];
           mapped = {};
           var data = [{"iname":"Almond","ingid":"1","mabbr":"LOR"},{"iname":"Amaretto","ingid":"2","mabbr":"LOR"}, etc];
           $.each(data, function(i, ing) {
               var query_label = ing.iname + ' [' + ing.mabbr + ']';
               mapped[query_label] = ing;
               labels.push(query_label);
           });
           process(labels);
       },
       updater: function(query_label) {
           var ing = mapped[query_label];
           var input_label = ing.ingid; 
           $("ul.typeahead.dropdown-menu:visible").siblings("input[type='hidden']").val(input_label);
           return query_label;
       }
   };);
}); 
```

因此，如果用户开始输入 Almond，则会显示**Almond [LOR] 。**如果用户在列表中选择了该条目，则更新程序运行并且值**1**将被添加到隐藏的输入字段。这一切都很好。

**问题：** 如果用户输入整个值并点击离开输入，隐藏的输入值不会更新。

**问题：** 当输入字段失去焦点时，有什么方法可以更改我的代码以使更新程序运行？

这是一个工作示例，对可见性进行了一些小的编辑： [JSFiddle](http://jsfiddle.net/NW6pc/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T05:31:57.007

Bootstrap typeahead 插件已在 Bootstrap 3 中被 Twitter 的[typeahead.js 插件](https://github.com/twitter/typeahead.js/)取代，该插件具有更丰富的功能。这是使用该插件的一些演示代码：

```
function updater(event, suggestion) {
  console.log(suggestion.value);
}
$('.ingName').typeahead({local: ['abc', 'abd', 'def']});
// probably not necessary, if blur event is always fired
// $('.ingName').on('typeahead:selected', updater);
$('.ingName').on('blur', function(e) {
  var value = $(this).val(), datasets = $(this).data('ttView').datasets;
  for (var i = 0; i < datasets.length; i++) {
    var dataset = datasets[i];
    dataset.getSuggestions(value, function(suggestions) {
      for (var j = 0; j < suggestions.length; j++) {
        if (suggestions[j].value === value) {
          updater(e, suggestions[j]);
          return;
        }
      }
    });
  }
}); 
```

这不太适合您的数据，因为您有一个对象数组而不是字符串数组。如果您的数据来自 JSON 文件，那么您可以使用`prefetch`带有过滤功能的参数；如果数据始终是本地的，那么如果您想继续使用对象而不是字符串，则可以提供自己的模板/引擎参数。上面的这段代码至少包含了你最初询问的模糊处理代码，我希望这个插件对你有帮助。

# c++ - 简单数组查找最高值和最低值的索引位置

> ID：15734884
> 
> 赞同：1
> 
> 时间：2013-03-31T21:43:19.083
> 
> 标签：c++, arrays, visual-c++, logic

我正在尝试编写一个简单的逻辑程序来找到已经完成的最高和最低值。问题是如何找到索引位置是当它找到最高和最低值时。见附图。 ![在此处输入图像描述](https://i.stack.imgur.com/XSBPp.png)

```
#include <iostream>

using namespace std;

int main()
{

int number=0, min=0, max=0;
int *rangeOfNumbers = new int[];

cout<<"Enter 5 numbers: ";

for(int i=0; i<5;i++)
{
    cout<<"Enter number "<<i+1<<": ";
    cin>>rangeOfNumbers[i];
}

//max min array positions

min=rangeOfNumbers[0];
max=rangeOfNumbers[0];

//find max and mins
for(int j=0; j<5;j++)
{
if(max<rangeOfNumbers[j])
{
    max=rangeOfNumbers[j];
}
else if(min>rangeOfNumbers[j])
{
    min=rangeOfNumbers[j];
}
}

cout<<"\n\nMin number: "<<min;
cout<<"\nMax number: "<<max;

cin.get();
cin.get();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T21:45:39.193

除了更新 min 和 max 之外，还保留一个索引变量并更新它。

```
//max min array positions

min=rangeOfNumbers[0];
max=rangeOfNumbers[0];
int minindex = 0;
int maxindex = 0;

//find max and mins
for(int j=0; j<5;j++)
{
  if(max<rangeOfNumbers[j])
  {
    max=rangeOfNumbers[j];
    maxindex = j;
  }
  if(min>rangeOfNumbers[j])
  {
    min=rangeOfNumbers[j];
    minindex = j;
  }
}

maxindex += 1;
minindex += 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:48:17.353

`max`将and更改`min`为`indexOfMax`and `indexOfMin`，因为通过存储最大索引，您可以访问最大索引和最大值。

所以你应该把它改成`max if`这样：

```
if(rangeOfNumbers[indexOfMax] < rangeOfNumbers[j])
{
    indexOfMax = j;
} 
```

自己继续对其他行进行此更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T21:48:17.717

不知道如何编译代码：

```
int *rangeOfNumbers = new int[]; 
```

新建整数数组时需要指定大小。

```
int *rangeOfNumbers = new int[5]; 
```

我在 gcc 4.5.3 下编译，得到以下错误：

```
 error: expected primary-expression before ‘]’ token 
```

您还需要记住扫描数组的索引`max`和时间。`min`

例如：在`for`循环之前，初始化：

```
int maxIndex = -1; 
```

for循环内部：

```
if (max < A[i])
{
   maxIndex = i;
   max = A[i];
} 
```

应该为`min`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T22:03:19.607

这可能与您现在正在寻找的内容相去甚远。**但是，如果您要执行一些密集的算法（例如查找最大值和最小值），则应该习惯于 stl 容器（向量、列表和所有这些东西）。**

好处是许多算法已经可用并且针对性能进行了优化。

我认为你的例子只是一个练习。无论如何，如果不是，她会怎么做

例如，这个问题非常适合使用向量。这是一个例子

```
#include <iostream>
#include<vector>
#include<algorithm>

using namespace std;

int main()
{

    int number=0, min=0, max=0;
    vector<int> rangeOfNumbers;

    cout<<"Enter 5 numbers: ";

    for(int i=0; i<5;i++)
    {
        cout<<"Enter number "<<i+1<<": ";
        cin>>number;
        rangeOfNumbers.push_back(number);
    }

    vector<int>::iterator maxelem = max_element(rangeOfNumbers.begin(), rangeOfNumbers.end());
    vector<int>::iterator minelem = min_element(rangeOfNumbers.begin(), rangeOfNumbers.end());

    cout << endl << "Max number: " << (*maxelem) << " at " << std::distance(rangeOfNumbers.begin(), maxelem) + 1;
    cout << endl << "Min number: " << (*minelem)<< " at " << std::distance(rangeOfNumbers.begin(), minelem) + 1;

    cin.get();

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-09T03:41:11.713

我建议进行微小的优化，如果您在第 0 项初始化**min**和**max**为什么再次要求相同的元素

> 对于 (int I = 0;

到位

> 对于 (int I = 1;

源代码：

```
#include <iostream>

using namespace std;

#define SIZE 5

int main()
{

    int min=0, max=0;
    int *rangeOfNumbers = new int[SIZE];

    cout<<"Enter 5 numbers: ";

    for(int i=0; i < SIZE; i++)
    {
        cout<<"Enter number " << i + 1 <<": ";
        cin>>rangeOfNumbers[i];
    }

    //max min array positions

    min = rangeOfNumbers[0];
    max = rangeOfNumbers[0];

    int minindex = 0;
    int maxindex = 0;

    //find max and mins
    for(int j = 1; j < SIZE; j++)
    {
        if( max < rangeOfNumbers[j])
        {
            max = rangeOfNumbers[j];
            maxindex = j;
        }
        if( min > rangeOfNumbers[j])
        {
            min = rangeOfNumbers[j];
            minindex = j;
        }
    }

    maxindex += 1;
    minindex += 1;

    cout<<"\n\nMin number: "<<min;
    cout<<"\nMax number: "<<max;

    cin.get();
    cin.get();

    return 0;
} 
```

# actionscript-3 - 划分时的奇怪行为

> ID：15734888
> 
> 赞同：0
> 
> 时间：2013-03-31T21:43:45.540
> 
> 标签：actionscript-3, flash, operators

快速的问题，但这让我发疯：

这不是：

```
return c*(t/=d/2)*t*t + b; 
```

相同：

```
t = t/d/2;
return c*(t)*t*t + b; 
```

因为看起来不是，所以我得到了不同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:51:27.627

/ 运算符是左结合的。这意味着

```
t = t/d/2; 
```

是相同的：

```
t = (t/d)/2; 
```

当然，

```
t /= d/2; 
```

可以：

```
t = t/(d/2); 
```

Actionscript 的文档：http: [//help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7fd1.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7f68](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7fd1.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7f68)

# mysql - 分组密码、盐、AES、MySQL 和凭证存储的最佳实践

> ID：15734892
> 
> 赞同：3
> 
> 时间：2013-03-31T21:44:20.840
> 
> 标签：mysql, aes, block-cipher

我有一种情况，我必须存储密码，因为我正在构建一个系统以连接到另一个系统。这个其他系统只允许一个用户帐户，并且连接到它的唯一方法是通过密码。哈希在这里不合适。我必须以可以检索的方式存储密码。

现在，知道这不是一个完美的系统，我正试图限制如果有人以某种方式访问​​数据库的损害。由于这个数据库需要被不同的平台使用，我决定使用 MySQL 自己的内置加密功能。这样，我就不用担心为各种语言和系统找到兼容的加密/解密算法实现了。我可以在查询中使用 MySQL 的函数。

存储密码时，我将使用`AES_ENCRYPT("password", "encryption key")`. 然后我意识到我可能应该使用一些盐，这样如果他们能够获得一个密码，就很难获得其他密码。可是等等！重点是什么？如果他们能够获得一个密码，他们必须拥有加密密钥，是吗？

此外，这是一个分组密码。在某些情况下，盐几乎是无用的。

```
/* Returns 8CBAB2A9260975FF965E5A7B02E213628CBAB2A9260975FF965E5A7B02E21362FBB5D173CBAFA44DC406B69D05A2072C */
SELECT HEX(AES_ENCRYPT("passwordpasswordpasswordpassword", "encryption key"));

/* Returns 8CBAB2A9260975FF965E5A7B02E213628CBAB2A9260975FF965E5A7B02E21362C49AF8D5B194770E64FEF88767206391 */
SELECT HEX(AES_ENCRYPT("passwordpasswordpasswordpassworda", "encryption key")); 
```

## 我的问题

*   我是否认为在像我这样的情况下使用对称加密时没有理由使用盐？

*   鉴于我**必须**以允许我检索原始值的方式存储密码，我应该考虑其他方法吗？（我知道我需要注意加密密钥的存储位置和方式，并且我还需要保护我的 MySQL 日志。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T22:29:20.363

通常对于标准 AES，您会提供一个随机数（IV），以避免您描述的问题。

一种大幅提高加密数据质量的方法是为每个帐户使用不同的主密码，而不是改变 IV。基本上，这是您与密码混合的一些数据。你可以通过多种方式做到这一点，最简单的是做一个 concat。

例如

1.  创建一个随机序列。
2.  存储随机数 || HEX(AES_ENCRYPT(password_to_store, master_password || nonce)
3.  通过提取随机数进行检索，然后使用 master_password || 解密数据 随机数。

这是一个示例，具有唯一的 nonce 'iej383u8fjeiw'（每次加密时都需要生成一个新的）

```
SELECT CONCAT('iej383u8fjeiw', ':', HEX(AES_ENCRYPT("password", CONCAT("master_password", "iej383u8fjeiw")))) 
-> "iej383u8fjeiw:61224653D4DA33D57A42FE5E5E10DEA9"

SELECT AES_DECRYPT(UNHEX(SUBSTRING_INDEX('iej383u8fjeiw:61224653D4DA33D57A42FE5E5E10DEA9', ':', -1)), CONCAT('master_password', SUBSTRING_INDEX('iej383u8fjeiw:61224653D4DA33D57A42FE5E5E10DEA9', ':', 1))) 
-> "password" 
```

或使用变量：

```
SELECT CONCAT(nonce, ':', HEX(AES_ENCRYPT(password_to_encrypt, CONCAT(master_password, nonce)))) 
-> encrypted password

SELECT AES_DECRYPT(UNHEX(SUBSTRING_INDEX(encrypted_password, ':', -1)), CONCAT(master_password, SUBSTRING_INDEX(encrypted_password, ':', 1)))
-> password_to_encrypt 
```

也就是说，虽然比没有 nonce 的版本安全得多，但仍然存在很多弱点和攻击向量。例如，查询记录或嗅探 mysql 数据包将同时显示密码和主密码！

# asp.net-mvc-4 - 使用自定义 UserProfile 扩展默认 AccountController/Manage

> ID：15734896
> 
> 赞同：1
> 
> 时间：2013-03-31T21:45:04.890
> 
> 标签：asp.net-mvc-4

默认的 MVC 4 应用程序包括一个 AccountController，它确实实现了通常的帐户相关方法。登录后，如果激活了 OAuth，您就 `Account/Manage/`可以`LocalPasswordModel`更改密码和管理外部登录。

在使用附加数据扩展 UserProfile 之后，我想给我的用户一个更改它的选项。我可以创建一个使用`UserProfile`as 模型的新视图，但我想将其添加到现有的 Manage 视图中，但该视图`LocalPasswordModel`用作模型。

如果我的问题真的很基本，我深表歉意，但是如何将两者结合起来？

# paypal - Paypal 付款标准购物车运输选项

> ID：15734900
> 
> 赞同：0
> 
> 时间：2013-03-31T21:45:20.087
> 
> 标签：paypal

我正在阅读付款标准文档，该文档清楚地显示了在买家登录或提供账单信息后，Paypal 购物车提供的运输选项下拉菜单。

我在美国的个人资料中设置了几个送货选项，并将它们设置为“有效”，但是当我从美国地址的帐户结帐时，运费总是设置为我列表中的第一个选项轮廓。结帐页面上不显示选择下拉菜单。

我的添加到购物车按钮没有传递运输选项，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:55:09.377

默认情况下，运输选项将默认为最便宜的选项。因此，如果第一个选项是最便宜的，这将是它的默认值。在您登录 PayPal 帐户或输入您的信用卡信息并继续进入第二个付款页面之前，您将不会看到用于选择不同运输选项的下拉选项。进入此页面后，您的买家将可以选择不同的运输方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:29:03.410

我找到了答案。显然，当您创建适用于特定州的运输选项，然后创建适用于“所有州”的其他选项时，Paypal 会忽略“所有州”选项，而仅显示那些专门列出进行购买的州的选项。就我而言，有一个这样的选项，它是 Paypal 在结帐时唯一使用的选项。手动将所有 50 个州单独添加到我的“所有州”运输选项可以解决问题，但似乎没有必要。

# c - 在C中，为什么在单独的语句中定义全局变量会引发警告，但对于局部变量可以？

> ID：15734901
> 
> 赞同：2
> 
> 时间：2013-03-31T21:45:25.563
> 
> 标签：c, expression, declaration

在下面的代码中，为什么全局变量“x”的定义显示警告“数据定义没有类型或存储类”但同样的事情对局部变量“y”工作正常？我为每个变量做的都是是首先在一个语句中声明它们，然后在另一个语句中定义它们。它对一个语句工作正常但对另一个语句显示警告有什么区别？

```
 #include<stdio.h>

      int x;
      x=303;

     int main(void)
      {
        int y;
        y=776 ;

        printf("The value of x is %d,and of y is %d",x,y);
      } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T21:49:28.483

您正在 C89 模式下编译。

```
 int x; 
```

是 的暂定定义`x`。

```
 x=303; 
```

`x`然后被解释为具有隐式类型`int`( `int x = 303;`)的变量的定义。在 C99 或更高版本下，该代码将无法编译，因为“隐式`int`”规则已被废除，并且没有“隐式`int`”规则，第二行只能解释为语句，这在文件范围内是不允许的。

编译`-std=c89 -Wall -Wextra -pedantic`（并添加`return 0;`到`main`），gcc 警告

```
redef.c:4:1: warning: data definition has no type or storage class [enabled by default]
redef.c:4:1: warning: type defaults to ‘int’ in declaration of ‘x’ [-Wimplicit-int] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T21:49:20.720

原因是这两行：

```
 int x;
  x = 303; 
```

由声明语句 ( `int x;`) 和用作语句 ( ) 的表达式组成`x = 303;`。C 编程语言只允许在全局范围内进行声明和定义，而不允许在全局范围内进行表达式。但是，声明语句和表达式语句在 C 函数内部都是合法的。

一种直观的思考方式如下：代码何时`x = 303;`在全局范围内执行？想象一下我们有这个程序：

```
int x = 1;

void myFunction() {
    printf("%d\n", x);
}

x = 303; 
```

在这里，`x`会`myFunction`看到什么值？它会看到值 1，还是会看到值 303？

另一方面，如果我们有

```
void myFunction() {
    int x;
    x = 303;
    printf("%d\n", x);
} 
```

更清楚一点的是，我们应该按顺序执行这些语句，所以`303`会被打印出来。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T21:47:13.893

您不能在任何功能/块之外执行代码。`x=303;`在您编写它的位置无效。

在这种精确的情况下（全局范围），您只能使用 直接初始化变量`int x=303`。

# objective-c - 在容器视图中访问 UITableViewController

> ID：15734909
> 
> 赞同：0
> 
> 时间：2013-03-31T21:46:37.023
> 
> 标签：objective-c, uitableview, delegates, ios6.1, container-view

我在容器视图中嵌入了一个 UITableViewController。UITableViewController 有一个我想在主视图控制器中访问的委托方法。

我可以将容器中的视图分配给主视图中的属性 - 但是我无法访问嵌入的视图控制器并将其设置为委托。

我怎样才能做到这一点？如果需要，我可以发布代码...不确定我可以发布什么有用的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:56:37.643

好的...我的问题是我试图通过容器视图本身访问 TableViewController。

我应该做的 - 现在正在做的是寻找容器视图和 UITableViewController 之间的嵌入 segue。然后可以根据需要设置委托方法等！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:23:47.307

您应该在主容器视图中创建一个属性，并在创建时将 UITableViewController 分配给它。完成后，您只需访问此属性即可调用所需的委托方法。例如：

```
@interface ContainerViewController : UIViewController

@property (weak) UITableViewController *tableViewController;

@end

@implementation ContainerViewController

- (void)createTableViewController {

  self.tableViewController = [[UITableViewController alloc] initWithStyle:UITableViewStylePlain];
}

- (void)callTableViewControllerDelegate {

   if(self.tableViewController)
     [self.tableViewController delegateMethod];  //etc
}

@end 
```

# ruby-on-rails - heroku 部署问题，返回：致命：未指定路径

> ID：15734915
> 
> 赞同：0
> 
> 时间：2013-03-31T21:46:57.663
> 
> 标签：ruby-on-rails, git, deployment, heroku

我是一个 Windows 用户，一直在学习 Michael Hartl 的 Ruby on Rails 教程（[http://ruby.railstutorial.org/chapters/ruby-on-rails-tutorial](http://ruby.railstutorial.org/chapters/ruby-on-rails-tutorial)），我一直在完美地遵循一切，直到我尝试使用以下命令将应用程序部署到heroku：

```
sample_app>git push heroku master
fatal: No path specified. See 'man git-pull' for valid url syntax 
```

我看过类似的问题，所有建议的修复都对我不起作用。一些可能有用的附加信息：

```
sample_app>git remote -v
heroku  [git@heroku.com:oscure-dawn-8059.git] (fetch)
heroku  [git@heroku.com:oscure-dawn-8059.git] (push)
origin  [git@github.com:hassankbrian/sample_app.git] (fetch)
origin  [git@github.com:hassankbrian/sample_app.git] (push) 
```

以下是 .git/config 的内容：

```
[user]
        name =  Brian   
        email = hassankbrian@gmail.com
[core]
        repositoryformatversion = 0
    filemode = false
    bare = false
    logallrefupdates = true
    symlinks = false
    ignorecase = true
    hideDotFiles = dotGitOnly
[branch "master"]
[remote "origin"]
    url = [git@github.com:hassankbrian/sample_app.git]
    fetch = +refs/heads/*:refs/remotes/origin/*
[remote "heroku"]
    url = [git@heroku.com:oscure-dawn-8059.git]
    fetch = +refs/heads/*:refs/remotes/heroku/*
[heroku]
    remote = heroku 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-17T07:06:37.947

这与使用“ssh://”前缀和存储库名称中的相对语法的组合有关。似乎与使用的 gitolite 有关。没有斜线加上“ssh://”前缀似乎混淆了它。

*   ssh://git@server:relative - 否
*   git@server:relative - 是
*   ssh://git@server/relative - 也许（gitolite 对此很满意）
*   ssh://git@server:/relative - 也许（gitolite 对此很满意）
*   ssh://git@server/absolute - 是

希望这可以帮助。

# mysql - 使用 MySQL subQuery 获取个人总数

> ID：15734916
> 
> 赞同：0
> 
> 时间：2013-03-31T21:47:07.013
> 
> 标签：mysql

我试图让我的 MySQL 表返回给定年份每个成员的总金额行。下面是我写的SQL查询

```
SELECT First_name, last_name, (SELECT SUM(amount)
FROM contributions
WHERE contributions.memberid = members.memberid AND year = '2013') AS amount  FROM members 
```

我得到这个错误

MySQL 错误#：1064

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 '' 附近使用正确的语法

我正在使用 MySQL 5.5.24

请问我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:51:05.740

我唯一能看到的是你有单引号中的年份，但我没有重现[这个演示](http://www.sqlfiddle.com/#!2/4d346/2)中的错误。

您还可以使用子查询和 JOIN 编写查询：

```
select m.first_name,
  m.last_name,
  c.amount
from members m
inner join
(
  select sum(amount) Amount, memberid
  from contributions
  where year = 2013
  group by memberid
) c
  on m.memberid = c.memberid 
```

看[演示](http://www.sqlfiddle.com/#!2/4d346/2)

如果您没有存储`year`在单独的列中并且您有一个 datetime 列，那么您将需要使用该`year()`函数：

```
select m.first_name,
  m.last_name,
  c.amount
from members m
inner join
(
  select sum(amount) Amount, memberid
  from contributions
  where year(yourDate) = 2013
  group by memberid
) c
  on m.memberid = c.memberid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:28:04.460

或者也许以这种方式更改您的代码：

```
SELECT First_name, 
last_name, 
(SELECT SUM(amount) 
FROM contributions 
WHERE contributions.memberid = members.memberid 
 AND contributions.year = '2013') AS amount 
FROM members 
```

我只改变这一行，

```
AND contributions.year = '2013' 
```

因为可能在您的查询中存在歧义（两个表中都存在）

萨卢多斯）

# java - Java 对象的区别

> ID：15734918
> 
> 赞同：0
> 
> 时间：2013-03-31T21:47:12.380
> 
> 标签：java, object

这两个列表有什么区别？

```
ArrayList<String> list1 = new ArrayList<String>(2);

List<String> list2 = new ArrayList<String>(2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:48:45.933

list2 的类型是 List，因此您以后可以更轻松地更改确切的类型（而不是使用 ArrayList）。对于 list1，类型显式为 ArrayList。

您应该尽可能地尝试更通用（使用列表），因为这样更灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:49:26.257

这两个列表之间没有区别，每次创建`ArrayList`.

不同的是`ArrayList implements List`，它是一个接口。

`List`在您的代码中，如果您引用接口而不是具体实现，您可以随时换出实际的实现。

# java - 给定频率的霍夫曼树混淆如何开始？爪哇

> ID：15734922
> 
> 赞同：5
> 
> 时间：2013-03-31T21:47:38.597
> 
> 标签：java, huffman-code

我试图了解如何处理我的作业问题。我正在尝试创建一个将在 Java 中编码和解码消息的霍夫曼树。我得到了字符串和频率。

```
[a=10, b=15, c=12, e=3, nl=4, sp=13, t=1]. 
```

我知道使用霍夫曼树，您可以将两个最低频率并将它们制成一棵树，并将它们的频率之和作为父级。我知道使用优先队列我可以将所有频率插入其中并使用该`remove()`方法取出 2 个最低频率。然后将它们加在一起以获得它们的权重，然后将该权重插入队列并重复。

最后一棵树的重量应为

```
[58=root, root.left = 33, root.right = 25]   
[33.left = 18,  18.left = 8,  8.left = 4] 
```

我不确定如何开始实现霍夫曼树代码，该代码将能够创建具有频率的树并显示树。我查看了其他代码，似乎它们都是从 Streaming Input Code 左右创建的。

任何帮助都会让我继续前进。提前致谢！

我想用如下格式打印出来：（预购遍历）

```
58  
- 33  
- - 18  
- - - 8  
- - - - 4  
- - - - - 1:t  
- - - - - 3:e  
- - - -  4:nl  
- - - 10:a  
- - 15:b  
- 25  
- - 12:c  
- - 13:sp 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T23:40:03.983

```
import java.util.PriorityQueue;

public class Node implements Comparable<Node> {
    Node left;
    Node right;
    Node parent;
    String text;
    int frequency;

    public Node(String textIn, int frequencyIn) {
        text = textIn;
        frequency = frequencyIn;
    }

    public Node(int frequencyIn) {
        text = "";
        frequency = frequencyIn;
    }

    public int compareTo(Node n) {
        if (frequency < n.frequency) {
            return -1;
        }
        else if(frequency > n.frequency) {
            return 1;
        }
        return 0;
    }

    public static void printFromPreOrder(Node n, String dashes) {
        // print with colon if leaf node
        if (n.text != "") {
            System.out.println(dashes + n.frequency + ":" + n.text);
        }
        else {
            System.out.println(dashes + n.frequency);
        }

        // Start recursive on left child then right
        if (n.left != null) {
            printFromPreOrder(n.left, dashes + "-");
        }
        if (n.right != null) {
            printFromPreOrder(n.right, dashes + "-");
        }
    }

    // Returns root node to pass to printFromPreOrder
    public static Node makeHuffmanTree(int frequencies[], String text[]) {
        PriorityQueue<Node> queue = new PriorityQueue<Node>();
        for (int i = 0; i < text.length; i++) {
            Node n = new Node(text[i], frequencies[i]);
            queue.add(n);
        }
        Node root = null;
        while (queue.size() > 1)  {
            Node least1 = queue.poll();
            Node least2 = queue.poll();
            Node combined = new Node(least1.frequency + least2.frequency);
            combined.right = least1;
            combined.left = least2;
            least1.parent = combined;
            least2.parent = combined;
            queue.add(combined);
            // Keep track until we actually find the root
            root = combined;
        }
        return root;
    }

    public static void main(String[] args) {
        int frequencies[] = {10, 15, 12, 3, 4, 13, 1};
        String text[] = {"a", "b", "c", "e", "nl", "sp", "t"};
        Node root = Node.makeHuffmanTree(frequencies, text);
        Node.printFromPreOrder(root, "");
    }
} 
```

这对你有用。我已经包含了您的示例，但它应该适用于任意数量的频率和文本。只要确保频率和文本大小相同，因为我没有进行错误检查。

# c - 我如何编写这个涉及 Unicode 的 C 代码？

> ID：15734923
> 
> 赞同：1
> 
> 时间：2013-03-31T21:47:45.443
> 
> 标签：c, word-frequency

我有一个类似的问题，询问哪种语言最适合这项任务，Perl 就是答案。但我仍然很好奇如何用 C 解决这个问题。

我想给这个程序一个大的文本文件，里面装满了从小说、报纸、网页中提取的德语文本样本。我想要一个文本文件中所有单词的频率列表，按最常见的单词排序。我需要 3000 个最常见的德语单词列表。

如果这只是一个 ASCII 问题，那么这对我来说就是小菜一碟。整个上午都在阅读有关 Unicode 的内容后，我真的很惊讶它是一个雷区。

这是如何在 C 中完成的？

我有一个朋友用 Python 编写了一些东西，但他还是个初学者，他的代码在一个 1.4 MB 的文本文件上花了大约 30 分钟。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T22:30:07.523

这取决于编码。最简单的一种是 UTF-8，您可以在其中简单地将字符串存储在`char*`数组中。令人惊讶的是，构建频率列表将使用与 ASCII 文本几乎相同的代码来完成。这是一种 UTF-8 魔法，但这就是为什么这种编码如此强大的原因！

在这种情况下，您应该记住以下几点：

1.  Unicode 提供比 ASCII 更多的白色字符。您需要一份它们的列表才能知道单词的分隔位置。令人高兴的是，[维基百科有一个](http://en.wikipedia.org/wiki/Whitespace_character).

2.  Unicode 并不总是明确的。在某些情况下，不同的序列会产生相同的字符。它通常发生在组合字符中：例如德语`Ä`可以表示为：

    *   字符`U+00C4`- 单个字母`Ä`
    *   序列`U+0041 U+0308`- 拉丁字母`A`和分音符（变音符号）。

令人高兴的是，在德语中只有七个非英文字符：`ÄäÖöÜüß`. 您需要检查它们的替代变体的外观（例如[，](http://www.unicode.org/charts/PDF/U0080.pdf)在第 4 页和第 5 页，您应该找到所有德语字符及其替代形式）。

当然，要解决这两个问题，您还需要知道您的所有发现如何在 UTF-8 中表示。这在[RFC 3629](https://www.rfc-editor.org/rfc/rfc3629)第 3 页中进行了描述。

如果是其他编码（或其他语言），我建议不要自己处理，而是使用一些已经存在的库。如果您使用的是 Linux（或大多数其他 Unices），您可以使用`iconv`函数 ( `man 3 iconv`) 将您的文本转换为 UTF-8，然后按照我之前的描述进行操作。

其他选择是使用一些已经处理各种 Unicode 变体的库。最强大的可能是[ICU - International Components For Unicode](http://site.icu-project.org/)，查看他们的手册以了解如何使用它来执行您的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T22:53:28.110

您没有明确说明您的程序的要求，但我只能想到两个方面可能需要您关心角色身份：

1.  如果输入文本是大小写混合的，您可能希望将所有单词映射到相同大小写，以便将同一单词的不同大小写版本一起计算。

2.  如果输入是混合规范化形式（一些字符预先组合，其他字符分解），那么您需要执行规范化以确保仅以这种方式不同的单词被计算在一起。

例如，如果您的输入是全小写的 NFC，那么只考虑 ASCII 编写的程序将非常适合您的任务。由于情况可能并非如此，因此您需要评估您的要求。对于问题 1（案例），您可能可以使用宽字符 stdio 函数（或面向字节的 stdio 和`mbsrtowcs`）并`towlower`进行案例映射。对于问题 2（规范化），您需要使用现有的 C Unicode 库或滚动您自己的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:54:12.520

您可以使用头文件中`wchar_t`定义的字符串和函数。`wchar.h`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T22:23:46.350

如果您可以在 ASCII 中毫无问题地做到这一点，那么在 Unicode 中应该不会更难（至少在 C99 中）。

几乎所有适用于字符串和字符的标准库函数都具有等价的宽字符，当您使用宽字符时，您永远不必担心底层编码 - 一个宽字符代表一个实际字符。有`iswupper`、`towupper`等`wcslen`。

这是假设您在一个简单的环境中工作（例如 UTF-8 系统、UTF-8 文本），因为语言环境将处理所有事情。如果没有，还有更多的工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T00:46:30.250

您可能想要使用系统工具来解决这个问题，如果您的系统区域设置正确，则可以这样做。AWK 是您可以很容易使用的一种，**例如**：

```
BEGIN {
    FS="[^[:alpha:]]"
}
{
    for(i=1; i<=NF; i++) {
        if(array[$i]) {
            array[$i] += 1
        } else {
            array[$i]  = 1
        }
    }
}
END{
    for(i in array) {printf "%s = %d\n", i, array[i] }
} 
```

调用：

$`awk -f script.awk German.txt | sort`

编辑：

这与您正在寻找的非常*接近。*

# php - 在描述之前在 Magento 产品页面上显示“其他详细信息”部分

> ID：15734924
> 
> 赞同：2
> 
> 时间：2013-03-31T21:47:46.087
> 
> 标签：php, magento

所以在这样的页面上：http: [//liff2013.com/screenings/blancanieves.html](http://liff2013.com/screenings/blancanieves.html)

我们希望将“事件快照”部分发布在导演/作家/演员部分之前。

我不是 PHP 专家，但我认为这是调用构建表的其他代码的代码。（此代码在我的 view.phtml 文件中）

```
<?php foreach ($this->getChildGroup('detailed_info', 'getChildHtml') as $alias => $html):?>

    <div class="box-collateral <?php echo "box-{$alias}"?>">
        <?php if ($title = $this->getChildData($alias, 'title')):?>
        <h2><?php echo $this->escapeHtml($title); ?></h2>
        <?php endif;?>
        <?php echo $html; ?>
    </div> 
```

这是我在 attributes.phtml 文件中找到的一些代码：

```
<?php if($_additional = $this->getAdditionalData()): ?>
<h2><?php echo $this->__('Event Snapshot') ?></h2>
<table class="data-table" id="product-attribute-specs-table">
    <col width="25%" />
    <col />
    <tbody>
    <?php foreach ($_additional as $_data): ?>
        <tr>
            <th class="label"><?php echo $this->htmlEscape($this->__($_data['label'])) ?></th>
            <td class="data"><?php echo $_helper->productAttribute($_product, $_data['value'], $_data['code']) ?></td>
        </tr>
    <?php endforeach; ?>
    </tbody>
</table>
<script type="text/javascript">decorateTable('product-attribute-specs-table')</script> 
```

任何帮助是极大的赞赏！我们基本上只是希望它在框描述之前调用/填充框附加 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T05:34:14.053

你能提供你的产品详细信息页面的布局文件吗..？我认为你需要改变你的 phtml，改变布局中的块位置就可以了......

编辑：您必须修改您的布局文件catalog.xml，如下所示：

在`<catalog_product_view translate="label">`处理中，您必须将

`<block type="catalog/product_view_additional" name="product.info.additional" as="product_additional_data" />`

以上的

`<block type="catalog/product_view_description" name="product.description" as="description" template="catalog/product/view/description.phtml">`

这可能会解决您的问题。

# word-wrap - HTML 标记中断显示：块

> ID：15734925
> 
> 赞同：0
> 
> 时间：2013-03-31T21:47:54.207
> 
> 标签：word-wrap, css

我在这里有这个 jsfiddle：http: [//jsfiddle.net/sqszH/1/](http://jsfiddle.net/sqszH/1/)

基本上，我要做的是让 Hello World 文本位于其正下方的“long long long long”文本下方。有没有办法在不改变 HTML 的情况下做到这一点？

因为我在网页上有类似的情况，但我一生都无法弄清楚。这可能也很简单。也许有人可以在这里帮我一把？那将是真棒！

HTML：

```
<div class="test">
<div class="first-span">first span</div>
    <div class="second-span">some long long long long long long long long long long text<br /><span>Hello World</span></div>
    <br class="clear" />
</div> 
```

CSS：

```
.test{
    width:100%;
}
.first-span{
    border:1px solid red;
    box-sizing: border-box;
    float: left;
    padding-right: 1em;
}
.second-span{
    box-sizing: border-box;
    border:1px solid blue;
}
.clear
{
 clear: both;   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:56:05.180

将类的`display`属性设置为`second-span``table`

```
.second-span{
    box-sizing: border-box;
    border:1px solid blue;
    display: table;
} 
```

[例子](http://jsfiddle.net/6ryFx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:55:48.657

添加 `height: 4em;`

```
.first-span{
    border:1px solid red;
    box-sizing: border-box;
    float: left;
    padding-right: 1em;
    height: 4em;
} 
```

[http://jsfiddle.net/sqszH/4/](http://jsfiddle.net/sqszH/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T21:59:15.443

编辑解决方案，因为我误解了这个问题：

如果您知道第二个跨度 div 的宽度，请将其也向左浮动。然后你会在 loooong 文本下看到“hellow world”文本。

如果没有，您可以选择设置拳头跨度的高度（如前所述）或更改 html。

# flash - FlasCC 和 Haxe 可以一起使用吗？

> ID：15734930
> 
> 赞同：0
> 
> 时间：2013-03-31T21:48:20.250
> 
> 标签：flash, haxe, flascc

这是一个菜鸟问题，因为我对 Haxe 非常陌生，并且没有使用 FlasCC（Flash 的 C 编译器）的经验。

是否可以同时使用 FlasCC 和 Haxe，将这两种技术的性能改进结合到 Flash 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:48:34.433

我不确定你想以什么方式一起使用它（但你可能可以通过在 FlasCC 中制作 swc 并从 haxe 使用）。

但是，它没有任何意义，因为它不会给您带来任何性能优势，并且很可能会使您的代码比纯 haxe 慢。Haxe 在制作快速 AVM2（闪存虚拟机）字节码方面做得很好。一些小的和棘手的事情仍然可以优化，但不能通过 FlasCC。我使用 haxe=>flash 多年，我彻底探索了它生成的许多字节码，有时我能够加快它的速度，但只能通过直接编辑字节码（阅读：我编写了一个简单的反汇编程序和汇编程序，并且在 haxe 生成字节码后使用汇编程序补丁）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T14:00:07.900

我不认为你会注意到巨大的性能提升。

因为由 Haxe/OpenFL 生成的 C++ 代码，它不是超级优化的。

我认为这不值得努力。

您可以将 Stage3D 用于图形并使用 openfl.flash.Memory 进行每像素操作和一些数据/缓存处理，从而获得最佳性能。

# c# - C# 多个组合框并显示它们的值

> ID：15734937
> 
> 赞同：2
> 
> 时间：2013-03-31T21:49:15.983
> 
> 标签：c#, visual-studio-2012, combobox

我正在尝试为在线体育游戏创建一个程序，以列出您可以从每支球队获得的潜在球员以及他们升级后可以达到的最大统计数据。

长话短说，我正在尝试在 MS Visual '12 中使用多个组合框（用户从一个组合框中选择团队，然后从游戏中的 5 个评分中选择一个，最后是该团队的玩家和评分）。全部选中后，我将有一个显示其最大统计数据的文本框。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:38:11.970

有很多方法可以实现这一点。如果您有多个数据贡献者（例如，击球率和他们可以运行的速度），您可以为每个选项分配数字值，看起来像这样：

```
if (comboBoxRBIs.Text == 23){
RBI = 23; //Make a variable called RBI for the player(s) and assign it a value.
} 
```

然后考虑你问如何显示它，只需使用类似于：

```
label1.Text = RBI; //This will display how many RBI's that player has. 
```

然后，您可以通过使用富文本框（在我看来更容易显示更多文本）来对此进行扩展，或者如果您希望它在一个区域中显示其所有统计信息，请执行以下操作：

```
// playerName. RBI, and speed are all variables you assign with the comboBoxes.
label1.Text = "Player" + playerName + EnvironmentNewLine() + "RBI's" + RBI + 
EnvironmentNewLine() + "Player" + playerName + EnvironmentNewLine() + "Player Speed" + 
speed; //EnvironmentNewLine() sets the text to the next line 
```

我希望这会有所帮助，如果我没有很好地回答您的问题，请告诉我，我会尽力提供更多帮助:)。祝你的程序好运！

重新回复：

好的，这很简单，尝试这样的事情：

```
if (comboBoxPlayer.Text == "Babe Ruth")
{ 
comboBoxRating.Text = "Rating"; 
} 
```

//然后让最后一个comboBox改变标签的文本做这样的事情：

```
//comboBox3 is whatever you want to call the last combobox 

if (comboBox3.TextLength != 0){
label1.Text = "Your text or variables";
} 
```

# regex - 仅使用 R 捕获 IP 地址

> ID：15734943
> 
> 赞同：3
> 
> 时间：2013-03-31T21:49:46.190
> 
> 标签：regex, r, regex-negation

我有 R 对象，其中包含域名和 IP 地址。例如。

```
11.22.44.55.test.url.com.localhost 
```

我在 R 中使用正则表达式来捕获 IP 地址。我的问题是，当不匹配时，整个字符串都会匹配或“输出”。当我处理一个非常大的数据集时，这成为一个问题。我目前有以下使用正则表达式

```
sub("([0-9]+)\\.([0-9]+)\\.([0-9]+)\\.([0-9]+).*","\\1.\\2.\\3.\\4","11.22.44.55.test.url.com.localhost") 
```

这给了我 11.22.44.55

```
11.22.44.55 
```

但如果我不得不跟随

```
sub("([0-9]+)\\.([0-9]+)\\.([0-9]+)\\.([0-9]+).*","\\1.\\2.\\3.\\4","11.22.44.test.url.com.localhost") 
```

然后它给了我

```
11.22.44.test.url.com.localhost 
```

这实际上是不正确的。想知道是否有任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:35:48.973

您可以预处理`grep`以仅获取按照您想要的方式格式化的字符串，然后`gsub`在这些字符串上使用。

```
x <- c("11.22.44.55.test.url.com.localhost", "11.22.44.test.url.com.localhost")
gsub("((\\d+\\.){3}\\d+)(.*)", "\\1",  grep("(\\d+\\.){4}", x, value=TRUE))
#[1] "11.22.44.55" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T22:01:20.080

确实，您的代码正在运行。当`sub()`匹配失败时，它返回原始字符串。从手册：

> 对于 sub 和 gsub 返回一个与 x 具有相同长度和相同属性的字符向量（在可能强制转换为字符之后）。**未被替换的字符向量 x 的元素将原封不动地返回**（包括任何声明的编码）。如果 useBytes = FALSE，则非 ASCII 替代结果通常是带有标记编码的 UTF-8（例如，如果有 UTF-8 输入，并且在多字节语言环境中，除非 fixed = TRUE）。这样的字符串可以被 enc2native 重新编码。

强调添加

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T22:14:07.563

你可以试试这个模式：

```
(?:\d{1,3}+\.){3}+\d{1,3} 
```

我已经在 J​​ava 中对其进行了测试：

```
static final Pattern p = Pattern.compile("(?:\\d{1,3}+\\.){3}+\\d{1,3}");

public static void main(String[] args) {
    final String s1 = "11.22.44.55.test.url.com.localhost";
    final String s2 = "11.24.55.test.url.com.localhost";
    System.out.println(getIps(s1));
    System.out.println(getIps(s2));
}

public static List<String> getIps(final String string) {
    final Matcher m = p.matcher(string);
    final List<String> strings = new ArrayList<>();
    while (m.find()) {
        strings.add(m.group());
    }
    return strings;
} 
```

输出：

```
[11.22.44.55]
[] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T02:11:56.323

查看 gsubfn 包中的`gsubfn`or`strapply`函数。当您想要返回匹配项而不是替换它时，这些函数比`sub`.

# containers - 溢出：隐藏但容器仍然没有高度值

> ID：15734945
> 
> 赞同：0
> 
> 时间：2013-03-31T21:49:53.430
> 
> 标签：containers, overflow

我正在使用溢出：隐藏在一个容器 div 中，里面有 4 个浮点数，以便容器随浮点数扩展： [http ://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

但是当第 4 个 div 的高度为 100% 时，它不会延伸到底部，实际上它只是一条平线，有人知道如何解决这个问题吗？

例如

```
<div style="border:1px solid green; width: 1000px;margin:0 auto;overflow:auto;">    
    <div style="float:left;display:block;width:200px;height:500px;border:1px solid orange;"></div>
    <div style="float:left;display:block;width:200px;height:200px;border:1px solid orange;"></div>
    <div style="float:left;display:block;width:200px;height:200px;border:1px solid orange;"></div>
    <div style="float:left;display:block;width:100px;height:100%;border:1px solid black;"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:55:51.790

You need to specify the height of your container div for the `100%` to fill the whole container. You see, `100%` is relative to the container it is in. Therefore, `%`'s are and taking the percentage of it's container.

# twitter-bootstrap - 如何在之前插入html代码 我在登录 .ctp 文件中有这段代码： <?php echo $this->Form->create('AdmUser', array( 'class' => 'form-vertical', 'inputDefaults' => array( 'label' =&gt 问问题 问问题 2013-03-31T21:50:19.043 1944 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我在登录 .ctp 文件中有这段代码： <?php echo $this->Form->create('AdmUser', array( 'class' => 'form-vertical', 'inputDefaults' => array( 'label' => false, 'div' => false, ))); ?> <?php echo $this->Form->input('login', array( 'placeholder' => 'User') );?> 我正在为 cakephp 使用slywalker 的TwitterBootstrap 插件，所以输出是这样的： <div class="control-group"> <div class="controls"> <input name="data[AdmUser][login]" placeholder="User" maxlength="15" type="text" id="AdmUserLogin" required="required"> </div> </div> 我试图在输入标签之前放置一些 html 代码，如下所示： <div class="control-group"> <div class="controls"> <span class="add-on"><i class="icon-user"></i></span> <input name="data[AdmUser][login]" placeholder="User" maxlength="15" type="text" id="AdmUserLogin" required="required"> </div> </div> 当我尝试使用'before' => '<span class="add-on"><i class="icon-lock"></i></span>'代码时，介于<div class="control-group">和 <div class="controls"> 您是否尝试过插件自述文件中的示例？ https://github.com/slywalker/TwitterBootstrap/blob/master/README.md 我还没有测试过，但插件似乎使用“前置”和“附加”选项来添加这些选项；如果设置了这些选项，FormHelper 会使用此方法在内部生成这些标签； BootstrapFormHelper::addOn() twitter-bootstrapcakephp-2.1 4 2 回答 2 This answer is useful 1 我已经将我的代码测试到 CakePhp 版本 cakephp-2.6.6。 echo $this->Form->input( 'login', array( 'between' =>'<span class="add-on"><i class="icon-lock"></i></span>', 'after'=>'', 'placeholder' => 'User' ) ); 并产生： <span class="add-on"><i class="icon-lock"></i></span> <input type="text" id="AdmUserLogin" placeholder="User" name="data[AdmUser][login]"> 你有自定义表单助手我认为这就是你得到的原因 <div class="control-group"> <div class="controls"> 输入字段之前的代码和您的“之前”标签不起作用。如果您添加“之间”标签，它将在您的输入之前添加代码，最后您必须将“之后”标签添加为空，因为您不需要在您之后添加额外的 html输入字段。谢谢。 于 2015-11-14T08:11:55.737 回答 This answer is useful 0 您是否尝试过插件自述文件中的示例？ https://github.com/slywalker/TwitterBootstrap/blob/master/README.md 我还没有测试过，但似乎插件使用'prepend'和'append'选项来添加这些选项；如果设置了这些选项，FormHelper 会使用此方法在内部生成这些标签； BootstrapFormHelper::addOn() 于 2013-04-02T21:10:23.157 回答 Related 1 c# - 错误的数据类型 OleDB 创建表 1 php - PHP 执行因未知原因停止 2 sql - 按不同列过滤时SQL Server查询速度不同 1 c# - 我的 .NET Web 服务方法需要向调用客户端（iOS 设备）返回 JSON 结果，但返回的是一堆 \r\n 1 java - 库没有 JAVADOC 代码完整帮助 2 c# - 我怎么能有一个列表框或组合框或类似的东西，在 Visual Studio 中使用 MULTISELECTION 1 javascript - IE8 中的 showModalDialog 是否有最大 dialogHeight 和 dialogWidth？ 4 scala - 在 Scala 中选择 DISTINCT 1 security - 设置可写文件夹到 joomla 安装 4 php - 为什么在函数中避免嵌套块是个好主意？(PHP) Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15734947
> 
> 赞同：0
> 
> 时间：
> 
> 标签：twitter-bootstrap, cakephp-2.1

我在登录 .ctp 文件中有这段代码：

```
<?php echo $this->Form->create('AdmUser', array(
    'class' => 'form-vertical',
    'inputDefaults' => array(
        'label' => false,
        'div' => false,
    ))); ?>

<?php echo $this->Form->input('login', array(
    'placeholder' => 'User')
    );?> 
```

我正在为 cakephp 使用[slywalker 的](https://github.com/slywalker/TwitterBootstrap)TwitterBootstrap 插件，所以输出是这样的：

```
<div class="control-group">
     <div class="controls">
          <input name="data[AdmUser][login]" placeholder="User" maxlength="15" type="text" id="AdmUserLogin" required="required">
     </div>
</div> 
```

我试图在输入标签之前放置一些 html 代码，如下所示：

```
<div class="control-group">
     <div class="controls">
          <span class="add-on"><i class="icon-user"></i></span>
          <input name="data[AdmUser][login]" placeholder="User" maxlength="15" type="text" id="AdmUserLogin" required="required">
     </div>
</div> 
```

当我尝试使用`'before' => '<span class="add-on"><i class="icon-lock"></i></span>'`代码时，介于`<div class="control-group">`和 `<div class="controls">`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-14T08:11:55.737

我已经将我的代码测试到 CakePhp 版本 cakephp-2.6.6。

```
echo $this->Form->input(
    'login', 
    array(
    'between' =>'<span class="add-on"><i class="icon-lock"></i></span>',
    'after'=>'',
    'placeholder' => 'User'
    )
); 
```

并产生：

```
<span class="add-on"><i class="icon-lock"></i></span>
<input type="text" id="AdmUserLogin" placeholder="User" name="data[AdmUser][login]"> 
```

你有自定义表单助手我认为这就是你得到的原因

```
<div class="control-group">
     <div class="controls"> 
```

输入字段之前的代码和您**的“之前”**标签不起作用。如果您添加**“之间”**标签，它将在您的输入之前添加代码，最后您必须将**“之后”**标签添加为空，因为您不需要在您之后添加额外的 html输入字段。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:10:23.157

您是否尝试过插件自述文件中的示例？

[https://github.com/slywalker/TwitterBootstrap/blob/master/README.md](https://github.com/slywalker/TwitterBootstrap/blob/master/README.md)

我还没有测试过，但似乎插件使用'prepend'和'append'选项来添加这些选项；如果设置了这些选项，FormHelper 会使用此方法在内部生成这些标签；

[BootstrapFormHelper::addOn()](https://github.com/slywalker/TwitterBootstrap/blob/master/View/Helper/BootstrapFormHelper.php#L42)

# c# - 在文本框中按下 Enter 键以触发 Form2 的打开

> ID：15734948
> 
> 赞同：0
> 
> 时间：2013-03-31T21:50:29.533
> 
> 标签：c#, textbox

所以我在FormOne中有这个：

```
private void input_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyData.Equals(Keys.Enter))
    {
        x = 5;
        string customStreamer = textBox1.Text;
        Form2 twitchTV = new Form2(this);
        twitchTV.Show();
    }
} 
```

这在 FormTwo 中：

```
switch (formOne.x)
{
    case 5:
        axShockwaveFlash1.Movie = "http://www-cdn.jtvnw.net/widgets/live_facebook_embed_player.swf?channel=" + formOne.customStreamer;
        break;
} 
```

但是当我调试程序并输入流媒体用户名并按 Enter 时，Form2 没有打开。我尝试添加断点，似乎它甚至没有达到 input_KeyDown 方法。有什么问题，我将如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:01:12.957

首先想到的是 input_KeyDown 方法没有连接到您按 Enter 键的文本框。特别是因为您的断点没有被命中。否则，您的代码看起来可以正常工作，并且在我制作的快速测试项目中确实可以工作。因此，请检查以确保您的文本框具有 input_KeyDown 的 KeyDown 事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:01:13.363

customStreamer 被声明为本地范围内的变量，而不是在 formOne 类中，在事件处理程序完成执行后需要从外部引用它。

此外，您需要使用传入的参数分配一个名为“formOne”的 Form1 变量，我确定您正在这样做，但只是确保。

最后，确保通过设计器或在初始化代码中正确地将 EventHandler 附加到正确的文本框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T23:02:59.983

You're declaring customStreamer as a variable in the event of input_KeyDown. Remove the string datatype declaration and it should work. Like this:

```
private void input_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyData.Equals(Keys.Enter))
        {
            x = 5;
            customStreamer = textBox1.Text;
            Form2 twitchTV = new Form2(this);
            twitchTV.Show();
            label1.Text = customStreamer;
        }
    } 
```

# azure - Azure 模拟器 - 无法加载文件或程序集

> ID：15734949
> 
> 赞同：1
> 
> 时间：2013-03-31T21:50:29.737
> 
> 标签：azure, emulation

全部。我已经安装了 Azure SDK 1.7。解决方案中的所有程序集均使用“任何 CPU”设置进行编译。但是当我在我的机器上的 Azure 模拟器中启动解决方案时，其中一个失败了。错误很奇怪：“无法加载文件或程序集‘XXX’或其依赖项之一。不是有效的 Win32 应用程序。”

找到原因变得更加复杂，因为在另一台机器上一切正常。将其部署到 Azure 环境时也没有错误。

尝试使用 IIS Express 8 和完整的 IIS 启动模拟器。当托管在完整的 IIS 下时，还尝试启用 32 位应用程序支持。将项目转换为使用 1.8 SDK。

但没有成功。

这里还有一些来自 Visual Studio General 输出的信息。看来，这就是问题的原因。

```
Windows Azure Tools: Warning: Unable to delete file fr000001.xml.
Windows Azure Tools: Warning: Unable to delete file fr000002.xml.
Windows Azure Tools: Warning: Unable to delete file fr000001.xml.
Windows Azure Tools: Warning: Unable to delete file fr000002.xml.
Windows Azure Tools: Warning: Unable to delete file fr000001.xml.
Windows Azure Tools: Warning: Unable to delete file fr000002.xml.
Windows Azure Tools: Warning: Unable to delete file fr000001.xml.
Windows Azure Tools: Warning: Unable to delete file fr000002.xml.
Windows Azure Tools: Warning: Unable to delete directory deployment17(397) 
```

找不到可以创建此类行为的进程。当然，尝试重新启动我的机器并从项目文件中删除所有只读属性。

很高兴看到任何可能的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:10:14.947

行。我找到了问题的根源。安装 RedGate .NET Reflector 时，它会创建名为 DEVPATH 的环境变量。它的值是：“C:\ProgramData\Red Gate.NET Reflector\DevPath”

我查看了这条路径，发现我的项目有过时的 dll。结果，它在使用 GAC 执行时搜索参考，但总是找到不正确的参考。

删除，一切正常。

# c# - 为什么我应该使用 methodinvoker 而不是声明一个 void 方法并调用它？

> ID：15734950
> 
> 赞同：2
> 
> 时间：2013-03-31T21:50:31.930
> 
> 标签：c#

我正在使用异步套接字操作，当客户端收到消息时，它会使用以下代码调用方法并执行 Methodinvoker：

```
private void AddText(string message)
        {
            MethodInvoker mi = new MethodInvoker(delegate
            {
                textBox1.Text += message;
            });
            this.Invoke(mi);
        } 
```

我不明白为什么要使用methodinvoker。使用它而不是声明和调用没有参数的void方法更好吗？一定有充分的理由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:41:19.120

显然，您的方法是从另一个线程调用的，然后是您的主线程。

[调用](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)：

> > 在拥有控件的基础窗口句柄的线程上执行指定的委托。

您应该始终与主线程上的用户控件进行交互。该`Invoke`方法将委托发送回应用程序的主线程。

# python - Python - 自动添加小部件

> ID：15734953
> 
> 赞同：1
> 
> 时间：2013-03-31T21:50:49.910
> 
> 标签：python, user-interface, widget, tkinter

所以我目前正在尝试在 GUI 上创建一个按钮，让用户生成一个新的输入字段。我不知道该怎么做。我猜它需要一个 lambda 函数，但除此之外，我不知道。

这是我到目前为止的基本代码：

```
from tkinter import *

class prac:

    def autoAddWidget(self,frame,x,y):
        self.entryField = Entry(frame,text="Entry Field")
        self.entryField.grid(row=x, column=y)
        #lambda function? 

    def __init__(self, master):
        frame = Frame(master, width=60, height=50)
        frame.pack()

        x=1
        self.addWidgetButton = Button(frame, text="Add new widget", command=self.autoAddWidget(frame, x,0))
        self.addWidgetButton.grid(row=0, column=0)
        x+=1

root = Tk()
app = prac(root)
root.mainloop() 
```

将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:13:14.543

您从方法而不是方法本身传递给`command`参数结果。`self.autoAddWidget(frame, x,0)`您必须在那里传递对可调用对象的引用，该对象是事件发生时将调用的函数。请在下次提问之前检查[文档。](http://effbot.org/zone/tkinter-callbacks.htm)

好的，我修复了代码，现在它可以工作了：

```
from tkinter import *

class Prac:

    def autoAddWidget(self):
        self.entryField = Entry(self.frame,text="Entry Field")
        self.entryField.grid(row=self.x, column=0)
        self.x+=1

    def __init__(self, master):
        self.frame = Frame(master, width=60, height=50)
        self.frame.pack()

        self.x=1
        self.addWidgetButton = Button(self.frame, text="Add new widget", command=self.autoAddWidget)
        self.addWidgetButton.grid(row=0, column=0)

root = Tk()
app = Prac(root)
root.mainloop() 
```

# r - 使用 'by' 样式的应用函数，但引用其他子集

> ID：15734955
> 
> 赞同：3
> 
> 时间：2013-03-31T21:50:58.193
> 
> 标签：r, merge

全部，

考虑一个简单的问题：

```
set.seed(1)   # if generating sample data, it's helpful to set a seed
idx <- rep(1:4,each=4)
c1 <- rnorm(16)
c2 <- rnorm(16)
tmp <- data.frame(idx,c1,c2)

for(i in 2:4){
    rows <- which(idx==i)
    tmp$delt[rows] <- (tmp$c2[min(rows)-1] - tmp$c1[min(rows)])/tmp$c2[min(rows)-1]
}

tmp 
```

我想知道是否有一种有效的方法可以使用 apply-class 函数生成 delt 列。此示例运行良好，但在大型数据集上实施时可能会陷入困境。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T00:26:13.020

这是使用的解决方案`ave`

```
FUN <- function(i) { 
   i1 <- i[1]
   if (i1 > 1) 1 - tmp$c1[i1] / tmp$c2[i1 - 1] else NA
}
tmp$delt <- ave(1:nrow(tmp), tmp$idx, FUN = FUN) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T23:16:09.833

您可以将表格与自身合并。特别是如果数据很大，data.table 会很快

```
# put your data into a data.table, keying by idx
library(data.table)
tmpDT <- data.table(idx,c1,c2, key="idx")

# merge to itself and calculate, using tail() and head()
tmpDT[ tmpDT[, list(c2prev = tail(c2, 1)), by=(idx+1)]
       , delt :=  (c2prev - head(c1, 1)) / c2prev  ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T23:28:47.097

这是一个基本方法：

```
dal <- c(FALSE, as.logical(diff(idx)))
dal_s <- c(as.logical(diff(idx)), FALSE)
d <- data.frame(idx=2:4,  delt=1-tmp$c1[dal]/tmp$c2[dal_s])
merge(tmp, d, all=TRUE) 
```

请注意`(x - y)/x`= `1 - y/x`。如有必要，您可以使用上面的前一个表达式。

# c++ - C++ 上的预处理器重载

> ID：15734956
> 
> 赞同：1
> 
> 时间：2013-03-31T21:50:58.353
> 
> 标签：c++, debugging, compiler-construction, arduino, c-preprocessor

我目前正在完成一个库，并希望我的“调试”日志功能在编译时是可选的。

我的想法是：检查是否`DEBUG`已定义，然后定义我的自定义`debug`函数。

这是我所做的（部分）

```
#if defined(DEBUG)
    #define debug(s) Serial.println(s)
    #define debug(s,t) Serial.print(s);Serial.println(t)
#else
    #define debug(s) // s
    #define debug(s,t) // s t
#endif 
```

（我正在为 Arduino 编译；这就是为什么我需要将函数一分为二。）

由于我使用了很多时间，`Serial.print`随后是 a `Serial.println`，我想要那个`debug(s)`，也接受了两个“参数”。

因此，插入`debug("ParamOne");`and`debug("ParamOne", "ParamTwo");`将导致定义的函数。

但是，显然，只有最后定义的调试是有效的，覆盖了第一个。

我应该怎么做，以保持函数的相同名称，或者有什么更“正确”的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T21:54:18.617

#define 宏名称是唯一的，这些不是函数定义，因此您的第二个 #define 将覆盖第一个。你可能想做类似的事情

```
#if defined(DEBUG)
    inline void debug(const char *s) { Serial.println(s); }
    inline void debug(const char *s, char *t) { Serial.print(s);Serial.println(t); }
#else
    inline void debug(const char *s) {  }
    inline void debug(const char *s, const char *t) { }
#endif 
```

# c# - 如何用 C# 将 XML 文件从智能设备发送到 PC？

> ID：15734958
> 
> 赞同：0
> 
> 时间：2013-03-31T21:51:14.570
> 
> 标签：c#, windows-ce, readfile

我正在为手持式 RFID 阅读器（Windows CE）开发一个 Web 应用程序，我正在尝试通过无线网络或 GPRS 将 XML 文件从 RFID 阅读器发送到笔记本电脑。该代码在 MS Visual Studio 上与“Windows 窗体应用程序”一起正常工作，但是当我尝试将它与“智能设备应用程序”一起使用时，它不起作用......“ReadAllBytes”方法出现错误：

`System.IO.File dose not contain a definition for ReadAllBytes`

请帮我处理这个错误。谢谢。

* * *

编码：

```
private void button1_Click(object sender, EventArgs e)
{
try
{

string IpAddressString = "10.1.1.104";

IPEndPoint ipEnd_client = new
IPEndPoint(IPAddress.Parse(IpAddressString), 5656);

Socket clientSock_client = new Socket(AddressFamily.InterNetwork,
SocketType.Stream, ProtocolType.IP);

string fileName = "student.XML";
string filePath =@"My Device\";

fileName = fileName.Replace("\\", "/");
while (fileName.IndexOf("/") > -1)
{

filePath += fileName.Substring(0, fileName.IndexOf("/") + 1);

fileName = fileName.Substring(fileName.IndexOf("/") + 1);
}

byte[] fileNameByte = Encoding.UTF8.GetBytes(fileName);
if (fileNameByte.Length > 5000 * 1024)
{
curMsg_client = "File size is more than 5Mb,
please try with small file.";
MessageBox.Show("File size is more than 5Mb,
please try with small file.");
return;
}

MessageBox.Show("Buffering ...");

string fullPath = filePath + fileName;
byte[] fileData =File.ReadAllBytes(fullPath);

byte[] clientData = new byte[4 + fileNameByte.Length +
fileData.Length];

//byte[] clientData = new byte[4 + fileNameByte.Length];

byte[] fileNameLen = BitConverter.GetBytes(fileNameByte.Length);

fileNameLen.CopyTo(clientData, 0);
fileNameByte.CopyTo(clientData, 4);

fileData.CopyTo(clientData, 4 + fileNameByte.Length);

MessageBox.Show("Connection to server ...");
clientSock_client.Connect(ipEnd_client);

MessageBox.Show("File sending...");

clientSock_client.Send(clientData, 0, clientData.Length, 0);

MessageBox.Show("Disconnecting...");
clientSock_client.Close();

MessageBox.Show ("File [" + fullPath + "] transferred.");

}
catch (Exception ex)
{
if (ex.Message == "No connection could be made
because the target machine actively refused it")
{

MessageBox.Show ("File Sending fail. Because
server not running.");
}
else
{

MessageBox.Show ("File Sending fail." +
ex.Message.ToString());
}
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:03:48.997

这是因为，正如错误所述，ReadAllBytes 在 Compact Framework 中不存在。您必须使用 Read 的重载来获取数据。

这些方面的东西：

```
using (var reader = File.OpenRead(filePath))
{
    var fileData = new byte[reader.Length];
    reader.Read(fileData, 0, fileData.Length);
} 
```

# css - 居中我的 CSS 下拉菜单

> ID：15734959
> 
> 赞同：0
> 
> 时间：2013-03-31T21:51:18.467
> 
> 标签：css, menu

我正在尝试将下拉菜单居中。你可以[在这里查看](http://fvsa.venus.stellarbluewebdesign.com/)我意识到这个问题之前已经被问过，但是这些事情是如此不同，以至于答案似乎并不适用。
这是我的CSS

```
#cssmenu ul,
#cssmenu li,
#cssmenu span,
#cssmenu a
{
    margin: 0;
    padding: 0;
    position: relative;
}
    #cssmenu
     {
        height: 39px;

    }

    #cssmenu:after,
    #cssmenu ul:after
{
    content: '';
    display: block;
    clear: both;
}

.top_level{
    height:40px;
}

#cssmenu a
{
    height: 22px;
    line-height: 26px;
    padding-top: 10px;
    color: white;
    font-family: Georgia;
    font-weight: 100;
    font-size: 20px;
    float: left;
    padding-bottom:10px;
    padding-left:17px;
    padding-right: 17px;
    text-decoration:none;
}

#cssmenu ul
{
    list-style: none;
    margin-left:auto;
    margin-right:auto;
}

#cssmenu > ul
{
    float: left;
}

    #cssmenu > ul > li
    {
        float: left;
        z-index: 2000;
    }

        #cssmenu > ul > li:hover:after
        {
            content: '';
            display: block;
            width: 0;
            height: 30px;
            position: absolute;
            left: 50%;
            bottom: 0;
            z-index: 10000;
        }
#cssmenu .has-sub
{
    z-index: 1;
    top: 0px;
    left: 0px;
    height: 30px;
}

    #cssmenu .has-sub:hover > ul
    {
        display: block;
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
        border-radius: 3px;
        position:absolute;
        z-index:10000;
    }

    #cssmenu .has-sub ul
    {
        /*CSS for the size and position of drop down*/
        display: none;
        position: absolute;
        width: 156px;
        top: 42px;
        left:-20px;
        text-align:center;
        background-image: url(../images/dropDown.png);
        z-index:10000;
    }

        #cssmenu .has-sub ul li
        {
            *margin-bottom: -1px;
            display:inline-block;
        }

            #cssmenu .has-sub ul li a
            {
                /*CSS for drop down menu*/
                /*CSS for drop down menu*/

                position:relative;
                width:150px;
                z-index:10000;
                font-family:NewsCycleRegular;
                font-weight: 300;
                font-size: 14px;
                text-align:center;
                color: white;
                filter: none;
                display: block;
                line-height: 18px;
                padding: 3px;
            }

            #cssmenu .has-sub ul li:last-child a
            {
                /*CSS for last element in drop down list*/
                -webkit-border-bottom-left-radius: 3px;
                border-bottom-left-radius: 3px;
                -webkit-border-bottom-right-radius: 3px;
                border-bottom-right-radius: 3px;
                z-index: 10000;
                position: relative;
                padding-bottom:15px;
            }

            #cssmenu .has-sub ul li:first-child a
            {
                /*CSS for last element in drop down list*/
                padding-top:10px;
                -webkit-border-top-left-radius: 3px;
                border-top-left-radius: 3px;
                -webkit-border-top-right-radius: 3px;
                border-top-right-radius: 3px;
            }

            #cssmenu .has-sub ul li:hover a
            {

                /*Hover state for open drop down*/
            }

    #cssmenu .has-sub .has-sub:hover > ul
    {
        display: block;
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
        border-radius: 3px;
    }

    #cssmenu .has-sub .has-sub ul
    {
        display: none;
        position: absolute;
        left: 100%;
        top: 0;
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
        border-radius: 3px;
    }

        #cssmenu .has-sub .has-sub ul li a
        {
            background: #0c7fb0;
            border-bottom: 1px dotted #6db2d0;
            -moz-border-radius: 10px;
            -webkit-border-radius: 10px;
            border-radius: 10px;
        }

            #cssmenu .has-sub .has-sub ul li a:hover
            {
                background: #095c80;
                -moz-border-radius: 10px;
                -webkit-border-radius: 10px;
                border-radius: 10px;
            } 
```

带有下拉菜单的项目看起来像这样

```
<li class='has-sub'><a href='surgical_specialties.php'><span>Surgery</span></a><img src="images/divider.png" />
                            <ul>
                                <li><a href='laparoscopic_surgery.php'><span>Laparoscopy</span></a></li>
                                <li><a href='colorectal_surgery.php'><span>Colorectal Surgery</span></a></li>
                                <li><a href='endoscopy.php'><span>Endoscopy</span></a></li>
                                <li><a href='vascular_surgery.php'><span>Vascular Surgery</span></a></li>
                                <li><a href='breast_surgery.php'><span>Breast Surgery</span></a></li>
                                <li><a href='oncologic_surgery.php'><span>Oncologic Surgery</span></a></li>
                                <li><a href='general_surgery.php'><span>General Surgery</span></a></li>
                                <li><a href='thoracic_surgery.php'><span>Thoracic Surgery</span></a></li>
                            </ul>
                        </li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:22:14.873

假设您的意思是下拉菜单不以它的父按钮为中心，您需要删除将下拉列表的边距和填充重置为零。

```
#cssmenu ul li ul {
    margin: 0;
    padding: 0;
} 
```

然后，你应该能够进去和他们一起玩，让他们定位到你想要的位置。

# html - css/html 子菜单显示在其他页面内容的后面而不是顶部

> ID：15734962
> 
> 赞同：0
> 
> 时间：2013-03-31T21:51:48.040
> 
> 标签：html, css

我的网站有一个导航菜单：

这是HTML

```
<ul id="trans-nav">
    <li><a href="#">About Us</a>
        <ul>
        <li><a href="/contact">Contact Us</a></li>
        <li><a href="/login">Login</a></li>
        </ul>
    </li>
</ul> 
```

如您所见，它在链接下方有一个下拉菜单（子菜单），但子菜单显示在菜单下方的页面内容下方。

我怎样才能让它在页面内容上而不是在后面显示子菜单？

这是CSS：

```
#trans-nav {list-style-type: none; height: 40px; padding: 0; margin: 0; }
#trans-nav { list-style-type: none; height: 40px; padding: 0; margin: 0; }
#trans-nav li { float: left; position: relative; padding: 0; line-height: 40px; }
#trans-nav li:hover { background-position: 0 -40px; }
#trans-nav li a { display: block; padding: 0 15px; color: #666666; text-decoration: none; }
#trans-nav li a:hover { background-color:#F36F25; color: #eeeeee; }
#trans-nav li ul { opacity: 0; position: absolute; left: 0; width: 8em; background: #EEEEEE; list-style-type: none; padding: 0; margin: 0; }
#trans-nav li:hover ul { opacity: 1; }
#trans-nav li ul li { float: none; position: static; height: 0; line-height: 0; background: none; }
#trans-nav li:hover ul li { height: 30px; line-height: 30px; }
#trans-nav li ul li a { background: #EEEEEE; }
#trans-nav li ul li a:hover { background: #666666; color:#EEEEEE; }

#trans-nav li { -webkit-transition: all 0.2s; }
#trans-nav li a { -webkit-transition: all 0.5s; }
#trans-nav li ul { -webkit-transition: all 1s; }
#trans-nav li ul li { -webkit-transition: height 0.5s; } 
```

也是一个小提琴：http: [//jsfiddle.net/charliejsford/SAXmG/](http://jsfiddle.net/charliejsford/SAXmG/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:54:00.093

您似乎没有定义任何`z-index`. 没有它，稍后出现在页面中的元素将出现在顶部。

为了解决这个问题，我建议添加`position:relative`到您列表的样式中，然后您也可以添加`z-index:1000`或其他一些合适的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:02:31.733

不定义任何 z-index 应该不是问题，而且我认为到处定义无用的 z-index 是不明智的。

使用您在此处发布的示例 CSS 代码，您的菜单应位于其后的任何静态元素的顶部，因为您的菜单已定位，而页面的其余部分则没有。

因此，如果您的子菜单位于页面内容的后面，那么您正在谈论的页面内容也必须定位，这可能是您真正的问题。

# google-app-engine - 在将数组传递给 jinja2 之前更新查询值

> ID：15734965
> 
> 赞同：0
> 
> 时间：2013-03-31T21:51:59.543
> 
> 标签：google-app-engine

我有一个查询，它以 UTC 显示时间（默认 appengine 行为）。在将其作为变量传递给 Jinja2 之前，我尝试使用以下代码获取并使用 timedelta 将 .time 值更新为东部时区：

```
class Admin(authHandler):

def get(self):
    checkIns = checkIn.all()
    checkIns.filter("time >=", datetime.date.today())
    checkIns.order('-time')
    checkIns.fetch(1000)

    for i in xrange(len(list(checkIns))):
         hello = checkIns[i].time + datetime.timedelta(hours = -4)
         checkIns[i].time = hello
         print  hello
         print checkIns[i].time 
```

然而，虽然“print hello”给了我更新的时间戳，但“print checkIns[i].time”由于某种原因没有得到更新。任何线索为什么？

谢谢！-哈迪

# ruby-on-rails - Rails: OAuth accounts with something other than user using oauth_plugin

> ID：15734966
> 
> 赞同：0
> 
> 时间：2013-03-31T21:52:00.327
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, oauth, google-oauth

I'm setting up an OAuth consumer rails app using a gem called oauth_plugin ([https://github.com/pelle/oauth-plugin](https://github.com/pelle/oauth-plugin))

On my app users have access to multiple projects and each project needs to be able to connect to a different Google Analytics account using OAuth (so I can pull stats for each one).

The default set up for oauth_plugin is for OAuth tokens to be associated with users. I've tried to change it to be associated with projects by changing the models and controllers but if I do that I get this error when trying to connect the service:

**ActiveRecord::StatementInvalid in OauthConsumersController#show**

```
SQLite3::SQLException: no such column: consumer_tokens.user_id: 
SELECT  "consumer_tokens".* FROM "consumer_tokens"  WHERE "consumer_tokens"."type" IN ('GoogleToken') AND "consumer_tokens"."user_id" = '1' LIMIT 1 
```

There's nothing in my controllers like this so I'm guessing it's in the plugin somewhere. Does anyone know how I could get around this?

Let me know if you need more info. Thanks!

# layout - 用什么软件来编写真实世界的haskell？

> ID：15734970
> 
> 赞同：3
> 
> 时间：2013-03-31T21:52:36.013
> 
> 标签：layout, web, formatting, haskell

标题几乎概括了它；我正在寻找一本关于编程的书，我喜欢这种方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T22:38:20.120

[http://www.realworldhaskell.org/blog/2008/11/25/real-world-haskell-is-shipping/](http://www.realworldhaskell.org/blog/2008/11/25/real-world-haskell-is-shipping/)

从这篇博文（阅读评论）来看，他们似乎使用了 DocBook。

# c++ - 从一个函数返回不同值的正确方法

> ID：15734980
> 
> 赞同：0
> 
> 时间：2013-03-31T21:54:01.050
> 
> 标签：c++, visual-c++, return

新手问题。请看下面的代码：

```
FB::variant TestPluginAPI::getmidX()
{
RECT rect; 
HWND hWnd;
hWnd = getBrowserHwnd();
if(GetWindowRect(hWnd, &rect))
    {

  int width = rect.right - rect.left;
  int height = rect.bottom - rect.top;
  int left = rect.left;
  int mid = (rect.right + rect.left)/2;
  return mid;
    }
else {return 0;}
} 
```

我想要的是能够从这个函数中获得`mid`，例如`left`，在我的另一个函数中的不同变量中使用它。我当然可以复制它并制作只返回的函数`left`......这是做这些事情的正确方法，还是有更优雅的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:01:51.900

有几种选择。`struct`已经给出了解决方案，但是（在我看来）它们不是最好的方法。

你应该知道你可以将参数修改为一个函数，所以你可以这样做：

```
int getMidX( int &left, int &width ) {
    // do stuff
    left = theLeftNumber;
    width = theWidthNumber;
    return theMidNumber;
} 
```

并用这个来调用它：

```
int l;
int w;
int m = getMidX( l, w ); 
```

您还可以使用指针而不是引用，这使您可以使返回值成为可选的并且在 C 中也可以工作（使用`*`代替`&`，并将调用更改为`getMidX( &l, &r )`。您还应该检查函数内部的 NULL 以了解用户感兴趣的值在）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T21:55:47.873

你想要这样的东西：

```
return std::make_pair(mid,left) 
```

并且你的函数的返回类型需要是`std::pair<int, int>`. 然后当你打电话时，你需要这样做：`std::pair<int,int> value = getmidX();`如果你需要中路，你会这样做`int mid = value.first`，如果你需要左路，你会这样做`int left = value.second;`

要使用它，您需要一个相对现代的 C++ 编译器（很确定最近的 VC++ 可以工作）并且您需要`#include<utility>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T21:58:09.713

如果你想返回更多的东西，你可以定义 struct 并从函数中返回 struct。例如：

```
struct funcRetrun
{
  int left;
  int mid;
  int right;
} 
```

然后你可以在函数中返回这些东西，但是，这不是很优雅，因为你需要将你的函数返回类型更改为 funcReturn。

`std::tuple`从 C++11 开始，如果您想返回更多，可以使用：

`Tuples are objects that pack elements of -possibly- different types together in a single object, just like pair objects do for pairs of elements, but generalized for any number of elements.`

# css - CSS fluid layout and dynamic image scaling

> ID：15734985
> 
> 赞同：1
> 
> 时间：2013-03-31T21:54:22.477
> 
> 标签：css, responsive-design

I have a question about dynamic scaling of images within a `div` container, I'm building a portfolio website which have 3 col's of project images all scalable in width but static in height (e.g. `div` container => Width 33.33334% : Height 250px).

I've puzzled around with different CSS ideas but the layout always breaks since the images differ in dimensions as well as the container. I'm not that skilled in CSS nor JS and now I'm kind of stuck looking for some advice firstly where to look for an solution, perhaps some code ideas/snippets or even better examples/API's etc.

I've made an small example of where I am now, as you can see one of the images is smaller due to it's dimensions and the layout is broken.

jsfiddle example: [jsFiddle example](http://jsfiddle.net/5GRpH/1/)

I'm sorry I can't be more precise on what this image scaling technique is called since I honestly don't know, which again gives me a headache googling it.

best regards Mads

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:03:53.647

Try this method for an easy grid. It scales the image to fit the `.image-box` but keeps the aspect ratio. Any part of the image that exceeds that `.image-box` is removed by overflow.

**HTML:**

```
<div class="image-box">
    <div class="source">
        <img alt="Img_0106" src="http://www.team-bhp.com/forum/attachments/shifting-gears/1033178d1356977973-official-non-auto-image-thread-_mg_0143.jpg">
    </div>
</div>
<div class="image-box">
    <div class="source">
        <img alt="Img_0106" src="http://upload.wikimedia.org/wikipedia/commons/a/af/All_Gizah_Pyramids.jpg">
    </div>
</div> 
```

**CSS**

```
.image-box {
background: #000;
height: 170px;
width: 256px;
    float: left;
}
.image-box .source {
overflow: hidden;
width: auto;
height: 100%;
}
.image-box .source img {
width: 100%;
} 
```

[http://jsfiddle.net/A2cc6/](http://jsfiddle.net/A2cc6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T22:06:36.387

Try setting only height or width not both, this will respect the ratio of the image. You can also play with min/max width/height.

Maybe what you are trying to achieve is

.myimg { height: 250px; width:100%; }

This is the class of the image, not the div ! You can also add a max-width if you don't want it to go higher than a certain value.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T21:25:06.113

我可能已经找到了这个问题的 jQuery 解决方案 [检查这个 jsFiddel](http://jsfiddle.net/9Xv8L/1/)

[或在这里查看我的在线示例](http://test.madeofdots.com/jq/02/)

我在这里做的是，当页面加载完成后，我会对照它检查所有图像 .box 容器以确定它需要哪种 CSS 样式。瞧，现在图像根据容器缩放流体，下一步是将图像在 div 容器中居中。

如果你们有机会检查代码是否为跨浏览器正确编写，那将非常棒，其他人也可能使用它:)。感谢您的所有帮助。

快乐 :D 麦兹

jQuery代码：

```
$(window).load(function() {
            plottingData();
            resizeImage();
        });

        $(window).resize(function() {
            plottingData();
            resizeImage();
        });

        function plottingData(){
            var image = $('.box img');
            var divW = $(".box").width();
            var divH = $(".box").height();
            var imgW = image.width();
            var imgH = image.height();
            $('.outputText').html('DIV CONTAINER W: '+divW+ ' H: ' +divH +'  ::  imgW: '+imgW +' : imgH: ' +imgH) ;
        }

        function resizeImage(){
            $("img").each(function(){
            var maxWidth = $(".box").width();; // Max width for the image
            var maxHeight = $(".box").height();;    // Max height for the image
            var maxratio=maxHeight/maxWidth;
            var width = $(this).width();    // Current image width
            var height = $(this).height();  // Current image height
            var curentratio=height/width;
            // Check if the current width is larger than the max

            if(curentratio>maxratio)
            {
                ratio = maxWidth / width;   // get ratio for scaling image
                /*
                $(this).css("width", maxWidth); // Set new width
                $(this).css("height", height *ratio); // Scale height based on ratio
                */
                $(this).css("width", "100%");
                $(this).css("height", "auto");
            }
            else
            { 
                /*
                ratio = maxHeight / height; // get ratio for scaling image
                $(this).css("height", maxHeight);   // Set new height
                $(this).css("width", width * ratio);    // Scale width based on ratio
                */
                $(this).css("width", "auto");
                $(this).css("height", "100%");
            }

        });
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T21:58:54.387

我可能会对您的要求感到困惑，但如果您只想让 infoBlocks 的大小保持一致，您可以使用`width: 33.33%`而不是`max-width: 33.33%`和您的图像`width: 100%; height: 100%;`

这是一个[更新的 jsFiddle](http://jsfiddle.net/5GRpH/4/)；那是你想要的吗？

# java - java字符串和hashset-membership匹配

> ID：15734986
> 
> 赞同：0
> 
> 时间：2013-03-31T21:54:28.853
> 
> 标签：java, string, hashset

我正在使用 java 中的包 pinyin4j 将单个汉字转换为罗马字母（拼音）。但是，这通常会为一个字符产生多个拼音（同一个字符有不同的发音）。比如说，字符 C1 转换为 2 种拼音形式 p1 和 p2，字符 C2 转换为 3 种拼音形式，q1,q2,q3。

当我将 C1C2 组合成一个单词时，它会产生 2*3=6 个组合。通常只有其中一个是真实的单词。我想根据我构建的词典文本文件检查这些组合，许多行以 \w 开头，这是一个词条条目（例如，在词典中只能找到 6 个组合中的 p1q2 ）。我正在考虑将词典文件读入哈希集。但是我不确定如何最好地实施整个过程。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:00:07.007

HashSet 看起来还不错。如果词典非常大并且您必须超快，请考虑使用 Trie 数据结构。但是， Java 中[没有](https://stackoverflow.com/questions/7983906/is-there-a-trie-in-java)实现。

# android - how to connect android phone to pc on same wifi network?

> ID：15734988
> 
> 赞同：-1
> 
> 时间：2013-03-31T21:54:39.723
> 
> 标签：android, android-wifi, wifi-direct

I am beginner android developer ,I want to make app that can stream video,music and picture to PC from android device over WiFi , so How can i connect PC and android which are on same WiFi network? , what i do for streaming video without buffering ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:08:04.570

此代码展示了如何编写代码以使移动设备连接到 PC。您可以尝试从以下代码开始。

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    initControls();

    String sentence = "TCP Test #1n";
    String modifiedSentence;

    try {

        Socket clientSocket = new Socket("192.168.18.116", 8080);
        DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
       BufferedReader inFromServer = new BufferedReader(new
        InputStreamReader(clientSocket.getInputStream()));
        printScr("TCP Connected.");

        outToServer.writeBytes(sentence + 'n');
        modifiedSentence = inFromServer.readLine();
        printScr(modifiedSentence);
        printScr("TCP Success !!!");

        clientSocket.close();

    } catch (Exception e) {
       printScr("TCP Error: " + e.toString());
    }
} 
private void initControls()
{
      txtSendStatus = (TextView)findViewById(R.id.txtSendStatus);
}

public static void printScr(String message)
{
       txtSendStatus.append( "n" + message );
} 
```

信用：gsmaker

# angularjs - How to run code on a route that has access to services

> ID：15734990
> 
> 赞同：0
> 
> 时间：2013-03-31T21:54:54.383
> 
> 标签：angularjs

I wonder what's the best way to configure a route which only purpose is to make use of a service call and then redirect.

I'm currently using this hack:

```
$routeProvider.when('/talks', { 
    template: '<div></div>', 
    controller: ['dateService', '$location', function(dateService, $location){
        var nextTalk = dateService.getNextTalkDate();
        $location.path('talks/' + nextTalk.format('MM') + '/' + nextTalk.format('YYYY'));
    }]
}); 
```

Currently I set the `controller` configuration to an inline controller implementation which has dependencies on the services and then does it's thing and redirects.

However, it feels a bit weird, since I have to set `template` to some dummy value because otherwise the controller would not be invoked at all.

It feels as if I'm stressing the `controller` property for something it wasn't intended for.

I guess there should be a way to run some view unrelated code that has access to services on a route. I could right my own `$routeProvider` I guess but that seems to be a bit heavy for something I would consider should be built in.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:42:14.863

There's no way to inject services into anywhere into a route. Whether it be `redirectTo` or `template`, any code in there is handled on the module level. This means that the module is loaded first and then when the application has boostrapped itself then the services and injection-level code is executed. So the `controller` is your best bet (since that does support injection).

Controller is used in a lot of areas in AngularJS and it should work fine for what you're trying to do. You can either handle the redirection like you do in there or you can setup three different routes that point to the same controller (where you build the page).

```
var handler = { controller : 'Ctrl' };
$routeProvider.when('/talks', handler).
               when('/talks/:month, handler).
               when('/talks/:month/:year', handler); 
```

And if you do end up using redirection, then just use `$location.path(url).replace()`. This will make the history stack jump back one level and therefore that the redirection triggering URL won't be in your history.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T22:09:18.483

看起来 '/talks' 有点抽象，因为它只是用于重定向到其他路由。那么如何设置这样的路由：

''/谈话/:月/:年'

其中 :month 和 :year 是可选的。如果没有给出月份或年份，您的服务将返回默认谈话。这可能是下一个话题。如果给定参数，您只需获取请求的数据。

所以不需要重定向。现在您指定控制器和所需的视图，并在范围上公开您的数据。（可选）将您的服务调用包装在一个承诺中并在 routeProviders 解析属性中解决它会更好。

这样可以确保只有在一切正常时视图才会改变。

希望有帮助！

# perl - 如何从 Catalyst 抑制/降级“未知资源”错误

> ID：15734991
> 
> 赞同：1
> 
> 时间：2013-03-31T21:54:55.240
> 
> 标签：perl, catalyst

默认情况下，当请求未知资源（根据我的理解，本质上是 404 错误）时， [Catalyst::Dispatch会发出错误：](http://search.cpan.org/dist/Catalyst-Runtime/lib/Catalyst/Dispatcher.pm)

> 将调度委托给与 url 匹配的操作，或返回有关未知资源的消息

我的应用程序的日志文件显示：

```
Mar 30 10:19:08 mail myapp: Unknown resource "user/soapCaller.bs"
Mar 30 16:20:38 mail myapp: Unknown resource "HTTP/1.1"
Mar 30 16:20:38 mail myapp: Unknown resource "index.php" 
```

可以说，这对我来说似乎是一个错误。一个简单的 404 不应该被视为与“无法连接到数据库”*错误*相提并论，但这不是重点。我的问题是：

**我怎样才能改变这种行为？**

我在 Root.pm 中创建一个简单的**default()操作的成功有限：**

```
sub default : Private {
    my ( $self, $c ) = @_;
} 
```

这成功地消除了日志文件的错误，但是，我没有成功编写自己的日志消息/优先级。以下尝试输出我自己的警告均未成功。

```
sub default : Private {
    my ( $self, $c ) = @_;
    warn "Foo\n";
    $c->log->debug('Bar');
    $c->log->warn('Baz');
} 
```

那么，在 Catalyst 应用程序中为“未知资源”定义自己的行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T20:59:38.930

问题是我有一个 auto() 操作，它在 default() 之前运行，并重定向到另一个页面。

```
sub auto : Private {
    my ( $self, $c ) = @_;
    ...
    if ( ! $c->user_exists ) {
        $c->redirect( $c->uri_for('/login') );
    }
} 
```

我能够通过添加来解决这个问题：

```
 return 1 if $c->action eq 'default'; 
```

在重定向之前。

# java - Cannot refer to a non-final variable inside an inner class error when using JTextField

> ID：15734992
> 
> 赞同：4
> 
> 时间：2013-03-31T21:55:00.660
> 
> 标签：java, swing, variables, compiler-errors, jtextfield

I have spent hours searching and I cannot figure out how to fix this. Maybe I'm just completely off, but I keep getting the error "Cannot refer to a non-final variable userInput inside an inner class defined in a different method". IF somebody could help me figure out why this occurs or how to fix it, that would be appreciated.

I get 2 compilation errors: Cannot refer to a non-final variable userInput inside an inner class defined in a different method

and

Cannot refer to a non-final variable inputField inside an inner class defined in a different method

EDIT: Some clarification, I want to keep my userInput variable as not final.

Here's my code, maybe somebody can see what I'm doing wrong, I've omitted all the code that has nothing to do with this error:

```
//Import libraries
...
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.SwingConstants;
...

public class TextGame {
public static void main(String[] args) throws FileNotFoundException {

    ...  
    String userInput = "Input";
    ...

    // Create the window
    JFrame gameWindow = new JFrame("Game");
    gameWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    gameWindow.setVisible(true);
    // Centre the window
    gameWindow.setLocationRelativeTo(null);

    ...

    // Add input box to window
    JTextField inputField = new JTextField();
    inputField.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            userInput = inputField.getText(); ****Here is where the error occurs***
        }
    });

    gameWindow.add(inputField, BorderLayout.SOUTH);

    // Size the window to what it contains
    gameWindow.pack();
    ...

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T22:00:37.063

要回答您的问题：

```
final JTextField inputField = new JTextField(); 
```

但是，更好的解决方案是从 ActionEvent 访问文本字段：

```
JTextField textField =  (JTextField)e.getSource();
userInput = textField.getText(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:58:58.083

我认为您正试图在声明它的位置以外的类或方法之外访问变量“userInput”，除非它以关键字“final”为前缀，以便扩展变量的范围，否则您不能这样做。例如。最终字符串用户输入；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T22:11:24.987

您正在创建内部匿名类 ActionListener 的实例。如果此类类使用来自父类的变量，则所有此类变量都应标记为 final。那是因为这些变量被*复制*到内部类的自动生成的构造函数中。为了避免副本的不协调更改，它们应该是恒定的。

# c# - 在 Windows 资源管理器中显示 Windows 搜索结果

> ID：15734998
> 
> 赞同：5
> 
> 时间：2013-03-31T21:55:58.743
> 
> 标签：c#, windows, search, explorer

使用 Windows API 代码包，我使用 Windows 搜索在此处（使用 C#）编写了此代码。

如何在 Windows 资源管理器中显示此结果（应该显示的位置）？

```
// create the leaf condition for the file name
        SearchCondition fileNameCondition =
            SearchConditionFactory.CreateLeafCondition(
            SystemProperties.System.FileName, textBox2.Text, 
            SearchConditionOperation.Equal);

        // create the search folder
        ShellSearchFolder searchFolder = new ShellSearchFolder(fileNameCondition(ShellContainer)NonFileSystemKnownFolder.FromParsingName(@>"C:\Users\ILIANHOME\Downloads")); 
```

简单吧？不适合我，我是一个非常新手的程序员，在此先感谢您的帮助:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T04:21:21.327

不幸的是，这似乎不是 Windows API 代码包旨在满足的需求。该库完全是关于采用 shell 概念并将它们带入托管代码。在 API 级别，它在技术上独立于“真正的”Windows shell，因此可以使用与实际 COM shell API 不同的数据提供者来实现它。考虑到这个目标，“返回”到本机 shell 的能力是困难的，因为可能没有本机 shell 可以返回（当然是假设性的；我不知道有人在做替代实现） . 在这方面，该库似乎将自己视为框架类库的扩展（这可能是有效的，因为某些特性——比如`JumpList`——最终确实进入了核心库）。

请注意，我不能代表该库的作者发言，以上纯粹是基于该库的结构以及我对 Microsoft 其他 .NET 库的使用经验的推测。但不管是什么原因，这个功能似乎并不存在。

`ExplorerBrowser`确实存在的是通过控件（或它的 WPF 包装器）创建自己的资源管理器窗口的能力。有关`ExplorerBrowser`示例，请参阅库附带的示例。不过，我不能说我建议尝试模仿 Explorer，即使有这些助手。

对于您启动搜索窗口的特殊问题，我建议您查看[search: 协议](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144083.aspx)，看看它是否满足您的需求。它没有一个很好的对象模型来表示查询，因此您必须自己制作一个（或找到一个，它可能存在）或只使用字符串。但它非常灵活。

您的上述特定问题可以实现为：

```
string folder = Uri.EscapeDataString(@"C:\Users\ILIANHOME\Downloads");
string file = '"' + Uri.EscapeDataString(textBox2.Text) + '"';
string uri = "search:query=filename:" + file + "&crumb=location:" + folder;
Process.Start(new ProcessStartInfo(uri)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-25T11:58:38.207

```
 public void getPDF()
    {
                string folder = Uri.EscapeDataString(@"C:\");
                string file = "*.pdf* size:> 2 MB";
                string uri = "search:query=" + file + "&crumb=location:" + folder;
                Process.Start(new ProcessStartInfo(uri));
    } 
```