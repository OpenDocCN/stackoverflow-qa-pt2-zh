# StackOverflow 问答 14340000-14340999

# mysql - 使用 mysqldump 将大型 Innodb 数据库缓慢导入 Amazon RDS

> ID：14340000
> 
> 赞同：3
> 
> 时间：2013-01-15T14:35:23.563
> 
> 标签：mysql, innodb, amazon-rds

好的，我正在尝试使用 Amazon RDS，并且在使用 mysqldump 及时加载 InnoDB 数据库时遇到了很多麻烦。

我正在尝试将我的本地数据库放到云端。

使用

```
mysqldump --single-transaction --opt -u root > file.sql 
```

我可以在大约 3 分钟内将转储 (~1.5GB) 转储到我的本地文件中。数据库大约4G但是mysqldump产生一个大约1.5G的sql文件

当我使用

```
mysqldump -h localhost -u XXXX -pXXXX DBNAME --compress --single-transaction --quick  --opt --order-by-primary| mysql --host=AMAZONHOSTNAME --user=username --password DBNAME 
```

它需要永远 - 我根据它的速度估计需要 5 个小时。

就我的带宽速度而言，在 www.speedtest.net 上，我的上传速度为 0.67Mbps。

我不明白为什么要花这么长时间。我是：a）压缩流 b）具有论坛似乎需要的所有选项以及 Amazon 文档 c）在 Amazon RDS 上有一个 LARGE 实例。

有人能帮我一下吗？有什么办法可以提高速度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:57:40.317

我已经修复了它，或者至少大大提高了速度。

我在 mysqldump 命令的 REMOTE 端添加了 --compress

即这个

```
mysqldump -h localhost -u XXXX -pXXXX DBNAME --compress --single-transaction --quick  --opt --order-by-primary| mysql --host=AMAZONHOSTNAME --user=username --password DBNAM 
```

变成了这个

```
mysqldump -h localhost -u XXXX -pXXXX DBNAME --compress --single-transaction --quick  --opt --order-by-primary| mysql --compress --host=AMAZONHOSTNAME --user=username --password DBNAM 
```

数据传输率（通过我的远程数据库大小的增加来衡量）从大约每分钟 13MB 到大约每分钟 73MB。

# git - GIT不跟踪文件

> ID：14340001
> 
> 赞同：5
> 
> 时间：2013-01-15T14:35:25.757
> 
> 标签：git, github, aix

我在 AIX 6.1 上设置了 GIT 并且遇到了问题。

我遵循的步骤顺序如下所示：

1.  我创建一个文件夹。
2.  进入文件夹并初始化非裸存储库
3.  初始化用户名和用户电子邮件
4.  创建一个名为 index.html 的文件，其中包含一些数据。
5.  创建一个名为 newfolder 的子文件夹
6.  进入新创建的文件夹。
7.  创建一个名为 index-2.html 的新文件，其中包含一些数据。

执行上述所有步骤并给出`git status`命令后，我得到以下结果：

```
# On branch master
#
# Initial commit
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       ../index.html
#       ./ 
```

我知道上面目录中的 index.html 正在显示，但为什么没有显示当前目录中的 index-2.html。

文件 index-2.html 也应该被正确跟踪。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T14:45:01.477

输出显示了当前未跟踪的两件事：

*   `../index.html`–`index.html`父文件夹中的文件
*   `./`– 当前文件夹，包括其所有内容

所以它确实检测到你有一个未跟踪的文件，但是因为它也不知道它的文件夹，它只是显示文件夹来累积它的所有内容。

如果您添加文件并让 Git 跟踪它们，它们将正确显示：

```
git add index-2.html
git add ../index.html 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T14:51:44.843

它正在跟踪文件夹 ./ ，这意味着当前文件夹。git 不会（如果我错了，请纠正我），根本不关心子文件夹。这意味着如果您有一个带有文件夹 foo 的存储库，该文件夹已经在存储库中。在 foo 中添加一个子文件夹 bar，并在 foo/bar 中创建一个文件 foobar.txt。那么你只会得到：

```
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       ./bar 
```

这意味着如果你在你的 git status 命令之前完成了 cd .. ，你会得到：

```
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       index.html
#       newfolder 
```

即使你里面有一个文件。

这样做的原因是 git 跟踪内容，而不是文件。由于 index2.html 实际上是文件夹 newfolder 的内容，并且您没有跟踪 newfolder，git 不知道 index2.html 存在。

# c# - 循环文件夹中的文件并将每个文件添加到一个线程，但一次只运行一个线程

> ID：14340009
> 
> 赞同：0
> 
> 时间：2013-01-15T14:35:46.053
> 
> 标签：c#, multithreading

所以我有一个包含几个文件的文件夹。我有一个循环，它将遍历每个文件并将其添加到线程中以在后台处理，以便 UI 响应。问题是我只想在给定时间运行一个线程。所以基本上我想把线程“排队”，当一个线程完成时，下一个线程就会启动。最好的方法是什么？这是我正在使用的代码。我想知道计时器是否是最好的解决方案？谢谢大家。

```
foreach (CustomerFile f in CF)
{
    btnGo.Enabled = false;
    UpdateProgressDelegate showProgress = new UpdateProgressDelegate(UpdateProgress);
    ProcessFile pf = new ProcessFile(this, showProgress, f._FileName, txtDestFolder.Text);
    Thread t = new Thread(new ThreadStart(pf.DoWork));
    t.IsBackground = true; 
    t.Start();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:47:16.700

如何将文件添加到队列并在另一个线程上处理队列？

```
Queue<CustomerFile> files = new Queue<CustomerFile>()
foreach (CustomerFile f in CF)
  files.Enqueue(f);

BackgroundWorker bwk = new BackgroundWorker();
bwk.DoWork+=()=>{
    //Process the queue here
    // if you update the UI don't forget to call that on the UI thread
};

bwk.RunWorkerAsync(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:50:53.247

这是生产者消费者模型，这是一个非常普遍的需求。在 C# 中`BlockingCollection`，这是此任务的理想选择。让生产者将项目添加到该集合中，然后让后台任务（您可以拥有任意数量）从该集合中获取项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T14:51:33.780

听起来您只需**一个**处理队列的后台线程就可以逃脱。像这样的东西：

```
var q = new Queue();
foreach (var file in Directory.GetFiles("path"))
{
    q.Enqueue(file);
}

var t = new Task(() =>
    {
        while (q.Count > 0)
        {
            ProcessFile(q.Dequeue());
        }
    });
t.Start(); 
```

请注意，这仅适用于您不必在后台线程处理队列时修改队列。如果你这样做了，Servy 的回答是正确的：这是一个非常标准的生产者-消费者问题，只有一个消费者。有关解决生产者/消费者问题的更多信息，请参阅 Albahari 的[C# 中](http://www.albahari.com/threading/part2.aspx)的线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T17:27:59.007

你唯一必须做的就是把你的循环放在一个线程中，例如这样的：

```
new Thread(()=>{
foreach (CustomerFile f in CF)
{
    btnGo.Enabled = false;
    UpdateProgressDelegate showProgress = new UpdateProgressDelegate(UpdateProgress);
    ProcessFile pf = new ProcessFile(this, showProgress, f._FileName, txtDestFolder.Text);
    pf.DoWork();

}
}).Start(); 
```

# ruby-on-rails - kaminari 和 Mongoid 3 页面无法按预期工作

> ID：14340011
> 
> 赞同：1
> 
> 时间：2013-01-15T14:35:59.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, kaminari, mongoid3

嗨，我正在尝试使用 kaminari 作为对我收集的 19K 结果进行分页的一种方式，但是它似乎并没有按照它在锡上所说的那样做？

我有 19293 个文件：

```
1.9.3p194 :046 >   Content.count
=> 19293 
```

但是当我尝试获取第一页时，我仍然得到 19293

```
1.9.3p194 :059 >   Content.page(1).per(50).count
=> 19293 
```

知道我可以做什么吗？

我正在使用宝石：

```
14:34:58:myapp(master)$ be gem list kaminari
*** LOCAL GEMS ***
kaminari (0.14.1) 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:56:31.110

在 Mongoid Github repo 上查看[这个问题。](https://github.com/mongoid/mongoid/issues/1131)

要获取页面的正确条目，请执行以下操作：

```
Content.page(1).per(50).all.to_a 
```

这将评估 Mongoid 标准，仅产生 50 个条目。

# java - 带有 finally 块的 Futures、TimeoutException 和 Callables

> ID：14340013
> 
> 赞同：2
> 
> 时间：2013-01-15T14:36:09.437
> 
> 标签：java, concurrency, future, callable, timeoutexception

如果通过future.get（timeout，TimeUnit.SECONDS）取消Callable，是否会调用带有线程的finally块？

```
class MyCallable implements Callable<Future<?>>{
    public Future<?> call(){
        Connection conn = pool.getConnection();
        try {
            ... 
        } catch(CatchExceptions ce){
        } finally {
            conn.close();
        }
    } 
}

... 

future.get(executionTimeoutSeconds, TimeUnit.SECONDS); 
```

我知道 finally 总是会被调用，但我猜我错过了一些关于线程如何被中断的东西。这是我运行的一个测试，它没有显示我的 finally 块被解雇了。

```
@Test
public void testFuture(){
    ExecutorService pool =  Executors.newFixedThreadPool(1);
    try {
        pool.submit(new TestCallable()).get(1, TimeUnit.SECONDS);
    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    } catch (TimeoutException e) {
        e.printStackTrace();
    }
}

class TestCallable implements Callable<Void> {
    @Override
    public Void call() throws Exception {
        try{
        while(true){
            Thread.sleep(3000);
            break;
        }
        } catch (Exception e){
            System.out.println("EXCEPTION CAUGHT!");
            throw e;
        } finally {
            System.out.println("FINALLY BLOCK RAN!");
        }
    }

} 
```

看起来如果我添加 awaitTermination 它会运行。这个测试通过...

```
public void testFuture(){
    ExecutorService pool =  Executors.newFixedThreadPool(1);
    try {
        pool.submit(new TestCallable()).get(1, TimeUnit.SECONDS);
    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    } catch (TimeoutException e) {
        e.printStackTrace();
    }
    try {
        pool.awaitTermination(10, TimeUnit.SECONDS);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:46:15.460

[`future.get(...)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html#get%28long,%20java.util.concurrent.TimeUnit%29)不取消线程。它只等待线程完成，`TimeoutException`如果等待超时则抛出。

[`future.cancel(true)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html#cancel%28boolean%29) *会*导致线程被*中断*。这可能会也可能不会阻止您的线程处理。这取决于您所在`try ...`区域内发生的情况。例如，`Thread.sleep(...)`,和其他方法在线程中断时`Object.wait(...)`抛出。`InterruptedException`否则，您需要检查线程中断标志

```
if (Thread.currentThread().isInterrupted()) {
    // maybe stop the thread or whatever you want
    return;
} 
```

如果`try`进入该`finally`块，则*始终*调用该块（无论是否中断），除非存在某种 JVM 故障和崩溃。我怀疑你的线程根本没有被中断，所以继续运行。

# c - MISRA C 2004 和 c99

> ID：14340014
> 
> 赞同：1
> 
> 时间：2013-01-15T14:36:12.403
> 
> 标签：c, c99, misra, stdint, stdbool

MISRA C 2004 的规则 1.1 指定规范涵盖 c90 而不是 c99。

我想使用 stdint 和 stdbool 库而不是自己编写代码。有没有人在他们的 MISRA 实施中做出这个例外？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T12:45:50.853

您绝对应该使用 stdint.h 中的类型名称。这就是我以符合 MISRA-C:2004 的方式解决它的方法：

```
#ifdef __STDC_VERSION__ 
  #if (__STDC_VERSION__ >= 199901L)  /* C99 or later? */
    #include <stdint.h>
    #include <stdbool.h>
  #else
    #define C90_COMPILER
  #endif /* #if (__STDC_VERSION__ >= 199901L) */
#else
  #define C90_COMPILER
#endif /* __STDC_VERSION__  */

#ifdef C90_COMPILER
  typedef unsigned char uint8_t;
  typedef unsigned int  uint16_t;
  typedef unsigned long uint32_t;
  typedef signed char   int8_t;
  typedef signed int    int16_t;
  typedef signed long   int32_t;

  #ifndef BOOL
    #ifndef FALSE
      #define FALSE 0u
      #define false 0u
      #define TRUE  1u
      #define true  1u
    #endif

    typedef uint8_t BOOL;
    typedef uint8_t bool;
  #endif
#endif /* C90_COMPILER */ 
```

# jframe - 如何将 JPanel 添加到 JFrame

> ID：14340029
> 
> 赞同：0
> 
> 时间：2013-01-15T14:37:06.627
> 
> 标签：jframe, jpanel

我想知道添加覆盖整个 JFrame 的 JPanel 的正确语法是什么。

这是我到目前为止编写的代码：

```
package frame;

import javax.swing.JFrame;

public class Frame {

public static void main(String[] args) {
    JFrame Frame = new JFrame("My Window");
    Frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Frame.setVisible(true);
    Frame.setSize(320, 240);
    Frame.setResizable(false);
    Frame.setLocationRelativeTo(null);
    //Thanks in advance
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T14:48:35.097

```
package frame;

import javax.swing.JFrame;

public class Frame {

public static void main(String[] args) {
JFrame Frame = new JFrame("My Window");
Frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
Frame.setSize(320, 240);
Frame.setResizable(false);
Frame.setLocationRelativeTo(null);
JPanel panel = new JPanel();
frame.add(panel);
frame.setVisible(true);
panel.setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:08:50.080

```
 JPanel myPanel = new JPanel();
    myPanel.setBackground(Color.GREEN);
    JFrame jf = new JFrame("My window");
    jf.setVisible(true);

    jf.getContentPane().add(myPanel); 
```

有关更多信息，您应该阅读[Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/)。

# php - Wordpress 显示 the_content 抓取错误的帖子内容。为什么？

> ID：14340033
> 
> 赞同：0
> 
> 时间：2013-01-15T14:37:24.307
> 
> 标签：php, html, wordpress, thumbnails, customizing

我的问题是我正在显示“事件”类别中的一些帖子。然后稍后在同一页面上，我想显示来自“spiller”类别的随机帖子，并且效果很好。它得到一个随机帖子，显示标题、缩略图，但是当我说显示 the_content（或 the_excerpt）时，它会显示“事件”类别中帖子的所有内容（或摘录）。请帮我解决这个问题！

```
<div class="well span6 Padding10">
    <h4 class="titleFont MarginBottom20">KOMMENDE BEGIVENHEDER</h4>
    <?php
    $paged = ( get_query_var( 'paged' ) ) ? get_query_var( 'paged' ) : 1;
    $args  = array(
        'category_name' => 'events', // Change these category SLUGS to suit your use.
        'paged'         => $paged

    );
    query_posts( $args ); ?>
    <ul>
        <?php
        while ( have_posts() ) : the_post(); ?>
            <li>
                <a href="<?php the_permalink(); ?>"><strong><?php the_title(); ?></strong></a>
            </li>
        <?php endwhile; ?>
    </ul>
</div>

<div class="span6 well" style="height: 250px;"><h4 class="titleFont">SPILLER HIGHLIGHT</h4>
    <div class="row-fluid">
        <?php
        $args       = array(
            'numberposts'   => 1,
            'orderby'       => 'rand',
            'category_name' => 'spiller'
        );
        $rand_posts = get_posts( $args );
        foreach ( $rand_posts as $post ) : ?>

            <div class="span5"><?php the_post_thumbnail( array( 150, 150 ) ); ?></div>
            <div class="span6 MarginTop10">
                <h4><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h4>
                <!-- THIS IS WHERE IT MESSES UP: --><?php the_content(); ?>
            </div>
        <?php endforeach; ?>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T14:49:20.893

首先，您需要避免使用 query_posts。它影响了很多 Wordpress 全局变量，并改变了默认循环——除非这是你的特定意图——绝对需要避免，因为它也会导致性能问题。

请考虑用[WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)代替 query_posts。

除此之外，您需要重置您的 postdata，并在下一个循环中设置您的新 postdata。

**重置查询**：：

```
<?php 
while ( have_posts() ) : the_post(); 
?>
<li>
    <a href="<?php the_permalink(); ?>"><strong><?php the_title(); ?></strong></a>
</li>

<?php endwhile;wp_reset_query(); ?> 
```

**设置：**

```
foreach( $rand_posts as $post ) : setup_postdata($post); ?> 
```

**重置邮政数据：**

```
<?php endforeach;wp_reset_postdata(); ?> 
```

## 为什么需要这样做？

每当您使用以“the_”为前缀的便捷 Wordpress 函数之一时，该函数都会引用 $post Global。query_posts 更改了 Global（如上所述），如果您计划在单独的循环中引用该 Global，您需要能够在运行中再次更改它。

重置查询只是确保所有全局变量都回到 Wordpress 默认值的良好常规做法。但是 setup_postdata($post_object) 实际上允许我们在自定义循环中将 Global 更改为当前对象。

WP_Query 如此有效的原因是重置查询不再是必要的，因为 WP_Query 循环已本地化到该特定对象，并且不会修改全局 $wp_query （这会顺便影响很多其他全局变量）。

[这里有一些关于query_posts 与 WP_Query](https://wordpress.stackexchange.com/questions/1753/when-should-you-use-wp-query-vs-query-posts-vs-get-posts)的方便信息，应该可以更好地为您解释。

啤酒花这有帮助。

# android - 如何摆脱android操作栏底部的边框

> ID：14340037
> 
> 赞同：2
> 
> 时间：2013-01-15T14:37:32.523
> 
> 标签：android, android-actionbar, actionbarsherlock

我刚刚开始使用操作栏 sherlock，我一直在努力解决操作栏底部显示的边框。我很确定问题不是由背景图像引起的。

```
 <style name="Theme.MyTheme" parent="@style/Theme.Sherlock.Light">
    <item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="android:actionBarItemBackground">@drawable/states_of_actionbar</item>
    <item name="actionBarItemBackground">@drawable/states_of_actionbar</item>
    <item name="actionDropDownStyle">@style/DropDownStyle</item>
    <item name="android:actionDropDownStyle">@style/DropDownStyle</item>
</style>

<style name="Widget.MyTheme.ActionBar" parent="android:Widget.Holo.ActionBar">
    <item name="android:background">@drawable/action_bar_bg</item>
    <item name="background">@drawable/action_bar_bg</item>
    <item name="android:src">@drawable/action_bar_bg</item>
</style> 
```

我试图在 values & values-14 中定义上述风格（背景），但没有运气..

我的猜测是它受到全息风格的影响..

我怎样才能摆脱厚边框？

这是澄清我的问题的图像：

![在此处输入图像描述](../Images/bf8e7b6a53ed756bc2944712e99d2d5c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:46:03.993

我认为您尝试使用 XY 重复背景图像或平铺作为操作栏背景，所以问题是您的背景图像的高度不足以覆盖操作栏高度，而粗边框是下一个 Y 平铺图像的结果。
您可以通过增加图像高度来解决此问题。或者您可以使用`setTileModeXY(TileMode.REPEAT, TileMode.CLAMP)`from 类`android.graphics.drawable.BitmapDrawable`的方法使图像在水平重复图像时拉伸其高度，然后应用为您的操作栏背景。
这里的示例代码：

```
void onCreate(Bundle savedInstanceState) {
        BitmapDrawable bg = (BitmapDrawable)getResources().getDrawable(R.drawable.your_image); // get the image as bitmap drawable
        bg.setTileModeXY(TileMode.REPEAT, TileMode.CLAMP); // set the TileMode.
        getSupportActionBar().setBackgroundDrawable(bg); // applied to actionbar      
} 
```

# c# - UserPrincipal 对象，Active Directory 查询：DirectoryServicesCOMException

> ID：14340045
> 
> 赞同：2
> 
> 时间：2013-01-15T14:38:11.933
> 
> 标签：c#, asp.net

对 System.DirectoryServices.DirectoryServicesCOMException 的重复表示歉意[：发生操作错误，](https://stackoverflow.com/questions/13688031/system-directoryservices-directoryservicescomexception-an-operations-error-occu?answertab=active#tab-top)但我无法发表评论，也没有答案。

这个问题的解决方案没有奏效。[发布时出错：System.DirectoryServices.DirectoryServicesCOMException](https://stackoverflow.com/questions/9181435/error-on-publishing-system-directoryservices-directoryservicescomexception)

我在 Visual Studio 2010 中有一个带有 Razor 视图引擎的新 ASP.NET MVC 3 Web 应用程序项目。它是通过添加两行代码添加到主控制器并`System.DirectoryServices.AccountManagement`添加到项目中而生成的。

这在我的本地 PC 上运行良好，但在我创建的 Windows 2008 R2 IIS 7.5 站点上出现错误。

该站点使用`defaultAppPool`，它正在使用`ApplicationPoolIdentity`. 已授予根站点文件夹`IUSR`和`IIS AppPool\DefaultAppPool`读取权限。

控制器中的两行代码是：

```
PrincipalContext context = new PrincipalContext(ContextType.Domain);
ViewBag.name = UserPrincipal.FindByIdentity(context, User.Identity.Name).DisplayName; 
```

我得到的错误是：

> *System.DirectoryServices.DirectoryServicesCOMException：发生操作错误。*

堆栈跟踪：

> [DirectoryServicesCOMException (0x80072020)：发生操作错误。]
> System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail) +781
> System.DirectoryServices.DirectoryEntry.Bind() +44
> System.DirectoryServices.DirectoryEntry.get_AdsObject() +42
> System.DirectoryServices .PropertyValueCollection.PopulateList() +29
> System.DirectoryServices.PropertyValueCollection..ctor(DirectoryEntry entry, String propertyName) +119
> System.DirectoryServices.PropertyCollection.get_Item(String propertyName) +163
> System.DirectoryServices.AccountManagement.PrincipalContext.DoLDAPDirectoryInitNoContainer() + 535649
> System.DirectoryServices.AccountManagement.PrincipalContext.DoDomainInit() +51
> System.DirectoryServices.AccountManagement.PrincipalContext.Initialize() +141
> System.DirectoryServices.AccountManagement.PrincipalContext.get_QueryCtx() +42
> System.DirectoryServices.AccountManagement.Principal.FindByIdentityWithTypeHelper（PrincipalContext 上下文，类型 principalType，可空2 个参数）+248 系统。 Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary 1 续) +640 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList 2 参数) +312 System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext控制器上下文，字符串动作名称）+691`1 identityType, String identityValue, DateTime refDate) +27
> System.DirectoryServices.AccountManagement.UserPrincipal.FindByIdentity(PrincipalContext context, String identityValue) +95
> ActiveDirectory.Controllers.HomeController.Index() in C:\projects\ActiveDirectory\ActiveDirectory\Controllers\HomeController.cs:18
> lambda_method(Closure , ControllerBase , Object[] ) +79
> System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`
> `2 parameters) +39
> System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +125
> System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`
> `1 filters, ActionDescriptor actionDescriptor, IDictionary`
> 
> System.Web.Mvc.Controller.ExecuteCore() +162
> System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +305
> System.Web.Mvc.<>c__DisplayClassb.b__5() +62
> System.Web.Mvc.Async .<>c__DisplayClass1.b__0() +20
> System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +469
> System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +375

很好，这是我的第一个问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T15:10:51.170

这很可能是权限问题。检查运行应用程序池的帐户是否有权执行这些 Active Directory 调用。如果它是本地计算机帐户，则可能不会。

您可以在此处找到更多信息：http: [//msdn.microsoft.com/en-US/library/ms180891 (v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/ms180891(v=vs.80).aspx)

# java - 带有 XML 模式的泛型

> ID：14340049
> 
> 赞同：1
> 
> 时间：2013-01-15T14:38:26.907
> 
> 标签：java, xml, xsd, jax-ws, jax-rs

> **可能重复：**
> [如何创建通用 XSD 类型](https://stackoverflow.com/questions/2130939/how-to-create-a-generic-xsd-type)

有谁知道如何编写一个描述通用 Java 类的 XSD，例如：

```
public class PageableResponse<T>
{
    @XmlElement(name = "Data", required = true)
    private List<T> data = new ArrayList<T>();

    public List<T> getData()
    {
        return data;
    }
} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:21:25.953

您可以使用`generateSchema`on 方法`JAXBContext`找出与您的类模型关联的 XML 模式。

```
import java.io.IOException;
import javax.xml.bind.*;
import javax.xml.transform.Result;
import javax.xml.transform.stream.StreamResult;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(PageableResponse.class);   
        jc.generateSchema(new SchemaOutputResolver() {

            @Override
            public Result createOutput(String namespaceURI, String suggestedFileName)
                throws IOException {
                return new StreamResult(suggestedFileName);
            }

        });

    }

} 
```

**笔记：**

JAXB (JSR-222) 实现不会往返该特定类。

# pointers - 字符指针与整数指针

> ID：14340051
> 
> 赞同：-1
> 
> 时间：2013-01-15T14:38:34.037
> 
> 标签：pointers

这是如何工作的：

```
int main()
{
    int * ch = NULL;
    cout<<"Hello"<<ch<<"World"<<endl;;
    cout<<"Hello world1"<<endl;
    return 0;`
 } 
```

而这失败了：

```
int main()
{
    char * ch = NULL;
    cout<<"Hello"<<ch<<"World"<<endl;;
    cout<<"Hello world1"<<endl;
    return 0;`
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:15:10.470

对于大多数指针类型，

```
cout << ptr; 
```

打印指针值的实现定义的表示，通常是十六进制格式的地址。但是对于`char*`，`operator<<()`被重载以将指针解释为指向以`char`0 结尾的`char`数组中的第一个的指针，并像这样打印它`printf("%s", ptr);`。

打印空指针指向的地址是无害的，在空指针之后解释从它指向的位置开始的字节是未定义的行为，并且通常会导致分段错误。

# android - AChartEngine：“自动缩放”具有多个 Y 轴的图表

> ID：14340052
> 
> 赞同：3
> 
> 时间：2013-01-15T14:38:34.490
> 
> 标签：android, achartengine

我正在使用 AChartEngine 的 TimeSeries 来显示四个单独的值系列。“值”有很大不同的比例 - 其中一个是分数（在 0 和 1 之间变化），另一个的范围是 0 到 1000。

现在，我想同时显示所有四个。我已经能够做到这一点，但问题是分数的线总是拥抱 X 轴，因为*当 Y 轴从 0 到 1000 时，0 和 1 之间的变化是无法区分的*。

**我想到的一个解决方案是，在将所有值添加到系列之前**，我会将它们转换为通用比例。这样，所有四行始终处于相同的比例。我可以完全摆脱 Y 轴。凉爽的。

但这带来了另一个问题：我还允许用户选择单个系列来查看；而这一次，我想

*   显示单个 Y 轴
*   显示未缩放的值。

但是，由于我添加了缩放值，图表现在已经丢失了原始值，只会显示缩放值。

所以，我的问题是：有没有办法在绘制多个系列时缩放 Y 轴上的值，并在显示单个系列时恢复为未缩放的值？

另外，如何在显示 X 轴的同时只隐藏 Y 轴？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:10:52.340

您可以在 AChartEngine 中使用多比例图表。图表类型是CombinedXYChart。[你可以在这里](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/CombinedTemperatureChart.java)看到一个例子。

解释这种方法的另一个线程是[this](https://stackoverflow.com/questions/14341770/achartengine-xymultipleseriesrenderer-parameter)。

# c# - IIS 集成管道模式与`Server.TransferRequest("Form2.aspx");`

> ID：14340054
> 
> 赞同：3
> 
> 时间：2013-01-15T14:38:37.660
> 
> 标签：c#, iis, visual-studio-2012, integrated-pipeline-mode

我有这样一行`C#`代码：

```
Server.TransferRequest( "Form2.aspx" ); 
```

我在 IIS 7 上运行它没有问题，但是当我使用 Visual Studio 2012（使用它的内部服务器，用于调试或类似的东西）运行我的代码时，我得到一个异常：

```
This operation requires IIS integrated pipeline mode. 
```

我应该怎么办？

# c++ - 增加内存映射文件的大小

> ID：14340059
> 
> 赞同：8
> 
> 时间：2013-01-15T14:38:49.963
> 
> 标签：c++, c, windows, winapi, memory-mapped-files

> **可能重复：**
> [如何动态扩展内存映射文件](https://stackoverflow.com/questions/6096485/how-to-dynamically-expand-a-memory-mapped-file)

嗨，我有一个树状数据结构存储在 Windows 的内存映射文件中，当我需要插入记录时，我正在检查它的空闲指针是否更接近文件结尾。但真正的问题是调整文件大小。

在 windows 文档中，据说 `CreateFileMapping' 将根据其参数调整文件大小。所以我决定如下使用它。

```
#define SEC_IMAGE_NO_EXECUTE 0x11000000

static void resize_file(wchar_t * file_name,int size)
{
  hFile = CreateFile(file_name,GENERIC_READ|GENERIC_WRITE,0,\
                     NULL,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,\
                        NULL);
  if (hFile == INVALID_HANDLE_VALUE)
  {
       MessageBox(NULL,L"resize_file CreateFile have been failed", szAppName,MB_OK);
      exit(0);
  }

  // open file mapping object //
  HANDLE hMap = CreateFileMapping(hFile,NULL,PAGE_EXECUTE_READWRITE|SEC_IMAGE_NO_EXECUTE,0,size,NULL);

  // Close files and mapping //
  CloseHandle(hMap); 
  CloseHandle(hFile);
} 
```

这行得通吗？我对此有点内疚，因为我只是打开并重新映射文​​件并没有刷新它。我还需要冲洗它并进行任何其他操作吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-15T15:00:18.567

[文档](https://docs.microsoft.com/en-us/windows/win32/api/memoryapi/nf-memoryapi-createfilemappingw)说了两件事。

首先（在“*备注*”部分），

> 如果应用程序为文件映射对象指定的大小大于磁盘上实际命名文件的大小，并且如果页面保护允许写访问（即`flProtect`参数指定`PAGE_READWRITE`or `PAGE_EXECUTE_READWRITE`），则**磁盘上的文件增加到匹配指定大小的文件映射对象**。如果文件被扩展，文件老端和新端之间的文件内容不保证为零；行为由文件系统定义。

这基本上意味着当您将磁盘上的文件映射到比调用 to 的文件更大的内存区域时，磁盘上的文件会被调整大小`CreateFileMapping()`，并用未指定的内容填充它。

其次（在“*返回值*”部分），

> 如果对象在函数调用之前存在，则函数返回现有对象的句柄（**具有其当前大小，而不是指定的大小**），并`GetLastError`返回`ERROR_ALREADY_EXISTS`.

对我来说，这意味着如果您的文件已经映射，您的调用`resize_file()`将无效。您必须取消映射，调用`resize_file()`，然后重新映射它，这可能是您想要的，也可能不是。

# php - WAMP 服务器不允许我访问 php 文件

> ID：14340070
> 
> 赞同：2
> 
> 时间：2013-01-15T14:39:10.290
> 
> 标签：php, apache, wamp

我在这里尝试了其他问题的一些技巧，但无济于事。出于某种原因，在没有使用 3 周后，昨天当我打开笔记本电脑并激活 WAMP 服务器时（没有明显问题，所有视觉反馈都正常），我无法在浏览器中访问任何 php 文件。我可以去`localhost/random.html`，但我不能参观`localhost/otherfile.php`。我不知道问题可能是什么，自从我上次使用它以来没有任何配置发生变化。我已经安装了 Windows 更新，我正在使用 Windows XP，但我找不到任何迹象。php 错误日志是空的，并且 apache 错误日志没有向我显示任何导致我找到解决方案的具体错误（尽管我已经查看了它所显示的内容）。

关于做什么或在哪里寻找解决方案的任何想法？

# load - 使用 LoadStorm 进行负载测试时，有没有办法克服身份验证弹出窗口

> ID：14340071
> 
> 赞同：0
> 
> 时间：2013-01-15T14:39:12.137
> 
> 标签：load

我想在网站的登台环境中进行压力和负载测试，但是当 URL 加载时它有一个身份验证弹出窗口，我不知道如何在负载风暴中通过这个登录步骤。

**后续步骤：**

1.  在 LoadStorm 中添加新场景
2.  添加新步骤：打开一个页面
3.  URL:/ ，服务器：staging.site.com。服务器已“验证”
4.  点击【保存】

**实际结果：**

`Status:`“您未能登录”，因为弹出窗口中需要身份验证。

**笔记：**

我尝试添加服务器：user:pass@staging.site.com 但它没有通过验证步骤。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:59:19.473

我不熟悉 Load Strom，但我相信如果您是网站的所有者（我假设您是），有几种方法可以规避这个问题

1.尝试编辑 pupop 以包含凭据，这样您只需记录按“输入”而不提供实际凭据。

1.  有点明显，但您可以尝试编辑登录屏幕以包含在弹出窗口之外。

# ruby - 优雅地将一组值“解开”到 ruby 中的散列中

> ID：14340074
> 
> 赞同：0
> 
> 时间：2013-01-15T14:39:18.323
> 
> 标签：ruby, arrays, hash

我有一个数组

```
[{:id=>1, :name=>"name"}, {:id=>2, :name=>"name2"}, {:id=>45, :name=>"name3"}] 
```

将它变成哈希的**优雅方法是什么？**（像这样）：

```
{1=>"name", 2=>"name2", 45=>"name3"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:41:43.443

```
arr = [{:id=>1, :name=>"name"}, {:id=>2, :name=>"name2"}, {:id=>45, :name=>"name3"}]
hash = Hash[arr.map &:values]
# => {1=>"name", 2=>"name2", 45=>"name3"} 
```

文档链接：[Hash::[]](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-c-5B-5D)

# ruby-on-rails - 在生产服务器上使用 capistrano 清理旧资产

> ID：14340076
> 
> 赞同：1
> 
> 时间：2013-01-15T14:39:22.753
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, deployment, capistrano

我在本地使用 capistrano 预编译我的资产，并在使用 rsync 上传这些资产后，使用下一个代码`deploy.rb:`

```
namespace :assets do
    task :precompile, :roles => :web, :except => { :no_release => true } do
      from = source.next_revision(current_revision)
      if capture("cd #{latest_release} && #{source.local.log(from)} vendor/assets/ app/assets/ | wc -l").to_i > 0
        run_locally("rm -rf public/assets/*") 
        run_locally "bundle exec rake assets:precompile"
        find_servers_for_task(current_task).each do |server|
         #clean server assets before upload local new assets
         run_locally "rsync -vr --exclude='.DS_Store' --recursive --times --rsh=ssh --compress --human-readable --progress public/assets #{user}@#{server.host}:#{shared_path}/"
        end
      else
        puts "Skipping asset pre-compilation because there were no asset changes"
      end
    end
  end 
```

问题是文件夹`#{shared_path}/assets`在我每次部署时都在快速增长。

**`rm -rf public/assets/*`在在线上传本地新资产之前，我需要在生产服务器上运行代码`#clean server assets before upload local new assets`**

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-02T12:44:29.913

只需将其添加到`config/deploy.rb`

```
# Callbacks
namespace :deploy do
  before :compile_assets, :force_cleanup_assets do
    on release_roles(fetch(:assets_roles)) do
      within release_path do
        with rails_env: fetch(:rails_env) do
          execute :rake, 'assets:clobber'
        end
      end
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:54:24.107

您只需要创建一个任务并在 :precompile 任务之前运行它。

```
task :clean_assets do 
  ...
end

// tell capistrano when you want to run this task
before 'precompile', 'clean_assets 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T16:23:45.503

当此文件夹非常大时删除资产的修复方法是：

```
run %Q{cd #{shared_path} && rm -rf assets/* } 
```

以前，如果您愿意，您已将共享文件夹的路径设置为：

```
set :shared_path, "path_to_your_shared_folder" 
```

这个问题的最终代码如下：

```
namespace :assets do
    task :precompile, :roles => :web, :except => { :no_release => true } do
      from = source.next_revision(current_revision)
      if capture("cd #{latest_release} && #{source.local.log(from)} vendor/assets/ app/assets/ | wc -l").to_i > 0
        run_locally("rm -rf public/assets/*") 
        run_locally "bundle exec rake assets:precompile"
        find_servers_for_task(current_task).each do |server|
         run %Q{cd #{shared_path} && rm -rf assets/* }
         run_locally "rsync -vr --exclude='.DS_Store' --recursive --times --rsh=ssh --compress --human-readable --progress public/assets #{user}@#{server.host}:#{shared_path}/"
        end
      else
        puts "Skipping asset pre-compilation because there were no asset changes"
      end
    end
  end 
```

# javascript - 是否可以通过 javascript 将当前 HTML 文档作为附件发送？

> ID：14340082
> 
> 赞同：3
> 
> 时间：2013-01-15T14:39:35.193
> 
> 标签：javascript, html, email

> **可能重复：**
> [从 javascript 发送邮件](https://stackoverflow.com/questions/4747038/sending-mail-from-javascript)

我想发送一封电子邮件并将当前 HTML 页面作为附件。是否可以通过 java 脚本获取当前的整个 HTML 文档并将其作为附件发送。

以下是我的代码：

```
function isBillDateFilled(){
var billDate = global.getElementById('CIMtrek_RegWhseCo_BillDate').value;
    if(billDate.length==0){
        alert("Please enter Bill Date.");
        return false;
    }else{
        var formType=global.getElementById('CIMtrek_RegWhseCo_FormType').value;
        alert("formType : "+formType);
        if(formType=='Regional'){
            var underWeightAns= confirm("Weight Check" ; "Is trailer under 36,000 lbs?");
            var actBilledWt = global.getElementById('CIMtrek_RegWhseCo_ActBilledWt').value;
            alert("Reminder: Use Actual Bill Weight - which is "+actBilledWt+" lbs");
            if(underWeightAns){
                alert("Under Weight");
                //Send Mail
            }
        }
      }
} 
```

我评论了发送邮件。这是我想要获取当前 HTML 页面并将其作为附件发送的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:12:51.223

解决这个问题的最简单方法是从 innerHTML 构建内容：

```
var base = location.href.replace(/\\/g,'/').replace(/\/[^\/]*$/, '');
var html = '<html><head>';
html += '<base href="'+base+'">';
html += document.getElementsByTagName('head')[0].innerHTML; // some older browsers don't know document.head
html += '</head><body>';
html += document.body.innerHTML;
html += '</body></html>'; 
```

我添加了基本标记，因此您可以在服务器上下文之外使用 HTML，而无需修改所有链接和图像路径。

# c# - 图像处理任务：Erosion C#

> ID：14340083
> 
> 赞同：1
> 
> 时间：2013-01-15T14:39:37.257
> 
> 标签：c#, image, bitmap, unsafe

我正在做一个图像处理任务，我想在其中实现腐蚀和膨胀算法。它需要在所有方向（在本例中为向上、向下、向左和向右）查找每个像素，因此我使用的是 plus 结构元素。这是我的问题：我有 4 个嵌套的 for 循环，这使得这个操作非常慢。谁能告诉我如何在不使用不安全方法的情况下加快侵蚀过程？这是我所拥有的：

```
 colorlistErosion = new List<Color>();
        int colorValueR, colorValueG, colorValueB;
        int tel = 0;

        for (int y = 0; y < bitmap.Height; y++)
        {
            for (int x = 0; x < bitmap.Width; x++)
            {
                Color col = bitmap.GetPixel(x, y);
                colorValueR = col.R; colorValueG = col.G; colorValueB = col.B;
                //Erosion
                for (int a = -1; a < 2; a++)
                {
                    for (int b = -1; b < 2; b++)
                    {
                        try
                        {
                            Color col2 = bitmap.GetPixel(x + a, y + b);
                            colorValueR = Math.Min(colorValueR, col2.R);
                            colorValueG = Math.Min(colorValueG, col2.G);
                            colorValueB = Math.Min(colorValueB, col2.B);
                        }
                        catch
                        {
                        }
                    }
                }
                colorlistErosion.Add(Color.FromArgb(0 + colorValueR, 0+colorValueG, 0+colorValueB));
            }
        }
        for (int een = 0; een < bitmap.Height; een++)
            for (int twee = 0; twee < bitmap.Width; twee++)
            {
                bitmap.SetPixel(twee, een, colorlistErosion[tel]);
                tel++;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:45:31.770

> 如何在不使用不安全方法的情况下加快侵蚀过程？

您可以将内部循环变成`Parallel.For()`.

但我不能 100% 确定 GetPixel() 尤其是 SetPixel() 是否是线程安全的。那是一个交易破坏者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:54:29.760

Your algorithm is inherently slow due to the 4 nested loops. You're also processing the bitmap using the slowest approach possible `bitmap.GetPixel`.

Take a look at [SharpGL](http://sharpgl.codeplex.com/). If they don't have your filters you can download the source code and figure out how to make your own.

# android - 以编程方式启用 USB Tethering Android，无需用户交互

> ID：14340084
> 
> 赞同：1
> 
> 时间：2013-01-15T14:39:37.833
> 
> 标签：android, tethering

我正在开发一个需要 USB Tethering 的应用程序。

我正在使用以下代码来执行此操作

```
Intent tetherSettings = new Intent();
        tetherSettings.setClassName("com.android.settings", "com.android.settings.TetherSettings");
        startActivity(tetherSettings); 
```

但是此代码正在打开网络共享设置，因此用户可以通过单击它来启用 USB 网络共享。是否可以在没有任何用户交互的情况下启用网络共享？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:40:37.127

不，Android 非常具有安全意识，并且不会在没有用户交互的情况下启用此设置。

# asp.net-mvc - Html ActionLink 在本地机器上工作正常，在生产服务器上“找不到资源”

> ID：14340092
> 
> 赞同：0
> 
> 时间：2013-01-15T14:39:57.453
> 
> 标签：asp.net-mvc, actionlink

我在本地和生产中都使用 MVC 4。从我的 Index.cshtml 文件中，我有一个简单的链接：

`@Html.ActionLink("Click to send an email", "Email", "Home");`

其中电子邮件在我的 HomeController 中定义为：

```
public ActionResult Email() 
{

    // send mail
    MailMessage message = new MailMessage();

    message.From = new MailAddress("email@email.com");
    message.To.Add(new MailAddress("tony@email.com"));

    message.Subject = "User submitted a message...";

    string msgBody = "<html><body>" 
                    + "You have a new user submitted form request sent at " 
                    + DateTime.Now + ": 

    message.Body = msgBody;
    SmtpClient client = new SmtpClient();
    client.Send(message);

    return RedirectToAction("Index");

} 
```

我已经删除了客户的电子邮件地址和其他详细信息，但这是基本要点。特别没有“电子邮件”视图，它只是使用 system.net 发送电子邮件并返回主页。

这在本地 Visual Web Express 中运行顺利，在 Arvixe 托管上它会生成“找不到资源”异常。

# android - 如何保存我的活动更改？

> ID：14340094
> 
> 赞同：0
> 
> 时间：2013-01-15T14:40:14.053
> 
> 标签：android

我对我的活动进行了一些更改并开始了其他活动，但是当我回来时，活动更改消失了。如何保存我的更改？

单击按钮时我会这样做：

```
public void onClick(View v) {

    btn.setVisibility(View.GONE);
    e_mail.setVisibility(View.GONE);
    key.setVisibility(View.GONE);
    username.setVisibility(View.GONE);
    view1.setVisibility(View.GONE);
    view2.setVisibility(View.GONE);
    view3.setVisibility(View.GONE);
    edt.setVisibility(View.GONE);
    view5.setVisibility(View.VISIBLE);

}); 
```

并重定向到另一个活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:42:29.240

如果您想保留当前的布局，请在`OnResume()`. 它会为你工作。

```
@Override
public void onResume()
 {
    super.onResume();
    btn.setVisibility(View.GONE);
    e_mail.setVisibility(View.GONE);
    key.setVisibility(View.GONE);
    username.setVisibility(View.GONE);
    view1.setVisibility(View.GONE);
    view2.setVisibility(View.GONE);
    view3.setVisibility(View.GONE);
    edt.setVisibility(View.GONE);
    view5.setVisibility(View.VISIBLE);
} 
```

希望能帮助到你。

# ios - 首次使用 UITabBar 更改应用程序语言

> ID：14340101
> 
> 赞同：1
> 
> 时间：2013-01-15T14:40:57.250
> 
> 标签：ios, localization, uitabbarcontroller, tabbar

我有一个 UITabBar。应用程序第一次运行时，用户需要在模态视图控制器中选择一种语言。我在`application didFinishLaunchingWithOptions`使用中展示了模态视图：

```
 [self.tabBarController presentModalViewController:languageVC animated:YES]; 
```

问题是：UITabbar 已经加载，所以 UITabbar 上的语言不会改变。

我不能在 main.m 中这样做（就像很多答案所说的那样），因为用户需要先做出选择。

所以我尝试等待加载 TabBar，直到用户选择了一种语言，但这也不起作用。

我见过另一个应用程序这样做（虽然这个应用程序没有 UITabbar），我的客户真的需要它。但我不知道如何解决这个问题。甚至有可能使用 UITabBar 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:21:52.337

您可以将 AppDelegates didFinishLaunchingWithOptions 中的语言设置为全局参数。然后，您可以使用在标签栏中的每个 ViewControllers 中设置 tabbarItems 标题

```
self.tabbarItem.title = @"abc123"; 
```

您可以选择一个文本变量...

```
if ([language isEqualToString:@"german"]).....
else if ([language isEqualToString:@"english"])..... 
```

# emacs - 向 Emacs-Lisp 添加注释结束字符

> ID：14340103
> 
> 赞同：2
> 
> 时间：2013-01-15T14:41:00.753
> 
> 标签：emacs, lisp, eval

是否可以在 emacs 中添加注释结束字符？

我将使用我拥有的第一个代码并应用我想要的作为示例：

```
 (defun smart-tab ()
      (interactive)
\1\       (if (minibufferp)
\1a\             (minibuffer-complete)
\2\         (if (eq major-mode 'emacs-lisp-mode) 
            (progn 
              (save-excursion 
                (search-backward "(def")
                (while (not (looking-at "\\s-*)"))
                  (beginning-of-line 1)
                  (indent-for-tab-command)
                  (beginning-of-line 1) 
                  (next-line)
                  (when (looking-at (concat ".*" comment-start))
                    (next-line))))
              (indent-for-tab-command))    
          (yas-expand)))
      ) 
```

我想在函数之前的缩进区域中添加一些信息，指示逻辑部分的开始位置。

这对于 emacs-lisp 是否可行，是否有一种简单的方法可以使用一些小技巧来考虑评估器跳过某些文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T15:17:45.980

Emacs Lisp 没有阅读器宏（或任何其他修改阅读器的方式）。但是您可以通过编写自己的宏并使用它而不是`defun`. 例如，使用此宏定义：

```
(defmacro mydefun (name args &rest body)
  "Define NAME as a function.
Like normal `defun', except BODY may contain |comments|."
  (labels ((uncomment (form)
             (cond ((not (consp form)) form)
                   ((and (symbolp (car form))
                         (string-match "|.*|$" (symbol-name (car form))))
                    (uncomment (cdr form)))
                   (t (cons (uncomment (car form))
                            (uncomment (cdr form)))))))
    `(defun ,name ,args ,@(uncomment body)))) 
```

你可以写：

```
 (mydefun smart-tab ()
      (interactive)
|1|       (if (minibufferp)
|1a|             (minibuffer-complete)
|2|         (if (eq major-mode 'emacs-lisp-mode) 
            (progn 
              (indent-for-tab-command))))) 
```

（不能`\`用于此，因为该字符对于 Emacs Lisp 阅读器已经有意义。）

不过，我不得不说，这对我来说似乎不是一个特别好的主意。将您的部分标题放在源右侧的注释中会更好：

```
(defun smart-tab ()
  (interactive)
  (if (minibufferp)                         ; 1
      (minibuffer-complete)                 ; 1a
    (if (eq major-mode 'emacs-lisp-mode)    ; 2
        (progn 
          (indent-for-tab-command))))) 
```

这似乎和您的建议一样清楚，并且对于其他 Emacs Lisp 程序员来说更容易理解。

# android - 我想在android的屏幕上显示整个c程序

> ID：14340104
> 
> 赞同：-1
> 
> 时间：2013-01-15T14:41:13.913
> 
> 标签：android

我想在屏幕上显示用户应该可以看到的整个 c 程序。

我使用了 textView 但由于代码包含特殊符号而出现错误。

例如：

```
 android:text=" #include <stdio.h>
 int main()
{
int x, y, temp;

printf("Enter the value of x and y\n");
scanf("%d%d", &x, &y);

printf("Before Swapping\nx = %d\ny = %d\n",x,y);

temp = x;
x = y;
y = temp;

printf("After Swapping\nx = %d\ny = %d\n",x,y);

return 0;
 }" /> 
```

我还希望用户应该能够滚动代码，因为代码可能比示例大。我是菜鸟，所以请建议我为 textView 显示代码的任何替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:47:19.073

将您的 C 代码保存在 assets 文件夹中的文件中，例如“res/assets/code.c”。

编写一个将文件内容读取到字符串的函数：

```
private String readFileInAssetsDir(String filename) {
    BufferedReader br = null;
    StringBuffer sb = new StringBuffer();
    try {
        br = new BufferedReader(new InputStreamReader(getAssets().open(filename)));
        String line;
        while((line = br.readLine()) != null)
            sb.append(line + "\n");
    } catch(Exception e) {
        // TODO
    }
    return sb.toString();
} 
```

而现在在你的布局中定义一个WebView（不是TextView）（优点是可以显示任何字符，WebView直接提供缩放和滚动）：

```
<WebView
    android:id="@+id/webView"
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="1" /> 
```

最后，我将所有 C 代码包含在一个`<pre></pre>`标签中，然后在 WebView 小部件中显示它：

```
 String plainCode = readFileInAssetsDir("code.c");
    String htmlCode = "<pre>" + plainCode + "</pre>";
    webView.loadDataWithBaseURL("", htmlCode, "text/html", "utf-8", ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-30T08:01:58.873

编辑：这可行，但只能读取 TXT 文件中的单行文本

字符串线；文本视图视图；

```
@Override
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_addingprogrammultipletimes);

    AssetManager am = getAssets();
    try {
        InputStream is = am.open("add.txt");
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        line = reader.readLine();
        view = (TextView) findViewById(R.id.textView);
        view.setText(line);
    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

# html - 多人游戏是否应该总是根据每个客户端请求从数据库中请求数据？

> ID：14340105
> 
> 赞同：4
> 
> 时间：2013-01-15T14:41:21.127
> 
> 标签：html, node.js, socket.io, multiplayer

嗯，我不知道这个问题的标题是否合适，但我不知道如何用几句话来表达。

我目前正在开发一个多人 2D 游戏，在服务器端使用 NodeJS 和 Socket.io，在客户端使用 HTML5。这个游戏不需要保存玩家的进度，除非他们完成它。而且我必须确保所有关于球员的信息，例如得分和帮助，都是有效的。所以我决定将这些信息集中在服务器上，这样客户端就不会向服务器发送分数，而是根据发送的信息计算分数并将它们发送给所有客户端。除此之外，我可以在最少 2 名玩家和最多 4 名玩家的情况下运行这个游戏的不同会话。

起初我决定用服务器来实现这个，总是在内存中维护游戏会话数据，但现在我质疑自己是否应该使用数据库来存储这些数据。我只在会话数据完成时才使用数据库来存储会话数据，因为我对未完成的会话数据没有用处。但是我应该在他们玩的时候维护数据库中的会话和玩家数据吗？我的问题是客户端与服务器的通信非常频繁，使用这种方法，我必须首先从数据库请求他们的数据，进行必要的更改，将其存储回数据库，然后对每个客户端请求重复此过程。也许这个问题的答案很明显，但我应该改用这种方法吗？

这是我第一次开发游戏，所以我不知道事情通常是如何运作的。我只知道我希望服务器速度快。我选择将所有内容都保存在内存中，主要是因为我发现的所有关于多人游戏开发的示例和教程都没有提到数据库......

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T18:11:49.123

我还在使用 node.js 和 socket.io 开发多人游戏。您不应该在每个客户端请求上访问数据库，因为，

**1) I/O 操作代价高昂。**

读/写数据库是“昂贵的”（慢）。从内存中读取和写入要快得多。

**2) I/O 操作在 Node.js 中应该是异步的。**

```
function read_or_alter_database(input, function(callback){ update_the_client(); }); 
```

这使得数据库操作非阻塞：应用程序的其余部分仍将运行，直到操作完成。然后，执行回调函数。如果玩家的客户端依赖数据库访问来更新游戏状态，那么这就变成了阻塞操作（因为数据库操作完成后游戏才能继续），这否定了 Node.js 的主要目的。

**3) 多人游戏中会有大量的客户端请求。**

这个加点 1 会导致很大的效率损失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:15:22.063

Sounds like you already have your answer: Since the state is only important once a session is complete, only store the data upon completion of that session. Storing the intermediate values serves no purpose, and only slows things down.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T14:50:45.437

Node.js 是一个相对较新的开发平台——不确定它是否能够支持这样的系统。就通常所做的而言 - 尽可能多的信息首先存储在客户端，然后服务器通常将数据保存*在内存中*，或者，至少，我知道流行游戏英雄联盟、世界就是这种情况魔兽争霸和星际争霸II。再说一遍，这些应用程序不是 HTML/Node.js，对系统要求非常高，并且是由大型开发公司开发的 - 可能 DB 方法适用于较小的游戏，我只是从未听说过.

# xslt - 如何在模板中获取模板名称

> ID：14340108
> 
> 赞同：2
> 
> 时间：2013-01-15T14:41:28.963
> 
> 标签：xslt

是否可以在模板内获取模板名称？例子：

```
<xsl:template name="list">
<!-- Get name value (in this case "list") -->
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:53:34.263

据我所知，XSLT 1.0 和 XSLT 2.0 都没有提供这样的特性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:30:03.113

正如马丁所说，可能没有办法做到这一点。

即使存在这样的容量，使用它肯定不会比仅使用您想要的值定义一个变量更简单：

```
<xsl:template name="list">
   <xsl:variable name="class" select="'list'" /> 
```

然后在需要的地方使用该变量。这还有一个好处是您可以在不重写所有 CSS 的情况下更改模板名称，或者在不重写 XSLT 的情况下更改类名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T17:16:19.233

XSLT 使用 XML 语法这一事实的好处之一是很容易转换样式表。修改每个命名模板以包含一个保存模板名称的变量非常容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-16T19:28:17.237

@JLRishe 的回答是一个好方法。但是，有一个陷阱。Any`<xsl:param>`必须在any**之前**`<xsl:variable>`声明。

这将不起作用：

```
<xsl:template name="foobarsnafu">
    <xsl:variable name="foo" value="bar">
    <xsl:param name="snafu"/> 
```

但这将：

```
<xsl:template name="foobarsnafu">
    <xsl:param name="snafu"/>
    <xsl:variable name="foo" value="bar"> 
```

例如，如果您希望 your 的默认值是 your`snafu` `<xsl:param>`的值，这可能是一个问题`foo` `<xsl:variable>`。解决方法是使用`<xsl:param>`模板名称的默认值，即：

```
<xsl:template name="foobarsnafu">
    <xsl:param name="template_name" select="foobarsnafu"/> 
```

# regex - Bash (grep) 正则表达式意外执行

> ID：14340113
> 
> 赞同：8
> 
> 时间：2013-01-15T14:41:36.267
> 
> 标签：regex, bash, shell, grep

我有一个文本文件，其中包含格式为`dd/mm/yyyy`（例如 20/12/2012）的日期。

我正在尝试使用`grep`解析日期并在终端中显示它，并且它是成功的，直到我遇到某种情况：

这些是我的测试用例：

*   `grep -E "\d*"`返回 20/12/2012
*   `grep -E "\d*/"`返回 20/12/2012
*   `grep -E "\d*/\d*"`返回 20/12/2012
*   `grep -E "\d*/\d*/"`***什么都不***返回
**   `grep -E "\d+"`也不返回***任何内容****

 *有人可以向我解释为什么我会出现这种意外行为吗？

***编辑***：如果我用`"`（弱引号）代替`'`（强引号），我会得到相同的行为。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T14:49:17.030

[Bash 的扩展正则表达式](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_04_01.html#sect_04_01_03)`\d`无法识别您使用的语法 ( ) 。

改用`grep -P`使用 Perl 正则表达式 (PCRE)。例如：

```
grep -P "\d+/\d+/\d+" input.txt
grep -P "\d{2}/\d{2}/\d{4}" input.txt  # more restrictive 
```

或者，要坚持使用扩展的正则表达式，请`[0-9]`使用`\d`：

```
grep -E "[0-9]+/[0-9]+/[0-9]" input.txt
grep -E "[0-9]{2}/[0-9]{2}/[0-9]{4}" input.txt  # more restrictive 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T14:49:27.773

您也可以使用 -P 而不是 -E 允许 grep 使用 PCRE 语法

```
grep -P "\d+/\d+" file 
```

也可以。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T14:47:22.340

`grep`和`egrep`/`grep -E`不认识`\d`。您的前三个模式起作用的原因是星号使`\d`可选。它实际上是找不到的。

使用`[0-9]`或`[[:digit:]]`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T15:07:58.093

为了帮助解决此类情况，-o 标志可能会有所帮助，因为它仅显示该行的匹配部分。用你原来的表达方式：

`grep -Eo "\d*"`什么都不返回 - 提示 \d 没有按照您的想法进行操作。

`grep -Eo "\d*/"`返回 / （两次） - 确认 \d 不匹配而斜杠匹配。

正如其他人所指出的，-P 标志通过识别“\d”来解决问题，但为了澄清爆炸药丸的答案，您也可以使用 -E，如下所示：

`grep -Eo "[[:digit:]]*/[[:digit:]]*/"`返回 20/12/

编辑：根据@shawn-chin 的评论（谢谢！），--color 可以类似地用于突出显示匹配的行部分，同时仍显示整行：

`grep -E --color "[[:digit:]]*/[[:digit:]]*/"`返回**20/12/** 2012 （不能在这里做颜色，但粗体“20/12/”部分将是彩色的）*

# javascript - JavaScript - “实现定义的对象”

> ID：14340117
> 
> 赞同：2
> 
> 时间：2013-01-15T14:41:40.283
> 
> 标签：javascript

我正在阅读“JavaScript：权威指南，第 6 版”，并在“3.10.3 范围链”部分（第 55 页）中指出 -

> “如果我们将局部变量视为某种 **实现定义对象的属性**，那么还有另一种方式来考虑变量范围。”

有人可以解释“**实现定义的对象**”是什么意思吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:46:18.950

局部变量在内部表示为与词法环境的绑定，如规范所示（[ES5 10.5](http://es5.github.com/#x10.5) - 注意以下引用中的“env”指的是当前作用域的词法环境）：

> *   *对于代码*中的每个*VariableDeclaration*和*VariableDeclarationNoIn d*，按源文本顺序执行
>     
>      **   令*dn*为*d*中的*标识符*。
>         
>         
>     **   让*varAlreadyDeclared*成为调用*env 的*HasBinding 具体方法并传递*dn*作为参数的结果。
>         
>         *   如果*varAlreadyDeclared*为假，则
>         
>         
>         *   调用*env 的*CreateMutableBinding 具体方法，传递*dn*和*configureBindings*作为参数。
>             
>             
>         *   调用*env 的*SetMutableBinding 具体方法，传递*dn*、 undefined 和*strict*作为参数。**

 **由于您无法以编程方式访问范围的词法环境，因此您看不到这些绑定。但这意味着您可以将局部变量视为此不可见对象的属性，就像全局变量成为全局对象（您*可以*访问）的属性一样。

在上面引用的部分的开头很好地总结了这个概念：

> 每个执行上下文都有一个关联的变量环境。在执行上下文中评估的 ECMAScript 代码中声明的变量和函数作为绑定添加到该变量环境的环境记录中。

要更详细地了解该过程，请查看[和](http://es5.github.com/#x10.2.1)方法的[规范。`CreateMutuableBinding``setMutableBinding`](http://es5.github.com/#x10.2.1)

为了回答您的实际问题，在这种情况下，“实现定义的对象”是当前执行上下文的词法环境。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T14:47:43.237

想想一个没有暴露给我们的抽象对象。它由实现定义，并且仅对实现可用——“实现”意味着将运行您的代码的 JavaScript 引擎。

例如，考虑以下函数：

```
function f(a,b) {
    var foo = 5;
    return a + b + foo;
} 
```

在该函数范围内定义的变量和参数可以表示为如下所示的对象：

```
{
    a,
    b,
    foo
} 
```

对象属性的值可以在函数执行期间发生变化。例如，如果您使用 调用函数`f(1,2)`，则一旦函数执行开始，对象将如下所示：

```
{
    a: 1,
    b: 2,
    foo: undefined
} 
```

`foo`分配后`5`，它将如下所示：

```
{
    a: 1,
    b: 2,
    foo: 5
} 
```

考虑这个对象，就好像它是在函数内部声明的。因此，您可以在函数内部访问 , 和 的值`a`，`b`但`foo`不能在函数外部访问。**

# jquery - 过滤jQuery中的对象

> ID：14340121
> 
> 赞同：2
> 
> 时间：2013-01-15T14:41:49.943
> 
> 标签：jquery, object, filter

我有一个我创建的对象，如下所示：

```
$(this).find('li').each(function(){
                var $itm = $(this);
                localproducts.push({
                    'dataid' : $itm.attr('data-id'), 
                    'datapackage' : $itm.attr('data-package'), 
                    'packageid' : ($itm.children('.packageid').text())
            });
        }); 
```

现在我想过滤创建的对象localproducts，例如。例如，我想保存 packageid 等于 3 的项目的所有 dataid。我认为可以使用数组过滤器来完成，但不确定如何。有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:43:34.537

使用`filter`

```
var matching = $(localproducts).filter(function(){  
    return this.packageid == 3;
}); 
```

* * *

使用`each`

```
var dataids = new Array();

$(localproducts).each(function(){  
    if (this.packageid == 3) dataids.push(this.dataid);
}); 
```

* * *

**示例：http: [//jsfiddle.net/hunter/tqTDQ/](http://jsfiddle.net/hunter/tqTDQ/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:49:23.877

您可以尝试使用**jQuery** `grep`实用程序。

这是文档的 URL：

[http://docs.jquery.com/Utilities/jQuery.grep](http://docs.jquery.com/Utilities/jQuery.grep)

在您的情况下，代码将如下所示：

```
var arr = new Array();
arr = jQuery.grep(localproducts, function() {
    return localproducts.packageid == 3;
}); 
```

然后，您可以访问过滤后的信息。它将在数组内部。

# ios - UIControlEventTouchDragExit 在距离 UIButton 100 像素时触发

> ID：14340122
> 
> 赞同：7
> 
> 时间：2013-01-15T14:41:53.087
> 
> 标签：ios, objective-c, cocoa-touch, drag-and-drop, uitouch

目前，`UIControlEventTouchDragExit`只有当我将按钮拖出 100 像素时才会触发。我想自定义此行为并将该范围设置为 25 像素左右，但我对编程比较陌生，从来不需要覆盖/自定义这样的内置方法。

我在这里阅读了其他一些帖子，我需要子类化`UIButton`（或者甚至`UIControl`？），并覆盖`-(BOOL) beginTrackingWithTouch: (UITouch *) touch withEvent: (UIEvent *) event`和相关方法，但我真的不知道从哪里开始这样做。

任何人都可以就我如何实现这一目标提供一些建议吗？非常感激！^_^

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T13:33:17.490

覆盖 continueTrackingWithTouch:withEvent: 像这样在默认装订线内发送 DragExit/DragOutside 事件：

```
- (BOOL)continueTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGFloat boundsExtension = 25.0f;
    CGRect outerBounds = CGRectInset(self.bounds, -1 * boundsExtension, -1 * boundsExtension);

    BOOL touchOutside = !CGRectContainsPoint(outerBounds, [touch locationInView:self]);
    if(touchOutside)
    {
        BOOL previousTouchInside = CGRectContainsPoint(outerBounds, [touch previousLocationInView:self]);
        if(previousTouchInside)
        {
            NSLog(@"Sending UIControlEventTouchDragExit");
            [self sendActionsForControlEvents:UIControlEventTouchDragExit];
        }
        else
        {
            NSLog(@"Sending UIControlEventTouchDragOutside");
            [self sendActionsForControlEvents:UIControlEventTouchDragOutside];
        }
    }
    return [super continueTrackingWithTouch:touch withEvent:event];
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-19T08:17:44.900

我发现接受的答案有两个问题。

1.  注册的动作会被调用两次：
    *   第一次是手指离开控件25像素的时候，这个是overwritten方法中设置的。
    *   第二次在手指离开控件大约 70 像素时调用，这是 UIControl 的默认行为。
2.  第二个问题是从`event`参数 is检索到的位置`(0, 0)`，它没有正确初始化。

我根据这个答案找到了另一种实现此目的的方法，基本思想是在回调中处理事件而不是覆盖该方法。有两个步骤：

### 注册动作：

```
 // to get the touch up event
    [btn addTarget:self action:@selector(btnTouchUp:withEvent:) forControlEvents:UIControlEventTouchUpInside];
    [btn addTarget:self action:@selector(btnTouchUp:withEvent:) forControlEvents:UIControlEventTouchUpOutside];
    // to get the drag event
    [btn addTarget:self action:@selector(btnDragged:withEvent:) forControlEvents:UIControlEventTouchDragInside];
    [btn addTarget:self action:@selector(btnDragged:withEvent:) forControlEvents:UIControlEventTouchDragOutside]; 
```

### 处理事件：

```
- (void)btnTouchUp:(UIButton *)sender withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGFloat boundsExtension = 25.0f;
    CGRect outerBounds = CGRectInset(sender.bounds, -1 * boundsExtension, -1 * boundsExtension);
    BOOL touchOutside = !CGRectContainsPoint(outerBounds, [touch locationInView:sender]);
    if (touchOutside) {
        // UIControlEventTouchUpOutside
    } else {
        // UIControlEventTouchUpInside
    }
}

- (void)btnDragged:(UIButton *)sender withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGFloat boundsExtension = 25.0f;
    CGRect outerBounds = CGRectInset(sender.bounds, -1 * boundsExtension, -1 * boundsExtension);
    BOOL touchOutside = !CGRectContainsPoint(outerBounds, [touch locationInView:sender]);
    if (touchOutside) {
        BOOL previewTouchInside = CGRectContainsPoint(outerBounds, [touch previousLocationInView:sender]);
        if (previewTouchInside) {
            // UIControlEventTouchDragExit
        } else {
            // UIControlEventTouchDragOutside
        }
    } else {
        BOOL previewTouchOutside = !CGRectContainsPoint(outerBounds, [touch previousLocationInView:sender]);
        if (previewTouchOutside) {
            // UIControlEventTouchDragEnter
        } else {
            // UIControlEventTouchDragInside
        }
    }    
} 
```

现在所有六个事件都可以通过像素的边界扩展来处理`25`，当然您可以根据需要将此值设置为其他值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T21:03:02.350

根据我[在这里读到的](https://stackoverflow.com/questions/2723786/uicontroleventtouchdragexit-only-fires-100-pixels-out)

Apple 将 100 像素用于说明使用手指的不准确性。您可以使用以下方法覆盖这些方法：

*   `-(BOOL)beginTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event`
*   `-(BOOL)continueTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event`

和其他方法相关的方法。[苹果文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html)。

# java - Java堆的大NewSize使进程长时间无响应

> ID：14340123
> 
> 赞同：7
> 
> 时间：2013-01-15T14:41:53.670
> 
> 标签：java, performance, garbage-collection

我有 java 应用程序，它可以在特定的内存使用情况下完成一些工作。我注意到，当我为年轻代设置了近 80% 的堆设置时，我的应用程序运行速度比默认的 1:2 设置快得多。特别是，我正在启动 jvm：

`java -XX:NewSize=10G -XX:+UseParallelOldGC -server -Xmx12G -Xms12G`

服务器至少有 14 Gb 的可用物理内存，所以我认为对于 java 堆和“其他”空间应该足够了。

现在事情是这样发生的：

```
25.289: [GC [PSYoungGen: 7872317K->1058813K(9175040K)] 7872533K->1059029K(11272192K), 0.1876420 secs] [Times: user=1.92 sys=1.01, real=0.18 secs]
28.918: [GC [PSYoungGen: 8923133K->1091124K(9175040K)] 8923349K->1091340K(11272192K), 0.2206940 secs] [Times: user=1.92 sys=1.70, real=0.22 secs]
32.946: [GC [PSYoungGen: 8955444K->1060567K(9175040K)] 8955660K->1060783K(11272192K), 0.1804050 secs] [Times: user=2.86 sys=0.01, real=0.18 secs]
37.166: [GC [PSYoungGen: 8924887K->1080085K(8329344K)] 8925103K->1080301K(10426496K), 0.1891370 secs] [Times: user=3.08 sys=0.01, real=0.19 secs]
41.326: [GC [PSYoungGen: 8098709K->1088209K(8106880K)] 8098925K->1088425K(10204032K), 0.2284920 secs] [Times: user=3.49 sys=0.04, real=0.23 secs]
45.779: [GC [PSYoungGen: 8106833K->59784K(8672768K)] 8107049K->1039790K(10769920K), 0.2195770 secs] [Times: user=2.02 sys=1.91, real=0.22 secs]
49.963: [GC [PSYoungGen: 6953352K->75043K(8689664K)] 7933358K->1062837K(10786816K), 0.0384440 secs] [Times: user=0.63 sys=0.01, real=0.04 secs]
54.171: [GC [PSYoungGen: 6968611K->140387K(8737984K)] 7956405K->1129497K(10835136K), 0.0715690 secs] [Times: user=1.12 sys=0.00, real=0.07 secs]
58.455: [GC [PSYoungGen: 7093923K->194024K(8701312K)] 8083033K->1205300K(10798464K), 0.0952730 secs] [Times: user=1.66 sys=0.02, real=0.10 secs]
62.825: [GC [PSYoungGen: 7147560K->122912K(8840256K)] 8158836K->1298466K(10937408K), 0.1671770 secs] [Times: user=2.89 sys=0.10, real=0.16 secs]
67.302: [GC [PSYoungGen: 7270304K->117888K(8792896K)] 8445858K->1377169K(10890048K), 0.1156200 secs] [Times: user=1.98 sys=0.05, real=0.12 secs]
71.785: [GC [PSYoungGen: 7265280K->119002K(8950720K)] 8524561K->1464556K(11047872K), 0.1152940 secs] [Times: user=1.97 sys=0.09, real=0.11 secs]
76.448: [GC [PSYoungGen: 7477018K->206455K(8893056K)] 8822572K->1642652K(10990208K), 0.1607870 secs] [Times: user=2.63 sys=0.06, real=0.16 secs]
81.051: [GC [PSYoungGen: 7564471K->114350K(9084608K)] 9000668K->1649307K(11181760K), 0.1145730 secs] [Times: user=1.89 sys=0.16, real=0.12 secs]
86.020: [GC [PSYoungGen: 7739630K->125895K(9026432K)] 9274587K->1743248K(11123584K), 0.1125030 secs] [Times: user=1.95 sys=0.06, real=0.11 secs]
91.007: [GC [PSYoungGen: 7751175K->202320K(9221952K)] 9368528K->1905769K(11319104K), 0.1523180 secs] [Times: user=2.58 sys=0.06, real=0.15 secs]
95.817: [GC [PSYoungGen: 8085136K->327488K(9146624K)] 9788585K->2203753K(11243776K), 0.2542190 secs] [Times: user=4.44 sys=0.10, real=0.25 secs]
96.071: [Full GC [PSYoungGen: 327488K->0K(9146624K)] [ParOldGen: 1876265K->1032314K(2097152K)] 2203753K->1032314K(11243776K) [PSPermGen: 27528K->21277K(48128K)], 1.4351920 secs] [Times: user=5.12 sys=0.36, real=1.44 secs] 
```

如您所见，一切都很好，Full GC 工作正常。但是接下来发生的 GC(not Full) 会显着增加进程的内存使用量，并且服务器开始使用交换。

```
102.741: [GC-- [PSYoungGen: 7882816K->7882816K(9146624K)] 8915130K->9979962K(11243776K), 133.4433280 secs] [Times: user=69.73 sys=602.83, real=133.46 secs]
236.191: [Full GC [PSYoungGen: 7882816K->0K(9146624K)] [ParOldGen: 2097146K->1069237K(2097152K)] 9979962K->1069237K(11243776K) [PSPermGen: 21277K->21251K(48192K)], 6.9285350 secs] [Times: user=12.75 sys=0.23, real=6.93 secs] 
```

问题是——为什么？据我了解，full gc 是 gc 处理中最痛苦的一点。那么为什么应用程序在完整 gc 成功完成后停止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:23:59.743

我已经使用一个应用程序工作了几年，该应用程序需要类似于您的堆大小和内存流失（20 GB 堆，1 GB+/秒流失）。正如@Peter Lawrey 所说，如果您可以减少总内存消耗或流失率，那么您就会领先（仅供参考 - 我在 YourKit 分析器上运气不错。与公司没有任何关联，但我的经验是很好。YMMV。）

但是，如果您实际上不能减少堆使用或流失，我建议您考虑更多的 GC 调整。你显然做了一些；以下是一些对我们有用的事情：

*   减少新生代大小（您当前分配 10 GB，并且每隔几秒钟收集一次几乎全部。分配 1-2 GB 并更频繁地收集可能会更好。这将允许您将总堆大小减少为好吧，并且可能避免交换。

`-XX:+PrintGCDetails -XX:+PrintGCDateStamps`- 有时在 GC 日志中有真实日期会很好）

`-XX:+UseConcMarkSweepGC`- 并发的老一代 GC 消耗更多的 CPU，但提供更短的暂停。对于我们的应用程序，这是我们的偏好，听起来它可能也是你的。

您还可`-XX:ParallelGCThreads=<threads>`以为您的硬件设置一些合理的值（我们在 12 核机器上使用 6，但我不知道我们是否已对其进行了优化调整）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:45:42.427

鉴于系统时间非常长（远高于用户时间），这表明操作系统中正在发生某些事情。您说您有足够的内存，但是即使将 JVM 的一小部分交换到磁盘，它也会杀死 GC 时间。

我建议*减少*堆的总大小，以确保您有更多的空闲内存用于操作系统/磁盘缓存/其他程序。

为了进一步改进您的应用程序，我将使用内存分析器（很可能您需要使用商业，评估许可证就可以了）您似乎每秒产生 1.5 GB 的垃圾，这是一个令人难以置信的数量。如果您可以将其减少到每秒 100 MB，它应该会显着提高您的性能（并减少延迟）

顺便说一句：`-server`应该是任何 64 位机器上的默认值。

# mongodb - UpdateFlags.Upsert 和 UpdateFlags.Multi 在 Update() 中一起使用

> ID：14340126
> 
> 赞同：0
> 
> 时间：2013-01-15T14:42:05.073
> 
> 标签：mongodb, mongodb-.net-driver, upsert

> **可能重复：**
> [如何使用 C# 驱动程序在 MongoDB 中更新和插入多个文档](https://stackoverflow.com/questions/7934768/how-to-update-and-upsert-mulitple-documents-in-mongodb-using-c-sharp-drivers)

这可能是一个愚蠢的问题。实际上我对语法感到困惑。来自 shell 的更新具有以下格式：

`db.collection.update(query,update,options)`

其中 options 用于 upsert 和 multi 标志。我可以在 shell 中写这样的东西并且它可以工作：

`db.users.update({"Gender":"female"},{$set:{"Hubby_name":1}},false,true)})`

意味着找到所有女性（因为 multi 是真的）并在他们的文档中添加键“Hubby name”。如果没有找到女性，不要做任何事情（因为 upsert 是假的）。

现在如何在 C# 代码中指定这个（两个标志）？我只能在 Update 方法中添加一个标志。智能提示的下一个参数是我不感兴趣的安全模式。另外，当我根本不提供任何选项时，默认行为是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:43:27.737

UpdateFlags 是 C# 驱动程序中的一个枚举，可让您同时指定两者。就像任何其他标志枚举一样，您可以通过位“或”来执行此操作。

```
var flags = UpdateFlags.Upsert | UpdateFlags.Multi; 
```

您可以在此处阅读有关枚举的文档 (http://msdn.microsoft.com/en-us/library/cc138362.aspx)，特别注意枚举类型作为位标志的部分

# objective-c - Objective-C：理解属性

> ID：14340128
> 
> 赞同：0
> 
> 时间：2013-01-15T14:42:14.127
> 
> 标签：objective-c

所以这就是我对Objective-C中属性的了解。如果这些不是事实，请纠正我。

1.  声明属性时，您正在声明实例变量的 setter/getter
2.  如果你想定义 setter 和 getter，你需要合成它们
3.  如果您进行综合，则会为您定义实例变量。最佳做法是重命名 iVar，使 getter 和 iVar 的名称不同。所以你通常会这样做：@synthesize myVar = _myVar

我所有关于属性的知识都与实例变量相结合。我最近看了一些视频，说属性可以用于除了 setter/getter 之外的其他实例方法。

这是真的？如果是这样，您将如何以及为什么以这种方式使用财产？例如，我正在观看一个关于协议的斯坦福 cs193p 视频，它说你可以在协议中拥有一个原型。我可能误解了。

无论如何感谢那些回复的人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:53:53.773

> 声明属性时，您正在声明实例变量的 setter/getter

不，您正在声明一个 getter 并且可能是一个属性的 setter。时期。声明一个属性本身并不意味着一个实例变量。有很多方法可以实现属性。实例变量恰好是一种常见且流行的方式，但非 ivar 属性非常常见。

> 如果你想定义 setter 和 getter，你需要合成它们

~~不。~~（正如塞尔吉奥指出的那样，我最初混淆了“定义”和“声明”。）几乎。该`@property`行本身声明了 setter 和 getter。如果您想为您*实现*setter 和 getter ，这称为“合成”，但您不再需要手动执行此操作。编译器将为您声明但未实现的任何属性自动创建 getter 和 setter（除非您明确要求它不要使用`@dynamic`）。

> 如果您进行综合，则会为您定义实例变量。最佳做法是重命名 iVar，使 getter 和 iVar 的名称不同。所以你通常会这样做：@synthesize myVar = _myVar

几乎。几个月前确实如此，但您不再需要实际这样做`@synthesize`。它现在将由编译器自动为您完成。

这个标题：

```
@interface MyObject : NSObject
@property (nonatomic, readwrite, strong) NSString *something;
@end 
```

与此标头*几乎*相同：

```
@interface MyObject : NSObject
- (NSString *)something;
- (void)setSomething:(NSString *)something;
@end 
```

这两者之间有一些非常小的差异，一些与运行时有关，一些与编译器有关，但如果你只是假装它们是相同的，那就更清楚了。

在这两种情况下，您所做的只是*声明*一些方法。您没有声明它们是如何实现的。你不是在声明 ivars。你只是在声明方法。您现在可以自由地以您喜欢的任何方式实现这些方法。如果您愿意，您可以通过让编译器为您合成一些默认实现来实现它们。如果你愿意，你可以手动实现它们。如果你愿意，你可以做一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:48:47.027

自 Xcode 4.4 起，属性默认合成。所以你只需要声明属性（myVar）。还有一个可用的 _myVar，您可以使用它来代替访问 self.myVar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:16:40.783

使用属性作为无参数方法是将它们扭曲成它们不是的东西。

# java - 如何在liferay中保存属性文件

> ID：14340129
> 
> 赞同：0
> 
> 时间：2013-01-15T14:42:19.410
> 
> 标签：java, liferay

我需要以编程方式进行的属性更改以保持服务器重新启动、重新部署等。基本上，我需要在进行更改时修改属性文件。这甚至可能吗？目前，我的属性正常工作，但属性文件夹中的值永远不会改变。

```
 String realPath = getPortletContext().getRealPath("/");

        FileInputStream in = new  FileInputStream(realPath+"json.properties");

        Properties p = new Properties();
        p.load(in);

        System.out.println(p.getProperty("json"));

              in.close();
        p.setProperty("json", "test");
        System.out.println(p.getProperty("json"));

        FileOutputStream out = new FileOutputStream(realPath+"json.properties");
        p.store(out, "test");
        in.close();

       out.close(); 

       System.out.println(com.liferay.util.portlet.PortletProps.get("json"));
       com.liferay.util.portlet.PortletProps.set("json", "change");
       com.liferay.util.portlet.PortletProps.set("new", "change");
       System.out.println(com.liferay.util.portlet.PortletProps.get("new")); 
```

门户网站属性：

```
json=help
new=new1 
```

json.properties

```
json=blank 
```

运行代码时的输出：

空白测试帮助更改

正如您在上面看到的，我尝试使用常规 java 属性并尝试使用 liferay 属性。我需要基本上需要获取一些 json，对其进行编辑，然后将其保存以备后用。我需要更改持续到再次编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:26:49.870

我以前的所有代码都是垃圾，我解决它的方式是使用

```
 PortletPreferences portletPreference = actionRequest.getPreferences();

        portletPreference.setValue("help", "me");
        portletPreference.store(); 
```

Note: I tried this before with no luck and the problem was my imports. make sure that you use javax.portlet.PortletPreferences; and not the liferay portletpreferences class.

# android - Android - 在拨出电话的情况下，会自动抛出 OFF_HOOK 状态

> ID：14340130
> 
> 赞同：1
> 
> 时间：2013-01-15T14:42:24.223
> 
> 标签：android, call, state, phone-state-listener

在拨出电话的情况下，会自动抛出摘机状态嗨，伙计们，首先我为我的英语道歉。

好吧，在我的应用程序中，我正在监视每个呼叫，之前和之后。但是就在通话开始之后，所以我与“响铃”状态无关，但是我的应用程序正在触发一个假的“摘机”状态。当我拨打电话（拨出电话）时，我的应用程序在振铃后立即设置摘机状态。有了这个，我正在监视一个我不应该的呼叫，因为该呼叫无法应答。

有人已经有这个问题了吗？

AndroidManifest.xml

```
 <receiver
        android:name=".CallStateBroadcastReceiver">
        <intent-filter>
          <action android:name="android.intent.action.PHONE_STATE" />
        </intent-filter>
    </receiver>

    <receiver
        android:name=".OutgoingCallBroadcastReceiver">
        <intent-filter>
          <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
        </intent-filter>
    </receiver> 
```

CallStateBroadcastReceiver：

```
 CallStatePhoneStateListener phoneListener = new CallStatePhoneStateListener(context, intent);
    TelephonyManager telephony = (TelephonyManager) context.getSystemService(
            Context.TELEPHONY_SERVICE);

        telephony.listen(phoneListener, PhoneStateListener.LISTEN_CALL_STATE); 
```

CallStatePhoneStateListener：

```
@Override
public void onCallStateChanged(int state, String incomingNumber) {

    switch (state) {
        case TelephonyManager.CALL_STATE_IDLE:

            // do something
            break;

        case TelephonyManager.CALL_STATE_OFFHOOK:

            // do something
            break;

        case TelephonyManager.CALL_STATE_RINGING:

            // do something
            break;
} 
```

OutgoingCallBroadcastReceiver:

```
@Override
public void onReceive(Context context, Intent intent) {
    Bundle bundle = intent.getExtras();
    if (bundle == null)
        return;

    String number = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
    // just save the number
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-30T05:37:26.090

> 我希望这对你有用。

```
public void onCallStateChanged(int state, String incomingNumber) {
    super.onCallStateChanged(state, incomingNumber);

    Log.d("main", "incoming call receiver.");
    PowerManager pm = (PowerManager) c
            .getSystemService(Context.POWER_SERVICE);
    boolean isScreenOn = pm.isScreenOn();

    switch (state) {
    case TelephonyManager.CALL_STATE_IDLE:
        Log.v("idle state", "CALL_STATE_IDLE");
        // CALL_STATE_IDLE;

        if (ring == true && callReceived == false && CheckMissCall.isReject==true) {

            Log.v("missed call", "Missed call from : " + incomingNumber);
            if(CheckMissCall.isShown)
            {
                c.stopService(new Intent(c, Unlock_hud.class));

            }

            flag = true;
            if (prefs.getBoolean("main_state", true) )
            {
                Intent inter = new Intent(c, MissCall.class);
                inter.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                inter.putExtra("CellNumber", incomingNumber);
                c.startActivity(inter);
            }

        }

        break;
    case TelephonyManager.CALL_STATE_OFFHOOK:
        // CALL_STATE_OFFHOOK;
        callReceived = true;
        Log.v("call received", "CALL_STATE_OFFHOOK  " + incomingNumber);        

        break;
    case TelephonyManager.CALL_STATE_RINGING:
        ring = true;
        // CALL_STATE_RINGING
        Log.v("call ringing", "CALL_STATE_RINGING  " + incomingNumber);
        Log.d("flags", "flags: " + flag);
        if (flag) {

            //cut = true;
            //flag = false;
            CheckMissCall call = new CheckMissCall(c);
            call.setName(incomingNumber);
            call.setNumber4Sms(incomingNumber);
            call.setContactPhoto();

            Log.d("main", "state ringing");
            prefs = PreferenceManager.getDefaultSharedPreferences(c);

            if (!prefs.getBoolean("main_state", false)) {

                return;
            }       

            if (CheckMissCall.isRunning) {

                return;
            }
            else {
                Log.d("main", "EEEEEEEEEEEEEEEE:  Unlock hud");
                Intent in = new Intent(c, Unlock_hud.class);
                in.setFlags(Intent.FLAG_ACTIVITY_PREVIOUS_IS_TOP);
                c.startService(in);

                // c.stopService(new Intent(c, Unlock_hud.class));
            }
        }
        break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:31:49.567

取一个静态字符串，例如：- prev_state 并在每个案例示例中将电话的状态存储在该字符串中，如果您想知道拨出电话是如何断开的，那么应该这样做，

```
 if(state==TelephonyManager.CALL_STATE_IDLE)
{ Log.d(TAG, "CALL_STATE_IDLE==>"+incoming_nr);
                      {
                   if((prev_state==TelephonyManager.CALL_STATE_OFFHOOK))
                             {  
                        prev_state=state;  
                       // do something when the Call  is ended 
                              }
                       }
} 
```

希望能帮助到你 ：）

# c# - 处理 URL 并获取数据

> ID：14340136
> 
> 赞同：7
> 
> 时间：2013-01-15T14:42:50.017
> 
> 标签：c#, .net, vb.net, winforms

我有一个`URL`返回数据数组的。例如，如果我有 URL `http://test.com?id=1`，它将返回诸如此类的值`3,5,6,7`……</p>

有什么方法可以处理这个 URL 并获取返回的值，而无需转到浏览器（在应用程序中处理 url）？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-15T14:47:41.617

真的很容易：

```
using System.Net; 
```

...

```
var response = new WebClient().DownloadString("http://test.com?id=1"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:44:57.580

```
string urlAddress = "YOUR URL";
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(urlAddress);
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
if (response.StatusCode == HttpStatusCode.OK)
{
  Stream receiveStream = response.GetResponseStream();
  StreamReader readStream = null;
  if (response.CharacterSet == null)
    readStream = new StreamReader(receiveStream);
  else
    readStream = new StreamReader(receiveStream, Encoding.GetEncoding(response.CharacterSet));
  string data = readStream.ReadToEnd();
  response.Close();
  readStream.Close();
} 
```

这应该可以解决问题。

它返回主页的 html 源代码并将其填充到`string data`.

您现在可以使用该字符串。

来源： http: [//www.codeproject.com/Questions/204778/Get-HTML-code-from-a-website-C](http://www.codeproject.com/Questions/204778/Get-HTML-code-from-a-website-C)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T14:46:16.970

这是我经常用于类似目的的一个简单函数（VB.NET）：

```
Public Shared Function GetWebData(url As String) As String
    Try
        Dim request As WebRequest = WebRequest.Create(url)
        Dim response As HttpWebResponse = CType(request.GetResponse(), HttpWebResponse)
        Dim dataStream As Stream = response.GetResponseStream()
        Dim readStream As StreamReader = New StreamReader(dataStream)
        Dim data = readStream.ReadToEnd()
        readStream.Close()
        dataStream.Close()
        response.Close()
        Return data
    Catch ex As Exception
        Return ""
    End Try
End Function 
```

要使用它，请将 URL 传递给它，它将返回 URL 的内容。

# javascript - 使用 javascript 在下拉菜单中创建和读取 cookie

> ID：14340142
> 
> 赞同：0
> 
> 时间：2013-01-15T14:43:06.207
> 
> 标签：javascript

我正在使用这个 HTML 代码：

```
<head>

<link href="defualt.css" rel="stylesheet" type="text/css" />
<link href="theme1.css" title="theme1" rel="alternate stylesheet" type="text/css" />
<link href="theme2.css" title="theme2" rel="alternate stylesheet" type="text/css" />
<link href="theme3.css" title="theme3" rel="alternate stylesheet" type="text/css"  />

<script type="text/javascript" src="javascript.js"></script>

</head>
<body>

<form>
    <select id="myList" >
        <option value="default">Default</option>
        <option value="theme1">Theme 1</option>
        <option value="theme2">Theme 2</option>  
        <option value="theme3">Theme 3</option>
    </select>
</form>

</body> 
```

这是更改样式表的一种形式。这是我正在使用的 javascript：

```
function setActiveStyleSheet(title) {
  var i, a, main;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title")) {
      a.disabled = true;
      if(a.getAttribute("title") == title) a.disabled = false;
    }
  } 
  createCookie("style", title, 7);
}

function getActiveStyleSheet() {
  var i, a;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title") && !a.disabled) return a.getAttribute("title");
  }
  return null;
}

function getPreferredStyleSheet() {
  var i, a;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1
       && a.getAttribute("rel").indexOf("alt") == -1
       && a.getAttribute("title")
       ) return a.getAttribute("title");
  }
  return null;
}

function createCookie(name,value,days) {
  if (days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));
    var expires = "; expires="+date.toGMTString();
  }
  else expires = "";
  document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
  var nameEQ = name + "=";
  var ca = document.cookie.split(';');
  for(var i=0;i < ca.length;i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
  }
  return null;
}

window.onload = function(e) {
  var cookie = readCookie("style");
  var title = cookie ? cookie : getPreferredStyleSheet();
  setActiveStyleSheet(title);
}

var cookie = readCookie("style");
var title = cookie ? cookie : getPreferredStyleSheet();
setActiveStyleSheet(title);

function initate()
{

document.getElementById("myList").onchange = function() {
   setActiveStyleSheet(this.value);
   return false
};

}

window.onload = initate; 
```

样式表的更改效果很好，但我希望在重新加载页面后保留菜单中选择的选项。这在 Firefox 中可以正常工作，但在 Chrome 中却不行。我对 javascripts 很陌生，而且我自己还没有编写所有这些代码，所以我并不完全理解所有这些代码。是否可以将所选的菜单选项保存在同一个 cookie 中，还是创建一个新的更好/更容易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:50:13.063

如果您正在重新加载页面，则无法在页面（HTML、Javascript）本身内保持下拉选择的状态。我建议您使用 cookie 来存储当前选择，在页面加载时读取值，并相应地在下拉菜单中设置选项。

cookie JS，见：[http ://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

```
function initate() {
    window.selectBox = document.getElementById("myList");
    var cookie = readCookie("style");
    var title = cookie ? cookie : getPreferredStyleSheet();
    setActiveStyleSheet(title);
    getTheme();
    selectBox.onchange = function () {
        setActiveStyleSheet(this.value);
        setTheme();
    };
}
window.onload = initate;

function setActiveStyleSheet(title) {
    var i, a, main;
    for (i = 0; (a = document.getElementsByTagName("link")[i]) ; i++) {
        if (a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title")) {
            a.disabled = true;
            if (a.getAttribute("title") == title) a.disabled = false;
        }
    }
    createCookie("style", title, 7);
}

function getActiveStyleSheet() {
    var i, a;
    for (i = 0; (a = document.getElementsByTagName("link")[i]) ; i++) {
        if (a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title") && !a.disabled) return a.getAttribute("title");
    }
}

function getPreferredStyleSheet() {
    var i, a;
    for (i = 0; (a = document.getElementsByTagName("link")[i]) ; i++) {
        if (a.getAttribute("rel").indexOf("style") != -1
           && a.getAttribute("rel").indexOf("alt") == -1
           && a.getAttribute("title")
           ) return a.getAttribute("title");
    }
}

function getTheme() {
    var storedThemeVal = readCookie('selectedTheme');
    if (storedThemeVal != null && storedThemeVal != "") {
        for (var i = 0; i < selectBox.options.length; i++) {
            if (selectBox.options[i].value == storedThemeVal) {
                selectBox.selectedIndex = i;
            }
        }
    }
}

function setTheme() {
    var selectedThemeVal = selectBox.options[selectBox.selectedIndex].value;
    createCookie('selectedTheme', selectedThemeVal);
}

function createCookie(name, value, days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        var expires = "; expires=" + date.toGMTString();
    }
    else expires = "";
    document.cookie = name + "=" + value + expires + "; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
} 
```

请注意，Chrome 默认不支持本地 cookie（file:// 协议）。要么在服务器环境中进行测试，要么通过添加`--enable-file-cookies`到 Chrome 的快捷方式来启用文件 cookie（因此，如果您有快捷方式，请右键单击它，单击属性并编辑`Target`以`--enable-file-cookies`在最后包含引号后包含）。

或者，您也可以修改 URL（用户查询字符串参数）以存储/读取当前选择（类似于上面）。但是，如果用户离开该站点并返回该站点，这当然会丢失。

[使用 JavaScript 向 URL 添加参数](https://stackoverflow.com/questions/486896/adding-a-parameter-to-the-url-with-javascript)

# php - 加入三个表

> ID：14340143
> 
> 赞同：0
> 
> 时间：2013-01-15T14:43:07.410
> 
> 标签：php, mysql, select, join

我有以下表格：

```
items id, principaluri, title
principals id, uri, name
members principal_id, member_id 
```

items principaluri 是对 principals uri 字段的引用。members 表定义主体之间的关系，意味着主体的成员可以访问主体 ID 中的项目。选择如何获取主体的所有项目？

为了获得会员资格，我做

```
SELECT p.* 
FROM principals p
LEFT JOIN members m ON m.principal_id = p.id
WHERE p.id = m.principal_id and p.uri = 'myuri' 
```

但现在我需要从列表中获取所有项目。

- - 更新 - -

在主体表中，我也有类似的记录

```
20, 'principals/admin', 'main account'
21, 'principals/admin/read', 'read access'
22, 'principals/admin/write', 'write access'
30, 'principals/test', 'main account'
31, 'principals/test/read', 'read access'
32, 'principals/test/write', 'write access' 
```

成员表如下所示：

```
21,30
22,30 
```

这意味着用户 test 对 admin 用户的项目具有读写权限。

但在项目表中，我有如下条目：

```
100, 'principals/admin', 'Foo'
101, 'principals/admin', 'Bar' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:36:06.277

这使用嵌套查询，但它似乎完成了这项工作：

```
SELECT i.*, mainp.uri mainuri, mp.memberuri, mp.linkuri access
FROM items i
LEFT OUTER JOIN principals mainp
   ON mainp.uri = i.principaluri
LEFT OUTER JOIN 
  (SELECT memberp.uri memberuri, linkp.uri linkuri
     FROM principals memberp
      INNER JOIN members m on memberp.id = m.member_id
      INNER JOIN principals linkp on m.principal_id = linkp.id) as mp
  ON mp.linkuri LIKE CONCAT(i.principaluri, '%')
WHERE mainp.uri = 'principals/test' OR mp.memberuri = 'principals/test' 
```

小提琴：[http ://www.sqlfiddle.com/#!2/7acc8/4](http://www.sqlfiddle.com/#!2/7acc8/4)

# java - 如何检查空字符串

> ID：14340145
> 
> 赞同：0
> 
> 时间：2013-01-15T14:43:20.313
> 
> 标签：java, string, error-handling

如果变量包含空字符串，我正在尝试为变量分配默认值。我使用了以下代码，但它们不起作用：

```
if (d.lat.trim().isEmpty())
   latt = 9.0819990;
else {
   latt = Double.valueOf(d.lat.trim()).doubleValue();
} 
```

**上面的代码导致错误：**

```
cannot find symbol
symbol  : method isEmpty()
location: class java.lang.String 
```

然后我用

```
if (" ".equals(d.lat.trim()))
   latt = 9.0819990;
else {
   latt = Double.valueOf(d.lat.trim()).doubleValue();
} 
```

上面的代码跳转该`if`部分并尝试将空字符串转换为双精度，从而引发有关空字符串的错误。

所以，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:44:56.957

空字符串是`""`，不是`" "`（注意引号之间没有空格）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T14:48:06.013

NPE 是正确的。
但我可以推荐 Apache 吗`StringUtils` ？
[http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#isBlank(java.lang.String](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#isBlank(java.lang.String) )

检查字符串是否为空格、空 ("") 或 null。

```
 StringUtils.isBlank(null)      = true
 StringUtils.isBlank("")        = true
 StringUtils.isBlank(" ")       = true
 StringUtils.isBlank("bob")     = false
 StringUtils.isBlank("  bob  ") = false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T14:45:03.583

第一个块对我来说看起来不错，但您可能正在使用 Java5 进行编译，它还没有该`String.isEmpty()`方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T14:46:31.053

如果你使用`String.length() == 0`代替`String.isEmpty()`呢？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T15:02:12.717

Apache StringUtils 是解决您正在实施的验证问题的好方法。尽管如此，您无法使用 .isEmpty 方法的错误似乎很奇怪，您使用的是什么版本的JDK？尝试使用最新版本（JDK 7）或至少使用 JDK 6 更改类路径中的 JDK 版本。

还要记住空字符串由“”表示，只是引号没有任何空格。看来您验证的方式没问题。你可以试试这样的东西。

```
if (d.lat.trim().isEmpty() || d.lat.length == 0)
   latt = 9.0819990;
else {
   latt = Double.valueOf(d.lat.trim()).doubleValue();
   // or as mentioned before: latt = Double.parseDouble(d.lat.trim());
} 
```

# java - 如何在大量多线程环境中异步登录？

> ID：14340146
> 
> 赞同：1
> 
> 时间：2013-01-15T14:43:26.517
> 
> 标签：java, multithreading, logging, asynchronous, locking

我正在尝试在 linux 平台上的 java 中的大量多线程环境中异步记录。什么是合适的数据结构（无锁）来引入低线程争用？我需要记录 GB 的消息。我需要以异步/无锁方式执行此操作，因此我不会破坏主要逻辑（调用记录器 API 的代码）的性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:09:37.563

Logback 有一个可能满足您需求的 AsyncAppender。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:10:35.153

我会使用[Java Chronicle](https://github.com/peter-lawrey/Java-Chronicle)，主要是因为我编写了它，但我建议在这里使用它，因为您可以使用最少的操作系统调用编写无锁和无垃圾日志记录。这需要每个线程一个日志，但我假设您已经将这些保持在最低限度。

我已经使用这个库从两个线程中写入 1 GB/秒。如果日志记录对您来说是一个瓶颈，您可能会发现拥有更多线程并没有您想象的那么大。

顺便说一句：您让我了解了如何从多个线程/进程更新日志，但实施和测试需要一段时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T14:52:34.980

最简单的方法是写入多个文件 - 每个线程一个。

确保将时间戳放在每条记录的开头，这样更容易将它们合并到单个日志文件中。

示例 unix 命令：

```
cat *.log | sort | less 
```

但是为了获得更好/更有用的答案，您确实需要通过添加更多细节来澄清您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-12T14:50:47.387

避免队列争用是*不可能*的，因为您的日志线程很可能会比您的写入器（磁盘 i/o）线程可以跟上的速度更快，但是通过一些智能等待策略和线程固定，您可以最大限度地减少延迟并最大限度地提高吞吐量。

看看由 Coral Blocks（我隶属于它）开发的[CoralLog ，它使用无](http://www.coralblocks.com/index.php/category/corallog/)[锁队列](http://www.coralblocks.com/index.php/category/coralqueue/)，平均可以在 52 纳秒内记录一条 64 字节的消息。它每秒能够写入超过 500 万条消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T09:00:26.067

为了减少争用，您可以首先将日志消息放在每个线程专用的缓冲区中。当缓冲区已满时，将其放入由单独的日志线程处理的队列中，然后合并来自不同线程的消息并将它们写入文件。请注意，在任何情况下都需要单独的线程，以免在将下一个缓冲区写入磁盘时减慢工作线程。

# meteor - 发布没有正确更新？

> ID：14340148
> 
> 赞同：2
> 
> 时间：2013-01-15T14:43:30.437
> 
> 标签：meteor

我无法`Meteor.publish`响应不断变化的表单字段进行更新。对发布的第一次调用似乎坚持，所以查询在该子集中运行，直到重新加载页面。

我遵循了[这篇文章](https://stackoverflow.com/questions/12223866/meteor-publish-subscribe-strategies-for-unique-client-side-collections)中的方法，但没有任何运气。

非常感谢任何帮助。

在库中：

```
SearchResults = new Meteor.Collection("Animals");

function getSearchResults(query) {
  re = new RegExp(query, "i");
  return SearchResults.find({$and: [ {is_active: true}, {id_species: {$regex: re}} ] }, {limit: 10});
} 
```

在客户端：

```
Session.set('query', null);

Template.searchQuery.events({
  'keyup .query' : function (event, template) {
    query = template.find('.query').value
    Session.set("query", query);
  }
});

Meteor.autosubscribe(function() {
  if (Session.get("query")) {
    Meteor.subscribe("search_results", Session.get("query"));
  }
});

Template.searchResults.results = function () {
  return getSearchResults(Session.get("query"));
} 
```

在服务器上：

```
Meteor.publish("search_results", getSearchResults); 
```

模板：搜索动物

```
<body>
  {{> searchQuery}}

  {{> searchResults}}
</body>

<template name="searchQuery">
  <form>
  <label>Search</label>
  <input type="text" class="query" />
</form>
</template>

<template name="searchResults">
  {{#each results}}
  <div>
    {{_id}}
  </div>
  {{/each}}
</template> 
```

# 更新[错误]

显然，问题在于我正在使用的集合是（正确）在 Meteor 之外生成的，但*Meteor 不能正确支持 Mongo 的 ObjectIds。*[此处](https://github.com/meteor/meteor/issues/61)的上下文和[相关的 Stackoverflow 问题](https://stackoverflow.com/questions/14028941/meteor-wont-update-data-in-mongodb)。

此处显示的转换代码，由[antoviaque](https://github.com/antoviaque)提供：

```
db.nodes.find({}).forEach(function(el){
    db.nodes.remove({_id:el._id}); 
    el._id = el._id.toString(); 
    db.nodes.insert(el); 
}); 
```

# 更新[右]

事实证明，这是`RegExp`/的问题`$regex`。[这个线程](https://groups.google.com/forum/?fromgroups=#!topic/meteor-talk/ecNlAr4HubY)解释。代替：

```
function getSearchResults(query) {
  re = new RegExp(query, "i");
  return SearchResults.find({$and: [ {is_active: true}, {id_species: {$regex: re}} ] }, {limit: 10});
} 
```

目前，需要这样做：

```
function getSearchResults(query) {
  // Assumes query is regex without delimiters e.g., 'rot'
  // will match 2nd & 4th rows in Tim's sample data below
  return SearchResults.find({$and: [ {is_active: true}, {id_species: {$regex: query, $options: 'i'}} ] }, {limit: 10});
} 
```

那很有趣。

PS -- [ddp-pre1 分支](https://github.com/meteor/meteor/tree/ddp-pre1)有一些 ObjectId 功能（`SearchResults = new Meteor.Collection("Animals", {idGeneration: "MONGO"});`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:35:06.993

这是我的工作示例：

**更新**给出的原始 javascript 是正确的。正如评论中指出的那样，问题原来是[流星还不支持 ObjectIds](https://stackoverflow.com/questions/11979403/meteor-collection-update-with-traditional-id)。

HTML：

```
<body>
  {{> searchQuery }}
  {{> searchResults}}
</body>

<template name="searchQuery">
  <form>
  <label>Search</label>
  <input type="text" class="query" />
</form>
</template>

<template name="searchResults">
  {{#each results}}
  <div>
     {{id_species}} | {{name}} - {{_id}}
  </div>
  {{/each}}
</template> 
```

Javascript：

```
Animals = new Meteor.Collection("Animals");

function _get(query) {
    re = new RegExp(query, "i");
    console.log("rerunning query: " + query);
    return Animals.find({$and: [ {is_active: true}, {id_species: {$regex: re}} ] }, {limit: 10});
};

if (Meteor.isClient) {

    Session.set("query", "");

    Meteor.autosubscribe(function() {
        Meteor.subscribe("animals", Session.get("query"));
    });

    Template.searchQuery.events({
      'keyup .query' : function (event, template) {
        query = template.find('.query').value
        Session.set("query", query);
      }
    });

    Template.searchResults.results = function () {
        return _get(Session.get("query"));              
    }
}

if (Meteor.isServer) {
    Meteor.startup(function() {
        if (Animals.find().count() === 0) {
            Animals.insert({name: "panda", is_active: true, id_species: 'bear'});
            Animals.insert({name: "panda1", is_active: true, id_species: 'bearOther'});
            Animals.insert({name: "panda2", is_active: true, id_species: 'bear'});
            Animals.insert({name: "panda3", is_active: true, id_species: 'bearOther'}); 
        }
    });
    Meteor.publish("animals", _get);
} 
```

# django - Django Haystack 相似性搜索

> ID：14340151
> 
> 赞同：0
> 
> 时间：2013-01-15T14:43:40.550
> 
> 标签：django, search, solr, django-haystack, whoosh

我是一个做原始网站的 Django 新手。我安装了 haystack 和 Whoosh 作为它的搜索引擎，因为这是最简单的事情。它工作正常，但有一个问题，我不知道如何谷歌它。我的网站上有一些类别，我已将它们的名称编入索引以进行搜索。因此，当用户输入“计算”时，它会找到计算类别并链接到它。但有一个问题。如果用户在搜索字段中输入“Comp”，则根本找不到“Computing”。这是可以配置的东西吗？如何配置？

编辑：

我还尝试了什么？安装 haystack 2.0，按照[本](http://www.alexanderinteractive.com/blog/2012/08/getting-started-with-solr-and-django/)教程，安装 solr 而不是 whoosh，尝试 Ngram 字段，重建索引 10 次，重写 search_indexes.py。一切。不工作。如果我输入 Comp，它不会找到 Computing。还有什么我可以做的吗？我注意到在上面的教程中，一切都像魅力一样立即发挥作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:53:45.070

当你做通常的事情时：

```
SearchQuerySet().filter(title='Computing') 
```

在 Haystack 1.x 中，它过滤所有与“计算”**完全**匹配的内容。

您可以使用 Haystack 的[Field Lookups](https://django-haystack.readthedocs.org/en/latest/searchqueryset_api.html?highlight=contains#field-lookups)更改该行为，例如，使用 'contains' 将过滤任何包含给定字符串（Computing、Utingcomp、Comp）的内容：

```
SearchQuerySet().filter(title__contains='Comp') 
```

在 Haystack 2.x 中，默认过滤器是 'contains'，所以它应该像你期望的那样“开箱即用”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T15:28:15.380

查看有关[autocomplete](https://django-haystack.readthedocs.org/en/latest/autocomplete.html)的文档。您需要设置索引以支持 Ngram，但这应该正是您所需要的。

```
from haystack.query import SearchQuerySet

SearchQuerySet().autocomplete(content_auto='old')
# Result match things like 'goldfish', 'cuckold' & 'older'. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T23:20:06.223

所以，如果我理解的话，你正在寻找的是相当于 SQL 中的“LIKE”。问题是支持 Haystack 的搜索引擎不像 RDBMS。

此过滤器的低级实现将涉及使用通配符，但大多数 Haystack 后端不支持前导通配符，这是`icontains`/`endswith`过滤器所必需的。然而，由于大多数后端支持尾随通配符，Haystack 2.x 包含一个`startswith`过滤器。唯一不能处理的情况是搜索单词的结尾，这看起来是不可能的。

因此，如果您已编制索引：

```
"Look at our great discounts in Computer section" 
```

然后下面的 Haystack 查询 DO 匹配：

```
SearchQuerySet().filter(title__startswith='comp')
# match! 
```

`startswith`请注意 Django 与 Haystack过滤器之间的区别。Django`startswith`将匹配完整句子的开头（即 a ），但 Haystack 将匹配**标记**`CharField`的开头（即完整句子中的每个单词）。

 **希望能帮助到你！**

# c++ - DirectX 11.1 切换立体

> ID：14340154
> 
> 赞同：0
> 
> 时间：2013-01-15T14:43:54.753
> 
> 标签：c++, windows-8, directx-11, winapi

我正在摆弄[Direct3D 立体 3D 示例](http://code.msdn.microsoft.com/windowsapps/Direct3D-111-Simple-Stereo-9b2b61aa)，并且想知道是否有任何方法可以在应用程序运行时打开和关闭立体视图。我尝试手动设置`m_stereoEnabled = false`，但这仍然会渲染左眼和右眼，但根本不会更新右眼渲染。我对 DirectX 相当陌生，但不是软件开发或 3d 游戏开发（但是，我选择的工具通常是 OpenGL）。

看起来我需要更改 DirectXBase::UpdateStereoEnabledStatus()，因为如果我的显卡/显示器支持 3d，它会自动将 m_stereoEnabled 设置为 true。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-15T16:21:45.267

我相信需要更多关于您的 s3d 设置的信息。至少使用 XNA（DirectX 的更高级别）和 Nvidia 3D Vision 眼镜，立体视图会自动呈现：http: [//xboxforums.create.msdn.com/forums/t/90838.aspx](http://xboxforums.create.msdn.com/forums/t/90838.aspx)

# dart - Dart 中的国际库有什么用？

> ID：14340155
> 
> 赞同：2
> 
> 时间：2013-01-15T14:44:02.033
> 
> 标签：dart

我阅读了 intl library 的 API 文档，但我真的不知道 Intl 类对我们有什么帮助。

起初，我一直认为这个库就像 Java 中的 ResourceBundle 类。

但现在，我不能肯定...

我什么时候应该使用国际图书馆？或者图书馆有什么好的样本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:49:23.513

看一下源代码中的[intl 示例](https://code.google.com/p/dart/source/browse/#svn%2Fbranches%2Fbleeding_edge%2Fdart%2Fpkg%2Fintl%2Fexample%2Fbasic)。

从示例评论中：

> 这直接在程序中定义了英语语言环境的消息，并具有单独的库，用于定义表达或多或少相同内容的德语和泰语消息，并打印带有适合该语言环境格式的日期和时间的消息。

德语文件定义了一条`runAt`消息，它带有两个参数：`time`和`day`

```
runAt(time, day) => 
  Intl.message('Ausgedruckt am $time am $day.', name: 'runAt', args: [time, day]); 
```

basic_example.dart定义了默认的英文[版本](https://code.google.com/p/dart/source/browse/branches/bleeding_edge/dart/pkg/intl/example/basic/basic_example.dart)

```
runAt(time, date) => 
   Intl.message('Ran at $time on $day', name: 'runAt', args: [time, day]); 
```

然后，您可以使用正确的语言环境：

```
var de = new Intl('de_DE');
Intl.withLocale(de.locale, () => runAt('10:00', 'Dienstag')).then(print);
// default (en_GB?) locale
Intl.withLocale(new Intl().locale, () => runAt('10:00', 'Tuesday')).then(print); 
```

（`print`是输出消息的默认`print()`函数）。

# java - 使用 jpql 查找包含给定集合的所有元素的集合的项目

> ID：14340156
> 
> 赞同：10
> 
> 时间：2013-01-15T14:44:07.670
> 
> 标签：java, sql, hibernate, jpa, jpql

我想在其标签集中找到包含*所有*给定标签的项目。

以下是简化的类：

```
@Entity   
class Item {
  @ManyToMany
  var tags: java.util.Set[Tag] = new java.util.HashSet[Tag]()
}

@Entity
class Tag {
  @ManyToMany(mappedBy="tags")
  var items: java.util.Set[Item] = new java.util.HashSet[Item]
} 
```

如果我这样尝试

```
select distinct i 
from Item i join i.tags t
where t in (:tags) 
```

我得到包含*任何*给定标签的项目。这并不奇怪，但我想要包含*所有*给定标签的项目。所以我反过来尝试：

```
select distinct i 
from Item i join i.tags t
where (:tags) in t 
```

我收到错误消息`org.hibernate.exception.SQLGrammarException: arguments of row IN must all be row expressions`。如果`tags`只包含一个标签，它就可以工作，但它会失败并不止于此。

如何在 JPQL 中表达这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-15T21:51:24.980

诀窍是使用计数：

```
select i from Item i join i.tags t
where t in :tags group by i.id having count(i.id) = :tagCount 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-29T13:42:27.637

我刚遇到和你一样的问题。我使用了荒谬的归约法：

```
select distinct i from Item i where i not in (select i2 from Item i2 join i2.tags t where t not in :tags) 
```

# windows - 当 RDP 密码等于某个值时如何重新启动 Windows

> ID：14340157
> 
> 赞同：0
> 
> 时间：2013-01-15T14:44:10.310
> 
> 标签：windows, rdp, reboot

当 RDP 密码等于某个值时，如何（自动）重新启动 Windows？

**例如 ：**

的密码`RDP == "hello_world"`。当用户使用此密码输入时，Windows 将照常工作。但如果`password == 'bye_world'`Windows 将重新启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:27:17.403

您可以按照@Da_smokes 的建议使用批处理文件

```
set /p password=Enter rdp password:
if "%password%"=="hello_world" mstsc /whatever you want to do
if "%password%"=="bye_world" shutdown /s /t 0 /f 
```

# kendo-ui - 重新键入搜索字符串时，Kendo AutoComplete 不会重新查询数据源

> ID：14340161
> 
> 赞同：4
> 
> 时间：2013-01-15T14:44:20.300
> 
> 标签：kendo-ui

我对 Kendo AutoComplete 小部件有疑问。

我正在尝试在用户输入搜索的前两个字符后查询数据源。在服务器（web api）上，我使用这两个字符限制搜索，一切都很好，即如果我继续在搜索中输入，则会返回一个子集并正确显示并进一步过滤。

但是，然后我重新键入一个新的搜索条目，该条目*不再返回*数据源，因此我被从第一个查询中检索到的数据卡住了。

我该如何正确处理？

谢谢

这是我的测试代码：

```
public class AlbumsController : ApiController
{
    HttpRequest _request = HttpContext.Current.Request;

    // GET api/albums
    public IEnumerable<Album> GetForAutoComplete()
    {
        string sw = _request["sw"] == null ? "" : _request["sw"].ToString();

        var query = (from a in Albums.MyAlbums
                     where a.Title.ToLower().StartsWith(sw)
                     orderby a.Title
                     select a).ToArray();

        return query;
    } 
```

我在客户端的javascript是这样的：

```
 var dataSource = new kendo.data.DataSource({
        transport: {
            read: {
                url: "/api/Albums/GetForAutoComplete",
                data: {
                    sw: function () {
                        return $("#albumSearch").data("kendoAutoComplete").value();
                    }
                }
            }

        }

    });

    $("#albumSearch").kendoAutoComplete({
        dataSource: dataSource,
        dataTextField: "Title",
        minLength: 2,
        placeholder: "type in here.."
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T14:58:54.777

将[serverFiltering](http://docs.kendoui.com/api/framework/datasource#serverfiltering-booleandefault)设置为 true。默认是false，所以它只会抓取一次数据，并假设它现在已经拥有了所有的数据，随后的过滤是在客户端完成的。要让它每次都重新发送到服务器，请添加：

```
var dataSource = new kendo.data.DataSource({
    serverFiltering: true, // <-- add this line.
    transport: {
        ...
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T06:56:22.503

使用数据库中的剑道自动完成输入时选择欧洲国家的代码如下：

```
$("#countries").kendoAutoComplete({
                        dataTextField: "yourfield",
                        filter: "startswith",       // or you can use filter: "contains",
                        minLength: 3,               //what ever you want. In my case its 0.
                        placeholder: "Select country...",
                        dataSource: {
                            type: "get",
                            serverFiltering: true,    //or can also make it false
                            transport: {
                                read: {
                                   url: "/yourController/yourAction",
                                   datatype: "json"
                                }
                          }
                    }
            }); 
```

这对我来说可以。

# php - 离线时 PHP XML 禁用提要

> ID：14340165
> 
> 赞同：0
> 
> 时间：2013-01-15T14:44:36.300
> 
> 标签：php, xml, feed

```
 <?php
     define(feed,'http://www.example.com/feed/');
     $xml_feed = file_get_contents(feed);
     $xml_parser = xml_parser_create();
     xml_parse_into_struct($xml_parser,$xml_feed,$xml_keys,$xml_index);
     xml_parser_free($xml_parser);
     for($i = 0;!empty($xml_index['TITLE'][$i]);$i++){
     if ($counter < 10)
     {
     echo '<span class="nieuwsfeed">
            <a href="'.$xml_keys[$xml_index['LINK'][$i]]['value'].'" target="blank_">' . date('d-m-Y', strtotime($xml_keys[$xml_index['PUBDATE'][$i]]['value'])) . ' ' . substr($xml_keys[$xml_index['TITLE'][$i]]['value'], 0, 45).'</a></span>';
     $counter++;
     }}
     ?> 
```

.

```
 $doc = new DOMDocument();
 $doc->load('http://feeds.example.com/example');
 $arrFeeds = array();
 foreach ($doc->getElementsByTagName('item') as $node) {
  $itemRSS = array ( 
   'title' => $node->getElementsByTagName('title')->item(0)->nodeValue,
  'desc' => $node->getElementsByTagName('description')->item(0)->nodeValue,
  'link' => $node->getElementsByTagName('link')->item(0)->nodeValue,
  'date' => $node->getElementsByTagName('pubDate')->item(0)->nodeValue
  );
array_push($arrFeeds, $itemRSS);
 }
 foreach ($arrFeeds as $row)
{
     if ($counter2 < 10)
{
?> 
```

当 Feed 处于离线状态时会显示此错误。

```
 Warning: DOMDocument::load(http://feeds.example.com/example)   
      [domdocument.load]: failed to open stream: Connection timed out in 
```

我使用这个脚本让我的提要在我的网页中运行，但是如果提要离线，它会搜索提要大约 30 秒到 60 秒，有没有人知道我应该如何在 x 秒后禁用加载和然后仅显示一个标准图像，其中显示该提要当前处于脱机状态。

每周大约 2/3 次，其中一个 XML 提要处于离线状态，因此如果您的网页一直在加载，那就很烦人了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:48:03.003

您可以使用`file_get_contents()`流上下文来使用和定义超时，如下所述： [Does file_get_contents() has a timeout setting？](https://stackoverflow.com/questions/10236166)

从那里的答案修改代码：

> ```
> <?php
> $ctx=stream_context_create(array('http'=>
>     array(
>         'timeout' => 5 // 5 seconds
>     )
> ));
> 
> echo file_get_contents('http://example.com/',false,$ctx);
> ?> 
> ```

# mysql - 计算视图中两个数据库之间偏移量的时间戳

> ID：14340167
> 
> 赞同：1
> 
> 时间：2013-01-15T14:44:46.813
> 
> 标签：mysql, sql

我正在尝试计算两个数据库之间的时间戳，但由于不是我的设计缺陷，一个有重叠的时间戳。

```
SELECT date(time + INTERVAL 8 HOUR) as day, COUNT(DISTINCT comment)
FROM  news.data
GROUP BY day
    UNION ALL
SELECT date(time + INTERVAL 8 HOUR) as day, COUNT(DISTINCT comment)
FROM`news-backup`.`data`
GROUP BY day
ORDER BY year(day) desc, day(day) DESC
LIMIT 20 
```

似乎发生了什么，两个数据库的范围内都有一些时间戳，因此它们会为某些日期产生单独的计数。所以它会从新闻和新闻备份中计算今天

```
EX:
date      count
2013-1-15  10
2013-1-15  13
2013-1-14  8
2013-1-13  15 
```

我想要的是

```
EX:
date      count
2013-1-15  23
2013-1-14  8
2013-1-13  15 
```

这是一个踢球者，我需要它在一个视图中，所以有一些限制（不允许子查询）。想法？不，我无法更改数据库之间发生的数据转储序列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:02:19.760

您不能将子查询放在视图中，但可以将视图放在视图中。

所以：

```
create view1 as 
    SELECT date(time + INTERVAL 8 HOUR) as day, 'current' as which, COUNT(DISTINCT comment) as cnt
    FROM  news.data
    GROUP BY day
        UNION ALL
    SELECT date(time + INTERVAL 8 HOUR) as day, 'backup' as which, COUNT(DISTINCT comment) as cnt
    FROM`news-backup`.`data`
    GROUP BY day, which 
```

我不确定您将它们组合在一起的逻辑是：

```
create view2 as
    select day, max(cnt)  -- sum(cnt)?  prefer current or backup?
    from view1
    group by day
    ORDER BY day desc 
```

禁止子查询的文档[在这里](http://dev.mysql.com/doc/refman/5.5/en/create-view.html)。请务必搜索“SELECT 语句不能包含”。

如果您有一个包含所有日期的表，那么以下“荒谬”的 SQL 可能会起作用：

```
select c.date,
       coalesce( (select count(distinct comment) from news.data where date(time + INTERVAL 8 HOUR) = c.date),
                 (select count(distinct comment) from news_backup.data where date(time + INTERVAL 8 HOUR) = c.date)
               ) as NumComments
from calendar c 
```

此版本假设您首先想要“新”，然后是备份。如果你想要总和，那么你会添加它们。

# android - 如何从广播中执行正在运行的服务中的方法？

> ID：14340168
> 
> 赞同：2
> 
> 时间：2013-01-15T14:44:47.773
> 
> 标签：android, service, communication, broadcast

在广播中，我想从服务 XYZ 调用非静态方法。该服务由接收器在启动时启动。有人想从这个正在运行的服务中运行方法吗？这个论坛中的一个解决方案是使方法静态并使用单例模式来执行。但是还有其他方法吗？也许用活页夹？

//编辑例如我有以下分类：

```
public class MyService extends Service{
   .....
   public void method(){
      //TODO
   }
} 
```

```
public class MyBroadcastReceiver extends BroadcastReceiver{
   .....
  public void onReceive(Context context, Intent intent) {
    String intentAction=intent.getAction();
    if(intentAction.equals(Intent.ACTION_BOOT_COMPLETED)){  
        //start service
        Intent serviceIntent = new Intent(context, MyService.class);
        context.startService(serviceIntent);

    }
    else{ 
     //TODO call method() in MyService
    }
} 
```

我该如何调用该方法`method()`？我知道我可以使用`context.getSystemService()`系统服务进行投射。但是我怎样才能得到我自己的服务对象呢？

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T19:30:50.247

您可以`setAction`在启动`Service`. 在您的服务中`onStartcommand`，您可以提取意图的操作，并在此基础上执行您的服务中的方法。

您将始终使用`startService`此命令向您的服务发送命令，这不会启动您的服务两次。它要么启动一次，要么将新意图发送到服务。

因此，在您的启动完成部分中，您应该将意图操作设置为您想要的任何内容，然后启动服务 - 您可以完全删除 else 块。

在您的服务实现中`onStartCommand`，提取意图的操作，并根据该操作执行您的方法。

# ios - 如何在 iOS 中发送和接收网络 MIDI 数据？

> ID：14340180
> 
> 赞同：3
> 
> 时间：2013-01-15T14:45:50.760
> 
> 标签：ios, objective-c, midi, bonjour, coremidi

如何在 iOS 中发送和接收网络 MIDI 数据？我能够使用 bonjour 解析服务器并将服务应用于 MIDI 连接，但我不知道从那里去哪里。文档似乎缺乏，网上也没有太多信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T18:22:13.720

本质上，您需要通过 Bonjour 在您的 iOS 应用程序中连接到会话：

*   使用 MIDIClientCreate 创建客户端
*   使用 MIDIInputPortCreate 创建一个输入端口
    *   这需要一个指向将在接收到 MIDI 数据时调用的 C 函数的指针
    *   您需要使用 MIDIPortConnectSource 将其连接到 MIDINetworkSession 的 defaultSession - 将其连接到 sourceEndpoint
*   使用 MIDIOutputPortCreate 创建输出端口
    *   您可以使用 MIDISend 将数据发送到网络会话 - 将数据包发送到 MIDINetworkSession defaultSession 的destinationEndpoint

不久前我写了一些关于此的博客文章，请参阅此处获取源代码等。

[第1部分](http://antifluke.blogspot.co.uk/2011/07/network-midi-on-ios-part-1.html)

[第2部分](http://antifluke.blogspot.co.uk/2011/05/network-midi-on-ios-part-2.html)

[第 3 部分](http://antifluke.blogspot.co.uk/2011/07/network-midi-on-ios-part-3.html)

# sql - 更新表，多部分标识符上的日期转换失败

> ID：14340183
> 
> 赞同：0
> 
> 时间：2013-01-15T14:46:02.053
> 
> 标签：sql, identifier

感谢昨天对日期转换提出建议的人，我现在有了一个可以工作的 SELECT 脚本。

不幸的是，当我尝试将其转换为 UPDATE 脚本时，我感到很害怕

```
Msg 4104, Level 16, State 1, Line 25
The multi-part identifier "mbrProject.ID" could not be bound. 
```

对于每个匹配的 ID (mbrProject.[ID] = ProjectDates.[Project_ID])，整个脚本应将 mbrProject 中的日期插入 ProjectDates，同时在 mbrProject 中解析混合的美国和英国格式日期，因为用户在更新时的国家/地区设置不正确桌子（我不能改变）。

```
Update ProjectDates
SET ProjectDates.[Start_Date] =

(
select right([Start_Date],4) +  
    case 
        when len([Start_Date])=10 then 
            substring([Start_Date],4,2) + left([Start_Date],2)

        else    right('0' + left([Start_Date],firstIndex-1),2) + 
                right('0' + substring([Start_Date],firstIndex+1,secondIndex - firstIndex-1),2) 
                end

from 
    (
    select mp.[Start_Date], charindex('/',mp.[Start_Date],1) firstIndex,
          charindex('/',mp.[Start_Date],charindex('/',mp.[Start_Date],1)+1) secondIndex

    from mbrProject mp
    join ProjectDates pd
    on mp.ID = pd.Project_ID
    )A

where mbrProject.[ID] = ProjectDates.Project_ID
) 
```

如果我只运行 SELECT 语句，它工作正常，返回正确的值。即一切从

```
select right([Start_Date],4) +  
    case 
```

向下

```
from mbrProject mp
join ProjectDates pd
on mp.ID = pd.Project_ID
)A 
```

但是，一旦我尝试将其包含在 UPDATE 语句中，就会出现错误。

我知道这取决于语法，但是无论我尝试移动什么东西，我都无法弄清楚。

请问有什么想法吗？

谢谢克雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:50:25.350

试试这个：

```
UPDATE PR
SET PR.[Start_Date] = A.[Corrected_Start_Date]
FROM ProjectDates PR
    JOIN
    (
        SELECT
            [Id],
            RIGHT([Start_Date],4) +  
            CASE
                WHEN len([Start_Date])=10
                THEN substring([Start_Date],4,2) + LEFT([Start_Date],2)
                ELSE RIGHT('0' + LEFT([Start_Date],firstIndex-1),2) + 
                         RIGHT('0' + substring([Start_Date],firstIndex+1,secondIndex - firstIndex-1),2) 
            END [Corrected_Start_Date]
        FROM 
        (
            SELECT
                        [Id],
                        [Start_Date],
                        charindex('/',[Start_Date],1) firstIndex,
                        charindex('/',[Start_Date],charindex('/',[Start_Date],1)+1) secondIndex
            FROM mbrProject
        ) S
    ) A
ON A.[ID] = PR.[Project_ID] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:51:57.660

```
(
select mp.[Start_Date], charindex('/',mp.[Start_Date],1) firstIndex,
      charindex('/',mp.[Start_Date],charindex('/',mp.[Start_Date],1)+1) secondIndex

from mbrProject mp
join ProjectDates pd
on mp.ID = pd.Project_ID
)A 
```

在此处最后一行的末尾，名称、`mp`和（内部）不再作为表名或别名存在。从这里开始，唯一适用于该行集的名称是您提供的别名。`pd``mbrProject``ProjectDates``A`

所以你需要包含`mp.ID`在你的选择列表中，然后`A.ID`在你的外部比较中使用。

* * *

另外，不知道您要做什么，我只想确保您知道`ProductDates`（正在更新的表）并且`pd`指的是该表的两个独立实例，一个内部实例和一个外部实例。我希望决赛`WHERE`应该是：

```
where A.[ID] = ProjectDates.Project_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:54:11.210

问题是这样做

```
Update ProjectDates
SET ProjectDates.[Start_Date] = (select ...) 
```

您正在尝试将一行的一个字段设置为子选择语句的结果，我认为该语句返回多个值。

# jquery - 用于 raphael.js 图形的 Bootstrap / jQuery UI 弹出框

> ID：14340195
> 
> 赞同：0
> 
> 时间：2013-01-15T14:46:58.293
> 
> 标签：jquery, jquery-ui, twitter-bootstrap, raphael, popover

我有一些弹出框，我想触发 raphael.js 图形的某些元素的“悬停”，但我似乎无法让它们工作（使用 jQuery UI 和 Bootstrap）。

我通过引用指定的类来调用网站上的弹出框：

```
$(document).ready(function() {
  $('.show-popover').popover();
}); 
```

然后我可以通过将相关属性添加到 HTML 标签来触发弹出窗口：`class="show-popover"`、、、`rel="popover"`等`data-trigger="hover"`。

我在网站上还有一些嵌入式 raphael.js SVG 图形。在添加了上面提到的相同属性后，我似乎无法让 raphael.js 图形的元素（路径、文本等）出现弹出框。

假设我在图形中添加了一个正方形；然后我可以将所需的弹出框属性添加到 raphael.js 中的正方形，如下所示：

```
square.node.setAttribute('class', 'show-popover');
square.node.setAttribute('rel', 'popover');
square.node.setAttribute('data-trigger', 'hover');
square.node.setAttribute('data-original-title', 'Popover title');
square.node.setAttribute('data-content', 'Main popover text here...'); 
```

我可以看到属性正在使用 Firebug 添加到 SVG，但弹出框没有出现在悬停时。

是否可以触发弹出框以将鼠标悬停在 raphael.js 图形的元素上？

[编辑] 参见示例[http://jsfiddle.net/cQGQT/](http://jsfiddle.net/cQGQT/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T18:46:43.587

默认情况下，Bootstrap 将 popover 元素附加为触发元素的同级元素。在这种情况下，它将弹出框添加为 SVG 节点的子节点。由于`div`标签在 SVG 节点内不可渲染，因此不会显示任何内容。为了解决这个问题，我将 a 添加`div`到`body`以充当弹出框的持有者，并通过`circle`SVG 元素的 DOM 鼠标事件定位和切换它。

这是想法：

```
// ps is absolutely positioned div in body
ph.popover({
  trigger: 'manual',
  title: 'Popover Title',
  content: 'Popover Content',
  animation: false
});

$('circle').on('mouseover', function(evt){
  var targ = $(evt.target),
  off = targ.offset(),
  r = parseInt(targ.attr('r')); 
  ph[0].style.left = (off.left + r*2) + 'px';
  ph[0].style.top = (off.top + r) + 'px';
  ph.popover('show');
}).on('mouseout', function(evt){
  ph.popover('hide');  
}); 
```

和完整的小提琴：http: [//jsfiddle.net/BzJCq/2/](http://jsfiddle.net/BzJCq/2/)

我不确定这是最好的方法，但我认为这是正确的方向。您可以尝试在弹出框设置中使用“选择器”选项，但我发现以这种方式放置弹出框有点棘手。

[编辑-解决交换标题/内容]

如果要根据触发它的节点交换弹出框的内容，可以执行以下操作：

```
// add different popover data to circles
circle.node.setAttribute('pop-title', 'Red Circle');
circle.node.setAttribute('pop-content', 'Content for the red one');

circle2.node.setAttribute('pop-title', 'Green Circle');
circle2.node.setAttribute('pop-content', 'Content for the green one'); 
```

然后在触发逻辑中，更新弹出元素的数据属性，如下所示：

```
// ph is the element holding the popover
ph.attr('data-original-title', targ.attr('pop-title'));
ph.attr('data-content', targ.attr('pop-content')); 
```

我更新了上面的小提琴链接。

# c# - MVC4：不同操作的相同 url 基础

> ID：14340198
> 
> 赞同：2
> 
> 时间：2013-01-15T14:47:00.423
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我想有2条类似于这些的路线：

```
routes.MapRoute("Detail", "guide/{urlname}", new { controller = "Application", action = "Detail" });
routes.MapRoute("Search", "guide/{keyword1}/{keyword2}", new { controller = "Guide", action = "Index", keyword1 = UrlParameter.Optional, keyword2 = UrlParameter.Optional }); 
```

因此，一个路由是详细页面，它根据 url 名称在数据库中查找对象，另一个路由是基于应用程序生成的关键字的搜索结果页面，两者共享相同的 url 根 ( `/guide`)。这两个动作在不同的控制器中。可能的网址是：

```
/guide/evernote        --> should route to the application detail page
/guide                 --> should route to search results without filter
/guide/iphone          --> should route to iphone apps search results
/guide/iphone/medical  --> should route to medical iphone apps search results 
```

显然，像这样，第二个路由永远不会匹配一个 url，`/guide/iphone`因为第一个路由已经匹配了相同的 url。

如果控制器在数据库中找不到对象，我不想在第一个操作中进行重定向。那么还有哪些其他选择呢？我是否需要创建一个自定义`RouteHandler`或`UrlRoutingModule`为此或有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:16:47.140

如果 {urlname} 是它所暗示的 url，您可以添加一个约束来测试 url 是否与正则表达式匹配：

[http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:50:38.207

更改顺序，它将起作用：

```
routes.MapRoute("Search", "guide/{keyword1}/{keyword2}", new { controller = "Guide", action = "Index" });
routes.MapRoute("Detail", "guide/{urlname}", new { controller = "Application", action = "Detail" }); 
```

# user-interface - 执行powershell脚本时如何使后台窗口不出现

> ID：14340200
> 
> 赞同：0
> 
> 时间：2013-01-15T14:47:10.007
> 
> 标签：user-interface, powershell, executable

每当我执行 gui powershell 脚本时，除了 gui form 之外，还会出现背景窗口（命令窗口）；如何消除它，我应该以任何不同的方式执行脚本吗？

-> 如果对此有任何其他问题，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:59:26.367

尝试使用参数创建一个调用脚本的快捷方式`-windowstyle`：

```
powershell.exe -sta -WindowStyle Hidden ".\myGUIscript.ps1" 
```

此运行 powershell 控制台然后关闭它，但让 GUI 继续他的工作

# c# - 如何正确地将拦截器添加到没有 ILogger 类型的字段或属性的组件

> ID：14340208
> 
> 赞同：2
> 
> 时间：2013-01-15T14:47:31.693
> 
> 标签：c#, castle-windsor, ioc-container, interceptor, castle

基本上，我正在尝试为每个没有 ILogger 属性或字段的类添加一个日志记录拦截器。

我正在使用的项目是使用 Monorail 2.1 和最新的 Castle Windsor 稳定版本（2012 年 8 月，3.1.0）构建的。

假设我有：

```
[ViewComponentDetails("Followers")]
    public class FollowersComponent : ViewComponent
    {
        private readonly ISession NHibernateSession;

        public FollowersComponent(ISession session)
        {
            NHibernateSession = session;
        }

        public override void Render()
        {
            IPrincipal loggedUser = EngineContext.CurrentUser;
            if ((loggedUser.Identity.AuthenticationType == "Monorail Type") && (loggedUser.Identity.IsAuthenticated))
            {
                var user = (PrincipalAdapter<Int64>)Session["User"];
                PropertyBag["loggedUser"] = NHibernateSession.Get<User>(user.UserId);
                RenderView("Followers");

            }
        }
    } 
```

我想向这个类以及任何其他没有日志记录的类添加以下拦截器：

```
public class AspectLogger : IInterceptor
    {
        public AspectLogger(ILoggerFactory loggerFactory)
        {
            LoggerFactory = loggerFactory;
            Loggers = new ThreadSafeDictionary<Type, ILogger>();
        }

        public ILoggerFactory LoggerFactory { get; private set; }

        public ThreadSafeDictionary<Type, ILogger> Loggers { get; private set; }

        public void Intercept(IInvocation invocation)
        {
            if (!Loggers.ContainsKey(invocation.TargetType))
            {
                Loggers.Add(invocation.TargetType, LoggerFactory.Create(invocation.TargetType));
            }
            ILogger logger = Loggers[invocation.TargetType];

            if (logger.IsDebugEnabled) logger.Debug(invocation.PrettyPrint());
            try
            {
                invocation.Proceed();
            }
            catch (Exception ex)
            {
                if (logger.IsErrorEnabled) logger.Error(invocation.PrettyPrint(), ex);
                throw;
            }
        }
    } 
```

因此，使用 Windsor 网站上的文档和其他一些博客文章，我提出了以下安装程序和设施：一个 Nhibernate 安装程序/设施，它设置会话工厂和会话，一个单轨安装程序，它添加 Monorail Windsor 设施并注册所有控制器、视图组件和过滤器，最后是添加此功能的日志安装程序：

```
public class ExtendedLoggingFacility : LoggingFacility
    {
        public ExtendedLoggingFacility()
            : base()
        {
        }

        public ExtendedLoggingFacility(LoggerImplementation loggingApi) :
            base(loggingApi)
        {
        }

        public ExtendedLoggingFacility(LoggerImplementation loggingApi, string configFile) :
            base(loggingApi, configFile)
        {
        }

        public ExtendedLoggingFacility(string customLoggerFactory, string configFile) :
            base(customLoggerFactory, configFile)
        {
        }

        public ExtendedLoggingFacility(LoggerImplementation loggingApi, string customLoggerFactory, string configFile) :
            base(loggingApi, customLoggerFactory, configFile)
        {
        }

        protected override void Init()
        {
            base.Init();
            Kernel.Register(Component.For<IInterceptor>()
                .ImplementedBy<AspectLogger>());
            Kernel.ComponentRegistered += Kernel_ComponentRegistered;
        }

        private void Kernel_ComponentRegistered(string key, IHandler handler)
        {
            if (!(handler.ComponentModel.Implementation.GetProperties().Any(prop => prop.PropertyType.GetInterfaces().Contains(typeof(ILogger))) || handler.ComponentModel.Implementation.GetFields().Any(l=>l.FieldType.GetInterfaces().Contains(typeof(ILogger)))))
            {
                handler.ComponentModel.Interceptors.AddIfNotInCollection(new InterceptorReference(typeof(AspectLogger)));
            }
        }
    } 
```

唯一的问题？没有拦截器被注册！至少，根据这个单元测试：

```
[TestFixture]
    public class ControllersInstallerTests
    {
        private IWindsorContainer containerWithControllers;

        [SetUp]
        public void OnSetup()
        {
            containerWithControllers = new WindsorContainer()
                        .Install(FromAssembly.Containing(typeof(UserController)));
        }

 [Test]
        public void All_components_which_dont_have_ILogger_as_a_property_or_field_have_an_AspectLog()
        {
            var allComponents = GetPublicClassesFromApplicationAssembly(p => !(p.GetProperties().Any(prop => prop.PropertyType.IsAssignableFrom(typeof(ILogger)) || p.GetFields().Any(g => g.FieldType.IsAssignableFrom(typeof(ILogger))))));
            var allHandlers = GetAllHandlers(containerWithControllers);
            foreach (var comp in allComponents)
            {
                var handlersForComponent = GetHandlersFor(comp, containerWithControllers);
                if (handlersForComponent.Length != 0)
                    Assert.True(handlersForComponent.All(p => p.ComponentModel.HasInterceptors));
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:42:39.027

尝试将您的设施更改为：

```
public class ExtendedLoggingFacility : LoggingFacility
{
    public ExtendedLoggingFacility()
        : base()
    {
    }

    public ExtendedLoggingFacility(LoggerImplementation loggingApi) :
        base(loggingApi)
    {
    }

    public ExtendedLoggingFacility(LoggerImplementation loggingApi, string configFile) :
        base(loggingApi, configFile)
    {
    }

    public ExtendedLoggingFacility(string customLoggerFactory, string configFile) :
        base(customLoggerFactory, configFile)
    {
    }

    public ExtendedLoggingFacility(LoggerImplementation loggingApi, string customLoggerFactory, string configFile) :
        base(loggingApi, customLoggerFactory, configFile)
    {
    }

    protected override void Init()
    {
        base.Init();
        Kernel.Register(Component.For<AspectLogger>());
        Kernel.ComponentModelCreated += Kernel_ComponentModelCreated;
    }

    private void Kernel_ComponentModelCreated(ComponentModel model)
    {
        if (
            !(model.Implementation.GetProperties()
                     .Any(prop => prop.PropertyType.GetInterfaces().Contains(typeof(ILogger))) ||
              model.Implementation.GetFields()
                     .Any(l => l.FieldType.GetInterfaces().Contains(typeof(ILogger)))))
        {
            model.Interceptors.AddIfNotInCollection(InterceptorReference.ForType<AspectLogger>());
        }
    }
} 
```

此外，您应该改用 IContributeComponentModelConstruction：[http ://docs.castleproject.org/Default.aspx?Page=ComponentModel-construction-contributors&NS=Windsor&AspxAutoDetectCookieSupport=1](http://docs.castleproject.org/Default.aspx?Page=ComponentModel-construction-contributors&NS=Windsor&AspxAutoDetectCookieSupport=1)

它看起来像这样：

```
public class ExtendedLoggingFacility : LoggingFacility
{
    public ExtendedLoggingFacility()
        : base()
    {
    }

    public ExtendedLoggingFacility(LoggerImplementation loggingApi) :
        base(loggingApi)
    {
    }

    public ExtendedLoggingFacility(LoggerImplementation loggingApi, string configFile) :
        base(loggingApi, configFile)
    {
    }

    public ExtendedLoggingFacility(string customLoggerFactory, string configFile) :
        base(customLoggerFactory, configFile)
    {
    }

    public ExtendedLoggingFacility(LoggerImplementation loggingApi, string customLoggerFactory, string configFile) :
        base(loggingApi, customLoggerFactory, configFile)
    {
    }

    protected override void Init()
    {
        base.Init();
        Kernel.Register(Component.For<AspectLogger>());
        Kernel.ComponentModelBuilder.AddContributor(new AddLoggingAspect());
    }
}

public class AddLoggingAspect : IContributeComponentModelConstruction
{
    public void ProcessModel(IKernel kernel, ComponentModel model)
    {
        if (
            !(model.Implementation.GetProperties()
                   .Any(prop => prop.PropertyType.GetInterfaces().Contains(typeof(ILogger))) ||
              model.Implementation.GetFields()
                   .Any(l => l.FieldType.GetInterfaces().Contains(typeof(ILogger)))))
        {
            model.Interceptors.AddIfNotInCollection(InterceptorReference.ForType<AspectLogger>());
        }
    }
} 
```

# eclipse - 在 Glasshfish 3 中部署 EJB“HelloWord”时出现 UnsupportedClassVersionError

> ID：14340210
> 
> 赞同：0
> 
> 时间：2013-01-15T14:47:39.883
> 
> 标签：eclipse, ejb-3.0, glassfish-3, web-deployment

我尝试在本地服务器 GlasshFish 3 中部署一个简单的“Hello Word”，但在部署时控制台会打印此消息

```
[#|2013-01-15T15:00:02.458+0100|SEVERE|glassfish3.1.2|
javax.enterprise.system.tools.admin.org.Exception while deploying the app
[HelloWorldEJB] :UnsupportedClassVersionError: Class ejb_other.PlaceAuctionItemBean 
as unsupported major or minor version numbers, which are greater than those found 
in the Java Runtime Environment version 1.6.0_27|#] 
```

我的 JAVA_HOME 有 java 版本 1.6.0_27（它指的是 _C:\Program Files\Java\jdk1.6.0_27_），我的 Eclipse (indigo) 项目是指 java 1.6.0_27。我*认为*（我不知道如何验证） GlasshFish 指的是 JAVA_HOME。

在我的电脑（Windows 7）中，我发现了 2 个**包含 java.exe**的目录：

*   *C:\Windows\SysWOW64* >java -version -->>java 版本“1.6.0_29”
*   *C:\Windows\System32* >java -version -->>java 版本“1.6.0_27”

我发现了有关此异常的更多讨论（fe [this](https://stackoverflow.com/questions/11239086/java-lang-unsupportedclassversionerror-unsupported-major-minor-version-51-0)或[this](https://stackoverflow.com/questions/10382929/unsupported-major-minor-version-51-0)），但我需要针对 Eclipse/Glasshfish 更具体的内容，因为我无法解决。我看到JVM对于编译和执行是一样的。

## 后脚本

我添加了关于我声明 JVM 的位置的屏幕截图：它始终是 1.6。一：![编译器](../Images/78973b109067858a678ccbd4c7419f93.png) 二：![构建路径eclipse](../Images/10abcdc497db2ea567239c181c9dd33b.png) 三：![环境变量](../Images/e2fc07d1f0f025fa7763b4d5767279a1.png)

我在哪里可以看到我使用 java 7 编译或使用另一个 JVM 运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:53:15.670

`ejb_other.PlaceAuctionItemBean`显然是为 Java 7 编译的，如果您在 Java 6 JVM 中运行它，它将无法工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:52:54.813

找到解决方案

还有一个地方可以设置编译器的选项：

[如何让 eclipse 为 Java 使用不同的编译器版本？](https://stackoverflow.com/questions/2540548/how-do-i-get-eclipse-to-use-a-different-compiler-version-for-java)

# javascript - jQuery：如何编辑此代码以产生淡入淡出效果而不是滑动效果？

> ID：14340215
> 
> 赞同：0
> 
> 时间：2013-01-15T14:47:50.303
> 
> 标签：javascript, jquery, fade, slide

我无法使以下代码淡化图像而不是滑动图像。任何帮助将不胜感激。

这是代码：

```
var rotate_delay = 7000;

(function($) {
$.fn.preload = function(options) {
    var opts    = $.extend({}, $.fn.preload.defaults, options);
    o           = $.meta ? $.extend({}, opts, this.data()) : opts;
    var c       = this.length,
        l       = 0;
    return this.each(function() {
        var $i  = $(this);
        $('<img/>').load(function(i){
            ++l;
            if(l == c) o.onComplete();
        }).attr('src',$i.attr('src'));  
    });
};
$.fn.preload.defaults = {
    onComplete  : function(){return false;}
};
})(jQuery);

$(function() {
var $tf_bg              = $('#tf_bg'),
    $tf_bg_images       = $tf_bg.find('img'),
    $tf_bg_img          = $tf_bg_images.eq(0),
    $tf_thumbs          = $('#tf_thumbs'),
    total               = $tf_bg_images.length,
    current             = 0,
    $tf_content_wrapper = $('#tf_content_wrapper'),
    $tf_next            = $('#tf_next'),
    $tf_prev            = $('#tf_prev'),
    $tf_loading         = $('#tf_loading');

//preload the images                
$tf_bg_images.preload({
    onComplete  : function(){
        $tf_loading.hide();
        init();
    }
});

//shows the first image and initializes events
function init(){
    //get dimentions for the image, based on the windows size
    var dim = getImageDim($tf_bg_img);
    //set the returned values and show the image
    $tf_bg_img.css({
        width   : dim.width,
        height  : dim.height,
        left    : dim.left,
        top     : dim.top
    }).fadeIn();

    //resizing the window resizes the $tf_bg_img
$(window).bind('resize',function(){
    var dim = getImageDim($tf_bg_img);
    $tf_bg_img.css({
        width   : dim.width,
        height  : dim.height,
        left    : dim.left,
        top     : dim.top
    });
});

    //expand and fit the image to the screen
    $('#tf_zoom').live('click',
        function(){
        if($tf_bg_img.is(':animated'))
            return false;

            var $this   = $(this);
            if($this.hasClass('tf_zoom')){
                resize($tf_bg_img);
                $this.addClass('tf_fullscreen')
                     .removeClass('tf_zoom');
            }
            else{
                var dim = getImageDim($tf_bg_img);
                $tf_bg_img.animate({
                    width   : dim.width,
                    height  : dim.height,
                    top     : dim.top,
                    left    : dim.left
                },350);
                $this.addClass('tf_zoom')
                     .removeClass('tf_fullscreen'); 
            }
        }
    );

    var rotate_timeout;

    //click the arrow down, scrolls down
    $tf_next.bind('click',function(){
        if($tf_bg_img.is(':animated'))
            return false;
            clearInterval(rotate_timeout);
            scroll('tb');
    });

    //click the arrow up, scrolls up
    $tf_prev.bind('click',function(){
        if($tf_bg_img.is(':animated'))
        return false;
        clearInterval(rotate_timeout);
        scroll('bt');
    });

    function rotate()
    {   
        if($tf_bg_img.is(':animated'))
        return false;
        scroll('tb');
    }

    rotate_timeout = setInterval(rotate, rotate_delay);

    //mousewheel events - down / up button trigger the scroll down / up
    $(document).mousewheel(function(e, delta) {
        if($tf_bg_img.is(':animated'))
            return false;

        if(delta > 0)
            scroll('bt');
        else
            scroll('tb');
        return false;
    });

    //key events - down / up button trigger the scroll down / up
    $(document).keydown(function(e){
        if($tf_bg_img.is(':animated'))
            return false;

        switch(e.which){
            case 38:    
                scroll('bt');
                break;  

            case 40:    
                scroll('tb');
                break;
        }
    });
}

//show next / prev image
function scroll(dir){
    //if dir is "tb" (top -> bottom) increment current, 
    //else if "bt" decrement it
    current = (dir == 'tb')?current + 1:current - 1;

    //we want a circular slideshow, 
    //so we need to check the limits of current
    if(current == total) current = 0;
    else if(current < 0) current = total - 1;

    //flip the thumb
    $tf_thumbs.flip({
        direction   : dir,
        speed       : 400,
        onBefore    : function(){
            //the new thumb is set here
            var content = '<span id="tf_zoom" class="tf_zoom">       </span>';
            content     +='<img src="' +      $tf_bg_images.eq(current).attr('longdesc') + '" alt="Thumb' + (current+1) + '"/>';
            $tf_thumbs.html(content);
    }
    });

    //we get the next image
    var $tf_bg_img_next = $tf_bg_images.eq(current),
        //its dimentions
        dim             = getImageDim($tf_bg_img_next),
        //the top should be one that makes the image out of the viewport
        //the image should be positioned up or down depending on the direction
            top = (dir == 'tb')?$(window).height() + 'px':-parseFloat(dim.height,10) + 'px';

    //set the returned values and show the next image   
        $tf_bg_img_next.css({
            width   : dim.width,
            height  : dim.height,
            left    : dim.left,
            top     : top
        }).show();

    //now slide it to the viewport
        $tf_bg_img_next.stop().animate({
            top     : dim.top
        },1000);

    //we want the old image to slide in the same direction, out of the viewport
        var slideTo = (dir == 'tb')?-$tf_bg_img.height() + 'px':$(window).height() + 'px';
        $tf_bg_img.stop().animate({
            top     : slideTo
        },1000,function(){
        //hide it
            $(this).hide();
        //the $tf_bg_img is now the shown image
            $tf_bg_img  = $tf_bg_img_next;
        //show the description for the new image

        var desc = $tf_content_wrapper.children().eq(current);
        jQuery("h2, p",desc).css("opacity", 0);
        var speed = 1000, titlesFactor = 0, titlespeed = 1000, titleeasing = 'swing';

        desc.show()
                  .find('h2')
                  .css('left', -50 + 'px' )
                  .stop()
                  .delay( speed * titlesFactor )
                  .animate({ left : 0 + 'px', opacity : 1 }, titlespeed, titleeasing)
                  .end()
                  .find('p')
                  .css( 'left', 50 + 'px' )
                  .stop()
                  .delay( speed * titlesFactor )
                  .animate({ left : 0 + 'px', opacity : 1 }, titlespeed, titleeasing)
                  .end();

});
    //hide the current description  
        $tf_content_wrapper.children(':visible')
                           .hide()

}

//animate the image to fit in the viewport
function resize($img){
    var w_w = $(window).width(),
        w_h = $(window).height(),
        i_w = $img.width(),
        i_h = $img.height(),
        r_i = i_h / i_w,
        new_w,new_h;

    if(i_w > i_h){
        new_w   = w_w;
        new_h   = w_w * r_i;

        if(new_h > w_h){
            new_h   = w_h;
            new_w   = w_h / r_i;
        }
    }   
    else{
        new_h   = w_w * r_i;
        new_w   = w_w;
    }

    $img.animate({
        width   : new_w + 'px',
        height  : new_h + 'px',
        top     : '0px',
        left    : '0px'
    },350);
}

//get dimentions of the image, 
//in order to make it full size and centered
function getImageDim($img){
    var w_w = $(window).width(),
        w_h = $(window).height(),
        r_w = w_h / w_w,
        i_w = $img.width(),
        i_h = $img.height(),
        r_i = i_h / i_w,
        new_w,new_h,
        new_left,new_top;

    if(r_w > r_i){
        new_h   = w_h;
        new_w   = w_h / r_i;
    }
    else{
        new_h   = w_w * r_i;
        new_w   = w_w;
    }

    return {
        width   : new_w + 'px',
        height  : new_h + 'px',
        left    : (w_w - new_w) / 2 + 'px',
        top     : (w_h - new_h) / 2 + 'px'
    };
    }
}); 
```

这不是我的代码，我正在尝试进行编辑，以使其达到我所追求的效果，即淡入淡出

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:53:12.653

您可以替换`show()`with`fadeIn(timeout)`和 the `hide()`with `fadeOut(timeout)`。

# windows-runtime - 在 WinRT 中继承 DataTemplate

> ID：14340222
> 
> 赞同：0
> 
> 时间：2013-01-15T14:48:06.093
> 
> 标签：windows-runtime, datatemplate

我正在使用 WinRT XAML。我正在尝试在 WinRT 中创建自己的 HirarchicalDataTemplate。我从 DataTemplate 继承了我的类。

```
public class HierarchicalDataTemplate : DataTemplate
{} 
```

但是当我尝试在我的页面资源中初始化一个新的 HierarchicalDataTemplate 时，它​​在编译时显示以下错误。

> HierarchicalDataTemplate 不包含“模板”的定义。

任何想法如何解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:35:23.140

我`TreeView`昨天终于开始从 Silverlight Toolkit 移植控件，这对于非数据绑定使用来说并不太难，但后来我遇到了同样的问题。我的解决方案是使用常规`DataTemplate`for `TreeView.ItemTemplate`，然后将其修改为从而不是`HierarchicalDataTemplate`派生，然后我将其附加到带有附加属性 ( ) 的。**[您可以在此处](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/80e447e1edee#WinRTXamlToolkit.Sample/Views/Controls/TreeViewTestPage.xaml)**查看示例。`FrameworkElement``DataTemplate``ItemTemplate``DataTemplateExtensions.Hierarchy`

```
<xc:TreeView
    x:Name="tvDataBound"
    Grid.Row="1"
    Grid.Column="1"
    Style="{StaticResource TouchTreeViewStyle}"
    ItemContainerStyle="{StaticResource TouchTreeViewItemStyle}">
    <xc:TreeView.ItemTemplate>
        <DataTemplate>
            <data:DataTemplateExtensions.Hierarchy>
                <data:HierarchicalDataTemplate
                    ItemsSource="{Binding Children}" />
            </data:DataTemplateExtensions.Hierarchy>
            <StackPanel
                Orientation="Horizontal">
                <TextBlock
                    Text="{Binding Text}" />
                <Ellipse
                    VerticalAlignment="Center"
                    Margin="5"
                    Width="10"
                    Height="10"
                    Fill="{Binding Brush}" />
            </StackPanel>
        </DataTemplate>
        <!-- Original implementation based on Silverlight Toolkit didn't work:
        <data:HierarchicalDataTemplate
            ItemsSource="{Binding Children}">
            <StackPanel
                Orientation="Horizontal">
                <TextBlock
                    Text="{Binding Text}" />
                <Ellipse
                    VerticalAlignment="Center"
                    Margin="5"
                    Width="10"
                    Height="10"
                    Fill="{Binding Brush}" />
            </StackPanel>
        </data:HierarchicalDataTemplate>-->
    </xc:TreeView.ItemTemplate>
</xc:TreeView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:12:09.517

WinRT 版本`DataTemplate`没有公共`Template`属性。被`ContentProperty`指定为`Template`，所以我尝试改变它：

```
[ContentProperty(Name = "MyTemplate")] 
```

但是错误仍然存​​在：代码生成尝试`Template`从 XamlTypeInfo.g.cs 为该属性添加一个相同的条目：

```
userType.AddMemberName("MyTemplate");
userType.AddMemberName("Template"); 
```

要使用不同的内容属性，我们可以使用非子`DataTemplate`类并同时定义`Template`和`ItemTemplate`类型`DataTemplate`；或者继续继承`DataTemplate`，实现一个虚拟`Template`属性，并使用一个单独的`MyTemplate`属性来承载实际的内容模板。这可能在推送时可用，但不能允许模板在`DataTemplate`类型属性中使用。

试图让一个`DataTemplate`子类工作，我尝试添加一个类型的`Template`属性`object`：

```
public class HierarchicalDataTemplate : DataTemplate
{
    public object Template
    {
        get { return (object)GetValue(TemplateProperty); }
        set { SetValue(TemplateProperty, value); }
    }
    public static readonly DependencyProperty TemplateProperty =
        DependencyProperty.Register("Template", typeof(object), typeof(HierarchicalDataTemplate), new PropertyMetadata(null));
    // ItemTemplate...
} 
```

这适用于 Visual Studio 设计器，但不适用于运行时：

```
<local:HierarchicalDataTemplate x:Key="t1">
    <TextBlock Text="SUCCESS" />
</local:HierarchicalDataTemplate> 
```

来自[FrameworkTemplate](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.frameworktemplate)文档：

> FrameworkTemplate 有一个 ContentPropertyAttribute，指示其 XAML 内容属性名为“模板”。FrameworkTemplate 没有定义该名称的属性，也没有定义具有实际用途的派生类型（ControlTemplate、DataTemplate）。FrameworkTemplate 的内容是应用模板时应创建的根元素，它不是对象模型中的常规属性。当从模板创建内容时，XAML 解析器会专门处理 FrameworkTemplate 的内容。

看起来不太有希望。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T16:06:20.563

我同意这是一个令人烦恼的问题，并且这是您真正希望看到的模板。它看起来好像您实际上不能继承`DataTemplate`并使其正常工作 - WinRT 提供给您的许多控件由于多种原因不支持用户程序的继承（数据结构上的私有构造函数和类似`Template`属性的巫毒教去提醒）。

但是，由于看起来好像您只是在使用`HierarchicalDataTemplate`纯粹的自定义控件，因此您实际上根本不需要继承，`DataTemplate`因为您可以完全控制何时`DataTemplate`收获（您并且只有您可以调用`LoadContent()`它来填充您的控件）。相反，您最好的选择是创建一个自定义类，该类具有您需要的任何额外数据字段和行为，然后是一个包含`DataTemplate`被引用和实例化的 a 的属性。实际上，通过使用`ContentProperty`属性，您甚至可以跳过`ItemTemplate`属性和`DataTemplate`'`Template`属性，让 XAML 用户看起来好像您*确实*继承自`DataTemplate`.

# c# - 在 C# 中绘制位图

> ID：14340224
> 
> 赞同：0
> 
> 时间：2013-01-15T14:48:06.827
> 
> 标签：c#, visual-studio-2010, image, graphics, bitmap

我试图简单地将我的资源文件夹中的图像绘制到 Windows 窗体上，但由于某种原因它没有显示出来，这是我试图使用的代码......我一直在阅读和搜索一段时间图形类和 C# 中的绘图，我似乎无法很好地理解它......任何帮助或评论都非常感谢

```
Bitmap bmp = new Bitmap(WindowsFormsApplication1.Properties.Resources.BoostNeddleTest);
Graphics m_graphics = Graphics.FromImage(bmp);
m_graphics.DrawImage(bmp, 100, 100); 
```

图像没有被绘制，我不完全确定为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:53:35.113

你可以做这样的事情 VRKnight

```
protected override void OnPaint(PaintEventArgs e)
{
   Bitmap bmp = new Bitmap(WindowsFormsApplication1.Properties.Resources.BoostNeddleTest);
   // Draw using this   
   e.Graphics.DrawImage(bmp,100,100);
   base.OnPaint(e);
} 
```

您可以在此处阅读有关 OnPait Override 的更多信息 Overriding [the OnPaint Method](http://msdn.microsoft.com/en-us/library/cksxshce.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:53:53.610

对象的工作方式`Graphics`是这样的：-

```
 destination.DrawImage (source, position, etc...) 
```

在您的代码中，目标与源相同！你`m_graphics`需要一个显示设备（屏幕或打印机），`Graphics`你需要使用的对象在 WinForm 的 OnPaint 方法中给你。

# android - 在 Android 上创建视图的措施

> ID：14340225
> 
> 赞同：1
> 
> 时间：2013-01-15T14:48:07.500
> 
> 标签：android, android-layout, android-widget

在重新设计应用程序后，我们在创建新视图时获得了更长的加载时间（旧版本几乎没有图像并且速度更快）。我们使用 ViewFlipper 在视图中导航。创建的前两个视图是具有 ListViews 的两个布局，其元素具有背景图像和其他图形。巧合的是，我们发现，每次创建新视图并将其放入视图堆栈时，应用程序都会计算每个现有视图的尺寸（其中多次调用 ListView 适配器的 getView() 方法）。每个调用的跟踪日志如下所示：

> LinearLayout.measureChildBeforeLayout(View, int, int, int, int, int) line: 1369 LinearLayout.measureVertical(int, int) line: 660 LinearLayout.onMeasure(int, int) line: 553 LinearLayout(View).measure(int, int) line: 12937 TabHost(ViewGroup).measureChildWithMargins(View, int, int, int, int) line: 5045 TabHost(FrameLayout).onMeasure(int, int) line: 293 TabHost(View).measure(int, int)行：12937 RelativeLayout.measureChildHorizo​​ntal(View, RelativeLayout$LayoutParams, int, int) 行：594 RelativeLayout.onMeasure(int, int) 行：376 RelativeLayout(View).measure(int, int) 行：12937 FrameLayout(ViewGroup)。 measureChildWithMargins(View, int, int, int, int) line: 5045 FrameLayout.onMeasure(int, int) line: 293 FrameLayout(View).measure(int, int) line: 12937 LinearLayout(ViewGroup).measureChildWithMargins(View, int , int, int, int) 行：5045 LinearLayout.measureChildBeforeLayout(View, int, int, int, int, int) line: 1369 LinearLayout.measureVertical(int, int) line: 660 LinearLayout.onMeasure(int, int) line: 553 LinearLayout(View).measure(int , int) 行: 12937 PhoneWindow$DecorView(ViewGroup).measureChildWithMargins(View, int, int, int, int) 行: 5045 PhoneWindow$DecorView(FrameLayout).onMeasure(int, int) 行: 293 PhoneWindow$DecorView.onMeasure( int, int) 行：2180 PhoneWindow$DecorView(View).measure(int, int) 行：12937onMeasure(int, int) 行：293 PhoneWindow$DecorView.onMeasure(int, int) 行：2180 PhoneWindow$DecorView(View).measure(int, int) 行：12937onMeasure(int, int) 行：293 PhoneWindow$DecorView.onMeasure(int, int) 行：2180 PhoneWindow$DecorView(View).measure(int, int) 行：12937

等等......我认为这就是应用程序变得如此缓慢的原因。我可以做些什么来阻止应用程序执行这些措施或使应用程序更快？

ListAdapter 获取视图（）：

```
 public View getView(int pos, View convertView, ViewGroup parent) {

    View row;
    Entry entry = null;
    if (objects.get(pos) instanceof Entry) {
        entry = (Entry) objects.get(pos) ;

        Boolean isGroupedEntry;
        if (entry.getGroup() != null && entry.isGroupedEntry()) {
            isGroupedEntry = true;
        } else {
            isGroupedEntry = false;
        }

        if (convertView != null) {
            row = convertView;
        } else {
            row = new EntryBoxFrameLayout(getContext());
        }

        ((EntryBoxFrameLayout) row).configureFor(entry);

    } else {
        row = new View(ContentManager.getInstance().getContext());
    }

    row.setSelected(false);
    row.setTag(pos);
    return row;
} 
```

在 configureFor() 我设置了一些文本，然后：

```
 if (entry.getUserIsSignedUp() > 0) {
        this.setBackgroundColor("4A4A4A");
        this.findViewById(R.id.star).setVisibility(View.VISIBLE);
        this.findViewById(R.id.entry_face).setBackgroundResource(R.drawable.entry_face_loggedin);
        fulldate.setTextColor(Color.BLACK);
    } else {
        this.setBackgroundColor(entry.getColorHex());
        this.findViewById(R.id.star).setVisibility(View.INVISIBLE);
        this.findViewById(R.id.entry_face).setBackgroundResource(R.drawable.entry_face);
        fulldate.setTextColor(Color.WHITE);
    }

    if (entry.getGroup() != null) {
        this.findViewById(R.id.imgGroupArrow).setVisibility(View.VISIBLE);
        if (entry.isGroupExpanded()) {
            ((ImageView)this.findViewById(R.id.imgGroupArrow)).setImageResource(R.drawable.entry_up_arrow);
        } else {
            ((ImageView)this.findViewById(R.id.imgGroupArrow)).setImageResource(R.drawable.entry_down_arrow);
        }
        this.setGroupContainer(true);
    } else {
        this.findViewById(R.id.imgGroupArrow).setVisibility(View.INVISIBLE);
        this.setGroupContainer(false);
    }

    String filename = entry.getCacheFilename();
    Drawable entryimage = null;
    if (filename != null) {
        try {
            FileInputStream input = ContentManager.getInstance().getContext().openFileInput(filename);
            entryimage = new BitmapDrawable(ContentManager.getInstance().getContext().getResources(), input);
            input.close();
        } catch (Exception e) {
            Log.e(e.getLocalizedMessage());
        }
    }

    if (entryimage != null) {
        this.getImageView().setImageDrawable(entryimage);
    } else {
        this.getImageView().setImageResource(R.drawable.entry_placeholder);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:58:07.663

getView() 方法正在减慢您的应用程序的速度。listView 回收视图对象以提高性能。

有很多学习资源涵盖了这一点。

来自 google I/O 会议和来自 listView 的创建者：Romain Guy

*   [让您的 Android UI 快速高效](http://www.youtube.com/watch?v=N6YdwzAvwOA)
*   [列表视图的世界](http://www.youtube.com/watch?v=wDBM6wVEO70)

图像优化

*   从网上下载：[LazyLoading](http://www.google.com/search?q=lazyloading%20android)
*   来自您的资源：[显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)

更多代码示例：

*   谷歌优化列表视图
*   谷歌延迟加载列表视图
*   Google for convertview、viewholder listview

# sql - 没有“FOR UPDATE OF”语法问题的更新游标

> ID：14340226
> 
> 赞同：-3
> 
> 时间：2013-01-15T14:48:23.457
> 
> 标签：sql, syntax, cursor

好的，我在文件中找到了其他人编写的以下代码。我的问题是，这是否真的像我认为的那样工作，你必须在 MSSQL 的语法中的某处包含“FOR UPDATE OF”或“WHERE CURRENT OF”

```
set @group_id_new = (select max(group_id) + 1 from x_dc_multgroups_stage001c)

declare cur_cont cursor for
(select cont_id from x_dc_multgroups_stage002b)

open cur_cont

fetch next from cur_cont into @cont_id

while @@fetch_status = 0

begin
--print @cont_id
update  x_dc_multgroups_stage002a 
set     group_id_new = @group_id_new 
where   group_id in (select group_id from x_dc_multgroups_stage002a where cont_id = @cont_id)

set @group_id_new = @group_id_new + 1

fetch   next from cur_cont into @cont_id

end

close   cur_cont
deallocate cur_cont 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:03:17.153

你的情况有些倒退。

**如果**`UPDATE`使用的是语法[`WHERE CURRENT OF`](http://msdn.microsoft.com/en-us//library/ms177523.aspx)，那么，是的，游标需要是可更新的。但是这里没有使用这种语法。

在更新发生时，光标和更新之间的唯一关系是`@cont_id`变量——但该变量可以以任何你能想象的方式填充。它没有以任何方式连接到光标。

# python - 使用“python scriptname.py 文件名”在 Python 中打开文件

> ID：14340232
> 
> 赞同：0
> 
> 时间：2013-01-15T14:48:53.593
> 
> 标签：python, file-io

我是 python 脚本的新手。我有一个脚本，希望在目录中的所有文件上运行。[我在这个线程](https://stackoverflow.com/questions/2609159/running-a-python-script-on-all-the-files-in-a-directory)中找到了非常有用的建议。但是，我很难确定如何格式化实际脚本，以便它检索我想在命令提示符下运行脚本的文件的文件名，即“python script.py 文件名。*”我试过我最擅长浏览该站点中的 Python 文档和论坛，但结果都是空的（我可能只是不知道应该搜索哪些关键字）。

我目前能够一次在一个文件上运行我的脚本，并使用以下代码以新的文件扩展名输出它，但这样我一次只能执行一个文件。我希望能够使用'GENE.*'遍历整个目录：

```
InFileName = 'GENE.303'

InFile = open(InFileName, 'r') #opens a pipeline to the file to be read line by line

OutFileName = InFile + '.phy'

OutFile = open(OutFileName, 'w') 
```

我可以对代码做些什么来让自己在目录中使用类似于在[这种情况下](https://stackoverflow.com/questions/2609159/running-a-python-script-on-all-the-files-in-a-directory)所做的迭代？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:50:37.863

您正在寻找：

```
import sys
InFileName = sys.argv[1] 
```

请参阅[文档](http://docs.python.org/2/library/sys.html#sys.argv)。

对于更复杂的东西，请查看`optparse`and`argparse`模块（后者更可取，但仅在较新版本的 Python 中可用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:56:28.180

您有很多选项可以使用 Python 处理文件列表：

* * *

您可以使用命令行的 shell 扩展工具将更多文件名传递给脚本，然后迭代[命令行参数](http://docs.python.org/2/library/sys.html)：

```
import sys

def process_file(fname):
    with open(fname) as f:
        for line in f:
            # TODO: implement
            print line

for fname in sys.argv[1:]:
    process_file(fname) 
```

并称之为：

```
python my_script.py * # expands to all files in the directory 
```

* * *

您还可以使用[glob 模块](http://docs.python.org/2/library/glob.html)进行此扩展：

```
import glob

for fname in glob.glob('*'):
    process_file(fname) 
```

# python - 如何在 Python 中有效地保存引用的类类型？（应用引擎）

> ID：14340233
> 
> 赞同：2
> 
> 时间：2013-01-15T14:48:56.320
> 
> 标签：python, google-app-engine

我想在持久化应用引擎模型中引用不同的类。喜欢：

```
class Animal():
  def eat(self, food):
    return food - 1

class Cat(Animal):
  def eat(self, food):
    return food - 2

class Dog(Animal):
  def eat(self, food):
    return food - 3

class Person(db.Model):
  name = db.StringProperty()
  pet = Animal() 
```

我希望能够将 Cat() 或 Dog() 实例分配为宠物，保存它并能够重新加载 Person 对象，其中引用了其中引用的原始动物类型。宠物对象的持久性并不重要，我只想用类的方法定义不同的行为集。我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:58:12.060

查看[PolyModel](https://developers.google.com/appengine/docs/python/ndb/polymodelclass)类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:09:07.907

我能想到的最好的方法是一个 getter 方法（假设上面的 Animal、Cat、Dog 类）：

```
class Person(db.Model):
  name = StringProperty()
  pet = StringProperty(choices=('cat','dog'))

  def get_pet(self):
    dict = { 'cat': Cat, 'dog': Dog }
    return dict[self.pet] 
```

这样，我必须在另外两个地方维护可用宠物类型的列表（保存的字符串变量的选择和字符串类对的字典）。有没有更无风险和更优雅的方法来做到这一点？

# ios - 从 NSArray 中获取最后 10 个对象

> ID：14340235
> 
> 赞同：2
> 
> 时间：2013-01-15T14:49:09.990
> 
> 标签：ios, objective-c, arrays

我目前正在从事一个项目，我将在其中解析 JSON 并将 JSON 对象存储到数组中。

我做这样的事情：

```
NSArray *value = [JSONObject valueForKey:@"value"]; 
```

我的所有值都在数组值中。

我将如何从该数组中收集最后 10 个值并将其存储在第二个数组中？

非常感谢任何帮助。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-15T14:52:00.157

看看这个方法。（这里是[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/#//apple_ref/occ/instm/NSArray/subarrayWithRange:)的链接。）

```
- (NSArray *)subarrayWithRange:(NSRange)range; 
```

因此，在您的情况下，它将是：

```
NSArray *value = [JSONObject valueForKey:@"value"];
NSRange endRange = NSMakeRange(value.count >= 10 ? value.count - 10 : 0, MIN(value.count, 10));
NSArray *lastTenObjects= [value subarrayWithRange:endRange]; 
```

# java - Tomcat 6中的Webapp启动后找不到环境变量

> ID：14340240
> 
> 赞同：1
> 
> 时间：2013-01-15T14:49:22.373
> 
> 标签：java, linux, shell, tomcat, jsvc

我有以下问题：

我正在使用 Tomcat 6.0.32 和 Java JDK 6.0_26。我已成功安装它，并且在浏览器的 8080 端口处可以看到 Tomcat 起始页。

我还创建了 $CATALINA_HOME/setenv.sh 脚本并在其中放入了一些特定于 webapp 的环境变量（以及 CATALINA_HOME、JAVA_HOME 和 CLASSPATH）。

我创建了一个新用户“tomcat”，为他设置了一个新的主目录，并对其进行了密码编辑。

该脚本来源于我创建的一个初始化脚本，用于在重新启动时自动启动和停止 Tomcat。我不使用 $CATALINA_HOME 中的标准 startup.sh 和 shutdown.sh，而是使用 jsvc 守护进程启动器，因此我可以使用非 root 进程（Tomcat 本身）的端口 8080。

实际的问题是，重新启动 Tomcat 后，我​​的 webapp 没有收到或看到我在 setenv.sh 中设置的环境变量，因此它不会启动。

我试图将环境变量定义放在不同的地方：

*   .bashrc 在 tomcat 主目录中
*   /etc/init.d/tomcat 脚本
*   $CATALINA_HOME/bin/setenv.sh
*   $CATALINA_HOME/webapps/myapp/META-INF/context.xml

无济于事，在启动 Tomcat 后，我​​的 webapp 看不到所需的环境变量。

我的问题是——我到底在做什么？有什么建议吗？如果 setenv.sh 不起作用，我应该如何将环境变量传输到 webapp？什么可能使这种机制出现故障（据称这是将 env vars 交给 webapps 的方式）？

这是我写的启动脚本：

```
#!/bin/sh
### BEGIN INIT INFO
# Provides:          allfaweb
# Required-Start:    $syslog $apache $apache2 $httpd
# Should-Start:
# Required-Stop:     $syslog $apache $apache2 $httpd
# Should-Stop:
# Default-Start:     3 5
# Default-Stop:      0 1 2 6
# Short-Description: ALLFAweb service
### END INIT INFO

ALLFAWEB_BIN=/install/apache-tomcat-6.0.32-allfaweb/bin/jsvc
test -x $ALLFAWEB_BIN || { echo "$ALLFAWEB_BIN not installed";
        if [ "$1" = "stop" ]; then exit 0;
        else exit 5; fi; }

# Check for existence of setenv.sh file and read it
ALLFAWEB_CONFIG=/install/apache-tomcat-6.0.32-allfaweb/bin/setenv.sh
test -r $ALLFAWEB_CONFIG || { echo "$ALLFAWEB_CONFIG not existing";
        if [ "$1" = "stop" ]; then exit 0;
        else exit 6; fi; }

. /etc/rc.status
rc_reset

. /install/apache-tomcat-6.0.32-allfaweb/bin/setenv.sh;

case "$1" in
    start)
        echo -n "Starting ALLFAweb ";
        $ALLFAWEB_BIN \
           -user tomcat \
           -home $JAVA_HOME \
           -Dcatalina.home=$CATALINA_HOME \
           -pidfile $ALLFAWEB_PID \
           -outfile $CATALINA_HOME/logs/catalina.out \
           -errfile $CATALINA_HOME/logs/catalina.err \
           -cp $CLASSPATH org.apache.catalina.startup.Bootstrap

        rc_status -v
        ;;
    stop)
        echo -n "Shutting down ALLFAweb "
        $ALLFAWEB_BIN \
            -stop \
            -pidfile $ALLFAWEB_PID \
            org.apache.catalina.startup.Bootstrap

        rc_status -v
        ;;
    restart)
        $0 stop
        $0 start
        rc_status
        ;;
    status)
        echo -n "Checking for service ALLFAweb ";
        /sbin/checkproc $ALLFAWEB_BIN
        rc_status -v
        ;;
    *)
        echo "Usage: $0 {start|stop|status|restart}"
        exit 1
        ;;
esac
rc_exit 
```

我使用的系统是 SUSE SP2：

```
# uname -a
Linux testmachine 3.0.51-0.7.9-default #1 SMP Thu Nov 29 22:12:17 UTC 2012  x86_64 x86_64 x86_64 GNU/Linux 
```

任何帮助将不胜感激！提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:30:44.227

您应该使用系统属性而不是环境变量。检查 Tomcat 的[bin/daemon.sh](http://svn.apache.org/viewvc/tomcat/tc7.0.x/trunk/bin/daemon.sh?view=markup)脚本的源代码，该脚本在启动时将所有标准变量传递给 Tomcat。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:47:02.587

我找到了。据称原因是起初我以root身份启动Tomcat 6，*然后*将文件的所有权更改为用户“tomcat”。根进程以适当的权限在整个文件系统中写入文件，即“tomcat”用户无法读取它们。

“tomct”用户的默认 shell 是 /bin/sh 而不是 /bin/bash

我还删除了 $CATALINA_HOME/work 中的文件，并重命名了我的自定义 env var 指向的目录（以及相应的 env var）。

在 / 目录中还有一些从 log4j 生成的日志文件，这些也都消失了，现在一切都按预期工作了:)

感谢您的所有反馈，在这 3 天的挫折中，您让我继续前进 :)

干杯!

# c - C中的简单管道解释？

> ID：14340249
> 
> 赞同：0
> 
> 时间：2013-01-15T14:49:49.413
> 
> 标签：c, pipe, output

我需要管道 3 个程序： AddWith5.c AddWith2.c MultiplyWith3.c

我的代码遵循这种模式：

```
int main(){
    int x;
    scanf("%i",&x);
    printf("%i",x*3);
    return 0;
} 
```

我需要对它们进行管道传输，以便获得以下输出： ((x+5)+2)*3

（f1.txt 包含数字 2）

有人能帮我吗？

我试过： `AddWith5.c | AddWith2.c | MultiplyWith3.c < f1.txt > f2.txt`

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:52:16.187

管道是从左到右读取的，因此必须将输入提供给管道中的“头”（最左边）程序：

```
$ AddWith5 < f1.txt | AddWith2 | MultiplyWith3 
```

此外，您不要直接调用 C 文件，首先需要将每个文件单独编译成具有上述名称的二进制文件。

顺便说一句，这与 C 无关。程序也可以是 shell 脚本，或者用任何其他编程语言编写，在这个级别上没关系。

# php - 在一个输入按钮中传递两个项目

> ID：14340257
> 
> 赞同：-1
> 
> 时间：2013-01-15T14:50:20.287
> 
> 标签：php, mysql

我有一个简单的表格，每行都有一个接受和拒绝按钮。如果您按接受，我需要它根据唯一引用将 10 添加到 MYSQL 列。如果拒绝添加具有相同引用的 20 个（每行一个），我有以下代码来创建表格和按钮。*（连接等已取出）*

```
<form Action="leaveupdate.php?" method="POST" >
$query= "
SELECT t0.*, t1.id_user as t1user, t1.name as t1name
FROM $loc t0
LEFT JOIN login1st t1 ON t0.User_id = t1.id_user
WHERE t0.status >=10 and status <20 ORDER BY Date_Input ASC
";
$result = mysql_query($query);
$row = mysql_fetch_assoc($result);
$fieldCount = mysql_num_fields($result);
echo "<TABLE border='1' cellspacing='0' cellpadding='15' id='sort_table' width='490px'>    <thead><TR bgcolor=#ffffff>";
?>
<legend>Research results!</legend>
<table border="1" width="75%" cellpadding="2" cellspacing="0">
<tr>
        <TD align="center">Requestor</TD>
        <TD align="center">Leave type</TD>
        <TD align="center">Date requested</TD>
        <TD align="center">Date Requested</TD>
        <TD align="center">ACCEPT</TD>
        <TD align="center">DECLINE</TD>
</tr>
        <?
echo "</TR></thead><tbody>";
while ($row = mysql_fetch_assoc($result)) {
echo '<tr>';
echo'<td align=middle>' . $row["t1name"]                      . '</td>' ; // Requestor
echo'<td align=middle>' . $res                       . '</td>' ; // Status
echo'<td align=middle>' . date("l", $row["date_effected"]) . "<BR>". date("j-M-Y",   $row["date_effected"])     . '</td>' ; // Day off
echo'<td align=middle>' . date("d-m-y @ H:i", $row["Date_Input"])             . '</td>'   ; //Date Requested
echo'</td><td><input type="submit" name="edit" value="10" class="buttons2">';//Add 10
echo'</td><td><input type="submit" name="edit" value="20" class="buttons3">';//Add 20
echo'<td alighn=middle>'.$row["Unique_id"].'</td>';Just for testing not needed will be removed from the table
echo '</tr>';
}
echo "</tbody></TABLE>";
?>
</table>
</body>
</html> 
```

这已发布（我使用 get 来查看会发生什么但会更改）到此页面

```
<?php
$loc = $fgmembersite->UserLocation();
$conn = mysql_connect("****","******","Pword");
if (!$conn) die ("Could not connect MySQL");
mysql_select_db("****",$conn) or die ("Could not open database");
if(!isset($_POST['edit']))
{
//add die here
}

$IU            =    ($_POST['Unique_id']);
$change            =    ($_POST['edit']);
$sql_query_update = "update $loc set status = status+$change where unique_id = IU";
mysql_query( $sql_query_update );
echo $sql_query_update;//only for testing will be removed
mysql_Close()
?> 
```

如您所见，我希望有两个变量 IU 和更改，但无法弄清楚。可能很容易，但如果有人可以提供帮助，那将很有帮助。我一直在阅读网络并看到对 AJAX 的引用，但从未使用或研究过它。谢谢京东

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:08:44.637

不要尝试通过提交按钮传输多条数据，而是使用隐藏的`<input>`：

```
<form ... >
    <input type="hidden" name="unique_id" value="<?php echo htmlspecialchars($row['Unique_id']); ?>" />

    ...
</form> 
```

该 ID 将在`$_POST['unique_id']`.

还可以考虑添加检查以防止用户随意设置更改金额。如果您只想更改`10`或`20`然后通过服务器端检查强制执行该更改 - 目前您正在接受通过用户输入更改的实际金额。

* * *

旁注：该`mysql_*`库已弃用，建议升级到 PDO 或 MySQLi。您的代码容易受到 SQL 注入的影响，您应该升级您的 MySQLi 库并使用 Prepared Statement 或至少使用适当的转义函数（`mysql_real_escape_string()`在这种情况下）。

# android - Activity 停止/重新启动时的 postInvalidateDelayed( ) 和 onDraw( ) 行为

> ID：14340260
> 
> 赞同：0
> 
> 时间：2013-01-15T14:50:27.137
> 
> 标签：android

在我的应用程序中，我试图通过调用在 5 秒后更改视图的状态/显示`postInvalidateDelayed(5000)`。

我对以下两种情况有疑问`postInvalidateDelayed( )`和行为：`onDraw( )`

**场景一：**

1.  postInvalidateDelayed(5000) 在当前活动“活动 A”中调用视图“视图 V”
2.  在无效事件可以传递到“视图 V”之前，用户导航离开当前的“活动 A”（即“活动 A”仍在活动堆栈上）
3.  用户使用后退按钮/方法导航回“活动 A” `super.onBackPressed( )`（即“活动 A”未重新创建）

**场景二：**

1.  `postInvalidateDelayed(5000)`在当前活动“活动 A”中调用视图“视图 V”
2.  在无效事件可以通过按下“主页”按钮传递到“视图 V”之前，用户导航离开当前的“活动 A”（即“活动 A”仍在活动堆栈上）
3.  用户通过再次启动应用程序导航回“活动 A”（即“活动 A”没有被重新创建）

在上述两种情况下，无效事件会被传递到“视图 V”还是会丢失无效事件？我观察到 invalidate 事件在这些场景中丢失了。确保在重新启动/恢复活动（活动 A）时可以传递此类无效事件的最佳方法是什么？

将不胜感激任何投入。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:34:05.970

这有什么需要？你可以打电话给`postInvalidateDelayed(5000)`你的`onResume()`.

# macos - OSX 上的 tmux - 锁定服务器/会话不起作用

> ID：14340261
> 
> 赞同：1
> 
> 时间：2013-01-15T14:50:29.557
> 
> 标签：macos, locking, tmux

我在 OSX Mountain Lion 上。我已将 tmux.conf 配置为锁定屏幕，但屏幕只会闪烁，不会发生锁定。（仅供参考，当我使用 GNU-screen 时，屏幕确实锁定了）。

我的系统没有 lock/slock 或 vlock，我也无法在 homebrew 或 macports 上找到这些。我知道 Screen 使用自己的内部锁定，而 tmux 使用外部锁定。我不在乎是否要求我输入新的密码或使用系统密码。那么如何让 tmux 锁定会话/终端呢？

```
# Screen lock
bind-key C-x    lock-server
bind-key x      lock-server
bind-key -n M-x lock-server
set-option -g   lock-after-time 0
set-option -g   lock-server on
# set-option -g   lock-command "vlock" 
```

ps 我知道其他替代方案，但这些通常需要鼠标（热角）或 Mac 键盘（弹出键）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-22T21:43:03.480

我很失望没有看到任何实际锁定屏幕的有效响应。我将继续寻找一种方法来正确锁定终端会话本身，但与此同时我确实有一个功能替代方案。

通过在命令行上运行命令，您可以锁定整个 mac。以下命令将使它发生：

```
/System/Library/CoreServices/Menu\ Extras/User.menu/Contents/Resources/CGSession -suspend 
```

[您可以在此页面](http://osxdaily.com/2012/03/30/lock-mac-desktop-command-line/)上找到更多关于正在发生的事情的信息。

将该命令绑定到：

```
set-option -g lock-command 
```

而且您应该有一种方法可以在功能上锁定您的会话。我知道锁定整台机器并不是最理想的结果，但这至少是目前可行的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T02:09:51.473

这不是您预期的确切答案。@chris-johnsen 给出了关于锁定 OSX 的最佳答案。但是，我确实为终端找到了两个屏幕保护程序。它不会*锁定*终端，但会显示屏幕空白。

1.  tmux 有一个内置的时间功能，可以使屏幕空白并显示时钟。它位于窗口的本地。

2.  [`cmatrix`](http://www.asty.org/cmatrix/)是一个终端程序，可以像电影中一样显示矩阵屏幕。缺点是它不会锁定并且会占用一些 CPU。但这很有趣。它可以通过[自制软件安装](http://brew.sh/)

以下是如何让它工作：

```
brew install cmatrix 
```

然后将此添加到您的`~/.tmux.conf`：

```
set -g lock-command "cmatrix -s -b"
set -g lock-after-time 90
set -g lock-server on 
```

在 90 秒不活动时，它将显示。使用命令`tmux lock-server`对其进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T03:45:16.057

据我所知，OS X 不提供*tmux*所需的任何 tty 锁定程序的变体。

您可能需要找到第三方 tty 锁定程序，尝试[从相关操作系统移植一个](https://stackoverflow.com/q/4891791/193688)，或者编写自己的。

# perl - 多寄存器嵌套标签的 Perl XML 编辑

> ID：14340263
> 
> 赞同：2
> 
> 时间：2013-01-15T14:50:34.413
> 
> 标签：perl, xml-parsing

我有一个嵌套的 XML 标记，需要在产品 XML 中为 ExternalId 附加 PF

输入 XML：

```
<Products>
    <Product>
      <ExternalId>317851</ExternalId>
    </Product>
    <Product>
      <ExternalId>316232</ExternalId>
    </Product>
    <Product>
      <ExternalId>13472</ExternalId>
    </Product>
</Products> 
```

期望的输出结果：

```
 <Products>
        <Product>
          <ExternalId>PF317851</ExternalId>
        </Product>
        <Product>
          <ExternalId>PF316232</ExternalId>
        </Product>
        <Product>
          <ExternalId>PF13472</ExternalId>
        </Product>
    </Products> 
```

我尝试过使用 XML Simple。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:12:24.017

使用模块的一种方式`XML::Twig`。

内容`script.pl`：

```
#!/usr/bin/env perl

use warnings;
use strict;
use XML::Twig;

{
    my $twig = XML::Twig->new( 

        twig_handlers => {
            'Product/ExternalId' => sub {
                $_->prefix( 'PF' );
            }   
        },  

        pretty_print => 'indented',

    )->parsefile( shift )->print;
} 
```

像这样运行它：

```
perl-5.14.2 script.pl xmlfile 
```

这会产生：

```
<Products>                                                                                                                                                                                                                                   
  <Product>                                                                                                                                                                                                                                  
    <ExternalId>PF317851</ExternalId>                                                                                                                                                                                                        
  </Product>                                                                                                                                                                                                                                 
  <Product>                                                                                                                                                                                                                                  
    <ExternalId>PF316232</ExternalId>                                                                                                                                                                                                        
  </Product>
  <Product>
    <ExternalId>PF13472</ExternalId>
  </Product>
</Products> 
```

* * *

**更新**：要打印到文件，我添加了两项修改，一行打开输出文件，以及将输出文件`print`的文件句柄作为参数打印的方法

结果是：

```
#!/usr/bin/env perl

use warnings;
use strict;
use XML::Twig;

die qq|Usage: perl $0 <input-xml> <output-xml>\n| unless @ARGV == 2;

open my $ofh, '>', pop or die qq|ERROR: Cannot open output file\n|;

{
    my $twig = XML::Twig->new( 

        twig_handlers => {
            'Product/ExternalId' => sub {
                $_->prefix( 'PF' );
            }   
        },  

        pretty_print => 'indented',

    )->parsefile( shift )->print( $ofh );
} 
```

它的调用方式如下：

```
perl-5.14.2 script.pl xmlfile outfile 
```

# c# - 在与阶段我需要创建一个对象披露按钮方法？

> ID：14340269
> 
> 赞同：-2
> 
> 时间：2013-01-15T14:50:39.117
> 
> 标签：c#, .net, webforms

`LinkButton`我有这个方法，由用户在客户端调用（回发） ：

```
protected void myOwnMethod_Click(object sender, EventArgs e)
{
    myObject.Word = "Word";
} 
```

好吧，`myObject`之前必须已经实例化，所以它必须在此处和之后（在`Page_Load`状态下）可以访问。

事实上，在`Page_Load`我得到实例化它

> “System.NullReferenceException：对象引用未设置为对象的实例。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:53:44.460

如果必须在每次回发时重新创建一个对象，最好的办法是在`Page_Init`

```
protected void Page_Init(object sender, EventArgs e)
{
    myObject = new MyObject();
} 
```

注意：如果动态创建的对象有/使用视图状态，它*应该*自动恢复`Page_Init`。例如：一个文本框保留它的价值。

# php - PHP、Javascript 和 Ruby 的测试用例脚本

> ID：14340273
> 
> 赞同：0
> 
> 时间：2013-01-15T14:50:45.483
> 
> 标签：php, javascript, ruby

我正在编写几个脚本测试用例，以在 OOP 和一般脚本场景的不同场景下测试 PHP/Javascript/Ruby 的内存和 cpu 时间。

到目前为止，我已经完成了：
1) 100 万次迭代，每次运行相同的函数并将项目添加到堆栈中，
2) Fibanacci 序列到解释器的最大值（主要使用浮点数），

我正在努力想出好的测试用例会演示哪个更强大以及在哪里。我非常感谢关于运行场景的任何想法，因为我自己已经写了几个，但我不觉得它们比前两个已经做的多得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:07:38.937

看看[计算机语言基准游戏](http://benchmarksgame.alioth.debian.org/)。你会在那里找到很多例子。

# matlab - 如何使用两个矩阵计算余弦相似度

> ID：14340275
> 
> 赞同：6
> 
> 时间：2013-01-15T14:50:56.990
> 
> 标签：matlab, matrix, cosine-similarity

我有两个矩阵，A（维度 M x N）和 B（N x P）。事实上，它们是向量的集合——A中的行向量，B中的列向量。我想得到每一对的余弦相似度分数`a`，`b`其中`a`是矩阵A的向量（行）和矩阵`b`的向量（列） B.

我首先将矩阵相乘，得到矩阵`C`（维度 M x P）。

> C = A*B

但是，为了获得余弦相似度分数，我需要将每个值除以`C(i,j)`两个对应向量的范数。您能建议在 Matlab 中执行此操作的最简单方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T14:59:36.520

最简单的解决方案是首先使用元素乘法和沿所需维度求和来计算范数：

```
normA = sqrt(sum(A .^ 2, 2));
normB = sqrt(sum(B .^ 2, 1)); 
```

`normA`和`normB`现在分别是列向量和行向量。`A * B`用`normA`and划分对应的元素`normB`，使用[`bsxfun`](http://www.mathworks.com/help/matlab/ref/bsxfun.html)如下：

```
C = bsxfun(@rdivide, bsxfun(@rdivide, A * B, normA), normB); 
```

# prestashop - Prestashop 1.5.3 在启动时显示自定义页面

> ID：14340278
> 
> 赞同：0
> 
> 时间：2013-01-15T14:51:05.617
> 
> 标签：prestashop

我想在启动时显示一个自定义页面，并在菜单中提供指向“真实”商店的链接。如何在启动时将 prestashop 重定向到我的自定义页面？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:43:06.460

我发现您可以使用您喜欢的任何控制器更改 Dispatcher.php 中的 $default_controller。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:13:00.210

我不认为你可以告诉 Prestashop 显示一个自定义页面（至少不用乱搞）。但是由于一切都与模块一起工作，您可以删除默认显示的所有模块，并添加您自己的模块。

# jquery - jquery中带有悬停功能的鼠标移出事件

> ID：14340281
> 
> 赞同：0
> 
> 时间：2013-01-15T14:51:39.383
> 
> 标签：jquery, jquery-hover, mouseout

正如标题所说，我想在 jQuery 中使用悬停功能执行鼠标移出事件

我已经创建了评级量表，它的表现非常好，但我的问题是当光标从量表中取出时，活动量表将保留在最后一次取出鼠标指针的位置。

我用 Hover 函数创建了代码，但我不知道如何`mouse_out`用它来执行事件。

我想要的是当`mouse_out`事件被触发时整个规模应该是不活动的

代码如下：

HTML：

```
<ul class="rating">
    <li><a href="#" id="rate_0"><img src="http://cdn1.iconfinder.com/data/icons/token/Token,%20128x128,%20PNG/Star-Favorites.png" width="16" height="16" id="image_0" /></a></li>
    <li><a href="#" id="rate_1"><img src="http://cdn1.iconfinder.com/data/icons/token/Token,%20128x128,%20PNG/Star-Favorites.png" width="16" height="16" id="image_1" /></a></li>
    <li><a href="#" id="rate_2"><img src="http://cdn1.iconfinder.com/data/icons/token/Token,%20128x128,%20PNG/Star-Favorites.png" width="16" height="16" id="image_2" /></a></li>
    <li><a href="#" id="rate_3"><img src="http://cdn1.iconfinder.com/data/icons/token/Token,%20128x128,%20PNG/Star-Favorites.png" width="16" height="16" id="image_3" /></a></li>
    <li><a href="#" id="rate_4"><img src="http://cdn1.iconfinder.com/data/icons/token/Token,%20128x128,%20PNG/Star-Favorites.png" width="16" height="16" id="image_4" /></a></li>
    <li><a href="#" id="rate_5"><img src="http://cdn1.iconfinder.com/data/icons/token/Token,%20128x128,%20PNG/Star-Favorites.png" width="16" height="16" id="image_5" /></a></li>
    <li><a href="#" id="rate_6"><img src="http://cdn1.iconfinder.com/data/icons/token/Token,%20128x128,%20PNG/Star-Favorites.png" width="16" height="16" id="image_6" /></a></li>
    <li><a href="#" id="rate_7"><img src="http://cdn1.iconfinder.com/data/icons/token/Token,%20128x128,%20PNG/Star-Favorites.png" width="16" height="16" id="image_7" /></a></li>
    <li><a href="#" id="rate_8"><img src="http://cdn1.iconfinder.com/data/icons/token/Token,%20128x128,%20PNG/Star-Favorites.png" width="16" height="16" id="image_8" /></a></li>
    <li><a href="#" id="rate_9"><img src="http://cdn1.iconfinder.com/data/icons/token/Token,%20128x128,%20PNG/Star-Favorites.png" width="16" height="16" id="image_9" /></a></li>
    <li><a href="#" id="rate_10"><img src="http://cdn1.iconfinder.com/data/icons/token/Token,%20128x128,%20PNG/Star-Favorites.png" width="16" height="16" id="image_10" /></a></li>
</ul> 
```

CSS：

```
.rating{ 
list-style:none;
}
.rating li{
display:block;
float:left;
}
.rating li a{
margin: 2px;
padding: 2px;
float: left;
font-size: 1.3em;
text-align: center;
font-weight: normal;
color: #6d6e70;
text-decoration:none;
} 
```

jQuery：

```
$('a[id^="rate_"]').hover(function() {

    //alert($(this).attr('id'));
    var ID = $(this).attr('id');

    var num = ID.substr(5);

    //alert(num);
    var i = 0;

    for (var j = 0; j <= 10; j++) {
        $('#image_' + j).attr('src','http://cdn1.iconfinder.com/data/icons/token/Token,%20128x128,%20PNG/Star-Favorites.png');
    }

    for (i = 0; i <= num; i++) {
        $('#image_' + i).attr('src','http://cdn1.iconfinder.com/data/icons/DarkGlass_Reworked/128x128/apps/keditbookmarks.png');
    }

}); 
```

这是[小提琴](http://jsfiddle.net/WcX5p/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:57:55.820

尝试添加这个：

```
$(".rating").mouseleave(function() {
  $(this).find('img').attr('src','http://cdn1.iconfinder.com/data/icons/token/Token,%20128x128,%20PNG/Star-Favorites.png');
}) 
```

Mouseleave 仅在您离开整体时才会发生，`.rating`并且如果您在内部从一个元素移动到另一个元素，则不会被触发`.rating`（就像 mouseout 一样）

这是一个演示：http: [//jsfiddle.net/WcX5p/1/](http://jsfiddle.net/WcX5p/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:02:04.413

看到这个：[演示](http://jsfiddle.net/WcX5p/3/)

```
$('a[id^="rate_"]').hover(function() {

//alert($(this).attr('id'));
var ID = $(this).attr('id');
var num = ID.substr(5);
//alert(num);
var i = 0;
for (var j = 0; j <= 10; j++) {
    $('#image_' + j).attr('src','http://cdn1.iconfinder.com/data/icons/token/Token,%20128x128,%20PNG/Star-Favorites.png');
}
for (i = 0; i <= num; i++) {
    $('#image_' + i).attr('src','http://cdn1.iconfinder.com/data/icons/DarkGlass_Reworked/128x128/apps/keditbookmarks.png');
}
},function() {
for (var j = 0; j <= 10; j++) {
    $('#image_' + j).attr('src','http://cdn1.iconfinder.com/data/icons/token/Token,%20128x128,%20PNG/Star-Favorites.png');
}
}); 
```

# python - 如何在 Python 中写入文件中的特定行？

> ID：14340283
> 
> 赞同：4
> 
> 时间：2013-01-15T14:51:40.827
> 
> 标签：python, python-2.7, io

我有一个文件格式：

```
xxxxx
yyyyy
zzzzz
ttttt 
```

我需要在 xxxxx 和 yyyyy 行之间写入文件：

```
xxxxx
my_line
yyyyyy
zzzzz
ttttt 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T14:55:11.693

```
with open('input') as fin, open('output','w') as fout:
    for line in fin:
        fout.write(line)
        if line == 'xxxxx\n':
           next_line = next(fin)
           if next_line == 'yyyyy\n':
              fout.write('my_line\n')
           fout.write(next_line) 
```

**这将在文件中的每次**出现`xxxxx\n`和之间插入您的行`yyyyy\n`。

另一种方法是编写一个函数来产生行，直到它看到`xxxxx\nyyyyy\n`

```
 def getlines(fobj,line1,line2):
     for line in iter(fobj.readline,''):  #This is necessary to get `fobj.tell` to work
         yield line
         if line == line1:
             pos = fobj.tell()
             next_line = next(fobj):
             fobj.seek(pos)
             if next_line == line2:
                 return 
```

然后你可以使用这个直接传递给`writelines`：

```
with open('input') as fin, open('output','w') as fout:
    fout.writelines(getlines(fin,'xxxxx\n','yyyyy\n'))
    fout.write('my_line\n')
    fout.writelines(fin) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T15:02:22.230

如果文件很小，那么您可以简单地使用`str.replace()`：

```
>>> !cat abc.txt
xxxxx
yyyyy
zzzzz
ttttt

>>> with open("abc.txt") as f,open("out.txt",'w') as o:
    data=f.read()
    data=data.replace("xxxxx\nyyyyy","xxxxx\nyourline\nyyyyy")
    o.write(data)
   ....:     

>>> !cat out.txt
xxxxx
yourline
yyyyy
zzzzz
ttttt 
```

对于一个巨大的文件，使用 mgilson 的方法。

# php - Apache 服务器不允许 php 打开上层目录中的文件

> ID：14340287
> 
> 赞同：1
> 
> 时间：2013-01-15T14:51:49.623
> 
> 标签：php, apache, permissions

我有服务器安全问题。问题是从服务器上的弱编程站点之一传播的病毒。目录结构如下（DirectAdmin）：domains

```
-domain1.com
--public_html
-domain2.com
--public_html
-domain3.com
--public_html
-domain4.com
--public_html 
```

我在找什么：很久以前，我提出了一些关于阻止包含来自上层目录的文件的可能性（找不到它，因为不知道它是如何被调用的）。

我想要的是阻止在 PHP 中打开文件的可能性： 从 public_html/index.php 调用脚本

*   我希望它能够 fopen/file_get_contents/require/include 位于 public_html 和子目录中的文件
*   我还想阻止访问 public_html 父目录中的文件的可能性

问题是因为服务器管理员使用相同的用户来拥有 ftp 文件以使用 apache 执行它们。病毒传播是因为我不能拒绝“写入”这些文件。

# javascript - 在 jQuery 中关闭对话框

> ID：14340288
> 
> 赞同：0
> 
> 时间：2013-01-15T14:51:50.287
> 
> 标签：javascript, jquery

我的页面中有一个带有`more info`按钮的日历。

单击该按钮会打开，但不会关闭。

我怎样才能关闭它？

按钮：

```
$('a.cmoreinf').live('click', function() {
    $('.ccontent').each(function() {
        $(this).css('display','none');
    });
    $(this).closest('.calsingleentry').find('.ccontent').css('display','block');
    return false;
}); 
```

[日历页面](http://tranceil.fm/?page_id=43)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:00:42.070

我没有真正回答这个问题所需的所有信息，但我相信您希望在第一次点击时出现模式，在第二次点击时消失，在第三次点击时出现等等......基本上切换显示属性。如果是这样...

```
$('a.cmoreinf').on('click', function(e){
  e.stopPropagation();
  $('.ccontent').hide();
  $(this).closest('.calsingleentry').find('.ccontent').toggle();
}); 
```

[jQuery 切换（）](http://api.jquery.com/toggle/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:06:01.107

该类`ccontent`位于 div 内`calsingleentry`。

用这个：

```
$('a.cmoreinf').live('click', function() {
    $('calsingleentry').find('.ccontent').each(function() {
        $(this).css('display','none');
    });
    $(this).closest('.calsingleentry').find('.ccontent').css('display','block');
    return false;
}); 
```

# file-upload - selenium - 创建变量但似乎不可用

> ID：14340289
> 
> 赞同：1
> 
> 时间：2013-01-15T14:51:51.870
> 
> 标签：file-upload, selenium, selenium-ide

我想设置一个变量`$import_location`，以便我可以为多次使用设置一次，而不是将其硬编码到每个正在上传文件的测试用例中。

我使用 store 命令设置了变量 OK。

我正在尝试在上传屏幕上使用它，但不断获得文字 ${variable name}

如何将导入位置设置为上面设置的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:03:45.243

我只是没有运行实际的“变量设置”脚本。我已经运行它并创建了我能够使用它的变量。

# android - 直接安全地分发 Android 应用程序

> ID：14340299
> 
> 赞同：0
> 
> 时间：2013-01-15T14:52:14.030
> 
> 标签：android, security, app-store

我正在开发一个付费应用程序，我将把它放在 google play 商店中，但我想免费赠送一些应用程序的副本给审阅者，用于促销等。我知道我可以链接到 apk 文件但是这是不安全的，因为任何人都可以复制并重新分发它。我的问题是，有没有办法在 google play 商店之外但以安全的方式分发应用程序？是否有其他服务允许您上传您的 apk 并将应用程序分发给特定的个人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T19:41:45.200

如果您担心人们重新分发您的 APK，任何可以安装您的应用程序的人都可以从他们的手机中[检索 APK](http://notepad2.blogspot.co.uk/2012/05/android-save-your-apk-files-from-google.html)，然后将该 APK 提供给其他人（如果他们愿意）。

专用的 android 应用分发服务可能具有类似 Play-Store 的有用功能，但如果这对您来说不是必需的，那么您只需要一种非公共文件分发方法。

将文件分发给一组命名的个人的一些可能方法：

*   直接通过电子邮件发送（取决于您的 apk 的大小）
*   使用基于 Web 的文件托管 + 分发工具（例如[sharefile.com](http://www.sharefile.com)）发送它
*   将其托管在具有您控制的登录名的网站上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:59:45.353

由于我目前面临类似的任务，因此我研究了[Zubhium](https://www.zubhium.com/docs/introduction/)和[HockeyApp](http://hockeyapp.net/)。但是，我还没有评估他们的潜力，我只是浏览了网站。也许你可以从那里开始。

# jquery - 如何在全尺寸固定背景上正确定位元素？- 适用于不同的分辨率

> ID：14340301
> 
> 赞同：0
> 
> 时间：2013-01-15T14:52:15.607
> 
> 标签：jquery, html, css, position

我有一个固定在页面分辨率的背景图像，它使用 jquery 根据用户的监视器分辨率自动重新调整大小。这很好用，但是我知道要在顶部添加两个 div，这将是透明的，其中 HREF 悬停在背景图像的两个部分上。当我创建两个 div 时，我给了它们一个绝对位置，然后容器它们处于相对位置。但是，当我更改屏幕分辨率时，div 的更改位置。

**html:**

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title></title>
<link rel="stylesheet" type="text/css" href="css/style.css" media="screen">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script type = "text/javascript">
$(window).load(function() {    

    var theWindow        = $(window),
        $bg              = $("#bg"),
        aspectRatio      = $bg.width() / $bg.height();

    function resizeBg() {

        if ( (theWindow.width() / theWindow.height()) < aspectRatio ) {
            $bg
                .removeClass()
                .addClass('bgheight');
        } else {
            $bg
                .removeClass()
                .addClass('bgwidth');
        }

    }

    theWindow.resize(resizeBg).trigger("resize");

});
</script>
</head>
<body>
<div id="container">
    <img src="images/image.png" id="bg" alt="">
    <a id="company-procedures-link" href=""></a>
    <a id="company-documents-link" href=""></a>
</div>
</body>
</html> 
```

CSS：

```
#bg { position: fixed; top: 0; left: 0; }
.bgwidth { width: 100%; }
.bgheight { height: 100%; }

#container{
position:relative;
width:100%
height:100%
}

#procedures-link{
    position: absolute;
    top: 20em;
    left: 50em;
    width:200px;
    height:100px;
    border:1px solid;
}

#documents-link{
    position: absolute;
    top: 20em;
    left: 50em;
    width:200px;
    height:100px;
    border:1px solid;
} 
```

有没有更好的方法来实现这一目标？还是我错误地使用了定位？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:29:26.407

简单的方法是使用[background-size](https://developer.mozilla.org/en-US/docs/CSS/background-size)，但 IE8 及以下不支持。

```
body {
  background:url(images/image.png) no-repeat;
  background-size:cover;
} 
```

# java - Java文件上的Java模式多行匹配

> ID：14340305
> 
> 赞同：1
> 
> 时间：2013-01-15T14:52:24.107
> 
> 标签：java, regex, multiline

我需要提取以下模式：

```
public void convert(String sourceName, String destName,
        ProgressListener progressListener, Decoder.Params decoderParams)
        throws JavaLayerException 
```

或者它可以有以下形式

```
public void convert(String sourceName, String destName) 
```

或者

```
public void convert(String sourceName, String destNam)
        throws JavaLayerException 
```

我正在使用以下模式，但该模式仅识别第二个原型，而不是第一和第三个。正在使用的模式是：

```
Pattern exp = Pattern.compile("([^(\n\t]*)"+Pattern.quote(obracket)+"([^()\n\t]*)"+Pattern.quote(cbracket));
where obracket="(" and cbracket=")"; 
```

任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:05:20.427

您可以将此正则表达式与`singleline`模式一起使用..

```
\\s+(public|private|protected)?\\s+\\w+\\s+[\w$]+\\([^()]*\\)\\s+(throws\\s+[\\w$]+)? 
```

# html - 背景图像不会出现在 IE 8 中

> ID：14340306
> 
> 赞同：0
> 
> 时间：2013-01-15T14:52:26.597
> 
> 标签：html, css, background, background-image

我将背景图像应用于 body 元素，并且只获得背景颜色。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
<style type="text/css">
<!--
body {
    background:#FF6CC5 url('assets/pink_out.png') no-repeat top center;
    margin: 0;
    padding: 0;
    color: #000;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 100%;
    line-height: 1.4;
    width:100%;
    height:100%;
}

/* ~~ Element/tag selectors ~~ */
ul, ol, dl { /* Due to variations between browsers, it's best practices to zero padding and margin on lists. For consistency, you can either specify the amounts you want here, or on the list items (LI, DT, DD) they contain. Remember that what you do here will cascade to the .nav list unless you write a more specific selector. */
    padding: 0;
    margin: 0;
}
h1, h2, h3, h4, h5, h6, p {
    margin-top: 0;   /* removing the top margin gets around an issue where margins can escape from their containing div. The remaining bottom margin will hold it away from any elements that follow. */
    padding-right: 15px;
    padding-left: 15px; /* adding the padding to the sides of the elements within the divs, instead of the divs themselves, gets rid of any box model math. A nested div with side padding can also be used as an alternate method. */
}
a img { /* this selector removes the default blue border displayed in some browsers around an image when it is surrounded by a link */
    border: none;
}

/* ~~ Styling for your site's links must remain in this order - including the group of selectors that create the hover effect. ~~ */
a:link {
    color:#FFF;
    text-decoration: underline; /* unless you style your links to look extremely unique, it's best to provide underlines for quick visual identification */
}
a:visited {
    color: #FFF;
    text-decoration: underline;
}
a:hover, a:active, a:focus { /* this group of selectors will give a keyboard navigator the same hover experience as the person using a mouse. */
    text-decoration: none;
}

/* ~~ this container surrounds all other divs giving them their percentage-based width ~~ */
.container {
    padding-top: 175px;/***************COPY************/
    width: 1100px;
    max-width: 1260px;/* a max-width may be desirable to keep this layout from getting too wide on a large monitor. This keeps line length more readable. IE6 does not respect this declaration. */
    min-width: 780px;/* a min-width may be desirable to keep this layout from getting too narrow. This keeps line length more readable in the side columns. IE6 does not respect this declaration. */
    margin: 0 auto; /* the auto value on the sides, coupled with the width, centers the layout. It is not needed if you set the .container's width to 100%. */
}

/* ~~ the header is not given a width. It will extend the full width of your layout. It contains an image placeholder that should be replaced with your own linked logo ~~ */
.header {
    width: 1000px;
    margin: 0 auto;
    text-align: center;
    background: none;
}

/* ~~ These are the columns for the layout. ~~ 

1) Padding is only placed on the top and/or bottom of the divs. The elements within these divs have padding on their sides. This saves you from any "box model math". Keep in mind, if you add any side padding or border to the div itself, it will be added to the width you define to create the *total* width. You may also choose to remove the padding on the element in the div and place a second div within it with no width and the padding necessary for your design.

2) No margin has been given to the columns since they are all floated. If you must add margin, avoid placing it on the side you're floating toward (for example: a right margin on a div set to float right). Many times, padding can be used instead. For divs where this rule must be broken, you should add a "display:inline" declaration to the div's rule to tame a bug where some versions of Internet Explorer double the margin.

3) Since classes can be used multiple times in a document (and an element can also have multiple classes applied), the columns have been assigned class names instead of IDs. For example, two sidebar divs could be stacked if necessary. These can very easily be changed to IDs if that's your preference, as long as you'll only be using them once per document.

4) If you prefer your nav on the right instead of the left, simply float these columns the opposite direction (all right instead of all left) and they'll render in reverse order. There's no need to move the divs around in the HTML source.

*/
.sidebar1 {
    float: left;
    width: 20%;
    background-color: #FFF;
}
.content {
    padding: 10px 0;
    width: 80%;
    float: left;
}

/* ~~ This grouped selector gives the lists in the .content area space ~~ */
.content ul, .content ol { 
    padding: 0 15px 15px 40px; /* this padding mirrors the right padding in the headings and paragraph rule above. Padding was placed on the bottom for space between other elements on the lists and on the left to create the indention. These may be adjusted as you wish. */
}

/* ~~ The navigation list styles (can be removed if you choose to use a premade flyout menu like Spry) ~~ */
ul.nav {
    list-style: none; /* this removes the list marker */
    border-top: 1px solid #666; /* this creates the top border for the links - all others are placed using a bottom border on the LI */

}
ul.nav li {
    border-bottom: 1px solid #666; /* this creates the button separation */
}
ul.nav a, ul.nav a:visited { /* grouping these selectors makes sure that your links retain their button look even after being visited */
    display: block; /* this gives the link block properties causing it to fill the whole LI containing it. This causes the entire area to react to a mouse click. */
    text-decoration: none;
    color: #000;
    background-color: #FFF;
    padding-top: 6px;
    padding-right: 6px;
    padding-bottom: 6px;
    padding-left: 10px;
}
ul.nav a:hover, ul.nav a:active, ul.nav a:focus { /* this changes the background and text color for both mouse and keyboard navigators */
    background: #FFF;
    color: #FF6CC5;
}

/* ~~ The footer ~~ */
.footer {
    padding: 10px 0;
    position: relative;/* this gives IE6 hasLayout to properly clear */
    clear: both; /* this clear property forces the .container to understand where the columns end and contain them */
    background-color: none;
}

/* ~~ miscellaneous float/clear classes ~~ */
.fltrt {  /* this class can be used to float an element right in your page. The floated element must precede the element it should be next to on the page. */
    float: right;
    margin-left: 8px;
}
.fltlft { /* this class can be used to float an element left in your page. The floated element must precede the element it should be next to on the page. */
    float: left;
    margin-right: 8px;
}
.clearfloat { /* this class can be placed on a <br /> or empty div as the final element following the last floated div (within the #container) if the #footer is removed or taken out of the #container */
    clear:both;
    height:0;
    font-size: 1px;
    line-height: 0px;
}
.footer .footer a strong {
    text-align: center;
}
.footer .footer a strong {
    text-align: center;
}
.footer .footer {
    text-align: center;
}
.container .content p {
    color: #80181F;
}
.container .content p {
    font-weight: bold;
    color: #000;
}
-->
</style><!--[if lte IE 7]>
<style>
.content { margin-right: -1px; } /* this 1px negative margin can be placed on any of the columns in this layout with the same corrective effect. */
ul.nav a { zoom: 1; }  /* the zoom property gives IE the hasLayout trigger it needs to correct extra whiltespace between the links */
</style>
<![endif]-->

</head>

<body>

<div class="container">
  <div class="sidebar1">
    <ul class="nav">
      <li><a href="Index.html">Home</a></li>
      <li><a href="officers.html">Officers</a></li>
      <li><a href="events.html">Events</a></li>
      <li><a href="">Home</a></li></ul>
  </div>

  <div class="content">

 <p>&nbsp;&nbsp;Friday, October 19th, the Leadership class. T-Shirts, Hoodies, Eye Blacks, and Luminaries were sold to help support this awareness. </p>
</div>

 <!-- end .content --></div>

<div style="margin:0 auto;text-align:center;width:1000px;clear:both;">
<script language="JavaScript1.2">
<!--
/*
Cross browser Marquee script- © Dynamic Drive (www.dynamicdrive.com)
For full source code, 100's more DHTML scripts, and Terms Of Use, visit http://www.dynamicdrive.com
Credit MUST stay intact
*/

//Specify the marquee's width (in pixels)
var marqueewidth="1000px"
//Specify the marquee's height
var marqueeheight="333px"
//Specify the marquee's marquee speed (larger is faster 1-10)
var marqueespeed=3
//configure background color:
var marqueebgcolor="transparent"
//Pause marquee onMousever (0=no. 1=yes)?
var pauseit=0

//Specify the marquee's content (don't delete <nobr> tag)
//Keep all content on ONE line, and backslash any single quotations (ie: that\'s great):

var marqueecontent='<nobr><img src="assets/pink out 007.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 008.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 010.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 014.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 016.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 021.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 022.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 023.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 025.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 026.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 027.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 029.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 031.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 033.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 034.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 036.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 043.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 060.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 061.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 062.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 081.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 101.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 113.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 162.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 169.jpg" width="500" height="333" alt="pinkout"><img src="assets/pink out 179.jpg" width="500" height="333" alt="pinkout"></nobr>'

////NO NEED TO EDIT BELOW THIS LINE////////////
marqueespeed=(document.all)? marqueespeed : Math.max(1, marqueespeed-1) //slow speed down by 1 for NS
var copyspeed=marqueespeed
var pausespeed=(pauseit==0)? copyspeed: 0
var iedom=document.all||document.getElementById
if (iedom)
document.write('<span id="temp" style="visibility:hidden;position:absolute;top:-100px;left:-9000px">'+marqueecontent+'</span>')
var actualwidth=''
var cross_marquee, ns_marquee

function populate(){
if (iedom){
cross_marquee=document.getElementById? document.getElementById("iemarquee") : document.all.iemarquee
cross_marquee.style.left=parseInt(marqueewidth)+8+"px"
cross_marquee.innerHTML=marqueecontent
actualwidth=document.all? temp.offsetWidth : document.getElementById("temp").offsetWidth
}
else if (document.layers){
ns_marquee=document.ns_marquee.document.ns_marquee2
ns_marquee.left=parseInt(marqueewidth)+8
ns_marquee.document.write(marqueecontent)
ns_marquee.document.close()
actualwidth=ns_marquee.document.width
}
lefttime=setInterval("scrollmarquee()",20)
}
window.onload=populate

function scrollmarquee(){
if (iedom){
if (parseInt(cross_marquee.style.left)>(actualwidth*(-1)+8))
cross_marquee.style.left=parseInt(cross_marquee.style.left)-copyspeed+"px"
else
cross_marquee.style.left=parseInt(marqueewidth)+8+"px"

}
else if (document.layers){
if (ns_marquee.left>(actualwidth*(-1)+8))
ns_marquee.left-=copyspeed
else
ns_marquee.left=parseInt(marqueewidth)+8
}
}

if (iedom||document.layers){
with (document){
document.write('<table border="0" cellspacing="0" cellpadding="0"><td>')
if (iedom){
write('<div style="position:relative;width:'+marqueewidth+';height:'+marqueeheight+';overflow:hidden">')
write('<div style="position:absolute;width:'+marqueewidth+';height:'+marqueeheight+';background-color:'+marqueebgcolor+'" onMouseover="copyspeed=pausespeed" onMouseout="copyspeed=marqueespeed">')
write('<div id="iemarquee" style="position:absolute;left:0px;top:0px"></div>')
write('</div></div>')
}
else if (document.layers){
write('<ilayer width='+marqueewidth+' height='+marqueeheight+' name="ns_marquee" bgColor='+marqueebgcolor+'>')
write('<layer name="ns_marquee2" left=0 top=0 onMouseover="copyspeed=pausespeed" onMouseout="copyspeed=marqueespeed"></layer>')
write('</ilayer>')
}
document.write('</td></table>')
}
}
-->
</script>
</div>
  <div class="footer">
    <p class="footer">
      <!-- #BeginDate format:Am1 -->January 15, 2013<!-- #EndDate -->
    </strong></p>
    <!-- end .footer --></div>

  <!-- end .container -->
</div>
</body>
</html> 
```

我试过背景颜色和背景图像。仍然只有背景颜色显示。Chrome 和 Firefox 可以很好地显示背景图像。我尝试过使用 jpg 和 png 图像。图像链接正确。

**我会错过什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:38:07.297

你的形象有问题。如果您使用其他图像，它在 IE8 中可以正常工作。见例子：http: [//jsfiddle.net/V9RHU/1/](http://jsfiddle.net/V9RHU/1/)

```
background-image: url("http://placehold.it/300x400"); 
```

# php - Facebook APP发布一次故事

> ID：14340307
> 
> 赞同：0
> 
> 时间：2013-01-15T14:52:29.780
> 
> 标签：php, facebook, wordpress

当用户接受我的应用程序并在我的网站上阅读故事时，我正在使用 $facebook->api 自动发布故事。这一切都很好，但问题是当他刷新页面或重新访问页面时，相同的故事/链接会重新发布在他的墙上！我怎样才能为一个用户发布一次故事！我在wordpress中这样做！

```
include_once("fb_config.php");
        //Setup Facebook post url and login url
        $post_url = '/'.$fbuser.'/feed';
        $loginUrl = $facebook->getLoginUrl(array(
             'canvas' => 1,
             'fbconnect' => 0,
             'scope' => $fbPermissions,
             'redirect_uri'=>$homeurl
        ));
        //Setup the message to be posted on users wall
        $thumbnail = wp_get_attachment_url( get_post_thumbnail_id($post->ID, 'thumbnail') );
        $description = my_excerpt( $post->post_content, $post->post_excerpt );
        $description = strip_tags($description);
        $description = str_replace("\"", "'", $description);
        $p_title = html_entity_decode(get_the_title(), ENT_NOQUOTES, 'UTF-8');
        $news = array(
            'message'       => '',
            'name'          => htmlspecialchars_decode($p_title),
            'link'          => get_permalink($post->ID),
            'caption'       => get_bloginfo ( 'description' ),
            'description'   => $description,
            'picture'       => $thumbnail
        );

    if ($fbuser) {
      try {
            $postResult = $facebook->api($post_url, 'post', $news );
        } 
        catch (FacebookApiException $e) {
        echo '<script>top.location.href = "'.$loginUrl.'"</script>';
      }
    }else{
        echo '<script>top.location.href = "'.$loginUrl.'"</script>';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:01:55.320

怎么样：

创建一个数据库表，如：

```
[user_article_posted]
user_article_posted_id
user_id
article_id 
```

每次用户阅读（加载）一篇文章并**通过 facebook 登录时**，检查是否存在 user_id/article_id 记录的组合。

1.  如果有：不要在脸书上发帖
2.  如果不是：向该表（用户/文章）插入新行并将故事发布到 Facebook

user_id 也可以是 fbuser，具体取决于您的结构。

# javascript - 查找更改样式属性的 javascript 代码

> ID：14340309
> 
> 赞同：0
> 
> 时间：2013-01-15T14:52:36.493
> 
> 标签：javascript

我有一个相当复杂的 Joomla 构建，它的布局变得有点混乱，我试图找出原因。

javascript 正在更改元素的样式属性（将最小高度添加到一个元素，将宽度添加到另一个元素）。

这可能是一个很长的镜头，但有没有办法找出是哪一段代码导致了这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:05:42.747

使用铬：

1.  打开页面
2.  打开控制台（在 Windows 上按 ctrl + shift + j）
3.  找到元素
4.  右键单击 » 中断... » 属性修改
5.  重新加载页面
6.  希望最好的;）

# c# - 消息框在浏览器后面运行

> ID：14340310
> 
> 赞同：0
> 
> 时间：2013-01-15T14:52:42.113
> 
> 标签：c#, asp.net

我有一个弹出消息框，我想要的是单击时总是在浏览器前面弹出消息框，但问题是它有时会在浏览器后面弹出。我能做些什么来确保消息框总是在浏览器前面弹出？谢谢。

```
protected void Button1_Click(object sender, EventArgs e)
{
    string appointmentdate = Convert.ToString(DropDownListDay.Text + "-" + DropDownListMonth.Text + "-" + DropDownListYear.Text);
    string appointmenttime = Convert.ToString(DropDownListTime.Text);

    using (SqlConnection con = new SqlConnection("Data Source=USER-PC;Initial Catalog=webservice_database;Integrated Security=True"))
    {
        con.Open();
        SqlCommand data = new SqlCommand("Select COUNT(*) from customer_registration where adate='" + appointmentdate + "'AND atime='" + appointmenttime + "'", con);
        Int32 count = (Int32)data.ExecuteScalar();
        if (count == 0)
        {
            SqlConnection con1 = new SqlConnection("Data Source=USER-PC;Initial Catalog=webservice_database;Integrated Security=True");
            SqlCommand cmd = new SqlCommand("UPDATE customer_registration SET servicetype = @servicetype, comment = @comment, adate = @adate, atime = @atime where username='" + Session["username"] + "'", con1);
            con1.Open();

            cmd.Parameters.AddWithValue("@servicetype", DropDownListServicetype.Text);
            cmd.Parameters.AddWithValue("@comment", TextBoxComment.Text);
            cmd.Parameters.AddWithValue("@adate", DropDownListDay.Text + "-" + DropDownListMonth.Text + "-" + DropDownListYear.Text);
            cmd.Parameters.AddWithValue("@atime", DropDownListTime.Text);
            cmd.ExecuteNonQuery();

            con1.Close();
            Response.Redirect("MakeAppointmentSuccess.aspx");
        }
        else
        {
            MessageBox.Show("This appointment is not available. Please choose other date & time.");
            con.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:23:00.360

您将 Win32 消息框与 ASP.NET 的 Response.Redirect 混合在一起。由于这篇文章被标记为 ASP.NET 并且您正在调用 Response.Redirect，我假设这是一个 ASP.NET 应用程序，而不是 WinForms 或 WPF 应用程序。

发生的事情是消息框在“服务器”上弹出，而浏览器是“客户端”，在您的开发人员机器上是一样的。永远不要从 ASP.NET 应用程序调用 MessageBox.Show。原因是您看到的消息框不是来自浏览器，一旦您将其部署到真正的服务器，客户端将永远不会看到消息框，并且您的服务器可能会或可能不会被消息框窗口淹没（取决于在哪个用户上运行以及权限是什么）。

为了在浏览器中制作“MessageBox”样式的警报，您必须使用 JavaScript alert() 函数。您可以对浏览器呈现的 HTML (ASPX) 或 JS 文件执行此操作，也可以调用 ScriptManager.RegisterStartupScript。请查看此 SO 问题的答案以了解详细信息：[ScriptManager.RegisterStartupScript 代码不起作用 - 为什么？](https://stackoverflow.com/questions/4994040/scriptmanager-registerstartupscript-code-not-working-why)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:15:02.607

如果您使用的是 Windows 窗体，请调用[此原型](http://msdn.microsoft.com/it-it/library/cked7698%28v=vs.90%29.aspx)：

```
public static DialogResult Show(
    IWin32Window owner,
    string text
) 
```

并传递`Process.GetCurrentProcess().MainWindowHandle`为`IWin32Window owner`.

相反，如果您使用 WPF 调用[此原型](http://msdn.microsoft.com/it-it/library/ms598678.aspx)：

```
public static MessageBoxResult Show(
    Window owner,
    string messageBoxText
) 
```

并传递`Application.MainWindow`为`owner`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T15:14:26.810

您可以使用接受 IWin32Window 作为第一个参数的 MessageBox.Show() 的重载吗？您应该能够将“this”作为第一个参数传递：

```
MessageBox.Show(this, "This appointment is not available. Please choose other date & time."); 
```

我怀疑这无济于事，因为如果您省略该参数，它应该选择当前活动的父窗口作为父窗口......

如果你绝对绝望，你可以这样做：

```
MessageBox.Show
(
    "This appointment is not available. Please choose other date & time.",
    Application.ProductName,
    MessageBoxButtons.OK,
    MessageBoxIcon.Information,
    MessageBoxDefaultButton.Button1,
    MessageBoxOptions.DefaultDesktopOnly
); 
```

不过我不推荐它——它是一个系统模式对话框，将出现在所有其他应用程序的前面。

# wordpress - Wordpress 导航使用 slug 而不是页面标题？

> ID：14340319
> 
> 赞同：0
> 
> 时间：2013-01-15T14:53:17.240
> 
> 标签：wordpress

我是 wordpress 的新手，只是用我自己的主题进行了设置，看起来很棒，但是导航将页面标题显示为链接，而我更希望它显示 slug。你知道我怎么能做到这一点吗？

它是显示导航的 wp_nav_menu。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:37:24.680

您将要检查您的永久链接设置，以确保所有内容都设置在那里。“职位名称”选项可能对您最有帮助。只需点击设置 -> 永久链接，然后选择“帖子名称”单选按钮。

更多信息在这里：[http ://codex.wordpress.org/Using_Permalinks#Choosing_your_permalink_structure](http://codex.wordpress.org/Using_Permalinks#Choosing_your_permalink_structure)

# php - 从类别页面外的自定义类别属性中获取值

> ID：14340323
> 
> 赞同：0
> 
> 时间：2013-01-15T14:53:37.990
> 
> 标签：php, magento

在我的 Magento 主页上，我尝试列出某个类别的子类别，其中包含来自自定义类别属性的一些值。该列表正在运行，但我无法从自定义类别属性中获取值。

输出为空白。我做错了什么？相关属性为 category_subtitle 和 category_slidertext。

```
<?php
    $_helper = Mage::helper('catalog/category');
    $productsChildren = Mage::getModel('catalog/category')->getCategories(3);
    foreach ($productsChildren as $productCat) {
?>
<li>
    <div class="content-wrapper">
        <div class="content">
            <h2><?php $_category_subtitle = $productCat->getData('category_subtitle'); if($_category_subtitle): ?><span><?php echo $_category_subtitle; ?></span><?php endif; ?></h2>
            <?php $_category_slidertext = $productCat->getData('category_slidertext'); if($_category_slidertext): ?><h3><?php echo $_category_slidertext; ?></h3><?php endif; ?>
            <a href="<?php echo $_helper->getCategoryUrl($productCat) ?>"><?php echo $this->__('View our products') ?> &gt;</a>
        </div>
    </div>
</li>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:07:20.227

尝试：

```
 $productsChildren = Mage::getModel('catalog/category')->getCategories(3,0,false,true,false);
 $productsChildren->addAttributeToSelect('category_subtitle')
                  ->addAttributeToSelect('category_slidertext'); 
```

`$productsChildren`如果是类别集合的实例，那将起作用。

# jquery - 只有在检查所有复选框时才处于活动状态

> ID：14340324
> 
> 赞同：0
> 
> 时间：2013-01-15T14:53:40.010
> 
> 标签：jquery

如何创建这样的东西：

如果用户单击了两个复选框，则按钮 (name="save") 处于活动状态，否则此按钮不活动

```
<label>
<input id="accepted1" type="checkbox" />Please accept
</label>
<label>
<input id="accepted2" type="checkbox" /> Please accept2
</label>

<button class="btn" data-toggle="modal" data-target="#warning" data-dismiss="modal" aria-hidden="true">Cancel</button>
<button class="btn btn-primary" type="submit" id="id_complete" name="save">Complete Order</button> 
```

我不知道

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:58:15.417

您首先需要将按钮设置为不显示（使用 CSS）。然后，随着每个输入的更改，检查两个输入是否当前都已检查，如果是，则设置要显示的按钮。

```
$('input').on('change', function() {
    if($('#accepted1').is(':checked') && $('#accepted2').is(':checked'))
        // show the button
    } else {
        // hide the button
    }
}); 
```

示例：http: [//jsfiddle.net/vw6N4/1/](http://jsfiddle.net/vw6N4/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:57:43.280

将按钮设置为默认禁用（通过向`disabled="disabled"`按钮添加 HTML 属性）。然后使用`is(":checked")`jQuery 提供的检查，例如：

```
$("input[id^=\"accepted\"]").change(function() {
    if($("#accepted1").is(":checked") && $("#accepted2").is(":checked")) {
        $("#id_complete").removeAttr("disabled");
    } else {
        $("#id_complete").attr("disabled", "disabled");
    }
}); 
```

另请参阅这个现场[JSFiddle 示例](http://jsfiddle.net/v57ha/1/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T14:58:50.083

只是为了确保该按钮最初被禁用

```
$("#id_complete").attr("disabled", "disabled");   

 $('input).on('change', function() {
      var c1 = $('#accepted1').is(":checked");
      var c2 = $('#accepted2').is(":checked");

    if(c1 && c2){
       $("#id_complete").removeAttr("disabled");
    }
    else{
       $("#id_complete").attr("disabled", "disabled");

    }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T14:59:14.793

尝试类似：

```
if ( $('checkbox:checked').length == $('checkbox').length )
  $('button[name="save"]').removeAttr('disabled');
else
  $('button[name="save"]').attr('disabled', 'disabled'); 
```

最好将特定类添加到所有必需的复选框并且不选中`$('checkbox:checked').length == $('checkbox').length`，但是`$('checkbox.required:checked').length == $('checkbox.required').length`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T14:59:16.157

这是在行动：http: [//jsfiddle.net/Codesleuth/swqmX/1/](http://jsfiddle.net/Codesleuth/swqmX/1/)

```
$('#accepted1,#accepted2').click(function () {
  if ($('#accepted1:checked,#accepted2:checked').length == 2)
    $('#id_complete').removeAttr('disabled');
  else
    $('#id_complete').attr('disabled','disabled');
}); 
```

请记住默认禁用您的按钮：

```
<button class="btn btn-primary" type="submit" id="id_complete" name="save" disabled="disabled">Complete Order</button> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T14:59:31.567

```
function checkSave() {
   if ($("input[id^=accepted]:checked").length == $("input[id^=accepted]").length) {
      $("#id_complete").prop('disabled', false);
   }
   else {
      $("#id_complete").prop('disabled', true);
   }
}
checkSave();
$("input[id^=accepted]").change(checkSave); 
```

这也处理页面加载。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-15T15:02:41.507

我会将类检查添加到每个复选框，然后您可以简单地检查是否都像这样检查。另外，我会在 HTML 中的完整按钮中添加一个 disabled 属性。

```
$(".check").click(function () {
  if ($(".check:checked").length == 2) 
    $("#id_complete").removeAttr("disabled");
  else 
    $("#id_complete").attr("disabled", "");
}); 
```

小提琴示例：http: [//jsfiddle.net/c578C/1/](http://jsfiddle.net/c578C/1/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-15T15:04:36.687

大多数答案似乎有点冗长，有一种更简单的方法可以实现这一点。

首先，给你需要检查的所有元素一个类`check-required`，然后简单地将`length`或`check-required`与长度进行比较以`check-required:checked`在 上设置`disabled`属性`button`，例如：

```
$('.check-required').change(function() {
  $('#id_complete').prop('disabled', $('.check-required').length !== $('.check-required:checked').length);
}).change(); 
```

您还应该`change`在页面加载时触发事件，如上所示。

与其他答案相比，此方法的主要好处是，如果您需要添加更多复选框，只要您为它们提供`check-required`类，代码将继续按需要工作。

[这是一个小提琴](http://jsfiddle.net/SvdHX/)

# c# - 更新单元格中的错误

> ID：14340333
> 
> 赞同：0
> 
> 时间：2013-01-15T14:54:01.810
> 
> 标签：c#, datagridview, tableadapter

当我编辑我`DataGridView`的单元格时，我想立即更新我的 MSSQL 数据库。我添加了一个`CellEndEdit' event handler. Also I added autogenerated bindingsource and`TableAdapter`。

它工作正常，但每当我想编辑我的值时，我都会收到错误消息。实际上，我用`SqlDataAdapter`. 但这次我使用自动生成的`TableAdapter`. 我不知道该怎么办。我试试这个，但我得到了一个错误。

**注意**: `DataSet11`,`loginTableAdapter`和`Bindingsource1`是自动生成和工作的。

```
private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
{
   SqlCommandBuilder querybuilder = new SqlCommandBuilder(loginTableAdapter);
   querybuilder.GetUpdateCommand();
   loginTableAdapter.Update(dataset11);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:22:52.710

```
 private void dataGridView1_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
        {
            if (dataGridView1.IsCurrentCellDirty)
            {
                SqlCommandBuilder querybuilder = new SqlCommandBuilder(loginTableAdapter);
                querybuilder.GetUpdateCommand();
                loginTableAdapter.Update(dataset11);
            }
        }

        //or if you has a bindingSource
        private void bindingSource1_CurrentItemChanged(object sender, EventArgs e)
        {
            if (dataGridView1.IsCurrentCellDirty)
            {
                SqlCommandBuilder querybuilder = new SqlCommandBuilder(loginTableAdapter);
                querybuilder.GetUpdateCommand();
                loginTableAdapter.Update(dataset11);
            }
        } 
```

# .htaccess - .htaccess 冲突

> ID：14340335
> 
> 赞同：0
> 
> 时间：2013-01-15T14:54:07.840
> 
> 标签：.htaccess, conflict, socialengine

这是我的第一个问题。我在根目录上有一个 wp 站点，它是自己的`.htaccess`文件。

```
RewriteEngine off
<IfModule mod_suphp.c>
suPHP_ConfigPath /home/katambi/public_html/php.ini
<Files php.ini>
order allow,deny
deny from all
</Files>
</IfModule>

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

在另一个目录上，我有 SocialEngine 网站。它也有`.htaccess`文件。

```
<IfModule mod_rewrite.c>
  Options +FollowSymLinks
  RewriteEngine On

  # Get rid of index.php
  RewriteCond %{REQUEST_URI} /index\.php
  RewriteRule (.*) index.php?rewrite=2 [L,QSA]

  # Rewrite all directory-looking urls
  RewriteCond %{REQUEST_URI} /$
  RewriteRule (.*) index.php?rewrite=1 [L,QSA]

  # Try to route missing files
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} public\/ [OR]
  RewriteCond %{REQUEST_FILENAME} \.(jpg|gif|png|ico|flv|htm|html|php|css|js)$
  RewriteRule . - [L]

  # If the file doesn't exist, rewrite to index
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php?rewrite=1 [L,QSA]

</IfModule> 
```

问题：当我进入包和插件页面时，它显示 404 错误。=(

当我删除代码之间

```
# BEGIN WordPress 
```

和

```
# END WordPress 
```

wp-site down，但社交网络运行正常。

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:17:27.890

`# BEGIN WordPress`和之间的代码`# END WordPress`将所有请求重定向到根目录的 index.php。您需要确保对 SocialEngine 目录的请求没有被重定向。所以你可以试试这个解决方案[- .htaccess & Wordpress: Exclude folder from RewriteRule](https://stackoverflow.com/questions/2322559/htaccess-wordpress-exclude-folder-from-rewriterule)

# tsql - 如何获取数据库镜像状态的描述

> ID：14340338
> 
> 赞同：0
> 
> 时间：2013-01-15T14:54:23.977
> 
> 标签：tsql, sql-server-2008-r2, database-mirroring

[根据这篇文章](http://technet.microsoft.com/en-us/library/cc966392.aspx)，我已经在我的 SQL 服务器上设置了警报，以便在我的任何镜像数据库的镜像状态发生变化时提醒我。

一切正常，但我想知道是否有任何方法可以通过 T-SQL 从**$(WMI(State))**提供的状态 ID 获取数据库镜像状态的描述？

我链接到的文章提供了所有可能状态及其含义的列表，因此我可以创建自己的表或使用 CASE 语句，但如果我可以使用内置函数或从现有表中选择会很好. 也许我今天的 Google-Power 很低，但我什么都没找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:31:52.360

为此，我最终在我的脚本中添加了一个 CASE 语句——我本可以创建一个表，但这更便于移植，因为我想将脚本复制到几个不同的服务器。

```
declare @MirrorStateDesc varchar(50)
select @MirrorStateDesc = '$(ESCAPE_NONE(WMI(State)))'
select @MirrorStateDesc = CASE @MirrorStateDesc WHEN '7' THEN 'Manual Failover' WHEN '8' THEN 'Automatic Failover' WHEN '10' THEN 'No Quorum' WHEN '12' THEN 'Principle Running Exposed' ELSE @MirrorStateDesc  END 
```

我只在状态 7、8、10 和 12 上使用这个脚本，所以它们是我添加到我的 case 语句中的唯一脚本。如果有人想扩展脚本以供自己使用，其他值和描述在我在问题中链接到的页面上。

我仍然很惊讶没有内置函数可以做到这一点！

# asp.net-mvc-3 - 如何为表名添加前缀？

> ID：14340343
> 
> 赞同：0
> 
> 时间：2013-01-15T14:54:39.640
> 
> 标签：asp.net-mvc-3

如何在不更改类名的情况下为表名添加前缀？

```
dbo.Applications (Class Applications {})
dbo.Groups (Class Groups {})
dbo.Locations (Class Locations{})

dbo.Site1_Applications
dbo.Site1_Groups
... 
```

我正在使用 Visual Studio 2010、SQL Server 2005、.Net 4.0

# ios - ios ui 对象检查文本属性

> ID：14340345
> 
> 赞同：0
> 
> 时间：2013-01-15T14:54:41.163
> 
> 标签：ios

我需要检查某个对象是否具有 text 属性。例如，它可以是一个`UIButton`或一个`UILabel`。但是在为 an`UIButton`和为显示文本的属性之间存在问题`UILabel`。

这是区别：

对于`UIButton`我们使用方法设置文本`setTitle:`，但对于`UILabel`我们使用另一个名为`setText:`

我需要做什么：

我需要获取所有子视图，如果这些子视图具有文本属性，我需要使用一些文本更改此属性值。

所以当然我可以检查对象的类并设置所需的属性，但也许我们有另一种方法来做到这一点而不检查对象的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:14:06.077

```
for (id item in [self.view subviews])
{
    if ([item respondsToSelector:@selector(text)])
        [item setText:@"text"]; // change text for UILabel
    else if ( [item respondsToSelector:@selector(setTitle:forState:)])
        [item setTitle:@"text" forState:UIControlStateNormal]; // change text for UIButton
} 
```

# c - 创建文件时出现分段错误 11

> ID：14340346
> 
> 赞同：0
> 
> 时间：2013-01-15T14:54:42.413
> 
> 标签：c, unix, segmentation-fault

我正在做一个简单的项目，但我遇到了一个错误。我在 Unix 中编码并使用终端执行代码。

```
#include <stdlib.h>
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

int main()
{
    int atis;
    char *weather;

    //Création du fichier ATIS
    if((atis = creat("atis", 0666)) == -1)
    {
        printf("Error while creating the ATIS file\n");
        exit(-1);
    }

    //Ouverture du fichier ATIS
    if((atis = open("atis", 0666)) == -1)
    {
        printf("Permission denied\n");
        exit(-1);
    }

    //Mise à jour du fichier ATIS
    printf("OK or KO for a take-off? ");
    gets(weather);
    if(write(atis, weather, sizeof(weather))==-1)
    {
        printf("Write error\n");
        exit(-1);
    }

    close(atis);
    return 0;
}** 
```

错误是分段错误 11。

先感谢您！（对不起我的英语，真的很糟糕^^）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T14:56:38.257

`weather``char*`在以下调用中首次使用时是一个未初始化的：

```
gets(weather); 
```

这意味着`gets()`将尝试写入不应该写入的内存，从而导致分段错误。为数组分配内存`weather`或使用数组：

```
char weather[128]; 
```

在随后的调用中`write()`使用`strlen(weather)`而不是`sizeof(weather)`仅写入读取的字符（并正确处理`weather`is a`char*`而不是 a的情况`char[]`）。

此外，请参阅[为什么获取函数如此危险以至于不应该使用它？](https://stackoverflow.com/questions/1694036/why-is-the-gets-function-is-dangerous-why-should-not-be-used). 使用[`fgets()`](http://en.cppreference.com/w/c/io/fgets)或可能[`scanf()`](http://en.cppreference.com/w/c/io/fscanf)与长度说明符一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T14:57:00.720

您永远不会为指针分配任何内存：`char *weather;`

从[手册页](http://linux.die.net/man/3/gets)：

> char *gets(char *s);
> get() 从标准输入读取一行到 s 指向的缓冲区，直到终止换行符或 EOF，

因此，您需要一个缓冲区将其存储到：

```
char weather[10]; 
```

或者

```
char *weather;
weather = malloc(10); 
```

如果 10 就足够了。这又从手册页引出了另一点：

> 永远不要使用gets()。因为在事先不知道数据的情况下不可能知道gets()会读取多少个字符，而且因为gets()会继续存储超过缓冲区末尾的字符，所以使用起来非常危险。它已被用来破坏计算机安全。请改用 fgets()。

前任：

```
fgets (weather, 10 , stdin); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T14:57:52.163

问题是这两行：

```
char *weather; 
```

和

```
gets(weather); 
```

第一个声明`weather`为指针，但未初始化（即指向看似随机的位置）。第二行写入指向的内容`weather`，这意味着您写入某个随机位置。

声明`weather`为数组，并`fgets`改为使用：

```
char weather[64];

/* ... */

fgets(weather, sizeof(weather), stdin); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T14:58:37.893

您确实在未指向已分配内存的指针上获取（天气）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T14:58:53.760

```
char *weather; 
```

进而

```
gets(weather); 
```

导致分段错误。`weather`应该指向一个内存空间：

*   静态的

    `char weather[100]`

*   或动态

    `char *weather = malloc(100*sizeof(char));`

# java - 字符串的值是多少？

> ID：14340349
> 
> 赞同：-5
> 
> 时间：2013-01-15T14:54:57.120
> 
> 标签：java, string

如果我要在 Java 中创建一个字符串：

```
String example = "text"; 
```

变量示例的值是多少？起初我说值是：文本，不带引号，但现在我第二次猜测自己认为值是：“文本”，带引号。帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:56:52.320

变量值不`text`带引号。引号仅用于指定提供的数据是字符串而不是变量名。

如果要存储`"text"`在变量中，则必须执行以下操作：

```
string s = "\"text\""; 
```

从技术上讲，正如亨利在下面指出的那样，变量的实际值是对`String`包含`text`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:00:35.930

该值`text`不带引号。您可以使用 systemout 将 String 的值打印到控制台以简单地对其进行测试：

```
String example = "text";
System.out.println(example); 
```

结果：

`text`

# jquery - 由于负载平衡，在不同域的 iframe 中关闭父 iframe 窗口（jquery ui 对话框）

> ID：14340351
> 
> 赞同：0
> 
> 时间：2013-01-15T14:55:11.553
> 
> 标签：jquery, iframe, cross-domain, jquery-ui-dialog, load-balancing

我有一个 jQuery UI 对话框，里面有一个 iframe。我正在 iframe 中加载另一个页面，该页面与父级不在同一个域中。这些页面是两个不同的系统，System1（父）和 System2（iframe 内的子）。

我想要做的是在 iframed 页面上添加一个按钮，该按钮调用 JS/jQuery 来关闭父页面上的实际对话框窗口。

像他们在这里做的事情：[从 iframe 关闭 jQuery UI 对话框](https://stackoverflow.com/questions/4392146/close-jquery-ui-dialog-from-iframe)

问题是，由于[同源策略，这仅在两个页面位于同一域时才有效](http://en.wikipedia.org/wiki/Same_origin_policy)

这是我当前的按钮，当两个系统在同一个域上时，它可以正常工作：

```
<input type="submit" onclick="$('#myDialog', window.parent.document).hide();" value="X" /> 
```

站点/系统实际上可能位于同一服务器和域上，但我使用负载平衡器在 3 个不同的服务器之间移动流量。所以有两个系统，每个系统在三台服务器上运行。下面，端口对应于不同的系统（91 = System1，92 = System2）。

IE

*   [http://Server1.myHost.com:91](http://Server1.myHost.com:91)
*   [http://Server1.myHost.com:92](http://Server1.myHost.com:92)
*   [http://Server2.myHost.com:91](http://Server2.myHost.com:91)
*   [http://Server2.myHost.com:92](http://Server2.myHost.com:92)
*   [http://Server3.myHost.com:91](http://Server3.myHost.com:91)
*   [http://Server3.myHost.com:92](http://Server3.myHost.com:92)

这些系统通过访问[http://System1.myHost.com](http://System1.myHost.com)和[http://System2.myHost.com](http://System2.myHost.com)进行负载平衡，负载平衡器决定将用户发送到哪个服务器。

问题是：当用户访问[http://System1.myHost.com](http://System1.myHost.com)（例如实际上在 Server1 上）并且 jQuery/iframe 试图加载匹配的 System2 站点（在这种情况下也在 Server1 上）时，Javascript 认为[http://System1.myHost.com](http://System1.myHost.com)（实际上是http://Server1.myHost.com:91 [）](http://Server1.myHost.com:91)和[http://Server1.myHost.com:92](http://Server1.myHost.com:92)位于两个不同的域上。

不知何故，我需要欺骗 Javascript 以认为负载均衡器地址与实际服务器地址相同，但我不知道如何......

关于如何解决这个问题的任何想法？=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:59:59.870

你不能“欺骗”JavaScript 忽略同源策略，如果可以的话，这样的策略将毫无用处。

负载平衡对最终用户应该是透明的。您应该考虑在负载平衡服务器前使用前端缓存系统，例如 Velocity 或 Memcached。

# c++ - 与 char[] 和 memcpy 有关的奇怪情况

> ID：14340354
> 
> 赞同：0
> 
> 时间：2013-01-15T14:55:13.530
> 
> 标签：c++, visual-studio, char, memcpy

我是一个 c++ 新手，只是尝试编写一些代码来自己进行实验。

最近遇到一个无法调试的问题。

```
char acExpReason[128];
char acReason[] = "An error message is information displayed when an unexpected condition occurs, usually on a computer or other device. On modern operating systems.";

memcpy(acExpReason, acReason, sizeof(acExpReason));
std::string strExpReason(acExpReason); 
```

我使用 VS2005 在每一行添加断点进行调试。

当它到达第二行的断点时，Autos 中的变量名称和值信息为：

> *   acReason 0x00f6f78c “ÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌ” 的char [147]
>     
>     
> *   acExpReason 0x00f6f828 “ÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌº” 的char [128]

当它到达第三行的断点时，Autos 中的变量名和值信息为：

> *   acExpReason 0x00f6f828 “ÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌº” 的char [128]
>     
>     
> *   acReason 0x00f6f78c “错误消息是发生意外情况时显示的信息，通常在计算机或其他设备上。在现代操作系统上。” 字符 [147]

当它到达第四行的断点时，Autos 中的变量名和值信息为：

> *   acExpReason 0x00f6f828 “错误消息是发生意外情况时显示的信息，通常在计算机或其他设备上。在现代 ÌÌÌÌÌÌÌÌº” char [128]
>     
>     
> *   acReason 0x00f6f78c “错误消息是发生意外情况时显示的信息，通常在计算机或其他设备上。在现代操作系统上。” 字符 [147]
>     
>     
> *   strExpReason Bad Ptr

执行完最后一行后，Autos 中的信息为：

> *   acExpReason 0x00f6f828 “错误消息是发生意外情况时显示的信息，通常在计算机或其他设备上。在现代 ÌÌÌÌÌÌÌÌº” char [128]
>     
>     
> *   acReason 0x00f6f78c “错误消息是发生意外情况时显示的信息，通常在计算机或其他设备上。在现代操作系统上。” 字符 [147]
>     
>     
> *   strExpReason "错误消息是发生意外情况时显示的信息，通常在计算机或其他设备上。在现代 ÌÌÌÌÌÌÌÌº"

基本上我的代码想要做的只是有一个完整的 msg 行存储在 acReason[] 中，并且还有一个固定长度的完整 msg 的副本（这里是 128）。

但我不知道为什么 acExpReason 和 strExpReason（acExpReason 的字符串版本）会以一些我不想要的奇怪字符“ÌÌÌÌÌÌÌÌº”结尾（因为稍后我将使用此字符串与其他字符串进行比较）。

我尝试使用 memcpy、strcpy 和 strncpy，但它们最终都在字符串末尾包含了那组奇怪的字符。

任何人都可以帮忙吗？提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T15:02:05.593

```
std::string strExpReason(acExpReason); 
```

此构造函数需要 C 风格的字符串。然而`acExpReason`，它不是 C 风格的字符串，因为它没有终止零字节。（构造函数如何知道字符串中应该有多少字节？）你必须遵守规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T15:02:14.103

在 C 中，所有字符串函数（如 strcpy）和 c++ 的构造函数都`std::string`作为`char*`参数，但`char*`必须以包含 `\0` 的字节终止。

acExpReason 没有以零结尾，因此所有字符串函数都在内存中查找下一个 0 字节。acReason 确实有一个尾随 `\0`。正常的 strcpy 可以工作，因为它也会复制 0 但是因为@VladLazarenko 说缓冲区大小太小，这将导致所有内存被覆盖。

要使 memcpy 工作，您需要复制比缓冲区少一个字节并将缓冲区的最后一个字节设为 0。例如

```
memcpy(acExpReason, acReason, sizeof(acExpReason)-1);
acReason[sizeof(acExpReason)-1] = 0; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T15:08:37.943

您还可以使用`string`接受迭代器范围的构造函数 -

```
std::string strExpReason(acExpReason, acExpReason+sizeof(acExpReason)); 
```

# jsf-2 - 处理 ViewExireException/ajax 并显示 Primefaces 对话框

> ID：14340357
> 
> 赞同：2
> 
> 时间：2013-01-15T14:55:20.293
> 
> 标签：jsf-2, exception-handling, dialog, primefaces, viewexpiredexception

我不会将我的用户重定向或转发到另一个页面。所以当 my `SessionExpiredExceptionHandler`(extends `ExceptionHandlerWrapper`) 处理 ViewExireException 时。我希望用户留在同一页面上并显示 PrimeFaces 对话框。用于通知会话已过期并且用户需要再次登录（基于对话框）。我使用 Servlet 3.1 功能来登录/注销用户，并`Basic/file`使用 auth-method 将用户映射到不同的系统角色。

现在发生的是视图/页面在 2 分钟后刷新，但会话没有失效。仅在 4 分钟后页面刷新时第二次发生。

```
 <session-config>
        <session-timeout>2</session-timeout>
    </session-config> 
```

**编辑：** 由元标记刷新：

```
<meta http-equiv="refresh" content="#{session.maxInactiveInterval}" /> 
```

当异常第一次发生时，如何`SessionExpiredExceptionHandler`使会话对象（Servlet 注销）无效，以及如何在客户端调用 JavaScript（expireDlg.show()）以显示 PrimeFaces 对话框？

我查看了其他一些线程，但没有找到可行的解决方案。 [会话超时](https://stackoverflow.com/questions/11203195/session-timeout-and-viewexpiredexception-handling-on-jsf-primefaces-ajax-request)

SessionExpiredExceptionHandler

```
 @Override
    public void handle() throws FacesException {
    for (Iterator<ExceptionQueuedEvent> i = getUnhandledExceptionQueuedEvents().iterator(); i.hasNext();) {
        ExceptionQueuedEvent event = i.next();
        ExceptionQueuedEventContext context = (ExceptionQueuedEventContext) event.getSource();
        Throwable t = context.getException();
        if (t instanceof ViewExpiredException) {
        ViewExpiredException vee = (ViewExpiredException) t;
        FacesContext fc = FacesContext.getCurrentInstance();
        Map<String, Object> requestMap = fc.getExternalContext().getRequestMap();
        NavigationHandler nav = fc.getApplication().getNavigationHandler();                

        try {
            requestMap.put("currentViewId", vee.getViewId());

            nav.handleNavigation(fc, null, "Home");
            fc.renderResponse();

        } finally {
            i.remove();
        }                                
        }
    }
    // At this point, the queue will not contain any ViewExpiredEvents.
    // Therefore, let the parent handle them.
    getWrapped().handle();
    } 
```

web.xml

```
<exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/home.xhtml</location>
</error-page> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:49:58.993

该解决方案适用于我的情况。Primefaces (3.3) 似乎正在吞噬 ExceptionQueuedEvent。当我的 ViewExceptionHandler 被调用时，没有要处理的异常。因此，我将`p:idleMonitor`组件与事件侦听器一起使用。我还删除了元刷新标签。

```
<p:idleMonitor timeout="#{(session.maxInactiveInterval-60)*1000}">
        <p:ajax event="idle" process="@this" update="sessionMsg" listener="#{userController.userIdleSession()}" />
        <p:ajax event="active" process="@this" update="sessionMsg" listener="#{userController.userActiveSession()}"/>
</p:idleMonitor> 
```

一件奇怪的事情是，如果 与会话超时参数`timeout`完全相同`web.xml`，则不会调用侦听器。

豆函数

```
public void userIdleSession() {
    if (!userIdleMsgVisable) {
        userIdleMsgVisable = true;
        JsfUtil.addWarningMessage(JsfUtil.getResourceMessage("session_expire_title"), JsfUtil.getResourceMessage("session_expire_content"));            
    }
}

public void userActiveSession() {
        if (!userSessionDlgVisable) {
            userSessionDlgVisable = true;                     
            RequestContext.getCurrentInstance().execute("sessionExipreDlg.show()");            
        }
    } 
```

对话框 ( `sessionExipreDlg`) 调用重定向而不是使用导航处理程序来获取新范围并刷新页面。

```
public void userInactiveRedirect() {
        FacesContext fc = FacesContext.getCurrentInstance();
        userIdleMsgVisable = false;
        userSessionDlgVisable = false;
        sessionUser = null;         
        HttpServletRequest request = (HttpServletRequest) fc.getExternalContext().getRequest();
        JsfUtil.findBean("homeController", HomeController.class).clearCurrentValues();        
        try {
            fc.getExternalContext().redirect(JsfUtil.getApplicationPath(request, false, null));            
        } catch (IOException ex) {
            BeanUtil.severe(ex.getLocalizedMessage());
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T15:20:05.727

> *第一次发生异常时，如何使 SessionExpiredExceptionHandler 使会话对象无效（Servlet 注销）*

该会话应该*已经*失效/过期（[否则`ViewExpiredException`根本不会抛出](https://stackoverflow.com/questions/3642919/javax-faces-application-viewexpiredexception-view-could-not-be-restored/3642969#3642969)a ），所以我看不出自己手动使其失效/过期有什么用处。但是对于这种情况，您可以按如下方式使其无效：

```
externalContext.invalidateSession(); 
```

* * *

> *以及如何在客户端调用 JavaScript (expireDlg.show()) 来显示 PrimeFaces 对话框？*

您可以使用 PrimeFaces [`RequestContext`](http://www.primefaces.org/docs/api/3.4/org/primefaces/context/RequestContext.html)API 以编程方式指示 PrimeFaces 在完成 ajax 响应时执行一些 JS 代码。

```
RequestContext.getCurrentInstance().execute("expireDlg.show()"); 
```

如果您实际上不想导航，请不要忘记从异常处理程序中删除导航处理程序块。

# java - 在 ArrayList 中查找

> ID：14340361
> 
> 赞同：1
> 
> 时间：2013-01-15T14:55:25.793
> 
> 标签：java, arraylist

我有这个。

```
private ArrayList<String> words; 
```

这是一本字典，所以单词已经排序。根据旧的研究，我知道二项式搜索应该非常非常快，我想 Java 已经实现了必要的功能。

那么，查找某个字符串是否存在于已**排序**的ArrayList 中的最有效方法是什么？或者我应该使用不同的类型？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T14:57:00.957

> 或者我应该使用不同的类型？

尝试使用 a`HashSet<String>`代替。假设没有太多哈希冲突，它的[contains方法具有 O(1) 查找。](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html#contains%28java.lang.Object%29)从文档中：

> 此类为基本操作（添加、删除、包含和大小）提供恒定的时间性能，假设哈希函数将元素正确地分散在桶中。

对排序的二进制搜索`ArrayList`只有 O(log n)。这仍然非常快，但不如使用`HashSet`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T14:57:45.993

二进制搜索将是排序数组中最快的。如果您使用哈希集，则可以在恒定时间内完成对存在性的测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T14:57:29.690

取决于您要尝试查找特定字符串的次数。您可能想尝试 a `HashMap<String, String>`，因为随着地图的增长，这将保持快速。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T14:59:28.367

如果您要进行二进制搜索，我建议您将数据重新组织成`Binary Search Tree`

ArrayLists 通常用于顺序操作和随机访问。如果您要进行搜索并希望以最快的速度查找，那么最好从一开始就组织您的数据。这还具有促进更快插入/移除以及您希望在尽可能快的时间内完成的所有其他操作的优势。

谷歌和其他地方有大量指南可以帮助您入门。

# node.js - 如何解决 node.js 需要在 coffeescript 中缓存？

> ID：14340365
> 
> 赞同：0
> 
> 时间：2013-01-15T14:55:34.927
> 
> 标签：node.js, coffeescript

我想要一个文件，用 CoffeeScript 编写的另一个文件也用 CoffeeScript 编写。我想在文件更改时再次要求该文件（使用`fs.watch()`），但是作为文档 module.require 缓存需要。

有没有一种简单的方法来解决这个问题？

**更新：**

这似乎仍然不起作用：

```
fs.watch './file.coffee', (event, filename) ->
  delete require.cache[__dirname + '/' + filename]
  require './file' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:07:44.227

您可以使要求缓存无效：

> **需要.cache#Object**
> 
> 需要时，模块会缓存在此对象中。通过从这个对象中删除一个键值，下一个 require 将重新加载模块。

[http://nodejs.org/docs/latest/api/globals.html#require.cache](http://nodejs.org/docs/latest/api/globals.html#require.cache)

# python - Configparser 和带 % 的字符串

> ID：14340366
> 
> 赞同：40
> 
> 时间：2013-01-15T14:55:37.330
> 
> 标签：python

愚蠢的问题（肯定）简单的答案......

我正在使用 configparser 从文件中读取一些字符串。当字符串有 '%' 符号（例如 $%&）时，它会抱怨：

ConfigParser.InterpolationSyntaxError: '%' 后面必须跟 '%' 或 '(', found: "%&'"

有人熟悉这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-15T15:02:07.600

如果您不想替换环境变量，请使用 RawConfigParser，而不是 ConfigParser。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-03-05T09:57:00.643

写**两个** `%`：

```
V = ('%%', 'MHz', 'GHz') 
```

结果：

```
('%', 'MHz', 'GHz') 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2020-06-26T09:50:30.990

默认情况下，ConfigParser启用[了值的插值](https://docs.python.org/3/library/configparser.html#interpolation-of-values)。这意味着您可以在属性文件中使用变量。

从 Python 3.2 开始，您可以在构造函数中禁用插值：

```
configParser = configparser.ConfigParser(interpolation=None) 
```

如果您不想禁用插值，则必须通过在属性文件中放置两个连续的*%符号来转义，*[如文档示例中](https://docs.python.org/3/library/configparser.html#configparser.BasicInterpolation)所示。`%%`

请注意，这`RawConfigParser`是一个遗留变体。从[python文档](https://docs.python.org/3/library/configparser.html#rawconfigparser-objects)：

> 考虑使用 ConfigParser 来检查要在内部存储的值的类型。如果不想插值，可以使用 ConfigParser(interpolation=None)。

# c++ - mfc richedit2 格式化

> ID：14340367
> 
> 赞同：0
> 
> 时间：2013-01-15T14:55:51.097
> 
> 标签：c++, mfc, formatting, richedit-control

我正在尝试使用富编辑控件在屏幕上输出一些文本：

**星期一**按 1。
你的日子是**星期一**
**星期二**按 2。

我真的找不到任何简单的例子来说明如何做到这一点。我所能解决的只是设置窗口文本（setWindowText），但其他一切都在逃避我。有什么简短的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T16:37:44.793

尽管有评论，但我将回答您提出的关于如何在 Rich Edit 控件中格式化数据的问题。几年前，我不得不这样做，并提出了一些我可以将其视为 IOstream 的东西（如果我今天这样做，我可能会做一些不同的事情，但生活就是这样）。

首先，代码表现得像 IOstream，但写入富编辑控件：

```
// rich_stream.h:
#ifndef RICH_STREAM_H
#define RICH_STREAM_H

class rich_stream { 
    CRichEditCtrl &ctrl;
public:
    rich_stream(CRichEditCtrl &ctrl_) : ctrl(ctrl_) { }

    void add_text(char const *txt) {
        ctrl.SetSel(-1,-1);
        ctrl.ReplaceSel(txt);
    }

    void add_int(int val) {
        CString temp;
        temp.Format("%d", val);
        add_text(temp);
    }

    void set_char_format(CHARFORMAT &fmt) {
        ctrl.SetSelectionCharFormat(fmt);
    }    
};

inline rich_stream &operator<<(rich_stream &s, char const *t) {
    s.add_text(t);
    return s;
}

inline rich_stream &operator<<(rich_stream &s, CHARFORMAT &fmt) {
    s.set_char_format(fmt);
    return s;
}

inline CString nl() {
    return CString("\n\n");
}

inline rich_stream &operator<<(rich_stream &s, CString (*f)()) {
    s.add_text(f());
    return s;
}

inline rich_stream &operator<<(rich_stream &s, int val) {
    s.add_int(val);
    return s;
}
#endif 
```

然后，我会使用这样的东西：

```
CHARFORMAT bold;

memset(&bold, 0, sizeof(bold));
bold.cbSize = sizeof(bold);
bold.dwMask = CFM_BOLD | CFM_FACE | CFM_SIZE;
bold.dwEffects = CFE_BOLD;
strcpy(bold.szFaceName, "Times");
bold.yHeight = 14 * 20;

CHARFORMAT normal;
memset(&normal, 0, sizeof(normal));
normal.cbSize = sizeof(normal);
normal.dwMask = CFM_BOLD | CFM_FACE | CFM_SIZE;
normal.dwEffects = 0;
strcpy(normal.szFaceName, "Times");
normal.yHeight = 14 * 20;

// ...    

rich_stream txt(GetRichEditCtrl());

txt << bold << "Heading 1: " << normal << info1 << nl
    << bold << "Heading 2: " << normal << info2 << nl
    << bold << "Heading 3: " << normal << info3; 
```

如果我今天这样做，我几乎肯定会创建一个小类作为 a 的包装器，`CHARFORMAT`这样我就可以更简洁地构造格式化对象。我可能至少也会认真考虑将其实现为带有流缓冲区的普通 iostream，该流缓冲区将数据插入富编辑控件（但当时我对流的了解还不够，不知道我应该这样做）。

乍一看，还有一些其他的东西也不是完全正确的——`add_text`使用`SetSel(-1, -1);`. 这应该真正检索文本的当前长度（例如，使用`GetWindowTextLength`, 并将选择设置为刚好在结尾之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T16:12:48.457

使用写字板，它也是一个 RichEdit 控件。它将以与您的控件自然兼容的方式生成您的 RTF。

# html - 设置默认的焦点元素/输入

> ID：14340368
> 
> 赞同：2
> 
> 时间：2013-01-15T14:55:57.920
> 
> 标签：html, css

我知道我可以使用 JS/jQuery 设置一个元素以专注于文档加载：

```
$('#myInput').focus(); 
```

我的问题是是否可以仅使用 CSS 而不使用脚本来实现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T17:06:33.460

无法在 CSS 中设置焦点。这不是 CSS 设计的目的，因为它是一个行为问题。

如评论中所述，在 HTML 中，您可以使用该`autofocus`属性设置初始焦点。

# android - 在 Android 上使用框架创建动画启动画面

> ID：14340372
> 
> 赞同：3
> 
> 时间：2013-01-15T14:56:11.067
> 
> 标签：android, animation, frame, out-of-memory, splash-screen

所以这是交易，我已经在线搜索了每一个问题和链接，但没有任何帮助。我的初始屏幕有 120 帧 .jpg 格式的动画。我知道 jpeg 被转换为内存上的位图，所以这就是我得到 OutOfMemoryError 的原因。我动画的最大帧数是 10。有什么办法可以逐帧进行，或者我应该尝试其他方法。这是我的代码：

```
 final AnimationDrawable anim = new AnimationDrawable();
    anim.setOneShot(true);

    for (int i = 1; i <= 120; i++) 
    {
        Drawable logo = getResources().getDrawable(getResources()
                  .getIdentifier("l"+i, "drawable", getPackageName()));

        anim.addFrame(logo, 50);
        if (i % 3 == 0)
        {
            System.gc();
        }
    }

    ImageView myImageView = (ImageView) findViewById(R.id.SplashImageView);
    myImageView.setBackgroundDrawable(anim);
    myImageView.post(new Runnable()
    {
       public void run()
       {
          anim.start();
       }
    }); 
```

我已将 120 个 jpeg 放在带有“l”前缀的可绘制文件夹下（例如 l1、l2 等）。我每 3 个 jpeg 进行一次垃圾收集，但这无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T15:22:51.733

您可以尝试不`AnimationDrawable`使用`Handler.postDelayed`. 像这样的东西：

```
final ImageView image = (ImageView) findViewById(R.id.SplashImageView);
final Handler handler = new Handler();

final Runnable animation = new Runnable() {
    private static final int MAX = 120;
    private static final int DELAY = 50;

    private int current = 0;

    @Override
    public void run() {
        final Resources resources = getResources();
        final int id = resources.getIdentifier("l" + current, "drawable", getPackageName());
        final Drawable drawable = resources.getDrawable(id);

        image.setBackgroundDrawable(drawable);
        handler.postDelayed(this, DELAY);
        current = (current + 1) % MAX;
    }
};

handler.post(animation); 
```

此解决方案需要更少的内存，因为它一次只保留一个可绘制对象。

您可以使用取消动画`handler.removeCallbacks(animation);`。

如果要制作一次性动画，可以`handler.postDelayed`有条件地调用：

```
if (current != MAX - 1) {
    handler.postDelayed(this, DELAY);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:05:54.900

Y̶o̶u̶ ̶n̶e̶e̶d̶ ̶t̶o̶ ̶c̶a̶l̶l̶ ̶.̶r̶e̶c̶y̶c̶l̶e̶(̶)̶ ̶o̶n̶ ̶t̶h̶e̶ ̶b̶i̶t̶m̶a̶p̶s̶ ̶y̶o̶u̶ ̶d̶o̶n̶'̶t̶ ̶u̶s̶e̶ ̶a̶n̶y̶m̶o̶r̶e̶.̶ ̶O̶t̶h̶e̶r̶w̶i̶s̶e̶ ̶t̶h̶e̶y̶ ̶w̶o̶n̶t̶ ̶b̶e̶ ̶g̶a̶r̶b̶a̶g̶e̶ ̶c̶o̶l̶l̶e̶c̶t̶e̶d̶ ̶p̶r̶o̶p̶e̶r̶l̶y̶.̶

同样在清单集中使用大堆为真。这给了你更多的呼吸空间。>)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T08:19:16.817

我尝试了所有这些解决方案，每个解决方案都变得更好:D 我可以使用更多帧和更高分辨率，但仍然不能让经理满意:(我发现最好的解决方案是使用视频而不是帧它对于即使是低内存设备也很有魅力我在 xperia u 上使用 256mb 内存的视频编解码器 (H.264 mp4) 测试了 150 帧，每个尺寸为 480*854

# google-app-engine - 为什么 Google App Engine 不支持自定义 404 处理程序？

> ID：14340373
> 
> 赞同：3
> 
> 时间：2013-01-15T14:56:13.487
> 
> 标签：google-app-engine

我想发送一个 404 错误，并在 Google App Engine 上为用户重定向到一个更有吸引力的错误页面。

我尝试将它添加到我的 web.xml，但它不起作用

```
 <error-page>
    <error-code>404</error-code>
    <location>404.html</location>
    </error-page> 
```

我发现的唯一信息来自旧的谷歌组

[https://groups.google.com/d/topic/google-appengine-java/3C-pY5ta2HQ/discussion](https://groups.google.com/d/topic/google-appengine-java/3C-pY5ta2HQ/discussion)

我想为搜索引擎发送正确的 404 标头，并且我想向用户呈现更好的错误消息。Jason 最后的建议意味着发送 302 而不是 404，所以我认为这对于搜索引擎来说并不理想。那是唯一的选择吗？任何帮助，意见表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:26:03.840

您的应用程序处理的 URL 不支持自定义 404 页面，因为一旦请求被定向到您的应用程序，它就可以将响应返回给用户。如果您想呈现一个有吸引力的 404 页面，您应该让您的应用程序将其作为对生成 404 的请求的响应返回。您如何做到这一点 - 通过内部重定向（不是 HTTP 重定向！） - 或其他功能已启动给你。

# php - 由于安全性，是否删除非字母数字值？

> ID：14340378
> 
> 赞同：0
> 
> 时间：2013-01-15T14:56:34.763
> 
> 标签：php, preg-replace

为了减少攻击者的可能性，是否值得在表中仅包含字母数字值？例如，注册表单上的用户名和密码输入应用以下内容：

```
preg_replace("/[^A-Za-z0-9 ]/", '', $input); 
```

当然，每次登录前都执行相同的操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:58:22.133

通过删除任何字符，您实际上会削弱安全性。

删除任何字符绝对没有意义，而密码中**需要**一些非 alum 字符以提高安全性

请参阅我关于“非法”字符主题的其他答案：[https ://stackoverflow.com/a/2995163/285587](https://stackoverflow.com/a/2995163/285587)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:05:08.160

我们可以使用[PHP 准备语句](http://php.net/manual/en/pdo.prepared-statements.php)等其他方式来防范可能的 SQL 注入。但是，我们还必须确保任意用户输入不会返回到服务器进行显示，否则可能会进行脚本注入。虽然如果从头开始设计系统，后者是可以避免的，但可能很难修补很久以前不小心编写的东西。

因此，如果某些用户提供的数据库字符串可能会返回给浏览器，在某些情况下，使用一些过滤来防止 JavaScript 注入可能是有意义的。

# android - 在 webview 中加载移动版 ipboard 论坛

> ID：14340382
> 
> 赞同：-1
> 
> 时间：2013-01-15T14:56:40.947
> 
> 标签：android, webview

如何加载移动版 ipboard 论坛？我已经设法使用以下代码加载移动版博客，但它不适用于 ipboard。可能是因为它使用了手机主题。

```
 WebView web=(WebView) findViewById(R.id.forumview); 
        web.getSettings().setUserAgentString("Android");
        web.loadUrl("http://blabla.com/forum"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:39:50.567

将此用作用户代理字符串：`Mozilla/5.0 (Linux; U; Android 2.2.1; en-us; Nexus One Build/FRG83) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1`

[在这里](https://developers.google.com/chrome/mobile/docs/user-agent)，您可以看到 Chrome for Android 用户代理字符串以及它们是如何生成的。

电话：

`Mozilla/5.0 (Linux; <Android Version>; <Build Tag etc.>) AppleWebKit/<WebKit Rev> (KHTML, like Gecko) Chrome/<Chrome Rev> Mobile Safari/<WebKit Rev>`

Galaxy Nexus 的示例：

`Mozilla/5.0 (Linux; Android 4.0.4; Galaxy Nexus Build/IMM76B) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.133 Mobile Safari/535.19`

# c - c libxen api获取VDI大小

> ID：14340383
> 
> 赞同：1
> 
> 时间：2013-01-15T14:56:42.220
> 
> 标签：c, xen

我正在尝试获取 Xen VM 磁盘的大小我的代码如下（省略了错误检查）。我没有找到有关如何使用 xen api 的文档，只有几个示例。所以我只使用这个 [http://fossies.org/dox/xen-4.2.1/xen__vdi_8h.html](http://fossies.org/dox/xen-4.2.1/xen__vdi_8h.html)

```
xen_vm_get_by_uuid(XEN.session, &vm, uuid);
xen_vm_get_vbds(XEN.session,&vbd_set,vm);
for(int i=0; i<vbd_set->size; i++)
{
  xen_vbd_get_type(XEN.session,&vbd_type,vbd_set->contents[i]);
  //Just display VBD type, works well
  if(vbd_type==XEN_VBD_TYPE_CD) puts("CD");
  else if(vbd_type==XEN_VBD_TYPE_DISK ) puts("Disk");
  //Get VDI handle
  xen_vbd_get_vdi(XEN.session,&vdi,vbd_set->contents[i]);
  //The above returns 0, OK
  //Now I try to work with VDI
  if(!xen_vdi_get_type(XEN.session,&vdi_type,vdi))puts("fail");
  xen_vdi_free(vdi);

}
xen_vbd_set_free(vbd_set);
xen_vm_free(vm); 
```

在 xen_vdi_get_type 会话断开连接后，仅此而已。我只是不明白我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:53:43.823

这是如何做到的。它很简单......

```
xen_vm vm;  
xen_vbd_set *vbds;
xen_vbd_record *vbdr;
xen_vdi vdi;
xen_vdi_record *vdir;
enum xen_vbd_type vbd_type;
xen_vm_get_by_uuid(XEN.session,&vm,vm_uuid);
xen_vm_get_vbds(XEN.session, &vbds, vm);
for(int i=0;i<vbds->size;i++)
{       
    xen_vbd_get_record(XEN.session, &vbdr, vbds->contents[i]);
    xen_vbd_get_type(XEN.session, &vbd_type, vbds->contents[i]);
    if(vbd_type==XEN_VBD_TYPE_DISK)
    {
        xen_vbd_get_vdi(XEN.session, &vdi, vbds->contents[i]);              
        xen_vdi_get_record(XEN.session, &vdir, vdi);
        printf("%"PRId64"bytes\n",vdir->virtual_size);          
        xen_vdi_record_free(vdir);
        xen_vdi_free(vdi);
    }
    xen_vbd_record_free(vbdr);      
}
xen_vbd_set_free(vbds);
xen_vm_free (vm); 
```

# java - 如何通过已经运行的 Java 运行命令？

> ID：14340395
> 
> 赞同：1
> 
> 时间：2013-01-15T14:57:27.357
> 
> 标签：java, php, webserver

我想知道是否可以从 PHP 执行命令到已经运行的 Java 提示符？

我已经尝试过这里列出的解决方案： [如何通过 PHP 代码运行 shell 命令？](https://stackoverflow.com/questions/3684742/how-to-run-a-shell-command-through-php-code)

这没有提供任何功能

**让我解释**

java正在linux服务器的一个屏幕上运行

> sudo apt-get 安装屏幕

并通过命令行运行 .jar 文件。

然后我正在运行一个网络服务器，它将具有对受限区域的管理员访问权限，其中将包含通过已经运行的 .jar 文件运行特定命令的脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:02:20.093

您可以实现某种 IPC。java 文件监听一个端口并接收命令。或者您可以将命令写入 java 程序读取的特定文件中。我认为在linux下你也可以使用共享内存：[http ://www.php.net/manual/en/book.shmop.php](http://www.php.net/manual/en/book.shmop.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:26:49.840

可以通过将命令发送到屏幕会话来实现。我曾经将它用于我的世界服务器。

```
screen -S <sessionname> -X stuff "<command>\r" 
```

这将（IIRC）提供与您在屏幕内输入命令并按下回车键相同的输出。我希望这是你想要的。

# javascript - 如何根据行 id 为 td 元素创建 id？

> ID：14340399
> 
> 赞同：0
> 
> 时间：2013-01-15T14:57:31.443
> 
> 标签：javascript, jquery, html, html-table

我正在尝试根据它的行号生成 td 元素的 id。

我相信 td id 必须是唯一的。也许我错了？因此，我试图将行号与一些文本连接起来，但似乎无法让它工作。

我们在我们的网站上使用 jQuery，我可以成功创建基于变量的其他 id，但我有点卡在这个上。这是一个有效的例子

```
<td id="person-id${person.id}">${person.name}</td> 
```

html 稍后将类似于：

```
<td id="person1"></td><td id="person2"></td><td id="person3"></td> etc 
```

我希望为另一张桌子做这样的事情，但遇到了一些麻烦：

```
<td id="row-number("+rowIndex+")">some text here</td> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:19:42.977

我假设您想根据列号而不是行号分配 id。如果我在这个假设中是正确的，你可以像这样使用 jQuery 来做到这一点：

```
$("tr").each(function() {
 $(this).children().each(function() {
 var n = $(this).index();
 $(this).attr('id','person'+n);
 });
}); 
```

否则，如果您确实希望将行号分配给 id，它将是：

```
$("tr").each(function() {
 $(this).children().each(function() {
 var n = $(this).parent().index();
 $(this).attr('id','person'+n);
 });
}); 
```

瞧。

# jpa - 无法从实体创建表。JTA 和 Glassfish

> ID：14340401
> 
> 赞同：2
> 
> 时间：2013-01-15T14:57:36.883
> 
> 标签：jpa, glassfish, eclipselink, jta

我有一个关于 Glassfish 的 JTA 的问题。几天来，我试图解决这个问题。我想在数据库中编写一个实体。为了简单起见，我使用 GlassfishDB。在 Glassfish 管理控制台中，我使用

> jdbc/__default

作为资源。连接池的 Ping 工作正常。在persistence.xml 中，我声明我正在使用JTA，并且jdbc/__ 默认是我的资源。如果我尝试从字段创建表，则会出现异常：

```
[EL Info]: EclipseLink, version: Eclipse Persistence Services - 2.0.1.v20100213-r6600
java.lang.NullPointerException
at `enter code here`com.sun.enterprise.naming.impl.SerialContext.getRemoteProvider(SerialContext.java:297)
at com.sun.enterprise.naming.impl.SerialContext.getProvider(SerialContext.java:271)
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:430)
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:569)
at javax.naming.InitialContext.lookup(InitialContext.java:415)
at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:110)
at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:94)
at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:584)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:228)
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:369)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getServerSession(EntityManagerFactoryImpl.java:151)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:207)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:195)
at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.perform(Main.java:85)
at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.execute(Main.java:76)
at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.main(Main.java:63)
[EL Severe]: Local Exception Stack: 
Exception [EclipseLink-7060] (Eclipse Persistence Services - 2.0.1.v20100213-r6600):           
org.eclipse.persistence.exceptions.ValidationException
Exception Description: Cannot acquire data source [jdbc/__default].
Internal Exception: javax.naming.NamingException: Lookup failed for 'jdbc/__default' in   
SerialContext  [Root exception is javax.naming.NamingException: Unable to acquire   
SerialContextProvider for SerialContext  [Root exception is   
java.lang.NullPointerException]]
at org.eclipse.persistence.exceptions.ValidationException.cannotAcquireDataSource(ValidationException.java:451)
at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:116)
at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:94)
at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:584)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:228)
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:369)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getServerSession(EntityManagerFactoryImpl.java:151)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:207)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:195)
at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.perform(Main.java:85)
at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.execute(Main.java:76)
at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.main(Main.java:63)
 Caused by: javax.naming.NamingException: Lookup failed for 'jdbc/__default' in    
 SerialContext  [Root exception is javax.naming.NamingException: Unable to acquire      
 SerialContextProvider for SerialContext  [Root exception is  
 java.lang.NullPointerException]] 
```

persistence.xml 是：

```
 <?xml version="1.0" encoding="UTF-8"?>
   <persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence"   
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence   
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
 <persistence-unit name="Test" transaction-type="JTA">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <jta-data-source>jdbc/__default</jta-data-source>
 </persistence-unit>
   </persistence> 
```

`<resources>`Glassfish 的 domain.xml 的 - 部分是：

```
-<resources> 
  <jdbc-resource object-type="system-admin" jndi-name="jdbc/__TimerPool" pool-  
  name="__TimerPool"/> 
  <jdbc-resource jndi-name="jdbc/__default" pool-name="DerbyPool"/> 
 -<jdbc-connection-pool name="__TimerPool" res-type="javax.sql.XADataSource"  
   datasource-classname="org.apache.derby.jdbc.EmbeddedXADataSource"> 
  <property name="databaseName"   
   value="${com.sun.aas.instanceRoot}/lib/databases/ejbtimer"/> 
  <property name="connectionAttributes" value=";create=true"/> 
  </jdbc-connection-pool>  
  -<jdbc-connection-pool name="DerbyPool" res-type="javax.sql.DataSource" datasource- 
   classname="org.apache.derby.jdbc.ClientDataSource" is-isolation-level-
   guaranteed="false"> <property name="PortNumber" value="1527"/> 
   <property name="Password" value="APP"/> 
   <property name="User" value="APP"/> <property name="serverName" value="localhost"/>  
   <property name="DatabaseName" value="sun-appserv-samples"/> 
   <property name="connectionAttributes" value=";create=true"/> 
   </jdbc-connection-pool> 
   -<jdbc-connection-pool name="PostSQLPool" res-type="javax.sql.DataSource"  
    datasource-classname="org.postgresql.ds.PGSimpleDataSource" ping="true"> 
   <property name="databaseName" value="PostSQLDatenbank"/> 
   <property name="password" value="philipp"/> <property name="portNumber" 
   value="5432"/> 
   <property name="serverName" value="localhost"/> 
   <property name="user" value="postgres"/> 
   <property name="URL" value="URL=jdbc:postgresql://localhost:5432/Time"/> 
   </jdbc-connection-pool> -
   <jdbc-connection-pool name="PostPool" res-
   type="javax.sql.DataSource" datasource- 
   classname="org.postgresql.ds.PGSimpleDataSource" ping="true"> 
   <property name="Url" value="jdbc:postgresql://localhost:5432/PostSQLDatenbank"/> 
   <property name="URL" value="jdbc:postgresql://localhost:5432/PostSQLDatenbank"/>  
   <property name="databaseName" value="PostSQLDatenbank"/> 
   <property name="password" value="philipp"/> 
   <property name="portNumber" value="5432"/> 
   <property name="serverName" value="localhost"/> 
   <property name="user" value="postgres"/> 
   </jdbc-connection-pool> 
 </resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:57:14.143

从您的堆栈跟踪来看，您似乎在 Glassfish 之外运行，要使用 Glassfish 数据源，您需要在服务器内部运行。

如果要在 Glassfish 之外运行，则需要直接指定 JDBC 连接 URL。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Runtime#Java_Standard_Edition](http://en.wikibooks.org/wiki/Java_Persistence/Runtime#Java_Standard_Edition)

# java - Java PrintWriter 不弹出打印纸

> ID：14340406
> 
> 赞同：1
> 
> 时间：2013-01-15T14:57:45.390
> 
> 标签：java, sockets, printing, wifi, printwriter

我正在尝试从 Java 程序测试打印。我目前有

```
 Socket s = new Socket(printer_ip, 9100);

 PrintWriter pw = new PrintWriter(s.getOutputStream());

 pw.println("This is a print test");

 pw.println("\n\n\n");

 pw.flush();

 pw.close();

 s.close(); 
```

该程序确实将文本打印到打印机，但它不会弹出纸张。？？？我还缺少什么？

我认为在flush（）之后它会识别出输入已经完成，它应该在close（）之后结束流。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:00:33.180

`PrintWriter`不适用于打印到文字打印机。它用于将字符写入输出设备（通常是控制台）。你应该看看这个[关于 Java Printing 的教程](http://docs.oracle.com/javase/tutorial/2d/printing/index.html)，因为它比你的代码示例复杂一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:08:53.293

这有点取决于您使用的打印机以及用于打印它的界面。

您完全可以打印的事实告诉我您的打印机处于打印 ASCII 文本的模式。这就是过去所有老式拖拉机馈送点阵打印机的工作方式，但现代激光和喷墨打印机的工作方式并非如此。现代打印机打印整页，而不仅仅是行。

但是，如果您使用的是旧打印机或模仿打印机的界面，则需要做两件事之一。

一，您可以向打印机发送一个 FORMFEED 字符，即 ASCII 代码 14（或 Control-L）。许多打印机将采用该字符并前进到下一页。

另一种技术是预先知道一页上有多少行，跟踪打印了多少行，然后当您想要前进页面时，只需将许多额外的新行打印到打印机以将其前进一行线。

大多数具有标准纸张和字体大小的通用打印机，如果您使用的是 8.5 x 11" 纸张，则为每页 66 行或每英寸 6 行。但打印机可以使用不同的字体，这不会影响这一点。所以，检查你的打印机。一个简单的测试是简单地打印 100 行编号，然后查看页面上有多少行。

因此，对于您的示例，您打印了 4 行，并且您需要打印额外的 62 行才能前进到下一页。

这两种技术都有其目的和用途。FORMFEED 很好，因为它是一个简单的命令，您不必跟踪任何内容，但这也意味着打印机必须“知道”一页有多长。

如果您使用同一台打印机打印一堆不同尺寸的表格，那么将打印机重置为不同的尺寸可能会让用户感到痛苦（打印机并不以拥有世界上最好的用户界面而闻名），所以，相反，计算机知道页面大小并简单地推进行。这可以使表单交换更容易。

# c# - 访问搜索结果

> ID：14340408
> 
> 赞同：0
> 
> 时间：2013-01-15T14:57:47.520
> 
> 标签：c#, winforms, search

我正在开发一个 winform 应用程序，它将在指定源目录的文件名中搜索一个字符串。问题是我需要访问该文件。

示例：搜索结果是 .flv 或 .swf - 搜索完成后 .. 结果应该可以访问。

这是我到目前为止..

```
private void button1_Click(object sender, EventArgs e)
        {

            txtOutput.Text = "";

            foreach (string file in Directory.GetFiles("C:\\Users\\John\\Desktop\\Sample"))
                if (Path.GetFileName(file).Contains(txtSearch.Text))
                    txtOutput.Text += txtOutput.Text + file + ", ";
        } 
```

使用此代码，我可以搜索文件，但无法访问它.. 搜索的输出也带有文件的路径.. （类似这样的 c:\users\John\desktop\sample\Filename.swf ) 我只需要一个文件名，而不是整个路径..

我正在使用多行文本框进行输出，我应该使用其他东西吗？..如果您有更好的建议，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:27:46.177

如果您要查找具有特定扩展名的文件，请使用`EnumerateFiles`Directory.GetFiles[方法](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)的搜索模式。还使用[Path.GetFileName](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename%28v=vs.110%29.aspx)从文件路径获取文件名：

```
var path = "C:\\Users\\John\\Desktop\\Sample";
txtOutput.Text = String.Join(", ", Directory.GetFiles(path, "*" + txtSearch.Text)
                                            .Select(f => Path.GetFileName(f)); 
```

您`txtSearch.Text`假设具有搜索文件的扩展名（即`.swf`或`.flv`）。因此搜索模式将是`*.swf`or `*.flv`。

因此，如果您的搜索文本框有文本`.swf`并且您的示例目录中有两个 sfw 文件，那么您将获得输出为`file1.swf, file2.swf`.

* * *

如果要搜索文件名中的任何子字符串：

```
var path = "C:\\Users\\John\\Desktop\\Sample";
txtOutput.Text = 
     String.Join(", ", Directory.GetFiles(path, "*" + txtSearch.Text + "*")
                                .Select(f => Path.GetFileName(f))); 
```

而不是多行文本框，使用列表框来显示文件：

```
listBox1.DataSource = Directory.GetFiles(path, "*" + txtSearch.Text + "*")
                               .Select(f => Path.GetFileName(f))
                               .ToList(); 
```

更新：打开文件

```
private void listBox1_DoubleClick(object sender, EventArgs e)
{
    var fileName = listBox1.SelectedItem as string;
    if (fileName != null)
    {
        var path = Path.Combine("C:\\Users\\John\\Desktop\\Sample", fileName);
        Process.Start(path);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:44:49.890

你已经接近了，这里有一些我会做的改变：

创建一个 ListBox 而不是多行文本框。它甚至允许您以这种方式处理项目上的双击。对于我的示例，ListBox 名称是 ListBox1。

将您的 button1_Click 方法更改为：

```
private void button1_Click(object sender, EventArgs e)
    {
        // You can add your seach text right to the GetFiles command, this will only  return files that match. 
        // You can set the list of of items int he ListBod to the result of GetFiles instead of having to loop through as well.
        listBox1.Items.AddRange(Directory.GetFiles(@"C:\Users\John\Desktop\Sample", "*" + txtSearch.Text + "*"));
    } 
```

然后处理 ListBox1_DoubleClick：

```
 private void listBox1_DoubleClick(object sender, EventArgs e)
    {
        // This will run whatever file name the user double-clicked
        System.Diagnostics.Process.Start(listBox1.SelectedItem.ToString());
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:20:31.767

```
 private void button1_Click(object sender, EventArgs e)
    {

        txtOutput.Text = "";
        List<string> fileNames = new List<string>();
        foreach (string file in Directory.GetFiles("C:\\Users\\John\\Desktop\\Sample")){
            if (Path.GetFileName(file).Contains(txtSearch.Text)){
                txtOutput.Text += txtOutput.Text + file + ", ";
                fileNames.Add(file);
            }
        }

    } 
```

所以在这里你可以使用文件名列表中的文件。

# shell - 执行这个 shell 脚本会给出 command not found 错误

> ID：14340412
> 
> 赞同：1
> 
> 时间：2013-01-15T14:58:01.187
> 
> 标签：shell, unix, wget

我是 shell 脚本的新手。我正在尝试编写一个脚本，该脚本逐行从文本文件中读取 URL，然后使用`wget`. 我还需要解析日志文件以获取错误消息。

```
#!/bin/sh
# SCRIPT:  example.sh

#reading the url file line by line

DIR = /var/www/html/

# wget log file
LOGFILE = wget.log

# wget output file
FILE = dailyinfo.`date +"%Y%m%d"`

cd $DIR

FILENAME = url.txt
cat $FILENAME | while read LINE
do
    echo "$LINE"
    wget $LINE -O $FILE -o $LOGFILE
done 
```

我已经更改了使用权限，`chmod +x example.sh` 但在执行时我得到`command not found`了`DIR`,`FILE`和`LOGFILE`. 如何纠正它？另外如何进行解析部分？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T15:02:00.197

问题`#1`，在分配变量时，您必须使用以下语法：

```
VARIABLE=value 
```

即在`VARIABLE`the`=`和新值之间没有空格。

否则，它会尝试`VARIABLE`作为命令执行，这会触发`command not found`错误。

```
#!/bin/sh
# SCRIPT:  example.sh

#reading the url file line by line

DIR=/var/www/html/

# wget log file
LOGFILE=wget.log

# wget output file
FILE=dailyinfo.`date +"%Y%m%d"`

cd $DIR

FILENAME=url.txt
cat $FILENAME | while read LINE
do
    echo "$LINE"
    wget $LINE -O $FILE -o $LOGFILE
done 
```

可能会通过命令未找到错误

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T15:00:42.797

Petesh 当然是正确的，您需要将`=`符号直接放在变量名之后。

对于这种特殊情况，我建议您使用`wget -i input-urls.txt -o logfile.txt`，然后 grep 日志文件以查找错误。wget 的`-i`标志从文本文件中读取 URL 列表，并“wgets”每个 URL，从而节省您重新发明轮子的时间。

如果您想在 shell 脚本中使用它，请使用以下内容：

```
#!/bin/sh
DIR=/var/www/html/
# wget log file
LOGFILE=wget.log
# wget output file
FILE=dailyinfo.`date +"%Y%m%d"`

# just for debugging
cd $DIR
echo "wget-ing urls from $FILE and writing them to $FILE in $DIR. Saving logs to $LOGFILE"

wget -i $FILE -o $LOGFILE
grep -i 'failed' logfile.txt 
```

这是来自日志文件的示例错误：

```
--2013-01-15 15:01:59--  http://foo/
Resolving foo... failed: nodename nor servname provided, or not known.
wget: unable to resolve host address ‘foo’ 
```

检查 wget 的返回码也很有用。`0`表示成功，非零值表示各种失败。您可以通过访问 shell 变量来检查它们`$?`。

因此，结合它，这是一个示例脚本：

```
#!/bin/sh
wget -i input-urls.txt -o logfile.txt
if [ $? -eq 0 ]; then
    echo "All good!"
else
    # handle failure
    grep -i 'failed' logfile.txt
fi 
```

如果您需要更多详细信息，wget 的返回代码列在手册页上（`man wget`或使用类似[这样的在线资源）。](http://www.gnu.org/software/wget/manual/wget.html#Exit-Status)我给了它一个快速的实验，看起来 wget 返回一个非零的退出代码，即使只有一个 URL 触发了失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T06:09:10.017

我刚刚遇到了与 tcsh 相同的错误消息`: Command not found.`

奇怪的是，它是由行尾引起的。相同的脚本适用于 LF 结尾，但以 CRLF 结尾失败。

# php - 替换BBCode引号的PHP方法

> ID：14340415
> 
> 赞同：1
> 
> 时间：2013-01-15T14:58:09.387
> 
> 标签：php, regex, bbcode

我需要使用 PHP 替换 phpBB3 论坛中的 BBCode 引号。引用的帖子如下所示：

```
[quote=&quot;John Doe&quot;:2sxn61wz][quote=&quot;Bob&quot;:2sxn61wz]Some text from Bob[/quote:2sxn61wz]Some text from John Doe[/quote:2sxn61wz]Some more text 
```

我想解析这个字符串并最终得到一个数组，如：

```
Array (

    [0] => Array (

        [0] => 'John Doe' 
        [1] => 'Some text from John Doe'
    )

    [1] => Array (

        [0] => 'Bob' 
        [1] => 'Some text from Bob'
    )
) 
```

递归查找这些引用块及其内容的最佳方法是什么？在此先感谢您的帮助！

**正如评论中所建议的：**

```
$str = '[quote=&quot;John Doe&quot;:2sxn61wz][quote=&quot;Bob&quot;:2sxn61wz]Some text from Bob[/quote:2sxn61wz]Some text from John Doe[/quote:2sxn61wz]Some more text';
$uid = '2sxn61wz';

print_r(quoteParser($str, $uid));

function quoteParser($str, $uid) {

    $pattern = "#\[quote(?:=&quot;(.*?)&quot;)?:$uid\]((?!\[quote(?:=&quot;.*?&quot;)?:$uid\]).)?#ise";

    echo "Unparsed string: " . $str . "<br /><br />";
    echo "Pattern: " . $pattern . "<br /><br />";

    preg_match_all($pattern, $str, $matches);

    return $matches;
} 
```

**输出：**

```
Array ( [0] => Array ( [0] => [quote="John Doe":2sxn61wz] [1] => [quote="Bob":2sxn61wz]S ) [1] => Array ( [0] => John Doe [1] => Bob ) [2] => Array ( [0] => [1] => S ) ) 
```

这正是我所需要的，但我没有得到引用的文字。只有用户名。有什么帮助吗？感谢到目前为止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T03:21:11.357

显然您想要的是将您的 BBCode 输出转换为 HTML。如果您愿意，可以检查该[**`bbcode_create()`**](http://php.net/manual/en/function.bbcode-create.php)功能。否则，我相信不同的递归 - 格式化你的文本 - 是一个更好的选择。

```
<style type="text/css">

    body {
        font-size:.9em;
        font-family:Arial, Helvetica, sans-serif;
    }

    .post {
        margin:1em;
        padding:1em;
        font-size:1em;
        border:1px solid #999;
    }
    .post > .text {margin:1em .4em}
    .post > div:first-child {margin-top:0}
    .post > div:last-child {margin-bottom:0}

    .post > .quote {border-color:#CCC}
    .quote {
        margin:1em 2em;
        background-color:#F9F9F9;
        border:1px solid #AAA;
        font-style:italic;
    }
    .quote .text {margin:.7em 1em}
    .quote .author {
        color:#039;
        font-size:.8em;
        background-color:#E0E0E0;
        padding:.5em .8em;
        margin:.5em;
    }
    .author a {
        font-weight:bold;
        text-decoration:none;
        color:inherit;
    }
    .author a:hover {text-decoration:underline;}

</style> 
```

* * *

```
function str2html($str,$className='post') {
    $patPost =
    '~(
        \[quote=&quot;(?:(?!&quot;).)+&quot;:(\w+)(?:\])
            (?:
                (?(?=\[quote=&quot;(?:(?!&quot;).+)&quot;:\w+\])
                    (?R)
                    |
                    (?(?!\[/quote:\2\]).)
                )*
            )
        \[/quote:\2\]
    )~xis';
    // note that these 2 are not identical
    $patQuote =
    '~
        (\[quote=&quot;((?:(?!&quot;).)+)&quot;:(\w+)(?:\]))
            (
                (?(?=\[quote=&quot;(?:(?!&quot;).+)&quot;:\w+\])
                    (?R)
                    |
                    (?(?!\[/quote:\3\]).)
                )*
            )
        (\[/quote:\3\])
    ~xis';

    $arr = preg_split($patPost,$str,-1,PREG_SPLIT_DELIM_CAPTURE);
    foreach ($arr as &$value) $value = trim($value);
    unset($value);
    //echo '<h2>split post</h2>'; print_r($arr);

    $res = empty($className) ? '' : "<div class=\"{$className}\">";
    for ($i = 0; $i < count($arr); $i += 3) {
        if (!empty($arr[$i]))
            $res .= '<div class="text">' . $arr[$i] . '</div>';
        if (!empty($arr[$i+1]))
            $res .= preg_replace_callback($patQuote,'replaceQuote',$arr[$i+1]);
    }
    $res .= empty($className) ? '' : '</div>';
    return $res;
}
function replaceQuote($m) {
    //echo '<h2>replacing quotes</h2>'; print_r($m);
    $res = '<div class="quote">';
    $res .= '<div class="author">';
    $res .= '<a href="">' . $m[2] . '</a> wrote:';
    $res .= '</div>';
    $res .= str2html($m[4],'');
    $res .= '</div>';
    return $res;
} 
```

您可以通过 调用它`echo str2html('some string here')`。你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T17:27:47.257

这是一个递归版本。它匹配字符串中的所有引号。我就是这样做的。如果整个目的是在 html 中更好地显示每个代码，那么我将使用适当的正则表达式模式修改内容，而不是匹配这些代码。

```
$str =  '[quote=&quot;John Doe&quot;:2sxn61wz]' .
        '[quote=&quot;Bob&quot;:2sxn61wz]' .
        'Some text from Bob[/quote:2sxn61wz]' .
        'Some text from John Doe[/quote:2sxn61wz]' . 
        'Some more text';
$str .= '[quote=&quot;MrUpsidown&quot;:2sxn61wz]Some other quote[/quote:2sxn61wz]';
//$str .= '[quote=&quot;MrUpsidown&quot;:2sxn61wz]Yet another one[/quote:2sxn61wz]';

$pat =
'~
    \[quote=&quot;((?:(?!&quot;).)+)&quot;:(\w+)(?:\])
        (
            (?(?=\[quote=&quot;(?:(?!&quot;).+)&quot;:\w+\])
                (?R)
                |
                (?(?!\[/quote:\2\]).)
            )*
        )
    \[/quote:\2\]
~xis';

preg_match_all($pat,$str,$matches);
echo '<h2>Matches:</h2>'; print_r($matches);

$quotes = array();

function replaceQuote($m) {
    global $curArr; global $pat;
    $curArr[] = array(
        'name'  => $m[1],
        'quote' => preg_replace_callback(
            $pat,'replaceQuote',$m[3]
        )
    );
    return preg_replace($pat,'',$m[0]);
}

if (!empty($matches[0])) {
    foreach ($matches[0] as $k => $v) {
        $quotes[] = array(
            array(
                'name'  => $matches[1][$k],
                'quote' => $matches[3][$k]
            )
        );
        $curArr = &$quotes[count($quotes)-1];
        $curArr[0]['quote'] = preg_replace_callback(
            $pat,'replaceQuote',$curArr[0]['quote']
        );
    }
    unset($curArr);
}

echo '<h2>Result:</h2>'; print_r($quotes); 
```

这是输出。

> ## 火柴：
> 
> ```
>  Array
>         (
>             [0] => Array
>                 (
>                     [0] => [quote="John Doe":2sxn61wz][quote="Bob":2sxn61wz]Some text from Bob[/quote:2sxn61wz]Some text from John Doe[/quote:2sxn61wz]
>                     [1] => [quote="MrUpsidown":2sxn61wz]Some other quote[/quote:2sxn61wz]
>                 )
> 
>             [1] => Array
>                 (
>                     [0] => John Doe
>                     [1] => MrUpsidown
>                 )
> 
>             [2] => Array
>                 (
>                     [0] => 2sxn61wz
>                     [1] => 2sxn61wz
>                 )
> 
>             [3] => Array
>                 (
>                     [0] => [quote="Bob":2sxn61wz]Some text from Bob[/quote:2sxn61wz]Some text from John Doe
>                     [1] => Some other quote
>                 )
> 
>         ) 
> ```
> 
> ## 结果：
> 
> ```
>  Array
>     (
>         [0] => Array
>             (
>                 [0] => Array
>                     (
>                         [name] => John Doe
>                         [quote] => Some text from John Doe
>                     )
> 
>                 [1] => Array
>                     (
>                         [name] => Bob
>                         [quote] => Some text from Bob
>                     )
> 
>             )
> 
>         [1] => Array
>             (
>                 [0] => Array
>                     (
>                         [name] => MrUpsidown
>                         [quote] => Some other quote
>                     )
> 
>             )
> 
>     ) 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T15:42:27.307

尝试这样的事情：

```
$str = '[quote="John Doe":2sxn61wz][quote="Bob":2sxn61wz]Some text from Bob[/quote:2sxn61wz]Some text from John Doe[/quote:2sxn61wz]Some more text';

$quotes=array();

$quotes[]=quoteParser($str,$quotes);
print_r($quotes);

function quoteParser($str,&$quotes) {

    $pattern = "/\[quote(?:=&quot;(.*?)&quot;)?:.{8}?\](.*)\[\/quote:2sxn61wz\](.*)/ise";

    echo "Unparsed string: " . $str . "&lt;br /&gt;&lt;br /&gt;";
        echo "Pattern: " . $pattern . "&lt;br /&gt;&lt;br /&gt;";
    preg_match_all($pattern, $str, $matches);
        if(empty($matches[0][0]))
        return false;

    $var=quoteParser($matches[2][0],$quotes);
        $quotes[]=array($matches[1][0],$var?$var:$matches[2][0]);
    return $matches[3][0];
    } 
```

输出：

Array ( [0] => Array ( [0] => Bob [1] => Some text from Bob ) [1] => Array ( [0] => John Doe [1] => Some text from John Doe ) [2] => 更多文字）

# testing - 无法连接到 iTunes Store

> ID：14340422
> 
> 赞同：1
> 
> 时间：2013-01-15T14:58:35.080
> 
> 标签：testing, in-app-purchase

我们应用程序的旧版本不支持 InApp。但是，我们在新版本中包含了该功能。我们正在沙盒环境中对其进行测试，方法是按照 InApp 文档中的说明创建一个测试用户。删除旧版本，然后添加新版本有效。但问题是，如果我们将现有版本（不支持 InApp）更新到当前版本（支持 InApp）并尝试购买，它会发出“无法连接到 iTunes Store”消息的警报。我们如何解决这个问题？这是因为沙盒测试环境而发生的吗？

# iis - 如何使用 VBScript 复制和重命名拆分的 *.rar 档案？

> ID：14340425
> 
> 赞同：0
> 
> 时间：2013-01-15T14:58:42.577
> 
> 标签：iis, vbscript, rar, filesystemobject, file-copying

我的服务器上有一个 VB 脚本 (*.vbs)，它通过内置的 FileSystemObject 检查是否存在这样的文件......

```
"C:\path\{filename}.weekly.rar" 
```

如果存在，则将文件复制到同一路径中，但重命名为以下内​​容

```
"C:\path\{filename}.monthly.rar" 
```

使用此代码

```
Set fso = CreateObject("Scripting.FileSystemObject")
If fso.FileExists("C:\path\{filename}.weekly.rar") = True Then
    fso.CopyFile "C:\path\{filename}.weekly.rar", "C:\path\{filename}.monthly.rar", True
End If 
```

有时，*.rar 存档可以拆分为多个文件，所以我在文件夹中

```
"C:\path\{filename}.weekly.part01.rar"
"C:\path\{filename}.weekly.part02.rar"
"C:\path\{filename}.weekly.part03.rar"
... 
```

如何检查拆分的文件是否也存在，然后将它们重命名在同一位置，例如

```
"C:\path\{filename}.monthly.part01.rar"
"C:\path\{filename}.monthly.part02.rar"
"C:\path\{filename}.monthly.part03.rar"
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:52:14.817

我已经用下面的代码解决了这个问题

```
Sub CopyRenamed(folder, find_str, replace_with)
    Set fso = CreateObject("Scripting.FileSystemObject")
    Dim d : Set d = fso.GetFolder(folder)
    Dim f : Set f = d.Files
    Dim file
    For Each file In f
        If InStr(1, file.Name, find_str) > 0 Then
            fso.CopyFile file.Path, fso.BuildPath(folder, Replace(file.Name, find_str, replace_with)), True
        End If
    Next
    Set fso = Nothing   
End Sub 
```

# jquery - jscrollpane 插件 - 滑块覆盖箭头

> ID：14340429
> 
> 赞同：0
> 
> 时间：2013-01-15T14:58:49.963
> 
> 标签：jquery, jscrollpane

我正在使用 jscrollpane 插件作为滚动条。当滑块到达滚动条的末端时，它会覆盖滚动条的箭头。一个例子在这里：http: [//jscrollpane.kelvinluck.com/arrow_positions.html](http://jscrollpane.kelvinluck.com/arrow_positions.html)。我怎样才能改变这个？即使滑块处于此位置，我也希望显示箭头图像。

在第二张示例图片中，向上箭头被覆盖。

![在此处输入图像描述](../Images/c99dba9a23d9ea18da3b4068bba5885a.png) ![在此处输入图像描述](../Images/6ce50778d6c769828b1366ff7a23deed.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:27:25.233

.jspArrowUp.jspDisabled 背景未设置。

# php - PHP 中的 Mustache Partials - 我如何使用它们？

> ID：14340437
> 
> 赞同：15
> 
> 时间：2013-01-15T14:59:11.310
> 
> 标签：php, mustache

语境：

我已经阅读了尽可能多的 Mustache 文档，但我无法理解如何使用部分内容，甚至无法理解我是否以正确的方式使用 Mustache。

下面的代码工作正常。我的问题是我想同时包含和渲染三个 Mustache 文件。

我猜这就是部分的意思，但我似乎无法让它发挥作用。

* * *

问题：

我如何在这种情况下获得部分工作，以便我的三个 Mustache 文件正在加载并且都被传递给 $data 变量？

我应该以这种方式为模板使用 file_get_contents 吗？我已经看到在它的位置使用了 Mustache 函数，但我找不到足够广泛的文档来让它工作。

* * *

环境：

我正在使用来自[https://github.com/bobthecow/mustache.php的最新版本的 Mustache](https://github.com/bobthecow/mustache.php)

我的文件是：
index.php （下面）
template.mustache
template1.mustache
template2.mustache
class.php

* * *

代码：

```
// This is index.php
// Require mustache for our templates
require 'mustache/src/Mustache/Autoloader.php';
Mustache_Autoloader::register();

// Init template engine
$m = new Mustache_Engine;

// Set up our templates
$template   = file_get_contents("template.mustache");

// Include the class which contains all the data and initialise it
include('class.php');
$data = new class();

    // Render the template
print $m->render( $template, $data ); 
```

* * *

谢谢你：

任何 PHP 实现的部分示例（包括必要的文件结构需要如何）将不胜感激，这样我才能得到一个扎实的理解:)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-15T18:22:58.787

最简单的是使用“文件系统”模板加载器：

```
<?php
// This is index.php
// Require mustache for our templates
require 'mustache/src/Mustache/Autoloader.php';
Mustache_Autoloader::register();

// Init template engine
$m = new Mustache_Engine(array(
    'loader' => new Mustache_Loader_FilesystemLoader(dirname(__FILE__))
));

// Include the class which contains all the data and initialise it
include('class.php');
$data = new class();

// Render the template
print $m->render('template', $data); 
```

然后，假设你`template.mustache`看起来像这样：

```
{{> template2 }}
{{> template3 }} 
```

`template2.mustache`和`template3.mustache`模板会在需要时从当前目录自动加载。

请注意，此加载器用于原始模板和部分模板。例如，如果您将部分内容存储在子目录中，则可以为部分内容添加第二个加载程序：

```
<?php
$m = new Mustache_Engine(array(
    'loader'          => new Mustache_Loader_FilesystemLoader(dirname(__FILE__).'/views'),
    'partials_loader' => new Mustache_Loader_FilesystemLoader(dirname(__FILE__).'/views/partials')
)); 
```

[Mustache.php wiki](https://github.com/bobthecow/mustache.php/wiki)上有关于这些和其他`Mustache_Engine`选项的更多信息。

# ruby - 尝试授权服务器到 ruby 中的服务器类型应用程序以访问 Google 日历时授权无效

> ID：14340440
> 
> 赞同：6
> 
> 时间：2013-01-15T14:59:21.480
> 
> 标签：ruby, sinatra, google-api, google-calendar-api

我正在尝试为自己创建一个直接连接到我的日历的应用程序......但我从不想参与重新验证。我只想对身份验证进行一次编码并完成它。

验证码如下：

```
key = Google::APIClient::PKCS12.load_key(SERVICE_ACCOUNT_PKCS12_FILE_PATH, PASSWORD)
asserter = Google::APIClient::JWTAsserter.new(
    SERVICE_ACCOUNT_EMAIL,
    'https://www.googleapis.com/auth/calendar', 
    key)
@client = Google::APIClient.new
@client.authorization = asserter.authorize#(SERVICE_ACCOUNT_EMAIL)
@client 
```

我的`SERVICE_ACCOUNT_...PKCS .`文件与我的 Sinatra 应用程序一起位于目录的根目录中。
我在我的 gmail 帐户上启用了 Google Calendar API。

我一直在这里查看一种身份验证方法： [https](https://code.google.com/p/google-api-ruby-client/) ://code.google.com/p/google-api-ruby-client/ （在授权下，它谈论服务器到服务器的通信）

```
$ ruby server.rb 
Faraday: you may want to install system_timer for reliable timeouts
/home/me/.rvm/gems/ruby-1.8.7-p371/gems/faraday-0.8.4/lib/faraday/utils.rb:16: warning: already initialized constant KeyMap
/home/me/.rvm/gems/ruby-1.8.7-p371/gems/faraday-0.8.4/lib/faraday/utils.rb:177: warning: already initialized constant DEFAULT_SEP
W, [2013-01-15T09:52:11.371122 #28607]  WARN -- : Google::APIClient - Please provide :application_name and :application_version when initializing the client
/home/me/.rvm/gems/ruby-1.8.7-p371/gems/signet-0.4.4/lib/signet/oauth_2/client.rb:869:in `fetch_access_token': Authorization failed.  Server message: (Signet::AuthorizationError)
{
  "error" : "invalid_grant"
}
    from /home/me/.rvm/gems/ruby-1.8.7-p371/gems/signet-0.4.4/lib/signet/oauth_2/client.rb:882:in `fetch_access_token!'
    from /home/me/.rvm/gems/ruby-1.8.7-p371/gems/google-api-client-0.6.1/lib/google/api_client/auth/jwt_asserter.rb:116:in `authorize'
    from server.rb:32:in `build_client'
    from server.rb:38 
```

可能是什么问题？为什么我会收到此错误？- 特别是因为我几乎从 google gem 的网站上复制了代码。

更新：

发现这个：

[invalid_grant 试图从谷歌获取 oAuth 令牌](https://stackoverflow.com/questions/10576386/invalid-grant-trying-to-get-oauth-token-from-google)

说我应该这样做：“确保在请求中指定 access_type=offline。”

我如何用红宝石宝石做到这一点？没有完全重新做http请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-23T03:56:26.603

这是一个工作代码，除了最后一行之外，它应该具有实际拥有日历的用户（您）的电子邮件。我假设服务帐户电子邮件不是您的电子邮件。

```
client_asserter = Google::APIClient::JWTAsserter.new(
    config['client_email'],
    PLUS_LOGIN_SCOPE,
    key
)
$client.authorization = client_asserter.authorize(config['user_email']) 
```

此外，请确保正确创建服务帐户。我使用了本指南：[https://developers.google.com/+/domains/authentication/delegation](https://developers.google.com/+/domains/authentication/delegation)，这是针对域 API 的，但第一部分应该是相同的。

另外，您不需要另一个身份验证范围吗？

这是我必须为我工作的完整示例（红宝石）：[https ://github.com/admitriyev/propellant/blob/master/main.rb](https://github.com/admitriyev/propellant/blob/master/main.rb)

# svn - 合并从旧应用程序版本到主干的更改

> ID：14340448
> 
> 赞同：0
> 
> 时间：2013-01-15T14:59:40.457
> 
> 标签：svn, tortoisesvn

我有旧的应用程序版本。它是过去从外部公司提供给我的，它基本上是应用程序的实时版本。

虽然在此版本上执行了错误修复，但外部公司在现有版本上开发了新功能（重大模型更改）。现在我有旧的应用程序版本（实时）和最后一个应用程序版本（未经测试，需要更多更改）。

现在我想把所有这些都放在 svn 上，我已经完成了以下步骤：

1.  在主干文件夹中创建存储库并在那里添加新的应用程序版本文件
2.  在旧应用程序版本的分支文件夹中创建存储库
3.  在标签文件夹中为两个存储库创建标签。

在下一个时期，我应该继续在上一个版本（主干）上进行开发，同时修复旧版本（分支）上的错误。如何（每周）将分支版本的更改合并到主干？我尝试了合并选项，但结果真的很奇怪（某些文件夹的内容被完全删除），你认为这种情况的最佳解决方案是什么，我不想每次修复分支上的错误时都手动更改主干代码

谢谢，

明佳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:58:52.860

你在最初的步骤中犯了一些错误，结果有两段不相关的代码，Subversion 不知道它们的进化路径。

稍微修改的工作流程可能是：

对于具有默认单项目布局的空存储库（您当前的）

*   将 OLD-CODE 导入 /trunk（或使用 checkout+add+commit 添加文件）
*   将此树干分支到某个分支 ( `svn copy URL-OF-TRUNK URL-OF-BRANCH-OLDCODE`)
*   获取主干的 WC（`svn co`或使用步骤 1 中的 WC）
*   用 NEW-CODE 替换 WC 中的 OLD-CODE
*   提交主干

在此之后，您的后续合并将（只是稍微）不那么令人头疼的任务。只是一点点，因为在任何情况下合并变化很大的重构代码都不是一件容易的事，但你至少会有代码的连续历史和差异的共同父母。

**坏消息：对连续历史的需求决定了倒数第二步中代码替换操作的额外要求：如果新对象是旧对象的后代**（重构的孩子），您不能只删除过时的文件/目录并添加新的) - 您必须**支持父子之间的历史记录**（`svn mv`而不是 OS-replacement `svn rm`+的结果`svn add`和日志中不相关的文件）。最坏的消息：我不知道如何`svn mv`在合理的时间内以防弹的方式做到（找到所有候选人），只使用 Subversion

# coldfusion - 具有基于 ColdFusion 的应用程序的 Active Directory 联合服务 (ADFS) Web 代理？

> ID：14340452
> 
> 赞同：1
> 
> 时间：2013-01-15T14:59:46.037
> 
> 标签：coldfusion, web-config, single-sign-on, adfs

我正在研究 SSO，并将使用[Active Directory 联合服务](http://msdn.microsoft.com/en-us/library/bb897402.aspx)(ADFS 2.0) 作为实现此目的的手段。我充当服务提供商 (SP)，我的应用程序基于 ColdFusion 而不是 .NET。我是否可以设置 web.config 文件，以便我可以绕过[ADFS Web 代理](http://technet.microsoft.com/en-us/library/cc783116%28v=ws.10%29.aspx)并使用 ColdFusion 解析声明？我提前感谢你们可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:27:38.343

从未使用过 ColdFusion，但您需要一些 SAML 堆栈来执行此操作。

查看[SAML Service provider with coldfusion](https://stackoverflow.com/questions/11084193/saml-service-provider-with-coldfusion)，其中包含指向原始文章[SAML、SSO 和 ColdFusion](http://blog.tagworldwide.com/?p=19)的链接。

或者

ADFS 1.0 是 Windows Server 2008 上的默认设置。您必须通过它下载 ADFS 2.0。您可以返回 ADFS 1.0 并尝试使用 Web 代理路径，但请注意它是一个没有升级路径且文档很少的旧产品，例如在 Windows Server 2012 上，ADFS 2.0 是默认设置。

**更新：**

我可以让 ADFS 2.0 指向我的 Web 应用程序（Coldfusion），然后从那里消费/解析 cookie 吗？

否 - ADFS 是通过联合的 SSO 系统。您可以通过 WS-Fed 或 SAML 登录。然后它会查看 RP 配置。对于声明规则，然后用正确的声明铸造令牌，对其进行签名，可能对其进行加密，然后将其传回。如果不遵循此过程，就无法获得令牌。

# excel - 两列的内连接，它们的值不是 100% 相等

> ID：14340453
> 
> 赞同：0
> 
> 时间：2013-01-15T14:59:48.123
> 
> 标签：excel, ssis, inner-join

我有两个 excel 文件，一个有两列（ID1，名称），另一个有两列（ID2，名称），我需要导出一个包含三列（ID1，ID2，名称）的文件。

问题是每个文件中都有名称，而另一个文件中没有，更大的问题是在两个文件中写入相同名称时存在一些差异，这是文件语言的常见差异，例如阿拉伯语中的字符 'أ' 可以在没有 Hamza 'ا' 的情况下编写（我的意思是我不能使用两个字符串之间的标准相等操作来指定一个文件中的名称与另一个文件中的名称相同）。

我的问题是有任何工具可以在不为其编写代码的情况下提供帮助，我听说过 SQL 集成服务，但我对此一无所知，请您指出任何可以帮助解决问题的参考资料我的问题。

任何链接、建议或其他帮助将不胜感激。

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:11:07.907

你有一个有趣的问题，但不幸的是在这种情况下有趣=困难。对于英文类型名称，我们可以使用许多名称匹配算法（双变位、最小编辑距离、Damerau-Levenshtein 距离等），但我不知道这些算法在阿拉伯语等丰富语言中的效果如何。[我在 SU https://superuser.com/questions/480133/record-matching-software-to-compare-two-tables-and-match-on-based/481592](https://superuser.com/questions/480133/record-matching-software-to-compare-two-tables-and-match-on-based/481592)上回答了一个类似的问题

试试 SSIS 的模糊功能不会有什么坏处：[模糊查找](http://msdn.microsoft.com/en-us/library/ms137786.aspx)和[模糊分组](http://msdn.microsoft.com/en-us/library/ms137786.aspx)。在您的情况下，模糊分组是您想要尝试的。这些是企业版功能，因此请从许可的角度了解这一点。它们将在您的开发版中正常工作，但如果您部署并尝试在 SQL Server 的标准版上运行，它将失败。

# c - “否决”和“硬块”有什么区别？

> ID：14340454
> 
> 赞同：2
> 
> 时间：2013-01-15T14:59:48.453
> 
> 标签：c, windows, kernel, firewall, wfp

以下代码是否称为“否决”、“硬块”或两者兼而有之？

```
if (FWP_ACTION_PERMIT == classifyOut->actionType 
 && FlagOn(classifyOut->rights, FWPS_RIGHT_ACTION_WRITE))
{
    classifyOut->rights = 0;
    classifyOut->actionType = FWP_ACTION_BLOCK;
} 
```

有关此问题的文档含糊不清。

请访问： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa364008 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364008%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-07T16:42:27.197

这是一个**硬块**，但不是**否决**。

硬操作是除了将*actionType*设置为*FWP_ACTION_BLOCK*或*FWP_ACTION_PERMIT之外，还重置**FWPS_RIGHT_ACTION_WRITE*标志的操作。[（这在文档](https://docs.microsoft.com/en-us/windows/desktop/FWP/filter-arbitration)中没有明确定义，但可以从第一个表中推断出来。）

 ***在您的代码中，您正在重置标志，然后将*actionType*设置为*FWP_ACTION_BLOCK*，使您的操作成为**硬块**：

```
classifyOut->rights = 0;
classifyOut->actionType = FWP_ACTION_BLOCK; 
```

如[文档中所述](https://docs.microsoft.com/en-us/windows/desktop/FWP/filter-arbitration)，

> Veto 是在调用过滤器之前重置 FWPS_RIGHT_ACTION_WRITE 标志时过滤器返回的阻止操作。

在您的代码中，如果设置了标志，您只会发出一个块，使您的操作**不是 Veto**：

```
if ( ... && FlagOn(classifyOut->rights, FWPS_RIGHT_ACTION_WRITE) {...} 
```***

# php - 致命错误：调用未定义的函数 file_iterator_autoload()

> ID：14340455
> 
> 赞同：1
> 
> 时间：2013-01-15T14:59:50.050
> 
> 标签：php, symfony, phpunit

我们正在开发一个 Symfony2 项目，我们在该项目上编写了几个 PHPUnit 测试。

在其中一些（涉及大内存量的那些）上，我们收到一条错误消息：

> 有 1 次失败：
> 
> 1) GapCoach\Bundle\Tests\Controller\ClientControllerTest::testDesaClient
> 
> 致命错误：在第 379 行的 /usr/share/php/PHPUnit/Util/GlobalState.php 中调用未定义的函数 file_iterator_autoload()

我安装了最后一个 PHPUnit 版本，`file_iterator_autoload`功能确实存在并且可以访问。

我们如何解决这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:31:10.560

如果您使用的机器由于某种原因无法立即升级到 PHP 5.3.3 或更高版本（PHPUnit 3.7[需要](http://www.phpunit.de/manual/current/en/installation.html)），那么您可以通过降级软件包来修复此错误。

`pear list -a`应该产生类似的东西：

```
Installed packages, channel pear.phpunit.de:
============================================
Package            Version State
File_Iterator      1.3.3   stable
PHPUnit            3.6.12  stable
PHPUnit_MockObject 1.1.1   stable
PHP_CodeCoverage   1.1.4   stable
PHP_Timer          1.0.4   stable
PHP_TokenStream    1.1.4   stable
Text_Template      1.1.2   stable 
```

您需要 1.3.2 版本的 File_Iterator、1.1.1 版本的 Text_Template 和 1.0.3 版本的 PHP_Timer。

所以卸载旧的：

```
pear uninstall phpunit/PHPUnit
pear uninstall phpunit/PHPUnit_MockObject
pear uninstall phpunit/PHP_CodeCoverage
pear uninstall phpunit/File_Iterator
pear uninstall phpunit/PHP_Timer
pear uninstall phpunit/PHP_TokenStream
pear uninstall phpunit/Text_Template 
```

您应该能够验证您没有安装 phpunit 包：

```
pear list -a
Installed packages, channel pear.phpunit.de:
============================================
(no packages installed) 
```

现在首先显式安装这些依赖版本：

```
pear install phpunit/File_Iterator-1.3.2
pear install phpunit/PHP_Timer-1.0.3
pear install phpunit/Text_Template-1.1.1 
```

然后 PHPUnit：

```
pear install --alldeps phpunit/PHPUnit

pear list -a
Installed packages, channel pear.phpunit.de:
============================================
Package            Version State
File_Iterator      1.3.2   stable
PHPUnit            3.6.12  stable
PHPUnit_MockObject 1.1.1   stable
PHP_CodeCoverage   1.1.4   stable
PHP_Invoker        1.1.2   stable
PHP_Timer          1.0.3   stable
PHP_TokenStream    1.1.4   stable
Text_Template      1.1.1   stable 
```

现在一切都应该工作了:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T14:30:01.157

解决方案只是将 PHPUnit 升级到**3.7.13版本**

# javascript - 纯 CSS 显示/隐藏 div 方式？

> ID：14340456
> 
> 赞同：0
> 
> 时间：2013-01-15T14:59:52.450
> 
> 标签：javascript, css, html, show-hide

它真的不存在任何纯 css 方法，我可以在我的网站上单击一些所需的 :active div id，并且可能会在它之外显示另一个 div 吗？到目前为止，我发现的一切要么是用 CSS 完成的不好的方式，要么是用 JQuery 或 Javascript 完成的方式？任何人，任何人我需要的纯 CSS。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:06:50.410

在 CSS div 中没有 onclick 处理程序.. 你需要把你的 div 里面

> '<一>'

标签..所以你可以像处理链接一样处理它..你将拥有鼠标悬停的功能和类似的东西..看看这个[线程](https://stackoverflow.com/questions/6019845/show-hide-div-on-click-with-css)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:05:31.787

你可以试试`:target`

*   [http://css-tricks.com/on-target/](http://css-tricks.com/on-target/)
*   [http://davidwalsh.name/demo/css-target.php](http://davidwalsh.name/demo/css-target.php)

或者使用 child `A B`、 next`A+B`或兄弟`A~B`选择器。

但是纯 css 方法不能像简单的 js 那样广泛地保存和操作块的状态，它只是添加/删除类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:07:42.557

为特定的 html 元素指定 CSS 时，您影响接收鼠标事件的元素样式的能力有限。要在单击特定元素时显示另一个元素，您需要更改另一个不是鼠标事件目标的 html 元素的样式，因此需要 javascript 或像 vb 这样的专有 Web 脚本语言来执行您想要的操作做。

关于这一点我要说的最后一件事是 CSS 旨在为单个元素或元素组添加样式效果。它不打算在网站上实现繁重的程序化功能。这就是发明 javascript 的目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T02:32:39.527

你可以试试，`:active`伪类。但即便如此，你也需要把你想在里面展示的任何东西都包起来。无论如何，我的尝试是：

```
<a>
  Click and Hold Me!
  <div class="expand">
    I am the expander!
  </div>
</a> 
```

CSS

```
a {text-decoration: none;}
a .expand {height: 0; overflow: hidden; transition: height 5s;}
a:active .expand {height: 1em; overflow: visible; transition: height 5s;} 
```

### 小提琴：[http ://codepen.io/praveenscience/pen/KArEB](http://codepen.io/praveenscience/pen/KArEB)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-29T06:23:05.780

CSS 无法处理 onClick 事件。您可以使用 Javascript .onclick() 函数。但是 CSS 有 Pseudo-classe 可能会有所帮助：

```
a:link {color:#FF0000;}    /* unvisited link - link is untouched */
a:visited {color:#00FF00;} /* visited link - user has already been to this page */
a:hover {color:#FF00FF;}   /* mouse over link - user is hovering over the link with the mouse or has selected it with the keyboard */
a:active {color:#0000FF;}  /* selected link - the user has clicked the link and the browser is loading the new page */ 
```

[在https://www.w3schools.com/css/css_pseudo_classes.asp](https://www.w3schools.com/css/css_pseudo_classes.asp)中查看更多信息

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-19T05:54:03.157

这是一个显示隐藏的**纯 CSS**方法。将“标题”内容放在容器元素中。将“信息”内容放在“标题”下方但在同一容器内。现在，样式行为以响应点击活动。

```
.dropdowntitle, article > * { cursor: pointer; }
.dropdowntitle:focus + .dropdowninfo { display:block; }
.dropdowninfo { background-color:inherit; display:none; height:inherit; }

<article>
<h3 class="dropdowntitle" tabindex="1">Title</h3>
<p class="dropdowninfo">Info</p>
<h3 class="dropdowntitle" tabindex="2">Title</h3>
<p class="dropdowninfo">Info</p>
<h3 class="dropdowntitle" tabindex="3">Title</h3>
<p class="dropdowninfo">Info</p>
</article> 
```

**优点**一次只关注一个信息下拉列表的用户。较长的“列表”中的简单下拉双击关闭打开导航。不干扰浏览历史。

**缺点**就基本 HTML/CSS 而言（工具提示数据标题属性替换标题属性：单击/点击 HTML 数据层以覆盖下拉标题）？JQuery，然后是程序学，绝对可以超越这一优势。

[http://tympanus.net/codrops/2012/12/17/css-click-events](http://tympanus.net/codrops/2012/12/17/css-click-events)）我尝试了复选框和目标黑客，但没有改进。

使用 CSS类似线程[在单击时显示/隐藏 div 。](https://stackoverflow.com/questions/6019845/show-hide-div-on-click-with-css)

[HTML/CSS 显示/隐藏多个元素？](https://stackoverflow.com/questions/9534129/html-css-show-hide-multiple-elements)主要是脚本解决方案

[https://support.office.com/en-us/article/Create-or-edit-a-hyperlink-5d8c0804-f998-4143-86b1-1199735e07bf](https://support.office.com/en-us/article/Create-or-edit-a-hyperlink-5d8c0804-f998-4143-86b1-1199735e07bf)同时独立地显示-隐藏多个下拉菜单，程序化。

# javascript - 在隐藏的 div 中加载 Twitter 关注按钮

> ID：14340457
> 
> 赞同：3
> 
> 时间：2013-01-15T14:59:54.183
> 
> 标签：javascript, jquery, twitter, social-networking

我基本上遇到了与这个主题相同的问题（http://stackoverflow.com/questions/9662576/social-media-buttons-inside-hidden-div），但是由于海报在分享之前废弃了代码，我希望有人会有一个解决方案。

我正在一个隐藏的 div 中加载一组社交媒体图标，这些图标在悬停时变得可见。问题似乎是，当关注按钮加载到隐藏的 div 中时，它不会附加 @username，而只是显示“关注”。

任何帮助将不胜感激！

这应该为您重现问题；

HTML：

```
<li><a class="menu">Menu Item</a>
<ul id="blah-menu">
<a href="https://twitter.com/twitter" class="twitter-follow-button" data-show-count="false" data-dnt="true">Follow @twitter</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</ul>
</li> 
```

CSS：

```
nav li ul#blah-menu {
display: none;
z-index: 99999 !important;
}

nav li:hover ul#blah-menu {
display: block;
height: auto;
position: absolute;
z-index: 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-11T12:20:53.493

我最终在页脚某处显示了带有 twitter 按钮代码的 1x1（和溢出：隐藏）div 包装器，然后当应该显示按钮时，只需将包装器移动到所需位置并设置溢出：可见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-09T12:24:39.080

我有类似的问题。我使用 setinterval 解决了它。

```
var twitterListener = setInterval(function(){
  if(jQuery("#yourDiv").is(":visible")){
    clearInterval(twitterListener)
    if (typeof window.twttr == "undefined") {
      window.twttr = (function (d,s,id) {
          var t, js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
          js.src="https://platform.twitter.com/widgets.js";
          fjs.parentNode.insertBefore(js, fjs);
          return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
      }(document, "script", "twitter-wjs"));
    }

    twttr.ready(function (twttr) {
        twttr.events.bind('click', function (event) { 
          //
        });
        twttr.events.bind('follow', function(event) {
            //
        });
        twttr.events.bind('tweet', function(event) {
            //
        });        
    }); 
  }
},10) 
```

# java - JmDNS：无法解析服务

> ID：14340458
> 
> 赞同：7
> 
> 时间：2013-01-15T14:59:56.130
> 
> 标签：java, android, jmdns

我正在尝试为 Android 应用程序和桌面应用程序之间的通信实现 JmDNS 发现。我遵循了以下教程： [http ://home.heeere.com/tech-androidjmdns.html](http://home.heeere.com/tech-androidjmdns.html)

Android 应用注册一个服务，桌面应用为该服务添加一个监听器。我已经让它在四分之三的设备上运行得很好，但是第四个（运行 Android 3.2 的三星 Galaxy Tab 10.1 PT7500）我无法解决该服务。我的处理程序收到`serviceAdded`事件，但没有`serviceResolved`事件。我也尝试过调用`jmdns.requestServiceInfo`and `jmdns.getServiceInfo`，但前者什么都不做，后者超时并返回 null。

但是，jmdns-browser 能够很好地解析服务，所以它不是设备。这两台设备上都没有防火墙。该服务始终使用 IPv4 地址。

有谁知道什么可能导致这个问题？

启动服务的代码：

```
jmdns = JmDNS.create(wifiAddress);

ServiceInfo serviceInfo = ServiceInfo.create(Constants.SERVICE_TYPE, 
    Constants.SERVICE_NAME, Constants.ZEROCONF_PORT, "my service");

HashMap<String, String> deviceInfoMap = new HashMap<String, String>();
deviceInfoMap.put(Constants.KEY_DEVICE_NAME, getDeviceName());
deviceInfoMap.put(Constants.KEY_DEVICE_ID, getDeviceId());
// ...
serviceInfo.setText(deviceInfoMap);

jmdns.registerService(serviceInfo); 
```

客户端/监听器的代码：

```
jmdns = JmDNS.create();
jmdns.addServiceListener(Constants.SERVICE_TYPE, serviceListener = new ServiceListener() {
    @Override
    public void serviceResolved(ServiceEvent event) {
        System.out.println("Service resolved: " + event.getName() + 
            " of type " +    event.getType());
    }

    @Override
    public void serviceRemoved(ServiceEvent event) {
        System.out.println("Service removed: " + event.getName() + 
            " of type " + event.getType());
    }

    @Override
    public void serviceAdded(ServiceEvent event) {
        System.out.println("Service added: " + event.getName() + 
            " of type " + event.getType());
        ServiceInfo info = jmdns.getServiceInfo(event.getType(), event.getName());
        System.out.println("Service info: " + info); // --> null
    }
}); 
```

输出：

```
Service added: my service @ GT-P7500 of type _mytype._tcp.local.
Service info: null
Service added: my service @ Galaxy Nexus of type _mytype._tcp.local.
Service info: [ServiceInfoImpl@183779345 
    name: 'my service @ Galaxy Nexus ._mytype._tcp.local.' 
    address: '/192.168.1.154:4242 ' status: 'DNS: myhost.local. 
    state: probing 1 task: null', has data
    deviceName: Galaxy Nexus
    deviceId: <id>
    displayDensity: XHDPI
] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T15:49:51.863

Checking out the latest source code version from the [github repository](https://github.com/jmdns/jmdns) did the trick. Discovering the service now works just fine on all devices. (Note: I was using JmDNS version 3.4.1 which I had downloaded from [sourceforge](http://sourceforge.net/projects/jmdns/) before)

Having skimmed through the SVN history, there seem to be a couple of commits related to problems with resolving services since the 3.4.1 release.

Edit: Replaced svn with github repository since jmdns has moved there.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:27:16.587

使用`JmDNS.create(InetAddress addr, String name)`而不是`JmDNS.create()`. 在最新版本的 Android 中，JmDNS 需要更多地了解本地设备和它正在侦听的网络接口。

```
JmDNS jmdns; // somewhere global

// In a background thread 
public void buildJmDNS() {
    InetAddress addr = InetAddress.getLocalHost();
    String hostname = InetAddress.getByName(addr.getHostName()).toString();
    try {
        jmdns = JmDNS.create(addr, hostname); // throws IOException
    } catch (IOException e) {
       e.printStackTrace(); // handle this if you want
    }
} 
```

我遇到了同样的问题，这为我解决了。我试图找到我发现的例子来说明为什么这是必要的，但我不能。

# python - 确定scrapy根目录

> ID：14340460
> 
> 赞同：6
> 
> 时间：2013-01-15T15:00:00.267
> 
> 标签：python, screen-scraping, scrapy

如文档中所述，我希望能够读取相对于scrapy根目录 [的文件](http://scrapy.readthedocs.org/en/0.12/topics/commands.html#default-structure-of-scrapy-projects)。

有没有办法从蜘蛛内部确定这条路径？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T15:11:49.887

我不知道scrapy是否知道它在文件系统上的位置，但在我`settings.py`添加

`PROJECT_ROOT = os.path.abspath(os.path.dirname(__file__))`

然后在蜘蛛中你可以说

```
from yourscrapyprojecthere import settings

settings.PROJECT_ROOT 
```

在这里，我假设我的项目根目录是 settings.py 文件所在的位置。如果要获取目录，`scrapy.cfg`则必须上目录

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-08-09T08:46:08.987

非常老的问题，但对于那些经常寻找答案的人来说，scrapy 有一种查找项目根目录的内置方法：

`from scrapy.utils.conf import closest_scrapy_cfg`

`proj_root = closest_scrapy_cfg()`

将返回包含 scrapy.cfg 文件的文件夹的绝对路径

**编辑**：将返回项目的 scrapy.cfg 文件的绝对路径

# csv - 在 Google Refine 中按记录填写

> ID：14340464
> 
> 赞同：0
> 
> 时间：2013-01-15T15:00:16.127
> 
> 标签：csv, jython, google-refine

我在 Google 优化中有以下逗号分隔的 CSV 文件：

![在此处输入图像描述](../Images/3653e909c11bc243eac50e5ed6e5b123.png)

如何使用 Jython 或 GREL 填写 column1 中的值以变为：

![在此处输入图像描述](../Images/e84cf62554e3b791b00a7903d611d841.png)

我努力了：

```
if value is None:
 return row["record"]["cells"]["column1"]["value"][0]
else:
 return value 
```

有什么建议么？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T04:00:14.547

您的示例中棘手的部分是记录 id 1，因为您在同一记录中的 column1 中有两个不同的值。

所以要完成这个你必须

1.  `ID`通过合并你的和字段来创建一个新索引`column1`（参见 [教程](http://googlerefine.blogspot.ca/2011/07/merge-2-columns-that-have-both-blank.html)）
2.  使用表达式`row.record.cells["Column1"].value[0]`填写（见 [教程](http://googlerefine.blogspot.ca/2012/03/fill-down-right-and-secure-way.html)）

我已经通过 6 个步骤成功完成了这里是适用于您的项目的 JSON 代码：

```
 [
  {
    "op": "core/column-addition",
    "description": "Create column ID2 at index 2 based on column Column1 using expression grel:cells['ID'].value+value",
    "engineConfig": {
      "facets": [],
      "mode": "record-based"
    },
    "newColumnName": "ID2",
    "columnInsertIndex": 2,
    "baseColumnName": "Column1",
    "expression": "grel:cells['ID'].value+value",
    "onError": "set-to-blank"
  },
  {
    "op": "core/text-transform",
    "description": "Text transform on cells in column ID2 using expression grel:cells['ID'].value",
    "engineConfig": {
      "facets": [
        {
          "invert": false,
          "expression": "isBlank(value)",
          "selectError": false,
          "omitError": false,
          "selectBlank": false,
          "name": "ID",
          "omitBlank": false,
          "columnName": "ID",
          "type": "list",
          "selection": [
            {
              "v": {
                "v": false,
                "l": "false"
              }
            }
          ]
        },
        {
          "invert": false,
          "expression": "isBlank(value)",
          "selectError": false,
          "omitError": false,
          "selectBlank": false,
          "name": "Column1",
          "omitBlank": false,
          "columnName": "Column1",
          "type": "list",
          "selection": [
            {
              "v": {
                "v": true,
                "l": "true"
              }
            }
          ]
        }
      ],
      "mode": "row-based"
    },
    "columnName": "ID2",
    "expression": "grel:cells['ID'].value",
    "onError": "keep-original",
    "repeat": false,
    "repeatCount": 10
  },
  {
    "op": "core/text-transform",
    "description": "Text transform on cells in column ID2 using expression grel:cells['Column1'].value",
    "engineConfig": {
      "facets": [
        {
          "invert": true,
          "expression": "value",
          "selectError": false,
          "omitError": false,
          "selectBlank": true,
          "name": "Column1",
          "omitBlank": false,
          "columnName": "Column1",
          "type": "list",
          "selection": [
            {
              "v": {
                "v": " ",
                "l": " "
              }
            }
          ]
        },
        {
          "invert": false,
          "expression": "isBlank(value)",
          "selectError": false,
          "omitError": false,
          "selectBlank": false,
          "name": "ID",
          "omitBlank": false,
          "columnName": "ID",
          "type": "list",
          "selection": [
            {
              "v": {
                "v": true,
                "l": "true"
              }
            }
          ]
        }
      ],
      "mode": "row-based"
    },
    "columnName": "ID2",
    "expression": "grel:cells['Column1'].value",
    "onError": "keep-original",
    "repeat": false,
    "repeatCount": 10
  },
  {
    "op": "core/column-move",
    "description": "Move column ID2 to position 0",
    "columnName": "ID2",
    "index": 0
  },
  {
    "op": "core/text-transform",
    "description": "Text transform on cells in column Column1 using expression grel:row.record.cells[\"Column1\"].value[0]",
    "engineConfig": {
      "facets": [],
      "mode": "record-based"
    },
    "columnName": "Column1",
    "expression": "grel:row.record.cells[\"Column1\"].value[0]",
    "onError": "keep-original",
    "repeat": false,
    "repeatCount": 10
  },
  {
    "op": "core/column-removal",
    "description": "Remove column ID2",
    "columnName": "ID2"
  }
] 
```

# javascript - Javascript在平板电脑上读取按键？

> ID：14340469
> 
> 赞同：8
> 
> 时间：2013-01-15T15:00:19.677
> 
> 标签：javascript, mobile, keypress, tablet

我有一个有趣的问题 - 我想使用 javascript 读取按键，但不直接进入文本字段。

这在计算机上很简单，而且我可以正常工作（只要窗口有焦点，javascript 就可以检测按键）。但是，在运行 Android 和 iOS 的平板电脑上，操作系统会忽略按键。如果我专注于文本字段，javascript 代码只会接收按键数据。

有没有办法解决这个问题？我想阅读平板电脑上的按键，而不必专注于文本字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:22:17.020

尝试这样的事情：

```
 $('input,textarea').on("keypress", function (e) {
    //do any action here
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T03:37:42.803

从我使用 iPad 超过 2 年的经验和编写我自己的基于网络的游戏来看，我得出的结论是**，只有当表单输入字段被聚焦时，iPad 才会激活它的键盘**。这意味着网页用户无法输入任何键盘输入，除非表单输入字段已获得焦点。

这意味着您要问的是这些设备在**物理上是不可能的。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-07T18:39:33.977

您可以只使用输入而不是关键事件。为我工作。

```
 var userList = new List("MyListList", options);

 $(".main-search").on("input", function () {
            userList.search($(".main-search").val());
        }); 
```

# parameters - Cognos 报告输出不同的结果集

> ID：14340471
> 
> 赞同：0
> 
> 时间：2013-01-15T15:00:27.047
> 
> 标签：parameters, reporting, cognos-8

我的工作使用 Cognos 8.3 编写报告。我的任务是解决特定报告针对同一请求显示不同数据的问题。

我有一个包含多值参数（`p_id=123&p_id=456`）的报告。它应该显示这两条记录（123 和 456）的信息，但是当我第一次启动报告时，它只显示其中一条的信息。如果我关闭并重新启动它（不更改 url），它会显示两条记录的信息。我已经验证了 URL 是正确的，并且在两次启动之间是相同的。我通过 SQL Profiler 发现，我第一次运行报告时，查询的值错误（“ `WHERE id IN ('123', '123')`”），而第二次（以及后续）运行它时，它运行正确（“ `WHERE id IN ('123', '456')`”）。我能够始终如一地重现这一点。

现在我对 Cognos 了解不多，但报告或其他地方是否有某种设置可能是造成这种情况的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:30:28.920

Ths Dan...我记得这是一个我认为已在修复包中修复的问题...但是您是否也可以做一些事情来看看我们是否可以解决它...有很多方法可以解决它但是试图避免首先编码。

1.  在具有 1 个默认值或 2 个默认值的报表画布上创建具有相同名称 p_id 的多选提示，然后重试。默认值应该是您知道永远不会使用的值（可能是负数）。

谢谢，

蒂姆

# interface - 覆盖liferay核心接口

> ID：14340480
> 
> 赞同：0
> 
> 时间：2013-01-15T15:00:48.473
> 
> 标签：interface, overriding, liferay

有没有办法覆盖 liferays 核心接口，例如 com.liferay.portal.model.Plugin ？

我已经尝试过覆盖类，但是接口有一些问题。我创建了新的“ext”插件，并将包 com.liferay.portal.model 放在两者中：

docroot/WEB-INF/ext-impl/src 和 docroot/WEB-INF/ext-service/src

当然还有那个包接口插件。

测试覆盖 ive 添加到方法声明

公共无效测试（）；

但插件接口不会被覆盖。

我在课堂上所做的工作，但我无法让那些该死的接口正常工作。

有什么办法可以完成我想做的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:16:07.323

如果您更改核心接口，您正在为自己制造升级的噩梦——很可能每次升级都会遇到巨大的问题。而且您的示例（添加 public void test()）并没有暗示这有一个真正的用例。

我认为在新类中添加您的界面/特性/功能或在其他插件中添加您的功能会简单得多，直到您提供适当的用例。一旦您提供了这些，我们实际上可以开始讨论适合他们的解决方案。而且，最有可能的是，它们不涉及弄乱 Liferay 实现的内部接口。

# java - 番石榴迭代器，并迭代列表对象中的列表

> ID：14340481
> 
> 赞同：14
> 
> 时间：2013-01-15T15:00:49.060
> 
> 标签：java, iterator, guava

我有以下示例代码，其中包含 3 个嵌套的 for 循环。

```
for(Continent continent : continentList) 
{
    for(Country country : continent.getCountries())
    {
        for(City city : country.getCities())
        {
            //Do stuff with city objects
        }
    }
} 
```

有没有办法使用 Guava 和迭代器来模仿这个嵌套的 for 循环？我一直在尝试找到一个合适的例子，但运气不佳，我想知道是否有人可以帮助我？我的一位同事提到使用过滤器。

编辑：修复了示例代码中的小错误

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T15:39:16.283

正如 Peter Lawrey 评论的那样，这几乎肯定会像嵌套循环一样简单。此外，[Guava 文档](http://code.google.com/p/guava-libraries/wiki/FunctionalExplained)给出了这个警告：

> 命令式代码应该是您的默认代码，从 Java 7 开始是您的首选。除非您绝对确定以下其中一项，否则不应使用函数式惯用语：
> 
> *   使用功能性惯用语将净节省整个项目的代码行数。将函数的定义移到另一个文件或常量中没有帮助。
> *   为了提高效率，您需要转换后的集合的延迟计算视图，并且不能满足于显式计算的集合。此外，您已经阅读并重读了 Effective Java，第 55 项，除了遵循这些说明之外，您实际上还进行了基准测试以证明此版本更快，并且可以引用数字来证明这一点。
> 
> 请确保，在使用 Guava 的功能实用程序时，传统的命令式做事方式并不更具可读性。试着写出来。有那么糟糕吗？这是否比您即将尝试的荒谬笨拙的功能方法更具可读性？

但是，如果您坚持忽略建议，您可以使用类似这种怪物的东西（注意我实际上并没有尝试编译或运行它）：

```
FluentIterable.from(continentList)
    .transform(new Function<Continent, Void>() {
        public Void apply(Continent continent) {
            return FluentIterable.from(continent.getCountries())
                .transform(new Function<Country, Void>() {
                    public Void apply(Country country) {
                        return FluentIterable.from(country.getCities())
                            .transform(new Function<City, Void>() {
                                public Void apply(City city) {
                                    // do stuff with city object
                                    return null;
                                }
                            });
                    }
                });
        }
    }); 
```

现在问问自己：你想维护哪个？哪个将是最有效的？

Guava 的函数式习语有有效的用例。替换 Java for 循环，甚至是嵌套的 for 循环，都不是其中之一。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-13T10:09:24.867

您可以为以下各项定义静态函数：
• Continent、Continents 或 Functions 中的 getCountries()
• Country、Countrys 或 Functions 中的 getCities()

现在你可以做类似...

```
FluentIterable.from(continentList)
    .transformAndConcat(Continent.getCountriesFunction())
    .transformAndConcat(Country.getCitiesFunction())
    . //filter //tranform //find //toList() //etc. 
```

如果：
• 你经常像这样（更多）使用番石榴。
• 对定义函数和谓词的位置有一定的规则/想法。
• 并且有不同（复杂）的东西要过滤或搜索。
然后它可以是一个很大的好处，可以使许多情况变得容易一些。我知道我很高兴我做到了。

如果您很少使用它，那么我将不得不同意@Louis Wasserman。那么麻烦就不值得了。此外，像其他示例一样将函数和谓词定义为匿名内部类......真的很难看。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T15:56:50.930

另一个怪物，使用 AbstractIterator：

```
 class CityIterable implements Iterable<City> {
        List<Continent> continents;

        CityIterable(List<Continent> continents) {
            this.continents = continents;
        }

        @Override
        public Iterator<City> iterator() {
            return new AbstractIterator<City>() {
                Iterator<Continent> continentIterator = continents.iterator();
                Iterator<Country> countryIterator;
                Iterator<City> cityIterator;

                @Override
                protected City computeNext() {
                    if (cityIterator != null && cityIterator.hasNext()) {
                        return cityIterator.next();
                    }
                    if (countryIterator != null && countryIterator.hasNext()) {
                        cityIterator = countryIterator.next().getCities().iterator();
                        return computeNext();
                    }
                    if (continentIterator.hasNext()) {
                        countryIterator = continentIterator.next().getCountries().iterator();
                        return computeNext();
                    }
                    return endOfData();
                }
            };
        }
    } 
```

然后调用它：

```
 for (City city: new CityIterable(continentList)) {
        System.out.println(city.name);
    } 
```

鉴于这种怪异现象，请遵循 ig0774 的建议并*保留嵌套循环*。

PS不需要过滤器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T15:31:14.583

不，没有简单的方法。此外，它会比您问题中的 for-each 循环更冗长。

请参阅[http://code.google.com/p/guava-libraries/issues/detail?id=218#c5](http://code.google.com/p/guava-libraries/issues/detail?id=218#c5)和 http://code.google.com/p/guava-libraries/wiki/FunctionalExplained 中的注意[事项](http://code.google.com/p/guava-libraries/wiki/FunctionalExplained)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T08:19:40.610

我同意其他人的观点，因为嵌套循环是最有效的方法。但是：我会将每个循环级别提取到一个单独的方法中，以保持可读性并确保每个方法都只做一件事：

```
public void doStuffWithWorld(World world){
    for (Continent continent : world.getContinents()) {
        doStuffWithContinent(continent);
    }
}

private void doStuffWithContinent(Continent continent) {
    for (Country country : continent.getCountries()) {
        doStuffWithCountry(country);
    }
}

private void doStuffWithCountry(Country country) {
    for(City city : country.getCities()){
        doStuffWithCity(city);
    }
}

private void doStuffWithCity(City city) {
    // do stuff here
} 
```

如果您需要通过不同的级别携带一些状态，您有几个选择：将它们放在包含类的成员字段中，将第二个参数传递给可以是映射或自定义对象的所有方法。

# android - Android 应用内购买购买/退款/子过期事件

> ID：14340482
> 
> 赞同：2
> 
> 时间：2013-01-15T15:00:50.963
> 
> 标签：android, in-app-purchase, in-app-billing

我刚刚在我的手机上使用 API V2 实现并测试了 Android 应用内购买（因为我还需要实现订阅）。实际上，该应用程序并未发布，而仅处于草稿状态。

我已经测试过购买并且效果很好。

我对通知系统有一些我实际上不明白的问题。

1) 第一个问题

我有许多具有相同 Google 帐户的设备（因此我共享相同的购买项目）。我刚刚从设备 A 上的应用程序中正确购买了一件商品，但尚未通知另一台设备 B。

我是否必须在设备 B 上等待来自 Google Play 的一些通知，否则它永远不会发生？如果我是第二种情况，解决方案是什么？每次启动应用程序时都进行 RESTORE_TRANSACTION 吗？

**问题1的更新解决方案**：我认为问题在于我的谷歌帐户也是我的开发者控制台中的测试帐户。我实际上测试了它从测试列表中删除帐户并且运行良好。

2）第二个问题

我也试过退款系统。我已经从开发者控制台退还了我购买的商品（托管商品），但我从未收到 REFUND 事件。为什么？

如果我卸载该应用程序并再次安装它，RESTORE_TRANSACTIONS 会告诉我我退款的应用程序内仍处于 PURCHASED 状态。我做错了什么？

**更新**：订阅已退款（未过期但刚刚退款）。相反，托管的应用内购买仍处于 PURCHASED 状态，但在开发者控制台上，我已退款并取消了订单。为什么还处于购买状态？

3）第三个问题

我的用户进行了订阅，然后它就过期了。谷歌会向我发送 SUBSCRIPTION_EXPIRED 事件到我的应用程序还是让我总是执行 RESTORE_TRANSACTION？

4) 最后一个问题

我已经退还了订阅，它向我发送了退款事件。实际上订阅有效期到月底，所以我认为我需要从月底开始为用户提供订阅服务，我认为在此之后，如果用户不重新收费，我会得到一个SUBSCRIPTION_EXPIRES 事件。

我对吗？

谢谢，伊曼纽尔。

**更新**：更新了部分答案、另一个问题和更多细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:30:19.280

其实我做了一些步骤。

我购买的谷歌帐户也是我的开发者控制台中的测试帐户。这阻止了（我认为）要发送的 NOTIFY 事件。

现在我从市场上购买了一件新物品，它出现在我所有的设备上。

我还有其他问题和疑问（我将更新主要问题）

**更新**：对于托管的应用内购买（不是订阅），如果您向用户退款（不是取消订单，只是退款），这不会向您的应用程序发送任何事件（至少看起来如此）。如果您取消订单（从开发者控制台），它将发送一个 CANCELED 事件。

# c - 困在睡眠中(1.)

> ID：14340485
> 
> 赞同：5
> 
> 时间：2013-01-15T15:01:05.663
> 
> 标签：c, gcc, c99

我的程序卡在了简单的调用`usleep(1.);`中。怎么可能？我应该注意什么？

**编辑：**

为了让事情变得更加混乱，只有在我之前调用 rand() 时它才会卡住：

```
rand();
usleep(1.); 
```

两个单独的电话都很好。

**编辑2：**

这是一个有效的最小示例：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main(int argc, char* argv[]) {
        printf("Calling rand() and then usleep(1) on pid %d \n",getpid());
        rand();
        usleep(1);
        printf("Finished.\n");
        return 0;
} 
```

这也有效：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main(int argc, char* argv[]) {
        printf("Calling usleep(1.) on pid %d \n",getpid());
        usleep(1.);
        printf("Finished.\n");
        return 0;
} 
```

但是，这个没有：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main(int argc, char* argv[]) {
        printf("Calling rand() and then usleep(1.) on pid %d \n",getpid());
        rand();
        usleep(1.);
        printf("Finished.\n");
        return 0;
} 
```

我使用 gcc 版本 4.4.6 编译这些命令`gcc -std=c99 main.c`。选项`-std=c99`有问题吗？但我仍然不明白这里发生了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T15:09:09.743

你`usleep()`用一个`double`值调用，而它被指定为一个`useconds_t`范围有限的无符号整数。请参阅[手册页](http://linux.die.net/man/3/usleep)。

在您的平台上，转换可能失败。尝试删除句号，然后用`1`.

不要引入演员表，最好不要提及`useconds_t`类型。

另外，请注意此功能已过时，应使用新的 POSIX 代码`[nanosleep()](http://linux.die.net/man/2/nanosleep)`。

**更新**顺便说一句，上面链接的手册页似乎也暗示您应该`#define`使用之前列出的正确符号`#include <unistd.h>`来获得此功能。你应该尝试一下，如果你没有得到原型，参数将不会自动从`double`. （忽略的）返回值`rand()`也可能在某个寄存器或堆栈中，在这种情况下会导致事情进一步改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T15:08:44.053

从 usleep [http://www.manpagez.com/man/3/usleep/](http://www.manpagez.com/man/3/usleep/)的手册页中，输入参数`usleep`is`useconds_t`和 not`float`如您的代码中所示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T16:18:15.887

我尝试了几件事。

1.  也没有什么特别的`rand();` `printf`。下面也显示了这种行为（它在说“开始”后挂起），但如果第一个`printf()`被注释掉，程序就完成了。

    ```
    include <stdio.h>
    include <unistd.h>

    void main(int argc, char* argv[]) {
        printf ("Starting\n"); 
        usleep(10.1);
        printf("Finished.\n");
    } 
    ```

2.  如果您使用`-std=gnu89`（或 gnu99）而不是`-std=c89`（或 c99）进行编译，您的程序将始终有效。

3.  -o0 到 -o3 的各种排列没有区别。

4.  `usleep`需要一个整数，而不是浮点数。如果你明确地转换它，即`usleep((int)10.1)`，程序不会挂起。

5.  打开警告（-Wall -Wextra -Wconversion）抱怨隐式声明`usleep`.

# ruby-on-rails - Ruby on Rails：无法安装 JSON gem

> ID：14340486
> 
> 赞同：0
> 
> 时间：2013-01-15T15:01:09.487
> 
> 标签：ruby-on-rails, json, gem

当我尝试创建一个新的 Rails 应用程序`rails new app`时，该过程在尝试安装 JSON gem 时停止。所以，我尝试单独安装它，使用：

```
gem install json 
```

但我收到以下错误消息：

```
Building native extensions.  This could take a while...
ERROR:  Error installing json:
    ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
creating Makefile

make
xcrun cc -I. -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin11.0 -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin11.0 -I. -DJSON_GENERATOR  -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -arch i386 -arch x86_64 -g -O3 -pipe -fno-common -DENABLE_DTRACE  -fno-common  -pipe -fno-common   -c generator.c
Error: No developer directory found at /Developer. Run /usr/bin/xcode-select to update the developer directory path.
make: *** [generator.o] Error 1

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/json-1.7.6 for inspection.
Results logged to /Library/Ruby/Gems/1.8/gems/json-1.7.6/ext/json/ext/generator/gem_make.out 
```

你知道这是什么意思吗？我该如何解决？

一些附加信息：我使用的是 MacOSX，Rails 版本是 3.2.11。Ruby 版本是 1.8.7。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:13:48.870

Rails 不支持 Ruby 1.8.X 吗？我建议升级到 1.9.3。对于您的 gem：如果本机扩展存在问题，请尝试使用“`json-pure”gem，因为它完全是用 ruby​​ 编写的，不需要本机扩展。

[http://rubygems.org/gems/json_pure](http://rubygems.org/gems/json_pure)

# c# - UpdatePanel.Update() 不实时更新

> ID：14340488
> 
> 赞同：1
> 
> 时间：2013-01-15T15:01:13.933
> 
> 标签：c#, asp.net, ajax

这导致另一个线程的问题......但希望更专注于一点！

我有一个 AJAX 更新面板

```
<asp:UpdatePanel
     ID="UpdatePanel1" runat="server" UpdateMode="Conditional" >
           <ContentTemplate>
                                <asp:Label ID="lblMessage1" runat="server" />
                                <asp:Label ID="lblMessage2" runat="server" />
                                <asp:Button ID="btnTrigger" runat="server"        onclick="Button1_Click" style="visibility:hidden"/>

              </ContentTemplate>
 </asp:UpdatePanel> 
```

而我背后的代码是这个

```
 protected void Button1_Click(object sender, EventArgs e)

    {
        Type cstype = this.GetType();
        Label message1 = (Label)(FindControl("lblMessage1"));
        Label message2 = (Label)(FindControl("lblMessage2"));

        message1.Text = "adam";
        UpdatePanel1.Update();

        Thread.Sleep(5000);

        message2.Text = "adam2";
        UpdatePanel1.Update(); 
```

我想看到 Adam 出现，然后在 5 秒后看到 Adam2，但它们都同时出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:04:30.550

您正在`Update`面板上调用，但由于它发生在服务器端，因此两个调用基本上同时在客户端上执行。在调用返回之前，调用`Update`无效。您将需要两个单独的调用，或一个客户端触发器才能使其按照您描述的方式运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:05:21.467

您提供的代码将在服务器上设置值，在`message1.Text`服务器上等待 5 秒，然后`message2.Text`在服务器上设置......然后它将一次性将所有内容发送回客户端。这就是为什么您会同时看到所有更新。

如果您希望它们在不同时间更新，您将需要更复杂的编码来调用服务器上的两个独立事物，并独立显示它们。

为此，您可能需要查看两个`<asp:UpdatePanel>`对象，或者在 javascript/jquery 中编写自己的 AJAX 处理代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:17:05.310

尝试将 2 个标签、2 个按钮分成 2 个不同的更新面板。然后5秒后连续触发：

HTML：

```
<asp:UpdatePanel
     ID="UpdatePanel1" runat="server" UpdateMode="Conditional" >
           <ContentTemplate>
                <asp:Label ID="lblMessage1" runat="server" />
                <asp:Button ID="btnTrigger1" runat="server"        onclick="Button1_Click" style="visibility:hidden"/>
              </ContentTemplate>
 </asp:UpdatePanel>

<asp:UpdatePanel
     ID="UpdatePanel2" runat="server" UpdateMode="Conditional" >
           <ContentTemplate>
                 <asp:Label ID="lblMessage2" runat="server" />
                 <asp:Button ID="btnTrigger2" runat="server"        onclick="Button2_Click" style="visibility:hidden"/>
           </ContentTemplate>
 </asp:UpdatePanel>

<script>
     window.onload = function(){
          document.getElementById("<%= btnTrigger1.ClientID %>").click();
          // wait 5 secs to trigger 2nd button
          setTimeout(function(){
                document.getElementById("<%= btnTrigger2.ClientID %>").click();
          }, 5000);
     };
</script> 
```

CS：

```
protected void Button1_Click(object sender, EventArgs e)
{
    Type cstype = this.GetType();
    Label message1 = (Label)(FindControl("lblMessage1"));

    message1.Text = "adam";
    UpdatePanel1.Update();
}

protected void Button2_Click(object sender, EventArgs e)
{
    Type cstype = this.GetType();
    Label message2 = (Label)(FindControl("lblMessage2"));

    message2.Text = "adam2";
    UpdatePanel1.Update();
} 
```

# node.js - Node.js https.request 客户端的 req.end() 在文件大小为 0 时从不调用

> ID：14340489
> 
> 赞同：0
> 
> 时间：2013-01-15T15:01:15.757
> 
> 标签：node.js, sockets, https, upload, request

我正在尝试创建节点服务器以使用代理进行文件上传。

该服务器的主要作用是从客户端代理获取 HTTP PUT 请求到 OpenStack Swift 服务器。

源代码如下所示：

```
var https = require('https')
   // ... some modules are required
   , Swift = reuiqre('swift')
   , mysql = require('mysql');

// some configurations

function request(options, callback, pipe){
  var client = https.request(options, function(res){
    res.on('end', function(err){
      // something to do
    });
  });

  pipe.req.on('data', function(chunk){
    client.write(buffer);
  });

  pipe.req.on('end', function(err){
    client.end();
    callback(null, res);
  });
}

app.put('/upload', function(req, res, next){
  var swift = new Swift(swiftConfig, function(err, result) {
    var options = some logics for options here;
    db.query('SELECT * FROM SOMETABLE WHERE SOMETHING = ?'
          , [something]
          , function (err, results) {
              if (err) return next(err);
              request.call(swift, options, function(err, result) {
                if(err) { res.send(500, err) };
                res.end();
              }, {req: req});
    });
  });
} 
```

当我从客户端 PC 放置文件时，上面的代码运行良好。

但是，当我上传（即 HTTP PUT）内容长度**为零（0）**的文件时，就会出现问题。

即使要上传的文件大小为 1KB，也可以正常工作。

但是当我尝试上传 0 字节文件（空的 http 正文）时，**从未调用过的 'end' 事件（下面的代码），**最后请求发出“**错误：套接字挂起**”的错误。

```
 pipe.req.on('end', function(err){
    client.end();
    callback(null, res);
  }); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:55:54.130

最后，我找出了这个问题的原因。

请求函数（来自 swift 库）使用管道将数据从客户端代理到 swift。

当你调用请求函数时，它不应该在任何回调函数中。在这种情况下，请求函数在“new Swift()”和“db.query”的回调函数中被调用。

如果 request body 的 content-length 为 0，则可以在调用 request.call 之前调用 request 的 end 事件。

所以，你应该记住这一点。

**如果你想使用 'request.call(swift....' 语句，它不能在任何回调函数中。**

# magento - 在 magento 商店中对标头进行打孔

> ID：14340493
> 
> 赞同：11
> 
> 时间：2013-01-15T15:01:40.993
> 
> 标签：magento

我已经在 magento 中实现了标题的打孔，即使我已经让它在每个客户的基础上工作，我需要能够通过使其也适用于不同的购物车项目计数来更深入地了解这一点。

这是我的代码。

```
class AD_PageCache_Model_Container_Header extends Enterprise_PageCache_Model_Container_Abstract {

    protected function _getIdentifier() {
        return $this->_getCookieValue(Enterprise_PageCache_Model_Cookie::COOKIE_CUSTOMER, '');
    }

    // public function getCacheKeyInfo() {
    //  $info = parent::getCacheKeyInfo();
    //  die('boo');
    //  $info['cart_count'] = Mage::helper( 'checkout/cart' )->getCart()->getItemsCount();

    //  return $info;
    // }

    protected function _getCacheId() {
        //return 'CONTAINER_HEADER_' . md5($this->_placeholder->getAttribute('cache_id') . $this->_placeholder->getAttribute('cart_count') ) . '_' . $this->_getIdentifier();
        return 'CONTAINER_HEADER_' . md5( $this->_placeholder->getAttribute('cache_id') . $this->_getIdentifier() );
    }

    protected function _renderBlock() {
        $blockClass = $this->_placeholder->getAttribute('block');
        $template = $this->_placeholder->getAttribute('template');

        $block = new $blockClass;
        $block->setTemplate($template);
        return $block->toHtml();
    }

} 
```

从我从 Magento 上的打孔线程中阅读的内容中，我的理解是，当 FPC 缓存为请求提供服务时，Mage 应用程序没有初始化，所以基本上添加占位符属性的方法不起作用，因为`Mage::helper( 'checkout/cart' )->getCart()->getItemsCount();`不起作用，对吧？

尽管它应该是怎样的，但它似乎根本没有运行，就像我`die()`在那里打了一个电话但什么也没发生。

那么我错过了什么？以及如何检索购物车项目数，以便用于构建缓存 ID？

进展：我发现`Enterprise_PageCache_Model_Cookie::COOKIE_CART`，但这只会在购物车更新时改变一次。之后它保持不变。这很奇怪，这感觉像是解决方案，但它的行为却不然。

我也找不到会话中的购物车项目计数。因此，我目前看到的唯一方法是在会话更新时将购物车数量保存在会话中，然后在`_getIdentifier()`.

我发现观察者对购物车的看法不一致。此外，更新事件被调度，但对于删除，它没有。所以我想我可以以某种方式将我的观察者添加到报价的价格更新中，如果这与观察者保持一致的话？

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:04:41.793

请参阅我的类似问题：[购物车（报价）更改时的整页缓存失效](https://stackoverflow.com/questions/13802663/full-page-cache-invalidation-on-cart-quote-change)

我放弃了实施，因为在我的情况下这是不可能的，但我会`Enterprise_PageCache_Model_Container_Advanced_Quote`进一步深入研究，因为它似乎被购物车块用来在报价内容发生变化的情况下刷新自身

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:30:32.077

我怀疑您将其保存到会话中的想法实际上是一个非常好的想法，并且最有可能可靠地工作

# ios - iOS - 私有 API - 接听来电

> ID：14340497
> 
> 赞同：3
> 
> 时间：2013-01-15T15:01:44.510
> 
> 标签：ios

是否可以通过私有 API 以编程方式接听/接听来电？

我尝试了阻止在[如何使用私有 API 来阻止 iOS 应用程序中的来电中引用的来电的代码？](https://stackoverflow.com/questions/7326338/how-can-i-use-private-apis-to-block-incoming-calls-in-an-ios-application/8337642#8337642). 最终，我为 iOS 6 构建了它。

也许一个困难是自己的应用程序在来电后立即进入后台？或者在此之前应用程序是否可以接收事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:07:56.050

我明白了：您必须`CTCallAnswer(call);`在以下通知案例中使用：

```
if ([str1 isEqualToString:@"kCTCallIdentificationChangeNotification"])
{
    NSDictionary *info = (__bridge NSDictionary *)userInfo;
    CTCall2 *call = (__bridge CTCall *)[info objectForKey:@"kCTCall"];
    NSString *caller = CTCallCopyAddress(NULL, call);
    NSLog(@"Caller %@",caller);

    // answer this call
    CTCallAnswer(call);
} 
```

# c# - 使用 AssemblyCatalog 加载仅由插件引用的第三方程序集

> ID：14340501
> 
> 赞同：0
> 
> 时间：2013-01-15T15:01:58.183
> 
> 标签：c#, clr, mef, .net-assembly

我在 Windows Azure 应用程序中使用 MEF，其中所有程序集插件都存储在 blob 存储中。在 blob 存储中不仅存储插件，还存储插件引用的所有程序集。

加载插件的代码如下：

```
foreach (var pluginBytes in _pluginProvider.GetPlugins())
{
    var pluginAssembly = AppDomain.CurrentDomain.Load(pluginBytes);
    var assemblyCatalog = new AssemblyCatalog(pluginAssembly);
    catalog.Catalogs.Add(assemblyCatalog);
} 
```

不幸的是，当在 CompositionContainer 上调用 ComposeParts 方法时，引用第三方程序集的插件将导致 ReflectionTypeLoadException。

由于云解决方案，我无法使用 DirectoryCatalog。我该如何解决这个棘手的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:08:00.923

如果您在另一个 blob 中有第三方程序集，则可以订阅应用程序的域[AssemblyResolve](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)事件并使用该`arg.Name`值从 blob 中找到第三方程序集。然后以与加载插件相同的方式加载它并返回加载程序集的引用。

# jquery - 如何在它下面的另一个 div 中显示多个 jQuery Slider 步骤

> ID：14340502
> 
> 赞同：5
> 
> 时间：2013-01-15T15:01:58.987
> 
> 标签：jquery, css, jquery-ui, jquery-slider

我的问题与一年前提出的这个问题有关：

[有没有办法在 jquery ui 滑块中显示“滴答声”或“步数”？](https://stackoverflow.com/questions/6187934/is-there-a-way-to-show-the-number-of-ticks-or-steps-in-a-jquery-ui-slider)

该问题中的 OP 想知道如何根据滑块中刻度的位置添加视觉步骤。该解决方案是手动解决方案，不适用于动态滴答方法。

我的问题是，如果我在加载时加载了多个滑块，每个滑块都有不同的步骤，并且在任何时间点，步骤数都可能发生变化。滑块 API 中是否有任何我可能忽略的可用作步骤 div 的参考回调，让它知道每个步骤的位置。

例如，如果其中一个步骤位于“左侧：28%”。该信息在初始化后是否存储在滑块中的任何位置，是否可以访问以在其下方创建动态步骤视觉效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:43:04.757

此代码将根据您的最大值和步长值创建可视步长。它将在多个滑块上工作，并且在滑块创建事件上创建视觉步骤。如果您更改事件或某事的 stepvalue，您可以简单地清除标签 div 并重新运行 create 函数。

您仍然需要根据您希望它的外观来设置 div 的样式。

希望这可以帮助！

[jsFiddle](http://jsfiddle.net/QakYY/3/)

html

```
<div class="slider-holder">
  <div class="slider"></div>
  <div class="slider-labels"></div>
</div> 
```

CSS

```
.slider-holder {
  width:500px;
  height:50px;
  margin:auto;
}
.slider-labels {
   position:relative;
}
.slider-labels span {
  position:absolute;
  color:#000;
} 
```

Javascript

```
$( ".slider" ).slider({
  min: 0,
  max: 100,
  step: 10,
  create : function(event,ui) {
    var maxValue = $(this).slider("option","max");
    var stepValue = $(this).slider("option","step");
    var steps = maxValue/stepValue;
    for(i=0;i<=steps;i++) {
      var val = stepValue*i; 
      $(event.target).next().append('<span style="left:'+val+'%;">'+val+'</span>');
    }
  }
}); 
```

# sql - 从存储为字符串的数字中提取分数

> ID：14340507
> 
> 赞同：1
> 
> 时间：2013-01-15T15:02:06.360
> 
> 标签：sql, string, extract, fractions

我在这个数据库中有一个字段存储数字，如下所示：

*   80 1/4
*   20 1/8
*   20
*   16 年 15 月 36 日
*   44 1/8
*   93 7/8
*   89 1/8

我正在尝试将这些转换为完整的小数，以便我可以将它们相加。我一直在尝试通过从数字中提取小数，将其转换为小数，然后将其添加到整数来做到这一点。我在提取分子时遇到了一些重大问题。分母已使用以下方法提取：

```
CASE WHEN CHARINDEX('/',Fraction) > 0 THEN RIGHT(Faction,(LEN(Fraction) - (CHARINDEX('/',Fraction)))) ELSE NULL END AS [Denominator] 
```

我不确定这是否是最有效的方法，但它似乎有效。

我试图用这种方法把分子拉出来：

```
CASE WHEN Charindex('/', Fraction) > 0 THEN LEFT(RIGHT(Fraction, Len(Fraction) - Charindex(' ',Fraction)), CHARINDEX('/',Fraction) - 1) ELSE NULL END AS [Numerator] 
```

但这只是给了我分数本身。我不确定 SQL 是否在 LEFT 中存在 RIGHT 问题，因为它似乎没有做任何事情，或者更有可能是我的代码搞砸了。

有人有想法么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:13:17.560

您几乎做对了：您正在计算`LEFT`错误传递的长度。您需要考虑空间的位置。

代替

```
CHARINDEX('/',Fraction) - 1 
```

长度应该是

```
CHARINDEX('/',Fraction) - CHARINDEX(' ',Fraction) - 1 
```

整体表达式应如下所示：

```
CASE WHEN Charindex('/', Fraction) > 0 THEN LEFT(RIGHT(Fraction, Len(Fraction) - Charindex(' ',Fraction)), CHARINDEX('/',Fraction) - CHARINDEX(' ',Fraction) - 1) ELSE NULL END AS [Numerator] 
```

[链接到 sqlfiddle 上的演示。](http://www.sqlfiddle.com/#!3/c80f8/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:16:03.580

这应该有效。我已经将 CHARINDEX 函数移到了 APPLY 中，只是为了让它更易读

```
WITH Data AS
(   SELECT  Fraction
    FROM    (VALUES
                ('80 1/4'),
                ('20 1/8'),
                ('20'),
                ('36 15/16'),
                ('44 1/8'),
                ('93 7/8'),
                ('89 1/8')
            ) t (Fraction)
), Workings AS
(   SELECT  Fraction,
            WholeNumber = CAST(CASE WHEN FractionIndex = 0 THEN Fraction ELSE LEFT(Fraction, SpaceIndex) END AS FLOAT),
            Numerator = CAST(CASE WHEN FractionIndex > 0 THEN SUBSTRING(Fraction, SpaceIndex, FractionIndex - SpaceIndex) END AS FLOAT),
            Demonimator = CAST(CASE WHEN FractionIndex > 0 THEN SUBSTRING(Fraction, FractionIndex + 1, LEN(Fraction)) END AS FLOAT)
    FROM    Data
            CROSS APPLY 
            (   SELECT  FractionIndex = CHARINDEX('/', Fraction),
                        SpaceIndex = CHARINDEX(' ', Fraction)
            ) f
)
SELECT  *,
        [Decimal] = CAST(WholeNumber + COALESCE(Numerator / Demonimator, 0) AS FLOAT)
FROM    Workings 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:13:17.683

您可以尝试以下方法：

```
with t as (select '80 123/456' as val)
select (case when val like '% %/%'
             then cast(left(val, charindex(' ', val)) as float) +
                  (cast(SUBSTRING(val, charindex(' ', val), CHARINDEX('/', val) - charindex(' ', val)) as float) /
                   CAST(SUBSTRING(val, charindex('/', val)+1, 100) as int)
                  )
             else cast(val as float)
        end)
from t 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T15:16:33.907

只需复制将变量替换为您的列名，并将其放在您的“CHARINDEX（'/'，Fraction）> 0”为真的case语句部分中。

```
Declare @num varchar(50) = '1004 1/3'

--      Numerator
Select  Left(Right(@num,Len(@num)-CharIndex(' ',@num)),CharIndex('/',Right(@num,Len(@num)-CharIndex(' ',@num)))-1)
--      Denominator
Select  Right(Right(@num,Len(@num)-CharIndex(' ',@num)),Len(Right(@num,Len(@num)-CharIndex(' ',@num)))-CharIndex('/',Right(@num,Len(@num)-CharIndex(' ',@num)))) 
```

# ruby-on-rails - rails重定向问题

> ID：14340508
> 
> 赞同：0
> 
> 时间：2013-01-15T15:02:07.497
> 
> 标签：ruby-on-rails

我正在尝试根据数据库中的值进行重定向。

例如，如果技术人员登录，他们应该被重定向到站点 A，否则其他所有人都应该被重定向到站点 B。

到目前为止，我的尝试如下

```
 def create
    @user_session = UserSession.new(params[:user_session])
    @user = User.new(params[User.where(:username => @user_session.username)])
    #@user = UserUser.where(:username => @user_session.username)
    #@user = User.select("tech").find(@user)
    #@user = User.new
    respond_to do |format|
      if @user_session.save
        if @user.tech == 1
          format.html { redirect_to '/tech/index', notice: 'Login Successful A Company' }
        else
          format.html { redirect_to :users, notice: @user.tech }
        end
      else
        format.html { render action: "new" }
      end
    end
  end 
```

问题是 if 语句总是解析为 else 语句中的代码，而不是 else 语句上方的代码。在这种情况下，@user.tech 为零我不知何故没有指向数据库中的数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:45:41.703

行

尝试更改此行

```
@user = User.new(params[User.where(:username => @user_session.username)]) 
```

在这里，您做了一些奇怪的事情，我认为您应该收到一条错误消息。@user 只是内存中 User 模型的一个新实例

我想你需要这个

```
@user = User.where(:username => @user_session.username)]).first 
```

但是，如果用户名不是唯一的，这是一个安全问题。管理员可以与用户同名所以你应该做类似的事情

```
@user = User.where(:id => @user_session.user_id)]).first 
```

技术？user.rb （模型）中的方法我猜数据库中的技术是 1 还是 0？

```
class User
    def tech?
      tech == 1 #
    end
end 
```

现在你可以做

```
@user.tech? 
```

它会返回 ture 或 false

# ms-access - 记录集解释？

> ID：14340516
> 
> 赞同：0
> 
> 时间：2013-01-15T15:02:23.720
> 
> 标签：ms-access, vba, ms-access-2010

最近我开始意识到记录集可能是一个比我最初想象的更简单（不太有用）的对象。我正在寻找其他人是否可以证实或否认我的怀疑。让我解释。当我创建两个 DAO 记录集对象时，比如 rstA 和 rstB，并将它们都设置到同一个表中，比如 TableA，就像这样，

```
Set rstA = CurrentDb.OpenRecordset("TableA", dbOpenDynaset)
Set rstB = CurrentDb.OpenRecordset("TableA", dbOpenDynaset) 
```

那么他们就不会自主行事。例如，移动记录，使用`rstA.MoveNext`，然后它对 rstB 执行相同的操作。

最初，我认为记录集是“成熟的”对象，但这种行为表明它们只是指向表的指针。所以，表持有它自己的指针来指示当前记录，这就是为什么用 rstA 或 rstB 移动这个指针会导致一个影响另一个。

这是正确的还是我只是做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T15:11:48.347

你做错了什么。

每个记录集应该是一个独立的对象，并且使用`rstA.MoveNext`应该对`rstB`.

试试下面的代码：

```
MsgBox rstA(0)
MsgBox rstB(0)

rstA.MoveNext

MsgBox rstA(0)
MsgBox rstB(0) 
```

假设每个记录集中的下一个值与前一个不同，第二个`MsgBox rstA(0)`应该警告第二个记录`TableA`，而第二个`MsgBox rstB(0)`仍然会警告第一个记录`TableA`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T20:19:12.297

在学习了关于 VBA 的一两件事之后，我想我可能已经找到了解决这个问题的方法。在我问这个问题时，我不知道 Let 关键字。如果我知道，那么我可能会尝试以下方法：

```
Let rstA = CurrentDb.OpenRecordset("TableA", dbOpenDynaset)
Let rstB = CurrentDb.OpenRecordset("TableA", dbOpenDynaset) 
```

我仍然认为 OpenRecordset 方法生成了一个隐藏的记录集对象，因此使用 Set 关键字简单地分发了这个隐藏的记录集对象的地址。我还没有测试过这个理论，因为当时我只是用一种完全不同的方式来解决我的问题。只是想更新帖子，以防以后可能对其他人有所帮助。

# android - 某些设备上的 Android 问题

> ID：14340518
> 
> 赞同：2
> 
> 时间：2013-01-15T15:02:26.687
> 
> 标签：android, device, inetaddress

我想为我的应用程序使用以下代码：

```
InetAddress inetAddress;
try {
        inetAddress = InetAddress.getByName(hostname);
} catch (UnknownHostException e) {
        return -1;
} 
```

它在我测试过的大多数设备上运行良好，但在 Nexus S Europe 和华为设备上，它会引发异常。

> 无法为 192.168.010.200 建立路由：未知主机

我已经尝试在我的 Application 类中使用以下代码修复它，但没有成功：

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitNetwork().build();
StrictMode.setThreadPolicy(policy); 
```

我也尝试过使用 AsyncTask 但我得到了同样的错误。这是我使用的代码：

```
private int mInetAddr = -1;
private boolean mInetAck = false; // Acknowledgement

private class AsyncInetAddress extends AsyncTask<String, Void, Void>
{
    @Override
    protected Void doInBackground(String... hostname)
    {
        InetAddress inetAddress;
        try
        {
            inetAddress = InetAddress.getByName(hostname[0]);
        }
        catch (UnknownHostException e)
        {
            mInetAddr = -1;
            return null;
        }

        byte[] addrBytes;
        int addr;
        addrBytes = inetAddress.getAddress();
        addr = ((addrBytes[3] & 0xff) << 24)
                | ((addrBytes[2] & 0xff) << 16)
                | ((addrBytes[1] & 0xff) << 8)
                | (addrBytes[0] & 0xff);
        mInetAddr = addr;
        return null;
    }

    @Override
    protected void onPostExecute(Void result)
    {
        mInetAck = true; // Acknowledgement
    }
} 
```

您对我如何解决这个问题有任何想法吗？

谢谢。

**编辑：我在其他一些设备上试过，问题似乎只出现在 4.0.* 版本上。适用于 2.* 、 3.* 和 4.1+。**

现在问题出在该行：

```
 if (!connMgr.requestRouteToHost(2, inetAddr)) 
```

哪里`inetAddr = -938825536`。第一个参数是彩信类型。在运行 4.0.3 或 4.0.4 的设备下，该条件始终为真。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:13:00.180

首先，您得到的具体错误是什么？
可能不是设备的问题，而是您运行的 Android 版本的问题。

并尝试改变这一点：

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitNetwork().build();
StrictMode.setThreadPolicy(policy); 
```

到：

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
 StrictMode.setThreadPolicy(policy); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:02:05.297

尝试使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)提出您的请求。

> AsyncTask 允许正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T08:21:29.453

到目前为止我找到的解决方案如下：

```
public static int lookupHost(String hostname) {
    // Hostname is to be `XXX.XXX.XXX.XXX` or `XXX.XXX.XXX.XXX:XXXX`
    hostname = hostname.substring(0, hostname.indexOf(":") > 0 ? hostname.indexOf(":") : hostname.length());
    String result = "";
    String[] array = hostname.split("\\.");
    if (array.length != 4) return -1;

    int[] hexArray = new int[] {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0};
    hexArray[0] = Integer.parseInt(array[0]) / 16;
    hexArray[1] = Integer.parseInt(array[0]) % 16;
    hexArray[2] = Integer.parseInt(array[1]) / 16;
    hexArray[3] = Integer.parseInt(array[1]) % 16;
    hexArray[4] = Integer.parseInt(array[2]) / 16;
    hexArray[5] = Integer.parseInt(array[2]) % 16;
    hexArray[6] = Integer.parseInt(array[3]) / 16;
    hexArray[7] = Integer.parseInt(array[3]) % 16;

    for (int i=0; i<8; i++)
    {
        result += Integer.toHexString( hexArray[i] );
    }

    return (new Long( Long.parseLong(result, 16) )).intValue();
} 
```

它看起来可以在我测试过的大多数设备上运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T14:42:38.343

问题解决了。启用 wifi 时找不到到 IP 的路由。最简单的方法是禁用wifi，做你的事情，然后启用wifi。

这是我使用的代码：

```
// Disable wifi if it's active
WifiManager wifiManager = (WifiManager) getApplicationContext().getSystemService(Context.WIFI_SERVICE);
if (wifiManager.isWifiEnabled())
{
      mWasWifiActive = true;
      wifiManager.setWifiEnabled(false);
      Log.e(TAG, "Wifi was enabled, now Off.");
}

// Do stuff here

// Re-enable wifi if it was active before routing
if (mWasWifiActive)
{
       WifiManager wifiManager = (WifiManager) getApplicationContext().getSystemService(Context.WIFI_SERVICE);
       wifiManager.setWifiEnabled(true);
       Log.e(TAG, "Wifi is back online.");
} 
```

# html - HTML 输入文件 - 如何翻译“选择文件”和“未选择文件”？

> ID：14340519
> 
> 赞同：18
> 
> 时间：2013-01-15T15:02:27.030
> 
> 标签：html, django, filechooser

我知道由于浏览器语言，这两个词会自动翻译。但我的 HTML 并没有这样做。

**HTML：**

```
<p>
  <label for="id_company_logo">
     Company Logo:
  </label>
  <input type="file" name="company_logo" id="id_company_logo" />
</p> 
```

它是从以下“表单”代码生成的`django`：

```
company_logo = forms.ImageField(label=_('Company Logo'),required=False, error_messages = {'invalid':_("Image files only")}, widget=forms.FileInput) 
```

我做错什么了吗？我现在搜索了一段时间，但我完全没有运气。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T18:07:11.873

这个问题在 Stackoverflow 上讨论过多次。
以下是文章：
[如何更改输入类型=“文件”的按钮文本？](https://stackoverflow.com/questions/1944267/how-to-change-the-button-text-of-input-type-file)
[标记文件上传按钮](https://stackoverflow.com/questions/686905/labeling-file-upload-button)
[更改输入类型=“文件”中的默认文本？](https://stackoverflow.com/questions/5138719/change-default-text-in-input-type-file)

但这是一篇很棒的文章[。](http://www.quirksmode.org/dom/inputfile.html)

**[在这里](https://web.archive.org/web/20161119093541/http://www.appelsiini.net:80/projects/filestyle)您可以找到解决问题的方法。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-14T12:56:40.767

请起诉这个。

```
.upload-btn-wrapper {
  position: relative;
  overflow: hidden;
  display: inline-block;
  background-color: #fff;
  border: 1px solid #cdcdcd;
  border-radius: 3px;
  padding: 8px 12px;
  height: 39px!important;
  width:calc(100% - 26px);
}

.upload-btn-wrapper .btnr {
  border: 1px solid gray;
  color: gray;
  background-color: #eee;
  padding: 5px 10px;
  border-radius: 1px;
  font-size: 14px;
  font-weight: bold;
  position: relative;
}
.upload-btn-wrapper .btnr + span {
  padding: 5px;
  font-weight: normal;
  }

.upload-btn-wrapper input[type=file] {
    font-size: 42px;
    position: absolute;
    left: 0;
    top: 0;
    opacity: 0;
}
```

```
<div class="upload-btn-wrapper">
  <button class="btnr" title="haga clic para cargar el archivo">Seleccionar archivos</button>
  <span>No hay archivos elegidos</span>
  <input type="file" name="myfile" title="haga clic para cargar el archivo" />
</div>
```

和css运行看看

# c# - 实体框架 - 索引（从零开始）必须大于或等于零

> ID：14340526
> 
> 赞同：2
> 
> 时间：2013-01-15T15:02:34.343
> 
> 标签：c#, linq, entity-framework, asp.net-mvc-4, formatexception

我已经有一段时间出错了，在阅读她在 SO 上的所有其他帖子时，我没有得到更多的切肉刀。

进行数据库调用时出现错误：

```
Index (zero based) must be greater than or equal to zero 
```

我有以下方法给我错误：

```
 public bool IsUserInRole(User user, string roleName)
    {
        using (var repository = new SaxoPublishingEntities())
        {
            repository.Attach(user);

            // THIS CALLS GIVE ME THE ERRROR
            var roles = repository.UserRoles.Include("Users").Where(userRole =>
                userRole.Name == roleName && userRole.Users.Contains(user)).ToList();

            if (roles.Any())
            {
                return true;
            }
            return false;
        }
    } 
```

我的数据库模型：

![在此处输入图像描述](../Images/6e096a56adc7c416a987e5a989f37273.png)

我的堆栈跟踪：

```
[FormatException: Indekset (nulbaseret) skal være større end eller lig med nul og mindre end størrelsen af argumentlisten.]
   System.Text.StringBuilder.AppendFormat(IFormatProvider provider, String format, Object[] args) +10610374
   System.String.Format(IFormatProvider provider, String format, Object[] args) +63
   System.Data.EntityRes.GetString(String name, Object[] args) +363
   System.Data.Entity.Strings.ELinq_UnsupportedConstant(Object p0) +95
   System.Data.Objects.ELinq.ConstantTranslator.TypedTranslate(ExpressionConverter parent, ConstantExpression linq) +1256
   System.Data.Objects.ELinq.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq) +88
   System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq) +162
   System.Data.Objects.ELinq.ContainsTranslator.TranslateContains(ExpressionConverter parent, Expression sourceExpression, Expression valueExpression) +136
   System.Data.Objects.ELinq.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq) +1011
   System.Data.Objects.ELinq.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq) +88
   System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq) +162
   System.Data.Objects.ELinq.BinaryTranslator.TypedTranslate(ExpressionConverter parent, BinaryExpression linq) +122
   System.Data.Objects.ELinq.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq) +88
   System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq) +162
   System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input) +168
   System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input, DbExpressionBinding& binding) +161
   System.Data.Objects.ELinq.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, DbExpression& source, DbExpressionBinding& sourceBinding, DbExpression& lambda) +168
   System.Data.Objects.ELinq.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call) +66
   System.Data.Objects.ELinq.SequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, SequenceMethod sequenceMethod) +47
   System.Data.Objects.ELinq.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq) +169
   System.Data.Objects.ELinq.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq) +88
   System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq) +162
   System.Data.Objects.ELinq.ExpressionConverter.TranslateSet(Expression linq) +53
   System.Data.Objects.ELinq.UnarySequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call) +197
   System.Data.Objects.ELinq.SequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, SequenceMethod sequenceMethod) +47
   System.Data.Objects.ELinq.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq) +169
   System.Data.Objects.ELinq.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq) +88
   System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq) +162
   System.Data.Objects.ELinq.ExpressionConverter.Convert() +50
   System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable`1 forMergeOption) +593
   System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption) +255
   System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator() +89
   System.Linq.Enumerable.Single(IEnumerable`1 source) +100
   System.Data.Objects.ELinq.ObjectQueryProvider.<GetElementFunction>b__3(IEnumerable`1 sequence) +31
   System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle(IEnumerable`1 query, Expression queryRoot) +56
   System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute(Expression expression) +97
   System.Linq.Queryable.Any(IQueryable`1 source) +233
   Saxo.Publishing.Business.UserServiceOLD.IsUserInRole(User user, String roleName) in c:\Users\laho\Documents\GitHub\SaxoPublishing\Development\Saxo Publishing\Saxo.Publishing.Business\UserServiceOLD.cs:175
   Saxo.Publishing.Web.Security.UserPrincipal.IsInRole(String role) in c:\Users\laho\Documents\GitHub\SaxoPublishing\Development\Saxo Publishing\Saxo.Publishing.Web\Security\User\UserPrincipal.cs:42
   System.Linq.Enumerable.Any(IEnumerable`1 source, Func`2 predicate) +146
   System.Web.Mvc.AuthorizeAttribute.AuthorizeCore(HttpContextBase httpContext) +333
   System.Web.Mvc.AuthorizeAttribute.OnAuthorization(AuthorizationContext filterContext) +421
   System.Web.Mvc.ControllerActionInvoker.InvokeAuthorizationFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor) +143
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__1e(AsyncCallback asyncCallback, Object asyncState) +978
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +161
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +92
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag) +53
   System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeAction(ControllerContext controllerContext, String actionName, AsyncCallback callback, Object state) +538
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__17(AsyncCallback asyncCallback, Object asyncState) +83
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +161
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +92
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag, Int32 timeout) +97
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag) +53
   System.Web.Mvc.Controller.BeginExecuteCore(AsyncCallback callback, Object state) +531
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +161
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +92
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag, Int32 timeout) +97
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag) +53
   System.Web.Mvc.Controller.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +447
   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +49
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__2(AsyncCallback asyncCallback, Object asyncState) +127
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +161
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate`1 endDelegate, Object tag, Int32 timeout) +92
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag, Int32 timeout) +97
   System.Web.Mvc.Async.AsyncResultWrapper.Begin(AsyncCallback callback, Object state, BeginInvokeDelegate beginDelegate, EndInvokeDelegate endDelegate, Object tag) +53
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +388
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +88
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +50
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +301
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

任何想法都非常感谢！:-)

**尝试重写版本 1：**

```
public bool IsUserInRole(User user, string roleName)
    {
        using (var repository = new SaxoPublishingEntities())
        {

            var users = repository.Users.Where(c => c.Id == user.Id);

            if (users.Any())
            {
                var myUser = users.First();
                var roles = repository.UserRoles.Where(userRole =>
                    userRole.Name == roleName && userRole.Users.Contains(myUser)).ToList();

                if (roles.Any())
                {
                    return true;
                }
            }
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T15:39:57.143

这是一个众所周知的 EF 限制的神秘信息：您不能在`Contains`. 而是这样做：

```
var userId = user.Id;
var roles = repository.UserRoles.Where(userRole => userRole.Name == roleName
                  && userRole.Users.Select(u => u.Id).Contains(userId)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:07:48.767

您是否检查过`user.Id`不是负数，以及`Id`两个数据库表中所有行的所有列`User`并且`UserRole`从不低于零？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:13:52.007

您发布的方法不是您的错误的来源。查看异常 - 您调用了 a`AppendFormat`上的某个位置`StringBuilder`，并且您使用的格式字符串有一个`{0}`没有相应替换变量的替换标记（即 ）。

编辑：查看跟踪：

```
System.Text.StringBuilder.AppendFormat(IFormatProvider provider, String format, Object[] args) +10610374
System.String.Format(IFormatProvider provider, String format, Object[] args) +63
System.Data.EntityRes.GetString(String name, Object[] args) +363
System.Data.Entity.Strings.ELinq_UnsupportedConstant(Object p0) +95
System.Data.Objects.ELinq.ConstantTranslator.TypedTranslate(ExpressionConverter parent, ConstantExpression linq) +1256
System.Data.Objects.ELinq.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq) +88
System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq) +162
System.Data.Objects.ELinq.ContainsTranslator.TranslateContains(ExpressionConverter parent, Expression sourceExpression, Expression valueExpression) +136
System.Data.Objects.ELinq.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq) +1011 
```

这看起来错误源于您正在使用的 Linq-To-Entity 代码提供程序；您正在拉入某种“转换字符串” `EntityRes.GetString`-我的猜测是格式字符串中有错误。鉴于堆栈跟踪的其余部分，我*猜想*在您的 LINQ 查询中的某处您指的是一个常量，它不知道如何正确映射 - 可能在 contains 子句中？

在您发布的方法中检查的其他事项：

*   `user`不为空
*   `userRole`不为空
*   `myUser`出现“有效”
*   `userRole.Name`不为空/空格/空

# marklogic - 标记逻辑树缓存 - 共享资源？

> ID：14340528
> 
> 赞同：1
> 
> 时间：2013-01-15T15:02:34.517
> 
> 标签：marklogic

如果我运行一个非常愚蠢的查询，将大量节点加载到扩展的树缓存中，我是否会影响在 MarkLogic 上运行的其他查询？换句话说，扩展的树缓存是共享资源还是可能分配给我的连接的部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:43:20.567

是的，缓存是共享的。

每个缓存都在组级别进行配置，并在主机级别进行分配。给定主机上的所有并发查询共享相同的缓存空间。对于应用服务器，这意味着扩展树缓存，而任何林查找都将使用列表缓存和压缩树缓存空间。

# python - Pygame-显示问题文本未显示

> ID：14340529
> 
> 赞同：0
> 
> 时间：2013-01-15T15:02:41.357
> 
> 标签：python, pygame, tic-tac-toe

这是我遇到的一个非常特殊的问题。此代码（如下）不会引发错误，但不会更新并显示玩家或计算机的移动。
有什么问题？？我真的很困惑。
此外，此代码中未定义的所有功能均从井字游戏和**工作中导入！**
游戏逻辑功能没有问题，问题在于显示（pygame）代码。
**输入当前来自控制台**

```
from TicTacToe import * # The game logic functions
import pygame
from pygame.locals import *
#-------------The problem may be here---------------#
def printb(board,surface,image): 
    surface.blit(image,(0,0))
    for x in range(3):
        for y in range(3):
            disp(board[x+(y*3)],(58*x,58*y+13),surface)  # any inputs on a better way to do this??
#-------------The problem may be here---------------#
def disp(phrase,loc,screen):
    s = font.render(phrase, True, (0,0,0))
    screen.blit(s, loc)

if __name__ == '__main__':
    # Pygame
    pygame.init()
    pygame.font.init()

    screen = pygame.display.set_mode((200,250))
    screen.fill((0,255,0))

    img = pygame.image.load('Board.png')
    img = img.convert_alpha()

    font = pygame.font.SysFont("Courier",11)
#----------The problem may even be here---------------#
    # Game
    board = [' ']*9
    playing = True
    while True:
        while True:
            for event in pygame.event.get():
                if event.type == QUIT:
                    pygame.quit()

            printb(board,screen,img)

            pmove = playermove(board) # player move
            makemove(board,pmove,'O')

            if checkwinner(board,'O'):
                winner = 'P'
                break

            else:
                if boardfull(board):
                    break
                cmove = compmove(board) # comp move
                makemove(board,cmove,'X')

                if checkwinner(board,'X'):
                    winner = 'C'
                    break

            pygame.display.flip()
        printb(board,screen,img)
        if winner == 'P':
            print 'You'
        elif winner == 'C':
            print 'I'
        else:
            print'Draw'
        if playagain():
            board = [' ']*9
            print '\n\n'
        else:
            break 
```

在其中一次运行中（在空闲时），玩家是`' O '`，计算机是`' X '`

```
>>> 
Enter Your Move: 1
Enter Your Move: 2
Enter Your Move: 3
Not free space!!
Enter Your Move: 4
I Win !!
Play Again? -> n
>>> board
['O', 'O', 'X', 'O', ' ', 'X', ' ', ' ', 'X']
>>> winner
'C' 
```

这是 pygame 窗口，它始终保持不变。
![窗户](../Images/8fc9d920f2bd24b0776f190be827aa4d.png)

# c++ - 模板化类的模板化成员方法可以在类定义之外定义吗

> ID：14340531
> 
> 赞同：1
> 
> 时间：2013-01-15T15:03:02.443
> 
> 标签：c++

我一直在努力确保我理解 C++ 模板的语法，我想我已经到了最后一种情况。如果我有一个模板类，它有一个模板方法（与类的模板参数无关）作为成员，我可以在类定义之外定义该方法吗？如果是这样，语法是什么？

如果模板化方法是在模板化类定义中定义的，那么一切都很好。但是为了在类外定义方法，我尝试了很多关键字和尖括号的组合，但我总是遇到编译器错误（Visual Studio 2012）。

这是问题，归结为：

```
template <typename T>
class TestClass
{
    public:
        // ctor
        TestClass(T classtype) {m_classtype = classtype;}

        // The declaration/definition below is fine.
        template <typename U> void MethodOk(U param) {printf("Classtype size: %d.  Method parameter size: %d\n", sizeof(m_classtype), sizeof(param));}

        // The declaration below is fine, but how do I define the method?
        template <typename U> void MethodProblem(U param); // What is the syntax for defining this outside the class definition?

    private:
        T m_classtype;
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T15:12:49.533

```
template<typename T>
template<typename U>
void TestClass<T>::MethodProblem(U param)
{
    //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:13:27.357

只需将其视为嵌套模板：

```
template <typename T>
template <typename U>
void TestClass<T>::MethodProblem(U param)
{
} 
```

# tfsbuild - 您需要什么权限才能修改构建定义的安全性

> ID：14340535
> 
> 赞同：1
> 
> 时间：2013-01-15T15:03:19.807
> 
> 标签：tfsbuild, tfs-security

在 TFS 2010 中，我可以右键单击 Builds 节点下的构建定义，选择 Security 选项并控制哪个组可以对该构建定义执行哪些活动。

我的问题是如何控制我的团队成员修改构建定义的安全设置。换句话说，默认情况下哪个用户组有权控制构建定义上的安全设置以及在敏捷流程模板方面该设置在哪里指定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:26:56.487

事实证明，在 TFS 2010 中，没有单一的权限或安全设置可以让您控制它。TFS 安全模型通过查看与 Build 相关的整体安全权限来计算此特定限制。具体这三个

“销毁构建”、“管理构建队列”和“删除构建定义”

共同确定用户在 TFS 2010 中每个构建可以做什么或不可以做什么

# php - 变量名称覆盖会话名称

> ID：14340539
> 
> 赞同：1
> 
> 时间：2013-01-15T15:03:31.567
> 
> 标签：php, session, variables, overwrite

所以我有几个子域共享同一个会话，对吗？

在子域 1（用户面板、编辑信息和内容）上：

```
$_SESSION['user_id'] = 4; 
```

在子域 2 上（参见用户配置文件）：

```
$user_id = 8; 
```

回到子域 1：

```
echo $_SESSION['user_id']; // output: 8! 
```

id 8是如何`$_SESSION['user_id']`设置的？

希望能学到新东西^_^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:32:28.440

您只需执行以下操作：

```
$_SESSION['sub_domain1]['user_id'] = 8;
$_SESSION['sub_domain2]['user_id'] = 4; 
```

这是使用 Zend Framework 的名称页处理会话的解决方案。您可以创建类：然后写入方法：`My_Session`并从键中获取您的值。`__contruct($namespace)``get``set`

更新： http:
[//framework.zend.com/manual/1.12/en/zend.session.basic_usage.html](http://framework.zend.com/manual/1.12/en/zend.session.basic_usage.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:13:18.573

从您的代码中并不完全清楚（您的意思是`$_SESSION['user_id'] = 8;`在第二个代码片段中吗？），但如果您有两个共享 cookie 并具有相同会话 ID 的子域（并使用 cookie 进行会话），那么您可以修改两者之间的会话.

这可以通过在执行任何与会话相关的事情（或输出任何内容）之前设置会话 cookie 域，或者通过在 php.ini 中为 cookie 域设置配置选项来实现。

如果您以其他方式（例如 URL）传递会话 ID，并在子域之间共享它，这也可能发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T15:39:06.847

您描述的症状使我怀疑您的某些（或全部）站点中启用了[register_globals 。](https://stackoverflow.com/questions/3593210/what-are-register-globals-in-php)当`$_SESSION`数组中的项目成为全局变量时，您会遇到此类问题。

# javascript - 从外部链接到页面携带变量并插入 jQuery 脚本 onload

> ID：14340540
> 
> 赞同：0
> 
> 时间：2013-01-15T15:03:39.360
> 
> 标签：javascript, jquery, variables, show-hide

我有这个 jQuery，它根据单击的列表项显示/隐藏内容。我还希望能够在登陆此页面时显示特定内容，具体取决于用户在另一个页面上单击的链接。

我知道要做到这一点，我必须以某种方式从另一个链接中携带变量，并使其充当变量。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>    
<script type="text/javascript"> 
$(document).ready(function() {
$('#side_nav ul li a').click(function() {
    $('#side_nav ul li.current').removeClass('current');
    $(this).parent().addClass('current');

    var filterVal = $(this).attr('class');

        $('#content div.section').each(function() {
            if($(this).hasClass(filterVal)) {
                $(this).fadeIn(200);
            } else {
                $(this).hide();
            }
        });
    return false;
});
});
</script> 
```

我尝试将#desired_content 添加到单独页面上链接的url末尾，我知道使用window.location.hash，我可以以某种方式将该哈希标签作为变量拉入，但我完全迷失了如何做到这一点。

请帮忙。

编辑：我将此添加到外部页面：

```
<li><a href="./about.html#how_it_works">HOW IT WORKS</a></li> 
```

这到目标页面，只是为了测试是否正在添加类

```
<script type="text/javascript"> 
$(document).ready(function() {
    var myHash = window.location.hash;

    if( myHash == "#how_it_works" ){
        $('#content div.how_it_works').addClass('test');
    }else if( myHash == "#option2" ){
        // fade in option2
    }

});     
</script> 
```

我不明白为什么这不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:15:58.953

散列 URL 主要用于页内锚标记（返回顶部等），因此我建议使用散列 URL 将某人引导到页面的某个部分很有意义。

一旦进入页面，我所做的是通过 window.location.hash 获取哈希 URL 并根据此字符串操作您的页面。

```
var myHash = window.location.hash;

if( myHash == "#desired_content" ){
// fade in option1
}else if( myHash == "#option2" ){
// fade in option2
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T15:06:15.540

我建议将变量存储在第一页的 localStorage 中，然后在第二页从 localStorage 加载变量。这将比传递不是正确目的的哈希 URL 更简单。

第一页

```
<a href="secondPage.html" id="link">Go to second page</a>
<script type="text/javascript"> 
$(document).ready(function() {
$('#link').click(function(){
    // set your variable when someone click the link
    localStorage.setItem("myVariable", "someValue");
});
});
</script> 
```

第二页

```
<script type="text/javascript"> 
$(document).ready(function() {
var yourVariable = localStorage.getItem("myVariable");
// do your stuff according to this variable that passed from firstpage
//...
});
</script> 
```

# asp.net - 实施礼品卡

> ID：14340541
> 
> 赞同：0
> 
> 时间：2013-01-15T15:03:41.837
> 
> 标签：asp.net, sql, paypal

我遇到了一个在使用 paypal 的电子商务网站中实施礼品卡的问题。我会尽量说清楚。

一旦用户验证了他的购物车，他可以输入一个代码作为礼品卡以获得折扣。礼品卡（和代码）只能使用一次，并且与用户无关。

所以当用户输入代码时，我检查它是否存在，如果它已经被使用过，获得折扣等等......

在贝宝的邮购中（一旦付款被接受），我将礼品卡设置为已使用。

现在，我怎样才能防止礼品卡被使用两次（或更多）。因为当用户输入代码并转到贝宝时，另一个用户可以使用同一张礼品卡，而第一个用户没有确认付款（并且没有处理售后）。

我想给礼品卡一个状态，例如在重定向到贝宝之前“使用中”，但如果用户在没有确认购买的情况下离开贝宝，礼品卡将永远是使用中，然后我将无法再次检查它。 ..

我希望我已被理解并感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:27:02.130

好吧，您可以在他们输入代码时检查该代码是否已被使用，然后在交易完成时再次检查。第二次检查必须小心执行，使用单个锁定数据库事务检查代码是否已被使用，然后将其标记为已使用。

如果在交易完成之前代码已被其他人使用，则交易将不得不因错误而失败。但是，大概这将是非常罕见的情况。

除此之外，我想知道你是否应该重新考虑你的设计。未链接到用户的一次性代码似乎不寻常——通常这*将*链接到特定用户，这将使其更易于处理。你的用例是什么？

# magento - magento 以编程方式检测产品页面

> ID：14340542
> 
> 赞同：0
> 
> 时间：2013-01-15T15:03:41.687
> 
> 标签：magento, url-rewriting, magento-1.7

在观察者文件上，我需要检测加载的页面是否对应于产品。我一直在使用与[此问题的已检查答案中](https://stackoverflow.com/a/3041796/1297603)使用的方法类似的方法：

```
if (!(Mage::registry('current_product'))) return; 
```

但到目前为止，我们一直在测试开发。从今天开始，我们将在预生产服务器上进行测试，其中包含大量模块和插件。到目前为止，它工作得很好，但现在它不起作用，它没有检测到何时加载产品页面。我认为与 url 重写有关，以显示更“友好”的 url，但无法检测到如何解决它。我查看了 Alan Storm 教程[In Depth Magento Dispatch](http://alanstorm.com/category/magento#dispatch)，但我仍然可以找到问题所在或需要更改的内容。

任何想法？或者关于如何检测何时加载产品页面的其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:47:05.577

你已经确认观察者被击中了？确保您触发的事件具有该事件的唯一名称。例如，在以下代码中，名称“catalog_product_set_price”对于“catalog_product_load_after”事件必须是唯一的。我假设你正在进入观察者，但以防万一。如果您将一堆新模块添加到实例中，则可能会出现这种风险。

```
 <catalog_product_load_after>
            <observers>
                <catalog_product_set_price>
                    <type>singleton</type>
                    <class>NamespaceModule_Model_Observer</class>
                    <method>set_price2</method>
                </catalog_product_set_price>
            </observers>
        </catalog_product_load_after> 
```

您可以使用以下数组来检查您的位置：

```
$currentPageArray = array(
            'request_string'=> Mage::app()->getFrontController()->getRequest()->getRequestString(),
            'uri'           => Mage::app()->getFrontController()->getRequest()->getRequestUri(),
            'route'         => Mage::app()->getFrontController()->getRequest()->getRouteName(),
            'action'        => Mage::app()->getFrontController()->getRequest()->getActionName(),
            'controller'    => Mage::app()->getFrontController()->getRequest()->getControllerName()
        ); 
```

它将输出如下内容：

```
Array
(
    [request_string] => /some-category/some-product-page-url.html
    [uri] => /catalog/product/view/id/64806/category/17
    [route] => catalog
    [action] => view
    [controller] => product
) 
```

你可以试试不同的观察者。

*   controller_action_layout_render_before_catalog_product_view
*   controller_action_postdispatch_catalog_product_view

# mysql - 这个 Node 应用程序会为我节省数据库连接吗？

> ID：14340543
> 
> 赞同：0
> 
> 时间：2013-01-15T15:03:44.463
> 
> 标签：mysql, node.js, twilio

我有一个 PHP/MySQL-Twilio 应用程序。我在 PHP 应用程序中编辑“模板”，当文本发送者通过 twilio 发短信时，他们会收到短信中的模板之一。

最近我一直在涉足 Node，主要是为了编写小脚本，而不是整个应用程序。我认为使用 Node 进行短信交互是一个非常好的主意，但我做了一个假设：

节点进程将连续运行，保持 mysql 连接打开。它会比 PHP 更快，因为不必为每个 twilio 请求打开和关闭连接。

这个对吗？出于这个原因，在 Node 中重写我的项目的这个角落是否有意义？我还没有准备好重写整个事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:05:01.560

如果您愿意，您可以在每个请求上打开和关闭连接，但是 NodeJS 也可以使用连接池。PHP 也支持池化，它在后面打开一些连接，你看不到但不通知。在 NodeJS 中，您必须自己处理它。有帮助模块来实现这一点，我当然建议你看看[这个例子](http://nodejsdb.org/2011/05/connection-pooling-node-db-with-generic-pool/)没什么大不了的。

# c# - 从网络获取所有文件夹

> ID：14340548
> 
> 赞同：1
> 
> 时间：2013-01-15T15:03:53.490
> 
> 标签：c#, .net, network-programming

我有点迷路了，我有一个任务是从网络域中获取所有文件夹，例如（我的网上邻居/整个网络/Microsoft Windows 网络/xyNetwork）。

我必须获取所有文件夹和子文件夹，然后获取分配给该文件夹的所有安全组以及授予每个安全组的权限。

我之前做过的第二部分，然而，获取所有文件夹列表的第一部分似乎非常复杂。

任何可能有帮助的指南或参考资料？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:54:37.580

好吧，另一个类似条目中有一个代码列出了网络中的所有计算机名称......这是您要求的第一部分。对于第二部分，我认为您需要深入`System.DirectoryServices`研究类，因为也有一些权限......祝你好运。

```
//Lists all available computer names on the network.
public static List<String> ListNetworkComputers()
{
    var computerNames = new List<String>();
    var computerSchema = "Computer";

    var entries = new System.DirectoryServices.DirectoryEntry("WinNT:");
    foreach (var domains in entries.Children)
    {
        foreach (var computer in domains.Children)
        {
            if (computer.SchemaClassName.ToLower().Contains(computerSchema .ToLower()))
            {
                computerNames.Add(computer.Name);
            }
        }
    }

    return computerNames;
} 
```

我刚刚打印出这些值，它对我来说效果很好。

```
foreach (string lst in ListNetworkComputers())
{
    Console.WriteLine("PC: " + lst);
} 
```

（以上代码取自：[Getting computer names from my network places](https://stackoverflow.com/questions/10236249/getting-computer-names-from-my-network-places)）

您需要的是从您的代码中访问 Win32_Share WMI。添加对 System.Management.dll 的引用并使用以下代码。

来自此处主题的 VB.NET 中的代码示例： [http ://www.pcreview.co.uk/forums/finding-share-s-directory-spec-t3064222.html](http://www.pcreview.co.uk/forums/finding-share-s-directory-spec-t3064222.html)

VB.net程序的C#版本：

```
class Program
{
    static void Main(string[] args)
    {
        var objClass = new System.Management.ManagementClass("Win32_Share");

        foreach(var objShare in objClass.GetInstances())
        {
            Console.WriteLine(String.Format("{0} -> {1}", 
                objShare.Properties["Name"].Value, objShare.Properties["Path"].Value));
        }
    }
} 
```

您可以将上面代码的结果与通过在 Windows 命令提示符下运行以下命令获得的结果进行比较：

`C:\net share`

这将为您提供共享名称（共享时给出的共享名称，即 MySharedDir）和资源（Windows 路径，即 C:\myshareddir）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:18:15.547

你可以简单地使用[`GetDirectories`](http://msdn.microsoft.com/en-us/library/c1sez4sc%28v=vs.100%29.aspx). 例如：

```
var folders = Directory.GetDirectories(@"\\server\share"); 
```

要获取所有目录（即包括子目录），请使用以下命令：

```
var folders = Directory.GetDirectories(@"\\server\share", "*", SearchOption.AllDirectories)); 
```

# javascript - 为什么这个使用原型的 javascript 代码可以工作？

> ID：14340549
> 
> 赞同：0
> 
> 时间：2013-01-15T15:03:53.437
> 
> 标签：javascript, prototype

我在下面有这个javascript代码：

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>

        <script>
            function Person(first, last) {
                this.first = first;
                this.last  = last;
            }

           Person.prototype.toString = function() { 
                return this.first + this.last;
           }
            var person = new Person("John", "Dough");

            alert(person); // same result since alert calls toString()  

        </script>
    </head>
    <body>
    </body>
</html> 
```

问题是为什么`alert(person)`显示“JohnDough”？对我来说，`alert(person)` 不应该显示任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T15:06:39.670

使用 时`alert`，该方法会隐式尝试`toString`在对象上调用 a 。在您的情况下，`toString`已定义并在显式调用`toString`. 正如@FelixKling 所指出的，如果您没有定义`toString`，`alert`就会使用`toString`an 的本机方法并返回“[object Object]”。`Object`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:07:02.463

这是因为该对象有一个 toString() 方法。alert() 需要一个字符串，如果对象存在则使用此方法，否则将使用它自己的内置方法。由于这里的方法返回名字和姓氏，这就是您在 alert() 对话框中得到的。

# android - Android 上 iFrame 和 jQueryMobile 的问题

> ID：14340551
> 
> 赞同：-1
> 
> 时间：2013-01-15T15:03:54.907
> 
> 标签：android, url, jquery-mobile, iframe

我的英语不太好，但我会尽力解释我的问题。

首先到我的页面：我在我的页面上加载了一个包含公式的 iFrame。为了让使用移动设备的用户可以使用它，我加载了 jQuery 1.8.2。和 jQueryMobile 1.2.0。

这工作正常，但在 Android 2.x 上，系统浏览器将 iFrame 的 URL 加载到地址栏。因此，用户在使用地址栏中的 url 时无法正确刷新页面 - 所以它只加载 iFrame

浏览器的刷新按钮可以解决这个问题并刷新正确的内容。

那问题只出现在 Android 2.x 设备上。在较新的版本或 iOS 上，iFrame 工作正常。

我希望有人能理解我的问题并能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:21:42.300

解决方案是在加载 jQueryMobile 之前使用此脚本在 iFrame 中为 jQuery-Mobile 禁用 AJAX：

```
$(document).live("mobileinit", function(){
    $.mobile.ajaxLinksEnabled = false;
    $.mobile.ajaxFormsEnabled = false;
    $.mobile.ajaxEnabled = false;
}); 
```

这不适用于新版本 1.9.2

# c++ - 为非静态引用成员类编写 `operator=`

> ID：14340552
> 
> 赞同：0
> 
> 时间：2013-01-15T15:03:55.543
> 
> 标签：c++, inheritance, reference, operator-keyword, copy-constructor

```
#include <iostream>

class Bar
{
    protected:

public:
        int & x;
        Bar(int & new_x)
        :x(new_x)
        {}
        Bar & operator = (const Bar toCopy)
        {
            x = toCopy.x;
            return *this;
        }
};

int main()
{
    int x1(1);
    int x2(2);

    Bar bar = Bar(x1);
    std::cout << bar.x << std::endl;

    bar = Bar(x2);
    std::cout << bar.x << std::endl;

    bar.x = 5;
    std::cout << bar.x << std::endl;

    std::cout << x1 << std::endl;
    std::cout << x2 << std::endl;

} 
```

输出是：

```
1
2
5
5
2 
```

我要做的是**复制** `x`并将其保存在 object`bar`中。

输出向我表明，赋值运算符在**复制**和获取新对象的值方面都没有发挥作用。我已经关注[了这个链接](http://www.geeksforgeeks.org/default-assignment-operator-and-references/)。

更改`x`为值而不是引用是不可能的，因为在实际程序`x`中是一个抽象类。

请尽可能避免使用堆分配。

**编辑**： 1\. 我意识到我刚刚屠杀了 C++ 语言。我想向所有会说“C++ian”的计算机道歉。我的动机是在堆栈上分配一个成员抽象变量。据我了解，它不能在堆栈上完成，因为派生类的大小在编译时是未知的。2\. 好吧...我是一个完全的n00b...（没有sh*t，Sherlock！）。“有效的 C++ 编程”@rhalbersma 是必须的。它包含必需品，但您不会在任何地方找到它们（复制构造，复制初始化程序），......无论如何都在一个地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:05:27.797

`Bar bar = Bar(x1);`不是赋值，而是*复制初始化*。它调用复制构造函数，而不是复制赋值运算符。

但问题是您不了解引用 - 该成员`Bar::x`只是另一个变量的别名。给它分配一些东西也会修改原来的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T15:55:08.437

引用可能会令人困惑。`const`指针也可以。我将尝试通过同时谈论他们两个来澄清事情。我能说什么，我是个乐观主义者。

首先，`const`指针。

我们将从一个名为 的类开始`Foo`。我们可以有一个指向这个类的指针——一个`Foo*`. 我们可以有一个指向`const`此类实例的指针——a `Foo const*`。我们可以有一个`const`指向`const`这个类的非实例的指针——a `Foo*const`。

A`Foo const*`是一个指针，您*可以*更改为无法更改的数据。

A`Foo*const`是您无法更改的指针，指向您可以更改的*数据*。

我假设你明白了。毕竟，我是一个乐观主义者。接下来，让我们看看参考资料。

虽然引用确实是别名，但有时在事物具有其他类型的具体实现的世界中考虑它们会有所帮助。

A`Foo&`类似于`Foo*const`- 一个不可更改的“指针”，指向`Foo`您可以更改的实例。所以`Foo`你所说的总是同一个，但你可以改变它的状态。

现在，它不止于此。有一些语法糖。当您创建对另一个变量的引用时，它会`&`自动执行 - 所以当您执行 a 时`Foo& f = a;`，这类似于`Foo*const f = &a;`.

其次，当您使用 时`.`，它的作用与`->`指针情况相同。（对于（大多数？）其他运营商也是如此）

第三，当你进行赋值时，它显然不能改变指针的值——因为它是`const`——而是改变了指向的东西的值。`Foo& f = a; a = b;`的等价物也是如此`Foo*const f = &a; *f = b;`。

当*您*使用`operator=`. 但是当你初始化它时，它不会使用`operator=`，即使你有一个`=`令牌。

初始化通常与赋值不同，在初始化和赋值中`&`引用和`*`指针所发生的语义是非常不同的。

`Foo& f = a; f = b;`做两件完全不同的事情。引用的初始化会初始化“`const`指针”部分——分配给引用会修改*指向*的事物。

我对初始化和赋值如何与引用的不同含义的个人名称是“引用语义”，而不是“指针语义”，其中初始化和赋值都会改变所指向的东西。在“引用语义”中，初始化选择所指向的事物，赋值改变所指向事物的状态。

这非常令人困惑，我希望我能以不同的方式帮助它混淆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T16:08:30.437

内部与`x`中称为“x1”的*变量相同*。 这就是引用的作用——它们接受一个变量并给它另一个名称，您可以使用它来引用它。 无论您以这个新名称对该变量执行什么操作，都与使用任何其他名称执行此操作相同。`bar`*`main`* 

 *首先，之后

```
Bar bar = Bar(x1); 
```

（这是复制初始化，而不是赋值）
“bar.x”指的是与右侧匿名对象中的“x”相同的变量，而后者又是 main 中“x1”的不同名称。

在此之后，名称“bar.x”指的是与名称“x1”相同的变量。

线

```
bar = Bar(x2); 
```

将匿名对象的 的值（即 2）（`x`与 相同`x2`的变量）分配给内部称为“x”的变量`bar`，但在 中其名称为“x1” `main`。

线

```
bar.x = 5; 
```

然后将值 5 分配给名为“bar.x”的变量，该变量再次与 main 中的“x1”相同。

你不能让它引用不同的变量。
如果你想要一些可以引用不同变量的东西，你必须使用指针。*

# mysql - 使用 MySQL 在字符串中查找语言（做子字符串？）

> ID：14340554
> 
> 赞同：1
> 
> 时间：2013-01-15T15:04:01.347
> 
> 标签：mysql, sql, select, substring

我有一个表，其中 s_name 值如下所示：

```
'en_UK'
'en_US'
'de_CH'
'de_AT' 
```

我想获得所有不同的语言，没有国家部分。因此，例如，如果我只有示例中的那些，我需要得到：

```
en
de 
```

这样做的最佳方法是什么？

我现在有这个：

```
SELECT DISTINCT SUBSTRING(name,1,2) 
FROM my_languages 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:11:09.353

尝试这个：

```
SELECT DISTINCT SUBSTRING_INDEX(name, '_', 1) langName 
FROM my_languages 
```

**或者**

```
SELECT SUBSTRING_INDEX(name, '_', 1) langName 
FROM my_languages 
GROUP BY langName 
```

检查此链接[**MySQL STRING 函数**](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_substring-index)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:15:40.643

这是一个简单的方法：

```
select distinct left(s_name, 2)
from t 
```

这假设语言名称是左边的两个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:21:30.370

这将适用于 Oracle 以及 MySql 我认为：

```
SELECT SUBSTR('en_UK',INSTR('en_UK','_')+1) country FROM dual
/ 
```

# javascript - AngularJS：在每次按键时使用动态 ng 模型模糊更新输入

> ID：14340555
> 
> 赞同：10
> 
> 时间：2013-01-15T15:04:13.233
> 
> 标签：javascript, forms, angularjs

jsFiddle 演示问题：http: [//jsfiddle.net/yoxigen/xxTJc/](http://jsfiddle.net/yoxigen/xxTJc/)

我正在构建一个小表单来编辑对象的所有属性。为此，我有一个用于属性的中继器。每个属性都有其输入：

```
<ul ng-controller="myController">
   <li ng-repeat="(property, value) in obj">
       <input ng-model="obj[property]"/><span>{{value}}</span>
   </li>
</ul> 
```

每次在输入中按下一个键时，它旁边的值都会正确更新，但输入会失去焦点。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T02:40:35.243

> 我希望有一种方法可以推迟重新生成，直到我完成编辑。

你也许可以做到这一点。只需制作一个自定义指令来消除 AngularJS 事件并改为收听“更改”。以下是该自定义指令的示例：

```
YourModule.directive('updateModelOnBlur', function() {
  return {
    restrict: 'A',
    require: 'ngModel',
    link: function(scope, elm, attr, ngModelCtrl)
    {
      if(attr.type === 'radio' || attr.type === 'checkbox')
      {
        return;
      }

      // Update model on blur only
      elm.unbind('input').unbind('keydown').unbind('change');
      var updateModel = function()
      {
        scope.$apply(function()
        {
          ngModelCtrl.$setViewValue(elm.val());
        });
      };
      elm.bind('blur', updateModel);

      // Not a textarea
      if(elm[0].nodeName.toLowerCase() !== 'textarea')
      {
        // Update model on ENTER
        elm.bind('keydown', function(e)
        {
          e.which == 13 && updateModel();
        });
      }
    }
  };
}); 
```

然后根据您的输入：

```
<input type="text" ng-model="foo" update-model-on-blur /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T15:27:28.277

从[谷歌论坛](https://groups.google.com/forum/#!msg/angular/eB19TlFHFVE/Rlh--XImXeYJ)：

> 问题在于，随着模型对象的每次更改，ng-repeat 都会重新生成整个数组，从而使您的输入框变得模糊。您需要做的是将字符串包装在对象中

# hover - 无法悬停在 fancybox 2 的新 div 上

> ID：14340558
> 
> 赞同：0
> 
> 时间：2013-01-15T15:04:19.927
> 
> 标签：hover, fancybox

我已经通过这些代码使它工作了一个附加标题（一个新的`div`内部`fancybox`）：

```
beforeShow: function(){
this.title=$(this.element).data('caption');
this.title2="<div class='photo_exif'>"+$(this.element).data('exif')+"</div>";
$(this.title2)
.bind("contextmenu", function (e) {
return false; /* Disables right click */
})
.prependTo( $.fancybox.inner );
} 
```

html是：

```
<a href='PhotoURL' class='fancybox' data-fancybox-group='gallery' data-caption='PhotoTitle' data-exif='photoTitle2'>pic</a> 
```

现在我希望这个`div`（`div.photo_exif`）`hover`显示或隐藏，所以我添加了这些代码：

```
afterShow:function() {
$("#fancybox-wrap").hover(function() {
$(".photo_exif").show();
}, function() {
$(".photo_exif").hide();
});
} 
```

但它不起作用。`div`总是在`show`fancybox上。我的CSS是：

```
.photo_exif {
position: absolute;
bottom: 0;
left: 0;
color: #fff;
width:100%;
height:30px;
background: #000;
background: rgba(0, 0, 0, .8);
} 
```

我的整个fancybox代码（带有ie6破解）是：

```
$('.fancybox').fancybox({
fitToView: false,
mouseWheel: false,
beforeShow: function(){
this.title=$(this.element).data('caption');
this.title2="<div class='photo_exif'>"+$(this.element).data('exif')+"</div>";
$(this.title2)
.bind("contextmenu", function (e) {
return false; /* Disables right click */
})
.prependTo( $.fancybox.inner );
},
afterShow: function(){
if (jQuery.browser.msie && parseInt(jQuery.browser.version, 10) <= 6) {
$("div#fancybox-buttons").css("top", $("html").scrollTop());
$(window).scroll(function () {
$("div#fancybox-buttons").css("top", $("html").scrollTop());
});
}
$("#fancybox-wrap").hover(function() {
$(".photo_exif").show();
}, function() {
$(".photo_exif").hide();
});
}  
}); 
```

有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:45:31.397

这很容易。这行代码：

```
$("#fancybox-wrap").hover(function() { 
```

... 应该 ：

```
$(".fancybox-wrap").hover(function() { 
```

fancybox 选择器是一个*类*而不是一个*ID*

# facebook - 如果 facebook 网站不使用 ssl，app_data 不会加载值

> ID：14340562
> 
> 赞同：1
> 
> 时间：2013-01-15T15:04:54.493
> 
> 标签：facebook

我有一个 facebook 共享链接，如果在没有 SSL 的情况下加载 facebook 网站，该链接将不起作用

如果 facebook 在没有 ssl (http://www.facebook.com) 的情况下加载，则共享链接会加载 app_data facebook 签名请求对象中的值

我正在使用**app_data** app_data={"vId":"108483"} 使用 app_data 中的值将用户重定向到指定页面

例如：[https](https://www.facebook.com/pages/SDA-20/111111?sk=app_461321240572194&app_data=) ://www.facebook.com/pages/SDA-20/111111?sk=app_461321240572194&app_data= {"vId":"108483"}

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:20:29.890

终于找到了解决这个问题的办法。

问题是我们的 Web 服务器被配置为将所有 http 请求重定向到 https，而在此期间它给出了 HTTP 错误 301 状态。

管理员对此进行了更改，现在应用程序可以正常使用 app_data 值。

# c - 在 C 中放置新的等效项

> ID：14340563
> 
> 赞同：4
> 
> 时间：2013-01-15T15:05:02.927
> 
> 标签：c, memory-management

C 中是否存在与 C++ 的位置新的等效项？我的意思是，可以在 C 中的指定位置构造对象吗？可以`realloc()`用于那个吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T15:06:25.980

放置 new 只是跳过分配并在预分配的内存中构造一个对象。由于 C 缺少构造函数，因此不需要放置 new。我想等价的将是指针类型转换，因为一旦有了指针，您就可以像存在对象一样行事。

从公共内存池中雕刻不同类型的对象的示例：

```
char *pool = (char *) malloc( 1000 );
char *pen = pool;

foo *obj1 = (foo *) pen;
pen += sizeof (foo);

bar *obj2 = (bar *) pen;
pen += sizeof (bar);

/* etc */ 
```

当然，在执行此操作时，您需要负责将正确的指针传递给`free`，并注意对齐要求——就像 C++ 中的放置 new 一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T15:06:58.013

由于 C 没有类似构造函数的东西，您可以简单地获取地址并将其转换为指向您要使用的类型的指针。当然，您需要确保正确对齐，否则可能会失败（但在 C++ 中放置 new 也是如此）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T15:06:23.170

C 中没有“新位置”之类的东西。另一方面，您可以声明一个指针并使其指向内存中的任何内容：

```
char *pointer = 0x12345678; 
```

上面的指针现在指向地址`0x12345678`。

这通常用于嵌入式系统，其中某些设备位于内存中的某些位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T15:42:24.807

在 C 中以可移植方式实现此目的的典型方法是：

```
#define X (*(int*)0x12345678u) // where 0x12345678 is a specific address 

// you can now use the int 'X' as any other type of variable:

X = 5;

if (X == SOMETHING) 
```

这假设地址 0x12345678 包含有效内存， int 将适合，您可以直接访问。具有虚拟内存的系统可能不允许直接访问。

在嵌入式系统中，像上面这样的声明对于定义硬件寄存器是很常见的。

# php - 使用 glob() 删除目录中的文件

> ID：14340564
> 
> 赞同：0
> 
> 时间：2013-01-15T15:05:05.587
> 
> 标签：php

我正在尝试使用 glob() 和 foreach() 清空目录的内容

```
$files = glob('/upload/'.$id.'/temp/*.JPEG'); 
    foreach($file as $files){
    unlink($file);} 
```

但我只是不断收到“为 foreach() 提供的参数无效”

这只是语法错误还是我不能在 foreach 循环中使用 unlink() ？

另外，出于好奇，这段代码会找到目录中的所有文件吗？

```
$files = glob('/upload/'.$id.'/temp/*.*'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:12:33.160

`Invalid argument supplied for foreach()`表示您传递的参数不是数组。在这里你通过了`$file`。`$file`不是数组。事实上它还不存在。

foreach 的格式是，

```
foreach (array_expression as $value)
    statement
foreach (array_expression as $key => $value)
    statement 
```

从您的代码中，正确的解决方案是

```
foreach ($files as $file) 
```

# c# - C#：DataGridView 只显示一行

> ID：14340567
> 
> 赞同：0
> 
> 时间：2013-01-15T15:05:12.313
> 
> 标签：c#, mysql, visual-studio, datagridview

我对 C# 中的 datagridview 有疑问。我通过 mysql 数据库的查询获取数据。但是由于某种原因，gridview 中只显示了结果的第一行。我使用以下代码来执行此操作：

```
MySqlCommand command = new MySqlCommand(query, Globals.Connection);
        reader = command.ExecuteReader();
        while (reader.Read())
        {
            object[] dataset = new object[7];
            dataset[0] = reader["sto_name"];
            dataset[1] = reader["esss"];
            dataset[2] = reader["onl_name"];
            dataset[3] = reader["rpc_id"];
            if (reader["datum_aufstellung"].ToString() != "0")
            {
                dataset[4] = getDate(reader["datum_aufstellung"]);
            }
            else
            { 
                dataset[4] = "Kein Datum gesetzt";
            }
            if (reader["datum_abbau"].ToString() != "0")
            {
                dataset[5] = getDate(reader["datum_abbau"]);
            }
            else
            {
                dataset[5] = "Kein Datum gesetzt";
            }
            dataset[6] = reader["id"];
            dataGridView1.Rows.Add(dataset);
        } 
```

它起作用了，之前的几行代码。^^ 你有什么想法，问题是什么？

**更新：** while 循环的内容只执行一次。在我在这里问我的问题之前，我也想知道这个事实。但是，如果我在 MySQL 客户端中执行查询，它会返回多于一个的行。

**更新2：** 我注意到，虽然注释了while循环的全部内容，但循环的执行时间与查询结果中的行完全相同。有任何想法吗？

**更新3：** 似乎之后的一切

```
dataGridView1.Rows.Add(dataset); 
```

不执行。不仅在循环中，而且在整个函数中。但为什么？

**问题已解决：** 此处发布的代码没有任何问题。当输入 dgv 中的一行时，我在其余代码中有一个事件，它执行了一些操作。我想当这种情况发生时，循环中断了。删除该事件后，dgv 已正确填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:10:12.987

您应该使用 a`DataAdapter`并使用它来填充 DataTable。创建一个获取数据的方法，如下所示：-

```
public DataTable GetDataTable()
        {
            DataTable dt = new DataTable();

            using (SqlConnection con = new SqlConnection (@"YourCOnnectionString"))
            {
                using (SqlCommand cmd = new SqlCommand (query, con))
                {
                    var adaptor = new SqlDataAdapter ();
                    adaptor.SelectCommand = cmd;

                    con.Open();
                    adaptor.Fill(dt);

                    return dt;

                }
            }
        } 
```

然后你可以用你的 DataGrid 引用它：-

```
DataTable Result = GetDataTable();

DatagridView1.DataSource = Result; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:46:38.267

检查 Grid 上的 RowCount 属性。如果将其增加到所需的行数，它可能会设置为 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:10:43.817

还有另一种简单的方法。您可以使用 DataTable 而不是 dataset 并将 dataGridView 的 DataSource 设置为该 DataTable。它将解决您的问题，并且使用它您可以轻松设置列标题。

# c# - 远程复制本地文件，执行并带回输出

> ID：14340569
> 
> 赞同：2
> 
> 时间：2013-01-15T15:05:15.283
> 
> 标签：c#, remoting, powershell-remoting

有人可以帮我解决这个问题吗？

我在本地有一组可执行文件，需要远程运行并从它们返回输出。我有远程机器登录凭据。您能否告诉我是否有办法在 C++、C#/powershell/WMI 等中以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T16:23:27.623

你应该看看使用 Both PSTools 结合 c# Process Class。PSTools 允许您启动进程远程机器。

一个例子 ：-

** 编辑 **

在远程机器上运行批处理文件的示例：-

```
// Create a New Process Object.
Process p = new Process();

//Assign the file you wish to execute.
p.StartInfo.FileName = "C:\\Utilities\\psexec.exe";

// We don't want a window creating for this task
p.StartInfo.CreateNoWindow = true;

// We don't want to use the operating system shell.                           
p.StartInfo.UseShellExecute = false;

// Here we set the argument to fire on the remote machine that will launch the Batc File.
p.StartInfo.Arguments = "\\\\" + RemoteMachineName + " C:\\YourBatFile.bat";

// Now to Start the Process.
p.Start();

// If you want to wait until the Process before moving on
p.WaitForExit(); 
```

这应该为您提供继续其他任务的想法。它不仅适用于打开文件。您可以使用它来安装/卸载 MsiInstaller 产品，就像使用 WMI 一样。如果要重定向输出，只需将其存储在字符串对象中。

# iphone - 在旧版本中视图是纵向的

> ID：14340575
> 
> 赞同：0
> 
> 时间：2013-01-15T15:05:28.537
> 
> 标签：iphone, ios

我在这里遇到问题，无法回答为什么我的应用程序会这样。我使用 XCode 4.5+ 和 iOS6 制作了应用程序，并将我的应用程序设置为在横向模式下工作，直到我尝试在以前的版本（如 iOS 5.1 模拟器或以下所有视图都处于纵向模式下）运行它之前它工作正常并且运行良好：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:40:37.100

您可以尝试在控制器中定义此方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
  return ( interfaceOrientation == UIInterfaceOrientationPortrait)ç
} 
```

这与 iOS6 的作用相同`shouldAutorotate`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:41:04.403

正如 tkanzakic 所建议的那样，`- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOr‌​ientation`非常感谢低版本解决了我的问题:)

# android - android - 长按从 ListView 中删除项目

> ID：14340579
> 
> 赞同：11
> 
> 时间：2013-01-15T15:05:45.323
> 
> 标签：android, android-listview, android-arrayadapter

我在尝试通过长按从列表视图中删除项目时遇到了一些麻烦。下面是代码：

```
public class MListViewActivity extends ListActivity {

private ListView lv;
private String[] some_data = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    some_data = getResources().getStringArray(R.array.mdata);

    // Bind resources Array to ListAdapter
    ArrayAdapter<String> myAdapter = new ArrayAdapter<String>(this,
            R.layout.list_item, R.id.label, some_data);
    this.setListAdapter(myAdapter);

    lv = getListView();
    lv.setDividerHeight(3);

    lv.setOnItemLongClickListener(new OnItemLongClickListener() {

        @Override
        public boolean onItemLongClick(AdapterView<?> parent, View view,
                int arg2, long arg3) {

            // Can't manage to remove an item here

            return false;
        }
    });
} 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-15T15:07:49.733

你不应该使用`Arrays`，你应该使用`ArrayList`来删除和添加项目到`Listview`.

声明数组大小后，您可以修改特定索引中的数据，但不能删除或添加项目。

所以取一个 ArrayList，当你长按 ListView 项时，只需调用 Arraylist 的 remove 方法并通知数据集发生了变化。

例子：

```
ArrayList<String> al = new ArrayList<String>(); 
```

在您的 longclick 中编写以下代码以删除项目。

```
al.remove(arg2);//where arg2 is position of item you click
myAdapter.notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-15T15:10:08.390

尝试

```
lv.setOnItemLongClickListener(new OnItemLongClickListener() {

    @Override
    public boolean onItemLongClick(AdapterView<?> parent, View view,
            int position, long arg3) {

              myAdapter.remove(some_data[position]);
              myAdapter.notifyDataSetChanged();

        return false;
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-08T20:43:51.160

```
itemAdapter = new ArrayAdapter<String>(
        view.getContext(),
        androidx.appcompat.R.layout.support_simple_spinner_dropdown_item,
        itemViewModel.getItems().getValue().stream().map(TaskCard::getTitle).collect(Collectors.toList())
);
ListView listview = view.findViewById(R.id.item_listview);
listview.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
    @Override
    public boolean onItemLongClick(AdapterView<?> parent, View view, int i, long l) {
        itemAdapter.remove(itemAdapter.getItem(i));
        return true;
    }
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-23T05:59:06.233

我在使用这种方法时遇到了问题。我用这个解决了它。

```
 listStat.remove(listStat.get(arg2));
            lvStat.requestLayout();
            adapterStat.notifyDataSetChanged(); 
```

我认为这对其他人会有所帮助。

# asp.net - asp.net 在一种文化中合并更多语言

> ID：14340581
> 
> 赞同：0
> 
> 时间：2013-01-15T15:05:51.880
> 
> 标签：asp.net, culture

我正在使用 asp.net 集成语言系统来制作我的网站多语言。

我`Culture="auto:it-IT" UICulture="auto"`在每个页面中都使用意大利语作为主要语言。现在我希望我的网站也以英文显示。我创建了另一个包含所有英文翻译的资源文件，并将其命名为**mypage.aspx.en-US.resx**。

从美国访问我的页面时，我的网站会使用正确的翻译，但如果我从英国、加拿大或任何其他讲英语的地方访问它，它会使用默认语言。我不想为每种语言创建一个新的 .resx 文件（仅英语有 17 种变体）并且不想使用 en-US 作为默认语言，因为我的网站必须有很多语言，所以我会最终对其他语言也有同样的问题。

我如何获得所有 en-US en-GB en-CA（以及 14 多个 en-XX）以在单个资源文件中编写标准的“en”语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:52:55.290

找到解决方案！只需创建一个名为 mypage.aspx.en.resx 的资源文件即可涵盖所有英文变体：D

# c++ - 静态链接 g++ 时出错

> ID：14340583
> 
> 赞同：2
> 
> 时间：2013-01-15T15:05:53.400
> 
> 标签：c++, mysql, linux, gcc, static-linking

我有一个问题，我想用 mysql 连接器的静态链接来编译我的应用程序。

我的命令行：

> g++ -o newserver stdafx.cpp ... -lboost_system -lboost_thread -lpthread -lmysqlcppconn -static /usr/lib/libmysqlcppconn-static.a -std=c++0x

但我有错误：

```
/usr/bin/ld: cannot find -lmysqlcppconn
/tmp/ccxpOfdZ.o: In function `IsEqualsDns(unsigned long, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)':
Server.cpp:(.text+0x356e): warning: Using 'gethostbyname' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
collect2: ld returned 1 exit status 
```

我怎样才能解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:49:12.320

图书馆`libsqlcppconn.a`或`libsqucppconn.so` （静态或动态）在哪里？编译器正在寻找它，但没有找到。

据推测，这是与 `/usr/lib/mysqlcppconn-static.a`. 如果是这样，只需删除 `-lmysqlcppconn`. 或者只是使用`-lmysqlcppconn-static`（没有空格），然后忘记`/usr/lib/libmysqlconn-static.a`. 使用这样的名称，不应该有对应的`.so`.，这意味着 g++ 将静态链接它，即使没有 `-static`. 您只需要`-static`如果在同一目录中同时存在 a`libmysqlconn-static.so`和 a 。`libmysqlconn-static.a`

关于第二个错误（这只是一个警告，但如果您尝试在其他机器上运行链接的程序，甚至在您的机器升级之后会导致问题）：如果您`-static`在命令行中的任何位置使用（如您目前可以），然后它适用于之后链接的所有文件。包括您不想静态链接的系统*库*。我的猜测是`-static`没有必要（见上文）；如果是，请将其放在要静态链接的库之前，并在`-dynamic`之后立即放置（以便任何后续库，包括系统库，都将被动态链接）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:09:34.807

你可以试试`g++ -static YOUR ARGUMENTS`。

如果您来自 Windows 平台，链接到 Boost 可能会带来一些惊喜。典型的 Boost 安装（例如 after `./b2 install`）将创建动态库和静态库并将它们放在同一目录中。通常，这两种库形式仅在扩展名（.so 或 .a）上有所不同。

Windows 支持**自动链接**，这基本上意味着库文件在其前几个字节中包含一些标志，指示它们是用于动态链接还是用于静态链接。在 Linux 平台上，情况并非如此，并且链接器会混淆要加载哪个文件（因为您没有提供库名称的扩展名）。因此，您需要告诉链接器您想要哪种形式的链接。

# javascript - Nivo Slider 有 javascript 错误

> ID：14340594
> 
> 赞同：0
> 
> 时间：2013-01-15T15:06:40.860
> 
> 标签：javascript, slider, nivo-slider

我正在建立一个使用 Nivo Slider 的网站。起初，它运作良好。但是昨天，当我再次尝试时，它突然停止移动。在我发现这个问题之前，我还没有改变任何东西。我查看了控制台，有一个 javascript 错误，上面写着：

未捕获的类型错误：对象 [object Object] 没有“live”方法

当我尝试查看 jquery.nivo.slider.js 时，错误出现在 $('a.nivo-prevNav', slider) 上，如下所示：

```
$('a.nivo-prevNav', slider).live('click', function(){
    // function's content
}); 
```

使用谷歌的检查元素功能，我搜索页面并在那里找到。

那有什么问题？为什么它突然停止移动？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:23:08.457

Nivo Slider 需要 jQuery 才能工作。在您的网站上，您像这样引用 jQuery

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

这是非常危险的，因为最新版本会不断变化。从 jQuery 文档中可以看出

[http://api.jquery.com/live/](http://api.jquery.com/live/)

自 jQuery 1.7 起，live 函数已被弃用。查看未缩小的 jQuery 源代码

[http://code.jquery.com/jquery-latest.js](http://code.jquery.com/jquery-latest.js)

似乎该功能不再存在，这就是您收到错误的原因。

解决方案：将 jQuery 与特定版本绑定 - 可能您可以从 Nivo Slider 文档中找到您需要的版本。一些旧版本的 jQuery 可以在这里找到：http: [//jquery.com/download/](http://jquery.com/download/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T15:23:11.957

在您使用的 jQuery 版本 1.9 中，该`live()`功能实际上已被弃用：[http ://api.jquery.com/live/](http://api.jquery.com/live/)

我猜你可能需要等待 Nivo 更新他们的源来支持最新的 jQuery，你可以下到 jQuery 1.7，或者自己修改 Nivo 源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T16:24:55.073

在 nivo 滑块的 js 文件中用 .on() 替换所有 .live() 对我有用。我的 jquery 是 1.9.1 版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T05:48:24.147

现在有一个新版本的 Nivo Slider (3.2)，它使用 .on 而不是 .live。

或者使用旧版本的 jQuery（1.7.1 为我们工作）

# android - Android Jsoup 在样式标签中更改字体系列

> ID：14340596
> 
> 赞同：0
> 
> 时间：2013-01-15T15:06:46.807
> 
> 标签：android, jsoup

将 html 加载到 WebView 后，我需要将字体系列更改为自定义字体系列。基本上我需要得到这个：

```
 <style>
            @font-face {
            font-family: 'MyFont';
            src: url('file:///android_asset/Custom-Font.otf')
            }
            body { font-family: 'MyFont', serif; font-size: 17px; color: #000; }
            a { color: #000; }
 </style> 
```

从

```
<style>
            body { font-family: 'Helvetica', serif; font-size: 17px; color: #000; }
            a { color: #000; }
</style> 
```

Html 是动态加载的，而不是从资产中加载的。我使用 Jsoup，但目前无法获得这个 font-family 参数......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:31:26.040

JSoup 不会为您解析 CSS。它最终`DataNode`挂在`style`元素上。从那里开始，您就可以自己进行解析了。如果您有一个简单的搜索和替换，您可以使用正则表达式来完成这项工作。对于复杂的情况，您可以查看 [CSS Parser][1]。您的情况看起来相对简单，但仅给出一个示例，很难说出您想要保留哪些元素。这是基本思想的草图，您可能需要修改以完全适合您的情况。基本思想是`DataNode`从`Style`标签中获取并使用正则表达式来搜索和替换字段。

```
final String newFontInfo = "@font-face { \n"
        + "font-family: 'MyFont';\n"
        + "src: url('file:///android_asset/Custom-Font.otf')\n" + "}\n";
Elements styles = doc.select("style");
for (Element style : styles) {
    for (DataNode data : style.dataNodes()) {
        String dataTxt = data.getWholeData();
        if (dataTxt.contains("font-family")) {
             final String newData = dataTxt.replaceAll("font-family:\\s*'[^']*'","font-family: 'MyFont'");
             data.setWholeData(newFontInfo + newData);
        }
     }
 } 
```

# devexpress - DevExpress XtraGrid - 当 column1 更改时更改/禁用 column2 中的单元格

> ID：14340598
> 
> 赞同：0
> 
> 时间：2013-01-15T15:06:53.657
> 
> 标签：devexpress, xtragrid

我在 XtraGrid 中有 2 列正在使用。当 Column1 的值发生变化时，我想执行一些逻辑并可能更改 Column2 的值并禁用 Column2。您可以在下面看到我的代码，但我有 3 个问题：

1.  我的 CustomRowCellEdit 函数似乎在后台不停地运行。
2.  Column2 上的 SetRowValue 似乎并没有真正发生，除非我点击远离该行；我需要在更改 Column1 后立即进行更改。
3.  如何在我的 IF 块内禁用？

我已将以下事件添加到网格中：

```
this._myGridView.CustomRowCellEdit += 
    new DevExpress.XtraGrid.Views.Grid.CustomRowCellEditEventHandler(
        this.myGridView_CustomRowCellEdit); 
```

这是事件：

```
private void myGridView_CustomRowCellEdit(object sender, CustomRowCellEditEventArgs e)
{
    if (e.Column.FieldName == "Column1" && e.RowHandle >= 0)
    {
        GridView gv = sender as GridView;
        string value1 = gv.GetRowCellValue(e.RowHandle, gv.Columns["Column1"]).ToString();

        if (value1 == "something")
        {
            gv.SetRowCellValue(e.RowHandle, gv.Columns["Column2"], someOtherValue);
            // I'd like to disable Column2 in this IF logic.
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:43:00.163

在 DevX 文档中，有一条关于 CustomRowCellEdit 事件的注释说

> 由于 XtraGrid 控件的基础结构，CustomRowCellEdit 事件频繁触发 - 每次刷新单元格时。因此，不要为您的 CustomRowCellEdit 事件处理程序实现复杂的逻辑......

鉴于您提出的要求，我的方法是使用 CellValueChanged 事件而不是 CustomRowCellEdit。然后你的处理程序可以说类似

```
private void myGridView_CellValueChanged(object sender, CellValueChangedEventArgs e) {
    if (e.Column.FieldName != "Column1") return;
    GridView gv = sender as GridView;
    if (e.Value == "something") {
        gv.SetRowCellValue(e.RowHandle, gv.Columns["Column2"], someOtherValue);
    }
} 
```

要使单个单元格在运行时不可编辑，请参阅 DevExpress 支持站点上的此主题。 [如何使用 Devxpress Grid Contorl 在运行时为行设置 readyonly](http://www.devexpress.com/Support/Center/Question/Details/Q413641)。本质上，您需要做的是处理网格视图的 ShowingEditor 事件，并使用 FocusedRowHandle 和 FocusedColumn 属性决定是否允许对当前单元格进行编辑。要禁用编辑，请将 CancelEventArgs 的 Cancel 属性设置为 true。

希望这可以帮助。

# smtp - 邮件服务器拒绝 asp.net 4.0 healthMonitoring 的 smtp 设置中的默认凭据

> ID：14340599
> 
> 赞同：0
> 
> 时间：2013-01-15T15:06:55.740
> 
> 标签：smtp, asp.net-4.0, health-monitoring

*当我在 web.config 文件中指定用户名和密码时，*我已成功设置运行状况监控，以将 ASP.NET 网页上的错误记录到 Windows 事件日志、SQL Server 数据库以及通过电子邮件 (Microsoft Exchange) 。但是，如果我从指定用户名和密码更改为`defaultCredentials="true"`在 web.config 中指定用户名和密码，当它尝试生成电子邮件时，我会在我的 Windows 事件日志中收到以下错误消息：

```
System.Web.HttpException (0x80004005): Unable to send out an e-mail to the SMTP
server. Please ensure that the server specified in the <smtpMail> section is
valid. ---> System.Net.Mail.SmtpException: Mailbox unavailable. The server
response was: 5.7.1 Client does not have permissions to send as this sender 
```

我在公司域上运行 Windows Vista。我的 Windows 登录名与我的 Microsoft Exchange 登录名相同。谁能提供一些关于为什么在 web.config 文件中明确指定我的登录凭据有效但使用`defaultCredentials="true"`无效的见解？是否有任何已知的解决方案，以便我可以通过 healthMonitoring 自动发送电子邮件，而无需将我的用户名和密码存储在 web.config 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:42:17.660

由于我为这个问题赢得了风滚草徽章，我怀疑答案对其他人是否有价值；但是知道以后我将不可避免地陷入同样的​​陷阱，我想我会发布我自己问题的答案......

在同一个域内发送邮件不需要认证；因此，我没有指定`defaultCredentials="true"`，而是删除了与身份验证相关的所有字段，并且电子邮件再次开始工作。

请注意，这只是部分解决方案。我现在只需要将电子邮件发送到同一域内的地址。如果没有身份验证，在此域之外发送电子邮件将无法工作，因此如果/当需要时，它将回到绘图板......

# javascript - 使用 LwIP 服务器流式传输数据

> ID：14340609
> 
> 赞同：2
> 
> 时间：2013-01-15T15:07:24.893
> 
> 标签：javascript, c, embedded, websocket, lwip

我有一个运行 LwIP 服务器（v1.2）的嵌入式系统，我需要能够将数据数组流式传输到客户端的 javascript 中吗？我正在考虑使用 chrome 和一些 HTML5 功能，所以有些人建议使用 websockets。有谁知道我需要从哪里开始使用 LwIP 框架？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:09:48.323

WebSockets 是一个相对简单的协议，因此您可以使用[协议规范](https://www.rfc-editor.org/rfc/rfc6455)并编写自己的服务器。由于 lwIP 提供了 bsd 套接字 API，您还可以搜索现有的开源 C 服务器。（例如，快速搜索会显示[此候选](http://warmcat.com/_wp/2010/11/01/libwebsockets-html5-websocket-server-library-in-c/)者。顺便说一句，请注意，此代码已获得 GPL 许可。只有在您了解项目中使用 GPL 代码的要求时，才应使用它。）

请注意，虽然 Chrome 对 websockets 的支持很好，但如果您以后决定使用其他浏览器（特别是允许使用旧版浏览器的用户），支持会更加补丁。有关详细信息，请参见[此处](http://caniuse.com/websockets)。如果对各种浏览器的支持对您很重要，您可能必须在客户端和服务器中包含代码，以便在 websocket 握手失败时回退到长轮询。

# javascript - bootstrap-combobox.js v1.0.0 用js改变值

> ID：14340610
> 
> 赞同：1
> 
> 时间：2013-01-15T15:07:29.170
> 
> 标签：javascript, twitter-bootstrap, bootstrap-typeahead

我正在使用这个组合框。但不能用js改变值。

```
 $("#teacher_relay_county_combo").val("Value....");
 $("#teacher_relay_county").val("3"); 
```

当我将其包含在我的 js 文件中时，以上都没有任何效果。如果我在 chrome 开发者工具控制台运行相同的命令，则值会更改。那么可能是什么原因呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:43:18.020

这个是在我设置值后调用的。

```
$("#teacher_relay_county").data('combobox').refresh(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T21:27:11.427

尝试：

```
$("#teacher_relay_county").combobox("refresh"); 
```

# mysql - MySQL where+group+order; 文件排序而不使用索引

> ID：14340611
> 
> 赞同：2
> 
> 时间：2013-01-15T15:07:32.040
> 
> 标签：mysql, query-optimization

我想知道为什么以下查询在我解释它时不使用索引。

```
EXPLAIN SELECT 
  `t`.`id`, `t`.`omschrijving_kort`, `t`.`oplos_tijd_issue` 
FROM `incident` `t` 
LEFT OUTER JOIN `plaats` `plaatsen` ON (`plaatsen`.`incident_id`=`t`.`id`)  
WHERE 
  t.type='2' AND t.status='1'
GROUP BY t.id 
ORDER BY `t`.`oplos_tijd_issue` 
```

我的桌子：

```
CREATE TABLE `incident` (
  `id` int(10) unsigned NOT NULL auto_increment,
  `omschrijving_kort` varchar(40) NOT NULL,
  `sla_type` tinyint(1) unsigned NOT NULL,
  `prioriteit` tinyint(1) unsigned NOT NULL,
  `laatste_wijziging` timestamp NULL default NULL,
  `aanmaak_tijd` timestamp NULL default NULL,
  `start_tijd_issue` timestamp NULL default NULL,
  `oplos_tijd_issue` timestamp NULL default NULL,
  `impact` int(11) unsigned default NULL,
  `template_id` int(10) unsigned default NULL,
  `type` tinyint(1) unsigned NOT NULL default '1',
  `subtype` tinyint(1) NOT NULL default '1',
  `status` tinyint(1) unsigned NOT NULL default '1',
  `regio_id` smallint(5) unsigned default NULL,
  PRIMARY KEY  (`id`),
  KEY `FK_template` (`template_id`),
  KEY `start_tijd_issue` (`start_tijd_issue`),
  KEY `id_startTijdIssue` (`id`,`start_tijd_issue`),
  KEY `id_oplosTijdIssue` (`id`,`oplos_tijd_issue`),
  KEY `id_subtype_status` (`id`,`subtype`,`status`),
  KEY `id` (`id`,`afsluiting_tijd`),
  KEY `id_2` (`id`,`oplos_tijd_issue`,`status`),
  KEY `FK_regios` (`regio_id`),
  KEY `id_3` (`id`,`status`),
  KEY `id_4` (`id`,`start_tijd_issue`,`oplos_tijd_issue`,`type`,`status`),
  KEY `id_5` (`id`,`prioriteit`),
  KEY `id_6` (`id`,`type`,`status`,`regio_id`),
  KEY `id_7` (`id`,`oplos_tijd_issue`,`type`,`status`,`regio_id`),
  KEY `id_8` (`id`,`regio_id`),
  KEY `oplos_tijd_issue_2` (`oplos_tijd_issue`,`type`,`status`),
  KEY `id_9` (`oplos_tijd_issue`,`type`,`status`,`id`),
  KEY `id_10` (`id`,`type`,`status`),
  KEY `type` (`type`,`status`,`id`,`oplos_tijd_issue`),
  KEY `oplos_tijd_issue` (`type`,`status`,`oplos_tijd_issue`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

我已经尝试向我的表中添加索引.. 可能太多了！

从我查找的内容来看，一个索引`(type, status, oplos_tijd_issue)`应该就足够了吗？

`EXPLAIN`告诉我：

```
possible keys: type, oplos_tijd_issue  
key: type  
ref: const, const  
Extra: Using where; Using temporary; Using filesort 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:59:04.163

我怀疑问题是类型转换问题。这会混淆 MySQL 和索引。尝试这个：

```
EXPLAIN SELECT 
  `t`.`id`, `t`.`omschrijving_kort`, `t`.`oplos_tijd_issue` 
FROM `incident` `t` 
LEFT OUTER JOIN `plaats` `plaatsen` ON (`plaatsen`.`incident_id`=`t`.`id`)  
WHERE 
  t.type=2 AND t.status=1
GROUP BY t.id 
ORDER BY `t`.`oplos_tijd_issue` 
```

如果可以，请注意将数字类型与字符类型分开。

# android - 如何将xml布局和编码布局合并为一个布局

> ID：14340615
> 
> 赞同：0
> 
> 时间：2013-01-15T15:07:41.950
> 
> 标签：android, android-layout

我想将 java 代码布局和 xml 布局组合成一个布局。

我有显示音频流可视化器的 java 代码。而且我有 xml 布局，所以我想将这两种布局合并为一个，以在可视化器布局下方显示媒体控制按钮和图像。

Java 代码是

```
import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.audiofx.Visualizer;
import android.os.Bundle;
import android.view.Gravity;
import android.view.View;
import android.view.ViewGroup;
import android.widget.LinearLayout;
import android.widget.SeekBar;
import android.widget.TextView;

import java.io.IOException;

public class AudioFxDemoActivity extends Activity {

    //Here is your URL defined
String url = "http://vprbbc.streamguys.net/vprbbc24.mp3";

    //Constants for vizualizator - HEIGHT 50dip
private static final float VISUALIZER_HEIGHT_DIP = 50f;

    //Your MediaPlayer
MediaPlayer mp;

//Vizualization
private Visualizer mVisualizer;

    private LinearLayout mLinearLayout;
    private VisualizerView mVisualizerView;
    private TextView mStatusTextView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //Info textView
    mStatusTextView = new TextView(this);

    //Create new LinearLayout ( because main.xml is empty )
    mLinearLayout = new LinearLayout(this);
    mLinearLayout.setOrientation(LinearLayout.VERTICAL);
    mLinearLayout.addView(mStatusTextView);

    //set content view to new Layout that we create
    setContentView(mLinearLayout);

    //start media player - like normal
    mp = new MediaPlayer();
    mp.setAudioStreamType(AudioManager.STREAM_MUSIC);

    try {
        mp.setDataSource(url); // set data source our URL defined
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }       

    try {   //tell your player to go to prepare state
        mp.prepare(); 
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
            //Start your stream / player
    mp.start();

    //setup your Vizualizer - call method
    setupVisualizerFxAndUI();        

            //enable vizualizer
            mVisualizer.setEnabled(true);

            //Info text
    mStatusTextView.setText("Playing audio...");
}

    //Our method that sets Vizualizer
private void setupVisualizerFxAndUI() {
    // Create a VisualizerView (defined below), which will render the simplified audio
    // wave form to a Canvas.

    //You need to have something where to show Audio WAVE - in this case Canvas
    mVisualizerView = new VisualizerView(this);
    mVisualizerView.setLayoutParams(new ViewGroup.LayoutParams(
            ViewGroup.LayoutParams.FILL_PARENT,
            (int)(VISUALIZER_HEIGHT_DIP * getResources().getDisplayMetrics().density)));
    mLinearLayout.addView(mVisualizerView);

    // Create the Visualizer object and attach it to our media player.
    //YOU NEED android.permission.RECORD_AUDIO for that in AndroidManifest.xml
    mVisualizer = new Visualizer(mp.getAudioSessionId());
    mVisualizer.setCaptureSize(Visualizer.getCaptureSizeRange()[1]);
    mVisualizer.setDataCaptureListener(new Visualizer.OnDataCaptureListener() {
        public void onWaveFormDataCapture(Visualizer visualizer, byte[] bytes,
                int samplingRate) {
            mVisualizerView.updateVisualizer(bytes);
        }

        public void onFftDataCapture(Visualizer visualizer, byte[] bytes, int samplingRate) {}
    }, Visualizer.getMaxCaptureRate() / 2, true, false); 
}

@Override
protected void onPause() {
    super.onPause();

    if (isFinishing() && mp != null) {
        mVisualizer.release();
       // mEqualizer.release();
        mp.release();
        mp = null;
    }
}

/**
 * A simple class that draws waveform data received from a
 * {@link Visualizer.OnDataCaptureListener#onWaveFormDataCapture }
 */
class VisualizerView extends View {
    private byte[] mBytes;
    private float[] mPoints;
    private Rect mRect = new Rect();

    private Paint mForePaint = new Paint();

    public VisualizerView(Context context) {
        super(context);
        init();
    }

    private void init() {
        mBytes = null;

        mForePaint.setStrokeWidth(1f);
        mForePaint.setAntiAlias(true);
        mForePaint.setColor(Color.rgb(0, 128, 255));
    }

    public void updateVisualizer(byte[] bytes) {
        mBytes = bytes;
        invalidate();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        if (mBytes == null) {
            return;
        }

        if (mPoints == null || mPoints.length < mBytes.length * 4) {
            mPoints = new float[mBytes.length * 4];
        }

        mRect.set(0, 0, getWidth(), getHeight());

        for (int i = 0; i < mBytes.length - 1; i++) {
            mPoints[i * 4] = mRect.width() * i / (mBytes.length - 1);
            mPoints[i * 4 + 1] = mRect.height() / 2
                    + ((byte) (mBytes[i] + 128)) * (mRect.height() / 2) / 128;
            mPoints[i * 4 + 2] = mRect.width() * (i + 1) / (mBytes.length - 1);
            mPoints[i * 4 + 3] = mRect.height() / 2
                    + ((byte) (mBytes[i + 1] + 128)) * (mRect.height() / 2) / 128;
        }

        canvas.drawLines(mPoints, mForePaint);
    }
} 
```

}

XML 是包含按钮和其他内容的文件，稍后我将添加到 XML 中。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="151dp"
    android:layout_marginLeft="22dp"
    android:text="Reverse" />
<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button1"
    android:layout_alignBottom="@+id/button1"
    android:layout_centerHorizontal="true"
    android:text="play" />
<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/button2"
    android:layout_alignParentRight="true"
    android:layout_marginRight="19dp"
    android:text="forward" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:32:51.863

将您的 VisualizerView 布局和 AudioFxDemoActivity 布局拆分为两个单独的类。将所有必要的构造函数添加到 VisualizerView 类中。之后添加类似的东西 `<your.package.with.VisualizerView android:layout_width="wrap_content" android:layout_height="wrap_content" />`

在您的布局中。您还可以在代码或任何自定义中添加侦听器。随时提问=）。

# ios - 保存托管对象上下文时如何避免 UI 冻结？

> ID：14340617
> 
> 赞同：3
> 
> 时间：2013-01-15T15:07:48.347
> 
> 标签：ios, core-data, nsmanagedobjectcontext

我想实现一个大型数据集的 UI 响应式下载和解析，并使用 Core Data 保存它。

**我的设置：**

我在自定义视图控制器中显示下载的内容。我不使用 NSFetchedResultsController。

有 3 个 MOC：

1.  masterMOC（负责保存到磁盘，NSPrivateQueueConcurrencyType）
2.  mainMOC（由 UI 使用，NSMainQueueConcurrencyType，masterMOC 的子级）
3.  backgroundMOC（负责从 JSON 导入，在单独的线程中创建，masterMOC 的子线程）

我正在分批导入 - 每 50 个项目我通过以下方式执行 MOC 保存：

```
NSError *error;
[backgroundMOC save:&error];
NSManagedObjectContext *masterMOC = backgroundMOC.parentContext; //set during initialization               
[masterMOC performBlock:^{
    NSError *parentContextError = nil;
    [masterMOC save:&parentContextError];
}]; 
```

我希望在保存 masterMOC 后对 mainMOC 进行更改。如果我在 masterMOC 保存时尝试访问随机托管对象的某些关系（保存需要一些时间），UI 会挂起，直到保存完成。

**问题**：如何避免masterMOC保存时UI冻结？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:41:48.777

您的问题可能是数据存储在您写入数据时被阻塞。因此，要么使数据存储非阻塞（在您的情况下这可能或不可能），或者如果不可行，则使访问器非阻塞。在后一种情况下，GUI 不会挂起，但在访问结果返回之前它也不会更新。

# java - 一个属性的 hql 更新查询

> ID：14340622
> 
> 赞同：0
> 
> 时间：2013-01-15T15:07:58.093
> 
> 标签：java, hibernate, hql

我面临着非常奇怪的问题，找不到解决方法。我在 intellij 的 HQL 控制台中编写了以下 HQL

```
update NewsEntity ne set ne.main=false where ne.main=true 
```

堆栈跟踪

```
java.lang.IllegalArgumentException: node to traverse cannot be null!
 at org.hibernate.hql.ast.util.NodeTraverser.traverseDepthFirst(NodeTraverser.java:31)
 at org.hibernate.hql.ast.QueryTranslatorImpl.parse(QueryTranslatorImpl.java:254)
 at org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:157)
 at org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:111)
 at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:77)
 at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:56)
 at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:72)
 at org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:133)
 at org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:112)
 at org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1623)
 in RemoteSessionImpl.createQuery(RemoteSessionImpl.java:50)
 in RemoteUtil.executeWithClassLoader(RemoteUtil.java:122)
 in RemoteUtil$2$1.invoke(RemoteUtil.java:81)
 in HibernateEngine.createQuery(HibernateEngine.java:142) 
```

当我写一个`delete`查询时，我没有同样的问题。

我基于以下文章[HQL update query](https://stackoverflow.com/questions/9656993/hql-update-query)进行了此查询。但是，似乎无法弄清楚为什么我仍然遇到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:17:25.797

ORM like 的想法`Hibernate`是避免此类更新查询。您只需从 db 加载对象，更改字段，然后`Hibernate`将对象更新为 out。

```
Query query = session.createQuery("from NewsEntity ne where ne.main = true");
NewsEntity newsEntity = (NewsEntity) query.uniqueResult();
newsEntity.setMain=false;
//Hibernate will update the object 
```

如果有更多对象：

```
List<NewsEntity> newsEntities = (List<NewsEntity>) query.list();
for(NewsEntity entity : newsEntities)
{
 entity.setMain=false;
} 
```

Hibernate 还支持 DML 语句，因此要执行`update`查询，您应该执行以下操作：

```
Query query = session.createQuery("your update query");
int result = query.executeUpdate(); 
```

# java - Android 手机使用 Java 将文本文件发送到托管网络空间

> ID：14340625
> 
> 赞同：0
> 
> 时间：2013-01-15T15:08:08.300
> 
> 标签：java, android, hosting, text-files, transmitfile

我想将文本文件中的消息保存到 android 手机上的托管网络服务器上，比如我有用户名和密码的 bluehost。我想将文件存储在服务器上的任意目录中。

可以实现的一般策略是什么？我想使用 HTTP 协议，这是个好主意吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:12:32.153

您可以尝试将该字符串发布到服务器：

```
 // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://www.example.com");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("yourVarName", stringVar);
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs, "UTF-8"));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

        return (response.getStatusLine().getStatusCode() == 200 || response.getStatusLine().getStatusCode() == 204);

    } catch (ClientProtocolException e) {
        e.printStackTrace();
        return false;
    } catch (IOException e) {
        e.printStackTrace();
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:20:14.777

**将文件从安卓手机传输到托管网络空间**

您将 JSCH jar 导入您的 Android 应用程序，然后加载 JSCH 管理器类并使用定义的函数在 Android 手机和托管网络空间之间传输或接收文件。

[使用 JSch 通过 SSH 运行命令](https://stackoverflow.com/questions/2405885/any-good-jsch-examples)

JSCH 具有 FTP 功能，您可以在其中从手机传输到托管的 Web 空间，并且只要手机可以访问托管的 Web 空间，它就可以工作。你也可以反过来做同样的事情。

# tsql - 混淆整数列

> ID：14340627
> 
> 赞同：0
> 
> 时间：2013-01-15T15:08:25.690
> 
> 标签：tsql, encryption, obfuscation

我本可以将其发布到 SQL 论坛，但我更愿意寻找一个想法或最佳实践，这就是我选择这个论坛的原因。我在 SQL 中有一个名为 Payroll Number 的整数列，它对员工来说是唯一的。我们将通过 SQL 视图从该系统查询员工信息并将其放入另一个系统，但我们不希望工资单号码像在该系统上那样出现。因此，我们需要在 SQL 上对这些工资单数字进行散列处理，以便视图提供散列后的用户友好数字。

我花了很多时间阅读 SQL 中的加密技术，但它们使用复杂的算法来散列数据并生成二进制文件。但我所追求的是不那么复杂和混淆数字而不是散列。

例如，工资单号码是 6 个字符长（145674），我希望能够从这个数字生成可能 9-10 个字符长的整数并在其他系统上使用它。

我看过 XOR'ing 但我需要一些更强大和优雅的东西。

你们是怎么做这些事情的？你写你的简单算法来混淆你的整数吗？我需要在 SQL 级别上执行此操作，您有什么建议？

谢谢你的帮助

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:41:19.860

散列一个值并不难，但很难散列一个值并确保唯一性并使其成为一个数字。但是，我确实有一个跨数据库解决方案。

制作一个新表 - 有两列，id（从随机起点自动生成）和工资单 id。

每次您需要在外部使用用户时将它们插入此表中。这将为您提供一个可以使用（内部和外部）的本地唯一 ID，但它不是工资单 ID。

事实上，如果你已经有一个内部 id（例如用户表中的用户 id），只需使用它。如果从未解码此值，则散列该值没有任何优势。但是，您可以使用 id 的 autogen 作为随机唯一哈希——它具有您需要的所有属性。

# asp.net - OleDB 与 excel 文件的连接仅在生产中失败

> ID：14340629
> 
> 赞同：0
> 
> 时间：2013-01-15T15:08:43.430
> 
> 标签：asp.net, vb.net, excel, oledb, jet

我有一个使用 .NET 3.5 的 VB 应用程序，它允许用户上传 Excel 文件。然后应用程序从该文件中读取并将其内容插入到数据库中。

问题是读取似乎仅在我们的生产环境中失败。这是产生的错误：

```
ErrorMessage: System.Data.OleDb.OleDbException: Unspecified error
   at System.Data.OleDb.OleDbConnectionInternal..ctor(OleDbConnectionString constr, OleDbConnection connection)
   at System.Data.OleDb.OleDbConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.OleDb.OleDbConnection.Open()
   at uploader.ReadExcel(String sFile) in E:\path_to_application\uploader.aspx.vb:line 85 
```

这是 uploader.aspx.vb 中 ReadExcel 函数的第 84 和 85 行：

```
oConn = New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + sFile + ";Extended Properties=""Excel 8.0;HDR=Yes;IMEX=1"";")
oConn.Open() 
```

oConn.Open() 仅在生产中失败，我的本地机器上完全相同的代码库按预期工作。

*   该文件确实存在于`sFile`变量中指定的路径中
*   [这个问题](https://stackoverflow.com/questions/96150/oledbconnection-open-generates-unspecified-error)表明超过并发连接限制可能是一个问题，但即使在使用 IIS 重新启动应用程序后，问题仍然存在
*   这似乎不是权限问题，服务器上的所有用户组至少对上传的文件具有读取和执行权限

我还可以在生产环境和本地环境之间寻找哪些其他差异？还有什么可能导致打开此 OleDB 连接失败？

**更新**：一种解决方法似乎是在 IIS 中回收应用程序池。关于修复它的重置是什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:34:59.633

I have not used OleDb myself, but I have worked with the Jet driver. It is very important to have the proper version of the driver for the OS environment. For some time there was no 64 bit driver, but they released one in 2010\. You can download it here:

[http://www.microsoft.com/en-us/download/details.aspx?id=13255](http://www.microsoft.com/en-us/download/details.aspx?id=13255)

Another option may be to run the application in 32-bit mode. It's also possible that this is not the problem, but based on your results it does seem quite likely.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:12:48.587

probackpacker 会说，如果您的应用程序在 64 位环境中，它将无法工作，因为没有 64 位 OLEbd 驱动器

# php - 匹配 PHP 标签之外的 text/html

> ID：14340633
> 
> 赞同：1
> 
> 时间：2013-01-15T15:08:50.170
> 
> 标签：php, html, regex, tags

我正在为此寻找解决方案。选择 PHP 标记内的所有内容很容易（基本上），但我似乎无法得到相反的结果。

首先，我认为这会奏效：

```
/\?>(?<html>.*?)<\?|^(.*?)(?=<\?)|(?<=\? >)(.*?)$/ 
```

（?> 和 \<\? 之间的所有内容，^ 和 \<\? 之间的所有内容， ?> 和 $ 之间的所有内容）

但是在这里，问题是一个以 开头的文件`<?php`，并且没有一个其他结束标记，直到文件结尾，文件失败。

归根结底，我只想匹配`<? ... ?>`

```
THIS,<?php ... ?>
THIS<?php ... ?>
AND THIS 
```

有人有想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:53:19.840

试试这个

```
$yourcode = <<<TXT
THIS
,
<?php 
... ?>
THIS

<?php 
... ?>
THIS TOO

<?php ... ?>AND 
THIS

TXT;

preg_match_all('/
    (?|
        ((?:(?!\?>).)+)(?:<\?php)          # all chars not containing "?>" sequence until "<?php"
        |                                  # or
        (?:\?>)((?:(?!\?>).)+)(?:<\?php)   # all chars not containing "?>" sequence between "?>" and "<?php"
        |                                  # or
        (?:\?>)(.+)                        # all chars after "?>"
    )/sx', 
    $yourcode,
    $matches
);
print_r($matches[1]); 
```

您需要的一切都在第一个子组中。所以输出将是：

```
Array
(
    [0] => THIS
,

    [1] => 
THIS

    [2] => 
THIS TOO

    [3] => AND 
THIS

) 
```

# sql - SQL Server 2008 活动 URL 链接

> ID：14340635
> 
> 赞同：0
> 
> 时间：2013-01-15T15:09:07.657
> 
> 标签：sql, sql-server-2008, tsql

有没有可能在 SQL Server 2008 数据库中存储一些从服务器到某个位置的链接？

我在表格中有一些行，对于每一行我都有一个 pdf。

我想创建一个列来存储此 PDF 的链接，该 PDF 将放置在服务器位置。

我的问题是如何使此链接可点击（活动），链接有任何特定类型的列吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:13:04.517

在数据库中，只需将 URL 存储为字符串 -`varchar(200)`或任何适合您的方式。

使该 URL 可点击是**前端应用程序**的工作，例如您的 ASP.NET 或 PHP 或任何显示该数据的应用程序。

这不是 SQL Server 应该关注的问题 -

所以**不**-**没有特定的数据类型**可以直接在 SQL Server 中*单击*列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:41:58.957

不是 SQL 中的直接功能。

在前端，这将是一个超链接。

这取决于前端

ASP.NET 数据网格：

[超链接列类](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkcolumn.aspx)

在 WPF 中：

[DataGridHyperlinkColumn 类](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridhyperlinkcolumn.aspx)

在 SQL 中，您只需将链接位置存储为 char 或 varchar。

# c# - 将word 2010中富内容控件的内容转换为html格式

> ID：14340637
> 
> 赞同：2
> 
> 时间：2013-01-15T15:09:12.433
> 
> 标签：c#, .net, xml, ms-word, openxml

有什么方法可以将 word 2010 中丰富的 contentControl 的内容（以及格式和嵌入的图像）转换为 HTML。contentControl.Range.WordOpenXml 属性返回 openXml 格式的 XML。然而，这个 XML 并不是一个完整的 openXml 文档标记，它只是其中的一部分。这否定了使用任何 HTMLConverter 库来将 OpenXML 转换为 HTML 的可能性。我尝试使用 EricWhiteDpe 的 Power Tools for Open XML，但标记甚至无法加载到 WordprocessingDocument 对象中。（错误：数据损坏）我还有什么选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T12:01:58.123

我不确定这是否可行，但我的想法是 - 尝试创建一个新文档并将 contentControl.Range.WordOpenXml 的内容添加到新文档中，然后保存它。然后，您可以使用您提到的工具将这个新文档的 Open Office XML 转换为 HTML。

# java - 正则表达式：匹配前 15 个字符，但 matcher.start() 应指向第 16 个字符

> ID：14340638
> 
> 赞同：-2
> 
> 时间：2013-01-15T15:09:16.240
> 
> 标签：java, regex

在这里，我使用正则表达式来捕获前 15 个字符进行匹配，并且在使用子字符串时我必须使用 (0,matcher.start()) ，其中我应该只得到 15，请帮助我。

```
 String test = "hello world this is example";
        Pattern p = Pattern.compile(".{15}");

    //can't change the code below
    //can only make changes to pattern 

        Matcher m=p.matches(test);
        matcher.find(){
            String string = test.substring(0, m.start());
        }

    //here it is escaping the first 15 characters but I need them
    //the m.start() here is giving 0 but it should give 15 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:14:34.827

您应该使用 Matcher.end() 而不是 Matcher.start()。

```
String test = "hello world this is example";
            Pattern p = Pattern.compile(".{15}");
            Matcher m=p.matcher(test);
            if(m.find()){
                String string = test.substring(0, m.end());
                System.out.println(string);
            } 
```

来自 API：

1.  Matcher.start() ---> 返回上一个匹配的开始索引。
2.  Matcher.end() ---> 返回最后一个匹配字符后的偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:00:17.707

如果可能的话，我同意@jlordo 的评论：使用`String string = test.substring(0, 15);`

如果您被迫通过标记为不可更改的底部代码片段，则有一种解决方法。（这取决于...如果您遇到无法更改的代码片段甚至无法编译...您将度过一段糟糕的时光）

如果你真的需要一个总是返回 15 的正则表达式，`m.start()`你可以使用[正则表达式lookbehind concept](http://www.regular-expressions.info/lookaround.html)。

```
 String test = "hello world this is example";
        Pattern p = Pattern.compile("(?<=.{15}).");

        Matcher m=p.matcher(test);
        m.find();
        System.out.println(m.start()); 
```

假设`test`输入字符串至少有 16 个字符长，这将始终返回 15 `m.start()`。正则表达式应该被读作“任何字符（最后一个 .），前面有（（？<=）lookbehind 运算符）正好 15 个字符（.{15}）”。

`(?<=foo)`是一个后向运算符，指定后面的任何正则表达式都必须以“foo”开头。例如，正则表达式：`(?<=foo)bar`
将匹配中的栏：`foobar`
但不匹配中的栏：`wunderbar`

# java - 从 Java 关闭另一个应用程序，但不是由当前 Java 应用程序启动

> ID：14340640
> 
> 赞同：1
> 
> 时间：2013-01-15T15:09:18.063
> 
> 标签：java

基本上，如果我通过开始->附件->记事本启动记事本，那么我的 Java 程序应该关闭它。可能吗？如果不是Java，还有其他语言吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T15:13:02.713

如果您知道进程的 PID，请使用以下代码从 Java 中终止应用程序：

```
Runtime.getRuntime().exec("taskkill /F /PID <process_id>"); 
```

其中，是您的进程 ID，/F 用于强制终止。请注意，这仅在您使用 Windows 时有效。

从这里您可以将其扩展为动态获取进程 ID 并杀死而不是硬编码。

使用系统属性`os.name`，您可以获得操作系统的名称并相应地更改命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T15:17:40.567

除了上面的帖子，你可以用这个代码过滤掉PID（不知道它是否可以更简单地工作）

此代码确实列出了所有进程，如果需要，您可以过滤掉一些特定的进程

```
package runtime;

import java.util.Scanner;

public class Process_Check {

 public static void main(String[] args) throws Exception {
        Processes.ALL_PROCESSES.listProcesses();
   }
 public static enum Processes implements IProcessListingStrategy {
        ALL_PROCESSES;

        private IProcessListingStrategy processListing = selectProcessListingStrategy();

        public void listProcesses() throws Exception {
            processListing.listProcesses();
        }

        private IProcessListingStrategy selectProcessListingStrategy() {
            //todo add support for mac ...
            return isWindows() ? new WinProcessListingStrategy() : new LinuxProcessListingStrategy();
        }

        private static boolean isWindows() {
            return System.getProperty("os.name").toLowerCase().indexOf("win") >= 0;

        }
    }

    static interface IProcessListingStrategy {
        void listProcesses() throws Exception;
    }

    static abstract class AbstractNativeProcessListingStrategy implements IProcessListingStrategy {
        public void listProcesses() throws Exception {
            Process process = makeProcessListingProcessBuilder().start();
            Scanner scanner = new Scanner(process.getInputStream());
            while (scanner.hasNextLine()) {
                System.out.println(scanner.nextLine());
            }
            scanner.close();
            process.waitFor();
        }

        protected abstract ProcessBuilder makeProcessListingProcessBuilder();
    }
    static class WinProcessListingStrategy extends AbstractNativeProcessListingStrategy {
        @Override
        protected ProcessBuilder makeProcessListingProcessBuilder() {
            return new ProcessBuilder("cmd", "/c", "tasklist");
        }
    }

    static class LinuxProcessListingStrategy extends AbstractNativeProcessListingStrategy {
        @Override
        protected ProcessBuilder makeProcessListingProcessBuilder() {
            return new ProcessBuilder("ps", "-e");
        }
    }
} 
```

# php - MySql 约束违反。插入

> ID：14340652
> 
> 赞同：0
> 
> 时间：2013-01-15T15:10:08.447
> 
> 标签：php, mysql, sql, foreign-keys

我有 5 个表的数据库

```
students    PK    : ID -> anum, first, last
studentinfo PK/FK : ID -> why, student_commenets, finished, aidyear
Times       PK/FK : ID -> signintime, counselor_start_time, 
                           additional_time, finish_time
counselor   PK/FK : ID -> firstcounselor, secondcounselor, thirdcounselor
Comments    PK/FK : ID -> counselorcomments, additional_commenets 
```

我有一个名为 signinpage.php 的页面

在那个页面上，我必须写三个不同的表（学生、学生信息和时间）

我的代码是休闲：

```
if (empty($errors) === true) 
{
include('core/queries/inserts.updates.selects/students.php');   
include('core/queries/inserts.updates.selects/studentinfo.php');
include('core/queries/inserts.updates.selects/signintime.php'); 

$dbh = null;    
header('location: signedin.php');
exit(); 
} 
```

每个文件都是实际的插入查询。（如果你们需要看到他们，我会更新这篇文章）

我遇到的错误是：

> SQLSTATE [23000]：完整性约束违规：1452 无法添加或更新子行：外键约束失败（`test`. `times`, CONSTRAINT `times_ibfk_2`FOREIGN KEY ( `id`) REFERENCES `students` ( `id`) ON DELETE CASCADE ON UPDATE CASCADE）

除此之外，第一个查询（students.php 和第二个查询 studentinfo.php）插入得很好。相同的 ID，插入到表中的登录时间出现问题：次。

在 phpmyadmin 中，两个表（studentinfo 和 times）的配置相同，因为学生他/她开始会话（这是 PK ID），所以两者都有级联删除和更新到原始表（学生）。

我该如何解决这个错误？

编辑 ：

```
<?php
require('core/init.php');

try 
{
    $null = NULL;
    $query = $dbh->prepare("INSERT INTO `times` (signintime) VALUES (:signintime)");
    $query->bindParam(':signintime' , $null);
    $query->execute();
}

        catch (PDOException $e) 
        {
                error_log($e->getMessage());
                die($e->getMessage());
        }   
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:13:11.703

你的桌子设计在我看来是错误的。我假设`times`表中的每一行都可以有多个条目`students`。在这种情况下，您将需要以下列`times`：

```
id - PK
student_id - FK
signintime
counselor_start_time
additional_time
finish_time 
```

然后，特定学生的每一行将具有相同的`student_id`值，但`id`值不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:24:05.817

以下陈述和示例与您提到的表格不同，但**想法仍然相同**。

生成错误的原因是因为您试图在*子表上插入一个值，而该值在**父*表中尚不存在。*子*表意味着它依赖于另一个表（*即 Parent*）。

为了进一步解释，请考虑以下模式，

```
CREATE TABLE StudentList
(
  ID INT PRIMARY KEY,
  NAme VARCHAR(50)
);

CREATE TABLE AddressList
(
  StudentID INT,
  Address VARCHAR(50),
  CONSTRAINT tb_fk FOREIGN KEY (StudentID) 
    REFERENCES StudentList(ID)
);

INSERT INTO StudentList VALUES (1, 'Jon');
INSERT INTO StudentList VALUES (2, 'Skeet');

INSERT INTO AddressList VALUES (1, 'Hello');
INSERT INTO AddressList VALUES (2, 'World');
INSERT INTO AddressList VALUES (1, 'Other Address'); 
```

有两个表：`StudentList`和`AddressList`。该表`Address`是子表，它依赖于表`StudentList`（*也称为父表*）。允许在`StudentID`table 的列上插入的唯一值`AddressList`只是`1 and 2`因为这些是`ID`在 table 上找到的唯一值`StudentList`。

当您尝试插入 ID 不是`1 and 2`表上的记录时`Address`，例如

```
INSERT INTO AddressList VALUES (1, 'Other Address'); 
```

它会产生一个错误，告诉你：

> 无法添加或更新子行：外键约束失败（`db_2_ec2e8`. `addresslist`, CONSTRAINT `tb_fk`FOREIGN KEY ( `StudentID`) REFERENCES `studentlist`( `ID`)）：

因为在表中插入的列的值`StudentID`在父表 ( *StudentList* ) 上不可用。

所以，我希望这能帮助你现在理解。

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/a941af/1)

# jquery - jquery改变变换（rotateY）

> ID：14340656
> 
> 赞同：2
> 
> 时间：2013-01-15T15:10:26.333
> 
> 标签：jquery

```
$("#div").css("transform", "rotateY("+ '+='+90 +"deg)"); 
```

我想增加`rotateY`，但我的语法不好，是否可以修复它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T16:08:45.517

将当前旋转保存在变量中是最简单的，只需增加它的值而无需检索当前旋转：

```
rotation += 90;
$("#div").css("transform", "rotateY("+rotation+"deg)"); 
```

否则，您将需要解析转换的 css 值，因为它是字符串。

# php - Symfony 2：EntityManager 级联在没有请求时持续存在

> ID：14340657
> 
> 赞同：1
> 
> 时间：2013-01-15T15:10:26.683
> 
> 标签：php, symfony, doctrine

我有一个与另一个对象（城市）有“OneToMany”关系的对象（酒店）。

保存对象“Hotel”时，persistCadade 会触发对象“City”的持久化，然后尝试进行插入。

我可能理解如果请求持久化它想要插入的事实。事实上，我必须对 City 对象进行一些更改，但我不需要保存这些更改。

我的 Hotel 对象应该只使用正确的 city_id 更新，而与城市对象上发生的事情无关，因为我没有提到任何“级联持续存在”。

关于可能导致问题的任何想法？

酒店等级：

```
/**
 * @ORM\ManyToOne(targetEntity="XYZ\Entity\City")
 * @ORM\JoinColumn(name="city_id", referencedColumnName="id")
 */
protected $city; 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:37:43.370

`City`您传递给对象的对象`Hotel`必须被持久化才能拥有主键（将用作外键）。

`city_id`如果没有持久`City`对象，就不可能获得。

# javascript - 使用来自另一个文件的 javascript 变量创建 xsl 变量的方法？

> ID：14340658
> 
> 赞同：0
> 
> 时间：2013-01-15T15:10:30.040
> 
> 标签：javascript, variables, xslt

是否可以使用创建 xsl 变量

```
<xsl:variable name="x"><xsl:value-of select="country" /></xsl:variable> 
```

使用 javascript 变量？

变量“country”是在另一个 javascript 文件中创建的，该文件未嵌入在 xslt 中。我正在尝试使用 ajax 获取用户所在的国家/地区。

**--------------Javascript文件--------------**

```
$(document).ready(function()
{
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {       

    $.getJSON('http://ws.geonames.org/countryCode', {
    lat: position.coords.latitude,
    lng: position.coords.longitude,
    type: 'JSON'
    }, function(result) {
    country = result.countryCode;
});  
});
}; 
```

如果有更好的方法，请回复。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:16:33.563

如果要将值传递到 XSL，典型的机制是使用参数。在 XSL 的顶层，您将声明参数：

```
<xsl:stylesheet ....>

  .....

  <xsl:param name="country" />

  ..... 
```

然后你会从你的外部代码中传递那个值，表明这个值是为“国家”参数准备的。

我没有在 JavaScript 中使用 XSLT 参数的经验，但本教程似乎提供了有关如何使用 XSLT 参数的信息：

[使用 JavaScript 传递 XSLT 参数](http://www.articlejobber.com/tutorial/javascript_xslt_parameters_20060303_2.html)

Mozilla 也提供了这些信息，但我不确定这两种方法的跨浏览器兼容性如何：

[使用 Mozilla JavaScript 接口到 XSL](https://developer.mozilla.org/en/docs/Using_the_Mozilla_JavaScript_interface_to_XSL_Transformations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:12:03.343

使用客户端 XSLT 的最常见方式是让 XSLT 生成 HTML 页面，包括其 Javascript。使用这种方法，XSLT 在 JS 开始执行之前停止执行，因此 JS 无法影响 XSLT。但当然也可以以编程方式运行 XSLT 转换，通过 Javascript API 调用它，在这种情况下，您可以通过使用该 API 设置参数将信息传递到转换中。

# java - 签署 REST API 调用：Java、php、Ruby 的常见 MAC 算法

> ID：14340660
> 
> 赞同：0
> 
> 时间：2013-01-15T15:10:34.980
> 
> 标签：java, security, rest, cryptography, playframework-2.0

我想使用消息身份验证代码 (MAC) 对对我的 REST API 的调用进行签名，哪种算法在 Java、php、Ruby 和 C# 中使用起来既方便又舒适？

更长的故事：我的应用程序（Play Framework 2.0）提供了一个非常简单的 REST API，只有几个服务可以由有限且已知的*组客户端访问。安全性在这里很重要，对客户来说也很容易使用。

（* 已知意味着他们必须先在应用程序中注册，这是他们获得 MAC 秘密的地方，我不知道他们是谁以及他们使用什么技术。）

我想实现以下方法：

*   使用 SSL
*   使用 MAC 对 REST 消息进行签名

我实现了一个测试用例，我使用我的密码加密器（[类似于此处的示例代码](http://www.javacodegeeks.com/2012/05/secure-password-storage-donts-dos-and.html)）和 PBKDF2WithHmacSHA1 进行签名。我花了一些时间让签名工作，特别是因为我想将签名作为 URL 参数发送，并且必须对其进行两次编码才能以正确的格式获取它。

生成的签名是一个字节[]，我使用 org.apache.commons.codec.binary.StringUtils 将其转换为 UTF-8 编码的字符串，然后使用 java.net.URLEncoder 再次对其进行编码以获得正确的 URL 参数。该解决方案有效，但感觉有点愚蠢且过于复杂。

这段经历让我想到了这个问题，我想让我的客户轻松舒适地使用该服务，而且非常安全。那么，我为我的签名选择什么加密算法？对于 Java、php、Ruby、C# 等最常见的 Web 平台来说很容易实现，并且至少可以在不太常见的语言中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:38:42.150

`byte[]`转换为 hexString 可能是用于签名的最简单格式 - 十六进制字符 [0-9a-f] 不需要特殊编码。Apache Commons 编解码器在`Hex`类下提供了转换方法。

HMAC-SHA256 是 HMAC 算法的黄金标准，应该存在于任何值得使用的平台上。

# c - 使用 fscanf 仅读取字母字符

> ID：14340662
> 
> 赞同：1
> 
> 时间：2013-01-15T15:10:38.340
> 
> 标签：c

您好，我只有从文件读取的功能

```
while(fscanf(fp," %255[a-zA-Z]",test) == 1)
{
    puste = 1;
    push(&drzewo,test);
} 
```

它应该只读取仅包含字母字符并且效果很好的单词。例如，当我的文件中有一个数字时，我的 while 循环退出；我应该如何改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:13:58.833

当然它会停止，因为`fscanf()`调用将无法进行您需要的转换，因此返回 0。您希望它做什么？

通常最好使用 读取整行`fgets()`，然后“手动”解析它们，这样如果找不到所需的数据，就很容易什么都不做并读取另一行。

# css - 如何为没有自定义字体的用户下载自定义字体？

> ID：14340663
> 
> 赞同：0
> 
> 时间：2013-01-15T15:10:39.827
> 
> 标签：css, fonts, stylesheet, font-face

> **可能重复：**
> [如何向网站添加一些非标准字体？](https://stackoverflow.com/questions/107936/how-to-add-some-non-standard-font-to-a-website)

一位客户向我发送了一个 .ttf 文件，其中包含应将其用作我正在处理的他的网站上的字体的说明，对于那些没有此字体的人，应为他们下载该字体。

是否有可能（下载字体）？如果是这样，下载字体的 css/javascript/其他代码是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:16:42.517

[您可以使用 CSS @font-face rule](https://developer.mozilla.org/en-US/docs/CSS/@font-face)嵌入字体。

最简单的方法可能是使用[Font Squirrel 生成器](http://www.fontsquirrel.com/fontface/generator)，您可以在其中上传 .ttf 并将字体转换为各种浏览器的格式以及现成的 CSS 片段和示例 HTML 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:14:19.910

首先定义字体并为其命名。

```
@font-face {
    font-family: cool_font;
    src: url('cool_font.ttf');
} 
```

然后您可以将其与定义的名称一起使用。

```
p.custom_font{
    font-family: cool_font;
} 
```

# windows-phone-7 - Windows Phone 中的 Facebook API 实现

> ID：14340667
> 
> 赞同：0
> 
> 时间：2013-01-15T15:10:46.393
> 
> 标签：windows-phone-7, facebook-graph-api

我有一个应用程序。我为它创建了一个 facebook 页面。现在当我查看 Facebook API 时，它问我这个

1)**选择您的应用如何与 Facebook 集成**

**使用 Facebook 登录的网站（使用 Facebook 登录我的网站。）、Facebook 上的应用程序（在 Facebook.com 中使用我的应用程序。）、移动网络（在 Facebook 移动设备上为我的网络应用程序添加书签。）、原生 iOS 应用程序（从我的 iOS 发布应用程序到 Facebook。），原生 Android 应用程序（从我的 Android 应用程序发布到 Facebook。），页面选项卡（为 Facebook 页面构建自定义选项卡。**），

2）我真正想做的是当我的用户第一次打开我的应用程序时，我想使用他的凭据并代表他使用我的应用程序发布。3）我想实现 API，以便在用户允许我的应用程序连接到他的个人资料后，我使用我的应用程序，而他通过我的应用程序共享任何内容以代表他发布。请在所有这些情况下使用完美的代码帮助我，因为我不是 OAuth 的代言人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:26:05.483

查看适用于 Windows Phone 7 的官方 Facebook C# SDK 示例

[https://github.com/facebook-csharp-sdk/facebook-windows-phone-sample](https://github.com/facebook-csharp-sdk/facebook-windows-phone-sample)

# c++ - 使 QMap 中的指针值无效

> ID：14340672
> 
> 赞同：0
> 
> 时间：2013-01-15T15:11:00.067
> 
> 标签：c++, qt, pointers, memory-management, qmap

我遇到了一个似乎很奇怪的问题，但这可能是 QMap 工作方式的一个怪癖，我只是不明白。很难总结这个问题，但我会尽力而为。

我有一堂课`A`，一堂课`QMap<QString, someType*> mySomeTypeMap;`。当我在我的程序中加载一个新文件时，我想删除它的所有内容，`QMap`以便我可以用新数据重新填充它。我通过执行以下操作来做到这一点：

```
foreach (QString key, mySomeTypeMap.keys())
{
    someType* toDelete = mySomeTypeMap.take(key);

    //Show me the original address of the pointer
    qDebug() << "toDelete: " << toDelete;

    delete toDelete;

    //Set the pointer to 0x0
    toDelete = NULL;
} 
```

该`qDebug()`语句打印出我要删除的值的正确地址，当我`toDelete`在调试器中查看它设置为 后`NULL`，它显示 0x0，这就是我想要的。

然后，在另一个类`B`中，我有以下代码......

```
void B::setSomeType(someType* blah)
{
    if (Blah != NULL)
    {
        //Calls a bunch of disconnect()'s
        disconnectAllSignals();

        Blah = blah;

        //Calls a bunch of connect()'s
        connectAllSignals();
    }
} 
```

现在，真正令人困惑的是我的程序在到达`disconnectAllSignals();`线路时崩溃了。原因是它试图调用`disconnect()`哪个`Blah`已删除，当我将其设置为`NULL`. 但是，如果它实际上设置为`NULL`它永远不会进入该 if 块开始。在调试器中，我看到 的地址与`Blah`我`qDebug() << "toDelete: " << toDelete;`在设置`toDelete = NULL;`.

TLDR；在我删除指针并将相同的指针设置为`NULL`. 由于指针未`NULL`在执行的后期设置，因此会导致崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:23:10.523

映射中的值是按值存储的，即使在这种情况下，这意味着指针（它指向的地址）是按值存储的。例如：

```
someType* toDelete1 = mySomeTypeMap.take(key);
someType* toDelete2 = mySomeTypeMap.take(key);
someType* toDelete3 = toDelete1;
toDelete1 = NULL; 
```

toDelete2 & toDelete3 仍将指向原始对象

而不是在删除后使指针为空，您应该将其从映射中删除或将该键的值设置为 NULL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T15:36:26.833

```
someType* toDelete = mySomeTypeMap.take(key); 
```

这是一个在堆栈上创建的指针变量，其值设置为您在 map 中保存的值。您不需要将其设置为 NULL，因为它会立即超出范围。

`take`函数正在从映射中删除指针，如果您再次使用相同的键使用它，它将返回默认构造的值。就在`delete`尝试之后

```
mySomeTypeMap.insert(key, 0); 
```

# xamarin.android - 未处理的异常处理

> ID：14340677
> 
> 赞同：0
> 
> 时间：2013-01-15T15:11:10.337
> 
> 标签：xamarin.android

在我的 MonoDroid 应用程序中，当发生未处理的异常时，应用程序将在没有任何消息的情况下终止。如果我可以在我的本地设备上重现该错误，我可以通过 Visual Studio 调试它而不会出现任何问题。

但是，在远程设备上，我一直在寻找解决方案。

我在 Application 类中尝试了以下操作，但它实际上并没有写入我的日志文件，除非我通过 Visual Studio 中的调试器运行。

```
public override void OnCreate()
    {
        base.OnCreate();                                    
        AndroidEnvironment.UnhandledExceptionRaiser += new EventHandler<RaiseThrowableEventArgs>(AndroidEnvironment_UnhandledExceptionRaiser);
    }

    void AndroidEnvironment_UnhandledExceptionRaiser(object sender, RaiseThrowableEventArgs e)
    {
        // Write Log File
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T17:47:10.130

我不同意[@SpiritMachine 的回答](https://stackoverflow.com/a/14354182/109941)。

Mono 文档[告诉我们](http://docs.go-mono.com/index.aspx?link=E:Android.Runtime.AndroidEnvironment.UnhandledExceptionRaiser)：

> 注意：您不能依赖该`AppDomain.UnhandledException`事件，因为 MonoDroid 中永远不会处理托管异常；它们总是在 catch(Exception) 块内的 Android/托管边界处被拦截。

相反，我建议您执行以下操作：

```
AndroidEnvironment.UnhandledExceptionRaiser += (sender, args) =>
{
    // Do something...
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T08:38:19.650

尝试这样的事情：

**编辑：**此代码无法处理捕获的错误。请参阅[@Jim G. 的回答](https://stackoverflow.com/a/16968770/109941)....

就个人而言，我会将错误处理本地化到您需要的地方。原因是，您不知道招募此处理程序时您的应用程序状态将是什么 - 您可能没有资源来进行处理...

# mysql - 使用 MyISAM 读取数据，使用 InnoDB 写入数据

> ID：14340678
> 
> 赞同：1
> 
> 时间：2013-01-15T15:11:13.117
> 
> 标签：mysql, innodb, myisam

我从性能的角度阅读了很多关于 MyISAM 和 InnoDB 比较的文章，我决定使用 MyISAM 读取数据，使用 InnoDB 写入数据。

我想使用两个结构，如下图所示。两个相同（同步）的数据库，但表引擎不同。

![在此处输入图像描述](../Images/eb3c5a2db7686019181adb0d94d2d0ed.png)

**您对这种结构有何建议？** **这种设计有什么缺点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:07:32.467

这种设计的缺点是你在写入时付出了巨大的复制代价，其中包括 InnoDB 假定的读取惩罚和 MyISAM 假定的写入惩罚，读取时可能会带来相当小的性能收益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T23:50:11.167

我认为你应该分享一些你的目标绩效水平。你建议的主要缺点是你得到了 MyISAM 的所有缺点（表级锁定和零崩溃恢复），而没有 InnoDB 的优点（崩溃恢复、行级锁定和事务）。你增加了复杂性，实际上没有任何好处。如果调优和使用得当，InnoDB 的性能实际上是相当不错的。我运行一组机器平均每秒处理 20k-30k 个查询，每秒总计数百万个查询，所有 InnoDB。性能不是问题。

# python - Python：可以在不限定名称的情况下从类中调用静态方法

> ID：14340679
> 
> 赞同：27
> 
> 时间：2013-01-15T15:11:14.183
> 
> 标签：python, class, namespaces

这很烦人：

```
class MyClass:
    @staticmethod
    def foo():
        print "hi"

    @staticmethod
    def bar():
        MyClass.foo() 
```

有没有办法在通话中不命名 MyClass 来完成这项工作？也就是说，我可以`foo()`在最后一行说吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-15T15:12:33.973

没有办法使用`foo`和得到你想要的。没有隐式的类范围，`foo`本地或全局也是如此，这两者都不是你想要的。

您可能会发现 classmethods 更有用：

```
class MyClass:
    @classmethod
    def foo(cls):
        print "hi"

    @classmethod
    def bar(cls):
        cls.foo() 
```

这样，至少你不必重复类名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:18:35.700

不可能。这是语言设计的问题。将其与 C++ 进行比较，其中`this`（与 Python 相同`self`；在 Python 中您必须编写`self.var`，在 C++ 中您可以编写 just `var`，not `this->var`）和自己的类在成员函数中默认使用，您可能会看到有时这很好，而且有时这很烦人。唯一可能的是习惯该功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-29T10:23:24.657

你'变量化'类名。这不会删除，但会缩短名称。

```
class MyClass:
    @staticmethod
    def foo():
        print "hi"

    @staticmethod
    def bar():
        c.foo()

c = MyClass 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-15T15:24:45.043

您可以通过创建模块级函数`foo`然后将其添加到类命名空间来做一些hacky `staticmethod`：

```
def foo():
    print "hi"

class MyClass(object):
    foo = staticmethod(foo)

    @classmethod
    def bar(cls):
        return cls.foo()

    def baz(self):
        return foo()

c = MyClass()
c.bar()
c.baz()

MyClass.bar()
MyClass.foo() 
```

# spring - Spring Hibernate 创建新表而不会丢失现有表

> ID：14340681
> 
> 赞同：1
> 
> 时间：2013-01-15T15:11:21.557
> 
> 标签：spring, hibernate

我正在开发一个 Spring/Hibernate/Postgres 项目。我有几个表我正在执行 CRUD 操作，并且这些表有我不想丢失的数据。我现在想用 Hibernate 实体类创建一个新表，而不会丢失我现有的表。这会为我做吗：

```
<prop key="hibernate.hbm2ddl.auto">update</prop> 
```

我想确认我将在不删除现有表的情况下创建新表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-21T10:58:45.163

我有同样的问题，我做了同样的事情，但表没有被创建，你所说的“在休眠配置中指定带注释的类”到底是什么意思[@invariant](https://stackoverflow.com/users/986387/invariant)

# powershell - Powershell：在远程计算机上映射/取消映射网络驱动器

> ID：14340684
> 
> 赞同：1
> 
> 时间：2013-01-15T15:11:25.683
> 
> 标签：powershell

如何使用 powershell 在远程计算机上映射/取消映射网络共享？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:44:38.877

远程计算机需要启用 PSRemoting (Enable-PSRemoting -Force)，然后您可以执行以下操作：

映射网络驱动器：

`Invoke-Command -ComputerName hostname -ScriptBlock {$netobj = New-Object -ComObject "Wscript.Network";$network.MapNetworkDrive("Z:","\\Server\Share")}`

删除网络驱动器：

`Invoke-Command -ComputerName hostname -ScriptBlock {$netobj = New-Object -ComObject "Wscript.Network";$network.RemoveNetworkDrive("Z:")}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:30:49.347

从 powershell 使用 net.exe 怎么样？比如`net use * \\server\share /user:<domain>\<user> *`。'*' 告诉 net.exe 提示输入密码（如果你愿意，你也可以在命令行中传递它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-10T19:38:31.520

现在使用 PowerShell 3.0 或更高版本使用： `Remove-PSDrive -Name <Drive you want Remove> -Scope Global -Force` 或 `Remove-SmbMapping -LocalPath (<Drive you want Remove> + ":") -UpdateProfile -Force`

# actionscript-3 - TypeError：错误 #1009：无法访问空对象引用的属性或方法

> ID：14340686
> 
> 赞同：0
> 
> 时间：2013-01-15T15:11:28.627
> 
> 标签：actionscript-3, flash, typeerror

从昨天深夜开始，我一直在尝试修复上述错误。今天我又试了好几个小时。我学到了很多，也明白了很多。我一路上发现了一些东西并修复了它们，不幸的是错误仍然存​​在。

**例如，我现在知道上述错误表明我的代码所针对的对象之一超出了范围。** 可能由以下原因引起：

1.  它被声明但未实例化

2.  它没有实例名称（或实例名称拼写错误）

3.  它不存在于该代码试图与之对话的框架中

4.  它已动画到位，但未在每个关键帧中为其分配实例名称

5.  它是相同对象的两个或多个连续关键帧之一，在前一帧中未指定名称（或不同名称）。

***这是出错的错误行：***

```
if (back.collisions.hitTestPoint(player.x + leftBumpPoint.x,player.y + leftBumpPoint.y,true)) 
```

**所以它必须是有背部或碰撞的东西......**

1.  我检查了一下，它不是拼写错误的实例 BTW back 是带有 Back 实例的背景影片剪辑，它包含带有实例 Collisions 的碰撞图像

2.  它正在被宣布（但可能不正确）

3.  可能是原因。第 1 帧是预加载器。第 2 帧是带有启动代码 cat.as 的按钮的菜单。第 3 帧包含游戏

4.  它只存在于一个关键帧上，所以它不是错误号 4

5.  它只存在于一个关键帧上，所以它不是错误号 5

所以很可能是3号。

我认为发生的事情是我单击按钮，它立即想要运行 cat.as 在进入第 3 帧之前。我应该如何解决这个问题。我正在考虑将游戏放在第 2 帧但不在屏幕上。我非常希望对此提供反馈，请。谢谢

***我的代码：编辑：我给了 var public***

```
package 
{
import flash.display.MovieClip;
import flash.events.*;
import flash.events.KeyboardEvent;
import flash.ui.Keyboard;
import flash.geom.Point;

public class Cat extends MovieClip
{

    public var leftPressedfBoolean = false;
    public var rightPressed:Boolean = false;
    public var upPressed:Boolean = false;
    public var downPressed:Boolean = false;

    public var leftBumping:Boolean = false;
    public var rightBumping:Boolean = false;
    public var upBumping:Boolean = false;
    public var downBumping:Boolean = false;

    public var leftBumpPoint:Point = new Point(-30,-55);
    public var rightBumpPoint:Point = new Point(30,-55);
    public var upBumpPoint:Point = new Point(0,-120);
    public var downBumpPoint:Point = new Point(0,0);

    public var scrollX:Number = 0;
    public var scrollY:Number = 500;

    public var xSpeed:Number = 0;
    public var ySpeed:Number = 0;

    public var speedConstant:Number = 4;
    public var frictionConstant:Number = 0.9;
    public var gravityConstant:Number = 1.8;
    public var jumpConstant:Number = -35;
    public var maxSpeedConstant:Number = 18;

    public var doubleJumpReady:Boolean = false;
    public var upReleasedInAir:Boolean = false;

    public var keyCollected:Boolean = false;
    public var doorOpen:Boolean = false;

    public var currentLevel:int = 1;

    public var animationState:String = "idle";

    public var bulletList:Array = new Array();
    public var enemyList:Array = new Array();
    public var bumperList:Array = new Array();

    public var player:Player;
    public var back:Back;
    public var sky:Sky;
    public var collisions:Collisions;
    public var visuals:Visuals;
    public var other:Other;
    public var doorKey:DoorKey;

    public function Cat()
    {
        addEventListener(Event.ADDED_TO_STAGE, init);
    }

    public function init(e:Event):void

{
        player = new Player();
        back = new Back();
        sky = new Sky();
        visuals = new Visuals();
        other = new Other();            
        collisions = new Collisions();
        doorKey = new DoorKey();

        stage.addEventListener(KeyboardEvent.KEY_DOWN, keyDownHandler);
        stage.addEventListener(KeyboardEvent.KEY_UP, keyUpHandler);
        stage.addEventListener(Event.ENTER_FRAME, loop);
        addEnemiesToLevel1();
        addBumpersToLevel1();
    }

    public function addEnemiesToLevel1():void
    {
        addEnemy(620, -115);
        addEnemy(900, -490);
        addEnemy(2005, -115);
        addEnemy(1225, -875);
    }

    public function addBumpersToLevel1():void
    {
        addBumper(500, -115);
        addBumper(740, -115);
    }

    public function loop(e:Event):void
    {
        if (back.collisions.hitTestPoint(player.x + leftBumpPoint.x,player.y + leftBumpPoint.y,true))
        {
            //trace("leftBumping");
            leftBumping = true;
        }
        else
        {
            leftBumping = false;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:39:06.207

在 if 语句之前添加它以查看缺少哪个项目：

```
trace("back "+back);
trace("back.collisions "+back.collisions);
trace("player.x "+player.x);
trace("leftBumpPoint.x "+leftBumpPoint.x);
trace("player.y "+player.y);
trace("leftBumpPoint.y "+leftBumpPoint.y); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:19:10.840

问题是在检查它的 x 值是什么之前，您永远不会将玩家添加到舞台上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T16:13:25.593

您分别声明返回和碰撞，但您访问它们时碰撞是返回的属性。背部有碰撞属性吗？如果是这样，它是如何初始化的？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T16:53:34.210

根据你的说法

> back 是带有 Back 实例的背景影片剪辑

我可以假设您将“Back”设置为movieClip“back”的实例名称

将“返回”更改为“返回”应该这样做

# android - 是否可以查看Android的back stack的内容？

> ID：14340690
> 
> 赞同：2
> 
> 时间：2013-01-15T15:11:38.030
> 
> 标签：android

我正在寻找一种工具（可能是 Eclipse 插件），它可以让我对 Android 的后台堆栈有所了解。我试图找到解决我继承的应用程序的方法。我经常导航到一个屏幕，然后尝试确定正在运行的活动。我有源代码，所以我总是可以回答这个问题，但它并不总是快速简单的。

如果在 DDMS 中我可以看到哪些活动处于活动状态，那就太好了。如果我可以查看后台堆栈的全部内容，或者至少可以查看我进程中的那些活动，那就更好了。这将使我对 Android 正在做的事情有一些很好的了解。

我意识到在实际设备上存在权限问题会/应该阻止这种情况，但如果这只是与模拟器一起使用，我会很好。

有谁知道可以帮助解决此问题的工具或方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-12T04:23:47.983

有一个类似的问题[，](https://stackoverflow.com/questions/2442713/view-the-tasks-activity-stack/7172633#7172633)并且变得非常流行。

从那个问题中学习，你可以在 adb shell 中使用这个命令：`dumpsys activity`。这将转储活动管理器的当前状态。通过深入研究，您可以获得后台堆栈中的任务和活动列表。根据[techterms](https://techterms.com/definition/stack)，不建议任何程序员将碎片放在堆栈中间（这破坏了堆栈的目的）。因此，没有任何直接的方法可以让您获得 backstack 的完整视图。

主要`dumpsys activity`转储自活动管理器启动以来发生的事情。所以这一切都从一个空的后栈开始，然后再填满。因此，您可以查看压入的内容和从堆栈中弹出的内容，以获取当前堆栈的状态。

# javascript - 在文档开头使用 pdf.js 重新打开 pdf。不是最后查看的位置

> ID：14340691
> 
> 赞同：5
> 
> 时间：2013-01-15T15:11:38.483
> 
> 标签：javascript, jquery, pdf, mozilla, pdf.js

该插件保存文档在关闭之前的最后位置，下次我打开文档时，它会在该位置显示文档。

例子：

我看到第二页的中间。我关闭文档。我再次打开它，它在第二页的中间打开。

我想在开始时重新打开它。

有谁知道如何改变这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T04:21:43.480

您应该能够只在 URL 中添加一个书签，就像在`#`. 例如：

```
<iframe src="viewer.html?file=/sample.pdf#0"></iframe> 
```

或者，如果您直接在浏览器中加载查看器，只需附加`#0`到 URL。根据 viewer.js 中的以下代码，这应该会覆盖您的浏览器可能记住的任何其他书签：

```
initialBookmark: document.location.hash.substring(1), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:50:10.510

我也有这种首选行为，我所做的是打开`viewer.js`并删除`initialBookmark`变量以及对它的所有引用。

有点脏，但它成功了，不想花一整天时间过滤能够改变行为的不同 url 变量..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-11T10:02:46.500

如果您使用的是javascript，请触发此功能转到第一页，

```
$window.PDFViewerApplication.eventBus.dispatch('pagenumberchanged',{"value": 1}); 
```

# asp.net-mvc - 带有附加函数参数的 Asp.net 自定义 RoleProvider

> ID：14340694
> 
> 赞同：2
> 
> 时间：2013-01-15T15:11:48.747
> 
> 标签：asp.net-mvc, roleprovider

## 背景

我的 ASP.net MVC 应用程序有一个自定义的成员资格和角色提供程序，它运行良好。然而，最近的要求意味着我必须修改角色提供程序以允许一些附加功能。

与默认提供者不同（一个用户可以拥有多个角色，仅此而已），我的新要求需要用户在每个公司拥有不同的角色集合。因此，对于一家公司，用户帐户可能具有管理员权限，但对于另一家公司，该帐户可能仅具有标准用户权限...为此，我将现有的 usersinrole 表替换为直接与我的应用程序数据相关的另外 2 个表结构和现有的用户表。

这是另外 2 个表以及它们如何适应模式。

![附加表](../Images/382fa743cda99f3a3fb5aae5c1f872f8.png)

原则上，这正是我所需要的，但我需要修改自定义角色提供程序中的一些功能，以包含一个参数，以启用**每个公司**的用户角色检查。

在尝试进行这些修改并添加附加参数时，出现以下错误：

```
'Public Overrides Function IsUserInRole(username As String, rolename As String, [companyID As Integer = 0]) As Boolean' cannot override 'Public MustOverride Function IsUserInRole(username As String, roleName As String) As Boolean' because they differ by optional parameters. 
```

## 问题

这是有道理的，因为我的自定义角色提供程序继承自默认 RoleProvider 类，但我如何（如果可能的话）解决这个问题并将公司 ID 传递给所需的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T05:37:06.227

[`Overrides`](http://msdn.microsoft.com/en-us/library/k777kzw1.aspx)名为**“规则”**的部分中的文档表明：

> 匹配签名。
> 
> 此声明的签名必须与它覆盖的属性或过程的签名完全匹配。这意味着参数列表必须具有相同数量的参数，以相同的顺序，具有相同的数据类型。除了签名之外，覆盖声明还必须与以下内容完全匹配：
> 
> *   访问级别
> *   返回类型（如果有）

这种僵化可能意味着您必须使用备用名称（可能`IsUserInRoleForCompany`）编写方法，然后重构代码以调用该方法而不是`IsUserInRole`. 不理想，但无论如何您都必须重构每个调用以添加新参数。

作为替代方案，您可以考虑以允许您从缓存（或 cookie 或其他）中检索该值的方式缓存当前用户的 CompanyID，然后在`IsUserInRole`-- 否定您需要将其作为参数传递的情况下使用它，从而获得围绕刚性问题。

希望有帮助。

# php - 如何区分“0”和null？

> ID：14340697
> 
> 赞同：0
> 
> 时间：2013-01-15T15:12:02.573
> 
> 标签：php, null, comparison

我有一个包含一些足球比分（目标差异）的数据库。

**p12_score1**包含 3、-2、0 和 NULL

我要做的就是打印所有分数差异（包括0）并忽略没有值的行（mysql中的NULL）。但是 is_null 也将值 0 视为 null 并且不会打印它。

```
IF(!$p12_score1==NULL){
$equal[] = $p12_score1;
}
else {
echo "null";
}
print_r ($equal); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:14:32.833

[`is_null`](http://php.net/manual/en/function.is-null.php)不*认为*值`0`等于`null`。

您的代码`==`用于比较，这没有区别。使用[相同的运算符](http://php.net/manual/en/language.operators.comparison.php) `===`或`is_null`代替：

```
// One way to do it:
if(!$p12_score1 !== NULL)

// Another:
if(!is_null($p12_score1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:14:36.590

> 但是 is_null 也将值 0 视为 null 并且不会打印它。

没有。[http://codepad.org/mjiGfhTB](http://codepad.org/mjiGfhTB)

但是，您使用了 compareg 运算符

```
$p12_score1==NULL 
```

在这种情况下：在松散类型的语言`null`中等于`0`（和其他一些;））。但是，PHP 支持身份比较

```
$p12_score1===NULL 
```

旁注：`!$a == $b`有点难看。使用*真正的*“不等于” `!=`，或`!==`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:14:40.317

试试这个：

```
IF(!empty($p12_score1)){
$equal[] = $p12_score1;
}
else {
echo "null";
}
print_r ($equal); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T15:14:56.553

尝试

```
if($p12_score1 !== null) {
    $equal[] = $p12_score1;
} else {
echo "null";
}
print_r ($equal); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T15:15:12.860

如果您想在 PHP 而不是 sql 中执行此操作，则必须将代码更改为：

```
IF (!$p12_score1 === NULL) 
```

这样你检查它`$p12_score1`是否**完全**为空。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T15:34:26.130

该功能`is_null`应该可以工作。另一种选择是`is_int`。我都试过了，都正常工作。

# android - 未使用对话框主题

> ID：14340698
> 
> 赞同：0
> 
> 时间：2013-01-15T15:12:06.157
> 
> 标签：android, android-alertdialog

我创建了位于值/样式中的自定义对话框：

```
<style name="AppTheme" parent="android:Theme.Light" />

<style name="MyDialogTheme" parent="android:Theme.Dialog">

    <item name="android:windowBackground">@null</item>
    <item name="android:windowNoTitle">true</item>
</style> 
```

然后我希望使用它：

```
final Dialog dialogC = new Dialog(context,R.style.MyDialogTheme);
dialogC.setContentView(R.layout.confirm); 
```

我没有收到任何错误，但它仍然使用默认主题。当我将它用于我希望显示为对话框的活动时，这个主题非常有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:23:44.993

使用这个，它对我有用

```
dialog3=new Dialog(MainActivity.this);
        dialog3.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialog3.setContentView(R.layout.one_button_dialog4); 
```

# ruby-on-rails - XPath 嵌套节点

> ID：14340699
> 
> 赞同：0
> 
> 时间：2013-01-15T15:12:11.403
> 
> 标签：ruby-on-rails, ruby, xml, xpath, nokogiri

我需要循环并获取属于每个批次的更新，但是当我使用`xmldoc.xpath("//update")`它时，即使没有嵌套到批次中，它也只会给我所有的更新。如何获取仅嵌套在选定批次中的更新？

```
lots = xmldoc.xpath("//lot")

lots.each do |lot|
  @lot = Lot.new
  @lot.legacy_id = lot.at("legacy_id").text
  @lot.event = @event
  @lot.group = lot.at("group").text
  @lot.number = lot.at("number").text
  @lot.title = lot.at("title").text
  @lot.description = lot.at("description").text
  @lot.price = lot.at("price").text
  @lot.start_at = lot.at("start_at").text
  @lot.end_at = lot.at("end_at").text
  @lot.position = lot.at("position").text
  @lot.notes = lot.at("notes").text
  @lot.save

  updates = xmldoc.xpath("//update")
  updates.each do |update|
    @lot_update = LotUpdate.new
    @lot_update.save
  end
end 
```

XML:

```
<?xml version="1.0" encoding="UTF-8" ?>
<event>
    <legacy_id>54321</legacy_id>
    <lots>
        <lot>
            <legacy_id>12345</legacy_id>
            <number>1</number>
            <title>Big Cow</title>
            <description>A big cow</description>
            <position>1</position>
            <price>500</price>
            <start_at>2013-02-15 10:00:00</start_at>
            <end_at>2013-02-15 12:00:00</end_at>
            <group>1</group>
        </lot>
    </lots>
    <lots>
        <lot>
            <legacy_id>12346</legacy_id>
            <number>1</number>
            <title>Small Cow</title>
            <description>A small cow</description>
            <position>1</position>
            <price>500</price>
        </lot>
    </lots>
</event> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:29:17.497

你想要`lot.xpath('.//update')`。

# php - 使用.htaccess，如何将所有对javascript文件的调用从js文件夹重定向到js/min？

> ID：14340701
> 
> 赞同：1
> 
> 时间：2013-01-15T15:12:21.420
> 
> 标签：php, .htaccess

我创建了所有 javaScript 文件的缩小版本，并将它们放在 js/min 文件夹中。

在我的 HTML/PHP 代码中，我正在调用位于 js 文件夹中的原始文件，我应该在我的 .htaccess 文件中使用哪些正确指令来重定向所有调用以从 js 文件夹拉到 js/min ?

/js

/分钟/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:17:36.613

你可以使用类似的东西：

```
RewriteRule ^js/([\w.-]+)$ /js/min/$1 [L] 
```

这允许您的 js 文件名包含单词字符（az、0-9、_）、点和`-`字符。

# spring - GWT + Spring + Hiberante。完全没有理由

> ID：14340703
> 
> 赞同：0
> 
> 时间：2013-01-15T15:12:24.533
> 
> 标签：spring, gwt, requestfactory

通过执行以下示例，我正在学习如何将 Spring 与 GWT 和 RequestFactory 集成。我得到一个 NullPointerException ，我不知道为什么。谁能帮我？

这是我的代码：

```
@Repository
public class EmployeeDAO implements IEmployeeDAO {

@PersistenceContext
private EntityManager entity;

@Override
public Employee findById(Long id) {
    Query query = entity.createQuery("from Employee where id = :param");
    query.setParameter("param", id);
    query.setMaxResults(1);
    return (Employee) query.getSingleResult();
}

@Transactional(propagation = Propagation.REQUIRED)
@Override
public void save(Employee employee) {
    entity.merge(employee);
}

@Override
public void remove(Employee employee) {
    entity.remove(employee);
}

@SuppressWarnings("unchecked")
@Override
public List<Employee> getAllEmployee() {
    Query query = entity.createQuery("from Employee");
    return query.getResultList();
}
// ...
} 
```

和：

```
@Service(value = IEmployeeDAO.class, locator = DaoLocator.class)
public interface EmployeeRequestContext extends RequestContext {

Request<EmployeeProxy> findById(Long id);

Request<Void> save(EmployeeProxy employee);

Request<Void> remove(EmployeeProxy employee);

Request<List<EmployeeProxy>> getAllEmployee();

Request<EmployeeProxy> findOneByName(String name);

} 
```

和：

```
@ProxyFor(Employee.class)
public interface EmployeeProxy extends EntityProxy {

Long getId();

String getName();

String getSurname();

void setId(Long id);

void setName(String name);

void setSurname(String surname);

Long getVersion();

void setVersion(Long version);

} 
```

NullPointerException 在方法中被抛出 GWT 入口点：

```
protected void refresh() {      
    context = createFactory().employeeRequest();
    final EmployeeProxy ep = context.create(EmployeeProxy.class);
    ep.setName("Jan");
    ep.setSurname("Kowalski");
    ep.setVersion(new Long(0));
    context.save(ep).fire(new Receiver<Void>() {

        @Override
        public void onSuccess(Void response) {
            employeeList.add(ep);
        }

        @Override
        public void onFailure(ServerFailure error) {
            System.out.println("error podczas zapisu");
        }

    });

    context = createFactory().employeeRequest();
    context.getAllEmployee().fire(new Receiver<List<EmployeeProxy>>() {

        @Override
        public void onSuccess(List<EmployeeProxy> response) {
            System.out.println(" " + response); // NULL
        }

        @Override
        public void onFailure(ServerFailure error) {

        }

    });
    System.out.println("Bedziemy wyswietlac dane!");
    updateTable(employeeList);
} 
```

最后一个：创建工厂的方法：

```
private static EmployeeRequestFactory createFactory() {
    EmployeeRequestFactory factory = GWT.create(EmployeeRequestFactory.class);
    factory.initialize(new SimpleEventBus());
    return factory;
  } 
```

请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:57:08.253

请打印 NullPointerException 的堆栈跟踪。只有这样我们才能分析异常的原因。

# wpf - 在 WPF 应用程序中调用 web 服务后属性为 NULL

> ID：14340707
> 
> 赞同：0
> 
> 时间：2013-01-15T15:12:33.217
> 
> 标签：wpf, web-services, mvvm, callback

我的演示应用程序在 WPF 项目中实现了 MVVM 模式。ViewModel 通过服务代理（代理）调用远程 Web 服务，如下所示：

```
proxy.GetProjectList((sender, e) => this.ProjectList, username, password); 
```

`ProjectList`是 ViewModel 中定义的属性。它包含一个对象数组`CProject`。视图绑定到此属性以显示项目名称。基本上这工作正常。

但是，`NullReferenceException`如果我添加以下 if 语句，我会得到一个：

```
proxy.GetProjectList((sender, e) => this.ProjectList = e.Result, username, password);
if (ProjectList.Length > 0) doSomething(); 
```

调试应用程序显示该`ProjectList`属性是`null`在调用 Web 服务之后。我只是不知道为什么。

上面的webservice调用实现如下：

```
public void GetProjectList(EventHandler<getProjectListCompletedEventArgs> callback, string username, string password) {
  proxy.getProjectListCompleted += callback;
  proxy.getProjectListAsync(username, password);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:56:34.960

您正在使用该方法的异步版本。这就是为什么`ProjectList`在您的方法调用后属性不会立即填充的原因。

我建议您对同步和异步进行一些研究。

此外，要使其工作，请将您的 if 代码放在 lambda 表达式中（或者在服务调用完成时调用的单独回调方法中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:20:50.420

根据[HighCore](https://stackoverflow.com/users/643085/highcore)的提示，我将实现更改为以下内容。

**从客户端调用操作：**

```
proxy.GetProjectList(GetProjectListCallback, Username, SecurePassword); 
```

**之前添加回调方法：**

```
private void GetProjectListCallback(object sender, getProjectListCompletedEventArgs e) {
  ProjectList = e.Result;
  if (ProjectList != null) {
    if (ProjectList.Length > 0) doSomething();
  }
} 
```

**在单独的服务代理中调用实际的 Web 服务操作：**

```
public void GetProjectList(getProjectListCompletedEventArgs callback, string username, SecureString password) {
  proxy.getProjectListCompleted += callback;
  proxy.getProjectListAsync(username, password);
} 
```

我不知道这是否是一种好的编程风格，但它有效:-)

# java - 我可以在不使用泛型的情况下在 Java 中获取 entrySet 中的键列表吗？

> ID：14340709
> 
> 赞同：1
> 
> 时间：2013-01-15T15:12:40.840
> 
> 标签：java, generics, jmeter, beanshell

我在 JMeter 中使用 BeanShell。BeanShell 是一个不支持泛型的 Java 解释器。只要我输入一个尖括号（例如“<”），我的脚本就会被拒绝。

如果我可以使用泛型，我会执行以下操作：

```
for ( Map.Entry<String,Object> entry : vars.entrySet() ) {
    System.out.println( "  key = " + entry.getKey() );
} 
```

但是我无法创建变量条目，因为我不允许`Map.Entry<String,Object>`在我的脚本中声明。

所以 - 给定我的方法`entrySet()`和它返回的类型，`Set<Map.Entry<String,Object>>`有什么方法可以在不显式引用泛型类型的情况下获取（或迭代）这个集合中的键列表？

例如：

```
for ( String keys : vars.entrySet().somethingMagic() ) {
    System.out.println( "  key = " + key );
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T15:16:47.530

尝试：

```
for ( Map.Entry entry : vars.entrySet() ) {
    System.out.println( "  key = " + entry.getKey() );
} 
```

或者：

```
for ( String keys : vars.keySet()) {
    System.out.println( "  key = " + key );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T15:14:01.397

假设 vars 是一个 Map，你可以调用`vars.keySet()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T15:17:43.613

只需使用没有泛型的原始代码：

```
for ( Map.Entry entry : vars.entrySet() ) {
    System.out.println( "  key = " + entry.getKey() );
} 
```

可能会给你一个警告，但应该仍然有效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T15:24:55.337

在外部文件中使用 jsr223 + groovy。这更适合：

*   表现

*   保持最新（您可以使用 JAVA 6 语法）

...

在即将到来的 2.9 中，您将能够通过将其放入文本区域来进行缓存：

*   [http://mail-archives.apache.org/mod_mbox/jmeter-dev/201301.mbox/%3CCAH9fUpa_BWtcQDg3etUE5OuVj_QeOC0YdenkqTFhurxp%2B2P9MQ%40mail.gmail.com%3E](http://mail-archives.apache.org/mod_mbox/jmeter-dev/201301.mbox/%3CCAH9fUpa_BWtcQDg3etUE5OuVj_QeOC0YdenkqTFhurxp%2B2P9MQ%40mail.gmail.com%3E)

# javascript - CKEditor textarea 不显示

> ID：14340712
> 
> 赞同：0
> 
> 时间：2013-01-15T15:12:55.900
> 
> 标签：javascript, html, ckeditor

我目前正在测试 CKEditor wysiwyg，当我调用它时它加载正常，但是在 UI 中，它自己的 textarea，我输入文本的地方，没有显示出来，没有办法在该区域中输入，基本上看起来只显示CKEditor，仅此而已。

这是我用来测试的代码：

```
<form method="POST" action="index.php">
    <textarea name="message"></textarea>
</form>

<script type="text/javascript">
    CKEDITOR.replace('message');
</script> 
```

当我查看它时，它是这样显示的： ![CK编辑器](../Images/a2037481b91ca9e796668563babce963.png)

我做错了什么，还是坏了？

# matlab - 删除满足特定条件的单元格

> ID：14340713
> 
> 赞同：4
> 
> 时间：2013-01-15T15:12:57.853
> 
> 标签：matlab, matrix

我有一个单元格数组，每个单元格都是一个 n×n 矩阵。我想删除`inv(cell{i}'*cell{i})`警告矩阵接近奇异的单元格。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:19:29.777

一般来说，删除元素是容易的部分。如果`C`是您的数组，则可以通过以下方式删除向量中索引指定的单元格`idx`：

```
C(idx) = {}; 
```

关于您的具体问题，可以检查矩阵是否“几乎”单数[`rcond`](http://www.mathworks.com/help/matlab/ref/rcond.html)（如果结果接近于零，则可能是单数）。要将其应用于所有单元格，您可以通过`cellfun`以下方式使用：

```
idx = cellfun(@(x)(rcond(x' * x) < 1e-12), C); 
```

根据自己的喜好调整阈值。结果`idx`是一个逻辑数组，`1`s 位于奇异矩阵的位置。如上所示，用于`idx`删除这些元素。`C`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:20:46.220

创建一个检查您的状况的函数：

```
function state = CheckElement(element)

if ([condition])
   state = 1;
else
   state = 0;
end

end 
```

然后对所有单元格数组元素执行 cellfun ，如下所示：

```
indices = cellfun(@CheckElement,myCellArray);
cellArray(indices ) = []; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:20:05.257

假设您已经定义了一个`issingular`函数，您可以使用它`cellfun`来获取包含要删除的矩阵的单元格的索引。

```
c; % cell arry

singularIdx = cellfun((@x) issingular( inv(x' * x)), c);  %' added single quote for SO syntax

cFiltered = c(~singluarIdx); 
```

您可能需要编写自己的函数来检查奇异性，有关此问题的更多信息，请参见以下问题：[Fast method to check if a Matrix is single? （不可逆，det = 0）](https://stackoverflow.com/questions/10826816/fast-method-to-check-if-a-matrix-is-singular-non-invertible-det-0)

# powershell - 连续四场比赛

> ID：14340715
> 
> 赞同：0
> 
> 时间：2013-01-15T15:12:59.743
> 
> 标签：powershell

好的，现在我正在尝试使用 10x10 棋盘创建基本的四连胜游戏。（范围从A到J和1到10。）现在，游戏的目标是禁止玩家进入一个已经使用过的“坐标”，并且该坐标不能“浮动”。

例如：当玩家选择A9，但A1到A8还是空的时候，选择不存在。（就像你从柱子上掉下一枚硬币）

* * *

我想问的是，我如何验证以前的值没有被使用？我在考虑数组，但我不知道如何使它工作。

这是我编写的用于验证坐标的代码：

```
Function Validate-Move{

do{
    do {        
        $script:coordinateLetter = Read-host "Please enter a letter from A to J" 
        if($script:coordinateLetter.Length -gt 1){}
       } 
    while ($script:coordinateLetter.Length -gt 1)
  }
until($script:coordinateLetter -cmatch "[A-J]")

do{
  $script:coordinateNumber = Read-host "Please enter a number from 1 to 10!"

  }
until($script:coordinateNumber -match "^([1-9]|[1][0])$")

}
$playerMove = $coordinateLetter + $coordinateNumber
Write-host "You have chosen " -NoNewline; Write-host "$fullCoordinate" -for green 
```

在这段代码之后，我想检查该值是否可以使用。Jerry Lee Ford 的书在“三连冠”游戏中使用了以下方法：

```
if (($move -eq "A1") -and ($A1 -ne " ")) {$result = "Invalid"}
if (($move -eq "A2") -and ($A2 -ne " ")) {$result = "Invalid"}
if (($move -eq "A3") -and ($A3 -ne " ")) {$result = "Invalid"}
if (($move -eq "B1") -and ($B1 -ne " ")) {$result = "Invalid"} 
```

等等。但这意味着我必须制作 100 个变量（！）并为所有变量写一个检查？

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:32:05.083

为什么不使用多维数组来设置坐标并评估是否有值：

```
$m = New-Object 'object[,]' 10,10
$m[0,0] = "x"
$m[0,9] = "x"

[bool]$m[0,2]
False

[bool]$m[0,1]
True 
```

您需要将范围 A - J 映射到 0 - 9 因为数组是基于 0 的

用户输入后，您可以像这样检查插槽是否忙：

```
if ([bool]$m=[$coordinateLetter,$coordinateNumber]) #if busy
{ do this stuff..}
else
{ do something other.. } 
```

# ios - AFNetworking 完成块

> ID：14340718
> 
> 赞同：2
> 
> 时间：2013-01-15T15:13:02.367
> 
> 标签：ios, grand-central-dispatch, afnetworking, nsoperation

在我目前的设计中，我有一个代表文件夹结构的表格视图。当用户点击一个单元格时，`AFHTTPRequestOperation`会创建一个来下载文件。当单元格当前显示当前下载状态时下载文件：无/已下载/正在下载。

下载状态设置在`NSManagedObject`对应于每个单元的一个上。在我的下载完成块中，我将下载状态设置为“已下载”标志。这样做的问题是，如果用户从当前的 tableview 数据导航到另一个，竞争块将设置错误`NSManagedObject`- 它基于`NSIndex`.

简而言之，我想知道如何将对象与我的对象一起传递，`AFHTTPRequestOperation`以便在完成后可以对其执行操作。它可以像 int 或 string 一样简单，我可以`NSPredicate`根据这个值发出请求。

```
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
        [self.operations addObject:operation];
        [self.inProgressDownloads addObject:indexPath];
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *extension = [[self.selectedFile.name componentsSeparatedByString:@"."] lastObject];
        NSString *path = [[paths objectAtIndex:0] stringByAppendingPathComponent:[NSString stringWithFormat: @"%@.%@", self.selectedFile.item_id, extension]];
        operation.outputStream = [NSOutputStream outputStreamToFileAtPath:path append:NO];
        self.selectedFile.status = DOWNLOADING;
        [self.tableView beginUpdates];
        [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath, nil] withRowAnimation:UITableViewRowAnimationNone];
        [self.tableView endUpdates];

        [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
            NSLog(@"File downloaded to: %@", path);
            self.selectedFile.status = DOWNLOADED;
            self.selectedFile.is_stored = @YES;
            [self.tableView beginUpdates];
            [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath, nil] withRowAnimation:UITableViewRowAnimationNone];
            [self.tableView endUpdates];
        } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
            NSLog(@"Error: %@", error);
            self.selectedFile.status = DOWNLOAD_ERROR;
        }];

        [operation setDownloadProgressBlock:^(NSUInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead) {
            dispatch_async(dispatch_get_main_queue(), ^{
                float percent = (float)totalBytesRead / (float)totalBytesExpectedToRead;
                NSLog(@"totalBytesExpectedToRead %d", (int)(percent * 100));
            });
        }];

        [operation start]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:16:59.823

> 简而言之，我想知道如何将对象与我的 AFHTTPRequestOperation 一起传递，以便在完成时可以对其执行操作。它可以像 int 或 string 一样简单，我可以根据该值执行 NSPredicate 请求。

这就是闭包/块的力量发挥作用的地方。您不需要将任何特殊的东西传递到块中。您可以引用块中词法可见的任何对象，并且在运行块时可用。

来自[Apple 文档](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxOverview.html#//apple_ref/doc/uid/TP40007502-CH3-SW1)（特别是第 2 点）：

> 块通常代表小的、独立的代码片段。因此，它们作为一种封装可以同时执行的工作单元的方法，或者在集合中的项目上执行，或者作为另一个操作完成时的回调特别有用。
> 
> 块是传统回调函数的有用替代品，主要有两个原因：
> 
> 1.  它们允许您在调用点编写代码，稍后在方法实现的上下文中执行。
>     因此，块通常是框架方法的参数。
>     
>     
> 2.  它们允许访问局部变量。
>     您无需使用需要包含执行操作所需的所有上下文信息的数据结构的回调，而是直接访问局部变量。

如果我正确理解您要执行的操作，则应该可以：

```
TYPE_HERE* localSelectedFile = self.selectedFile;

    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSLog(@"File downloaded to: %@", path);
        localSelectedFile.status = DOWNLOADED;
        localSelectedFile.is_stored = @YES;
        [self.tableView beginUpdates];
        [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath, nil] withRowAnimation:UITableViewRowAnimationNone];
        [self.tableView endUpdates];
       ... 
```

执行时，我将 的值存储`self.selectedFile`到局部变量中`operation`；然后我将该局部变量用于块体。这是合法的（这就是我所指的闭包的力量：它们自己保存有关其执行上下文的信息）并将为您提供对您正在处理的对象的引用。

对于整体视图，您可能会觉得[这很有趣。](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW1)

# zend-framework - yii lucene 索引不存在

> ID：14340724
> 
> 赞同：0
> 
> 时间：2013-01-15T15:13:11.237
> 
> 标签：zend-framework, yii, lucene

我想在我的 webapp 上做 SearchBox。我非常关注教程：[SeachBox 教程](http://www.yiiframework.com/wiki/248/adding-search-to-yii-blog-example-using-zend-lucene/)，作者提到的所有内容都做了，但出现错误：

> 指定目录中不存在索引。

我的搜索控制器：

```
 <?php
class SearchController extends Controller
{
private $_indexFiles = 'runtime.search';

public function init(){
    Yii::import('application.vendors.*');
    require_once('Zend/Search/Lucene.php');
    parent::init(); 
}

/**
 * Search index creation
 */
public function actionCreate()
{
    $index = Zend_Search_Lucene::create($_indexFiles);
    $index = new Zend_Search_Lucene(Yii::getPathOfAlias('application.' . $this->_indexFiles), true);

    $posts = News::model()->findAll();
    foreach($news as $news){
        $doc = new Zend_Search_Lucene_Document();

        $doc->addField(Zend_Search_Lucene_Field::Text('title',
                                      CHtml::encode($news->name), 'utf-8')
        );

        $doc->addField(Zend_Search_Lucene_Field::Text('link',
                                        CHtml::encode($news->url)
                                            , 'utf-8')
        );   

        $doc->addField(Zend_Search_Lucene_Field::Text('content',
                                      CHtml::encode($news->description)
                                      , 'utf-8')
        );

        $index->addDocument($doc);
    }
    $index->commit();
    echo 'Lucene index created';
}

public function actionSearch()
{
    $this->layout='column2';
     if (($term = Yii::app()->getRequest()->getParam('q', null)) !== null) {
        $index = new Zend_Search_Lucene(Yii::getPathOfAlias('application.' . $this->_indexFiles));
        $results = $index->find($term);
        $query = Zend_Search_Lucene_Search_QueryParser::parse($term);       

        $this->render('search', compact('results', 'term', 'query'));
    }
} 
```

}

有什么想法可以解决这个问题吗？谢谢你的帮助。

编辑：好的，解决方案很明显。没有写索引是因为它没有真正声明......

这个**私有的 $_indexFiles = 'runtime.search';** 在 init 之前应该只是在 actionCreate 函数中 - 然后它就可以工作

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:55:55.697

你有一个错字：

```
$posts = News::model()->findAll();
foreach($news as $news){ 
```

应该：

```
$posts = News::model()->findAll();
foreach($posts as $news){ 
```

# database - 供应商代码 17002 连接到 SQLDeveloper

> ID：14340729
> 
> 赞同：53
> 
> 时间：2013-01-15T15:13:19.913
> 
> 标签：database, connect, oracle-sqldeveloper

我正在尝试使用 SQLDeveloper 连接到数据库，但出现以下错误：

```
An Error was Encountered performing The requested operation:

IO Error: Conection reset

Vendor code 17002. 
```

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-07-11T17:30:53.153

列出了可以纠正错误的步骤：

1.  按`Windows`+`R`
2.  输入`services.msc`和罢工`Enter`
3.  找到所有以`ora`启动这些服务开始的服务并等待！
4.  当您的服务器特定服务被初始化时（在我的情况下是`orcl`）
5.  现在运行`mysql`或您正在使用的任何东西并开始编码。P

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-26T08:25:51.623

我在 Windows 上使用 ORACLE 11G express 遇到了同样的问题。经过很长时间的等待，我得到了同样的错误信息。

我的解决方案是**确保 tnsnames.ora 中的主机名（通常不是“localhost”）和 sql developer 中的默认主机名（通常是“localhost”）相同**。您可以通过在 tnsnames.ora 中更改它来完成此操作，或者在 sql developer 中填写相同的内容。

哦，当然你需要重新启动所有的 oracle 服务（为了安全起见）。

希望能帮助到你。

* * *

我在另一台机器上再次遇到了类似的问题，但是这次上面的解决方案不起作用。经过一番尝试，我发现重新启动所有oracle相关服务可以解决问题。原来安装完成后，就可以进行连接了。不知何故，在多次重新启动计算机后，出现了问题。我将所有 Oracle 服务的开始时间更改为自动。一旦我无法连接，我会再次重新启动它们（核心服务应该在最后一次重新启动），并且工作正常。

一些文章说这可能是由于 MTS 问题。微软的问题。也许！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-23T06:36:20.977

我有同样的问题。我已经启动了我的 Oracle TNS 侦听器，然后它又可以正常工作了。

参见[LISTENER: TNS-12545 ... No such file or directory](https://community.oracle.com/thread/2296782)。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2013-04-03T09:52:38.303

在您的情况下，“供应商代码 17002”相当于 ORA-12541 错误：您的侦听器很可能已关闭，或者端口或服务名称不正确。从文档：

```
ORA-12541: TNS no listener 
```

原因：源存储库的侦听器尚未启动。

行动：在源存储库所在的机器上启动监听器。

# jquery - AJAX 发布后的金字塔 HTTP 重定向

> ID：14340741
> 
> 赞同：3
> 
> 时间：2013-01-15T15:14:01.233
> 
> 标签：jquery, python, ajax, pyramid, http-redirect

jquery 发布到服务器后是否可以重定向到另一个页面？用户登录后，我想返回一个 json 响应或重定向到另一个页面。我知道正在调用正确的视图可调用对象，因为我可以看到来自服务器的日志语句。

这是我的jQuery帖子：

```
function postToServer(url, params) {
    $.ajax({
        type: 'POST',
        url: url,
        data: JSON.stringify(params),
        contentType: 'application/json; charset=utf-8',
        statusCode: {
            200: function (data, textStatus, jqXHR) {
                return data;
            },
            201: function (data, textStatus, jqXHR) {
                return data;
            },
            400: function(data, textStatus, jqXHR) {
                return data;
            }
        }
    });
} 
```

这是非常基本的，似乎运作良好。每当我返回 json 时，它都会正确处理响应。

以下是我的看法：

```
#LOGIN
class LoginView(object):
    def __init__(self, request):
        self.request = request
        self.ctx = core.context()

    @view_config(route_name="login", request_method='GET')
    def get(self):
        template = "project:templates/login/login.mak"
        context = {}
        return render_to_response(template, context, request=self.request)

    @view_config(route_name="login", request_method='POST')
    def post(self):
        url = self.request.route_url('dashboard')
        print 'url: ' + url        
        #log user in and get credentials

        json = getJsonCredentialsObject()
        return Response('json', json)

#DASHBOARD
class DashboardView(object):
    def __init__(self, request):
        self.request = request
        self.ctx = core.context()

    @view_config(route_name="dashboard", request_method='GET')
    def get(self):
        print "in dashboard"
        template = "project:templates/dashboard/dashboard.mak"
        session = self.request.session
        context = {}
        return render_to_response(template, context, request=self.request) 
```

我希望登录类中的 post 方法来处理交互，但是当我尝试使用“return HTTPFound(location=self.request.route_url('/dashboard'))”在这里重定向时，什么也没有发生。我也无法从请求中获取 request.json_body 对象（它为空），但这是另一个问题。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:23:47.027

使用 AJAX 时，您的浏览器不会请求显示页面。

重定向只是将客户端指向不同的 URL 以获取响应，当使用 AJAX 执行此操作时，浏览器只是从新位置获取 AJAX 响应。如果您正在加载页面，则重定向意味着数据只是从另一个位置加载。

换句话说，对 AJAX 请求的响应永远不会改变浏览器页面本身。您需要改为使用 JavaScript 代码来执行此操作。从您的 POST 处理程序返回一个 URL，然后使用`window.location = newurl`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T15:16:45.010

我认为要实现您想要的，您不能将金字塔重定向返回到 ajax 调用。

返回带有状态和重定向 url 的 json 数据

然后在前端，您可以在成功时重定向用户

`window.location = http://redirecturlhere`

# jquery - 执行 jquery $.getJSON() 方法时出错

> ID：14340742
> 
> 赞同：0
> 
> 时间：2013-01-15T15:14:03.580
> 
> 标签：jquery, ajax, json

我正在开发从 JSON 响应加载数据的示例 jQuery 插件。

我不知道为什么，但它没有调用成功方法。它将使用 .error() 方法。谁可以帮我这个事？

`http://www.technicalkeeda.com/demos/load_scroll_content`返回正确的 JSON 响应。

```
<script>

    $(document).ready(function () { 

    var jqxhr = $.getJSON('http://www.technicalkeeda.com/demos/load_scroll_content', function(data) {           
        alert("success");
    },"json").success(function() { alert("second success"); })
    .error(function(xhr, testStatus, error) {

        alert('Error' + xhr.status);
        alert('Error' +xhr.response);
        alert('Error' +xhr.responseText);

    })
    .complete(function() { alert("complete"); });   
    jqxhr.complete(function(){ alert("second complete"); });

});
</script> 
```

服务响应

```
[[{"EMPLOYEE_ID":"1","EMPLOYEE_NAME":"Yashwant Chavan"},{"EMPLOYEE_ID":"2","EMPLOYEE_NAME":"Mahesh Diwan"},{"EMPLOYEE_ID":"3","EMPLOYEE_NAME":"Rajesh Limaye"},{"EMPLOYEE_ID":"4","EMPLOYEE_NAME":"Pankaj Patil"}]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:38:46.643

您需要添加[JSONP](http://api.jquery.com/jQuery.getJSON/)回调参数，如下所示：

```
$.getJSON('http://www.technicalkeeda.com/demos/load_scroll_content?callback=?'); 
```

jQuery ajax 函数将替换最后一个 ? 到像'jQuery12345'这样的随机字符串，响应应该使用回调参数值，如下所示：

```
jQuery12345([
  {"EMPLOYEE_ID":"1","EMPLOYEE_NAME":"Yashwant Chavan"},
  {"EMPLOYEE_ID":"2","EMPLOYEE_NAME":"Mahesh Diwan"}
]) 
```

您可以在此处阅读有关 JSON 的更多信息：

*   [http://www.json-p.org/](http://www.json-p.org/)
*   [http://remysharp.com/2007/10/08/what-is-jsonp/](http://remysharp.com/2007/10/08/what-is-jsonp/)

# xcode - xcode 4.5.2 升级问题

> ID：14340750
> 
> 赞同：0
> 
> 时间：2013-01-15T15:14:28.633
> 
> 标签：xcode, upgrade

使用以前版本的 xcode 非常适合我的 cocos2d 和 box2d 项目

但今天我将它升级（到 xcode 4.5.2），因为我的 iphone 设备有操作系统版本问题。

然后我所有的升级进度都完成了

我遇到了一些麻烦

当我在新的 xcode 中运行项目时，它开始抱怨我没有 Default.png

但我的项目中已经有 defalult.png

那么为什么会这样呢？我怎么能弄清楚...

我已经清理和重建，还删除了 default.png 并从原始武器库重新复制，但发生了同样的问题

（如你所料..我不擅长用英语解释我的观点..对不起..）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:29:58.667

我希望你的意思是：

缺少 - “Default-568h@2x.png”启动图像”

那是 iPhone 5 屏幕的启动图像。如果您单击警告，它将为您创建一个。

# jquery - jquery 图片库下一个/上一个问题

> ID：14340755
> 
> 赞同：0
> 
> 时间：2013-01-15T15:14:37.993
> 
> 标签：jquery

我的页面中有以下代码，我可以运行下一张图片点击，但上一张图片点击不起作用。单击“下一步”时，它向我显示 div1 - div2 - div3 但单击上一个时它没有显示任何内容。

我的 HTML：

```
<div id="slideshow">
    <img.prev>
    <img.next>
    <div1>
    <div2>
    <div3>
</div> 
```

```
$("#slideshow > div:gt(0)").hide();

// this works fine
$('.next').live('click', function() {
    $('#slideshow > div:first')
        .fadeOut(0)
        .next()
        .fadeIn(1000)
        .end()
        .appendTo('#slideshow');
}) ;

// this is not working
$('.prev').live('click',function(){
    $('#slideshow > div:first')
        .fadeOut(0)
        .prev()
        .fadeIn(1000)
        .end()
        .appendTo('#slideshow');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:21:03.937

感谢您的代码在做什么。在第一个示例中，会发生以下情况：

```
$('.next').live('click',function(){
  $('#slideshow > div:first')   //get first div, div1, in slideshow
 .fadeOut(0)                    //fade div1 out
 .next()                        //get the next div, div2
 .fadeIn(1000)                  //fade div2 in
 .end()                         //end
 .appendTo('#slideshow');       //append the original div, div1, to the end of the show
}) ; 
```

我看到的一个问题是您不断向幻灯片添加更多图像。这将导致大量的 DOM 元素。我认为你根本不想追加。

无论如何，您的代码在第二种情况下不起作用，因为......

```
$('.prev').live('click',function(){
 $('#slideshow > div:first')    //get first div, div1
 .fadeOut(0)                    //fade it out
 .prev()                        //previous is nothing because you already have the first one! This is no doubt why it breaks
 .fadeIn(1000)
 .end()
 .appendTo('#slideshow');       //again you are appending. Seems like a bad idea
}) ; 
```

如果我要这样做，我会改用类。未经测试，但看起来像这样。

```
<div id="slideshow">
    <img.prev>
    <img.next>
    <div1 class="active">
    <div2>
    <div3>
</div>

$('.next').live('click',function(){
  $('#slideshow > div.active')  //get active div
  .fadeOut(0)                    //fade out
  .removeClass('active')
  .next()                        //get the next div
  .fadeIn(1000)                  //fade it in
  .addClass('active');           //make new div the active one
}) ;

$('.next').live('click',function(){
  $('#slideshow > div.active')  //get active div
  .fadeOut(0)                    //fade out
  .removeClass('active')
  .prev()                        //get the prev div
  .fadeIn(1000)                  //fade it in
  .addClass('active');           //make new div the active one
}) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:25:39.787

`.prev`不起作用，因为根据定义，第一个元素不能有任何先前的兄弟姐妹。 `.next`之所以有效，是因为第一个孩子总是有三个元素——它似乎是循环的，因为您按预期将第一个 div 移动到末尾。为了`.prev`工作，您应该选择最后一个元素并将其添加到前面：

```
$("#slideshow > div:first").hide();
$("#slideshow > div:last").prependTo("#slideshow").fadeIn(1000); 
```

# jquery-mobile - 空时如何在 jQuery Mobile ListView 中显示消息？

> ID：14340761
> 
> 赞同：1
> 
> 时间：2013-01-15T15:15:04.403
> 
> 标签：jquery-mobile

我想在 jQuery 移动 ListView 没有元素时显示一条消息。例如：“没有元素。” 我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:10:29.530

如果您正在动态生成列表视图并且找不到要显示的行，为什么不简单地显示一行并显示一条消息呢？

```
<ul data-role="listview" data-inset="true">
    <li data-role="list-divider">Results</li>
    <li>No records found</li>
</ul> 
```

[http://jsbin.com/eyozis/1/edit](http://jsbin.com/eyozis/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T16:12:00.813

使用弹出窗口显示警告：

```
$('#index').live('pagebeforeshow',function(e,data){   
    if($('#test-list li').length === 0){
        setTimeout(function(){$('#MyFirstPopup').popup('open');},100);
    }
}); 
```

这是一个工作示例：http: [//jsfiddle.net/Gajotres/wy5R3/](http://jsfiddle.net/Gajotres/wy5R3/)

# android - android上的线程执行

> ID：14340764
> 
> 赞同：0
> 
> 时间：2013-01-15T15:15:10.457
> 
> 标签：android, multithreading

我认为这是一个初学者（我）的问题，那么对你们来说很容易回答。

我有这个方法：

```
public void onQuantityTextChange(final int value)
{       
    new Thread(new Runnable() {
        public void run() {
            addProductToCart(value);

            view.post(new Runnable() {
                public void run() {
                    updateTotals();
                }
            });

        }
    }).start();
} 
```

我的问题是：这种和平的代码：

```
view.post(new Runnable() {
 public void run() {
  updateTotals();
} 
```

仅当此`addProductToCart(value);`方法执行（完成）时才执行？还是将`AsyncTask`s 与`doInBackground()`and一起使用更安全`onPostExecute()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:18:24.250

它总是在以下之后执行：`addProductToCart(value);` 但是如果该函数启动一个`Thread`或`AsyncThread`类似的函数，那么该函数将在该任务完成之前返回。

总结一下：没有内容，谁也回答不了`addProductToCart`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:23:46.610

这在很大程度上取决于您的方法是否`addProductToCart(value)`启动了它自己的另一个线程。如果是这样，则无法保证线程将按照系统认为合适的方式开始和结束。`view.post(...)`如果没有，那么在该线程完成之前您不会调用。

根据您要完成的工作，需要注意的另一件事是内部`view.post(...)`方法不能保证立即运行。该方法所做的是将`Runnable`对象放入消息队列中。这意味着，在消息队列中的其他元素首先执行之前，此可运行对象不会执行。其次，消息队列可以随时运行，这意味着即使这是队列中的第一个，它*最终*`Runnable`也会启动，但不一定立即启动。

# heroku - Toggle 对 Heroku 上的工作人员进行 New Relic 监控

> ID：14340765
> 
> 赞同：1
> 
> 时间：2013-01-15T15:15:11.143
> 
> 标签：heroku, newrelic

有没有办法为 Heroku 上的工作人员选择性地启用/禁用 New Relic？New Relic 对我们的 Web 应用程序非常有用，但我们不能让它一直监控我们的工作人员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T23:16:27.280

config/newrelic.yml 使用 ERB 处理，因此您可以在其中执行以下操作：

```
monitor_mode: <%= ...some logic to return true or false... %> 
```

请注意，“monitor_mode”在 config/newrelic.yml 中多次指定，因此请确保更新适当的位置（查看文件底部）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-14T15:52:09.307

尚未测试，但我认为这是方法：

```
# Procfile

workerA: env NEW_RELIC_AGENT_ENABLED=$WORKER_A_NEW_RELIC_AGENT bin/your_process 
```

然后，启用：

```
heroku config:set WORKER_A_NEW_RELIC_AGENT=true
heroku restart 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T21:25:20.677

您可以根据需要在 Heroku 上配置和取消配置附加组件。加载项费用按比例计算，因此您只需为加载项配置到您的应用程序的实际时间付费。

如果您有很多 dynos，您可能还想与 New Relic 联系，看看他们是否可以通过折扣或其他方式帮助您。

# ios - 使用 UIActivityViewController 更改图标位置

> ID：14340767
> 
> 赞同：5
> 
> 时间：2013-01-15T15:15:17.160
> 
> 标签：ios, ios6, icons, uiactivityviewcontroller

我正在使用 UIActivityViewController。我可以更改图标出现位置的顺序吗？

因为我找不到办法，所以它们总是以相同的顺序出现（邮件、Facebook、Twitter，...），我必须更改顺序。

谢谢你。

# php - 如何处理大数组？

> ID：14340768
> 
> 赞同：1
> 
> 时间：2013-01-15T15:15:23.057
> 
> 标签：php, arrays, insert, recursive-datastructures

我正在用 PHP 开发一个应用程序，我需要为此实现一个大文件处理程序。读写文件不是问题，但检查文件内容是个问题。

我构建了一个递归函数来检查一个变量是否已经在同一个文档中使用。

```
private function val_id($id){
    if(!isset($this->id)){
            $this->id = array();
        }
    if(in_array($id, $this->id)){
        return $this->val_id($id+1);
    }else{
        $this->id[] = $id;
        return $id;
    }
} 
```

当 in_array($id,$this->id) 返回 FALSE 时，$id 将被添加到 $this->id（包含所有使用的 id 的数组）并返回一个有效的 id。

当返回 TRUE 时，它返回与参数 $id+1 相同的函数

由于我们一次要讨论超过 300000 条记录，PHP 不会不能存储这么大的数组。当这个数组变得太大时，它似乎停止在我生成的文档中写入行。但我没有收到任何这样的错误消息。

由于生成的文档是具有多行 INSERT 的 SQL 文件，因此另一个解决方案可能是检查 id 是否已存在于数据库中。MySQL 可以捕获这些异常并通过将 1 添加到 id 来再次尝试这些条目吗？如何？

你认为我需要如何解决这个问题？

亲切的问候，

沃特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:19:18.100

1.  使错误消息出现。
2.  增加`memory_limit`
3.  而不是值将参数存储在键中-因此您可以使用`isset($array[$this->id])`而不是`in_array()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:20:33.117

使用[INSERT IGNORE](http://dev.mysql.com/doc/refman/5.1/en/insert.html)禁用 mysql 中的重复键检查并删除 php 中的键检查。你的陈述可能看起来像这样。

```
INSERT IGNORE INTO tbl_name SET key1 = 1, col1 = 'value1' 
```

如果您想始终将 1 添加到 id，您可以使用[ON DUPLICATE KEY](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)将您的密钥加一：

```
INSERT INTO table (a,b,c) VALUES (1,2,3)
    ON DUPLICATE KEY UPDATE c=c+1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:27:11.157

为什么 30.000 条记录会成为问题？标准 PHP 数组中的每条记录占用 144 个字节，对于 30.000，这意味着 4218,75 kByte。没什么大不了的。

否则，您的常识使用数组键的想法值得考虑，因为它更快。

# python - Django South - 从 Python 代码迁移

> ID：14340769
> 
> 赞同：3
> 
> 时间：2013-01-15T15:15:32.160
> 
> 标签：python, django, django-south

是否可以从 Python 代码运行迁移？我不想（实际上我不能）使用终端命令：

```
venv/bin/python src/manage.py migrate myapp 
```

我需要从 Python 代码运行它，作为我在动态创建的数据库上的业务逻辑的一部分。

这是我到目前为止所拥有的：

```
db_name = uuid.uuid4()
from settings.local import DATABASES
new_database = {}
new_database['ENGINE'] = 'django.db.backends.mysql'
new_database['NAME'] = db_name
new_database['USER'] = DATABASES["default"]["USER"]
new_database['PASSWORD'] = DATABASES["default"]["PASSWORD"]
new_database['HOST'] = DATABASES["default"]["HOST"]
new_database['PORT'] = DATABASES["default"]["PORT"]
import settings
database_id = str(uuid.uuid4())
settings.DATABASES[database_id] = new_database
from django.core.management import call_command
call_command('migrate', 'catalogue', database=database_id) 
```

但我得到：

```
KeyError: '28a4eb10-91e4-4de8-8a74-15d72f8245ef' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T15:17:46.627

是的你可以。假设它是从 Django 应用程序中调用的：

```
from django.core.management import call_command

call_command('migrate', 'myapp') 
```

# c - 如果有人向我解释，C 中的代码不明确将不胜感激

> ID：14340776
> 
> 赞同：-4
> 
> 时间：2013-01-15T15:15:40.887
> 
> 标签：c, arrays, string, struct

```
#ifndef HW4Q2_H_INCLUDED
#define HW4Q2_H_INCLUDED
#define MAX_WORD_LEN 10

struct dict{
    int len;
    char (*dict0)[MAX_WORD_LEN+1];
    char (*dict1)[MAX_WORD_LEN+1];
};

void translate(char* currWord, char* newWord, struct dict* myDict, int lang);
void createDict(struct dict* myDict);
void destroyDict(struct dict* myDict);

#endif 
```

我在c中有作业，我们有这个头文件..但是“char (*dict0)[MAX_WORD_LEN+1];”是什么意思？方法？我以前从未见过这个..有没有等效的方法来写它？请解释一下！我绝望了 :( 10q 伙计们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:18:27.873

您应该使用[cdecl](http://www.cdecl.org/)，它有助于解析这样的事情。

如果你用一个数字代替`MAX_WORD_LEN+1`表达式（例如 11），它会说：

> 将 dict0 声明为指向 char 数组 11 的指针

这就是该代码的含义；它声明`dict0`为指向`char`大小为 11 的数组的指针`MAX_WORD_LEN + 1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T15:18:13.540

```
char (*dict0)[MAX_WORD_LEN + 1]; 
```

此代码声明`dict0`为指向大小为 char 数组的指针`MAX_WORD_LEN + 1`。

此外，如果您没有 C 声明解析器，例如`cdecl`，您仍然可以使用[这个简单的经验法则](http://c-faq.com/decl/spiral.anderson.html)来理解复杂类型。

# android - 在不使用 android adt 插件的情况下创建 android 应用程序

> ID：14340793
> 
> 赞同：0
> 
> 时间：2013-01-15T15:16:35.640
> 
> 标签：android, plugins, command-line, adt

是否可以在不使用 ADT 插件的情况下创建本机 android 应用程序。使用记事本创建 android 应用程序并使用命令行编译和构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:20:39.900

是的，您只能使用 SDK 工具。查看[从命令行管理项目](http://developer.android.com/tools/projects/projects-cmdline.html)。

# android - 使用服务器名称的真实设备上的 Android UnresolvedHostException

> ID：14340794
> 
> 赞同：0
> 
> 时间：2013-01-15T15:16:40.100
> 
> 标签：android, web-services, dns, httpwebrequest

您好我正在开发一个通过 VPN 连接连接到合作网络的应用程序。
现在我有以下问题：

如果我尝试使用服务器名称从真实设备向位于网络中的服务器发送 HTTP 请求，logcat 会显示**UnresolvedHostException**。
如果我使用服务器的 IP，则一切正常。

*在模拟器上，问题根本没有出现，一切正常。*

所以我在我的设备的浏览器上测试了这个，浏览器似乎有同样的问题，使用IP，浏览器可以访问服务器，但是如果我使用服务器名称，浏览器返回404错误。

有没有人知道为什么会出现这个问题，或者可以给我一个提示如何解决这个问题，我已经搜索了网络，但在任何地方都找不到合适的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:50:29.060

如果有人遇到同样的问题，**请关闭您的设备**稍等片刻，使其完全断电，然后重新启动它，这样可以解决问题并为您节省大量时间、压力和愤怒，似乎他们是系统中的错误（至少在某些 API 版本上）

# sql-server - 具有 CLR 集成表功能的高效交叉应用

> ID：14340795
> 
> 赞同：3
> 
> 时间：2013-01-15T15:16:40.460
> 
> 标签：sql-server, sqlclr, cross-apply

在 SQL Server 中，我有一个基于 CLR 集成的表值函数 GetArchiveImages。我这样称呼它：

```
SELECT ...
FROM Items
CROSS APPLY GetArchiveImages(Items.ID) AS archiveimages
WHERE ... 
```

问题是对函数的每个单独调用都有开销。

如果它可以一次与整个表连接，开销将非常小，但由于它为每一行调用一次，所以开销会随着行数的增加而增加。

我不使用存储过程，因为存储过程返回的表不能与任何东西连接（据我所知）。

有没有一种有效的方法将表与存储过程或函数的结果批量连接，而不是逐行连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:24:31.017

由于 GetArchiveImages 的结果取决于 Items.ID SQL Server 必须为每个项目调用该函数，否则您将无法获得正确的结果。

SQL Server 唯一可以“分解”的函数是 T-SQL 内联表值函数。因此，如果您可以将 CLR 重写为 ITVF，您将获得更好的性能。

以我的经验，调用 CLR 函数的开销并没有那么大。您更有可能在查询的其他地方遇到问题。例如，SQL Server 不知道该函数将返回多少行，只是假设它是一（对于每个调用）。这可能会导致在优化过程中其他地方做出错误的决策。

* * *

更新：

SQL Server 不允许在 CLR 类中保留静态非常量数据。有一些方法可以欺骗系统，例如通过创建静态最终集合对象（您可以从静态集合中添加和删除项目），但是，出于稳定性原因，我建议不要这样做。

在您的情况下，创建一个使用某种（数据库或文件系统）触发器或按计划自动刷新的缓存表可能是有意义的。您可以直接加入该表，而不是调用该函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-31T20:01:08.797

如果该`GetArchiveImages()`函数不需要在多个查询中使用，或者至少不需要在类似查询之外使用，则可以在此切换 Outer 和 Inner 方面：`SELECT fields FROM [Items] WHERE ...`在 SQLCLR TVF 中做 main。并使其成为流媒体 TVF。

所需的基本结构是：

1.  将 SqlDataRecord 类型的变量定义为要从 [Items] 返回的所有字段以及当前`GetArchiveImages()`函数返回的其他字段。

2.  阅读“文件系统中的几个文件”（取自@Sebastian Meine 回答的第一条评论）

3.  `"Trusted_Connection = true; Enlist = false;"`使用ConnectionString打开一个 SqlConnection 。

4.  执行主程序`SELECT fields FROM [Items] {optional WHERE}`。如果此时可以缩小某些行的范围，请填写`WHERE`. 您甚至可以将值传递给函数以传递给 WHERE 子句。

5.  循环遍历`SqlDataRecord`：

    1.  填写`SqlDataRecord`该行的变量
    2.  获取当前`GetArchiveImages()`函数正在获取的相关项`[Items].[ItemID]`
    3.  称呼`yield return;`
6.  关上`SqlConnection`

7.  处理`SqlDataReader`、`SqlCommand`和`SqlConnection`。

8.  关闭在步骤 2 中打开的所有文件（如果无法在此过程的早期关闭它们）。

# jquery - Jquery .click 多个 div

> ID：14340800
> 
> 赞同：0
> 
> 时间：2013-01-15T15:16:43.643
> 
> 标签：jquery, html, css, click

我正在一个带有多个锚点的页面中工作。单击时，每个锚点都有单独的内容要弹出。我的功能可以正常工作，但是当我单击不同的锚点时，它会从第一个锚点重复相同的内容。我需要让每个锚点在弹出窗口中显示相应的内容。下面是我的代码。先感谢您。

```
<script>
$(document).ready(function() {
$('a.bio, a.bio2').click(function() {

//Getting the variable's value from a link 

var loginBox = $(this).attr('href');

//Fade in the Popup

$(loginBox).fadeIn(300);

//Set the center alignment padding + border see css style

var popMargTop = ($(loginBox).height() + 24) / 2; 
var popMargLeft = ($(loginBox).width() + 24) / 2; 
$(loginBox).css({ 
'margin-top' : -popMargTop,
'margin-left' : -popMargLeft
});

// Add the mask to body
$('body').append('<div id="mask"></div>');
$('#mask').fadeIn(300);
return false;
});

// When clicking on the button close or the mask layer the popup closed

$('a.close, #mask').live('click', function() { 
$('#mask , .login-popup').fadeOut(300 , function() {
$('#mask').remove();  
}); 
return false;
});
});
</script> 
```

的HTML

```
<a class="bio" href="#login-box">READ BIO &gt;&gt;</a>
     <div class="login-popup" id="login-box">
          <div id="popupimage">
          <h2>This is image 1</h2>
          </div></div>

<a class="bio2" href="#login-box">READ BIO &gt;&gt;</a></div>
     <div class="login-popup" id="login-box">
          <div id="popupimage">
          <h2>This is image 2</h2>
          </div></div> 
```

CSS

```
.login-popup {
background: none repeat scroll 0 0 #585858;
display: none;
float: left;
font-size: 1.2em;
height: 350px;
left: 50%;
padding: 20px;
position: fixed;
top: 50%;
width: 500px;
z-index: 999999999;
color:#FFF;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:21:39.653

两个内容的 id 相同。一个 id 在页面中必须是唯一的才能工作。当代码显示内容时，它将显示第一个具有该 ID 的内容。

更改内容元素之一的 id，使它们不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:21:53.183

一个 html 文档可以有一个带有 id 的元素。您有两个带有登录框 ID 的 div。您必须为每个人指定唯一的 ID：

```
<a class="bio" href="#login-box-1">READ BIO &gt;&gt;</a>
     <div class="login-popup" id="login-box-1">
          <div id="popupimage-2">
          <h2>This is image 1</h2>
          </div></div>

<a class="bio2" href="#login-box-2">READ BIO &gt;&gt;</a></div>
     <div class="login-popup" id="login-box-2">
          <div id="popupimage-2">
          <h2>This is image 2</h2>
          </div></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T15:21:58.373

您的代码存在问题，这**两个 div 都具有相同的 id 登录框。**

您需要更改它们的 id ，如下所示为您工作

```
<a class="bio" href="#login-box-1">READ BIO &gt;&gt;</a>
     <div class="login-popup" id="login-box1">
          <div id="popupimage-2">
          <h2>This is image 1</h2>
          </div></div>

<a class="bio2" href="#login-box-2">READ BIO &gt;&gt;</a></div>
     <div class="login-popup" id="login-box22">
          <div id="popupimage-2">
          <h2>This is image 2</h2>
          </div></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T15:26:47.783

您需要更改您的html。您可以根据需要多次重复课程，但不能重复 id。id 在你的 html 中只能存在一次。

*   如果您有*class="bio"*和*class="bio2"*，请分别更改为*id="bio"*和*id="bio2"*。
*   Id 的“登录框”和“弹出图像”应更改为类。

在将函数定义为“click”的脚本中，创建一个 if 表达式来检查链接是否具有 id bio 或 bio2。

```
$('.link').on('click', function() {
    if ($(this).attr('id') === 'bio') {
        // Do something
    } else if ($(this).attr('id') === 'bio2') {
        // Do something else
    }
} 
```

# visual-studio-2010 - Visual Studio 2010 中的选择性缩进

> ID：14340805
> 
> 赞同：0
> 
> 时间：2013-01-15T15:16:52.997
> 
> 标签：visual-studio-2010, indentation, auto-indent

有没有办法告诉 VS2010**在方法内部**自动识别行？因为我通常每个文件只有一个命名空间/类，所以我觉得所有这些缩进都是浪费空间。

如果可能的话，我下面的方法命令将在 4 个字符之后开始，而不是在 12 个字符之后。这样我会在我的屏幕上获得 +8 个可见字符（我尝试在 100 个字符后换行）

![缩进](../Images/1bd2d1d0c911709f0f72148664e28167.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:46:09.697

我还没有尝试过，但它可能会有所帮助[http://therightstuff.de/CommentView,guid,ef519229-154d-4ab9-85a3-dc5c18079bd6.aspx](http://therightstuff.de/CommentView,guid,ef519229-154d-4ab9-85a3-dc5c18079bd6.aspx)

# android - MvvmCross AutoView 动态对话框部分

> ID：14340810
> 
> 赞同：3
> 
> 时间：2013-01-15T15:17:04.623
> 
> 标签：android, dialog, touch, mvvmcross

我正在实现一个对话框视图，`AutoViews`使用`MVVMCross.AutoView`.

有谁知道是否可以创建动态部分。例如，能够将 Section 的 Elements 列表绑定到 ViewModel 中的通知列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:41:29.907

您正在寻找的内容当前未在 AutoViews 的 Dialog 部分中实现 - 就像它未在源 MonoTouch.Dialog 或 MonoDroid.Dialog 中实现一样

将 INotifyCollectionChanged-aware 部分添加到 Dialog 肯定是可能的，但是将它合并到 Dialog 核心代码中需要一些技巧和时间。

但是，如果您的列表 (ObservableCollection) 是独立的 - 如果它不依赖于坐在更大的对话框中 - 那么 AutoViews 的列表部分应该适合您。

您可以看到在[https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CustomerManagement/CustomerManagement%20-%20AutoViews/CustomerManagement/ViewModels/CustomerListViewModel.cs](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CustomerManagement/CustomerManagement%20-%20AutoViews/CustomerManagement/ViewModels/CustomerListViewModel.cs)中实现的列表 AutoView - 这适用于并且`IObservableCollection`似乎随着您添加/删除客户而更新。

* * *

请注意，AutoViews 仍然非常“年轻”——在我们开始让更多平台工作之前，它会一直如此——有人致力于 WP 和 WinRT Dialog 的实现，但这些都是“业余时间”项目，人们很忙！

# routing - 直接从数据库中获取 osm 数据进行 pgrouting

> ID：14340812
> 
> 赞同：1
> 
> 时间：2013-01-15T15:17:13.533
> 
> 标签：routing, postgis, openstreetmap, pgrouting

我正在创建一个需要路线查找器的应用程序。

我将 OSM 数据存储在 PostGIS 数据库中，目前这些数据可能由我的应用程序操作，例如可以移动、添加或删除道路。

我正在研究 pgRouting 但它似乎需要 OSM 数据为 .osm 格式或形状文件。

pgRouting 是否可以直接访问我的 OSM 表来构建它的图表？如果没有，还有其他路由系统可以吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:29:21.577

检查这个[页面](http://workshop.pgrouting.org/)。在第 6 节中，您将看到 pgrouting 与 SQL 查询一起工作。它不能直接处理 osm 或 shape 文件，它们只是用于导入的数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:29:39.100

您必须确保使用 osm2pgrouting 工具将 OSM 数据加载到数据库中。此工具创建一个 sql 命令，您可以将其加载到数据库中。

[在这里](http://pgrouting.org/docs/tools/osm2pgrouting.html)你可以找到一些关于它的信息。

# mysql - 按两列查找并删除重复行

> ID：14340820
> 
> 赞同：13
> 
> 时间：2013-01-15T15:17:38.210
> 
> 标签：mysql, sql, indexing, duplicate-removal

我阅读了所有相关的重复问题/答案，我发现这是最相关的答案：

```
INSERT IGNORE INTO temp(MAILING_ID,REPORT_ID) 
SELECT DISTINCT MAILING_ID,REPORT_IDFROM table_1
; 
```

问题是我想删除 col1 和 col2 的重复项，但还想将 table_1 的所有其他字段包含到插入中。

我尝试以这种方式添加所有相关列：

```
INSERT IGNORE INTO temp(M_ID,MAILING_ID,REPORT_ID,
MAILING_NAME,VISIBILITY,EXPORTED) SELECT DISTINCT  
M_ID,MAILING_ID,REPORT_ID,MAILING_NAME,VISIBILITY,
EXPORTED FROM table_1
;

M_ID(int,primary),MAILING_ID(int),REPORT_ID(int),
MAILING_NAME(varchar),VISIBILITY(varchar),EXPORTED(int) 
```

但它将所有行插入临时（包括重复项）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-03-13T20:20:35.030

删除多列重复行的最佳方法是最简单的方法：

**添加唯一索引：**

```
ALTER IGNORE TABLE your_table ADD UNIQUE (field1,field2,field3); 
```

上面的 IGNORE 确保只保留第一个找到的行，其余的被丢弃。

（如果您需要未来的重复和/或知道它们不会再次发生，则可以删除该索引）。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2019-01-30T18:40:57.037

这适用于任何版本的 MySQL，包括 5.7+。它还`You can't specify target table 'my_table' for update in FROM clause`通过使用双嵌套子查询来处理错误。它只删除一个重复行（后一个），因此如果您有 3 个或更多重复行，则可以多次运行查询。它*从不*删除唯一的行。

```
DELETE FROM my_table
WHERE id IN (
  SELECT calc_id FROM (
    SELECT MAX(id) AS calc_id
    FROM my_table
    GROUP BY identField1, identField2
    HAVING COUNT(id) > 1
  ) temp
) 
```

我需要这个查询，因为我想在两列上添加一个 UNIQUE 索引，但是我需要先丢弃一些重复的行。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-07-27T06:50:31.660

**对于 Mysql：**

```
DELETE t1 FROM yourtable t1 
  INNER JOIN yourtable t2 WHERE t1.id < t2.id 
    AND t1.identField1 = t2.identField1 
    AND t1.identField2 = t2.identField2; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-15T15:51:23.750

您首先需要通过使用having子句对两个字段进行分组来查找重复项。

```
 Select identField1, identField2, count(*) FROM yourTable
        GROUP BY identField1, identField2
          HAVING count(*) >1 
```

如果这返回了您想要的内容，您可以将其用作子查询并

```
 DELETE FROM yourTable WHERE field in (Select identField1, identField2, count(*) FROM yourTable
        GROUP BY identField1, identField2
          HAVING count(*) >1 ) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-23T10:23:22.480

**注意：此解决方案是一种替代的老派解决方案。**

* * *

如果你不能达到你想要的，那么你可以试试我的“oldschool”方法：

首先，运行此查询以获取重复记录：

```
select   column1,
         column2,
         count(*)
from     table
group by column1,
         column2
having   count(*) > 1
order by count(*) desc 
```

之后，选择这些结果并将它们粘贴到记事本++中：

[![选择查询](../Images/dd3712e65b50d26e1e635ecc2ed2d829.png)](https://i.stack.imgur.com/782hj.png) [![粘贴到记事本上](../Images/f0ea76a6f8b33c16a989fab116a9c478.png)](https://i.stack.imgur.com/m8csS.png)

现在通过使用notepad++的查找和替换特性替换它们；首先“删除”然后“插入”这样的查询（从现在开始，出于安全原因，我的值将是 AAAA）。

特别注意：请在 notepad++ 中的最后一行数据的末尾再创建一个新行，因为正则表达式匹配每行末尾的 '\r\n'：

[![在此处输入图像描述](../Images/de5927b1c3c87067f4cd695007c55a0d.png)](https://i.stack.imgur.com/mKEhl.png)

查找什么正则表达式：`\D*(\d+)\D*(\d+)\D*\r\n`

替换为字符串：`delete from table where column1 = $1 and column2 = $2; insert into table set column1 = $1, column2 = $2;\r\n`

现在最后，将这些查询粘贴到 MySQL Workbench 的查询控制台并执行。您只会看到每条重复记录出现一次。

[![在此处输入图像描述](../Images/d6bb55ec61552a6a4d1cf876d3d24d86.png)](https://i.stack.imgur.com/QSGEE.png)

此答案适用于仅由两列没有 ID 的关系表。我认为您可以将其应用于您的情况。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-30T09:26:48.177

您始终可以通过将两个唯一字段分组来获取主 ID

`select count(*), id as count from table group by col a, col b having count(*)>1;`

接着

`delete from table where id in ( select count(*), id as count from table group by col a, col b having count(*)>1) limit maxlimit;`

你也可以使用`max()`代替`limit`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-09T22:15:19.850

如果您在 select 子句 ex: 中选择多个列，则在大型数据集中 `select x,y,z from table1`。并且要求是基于两列删除重复项：从上面的示例中让 y,z 然后您可以使用下面的而不是使用“分组依据”和“子查询”的组合，这在性能上很差：

```
select x,y,z 
from (
select x,y,z , row_number() over (partition by y,z) as index_num
from table1) main
where main.index_num=1 
```

# python - 将 bash 参数传递给 python 脚本

> ID：14340822
> 
> 赞同：18
> 
> 时间：2013-01-15T15:17:41.670
> 
> 标签：python, linux, bash, shell, debian

我正在尝试创建一个 bash 脚本，它将自己的参数传递给 python 脚本。我希望它像这样工作。

如果我这样运行它：

```
script.sh latest 
```

然后在 bash 脚本中，它运行一个带有“最新”参数的 python 脚本，如下所示：

```
python script.py latest 
```

同样，如果使用参数 123 运行 bash 脚本，则 python 脚本如下：

```
python script.py 123 
```

谁能帮我理解如何做到这一点？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-15T15:20:45.537

在这种情况下，诀窍是传递您拥有的任何参数，包括没有参数的情况，并保留原始命令行中存在的任何分组。

因此，您希望这三种情况起作用：

```
script.sh                       # no args
script.sh how now               # some number
script.sh "how now" "brown cow" # args that need to stay quoted 
```

没有真正的自然方法可以做到这一点，因为 shell 是一种宏语言，所以他们添加了一些神奇的语法，只适用于 DTRT。

```
#!/bin/sh

python script.py "$@" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-15T15:28:59.157

在 pythonscript中`script.py`用于`getopt.getopt(args, options[, long_options])`获取参数。

例子：

```
import getopt, sys

def main():
    try:
        opts, args = getopt.getopt(sys.argv[1:], "ho:v", ["help", "output="])
    except getopt.GetoptError as err:
        # print help information and exit:
        print str(err) # will print something like "option -a not recognized"
        usage()
        sys.exit(2)
    output = None
    verbose = False
    for o, a in opts:
        if o == "-v":
            verbose = True
        elif o in ("-h", "--help"):
            usage()
            sys.exit()
        elif o in ("-o", "--output"):
            output = a
        else:
            assert False, "unhandled option"
    # ...

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-15T15:44:45.120

一个非常好的内置解析器是 argparse。哟可以如下使用它：

```
 import argparse

  parser = argparse.ArgumentParser(description='Process some integers.')
  parser.add_argument('integers', metavar='N', type=int, nargs='+',
                   help='an integer for the accumulator')
  parser.add_argument('--sum', dest='accumulate', action='store_const',
                     const=sum, default=max,
                   help='sum the integers (default: find the max)')

  args = parser.parse_args()
  print(args.accumulate(args.integers)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T15:21:06.833

在 bash 中，传递给脚本的参数使用`$#`符号访问（# 是一个数字。使用 $# 完全一样应该给你传递的参数的数量）。因此，如果您想传递参数：

调用脚本：

```
`#script.sh argument` 
```

在脚本中：

```
python script.py "$1" 
```

# c# - 实体框架代码优先，不同上下文/数据库之间的导航属性

> ID：14340830
> 
> 赞同：2
> 
> 时间：2013-01-15T15:17:50.107
> 
> 标签：c#, .net, sql, frameworks, entity

您好我有 2 个数据上下文，它们在 SQL Server 数据库上映射不同的模式，但是我需要为每个模式创建 1 个 sdf 数据库文件（SQL Compact）并使用相同的数据上下文，并且我有一些相关的实体，如下所示：

```
//context 1
class A
{
    int Id
    ...
    ICollection<B> Bs
}

//context 2
class B
{
    int Id
    ...
} 
```

在服务器上很容易，我只需要为这种关系指定表，但在客户端上，我将这些实体拆分到不同的数据库中。

因此，我需要上下文 1 (database_A.sdf) 中的 1 个实体 (A) 上的导航属性与上下文 2 (database_B.sdf) 中的 1 个实体 (B) 相关联。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:24:35.667

回答我自己的问题，不可能做我需要的事情，因为一个上下文只能链接到一个数据库，一种方法是像在 SQLite 中一样附加一个数据库，但使用 SQL Compact 这是不可能的。

资料来源： [SQLite - 你如何连接来自不同数据库的表？](https://stackoverflow.com/questions/6824717/sqlite-how-do-you-join-tables-from-different-databases) [SQL Compact 3.5 附加多个数据库/跨数据库查询？](https://stackoverflow.com/questions/2067903/sql-compact-3-5-attach-multiple-db-cross-db-query)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:32:33.180

你实现的那些类不是`Contexts`那些`Entities`。EF 中的上下文应该继承自 ObjectContext 或 DbContext，在您的情况下，我认为您在 2 个不同的数据库中有 2 个单独的实体。你可以这样做指向几个数据库

```
// Associate with first entity
public Context1 : ObjectContext
{
    prop IDbSet<A> ADbSet{ get; set; }
    ...
}

// Associate with Second entity
public Context2 : ObjectContext
{
    prop IDbSet<B> BDbSet{ get; set; }
    ...
}

public void ChangeDb(string dbName)
{
    Context1 context = new Context1();
    context.ChangeDatabase(dbName);
} 
```

希望这有帮助。

# svn - Subversion 可以取代 FTP 吗？

> ID：14340832
> 
> 赞同：1
> 
> 时间：2013-01-15T15:17:55.613
> 
> 标签：svn, ftp, repository, branch

我们目前使用 Subversion 来协调两个开发人员之间的网站开发。在我们之间，我们可能会处理一堆文件，检查我们的更改并使用 FTP 客户端以设定的时间间隔上传到生产服务器。

我觉得我在这里遗漏了一些明显的东西，但我们真的需要 FTP 吗？假设我们对存储库进行了一系列更改，有没有一种方法可以汇总从某个日期到现在为止发生更改的所有文件，然后将这些文件实时推送到包含生产站点的单独存储库？目前我们正在使用 SVN 日志查看哪些文件已更改，然后我们在 FTP 客户端中手动选择和上传。

我们处理的存储库已经在生产服务器上，只是不在 IIS 为运行站点而引用的文件夹中。

任何想法将不胜感激！

编辑 1 月 16 日 ------------------

Subversion 的 FTP 插件怎么样，这样我就可以进入“日志消息”区域，识别在给定时间段内发生更改的文件，选择它们并 FTP 到生产环境？这样的工具存在吗？

BTW：这里有很多有用的评论，谢谢大家的贡献。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:21:35.220

当您想要将文件来回发送到您的服务器而不一定需要通过版本控制时，FTP 或 SCP 仍然很方便。Subversion 是一种版本控制工具，不应用作未版本化文件的传输渠道。所以我的回答是你应该保留两者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T16:19:52.613

如果您使用 FTP 来回推送编程更改，那么最好使用像 Subversion 这样的版本控制系统。Subversion 不仅处理*最新*的代码问题，而且处理你们两个同时更新同一个文件的情况。此外，它还为您提供版本历史记录，因此您可以查看随着时间的推移发生了什么变化以及原因。

当您在开发人员之间共享库对象（`.jar`文件、a `.dll`、a`.so`等）时​​，FTP 很有用。没有可以从文件中提取的相关开发历史记录，并且您不会直接修改这些文件。此外，这些文件会很快老化、过时，并且会占用您存储库中的大量空间。

小心使用 FTP。这不是一个安全的协议有人监听可以收集密码。请改用 SCP 或 SFTP。这些都与`sshd`守护进程有关，所以如果你有能力使用`ssh`，你可能可以设置`scp`和`sftp`.

除了使用 FTP，另一种可能性是使用[Dropbox](http://dropbox.com)或等效程序来共享这些文件。Dropbox 会自动更新所有开发人员之间的文件，因此他们不必记住是否获取了最新代码。另外，还有一些版本控制方面。您可以查看一些版本历史记录，甚至可以获取文件的旧版本。Dropbox 是安全的，所有传输都经过加密。Dropbox 服务器上的文件甚至被加密存储（尽管由于用户之间共享文件的能力，Dropbox 本身确实保留了解密这些文件的密钥）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T18:32:23.547

首先：您必须了解差异，切勿将源代码控制管理和部署管理混为一谈——它们是不同的任务和工作，由不同的工具执行。

虽然 SCM 可以（以某种方式）用作部署工具，但由于 SCM 在这个（部署）领域的限制，这不是常见的做法。

回到你的问题。

如果 RepoServer 和 ProdServer 是不同的主机，则可以使用它们支持的**任何底层传输。**FTP（如果您有选择）不仅来自安全 POV，而且来自可能的灵活性 - 将*某些树上*传到目标的常见任务对于纯 FTP 来说并不容易和透明，FTP 会话的自动化程度很差。恢复 - 如果您可以使用其他传输，您至少可以尝试将您的部署过程用于其他传输。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T14:29:59.417

FTP 是传输文件的好方法。这就是它的目的。SCM 用于管理源代码。您需要一些部署管理，如果可能的话，它应该是自动化的。如果是我，我会编写一个脚本来从 svn 获取更改的文件并自动通过 SFTP 或 FTPS 部署它们。每次都以相同方式进行部署的脚本是理想的。

您也可以查看 rsync。它速度快，发送差异，并且是安全的。

根据我的经验，当您将大型文件（例如 VM 图像或视频）添加到源代码控制时，会减慢开发速度，尤其是在您创建分支或将 repo 拉到新盒子时。

另一位贡献者建议将 Dropbox 用于 SCM 和部署管理。我不喜欢 Dropbox 的源代码。它不提供您将习惯于来自 SVN 的合并功能。我在生产环境中使用 Dropbox 进行廉价的自动备份。我让 WHM/Cpanel 将备份放在 Dropbox 文件夹中。请务必关闭网络同步，因为大多数数据中心不喜欢在内部网络中传输的 UDP 数据包。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-16T00:03:53.547

是的。你的问题的答案是肯定的。Subversion 可以代替 FTP。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-04T01:37:18.047

我找到了你的英雄： [Bazaar](http://wiki.bazaar.canonical.com)是一个分布式版本控制系统，可以轻松进行协作开发。Bazaar 的优势之一是它对不同工作流程的适应性。您选择：集中式、分布式或介于两者之间的工作 他的优势在于它能够使用 FTP 或 SFTP 读取/写入远程存储库（无需另一端的客户端程序）

我认为[svn2web](https://sourceforge.net/projects/svn2web/)也可​​以做到！

# java - 获取异常：在 android 小部件中

> ID：14340837
> 
> 赞同：-2
> 
> 时间：2013-01-15T15:18:13.207
> 
> 标签：java, android, android-widget

嗨，我正在尝试制作一个 android 小部件。在这个小部件中，我试图通过调用 Web 服务并从中获取数据并在特定的关系间隔后将其显示在文本视图中来更新我的文本视图的值，但我遇到了异常。

```
Exception:java.lang.RuntimeException: Unable to start service com.example.newwidget.UpdateService@40ce9518withIntent{cmp=com.example.newwidget
/.UpdateService (has extras) }: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application 
```

这是我尝试过的代码，

小部件.java

```
 import android.appwidget.AppWidgetManager;
  import android.appwidget.AppWidgetProvider;
  import android.content.ComponentName;
  import android.content.Context;
  import android.content.Intent;
  import android.widget.RemoteViews;
  import android.widget.RemoteViews.RemoteView;
  import android.widget.Toast;

   public class Widget extends AppWidgetProvider {

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    Toast.makeText(context, "OnUpdate", Toast.LENGTH_LONG).show();

      ComponentName thisWidget = new ComponentName(context,
                Widget.class);
            int[] allWidgetIds =       appWidgetManager.getAppWidgetIds(thisWidget);
            Toast.makeText(context, "allWidgetIds", Toast.LENGTH_LONG).show();

            // Build the intent to call the service
            Intent intent = new Intent(context.getApplicationContext(),
                UpdateService.class);
            Toast.makeText(context, "call UpdateService", Toast.LENGTH_LONG).show();

            intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, allWidgetIds);
            Toast.makeText(context, "", Toast.LENGTH_LONG).show();

            // Update the widgets via the service
            context.startService(intent);
}

 } 
```

更新服务.java

```
 import java.io.IOException;

   import org.apache.http.HttpEntity;
   import org.apache.http.HttpResponse;
   import org.apache.http.client.ClientProtocolException;
   import org.apache.http.client.HttpClient;
   import org.apache.http.client.ResponseHandler;
   import org.apache.http.client.methods.HttpGet;
   import org.apache.http.impl.client.BasicResponseHandler;
   import org.apache.http.impl.client.DefaultHttpClient;

   import android.app.ProgressDialog;
   import android.app.Service;
   import android.appwidget.AppWidgetManager;
   import android.content.ComponentName;
   import android.content.Context;
   import android.content.Intent;
   import android.os.IBinder;
   import android.util.Log;
   import android.widget.RemoteViews;
   import android.widget.Toast;

   public class UpdateWidget extends Service {
    private RemoteViews views;
    private String url;
    private String strAPIRender;
    private final HttpClient Client = new DefaultHttpClient();
    private String Content;
    private String Error = null;
    private ProgressDialog Dialog = new ProgressDialog(null);
    private HttpResponse response;
    private HttpEntity httpEntity;

@Override
     public void onStart(Intent intent, int startId) {
        Log.d("AppWidget.UpdateService", "onStart()");
    Toast.makeText(UpdateWidget.this, "Onstart", Toast.LENGTH_LONG).show();
        // Build the widget update for today
    Toast.makeText(UpdateWidget.this, "Updateviews", Toast.LENGTH_LONG).show();

        RemoteViews updateViews = buildUpdate(this);
        Log.d("WordWidget.UpdateService", "update built");

Toast.makeText(UpdateWidget.this, "buildupdate finish", Toast.LENGTH_LONG).show();

        // Push update for this widget to the home screen
    ComponentName thisWidget = new ComponentName(this, WidgetAppActivity.class);

        AppWidgetManager manager = AppWidgetManager.getInstance(this);

    Toast.makeText(UpdateWidget.this, "final update", Toast.LENGTH_LONG).show();
    manager.updateAppWidget(thisWidget, updateViews);

    Log.d("WordWidget.UpdateService", "widget updated");
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    public RemoteViews buildUpdate(Context context) {
        // Pick out month names from resources
Toast.makeText(UpdateWidget.this, "buildupdate", Toast.LENGTH_LONG).show();
url = "http://www.webservicex.net/currencyconvertor.asmx/ConversionRate?FromCurrency=USD&ToCurrency=INR";

        grabURL(url);
Toast.makeText(UpdateWidget.this, "grabURL finish", Toast.LENGTH_LONG).show();

        String result = strAPIRender;

views = new RemoteViews(context.getPackageName(), R.layout.activity_widget_app);
        views.setTextViewText(R.id.update, result);
        return views;
    }
    public void grabURL(String url) {
Toast.makeText(UpdateWidget.this, "in grabURL method", Toast.LENGTH_LONG).show();

        Toast.makeText(null, "execute url", Toast.LENGTH_LONG).show();
        try {
            HttpGet httpget = new HttpGet(url);
    ResponseHandler<String> responseHandler = new BasicResponseHandler();
            Content = Client.execute(httpget, responseHandler);
        } catch (ClientProtocolException e) {
            Error = e.getMessage();
        //cancel(true);
    } catch (IOException e) {
            Error = e.getMessage();
            //cancel(true);
        }

        parseXml(Content);
    }

    public String parseXml(String content) {
        try {

            System.out.println(content);
            try {

                strAPIRender = XMLHandler.GetTagValue("double",content);

            } catch (Exception e) {
                System.out.println(" catch b");
            }

        } catch (Exception e) {
            System.out.println(" exception in parseXML");
        }
        return strAPIRender;

    }

} 
```

清单文件

```
 <uses-sdk android:minSdkVersion="8" />
  <uses-permission android:name="android.permission.INTERNET"/>

  <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <receiver
        android:name=".Widget"
        android:icon="@drawable/ic_launcher"
        android:label="A Widget" >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/widget_info" />
    </receiver>
    <service android:name="com.example.newwidget.UpdateService"></service>
   </application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:41:54.443

从 UpdateService 中删除以下行：

```
private ProgressDialog Dialog = new ProgressDialog(null); 
```

该“对话框”不会出现（快速浏览该类）以在任何地方使用。如果您确实打算使用它，则不能像那样实例化它（它需要一个真实的上下文）。这应该可以解决您所询问的特定错误。

（即使您修复了该错误，我也不确定此代码是否会按预期工作。您可能还想考虑一下，只是为了初学者：删除所有 toast 以进行调试并使用日志记录和 logcat，和/或调试器；不要将主 UI 线程（默认情况下也使用这些服务）用于网络 I/O（请参阅 IntentService 以获得简单的解决方法）；不要从服务中执行对话框/警报/toast；并注意非-标准命名约定，例如以大写开头的成员变量，这使得代码难以遵循（特别是当它不一致时，即使它不遵循约定）。）

# jquery - jQuery验证：无效字段再次有效后删除的标签文本

> ID：14340844
> 
> 赞同：0
> 
> 时间：2013-01-15T15:18:28.357
> 
> 标签：jquery, css, validation, replace, custom-action

我在使用 jQuery 验证插件时遇到了问题。在表单验证和更正无效字段后，分配的标签文本消失。这是我的代码：

```
$('#formID').validate({
   debug: true,
   errorContainer: $('#containerID'),
   errorPlacement: function(error, element) {
      var ctrl = $('#lbl_' + element.attr('name'));
      ctrl.addClass('error');
   },
   rules: {
      fieldname1: "required",
      fieldname2: "required",
      ...
   },
   messages: {
      fieldname1: "...",
      fieldname2: "...",
      ...
   }
}).form(); 
```

上面的代码应该将 CSS 错误类添加到分配标签的无效元素中。但是，当无效字段被更正后，分配的标签文本将被删除。我不知道为什么。我做错了什么？或者缺少什么？如果字段有效，我只想删除错误类...

# jsf - 如何在primefaces消息中显示页面内的错误总数？

> ID：14340848
> 
> 赞同：2
> 
> 时间：2013-01-15T15:18:54.707
> 
> 标签：jsf, primefaces, messages

我正在使用 jsf 2.1 和 Primefaces 3.3。我想在页面顶部显示页面内的错误总数`<p:message>`。

请给我建议如何做到这一点，如果你能用一个例子来解释这将是有帮助的。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T16:17:29.120

如果您只想计算特定消息（例如仅错误）。你可以这样做：

```
@ManagedBean
@RequestScoped
public class MessageCount {

    public int getFatal() {
        return countMessages(FacesMessage.SEVERITY_FATAL);
    }

    public int getError() {
        return countMessages(FacesMessage.SEVERITY_ERROR);
    }

    public int getWarn() {
        return countMessages(FacesMessage.SEVERITY_WARN);
    }

    public int getInfo() {
        return countMessages(FacesMessage.SEVERITY_INFO);
    }

    private int countMessages(FacesMessage.Severity severity) {
        Iterator<FacesMessage> iterator = FacesContext.getCurrentInstance().getMessages();
        int count = 0;
        while (iterator.hasNext()) {
            FacesMessage msg = iterator.next();
            if (severity.compareTo(msg.getSeverity()) == 0) {
                count++;
            }
        }
        return count;
    }
} 
```

在你的 jsf 页面中：

```
<h:outputText value="#{messageCount.error}"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T15:36:26.120

为什么使用`<p:message/>`？

尝试这个

```
<h:outputText value="#{fn:length(facesContext.messageList)}"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T15:36:27.913

没有内置功能。例如，您可以将`inputHidden`元素添加到表单，并`p:message`为该输入隐藏字段添加：

```
<p:messages for="justForErrorCount"/>
<h:inputHidden id="justForErrorCount"/> 
```

在您的支持 bean 中，您可以进行一些检查并添加消息：

```
if (FacesContext.getCurrentInstance().getMessageList() != null &&
        !FacesContext.getCurrentInstance().getMessageList().isEmpty()) {

    String message = "You have " + 
        FacesContext.getCurrentInstance().getMessageList().size() + " errors";
    FacesContext.getCurrentInstance().addMessage("justForErrorCount",
        new FacesMessage(FacesMessage.SEVERITY_ERROR, message);
} 
```

# java - 简单的乒乓球游戏；无法让桨在屏幕上移动

> ID：14340850
> 
> 赞同：0
> 
> 时间：2013-01-15T15:18:58.903
> 
> 标签：java, swing, jbutton, actionlistener, pong

我正在尝试创建简单的 Pong 游戏。我正在做的第一件事是当用户单击框架中提供的“左”或“右”按钮时让桨向左或向右移动。当用户单击按钮时，MainPanel 类中的动作侦听器会更改 Paddle 类中名为“paddlePosition”的常量，然后调用“repaint()”。但是，它不起作用，并且桨没有移动。我知道这些按钮正在工作，因为它输出“Hello World”和 paddlePosition 的值，但显然重绘有问题。到目前为止，我正在使用 Swing、JFrame 和 Graphics2D 来让一切正常工作。

![在此处输入图像描述](../Images/81c8487ee0777f5f80d42cadf547aad6.png)

我的课程：

乒乓球架（跑步班）

```
import java.awt.BorderLayout;
import javax.swing.JButton;
import javax.swing.JFrame;

public class PongFrame extends JFrame{

    private static final long serialVersionUID = 1L;

    public PongFrame(){

    ButtonPanel buttonPanel = new ButtonPanel();
    MainPanel mainPanel = new MainPanel();

    add(buttonPanel, BorderLayout.SOUTH);
    add(mainPanel);

    setSize(400, 400);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setLocationRelativeTo(null);
    setVisible(true);
}

    public static void main(String[] args) {
        new PongFrame();

    }

} 
```

主面板：

```
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class MainPanel extends JPanel implements ActionListener{

    public Paddle paddle;

    public MainPanel(){

        setSize(300, 300);
        paddle = new Paddle();
    }

    public void paint(Graphics g) {
        super.paint(g);
        Graphics2D g2 = (Graphics2D)g;
        paddle.draw(g2);
    }

    public void actionPerformed(ActionEvent e) {
        System.out.println("Hello World");
        Paddle.movePaddleLeft();
        System.out.println(Paddle.paddlePosition);
        this.repaint();
    }
} 
```

按键面板：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JPanel;

public class ButtonPanel extends JPanel {

    private static final long serialVersionUID = 1L;

    public MainPanel mainPanelActionListener = new MainPanel(); 

    JButton left;
    JButton right;

    public ButtonPanel(){
        left = new JButton("Left");
        right = new JButton("Right");

        add(left);
        add(right);

        left.addActionListener(mainPanelActionListener);
        right.addActionListener(mainPanelActionListener);
    }
} 
```

桨：

```
import java.awt.Graphics2D;

public class Paddle{

    public static int paddlePosition = 200;
    private java.awt.Rectangle paddle;
    private int centerCoordinateX;
    private int centerCoordinateY;

    public Paddle(){
        //paddle = new java.awt.Rectangle(paddlePosition, 285, 100, 10); // x, y, width, height
    }

    public void draw(Graphics2D g2){
        paddle = new java.awt.Rectangle(paddlePosition, 285, 100, 10);
        g2.draw(paddle);
    }

    public static void movePaddleLeft(){
        paddlePosition = (paddlePosition + 3);
    }
} 
```

有谁看到出了什么问题？为什么单击按钮时桨叶不会移动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:27:27.410

在`ButtonPanel`您正在创建一个新的`MainPanel`. 这会导致您创建一个正在更新的新的*不可见*面板。

您实际需要做的是将 发送`MainPanel`到您`ButtonPanel`的构造函数中。

* * *

**编辑：（** *免责声明：这里的所有代码都是在没有 IDE 的情况下生成的）*

在`PongFrame`构造函数中执行以下操作：

```
MainPanel mainPanel = new MainPanel();
ButtonPanel buttonPanel = new ButtonPanel(mainPanel); 
```

这将创建一个`ButtonPanel`引用`MainPanel`.

现在为`ButtonPanel`：

```
public MainPanel mainPanelReference;

JButton left;
JButton right;

public ButtonPanel(MainPanel mainPanelReference) {
    this.left = new JButton("Left");
    this.right = new JButton("Right");

    add(left);
    add(right);

    this.mainPanelReference = mainPanelReference;

    left.addActionListener(mainPanelReference);
    right.addActionListener(mainPanelReference);
} 
```

# java - 右对齐光标未在 JTextPane 组件中显示

> ID：14340851
> 
> 赞同：1
> 
> 时间：2013-01-15T15:19:00.743
> 
> 标签：java, swing, cursor, textfield

我有一个 JTextPane 夹在 2 个 JLabels 之间 - 如果我将光标放在文本窗格的最左侧但不在右侧，是否有已知的原因可以显示光标？

这是更好地说明我的意思的代码：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.JTextPane;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.DefaultStyledDocument;
import javax.swing.text.SimpleAttributeSet;
import javax.swing.text.StyleConstants;

public class Testing {
    /**
     * @param args
     */
    public static void main(String[] args) {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel cp = new JPanel(new BorderLayout());
        f.setContentPane(cp);

        final SubPanel subPanel = new SubPanel();

        cp.add(subPanel, BorderLayout.CENTER);

        JPanel buttonPanel = new JPanel(new FlowLayout());
        buttonPanel.add(new JLabel("Align"));
        final JComboBox alignCB = new JComboBox(new String[] {"left", "centre", "right"});
        alignCB.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                subPanel.align((String) alignCB.getSelectedItem());
            }
        });
        buttonPanel.add(alignCB);
        buttonPanel.add(new JLabel("Justify"));
        final JComboBox justifyCB = new JComboBox(new String[] {"left", "centre", "right"});
        justifyCB.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                subPanel.justify((String) justifyCB.getSelectedItem());
            }
        });
        buttonPanel.add(justifyCB);

        JTextField tf = new JTextField("TF");
        tf.setBorder(null);
        buttonPanel.add(tf);

        cp.add(buttonPanel, BorderLayout.NORTH);

        f.pack();
        f.setSize(new Dimension(300,300));
        f.setLocation(300, 300);
        f.setVisible(true);

    }

    public static class SubPanel extends JPanel {
        JPanel innerPanel = new JPanel(new GridBagLayout());
        TextPaneWidget[] tps = new TextPaneWidget[3];

        public SubPanel() {
            //                setBorder(BorderFactory.createLineBorder(Color.RED));
            setBorder(null);
            //                innerPanel.setBorder(BorderFactory.createLineBorder(Color.BLUE));
            innerPanel.setBorder(null);

            for (int i = 0; i < tps.length; i++) {
                tps[i] = new TextPaneWidget();
            }

            int gridy = 0;
            for (TextPaneWidget tp : tps) {
                innerPanel.add(tp, new GridBagConstraints(0,gridy, 1,1, 0.0, 0.0, GridBagConstraints.NORTHEAST, GridBagConstraints.HORIZONTAL, new Insets(0,0,0,0), 0, 0));
                gridy++;
            }

            setLayout(new GridBagLayout());

            add(innerPanel, new GridBagConstraints(0,0, 1,1, 1.0, 0.0, GridBagConstraints.WEST, GridBagConstraints.NONE, new Insets(0,0,0,0), 0, 0));
        }

        public void align(String alignment) {
            System.out.println("Align: " + alignment);

            int anchor = GridBagConstraints.CENTER;
            if ("right".equals(alignment)) {
                anchor = GridBagConstraints.EAST;
            } else if ("left".equals(alignment)) {
                anchor = GridBagConstraints.WEST;
            }

            GridBagLayout gbl = (GridBagLayout) getLayout();
            gbl.setConstraints(innerPanel, new GridBagConstraints(0,0, 1,1, 1.0, 0.0, anchor, GridBagConstraints.NONE, new Insets(0,0,0,0), 0, 0));

            revalidate();
            repaint();
        }

        public void justify(String justification) {
            System.out.println("Justify: " + justification);

            for (TextPaneWidget tp : tps) {
                tp.justify(justification);
            }
        }
    }

    public static class MyDocument extends DefaultStyledDocument {
        @Override
        public void insertString(int offset, String text, AttributeSet attributeSet) throws BadLocationException {
            SimpleAttributeSet attrs = new SimpleAttributeSet(attributeSet);
            StyleConstants.setForeground(attrs, Color.WHITE);
            StyleConstants.setBackground(attrs, Color.RED);
            super.insertString(offset, text, attrs);
        }
    }

    public static class TextPaneWidget extends JPanel {
        JTextPane tp = new JTextPane();
        JLabel lSpace = new JLabel("   ");
        JLabel rSpace = new JLabel("   ");

        public TextPaneWidget() {
            //                setBorder(BorderFactory.createLineBorder(Color.GREEN));
            setBorder(null);

            Font font = new Font("monospaced", Font.BOLD, 13);
            tp.setBorder(null);
            tp.setDocument(new MyDocument());
            tp.setFont(font);
            tp.setText("Text");
            tp.setOpaque(true);

            setLayout(new GridBagLayout());

            lSpace.setBackground(Color.MAGENTA);
            lSpace.setOpaque(true);
            lSpace.setBorder(null);
            add(lSpace, new GridBagConstraints(0,0, 1,1, 0.0, 0.0, GridBagConstraints.EAST, GridBagConstraints.VERTICAL, new Insets(0,0,0,0), 0, 0));

            add(tp, new GridBagConstraints(1,0, 1,1, 0.0, 0.0, GridBagConstraints.CENTER, GridBagConstraints.NONE, new Insets(0,0,0,0), 0, 0));

            rSpace.setBackground(Color.MAGENTA);
            rSpace.setOpaque(true);
            rSpace.setBorder(null);
            add(rSpace, new GridBagConstraints(2,0, 1,1, 1.0, 0.0, GridBagConstraints.WEST, GridBagConstraints.VERTICAL, new Insets(0,0,0,0), 0, 0));

            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    tp.setCaretPosition((e.getX() < tp.getX()) ? 0 : tp.getText().length());
                    tp.requestFocusInWindow();
                }
            });

            lSpace.addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    tp.setCaretPosition(0);
                    tp.requestFocusInWindow();
                }
            });

            rSpace.addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    tp.setCaretPosition(tp.getText().length());
                    tp.requestFocusInWindow();
                }
            });

        }

        public void justify(String justification) {
            double leftWeight = 0.5;
            double rightWeight = 0.5;
            if ("right".equals(justification)) {
                leftWeight = 1.0;
                rightWeight = 0.0;
            } else if ("left".equals(justification)) {
                leftWeight = 0.0;
                rightWeight = 1.0;
            }

            GridBagLayout gbl = (GridBagLayout) getLayout();
            gbl.setConstraints(lSpace, new GridBagConstraints(0,0, 1,1, leftWeight, 0.0, GridBagConstraints.EAST, GridBagConstraints.VERTICAL, new Insets(0,0,0,0), 0, 0));
            gbl.setConstraints(rSpace, new GridBagConstraints(2,0, 1,1, rightWeight, 0.0, GridBagConstraints.WEST, GridBagConstraints.VERTICAL, new Insets(0,0,0,0), 0, 0));
            revalidate();
            repaint();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:48:00.693

将背景设置为以下可修复此问题...

```
tp.setBackground(Color.RED);
tp.setOpaque(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:27:35.160

我想我明白发生了什么。感谢您提供代码。

当您定义 JTextPane 时，默认边框是 3 像素的空边框。当光标位于最右侧位置时，此空边框为文本窗格光标提供了一个显示位置。光标位于最右边的位置以允许在一行字符的末尾键入字符。

当您定义一个空边框时，它与一个 0 像素的空边框相同，当文本窗格光标位于最右边的位置时，没有地方可以绘制它。

为了在最右边的位置看到光标，您必须定义一个至少有 1 个右像素的空边框。如果您希望它更具视觉吸引力，请添加 1 个左像素。

```
tp.setBorder(BorderFactory.createEmptyBorder(0,1,0,1)); 
```

您必须定义一个空边框，因为空边框是唯一`Border`不绘制的。绘制的A`Border`将绘制在最右侧位置的文本窗格光标上。

因此，您需要使用具有至少一个右侧像素的空边框，以便 JTextPane 显示最右侧的光标。

编辑添加：

当您使用 时`GridBagLayout`，像这样的方法可以减少您在添加组件时必须处理的参数数量。

```
protected void addComponent(Container container, Component component,
        int gridx, int gridy, int gridwidth, int gridheight, 
        Insets insets, int anchor, int fill) {
    GridBagConstraints gbc = new GridBagConstraints(gridx, gridy,
            gridwidth, gridheight, 1.0D, 1.0D, anchor, fill, insets, 0, 0);
    container.add(component, gbc);
} 
```

# r - 在一个命令中绘制变化点曲线

> ID：14340853
> 
> 赞同：0
> 
> 时间：2013-01-15T15:19:10.590
> 
> 标签：r, plot, curve

我想绘制一条具有变化点的曲线`x=5`

到目前为止，我正在使用代码

```
curve(exp(0.68+0.92*x), from=0,to=5, xlim=c(0,12), ylim=c(0,500))
curve(exp(0.68+0.92*x-0.7*(x-5)), from=5,to=12, add=T) 
```

是否可以将其写在一行（一个`curve`命令）中？我刚在想

像这样的东西

```
curve(exp(0.47+0.8*x-0.7*(x-5)*if(x<5,0,1)), from=0,to=12, xlim=c(0,12), ylim=c(0,500)) 
```

但它不适用于 R

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T15:23:57.070

使用`ifelse`您可以创建一个数据系列：

```
values = ifelse(x <= 5, exp(0.68+0.92*x), exp(0.68+0.92*x-0.7*(x-5)) 
```

并绘制它们：

```
curve(values) 
```

如果您坚持使用单线，您可以将`ifelse`和 调用结合起来`curve`：

```
curve(ifelse(x <= 5, exp(0.68+0.92*x), exp(0.68+0.92*x-0.7*(x-5))) 
```

尽管将代码分成两行更容易阅读 imo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:23:49.247

您可以编写一个绘制两条曲线的函数：

```
myfun <- function(...) {
 plot(...)
 lines(...)
} 
```

当然，你必须给出正确的论据。结果是一张图中的两条曲线

# javascript - 跨域 jQuery ajax 调用不起作用

> ID：14340857
> 
> 赞同：2
> 
> 时间：2013-01-15T15:19:24.740
> 
> 标签：javascript, jquery, ajax, cross-domain

我在处理这段代码时遇到了问题，我似乎无法让它工作。我为此调用返回的典型错误是“加载资源失败：服务器响应状态为 401（未授权）”。

```
$('#btnZendesk').click(function () {
      $.ajax({
          url: "https://flatlandsoftware.zendesk.com/api/v2/topics/22505987.json",
          type: 'GET',
          crossDomain: true,
          xhrFields: {
              withCredentials: true
          },
          cache: false,
          dataType: 'jsonp',
          processData: false,
          data: 'get=login',
          timeout: 2000,

          username: "test@test.com",
          password: "test",
          success: function (data, textStatus, response) {
              alert("success");
          },
          error: function (data, textStatus, response) {
              alert(data);
          }
      }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T15:26:58.960

问题是您尝试访问的资源受到基本身份验证的保护。

您可以`beforeSend`在 jQuery 回调中使用以添加带有身份验证详细信息的 HTTP 标头，例如：

```
beforeSend: function (xhr) {
  xhr.setRequestHeader ("Authorization", "Basic XXXXXX"); 
} 
```

或者，您可以使用 jQuery 来完成`ajaxSetup`

```
$.ajaxSetup({
  headers: { 'Authorization': "Basic XXXXX" }
}); 
```

**编辑**

一些指向上述功能的链接

*   [jQuery.ajaxSetup](http://api.jquery.com/jQuery.ajaxSetup/)
*   [jQuery.ajax](http://api.jquery.com/jQuery.ajax/)

**编辑 2**

Authorization 标头的构造如下：

*   用户名和密码连接成一个字符串，结果字符串使用**Base64**`"username:password"`编码

 **例子：

```
Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T17:07:36.770

我也遇到了这个问题，由于客户端 Web 服务限制（JSONP、XDR、CORS=true），互联网上的所有解决方案都失败或不适用

为此，我在我的页面中添加了一个 iframe，它位于客户端的服务器中。因此，当我们将数据发布到 iframe 时，iframe 然后将其发布到 web 服务。因此消除了跨域引用。

我们添加了 2 路来源检查，以确认仅授权页面将数据发布到 iframe 和从 iframe 发布数据。

希望能帮助到你

```
<iframe style="display:none;" id='receiver' name="receiver" src="https://iframe-address-at-client-server">
 </iframe>

//send data to iframe
var hiddenFrame = document.getElementById('receiver').contentWindow;
hiddenFrame.postMessage(JSON.stringify(message), 'https://client-server-url');

//The iframe receives the data using the code:
window.onload = function () {
    var eventMethod = window.addEventListener ? "addEventListener" : "attachEvent";
    var eventer = window[eventMethod];
    var messageEvent = eventMethod == "attachEvent" ? "onmessage" : "message";
    eventer(messageEvent, function (e) {
        var origin = e.origin;
        //if origin not in pre-defined list, break and return
        var messageFromParent = JSON.parse(e.data);
        var json = messageFromParent.data;

        //send json to web service using AJAX   
        //return the response back to source
        e.source.postMessage(JSON.stringify(aJAXResponse), e.origin);
    }, false);
} 
```**

# android - 摆脱 LogCat

> ID：14340859
> 
> 赞同：-4
> 
> 时间：2013-01-15T15:19:37.050
> 
> 标签：android

我正在使用最新版本的 eclipse JUNO 进行 android 编程。谁能告诉我如何摆脱 LogCat？当工作区中有来自应用程序的消息时，我没有选项显示 LogCat 视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T16:01:27.613

删除 logcat：

![点击“x”](../Images/4a272939c29258af73d8ba7c949c4353.png)

把 logcat 带回来：第 1 步 -

![点击“其他”](../Images/44cc843d094e519440913f59d435ae9b.png)

第2步 -

![点击确定](../Images/6290d04620ddbf4b25857d45d04d606b.png)

# android - 单击后如何在另一个 ListView 中显示 ListView

> ID：14340863
> 
> 赞同：1
> 
> 时间：2013-01-15T15:19:51.760
> 
> 标签：android, android-listview, android-arrayadapter

我有一个列表视图：
A
B
C
D

一旦从第一个项目中选择了一个项目，我就会尝试显示第二个 ListView。我尝试了以下方法：
A b1
**B** b2
C b3
D

它可以工作，但我不喜欢它的外观。如何实现列表，使第二个 ListView (b1-b2-b3) 通过移动下面的其余部分显示在所选项目下：
A
**B**
b1
b2
b3
C
D

另外我还有一个问题，如何根据所选项目引入新的字符串数组。目前我正在使用 switch 子句，但如果我碰巧需要更多数组，就会出现问题：

```
String[] brands = { ... };    String[] test2 = { ... };

    ArrayAdapter<String> arrayAdapterOne = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, brands);
    final ArrayAdapter<String> arrayAdapterTwo = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, test2);
    final ArrayAdapter<String> arrayAdapterThree = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, test3);
    final ArrayAdapter<String> arrayAdapterFour = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, test4);

listView1.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
            TextView tv1 = (TextView) findViewById(R.id.textView1);
            tv1.setText(brands[position]);
            switch (position) {
            case 0:
                listView2.setAdapter(arrayAdapterTwo);
                break;
            case 1:
                listView2.setAdapter(arrayAdapterThree);
                break;
            case 2:
                listView2.setAdapter(arrayAdapterFour);
                break;
            case 3:
                listView2.setAdapter(arrayAdapterFour);
                break;

            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:25:31.417

我认为这是不可能的（有几乎相同的问题），我建议改用[ExpandalbeListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)。
这应该提供您尝试实现的所有（或几乎类似的）功能

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T15:26:01.757

也许你想试试[ExpendableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)。它应该看起来像[这些模式](http://www.androidpatterns.com/uap_pattern/expandable-list)。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T15:25:35.017

第一个问题：我认为您想要的是 ExpandableListView ......看看这个教程：

[http://www.dreamincode.net/forums/topic/270612-how-to-get-started-with-expandablelistview/](http://www.dreamincode.net/forums/topic/270612-how-to-get-started-with-expandablelistview/)

# android - Android game ends after a specific time

> ID：14340867
> 
> 赞同：-1
> 
> 时间：2013-01-15T15:20:13.487
> 
> 标签：android

Im making a game on android and i want it to run for like 60 seconds and the display game over. much like fruit ninja. how do i handle the time in this case? is the android.timer of much use or the alarm manager?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:30:40.093

You can use a CountDownTimer:

```
private void initTimer() {      
    mWaitTime = 60 * 1000;
    mWaitTimer = new CountDownTimer(mWaitTime, mWaitTime) {

        public void onTick(long millisUntilFinished) {/* Do nothing */ }

        public void onFinish() {
            // stop your game...
        }
    }.start();
} 
```

Be sure to cancel the timer on the onPause method:

```
mWaitTimer.cancel(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:30:56.010

Use an AsyncTask, run a Thread with the sleep method (in the **doInBackground** method) for 1 second do this 60 times and after each second you can update the progress so the method **onProgressUpdate** will be called each second, after the thread has runned 60 times the AsyncTask will go into the **onPostExecute** where you can finish your application or do whatever you want to do when the time has run out.

# android - 捕获所有帧发送到手机的显示器

> ID：14340868
> 
> 赞同：0
> 
> 时间：2013-01-15T15:20:14.213
> 
> 标签：android

我想捕获所有输出（帧）发送到手机的显示器？（我想做镜像——通过 Wi-Fi 发送显示）

我应该在 NDK 层还是使用 android API 来做呢？

有我可以使用的示例或教程吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:27:41.853

为了能够做到这一点，您必须将帧缓冲区流式传输到其他设备。

帧缓冲区通常位于`/dev/fb0`或`/dev/graphics/fb0`。在某些设备（如 LG Optimus One）上，无需 root 权限即可访问，但在大多数设备（如 Nexus S）上，您需要为此获得 root 权限。出于安全原因，这是不允许的，因为恶意应用程序可能会在后台截取屏幕截图并将其发送到远程服务器，从而泄露电子邮件 ID 和密码等信息，在某些情况下还会泄露银行账户详细信息。

如果您有一个根设备，那么获取帧缓冲区，将其转换为位图并通过 wifi 将其发送到任何其他设备是一项非常简单的任务。

# java - 如何使用带有可选科学记数法的 DecimalFormat 格式化数字

> ID：14340872
> 
> 赞同：3
> 
> 时间：2013-01-15T15:20:24.450
> 
> 标签：java, decimalformat

我正在使用模式“#0.00##”来格式化数字，它对大多数输入都按预期工作。但有时源编号较小，即：6.84378E-05，并转换为“0,0001”。

是否可以使用科学记数法仅格式化这些数字（不适合标准模式）？保持所有“正常”数字完好无损？与单一模式。

我只需要使用一个 DecimalFormat 模式，不需要任何额外的代码。

编辑：为了更好地解释为什么我需要单个 DecimalFormat ：我正在使用一个外部库，并且只能定义一个模式来配置输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:42:13.973

您只能对正值和负值有不同的模式。您应该执行以下操作：

```
public class DecimalScientificFormat extends DecimalFormat {
    private static DecimalFormat df = new DecimalFormat("#0.00##");
    private static DecimalFormat sf = new DecimalFormat("0.###E0");

    @Override
    public StringBuffer format(double number, StringBuffer result, FieldPosition fieldPosition) {
        String decimalFormat = df.format(number);
        return (0.0001 != number && df.format(0.0001).equals(decimalFormat)) ? sf.format(number, result, fieldPosition) : result.append(decimalFormat);
    }
} 
```

# sql - 创建一个日期，将其插入数据库，比较，它是不同的

> ID：14340878
> 
> 赞同：0
> 
> 时间：2013-01-15T15:20:41.627
> 
> 标签：sql, oracle, unit-testing, date, dbunit

## 目标

我有一个非常奇怪的问题。我的目标是使用 dbunit 比较数据库中的动态日期（数据库是 Oracle 数据库）。这个动态日期是今天的日期（比较静态日期的工作......）

## 实验

为了比较日期，我使用了这个非常简单的代码：

```
@Test
public void simpleDateTest() throws DatabaseUnitException, SQLException {
    // create a date corresponding to today
    Date today = new Date();

    // load a dataset
    IDataSet expectedDataSet = new FlatXmlDataSetBuilder().build(getClass()
            .getResource("/dataset.xml"));

    // replace [TODAY] by the today date
    ReplacementDataSet rDataSet = new ReplacementDataSet(expectedDataSet);
    rDataSet.addReplacementObject("[TODAY]", today);

    // insert the dataset
    DatabaseConnection connection = getConnection();
    DatabaseOperation.CLEAN_INSERT.execute(connection, rDataSet);

    // do a simple query to get some fields, em is the entity manager which uses the same connection as above
    Query q = em
            .createNativeQuery("SELECT ID, MY_DATE FROM MY_TABLE");
    List<Object[]> result = q.getResultList();

    // compare the date with today date
    assertEquals(today.getTime(), ((Date) result.get(0)[1]).getTime());
} 
```

使用以下数据集：

```
<?xml version='1.0' encoding='UTF-8'?>
<dataset>
    <MY_TABLE ID="1" MY_DATE="[TODAY]" />
</dataset> 
```

## 问题

我不知道为什么，但是断言失败了！比较两个日期时，有几毫秒的差异。错误是这样的：

```
java.lang.AssertionError: expected:<1358262234801> but was:<1358262234000> 
```

我不明白怎么可能有不同的日期，因为它们通常是相同的！任何线索来理解问题以及如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T15:28:48.217

Oracle Date 类型没有毫秒的分辨率，它只有秒的分辨率。
将时间保存到数据库时，毫秒会被简单地剥离。当您查看实际值时，您会看到最后三位数字全为零。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T15:30:58.177

假设它`today`是 a `java.util.Date`，Java`Date`具有毫秒精度。另一方面， Oracle`date`没有毫秒精度。`java.util.Date`因此，当您将 a 存储在 Oracle 中并将其取回时，您会期望失去一些精度。

您可以将数据存储在 Oracle`timestamp`列中——该列将具有毫秒精度。`Date`或者您可以在将其写入数据库之前从 Java 中剥离毫秒。

# android - Android - Facebook SDK 3 - 如何从非活动类以编程方式登录

> ID：14340886
> 
> 赞同：3
> 
> 时间：2013-01-15T15:21:20.930
> 
> 标签：android, facebook, facebook-graph-api

是否可以从非 Activity 类登录和发送 Facebook 请求？我发现的所有示例都覆盖了`onActivityResult`Activity 类的方法，以获取 Facebook 登录活动的结果。

我想创建与 SDK 示例相同的代码`GraphApiSampleActivity`，但不从 Activity 调用。

正如我所提到的，我的问题是我无法覆盖`onActivityResult`以获取登录结果。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:54:22.620

SDK 使用 Intent 启动一个新的 Activity 来执行授权工作流，并通过 onActivityResult 方法传回访问令牌（和其他相关信息）。由于它使用带有结果的意图，因此它必须使用活动或片段来启动授权。

为什么不能使用 Activity（或 Fragment）？您是否依赖于其他一些 SDK？

# c++ - Jpeg 在发布版本中使用 QImage 读取错误

> ID：14340893
> 
> 赞同：1
> 
> 时间：2013-01-15T15:21:39.993
> 
> 标签：c++, qt, load, jpeg, qimage

有没有人在尝试加载 jpeg 图像时使用 Qt 和 QImage 的类加载方法遇到问题。加载在使用 QtCreator 的调试模式下完美运行，但在构建应用程序并随后在发布模式下运行时尝试加载相同的 jpeg 图像时完全失败。

```
QImage myImage;
QString s = QDir().toNativeSeparators(QFileDialog::getOpenFileName(this, QString("Import Image...")));
if ( !myImage.load(s) ) {
    QMessageBox msgBox;
    msgBox.setWindowTitle(this->windowTitle());
    msgBox.setWindowIcon(this->windowIcon());
    msgBox.setIcon(QMessageBox::Information);
    msgBox.setText("Image could not be loaded.");
    msgBox.exec();
    return;
} 
```

我已经得出结论，我可能缺少一个特定的动态链接库，但无法预见它会是哪一个。请注意，在发布模式下，我仍然可以处理 PNG 图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:39:48.777

将 imageplugins（或 imageformats）文件夹添加到您的构建中。使用 jpg 需要 libjpeg.dll 可用于可执行文件。在您的 Qt 安装目录下查找所需的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:57:27.450

可能在您的 PATH 环境变量中找不到您的应用程序所需的 dll 之一。您可以使用[Dependency Walker](http://dependencywalker.com/)来发现缺少哪些 dll。

# javascript - 在 JavaScript 中创建 XML

> ID：14340894
> 
> 赞同：51
> 
> 时间：2013-01-15T15:21:45.797
> 
> 标签：javascript, xml, xmlwriter

是否可以在 JavaScript 中创建包含一些数据的 XML 文件？我将数据存储在变量中。

我用谷歌搜索了一下，似乎并没有谈论太多。我以为我可以`XMLWriter`这样使用：

```
var XML = new XMLWriter();
XML.BeginNode ("testing");
XML.Node("testingOne");
XML.Node("TestingTwo");
XML.Node("TestingThree");
XML.EndNode(); 
```

如本教程所述：[EHow教程](http://www.ehow.com/how_5956065_create-xml-file-javascript.html)

但是，当我执行此代码时，出现以下错误：

> ReferenceError: XMLWriter 未定义

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2015-12-02T15:53:21.507

*免责声明：以下答案假定您使用的是 Web 浏览器的 JavaScript 环境。*

JavaScript 使用“XML DOM 对象”处理 XML。您可以通过三种方式获得这样的对象：

**1\. 创建一个新的 XML DOM 对象**

```
var xmlDoc = document.implementation.createDocument(null, "books"); 
```

如果文档属于一个，则第一个参数可以包含要创建的文档的名称空间 URI。

来源：[https ://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocument](https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocument)

**2\. 使用 XMLHttpRequest 获取 XML 文件**

```
var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
if (xhttp.readyState == 4 && xhttp.status == 200) {

    var xmlDoc = xhttp.responseXML; //important to use responseXML here
}
xhttp.open("GET", "books.xml", true);
xhttp.send(); 
```

**3\. 解析包含序列化 XML 的字符串**

```
var xmlString = "<root></root>";
var parser = new DOMParser();
var xmlDoc = parser.parseFromString(xmlString, "text/xml"); //important to use "text/xml" 
```

* * *

获得 XML DOM 对象后，可以使用方法来操作它，例如

```
var node = xmlDoc.createElement("heyHo");
var elements = xmlDoc.getElementsByTagName("root");
elements[0].appendChild(node); 
```

如需完整参考，请参阅[http://www.w3schools.com/xml/dom_intro.asp](http://www.w3schools.com/xml/dom_intro.asp)

注意：重要的是，您不要使用文档命名空间提供的方法，即

```
var node = document.createElement("Item"); 
```

这将创建 HTML 节点而不是 XML 节点，并将生成一个带有小写标记名称的节点。与 HTML 标记名称相比，XML 标记名称区分大小写。

您可以像这样序列化 XML DOM 对象：

```
var serializer = new XMLSerializer();
var xmlString = serializer.serializeToString(xmlDoc); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2018-07-22T11:49:19.067

**考虑我们需要创建以下 XML 文档：**

```
<?xml version="1.0"?>
<people>
  <person first-name="eric" middle-initial="H" last-name="jung">
    <address street="321 south st" city="denver" state="co" country="usa"/>
    <address street="123 main st" city="arlington" state="ma" country="usa"/>
  </person>

  <person first-name="jed" last-name="brown">
    <address street="321 north st" city="atlanta" state="ga" country="usa"/>
    <address street="123 west st" city="seattle" state="wa" country="usa"/>
    <address street="321 south avenue" city="denver" state="co" country="usa"/>
  </person>
</people> 
```

**我们可以编写下面的代码来生成上面的XML**

```
var doc = document.implementation.createDocument("", "", null);
var peopleElem = doc.createElement("people");

var personElem1 = doc.createElement("person");
personElem1.setAttribute("first-name", "eric");
personElem1.setAttribute("middle-initial", "h");
personElem1.setAttribute("last-name", "jung");

var addressElem1 = doc.createElement("address");
addressElem1.setAttribute("street", "321 south st");
addressElem1.setAttribute("city", "denver");
addressElem1.setAttribute("state", "co");
addressElem1.setAttribute("country", "usa");
personElem1.appendChild(addressElem1);

var addressElem2 = doc.createElement("address");
addressElem2.setAttribute("street", "123 main st");
addressElem2.setAttribute("city", "arlington");
addressElem2.setAttribute("state", "ma");
addressElem2.setAttribute("country", "usa");
personElem1.appendChild(addressElem2);

var personElem2 = doc.createElement("person");
personElem2.setAttribute("first-name", "jed");
personElem2.setAttribute("last-name", "brown");

var addressElem3 = doc.createElement("address");
addressElem3.setAttribute("street", "321 north st");
addressElem3.setAttribute("city", "atlanta");
addressElem3.setAttribute("state", "ga");
addressElem3.setAttribute("country", "usa");
personElem2.appendChild(addressElem3);

var addressElem4 = doc.createElement("address");
addressElem4.setAttribute("street", "123 west st");
addressElem4.setAttribute("city", "seattle");
addressElem4.setAttribute("state", "wa");
addressElem4.setAttribute("country", "usa");
personElem2.appendChild(addressElem4);

var addressElem5 = doc.createElement("address");
addressElem5.setAttribute("street", "321 south avenue");
addressElem5.setAttribute("city", "denver");
addressElem5.setAttribute("state", "co");
addressElem5.setAttribute("country", "usa");
personElem2.appendChild(addressElem5);

peopleElem.appendChild(personElem1);
peopleElem.appendChild(personElem2);
doc.appendChild(peopleElem); 
```

**如果需要在标签之间写入任何文本，我们可以使用 innerHTML 属性来实现。**

例子

```
elem = doc.createElement("Gender")
elem.innerHTML = "Male"
parent_elem.appendChild(elem) 
```

欲了解更多详情，请点击以下链接。上面的例子已经在那里进行了更详细的解释。

[https://developer.mozilla.org/en-US/docs/Web/API/Document_object_model/How_to_create_a_DOM_tree](https://developer.mozilla.org/en-US/docs/Web/API/Document_object_model/How_to_create_a_DOM_tree)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-05-08T19:59:41.293

[xml-writer(npm package)](https://www.npmjs.com/package/xml-writer) 我认为这是轻松创建和编写 xml 文件的好方法。它也可以在服务器端与nodejs一起使用。

```
var XMLWriter = require('xml-writer');
xw = new XMLWriter;
xw.startDocument();
xw.startElement('root');
xw.writeAttribute('foo', 'value');
xw.text('Some content');
xw.endDocument();
console.log(xw.toString()); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-14T06:53:21.070

这项工作对我来说..

```
var xml  = parser.parseFromString('<?xml version="1.0" encoding="utf-8"?><root></root>', "application/xml"); 
```

[developer.mozilla.org/en-US/docs/Web/API/DOMParser](https://developer.mozilla.org/en-US/docs/Web/API/DOMParser)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-15T16:53:40.093

只需使用

```
var xmlString = '<?xml version="1.0" ?><root />';
var xml = jQuery.parseXML(xml); 
```

它是[jQuery.parseXML](http://api.jquery.com/jQuery.parseXML/)，因此无需担心跨浏览器技巧。像 HTML 一样使用 jQuery，它使用原生 XML 引擎。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-15T16:04:33.277

仅适用于 IE

```
 $(function(){

        var xml = '<?xml version="1.0"?><foo><bar>bar</bar></foo>'; 

        var xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
        xmlDoc.async="false";
        xmlDoc.loadXML(xml);

        alert(xmlDoc.xml);

    }); 
```

然后将 xmlDoc.xml 推送到您的 java 代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-12T03:10:39.397

您的代码正在引用[此库](https://www.codeproject.com/Articles/12504/Writing-XML-using-JavaScript)

您可以包含它，然后您的相关代码应该按原样运行。如果您想在不预先添加库的情况下执行此操作并仅使用内置函数构建它 - 请遵循 @Seb3736 的答案。

***在浏览器示例中***

```
<html>
<head>
    <script src="Global.js" language="javascript"></script>
    <script src="XMLWriter.js" language="javascript"></script>
    <script language="javascript" type="text/javascript">
        function genXML(){
            var XML = new XMLWriter();
            XML.BeginNode ("testing");
            XML.Node("testingOne");
            XML.Node("TestingTwo");
            XML.Node("TestingThree");
            XML.EndNode();
            //Do something... eg.
            console.log(XML.ToString); //Yes ToString() not toString()
        }
    </script>
</head>
<body>
    <input type="submit" value="genXML" onclick="genXML();">
</body>
</html> 
```

# java - PMD 规则：如何正确解决这个 DD 异常问题

> ID：14340898
> 
> 赞同：3
> 
> 时间：2013-01-15T15:21:56.060
> 
> 标签：java, code-analysis, pmd, dataflow, static-code-analysis

我有以下安卓代码：

```
public final List<MyObj> getList()  {
    Cursor cursor = null;
    try {
        final String queryStr = GET_LIST_STATEMENT;
        cursor = db.rawQuery(queryStr, new String[] {});
        List<MyObj> list = null;
        //here I get the data from de cursor.
        return list ;
    } catch (SQLiteFullException ex) {
        //do something to treat the exception.
    } finally {
        if (cursor != null) {
            cursor.close();
        }
    }
} 
```

当我对此代码运行 PMD 分析时，出现以下问题：`Found 'DD'-anomaly for variable 'cursor' (lines '182'-'185').`

*   第 182 行是`Cursor cursor = null;`：
*   第 185 行是：`cursor = db.rawQuery(queryStr, new String[] {});`

所以，我知道问题在于我在第 182 行进行了过早初始化（我从未读取过第 182 行和第 185 行之间的变量），但如果我不这样做，我就无法获得代码`cursor`在 finally 块中关闭。

在这种情况下该怎么办？忽略这个 PMD 问题？我可以将 PMD 配置为不引发这种特定类型的 DD 异常（不是所有 DD 异常）吗？PMD 是否应该足够聪明，不会引发这个问题？

另一个我认为不是真正问题的 DD 异常示例：

```
 Date distributeDate;
    try {
        distributeDate = mDf.parse(someStringDate);
    } catch (ParseException e) {
        Log.e("Problem", "Problem parsing the date of the education. Apply default date.");
        distributeDate = Calendar.getInstance().getTime();
    } 
```

In this case, the anomaly occurs with the `distributeDate` variable.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T16:56:58.823

The [documentation](http://pmd.sourceforge.net/pmd-5.0.1/suppressing.html) is pretty easy to understand:

Either you use annotations to suppress warnings:

```
// This will suppress UnusedLocalVariable warnings in this class
@SuppressWarnings("PMD.UnusedLocalVariable")
public class Bar {
 void bar() {
  int foo;
 }
} 
```

or you use a comment:

```
public class Bar {
 // 'bar' is accessed by a native method, so we want to suppress warnings for it
 private int bar; //NOPMD
} 
```

When it comes to your specific code, I'd say that the easiest way to handle it is to not use a `finally` block even though this would look like the perfect place for it.

# process - 操作系统中的后台进程

> ID：14340901
> 
> 赞同：1
> 
> 时间：2013-01-15T15:22:11.263
> 
> 标签：process, operating-system

这是一个普遍的问题，虽然我搜索了它，但无法找到一个完全令人满意的答案！一个操作系统一次运行许多进程，并且为了切换一个进程，它使用时间因素的概念。我的问题是，每当一个进程运行并切换到另一个进程时，前一个进程就会停止。那么当我们运行一个媒体文件（比如一些音频文件）并最小化它时，它是如何保持播放的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:48:08.750

就像在正常光照条件下，人类的视觉持久性约为 1/16 秒。

同样，处理器用于调度进程的“时间因素”是微小的，因此用户不会感觉到差异。

# mysql - 按语法 mysql 表排序的良好索引

> ID：14340903
> 
> 赞同：0
> 
> 时间：2013-01-15T15:22:28.957
> 
> 标签：mysql, sql-order-by

考虑这个查询：

```
Select * 
from table1 
where field1=x and field2=y 
order by field3 
```

我知道索引 (field1,field2) 会使性能更好。

字段3呢？索引是否会变得`order by`更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:32:57.303

也许这个链接[http://www.linux.org/article/view/what-are-database-indexes-](http://www.linux.org/article/view/what-are-database-indexes-)你会给你一些帮助......我认为field3中的索引很重要，如果表中的记录数量是几个。

# string - (VB6) 逐行读取文本文件查找特定单词

> ID：14340904
> 
> 赞同：2
> 
> 时间：2013-01-15T15:22:49.827
> 
> 标签：string, vb6, line-by-line

下午好 StackOverflow，

我刚刚在这里注册——我已经使用这个网站很长时间了，而且它似乎总是提供答案的网站，所以我决定参与其中。

事不宜迟，这是我的问题-

我正在为我和一个小组每月编写的 LAN 聚会编写一个 API，以帮助解决记分方面的问题。我的朋友正在为它编写后端，而我正在编写 VB6 前端。自从我写VB6以来已经有一段时间了，我从来没有像我在这里瞄准的前端等级那样认真地写它。

该程序的前提是 - 后端将我们正在玩的游戏中的事件实时写入文本文件 - 前端实时读取该文件。我现在想询问的部分是——

我知道您可以在 VB6 中逐行阅读文本文件。我希望程序“倾听”（可以这么说）某些流行语并使用它们定义的“值”来影响变量。这是它将要读取的文件类型的模拟示例-

```
******************
LANrealm Match Log
******************

Game:       Call of Duty 4
Game Type:  Team Deathmatch
Date:       01-Jan-2013
Time:       19:00:00
Players:    Tramp
        Roper
        d00b
        Pleb
Score Limit:    150

Event:  Game Start  
Event:  Roper killed Pleb (M4A1) shots=5 Feet=2 Body=2 Head=1 
Event:  Tramp committed suicide (Fall damage)
Event:  Tramp killed d00b (Grenade)
Event:  Pleb said "I'm saying something"
Event:  Pleb teamkilled d00b (G3) shots=3 Feet=0 Body=2 Head=1 
Event:  Game Finished

Winner: Roper

Roper:  Kills=1,Deaths=0,Suicides=0,Teamkills=0
Tramp:  Kills=1,Deaths=0,Suicides=1,Teamkills=0
Pleb:   Kills=0,Deaths=0,Suicides=0,Teamkills=1
d00b:   Kills=0,Deaths=0,Suicides=0,Teamkills=0 
```

好吧，我想只要看看这个，你就可以知道我想让程序从中挑选什么。如果我只是把它完全用逗号分隔会容易得多，但我想保持原始文本文件的可读性。但是，是的，以防万一您没有得到它，我希望程序能够识别“Roper”有 1 个“Kill”，依此类推。一个示例代码片段会很棒！

提前谢谢各位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T16:11:58.817

这是一个可用于加载文件内容的函数：

```
Public Function LoadFile(dFile As String) As String

    Dim ff As Integer

    On Error Resume Next

    ff = FreeFile
    Open dFile For Binary As #ff
        LoadFile = Space(LOF(ff))
        Get #ff, , LoadFile
    Close #ff

End Function 
```

接下来，您要拆分该文件的输出。首先，您需要知道后端将生成哪种类型的 EOL 终止字符。假设每一行都以回车符 (13) 和换行符 (10) 结尾，您可以使用以下代码将每一行存储到一个字符串数组中：

```
Dim lines() As String
lines = Split(LoadFile("LANrealm.log"), vbCrLf) 
```

最后，循环遍历每一行（使用 For...Next 循环）并查找您要提取的任何信息：

```
For i = 0 To Ubound(lines)
    ' Add here necessary logic to extract the information.
    ' Each line can be accessed by indexing the array as: lines(i)
Next 
```

希望这可以帮助您入门...

* * *

要测试代码：

*   启动 VB6 并创建一个新项目。VB6 将使用一种形式创建一个空项目
*   双击表格查看
*   右键单击工具箱并选择“组件”
*   找到“Microsoft Common Dialog Control”并选择它
*   点击确定
*   现在，将“CommonDialog”组件从工具箱拖到窗体上
*   双击表单查看其源代码
*   粘贴以下代码

注意：确保覆盖任何预先存在的代码

```
Option Explicit

Private Sub Form_Load()
    cDlg.DefaultExt = "txt"
    cDlg.Filter = "Text Files|*.txt;*.log"
    cDlg.ShowOpen

    If cDlg.fileName <> "" Then AnalyzeFile .fileName
End Sub

Private Sub AnalyzeFile(fileName As String)
    Dim fileContents As String
    Dim lines() As String
    Dim i As Integer

    fileContents = LoadFile(fileName)
    lines = Split(fileContents, vbCrLf)

    For i = 0 To UBound(lines)
        If InStr(1, lines(i), "event:", vbTextCompare) Then
            MsgBox "Line #" & i & " contains the string 'event'" + vbCrLf + vbCrLf + lines(i)
        End If
    Next
End Sub

Private Function LoadFile(dFile As String) As String
    Dim ff As Integer
    On Error Resume Next

    ff = FreeFile
    Open dFile For Binary As #ff
        LoadFile = Space(LOF(ff))
        Get #ff, , LoadFile
    Close #ff
End Function 
```

运行程序，当被要求提供文件时，选择将由后端生成的日志之一。

在本例中，程序会告诉您哪些行包含“事件信息”，例如“事件：Roper 杀死 Pleb (M4A1) 射击=5 英尺=2 身体=2 头部=1”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:56:54.953

我会看到实时读取和写入的一个问题是，如果两台或多台计算机或应用程序尝试打开同一个文件。这可能有点混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T05:12:44.477

好的，所以如果你真的想逐行读取你的文件，我会稍微改变你的日志文件。

```
******************
LANrealm Match Log
******************

Game:  Call of Duty 4
Game Type:  Team Deathmatch
Date: 01-Jan-2013
Time:1 9:00:00
Players: Tramp, Roper, d00b, Pleb
Score Limit:    150

Event:  Game Start  
Event:  Roper killed Pleb (M4A1) shots=5 Feet=2 Body=2 Head=1 
Event:  Tramp committed suicide (Fall damage)
Event:  Tramp killed d00b (Grenade)
Event:  Pleb said "I'm saying something"
Event:  Pleb teamkilled d00b (G3) shots=3 Feet=0 Body=2 Head=1 
Event:  Game Finished

Winner: Roper

Stat: Roper Kills=1,Deaths=0,Suicides=0,Teamkills=0
Stat: Tramp Kills=1,Deaths=0,Suicides=1,Teamkills=0
Stat: Pleb Kills=0,Deaths=0,Suicides=0,Teamkills=1
Stat: d00b Kills=0,Deaths=0,Suicides=0,Teamkills=0 
```

您可以使用它逐行读取文件。

```
 Dim FileNo As Integer
   Dim TempData As String
   Dim TempStr As String
   FileNo = FreeFile
   Open "c:\game.log" For Input As FileNo
      Do
         Line Input #FileNo, TempStr
         TempData = TempData & TempStr or do what ever you want it to do with that line.
         DoEvents
      Loop Until EOF(FileNo)
   Close #FileNo
   MsgBox TempData 
```

但是，我建议将整个文件读入一个字符串，然后解析出你想要的信息。如果你这样做了，你可以选择你可能想要的信息，比如游戏名称等......

试试这个。创建一个新模块，并将其粘贴到其中。

```
Public Function ParseData(DataSTR As String, StartSTR As String, EndSTR As String) As String
   Dim Split1
   Dim Split2
   Split1 = Split(DataSTR, StartSTR, , 1)
   Split2 = Split(Split1(1), EndSTR, , 1)
   SplitParse = Split2(0)
End Function 
```

然后将其添加到命令按钮。

```
Private Sub Command2_Click()
 Dim FileNo As Integer
   Dim TempData As String
   FileNo = FreeFile
   Open "c:\game.log" For Input As FileNo
      TempData = Input(LOF(FileNo), FileNo)
   Close
   MsgBox TempData
   MsgBox Trim(ParseData(TempData, "Game:", Chr(10)))
End Sub 
```

现在，这只是您可以做的一个示例。

# sql-server - 行锁sql server

> ID：14340907
> 
> 赞同：0
> 
> 时间：2013-01-15T15:22:53.407
> 
> 标签：sql-server, locking, row

我必须锁定表中的一行以进行读取/更新。我已经写了下面的代码，但它花费了太多时间。请建议任何其他方法。

```
BEGIN TRANSACTION 
DECLARE @v_id_counter NUMERIC;  
DECLARE @v_new_rows NUMERIC;
SET @v_new_rows = 10;   

        SELECT @v_id_counter = id 
        FROM tbl_keys [UPDLOCK  ROWLOCK] with (Xlock) 
        WHERE name='tbl_docs'

        update tbl_keys set id = (@v_id_counter + @v_new_rows ) where name='tbl_docs'        
COMMIT; 
```

`tbl_keys`：它存储许多表的主键及其替代序列

`tbl_docs`：这是我必须插入 N 行的表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:28:14.130

为什么要在更新前读取值？只需使用更新中的值，您根本不需要事务：

```
DECLARE @v_new_rows NUMERIC;
SET @v_new_rows = 10;   

update tbl_keys set id = id + @v_new_rows where name='tbl_docs' 
```

# javascript - 使用下拉菜单和 Javascript 显示隐藏 Divs？

> ID：14340909
> 
> 赞同：0
> 
> 时间：2013-01-15T15:22:58.067
> 
> 标签：javascript, html, drop-down-menu, html-select

我想要做的是使用 html 下拉菜单隐藏或显示我的 HTML 中的 div。首先完全在 javascript 中执行此操作但有问题。

基本上，用户会在 ddl 中选择一个部门，比如“pub-chains”，与该部门关联的 pub div 将显示在页面上，而其他 div 则隐藏在视图之外，任何有这样做经验的人吗？

HTML

```
<html>
  <head>Select a Business Sector:</head>
  <form>
                <p>
                <select id="dropdown" name="dropdown">
                    <option value="Pub-Chains" selected="selected"> Pub Chains </option>
                    <option value="Councils">Councils </option>
                    <option value="Property">Property </option>
                    <option value="Various">Various </option>
                    <option value="Universitys">Universitys </option>
                </select>
                </p>
            </form>
  <body>

<div id="Pub-Chains">
    <a href="http://www.marstons.co.uk/"><img src="gfx/Marstons.jpg" alt="Marstons"></a>
    <a href="http://www.charleswells.co.uk/"><img src="gfx/cw.jpg" alt="Charles Wells"></a>
    <a href="http://www.enterpriseinns.com/Pages/Home.aspx"><img src="gfx/EnterpriseInns.jpg" alt="Enterprise Inns Pubs"></a>
    <a href="http://www.greeneking.co.uk/"><img src="gfx/gk.jpg" alt="Greene King"></a>
    <a href="http://www.robinsonsbrewery.com/"><img src="gfx/RobinsonBrewery.jpg" alt="Robinson Brewery"></a>
</div>

<div id="Councils">
    <a href="http://www.bassetlaw.gov.uk/"><img src="gfx/BassetLaw.jpg" alt="BassetLaw Council"></a>
    <a href="http://www.harrogate.gov.uk/"><img src="gfx/Harrogate.jpg" alt="Harrogate Council"></a>
    <a href="http://www.n-somerset.gov.uk/"><img src="gfx/nsc.jpg" alt="North Somerset Council"></a>
    <a href="http://www.worcester.gov.uk/"><img src="gfx/wsc.jpg" alt="Worcester City Council"></a>
    <a href="http://www.hyndburnbc.gov.uk/site/index.php"><img src="gfx/hc.jpg" alt="Hyndburn Council"></a>
    <a href="http://www.chesterfield.gov.uk/"><img src="gfx/cbc.jpg" alt=""></a>
    <a href="http://www.west-dunbarton.gov.uk/"><img src="gfx/wdc.jpg" alt="West Dunbartonshire Council"></a>
</div>

<div id="Property">
    <a href="http://www.chiverscommercial.co.uk/"><img src="gfx/cc.jpg" alt="Chivers Commercial"></a>
    <a href="http://www.colliers.com/en-GB/UK"><img src="gfx/colliers.jpg" alt="Colliers International"></a>
    <a href="http://www.savills.co.uk/"><img src="gfx/savills.jpg" alt="Savills Estate Agents"></a>
    <a href="http://www.sandersonweatherall.co.uk/"><img src="gfx/Sandersonw.jpg" alt="Sanderson Weatherall"></a>
    <a href="http://www.campbellgordon.co.uk/index.aspx"><img src="gfx/campbellgordon.jpg" alt="Campbell Gordon"></a>
    <a href="http://www.gva.co.uk/"><img src="gfx/gva.jpg" alt="gva"></a>
    <a href="http://www.struttandparker.com/"><img src="gfx/strutt&parker.jpg" alt="Strutt and Parker"></a>
    <a href="http://www.fishergerman.co.uk/"><img src="gfx/fishergerman.jpg" alt="Fisher German"></a>
    <a href="http://www.carterjonas.co.uk/"><img src="gfx/carterjonas.jpg" alt="Carter Jonas"></a>
    <a href="http://www.derbyhomes.org/"><img src="gfx/derbyhomes.jpg" alt="Derby Homes"></a>
    <a href="http://www.knightfrank.co.uk/"><img src="gfx/KnightFrank.jpg" alt="Knight Frank"></a>
    <a href="http://www.smithsgore.co.uk"><img src="gfx/smithsgore.jpg" alt="Smiths Gore"></a>
    <a href="http://www.eastofengland.coop/"><img src="gfx/eastofenglandcoop.jpg" alt="East of England Coop"></a>
    <a href="http://www.Riverside.co.uk"><img src="gfx/rside.jpg" alt="Riverside"></a>
    <a href="http://www.midlandheart.org.uk/"><img src="gfx/mheart.jpg" alt="Midland Heart"></a>
</div>

<div id="Various">
    <a href="http://www.co-operative.coop/"><img src="gfx/coop.jpg" alt="The Co-operative"></a>
    <a href="http://www.anesco.co.uk/site/en/content-folder/home"><img src="gfx/anesco.jpg" alt="Anesco"></a>
    <a href="http://www.savills.co.uk/"><img src="gfx/savills.jpg" alt="Savills Estate Agents"></a>
</div> 
```

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:37:16.520

[干得好。](http://jsfiddle.net/xUAs9/2/)使用 jQuery：

```
var select = $( '#dropdown' );

function showTab( name ) {
  name = '#' + name;
  $( 'div' ).not( name ).hide();
  $( name ).show();
}

select.change( function() {
  showTab( $( this ).val() );   
});

showTab( select.val() ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:43:10.543

我将使用本机 Javascript 试一试：

**编辑**：特别感谢 Khez 建议使用三元运算符。

```
document.getElementById('dropdown').onchange = function(e) 
{

    var selectedValue = document.getElementById('dropdown').value,
        options = document.getElementById('dropdown').options,
        iter;

    for (iter = options.length - 1; iter >= 0; iter -= 1)
    {
        document.getElementById(options[iter].value).style.display =  
            (options[iter].value === selectedValue ? 'block' : 'none');
    }
} 
```

# automation - 边缘动画自动化

> ID：14340914
> 
> 赞同：0
> 
> 时间：2013-01-15T15:23:09.307
> 
> 标签：automation, jquery-animate, adobe-edge

大多数 Adob​​e 产品都能够使用 AppleScript 或 ExtendScript/JavaScript 实现自动化，但我似乎在 Edge Animate 中没有看到相同的功能。也许我只是错过了一些东西。我希望能够执行诸如打开文档、添加图像、保存文档等操作。有没有人能够找到类似的东西？我做了许多不同的搜索，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:35:14.533

我不确定你在问什么，但我认为你在谈论添加自己的 javascript，这可以通过单击动画中任何元素旁边的大括号来完成，或者点击 ctrl+E查看完整代码。

其次，在打开文档方面，您应该只需双击它创建的文件，保存文档就像在任何其他程序中一样，file>save(as)。

添加图像就像文件 > 导入（热键 = ctrl + I）一样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T14:50:56.447

不完全是我所要求的，但我最终找到了解决方案。我一直在寻找一种能够控制 Edge Animate 的机制，类似于分别通过 VBScript 和 JavaScript 控制 InDesign、Photoshop 和 Flash。这使您可以执行诸如从外部脚本将图像导入文档、保存文档、导出内容等操作。最后，我编写了一些代码，将击键发送到应用程序并解决了问题，尽管并不理想， 恕我直言。不过，感谢您的回复。

# jquery - Dojo 相当于 jQuery $('html')

> ID：14340918
> 
> 赞同：3
> 
> 时间：2013-01-15T15:23:18.050
> 
> 标签：jquery, html, dom, dojo

在 Dojo 中有一种选择文档正文的简写方式：http: [//dojotoolkit.org/reference-guide/1.7/dojo/body.html](http://dojotoolkit.org/reference-guide/1.7/dojo/body.html)

但是如何选择 DOM 树的顶部，即 HTML 元素本身？在 jQuery 中，这可以使用 $('html') 来完成，我正在寻找与 Dojo 中的该方法等效的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:30:40.697

```
require(["dojo/query"], function(query){
  var html = query("html")[0];
}); 
```

# linux - 如何在脚本中以其他用户身份执行代码？

> ID：14340919
> 
> 赞同：0
> 
> 时间：2013-01-15T15:23:19.657
> 
> 标签：linux, bash, sudo, su

我正在编写一个自动安装邮件服务器的脚本，但是我的一些代码必须从源代码编译，因为它不在存储库中。我对此没有任何问题，但是，我不知道从以 root 身份运行的脚本中最好和最安全的方法是什么。我知道我必须创建一个非特权用户来进行构建，但是以下哪一个是推荐的方法？

1

```
su -c "command" - builduser
su -c "othercommand" - builduser 
```

2

```
sudo -u builduser command
sudo -u builduser othercommand 
```

3

```
su -c "externalscriptwithcommands.sh" - builduser 
```

理想情况下，我想在执行后以 root 身份继续我的脚本；我觉得选项 3 可能是最理想的，但我希望您能对此提出意见。

# java - java将对象保存在cpu寄存器中

> ID：14340920
> 
> 赞同：2
> 
> 时间：2013-01-15T15:23:21.413
> 
> 标签：java, cpu-registers

在 C 编程中，为了在 CPU 寄存器中保留任何变量，我们使用`register`说明符。类似地在java中将一个对象保存在CPU缓存中，java中是否有一个说明符

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T15:25:26.230

不。

Java 是一种高级语言（当然与 C 相比），因此不可能干预这些低级功能。

与 C 的另一个区别是 Java 需要一个 VM 才能运行，这个 VM 可能需要许多寄存器，并且不时变化。因此，不知道有多少和哪些寄存器可用，因此您可以“认领”一个。当然，由于每个 VM 的行为可能不同（内部），所以确实有办法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T15:27:03.317

在 Java（或标准 C AFAIK）中没有这样的控制对象是否在缓存中。您通常不需要`register`在 C 中给出提示来将值放入寄存器中，也不保证它将在寄存器中。

在 Java 中，JIT 确定哪些变量在寄存器中，CPU 确定哪些对象（或它们的一部分）在哪个缓存中（你可以有三个或更多）

你想解决什么样的问题？

顺便说一句：如果您尝试使 JIT 变得更聪明，那么您很可能会得到更慢的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T15:26:13.203

不，Java 编译器（应该...）会处理这个问题。现代编译器不再需要这样的人工提示（大多数时候......）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T15:30:12.713

Java 规范没有为程序员提供任何这样的特性。但是 JVM 仍然可以使用寄存器或其他内部内存位置进行优化。

但是 Java 确实提供了一个**不在寄存器中缓存或存储值**的特性。这是通过声明一个字段/数据成员**volatile**来完成的。

# objective-c - 如何为 -isEqual 实现 -hash: 与 OR 条件？

> ID：14340921
> 
> 赞同：4
> 
> 时间：2013-01-15T15:23:22.777
> 
> 标签：objective-c, cocoa, equality

假设我有这个`-isEqual:`方法：

```
- (BOOL)isEqual:(MyObject*)aObject {
    if (![aObject isKindOfClass:[MyObject class]]) {
        return NO;
    }

    return ([self.dateString isEqualToString:aObject.dateString] || [self.date isEqual:aObject.date]) &&
     ((!self.title && !aObject.title) || [self.title isEqualToString:aObject.title]);
} 
```

`date`因此，如果OR`dateString`相等且 相等，则认为两个对象`title`相等。我们在这里假设`date`并且`dateString`不能为零，否则我们也必须检查它。`date`我们进一步假设和之间没有已知的关系`dateString`。

如何实现相应的`-hash`方法以实现两个相等对象必须具有相同哈希的要求？

我试图通过遵循这个[伟大的算法](https://stackoverflow.com/a/254380/235297)来实现它，但我很难将两个日期的 OR 条件转换为适当的哈希方法。

（诚​​然，这个问题有点学术性，因为人们可以质疑这种平等是否有意义。由于我有兴趣找到一个通用的解决方案，请不要发布答案我应该改变我的`isEqual:`。除非它可以正式证明没有合适的`-hash`方法存在。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:05:42.267

您将完全忽略日期和日期字符串，仅根据标题创建哈希值。

```
- (NSUInteger)hash
{
    return self.title.hash
} 
```

这将确保相等的对象始终具有相同的哈希值。具有相同哈希的对象不需要相等。

# c# - 实体框架模型优先设计中的存储库模式

> ID：14340923
> 
> 赞同：0
> 
> 时间：2013-01-15T15:23:25.013
> 
> 标签：c#, mysql, entity-framework, repository-pattern, ef-model-first

我找不到任何适合存储库模式实现的平台的确切信息。我有一个用 VS 2010 编写的 MySQL 数据库和控制台应用程序。我使用的是 Entity Framework 4，我的数据库通过模型优先的方法导入到 VS 项目中。此配置是否适合实现存储库模式或者我必须使用 min. EF 5、VS 2012、代码优先方法、MSSQL 等？如果我的配置适合实现存储库模式，你会建议我一篇文章来实现存储库模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:33:23.393

实现模式与您可能想要使用的技术框架无关。这都是关于抽象的。因此，如果您真的了解一种模式，您就可以实现它。好吧，您不应该尝试在汇编程序中实现例如桥接模式。;o)

但是，如果您要使用具有面向对象概念的编程语言，例如 C#、VB、C++ 或 Java（我知道，还有很多其他可能性），您将实现您的目标。

# java - oracle数据库中的序列

> ID：14340925
> 
> 赞同：0
> 
> 时间：2013-01-15T15:23:29.360
> 
> 标签：java, oracle, jpa, eclipselink

我需要对表使用 GenerationType.sequence 策略，我在类中编写了以下注释：

```
@Id
@SequenceGenerator(name="SEQ_PERFIL", sequenceName="SEQ_PERFIL",allocationSize=1)
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator="SEQ_PERFIL")
@Column(name="PER_CODPERFIL", nullable = false)
private long perCodperfil; 
```

要插入，我使用以下代码：

```
entityManager.getTransaction().begin();
entityManager.persist(entity);
entityManager.flush();
entityManager.refresh(entity);
entityManager.getTransaction().commit(); 
```

当我插入序列时递增（我在数据库中显示），但插入失败，因为主键为空

```
It said :
Error Code: 1400
Call: INSERT INTO PERFIL (PER_CODPERFIL) VALUES (?) bind => [1 parameters bound]
Query: InsertObjectQuery(24) 
```

它说 PER_CODPERFIL 为空 我使用 Eclipse-link 和 Oracle DB

eclipse链接记录的句子是：

```
15:05:36,651 INFO    [EclipseLog] SELECT SEQ_SIAC_PERFIL.NEXTVAL FROM DUAL   
15:05:36,761 INFO    [EclipseLog] INSERT INTO PERFIL (PER_CODPERFIL) VALUES (?) bind => [null]
15:05:36,773 INFO    [EclipseLog] SELECT 1 FROM DUAL 
```

# javascript - Ruby on Rails，javascripts冲突

> ID：14340929
> 
> 赞同：0
> 
> 时间：2013-01-15T15:23:48.807
> 
> 标签：javascript, ruby-on-rails

我将此[示例用于 ruby​​ 中的文件上传](https://github.com/tors/jquery-fileupload-rails-paperclip-example)器和[highcharts](http://www.highcharts.com/)应用程序。为了让图表正常工作，我必须将以下文件添加到我的 app/assets/javascript 中：

highcharts.js
jquery-1.4.2.min.js
rais.js

和我的charts.html.erb下面的代码：

```
 <%= stylesheet_link_tag "application" %>
    <%= javascript_include_tag "jquery-1.4.2.min", "rails", "highcharts" %>
    <%= csrf_meta_tag %> 
```

我的图表看起来很漂亮，但我无法上传文件。这些javascript等之间存在某种冲突。我想将这3个文件移动到另一个目录并为charts.html.erb中的代码定义一个路径，以便它可以找到所有必需文件的位置。

我不知道在代码中的哪里写一个定义的路径。像这样的东西：

```
 <%= stylesheet_link_tag "application" %>
    <%= javascript_include_tag "public/javascripts/jquery-1.4.2.min", "public/javascripts/rails", "public/javascripts/highcharts" %>
    <%= csrf_meta_tag %> 
```

但它告诉我控制台中的错误：

```
Started GET "/assets/public/javascripts/rails.js" for 127.0.0.1 at 2013-01-15 16:21:19 +0100
Served asset /public/javascripts/rails.js - 404 Not Found (33ms)

ActionController::RoutingError (No route matches [GET] "/assets/public/javascripts/rails.js") 
```

：

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:50:39.057

您不需要在最新的 rails 版本中明确定义每个 javascript 文件名。

这是因为`application.js`文件需要树形的每个 js。

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

你只需要那样做——

```
<%= stylesheet_link_tag    "application", :media => "all" %>
<%= javascript_include_tag "application" %>
<%= csrf_meta_tags %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:54:48.680

回答您的问题：您可以定义自己的资产路径（但不推荐），只需在路径前添加斜杠即可。像 `<%= javascript_include_tag "/public/javascripts/jquery-1.4.2.min.js", "/public/javascripts/rails.js", "/public/javascripts/highcharts.js" %>`

# css - 垂直子菜单布局和行为不正确

> ID：14340932
> 
> 赞同：0
> 
> 时间：2013-01-15T15:23:54.713
> 
> 标签：css, submenu, onhover

垂直子菜单位置正确，但链接彼此重叠。悬停在主菜单时不会隐藏。悬停在菜单外时隐藏。我不知道在 css 中添加/更改什么。

[垂直子菜单](http://www.villalotus.net/TEST/test.html)

```
nav {
    padding-top: 183px;
    margin-left: auto;
    margin-right: auto;
}
    ul {
    padding: 0;
    margin: 0;
}
nav ul {
    list-style: none;
    font-weight: bold;
    font-size: 20px;
    margin: 5px;
    width: 200px;
}
nav ul ul {
    display: none;
    margin: 0px;
    padding: 0px;
}
nav ul li {
    float: left;
}
nav ul a {
    display: block;
    width: 145px;
    text-align: center;
    text-decoration: none;
    color: #fff;
    border: 1px solid #004c99;
    border-radius: 8px;
    margin-right: auto;
    margin-left: auto;
    padding-top: 5px;
    padding-right: 9px;
    padding-bottom: 5px;
    padding-left: 9px;
}
nav ul a:active       {
    background: rgba(255,255,255,0.4);
    color: #FFF;
}
nav ul li a:hover, ul a:focus {
    text-decoration: none;
    background-color: #6699cc;
    color: #FFFFFF;
}
nav ul a:link, nav ul a:visited {
    background: rgba(255,255,255,0.2);
    color: #FFFFFF;
}
nav ul li a {
    display: block;
    margin-top: 0px;
}
nav ul ul li {
    float: none;
    position: relative;
}
nav ul ul li a {
    color: #fff;
    margin-top: -35px;
    position: relative;
    margin-left: 165px;
}
nav ul ul li a:hover {
    background: #6699cc;
}
nav ul ul li a:active, ul ul li a:link , ul ul li a:visited{
    background-color: #3370AD;
}
nav ul li:hover {
    margin-top: 0px;
}
nav ul li:hover > ul{
    display: block;
    position: absolute;
}
nav ul:after {
    content: "";
    clear: both;
    display: block;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:34:30.520

改变你的 nav ul li a { display: block; margin-top: 0px;} 到 ... margin-top:5px 看看是否可以完成这项工作。无论如何，这将解决间距问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:36:00.453

当我错误地嵌套子菜单时，这发生在我身上：

```
<ul id="main menu">

    <li> 
        <a>Menu item</a> 
        <!-- DO NOT CLOSE THIS LI TAG YET! -->

        <ul>
            <li>Submenu item</li>
        </ul>

    </li> <!-- NOW YOU CAN CLOSE IT -->

</ul> 
```

# c# - NUnit：在 TearDown() 中访问失败消息

> ID：14340934
> 
> 赞同：3
> 
> 时间：2013-01-15T15:23:57.750
> 
> 标签：c#, testing, nunit, automated-tests, teardown

我正在尝试将在 NUnit 中运行的自动化测试的结果记录在一个小型数据库中，以便出于各种原因轻松访问和更安全地记录数据。（大约有 550 个自动化测试，运行它们可能需要几天时间）

我已经可以访问测试的结束状态（通过/失败/错误/取消/跳过等），但我想记录额外的详细信息。

我希望在 TearDown() 中执行此操作。

这是我能找到的最接近的东西，但没有为我提供答案： [https ://groups.google.com/forum/?fromgroups=#!msg/nunit-discuss/lXxwECvpqFc/IbKOfQlbJe8J](https://groups.google.com/forum/?fromgroups=#!msg/nunit-discuss/lXxwECvpqFc/IbKOfQlbJe8J)

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T19:37:12.053

我相信您将能够通过[NUnit EventListeners](http://www.nunit.org/index.php?p=eventListeners&r=2.5)获得所需的信息。我自己没有使用过这些，但我已将它们添加为书签，以执行与您要完成的任务类似的操作。

这是您将使用的界面。希望您的`TearDown`方法会在之前被调用`TestFinished`，但我无法验证这一点。

```
public interface EventListener
{
    void RunStarted(string name, int testCount );
    void RunFinished(TestResult result);
    void RunFinished(Exception exception);
    void TestStarted(TestName testName);
    void TestFinished(TestResult result);
    void SuiteStarted(TestName testName);
    void SuiteFinished(TestResult result);
    void UnhandledException(Exception exception);
    void TestOutput(TestOutput testOutput);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:41:00.567

对于那些想要一些 skellie 代码的人：

```
[NUnitAddinAttribute(Type = ExtensionType.Core,
Name = "Database Addin",
Description = "Writes test results to the database")]
public class MyExtension :IAddin, EventListener
{
//some private attributes to hold important data

//you must provide the Install method
    public bool Install(IExtensionHost host)
    {
        //I also built my connection string in here
        IExtensionPoint listeners = host.GetExtensionPoint("EventListeners");
        if (listeners == null)
             return false;

        listeners.Install(this);
        return true;
    }

//you must also provide all the event handlers, 
//but they don't have to actually do anything if they are not used.
//e.g.

    public void TestStarted(NUnit.Core.TestName testName)
    {
        //This saved the start time of the test
        _start =  DateTime.Now;
    }

    public void TestFinished(NUnit.Core.TestResult result)
    {
        //LogTest connected to the databse and executed a proc to 
        //insert the log, was quite simple
        LogTest((result.Message == null? "" : result.Message),
            result.ResultState,
            result.Name,
            _start,
            DateTime.Now);
    }

    public void TestOutput(NUnit.Core.TestOutput testOutput)
    {
         //this is one of the unused event handlers, it remains empty.
    }
    //etc..

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-15T17:46:39.557

**NUnit 3.0**在 TestContext.CurrentContext 中包含了这些细节**。~**

**注意：** 如果您将 VS 测试适配器作为扩展包含在内，则使用事件处理程序将导致测试运行两次。一次用于扩展，一次用于实现事件处理程序所需的包含 dll。

# html - Firefox中的可点击电话协议标签

> ID：14340935
> 
> 赞同：13
> 
> 时间：2013-01-15T15:23:59.630
> 
> 标签：html, firefox, tel

我有一个非常标准的电话号码标签。它适用于**除**Firefox 之外的所有应用程序。我认为电话协议是标准的 - 有没有我不知道的解决方法？

```
<a class="tel" href="tel:8001234567">(800) 123-4567</a> 
```

火狐错误信息：

> 地址不明白
> 
> Firefox 不知道如何打开这个地址，因为协议 (tel) 没有与任何程序相关联。
> 
> 您可能需要安装其他软件才能打开此地址。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T15:33:15.213

Firefox 并不知道每个协议都有一个程序。在这种情况下，用户需要在设置中指定一个程序。对此没有服务器端的解决方法，除了用`callto:`Skype 引入的非官方方法替换它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-05T10:29:22.823

我知道这是一个老问题，但如果您需要解决方法，这可能会有所帮助：

```
var isFirefox = (navigator.userAgent.toLowerCase().indexOf('firefox') > -1);
var isMobile = (typeof window.orientation !== "undefined") ||
               (navigator.userAgent.indexOf('IEMobile') !== -1);

if(isFirefox && !isMobile) {
    $('a[href^="tel:"]').click(function() { return false; });
} 
```

* * *

**笔记：**

正如@Peter 指出的那样，这段代码肯定会禁用`tel:`Firefox 上的链接。我添加了对移动设备的检测（[在此处找到](https://coderwall.com/p/i817wa/one-line-function-to-detect-mobile-devices-with-javascript)）以限制副作用，但它仍然禁用可以在桌面上处理它的第三方应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-18T09:28:36.027

电话链接在 Firefox 中有效，如果没有安装电话应用程序，它会通知您为什么无法拨打该号码。这不是一条错误消息，正如评论指出的那样，“解决方案”是不合适的。我在我的响应式网站中为 pc 用户使用了这个提示：

```
<a class="tel" href="tel:8001234567" 
    title="Clicking this link only works on a mobile phone">
  (800) 123-4567
</a> 
```

虽然不是确切的事实，但它将向大多数没有安装电话应用程序的 PC 用户解释他们不应该将电话号码用作可点击链接，而没有鼠标的移动用户将永远不会看到工具提示. 使用手机应用程序的桌面用户可能会习惯点击手机链接，并且还了解工具提示适用于没有手机应用程序的桌面用户。

我没有卸载我的邮件来测试相同的消息是否显示在带有`href="mailto:..."`. 该消息对于处理任何未安装的协议有点通用，因此对某些用户来说听起来有点神秘。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-28T11:53:45.460

我希望我的脚注不会过时。

当前版本的 firefox 可以很好地处理 href="tel: (在 Windows 10 上，它要求我为电话定义所需的应用程序)。

但：

在 tel-link 上的 onclick 事件之后，firefox 似乎仍然存在 AJAX 调用问题。

HTML：

```
<a href="tel:01234567" onclick="log_action(123,'phonecall')">anynumber</a> 
```

Javascript（实验性）：

```
function log_action(aid,action2){
$.getJSON('myscript_ajax.php', 
  {action: "log_action",
  actionid: aid,
  action2: action2
  })
  .done(function(data)
  {   
    console.log(data);
  })                
  .error(function(jqXHR, textStatus, errorThrown) {
    console.log("error " + textStatus);
    console.log("incoming Text " + jqXHR.responseText);
  });
} 
```

虽然 chrome 按预期记录来自 php-script 的响应，但 firefox 会显示带有空文本状态和响应文本的错误通知。

如果安装了电话，也许 AJAX 请求可以正常工作，但我没有，并且开发服务器应用程序，我也不知道客户端是否有。

# wpf - 在 WPF 自定义控件中处理 MouseWheel 事件

> ID：14340937
> 
> 赞同：4
> 
> 时间：2013-01-15T15:24:14.260
> 
> 标签：wpf, mousewheel

我正在为具有用户控件的游戏制作地图编辑器，该控件具有图像。在该控件中，我将事件附加`MouseWheel`到它，但我注意到两个问题，我希望能够更好地理解它的行为方式以及如何正确实现它。

一方面，该事件似乎仅在鼠标悬停在它上方而不是在控件处于焦点时触发。如果可能的话，我想切换它并能够触发事件，无论鼠标在哪里，只要该控件处于焦点状态，第二个问题是当数字为正时检查增量可以正常工作，但是当我得到当它为负数时返回一个数字，我得到一个 0xfffffffd 或该范围内的值。如果我总是得到积极的东西，我将如何区分正值和负值之间的差异？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-15T17:35:41.503

如果您想`MouseWheel`为焦点元素触发事件，请尝试：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        this.MouseWheel += OnMouseWheel;
    }

    IInputElement focusedElement;

    private void OnMouseWheel(object sender, MouseWheelEventArgs e)
    {
        if (focusedElement is TextBox)
        {
            var tbx = focusedElement as TextBox;

            //do something
        }
    }

    protected override void OnPreviewLostKeyboardFocus(KeyboardFocusChangedEventArgs e)
    {
        focusedElement = e.NewFocus;
    }
} 
```

# cuda - CUDA 中 if/else 块内的线程同步

> ID：14340938
> 
> 赞同：0
> 
> 时间：2013-01-15T15:24:19.500
> 
> 标签：cuda, parallel-processing, gaussian, thread-synchronization

我想在 CUDA 中实现高斯消除。但是我在 if/else 中的线程同步有问题。

这是我的简单代码：

```
__device__ bool zr(float val) {
    const float zeroEpsilon = 1e-12f;
    return fabs(val) < zeroEpsilon;
}

__global__ void gauss(float* data, unsigned int size, bool* success) {
    //unsigned int len = size * (size + 1);
    extern  __shared__ float matrix[];
    __shared__ bool succ;
    __shared__ float div;
    unsigned int ridx = threadIdx.y;
    unsigned int cidx = threadIdx.x;
    unsigned int idx = (size + 1) * ridx  + cidx;
    matrix[idx] = data[idx];
    if (idx == 0)
        succ = true;
    __syncthreads();
    for (unsigned int row = 0; row < size; ++row) {
        if (ridx == row) {
            if (cidx == row) {
                div = matrix[idx];
                if (zr(div)) {
                    succ = false;
                    div = 1.0;
                }
            }
            __syncthreads();
            matrix[idx] = matrix[idx] / div;
            __syncthreads();
        }
        else {
            __syncthreads();
            __syncthreads();
        }
        if (!succ)
            break;
    }
    __syncthreads();
    if (idx == 0)
        *success = succ;
    data[idx] = matrix[idx];
    __syncthreads();
} 
```

它是这样工作的：

1.  将矩阵复制到共享内存中。
2.  遍历行。
3.  将行除以对角线上的值。

问题出在 for 循环内的 if/else 块内 - 死锁：

```
==Ocelot== PTX Emulator failed to run kernel "_Z5gaussPfjPb" with exception: 
==Ocelot== [PC 30] [thread 0] [cta 0] bar.sync 0 - barrier deadlock:
==Ocelot== context at: [PC: 59] gauss.cu:57:1 11111111111111111111
==Ocelot== context at: [PC: 50] gauss.cu:54:1 11111111111111111111
==Ocelot== context at: [PC: 33] gauss.cu:40:1 00000000000000011111
==Ocelot== context at: [PC: 30] gauss.cu:51:1 11111111111111100000 
```

我不知道为什么会这样。当我从 if/else 块中删除同步时，它可以工作。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:41:19.193

`__syncthreads()`等待直到一个线程块的所有线程都达到这一点并完成它们的计算。由于您的 if/else 条件，一些线程在 else-loop 中等待，一些在 if-loop 中等待，它们相互等待。但是 if 循环中的线程永远不会到达 else 循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:41:26.577

`__syncthreads()`正在这样做。

当一条`thread`到达`__syncthreads`指令时，它会阻塞/停止，当这种情况发生时`warp`（32个线程）也会阻塞，它会阻塞，直到`threads`同一条指令中的所有线程`block of threads`都到达该语句。

但是，如果一个经线或同一线程中的一个线程`block of threads`没有到达相同的`__syncthreads`语句，它将死锁，因为至少有一个`thread`正在等待所有其他线程`threads`到达相同的语句，如果没有发生，您将得到一个**deadlock**。

您现在所做的是将至少一个人排除在`threads`参与`__syncthreads`事件之外，方法是`__syncthreads`在 if 语句中放置并非所有线程都会到达的语句。因此，**死锁**。

# android - 为什么android设备管理不能正常工作

> ID：14340940
> 
> 赞同：1
> 
> 时间：2013-01-15T15:24:25.863
> 
> 标签：android, xml, administration

我在屏幕上设置了两个按钮。每当我按下第一个按钮时，它都会禁用相机。（作为管理员）

我已经设置了清单；

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.firstapplication.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />

        </intent-filter>
    </activity>
    <!-- This is where we register our receiver -->
    <receiver
        android:name=".DemoDeviceAdminReceiver"
        android:permission="android.permission.BIND_DEVICE_ADMIN" >
        <intent-filter>

            <!-- This action is required -->
            <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" />
        </intent-filter>

        <!-- This is required this receiver to become device admin component. -->
        <meta-data
            android:name="android.app.device_admin"
            android:resource="@xml/device_admin_sample" />
    </receiver>

</application> 
```

我将代码编写为；

```
public class MainActivity extends Activity  {

static final int ACTIVATION_REQUEST = 47; // identifies our request id
DevicePolicyManager devicePolicyManager;
ComponentName demoDeviceAdmin;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // ...

    // Initialize Device Policy Manager service and our receiver class
    devicePolicyManager = (DevicePolicyManager)getSystemService(Context.DEVICE_POLICY_SERVICE);
    demoDeviceAdmin = new ComponentName(this, DemoDeviceAdminReceiver.class);
}

/* begin, camera management block */
static boolean click = false ;
private OnClickListener setCamera = new OnClickListener() {
    public void onClick(View v) {
      if ( click == false ) {
          startCamera();
          click = true ;
      }
      else {
          stopCamera();
          click = false ;
      }
      activate () ; // activate device policy manager
    }
};
private void startCamera(){
        if(getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA)){ 
            camera.unlock();    
        } else {
                 ;
        }
    }

@SuppressLint("NewApi") private void stopCamera(){
    devicePolicyManager. setCameraDisabled(demoDeviceAdmin, true);
}

/* end, camera management block */
private OnClickListener closeApplication = new OnClickListener() {
    public void onClick(View v) {
     finish ();
    }
};
void initializeDPM ( ) {
    if (!devicePolicyManager.isAdminActive(demoDeviceAdmin)) {

            Intent intent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
            intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN,
                    demoDeviceAdmin);
            intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION,
            "Additional text explaining why this needs to be added.");
            startActivityForResult(intent, ACTIVATION_REQUEST);
    } else {
            devicePolicyManager.lockNow();
    }
}

public void activate ( ) {
        // Activate device administration
        Intent intent = new Intent(
        DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
        intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN,
        demoDeviceAdmin);
        intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION,
        "told me to do this");
        startActivityForResult(intent, ACTIVATION_REQUEST);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
        case ACTIVATION_REQUEST:
            if (resultCode == Activity.RESULT_OK) {
                // Has become the device administrator.
            } else {
                //Canceled or failed.
            }
            return;
    }
    super.onActivityResult(requestCode, resultCode, data);
}

} 
```

我的管理课

```
public class DemoDeviceAdminReceiver extends DeviceAdminReceiver{
@Override
public void onEnabled(Context context, Intent intent) {
    super.onEnabled(context, intent);

}

@Override
public void onDisabled(Context context, Intent intent) {
    super.onDisabled(context, intent);
    }
} 
```

我的 device_admin_sample 是；

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<device-admin xmlns:android="http://schemas.android.com/apk/res/android">
<uses-policies>
    <limit-password />
    <watch-login />
    <reset-password />
    <force-lock />
    <wipe-data />
    <expire-password />
    <encrypted-storage />
    <disable-camera />
</uses-policies>
</device-admin>

</LinearLayout> 
```

为什么我不能以管理员身份关闭相机？

# java - 如何在循环中轮询新传入数据后更新表中行的值

> ID：14340942
> 
> 赞同：1
> 
> 时间：2013-01-15T15:24:28.213
> 
> 标签：java, jquery, oop, message-queue, polling

我已经在 java 中实现了对该数据库的轮询并读取驻留在传出队列中的所有传入数据。现在我在更新轮询行时遇到问题，就像我只是更改行中的一些值一样，所以

我的问题是：

1.如何循环该表中的行，使其具有ACTION=804的值并且具有最高的SEQ值。

2.如何通过更改下表的 KEYINFO1 和 KEYINFO2 中的值来更新行。

[http://imageshack.us/photo/my-images/24/updatinganamolies.png/](http://imageshack.us/photo/my-images/24/updatinganamolies.png/)

![在此处输入图像描述](../Images/636d1fffd14a2debad691faa4eb961a0.png)

这是执行轮询并检查新传入消息的代码

```
 public void run() { // run method calls the fullpoll() 
    int seqId = 0;
    while(true) {
        List<KamMessage> list = null;
        try {
            list = fullPoll(seqId);
            if (!list.isEmpty()) {
                seqId = list.get(0).getSequence();
                incomingQueue.addAll(list);
                this.outgoingQueue = incomingQueue;
                System.out.println("waiting 3 seconds");
                System.out.println("new incoming message");
                Thread.sleep(3000);
                MessageProcessor processor = new MessageProcessor() {

                    @Override
                    public void run() {
                        generate(dbConnection);

                    }
                };

            }
        } catch (Exception e1) {
            e1.printStackTrace();
        }

       }
     }

    public List<KamMessage> fullPoll(int lastSeq) throws Exception {
    Statement st = dbConnection.createStatement();
    ResultSet rs = st.executeQuery("select * from msg_new_to_bde where ACTION =  804 and 
            SEQ >" + lastSeq + "order by SEQ DESC");  
    List<KamMessage> pojoCol = new ArrayList<KamMessage>();
    try {

        while (rs.next()) {
            KpiMessage filedClass = convertRecordsetToPojo(rs);
            pojoCol.add(filedClass);
        }

        for (KpiMessage pojoClass : pojoCol) {
            System.out.print(" " + pojoClass.getSequence());
            System.out.print(" " + pojoClass.getTableName());
            System.out.print(" " + pojoClass.getAction());
            System.out.print(" " + pojoClass.getKeyInfo1());
            System.out.print(" " + pojoClass.getKeyInfo2());
            System.out.println(" " + pojoClass.getEntryTime());
        }

    } finally  {
        rs.close();
        st.close();
        // TODO: handle exception
    } 
```

所以这是我用于生成行的示例代码，但是如何通过具有最高 SEQ 和 ACTION 值 = 804 的条件来更新该行

```
 public void generate()
    {
        KpiMsg804 upd= createKpiMsg804();
        while(true){
            try {
                st = conn.createStatement();
                System.out.println("Updating Values");
        String query = "insert into   
                        msg_new_to_bde(tablename,action,keyinfo1,keyinfo2) values(?, ?, ?, ?)";

                pstmt = conn.prepareStatement(query); // create a statement
                pstmt.setString(1,upd.getTableName());
                pstmt.setInt(2,upd.getAction()); // set value of action
                pstmt.setString(3,upd.getKeyInfo1()); // set key-info value1
                pstmt.setString(4,upd.getKeyInfo2()); // set key-info value2
                int rows = pstmt.executeUpdate();
                System.out.println("Number of Rows Created " +rows);
                // execute insert statement
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        public KpiMsg804 createKpiMsg804()
  {
 KpiMsg804 msg= new KpiMsg804();
     msg.setKeyInfo1("ENTITYKEY2");
     msg.setKeyInfo2("STATUSKEY2");
 return msg;
    } 
```

如何通过将 ENTITYKEY 和 STATUSKEY 更改为 ENTITYKEY1 和 STATUSKEY1 来按顺序更改行中的两个值来更新

我必须使用一种逻辑，这样我的方法应该查找具有最高序列号和相应 ACTIONKEY 的行，最后它用不同的值更新（更改其中的值）该行。

PS：“恳请：请给出给出负分的理由（大拇指向下）。这样我就可以清楚地解释我的问题”

# backbone.js - Backbone.js：PATCH url 端点错误

> ID：14340945
> 
> 赞同：1
> 
> 时间：2013-01-15T15:24:33.767
> 
> 标签：backbone.js

我有一个这样的模型：

```
 define([
    'jquery',
    'backbone'
], function ($) {
    var MyModel = Backbone.Model.extend({

        url: 'articles/',

        initialize: function(){

        }

    });

    return MyModel;
}); 
```

这是保存对象的代码：

```
 article = new Article();

        status = t.currentTarget.textContent;
        article.set('ready', {'status': status});

        coords = this.model.get('location').coords;
        article.set('geo', {'lat': coords.latitude, 'lng': coords.longitude});

        article.save(null, { accessToken: true }).done(function(){
            self.hideIcons();
        }); 
```

但是当我做补丁时：

```
this.article.save({comment: comment}, {patch: true, accessToken: true}); 
```

请求是正确的PATCH，但是端点错误，请求是这样的：

```
PATCH mydomain.com/articles/ 
```

如您所见，应该是：

```
PATCH mydomain.com/articles/<last-model-id-created>/ 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:36:49.547

而不是设置`Model.url`属性，您应该设置`Model.urlRoot`. 从[文档](http://backbonejs.org/#Model-urlRoot)：

> 如果您使用集合之外的模型，请指定 urlRoot，以启用默认 url 函数以根据模型 ID 生成 URL。“[urlRoot]/id”

如果模型属于集合，您也可以不`Model.urlRoot`指定并设置`Collection.url`。

# java - 如何从字符串中检查具有固定整数和十进制值的十进制数字

> ID：14340946
> 
> 赞同：0
> 
> 时间：2013-01-15T15:24:37.823
> 
> 标签：java, regex

请帮助我找到查找数字字符串的有效方法。

```
String str ="-100000.000";
System.out.println(str.matches("-?\\d+(\\.\\d+)?")); 
```

它工作得很好，但我想接受这样的数字字符串

```
String length must be maximum (10,3)--- Example 1234567890.999
String length must be minmum   (1)------0
Numeric String must be positive.

valid Numeric Strings(2.333    1878.12    787          989.0) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T15:29:34.877

鉴于您的限制，您可以使用此正则表达式：

```
"\\+?\\d{1,10}(\\.\\d{1,3})?" 
```

您可以查看[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)中的量词部分。

`+`根据您在评论中的要求，添加了可选的前导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:30:02.307

```
System.out.println(str.matches("\\+?\\d{1,10}(\\.\\d{1,3})?")); 
```

# ruby-on-rails - 从更改的数据库重新创建 schema.db

> ID：14340947
> 
> 赞同：1
> 
> 时间：2013-01-15T15:24:38.613
> 
> 标签：ruby-on-rails, migration, rails-migrations

在我无尽的愚蠢中，我使用 mysql 而不是迁移更改了 mysql 数据库，所以现在数据库与迁移不同步。

我的问题是，是否可以在不丢失数据和数据库中的更改*的情况下生成丢失的迁移（步骤）和新的 schema.db？

*添加表格、列等更改。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:29:06.100

就重新创建迁移而言，您很不走运，但您可以重新创建架构

```
rake db:schema:dump 
```

如果你走这条路，在创建一个新的数据库（用于新环境等）时，你会想要做

```
RAILS_ENV=some_env rake db:schema:load # specify the env if not development 
```

代替

```
rake db:migrate 
```

因为您的迁移与当前架构不一致。

运行时要小心，`schema:load`因为它会从头开始重新创建数据库。即您将丢失所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:33:16.927

创建丢失的迁移会很好。`schema_migrations`您可以通过手动将时间戳添加到表中来修复本地开发数据库。这就是手动更改架构的结果。

还要确保`rake db:migrate:reset`（删除所有表并从头开始迁移）将产生相同`db/schema.rb`的`rake db:schema:dump`结果。数据库模式中的任何更改都必须通过迁移自动化。

rake 的问题`db:schema:load`在于它会强制创建表。

# .net - RouteCollection GetVirtualPathForArea 返回根目录或“/”

> ID：14340952
> 
> 赞同：1
> 
> 时间：2013-01-15T15:24:58.787
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-4

这只发生在一个特定的控制器动作上

如果我将“Home”的控制器和“Index”的动作传递给 UrlHelper，则虚拟路径将返回为“/”。在所有其他控制器操作上，正确返回虚拟路径。

我使用过 .NET Reflector，但它只让我到目前为止。什么会导致仅在一个控制器操作上将路径返回为“/”而不是“/home/foo”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:35:03.200

在默认的 MVC 项目中，`/Home/Index`路径与 相同，`/`因为它被设置为默认值。更改`Home`控制器的名称或更改默认路由，将表明问题不在控制器中，而是您的默认路由设置。

# jenkins - Jenkins 服务器突然出现故障。无法访问 GUI

> ID：14340953
> 
> 赞同：2
> 
> 时间：2013-01-15T15:25:00.023
> 
> 标签：jenkins, continuous-integration, hudson, winstone

不久前，我在 redhat linux VM 上设置了一个 Jenkins 服务器来运行我们的单元和集成测试。它已经工作了大约两个月没有太多麻烦，但现在我突然不能再浏览到 GUI/HUB。我不相信我已经改变了任何东西（我知道每个人都这么说:)）但是当我查看日志时，我得到以下错误

```
WARNING: Untrapped servlet exception
winstone.ClientSocketException: Failed to write to client
at winstone.ClientOutputStream.write(ClientOutputStream.java:41) 
```

Jenkins 服务正在运行，我已经重新启动它并且 VM 没有解决这个问题。据我所知，即使我编写的詹金斯作业仍在运行，不时提供电子邮件，但我无法浏览到 GUI。任何人以前都遇到过这样的事情。我已经搜索过这个问题，有些人一直在建议重新安装 jenkins，但我并没有尝试这样做！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:58:28.240

好吧，很久以后我终于想通了。原来 winstone 不是问题，而是文件权限是罪魁祸首。我的 jenkins 文件夹 /var/lib/jenkins/ 中的一些文件的所有者是 root 而不是 jenkins。有些在 .m2 中，有些在 .grails 中，只是散落在各处，不知道这是怎么发生的。

无论如何，我只是导航到 jenkins /var/lib/jenkins 的主目录并运行以下命令

```
chown -R jenkins:jenkins jenkins 
```

# excel - bat文件打开excel运行宏关闭excel

> ID：14340955
> 
> 赞同：0
> 
> 时间：2013-01-15T15:25:15.257
> 
> 标签：excel, batch-file

问题：我需要打开一个 excel 文档，运行宏，以特定名称 (XXXX_YYYYMMDD) 保存文档，关闭 excel 文档。

解决方案 1：我想我可以使用 .bat 文件打开 excel，运行宏，保存并重命名文件。

解决方案1的问题：a）我不知道如何将文件的路径作为参数传递。b) 我确实知道如何用脚本语言为 .bat 编写流程

解决方案 2：我想我可以使用 .bat 文件打开 excel，并创建一个宏，一旦 excel 打开它就会运行并重命名 excel 并关闭它。

解决方案1的问题：a）我不知道如何将文件的路径作为参数传递。

PS：全新的 .bat 编码

其他建议是最受欢迎的

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:37:48.427

您可以尝试使用混合 bat/jscript 文件：

```
 rem ("open macro")/*
    @echo off
    call cscript //nologo //E:jscript excelfile.xsls
    goto :eof

    */
     var objExcel = new ActiveXObject ("Excel.Application"); 
     objExcel.Application.Run(""+WScript.Arguments.Item(0)+!mymacro"); 
    rem (){} 
```

如果宏嵌入在工作表中，您需要创建工作表对象并通过它访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:56:25.320

我不确定 BAt-Files 是否可以做到这一点，但我认为 powersheel 脚本可以做到这一点......如果这不是一个选项，您可以尝试将宏添加到文件的启动中 - 这样它就会运行当文件打开...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T16:10:39.493

要回答您的第一个问题，您可以通过使用将文件名作为参数传递

```
batfile.bat yourexcelfile.xls 
```

并使用 . 从批处理文件中访问它`%1`。

但是，我不知道如何做其他宏的事情，但如果你发现你可以用它来把它放在一起！:)

# java - run() 方法中的递归函数？

> ID：14340957
> 
> 赞同：1
> 
> 时间：2013-01-15T15:25:18.837
> 
> 标签：java, multithreading, recursion

我想在线程可运行的 run() 方法中放置一个递归函数 - 这是一个示例片段..

> ```
> yt[c] = new Thread (
>    new Runnable() {
>     public void run() {
>     /* recursive function here */
>     }
>     }
>  ); 
> ```

他们有什么方法可以在 run() 方法中实现这一点吗？有效地将方法嵌入到方法中（我假设必须将递归函数实现为方法）？

作为一个简单的例子，说我将如何实现 n! 在 run() 方法中（递归不迭代）？我很困惑。

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T15:27:38.933

> 在方法中有效地嵌入方法

好吧，您不会将方法嵌入到`run`方法本身中。而只是添加一个额外的方法`run`并调用它： -

```
new Thread (
   new Runnable() {
        public void run() {
           /* recursive function here */
           fact(10);
        }

        private void fact(int n) {
            // logic
        }
    }
 ); 
```

由于 with `new Runnable() { }`，您只是创建了一个实现`Runnable`接口的匿名类，因此，没有人阻止您添加自己的额外方法。也许你也可以做到`private`，因为你不会在外面使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T15:29:23.050

只需将另一个方法添加到`Runnable`（或您可以从该方法调用它的任何其他地方`run()`）。这里真的没有什么特别的东西会让从`run()`方法中调用递归方法变得很困难。

```
yt[c] = new Thread (
    new Runnable() {
        public void run() {
            System.out.println(compute(10L));
        }

        private long compute(long n) {
            if (n == 0) {
                return 1L;
            } else {
                return n * compute(n - 1L);
            }
        }
    }
); 
```

# elasticsearch - 在elasticsearch中，在映射创建期间完全定义映射有多重要？

> ID：14340958
> 
> 赞同：2
> 
> 时间：2013-01-15T15:25:19.360
> 
> 标签：elasticsearch

**我正在创建这样的映射**

```
"institution" : {
  "properties" : {        
    "InstitutionCode" : {
      "type" : "string",
      "store" : "yes"
    },
    "InstitutionID" : {
      "type" : "integer",
      "store" : "yes"
    },
    "Name" : {
      "type" : "string",
      "store" : "yes"
    }
  }
} 
```

**但是，当我为机构执行实际索引操作时，我添加了一个别名属性（每个机构 0 个或多个别名）**

```
"institution" : {
  "properties" : {   
    "Aliases" : {
      "dynamic" : "true",
      "properties" : {
        "InstitutionAlias" : {
          "type" : "string"
        },
        "InstitutionAliasTypeID" : {
          "type" : "long"
        }
      }
    },     
    "InstitutionCode" : {
      "type" : "string",
      "store" : "yes"
    },
    "InstitutionID" : {
      "type" : "integer",
      "store" : "yes"
    },
    "Name" : {
      "type" : "string",
      "store" : "yes"
    }
  }
} 
```

这实际上是一个简化的示例，因为在记录的实际索引过程中，我实际上添加的字段不仅仅是别名。

**在映射创建期间完全定义映射有多重要？**

由于索引具有附加属性的机构记录，在索引操作期间自动调整映射是否会受到任何惩罚？我希望机构随着时间的推移获得额外的属性，我想知道除了机构索引代码之外，我是否需要维护映射创建代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:54:50.533

我相信动态映射的开销可以忽略不计……使用它们不会损害索引速度。但是，您可能会遇到一些意外情况，即 ElasticSearch 自动检测到错误的字段类型。

一个常见的示例是检测整数，因为字段的第一个示例是数字（“25”），而实际上该字段的其余数据是字符串。或者当其余数据实际上是浮点数时看到一个整数。等等等等。

如果您的数据标准化得很好，那不是什么大问题。

或者，您可以使用[动态模板](http://www.elasticsearch.org/guide/reference/mapping/root-object-type.html)将映射应用到基于正则表达式模式的新字段。

# java - 动态创建类

> ID：14340962
> 
> 赞同：0
> 
> 时间：2013-01-15T15:25:38.413
> 
> 标签：java, class

我想使用 Java 动态创建新类。我有 3 个带有标签的按钮：1、2 和 3。代码如下：

```
switch (button.getActionCommand()) {
  case 1:
    return new Listener1();
    break;
  case 2:
    return new Listener2();
    break;
  case 3;
    return new Listener3();
    break;
} 
```

它有效，但我想让它更短。每个新班级都将与以前的班级不同，只有最后一个数字。那么是否可以动态创建类，例如：

```
return new Listener()+button.getActionListener(); 
```

我敢肯定它是可能的，但如何？我应该使用其中一个代理类还是有更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:29:42.997

如果这是 Java，如果你真的想要，你*可以*使用反射......

```
return Class.forName("packageName.Listener"+theNumber).newInstance(); 
```

当然，这样做也可能产生不利影响——性能下降、代码丑陋、调试和可读性问题、不得不处理多种异常......

推荐阅读：

*   [类.newInstance()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#newInstance%28%29)
*   [Class.forName(字符串)](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#forName%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T15:30:24.753

您没有指定任何语言，所以这是一种方法：

```
const_get("Listener#{button.action_command}").new 
```

但是，我不明白为什么需要为此动态创建类。据我了解，这些`ListenerN`类已经存在，您只想动态实例化它们？

如果您*必须*动态创建类，那也不是问题：

```
const_set("Listener#{button.action_command}", Class.new) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T15:31:34.233

如果是 Java，你可以这样做：

```
String className = "package.Listener" + button.getActionCommand();
Class theClass = Class.forName(className);
Object theListener = the.newInstance();
return (Listener) theListener; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-02T11:57:31.993

即使您`Class.forName(...)`在类路径中的某个位置使用此 Listener1、Listener2、Listener3 类也必须存在，因此这不适用于随机数，而仅适用于定义此类对应类的数字。我假设您希望所有这些不同的类都尊重一些“合同”（=interface），因此您可以定义一个必须由这些具体类实现的接口：

```
public interface Listener() {
     public void someExpectedMethod();
}
public class Listener1 implements Listener {
    public void someExpectedMethod() {
        // some implementation logic
    }
} 
```

所以你可以做的是创建一个这些类的静态映射：

```
static Map<Integer,Class<? extends Listener>> listenerMap=new HashMap<>();
listenerMap.put(1,Listener1.class);
listenerMap.put(2,Listener2.class); 
```

在您的按钮中，您可以：

```
Listener inst=listenerMap.get(button.getActionCommand()).newInstance();
inst.someExpectedMethod(); 
```

这是一个多一点的代码，但你有：

*   类型检查
*   您的 IDE 将找到使用 Listener1 的情况。

# r - R饼图：如何根据变量分配颜色？

> ID：14340967
> 
> 赞同：1
> 
> 时间：2013-01-15T15:25:48.120
> 
> 标签：r, graphics, ggplot2, pie-chart

我正在从单个数据帧的子集中制作一组 R 中的饼图（带有循环）。我得到了漂亮的饼图，但是在每个饼图中总是以相同的顺序分配颜色，而我希望在所有饼图中将颜色分配给相同的值。

我的代码是：

```
for (i in 1:length(voisins)) {                
    y <- subset(zz, Destination==voisins[i])    
    pie(y$pc,labels=y$Names, col=terrain.colors(nrow(y)) , main=c(y$country[1])) 
```

我想为每个`y$Names`.

我不允许在这里放图片，所以我把它放在那里：[http ://cl.ly/image/080t2Q1v1q3V](http://cl.ly/image/080t2Q1v1q3V)

如果同一区域具有相同的颜色会更容易阅读！有没有办法做到这一点？

解决方案 ：

谢谢你，阿伦，你的回答，但不幸的是，这并没有产生我想要的结果，可能我解释得不够清楚。我相信 ggplot 是一个更好的图形包，我很快就会学会如何使用它，但目前我没有时间，你的回答让我走上了正确的轨道。我找到了一个解决方案：实际上，如果您在示例中制作更大的“t”（具有更多行），然后采用它的子集导致更小的 t1、t2、t3、...，但 t$id 并不总是相同，所以假设在 t1 中我们将有 id = (2,4,9,3)，在 t2 中 id = (4,6,3)，依此类推。您将看到颜色总是以相同的顺序分配，即在 t1 中 2=red、4=green、9=blue、3=violet，而在 t2 中，4=red、6=green 和 3=blue。所以颜色从一个馅饼到另一个馅饼不同，我希望总是 2=red，4=green，3=blue，9=紫色。我找到的解决方案是根据 t$id 将一个颜色列合并到 t，然后将其保存在子集 t1, t2, t3, ... 并设置 col=t1$color , col=t2$color 等在 pie 命令中。最后很容易，但我希望有一个自动的解决方案，稍后我会看到 Paul 的解决方案。迪迪埃

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T15:39:17.597

让我首先声明，饼图一开始是个坏主意，因为它们存在重大的感知问题，请参见[此处](http://www.stevefenton.co.uk/Content/Pie-Charts-Are-Bad/)。

然后为了解决问题，我会使用`ggplot`，更具体地说是刻面。首先创建一个饼图：

```
pie <- ggplot(mtcars, aes(x = factor(1), fill = factor(cyl))) +
 geom_bar(width = 1)
pie + coord_polar(theta = "y") 
```

![在此处输入图像描述](../Images/2010db7aa65a32c7444cf586263bfc89.png)

要制作每个变量级别的饼图，您可以使用，例如，每个变量的`facet_wrap`唯一级别：`gear``mtcars`

```
pie + coord_polar(theta = "y") + facet_wrap(~ factor(gear)) 
```

# ios - 生成随机字母字符串的有效方法？

> ID：14340974
> 
> 赞同：2
> 
> 时间：2013-01-15T15:26:31.917
> 
> 标签：ios, objective-c, cocoa-touch, nsstring, nsmutablearray

我想要一个随机的字母表中所有字符的字符串。现在，我创建了一个包含 26 个字符的可变数组，使用 exchangeObjectAtIndex: 方法将它们打乱，然后将每个字符添加到我返回的字符串中。

必须有更好的方法来做到这一点。这是我的代码：

```
- (NSString *)shuffledAlphabet {
    NSMutableArray * shuffledAlphabet = [NSMutableArray arrayWithArray:@[@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H",@"I",@"J",@"K",@"L",@"M",@"N",@"O",@"P",@"Q",@"R",@"S",@"T",@"U",@"V",@"W",@"X",@"Y",@"Z"]];

    for (NSUInteger i = 0; i < [shuffledAlphabet count]; ++i) {
        // Select a random element between i and end of array to swap with.
        int nElements = [shuffledAlphabet count] - i;
        int n = (random() % nElements) + i;
        [shuffledAlphabet exchangeObjectAtIndex:i withObjectAtIndex:n];
    }

    NSString *string = [[NSString alloc] init];
    for (NSString *letter in shuffledAlphabet) {
        string = [NSString stringWithFormat:@"%@%@",string,letter];
    }

    return string;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T15:59:57.443

这是一个高效的[Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)，适用于您的用例：

```
- (NSString *)shuffledAlphabet {
    NSString *alphabet = @"ABCDEFGHIJKLMNOPQRSTUVWXYZ";

    // Get the characters into a C array for efficient shuffling
    NSUInteger numberOfCharacters = [alphabet length];
    unichar *characters = calloc(numberOfCharacters, sizeof(unichar));
    [alphabet getCharacters:characters range:NSMakeRange(0, numberOfCharacters)];

    // Perform a Fisher-Yates shuffle
    for (NSUInteger i = 0; i < numberOfCharacters; ++i) {
        NSUInteger j = (arc4random_uniform(numberOfCharacters - i) + i);
        unichar c = characters[i];
        characters[i] = characters[j];
        characters[j] = c;
    }

    // Turn the result back into a string
    NSString *result = [NSString stringWithCharacters:characters length:numberOfCharacters];
    free(characters);
    return result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T16:03:03.887

这是执行正确混洗字母生成的更有效方法。

```
- (NSString *)shuffledAlphabet
{
    const NSUInteger length = 'Z' - 'A' + 1;
    unichar alphabet[length];
    alphabet[0] = 'A';

    for ( NSUInteger i = 1; i < length; i++ )
    {
        NSUInteger j = arc4random_uniform((uint32_t)i + 1);
        alphabet[i] = alphabet[j];
        alphabet[j] = 'A' + i;
    }
    return [NSString stringWithCharacters:alphabet length:length];
} 
```

它使用 Fischer Yates shuffle 的“由内而外”版本，并通过生成伪随机数来避免模偏差`arc4random_uniform`。此外，它需要一次分配，因为所有排列都是在临时缓冲区中执行的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T15:33:29.687

[在 Objective-C](https://stackoverflow.com/questions/160890/generating-random-numbers-in-objective-c)中生成随机数有帮助吗？*生成随机数 *除以26并取提醒 *索引数组[提醒]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T15:39:47.960

您可以在构建字符串时从（剩余的）字母表中选择随机元素，而不是先对其进行改组：

```
NSMutableArray *alphabet = [NSMutableArray arrayWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H",@"I",@"J",@"K",@"L",@"M",@"N",@"O",@"P",@"Q",@"R",@"S",@"T",@"U",@"V",@"W",@"X",@"Y",@"Z", nil];
NSMutableString *result = [NSMutableString string];
NSUInteger numberOfLetters = alphabet.count;
for (NSUInteger i = 0; i < numberOfLetters; i++) {
    int n = arc4random() % alphabet.count;
    [result appendString:[alphabet objectAtIndex:n]];
    [alphabet removeObjectAtIndex:n];
}
NSLog(@"%@", result); 
```

这使得代码更短一些。另请注意，每次添加字母时使用`NSMutableString`比创建新字母更有效。`NSString`

# haskell - 如何使用配置器

> ID：14340976
> 
> 赞同：9
> 
> 时间：2013-01-15T15:26:47.300
> 
> 标签：haskell

我阅读了出色的 24 天 hackage。我想尝试一下包 [配置器](http://hackage.haskell.org/package/configurator)

我如何检索数据列表，例如

```
herlist = [1, "foo", true] ? 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T15:59:47.460

如果你有线

```
herlist = [1, "foo", true] 
```

在名为“example.cfg”的配置文件中，加载并显示该值的最简单程序是

```
{-# LANGUAGE OverloadedStrings #-}

import Data.Configurator
import Data.Configurator.Types (Value)

main = do
    cfg <- load [Required "example.cfg"]

    lst <- require cfg "herlist" :: IO Value

    print lst 
```

使用[`OverloadedStrings`](http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/type-class-extensions.html#overloaded-strings)扩展名是为了让我们可以使用普通的字符串文字作为配置键，而无需将它们显式转换为`Text`.

在查找键时，`"herlist"`我们需要明确地告诉编译器我们期望的类型，因为在像这样的简单程序中，我们只打印值，编译器无法从上下文推断它。

类型[`Value`](http://hackage.haskell.org/packages/archive/configurator/latest/doc/html/Data-Configurator-Types.html#t:Value)是配置值的原始类型。在实际程序中，我们通常会`Value`通过定义[`Configured`](http://hackage.haskell.org/packages/archive/configurator/latest/doc/html/Data-Configurator-Types.html#t:Configured)类型类的实例将其转换为程序使用的自定义类型。

# c# - 如何在现有视图中编写名称更改？

> ID：14340981
> 
> 赞同：0
> 
> 时间：2013-01-15T15:26:55.127
> 
> 标签：c#, android, mono, xamarin.android

有一个类继承自 TextView

```
using Android.App;
using Android.Content;
using Android.Content.Res;
using Android.Runtime;
using Android.Text;
using Android.Util;
using Android.Views;
using Android.Views.InputMethods;
using Android.Widget;
using Android.OS;
using  Android.Graphics;

namespace HelloWorld
{
class TodoListItemView:TextView
{
private Paint marginPaint;
private Paint linePaint;
private int paperColor;
private float margin;

public TodoListItemView(Context context, IAttributeSet attrs, int ds): base (context, attrs, ds)
{
    init();
}

public TodoListItemView(Context context, IAttributeSet attrs) : base(context, attrs)
{
    init();
}

private void init()
{
    Resources myResources = Resources;
    marginPaint = new Paint(PaintFlags.AntiAlias);
    marginPaint.Color = myResources.GetColor(Resource.Color.notepad_margin);
    linePaint = new Paint(PaintFlags.AntiAlias);
    linePaint.Color = myResources.GetColor(Resource.Color.notepad_lines);
    paperColor = myResources.GetColor(Resource.Color.notepad_paper);
    margin = myResources.GetDimension(Resource.Dimension.notepad_margin);

}

protected override void OnDraw(Canvas canvas)
{

    canvas.DrawLine(0, 0, Height, 0, linePaint);
    canvas.DrawLine(0, Height, Width, Height, linePaint);
    // Нарисуйте кромку
    canvas.DrawLine(margin, 0, margin, Height, marginPaint);
    // Переместите текст в сторону от кромки
    canvas.Save();
    canvas.Translate(margin, 0);
    base.OnDraw(canvas);
    canvas.Restore();
}

}
} 
```

正在标记 todolist_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TodoListItemView
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="10dp"
android:scrollbars="vertical"
android:textColor="@color/notepad_text"
android:fadingEdge="vertical"
/> 
```

我指向 TodoListItemView，但该名称不起作用，打开标记时出错。Java中也有一个例子，所以有包，都清楚

```
<?xml version="1.0" encoding="utf-8"?>
<com.paad.todolist.TodoListItemView
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="10dp"
android:scrollbars="vertical"
android:textColor="@color/notepad_text"
android:fadingEdge="vertical"
/> 
```

给我看哪个名字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:56:16.707

你必须使用你在你的类上使用的命名空间，但有区别，命名空间需要小写。

```
namespace HelloWorld
{
class TodoListItemView:TextView
{

...

} 
```

在你的 axml

```
<?xml version="1.0" encoding="utf-8"?>
<helloworld.TodoListItemView
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="10dp"
android:scrollbars="vertical"
android:textColor="@color/notepad_text"
android:fadingEdge="vertical"
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:33:23.710

我没有使用过`monodroid`，但我的猜测是你必须在布局上像这样使用它：

```
<HelloWorld.TodoListItemView
...
/> 
```

我假设命名空间与 Java 上的包相同。

# javascript - blob 在 ios 上不接受 Uint8Array

> ID：14340989
> 
> 赞同：9
> 
> 时间：2013-01-15T15:27:13.303
> 
> 标签：javascript, ios, google-chrome, blob

我尝试创建一个 Blob 对象并将 Uint8Array 传递给它的构造函数它在 windows 上的 chrome 和 firefox 上工作正常在 ios 上的 chrome 和 safari 但是 Blod 不包含 Uint8Array 的数据，但文本：[object Uint8Array]

我需要这个来将画布上传到服务器。

有解决方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T23:23:31.580

我正在努力解决完全相同的问题。当我使用 ArrayBuffer 备份 Uint8Array 时，**它在 Safari 和 Chrome 中都可以工作**（尚未在其他浏览器中测试），但 Chrome 会打印一条警告消息。Chrome 说我必须在将 ArrayBuffer 传递给 Blob() 构造函数之前将其包装在 DataView 中。

```
// write the bytes of the string to an ArrayBuffer
var ab = new ArrayBuffer(byteString.length);
var ia = new Uint8Array(ab);
for (var i = 0; i < byteString.length; i++) {
    ia[i] = byteString.charCodeAt(i);
}

new Blob([ab], {type: mimeString}); 
```

**编辑**

确切的 Chrome 弃用消息是：

> ArrayBuffer 值在 Blob 构造函数中已弃用。请改用 ArrayBufferView。

# asp.net-mvc - 多个存储过程 ASP MVC

> ID：14340990
> 
> 赞同：0
> 
> 时间：2013-01-15T15:27:13.960
> 
> 标签：asp.net-mvc, stored-procedures

我正在创建一个使用多个存储过程来填充下拉列表的页面。存储过程的参数是前一个下拉列表的选择（即它们需要按顺序运行）。实现此功能的最佳方式是什么？我正在使用 ASP MVC，并且很难将结果传递给视图模型以再次呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:13:02.480

如果我正确理解了您的问题，那么您正在尝试使用级联下拉菜单。并且您正在使用存储过程绑定您的下拉列表..对吗？

这是一个例子：我有两个下拉菜单。学校和课程。当您在学校更改所选值时，课程下拉菜单将更改其值。

这是控制器：

```
 public ActionResult SchoolList(int id)
    {
        IEnumerable<SelectListItem> schools = new Util().GetSchoolSelectList(id);
        if (HttpContext.Request.IsAjaxRequest())
            return Json(schools, JsonRequestBehavior.AllowGet);

        return View(schools);
    }

    public ActionResult CourseList(int id)
    {
        IEnumerable<SelectListItem> courses = new Util().GetCourseSelectList(id);
        if (HttpContext.Request.IsAjaxRequest())
            return Json(courses, JsonRequestBehavior.AllowGet);
        return View(courses);
    } 
```

这是jQuery：

```
$("#Schools").change(function () {
        $.getJSON("/Account/CourseList/" + $("#Schools").val(), function (data) {
            var items = "<option>Select your Course</option>";
            $.each(data, function (i, course) {
                items += "<option value='" + course.Value + "'>" + course.Text + "</option>";
            });
            $("#Courses").html(items);
        });
    }); 
```

这是 HTML：

```
<select id="Schools" name="UserSchool"></select> 

<select id="Courses" name="UserCourse"></select> 
```

# sql - 来自重命名的 Sql 全局

> ID：14340992
> 
> 赞同：0
> 
> 时间：2013-01-15T15:27:17.607
> 
> 标签：sql, select

我正在编写一个存储过程，它有很多带有内部连接的选择。

表名是“Product”，我想将它重命名为“P”，这样我就可以随时将它作为“P.Id”（或任何其他随机列）联系起来。

缺点是我知道的唯一方法是我必须在任何地方使用“从产品 P 中选择”，我想知道是否有更简单的方法可以将其全球化。

因此，即使没有来自产品 P 甚至没有引用产品，如果我键入“来自 P”，也许以某种方式使 P 引用产品是可能的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:32:22.403

您没有指定您正在使用的 RDBMS，但在 SQL Server 中，我认为您可以做到这一点的唯一方法是使用动态 sql 来执行您的查询。然后，您将创建一个要执行的 sql 字符串。使用动态 SQL，您可以将表名添加到您添加到查询字符串的参数中。

代码将与此类似：

```
declare @p varchar(50) = 'Products'
declare @query varchar(max)

set @query = 'select * from '+@p

execute(@query); 
```

如果您要使用动态 sql，那么我建议您阅读：

[动态 SQL 的祸与福](http://www.sommarskog.se/dynamic_sql.html)

# c# - 在返回线上进行变量赋值的好处

> ID：14340994
> 
> 赞同：0
> 
> 时间：2013-01-15T15:27:19.623
> 
> 标签：c#

如前所述，我很好奇这样做是否有任何好处：

```
return someNumber = CalculateResults(parameter); 
```

与做：

```
someNumber = CalculateResults(parameter);
return someNumber; 
```

或做：

```
return CalculateResults(parameter); 
```

使用其中一种是否有任何性能提升？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:33:59.470

虽然使用主动优化可能所有三个都是相同的，但如果没有，它们会产生略微不同的结果。

第一个和第二个必须在范围内声明一个变量并返回它，而最后一个不需要。我试图编译以下程序：

```
int Calculate()
{
    return 42;
}

int FirstCase()
{
    int x;
    return x = Calculate();
}

int SecondCase()
{
    var x = Calculate();
    return x;
}

int ThirdCase()
{
    return Calculate();
} 
```

使用 LINQPad 输出：

```
FirstCase:
IL_0000:  nop         
IL_0001:  ldarg.0     
IL_0002:  call        UserQuery.Calculate
IL_0007:  dup         
IL_0008:  stloc.0     // x
IL_0009:  stloc.1     // CS$1$0000
IL_000A:  br.s        IL_000C
IL_000C:  ldloc.1     // CS$1$0000
IL_000D:  ret         

SecondCase:
IL_0000:  nop         
IL_0001:  ldarg.0     
IL_0002:  call        UserQuery.Calculate
IL_0007:  stloc.0     // x
IL_0008:  ldloc.0     // x
IL_0009:  stloc.1     // CS$1$0000
IL_000A:  br.s        IL_000C
IL_000C:  ldloc.1     // CS$1$0000
IL_000D:  ret         

ThirdCase:
IL_0000:  nop         
IL_0001:  ldarg.0     
IL_0002:  call        UserQuery.Calculate
IL_0007:  stloc.0     // CS$1$0000
IL_0008:  br.s        IL_000A
IL_000A:  ldloc.0     // CS$1$0000
IL_000B:  ret 
```

第三种情况稍微短一些。我也更喜欢这种方法，因为它感觉比为其分配变量更流畅。我使用变量的唯一原因是尝试通过变量为返回值提供一个有意义的名称来“记录”该方法的作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:32:29.390

前两者之间没有实际的好处，但在我看来，第二个比第一个更具可读性。

```
return CalculateResults(parameter); 
```

如果不以任何方式坚持，那就更好`someNumber`了，你应该小心。

并且少了一条指令（尽管如果优化器已经为你做了那我不会感到惊讶）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T15:34:04.607

像 Jacob 所说的那样，在单独的行上将有助于调试。如果您不需要存储/操作返回的数据，那么您应该继续并返回而不分配变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T15:34:17.800

我更喜欢这个

```
return someNumber = CalculateResults(parameter); 
```

若有可能。节省一行并在您调试时提供帮助。您可以简单地将鼠标悬停在 someNumber 上以获取返回值。

如果不进行分配操作，性能增益（如果有的话）可以忽略不计。（无论如何，编译器可能会对其进行优化。）

# html - 滚动条出现在滚动框上，但不能在 IE 8 中使用

> ID：14340995
> 
> 赞同：0
> 
> 时间：2013-01-15T15:27:22.003
> 
> 标签：html, css, scrollbar

[http://jsfiddle.net/m7t9b/](http://jsfiddle.net/m7t9b/)

```
 <div style="width:625px;height:220px;overflow-y:hidden;overflow-x:scroll;z-index:10;">
                <table width="1000" height="114" border="1">
                      <tr>
                        <td width="126"><blockquote>
                          <blockquote>
                            <blockquote>
                              <p>&nbsp;&nbsp;<a href="http://mrsbagerismath.weebly.com/"><img border="0" width="100" height="111" src="images/ahmed.png" alt="Mr. Ahmed" /></a>&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mr. Ahmed&nbsp;&nbsp;<br />
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ext. 13417<br />
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Room 417/323<br />
                                <a href="mailto:Ahmed@wcskids.net">Ahmed@wcskids.net</a></p>
                            </blockquote>
                          </blockquote>
                        </blockquote></td>
                        <td width="126"><p><img width="100" height="111" src="images/teachers_clip_image002.jpg" alt="Mrs. Bageris " /><br />
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mrs. Bageris<br />
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ext. 13226<br />
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Room 226<br />
  <a href="mailto:EBageris@wcskids.net">EBageris@wcskids.net</a></p></td>
                        <td width="126"><p><a href="http://dkudra.weebly.com/" target="_blank"><img border="0" width="100" height="111" src="images/cetkovic.png" alt="Ms. Kudra" /></a><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mr. Cetkovic<br />
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ext. 13305<br />
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Room 305<br />
  <a href="mailto:RCetkovic@wcskids.net">RCetkovic@wcskids.net</a></p></td>
                        <td width="126"><p><a href="http://yassowarrenmott.weebly.com/" target="_blank"><img border="0" width="100" height="111" src="images/teachers_clip_image002_0004.jpg" alt="Mrs. Kudra" /></a><br />
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mrs. Kudra<br />
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ext. 13225<br />
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Room 225<br />
  <a href="mailto:Dkudra@wcskids.net">Dkudra@wcskids.net</a></p></td>
                        <td width="126"><p><img width="100" height="111" src="images/teachers_clip_image002_0006.jpg" alt="Mr. Sagman" /><br />
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mr. Sagman<br />
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ext. 13420<br />
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Room 420<br />
  <a href="mailto:SAGMANW@wcskids.net">SAGMANW@wcskids.net</a></p></td>
  <td width="126"><p><img width="100" height="111" src="images/yasso.jpg" alt="Mr. Yasso" /><br />
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mr. Yasso<br />
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ext. 13418<br />
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Room 418<br />
  <a href="mailto:Yasso@wcskids.net">SAGMANW@wcskids.net</a></p></td>
                      </tr>
                    </table>
                    </div> 
```

当我拖动滚动条时，不是滚动，而是突出显示它下面的文本。我如何在 IE 8 中解决这个问题？

使用小提琴查看整个代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:48:36.967

在您的样式表中使用此代码，

```
 -ms-overflow:auto; 
```

愿它对你有所帮助...

祝你好运！

# sql - 错误：函数 date_trunc（没有时区的时间戳）不存在

> ID：14340999
> 
> 赞同：15
> 
> 时间：2013-01-15T15:27:38.593
> 
> 标签：sql, postgresql, datetime

我有这个问题。我有一个 sql 查询正在尝试对我的 postgres 数据库进行。这些查询在 oracle 中运行良好，但正在将其转换为 postgres 查询，但它会抱怨。这是查询：

```
select  to_char(calldate,'Day') as Day, date_trunc(calldate) as transdate,
Onnet' as destination,ceil(sum(callduration::integer/60) )as    total_minutes,round(sum(alltaxcost::integer) ,2)as revenue
from cdr_data 
where callclass ='008' and callsubclass='001'
and callduration::integer >0
and  regexp_like(identifiant,'^73')
and bundleunits = 'Money'
and inserviceresultindicator in (0,5)
and regexp_like(regexp_replace(callednumber,'^256','') ,'^73')
group by  to_char(calldate,'Day') ,trunc(calldate),'Onnet' order by 2 
```

我得到的错误是：

```
Err] ERROR:  function date_trunc(timestamp without time zone) does not exist
LINE 4: select  to_char(calldate,'Day') as Day, date_trunc(calldate)... 
```

我做错了什么，或者这个错误的解决方案是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-15T15:37:18.643

尝试：

```
... date_trunc('day',calldate) ... 
```

对于 PostgreSQL`date_trunc()`函数，您必须始终将精度指定为第一个参数。

详情[在这里](http://www.postgresql.org/docs/current/static/functions-datetime.html)。