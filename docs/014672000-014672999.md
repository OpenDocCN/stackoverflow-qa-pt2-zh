# StackOverflow 问答 14672000-14672999

# performance - 使用 yeoman 服务器编译 scss 的正常时间？

> ID：14672003
> 
> 赞同：0
> 
> 时间：2013-02-03T11:32:02.037
> 
> 标签：performance, development-environment, sass, yeoman

在运行`yeoman server`和更新最简单的 SCSS 文件时，我必须等待大约 5 秒才能让浏览器更新。我在 MacBook Air 上。

这是标准吗？这有点限制我的编码速度......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:04:28.443

简短的回答是否定的，这是一个错误，应该在 1.0 版中修复。

来源：[https ://github.com/yeoman/yeoman/issues/820#issuecomment-12912452](https://github.com/yeoman/yeoman/issues/820#issuecomment-12912452)

我发现您可以禁用`force: true`Gruntfile.js 中的，这将有助于 Compass/SCSS 速度。此外，如果您包含大量图像资产，现在它会很慢，请尝试限制这一点。

# user-interface - 在 BlackBerry 中切换屏幕

> ID：14672004
> 
> 赞同：0
> 
> 时间：2013-02-03T11:32:13.830
> 
> 标签：user-interface, blackberry, screen

我有一个 BlackBerry 应用程序，它在`CheckIn`屏幕中实现了发送按钮的侦听器。数据通过网络服务发送。如果数据发送成功，则会收到“OK”的确认信息。我正在尝试根据收到的响应在我的 BlackBerry 应用程序中切换屏幕。

```
FieldChangeListener sendBtnListener = new FieldChangeListener() {   
        public void fieldChanged(Field field, int context) 
        {   
            try {
                String alertMsg=sendTextCheckIn();
                if(alertMsg.equals("OK"))
                {
                    UiApplication.getUiApplication().invokeLater( new Runnable()
                    {
                        public void run ()
                        {
                            UiApplication.getUiApplication().pushScreen(new MyScreen());
                        }
                    } );
                }
            } catch (UnsupportedEncodingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }   
     }; 
```

但是，上面是抛出一个`App Error 104: IllegalStateException`. 任何人都可以指导如何在黑莓应用程序之间切换屏幕。

编辑：我可以切换到任何其他屏幕，但我不能切换到`MyScreen`. `NOTE:`MyScreen 是应用程序的主（第一个）屏幕。上面的方法`sendTextCheckIn()`调用了另一个放在里面的方法`MyScreen`。这与错误有关吗？请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T19:54:21.087

'fieldChanged' 事件已经在 UI 事件线程上运行，因此您不需要在其中执行 invokeLater 调用，只需直接调用 pushScreen。

您提到您的 IllegalStateException 问题仅发生在 MyScreen 上。这听起来像是 MyScreen 的实现所特有的。开始缩小问题范围 - 查看 MyScreen 的构造函数中发生的情况，以及在屏幕可见之前可能调用的任何事件。其中一些代码是导致问题的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T19:03:06.740

在 try/catch 中包装所有可能引发异常的内容。

不要这样做`e.printStackTrace()`——那不会给你太多。

相反，做一些类似的事情`System.err.println ("KABOOM in method abc() - " + e);`- 似乎需要更多的努力，但相信我，在调试这样的问题时，这变得非常重要。

Catch `Exception`，除非您有很好的理由来捕获特定的 a 子类型 - 否则您最终会遇到意外且未捕获的异常，您将在 DAYS 中寻找这些异常。

# c++ - 如何使用 UpdateSubresource 更新 Direct3d 中的纹理

> ID：14672005
> 
> 赞同：2
> 
> 时间：2013-02-03T11:32:16.780
> 
> 标签：c++, directx-11

我在我的 CreateDeviceResources 方法中有以下代码：（该方法最初被调用一次）。

我需要做什么来创建改变纹理的方法？无效 SetTexture(...textureinput...);

每次需要更改纹理时，我是否需要在代码下方运行？还是我可以以某种方式更改内存中的一些数据？

我发现我想使用 ID3D11DeviceContext::UpdateSubresource，但找不到有关如何使用它的示例。

```
 auto textureData = reader->ReadData("SIn.Win8\\texturedata.bin");
        D3D11_SUBRESOURCE_DATA textureSubresourceData = {0};
        textureSubresourceData.pSysMem = textureData->Data;

        // Specify the size of a row in bytes, known a priori about the texture data.
        textureSubresourceData.SysMemPitch = 1024;

        // As this is not a texture array or 3D texture, this parameter is ignored.
        textureSubresourceData.SysMemSlicePitch = 0;

        // Create a texture description from information known a priori about the data.
        // Generalized texture loading code can be found in the Resource Loading sample.
        D3D11_TEXTURE2D_DESC textureDesc = {0};
        textureDesc.Width = 256;
        textureDesc.Height = 256;
        textureDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;
        textureDesc.Usage = D3D11_USAGE_DEFAULT;
        textureDesc.CPUAccessFlags = 0;
        textureDesc.MiscFlags = 0;

        // Most textures contain more than one MIP level.  For simplicity, this sample uses only one.
        textureDesc.MipLevels = 1;

        // As this will not be a texture array, this parameter is ignored.
        textureDesc.ArraySize = 1;

        // Don't use multi-sampling.
        textureDesc.SampleDesc.Count = 1;
        textureDesc.SampleDesc.Quality = 0;

        // Allow the texture to be bound as a shader resource.
        textureDesc.BindFlags = D3D11_BIND_SHADER_RESOURCE;

        ComPtr<ID3D11Texture2D> texture;
        DX::ThrowIfFailed(
            m_d3dDevice->CreateTexture2D(
                &textureDesc,
                &textureSubresourceData,
                &texture
                )
            );

        // Once the texture is created, we must create a shader resource view of it
        // so that shaders may use it.  In general, the view description will match
        // the texture description.
        D3D11_SHADER_RESOURCE_VIEW_DESC textureViewDesc;
        ZeroMemory(&textureViewDesc, sizeof(textureViewDesc));
        textureViewDesc.Format = textureDesc.Format;
        textureViewDesc.ViewDimension = D3D11_SRV_DIMENSION_TEXTURE2D;
        textureViewDesc.Texture2D.MipLevels = textureDesc.MipLevels;
        textureViewDesc.Texture2D.MostDetailedMip = 0;

        ComPtr<ID3D11ShaderResourceView> textureView;
        DX::ThrowIfFailed(
            m_d3dDevice->CreateShaderResourceView(
                texture.Get(),
                &textureViewDesc,
                &textureView
                )
            );

        // Once the texture view is created, create a sampler.  This defines how the color
        // for a particular texture coordinate is determined using the relevant texture data.
        D3D11_SAMPLER_DESC samplerDesc;
        ZeroMemory(&samplerDesc, sizeof(samplerDesc));

        samplerDesc.Filter = D3D11_FILTER_MIN_MAG_MIP_LINEAR;

        // The sampler does not use anisotropic filtering, so this parameter is ignored.
        samplerDesc.MaxAnisotropy = 0;

        // Specify how texture coordinates outside of the range 0..1 are resolved.
        samplerDesc.AddressU = D3D11_TEXTURE_ADDRESS_WRAP;
        samplerDesc.AddressV = D3D11_TEXTURE_ADDRESS_WRAP;
        samplerDesc.AddressW = D3D11_TEXTURE_ADDRESS_WRAP;

        // Use no special MIP clamping or bias.
        samplerDesc.MipLODBias = 0.0f;
        samplerDesc.MinLOD = 0;
        samplerDesc.MaxLOD = D3D11_FLOAT32_MAX;

        // Don't use a comparison function.
        samplerDesc.ComparisonFunc = D3D11_COMPARISON_NEVER;

        // Border address mode is not used, so this parameter is ignored.
        samplerDesc.BorderColor[0] = 0.0f;
        samplerDesc.BorderColor[1] = 0.0f;
        samplerDesc.BorderColor[2] = 0.0f;
        samplerDesc.BorderColor[3] = 0.0f;

        ComPtr<ID3D11SamplerState> sampler;
        DX::ThrowIfFailed(
            m_d3dDevice->CreateSamplerState(
                &samplerDesc,
                &sampler
                )
            ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:07:52.850

如果要在运行时更新相同的纹理，则需要使用[Map](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476457%28v=vs.85%29.aspx)

Maptype 需要是 D3D11_MAP_WRITE_DISCARD

此外，您的纹理需要使用动态标志而不是默认创建，并且 cpu 访问标志需要设置为 D3D11_CPU_ACCESS_WRITE

如果允许您访问[D3D11_MAPPED_SUBRESOURCE](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476182%28v=vs.85%29.aspx)，您可以使用 pData 设置新数据

根据具体情况，重新创建纹理可能会更好，这取决于具体情况（如果纹理经常变化，动态效果很好）

# android - android listactivity 不起作用

> ID：14672012
> 
> 赞同：0
> 
> 时间：2013-02-03T11:33:03.013
> 
> 标签：android, android-listview, android-activity, listactivity

我正在从[newboston](https://www.youtube.com/watch?v=roulejuE6B8)学习 android .. 我想先显示一个菜单，如本教程中所示.. 我做了同样的事情，但不知道为什么菜单活动没有出现 .. 帮助我哪里做错了

这是我的代码

android manfiest.xml

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Splash"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <!-- 2nd activity -->

    <activity
        android:name="com.example.android.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.example.android.MainActivity" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <!-- 3rd Activity Test -->

      <activity
        android:name=".Menu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.example.android.Menu" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

       <activity
        android:name=".TesxtPlay"
        android:label="@string/app_name" >

    </activity>
</application> 
```

这是菜单类

```
 public class Menu extends ListActivity {

//declaring above so both methods can access these
String classes[] = {"MainActivity","TextPlay","example2",
        "example3","example4","example5","example6",};

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(Menu.this,  android.R.layout.simple_list_item_1, classes));
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    String cheese = classes[position];

    Class ourClass;
    try {
        ourClass = Class.forName("com.example.android." + cheese);

        Intent ourIntent = new Intent(Menu.this,ourClass);
        startActivity(ourIntent);
    }catch(ClassNotFoundException e){
        e.printStackTrace();

    }

}

  } 
```

文本播放类

```
 public class TextPlay extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.test);

    Button chkCmd = (Button) findViewById(R.id.bResults);
    final ToggleButton passTog = (ToggleButton) findViewById(R.id.tbPassword);
    final EditText input = (EditText) findViewById(R.id.etCommands);
    TextView display = (TextView) findViewById(R.id.display);
    passTog.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            if(passTog.isChecked()){
                input.setInputType(InputType.TYPE_CLASS_TEXT
                        | InputType.TYPE_TEXT_VARIATION_PASSWORD);

            }else{
                input.setInputType(InputType.TYPE_CLASS_TEXT);

            }

        }
    });
}

         } 
```

溅

```
 public class Splash extends Activity {

MediaPlayer ourSong;

@Override
protected void onCreate(Bundle iloveyou) {
    // TODO Auto-generated method stub
    super.onCreate(iloveyou);

    setContentView(R.layout.splash);
 ourSong = new MediaPlayer().create(Splash.this, R.raw.kalimba);
  ourSong.start();
    Thread timer = new Thread(){
        public void run(){
            try{
                sleep(5000);
            }catch(InterruptedException e){
                e.printStackTrace();
            }finally{
                //starting activity
                Intent openMainActivityClass = new Intent("com.example.android.MainActivity");
                startActivity(openMainActivityClass);
            }

        }
    };

    timer.start();

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    ourSong.release();
    finish();
}

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:42:17.150

菜单没有显示，因为你没有给它充气。

在您的 Menu 类中添加以下代码行：

```
@Override
public boolean onCreateOptionsMenu(android.view.Menu menu) {
    getMenuInflater().inflate(R.menu.menu, menu);
    return super.onCreateOptionsMenu(menu);
} 
```

这假定您的菜单存储为`menu.xml`文件夹`/res/menu`。

**编辑：**

你`menu.xml`应该看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/itemAboutUs"
        android:icon="@android:drawable/ic_menu_info_details"
        android:title="About Us">
    </item>
    <item
        android:id="@+id/itemPreferences"
        android:icon="@android:drawable/ic_menu_preferences"
        android:title="Preferences">
    </item>

</menu> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:59:00.170

您的 .Splash 活动中包含 `<category android:name="android.intent.category.LAUNCHER" />` 意图过滤器。

这意味着这是您运行应用程序时启动的活动。

**编辑 ：**

在您的 Splash.java 中，您正在使用意图过滤器“com.example.android.MainActivity”启动活动

这不是你的菜单活动..你的菜单活动有意图过滤器“com.example.android.Menu”

所以只要改变

`Intent openMainActivityClass = new Intent("com.example.android.MainActivity");`

到

`Intent openMainActivityClass = new Intent("com.example.android.Menu");`

# c - 为给定掩码生成所有位模式

> ID：14672013
> 
> 赞同：8
> 
> 时间：2013-02-03T11:33:05.777
> 
> 标签：c, algorithm, optimization, bit-manipulation

我的问题如下：我有一个值`x`和一个模式`p`，两个变量的大小相同。目标是遍历 x 中*未被*p 屏蔽的所有位模式。

示例：如果我们有`p = 1001`，我们希望找到`0000`、`0001`、`1000`和`1001`- 不一定按此顺序。

C99 中的标准实现（返回值指定我们是否已经返回所有值）：

```
static bool next(size_t val, size_t mask, size_t *out) {
    if (val == mask) {
        return false;
    }
    size_t current = val & mask;
    size_t inc = 1;
    size_t new_val = current + inc;
    while ((new_val & mask) <= current) {
        inc++;
        new_val = current + inc;
    }
    *out = new_val;
    return true;
} 
```

我认为应该有一些技巧可以提高效率，但我似乎找不到任何大的改进（除了计算掩码的尾随零和适当地设置 inc 的起始值，这不是一种提升）。

编辑：同样重要的是，对于每个生成的值，都会生成大量额外的工作，这意味着很多重复是不可能的（一些重复，即使无法识别也可以，没有任何副作用完成的工作，这只是一个减速）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-03T11:49:14.917

这会以相反的顺序生成所有位模式（的初始值`val`应该等于`mask`）：

```
static bool next(size_t val, size_t mask, size_t *out) {
    if (val == 0) {
        return false;
    }

    *out = (val - 1) & mask;
    return true;
} 
```

* * *

并且这个（稍微不太明显的代码）直接生成所有位模式（初始值`val`应该为零）：

```
static bool next(size_t val, size_t mask, size_t *out) {
    if (val == mask) {
        return false;
    }

    *out = (val - mask) & mask;
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T11:41:47.170

从您的示例中，看起来这个伪代码可以解决问题：

```
current = p // set up current
getNotMasked(p, 0) // initial call

bitString current

getNotMasked(int pos)
  if (pos == current.length)
    print(current)
    return
  if (current[pos] == 1)
    current[pos] = 0
    getNotMasked(pos+1)
    current[pos] = 1
    getNotMasked(pos+1)
  else
    getNotMasked(pos+1) 
```

从这里生成 C 代码应该不难 - 替换为`bitString`和`int`或类似。`[pos]``& 1 << pos`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T11:39:39.257

最理想的方式是这样的：

1.  计算掩码中设置的位数，p
2.  找出一种将“标准化”二进制值中的位打乱到由模式决定的位置的方法
3.  数到 0..2 ^p -1
4.  对于每个值 shuffle 以生成模式兼容的值

*这当然假设进行改组是相当有效的，否则更容易通过根据模式中的总*位数从 0 计数到最大可能值并在每次计数时应用模式来强制它。不过，检测重复项可能有点贵。

对于`p = 9`(binary 1001 [2] )，只设置了两个位，因此我们知道要生成 2 ² = 4 个值。

将模式从右侧扫描 1 位，我们可以形成以下“洗牌表”：

*   位 0 是从位 0 复制的
*   位 3 是从位 1 复制的

因此，我们可以从 0 数到 3，并根据表格对每个值重新排列：

*   00 [2]给出输出 0000 [2]
*   01 [2]给出输出 0001 [2]
*   10 [2]给出输出 1000 [2]
*   11 [2]给出输出 1001 [2]

# c# - 使用一个连接的 LINQ 语句拆分字符串

> ID：14672015
> 
> 赞同：2
> 
> 时间：2013-02-03T11:33:16.140
> 
> 标签：c#, linq, c#-4.0

我想知道我是否可以改变这个：

```
"abc , 123; xyz, 100; go, 9; move, 50;" 
```

进入这个：

```
{ { "abc", "123" } , { "xyz" , "100" } , { "go" , "9" } , { "move" , "50" } } 
```

（数组`string[2]`）与一个长连接`LINQ`语句？

## 编辑：

首选`from-in-where-select`语句系列

## 编辑2：

另外，还有一种方法可以将输入字符串转换为某种复合类型，如 array of`struct { string, int }`或 some `Tuple<string,int>`？

像：

```
{
    new Tuple<string, int>() { "abc", 123 } ,
    new Tuple<string, int>() { "xyz" , 100 } ,
    new Tuple<string, int>() { "go" , 9 } ,
    new Tuple<string, int>() { "move" , 50 }
} 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T11:40:16.420

使用`String.Split`abd`String.Trim`和 LINQ `select`。

```
var result = (from keyValuePair in myString.Split(';')
              where keyValuePair.Trim() != ""
              select (from t in keyValuePair.Split(',')
                      select t.Trim()).ToArray()).ToArray();() 
```

### 更新

有一个数组`KeyValuePair<string, int>`

```
var result = (from keyValuePair in myString.Split(';')
              where keyValuePair.Trim() != ""
              let splittedKeyValuePair = keyValuePair.Split(',')
              select new KeyValuePair<string, int>(splittedKeyValuePair[0].Trim(), int.Parse(splittedKeyValuePair[1]))).ToArray(); 
```

拥有一个`Dictionary<string, int>`

```
var result = (from keyValuePair in myString.Split(';')
              where keyValuePair.Trim() != ""
              select keyValuePair.Split(',')).ToDictionary(kvp => kvp[0].Trim(), kvp => int.Parse(kvp[1])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T11:42:15.307

试试这个：

```
string str = "abc , 123; xyz, 100; go, 9; move, 50;";

stringses = str.Split(new[] {';'}, StringSplitOptions.RemoveEmptyEntries)
                                        .Select(s => s.Split(new[] {','}))
               .ToArray(); 
```

# iphone - 根据设备类型选择不同的故事板

> ID：14672023
> 
> 赞同：11
> 
> 时间：2013-02-03T11:34:29.980
> 
> 标签：iphone, ios, uistoryboard

我有一个通用应用程序，我在其中手动加载我的主故事板`application:didFinishLaunchingWithOptions`。

我有 2 个带有`~iPhone`和`~iPad`后缀的 iPhone 和 iPad 故事板。我正在使用以下方式加载我的故事板：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
self.initialViewController = [storyboard instantiateInitialViewController]; 
```

这会打印`Unknown class ViewController in Interface Builder file.`到控制台，因此显然它没有加载正确的故事板。但是，当我使用`[UIStoryboard storyboardWithName:@"MainStoryboard~iPhone" bundle:nil];`它时它工作正常，但当然只适用于 iPhone。

我错过了什么？如何使用名称后缀自动选择正确的故事板？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-03T12:09:55.587

我不知道根据文件名后缀自动选择情节提要。您可以使用`userInterfaceIdiom`iPad 和 iPhone 来选择：

```
if ([[UIDevice currentDevice] userInterfaceIdiom] ==UIUserInterfaceIdiomPad) {
    UIStoryboard *storyboard = 
    [UIStoryboard storyboardWithName:@"MainStoryboard_iPad" bundle:nil];
} else {
    [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
} 
```

但是，如果您这样做是为了使用特定的视图控制器启动，您需要做的就是将“开始”箭头拖到情节提要中的首选视图控制器

或者 - 在情节提要中选择视图控制器，转到属性检查器并勾选`isInitialViewController`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-02T18:16:18.880

这是您可以直接在 info.plist 文件中设置的另一件事。无需任何编程工作。查找名为*“Main storyboard file base name”*的属性，默认情况下将在其中包含*“Main”*。

您可以添加另一个名为*“主情节提要文件基本名称 (iPad)”的*属性，然后将其用于 iPad。

这是 plist 中的原始输出：

```
<key>UIMainStoryboardFile</key>
<string>Main</string>
<key>UIMainStoryboardFile~ipad</key>
<string>iPad</string> 
```

Afaik 也可以简单地添加一个名为 Main~iPad.storyboard 的第二个故事板（如果 UIMainStoryboardFile 键设置为 Main）。这将被用于 iPad。虽然有一段时间没有测试过这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T05:55:15.063

// 在 appdelegate 类中，在启动应用程序时选择指定的故事板。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        UIStoryboard *storyboard1;

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
        storyboard1 = [UIStoryboard storyboardWithName:@"Main_iPhone" bundle:[NSBundle mainBundle]];
    }
    else if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        storyboard1 = [UIStoryboard storyboardWithName:@"Main_iPad" bundle:[NSBundle mainBundle]];
    }
    UIViewController *vc = [storyboard instantiateInitialViewController];

    // Set root view controller and make windows visible
    self.window.rootViewController = vc;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-02T17:25:59.360

你可以这样命名你的故事板

*   Main.storyboard（适用于 iPhone）
*   Main_iPad.storyboard（适用于 iPad）

并像这样选择它们

```
- (UIStoryboard *)deviceStoryboardWithName:(NSString *)name bundle:(NSBundle *)bundle {
    if (IS_IPAD) {
        NSString *storyboardIpadName = [NSString stringWithFormat:@"%@_iPad", name];
        NSString *path = [[NSBundle mainBundle] pathForResource:storyboardIpadName ofType:@"storyboardc"];

        if (path.length > 0) {
            return [UIStoryboard storyboardWithName:storyboardIpadName bundle:bundle];
        }
    }

    return [UIStoryboard storyboardWithName:name bundle:bundle];
} 
```

# .htaccess - 将所有缺少 Itemid 的页面重定向到主页

> ID：14672029
> 
> 赞同：2
> 
> 时间：2013-02-03T11:34:58.810
> 
> 标签：.htaccess, mod-rewrite, http-status-code-301

我网站上的大多数页面都缺少 Itemid 值，即没有附加到 Itemid 键的数字。

我希望任何缺少 Itemid 的页面都重定向到主页。以下是一些 URL 示例：

```
 http://www.xyz.com/?page=16&&option=com_news&view=list&Itemid=
 http://www.xyz.com/index.php?option=com_news&view=detail&n_id=366&Itemid=
 http://www.xyz.com/index.php?option=com_car&view=search&Itemid=
 http://www.xyz.com/index.php?option=com_car&view=product&Itemid=&id=34&vid=133 
```

如何将这些缺少 Itemid 值的页面重定向到主页？

我尝试了一些排列和组合，但都是徒劳的；如果可能，请提供帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:13:29.007

哟可以试试这个：

```
RewriteEngine on
RewriteBase /
RewriteCond %{QUERY_STRING} Itemid=(&|$)
RewriteRule .*  http://homepage.com/?      [L] 
```

`?`如果要将查询保留在替换 URL 中，请删除最后一个问号。

# python - 我应该如何在 python 中构建基于 Web 的文件管理器

> ID：14672034
> 
> 赞同：-1
> 
> 时间：2013-02-03T11:35:37.420
> 
> 标签：python, django

我有我的桌面，并且我有一个虚拟机，我可以在其中运行 django 站点。

现在我将外部 USB 驱动器连接到我拥有所有数据的主机。

我想构建 Web 界面来管理该外部驱动器中的文件。我想做的主要功能是

1.  通过 Web 界面将文件从一个文件夹移动到另一个文件夹
2.  在名为存档的其他文件夹中具有相同的文件夹结构，因此当我选择文件夹并单击存档时，系统应将该文件夹移动到该位置

谁能给我一些关于我应该如何进行的指导。我不想要代码，而只是指导我应该如何解决问题和使用工具/包

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T18:14:11.710

由于文件操作可能需要相当长的时间，因此您应该考虑使用[celery](http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html "芹菜与 django")之类的东西在后台执行实际工作。这样可以使您的视图保持快速，因此如果移动/复制花费的时间更长，它们也不会超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:36:33.607

通过 Web 界面移动文件与使用 CLI 执行的操作基本相同，只是运行底层 Web 服务器的用户必须具有文件系统权限才能执行该操作。

看看这些模块：

*   [舒蒂尔](http://docs.python.org/2/library/shutil.html)
*   [路径.py](http://pypi.python.org/pypi/path.py)

他们是一个级别以上的`os.rename`公司。

# python - 将模拟按键转换为数字按键

> ID：14672039
> 
> 赞同：0
> 
> 时间：2013-02-03T11:36:36.253
> 
> 标签：python, keypress, joystick, analog-digital-converter

在 python 中，我想模拟一个操纵杆，当使用它时，可以给出 -63 到 +63 之间的值。当值为正时，我想按“w”键，负时按“s”键。我在接收这些值时没有问题，而是将这些模拟值转换为数字按键。有谁知道怎么做（代码可以是任何语言，我只需要一个大致的想法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:20:25.380

将 PostMessage 与 WM_CHAR 命令一起使用（如果您使用的是 Windows - 您没有说）。

# java - 为什么 Swing formWindowClosed 不能正常工作？

> ID：14672040
> 
> 赞同：1
> 
> 时间：2013-02-03T11:36:40.403
> 
> 标签：java, swing, netbeans

我有一个`SWING`表单，当我关闭应用程序时，我想将数据保存到文本文件中。

这是 Swing 生成的代码，我无法修改：

```
 setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    addWindowListener(new java.awt.event.WindowAdapter()
    {
        public void windowClosed(java.awt.event.WindowEvent evt)
        {
            formWindowClosed(evt);
        }
    }); 
```

这是我的自定义实现`formWindowClosed`。问题是应用程序在没有执行 formWindowClosed 的情况下关闭。

不是`formWindowClosed`我想在应用程序关闭之前放置执行代码的方法吗？

`formWindoClosed`执行：

```
private void formWindowClosed(java.awt.event.WindowEvent evt)
{

    System.out.println("Message");
    brain.getBirou().getProbaRepo().WriteParticipantToTXT();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T11:43:34.320

如果要在进程退出之前执行代码，则必须`WindowConstants.DISPOSE_ON_CLOSE`在侦听器方法中将默认关闭操作设置为 then 保存文件，然后`System.exit(0);`在完成后调用。
此外，“Swing”本身不会生成代码。也许您应该为自己手动编写 GUI 代码。那么当然你可以修改*任何东西*。
您必须有可能更改窗口的退出行为，因此将其设置为关闭时处置应该会有所帮助。也许您应该查找可以在 IDE 中更改它的位置。（或者只是用文本编辑器打开它......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-10T00:37:32.027

您可以改用 formWindowClosing 。

要通过 Netbeans IDE GUI Builder 执行此操作： 转到 Design 视图并右键单击 Navigator 窗口中的 [JFrame]。转到事件并选择要添加的事件。

请记住在 defaultCloseOperation 属性中将帧标记为 DO_NOTHING_ON_CLOSE。

# git - 如何反转 git 存储库

> ID：14672041
> 
> 赞同：2
> 
> 时间：2013-02-03T11:36:42.853
> 
> 标签：git

有一个简单app的完整源代码，需要根据它制作教材。所以，我在想，从完整的源代码初始化一个 git 存储库，然后开始以相反的顺序简化和删除部分，并提交每个后续更简单的工作版本，直到只有一个“你好，世界！” 遗迹。

问题：如何在 git 存储库中反转提交，保留提交消息等，使其看起来像最初按此顺序提交？

可以使用任何其他 VCS 来完成简化部分，只要最终结果是 git repo。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:15:46.910

我会使用`git format-patch`将补丁放入文件中，按时间顺序对它们进行排序（编号文件名，然后`sort -r`是 ），并使用`git apply --reverse`. 然后我会使用交互式 rebase ( `-i`) 来修复细节并提交消息。

无论如何，git 是很好的工具，因为您可以轻松地操纵历史，但这需要一些工作。

**编辑：**

当我稍后看到这个时，我对如何做到这一点有了更好的想法。它不改变基本原理，只改变实现：

我希望，您在主分支中有一些历史记录的存储库。因此，在当前 HEAD上*镜像提交的最简单方法是：*

```
git checkout -b mirror
git log --format=%H | xargs -n 1 git revert 
```

现在您在 master 分支中有旧的历史记录，并且 master 和 mirror 之间的新提交是来自 master 的反向提交。就像照镜子一样。我猜你会想要删除旧的历史并编辑提交消息，所以玩得开心`git rebase -i`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-01T22:05:34.223

我编写了一个脚本“git-reverse.sh”，它完全反转了 git repo 的所有分支。

它使用组合`git log --pretty="%T"`来提取树哈希，并`git commit-tree`针对原始树对象（文件）创建新的提交对象，但父边缘反转。

它似乎被一些回购卡住了。我不知道为什么。

你可以在这里找到它：

[https://github.com/gsylvie/git-reverse.sh](https://github.com/gsylvie/git-reverse.sh)

**示例用法**

```
git clone --mirror [git-clone-url]
cd [repo.git]
./git-reverse.sh
git log --all --date-order --graph --decorate 
```

**示例输出**

```
$ ./git-reverse.sh 
be0923ece8f73281e5e54906c29debb852894b92 - Reversed 1 of 360 (0%)
061bca59b29e75becbde66d2e510fc2b4059ccb2 - Reversed 2 of 360 (0%)
6a19039e05e3a0186187d0a6943634e8499b5a65 - Reversed 3 of 360 (0%)
7afe25e8caf93eb7107471a1bd078d4adc3f6999 - Reversed 4 of 360 (1%)
8b556f6fe97c5357c2328467a5ba01b77931ff82 - Reversed 5 of 360 (1%)
71fd0883975154f48059ca929db8ccb659c5049a - Reversed 6 of 360 (1%)
[etc...]
Switched to branch 'master'
Your branch and 'origin/master' have diverged,
and have 199 and 159 different commits each, respectively.
  (use "git pull" to merge the remote branch into yours)

*********************************************
| Git repo successfully reversed!!! :-) (-: |
*********************************************
To push the reversed repo:
  rm .git/packed-refs
  rm -rf .git/refs/remotes
  git push --mirror [new-git-clone-url]  

WARNING:
========
Pushing a reversed git repo is a profoundly destructive and confusing operation.

You have a full 'git clone --mirror' backup stored somewhere safe, right? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T05:01:46.447

如果存储库中的提交数量有限（我认为在制作教材时就是这种情况），我认为您可以简单地手动以相反的顺序执行樱桃挑选。

```
A <- B <- C <- D <- E
                    ^HEAD 
```

假设 A 是第一个空的提交，而 B 是完整的文件集，CDE 正在逐步删除文件，我认为你可以从 A 的另一个分支开始

```
A <- B <- C <- D <- E
^NewHead            ^HEAD 
```

和樱桃挑选 E、D、C、B 到 New Head：

```
A <- B <- C <- D <- E
 ^                  ^HEAD
  \- E' <- D' <- C' <- B'
                       ^NewHead 
```

当然，如果确实有很多提交，那么在导入之前导出补丁并使用脚本来操作它们（如其他答案所建议的那样）可能是更好的选择

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T09:52:19.683

首先，我不明白您为什么需要更改提交。您可以按任何顺序签出相应的版本。即`git checkout master~1`，显示，`git checkout master~2`显示，等等。

如果您确实需要它来获取您的历史记录，请尝试使用`revert`which replays history back。例如`git revert HEAD~5..HEAD`，将以相反的顺序恢复最后 5 次提交。但是，它会生成提交消息来说明它是`Revert "old commit message"`. 但是您可以编写脚本来修改消息。

# iphone - 裁剪旋转的 UIImage

> ID：14672044
> 
> 赞同：0
> 
> 时间：2013-02-03T11:37:32.607
> 
> 标签：iphone, objective-c, cocoa-touch, uiview, uiimage

我有这里描述的确切问题：

[裁剪一个旋转的 UIImage](https://stackoverflow.com/questions/12061691/rotation-and-cropping-an-image-ios)。

我需要裁剪旋转的 UIImage，但是，当我尝试解决方案时它不会裁剪图像

```
UIView *rotatedViewBox = [[UIView alloc] initWithFrame:videoPreviewView.frame];
NSLog(@"frame width: %f height:%f x:%f y:%f",videoPreviewView.frame.size.width, videoPreviewView.frame.size.height,videoPreviewView.frame.origin.x,videoPreviewView.frame.origin.y);
rotatedViewBox.transform = CGAffineTransformMakeRotation(90 * M_PI / 180);
CGSize rotatedSize = rotatedViewBox.frame.size;
UIGraphicsBeginImageContext(rotatedSize);
CGContextRef bitmap = UIGraphicsGetCurrentContext();
CGContextTranslateCTM(bitmap, rotatedSize.width / 2.0f, rotatedSize.height / 2.0f);
CGContextRotateCTM(bitmap, 90 * M_PI / 180);
CGContextScaleCTM(bitmap, 1.0f, -1.0f);
CGContextDrawImage(bitmap, CGRectMake(-videoPreviewView.frame.size.width / 2.0f,
                                             -videoPreviewView.frame.size.height / 2.0f,
                                              videoPreviewView.frame.size.width,
                                              videoPreviewView.frame.size.height),
                           image.CGImage);
UIImage *resultImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

日志是：框架宽度：310 高度：310 x：0 y：69

旋转虽然有效，但新图像不会在旧图像的 0,69,310,310 上裁剪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:07:07.623

~~您正在使用一个“解决方案”，虽然被接受，但也带有 OP 评论“但它不起作用”。~~

该解决方案仅声称处理问题的轮作部分，而不是作物。它正在做它声称要做的事情，但仅此而已。

这是一个执行裁剪的 CG 函数：

```
CGImageRef CGImageCreateWithImageInRect (
   CGImageRef image,
   CGRect rect
); 
```

输入您的图像和要裁剪到的区域的矩形。

请参阅此处的答案以获取示例用法：
[裁剪 UIImage](https://stackoverflow.com/questions/158914/cropping-a-uiimage)

# javascript - 我的 ajax 调用没有向我的服务器发送 utf - 8 参数

> ID：14672045
> 
> 赞同：0
> 
> 时间：2013-02-03T11:37:43.730
> 
> 标签：javascript, ajax

我在 java 中有一个 web 服务，其方法`FindEl(string myel)`接受 utf - 8 string paraeter

选择查询应该找到以该字符串开头的所有元素 这是 Java 中的代码 - 用于我的 Web 服务
public class locselall {

```
public String FindEl(String myel ) throws ClassNotFoundException 
{
//
    String selectQuery = "select biz_subject from pl_biz WHERE biz_subject ILIKE '"+ myel + "%'";
//get rows 
    } 
```

当我在浏览器中输入以测试我的网络服务并选择它时没有问题：

```
http://localhost:9091/locselall/services/locselall/FindEl?myel=СИТ 
```

有用;

* * *

这是向服务器发送请求的html页面

```
html>
<head>
<script>

var xmlhttp;
    if (window.XMLHttpRequest) 
    {
        xmlhttp = new XMLHttpRequest();
    } 
    else 
    {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
function triming()
{

var strInput= document.getElementById('txtInput').value;
// for example I enter "ШИФ " - utf  8 cahracters
var newstr = strInput.replace(/[^\u0400-\u04FF0-9]/gi, '');

         xmlhttp.onreadystatechange = function() 
        { 
            if (xmlhttp.readyState==4 && xmlhttp.status==200) 
            {
                alert(xmlhttp.responseText);
                //var xmlObj = xmlhttp.responseXML;   
                //var textXML = xmlObj.documentElement.firstChild.firstChild.nodeValue;

            }

        }

        var url = "http://localhost:9091/locselall/services/locselall/FindEl?myel="+ newstr;

        document.getElementById('pr').innerHTML = url;
        xmlhttp.open("GET", url, true);
        xmlhttp.send(); 

}

</script>

</head>
<body>
<input type= "text" id="txtInput"   />
<input type="button" id="btnSearch" onClick = "triming();"/>
<div id="pr"></div>

</body>
</html> 
```

* * *

如您所见，我有一个关于 url 的警报，它与我在浏览器中输入以测试我的 web 服务的 url 完全相同 - 但来自服务器的响应没有选择任何记录 3

* * *

我认为问题在于我的变量 newstr 包含 utf - 8 (cyrilic) 字符并且它没有正确发送到服务器，因此它无法选择任何记录！

我试过的

1.  添加了带有 charset = utf -8 的元标记

没有什么

1.  我读到他的问题可能出在我的 tomcat 服务器上，我添加了

server.xml 文件中的 URIEncoding = "utf-8"

```
<Connector port="8080" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443" 
               URIEncoding="UTF-8"/> 
```

依然没有

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:54:46.657

尝试`encodeURIComponent`在发送的 URL 上使用。我似乎记得以前看到过这个问题，它适用于拉丁字母字符，但西里尔字母失败了。

```
var url = "http://localhost:9091/locselall/services/locselall/FindEl?myel=" + encodeURIComponent(newstr); 
```

# python - Pymongo ORM 注入？消毒输入

> ID：14672046
> 
> 赞同：0
> 
> 时间：2013-02-03T11:37:47.030
> 
> 标签：python, mongodb, sql-injection, pymongo, sanitization

我想你知道sql注入吗，和nosql一样，叫做orm注入。
我正在使用 pymongo 和 mongodb，我为简单的 find() 和使用 $regexp 运算符的查找提供了用户控制的输入。
我如何“清理”这些输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:47:04.320

好吧，如果你说的是*ORM 注入*，那么你说的是关系数据库系统，而不是真正的 MongoDB 或 NoSQL 系统。PyMongo 不是 ORM 工具，因此不会发生 ORM 注入。

MongoDB 查找操作不会修改或删除集合中的任何数据。因此，对于不受信任的输入，您是非常安全的。

[正如这里](https://stackoverflow.com/questions/7278238/sanitizing-inputs-to-mongodb)所解释的，唯一可能发生的事情是错误的查询可能会通过执行以下操作来减慢您的系统速度：

```
{"$where": "function() { for (var i=0; i<1000000; i++) {}; return true; }"} 
```

这意味着您可以确保在您的代码中，没有函数通过用户参数传输。

# objective-c - 删除对象时CoreData的奇怪行为

> ID：14672049
> 
> 赞同：2
> 
> 时间：2013-02-03T11:38:10.697
> 
> 标签：objective-c, cocoa, core-data

我尝试构建简单的贝塞尔曲线编辑器。型号和代码如下。当我试图删除*node.bcpInData*或*node.bcpOutData 时*，只有*node.originData*被删除，女巫根本没有任何意义。

这是我的模型： ![在此处输入图像描述](../Images/0f33ac254934e82e8919dc06bdd40525.png)

这是*删除：*方法：

```
-(void) delete:(id)sender {

    [undoManager beginUndoGrouping];
    [points willChangeValueForKey:@"arrangedObjects"];

    NSMutableArray * nodesToDelete = [NSMutableArray array];
    for (TPPointData * pointData in points.selectedObjects) {

        NSLog(@"PointData %@", pointData);
        NSLog(@"PointData.node = %@", pointData.node);
        TPNode * node = pointData.node;

        if (pointData == pointData.node.originData) {
            //delete everything
            [nodesToDelete addObject:pointData.node];
            if (pointData.node.bcpInData!=nil)   {
                NSLog(@"deleting bcpInData: %@", pointData.node.bcpInData);
                [moc deleteObject:pointData.node.bcpInData];
                pointData.node = nil;
            }
            if (pointData.node.bcpOutData!=nil) {
                NSLog(@"deleting bcpOutData: %@", pointData.node.bcpOutData);
                [moc deleteObject:pointData.node.bcpOutData];
                pointData.node = nil;

            }
            NSLog(@"deleting originData: %@", pointData.node.bcpOutData);
            [moc deleteObject:pointData];
            pointData.node = nil;

        } else { //delete just object

            [moc deleteObject:pointData];
            pointData.node = nil;
        }
        NSLog(@"node: %@", node);   
    }

    NSMutableArray * contoursToDelete = [NSMutableArray array];
    for (TPNode * node in nodesToDelete) {

        if (node.contour.nodes.count == 1) {
            [contoursToDelete addObject:node.contour];
        }
        [moc deleteObject:node];
    }

    for (TPContour * contour in contoursToDelete) {
        [moc deleteObject:contour];
    }
    [points didChangeValueForKey:@"arrangedObjects"];
    [undoManager endUndoGrouping];
} 
```

尝试删除*原点*后列出：

```
2013-02-03 12:11:34.849 AlwaysSmooth[42786:403] PointData <TPPointData: 0x105c06400> (entity: PointData; id: 0x100133810 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/PointData/p327> ; data: {
    node = "0x100133830 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/Node/p328>";
    x = "215.5";
    y = "550.1667";
})
2013-02-03 12:11:34.850 AlwaysSmooth[42786:403] PointData.node = <TPNode: 0x105c13250> (entity: Node; id: 0x100133830 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/Node/p328> ; data: {
    attribute = nil;
    bcpIn = "(...not nil..)";
    bcpInData = "0x1001337b0 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/PointData/p326>";
    bcpOut = "(...not nil..)";
    bcpOutData = "0x100133640 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/PointData/p329>";
    contour = "0x1001c8c20 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/Contour/p282>";
    next = "(...not nil..)";
    originData = "0x100133810 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/PointData/p327>";
    prev = "(...not nil..)";
    smooth = 1;
    type = 2;
})
2013-02-03 12:11:34.851 AlwaysSmooth[42786:403] deleting bcpInData: <TPPointData: 0x100183d70> (entity: PointData; id: 0x1001337b0 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/PointData/p326> ; data: {
    node = "0x100133830 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/Node/p328>";
    x = "301.4023";
    y = "544.7839";
})
2013-02-03 12:11:34.853 AlwaysSmooth[42786:403] deleting originData: (null)
2013-02-03 12:11:34.854 AlwaysSmooth[42786:403] node: <TPNode: 0x105c13250> (entity: Node; id: 0x100133830 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/Node/p328> ; data: {
    attribute = nil;
    bcpIn = "(...not nil..)";
    bcpInData = "0x1001337b0 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/PointData/p326>";
    bcpOut = "(...not nil..)";
    bcpOutData = "0x100133640 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/PointData/p329>";
    contour = "0x1001c8c20 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/Contour/p282>";
    next = "(...not nil..)";
    originData = nil;
    prev = "(...not nil..)";
    smooth = 1;
    type = 2;
}) 
```

为什么它甚至不尝试删除*bcpOutData*？*originData*在删除前为空。删除后，节点对象中仍然存在*bcpInData*和*bcpOutData 。*撤消仍然是可能的。

当我尝试仅删除*bcpInData*或*bcpOutData*代码时，代码再次仅删除*originData*：

```
2013-02-03 12:29:13.526 AlwaysSmooth[42786:403] PointData <TPPointData: 0x100183d70> (entity: PointData; id: 0x1001337b0 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/PointData/p326> ; data: {
    node = "0x100133830 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/Node/p328>";
    x = "301.4023";
    y = "544.7839";
})
2013-02-03 12:29:13.527 AlwaysSmooth[42786:403] PointData.node = <TPNode: 0x105c13250> (entity: Node; id: 0x100133830 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/Node/p328> ; data: {
    attribute = nil;
    bcpIn = "(...not nil..)";
    bcpInData = "0x1001337b0 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/PointData/p326>";
    bcpOut = "(...not nil..)";
    bcpOutData = "0x100133640 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/PointData/p329>";
    contour = "0x1001c8c20 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/Contour/p282>";
    next = "(...not nil..)";
    originData = "0x100133810 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/PointData/p327>";
    prev = "(...not nil..)";
    smooth = 1;
    type = 2;
})
2013-02-03 12:29:13.529 AlwaysSmooth[42786:403] node: <TPNode: 0x105c13250> (entity: Node; id: 0x100133830 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/Node/p328> ; data: {
    attribute = nil;
    bcpIn = "(...not nil..)";
    bcpInData = "0x1001337b0 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/PointData/p326>";
    bcpOut = "(...not nil..)";
    bcpOutData = "0x100133640 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/PointData/p329>";
    contour = "0x1001c8c20 <x-coredata://8E705B64-CB39-4FBD-B296-936E70835DC8/Contour/p282>";
    next = "(...not nil..)";
    originData = nil;
    prev = "(...not nil..)";
    smooth = 1;
    type = 2;
}) 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:08:09.497

在点控制器中选择了 BcpInData 和 BcpOutData。`[points removeSelectedObjects:@[pointData]];`在删除之前就足够了 。

# c++ - SymInitialize 尽管返回 true 将 GetLastError 设置为 2 这一切意味着什么？

> ID：14672053
> 
> 赞同：0
> 
> 时间：2013-02-03T11:38:39.867
> 
> 标签：c++, winapi

我使用这个编译器：http: [//sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.7.2/32-bit/threads-posix/sjlj/x32-4.7.2-release-posix-sjlj -rev7.7z](http://sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.7.2/32-bit/threads-posix/sjlj/x32-4.7.2-release-posix-sjlj-rev7.7z)

代码：

```
#include <windows.h>
#include <iostream>
#include <imagehlp.h>

int main() {
   HANDLE process = GetCurrentProcess();
   if (GetLastError()) {
    printf("GetCurrentProcess failed: %d\n", GetLastError());
    return 1;
   }
   if (!SymInitialize(process, NULL, TRUE)) {
    printf("SymInitialize failed: %d\n", GetLastError());
    return 1;
  } else if (GetLastError()) {
    printf("SymInitialize returned true but failed nonetheless: %d\n", GetLastError());
    return 1;
  }
} 
```

它返回：`SymInitialize returned true but failed nonetheless: 2`

错误 2 表示“系统找不到指定的文件”。什么文件，我不能在这里把它放在任何上下文中。~~我从文档中了解到，如果此函数成功 GetLastError*必须*为零。~~

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T11:55:30.367

函数成功时不会重置错误是很常见的。并且完全有可能“SymInitialize”在内部调用了某个函数“在 dir1 查找文件，在 dir2 查找文件，...”，而“我在 dir1 中找不到它”的错误是 2。现在，您必须实际调用 SetLastError(0) 来清除错误代码，这可能是疏忽或有意 SymInitialize 中的代码没有设置它。您需要检查 SymInitialize 的结果以判断它是否成功。如果不成功，请查看错误代码。但是 GetLastError() 就是这样 - 发生的最后一个错误，而不是“我的最后一个函数是否成功！”

# windows-phone-7 - 列表框内的访问控制而不触发 selectionChanged 事件

> ID：14672056
> 
> 赞同：0
> 
> 时间：2013-02-03T11:39:06.603
> 
> 标签：windows-phone-7, checkbox, listbox, selectionchanged

对于我在 windows phone 中的列表框，我在[本教程](http://windowsphonegeek.com/articles/Implementing-a-WP7-Checked-ListBox-in-different-ways)的帮助下为每个项目添加了一个复选框 （选项 2）。在我的列表框已经有一个 SelectionChanged 事件之前。当用户仅选中复选框时，如何防止触发事件？SelectionChanged 事件应该只在他点击列表框中的文本框时触发，而不是复选框。

那是我的列表框：

```
 <ListBox x:Name="toDoItemsListBox" ItemsSource="{Binding Source={StaticResource cvs}}" Grid.Row="1" Margin="12, 0, 12, 0" Width="440" SelectionChanged="goToNavigation" IsSynchronizedWithCurrentItem="False">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" >
                            <CheckBox IsChecked="{Binding IsFavorite}" Height="48" Width="48" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked" Style="{StaticResource CheckBoxStyle1}"/>
                            <StackPanel Orientation="Vertical">
                                <TextBlock Text="{Binding Shortcut}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}" />
                                <TextBlock Text="{Binding BuildingName}" TextWrapping="Wrap" Style="{StaticResource PhoneTextSubtleStyle}" />
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

这些是我的检查事件：

```
 private void CheckBox_Checked(object sender, RoutedEventArgs e)
    {
        ListBoxItem checedItem = this.toDoItemsListBox.ItemContainerGenerator.ContainerFromItem((sender as CheckBox).DataContext) as ListBoxItem;
        if (checedItem != null)
        {
            checedItem.IsSelected = true;
        }
    }

    private void CheckBox_Unchecked(object sender, RoutedEventArgs e)
    {
        ListBoxItem checedItem = this.toDoItemsListBox.ItemContainerGenerator.ContainerFromItem((sender as CheckBox).DataContext) as ListBoxItem;
        if (checedItem != null)
        {
            checedItem.IsSelected = false;
        }
    } 
```

另外我必须提到，仅当我选中复选框时才会引发 selectionChanged 事件。不是当我取消选中它时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:00:05.477

我让它在没有选择更改事件的情况下工作。作为替代，我使用了一个点击事件：

```
 <StackPanel Orientation="Vertical" Tap="StackPanel_Tap">
                                <TextBlock Text="{Binding Shortcut}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}" />
                                <TextBlock Text="{Binding BuildingName}" TextWrapping="Wrap" Style="{StaticResource PhoneTextSubtleStyle}" />
                            </StackPanel> 
```

在后面的代码中，我得到了我的列表项：

```
 private void StackPanel_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        // Save current POI.
        Object object = (sender as StackPanel).DataContext as Object;
     ...} 
```

# php - PHP循环X次

> ID：14672062
> 
> 赞同：16
> 
> 时间：2013-02-03T11:40:07.990
> 
> 标签：php, loops

我有一个名为的字符串`$columns`，它动态地获取一个从 1 到 7 的值。我想创建一个 for 的循环，`<td></td>`不管它的值`$columns`是多少倍。知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-03T11:44:01.300

```
for ($k = 0 ; $k < $columns; $k++){ echo '<td></td>'; } 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2016-11-21T03:34:16.647

这是实现此目的的更易读的方法：

```
foreach(range(1,$columns) as $index) {
   //do your magic here
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-10-28T17:25:38.970

如果您只需要使用重复次数：

```
for ($i = 0; $i < 5; $i++){
    // code to repeat here
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-02-15T10:14:30.187

我喜欢这种方式：

```
while( $i++ < $columns ) echo $i; 
```

请记住，如果`$columns`是 5，这将运行 5 次（不是 4 次）。

*编辑：这里的初始状态似乎有些混乱`$i`。`$i=0`如果您愿意，欢迎您提前初始化。但是这不是必需的，因为 PHP 是一个非常有用的引擎，并且会自动为您执行此操作（但是，如果您碰巧启用了这些引擎，它会发出通知）。*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-03T11:43:04.780

如果`$columns`是 a `string`，您可以转换为`int`并使用简单的 for 循环

```
for ($i=1; $i<(int)$columns; $i++) {
   echo '<td></td>';
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-12-10T19:33:32.840

PHP中有一个`str_repeat()`函数，可以多次重复一个字符串。您的问题的解决方案是： `str_repeat( '<td></td>', $columns );`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-03T11:42:25.607

[`for`循环](http://php.net/manual/en/control-structures.for.php)将起作用：

```
for ($i = 0; $i < $columns; $i++) {
    ...
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-07-06T06:50:56.980

只是重复 $n 次？...如果不介意 $n 倒退...优点是您可以在开头看到/配置“次”

```
$n = 5;
while (--$n >= 0)
{
  // do something, remember that $n goes backwards;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-03T11:43:18.443

您可以轻松地通过 for 循环运行它来实现这一点

```
$myData = array('val1', 'val2', ...);

for( $i = 0; $i < intval($columns); $i++)
{
    echo "<td>" . $myData[$i] . "</td>";
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-12-10T19:50:20.150

为什么要使用逻辑，不要浪费那些 CPU 周期！

```
<td colspan="<?php echo $columns; ?>"></td> 
```

# php - 提交后的Tokeninput foreach值并排序自定义和现有值

> ID：14672063
> 
> 赞同：1
> 
> 时间：2013-02-03T11:40:08.247
> 
> 标签：php, jquery, codeigniter, submit, jquery-tokeninput

[我使用来自http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)的 jQuery Tokeninput 自动完成插件 当我尝试将值提交给我的 php 处理程序时，我不知道该怎么做

**HTML**

```
<form action="<?=base_lang_url("addtags/test")?>" method="post">
<input id="tags" name="tags">
<input type="submit" value="Add">
</form> 
```

**JS**

```
$('#tags').tokenInput("../ajax/getTags", {
    allowCustomEntry: true,
    propertyToSearch: "name",
    tokenValue: "name",
    tokenLimit: 5,
    preventDuplicates: true,
    theme:"facebook",
    noResultsText: "No results",
    searchingText: "Searching..."
}); 
```

JS 我只是为了展示我是如何设置它的，但我认为这并不重要。

**PHP**

```
if(trim($this->input->post("room_tags")) != ""){
    $tags = explode(",",trim($this->input->post("room_tags")));
    foreach($tags as $value){
        if(preg_replace( "/[^0-9]/", "",$value)){
            $tag_int[] = $value;
        }else{
            $tag_string[] = $value;
        }
    }

    $this->load->model("tags_model");
    $tag_find = $this->tags_model->findTags($tag_int);

    if(is_array($tag_find) && is_array($tag_string)){
        $all_tags = array_merge($tag_find,$tag_string);
    }elseif(is_array($tag_find) && isset($tag_find)){
        $all_tags = $tag_find;
    }elseif(isset($tag_string) && is_array($tag_string)){
        $all_tags = $tag_string;
    }

    echo "<pre>";
        echo print_r($all_tags);
    echo "</pre>";
} 
```

**结果**

```
Array
(
    [0] => Array
        (
            [tag_name] => Hej
        )

    [1] => Array
        (
            [tag_name] => Hvor
        )

    [2] => Array
        (
            [tag_name] => Hvad
        )

    [3] => 'wegehe'
    [4] => 'afqfq'
) 
```

**我喜欢这样：**

```
Array
    (
        [0] => Hej
        [1] => Hvor
        [2] => Hvad
        [3] => wegehe
        [4] => afqfq
    ) 
```

没有 ' 在字符串上。

希望有人可以提供帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:14:30.600

在此之前添加此代码

```
echo '<pre>';

$all_tags_copy = $all_tags;
$all_tags = array();

foreach($all_tags as $key => $value){
 if(is_array($value) && count($value) > 0){
  foreach($value as $v2){
   if(!empty($v2)){
    $all_tags[] = $v2;
   }
  }
 }else{
  if(!empty($value)){
   $all_tags[] = $value;
  }
 }
} 
```

# scala - 在 Scala For 循环中返回

> ID：14672064
> 
> 赞同：1
> 
> 时间：2013-02-03T11:40:08.997
> 
> 标签：scala, for-loop, return, scala-2.10

我是 Scala 的新手，所以先尝试做简单的事情。

我写了一个方法如下。

```
//Given a list of numbers find the first number that is a multiple of 7
  def FindFirstMultiple(input: List[Int]) : Int  = {   
    for (
        i <- input        
        if (i % 7 == 0)
       ) 
      return i        
  } 
```

此方法给出错误

```
type mismatch;  found   : Unit  required: Int 
```

我无法理解这一点。当我没有返回类型而只打印值时，它工作正常。另外，为什么错误会波浪形地悬停在 `i <- input`. 我认为 Scala 编译器试图告诉我一些事情，而我就是无法理解。这个错误的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T12:17:07.553

如果你想用 for 循环运行它，你还需要添加一个 return 0 ，如

```
def FindFirstMultiple(input: List[Int]) : Int  = {   
    for ( i <- input if (i % 7 == 0)) return i 
    0       
  } 
```

最终值是必需的，因为当 if 不满足时，for 本身不会返回任何内容。

正如 user1779032 建议的那样，更好的方法是

```
def FindFirstMultiple(input: List[Int]) = input.find(i => i % 7 == 0).getOrElse(0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T11:46:53.377

`for`在 Scala 中不是 a `for loop`，实际上它根本不是循环。它是 map 和 flatMap 以及其他单子好东西的语法糖。Monad 在函数式编程中非常有用，我建议花一些时间学习它们；您可以从[http://james-iry.blogspot.com/2007/09/monads-are-elephants-part-1.html](http://james-iry.blogspot.com/2007/09/monads-are-elephants-part-1.html)开始，关注整个系列。感谢出色的 James Iry 先生。

如果您只想要与您的查询匹配的第一项，试试这个

```
val findFirst:Option[Int] = input.find(i => i % 7 == 0) 
```

的可能值`findFirst`是

1.  Some(n) 如果找到了某些东西，其中 n 是找到的 Int
2.  如果什么也没找到，则无

# android-annotations - CursorAdapter 中的 Android 注释

> ID：14672069
> 
> 赞同：2
> 
> 时间：2013-02-03T11:40:35.493
> 
> 标签：android-annotations

我正在使用 android 注释为 android 开发，但我不明白如何将它与 CursorAdapters 一起使用。

[BaseAdapters](https://github.com/excilys/androidannotations/wiki/Adapters-and-lists "基本适配器")已经有一个示例，但是如果我将 @EBean 添加到扩展 CursorAdapter 的类中，我会收到错误消息“ *@EBean 注释元素应该有一个带有一个参数最大值的构造函数，类型为 android.content.Context* ”。CursorAdapter 已经有两个构造函数。

```
public class SongInfoAdapter extends CursorAdapter {
...
@Override
public void bindView(View view, Context context, Cursor cursor) {
 ...
 rowData.id.setOnClickListener(new OnClickListener() {
     public void onClick(View v) { 
         itemOnClick(rowData);
     }
 });
}

public void itemOnClick(RowDataHolder rowData) {
    switch(audioPlayer.getPlayingplayer()) {
    case AudioPlayer.RIGHT:
    case AudioPlayer.NONE:
        audioPlayer.load(rowData.songInfo, AudioPlayer.LEFT);
        break;
    case AudioPlayer.LEFT:
        audioPlayer.load(rowData.songInfo, AudioPlayer.RIGHT);  
        break;
    }
}
...
} 
```

*AudioPlayer*是一个使用注解（@EBean）的类，但是我不会写

```
@Bean
AudioPlayer audioPlayer; 
```

因为我不能在这个类中使用注释。如何在 CursorAdapter 中使用 AndroidAnnotations？

提前谢谢了 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T09:16:05.700

创建一个带有一个参数的构造函数，即上下文。

```
SongInfoAdapter (Context context) {
    super(context, null, FLAG_AUTO_REQUERY);
} 
```

创建一个 init 方法并在 init 中为适配器设置光标。

```
public void init(Cursor c) {
    this.changeCursor(c);
} 
```

现在您可以使用注释`SongInfoAdapter`进行注释`@EBean`和使用。

# android - 在 android 中解析之后的字符串到 XML 的转换

> ID：14672070
> 
> 赞同：0
> 
> 时间：2013-02-03T11:40:59.613
> 
> 标签：android, xml-parsing

我正在做一个`HttpPost`请求作为回报 我得到一个 XML 我可以把它吐司 我在一个字符串中

```
try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://xx.xx.xx.xx/login.asmx/login");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        String responseBody = EntityUtils.toString(response.getEntity());
        Toast.makeText( getApplicationContext(),"responseBody:   "+responseBody,Toast.LENGTH_SHORT).show(); 
```

XML看起来像

`<root status="Y">`

`<mb mbcode="150201" mbname="AKASH KUNDU" branchid="1" pwd="admin"/>`

`</root>`

我想解析这个 XML 并将这个数据存储为一个全局变量。我没有找到任何虔诚的例子，这就是为什么我冒充我是新来的提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-18T10:38:36.153

**我找到了我的解决方案**

```
HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://xx.xx.xx.xx/login.asmx/login");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        String responseBody = EntityUtils.toString(response.getEntity());

        //saving the file as a xml
        FileOutputStream fOut = openFileOutput("loginData.xml",MODE_WORLD_READABLE);
        OutputStreamWriter osw = new OutputStreamWriter(fOut);
        osw.write(responseBody);
        osw.flush();
        osw.close();

        //reading the file as xml
        FileInputStream fIn = openFileInput("loginData.xml");
        InputStreamReader isr = new InputStreamReader(fIn);
        char[] inputBuffer = new char[responseBody.length()];
        isr.read(inputBuffer);
        String readString = new String(inputBuffer);

        //getting the xml Value as per child node form the saved xml
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        //InputStream is = new ByteArrayInputStream(responseBody.getBytes("UTF-8"));
        InputStream is = new ByteArrayInputStream(readString.getBytes("UTF-8"));
        Document doc = db.parse(is);

        /*DocumentBuilder builder=DocumentBuilderFactory.newInstance().newDocumentBuilder();
        Document doc=builder.parse(fIn, null);*/
        NodeList root=doc.getElementsByTagName("root");

        for (int i=0;i<root.getLength();i++) {
            loginStatus = "" + ((Element)root.item(i)).getAttribute("status");
        }

            if(loginStatus.equalsIgnoreCase("Y"))
            {
                NodeList mb=doc.getElementsByTagName("mb");
                for (int i=0;i<mb.getLength();i++) {
                    setMbcode("" + ((Element)mb.item(i)).getAttribute("mbcode"));
                    setMbname("" + ((Element)mb.item(i)).getAttribute("mbname"));
                    branchid  = "" + ((Element)mb.item(i)).getAttribute("branchid");
                    pwd       = "" + ((Element)mb.item(i)).getAttribute("pwd");

                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:44:34.620

试试 Android 开发者指南，或[http://developer.android.com/training/basics/network-ops/xml.html](http://developer.android.com/training/basics/network-ops/xml.html)。[使用google](https://www.google.com)也不是太难。

# jquery - 检测是否有下一个，而在每个循环中

> ID：14672073
> 
> 赞同：0
> 
> 时间：2013-02-03T11:41:13.233
> 
> 标签：jquery

我将尝试在这里让代码自己说话：我可以使用 if 条件来检查当前迭代之后是否还会有另一次迭代？

```
$('#%id% td').each(function(){ 
if(??????????){                       // if there will be a next iteration
while($(this).height() == thisheight){
    // do something here on this iteration, but only if there will be another.
}  
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T11:44:26.470

由于您似乎想要处理除最后一个以外的所有元素，您可以使用[`.slice` *^([docs])*](http://api.jquery.com/slice/)简单地从集合中删除最后一个元素：

```
$('#%id% td').slice(0, -1).each(function() {
    // no need for `if` statement here
    // ...
}); 
```

您最初问题的答案是将当前迭代与元素数量进行比较：

```
var $elements = $('#%id% td');
var max = $elements.length - 1;

$elements.each(function(index) { 
    if (index < max) {
        // ...
    }
    // ...
}); 
```

# php - preg_replace 与 file_get_contents

> ID：14672088
> 
> 赞同：0
> 
> 时间：2013-02-03T11:42:28.940
> 
> 标签：php, function, preg-replace, file-get-contents

我在这里查看了几个问题，并进行了谷歌搜索，但我似乎找不到正确的方法来执行此操作。

我正在使用这个功能

```
function replace_c($content){
    global $db;
    $replacements = $db->query("SELECT * FROM `replacements`");
    while($replace = $replacements->fetch_assoc()){
        preg_replace("/".$replace['triggers']."/i",$replace['php'], $content);
    }
    return $content;
} 
```

这是我对函数的调用

```
$contents = replace_c(file_get_contents("templates/" . $settings['theme'] . "/header.html")); 
```

它不会给出错误，只是不会像应有的那样替换文本，所以我不确定该功能是否真的有效。我确实尝试`preg_replace_callback`过，但我认为我没有完全理解它是如何工作的，并且除了错误之外什么也没产生，我是否必须走回调路线，或者我只是在我当前的函数中遗漏了一些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T11:45:57.187

您永远不会将返回值分配`preg_replace`给`$content`...。您需要的是：

```
$content = preg_replace("/".$replace['triggers']."/i",$replace['php'], $content); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T11:46:29.720

基拉，

preg_Replace 函数返回被替换的字符串。您发布给它的 $content 主题不会作为参考更新。所以尝试将代码更改为；

```
$content = preg_replace("/".$replace['triggers']."/i",$replace['php'], $content); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T11:46:13.250

您需要将替换的内容存储回一个变量。

```
$content = preg_replace(...); 
```

另外，你确定一个`str_replace()`还不够吗？

# vb.net - 将 Delphi Dll 导入我的 Vb.net 项目

> ID：14672090
> 
> 赞同：-4
> 
> 时间：2013-02-03T11:42:40.687
> 
> 标签：vb.net, delphi, interop

我试图将 delphi dll 导入我的 vb.net 项目

这是我的代码：

```
Private Declare Function AddIntegers Lib "C:\Program Files (x86)\Borland\Delphi6\Projects\first dll\Project2.dll" Alias "AddIntegers" (ByVal a As Integer, ByVal b As Integer) As Integer

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Dim ii As Integer = AddIntegers(1, 3)
        MsgBox(ii)
    End Sub 
```

这是delphi库代码：

```
library MyFirstLibrary;

uses
  SysUtils,
  Classes;

{$R *.res}

function AddIntegers(_a, _b: integer): integer; stdcall;
begin
  Result := _a + _b;
end;

exports
   AddIntegers;
begin
end. 
```

有一个 EntryPointNotFoundException：

```
Unable to find an entry point named 'AddIntegers' in DLL 'C:\Program Files (x86)\Borland\Delphi6\Projects\first dll\Project2.dll'.":"" 
```

如何修复 EntryPointNotFoundException（我的 delphi 代码中存在 AddIntegers 函数）？(vb.net 或 c#)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T11:51:02.057

我的猜测是您正在加载不同的库。您正在加载`Project2.dll`, 而您的 Delphi 库是`MyFirstLibrary.dll`在您在问题中发布的代码中调用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:51:42.727

尝试`DllImport`直接使用并应用不同的调用约定修饰符：

```
<DllImport("C:\Program Files (x86)\Borland\Delphi6\Projects\first dll\Project2.dll", CallingConvention:=CallingConvention.StdCall)> _
Private Shared Function AddIntegers(ByVal a As Integer, ByVal b As Integer) As Integer 
```

# jquery - jquery insertAfter() 也插入克隆

> ID：14672094
> 
> 赞同：0
> 
> 时间：2013-02-03T11:43:23.987
> 
> 标签：jquery, clone

我的 js 脚本中发生了一件奇怪的事情。

当 click 函数被执行时，一个元素应该被**插入到**另一个元素的下方，**但由于某种原因，元素克隆也被插入到那里**。

怎么来的？克隆发生在 click 函数之外。

请帮助我了解发生了什么。

[http://jsbin.com/unenil/1/edit](http://jsbin.com/unenil/1/edit)

```
$("button").click(function() {
  $(".one").insertAfter(".two");
  $(".status").text("done");
});

var clone_one = $(".one").clone();
var clone_two = $(".two").clone();
$("body").append(clone_one);
$("body").append(clone_two); 
```

基本上我不明白为什么这种情况下的点击功能与在它之外发生的克隆有任何关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:45:20.647

克隆的元素有`one`类，所以他的克隆也有。

因此`$(".one")`包含克隆和克隆。

一种解决方案是保留对原始元素的引用并将其插入：

```
var original = $(".one");
var clone_one = original.clone();
var clone_two = $(".two").clone();
$("body").append(clone_one);
$("body").append(clone_two);

$("button").click(function() {
  original.insertAfter(".two");
  $(".status").text("done");
}); 
```

# php - 是否可以在codeigniter中动态更改url？

> ID：14672101
> 
> 赞同：2
> 
> 时间：2013-02-03T11:44:17.680
> 
> 标签：php, codeigniter

我有一个页面，其中书籍将以“网格”视图或“列表”视图显示。

所以我当前的网址是 `http://localhost/thebestbookfinder.com/viewallbooks/books/pgn/grid/8`

如果我从我的视图页面单击“列表”链接，那么我的当前页面应该加载，只需将此部分更改`/grid/`为`/list/`和其他相同。IE`http://localhost/thebestbookfinder.com/viewallbooks/books/pgn/list/8`

我试过这个，但这没有帮助。请帮我解决这个问题。

inMyViewPage.php

```
<td width="10%" style="font-size:12px;color: red;"> 
       <?php
                                       echo "".anchor('#', 'Grid', array('id' => '')).""; 
                                       echo "".anchor(base_url().'viewallbooks/books/pgn/'.$this->uri->segment(4),'  List', array('id' => ''))."";
                                        ?>
                                    </td> 
```

**如果表单提交解决了我的问题，而不是链接，那么请帮助我**

控制器.php

```
 function books()
{
    $config = array();  
    $config['base_url'] = base_url().'viewallbooks/books/pgn/'.$this->uri->segment(4); 
    $config["total_rows"] = $this->Booksmodel->record_count_for_secondtopBooks('3');
    $config['uri_segment'] = 5;
    $config['per_page'] = 8;
    $config['full_tag_open'] = '<div id="pagination">';
    $config['full_tag_close'] = '</div>'; 

    $this->pagination->initialize($config);
    $page = ($this->uri->segment(5)) ? $this->uri->segment(5) : 0;

    $data["query"] = $this->Subjectmodel->get_subjects();
    $data["query1"]=  $this->Editionmodel->get_edition();

    $data["query2"]=$this->Booksmodel->get_all_book_list_atHomeTop('3',$config["per_page"], $page);

    $viewType = ($this->uri->segment(4)) ? $this->uri->segment(4) : 'list';

     if($viewType=='list')
     {
          $this->load->view('commonfiles/bookslistview',$data);

     }
      else {
                  $this->load->view('commonfiles/booksgridview',$data);  
          }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:27:56.443

需要像这样在 route.php 中添加路由

```
$route['viewallbooks/books/(:any)'] = "viewallbooks/books/$1"; 
```

函数 book() 默认包含 3 个带值的参数
下面是更正确的变量

```
 function books($img_type = 'png', $view_type = 'list', $page = 0) {
            $config = array();  
            $config['base_url'] = base_url().'viewallbooks/books/'.$img_type.'/'.$view_type.'/'.$page; 
            $config["total_rows"] = $this->Booksmodel->record_count_for_secondtopBooks('3');
            $config['uri_segment'] = 5;
            $config['per_page'] = 8;
            $config['full_tag_open'] = '<div id="pagination">';
            $config['full_tag_close'] = '</div>'; 

            $this->pagination->initialize($config);

            $data["query"] = $this->Subjectmodel->get_subjects();
            $data["query1"]= $this->Editionmodel->get_edition();
            $data["query2"]= $this->Booksmodel->get_all_book_list_atHomeTop('3',$config["per_page"], $page);

            if($viewType=='list')
                $this->load->view('commonfiles/bookslistview',$data);
            else
                $this->load->view('commonfiles/booksgridview',$data);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:22:22.767

您必须执行以下任一操作：

*   使用新的 url（网格）重新加载页面以呈现该模板

或者：

*   渲染网格和列表视图，然后根据您想要看到的内容动态地（使用一些 css/javascript）隐藏内容。

或者：

*   使用 AJAX 加载网格视图并用它替换列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T04:57:01.820

做这个：

```
 <?php  echo "".anchor(base_url().'viewallbooks/books/pgn/grid/'.$this->uri->segment(5),'  Grid', array('id' => ''))."";
  echo "".anchor(base_url().'viewallbooks/books/pgn/list/'.$this->uri->segment(5),'  List', array('id' => ''))."";  ?> 
```

并且无需更改上述控制器中的任何内容。

# glassfish - 如何创建内部网桥以将队列转发到主题

> ID：14672107
> 
> 赞同：1
> 
> 时间：2013-02-03T11:44:45.380
> 
> 标签：glassfish, jms, openmq

我正在尝试设置从队列到主题的内部桥接，但出现“查找失败”异常。

以下是更多细节：

环境：GlassFish 3.1.2.2（全新安装）和嵌入式 JMS 主机

1.  创建队列连接池（javax.jms.QueueConnectionFactory）：pool1（jndi和池名）
2.  创建主题连接池（javax.jms.TopicConnectionFactory）：pool2（jndi和池名）
3.  创建队列：queue1（jndi 和队列名称）
4.  创建主题：queue1（jndi 和队列名称）

domain.xml 配置如下：

```
 <jms-service default-jms-host="default_JMS_host">
    <jms-host host="localhost" name="default_JMS_host" lazy-init="false">
        <property name="imq.bridge.enabled" value="true"></property>
    <property name="imq.bridge.admin.user" value="admin"></property>
        <property name="imq.bridge.admin.password" value="admin"></property>
        <property name="imq.bridge.bridge1.type" value="jms"></property>
        <property name="imq.bridge.activelist" value="bridge1"></property>
        <property name="imq.bridge.bridge1.xmlurl" value="file:///c:/tmp/bridge.xml"></property>
    </jms-host>
  </jms-service> 
```

和 bridge.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE jmsbridge SYSTEM "sun_jmsbridge_1_0.dtd">
<jmsbridge name="bridge1">
  <link name="link1">
    <source connection-factory-ref="pool1" destination-ref="queue1">
    </source>
    <target connection-factory-ref="pool2" destination-ref="topic1">
    </target>
  </link>
  <connection-factory ref-name="pool1" lookup-name="pool1"/>
  <connection-factory ref-name="pool2" lookup-name="pool2" />
  <destination ref-name="queue1" name="queue1" type="queue" lookup-name="queue1" />
  <destination ref-name="topic1" name="topic1" type="topic" lookup-name="topic1" />
</jmsbridge> 
```

例外：

```
[01/Feb/2013:16:14:56 CAT] WARNING [B2217]: Failed to start bridge service manager:
javax.naming.NamingException: Lookup failed for 'pool1' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.
JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: pool1 not found]
        at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
        at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
        at javax.naming.InitialContext.lookup(InitialContext.java:411)
        at javax.naming.InitialContext.lookup(InitialContext.java:411)
        at com.sun.messaging.bridge.service.jms.JMSBridge.createConnectionFactory(JMSBridge.java:513)
        at com.sun.messaging.bridge.service.jms.JMSBridge.createLink(JMSBridge.java:333)
        at com.sun.messaging.bridge.service.jms.JMSBridge.init(JMSBridge.java:227)
        at com.sun.messaging.bridge.service.jms.BridgeImpl.start(BridgeImpl.java:125)
        at com.sun.messaging.bridge.BridgeServiceManagerImpl.startBridge(BridgeServiceManagerImpl.java:447)
        at com.sun.messaging.bridge.BridgeServiceManagerImpl.start(BridgeServiceManagerImpl.java:255)
        at com.sun.messaging.jmq.jmsserver.Broker._start(Broker.java:1548)
        at com.sun.messaging.jmq.jmsserver.Broker.start(Broker.java:456)
        at com.sun.messaging.jmq.jmsserver.BrokerProcess.start(BrokerProcess.java:164)
        at com.sun.messaging.jmq.jmsserver.DirectBrokerProcess.start(DirectBrokerProcess.java:92)
        at com.sun.messaging.jmq.jmsclient.runtime.impl.BrokerInstanceImpl.start(BrokerInstanceImpl.java:206)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at com.sun.enterprise.glassfish.bootstrap.GlassFishMain.main(GlassFishMain.java:97)
        at com.sun.enterprise.glassfish.bootstrap.ASMain.main(ASMain.java:55)
Caused by: javax.naming.NameNotFoundException: pool1 not found
        at com.sun.enterprise.naming.impl.TransientContext.doLookup(TransientContext.java:248) 
```

[文档](http://mq.java.net/4.4-content/jmsbridge-funcspec.html)非常好，但我无法解决这个问题......

# php - 重新启动 PHP 循环

> ID：14672109
> 
> 赞同：0
> 
> 时间：2013-02-03T11:44:52.687
> 
> 标签：php, foreach, while-loop, reset

我有这段代码

```
foreach($mnthArrPtrn as $m => $mn)
{   
    if(!isset($catName)) {
        $catVals = array();      
        $prevCat = $catName = $pntChrtQry[0]['CAT']['categoryname']; 
        $pntVals .= '{name:'.$catName.',data:[';
    }else if($prevCat != $catName) {
        $prevCat = $catName;
        $catVals = array(); 
        $pntVals .= '{name:'.$catName.',data:[';
    }     
    foreach($pntChrtQry as $key => $val){
        $catName = $val['CAT']['categoryname'];
        if($prevCat != $catName){
            continue 2;
        }
        echo '<br />$m::'.$m; 
        echo '<br />$mn::'.$mn;
        echo '<br />$val::'.$val[0]['MNTH'];
        if($m == $val[0]['MNTH'] || $mn == $val[0]['MNTH']){
            $catVals[] = $val[0]['total'];
        }
    }
    pr($catVals);
    if(!isset($catName)){
        $pntVals .= ']},';
    }
    $catName = $val['CAT']['categoryname'];
} 
```

第一个循环遍历一个月数组，这些数组作为键值对连接。我在这里做的是获得一个新的 catName 我继续内部循环，但同时我想用 $prevCat,$catName 重新启动循环 1 仍然保留它们的值。这可能吗？对不起，如果这是一个愚蠢的问题。

我尝试将第一个语句转换为 while 语句，然后使用重置，但这对我没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T12:06:00.970

这样的事情将允许您任意重新启动循环：

```
while (list($key, $value) = each($mnthArrPtrn)) {
    if ($needToRestart) {
        reset($mnthArrPtrn);
    }
} 
```

[在这里](http://www.php.net/manual/en/function.each.php)查看更多。

# java - 是否有一个随机函数可以返回所选类型的值？

> ID：14672113
> 
> 赞同：0
> 
> 时间：2013-02-03T11:45:29.650
> 
> 标签：java, random

有没有办法使用与给定数据类型相关的随机函数，即如果我请求类型是`double`那么我将获得`double`值，如果请求的类型是`float`我将获得`float`值？

有这样的随机化功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:07:07.577

java 1.7：
要么自己调用`ThreadLocalRandom.current().next<DataType>()`，要么围绕这个调用编写一个包装器：

```
import java.util.concurrent.ThreadLocalRandom;

//...

public static int nextRandom(int maxValueExclusive)
{
    return ThreadLocalRandom.current().nextInt(maxValueExclusive);
}

public static long nextRandom(long maxValueExclusive)
{
    return ThreadLocalRandom.current().nextLong(maxValueExclusive);
}

public static double nextRandom(double maxValueExclusive)
{
    return ThreadLocalRandom.current().nextDouble(maxValueExclusive);
}

public static float nextRandom(float maxValueExclusive)
{
    if (maxValueExclusive <= 0)
        throw new IllegalArgumentException("argument must be positive: " + maxValueExclusive);
    return ThreadLocalRandom.current().nextFloat()*maxValueExclusive;
}

public static boolean nextRandom(boolean unusedValue)
{
    return ThreadLocalRandom.current().nextBoolean();
} 
```

* * *

爪哇 1.6：

```
import java.util.Random;

//...

private static final Random random = new Random(); // be careful with multiple threads

public static int nextRandom(int maxValueExclusive)
{
    return random.nextInt(maxValueExclusive);
}

public static long nextRandom(long maxValueExclusive)
{
    //implementation from java 1.7 ThreadLocalRandom
    if (maxValueExclusive <= 0)
        throw new IllegalArgumentException("argument must be positive: " + maxValueExclusive);
    // Divide n by two until small enough for nextInt. On each
    // iteration (at most 31 of them but usually much less),
    // randomly choose both whether to include high bit in result
    // (offset) and whether to continue with the lower vs upper
    // half (which makes a difference only if odd).
    long offset = 0;
    while (maxValueExclusive >= Integer.MAX_VALUE) {
        long half = maxValueExclusive >>> 1;
        long nextn = random.nextBoolean() ? half : maxValueExclusive - half;
        if (random.nextBoolean())
            offset += maxValueExclusive - nextn;
        maxValueExclusive = nextn;
    }
    return offset + random.nextInt((int) maxValueExclusive);
}

public static double nextRandom(double maxValueExclusive)
{
    if (maxValueExclusive <= 0)
        throw new IllegalArgumentException("argument must be positive: " + maxValueExclusive);
    return random.nextDouble()*maxValueExclusive;
}

public static float nextRandom(float maxValueExclusive)
{
    if (maxValueExclusive <= 0)
        throw new IllegalArgumentException("argument must be positive: " + maxValueExclusive);
    return random.nextFloat()*maxValueExclusive;
}

public static boolean nextRandom(boolean unusedValue)
{
    return random.nextBoolean();
} 
```

# java - JSOUP 文档结构问题 HTML

> ID：14672114
> 
> 赞同：1
> 
> 时间：2013-02-03T11:45:32.497
> 
> 标签：java, html, html-parsing, jsoup

```
 String url = request.getParameter("url");
            Document doc = Jsoup.connect(url).get();
            Elements web = doc.childern.select("*");
            for(Element ele : web)
            {
                if(ele.hasText())
                ele.text("hello");

            } 
```

当我打印文档时，它的重组就像你好你好你好

代替

```
 <html>
                        <head>
                         <title>
                         hello
                         </title>
                         <body>
                             hello
                           </body>
                          </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:03:02.923

但问题出在哪里？

如果你想`head`从你的编辑中排除 -tag 你可以使用这个：

```
Elements web = doc.body().select("*"); 
```

这只会给你现在可以改变的身体元素。

# php - 在php xpath中检索条件值

> ID：14672115
> 
> 赞同：0
> 
> 时间：2013-02-03T11:45:38.720
> 
> 标签：php, xpath, xhtml

我正在尝试使用 php xpath 评估或查询来检索某些值。但不能成功地做到这一点。这是页面的html结构：

```
<div id="productinfo">
<h2>
<span id="productname">Computer</span>
</h2>
<span id="servieidLabel" style=""> Service ID: </span>
<span id="snLabel" style="display: none"> Serial Number: </span>
<span id="servidno">12345ABCD</span> 
```

我只想显示 style="display:none" 的内容，或者如果 style 属性根本不存在。所以结果是：- 服务 ID：12345ABCD。

我努力了：

```
$ServLab = $xpath->query("//span[@id='servieidLabel']");
foreach ($ServLab as $entry) {
echo "Service Label:" ,$entry->nodeValue."<br />";
} 
```

输出 = 服务 ID：

和

```
$servid = $xpath->query("//span[@id='servidno']");
foreach ($servid as $entry) {
echo "Service Id No:" ,$entry->nodeValue."<br />";
} 
```

输出 = 空白。而输出应该是 12345ABCD。我错过了什么？

如果我尝试：

```
$prodid = $xpath->evaluate("//div[@id='productinfo']");
foreach ($prodid as $entry) {
echo $entry->nodeValue."<br />";
} 
```

输出 = 服务 ID：序列号：

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:58:50.910

您首先提出的问题可以在一个查询中解决。像这个：

```
$ServLab = $xpath->query("//div/span[string-length(@style) < 1]");
foreach ($ServLab as $entry) {
    echo $entry->nodeValue."<br />";
} 
```

这将提供

```
Service ID: 
12345ABCD 
```

# mongoose - Mongoose.js 更新文档并使用中间件

> ID：14672121
> 
> 赞同：0
> 
> 时间：2013-02-03T11:46:36.823
> 
> 标签：mongoose

更新文档和使用更新后中间件（更新后将自动调用的代码）的最佳方法是什么。

要使用数据对象更新文档，我执行以下操作：

```
DocModel.findByIdAndUpdate(id, data, function(err, doc){    
    // But after update is completed I would like 
    // some model's middleware function to be called, 
    // but there is only: init, save, remove, validate, 
    // and no update type of middleware
    //save middleware is not called in this scenario 
    //so I can call save for example
   doc.save(function(err, doc){
       ....
       // after save is completed middleware will be called
   })   
}) 
```

我想知道这是否可以简化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T13:56:37.867

如果我理解正确，你想要这样的东西。请注意，仅在使用方法时才调用中间件`save()`。

```
schema.pre('save', function(next) {
  this._wasNew = this.isNew;
  return next();
});

schema.post('save', function() {
    if (this._wasNew) {
      console.log('created')
    } else {
      console.log('updated')
    }
}); 
```

# database - Comstum magento 扩展不保存表单后值

> ID：14672126
> 
> 赞同：0
> 
> 时间：2013-02-03T11:47:09.307
> 
> 标签：database, forms, magento, module

我正在尝试创建一个自定义 magento 扩展。

它有效，只有 1 个表单字段未保存到数据库中。

```
public function saveAction()
{
    if ($postData = $this->getRequest()->getPost()) {
        $model = Mage::getSingleton('foo_bar/baz');
        $model->setData($postData);

        try {
            $model->save();

            Mage::getSingleton('adminhtml/session')->addSuccess($this->__('The baz has been saved.'));
            $this->_redirect('*/*/');

            return;
        }   
        catch (Mage_Core_Exception $e) {
            Mage::getSingleton('adminhtml/session')->addError($e->getMessage());
        }
        catch (Exception $e) {
            Mage::getSingleton('adminhtml/session')->addError($this->__('An error occurred while saving this baz.'));
        }

        Mage::getSingleton('adminhtml/session')->setBazData($postData);
        $this->_redirectReferer();
    }
} 
```

表格：

```
 protected function _prepareForm()
{  
    $model = Mage::registry('foo_bar');

    $form = new Varien_Data_Form(array(
        'id'        => 'edit_form',
        'action'    => $this->getUrl('*/*/save', array('id' => $this->getRequest()->getParam('id'))),
        'method'    => 'post'
    ));

    $fieldset = $form->addFieldset('base_fieldset', array(
        'legend'    => Mage::helper('checkout')->__('Baz Information'),
        'class'     => 'fieldset-wide',
    ));

    if ($model->getId()) {
        $fieldset->addField('id', 'hidden', array(
            'name' => 'id',
        ));
    }  

    $fieldset->addField('name', 'text', array(
        'name'      => 'name',
        'label'     => Mage::helper('checkout')->__('Name'),
        'title'     => Mage::helper('checkout')->__('Name'),
        'required'  => true,
    ));

     $fieldset->addField('stock', 'text', array(
        'name'      => 'stock',
        'label'     => Mage::helper('checkout')->__('stock'),
        'title'     => Mage::helper('checkout')->__('stock'),
        'required'  => true,

    ));

    $form->setValues($model->getData());
    $form->setUseContainer(true);
    $this->setForm($form);

    return parent::_prepareForm();
}  
} 
```

“库存字段未保存”的值。

我检查了数据库中存在列库存，并且名称相同。

有谁知道我做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T14:02:25.913

如果您在所有其他字段之后添加了库存字段，则可能只需要通过管理员系统 -> 缓存管理（刷新 Magento 缓存和刷新缓存存储按钮）清除缓存。Magento 喜欢缓存以前的查询，因此在不清除缓存的情况下添加新字段可能会导致新列未保存的问题。

# c - 关于 extern 与 C 中的函数定义的混淆

> ID：14672133
> 
> 赞同：9
> 
> 时间：2013-02-03T11:47:48.430
> 
> 标签：c

> **可能重复：**
> [`extern` 关键字对 C 函数的影响](https://stackoverflow.com/questions/856636/effects-of-the-extern-keyword-on-c-functions)

好的，所以几个小时以来，我已经阅读了很多关于 extern 关键字含义的内容。还有最后一件事让我无法找到任何信息。据我了解，`extern`关键字基本上告诉编译器变量或函数只是一个声明，并且它是在某个地方定义的，所以它不必担心，链接器会处理它。

并且在键入以下内容时编译器生成的警告（我使用的是 gcc 4.2.1）：

```
extern int var = 10; 
```

支持这一点。这`extern`应该只是一个声明，所以它是不正确的。

但是，让我感到困惑的是在输入以下内容时没有警告或任何内容：

```
extern int func() {return 5;} 
```

这是一个定义，它应该生成相同的警告，但它不会。我能在这里找到的唯一解释是定义覆盖了`extern`关键字。但是，遵循该逻辑，为什么当它是变量定义时它不覆盖它？或者关键字与变量一起使用时是否具有特殊含义？

如果有人向我解释这一点，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T12:00:28.793

关键字确实只有在与变量一起使用`extern`时才具有特殊含义。使用`extern`函数原型是完全可选的：

```
extern void foo(int bar); 
```

相当于

```
void foo(int bar); 
```

当你声明/定义一个函数时，你有两个选择：

1.  仅提供声明（即原型），或
2.  提供一个定义，在没有原型的情况下也可以作为声明。

但是，对于变量，您有三个选择：

1.  只提供一份声明，
2.  提供带有默认初始化器的定义：`int var;`不带`= 10`部件，或
3.  提供具有特定初始化程序的定义：`int var = 10`

`extern`由于函数只有两个选项，因此编译器可以在不使用关键字的情况下区分 then 。默认情况下会考虑任何没有`static`关键字的声明。`extern`因此，`extern`所有函数声明或定义都会忽略该关键字。

但是，对于变量，需要关键字来区分#1 和#2。当你使用`extern`时，它是#1；当你不使用时`extern`，它是#2。当您尝试添加`extern`到 #3 时，这是一个警告，因为它仍然是一个定义，并且`extern`被忽略。

所有这些都有些简化：您可以在同一个编译单元中多次提供声明，并且可以在全局范围或块范围内提供它们。有关完整的详细信息，请查看 C 标准的第 6.7.9 5 节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T11:58:20.810

> 但是，遵循该逻辑，为什么当它是变量定义时它不覆盖它？或者关键字与变量一起使用时是否具有特殊含义？

变量和函数的区别在于

```
void foo(); 
```

是一个函数**声明，**但是

```
int i; 
```

是一个变量**定义。**

如果您在多个文件中有变量定义，那么编译器将多次生成该变量的存储（并且很可能您会收到链接器错误）。这不是函数的情况。

# php - 雅虎电子邮件，转发到垃圾邮件文件夹

> ID：14672137
> 
> 赞同：-1
> 
> 时间：2013-02-03T11:48:38.700
> 
> 标签：php, sendmail, yahoo, email-attachments

此邮件发件人示例效果很好 [发送电子邮件多个上传表单和附件文件](http://www.shotdev.com/php/php-mail/php-send-email-multiple-upload-form-attachment-file/)

但是，问题是每封电子邮件仅发送到雅虎电子邮件，转发到垃圾邮件文件夹。

为什么？如何防止将邮件发送到垃圾邮件文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:00:54.933

来自 DKIM.ORG：

DKIM 启用了一种机制，允许潜在的电子邮件签名者发布有关其电子邮件签名实践的信息；这将允许电子邮件接收者对消息进行额外评估。DKIM 的电子邮件身份认证可以协助全球控制“垃圾邮件”和“网络钓鱼”。

它是 Yahoo! 的可能性之一！可能会将电子邮件标记为垃圾邮件，因为在发送“DKIM 为电子邮件定义域级数字签名身份验证框架”时，该邮件未使用 DKIM 签名进行签名。

还有另一个标题是 Yahoo! 可能会将它们标记为垃圾邮件。

[1] [http://www.dkim.org/specs/rfc5585.html](http://www.dkim.org/specs/rfc5585.html)

# html - HTML表格CSS？

> ID：14672138
> 
> 赞同：0
> 
> 时间：2013-02-03T11:48:50.993
> 
> 标签：html, css, html-table

常见的

```
table tr td
{
    vertical-align:middle;
} 
```

风俗

```
table.custom tr td
{
    vertical-align:top;
} 
```

当我这样使用时：

```
<table class="custom">
    <tr>
        <td>
            <table>
                <tr>
                    <td>this text align top, but I want to align middle
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table> 
```

子表的行为与其父表一样。怎么能忽略父元素样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:53:10.477

您可以做的一件事是添加子选择器，如下所示：

```
table.custom > tr > td { } 
```

然后只有直接的孩子会匹配风格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T11:53:21.343

您可以使用`>`指示器仅针对直接子元素

```
table.custom > tr > td
{
    vertical-align:top;
} 
```

但是应该注意的是，`table`在 a中使用 a`table`通常不是一个好主意。注意 2：这在 IE6 中不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T11:54:57.640

`table.custom tr td`将选择任何级别的孩子。以下 DOM 链将全部匹配

```
table.custom->tr->td
table.custom->tr->foo->td
table.custom->foo->tr->bar->td 
```

看看 CSS 子选择器`>`

*   [http://www.w3schools.com/cssref/sel_element_gt.asp](http://www.w3schools.com/cssref/sel_element_gt.asp)
*   [http://css-tricks.com/child-and-sibling-selectors/](http://css-tricks.com/child-and-sibling-selectors/)

# magento - 如何在 magento 数据流 xml 配置文件中指定复合动作变量

> ID：14672140
> 
> 赞同：2
> 
> 时间：2013-02-03T11:48:55.653
> 
> 标签：magento

我创建了一些自定义操作以在 Magento Dataflow 配置文件中使用。我想将复合参数值（数组或字典）传递给操作，类似于`map`您可以传递给默认解析器操作的 var。即，我想做这样的事情：

```
<var name="attribute_map">
    <map name="sColore"><![CDATA[colore]]></map>
    <map name="sMarca"><![CDATA[marca]]></map>
    <map name="sFornitore"><![CDATA[fornitore]]></map>
</var> 
```

在这种情况下，变量结果为 null，尽管在摆弄 xml 并浏览代码时，似乎这种模式只适用于`<var name="map">`. 令人费解和失望。我也无法在任何文档中找到有关相关 xml 架构的最轻微提示......

对此有任何想法吗？谢谢！

（我正在使用社区版 1.7.0.2 版）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T17:05:28.633

你不能，使用核心实现。

`var`元素只能包含简单的文本，除非元素具有 属性，`name="map"`在这种情况下，配置文件解析器将搜索子`map`元素并使用它们来填充 php 关联数组。

相关代码在类的`importProfileXml`方法里面`Mage_Dataflow_Model_Convert_Profile_Collection`：

```
if ($varNode['name'] == 'map') {
   $mapData = array();
   foreach ($varNode->map as $mapNode) {
      $mapData[(string)$mapNode['name']] = (string)$mapNode;
   }
   $container->setVar((string)$varNode['name'], $mapData);
} 
```

要扩展此行为，您应该通过通常的 magento 类覆盖方法使用自定义（子）类覆盖此类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:29:42.033

如果我理解你的要求，你可以从管理员覆盖 system/convert/profile/wizard.phtml 并添加另一个类似于现有地图的部分，但表单元素应该有 name="gui_data[attribute_map]...[]" .

然后您应该覆盖 Mage_Dataflow_Model_Profile 中的 _parseGuiData 方法以形成正确的配置文件操作 xml。希望有帮助。

# java - Java 覆盖如何工作

> ID：14672144
> 
> 赞同：3
> 
> 时间：2013-02-03T11:49:21.867
> 
> 标签：java, oop, overriding

我有一个愚蠢的困惑，当我们重写父类方法时，这个派生的重写方法是否仍然保存父类方法的代码，或者它是我们可以定义的新方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T11:51:39.700

阅读这篇文章以获得清晰的概念。[http://docs.oracle.com/javase/tutorial/java/IandI/override.html](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)

一般我们在想扩展超类的方法或者想改变完整的逻辑时这样做。

**例如：**超类有使用冒泡排序的排序方法。

在派生类中，您希望采用相同的方法，但希望实现快速排序。然后我们做覆盖。

**第二**

如果你想先执行超类方法，然后你的子类重写方法逻辑，那么我们使用`super.methodname()`.

最后一点，如果您覆盖该方法而不是像这样调用超类方法，`super.method()`那么它并不意味着它的新方法。这意味着我已经解释了排序示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T11:50:49.560

发生的事情*正是*注释中写的。

您覆盖该方法，而不是运行该方法的父代码，而是运行当前类的代码

# extjs4 - Extjs 在网格中监听 keydown 事件

> ID：14672145
> 
> 赞同：1
> 
> 时间：2013-02-03T11:49:34.687
> 
> 标签：extjs4

在 Extjs 4.1 中，我有一个带有侦听器对象的可编辑网格，其中 keydown 事件被捕获用于某种目的。我的问题是当单元格处于编辑模式时，我的 keydown 侦听器函数没有被触发。我不知道引擎盖下发生了什么，任何线索或解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:28:50.320

如果为网格单元打开了内联编辑器，则所有事件都被捕获在该字段中，并且不会传播到网格的任何元素中。在这种情况下，您必须在编辑器的输入字段中处理 keydown 事件。

# vb.net - des 文件加密损坏文件

> ID：14672146
> 
> 赞同：2
> 
> 时间：2013-02-03T11:49:34.503
> 
> 标签：vb.net, encryption, des

我在 vb.net 中编写了一个类来加密/解密文件，但是当我解密图像或 zip 或办公文件等文件时，它们看起来已损坏。但是，如果我在记事本中打开解密文件和原始文件，它们是完全相同的。我能做些什么来阻止这种情况？

```
Imports System
Imports System.IO
Imports System.Security
Imports System.Security.Cryptography
Imports System.Text

Public Class Encrytion
Shared Sub EncryptFile(ByVal sInputFilename As String, ByVal sOutputFilename As String, ByVal sKey As String)

    Dim fsInput As New FileStream(sInputFilename, _
                                FileMode.Open, FileAccess.Read)
    Dim fsEncrypted As New FileStream(sOutputFilename, _
                                FileMode.Create, FileAccess.Write)

    Dim DES As New DESCryptoServiceProvider()

    DES.Key = ASCIIEncoding.ASCII.GetBytes(sKey)

    DES.IV = ASCIIEncoding.ASCII.GetBytes(sKey)

    Dim desencrypt As ICryptoTransform = DES.CreateEncryptor()

    Dim cryptostream As New CryptoStream(fsEncrypted, _
                                        desencrypt, _
                                        CryptoStreamMode.Write)

    Dim bytearrayinput(fsInput.Length - 1) As Byte
    fsInput.Read(bytearrayinput, 0, bytearrayinput.Length)

    cryptostream.Write(bytearrayinput, 0, bytearrayinput.Length)
    cryptostream.Close()
End Sub

Shared Sub DecryptFile(ByVal sInputFilename As String, ByVal sOutputFilename As String, ByVal sKey As String)

    Dim DES As New DESCryptoServiceProvider()

    DES.Key() = ASCIIEncoding.ASCII.GetBytes(sKey)

    DES.IV = ASCIIEncoding.ASCII.GetBytes(sKey)

    Dim fsread As New FileStream(sInputFilename, FileMode.Open, FileAccess.Read)

    Dim desdecrypt As ICryptoTransform = DES.CreateDecryptor()

    Dim cryptostreamDecr As New CryptoStream(fsread, desdecrypt, CryptoStreamMode.Read)

    Dim fsDecrypted As New StreamWriter(sOutputFilename)
    fsDecrypted.Write(New StreamReader(cryptostreamDecr).ReadToEnd)
    fsDecrypted.Flush()
    fsDecrypted.Close()
End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T22:36:16.777

我找到[了这个答案](https://stackoverflow.com/a/11057010/493055)来解决这个问题。`CreateEncryptor`简而言之，在/`CreateDecryptor`调用之外，Encrypt 和 Decrypt 函数应该完全相同：

```
Shared Sub EncryptFile(ByVal sInputFilename As String, ByVal sOutputFilename As String, ByVal sKey As String)

    Dim fsInput As New FileStream(sInputFilename, _
                                FileMode.Open, FileAccess.Read)
    Dim fsEncrypted As New FileStream(sOutputFilename, _
                                FileMode.Create, FileAccess.Write)

    Dim DES As New DESCryptoServiceProvider()

    DES.Key = ASCIIEncoding.ASCII.GetBytes(sKey)

    DES.IV = ASCIIEncoding.ASCII.GetBytes(sKey)

    Dim desencrypt As ICryptoTransform = DES.CreateEncryptor(DES.Key, DES.IV)

    Dim cryptostream As New CryptoStream(fsEncrypted, _
                                        desencrypt, _
                                        CryptoStreamMode.Write)

    Dim bytearrayinput(fsInput.Length - 1) As Byte
    fsInput.Read(bytearrayinput, 0, bytearrayinput.Length)

    cryptostream.Write(bytearrayinput, 0, bytearrayinput.Length)
    cryptostream.Flush()

    cryptostream.Close()
End Sub

Shared Sub DecryptFile(ByVal sInputFilename As String, ByVal sOutputFilename As String, ByVal sKey As String)
    Dim fsInput As New FileStream(sInputFilename, _
                        FileMode.Open, FileAccess.Read)
    Dim fsEncrypted As New FileStream(sOutputFilename, _
                                FileMode.Create, FileAccess.Write)

    Dim DES As New DESCryptoServiceProvider()

    DES.Key = ASCIIEncoding.ASCII.GetBytes(sKey)

    DES.IV = ASCIIEncoding.ASCII.GetBytes(sKey)

    Dim desencrypt As ICryptoTransform = DES.CreateDecryptor(DES.Key, DES.IV)

    Dim cryptostream As New CryptoStream(fsEncrypted, _
                                        desencrypt, _
                                        CryptoStreamMode.Write)

    Dim bytearrayinput(fsInput.Length - 1) As Byte
    fsInput.Read(bytearrayinput, 0, bytearrayinput.Length)

    cryptostream.Write(bytearrayinput, 0, bytearrayinput.Length)
    cryptostream.Flush()

    cryptostream.Close()
End Sub 
```

# android - 向 facebook 用户发送私人消息 throw android 应用程序

> ID：14672148
> 
> 赞同：1
> 
> 时间：2013-02-03T11:49:36.667
> 
> 标签：android, facebook-graph-api, xmpp

我看到我无法通过 Facebook API 发送 castum 私人消息： [#How to send message facebook friend through graph api using Accessstoken](http://facebook.stackoverflow.com/questions/2943297/how-send-message-facebook-friend-through-graph-api-using-accessstoken)

然后我看到了这个解决方案： [#Message via chat API](http://dalibornasevic.com/posts/35-how-to-send-private-messages-with-facebook-api)

这允许您通过聊天 API 发送消息。但此解决方案仅适用于 ruby​​ on rails。

有人可以告诉我如何在 Java/Android 代码中做到这一点吗？或者知道如何通过 Android 的 Jabber/XMPP 服务发送消息。

# javascript - javascript：制作一个 iframe 来获取鼠标的 x&y

> ID：14672151
> 
> 赞同：1
> 
> 时间：2013-02-03T11:50:25.817
> 
> 标签：javascript, animation, iframe

我有一个 iframe

```
<iframe id="EXAMPLE"></iframe> 
```

已编辑：如何使 iframe 使用 javascript 实时获取鼠标坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:21:58.787

在 HTML 中你有这个：

```
<iframe src="http://example.com" id="test"></iframe> 
```

设置一些 CSS 样式：

```
body {
    width: 500px;
    height: 500px;
    background-color: black;
}

#test {
    left: 10px;
    top: 10px;
    position: absolute;
} 
```

现在，您必须在文档上获取鼠标位置。您可以使用 jQuery`mousemove`处理程序：

```
$("body").on("mousemove", function(e) {
    console.log("X: " + e.clientX + "px Y: " + e.clientY + "px");
}); 
```

然后，`iframe`在文档上设置位置：

```
function update(e) {
    $("#test").css("left", e.clientX + 10 + "px");
    $("#test").css("top", e.clientY + 10 + "px");
} 
```

现在，只需简单地`update`在`mousemove`.

[在此处](http://goo.gl/a8jBN)查看实时预览。

如果您也想检测`mousemove`on `iframe`，请添加`pointer-events:none`到`iframe`样式中。[在这里](http://goo.gl/f96qn)测试。

![在此处输入图像描述](../Images/4a707f54402e66ad3f99c21c87a05644.png)

# mysql - codeigniter $qry->result() 不工作

> ID：14672152
> 
> 赞同：1
> 
> 时间：2013-02-03T11:50:33.803
> 
> 标签：mysql, codeigniter

以下 codeigniter 查询每次都是空的。$metas->result() 没有获取数据。如果我 var_dump 原始查询并在控制台中运行一切正常。

```
$metas=$this->db->query("SELECT id,meta_description, meta_title, meta_keywords, template, google_tracking, user_option
                         FROM domains
                         WHERE NAME ='$this->domain_name'");

return $metas->result(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:08:57.957

由于命名约定，不仅要小写，还要使用绑定来防止 sql 注入：

```
$sql = "SELECT id,meta_description, meta_title, meta_keywords, template, google_tracking, user_option FROM domains WHERE name= ?";

$this->db->query($sql, array($this->domain_name)); 
```

CodeIgniter 仅在您将变量作为绑定传递时才对变量进行 excapes

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:56:35.563

试试这个

```
 WHERE name ='$this->domain_name'"); 
```

大写它dfies整个sql

# javascript - Document.getElementById.value 返回未定义

> ID：14672153
> 
> 赞同：0
> 
> 时间：2013-02-03T11:50:39.190
> 
> 标签：javascript, html

以下是我的 HTML 代码

```
<div id="dl_address" class="dl-row">
 <div class="dl-col1">
    <span id="dl_addressMarker" class="dl-Marker">*</span>Address:
 </div>
 <div class="dl-col2">
  <input  id="dl_addressMarker" name="p.streetAddress" maxlength="100" size="15"  
                            class="landing-qualpanel-input-standin" type="text" onClick="formOpt(id)" value="Home Address">
 </div>
</div> 
```

以下是我的javascript代码

```
<script language="javascript" type="text/javascript">
function formOpt(x){

    var y=document.getElementById(x).value;
    alert(y);
    }
</script> 
```

我不明白为什么我会变得未定义。请帮助。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T11:53:25.627

那是因为您有两个具有相同 ID 的元素，这在 HTML 中是不允许的，这使得您的函数无法以这种方式获取输入。

更改您输入的ID，您会没事的。

您可以通过传递元素而不是 id 来简化代码：

**HTML：**

```
<input  id="dl_addressMarker2" name="p.streetAddress"
      maxlength="100" size="15"  
      class="landing-qualpanel-input-standin" type="text"
      onClick="formOpt(this)" value="Home Address"> 
```

**JavaScript：**

```
function formOpt(x){
   var y = x.value;
   alert(y);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T11:55:24.207

你有2个问题。**(1)**你应该像这样调用你的方法： `formOpt(this)`它将传入当前元素。**(2)**你有重复的 DOM id。

写法是这样的：

```
<script language="javascript" type="text/javascript">
function formOpt(x){
    //x is now the input element. You can fetch its id property.
    var y=document.getElementById(x.id).value;
    // you can do other things with x also.
    alert(y);
    }
</script>
<div id="dl_address" class="dl-row">
 <div class="dl-col1">
    <span id="dl_addressMarker" class="dl-Marker">*</span>Address:
 </div>
 <div class="dl-col2">
 <!-- I renamed the id on the input -->
  <input  id="dl_addressMarker_input" name="p.streetAddress" maxlength="100" 
  size="15"  class="landing-qualpanel-input-standin" 
 <!-- pass this into the function -->
  type="text" onClick="formOpt(this);" value="Home Address">
 </div>
</div> 
```

请参阅工作示例：http: [//jsfiddle.net/KXCeh/1/](http://jsfiddle.net/KXCeh/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T11:53:38.077

您需要传递 id 的值，并且您还需要为每个元素保持唯一的 id

```
 <div class="dl-col2">
  <input  id="dl_addressMarker" name="p.streetAddress" maxlength="100" size="15"  
                            class="landing-qualpanel-input-standin" type="text" onClick="formOpt('dl_addressMarker')" value="Home Address">
 </div> 
```

# c# - 带有两个 ItemTemplate 的 LongListSelector

> ID：14672154
> 
> 赞同：0
> 
> 时间：2013-02-03T11:50:43.757
> 
> 标签：c#, .net, silverlight, windows-phone-7, windows-phone-8

我使用此代码将 ListBox 添加到我的应用程序中：

```
<phone:LongListSelector x:Name="searchList" Margin="0,72,0,0" SelectionChanged="DidPressSelectSearchList">
            <phone:LongListSelector.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                        <TextBlock Text="{Binding}" FontSize="25" />
                    </StackPanel>
                </DataTemplate>
            </phone:LongListSelector.ItemTemplate>
        </phone:LongListSelector> 
```

现在我的问题是我想使用两种`ItemTemplate`，因为我有两种方式向用户显示数据：

1) 字符串数组

2）对象数组（2个字符串）

任何帮助我如何使用列表来显示两种对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:12:52.287

在 WP7 中执行此操作的最简单方法是使用模板选择器。 [像这个](http://www.codeproject.com/Articles/92439/Silverlight-DataTemplateSelector)

虽然我现在无法测试，但 WP8 应该支持 DataTemplate 类的 DataType 属性，这意味着您可以为每种数据类型定义隐式数据模板并完全跳过选择器。

# java - 从另一个 GUI 打开一个 GUI - Java Swing

> ID：14672163
> 
> 赞同：1
> 
> 时间：2013-02-03T11:51:45.177
> 
> 标签：java, swing, user-interface, netbeans

我正在使用 Netbeans 7.3 Beta 2 GUI 构建器。编写一个 Swing GUI 并且我试图在按下按钮后显示另一个 GUI。

```
private void loginButtonSceneActionPerformed(java.awt.event.ActionEvent evt) {
    new LoginGUI();
} 
```

按下登录按钮后，我想显示 LoginGUI，但它什么也不做，Netbeans 声明“忽略新实例”。我在按钮上添加了一个 system.out.println 以确保它可以正常工作并且确实可以。

这里或多或少是完整的来源。我哪里错了？我想用登录 GUI 替换这个 GUI。

```
package com.john.spp.view;
import java.sql.ResultSet;
import java.sql.Statement;

/**
 *
 * @author John
 */
public class LogRegGUI extends javax.swing.JFrame {

/**
 * Creates new form LoginGUI
 */
public LogRegGUI() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {
   //GUI BUILDER CODE HERE
}// </editor-fold>

private void loginButtonSceneActionPerformed(java.awt.event.ActionEvent evt) {
    new LoginGUI();
}

private void registerSceneButtonActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
}

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(LogRegGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(LogRegGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(LogRegGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(LogRegGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new LogRegGUI().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JButton dataVaultButton;
private javax.swing.JButton helpButton;
private javax.swing.JEditorPane jEditorPane1;
private javax.swing.JLabel jLabel3;
private javax.swing.JPanel jPanel1;
private javax.swing.JPanel jPanel2;
private javax.swing.JScrollPane jScrollPane1;
private javax.swing.JButton loginButton;
private javax.swing.JButton logoutButton;
private javax.swing.JButton registerButton;
private javax.swing.JButton settingsButton;
// End of variables declaration
} 
```

谢谢。

编辑：

通过使用此代码修复它，但它看起来很糟糕，因为它快速闪烁并重新绘制新的 GUI，关于如何阻止它的任何想法？

```
private void loginButtonSceneActionPerformed(java.awt.event.ActionEvent evt) { 
    LoginGUI itemloader=new LoginGUI();
    itemloader.setVisible(true);
    this.setVisible(false);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:16:48.870

使用多帧不是应用程序的最佳解决方案有几个原因。好吧，它经常让用户感到困惑，并且如您所见，它带来了一些复杂性。
正如我在评论中已经建议的那样，您可以通过在展示之前构建所有s 来指导您[昨天的其他答案。](https://stackoverflow.com/questions/14663539/how-to-set-the-previous-jframe-visible-when-current-jframe-is-disposed/14663563#14663563)`JFrame`如果您随后将它们设置为可见，则不会像现在这样延迟太多，并且您还可以节省一些内存和 CPU 时间。
另一种方法可能是只使用一个框架并更改其内容。这个[答案](https://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-bad-practice)确实已经成为我最喜欢的参考；）
这样也有可能先构建然后立即显示您已经构建的内容。没有延迟，没有闪烁。

# c# - 将 XAML 网格绑定到数组

> ID：14672164
> 
> 赞同：4
> 
> 时间：2013-02-03T11:51:54.380
> 
> 标签：c#, .net, wpf, xaml, data-binding

我有一个设置工作，我可以将矩形的 grid.row 属性绑定到后面源中的类中的整数，但我真的希望能够使用整数数组而不是整数。当 gridColumn 是一个简单的整数时我工作的代码，但当它被放入这样的数组时不是：

C#代码：

```
namespace WPFTestingApplication
{
    public static class GridProperties
    {
        public static int[] gridColumn = { 1, 0 };
    }

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }
} 
```

XAML：

```
<Window x:Class="WPFTestingApplication.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WPFTestingApplication"
    Title="MainWindow" Height="200" Width="400">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Rectangle Name="Rect" Grid.Column="{Binding Source={x:Static
        local:GridProperties.gridColumn[0]}}" Fill="DarkGray" Margin="5" />
</Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:36:09.407

```
Grid.Column="{Binding [0], Source={x:Static Member=local:GridProperties.gridColumn}}" 
```

我希望这将有所帮助。

# php - 覆盖模块的 Yii 登录 URL

> ID：14672165
> 
> 赞同：3
> 
> 时间：2013-02-03T11:52:15.010
> 
> 标签：php, yii, yii-modules

如何覆盖模块的 Yii 登录 URL 模块？

这是基本应用程序的主要配置：

```
return array(
            .........

    // application components
    'components'=>array(
        'user'=>array(              
            // enable cookie-based authentication
            'allowAutoLogin'=>true,
            'loginUrl' => '/site/login',
        ),
           ..........
      ); 
```

然后我有代理模块，我希望在这个模块中登录 URL 不同，登录方法也不同。

```
class AgentModule extends CWebModule {

    public function init() {
        // this method is called when the module is being created
        // you may place code here to customize the module or the application
        // import the module-level models and components
        $this->setImport(array(
            'agent.models.*',
            'agent.components.*',
        ));

        $this->defaultController = 'default';
        $this->layoutPath = Yii::getPathOfAlias('agent.views.layout');
        $this->components = array(
            'user' => array(
                'class' => 'AgentUserIdentity',
                'loginUrl' => '/agent/default/login',
            )
        );
    }
            ....... 
```

但我不知道为什么这不起作用。请帮助...（TT）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T10:45:51.433

使用此代码

```

类 AgentModule 扩展 CWebModule {
    公共 $assetsUrl;
    公共 $defaultController = '登录';

    公共函数初始化（）{

        // 创建模块时调用此方法
        $this->setComponents(数组(
                'errorHandler' => 数组（
                        'errorAction' => 'admin/login/error'),
                '用户' => 数组（
                        '类' => 'CWebUser',
                        'loginUrl' => Yii::app()->createUrl('admin/login'),
                )
                )
        );

        Yii::app()->user->setStateKeyPrefix('_admin');

        // 导入模块级模型和组件
        $this->setImport(数组(
                'admin.models.*',
                'admin.components.*',
                )
        );
    }

    公共函数 beforeControllerAction($controller, $action) {

        if(父::beforeControllerAction($controller, $action)) {
            // 在任何模块控制器之前调用此方法
            //执行动作
            $route = $controller->id 。'/' 。$action->id;

            $publicPages = 数组（
                    '登录/登录',
                    '登录错误'，
            );

            if (Yii::app()->user->name !== 'admin' && !in_array($route,
                              $publicPages)) {
                Yii::app()->getModule('admin')->user->loginRequired();
            } 别的 {
                返回真；
            }
        }
        别的
            返回假；
    }
}

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T18:02:15.180

In 2nd code block in your question you defined `user` component for module `AgentModule`.

If i understand right, somewhere in your view or controller you use `Yii::app()->user->loginUrl`, right? To get url defined in `AgentModule` you should use `Yii::app()->user->controller->module->user` but **only** while in `AgentModule` context.

Easiest way to make it different is to define somewhere login urls for module, and for app, and just use this predefined urls.

Try reading about module compoents here: [http://www.yiiframework.com/wiki/27/how-to-access-a-component-of-a-module-from-within-the-module-itself/](http://www.yiiframework.com/wiki/27/how-to-access-a-component-of-a-module-from-within-the-module-itself/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-26T04:39:10.447

```
类 WebUser 扩展 CWebUser {

    公共 $module = 数组（）；

    公共函数初始化（）{
        父::init();
        if(isset($this->module['loginUrl'])){
            if(!isset($this->module['moduleId'])){
                throw new Exception('moduleId 必须定义');
            }别的{
                $moduleId = Yii::app()->controller->module->id;
                if($moduleId == $this->module['moduleId']){
                    #$this->loginUrl = Yii::app()->request->redirect(Yii::app()->createUrl($this->module['loginUrl']));
                    $this->loginUrl = array($this->module['loginUrl']);
                }
            }
        }

    }

}

```

```
之后，您需要在配置文件下进行一些更改，即
返回数组（
    '组件' => 数组（
        '用户' => 数组（
            'allowAutoLogin' => 真，
            '类' => '网络用户',
            '模块' => 数组（
                'loginUrl' => '/r_admin',
                'moduleId' => 'r_admin'
            )
        ),
    )
);

```

# c# - c#中的BackgroundWorker和服务器

> ID：14672168
> 
> 赞同：1
> 
> 时间：2013-02-03T11:52:49.463
> 
> 标签：c#, client-server, backgroundworker

单击按钮时，我正在尝试在 C# 中的服务器和客户端之间复制文件。我希望使用后台工作人员，因为我不希望副本在复制时使我的表单卡住。我有这个代码：

```
 private void connectBtn_Click(object sender, EventArgs e)
    {
         if (!isConnected)
         {
             clientSock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
             connectBtn.Text = "Disconnect From Server";
             connectBtn.Refresh();
             clientSock.Connect(remoteIpAddress, remotePort);
             statusColor.BackColor = Color.Green;
             statusColor.Refresh();
             isConnected = true;
             buttonAddDirectory.Enabled = true;
             buttonAddFile.Enabled = true;
             var bg = new BackgroundWorker();
             bg.DoWork += (sender, e) => copyDllsToServer();

             bg.RunWorkerAsync();
             if (backgroundWorker.IsBusy != true)
                 backgroundWorker.RunWorkerAsync();
         }
     } 
```

复制函数是：copyDllsToServer()。

这样做时，我收到以下错误：`A local variable named 'sender' cannot be declared in this scope because it would give a different meaning to 'sender', which is already used in a 'parent or current' scope to denote something else`. 我该如何解决？

`BackgroundWorker`当多个客户端运行它时，它会正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:57:15.977

利用

```
bg.DoWork += (sender1, e) => copyDllsToServer(sender1, e);
                    ^_____________ 
```

代替

```
bg.DoWork += (sender, e) => copyDllsToServer(); 
```

或使用方法组作为

```
bg.DoWork += copyDllsToServer; 
```

为什么不使用`Socket`类的异步方法？

该类`Socket`实现[异步编程模型（APM）模式](http://msdn.microsoft.com/en-us/library/jj152938.aspx)。检查以 .开头的[套接字方法](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket_methods%28v=vs.80%29.aspx)`Begin/End`。

# javascript - 在提交表单之前等待异步 .ajaxComplete()

> ID：14672169
> 
> 赞同：0
> 
> 时间：2013-02-03T11:52:58.643
> 
> 标签：javascript, jquery, ajax, asynchronous, submit

我需要覆盖表单的提交方法以等待 ajax 请求完成。同时，ajax 请求应该是异步的以显示进度指示器，并且默认的表单处理程序必须在收到响应后继续。

我不能使用 event.preventDefault() 然后手动调用 form.submit() ，因为表单发送结果应该在浏览器的新选项卡中打开。如果 form.submit() 将从代码中调用，那么某些浏览器（即 chrome）将阻止新的选项卡/窗口。

为清楚起见，伪代码：

```
$('#form').submit(function(e) {
  var result;
  startIndicator();
  asyncAjaxCheckResults();  // ajax complete handler changed 'result' var
  stopIndicator(); // stopping indicator after async ajax will be completed

  // continue with default submit behavior if we received desired result
  // else prevent executing 
  if (result !== 'desired result') {
    e.preventDefault();
  }
}); 
```

在这种情况下可以做些什么吗？也许 $.deferred 可以帮助或无限循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:17:07.523

我认为您需要同步 ajax 调用，因此脚本将等待响应然后继续运行。

$.ajax({

...

异步：假，

...

});

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:47:55.083

另一种方法是将点击事件添加到提交按钮，而不是将事件提交到表单，发送 ajax 并使用 event.prevenrDefault，在 ajax 成功回调时触发表单提交 - $('#form').submit()。

# php - ob_end_clean 也修改变量

> ID：14672170
> 
> 赞同：0
> 
> 时间：2013-02-03T11:52:59.653
> 
> 标签：php, ob-start, ob-get-contents

这是一个示例代码：

```
ob_start();
include("test.ini");
$string = ob_get_contents();
echo "<br/>";
echo "string: ".$string; 
```

和输出：

```
testing = ini
string: testing = ini 
```

当我添加

```
ob_end_clean(); 
```

在上面代码的末尾，屏幕上没有输出。

我至少期望字符串在屏幕上回显？为什么没有看到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:58:49.947

**ob_start();** 开始输出缓冲到内部缓冲区而不是（屏幕），然后当你添加 ob_get_contents(); 它从内部缓冲区复制输出仍然没有打印，并且当 ob_end_clean(); 解释，它将清除所有内部缓冲存储器，没有输出到屏幕。

从 ob_start() 开始；到 ob_end_clean(); 什么都不会打印，我在包含文件时使用此方法以防止在发送标题之前打印一些空白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T11:58:57.987

[查看ob_get_clean()](http://php.net/manual/en/function.ob-get-clean.php)、[ob_end_flush()](http://www.php.net/manual/en/function.ob-end-flush.php)和[ob_end_clean()](http://www.php.net/manual/en/function.ob-end-clean.php)之间的区别。

`ob_get_clean`获取当前缓冲区内容并丢弃当前输出缓冲区。

`ob_end_flush`丢弃内容，但首先输出缓冲区。

`ob_end_clean`丢弃最顶层输出缓冲区的内容。它不会返回任何东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T11:59:15.920

我认为您正在寻找 ob_get_clean() 函数。

# r - 保护对闪闪发光的应用程序的访问

> ID：14672171
> 
> 赞同：4
> 
> 时间：2013-02-03T11:52:59.690
> 
> 标签：r, security, rstudio, shiny

这是我之前的问题的后续问题：[Is is possible to see the code for shiny glimmer apps](https://stackoverflow.com/questions/14671609/is-is-possible-to-see-the-code-for-shiny-glimmer-apps)

[我想知道按照 R-Studio的](http://rstudio.github.com/shiny/tutorial/#dynamic-ui)建议构建 DynamicUI 是否过于简单，它基本上充当用户名和密码来保护对微光应用程序的访问？

我正在考虑使用类似下面的简单方法（显然添加了所有输入和输出等：

```
if(username=="x" & password=="y") { run the shinny app } else { print("access denied")} 
```

但想知道这是否过于简单化并且很容易被破坏。

或者也许以某种方式只允许用户名和密码组合的三次尝试......不知何故......不太确定闪亮将如何识别同一个用户已经回来了......

对此的想法将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T14:25:00.383

是的，原则上。代码的服务器部分由来自 Web 表单的用户输入控制，因此如果其中一个表单组件是密码，那么服务器代码可能会向用户发出尖叫。

问题是每次都需要发送密码，所以要么用户每次都必须输入密码，要么表单必须记住它。由于您无法控制服务器，因此您不能使用与会话绑定的 cookie，这是管理安全会话的常用方式，但您可以将密码作为隐藏项以任何形式呈现给用户，一旦他们“我第一次正确填写。

但与大多数互联网安全问题一样，如果你不得不问，你不应该这样做。

# python - 如果发生异常，读取文件的文件内容并设置为空字符串的最佳方法

> ID：14672178
> 
> 赞同：2
> 
> 时间：2013-02-03T11:53:29.183
> 
> 标签：python, python-2.7

```
try:
    content = open("/tmp/out").read()
except:
    content = "" 
```

我可以比这更短或更优雅吗？我必须为多个文件做这件事，所以我想要更短的东西。

编写函数是唯一更短的方法吗？

我真正想要的是这个，但`""`如果有任何异常我想连接

```
lines = (open("/var/log/log.1").read() + open("/var/log/log").read()).split("\n") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T11:58:04.267

是的，你必须写一些类似的东西

```
def get_contents(filename):
    try:
        with open(filename) as f:
            return f.read()
    except EnvironmentError:
        return ''

lines = (get_contents('/var/log/log.1')
         + get_contents('/var/log/log')).split('\n') 
```

**NlightNFotis**提出了一个有效的观点，如果文件很大，你不想这样做。也许您会编写一个接受文件名列表的行生成器：

```
def get_lines(filenames):
    for fname in filenames:
        try:
           with open(fname) as f:
               for line in f:
                   yield line
        except EnvironmentError:
            continue

...

for line in get_lines(["/var/log/log.1", "/var/log/log"]):
    do_stuff(line) 
```

另一种方法是使用标准`fileinput.FileInput`类（感谢 JF Sebastian）：

```
import fileinput

def eat_errors(f, mode):
    try:
        return open(f, mode)
    except IOError:
        return open(os.devnull)

for line in fileinput.FileInput(["/var/log/log.1", "/var/log/log"], openhook=eat_errors):
    do_stuff(line) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:14:43.750

您可以尝试以下方法，但这可能不是最好的：

```
import os

def chk_file(filename):
    if os.stat(filename).st_size == 0:
        return ""
    else:
        with open(filename) as f:
            return f.readlines()

if __name__=="__main__":
    print chk_file("foobar.txt") #populated file
    print chk_file("bar.txt") #empty file
    print chk_file("spock.txt") #populated 
```

有用。如果你愿意，你可以用你的 try-except 来包装它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T22:54:12.593

此代码将为`open`另一个*打开*创建一个 FakeFile 的猴子修补程序，如果抛出一个“IOException ”，该文件总是返回一个*“空”*字符串。`open`

虽然它的代码比您真正想要为手头的问题编写的代码多，但这确实意味着您有一个可重用的上下文管理器，以便`open`在需要再次出现时进行伪造*（可能在未来十年内两次）*

```
with monkey_patched_open():
     ... 
```

实际代码。

```
#!/usr/bin/env python
from contextlib import contextmanager
from StringIO import StringIO
################################################################################
class FakeFile(StringIO):
    def __init__(self):
        StringIO.__init__(self)
        self.count = 0

    def read(self, n=-1):
        return "<empty#1>"

    def readlines(self, sizehint = 0):
        return ["<empty#2>"]

    def next(self):
        if self.count == 0:
            self.count += 1
            return "<empty#3>"
        else:
            raise StopIteration
################################################################################
@contextmanager
def monkey_patched_open():
    global open
    old_open = open

    def new_fake_open(filename, mode="r"):
        try:
            fh = old_open(filename, mode)
        except IOError:
            fh = FakeFile()
        return fh

    open = new_fake_open

    try:
        yield
    finally:
        open = old_open

################################################################################
with monkey_patched_open():
    for line in open("NOSUCHFILE"):
        print "NOSUCHFILE->", line
    print "Other", open("MISSING").read()
    print "OK", open(__file__).read()[:30] 
```

运行上述给出：

```
NOSUCHFILE-> <empty#3>
Other <empty#1>
OK #!/usr/bin/env python
from co 
```

我留下“空”字符串只是为了显示发生了什么。

`StringIO`只需阅读一次就足够了，但我认为 OP 正在寻求继续从文件中读取，因此需要 FakeFile - 除非有人知道更好的机制。

我知道有些人认为猴子修补是无赖的行为。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-03T12:03:08.820

您可以定义一个函数来捕获错误：

```
from itertools import chain

def readlines(filename):
    try:
        with open(filename) as file:
            return file.readlines() # or just `file` to return an iterator 
    except EnvironmentError:
        return []

files = (readlines(name) for name in ["/var/log/1", "/var/log/2"])
lines = list(chain.from_iterable(files)) 
```

# ruby-on-rails - 使用 Devise 创建用户（无需注册）

> ID：14672181
> 
> 赞同：0
> 
> 时间：2013-02-03T11:53:47.223
> 
> 标签：ruby-on-rails, devise, mongoid

我希望能够创建用户并将它们保存到数据库中，但 Devise 不会将请求传递给数据库，也不会返回任何错误。

```
alice = User.new
alice.name = "Alice"
alice.save! 
```

爱丽丝成功保存，只是不在数据库中。

我可以做到`User.find(alice.id)`，只要我在同一个会话中，它就会返回数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:24:20.700

如果有人有这个问题，我发现 Devise 即使在设置时也会强制执行电子邮件

```
email_required?
    false
end 
```

所以即使击中`save!`也不会引发错误。

因此，我发现的唯一方法是使用类似这样的东西创建假电子邮件

```
"guest_#{Time.now.to_i}#{rand(99)}@anyemail.com" 
```

然后分配 a `self.role = guest`，以便轻松识别帐户。

我希望这有帮助

# java - 按钮和文本字段不显示在 Java 中

> ID：14672182
> 
> 赞同：7
> 
> 时间：2013-02-03T11:54:00.757
> 
> 标签：java, swing, netbeans, jpanel

对于学校，我必须在一个按钮和两个文本字段中制作一个 JFrame。无论您在 Textfield 1 中放置什么，都必须在按下按钮时进入 textfield 2。我得到了代码，当我运行程序时我应该看到文本字段和按钮。无论出于何种原因，它都没有。

我到目前为止：

```
package helloworld;

import javax.swing.*;
import java.awt.event.*; 

    public class HelloWorld extends JFrame {

        public static void main(String[] args) {

             JFrame frame = new HelloWorld();
             frame.setSize(400, 400);
             frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
             frame.setTitle("Hello World Button App");

             JPanel panel = new JPanel();
             frame.setContentPane(panel);
             fram.setVisible(true);
         }
       }

       class panel extends JPanel {

          public JButton btn1 = new JButton("Klick!");
          public JTextField txt1 = new JTextField(10);
          public JTextField txt2 = new JTextField(10);

          public panel() {
               add(btn1);
               add(txt1);
               add(txt2);
            }
          } 
```

我还不允许发布图片，但我会在[此处提供图片的链接](http://i1306.photobucket.com/albums/s561/Senmaa/TOM7-PC/problem_Java_zpsccb6a03c.png)

如果这个问题已经存在，我很抱歉，但我找不到类似的问题。我是编程新手，所以当我忘记了什么或写错了什么时，请不要对我大喊大叫！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T14:16:34.167

在这里，我对您的代码进行了一些修改，但以类似的方式进行了修改。`JFrame`除非我不想做一些有创意的事情，否则我不会延长，但你总是可以的。

你已经扩展了，所以如果你已经扩展了你的类，那么 简单地`JFrame`调用方法是没有意义的，最重要的是：`frame.foo()``foo()``JFrame frame = new HelloWorld()``JFrame`

![在此处输入图像描述](../Images/14cfb5ff45614db4fc93be4a60d95ecd.png)

```
import javax.swing.*;

public class HelloWorld extends JFrame{

 public static void main(String[] args) {

          SwingUtilities.invokeLater(new Runnable() {
          public void run() {
          new HelloWorld().setVisible(true);
        }
    });

     }
    public  HelloWorld()
    {

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setTitle("Hello World Button App");

        panel pan= new panel();
        add(pan.panel);
        pack();
        setVisible(true);
    }
   }

   class panel {

      private JButton btn1 = new JButton("Klick!");
      private JTextField txt1 = new JTextField(10);
      private JTextField txt2 = new JTextField(10);
      JPanel panel;
      public panel() {
           panel = new JPanel();
           panel.add(btn1);
           panel.add(txt1);
           panel.add(txt2);
        }
      } 
```

此外，您还可以使用以下方法扩展您的`panel`课程`JPanel` ：

```
 public  HelloWorld()
    {

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setTitle("Hello World Button App");

          panel pan= new panel();
         add(pan);
         pack();
         setVisible(true);
    }
   }

   class panel extends JPanel {

      private JButton btn1 = new JButton("Klick!");
      private JTextField txt1 = new JTextField(10);
      private JTextField txt2 = new JTextField(10);

      public panel() {

           add(btn1);
           add(txt1);
           add(txt2);
        }
      } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T12:01:15.097

那是因为你的类名`panel`不是 JPanel

修改这个：

```
panel panel = new panel();
frame.setContentPane(panel);
frame.setVisible(true); 
```

您应该尝试为您的类使用不那么令人困惑的名称，并尝试使用大写来声明它们。

例子：

```
Class Panel extends JPanel {} 
```

目的：

```
Panel panel = new Panel() 
```

在这里您可以清楚地看到哪个是类名，哪个是该类的对象（该类的实例）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-03T12:00:38.787

你声明了一个`panel`你没有在任何地方使用的类。请替换 bwlow 行：

```
JPanel panel = new JPanel(); 
```

和：

```
SomePanel panel = new SomePanel(); 
```

然后，您的班级`panel`将`SomePanel`遵循正确的班级命名。

一些可以帮助你的想法：

*   按照 Java 风格命名你的类
*   不要使用公共字段
*   在面板上设置布局。这次它对你有用，因为默认是`FlowLayout`.

# android - 安卓用户

> ID：14672194
> 
> 赞同：0
> 
> 时间：2013-02-03T11:55:29.523
> 
> 标签：android

如果有任何方法可以对 android 智能手机进行编程以像 windows 一样与用户一起工作，当每个用户都有自己的桌面意味着它有自己的应用程序和自己的配置时，我会感到很困惑？

任何帮助对我都有好处我有点迷失在这里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:05:38.730

多用户支持是在 4.1 中非正式添加的，并在 4.2 中公开并[在平板电脑上启用](http://developer.android.com/about/versions/android-4.2.html#MultipleUsers)。

# android - jQuery mobile 1.3 安卓面板

> ID：14672196
> 
> 赞同：1
> 
> 时间：2013-02-03T11:55:31.723
> 
> 标签：android, jquery, jquery-mobile

我正在使用来自 jQuery mobile 的新面板小部件。但我认为它有一个错误。如果面板的内容大于实际的“内容”，我无法在面板内滚动。

要了解我的意思，请在 Android 设备上查看[此](http://movsky.org/jqm.html)内容并尝试在面板内滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:40:20.543

您可以添加两个`attributes`来`css`修复`scroll`

```
height: 100%;
overflow-y: scroll;

<div data-role="panel" id="mypanel" style=" height: 100%; overflow-y: scroll;"> 
```

我希望这适用于Android，请尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:21:19.733

jquery-mobile 1.3 RC1 解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T17:01:25.123

尝试清除`ui-panel-inner`并添加`overflow: scroll`到`ui-panel`

```
.ui-panel { 
   width: 17em; 
   min-height: 100%; 
   border-width: 0; 
   position: absolute !important; 
   overflow: scroll !important; 
   top: 0; 
   display: block; 
   padding: 0 !important; 
   margin: 0 !important; 
}

.ui-panel-inner:after { 
   content: '.'; 
   height: 0; 
   font-size: 0; 
   clear: both; 
   visibility: hidden; 
   display: block; 
} 
```

# php - jQuery，AJAX 不会在 DIV 中显示容器

> ID：14672197
> 
> 赞同：0
> 
> 时间：2013-02-03T11:56:11.023
> 
> 标签：php, jquery, html, ajax

我的网页中有这个 jQuery 脚本：

```
<script>
$(function() {
    function callAjax(){
        $('#lastlogins').load("ur.php");
    }
    setInterval(callAjax, 1000 );
});
</script> 
```

但是，在容器 lastlogins 中，没有显示文件 ur.php，它只是空的。我创建了这样的 div：

```
<div id="lastlogins">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:05:01.680

在快速查看`.load`函数后，只有一种可能性……您的 PHP 文件没有返回任何有用的东西。直接在浏览器中运行它并确保它返回有效的 HTML。

你的 jQuery 函数是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:24:29.300

我没有看到您的代码有任何错误。唯一的问题是您的`ur.php`文件。只需尝试直接访问您的文件，看看是否可行。

同时，参考我的示例代码。

```
<script>
$(function() {
    function callAjax(){
        $('#lastlogins').load("/SivaCharan/EGxWL/show");
    }
    setInterval(callAjax, 1000 );
});
</script>
<div id="lastlogins">
</div> 
```

参考我的**[LIVE DEMO](http://jsfiddle.net/SivaCharan/kHaW6/2/)**

# eclipse - Eclipse CDT 设置问题

> ID：14672199
> 
> 赞同：0
> 
> 时间：2013-02-03T11:56:34.707
> 
> 标签：eclipse, eclipse-cdt

我在设置 Eclipse CDT 时遇到了一些困难。我目前在 Fedora 17 上运行 Eclipse Juno。到目前为止，我一直将它用于我的 Android 开发，并且我的工作区包含本地代码、CVS 和 GIT 项目的混合。

我通过 Eclipse 安装了 CDT 插件——这里没有问题。但是有一些问题：

*   当我打开 C/C++ 透视图时，它包含了我所有的 Java/Android 项目。
*   我似乎无法使用 STL 功能

当我使用向导简单地创建一个 hello world Makefile / GCC 项目时，我看到了几行使用 stdio 功能的代码。我想我会很快改变它以使用 STL 例程，如下所示：

```
#include <iostream>

int main(int argc, char* argv[]) {
    std::cout << "Hello World" << std::endl;
} 
```

但不知何故它无法解决`cout`和`endl`。如果我将其更改为

```
#include <iostream>

using namespace std;

int main(int argc, char* argv[]) {
    cout << "Hello World" << endl;
} 
```

它无法解决`std`。

当然，像这样简单的东西应该开箱即用。15 多年来，我一直对我的编辑器和命令行 GNU 工具感到非常满意——我认为我会尝试使用 IDE 的唯一原因是因为我对它做 Android 的东西非常满意。Eclipse CDT 是否需要大量的摆弄才能开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:14:49.813

1）对于您的第一个问题，我将为 C/C++ 项目创建新的工作区，并将我的 Java 项目保存在单独的工作区中（除非它们是同一产品的一部分）。

2）您可能没有选择正确的工具链类型。当你创建 C++ 项目 -> Makefile 项目 -> 你好，你需要在右边的列表框中选择“Linux GCC”（工具链）。CDT 包含单独的解析器（用于语法着色和早期警告），可在您键入时扫描可能的错误，如果您不选择“Linux GCC”，则此设置不正确。但是，代码仍应编译，因为它只会执行“make all”。请注意，使用 CDT 您需要默认手动构建项目（通过项目->构建全部或类似）。

# c++ - 如何在 C++ 中获取 char 的最低 3 位？

> ID：14672201
> 
> 赞同：0
> 
> 时间：2013-02-03T11:56:51.827
> 
> 标签：c++, bit-manipulation

以下文本是我在一份文档中所坚持的内容。

> 数组第一个的最低 3 位`char`表示它是`A`还是`B`。如果 3 位是`0x2`，则数组是一种`A` 格式。如果 3 位是`0x3`，则数组是一种`B`格式。

这是我有生以来第一次接触到这个*最不重要*的东西。在 StackOverflow 上搜索后，这就是我所做的：

```
int lsb = first & 3;
if (lsb == 0x02)
{
    // A
}
else if (lsb == 0x03)
{
    // B
} 
```

这个对吗？在我继续之前，我想确保这是正确的方法（并避免以后把我的脚吹掉）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T11:58:27.010

与您使用的不同，使用的最低 3 位`x`是使用的。实际上会占用.`x&7``first & 3``first & 3``first`

您应该将数字转换为二进制以了解为什么会这样：二进制中的 3 是`11`，而 7 是`111`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T12:01:04.697

通常，3 个最低有效位应该是 yourchar&0x07 而不是。

7 因为 7 是 1+2+4 或二进制 111，对应 3 LSB。

编辑：烤，应该删除。对不起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T11:59:39.310

您需要的变量将具有每个位为零和三个 LSB 1，`0111`简而言之。

`0111`是`0x7`，`variable & 0x7`用来掩盖你的变量。

谷歌位掩码有关它的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T12:04:44.027

```
d3 = b11 = b01 | b10 
```

所以不，现在您只比较 2 个 LSB。`b111`将会`d7`

如果要记下要占用的位数，则必须将其写为

```
unsigned int ls3b = ~(UINT_MAX << 3); 
```

它的作用是，它采用全 1 位数组，将其向左移动 3 位（将 3 个 LSB 保留为 0），然后将其反转。

# jquery - 无法调用未定义 jQuery Mobile 的方法“应用”

> ID：14672202
> 
> 赞同：1
> 
> 时间：2013-02-03T11:56:57.613
> 
> 标签：jquery, cordova, jquery-mobile, autocomplete

好的，所以我一直在对 promises 和 futures 进行一些研究......我目前想要实现的是使用自动完成 JQM 通过调用数据库并运行写入输入的术语来填充输入字段. 我已将此 URL 用作参考：[here](http://andymatthews.net/code/autocomplete/)但我似乎无法让它工作......我不断收到此错误：

```
Uncaught TypeError: Cannot call method 'apply' of undefined at file:///android_asset/www/js/q.js:1230 
```

这是我的代码，因为它有点太大，我在这里创建了一个链接：http: [//pastebin.com/Hh3CttMm](http://pastebin.com/Hh3CttMm)

对于我的 html ......这是额外的 JS 文件：

```
var findClients = "SELECT clientname FROM clients WHERE uniqueName LIKE ? AND (clientState = 'NSW' OR clientState = 'MULTIPLE') LIMIT 5";

function listClients(text) {
  var clientArray = [];
  var queryDB = function queryDB(tx) {
    var term = "%" + text + "%";
    tx.executeSql(findClients, [term], createList, error2);
  }

  var createList = function createList (tx, results) {
    alert(results.row.length);
    for (var i = 0; i < results.rows.length; i++) {
      var item = results.rows.item(i);
      clientArray.push(item['clientname']);
    }

  }

  return Q.fcall(db.transaction(queryDB, error1)).then(function(){return clientArray});
} 
```

我相信这与页面没有初始化我的 Q.js 文件有关，但我不太确定如何解决这个问题。

编辑：错误在这个函数中，就行`throw error`

```
Q.done = done;
function done(promise, fulfilled, rejected, progress) {
    var onUnhandledError = function (error) {
        // forward to a future turn so that ``when``
        // does not catch it and turn it into a rejection.
        nextTick(function () {
            makeStackTraceLong(error, promise);

            if (Q.onerror) {
                Q.onerror(error);
            } else {
                throw error;
            }
        });
    };

    // Avoid unnecessary `nextTick`ing via an unnecessary `when`.
    var promiseToHandle = fulfilled || rejected || progress ?
        when(promise, fulfilled, rejected, progress) :
        promise;

    if (typeof process === "object" && process && process.domain) {
        onUnhandledError = process.domain.bind(onUnhandledError);
    }
    fail(promiseToHandle, onUnhandledError);
} 
```

# susy-compass - 如何将 susy 与 compass.app 一起使用

> ID：14672204
> 
> 赞同：0
> 
> 时间：2013-02-03T11:57:15.267
> 
> 标签：susy-compass

我正在使用来自 compass.handlino.com 的 compass.app，我想知道是否可以使用 Susy 响应式网格系统而不必使用命令行。

我选择 Compass.app 是因为它允许我使用 SASS 和 SCSS 并在不使用命令行的情况下观看文件，所以我想知道它是否也可以使用 Susy。

我到处搜索，但找不到简洁的答案。我可以在 Windows 上将 Susy 与 Compass.app 一起使用吗？如果可以，如何？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:41:56.320

是的，您可以使用 compass.app 或 fire.app 创建一个 susy 项目：

创建项目 > susy > 项目

截图： [http ://d.pr/i/t4XN](http://d.pr/i/t4XN)

或`@import "susy";`直接添加您的 scss 文件。

# asp.net-mvc-4 - 代码优先会员提供者

> ID：14672205
> 
> 赞同：2
> 
> 时间：2013-02-03T11:57:33.203
> 
> 标签：asp.net-mvc-4, code-first, entity-framework-5, membership-provider, simplemembership

如何首先使用代码将 EF 5.0 与会员提供程序集成？

我有自己的数据库模式，我想用它来注册用户等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T12:09:00.287

你应该看看[SimpleMembershipProvider](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

与 EF 一起使用非常容易。

**更新**

对于 MVC4，我将从空白模板开始。

你需要`WebSecurity.InitializeDatabaseConnection`设置数据库。

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "Users", "Id", "UserName", true); 
```

它将连接字符串的名称、表、唯​​一标识符列和用户名列作为参数。

我用于上面这段代码的模型是：

```
[Table("Users")]
public class User
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    [Required]
    public string UserName { get; set; }

    public string Email { get; set; }

    public string FirstName { get; set; }

    public string LastName { get; set; }
} 
```

让某人登录：

```
 WebSecurity.Login(aUsername, aPassword); 
```

上面的方法返回一个布尔值，如果为真，则登录成功。

在 Web.config 中，您**不需要**像使用默认 ASP.NET Membership 那样定义membershipProvider。

如果您需要访问提供商（删除帐户）：

```
var provider = (SimpleMembershipProvider) Membership.Provider;
provider.DeleteAccount(aUsername); // Delete the account
provider.DeleteUser(aUsername, true); // delete the user and its data 
```

用于创建新用户（在这种情况下使用我给定的模型）

```
WebSecurity.CreateUserAndAccount(aUsername, aPassword, new { Email = aEmail, FirstName = aFirstName, LastName = aLastName }); 
```

好处是，您现在可以将您的模型用于其他 EF 类作为外键，而当您想使用普通的 asp.net 成员身份执行此操作时，您无需麻烦。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:08:36.293

[http://msdn.microsoft.com/en-us/library/f1kyba5e](http://msdn.microsoft.com/en-us/library/f1kyba5e)

这实际上与EF无关。

EF只是一种读取数据的方式。

另请参阅表单身份验证 [http://support.microsoft.com/kb/301240?wa=wsignin1.0](http://support.microsoft.com/kb/301240?wa=wsignin1.0)

# mysql - 字符编码 - CentOS 6.3 上的 MySQL 5.1.67

> ID：14672206
> 
> 赞同：2
> 
> 时间：2013-02-03T11:57:48.970
> 
> 标签：mysql, character-encoding, centos

我一直在寻找几个小时来寻找这个答案，但似乎还没有涵盖。我会尽量简洁。

我有一个客户端运行一个有一些字符编码问题的网络应用程序。规格：

*   CentOS 6.3
*   MySQL 服务器 5.1.67
*   **所有**表都设置为 UTF-8
*   SHOW FULL COLUMNS 还验证每个表中的所有文本列都是 UTF-8
*   进入数据库的数据是 UTF-8
*   数据以 UTF-8 格式提供给 Web 客户端
*   输出数据中没有坏字符；强制浏览器使用 Latin1 会导致各种问题

所以，基本上，一切都是 UTF-8，一切都运行良好。

除了...与 MySQL 的所有连接都**必须是 Latin1**，否则整个系统就会崩溃。我已经用控制台 MySQL 客户端、PHP/Mysql、PHP/Mysqli 和 Ruby mysql gem v2.8.1 验证了这一点。发出“SET NAMES utf8”之类的命令或使用各种 API 方法将连接字符集更改为 UTF-8 会导致所有多字节字符变为乱码且无法识别。

目前这里没有什么大问题，当然除了在我的 Ubuntu 测试环境中使用 Latin1 连接到服务器根本不起作用，所以当我将它们投入生产时，我的程序会不断中断。但我有一种挥之不去的感觉，有些事情不可能是对的，以后它会回来咬我的客户。

MySQL 在初始连接到服务器时报告此问题：

```
character_set_client: latin1
character_set_connection: latin1
character_set_database: latin1
character_set_filesystem: binary
character_set_results: latin1
character_set_server: latin1
character_set_system: utf8 
```

这些是适用于 UTF-8 数据的设置。如果我将其他任何内容更改为 UTF-8，多字节字符就会惨死。

如果有人知道这里出了什么问题以及我可以在哪里找到更好的文档，那将不胜感激。

# javascript - 是否已安装并启用 Google Chrome Frame？

> ID：14672210
> 
> 赞同：0
> 
> 时间：2013-02-03T11:58:23.283
> 
> 标签：javascript, internet-explorer, google-chrome-frame

如何检测是否已安装并启用 Google Chrome Frame (GCF)？欢迎任何 javascript 或 css 类型的解决方案。（严格禁止使用其他框架和下载的政策。）

我正在构建一个使用 HTML 5 功能的网站，Microsoft Internet Explorer < v10（至少）并不支持所有这些功能。我有一个 MSIE 9 或更早版本的检查（javascript），但如果安装了 GCF，仅此一项就会很糟糕。如果 GCF 已安装并启用，则应用程序应该继续其愉快的方式，而不用担心它在 MSIE 中运行的事实。

我一直在谷歌搜索，看起来 navigation.plugins() 可能会提供一个解决方案，但是我需要更多信息来专门检查 GCF；所以我还不知道如何使用它。正如上面所建议的，我不限制对navigation.plugins() 的回答。我只是说就我自己而言。所以，如果你知道如何引用这个特定的插件，这是一个可能的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:34:29.247

您可能应该考虑使用[浏览器功能检测](http://html5doctor.com/using-modernizr-to-detect-html5-features-and-provide-fallbacks/)而不是浏览器嗅探。此方法将允许您确定浏览器是否支持您的应用程序所需的功能，无论它是否为 IE。

你可以（或者有些人会争辩说，应该）更进一步，简单地隐藏你的应用程序中依赖这些功能的部分，或者提供合适的后备，而不是完全阻止这些用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T07:32:54.127

查看 GCF 是否正常运行的方法是查看用户代理。如果您在其中看到“chromeframe”令牌，则它已安装并启用。现在，如果某些软件禁用了 chrome frame BHO，那么下面的脚本应该会告诉您它是否已安装：

```
function IsGCFInstalled() {

      try {

        var i = new ActiveXObject('ChromeTab.ChromeFrame');
        if (i) {
          return true;
        }
      } catch(e) {
        log('ChromeFrame not available, error:', e.message);
        // squelch
      }

      return false;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T18:30:46.650

我必须为以后安排自己的测试，但目前；看来我在问题下方的评论中[确认](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started/chrome-frame-faq#TOC-How-do-I-tell-if-a-user-has-Google-Chrome-Frame-installed-)了 Waleed Khan 的回答。用户代理将返回一个包含术语“chromeframe”的字符串。这似乎是我所需要的。我只需要检查浏览器是否为 MSIE < 10，我已经检查过了。应该很快（我想）并且似乎涵盖了所有必要的基础。

# c - (C) 指针未正确评估解引用运算符

> ID：14672221
> 
> 赞同：1
> 
> 时间：2013-02-03T11:59:27.840
> 
> 标签：c, pointers, dynamic

我正在为学校做一个项目，我已经设法通过对我的代码做一些非常笨拙的事情来解决这个问题。我有一个包含多个字段的结构，并且我正在尝试访问以下字段（因为它在名为 current_event 的结构中声明）。

```
int *number_of_couples; 
```

然后在程序中我调用这个值，这样我就可以根据这个 *number_of_couples 字段动态分配一个数组。本质上，我试图将其用作“长度”运算符，因为 C 没有（好的）解决方案。

在我尝试实现以下代码之前：

```
int *permutable_array;
permutable_array = malloc((current_event->number_of_couples) * sizeof(int)); //Line 91
if(permutable_array == NULL){
    panic("permutable_array"); //Ensures that Malloc was successful. 
} 
```

这又会引发以下错误：第 91 行：错误：对二进制 * 无效的操作数（有 'int *' 和 'unsigned int'）

我做了一个非常草率的工作，因为此时我只想让程序正常工作（纯编程的第三个小时！摇滚！）。所以我实现了：

```
int *permutable_array;
int avoid_my_bug = (int) current_event->number_of_couples;
permutable_array = malloc(avoid_my_bug * sizeof(int));
if(permutable_array == NULL){
    panic("permutable_array");
} 
```

哪个有效。现在我有点理解它告诉我的错误。我怀疑这与我将 number_of_couples 的值作为指针存储在 current_event 中这一事实有关，它也是一个指针。因此，如果 number_of_couples 的值为 4，则程序获取该值的路径是：

```
ptr_to_current_event -> ptr_to_number_of_couples -> 4 
```

我可以使用我草率的解决方法，但很明显我这样做是为了避免错误。我宁愿了解为什么代码无法编译。我也尝试过：

```
permutable_array = malloc((*current_event->number_of_couples) * sizeof(int)); //Line 91 
```

它应该取消引用 current_event->number_of_couples 返回的指针，但是它崩溃了。有什么解决办法吗？

****编辑**** 它由以下代码行初始化：

```
fscanf(input_file, "%i", &current_event->number_of_couples); 
```

并且在到达我的代码之前被程序至少引用了三次（其中存储了一个有效的 int 值）。请记住，第二位有效，因此它肯定已初始化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:02:23.663

您必须*取消引用*指向 int 的指针

```
*(current_event->number_of_couples) * sizeof(int) 
```

将指针转换为 int，将为您提供 number_of_couples 的*地址*作为整数。例如，这可能是一些任意大的数字，例如 0xf97e1892。

崩溃可能是`number_of_couples`未初始化的结果。您必须为此指针分配内存。如果未初始化，它将指向任意位置。

如果你用整数初始化它`number_of_couples = 5`，它将指向无效的内存。仅当您从堆中分配内存或指向另一个整数变量时，该指针才有效。

总而言之，在您的情况下，最好将其定义`number_of_couples`为 int 并避免所有潜在的陷阱。

```
int number_of_couples; 
```

然后，您可以像第一个示例一样分配内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T12:06:12.177

您不应该在指针中存储整数值。指针用于指向事物，您应该很少需要将指针转换为整数类型。如果你这样做，你应该使用`uintptr_t`or`intptr_t`类型。

您应该取消引用指针（假设它指向一个有效的`int`）或更改的类型`number_of_couples`，使其不是指针。如果将其保留为指针，则必须`int`在尝试取消引用它之前确保它指向有效对象，但根据您的用法和上面的上下文，它不需要是指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T12:04:32.233

您应该使用 *(current_event->number_of_couples)，这样您将获得指针指向的值。如果你不使用 * 你会得到一个可以转换为 int 的指针地址，但这不是你想要的。尝试在 current_event->number_of_couples 周围的代码中加上括号，然后使用 *. 如果它没有帮助，那么其他东西会导致崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T12:07:41.797

如果取消引用此指针时代码崩溃，则很可能是它指向无效或未初始化的内存。你没有在你的问题中指出它在哪里被初始化，但是取消引用一个未初始化的指针是在自找麻烦 - 查看它在哪里被初始化以及它是否指向动态内存。

# javascript - 增量计数器 Javascript/JQuery

> ID：14672226
> 
> 赞同：0
> 
> 时间：2013-02-03T12:00:43.207
> 
> 标签：javascript, jquery

我正在尝试弄清楚如何使这个计数器工作。播放了一定数量的动画后，我想让页面刷新。我知道我的代码很烂。我没有受过这方面的教育，而且我很新，更不用说很难集中精力（至少可以说）我现在住的地方......所以要友善。这里是：

```
$(document).ready(function () {
    function loop() {
        var p = 0;
        if (p = 3) {
            location.reload(true);
        } else {
            $("#p3").delay("1000").fadeIn("slow");
            $("#p3").delay("1000").fadeOut("slow", loop);
            p + 1;
        };
        loop();
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:16:22.007

您的`if (p = 3)`语句使用赋值运算符`=`而不是比较运算符`===`or `==`。因此`p`被分配给`3`，其结果是真实的，因此该`else`语句永远不会执行。

此外，您的`p`变量是在`loop()`函数内部声明的，因此每次调用函数时都会重置它 - 您可以将该声明移至函数之前（将其保留在文档就绪处理程序中：无需使其成为全局变量）。

该行`p + 1;`也没有做任何事情：它不会增加`p`，因为您需要将结果分配回`p`with `p = p + 1`，它的简写是 is`p += 1`或 just `p++`。

最后，您发布的代码存在语法错误：您缺少函数的关闭`}`。`loop()`我猜目的是结束函数然后调用它，所以：

```
$(document).ready(function () {
    var p = 0;  // <--- moved outside function
    function loop() {
        if (p === 3) {   // <-- changed = to ===
            location.reload(true);
        } else {
            $("#p3").delay("1000").fadeIn("slow");
            $("#p3").delay("1000").fadeOut("slow", loop);
            p++; // <-- changed from p + 1
        };
    } // <--- this is the missing bracket
    loop();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T12:09:00.617

我做了一些假设并写了我认为你想要的，代码未经测试。：

**将其更改为：**

```
$(document).ready(function () {
    var globalP = 0;
     //this is called when fadeOut completes.
    function fadeComplete() {
       if (globalP == 3) {//if it is 3 reload..
            location.reload(true);
        } else {
            globalP++;//increment counter 
            animate();//start animation again...
        }
    }
    function animate() {
       //start fading in...
       $("#p3").delay("1000").fadeIn("slow", function() {
           //start fading out when the fadeIn completes.
            //should this happen? Since you're fading in the SAME element.
          $("#p3").delay("1000").fadeOut("slow", fadeComplete);
       });
    };
    animate();
}); 
```

# javascript - 向上/向下键不使用javascript滚动无序列表

> ID：14672227
> 
> 赞同：-1
> 
> 时间：2013-02-03T12:00:57.247
> 
> 标签：javascript, jquery, html, css

这一切都很好，除了用户应该能够使用他们的向上/向下箭头向上和向下滚动结果列表。我无法弄清楚为什么向上/向下根本不起作用。控制台正在记录相应的功能正在运行，但选择实际上不起作用。任何线索都会很棒。

```
<input id="search_box" type="text" style="float:right;margin-bottom:2px;">

            <div class="suggestions">

                <ul id="results_list">

                </ul>

            </div>

<style>

#results_list {
    width: 220px;
    text-align: left;
    float: right;
    padding: 0;
    z-index: 10;
    position: relative;
    background-color: white;
}

#results_list li {
    background: white;
    border-bottom: solid 1px #eee;
    border-left: solid 1px #eee;
    border-right: solid 1px #eee;
    padding: 2px 3px 2px 3px;
    margin-bottom: 0px;
}

#results_list a {
    text-decoration: none;
}

.selected {
    background: black;
}

</style>

<script>

$('#search_box').keyup(function(e) {
    if ($('#search_box').val().length) {
        $.ajax({
            url: '/api/jsonrpc',
            type: 'POST',
            data: JSON.stringify({
                jsonrpc: '2.0',
                method: 'search_titles',
                params: [$('#search_box').val()],
                id: 'jsonrpc'
            }),
            success: function (data) {
                $('#results_list').show();
                var items = [];
                $('#results_list').empty();
                $.each(data.result, function(i, item) {
                    items.push("<li><a href='/title/" + item._id + "'>" + item.Name + "</a></li>");
                });
                $('#results_list').append( items.join('') );
            },
            error: function (data) {
                alert('There was a problem.  Please try again.')
            }
        });
    } else {
        $('#results_list').hide();
    }
})

var $listItems = $('li');

$('input').keydown(function(e)
{
    var key = e.keyCode,
        $selected = $listItems.filter('.selected'),
        $current;

    if ( key != 40 && key != 38 ) return;

    $listItems.removeClass('selected');

    if ( key == 40 ) // Down key
    {
        console.log('called down')
        if ( ! $selected.length || $selected.is(':last-child') ) {
            $current = $listItems.eq(0);
        }
        else {
            $current = $selected.next();
        }
    }
    else if ( key == 38 ) // Up key
    {
        console.log('called up')
        if ( ! $selected.length || $selected.is(':first-child') ) {
            $current = $listItems.last();
        }
        else {
            $current = $selected.prev();
        }
    }

    $current.addClass('selected');
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:08:50.807

添加这个：

```
$listItems = $('li') 
```

...到您的 Ajax 成功回调结束。

jQuery 对象不会自动刷新自身以包含恰好匹配其原始选择器的新添加元素，因此您现有的代码正在尝试滚动浏览`$listItems`实际上不包含任何元素的 jQuery 对象 ()，因为它是在列表之前创建的有人居住。

# javascript - 如何禁用定时器？

> ID：14672231
> 
> 赞同：3
> 
> 时间：2013-02-03T12:01:18.803
> 
> 标签：javascript, ajax, timer

> **可能重复：**
> [在 javascript 中停止 setInterval 调用](https://stackoverflow.com/questions/109086/stop-setinterval-call-in-javascript)

我使用`window.setInterval`方法来轮询进度状态。但是需要在完成时禁用此计时器。如何禁用定时器？

```
 window.setInterval(function(){$.ajax({
          type: 'GET',
          url: 'imports',
          success: function(response){
            console.log(response);
            if(response['status'] != 'ok'){
              return;
            }

            $('.bar').css('width', response['progress'] + '%');

            if(response['step'] == 'completed') location.reload();
      }}, 'json');}, 1000); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T12:05:35.857

当您开始间隔时，它会返回一个定义它的整数：

```
var timer = window.setInterval( ... ); 
```

然后，您可以在 AJAX 函数返回 true 时清除该间隔：

```
...
success: function(response) {
  console.log(response);
  if (response['status'] != 'ok') {
    clearInterval(timer);
    return;
  }
}
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T12:04:59.023

该`setInterval()`方法将返回一个整数/数字。您需要存储它，然后将其传递给方法`clearInterval()`以停止它。

```
var intervalId = window.setInterval(.....); 
```

然后，当你想停止它时，我认为它会去：

```
window.clearInterval(intervalId); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T12:05:03.997

`setInterval()`返回一个句柄，您可以稍后将其传递给以`window.clearInterval()`停止计时器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-03T12:05:15.743

```
var x = window.setInterval(...);
// ...
window.clearInterval(x); 
```

# jquery - 在 Jquery Ui 对话框中使用 Html 标记

> ID：14672233
> 
> 赞同：0
> 
> 时间：2013-02-03T12:01:41.943
> 
> 标签：jquery, html, jquery-ui

我正在使用 Jquery Ui 对话框并且在设置文本时遇到问题。我正在使用此代码插入链接：

```
$('#dialog').text(<a href=\"#\" >Click Here</a>).dialog(); 
```

但它显示代码和标签而不是链接。我如何在那里使用标签？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T12:02:27.870

当您使用 text 时，您确切地告诉 jquery ui 核心将该字符串视为文本。您可以像这样简单地使用 HTML：

```
$('#dialog').html('<a href="#" >Click Here</a>').dialog(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:03:38.437

试试这个：

```
$("<a href=\"#\" >Click Here</a>").appendTo('body').dialog(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T12:11:40.863

这里的问题是您正在使用该`text`函数，该函数仅用于文本，因为它转义了有效 HTML 所需的字符。

相反，您应该使用该`html`函数，您的工作代码将是：

`$('#dialog').html("<a href=\"\">Click Here</a>").dialog();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T12:15:34.247

查看[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/) 出现文字的地方是：

```
<div id="dialog" title="Basic dialog">
<p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div> 
```

在文档（[http://api.jqueryui.com/dialog/](http://api.jqueryui.com/dialog/)）中没有 .text 作为函数

# android - android如何在edittext中制作文本完全固定的行

> ID：14672234
> 
> 赞同：2
> 
> 时间：2013-02-03T12:01:43.660
> 
> 标签：android, android-edittext

我想允许 use 只输入 5 行，我试过这个

```
<EditText
    android:layout_below="@+id/tv_signup_descriptionError"
    android:id="@+id/et_signup_description"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dip"
    android:hint="@string/et_hint_enterDescription"
    android:singleLine="false"
    android:lines="5"
    android:gravity="top"
    android:scrollHorizontally="false"
    android:inputType="textMultiLine" 
    android:maxLines="5"/> 
```

但我仍然可以`Enter`在第五行之后按

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-21T11:55:20.120

@Swayam 你是对的，但是这个解决方案已经改进：

1-更好的性能

2-在您的解决方案中，如果您输入了 7 行（您的最大输入行），然后在顶部行中按下回车，最后一行将被删除，但**在此解决方案中“回车”键已被忽略。**

```
 mEditText.setOnKeyListener(new View.OnKeyListener() {

            @Override
            public boolean onKey(View v, int keyCode, KeyEvent event) {

                if (keyCode == KeyEvent.KEYCODE_ENTER  && event.getAction() == KeyEvent.ACTION_DOWN) {

                    if ( ((EditText)v).getLineCount() >= 7 )
                        return true;
                    }

                return false;
            }
     }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T12:06:04.080

您不能使用任何 XML 属性来做到这一点。

`maxlines`表示`maximum height`EditText 而**不是**输入行数。

但是，您可以实现自己的代码来检查行数。

以下**不是我自己的代码**，而是取自[这个答案](https://stackoverflow.com/questions/7092961/edittext-maxlines-not-working-user-can-still-input-more-lines-than-set/7103931)。

```
mEditText.setOnKeyListener(new View.OnKeyListener() {

        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {

            // if enter is pressed start calculating
            if (keyCode == KeyEvent.KEYCODE_ENTER
                    && event.getAction() == KeyEvent.ACTION_UP) {

                // get EditText text
                String text = ((EditText) v).getText().toString();

                // find how many rows it cointains
                editTextRowCount = text.split("\\n").length;

                // user has input more than limited - lets do something
                // about that
                if (editTextRowCount >= 7) {

                    // find the last break
                    int lastBreakIndex = text.lastIndexOf("\n");

                    // compose new text
                    String newText = text.substring(0, lastBreakIndex);

                    // add new text - delete old one and append new one
                    // (append because I want the cursor to be at the end)
                    ((EditText) v).setText("");
                    ((EditText) v).append(newText);

                }
            }

            return false;
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T12:04:45.673

maxLines 属性是限制 EditText 的高度。要限制最大行数，您必须自己在代码中完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-22T13:30:31.353

/** MAX_LINES 你要设置 */

```
 public void afterTextChanged(Editable editable) {
        int lines = mEditText.getLineCount();
        if (lines > MAX_LINES) {
            String s = editable.toString();
            int start = mEditText.getSelectionStart();
            int end = mEditText.getSelectionEnd();

            if (start == end && start < s.length() && start > 1) {
                s = s.substring(0, start - 1) + s.substring(start);
            } else {
                s = s.substring(0, s.length() - 1);
            }

            mEditText.setText(s);
            mEditText.setSelection(mEditText.getText().length());
            // Toast.makeText(RatingActivity.this, "max line set to MAX_LINES", Toast.LENGTH_SHORT).show();
  } 
```

这段代码适用于我将 EditText 最大行数限制设置为 MAX_LINES。

# javascript - 使背景图像可缩放到窗口

> ID：14672238
> 
> 赞同：0
> 
> 时间：2013-02-03T12:02:23.970
> 
> 标签：javascript, html, css

让我想想，我该如何解释我的问题。我有一个包含很多 div 层的滚动页面......一个在另一个之下！它们的背景图像的分辨率为 1920x1080 像素！但它们应该填满整个后台浏览器窗口。例如，当我缩放浏览器窗口时，图片应该自行缩放。

我见过一些 jquery 插件做得很好，但对我来说，在 css 中定义背景图像很重要，因为我使用 inview.js 并尝试创建视差效果。这可能吗？

谢谢泰德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:13:11.750

`background-size: cover`尽管它是 CSS3 属性并且某些浏览器不支持它，但您可以使用它。

[http://www.w3schools.com/cssref/css3_pr_background-size.asp](http://www.w3schools.com/cssref/css3_pr_background-size.asp)

**编辑：**[CSS Tricks](http://css-tricks.com/perfect-full-page-background-image/)提供的前缀和后备解决方案

```
html { 
    background: url(images/bg.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:05:19.673

试试这个...

```
html, body{
padding:0px;
margin:0px;
} 
```

然后，为了使您的图像适用于超大显示器（即：多屏幕等），请将其缩放`<img>`并设置较低的 z-index。

```
.background{
width:100%;
height:100%;
position:fixed;
top:0px;
left:0px;
z-index:0;
}

<img src="background.jpg" class="background"> 
```

更改`background.jpg`为您的背景图像并将`<img>`标签放在页面底部，以便最后加载。如果 z-index 没有显示在正确的级别，您可能不得不使用它（即：覆盖其他元素）

# multicore - 最小化 NUMA 架构中的内核间通信

> ID：14672244
> 
> 赞同：1
> 
> 时间：2013-02-03T12:03:21.967
> 
> 标签：multicore, intel, nehalem

任何人都可以强调在 NUMA 多核架构中减少内核间通信的方法。案例研究英特尔 NEHALEM 微架构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T17:51:59.553

Nehalem 处理器使用[QuickPath 互连 (QPI)](http://www.intel.com/content/www/us/en/io/quickpath-technology/quick-path-interconnect-introduction-paper.html)进行处理器/节点/包之间的通信。在[NUMA 系统中](http://en.wikipedia.org/wiki/Non-Uniform_Memory_Access)，每个节点都有自己的本地内存，与系统中的其他节点共享。当[工作集](http://en.wikipedia.org/wiki/Working_set)的程序适合 L1 缓存并且是只读的，那么哪个 NUMA 节点拥有内存并不重要。当核心发生缓存未命中并且内存由另一个节点拥有时，NUMA 节点之间的通信是必要的。但是，这并不意味着访问另一个节点拥有的内存会更慢，这取决于另一个节点是否将其缓存在与其本地内存关联的缓存中，英特尔称之为最后一级缓存 (LLC)。核心访问该节点本地的内存位置比访问另一个节点拥有的内存要快，但前提是它在两个节点上的 LLC 中都未命中。访问在另一个节点上的 LLC 中命中的内存比访问本地节点上的内存要快，这是因为内存比 CPU 慢得多，并且 QPI 针对这种通信进行了优化。大多数系统都不会费心尝试减少处理器间通信，因为正如您可以想象的那样，这不是一个简单的问题 - 它需要设置线程与内核的亲和性，设置该线程的内存工作集与本地内存的亲和性那个节点的。你可以阅读更多关于这个[Drepper Ulrich 的论文](http://www.akkadia.org/drepper/cpumemory.pdf)，搜索 NUMA。在本文中，Ulrich 将 QPI 称为通用系统接口 (CSI)，这是英特尔在发布之前对 QPI 的名称。

# c# - 如何在控制台 C# 中为列表中的项目移动光标？

> ID：14672251
> 
> 赞同：0
> 
> 时间：2013-02-03T12:04:11.163
> 
> 标签：c#, console, generic-collections

我很感激有人可以帮助找出错误。我在控制台中打印了我的列表项目，我需要向下移动光标，对于要突出显示的每个项目，我已经尝试过这样的操作：

```
foreach (FileSystemInfo fsi in files)
         Console.WriteLine(fsi); //printing the "files" list

Console.SetCursorPosition(0, 0); //setting initial place of cursor
while (Console.ReadKey(true).Key != ConsoleKey.Escape)  //untill i press escape
{
    switch (Console.ReadKey(true).Key)
    {
        case ConsoleKey.DownArrow:   //for Down key
            foreach (FileSystemInfo fsi in files)
            {
                Console.BackgroundColor = ConsoleColor.Blue;
                Console.ForegroundColor = ConsoleColor.Green;

                // Here's the problem, the cursor goes to the end of the list, 
                // not moving through each item:
                Console.SetCursorPosition(0, files.IndexOf(fsi)); 

            }
            break;
    }
}
Console.ReadKey(); 
```

我将不胜感激任何帮助！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:23:30.247

### 这有效

```
 static void Main(string[] args)
    {
        string[] files = Directory.GetFiles(@"C:\");
        foreach (string file in files)
        {
            Console.WriteLine(file);
        }
        Console.SetCursorPosition(0, 0); //setting initial place of cursor
        int curPos = -1;

        if (files.Length > 0)
        {
            curPos = 0;
        }
        ConsoleKeyInfo keyinfo;
        while ((keyinfo = Console.ReadKey(true)).Key != ConsoleKey.Escape)  //untill i press escape
        {
            switch (keyinfo.Key)
            {
                case ConsoleKey.DownArrow:   //for Down key
                    curPos++;

                        // Here's the problem, the cursor goes to the end of the list, 
                        // not moving through each item:
                    Console.SetCursorPosition(0, curPos);

                    break;
                case ConsoleKey.UpArrow:
                    curPos--;
                    Console.SetCursorPosition(0, curPos);
                    break;
            }
        }

    } 
```

PS：当按下向下 n 向上键时，请检查是否绑定了 curPos！休息一切正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:14:48.507

当然，由于您的案例中的 foreach，它会出现在完整列表中。

对于我的示例，我将您的文件列表更改为字符串列表

```
var files = new List<string>()
    {
        "File1", "File2", "File3", "File4",
    };

foreach (var fsi in files)
    Console.WriteLine(fsi); //printing the "files" list

// A counter to save the specific position
int cnt = 0;
Console.SetCursorPosition(0, cnt);//setting initial place of cursor

// Save the pressed key so you dont need to press it twice
ConsoleKey key;
while ((key = Console.ReadKey(true).Key) != ConsoleKey.Escape)  //untill i press escape
{
    switch (key)
    {
        case ConsoleKey.DownArrow:   //for Down key
            cnt++;

            if (cnt >= files.Count)
            {
                cnt = files.Count - 1;
            }

            Console.BackgroundColor = ConsoleColor.Blue;
            Console.ForegroundColor = ConsoleColor.Green;

            // Here's the problem, the cursor goes to the end of the list, 
            // not moving through each item:
            Console.SetCursorPosition(0, cnt);

            break;

        case ConsoleKey.UpArrow:   //for Down key
            cnt--;

            if (cnt < 0)
            {
                cnt = 0;
            }

            Console.BackgroundColor = ConsoleColor.Blue;
            Console.ForegroundColor = ConsoleColor.Green;

            // Here's the problem, the cursor goes to the end of the list, 
            // not moving through each item:
            Console.SetCursorPosition(0, cnt);

            break;

    }
}
Console.ReadKey(); 
```

您尝试使用的颜色编码尚未按您的意愿工作，但我敢肯定，您知道如何解决它 ;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T12:24:25.990

听起来您希望向下箭头键上的每个笔划向下移动**一个**文件，在这种情况下，将代码更改为：

```
Console.SetCursorPosition(0, 0); //setting initial place of cursor
ConsoleKey key = Console.ReadKey(true).Key;
int index = 0;
while (key != ConsoleKey.Escape)  //untill i press escape
{
    switch (key)
    {
        case ConsoleKey.DownArrow:   //for Down key
            Console.BackgroundColor = ConsoleColor.Blue;
            Console.ForegroundColor = ConsoleColor.Green;
            index = (index + 1) % files.Count;
            Console.SetCursorPosition(0, index);
            break;
        }
        key = Console.ReadKey(true).Key;
} 
```

这也解决了您的双重阅读问题，导致用户必须按每个键两次。

# wordpress - Wordpress 从 wp-admin 中删除菜单项

> ID：14672258
> 
> 赞同：1
> 
> 时间：2013-02-03T12:04:39.817
> 
> 标签：wordpress

我希望在 wp-admin 中只有`Posts`,`Pages`和设置, 可以删除所有剩余`Media`的 , `Plugins`,`Users`等`Tools`。

此功能仅从仪表板中删除`remove_menu_page( 'upload.php' );`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:50:43.660

从 $restricted 中删除您想要阻止的菜单。

```
function remove_menus () {
global $menu;
    $restricted = array(__('Dashboard'), __('Posts'), __('Media'), __('Links'), __('Pages'), __('Appearance'), __('Tools'), __('Users'), __('Settings'), __('Comments'), __('Plugins'));
    end ($menu);
    while (prev($menu)){
        $value = explode(' ',$menu[key($menu)][0]);
        if(in_array($value[0] != NULL?$value[0]:"" , $restricted)){unset($menu[key($menu)]);}
    }
} 
```

信用通过[wprecipes](http://hungred.com/how-to/remove-wordpress-admin-menu-affecting-wordpress-core-system/)[被饥饿](http://www.wprecipes.com/how-to-remove-menus-in-wordpress-dashboard)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-11T08:24:10.970

从 WordPress 3.1 开始，您可以更好地使用[remove_menu_page()](http://codex.wordpress.org/Function_Reference/remove_menu_page)

```
add_action( 'admin_menu', 'prefix_remove_menu_pages' );
function prefix_remove_menu_pages() {
    remove_menu_page('edit-comments.php');
    remove_menu_page('upload.php'); 
    remove_menu_page('tools.php');
    // Remove any item you want
  }
} 
```

来自文档：

> 请注意 remove_menu_pages 不会阻止用户直接访问这些屏幕。删除菜单并不能取代适当过滤用户权限的需要。

对于子菜单项：

> 要删除管理员中的子菜单项，请使用 remove_submenu_page。使用 remove_menu_page() 不适用于子菜单项。

# phpunit - 为假人加载夹具 phpunit 测试

> ID：14672261
> 
> 赞同：1
> 
> 时间：2013-02-03T12:04:43.737
> 
> 标签：phpunit, fixtures

谢谢看看这里。我开始参与一个项目，我需要为我编写的代码创建测试。我没有太多的测试经验。

我写了这个文件：tests/fixtures/visitante_boletin.yml

```
1:
    id_localizacion: 60
    email: emailconfirmado@server.net
    estado_confirmacion: 1
    fecha_creacion: 2013-02-03 12:01:49
    fecha_confirmacion: 2013-02-03 12:01:49
    fecha_cancelacion: 
    token: 343fbb5f15709935470ba3b7524068af8544776d924b0bd45c2558a7eb5c8082f0bef31402b773fa 
```

这个测试：tests/libraries/com/arteinformado/service/front/Sus​​cribeServiceTest.php ...

```
 const SINCONFIRMAR = 0;
    const CONFIRMADO = 1;
    const CANCELADO = 2;
...
    public function testShouldGetAllSuscriptionsWithStateCONFIRMADO() {
        $suscriptors = $this->_suscribeService->getAllSuscriptionsWithState(self::CONFIRMADO);
        $this->assertNotEmpty($suscriptors);
        $this->assertEquals(1, count($suscriptors));
    } 
... 
```

当我运行测试时，我在 assertNotEmpty 处收到错误，所以我不知道是否正在加载夹具数据或发生了什么，因为它正在测试的方法非常简单，应该没问题。

```
public function getAllSuscriptionsWithState($estado_confirmacion) {
    $suscriptors = array();

    $query = $this->db->get_where('visitante_boletin', array('estado_confirmacion' => $estado_confirmacion));
    foreach ($query->result() as $row) {
        $suscriptor = $this->_dbRowToVisitanteBoletin($row);
        array_push($suscriptors, $suscriptor);
    }

    return $suscriptors;

} 
```

任何帮助指南将不胜感激。

提前致谢。干杯，·_-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:57:51.957

[PHPUnit 文档](http://www.phpunit.de/manual/current/en/index.html)是您的[朋友](http://www.phpunit.de/manual/current/en/database.html#set-up-fixture)。

你没有提到它，但你有没有：

*   安装了 DbUnit 扩展
*   让你的测试类扩展 PHPUnit_Extensions_Database_TestCase
*   为您的测试类提供了 getConnection() 和 getDataSet() 方法

这绝对对我有用。

# emacs - Emacs：如何在 python 模式下自动启动 python 解释器？

> ID：14672271
> 
> 赞同：1
> 
> 时间：2013-02-03T12:05:31.593
> 
> 标签：emacs, emacs-ecb, python-mode, python

每次以 python 模式启动 Emacs 后，我需要在不同的缓冲区中打开解释器并更改新缓冲区的大小以适应 emacs-code-browser 的历史记录。我想自动化这个活动。

*   **如何自动化交互式 python shell 总是出现在屏幕截图中的额外缓冲区中（在 Emacs 启动之后）？**

**更新：见下文：workgroups.el 和 emacs-code-browser 似乎发生了冲突。看截图**

## 编辑前

![编辑前](../Images/2ef91c26d13ff61d23f9ba8587c97ca3.png)

## 编辑后

![编辑后](../Images/27d6e237c76d443ebec861de93a74c84.png)

我使用 Emacs23、emacs-code-browser 和 python-mode.el。

**更新**：我尝试使用 workgroups.el。我定义了一个新的*python 工作组*并将以下行添加到我的*.emacs*中：(wg-load "~/.emacs.d/workgroups/python_workgroup.wg")。然而，窗户被弄乱了。您可以在下面的屏幕截图中看到它：

它认为 emacs-code-browser 和我的工作组的设置发生冲突。有没有办法避免这种行为？ ![在此处输入图像描述](../Images/7df711a252b175e0ece3b4ae77923352.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:25:58.133

您也可以尝试桌面保存模式：

desktop-save-mode 是一个交互式自动加载的 Lisp 函数。

（桌面保存模式和可选 ARG）

切换桌面保存（桌面保存模式）。使用前缀参数 ARG，如果 ARG 为正则启用桌面保存模式，否则禁用它。如果从 Lisp 调用，如果 ARG 被省略或为零，则启用该模式。

如果启用了桌面保存模式，则 Emacs 的状态会从一个会话保存到另一个会话。有关详细信息，请参见变量`desktop-save' and function` desktop-read'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:13:00.490

使用[workgroups.el](https://github.com/tlh/workgroups.el)怎么样？
它用于保存您的窗口配置，这正是您所需要的。

通过这种方式，您可以创建一个名为 Python 的工作组，调整缓冲区（包括一个包含交互式 python shell 的缓冲区）和所有内容并保存该组，下次您只需打开工作组 Python 并像以前一样打开所有缓冲区。如果您希望它在 emacs 启动时自动打开，只需将您保存的 Python 工作组设置为默认工作组即可。

# python - 为什么我在 dotcloud 上部署 django-celery 示例应用程序时会收到登录提示？

> ID：14672276
> 
> 赞同：0
> 
> 时间：2013-02-03T12:05:49.833
> 
> 标签：python, django-celery, dotcloud

我一直在努力让 django-celery 中的演示应用程序在 dotcloud 上运行。我查看了[http://docs.dotcloud.com/0.9/tutorials/python/django-celery/](http://docs.dotcloud.com/0.9/tutorials/python/django-celery/)上的教程，但这并没有很大的帮助。

示例应用程序是一个 Django 1.4 应用程序。我不知道为什么，但是当我导航到已部署的应用程序时，它会显示一个用户名密码弹出窗口，而不是索引页面。弹出窗口中的消息是

> TheDomain 的服务器需要用户名和密码。服务器说：RabbitMQ 管理。

有谁知道为什么添加了这种行为？

与 django-celery 示例应用程序的区别是：

```
# Django settings for project in settings.py

import os
import json
import djcelery

# Load the dotCloud environment
with open('/home/dotcloud/environment.json') as f:
  dotcloud_env = json.load(f)

# Configure Celery using the RabbitMQ credentials found in the dotCloud
# environment.
djcelery.setup_loader()
BROKER_HOST = dotcloud_env['DOTCLOUD_BROKER_AMQP_HOST']
BROKER_PORT = int(dotcloud_env['DOTCLOUD_BROKER_AMQP_PORT'])
BROKER_USER = dotcloud_env['DOTCLOUD_BROKER_AMQP_LOGIN']
BROKER_PASSWORD = dotcloud_env['DOTCLOUD_BROKER_AMQP_PASSWORD']
BROKER_VHOST = '/' 
```

而不是应用程序中的数据库设置 - 我已将数据库设置替换为。

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'template1',
        'USER': dotcloud_env['DOTCLOUD_DB_SQL_LOGIN'],
        'PASSWORD': dotcloud_env['DOTCLOUD_DB_SQL_PASSWORD'],
        'HOST': dotcloud_env['DOTCLOUD_DB_SQL_HOST'],
        'PORT': int(dotcloud_env['DOTCLOUD_DB_SQL_PORT']),
    }
} 
```

我还添加了一个 requirements.txt 文件

```
Django==1.4
django-celery
setproctitle 
```

和 dotcloud.yml 文件

```
www:
    type: python

broker:
    type: rabbitmq

workers:
    type: python-worker

db:
    type: postgresql 
```

和 supervisor.conf

```
[program:djcelery]
directory = $HOME/current/
command = python manage.py celeryd -E -l info -c 2
stderr_logfile = /var/log/supervisor/%(program_name)s_error.log
stdout_logfile = /var/log/supervisor/%(program_name)s.log

[program:celerycam]
directory = $HOME/current/
command = python manage.py celerycam
stderr_logfile = /var/log/supervisor/%(program_name)s_error.log
stdout_logfile = /var/log/supervisor/%(program_name)s.log 
```

以及我添加的安装后文件

```
dotcloud_get_env() {
    sed -n "/$1/ s/.*: \"\(.*\)\".*/\1/p" < "$HOME/environment.json"
}

setup_django_celery() {
    cat > $HOME/current/supervisord.conf << EOF
[program:djcelery]
directory = $HOME/current/
command = python manage.py celeryd -E -l info -c 2
stderr_logfile = /var/log/supervisor/%(program_name)s_error.log
stdout_logfile = /var/log/supervisor/%(program_name)s.log

[program:celerycam]
directory = $HOME/current/
command = python manage.py celerycam
stderr_logfile = /var/log/supervisor/%(program_name)s_error.log
stdout_logfile = /var/log/supervisor/%(program_name)s.log
EOF
}

if [ `dotcloud_get_env SERVICE_NAME` = workers ] ; then
    setup_django_celery
fi 
```

最后一个 fi 已添加但不在 dotcloud 教程中。

# 编辑

我已经用这个例子拼凑了一个 repo，因为当它工作时它应该对其他人非常有用。它可以在：[https ://github.com/asunwatcher/django-celery-dotcloud](https://github.com/asunwatcher/django-celery-dotcloud)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:44:10.903

这看起来像是我们的 CLI 中的错误。尝试一下`dotcloud url`，你会看到你的应用程序有两个 URL，一个用于你的`www`服务，一个用于你的 rabbitMQ，它是一个兔子管理接口。您可以使用 dotCloud 环境中提供的 rabbit 用户名和密码登录。

出于某种原因，我们在推送结束时选择了错误的来向您展示。您的服务的 url`www`是您想要的。

# android - 第二个微调器上的选择不起作用

> ID：14672282
> 
> 赞同：0
> 
> 时间：2013-02-03T12:06:41.487
> 
> 标签：android, android-spinner, ormlite

我正在开发一个带有 2 个微调器的页面，其中第一个微调器具有从 DB 填充的某些类别。根据从 spinner1 中选择的值，在方法 setReportNamesContent() 中传递 selectedCategoryName。我还在第二个微调器中填充了值，**但我无法在第二个微调器中进行选择**。我的想法是在单击按钮时传递这两个选定的值，但总是在单击按钮时传递来自第二个微调器的第一个值。

```
protected void setReportCategory(String loginName) {        
        map = DBManager.getInstance().reportCategoryListByLoggedInUser(loginName);      
        reportCategoryList = new ArrayList<String>(map.keySet());
        Collections.sort(reportCategoryList);
        reportCategorySpinnner = (Spinner) findViewById(R.id.ReportCategoryList);
        reportCategorySpinnner.setOnItemSelectedListener(this);
        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, reportCategoryList);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        reportCategorySpinnner.setAdapter(dataAdapter);
    }

@Override
public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {   
    switch(parent.getId()){     
    case R.id.ReportCategoryList:
        selectedCategoryName = parent.getItemAtPosition(position).toString();
        break;
    case R.id.ReportNameList:
        selectedReportName = parent.getItemAtPosition(position).toString();
        break;
    }   

if(!isEmptyOrNull(selectedCategoryName))
        setReportNamesContent(selectedCategoryName);
}   

private void setReportNamesContent(String selectedCategoryName) {
    reportNameList = map.get(selectedCategoryName);
    Collections.sort(reportNameList);
    reportNameSpinnner = (Spinner) findViewById(R.id.ReportNameList);
    reportNameSpinnner.setOnItemSelectedListener(this);
    ArrayAdapter<String> dataAdapter1 = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, reportNameList);
    dataAdapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    reportNameSpinnner.setAdapter(dataAdapter1);
} 
```

我已经在这个网站上提出了各种问题，并尝试了所有这些问题，但都没有工作。请建议一个有效的答案

# php - 获取会话剩余时间，Yii / PHP

> ID：14672283
> 
> 赞同：0
> 
> 时间：2013-02-03T12:06:46.800
> 
> 标签：php, yii

我想在 Yii 中创建一个控制器，它返回用户会话剩下多少秒。每次用户在我的页面上做某事时，超时都会被重置，它应该被重置。但我的问题是两件事。

1.  我怎样才能知道会话还剩多长时间？
2.  如何在 Yii 中创建一个不重置会话超时的控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:15:06.393

如果设置`allowAutoLogin`为 true，则必须指定用户会话的持续时间作为`login()`函数的第二个参数。在这种情况下，您已经存储了登录时间的时间戳并计算了差异。

如果`allowAutoLogin`为假，您必须获取会话超时`ini_get('session.gc_maxlifetime')`，然后存储它并向用户显示差异。

# actionscript-3 - 警告：重复的变量定义

> ID：14672286
> 
> 赞同：3
> 
> 时间：2013-02-03T12:07:27.360
> 
> 标签：actionscript-3

如果我有 2 个`for`循环都声明`var i`，那么第二个循环会产生警告：

```
public function twoLoops(){
    for (var i:int = 0; i < 100; i++) {
    }

    for (var i:int = 0; i < 100; i++) { // i is already declared once
    }
} 
```

我理解发生这种情况的原因，在[这个答案](https://stackoverflow.com/a/10743168/820750)中有解释，但是有没有办法解决它（除了`i`在方法的开头声明）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T00:15:30.417

这很简单——只是不要在第二个循环中声明它：

```
public function twoLoops(){
    for (var i:int = 0; i < 100; i++) {
    }

    for (i = 0; i < 100; i++) { // i is already declared once
    }
} 
```

这将没有错误 - 正如您的警告告诉您的那样，它已经定义，因此您可以再次使用它，将其设置回 0 以允许循环正确执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T19:23:18.863

如果您坚持按照自己的方式使用循环，请考虑将其包装在一个函数中：

```
public  function twoLoops() {
    for (var  i:int = 0; i < 10; i++) {
    }

    (function(){ 
        for (var i:int = 0; i < 100; i++) { // i is already declared once       
        } 
    })();
} 
```

尽管它不会发出任何警告，但我想知道它真正为您解决了什么目的。

# drupal - 提交按钮仅在从下拉列表中选择后才出现 - drupal 7

> ID：14672290
> 
> 赞同：0
> 
> 时间：2013-02-03T12:08:13.997
> 
> 标签：drupal, drupal-7, drupal-fapi

从选择列表下拉列表中选择后出现提交按钮，

谁能帮我理解为什么它不起作用？

```
$form['user_fields']['optinal_packages'] =  array(
    '#type' => 'select',
    '#title' => t('Optional Packages'),
    '#options' => $packages_array,  
    //'#weight' => 15,
    '#description' => t('Please press the "Push" button to update device package.'),    
    '#default_value' =>  -1,
   );

$form['user_fields']['push'] = array(
    '#type' => 'submit',
    '#value' => t('Push'),
    // '#weight' => 16,
    '#prefix' => '<div id="phone_user_push_package">',
    '#suffix' => '</div>',
    '#states' => array(
        'visible' => array(     // Action to take: Make visible.
        //':input[name="optinal_packages"]' => array('!value' => '-1'),
        'select[name="optinal_packages"]' => array('!value' => '-1'),
        ),
    ),
); 
```

谢谢丹娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:11:23.910

将代码更改为

```
$form['user_fields']['push'] = array(
    '#type' => 'submit',
    '#value' => t('Push'),
    // '#weight' => 16,
    '#prefix' => '<div id="phone_user_push_package">',
    '#suffix' => '</div>',
    '#states' => array(
        'invisible' => array( // edited line
            ':select[name="optinal_packages"]' => array('value' => '-1'), // edited line
        ),
    ),
); 
```

改变`select[name="optinal_packages"]`为`:select[name="optinal_packages"]`. 如果它不起作用，请尝试将选择器更改为 CSS-like `#edit-optinal-packages`。

因此代码将是：

```
'#edit-optinal-packages' => array('value' => '-1'), 
```

# asp.net-mvc - 如何使用 EF 数据库优先实现继承

> ID：14672292
> 
> 赞同：4
> 
> 时间：2013-02-03T12:08:25.670
> 
> 标签：asp.net-mvc, entity-framework, ef-database-first

我有这个简单的课程：

```
CREATE TABLE [dbo].[Movie] (
  [MovieId] INT             IDENTITY (1, 1) NOT NULL,
[Title]   NVARCHAR (200)  NULL,
[Genre]   NVARCHAR (200)  NULL,
[Date]    DATE            NULL,
[Price]   DECIMAL (18, 2) NULL,
CONSTRAINT [PK_dbo.Movies] PRIMARY KEY CLUSTERED ([MovieId] ASC)
); 
```

现在我想实现一个`SpecialMovie`... ，它有一个名为`Special`.

我正在使用数据库优先的方法。

我试图找到一些教程，但没有什么真正有用的。

我有一本 SQL Server 2008 书，它没有提到继承……继承在 SQL 中不是很重要吗？有点奇怪，它没有继承任何东西......

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-02-03T12:21:49.220

在 EF 中实现继承与普通的类继承完全相同，所以在这种情况下：

```
public class Movie
{
public int MovieID {get; set;}
//.....
}

public class SpecialMovie : Movie
{
public int SpecialMovieID {get; set;}
//.....

}

 public class MovieContext : DbContext
    {
        public DbSet<SpecialMovie> SpecialMovies { get; set; }
        public DbSet<Movie> Movies{ get; set; }
    } 
```

请注意，在 SQL Server 等关系数据库中实际上并没有相应的继承结构。因此，EF 将以多种方式实现继承 Table per Hierarchy 可能是性能最高的，但它会对数据进行非规范化，以便 SpecialMovie 和 Movie 类的数据位于同一个表中，并且 EF 添加了一个描述符字段来区分这两个类. EF 还提供每种类型的表格和每种具体类型的表格。这里对所有三个都有很好的描述[http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1 -table-per-hierarchy-tph.aspx](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)。

# android - 如何从 TabWidget 中删除选定的选项卡指示器？

> ID：14672302
> 
> 赞同：32
> 
> 时间：2013-02-03T12:09:31.270
> 
> 标签：android

这是我要删除的内容：

![在此处输入图像描述](../Images/ec8e7e7a43a74a1b9cf5f93cb4373755.png)

如何替换显示当前显示哪个选项卡的指示器以及跨越整个选项卡小部件的蓝线？

要指定：我只想指出选择了哪个选项卡：

*   如果选项卡被选中，tab_button_active.9.png 应该显示为背景
*   如果选项卡未选择，tab_button_inactive.9.png 应显示为背景。

编辑：将 tabStripEnabled 设置为 false 无效。向其添加样式并将“@android:style/Widget.Holo.ActionBar”作为其父级也是不可能的，因为我的目标是 API 级别 7 并且 ActionBar 是在 API 级别 11 中实现的。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-11-16T16:04:47.900

我还有另一个技巧。

```
 TabLayout tabLayout = (TabLayout) fragmentView.findViewById(R.id.tabs);
    tabLayout.setSelectedTabIndicatorHeight(0); 
```

这与 Eleojasmil 的想法基本相同。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2016-01-28T14:06:34.413

这一行在**`app:tabIndicatorHeight="0dp"`**xml 中为我解决了问题

```
 <android.support.design.widget.TabLayout
        android:id="@+id/view_bottom_tabLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        app:tabIndicatorHeight="0dp"             //this line
        app:tabGravity="fill"
        app:tabMode="fixed" /> 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-03-07T00:52:00.303

如果`android:tabStripEnabled="false"`不起作用，那么我也认为调用`setStripEnabled(boolean stripEnabled)`也没有效果。如果所有这些都是真的，那么您的问题可能不在 TabWidget 中。

我建议查看您的标签指示器。试试这些修改。此代码取自具有选项卡的片段。

这是创建选项卡指示器视图的代码。

```
 View indicator = LayoutInflater.from(getActivity()).inflate(R.layout.tab,
(ViewGroup) mRoot.findViewById(android.R.id.tabs), false);

        TabSpec tabSpec = mTabHost.newTabSpec(tag);
        tabSpec.setIndicator(indicator);
        tabSpec.setContent(tabContentId); 
```

您的标签指示器视图可能与此类似。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:layout_weight="1"
    android:background="@drawable/tabselector"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/tab1icon"/>

</LinearLayout> 
```

现在重要的部分是`android:background="@drawable/tabselector"`在 LinearLayout 中。我的看起来像这样。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Non focused states -->
    <item
        android:state_focused="false"
        android:state_selected="false"
        android:state_pressed="false"
        android:drawable="@drawable/tab_unselected_light" />
    <item
        android:state_focused="false"
        android:state_selected="true"
        android:state_pressed="false"
        android:drawable="@drawable/tab_selected_light" />
    <!-- Focused states -->
    <item
        android:state_focused="true"
        android:state_selected="true"
        android:state_pressed="false"
        android:drawable="@drawable/tab_focused_light" />
    <!-- Pressed state -->
    <item
        android:state_pressed="true"
        android:drawable="@drawable/tab_pressed_light" />
</selector> 
```

这个 tabselector.xml 是你将`@drawable/tab_pressed_light`与你的`@drawable/tab_button_active`和交换`@drawable/tab_unselected_light`的地方`@drawable/tab_button_inactive`

请务必检查进入 tabselector.xml 的所有可绘制对象底部没有蓝色条带。当我查看您的图像时，我可以看到该条带上有 5px 的小间隙，这就是让我认为该条带不是来自您的 TabWidget 的原因。希望这可以帮助。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-12-10T10:30:32.383

适用于`TabLayout`：只需使用`app:tabIndicatorColor="@android:color/transparent"`

```
<android.support.design.widget.TabLayout
        android:id="@+id/profile_album_tabs"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:animateLayoutChanges="true"
        android:theme="@style/AppTheme.AppBarOverlay"
        app:tabBackground="@drawable/tab_background"
        app:tabIndicatorColor="@android:color/transparent"
        app:tabPadding="@dimen/common_margin" /> 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-02-12T17:43:19.400

将此添加到您的`TabLayout XML`：

```
app:tabIndicator="@null" 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-11-12T02:44:49.010

有一个答案，您只需将指示器的颜色更改为透明

颜色.xml

```
 <color name="transparent2">#00000000</color> 
```

并将这一行放到你的 tabwidget

```
tabLayout.setSelectedTabIndicatorColor(getResources().getColor(R.color.transparent2)); 
```

或者

```
app:tabIndicatorColor="@color/transparent2" 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-01-18T08:31:36.220

尝试将 Tab 指示器高度设置为零：

```
tabLayout.setSelectedTabIndicatorHeight(0); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-06-14T15:02:14.473

使用`tabLayout.setSelectedTabIndicator(0)`.

`tabLayout.setSelectedTabIndicatorHeight(0)`现在已弃用，`tabLayout.setSelectedTabIndicatorColor(Color.TRANSPARENT)`并且由于它使用透明度，因此性能不佳。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-10-04T06:14:50.877

采用

```
 tabLayout.setSelectedTabIndicator(null); 
```

这会将选定的可绘制指标设置为空。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-02-03T12:13:08.197

为 `android:tabStripEnabled="false"`您的`TabWidget`.

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-04-09T11:25:53.497

我找了半天想把丑陋的全息菜单栏去掉。出于另一个原因意外使用了此代码，感谢上帝将其删除。

```
 for (int i = 0; i < tabHost.getTabWidget().getChildCount(); i++) {          
        tabHost.getTabWidget().getChildAt(i).setBackgroundColor(Color.parseColor("#FF0000")); // unselected
        TextView tv = (TextView)tabhost.getTabWidget().getChildAt(i).findViewById(android.R.id.title); //Unselected Tabs
        tv.setTextColor(Color.parseColor("#ffffff"));
    } 
```

来源：[Android tabhost 更改文字颜色样式](https://stackoverflow.com/questions/22533061/android-tabhost-change-text-color-style)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-05-31T10:47:16.587

您可以简单地在标签布局上使用此方法来隐藏标签指示器。

```
tabLayout.setSelectedTabIndicatorColor(Color.TRANSPARENT); 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-09-28T12:52:27.553

用这个`app:tabIndicator="@null"`

```
<com.google.android.material.tabs.TabLayout
    android:id="@+id/tab_layout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    app:tabGravity="fill"
    app:tabIndicator="@null"
    app:tabMode="fixed" /> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-02-18T06:27:45.827

这是我使用的，因为`tabIndicator.setSelectedTabIndicatorHeight(0);`已弃用

采用 `tabIndicator.setSelectedTabIndicator(0);`

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-03-17T06:10:18.917

为我工作的最佳设置`app:tabIndicatorHeight="0dp"`。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2013-03-01T09:06:22.057

我假设您使用的是 ActionBarSherlock。使用 TabWdiget 的问题在于，它不是 ABS 的一部分，因此对于每个 Android 版本来说，它看起来都是“原生的”。对我来说，使用 ABS 进行选项卡导航的最佳方法是使用 ViewPager 和 ViewPagerIndicator 并设置指示器的样式。缺点是，您的标签必须是片段。如果你需要你的标签成为活动，那么你应该看看 HoloEveryhwhere 的人是否设法添加了 TabWidget。

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2016-09-22T08:00:09.550

```
tabHost.getTabWidget().setStripEnabled(false);
tabHost.getTabWidget().getChildAt(1).setBackgroundColor(getResources().getColor(R.color.tabcolor));
tabHost.getTabWidget().getChildAt(2).setBackgroundColor(getResources().getColor(R.color.tabcolor)); 
```

[更多信息在这里](http://helptodevelopers.blogspot.com/2016/09/how-do-i-remove-selected-tab-indicator.html)

# html - 如何在引导程序中使用带有导航的词缀？

> ID：14672304
> 
> 赞同：0
> 
> 时间：2013-02-03T12:09:37.513
> 
> 标签：html, twitter-bootstrap, menu, nav, affix

我想要一个固定的顶部导航并使用 twitter 词缀。

```
<nav class="navbar">
    <ul id="siteMenu" class="nav">
        <li><a href="#homeSection" class="active">HOME</a></li>
        <li><a href="#aboutSection" class="active">ABOUT</a></li>
        <li><a href="#worksSection" class="active">WORKS</a></li>
                    .
                    .
                    .
    </ul>
</nav> 
```

在此之下，我有 div：

```
<section id="homeSection" class="row">
.
.
.
</section>

<section id="aboutSection" class="row">
.
.
.
</section>

<section id="worksSection" class="row">
.
.
.
</section> 
```

我的目标是在标记的导航中获得正确的元素（类=活动），并在我单击它时滚动到正确的 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:45:35.973

我刚刚通过使用此代码而不是引导词缀来使其工作：

```
$(function () {
    // Cache selectors
    var siteMenu = $("#siteMenu"),
    siteMenuHeight = siteMenu.outerHeight() + 15,
    // All list items
    menuItems = siteMenu.find("a"),
    // Anchors corresponding to menu items
    scrollItems = menuItems.map(function () {
        var item = $($(this).attr("href"));
        if (item.length) { return item; }
    });

    // Bind to scroll
    $(window).scroll(function () {
        // Get container scroll position
        var fromTop = $(this).scrollTop() + siteMenuHeight;

        // Get id of current scroll item
        var cur = scrollItems.map(function () {
            if ($(this).offset().top < fromTop)
                return this;
        });
        // Get the id of the current element
        cur = cur[cur.length - 1];
        var id = cur && cur.length ? cur[0].id : "";
        // Set/remove active class
        menuItems
     .parent().removeClass("active")
     .end().filter("[href=#" + id + "]").parent().addClass("active");
    });

    $('#da-slider').cslider({
        autoplay: true,
        interval: 6000
    });

    $('#siteMenu a').click(function () {
        var div = $(this).attr('href');
        $(div).scrollTo(500);
        return;
    });
}); 
```

希望它会帮助某人:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:03:49.177

我认为您应该为此使用 ScrollSpy：http: [//twitter.github.com/bootstrap/javascript.html#scrollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)

您不需要任何自定义 JS，只需向`body`标签添加一些属性即可。

# android - Andengine屏幕尺寸的更好方法？

> ID：14672310
> 
> 赞同：0
> 
> 时间：2013-02-03T12:10:25.640
> 
> 标签：android, screen, andengine

我了解 Andengine 为我们提供了将场景缩放到用户可能拥有的任何尺寸屏幕的选项。

我的问题是，如果开发更大的分辨率（比如 1280/800）并将其缩小以适应更小的屏幕，或者开发更小的分辨率（比如 800/480 并在更大的屏幕上放大）会更好吗？

我确实尝试通过将其开发为 1280/800 并将其缩小（通过 ratioResolutionPolicy）到 800/480 来在示例游戏中对此进行测试，但结果并不令人满意，尽管调试器上的帧率到处都有卡顿显示60+。是我的编程不好还是与像素的缩小有关，我应该为更小的屏幕开发并放大它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:12:38.073

我想这取决于您使用的图形类型。

例如，假设您想创建复古游戏男孩像素风格的东西，那么使用小图像并针对小分辨率（如 480x320）进行开发会更有意义。像素图形可以放大而不会降低质量，但不能缩小（然后像素松散形式）。

但是如果你想要高分辨率的图形，你最好将整个东西开发成一个大分辨率，然后让 AndEngine 缩小它。

在这两种情况下，图片的质量也取决于`TextureOption`您的质量`TextureAtlases`。

无论如何，我可以想象缩小或放大都不是更有效。缩放由 openGL 完成，应该很快。但是，使用大分辨率的缺点是设备必须在其内存中保存巨大的图像，当然处理大图像总是比处理小图像花费更多的时间。那么也许最好的方法是为中型设备（例如 960x640）开发？

我知道这没有多大帮助，不幸的是，要获得满足您特定要求的最佳结果，需要进行大量尝试和错误。

*   克里斯多夫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:43:22.490

为了在所有类型的 android 设备上取得良好的效果，从我的角度来看，您有两种方法可以遵循。

首先，您必须开发并使用两个图形来处理所有类型的设备。例如，一个分辨率为 1024x600，另一个为 480x320。根据设备当前分辨率，您必须加载特定类型的图形。

其次，您可以选择最适合您并在市场上占有很大份额的任何单一分辨率。仅针对该分辨率开发和使用图形。对于基于纵横比的其他分辨率缩放图形。为此，您必须创建精灵的超类并更改 x,y,height 的值，并根据纵横比计算。

这是我与您分享的经验。如果您有任何疑问，请随时提出。

# python - 正则表达式：字符类中的 \Z

> ID：14672313
> 
> 赞同：1
> 
> 时间：2013-02-03T12:10:44.343
> 
> 标签：python, regex, character-class

正则表达式：

```
((?<=blah)[^@\Z]+) 
```

它应该捕获以字符串或字符串`blah`结尾`@`或结尾的符号符号。`\Z`在字符类中包含正确的技术吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T12:12:39.503

不可以，字符类只能包含文字字符或其他字符类；您的示例匹配任何*不是*a`@`的`\Z`锚点，因为它本身不是字符类，所以会被忽略。请注意，`^`插入符号否定字符组。改用带有`|`“或”符号的组：

```
((?<=blah)(?:[^@]+|\Z)) 
```

我在那里使用了一个非捕获组 ( `(?:...)`) 来对这两个选项进行分组。该组匹配任何*不是* `@`的字符，*或者*它匹配`\Z`字符串结尾的锚点。

# php - 点击事件的javascript

> ID：14672315
> 
> 赞同：-1
> 
> 时间：2013-02-03T12:11:16.433
> 
> 标签：php, javascript

有没有办法使用javascript将变量从一个php页面传递到另一个页面并在不加载页面的情况下获取它的输出？请注意，变量只能使用 javascript 传递。一世

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:45:28.413

如果你真的想避免使用 PHP，你可以尝试 3 种方法：

1.  将数据保存到 cookie。
2.  将数据保存到本地存储。（由于兼容性不可靠）
3.  在窗口之间传递变量。（可能与您的问题不符）

# 1\. 饼干

这是最简单、最可靠的方法。但**请注意 - 用户可以编辑和查看数据**。你应该在谷歌上搜索一些关于这个的文章，tahie 这一篇（[http://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)）让初学者了解这个话题。

# 2.本地存储

某些浏览器可能禁用或根本未实现此实用程序。这样做的好处是，与 cookie 不同，此数据不与 HTTP 请求标头一起发送，因此您可以节省一些流量。再次谷歌。关于这些，我没有什么可以告诉你谷歌不能告诉你的。

# 3\. 窗口间传递变量

这仅适用于非常特殊的情况 - 当您有两个窗口并且其中一个通过`window.open()`函数打开时。此函数返回新的窗口句柄。

```
var child_window = window.open(/*params*/);
child_window.document.title = "Hello world!"; 
```

但是您仍然应该考虑使用 AJAX 将变量保存在服务器上并从此处检索它们。

# sql - 在 SQL Server 2008 中高效编写此公式

> ID：14672316
> 
> 赞同：1
> 
> 时间：2013-02-03T12:11:21.690
> 
> 标签：sql, sql-server-2008, tsql, rdbms

假设我有表，这些是它的示例行

```
ChangeID    Change
   1         102
   2         105
   3         107
   4         110 
```

变化公式为

```
(CurrentRowChange - PreviousRowChange) / PreviousRowChange 
```

因此：

*   第一行应该是`0`
*   第二行应该是`(105 - 102) / 102`

等等。如何在 SQL 中高效地编写此公式？

我知道我可以编写一个标量函数，然后执行 RowNumber 和 order By ChangeID 并获取行号的 Change 值，然后找到当前行号 - 1 然后获取该行的 Change 值并进行除法。

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T12:21:21.753

试试这个，假设`CHANGEID`可以删除它是`IDENTITY`.

```
WITH changeList
AS
(
    SELECT ChangeID, [Change],
           (ROW_NUMBER() OVER (ORDER BY ChangeID ASC)) -1 AS rn
    FROM   TableName
),
normalList
AS
(
    SELECT ChangeID, [Change],
           (ROW_NUMBER() OVER (ORDER BY ChangeID ASC)) AS rn
    FROM   TableName
)
SELECT a.ChangeID, a.[Change], 
       COALESCE((a.Change - b.change) / (b.change * 1.0),0) result
FROM   changeList a
       LEFT JOIN normalList b
          ON a.rn = b.rn 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/78f6e/13)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T12:23:18.343

```
select  cur.*
,       case
        when prev.ChangeId is null then 0
        else 1.0 * (cur.Change - prev.Change) / prev.Change
        end
from    Table1 cur
left join
        Table1 prev
on      cur.ChangeId = prev.ChangeId + 1 
```

[SQL 小提琴示例。](http://sqlfiddle.com/#!3/59faa/8/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T12:29:42.010

虽然 ChangeID 在示例中是连续的，但我不认为它们总是如此。所以我会做这样的事情：

```
 with RankedIDs as
 select ChangeID
 , Change
 , rank() over
 (partition by ChangeID order by ChangeId) rank
 where something maybe ;

 select case
 when r1.rank = 1 then 0
 else (r1.change - r2.change) / r2.change
 end SomeName
 from RankedIds r1 join RankedIds r2 on r1.rank = r2.rank + 1 
```

这是基本的想法。您可能想要添加除以零保护

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T17:14:52.863

```
select T1.ChangeID,
       (1.0 * T1.Change / T2.Change) - 1 as Result
from TableName as T1
  outer apply (
              select top(1) T.Change
              from TableName as T
              where T.ChangeID < T1.ChangeID
              order by T.ChangeID desc
              ) as T2 
```

# camera - Three.js：地形上的相机碰撞

> ID：14672321
> 
> 赞同：3
> 
> 时间：2013-02-03T12:12:01.080
> 
> 标签：camera, three.js, collision, terrain

我应该如何在three.js中将相机碰撞添加到地形。

地形来自“mrdoob's three.js”示例，是随机生成的，我目前正在将其转换为高度图。

我正在考虑按如下方式实施碰撞：

*   在相机周围创建一个“盒子”对象
*   如果盒子对象没有接触到地形，请向下移动相机。
*   如果盒子对象正在接触地形，请保持相机的 Y 轴。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T19:57:34.210

理论是您从您所在的位置（相机位置）直接向下发送射线。您找到交点并根据距离决定要做什么。实施明智的我不能帮助你，但 THREE.Ray 应该帮助你。

# java - Android - 解析日期数组

> ID：14672324
> 
> 赞同：1
> 
> 时间：2013-02-03T12:12:20.643
> 
> 标签：java, android, arrays, parsing, date

如何解析日期字符串数组？

```
String startTime[] = stdata.toArray(new String[stdata.size()]);
    SimpleDateFormat inputFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm");
    SimpleDateFormat outputFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm");

        for(int ir=0;ir<startTime.length;ir++){
        try {
            parsed2d[ir] = inputFormat.parse(startTime[ir]);
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        } 
```

使用此代码，我得到： ArrayIndexOutOfBoundsException

编辑：

@Juvanis 你是对的！

最终代码工作：

```
String startTime[] = stdata.toArray(new String[stdata.size()]);
    SimpleDateFormat inputFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm");
    SimpleDateFormat outputFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm");

        for(int ir=0;ir<startTime.length;ir++){
        try {
            Date parsed2d[] = new Date[startTime.length];
            parsed2d[ir] = inputFormat.parse(startTime[ir]);
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        } 
```

# excel - 动态 Excel 减法

> ID：14672329
> 
> 赞同：0
> 
> 时间：2013-02-03T12:12:54.483
> 
> 标签：excel, dynamic, subtraction

假设我的单元格 A1-A10 填充了数字。我在单元格 B1 中的初始公式是 =A1-A6。但是，我想删除单元格 A3（如果可能，保持删除后的内容可见），我希望 B1 中的公式能够识别该更改，然后自动调整为 =A1-A7 （这个想法是我希望 A1 减去它下面的单元格 5“未删除”单元格中的数字）。然后，如果我删除单元格 A5，我希望公式将自身调整为 =A1-A8，依此类推。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:57:26.890

（**编辑＃1：**误读输入，抱歉）

有点简单，但会完成这项工作：键入`=A1-INDIRECT("A"&SMALL(IF(A:A<>"",ROW(A:A),""),6))`并按`CTRL`+ `SHIFT`+`ENTER`而不是通常的`ENTER`- 这将定义一个 ARRAY 公式并在`{}`其周围产生括号（但不要手动键入它们！）。

为了加快计算，您可以将 A:A 替换为任何有限范围。

示例文件（生成的公式标记为黄色）：[https ://www.dropbox.com/s/sy7zkg71xtfgib9/Subtract5th.xlsx](https://www.dropbox.com/s/sy7zkg71xtfgib9/Subtract5th.xlsx)

（**编辑＃2：**误读“删除”，对不起）

默认 Excel 函数可能无法读取字体样式（以及类似的单元格属性），这就是为什么您需要添加名为的 UDF `StrikeOut`：

1.  按`ALT`- `F11`- 这将打开 VBA 编辑器。
2.  插入新模块：`Insert > Module`.
3.  将代码粘贴到添加的模块：

    ```
    Function StrikeOut(R As Range) As Long
    Dim c As Range
    StrikeOut = 0
    For Each c In R.Cells
        If c.Font.Strikethrough = True Then StrikeOut = StrikeOut + 1
    Next
    End Function 
    ```

4.  将公式添加到 B1：`=A1-INDIRECT("A"&(6+StrikeOut(A2:A10)))`

5.  将删除线字体设置为`A1:A10`.
6.  不幸的是，单元格格式更改不会触发任何更改事件，因此您需要按下`F9`或更改工作表上的任何单元格值以重新计算并因此更新结果`B1`。

共享示例文件：[https ://www.dropbox.com/s/n9o7tn3ks3x8nza/StrikeOut.xlsm](https://www.dropbox.com/s/n9o7tn3ks3x8nza/StrikeOut.xlsm)

PS至少对我来说非常有用）））

# c# - 如何使用 AJAX 在 ASP.net MVC4 站点上显示日志数据

> ID：14672334
> 
> 赞同：1
> 
> 时间：2013-02-03T12:13:19.833
> 
> 标签：c#, jquery, asp.net, ajax, asp.net-mvc-4

我是网页设计的新手（使用 ASP.net MVC4/Razor），有时互联网上的信息太多了，我已经用谷歌搜索了 2 个小时，我为我的问题找到了很多不同的答案，但我不知道哪一个是最好的，所以我会在这里问它：

我有一个数据库（首先是 EF 代码），它有一个从不同位置插入的日志表。但是我想制作一个页面，在该页面上它应该始终显示最后 20 行。

于是我google了一下，发现：

*   微软的ajax？

*   jQuery 阿贾克斯？

*   不显眼的阿贾克斯？

*   SignalR 与 Jquery？

*   网络套接字？

*   将 ajax 与模板一起使用？

我敢肯定，会有一些选项比其他选项更好，或者可能是我尚未提到的选项。有人可以告诉我应该深入哪个方向来获得我想要的东西。（我不想得到所有的代码，我只需要一些指导，因为我在太多的选项中有点迷失了+-）

**编辑**：

我会指定更多，我知道我必须创建一个 API 来获取 JSON 之类的东西

```
public JsonResult GetLast20LogRows()
{
  ...
  return listoflast20rows; //(as List<DatabaseLog>()) 
} 
```

我只是不知道`HTML/Javascript/ajax`标准以及如何让它刷新 HTML 而无需刷新整个页面。（Ajax）

**编辑2：**

服务器端代码：

**`ChatBotLog.cs`（EF代码优先）：**

```
 public class ChatBotLog
    {
        [Key]
        public int Id { get; set; }
        public DateTime? Date { get; set; }
        public ServerRegion Region { get; set; }
        public string Text { get; set; }
    } 
```

现在我想要一个 .cshtml（剃须刀页面）来获取显示最后 20 行的方法，我将让该方法快速获取最后 20 行：

```
public JsonResult GetLastLogRows()
{
     using (var db = new MyDb())
     {
         var listlog = db.ChatBotLogs.OrderByDescending(x => x.Date).Take(20);
         return Json(listlog);
     }
} 
```

我认为这是我应该根据我所阅读的内容制作的方法，无论如何请告诉我如果我错了，我还在寻找一种在视图上显示它的方法，我应该使用什么类型的ajax，它没有必须是“实时直播”，但喜欢每 5 秒刷新一次数据。

希望你现在能更好地理解，我被困在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:43:50.723

我认为您的问题可以通过一种如此简单的方法来解决：

1- 创建一个 jQuery 函数，该函数将从您的 Web 服务器中提取数据示例：

```
function GetLatestLogEntries()
{
    var latestLogEntries;

    $.ajax({
                 type: "GET",
                 url: "/{RootFolder}/GetLast20LogRows",                   
                 dataType: "json",
                 success: function (e) {
                     latestLogENtries = e.data;  

                     // here you will need to format the log entries according to your needs, for example
                     $("#divLogContainer").html(latestLogENtries);

                 }
          });
    } 
```

2-将以下代码放入您的脚本标签中，以确保在加载所有页面元素后执行它

```
$(function(){
       setInterval(GetLatestLogEntries(),5000);
}) 
```

3-微笑:)

这将每 5 秒执行一次**GetLatestLogEntries**函数，您的页面将被最新的 20 个条目更新

如果您需要进一步的解释，请随时评论此答案

希望这可以帮助 ：）

# javascript - 谷歌电子表格字符串比较

> ID：14672335
> 
> 赞同：0
> 
> 时间：2013-02-03T12:13:28.557
> 
> 标签：javascript, google-apps-script

我用过：

```
SpreadsheetApp.getActiveSheet().getRange(... some Range ...).getValues(); 
```

将电子表格单元格中的字符串存储到数组中。然后将字符串与其他字符串进行比较，但即使值相同，比较（使用 ==）也总是失败。

```
Browser.msgBox("is '"+topPlayerNames[j]+"' == '"+name+"'? "+(topPlayerNames[j] == name));

// displays:  

is 'Data' == 'Data'? false 
```

为什么javascript比较失败？单元格值中是否存在破坏比较的隐藏格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:52:18.727

由于 getRange() 会给你一个二维数组，通过解释它们就像

```
var values = SpreadsheetApp.getActiveSheet().getRange(... some Range ...).getValues();
Browser.msgBox(values); 
```

只是以您预期的方式输出数据，并且彼此完全不匹配。不匹配的原因是您的变量容器保留

`values = [['a','b',...],['d','f',....]]`. 所以当你要求输出数据时它会输出数据。但是对比的时候，

`Does [['a','b',...]] == 'a','b',... ?? The answer is it is not.`

因此，您需要从数组中取出数据以与其他人进行比较。在这种情况下，使用 values[0][0] 获取“a”（在我的示例中）或获取“d”、values[1][0] .... 等等。您知道元素编号在 javascript 数组中以 0 开头。:)

现在你可以比较它们了。所以 values[0][0] == 'a' 将输出 TRUE （在我的例子中）

但是你没有提到topPlayerNames[j]是什么，如果它也像上面的值，那么你也需要按照解释的方式考虑它。

（您的问题变量有限。所以我在解释时需要写更多。下次请给出一些带有相应变量的解释问题。使用短变量进行长语句。这将有助于以简单的方式回答。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:44:53.843

请参阅[在 JavaScript 中检查字符串相等性的正确方法是什么？](https://stackoverflow.com/questions/3586775/javascript-string-equality-whats-the-correct-way)

我会使用 topPlayerNames[j].equals(name)

我从不相信 == 带有字符串，因为它经常会导致错误。

# mysql - mysql解释输出的优化

> ID：14672338
> 
> 赞同：0
> 
> 时间：2013-02-03T12:13:52.980
> 
> 标签：mysql, sql

我刚刚运行 mysql explain 来检查一个查询，并惊讶地发现它必须检查超过 250000 条记录才能对结果进行排序，但是我有 where 子句的索引以及 mysql explain 给出的任何内容，我完全同意这么多新行已经添加所以如何解决这个问题.mysql表结构是

```
 tableA is a forum where users can post the content 

  id         userid       created       title

  1          3            12232         xyz
  2          etc............... 
```

我的mysql查询是

```
 explain SELECT * from tableA   where userid='2' order by created desc limit 3 
```

这个解释查询的输出是

```
 id    select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
  1     SIMPLE  tableA  ref     userid  userid  4   const   275216  Using where; Using temporary; Using filesort 
```

我担心的是如何将其减少到 3-4，因为我只对显示三个结果感兴趣，但 mysql 在显示输出之前正在搜索 275216 条记录。由于在用户 ID 2 在论坛上发布后创建了 275216 条记录，但是告诉 mysql 只查找特定数据的解决方案是什么，以便它可以从非常小的行集中搜索结果我希望最多 20-30 行 mysql 应该搜索到服务器 3 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:20:49.923

尝试这个：：

```
SELECT * from tableA  FORCE INDEX (userid) where userid=2 order by created desc limit 3 
```

# django - Django：在模型中创建模型实例

> ID：14672342
> 
> 赞同：0
> 
> 时间：2013-02-03T12:14:30.597
> 
> 标签：django, django-models

我还有另一个可能非常基本的 Django 问题。我正在为我的课程编写一个数据库应用程序，我希望能够从应用程序中设置当前年份。这背后的想法是，当所有的标记等完成后，我可以手动切换到下一学年。然后，切换当前年份的功能也应该做其他事情 - 让学生参加新的默认课程等。

所以我创建了一个名为 MetaData 的模型：

```
class MetaData(models.Model):
    data_id = models.IntegerField(default = 1, unique = True)
    current_year = models.IntegerField(choices=ACADEMIC_YEARS) 
```

如果我可以在其他模型中访问 c​​urrent_year 那就太好了，例如当我想输入新课程/学生时将其设置为默认值。我试过这个：

```
class Course(models.Model):
    try:
        meta = MetaData.objects.get(data_id=1)
        current_year = meta.current_year
    except MetaData.DoesNotExist:
        current_year = 2010
    year = models.IntegerField(choices=ACADEMIC_YEARS, default=current_year) 
```

不幸的是，当我第一次运行 syncdb 时，我得到了错误“没有这样的表：database_metadata”——我猜是因为 syncdb 在测试代码时没有创建表。

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:19:24.323

这听起来像您需要使用该[`ForeignKey`](https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey)字段来链接您的模型。

```
class MetaData(models.Model):
    current_year = models.IntegerField(choices=ACADEMIC_YEARS)

class Course(models.Model):
    year = models.ForeignKey(MetaData, default=this_year)

    def this_year(self):
        return MetaData.objects.get(current_year=datetime.now().year) 
```

为了设置默认年份，我`this_year`在模型中添加了一个函数`MetaData`。`Course`模型年份属性将在设置默认年份时调用它。

`DateField`话虽如此，如果您将 a用于简单的日期，它会简单得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T16:11:30.913

要么把常数放在你的代码中（如果你可以硬编码计算学年的逻辑。或者总是记得手动更改它，这听起来不错，因为你已经硬编码了`ACADEMIC_YEARS`），或者像 danodonovan 建议的那样在 DB 中。或者直接模拟学年，不存储常数`MetaData`

```
from django.core.exceptions import ValidationError

class AcademicYear(models.Model):
    start = models.DateField() # or simply year
    end = models.DateField()
    is_current = models.BooleanField()

    class Meta:
        ordering = ('-is_current', 'start')

    def clean(self): # only allow at most one current year
        if self.is_current and \ 
           self.__class__.objects.exclude(pk=self.pk).filter(is_current=True).exists():
             raise ValidationError('Found another `current` academic year.'

    def __unicode__(self):
        return 'blahblah'

# then in Course
class Course(models.Model):
    academic_year = models.ForeignKey(AcademicYear) 
```

因此，在 Admin 中，您可以轻松升级`AcademicYear`s 并将它们显示为`Course`.

如果您仍想使用`MetaData`，只需将 更改`current_year`为函数：

```
def get_current_year():
    try:
        return MetaData.objects.get(data_id=1).current_year
    except MetaData.DoesNotExist:
        return 2010

class Course(models.Model):
    year = models.IntegerField(choices=ACADEMIC_YEARS, default=get_current_year) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T08:48:46.687

```
class Boat_Owner(models.Model):
      username = models.CharField(max_length=200)
      password = models.CharField(max_length=200)
      name = models.CharField(max_length=200,unique=True,
      verbose_name="Boat Owner Name")
      address = models.CharField(max_length=200)
      phone = models.CharField(max_length=200)
      email = models.EmailField('email address',
      unique=True, db_index=True)
      avatar = models.ImageField('profile picture',     
      upload_to='static/media/images/avatars/',
      null=True, blank=True)
      def set_avatar(self):
          self.has_picture = True
      def __str__(self):
          return u'%s %s %s %s %s %s' % (self.id,self.name,self.username,self.password,self.address,self.email)
     class Meta:
          verbose_name = "Boat Owner"
          verbose_name_plural = "Boat Owner" 
```

# ruby-on-rails - capybara 检查表列是否具有某些值

> ID：14672346
> 
> 赞同：3
> 
> 时间：2013-02-03T12:14:44.683
> 
> 标签：ruby-on-rails, testing, cucumber, capybara, bdd

我是 Cucumber 和 Capybara 的新手，我有一张表，我需要在其中检查特定列是否具有某些价值。

我的步骤是这样的：（在伪代码中）我应该看到一些有价值的东西：A，B，C

然后我需要查询具有特定 id 的表，并检查第二列的所有行是否都具有步骤中传递的值。

在这个例子中，这应该通过测试

```
some value | A
some value | B
some value | A
some value | A
some value | C 
```

但这不会通过：

```
some value | A
some value | D 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-03T12:58:59.957

你可以这样做：

```
Then /^I should see that all values in second column are either A, B or C$/ do
  all('#table_id tr > td:nth-child(2)').each do |td|
    %w{A B C}.should include td.text
  end
end 
```

参数化代码（我的意思是 A、B、C）留给读者作为练习。

# java - MongoDB中的聚合

> ID：14672347
> 
> 赞同：0
> 
> 时间：2013-02-03T12:14:46.603
> 
> 标签：java, spring, mongodb, spring-data

我使用 SpringData+ mongoDB。是否可以在 SporingData 中做到这一点（我知道，如何在 shell 中做到这一点）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:54:37.177

看起来 SpringData 对聚合框架的替代方案是[group operation](http://static.springsource.org/spring-data/mongodb/docs/current/reference/html/#mongo.group)。您可以将组操作作为[MongoTemplate](http://static.springsource.org/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/core/MongoTemplate.html)类的方法执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T10:21:18.717

采用

```
mongoOps.getCollection("yourCollection").aggregate( ... ) 
```

由于尚不支持聚合框架。

# list - Lua 语言：如何使用类似于 python 列表推导的东西

> ID：14672350
> 
> 赞同：8
> 
> 时间：2013-02-03T12:15:03.210
> 
> 标签：list, functional-programming, lua

我是 Lua 的新手，我想知道是否有一些紧凑的方法可以像我们在 Python 中那样在 Lua 中定义 a `list`、 a ：`metatable`

```
lis = [i for i in set if i>0] 
```

任何例子将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:27:02.423

Lua 没有原生列表

然而，正如@joachim 指出的那样，您可以使用一些技巧来实现它。

```
local comp = require 'comprehension' . new()
comp 'table(v,k for k,v in pairs(_1))' {[3]=5, [5]=7} 
```

它会产生：

```
{[5]=3, [7]=5} 
```

请注意，`comprehension`这在普通的 5.2.x Lua 中不起作用。它需要 Penlight Lua 库：[http ://stevedonovan.github.com/Penlight/api/index.html](http://stevedonovan.github.com/Penlight/api/index.html)

您还可以使用[MetaLua](http://lua-users.org/wiki/MetaLua)或[LuaMacros](http://lua-users.org/wiki/LuaMacros)

# asp.net-mvc-3 - MVC 3 - 多个控制器或具有多个操作和路由的控制器

> ID：14672352
> 
> 赞同：0
> 
> 时间：2013-02-03T12:15:06.970
> 
> 标签：asp.net-mvc-3

我正在整理一个足够简单的宣传册网站，并决定使用 MVC3 作为学习机会。网站某些部分的内容将存储在数据库中，管理员可以通过简单的 GUI 对其进行更新。我决定不再使用预构建的 CMS 来学习如何用这种语言进行数据库操作，这对我来说是新的。

我想要一个非常简单的 URL 结构：

```
foo.com (home)
foo.com/bio
foo.com/news
foo.com/about
foo.com/events 
```

ETC

实现这一点的直接方法是为每个页面设置一个控制器，并使用`Index()`每个控制器的 ActionResult。

是否可以/最佳实践为网站的每个页面设置一个控制器？新闻和事件不会有子页面，但可能有分页，URL 看起来像

```
foo.com/news/
foo.com/news/page2
foo.com/news/page3
foo.com/news/page4 
```

如果我有一个控制器，并使用多个操作，默认情况下的 URL 看起来像

```
foo.com (home)
foo.com/home/bio
foo.com/home/news
foo.com/home/about
foo.com/home/events 
```

然后让我更新路由以实现我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:25:51.877

关于控制器的使用，我认为最佳实践是为动作域或内容域使用特定的控制器，而不是根据主菜单的层次结构。

例如：

您的主页：

```
foo.com 
```

控制器 -> 主页

方法 -> 索引

参数 -> 空

```
foo.com/news/2 
```

控制器 -> 新闻

方法 -> 索引

参数 -> 2

但是 Home 和 News 是两个不同的“平等”控制器，只是碰巧用户与之交互的第一个控制器是 Home 控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T20:43:23.587

如果您想使用单个控制器，您可以尝试，

```
routes.MapRoute(
    name: "Default",
    url: "{action}/{page}",
    defaults: new { controller = "Home", action = "Index", page = UrlParameter.Optional },
    constraints: new { page = new PagingConstraint() }
); 
```

作为路线定义。并且只允许对“新闻”和“事件”进行分页，使用自定义路由约束，

```
public class PagingConstraint : IRouteConstraint
{
    private static readonly string[] PagingEnabledActions = new string[] { "news", "events" };

    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        return string.IsNullOrEmpty(values[parameterName].ToString()) || new Regex(@"^[Pp][Aa][Gg][Ee][0-9]+$", RegexOptions.Compiled).IsMatch(values[parameterName].ToString())
            && PagingEnabledActions.Contains(values["action"].ToString().ToLower());
    }
} 
```

希望这可以帮助。

# c - BorlandC rand() 的实现

> ID：14672358
> 
> 赞同：3
> 
> 时间：2013-02-03T12:15:30.730
> 
> 标签：c, random, borland-c++

`rand()`有人知道 Borland C++函数的确切实现吗？

我尝试了以下方法，但结果与我使用真正的 TurboC 4.5 得到的结果不同。自然地，我尝试了不同变体的代码，但没有成功。

```
unsigned int seed = 1;

void srand(unsigned int newSeed) {
    seed = newSeed;
}

#define MAX_RAND 0x7FFF;

unsigned int lrand()
{
    int a = 22695477;
    int c = 1;
    seed = (a * seed + c);
    return seed;
}

unsigned int rand() {
     return (lrand() >> 16) & MAX_RAND;
} 
```

[http://en.wikipedia.org/wiki/Linear_congruential_generator](http://en.wikipedia.org/wiki/Linear_congruential_generator)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T13:29:57.243

这是我所拥有的，不确定您的编译器版本是否具有相同的`rand()`and实现`srand()`：

```
#include <stdlib.h>
#include <stdio.h>
#include <time.h>

/*
  Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland

  srand:
    push      ebp
    mov       ebp, esp
    mov       eax, [ebp + 8]
    mov       [seed], eax
    xor       edx, edx
    mov       [seed + 4], edx ; seed high ?
    call      rand
    pop       ebp
    ret

  rand:
    imul      eax, dword [seed], 015A4E35H
    inc       eax
    mov       [seed], eax
    shr       eax, 10H
    and       eax, 7FFFH
    ret

  seed    dd  015A4E36H, 0
*/

unsigned int myseed = 0x015A4E36;

int myrand(void)
{
  unsigned int t = myseed * 0x015A4E35 + 1;
  myseed = t;
  return (int)(t >> 16) & 0x7FFF;
}

void mysrand(unsigned int seed)
{
  myseed = seed;
  myrand();
}

int main(void)
{
  unsigned t = time(NULL);

  printf("%d %d\n", rand(), myrand());
  printf("%d %d\n", rand(), myrand());
  printf("%d %d\n", rand(), myrand());
  printf("%d %d\n", rand(), myrand());

  srand(t);
  mysrand(t);

  printf("%d %d\n", rand(), myrand());
  printf("%d %d\n", rand(), myrand());
  printf("%d %d\n", rand(), myrand());
  printf("%d %d\n", rand(), myrand());

  return 0;
} 
```

输出：

```
130 130
10982 10982
1090 1090
11656 11656
23367 23367
13875 13875
12650 12650
13257 13257 
```

# python - 在 Python 中卸载未使用的模块（一个非常具体的案例）

> ID：14672360
> 
> 赞同：1
> 
> 时间：2013-02-03T12:15:53.350
> 
> 标签：python, module

首先，我必须告诉你，我已经看过这个[错误](http://bugs.python.org/issue9072) ，并且我知道该功能（通常）在很长一段时间内是不可能的。但是，我有一个非常具体的用例。因此，我将尝试描述我的用例，并征求建议。

我正在编写一个从解释器运行的交互式 python 应用程序。因此，用户在导入模块时可能会犯一两个错误，如果我可以为用户提供删除模块的方法（一旦他导入它），我希望它。

因此，对已经合并到其他对象中的模块的引用的问题之一就消失了。有一次，我确定模块根本没有被使用，我该怎么做才能删除它？它在技术上仍然可行吗？

我在想，如果我可以创建一个函数，在导入时手动删除模块创建的每个对象/函数，那么我想要的可能会实现。这是真的？

IPython 对其扩展进行了[类似的操作](http://ipython.org/ipython-doc/dev/api/generated/IPython.core.extensions.html#module-IPython.core.extensions)。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T12:18:20.847

模块只是一个命名空间，一个对象，存储在`sys.modules`映射中。

如果没有其他对属于该模块的任何内容的引用，您可以将其从`sys.modules`映射中删除以再次删除它：

```
>>> import timeit
>>> import sys
>>> del timeit  # remove local reference to the timeit module
>>> del sys.modules['timeit']  # remove module 
```

# grails - 安装jasper插件后运行时出错

> ID：14672361
> 
> 赞同：0
> 
> 时间：2013-02-03T12:15:58.310
> 
> 标签：grails, jasper-reports, jira, jasper-plugin

我有一个问题，当我安装 grails jasper 时，我收到了这个错误：

错误 错误运行脚本 run-app -verbose：加载程序约束违规：加载程序（先前为名称为“org/w3c/dom/TypeInfo”的不同类型启动加载的实例

这已经在 jira 中，但仍未解决。请问有人知道怎么做吗？

[http://jira.grails.org/browse/GPJASPER-50](http://jira.grails.org/browse/GPJASPER-50)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T21:47:19.430

看看[http://jira.grails.org/browse/GPEXPORT-18](http://jira.grails.org/browse/GPEXPORT-18)似乎是同样的情况。您可能需要从 jasper 插件中排除 xmlbeans：

```
plugins {
    compile(":jasper:1.6.1") {
        excludes "xmlbeans "
    }
} 
```

# vba - 如何在特定范围内找到特定值

> ID：14672363
> 
> 赞同：0
> 
> 时间：2013-02-03T12:16:09.413
> 
> 标签：vba, excel

这是工作表的一个示例，我在其中尝试使用 vba 创建一个宏。

1.  在第一张表中，D3 中的 NAME 有一个值，即 25，它可以更改，但只能是数字。
2.  在第二张表中，有表。其中 b1、b2、b3、b4 到 b13 是从 1 到 13 的名称（变量）值（如表 d3 中的不同值）。在 A1 到 a13 中，有序列号。从 1 到 13。
3.  在第三张表中，有表格。其中 b1、b2、b3、b4 到 b13 是从 14 到 26 的名称（变量）值（如表 d3 中的不同值）。在 A1 到 a13 中，有序列号。从 1 到 13。

所以，我希望宏应该检查所有工作表中的工作表 1 d3 值，如果找到它将检查序列号。反对它，把没有。在 E6 归档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:50:01.583

抱歉，我误解了您的问题，但听起来 vlookup 可能会解决问题，而不是需要编写 VBA 并使用 Find 方法。

如果将第二张和第三张纸组合在一起，则 A 列包含 D3 中 NAME 的可能值，以及 B 列中的序列号，如下所示。

```
NAME | Serial
-----|-------
1    | qwerty
2    | bob
...  | ... 
```

然后，您可以在 E6 中使用如下所示的 LOOKUP 查询。

```
=VLOOKUP($D$6,Sheet2!A:B,2,FALSE) 
```

希望这可以帮助。

# c# - 如何更改#region后面的“名称”变量的颜色

> ID：14672364
> 
> 赞同：18
> 
> 时间：2013-02-03T12:16:12.203
> 
> 标签：c#, visual-studio-2012

我四处搜索，但在VS2012中的#region之后找不到更改“名称”颜色的选项。

例如，如果我有以下代码：

```
#region Test some code

CallSomeCode();

#endregion 
```

如何更改颜色`Test some code`？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2017-01-16T17:20:56.450

在查看了互联网上的这篇文章和其他帖子之后，这对我来说在 VS 2015 中是有效的：

#region 和 #endregion 关键字：**预处理器关键字**[立即应用]

#region 关键字后的文本：**预处理器文本**[立即应用]

折叠区域：**折叠文本 (Collapsed)** [必须重新启动 Visual Studio]

[![在此处输入图像描述](../Images/a3f8511f19fd38a7c336479b6abd90b6.png)](https://i.stack.imgur.com/RA368.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-20T12:53:42.993

在 VS 2012 中，以下内容对我有用：

*   要更改#region / #endregion 的颜色 - 设置“预处理器关键字”
*   要在折叠时更改#region 之后的文本 - 设置“折叠文本（折叠）”
*   要在扩展时更改文本 - 设置“纯文本”，但要注意这也会改变；（ [ ETC

可能需要重启VS才能生效

*我个人希望有两种类型的注释——一种用于禁用代码，一种用于解释性注释。它们是两个非常不同的东西，但在大多数语言中通常是相同的*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-03T14:36:07.780

在菜单中`Tools`选择`Option`然后`Environment``Fonts and Colors`

在显示项目列表中选择`Collapsible tex`t 并更改它的颜色。

**已编辑**

您可以更改`#region`from的颜色，`Tools>Options>Environment>Fonts and Colors change the Preprocessor Keyword`但不能更改前面的文本颜色`#region`

# sql - SQL-如何在表中找到不同的案例

> ID：14672366
> 
> 赞同：1
> 
> 时间：2013-02-03T12:16:20.067
> 
> 标签：sql

我有一张看起来像这样的表：

国家 + form_ID + Original_form_Id + 目录

```
country  original_form   catalog form_id
1        6                  42           6
1        7                  368           7
1        69                  722         69
1        69                 1837         697
1        659                  2           659
1        666                 2           666 
```

original_form_id 和form id 的点：除了国家+original_form-id 去不同目录的情况外，它总是相等的，在这行中的含义：

```
country  original_form   catalog form_id
1        69                  722         69
1        69                 1837         697 
```

我需要从中创建 3 个表。一张表用于所有行 1:1（country+original_form 到目录）、第二个 N:1 和第三个 1:N 案例。意义：

**第一桌1:1**

```
country  original_form   catalog
1        6      42
1        7      368 
```

**第二表1：N**

```
country  original_form catalog
1        69      722
1        69     1837 
```

**第三桌N:1**

```
country  original_form   catalog
1        659      2
1        666     2 
```

我使用下面的答案实现它，但有重复：

```
INSERT INTO Mapping_1ToN
(SELECT  ot1.Country_id, ot1.original_form_id, ot1.catalog_id, ot1.Local_id
FROM    mappingtable ot1
WHERE   EXISTS -- Multiple catalogs for same country+form
        (
        SELECT  *
        FROM    mappingtable ot2
        WHERE   ot1.country_id = ot2.country_id
                AND ot1.original_form_id = ot2.original_form_id
                AND ot1.form_id <> ot2.form_id
                AND ot1.catalog_id <> ot2.catalog_id
        ));

INSERT  INTO Mapping_NTo1
(SELECT  ot1.Country_id, ot1.original_form_id, ot1.catalog_id, ot1.Local_id
FROM    mappingtable ot1
WHERE   EXISTS -- Multiple forms for same catalog
        (
        SELECT  *
        FROM    mappingtable ot2
        WHERE   ot1.country_id = ot2.country_id
                AND ot1.original_form_id <> ot2.original_form_id
                AND ot1.catalog_id = ot2.catalog_id
        ));

INSERT  INTO Mapping_1To1
(SELECT  ot1.Country_id, ot1.original_form_id, ot1.catalog_id, ot1.Local_id
FROM    mappingtable ot1
WHERE   NOT EXISTS -- form+catalog unique per country
        (
        SELECT  ot2.Country_id, ot2.original_form_id, ot2.catalog_id, ot2.Local_id
        FROM    mappingtable ot2
        WHERE   ot1.country_id = ot2.country_id
                AND (
                    (ot1.original_form_id = ot2.original_form_id AND ot1.catalog_id <> ot2.catalog_id AND ot1.form_id = ot2.form_id)
                    OR
                    (ot1.original_form_id <> ot2.original_form_id AND ot1.catalog_id = ot2.catalog_id)
                )
        )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:19:38.913

第一张表：

```
insert  Table1
select  *
from    OriginalTable ot1
where   not exists -- form+catalog unique per country
        (
        select  *
        from    OriginalTable ot2
        where   ot1.country = ot2.country
                and (
                    (ot1.form = ot2.form and ot1.catalog <> ot2.catalog)
                    or
                    (ot1.form <> ot2.form and ot1.catalog = ot2.catalog)
                )
        ) 
```

第二张表：

```
insert  Table2
select  ot1.*
from    OriginalTable ot1
where   exists -- Multiple catalogs for same country+form
        (
        select  *
        from    OriginalTable ot2
        where   ot1.country = ot2.country
                and ot1.form = ot2.form
                and ot1.catalog <> ot2.catalog
        ) 
```

第三张表：

```
insert  Table3
select  ot1.*
from    OriginalTable ot1
where   exists -- Multiple forms for same country+catalog
        (
        select  *
        from    OriginalTable ot2
        where   ot1.country = ot2.country
                and ot1.form <> ot2.form
                and ot1.catalog = ot2.catalog
        ) 
```

要查找最终会出现在 Table2 和 Table3 中的行，请运行：

```
select  *
from    OriginalTable ot1
where   exists
        (
        select  *
        from    OriginalTable ot2
        where   ot1.country = ot2.country
                and ot1.form <> ot2.form
                and ot1.catalog = ot2.catalog
        )
        and exists
        (
        select  *
        from    OriginalTable ot2
        where   ot1.country = ot2.country
                and ot1.form = ot2.form
                and ot1.catalog <> ot2.catalog
        ) 
```

# java - 在junit测试中打包私有成员变量

> ID：14672371
> 
> 赞同：2
> 
> 时间：2013-02-03T12:16:48.433
> 
> 标签：java, unit-testing, junit

我正在开发一个项目，其中 junit 测试的所有成员变量都被声明为包私有。

例如 ：

```
public class MyTest {

    MyObject someObject;

    @Before
    public void setUp() throws Exception {
        someObject = new MyObject();
    }
} 
```

代替 ：

```
public class MyTest {

    private MyObject someObject;

    @Before
    public void setUp() throws Exception {
        someObject = new MyObject();
    }
} 
```

我知道最初编写测试的那个人知识渊博，参加了很多会议，读过很多书。所以我想知道他可能是在哪里捡到这个的，这背后的理由是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:23:07.760

这可能是一种风格，就像其他任何东西一样。有些人倾向于默认情况下将其设为私有，然后根据需要打开范围。也许他使用的IDE默认打包私有。真的很难回答为什么有人会那样做。

我会说在这种情况下，你最好将它保密。但是如果没有看到其余的代码，就很难说。如果它是从其他地方使用的，那么也许您会考虑创建一个基础测试类，其他测试扩展它以捕获一些常见功能。在这种情况下，您会给出一个反映其目的的名称。

# java - Android：从另一个活动设置文本视图的文本不起作用

> ID：14672372
> 
> 赞同：1
> 
> 时间：2013-02-03T12:17:06.713
> 
> 标签：java, android, android-intent

我有 2 个活动和 2 个课程。

在我的主类中，当我单击提交按钮时，它将开始另一个活动。这是代码。

```
public void onClick(View v) {
    startActivity(new Intent(MainActivity.this, NewActivity.class));
    newActivity.setViewValues(fNameET.getText().toString(), lNameET.getText().toString(), mInitialET.getText().toString(), "Female", "birthday", addressET.getText().toString(), cNumberET.getText().toString());   
} 
```

newActivity 是另一个活动的对象，而 setViewValues 是它的方法。

这不起作用，这就是我在 java gui 中的做法。也许缺少了什么。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T12:21:55.557

你应该像这样传递数据。

**MainActivity.java**

```
Intent intent = new Intent(MainActivity.this, NewActivity.class));
intent.putExtra("firstName",fvalue);
intent.putExtra("lastname",lname);
......
startActivity(intent); 
```

**新活动.java**

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layoutname);
    Intent intent = getIntent();
    String firstName = intent.getStringExtra("firstName");
    String lastName = intent.getStringExtra("lastname");
} 
```

# java - Java mkdir + mkdirs 总是返回 false

> ID：14672375
> 
> 赞同：0
> 
> 时间：2013-02-03T12:17:22.160
> 
> 标签：java

我正在尝试在 Java 中创建一个新目录，但它不起作用。我想知道为什么，因为我`mkdir()`先尝试了然后我尝试`mkdirs()`了应该创建不存在的目录。

我写 ：

```
boolean status = new File("C:\\Users\\Hito\\Desktop\\test").mkdir();
// status = false 
```

然后我写了

```
boolean status = new File("C:\\Users\\Hito\\Desktop\\test").mkdirs();
// status still = false. 
```

线索 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:19:18.477

```
 File file = new File("C:/Users/Hito/Desktop/test");
 file.mkdirs();
 file.createNewFile(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T12:20:54.780

这键入起来更快，并且不需要双斜杠：

```
boolean status = new File("C:/Users/Hito/Desktop/test").mkdir(); 
```

如果仍然出现错误，请检查父目录是否存在，以及文件是否可写。

```
String path = "C:/Users/Hito/Desktop/";
File file = new File(path);
If (!path.exists()) {
   System.out.println("path does not exist:" + path);
} else {
   File dir = new File(path + "test");
   if (!dir.canWrite()) {
      System.out.println("dir not writeable" + path + "test");
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T12:19:10.833

检查您的权限

试试看：

```
boolean status = new File("C:\\Users\\Hito\\Desktop\\test").canWrite(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T12:35:43.717

这有点奇怪，因为我使用了 windows 搜索，我可以找到我的目录但它不位于：

> C:\Users\Hito\Desktop

但在：

> C:\Users\Hito\Desktop\Dropbox\Stage\Applic_WIDT

这是包含我的应用程序的目录。

# excel - 将多个工作簿中的特定列复制到一个主工作簿，而无需不断编辑代码

> ID：14672376
> 
> 赞同：0
> 
> 时间：2013-02-03T12:17:32.887
> 
> 标签：excel, vba, macos

我正在尝试从工作簿中读取一组特定的列（每周都是一个新工作簿）并将它们复制到另一个工作簿中。我已经能够做到这一点，但我认为有一种更清洁的方法来做到这一点！我的代码非常庞大且有问题，因为每周我都需要从不同的工作簿中读取信息，因此我必须返回代码并更改工作簿文件名。我会喜欢有关如何改进代码和加快更改从中复制列的工作簿的文件名的任何输入......例如，是否可以要求用户输入文件名来代替静态名称??

非常感谢任何反馈/建议！！！我的代码如下：

```
Sub CopyColumnToWorkbook()
Dim sourceColumns As Range, targetColumns As Range
Dim qw As Range, rw As Range
Dim sd As Range, fd As Range
Dim bu As Range, hu As Range
Dim zx As Range, gx As Range
Dim op As Range, wp As Range
Dim ty As Range, ly As Range

Set sourceColumns = Workbooks("WERT_2013_01_24.xlsx").Worksheets(1).Columns("L")
Set targetColumns = Workbooks("LU.xls").Worksheets(1).Columns("A")
Set qw = Workbooks("WERT_2013_01_24.xlsx").Worksheets(1).Columns("G")
Set rw = Workbooks("LU.xls").Worksheets(1).Columns("B")
Set sd = Workbooks("WERT_2013_01_24.xlsx").Worksheets(1).Columns("C")
Set fd = Workbooks("LU.xls").Worksheets(1).Columns("C")
Set bu = Workbooks("WERT_2013_01_24.xlsx").Worksheets(1).Columns("N")
Set hu = Workbooks("LU.xls").Worksheets(1).Columns("D")
Set zx = Workbooks("WERT_2013_01_24.xlsx").Worksheets(1).Columns("R")
Set gx = Workbooks("LU.xls").Worksheets(1).Columns("E")
Set op = Workbooks("WERT_2013_01_24.xlsx").Worksheets(1).Columns("S")
Set wp = Workbooks("LU.xls").Worksheets(1).Columns("F")
Set ty = Workbooks("WERT_2013_01_24.xlsx").Worksheets(1).Columns("I")
Set ly = Workbooks("LU.xls").Worksheets(1).Columns("G")

sourceColumns.Copy Destination:=targetColumns
qw.Copy Destination:=rw
sd.Copy Destination:=fd
bu.Copy Destination:=hu
zx.Copy Destination:=gx
op.Copy Destination:=wp
ty.Copy Destination:=ly
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:48:32.073

巧妙地接受用户输入的一种简单方法是使用该`InputBox`函数

```
Sub ReadInputBox()

    Dim readWorkbookLocation As String
    readWorkbookLocation = InputBox("What is the name of the workbook you wish to read from?", "Workbook Select")

    MsgBox workbookFile

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:34:57.750

是的。您可以使用`Application.GetOpenFilename`让用户选择文件名。例如

```
Option Explicit

Sub Sample()
    Dim Ret
    Dim Wb As Workbook
    Dim ws As Worksheet

    Ret = Application.GetOpenFilename("Excel Files (*.xls*), *.xls*")

    If Ret <> False Then
        Set Wb = Workbooks.Open(Ret)
        Set ws = Wb.Sheets("Sheet1")

        With ws
            '
            '~~> Do whatever you want to do here with the worksheet
            '
        End With
    End If
End Sub 
```

**编辑**：我刚刚注意到你也标记了它`excel-vba-mac`。如果您在 Excel 2011 上执行此操作，请查看此[链接](https://stackoverflow.com/questions/10612502/error-when-closing-an-opened-workbook-in-vba-userform)，该链接显示如何使用`Application.GetOpenFilename`. 其余代码保持原样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T19:21:50.187

您可以使用以下简单代码循环遍历文件夹中的所有文件，而无需知道它们的名称和数量：

```
LoopFileNameExt = Dir(InputFolder & "*.xls?")
Do While LoopFileNameExt <> ""
'your code here
LoopFileNameExt = Dir
Loop 
```

文件掩码中允许使用通配符。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T17:07:46.097

对于这些类型的操作，我使用包含 vb 代码的单独 Excel 文件。（我将此文件称为“操作”）。在工作表上放置源/目标文件的名称。添加“选择源”、“选择目标”等按钮，它们会提示输入文件，但仅将选定的文件名放在工作表上。另一个按钮“Go”将使用指定的文件执行实际操作，例如：

![在此处输入图像描述](../Images/1dbf112205d4bc7ce4406c5e2abab5a2.png)

如果要复制的列很少更改，您可以将其保留在 VBA 中。如果它不时更改或您需要多个版本，也将其放在操作工作表中。如果您需要更复杂的场景，您可以将配置放在源/目标工作簿中的另一个工作表上，以便作者可以自己指定列。

作为对您的代码的建议，对文件名使用常量/变量，以在手动更改文件名时最大限度地减少输入。还将正在操作的工作簿和工作表分配给变量。

```
' OPERATIONS SHEET
Dim operWB as Workbook
Dim operWS as Worksheet
Set operWB = Application.ActiveWorkbook
Set operWS = operWB.ActiveSheet

' SOURCE
Dim srcFN as string

' HARDCODED: same as before
'srcFN = "WERT_2013_01_24.xlsx"

' OR get from Cell C2
srcFN = operWS.Cell( 2, 3 )

Dim srcWB as Workbook
Dim srcWS as Worksheet
Set srcWB = Workbooks.Open( srcFN )
Set srcWS = srcWB.Worksheets( 0 )

' DESTINATION
.... do the same ...

.... OPTION 1: COPY ....
Set srcRange = srcWS.Columns( "L" ) ' <-- or get from B10
Set dstRange = dstWS.Columns( "A" ) ' <-- or get from C10
srcRange.Copy Destination:=dstRange
....

.... OPTION 2: COPY AS LOOP ....
Dim currentRow As Integer
currentRow = 10
' keep going while B10, B11... is not empty
While operWS.Cells(currentRow, 2) <> ""
    Set srcRange = srcWS.Columns( operWS.Cells(currentRow, 2) ) ' B10, B11 ...
    Set dstRange = dstWS.Columns( operWS.Cells(currentRow, 3) ) ' C10, C11 ...
    srcRange.Copy Destination:=dstRange
    currentRow = currentRow + 1
Wend 
```

# objective-c - -hash 是否足以唯一地表示一个 URL？

> ID：14672384
> 
> 赞同：1
> 
> 时间：2013-02-03T12:18:46.683
> 
> 标签：objective-c, cocoa, core-data, hash, nsstring

我使用`hash`on`NSString`来获取一个整数来唯一地表示一个 URL，然后将它存储在 Core Data 中以唯一的对象。

这足以确保它是独一无二的吗？URL 字符串通常为 50 到 80 个字符。

如果不是，我很乐意接受任何改进它的建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T12:34:09.463

不，哈希不足以唯一的 URL。哈希的目的是分发对象，例如计算哈希表索引。

使用哈希码，您可以进行快速比较，如果两个对象有两个不同的哈希，它们是不同的，如果它们具有相同的哈希，您必须使用比较。

# c# - 消除更改

> ID：14672386
> 
> 赞同：1
> 
> 时间：2013-02-03T12:19:06.737
> 
> 标签：c#, .net, datagridview

当我在第二行中选择一个项目时，第一行会发生变化，并且第一行中的选定项目会发生变化并复制我在第二行中选择的内容

我只想问，如何消除这些变化？

我不知道是不是因为清除了里面的物品`ComboBox`，如果我删除`column.Items.Clear()`它运行良好，但我还需要清除里面的物品`ComboBox`

```
public partial class MultipleEntry : Form
{
    DataGridViewComboBoxColumn col1 = new DataGridViewComboBoxColumn();
    DataGridViewComboBoxColumn col2 = new DataGridViewComboBoxColumn();
    DataGridViewComboBoxColumn col3 = new DataGridViewComboBoxColumn();
    DataGridViewTextBoxColumn col4 = new DataGridViewTextBoxColumn();
    DataGridViewComboBoxColumn col5 = new DataGridViewComboBoxColumn();
    DataGridViewTextBoxColumn col6 = new DataGridViewTextBoxColumn();
    DataGridViewComboBoxColumn col7 = new DataGridViewComboBoxColumn();
    DataGridViewTextBoxColumn col8 = new DataGridViewTextBoxColumn();

    public MultipleEntry()
    {
        InitializeComponent();
    }

    private void UNA()
    {
        string strQuery = "Select TypeName from TYPE where delType='False'";
        OleDbDataAdapter adap = new OleDbDataAdapter(strQuery, Program.objConn);
        OleDbCommandBuilder build = new OleDbCommandBuilder(adap);
        DataTable dt = new DataTable();
        adap.Fill(dt);
        BindingSource bind = new BindingSource();
        bind.DataSource = dt;

        //Type
        col1.DataPropertyName = "TypeName";
        col1.HeaderText = "Type";
        col1.Width = 100;
        col1.DataSource = bind;
        col1.ValueMember = "TypeName";
        col1.DisplayMember = "TypeName";
        grdMultiple.Columns.Add(col1);

        //Category
        col2.DataPropertyName = "CategoryName";
        col2.HeaderText = "Category";
        col2.Width = 100;
        grdMultiple.Columns.Add(col2);

        //Product Description
        col3.DataPropertyName = "ProductDetails";
        col3.HeaderText = "Product";
        col3.Width = 150;
        grdMultiple.Columns.Add(col3);

        //Unit
        col5.DataPropertyName = "UnitName";
        col5.HeaderText = "Unit";
        col5.Width = 75;
        grdMultiple.Columns.Add(col5);

        //Supplier
        col7.HeaderText = "Supplier";
        col7.Width = 150;
        grdMultiple.Columns.Add(col7);

        //Quantity
        col4.HeaderText = "Qty";
        col4.Width = 75;
        grdMultiple.Columns.Add(col4);

        //Price
        col8.HeaderText = "Price";
        col8.Width = 75;
        grdMultiple.Columns.Add(col8);

        //Serial Number
        col6.HeaderText = "Serial No";
        col6.Width = 80;
        grdMultiple.Columns.Add(col6);
    }

    private void MultipleEntry_Load(object sender, EventArgs e)
    {
        //try
        //{
            Program.objConn = new OleDbConnection(Program.Connection);
            Program.objConn.Open();
            UNA();
        //}
        //catch (Exception ex)
        //{
        //    MessageBox.Show(ex.Message);
        //}
    }

    string value;
    private void grdMultiple_CellValueChanged(object sender, DataGridViewCellEventArgs e)
    {
        try
        {

            int index = grdMultiple.CurrentCell.RowIndex;   
            if(e.ColumnIndex==0)
            {
                MessageBox.Show(e.ColumnIndex.ToString() + e.RowIndex.ToString());
                object newValue = grdMultiple.CurrentRow.Cells[0].Value;
                value = newValue.ToString();
                MessageBox.Show(value);
                string one = "select c.CategoryName,t.TypeName from CATEGORY c inner join PRODUCT p on p.CategoryNo = c.CategoryNo inner join TYPE t on t.TypeNo=p.TypeNo where t.TypeName='" + value + "'";
                OleDbCommand cmdone = new OleDbCommand(one, Program.objConn);
                OleDbDataReader rdrOne = cmdone.ExecuteReader();
                col2.Items.Clear();
                while (rdrOne.Read())
                {
                    col2.Items.Add(rdrOne[0].ToString());
                }
            }
            else if (e.ColumnIndex == 1 && e.RowIndex >=1)
            {
                MessageBox.Show(e.ColumnIndex.ToString() + e.RowIndex.ToString());
                string one = "select c.CategoryName,t.TypeName from CATEGORY c inner join PRODUCT p on p.CategoryNo = c.CategoryNo inner join TYPE t on t.TypeNo=p.TypeNo where t.TypeName='" + value + "'";
                OleDbCommand cmdone = new OleDbCommand(one, Program.objConn);
                OleDbDataReader rdrOne = cmdone.ExecuteReader();

                while (rdrOne.Read())
                {
                    col2.Items.Add(rdrOne[0].ToString());
                }
            }
            else if (e.ColumnIndex == 2 && e.RowIndex >= 1)
            {
                MessageBox.Show(e.ColumnIndex.ToString() + e.RowIndex.ToString());
                col3.Items.Clear();
                object newTwo = grdMultiple.CurrentRow.Cells[1].Value;
                //MessageBox.Show(newTwo.ToString());
                string two = "select p.ProductDetails,c.CategoryName from PRODUCT p inner join Category c on c.CategoryNo = p.CategoryNo where c.CategoryName='" + newTwo.ToString() + "'";
                OleDbCommand cmdtwo = new OleDbCommand(two, Program.objConn);
                OleDbDataReader rdrtwo = cmdtwo.ExecuteReader();
                while (rdrtwo.Read())
                {
                    col3.Items.Add(rdrtwo[0].ToString());
                }
            }
            else if (e.ColumnIndex == 3 && e.RowIndex >= 1)
            {
                MessageBox.Show(e.ColumnIndex.ToString() + e.RowIndex.ToString());
                col5.Items.Clear();
                string three = "select u.UnitName from UNIT u";
                OleDbCommand cmdThree = new OleDbCommand(three, Program.objConn);
                OleDbDataReader rdrThree = cmdThree.ExecuteReader();
                while (rdrThree.Read())
                {
                    col5.Items.Add(rdrThree[0].ToString());
                }   
            }
            else if (e.ColumnIndex == 4 && e.RowIndex >= 1)
            {
                MessageBox.Show(e.ColumnIndex.ToString() + e.RowIndex.ToString());
                col7.Items.Clear();
                string four = "select SupplierCompany from SUPPLIER";
                OleDbCommand cmdFour = new OleDbCommand(four, Program.objConn);
                OleDbDataReader rdrFour = cmdFour.ExecuteReader();
                while (rdrFour.Read())
                {
                    col7.Items.Add(rdrFour[0].ToString());
                } 
            }
        }
        catch(Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:30:23.730

这里的问题是您`DataGridViewComboBoxColumn.Items`不正确地使用财产。此属性用于访问该列中所有单元格的值集合，因此每当您调用 时`col2.Items.Clear()`，您都会清除整个列中的组合框。要单独访问单元格的值集合，您应该执行以下操作：

```
//get the cell in selected row in 2nd column
var cell2 = (DataGridViewComboBoxCell)grdMultiple.Rows[index].Cells[2];
//clear the combo box value collection only for this cell
cell2.Items.Clear()
//do the rest accessing the cell's value collection like in the previous line 
```

希望这能解决您的问题。

PS你应该回到`e.RowIndex == index`在`if`语句中使用。

# java - 为什么深度测试在颜色选择的屏幕外渲染中不起作用？

> ID：14672389
> 
> 赞同：1
> 
> 时间：2013-02-03T12:19:17.963
> 
> 标签：java, opengl, off-screen, depth-testing

我正在使用着色和离屏渲染在 OpenGL 上实现 QUADS 的选择工具。但是深度测试似乎在离屏渲染和某些角度和旋转下不起作用，选择了前面那个后面的QUAD。关于如何设置缓冲区和/或附件的任何想法？这个问题和我的法线有什么关系？？？还是只是深度测试？？我个人认为这是深度测试，我就是无法让该死的东西工作！！！

这是我的缓冲区初始化函数：

```
public void init(final GL2 gl) {
    // setup
    gl.glGenFramebuffers(frameBufferIds.capacity(), frameBufferIds);
    gl.glGenRenderbuffers(renderBufferIds.capacity(), renderBufferIds);
    gl.glBindRenderbuffer(GL2.GL_RENDERBUFFER, renderBufferIds.get(0));
    // 
    ViewPort viewPort = ViewPort.getCurrent(gl);
    gl.glRenderbufferStorage(GL2.GL_RENDERBUFFER, GL2.GL_RGBA, viewPort.getWidth(), viewPort.getHeight());

    /**
     * Comment 1
     */
    //  gl.glRenderbufferStorage(GL2.GL_RENDERBUFFER, GL2.GL_DEPTH_COMPONENT, viewPort.getWidth(), viewPort.getHeight());

    // attach the render buffer to color attachment point
    gl.glBindFramebuffer(GL2.GL_FRAMEBUFFER, frameBufferIds.get(0));
    gl.glFramebufferRenderbuffer(GL2.GL_FRAMEBUFFER, GL2.GL_COLOR_ATTACHMENT0, GL2.GL_RENDERBUFFER, renderBufferIds.get(0));
    /**
     * Comment 2
     */
    // gl.glFramebufferRenderbuffer(GL2.GL_FRAMEBUFFER, GL2.GL_DEPTH_ATTACHMENT, GL2.GL_RENDERBUFFER, renderBufferIds.get(0));
    //
    if (gl.glCheckFramebufferStatus(GL.GL_FRAMEBUFFER) != GL2.GL_FRAMEBUFFER_COMPLETE) {
        System.out.println("Render Buffer problem!");
    }
} 
```

当我取消注释“注释 1”和“注释 2”部分时，出现渲染缓冲区问题。但我听说我应该将“除了颜色附件之外的渲染缓冲区附加到 GL_DEPTH_ATTACHMENT”。（来源：[看看这个 Q](https://stackoverflow.com/questions/5751081/how-to-use-depth-testing-when-rendering-to-an-offscreen-buffer-then-onto-texture)。我想知道我该怎么做。

另外，这是我的使用代码：

```
gl.glDisable(GL2.GL_DITHER);

// 1\. render in offscreen
init(gl);
gl.glEnable(GL2.GL_DEPTH_TEST);
offscreenRender(gl, selectionType);

// 2\. read pixel
gl.glReadBuffer(GL2.GL_DEPTH_ATTACHMENT);
gl.glReadBuffer(GL2.GL_COLOR_ATTACHMENT0);

gl.glReadPixels((int) (pos.x - pickWidth / 2), (int) (viewPort.getHeight() - pos.y - pickWidth / 2), pickWidth, pickWidth,  GL2.GL_RGBA, GL2.GL_FLOAT, pointSelectionPixels); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:11:44.347

我在互联网上阅读了几个小时关于帧和渲染缓冲区的信息。最后我在这个[网站](http://wanochoi.com/?p=116)上找到了我的问题。该网站说我们必须将颜色渲染到**Texture**中，并将深度渲染到**RenderBuffer**中。这才是重点！

在设置缓冲区和纹理之后，一切都准备好用`glReadPixels`方法读取深度和颜色值。

```
// reading color
glReadBuffer( GL_COLOR_ATTACHMENT0_EXT );
glReadPixels( 0, 0, WIDTH, HEIGHT, GL_RGBA, GL_UNSIGNED_BYTE, color );

// reading depth
glReadBuffer( GL_DEPTH_ATTACHMENT_EXT );
glReadPixels( 0, 0, WIDTH, HEIGHT, GL_DEPTH_COMPONENT, GL_FLOAT, depth ); 
```

谢谢[和之崔](http://wanochoi.com/?author=1)！:D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T20:18:06.447

当然深度测试不起作用；您没有*创建深度缓冲区*。FBO 本质上没有深度缓冲区，就像它们本质上没有颜色缓冲区一样。如果两者都需要，则必须*同时*创建.

`GL_DEPTH_COMPONENT24`因此，使用 或[其他适当的深度格式](http://www.opengl.org/wiki/Image_Format#Depth_formats)创建渲染缓冲区，并将其附加到`GL_DEPTH_ATTACHMENT`FBO 的。

# c++ - 虚函数 + 带有基类指针的 STL 容器

> ID：14672394
> 
> 赞同：1
> 
> 时间：2013-02-03T12:19:42.450
> 
> 标签：c++, inheritance, stl, overriding, virtual

我有一个名为*Base*的基类，它定义了一个虚函数。*Derived*类现在继承自它并实现/覆盖该虚函数。以下代码可以正常工作：

```
Base* pB = new Derived();
pB->virtual_function(); // function of class Derived gets called -> good 
```

我的问题是，我现在将所有派生实例存储在 STL 容器中`std::map<ID, Base*>`。这似乎会导致问题，因为当我稍后迭代该容器并尝试让每个*Base* * 调用我的虚函数时，运行时仅将指针识别为*Base* * 类型并且不会调用*Derived*类中的覆盖实现。

有没有办法让它按预期工作，或者我在这里错过了一个关键点？

**编辑1：**请求了一些额外的代码，所以我们开始吧：

```
std::map<ComponentType, Base*> m_Components;
// The factory instantiates a Derived* (via functors) and returns it as Base*
Base* pB = m_pComponentFactory->createComponent(this, type);
// Lazy insert (since there is no map entry with key 'type' at that stage) 
m_Components[type] = pB;

[...]

Base* pB;
for(ComponentMap::const_iterator it = m_Components.begin(); it != m_Components.end( ); ++it) 
{
    pB = it->second;
    pB->virtual_function(); // goes to Base instead of Derived
} 
```

**编辑 2：**我刚刚意识到的一件事是，在通过仿函数创建 Derived 实例后，我不调用 `dynamic_cast`（或类似的东西）（但我不知道将它转换成什么，因为它都是通用/动态的）。它只是一个`return creator()`以创造者为函子。是这个问题吗？

创建者类型（函数类型）的定义：

```
typedef Base*(*ComponentCreator)([some params]); 
```

**编辑 3：** 例如，实际的仿函数定义如下（Renderable 和 Location 是从 Base 派生的类）：

```
&Renderable::Create<Renderable> // or
&Location::Create<Location> 
```

Create() 方法是 Base 类中的模板函数。

```
template<typename T> 
static Component* Create([some params]) 
{ 
    return new T([some params]); 
} 
```

**编辑 4：** 问题似乎是我的 clone() + CopyConstructor 处理。我的克隆目前看起来像这样：

```
Base* Base::clone() const
{
    return new Base(*this);
} 
```

因为我只创建一个*Base* *，因此以后的虚拟分辨率无法工作。不过，我现在剩下的问题是，我不知道如何更改克隆。**如EDIT 1**所示，我的`m_Components`地图带有 Base* 指针。我现在需要克隆它们，但我只知道它们是*Base* * 的，而不是精确派生的。想到的一个想法可能是将用于创建*Derived*实例的函子首先存储在类中，以便以后重用。所以我的克隆看起来像这样：

```
Base* Component::clone() const
{
    return m_pCreationFunctor([some params]);
} 
```

有人看到更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T13:10:27.670

你是切片的受害者。当您复制构造一个 Base 时，您将丢失对象的 Derived 部分。有关更多详细信息，请参阅[http://en.wikipedia.org/wiki/Object_slicing 。](http://en.wikipedia.org/wiki/Object_slicing)如果不应该实例化基类，则可以考虑将其抽象化以防止将来犯此错误。

在这种情况下的修复可能是有一个虚拟 Base * clone() 方法并在派生类中覆盖它。

IE

```
class Base{
...
virtual Base * clone() const = 0;
...
};

class Derived : public Base {
...
Base * clone() const override { return new Derived(*this); }
...
}; 
```

如果你真的想避免重写克隆方法，你可以使用中间[CRTP](https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)类，即

```
struct Base{
    virtual Base * clone() = 0;
};

template <typename D>
struct B : public Base {
    virtual Base * clone() { return new D(*static_cast<D*>(this)); }
};

struct D : public B<D>{}; 
```

# javascript - 由于按钮单击而引发检测提交事件

> ID：14672401
> 
> 赞同：0
> 
> 时间：2013-02-03T12:20:36.570
> 
> 标签：javascript

是否有可能找出是否引发了 onsubmit 事件，因为引发了 onclick 事件？例如，当单击 an 时`<input type="submit" />`，会引发 onclick 事件，然后引发 onsubmit 事件。但是，有时会发生表单未提交，即未提出 onsubmit。

重现步骤（表单是 ajax 表单，它会自行刷新，在 IE10 上测试）：
1）通过单击按钮提交表单，
2）ajax 请求完成并更新表单，
3）5毫秒后，按钮是再次单击（与步骤 1 中的方法相同），但这次 onclick 被触发，但 onsubmit 不是。如果我单击按钮，例如刷新表单后 500 毫秒，一切都很好

我
`$("form input[type=submit], form input[type=image]").live("click", function (e) { console.log("click"); }`
`$("form").live("submit", function (e) { console.log("submit"); }`
曾经看到没有提出 onsubmit

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:59:40.670

不知道你的意思，但我不能在 Firefox 中重现，你也不应该使用 .live：

[http://api.jquery.com/live/](http://api.jquery.com/live/)

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

```
$(document).ready(function(){
    $("#form").delegate(null,"submit", function(){
        console.log("submitting");
        return false;
    });
    $("#submit").click();
    $("#submit").click();
    $("#submit").click();
    $("#submit").click();
});

<form id="form">
    <input type="submit" id="submit"></input>
</form> 
```

# django - django 小部件查询集未更新

> ID：14672407
> 
> 赞同：2
> 
> 时间：2013-02-03T12:21:11.360
> 
> 标签：django, widget

我有一个自定义 django 小部件来替换标准的 ModelChoiceField 小部件。

```
class SelectModelWidget(forms.TextInput):
    """
    @Usage: field = ModelChoiceField(queryset=Model.objects.all(),
                                     widget=SelectModelWidget(attrs={}))
    """

    def __init__(self, attrs=None, title=None,
                 template="widgets/select_widget.html"):
        super(SelectModelWidget, self).__init__(attrs)
        self.template = template
        self.title = title

    def render(self, name, value, attrs=None):
        if value is None: value = ''

        # TODO: the queryset does not update
        # Set the title for the selection page, use model name as default
        model_queryset = self.choices.queryset
        if model_queryset is not None and self.title is None:
            self.title = model_queryset.model._meta.verbose_name.title()

        # Get the currently selected instance if it exists
        try:
            instance = model_queryset.get(pk=value)
            text = instance
        except (ValueError, model_queryset.model.DoesNotExist):
            text = ''

        form_id = attrs.pop("id")
        widget_template = loader.get_template(self.template)
        context = Context({
                           "attrs": attrs,
                           "id": form_id,
                           "name": name,
                           "value": value,
                           "text": text,
                           "title": self.title,
                           "queryset": model_queryset,
                          })

        return widget_template.render(context) 
```

问题似乎在这个领域：

```
 model_queryset = self.choices.queryset
    if model_queryset is not None and self.title is None:
        self.title = model_queryset.model._meta.verbose_name.title() 
```

self.choices.queryset 行应该获取传递给 ModelChoiceField 的查询集，我认为我对它的初始化方式缺乏了解，因为当我第一次加载页面时，模型查询集填充得很好，但是如果我添加了该模型的新实例并重新加载页面，查询集不会更新以包含新实例。而且我必须重新启动服务器才能使新实例出现在列表中。为什么查询集只会被初始化一次并且永远不会更新，有什么理由吗？

编辑：添加，我确信这是小部件代码，因为当我从表单中删除小部件并使用默认小部件（不确定是哪个小部件）时，它可以完美地工作并且正如我所期望的那样。我只是无法弄清楚为什么 model_queryset 变量永远不会使用新的查询集进行更新。

在我的项目中与此小部件相关的表单代码实际上只是：

```
address = forms.ModelChoiceField(queryset=models.Address.objects.all(),
                             widget=widgets.SelectModelWidget()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T15:31:31.870

`self.choices.queryset.all()`应该管用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T10:58:28.693

最后我决定我不需要访问查询集本身，所以我只是使用 self.choices 而不是 self.choices.queryset（并删除默认情况下由 modelchoicefields 放入的空白选项）。

这解决了我眼前的问题，但我仍然想知道为什么 self.choices.queryset 的行为与 self.choices 不同。不清楚是错误还是我不理解的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-29T13:32:08.400

我认为问题出在渲染模板或查询集的缓存中。但我建议不要处理这个问题，而是使用一个很棒的包：[django-crispy-forms](http://django-crispy-forms.readthedocs.org/en/latest/)，它允许您使用 django 的模板引擎自定义任何字段。经过无数次尝试在 django 中自定义小部件渲染后，这是我能找到的最佳解决方案，结果证明也是一个相当简单的解决方案。

# d3.js - d3.js 可折叠树中的搜索功能

> ID：14672408
> 
> 赞同：2
> 
> 时间：2013-02-03T12:21:13.463
> 
> 标签：d3.js, hierarchy

我创建了类似于[http://mbostock.github.com/d3/talk/20111018/tree.html](http://mbostock.github.com/d3/talk/20111018/tree.html)的可视化。我希望最终用户能够从树中搜索节点/数据/标签。由于我不擅长 javascript，我发现创建这样的搜索功能非常困难。

以下是我的要求：最终用户可以输入“cluster”（flare->analytics-->cluster）之类的文本，然后输入 enter。可视化突出显示集群并向最终用户展示。

如果可能，您可以使用 jsfiddle 共享代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-11T20:39:10.300

不确定这个问题是否仍然有效，但我发现真正有帮助的 D3 节点树版本是这个：

[Jake Zieve 的“搜索可折叠树”](https://bl.ocks.org/jjzieve/a743242f46321491a950)

让我知道这是否有帮助。该代码应该与您附加的代码非常相似。无论哪种方式，让我知道这是否会引导您走上正确的道路。

# mysql - 无论我输入什么，MySQL 都会返回结果！:(

> ID：14672413
> 
> 赞同：0
> 
> 时间：2013-02-03T12:21:42.200
> 
> 标签：mysql

我有一个用户表，其中有一个自动递增的用户 ID 字段，我想将其用作登录 ID。userid 字段的格式为 1,2,3,4,5,..等。

但是，当我执行如下选择语句时：

```
SELECT * FROM user WHERE userid='0001' 
```

上面的语句返回了用户 ID '1' 的信息。无论我在“1”前面放了多少“0”，我都会得到用户ID“1”的记录

我可以知道如何让它仅在它与确切的用户 ID 匹配时才返回结果（即，当我键入`userid=1`而不是返回用户 ID 为 1 的用户的记录时`userid=00000001)`？

如果我没有足够清楚地解释这一点，我很抱歉。我正在尝试通过在线教程来学习 SQL，这太令人沮丧了:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:23:42.127

如果 ID 是`int`请使用这个，也不要忘记`user`用反引号包装，因为它是保留关键字：

```
SELECT * FROM `user` WHERE userid=0001; 
```

或这个：

```
SELECT * FROM `user` WHERE userid=1; 
```

正如您所提到的，您需要**EXACT** ID 记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T12:24:11.467

您正在混淆整数与字符串比较。如果您的 ID 是 INT，则将其作为整数进行比较（因此省略尾随零。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T12:24:37.213

这是因为您的自动增量是 INT (NUMBER) 类型，并且您正在寻找字符串比较（在 SQL varchar 中）
您应该将列类型设置为 VARCHAR 并使用此语句

```
select * from user where userid like '0001' 
```

或者

```
select * from user where userid like '%0001%' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-03T12:24:45.580

如果用户 ID 是`int`，这是预期行为 (00001 = 1)。

将 ID 设为`varchar`字段会有所帮助。然而，这听起来不是一个好主意。为什么要允许`000001`旁边`001`？它必然会导致问题，没有明显的优势（对我来说）。

要么有一个自动递增的 ID (1 2 3 4 5 ....)，要么在用户创建记录时生成完全随机的字符串。后者将使人们无法猜测其他用户的 ID，这在某些情况下可能是一件好事。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-03T12:23:23.227

使用`LIKE`::

```
SELECT * FROM user WHERE userid LIKE '0001' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-03T12:25:27.027

该列的数据类型`userID`是`INT`. 当您创建一个语句并且条件为 on 时`userID`，mysql 会隐式地将其转换`INT`为字符串的原因`0001`等价于`1`.

这里有一个你可能想要的建议，改变`userID`into `VARCHAR`( *string* ) 的数据类型并创建一个算法来增加`userID`. *当列为字符串时，`0001`不等于`1`*。

# .net - 在实体框架5中异步查询多个数据库

> ID：14672419
> 
> 赞同：2
> 
> 时间：2013-02-03T12:22:19.170
> 
> 标签：.net, entity-framework, asynchronous, task-parallel-library

我需要使用实体框架一次查询多个数据库，但我希望所有查询同时发生，并在全部完成时通知我。

我一直在使用任务并行库，并认为可能可以用来实现这一点......通过在循环中触发每个任务，在每次迭代中更改连接字符串，以便它会访问不同的数据库。但是，根据我对任务并行库的经验，您只知道每个任务何时完成，而不是批次。

我在 MVC Web 环境而不是 WPF 中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:54:56.040

如果你正在使用类似的东西。

```
Task myTask = task.Factory.StartNew( () => {
        some code
} );

Task myTask2 = task.Factory.StartNew( () => {
        some code again
} ); 
```

然后你使用等待方法。

```
myTask.Wait();
myTask2.Wait(); 
```

在两个任务完成之前不会通过。

# android - 调用相同的活动并在surfaceview中创建相机

> ID：14672421
> 
> 赞同：1
> 
> 时间：2013-02-03T12:22:28.213
> 
> 标签：android, android-activity, android-camera

在使用相机实时预览作为背景的特定条件之后，我一直试图调用同一个类。但我遇到了一个错误。

日志猫：

```
02-03 19:52:42.274: E/AndroidRuntime(454): FATAL EXCEPTION: main
02-03 19:52:42.274: E/AndroidRuntime(454): java.lang.RuntimeException: Fail to connect to camera service
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.hardware.Camera.native_setup(Native Method)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.hardware.Camera.<init>(Camera.java:258)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.hardware.Camera.open(Camera.java:235)
02-03 19:52:42.274: E/AndroidRuntime(454):  at com.example.gems.GamePlay.surfaceCreated(GamePlay.java:996)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.view.SurfaceView.updateWindow(SurfaceView.java:543)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.view.SurfaceView.dispatchDraw(SurfaceView.java:348)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.view.View.draw(View.java:6883)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.view.View.draw(View.java:6883)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
02-03 19:52:42.274: E/AndroidRuntime(454):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1862)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.view.ViewRoot.draw(ViewRoot.java:1522)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1258)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.os.Looper.loop(Looper.java:123)
02-03 19:52:42.274: E/AndroidRuntime(454):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-03 19:52:42.274: E/AndroidRuntime(454):  at java.lang.reflect.Method.invokeNative(Native Method)
02-03 19:52:42.274: E/AndroidRuntime(454):  at java.lang.reflect.Method.invoke(Method.java:507)
02-03 19:52:42.274: E/AndroidRuntime(454):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-03 19:52:42.274: E/AndroidRuntime(454):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-03 19:52:42.274: E/AndroidRuntime(454):  at dalvik.system.NativeStart.main(Native Method) 
```

我正在像这样创建我的相机。

```
Camera camera;
SurfaceView surfaceView;
SurfaceHolder surfaceHolder;
boolean previewing = false;

getWindow().setFormat(PixelFormat.UNKNOWN);
surfaceView = (SurfaceView)findViewById(R.id.camerapreview);
surfaceHolder = surfaceView.getHolder();  
surfaceHolder.addCallback(this);
surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

public void surfaceChanged(SurfaceHolder holder, int format, int width,
         int height) 
{
        // TODO Auto-generated method stub
        if(previewing){
         camera.stopPreview();
         previewing = false;
        }

        if (camera != null){
            Parameters parameters = camera.getParameters();
            Display display = ((WindowManager)getSystemService(WINDOW_SERVICE)).getDefaultDisplay();

            if(display.getRotation() == Surface.ROTATION_0)
            {
                parameters.setPreviewSize(height, width);                           
                camera.setDisplayOrientation(90);
            }

            if(display.getRotation() == Surface.ROTATION_90)
            {
                parameters.setPreviewSize(width, height);                           
            }

            if(display.getRotation() == Surface.ROTATION_180)
            {
                parameters.setPreviewSize(height, width);               
            }

            if(display.getRotation() == Surface.ROTATION_270)
            {
                parameters.setPreviewSize(width, height);
                camera.setDisplayOrientation(180);
            }

            camera.setParameters(parameters);
            try 
            {           
                camera.setPreviewDisplay(surfaceHolder);          
                camera.startPreview();
                previewing = true;
            }
            catch(Exception e)
            {
                Log.d("Error", "Cannot start preview", e);    
            }
        }

}

        public void surfaceCreated(SurfaceHolder holder) {
        // TODO Auto-generated method stub
            try {

                camera = Camera.open();  
                camera.setPreviewDisplay(surfaceHolder);

            } catch (IOException e) { }

        }

        public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        if (null == camera)
            return;
        camera.stopPreview();
        camera.release();
        camera = null;
        previewing = false;
        } 
```

当我尝试调用完成然后再次调用同一类时，我在顶部收到错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:28:02.327

“无法连接到相机服务”通常发生在相机被其他应用程序使用或未正确释放时。

当您调用 Camera.open 时，您会为您保留相机，直到您调用 Camera.release()。这里奇怪的是你在surfaceDestroyed中调用camera.release。所以相机应该被释放。

我可以建议你做的是在调用finish()之前调用camera.release。您还可以在surfaceDestroyed 中的camera.stopPreview() 行上放置一个断点。

# python - Python从文本文件中切片和拆分数据

> ID：14672424
> 
> 赞同：1
> 
> 时间：2013-02-03T12:22:40.877
> 
> 标签：python, python-3.x

```
def read_slice():

    openfile=open('slicefile1.txt','r')
    #savetofile=open('slicefile2.txt','w')

    lines = openfile.readlines()
    for line in lines:
        line.slice(',')[16].split('\t')
        print(line) 
```

我要读取和解析的文件（是正确的词吗？）是格式

```
['05,21,34,37,38,01,06', '09,16,26,36,39,02,06', '03,10,18,31,37,02,04']. 
```

我想以格式返回（实际上写入另一个文件）

```
05,21,34,37,38 tab 01,06
09,16,26,36,39 tab 02,06 
```

我显然很愚蠢，因为我仍然无法处理列表和字符串。该函数给出了一个错误方法切片不可用的字符串。如果你愿意，请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T12:28:21.517

在 python 字符串中切片是指使用[`[start:stop:step]`符号](http://docs.python.org/2/reference/expressions.html#slicings). 在您的情况下，您可以简单地使用：

```
'\t'.join((line[:14], line[15:])) 
```

拆分行并使用选项卡重新加入：

```
>>> line = '05,21,34,37,38,01,06'
>>> line[:14]
'05,21,34,37,38'
>>> line[15:]
'01,06'
>>> '\t'.join((line[:14], line[15:]))
'05,21,34,37,38\t01,06' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:29:50.490

比 Martijn 的答案稍微复杂一些，但如果格式或分隔符等发生更改，可能会更灵活......

```
import csv

with open('yourfile') as fin, open('output.csv', 'wb') as fout:
    csvin = csv.reader(fin)
    csvout = csv.writer(fout, delimiter='\t')
    for row in csvin:
        csvout.writerow( [','.join(row[:5], ','.join(row[5:])] ) 
```

# sql - 我该如何查询这个案例？

> ID：14672425
> 
> 赞同：2
> 
> 时间：2013-02-03T12:22:49.607
> 
> 标签：sql, postgresql

我有三张桌子。

```
Category(id, name);
Item(id, name, category);
SoldItem(id, item, qty); 
```

我的目标很简单，我想将所有类别加上这些类别的商品数量加上这些特定类别的商品的已售商品数量列为行。

结果将是这样的：

```
Category | Item count | Item sold count
----------------------------------------
Food     | 2          | 50
----------------------------------------
Beverage | 3          | 60 
```

我如何在 PostgreSQL 中查询这个。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:34:56.087

关键是`count(distinct)`在计算中间连接表中的行数时使用，否则多个孙子将导致同一专利也被多次计算：

```
select
    c.name as category,
    count(distinct i.id) as item_count,
    sum(si.qty) as item_sold_count
from Category c
left join Item i on i.category = c.id
left join SoldItem si on si.item = i.id
group by c.name; 
```

通过使用`left`连接，没有项目的类别和有销售额的项目仍将显示，但总数为零。

# jquery - 每个单词下方的jQuery-ui自动完成下拉菜单

> ID：14672433
> 
> 赞同：12
> 
> 时间：2013-02-03T12:23:36.727
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我正在使用来自 jquery-ui 的[自动完成功能。](http://jqueryui.com/autocomplete/)在多个值中，您可以在空格后获取每个单词的下拉列表，但下拉列表显示为输入框的大小。是否可以使下拉菜单出现在每个宽度等于下拉单词而不是输入框的整个长度的光标下方？

编辑：示例（类似 Google 的搜索框）：

当您进入谷歌并随着句子的继续输入一个长句子时，在每个单词之后，光标位置下方的每个单词都会出现一个自动完成下拉菜单。所以我需要一个类似的下拉菜单，可以添加到 jQuery Autocomplete

![在此处输入图像描述](../Images/feb9361874c166504fd535e19b7d5ec7.png)

我的功能这么大，因为它具有多个单词和按字母顺序显示数组的功能。这是`<script`代码：

```
 <script>

    $(function() {

            var availableTags = <?php echo json_encode($sometags); ?>;

            function split( val ) {
            return val.split( / \s*/ );
            }
            function extractLast( term ) {
            return split( term ).pop();
            }
             $( "#query" )
            // don't navigate away from the field on tab when selecting an item
            .bind( "keydown", function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
            $( this ).data( "autocomplete" ).menu.active ) {
            event.preventDefault();
            }
            })
            .autocomplete({
            minLength: 1,
            source: function( request, response ) {
            // delegate back to autocomplete, but extract the last term
            response( $.ui.autocomplete.filter(
            availableTags, extractLast( request.term ) ) );
            var term = $.ui.autocomplete.escapeRegex(request.term)
            , startsWithMatcher = new RegExp("^" + term, "i")
            , startsWith = $.grep(availableTags, function(value) {
                return startsWithMatcher.test(value.label || value.value || value);
            })
            , containsMatcher = new RegExp(term, "i")
            , contains = $.grep(availableTags, function (value) {
                return $.inArray(value, startsWith) < 0 &&
                    containsMatcher.test(value.label || value.value || value);
            });

            response(startsWith.concat(contains));
            },
            focus: function() {
            // prevent value inserted on focus
            return false;
            },
            select: function( event, ui ) {
            var terms = split( this.value );
            // remove the current input
            terms.pop();
            // add the selected item
            terms.push( ui.item.value );
            // add placeholder to get the comma-and-space at the end
            terms.push( "" );
            this.value = terms.join( " " );
            return false;
            }
            });

    });
    </script> 
```

编辑：就像谷歌框一样，下拉菜单应该包含在输入框的宽度内，例如，输入框中最后一个单词的下拉框应该调整大小而不是向右而是向左。下拉框的右边缘应与输入框的右边缘对齐，并且下拉框的总宽度（如果单词与输入框一样大或大于输入框）不应超过输入框的宽度。

**更新：** 这是类似 google 的自动完成功能的最终模式：[Fiddle](http://jsfiddle.net/jc92619/T27PG/32/)（2013 年 16 月 2 日更新）
特点：
1）修复了多个单词按字母顺序对建议进行排序（[jQuery-ui 自动完成多个值按字母顺序排序结果](https://stackoverflow.com/questions/14784794/jquery-ui-autocomplete-multiple-values-sort-results-alphabetically)）
2）从2 个数组，第一个建议在输入框的全宽处打开，如在谷歌中，其余建议在最长建议的宽度处
3) 修复了在“空格”之后输入单词之前下拉打开的错误（多个值）。
4）防止下拉菜单在末尾保持打开状态，同时在其间添加单词。
5) 16/2/2013 更新：当从建议框输入的标签长度​​超过输入框长度时，输入下一个标签时，输入框从第一个标签显示或移回第一个标签位置，不是从此处看到的光标最后放置的位置 - [http://jqueryui.com/autocomplete/#multiple](http://jqueryui.com/autocomplete/#multiple)。这已得到修复。

这是一个类似的小提琴，只使用一个数组，建议总是在最长建议的宽度 - [FIDDLE](http://jsfiddle.net/jc92619/3yTPJ/3/)

感谢 Jeffery To 提供了该问题的主要解决方案，感谢 Vadim 和 Dom，他们的回答提供了对创建上述 mod 有用的想法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T02:45:43.973

正如其他答案所建议的那样，我们测量输入字段中文本的宽度（使用隐藏元素），然后偏移自动完成框。我们还可以重置自动完成框的宽度，使其仅与最长建议（[演示](http://jsfiddle.net/jefferyto/fQQEd/10/)）一样宽：

```
open: function( event, ui ) {
    var input = $( event.target ),
        widget = input.autocomplete( "widget" ),
        style = $.extend( input.css( [
            "font",
            "border-left",
            "padding-left"
        ] ), {
            position: "absolute",
            visibility: "hidden",
            "padding-right": 0,
            "border-right": 0,
            "white-space": "pre"
        } ),
        div = $( "<div/>" ),
        pos = {
            my: "left top",
            collision: "none"
        },
        offset = -7; // magic number to align the first letter
                     // in the text field with the first letter
                     // of suggestions
                     // depends on how you style the autocomplete box

    widget.css( "width", "" );

    div
        .text( input.val().replace( /\S*$/, "" ) )
        .css( style )
        .insertAfter( input );
    offset = Math.min(
        Math.max( offset + div.width(), 0 ),
        input.width() - widget.width()
    );
    div.remove();

    pos.at = "left+" + offset + " bottom";
    input.autocomplete( "option", "position", pos );

    widget.position( $.extend( { of: input }, pos ) );
} 
```

**更新：**修复了自动完成框定位

**更新 2：**另一个自动完成框定位修复

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T17:43:27.273

使用[JQuery 的多个演示](http://jqueryui.com/autocomplete/#multiple)，您可以做的是创建一个隐藏的 span 元素

```
<span id="characterSpan" style="visibility: hidden;"></span> 
```

并用它来存储输入的`val()`.

从那里，用于`.width()`获取跨度的宽度并使用自动完成的`open( event, ui )`事件：

```
open: function( event, ui ) {
        var span = $('#characterSpan');
        var width = span.width();
        width > $('#query').width() ? 
        width = parseInt($('#query').position().left + $('#query').width()) : 
        width = parseInt($('#query').position().left + width);

        $('.ui-autocomplete.ui-menu').css('left', width + 'px');
    } 
```

演示：http: [//jsfiddle.net/dirtyd77/5ySF9/8/](http://jsfiddle.net/dirtyd77/5ySF9/8/)

希望我解释得足够好，如果您有任何问题，请告诉我！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T16:25:46.590

我的答案基于[这个问题](https://stackoverflow.com/questions/13347471/caret-position-in-pixels-in-a-text-field)的答案。正如那个答案中提到的，IE<9 需要一些额外的代码才能完成这项工作。

基本上，您创建一个跨度，您可以在其中写出输入元素的内容。然后，您使用此跨度的宽度来计算偏移量。JqueryUI 提供了一个[位置](http://api.jqueryui.com/position/)挂钩，您可以在其中实际偏移该值。所以 HTML

```
<input id="query" style="width: 300px" />
<span id="faux" style="display:none" /> 
```

和 JS

```
 var query= $("#query");
    var faux = $("#faux");
    query.autocomplete({
        source: mySource
    }).on("keydown", function() {
        var off = query.selectionStart;
        faux.text(query.val().substring(0, off).replace(/\s/g, "\u00a0"));
        query.autocomplete("option", "position", 
              {my: "left top", at: "left+" + faux.outerWidth() + " bottom"});
    }); 
```

[工作 JSFiddle](http://jsfiddle.net/PtEfz/)

# algorithm - 1个作家，M个读者消费相同的物品

> ID：14672438
> 
> 赞同：3
> 
> 时间：2013-02-03T12:24:18.963
> 
> 标签：algorithm, synchronization, shared-memory, semaphore, writers

假设这个问题：2个程序，A和B，A的1个进程，M的M个进程，1个名为var的共享变量

```
A
main(){ 
   int i, a[50]; 
   for(i=0;i<50;i++) 
       var = a[i]; 
} 

B
main(){ 
   int i, b[50]; 
   for(i=0;i<50;i++) 
       b[i] = var; 
} 
```

现在，我需要做的是确保对于 A 中的每个循环，每个 M B 进程读取共享变量（一次！）并将其存储在它们的数组中。所以最后每个 B 进程都会在它们的 b 数组中拥有一个 a 数组的副本。这是一个信号量问题，解决方案可以是伪代码，因此语言无关紧要。

一个不起作用的初始解决方案：我正在使用初始化为 0 的信号量 B，每次 A 写一些东西时，我都会将 B 增加 M，然后执行 down(A)。在每个 B 循环开始时，我都会执行 down(B)。然后在 B 的每个循环结束时，我检查 M 阅读器是否读取并存储了 var，如果有，我正在做 up(A)。

显然，以上内容让单个 B 进程“消耗”了所有应该通过 M 个阅读器传播的 M 个用途。那么我如何 - 智能地 - 确保每个 B 只会读取每个 var 一次？一组 M 信号量，每个 M 一个，可以完成这项工作，但这很可能不是练习所要求的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:19:36.473

你可以用四个信号量来做到这一点。一个意思是“A读取一个偶数位置”。一个意思是“B写了一个偶数位置”。一个意思是“A读取一个奇怪的位置”。最后一个意思是“B写了一个奇怪的位置”。

A 读取 a[0]，然后向第一个信号量发出 M 次信号，然后在第二个信号量上等待 M 次。B 写入 b[0] 然后向第二个信号量发出一次信号。

然后 A 读取 a[1]，向第三个信号量发出 M 次信号，并在第四个信号量上等待 M 次。B 写入 b[1] 并向第四个信号量发出一次信号。

然后在处理数组的奇数/偶数元素时在信号量之间切换。

很明显这是一个家庭作业问题，因为这似乎不是一个现实的场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T15:07:19.343

一个实施的例子

```
// Before A and any B run, init 2 x M x 50 semaphores
// (set to 0, but usually they're automatically initialized by the system to
// something equivalent to 0, meaning no-access)

// Create [M][50] semaphores and init to no access for Bs
for (i=0 ; i<M ; i++)
  for (j=0 ; j<50 ; j++)
     asems[i][j] = 0; // no access for Bi index j

// Create [M][50] semaphores to block A before it goes to next iteration
for (i=0 ; i<M ; i++)
  for (j=0 ; j<50 ; j++)
     bsems[i][j] = 0; // no access for A until all B's say ok for that index

// A

for (i=0 ; i<50 ; i++) { 
   var = a[i];

   // release a-sems and, then, wait for b-sems in two separate loops
   // or you may have a deadlock if you use one loop only...
   // (since we don't know if B[i] always ends before B[i+1])
   for (j=0 ; j<M ; j++) {
      release ( asems[j][i] )
   }
   for (j=0 ; j<M ; j++) {
      wait ( bsems[j][i] )
   }
}

// a B

ME = id  // id is the B's unique id from 0 to 49

for (i=0 ; i<50 ; i++) { 
  wait ( asems[ME][i] )
  b[i] = var
  relase ( bsems[ME][i] )
} 
```

可以制作一个更复杂的算法，只使用 [50]（而不是 [M][50）信号量。通常*等待*和*释放*由类似于（由系统处理）的东西呈现，它们在*关键部分中运行*

```
wait ( sem ) {
   wait_in_sem_fifo_until (sem > 0) 
   sem--
}

release ( sem ) {
   sem++
} 
```

# api - BigCommerce API 检索订单中的特定货件并更新

> ID：14672447
> 
> 赞同：2
> 
> 时间：2013-02-03T12:25:04.530
> 
> 标签：api, bigcommerce

我尝试使用 bigcommerce API 来检索订单中的特定货件。

这是我的代码

```
$Orders = BigCommerce_Api::getOrder(100);
$order_shipments = Bigcommerce_Api::getCollection('/orders/'.$Orders->id. '/shipments/'. 1, 'Shipment'); 
```

但它显示一个警告：

> array_map()：参数 #2 应该是第 220 行 C:\xampp\htdocs\comm\Bigcommerce\Api.php 中的一个数组

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:27:06.203

已经解决了这个问题在 Big Commerce API 中出现了一些编码错误

在 Resources.php 更新代码

```
class Bigcommerce_Api_Shipment extends Bigcommerce_Api_Resource {

protected $ignoreOnCreate = array(
    'id',
    'order_id',
    'date_created',
    'customer_id',
    'shipping_method',
);

protected $ignoreOnUpdate = array(
    'id',
    'order_id',
    'date_created',
    'customer_id',
    'shipping_method',
    'items',
    'billing_address',
    'shipping_address',
);

public function create()
{
    return Bigcommerce_Api::createResource('/orders/' . $this->order_id . '/shipments', $this->getCreateFields());
}

public function update()
{
        return Bigcommerce_Api::updateResource('/orders/' . $this->order_id . '/shipments/' . $this->id, $this->getUpdateFields());

}

} 
```

# php - 用户指定的内容共享，如 G+

> ID：14672448
> 
> 赞同：0
> 
> 时间：2013-02-03T12:25:25.077
> 
> 标签：php, mysql, sql, database, database-design

我正在构建一个需要与组或个人用户共享的站点。我知道谷歌不使用 mysql 的事实，但我想知道如何在我的网站上复制这样的功能。在 g+ 上，您可以：

1.  与“公众”分享帖子（每个人都可以看到）。
2.  与“所有圈子”分享信息（您圈子中的每个人都可以看到）。
3.  与圈子和个人用户分享帖子。例如 post =“我的第一篇文章”并与家人、朋友、用户 1（Joey tribbiani）、用户 2（Ross geller）等共享。

条件：

1.  如果帖子与圈子共享并且新用户添加到圈子中，那么他应该能够看到以前与该圈子共享的所有帖子。
2.  如果用户从圈子中移除。(s) 他看不到与该圈子共享的帖子，除了他评论过的帖子。

目前我的数据库表是这样的。

**Circle_category**

```
Cat_id
Cat_name
user_id 
```

**帖子**

```
post_id 
user_id
post
is_public
all_circle 
```

**Post_to_circle**

```
entry_id
post_id
cat_id 
```

**Post_to_user**

```
entry_id
post_id
user_id 
```

**在家庭圈子中发布用户（在 Circle_category 中 cat_id 为 1 ）可以看到**

1.  他们可以看到公开的帖子。
2.  他们可以查看与所有圈子分享的信息。
3.  他们可以查看与家人圈子分享的信息。
4.  他们可以看到与他们共享的帖子（个人用户）。

SQL

```
 SELECT p.* FROM posts p
    JOIN Post_to_circle pc
    ON p.post_id = pc.post_id
    JOIN Post_to_user pu
    ON p.post_id = pu.post_id
    WHERE p.is_public = 1 
    OR all_circle = 1
    OR pc.cat_id = $cat_id 
    OR pu.user_id = $user_id 
```

**问题：**
首先，我已经能够从案例 1（查看所有公开帖子）、案例 2（与所有圈子共享的帖子）中获得帖子，但其他 2 个案例不起作用。我考虑了一下，发现主要问题是我指定了 where 子句来获取 p.is_public = 1 的帖子，这意味着它忽略了 p.is_public = 0 的行。我如何更新查询以显示涵盖所有内容的帖子四个案例，也涵盖了我们一开始谈到的条件。

其次，有没有更好的方法来构建我的表格？我不确定我的做法是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:00:18.923

从快速阅读的低谷中，我只能说：

您正在使用连接语句而不是左连接语句。

using join 意味着：保留 from 子句中使用的表中对于该 join 子句中指定的条件验证为 true 的所有行。

由于您使用的是 2 个语句，因此第一个连接会丢弃所有不需要连接的记录，第二个连接会丢弃第二个连接中没有所需连接的所有记录，但它只使用与第一个匹配的记录加入。

您应该改用左连接。这保留了第一个表中的所有行。所有没有匹配的行，获取连接表中指定列的 NULL 值

简单的例子：

用户表：

```
user_id
name 
```

用户帖子

```
post_id
user_id
content
created 
```

相关查询：

```
select *
from users u
JOIN user_posts up on up.user_id = u.user_id and up.created > date_sub(curdate(), interval 1 day) 
```

这将使用所有用户并匹配该用户在一天前创建的每个帖子。如果用户在最后一天没有帖子，他将不会出现在结果集中。

将此示例更改为

```
select *
from users u
LEFT JOIN user_posts up on up.user_id = u.user_id and up.created > date_sub(curdate(), interval 1 day) 
```

这将使用所有用户并与该用户在一天前创建的每个帖子进行匹配，如果用户在最后一天没有发布，他仍将在结果集中，但帖子中的所有列表将为 NULL

where 过滤连接后剩下的所有行。（如果可以加快查询速度，mysql 会在加入前使用 where 子句）。

更改您的查询：

对于所有不同的情况，确保 where 语句中的子句被包裹在 () 之间。这也不是完整的答案，因为缺少信息（例如用户表、圈子关系表、朋友关系）

all_circles 选项也让我感到困惑，所以查询中缺少它，但这应该让你走上正轨

```
SELECT p.* FROM posts p
    left JOIN Post_to_circle pc
    ON p.post_id = pc.post_id and /* define statement for valid circles for user you're trying to get the posts for */
    left JOIN Post_to_user pu
    ON p.post_id = pu.post_id and /* define statement for valid friends for user you're trying to get the posts for */
    WHERE 
/* 1 day old */
p.created > date_sub(curdate(), interval 1 day)
AND (
/* is public */
p.is_public = 1 OR
/* or to friends */
pu.id is not null OR
/* or to circles */
pc.id is not null
) 
```

另外，我怀疑你需要 2 个子查询，这不是最好的做法，我的建议是找到朋友的所有正确 ID，以及有效圈子的所有 ID，然后使用 IN 子句每个加入声明（部分在评论中）

# css - 为什么在底部的 Wordpress 博客侧边栏？

> ID：14672450
> 
> 赞同：0
> 
> 时间：2013-02-03T12:25:34.583
> 
> 标签：css, wordpress, wordpress-theming

从几天前开始，我正在查看我的右侧边栏[博客](http://umeshpatil.wordpress.com/)的右侧边栏显示在底部和页脚上方。

谁能说出将侧边栏带到右侧需要进行哪些 CSS 更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:27:46.930

我想你想念 float:left in css

# ios - Xcode 4.6 因 ARC 崩溃？

> ID：14672451
> 
> 赞同：-1
> 
> 时间：2013-02-03T12:25:40.687
> 
> 标签：ios, xcode, objective-c++

在 Xcode 4.6 中令人难以置信。

如果我将一个变量初始化为某个东西，它会释放内存。但是如果这个变量有一个随机值呢？

```
class X 
{

private:

    NSThread* thr;

public:

    X();
}; 
X :: X()
    {
        thr = 0; // BOOM !!!?
    }
X* x = new X(); // Constructor crashes. 
```

但是如果构造函数是内联的，它就不会！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T13:25:08.310

在 C++ 构造函数中，需要使用[初始化列表](https://stackoverflow.com/questions/4589237/c-initialization-lists)来设置成员变量的初始值。

```
X :: X() : thr(nil) 
{
} 
```

否则，如您所见，`thr`最初将有一个垃圾值，当 ARC 尝试发送`-release`到该值时，您可能会崩溃。

正如[ARC 文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)所说：

> ARC 无法区分旨在“初始化”动态内存的赋值运算符和旨在潜在替换值的赋值运算符。

# c - 在C中读取没有maxsize的用户输入

> ID：14672454
> 
> 赞同：1
> 
> 时间：2013-02-03T12:26:09.850
> 
> 标签：c, input, stdin

在 C 中，我可以使用该`char *fgets(char *s, int size, FILE *stream)`函数从标准输入读取用户输入。但用户输入的大小仅限于`size`. 如何读取可变大小的用户输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:30:26.660

此函数从标准输入读取直到遇到文件结尾，并返回读取的字符数。修改它以准确读取一行或类似内容应该相当容易。

```
ssize_t read_from_stdin(char **s)
{
    char buf[1024];
    char *p;
    char *tmp;

    ssize_t total;
    size_t len;
    size_t allocsize;

    if (s == NULL) {
        return -1;
    }

    total = 0;

    allocsize = 1024;
    p = malloc(allocsize);
    if (p == NULL) {
        *s = NULL;
        return -1;
    }

    while(fgets(buf, sizeof(buf), stdin) != NULL) {
        len = strlen(buf);

        if (total + len >= allocsize) {
            allocsize <<= 1;
            tmp = realloc(p, allocsize);
            if (tmp == NULL) {
                free(p);
                *s = NULL;
                return -1;
            }

            p = tmp;
        }

        memcpy(p + total, buf, len);
        total += len;
    }       

    p[total] = 0;
    *s = p;

    return total;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T12:30:39.327

在 C 中，您负责缓冲区，并负责它们的大小。所以你不能为你准备一些动态缓冲区。因此，唯一的解决方案是使用循环（fgets 或 fgetc - 取决于您的处理和停止条件）

如果你超越 C 到 C++，你会发现你可以接受可变大小的 std::string 对象（你需要处理单词和/或行终止 - 并再次循环）

# mysql - ON 子句是否用于 JOIN 以外的其他地方？

> ID：14672457
> 
> 赞同：0
> 
> 时间：2013-02-03T12:26:33.093
> 
> 标签：mysql

```
SELECT * FROM Table JOIN Other ON Table.id = Other.tableId 
```

我正在构建一个 MySQL 包装器，并且想知道“ON”关键字是否仅与连接（如上）一起使用，还是在其他地方使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:33:13.640

你不能在`ON`某个地方单独使用。它仅与`JOIN`s一起使用

但是你可以在没有 ON 的情况下使用它们的连接

```
 JOIN ... USING   //--according to SQL:2003 
```

例子：

```
a LEFT JOIN b USING (c1,c2,c3)
a LEFT JOIN b ON a.c1=b.c1 AND a.c2=b.c2 AND a.c3=b.c3 
```

编辑：

该`ON`子句可以引用其右侧命名的表中的列。下面的示例`ON`子句只能引用其操作数。

例子：

```
 CREATE TABLE t1 (i1 INT);
  CREATE TABLE t2 (i2 INT);
  CREATE TABLE t3 (i3 INT);
  SELECT * FROM t1 JOIN t2 ON (i1 = i3) JOIN t3; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T12:52:11.990

该`ON` *关键字*也用于

*   [`INSERT...ON DUPLICATE KEY`](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)
*   [`ON DELETE`/`ON UPDATE`](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)
*   [`CREATE INDEX`](http://dev.mysql.com/doc/refman/5.5/en/create-index.html)
*   [`CREATE TRIGGER`](http://dev.mysql.com/doc/refman/5.5/en/create-trigger.html)
*   [`GRANT`](http://dev.mysql.com/doc/refman/5.5/en/grant.html)

其中一些是特定于 MySQL 的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T12:30:58.553

它仅在使用时出现 `ANSI SQL-92 JOIN`。*没有别的*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T12:46:52.610

该`ON`关键字也可以在其他几个地方找到，例如**[`CREATE TABLE`](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)**和`ALTER TABLE`表语句（在`FOREIGN KEY`定义中：） `ON DELETE CASCADE`，在**[`CREATE TRIGGER`](http://dev.mysql.com/doc/refman/5.5/en/create-trigger.html)**语法（`ON tbl_name FOR EACH ROW`）中，在**[`CREATE INDEX`](http://dev.mysql.com/doc/refman/5.5/en/create-index.html)**语句中，等等。

* * *

对于连接，MySQL 文档中的**[`JOIN`语法包含所有内容：](http://dev.mysql.com/doc/refman/5.5/en/join.html)**

> MySQL 支持`JOIN`语句的 table_references 部分`SELECT`和多表`DELETE`和`UPDATE`语句的以下语法：

```
table_references:
    table_reference [, table_reference] ...

table_reference:
    table_factor
  | join_table

table_factor:
    tbl_name [[AS] alias] [index_hint_list]
  | table_subquery [AS] alias
  | ( table_references )
  | { OJ table_reference LEFT OUTER JOIN table_reference
        ON conditional_expr }

join_table:
    table_reference [INNER | CROSS] JOIN table_factor [join_condition]
  | table_reference STRAIGHT_JOIN table_factor
  | table_reference STRAIGHT_JOIN table_factor ON conditional_expr
  | table_reference {LEFT|RIGHT} [OUTER] JOIN table_reference join_condition
  | table_reference NATURAL [{LEFT|RIGHT} [OUTER]] JOIN table_factor

join_condition:
    ON conditional_expr
  | USING (column_list) 
```

所以,`ON`可以用在`SELECT`,`UPDATE`和`DELETE`语句中。它可以与`JOIN`, `LEFT JOIN`, `RIGHT JOIN`（以及等效的`INNER JOIN`, `LEFT OUTER JOIN`, `RIGHT OUTER JOIN`）一起使用。

要么`ON`或`USING`将被使用，而不是两者。

它不能与`NATURAL JOIN`（当然）一起使用。

以及与 ANSI/ISO SQL 标准的一些区别：

*   你可以`ON`使用`CROSS JOIN`.

*   也（可选）与`STRAIGHT_JOIN`（这是 MySQL 的补充）

*   您可以使用`JOIN`和`INNER JOIN` **不** `ON`使用.

*   `UPDATE`并且`DELETE`语法与标准也有一些差异。

# c++ - 如何使用 LLVM API 获取全局变量的初始化器

> ID：14672458
> 
> 赞同：1
> 
> 时间：2013-02-03T12:26:33.430
> 
> 标签：c++, c, linux, llvm, x86-64

我正在编写一个适用于 LLVM IR 代码的 LLVM 通行证。目标的一部分是读取全局变量的初始值，其中全局变量可以是任何类型，从基本类型到结构和类。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T12:51:44.697

如果您`getInitializer`在`GlobalVariable`实例上调用，您将获得类型的初始化程序`Constant`（尽管请确保您首先调用`hasInitializer`或其姊妹方法之一，以验证是否有初始化程序）。IIRC 全局变量和常量也被实现为同一事物，因此`isConstant`如果您不想要它们，请使用它们来过滤掉常量。

当然，a`Constant`是抽象基类；实际类型将是它的一个子类型，您可以在[文档页面上的图表](http://llvm.org/docs/doxygen/html/classllvm_1_1Constant.html)中看到它。`isa`您可以通过/ `cast`/以通常的方式查询并获取实际的常量类型`dyn_cast`，或者您可以在其上使用（毕竟`getType`是常量）并从那里开始工作。`Value`

最后，要从一个`Module`使用`global_begin`/`global_end`迭代器中获取所有全局变量，或者只使用`getGlobalList`它（它有自己的迭代器）。

# android - Android Fragments - 我做错了什么

> ID：14672460
> 
> 赞同：0
> 
> 时间：2013-02-03T12:26:34.437
> 
> 标签：android

我正在尝试制作动态图片（使用您的手指）+ ViewPagerIndicator（点）

问题是我不想开始。他不适合这一行的布局是 17

```
android:name=".PlaceSlideFragment" 
```

PlaceDetailsFragment

```
public class PlaceDetailsFragment extends SherlockFragment {
    PlaceSlidesFragmentAdapter mAdapter;
    ViewPager mPager;
    PageIndicator mIndicator;

    public static final String TAG = "detailsFragment";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.main,
                container, false);

        mAdapter = new PlaceSlidesFragmentAdapter(getActivity()
                .getSupportFragmentManager());

        mPager = (ViewPager) view.findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        mIndicator = (CirclePageIndicator) view.findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);
        ((CirclePageIndicator) mIndicator).setSnap(true);

        mIndicator
                .setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
                    @Override
                    public void onPageSelected(int position) {
                        Toast.makeText(PlaceDetailsFragment.this.getActivity(),
                                "Changed to page " + position,
                                Toast.LENGTH_SHORT).show();
                    }

                    @Override
                    public void onPageScrolled(int position,
                            float positionOffset, int positionOffsetPixels) {
                    }

                    @Override
                    public void onPageScrollStateChanged(int state) {
                    }
                });
        return view;
    }

} 
```

放置幻灯片片段

```
public final class PlaceSlideFragment extends Fragment {
    int imageResourceId;

    public PlaceSlideFragment(int i) {
        imageResourceId = i;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        ImageView image = new ImageView(getActivity());
        image.setImageResource(imageResourceId);

        LinearLayout layout = new LinearLayout(getActivity());
        layout.setLayoutParams(new LayoutParams(null));

        layout.setGravity(Gravity.CENTER);
        layout.addView(image);

        return layout;
    }
} 
```

PlaceSlidesFragmentAdapter

```
public class PlaceSlidesFragmentAdapter extends FragmentPagerAdapter implements
IconPagerAdapter {

private int[] Images = new int[] { R.drawable.real_pixels, R.drawable.real_pixels,
    R.drawable.real_pixels, R.drawable.real_pixels

};

protected static final int[] ICONS = new int[] { R.drawable.ic_launcher,
    R.drawable.ic_launcher, R.drawable.ic_launcher, R.drawable.ic_launcher };

private int mCount = Images.length;

public PlaceSlidesFragmentAdapter(FragmentManager fm) {
super(fm);
}

@Override
public Fragment getItem(int position) {
return new PlaceSlideFragment(Images[position]);
}

@Override
public int getCount() {
return mCount;
}

@Override
public int getIconResId(int index) {
return ICONS[index % ICONS.length];
}

public void setCount(int count) {
if (count > 0 && count <= 10) {
    mCount = count;
    notifyDataSetChanged();
}
}
} 
```

主要活动

```
public class MainActivity extends FragmentActivity{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

} 
```

主要（布局）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="200dp" />

    <com.viewpagerindicator.CirclePageIndicator
        android:id="@+id/indicator"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="10dip" />

    <fragment   
            android:name=".PlaceSlideFragment"
            android:id="@+id/fragment"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />
</LinearLayout> 
```

日志猫

```
02-03 11:06:18.963: E/AndroidRuntime(10993): FATAL EXCEPTION: main
02-03 11:06:18.963: E/AndroidRuntime(10993): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test/com.test.MainActivity}: android.view.InflateException: Binary XML file line #17: Error inflating class fragment
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.os.Looper.loop(Looper.java:137)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at java.lang.reflect.Method.invokeNative(Native Method)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at java.lang.reflect.Method.invoke(Method.java:511)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at dalvik.system.NativeStart.main(Native Method)
02-03 11:06:18.963: E/AndroidRuntime(10993): Caused by: android.view.InflateException: Binary XML file line #17: Error inflating class fragment
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.app.Activity.setContentView(Activity.java:1881)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at com.test.MainActivity.onCreate(MainActivity.java:16)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.app.Activity.performCreate(Activity.java:5104)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-03 11:06:18.963: E/AndroidRuntime(10993):    ... 11 more
02-03 11:06:18.963: E/AndroidRuntime(10993): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment .PlaceSlideFragment: make sure class name exists, is public, and has an empty constructor that is public
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.support.v4.app.Fragment.instantiate(Fragment.java:391)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.support.v4.app.Fragment.instantiate(Fragment.java:359)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:262)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
02-03 11:06:18.963: E/AndroidRuntime(10993):    ... 21 more
02-03 11:06:18.963: E/AndroidRuntime(10993): Caused by: java.lang.ClassNotFoundException: Didn't find class ".PlaceSlideFragment" on path: /data/app/com.test-1.apk
02-03 11:06:18.963: E/AndroidRuntime(10993):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
02-03 11:06:18.963: E/AndroidRuntime(10993):    at android.support.v4.app.Fragment.instantiate(Fragment.java:381) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:31:12.930

在它前面加上包名

假设 PlaceSlideFragment 所在的包是 com.example 所以像这样改变它

```
<fragment   
            android:name="com.example.PlaceSlideFragment"
            android:id="@+id/fragment"
            android:layout_width="match_parent"
            android:layout_height="match_parent" /> 
```

确保你有一个公共的空构造函数

```
public PlaceSlideFragment(){

} 
```

**编辑**

如果您使用的是兼容性库中的Fragment ，请确保您的`Activity`是`FragemntActivity``Sherlock``SherlockFragmentActivity`

# java - 使用 Com4j 从 QC 获取测试用例列表

> ID：14672462
> 
> 赞同：1
> 
> 时间：2013-02-03T12:26:55.907
> 
> 标签：java, hp-quality-center, com4j

我编写了以下代码来从 QC 中检索测试用例列表，但它`tsTestFactory`为空，而当我评估时`qcConnect.testSetFactory()`它时返回一个 Com4j 对象。

我在这里做错了什么

```
ITestSetFactory tsFactory = (qcConnect.testSetFactory()).queryInterface(ITestSetFactory.class);
ITestSetTreeManager tsTreeMgr = (qcConnect.testSetTreeManager()).queryInterface(ITestSetTreeManager.class);

ITestSetFolder tsFolder = (tsTreeMgr.nodeByPath(nodePath)).queryInterface(ITestSetFolder.class);
IList its1 = tsFolder.findTestSets(testSetName, false, "");

Iterator itr = its1.iterator();
while (itr.hasNext())
{
    Com4jObject comObj = (Com4jObject) itr.next();
    ITestSet sTestSet = comObj.queryInterface(ITestSet.class);
    System.out.println(sTestSet.name());
    System.out.println(sTestSet.id());

    ITestFactory tsTestFactory = (qcConnect.testSetFactory()).queryInterface(ITestFactory.class);
    ITSTest sTSTest = (tsTestFactory.item(sTestSet.id())).queryInterface(ITSTest.class);

    System.out.println(sTSTest.name());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:42:37.793

TestFactory 与 TestSetFactory 不同，所以不能这样做：

ITestFactory tsTestFactory = (qcConnect.testSetFactory()).queryInterface(ITestFactory.class);

尝试使用 qcConnect.testFactory 而不是 qcConnect.testSetFactory。

# cakephp - CakePHP Cake Bake “未找到数据库配置”

> ID：14672465
> 
> 赞同：1
> 
> 时间：2013-02-03T12:27:30.957
> 
> 标签：cakephp, cakephp-1.3

我正在开发一个遗留的 CakePHP 1.3 应用程序，虽然我有多年的 PHP 经验，但我仍在使用 CakePHP。我正在关注 Jamie Munro 的[*使用 CakePHP 的快速应用程序开发*](https://rads.stackoverflow.com/amzn/click/com/1460954394)中的第 4 章“如何使用面包店” ，但是他建议的步骤似乎也没有按照我的预期进行。

我觉得解释这一点的一个好方法是通过所涉及的步骤：

1.  按照前面章节中概述的书籍“Hello World”示例，我在我的机器上的这个位置设置了一个基本的 CakePHP 应用程序：**/home/public_html/helloworld.local**。当我访问时，我可以在本地计算机上的 Web 浏览器中看到“Hello World”示例：`http://helloworld.local/users/add`

2.  第 4 章建议我移至此目录：`home/public_html/helloworld.local/cake/console`

3.  然后我运行：`./cake bake`

4.  系统提示我输入应用程序的位置，然后添加： `/home/public_html/helloworld.local/app`

5.  然后我继续为接下来的几个选择选择默认值，直到遇到该行之前没有问题： `Your database configuration was not found. Take a moment to create one.`

我不明白这一点，因为在**~/public_html/helloworld.local/app/config/database.php**中配置了一个数据库文件，并且当我访问前面概述的 helloworld 应用程序时（在我的本地计算机上可用`http://helloworld.local/users/add`）时，有一个数据库连接成功建立，可以插入记录。

当有机会通过蛋糕烘烤时，我也尝试重新输入我的数据库详细信息，但在成功添加正确的详细信息后最终出现错误：

> 致命错误：在第 260 行的 /home/public_html/helloworld.local/cake/console/libs/tasks/db_config.php 中找不到类 'DATABASE_CONFIG'

但无论哪种方式，它都应该找到现有的数据库连接详细信息，所以不确定发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:03:14.100

我手头没有正在运行的 CakePHP 1.3 安装，但这就是在那个位置发生的事情：

```
// @link: https://github.com/cakephp/cakephp/blob/1.3/cake/console/libs/tasks/db_config.php#L260
config('database');
$db = new $this->databaseClassName; // i.o.w. $db = new DATABASE_CONFIG; 
```

这一行： config('database');

无非就是包含了 database.php 配置文件，简化为；

```
include_once(CONFIGS . $arg . '.php'); // i.o.w. include_once(CONFIGS . 'database.php'); 
```

（[https://github.com/cakephp/cakephp/blob/1.3/cake/basics.php#L77](https://github.com/cakephp/cakephp/blob/1.3/cake/basics.php#L77)）

所以IMO有两个问题可能会导致你的错误；

1.  未找到 app/config/database.php

您可以尝试检查这是否输出正确的路径：

```
die(CONFIGS . 'database.php'); 
```

1.  你的app/config/database.php有错误，导致DATABASE_CONFIG类格式错误无法初始化

**注意事项显然，您正在运行的***所有内容都* 在“烘烤”，包括设置新的数据库配置。这可能会覆盖您现有的数据库配置。可以只烘焙应用程序的一部分（例如只烘焙控制器或模型）。CakePHP 1.3 中的烘焙手册位于：http: [//book.cakephp.org/1.3/en/The-Manual/Core-Console-Applications/Code-Generation-with-Bake.html](http://book.cakephp.org/1.3/en/The-Manual/Core-Console-Applications/Code-Generation-with-Bake.html)

**如果这** 是您的第一个 CakePHP 项目，您真的应该考虑升级到 CakePHP 2.x CakePHP 1.3 的选项确实过时了，虽然它仍然可以正常运行，但我不会在 1.3 上投入太多时间作为CakePHP 2.x 发生了很多变化。最好从 CakePHP 2.x 开始，然后从 1.3 开始，学习那些在 CakePHP 2 中不再适用的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T13:46:26.683

*要使用像cake bake*这样的控制台命令，您必须使用操作系统终端（对于 linux）/命令提示符（对于 windows）。因此，您必须在控制台中执行*第 2 步和第 3*步中提到的步骤。您可以在此处阅读[文档](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/The-CakePHP-Console.html)以了解如何使用控制台命令。

然后，确保您拥有文件**home/public_html/helloworld.local/app/config/database.php**。我希望您从其名称中删除*.default*并将其重命名为*database.php*。要将您的数据库与您的 cakephp 项目链接，您必须在*database.php*中指定凭据。

```
 var $default = array('driver'      => 'mysql',
                     'persistent'  => false,
                     'host'        => 'localhost',
                     'login'       => 'root',
                     'password'    => 'password',
                     'database'    => 'database_name',
                     'prefix'      => ''
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-23T06:47:44.057

将您的`app/Config`文件夹复制到`app/Console`，因此最终路径将是`app/Console/Config`. 这对我有用。

# scala - 提取器：推断的类型参数 X 不符合方法 unapply 的类型参数边界

> ID：14672468
> 
> 赞同：3
> 
> 时间：2013-02-03T12:28:02.940
> 
> 标签：scala, pattern-matching, type-bounds

在下面的例子中，Scala 不能使用提取器，这让我发疯：

```
trait Sys[S <: Sys[S]]

object Element {
  object Foo {
    def unapply[S <: Sys[S]](foo: Foo[S]): Option[Any] = ???
  }
  trait Foo[S <: Sys[S]] extends Element[S]
}
trait Element[S <: Sys[S]] 
```

这是一个测试用例：

```
def test[S <: Sys[S]](elem: Element[S]) = elem match {
  case Element.Foo(_) => ???
  case _ => ???
} 
```

失败了

```
inferred type arguments [S] do not conform to method unapply's type parameter
  bounds [S <: Sys[S]] 
```

（在 Scala 2.9.2 和 2.10 中）。

* * *

如果我删除 F-bound 它可以工作：

```
trait Sys

object Element {
  object Foo {
    def unapply[S <: Sys](foo: Foo[S]): Option[Any] = ???
  }
  trait Foo[S <: Sys] extends Element[S]
}
trait Element[S <: Sys]

def test[S <: Sys](elem: Element[S]) = elem match {
  case Element.Foo(_) => ???
  case _ => ???
} 
```

我想这是那些“讨厌 Scala 的日子”之一。这可以这么傻吗？基本上它和[这个问题](https://stackoverflow.com/questions/7709182/scala-compiler-cannot-infer-mix-in-type-for-pattern-matching)一样，没有正确的答案。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-03T16:53:53.867

当尝试`test`使用`null`参数和`Sys[Any]`类型参数调用 a 时，它确实表示：

```
type arguments [Sys[Any]] do not conform to trait Element's type parameter 
  bounds [S <: Sys[S]] 
```

尝试方差：

```
trait Sys[-S]

object Element {
  object Foo {
    def unapply[S <: Sys[S]](foo: Foo[S]): Option[Any] = ???
  }
  trait Foo[S <: Sys[S]] extends Element[S]
}
trait Element[S <: Sys[S]]

def test[S <: Sys[S]](elem: Element[S]) = elem match {
  case f: Element.Foo[S] => "ok"
  case _ => "smth else"
}

// test
test(new Element.Foo[Sys[Any]](){})  // "smth else"
test(new Element[Sys[Any]](){})      // "ok" 
```

# blackberry - 类似 WhatsApp 的标签栏

> ID：14672474
> 
> 赞同：-1
> 
> 时间：2013-02-03T12:28:38.257
> 
> 标签：blackberry, user-interface, java-me, tabs, tabbar

如何在我的 BlackBerry 应用程序中创建类似于 BlackBerry 上的 WhatsApp 的标签栏？我想要 BlackBerry OS 7.0 中的该功能。我使用了管理器——Horizo​​ntalFieldManager 和 VerticalFieldManager——来实现它。但它看起来不像WhatsApp那么有吸引力。FieldTabController 可以帮我做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:52:41.117

如果您只是对代码进行调整，然后看看它的样子，它看起来不会很有吸引力。您需要从您认为有吸引力的设计开始。一旦你把这个目标组合成一个图像，你就开始编写代码使 UI 看起来像设计图像。

WhatsApp 选项卡栏不是 RIM 的内置 UI 管理器的简单组合。它有相当多的自定义 - 每个选项卡都有三种视觉状态，并且有一个跟随焦点的工具提示，以及右侧的上下文选项卡，该选项卡根据当前选择的主选项卡而变化。这意味着这里有几个交互的 UI 组件，而不仅仅是一个魔术管理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T19:05:33.697

本质上，您可能希望开始构建自己的自定义`Field`对象。

基本上，将`Field`类（或其他子类之一）子类化，并学会喜欢[paint(..) 方法](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Field.html#paint%28net.rim.device.api.ui.Graphics%29)和[Graphics API](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Graphics.html)。

# c# - 使用 fluentmigrator 运行 sql 脚本

> ID：14672476
> 
> 赞同：5
> 
> 时间：2013-02-03T12:28:46.007
> 
> 标签：c#, .net, oracle11g, database-migration, fluent-migrator

我有 SQL 脚本：

```
CREATE TABLE TESTTABLE1(
   ID_TESTTABLE1          NUMBER (18) NOT NULL,
   TESTTABLE_VALUE1       NUMBER (18),
   TESTTABLE_KEY1       NUMBER (18)) 
```

并使用 Fluentmigrator：

```
[Migration(201302021800)]
public class Migration_201302021800 : AutoReversingMigration
{
    public override void Up()
    {
        var url = @"Update_1.0.0.5.sql";
        Execute.Script(url);
    }
} 
```

它执行成功，如果我添加一些 SQL：

```
CREATE TABLE TESTTABLE1
(
  ID_TESTTABLE1          NUMBER (18) NOT NULL,
  TESTTABLE_VALUE1       NUMBER (18),
  TESTTABLE_KEY1       NUMBER (18)
);
CREATE TABLE TESTTABLE
(
  ID_TESTTABLE          NUMBER (18) NOT NULL,
  TESTTABLE_VALUE      NUMBER (18),
  TESTTABLE_KEY      NUMBER (18)
); 
```

在 Fluentmigrator 中执行失败，带有`Oracle exeption {"ORA-00911: invalid character"}`.

我的数据库是 Oracle 数据库。

有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T17:48:45.170

要为 Oracle 批处理语句，您需要将其包含在 BEGIN...END 块中。在您在评论中链接到的最后一个示例中，您在第二条语句之后和 END 关键字之前缺少一个分号。

```
BEGIN 
CREATE TABLE TESTTABLE1 
    ( 
      ID_TESTTABLE1          NUMBER (18) NOT NULL, 
      TESTTABLE_VALUE1       NUMBER (18), 
      TESTTABLE_KEY1       NUMBER (18) 
    ); 
CREATE TABLE TESTTABLE 
    ( 
      ID_TESTTABLE          NUMBER (18) NOT NULL, 
      TESTTABLE_VALUE      NUMBER (18), 
      TESTTABLE_KEY      NUMBER (18) 
    );
END; 
```

尽管 FluentMigrator 在这种情况下可以提供更好的支持。例如，当 FluentMigrator 处理来自 Sql Server 的多语句脚本时，它会拆分脚本并执行每个语句（[https://github.com/schambers/fluentmigrator/blob/master/src/FluentMigrator.Runner/Processors/SqlServer/ SqlServerProcessor.cs#L197-236](https://github.com/schambers/fluentmigrator/blob/master/src/FluentMigrator.Runner/Processors/SqlServer/SqlServerProcessor.cs#L197-236)）。所以我建议在[https://github.com/schambers/fluentmigrator/issues记录一个问题](https://github.com/schambers/fluentmigrator/issues)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T18:31:49.363

现在我不仅使用 BEGIN 和 END 语句，还使用 ​​EXECUTE IMMEDIATE 来创建 ALTER 和 DROP。对于 INSERT，我只使用 BEGIN 和 END。

```
BEGIN 
EXECUTE IMMEDIATE'CREATE TABLE TESTTABLE1 
( 
  ID_TESTTABLE1          NUMBER (18) NOT NULL, 
  TESTTABLE_VALUE1       NUMBER (18), 
  TESTTABLE_KEY1       NUMBER (18) 
)'; 
EXECUTE IMMEDIATE 'CREATE TABLE TESTTABLE 
( 
  ID_TESTTABLE          NUMBER (18) NOT NULL, 
  TESTTABLE_VALUE      NUMBER (18), 
  TESTTABLE_KEY      NUMBER (18) 
)';
END; 
```

# powershell - 如何在 PowerShell 中关闭所有打开的网络文件？

> ID：14672479
> 
> 赞同：6
> 
> 时间：2013-02-03T12:29:10.437
> 
> 标签：powershell, batch-file

我正在尝试将我的旧 BAT 脚本转换为 PowerShell 版本，但在谷歌搜索一小时后，我不知道该怎么做。

我正在寻找一种与旧结构非常相似的结构，找到打开的网络文件，获取它的 PID 并关闭它。

蝙蝠：

```
for /f "skip=4 tokens=1" %a in ('net files ^| findstr C:\Apps\') do net files %a /close 
```

电源外壳？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T17:20:53.490

这是另一种方式。我喜欢它更多地依赖于流水线，这是 PowerShell 的习惯用法：

```
net files | 
    where   { $_.Contains( "D:\" ) } |
    foreach { $_.Split( ' ' )[0] }   |
    foreach { net file $_ /close } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T13:02:17.647

Net 文件仍然是您最好的选择。尝试这样的事情：

```
$results = net file | Select-String -SimpleMatch "C:\Apps\"
foreach ($result in $results) {
    #Get id
    $id = $result.Line.Split(" ")[0]

    #Close file
    net file $id /close

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-03T13:48:52.070

您可以使用它来查看打开的文件：

```
$adsi = [adsi]"WinNT://./LanmanServer"

$resources = $adsi.psbase.Invoke("resources") | Foreach-Object {
    New-Object PSObject -Property @{
        ID = $_.gettype().invokeMember("Name","GetProperty",$null,$_,$null)
        Path = $_.gettype().invokeMember("Path","GetProperty",$null,$_,$null)
        OpenedBy = $_.gettype().invokeMember("User","GetProperty",$null,$_,$null)
        LockCount = $_.gettype().invokeMember("LockCount","GetProperty",$null,$_,$null)
    }
}

$resources 
```

然后过滤你要关闭的那些：

```
$resources | Where-Object { $_.Path -like 'c:\apps\*'} | 
Foreach-Object { net files $_.ID /close } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T13:00:08.600

试试这个 ：

```
#capture command output
$openfiles=net files
#parse all lines and watch for c:\apps\
$openfiles| foreach {
 if($_ -like '*c:\apps\*'){
    #if line contains c:\apps\ split it with space, the first element will be file id
    net files $_.split(' ')[0] /close
 }
} 
```

# php - 在我的 sql 中循环遍历数据库以获取所有结果并显示它们

> ID：14672480
> 
> 赞同：0
> 
> 时间：2013-02-03T12:29:11.093
> 
> 标签：php, mysql

我有 2 个表用户和消息： 包含、、和包含
`users`、、、，`id`我想选择`name`接收 器等于用户的相同 id 的所有行我如何循环它以获取它们？`email``password`
`msgs``id``sender``receiver``link`

我尝试做某事但没关系

```
$name_query = mysql_query("SELECT fullname,id FROM users WHERE email = '$email'");
$name = mysql_fetch_object($name_query);

$user_id = $name->id;

$result = mysql_query("SELECT receiver FROM mytable");

while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
    printf("ID: %s  Name: %s", $row[0], $row[1]);  
}

mysql_free_result($result);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:31:51.553

尝试这个：：

```
Select 
u.fullname,u.id
from 
`users` u
INNER JOIN msgs m ON (u.id=m.receiver)
WHERE email = '$email' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:32:45.277

您应该只检索您想要的行，而不是所有行（如果您的数据库中有 1.000.000 条消息怎么办？）。

这可以通过使用“JOIN”的一个查询来完成：http: [//dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T12:34:43.507

使用[join](http://dev.mysql.com/doc/refman/5.0/en/join.html)子句

```
SELECT m.*, u.email, u.name FROM `users` AS u
JOIN `msgs` AS m ON m.receiver = u.id
WHERE u.email = '$email' 
```

这给了你例如

```
| id | sender | receiver |   link   |      email       |      name       |  
+----+--------+----------+----------+------------------+-----------------+
|  1 |    1   |     2    |   adfd   | receiver's email | receiver's name | 
```

您可以将结果提取到关联数组并使用命名索引，例如：

```
$row['link']
$row['name'] 
```

或普通索引数组（正确的索引可以通过打印整个数组来找到）

```
print_r($row)

$row[3] // should be link
$row[5] // should be name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T12:38:40.497

在您的情况下，循环非常昂贵且无用。使用`LEFT JOIN`（如果任何列为 NULL，JOIN 或 INNER JOIN 将不返回任何内容）；

```
SELECT 
  u.*,
  m.sender, m.receiver, m.link
FROM users u
LEFT JOIN msgs m ON (m.receiver = u.id)
WHERE email = '$email' 
```

# android - 不渲染转换后的路径

> ID：14672482
> 
> 赞同：2
> 
> 时间：2013-02-03T12:29:30.613
> 
> 标签：android, drawing

我不确定我是否在 Android 中发现了错误，或者我的代码中是否存在错误。我认为这可能是我读到的硬件[加速错误的另一种（或新的）表现形式。](https://stackoverflow.com/questions/9837892/path-object-transformation-bug-on-android-4)我在 android 4.2 上运行，但`android:hardwareAccelerated="true"`在清单文件中设置并不能解决问题。

问题存在于自定义视图中。它有一个复杂的显示，所以`Path`我解析一个 SVG 文件并从元素的数据规范构建路径，而不是单独指定所有字段`<path>`。SGV 解析器还提取 SVG 绘图区域的宽度和高度，以便生成在 SVG 空间和空间之间转换的矩阵`View`：

```
Matrix t = new Matrix();

float scale = Math.min(viewWidth / svgWidth, viewHeight / svgHeight);
t.setScale(scale, scale); 
```

此变换应用于`onDraw(Canvas)`方法中的画布。问题是有些路径可以渲染，有些则不行。沿路径呈现的文本也是如此。

我想我已经找到了渲染和不渲染之间的区别：直线。正在渲染的文本在对角线上，而不是在完全水平的线上。将文本路径从水平方向移开会导致文本被渲染。将水平线更改为带有控制点的三次曲线也是如此 - 因此它呈现为一条直线；从现在开始我将称之为直线曲线。

如果边界框（翻译前或翻译后）的音量为零（`boundingBox.left - boundingBox.right == 0`或`boundingBox.top - boundingBox.bottom == 0`），它是否是 Android 加速代码中的一个错误，它会过滤掉路径？也许！但我还有其他不渲染路径的情况：路径仅由直线组成。即使这些路径的边界框有体积，它们也不会渲染。将路径元素之一从直线更改为直线，整个路径渲染得很好。

当然，从性能的角度来看，我不想将某些线条渲染为直线，我假设线条绘制代码比三次曲线更快。因此，我发布此消息以询问其他人是否遇到过此问题以及是否有解决方法。

非常感谢一如既往。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-29T22:12:32.477

我刚刚发现我必须 close() 一个 Path 才能让它在某些设备/模拟器上呈现——即使它只是现有的、封闭的 Path 的转换版本，事实上，即使它只是一个新的直接从现有路径创建的路径。

例如，`Path thisIsInvisible = new Path(existingClosedPath);`——`existingClosedPath`在我的画布上画得很好。`thisIsInvisible`不会默默出现。但是，如果我在创建它之后调用`thisIsInvisible.close()`它，它就可以正常工作。

我还发现了[来自 Romain Guy 的一篇有趣的帖子，](https://groups.google.com/d/msg/android-developers/eTxV4KPy1G4/tAe2zUPCjMcJ)建议在启用硬件加速的情况下，使用 addPath() 来完成与 transform() 相同的工作可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T15:18:24.110

我在 android 4.1.2 版本上遇到了类似的路径转换问题。有些路径根本不会变换或绘制。通过关闭硬件加速来解决它。希望这对将来的人有所帮助。

# php - 是否有任何适用于 Doctrine 2.3 的 pdf 文档

> ID：14672484
> 
> 赞同：1
> 
> 时间：2013-02-03T12:29:48.617
> 
> 标签：php, symfony, doctrine-orm

我正在尝试查找 Doctrine 2.3 的 pdf 文档，但找不到。有没有可以找到pdf文档的链接

[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/index.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/index.html)

我找到了他们拥有所有 pdf 的链接，但我没有找到任何最新的东西。他们都有2010年的文件

[http://www.doctrine-project.org/downloads/pdfs/](http://www.doctrine-project.org/downloads/pdfs/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T12:44:24.950

他们似乎没有定期更新 pdf 版本。但是，最新的文档应该在[ReadTheDocs](https://readthedocs.org/projects/doctrine-orm/downloads/)上。那里的`View Docs`-button 再次引用[您已经提到的链接](https://doctrine-orm.readthedocs.org/en/latest/)。有*一个*pdf，但它只包含 5 页，并且大部分是空白的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-05T09:16:34.847

找到了 ！[阅读文档中的 Doctrine 2 ORM 文档](https://media.readthedocs.org/pdf/doctrine-orm/latest/doctrine-orm.pdf)

# python - 将字符串转换为三引号字符串

> ID：14672486
> 
> 赞同：2
> 
> 时间：2013-02-03T12:30:09.530
> 
> 标签：python, string, python-2.7

您将如何将字符串转换为三引号字符串？

```
x = "y" 
```

进入：

```
x = """y""" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T12:32:35.860

你没有。三重引号字符串只是符号糖，它会产生一个普通的 Python 字符串，不管：

```
>>> x = "y"
'y'
>>> x = """y"""
'y' 
```

您使用三重引号使包含换行符更容易：

```
"""\
Some longer string
with newlines in the text
is easier this way.
""" 
```

比以下更容易阅读：

```
"Some longer string\nwith newlines in the text\nis easier this way.\n" 
```

但是这两种声明字符串值的方式的最终结果是完全相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:33:02.463

您可以使用 \ 字符转义引号。我不确切知道 Python 是如何连接字符串的，但它看起来类似于：

```
x = "\"\"y\"\""; 
```

# java - CheckTextView 使用适配器更改状态

> ID：14672491
> 
> 赞同：0
> 
> 时间：2013-02-03T12:30:49.693
> 
> 标签：java, android, listview, simpleadapter

我无法从 ListView 的转移中更改`CheckedTextView`复选框的状态。`SimpleAdapter::getView()`我也试过`CheckedTextView.invalidate()`没有效果。

我将列表元素的状态存储在一个单独的容器中：`gather_data`

*   整个源代码在
    *   V2：[http://pastebin.com/kQU0qQvU](http://pastebin.com/kQU0qQvU)（添加`notifyDataSetChanged()`）
    *   V1：[http://pastebin.com/Q17uvXaN](http://pastebin.com/Q17uvXaN)（原创）
*   用于 ListView 的布局：http: [//pastebin.com/UtF4ZFNn](http://pastebin.com/UtF4ZFNn)

当前代码：

```
package org.raboss.gamification.scavengerhunt;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract.Contacts;
import android.widget.Button;
import android.widget.CheckedTextView;
import android.widget.SimpleAdapter;
import android.widget.SimpleCursorAdapter;
import android.app.Activity;
import android.content.AsyncQueryHandler;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.res.Resources;
import android.database.Cursor;
import android.graphics.Color;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ListView;
import android.util.Log;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class GatherListActivity extends Activity {

    protected ListView gather_list;
    protected AsyncQueryHandler asyncGatherlistQueryHandler;
    private SharedPreferences prefs;
    protected ArrayList<HashMap<String,Object>> gather_data;

    final private int INTENT_REQUESTCODE_QRSCAN = 1;

    private class CheckedListAdapter extends SimpleAdapter {

        public CheckedListAdapter(Context context,
                List<? extends Map<String, ?>> data, int resource,
                String[] from, int[] to) {
            super(context, data, resource, from, to);
            // TODO Auto-generated constructor stub
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = super.getView(position, convertView, parent);
            if (parent != null) {
                CheckedTextView ctv = (CheckedTextView)parent.findViewById(android.R.id.text1);
                if (ctv != null) {
                    try {
                        if (position < gather_data.size()) {
                            HashMap<String,Object> hm = gather_data.get(position);
                            if (ctv.isChecked() != (Boolean)hm.get("mark")) {
                                Log.v(this.getClass().getName(), String.format("Draw %s->%s %s", ctv.isChecked() ? "set" : "unset", (Boolean)hm.get("mark") ? "set" : "unset", hm.get("context")));
                                //ctv.setChecked((Boolean)hm.get("mark"));
                                //parent.invalidate();
                                ctv.toggle();
                            }
                            ctv.setTextColor(ctv.isChecked() ? Color.GREEN : Color.BLACK);
                        }
                    }
                    catch (Exception ex) {
                        Log.v(this.getClass().getName(), ex.toString());
                    }
                }
            }
            return v;
        }
    }

    protected CheckedListAdapter gatherlist_adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_gatherlist);
        Log.v(this.getClass().getName(), "onCreate()");

        internalRestoreInstanceState(savedInstanceState);

        String[] from = new String[] {"title", "context"};
        int[] to = new int[] {android.R.id.text1, android.R.id.text2};
        try {
            gather_list = (ListView)findViewById(R.id.gather_list);
            gatherlist_adapter = new CheckedListAdapter(gather_list.getContext(), this.gather_data, R.layout.gather_list_item, from, to);
            ListView lv = (ListView)this.findViewById(R.id.gather_list);
            lv.setAdapter(gatherlist_adapter);
        }
        catch (IllegalArgumentException ex) {
            Log.e(this.getClass().getName(), ex.toString());    
            throw(ex);
        }

        Button qrscanner_button = (Button)findViewById(R.id.qrscanner_button);
        qrscanner_button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                Log.v(this.getClass().getName(), "onClick()");
                Intent intent = new Intent("org.raboss.gamification.scavengerhunt.SCAN");
                intent.putExtra("EMBEDDED_INTENT", true);
                intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
                startActivityForResult(intent, INTENT_REQUESTCODE_QRSCAN);
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (resultCode != RESULT_OK)
            return;

        switch (requestCode) {
        case INTENT_REQUESTCODE_QRSCAN:
            onActivityResultQRScan(resultCode, data);
            break;
        }
    }

    private void onActivityResultQRScan(int resultCode, Intent data) {
        // Handle successful scan
        String contents = data.getStringExtra("SCAN_RESULT");
        Log.i(this.getClass().getName(), "Scanned QR-Code: "+contents);

        try {
            Uri link = Uri.parse(contents);
            String link_where = link.getQueryParameter("where");
            Log.i(this.getClass().getName(), String.format("Stand: %s", link_where));
            for(HashMap<String,Object> hm : this.gather_data) {
                String context = (String)hm.get("context");
                if (context.contains(link_where)) {
                    hm.put("mark", Boolean.TRUE);
                }
                else if (link_where.contains("restart")) {
                    hm.put("mark", Boolean.FALSE);
                }
                Log.i(this.getClass().getName(), String.format("%s ~ %s: %s", context, link_where, (Boolean)hm.get("mark") ? "set" : "unset"));
            }
            if (this.gatherlist_adapter != null) {
                this.gatherlist_adapter.notifyDataSetChanged();
            }
        }
        catch (Exception ex) {
            Log.i(this.getClass().getName(), ex.toString());
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        Log.v(this.getClass().getName(), "onSaveInstanceState()");
        this.internalSaveInstanceState(outState);
    }

    protected void internalSaveInstanceState(Bundle outState) {
        Log.v(this.getClass().getName(), "internalSaveInstanceState()");
        prefs = getSharedPreferences(this.getClass().getName(), MODE_PRIVATE);
        SharedPreferences.Editor editor = prefs.edit();
        try {
            for(HashMap<String,Object> hm : this.gather_data) {
                editor.putBoolean((String)hm.get("context"), (Boolean)hm.get("mark"));          
            }
        }
        catch (Exception ex) {
            Log.v(this.getClass().getName(), ex.toString());
        }
        editor.commit();
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        Log.v(this.getClass().getName(), "onRestoreInstanceState()");
        this.internalRestoreInstanceState(savedInstanceState);
    }

    protected void internalRestoreInstanceState(Bundle savedInstanceState) {
        Log.v(this.getClass().getName(), "internalRestoreInstanceState()");
        if (this.gather_data != null) {
            Log.v(this.getClass().getName(), String.format("this.gather_data already initialised: %d", gather_data.size()));
        }
        else {
            Resources res = getResources();
            String[] cebit_stands = res.getStringArray(R.array.cebit_stands);
            String[] go_slogen = res.getStringArray(R.array.go_slogan);
            this.gather_data = new ArrayList<HashMap<String,Object>>();
            for (int i = 0; i < cebit_stands.length; i++) {
                HashMap<String, Object> hm = new HashMap<String, Object>();
                hm.put("context", cebit_stands[i]);
                hm.put("title", go_slogen[i % go_slogen.length]);
                this.gather_data.add(hm);
            }
        }
        prefs = getSharedPreferences(this.getClass().getName(), MODE_PRIVATE);
        try {
            for(HashMap<String,Object> hm : this.gather_data) {
                hm.put("mark", prefs.getBoolean((String)hm.get("context"), Boolean.FALSE));
                Log.v(this.getClass().getName(), String.format("Restore %s = %s", (String)hm.get("context"), (Boolean)hm.get("mark") ? "set" : "unset"));
            }
        }
        catch (Exception ex) {
            Log.v(this.getClass().getName(), ex.toString());
        }
    }

    @Override
    public void finish() {
        Log.v(this.getClass().getName(), "finish()");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:48:21.490

感谢您的时间。与此同时，我发现了错误。这是解决方案：

```
 public View getView(int position, View convertView, ViewGroup parent) {
    CheckedTextView ctv = null;
    if (convertView != null) {
        ctv = (CheckedTextView)convertView.findViewById(android.R.id.text1);
    }
    if (ctv != null) { 
```

不是强制使用`notifyDataSetChanged()`. 解决方案是使用`convertView`参数而不是`parent`在.`CheckedTextView``ListView`

# git - 如何合并到我的 git 中？

> ID：14672497
> 
> 赞同：0
> 
> 时间：2013-02-03T12:31:54.250
> 
> 标签：git, github

我想[**合并**](http://android.googlesource.com/platform/frameworks/base)

分支`jb-mr1-release`

我的 git 分支是`jellybean`

如何从 Android googlesource 合并到`jellybean`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:48:52.447

或许这

```
git remote add upstream https://android.googlesource.com/platform/frameworks/base
git checkout jellybean
git fetch upstream
git merge upstream/jb-mr1-release 
```

[**参考**](http://github.com/svnpenn/a/blob/master/scripts/git-merge.sh)

# jquery - 将事件直接添加到 fullCalender 后删除

> ID：14672501
> 
> 赞同：1
> 
> 时间：2013-02-03T12:32:18.607
> 
> 标签：jquery, events, fullcalendar

我想在将事件直接添加到[完整日历](http://arshaw.com/fullcalendar/docs/)后删除事件，当删除事件时我将 id 添加到事件对象，当单击事件时我想删除事件。我对 id 发出警报，它会正确发出警报，但事件没有删除事件，执行 ajax 代码并从服务器端删除事件。

**添加事件并刷新页面然后删除事件时，相同的代码可以正常工作。**

```
 eventClick: function(event, element) {

            var current = $(this);

            if(confirm('Are you sure from removing the event?')){
                jQuery.ajax({
                    url: url+"delCalEvent",
                    type: "POST",
                    dataType: 'JSON',
                    data:{
                        'eventId':event.id
                    },
                    success:function(result){
                        if(result  == "1"){

                       //what should I do here to remove the event without refreshing the page
                      $('#calendar').fullCalendar('removeEvents', event.id); 

                        }

                    },
                    error: function (request, status, error) {  
                        alert('Error on deleting the event ');
                        revertFunc();
                    }
                });

            } 

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:24:01.513

它应该可以工作.. 但也许 fullcalendar 没有得到正确的参考.. 尝试使用以下方法之一来获取对象参考：

```
// get specif event (reference)
var specificEvent = $('#calendar').fullCalendar('clientEvents', event.id); 
```

或者

```
// get last event added (reference)
var clientEvents = $('#calendar').fullCalendar('clientEvents');
var lastEvent = clientEvents[clientEvents.length-1]; 
```

然后尝试使用以下方法之一将其删除：

```
lastEvent.id = '';
lastEvent.start = '';
lastEvent.end = '';
$('#calendar').fullCalendar('updateEvent', lastEvent); 
```

或者

```
$('#calendar').fullCalendar('removeEvents', lastEvent); 
```

# node.js - 错误或规范更改（Twitter API 1.1）

> ID：14672502
> 
> 赞同：6
> 
> 时间：2013-02-03T12:32:18.773
> 
> 标签：node.js, twitter, oauth

在我的节点应用程序项目中，我已将 Twitter API 从 v1.0 迁移到 v1.1。我在我的日志文件中发现了一些错误。

**错误**

```
{"message":"Could not authenticate you","code":32} 
```

**原因**

如果发布数据（到 1.1/statuses/update）包括...

*   ！
*   '
*   (
*   )
*   *

**解决方案**

我已经修补了 node-oauth 的 node_modules/oauth/lib/oauth.js（仅使用了 node-twitter）...

从

```
327   if( (method == "POST" || method == "PUT")  && ( post_body == null && extra_params != null) ) {
328     post_body= querystring.stringify(extra_params);
329   } 
```

至

```
 327   if( (method == "POST" || method == "PUT")  && ( post_body == null && extra_params != null) ) {
 328     post_body= querystring.stringify(extra_params);
+331     post_body= post_body.replace(/\!/g, "%21")
+332                         .replace(/\'/g, "%27")
+333                         .replace(/\(/g, "%28")
+334                         .replace(/\)/g, "%29")
+335                         .replace(/\*/g, "%2A");
 336   } 
```

Twitter API v1.0 不需要这个补丁。只有 v1.1 需要此补丁双重转义帖子正文。我认为我的补丁不是通用的，因为这种更改将使该库无法用于任何其他 oauth 服务...

**我的问题**

*   这是 node-oauth 问题还是 Twitter API 问题（Twitter Spec chage 或 bug）？
*   我应该向谁报告这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T09:45:16.297

> 这是 node-oauth 问题还是 Twitter API 问题（Twitter Spec chage 或 bug）？

来自@episod 的引用：
“API v1.1（以及我们所有的 API）对 OAuth 和 HTTP 的要求越来越严格。在 HTTP 规范中，一些字符需要在 URL 和 POST 正文中进行编码，包括括号和单引号。”

> 我应该向谁报告这个问题？

这是问题线程：[https ://dev.twitter.com/discussions/12821](https://dev.twitter.com/discussions/12821)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T22:51:17.680

我也遇到过同样的问题。我尝试了 2 个不同的 twitter 库（node-twitter 和 ntwitter）。两者都与 1.1 api 有相同的问题。你的修复似乎对我有用。感谢那！有趣的是，他们在第 66 行应用了相同的修复。不确定，但看起来这是 node-oauth 的错误。我会先在那里报告。您的修复似乎并没有破坏我在 facebook 上所做的基本工作，所以我希望这是一个好兆头，表明此修复不会影响其他库。

# sql-server - 报告没有表格错误

> ID：14672503
> 
> 赞同：0
> 
> 时间：2013-02-03T12:32:26.547
> 
> 标签：sql-server, vb.net, crystal-reports, dataset

这是我的代码：

```
 Dim ds As New DataSet1
    Dim cnn As SqlConnection
    Dim con1 As String = "Data Source=;Initial Catalog=;Integrated Security=True"
    Dim sql As String = "SELECT * FROM POBasket where POBNumber='" + txtorderno.Text + "'"
    cnn = New SqlConnection(con1)
    cnn.Open()
    Dim dscmd As New SqlDataAdapter(sql, cnn)
    Dim dscrystal As New DataSet1
    dscmd.Fill(dscrystal, "POBasket")
    cnn.Close()

    Dim report As CrystalReport1 = New CrystalReport1
    report.SetDataSource(dscrystal.Tables("POBasket"))
    report.SetParameterValue("ProductName", "+")
    poreport.pocrystalviewer.ReportSource = report
    poreport.pocrystalviewer.Refresh()
    poreport.Show() 
```

我总是得到错误：

> *报告没有表格*

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-06T07:27:48.673

使用下面的代码：

```
report.database.table[0].setdatasource(dscrystal.Tables("POBasket")) 
```

代替

```
report.SetDataSource(dscrystal.Tables("POBasket")) 
```

它为我工作。

我想它会对你有所帮助。

# html - 左对齐 tds 中的居中文本

> ID：14672509
> 
> 赞同：0
> 
> 时间：2013-02-03T12:32:59.570
> 
> 标签：html, css, html-table

我有一个显示在表格中的报告，tds 中的文本必须居中但左对齐，我该如何做到这一点？

```
<td style="text-align: center;"><?=$row['column']?></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:02:25.847

如果您无法修改标记，我建议的唯一选择是使用`padding`：

```
 td {
    width: 7em;
    padding: 0 1em;
    border: 1px solid #000;
 } 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/3VThf/)。

这将使文本`1em`远离单元格的左右边界，但在这些边界内保持左对齐。

但是请记住，填充将*添加*到`width`单元格的 中，因此在上述情况下，单元格的尺寸将为`width`+ `padding-left`+ `padding-right`+ `border-left`+ `border-right`，因此：( `7em + 1em + 1em + 1px + 1px`)。*要在*定义中包含`padding`and `border`，您可以在兼容的浏览器中使用：*`width``box-sizing`*

 *```
 td {
    width: 7em;
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    -o-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    padding: 0 1em;
    border: 1px solid #000;
 } 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/3VThf/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:46:14.080

您可以将文本包含在 a 中`div`并将其居中，`td`如下所示：

HTML

```
<td><div class="inner">left justified text in a centered block</div></td> 
```

CSS

```
.inner {
    width: 20%;
    display: table;
    margin: 0 auto;
} 
```

[JSFiddle 演示](http://jsfiddle.net/V3p2b/1/)

您不必`align=left`在 div 中指定。默认左对齐。*

# vba - 如何获取支持的语言列表、将语言 ID 映射到名称以及在 PowerPoint 演示文稿中显示语言选择器？

> ID：14672517
> 
> 赞同：2
> 
> 时间：2013-02-03T12:34:27.477
> 
> 标签：vba, powerpoint, office-2007

我正在使用适当的 GUI 进行语言选择的“修复整个文档中的语言”脚本。但是，我无法以编程方式生成 PowerPoint 知道的所有语言的列表，包括用户自己语言的语言名称。

出于这个原因，我正在寻找以下内容：

*   一种以编程方式枚举 msoLanguageIds 的方法
*   一种以编程方式将 msoLanguageIds 映射到用户自己语言的语言名称的方法

在 Word 中，我可以使用[Language object](http://msdn.microsoft.com/en-us/library/office/ff845328.aspx)，但在 PowerPoint 中似乎不存在。

或者，一种向用户显示将设置的对话框的方法`DefaultLanguageID`就足够了（我可以从那里获取所需的语言）。

我什至找不到通过 GUI 设置它的方法。显示类似的语言选择器并获得结果显然也可以完成这项工作。

目标平台是 Office 2007。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T15:15:00.390

在 PowerPoint 宏中使用包含 Language 对象的 Word Languages 集合怎么样？因此，您可以获得 MsoLanguageID 枚举值的语言名称。[在这里](https://support.microsoft.com/en-us/office/what-languages-is-office-available-in-26d30382-9fba-45dd-bf55-02ab03e2a7ec)您可以找到 Office 可用的语言。

```
' Powerpoint code
' add reference to word lib.

    Public Sub test()
        Dim wordAppliacation As New Word.Application
        wordAppliacation.Visible = False

        On Error Resume Next

        Dim languageId As MsoLanguageID
        For languageId = msoLanguageIDArabic To msoLanguageIDSpanishPuertoRico
            Debug.Print languageId & ", " & wordAppliacation.Languages(languageId).Name & ", " & wordAppliacation.Languages(languageId).NameLocal
        Next languageId

        On Error GoTo 0

        wordAppliacation.Quit
        Set wordAppliacation = Nothing

    End Sub 
```

* * *

或者在 PowerPoint 2016 中可能就像这样：

```
 Dim lng As Word.language
    Dim lid As Long

    For Each lng In wordAppliacation.Languages
        lid = lng.id
        Debug.Print lid & ", " & wordAppliacation.Languages(lid).Name & ", " & wordAppliacation.Languages(lid).NameLocal
    Next lng 
```

* * *

# sql - SQL 使用 SSL 加密单个连接

> ID：14672521
> 
> 赞同：0
> 
> 时间：2013-02-03T12:34:52.063
> 
> 标签：sql, sql-server, encryption, ssl

我想强制使用 SSL 加密所有外部连接，本质上我只想加密其中一个网络接口。

这篇文章尽可能接近我的答案：http: [//basitaalishan.com/2012/07/16/encrypting-connections-to-sql-server/](http://basitaalishan.com/2012/07/16/encrypting-connections-to-sql-server/)

但是，在我看来，要么所有连接都被迫使用加密，要么所有连接可能根本无法使用加密。我希望所有外部连接都被加密（别无选择），所有内部连接（防火墙后面）都不被加密。

我需要加密 SQL 2005 和 2008R2。两者都在 Windows 2008 Std 上运行

这完全可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:37:30.470

您可以使用 SSL 包装器/代理，如[stunnel](https://www.stunnel.org/index.html)，然后将防火墙设置为仅允许外部连接到所述 SSL 包装器运行的端口。

# ruby - 使用电子表格 gem 格式化 Nokogiri 输出

> ID：14672524
> 
> 赞同：1
> 
> 时间：2013-02-03T12:35:12.937
> 
> 标签：ruby, nokogiri, spreadsheet

**我需要的**

是否可以在将 Nokogiri 输出发送到 Excel 等电子表格之前对其进行格式化？

**示例：**[http](http://www.asus.com/Notebooks_Ultrabooks/ASUS_TAICHI_21/#specifications) ://www.asus.com/Notebooks_Ultrabooks/ASUS_TAICHI_21/#specifications 上 的表格格式很好，可以使用电子表格 gem 将类似的格式应用于 Nokogiri 输出吗？

**我的代码**

```
require 'nokogiri'
require 'open-uri'
require 'spreadsheet'

doc = Nokogiri::HTML(open("http://www.asus.com/Notebooks_Ultrabooks/ASUS_TAICHI_21/#specifications"))

#Grab our product specifications
data = doc.css('div#specifications div#spec-area ul.product-spec li')

#Modify our data
lines = data.map(&:text).join("\n")

#Create the Spreadsheet
Spreadsheet.client_encoding = 'UTF-8'
book = Spreadsheet::Workbook.new

sheet1 = book.create_worksheet
sheet1.name = 'My First Worksheet'

#Output our data  to the Spreadsheet
sheet1[0,0] = lines
book.write 'C:/Users/Barry/Desktop/output.xls' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:15:20.670

您的代码创建了一个单行电子表格，其中有一列。该列是所有行的串联。

要将每一行放入自己的列中，然后：

```
lines = data.map(&:text)
...
lines.each.with_index do |line, i|                                                        |
  sheet1[0, i] = line                                                                     |
end                                                                                       |
book.write '/tmp/output.xls'                                                              | 
```

要将每一行放入自己的行中，然后：

```
lines = data.map(&:text)
...
lines.each.with_index do |line, i|                                                        |
  sheet1[i, 0] = line                                                                     |
end                                                                                       |
book.write '/tmp/output.xls'                                                              | 
```

# java - 如何克隆二维列表？

> ID：14672527
> 
> 赞同：0
> 
> 时间：2013-02-03T12:35:38.997
> 
> 标签：java, list

我想克隆列表：

```
public List<List<Test>> a = new ArrayList<List<Test>>();
public List<List<Test>> b = new ArrayList<List<Test>>(); 
```

但如果我这样做：

```
b = (ArrayList<List<Test>>)a.clone(); 
```

发生错误：

```
The method clone() is undefined for the type List<List<Test>> 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:41:38.780

`java.util.List`不实现`Cloneable`，因此编译器无法确保您使用的具体实现确实如此。因此，它不允许您编写调用可能不存在的方法的代码。

如果你知道具体的实现，你可以转换它。Vg，如果它是一个`ArrayList<List<Test>>`（因为`ArrayList`确实实现了`Cloneable`），那么你做

```
 b = (List<List<Test>>) ((ArrayList<List<Test>>) a).clone(); 
```

如果不这样做，请实现自己的方法。

请记住，默认设置`clone`是浅拷贝。也就是说，返回的对象将是一个新的`List<List<Test>>`，但内部的`List<Test>`和`Test`不会被复制，您将获得对原始对象的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T12:42:32.120

`clone()`不适用于抽象列表，仅适用于`ArrayList`. 但是它不会像你期望的那样工作，因为它只返回一个浅拷贝。要进行深层复制，您需要循环克隆：

```
 for (List<Test> item: a)
      b.add(new ArrayList(item); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T12:41:58.150

使用构造函数或`addAll`方法：

```
new ArrayList<>(a);
//or
b.addAll(a); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-19T09:48:50.117

如果您使用的是 Java 8，则可以使用与前一个对象相同的对象创建一个新列表，只需使用流：

```
List<Double> secondList = firstList.stream().collect(Collectors.toList()); 
```

如果你想要一个不与第一个共享相同对象的新列表，你可以这样做（假设你的对象实现`Cloneable`）：

如果您使用的是 Java 8，则可以使用与前一个对象相同的对象创建一个新列表，只需使用流：

```
List<Double> secondList = firstList.stream().collect(Collectors.toList()); 
```

如果你想要一个不与第一个共享相同对象的新列表，你可以这样做（假设你的对象实现`Cloneable`）：

```
List<Double> secondList = firstList.stream().map(v -> v.clone()).collect(Collectors.toList()); 
```

# java - 将arraylist中的每个数字相乘

> ID：14672530
> 
> 赞同：0
> 
> 时间：2013-02-03T12:36:17.463
> 
> 标签：java, arraylist, multiplication

编写一个允许用户输入多个值的程序，然后该程序应将输入的以英镑 (GBP) 为单位的值转换为多种不同的货币。菜单应如下所示：

1.  输入值并输入 -1 停止
2.  欧元
3.  美元
4.  日元
5.  卢比
6.  出口

选择2,3,4或5时，程序应显示在原始磅和转换的货币中输入的每个值，以及总数和转换总数。

```
public class Money {
    public static void main(String[] args) {
        System.out.println("Enter values and type -1 to stop"); 
        System.out.println("'1' = Euros"); 
        System.out.println("'2' = Dollars"); 
        System.out.println("'3' = Yen"); 
        System.out.println("'4' = Rupees"); 
        System.out.println("'5' = Exit"); 

        int count=0;
        String exit = "-1", euro="E";

        Scanner scan = new Scanner(System.in);

        System.out.println();
        System.out.print("Convert to: ");

        while (!scan.hasNext("[E, D, Y, R, X]+")) {
            System.out.print("Invalid value, enter Surname again: ");
            scan.next();
        }

        String exTo = scan.next();

        ArrayList<String> num = new ArrayList<String>();

        while (true) {
            count++;
            System.out.print("|| Enter values "+count+" in (P)Pounds : ");

            while (!scan.hasNextDouble()) {
                System.out.print("Invalid value, try again: ");
                scan.next();
            }
            num.add(scan.next());

            if(num.contains(exit)){
                String ar[]=num.toArray(new String[num.size()]);
                ar=num.toArray(ar);

                System.out.println("Result: "+ num);

                scan.close();
                break;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:49:29.293

试试这个 ：

```
import java.util.*;
class Money {
    public static void main(String[] args) {
        System.out.println("Enter values and type -1 to stop"); 
        System.out.println("'1' = Euros"); 
        System.out.println("'2' = Dollars"); 
        System.out.println("'3' = Yen"); 
        System.out.println("'4' = Rupees"); 
        System.out.println("'5' = Exit"); 
    int count=0;
    String exit = "-1", euro="E";

    Scanner scan = new Scanner(System.in);

    System.out.println();
    System.out.print("Convert to: ");

    while (!scan.hasNext("[E, D, Y, R, X]+")) {
        System.out.print("Invalid value, enter Surname again: ");
        scan.next();
    }

    String exTo = scan.next();

    ArrayList<String> num = new ArrayList<String>();

    while (true) {
        count++;
        System.out.print("|| Enter values "+count+" in (P)Pounds : ");

        while (!scan.hasNextDouble()) {
            System.out.print("Invalid value, try again: ");
            scan.next();
        }
        num.add(scan.next());

        if(num.contains(exit)){
            for(int i=0;i<num.size();i++){
            num.set(i,Integer.toString((Integer.parseInt(num.get(i))*2)));
            }
            System.out.println("Result: "+ num);

            scan.close();
            break;
        }
    }
}
} 
```

删除最后一个输入 (-1)

在打印之前添加这一行`num.remove("-1");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:50:12.407

> 如何将数组列表中的每个数字相乘，例如用户类型在数组列表数组中的数字看起来像这样：[20,30,40] 并且在我需要结果显示之后，例如每个数字乘以 2 [40,60,80 ]

如何遍历列表并进行计算？

```
for (Integer i : yourList)
  i *= 2; 
```

或者你可以尝试使用番石榴，`Lists.transform(list, func)`如果你想做更复杂的计算。

[http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Lists.html#transform(java.util.List](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Lists.html#transform(java.util.List) , com.google.common.base.Function)

# opengl - 着色器开关 v 在着色器内部有条件

> ID：14672531
> 
> 赞同：2
> 
> 时间：2013-02-03T12:36:30.753
> 
> 标签：opengl, branch, shader

就性能而言，创建两个着色器，一个用于分支的每一侧，还是在像素着色器代码中放置一个分支更好？例如，如果我有一个高斯模糊着色器，它在执行水平或垂直传递之间做出决定，我最好将它分成两个单独的着色器，先绑定一个，然后再绑定另一个，或者将分支保留在着色器内代码本身，这意味着我不必为第二遍切换着色器？

```
void main(void)
{
    ...

    if (uniform_Orientation == 0)
    {
        // Horizontal blur
    }
    else
    {
        // Vertical blur
    }
} 
```

我的直觉告诉我应该把它分成两个单独的着色器，但是我不确定切换着色器对性能的影响是什么。

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:13:36.277

着色器中有两种类型的分支：

*   静态分支：例如，当使用基于统一变量的条件时。可以在着色器启动之前评估分支。
*   动态分支：基于着色器内部的变量，例如基于可变变量的条件。这有一些成本，因为像素可以使用不同的路径。

您的问题属于静态分支。静态分支当然比动态更好更快。

问题的答案：静态分支是否比着色器的实际切换更快并不是那么明显。这当然取决于。但是在您的示例中，您可能不会看到任何性能差异。

请参阅有关具有大量静态分支的“超级着色器”的更多信息，以将着色器切换到最低限度。[http://wiki.gametheorylabs.com/groups/judgementengine/wiki/4c55c/Uber_Shader.html](http://wiki.gametheorylabs.com/groups/judgementengine/wiki/4c55c/Uber_Shader.html)

# c++ - 使用 GLM 功能放大 OpenGL 中的当前鼠标位置

> ID：14672536
> 
> 赞同：3
> 
> 时间：2013-02-03T12:36:58.357
> 
> 标签：c++, opengl, zooming, glm-math

我对放大 OpenGL 中当前鼠标位置的任务感到绝望。我已经尝试了很多不同的事情并阅读了其他关于此的帖子，但我无法根据我的具体问题调整可能的解决方案。据我了解，您必须获取鼠标光标的当前窗口坐标，然后将它们取消投影以获取世界坐标，最后转换为这些世界坐标。

为了找到当前的鼠标位置，每次单击鼠标右键时，我都会在 GLUT 鼠标回调函数中使用以下代码。

```
if(button == 2)
{
    mouse_current_x = x;
    mouse_current_y = y;
... 
```

接下来，在设置 ModelView 和 Projection 矩阵之前，我在显示函数中取消投影当前鼠标位置，这似乎也可以正常工作：

```
// Unproject Window Coordinates
float mouse_current_z;
glReadPixels(mouse_current_x, mouse_current_y, 1, 1, GL_DEPTH_COMPONENT, GL_FLOAT, &mouse_current_z);
glm::vec3 windowCoordinates = glm::vec3(mouse_current_x, mouse_current_y, mouse_current_z);
glm::vec4 viewport = glm::vec4(0.0f, 0.0f, (float)width, (float)height);
glm::vec3 worldCoordinates = glm::unProject(windowCoordinates, modelViewMatrix, projectionMatrix, viewport);
printf("(%f, %f, %f)\n", worldCoordinates.x, worldCoordinates.y, worldCoordinates.z); 
```

现在翻译是麻烦开始的地方。目前我正在绘制一个具有维度（dimensionX、dimensionY、dimensionZ）的立方体并转换到该立方体的中心，因此我的缩放也发生在中心点。我通过在 z 方向（小车）平移来实现缩放：

```
// Set ModelViewMatrix
modelViewMatrix = glm::mat4(1.0); // Start with the identity as the transformation matrix
modelViewMatrix = glm::translate(modelViewMatrix, glm::vec3(0.0, 0.0, -translate_z)); // Zoom in or out by translating in z-direction based on user input 
modelViewMatrix = glm::rotate(modelViewMatrix, rotate_x, glm::vec3(1.0f, 0.0f, 0.0f)); // Rotate the whole szene in x-direction based on user input
modelViewMatrix = glm::rotate(modelViewMatrix,  rotate_y, glm::vec3(0.0f, 1.0f, 0.0f)); // Rotate the whole szene in y-direction based on user input
modelViewMatrix = glm::rotate(modelViewMatrix, -90.0f, glm::vec3(1.0f, 0.0f, 0.0f)); // Rotate the camera by 90 degrees in negative x-direction to get a frontal look on the szene
modelViewMatrix = glm::translate(modelViewMatrix, glm::vec3(-dimensionX/2.0f, -dimensionY/2.0f, -dimensionZ/2.0f)); // Translate the origin to be the center of the cube
glBindBuffer(GL_UNIFORM_BUFFER, globalMatricesUBO);
glBufferSubData(GL_UNIFORM_BUFFER, sizeof(glm::mat4), sizeof(glm::mat4), glm::value_ptr(modelViewMatrix));
glBindBuffer(GL_UNIFORM_BUFFER, 0); 
```

我试图通过转换到 worldCoordinates 向量来替换到立方体中心的转换，但这不起作用。我还尝试按宽度或高度缩放矢量。我在这里错过了一些重要的步骤吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:37:15.823

也许这不适用于您的情况。但对我来说，这似乎是处理这个问题的最好方法。使用 glulookat() 查看您已经找到的鼠标单击的 xyz 位置。然后把gluPerspective()改成更小的视角来实现实际的缩放。

# php - 构建递归函数以创建多维数组

> ID：14672540
> 
> 赞同：2
> 
> 时间：2013-02-03T12:37:32.843
> 
> 标签：php, arrays, multidimensional-array

我*想*我想要的是一个递归函数，但是如果有另一种方法可以实现我想要做的，请告诉我！我不确定我是否会很好地解释这一点，所以如果您需要进一步澄清，请告诉我。

我有一个函数 findSeed() ，它接受一个 id 并返回一个数组，其中包含有关“种子”的信息：

```
function findSeeds($id) {

  global $wpdb;

  $query = "SELECT * FROM seedTable WHERE id = " . $id;

  $seed = $wpdb->get_row($query, ARRAY_A);

  return $seed;

} 
```

它返回以下数组：

```
Array
(
    [id] => 9
    [name] => Sign
    [seed1] => 4
    [seed2] => 3
) 
```

其中种子 1 和种子 2 是创建它所需的种子的 ID。我正在寻找一个函数来创建一个多维数组，格式如下，其中数组的第一部分包含第一个“种子”，下一个包含第一个中包含的两个种子，下一个包含两个每个种子中都包含种子，依此类推：

```
Array
(    
    [1] => Array
        (
            [0] => Stripey Wallpaper
        )

    [2] => Array
        (
            [0] => Green Block
            [1] => Aqua Block
        )

    [3] => Array
        (
            [0] => Bricks
            [1] => Grass
            [2] => Bricks
            [3] => Glass Pane
        )

    [4] => Array
        (
            [0] => Rock
            [1] => Grass
            [2] => Dirt
            [3] => Rock
            [4] => Rock
            [5] => Grass
            [6] => Rock
            [7] => Lava
        )

) 
```

到目前为止，我正在使用此处显示的（可怕的）功能来完成它，但是“地图”可能是 2 到 8 行之间的任何内容，我正在努力了解如何将其变成一个适用于的简洁小功能任何事物：

```
function makeMap($id) {

    // First Row

    $rowNum = 1;

    $oneSeed = findSeeds($id);
    $map[$rowNum][] = $oneSeed[name];

    // Second Row

    $rowNum = $rowNum + 1;

    $twoSeed = findSeeds($oneSeed[seed1]);
    $threeSeed = findSeeds($oneSeed[seed2]); 

    $map[$rowNum][] = $twoSeed[name];        
    $map[$rowNum][] = $threeSeed[name];

    // Third Row

    $rowNum = $rowNum + 1;

    $fourSeed = findSeeds($twoSeed[seed1]);
    $fiveSeed = findSeeds($twoSeed[seed2]);
    $sixSeed = findSeeds($threeSeed[seed1]);
    $sevenSeed = findSeeds($threeSeed[seed2]);

    $map[$rowNum][] = $fourSeed[name];        
    $map[$rowNum][] = $fiveSeed[name];        
    $map[$rowNum][] = $sixSeed[name];        
    $map[$rowNum][] = $sevenSeed[name];

    // Fourth Row

    $rowNum = $rowNum + 1;

    $eightSeed = findSeeds($fourSeed[seed1]);
    $nineSeed = findSeeds($fourSeed[seed2]);
    $tenSeed = findSeeds($fiveSeed[seed1]);
    $elevenSeed = findSeeds($fiveSeed[seed2]);
    $twelveSeed = findSeeds($sixSeed[seed1]);
    $thirteenSeed = findSeeds($sixSeed[seed2]);
    $fourteenSeed = findSeeds($sevenSeed[seed1]);
    $fifteenSeed = findSeeds($sevenSeed[seed2]);

    $map[$rowNum][] = $eightSeed[name];        
    $map[$rowNum][] = $nineSeed[name];        
    $map[$rowNum][] = $tenSeed[name];        
    $map[$rowNum][] = $elevenSeed[name];
    $map[$rowNum][] = $twelveSeed[name];        
    $map[$rowNum][] = $thirteenSeed[name];        
    $map[$rowNum][] = $fourteenSeed[name];        
    $map[$rowNum][] = $fifteenSeed[name];

    return $map; 

} 
```

它应该在所有“行”节点为空时停止，因此以下只需要返回前两个“行”：

```
Array
(
    [1] => Array
        (
            [0] => Wood Block
         )

    [2] => Array
        (
            [0] => Dirt
            [1] => Lava
        )

    [3] => Array
        (
             [0] => 
             [1] => 
             [2] => 
             [3] => 
        )

    [4] => Array
        (
             [0] => 
             [1] => 
             [2] => 
             [3] => 
             [4] => 
             [5] => 
             [6] => 
             [7] => 
        )
) 
```

任何提示、提示或解决方案将不胜感激，

谢谢你。

编辑：快速说明为什么我喜欢上述格式 - 然后我将结果打印在表格中，第一个种子跨越整行，然后将其与下面的孩子一起分解，如下所示：

```
$map = makeMap($_POST['theItem']);

    $colspan = count(end(array_values($map)));      

    echo '<h3>' . $map[row1][0] . '</h3><br/>';

    echo '<table>';

    foreach ($map as $row) {

      echo '<tr>';

        foreach ( $row as $cell) {

          echo '<td colspan="'. $colspan .'"><div class="seed">' . $cell . '</div></td>'; 

        }

      $colspan = $colspan / 2;

      echo '</tr>';

    }

    echo '</table>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:45:23.047

```
<?php

$array = array('one', 'two', 'three');

for($i =1; $i<= count($array); $i++){
 for($j=0; $j<$i; $j++){
 $arrymulti[$i][$j]= $array[$j];
 }
}
echo '<pre>';
print_r($arrymulti);
?> 
```

输出：

```
Array
(
    [1] => Array
        (
            [0] => one
        )

    [2] => Array
        (
            [0] => one
            [1] => two
        )

    [3] => Array
        (
            [0] => one
            [1] => two
            [2] => three
        )

) 
```

[演示](http://phpfiddle.org/main/code/ber-v2q)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T12:58:18.070

您可以使用我为类编写的这个递归函数

```
static public $map;
static function seeder($id,$Depth=0){
   $Seed=findSeeds($id);
   if(!$Seed){
        return self::$map;
   }
   self::$map[$Depth][]=$Seed['name'];
   self::seeder($Seed['seed1'],$Depth+1);
   self::seeder($Seed['seed2'],$Depth+1);
   if($Depth==0){
       foreach(self::$map as $k=>$v){
          $Flag=true;
          foreach($v as $key=>$Value){
              if($Value!="")$Flag=false;
          }
          if($Flag){
              for($i=$k;$i<=count(self::$map);$i++){
                  @unset(self::$map[$i]);
              }
              break;
          }
       }  
   }
   return self::$map;
} 
```

样本

```
print_r(seeder($ID)); 
```

输出与您的样本相似

# c# - 每个匹配生命周期范围的实例，默认？

> ID：14672541
> 
> 赞同：6
> 
> 时间：2013-02-03T12:38:05.240
> 
> 标签：c#, dependency-injection, autofac, lifetime-scoping

我想在 Autofac 中为每个匹配的生命周期范围的注册创建一个实例，但偶尔需要从全局容器请求一个实例（其中没有匹配的生命周期范围）。在不存在匹配生命周期范围的情况下，我想提供一个顶级实例而不是抛出异常。

这可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T05:58:07.127

我认为您最好通过引入新的生命周期选项来扩展 Autofac。我拿了 Autofac 的源代码并做了一些修改：

```
public static class RegistrationBuilderExtensions
{
    public static IRegistrationBuilder<TLimit, TActivatorData, TRegistrationStyle> InstancePerMatchingOrRootLifetimeScope<TLimit, TActivatorData, TRegistrationStyle>(this IRegistrationBuilder<TLimit, TActivatorData, TRegistrationStyle> builder, params object[] lifetimeScopeTag)
    {
        if (lifetimeScopeTag == null) throw new ArgumentNullException("lifetimeScopeTag");
        builder.RegistrationData.Sharing = InstanceSharing.Shared;
        builder.RegistrationData.Lifetime = new MatchingScopeOrRootLifetime(lifetimeScopeTag);
        return builder;
    }
}

public class MatchingScopeOrRootLifetime: IComponentLifetime
{
    readonly object[] _tagsToMatch;

    public MatchingScopeOrRootLifetime(params object[] lifetimeScopeTagsToMatch)
    {
        if (lifetimeScopeTagsToMatch == null) throw new ArgumentNullException("lifetimeScopeTagsToMatch");

        _tagsToMatch = lifetimeScopeTagsToMatch;
    }

    public ISharingLifetimeScope FindScope(ISharingLifetimeScope mostNestedVisibleScope)
    {
        if (mostNestedVisibleScope == null) throw new ArgumentNullException("mostNestedVisibleScope");

        var next = mostNestedVisibleScope;
        while (next != null)
        {
            if (_tagsToMatch.Contains(next.Tag))
                return next;

            next = next.ParentLifetimeScope;
        }

        return mostNestedVisibleScope.RootLifetimeScope;
    }
} 
```

只需将这些类添加到您的项目中并将您的组件注册为：

```
builder.RegisterType<A>.InstancePerMatchingOrRootLifetimeScope("TAG"); 
```

我自己没有尝试过，但它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T14:46:23.257

可能的解决方案是覆盖子生命周期范围内的注册。

样本：

```
public enum Scopes
{
    TestScope
}

public class Test
{
   public string Description { get; set; }
}

public class Tester
{
    public void DoTest()
    {
        ContainerBuilder builder = new ContainerBuilder();
        builder.RegisterType<Test>()
            .OnActivating(args => args.Instance.Description = "FromRoot")
            .SingleInstance();
        var container = builder.Build();

        var scope = container.BeginLifetimeScope(Scopes.TestScope, b => b
            .RegisterType<Test>()
            .InstancePerMatchingLifetimeScope(Scopes.TestScope)
            .OnActivating(args => args.Instance.Description = "FromScope"));

        var test1 = container.Resolve<Test>();
        Console.WriteLine(test1.Description); //writes FromRoot

        var test2 = scope.Resolve<Test>();
        Console.WriteLine(test2.Description); //writes FromScope

        Console.ReadLine();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-15T19:51:10.547

根容器本身是一个生命周期范围，其标签名称为: `root`，定义在`LifetimeScope.RootTag`

所以你可以这样做：

```
using Autofac.Core.Lifetime;

builder.RegisterType<Service>().As<IService>()
    .InstancePerMatchingLifetimeScope(LifetimeScope.RootTag, "foobar"); 
```

# android - 按电话号码排序

> ID：14672542
> 
> 赞同：0
> 
> 时间：2013-02-03T12:38:06.250
> 
> 标签：android, sorting

我使用以下代码片段按电话号码排序：

```
class Item { String addr; /* phone number */ }

private int compareByAddr(Item objA, Item objB) {
    if (objA.addr==null && objB.addr==null) {
        return 0;
    } else if (objA.addr==null && objB.addr!=null) {
        return -1;
    } else if (objA.addr!=null && objB.addr==null) {
        return 1;
    } else {
        if (PhoneNumberUtils.compare(objA.addr, objB.addr)) {
            return 0;
        } // end if
        return objA.addr.compareTo(objB.addr);
    } // end if
} // end compareByAddr() 
```

但是我有一个例外：

> E/AndroidRuntime(12157): java.lang.IllegalArgumentException: 比较方法违反了它的一般约定！

我搜索了一下，发现这意味着我的排序算法不是传递的......

有没有人有更好的按电话号码排序的算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:24:29.997

问题是你有 2 个代表电话号码的字符串，你想比较它们并将它们从大到小排序，就像有数字一样......

但是将 2 个字符串相互比较（就像在您的代码片段中一样）：

```
 objA.addr.compareTo(objB.addr); 
```

不会工作:(

您可以通过将字符串操作为一个数字（并从中丢弃所有非数字）来做到这一点，然后像普通数字一样比较 2 ...

```
 String phone1Str

 String phone2Str

 int phone1

 int phone2

 phone1Str= phone1Str.replaceAll("\\D+",""); //using reg-ex to get only digits

 phone1= Integer.valueOf(phone1Str); //convert to int to compare numbers

 phone2Str= phone2Str.replaceAll("\\D+","");

 phone2= Integer.valueOf(phone2Str);

 if (PhoneNumberUtils.compare(phone1Str,phone2Str)
   //they are equal 
 else if (phone1>phone2)
   //phone1 is the larger number !
 else
   //phone2 is the larger number ! 
```

希望这可以帮助

# azure - 远程 Azure 服务器返回 NotFound 错误（未经授权）

> ID：14672548
> 
> 赞同：2
> 
> 时间：2013-02-03T12:39:42.747
> 
> 标签：azure, reporting-services, windows-phone-7.1, azure-virtual-machine

我在 Azure 上创建了一个虚拟机，上面安装了 Windows Server 2012 和 SQL Server 2012。我还打开了在 vm 上打开的入站端口 80 和 1433。

我创建了一个数据库和报告（rdl）并部署到服务器。

当我编写一个简单的 WinForms 应用程序时，它能够呈现托管在 vm 的 ReportServer 上的报告。

现在我正在编写一个 WP7 应用程序来通信并从远程服务器获取 xml。这次我收到一个错误：

> 远程服务器返回错误：NotFound
> 
> 内部异常：System.Net.HttpStatusCode.Unauthorized

我不确定问题出在哪里；我需要从服务器端做任何事情吗？

**客户端**

下面是我的配置和代码：

[1) 如本文](https://stackoverflow.com/questions/13854356/downloading-xml-file-from-sql-reporting-server)所述，我添加了对报告服务器的服务引用，下面是 ServiceReferences.ClientConfig 文件：

```
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="ReportExecutionServiceSoap" maxBufferSize="2147483647"
                    maxReceivedMessageSize="2147483647">
                    <security mode="None" />
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://virtualmachine.cloudapp.net:80/ReportServer/ReportExecution2005.asmx"
                binding="basicHttpBinding" bindingConfiguration="ReportExecutionServiceSoap"
                contract="ServiceReference1.ReportExecutionServiceSoap" name="ReportExecutionServiceSoap" />
        </client>
    </system.serviceModel> </configuration> 
```

2）以下是我的代码：

```
void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    ReportExecutionServiceSoapClient client = new ReportExecutionServiceSoapClient();
    client.LogonUserCompleted += new EventHandler<System.ComponentModel.AsyncCompletedEventArgs>(client_LogonUserCompleted);
    client.LogonUserAsync("username", "password", "virtualmachine.cloudapp.net");
} 
```

这里的用户名是“管理员”，我用来登录虚拟机。那会是个问题吗？

**服务器端**

下面是我的 Reportserver\web.config

```
<authentication mode="Windows" />
<identity impersonate="true" /> 
```

下面是我的 Reportserver\rsreportserver.config

```
<Authentication>
    <AuthenticationTypes>
            <RSWindowsNTLM/>
    </AuthenticationTypes>
<RSWindowsExtendedProtectionLevel>Off</RSWindowsExtendedProtectionLevel>
<RSWindowsExtendedProtectionScenario>Proxy</RSWindowsExtendedProtectionScenario>
<EnableAuthPersistence>true</EnableAuthPersistence> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:18:06.797

尝试登录到您的 windows.azure.com 帐户并选择 VM，然后选择顶部的 Endpoint 链接。

确保添加一个端点，例如：

名称：ReportsEndpoint

协议：TCP

公共端口：80

私人港口：80

# java - Spring Batch 管理控制台 - com.thoughtworks.xstream.mapper.CannotResolveClassException “类：java.util.HashMap”

> ID：14672550
> 
> 赞同：1
> 
> 时间：2013-02-03T12:40:02.740
> 
> 标签：java, spring-batch, spring-batch-admin

我已经配置 SpringBatch-Admin-Console 来启动和查看我们在应用程序中使用的作业。

当我从应用程序的控制台启动作业时，作业完成，并且我能够按预期在控制台中查看作业的状态。

```
适当的价值
编号 449
职位名称analyzeJob
作业实例 449
作业参数时间=03-02-2013 17\:58\:13.54
开始日期 2013-02-03
开始时间 17:58:16
持续时间 00:00:09
状态已完成
退出代码已完成
步骤执行计数 3
步骤执行 [processHeaderStep,inDBScanStep,inMemoryScanStep]

```

但是当我从 SpringBatch 管理控制台启动作业时，作业按预期完成，但是当我尝试在控制台中查看作业的状态时，我收到以下错误消息。

“HTTP 状态 500 - 请求处理失败；嵌套异常是 com.thoughtworks.xstream.converters.ConversionException: id : id : id : id ---- 调试信息 ---- 消息 : id : id 原因异常 : com。 thinkworks.xstream.mapper.CannotResolveClassException 原因消息：id：id 类：java.util.HashMap 所需类型：java.util.HashMap 路径：/map/entry[3]/masterdata.analyzer.metadata.Metadata/hubCodeTables/ masterdata.analyzer.metadata.MHubCodeTable/codeValueMap/entry[7]/id 行号：-1 ----------------------------- ——”

我认为可能会发生异常，因为我的应用程序能够使用`java.util.Hashmap`JAVA_HOME 中的类，而 tomcat 中的 SpringBatch-Admin-War 不能使用相同的类。

所以我什至创建了一个包含所有 Java 类文件（包括`java.util.HashMap`）的 jar 文件，并包含在这个 SpringBatch-Admin-Console 的 LIB 文件夹中，但我仍然遇到同样的错误。

我还确保我的应用程序中所有必需的 LIB 文件也存在于 SpringBatch-Admin 的 LIB 文件夹中。仍然得到同样的错误。

奇怪的行为是我能够启动该作业，并且如果我从外部启动它，我也能够查看该作业，但只有当我从 SpringBatch-Admin-Console 启动时才会出现此错误。

谁能告诉我为什么会发生这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-19T22:52:22.270

在重新启动作业之前删除批处理表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-16T07:19:00.353

由于 spring-batch 将具有相同参数的作业的所有执行存储在同一个表中，如果您不删除这些条目，即使您已经解决了错误，您现在也可能会继续以前的错误。

因此，请确保在再次执行（重新启动）作业之前删除批处理表。

# php - PHP - 等待几秒钟再继续？

> ID：14672552
> 
> 赞同：0
> 
> 时间：2013-02-03T12:40:16.013
> 
> 标签：php, sleep

我已经设置了一个 HTML 表单，并且在网页上显示消息之前，我正在使用 PHP 来验证一切是否正常。然后我想在几秒钟后将用户重定向回主页。

问题是，我找不到等待 5 秒左右然后进行重定向的方法。睡眠功能只需等待 5 秒，然后同时显示消息/重定向。有人有什么想法吗？

谢谢！

```
<?php
    if (empty($_POST) === false) {
    echo 'Success! You will not be able to log in until an administrator approves your account.';
    sleep(5);
    $url = 'index.html';
    echo '<META HTTP-EQUIV=Refresh CONTENT="0; URL='.$url.'">';  
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T12:46:00.857

对于一个实用的（全面适用于 AFAIK）但*不是标准化*的解决方案，请使用`Refresh`HTTP 标头：

```
header('Refresh: 5; url=http://yoursite.com/index.html'); 
```

否则，您可以使用`<meta>`标签而不涉及`sleep()`：

```
// This goes inside <head>, so obviously *before* the "success" message!
echo '<META HTTP-EQUIV=Refresh CONTENT="5; URL='.$url.'">'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T12:43:41.457

例如，这应该使用 javascript 在客户端完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T12:48:52.957

那是因为输出不是按顺序发送到浏览器的。在脚本终止后，PHP 主要一次性发出输出。

而是使用此元标记在 html 中等待：

```
<meta http-equiv="Refresh" content="5; URL=/blah;"> 
```

请注意，`<meta>`标签始终应放在`<head>`.

请注意，浏览器始终可以选择忽略重定向。而且，虽然这是我个人的看法，但像这样的重定向很糟糕。而是在下一个页面加载恕我直言的顶部显示一条通知闪存消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T12:47:49.787

你做这种重定向的方式是javascript

制作一个小的 javascript 函数，例如

```
function delayer() {
    window.location = "http://example.com"
} 
```

并添加它

```
onLoad="setTimeout('delayer()', TIME_IN_MILLISECONDS_TO_WAIT)" 
```

在您的 html 正文标签内

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-10T20:30:36.850

这是我努力重定向的东西。似乎工作正常，并认为我会分享。

```
DelayTime(15); 

echo "<script>window.top.location.reload();</script>"; 
```

延迟时间函数：

```
function DelayTime($secs){
      $now = time();
      while($now < ($now + $sec)){ 
        $now = time();
        if($now >= ($now + $sec)){ break; }
      }
      return true;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-03T12:43:34.667

```
<?php
    if (empty($_POST) === false) {
    echo 'Success! You will not be able to log in until an administrator approves your account.';
    sleep(5);
    $url = 'index.html';
    header("location: ".$url);  
}
?> 
```

如果它不起作用需要使用javascript

```
<script type="text/javascript">
setTimeout("window.location = 'index.html'", 2000);
</script> 
```

# css - 响应式引导列表

> ID：14672553
> 
> 赞同：0
> 
> 时间：2013-02-03T12:40:50.597
> 
> 标签：css, twitter-bootstrap

我正在使用最新版本的 Bootstrap 构建一个网站，除了一些小问题外，大部分情况都很好。

主要的是我的清单。我有两个列表可以正常工作到 768px 宽。之后，即使有足够的空间让它们内联显示，它们也会堆叠。

这只是我想要整理的一件烦人的小事。

我的清单代码：

```
<!DOCTYPE html>
<html lang="en">
<head>

    <link href="css/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="css/bootstrap-responsive.css" rel="stylesheet" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGHicks Homepage</title>
    <link href="css/stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

            <div class="row-fluid">
                <div class="span5">
                    <ul>
                        <li><strong>Conservatories</strong></li>
                        <li><strong>Extensions</strong></li>
                        <li><strong>Window & Door Refits</strong></li>
                        <li><strong>Bricklaying</strong></li>
                        <li><strong>Driveways</strong></li>
                        <li><strong>Carpentry</strong></li>
                        <li><strong>Patios</strong></li>
                        <li><strong>Stonework</strong></li>
                    </ul>
                </div>
                <div class="span6 offset1">
                    <ul>
                        <li><strong>Plastering</strong></li>
                        <li><strong>Kitchen & Bathroom Refits</strong></li>
                        <li><strong>Tiling</strong></li>
                        <li><strong>Fencing</strong></li>
                        <li><strong>Fascias</strong></li>
                        <li><strong>Garages & Carports</strong></li>
                        <li><strong>Guttering</strong></li>
                    </ul>
                </div>  
            </div> 
   </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T00:27:57.930

堆叠是指文本重叠吗？如果是这种情况，您可以使用媒体查询来随着屏幕尺寸的变化而改变排版的尺寸。

请参阅下面的小提琴并调整右下窗格的大小（缩小）以查看字体大小的变化。

示例代码：

```
@media only screen and (min-width: 1100px) {
    body { font-size:120%;}
    .wrap {max-width:770px;}
}  

@media only screen and (max-width: 800px) {
    body { font-size:100%;}
}   

@media only screen and (max-width: 400px) {
    body { font-size:75%;}
} 
```

[小提琴。](http://jsfiddle.net/SAzm8/)

# javascript - Codemirror 不适用于不同的 ID

> ID：14672562
> 
> 赞同：1
> 
> 时间：2013-02-03T12:41:52.103
> 
> 标签：javascript, html, codemirror

我想将 CodeMirror 用于我网站上的两个页面。第一个是代码片段上传页面，第二个是查看代码片段的页面。在第二页上，我想将 CodeMirror 设为只读，显然是为了不允许用户更改其内容。

因此，第一页（上传页面）完美无缺，它以应有的方式显示插件，并且按应有的方式工作。
**这是它的图像：**

![](../Images/63e5002a5b6d42837c0bd163beb50a3b.png)

**这是它的javascript：（它是一个外部脚本文件）**

```
var UploadPageCodeMirror = CodeMirror.fromTextArea(document.getElementById('CodeSnippetBody'), {        mode: "javascript",        theme: "default",        lineNumbers: true    }); 
```

**HTML：**

```
<textarea rows="15" cols="70" name="CodeSnippetBody" id="CodeSnippetBody" @Validation.For("CodeSnippetBody")></textarea> 
```

该问题仅在第二页上仍然存在，用户可以在其中查看上传的片段。由于某种原因，它不适用于不同的 textarea ID，尽管我正确引用了它。如果我出于某种原因将此文本区域的 ID 更改为上传页面 (CodeSnippetBody) 上的 ID，它可以工作，但我无法更改它的属性。

**这是js：（相同的外部脚本文件）**

```
var ReadOnlyCodeMirror = CodeMirror.fromTextArea(document.getElementById('CodeSnippetBodyReadOnly'), {        mode: "javascript",        theme: "default",        lineNumbers: true    }); 
```

这是HTML：

```
<textarea id="CodeSnippetBodyReadOnly">@code["CodeSnippetBody"]</textarea> 
```

**它显示如下：**

![](../Images/f1f95d4eba862420bf807cd25d56817b.png)

如您所见，插件不会初始化

如果我将此文本区域的 ID 更改为 CodeSnippetBody，则它与上传页面的 ID 匹配，它可以工作：

```
<textarea id="CodeSnippetBody">@code["CodeSnippetBody"]</textarea> 
```

**显示如下：**

![](../Images/dab4e8a33c677c01be7b2fa0eac4e4db.png)

正如我之前所说，这个问题是我无法将其属性更改为 ReadOnly。

我究竟做错了什么？

我希望我给了你足够的信息，如果你需要更多，请询问，我会提供。谢谢！

# php - PHP迭代器像mysql迭代器？

> ID：14672571
> 
> 赞同：0
> 
> 时间：2013-02-03T12:43:21.297
> 
> 标签：php, iterator

`SPL`我已经从迭代器扩展和实现了。
但是如果我想使用它，我应该在`foreach`.
我试图`while`像这样使用它：

```
$news = new testClass();

while( $row = $news )
    echo $row["name"]; 
```

它将创建一个无限循环！
但是对于foreach，它工作正常！

这是我班上的佼佼者：

```
class testClass implements \Iterator 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:59:39.783

拳头，勇敢地使用`SPL`此类“标准”问题的类。我经常看到缺乏经验/草率的开发人员（甚至是那些根本不提前考虑的优秀开发人员）在这些类型的情况下重新发明轮子。

您缺少有关`iterator`接口实现的一些非常重要的细节。

有关更多信息，请参阅[PHP:Iterator - Manual](http://php.net/manual/en/class.iterator.php)以及下面的参考实现。

首先，您需要实现`rewind, current, key, next, and valid`函数。参考实现如下所示：

```
class myIterator implements Iterator {
    private $position = 0;
    private $array = array(
        "firstelement",
        "secondelement",
        "lastelement",
    );  

    public function __construct() {
        $this->position = 0;
    }

    function rewind() {
        var_dump(__METHOD__);
        $this->position = 0;
    }

    function current() {
        var_dump(__METHOD__);
        return $this->array[$this->position];
    }

    function key() {
        var_dump(__METHOD__);
        return $this->position;
    }

    function next() {
        var_dump(__METHOD__);
        ++$this->position;
    }

    function valid() {
        var_dump(__METHOD__);
        return isset($this->array[$this->position]);
        }
    }
) 
```

遍历该实现的代码如下所示：

```
$it = new myIterator;

foreach($it as $key => $value) {
    var_dump($key, $value);
    echo "\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T13:00:04.930

`foreach`是遍历所有元素的语言结构。`while`执行代码块，直到给定条件为真。要使其工作，您必须使用自己的函数来检查有效键并返回当前元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T13:38:01.500

最后我创建了一个简单的例子：

```
<?php

/**
 * @author Soroush Khosravi
 * @copyright 2013
 */
class _Iterator
{
    private $array;

    public function setArray(array $data)
    {
        $this->array = $data;
    }

    public function reader()
    {
        if (is_null($this->array))
            return false;

        $elem = array_shift($this->array);
        if (count ($this->array) > 0)
            return $elem;
        return false;
    }
}

Class child extends _Iterator
{
    function execute()
    {
        $this->setArray(array(1,2,3,4,5,6));
        return $this;
    }
}
$obj = new child;
$obj = $obj->execute();
while($row = $obj->reader())
    echo $row;

?> 
```

# android - 无法让联想 a60+ 在 Eclipse 中显示为可用的 android 设备

> ID：14672574
> 
> 赞同：1
> 
> 时间：2013-02-03T12:43:35.917
> 
> 标签：android, eclipse, adb

有没有其他方法可以让它工作？

甚至 android sdk 的 adb 命令也检测不到我的手机。然后有人说我需要先安装手机驱动，我以为手机在开启usb调试的情况下插入手机会自动安装，但似乎没有。

![](../Images/6c0401089e3765030de06e492709b332.png)

我搜索了驱动程序，但不幸的是，它没有包含在手机随附的记忆棒中。甚至联想网站也不提供。

# javascript - JQuery AJax 获取页面片段查找与过滤

> ID：14672577
> 
> 赞同：2
> 
> 时间：2013-02-03T12:43:56.313
> 
> 标签：javascript, jquery, filter, find, jquery-filter

这是我正在测试的 Ajax 代码的形式。

```
$('body').on('submit','#sign-in', function(e) {
    e.preventDefault();

    var data = $(this).serialize();

    var url = $(this).attr('action');
    $.ajax({
        //this is the php file that processes the data and send mail
        url : url,
        type : "POST",
        data : data,
        dataType:"html",
        //Do not cache the page
        cache : false,
        //success
        success : function(response,status) {
            console.log($(response).filter('#dashboard'));
            console.log($(response).find('#dashboard').html());
        }
    });
}); 
```

这是回应。

```
<!DOCTYPE html>
<%@ taglib prefix="s" uri="/struts-tags"%>
<html>
<body>
    <div id = "dashboard">
        <div id = "dash2">
        <h1>HELLO</h1>
        </div>
    </div>
</body>
</html> 
```

根据上面的代码，成功的 jQuery`filter`能够获取带有 id 的 div，`#dashboard`但是`find`返回给我一个`undefined`.

为什么它会这样工作？

供您参考，我使用的是 JQuery 1.9

**更新**

使用 Bergi 的建议，我删除了返回的 html 的 html、body 和 head 标签，这是我收到的错误。

> 未捕获的错误：语法错误，无法识别的表达式：
> 
> # 你好
> 
> 你好 FITCCHHH jquery-1.9.0.min.js:2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T13:22:36.867

jQuery 将您的整个页面设置`innerHTML`为 a `<div>`，因此不会解析 doctype、html、head 和 body 元素。您只能取回结果元素的集合，并且由于您`#dashboard`是这些顶级元素之一，因此您需要`filter`而不是`find`.

也可以看看：

*   [使用 jquery 解析完整的 html 页面](https://stackoverflow.com/questions/4429851/parse-complete-html-page-with-jquery)
*   [用 jQuery 抓取 HTML 文档，可能吗？](https://stackoverflow.com/q/3217632/1048572)

我不确定如何解决这个问题，显然那里有很多 jQuery 怪癖。我能想到的：

*   试试[jQuery.parseXML](http://api.jquery.com/jQuery.parseXML/)
*   依赖于`filter`从 jQuery 集合中获取相关元素。不过，由于浏览器似乎对解析的内容不一致，因此您应该执行类似的操作 `$response[$response.is("#dashboard") ? "filter" : "find"]("#dashboard")`
*   将格式错误的集合附加到某个元素并`find`从那里：`$("<div/>").html(response).find("#dashboard")`
*   等待[`jQuery.parseHTML`](http://bugs.jquery.com/ticket/11617)
*   不要发送整个 HTML 文档，而只发送`#dashboard`您感兴趣的元素作为 html 字符串

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T13:04:44.770

如果您使用的是 jquery 1.9 ，则不应再像这样解析 html：

```
var html = $(response); 
```

相反，您应该使用以下内容：

```
var html = $.parseHTML(response);
html = $(html).find('#dashboard').html(); 
```

**从 Jquery Docs 1.9 开始：** *传递给 jQuery() 的 HTML 字符串以非小于字符开头的字符串将被解释为选择器。由于字符串通常不能被解释为选择器，因此最有可能的结果将是 Sizzle 选择器引擎抛出的“无效选择器语法”错误。使用 jQuery.parseHTML() 解析任意 HTML。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-19T16:31:55.587

您应该使用上面指出的 parseHTML。filter 和 find 之间的区别似乎在于元素在返回的 HTML 片段中的位置。如果您正在寻找#foo，那么如果#foo 是返回的HTML 中的顶级元素，则使用.filter('#foo')，否则使用.find('#foo')。

# xaml - 如何在 VariableSizedWrapGrid 周围放置边框？

> ID：14672583
> 
> 赞同：2
> 
> 时间：2013-02-03T12:44:36.657
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

这让我发疯了，我相信一定有一个直截了当的答案（我无法发现）。

我有一个分组的 gridview 控件，它使用 VariableSizedWrapGrid 作为分组面板。我的客户批准的设计包括每组的顶部和底部边框。我以为我可以做以下两件事之一：

1.  在 VariableSizedWrapGrid 上指定边框；或者
2.  在 GroupStyle.HeaderTemplate 中创建一行并将其应用于页脚。

所以看起来我不能做任何这些事情，因为 VariableSizedWrapGrid 继承自 Panel 不支持边框属性（仅添加边框作为子元素）并且 GridView 类不包含分组页脚属性。有没有办法为 VariableSizedWrapGrid 应用边框？Xaml 对我来说很新，因为我通常专注于服务器端代码而不是演示文稿。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:39:44.423

如果我对您的理解正确，那么您要实现的目标是这样的：

![下面代码的结果](../Images/2156cbb02cf2eed86a75e598c155e8f0.png)

这是它的代码，它也应该与 variablesizegrid 一起使用。如果我误解了，请添加更多详细信息和您已有的代码，以便我们了解如何最好地帮助您。

```
<common:LayoutAwarePage
x:Name="pageRoot"
x:Class="App14.ItemsPage"
DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:App14"
xmlns:data="using:App14.Data"
xmlns:common="using:App14.Common"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">

<Page.Resources>
    <CollectionViewSource x:Name="groups" IsSourceGrouped="true" />
</Page.Resources>
<Grid Style="{StaticResource LayoutRootStyle}">
    <Grid.Resources>
        <DataTemplate x:Key="groupTemplate">
            <Grid>
                <Border BorderBrush="White" BorderThickness="0,10" Padding="20">
                    <StackPanel >
                        <Border Background="DarkGreen" Padding="10" Margin="10">
                            <TextBlock Text="{Binding Name}"/>
                        </Border>
                        <Border Background="Yellow" Padding="10" Margin="10">
                            <Image Width="100" Height="100" Stretch="Uniform" Source="{Binding Image}"/>
                        </Border>
                    </StackPanel>
                </Border>
            </Grid>
        </DataTemplate>
    </Grid.Resources>
    <Grid.RowDefinitions>
        <RowDefinition Height="140"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <GridView
        x:Name="itemGridView"
        AutomationProperties.AutomationId="ItemsGridView"
        AutomationProperties.Name="Items"
        TabIndex="1"
        Grid.RowSpan="2"
        Padding="116,136,116,46"
        ItemsSource="{Binding Source={StaticResource groups}}"
        ItemTemplate="{StaticResource groupTemplate}">
        <GridView.GroupStyle>
            <GroupStyle>
                <GroupStyle.HeaderTemplate>
                    <DataTemplate>
                        <Grid Margin="10">
                            <TextBlock Text='{Binding Key}' Foreground="White" FontSize="25" Margin="5" />
                        </Grid>
                    </DataTemplate>
                </GroupStyle.HeaderTemplate>
            </GroupStyle>
        </GridView.GroupStyle>
    </GridView>
</Grid> 
```

和代码：

```
namespace App14 
```

{ 公共密封部分类 ItemsPage ：App14.Common.LayoutAwarePage { public ItemsPage() { this.InitializeComponent();

```
 groups.Source = GetAllGrouped(LoadCats());
    }
    public IEnumerable<IGrouping<string, FakeCat>> GetAllGrouped(IEnumerable<FakeCat> cats)
    {
        return cats.OrderBy(x => x.Name).GroupBy(x => x.Name);
    }

    IEnumerable<FakeCat> LoadCats()
    {
        return new List<FakeCat>
                   {
                       new FakeCat {Name = "Naomi", Image = "../Assets/cat1.jpg"},
                       new FakeCat {Name = "Naomi", Image = "../Assets/cat2.jpg"},
                       new FakeCat {Name = "Peter", Image = "../Assets/cat3.jpg"},
                       new FakeCat {Name = "Spencer", Image = "../Assets/cat4.jpg"},
                   };
    }
}
public class FakeCat
{
    public string Name { get; set; }
    public string Image { get; set; }
    public int ItemSize { get; set; }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:14:25.343

问题解决了！我想我很难弄清楚是什么控制了组的模板而不是实际的项目。我想感谢解决这个问题，但答案来自 LinkedIn 小组的成员。以下样式在应用于 GridView 的 GroupStyle 的 ContainerStyle 时有效：

```
<Style x:Key="GroupItemStyle1" TargetType="GroupItem">
    <Setter Property="IsTabStop" Value="False"/>
    <Setter Property="Template">
    <Setter.Value>
    <ControlTemplate TargetType="GroupItem">
        <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
        <Grid>
            <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
        <ContentControl x:Name="HeaderContent" ContentTemplate="{TemplateBinding ContentTemplate}" ContentTransitions="{TemplateBinding ContentTransitions}" ContentTemplateSelector="{TemplateBinding ContentTemplateSelector}" Content="{TemplateBinding Content}" IsTabStop="False" Margin="{TemplateBinding Padding}" TabIndex="0"/>
        <Rectangle VerticalAlignment="Bottom" HorizontalAlignment="Stretch" Height="1" Fill="White" Margin="5,0,15,0" />
        <ItemsControl x:Name="ItemsControl" IsTabStop="False" ItemsSource="{Binding GroupItems}" Grid.Row="1" TabIndex="1" TabNavigation="Once">
            <ItemsControl.ItemContainerTransitions>
                <TransitionCollection>
                    <AddDeleteThemeTransition/>
                    <ContentThemeTransition/>
                    <ReorderThemeTransition/>
                    <EntranceThemeTransition IsStaggeringEnabled="False"/>
                </TransitionCollection>
            </ItemsControl.ItemContainerTransitions>
        </ItemsControl>
        <Rectangle Grid.Row="1" VerticalAlignment="Bottom" HorizontalAlignment="Stretch" Height="1" Fill="White" Margin="5,0,15,0" />
        </Grid>
        </Border>
    </ControlTemplate>
    </Setter.Value>
    </Setter>
</Style> 
```

然后在 GridView 的 XAML 中：

```
<GridView.GroupStyle>
    <GroupStyle  HidesIfEmpty="True" ContainerStyle="{StaticResource GroupItemStyle1}">
        <GroupStyle.HeaderTemplate>
            <DataTemplate>
                <!-- Header Template here  -->
            </DataTemplate>
        </GroupStyle.HeaderTemplate>

        <GroupStyle.Panel>

            <ItemsPanelTemplate>
                <VariableSizedWrapGrid Orientation="Vertical" Margin="0,0,0,0"/>
            </ItemsPanelTemplate>

        </GroupStyle.Panel>
    </GroupStyle>
</GridView.GroupStyle> 
```

# session - Tomcat 会话复制

> ID：14672594
> 
> 赞同：0
> 
> 时间：2013-02-03T12:46:13.930
> 
> 标签：session, tomcat, replication, shared

我正在尝试使用在同一 LAN 的几台计算机上运行的 tomcat 开发一个应用程序，尝试代表多个节点，并且每个节点都运行一个具有单个共享会话的应用程序（例如，共享文档编辑器，例如 google docs。）。到目前为止，据我所知，我需要一个共享会话，并且多个用户需要同时更新文档，并且彼此的更新都反映在我们几乎愚蠢地交互的彼此身上。我可以使用 tomcat 的集群功能来实现这一点吗？[http://tomcat.apache.org/tomcat-7.0-doc/cluster-howto.html#Configuration_Example](http://tomcat.apache.org/tomcat-7.0-doc/cluster-howto.html#Configuration_Example)或者这只是一个故障恢复系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:21:25.943

Tomcat的集群特性是为了故障转移——如果一个节点发生故障，用户可以继续工作，同时被透明地发送到另一个节点，而无需再次登录。

你想要实现的是一个完全不同的场景，我认为使用 session 是错误的。如果您回到 Google Doc 示例，您将如何实现向其他用户授予（撤销？）文档访问权限？会话超时时您会做什么 - 再次创建文档？此外，您将如何定义哪些用户能够访问选定的文档？

无论如何，您都需要将这些数据保存在某个地方（DB？），因此实施或重用一些现有的 ACL 系统，您可以在其中共享有关用户和文档权限的信息。

# node.js - Node.js 没有发送正确的 POST 消息

> ID：14672597
> 
> 赞同：1
> 
> 时间：2013-02-03T12:47:00.987
> 
> 标签：node.js

我在 node.js 中有这样的代码：

```
var requestData = JSON.stringify({ id : data['user_id'] });
var options = {
    hostname: 'localhost',
    port: 80,
    path: '/mypath/index.php',
    method: 'POST',
    headers: {
        "Content-Type": "application/json",
        'Content-Length': requestData.length
    }
};

var req = http.request(options, function(res) {
    console.log('STATUS: ' + res.statusCode);
    console.log('HEADERS: ' + JSON.stringify(res.headers));
    res.setEncoding('utf8');
    res.on('data', function (chunk) {
        console.log('BODY: ' + chunk);
    });
});

req.on('error', function(e) {
    console.log('problem with request: ' + e.message);
});

// write data to request body
req.write(requestData); 
req.end(); 
```

和 PHP 代码：

```
<?php
    $data = $_POST;
    define('DS', '/');
    umask(000);
    file_put_contents(dirname( __FILE__ ).DS.'log.txt', json_encode($data), FILE_APPEND);
    echo json_encode($data);
?> 
```

很简单......但是在发出 node.js POST 请求后 - PHP 没有获取任何数据。我已经尝试了许多其他将 POST 消息发送到 PHP 的方法，但对我来说没有任何效果。我的意思是，`$_POST`总是**空**的。

还尝试[请求](https://github.com/mikeal/request)nodejs 库：

```
 request.post({
        uri : config.server.protocol + '://localhost/someurl/index.php',
        json : JSON.stringify({ id : data['user_id'] }),
        },
        function (error, response, body) {
        if (!error && response.statusCode == 200) {
            console.log('returned BODY:', body);
        }
        def.resolve(function() {
            callback(error);
        });
    }); 
```

我的问题应该有非常简单的解决方案，但我找不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T12:56:56.840

该`$_POST`数组仅填充了 POST 提交的 HTML 表单。要模拟这样的表单提交，您需要：

*   将请求 Content-Type 标头完全设置为`application/x-www-form-urlencoded`
*   在请求正文中使用表单编码... IE必要时`key=value&key2=value2`使用[百分比编码。](http://en.wikipedia.org/wiki/Percent-encoding)
*   将 Content-Length 标头的值精确计算为正在发送的**字节长度。**您只能在获得完全编码的字符串后执行此操作，尽管不需要字节转换来计算 Content-Length，因为 1 个字符 = urlencoded 字符串中的 1 个字节。

但是，使用您当前的代码（假设您只有 ASCII），您也可以这样做：

```
<?php
    $data = json_decode(file_get_contents("php://input"));
    $error = json_last_error();
    if( $error !== JSON_ERROR_NONE ) {
        die( "Malformed JSON: " . $error );
    }

    define('DS', '/');
    umask(000);
    file_put_contents(dirname( __FILE__ ).DS.'log.txt', json_encode($data), FILE_APPEND);
    echo json_encode($data);
?> 
```

# linux - LinSched 2.6.35 没有有效的结帐链接

> ID：14672598
> 
> 赞同：2
> 
> 时间：2013-02-03T12:47:27.380
> 
> 标签：linux, scheduler

> **可能重复：**
> [2.6.35 内核的 LinSched 源代码](https://stackoverflow.com/questions/8412372/linsched-source-for-2-6-35-kernel)

我一直在寻找`LinSched 2.6.35`一段时间，但网络上所有可用的链接都不起作用。谁有源代码`LinSched 2.6.35`，可以发一份给我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T18:44:59.307

好的，我在互联网上进行了一些搜索，并在这里找到了存储库： (git://git.kernel.org/pub/scm/linux/kernel/git/pjt/linsched.git) 。我已经确认它存在。我在插入链接之前检查了这一点。我真的不完全确定为什么，但是这段代码在互联网上传播了很多，并且有很多断开的链接。关于为什么这段代码有些难以捉摸的一个暗示是，作者可能对他的代码的简洁程度并不感到非常自豪。

我已经通过键入以下内容确认您正在寻找的分支 2.6.35 在那里：

```
 git ls-branch git://git.kernel.org/pub/scm/linux/kernel/git/pjt/linsched.git | grep 2.6.35 
```

我注意到了许多候选版本，也许你会对 rc6 最感兴趣？

我希望这能帮到您。

干杯。

# qt - 构建错误 - 变量环境设置不正确

> ID：14672600
> 
> 赞同：0
> 
> 时间：2013-02-03T12:47:40.967
> 
> 标签：qt, qt4, environment-variables, qt4.8

我正在尝试在 Windows 上构建开源代码。我得到错误：

```
Warning: QT_QMAKE_EXECUTABLE reported QT_INSTALL_LIBS as D;/Qt/4.8.4/lib
Warning: D**;**/Qt/4.8.4/lib does NOT exist, Qt must NOT be installed correctly.
CMake Error at /usr/share/cmake-2.6.4/Modules/FindQt4.cmake:640 (MESSAGE):
  Could NOT find QtCore header 
```

（这只是错误信息的一部分）

我试图重新安装Qt，没有工作。

我试图在我的计算机 -> 属性 -> 高级 -> 环境变量中将 QT_INSTALL_LIBS 更改为 D:/Qt/4.8.4/lib （而不是 D:/Qt/4.8.4/lib），但这似乎没有改变一件事。

我不知道下一步该做什么。有谁知道我应该怎么做才能解决它？

# javascript - 如何让我的正则表达式匹配空格而不消耗它们？

> ID：14672604
> 
> 赞同：0
> 
> 时间：2013-02-03T12:47:57.690
> 
> 标签：javascript, regex

我正在尝试匹配包含和弦的行，但我需要确保每个匹配都被空格包围或在不消耗字符的情况下首先出现，因为我不希望它们返回给调用者。

例如

```
Standard Tuning (Capo on fifth fret)

Time signature: 12/8
Tempo: 1.5 * Quarter note = 68 BPM

Intro: G Em7 G Em7

  G                 Em7
I heard there was a secret chord
     G                   Em7
That David played and it pleased the lord
    C                D              G/B     D
But you don't really care for music, do you? 
        G/B                C          D
Well it goes like this the fourth, the fifth
    Em7                 C
The minor fall and the major lift
    D            B7/D#         Em
The baffled king composing hallelujah

Chorus:

G/A   G/B  C           Em         C             G/B   D/A    G
Hal - le-  lujah, hallelujah, hallelujah, hallelu-u-u-u-jah .... 
```

几乎可以工作，除了它也匹配“68 BPM”中的“B”。现在如何确保和弦正确匹配？我不希望它与之前的 B 或 SUBSIDE 的 D 或 E 匹配？

这是我在每一行上匹配的算法：

```
function getChordMatches(line) {
    var pattern = /[ABCDEFG](?:#|##|b|bb)?(?:min|m)?(?:maj|add|sus|aug|dim)?[0-9]*(?:\/[ABCDEFG](?:#|##|b|bb)?)?/g;
    var chords = line.match(pattern);
    var positions = [];
    while ((match = pattern.exec(line)) != null) {
        positions.push(match.index);
    }

    return {
        "chords":chords,
        "positions":positions
    };
} 
```

也就是说，我想要 ["A"、"Bm"、"C#"] 形式的数组，而不是 ["A"、"Bm"、"C#"]。

**编辑**

我使用接受的答案使其工作。我不得不进行一些调整以适应前导空格。感谢大家抽出宝贵的时间！

```
function getChordMatches(line) {
    var pattern = /(?:^|\s)[A-G](?:##?|bb?)?(?:min|m)?(?:maj|add|sus|aug|dim)?[0-9]*(?:\/[A-G](?:##?|bb?)?)?(?!\S)/g;
    var chords = line.match(pattern);
    var chordLength = -1;
    var positions = [];

    while ((match = pattern.exec(line)) != null) {
        positions.push(match.index);
    }

    for (var i = 0; chords && i < chords.length; i++) {
        chordLength = chords[i].length;
        chords[i] = chords[i].trim();
        positions[i] -= chords[i].length - chordLength;
    }

    return {
        "chords":chords,
        "positions":positions
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:03:27.237

*我假设您已经将输入分成几行。该函数将逐行处理。*

您只需要在提取它们之前检查该行是否有一个和弦作为第一项：

```
if (/^\s*[A-G](?:##?|bb?)?(?:min|m)?(?:maj|add|sus|aug|dim)?[0-9]*(?:\/[A-G](?:##?|bb?)?)?(?!\S)/.test(line)) {
    // Match the chords here
} 
```

我`^\s*`在前面添加以从行首开始检查，并添加`(?!\S)`以检查第一个和弦后是否有空格字符`\s`或行尾。

请注意，我对您的正则表达式进行了一些小的更改，因为`A##`（假设它是有效的和弦）不会与您当前的正则表达式匹配。正则表达式引擎将按照交替模式的顺序检查匹配，因此`#`将首先尝试在`#|##`. 它将找到`A#`匹配项并返回匹配项而不检查`##`. 颠倒顺序`##|#`或使用贪婪量词可以`##?`解决问题，因为它首先检查更长的替代方案。

* * *

如果您确定：“如果第一项是和弦，那么其余的都是和弦”，那么您可以不用匹配，而是用空格分隔：

```
line.split(/\s+/); 
```

* * *

**更新**

如果您只想匹配您的模式，无论和弦是否在句子中（您目前拥有的将这样做）：

```
/(?:^|\s)[A-G](?:##?|bb?)?(?:min|m)?(?:maj|add|sus|aug|dim)?[0-9]*(?:\/[A-G](?:##?|bb?)?)?(?!\S)/ 
```

此正则表达式将放置在您的问题中的代码中。

我检查和弦前面是否有空格字符或者是带有`(?:^|\s)`. 不过，您需要修剪结果中的前导空格。

使用`\b`代替`(?:^|\s)`将避免前导空格问题，但含义不同。除非您对输入足够了解，否则我建议您不要这样做。

* * *

另一种方法是将字符串拆分为`\s+`，并针对每个标记测试以下正则表达式（注意`^`开头和`$`结尾的 ）：

```
 /^[A-G](?:##?|bb?)?(?:min|m)?(?:maj|add|sus|aug|dim)?[0-9]*(?:\/[A-G](?:##?|bb?)?)?$/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:11:40.687

在开头和结尾添加`\b`（单词边界）对我有用。此外，您可以使用`A-G`而不是 `ABCDEFG`. 因此：

```
> re = /\b[A-G](?:#|##|b|bb)?(?:min|m)?(?:maj|add|sus|aug|dim)?[0-9]*(?:\/[A-G](?:#|##|b|bb)?)?\b/g
/\b[A-G](?:#|##|b|bb)?(?:min|m)?(?:maj|add|sus|aug|dim)?[0-9]*(?:\/[A-G](?:#|##|b|bb)?)?\b/g

> 'G/A   G/B  C           Em         C             G/B   D/A    G'.match(re)
["G/A", "G/B", "C", "Em", "C", "G/B", "D/A", "G"]

> 'Tempo: 1.5 * Quarter note = 68 BPM'.match(re)
null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T13:12:09.383

在回答标题中的具体问题时，请使用前瞻：

```
 (?=\s) 
```

当嵌入到 RE 中时，将确保以下字符是空格而不消耗它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T15:46:49.180

尝试以下

```
function getChordMatches( line ) {
    var match,
        pattern = /(?:^|\s)([A-G](?:##?|bb?)?(?:min|m)?(?:maj|add|sus|aug|dim)?\d*(?:\/[A-G](?:##?|bb?)?)?)(?=$|\s)/g,
        chords = [],
        positions = [];

    while ( match = pattern.exec(line) ) {
        chords.push( match[1] );
        positions.push( match.index );
    }

    return {
        "chords" : chords,
        "positions" : positions
    };
} 
```

它用于`(?:^|\s)`确保和弦位于行首或前面有一个空格，并使用正向预测`(?=$|\s)`来确保和弦后面有一个空格或位于行尾。添加括号以捕获和弦本身，然后由 访问`match[1]`。

# php - 将多个搜索查询添加到搜索脚本？

> ID：14672605
> 
> 赞同：1
> 
> 时间：2013-02-03T12:48:14.363
> 
> 标签：php, mysql

我正在尝试找出一种允许用户通过多个查询进行搜索的方法，目前我拥有的搜索脚本只允许一个真正的 like for like 匹配词，它与数据库中的词类似。

因此，如果我输入女性，我会得到所有女性用户，但我想要做的是允许用户输入棕色头发的女性。

因为 'haired' 不是查询，也没有存储在数据库中，但仍允许搜索显示 query = 'brown' 和 query = 'women'。

我尝试简单地用 AND 替换 OR like '%".query."%' 但这意味着如果用户只搜索女性，则不会显示任何内容，因为它要求包含所有查询。

谁能告诉我我该怎么做我真的很挣扎？

谢谢。

```
<?php
//PHP CODE STARTS HERE

if(isset($_GET['submit'])){

// Change the fields below as per the requirements
$db_host="localhost";
$db_username="root";
$db_password="";
$db_name="";
$db_tb_atr_name="display_name";

//Now we are going to write a script that will do search task
// leave the below fields as it is except while loop, which will display results on screen

mysql_connect("$db_host","$db_username","$db_password");
mysql_select_db("$db_name");

$query=mysql_real_escape_string($_GET['query']);

$query_for_result=mysql_query("SELECT * 
                        FROM ptb_stats
                        WHERE display_name like '%".$query."%' OR location LIKE '%".$query."%' OR sex LIKE '%".$query."%' OR nationality LIKE '%".$query."%' OR ethnicity LIKE '%".$query."%' OR age LIKE '%".$query."%' OR local_station LIKE '%".$query."%' OR height LIKE '%".$query."%' OR weight LIKE '%".$query."%' OR status LIKE '%".$query."%' OR build LIKE '%".$query."%' LIMIT 5");
echo "<div class=\"search-results\">";
while($data_fetch=mysql_fetch_array($query_for_result))

{

    echo "<div class=\"text\"><a href=\"profile.php?id={$data_fetch['user_id']}\" class=\"search\">";
    echo "<div class=\"spacing\"><img width=35px height= 30px src=\"data/photos/{$data_fetch['user_id']}/_default.jpg\" class=\"boxgridsearch\"/> "; 
     echo substr($data_fetch[$db_tb_atr_name], 0,160);
    echo "</a></div></div>";

}
echo "<div class=\"morebutton-search\"><a href=\"search_results.php?query=$query\">+ view more results</a></div>";

mysql_close();
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:09:29.777

使用全文搜索

`mysql_query("SELECT *,MATCH(display_name, location, sex, nationality, ethnicity, age, local_station, height, weight, status, build) AGAINST ('$query' IN BOOLEAN MODE) AS relevance FROM ptb_stats WHERE MATCH(display_name, location, sex, nationality, ethnicity, age, local_station, height, weight, status, build) AGAINST('$query' IN BOOLEAN MODE) ORDER BY relevance DESC LIMIT 5");`

这里

```
('$query' IN BOOLEAN MODE) AS relevance 
```

意味着您按相关顺序获得结果，但如果您希望以任何其他 mysql 方式（如 random() ）对其进行排序，您可以使用：

`mysql_query("SELECT * FROM ptb_stats WHERE MATCH(display_name, location, sex, nationality, ethnicity, age, local_station, height, weight, status, build) AGAINST('$query' IN BOOLEAN MODE) order by random() DESC LIMIT 5");`

# ruby-on-rails - Where 返回列名和值

> ID：14672606
> 
> 赞同：0
> 
> 时间：2013-02-03T12:48:27.013
> 
> 标签：ruby-on-rails, rails-activerecord

这是我的代码：

```
<%= DimensionVersion.where(:dimension_id => 1).select("name") %> 
```

我希望得到一个维度版本名称列表，其中：dimension_id => 1。数据库中有四个。

相反，我得到了这个：

```
#<ActiveRecord::Relation:0x3d351c8> 
```

编辑：

我想出了如何用这个返回我想要的（有点）：

```
<%= DimensionVersion.select("name").where(:dimension_id => 1).all %> 
```

返回：

```
[#<DimensionVersion name: "Default">, #<DimensionVersion name: "Test1">, #<DimensionVersion name: "Test2">, #<DimensionVersion name: "Test3">] 
```

但是，我不希望它与`#<DimensionVersion Name: ... >`. 我尝试`=`从前导标签中删除，但没有返回任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:57:17.880

```
DimensionVersion.where(:dimension_id => 1).select("name") 
```

我认为您需要采摘方法。

将上式改写为：

```
DimensionVersion.where(:dimension_id => 1).pluck(:name) 
```

类似地，甚至像 collect 这样的更高级别的构造也可以用作：

```
DimensionVersion.where(:dimension_id => 1).collect(&:name) 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T12:52:18.580

AR 返回`Relation`，以便您可以链接条件等。如果您想要实际结果，请调用`#all`, `#first`, `#each`,... 就可以了：

```
DimensionVersion.where(:dimension_id => 1).select("name").all 
```

> 用 Rails 查询是一件很痛苦的事情，我即将放弃整个框架并回到 php。

您可能需要阅读指南：[Active Record Query Interface](http://guides.rubyonrails.org/active_record_querying.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T13:05:50.743

我可以通过使用 collect 方法来摆脱列名，如下所示：

```
DimensionVersion.select("name").where(:dimension_id => 1).all.collect { |d| [d.name]} 
```

# mysql - 从 SQL 查询中删除不完整的 ISO 日期？

> ID：14672609
> 
> 赞同：1
> 
> 时间：2013-02-03T12:48:33.597
> 
> 标签：mysql, sql, perl, date, iso

我正在用 Perl 编写一个应用程序来处理来自 MySQL 数据库的数据。我只需要选择具有有效 ISO 格式日期 YYYY-MM-DD 的记录。但是很多记录没有月份或日期的值，所以它们就像这样 1999-00-00。我需要过滤掉这些。

我可以用 Perl 做到这一点，但我认为最好的方法是在 SQL 语句中使用 REGEXP 函数；但是我不确定这是否是最好的方法；我也不知道如何正则表达式数据。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:54:25.753

你总是可以只使用：

```
where DATE_COL not like '%-00-00' 
```

# javascript - 在 javascript 中使用正则表达式优于 toString 方法进行函数反编译的优势

> ID：14672611
> 
> 赞同：1
> 
> 时间：2013-02-03T12:48:47.073
> 
> 标签：javascript, string, function

[John Resig 在他的简单继承](http://ejohn.org/blog/simple-javascript-inheritance/)示例中使用了函数反编译技术。他的正则表达式技术也被用于 jQuery 库，同样的技术在 Opera 博客上受到批评。[在歌剧博客上](http://my.opera.com/hallvors/blog/show.dml/1665828)，有人写道：

> 这不是一个好主意，因为反编译函数是 ES-262 规范的一个可选特性。对于某些低端平台，它速度慢并且需要太多资源，因此任何 Opera Mobile 版本都不支持它。

我很了解**Function.prototype.toString**方法，并且我也知道不同浏览器供应商的不同实现。所以来回答我的问题：

**是否可以在当前状态下进行跨浏览器、可靠的函数反编译？**

如果是，我应该使用上面提到的哪一种技术？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:53:39.420

> 我应该使用上面提到的哪一种技术？

只有一种技术，那就是[`toString`函数的方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/toString)。

如果您使用正则表达式及其`test`方法，则参数将隐式转换为字符串 - 通过调用其`toString`方法。

# javascript - 在开始或动态引用javascript？

> ID：14672614
> 
> 赞同：0
> 
> 时间：2013-02-03T12:48:58.973
> 
> 标签：javascript, ajax, jquery

我有一个我一直在开发的小型 Web 应用程序，并且 Javascript 的数量开始增加。我想知道何时加载/引用您的 javascript 的最佳做法是什么（如果有的话）。在开始时一次性全部或根据需要动态？

我知道当我的网站的某些部分被加载并需要它时，如何通过 ajax 动态添加 Javascript 引用？

我希望这个问题是有道理的，我还是新手。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:25:41.370

这实际上取决于 JavaScript 的大小。一次加载一个`50kb`文件比有浏览器请求要好`50 x 1kb`。首先，我建议最小化 JavaScript 源代码，看看它的去向。

对您的网站进行基准测试的一个很好的工具是[YSlow](http://yslow.org/)，它还建议您可以进行一些改进。请不要试图解决 YSlow 批评的所有问题，因为某些建议仅对真正的大型网站有意义。（例如，您可能不需要分布式 CDN 等）

对于 JavaScript 缩小，我对Google的[Closure Compiler](https://developers.google.com/closure/compiler/)有很好的体验。

# performance - 了解影响脚本速度的因素

> ID：14672615
> 
> 赞同：0
> 
> 时间：2013-02-03T12:49:03.400
> 
> 标签：performance, webserver

嗨（不确定是否在正确的论坛中）

我目前正在使用 hostpapa 作为我的虚拟主机。在我的 apache 服务器上开发期间，我的所有脚本（javascript、php 等）都运行良好且速度合理。但是，当我放置在实时服务器上时，我注意到 php 和 javascript 有相当大的延迟。

我已经计时了一个颜色框调用，它需要 5600 毫秒才能完成加载（在主机爸爸上）——这是盯着屏幕的年龄。

所以我决定寻找另一个主人。目前我正在试用 34esp 和 1and1。34esp 需要 2400 到 5000 毫秒来加载（有时要长得多）。1and1 需要 1300 到 1700 毫秒。

hostpapa 是美国的服务器，34sp 和 1and1 是英国的（im uk based）。那么 - 是什么影响速度如此之大？该网络与正在使用的服务器有关还是与正在使用的服务器有关？我可以进行哪些其他测试来帮助我确定要选择的最佳服务器？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:56:17.753

似乎是关于 PHP 脚本，这个问题是模棱两可的。一般来说，取决于很多因素。例如涉及服务器类型或 PHP 引擎。此外，您可以在 C 或 Java [Quercus](http://quercus.caucho.com/)中为 Glassfish 实现 PHP。看看[Benchmark and Optimize PHP Script Speed](http://www.webdesign.org/web-programming/php/benchmark-and-optimize-php-script-speed.14875.html)。

# php - 在 Web App 中与 DB 进行通信的适当安全性

> ID：14672620
> 
> 赞同：0
> 
> 时间：2013-02-03T12:50:07.103
> 
> 标签：php, sql-server, security, web-applications

我真的有很多关于这个特定领域的问题。但基本上我只是想知道如何创建最有效和最安全的 php`session`通信方法。我读过很多网站都在谈论这个，他们似乎并不同意或与我目前的情况有关。

我的问题是我不知道如何正确地创建登录、会话、cookie、注册等以匹配高安全级别。到目前为止，这是我的想法。

**1\. PHP 会话**

登录后我将开始一个会话。我知道我有不同的方法来处理这些问题，但目前我已经创建了一个像这样的会话变量，`$_SESSION['user']`它可以让我在会话期间存储用户的电子邮件地址。然后，当会话与服务器结束时，我遇到了问题。这导致我到下一个属性。

**2\. 饼干**

使用 cookie，我将能够存储电子邮件地址和散列编码密码，然后能够根据这些登录信息重新创建会话。

```
<?
session_start();
require_once('config.php'); //retrieved from the servers include folder specified on the apache server.

// if session is closed that means that there wouldn't be stored a session variable called 'user' anymore.
if ($_SESSION['user'] == '') {

    // if the cookie hasn't been set..
    if ($_COOKIE['user'] == '') {

        // ... close the session and return to the login page
        session_destroy();
        header('Location: login.php?err=4'); // err=4 means session ended

    } else {

        // We don't know wether the user has logged in using e-mail or username, so that's why we connect using either email or username.
        $sql = 'SELECT * FROM login WHERE (email = :user and password = :psw) or (username = :user and password = :pass)';

        $statement = $conn->prepare($sql);

        $statement->bindParam(':user', $_COOKIE['user'], PDO::PARAM_STR);
        $statement->bindParam(':psw', $_COOKIE['psw'], PDO::PARAM_STR);

        if ($statement->execute() && $row = $statement->fetch()) {

            $_SESSION['user'] = $_COOKIE['user'];

        } else {

            // Failed to retrieve data somehow.
        }
    }
}

?> 
```

但后来我读到，`session_id()`也是一个 cookie 存储的值，每次我重新创建会话时都是一样的。所以我实际上不必再次将值与服务器匹配，因为我可以简单地再次启动会话并从我离开的地方继续。但我认为这是一个安全漏洞，因为如果`session_id()`其他人已检索到，他们将能够使用相同的`session_id()`等连接。

**3\. 我还需要使用其他域的值**

我知道可以使用来自另一个网站（例如 Facebook、Google 等）的相同登录详细信息。我希望能够为我正在使用的所有域重复使用相同的登录信息，但是我如何确保只有我的（注册）域可以访问登录信息，而不是其他站点？

**4\. 还有其他安全的方法吗？**

这实际上是我的问题。我不确定我所做或计划的事情是否高度安全，而且我绝对不认为我的新手经验足以创建登录安全的数据库连接。因此，我想知道是否有人可以将我链接到以最有效和最安全的方式在 PHP 中存储和使用登录详细信息的正确方法的官方页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:05:05.847

当您想在 PHP 中处理登录时，PHP 会话是您的必经之路。要以保存方式执行此操作，您应该确保您的会话数据存储在您的服务器上，并且客户端在 cookie 中只有一个 session_id。

每次您有安全级别更改（登录、注销等）时，您都应该重新生成会话 ID 以确保更安全（旧的被盗会话 ID 将变得无法使用）。您还应该将会话 cookie 设置为 http_only，这样就无法使用 JavaScript 窃取 cookie。

从安全角度来看，我建议您永远不要使用 cookie 来存储敏感信息。存储在 cookie 中的信息不会被保存，它们会存储在客户端计算机上，并且可以被更改或窃取。

Google 和 Facebook 可以使用 openAuth(2) 登录到各种网站。我不确定这是否对您有用，但 cookie 最多只能由一个域访问。

我建议使用 PHP 会话，**如果您正确处理它们**，它们是安全的。如果您不确定如何执行此操作，可以查看一些好的 PHP 框架。我从经验中知道 Laravel 框架有一个很好的登录处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:57:30.223

会话已经使用 cookie 来保持会话。如果您正确配置它，您可以无限期地保持会话打开，如果这是您想要做的（除非用户删除 cookie，但您的基于 cookie 的解决方案也无济于事）。你用 cookie 自己构建的任何东西都可能没有那么安全，所以我不会打扰它。当然要正确配置[会话设置](http://php.net/manual/en/session.configuration.php)。

跨域重用信息是一个复杂的领域。如果它们都由同一个数据库支持，则只需让用户登录任何站点即可。您将需要管理单独的会话（阅读：用户需要分别登录每个站点，但可以使用相同的用户/密码）或构建一些非常复杂的跨域会话共享（提示：您可能不想这样做） . 如果您想寻求更复杂的解决方案（例如，因为您的域不共享中央数据库），谷歌“单点登录”并准备好几个小时、几天和几周的阅读。

# css - 粗体文本跳回正常

> ID：14672622
> 
> 赞同：0
> 
> 时间：2013-02-03T12:50:16.837
> 
> 标签：css, fonts

我想在我的 wordpress 网站上的 h1 上做一些粗体文本。我已经编辑了 CSS 以使用 font-weight: bold 但它似乎与其他东西冲突。

发生的情况是，加载时它是粗体的，但加载后它会跳回正常的加权文本。任何人都可以看看它：

[http://www.norsktvthailand.net/windows/](http://www.norsktvthailand.net/windows/)？

样式表可以在以下位置找到：

[http://www.norsktvthailand.net/wp-content/themes/squirrel/style.css](http://www.norsktvthailand.net/wp-content/themes/squirrel/style.css)

我哪里错了？我想要粗体的文本是 H1。我也尝试过使用：

```
font-weight: bold !important; 
```

覆盖其他规则。不过好像不行。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:03:59.460

![在此处输入图像描述](../Images/d48f18e5451a7339619713e88aeb87d0.png)

使用检查元素 (Google Chrome)、firebug (Firefox)、开发者工具 (IE) 来查看渲染如何改变样式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:15:17.497

该页面使用了[Cufón](http://cufon.shoqolate.com/generate/)替换技术，因此在生成 Cufón 代码时必须选择字体粗细。从 CSS 的角度来看，标题根本不显示为文本，而是由 CSS 外部的一些例程显示。

# python - 使用 Python 进行内存转储

> ID：14672624
> 
> 赞同：0
> 
> 时间：2013-02-03T12:50:21.253
> 
> 标签：python, memory-management, itertools, prefixes

我有一个用 Python 为我编写的小程序，可以帮助我从我知道的不同数字和单词集生成所有密码组合，以恢复我忘记的密码，因为我知道我使用的所有不同单词和数字集想要生成所有可能的组合，唯一的问题是列表似乎持续了几个小时，所以最终我用完了内存并且没有完成。

我被告知它需要转储我的内存以便它可以继续，但我不确定这是否正确。有什么办法可以解决这个问题吗？

这是我正在运行的程序：

```
#!/usr/bin/python
import itertools
gfname = "name"
tendig = "1234567890"
sixteendig = "1111111111111111"
housenum = "99"
Characterset1 = "&&&&"
Characterset2 = "££££"
daughternam = "dname"
daughtyear = "1900"
phonenum1 = "055522233"
phonenum2 = "3333333"

mylist = [gfname, tendig, sixteendig, housenum, Characterset1,
          Characterset2, daughternam, daughtyear, phonenum1, phonenum2]
for length in range(1, len(mylist)+1):
    for item in itertools.permutations(mylist, length):
            print "".join(item) 
```

出于显而易见的原因，我取出了几组并更改了数字和单词，但这大致是程序。

另一件事是我可能遗漏了一个特定的单词，但不想把它放在列表中，因为我知道它可能会在所有生成的密码之前出现，有谁知道如何为我的程序添加前缀。

抱歉语法不好，感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:48:54.057

以前`guppy`了解内存使用情况，稍微改了一下OP代码（标#！！！）

```
import itertools
gfname = "name"
tendig = "1234567890"
sixteendig = "1111111111111111"
housenum = "99"
Characterset1 = "&&&&"
Characterset2 = u"££££"
daughternam = "dname"
daughtyear = "1900"
phonenum1 = "055522233"
phonenum2 = "3333333"

from guppy import hpy # !!!
h=hpy()               # !!!
mylist = [gfname, tendig, sixteendig, housenum, Characterset1,
          Characterset2, daughternam, daughtyear, phonenum1, phonenum2]
for length in range(1, len(mylist)+1):
    print h.heap() #!!!
    for item in itertools.permutations(mylist, length):
            print item # !!! 
```

每次`h.heap()`调用 Guppy 都会输出类似的内容。

```
Partition of a set of 25914 objects. Total size = 3370200 bytes.
 Index  Count   %     Size   % Cumulative  % Kind (class / dict of class)
     0  11748  45   985544  29    985544  29 str
     1   5858  23   472376  14   1457920  43 tuple
     2    323   1   253640   8   1711560  51 dict (no owner)
     3     67   0   213064   6   1924624  57 dict of module
     4    199   1   210856   6   2135480  63 dict of type
     5   1630   6   208640   6   2344120  70 types.CodeType
     6   1593   6   191160   6   2535280  75 function
     7    199   1   177008   5   2712288  80 type
     8    124   0   135328   4   2847616  84 dict of class
     9   1045   4    83600   2   2931216  87 __builtin__.wrapper_descriptor 
```

跑步`python code.py > code.log`和`fgrep Partition code.log`表演。

```
Partition of a set of 25914 objects. Total size = 3370200 bytes.
Partition of a set of 25924 objects. Total size = 3355832 bytes.
Partition of a set of 25924 objects. Total size = 3355728 bytes.
Partition of a set of 25924 objects. Total size = 3372568 bytes.
Partition of a set of 25924 objects. Total size = 3372736 bytes.
Partition of a set of 25924 objects. Total size = 3355752 bytes.
Partition of a set of 25924 objects. Total size = 3372592 bytes.
Partition of a set of 25924 objects. Total size = 3372760 bytes.
Partition of a set of 25924 objects. Total size = 3355776 bytes.
Partition of a set of 25924 objects. Total size = 3372616 bytes. 
```

我相信这表明内存占用保持相当一致。

当然，我可能会误解`guppy`. 尽管在我的测试过程中，我故意在列表中添加了一个新字符串，以查看对象计数是否增加，并且确实增加了。

对于那些感兴趣的人，我必须像这样在 OSX - Mountain Lion 上安装 guppy `pip install https://guppy-pe.svn.sourceforge.net/svnroot/guppy-pe/trunk/guppy`

总之，我不认为这是内存不足的问题，尽管我们没有使用完整的 OP 数据集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:24:05.917

正如您现在所知道的，您的程序将非常有效地自行运行。但是请确保您不只是在 IDLE 中运行它，例如；随着 IDLE 用越来越多的行更新屏幕，这将减慢它的速度。将输出直接保存到文件中。

更好的是：你有没有想过当你有密码时你会做什么？如果您可以从命令行登录丢失的帐户，请立即尝试这样做，而不是存储所有密码以供以后使用：

```
for length in range(1, len(mylist)+1):
    for item in itertools.permutations(mylist, length):
        password = "".join(item)
        try_to_logon(command, password) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T13:04:39.810

将[IronPython](http://ironpython.net/)和 Visual Studio 用于其调试工具（非常好）怎么样？您应该能够暂停执行并查看内存（本质上是内存转储）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T13:47:35.870

如果您希望文件输出到记事本，要回答@shaun 的上述评论，只需像这样运行您的文件

我的文件.py >输出.txt

如果文本文件不存在，它将被创建。

编辑：

替换底部代码中的行：

```
print "" .join(item) 
```

有了这个：

```
with open ("output.txt","a") as f:
    f.write('\n'.join(items))
f.close 
```

这将生成一个名为 output.txt 的文件。应该工作（尚未测试）

# actionscript-3 - AS3 Flash：从 1 个类中生成 2 个相同的对象？

> ID：14672626
> 
> 赞同：1
> 
> 时间：2013-02-03T12:50:32.513
> 
> 标签：actionscript-3, class, actionscript, random

我在 AS3 中创建游戏，在敌人子弹的类文件中，我有这个代码。

```
public class enemy2Bullet extends MovieClip
{

    public function enemy2Bullet()
    {
        stop();
        //Setup an event listener to see if the bullet is added to the stage.
        addEventListener(Event.ADDED_TO_STAGE, onAdd);
    }

    private function onAdd(e:Event):void
    {
        removeEventListener(Event.ADDED_TO_STAGE, onAdd);
        //Now that our object is on the stage, run our custom code.
        init();
    }

    private function init():void
    {
        if (Math.random() <= 0.5)
        {
        addEventListener(Event.ENTER_FRAME, bullet2Loop)
        }
        else
        {
        addEventListener(Event.ENTER_FRAME, bullet2Loop2)
        }
    }

    private function bullet2Loop(e:Event):void
    {
        if (currentLabel != "destroyed")
        {
            this.x += 8;
        }
        if (currentLabel == "destroyedComplete")
        { 
            destroyEnemy2Bullet();
        }
    }

    private function bullet2Loop2(e:Event):void
    {
        if (currentLabel != "destroyed")
        {
            this.x -= 8;
        }
        if (currentLabel == "destroyedComplete")
        {
            destroyEnemy2Bullet();
        }
    }

    public function destroyEnemy2Bullet():void
    {
        {
            //Remove the object from stage
            stage.removeChild(this);
            //Remove any event listeners
            removeEventListener(Event.ENTER_FRAME, bullet2Loop);
        }
    }
} 
```

编译后，游戏运行，但子弹只向 1 个方向射击。我怎样才能使子弹从左右两侧射出，并保持在那个方向？

这是我的敌人2 功能。

```
private function enemy2Control():void
    {
        if (getTimer() - lastSpawnTime2 > 3000 && aEnemy2Array.length < 3)
        {
            var newEnemy2:MovieClip = new mcEnemy2;
            newEnemy2.x = Math.random() * 800;
            newEnemy2.y = 0;
            aEnemy2Array.push(newEnemy2);
            stage.addChild(newEnemy2);
            lastSpawnTime2 = getTimer();
        }
        //Control enemy's bullets
        for (var i:int = aEnemy2Array.length - 1; i >= 0; i--)
        {
            if (enemy2LastFire + 750 / (aEnemy2Array.length) < getTimer())

            {
                var currentEnemy2:mcEnemy2 = aEnemy2Array[i];
                if (Math.random() < 0.06)
                {
                    var newEnemy2Bullet:enemy2Bullet = new enemy2Bullet();
                    newEnemy2Bullet.x = currentEnemy2.x;
                    newEnemy2Bullet.y = currentEnemy2.y;
                    enemy2BulletArray.push(newEnemy2Bullet);
                    stage.addChild(newEnemy2Bullet);
                    enemy2LastFire = getTimer();
                }
            }
            for (var j:int = enemy2BulletArray.length - 1; j >= 0; j--)
            {
                var currentEnemy2Bullet:enemy2Bullet = enemy2BulletArray[j];
                if (currentEnemy2Bullet.y >= stage.stageHeight)
                {
                    enemy2BulletArray.splice(j, 1);
                    currentEnemy2Bullet.destroyEnemy2Bullet();
                }
                if (currentEnemy2Bullet.hitTestObject(playerCore))
                {
                    playerHP -= 1;
                    currentEnemy2Bullet.gotoAndPlay(2);
                    enemy2BulletArray.splice(j, 1);

                }
            }
        }

    } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T16:36:30.167

一些东西：

• 您可以替换`currentEnemy2Bullet`为`j`并删除整个`var currentEnemy2Bullet:enemy2Bullet = enemy2BulletArray[j];`语句。

•`init()`从不调用。但最好是`newEnemy2Bullet.addEventListener(Event.ENTER_FRAME, whatever)`在实际初始化中进行方向计算并使用`newEnemy2Bullet`.

• 说实话，您的代码相当混乱，可以简化。例如，您可以通过给类一个变量来确定子弹的方向，在初始化时给它一个值，然后让循环根据该变量更新它的位置。

# ios - UserVoice integration in an Phonegap application

> ID：14672627
> 
> 赞同：1
> 
> 时间：2013-02-03T12:50:41.757
> 
> 标签：ios, cordova, configuration, integration, uservoice

I have this iOS Phonegap application and I need to integrate UserVoice. I follow [this tutorial](https://github.com/uservoice/uservoice-iphone-sdk#installation) and I have reached to the point I have to make the configuration. I am really not sure where I have to put that object UserVoice are providing me with:

```
UVConfig *config = [UVConfig configWithSite:@"YOUR_USERVOICE_URL"
                                 andKey:@"YOUR_KEY"
                              andSecret:@"YOUR_SECRET",
                            andSSOToken:@"SOME_BIG_LONG_SSO_TOKEN"]; 
```

I'll appreciate some help with that, since I'm really on a beginner level with iOS apps in general. Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:03:01.860

The code you posted comes from the [UserVoice for iOS SDK](http://www.uservoice.com/ios/) which gives you the libraries and code necessary to include UserVoice in a native iOS app and will not work with a PhoneGap app.

Your options are to write a PhoneGap plugin, in Obj-C, to expose the UserVoice library, or possibly a better option is simply to open your UserVoice page within your PhoneGap app using the InAppBrowser plugin.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:07:51.337

Here is a simple phonegap plugin [http://developerextensions.com/index.php/cordova-phonegap-plugin-uservoice](http://developerextensions.com/index.php/cordova-phonegap-plugin-uservoice)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-23T13:08:46.390

I took the code from here: [http://developerextensions.com/index.php/cordova-phonegap-plugin-uservoice](http://developerextensions.com/index.php/cordova-phonegap-plugin-uservoice) and followed their instructions.

There were some additional things I needed to do:

1.  edit the config.xml and add the feature UserVoiceCommand

2.  edit the .js file and replace Ext.emptyFn with function(){}:

    cordova.exec(function(){}, function(){}, "UserVoiceCommand", "launch", [config]);

(those are the success and failure callback, which I intend to implement as well)

Since it was not functioning correctly on iOS7, I cloned [https://github.com/uservoice/uservoice-ios-sdk](https://github.com/uservoice/uservoice-ios-sdk), compiled it by running ./build.sh and then overwritten the files that came with the plugin.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-10T05:17:07.513

You can now get iOS+Android support from this new cordova plugin:

[https://github.com/Resgrid/cordova-plugins-uservoice](https://github.com/Resgrid/cordova-plugins-uservoice)

P.S. I am not affiliated to this plugin by any means, just came across it.

# java - 不受支持的 ISO 4217 货币代码：GBP

> ID：14672632
> 
> 赞同：0
> 
> 时间：2013-02-03T12:51:22.147
> 
> 标签：java, android

如何使用货币提取货币符号，类似于我正在使用的字符串“GBP”

```
String s = obj.getCurrency().toString();
Currency currency=Currency.getInstance(s); 
```

但它抛出了这个异常：

```
01-31 11:40:40.464: E/AndroidRuntime(3929): FATAL EXCEPTION: main
01-31 11:40:40.464: E/AndroidRuntime(3929): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.primesoft.games.potshot/com.primesoft.games.potshot.PotshotActivity}: java.lang.IllegalArgumentException: Not a supported ISO 4217 currency code: GBP 
01-31 11:40:40.464: E/AndroidRuntime(3929):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-31 11:40:40.464: E/AndroidRuntime(3929):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-31 11:40:40.464: E/AndroidRuntime(3929):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-31 11:40:40.464: E/AndroidRuntime(3929):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-31 11:40:40.464: E/AndroidRuntime(3929):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-31 11:40:40.464: E/AndroidRuntime(3929):     at android.os.Looper.loop(Looper.java:130)
01-31 11:40:40.464: E/AndroidRuntime(3929):     at android.app.ActivityThread.main(ActivityThread.java:3683)
01-31 11:40:40.464: E/AndroidRuntime(3929):     at java.lang.reflect.Method.invokeNative(Native Method)
01-31 11:40:40.464: E/AndroidRuntime(3929):     at java.lang.reflect.Method.invoke(Method.java:507)
01-31 11:40:40.464: E/AndroidRuntime(3929):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 
```

# java - 请帮助我理解这段代码

> ID：14672633
> 
> 赞同：0
> 
> 时间：2013-02-03T12:51:29.260
> 
> 标签：java

我为学校完成了一个 java 项目。这是一段代码，我很难理解它的逻辑。请对此有所了解。

```
for(int i = 0; i< leftbut.length; i++){
          int randomNumber =(int)(Math.random()*leftbut.length);
             tempNum = leftbut[randomNumber];
            leftbut[randomNumber] = leftbut[i];
            leftbut[i]=tempNum;      

     } 
```

在这种情况下，leftbut 实际上是一个由 9 个按钮组成的数组。此代码应该将 9 个按钮打乱在不同的位置。我只是无法理解这段代码是如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:53:18.990

**该代码生成原始数组的随机[排列](http://en.wikipedia.org/wiki/Permutation)。**

但是，请注意这是有偏差的——它不会生成均匀分布的所有排列。[该线程](https://stackoverflow.com/questions/5131341/what-distribution-do-you-get-from-this-broken-random-shuffle)讨论了这种偏见的影响。

为了克服这个问题 - 你可能想看看**[fisher yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)**（主要区别是，在每次迭代中生成一个范围为[i，n）的随机数，而不是在范围[0，n）中。）

* * *

**编辑：**
如果您将分配封装在一个方法中，您可能会更好地理解它：

```
private static void swap(int[] array, int i, int j) { 
       tempNum = array[j];
       array[j] = array[i];
       array[i]=tempNum; 
} 
```

现在，代码将更容易理解：

```
for(int i = 0; i< leftbut.length; i++) {
          //choose a random index in the array
          int randomNumber =(int)(Math.random()*leftbut.length);
          //swap the element in index i with the random element chosen in the array
          swap(leftbut, i, randomNumber);
} 
```

这个想法是你`swap()`在数组中的每个元素都有一个随机索引。这个随机索引是从数组中随机选择的，它的索引表示为`randomNumber`。
由于您只有`swap()`周围的项目，因此您可以轻松证明输出数组是原始数组的排列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T12:53:31.203

它仅 9 次随机交换到 leftbut 数组的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T12:57:23.063

```
for(int i = 0; i< leftbut.length; i++){ 
```

是一个循环，它将变量 i 初始化为 0，并在每个循环中将其递增 1

```
int randomNumber =(int)(Math.random()*leftbut.length); 
```

声明整数变量 randomNumber 并在 0 范围内分配一个随机值 - 数组长度

```
 tempNum = leftbut[randomNumber];         
 leftbut[randomNumber] = leftbut[i];
 leftbut[i]=tempNum; 
```

这实际上反转了数组中的 2 个按钮位置，值 i 变为随机值，反之亦然

# javascript - Highcharts PHP 和 MySQL

> ID：14672635
> 
> 赞同：-1
> 
> 时间：2013-02-03T12:51:42.047
> 
> 标签：javascript, highcharts

我想使用 Highcharts 制作图表，我一直在寻找一个好的工作示例 2 天，但我仍然无法弄清楚。需要的是：

*   从 MySQL 获取数据的 PHP 文件（时间、temp_out、hum_out 等）（只需要知道如何输出数据！）
*   带有容器的浏览器的 HTML 文件
*   HTML 文件的 Javascript

我假设我需要做这样的事情，HTML -> javascript -> Json 调用 php 文件 - PHP 文件提供 json -> Highcharts 读取和绘图。

也许有人可以给我看一个工作的 JS Fiddle？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:41:57.753

这里有一些东西可以让你开始：[http ://highslide.com/forum/viewtopic.php?f=10&t=8649](http://highslide.com/forum/viewtopic.php?f=10&t=8649)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:00:56.790

你看过[他们演示页面](http://www.highcharts.com/demo/)上的例子吗？图表下方的每个示例都有一个 JS Fiddle 链接。

编辑：如果有人想将此切换为评论，请随意。

# c# - 时间：2019-05-10 标签：c#where in with list and linq

> ID：14672637
> 
> 赞同：2
> 
> 时间：2013-02-03T12:51:53.127
> 
> 标签：c#, linq, list, where-in

我有两个列表，一个有`object A`另一个列表`objects B`，如下所示：

```
ObjectA
{
    Int64 idObjectA;
    String name;
    ....
}

ObjectB
{
    Int64 idObjectB;
    Int64 idObjectA;
    String name;
    ....
} 
```

我有两个列表，一个带有`Object A`，另一个带有`Object B`。我想创建一个新的`list C`只有.`objects B``IDObjectA``ID``list A`

在 SQL 中，它会是这样的一行：

```
select * from B where IDObjectA IN(1,2,3,4...); 
```

在我的例子中， 的值列表`IN clause`是 的列表`ObjectA`，它具有属性`idObjectA`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T12:53:39.443

您可以使用[`Join`](http://msdn.microsoft.com/en-us/library/bb534675.aspx)linq 方法通过加入`listB`并`listA`通过他们的`idObjectA`，然后选择来实现此目的`itemB`。

```
var result = (from itemB in listB
              join itemA in listA on itemB.idObjectA equals itemA.idObjectA
              select itemB).ToList(); 
```

该方法具有线性复杂度 ( `O(n)`)。使用`Where(... => ....Contains())`or double`foreach`具有二次复杂度 ( `O(n^2)`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T12:56:57.523

不是 linq，而是做你想做的事：

```
List<ObjectB> C = new List<ObjectB>();
foreach (n in B)
{
    foreach (c in A)
    {
        if (n.idObjectA == c.idObjectA)
        {
            C.Add(n)
            break;
        }
    }
} 
```

或者，如果您想要更高的性能，请使用 for，比使用 Cédric Bignon 的解决方案更高。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T12:57:34.370

这与加入相比略有不同。

```
List<ObjectA> listA = ..
List<ObjectB> listB = ..
int[] listAIds = listA.Select(a => a.idObjectA).ToList();
               //^^ this projects the list of objects into a list of ints

//It reads like this...

//get items in listB WHERE..
listB.Where(b => listAIds.Contains(b.idObjectA)).ToList();
//b.idObjectA is in listA, OR where listA contains b.idObjectA 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-03T13:05:41.087

与 Join 和没有 Contains 相同：

```
var listC = listB.Join(listA, b => b.ObjectAId, a => a.Id, (b, a) => b).ToList(); 
```

# sql - SQL*Plus 用单引号显示无效字符

> ID：14672639
> 
> 赞同：2
> 
> 时间：2013-02-03T12:52:03.673
> 
> 标签：sql, oracle

这种语法有什么错误？

```
SELECT empno, sal*.075, ROUND(sal*.075, 2) bonus FROM emp WHERE ename LIKE ‘%A%’; 
```

没有给出错误的sql语句是下面写的。

```
SELECT empno, sal*.075, ROUND(sal*.075, 2) bonus FROM emp WHERE ename LIKE '%A%'; 
```

![在此处输入图像描述](../Images/56c087b43aa3cd06e02376df4ce2fec2.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T13:01:38.297

```
‘%A%’; 
```

对比

```
'%A%'; 
```

第一个有花哨的`'`字符。通常的原因是 Outlook 的自动更正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:02:23.203

第一个问题是单引号。`SQL`不接受那个报价。我在我的键盘上找不到那个。可能是您从某处复制了查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T14:45:23.747

# google-app-engine - 谷歌应用引擎中的 python-twitter

> ID：14672640
> 
> 赞同：1
> 
> 时间：2013-02-03T12:52:07.553
> 
> 标签：google-app-engine, twitter, python-import, python-twitter

我正在尝试在 GAE 中使用 python-twitter api。我需要导入 Oauth2 和 httplib2。

这是我的做法

对于 OAuth2，我下载了 github.com/simplegeo/python-oauth2/tree/master/oauth2。对于 HTTPLib2，我下载了 code.google.com/p/httplib2/wiki/Install 并将文件夹 python2/httplib2 提取到项目根文件夹。

我的意见.py

```
import twitter

def index(request):
  api = twitter.Api(consumer_key='XNAUYmsmono4gs3LP4T6Pw',consumer_secret='xxxxx',access_token_key='xxxxx',access_token_secret='iHzMkC6RRDipon1kYQtE5QOAYa1bVfYMhH7GFmMFjg',cache=None)

  return render_to_response('fbtwitter/index.html') 
```

我收到错误[paste.shehas.net/show/jbXyx2MSJrpjt7LR2Ksc](http://paste.shehas.net/show/jbXyx2MSJrpjt7LR2Ksc)

```
AttributeError

AttributeError: 'module' object has no attribute 'SignatureMethod_PLAINTEXT'
Traceback (most recent call last)

    File "D:\PythonProj\fbtwitter\kay\lib\werkzeug\wsgi.py", line 471, in __call__

    return app(environ, start_response)

    File "D:\PythonProj\fbtwitter\kay\app.py", line 478, in __call__

    response = self.get_response(request)

    File "D:\PythonProj\fbtwitter\kay\app.py", line 405, in get_response

    return self.handle_uncaught_exception(request, exc_info)

    File "D:\PythonProj\fbtwitter\kay\app.py", line 371, in get_response

    response = view_func(request, **values)

    File "D:\PythonProj\fbtwitter\fbtwitter\views.py", line 39, in index

    access_token_secret='iHzMkC6RRDipon1kYQtE5QOAYa1bVfYMhH7GFmMFjg',cache=None)

    File "D:\PythonProj\fbtwitter\fbtwitter\twitter.py", line 2235, in __init__

    self.SetCredentials(consumer_key, consumer_secret, access_token_key, access_token_secret)

    File "D:\PythonProj\fbtwitter\fbtwitter\twitter.py", line 2264, in SetCredentials

    self._signature_method_plaintext = oauth.SignatureMethod_PLAINTEXT()

    AttributeError: 'module' object has no attribute 'SignatureMethod_PLAINTEXT' 
```

当我在 twitter.py 中跟踪错误时，我似乎没有正确导入 Oauth2

```
self._signature_method_plaintext = oauth.SignatureMethod_PLAINTEXT() 
```

我什至去 twitter.py 并添加`import oauth2 as oauth`，但它无法解决问题

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T21:21:49.050

我在我的 GAE 应用程序中使用了 tweetpy，它运行良好。 [https://github.com/tweepy/tweepy](https://github.com/tweepy/tweepy)

你可以在谷歌搜索中找到一些关于 GAE 的 tweetpy 示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T13:14:27.240

我修好了它。在 twitter.py 中，

```
try:
  from hashlib import md5
except ImportError:
  from md5 import md5

import oauth

CHARACTER_LIMIT = 140

# A singleton representing a lazily instantiated FileCache.
DEFAULT_CACHE = object()

REQUEST_TOKEN_URL = 'https://api.twitter.com/oauth/request_token'
ACCESS_TOKEN_URL  = 'https://api.twitter.com/oauth/access_token'
AUTHORIZATION_URL = 'https://api.twitter.com/oauth/authorize'
SIGNIN_URL        = 'https://api.twitter.com/oauth/authenticate' 
```

需要更改`import oauth`为`import oauth2 as oauth`

# hibernate - 为什么我们在使用休眠获取对象时需要序列化的 ID 类

> ID：14672643
> 
> 赞同：1
> 
> 时间：2013-02-03T12:52:19.473
> 
> 标签：hibernate, serialization

为什么我们需要序列化类同时使用下面的休眠方法获取对象

```
public abstract Object get(Class class1, Serializable serializable)
        throws HibernateException; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:36:29.977

如[文档](http://docs.jboss.org/hibernate/orm/4.1/javadocs/)所述，作为第二个参数给出的可序列化对象是实体的标识符。所有标识符都直接实现 Serializable ，或者在原始标识符键的情况下确实具有 Serializable 包装类。它不能是更具体的类型，因为 Hibernate 不知道用作复合键的用户定义类的类型。

# dynamics-crm-2011 - 1:N 关系的“不在”视图

> ID：14672644
> 
> 赞同：1
> 
> 时间：2013-02-03T12:52:21.623
> 
> 标签：dynamics-crm-2011

假设我们有一个与实体 B 具有 1:N 关系的实体 A。我想创建一个视图，仅显示没有实体 B 的 A 的记录。一个很好的例子是，我想查看没有顺序的报价。

任何具有任何复杂性的解决方案都将受到赞赏，例如插件、脚本、silverlight ......！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:31:34.910

您将不得不以一种或另一种方式间接解决它：

1.  使用 SSRS 报告并将其嵌入到需要的位置（例如，在仪表板中）。这必须使用 SQL 而不是 FetchXML，所以这只能是 CRM On-Premise 的解决方案，而不是 Online
2.  使用工作流或插件创建记录 B1，或更新 B1 对实体 A 的父查找，这会使用任意字段（例如“第一个订单的日期”或“已转换为订单”）更新父记录“A1”。现在只需为 new_field 构建一个标准的高级查找查询包含数据，（如果它是位字段，则 = 1）。根据具体的场景，如果实体 B 的记录可以被例行删除，或者重新分配给不同的父 A2，则您可能需要实际使用整数计数，以便您可以酌情增加/减少（因此重新父项将包含新的一和十二月旧）。

编辑：请注意，在 CRM 2013（“orion”）中，FetchXML 实现确实支持这种视图构造，但高级查找工具（例如）不为其提供 UI。有关更多信息，请参阅此问题的答案： [查看显示没有联系的客户](https://stackoverflow.com/questions/23487235/view-showing-accounts-that-dont-have-contact)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-03T13:54:04.807

Use the **Advanced Find** and Select Quotes, then for the criteria select the Order lookup field and choose the operator to be **Does Not Contain Data**. By this way, you'll get all records for entity B which have no parents of entity A.

Download the FetchXML and use it in your Plugin or Silverlight.

**Edit:**

I think the best way is to create an N:N relation with manually created intersect table. And your query has to select target the intersect table. As you might know, the intersect table links to both Entities A and B.

The criteria will be: selecting Intersect table where there is no reference to Entity B.

# mysql - mysql，选择性 WHERE 子句

> ID：14672645
> 
> 赞同：1
> 
> 时间：2013-02-03T12:52:34.463
> 
> 标签：mysql

我面临这样的情况，我需要一个 WHERE 子句来执行不同的操作，但我不知道如何解决。

```
SELECT ...
FROM ...
WHERE

      (
      CASE @test
      WHEN 0
        THEN
          pid = inPID
      WHEN 1
        THEN
          id = inPID
          @test := 0    <- syntax error
      END
    ) 
```

我尝试定义一些@test 变量（由过程参数初始化），如果使用 TEST=1 调用过程，我只需要一次 id=inPID。这个有可能 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:16:32.747

你能试试这个吗？不过，最好能向我们展示整个查询语句。在`CASE THEN`你可以使用`AND`，`OR`但在 SQL Server 中，无论如何都要测试一下。：-

```
SELECT ...
FROM ...
WHERE

      (
      CASE WHEN @test = 0 THEN pid = inPID
           WHEN @test= 1 THEN id = inPID AND @test:=0
      END
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T13:01:52.530

尝试这样做

```
 @test =  @test - 1
   -- this just to be @test is 0 , if you have other value change  it be 0 
```

**编辑：**

尝试这个

```
 (
  CASE @test
  WHEN 0
    THEN
      pid = inPID
  WHEN 1
    THEN
      id = inPID
  WHEN 1
    THEN
      @test := 0    
  END 
```

**或**使用这个

```
 WHEN 1
THEN
  id = inPID AND  @test := 0 
```

# java - 在针对 Gingerbread 的应用程序中使用 ICS 函数

> ID：14672646
> 
> 赞同：0
> 
> 时间：2013-02-03T12:52:46.730
> 
> 标签：java, android

当我们的应用程序针对 Gingerbread 时，如何合并来自 ICS 或 Jelly Bean 的功能？如何防止我收到的编译错误？

比如说我希望我的应用程序使用类似 android.renderscript.ScriptIntrinsicBlend 的东西。当用户使用 Gingerbread 时，我无法使用它，但如何启用 ICS 用户使用它的选项？当我为 Gingerbread 目标应用程序编写代码时，我得到了错误。

如何防止这些错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:02:10.703

你可以这样做：

```
int currentapiVersion = android.os.Build.VERSION.SDK_INT;
if (currentapiVersion >= android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH){
    // code for ICS and above versions
} else{
    // code for phones running an SDK before ICS
} 
```

[http://developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

# java - 如何使用基于 JAX-RS 的 Restlet 将 @DefaultValue 自动映射到枚举参数？

> ID：14672649
> 
> 赞同：10
> 
> 时间：2013-02-03T12:53:20.050
> 
> 标签：java, web, enums, jax-rs

我有一个 Web API，用户可以（或不可以）传输 URL 参数，例如`bird`，`dog`等等。

我希望将此参数映射到服务器端的枚举，例如：

```
@POST
@Path("/zoo")
public Response createNewAnimal(
                        @QueryParam("animal") 
                        @DefaultValue("CAT") AnimalType type 
                ) throws Exception 

...

public enum AnimalType {
    BIG_BIRD,
    SMALL_CAT;
} 
```

**但它不起作用！**

在处理 Web 请求时，`Enum.valueOf()`正在调用。当然它会失败，因为该`bird`用户用作 URL 参数的参数与`Enum`( `AnimalType.BIG_BIRD`) 中的标识符不匹配。

无法覆盖`valueOf()`方法（它是静态的......）并且设置构造函数没有帮助（这是相反的逻辑方向）。

所以也许你知道一个很好的解决方案，而不是仅仅使用 if...else...？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-09T10:47:03.503

如果你有一个像这样的枚举：

```
public enum AnimalType {
    BIG_BIRD, 
    SMALL_CAT, 
    MEDIUM_DOG;
} 
```

那么为了让 JAX-RS 知道要返回什么实例，您的查询参数必须是 `?animal=BIG_BIRD`,`?animal=SMALL_CAT` 或`?animal=MEDIUM_DOG`.

查询参数的值被馈送到`valueOf`枚举的静态方法以获取实例。当然，如果你发送其他类似的`bird`东西，它不会匹配任何东西，它也不会工作，因为[`@QueryParam`](http://jackson.codehaus.org/javadoc/jax-rs/1.0/javax/ws/rs/QueryParam.html)期望这样：

> 带注释的参数、字段或属性的类型 T 必须：
> - 是原始类型
> - 有一个接受单个字符串参数的构造函数
> - 有一个名为 valueOf 的静态方法，它接受单个字符串参数（例如，参见 Integer. valueOf(String))
> - 是 List、Set 或 SortedSet，其中 T 满足上述 2 或 3。生成的集合是只读的。

同样适用于`@DefaultValue`也。您必须指定`@DefaultValue("BIG_BIRD")`,`@DefaultValue("SMALL_CAT")` 或`@DefaultValue("MEDIUM_DOG")`:

```
@POST
@Path("/zoo")
public Response createNewAnimal(
        @QueryParam("animal") 
        @DefaultValue("SMALL_CAT") AnimalType type) {
    // ...
    return Response.ok().entity(type.toString()).build();
} 
```

如果您不想将 Java 类型上的名称公开给客户端，则可以将正确的查询字符串值转换为枚举实例。if ... else ... if 是实现此目的的一种非常简单的方法，但是如果您想要更高级的东西，则可以创建如下包装器：

```
import java.util.Collections;
import java.util.HashMap;
import java.util.Map;

public class AnimalTypeWrapper {
    private static final Map<String, AnimalType> MAPPER = Collections
            .unmodifiableMap(new HashMap<String, AnimalType>() {
                {
                    put("bird", AnimalType.BIG_BIRD);
                    put("dog", AnimalType.MEDIUM_DOG);
                    put("cat", AnimalType.SMALL_CAT);
                }
            });

    private AnimalType type;

    public static AnimalTypeWrapper valueOf(String value) {
        AnimalType type = AnimalTypeWrapper.MAPPER.get(value.toLowerCase());
        if (type == null) {
            // if nothing found just set the desired default value
            type = AnimalType.SMALL_CAT;
        }
        return new AnimalTypeWrapper(type);
    }

    private AnimalTypeWrapper(AnimalType type) {
        this.type = type;
    }

    public AnimalType getType() {
        return this.type;
    }
} 
```

并且在您的资源方法中有：

```
@POST
@Path("/zoo")
public Response createNewAnimal(
        @QueryParam("animal") 
        AnimalTypeWrapper typeWrapper) {
    // ...
    AnimalType type = typeWrapper.getType();
    return Response.ok().entity(type.toString()).build();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-10-11T23:59:15.320

使用 JAX-RS 和 Jackson 2.5.0 进行枚举（反）序列化的行为让我迷惑了一段时间，所以我将尝试详细说明 @Bogdan 的答案，并展示对我有用的方法。

我不清楚的是，`@QueryParam`不`@FormParam`遵循标准程序来反序列化枚举 - 所以如果你试图接受一个枚举作为查询参数，就像这样：

```
@GET
public Response getAnimals(@QueryParam("animalType") AnimalType animalType) {} 
```

`animalType`...那么正确反序列化您的参数的唯一方法是您的类型`T`（在我们的例子中，`AnimalType`）是否满足以下属性之一：

1.  成为原始类型。
2.  有一个接受单个`String`参数的构造函数。
3.  有一个名为`valueOf`或`fromString`接受单个`String`参数的静态方法（例如，参见`Integer.valueOf(String)`）。
4.  有一个`ParamConverterProvider`JAX-RS 扩展 SPI 的注册实现，它返回一个`ParamConverter`能够对该类型进行“从字符串”转换的实例。
5.  是或`List<T>`，满足上述 2、3 或 4 的情况。生成的集合是只读的。`Set<T>``SortedSet<T>``T`

...根据[Java EE 7 @QueryParam 文档](http://docs.oracle.com/javaee/7/api/javax/ws/rs/QueryParam.html)。

这意味着，除了为您的正常用例实现自定义（反）序列化之外，您还需要满足上面列出的五个条件之一。然后，只有那时！，您将能够处理`@QueryParam`反序列化案例。

## 解决方案...

我发现处理正常（反）序列化情况和`@QueryParam`情况的一种简单方法是a）通过实现满足条件＃3 `fromString()`，并且b）实现一个包含序列化器和反序列化器的映射器类，后者将依赖`fromString()`，所以我们有一致的反序列化：

```
// Our example enum class...

@JsonSerialize(using = AnimalTypeMapper.Serializer.class)
@JsonDeserialize(using = AnimalTypeMapper.Deserializer.class)
public enum AnimalType {
  CAT("cat"),
  BIRD("bird"),
  DOG("doggy");

  private final String name;

  AnimalType(String name) {
    this.name = name;
  }

  private static Map<String, AnimalType> VALUES_BY_NAME = Arrays.stream(values())
    .collect(Collectors.toMap(AnimalType::getName, Function.identity()));

  public String getName() {
    return name;
  }

  // Implementing this method allows us to accept AnimalType's as @QueryParam
  // and @FormParam arguments. It's also used in our custom deserializer.
  public static AnimalType fromString(String name) {
    return VALUES_BY_NAME.getOrDefault(name, DOG);
  }
}

// Our custom (de)serialization class...

public class AnimalTypeMapper {
  public static class Serializer extends JsonSerializer<AnimalType> {
    @Override
    public void serialize(AnimalType animalType, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {
      jsonGenerator.writeString(animalType.getName());
    }
  }

  public static class Deserializer extends JsonDeserializer<AnimalType> {
    @Override
    public AnimalType deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {
      return AnimalType.fromString(jsonParser.getValueAsString());
    }
  }
} 
```

希望有人会发现这很有帮助。我花了太多时间在这上面旋转我的轮子！

# android - Android - Foursquare 场地搜索错误：java.io.FileNotFoundException

> ID：14672655
> 
> 赞同：1
> 
> 时间：2013-02-03T12:53:41.270
> 
> 标签：android, httprequest, foursquare, filenotfoundexception

我正在尝试在我的 Android 应用程序中使用**Foursquare 的搜索场所。**我的 URL 必须正确，它在浏览器中工作正常，但在我的 Android 应用程序中，我得到一个 IOException: **java.io.FileNotFoundException**。我猜我的 HTTP 请求有问题，但我不知道是什么问题。你能帮我吗？

```
new Thread() {
@Override 
public void run() {
    Looper.prepare();   

    try 
    {
        URL url = new URL(  FSQR_URL + 
                            "venues/search?ll=" + Float.toString(latitude) + "," + Float.toString(longitude) + 
                            "&client_id=" + FSQR_CLIENT_ID + 
                            "&client_secret=" + FSQR_CLIENT_SECRET + 
                            "&v=" + timeMilisToString(System.currentTimeMillis()));

        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.setRequestMethod("GET");
        urlConnection.setDoInput(true);
        urlConnection.setDoOutput(true);
        urlConnection.connect();

        String responseBody     = streamToString(urlConnection.getInputStream());

        try 
        {
            JSONObject response1 = new JSONObject(responseBody);
            JSONObject response2 = new JSONObject(response1.getString("response"));
            setSearch(new JSONArray(response2.getString("venues")));
        } 
        catch (JSONException e) 
        {
            mResult.onError(e.toString());
        } 
    } 
    catch (ClientProtocolException e) 
    {
        mResult.onError(e.toString());   
    } 
    catch (IOException e) 
    {
        mResult.onError(e.toString());
    }   
} 
```

}。开始（）;

# java - 如何从mysql中的表中选择第三行？

> ID：14672657
> 
> 赞同：2
> 
> 时间：2013-02-03T12:53:50.517
> 
> 标签：java, mysql, sql

我想从 mysql 表中选择第三行。

注意：该表经常更新。如何始终从第一列中选​​择第三行。

![在此处输入图像描述](../Images/acb3a7a464e151a12079e7fadf13d720.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T12:54:57.790

```
SELECT *
FROM
(
   SELECT *
   FROM emps
   ORDER BY empid
   LIMIT 3
) AS T
ORDER BY empid DESC
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T12:54:58.933

试试这个：：

```
Select * from tableA order by empid desc limit 3,1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T13:00:01.950

LIMIT 子句的偏移量是从零开始的。试试这个：

```
 SELECT *
   FROM emps
   ORDER BY empid
   LIMIT 2, 1 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!2/e92cc7/1)**

# php - PHP 5.3.6 lambda 不工作？

> ID：14672660
> 
> 赞同：1
> 
> 时间：2013-02-03T12:54:09.940
> 
> 标签：php, lambda, closures

以下 PHP 代码导致错误：以“say”开头的行出现意外 T_FUNCTION。我使用的是 PHP 5.3.6 版，因此应该支持 lambda，但它不起作用。我也不知道“use”子句在这种情况下是否有效，但删除它并不能解决问题。我的语法有问题吗？注意：$this->backend 在构造函数中定义为 $this->backend = fopen("bar.txt","w+");

```
class Foo
{
  private $backend;
  private $commands = array(
        0 => array(
            "say" => function($msg) use($this->backend) { fwrite($this->backend,$msg); }
            )
        );
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T13:25:31.337

## 特定于 PHP 5.3.x

首先，不可能将 lambdas 分配为默认属性值（lambdas 不被视为常量表达式）。因此无法直接进行该分配；您需要在构造函数中执行此操作。

其次，在 PHP 5.3.x 中，您不能`$this`在 lambda 中使用。典型的解决方法是复制`$this`并捕获它，如下所示：

```
$that = $this;
$func = function() use($that) { ... }; 
```

但是，这种方式根本不可能`$that`从 lambda 内部访问非公共成员，因此该技术不能直接用于您的情况。

您可能应该做的是存储`$this->backend`在构造函数内的局部变量和`use`lambda 内的变量中。存储和捕获都可以通过值或引用来完成，具体取决于您是否希望任何修改传播到 lambda 之外以及在`$this->backend`调用 lambda 之前值可能发生变化的可能性：

```
 public function __construct() {
    $backend = $this->backend;
    $this->commands = array(
        'say' => function($msg) use($backend) { fwrite($backend, $msg); }
    );
 } 
```

## 以后的 PHP 版本

从 PHP 5.4.0 开始，您可以`$this`在类方法中定义的 lambda 中隐式使用：

```
 public function __construct() {
    $this->commands = array(
        'say' => function($msg) { fwrite($this->backend, $msg); }
    );
 } 
```

无法将 lambda 分配为默认属性值的限制仍然存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:58:41.983

问题是

```
 use($this->backend) 
```

`$this`您的课程蓝图中尚不存在，因此您绝对不能将其指定为这一点。

您尝试做的事情可能无法在匿名函数中执行，因为它本身不是类的成员，因此无法获取`$this` 变量。

您可能必须在 的适当成员函数中执行此操作，或作为参数`Foo`传递。`$this`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T13:34:08.013

您不能直接从变量或作为 lambda 定义类中的属性；

```
// these are incorrect
private $foo = $bar
private $callback = function() ...

// correct
define("BAR", "The bar!");

class A {
    private $foo = BAR;
    private $commands = array();
    ...
    public function __construct() {
        $this->commands[0] = function() ... 
```

# django - 将你自己的资源子类化为美味派的理由

> ID：14672662
> 
> 赞同：0
> 
> 时间：2013-02-03T12:54:41.907
> 
> 标签：django, rest, tastypie

我已经看到了自定义资源被进一步细分的测试代码。但这只是`test`为了，而不是为了任何真正的用途。

为什么有人会出于明显的原因（但显然不是我）想要对资源进行子类化？

一个例子就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:05:56.470

我刚刚遇到了需要对资源进行子类化的情况。我有一个 django 模型，它有几个像这样的子类（我已经简化了很多）：

```
class Information(models.Model):
    name = models.CharField)

class Question(Information):
    question = models.CharField)

class Link(Information):
    url = models.CharField() 
```

我想要一个用于访问所有信息对象的 API，但仍然希望能够访问每个子类的所有子类特定属性。在这种情况下，我想要 3 个资源：

```
class InformationResource(ModelResource):
    class Meta:
        queryset = Information.objects.all()

    def dehydrate(self, bundle):
        '''Add some extra meta data here'''

class QuestionResource(InformationResource):
    class Meta:
        queryset = Question.objects.all()

class LinkResource(InformationResource):
    class Meta:
        queryset = Link.objects.all() 
```

这样我就有了一个用于返回所有信息对象（以及所有这些对象共有的属性）的 api，但是如果我需要访问子类特定属性，我可以通过它们的子类资源 API 访问它们。此外，这些子类资源将有权访问为其超类定义的所有方法。例如，他们可以覆盖超类的脱水方法以添加更多字段。

# treeview - Sitecore：自定义树形列表

> ID：14672663
> 
> 赞同：1
> 
> 时间：2013-02-03T12:54:43.033
> 
> 标签：treeview, sitecore, sitecore6, treelist

我想在 Treelist 表单中添加额外的控件（multilist）。我该怎么做？我已经有一个自定义树列表，并尝试通过将 TreeviewEx 替换为 MultilistEx 来修改自定义树列表中的 OnLoad 方法。（自定义树代码是直接使用 .NET 反射器复制的）

显示的错误：[值不能为空。参数名称：当前 [ArgumentNullException：值不能为空。参数名称：current] Sitecore.Shell.Applications.ContentEditor.MultilistEx.GetItems(Item current) +104 Sitecore.Shell.Applications.ContentEditor.MultilistEx.DoRender(HtmlTextWriter output) +146]

我使用 Reflactor 检查 Sitecore.Kernel.dll，我怀疑 Item current 最初没有设置为任何值。

*除了将 MultilistEx 添加到 TreeList 表单中，我可以修改树以使其看起来像多列表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T10:44:15.687

The error is a simple missing argument, check the posted form names/values to see if there's a mismatch.

# c - #定义一个没有值的对象

> ID：14672667
> 
> 赞同：0
> 
> 时间：2013-02-03T12:54:59.783
> 
> 标签：c, typedef

我现在正在阅读一些c代码。并且对“#define someting”表达式不是很清楚。

例如，我看到了这段代码：

```
typedef enum cairo_path_op {
    CAIRO_PATH_OP_MOVE_TO = 0,
    CAIRO_PATH_OP_LINE_TO = 1,
    CAIRO_PATH_OP_CURVE_TO = 2,
    CAIRO_PATH_OP_CLOSE_PATH = 3
} __attribute__ ((packed)) cairo_path_op_t; /* Don't want 32 bits if we can avoid it. */

#ifndef __GNUC__
#define __attribute__(x)
#endif 
```

我注意“ **__*属性*__**（x）”。因为在其他头文件中，“ **__*属性*__**（x）”定义为没有值，但它如何在枚举“cairo_path_op”定义中生效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:59:15.213

这是出于便携性的原因。

`__attribute__()`是一个 GCC 扩展，用于修改函数、变量、类型等的各种属性和行为。

如果不兼容 GCC 的编译器尝试编译使用此扩展的代码，它将无法这样做并且会引发语法错误。

为了避免这种情况，代码的作者让预处理器将此关键字替换为nothing if `__GNUC__`is not defined（即，如果编译器不是GCC兼容的），这样代码就可以构建在更多种类的平台上。

# android - android 自定义 ListView - 试图了解 getView() 的工作原理

> ID：14672668
> 
> 赞同：0
> 
> 时间：2013-02-03T12:55:08.803
> 
> 标签：android, android-listview

问题：我正在尝试使用自定义`ListView`在聊天中显示消息。我已经`ArrayList`用我自己的类的对象参数化了，代码如下。

**问题：**每次布局膨胀时，消息文本和时间戳始终保持不变，`getView()`方法有问题，但我不知道是什么。

PS ChatActivity 包含大量代码，我只会发布与问题相关的内容以保持其干净。

消息.java：

```
 public class Message{

/*
 * 1- outgoing
 * 2-incoming
 * */

public String message;
public String timestamp;
public TextView tvmessage, tvtimestamp;
public ImageView indicator;
public int type;

public Message(String text, int type){
    this.timestamp = generateTimestamp();
    this.message = text;
    this.type=type;

    Log.d("Message", message);
    //Message text is set correctly each time the constructor is called

}

@SuppressLint("SimpleDateFormat")
public String generateTimestamp() {
    SimpleDateFormat sdf = new SimpleDateFormat("HH:mm");
    String ts = sdf.format(new Date());

    return ts;
}

    } 
```

聊天活动：

```
 private ArrayList<Message> OutgoingMessagesList;
 private SingleChatAdapter adapter;
  private EditText etInput;
 lv = getListView();
    adapter = new SingleChatAdapter(this, OutgoingMessagesList);
    lv.setAdapter(adapter);

public void sendMessage() {

    String tmpMessage = etInput.getText().toString().trim();
    /*--- check whether the message string is empty ---*/
    if (tmpMessage.length() > 0) {

        Message msg = new Message(tmpMessage, 1);

        OutgoingMessagesList.add(msg);

        /*
         * TODO: save the message to local database, send the message to
         * server, save it to server database and forward to the recipient
         */
        adapter.notifyDataSetChanged();
        etInput.setText("");

    } else {

        MiscUtils.gibShortToast(this, getString(R.string.msgEmpty));
    }

} 
```

我认为问题所在的适配器类是：

```
 public final class SingleChatAdapter extends BaseAdapter {
private Context context;
Message msg;
private ArrayList<Message> messages;

public SingleChatAdapter(Context context, ArrayList<Message> chat) {

    this.context = context;
    this.messages = chat;
    Log.d("ChatAdapter", "called constructor");

}

public int getCount() {
    return messages.size();
}

public Object getItem(int position) {
    return messages.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup viewGroup) {

    msg = (Message) getItem(position);

    if (convertView == null) {

        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        // TODO message_incoming should be inflated for messages received
        // from server
        convertView = (LinearLayout) inflater.inflate(
                R.layout.message_outgoing, null);

        convertView.setTag(msg);

    } else {

        msg = (Message) convertView.getTag();

    }

    msg.tvmessage = (TextView) convertView
            .findViewById(R.id.tvMessageOutgoing);
    msg.tvtimestamp = (TextView) convertView.findViewById(R.id.tvTimestamp);
    msg.indicator = (ImageView) convertView
            .findViewById(R.id.imgMessageState);

    msg.tvmessage.setText(msg.message);

    msg.tvtimestamp.setText(msg.timestamp);

    return convertView;
} 
```

我的 Message 类中的消息字符串每次都包含正确的值，但膨胀到列表中的文本始终保持不变。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T13:35:16.863

您应该删除 else 语句（getView 中的那个），因为现在它以这种方式工作：如果 convertView 为 null（创建 listView 的第一项），那么它会被夸大，并且您将消息设置为该视图的标签。但是当创建下一个项目时，convertView 不再为空，并且您的 else 语句被调用。因此，您的消息将替换为保存为 convertView 的标签的消息。

您还应该观看孔子提到的视频:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T13:19:20.473

如果你想了解 ListView 是如何工作的，`getView`请参考Roman Guy 的[这篇演讲，](http://www.youtube.com/watch?v=wDBM6wVEO70)[这里](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)也是一篇不错的博文

# django - 为 django 项目中的所有模板提供当前用户

> ID：14672669
> 
> 赞同：3
> 
> 时间：2013-02-03T12:55:27.747
> 
> 标签：django, django-templates, django-authentication

我想知道是否有一种方法可以为 django 应用程序中的所有模板提供当前用户变量，以便我管理所有页面中的登录和注销功能。这是一种非常普遍的做法，所以一定有一个我错过的明显解决方案。我知道这个`RequestContext`类，但这意味着我必须将它添加到应用程序中的每个视图中，这似乎不切实际。可能是自定义模板标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T13:20:12.777

为此有一个模板上下文处理器：`django.core.context_processors.auth`. 查看[文档](https://docs.djangoproject.com/en/dev/ref/templates/api/#django-contrib-auth-context-processors-auth)，您可以访问当前用户和模板中的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:09:44.013

您确实可以使用自定义标签来实现这一点。
请注意，默认情况下，自定义标签无法访问`request`对象，因此无法访问用户数据。为了获得访问权限，`request`您可以使用属性定义自定义标签`takes_context`并从上下文中获取请求：

就像是：

```
@register.inclusion_tag('userdata.html', takes_context = True)
def userdata(context):
    request = context['request']
    user = request.user
    return {'user':user} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-03T09:38:51.870

您可以只使用`{{ request.user }}`显示当前用户的名称，或者例如`{{ request.user.is_authenticated }}`找出它是否是 AnonymousUser。

# window - 将 Windows 服务器设置为 NTP 服务器，但保持客户端设置不变

> ID：14672670
> 
> 赞同：0
> 
> 时间：2013-02-03T12:55:28.420
> 
> 标签：window, ntp

我正在为分布式系统开发安装模块（C#）。要求之一是能够将其中一台服务器设置为 NTP 服务器（Windows 时间服务）。我关注了几篇 MS 文章，例如：[这篇](http://support.microsoft.com/kb/816042#method2)文章， 但似乎每篇文章还需要配置 NTP 客户端设置（例如将服务器类型从 Nt5DS 更改为 NTP）。

在将服务器设置为 NTP 服务器时如何保持服务器现有的 NTP 客户端设置不变？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T11:38:05.423

在调查了这个问题一段时间后，看起来这是不可能的。阅读[这篇](http://msdn.microsoft.com/en-us/subscriptions/cc773263%28v=ws.10%29.aspx)文章后，我了解到 NTP 客户端和服务器协议使用相同的注册表项，这意味着，如果同一台机器需要作为客户端和服务器，但客户端应该使用，比如说 NT5DS 和服务器的协议显然是NTP而不是它不能工作。

# java - Java 名称 具有变量名的对象

> ID：14672671
> 
> 赞同：0
> 
> 时间：2013-02-03T12:55:28.950
> 
> 标签：java, minecraft

所以我正在为 Minecraft 制作一个插件。它基本上是一个团队插件。我需要做的是能够创建多个团队，但我似乎无法弄清楚如何将对象名称更改为玩家选择的团队名称。这就是我的意思：

```
if (l.equalsIgnoreCase("NewTeam")) {
    teamName= args[0]; // This is the players chosen team name
     Team newTeam = new Team(teamName, sender);
     newTeam.addPlayer(sender); 
```

由于这是一个服务器插件，它必须处理多个团队，这意味着它会创建很多团队对象，但都使用对象名称 newTeam。有谁知道我可以做到这一点的更好方法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:01:49.333

您正在搜索团队名称到团队对象的映射？然后，你可以这样做：

```
Map<String,Team> teams = new TreeMap<String,Team>();

//Returns the team for 'teamName' or creates one, if it doesn't exist
public Team getTeam(String teamName)
{
    Team team = teams.get(teamName);
    if(team == null)
    {
        team = new Team(teamName,sender); //is 'sender' specific for a team??
        teams.put(teamName,team);
    }
    return team;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:44:53.127

我假设您正在使用 Bukkit API，而且这是在 CommandExecutor 的 onCommand 方法中完成的，所以这应该是这样的：

```
public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args){
   if(cmd.getName().equalsIgnoreCase("newteam")){ //Make sure this is the right command
      if(args.length == 0) //If the sender hasn't included a name...
         sender.sendMessage("You need to include a team name!"); //Tell them they need to
      else{ //Otherwise...
         Team newTeam = new Team(args[0]); //Create a new team with the designated name
         if(sender instanceof Player) //If the sender is a player (could be console)...
            newTeam.addPlayer((Player) sender); //Add them to the team
         /*
          * Insert some code to save/store the newly created team here
          */
      }
      return true; //Return (for Bukkit's benefit)
   }
} 
```

# websphere - Websphere 中的“无法打开 ID 文件”

> ID：14672672
> 
> 赞同：1
> 
> 时间：2013-02-03T12:55:38.987
> 
> 标签：websphere, lotus-notes

以下代码我可以在 Tomcat 中毫无问题地运行，

```
Session session = NotesFactory.createSession((String)null, (String)null, "password"); 
```

但在 Websphere 中，我在下面遇到异常：

```
SystemErr     R     NotesException: Could not open the ID file
SystemErr     R     at lotus.domino.local.Session.NCreateSessionWithPasswd(Native Method)
SystemErr     R     at lotus.domino.local.Session.createSession(Unknown Source)
SystemErr     R     at lotus.domino.NotesFactory.createSessionUP(Unknown Source)
SystemErr     R     at lotus.domino.NotesFactory.createSession(Unknown Source) 
```

它是如此有线，我确实检查了ID文件是否存在，在同一台计算机上，我也可以毫无问题地执行Lutos Notes客户端。我真的不知道现在我能做什么？请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:07:24.513

检查运行 Websphere 的凭据。它可能与 Tomcat 不同，并且可能无权访问该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T23:19:36.300

另一个典型问题是 lotus.domino 类可能无法找到 notes.ini 文件的路径。Notes 客户端通常通过将路径放入桌面快捷方式的命令行中来避免此问题。尝试将包含 notes.ini 文件的文件夹添加到 PATH 环境变量中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:10:29.673

检查你的进口。您应该从 lotus.domino 包中导入类。您的问题在于使用了错误的类（来自 lotus.domino.local 包），这需要在运行代码的机器上安装 Notes 客户端。这就是为什么它可以在您的 Tomcat（我假设是本地的）上运行并且在部署时失败的原因。

您需要的是使用 CORBA/DIIOP 从您的代码中访问 Domino。更改您的代码以相应地获取会话。

*   [http://www.ibm.com/developerworks/lotus/library/ls-Java_access_pt1/](http://www.ibm.com/developerworks/lotus/library/ls-Java_access_pt1/)
*   [http://www.ibm.com/developerworks/lotus/library/ls-Java_access_2/](http://www.ibm.com/developerworks/lotus/library/ls-Java_access_2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-10T08:30:21.937

请使用 '\xxxxx\xxx\xxx.id' 等网络路径指定邮件 ID，并确保您的服务帐户可以访问该位置。

# arrays - scala搜索嵌套数组

> ID：14672673
> 
> 赞同：2
> 
> 时间：2013-02-03T12:55:46.373
> 
> 标签：arrays, scala, search, return

我正在尝试在嵌套的字符数组中搜索特定字符，然后从数组中返回字符的索引。

代码片段

```
def search(target: Char, arr:Array[Array[Char]]): List[Int] = {
    for (i <- 0 until arr.length) { //search through first layer of array
    for (j <- 0 until arr(i).length) { //search through second layer of array
        if (arr(i)(j) == target) {
            val x = List(i,j)
            return x
        } }}} 
```

但是，我从编译中得到一个错误，说这个函数正在返回两种类型的签名。错误信息：

```
error: type mismatch;
 found   : Unit
 required: List[Int]
for (i <- 0 until arr.length) { //search through first layer of array
       ^ 
```

我在这里找到了两个类似的线程：[find Unit: required Int. 为什么错误不明显？](https://stackoverflow.com/questions/14205367/found-unit-required-int-why-is-the-error-not-obvious) 并[发现：所需单位：Int - 如何纠正这个问题？](https://stackoverflow.com/questions/10753542/found-unit-required-int-how-to-correct-this)

但他们并没有解决我面临的问题：我*正在*尝试返回列表，但编译器卡在 for 循环中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T15:54:50.130

似乎已经有很多答案了，但我认为这是解决问题的最惯用的方法：

**编码**

```
def search(target: Char, arr: Array[Array[Char]]): List[(Int, Int)] = {

    val indices = for{
        (a, i) <- arr.iterator.zipWithIndex
        (c, j) <- a.iterator.zipWithIndex
        if( c == target )
    } yield i -> j

    indices.toList

} 
```

**说明**

在 scala 中，for-comprehensions 是可嵌套的，因此您可以通过简单地添加另一`x <- y`行来处理任何程度的嵌套数组。您可以`if`在`for{...}`.

在理解中，`a`是`i`里面的第一个数组，第一个索引`arr`在哪里。是里面的第 th 个字符，其中是第二个索引。我使用这样可以即时评估，而无需因为理解而在幕后复制数组。最后，我调用将迭代器的结果评估为一个列表。`i``c``j``a``j``iterator``indices``toList``indices`

返回类型`List[(Int, Int)]`是对的列表。`List( (1,2), (3,4) )`如果您在`i=1, j=2`和找到目标，则`i=3, j=4`返回比返回更有意义`List(1,2,3,4)`。

**一般想法**

尽量避免`return`在 scala 中使用。您通常可以使用类似迭代器的方法使用 yield 来处理您的集合，然后通过调用 a `toList`or `toMap`or来评估结果`toWhatever`。

scala 集合 API 对许多这些情况也非常有帮助。如果您只想要第一个匹配条件的项目，您可以使用`myCollection.find(...)`. 浏览 scala 文档以查看您已经可以使用的大量便捷功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T14:18:28.927

这是我在二维数组中查找元素的第一个索引的解决方案：（如果要查找所有索引，请将 collectFirt 替换为收集）

```
def search[T](target: T, arr: Array[Array[T]]): List[Int] = 
  arr.indices.collectFirst{
    case k if arr(k).contains(target) => 
      List(k, arr(k).indexWhere(_ == target)) 
  }.getOrElse(Nil) 
```

测试：

```
scala> val t = Array(
     |     Array('a', 'b', 'c'),
     |     Array('b'), 
     |     Array('c', 'a'),
     |     Array('a', 'a', 'x', 'a')
     | )

scala> println(search('a', t))
List(0, 0)

scala> println(search('x', t))
List(3, 2)

scala> println(search('e', t))
List() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T13:46:09.947

我建议完全使用一种不太像 Java 的方法。我不完全确定您的函数应该做什么，但是如果您想要嵌套数组中匹配的所有 (x, y) 索引的列表，您可以执行以下操作：

```
def search(target: Char, array: Array[Array[Char]]): Seq[(Int, Int)] = {
  array.zipWithIndex.filter(_._1.contains(target)).map { xa =>
    xa._1.zipWithIndex.filter(_._1 == target).map(xb => (xa._2, xb._2)).toSeq
  }.flatten.toSeq
} 
```

其行为如下：

```
val t = Array(
    Array('a', 'b', 'c'), 
    Array('b'), Array('c', 'a'), 
    Array('a', 'a', 'x', 'a')
)
println(search('a', t))
=> ((0,0), (2,1), (3,0), (3,1), (3,3)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T13:10:30.297

`List`只有满足特定条件时才返回 a ( `arr(i)(j) == target`)。您必须为 for 理解运行的情况定义一个返回值。例如

```
def search(target: Char, arr:Array[Array[Char]]): List[Int] = {
  for (i <- 0 until arr.length) { //search through first layer of array
    for (j <- 0 until arr(i).length) { //search through second layer of array
      if (arr(i)(j) == target) {
        val x = List(i,j)
        return x
      }
    }
  }
  Nil  // not found
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T13:11:10.727

如果第二个数组为空或 if 表达式的计算结果为 false，for 循环本身将返回 Unit。你可以重写它，如果它永远不会到达 if 表达式之后的代码，它会返回 null。

我也会省略 x 的分配，真的没有意义。

```
 def search(target: Char, arr:Array[Array[Char]]): List[Int] = 
  {
    for (i <- 0 until arr.length) 
    { //search through first layer of array
      for (j <- 0 until arr(i).length) 
      { //search through second layer of array
        if (arr(i)(j) == target) 
        {
          return List(i,j)
        } 
      }
    }
    Nil
  } 
```

顺便说一句，这可能会用更实用的方法重写，但这超出了这个问题的范围。

# freebsd - 如何在 FreeBSD 上安装 pecl-event？

> ID：14672676
> 
> 赞同：0
> 
> 时间：2013-02-03T12:56:10.303
> 
> 标签：freebsd, pecl

我尝试在 FreeBSD 8.0 上安装 pecl-event，但出现错误：

```
# pecl install event
Failed to download pecl/event within preferred state "stable", latest release is version 0.9.1, stability "beta", use "channel://pecl.php.net/event-0.9.1" to install
install failed
# pecl install "channel://pecl.php.net/event-0.9.1"
downloading event-0.9.1.tar ...
Starting to download event-0.9.1.tar (Unknown size)
.....................done: 113,664 bytes
11 source files, building
running: phpize
Cannot find config.m4.
Make sure that you run '/usr/local/bin/phpize' in the top level source directory of the module

ERROR: `phpize' failed 
```

我做错了什么？如何安装它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:13:52.530

将 event-0.9.1.tar 文件提取到临时文件夹。（例如： /tmp/tmp1 ）转到子文件夹，其中一个在临时文件夹中包含 config.m4 文件。

确保你有“/usr/local/bin/phpize”。如果它不在那里...找到 phpize 的位置并创建符号链接到 /usr/local/bin/phpize。

比尝试再次运行

# css - Ember 车把和相邻的 CSS 选择器

> ID：14672677
> 
> 赞同：3
> 
> 时间：2013-02-03T12:56:11.413
> 
> 标签：css, ember.js, css-selectors, handlebars.js

Ember Handlebars 正在与[相邻的同级](http://reference.sitepoint.com/css/adjacentsiblingselector)CSS 选择器 ( `el + el`)混淆

例如，我有项目列表：

```
{{#each item in items}}                    
  <span class="item">{{item}}</span>
{{/each}} 
```

我想用这个规则在它们之间添加间距：

```
.item + .item {
  margin-left: 1em;
} 
```

但它不起作用，因为 Ember 在项目之间插入 Metamorph 占位符（标签如`<script id="metamorph-1-end" type="text/x-placeholder"></script>`）

我应该使用什么来代替带有车把的相邻兄弟选择器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T12:56:11.413

使用[通用兄弟](http://reference.sitepoint.com/css/generalsiblingselector)（或下一个兄弟）选择器 ( `el ~ el`)。

像这样：

```
.item ~ .item {
  margin-left: 1em;
} 
```

它将“跳过”Metamorph 占位符标签和项目之间的任何其他标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:16:20.190

使用[`Ember.CollectionView`](http://emberjs.com/api/classes/Ember.CollectionView.html)和对应的助手代替`{{#each}}`

```
{{#collection contentBinding=items}}                    
  <span class="item">{{this}}</span>
{{/collection}} 
```

它会将所有内容包装在标签中（您可以使用`tagName`参数对其进行自定义），但不会在项目之间插入 Metamorph 标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:33:15.280

在我的情况下，我想使用以下 CSS，以便每次项目上的类从`.mine`到切换，`.theirs`反之亦然，位置改变。这是 CSS 相邻兄弟选择器的完美用例，但在 ember 中获取该选择器的标记设置有点复杂。

应用程序.css

```
.mine + .theirs,
.theirs + .mine {
  margin-top: -50px;
} 
```

物品.hbs

```
{{#collection Ember.CollectionView
              contentBinding='controller.items'
              itemViewClass='App.ItemView'}}

  markup/content you want inside each EventView e.g., {{ this.name }}

{{/collection}} 
```

item_view.js

```
App.ItemView = Ember.View.extend({
  tagName: 'span',
  classNames: ['item'],
  classNameBindings: ['side'],
  side: function() {
    // Check a property on the item to see whose it is,
    // set the class accordingly.
    return this.get('context.isTheirs') ? 'theirs' : 'mine';
  }.property()
}); 
```

# jquery - 超大 jQuery 插件不使用“拇指”来显示缩略图导航

> ID：14672683
> 
> 赞同：1
> 
> 时间：2013-02-03T12:56:34.033
> 
> 标签：jquery, plugins, supersized

当使用激活了“thumbnail_navigation”的 Supersized jQuery 插件 (v3.2.7) 时，它不使用缩略图来显示下一个和上一个项目，而是使用全尺寸图像的缩小版本。是的，我在 Supersized 中使用的每张图片都包含一个“拇指”图片。

我什至再次下载了插件，我所做的唯一更改是像这样激活 thumbnail_navigation：“thumbnail_navigation : 1”在超大函数中。

[超大插件文档](http://buildinternet.com/project/supersized/docs.html#thumbnail_navigation)说：

> “如果幻灯片的‘拇指’字段为空，它只会按比例缩小全尺寸图像。”

因此，通过拥有“拇指”图像，它也应该在 thumbnail_navigation 中使用。有谁知道为什么它没有，即使在原始的、未触及的插件代码中以及如何在 thumbnail_navigation 中实际显示拇指？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:46:55.873

我遇到了同样的问题。

我不得不进入 .js 文件`supersized.3.2.7.js`

我做了一个搜索`prevThumb`

对于您看到的每个实例（我认为有 6 个）`base.options.slides[prevThumb].image`

改成`base.options.slides[prevThumb].thumb`

这似乎拉动了我指定的正确拇指。但是，我也可能在此过程中破坏了其他东西。到目前为止一切看起来都很好，所以我想我们会看到的。

希望有帮助。

# android - android如何限制edittext上的行

> ID：14672684
> 
> 赞同：1
> 
> 时间：2013-02-03T12:56:39.493
> 
> 标签：android, android-edittext

我想在edittext中有5行，所以用户只能按`Enter`4次，我试过这样但仍然无法工作

```
myEtidtext.setOnKeyListener(new OnKeyListener() {
    @Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    // if enter is pressed start calculating
    if (keyCode == KeyEvent.KEYCODE_ENTER && event.getAction() == KeyEvent.ACTION_UP) {
        // get EditText text
        String text = ((EditText) v).getText().toString();
        // find how many rows it cointains
        int editTextRowCount = text.split("\\n").length;
        // user has input more than limited - lets do something
        // about that
        if (editTextRowCount >= 5) {
            // find the last break
            int lastBreakIndex = text.lastIndexOf("\n");
            // compose new text
            String newText = text.substring(0, lastBreakIndex);
            // add new text - delete old one and append new one
            // (append because I want the cursor to be at the end)
            ((EditText) v).setText("");
            ((EditText) v).append(newText);
        }
    }
    return false;
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:20:40.097

您可以将其中的字符数设置`EditText`为（例如 300 个字符）

```
et_description.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
                // TODO Auto-generated method stub
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
                if (s.toString().length() > 300) {
                    et_description.setText(s.toString().subSequence(0, 300));
                }
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:08:08.150

链接以动态设置编辑文本框的字符长度限制-源代码也可用： [http ://www.mobisoftinfotech.com/blog/android/android-edittext-setfilters-example-numeric-text-field-patterns- and-length-restriction/#comment-174948](http://www.mobisoftinfotech.com/blog/android/android-edittext-setfilters-example-numeric-text-field-patterns-and-length-restriction/#comment-174948) 过滤器和长度限制也可用

# mysql - 如何根据不同的条件更新 MYSQL 列

> ID：14672688
> 
> 赞同：0
> 
> 时间：2013-02-03T12:57:00.600
> 
> 标签：mysql, sql, sql-update

我需要更新一个 MYSQL 表

这里非常简单地看一下 Table_A

```
ID  VALUE  RESULT
1   4      0
2   2      0
3   7      0 
```

我想根据条件更新 RESULT 列

所以我的查询语句需要看起来像

```
UPDATE Tabel_A
SET RESULT = (if some condition) 1
             OR (if another condition) 2
             OR (if a different condition) 3 
```

或者我应该使用类似的东西

```
UPDATE Tabel_A
SET RESULT = (CASE 1) 1
             (CASE 2) 2
             (CASE 3) 3 
```

我不确定如何构造查询

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:01:52.217

我更喜欢在`CASE`这里使用。

```
UPDATE TAble1
SET Result = CASE value
                WHEN 1 THEN x
                WHEN 2 THEN y
                ....
                ELSE z
            END 
```

或者

```
UPDATE TAble1
SET Result = CASE 
                WHEN value = 1 THEN x
                WHEN value = 2 THEN y
                ....
                ELSE z
            END 
```

# c# - 触摸操作移动初始偏移问题

> ID：14672689
> 
> 赞同：0
> 
> 时间：2013-02-03T12:57:08.167
> 
> 标签：c#, wpf

我正在使用一个`ManipulationDelta`事件来拖动 a`Canvas`如下：

```
private Point lastMovePosition;

private void MoveCanvas(ManipulationDeltaEventArgs e)
{
    var position = e.ManipulationOrigin;

    if (CanvasShareSwarm.Scale > 1) //Force zoom out limit to view all
    {
        CanvasShareSwarm.Offset -= position - lastMovePosition;
        lastMovePosition = position;
    }
} 
```

这可行，但是当拖动开始时，`Canvas`总是会跳回到移动之前似乎是以前的位置。我怀疑这与我的`lastMovePosition`观点有关。

什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:34:18.873

我猜您必须在[ManipulationStarted](http://msdn.microsoft.com/en-us/library/system.windows.uielement.manipulationstarted.aspx)事件处理程序中初始化该`lastMovePosition`字段：

```
private void OnManipulationStarted(object sender, ManipulationStartedEventArgs e)
{
    lastMovePosition = e.ManipulationOrigin;
} 
```

# html - 导航栏边框

> ID：14672692
> 
> 赞同：0
> 
> 时间：2013-02-03T12:57:26.157
> 
> 标签：html, css, layout

我一直在试图弄清楚如何在这里制作一个像这样的导航栏：[navbar](http://i50.tinypic.com/2hziusn.png)

但作为一个几乎绝对的初学者，我不知道在这里使用哪种方法。它是 UL 还是表格，也不知道如何在链接之间设置这些边界，这些边界很可能应该作为图像插入那里。

我知道如果我在这里编写自己的代码先进行检查会更有帮助，但我什至不知道我应该使用表格还是列表。所以，如果有人可以先给我一个建议，然后我可以编写一个我们可以进一步讨论的代码，我将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:17:16.220

虽然我更喜欢在菜单上使用 UL，但使用表格似乎更容易实现效果。

尝试制作一个两行五列的表格。

和：删除第一行的底部边框。删除第二行的上边框。第二行单元格的边框。

您也可能需要设置每行的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:06:52.827

这可以通过两种不同的方式完成。第一个将带有一条小垂直线的图像，它将被设置为导航按钮的背景。

`<span>`另一种方法是在标签中进行绝对定位`<a>`，高度为这个边框高度并设置`top: 0`和`left:0`。

HTML：

```
<ul>
    <li><a href="#"><span></span>Nav 1</a></li>
    <li><a href="#"><span></span>Nav 2</a></li>
    <li><a href="#"><span></span>Nav 3</a></li>
    <li><a href="#"><span></span>Nav 4</a></li>
</ul> 
```

CSS：

```
ul {
    float:left; 
    border: 1px solid #000;
}

ul li {
    list-style-type: none;
    float:left;
}

ul li a {
    display:block; 
    padding: 10px;
    position:relative; 
}

ul li span {
    border-left: 1px solid #000;
    height: 10px; <!-- as long as you want -->
    position:absolute; 
    top: 0; 
    left: 0;
} 
```

您可以将其复制并粘贴到您的编辑器中，然后查看它的外观。

对于导航，请使用`<ul>`' `<li>`s. 已`<table>`弃用，不再适合将其用于此目的。

# iphone - 按名称目标C遍历变量

> ID：14672703
> 
> 赞同：-2
> 
> 时间：2013-02-03T12:58:30.703
> 
> 标签：iphone, ios, objective-c

我可以按名称循环变量吗？

```
IBOutlet UIImageView *img1;
IBOutlet UIImageView *img2;
IBOutlet UIImageView *img3;
IBOutlet UIImageView *img4;
IBOutlet UIImageView *img5;
IBOutlet UIImageView *img6;
IBOutlet UIImageView *img7;
IBOutlet UIImageView *img8;

//then
for(int i = 1; i<=8;i++){
   img+i = nil; 
} 
```

我知道如何通过标签循环，但是在目标 C 中可以这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T13:04:50.933

不是直接的，但您可以将它们添加到临时数组或使用`IBOutletCollection`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T13:22:57.647

只是为了记录，你可以这样做（但不要这样做，使用上一个答案）

```
for(int i = 1; i<=8;i++){
    SEL sel = NSSelectorFromString([NSString stringWithFormat:@"setImg%d:", i]);
    [self performSelector:sel withObject:nil];
} 
```

# c# - 无法将图像插入通过 C# 创建的 Word 文档

> ID：14672709
> 
> 赞同：0
> 
> 时间：2013-02-03T12:59:12.320
> 
> 标签：c#, .net, ms-word

我正在尝试创建一个word文档，插入一些图片并保存它。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Reflection;
using Word = Microsoft.Office.Interop.Word;
using System.Windows.Forms;
using System.IO;
namespace Snapper
{
    class WordDocumentGenerator
    {
        public void CreateWordDocument(string fileName)
        {
            string originalPath = Directory.GetCurrentDirectory();
            string path = originalPath;
            path += @"\snapshots";
            Directory.SetCurrentDirectory(path);

            Word._Application wordApp = new Word.Application();
            Word._Document wordDoc;
            object oMissing = System.Reflection.Missing.Value;

            wordDoc = wordApp.Documents.Add(ref oMissing, ref oMissing,
                                            ref oMissing, ref oMissing);

            wordDoc.InlineShapes.AddPicture(@"\snap1.jpg");
            wordDoc.InlineShapes.AddPicture(@"\snap2.jpg");

            path = originalPath;
            path += @"\documents";
            DirectoryInfo docDir = new DirectoryInfo(path);
            if (!docDir.Exists)
            {
                docDir.Create();
            }
            Directory.SetCurrentDirectory(path);
            Object savePath = path + @"\" + fileName + ".doc";

            wordDoc.SaveAs(ref savePath,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing,
                ref oMissing
               );
            wordDoc.Close(SaveChanges: true);
        }

    }
} 
```

我收到一个未处理的异常错误框，说这不是 addpicture() 方法的有效文件名。我究竟做错了什么？

```
See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.Runtime.InteropServices.COMException (0x800A1420): This is not a valid file name.
Try one or more of the following:
* Check the path to make sure it was typed correctly.
* Select a file from the list of files and folders.
   at Microsoft.Office.Interop.Word.InlineShapes.AddPicture(String FileName, Object& LinkToFile, Object& SaveWithDocument, Object& Range)
   at Snapper.WordDocumentGenerator.CreateWordDocument(String fileName) in D:\RESOURCES\Projects\Visual Studio Projects\Snapper\Snapper\GenerateWordDocument.cs:line 27
   at Snapper.SnapperForm.CreateDocumentButton_Click(Object sender, EventArgs e) in D:\RESOURCES\Projects\Visual Studio Projects\Snapper\Snapper\SnapperForm.cs:line 130
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.4971 (win7RTMGDR.050727-4900)
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v2.0.50727/mscorlib.dll
----------------------------------------
Snapper
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///D:/RESOURCES/Projects/Visual%20Studio%20Projects/Snapper/Snapper/bin/Debug/Snapper.exe
----------------------------------------
System.Windows.Forms
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.4977 (win7RTMGDR.050727-4900)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.4971 (win7RTMGDR.050727-4900)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Drawing
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.4980 (win7RTMGDR.050727-4900)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
HotKeys
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///D:/RESOURCES/Projects/Visual%20Studio%20Projects/Snapper/Snapper/bin/Debug/HotKeys.DLL
----------------------------------------
System.Configuration
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.4927 (NetFXspW7.050727-4900)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Configuration/2.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
----------------------------------------
System.Xml
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.4927 (NetFXspW7.050727-4900)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
Microsoft.Office.Interop.Word
    Assembly Version: 14.0.0.0
    Win32 Version: 14.0.4762.1000
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Microsoft.Office.Interop.Word/14.0.0.0__71e9bce111e9429c/Microsoft.Office.Interop.Word.dll
----------------------------------------

************** JIT Debugging **************
To enable just-in-time (JIT) debugging, the .config file for this
application or computer (machine.config) must have the
jitDebugging value set in the system.windows.forms section.
The application must also be compiled with debugging
enabled.

For example:

<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration>

When JIT debugging is enabled, any unhandled exception
will be sent to the JIT debugger registered on the computer
rather than be handled by this dialog box. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T13:12:42.947

为什么不测试以下内容，只是为了测试它是否有效！

```
string originalPath = Directory.GetCurrentDirectory();
string  path = @"\snapshots";
string dirpath = Path.Combine(originalPath, path);
string filepath = @"snap1.jpg"
string completepath = Path.Combine(dirpath, filepath); 
```

**注意文件名...！**当你不给出确切的例外时，没有开始“\”
有点难。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T04:08:49.740

谢谢你们。我在 AddPicture() 方法中连接了路径和文件名。现在一切都按预期工作。

# java - 在另一个java代码中编译一个字符串中可用的java代码

> ID：14672712
> 
> 赞同：3
> 
> 时间：2013-02-03T12:59:33.513
> 
> 标签：java, compiler-construction, compilation, java-compiler-api

> **可能重复：**
> [Java 5 和 Java 6 的动态内存中 Java 代码编译 使用](https://stackoverflow.com/questions/616532/on-the-fly-in-memory-java-code-compilation-for-java-5-and-java-6)
> [Java 文件中的代码编译 Java 文件](https://stackoverflow.com/questions/9452285/compiling-java-file-with-code-from-within-a-java-file)

我在程序的字符串中有一个 hello world 类可用，如下例所示，

```
public class CompileJavaString {   
  public static void main(String arg[]) {
     String s="public class HelloWorld{ public static void main(String arg[]) ";
     s=s+" { System.out.println(\"Hello World\"); }  } ";
     // this is the complete code of Hello World class taken as an example   

     // code to compile the class Hello World available in string and 
     // generate the HelloWorld.class file required here
  } 
```

}

有人可以帮助在上面给出的示例中可用的内存字符串中编译代码吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:05:11.503

你想看看`javax.tools.JavaCompiler`和相关的类。该文档包含如何使用它们的示例。

请注意，java 编译器只有在您安装了 JDK 时才能工作。一个 JRE 是不够的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:07:04.400

另存为 HelloWorld.java 并执行以下操作：

```
 String fileToCompile = "HelloWorld.java";
  JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
  int compilationResult = compiler.run(null, null, null, fileToCompile);
    if(compilationResult == 0){
        System.out.println("Compilation is successful");
    }else{
        System.out.println("Compilation Failed");
    } 
```

**编辑**

可以看看详细的例子：

[http://www.java2s.com/Code/Java/JDK-6/CompilingfromMemory.htm](http://www.java2s.com/Code/Java/JDK-6/CompilingfromMemory.htm)

# c# - 如何从 RSS 提要中删除 XML 中的第一行

> ID：14672719
> 
> 赞同：0
> 
> 时间：2013-02-03T13:00:07.953
> 
> 标签：c#, .net, windows-phone-7, rss

我想为我最喜欢的网站创建 RSS，但问题是它的 RSS XML 包含解析时破坏整个 RSS 的第一行。如何删除读取数据的第一行？

我收到此错误：

> 系统不支持“ISO-8859-2”编码。第 1 行，位置 31。

代码：

```
void wc_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e) 
{
      SyndicationFeed feed;
      try {
           using (XmlReader reader = XmlReader.Create(e.Result)) { 
               // I WOULD LIKE to delete some rows from the Result
               feed = SyndicationFeed.Load(reader);
               lista.ItemsSource = feed.Items;
            }
       } catch (WebException we) { 
            MessageBox.Show("The internet connection is down.");
       }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:12:59.860

尝试使用： reader.MoveToContent() 或 reader.Skip() 在文件开头跳过不相关的标记。

# php - 脸书是如何做到的？检查文件类型？

> ID：14672724
> 
> 赞同：0
> 
> 时间：2013-02-03T13:00:26.803
> 
> 标签：php, facebook, file-upload

> **可能重复：**
> [如何在 PHP 中检查上传文件的文件类型？](https://stackoverflow.com/questions/310714/how-to-check-file-types-of-uploaded-files-in-php)

创建一个文本文件并将其重命名为`anything.jpg`并尝试将其上传到 facebook，facebook 检测到该文件不是图像并说`Please select an image file`或类似的东西。他们是如何做到的呢？

我`localhost`通过创建一个虚拟 html`form`和一个`<input type="file"...`元素在我的身上对其进行了测试，并上传了一个通过将文本文件重命名为和显示`something.jpg`的文件类型创建的图像文件......我如何阻止用户上传此类“假”图像。我认为限制使用不是解决方案，对吗？`$_FILES['control_name']['type']``image/jpeg``$_FILES['control_name']['type']`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:05:14.123

当您在服务器上处理图像时，使用图像处理库（[`getimagesize`](http://php.net/manual/en/function.getimagesize.php)例如）来检测它的宽度和高度。如果失败，则拒绝该图像。无论如何，您可能都会这样做来生成缩略图，所以它就像一个额外的`if`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T13:12:45.147

有很多方法可以检查实际文件。Facebook 是如何做到的，我认为只有创建它的人才知道 :)。

他们很可能会查看文件中的第一个字节。所有文件都有特定的字节来描述它们的真实情况。但是，为此，您需要大量的时间/金钱来创建数据库或其他可以验证上传的数据库。

更常见的解决方案是；

## 表格属性

在很多浏览器中，当然不包括 Internet Explorer，您可以设置一个接受属性来检查扩展客户端。更多信息在这里：[文件输入“接受”属性 - 它有用吗？](https://stackoverflow.com/questions/181214/file-input-accept-attribute-is-it-useful)

## 延期

这并不安全，因为可以使用图像扩展名保存脚本

## 读取文件 MIME 类型

这是您在问题中所述的解决方案。但是，这也很容易绕过，并且依赖于服务器的最新状态。

## 处理图像

最可靠的（对于大多数开发人员技能和可用时间而言）是将图像处理为测试。把它放在像 GD 或 Imagic 这样的库中。当图像不是真正的图像时，它们会引发错误。但是，这将要求您使该软件保持最新。

简而言之，如果不花费大量时间，就无法 100% 保证能够捕捉到这一点。即使那样你也只能得到 99,9%。您应该根据上述选项权衡您的可用时间，然后选择最适合您的时间。作为最佳实践，我建议将所有 3 个组合起来。

安全性[：如何验证图像文件上传？](https://stackoverflow.com/questions/5606465/security-how-to-validate-image-file-uploads)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T13:07:04.870

您文件中的标题将不一样。

# android - 点击预览缩略图以查看高分辨率图像

> ID：14672725
> 
> 赞同：0
> 
> 时间：2013-02-03T13:00:29.950
> 
> 标签：android, menu, zooming, imagebutton

我是一名新的 android 开发人员，我正在尝试为 android 创建一个 android 应用程序，其中将显示菜单项以及描述成本和图像。我已经实现了 List 活动来显示列表中的项目。我制作了一个图像按钮，它将以缩略图的形式显示图像。当我点击图像按钮时，我希望能够查看缩略图的高分辨率图像。我已经实现了一个 onClickListener 来监听点击事件，但我不知道使图像在点击时缩小的方法。

我已经关注[了这个链接](http://developer.android.com/training/animation/zoom.html)

但是理解起来很模棱两可。Animator 类不存在。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:33:19.200

```
I found the solution after searching for almost a week.
I used PopupWindow Class for the purpose
Following is the Java Code.

PopupWin.java
public class PopupWin extends Activity{

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            final Button bPopup = (Button)findViewById(R.id.openpopup);
            bPopup.setOnClickListener(new Button.OnClickListener(){

       @Override
       public void onClick(View arg0) {
        LayoutInflater layoutInflater 
         = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);  
        View popupView = layoutInflater.inflate(R.layout.popup, null);  
                 final PopupWindow popupWindow = new PopupWindow(
                   popupView, 
                   LayoutParams.MATCH_PARENT,  
                         LayoutParams.MATCH_PARENT);  

                 Button bDismiss = (Button)popupView.findViewById(R.id.dismiss);
                 bDismiss.setOnClickListener(new Button.OnClickListener(){

         @Override
         public void onClick(View v) {
          // TODO Auto-generated method stub
          popupWindow.dismiss();
         }});

                 popupWindow.showAsDropDown(bPopup, 50, -30);

       }});
        }
    }

popup.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/pop"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/dim_back" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/dim_back"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="20dp"
            android:orientation="vertical" 
            android:layout_gravity="center">
            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:adjustViewBounds="true"
                android:src="@drawable/appetimg01" />

            <Button
                android:id="@+id/dismiss"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:layout_marginTop="20sp"
                android:text="Go Back"
                android:textStyle="bold" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout>

main.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/appetizerDes1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:layout_weight="0.40"
            android:text="Tap the Image to view High Resolution Image."/>

        <Button
            android:id="@+id/openpopup"
            android:layout_width="80sp"
            android:layout_height="80sp"
            android:layout_gravity="right"
            android:layout_margin="40sp"
            android:background="@drawable/custombutton"
            android:scaleType="centerCrop" />
    </LinearLayout>

</LinearLayout>

The background was appearing white but I wanted it transparent for which I created back_dim.xml in drawables and set it along with android:background="@drawable/back_dim". 
```

# php - 我应该如何从 PHP 的类中调用 mysql 数据库函数？

> ID：14672735
> 
> 赞同：1
> 
> 时间：2013-02-03T13:01:49.623
> 
> 标签：php, mysql, static, singleton, database-connection

这是我已经挣扎了一段时间的事情，我知道我并不孤单。我正在寻找一种能够在我的 PHP 类中使用数据库连接的“最佳实践”方式。我刚刚开始阅读有关静态函数和单例的内容。我目前认为这是要走的路，但我想避免在购买新锤子后将所有问题都视为钉子，如果你明白我的意思的话。我知道我不是唯一一个对此提出质疑的人，但我找不到一个很好的资源来解释应该如何做。

我想我正在寻找的是一个可重用的类，它可以删除或最小化任何全局调用。我知道出于性能原因我不想制作一个类的多个副本或创建多个数据库实例。

我认为我所做的（我对某些词的定义有点模糊）是一个数据库单例。

我正在寻找的是一些建议。这是我“应该”使用数据库类的方式吗？如果是这样，我是否以最好的方式写了它？

这是PHP：

```
<?php
# set all errors and notices on.
error_reporting(E_ALL);
ini_set('display_errors', '1');

# database static class.
class database {

    private static $connection;
    private static $instance;

    private function __construct(){
        # run the connection here
        self::$connection='*dbcon*';
        echo 'connecting...<br />';
    }

    public static function getInstance(){
        # this only runs once, calling the construct once.
        if(!self::$instance){
            self::$instance = new database();
        }
        return self::$instance;     
    }

    private static function sanitise($data){
        # sanitise data before it's sent to the database
        return '~'.$data.'~';
        # sanitisation is flagged by adding tildas to a string.
    }

    public function runquery($query){
        echo 'running query...<br />';
        return self::$connection.' - '.self::sanitise($query);
    }
}

# user class
class myuser {

    function getuser($username){
        # this uses the database class, but shouldn't call a second copy of it.
        # I should be able to re-use the connection string created outside this class.
        # Doing so sould not trigger a reconnection (flagged by echoing 'connecting...')
        echo database::runquery('SELECT * FROM user_tbl WHERE username='.$username);
        # The above line will call everything I need to return a result including sanitisation.
    }
}

# this line would be needed to substantiate an instance of the database.
database::getInstance();
# run two queries on the database to see if they both run from the same connection
echo database::runquery('test query');
echo '<br />';
echo database::runquery('second test query');
echo '<br />';

# substantiate a new user class
$user = new myuser();
# load in the current user.
$user->getuser('mark');
?> 
```

结果如下：

```
connecting...
running query...
*dbcon* - ~test query~
running query...
*dbcon* - ~second test query~
running query...
*dbcon* - ~SELECT * FROM user_tbl WHERE username=mark~ 
```

我的输出中只有一个“正在连接...”字符串，我可以从任何地方调用数据库查询，而无需`$this->database = new database();`在我创建的每个类的构造函数中调用类似的东西。

# javascript - JavaScript：增强对象/函数原型以避免名称冲突

> ID：14672736
> 
> 赞同：1
> 
> 时间：2013-02-03T13:01:50.673
> 
> 标签：javascript, prototype, conflict

祝大家天天好

有没有一种方法可以增加 javascript Object 和 Function 元素以避免冲突问题？让我更具体一点：

假设我有 2 个 .js 文件：

ex1.js 有 `Object.prototype.aMethod=function(){/*a function*/}`

ex2.js 有 `Object.prototype.aMethod=function(){/*another function*/}`

在这种情况下， ex1.js 扩充被 ex2.js 上的扩充覆盖。

我的问题 ：

有没有办法将扩充的效果限制在他的文件上下文中，或者更好地限制在模块上下文中？

编辑：

实际上，我正在阅读 crockford 的书 JavaScript：好的部分，其中他使用 Object 和 Function 的原型增强作为正常的操作，而没有谈论冲突问题。这很奇怪，因为这本书倾向于不污染全局命名空间。所以我认为必须有某种解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:45:25.930

如果您正在修改的对象是全局的，则原型修改是全局的。为了支持您尝试做的事情，您可以使用模块本地原型：

```
var MyObject = function(properties) {
  var key;
  for(key in properties) {
    if(properties.hasOwnProperty(key)) {
      this[key] = properties[key];
    }
  }
};

MyObject.prototype.aMethod = function() {
  console.log(this.name);
}

var obj = new MyObject({name: "blah"});
obj.aMethod();

// Prints "blah" 
```

在 javascript 上，修改`Object.prototype`通常被认为是“邪恶的”，因为继承的属性会出现在`for-in`之后的每个循环中。请注意，修改`Object.prototype`不同于修改`Object`对象，这是[Sugar.JS](http://sugarjs.com/)等库通常所做的。

# python - 成对映射一个numpy数组

> ID：14672739
> 
> 赞同：4
> 
> 时间：2013-02-03T13:01:52.967
> 
> 标签：python, arrays, numpy, mapping, scipy

我目前正在使用 python 和 numpy/scipy 实现节拍检测算法。我基本上需要读取一个 .wav 文件并对其进行处理。这是代码：

```
sampling_rate, wave_data = scipy.io.wavfile.read(argv[1]) 
```

`wave_data`是一个一维 numpy 数组，包含大约 441 000 个元素（10 秒的声音，采样率为 44.1 kHz）。现在，我需要对这个数组中的每两个元素做一些基本的数学运算。这就是我现在的做法：

```
wave_data = [sampling_rate * (wave_data[i+1] - wave_data[i]) 
             for i in xrange(len(wave_data)-1)] 
```

这种操作需要太多时间（没有分析就很明显）。我需要成对地“就地”映射数组，而不创建新的 python 列表。我知道有`numpy.vectorize`，但我不知道如何成对进行映射（映射数组的每两个元素）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T13:05:02.883

以下任一项都可以：

```
wave_date = sampling_rate * np.diff(wave_data) 
```

或者

```
wave_date = sampling_rate * (wave_data[1:] - wave_data[:-1]) 
```

例如：

```
In [7]: sampling_rate = 2

In [8]: wave_data = np.array([1, 3, 5, 2, 8, 10])

In [9]: sampling_rate * (wave_data[1:] - wave_data[:-1])
Out[9]: array([ 4,  4, -6, 12,  4]) 
```

就性能而言，这两种方法都比列表理解快约 500 倍：

```
In [16]: wave_data = np.array([1., 3, 5, 2, 8, 10, 5, 2, 4, 7] * 44100)

In [17]: %timeit sampling_rate * np.diff(wave_data)
100 loops, best of 3: 2.2 ms per loop

In [18]: %timeit sampling_rate * (wave_data[1:] - wave_data[:-1])
100 loops, best of 3: 2.15 ms per loop

In [19]: %timeit [sampling_rate * (wave_data[i+1] - wave_data[i]) for i in xrange(len(wave_data)-1)]
1 loops, best of 3: 970 ms per loop 
```

# javascript - 如何在浏览器中通过 Javascript 压缩图像？

> ID：14672746
> 
> 赞同：140
> 
> 时间：2013-02-03T13:02:24.223
> 
> 标签：javascript, image, cross-browser, compression

**TL;博士;**

有没有办法在上传之前直接在浏览器端压缩图像（主要是 jpeg、png 和 gif）？我很确定 JavaScript 可以做到这一点，但我找不到实现它的方法。

这是我要实现的完整场景：

*   用户访问我的网站，并通过`input type="file"`元素选择图像，
*   此图像是通过 JavaScript 检索的，我们会进行一些验证，例如正确的文件格式、最大文件大小等，
*   如果一切正常，页面上会显示图像的预览，
*   用户可以进行一些基本操作，例如将图像旋转 90°/-90°、按照预定义的比例裁剪等，或者用户可以上传另一张图像并返回步骤 1，
*   当用户满意时，编辑后的图像会被压缩并在本地“保存”（不是保存到文件，而是保存在浏览器内存/页面中），-
*   用户用姓名、年龄等数据填写表格，
*   用户单击“完成”按钮，然后将包含数据+压缩图像的表单发送到服务器（不带 AJAX），

到最后一步的整个过程应该在客户端完成，并且应该在最新的 Chrome 和 Firefox、Safari 5+ 和**IE 8+**上兼容。如果可能，应该只使用 JavaScript（但我很确定这是不可能的）。

我现在还没有编写任何代码，但我已经考虑过了。通过[File API](http://www.html5rocks.com/en/tutorials/file/dndfiles/)可以在本地读取文件，可以使用[Canvas](http://www.html5rocks.com/en/tutorials/canvas/integrating/)元素完成图像预览和编辑，但**我找不到执行图像压缩部分的方法**。

根据[html5please.com](http://html5please.com/)和[caniuse.com](http://caniuse.com/)的说法，支持这些浏览器非常困难（感谢 IE），但可以使用诸如[FlashCanvas](http://flashcanvas.net/)和[FileReader](https://github.com/Jahdrien/FileReader)之类的 polyfill 来完成。

实际上，目标是减小文件大小，因此我将图像压缩视为一种解决方案。但是，我知道上传的图片每次都会在同一个地方显示在我的网站上，而且我知道这个显示区域的尺寸（例如 200x400）。因此，我可以调整图像大小以适应这些尺寸，从而减小文件大小。我不知道这种技术的压缩比是多少。

你怎么看 ？你有什么建议可以告诉我吗？您知道在 JavaScript 中压缩图像浏览器端的任何方法吗？感谢您的回复。

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2013-02-03T13:24:11.183

简而言之：

*   使用带有 .readAsArrayBuffer 的 HTML5 FileReader API 读取文件
*   [使用文件数据创建一个 Blob 并使用window.URL.createObjectURL(blob)](http://updates.html5rocks.com/2012/06/Don-t-Build-Blobs-Construct-Them)获取其 url
*   创建新的 Image 元素并将其 src 设置为文件 blob url
*   将图像发送到画布。画布大小设置为所需的输出大小
*   通过 canvas.toDataURL("image/jpeg",0.7) 从画布取回按比例缩小的数据（设置您自己的输出格式和质量）
*   将新的隐藏输入附加到原始表单并将 dataURI 图像基本上作为普通文本传输
*   在后端，读取 dataURI，从 Base64 解码并保存

来源：[代码](https://github.com/josefrichter/resize/blob/master/public/preprocess.js)。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2017-06-30T14:46:34.593

我看到其他答案中缺少两件事：

*   `canvas.toBlob`（如果可用）比`canvas.toDataURL`, 和异步更高效。
*   文件->图像->画布->文件转换丢失EXIF数据；特别是现代手机/平板电脑通常设置的图像旋转数据。

以下脚本处理这两点：

```
// From https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob, needed for Safari:
if (!HTMLCanvasElement.prototype.toBlob) {
    Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {
        value: function(callback, type, quality) {

            var binStr = atob(this.toDataURL(type, quality).split(',')[1]),
                len = binStr.length,
                arr = new Uint8Array(len);

            for (var i = 0; i < len; i++) {
                arr[i] = binStr.charCodeAt(i);
            }

            callback(new Blob([arr], {type: type || 'image/png'}));
        }
    });
}

window.URL = window.URL || window.webkitURL;

// Modified from https://stackoverflow.com/a/32490603, cc by-sa 3.0
// -2 = not jpeg, -1 = no data, 1..8 = orientations
function getExifOrientation(file, callback) {
    // Suggestion from http://code.flickr.net/2012/06/01/parsing-exif-client-side-using-javascript-2/:
    if (file.slice) {
        file = file.slice(0, 131072);
    } else if (file.webkitSlice) {
        file = file.webkitSlice(0, 131072);
    }

    var reader = new FileReader();
    reader.onload = function(e) {
        var view = new DataView(e.target.result);
        if (view.getUint16(0, false) != 0xFFD8) {
            callback(-2);
            return;
        }
        var length = view.byteLength, offset = 2;
        while (offset < length) {
            var marker = view.getUint16(offset, false);
            offset += 2;
            if (marker == 0xFFE1) {
                if (view.getUint32(offset += 2, false) != 0x45786966) {
                    callback(-1);
                    return;
                }
                var little = view.getUint16(offset += 6, false) == 0x4949;
                offset += view.getUint32(offset + 4, little);
                var tags = view.getUint16(offset, little);
                offset += 2;
                for (var i = 0; i < tags; i++)
                    if (view.getUint16(offset + (i * 12), little) == 0x0112) {
                        callback(view.getUint16(offset + (i * 12) + 8, little));
                        return;
                    }
            }
            else if ((marker & 0xFF00) != 0xFF00) break;
            else offset += view.getUint16(offset, false);
        }
        callback(-1);
    };
    reader.readAsArrayBuffer(file);
}

// Derived from https://stackoverflow.com/a/40867559, cc by-sa
function imgToCanvasWithOrientation(img, rawWidth, rawHeight, orientation) {
    var canvas = document.createElement('canvas');
    if (orientation > 4) {
        canvas.width = rawHeight;
        canvas.height = rawWidth;
    } else {
        canvas.width = rawWidth;
        canvas.height = rawHeight;
    }

    if (orientation > 1) {
        console.log("EXIF orientation = " + orientation + ", rotating picture");
    }

    var ctx = canvas.getContext('2d');
    switch (orientation) {
        case 2: ctx.transform(-1, 0, 0, 1, rawWidth, 0); break;
        case 3: ctx.transform(-1, 0, 0, -1, rawWidth, rawHeight); break;
        case 4: ctx.transform(1, 0, 0, -1, 0, rawHeight); break;
        case 5: ctx.transform(0, 1, 1, 0, 0, 0); break;
        case 6: ctx.transform(0, 1, -1, 0, rawHeight, 0); break;
        case 7: ctx.transform(0, -1, -1, 0, rawHeight, rawWidth); break;
        case 8: ctx.transform(0, -1, 1, 0, 0, rawWidth); break;
    }
    ctx.drawImage(img, 0, 0, rawWidth, rawHeight);
    return canvas;
}

function reduceFileSize(file, acceptFileSize, maxWidth, maxHeight, quality, callback) {
    if (file.size <= acceptFileSize) {
        callback(file);
        return;
    }
    var img = new Image();
    img.onerror = function() {
        URL.revokeObjectURL(this.src);
        callback(file);
    };
    img.onload = function() {
        URL.revokeObjectURL(this.src);
        getExifOrientation(file, function(orientation) {
            var w = img.width, h = img.height;
            var scale = (orientation > 4 ?
                Math.min(maxHeight / w, maxWidth / h, 1) :
                Math.min(maxWidth / w, maxHeight / h, 1));
            h = Math.round(h * scale);
            w = Math.round(w * scale);

            var canvas = imgToCanvasWithOrientation(img, w, h, orientation);
            canvas.toBlob(function(blob) {
                console.log("Resized image to " + w + "x" + h + ", " + (blob.size >> 10) + "kB");
                callback(blob);
            }, 'image/jpeg', quality);
        });
    };
    img.src = URL.createObjectURL(file);
} 
```

示例用法：

```
inputfile.onchange = function() {
    // If file size > 500kB, resize such that width <= 1000, quality = 0.9
    reduceFileSize(this.files[0], 500*1024, 1000, Infinity, 0.9, blob => {
        let body = new FormData();
        body.set('file', blob, blob.name || "file.jpg");
        fetch('/upload-image', {method: 'POST', body}).then(...);
    });
}; 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-09-27T22:31:48.473

@PsychoWoods 的回答很好。我想提供我自己的解决方案。这个 Javascript 函数接受一个图像数据 URL 和一个宽度，将其缩放到新的宽度，并返回一个新的数据 URL。

```
// Take an image URL, downscale it to the given width, and return a new image URL.
function downscaleImage(dataUrl, newWidth, imageType, imageArguments) {
    "use strict";
    var image, oldWidth, oldHeight, newHeight, canvas, ctx, newDataUrl;

    // Provide default values
    imageType = imageType || "image/jpeg";
    imageArguments = imageArguments || 0.7;

    // Create a temporary image so that we can compute the height of the downscaled image.
    image = new Image();
    image.src = dataUrl;
    oldWidth = image.width;
    oldHeight = image.height;
    newHeight = Math.floor(oldHeight / oldWidth * newWidth)

    // Create a temporary canvas to draw the downscaled image on.
    canvas = document.createElement("canvas");
    canvas.width = newWidth;
    canvas.height = newHeight;

    // Draw the downscaled image on the canvas and return the new data URL.
    ctx = canvas.getContext("2d");
    ctx.drawImage(image, 0, 0, newWidth, newHeight);
    newDataUrl = canvas.toDataURL(imageType, imageArguments);
    return newDataUrl;
} 
```

此代码可用于您拥有数据 URL 并希望为缩小图像提供数据 URL 的任何地方。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2018-12-24T02:28:28.857

你可以看看[image-conversion](https://github.com/WangYuLue/image-conversion)，在这里试试 -->[演示页面](http://www.wangyulue.com/assets/image-comversion/example/index.html)

[![在此处输入图像描述](../Images/50deae5d5d2d25b51032a8baf17f18ad.png)](https://i.stack.imgur.com/0t5ta.png)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-07-27T02:46:53.400

我对`downscaleImage()`@daniel-allen-langdon 上面发布的函数有一个问题，因为图像加载是**异步**`image.width`的，所以and`image.height`属性不能立即使用。

 **请参阅下面更新的 TypeScript 示例，该示例考虑到这一点，使用`async`函数并根据最长尺寸而不是宽度调整图像大小

```
function getImage(dataUrl: string): Promise<HTMLImageElement> 
{
    return new Promise((resolve, reject) => {
        const image = new Image();
        image.src = dataUrl;
        image.onload = () => {
            resolve(image);
        };
        image.onerror = (el: any, err: ErrorEvent) => {
            reject(err.error);
        };
    });
}

export async function downscaleImage(
        dataUrl: string,  
        imageType: string,  // e.g. 'image/jpeg'
        resolution: number,  // max width/height in pixels
        quality: number   // e.g. 0.9 = 90% quality
    ): Promise<string> {

    // Create a temporary image so that we can compute the height of the image.
    const image = await getImage(dataUrl);
    const oldWidth = image.naturalWidth;
    const oldHeight = image.naturalHeight;
    console.log('dims', oldWidth, oldHeight);

    const longestDimension = oldWidth > oldHeight ? 'width' : 'height';
    const currentRes = longestDimension == 'width' ? oldWidth : oldHeight;
    console.log('longest dim', longestDimension, currentRes);

    if (currentRes > resolution) {
        console.log('need to resize...');

        // Calculate new dimensions
        const newSize = longestDimension == 'width'
            ? Math.floor(oldHeight / oldWidth * resolution)
            : Math.floor(oldWidth / oldHeight * resolution);
        const newWidth = longestDimension == 'width' ? resolution : newSize;
        const newHeight = longestDimension == 'height' ? resolution : newSize;
        console.log('new width / height', newWidth, newHeight);

        // Create a temporary canvas to draw the downscaled image on.
        const canvas = document.createElement('canvas');
        canvas.width = newWidth;
        canvas.height = newHeight;

        // Draw the downscaled image on the canvas and return the new data URL.
        const ctx = canvas.getContext('2d')!;
        ctx.drawImage(image, 0, 0, newWidth, newHeight);
        const newDataUrl = canvas.toDataURL(imageType, quality);
        return newDataUrl;
    }
    else {
        return dataUrl;
    }

} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-08-12T14:37:13.353

我发现与接受的答案相比，有更简单的解决方案。

> *   ~~使用 HTML5 FileReader API 读取文件`.readAsArrayBuffer`~~
> *   使用文件数据创建一个 Blob 并获取其 url`window.URL.createObjectURL(blob)`
> *   创建新的 Image 元素并将其 src 设置为文件 blob url
> *   将图像发送到画布。画布大小设置为所需的输出大小
> *   ~~通过~~~~（设置您自己的输出格式和质量）~~从画布中获取按比例缩小的数据~~`canvas.toDataURL("image/jpeg",0.7)`~~
> *   将新的隐藏输入附加到原始表单~~并将 dataURI 图像基本上作为普通文本传输~~
> *   ~~在后端，读取 dataURI，从 Base64 解码并~~保存

根据你的问题：

> 有没有办法在上传之前直接在浏览器端压缩图像（主要是 jpeg、png 和 gif）

我的解决方案：

1.  直接使用文件创建一个 blob `URL.createObjectURL(inputFileElement.files[0])`。

2.  与接受的答案相同。

3.  与接受的答案相同。值得一提的是，画布大小是必要的，并且使用`img.width`and`img.height`来设置`canvas.width`and `canvas.height`。不是`img.clientWidth`。

4.  得到按比例缩小的图像`canvas.toBlob(callbackfunction(blob){}, 'image/jpeg', 0.5)`。设置`'image/jpg'`没有效果。`image/png`也支持。用. 在**体内**创建一个新`File`对象。`callbackfunction` **`let compressedImageBlob = new File([blob])`**

***   添加新的隐藏输入或[通过 javascript 发送](https://stackoverflow.com/a/51109645/5983841)。服务器不必解码任何东西。** 

 **检查[https://javascript.info/binary](https://javascript.info/binary)以获取所有信息。读完本章后，我想出了解决方案。

* * *

代码：

```
 <!DOCTYPE html>
    <html>
    <body>
    <form action="upload.php" method="post" enctype="multipart/form-data">
      Select image to upload:
      <input type="file" name="fileToUpload" id="fileToUpload" multiple>
      <input type="submit" value="Upload Image" name="submit">
    </form>
    </body>
    </html> 
```

这段代码看起来远没有其他答案那么可怕。

### 更新：

一个人必须把所有东西都放在里面`img.onload`。否则在分配`canvas`时间时将无法正确获取图像的宽度和高度`canvas`。

```
 function upload(){
        var f = fileToUpload.files[0];
        var fileName = f.name.split('.')[0];
        var img = new Image();
        img.src = URL.createObjectURL(f);
        img.onload = function(){
            var canvas = document.createElement('canvas');
            canvas.width = img.width;
            canvas.height = img.height;
            var ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0);
            canvas.toBlob(function(blob){
                    console.info(blob.size);
                    var f2 = new File([blob], fileName + ".jpeg");
                    var xhr = new XMLHttpRequest();
                    var form = new FormData();
                    form.append("fileToUpload", f2);
                    xhr.open("POST", "upload.php");
                    xhr.send(form);
            }, 'image/jpeg', 0.5);
        }
    } 
```

`3.4MB` `.png``image/jpeg`带参数集的文件压缩测试。

```
 |0.9| 777KB |
    |0.8| 383KB |
    |0.7| 301KB |
    |0.6| 251KB |
    |0.5| 219kB | 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-05-26T15:48:30.243

编辑：根据我先生对此答案的评论，看起来压缩现在可用于 JPG/WebP 格式（请参阅[https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toDataURL](https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toDataURL)） .

据我所知，您不能使用画布压缩图像，而是可以调整其大小。使用 canvas.toDataURL 不会让您选择要使用的压缩比。你可以看看 canimage 完全符合你的要求：[https ://github.com/nfroidure/CanImage/blob/master/chrome/canimage/content/canimage.js](https://github.com/nfroidure/CanImage/blob/master/chrome/canimage/content/canimage.js)

实际上，通常只调整图像大小以减小其大小就足够了，但如果您想更进一步，您将不得不使用新引入的方法 file.readAsArrayBuffer 来获取包含图像数据的缓冲区。

然后，只需使用 DataView 根据图像格式规范（[http://en.wikipedia.org/wiki/JPEG](http://en.wikipedia.org/wiki/JPEG)或[http://en.wikipedia.org/wiki/Portable_Network_Graphics](http://en.wikipedia.org/wiki/Portable_Network_Graphics)）读取其内容。

处理图像数据压缩会很困难，但尝试一下会更糟。另一方面，您可以尝试删除 PNG 标头或 JPEG exif 数据以使您的图像更小，这样做应该更容易。

您必须在另一个缓冲区上创建另一个 DataWiew 并用过滤后的图像内容填充它。然后，您只需使用 window.btoa 将您的图像内容编码为 DataURI。

如果你实现类似的东西，请告诉我，通过代码会很有趣。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-08-27T16:46:42.630

**试试这个可定制的纯 JS 示例 - 压缩超过 90%：**

```
 <div id="root">
        <p>Upload an image and see the result</p>
        <input id="img-input" type="file" accept="image/*" style="display:block" />
    </div>

    <script>
        const MAX_WIDTH = 320;
        const MAX_HEIGHT = 180;
        const MIME_TYPE = "image/jpeg";
        const QUALITY = 0.7;

        const input = document.getElementById("img-input");
        input.onchange = function (ev) {
            const file = ev.target.files[0]; // get the file
            const blobURL = URL.createObjectURL(file);
            const img = new Image();
            img.src = blobURL;
            img.onerror = function () {
                URL.revokeObjectURL(this.src);
                // Handle the failure properly
                console.log("Cannot load image");
            };
            img.onload = function () {
                URL.revokeObjectURL(this.src);
                const [newWidth, newHeight] = calculateSize(img, MAX_WIDTH, MAX_HEIGHT);
                const canvas = document.createElement("canvas");
                canvas.width = newWidth;
                canvas.height = newHeight;
                const ctx = canvas.getContext("2d");
                ctx.drawImage(img, 0, 0, newWidth, newHeight);
                canvas.toBlob(
                    (blob) => {
                        // Handle the compressed image. es. upload or save in local state
                        displayInfo('Original file', file);
                        displayInfo('Compressed file', blob);
                    },
                    MIME_TYPE,
                    QUALITY
                );
                document.getElementById("root").append(canvas);
            };
        };

        function calculateSize(img, maxWidth, maxHeight) {
            let width = img.width;
            let height = img.height;

            // calculate the width and height, constraining the proportions
            if (width > height) {
                if (width > maxWidth) {
                    height = Math.round((height * maxWidth) / width);
                    width = maxWidth;
                }
            } else {
                if (height > maxHeight) {
                    width = Math.round((width * maxHeight) / height);
                    height = maxHeight;
                }
            }
            return [width, height];
        }

        // Utility functions for demo purpose

        function displayInfo(label, file) {
            const p = document.createElement('p');
            p.innerText = `${label} - ${readableBytes(file.size)}`;
            document.getElementById('root').append(p);
        }

        function readableBytes(bytes) {
            const i = Math.floor(Math.log(bytes) / Math.log(1024)),
                sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];

            return (bytes / Math.pow(1024, i)).toFixed(2) + ' ' + sizes[i];
        }
    </script> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-10-13T10:36:24.587

我将功能改进为：

```
var minifyImg = function(dataUrl,newWidth,imageType="image/jpeg",resolve,imageArguments=0.7){
    var image, oldWidth, oldHeight, newHeight, canvas, ctx, newDataUrl;
    (new Promise(function(resolve){
      image = new Image(); image.src = dataUrl;
      log(image);
      resolve('Done : ');
    })).then((d)=>{
      oldWidth = image.width; oldHeight = image.height;
      log([oldWidth,oldHeight]);
      newHeight = Math.floor(oldHeight / oldWidth * newWidth);
      log(d+' '+newHeight);

      canvas = document.createElement("canvas");
      canvas.width = newWidth; canvas.height = newHeight;
      log(canvas);
      ctx = canvas.getContext("2d");
      ctx.drawImage(image, 0, 0, newWidth, newHeight);
      //log(ctx);
      newDataUrl = canvas.toDataURL(imageType, imageArguments);
      resolve(newDataUrl);
    });
  }; 
```

它的用途：

```
minifyImg(<--DATAURL_HERE-->,<--new width-->,<--type like image/jpeg-->,(data)=>{
   console.log(data); // the new DATAURL
}); 
```

请享用 ;）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-04-27T07:55:26.367

Compressor.js

[https://github.com/fengyuanchen/compressorjs](https://github.com/fengyuanchen/compressorjs/)

```
import axios from 'axios';
import Compressor from 'compressorjs';

document.getElementById('file').addEventListener('change', (e) => {
  const file = e.target.files[0];

  if (!file) {
    return;
  }

  new Compressor(file, {
    quality: 0.6,

    // The compression process is asynchronous,
    // which means you have to access the `result` in the `success` hook function.
    success(result) {
      const formData = new FormData();

      // The third parameter is required for server
      formData.append('file', result, result.name);

      // Send the compressed image file to server with XMLHttpRequest.
      axios.post('/path/to/upload', formData).then(() => {
        console.log('Upload success');
      });
    },
    error(err) {
      console.log(err.message);
    },
  });
});
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-11-30T16:40:29.010

我使用了以下包： [https ://www.npmjs.com/package/browser-image-compression](https://www.npmjs.com/package/browser-image-compression)

```
npm install browser-image-compression
or
yarn add browser-image-compression 
```

然后只需遵循文档：

```
import imageCompression from 'browser-image-compression';
const options = {
 maxSizeMB: 0.5, // pretty much self-explanatory
 maxWidthOrHeight: 500, // apparently px
}

imageCompression(file, options)
            .then(function(compressedFile) {
                console.log(
                    "compressedFile instanceof Blob",
                    compressedFile instanceof Blob
                ); // true
                console.log(
                    `compressedFile size ${compressedFile.size /
                        1024 /
                        1024} MB`
                ); // smaller than maxSizeMB

                return uploader(compressedFile); // code to actual upload, in my case uploader() is a function to upload to Firebase storage.
            }) 
```

以防万一您对 . 感兴趣`uploader()`，下面是它的代码：

```
import { initializeApp } from "firebase/app";

const firebaseConfig = {
    // your config
};

initializeApp(firebaseConfig);
import { getStorage, ref, uploadBytes, getDownloadURL } from "firebase/storage";
const storage = getStorage();
const sRef = ref(storage);

const uploader = async (file) => {
        /* uploads to root */

        // const imageRef = ref(sRef, file.name);
        // console.log(imageRef);
        // await uploadBytes(imageRef, file).then((snapshot) => {
        //  console.log("Uploaded a blob or file!", snapshot);
        // });

        /* upload to folder 'techs/' */
        const folderRef = ref(sRef, "techs/" + file.name);
        await uploadBytes(folderRef, file);

        // get URL
        const url = await getDownloadURL(ref(storage, folderRef));

        console.log("url: ", url);
        return url;
    }; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-01-31T07:20:01.947

对于 JPG 图像压缩，您可以使用称为 JIC（Javascript 图像压缩）的最佳压缩技术，这肯定会对您有所帮助 --> [https://github.com/brunobar79/JIC](https://github.com/brunobar79/J-I-C)****

# vim - 在vim中点击结束时不要居中屏幕

> ID：14672751
> 
> 赞同：0
> 
> 时间：2013-02-03T13:02:34.697
> 
> 标签：vim

当`nowrap`在一条长线上时，点击结束按钮会将光标带到行尾（当然）。此外，屏幕将以光标为中心。

它将从这里获取光标：

![光标在右边](../Images/4bdaaab57c7167529cff27270141a983.png)

到这里：

![光标在左边](../Images/3860c9a9691edf80dfb15f25e7356ac4.png)

我怎样才能让它只滚动到“行”？因此有最后一个“这是一条很长的线”。对齐到窗口的右侧？

编辑：我已经知道了`sidescroll`，`sidescrolloff`但仅在使用箭头键时才适用。它不会改变结束键的行为，因此不能解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:55:41.797

如果你检查`:h ze`

```
ze          Scroll the text horizontally to position the cursor
            at the end (right side) of the screen.  This only
            works when 'wrap' is off.  {not in Vi} 
```

因此，如果您创建映射、映射`$`或`<end>`到`$ze`或`<end>ze`，它应该可以按您的意愿工作。

希望能帮助到你。

**编辑**

如果你想在 INSERT 模式下像你想要的那样映射：

```
:set sidescroll=1
:inoremap <End> <Esc><End>zei 
```

# python - 在 Flask 中处理多个请求

> ID：14672753
> 
> 赞同：64
> 
> 时间：2013-02-03T13:02:59.427
> 
> 标签：python, flask

我的 Flask 应用程序必须进行相当大的计算才能获取某个页面。在 Flask 执行该功能时，另一个用户无法访问该网站，因为 Flask 正忙于进行大型计算。

有什么方法可以让我的 Flask 应用程序接受来自多个用户的请求？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-02-03T13:05:18.057

是的，将您的应用程序部署在不同的 WSGI 服务器上，请参阅[Flask 部署选项文档](http://flask.pocoo.org/docs/deploying/)。

Flask 附带的服务器组件实际上只适用于您开发应用程序时；即使它可以配置为处理并发请求`app.run(threaded=True)`（从 Flask 1.0 开始，这是默认设置）。上面的文档列出了可以处理并发请求*并且*更加健壮和可调整的服务器的几个选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T13:40:15.100

对于需要很长时间的请求，您可能需要考虑为它们启动后台作业。

# matlab - 在 GUI 轴上绘图时出错

> ID：14672756
> 
> 赞同：0
> 
> 时间：2013-02-03T13:03:44.643
> 
> 标签：matlab, user-interface, plot

我有一个函数 ParallelPlot 如下：

```
function ParallelPlot(hAxes, normalizedMatrix )
%//PARALLELPLOT Do Parallel Coordinates Plot for a normalized matrix
%//columns

%// Input:-
%//  o hAxes: Handle to an axes.
%//  o normalizedMatrix : n-by-m normalized matrix

DEFAULT_AXES_COLOR = [0 0 0];

[MATRIX_HEIGHT MATRIX_WIDTH] = size(normalizedMatrix);
ALL_PLOTS_MATRIX             = zeros(MATRIX_HEIGHT,MATRIX_WIDTH);

DEFAULT_MARKER_EDGE_COLOR  = [.2 .3 .4];
DEFAULT_MARKER_FACE_COLOR  = [.3 .7 .2];
DEFAULT_MARKER_SHAPE       = 's';
DEFAULT_MARKER_SIZE        = 10;
DEFAULT_MARKER_COLOR       = [1 0 0];
DEFAULT_MARKER_LINE_STYLE  = '-';
DEFAULT_MARKER_LINE_WIDTH  = 1;

SELECTED_MARKER_EDGE_COLOR = [.5 .5 .8];
SELECTED_MARKER_FACE_COLOR = [.4 .4 .6];
SELECTED_MARKER_SHAPE      = 'x';
SELECTED_MARKER_SIZE       = 15;
SELECTED_MARKER_COLOR      = [1 1 1];
SELECTED_MARKER_LINE_STYLE = '--';
SELECTED_MARKER_LINE_WIDTH = 4;

InitializeAllPlotsMatrix;
set(hAxes, 'color', DEFAULT_AXES_COLOR);
set(hAxes,'xLim',[0 MATRIX_WIDTH+1]);

    function plotHandle = InitializeNewPlot
        plotHandle = plot(hAxes           , NaN,NaN                         );
        set(plotHandle, 'Marker'          , DEFAULT_MARKER_SHAPE            );
        set(plotHandle, 'MarkerEdgeColor' , DEFAULT_MARKER_EDGE_COLOR       );
        set(plotHandle, 'MarkerFaceColor' , DEFAULT_MARKER_FACE_COLOR       );
        set(plotHandle, 'MarkerSize'      , DEFAULT_MARKER_SIZE             );
        set(plotHandle, 'LineStyle'       , DEFAULT_MARKER_LINE_STYLE       );
        set(plotHandle, 'LineWidth'       , DEFAULT_MARKER_LINE_WIDTH       );
        set(plotHandle, 'Color'           , DEFAULT_MARKER_COLOR            );
        set(plotHandle, 'ButtonDownFcn'   , @ParallelPlotButtonDownCallback );
    end

    function InitializeAllPlotsMatrix
        for i = 1 : MATRIX_HEIGHT
            for j = 1 : MATRIX_WIDTH                                
                plotHandle = InitializeNewPlot;
                hold on;
                if j <= MATRIX_WIDTH - 1
                    xDataValue   = [ j j+1];
                else
                    xDataValue = j;
                end
                if j <= MATRIX_WIDTH - 1
                    yDataValue   = [ normalizedMatrix(i,j) , normalizedMatrix(i,j+1)];
                else
                    yDataValue   = normalizedMatrix(i,j);
                end

                set(plotHandle,'xData', xDataValue,'yData', yDataValue);

                ALL_PLOTS_MATRIX(i,j) = plotHandle;
            end
        end
    end

    function ParallelPlotButtonDownCallback(plotHandle,eventHandle) %#ok<INUSD>

        [i, j] = find(ALL_PLOTS_MATRIX == plotHandle); %#ok<NASGU>

        set(ALL_PLOTS_MATRIX, 'Marker'              , DEFAULT_MARKER_SHAPE       );
        set(ALL_PLOTS_MATRIX, 'MarkerEdgeColor'     , DEFAULT_MARKER_EDGE_COLOR  );
        set(ALL_PLOTS_MATRIX, 'MarkerFaceColor'     , DEFAULT_MARKER_FACE_COLOR  );
        set(ALL_PLOTS_MATRIX, 'MarkerSize'          , DEFAULT_MARKER_SIZE        );
        set(ALL_PLOTS_MATRIX, 'LineStyle'           , DEFAULT_MARKER_LINE_STYLE  );
        set(ALL_PLOTS_MATRIX, 'LineWidth'           , DEFAULT_MARKER_LINE_WIDTH  );
        set(ALL_PLOTS_MATRIX, 'Color'               , DEFAULT_MARKER_COLOR       );

        relevantPlotsHandles = ALL_PLOTS_MATRIX(i,:);
        set(relevantPlotsHandles, 'Marker'          , SELECTED_MARKER_SHAPE      );
        set(relevantPlotsHandles, 'MarkerEdgeColor' , SELECTED_MARKER_EDGE_COLOR );
        set(relevantPlotsHandles, 'MarkerFaceColor' , SELECTED_MARKER_FACE_COLOR );
        set(relevantPlotsHandles, 'MarkerSize'      , SELECTED_MARKER_SIZE       );
        set(relevantPlotsHandles, 'LineStyle'       , SELECTED_MARKER_LINE_STYLE );
        set(relevantPlotsHandles, 'LineWidth'       , SELECTED_MARKER_LINE_WIDTH );
        set(relevantPlotsHandles, 'Color'           , SELECTED_MARKER_COLOR      );
    end
end 
```

`axes()`当我将此函数与空轴（如

```
plotHandle = plot(hAxes , NaN,NaN ); 
```

错误是：

```
??? Error using ==> set
Invalid handle object.

Error in ==> newplot at 66
set(fig,'nextplot','add');

Error in ==> ParallelPlot>InitializeNewPlot at 37
        plotHandle = plot(hAxes           , NaN,NaN                         );

Error in ==> ParallelPlot>InitializeAllPlotsMatrix at 51
                plotHandle = InitializeNewPlot;

Error in ==> ParallelPlot at 32
InitializeAllPlotsMatrix; 
```

我不知道为什么会发生这个错误，有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:56:25.813

The solution is to set GUI property `nextplot` to be `add`.

![enter image description here](../Images/0e7d4c6f4942f85595b77e8bbed77083.png)

**But the error will be thrown again for future plots !!!**

# vim - 如何更改 vim 自动完成命令的方式？

> ID：14672764
> 
> 赞同：0
> 
> 时间：2013-02-03T13:04:46.433
> 
> 标签：vim

我一直在 vim 中使用 :split，但是我一般从不使用 :spelldump 或 :spell* 。

有没有办法让 :split 成为自动完成时出现的第一个命令 :sp ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:44:21.270

就像我在评论中说的那样，您不需要为这个特定的用例自动完成，`:sp`就可以了。如果你输入了一个不明确的内置命令的一部分，Vim 会优先选择一个命令而不是另一个命令：

*   **`:s`**可以是`:substitute`, `:split`, `:spelldump`, 等等，但对于 Vim 是**`:s[ubstitute]`**
*   **`:sp`**可以是`:split`, `:spelldump`, `:sprevious`, 等等，但对于 Vim 是**`:sp[lit]`**

在帮助中，这在命令的可选部分周围用方括号表示，如上所示。

回答一般性问题：我认为您无法更改 Vim 自动完成命令的方式。您可以定义自己的较短命令（必须为大写），例如`:command! S split`. 或者您可以定义一个映射，例如`:nnoremap \s :split<CR>`. 最后，您可以使用内置的普通模式命令，对于这个特定的用例，它后面只是简单地`Ctrl``W`跟随`S`.

# jquery - jQuery LavaLamp 菜单选择

> ID：14672778
> 
> 赞同：0
> 
> 时间：2013-02-03T13:06:05.823
> 
> 标签：jquery, html, css, lavalamp

我相信你们中的许多人都知道 jQuery LavaLamp：[http ://www.gmarwaha.com/blog/2007/08/23/lavalamp-for-jquery-lovers/](http://www.gmarwaha.com/blog/2007/08/23/lavalamp-for-jquery-lovers/)

我知道如果我想手动选择选择哪个选项，我可以使我的 li 标签的 class="current" ，但他们是我可以根据地址栏中显示的参数选择选择哪个菜单项的一种方式（即 index.html#page-1、#page-2、#page-3...）。

感谢任何可以帮助我的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:46:03.190

您可以将`window.location.hash`用作选择器，如下所示：

```
if ("" != window.location.hash) {
    $(window.location.hash).addClass("current");
} 
```

这应该会给你想要的结果。

# ios - 如何在 UIView 上以全尺寸添加大背景图像？

> ID：14672784
> 
> 赞同：1
> 
> 时间：2013-02-03T13:06:59.143
> 
> 标签：ios, objective-c, uiimage

我有一张高分辨率图像，我想将其用作视图的背景。但是，当我通过 Interface Builder 或以编程方式添加它时，我只看到它的一部分。这无济于事：

```
UIImage* _backGround = [UIImage imageNamed:@"background-clean@2x.png"];
  CGRect _viewFrame = self.view.frame;
 [_backGround drawInRect:_viewFrame];
UIImageView* _backGroundView = [[UIImageView alloc] initWithImage:_backGround];
[self.view addSubview:_backGroundView];
[self.view sendSubviewToBack:_backGroundView]; 
```

这也是：

```
_backGroundView.contentMode =UIViewContentModeScaleAspectFit; 
```

那么问题是如何缩放此图像以使其适合全尺寸的视图，而不管其大小如何？PS对不起我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:47:24.813

我同意 Ali 的观点，在创建视网膜大小的图像时，您还应该缩放它们并将它们的较小版本添加到您的项目中。对于这两个版本，您可以简单地指定图像的全名，而**无需**使用`@2x.png`或`.png`扩展名。

但是，要修复您的实现，您只需要一行额外的代码：

```
UIImage* _backGround = [UIImage imageNamed:@"background-clean"];
UIImageView* _backGroundView = [[UIImageView alloc] initWithImage:_backGround];

_backGroundView.frame = self.view.frame;

[self.view addSubview:_backGroundView];
[self.view sendSubviewToBack:_backGroundView]; 
```

一旦你改变了`frame`的`UIImageView`，它的内容（即你的图像）也会缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T15:37:20.960

引用图像名称时不得包含`@2x`在代码中！

你应该：

*   包括两个文件`Background.png`和`Background@2x.png`你的 Xcode 项目资源，`Background@2x.png`大小（以像素为单位）的两倍`Background.png`
*   但始终将此文件（例如在 中`imageNamed:`）称为`@"Background.png"`，甚至只是`@"Background"`：`[UIImage imageNamed:@"Background"]`

然后 iOS 将自行发挥其魔力，根据设备屏幕是否为 Retina`Background.png`选择正确的图像。`Background@2x.png`

有关详细信息[，请参阅 Apple 文档中的此处](http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/SupportingHiResScreensInViews/SupportingHiResScreensInViews.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-14T16:25:53.410

```
[self.view setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"background-clean"]]]; 
```

# android - 如何检索单个 sqlite 列并将行存储到数组中

> ID：14672785
> 
> 赞同：0
> 
> 时间：2013-02-03T13:07:01.227
> 
> 标签：android, sqlite, android-layout, android-emulator, android-sqlite

我是 android 新手，我使用 Sqlite 将 double 类型的数组存储到名为“KEY_VALUE”的列中

```
public long createEntry(Double rates) { 
    ContentValues cv = new ContentValues();
    cv.put(KEY_VALUE, rates);
    return ourDatabase.insert(TABLE, null, cv);
} 
```

我通过另一个类将数据放入此处的列中

```
for(i=0;i<37;i++){
    entry.createEntry((theRSSHandler.rates()[i]));
    } 
```

现在我想检索我保存的列并将每一行作为一个数组元素，我已经看到并尝试了其他类似的解决方案，但它们没有奏效。这是我用来尝试获取列数据的方法，但它失败了。

```
public Double[] getData() {
    String[] col = {KEY_VALUE}; 
    Cursor c = ourDatabase.query(TABLE, col, KEY_VALUE , null, null, null, null);
    Double[] result = null;

    if(c != null){
        c.moveToFirst();
    }

    int iVal = c.getColumnIndex(KEY_VALUE);

    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        result[c.getPosition()] = c.getDouble(iVal);
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:12:49.440

您正在尝试将值放入尚未初始化的数组中。

```
 Double[] result = null; 
```

需要跟进类似...

```
 result = new Double[100]; 
```

我想你可能想用光标指向的记录数来初始化它

```
 result = new Double[c.count()]; 
```

# android - Android gridview streachmode="columnWidth"，设置item内容以适应视图

> ID：14672786
> 
> 赞同：0
> 
> 时间：2013-02-03T13:07:03.033
> 
> 标签：android, android-gridview

我有一个具有以下属性的 GridView：

```
<GridView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/PhoneImageGrid"
        style="@style/PhotoGridLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:alwaysDrawnWithCache="true"
        android:clipChildren="true"
        android:columnWidth="100dp"
        android:horizontalSpacing="2dp"
        android:numColumns="auto_fit"
        android:padding="4dp"
        android:scrollbars="none"
        android:scrollingCache="true"
        android:smoothScrollbar="true"
        android:stretchMode="columnWidth"
        android:verticalSpacing="4dp" /> 
```

这是网格项目：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/thumbImage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <CheckBox
        android:id="@+id/itemCheckBox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" />

</RelativeLayout> 
```

现在，当我运行应用程序时，我得到了一个 gridview，纵向看起来一切正常，当我将其变为横向时，col 宽度正在更改，但我希望项目的内容也根据新的 col 宽度按比例缩放（item_height = item_width = 新列宽度）。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:06:01.183

设置获取gridview col宽度有点棘手。一个你得到了 col 宽度，你可以将 imageview 高度设置为 col 宽度并通知适配器更改。（取自 android 示例的代码：[https](https://developer.android.com/training/displaying-bitmaps/index.html) ://developer.android.com/training/displaying-bitmaps/index.html ）

以下是测量 col 宽度的方法：

```
imagegrid.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {
                if (imageAdapter.getNumColumns() == 0) {
                    final int numColumns = (int) Math.floor(imagegrid.getWidth()
                            / (mImageThumbSize + mImageThumbSpacing));
                    if (numColumns > 0) {
                        final int columnWidth = (imagegrid.getWidth() / numColumns) - mImageThumbSpacing;
                        imageAdapter.setNumColumns(numColumns);
                        imageAdapter.setItemHeight(columnWidth);

                    }
                }
            }
        }); 
```

在适配器中创建这些方法：

```
public void setNumColumns(int numColumns) {
            mNumColumns = numColumns;
        }

        public int getNumColumns() {
            return mNumColumns;
        }

        public void setItemHeight(int height) {
            if (height == mItemHeight) {
                return;
            }
            mItemHeight = height;
            mImageViewLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, mItemHeight);
            // mImageFetcher.setImageSize(height);
            notifyDataSetChanged();
        } 
```

将初始图像大小设置为：

```
mImageViewLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT,
                        LayoutParams.MATCH_PARENT); 
```

这是完整的适配器类：

```
public class ImageAdapter extends BaseAdapter {
        private LayoutInflater mInflater;
        private int mItemHeight = 0;
        private int mNumColumns = 0;
        private RelativeLayout.LayoutParams mImageViewLayoutParams;

        public ImageAdapter() {
            mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            mImageViewLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT,
                    LayoutParams.MATCH_PARENT);
        }

        public void setNumColumns(int numColumns) {
            mNumColumns = numColumns;
        }

        public int getNumColumns() {
            return mNumColumns;
        }

        public void setItemHeight(int height) {
            if (height == mItemHeight) {
                return;
            }
            mItemHeight = height;
            mImageViewLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, mItemHeight);
            // mImageFetcher.setImageSize(height);
            notifyDataSetChanged();
        }

        public int getCount() {
            return images.size();
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            ViewHolder holder;
            if (convertView == null) {
                holder = new ViewHolder();
                convertView = mInflater.inflate(R.layout.galleryitem, null);
                holder.imageview = (ImageView) convertView.findViewById(R.id.thumbImage);
                holder.checkbox = (CheckBox) convertView.findViewById(R.id.itemCheckBox);

                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }
            ImageItem item = images.get(position);
            holder.imageview.setId(position);

            // holder.imageview.setImageBitmap(item.img);
            holder.imageview.setLayoutParams(mImageViewLayoutParams);

            // Check the height matches our calculated column width
            if (holder.imageview.getLayoutParams().height != mItemHeight) {
                holder.imageview.setLayoutParams(mImageViewLayoutParams);
            }
            holder.imageview.setImageBitmap(item.img);
            holder.checkbox.setChecked(item.selection);
            return convertView;
        }
    } 
```

# c# - 面向对象设计：使用方法参数与属性

> ID：14672791
> 
> 赞同：3
> 
> 时间：2013-02-03T13:07:21.697
> 
> 标签：c#, object-oriented-analysis

在面向对象设计中，以下哪个更好？

使用以下方法发送参数：

```
obj.InsertRecord("raed","1987") 
```

或使用以下属性：

```
obj.name= "raed"
obj.year= "1987"
obj.InsertRecord() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T13:10:11.040

如果您发送参数，则`InsertRecord()`每次`obj`' 的类签名更改时都必须更改签名（例如，如果您添加一个`description`属性），因为您需要保存这些新属性。

此外，对象本身不应该为保存自己而烦恼。那不是对象的责任。所以，像这样的东西是最具前瞻性的：

```
ObjectStorage.InsertRecord(obj); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T13:09:38.370

面向对象编程，这是首选：`obj.InsertRecord("raed", "1987");`

面向组件的编程，后者是首选：像这样：

```
obj.name = "raed";
obj.year = "1987";
obj.InsertRecord(); 
```

顺便说一句，这属于programmers.stackexchange

# mysql - 如果在查询中使用 0x0a 代表什么？

> ID：14672792
> 
> 赞同：0
> 
> 时间：2013-02-03T13:07:23.387
> 
> 标签：mysql

```
‘ union select null,concat(table_name,0x0a,column_name) 

from information_schema.columns where table_name= ‘users’# 
```

我想知道上述语句中的 0x0a 代表什么。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:09:01.907

0x0A 等于十进制 10（十）。这等于 LF（换行）的 ASCII 码，在许多系统上都是换行符。根据您的类型，它是*数字* `10`或*字符*LF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:11:25.687

它将显示 table_name 和表“users”的 column_name 下方，可能针对每一列：

```
users
----------
col1
col2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T13:13:09.313

这都可以从文档中得出。

`CONCAT(table_name,0x0a,column_name)`对于每一行，伪列的结果将是 的值`table_name`，将¹[连接](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)到*换行符*（十六进制² 0x0A，十进制 10 或），连接到 的值。^(*^(`LF``column_name`)*)

 *也就是说，对于每一行数据，您将看到 的值`table_name`，然后在视觉“下方”的一行中：`column_name`

```
+------------+---------------+---------------------------------------+
| table_name |  column_name  |  CONCAT(table_name,0x0a,column_name)  |
+------------+---------------+---------------------------------------+
|     a      |       b       |                   a                   |
|            |               |                   b                   |
+------------+---------------+---------------------------------------+
|     c      |       d       |                   c                   |
|            |               |                   d                   |
+------------+---------------+---------------------------------------+
|     e      |       f       |                   e                   |
|            |               |                   f                   |
+------------+---------------+---------------------------------------+ 
```

只有你可能知道你是否“需要”这个，但它看起来确实不寻常。通常，您只需在结果集中独立包含`table_name`并`column_name`在其他地方进行演示/格式化。

```
SELECT table_name, column_name 
```

此外，对于表中的列，两者的名称都非常令人困惑`table_name`。`column_name`但是，如果您从包含有关其他表的信息的 MySQL 元表中选择数据，则它可能是相关的。

* * *

^(¹ [字符串连接是将两个字符串首尾相连的操作](http://en.wikipedia.org/wiki/Concatenation))

^(² [十六进制（也以 16 为基数或十六进制）是一个位置数字系统，其基数或基数为 16](http://en.wikipedia.org/wiki/Hexadecimal))*

# php - 类似于 json 的 PHP 对象符号生成器

> ID：14672794
> 
> 赞同：1
> 
> 时间：2013-02-03T13:07:42.720
> 
> 标签：php

我在 PHP 中有一些数据结构，我需要将其转储为可以本地解析为 PHP 代码的格式。有没有工具呢？

换句话说，是否有一个 PHP 数据结构格式化程序可以输出 PHP 对象符号代码，一种类似于 JSON 用于 JavaScript 的 PHP 的“PSON”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:26:07.700

使用内置函数[`var_export`](http://www.php.net/manual/en/function.var-export.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T13:10:10.557

有，它被称为序列化：http: [//php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)

# php - MySQL连接查询超过1个id

> ID：14672795
> 
> 赞同：1
> 
> 时间：2013-02-03T13:07:53.857
> 
> 标签：php, mysql, sql, join

因此，当我为 2 个超过 1 个 id 的连接表指定查询时，我遇到了这个问题。

假设有 2 个表：

餐桌**比赛**

*   p1_id(varchar)(FK)
*   p2_id(varchar)(FK)
*   p3_id(varchar)(FK)

桌位**比赛**通过*player.id*引用桌位**玩家**

 *桌上**播放器**

*   身份证（PK）
*   姓名
*   等级
*   性别

问题是**我想检索`p1 name`,`p2 name`并`p3 name`**从表**竞争**...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T13:10:29.377

加入桌面玩家`thrice`以获得它的等效值，

```
SELECT  a.*,
        b.name Player1_Name,
        c.name Player2_Name,
        d.name Player3_Name
FROM    Competition a   
        INNER JOIN player b
            a.p1_ID = b.ID
        INNER JOIN player c
            a.p2_ID = c.ID
        INNER JOIN player d
            a.p3_ID = d.ID 
```

如果表中的一列`competition`可以为*空*`LEFT JOIN`，则比.更好地使用`INNER JOIN`。

要全面了解联接，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)*

# perl - 如何使用perl从文件的一行中删除重复的单词

> ID：14672798
> 
> 赞同：1
> 
> 时间：2013-02-03T13:08:34.487
> 
> 标签：perl

我是 perl 新手，正在为一个相对简单的问题寻找 perl 解决方案。我想使用 perl 从文件的一行中删除重复的单词。网络上的所有示例都处理重复的行，但我正在寻找删除重复的单词。任何帮助是极大的赞赏。

这是我的文件

```
lot=list("XI_PBIAS.mMN_VDD_CAP1_BM" "XIBIAS2.mNCS_BIAS_BM" "XIBIAS2.mNCS_BIAS_BM"          "XIBIAS1.mNCS_PCAS_BIAS_BM" "XIBIAS1.mNCS_PCAS_BIAS_BM" "XI_PBIAS.mNCS_PCS_BIAS_BM" )
filename  = "tx_dac_bias_tb"
openResults(strcat(filename ".raw")) 
```

我想要字符串`"XIBIAS2.mNCS_BIAS_BM"`并且`"XIBIAS1.mNCS_PCAS_BIAS_BM"`只出现一次。如何逐字而不是逐行读取文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T13:10:42.510

逐行读取文件，然后将其拆分为单词。

```
while (<>) {
   chomp;
   my @words = split;
   ...
} 
```

[perlfaq4](http://perldoc.perl.org/perlfaq4.html)中回答了如何删除重复项。

```
my %seen;
my @unique = grep { ! $seen{$_}++ } @words; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T13:47:23.010

这显示了如何使用[`Text::ParseWords`](http://search.cpan.org/perldoc?Text%3a%3aParseWords)（perl 5 中的核心模块）来解析括号内的引用字符串。请注意，这不会保留原始空格。您还必须指定要匹配的行类型，因为似乎并非输入中的所有行都应该进行重复数据删除。

```
use strict;
use warnings;
use Text::ParseWords;

sub uniq {
    my %seen;
    grep { not $seen{$_}++ } @_;
}

while (<DATA>) {
    chomp;
    if (/^(.+=\s*list\()(.*)(\).*)$/) {
        my ($pre, $line, $post) = ($1, $2, $3);    # split into fields
        my @list = quotewords('\s+', 1, $line);    # find quoted strings
        @list = uniq(grep defined, @list);         # dedupe, remove empty
        $_ = "$pre@list$post";                     # join the line back up
    }
    print "$_\n";
}

__DATA__
lot=list("XI_PBIAS.mMN_VDD_CAP1_BM" "XIBIAS2.mNCS_BIAS_BM" "XIBIAS2.mNCS_BIAS_BM"          "XIBIAS1.mNCS_PCAS_BIAS_BM" "XIBIAS1.mNCS_PCAS_BIAS_BM" "XI_PBIAS.mNCS_PCS_BIAS_BM" )
filename  = "tx_dac_bias_tb"
openResults(strcat(filename ".raw")) 
```

要在输入文件上使用，请替换`<DATA>`为`<>`并使用如下：

```
perl script.pl input.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-24T08:42:34.947

试试这个 Perl 正则表达式 s/(.*)\1/$1/g

# php - 将 ID 放在返回函数之前

> ID：14672800
> 
> 赞同：0
> 
> 时间：2013-02-03T13:08:37.137
> 
> 标签：php, mysql, mysqli

在下面的代码中，我将功能从 MYSQL 升级到 MYSQLI，我在以前的帖子中得到了一些帮助，他们说应该做什么.. 但现在问题来了怎么做..

事情是在`id`之前设置，否则无论我登录哪个帐户`return`，我仍然会收到用户。`ID = 1`

```
function user_id_from_username($username) {
    $username = sanitize($username);
    global $db_connect;

    $result = $db_connect->query("SELECT(id) FROM members WHERE username = '$username'");
    if (false === $result) {
        return false;
    }
    return ($result->num_rows == 1) ? id : false; 
```

我尝试按照旧`MYSQL`代码中的方式进行操作，但随后出现错误。我的旧代码：

```
 function user_id_from_username($username){
    $username = sanitize ($username);
    return mysql_result(mysql_query("SELECT(id) FROM members WHERE username = '$username'"), 0, 'id');
} 
```

如果有任何帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:19:11.507

你试过了吗`fetch_array`？`mysqli_fetch_array`

```
$row = $result->fetch_array(MYSQLI_ASSOC);
// or
$row = mysqli_fetch_array($result, MYSQLI_ASSOC);

// and returning
return $row['id'] ? $row['id'] : false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:37:26.193

我没有尝试过，但这应该可以正常工作吗？我还将 $db_connect 作为参数，因为它更安全，但取决于您。

```
function user_id_from_username($username) {
    $username = sanitize($username);
    global $db_connect;
    $result = $db_connect->query("SELECT id FROM members WHERE username = '".$db_connect->real_escape_string($username)."'");
    if (!$result) {
        return false;
    }
    if($result->num_rows == 1){
        $row = $result->fetch_assoc();
        $output = $row['id'];
    }
    else{
        $output = "Username does not exist in table or is a duplicate.";
    }
    return $output;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-03T13:21:54.730

```
return ($result->num_rows == 1) ? id : false; 
```

应该

```
if(mysqli_num_rows($result) ===1 ){
    $row = mysqli_fetch_assoc($result);
    return intval($row['id']);
}
return false; 
```

# c - 使用 gcc -Wall 的 C 给出了一个数组下标类型为 'char' 的错误

> ID：14672801
> 
> 赞同：2
> 
> 时间：2013-02-03T13:08:39.963
> 
> 标签：c, gcc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:20:04.187

Try changing this:

`if (isdigit(input[0]))`

to:

`if (isdigit((unsigned char)input[0]))`

or

`if (isdigit((int)input[0]))`

for more details see similar question: [array subscript has type 'char'](https://stackoverflow.com/questions/10186219/array-subscript-has-type-char)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T13:21:05.697

This means that the index for the array can be negative.

This can be a problem as a char could represent a signed value, and you may be requesting a negative index.

# android - 在android中更改listview的卡车颜色

> ID：14672804
> 
> 赞同：0
> 
> 时间：2013-02-03T13:09:18.577
> 
> 标签：android, listview, scroll, scrollbar

我不确定它是否在 Java 世界中被称为卡车，但我一直将滚动条大小的东西称为卡车。随着列表中有更多项目，右侧的那个位会变小，并且相对于当前滚动位置保持不变。卡车？正确的？

好吧，不管它叫什么，有谁知道如何将它从白色更改为另一种颜色。我有一个带有绿色文本的列表，实际上我所有的控件都是黑色背景上的绿色。它看起来非常有活力和乐趣。但是对于“卡车”；它仍然是白色的。

有谁知道如何改变卡车的颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:15:31.350

> 只需执行 android:scrollbarThumbVertical="@drawable/scrollbar_vertical_thumb" 并让 scrollbar_vertical_thumb 成为渐变

参考[这个](https://stackoverflow.com/questions/3071068/change-scrollbar-color-in-android)

# asp.net - SQLite 访问被拒绝 - 在本地工作但不公开

> ID：14672816
> 
> 赞同：0
> 
> 时间：2013-02-03T13:10:30.793
> 
> 标签：asp.net, sqlite, subsonic, system.data.sqlite, spatialite

当我访问我的 ASP.Net IIS 站点 (W2K3) 时，我收到以下错误：

`SQLite error Access is denied.`

`[SQLiteException (0x80004005): SQLite error Access is denied.]`

当我打电话时会发生这种情况：

`Object retVal = new System.Data.SQLite.SQLiteCommand("SELECT load_extension('libspatialite-4.dll');", conn).ExecuteScalar();`

当我使用 Visual Studio 时，一切正常。

所以在那种情况下，我可以排除任何 dll 问题。所有非空间 SQLIte 查询也可以在 IIS 和 Visual Studio 中正常工作。

我确定我必须在某处设置权限设置，但在哪里和什么用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:38:29.313

听起来 Spatiallite 文件夹在*您的*路径中，而不是在*系统*路径中。还要仔细检查用于 IIS 的用户 ID。它可能与 ASP.NET 不同。

如果这不起作用，请尝试使用进程监视器在服务器上进行监控[http://technet.microsoft.com/en-us/sysinternals/bb896645](http://technet.microsoft.com/en-us/sysinternals/bb896645)注意权限被拒绝错误，您应该走上正确的道路。

# javascript - javascript数组到多维数组

> ID：14672822
> 
> 赞同：0
> 
> 时间：2013-02-03T13:11:00.150
> 
> 标签：javascript, google-apps-script

我有一个跟随这个线程的问题。它是对这个答案的跟进。

[Google Apps 脚本电子表格 - 将数组写入单元格](https://stackoverflow.com/questions/11495588/google-apps-script-spreadsheets-write-array-to-cells)

如何得到

```
var employees=["Adam","Barb","Chris"]; 
```

看起来像这样？

```
var employees=[["Adam"],["Barb"],["Chris"]]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T13:12:48.047

你可以使用[`map()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)：

```
var employees=["Adam","Barb","Chris"];

var newEmployees = employees.map( function( item ){ return [ item ]; } ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T13:12:59.897

```
var employees = ["Adam", "Barb", "Chris"];

for (var i = employees.length; i--;) {
    employees[i] = [employees[i]];
} 
```

# macos - Xcode OS/X：如何在表格视图中显示核心数据获取请求的结果

> ID：14672823
> 
> 赞同：0
> 
> 时间：2013-02-03T13:11:00.393
> 
> 标签：macos, core-data, nstableview

我对写入数组的托管对象上下文执行获取请求。fetch 本身运行良好，并且数组已正确填充。但是，当我尝试在（基于单元格的）表格视图中显示数组内容时，没有显示任何内容。设置如下：

*   内容数组绑定到文件`NSArrayControllers`所有者结果数组（据我所知，它充满了`NSManagedObject`对象）。在这里，我尝试了实体和类模式。
*   表视图内容绑定到阵列控制器排列的对象。
*   表列值使用控制器键绑定到数组控制器：排列对象，模型键路径：属性名称（在数据模型中定义）。

我还`NSManagedObject`为我的对象创建了一个子类，以便在类模式下访问绑定的属性。

以上都没有用获取请求的结果填充表视图。那么，任何人都可以帮助我正确解决这个问题吗？谢谢！

根据要求，这里是 fetch 方法的代码（其他一切都在 Interface Builder 中完成）：

```
- (IBAction)fetch:(id)sender {

NSLog(@"Performing fetch.");

NSManagedObjectContext *moc = [self managedObjectContext];

// Connecting entity
NSEntityDescription *entityDescription = [NSEntityDescription
                                          entityForName:@"Operation"
                                          inManagedObjectContext:moc];

//Creating fetch request
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entityDescription];

// Set predicate for fetch request
float maxDurationInMinutes = [durationFetchInput floatValue];
NSPredicate *predicate = [NSPredicate predicateWithFormat:
                          @"(durationInMinutes >= %f)", maxDurationInMinutes];
[request setPredicate:predicate];

//Set sort ordering for fetch request
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
                                    initWithKey:@"durationInMinutes" ascending:YES];
[request setSortDescriptors:@[sortDescriptor]];

NSError *error;
NSArray *array = [moc executeFetchRequest:request error:&error];
fetchReturnArray = [[NSArray alloc] initWithArray:array];

[objectsCountOutput setIntegerValue:[fetchReturnArray count]];
if (array == nil)
{
    NSLog(@"Error fetching...");
}
NSLog(@"%@",fetchReturnArray);
} 
```

# java - 2 Java GeneralPath 之间的带状线

> ID：14672826
> 
> 赞同：1
> 
> 时间：2013-02-03T13:11:25.983
> 
> 标签：java, geometry, computational-geometry

谁能给我一个提示或帮助我解决以下问题（希望也很有趣:-)）问题。

我的 JavaProgramm 中有 2 个 GeneralPath，我想找出它们之间的带状线。

以下情况：

我有 2 个 GeneralPath A 和 B

A 是一个带有 3 个点的黄色三角形（ moveto、lineto、lineto、close ）

B（红色）是一个三角形，是减法 BA 的结果：

```
B = new Area(gp_B); // General path B area object
A = new Area(gp_A); // General path A area object
B.subtract(A); 
```

B 减法后得 4 分。所以 A & B 和 GeneralPath 之间不再有交集，并且 A 没有任何点与 GeneralPath B 的任何点匹配。

![在此处输入图像描述](../Images/5a2ad4d62169fbac999b870da476b42c.png)

我怎样才能找出它们之间的带状线？

为了更好地解释，我的例子被简化了。我的 GeneralPath A & B 也可以包含带有 Cubeto 的 Beziercurves：

![在此处输入图像描述](../Images/47a58cfaa58ffa9781b76047e43171dc.png)

问候安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:38:21.387

我怀疑您是否会得到想要的答案，所以我首先给您一些提示以限制您的任务的复杂性：

我会将您的任务简化为所谓的简单多边形。那是非自相交的多边形。一旦可行，您可以尝试扩展到贝塞尔路径。
要完成一般路径的任务，这是非常苛刻的（这是您有 6 个月工作时间的硕士论文，还是客户愿意支付费用的 CAD 系统？）

如果您仍然想这样做：
开始手绘最复杂的场景：完全重叠（如木制十字架）。

那么谁做减法呢？准备好工作了吗？减法有哪些限制（简单多边形与非简单多边形）

**一种可能性**：

获取减法的源代码，尝试理解并扩展执行切割的部分，使其返回额外的条带路径。

**另一种解决方案：**

A1：将旧物体与切割后的点进行比较。确定新引入的点。跟随路径上的一点，直到到达旧点。在另一个方向上也这样做。连接两个方向。

对所有新点都这样做，最后你会得到一个条纹列表，可能你必须通过删除重复线来清理。

# asp.net-mvc - 在 Telerik asp.net mvc 网格中获取列值

> ID：14672827
> 
> 赞同：2
> 
> 时间：2013-02-03T13:11:32.450
> 
> 标签：asp.net-mvc, telerik

我想从 Javascript 函数中的 Telerik mvc 网格中获取行 [0] 的列 [0] 的值。我想知道怎么做？

```
 @{
    Html.Telerik().Grid<StationEvaluation>().Name("ManagementGrid")
    .DataKeys(dataKeys => dataKeys.Add(o => o.StationEvaluationID)).Groupable().
    Filterable().Pageable().Sortable().Localizable("fa-IR").
    DataBinding(dataBinding => dataBinding.Ajax()

            ...
            columns.Bound(o => o.StationEvaluationId);
            ...
    }

<script type="text/javascript">
function MyFunction()
{
// I want to get the value here!
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:48:04.650

还有更简单的方法可以做到这一点。

所有 Telerik MVC 小部件都有明确的客户端 API。这是 Grd-Client Side API 文档的链接：

[http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html)

您正在寻找的是一种访问绑定到行的基础数据项的方法。网格客户端 API 公开了网格的 dataItem 属性。

假设您想要将底层数据对象绑定到第一行 - 您将编写以下代码来访问它：

```
var grid = $("#<ID of the Grid").data("tGrid");
// get the first table row
var tr = $("#Grid tbody tr:eq(1)"); // use eq(1) if the grid is scrollable or eq(0) if not to get the first row
// get the associated data item
var dataItem = grid.dataItem(tr); 
```

现在 dataItem 代表底层数据对象。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:34:16.687

我找到了答案：

```
var mastergrid = $('#ManagementGrid');
var mypreciousvalue = mastergrid[0].childNodes[2].childNodes[2].childNodes[0].childNodes[0].innerText; 
```

网格的渲染 HTML 是这样的：

```
<div class="t-widget t-grid" id="ManagementGrid">
  <div class=t-toolbar t-grid-toolbar t-grid-top">
       ...</div>
  <div class="t-grouping-header">
       ...</div>
  <table cellspacing="0">
      <colgroup>...</colgroup>
      <thead class="t-grid-header">...</thead>
      <tbody>
         <tr>
            <td> **MY PRECIOUS VALUE** <td>
            ...(other cells)
         </tr>
         ... (other rows)
      </tbody>
  <div class="t-grid-pager t-grid-bottom">
       ...</div>
 </div> 
```

# javascript - 在html表单焦点和模糊上显示/隐藏div？

> ID：14672831
> 
> 赞同：1
> 
> 时间：2013-02-03T13:11:49.970
> 
> 标签：javascript

当用户单击 html 表单输入“文本”（焦点）然后隐藏模糊时，我试图显示一个 div。

它可以工作，但由于某种原因，div 在用户点击文本输入字段之前就显示出来了。我试图让它只在用户专注于文本字段时显示，并在他们点击它时隐藏？

有人可以告诉我哪里出错了吗？谢谢

```
<script>
    $(".infobox-profile").hide();

    $("#text").focusin(function() {
        $(".infobox-profile").show();
    }).focusout(function () {
        $(".infobox-profile").hide();
    });
    </script>

    <div class="infobox-profile">hello</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:14:06.243

将您的代码放入`$(function() { ... }`

```
<script>
$(function() {
    $(".infobox-profile").hide();

    $("#text").focusin(function() {
        $(".infobox-profile").show();
    }).focusout(function () {
        $(".infobox-profile").hide();
    });
});
</script> 
```

您的 JavaScript 可能`infobox-profile`在 DOM 的一部分之前执行。

## 工作示例

[http://jsfiddle.net/bikeshedder/KxMcy/](http://jsfiddle.net/bikeshedder/KxMcy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:20:17.153

就个人而言，我不会在使用 JS 加载时隐藏它，你可以在你的 css 中添加`display: none;`属性。`.infobox-profile`就像bikeshedder说的。把你的代码放进去`$(function(){ INHERE });`

# time - FreeBSD 监狱中的时间每小时都在“跳跃”

> ID：14672832
> 
> 赞同：1
> 
> 时间：2013-02-03T13:11:51.217
> 
> 标签：time, timezone, freebsd, jail

我无法在 FreeBSD JAIL 中解决我的时间问题 :(

我已经正确设置了我的时区。

我已经评论了这一行：

```
#1,31   0-5     *       *       *       root    adjkerntz -a 
```

这是我的 cron 日志：

```
Feb  3 12:15:00 blahblah /usr/sbin/cron[87637]: (root) CMD (/usr/libexec/atrun)
Feb  3 14:15:00 blahblah /usr/sbin/cron[87662]: (root) CMD (/usr/libexec/atrun)
Feb  3 12:20:00 blahblah /usr/sbin/cron[87697]: (root) CMD (/usr/libexec/atrun)
Feb  3 14:20:00 blahblah /usr/sbin/cron[87710]: (root) CMD (/usr/libexec/atrun)
Feb  3 12:22:00 blahblah /usr/sbin/cron[87727]: (operator) CMD (/usr/libexec/save-entropy)
Feb  3 14:22:00 blahblah /usr/sbin/cron[87763]: (operator) CMD (/usr/libexec/save-entropy)
Feb  3 12:25:00 blahblah /usr/sbin/cron[87795]: (root) CMD (/usr/libexec/atrun)
Feb  3 14:25:00 blahblah /usr/sbin/cron[87799]: (root) CMD (/usr/libexec/atrun)
Feb  3 12:30:00 blahblah /usr/sbin/cron[87832]: (root) CMD (/usr/libexec/atrun)
Feb  3 14:30:00 blahblah /usr/sbin/cron[87863]: (root) CMD (/usr/libexec/atrun)
Feb  3 12:33:00 blahblah /usr/sbin/cron[87884]: (operator) CMD (/usr/libexec/save-entropy)
Feb  3 14:33:00 blahblah /usr/sbin/cron[87919]: (operator) CMD (/usr/libexec/save-entropy)
Feb  3 12:35:00 blahblah /usr/sbin/cron[87938]: (root) CMD (/usr/libexec/atrun)
Feb  3 14:35:00 blahblah /usr/sbin/cron[87948]: (root) CMD (/usr/libexec/atrun)
Feb  3 12:40:00 blahblah /usr/sbin/cron[88003]: (root) CMD (/usr/libexec/atrun)
Feb  3 14:40:00 blahblah /usr/sbin/cron[88017]: (root) CMD (/usr/libexec/atrun)
Feb  3 12:44:00 blahblah /usr/sbin/cron[88052]: (operator) CMD (/usr/libexec/save-entropy)
Feb  3 14:44:00 blahblah /usr/sbin/cron[88088]: (operator) CMD (/usr/libexec/save-entropy)
Feb  3 12:45:00 blahblah /usr/sbin/cron[88103]: (root) CMD (/usr/libexec/atrun)
Feb  3 14:45:00 blahblah /usr/sbin/cron[88128]: (root) CMD (/usr/libexec/atrun)
Feb  3 12:50:00 blahblah /usr/sbin/cron[88159]: (root) CMD (/usr/libexec/atrun)
Feb  3 14:50:00 blahblah /usr/sbin/cron[88172]: (root) CMD (/usr/libexec/atrun)
Feb  3 12:55:00 blahblah /usr/sbin/cron[88208]: (root) CMD (/usr/libexec/atrun)
Feb  3 12:55:00 blahblah /usr/sbin/cron[88207]: (operator) CMD (/usr/libexec/save-entropy)
Feb  3 14:55:00 blahblah /usr/sbin/cron[88253]: (operator) CMD (/usr/libexec/save-entropy)
Feb  3 14:55:00 blahblah /usr/sbin/cron[88254]: (root) CMD (/usr/libexec/atrun)
Feb  3 13:00:00 blahblah /usr/sbin/cron[88293]: (operator) CMD (/usr/libexec/save-entropy)
Feb  3 13:00:00 blahblah /usr/sbin/cron[88292]: (root) CMD (newsyslog)
Feb  3 13:00:00 blahblah /usr/sbin/cron[88294]: (root) CMD (/usr/libexec/atrun) 
```

# javascript - 谷歌地图 api(v3) 不显示标记

> ID：14672834
> 
> 赞同：0
> 
> 时间：2013-02-03T13:12:30.983
> 
> 标签：javascript, google-maps-api-3

我正在使用谷歌地图 api(v3)，我必须在地图上添加标记。实际上，我在显示它们或其他方面没有问题，但过了一段时间标记开始不显示或更准确地说，它们不时显示。

这是一些代码，因此您可以看到我在做什么以及问题可能来自哪里：

```
<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <link rel="stylesheet" href="style.css" type="text/css" media="screen" />

        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=[KEY]&sensor=true"></script>
        <script type="text/javascript" src="google.js"></script>
        <script type="text/javascript" src="dataLoading.js"></script>
    </head>
    <body onload="initializeMaps();">
        <div id="map_canvas"></div>
        <script type="text/javascript">
            loadSpots();
        </script>
    </body>
</html> 
```

这是javascript代码：

```
var map;
var yMarker = 'http://maps.google.com/mapfiles/ms/icons/yellow-dot.png';
var gMarker = 'http://maps.google.com/mapfiles/ms/icons/green-dot.png';
var bMarker = 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png';
var pMarker = 'http://maps.google.com/mapfiles/ms/icons/pink-dot.png';

function initializeMaps()
{
    geocoder = new google.maps.Geocoder();
var mapOptions =
{
    center: new google.maps.LatLng(46.52863469527167, 2.4389648437),
    zoom: 6,
    mapTypeId: google.maps.MapTypeId.ROADMAP
};
map = new google.maps.Map(document.getElementById("map_canvas"),
    mapOptions);
}

function getLatlng(address, name, type)
{
geocoder.geocode({'address': address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK)
    {
        var marker = new google.maps.Marker({
            title: name,
            map: map,
            animation: google.maps.Animation.DROP,
            position: results[0].geometry.location
        });
        marker.setIcon((type == 2 ? gMarker : (type == 3 ? bMarker : (type == 4 ? pMarker : yMarker))));
    }
});
}

function addMarker(address, name, type)
{
if (address != null && address != "")
    getLatlng(address, name, type);
} 
```

**编辑1**

LoadSpots() 是一个函数，它通过 ajax 请求从 DB 获取数据，然后调用 addMarker 函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:22:28.997

`loadSpots()`在 结束时调用`initializeMaps()`，否则可能会`map`在初始化之前被访问。

# playframework-2.0 - playorm for cassandra 和 play framework2.0.4

> ID：14672835
> 
> 赞同：1
> 
> 时间：2013-02-03T13:12:36.910
> 
> 标签：playframework-2.0, cassandra, playorm

我尝试了将 cassandra1.1.9 与 play framework2.0.4 连接的[https://github.com/deanhiller/playorm/wiki/PlayFramework-2.x-support](https://github.com/deanhiller/playorm/wiki/PlayFramework-2.x-support)示例。但是当我添加

`*   nosql.nosqltype=cassandra*   nosql.cassandra.clusterName=Test Cluster*   nosql.cassandra.keyspace=iyte*   nosql.cassandra.seeds=a:9160,b:9160,c:9160`

我得到了错误，无法修复。
`Expecting end of input or a comma, got ':' if you intended ':' to be part of the value for 'nosql.cassandra.seeds', try enclosing the value in double quotes, or you may be able to rename the file .properties rather than .conf`
我在 input\libexclude 中添加了 playorm-1.4.4 和其他 3 个 jar，从 application.conf 中删除了 nosql.cassandra.seeds=a:9160,b:9160,c:9160。这是错误
`! Internal server error, for request [GET /] ->`

`sbt.PlayExceptions$CompilationException: Compilation error [value Context is not a member of object play.mvc.Http] at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$4$$anonfun$apply$12$$anonfun$apply$13.apply(PlayReloader.scala:236) ~[na:na] at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$4$$anonfun$apply$12$$anonfun$apply$13.apply(PlayReloader.scala:236) ~[na:na] at scala.Option.map(Option.scala:133) ~[scala-library.jar:0.11.3] at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$4$$anonfun$apply$12.apply(PlayReloader.scala:236) ~[na:na] at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$4$$anonfun$apply$12.apply(PlayReloader.scala:233) ~[na:na] at scala.Option.map(Option.scala:133) ~[scala-library.jar:0.11.3] at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$4.apply(PlayReloader.scala:233) ~[na:na] at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$4.apply(PlayReloader.scala:231) ~[na:na] at scala.Either$LeftProjection.map(Either.scala:183) ~[scala-library.jar:0.11.3] at sbt.PlayReloader$$anon$2$$anonfun$reload$3.apply(PlayReloader.scala:231) ~[na:na] at sbt.PlayReloader$$anon$2$$anonfun$reload$3.apply(PlayReloader.scala:226) ~[na:na] at scala.Option.getOrElse(Option.scala:108) ~[scala-library.jar:0.11.3] at sbt.PlayReloader$$anon$2.reload(PlayReloader.scala:226) ~[na:na] at play.core.ReloadableApplication$$anonfun$get$1.apply(ApplicationProvider.scala:110) ~[play_2.9.1.jar:2.0.4] at play.core.ReloadableApplication$$anonfun$get$1.apply(ApplicationProvider.scala:110) ~[play_2.9.1.jar:2.0.4] at akka.dispatch.Future$$anon$3.liftedTree1$1(Future.scala:195) ~[akka-actor.jar:2.0.2] at akka.dispatch.Future$$anon$3.run(Future.scala:194) ~[akka-actor.jar:2.0.2] at akka.dispatch.TaskInvocation.run(AbstractDispatcher.scala:94) ~[akka-actor.jar:2.0.2] at akka.jsr166y.ForkJoinTask$AdaptedRunnableAction.exec(ForkJoinTask.java:1381) ~[akka-actor.jar:2.0.2] at akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259) ~[akka-actor.jar:2.0.2] at akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:975) ~[akka-actor.jar:2.0.2] at akka.jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1479) ~[akka-actor.jar:2.0.2] at akka.jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104) ~[akka-actor.jar:2.0.2]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:52:18.567

我的坏，我给种子如下：

```
nosql.cassandra.seeds= "localhost:9160" 
```

因为 application.conf 中的其他默认属性用双引号给出。请在您的应用程序中将种子定义为

```
nosql.cassandra.seeds="a:9160,b:9160,c:9160" 
```

如果您仍然遇到问题，请告诉我们。

所以，问题确实出在 wiki 上，我没有从我的测试应用程序中复制属性，而是从 play1 插件中获取了整个文本。我会更新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T17:07:42.023

有趣的是，我在 2 个客户端上使用带有 1.2.x 的 playorm，但不使用 play 2.0 插件，并且在 application.conf 中有这个确切的设置，我猜你从 astyanax 那里得到了那个例外？（因为此时不涉及 casssandra）。我会让 vikas（写它的人）在他在的星期一看这个。

您可以将异常堆栈跟踪粘贴到那里吗？

谢谢，院长

# jquery - 重定向后不包括 jquery(primefaces)

> ID：14672836
> 
> 赞同：2
> 
> 时间：2013-02-03T13:12:41.037
> 
> 标签：jquery, jsf, redirect, primefaces, defined

我是 primefaces 的新手，并尝试用 jsf 实现一个简单的网络应用程序。在这个应用程序中，我有一个 login.xhtml，用户可以在其中输入姓名和密码。如果登录成功，我的 LoginBean 类会将他重定向到文件夹 basicSites 中名为 index.xhtml 的另一个页面。在 login.xhtml 上一切正常，在 index.xhtml 上发生错误。重定向到该站点后，我只看到一个白色站点，并且浏览器控制台告诉我存在引用错误，因为未定义 jQuery。我研究了许多其他有类似问题的文章，但我的问题仍然没有解决。

以下是一些代码片段，以便更好地理解。

登录.xhtml

```
<h:head>
    <title>Zugangsverwaltung | Login</title>
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/default.css" />
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/syntax.css" />
    <script type="text/javascript" href="#{request.contextPath}/scripts.js"/>
</h:head>

<h:body>
    <script type="text/javascript"> 
        jQuery(document).ready(function () {
            jQuery('#logoutLink').fadeOut();
        });
        function handleLoginRequest(xhr, status, args) { 
            if(args.validationFailed || !args.loggedIn) {  
                jQuery('#dialog').effect("shake", { times:3 }, 100);  
            } else {  
                dlg.hide();  
                jQuery('#loginLink').fadeOut(0); 
                jQuery('#logoutLink').fadeIn();
            }  

        } </script> 
```

登录Bean.java

```
public void login(ActionEvent actionEvent) {
    RequestContext context = RequestContext.getCurrentInstance();
    FacesMessage msg = null;
    boolean loggedIn = false;

    FacesContext ctx = FacesContext.getCurrentInstance();
    HttpServletRequest request = (HttpServletRequest) ctx.getExternalContext().getRequest();

    try {
        request.login(username, password);
        loggedIn = true;
        msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Willkommen", username);
        FacesContext.getCurrentInstance().addMessage("global", msg);
    } catch (ServletException e) {
        loggedIn = false;
        msg = new FacesMessage(FacesMessage.SEVERITY_WARN, "Login fehlgeschlagen!", "Invalid credentials");
        FacesContext.getCurrentInstance().addMessage("local", msg);
    }

    try {
        if (loggedIn) {
            ExternalContext ectx = ctx.getExternalContext();
            ectx.redirect(request.getContextPath() + "/basicSites/index.xhtml");
        }
    } catch (Exception e) {
        System.out.println("LoginBean - login: " + e.getMessage());
    } 
```

并且至少是发生错误的 index.xhtml：

```
<h:head>
    <title>Zugriffsverwaltung | Backend</title>
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/default.css" />
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/syntax.css" />
    <script type="text/javascript" href="#{request.contextPath}/scripts.js" />
</h:head>

<h:body>
    <script type="text/javascript"> 
        jQuery(document).ready(function () { <!-- Here: JQuery is not definded --> 
            jQuery('#logoutLink').fadeOut();
        });</script>

    <p:layout fullPage="true" >
        <p:layoutUnit id="center" position="center"> <!-- ... --> 
```

我希望任何人都知道现在该做什么；）我很感激每一个帮助我解决问题的提示。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T15:11:08.363

尝试添加`xmlns:p="http://primefaces.org/ui"`到您的页面

如果上述方法没有帮助：

您还可以添加

```
<h:outputScript library="primefaces" name="jquery/jquery.js" target="head" /> 
```

对你`<h:head>`来说，这应该包括与 primefacs 捆绑的 jQuery

# c++ - 如何从 Windows 中的 Image 对象中获取像素信息？

> ID：14672842
> 
> 赞同：0
> 
> 时间：2013-02-03T13:12:54.647
> 
> 标签：c++, windows, visual-studio-2010, image, pixels

我有一个来自 Windows Image Class 的 Image 对象，我想获取有关特定像素的信息。

例如，如果我有：

```
Image* myImage = Image::FromFile(L"example.jpg"); 
```

我想这样称呼：

```
myImage->GetPixel(400,400).red; 
```

这应该告诉我坐标 400x400 处像素的红色值。

但是没有这样的方法，或者至少我找不到它。只有一种获取像素格式的方法，这对我没有帮助。

如何获取有关特定像素的信息？

有关课程的更多信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms534462 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms534462(v=vs.85).aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:45:38.007

使用文件或流来创建 Bitmap 对象：

```
Bitmap *myBitmap = new Bitmap("example.jpg");
Color pixelColor;
myBitmap->GetPixel(400, 400, &pixelColor);
cout<<(int)pixelColor.GetRed()<<endl; 
```

# php - Codeigniter 活动记录/仅更新表中的一行

> ID：14672845
> 
> 赞同：0
> 
> 时间：2013-02-03T13:13:05.350
> 
> 标签：php, codeigniter

大家好，我有以下模型，其中包含我需要更新的字段：

```
public function admin_add_review( $review = array()){

            $data = array(

                'title' => $review['title'],
                'description' => $review['description'],
                'category' => $review['category']
            );

            $query = $this->db->update('reviews', $data);

                if( $query){
                    return true;
                }else{
                    return false;
                }

    } 
```

和下面的控制器，这里我只是将数据发送到视图。

```
public function admin_validation()
    {
        $this->load->library('form_validation');
        $this->load->model('model_users');

        $review['title'] = $this->input->post('title');
        $review['description'] = $this->input->post('description');
        $review['category'] = $this->input->post('category');
        $this->model_users->admin_add_review( $review );

        $this->load->view('admin_page', $review);

    } 
```

和以下观点。这是一个表格，其中包含从控制器获取的数据，当我更新此数据时，它会使用内部相同的描述更新孔表。

```
<?php   
                            $review = $review[0];

                            echo form_open_multipart('main/admin_validation');

                            echo validation_errors();

                            /*echo "<p> Id review</p>";
                            $data = array(
                                "name" => "id",
                                 "value" => $review['id']
                            );
                            echo form_input($data);*/ 

                            echo "<h3>Title: ";                            
                            echo "</h3>";

                            $data = array(
                                "name" => "title",
                                 "id" => "title-input",
                                 "value" => $review['title']
                            );
                            echo form_input($data);

                            echo "<h3>Category: ";                            
                            echo "</h3>";
                            $data = array(
                                "name" => "category",
                                 "id" => "category-input",
                                 "value" => $review['category']

                            );  

                            echo form_input($data);

                            echo "<h3>Description: ";
                            echo "</h3>";
                            $data = array(
                              "name" => "description",
                              "id" => "description",
                              "value" => $review['description']

                            );

                            echo form_textarea($data);

                            echo "<br/>";
                            echo "<br/>";

                            echo form_submit('login_submit', 'Update review.');
                            echo form_close();              
            ?> 

     When i press the update button it updates all my database table rows! and i just want only the specified one to be updated. Help please. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T13:54:27.177

If you want to update existing records from the database, you need to pass a where clause to your php function like:

```
public function admin_add_review($value, $review = array()){

            $data = array(

                'title' => $review['title'],
                'description' => $review['description'],
                'category' => $review['category']
            );

            $this->db->where('key', $value);
            $query = $this->db->update('reviews', $data);

                if( $query){
                    return true;
                }else{
                    return false;
                }

    } 
```

So the $value criteria could be an id of existing review like review_id or anything else.

Event better:

```
$query = $this->db->update('reviews', $data, array('review_id' => $value));
//$query = $this->db->update(TABLE, NEW_DATA, CRITERIA); 
```

So if your criteria matches 1 row in table, then only 1 row will be updated.

# vb.net - 发送文件到我的网站

> ID：14672847
> 
> 赞同：0
> 
> 时间：2013-02-03T13:13:08.633
> 
> 标签：vb.net, ftp

我正在尝试通过 VB.NET 中的 FTP 发送文件。

我有 3 个带有服务器密码和用户信息的标签，以及一个带有文件位置的文本框，`txtFile`我`Textbox 1`的文件名是新的。

我点击发送，但它没有出现在我的网站上？

```
My.Computer.Network.UploadFile(txtFile.Text, 
                               ServLabel.Text & TextBox1.Text, 
                               PassLabel.Text, 
                               UserLabel.Text) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:25:31.127

根据; [http://msdn.microsoft.com/en-us/library/dfkdh7eb(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/dfkdh7eb(v=vs.90).aspx)

您交换了用户名和密码；

```
Public Sub UploadFile( _
   ByVal sourceFileName As String, _
   ByVal address As String, _
   ByVal userName As String, _
   ByVal password As String _
) 
```

并且应该这样做；

```
My.Computer.Network.UploadFile(txtFile.Text, 
                               ServLabel.Text & TextBox1.Text, 
                               UserLabel.Text,
                               PassLabel.Text) 
```

此外，请确保您的服务器地址和文件名之间有必要的路径分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:22:31.037

您可以使用 FtpWebRequest 类。这是一个示例：http: [//msdn.microsoft.com/en-us/library/ms229715.aspx](http://msdn.microsoft.com/en-us/library/ms229715.aspx)

# ubuntu - 如何在 linux 中使用 awesomium sdk

> ID：14672854
> 
> 赞同：5
> 
> 时间：2013-02-03T13:13:47.383
> 
> 标签：ubuntu, monodevelop, awesomium

我已经为 linux 64 位系统下载了 awesomium sdk，现在我想在 monodevelop 中运行一个简单的 hello world 应用程序，它在 awesomium 中打开 hello world 消息，如何在 linux 中使用这个 sdk...请给我一些建议。

问候罗希特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-31T05:54:39.190

下载 SDK 后，将其解压缩到主目录中的文件夹中。打开终端。将目录更改为您刚刚提取的 SDK 文件。运行**sudo make all**将库安装到您的机器上。

T0 检查它是否已安装并正常工作

将目录更改为 ./bin 和 RUN

**./awesomium_sample_hello**

# c - WinApi32 C 滚动条控件（滑块）

> ID：14672858
> 
> 赞同：0
> 
> 时间：2013-02-03T13:14:19.177
> 
> 标签：c, winapi, scroll

我想问一下如何在 WinApi32 C 中创建滚动条（滑块），以便可以
根据滚动条中拇指的位置发送串行端口数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:05:55.103

您可以通过在调用中添加`WS_HSCROLL`和/或`WS_VSCROLL`样式来创建带有滚动条的窗口。`CreateWindow()`

```
hWnd = CreateWindow("YourWnd","Name", 
  WS_OVERLAPPEDWINDOW | WS_HSCROLL | WS_VSCROLL,
  CW_USEDEFAULT, CW_USEDEFAULT, 500, 250,
  NULL,NULL,            
  hInstance,NULL
); 
```

然后，您可以通过调用[`GetScrollPos()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787585%28v=vs.85%29.aspx)or[`GetScrollInfo()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787583%28v=vs.85%29.aspx)函数来检查位置。

[有关详细信息，请参阅此处](http://msdn.microsoft.com/en-us/library/ms997557.aspx)的MSDN 文档。

# java - 如何将 mouseClicked 添加到脚本

> ID：14672861
> 
> 赞同：0
> 
> 时间：2013-02-03T13:14:24.407
> 
> 标签：java, algorithm, mouselistener, flood-fill, onmouseclick

我有floodfill算法，我想添加到这个mouseClicked，但我不知道如何，因为我有很多错误。

这是我的代码。我想从 mouseClicked 获取 x,y 位置并将其提供给“floodFill(image,x,y, yellow);”

谁能帮我？谢谢

```
import java.awt.Point;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

class AnimationFiller
{
 // draw a black square with a pen width of 1 pixels
  static void drawSquare(BufferedImage image)
  {
    java.awt.Graphics2D gr=(java.awt.Graphics2D) image.getGraphics(); 

    gr.setColor(new java.awt.Color(0,0,0));  // black
    gr.setStroke(new java.awt.BasicStroke(1));  // set pen width to 1 pixel
    gr.drawRect(0, 0, 296, 264);  // (x,y,w,h);
  }
  // implements the flood fill algorithm
  public static void floodFill(BufferedImage image, int x,int y, int fillColor)
  {
    java.util.ArrayList<Point> examList=new java.util.ArrayList<>();

    int initialColor=image.getRGB(x,y);
    examList.add(new Point(x,y));

    while (examList.size()>0)
    {
      Point p = examList.remove(0);  // get and remove the first point in the list
      if (image.getRGB(p.x,p.y)==initialColor) 
      {
        x = p.x;  y = p.y;
        image.setRGB(x, y, fillColor);  // fill current pixel

        examList.add(new Point(x-1,y));        // check west neighbor
        examList.add(new Point(x+1,y));        // check east neighbor
        examList.add(new Point(x,y-1));        // check north neighbor
        examList.add(new Point(x,y+1));        // check south neighbor
      }
    }

  }

  public static int packRgb(int r,int g,int b)
  {
    return (r*256+g)*256+b;
  }

  static JLabel _imageLabel;
  public static void main(String[] args) throws Exception
  {
    // read bmp image from file
    final BufferedImage image = ImageIO.read(new File("picture.bmp"));

    drawSquare(image);
    final JLabel imageLabel = new JLabel();
    _imageLabel = imageLabel;  // make it global
    imageLabel.setIcon(new ImageIcon(image));

    javax.swing.JFrame window = new javax.swing.JFrame();
    window.setResizable(false);
    window.setTitle("Kolorowanka");
    window.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);

    window.add(imageLabel);

    window.pack();
    window.setVisible(true);

    // fill the image with yellow color
    final int yellow = packRgb(255,255,0);
    imageLabel.addMouseListener(new MouseListener() {
    @Override
    public void mouseReleased(MouseEvent e) {
    }

    @Override
    public void mousePressed(MouseEvent e) {
    }

    @Override
    public void mouseExited(MouseEvent e) {
    }

    @Override
    public void mouseEntered(MouseEvent e) {
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        floodFill(image, e.getX(), e.getY(), yellow);
        imageLabel.setIcon(new ImageIcon(image));
    }
});

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:30:52.467

您可以通过这种方式添加**mouseClicked**事件：

```
imageLabel.addMouseListener(new MouseListener() {
    @Override
    public void mouseReleased(MouseEvent e) {
    }

    @Override
    public void mousePressed(MouseEvent e) {
    }

    @Override
    public void mouseExited(MouseEvent e) {
    }

    @Override
    public void mouseEntered(MouseEvent e) {
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        floodFill(image, e.getX(), e.getY(), yellow);
    }
}); 
```

如果要使用匿名类之外的某些字段，则必须将其定义为[final](http://en.wikipedia.org/wiki/Final_%28Java%29)。例如：

```
final BufferedImage image = ... 
```

和

```
final int yellow = packRgb(255, 255, 0); 
```

请在编写项目的下一部分之前阅读有关最终字段的信息。示例来源：

*   [大量使用final](http://www.javapractices.com/topic/TopicAction.do?Id=23)
*   [Java中的final是什么？最终变量,方法和类示例](http://javarevisited.blogspot.com/2011/12/final-variable-method-class-java.html)
*   [使用 Java final 关键字的线程安全](http://www.javamex.com/tutorials/synchronization_final.shtml)
*   [Java 理论与实践：这是您的最终答案吗？](http://www.ibm.com/developerworks/java/library/j-jtp1029/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:19:24.387

这是我几个月前编写的扫描线洪水填充算法的实现。

`boundaries`是一个栈，`startX`，`startY`是起点的坐标。 `pixels`数组包含图像中所有像素的 rgb 值。该阵列是`PixelGrabber`在源图像上使用的。

暗示使用所有其他变量。

```
boundaries.push(new Point(startX,startY));
//Now we have the starting positions for coloring in the above and lower lines
//coloring is done in right directions only

while(!boundaries.isEmpty()) //Loop as many times till no starting positions are found
{
    //Now begin coloring
    Point pt=boundaries.pop();
    //This is the starting point for coloring towards right direction
    int x=pt.x;
    int y=pt.y;

    //First go as far left as possible until a different colored pixel is found
    while(x>=0)
    {
        if(pixels[y*WIDTH+x]!=pickPointPreviousColor) break;
        x--;
    }
    x++;

    //Now extend right
    while (x<=WIDTH)
    {
        if(pixels[y*WIDTH+x]==pickPointPreviousColor)
            pixels[y*WIDTH+x]=colorToFill;
        else
        {
            upperLineCountingStarted = false;
            lowerLineCountingStarted=false;
            break;
        }

        if(y>0 && upperLineCountingStarted==false && pixels[(y-1)*WIDTH+x]==pickPointPreviousColor)
        {
            boundaries.push(new Point(x,y-1));
            upperLineCountingStarted=true;
        }

        else if(y>0 && upperLineCountingStarted==true && pixels[(y-1)*WIDTH+x]!=pickPointPreviousColor)
            upperLineCountingStarted=false;

        if(y<HEIGHT && lowerLineCountingStarted==false && pixels[(y+1)*WIDTH+x]==pickPointPreviousColor)
        {
            boundaries.push(new Point(x,y+1));
            lowerLineCountingStarted=true;
        }
        else if(y<HEIGHT && lowerLineCountingStarted==true && pixels[(y+1)*WIDTH+x]!=pickPointPreviousColor)
            lowerLineCountingStarted=false;

        x++;
    }
} 
```

# jsf-2 - 在 glassfish 3.1.2.2 中升级到最新的 mojarra

> ID：14672864
> 
> 赞同：0
> 
> 时间：2013-02-03T13:14:46.340
> 
> 标签：jsf-2, glassfish-3, mojarra

所以我厌倦了一些可能与捆绑的 mojarra 2.1.6 相关的问题。

所以决定试一试 2.1.17。

已删除

```
C:\glassfish3\glassfish\domains\domain1\osgi-cache 
```

并更换

```
C:\glassfish3\glassfish\modules\javax.faces.jar 
```

在[这里找到的](http://javaserverfaces.java.net/download.html)

无论我如何重新启动服务器，从 Eclipse 等进行干净部署（通过 Eclipse 添加删除服务器和应用程序）

我在服务器日志中看到以下内容:(

```
[#|2013-02-03T13:22:42.172+0100|INFO|glassfish3.1.2|javax.enterprise.resource.webcontainer.jsf.config|_ThreadID=1;_ThreadName=Thread-2;|Initializing Mojarra 2.1.6 (SNAPSHOT 20111206) for context '/MyApp'|#] 
```

我没有轻易放弃，而是按照[这篇](http://java.dzone.com/articles/upgrading-latest-mojarra)文章将其捆绑到我的网络应用程序中

glassfish-web.xml 的更新

```
<class-loader delegate="false" />
<property name="useBundledJsf" value="true"/> 
```

pom.xml 的更新

```
<dependency>
    <groupId>org.glassfish</groupId>
    <artifactId>javax.faces</artifactId>
    <version>2.1.17</version>
</dependency>
<dependency>
    <groupId>org.glassfish.web</groupId>
    <artifactId>weld-integration</artifactId>
    <version>3.2-b06</version>
    <exclusions>
        <exclusion>
            <artifactId>*</artifactId>
            <groupId>*</groupId>
        </exclusion>
    </exclusions>
</dependency> 
```

这类作品：

```
INFO: Initializing Mojarra 2.1.17 ( 20130107-1935 https://svn.java.net/svn/mojarra~svn/tags/2.1.17@11335) for context '/MyApp' 
```

但我无法在我的 JSF 托管 bean 中注入 EJB。问题是，我怎样才能获得最新的 mojarra 来玩 glassfish 3.1.2.2 和我的 webapp，它也包含 ejbs？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:49:47.263

好的，所以我最初的问题（替换 javax.faces.jar 没有生效）的答案有点尴尬。

显然我为域配置了我的 eclipse glassfish 插件

```
c:/glassfish3/glassfish/domains/domain1 
```

但服务器路径设置为

```
C:/eclipseee3/plugins/oracle.eclipse.runtime.glassfish.build3122_1.0.0/glassfish3/glassfish 
```

# jquery - jQuery：如何为新的附加元素应用相同的预定义行为？

> ID：14672865
> 
> 赞同：1
> 
> 时间：2013-02-03T13:15:01.093
> 
> 标签：jquery

我有一类 div 标签的 click 方法

 `````
<div id="wrapper">
<div class="detail">abc</div>
<div class="click">click here</div>
<div ckass="click">click here</div>
</div>
<script>

${.click}.click(function(){
$(#wrapper).append("<div class="click">added</div>");
});
</script> 
````  `当我单击“单击此处”时，脚本添加了新的 div。但是当我试图点击新添加的 div 时，什么也没发生。请告诉我如何使新添加的也可点击。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:17:55.220

您可以使用该`on()`方法。然后它也适用于新添加`<div>`的：

```
$('#wrapper').on('click', '.click', function (event) {
    $('#wrapper').append("<div class='click'>added</div>");
}); 
```

如果您想使用`bind()`作为`click(f)`代理的 ，`bind('click', f)`请执行以下操作：

```
var handler = function (event) {
    $('<div class="click">added</div>')
        .appendTo($("#wrapper"))
        .bind('click', handler);
};
$('.click').click(handler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:18:38.293

有一些拼写错误。试试这段代码：

```
<div id="wrapper">
<div class="detail">abc</div>
<div class="click">click here</div>
<div class="click">click here</div>
</div>
<script>

var handler = function (event) {
$('<div class="click">added</div>').appendTo($("#wrapper")).bind('click', handler);
};
$('.click').click(handler);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T13:19:19.613

尝试`.on()`处理程序，在您的情况下，您将事件绑定到直接`<div class='click'>added</div>`元素，这些元素在之后插入 dom 时存在于 dom 中，因此单击它将不起作用，为此您必须将事件委托给现有的最近的父元素，即`#wrapper`或您可以直接调用它，它是 dom 中所有元素的父级`document`：`#wrapper`

```
$('#wrapper').on('click', '.click', function(){
   $('#wrapper').append("<div class='click'>added</div>");
}); 
```

看看这个：`[http://jsfiddle.net/RcPnN/](http://jsfiddle.net/RcPnN/)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T13:28:08.773

你可以这样做 ：

```
<div id="wrapper">
<div class="detail">abc</div>
<div onclick='Add()'>click here</div>
<div onclick='Add()'>click here</div>
</div>
<script>
function Add(){
$("#wrapper").append("<div onclick='Add()'>added</div>");
}
</script> 
`````

# mysql - 引用和外键的区别

> ID：14672872
> 
> 赞同：5
> 
> 时间：2013-02-03T13:15:43.283
> 
> 标签：mysql, foreign-keys

这是sql中的两个声明

```
create table bookAdoption
(   
    courseId int,
    sem int,
    isbn int,
    PRIMARY KEY(courseId, sem, isbn),       
    FOREIGN KEY(courseId) REFERENCES course(courseId),
    FOREIGN KEY(sem) REFERENCES enroll(sem)
); 
```

和另一个

```
CREATE TABLE bookAdoption
(
    courseId INT REFERENCES course(courseId) ,
    sem INT REFERENCES enroll(sem),
    isbn INT REFERENCES text1(isbn),
    PRIMARY KEY(courseId, sem, isbn)

); 
```

仅使用引用关键字之间有什么区别

并同时使用引用和外来关键字 ![截屏](../Images/069d28931e7097ebfcd2509a1788516a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T13:19:32.650

[如MySQL 文档 FOREIGN KEY Constraints](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)`REFERENCES`所引用的，您不能使用没有外键约束：

> 此外，InnoDB 不识别或支持“内联引用规范”（如 SQL 标准中所定义），其中引用被定义为列规范的一部分。InnoDB 仅在指定为单独的 FOREIGN KEY 规范的一部分时才接受 REFERENCES 子句。对于其他存储引擎，MySQL Server 解析并忽略外键规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T13:21:46.323

FOREIGN KEY 只能引用唯一的列。

在实践中，我们通常在主键上添加外键约束，我们说 FK**引用**了 PK。但是可以为任何 UNIQUE 列添加这样的约束。

为了使它起作用，SQL 语法要求您：

*   声明一个外键
*   告诉它参考什么

# c# - Visual Studio 部署包构建包含旧文件

> ID：14672874
> 
> 赞同：0
> 
> 时间：2013-02-03T13:15:52.793
> 
> 标签：c#, visual-studio-2010, build

这件事快把我逼疯了，我不知道发生了什么。

我为我的 ASP.NET MVC 3 应用程序创建了一个部署包，包内的 MY MAIN DLL FILE 的日期为 2013 年 1 月 31 日，今天是 2013 年 2 月 3 日。在这几天里，我做了很多改变。

它打包旧文件！一月版到底哪里来的？？？因为我在其他任何地方都找不到。为什么它完全引用它？

在同一时期，我创建了一些视图，日期为 2013 年 2 月 2 日，其中包括...

PackageTemp (/obj/Release) 文件夹包含旧的 dll，而我的 /bin 文件夹包含新的？

任何想法，这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:26:05.880

[这是你的答案](https://stackoverflow.com/questions/5575253/old-dll-file-keeps-being-used)
它隐藏在 GAC 中。它可能会无限期地驻留在那里。使用更新的版本确实可以解决问题，但是 Visual Studio 中有一个突出的错误与选择正确版本的 DLL 文件有关。（如果 DLL Hell 还不够糟糕，Visual Studio 团队正在让它变得更糟！）

在 GAC 中查找它很棘手，我无法建议您如何执行此操作，但是一旦从那里删除旧版本，就不会再找到它。有时，即使您将编译器指向较新的版本（按日期），它也会使用旧版本，因为它具有相同的版本级别（按版本）。那是它的错误。

# emacs - 终端 Emacs 中的真彩色（24 位）

> ID：14672875
> 
> 赞同：9
> 
> 时间：2013-02-03T13:16:00.593
> 
> 标签：emacs, terminal, konsole

我正在寻找一种在使用图形终端仿真器时在 emacs 中具有 24 位颜色的好方法。例如，Konsole 确实支持真彩色的转义码，如下所述：[https ://github.com/robertknight/konsole/blob/master/user-doc/README.moreColors](https://github.com/robertknight/konsole/blob/master/user-doc/README.moreColors)

我的问题是我不明白 emacs 如何将人脸信息转换为终端的转义序列。我也没有管理某处是否存在对 24 位颜色的支持，或者是否有可能用 emacs lisp 实现它。我要的是指向相关 Emacs 文档的指针，或者是关于在终端 Emacs 中具有真实颜色是否可行的知情意见。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2018-05-29T06:29:25.693

这最近包含在 emacs 26.1（2018 年 5 月 28 日）中，

使用此文件：`terminfo-24bit.src`

```
# Use colon separators.
xterm-24bit|xterm with 24-bit direct color mode,
  use=xterm-256color,
  setb24=\E[48:2:%p1%{65536}%/%d:%p1%{256}%/%{255}%&%d:%p1%{255}%&%dm,
  setf24=\E[38:2:%p1%{65536}%/%d:%p1%{256}%/%{255}%&%d:%p1%{255}%&%dm,
# Use semicolon separators.
xterm-24bits|xterm with 24-bit direct color mode,
  use=xterm-256color,
  setb24=\E[48;2;%p1%{65536}%/%d;%p1%{256}%/%{255}%&%d;%p1%{255}%&%dm,
  setf24=\E[38;2;%p1%{65536}%/%d;%p1%{256}%/%{255}%&%d;%p1%{255}%&%dm, 
```

跑：

```
tic -x -o ~/.terminfo terminfo-24bit.src 
```

现在您可以使用真彩色启动 emacs。

```
TERM=xterm-24bit emacs -nw 
```

请参阅常见问题解答：[https ://www.gnu.org/software/emacs/manual/html_node/efaq/Colors-on-a-TTY.html](https://www.gnu.org/software/emacs/manual/html_node/efaq/Colors-on-a-TTY.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T02:24:10.803

AFAIK 对此没有内置支持，因为终端中的 24 位色彩空间非常罕见（！？）。但是，鉴于 Emacs 已开放供您[添加自己的终端支持](https://stackoverflow.com/questions/7617458/terminal-emacs-colors-only-work-with-term-xterm-256color)，您可以尝试编写类似于`xterm-frobs.el`.

顺便说一句，如果您只需要终端中的良好颜色主题，您可以尝试我的包[https://github.com/tungd/color-theme-approximate](https://github.com/tungd/color-theme-approximate)，它将 GUI 颜色主题转换为终端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-27T00:28:26.707

在 emacs 中启用 24 位颜色有 3 种方法：（
代码来自 emacs 的`term.c`）

（注意：测试颜色是否有效的一种简单方法是检查`M-x list-colors-display`）

~~**正确的方法**是设置`TERM`一个支持直接颜色的值（通过`RGB`terminfo 功能），如果您的终端可用（或者只是尝试 xterm-direct）。
这些通常命名为“(terminalName)-direct”（`xterm-direct`,`vte-direct`等）
ex: `TERM=xterm-direct emacs`，或通过配置终端正确设置 TERM。~~
**编辑：** xterm-direct（及相关）的实现存在缺陷。某些蓝色阴影被视为索引颜色（因为它对 rgb 和索引颜色使用相同的序列），并且不会正确渲染。我推荐使用第二种方法。

```
/* Standard support for 24-bit colors.  */
else if (tigetflag ("RGB") > 0)
  {
    /* ...  */
    tty->TN_max_colors = 16777216;
  } 
```

另一种选择是使用具有非标准 terminfo 功能的 terminfo 文件`setf24`和`setb24`（参见答案[https://stackoverflow.com/a/50577683/6232794](https://stackoverflow.com/a/50577683/6232794)）。与其他两个版本相比，旧版本的 emacs 可能支持此方法

```
const char *fg = tigetstr ("setf24");
const char *bg = tigetstr ("setb24");
/* Non-standard support for 24-bit colors. */
if (fg && bg
    && fg != (char *) (intptr_t) -1
    && bg != (char *) (intptr_t) -1)
  {
    tty->TS_set_foreground = fg;
    tty->TS_set_background = bg;
    tty->TN_max_colors = 16777216;
  } 
```

作为最后的手段，您可以将环境变量设置`COLORTERM`为“真彩色”，这可能适用于您的终端。

```
/* Fall back to xterm+direct (semicolon version) if requested
   by the COLORTERM environment variable.  */
else if ((bg = getenv("COLORTERM")) != NULL
         && strcasecmp(bg, "truecolor") == 0)
  {
    tty->TS_set_foreground = "\033[%?%p1%{8}%<%t3%p1%d%e38;2;%p1%{65536}%/%d;%p1%{256}%/%{255}%&%d;%p1%{255}%&%d%;m";
    tty->TS_set_background = "\033[%?%p1%{8}%<%t4%p1%d%e48;2;%p1%{65536}%/%d;%p1%{256}%/%{255}%&%d;%p1%{255}%&%d%;m";
    tty->TN_max_colors = 16777216;
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-11T18:14:36.297

这是可行的，但不能单独在 ELisp 中完成。

这是一个可爱的补丁列表，适用于各种版本的 emacs 和 tmux，以使 trucolor 生活成为可能：

[https://gist.github.com/choppsv1](https://gist.github.com/choppsv1)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-03T19:37:03.470

我使用[xterm-frobs.el](http://www.splode.com/~friedman/software/emacs-lisp/src/xterm-frobs.el)获得 256 色术语支持（在与 xterm 兼容的终端中，如 konsole）。我使用术语设置“xterm-256color”。256 色支持通常对我来说绰绰有余，因为我在配色方案中没有使用*那么*多颜色。上述文件试图询问终端以找出它支持多少种颜色。我不知道它是否应该（或可以适应）能够在 konsole 中提供真彩色支持。

更新：请注意，从 26.1 版开始，emacs 现在支持真彩色终端。请参阅[下面的答案](https://stackoverflow.com/a/50577683/552759)以获取更多详细信息。

# java - Heroku 中的 Postgres 开发人员不会创建任何表

> ID：14672876
> 
> 赞同：1
> 
> 时间：2013-02-03T13:16:03.713
> 
> 标签：java, postgresql, heroku

我正在尝试在 Heroku 中部署一个带有 Postgres 集成的基本 Java 应用程序。我已经克隆了这个项目[https://github.com/heroku/devcenter-java-database](https://github.com/heroku/devcenter-java-database)。我能够使应用程序在本地以适当的方式工作。它在数据库中创建一个名为 ticks 的表，并在其中插入一个元组。

当我将应用程序部署到 Heroku 时，它似乎也能正常工作。事实上，它有效。我可以运行选择查询并获得正确的结果。当我尝试在 Heroku 中检查我的 postgres 数据库时，奇怪的事情出现了。似乎什么都没有创建。我不知道是不是因为我有 Heroku 的开发计划。但是我不知道为什么 Heroku 的行为与我的本地环境不同。

```
::term>run "sh devcenter-java-database-plain-jdbc/target/bin/main"
  Running sh devcenter-java-database-plain-jdbc/target/bin/main attached to terminal...      up, run.6018
  Read from DB: 2013-02-03 12:51:42.110186 
```

该应用程序有效，但它没有在我的 Heroku 数据库中保存任何内容。

```
::term>pg:info
  ===HEROKU_POSTGRESQL_WHITE (DATABASE_URL)
  Plan         Dev
  Status       available
  Connections  0
  PG Version   9.1.6
  Created      2013-02-03 11:58 UTC
  Data Size    5.9 MB
  Tables       0
  Rows         0/10000 (In compliance)
  Fork/Follow  Unsupported 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T01:33:25.447

pg:info 查询 Heroku 的 Postgres 管理系统，它只是定期轮询你的开发数据库。pg:info 不是实时的，但您的应用程序是实时的。如果它有效，那么您的表格和数据就在那里。

# c# - NUnit：为代码编写单元测试需要使用物理文件

> ID：14672878
> 
> 赞同：1
> 
> 时间：2013-02-03T13:16:28.890
> 
> 标签：c#, unit-testing, nunit

我最近开始使用 NUnit 框架为我的代码编写单元测试。
我熟悉 NUnit 的基本概念并编写简单的测试。
实际上我不知道如何测试与文件一起使用的代码：例如，我想为下面的类编写测试：

```
 public class ShapeLoader
    {
        private static void StreamLoading(object sender, StreamLoadingEventArgs e)
        {
            try
            {
                string fileName = Path.GetFileName(e.AlternateStreamName);
                string directory = Path.GetDirectoryName(e.AlternateStreamName);

                e.AlternateStream = File.Exists(directory + @"\\" + fileName) ? new FileStream(directory + @"\\" + fileName, e.FileMode, e.FileAccess) : null;
            }
            catch
            { }
        }

        public static ShapeFileFeatureLayer Load(string filePath, ShapeFileReadWriteMode shapeFileReadWriteMode, bool buildIndex = true)
        {
            if (!File.Exists(filePath)) { throw new FileNotFoundException(); }
            try
            {
                switch (shapeFileReadWriteMode)
                {
                    case ShapeFileReadWriteMode.ReadOnly:
                        //  if (buildIndex && !HasIdColumn(filePath)) BuildRecordIdColumn(filePath, BuildRecordIdMode.Rebuild);

                        ShapeFileFeatureLayer.BuildIndexFile(filePath, BuildIndexMode.DoNotRebuild);

                        var shapeFileLayer = new ShapeFileFeatureLayer(filePath, shapeFileReadWriteMode) { RequireIndex = true };
                        ((ShapeFileFeatureSource)shapeFileLayer.FeatureSource).StreamLoading += StreamLoading;
                        return shapeFileLayer;

                    case ShapeFileReadWriteMode.ReadWrite:
                        return new ShapeFileFeatureLayer(filePath, shapeFileReadWriteMode);

                    default:
                        return null;
                }
            }
            catch (Exception ex)
            {
                if (ex.Message.Contains("Could not find file")) throw new FileNotFoundException();
                throw;
            }
        }
    } 
```

这段代码需要物理文件来检查它是否工作正常，但是单元测试是否依赖于物理文件？
如何为这样的代码编写单元测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T13:28:17.900

单元测试不应依赖外部资源，如文件系统或数据库等。在这种情况下，您必须使用**Moq**或**Rhino Mock**等模拟框架。如果您想测试您的代码及其外部依赖项，您应该编写`Integration Test`.

所以在你的情况下，如果你不想使用任何模拟框架，你可以为依赖创建自己的假类，并通过**依赖注入模式传递它们**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T14:30:14.153

我喜欢创建这个：

```
public abstract class FileSystem
{
     public abstract bool FileExists(string fullPath);
     public abstract Stream OpenFile(string fullPath, FileMode mode, FileAccess access);
} 
```

然后，您可以以明显的方式为生产代码实现它，并轻松地为测试代码模拟它。

```
[Test]
public void StreamReadingEventAddsStreamToEventArgsWhenFileExists()
{
     var e new StreamReadingEventArgs { e.AlternateStreamName= "Random string in path format", e.FileMode = AnyFileMode(), e.FileAccess = AnyFileAccess() };
     var expectedStream = new MemoryStream();
     _fileSystemMock.Setup(f=>f.OpenFile(e.AlternateStreamName, e.FileMode, e.FileAccess)).Returns(expectedStream);

     SomehowFireTheEvent(e);

     Assert.That(e.AlternateStream, Is.SameAs(expectedStream));
} 
```

附带说明一下，此代码还有其他可测试性问题会让您感到沮丧。我建议尝试为它编写一些测试，然后在[codereview.stackexchange.com](http://codereview.stackexchange.com)上发布生产代码和测试以获得一些反馈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T03:48:29.533

无论您拥有什么依赖项或使用的外部资源，为它们中的每一个创建模拟，然后使用 MOQ 等模拟框架运行测试。这是一个例子。更好地创建接口并使用接口实现模拟

```
 var mockEmailRequest = new Mock<IEMailRequest>
  mockEmailResponse.setup(x+>x.EmailResponse).Returns(.....);
mockEmailRequest.Verify(r=>r.EmailReceived(It.Is<EmailResponse>(r=>r.Subject == "Something"),It.Is<int>(i=>i > 17))); 
```

# three20 - 如何在three20内的应用程序中添加侧边菜单？

> ID：14672880
> 
> 赞同：0
> 
> 时间：2013-02-03T13:16:45.120
> 
> 标签：three20, sidebar

我在我的应用程序中使用了three20 框架，但我不知道如何在three20 框架中添加侧边菜单（如路径或facebook）。任何人都可以帮助我吗？谢谢很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:37:11.653

[DDMenuController](https://github.com/devindoty/DDMenuController)很容易实现。

![DDMenuController](../Images/0120a1c7939a54c6f24e268d3940638a.png)

# jquery - .animation 不是函数

> ID：14672881
> 
> 赞同：0
> 
> 时间：2013-02-03T13:16:52.097
> 
> 标签：jquery

我正在使用 Drupal 和 jQuery 说`.animation is not a function`。为什么我会收到此错误？

```
(function($){
    var cg_parent = "#block-views-content_gallery-cg_block";
    var cg_items = cg_parent + " ul";
    var cg_item = cg_items + " li";

    $(cg_item + ".views-row-first div.cg_item").addClass("active");
    $(cg_item + ".views-row-first div.cg_item").bind("mouseenter", function() {
        $("div.cg_item.active div.cg_body_content").animation({ left: '100px' }, 100, function() {
            alert("je;;p");
        });
    });
})(jQuery); 
```

[http://jsfiddle.net/seejee/sYFR9/7/](http://jsfiddle.net/seejee/sYFR9/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:18:56.600

该方法名为`animate`not `animation`：

```
$("div.cg_item.active div.cg_body_content").animate({ left:'100px' }, 100, function() {  
    alert("je;;p");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:35:24.853

请替换`animation`为`animate`，这将完成工作:)

# css - 为什么我的 CSS 中的边距没有应用？

> ID：14672884
> 
> 赞同：1
> 
> 时间：2013-02-03T13:17:14.713
> 
> 标签：css, margin

我正在尝试创建一个日历，其中每天都有一个框，以小边距分隔。问题：未应用边距。我在日期周围添加了红色边框，正如您在[代码](http://jsbin.com/eraxaz/1/edit)中看到的那样，边框之间没有边距。我删除了所有无关的 CSS，甚至临时添加了一个`!important`属性（我讨厌，想想我有多绝望），无济于事。我绝对看不出我做错了什么，所以任何帮助表示赞赏。

代码在[这里](http://jsbin.com/eraxaz/1/edit)。

**编辑**
我添加了hrunting的答案中提到的代码

```
#calendar table {
  border-collapse: separate;
  border-spacing: 2px 2px;
} 
```

到[我的代码](http://jsbin.com/eraxaz/9/edit)，但它似乎没有任何区别。（我删除了红色边框。如果您有单独的日期框，您应该看到它何时起作用。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:28:27.147

在此处阅读[此 StackOverflow 答案](https://stackoverflow.com/a/2986792/1735796)。

基本上，内部表格元素没有应用边距（并且填充不是您想要的，因为该间距位于边框*内部*，而不是外部）。您需要将属性与[属性](http://www.w3schools.com/cssref/pr_tab_border-spacing.asp)[`border-spacing`一起使用`border-collapse`](http://www.w3schools.com/cssref/pr_tab_border-spacing.asp)才能获得所需的外观。

此外，从您的定义中删除`cellspacing=0`HTML 属性。`<table>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:32:16.910

表格单元格不能直接应用边距。您可以在此处阅读表格规范：http: [//www.w3.org/TR/CSS2/tables.html](http://www.w3.org/TR/CSS2/tables.html)并查看表格单元格有自己的盒子模型。您可以像@Praveen 建议的那样添加填充，但填充有限制。例如，如果您想增加不起作用的边界之外的空间。填充实际上增加了单元格内的空间，因此具有不同的效果。

这个问题可能重复：[CSS Cell Margin](https://stackoverflow.com/questions/716442/css-cell-margin)

取自那个问题：

> 那么什么是“正确”的方式呢？如果您正在寻找替换表格的 cellspacing 属性，那么可以替换边框间距（禁用边框折叠）。但是，如果需要每个单元格的“边距”，我不确定如何使用 CSS 正确实现。我能想到的唯一技巧是使用上述填充，避免单元格的任何样式（背景颜色、边框等），而是在单元格内使用容器 DIV 来实现这种样式。

# scheme - 方案输入端口 eof

> ID：14672887
> 
> 赞同：0
> 
> 时间：2013-02-03T13:17:19.467
> 
> 标签：scheme, mit-scheme

这都是关于方案及其输入系统的，让我们开始吧，我得到了这个输入，程序必须一直读到 eof。

```
]=> (getallinput)
22 (5(4(11(7()())(2()()))()) (8(13()())(4()(1()()))))
20 (5(4(11(7()())(2()()))()) (8(13()())(4()(1()())))) 
```

这就是功能

```
(define (getAllinput)
  (let ((port console-i/o-port))
    (letrec ((nread (lambda (port)
                      (let ((value (read port)))
                        (let ((tree (read port)))
                          (display (findValor (sum tree) value))
                          (if (not (eof-object? port))
                              (nread port)))))))
      (nread port)))) 
```

问题是，我在最终从控制台读取时遇到问题，而 letrec，我知道问题出在哪里，但我不知道如何解决它。

```
(if (not (eof-object? tree)) (**nread port**)))))))(**nread port**))))
```

它坚持来回读取输入，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T22:22:05.830

在问题中显示的功能中，您正在检查`(eof-object? port)`哪个永远不会成为真的，而您应该`(eof-object? tree)`按照问题中进一步显示的方式进行检查，或者`(eof-object? value)`

此外，您应该在使用函数中的读取值之前检查此条件`findValor`：

```
(define (getAllinput)
  (let ((port console-i/o-port))
    (letrec ((nread (lambda (port)
                      (let* ((value (read port))
                             (tree (read port)))
                        (if (not (eof-object? value))   ; <--
                            (begin
                              (display (findValor (sum tree) value))
                              (nread port)))))))
      (nread port)))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T15:58:29.357

为了`eof-object?`返回 true，如果您从控制台读取，则必须实际发送文件结尾。在 Unix 中，按`Ctrl``D`; 在 Windows 中，然后`Ctrl``Z`按`Enter`。

# codeigniter - 杂货杂货 set_relation

> ID：14672888
> 
> 赞同：1
> 
> 时间：2013-02-03T13:17:21.510
> 
> 标签：codeigniter, grocery-crud

```
$crud->set_relation('seo_url', 'db_projects','seo'); 
```

在**插入/更新**crud时，将 db_projects 中的**id**（主键）添加到**seo_url**字段。如何将**seo**从 db_projects 而不是**id**（主键）添加到 seo_url 字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T23:36:36.103

[对于这种情况，我认为唯一的解决方案是使用field_type](http://www.grocerycrud.com/documentation/options_functions/field_type#dropdown-field)方法实际创建一个自定义下拉列表。因此，在您的情况下，您将拥有：

```
$seo_results = array();
foreach ($this->db->get('db_projects')->result() as $row) {
    $seo_results[$row->seo] = $row->seo;
} 
$crud->field_type('seo_url', 'dropdown', $seo_results); 
```

# c# - 避免使用 linq 多次浏览列表，使用动态条件（过滤器）

> ID：14672889
> 
> 赞同：3
> 
> 时间：2013-02-03T13:17:35.270
> 
> 标签：c#, linq, where

我有一个包含`Article` 对象的列表。该对象的参数是

> 类别、描述、状态、类别

用户可以使用他想要的组合过滤列表。只有描述，或类别 + 类，依此类推。

所以如果用户选择一个标准，我会得到一个 int >= 0，否则我会得到-1。

例如，如果他选择使用`Status`and过滤`Category`，我会得到

> FilterCategory = x，FilterDescription = -1，FilterStatus = y，FilterClass = -1

我过滤列表的方法如下：

```
if (FilterCategory != -1)
    list = list.Where(a => a.Category == FilterCategory);
if (FilterDescription != -1)
    list = list.Where(a => a.Description == FilterDescription);
if (FilterStatus != -1)
    list = list.Where(a => a.Status == FilterStatus);
if (FilterClass != -1)
    list = list.Where(a => a.Class == FilterClass); 
```

这样，我必须对列表进行 4 次迭代，很多项目效率不高。我会浏览一次列表，然后在一个唯一的位置检查 4 个条件。但我不知道如何在特定条件下做到这一点！= -1。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T13:34:49.013

正如 Juharr 在评论中提到的那样，Linq`.Where`在调用它后不会评估您的权利。只有在调用`ToList/ToArray/First/Single/foreach`时它才会评估子句并自动组合您的过滤器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T13:20:12.177

`Where`您可以通过注意以下事项来执行 HUGE Where 查询将所有条件移动到一个单一的位置：

```
if (FilterCategory != -1)
    list = list.Where(a => a.Category == FilterCategory); 
```

相当于：

```
list = list.Where(a => FilterCategory == -1 || a.Category == FilterCategory); 
```

那么查询是：

```
list = list.Where(a => (FilterCategory == -1 || a.Category == FilterCategory)
                    && (FilterDescription == -1 || a.Description == FilterDescription)
                    && (FilterStatus == -1 || a.Status == FilterStatus)
                    && (FilterClass == -1 || a.Class == FilterClass)); 
```

但我真的怀疑它会提高你的枚举性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T13:21:36.820

```
list = list.Where(a => (FilterCategory != -1 || a.Category == FilterCategory) && 
                                       (FilterDescription != -1 || a.Description == FilterDescription) &&
                                       (FilterStatus != -1 || a.Status == FilterStatus) &&
                                       (FilterClass != -1 || a.Class == FilterClass)); 
```

# delphi - 如何在 TChart for Firemonkey 中关闭抗锯齿功能？

> ID：14672890
> 
> 赞同：0
> 
> 时间：2013-02-03T13:17:38.427
> 
> 标签：delphi, delphi-xe2, firemonkey, teechart

有谁知道如何在 Delphi XE2 中为 Firemonkey 关闭 TChart 中的抗锯齿功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T14:44:42.027

FireMonkey Canvas 不允许为单个控件启用或禁用抗锯齿。

它必须在表单级别（从 XE4 开始）使用 Form1.Quality 属性完成。

# javascript - 在 Sharepoint 中运行嵌套查询

> ID：14672905
> 
> 赞同：1
> 
> 时间：2013-02-03T13:19:12.840
> 
> 标签：javascript, sharepoint

是否可以在 Sharepoint 中运行嵌套查询？似乎 Sharepoint 的异步需求阻止了我做我想做的事。基本上我有两个列表。一个列表，门票，描述特定事件，而另一个列表，更新，列出这些事件的更新。票证中的主键链接到更新中的外键。我正在尝试创建一个仪表板来显示门票及其更新。

下面的代码可以很好地创建表并从门票表中添加正确的条目，但不会从更新表中添加信息。我假设这是因为 Sharepoint 的列表查询的异步特性，我无法找到解决方法。到目前为止，使用 JQuery 回调看起来最有希望，但我没有这方面的经验，并且正在努力确保这是我应该走的路。使问题更加复杂的是我无法访问共享点生成器，因此我似乎被文本编辑器提供的 ECMA 代码所困扰。

```
<script type="text/javascript">

ExecuteOrDelayUntilScriptLoaded(showTable, "sp.js");
var  tableField = "<table><tr><th>Site</th><th>Ticket</th><th>Last Update</th><th>Last Update Time</th><th>Controls</th></tr>";

function showTable()
{
 var context = new SP.ClientContext.get_current();
 var web = context.get_web();
 var list = web.get_lists().getByTitle('BCTickets');

 var query = new SP.CamlQuery();

 query.set_viewXml('<View><Query><Where><Eq><FieldRef Name="Active" /><Value Type="Integer">1</Value></Eq></Where></Query><ViewFields><FieldRef 

Name="TicketNumber" /><FieldRef Name="Site" /><FieldRef Name="Site" /></ViewFields></View>');

 this.collListItem = list.getItems(query);
 context.load(collListItem);

 context.executeQueryAsync(Function.createDelegate(this, this.createTable), Function.createDelegate(this, this.failed));
}

function createTable()
{
 var context = new SP.ClientContext.get_current();
 var web = context.get_web();
 var list = web.get_lists().getByTitle('Updates');

 var query = new SP.CamlQuery();

 var ListEnumerator = this.collListItem.getEnumerator();

 while(ListEnumerator.moveNext())
 {
  var currentItem = ListEnumerator.get_current();

  tableField += '<TR><TD>' + currentItem.get_item('Site') + '</TD><TD>' + currentItem.get_item('TicketNumber') + '</TD><TD>';

  query.set_viewXml('<View><Query><Where><Eq><FieldRef Name="BCTicketsID" /><Value Type="Integer">' + currentItem.get_item('ID') + 

'</Value></Eq></Where></Query><ViewFields><FieldRef Name="UpdateEntry" /><FieldRef Name="UpdateDate" /></ViewFields></View>');

  this.updateList = list.getItems(query);

  context.load(updateList);

  context.executeQueryAsync(Function.createDelegate(this, this.updateTable), Function.createDelegate(this, this.failed));

  tableField += '</TD><TD></TD></TR>';

 }

 tableField += "</TABLE>";

 document.getElementById("innerTable").innerHTML = tableField;
}

function updateTable()
{
 var ListEnumerator = this.updateList.getEnumerator();

 tableField += "<TABLE>";

 while(ListEnumerator.moveNext())
 {
  var currentItem = ListEnumerator.get_current();

  tableField += "<TR><TD>" + currentItem.get_item('UpdateEntry') + "</TR></TD>";
 }

 tableField += "</TABLE>";
}

function failed(sender, args)
{
 alert("failed. Message:" + args.get_message());
}</script>

<DIV ID="innerTable"></DIV> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-24T21:57:30.517

有点旧的帖子，但只是在开始下一步之前完成了需要异步查询完成的练习。Scot Hillier 关于 Promise objects 的文章为我解决了这个问题：

[http://www.shillier.com/archive/2013/03/04/using-promises-with-the-javascript-client-object-model-in-sharepoint-2013.aspx](http://www.shillier.com/archive/2013/03/04/using-promises-with-the-javascript-client-object-model-in-sharepoint-2013.aspx)

# cordova - jQuery Mobile 滑动面板不工作

> ID：14672907
> 
> 赞同：1
> 
> 时间：2013-02-03T13:19:20.493
> 
> 标签：cordova, jquery-mobile

我正在开发一个 Phonegap + jQuery Mobile + Android 应用程序，我正在尝试通过将 jQuery Mobile 的滑动面板功能绑定到滑动事件来添加它。我正在使用 jQuery Mobile 1.2.0，根据 LogCat 条目似乎不支持滑动面板。

这是我的代码片段：

```
<div data-role="page" id="home-page"> <!-- Home page -->
    <div data-role="panel" id="menu-panel"> <!-- panel -->
        <p>Panel</p>
    </div><!-- panel -->
    <div data-role="header" data-position="fixed"> <!-- Header -->
        <h1>Home</h1>
    </div> <!-- Header -->
    <div data-role="content"> <!-- Content -->
        <p>What do you want to do ?</p>
    </div> <!-- Content -->
</div> <!-- Home page --> 
```

和 .js 文件：

```
$('#home-page').live('pageshow',function(){
   $('#home-page').swiperight(function(){
       alert("swiped");
       $('#menu-panel').panel("open");
   });
}); 
```

这是 LogCat 错误条目：

```
02-03 18:34:31.616: E/Web Console(389): TypeError: Result of expression '$('#menu-panel').panel' [undefined] is not a function. at file:///android_asset/www/home.js:4 
```

根据官方 jQuery Mobile 文档，应该支持滑动面板，但我不知道发生了什么问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T13:29:52.730

面板在 jquery mobile 1.2.0 中不可用。它们是 jquery-mobile 1.3 的一个新特性。您需要更新到当前的测试版。

# php - 如何在 php 中使用每个新表单输入（提交）停止重新加载页面？

> ID：14672919
> 
> 赞同：0
> 
> 时间：2013-02-03T13:21:16.137
> 
> 标签：php

我想制作一个脚本，允许用户猜测数字直到找到正确的数字。这个想法是 php 使用**rand()**来“想象”一个数字。用户的点击次数不受限制。但问题是用户必须在他的任务开始时找到与 php "imagine" 相同的数字，并且每次我输入新数字时我的脚本都会重新加载并总是输出新的随机数。我应该怎么做才能解决这个问题？提前致谢。

```
$r= rand("1","10");

if (isset($_POST['unos'])){

$unos = $_POST['unos'];
if ($unos==$r){
echo "Congratulations you did not miss the center";
}
elseif ($unos<$r){
echo "your number is less then quested number</br>try again";

}
elseif ($unos>$r){
echo "your number is higher then quested number</br>try again"; 
}

}
else{
echo "Go!";
} 
```

html

```
<form action="?" method="post">
<input type="number" name="unos" id="unos">
<input type="submit" value="Start">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:25:36.647

您可以将随机值放入会话中。这样，数字将在整个任务中保持不变。完成任务后，您可以取消设置值。会话中的值对客户端是不可见的。其他选项（例如在表单中的隐藏字段中设置值）仍然可以位于源中。

一个例子;

```
session_start();
$r= isset($_SESSION['random']) ? $_SESSION['random'] : rand("1","10");

if (isset($_POST['unos'])){

$unos = $_POST['unos'];
if ($unos==$r){
echo "Congratulations you did not miss the center";
}
elseif ($unos<$r){
echo "your number is less then quested number</br>try again";

}
elseif ($unos>$r){
echo "your number is higher then quested number</br>try again"; 
}

}
else{
unset($_SESSION['random']); //or session_destroy();
echo "Go!";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T13:26:51.157

你可以使用 php 会话

```
<?php
    session_start();
    if(!isset($_SESSION["numbertoguess"])){
        $_SESSION["numbertoguess"] = generate_randomNumber();
    } 
```

然后检查用户输入是否等于 $_SESSION["numbertoguess"] 如果您也不想重新加载页面，请考虑使用 ajax。用[jquery](http://api.jquery.com/jQuery.ajax/)很方便

[这里](http://www.w3schools.com/php/php_sessions.asp)是对 php 会话的介绍

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T13:27:32.550

一般来说，PHP 并不是真正适合用来解决这个问题的东西。相反，您应该使用 JavaScript。但是，如果您希望它完全安全，您可能最终需要使用 PHP，但您需要从静态源（例如数据库或文件）调用该号码。例如，当用户进入页面时，将数字写入文件 file[session id]，其中 session id 是您可以使用`session_id()`. 然后将随机数写入该文件并检查。最后删除文件，并`unlink()`结合`ignore_user_abort()`以防用户退出页面。使用数据库完成上述操作会更好，但我不承担任何额外的技能。

如果您不想保留它，您也可以将随机数存储在会话中。

# php - 如何使用 PHP PDO 从 MYSQL 查询中获取最后一个结果？

> ID：14672923
> 
> 赞同：0
> 
> 时间：2013-02-03T13:21:54.747
> 
> 标签：php, mysql, sql, database, pdo

我有一个带有 ID 的简单文章表。我想从最近的 10 个结果中得到最高和最低的 id。例如，如果有 11 个 id，则结果应为 2 和 11，如果有 4 个 id，则结果应为 4 和 1，依此类推。我使用 PHP PDO 语句。

```
$aid = $DBH->prepare("SELECT id FROM articles ORDER BY id DESC LIMIT 10"); 
$aid->execute(); 
$row = $aid->fetch(PDO::FETCH_NUM, PDO::FETCH_ORI_LAST);
$lowest_article_id = $row[0];
$row = $aid->fetch(PDO::FETCH_NUM, PDO::FETCH_ORI_FIRST);
$highest_article_id = $row[0]; 
```

如果有 11 条记录，上面将始终返回 11，如果有 10 条记录，则返回 10。因此，查询忽略了查询的`PDO::FETCH_ORI_LAST`一部分。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:24:24.370

您可以使用 SQL 中的 MIN 和 MAX 函数来实现这一点。

```
SELECT MIN(ID) min_ID, MAX(ID) max_ID
FROM
(
    SELECT id FROM articles ORDER BY id DESC LIMIT 10
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T16:30:19.630

我做了一些检查，从文档中听起来这应该可行。准备 sql 时需要启用光标滚动。

```
$aid = $DBH->prepare("SELECT id FROM articles ORDER BY id DESC LIMIT 10", array(PDO::ATTR_CURSOR => PDO::CURSOR_SCROLL)); 
$aid->execute(); 
$row = $aid->fetch(PDO::FETCH_NUM, PDO::FETCH_ORI_LAST);
$lowest_article_id = $row[0];
$row = $aid->fetch(PDO::FETCH_NUM, PDO::FETCH_ORI_FIRST);
$highest_article_id = $row[0]; 
```

话虽如此，它不适合我：/

我做了更多的阅读/测试，发现了这两个错误报告：
[https://bugs.php.net/bug.php?id=34625](https://bugs.php.net/bug.php?id=34625)（虽然这是从 2005 年开始的，但我几乎可以肯定 MySQL 中有游标功能这些天）。
[https://bugs.php.net/bug.php?id=57623](https://bugs.php.net/bug.php?id=57623)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-03T14:11:33.447

或者在sql中使用union命令

```
SELECT min(id) id FROM articles UNION SELECT max(id) id FROM articles; 
```

此语句返回您需要的两个 id。

# java - 如何将泛型用于变量？

> ID：14672924
> 
> 赞同：0
> 
> 时间：2013-02-03T13:21:58.007
> 
> 标签：java, generics

我有以下内容：

```
public class Helper {
    public void doSomething(List<? extends MyClass> p1, Collection<? extends MyClass> c1) {
        final <? extends MyClass> var1 = p1.get(0); // what should be here for the type ?
    }
} 
```

我怎样才能使这项工作？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T13:23:26.023

以下应该是正确的：

```
final MyClass var1 = p1.get(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:43:08.657

如其他地方所述，您可以简单地将变量键入为 MyClass，或者您可以像这样参考泛型 T 编写代码

```
public class Helper {
    public <T extends MyClass> void doSomething(List<T> p1, Collection<T> c1) {
        final T var1 = p1.get(0); 
    }
} 
```

# http - 在 web 请求之前执行函数

> ID：14672926
> 
> 赞同：2
> 
> 时间：2013-02-03T13:22:07.587
> 
> 标签：http, go, webrequest

我正在尝试在每个 Web 请求*之前执行一个功能。*我有一个简单的网络服务器：

```
func h1(w http.ResponseWriter, r *http.Request) {
  fmt.Pprintf("handler: %s\n", "h1")
}
func h2(w http.ResponseWriter, r *http.Request) {
  fmt.Pprintf("handler: %s\n", "h2")
}    
func h3(w http.ResponseWriter, r *http.Request) {
  fmt.Pprintf("handler: %s\n", "h3")
}    

func main() {
  http.HandleFunc("/", h1)
  http.HandleFunc("/foo", h2)
  http.HandleFunc("/bar", h3)

  /*
    Register a function which is executed before the handlers,
    no matter what URL is called.
  */

  http.ListenAndServe(":8080", nil)
} 
```

**问题**：有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T15:23:05.697

包装每个 HandlerFunc。

```
func WrapHandler(f HandlerFunc) HandlerFunc {
  return func(w http.ResponseWriter, r *http.Request) {
    // call any pre handler functions here
    mySpecialFunc()
    f(w, r)
  }
}

http.HandleFunc("/", WrapHandler(h1)) 
```

由于函数是 Go 中的一等值，因此很容易将它们包装、咖喱或任何其他您可能想要对它们做的事情。

# mysql - 如何处理冗余索引

> ID：14672929
> 
> 赞同：0
> 
> 时间：2013-02-03T13:22:23.793
> 
> 标签：mysql

我尝试制作两个数据库表`wp_marketing`和`wp_email`. 我`redundant indexes`在这些表中有一个问题。我已经添加了`SHOW CREATE TABLE tablename;`.

```
CREATE TABLE `cur_emailcontent` (
`title` varchar(100) NOT NULL,
`message` varchar(1000) NOT NULL,
`mail_from` varchar(100) NOT NULL,
`subject` varchar(100) NOT NULL,
KEY `title` (`title`),
CONSTRAINT `cur_emailcontent_ibfk_1` FOREIGN KEY (`title`) REFERENCES `cur_marketing` (`title`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

最初我将`title`列设为`primary`，然后我将其更改`Index Type`为`INDEX`。现在我可以使用任何其他`column`的，`PRIMARY KEY`但我不能删除它`index`使用`PHPMyAdmin`但无法这样做。我知道这些类型`indexes`被称为`redundant indexes`。

现在，除了`table(s)`再次创建之外，我别无选择。这些索引有什么解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:18:31.357

`cur_emailcontent`如果基于查询的表`title`不太可能并且也不希望它是外键；也有`mail_from`作为新的主键只是执行：

```
ALTER TABLE cur_emailcontent DROP FOREIGN KEY cur_emailcontent_ibfk_1,
DROP KEY title,
ADD PRIMARY KEY (mail_from); 
```

[MySQL 更改语法](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

# javascript - jQuery获取多个属性

> ID：14672935
> 
> 赞同：3
> 
> 时间：2013-02-03T13:23:23.607
> 
> 标签：javascript, jquery

我有一个元素，我需要获取一组特定属性。例如：

```
<div id="myDiv" class="myClass" data-country="US" data-city="NY" /> 
```

在此示例中，我需要获取所有`data-*`属性并将它们放入数组（名称和值对）中。

在此示例中，最终数组如下所示：

```
myDataArray["data-country"] = "US";
myDataArray["data-city"] = "NY"; 
```

问题是这些属性是动态的，我不知道运行时会有哪些属性，我不能硬编码填充数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T13:25:27.927

您可以调用[**data()**](http://api.jquery.com/jQuery.data/)来获取所有数据属性。

**[现场演示](http://jsfiddle.net/kqbFF/)**

```
myDataArray = $('#myDiv').data();
alert(myDataArray["country"]);
alert(myDataArray["city"]); 
```

您可以像这样遍历键值对，

**[现场演示](http://jsfiddle.net/kqbFF/2/)**

```
arr = $('#myDiv').data();

for(el in arr)
{
    alert("Key >> " + el);
    alert("Value >> " + arr[el]);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-03T13:27:25.400

```
var myDataObject = document.getElementById('myDiv').dataset; 
```

[http://jsfiddle.net/qQWBB/](http://jsfiddle.net/qQWBB/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T14:12:50.040

试试这个

```
var data = $('#myDiv').data();
var myDataArray = [];
$.each(data, function(key, val){
        myDataArray['data-' + key] = val;
});
console.log(myDataArray); 
```

***[现场演示](http://jsfiddle.net/cQ4Ty/)***

# c# - 使用 MVC 3 以编程方式在 App.config 中更改或添加连接字符串

> ID：14672938
> 
> 赞同：1
> 
> 时间：2013-02-03T13:23:44.370
> 
> 标签：c#, asp.net-mvc-3, app-config

是否可以通过编程方式在 App.config 的连接字符串中添加或更改连接？我已经尝试过

```
 var A = ConfigurationManager.ConnectionStrings;
    A.Add(new ConnectionStringSettings()); 
```

但我收到一条消息，它是只读的。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:28:26.387

对 Web 应用程序配置文件的任何修改都需要重新启动 IIS。因此，您无法从代码中对文件进行运行时修改，因为这需要重新启动整个应用程序。

# java - 绘制 rmathematical 函数作为 android 应用程序的一部分，这可能吗？

> ID：14672941
> 
> 赞同：0
> 
> 时间：2013-02-03T13:24:05.013
> 
> 标签：java, android

我的目标是开发我现有的 MATLAB GUI 的 java 版本。我的 GUI 实际所做的大部分工作是使用 2D 绘图函数在一对 x、y 轴上绘制数学函数。数据由编辑框插入，绘图按钮用于激活功能。

有一个函数 y=y(x) 然后像 plot(x,y) 这样的简单命令就可以完成这项工作，其中 x 和 y 是某种数组。看起来 MATLAB 所做的如此简单而准确（这就是它的设计目的），需要 Java 付出更多的努力。

谷歌搜索使我使用 OpenGL 来获取 2D 图形。但是，我认为我需要的仍然不是图形。我正在寻找的是情节类和方法。

所以我的问题是是否有一种简单的方法来描述一对轴内的数学函数，这可能是 android 应用程序的布局视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:28:17.613

正如您所说，Java 不具备 Matlab 的所有内部数学相关功能。你必须自己实现这个..意味着实际上在某种图形画布上绘制图形点。

幸运的是，许多其他人之前也有过这个要求，并最终创建了为您执行此操作的库。

那么，您的任务是找到最适合您需求的库并使用它。

关于从哪里开始寻找的一些指示：[https ://stackoverflow.com/questions/424752/any-good-graphing-packages-for-android](https://stackoverflow.com/questions/424752/any-good-graphing-packages-for-android)

# vb.net - 子类化 NumericUpDown 控件

> ID：14672944
> 
> 赞同：0
> 
> 时间：2013-02-03T13:24:20.283
> 
> 标签：vb.net

[我从这里](https://stackoverflow.com/questions/3201029/select-the-content-of-textbox-when-it-reveives-focus)通过示例根据我的需要对文本框进行了子类化

同样，我尝试对 NumericUpDown 控件进行子类化以获取它们的 selectAll 功能并替换 if point (".") char is press to comma (",") char 以适应更适合我的语言环境的 NumericUpDown 控件。

但我不能这样做，因为 NumericUpDown 没有像文本框那样的相同属性，我希望这两个控件的行为方式相同。

在我的代码中，仍然存在两个问题， SelectAll 和 SelectionLength ：

```
Option Explicit On
Option Strict On

Public Class xNumericUpDown
Inherits NumericUpDown

Private alreadyFocused As Boolean

Protected Overrides Sub OnLeave(ByVal e As EventArgs)
    MyBase.OnLeave(e)

    Me.alreadyFocused = False

End Sub

Protected Overrides Sub OnGotFocus(ByVal e As EventArgs)
    MyBase.OnGotFocus(e)

    If MouseButtons = MouseButtons.None Then

        Me.SelectAll() ' HOW TO MAKE SELECTALL SUB FOR NUMERICUPDOWN?
        Me.alreadyFocused = True

    End If
End Sub

Protected Overrides Sub OnMouseUp(ByVal mevent As MouseEventArgs)
    MyBase.OnMouseUp(mevent)

    If Not Me.alreadyFocused AndAlso Me.SelectionLength = 0 Then ' HOW TO CHECK SELECTIONLENGTH FOR NUMERICUPDOWN?

        Me.alreadyFocused = True
        Me.SelectAll() ' HOW TO MAKE SELECTALL SUB FOR NUMERICUPDOWN?

    End If
End Sub

Protected Overrides Sub OnKeyPress(ByVal keyevent As KeyPressEventArgs)
    MyBase.OnKeyPress(keyevent)

    If keyevent.KeyChar = "." Then
        keyevent.KeyChar = CChar(",")
    End If
End Sub

End Class 
```

请帮助使其正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T13:37:26.040

检查长度并选择所有文本试试这个：

```
If Not Me.alreadyFocused AndAlso Me.Text.Length = 0 Then 'Though I suspect it should be <> 0

   Me.alreadyFocused = True
   Me.Select(0, Me.Text.Length)

End If 
```

对于字符替换，试试这个（未经测试）：

```
If keyevent.KeyChar = "."c Then
      keyevent.Handled = True
      SendKeys.Send(",")
End If 
```

# c# - jQuery 和 wcf 服务和 windows 服务

> ID：14672948
> 
> 赞同：0
> 
> 时间：2013-02-03T13:24:33.950
> 
> 标签：c#, jquery, service

IWam 在 vs2012 中创建了 ac# WCF Service Application 项目。我可以在 vs2012 上测试我的服务。但是我会将我的项目添加到 Windows 服务中。所以我可以连接我的 jquery 客户端程序。我的jQuery代码是

```
$.ajax({
    type:'GET',
    url:"http://localhost:50992/Service1.svc?singleWsdl",
    processData:false,
    contentType:"application/json; charset=utf-8",
    dataType:"json",
    success: function(data){
        alert(data);
    },
    error: function(xhr,status,error){
        alert(error);
    }
}) 
```

url 是我的 wcf 项目 url。但是当我关闭我的 wcf 测试面板时，服务正在停止。我会将我的 wxf 项目添加到我的 windows 服务中。所以我可以从 jquery 连接到这个服务。我可以做些什么来添加我的 wcf 服务到windows服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:30:20.437

使用[这篇](http://www.codeproject.com/Articles/132809/Calling-WCF-Services-using-jQuery)文章和[这个](http://blog.thomaslebrun.net/2011/11/jquery-calling-a-wcf-service-from-jquery/#.UQ5mkaVwrgM)

```
function GetTeamData(teamId, weekNumber) {
    $.ajax(
    {
        async: true,
        type: "GET",
        contentType: "application/json; charset=utf-8",
        url: "../../Services/RunningBarbusService.svc/GetTeamData",
        dataType: "json",
        data: '{"teamId":"' + teamId + '", "weekNumber":"' + weekNumber + '"}',
        success: function (content) {
            DisplayRun(map, content);
        }
    });
} 
```

# google-maps - 在路线图中标记太多西，在卫星地图中，在标签检查时确定

> ID：14672952
> 
> 赞同：1
> 
> 时间：2013-02-03T13:25:20.720
> 
> 标签：google-maps, google-maps-api-3

在[http://www.groenteruilen.nl/index2.html](http://www.groenteruilen.nl/index2.html)中，标记（在路线图中）显示了太多的西部。选择卫星模式时，如果仅选中标签复选框，则标记显示为 OK。所以路线图和卫星地图的位置是有区别的。

也许相关：缩放按钮不起作用。

# firebase - Firebase pop（）与push（）相反？

> ID：14672954
> 
> 赞同：3
> 
> 时间：2013-02-03T13:25:29.360
> 
> 标签：firebase

我想实现一个堆栈（队列），许多用户可以以 FILO 方式 push() 到并且许多用户可以从中 pop()。

是否有等效于`pop()`检索/删除列表最后一项的方法？

例如：

```
var popRef = firebaseRef.pop(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T19:09:06.053

这是非常可行的，但有点棘手。由于您将有多个用户尝试删除项目，因此您必须处理多个用户尝试删除同一项目的情况（这实际上是一个分布式系统问题）。大概您只希望一个用户成功。解决方案是使用事务来确保只有一个用户可以成功删除特定项目。

我们在 github 上有一个“工作队列”示例，与您正在寻找的非常相似：[https ://github.com/firebase/firebase-work-queue](https://github.com/firebase/firebase-work-queue)

它与您要求的最大区别在于它是 FIFO 而不是 FILO。要将其更改为 FILO，您需要从 workqueue.js 修改此行：

```
queueRef.startAt().limit(1).on("child_added", function(snap) { 
```

*那里的 .startAt() 告诉它从列表的开头*抓取第一项（即最旧的项）。要获取列表中的最后一项（即最新项），您可以将“startAt()”更改为“endAt()”或完全省略“startAt()”（默认情况下，我们将获得最后一项）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T14:32:42.437

你想要一个*“先到先得”*，它是一个 FIFO，所以你不需要，`pop()`但`unshift()`它在 JavaScript 中可用：

```
// Performs a dequeue: gets the 0-index item and removes it
// from the original array
var popRef = firebaseRef.unshift(); 
```

要执行 FILO，您需要使用[`pop()`](http://www.w3schools.com/jsref/jsref_pop.asp).

**火力基地更新：**

```
 // Get a reference to the root of the chat data.
  var messagesRef = new Firebase('https://example37192028.firebaseio-demo.com/');
  var tokens = [];
  // When the user presses enter on the message input, write the message to firebase.
  $('#messageInput').keypress(function (e) {
      if (e.keyCode == 13) {
          var name = $('#nameInput').val();
          var text = $('#messageInput').val();
          tokens.push(messagesRef.push({name:name, text:text}));
          $('#messageInput').val('');
      } else if (e.keyCode == 32) {
          // Removing from the stack on spacebar
          var token = tokens.pop();
          token.remove();
          $('#messageInput').val('');
      }
  });

  // Add a callback that is triggered for each chat message.
  messagesRef.on('child_added', function (snapshot) {
      var message = snapshot.val();
      $('<div/>').text(message.text).prepend($('<em/>').text(message.name+': ')).appendTo($('#messagesDiv'));
      $('#messagesDiv')[0].scrollTop = $('#messagesDiv')[0].scrollHeight;
  });
  messagesRef.on('child_removed', function (snapshot) {
      var message = snapshot.val();
      $('<div/>').text('removed:' + message.text).prepend($('<em/>').text(message.name+': ')).appendTo($('#messagesDiv'));
      $('#messagesDiv')[0].scrollTop = $('#messagesDiv')[0].scrollHeight;
  }); 
```

# c# - 如何使用 SQL 选择语句从自动编号 id 获取某些数据

> ID：14672960
> 
> 赞同：-1
> 
> 时间：2013-02-03T13:25:50.483
> 
> 标签：c#, asp.net, sql-server

**问题：**

我怎样才能得到确定`autonumber id`？

```
ID  DESCRIPTION CLASS 
 1  test1         a 
 2  test2         b
 3  test3         a
 4  test4         a 
 5  test5         b 
```

`id`（SQL Server 中的自动增量）

**这是场景：**

我这里有 3 列类似的内容。

我的类被声明为使用它来获取某个类的值。

```
string strclass = string.empty;
strclass = request.querystring["Class"]; 
```

我怎样才能得到 id `test2`？

我想使用这个`select`语句，其中我将只使用变量。

例如：

```
string sqltest = "select description from items where class = '" + strID + "' and class = '" strclass "'"; 
```

我真的不知道，我将如何获得课程`id`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:20:53.190

你的问题真的很令人困惑。您想要 id 但您的 SQL 返回描述。当然，您的 SQL 应该是：

```
string sqltest = "select id from items where description = @description and class = @class"; 
```

不要使用字符串连接来生成 SQL 字符串，因为这会使您面临 SQL 注入攻击。

# highstock - Highstock 查找数据分组并导致的点数

> ID：14672964
> 
> 赞同：0
> 
> 时间：2013-02-03T13:26:15.820
> 
> 标签：highstock

如果完成数据分组，我想在图表中显示接收到的数据点数以及分组后显示的点数，即分组后收到的数据点数/数：分组后的点数。在 Highstock 中是可能的。

谢谢，森希尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:21:33.037

它在 dataGrouping 中不可用，但您可以准备自己的分组函数，该函数将返回此参数。

[http://api.highcharts.com/highstock#plotOptions.area.dataGrouping.approximation](http://api.highcharts.com/highstock#plotOptions.area.dataGrouping.approximation)

# android - 无法在地图中的当前位置周围画一个圆圈

> ID：14672965
> 
> 赞同：1
> 
> 时间：2013-02-03T13:26:34.580
> 
> 标签：android, android-maps

我正在尝试在地图中显示我当前的位置以及地址。下面的代码工作正常，但不知何故我无法在我当前的位置周围绘制或指向一个圆圈。任何帮助将不胜感激。我使用的是旧 API。

这是我的主要课程。

```
 public class GMapsActivity extends MapActivity implements LocationListener { 

    private static final String TAG = "LocationActivity";
    private static GMapsActivity instance;
    private MapView mapView; 
    protected LocationManager locationManager;
    public Button retrieveLocationButton;
    Geocoder geocoder; 
    TextView locationText;
    Location location;
    MapController mapController;
    CountDownTimer locationtimer;

        //  private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
//  private static final long MINIMUM_TIME_BETWEEN_UPDATES = 9000; // in Milliseconds
//    MapOverlay mapOverlay = new MapOverlay();
    @Override        
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
           setContentView(R.layout.activity_gmaps);

        mapView = (MapView) findViewById(R.id.map_view);
        mapView.setBuiltInZoomControls(true);
        locationText = (TextView)this.findViewById(R.id.lblLocationInfo);
        mapController = mapView.getController();  
        mapController.setZoom(13);
        retrieveLocationButton = (Button) findViewById(R.id.retrieve_location_button);

    }
    public void showcurrentlocation(View view) {

        geocoder = new Geocoder(GMapsActivity.this);
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        mapView.getOverlays().add(new CircleOverlay(this, location.getLatitude(),location.getLongitude(),325));  
        if (location != null) {     
            Log.d(TAG, location.toString());   
            this.onLocationChanged(location); //<6>  

            } 
        }

    @Override  
            public void onLocationChanged(Location location) {
            Log.d(TAG, "onLocationChanged with location " + location.toString());   
            String text = String.format("Lat:\t %f\nLong:\t %f\nAlt:\t %f\nBearing:\t %f", location.getLatitude(),location.getLongitude(), location.getAltitude(),
                    location.getBearing());
            this.locationText.setText(text);  

                    try {     
                        List<Address> addresses = geocoder.getFromLocation(location.getLatitude(), location.getLongitude(), 10); //<10> 
                        for (Address address : addresses) {    
                            this.locationText.append("\n" + address.getAddressLine(0));   
                            }          
                        int latitude = (int)(location.getLatitude() * 1000000);  
                        int longitude = (int)(location.getLongitude() * 1000000);  
                        GeoPoint point = new GeoPoint(latitude,longitude);    
                        mapController.animateTo(point); //<11> 

                    }
                    catch (IOException e) {  
                        Log.e("LocateMe", "Could not get Geocoder data", e);   
                        }

    }
                    @Override
                    public void onProviderDisabled(String provider) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onProviderEnabled(String provider) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onStatusChanged(String provider, int status,Bundle extras) {
                        // TODO Auto-generated method stub

                    }

//                  @Override  protected void onResume() { 
//                  LocationListener locationListener = new LocationListener(){
//                        super.onResume(); 
//                  locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 10, this); //<7> 
//                  }  
//              @Override  protected void onPause() { 
//                  super.onPause();   
//                  locationManager.removeUpdates(this); //<8>
//                      
//                  }

      @Override
        protected boolean isRouteDisplayed() {
           return false;

        }
} 
```

下面是我的圈课。

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Point;
import android.util.FloatMath;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.Projection;

public class CircleOverlay extends Overlay {

    Context context;
    double mLat;
    double mLon;
    float mRadius;

    public CircleOverlay(Context _context, double _lat, double _lon, float radius ) {
        context = _context;
        mLat = _lat;
        mLon = _lon;
        mRadius = radius;

        }

    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        super.draw(canvas, mapView, shadow); 

        if(shadow) return; // Ignore the shadow layer

        Projection projection = mapView.getProjection();

        Point pt = new Point();

        GeoPoint geo = new GeoPoint((int) (mLat *1e6), (int)(mLon * 1e6));

        projection.toPixels(geo ,pt);
        float circleRadius = projection.metersToEquatorPixels(mRadius) * (1/ FloatMath.cos((float) Math.toRadians(mLat)));

        Paint innerCirclePaint;

        innerCirclePaint = new Paint();
        innerCirclePaint.setColor(Color.BLUE);
        innerCirclePaint.setAlpha(25);
        innerCirclePaint.setAntiAlias(true);

        innerCirclePaint.setStyle(Paint.Style.FILL);

        canvas.drawCircle((float)pt.x, (float)pt.y, circleRadius, innerCirclePaint);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:45:19.133

来自谷歌的例子：[hello-mapview](https://developers.google.com/maps/documentation/android/v1/hello-mapview)

每次将新的 OverlayItem 添加到 ArrayList 时，都必须为 ItemizedOverlay 调用 populate()，这将读取每个 OverlayItem 对象并准备绘制它们。

```
public void showcurrentlocation(View view) {

    geocoder = new Geocoder(GMapsActivity.this);
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    mapView.getOverlays().add(new CircleOverlay(this, location.getLatitude(),location.getLongitude(),325));  
    if (location != null) {     
        Log.d(TAG, location.toString());   
        this.onLocationChanged(location); //<6>  
    } 
    populate(); 
```

}

但我认为您应该为此[MyLocationOverlay使用 MyLocationOverlay 类](http://code.google.com/android/add-ons/google-apis/reference/com/google/android/maps/MyLocationOverlay.html)

# google-bigquery - 作业执行期间遇到的错误。意外。请再试一次。

> ID：14672966
> 
> 赞同：0
> 
> 时间：2013-02-03T13:26:48.923
> 
> 标签：google-bigquery

在过去的几天里，我试图将文件上传到我的 BigQuery 表，但它一直失败：“作业执行期间遇到错误。意外。请重试。” JobsIds 例如：job_8bf7e7d257884d3bab2e04ac1208fedb job_4354aa20427a4453ab14f9f18365d216 job_8b287b73b19d4a8a9dacc5f002e265a9

我检查过没有大于 64K 的行。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T22:19:26.840

您似乎在 BigQuery 的上传代码中遇到了内部错误。我们将进一步调查，但与此同时，一种可能的解决方法是将您的数据临时上传到 Google Cloud Storage，然后从那里导入 BigQuery。（您可以在 BigQuery 导入完成后立即删除 Cloud Storage 对象。）

抱歉给您添麻烦了！

# android - 果冻豆视频意图在捕获后不返回

> ID：14672968
> 
> 赞同：4
> 
> 时间：2013-02-03T13:27:22.573
> 
> 标签：android, video-capture, android-4.2-jelly-bean, android-camera-intent

我正在使用运行 Android 4.1.1（果冻豆）的三星 Galaxy Tab 2，我最近从 4.0.4（冰淇淋三明治）升级。

我使用 MediaStore 的 ACTION_VIDEO_CAPTURE 操作在我的活动中捕获视频。

```
Uri uriSavedVideo = Uri.fromFile(output);

Intent videoIntent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);

videoIntent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1); 
videoIntent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedVideo);

startActivityForResult(videoIntent, CAMERA_VIDEO_CAPTURE_MODE); 
```

录制视频并从 ICS 中可用的保存/丢弃选项中按下“保存”按钮后，此代码返回到我的主要意图。

在我升级后，视频操作肯定发生了变化，即使在成功捕获视频后，意图也不会返回到我的呼叫意图，我和我的用户必须按下后退按钮才能回到我的呼叫意图。

关于如何避免这种情况的任何想法或建议。预期的行为是，一旦视频被捕获，它应该返回到调用意图。

# module - Verilog：连接模块端口而不实例化新线

> ID：14672974
> 
> 赞同：3
> 
> 时间：2013-02-03T13:27:58.463
> 
> 标签：module, verilog, system-verilog

有没有办法在不实例化新线的情况下连接两个模块端口？

小例子：

```
module comparator(max,min,in0,in1);

    input[7:0] in0,in1;
    output[7:0] max,min;

    wire[7:0] in0;
    wire[7:0] in1;
    wire[7:0] max;
    wire[7:0] min;

    assign max = (in0>in1) ? in0 : in1;
    assign min = (in0<in1) ? in0 : in1;

endmodule 
```

我想在不使用新线的情况下连接 2 个比较器模块，是否存在某种隐式连接？我真的需要一种方法来做这样的事情才能做到这一点： ![在此处输入图像描述](../Images/ab5ec4e43f4eea31fdd5b23b6f816b8d.png)

模块之间有很多电线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:59:26.507

IEEE Std (1364-2001) 引入了`generate`允许将多个实例连接在一起的结构。

IEEE Std (1800-2005) 引入了“点星”( `.*`) 语法，也称为隐式端口连接，以减少布线。如果您使用现代工具，它们应该支持这种 SystemVerilog 语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T03:39:49.930

我猜你想要一个模块，它`comparator`以一种看起来像你的图表的方式多次实例化模块。您需要一个数组（在我的解决方案中是二维的）是由参数控制的宽度以获得最佳灵活性。在`generate`块内部使用`for-loops`和`if-else`语句来建立连接。我的解决方案使用数组的切片，例如`+:`.

这遵循 IEEE 标准 (1800-2009)，也应该适用于 IEEE 标准 (1800-2005)。

```
module comparator_list #(parameter int SIZE=10) (input logic [7:0] in [SIZE-1:0], output logic [7:0] out [SIZE-1:0]);
    generate
        if (SIZE==1) begin : pass_through
            always_comb out = in;
        end : pass_through
        else if (SIZE==2) begin : simple
            comparator c0 ( .max(out[0]), .min(out[1]), .in0(in[0]), .in1(in[1]) );
        end : simple
        else if (SIZE%2==1) begin : odd_list
            logic [7:0] in_buf [SIZE:0];
            logic [7:0] out_buf [SIZE:0];
            always_comb begin : link_in
                foreach(in[idx]) in_buf[idx] = in[idx];
                in_buf[SIZE] = 8'h00; // force last entry to 'h0 if unasigned, 'h80 if signed
            end : link_in
            always_comb begin : link_out
                foreach(out[idx]) out[idx] = out_buf[idx];
                // Note: out_buf[SIZE] is don't care
            end : link_out
            comparator_list #(SIZE+1) cl (.in(in_buf), .out(out_buf));
        end : odd_list
        else begin : even_list
            logic [(SIZE/2)*8-1:0] top [SIZE+1];
            logic [(SIZE/2)*8-1:0] bot [SIZE+1];

            for(genvar idx=0; idx<SIZE/2; idx+=1) begin : map
                always_comb {top[0][idx*8+:8],bot[0][idx*8+:8]} = {in[2*idx],in[2*idx+1]};
                always_comb {out[2*idx],out[2*idx+1]} = {top[SIZE][idx*8+:8],bot[SIZE][idx*8+:8]};
            end : map

            for(genvar stage=0; stage<SIZE; stage++) begin : link
                if(stage%2==0) begin : even
                    comparator c0[SIZE/2-1:0] (
                        .max(top[stage+1][0+:(SIZE/2)*8]), .in0(top[stage][0+:(SIZE/2)*8]),
                        .min(bot[stage+1][0+:(SIZE/2)*8]), .in1(bot[stage][0+:(SIZE/2)*8]) );
                end : even
                else begin : odd
                    assign top[stage+1][7:0] = top[stage][7:0];
                    comparator c1[SIZE/2-2:0] (
                        .max(bot[stage+1][0+:(SIZE/2-1)*8]),
                        .min(top[stage+1][8+:(SIZE/2-1)*8]),
                        .in0(bot[stage][0+:(SIZE/2-1)*8]),
                        .in1(top[stage][8+:(SIZE/2-1)*8])
                    );
                    assign bot[stage+1][(SIZE/2-1)*8+:8] = bot[stage][(SIZE/2-1)*8+:8];
                end : odd
            end : link
        end : even_list
    endgenerate
endmodule : comparator_list 
```

# flash - 用matlab打开swf文件

> ID：14672975
> 
> 赞同：0
> 
> 时间：2013-02-03T13:28:04.340
> 
> 标签：flash, matlab

我想用 Matlab 打开一个 swf 或一个 flash 文件。我只想让 matlab 加载和播放一个 flah 电影。那可能吗？我可以使用哪些功能。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:32:08.350

有人制作了一个演示，请参阅[Playing with ShockWave Flash 电影](http://www.mathworks.com/matlabcentral/fileexchange/8909-playing-with-shockwave-flash-movies)

# vb.net - 如何在事件中加载 vb.net 程序？

> ID：14672978
> 
> 赞同：0
> 
> 时间：2013-02-03T13:28:10.990
> 
> 标签：vb.net, serial-port

我正在通过串行端口向我的计算机发送一些数据。因此，一旦数据到达所述端口，我想加载一个要加载的 VBNet 程序。换句话说，程序将由到达端口的数据触发。

我该如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T17:51:04.777

试试这个。它假设将收到 3 个字节。您需要根据要发送的字节数对其进行更改。正如 Mark 建议的那样，使用 Process 来启动程序。或者，您可以使用 Shell。

```
Imports System.IO.Ports

Public Class COMControl

Private WithEvents comPort As SerialPort

Public Sub New(comPortNumber As Integer)

    comPort = New SerialPort
    With comPort
        .BaudRate = 9600
        .Parity = IO.Ports.Parity.None
        .StopBits = IO.Ports.StopBits.One
        .DataBits = 8
        .PortName = "COM" & comPortNumber.ToString
        .ReceivedBytesThreshold = 3
        .Open()
    End With

End Sub

Private Sub comPort_DataReceived(sender As Object, e As System.IO.Ports.SerialDataReceivedEventArgs) Handles comPort.DataReceived

    If comPort.BytesToRead = 3 Then
        Dim by(comPort.BytesToRead - 1) As Byte

        'Read the bytes from the port...
        comPort.Read(by, 0, comPort.BytesToRead)

        '...into an array of bytes
        Dim byList As New List(Of Byte)
        byList.AddRange(by)

        Dim inp As String = System.Text.Encoding.ASCII.GetString(by)

        Select Case inp

            Case "P01"
                Process.Start("PO1.exe")

            Case "P02"
                Process.Start("PO2.exe")

        End Select

    End If
End Sub
End Class 
```

# asp.net - 在gridview中打印两列标题

> ID：14672979
> 
> 赞同：1
> 
> 时间：2013-02-03T13:28:11.837
> 
> 标签：asp.net, .net, vb.net

我有带有两列标题的gridview，我想让它在每一页上都可见。

标头在以下函数中创建：

```
Protected Sub grdOriginal_RowCreated(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles grdOriginal.RowCreated

    If e.Row.RowType = DataControlRowType.Header Then

        Dim HeaderRow As GridViewRow = New GridViewRow(0, 0, DataControlRowType.Header, DataControlRowState.Insert)
        Dim Cell_Header As TableCell = New TableCell()
        Cell_Header = New TableCell()
        Cell_Header.Text = "Ознака табле"
        Cell_Header.HorizontalAlign = HorizontalAlign.Center
        Cell_Header.Width = "150"
        Cell_Header.RowSpan = 2
        Cell_Header.Font.Bold = True
        HeaderRow.Cells.Add(Cell_Header)

        Cell_Header = New TableCell()
        Cell_Header.Text = "Површине делова табли по процембеним разредима"
        Cell_Header.HorizontalAlign = HorizontalAlign.Center
        Cell_Header.Width = "370"
        Cell_Header.Font.Bold = True
        Cell_Header.ColumnSpan = 8
        HeaderRow.Cells.Add(Cell_Header)

        Cell_Header = New TableCell()
        Cell_Header.Text = "Укупна површина табле"
        Cell_Header.HorizontalAlign = HorizontalAlign.Center
        Cell_Header.Width = "70"
        Cell_Header.RowSpan = 2
        Cell_Header.Font.Bold = True
        HeaderRow.Cells.Add(Cell_Header)

        Cell_Header = New TableCell()
        Cell_Header.Text = "Укупна вредност табле"
        Cell_Header.HorizontalAlign = HorizontalAlign.Center
        Cell_Header.Width = "70"
        Cell_Header.RowSpan = 2
        Cell_Header.Font.Bold = True
        HeaderRow.Cells.Add(Cell_Header)

        Cell_Header = New TableCell()
        Cell_Header.Text = "Примедба"
        Cell_Header.HorizontalAlign = HorizontalAlign.Center
        Cell_Header.Width = "70"
        Cell_Header.RowSpan = 2
        Cell_Header.Font.Bold = True
        HeaderRow.Cells.Add(Cell_Header)

        e.Row.Cells(0).Visible = False
        e.Row.Cells(9).Visible = False
        e.Row.Cells(10).Visible = False
        e.Row.Cells(11).Visible = False
        'e.Row.Cells(4).Visible = False
        'e.Row.Cells(12).Visible = False
        'e.Row.Cells(13).Visible = False
        'e.Row.Cells(14).Visible = False
        grdOriginal.Controls(0).Controls.AddAt(0, HeaderRow)

    End If
End Sub 
```

我尝试使用：[如何在每个打印页面上打印 GridView 的标题，](https://stackoverflow.com/questions/9317756/how-to-print-header-of-gridview-on-each-print-page)当我有一个标题列但当我尝试制作两列标题时不起作用。

任何机构都知道如何做到这一点？

谢谢我有gridview

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:24:05.913

[THEAD](http://htmlhelp.com/reference/html40/tables/thead.html)是在每个打印页面上保留表格标题的元素。

您需要做的是在网格视图上将其设置为：

```
GridView1.HeaderRow.TableSection = TableRowSection.TableHeader; 
```

`GridView1`您的 GridView 的 id在哪里。这[尚未在 google chrome 上运行](https://code.google.com/p/chromium/issues/detail?id=24826)。

参考：
[让 Google Chrome 在打印页面上](https://stackoverflow.com/questions/7211229/having-google-chrome-repeat-table-headers-on-printed-pages)
[重复表格标题 在打印模式下重复表格标题](https://stackoverflow.com/questions/274149/css-repeat-table-headers-in-print-mode)
[如何让 Gridview 呈现 THEAD？](https://stackoverflow.com/questions/309101/how-do-i-get-gridview-to-render-thead)

# android - 如何防止操作栏选项卡显示为下拉列表？

> ID：14672984
> 
> 赞同：1
> 
> 时间：2013-02-03T13:28:45.917
> 
> 标签：android, android-tabs

尝试使用由 ADT 插件创建的默认项目操作栏+选项卡。在某些设备上，屏幕旋转后选项卡移至下拉列表。

Android 开发者指南[说](http://developer.android.com/guide/topics/ui/actionbar.html)：

> **注意：**在某些情况下，Android 系统会将您的操作栏选项卡显示为下拉列表，以确保最适合操作栏。

但是，如果我想禁用此功能并始终显示选项卡，有正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T14:29:05.047

没有办法做到这一点，AFAIK。我[就这一点提出了一个问题](http://code.google.com/p/android/issues/detail?id=24439)，并被告知它正在按设计工作。

恕我直言，最简单的解决方案是不使用操作栏选项卡，而是切换到`ViewPager`它的选项卡（`PagerTabStrip`、来自 ViewPagerIndicator 的选项卡式指示器等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-27T21:05:29.067

添加选项卡后，您应该添加以下行。

```
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); //Important! Must be after all .addTab 
```

# python - 如何让 Jinja2 将所有 UndefinedError 异常转换为空字符串？

> ID：14672992
> 
> 赞同：4
> 
> 时间：2013-02-03T13:29:57.303
> 
> 标签：python, flask, jinja2

我的代码中的许多模型都具有可以为无的关系。`None`很多时候，这需要在访问数据之前进行检查：

```
{% if foo.bar %}
   {{ foo.bar.baz }}
{% endif %} 
```

如果我不添加该检查，则页面会因未定义错误而完全中断。从 Flask 应用程序运行时，有什么方法可以让 Jinja2 中的 UndefinedErrors 静默失败？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T02:31:22.183

只需创建一个在属性访问时返回自身的子类，并通过覆盖该方法[`jinja2.Undefined`](http://jinja.pocoo.org/docs/api/#jinja2.Undefined)将其设置为您的环境的未定义类型：[`create_jinja_environment`](http://flask.pocoo.org/docs/api/#flask.Flask.create_jinja_environment)

```
from flask import Flask
from jinja2 import Undefined
from werkzeug.datastructures import ImmutableDict

class MalleableUndefined(Undefined):
    def __getitem__(self, key):
        return self

    def __getattr__(self, key):
        return self

class CustomFlask(Flask):
    def create_jinja_environment(self):
        self.jinja_options = ImmutableDict(undefined=MalleableUndefined, **self.jinja_options)
        return super(CustomFlask, self).create_jinja_environment() 
```

# mysql - GROUP_CONCAT，返回一行和空问题

> ID：14672995
> 
> 赞同：1
> 
> 时间：2013-02-03T13:30:18.693
> 
> 标签：mysql, sql, database, select

我有一个问题似乎与之前发布的其他人相似，但这些问题的解决方案似乎并不适合我。

我想要做的是从一个数据库中选择与特定用户相关的行（在另一个数据库中找到），然后从第三个数据库中获取任何关联的附件，所以：

*   表`users`（id 是我们从中获取的全部内容）
*   表`membership`（staff_id 和 group_id 是我需要的）
*   表`msg_group`（id、starts、expires 和 message 是我关心的）
*   表`msg_attach`（id、ident、type 和 file 是我需要的）

所以。我有这个查询：

```
SELECT msg_group.message, msg_group.starts, 
       msg_group.expires, 
       GROUP_CONCAT(msg_attach.file SEPARATOR ',')
FROM `membership`
INNER JOIN `msg_group` 
       ON membership.group_id = msg_group.group_id 
LEFT JOIN `msg_attach` 
       ON msg_group.id = msg_attach.ident AND msg_attach.type = "1"
WHERE membership.staff_id = "1"
AND msg_group.starts <= CURRENT_TIMESTAMP 
AND msg_group.expires >= CURRENT_TIMESTAMP 
ORDER BY msg_group.expires ASC LIMIT 0, 30 
```

它的问题是，应该返回 5 行。应该在 msg_attach.file 列中有“file.jpg,file2.jpg”。这很好，但是我应该在它下面还有 4 行，在 msg_attach 列中为 NULL。

为了解决这个问题，我尝试使用 IFNULL(msg_attach.file, 'null') 但是所有这些返回仍然是一行，但 file.jpg、file2.jpg、null、null、null、null。

我想要的是行女巫附件是file.jpg，file2.jpg，然后在该列中再有4行将“空”。

我希望我已经解释得足够清楚了！#

感谢您的任何帮助。亚历克斯

编辑：示例表和数据。

味精组：

```
------------------------------------------------------------
| id | group_id | message               | starts | expires |
| 1  |   1      | PIES                  | date 1 | date 2  |
| 2  |   1      | CAKES                 | date 1 | date 2  |
| 3  |   1      | BEERS                 | date 1 | date 2  |
| 4  |   1      | POMMEGRANITES         | date 1 | date 2  |
------------------------------------------------------------ 
```

msg_attach：

```
---------------------------------
| id | type | ident| file       |
| 1  |  1   |  3   | corona.jpg |
| 2  |  1   |  3   | peroni.png |
--------------------------------- 
```

所以我希望我的查询返回：

```
------------------------------------------------------------
| message       | starts | expires | file                  |
| PIES          | date1  | date2   | null                  |
| CAKES         | date1  | date2   | null                  |
| BEERS         | date1  | date2   | corona.jpg,peroni.png |
| POMMEGRANITES | date1  | date2   | null                  |
------------------------------------------------------------ 
```

我得到的是：

```
------------------------------------------------------------
| message       | starts | expires | file                  |
| BEERS         | date1  | date2   | corona.jpg,peroni.png |
------------------------------------------------------------ 
```

或使用 ISNULL：

```
------------------------------------------------------------------------------
| message       | starts | expires | file                                    |
| BEERS         | date1  | date2   | null, corona.jpg,peroni.png, null, null |
------------------------------------------------------------------------------ 
```

这全都省略了我不/认为/与问题相关的会员和用户的东西。如果没有 GROUP_CONCAT（即只有 msg_attach.file），我将返回 5 行，其中只有 2 行用于 BEERS，文件单独列出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:00:45.067

简化的查询应该是这样的，

```
SELECT  a.message, a.starts, a.expires,
        GROUP_CONCAT(b.file) fileList
FROM    msg_group a
        LEFT JOIN msg_attach b
            ON a.group_ID = b.type AND
                a.id = b.ident
GROUP   BY a.message, a.starts, a.expires 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/04713/2)

编辑：由 Bogomip 因为我不知道如何对此做出完整评论：

谢谢，我不得不进行一些更改以合并用户和内容，但这现在可以工作了:)

```
SELECT  msg_group.message, msg_group.starts, msg_group.expires, GROUP_CONCAT(msg_attach.file) attachments
FROM    msg_group
INNER JOIN membership ON membership.group_id = msg_group.group_id 
LEFT JOIN msg_attach ON msg_group.id = msg_attach.ident AND msg_attach.type = "1"
WHERE membership.staff_id = "1"
AND msg_group.starts <= CURRENT_TIMESTAMP 
AND msg_group.expires >= CURRENT_TIMESTAMP 
GROUP   BY msg_group.expires, msg_group.starts, msg_group.message
ORDER BY msg_group.expires ASC LIMIT 0, 30 
```

# php - 将连接和查询从 mysql 重写为 mysqli

> ID：14672997
> 
> 赞同：0
> 
> 时间：2013-02-03T13:30:22.567
> 
> 标签：php, mysqli

一直`MySQL`与典型的 PHP 一起使用`mysql_query`，`mysql_fetch_array`但现在我正在转向，`Mysqli`因为它将是未来。

我是新手并将其用于个人，所以我决定问你如何在规则中重写所有这些`Mysqli`

假设我们有以下数据库`users(id,name,job,number)`

```
CREATE TABLE `users` (
  `id` bigint(20) unsigned NOT NULL auto_increment,
  `name` varchar(255) default '0',
  `job` varchar(255) default NULL,
  `number` varchar(255) default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=3 ;

INSERT INTO `users` VALUES (1, 'John', 'Plumber', '555');
INSERT INTO `users` VALUES (2, 'Iva', 'Reporter', '666');
INSERT INTO `users` VALUES (3, 'Robert', 'Writer', '777');
INSERT INTO `users` VALUES (4, 'Irin', 'Writer', '888'); 
```

**现在**这些都是正常的`Mysql`，所以任何人都可以重写`Mysqli`

**1) 连接**

```
$DB["host"]   = "localhost";
$DB["dbName"] = "dbname";
$DB["user"]   = "dbuser";
$DB["pass"]   = "dbpass";
$link = mysql_connect($DB["host"],$DB["user"],$DB["pass"]) or die("Connection Failed");
mysql_select_db($DB["dbName"]); 
```

**2）从数据库中调用准确的条目**

```
 $sql = "select * from users where job='Plumber'";
    $reg = mysql_query($sql) or die(mysql_error());
    $aee = mysql_fetch_array($reg);

    echo $aee[name]; // should gives name John 
```

**3) 从数据库结果调用**

```
$qry="select * from users where job='Writer'";
$result=mysql_query($qry) or die($qry);

if(mysql_num_rows($result)=='0'){

echo "No results"; // if not found any for this conditional job

}else{
while($line=mysql_fetch_array($result)){

echo $line[name]."<br>"; // should gives Robert <br> Irin

}
} 
```

这真的对我有很大帮助，并且不鼓励我打开下一个新问题，`insert,update,delete`因为我相信这对像我这样的新手很有帮助~谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:40:18.983

我的答案不是关于“如何从一个原始 API 重写到另一个”这个主题，而是“它是如何趋向于这样的”

**1) 连接**

```
$params["db"]   = "dbname";
$params["user"] = "dbuser";
$params["pass"] = "dbpass";
$db = new DB($params); 
```

**2）从数据库中调用准确的条目**

```
echo $db->getOne("select name from users where job='Plumber'"); 
```

**3) 从数据库结果调用**

```
$data = $db->getAll("select * from users where job='Writer'");
// assuming the following code inside of PHP template
?>
<? if(!$data): ?>
    No results
<? else: ?>
<ul>
    <? foreach($data as $line): ?>
    <li><?=$line['name']?></li>
    <? endforeach ?>
</ul>
<? endif ?> 
```